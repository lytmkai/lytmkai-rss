<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[Jetpack Compose ä»å…¥é—¨åˆ°ç²¾é€šï¼ˆå…­ï¼‰ï¼šæ¶æ„ä¸å·¥ç¨‹åŒ–]]></title>    <link>https://juejin.cn/post/7602529888483442751</link>    <guid>https://juejin.cn/post/7602529888483442751</guid>    <pubDate>2026-02-04T03:06:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602529888483442751" data-draft-id="7602503154506383401" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Jetpack Compose ä»å…¥é—¨åˆ°ç²¾é€šï¼ˆå…­ï¼‰ï¼šæ¶æ„ä¸å·¥ç¨‹åŒ–"/> <meta itemprop="keywords" content="Android Studio,Android,Android Jetpack"/> <meta itemprop="datePublished" content="2026-02-04T03:06:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é‚¹é˜¿æ¶›æ¶›æ¶›æ¶›æ¶›æ¶›æ¶›æ¶›"/> <meta itemprop="url" content="https://juejin.cn/user/3808364009106839"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Jetpack Compose ä»å…¥é—¨åˆ°ç²¾é€šï¼ˆå…­ï¼‰ï¼šæ¶æ„ä¸å·¥ç¨‹åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808364009106839/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é‚¹é˜¿æ¶›æ¶›æ¶›æ¶›æ¶›æ¶›æ¶›æ¶›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T03:06:41.000Z" title="Wed Feb 04 2026 03:06:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ·±å…¥ç†è§£ Compose åœ¨å¤§å‹é¡¹ç›®ä¸­çš„æ¶æ„è®¾è®¡ï¼ŒæŒæ¡ Navigationã€Hiltã€æ€§èƒ½ä¼˜åŒ–ç­‰ä¼ä¸šçº§å¼€å‘æŠ€èƒ½ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨å‰äº”ç¯‡ä¸­ï¼Œæˆ‘ä»¬æŒæ¡äº† Compose çš„æ ¸å¿ƒå¼€å‘æŠ€èƒ½ã€‚ä½†åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è€ƒè™‘ï¼š</p>
<ul>
<li>å¦‚ä½•ç»„ç»‡å¤§å‹é¡¹ç›®çš„ä»£ç ç»“æ„ï¼Ÿ</li>
<li>å¦‚ä½•å®ç°é¡µé¢å¯¼èˆªï¼Ÿ</li>
<li>å¦‚ä½•ç®¡ç†ä¾èµ–æ³¨å…¥ï¼Ÿ</li>
<li>å¦‚ä½•ä¼˜åŒ–åº”ç”¨æ€§èƒ½ï¼Ÿ</li>
</ul>
<p>æœ¬ç¯‡æ–‡ç« å°†æ·±å…¥è®²è§£ Compose åœ¨ä¼ä¸šçº§é¡¹ç›®ä¸­çš„æ¶æ„è®¾è®¡ä¸å·¥ç¨‹åŒ–å®è·µã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€é¡¹ç›®æ¶æ„è®¾è®¡</h2>
<h3 data-id="heading-2">1.1 æ¨èçš„é¡¹ç›®ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">app/
â”œâ”€â”€ src/main/java/com/example/app/
â”‚   â”œâ”€â”€ App.kt                    <span class="hljs-comment"># Application ç±»</span>
â”‚   â”œâ”€â”€ di/                       <span class="hljs-comment"># ä¾èµ–æ³¨å…¥æ¨¡å—</span>
â”‚   â”‚   â”œâ”€â”€ AppModule.kt
â”‚   â”‚   â””â”€â”€ NetworkModule.kt
â”‚   â”œâ”€â”€ data/                     <span class="hljs-comment"># æ•°æ®å±‚</span>
â”‚   â”‚   â”œâ”€â”€ <span class="hljs-built_in">local</span>/                <span class="hljs-comment"># æœ¬åœ°æ•°æ®æº</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ dao/
â”‚   â”‚   â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â”‚   â””â”€â”€ AppDatabase.kt
â”‚   â”‚   â”œâ”€â”€ remote/               <span class="hljs-comment"># è¿œç¨‹æ•°æ®æº</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚   â”œâ”€â”€ repository/           <span class="hljs-comment"># ä»“åº“å±‚</span>
â”‚   â”‚   â””â”€â”€ model/                <span class="hljs-comment"># æ•°æ®æ¨¡å‹</span>
â”‚   â”œâ”€â”€ domain/                   <span class="hljs-comment"># é¢†åŸŸå±‚ï¼ˆå¯é€‰ï¼‰</span>
â”‚   â”‚   â”œâ”€â”€ usecase/
â”‚   â”‚   â””â”€â”€ model/
â”‚   â”œâ”€â”€ ui/                       <span class="hljs-comment"># UI å±‚</span>
â”‚   â”‚   â”œâ”€â”€ theme/                <span class="hljs-comment"># ä¸»é¢˜é…ç½®</span>
â”‚   â”‚   â”œâ”€â”€ component/            <span class="hljs-comment"># é€šç”¨ç»„ä»¶</span>
â”‚   â”‚   â”œâ”€â”€ screen/               <span class="hljs-comment"># é¡µé¢</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ home/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ HomeScreen.kt
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ HomeViewModel.kt
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ HomeUiState.kt
â”‚   â”‚   â”‚   â””â”€â”€ profile/
â”‚   â”‚   â””â”€â”€ navigation/           <span class="hljs-comment"># å¯¼èˆªé…ç½®</span>
â”‚   â””â”€â”€ util/                     <span class="hljs-comment"># å·¥å…·ç±»</span>
â””â”€â”€ src/main/res/                 <span class="hljs-comment"># èµ„æºæ–‡ä»¶</span>
</code></pre>
<h3 data-id="heading-3">1.2 åˆ†å±‚æ¶æ„åŸåˆ™</h3>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      åˆ†å±‚æ¶æ„å›¾                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  UI Layer (Presentation)                                â”‚   â”‚
â”‚  â”‚  - Composable å‡½æ•°                                       â”‚   â”‚
â”‚  â”‚  - ViewModel                                             â”‚   â”‚
â”‚  â”‚  - UI State                                              â”‚   â”‚
â”‚  â”‚  èŒè´£ï¼šå±•ç¤ºæ•°æ®ã€å¤„ç†ç”¨æˆ·äº¤äº’                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â†“                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Domain Layer (Optional)                                â”‚   â”‚
â”‚  â”‚  - UseCase                                               â”‚   â”‚
â”‚  â”‚  - Domain Model                                          â”‚   â”‚
â”‚  â”‚  èŒè´£ï¼šä¸šåŠ¡é€»è¾‘ã€æ•°æ®è½¬æ¢                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â†“                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Data Layer                                             â”‚   â”‚
â”‚  â”‚  - Repository                                            â”‚   â”‚
â”‚  â”‚  - DataSource (Local/Remote)                             â”‚   â”‚
â”‚  â”‚  èŒè´£ï¼šæ•°æ®è·å–ã€ç¼“å­˜ç­–ç•¥                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  ä¾èµ–æ–¹å‘ï¼šUI â†’ Domain â†’ Data                                  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h2 data-id="heading-4">äºŒã€Navigation ç»„ä»¶</h2>
<h3 data-id="heading-5">2.1 ä¸ºä»€ä¹ˆéœ€è¦ Navigationï¼Ÿ</h3>
<p>ä¼ ç»Ÿ Fragment å¯¼èˆªçš„é—®é¢˜ï¼š</p>
<ul>
<li>äº‹åŠ¡ç®¡ç†å¤æ‚</li>
<li>è¿”å›æ ˆéš¾ä»¥æ§åˆ¶</li>
<li>æ·±åº¦é“¾æ¥å®ç°å›°éš¾</li>
<li>å‚æ•°ä¼ é€’ç±»å‹ä¸å®‰å…¨</li>
</ul>
<p><strong>Compose Navigation çš„ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>å£°æ˜å¼å¯¼èˆª</li>
<li>ç±»å‹å®‰å…¨çš„å‚æ•°ä¼ é€’</li>
<li>è‡ªåŠ¨å¤„ç†è¿”å›æ ˆ</li>
<li>æ”¯æŒæ·±å±‚é“¾æ¥</li>
</ul>
<h3 data-id="heading-6">2.2 Navigation åŸºç¡€</h3>
<h4 data-id="heading-7">2.2.1 è®¾ç½®å¯¼èˆª</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. æ·»åŠ ä¾èµ–</span>
<span class="hljs-comment">// implementation("androidx.navigation:navigation-compose:2.7.0")</span>

<span class="hljs-comment">// 2. å®šä¹‰è·¯ç”±</span>
<span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Screen</span>(<span class="hljs-keyword">val</span> route: String) {
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">object</span> Home : Screen(<span class="hljs-string">"home"</span>)
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">object</span> Profile : Screen(<span class="hljs-string">"profile/{userId}"</span>) {
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createRoute</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>)</span></span> = <span class="hljs-string">"profile/<span class="hljs-variable">$userId</span>"</span>
    }
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">object</span> Settings : Screen(<span class="hljs-string">"settings"</span>)
}

<span class="hljs-comment">// 3. åˆ›å»º NavHost</span>
<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">AppNavigation</span><span class="hljs-params">(
    navController: <span class="hljs-type">NavHostController</span> = rememberNavController()</span></span>
) {
    NavHost(
        navController = navController,
        startDestination = Screen.Home.route
    ) {
        composable(Screen.Home.route) {
            HomeScreen(
                onNavigateToProfile = { userId -&gt;
                    navController.navigate(Screen.Profile.createRoute(userId))
                }
            )
        }
        
        composable(
            route = Screen.Profile.route,
            arguments = listOf(
                navArgument(<span class="hljs-string">"userId"</span>) { type = NavType.StringType }
            )
        ) { backStackEntry -&gt;
            <span class="hljs-keyword">val</span> userId = backStackEntry.arguments?.getString(<span class="hljs-string">"userId"</span>) ?: <span class="hljs-string">""</span>
            ProfileScreen(
                userId = userId,
                onBack = { navController.popBackStack() }
            )
        }
        
        composable(Screen.Settings.route) {
            SettingsScreen()
        }
    }
}
</code></pre>
<h4 data-id="heading-8">2.2.2 å¯¼èˆªæ“ä½œ</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å¯¼èˆªåˆ°ç›®æ ‡é¡µé¢</span>
navController.navigate(<span class="hljs-string">"profile/123"</span>)

<span class="hljs-comment">// è¿”å›ä¸Šä¸€é¡µ</span>
navController.popBackStack()

<span class="hljs-comment">// è¿”å›æŒ‡å®šé¡µé¢</span>
navController.popBackStack(<span class="hljs-string">"home"</span>, inclusive = <span class="hljs-literal">false</span>)

<span class="hljs-comment">// æ¸…ç©ºè¿”å›æ ˆå¹¶å¯¼èˆª</span>
navController.navigate(<span class="hljs-string">"home"</span>) {
    popUpTo(<span class="hljs-string">"home"</span>) { inclusive = <span class="hljs-literal">true</span> }
}

<span class="hljs-comment">// å¯åŠ¨å•ä¾‹é¡µé¢ï¼ˆé˜²æ­¢é‡å¤ï¼‰</span>
navController.navigate(<span class="hljs-string">"detail"</span>) {
    launchSingleTop = <span class="hljs-literal">true</span>
}
</code></pre>
<h3 data-id="heading-9">2.3 ç±»å‹å®‰å…¨çš„å¯¼èˆªï¼ˆNavigation 2.8.0+ï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. å®šä¹‰åºåˆ—åŒ–è·¯ç”±ç±»</span>
<span class="hljs-meta">@Serializable</span>
<span class="hljs-keyword">object</span> Home

<span class="hljs-meta">@Serializable</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Profile</span>(<span class="hljs-keyword">val</span> userId: String)

<span class="hljs-meta">@Serializable</span>
<span class="hljs-keyword">object</span> Settings

<span class="hljs-comment">// 2. åˆ›å»º NavHost</span>
<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">AppNavigation</span><span class="hljs-params">(
    navController: <span class="hljs-type">NavHostController</span> = rememberNavController()</span></span>
) {
    NavHost(
        navController = navController,
        startDestination = Home
    ) {
        composable&lt;Home&gt; {
            HomeScreen(
                onNavigateToProfile = { userId -&gt;
                    navController.navigate(Profile(userId))
                }
            )
        }
        
        composable&lt;Profile&gt; { backStackEntry -&gt;
            <span class="hljs-keyword">val</span> profile: Profile = backStackEntry.toRoute()
            ProfileScreen(userId = profile.userId)
        }
        
        composable&lt;Settings&gt; {
            SettingsScreen()
        }
    }
}
</code></pre>
<h3 data-id="heading-10">2.4 åº•éƒ¨å¯¼èˆªæ </h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">BottomNavApp</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> navController = rememberNavController()
    
    <span class="hljs-keyword">val</span> items = listOf(
        BottomNavItem.Home,
        BottomNavItem.Search,
        BottomNavItem.Profile
    )
    
    Scaffold(
        bottomBar = {
            NavigationBar {
                <span class="hljs-keyword">val</span> navBackStackEntry <span class="hljs-keyword">by</span> navController.currentBackStackEntryAsState()
                <span class="hljs-keyword">val</span> currentDestination = navBackStackEntry?.destination
                
                items.forEach { item -&gt;
                    NavigationBarItem(
                        icon = { Icon(item.icon, contentDescription = item.label) },
                        label = { Text(item.label) },
                        selected = currentDestination?.hierarchy?.any {
                            it.route == item.route
                        } == <span class="hljs-literal">true</span>,
                        onClick = {
                            navController.navigate(item.route) {
                                popUpTo(navController.graph.findStartDestination().id) {
                                    saveState = <span class="hljs-literal">true</span>
                                }
                                launchSingleTop = <span class="hljs-literal">true</span>
                                restoreState = <span class="hljs-literal">true</span>
                            }
                        }
                    )
                }
            }
        }
    ) { innerPadding -&gt;
        NavHost(
            navController = navController,
            startDestination = BottomNavItem.Home.route,
            modifier = Modifier.padding(innerPadding)
        ) {
            composable(BottomNavItem.Home.route) { HomeScreen() }
            composable(BottomNavItem.Search.route) { SearchScreen() }
            composable(BottomNavItem.Profile.route) { ProfileScreen() }
        }
    }
}

<span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BottomNavItem</span>(
    <span class="hljs-keyword">val</span> route: String,
    <span class="hljs-keyword">val</span> icon: ImageVector,
    <span class="hljs-keyword">val</span> label: String
) {
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">object</span> Home : BottomNavItem(<span class="hljs-string">"home"</span>, Icons.Default.Home, <span class="hljs-string">"é¦–é¡µ"</span>)
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">object</span> Search : BottomNavItem(<span class="hljs-string">"search"</span>, Icons.Default.Search, <span class="hljs-string">"æœç´¢"</span>)
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">object</span> Profile : BottomNavItem(<span class="hljs-string">"profile"</span>, Icons.Default.Person, <span class="hljs-string">"æˆ‘çš„"</span>)
}
</code></pre>
<h3 data-id="heading-11">2.5 æ·±å±‚é“¾æ¥</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// AndroidManifest.xml ä¸­é…ç½®</span>
&lt;activity
    android:name=<span class="hljs-string">".MainActivity"</span>
    android:exported=<span class="hljs-string">"true"</span>&gt;
    &lt;intent-filter&gt;
        &lt;action android:name=<span class="hljs-string">"android.intent.action.VIEW"</span> /&gt;
        &lt;category android:name=<span class="hljs-string">"android.intent.category.DEFAULT"</span> /&gt;
        &lt;category android:name=<span class="hljs-string">"android.intent.category.BROWSABLE"</span> /&gt;
        &lt;<span class="hljs-keyword">data</span> android:scheme=<span class="hljs-string">"https"</span> android:host=<span class="hljs-string">"example.com"</span> /&gt;
    &lt;/intent-filter&gt;
&lt;/activity&gt;

<span class="hljs-comment">// Navigation ä¸­é…ç½®æ·±å±‚é“¾æ¥</span>
composable(
    route = <span class="hljs-string">"article/{articleId}"</span>,
    deepLinks = listOf(
        navDeepLink {
            uriPattern = <span class="hljs-string">"https://example.com/article/{articleId}"</span>
        }
    ),
    arguments = listOf(
        navArgument(<span class="hljs-string">"articleId"</span>) { type = NavType.StringType }
    )
) { backStackEntry -&gt;
    <span class="hljs-keyword">val</span> articleId = backStackEntry.arguments?.getString(<span class="hljs-string">"articleId"</span>)
    ArticleScreen(articleId = articleId)
}
</code></pre>
<hr/>
<h2 data-id="heading-12">ä¸‰ã€Hilt ä¾èµ–æ³¨å…¥</h2>
<h3 data-id="heading-13">3.1 ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–æ³¨å…¥ï¼Ÿ</h3>
<p><strong>ä¼ ç»Ÿæ–¹å¼çš„ç—›ç‚¹</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ ç´§è€¦åˆï¼Œéš¾ä»¥æµ‹è¯•</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserRepository</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> api = RetrofitClient.api  <span class="hljs-comment">// ç¡¬ç¼–ç ä¾èµ–</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> dao = AppDatabase.dao     <span class="hljs-comment">// ç¡¬ç¼–ç ä¾èµ–</span>
}
</code></pre>
<p><strong>ä¾èµ–æ³¨å…¥çš„ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>è§£è€¦ç»„ä»¶</li>
<li>ä¾¿äºå•å…ƒæµ‹è¯•</li>
<li>ç”Ÿå‘½å‘¨æœŸè‡ªåŠ¨ç®¡ç†</li>
<li>å•ä¾‹æ§åˆ¶</li>
</ul>
<h3 data-id="heading-14">3.2 Hilt åŸºç¡€é…ç½®</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. æ·»åŠ ä¾èµ–</span>
<span class="hljs-comment">/*
plugins {
    id("kotlin-kapt")
    id("dagger.hilt.android.plugin")
}

dependencies {
    implementation("com.google.dagger:hilt-android:2.48")
    kapt("com.google.dagger:hilt-compiler:2.48")
    implementation("androidx.hilt:hilt-navigation-compose:1.1.0")
}
*/</span>

<span class="hljs-comment">// 2. Application ç±»</span>
<span class="hljs-meta">@HiltAndroidApp</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplication</span> : <span class="hljs-type">Application</span>()

<span class="hljs-comment">// 3. Activity</span>
<span class="hljs-meta">@AndroidEntryPoint</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">ComponentActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContent {
            MyApp()
        }
    }
}
</code></pre>
<h3 data-id="heading-15">3.3 å®šä¹‰å’Œæ³¨å…¥ä¾èµ–</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. åˆ›å»º Module</span>
<span class="hljs-meta">@Module</span>
<span class="hljs-meta">@InstallIn(SingletonComponent::class)</span>
<span class="hljs-keyword">object</span> NetworkModule {
    
    <span class="hljs-meta">@Provides</span>
    <span class="hljs-meta">@Singleton</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">provideRetrofit</span><span class="hljs-params">()</span></span>: Retrofit {
        <span class="hljs-keyword">return</span> Retrofit.Builder()
            .baseUrl(<span class="hljs-string">"https://api.example.com/"</span>)
            .addConverterFactory(GsonConverterFactory.create())
            .build()
    }
    
    <span class="hljs-meta">@Provides</span>
    <span class="hljs-meta">@Singleton</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">provideApiService</span><span class="hljs-params">(retrofit: <span class="hljs-type">Retrofit</span>)</span></span>: ApiService {
        <span class="hljs-keyword">return</span> retrofit.create(ApiService::<span class="hljs-keyword">class</span>.java)
    }
}

<span class="hljs-meta">@Module</span>
<span class="hljs-meta">@InstallIn(SingletonComponent::class)</span>
<span class="hljs-keyword">object</span> DatabaseModule {
    
    <span class="hljs-meta">@Provides</span>
    <span class="hljs-meta">@Singleton</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">provideDatabase</span><span class="hljs-params">(<span class="hljs-meta">@ApplicationContext</span> context: <span class="hljs-type">Context</span>)</span></span>: AppDatabase {
        <span class="hljs-keyword">return</span> Room.databaseBuilder(
            context,
            AppDatabase::<span class="hljs-keyword">class</span>.java,
            <span class="hljs-string">"app_database"</span>
        ).build()
    }
    
    <span class="hljs-meta">@Provides</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">provideUserDao</span><span class="hljs-params">(database: <span class="hljs-type">AppDatabase</span>)</span></span>: UserDao {
        <span class="hljs-keyword">return</span> database.userDao()
    }
}

<span class="hljs-comment">// 2. Repository æ³¨å…¥ä¾èµ–</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserRepository</span> <span class="hljs-meta">@Inject</span> <span class="hljs-keyword">constructor</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> apiService: ApiService,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> userDao: UserDao
) {
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getUsers</span><span class="hljs-params">()</span></span>: List&lt;User&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> users = apiService.getUsers()
            userDao.insertAll(users)
            users
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            userDao.getAll()
        }
    }
}

<span class="hljs-comment">// 3. ViewModel æ³¨å…¥ Repository</span>
<span class="hljs-meta">@HiltViewModel</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserViewModel</span> <span class="hljs-meta">@Inject</span> <span class="hljs-keyword">constructor</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> userRepository: UserRepository
) : ViewModel() {
    <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// 4. Composable è·å– ViewModel</span>
<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">UserScreen</span><span class="hljs-params">(
    viewModel: <span class="hljs-type">UserViewModel</span> = hiltViewModel()</span></span>
) {
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<h3 data-id="heading-16">3.4 é™å®šç¬¦ï¼ˆQualifiersï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å®šä¹‰é™å®šç¬¦</span>
<span class="hljs-meta">@Qualifier</span>
<span class="hljs-meta">@Retention(AnnotationRetention.BINARY)</span>
<span class="hljs-keyword">annotation</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthInterceptorOkHttpClient</span>

<span class="hljs-meta">@Qualifier</span>
<span class="hljs-meta">@Retention(AnnotationRetention.BINARY)</span>
<span class="hljs-keyword">annotation</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OtherInterceptorOkHttpClient</span>

<span class="hljs-comment">// æä¾›ä¸åŒå®ä¾‹</span>
<span class="hljs-meta">@Module</span>
<span class="hljs-meta">@InstallIn(SingletonComponent::class)</span>
<span class="hljs-keyword">object</span> NetworkModule {
    
    <span class="hljs-meta">@AuthInterceptorOkHttpClient</span>
    <span class="hljs-meta">@Provides</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">provideAuthOkHttpClient</span><span class="hljs-params">(authInterceptor: <span class="hljs-type">AuthInterceptor</span>)</span></span>: OkHttpClient {
        <span class="hljs-keyword">return</span> OkHttpClient.Builder()
            .addInterceptor(authInterceptor)
            .build()
    }
    
    <span class="hljs-meta">@OtherInterceptorOkHttpClient</span>
    <span class="hljs-meta">@Provides</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">provideOtherOkHttpClient</span><span class="hljs-params">(otherInterceptor: <span class="hljs-type">OtherInterceptor</span>)</span></span>: OkHttpClient {
        <span class="hljs-keyword">return</span> OkHttpClient.Builder()
            .addInterceptor(otherInterceptor)
            .build()
    }
}

<span class="hljs-comment">// æ³¨å…¥æŒ‡å®šå®ä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ApiService</span> <span class="hljs-meta">@Inject</span> <span class="hljs-keyword">constructor</span>(
    <span class="hljs-meta">@AuthInterceptorOkHttpClient</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> client: OkHttpClient
)
</code></pre>
<hr/>
<h2 data-id="heading-17">å››ã€æ€§èƒ½ä¼˜åŒ–</h2>
<h3 data-id="heading-18">4.1 é‡ç»„ä¼˜åŒ–</h3>
<h4 data-id="heading-19">4.1.1 é¿å…ä¸å¿…è¦çš„é‡ç»„</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šæ•´ä¸ªåˆ—è¡¨éƒ½ä¼šé‡ç»„</span>
<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">UserList</span><span class="hljs-params">(users: <span class="hljs-type">List</span>&lt;<span class="hljs-type">User</span>&gt;)</span></span> {
    Column {
        users.forEach { user -&gt;
            UserItem(user = user)  <span class="hljs-comment">// æ‰€æœ‰ item éƒ½ä¼šé‡ç»„</span>
        }
    }
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨ LazyColumnï¼Œåªé‡ç»„å¯è§é¡¹</span>
<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">UserList</span><span class="hljs-params">(users: <span class="hljs-type">List</span>&lt;<span class="hljs-type">User</span>&gt;)</span></span> {
    LazyColumn {
        items(users, key = { it.id }) { user -&gt;
            UserItem(user = user)
        }
    }
}
</code></pre>
<h4 data-id="heading-20">4.1.2 ä½¿ç”¨ @Stable å’Œ @Immutable</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ ä¸ç¨³å®šç±»ï¼Œä»»ä½•å˜åŒ–éƒ½ä¼šè§¦å‘é‡ç»„</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-keyword">var</span> name: String = <span class="hljs-string">""</span>
}

<span class="hljs-comment">// âœ… ç¨³å®šç±»</span>
<span class="hljs-meta">@Stable</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-keyword">var</span> name: String = <span class="hljs-string">""</span>
}

<span class="hljs-comment">// âœ… ä¸å¯å˜ç±»ï¼Œå®ä¾‹æ›¿æ¢æ—¶æ‰é‡ç»„</span>
<span class="hljs-meta">@Immutable</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>(
    <span class="hljs-keyword">val</span> name: String
)
</code></pre>
<h4 data-id="heading-21">4.1.3 ä½¿ç”¨ remember ç¼“å­˜è®¡ç®—</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ExpensiveComponent</span><span class="hljs-params">(<span class="hljs-keyword">data</span>: <span class="hljs-type">List</span>&lt;<span class="hljs-type">Int</span>&gt;)</span></span> {
    <span class="hljs-comment">// âŒ æ¯æ¬¡é‡ç»„éƒ½è®¡ç®—</span>
    <span class="hljs-keyword">val</span> sum = <span class="hljs-keyword">data</span>.sum()
    
    <span class="hljs-comment">// âœ… åªåœ¨ data å˜åŒ–æ—¶è®¡ç®—</span>
    <span class="hljs-keyword">val</span> sum = remember(<span class="hljs-keyword">data</span>) { <span class="hljs-keyword">data</span>.sum() }
    
    Text(<span class="hljs-string">"Sum: <span class="hljs-variable">$sum</span>"</span>)
}
</code></pre>
<h3 data-id="heading-22">4.2 å¸ƒå±€æ£€æŸ¥å™¨ä½¿ç”¨</h3>
<pre><code class="hljs language-vbnet" lang="vbnet">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ä½¿ç”¨å¸ƒå±€æ£€æŸ¥å™¨ä¼˜åŒ–æ€§èƒ½                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  <span class="hljs-number">1</span>. æ‰“å¼€ Layout Inspector                                       â”‚
â”‚     Tools â†’ Layout Inspector                                    â”‚
â”‚                                                                 â”‚
â”‚  <span class="hljs-number">2</span>. æŸ¥çœ‹é‡ç»„æ¬¡æ•°                                                  â”‚
â”‚     - å³ä¾§é¢æ¿æ˜¾ç¤ºæ¯ä¸ª Composable çš„é‡ç»„æ¬¡æ•°                    â”‚
â”‚     - é«˜é‡ç»„æ¬¡æ•°çš„ç»„ä»¶éœ€è¦ä¼˜åŒ–                                  â”‚
â”‚                                                                 â”‚
â”‚  <span class="hljs-number">3</span>. å¸¸è§ä¼˜åŒ–æ–¹æ¡ˆ                                                  â”‚
â”‚     - ä½¿ç”¨ <span class="hljs-keyword">key</span> ä¼˜åŒ–åˆ—è¡¨                                          â”‚
â”‚     - æå–ä¸ä¾èµ–çŠ¶æ€çš„éƒ¨åˆ†                                       â”‚
â”‚     - ä½¿ç”¨ derivedStateOf å‡å°‘é‡ç»„                              â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-23">4.3 å›¾ç‰‡åŠ è½½ä¼˜åŒ–</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä½¿ç”¨ Coil åŠ è½½å›¾ç‰‡</span>
AsyncImage(
    model = ImageRequest.Builder(LocalContext.current)
        .<span class="hljs-keyword">data</span>(imageUrl)
        .crossfade(<span class="hljs-literal">true</span>)
        .placeholder(R.drawable.placeholder)
        .error(R.drawable.error)
        .memoryCachePolicy(CachePolicy.ENABLED)
        .diskCachePolicy(CachePolicy.ENABLED)
        .build(),
    contentDescription = <span class="hljs-literal">null</span>,
    contentScale = ContentScale.Crop,
    modifier = Modifier.fillMaxWidth()
)
</code></pre>
<h3 data-id="heading-24">4.4 åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">OptimizedList</span><span class="hljs-params">(items: <span class="hljs-type">List</span>&lt;<span class="hljs-type">Item</span>&gt;)</span></span> {
    LazyColumn {
        items(
            items = items,
            key = { it.id },                    <span class="hljs-comment">// âœ… ä½¿ç”¨ key</span>
            contentType = { it.type }           <span class="hljs-comment">// âœ… ä½¿ç”¨ contentType</span>
        ) { item -&gt;
            <span class="hljs-keyword">when</span> (item.type) {
                Type.HEADER -&gt; HeaderItem(item)
                Type.CONTENT -&gt; ContentItem(item)
            }
        }
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ContentItem</span><span class="hljs-params">(item: <span class="hljs-type">Item</span>)</span></span> {
    <span class="hljs-comment">// âœ… ç¼“å­˜è®¡ç®—ç»“æœ</span>
    <span class="hljs-keyword">val</span> formattedDate = remember(item.date) {
        formatDate(item.date)
    }
    
    <span class="hljs-comment">// âœ… é¿å…åˆ›å»ºæ–°çš„ lambda</span>
    <span class="hljs-keyword">val</span> onClick = remember(item.id) {
        { viewModel.onItemClick(item.id) }
    }
    
    Card(onClick = onClick) {
        Text(formattedDate)
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-25">äº”ã€æµ‹è¯•</h2>
<h3 data-id="heading-26">5.1 Compose UI æµ‹è¯•</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. æ·»åŠ ä¾èµ–</span>
<span class="hljs-comment">// androidTestImplementation("androidx.compose.ui:ui-test-junit4")</span>

<span class="hljs-comment">// 2. ç¼–å†™æµ‹è¯•</span>
<span class="hljs-meta">@RunWith(AndroidJUnit4::class)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CounterTest</span> {
    <span class="hljs-meta">@get:Rule</span>
    <span class="hljs-keyword">val</span> composeTestRule = createComposeRule()
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">counterIncrements_whenClicked</span><span class="hljs-params">()</span></span> {
        composeTestRule.setContent {
            Counter()
        }
        
        <span class="hljs-comment">// æŸ¥æ‰¾å¹¶ç‚¹å‡»æŒ‰é’®</span>
        composeTestRule.onNodeWithText(<span class="hljs-string">"Count: 0"</span>).assertExists()
        composeTestRule.onNodeWithText(<span class="hljs-string">"Increment"</span>).performClick()
        
        <span class="hljs-comment">// éªŒè¯ç»“æœ</span>
        composeTestRule.onNodeWithText(<span class="hljs-string">"Count: 1"</span>).assertExists()
    }
}
</code></pre>
<h3 data-id="heading-27">5.2 ViewModel æµ‹è¯•</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@ExperimentalCoroutinesApi</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserViewModelTest</span> {
    <span class="hljs-meta">@get:Rule</span>
    <span class="hljs-keyword">val</span> instantExecutorRule = InstantTaskExecutorRule()
    
    <span class="hljs-meta">@get:Rule</span>
    <span class="hljs-keyword">val</span> mainDispatcherRule = MainDispatcherRule()
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> viewModel: UserViewModel
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> repository: FakeUserRepository
    
    <span class="hljs-meta">@Before</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span></span> {
        repository = FakeUserRepository()
        viewModel = UserViewModel(repository)
    }
    
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> `load users updates ui state`<span class="hljs-params">()</span></span> = runTest {
        <span class="hljs-comment">// Given</span>
        <span class="hljs-keyword">val</span> users = listOf(User(<span class="hljs-string">"1"</span>, <span class="hljs-string">"Alice"</span>), User(<span class="hljs-string">"2"</span>, <span class="hljs-string">"Bob"</span>))
        repository.setUsers(users)
        
        <span class="hljs-comment">// When</span>
        viewModel.loadUsers()
        
        <span class="hljs-comment">// Then</span>
        assertEquals(UiState.Success(users), viewModel.uiState.value)
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-28">å…­ã€æœ¬ç¯‡å°ç»“</h2>
<p>ä»Šå¤©æˆ‘ä»¬æ·±å…¥æ¢è®¨äº† Compose çš„æ¶æ„ä¸å·¥ç¨‹åŒ–ï¼š</p>
<h3 data-id="heading-29">é¡¹ç›®æ¶æ„</h3>
<ul>
<li>ç†è§£äº†åˆ†å±‚æ¶æ„çš„è®¾è®¡åŸåˆ™</li>
<li>æŒæ¡äº†æ¨èçš„é¡¹ç›®ç»“æ„</li>
</ul>
<h3 data-id="heading-30">Navigation</h3>
<ul>
<li>æŒæ¡äº† Navigation çš„åŸºç¡€ç”¨æ³•</li>
<li>å­¦ä¼šäº†ç±»å‹å®‰å…¨çš„å¯¼èˆª</li>
<li>ç†è§£äº†æ·±å±‚é“¾æ¥çš„å®ç°</li>
</ul>
<h3 data-id="heading-31">Hilt</h3>
<ul>
<li>ç†è§£äº†ä¾èµ–æ³¨å…¥çš„ä¼˜åŠ¿</li>
<li>æŒæ¡äº† Hilt çš„é…ç½®å’Œä½¿ç”¨</li>
<li>å­¦ä¼šäº†é™å®šç¬¦çš„ä½¿ç”¨</li>
</ul>
<h3 data-id="heading-32">æ€§èƒ½ä¼˜åŒ–</h3>
<ul>
<li>æŒæ¡äº†é‡ç»„ä¼˜åŒ–çš„æ–¹æ³•</li>
<li>å­¦ä¼šäº†ä½¿ç”¨å¸ƒå±€æ£€æŸ¥å™¨</li>
<li>ç†è§£äº†åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–</li>
</ul>
<h3 data-id="heading-33">æµ‹è¯•</h3>
<ul>
<li>æŒæ¡äº† Compose UI æµ‹è¯•</li>
<li>å­¦ä¼šäº† ViewModel æµ‹è¯•</li>
</ul>
<hr/>
<h2 data-id="heading-34">ä¸‹ç¯‡é¢„å‘Š</h2>
<p><strong>ç¬¬ä¸ƒç¯‡ï¼šé«˜çº§ç‰¹æ€§ä¸å®æˆ˜</strong> å°†æ·±å…¥è®²è§£ï¼š</p>
<ul>
<li>è‡ªå®šä¹‰ç»˜åˆ¶ä¸ Canvas</li>
<li>å›¾å½¢å˜æ¢ä¸ Shader æ•ˆæœ</li>
<li>çª—å£ Insets ä¸è¾¹ç¼˜åˆ°è¾¹ç¼˜é€‚é…</li>
<li>å®Œæ•´å®æˆ˜é¡¹ç›®</li>
</ul>
<p>æ•¬è¯·æœŸå¾…ï¼</p>
<hr/>
<blockquote>
<p>ğŸ“Œ <strong>ç³»åˆ—æ–‡ç« å¯¼èˆª</strong></p>
<ul>
<li>ç¬¬ä¸€ç¯‡ï¼šåˆè¯† Compose âœ…</li>
<li>ç¬¬äºŒç¯‡ï¼šæ ¸å¿ƒåŸºçŸ³ âœ…</li>
<li>ç¬¬ä¸‰ç¯‡ï¼šçŠ¶æ€ç®¡ç† âœ…</li>
<li>ç¬¬å››ç¯‡ï¼šMaterial ç»„ä»¶ä¸ä¸»é¢˜ âœ…</li>
<li>ç¬¬äº”ç¯‡ï¼šåŠ¨ç”»ä¸äº¤äº’ âœ…</li>
<li>ç¬¬å…­ç¯‡ï¼šæ¶æ„ä¸å·¥ç¨‹åŒ–ï¼ˆå½“å‰ï¼‰âœ…</li>
<li>ç¬¬ä¸ƒç¯‡ï¼šé«˜çº§ç‰¹æ€§ä¸å®æˆ˜</li>
</ul>
</blockquote>
<hr/>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ <strong>ç‚¹èµ</strong>ã€<strong>æ”¶è—</strong>ã€<strong>å…³æ³¨</strong>ï¼æœ‰ä»»ä½•é—®é¢˜å¯ä»¥åœ¨è¯„è®ºåŒºç•™è¨€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Jetpack Compose ä»å…¥é—¨åˆ°ç²¾é€šï¼ˆä¸ƒï¼‰ï¼šé«˜çº§ç‰¹æ€§ä¸å®æˆ˜]]></title>    <link>https://juejin.cn/post/7602497125268979718</link>    <guid>https://juejin.cn/post/7602497125268979718</guid>    <pubDate>2026-02-04T03:07:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602497125268979718" data-draft-id="7602512064976863295" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Jetpack Compose ä»å…¥é—¨åˆ°ç²¾é€šï¼ˆä¸ƒï¼‰ï¼šé«˜çº§ç‰¹æ€§ä¸å®æˆ˜"/> <meta itemprop="keywords" content="Android,Android Studio,Android Jetpack"/> <meta itemprop="datePublished" content="2026-02-04T03:07:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é‚¹é˜¿æ¶›æ¶›æ¶›æ¶›æ¶›æ¶›æ¶›æ¶›"/> <meta itemprop="url" content="https://juejin.cn/user/3808364009106839"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Jetpack Compose ä»å…¥é—¨åˆ°ç²¾é€šï¼ˆä¸ƒï¼‰ï¼šé«˜çº§ç‰¹æ€§ä¸å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808364009106839/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é‚¹é˜¿æ¶›æ¶›æ¶›æ¶›æ¶›æ¶›æ¶›æ¶›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T03:07:38.000Z" title="Wed Feb 04 2026 03:07:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ·±å…¥æ¢ç´¢ Compose çš„é«˜çº§ç‰¹æ€§ï¼Œé€šè¿‡å®Œæ•´å®æˆ˜é¡¹ç›®æŒæ¡ä¼ä¸šçº§å¼€å‘æŠ€èƒ½ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>ç»è¿‡å‰å…­ç¯‡çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº† Compose çš„æ ¸å¿ƒå¼€å‘æŠ€èƒ½ã€‚æœ¬ç¯‡æ–‡ç« å°†æ¢ç´¢ Compose çš„é«˜çº§ç‰¹æ€§ï¼Œå¹¶é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„å®æˆ˜é¡¹ç›®ï¼Œå°†æ‰€å­¦çŸ¥è¯†èä¼šè´¯é€šã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€è‡ªå®šä¹‰ç»˜åˆ¶</h2>
<h3 data-id="heading-2">1.1 Canvas åŸºç¡€</h3>
<p>Canvas æ˜¯ Compose ä¸­è‡ªå®šä¹‰ç»˜åˆ¶çš„æ ¸å¿ƒç»„ä»¶ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">CustomCanvas</span><span class="hljs-params">()</span></span> {
    Canvas(
        modifier = Modifier
            .fillMaxWidth()
            .height(<span class="hljs-number">200.</span>dp)
    ) {
        <span class="hljs-comment">// ç»˜åˆ¶çŸ©å½¢</span>
        drawRect(
            color = Color.Blue,
            topLeft = Offset(<span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>),
            size = Size(<span class="hljs-number">100f</span>, <span class="hljs-number">100f</span>)
        )
        
        <span class="hljs-comment">// ç»˜åˆ¶åœ†å½¢</span>
        drawCircle(
            color = Color.Red,
            radius = <span class="hljs-number">50f</span>,
            center = Offset(<span class="hljs-number">200f</span>, <span class="hljs-number">100f</span>)
        )
        
        <span class="hljs-comment">// ç»˜åˆ¶çº¿æ¡</span>
        drawLine(
            color = Color.Green,
            start = Offset(<span class="hljs-number">0f</span>, <span class="hljs-number">200f</span>),
            end = Offset(size.width, <span class="hljs-number">200f</span>),
            strokeWidth = <span class="hljs-number">5f</span>
        )
    }
}
</code></pre>
<h3 data-id="heading-3">1.2 Path ç»˜åˆ¶</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">TriangleShape</span><span class="hljs-params">()</span></span> {
    Canvas(modifier = Modifier.size(<span class="hljs-number">100.</span>dp)) {
        <span class="hljs-keyword">val</span> path = Path().apply {
            moveTo(size.width / <span class="hljs-number">2</span>, <span class="hljs-number">0f</span>)
            lineTo(size.width, size.height)
            lineTo(<span class="hljs-number">0f</span>, size.height)
            close()
        }
        
        drawPath(
            path = path,
            color = Color.Blue
        )
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">CurvedLine</span><span class="hljs-params">()</span></span> {
    Canvas(modifier = Modifier.fillMaxWidth().height(<span class="hljs-number">200.</span>dp)) {
        <span class="hljs-keyword">val</span> path = Path().apply {
            moveTo(<span class="hljs-number">0f</span>, size.height / <span class="hljs-number">2</span>)
            
            <span class="hljs-comment">// äºŒæ¬¡è´å¡å°”æ›²çº¿</span>
            quadraticBezierTo(
                size.width / <span class="hljs-number">2</span>, <span class="hljs-number">0f</span>,
                size.width, size.height / <span class="hljs-number">2</span>
            )
        }
        
        drawPath(
            path = path,
            color = Color.Red,
            style = Stroke(width = <span class="hljs-number">5f</span>)
        )
    }
}
</code></pre>
<h3 data-id="heading-4">1.3 æ¸å˜ç»˜åˆ¶</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">GradientBackground</span><span class="hljs-params">()</span></span> {
    Canvas(modifier = Modifier.fillMaxSize()) {
        <span class="hljs-keyword">val</span> gradient = Brush.linearGradient(
            colors = listOf(Color.Blue, Color.Purple, Color.Red),
            start = Offset(<span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>),
            end = Offset(size.width, size.height)
        )
        
        drawRect(brush = gradient)
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">RadialGradientCircle</span><span class="hljs-params">()</span></span> {
    Canvas(modifier = Modifier.size(<span class="hljs-number">200.</span>dp)) {
        <span class="hljs-keyword">val</span> gradient = Brush.radialGradient(
            colors = listOf(Color.Yellow, Color.Orange, Color.Red),
            center = center,
            radius = size.minDimension / <span class="hljs-number">2</span>
        )
        
        drawCircle(brush = gradient)
    }
}
</code></pre>
<h3 data-id="heading-5">1.4 å®æˆ˜ï¼šé¥¼å›¾ç»„ä»¶</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">PieChart</span><span class="hljs-params">(
    <span class="hljs-keyword">data</span>: <span class="hljs-type">List</span>&lt;<span class="hljs-type">PieData</span>&gt;,
    modifier: <span class="hljs-type">Modifier</span> = Modifier
        .size(<span class="hljs-number">200.</span>dp)</span></span>
) {
    <span class="hljs-keyword">val</span> total = <span class="hljs-keyword">data</span>.sumOf { it.value.toDouble() }.toFloat()
    <span class="hljs-keyword">var</span> startAngle = -<span class="hljs-number">90f</span>
    
    Canvas(modifier = modifier) {
        <span class="hljs-keyword">data</span>.forEach { item -&gt;
            <span class="hljs-keyword">val</span> sweepAngle = (item.value / total) * <span class="hljs-number">360f</span>
            
            drawArc(
                color = item.color,
                startAngle = startAngle,
                sweepAngle = sweepAngle,
                useCenter = <span class="hljs-literal">true</span>
            )
            
            startAngle += sweepAngle
        }
    }
}

<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PieData</span>(
    <span class="hljs-keyword">val</span> value: <span class="hljs-built_in">Float</span>,
    <span class="hljs-keyword">val</span> color: Color,
    <span class="hljs-keyword">val</span> label: String
)
</code></pre>
<hr/>
<h2 data-id="heading-6">äºŒã€å›¾å½¢å˜æ¢</h2>
<h3 data-id="heading-7">2.1 GraphicsLayer</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">TransformedBox</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> rotation <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-number">0f</span>) }
    <span class="hljs-keyword">var</span> scale <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-number">1f</span>) }
    
    Box(
        modifier = Modifier
            .graphicsLayer {
                rotationZ = rotation
                scaleX = scale
                scaleY = scale
                <span class="hljs-comment">// é˜´å½±</span>
                shadowElevation = <span class="hljs-number">10f</span>
                <span class="hljs-comment">// è£å‰ª</span>
                clip = <span class="hljs-literal">true</span>
                shape = RoundedCornerShape(<span class="hljs-number">16.</span>dp)
            }
            .size(<span class="hljs-number">100.</span>dp)
            .background(Color.Blue)
            .clickable {
                rotation += <span class="hljs-number">45f</span>
                scale = <span class="hljs-keyword">if</span> (scale == <span class="hljs-number">1f</span>) <span class="hljs-number">1.5f</span> <span class="hljs-keyword">else</span> <span class="hljs-number">1f</span>
            }
    )
}
</code></pre>
<h3 data-id="heading-8">2.2 BlendMode æ··åˆæ¨¡å¼</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">BlendModeDemo</span><span class="hljs-params">()</span></span> {
    Canvas(modifier = Modifier.fillMaxSize()) {
        <span class="hljs-comment">// ç»˜åˆ¶çº¢è‰²åœ†å½¢</span>
        drawCircle(
            color = Color.Red,
            radius = <span class="hljs-number">100f</span>,
            center = Offset(size.width / <span class="hljs-number">2</span> - <span class="hljs-number">50</span>, size.height / <span class="hljs-number">2</span>)
        )
        
        <span class="hljs-comment">// ä½¿ç”¨æ··åˆæ¨¡å¼ç»˜åˆ¶è“è‰²åœ†å½¢</span>
        drawCircle(
            color = Color.Blue,
            radius = <span class="hljs-number">100f</span>,
            center = Offset(size.width / <span class="hljs-number">2</span> + <span class="hljs-number">50</span>, size.height / <span class="hljs-number">2</span>),
            blendMode = BlendMode.Multiply  <span class="hljs-comment">// æ­£ç‰‡å åº•</span>
        )
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-9">ä¸‰ã€çª—å£ Insets å¤„ç†</h2>
<h3 data-id="heading-10">3.1 ä»€ä¹ˆæ˜¯ Insetsï¼Ÿ</h3>
<p>Insets è¡¨ç¤ºç³»ç»Ÿ UI å æ®çš„åŒºåŸŸï¼š</p>
<ul>
<li>çŠ¶æ€æ ï¼ˆStatus Barï¼‰</li>
<li>å¯¼èˆªæ ï¼ˆNavigation Barï¼‰</li>
<li>é”®ç›˜ï¼ˆIMEï¼‰</li>
<li>åˆ˜æµ·å±/æŒ–å­”å±ï¼ˆDisplay Cutoutï¼‰</li>
</ul>
<h3 data-id="heading-11">3.2 WindowInsets API</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">InsetsDemo</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// è·å–å„ç§ Insets</span>
    <span class="hljs-keyword">val</span> statusBars = WindowInsets.statusBars
    <span class="hljs-keyword">val</span> navigationBars = WindowInsets.navigationBars
    <span class="hljs-keyword">val</span> ime = WindowInsets.ime
    <span class="hljs-keyword">val</span> safeDrawing = WindowInsets.safeDrawing
    
    <span class="hljs-comment">// åº”ç”¨åˆ°å¸ƒå±€</span>
    Box(
        modifier = Modifier
            .fillMaxSize()
            .windowInsetsPadding(statusBars)
            .windowInsetsPadding(navigationBars)
    ) {
        <span class="hljs-comment">// å†…å®¹ä¸ä¼šè¢«ç³»ç»Ÿæ é®æŒ¡</span>
    }
}
</code></pre>
<h3 data-id="heading-12">3.3 è¾¹ç¼˜åˆ°è¾¹ç¼˜é€‚é…</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">ComponentActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        
        <span class="hljs-comment">// å¯ç”¨è¾¹ç¼˜åˆ°è¾¹ç¼˜</span>
        enableEdgeToEdge()
        
        setContent {
            MyApp()
        }
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">EdgeToEdgeScreen</span><span class="hljs-params">()</span></span> {
    Scaffold(
        modifier = Modifier.fillMaxSize(),
        topBar = {
            TopAppBar(
                title = { Text(<span class="hljs-string">"æ ‡é¢˜"</span>) },
                modifier = Modifier.windowInsetsPadding(WindowInsets.statusBars)
            )
        },
        bottomBar = {
            NavigationBar(
                modifier = Modifier.windowInsetsPadding(WindowInsets.navigationBars)
            ) {
                <span class="hljs-comment">// å¯¼èˆªé¡¹</span>
            }
        }
    ) { innerPadding -&gt;
        <span class="hljs-comment">// å†…å®¹åŒºåŸŸè‡ªåŠ¨é¿å¼€ç³»ç»Ÿæ </span>
        LazyColumn(
            modifier = Modifier.padding(innerPadding)
        ) {
            <span class="hljs-comment">// åˆ—è¡¨å†…å®¹</span>
        }
    }
}
</code></pre>
<h3 data-id="heading-13">3.4 é”®ç›˜å¤„ç†</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">KeyboardAwareScreen</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> imeInsets = WindowInsets.ime
    <span class="hljs-keyword">val</span> isKeyboardVisible = imeInsets.getBottom(LocalDensity.current) &gt; <span class="hljs-number">0</span>
    
    Column(
        modifier = Modifier
            .fillMaxSize()
            .windowInsetsPadding(WindowInsets.statusBars)
    ) {
        <span class="hljs-comment">// å†…å®¹åŒºåŸŸ</span>
        LazyColumn(
            modifier = Modifier.weight(<span class="hljs-number">1f</span>)
        ) {
            <span class="hljs-comment">// åˆ—è¡¨é¡¹</span>
        }
        
        <span class="hljs-comment">// è¾“å…¥æ¡†</span>
        OutlinedTextField(
            value = text,
            onValueChange = { text = it },
            modifier = Modifier
                .fillMaxWidth()
                .windowInsetsPadding(WindowInsets.ime)
        )
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-14">å››ã€å®æˆ˜é¡¹ç›®ï¼šæ–°é—»é˜…è¯» App</h2>
<h3 data-id="heading-15">4.1 é¡¹ç›®æ¶æ„</h3>
<pre><code class="hljs language-css" lang="css">app/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ remote/
â”‚   â”‚   â”œâ”€â”€ NewsApi<span class="hljs-selector-class">.kt</span>
â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”œâ”€â”€ local/
â”‚   â”‚   â”œâ”€â”€ NewsDao<span class="hljs-selector-class">.kt</span>
â”‚   â”‚   â””â”€â”€ AppDatabase<span class="hljs-selector-class">.kt</span>
â”‚   â”œâ”€â”€ repository/
â”‚   â”‚   â””â”€â”€ NewsRepository<span class="hljs-selector-class">.kt</span>
â”‚   â””â”€â”€ model/
â”‚       â””â”€â”€ <span class="hljs-selector-tag">Article</span><span class="hljs-selector-class">.kt</span>
â”œâ”€â”€ ui/
â”‚   â”œâ”€â”€ theme/
â”‚   â”‚   â”œâ”€â”€ <span class="hljs-attribute">Color</span><span class="hljs-selector-class">.kt</span>
â”‚   â”‚   â”œâ”€â”€ Theme<span class="hljs-selector-class">.kt</span>
â”‚   â”‚   â””â”€â”€ Type<span class="hljs-selector-class">.kt</span>
â”‚   â”œâ”€â”€ component/
â”‚   â”‚   â”œâ”€â”€ ArticleCard<span class="hljs-selector-class">.kt</span>
â”‚   â”‚   â”œâ”€â”€ LoadingIndicator<span class="hljs-selector-class">.kt</span>
â”‚   â”‚   â””â”€â”€ ErrorMessage<span class="hljs-selector-class">.kt</span>
â”‚   â”œâ”€â”€ screen/
â”‚   â”‚   â”œâ”€â”€ home/
â”‚   â”‚   â”‚   â”œâ”€â”€ HomeScreen<span class="hljs-selector-class">.kt</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ HomeViewModel<span class="hljs-selector-class">.kt</span>
â”‚   â”‚   â”‚   â””â”€â”€ HomeUiState<span class="hljs-selector-class">.kt</span>
â”‚   â”‚   â”œâ”€â”€ detail/
â”‚   â”‚   â”‚   â”œâ”€â”€ DetailScreen<span class="hljs-selector-class">.kt</span>
â”‚   â”‚   â”‚   â””â”€â”€ DetailViewModel<span class="hljs-selector-class">.kt</span>
â”‚   â”‚   â””â”€â”€ bookmark/
â”‚   â”‚       â””â”€â”€ BookmarkScreen<span class="hljs-selector-class">.kt</span>
â”‚   â””â”€â”€ navigation/
â”‚       â””â”€â”€ AppNavigation<span class="hljs-selector-class">.kt</span>
â””â”€â”€ di/
    â””â”€â”€ AppModule<span class="hljs-selector-class">.kt</span>
</code></pre>
<h3 data-id="heading-16">4.2 æ•°æ®å±‚å®ç°</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ•°æ®æ¨¡å‹</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Article</span>(
    <span class="hljs-keyword">val</span> id: String,
    <span class="hljs-keyword">val</span> title: String,
    <span class="hljs-keyword">val</span> summary: String,
    <span class="hljs-keyword">val</span> imageUrl: String,
    <span class="hljs-keyword">val</span> publishedAt: String,
    <span class="hljs-keyword">val</span> isBookmarked: <span class="hljs-built_in">Boolean</span> = <span class="hljs-literal">false</span>
)

<span class="hljs-comment">// API æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">NewsApi</span> {
    <span class="hljs-meta">@GET(<span class="hljs-string">"top-headlines"</span>)</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getTopHeadlines</span><span class="hljs-params">(
        <span class="hljs-meta">@Query(<span class="hljs-string">"country"</span>)</span> country: <span class="hljs-type">String</span> = <span class="hljs-string">"us"</span>,
        <span class="hljs-meta">@Query(<span class="hljs-string">"apiKey"</span>)</span> apiKey: <span class="hljs-type">String</span> = BuildConfig.API_KEY
    )</span></span>: NewsResponse
    
    <span class="hljs-meta">@GET(<span class="hljs-string">"everything"</span>)</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">searchNews</span><span class="hljs-params">(
        <span class="hljs-meta">@Query(<span class="hljs-string">"q"</span>)</span> query: <span class="hljs-type">String</span>,
        <span class="hljs-meta">@Query(<span class="hljs-string">"apiKey"</span>)</span> apiKey: <span class="hljs-type">String</span> = BuildConfig.API_KEY
    )</span></span>: NewsResponse
}

<span class="hljs-comment">// æ•°æ®åº“</span>
<span class="hljs-meta">@Dao</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">NewsDao</span> {
    <span class="hljs-meta">@Query(<span class="hljs-string">"SELECT * FROM articles ORDER BY publishedAt DESC"</span>)</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getAllArticles</span><span class="hljs-params">()</span></span>: Flow&lt;List&lt;ArticleEntity&gt;&gt;
    
    <span class="hljs-meta">@Query(<span class="hljs-string">"SELECT * FROM articles WHERE isBookmarked = 1"</span>)</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getBookmarkedArticles</span><span class="hljs-params">()</span></span>: Flow&lt;List&lt;ArticleEntity&gt;&gt;
    
    <span class="hljs-meta">@Insert(onConflict = OnConflictStrategy.REPLACE)</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">insertArticles</span><span class="hljs-params">(articles: <span class="hljs-type">List</span>&lt;<span class="hljs-type">ArticleEntity</span>&gt;)</span></span>
    
    <span class="hljs-meta">@Query(<span class="hljs-string">"UPDATE articles SET isBookmarked = :isBookmarked WHERE id = :articleId"</span>)</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateBookmark</span><span class="hljs-params">(articleId: <span class="hljs-type">String</span>, isBookmarked: <span class="hljs-type">Boolean</span>)</span></span>
}

<span class="hljs-comment">// Repository</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">NewsRepository</span> <span class="hljs-meta">@Inject</span> <span class="hljs-keyword">constructor</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> api: NewsApi,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> dao: NewsDao
) {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getArticles</span><span class="hljs-params">()</span></span>: Flow&lt;List&lt;Article&gt;&gt; = flow {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> response = api.getTopHeadlines()
            <span class="hljs-keyword">val</span> articles = response.articles.map { it.toDomain() }
            dao.insertArticles(articles.map { it.toEntity() })
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            <span class="hljs-comment">// ç½‘ç»œå¤±è´¥æ—¶ä½¿ç”¨æœ¬åœ°ç¼“å­˜</span>
        }
        
        emitAll(dao.getAllArticles().map { list -&gt;
            list.map { it.toDomain() }
        })
    }
    
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">toggleBookmark</span><span class="hljs-params">(articleId: <span class="hljs-type">String</span>, isBookmarked: <span class="hljs-type">Boolean</span>)</span></span> {
        dao.updateBookmark(articleId, isBookmarked)
    }
}
</code></pre>
<h3 data-id="heading-17">4.3 ViewModel å®ç°</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">sealed</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">HomeUiState</span> {
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">object</span> Loading : HomeUiState
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Success</span>(<span class="hljs-keyword">val</span> articles: List&lt;Article&gt;) : HomeUiState
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Error</span>(<span class="hljs-keyword">val</span> message: String) : HomeUiState
}

<span class="hljs-meta">@HiltViewModel</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">HomeViewModel</span> <span class="hljs-meta">@Inject</span> <span class="hljs-keyword">constructor</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> repository: NewsRepository
) : ViewModel() {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _uiState = MutableStateFlow&lt;HomeUiState&gt;(HomeUiState.Loading)
    <span class="hljs-keyword">val</span> uiState: StateFlow&lt;HomeUiState&gt; = _uiState.asStateFlow()
    
    <span class="hljs-keyword">init</span> {
        loadArticles()
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadArticles</span><span class="hljs-params">()</span></span> {
        viewModelScope.launch {
            repository.getArticles()
                .onStart { _uiState.value = HomeUiState.Loading }
                .<span class="hljs-keyword">catch</span> { e -&gt;
                    _uiState.value = HomeUiState.Error(e.message ?: <span class="hljs-string">"Unknown error"</span>)
                }
                .collect { articles -&gt;
                    _uiState.value = HomeUiState.Success(articles)
                }
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">toggleBookmark</span><span class="hljs-params">(articleId: <span class="hljs-type">String</span>, isBookmarked: <span class="hljs-type">Boolean</span>)</span></span> {
        viewModelScope.launch {
            repository.toggleBookmark(articleId, isBookmarked)
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">refresh</span><span class="hljs-params">()</span></span> {
        loadArticles()
    }
}
</code></pre>
<h3 data-id="heading-18">4.4 UI å®ç°</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">HomeScreen</span><span class="hljs-params">(
    viewModel: <span class="hljs-type">HomeViewModel</span> = hiltViewModel()</span></span>,
    onArticleClick: (String) -&gt; <span class="hljs-built_in">Unit</span>
) {
    <span class="hljs-keyword">val</span> uiState <span class="hljs-keyword">by</span> viewModel.uiState.collectAsState()
    
    Scaffold(
        topBar = {
            TopAppBar(
                title = { Text(<span class="hljs-string">"æ–°é—»"</span>) },
                actions = {
                    IconButton(onClick = { viewModel.refresh() }) {
                        Icon(Icons.Default.Refresh, contentDescription = <span class="hljs-string">"åˆ·æ–°"</span>)
                    }
                }
            )
        }
    ) { innerPadding -&gt;
        <span class="hljs-keyword">when</span> (<span class="hljs-keyword">val</span> state = uiState) {
            <span class="hljs-keyword">is</span> HomeUiState.Loading -&gt; LoadingIndicator()
            <span class="hljs-keyword">is</span> HomeUiState.Error -&gt; ErrorMessage(
                message = state.message,
                onRetry = { viewModel.refresh() }
            )
            <span class="hljs-keyword">is</span> HomeUiState.Success -&gt; {
                ArticleList(
                    articles = state.articles,
                    onArticleClick = onArticleClick,
                    onBookmarkClick = { id, bookmarked -&gt;
                        viewModel.toggleBookmark(id, bookmarked)
                    },
                    modifier = Modifier.padding(innerPadding)
                )
            }
        }
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ArticleList</span><span class="hljs-params">(
    articles: <span class="hljs-type">List</span>&lt;<span class="hljs-type">Article</span>&gt;,
    onArticleClick: (<span class="hljs-type">String</span>) -&gt; <span class="hljs-type">Unit</span>,
    onBookmarkClick: (<span class="hljs-type">String</span>, <span class="hljs-type">Boolean</span>) -&gt; <span class="hljs-type">Unit</span>,
    modifier: <span class="hljs-type">Modifier</span> = Modifier
)</span></span> {
    LazyColumn(
        modifier = modifier.fillMaxSize(),
        contentPadding = PaddingValues(<span class="hljs-number">16.</span>dp),
        verticalArrangement = Arrangement.spacedBy(<span class="hljs-number">16.</span>dp)
    ) {
        items(articles, key = { it.id }) { article -&gt;
            ArticleCard(
                article = article,
                onClick = { onArticleClick(article.id) },
                onBookmarkClick = { onBookmarkClick(article.id, !article.isBookmarked) }
            )
        }
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ArticleCard</span><span class="hljs-params">(
    article: <span class="hljs-type">Article</span>,
    onClick: () -&gt; <span class="hljs-type">Unit</span>,
    onBookmarkClick: () -&gt; <span class="hljs-type">Unit</span>
)</span></span> {
    Card(
        modifier = Modifier.fillMaxWidth(),
        onClick = onClick
    ) {
        Column {
            AsyncImage(
                model = article.imageUrl,
                contentDescription = <span class="hljs-literal">null</span>,
                modifier = Modifier
                    .fillMaxWidth()
                    .height(<span class="hljs-number">200.</span>dp),
                contentScale = ContentScale.Crop
            )
            
            Column(modifier = Modifier.padding(<span class="hljs-number">16.</span>dp)) {
                Text(
                    text = article.title,
                    style = MaterialTheme.typography.titleLarge
                )
                
                Spacer(modifier = Modifier.height(<span class="hljs-number">8.</span>dp))
                
                Text(
                    text = article.summary,
                    style = MaterialTheme.typography.bodyMedium,
                    maxLines = <span class="hljs-number">2</span>,
                    overflow = TextOverflow.Ellipsis
                )
                
                Spacer(modifier = Modifier.height(<span class="hljs-number">8.</span>dp))
                
                Row(
                    modifier = Modifier.fillMaxWidth(),
                    horizontalArrangement = Arrangement.SpaceBetween,
                    verticalAlignment = Alignment.CenterVertically
                ) {
                    Text(
                        text = article.publishedAt,
                        style = MaterialTheme.typography.bodySmall,
                        color = MaterialTheme.colorScheme.onSurfaceVariant
                    )
                    
                    IconButton(onClick = onBookmarkClick) {
                        Icon(
                            imageVector = <span class="hljs-keyword">if</span> (article.isBookmarked) {
                                Icons.Default.Bookmark
                            } <span class="hljs-keyword">else</span> {
                                Icons.Default.BookmarkBorder
                            },
                            contentDescription = <span class="hljs-string">"æ”¶è—"</span>
                        )
                    }
                }
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-19">4.5 å¯¼èˆªé…ç½®</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">AppNavigation</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> navController = rememberNavController()
    
    NavHost(
        navController = navController,
        startDestination = <span class="hljs-string">"home"</span>
    ) {
        composable(<span class="hljs-string">"home"</span>) {
            HomeScreen(
                onArticleClick = { articleId -&gt;
                    navController.navigate(<span class="hljs-string">"detail/<span class="hljs-variable">$articleId</span>"</span>)
                }
            )
        }
        
        composable(
            route = <span class="hljs-string">"detail/{articleId}"</span>,
            arguments = listOf(
                navArgument(<span class="hljs-string">"articleId"</span>) { type = NavType.StringType }
            )
        ) { backStackEntry -&gt;
            <span class="hljs-keyword">val</span> articleId = backStackEntry.arguments?.getString(<span class="hljs-string">"articleId"</span>) ?: <span class="hljs-string">""</span>
            DetailScreen(
                articleId = articleId,
                onBack = { navController.popBackStack() }
            )
        }
        
        composable(<span class="hljs-string">"bookmarks"</span>) {
            BookmarkScreen()
        }
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-20">äº”ã€æ€§èƒ½ä¼˜åŒ–å®æˆ˜</h2>
<h3 data-id="heading-21">5.1 åˆ—è¡¨ä¼˜åŒ–</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">OptimizedArticleList</span><span class="hljs-params">(articles: <span class="hljs-type">List</span>&lt;<span class="hljs-type">Article</span>&gt;)</span></span> {
    LazyColumn {
        items(
            items = articles,
            key = { it.id },                    <span class="hljs-comment">// ä½¿ç”¨ key ä¼˜åŒ–é‡ç»„</span>
            contentType = { it::<span class="hljs-keyword">class</span> }         <span class="hljs-comment">// ä½¿ç”¨ contentType ä¼˜åŒ–å¤ç”¨</span>
        ) { article -&gt;
            ArticleCard(
                article = article,
                <span class="hljs-comment">// ç¼“å­˜ lambda é¿å…æ¯æ¬¡é‡ç»„åˆ›å»º</span>
                onClick = remember(article.id) {
                    { viewModel.onArticleClick(article.id) }
                }
            )
        }
    }
}
</code></pre>
<h3 data-id="heading-22">5.2 å›¾ç‰‡ä¼˜åŒ–</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">OptimizedImage</span><span class="hljs-params">(imageUrl: <span class="hljs-type">String</span>)</span></span> {
    AsyncImage(
        model = ImageRequest.Builder(LocalContext.current)
            .<span class="hljs-keyword">data</span>(imageUrl)
            .crossfade(<span class="hljs-literal">true</span>)
            .placeholder(R.drawable.placeholder)
            .error(R.drawable.error)
            <span class="hljs-comment">// å†…å­˜ç¼“å­˜</span>
            .memoryCachePolicy(CachePolicy.ENABLED)
            <span class="hljs-comment">// ç£ç›˜ç¼“å­˜</span>
            .diskCachePolicy(CachePolicy.ENABLED)
            <span class="hljs-comment">// å›¾ç‰‡å°ºå¯¸</span>
            .size(<span class="hljs-number">800</span>, <span class="hljs-number">600</span>)
            .build(),
        contentDescription = <span class="hljs-literal">null</span>,
        contentScale = ContentScale.Crop,
        modifier = Modifier.fillMaxWidth()
    )
}
</code></pre>
<hr/>
<h2 data-id="heading-23">å…­ã€æœ¬ç¯‡å°ç»“</h2>
<p>é€šè¿‡æœ¬ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ï¼š</p>
<ol>
<li><strong>æŒæ¡äº†è‡ªå®šä¹‰ç»˜åˆ¶</strong>ï¼šCanvasã€Pathã€æ¸å˜ç»˜åˆ¶</li>
<li><strong>ç†è§£äº†å›¾å½¢å˜æ¢</strong>ï¼šGraphicsLayerã€BlendMode</li>
<li><strong>å­¦ä¼šäº† Insets å¤„ç†</strong>ï¼šè¾¹ç¼˜åˆ°è¾¹ç¼˜é€‚é…ã€é”®ç›˜å¤„ç†</li>
<li><strong>å®Œæˆäº†å®æˆ˜é¡¹ç›®</strong>ï¼šæ–°é—»é˜…è¯» App çš„å®Œæ•´å®ç°</li>
<li><strong>å®è·µäº†æ€§èƒ½ä¼˜åŒ–</strong>ï¼šåˆ—è¡¨ä¼˜åŒ–ã€å›¾ç‰‡ä¼˜åŒ–</li>
</ol>
<hr/>
<h2 data-id="heading-24">ç³»åˆ—æ€»ç»“</h2>
<p>ç»è¿‡ä¸ƒç¯‡çš„å­¦ä¹ ï¼Œæˆ‘ä»¬ç³»ç»Ÿåœ°æŒæ¡äº† Jetpack Composeï¼š</p>





































<table><thead><tr><th>ç¯‡ç« </th><th>æ ¸å¿ƒå†…å®¹</th></tr></thead><tbody><tr><td>ç¬¬ä¸€ç¯‡</td><td>ç¯å¢ƒæ­å»ºã€Composable åŸºç¡€ã€Material ç»„ä»¶å…¥é—¨</td></tr><tr><td>ç¬¬äºŒç¯‡</td><td>Modifier åŸç†ã€å¸ƒå±€ç³»ç»Ÿã€LazyColumnã€ConstraintLayout</td></tr><tr><td>ç¬¬ä¸‰ç¯‡</td><td>Slot Tableã€çŠ¶æ€ç®¡ç†ã€ViewModelã€å‰¯ä½œç”¨ API</td></tr><tr><td>ç¬¬å››ç¯‡</td><td>Material Design 3ã€ä¸»é¢˜å®šåˆ¶ã€æ·±è‰²æ¨¡å¼ã€åŠ¨æ€å–è‰²</td></tr><tr><td>ç¬¬äº”ç¯‡</td><td>åŠ¨ç”»ç³»ç»Ÿã€æ‰‹åŠ¿å¤„ç†ã€è‡ªå®šä¹‰åŠ¨ç”»</td></tr><tr><td>ç¬¬å…­ç¯‡</td><td>é¡¹ç›®æ¶æ„ã€Navigationã€Hiltã€æ€§èƒ½ä¼˜åŒ–</td></tr><tr><td>ç¬¬ä¸ƒç¯‡</td><td>è‡ªå®šä¹‰ç»˜åˆ¶ã€Insets å¤„ç†ã€å®æˆ˜é¡¹ç›®</td></tr></tbody></table>
<p>å¸Œæœ›è¿™ä¸ªç³»åˆ—èƒ½å¸®åŠ©ä½ çœŸæ­£ç²¾é€š Composeï¼</p>
<hr/>
<p>å¦‚æœæœ¬ç³»åˆ—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ <strong>ç‚¹èµ</strong>ã€<strong>æ”¶è—</strong>ã€<strong>å…³æ³¨</strong>ï¼æœ‰ä»»ä½•é—®é¢˜å¯ä»¥åœ¨è¯„è®ºåŒºç•™è¨€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®æµ‹ OpenClawï¼šå·ç§°å…è´¹å¼€æºï¼Œæˆ‘å´èŠ±äº† 500 ç¾å…ƒï¼æ‰’æ¸… AI æ™ºèƒ½ä½“çš„æˆæœ¬é™·é˜±]]></title>    <link>https://juejin.cn/post/7602512064976879679</link>    <guid>https://juejin.cn/post/7602512064976879679</guid>    <pubDate>2026-02-04T03:09:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602512064976879679" data-draft-id="7602454700504727593" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®æµ‹ OpenClawï¼šå·ç§°å…è´¹å¼€æºï¼Œæˆ‘å´èŠ±äº† 500 ç¾å…ƒï¼æ‰’æ¸… AI æ™ºèƒ½ä½“çš„æˆæœ¬é™·é˜±"/> <meta itemprop="keywords" content="å¼€æº,äººå·¥æ™ºèƒ½,Python"/> <meta itemprop="datePublished" content="2026-02-04T03:09:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éä¼˜ç§€ç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/3984285870341288"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®æµ‹ OpenClawï¼šå·ç§°å…è´¹å¼€æºï¼Œæˆ‘å´èŠ±äº† 500 ç¾å…ƒï¼æ‰’æ¸… AI æ™ºèƒ½ä½“çš„æˆæœ¬é™·é˜±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3984285870341288/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éä¼˜ç§€ç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T03:09:35.000Z" title="Wed Feb 04 2026 03:09:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘è¯•ç”¨äº†GitHub 20.4ä¸‡æ˜Ÿçš„ã€Œå…è´¹ã€AIåŠ©æ‰‹OpenClawï¼Œè·Ÿç€ç½‘çº¢æ•™ç¨‹æ“ä½œï¼Œç»“æœé’±åŒ…é­äº†æ®ƒâ€”â€”è¿™ç¯‡500ç¾å…ƒçœŸå®ä½“éªŒï¼Œèƒ½å¸®ä½ çœæ•°ç™¾ç¾å…ƒï¼Œä¹Ÿèƒ½å¸®ä½ é¿å¼€æ•°åƒç¾å…ƒçš„å‘ï¼</p>
<p>å…ˆä¸Šæ ¸å¿ƒåå·®ï¼šç‚’ä½œ vs ç°å®ï¼Œå…è´¹çš„è°è¨€ç¬é—´æˆ³ç ´</p>





















<table><thead><tr><th>ä»–ä»¬è¯´çš„</th><th>å®é™…è¦èŠ±çš„é’±</th></tr></thead><tbody><tr><td>å¼€æºå…è´¹ï¼</td><td>è½¯ä»¶ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mtext>ï¼Œ</mtext><mi>A</mi><mi>P</mi><mi>I</mi><mi>t</mi><mi>o</mi><mi>k</mi><mi>e</mi><mi>n</mi><mtext>ï¼š</mtext></mrow><annotation encoding="application/x-tex">0ï¼ŒAPI tokenï¼š</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord">0</span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal">t</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord cjk_fallback">ï¼š</span></span></span></span></span>50-500+/æœˆ</td></tr><tr><td>å®‰è£…å³ç”¨ï¼</td><td>VPSæœåŠ¡å™¨ï¼š$23-70/æœˆ</td></tr><tr><td>åˆè®¡ï¼šå…è´¹</td><td>åˆè®¡ï¼š$100-500+/æœˆ</td></tr></tbody></table>
<h4 data-id="heading-0">ä¸€ã€ç½‘çº¢å¹çš„â€œç¥ä»™åŠŸèƒ½â€ï¼Œå…¨æ˜¯å¥—è·¯é“ºå«</h4>
<p>ä½ åˆ·åˆ°çš„æ¼”ç¤ºã€æ•™ç¨‹é‡Œï¼ŒOpenClawï¼ˆæ›¾ç”¨åMoltBot/Clawdbotï¼‰æ— æ‰€ä¸èƒ½ï¼š</p>
<p>âœ… ç¡çœ æ—¶è‡ªåŠ¨å†™å®Œæ•´åŠŸèƒ½ä»£ç </p>
<p>âœ… ç›‘æ§ç³»ç»Ÿ+ä¸»åŠ¨å‘è­¦æŠ¥</p>
<p>âœ…  Telegram/å¾®ä¿¡å®æ—¶å›å¤æ¶ˆæ¯</p>
<p>âœ…  è‡ªåŠ¨æPRã€å®¡ä»£ç ã€æµè§ˆç½‘é¡µ</p>
<p>éº»çœç†å·¥æˆæƒã€å¼€æºå…è´¹ã€å®‰è£…å³ç”¨ï¼Œç½‘çº¢æ“ä½œå¾—è½»æ¾æ— æ¯”ï¼Œå¯æ²¡äººè¯´èƒŒåçš„æˆæœ¬çœŸç›¸ã€‚</p>
<h4 data-id="heading-1">äºŒã€ è¯¦ç»†æˆæœ¬æ‹†è§£ï¼šâ€œå…è´¹â€åªæ˜¯å†°å±±ä¸€è§’</h4>
<h5 data-id="heading-2">çœŸæ­£å…è´¹çš„ç»„ä»¶ï¼ˆä»…3ä¸ªï¼‰</h5>
<ul>
<li>OpenClawè½¯ä»¶ï¼ˆMITè®¸å¯è¯ï¼‰ï¼š$0</li>
<li>Cloudflareéš§é“ï¼š$0</li>
<li>LiteLLMä»£ç†ï¼š$0</li>
</ul>
<h5 data-id="heading-3">å¿…èŠ±çš„æ ¸å¿ƒæˆæœ¬ï¼ˆ2å¤§ç±»ï¼Œå æ¯”99%ï¼‰</h5>
<ol>
<li>VPSæœåŠ¡å™¨ï¼ˆAzure/DigitalOceanç­‰ï¼‰ï¼šæ¯æœˆ23-70ç¾å…ƒï¼Œåˆšéœ€ï¼ˆæœ¬åœ°ä½é…æœºè·‘ä¸äº†ï¼‰</li>
<li>APIä»¤ç‰Œ+æ¨¡å‹è°ƒç”¨è´¹ï¼šæ¯æœˆ50-500ç¾å…ƒ+ï¼Œ<strong>æœ€å¤§æˆæœ¬å‘ï¼Œä¹Ÿæ˜¯æœ€å®¹æ˜“è¶…æ”¯çš„åœ°æ–¹</strong></li>
</ol>
<h5 data-id="heading-4">APIè´¦å•æ‰æ˜¯â€œåé‡‘å…½â€ï¼šä¸åŒæ¨¡å‹ä»·å·®å·¨å¤§ï¼Œé€‰é”™æ›´è´¹é’±</h5>



































<table><thead><tr><th>æ¨¡å‹</th><th>è¾“å…¥å•ä»·/ç™¾ä¸‡token</th><th>è¾“å‡ºå•ä»·/ç™¾ä¸‡token</th><th>å®é™…ä½“éªŒç»“è®º</th></tr></thead><tbody><tr><td>GPT-4o-mini</td><td>$0.15</td><td>$0.60</td><td>ä¾¿å®œä½†æ²¡ç”¨ï¼Œä»£ç†åœºæ™¯ç›´æ¥æ‹‰èƒ¯</td></tr><tr><td>GPT-4o</td><td>$2.50</td><td>$10</td><td>æœ€ä½å¯ç”¨è´¨é‡ï¼Œæ»¡è¶³åŸºç¡€éœ€æ±‚</td></tr><tr><td>claude 4.5</td><td>$3</td><td>$15</td><td>æ€§ä»·æ¯”å¹³è¡¡ï¼Œæ—¥å¸¸å¤Ÿç”¨</td></tr><tr><td>claude 4.5ï¼ˆOpusï¼‰</td><td>$5</td><td>$25</td><td>ç½‘çº¢æ¼”ç¤ºåŒæ¬¾ï¼ŒåŠŸèƒ½100%è¾¾æ ‡</td></tr></tbody></table>
<h4 data-id="heading-5">ä¸‰ã€ çœŸå®ç”¨æˆ·è¡€æ³ªæ¡ˆä¾‹ï¼šä¸æ˜¯å‡è®¾ï¼Œæ˜¯çœŸçƒ§é’±</h4>
<ul>
<li>MacStoriesä½œè€…è´¹å¾·é‡Œç§‘ï¼šé¦–æœˆ1.8äº¿tokenï¼Œè´¦å•$3600</li>
<li>Xå¹³å°æ™®é€šç”¨æˆ·ï¼šè‡ªåŠ¨åŒ–å¾ªç¯å¤±æ§ï¼Œ<strong>1å¤©çƒ§æ‰$200</strong></li>
<li>MoltMaxxingç—…æ¯’å¸–ï¼šæƒ³å®ç°å®ç”¨åŠŸèƒ½ï¼Œæ¯æœˆè‡³å°‘$200èµ·æ­¥</li>
</ul>
<h4 data-id="heading-6">å››ã€ æœ€å±é™©çš„éšè—æˆæœ¬ï¼šå®šæ—¶ä»»åŠ¡ï¼Œæ¯æœˆæ‚„æ‘¸çƒ§$128+</h4>
<p>è¿™æ˜¯æ‰€æœ‰æ•™ç¨‹éƒ½é¿è€Œä¸è°ˆçš„å‘ï¼ä¼ ç»ŸAIï¼ˆChatGPT/Claudeï¼‰æ˜¯â€œé—®äº†æ‰ç­”ï¼Œç­”å®Œç»“æŸâ€ï¼Œä½†OpenClawå¸¦å¿ƒè·³/å®šæ—¶ä»»åŠ¡ï¼Œæ˜¯â€œä¸»åŠ¨å”¤é†’â†’æ£€æŸ¥â†’æ¨ç†â†’å‘æ¶ˆæ¯â†’ä¼‘çœ â†’å¾ªç¯å¾€å¤â€ï¼Œæ°¸æ— æ­¢å¢ƒï¼</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šç®€å•ç³»ç»Ÿç›‘æ§ï¼ˆæ¯5åˆ†é’Ÿ1æ¬¡ï¼‰</p>
<ol>
<li>å•æ¬¡æ£€æŸ¥æ¶ˆè€—ï¼šçº¦3700 tokenï¼ˆç³»ç»Ÿæç¤º+ä¸Šä¸‹æ–‡+æ¨ç†+å›å¤ï¼‰</li>
<li>æ¯æ—¥æ¶ˆè€—ï¼š288æ¬¡Ã—3700 = 106.56ä¸‡token</li>
<li>æ¯æœˆæ¶ˆè€—ï¼šçº¦3200ä¸‡token</li>
<li>GPT-4oè®¡è´¹ï¼šè¾“å…¥<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>64</mn><mo>+</mo><mtext>è¾“å‡º</mtext></mrow><annotation encoding="application/x-tex">64 + è¾“å‡º</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">64</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord cjk_fallback">è¾“å‡º</span></span></span></span></span>64 = <strong>æ¯æœˆ$128ï¼Œä»…1ä¸ªå®šæ—¶ä»»åŠ¡ï¼</strong></li>
</ol>
<p>è¦æ˜¯ä½ åŠ äº†é‚®ä»¶ç›‘æ§ã€Slackç›‘æ§ã€æœåŠ¡å™¨ä½“æ£€ã€è‚¡ä»·é¢„è­¦ç­‰ï¼Œæ¯ä¸ªä»»åŠ¡æ¯åˆ†é’Ÿè€—tokenï¼Œè´¦å•ä¼šçˆ†ç‚¸å¼å¢é•¿ï¼</p>
<h4 data-id="heading-7">äº”ã€ å»‰ä»·æ¨¡å‹æ›´è´¹é’±ï¼šæˆ‘ç”¨GPT-4o-miniè¸©çš„å‘</h4>
<p>GPT-4o-miniæ¯”GPT-4oä¾¿å®œ17å€ï¼Œæœ¬æƒ³çœé’±ï¼Œç»“æœåè¢«å‘ï¼š
å¤„ç†TypeScripté¡¹ç›®é‡2ä¸ªåŸºç¡€é”™è¯¯ï¼Œminiåªä¼šæŠ¥é”™è¯¯ã€ç›´æ¥æ”¾å¼ƒï¼›è€Œä¸­çº§å¼€å‘è€…60ç§’èƒ½æå®šï¼ŒGPT-4oä¸€æ¬¡å°±è§£å†³ã€‚
å‰5æ¬¡miniå¤±è´¥è¿è¡Œè€—çš„tokené’±ï¼Œæ¯”ç›´æ¥ç”¨GPT-4oè¿˜å¤šâ€”â€”<strong>ä¾¿å®œæ¨¡å‹=ä½æ•ˆ+æ›´è´¹é’±</strong>ï¼</p>
<h4 data-id="heading-8">å…­ã€ â€œæœ¬åœ°è¿è¡Œâ€çš„è°è¨€ï¼š80%æ•ˆæœè¦èŠ±$4000+</h4>
<p>ç½‘ä¸Šæ€»æœ‰äººè¯´â€œæœ¬åœ°è¿è¡Œä¸èŠ±é’±â€ï¼Œå®æµ‹ç¡¬ä»¶é—¨æ§›é«˜åˆ°ç¦»è°±ï¼š</p>
<ul>
<li>Mac Mini M4ï¼ˆ16GBï¼‰$600ï¼šä»…èƒ½è·‘7B/8Bå°æ¨¡å‹ï¼Œæ•ˆæœâ‰ˆGPT-3.5ï¼Œä»£ç†åœºæ™¯å‹‰å¼ºèƒ½ç”¨</li>
<li>Mac Mini M4ï¼ˆ24GBï¼‰$800ï¼šè·‘14Bæ¨¡å‹ï¼Œæ•ˆæœï¼œGPT-4oï¼ŒåŠŸèƒ½å—é™</li>
<li>Mac Studio M2 Ultraï¼ˆ64GBï¼‰$4000ï¼šè·‘30B/70Bæ¨¡å‹ï¼Œæ•ˆæœâ‰ˆ80% GPT-4oï¼Œæ‰ç®—å¯ç”¨</li>
<li>é¡¶é…128GBç‰ˆ$6000ï¼šæ•ˆæœæ¥è¿‘GPT-4oï¼Œä½†å»¶è¿Ÿé«˜ï¼Œè¿˜è¾¾ä¸åˆ°Opusæ°´å¹³
å¤–åŠ æ¯æœˆ10-15ç¾å…ƒç”µè´¹ï¼Œ<strong>ä½äº100å°æ—¶/æœˆä½¿ç”¨ï¼Œäº‘ç«¯æ›´åˆ’ç®—ï¼›è¦Opusçº§æ•ˆæœï¼Œåªèƒ½é€‰äº‘ç«¯</strong>ï¼</li>
</ul>
<h4 data-id="heading-9">ä¸ƒã€ æˆ‘çš„æœ€ç»ˆé…ç½®&amp;æœˆè´¦å•ï¼šå®ç”¨ä¸è¸©é›·ç‰ˆ</h4>
<p>infrastructureï¼šAzure VMï¼ˆæ¯å¤©ç”¨8å°æ—¶ï¼‰<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>23</mn><mi mathvariant="normal">/</mi><mtext>æœˆ</mtext><mo>+</mo><mi>C</mi><mi>l</mi><mi>o</mi><mi>u</mi><mi>d</mi><mi>f</mi><mi>l</mi><mi>a</mi><mi>r</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">23/æœˆ + Cloudflare </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">23/</span><span class="mord cjk_fallback">æœˆ</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.01968em;">Cl</span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right:0.10764em;">df</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">a</span><span class="mord mathnormal">re</span></span></span></span></span>0</p>
<p>modelï¼šAzure OpenAI GPT-4oï¼Œæ¯æœˆ50-80M tokenï¼Œ$80-120/æœˆ</p>
<p>integrationsï¼šTelegram+Discord+GitHub Webhooks å‡$0</p>
<p><strong>æ€»èŠ±è´¹ï¼šæ¯æœˆ$100-150</strong></p>
<h4 data-id="heading-10">å…«ã€ åˆ°åº•å€¼ä¸å€¼å¾—ç”¨ï¼Ÿæˆ‘çš„ç»“è®º+2026å¹´å±•æœ›</h4>
<p>âœ… å€¼å¾—ç”¨çš„å‰æï¼ˆç¼ºä¸€ä¸å¯ï¼‰ï¼š</p>
<ol>
<li>æ¯æœˆAIé¢„ç®—â‰¥$100</li>
<li>èƒ½æ¥å—å¿…é¡»ç”¨GPT-4oåŠä»¥ä¸Šæ¨¡å‹</li>
<li>æ¸…æ¥šå®šæ—¶ä»»åŠ¡ä¼šæˆå€å¢æˆæœ¬ï¼Œèƒ½æ¥å—ä¸€å¤œçƒ§$50ä¸æ…Œ</li>
</ol>
<p>âŒ ä¸å»ºè®®ç”¨çš„æƒ…å†µï¼šæƒ³çœé’±ã€è¿½æ±‚â€œå…è´¹â€ã€ä»…éœ€åŸºç¡€èŠå¤©åŠŸèƒ½</p>
<p>2026å¹´å±•æœ›ï¼šå¤§æ¦‚ç‡ä¼šå‡ºç°Anthropic/OpenAIä¸“å±â€œæ™ºèƒ½ä½“å¥—é¤â€ï¼ˆ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>300</mn><mo>âˆ’</mo><mn>500</mn><mi mathvariant="normal">/</mi><mtext>æœˆï¼‰ï¼Œä¼´éšæ›´ä¼˜é€Ÿç‡é™åˆ¶ã€æ›´ä½ä»·æ ¼ï¼›æˆ‘çš„å†³å®šæ˜¯ï¼šæš‚åœ</mtext><mi>A</mi><mi>I</mi><mtext>æ™ºèƒ½ä½“å¼€å‘ï¼Œå…ˆåšç§»åŠ¨åº”ç”¨ï¼Œç­‰</mtext><mi>O</mi><mi>p</mi><mi>u</mi><mi>s</mi><mtext>çº§æ¨¡å‹é™åˆ°</mtext></mrow><annotation encoding="application/x-tex">300-500/æœˆï¼‰ï¼Œä¼´éšæ›´ä¼˜é€Ÿç‡é™åˆ¶ã€æ›´ä½ä»·æ ¼ï¼›æˆ‘çš„å†³å®šæ˜¯ï¼šæš‚åœAIæ™ºèƒ½ä½“å¼€å‘ï¼Œå…ˆåšç§»åŠ¨åº”ç”¨ï¼Œç­‰Opusçº§æ¨¡å‹é™åˆ°</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">300</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">500/</span><span class="mord cjk_fallback">æœˆï¼‰ï¼Œä¼´éšæ›´ä¼˜é€Ÿç‡é™åˆ¶ã€æ›´ä½ä»·æ ¼ï¼›æˆ‘çš„å†³å®šæ˜¯ï¼šæš‚åœ</span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord cjk_fallback">æ™ºèƒ½ä½“å¼€å‘ï¼Œå…ˆåšç§»åŠ¨åº”ç”¨ï¼Œç­‰</span><span class="mord mathnormal">Op</span><span class="mord mathnormal">u</span><span class="mord mathnormal">s</span><span class="mord cjk_fallback">çº§æ¨¡å‹é™åˆ°</span></span></span></span></span>100/æœˆä¸”æ”¯æŒå®Œå–„è‡ªåŠ¨åŒ–ï¼Œå†å›å½’ã€‚</p>
<h4 data-id="heading-11">æ ¸å¿ƒæ€»ç»“ï¼ˆKey Takeawaysï¼‰ï¼šæˆ³ç ´æ‰€æœ‰è°è¨€</h4>
<ol>
<li>â€œå¼€æºå…è´¹â€â†’ è½¯ä»¶å…è´¹ï¼ŒAPIè´¦å•æ˜¯çœŸé‡‘ç™½é“¶</li>
<li>â€œGPT-4o-minièƒ½ç”¨â€â†’ ä»…èŠå¤©å¯ç”¨ï¼Œä»£ç†åœºæ™¯ç›´æ¥åºŸ</li>
<li>â€œæœ¬åœ°è¿è¡Œåˆ’ç®—â€â†’ 80%æ•ˆæœéœ€$4000+ç¡¬ä»¶</li>
<li>â€œåƒæœ‰ä¸“å±åŠ©æ‰‹â€â†’ æ¯æœˆè‡³å°‘$200+æ‰èƒ½å®ç°</li>
<li>â€œå·¥ä½œçš„æœªæ¥â€â†’ æ˜¯æ˜‚è´µçš„æœªæ¥</li>
</ol>
<h4 data-id="heading-12">æ²¡äººå‘Šè¯‰ä½ çš„ç»ˆæçœŸç›¸</h4>
<p>OpenClawæœ¬èº«æ˜¯å¥½è½¯ä»¶ï¼Œå›¢é˜Ÿå®åŠ›å¾ˆå¼ºï¼Œä½†æ‰€æœ‰ç½‘çº¢æ¼”ç¤º/æ•™ç¨‹ï¼Œ<strong>å…¨æ˜¯åŸºäºClaude Opus 4.5è¿è¡Œ</strong>ï¼›å½“ä½ é€‰ä»–ä»¬ä¸æçš„â€œå»‰ä»·æ–¹æ¡ˆâ€ï¼Œç¥å¥‡åŠŸèƒ½å…¨æ¶ˆå¤±â€”â€”åŠ©æ‰‹å˜å¤±çµèŠå¤©æœºå™¨äººï¼Œè‡ªä¸»ä»£ç†å˜æ˜‚è´µè‡ªåŠ¨è¡¥å…¨ã€‚</p>
<p>è¿™ä¸æ˜¯OpenClawçš„é”™ï¼Œæ˜¯2026å¹´çš„AIç»æµå­¦ï¼š<strong>æ¨¡å‹æ‰æ˜¯æ ¸å¿ƒäº§å“ï¼Œè½¯ä»¶åªæ˜¯åŒ…è£…</strong>ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java ä»£ç æ³¨é‡Šçš„è‰ºæœ¯ï¼šæ„å»ºé«˜è´¨é‡ã€å¯è¯»æ€§ä¸æ¶æ„çº§æ–‡æ¡£çš„ç»ˆææŒ‡å—]]></title>    <link>https://juejin.cn/post/7602497125269012486</link>    <guid>https://juejin.cn/post/7602497125269012486</guid>    <pubDate>2026-02-04T03:11:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602497125269012486" data-draft-id="7602454700504776745" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java ä»£ç æ³¨é‡Šçš„è‰ºæœ¯ï¼šæ„å»ºé«˜è´¨é‡ã€å¯è¯»æ€§ä¸æ¶æ„çº§æ–‡æ¡£çš„ç»ˆææŒ‡å—"/> <meta itemprop="keywords" content="åç«¯,Java,ä»£ç è§„èŒƒ"/> <meta itemprop="datePublished" content="2026-02-04T03:11:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Shepherd"/> <meta itemprop="url" content="https://juejin.cn/user/3415500769991869"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java ä»£ç æ³¨é‡Šçš„è‰ºæœ¯ï¼šæ„å»ºé«˜è´¨é‡ã€å¯è¯»æ€§ä¸æ¶æ„çº§æ–‡æ¡£çš„ç»ˆææŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3415500769991869/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Shepherd
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T03:11:54.000Z" title="Wed Feb 04 2026 03:11:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.æ¦‚è¿°ï¼šä»£ç å³æ–‡å­¦ï¼Œæ³¨é‡Šå³çµé­‚</h2>
<p>åœ¨ä¼ä¸šçº§ Java åç«¯å¼€å‘çš„æµ©ç€šå·¥ç¨‹ä¸­ï¼Œä»£ç è´¨é‡å¾€å¾€ä¸ä»…ä»…å–å†³äºç®—æ³•çš„å¤æ‚åº¦æˆ–æ¶æ„çš„è§£è€¦ç¨‹åº¦ï¼Œæ›´å–å†³äºå…¶å¯è¯»æ€§ä¸å¯ç»´æŠ¤æ€§ã€‚ä½œä¸ºä¸€åæ·±è€• Java æŠ€æœ¯æ ˆå¤šå¹´çš„å¼€å‘è€…ï¼Œæˆ‘ä»¬æ·±çŸ¥â€œä»£ç æ˜¯å†™ç»™äººçœ‹çš„ï¼Œé¡ºä¾¿ç»™æœºå™¨è¿è¡Œâ€è¿™ä¸€è‡³ç†åè¨€ã€‚ç„¶è€Œï¼Œåœ¨å®é™…çš„å¼€å‘è¿­ä»£ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸é™·å…¥ä¸€ä¸ªè¯¯åŒºï¼šç›²ç›®è¿½æ±‚â€œä»£ç è‡ªè§£é‡Šâ€ï¼ˆSelf-documenting Codeï¼‰ï¼Œè€Œå¿½è§†äº†é«˜è´¨é‡æ–‡æ¡£æ³¨é‡Šï¼ˆJavadocï¼‰çš„é‡è¦æ€§ã€‚äº‹å®ä¸Šï¼Œå¯¹äºå¤æ‚çš„ä¸šåŠ¡é€»è¾‘ã€å…¬å…± API æ¥å£ä»¥åŠåº•å±‚æ¡†æ¶å°è£…ï¼Œæ²¡æœ‰ä»»ä½•å˜é‡å‘½åèƒ½å¤Ÿæ›¿ä»£ä¸€æ®µç²¾å‡†ã€è¯¦å®ä¸”å¯Œæœ‰æ´å¯ŸåŠ›çš„ Javadoc</p>
<p>å½“æˆ‘ä»¬ç¿»é˜… JDK æºç ï¼ˆå¦‚ <code>java.util.concurrent</code> åŒ…ï¼‰ã€Spring Framework çš„æ ¸å¿ƒå®¹å™¨ä»£ç ï¼Œæˆ–æ˜¯ Google Guava çš„å·¥å…·ç±»æ—¶ï¼Œä¼šè¢«å…¶ä¸¥è°¨çš„æ³¨é‡Šä½“ç³»æ‰€éœ‡æ’¼ã€‚è¿™äº›æ¡†æ¶ä¹‹æ‰€ä»¥èƒ½æˆä¸ºå·¥ä¸šç•Œçš„æ ‡å‡†ï¼Œä¸ä»…å› ä¸ºå…¶ä»£ç é²æ£’ï¼Œæ›´å› ä¸ºå…¶æ–‡æ¡£è¯¦å°½åœ°é˜è¿°äº†æ¯ä¸€ä¸ªç±»ã€æ¯ä¸€ä¸ªæ–¹æ³•çš„â€œå‰ç½®æ¡ä»¶â€ï¼ˆPreconditionsï¼‰ã€â€œåç½®æ¡ä»¶â€ï¼ˆPostconditionsï¼‰ã€â€œå‰¯ä½œç”¨â€ï¼ˆSide Effectsï¼‰ä»¥åŠâ€œçº¿ç¨‹å®‰å…¨æ€§â€ï¼ˆThread Safetyï¼‰ã€‚</p>
<p>å…ˆæ¥çœ‹ä¸€ä¸ªå®Œç¾æ³¨é‡Šçš„å®Œæ•´ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * ç”¨æˆ·æœåŠ¡ç±»
 * æä¾›ç”¨æˆ·ç›¸å…³çš„ä¸šåŠ¡æ“ä½œï¼ŒåŒ…æ‹¬ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ä¿¡æ¯æŸ¥è¯¢ç­‰åŠŸèƒ½
 * 
 * <span class="hljs-doctag">@author</span> <span class="hljs-variable">ZhangSan</span>
 * <span class="hljs-doctag">@version</span> 1.2.0
 * <span class="hljs-doctag">@since</span> 2026-01-01
 * <span class="hljs-doctag">@see</span> <span class="hljs-variable">User</span>
 * <span class="hljs-doctag">@see</span> <span class="hljs-variable">UserDao</span>
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * ç”¨æˆ·æ³¨å†Œ
 Â  Â  * è¯¥æ–¹æ³•ç”¨äºæ–°ç”¨æˆ·æ³¨å†Œï¼Œä¼šå¯¹ç”¨æˆ·åè¿›è¡Œå”¯ä¸€æ€§æ ¡éªŒ
 Â  Â  *
 Â  Â  * <span class="hljs-doctag">@param</span> username ç”¨æˆ·åï¼Œå¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œé•¿åº¦3-20å­—ç¬¦
 Â  Â  * <span class="hljs-doctag">@param</span> password å¯†ç ï¼Œéœ€è¦æ»¡è¶³å¯†ç å¼ºåº¦è¦æ±‚
 Â  Â  * <span class="hljs-doctag">@param</span> email é‚®ç®±åœ°å€ï¼Œç”¨äºéªŒè¯å’Œé€šçŸ¥
 Â  Â  * <span class="hljs-doctag">@return</span> æ³¨å†ŒæˆåŠŸçš„ç”¨æˆ·IDï¼Œå¦‚æœæ³¨å†Œå¤±è´¥è¿”å›null
 Â  Â  * <span class="hljs-doctag">@throws</span> UserExistsException å½“ç”¨æˆ·åå·²å­˜åœ¨æ—¶æŠ›å‡º
 Â  Â  * <span class="hljs-doctag">@throws</span> InvalidParameterException å½“å‚æ•°ä¸ç¬¦åˆè¦æ±‚æ—¶æŠ›å‡º
 Â  Â  * <span class="hljs-doctag">@see</span> <span class="hljs-variable">User</span>
 Â  Â  * <span class="hljs-doctag">@since</span> 1.0.0
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-title class_">Long</span> <span class="hljs-title function_">registerUser</span>(<span class="hljs-title class_">String</span> username, <span class="hljs-title class_">String</span> password, <span class="hljs-title class_">String</span> email) 
 Â  Â  Â  Â  Â  Â throws <span class="hljs-title class_">UserExistsException</span>, <span class="hljs-title class_">InvalidParameterException</span> {
 Â  Â  Â  Â <span class="hljs-comment">// æ–¹æ³•å®ç°</span>
 Â  Â  Â  Â <span class="hljs-keyword">return</span> 1L;
 Â   }
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * <span class="hljs-doctag">@deprecated</span> è¯¥æ–¹æ³•å·²è¿‡æ—¶ï¼Œè¯·ä½¿ç”¨ {<span class="hljs-doctag">@link</span> #registerUser(String, String, String)}
 Â  Â  * æ›¿ä»£ã€‚æ–°æ–¹æ³•æä¾›äº†æ›´å®Œå–„çš„å‚æ•°æ ¡éªŒã€‚
 Â  Â  */</span>
 Â  Â <span class="hljs-meta">@Deprecated</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-title class_">Long</span> <span class="hljs-title function_">register</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> username, <span class="hljs-built_in">String</span> password</span>) {
 Â  Â  Â  Â <span class="hljs-comment">// æ—§æ–¹æ³•å®ç°</span>
 Â  Â  Â  Â <span class="hljs-keyword">return</span> 1L;
 Â   }
}
</code></pre>
<h2 data-id="heading-1">2.å¸¸ç”¨Javadocæ ‡ç­¾è¯¦è§£</h2>
<p><strong>@param å‚æ•°è¯´æ˜</strong></p>
<pre><code class="hljs language-typescript" lang="typescript">â€‹
<span class="hljs-comment">/**
 * å¤„ç†ç”¨æˆ·åˆ—è¡¨
 * 
 * <span class="hljs-doctag">@param</span> users ç”¨æˆ·åˆ—è¡¨ï¼Œä¸èƒ½ä¸ºnullä½†å¯ä»¥ä¸ºç©ºåˆ—è¡¨
 * <span class="hljs-doctag">@param</span> options å¤„ç†é€‰é¡¹ï¼ŒåŒ…å«æ’åºã€è¿‡æ»¤ç­‰è®¾ç½®
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">processUsers</span>(<span class="hljs-params">List&lt;User&gt; users, ProcessOptions options</span>) {
 Â  Â <span class="hljs-comment">// æ–¹æ³•å®ç°</span>
}
</code></pre>
<p><strong>@return è¿”å›å€¼è¯´æ˜</strong></p>
<pre><code class="hljs language-csharp" lang="csharp">â€‹
<span class="hljs-comment">/**
 * è·å–æ‰€æœ‰æ´»è·ƒç”¨æˆ·
 * 
 * @return æ´»è·ƒç”¨æˆ·åˆ—è¡¨ï¼Œä¸ä¼šè¿”å›nullï¼Œä½†å¯èƒ½è¿”å›ç©ºåˆ—è¡¨
 */</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">getActiveUsers</span>()</span> {
 Â  Â <span class="hljs-keyword">return</span> userDAO.findByStatus(<span class="hljs-string">"active"</span>);
}
â€‹
</code></pre>
<p><strong>@throws / @exception å¼‚å¸¸è¯´æ˜</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æ–‡ä»¶ä¸Šä¼ å¤„ç†
 * 
 * <span class="hljs-doctag">@param</span> file ä¸Šä¼ çš„æ–‡ä»¶
 * <span class="hljs-doctag">@throws</span> FileNotFoundException å½“æ–‡ä»¶ä¸å­˜åœ¨æ—¶æŠ›å‡º
 * <span class="hljs-doctag">@throws</span> FileSizeExceededException å½“æ–‡ä»¶å¤§å°è¶…è¿‡é™åˆ¶æ—¶æŠ›å‡º
 * <span class="hljs-doctag">@throws</span> IOException å½“æ–‡ä»¶è¯»å†™å‘ç”Ÿé”™è¯¯æ—¶æŠ›å‡º
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">uploadFile</span><span class="hljs-params">(File file)</span> <span class="hljs-keyword">throws</span> FileNotFoundException, 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â FileSizeExceededException, 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â IOException {
 Â  Â <span class="hljs-keyword">if</span> (!file.exists()) {
 Â  Â  Â  Â <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileNotFoundException</span>(<span class="hljs-string">"æ–‡ä»¶ä¸å­˜åœ¨: "</span> + file.getName());
 Â   }
 Â  Â <span class="hljs-comment">// å…¶ä»–å¤„ç†é€»è¾‘</span>
}
â€‹
<span class="hljs-comment">/**
 * ç”¨æˆ·ç™»å½•éªŒè¯
 * 
 * <span class="hljs-doctag">@param</span> username ç”¨æˆ·å
 * <span class="hljs-doctag">@param</span> password å¯†ç 
 * <span class="hljs-doctag">@exception</span> AuthenticationException å½“ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯æ—¶æŠ›å‡º
 * <span class="hljs-doctag">@exception</span> AccountLockedException å½“è´¦æˆ·è¢«é”å®šæ—¶æŠ›å‡º
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">login</span><span class="hljs-params">(String username, String password)</span> 
 Â  Â  Â  Â <span class="hljs-keyword">throws</span> AuthenticationException, AccountLockedException {
 Â  Â <span class="hljs-comment">// ç™»å½•é€»è¾‘</span>
}
</code></pre>
<p><strong>@see å‚è€ƒé“¾æ¥</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * è®¢å•æ”¯ä»˜æœåŠ¡
 * 
 * <span class="hljs-doctag">@see</span> Order è®¢å•å®ä½“ç±»
 * <span class="hljs-doctag">@see</span> PaymentController#processPayment(Long) æ”¯ä»˜å¤„ç†æ–¹æ³•
 * <span class="hljs-doctag">@see</span> &lt;a href="https://example.com/payment-api"&gt;æ”¯ä»˜APIæ–‡æ¡£&lt;/a&gt;
 * <span class="hljs-doctag">@see</span> "Javaç¼–ç¨‹è§„èŒƒ"
 * <span class="hljs-doctag">@see</span> #refund(Long) é€€æ¬¾æ–¹æ³•
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentService</span> {
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * æ‰§è¡Œæ”¯ä»˜
 Â  Â  * <span class="hljs-doctag">@see</span> PaymentGateway æ”¯ä»˜ç½‘å…³æ¥å£
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">processPayment</span>(<span class="hljs-params">Order order</span>) {
 Â  Â  Â  Â <span class="hljs-comment">// æ”¯ä»˜é€»è¾‘</span>
 Â   }
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * è®¢å•é€€æ¬¾
 Â  Â  * 
 Â  Â  * <span class="hljs-doctag">@see</span> #processPayment(Order)
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">refund</span>(<span class="hljs-params">Long orderId</span>) {
 Â  Â  Â  Â <span class="hljs-comment">// é€€æ¬¾é€»è¾‘</span>
 Â   }
}
</code></pre>
<p><strong>@deprecated è¿‡æ—¶è¯´æ˜</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OldClass</span> {
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * <span class="hljs-doctag">@deprecated</span> è¿™ä¸ªå­—æ®µå·²è¿‡æ—¶ï¼Œè¯·ä½¿ç”¨ {<span class="hljs-doctag">@link</span> #newField} æ›¿ä»£ã€‚
 Â  Â  * å°†åœ¨ä¸‹ä¸€ä¸ªä¸»è¦ç‰ˆæœ¬ä¸­ç§»é™¤ã€‚
 Â  Â  */</span>
 Â  Â <span class="hljs-meta">@Deprecated</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> oldField;
 Â  Â 
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> newField;
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * <span class="hljs-doctag">@deprecated</span> è¿™ä¸ªæ–¹æ³•å·²è¿‡æ—¶ï¼Œå› ä¸ºæ€§èƒ½é—®é¢˜ã€‚
 Â  Â  * è¯·ä½¿ç”¨ {<span class="hljs-doctag">@link</span> #newMethod(String)} æ›¿ä»£ã€‚
 Â  Â  * 
 Â  Â  * <span class="hljs-doctag">@param</span> name ç”¨æˆ·å
 Â  Â  * <span class="hljs-doctag">@return</span> å¤„ç†ç»“æœ
 Â  Â  */</span>
 Â  Â <span class="hljs-meta">@Deprecated</span>(since = <span class="hljs-string">"2.0"</span>, forRemoval = <span class="hljs-literal">true</span>)
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">oldMethod</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>) {
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">"old result"</span>;
 Â   }
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * æ–°çš„å¤„ç†æ–¹æ³•
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">newMethod</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>) {
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">"new result"</span>;
 Â   }
}
</code></pre>
<p><strong>{@code} - ä»£ç æ ¼å¼</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * è®¾ç½®é…ç½®é¡¹
 * 
 * ä½¿ç”¨æ–¹æ³•ï¼š
 * {<span class="hljs-doctag">@code</span>
 * Config config = new Config();
 * config.setProperty("key", "value");
 * }
 * 
 * æˆ–è€…å•è¡Œä»£ç ï¼š{<span class="hljs-doctag">@code</span> String name = "John";}
 * 
 * <span class="hljs-doctag">@param</span> key é…ç½®é”®ï¼Œæ ¼å¼ä¸º {<span class="hljs-doctag">@code</span> "section.name"}
 * <span class="hljs-doctag">@param</span> value é…ç½®å€¼
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setProperty</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> key, <span class="hljs-built_in">String</span> value</span>) {
 Â  Â <span class="hljs-comment">// æ–¹æ³•å®ç°</span>
}
</code></pre>
<h3 data-id="heading-2">{@link} - å†…éƒ¨é“¾æ¥</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * ç”¨æˆ·ç®¡ç†æœåŠ¡
 * 
 * ç›¸å…³æ–¹æ³•ï¼š
 * - {<span class="hljs-doctag">@link</span> #createUser(User)}
 * - {<span class="hljs-doctag">@link</span> #updateUser(User)}
 * - {<span class="hljs-doctag">@link</span> #deleteUser(Long)}
 * 
 * ç›¸å…³ç±»ï¼š
 * - {<span class="hljs-doctag">@link</span> User}
 * - {<span class="hljs-doctag">@link</span> UserDao}
 * 
 * <span class="hljs-doctag">@see</span> UserService
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserManager</span> {
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * åˆ›å»ºç”¨æˆ·
 Â  Â  * 
 Â  Â  * <span class="hljs-doctag">@param</span> user ç”¨æˆ·å¯¹è±¡ï¼Œå‚è€ƒ {<span class="hljs-doctag">@link</span> User} ç±»å®šä¹‰
 Â  Â  * <span class="hljs-doctag">@return</span> ç”¨æˆ·ID
 Â  Â  * <span class="hljs-doctag">@see</span> #updateUser(User)
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-built_in">Long</span> createUser(User user) {
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-number">1L</span>;
 Â   }
}
</code></pre>
<p><strong>{@literal} - æ–‡æœ¬å­—é¢é‡</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * ç‰¹æ®Šå­—ç¬¦è¯´æ˜
 * 
 * åœ¨XMLä¸­éœ€è¦ä½¿ç”¨ {<span class="hljs-doctag">@literal</span> &lt;root&gt;} å’Œ {<span class="hljs-doctag">@literal</span> &lt;/root&gt;} æ ‡ç­¾ã€‚
 * åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨ {<span class="hljs-doctag">@literal</span> [a-z]+} åŒ¹é…å°å†™å­—æ¯ã€‚
 * 
 * æ¯”è¾ƒæ“ä½œï¼š{<span class="hljs-doctag">@literal</span> a &lt; b &amp;&amp; c &gt; d}
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpecialCharacters</span> {
    <span class="hljs-comment">// ç±»å®ç°</span>
}
</code></pre>
<h2 data-id="heading-3">3.Javaæ³¨é‡Šä¸­çš„HTMLæ ‡ç­¾è¯¦è§£</h2>
<p><strong><code>&lt;p&gt;</code> - æ®µè½æ ‡ç­¾</strong></p>
<pre><code class="hljs language-xml" lang="xml">/**
 * ç”¨æˆ·æœåŠ¡ç±»
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™ä¸ªç±»è´Ÿè´£å¤„ç†ç”¨æˆ·ç›¸å…³çš„æ‰€æœ‰ä¸šåŠ¡é€»è¾‘ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>åŒ…æ‹¬ç”¨æˆ·æ³¨å†Œã€ç™»å½•éªŒè¯ã€ä¿¡æ¯ä¿®æ”¹ç­‰åŠŸèƒ½ã€‚
 * æ¯ä¸ªåŠŸèƒ½éƒ½ç»è¿‡ä¸¥æ ¼æµ‹è¯•ï¼Œç¡®ä¿ä¸šåŠ¡é€»è¾‘çš„æ­£ç¡®æ€§ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>åœ¨ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå»ºè®®é…åˆSpringå®¹å™¨ä½¿ç”¨ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 */
public class UserService {
    // åœ¨Javadocä¸­ï¼Œ<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ ‡ç­¾ä¼šè‡ªåŠ¨åœ¨æ®µè½é—´åˆ›å»ºç©ºè¡Œï¼Œä½¿æ–‡æ¡£æ›´æ˜“è¯»
}
</code></pre>
<p><strong><code>&lt;br&gt;</code> - æ¢è¡Œæ ‡ç­¾</strong></p>
<pre><code class="hljs language-xml" lang="xml">/**
 * åœ°å€éªŒè¯å·¥å…·
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>éªŒè¯è§„åˆ™ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
 * 1. åœ°å€ä¸èƒ½ä¸ºç©º<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
 * 2. åœ°å€é•¿åº¦ä¸è¶…è¿‡200å­—ç¬¦<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
 * 3. å¿…é¡»åŒ…å«çœå¸‚åŒºä¿¡æ¯<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
 * 4. è¯¦ç»†åœ°å€ä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ³¨æ„ï¼šæ­¤éªŒè¯ä»…é’ˆå¯¹ä¸­å›½å¤§é™†åœ°å€ï¼Œ<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
 * å›½é™…åœ°å€éœ€è¦ä½¿ç”¨å…¶ä»–éªŒè¯è§„åˆ™ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 */
public class AddressValidator {
    // <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>é€‚åˆåœ¨åŒä¸€ä¸ªæ®µè½å†…åˆ›å»ºåˆ—è¡¨å¼å†…å®¹
}
</code></pre>
<p><strong><code>&lt;b&gt;</code> å’Œ <code>&lt;strong&gt;</code> - ç²—ä½“æ ‡ç­¾</strong></p>
<p><strong>ç”¨é€”</strong>ï¼šå¼ºè°ƒé‡è¦æ–‡æœ¬</p>
<pre><code class="hljs language-xml" lang="xml">/**
 * æ”¯ä»˜å®‰å…¨æœåŠ¡
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>é‡è¦æç¤ºï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>æ‰€æœ‰æ”¯ä»˜æ“ä½œéƒ½å¿…é¡»è®°å½•å®¡è®¡æ—¥å¿—ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>å®‰å…¨è­¦å‘Šï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>APIå¯†é’¥å¿…é¡»åŠ å¯†å­˜å‚¨ï¼Œ<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
 * ä¸¥ç¦åœ¨æ—¥å¿—ä¸­è¾“å‡ºæ•æ„Ÿä¿¡æ¯ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ™®é€šæ–‡æœ¬ï¼Œ<span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>å…³é”®æ“ä½œ<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>éœ€è¦åŒé‡éªŒè¯ï¼Œ<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
 * <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>é«˜é£é™©æ“ä½œ<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span>éœ€è¦ç®¡ç†å‘˜å®¡æ‰¹ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 */
public class PaymentSecurityService {
    // <span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>å’Œ<span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>åœ¨è§†è§‰ä¸Šæ•ˆæœç›¸åŒï¼Œä½†<span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>è¯­ä¹‰ä¸Šæ›´å¼ºè°ƒé‡è¦æ€§
}
</code></pre>
<p><strong><code>&lt;i&gt;</code> å’Œ <code>&lt;em&gt;</code> - æ–œä½“æ ‡ç­¾</strong></p>
<p><strong>ç”¨é€”</strong>ï¼šè¡¨ç¤ºæŠ€æœ¯æœ¯è¯­ã€å¤–æ¥è¯­æˆ–å¼ºè°ƒ</p>
<pre><code class="hljs language-xml" lang="xml">/**
 * ç§‘å­¦è®¡ç®—å·¥å…·
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æœ¬ç±»æä¾›å¸¸ç”¨çš„ç§‘å­¦è®¡ç®—åŠŸèƒ½ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span>&gt;</span>æ¬§æ‹‰å…¬å¼<span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>ï¼še^(iÏ€) + 1 = 0<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
 * <span class="hljs-tag">&lt;<span class="hljs-name">em</span>&gt;</span>å‹¾è‚¡å®šç†<span class="hljs-tag">&lt;/<span class="hljs-name">em</span>&gt;</span>ï¼šaÂ² + bÂ² = cÂ²<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ³¨æ„ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">i</span>&gt;</span>æµ®ç‚¹æ•°è®¡ç®—<span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>å¯èƒ½å­˜åœ¨ç²¾åº¦é—®é¢˜ï¼Œ<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
 * <span class="hljs-tag">&lt;<span class="hljs-name">em</span>&gt;</span>å¤§è§„æ¨¡çŸ©é˜µè¿ç®—<span class="hljs-tag">&lt;/<span class="hljs-name">em</span>&gt;</span>å»ºè®®ä½¿ç”¨ä¸“ä¸šæ•°å­¦åº“ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 */
public class MathUtils {
    // <span class="hljs-tag">&lt;<span class="hljs-name">i</span>&gt;</span>é€šå¸¸ç”¨äºæŠ€æœ¯æœ¯è¯­ï¼Œ<span class="hljs-tag">&lt;<span class="hljs-name">em</span>&gt;</span>ç”¨äºè¯­ä¹‰å¼ºè°ƒ
}
</code></pre>
<p><strong><code>&lt;ul&gt;</code> - æ— åºåˆ—è¡¨</strong></p>
<p><strong>ç”¨é€”</strong>ï¼šåˆ›å»ºé¡¹ç›®ç¬¦å·åˆ—è¡¨</p>
<pre><code class="hljs language-xml" lang="xml">/**
 * åŠŸèƒ½ç‰¹æ€§è¯´æ˜
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>ä¸»è¦åŠŸèƒ½ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 * <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>ç”¨æˆ·è®¤è¯å’Œæˆæƒ<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>æ•°æ®åŠ å¯†å­˜å‚¨
 *     <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
 *       <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>AES-256åŠ å¯†æ•æ„Ÿæ•°æ®<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *       <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>RSAåŠ å¯†ä¼ è¾“æ•°æ®<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *     <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
 *   <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>å®¡è®¡æ—¥å¿—è®°å½•<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>æ€§èƒ½ç›‘æ§å’Œç»Ÿè®¡<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 * <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>æŠ€æœ¯ç‰¹ç‚¹ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 * <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>åŸºäºSpring Bootæ¡†æ¶<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>æ”¯æŒå¤šæ•°æ®æº<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>å†…ç½®ç¼“å­˜æœºåˆ¶<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 * <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
 */
public class SystemFeatures {
    // <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>åˆ›å»ºå¸¦é¡¹ç›®ç¬¦å·çš„åˆ—è¡¨ï¼Œé€‚åˆåˆ—ä¸¾ç‰¹æ€§ã€åŠŸèƒ½ç‚¹ç­‰
}
</code></pre>
<p><strong><code>&lt;ol&gt;</code> - æœ‰åºåˆ—è¡¨</strong></p>
<p><strong>ç”¨é€”</strong>ï¼šåˆ›å»ºå¸¦ç¼–å·çš„æ­¥éª¤åˆ—è¡¨</p>
<pre><code class="hljs language-xml" lang="xml">/**
 * å®‰è£…é…ç½®æŒ‡å—
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>å®‰è£…æ­¥éª¤ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 * <span class="hljs-tag">&lt;<span class="hljs-name">ol</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>ä¸‹è½½å®‰è£…åŒ…<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>è§£å‹åˆ°ç›®æ ‡ç›®å½•<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>ä¿®æ”¹é…ç½®æ–‡ä»¶
 *     <span class="hljs-tag">&lt;<span class="hljs-name">ol</span>&gt;</span>
 *       <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>é…ç½®æ•°æ®åº“è¿æ¥<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *       <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>è®¾ç½®ç®¡ç†å‘˜è´¦å·<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *       <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>é…ç½®æ—¥å¿—è·¯å¾„<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *     <span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span>
 *   <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>å¯åŠ¨æœåŠ¡<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>éªŒè¯å®‰è£…ç»“æœ<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 * <span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span>
 * 
 * <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>å¯åŠ¨é¡ºåºï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
 * <span class="hljs-tag">&lt;<span class="hljs-name">ol</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>æ•°æ®åº“æœåŠ¡<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>ç¼“å­˜æœåŠ¡<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>åº”ç”¨æœåŠ¡<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 *   <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>ç›‘æ§æœåŠ¡<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
 * <span class="hljs-tag">&lt;/<span class="hljs-name">ol</span>&gt;</span>
 */
public class InstallationGuide {
    // <span class="hljs-tag">&lt;<span class="hljs-name">ol</span>&gt;</span>åˆ›å»ºå¸¦æ•°å­—ç¼–å·çš„åˆ—è¡¨ï¼Œé€‚åˆæ­¥éª¤ã€æµç¨‹è¯´æ˜
}
</code></pre>
<h2 data-id="heading-4">4.æ€»ç»“</h2>
<p>ç¼–å†™æ–‡æ¡£æ³¨é‡Šå¹¶éå•çº¯çš„ä½“åŠ›åŠ³åŠ¨ï¼Œå®ƒæ˜¯ä¸€ç§è®¾è®¡æ´»åŠ¨ã€‚å½“ä½ è¢«è¿«ç”¨è‡ªç„¶è¯­è¨€æ¸…æ™°åœ°æè¿°ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œå¾€å¾€ä¼šå‘ç°ä»£ç é€»è¾‘æœ¬èº«çš„æ¨¡ç³Šæˆ–è®¾è®¡ä¸Šçš„ç¼ºé™·ã€‚é«˜è´¨é‡çš„ Javadoc æ˜¯ä»£ç é‡æ„çš„å‚¬åŒ–å‰‚ã€‚</p>
<p>ä½œä¸º Java åç«¯é«˜çº§å¼€å‘ï¼Œå½“æˆ‘ä»¬ä»å•çº¯å…³æ³¨â€œä»£ç æ€ä¹ˆè·‘â€è½¬å˜ä¸ºå…³æ³¨â€œä»£ç æ€ä¹ˆè¯»â€æ—¶ï¼Œæˆ‘ä»¬å°±è·¨è¶Šäº†ä»å·¥åŒ åˆ°å¤§å¸ˆçš„é—¨æ§›ã€‚å¸Œæœ›è¿™ç¯‡åšæ–‡èƒ½æˆä¸ºä½ å›¢é˜Ÿä¸­çš„â€œæ–‡æ¡£åœ£ç»â€ï¼Œä¸ä»…æå‡ä»£ç åº“çš„å¥åº·åº¦ï¼Œæ›´åœ¨æŠ€æœ¯ç¤¾åŒºä¸­æ ‘ç«‹ä½ ä½œä¸º uncompromising engineerï¼ˆä¸å¦¥åçš„å·¥ç¨‹å¸ˆï¼‰çš„ä¸“ä¸šå½¢è±¡ã€‚è®©æˆ‘ä»¬ä¸€èµ·ï¼Œç”¨æ³¨é‡Šç‚¹äº®ä»£ç çš„é»‘æš—è§’è½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[@RequestBody ä¹‹åï¼Œrequest é‡Œä¸ºä»€ä¹ˆâ€œä»€ä¹ˆéƒ½æ²¡æœ‰äº†â€ï¼Ÿä¸€æ¬¡å›è°ƒéªŒç­¾å¤±è´¥çš„å®Œæ•´æ’æŸ¥è¿‡ç¨‹]]></title>    <link>https://juejin.cn/post/7602488187408236596</link>    <guid>https://juejin.cn/post/7602488187408236596</guid>    <pubDate>2026-02-04T03:09:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602488187408236596" data-draft-id="7602488187408187444" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="@RequestBody ä¹‹åï¼Œrequest é‡Œä¸ºä»€ä¹ˆâ€œä»€ä¹ˆéƒ½æ²¡æœ‰äº†â€ï¼Ÿä¸€æ¬¡å›è°ƒéªŒç­¾å¤±è´¥çš„å®Œæ•´æ’æŸ¥è¿‡ç¨‹"/> <meta itemprop="keywords" content="Spring,Java,Spring Boot"/> <meta itemprop="datePublished" content="2026-02-04T03:09:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="baviya"/> <meta itemprop="url" content="https://juejin.cn/user/2986712517327645"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            @RequestBody ä¹‹åï¼Œrequest é‡Œä¸ºä»€ä¹ˆâ€œä»€ä¹ˆéƒ½æ²¡æœ‰äº†â€ï¼Ÿä¸€æ¬¡å›è°ƒéªŒç­¾å¤±è´¥çš„å®Œæ•´æ’æŸ¥è¿‡ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2986712517327645/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    baviya
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T03:09:42.000Z" title="Wed Feb 04 2026 03:09:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    20
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å¦‚æœä½ åšè¿‡ç¬¬ä¸‰æ–¹å›è°ƒã€Webhookã€æ¶ˆæ¯æ¨é€ã€éªŒç­¾<br/>
é‚£ä½ <strong>å‡ ä¹ä¸€å®šä¼šè¸©åˆ°è¿™ä¸ªå‘</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€é—®é¢˜å‡ºç°ï¼šéªŒç­¾é€»è¾‘æ²¡é—®é¢˜ï¼Œä½†å°±æ˜¯ä¸€ç›´å¤±è´¥</h2>
<p>äº‹æƒ…çš„èµ·ç‚¹å¾ˆæ™®é€šã€‚</p>
<p>æˆ‘åœ¨å¯¹æ¥ä¸€ä¸ª<strong>ç¬¬ä¸‰æ–¹ç³»ç»Ÿçš„å›è°ƒæ¥å£</strong>ï¼Œè¯·æ±‚å½¢å¼ä¹Ÿå¾ˆå¸¸è§ï¼š</p>
<ul>
<li>
<p><code>POST</code></p>
</li>
<li>
<p><code>Content-Type: application/json</code></p>
</li>
<li>
<p>Body é‡Œæ˜¯ä¸€æ®µ JSON</p>
</li>
<li>
<p>æœåŠ¡ç«¯éœ€è¦ï¼š</p>
<ol>
<li><strong>å…ˆéªŒç­¾ï¼ˆå¿…é¡»ä½¿ç”¨åŸå§‹è¯·æ±‚å‚æ•°ï¼‰</strong></li>
<li><strong>å†æ‰§è¡Œä¸šåŠ¡é€»è¾‘</strong></li>
</ol>
</li>
</ul>
<p>Controller å†™æ³•å¦‚ä¸‹ï¼ˆæå…¶å¸¸è§ï¼‰ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@PostMapping</span>(<span class="hljs-string">"/callback/receive"</span>)
public String <span class="hljs-built_in">receive</span>(<span class="hljs-variable">@RequestBody</span> CallbackDTO dto,
                      HttpServletRequest request) {
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">service</span><span class="hljs-selector-class">.process</span>(dto);
}
</code></pre>
<p>é—®é¢˜æ˜¯ï¼š</p>
<blockquote>
<p><strong>éªŒç­¾å§‹ç»ˆå¤±è´¥</strong></p>
</blockquote>
<p>å³ä¾¿æˆ‘å·²ç»åå¤ç¡®è®¤è¿‡ï¼š</p>
<ul>
<li>éªŒç­¾ç®—æ³•æ­£ç¡®</li>
<li>å¯†é’¥æ­£ç¡®</li>
<li>æ–‡æ¡£å®ç°æ— è¯¯</li>
<li>å¯¹è±¡é‡Œçš„å­—æ®µâ€œçœ‹èµ·æ¥ä¹Ÿéƒ½åœ¨â€</li>
</ul>
<p>è¿™æ—¶å€™ï¼Œç›´è§‰å¼€å§‹æŠ¥è­¦äº†ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€ç¬¬ä¸€ååº”ï¼šæ˜¯ä¸æ˜¯ <code>@RequestBody</code> æ˜ å°„æ—¶ä¸¢å‚æ•°äº†ï¼Ÿ</h2>
<p>è¿™æ˜¯ä¸€ä¸ª<strong>éå¸¸åˆç†</strong>çš„æ€€ç–‘ã€‚</p>
<p>å› ä¸ºéªŒç­¾ä¾èµ–çš„æ˜¯ï¼š</p>
<blockquote>
<p><strong>å®Œæ•´ã€åŸå§‹ã€æœªç»å¤„ç†çš„è¯·æ±‚å‚æ•°</strong></p>
</blockquote>
<p>è€Œæˆ‘ç°åœ¨ç”¨çš„æ˜¯ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@RequestBody</span> CallbackDTO
</code></pre>
<p>é‚£æ˜¯ä¸æ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼š</p>
<ul>
<li>æœ‰å­—æ®µæ²¡å®šä¹‰ï¼Ÿ</li>
<li>æœ‰å­—æ®µè¢« Jackson å¿½ç•¥äº†ï¼Ÿ</li>
<li>æœ‰å­—æ®µè¢«è½¬æˆäº† <code>null</code>ï¼Ÿ</li>
<li>æœ‰ç²¾åº¦ / ç±»å‹å˜åŒ–ï¼Ÿ</li>
</ul>
<p>ä¸ºäº†éªŒè¯è¿™ä¸ªçŒœæƒ³ï¼Œæˆ‘å†³å®šåšä¸€ä»¶äº‹ï¼š</p>
<p>ğŸ‘‰ <strong>ç›´æ¥æ‰“å°å®¢æˆ·ç«¯çœŸå®ä¼ è¿‡æ¥çš„è¯·æ±‚ä½“</strong></p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€å°è¯•ç›´æ¥ä» request è¯»å– bodyï¼ˆé—®é¢˜å¼€å§‹æš´éœ²ï¼‰</h2>
<p>æˆ‘å¾ˆè‡ªç„¶åœ°å†™ä¸‹äº†è¿™æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">String <span class="hljs-attr">body</span> = new String(
        request.getInputStream().readAllBytes(),
        StandardCharsets.UTF_8
)<span class="hljs-comment">;</span>
log.info("åŸå§‹è¯·æ±‚ä½“ï¼š{}", body)<span class="hljs-comment">;</span>
</code></pre>
<p>ç»“æœéå¸¸è¯¡å¼‚ï¼š</p>
<ul>
<li>æœ‰æ—¶ç›´æ¥æŠ›å¼‚å¸¸ï¼š</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin">getInputStream() has already been called <span class="hljs-keyword">for</span> <span class="hljs-keyword">this</span> request
</code></pre>
<ul>
<li>æœ‰æ—¶ä¸æŠ¥é”™ï¼Œä½† <code>body</code> æ˜¯ç©ºå­—ç¬¦ä¸²</li>
</ul>
<p>è¿™æ—¶å€™å°±æœ‰ç‚¹ä¸å¯¹åŠ²äº†ï¼š</p>
<blockquote>
<p><strong>å®¢æˆ·ç«¯æ˜æ˜ä¼ äº† JSONï¼Œä¸ºä»€ä¹ˆ request é‡Œä»€ä¹ˆéƒ½è¯»ä¸åˆ°ï¼Ÿ</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-3">å››ã€å…³é”®è½¬æŠ˜ç‚¹ï¼šé—®é¢˜ä¸åœ¨éªŒç­¾ï¼Œè€Œåœ¨ Spring MVC æœºåˆ¶</h2>
<p>ç»§ç»­é¡ºç€è¿™ä¸ªå¼‚å¸¸å¾€ä¸‹æŒ–ï¼Œæ‰å‘ç°é—®é¢˜çš„æ ¹æº<strong>å®Œå…¨ä¸åœ¨ä¸šåŠ¡ä»£ç é‡Œ</strong>ã€‚</p>
<p>è€Œåœ¨äºè¿™ä¸€è¡Œï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@RequestBody</span> CallbackDTO dto
</code></pre>
<hr/>
<h2 data-id="heading-4">äº”ã€<code>@RequestBody</code> åˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿï¼ˆè¿™æ˜¯å…³é”®ï¼‰</h2>
<p>å¾ˆå¤šäººç”¨ <code>@RequestBody</code>ï¼Œä½†å¹¶ä¸æ¸…æ¥šå®ƒèƒŒåå‘ç”Ÿäº†ä»€ä¹ˆã€‚</p>
<p>å®é™…ä¸Šï¼Œåœ¨è¯·æ±‚è¿›å…¥ Controller <strong>ä¹‹å‰</strong>ï¼ŒSpring MVC å·²ç»å®Œæˆäº†ä¸‹é¢è¿™å¥—æµç¨‹ï¼š</p>
<ol>
<li>è°ƒç”¨ <code>request.getInputStream()</code></li>
<li>è¯»å– <strong>æ•´ä¸ª HTTP body</strong></li>
<li>äº¤ç»™ <code>HttpMessageConverter</code>ï¼ˆé€šå¸¸æ˜¯ Jacksonï¼‰</li>
<li>ååºåˆ—åŒ–æˆ Java å¯¹è±¡</li>
<li><strong>InputStream è¢«å®Œæ•´æ¶ˆè´¹</strong></li>
</ol>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š</p>
<blockquote>
<p><strong><code>@RequestBody</code> â‰  å¤åˆ¶ body</strong><br/>
<strong><code>@RequestBody</code> = æ¶ˆè´¹ body</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-5">å…­ã€ä¸ºä»€ä¹ˆä¹‹åä»€ä¹ˆéƒ½æ‹¿ä¸åˆ°ï¼Ÿ</h2>
<p>è¿™å°±è§£é‡Šäº†å‰é¢çš„æ‰€æœ‰å¼‚å¸¸è¡Œä¸ºï¼š</p>
<h3 data-id="heading-6">1ï¸âƒ£ å†è¯» InputStream</h3>
<pre><code class="hljs language-scss" lang="scss">request<span class="hljs-selector-class">.getInputStream</span>()
</code></pre>
<p>âŒ è¦ä¹ˆæŠ›å¼‚å¸¸<br/>
âŒ è¦ä¹ˆè¯»åˆ°ç©º</p>
<hr/>
<h3 data-id="heading-7">2ï¸âƒ£ å†è¯» Reader</h3>
<pre><code class="hljs language-scss" lang="scss">request<span class="hljs-selector-class">.getReader</span>()
</code></pre>
<p>âŒ ä¸€æ ·</p>
<hr/>
<h3 data-id="heading-8">3ï¸âƒ£ è¯•å›¾ç”¨ <code>getParameterMap</code></h3>
<pre><code class="hljs language-scss" lang="scss">request<span class="hljs-selector-class">.getParameterMap</span>()
</code></pre>
<p>âŒ å¯¹ JSON è¯·æ±‚å®Œå…¨æ— æ•ˆ<br/>
ï¼ˆå®ƒåªå¯¹ <code>application/x-www-form-urlencoded</code> ç”Ÿæ•ˆï¼‰</p>
<hr/>
<h2 data-id="heading-9">ä¸ƒã€è‡³æ­¤ï¼Œé—®é¢˜å·²ç»å¯ä»¥è¢«å‡†ç¡®æè¿°äº†</h2>
<blockquote>
<p><strong>HTTP request body åœ¨ Servlet è§„èŒƒä¸­åªèƒ½è¢«è¯»å–ä¸€æ¬¡</strong></p>
<p><strong>è€Œ <code>@RequestBody</code> å·²ç»å¸®ä½ è¯»å®Œäº†</strong></p>
</blockquote>
<p>æ‰€ä»¥ï¼š</p>
<ul>
<li>ä¸æ˜¯â€œrequest é‡Œæ²¡å‚æ•°â€</li>
<li>è€Œæ˜¯<strong>å”¯ä¸€çš„ body æµå·²ç»è¢«æ¶ˆè´¹</strong></li>
</ul>
<hr/>
<h2 data-id="heading-10">å…«ã€æ–°é—®é¢˜ï¼šæˆ‘æ—¢è¦åŸå§‹ bodyï¼Œåˆè¦ DTOï¼Œæ€ä¹ˆåŠï¼Ÿ</h2>
<p>è¿™æ˜¯æ‰€æœ‰å›è°ƒ / éªŒç­¾åœºæ™¯çš„<strong>æ ¸å¿ƒçŸ›ç›¾</strong>ï¼š</p>
<ul>
<li>éªŒç­¾ï¼šå¿…é¡»ä½¿ç”¨ <strong>åŸå§‹è¯·æ±‚ä½“</strong></li>
<li>ä¸šåŠ¡ï¼šå¸Œæœ›ç›´æ¥ç”¨ <strong>Java å¯¹è±¡</strong></li>
<li>ç°å®ï¼šbody åªèƒ½è¯»ä¸€æ¬¡</li>
</ul>
<p>ğŸ‘‰ é‚£å°±åªèƒ½ <strong>æå‰ç¼“å­˜</strong></p>
<hr/>
<h2 data-id="heading-11">ä¹ã€æ­£ç¡®è§£æ³•ï¼šåœ¨ Filter å±‚ç¼“å­˜è¯·æ±‚ä½“</h2>
<p>Spring å·²ç»æä¾›äº†æ ‡å‡†å·¥å…·ï¼š<br/>
<strong><code>ContentCachingRequestWrapper</code></strong></p>
<p>æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š</p>
<blockquote>
<p><strong>ä¸ä¸»åŠ¨è¯» bodyï¼Œåªåœ¨åˆ«äººè¯»çš„æ—¶å€™é¡ºæ‰‹ç¼“å­˜</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-12">åã€æœ€ç»ˆå®ç°ï¼ˆç”Ÿäº§å¯ç”¨ï¼‰</h2>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Component</span>
<span class="hljs-variable">@Order</span>(Ordered.HIGHEST_PRECEDENCE)
<span class="hljs-variable">@Slf4j</span>
public class RequestBodyCacheFilter extends OncePerRequestFilter {

    <span class="hljs-variable">@Override</span>
    protected boolean <span class="hljs-built_in">shouldNotFilter</span>(HttpServletRequest request) {
        <span class="hljs-comment">// åªæ‹¦æˆªç‰¹å®šå›è°ƒè·¯å¾„ï¼Œé¿å…å…¨ç«™ç”Ÿæ•ˆ</span>
        <span class="hljs-selector-tag">return</span> !<span class="hljs-selector-tag">request</span><span class="hljs-selector-class">.getRequestURI</span>()<span class="hljs-selector-class">.contains</span>(<span class="hljs-string">"/callback"</span>);
    }

    @<span class="hljs-selector-tag">Override</span>
    <span class="hljs-selector-tag">protected</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">doFilterInternal</span>(HttpServletRequest request,
                                    HttpServletResponse response,
                                    FilterChain filterChain)
            <span class="hljs-selector-tag">throws</span> <span class="hljs-selector-tag">ServletException</span>, <span class="hljs-selector-tag">IOException</span> {

        <span class="hljs-selector-tag">ContentCachingRequestWrapper</span> <span class="hljs-selector-tag">wrapper</span> =
                <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">ContentCachingRequestWrapper</span>(request);

        <span class="hljs-comment">// å…³é”®ï¼šå¿…é¡»å…ˆæ”¾è¡Œ</span>
        <span class="hljs-selector-tag">filterChain</span><span class="hljs-selector-class">.doFilter</span>(wrapper, response);

        <span class="hljs-comment">// å†ä»ç¼“å­˜ä¸­è¯»å–</span>
        <span class="hljs-selector-tag">byte</span><span class="hljs-selector-attr">[]</span> <span class="hljs-selector-tag">body</span> = <span class="hljs-selector-tag">wrapper</span><span class="hljs-selector-class">.getContentAsByteArray</span>();
        <span class="hljs-selector-tag">if</span> (body.length &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">bodyStr</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">String</span>(body, StandardCharsets.UTF_8);
            <span class="hljs-selector-tag">log</span><span class="hljs-selector-class">.info</span>(<span class="hljs-string">"ã€å›è°ƒåŸå§‹è¯·æ±‚ä½“ã€‘URI={}, Body={}"</span>,
                    request.<span class="hljs-built_in">getRequestURI</span>(), bodyStr);
        }
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-13">åä¸€ã€ä¸ºä»€ä¹ˆä¸€å®šè¦åœ¨ <code>doFilter</code> ä¹‹åè¯»å– bodyï¼Ÿ</h2>
<p>è¿™æ˜¯<strong>æœ€å®¹æ˜“å†™é”™ã€ä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€ç‚¹</strong>ã€‚</p>
<h3 data-id="heading-14">åŸå› åªæœ‰ä¸€å¥è¯ï¼š</h3>
<blockquote>
<p><strong><code>ContentCachingRequestWrapper</code> æœ¬èº«ä¸ä¼šè¯» body</strong></p>
</blockquote>
<p>çœŸæ­£è¯»å– body çš„æ˜¯è°ï¼Ÿ</p>
<p>ğŸ‘‰ <strong>æ˜¯ Spring MVC çš„ <code>@RequestBody</code></strong></p>
<p>å¦‚æœä½ åœ¨ <code>doFilter</code> ä¹‹å‰è¯»å–ï¼š</p>
<ul>
<li>æ­¤æ—¶æ²¡äººè¯»è¿‡ InputStream</li>
<li>ç¼“å­˜è‡ªç„¶æ˜¯ç©ºçš„</li>
</ul>
<p><strong>æ­£ç¡®é¡ºåºå¿…é¡»æ˜¯ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css">åŒ…è£… request
â†“
æ”¾è¡Œ filterChainï¼ˆSpring è¯»å– <span class="hljs-selector-tag">body</span>ï¼‰
â†“
ä» wrapper ç¼“å­˜ä¸­è¯»å–
</code></pre>
<hr/>
<h2 data-id="heading-15">åäºŒã€Controller å±‚å®Œå…¨ä¸ç”¨æ”¹</h2>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@PostMapping</span>(<span class="hljs-string">"/callback/receive"</span>)
public String <span class="hljs-built_in">receive</span>(<span class="hljs-variable">@RequestBody</span> CallbackDTO dto,
                      HttpServletRequest request) {
    <span class="hljs-comment">// dtoï¼šç”¨äºä¸šåŠ¡é€»è¾‘</span>
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">service</span><span class="hljs-selector-class">.process</span>(dto);
}
</code></pre>
<p>æ­¤æ—¶ä½ å·²ç»åŒæ—¶æ‹¿åˆ°äº†ï¼š</p>
<ul>
<li><strong>åŸå§‹è¯·æ±‚ä½“</strong></li>
<li><strong>æ˜ å°„åçš„å¯¹è±¡</strong></li>
</ul>
<p>è€Œä¸”ï¼š</p>
<ul>
<li>ä¸å†²çª</li>
<li>ä¸é‡å¤è¯»å–</li>
<li>ä¸ç ´å Spring MVC æœºåˆ¶</li>
</ul>
<hr/>
<h2 data-id="heading-16">åä¸‰ã€é—®é¢˜æœ€ç»ˆå®šæ€§ï¼šéªŒç­¾å¤±è´¥çš„çœŸæ­£åŸå› </h2>
<p>å›å¤´çœ‹æœ€åˆçš„é—®é¢˜ï¼Œç»“è®ºå·²ç»éå¸¸æ¸…æ¥šäº†ï¼š</p>
<blockquote>
<p>âŒ ä½¿ç”¨ DTO å‚ä¸éªŒç­¾<br/>
âœ” å¿…é¡»ä½¿ç”¨åŸå§‹è¯·æ±‚ä½“</p>
</blockquote>
<p>å› ä¸ºå¯¹è±¡æ˜ å°„è¿‡ç¨‹ä¸­ï¼Œä»»ä½•ä¸€ä¸ªç»†èŠ‚å˜åŒ–ï¼Œéƒ½ä¼šè®©éªŒç­¾å¤±æ•ˆï¼š</p>
<ul>
<li>å­—æ®µç¼ºå¤±</li>
<li><code>null</code> å€¼</li>
<li>ç²¾åº¦å˜åŒ–</li>
<li>key é¡ºåºå˜åŒ–</li>
<li>å¿½ç•¥æœªçŸ¥å­—æ®µ</li>
</ul>
<hr/>
<h2 data-id="heading-17">åå››ã€æœ€ç»ˆæ€»ç»“ï¼ˆå¼ºçƒˆå»ºè®®è®°ä½ï¼‰</h2>
<h3 data-id="heading-18">ä¸€å¥è¯ç»“è®º</h3>
<blockquote>
<p><strong><code>@RequestBody</code> ä¼šæ¶ˆè´¹ request bodyï¼Œä¸€æ—¦æ˜ å°„å®Œæˆï¼ŒåŸå§‹è¯·æ±‚ä½“å°±ä¸å­˜åœ¨äº†</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Bootstrap ä¸ HTML5 è¡¨å•æ„å»ºå‰ç«¯ç•Œé¢]]></title>    <link>https://juejin.cn/post/7602455806447239174</link>    <guid>https://juejin.cn/post/7602455806447239174</guid>    <pubDate>2026-02-04T02:45:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602455806447239174" data-draft-id="7602503154506268713" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" Bootstrap ä¸ HTML5 è¡¨å•æ„å»ºå‰ç«¯ç•Œé¢"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-04T02:45:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·575730334624"/> <meta itemprop="url" content="https://juejin.cn/user/2860271309712009"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             Bootstrap ä¸ HTML5 è¡¨å•æ„å»ºå‰ç«¯ç•Œé¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2860271309712009/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·575730334624
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T02:45:51.000Z" title="Wed Feb 04 2026 02:45:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä½¿ç”¨ Bootstrap ä¸ HTML5 è¡¨å•æ„å»º Coze Logo ç”Ÿæˆå™¨å‰ç«¯ç•Œé¢</h2>
<p>åœ¨ç°ä»£ Web å¼€å‘ä¸­ï¼Œè¡¨å•æ˜¯ç”¨æˆ·ä¸åº”ç”¨ç¨‹åºäº¤äº’çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ã€‚æ— è®ºæ˜¯æ³¨å†Œã€ç™»å½•ï¼Œè¿˜æ˜¯å†…å®¹ç”Ÿæˆï¼ˆå¦‚ AI å›¾æ ‡ç”Ÿæˆï¼‰ï¼Œè‰¯å¥½çš„è¡¨å•è®¾è®¡ä¸ä»…æå‡ç”¨æˆ·ä½“éªŒï¼Œä¹Ÿä½“ç°äº†å¼€å‘è€…å¯¹å¯è®¿é—®æ€§ã€è¯­ä¹‰åŒ–å’Œå“åº”å¼å¸ƒå±€çš„é‡è§†ã€‚æœ¬æ–‡å°†å›´ç»•ä¸€ä¸ªå®é™…åœºæ™¯â€”â€”<strong>Coze Bot Logo ç”Ÿæˆå™¨çš„å‰ç«¯è¡¨å•é¡µé¢</strong>ï¼Œæ·±å…¥è®²è§£å¦‚ä½•ç»“åˆ <strong>HTML5 è¯­ä¹‰åŒ–è¡¨å•è§„èŒƒ</strong> ä¸ <strong>Bootstrap 3 å“åº”å¼å¸ƒå±€ç³»ç»Ÿ</strong>ï¼Œæ„å»ºä¸€ä¸ªç»“æ„æ¸…æ™°ã€æ— éšœç¢å‹å¥½ã€è§†è§‰ç¾è§‚ä¸”åŠŸèƒ½å®Œæ•´çš„ç”¨æˆ·ç•Œé¢ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€é¡µé¢ç»“æ„è®¾è®¡ï¼šåŸºäº Bootstrap çš„å“åº”å¼å¸ƒå±€</h3>
<h4 data-id="heading-2">1. å®¹å™¨å±…ä¸­ï¼š<code>.container</code></h4>
<p>Bootstrap çš„ <code>.container</code> ç±»æä¾›äº†å›ºå®šå®½åº¦çš„å“åº”å¼å®¹å™¨ï¼Œåœ¨ PC ç«¯è‡ªåŠ¨å·¦å³ç•™ç™½ï¼ˆ<code>margin: 0 auto</code>ï¼‰ï¼Œä¿è¯å†…å®¹ä¸ä¼šè´´è¾¹ï¼Œè§†è§‰æ›´èˆ’é€‚ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- å†…å®¹ --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h4 data-id="heading-3">2. æ …æ ¼ç³»ç»Ÿï¼š<code>.row</code> + <code>.col-md-6</code></h4>
<p>ä¸ºäº†åœ¨æ¡Œé¢ç«¯å®ç°â€œå·¦ä¾§è¡¨å•ã€å³ä¾§é¢„è§ˆâ€æˆ–ä»…å±…ä¸­è¡¨å•çš„æ•ˆæœï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>.col-md-6</code> å°†è¡¨å•é™åˆ¶åœ¨é¡µé¢ä¸­éƒ¨ 50% å®½åº¦ï¼Œç§»åŠ¨ç«¯åˆ™è‡ªåŠ¨å †å ä¸º 100% å®½åº¦ï¼Œå®ç°å“åº”å¼é€‚é…ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"row"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-6"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- è¡¨å• --&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šBootstrap 3 çš„æ …æ ¼åŸºäº <code>float</code> å¸ƒå±€ï¼Œéœ€ç¡®ä¿çˆ¶å®¹å™¨æ¸…é™¤æµ®åŠ¨ï¼ˆ<code>.row</code> å·²å†…ç½® clearfixï¼‰ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">äºŒã€è¡¨å•ç»„ä»¶è¯¦è§£ï¼šè¯­ä¹‰åŒ–ä¸æ— éšœç¢è®¾è®¡</h3>
<h4 data-id="heading-5">1. Bot åç§°è¾“å…¥æ¡†ï¼ˆå¿…å¡«ï¼‰</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"titleInput"</span>&gt;</span>Botåç§°ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
    <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥åç§°"</span>
    <span class="hljs-attr">id</span>=<span class="hljs-string">"titleInput"</span> 
    <span class="hljs-attr">name</span>=<span class="hljs-string">"title"</span> 
    <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> 
    <span class="hljs-attr">required</span> 
    <span class="hljs-attr">class</span>=<span class="hljs-string">"form-control"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<ul>
<li><strong><code>&lt;label for="titleInput"&gt;</code></strong>ï¼šæ˜ç¡®å…³è”è¾“å…¥æ¡†ï¼Œå±å¹•é˜…è¯»å™¨å¯æœ—è¯»æ ‡ç­¾å†…å®¹ï¼›</li>
<li><strong><code>id="titleInput"</code></strong>ï¼šå”¯ä¸€æ ‡è¯†ï¼Œä¸ <code>for</code> å±æ€§åŒ¹é…ï¼›</li>
<li><strong><code>required</code></strong>ï¼šHTML5 åŸç”ŸéªŒè¯ï¼Œé˜»æ­¢ç©ºæäº¤ï¼›</li>
<li><strong><code>placeholder</code></strong>ï¼šæä¾›ç¤ºä¾‹æç¤ºï¼ˆå¦‚â€œå®¢æœåŠ©æ‰‹â€ï¼‰ï¼Œä½†ä¸èƒ½æ›¿ä»£ <code>&lt;label&gt;</code>ï¼›</li>
<li><strong><code>class="form-control"</code></strong>ï¼šBootstrap æ ·å¼ï¼Œç»Ÿä¸€è¾“å…¥æ¡†å¤–è§‚ã€‚</li>
</ul>
<h4 data-id="heading-6">2. Bot æè¿°æ–‡æœ¬åŸŸï¼ˆå¯é€‰ä½†æ¨èï¼‰</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"descInput"</span>&gt;</span>Botæè¿°ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> 
    <span class="hljs-attr">name</span>=<span class="hljs-string">"desc"</span>
    <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥æè¿°ï¼Œä¾‹å¦‚ï¼šä¸€ä¸ªå¸®åŠ©ç”¨æˆ·è§£ç­”ç¼–ç¨‹é—®é¢˜çš„AIåŠ©æ‰‹"</span>
    <span class="hljs-attr">class</span>=<span class="hljs-string">"form-control"</span> 
    <span class="hljs-attr">id</span>=<span class="hljs-string">"descInput"</span>
    <span class="hljs-attr">rows</span>=<span class="hljs-string">"3"</span>
  &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<ul>
<li>ä½¿ç”¨ <code>&lt;textarea&gt;</code> æ”¯æŒå¤šè¡Œè¾“å…¥ï¼›</li>
<li><code>rows="3"</code> æ§åˆ¶åˆå§‹é«˜åº¦ï¼›</li>
<li>æè¿°è™½éå¿…å¡«ï¼Œä½†å¯¹ DALLÂ·E 3 ç”Ÿæˆé«˜è´¨é‡ Logo è‡³å…³é‡è¦ï¼Œæ•… placeholder ç»™å‡ºå…·ä½“ç¤ºä¾‹ã€‚</li>
</ul>
<h4 data-id="heading-7">3. æäº¤æŒ‰é’®</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
  <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>
  <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-default btn-primary"</span>
  <span class="hljs-attr">id</span>=<span class="hljs-string">"submitBtn"</span>&gt;</span>ç”Ÿæˆå›¾æ ‡<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<ul>
<li><code>type="submit"</code> è§¦å‘è¡¨å•æäº¤äº‹ä»¶ï¼›</li>
<li><code>btn-primary</code> ä½¿ç”¨ä¸»è‰²è°ƒå¼ºè°ƒæ“ä½œï¼›</li>
<li>æŒ‰é’®æ–‡æœ¬â€œç”Ÿæˆå›¾æ ‡â€æ¸…æ™°è¡¨è¾¾åŠŸèƒ½æ„å›¾ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8">ä¸‰ã€è¡¨å•è¡Œä¸ºæ§åˆ¶ï¼šé˜»æ­¢é»˜è®¤æäº¤</h3>
<p>è¡¨å•çš„ <code>action</code> å±æ€§è‹¥ä¸ºç©ºï¼ˆæˆ–æœªè®¾ç½®ï¼‰ï¼Œé»˜è®¤ä¼šæäº¤åˆ°å½“å‰é¡µé¢ï¼Œå¯¼è‡´é¡µé¢åˆ·æ–°ã€‚ä¸ºè°ƒç”¨ JavaScript å¤„ç†é€»è¾‘ï¼ˆå¦‚è°ƒç”¨ DALLÂ·E APIï¼‰ï¼Œéœ€é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'form[name="appForm"]'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'submit'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
  event.<span class="hljs-title function_">preventDefault</span>(); <span class="hljs-comment">// é˜»æ­¢é¡µé¢è·³è½¬</span>
  
  <span class="hljs-keyword">const</span> title = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'titleInput'</span>).<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();
  <span class="hljs-keyword">const</span> desc = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'descInput'</span>).<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();
  
  <span class="hljs-keyword">if</span> (!title) {
    <span class="hljs-title function_">alert</span>(<span class="hljs-string">'è¯·å¡«å†™ Bot åç§°'</span>);
    <span class="hljs-keyword">return</span>;
  }
  
  <span class="hljs-comment">// æ„é€  Prompt</span>
  <span class="hljs-keyword">const</span> prompt = <span class="hljs-string">`A logo for a bot named "<span class="hljs-subst">${title}</span>". <span class="hljs-subst">${desc || <span class="hljs-string">''</span>}</span> Simple, modern, flat design, icon only, no text.`</span>;
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Generated Prompt:'</span>, prompt);
  <span class="hljs-comment">// æ­¤å¤„å¯è°ƒç”¨ fetch å‘åç«¯å‘é€è¯·æ±‚ï¼Œæˆ–ç›´æ¥è°ƒç”¨ OpenAI APIï¼ˆéœ€å¤„ç† CORS å’Œå¯†é’¥å®‰å…¨ï¼‰</span>
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<blockquote>
<p><strong>å®‰å…¨æç¤º</strong>ï¼šå®é™…é¡¹ç›®ä¸­ï¼ŒDALLÂ·E API å¯†é’¥ä¸åº”æš´éœ²åœ¨å‰ç«¯ï¼Œåº”é€šè¿‡åç«¯ä»£ç†è°ƒç”¨ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-9">å››ã€æ— éšœç¢ï¼ˆAccessibilityï¼‰ä¸ç”¨æˆ·ä½“éªŒä¼˜åŒ–</h3>
<ol>
<li><strong>è¯­ä¹‰åŒ–æ ‡ç­¾</strong>ï¼šæ‰€æœ‰è¾“å…¥æ§ä»¶å‡æœ‰ <code>&lt;label&gt;</code> å…³è”ï¼›</li>
<li><strong>ç„¦ç‚¹ç®¡ç†</strong>ï¼šBootstrap çš„ <code>.form-control</code> è‡ªå¸¦èšç„¦æ ·å¼ï¼›</li>
<li><strong>é”™è¯¯æç¤º</strong>ï¼šå¯æ‰©å±•åŠ å…¥ <code>.has-error</code> å’Œ <code>.help-block</code> æ˜¾ç¤ºéªŒè¯é”™è¯¯ï¼›</li>
<li><strong>é”®ç›˜å¯¼èˆª</strong>ï¼šè¡¨å•å¤©ç„¶æ”¯æŒ Tab é”®åˆ‡æ¢ï¼Œç¬¦åˆ WCAG æ ‡å‡†ï¼›</li>
<li><strong>è¯­ä¹‰æŒ‰é’®</strong>ï¼šä½¿ç”¨ <code>&lt;button&gt;</code> è€Œé <code>&lt;div&gt;</code>ï¼Œç¡®ä¿å±å¹•é˜…è¯»å™¨è¯†åˆ«ä¸ºå¯æ“ä½œå…ƒç´ ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-10">ç»“è¯­</h3>
<p>é€šè¿‡æœ¬æ–‡çš„å®è·µï¼Œæˆ‘ä»¬ä¸ä»…æ„å»ºäº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ Coze Logo ç”Ÿæˆè¡¨å•ï¼Œæ›´å±•ç¤ºäº† <strong>ç°ä»£ Web å¼€å‘ä¸­è¯­ä¹‰åŒ–ã€å¯è®¿é—®æ€§ä¸å“åº”å¼è®¾è®¡çš„èåˆ</strong>ã€‚Bootstrap æä¾›äº†å¿«é€Ÿå¸ƒå±€èƒ½åŠ›ï¼Œè€Œ HTML5 è¡¨å•è§„èŒƒåˆ™ç¡®ä¿äº†åŸºç¡€ä½“éªŒçš„å¥å£®æ€§ã€‚åœ¨ AI åº”ç”¨æ—¥ç›Šæ™®åŠçš„ä»Šå¤©ï¼Œå‰ç«¯å·¥ç¨‹å¸ˆä¸ä»…æ˜¯ UI çš„å®ç°è€…ï¼Œæ›´æ˜¯äººæœºäº¤äº’ä½“éªŒçš„å¡‘é€ è€…ã€‚ä¸€ä¸ªçœ‹ä¼¼ç®€å•çš„è¡¨å•ï¼ŒèƒŒåæ‰¿è½½çš„æ˜¯å¯¹ç”¨æˆ·ã€å¯¹æŠ€æœ¯ã€å¯¹åŒ…å®¹æ€§çš„æ·±åˆ»ç†è§£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScriptå†…ç½®æ•°æ®ç»“æ„]]></title>    <link>https://juejin.cn/post/7602454700504694825</link>    <guid>https://juejin.cn/post/7602454700504694825</guid>    <pubDate>2026-02-04T02:56:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602454700504694825" data-draft-id="7602497125268881414" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScriptå†…ç½®æ•°æ®ç»“æ„"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,æ•°æ®ç»“æ„"/> <meta itemprop="datePublished" content="2026-02-04T02:56:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wuhen_n"/> <meta itemprop="url" content="https://juejin.cn/user/4149996261738233"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScriptå†…ç½®æ•°æ®ç»“æ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4149996261738233/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wuhen_n
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T02:56:52.000Z" title="Wed Feb 04 2026 02:56:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€ï¼šä»ç®—æ³•é¢˜è¯´èµ·</h2>
<p>æ‰¾å‡ºä¸‹åˆ—æ•°ç»„ä¸­é‡å¤çš„å…ƒç´ ï¼ˆå‡è®¾æ‰€æœ‰æ•°å­—æœ€å¤šåªå‡ºç°2æ¬¡ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
</code></pre>
<h3 data-id="heading-1">è§£æ³•1ï¼šä½¿ç”¨Arrayæ–¹æ³•ï¼ˆæ—¶é—´å¤æ‚åº¦O(nÂ²)ï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">findDuplicatesWithArray</span>(<span class="hljs-params">arr</span>) {
    <span class="hljs-keyword">return</span> arr.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> arr.<span class="hljs-title function_">indexOf</span>(item) !== index);
}
</code></pre>
<h3 data-id="heading-2">è§£æ³•2ï¼šä½¿ç”¨Setï¼ˆæ—¶é—´å¤æ‚åº¦O(n)ï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">findDuplicatesWithSet</span>(<span class="hljs-params">arr</span>) {
    <span class="hljs-keyword">const</span> seen = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
    <span class="hljs-keyword">const</span> duplicates = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> arr) {
        <span class="hljs-keyword">if</span> (seen.<span class="hljs-title function_">has</span>(item)) {
            duplicates.<span class="hljs-title function_">add</span>(item);
        } <span class="hljs-keyword">else</span> {
            seen.<span class="hljs-title function_">add</span>(item);
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(duplicates);
}
</code></pre>
<h3 data-id="heading-3">è§£æ³•3ï¼šä½¿ç”¨Objectï¼ˆæ—¶é—´å¤æ‚åº¦O(n)ï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">findDuplicatesWithObject</span>(<span class="hljs-params">arr</span>) {
    <span class="hljs-keyword">const</span> seen = {};
    <span class="hljs-keyword">const</span> duplicates = [];
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> arr) {
        <span class="hljs-keyword">if</span> (seen[item]) {
            duplicates.<span class="hljs-title function_">push</span>(item);
        } <span class="hljs-keyword">else</span> {
            seen[item] = <span class="hljs-literal">true</span>;
        }
    }
    <span class="hljs-keyword">return</span> duplicates;
}
</code></pre>
<p>ä¸Šè¿°è§£æ³•éƒ½èƒ½è§£å†³è¿™ä¸€é—®é¢˜ï¼Œä½†éšç€æ•°æ®é‡å¢å¤§ï¼Œè¿™äº›æ–¹æ¡ˆçš„æ€§èƒ½å·®å¼‚ä¼šéå¸¸æ˜æ˜¾ã€‚è¦ç†è§£ä¸ºä»€ä¹ˆï¼Œæˆ‘ä»¬å°±éœ€è¦æ·±å…¥äº†è§£æ¯ç§æ•°æ®ç»“æ„çš„ç‰¹ç‚¹ã€‚</p>
<h2 data-id="heading-4">Map vs Objectï¼šé”®å€¼å¯¹çš„ç°ä»£é€‰æ‹©</h2>
<h3 data-id="heading-5">Map</h3>
<h4 data-id="heading-6">Mapçš„åŸºæœ¬ä½¿ç”¨</h4>
<p>ä½¿ç”¨ <code>new</code> å…³é”®å­—å’Œ <code>Map</code> æ„é€ å‡½æ•°ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªç©ºçš„ Map æ˜ å°„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
</code></pre>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨åˆ›å»ºçš„æ—¶å€™ï¼ŒåŒæ—¶åˆå§‹åŒ–å®ä¾‹ï¼Œåªéœ€è¦ç»™Map æ„é€ å‡½æ•°ä¼ å…¥ä¸€ä¸ªå¯è¿­ä»£çš„å¯¹è±¡å³å¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>([{
  <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>
}]);
</code></pre>
<h4 data-id="heading-7">Mapçš„æ ¸å¿ƒç‰¹æ€§</h4>
<h5 data-id="heading-8">1. å…è®¸ä»»æ„ç±»å‹çš„é”®</h5>
<pre><code class="hljs language-javascript" lang="javascript">map.<span class="hljs-title function_">set</span>(<span class="hljs-string">'string'</span>, <span class="hljs-string">'å­—ç¬¦ä¸²é”®'</span>);
map.<span class="hljs-title function_">set</span>(<span class="hljs-number">123</span>, <span class="hljs-string">'æ•°å­—é”®'</span>);
map.<span class="hljs-title function_">set</span>(<span class="hljs-literal">true</span>, <span class="hljs-string">'å¸ƒå°”é”®'</span>);
map.<span class="hljs-title function_">set</span>({}, <span class="hljs-string">'å¯¹è±¡é”®'</span>);
map.<span class="hljs-title function_">set</span>([], <span class="hljs-string">'æ•°ç»„é”®'</span>);
map.<span class="hljs-title function_">set</span>(<span class="hljs-function">() =&gt;</span> {}, <span class="hljs-string">'å‡½æ•°é”®'</span>);
map.<span class="hljs-title function_">set</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">'nullé”®'</span>);
map.<span class="hljs-title function_">set</span>(<span class="hljs-literal">undefined</span>, <span class="hljs-string">'undefinedé”®'</span>);
</code></pre>
<h5 data-id="heading-9">2. é¡ºåºä¿æŒ</h5>
<pre><code class="hljs language-javascript" lang="javascript">map.<span class="hljs-title function_">set</span>(<span class="hljs-string">'first'</span>, <span class="hljs-number">1</span>);
map.<span class="hljs-title function_">set</span>(<span class="hljs-string">'second'</span>, <span class="hljs-number">2</span>);
map.<span class="hljs-title function_">set</span>(<span class="hljs-string">'third'</span>, <span class="hljs-number">3</span>);

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [key, value] <span class="hljs-keyword">of</span> map) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(key, <span class="hljs-string">'-'</span>, value); <span class="hljs-comment">// ä¿æŒæ’å…¥é¡ºåº</span>
}
</code></pre>
<h5 data-id="heading-10">3. å¯ä»¥ç›´æ¥è·å–å¤§å°</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Mapå¤§å°:'</span>, map.<span class="hljs-property">size</span>);
</code></pre>
<h5 data-id="heading-11">4. é«˜æ•ˆçš„æŸ¥æ‰¾å’Œåˆ é™¤</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æŸ¥æ‰¾keyä¸º123:'</span>, map.<span class="hljs-title function_">has</span>(<span class="hljs-number">123</span>)); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·å–keyä¸º123çš„å€¼:'</span>, map.<span class="hljs-title function_">get</span>(<span class="hljs-number">123</span>)); <span class="hljs-comment">// 'æ•°å­—é”®'</span>

map.<span class="hljs-title function_">delete</span>(<span class="hljs-number">123</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åˆ é™¤åæŸ¥æ‰¾keyä¸º123:'</span>, map.<span class="hljs-title function_">has</span>(<span class="hljs-number">123</span>)); <span class="hljs-comment">// false</span>
</code></pre>
<h5 data-id="heading-12">5. å…è®¸æ‰¹é‡æ¸…é™¤ç­‰æ“ä½œ</h5>
<pre><code class="hljs language-javascript" lang="javascript">map.<span class="hljs-title function_">clear</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¸…ç©ºåçš„å¤§å°:'</span>, map.<span class="hljs-property">size</span>); <span class="hljs-comment">// 0</span>
</code></pre>
<h3 data-id="heading-13">Object</h3>
<h4 data-id="heading-14">Objectçš„åŸºæœ¬ä½¿ç”¨</h4>
<p>åœ¨ JavaScript ä¸­ï¼Œæ˜¾å¼åœ°åˆ›å»º Object çš„å®ä¾‹æœ‰ä¸¤ç§æ–¹å¼ï¼šä¸€ç§æ˜¯ä½¿ç”¨ <code>new</code> å…³é”®å­—å’Œ <code>Object</code> æ„é€ å‡½æ•°ï¼›å¦ä¸€ç§æ˜¯ä½¿ç”¨<strong>å¯¹è±¡å­—é¢é‡</strong>è¡¨ç¤ºæ³•ã€‚</p>
<h5 data-id="heading-15"><code>new</code> å…³é”®å­—å’Œ <code>Object</code> æ„é€ å‡½æ•°</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> obj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();
</code></pre>
<h5 data-id="heading-16">å¯¹è±¡å­—é¢é‡è¡¨ç¤ºæ³•</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> obj = {};
</code></pre>
<h4 data-id="heading-17">Objectçš„æ ¸å¿ƒç‰¹æ€§</h4>
<h5 data-id="heading-18">1. é”®åªèƒ½æ˜¯å­—ç¬¦ä¸²æˆ–Symbol</h5>
<pre><code class="hljs language-javascript" lang="javascript">obj.<span class="hljs-property">string</span> = <span class="hljs-string">'å­—ç¬¦ä¸²é”®'</span>; <span class="hljs-comment">// é”®ä¼šè¢«è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span>
obj[<span class="hljs-number">123</span>] = <span class="hljs-string">'æ•°å­—é”®'</span>;     <span class="hljs-comment">// æ•°å­—é”®ä¼šè¢«è½¬æ¢ä¸ºå­—ç¬¦ä¸² '123'</span>
obj[<span class="hljs-literal">true</span>] = <span class="hljs-string">'å¸ƒå°”é”®'</span>;    <span class="hljs-comment">// å¸ƒå°”é”®ä¼šè¢«è½¬æ¢ä¸ºå­—ç¬¦ä¸² 'true'</span>
obj[{}] = <span class="hljs-string">'å¯¹è±¡é”®'</span>;      <span class="hljs-comment">// å¯¹è±¡é”®ä¼šè¢«è½¬æ¢ä¸ºå­—ç¬¦ä¸² '[object Object]'</span>
obj[[]] = <span class="hljs-string">'æ•°ç»„é”®'</span>;      <span class="hljs-comment">// æ•°ç»„é”®ä¼šè¢«è½¬æ¢ä¸ºå­—ç¬¦ä¸² ''</span>
obj[<span class="hljs-literal">null</span>] = <span class="hljs-string">'nullé”®'</span>;    <span class="hljs-comment">// nullé”®ä¼šè¢«è½¬æ¢ä¸ºå­—ç¬¦ä¸² 'null'</span>
obj[<span class="hljs-literal">undefined</span>] = <span class="hljs-string">'undefinedé”®'</span>; <span class="hljs-comment">// undefinedé”®ä¼šè¢«è½¬æ¢ä¸ºå­—ç¬¦ä¸² 'undefined'</span>
</code></pre>
<h5 data-id="heading-19">2. é¡ºåºé—®é¢˜ï¼ˆES6åå­—ç¬¦ä¸²é”®æŒ‰æ’å…¥é¡ºåºï¼Œä½†ä»æœ‰ç‰¹æ®Šæƒ…å†µï¼‰</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> obj2 = {};
obj2[<span class="hljs-string">'2'</span>] = <span class="hljs-string">'two'</span>;
obj2[<span class="hljs-string">'1'</span>] = <span class="hljs-string">'one'</span>;
obj2[<span class="hljs-string">'10'</span>] = <span class="hljs-string">'ten'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Objectéå†é¡ºåº:'</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> obj2) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(key, <span class="hljs-string">'-'</span>, obj2[key]); <span class="hljs-comment">// 1 - one, 2 - two, 10 - ten</span>
    <span class="hljs-comment">// æ•°å­—å­—ç¬¦ä¸²é”®ä¼šè¢«æ’åºï¼</span>
}
</code></pre>
<h5 data-id="heading-20">3. å¤§å°éœ€è¦æ‰‹åŠ¨è®¡ç®—</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Objecté”®çš„æ•°é‡:'</span>, <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(obj).<span class="hljs-property">length</span>);
</code></pre>
<h5 data-id="heading-21">4. ç»§æ‰¿çš„å±æ€§å’Œæ–¹æ³•</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'toString'</span> <span class="hljs-keyword">in</span> obj); <span class="hljs-comment">// trueï¼ˆæ¥è‡ªåŸå‹é“¾ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-title function_">hasOwnProperty</span>(<span class="hljs-string">'toString'</span>)); <span class="hljs-comment">// false</span>
</code></pre>
<h3 data-id="heading-22">ä½•æ—¶é€‰æ‹©Mapï¼Ÿä½•æ—¶é€‰æ‹©Objectï¼Ÿ</h3>
<h4 data-id="heading-23">åœºæ™¯1ï¼šé”®æ˜¯åŠ¨æ€çš„ï¼Œä¸”ç±»å‹å¤šæ ·çš„ï¼šä½¿ç”¨Map</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicKeyRegistry</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">registry</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    }
    
    <span class="hljs-title function_">set</span>(<span class="hljs-params">key, value</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">registry</span>.<span class="hljs-title function_">set</span>(key, value);
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
    }
    
    <span class="hljs-title function_">get</span>(<span class="hljs-params">key</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">registry</span>.<span class="hljs-title function_">get</span>(key);
    }
    
    <span class="hljs-comment">// å¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„é”®</span>
    <span class="hljs-title function_">registerComponent</span>(<span class="hljs-params">component</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">registry</span>.<span class="hljs-title function_">set</span>(component, {
            <span class="hljs-attr">mounted</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-attr">instances</span>: []
        });
    }
}
</code></pre>
<h4 data-id="heading-24">åœºæ™¯2ï¼šéœ€è¦é¢‘ç¹å¢åˆ é”®å€¼å¯¹ï¼šä½¿ç”¨Map</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cache</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">capacity</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span> = capacity;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(); <span class="hljs-comment">// Mapä¿æŒæ’å…¥é¡ºåº</span>
    }
    
    <span class="hljs-title function_">get</span>(<span class="hljs-params">key</span>) {
        <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">has</span>(key)) <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">get</span>(key);
    }
    
    <span class="hljs-title function_">set</span>(<span class="hljs-params">key, value</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">has</span>(key)) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">delete</span>(key);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-property">size</span> &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">capacity</span>) {
            <span class="hljs-comment">// åˆ é™¤æœ€æ—§çš„ï¼ˆMapç¬¬ä¸€ä¸ªé”®ï¼‰</span>
            <span class="hljs-keyword">const</span> oldestKey = <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">keys</span>().<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>;
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">delete</span>(oldestKey);
        }
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">cache</span>.<span class="hljs-title function_">set</span>(key, value);
    }
}
</code></pre>
<h4 data-id="heading-25">åœºæ™¯3ï¼šJSONæ•°æ®ã€é…ç½®å¯¹è±¡ã€çº¯æ•°æ®å­˜å‚¨ï¼šä½¿ç”¨Object</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> user = {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>,
    <span class="hljs-attr">age</span>: <span class="hljs-number">30</span>,
    <span class="hljs-attr">email</span>: <span class="hljs-string">'zhangsan@example.com'</span>,
    <span class="hljs-comment">// å¯ä»¥è¢«JSON.stringifyç›´æ¥åºåˆ—åŒ–</span>
    <span class="hljs-comment">// å¯ä»¥è¢«è§£æ„èµ‹å€¼</span>
    <span class="hljs-comment">// è¯­æ³•æ›´ç®€æ´</span>
};
</code></pre>
<h4 data-id="heading-26">åœºæ™¯4ï¼šéœ€è¦åŸå‹ç»§æ‰¿ã€æ–¹æ³•å…±äº«ï¼šä½¿ç”¨Object</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    }
    
    <span class="hljs-title function_">eat</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> is eating`</span>);
    }
}

<span class="hljs-comment">// ç»§æ‰¿å’ŒåŸå‹é“¾æ˜¯Objectçš„å¼ºé¡¹</span>
<span class="hljs-keyword">const</span> dog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animal</span>(<span class="hljs-string">'Dog'</span>);
dog.<span class="hljs-title function_">eat</span>();
</code></pre>
<h2 data-id="heading-27">Set vs Arrayï¼šé›†åˆæ“ä½œçš„è‰ºæœ¯</h2>
<h3 data-id="heading-28">Set</h3>
<h4 data-id="heading-29">Setçš„åŸºæœ¬ä½¿ç”¨</h4>
<p>ä½¿ç”¨ <code>new</code> å…³é”®å­—å’Œ <code>Set</code> æ„é€ å‡½æ•°ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªç©ºçš„ Set é›†åˆï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
</code></pre>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨åˆ›å»ºçš„æ—¶å€™ï¼ŒåŒæ—¶åˆå§‹åŒ–å®ä¾‹ï¼Œåªéœ€è¦ç»™ Set æ„é€ å‡½æ•°ä¼ å…¥ä¸€ä¸ªå¯è¿­ä»£çš„å¯¹è±¡å³å¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]);
</code></pre>
<h4 data-id="heading-30">Setçš„æ ¸å¿ƒç‰¹æ€§</h4>
<h5 data-id="heading-31">1. è‡ªåŠ¨å»é‡ä¸å¤§å°è®¡ç®—</h5>
<pre><code class="hljs language-javascript" lang="javascript">set.<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>);
set.<span class="hljs-title function_">add</span>(<span class="hljs-number">2</span>);
set.<span class="hljs-title function_">add</span>(<span class="hljs-number">3</span>);
set.<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>); <span class="hljs-comment">// é‡å¤ï¼Œä¸ä¼šæ·»åŠ </span>
set.<span class="hljs-title function_">add</span>(<span class="hljs-number">2</span>); <span class="hljs-comment">// é‡å¤ï¼Œä¸ä¼šæ·»åŠ </span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Setå†…å®¹:'</span>, set); <span class="hljs-comment">// Set(3) {1, 2, 3}</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Setå¤§å°:'</span>, set.<span class="hljs-property">size</span>); <span class="hljs-comment">// 3</span>
</code></pre>
<h5 data-id="heading-32">2. æ”¯æŒä»»æ„ç±»å‹çš„å€¼</h5>
<pre><code class="hljs language-javascript" lang="javascript">set.<span class="hljs-title function_">add</span>(<span class="hljs-string">'string'</span>);
set.<span class="hljs-title function_">add</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'obj'</span> });
set.<span class="hljs-title function_">add</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]);
set.<span class="hljs-title function_">add</span>(<span class="hljs-literal">null</span>);
set.<span class="hljs-title function_">add</span>(<span class="hljs-literal">undefined</span>);
set.<span class="hljs-title function_">add</span>(<span class="hljs-title class_">NaN</span>);
set.<span class="hljs-title function_">add</span>(<span class="hljs-title class_">NaN</span>); <span class="hljs-comment">// NaNåœ¨Setä¸­ä¹Ÿè¢«è§†ä¸ºç›¸åŒå€¼</span>
</code></pre>
<h5 data-id="heading-33">3. é«˜æ•ˆçš„æˆå‘˜æ£€æŸ¥</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ˜¯å¦åŒ…å«1:'</span>, set.<span class="hljs-title function_">has</span>(<span class="hljs-number">1</span>)); <span class="hljs-comment">// true</span>
</code></pre>
<h5 data-id="heading-34">4. é›†åˆè¿ç®—ï¼šå¹¶é›† &amp; äº¤é›† &amp; å·®é›†</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> setA = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]);
<span class="hljs-keyword">const</span> setB = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]);

<span class="hljs-comment">// å¹¶é›†</span>
<span class="hljs-keyword">const</span> union = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([...setA, ...setB]);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¹¶é›†:'</span>, union); <span class="hljs-comment">// Set(6) {1, 2, 3, 4, 5, 6}</span>

<span class="hljs-comment">// äº¤é›†</span>
<span class="hljs-keyword">const</span> intersection = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([...setA].<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> setB.<span class="hljs-title function_">has</span>(x)));
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'äº¤é›†:'</span>, intersection); <span class="hljs-comment">// Set(2) {3, 4}</span>

<span class="hljs-comment">// å·®é›†ï¼ˆA - Bï¼‰</span>
<span class="hljs-keyword">const</span> difference = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([...setA].<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> !setB.<span class="hljs-title function_">has</span>(x)));
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å·®é›†(A-B):'</span>, difference); <span class="hljs-comment">// Set(2) {1, 2}</span>
</code></pre>
<h5 data-id="heading-35">ä¸Arrayäº’è½¬</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]);
<span class="hljs-keyword">const</span> arrFromSet = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(set);

<span class="hljs-keyword">const</span> setFromArr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]);
</code></pre>
<h3 data-id="heading-36">Array</h3>
<h4 data-id="heading-37">Arrayçš„åŸºæœ¬ä½¿ç”¨</h4>
<p>åœ¨ JavaScript ä¸­ï¼Œåˆ›å»º Array çš„å®ä¾‹æœ‰ä¸¤ç§æ–¹å¼ï¼šä¸€ç§æ˜¯ä½¿ç”¨ <code>new</code> å…³é”®å­—å’Œ <code>Array</code> æ„é€ å‡½æ•°ï¼›å¦ä¸€ç§æ˜¯ä½¿ç”¨<strong>æ•°ç»„å­—é¢é‡</strong>è¡¨ç¤ºæ³•ã€‚</p>
<h5 data-id="heading-38"><code>new</code> å…³é”®å­—å’Œ <code>Array</code> æ„é€ å‡½æ•°</h5>
<p>ä½¿ç”¨ <code>new</code> å…³é”®å­—å’Œ <code>Array</code> æ„é€ å‡½æ•°ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªç©ºçš„ Array æ•°ç»„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>();
</code></pre>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨åˆ›å»ºçš„æ—¶å€™ï¼ŒåŒæ—¶åˆå§‹åŒ–å®ä¾‹ï¼Œåªéœ€è¦ç»™ Set æ„é€ å‡½æ•°ä¼ å…¥ä¸€ä¸ªå¯è¿­ä»£çš„å¯¹è±¡å³å¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">10</span> , <span class="hljs-number">20</span>, <span class="hljs-number">30</span>);
</code></pre>
<blockquote>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼šå½“æˆ‘ä»¬ä½¿ç”¨ <code>new Array(10 , 20, 30);</code> è¿™ç§æ–¹å¼åˆ›å»ºæ•°ç»„æ—¶ï¼Œæ•°ç»„å€¼ä¸º <code>[10,20,30]</code> ï¼›ä½†å½“å‚æ•°åªæœ‰ä¸€ä¸ªæ—¶ï¼š <code>new Array(10);</code> è¿™æ—¶å€™ä¼šåˆ›å»ºä¸€ä¸ª<strong>é•¿åº¦ä¸º10çš„æ•°ç»„</strong>ã€‚</p>
</blockquote>
<h5 data-id="heading-39">æ•°ç»„å­—é¢é‡è¡¨ç¤ºæ³•</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
</code></pre>
<h4 data-id="heading-40">Arrayçš„æ ¸å¿ƒç‰¹æ€§</h4>
<h5 data-id="heading-41">1. å…è®¸é‡å¤å’Œç›´æ¥è®¡ç®—å¤§å°</h5>
<pre><code class="hljs language-javascript" lang="javascript">arr.<span class="hljs-title function_">push</span>(<span class="hljs-number">1</span>);
arr.<span class="hljs-title function_">push</span>(<span class="hljs-number">2</span>);
arr.<span class="hljs-title function_">push</span>(<span class="hljs-number">3</span>);
arr.<span class="hljs-title function_">push</span>(<span class="hljs-number">1</span>); <span class="hljs-comment">// å…è®¸é‡å¤</span>
arr.<span class="hljs-title function_">push</span>(<span class="hljs-number">2</span>); <span class="hljs-comment">// å…è®¸é‡å¤</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Arrayå†…å®¹:'</span>, arr); <span class="hljs-comment">// [1, 2, 3, 1, 2]</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Arrayé•¿åº¦:'</span>, arr.<span class="hljs-property">length</span>); <span class="hljs-comment">// 5</span>
</code></pre>
<h5 data-id="heading-42">2. ä¸°å¯Œçš„æ•°ç»„æ–¹æ³• - ä¼šæ”¹å˜åŸæ•°ç»„</h5>
<h6 data-id="heading-43">å¡«å……fill()æ–¹æ³•</h6>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">5</span>);
arr.<span class="hljs-title function_">fill</span>(<span class="hljs-number">5</span>); <span class="hljs-comment">// [5, 5, 5, 5, 5]</span>
</code></pre>
<h6 data-id="heading-44">æ ˆæ–¹æ³• push() å’Œ pop()</h6>
<ul>
<li>push() æ–¹æ³•ç”¨äºæ•°ç»„æ¨¡æ‹Ÿåœ¨æ ˆé¡¶çš„å…¥æ ˆæ“ä½œï¼Œå®ƒæ¥æ”¶ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œå¹¶å°†å®ƒä»¬æ·»åŠ åˆ°æ•°ç»„æœ«å°¾ã€‚</li>
<li>pop() æ–¹æ³•ç”¨äºæ•°ç»„æ¨¡æ‹Ÿåœ¨æ ˆé¡¶çš„å‡ºæ ˆæ“ä½œï¼Œå®ƒä¸æ¥æ”¶ä»»ä½•å‚æ•°ï¼Œç”¨äºåˆ é™¤æ•°ç»„çš„æœ€åä¸€é¡¹ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
arr.<span class="hljs-title function_">push</span>(<span class="hljs-number">6</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// [1, 2, 3, 4, 5, 6, 7]</span>
arr.<span class="hljs-title function_">pop</span>(); <span class="hljs-comment">// [1, 2, 3, 4, 5, 6]</span>
</code></pre>
<h6 data-id="heading-45">é˜Ÿåˆ—æ–¹æ³• shift() å’Œ unshift()</h6>
<ul>
<li>shift() æ–¹æ³•ç”¨äºæ•°ç»„æ¨¡å¼åœ¨é˜Ÿåˆ—å¤´éƒ¨å‡ºé˜Ÿæ“ä½œï¼Œå®ƒä¸æ¥æ”¶ä»»ä½•å‚æ•°ï¼Œç”¨äºåˆ é™¤æ•°ç»„çš„ç¬¬ä¸€é¡¹ã€‚</li>
<li>unshift() æ–¹æ³•ç”¨äºæ•°ç»„æ¨¡æ‹Ÿåœ¨é˜Ÿåˆ—å¤´éƒ¨çš„å…¥é˜Ÿæ“ä½œï¼Œå®ƒæ¥æ”¶ä»»æ„æ•°é‡çš„å‚æ•°ï¼Œå¹¶å°†å®ƒä»¬æ·»åŠ åˆ°æ•°ç»„å¤´éƒ¨ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
arr.<span class="hljs-title function_">unshift</span>()(<span class="hljs-number">6</span>, <span class="hljs-number">7</span>); <span class="hljs-comment">// [6, 7, 1, 2, 3, 4, 5]</span>
arr.<span class="hljs-title function_">shift</span>(); <span class="hljs-comment">// [7, 1, 2, 3, 4, 5]</span>
</code></pre>
<h6 data-id="heading-46">æ’åºæ–¹æ³• sort() å’Œ reverse()</h6>
<ul>
<li>sort() æ–¹æ³•ç”¨äºå¯¹æ•°ç»„è¿›è¡Œå‡åºæ’åº</li>
<li>reverse() æ–¹æ³•ç”¨äºå¯¹æ•°ç»„è¿›è¡Œé™åºæ’åº</li>
</ul>
<h6 data-id="heading-47">å¼ºå¤§çš„splice()</h6>
<p>splice() æ–¹æ³•åº”è¯¥å±äºæ•°ç»„ä¸­æœ€å¼ºå¤§çš„æ–¹æ³•äº†ï¼Œå¯ä»¥æ¥å— 2 ä¸ªåŠ 2 ä¸ªä»¥ä¸Šçš„å‚æ•°ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œç¬¬ 1 ä¸ªå‚æ•°è¡¨ç¤ºè¦è¿›è¡Œæ“ä½œçš„å¼€å§‹ä½ç½®ï¼Œç¬¬ 2 ä¸ªå‚æ•°è¡¨ç¤ºè¦åˆ é™¤çš„å…ƒç´ æ•°é‡ï¼Œç¬¬ 3 ä¸ªåŠä»¥åå¾—æ‰€æœ‰å‚æ•°ï¼Œéƒ½è¡¨ç¤ºä¸ºè¦æ–°æ’å…¥çš„å…ƒç´ ã€‚å› æ­¤ï¼Œè¯¥æ–¹æ³•å¯ä»¥æ ¹æ®å‚æ•°çš„ä¸åŒï¼Œå¯ä»¥å®ç°åˆ é™¤ã€æ’å…¥ã€æ›¿æ¢ç­‰æ“ä½œï¼š</p>
<ol>
<li>åˆ é™¤ï¼šéœ€è¦ä¼ é€’ 2 ä¸ªå‚æ•°ï¼Œæ¯”å¦‚ï¼š<code>arr.splice(0, 2)</code> ä¼šåˆ é™¤å‰2ä¸ªå…ƒç´ ã€‚</li>
<li>æ’å…¥ï¼šéœ€è¦ä¼ é€’ 3 ä¸ªæˆ– 3 ä¸ªä»¥ä¸Šçš„å‚æ•°ï¼Œä¸”ç¬¬äºŒä¸ªå‚æ•°ä¸€å®šä¸º 0ï¼Œæ¯”å¦‚ï¼š<code>arr.splice(2, 0, 1, 2, 3)</code> ä¼šä»ç¬¬äºŒä¸ªä½ç½®å¼€å§‹ï¼Œå¾€åæ’å…¥ <code>1, 2, 3</code> ä¸‰ä¸ªå…ƒç´ ã€‚</li>
<li>æ›¿æ¢ï¼šåŒæ ·éœ€è¦ä¼ é€’ 3 ä¸ªæˆ– 3 ä¸ªä»¥ä¸Šçš„å‚æ•°ï¼Œè¡¨ç¤ºä¸ºä»å¼€å§‹ä½ç½®ï¼Œåˆ é™¤å¤šå°‘ä¸ªå…ƒç´ åï¼Œå†æ’å…¥å…ƒç´ æ•°æ®ã€‚</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
arr.<span class="hljs-title function_">splice</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);  <span class="hljs-comment">// ä»ç´¢å¼•1å¼€å§‹åˆ é™¤2ä¸ªå…ƒç´ (2ï¼Œ 3)ï¼Œç»“æœä¸ºï¼š[1, 4, 5]</span>
arr.<span class="hljs-title function_">splice</span>(<span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>);  <span class="hljs-comment">// ä»ç´¢å¼•2å¼€å§‹æ’å…¥'a'å’Œ'b'ï¼Œç»“æœä¸ºï¼š[1, 4, 'a', 'b', 5]</span>
arr.<span class="hljs-title function_">splice</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-string">'c'</span>);  <span class="hljs-comment">// ä»ç´¢å¼•1å¼€å§‹åˆ é™¤2ä¸ªå…ƒç´ (4, 'a')ï¼Œå†æ’å…¥'c'ï¼Œ[1, 'c', 'b', 5]</span>
</code></pre>
<blockquote>
<p>æ³¨ï¼šä»¥ä¸Šæ‰€æœ‰æ–¹æ³•å‡ä¼šæ”¹å˜åŸæ•°ç»„ã€‚</p>
</blockquote>
<h5 data-id="heading-48">3. ä¸°å¯Œçš„æ•°ç»„æ–¹æ³• - ä¸ä¼šæ”¹å˜åŸæ•°ç»„</h5>
<h6 data-id="heading-49">æ•°ç»„è¿æ¥æ–¹æ³•concat()</h6>
<p>concat() æ–¹æ³•ç”¨äºå°†ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°ç»„ç›¸è¿æ¥ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr1 = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
<span class="hljs-keyword">const</span> arr2 = [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
<span class="hljs-keyword">const</span> arr3 = arr1.<span class="hljs-title function_">concat</span>(arr2); <span class="hljs-comment">//[1, 2, 3, 4, 5]</span>
</code></pre>
<h6 data-id="heading-50">æ•°ç»„æˆªå–æ–¹æ³•slice()</h6>
<p>slice() æ–¹æ³•å¯ä»¥æ¥æ”¶1ä¸ªæˆ–2ä¸ªå‚æ•°ï¼šå½“å‚æ•°åªæœ‰1ä¸ªæ—¶ï¼Œslice() æ–¹æ³•ä¼šè¿”å›ä»è¯¥ç´¢å¼•åˆ°æ•°ç»„æœ«å°¾çš„æ‰€æœ‰å…ƒç´ ï¼›å½“å‚æ•°æœ‰2ä¸ªæ—¶ï¼Œslice() æ–¹æ³•ä¼šè¿”å›ä»å¼€å§‹ç´¢å¼•ï¼ˆç¬¬1ä¸ªå‚æ•°ï¼‰åˆ°ç»“æŸç´¢å¼•ï¼ˆç¬¬2ä¸ªå‚æ•°ï¼‰ä¹‹é—´çš„æ‰€æœ‰å…ƒç´ ï¼ˆä¸åŒ…æ‹¬ç»“æŸç´¢å¼•çš„å€¼ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-title function_">slice</span>(<span class="hljs-number">3</span>));  <span class="hljs-comment">// [4, 5]</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>)); <span class="hljs-comment">// [0, 1]</span>
</code></pre>
<h6 data-id="heading-51">ä¸¥æ ¼ç›¸ç­‰æŸ¥æ‰¾indexOf()ã€lastIndexOf() å’Œ includes()</h6>
<p>è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½æ˜¯ç”¨äºåœ¨æ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„æ–¹æ³•ï¼Œå®ƒä»¬éƒ½å¯ä»¥æ¥æ”¶ 1 ä¸ªæˆ– 2 ä¸ªå‚æ•°ï¼šç¬¬ 1 ä¸ªå‚æ•°è¡¨ç¤ºè¦æŸ¥æ‰¾çš„å…ƒç´ ï¼›ç¬¬ 2 ä¸ªå‚æ•°å¯é€‰ï¼Œè¡¨ç¤ºè¦ä»å“ªä¸ªä½ç½®å¼€å§‹æ‰¾ï¼ˆä¸å¡«é»˜è®¤ä»ä½ç½® 0 ï¼Œå³å…¨æ•°ç»„æŸ¥æ‰¾ï¼‰ã€‚</p>
<ul>
<li>indexOf() å’Œ includes() éƒ½æ˜¯ä»æ•°ç»„å¼€å¤´è¿›è¡ŒæŸ¥æ‰¾ï¼Œè€Œ lastIndexOf() æ˜¯ä»æ•°ç»„æœ«å°¾å¼€å§‹æŸ¥æ‰¾ã€‚</li>
<li>indexOf() å’Œ lastIndexOf() ä¼šè¿”å›è¦æŸ¥æ‰¾çš„å…ƒç´ åœ¨æ•°ç»„ä¸­å—çš„ç´¢å¼•ä½ç½®ï¼Œä¸å­˜åœ¨è¯¥å…ƒç´ åˆ™è¿”å› -1 ï¼›includes() åˆ™æ˜¯è¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ‰¾åˆ°åŒ¹é…é¡¹ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">1</span>];
arr.<span class="hljs-title function_">indexOf</span>(<span class="hljs-number">1</span>);  <span class="hljs-comment">// 0</span>
arr.<span class="hljs-title function_">lastIndexOf</span>(<span class="hljs-number">1</span>); <span class="hljs-comment">// 5</span>
arr.<span class="hljs-title function_">includes</span>(<span class="hljs-number">1</span>); <span class="hljs-comment">// true</span>

arr.<span class="hljs-title function_">indexOf</span>(<span class="hljs-number">6</span>);  <span class="hljs-comment">// -1</span>
arr.<span class="hljs-title function_">lastIndexOf</span>(<span class="hljs-number">6</span>); <span class="hljs-comment">// -1</span>
arr.<span class="hljs-title function_">includes</span>(<span class="hljs-number">6</span>); <span class="hljs-comment">// false</span>
</code></pre>
<blockquote>
<p>æ³¨ï¼šä»¥ä¸Šä¸‰ä¸ªæ–¹æ³•ï¼Œåœ¨è¿›è¡Œæ•°ç»„åŒ¹é…æŸ¥æ‰¾æ—¶ï¼Œä¼šä½¿ç”¨å…¨ç­‰ï¼ˆ===ï¼‰è¿›è¡Œæ¯”è¾ƒï¼Œä¹Ÿå°±æ˜¯ä¸¤é¡¹å¿…é¡»ä¸¥æ ¼ç›¸ç­‰ï¼Œå› æ­¤ä¸€èˆ¬ç”¨äºç®€å•åŸºæœ¬æ•°æ®ç±»å‹çš„æ•°ç»„æŸ¥æ‰¾ï¼›å¯¹è±¡æ•°ç»„é€šè¿‡ä»¥ä¸Šæ–¹æ³•æ— æ³•æŸ¥æ‰¾ï¼ˆå› ä¸ºå®ƒä»¬åœ¨æŸ¥æ‰¾æ¯”å¯¹æ—¶ï¼Œå¯¹æ¯”çš„æ˜¯å¼•ç”¨åœ°å€ï¼‰ã€‚</p>
</blockquote>
<h6 data-id="heading-52">æ–­è¨€æŸ¥æ‰¾find() å’Œ findIndex()</h6>
<ul>
<li>find()ï¼šæŸ¥æ‰¾å¹¶è¿”å›æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´ å€¼ï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆ™è¿”å› undefinedã€‚</li>
<li>findIndex()ï¼šæŸ¥æ‰¾å¹¶è¿”å›æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´ å€¼çš„ç´¢å¼•åœ°å€ï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆ™è¿”å› -1 ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = [
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'zhangsan'</span>,
      <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>
    },
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'lisi'</span>,
      <span class="hljs-attr">age</span>: <span class="hljs-number">20</span>
    }
];

arr.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">age</span> &gt; <span class="hljs-number">18</span>);  <span class="hljs-comment">// { name: 'lisi', age: 20 }</span>
arr.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">age</span> &gt; <span class="hljs-number">18</span>);  <span class="hljs-comment">// 1</span>
</code></pre>
<h6 data-id="heading-53">è¿­ä»£æ–¹æ³•forEach()ã€map()ã€filter()ã€every()ã€some()</h6>
<p>JavaScript ä¸­ï¼Œä¸ºæ•°ç»„å®šä¹‰äº† 5 ä¸ªè¿­ä»£æ–¹æ³•ï¼š</p>
<ul>
<li>forEach()ï¼šä¾æ¬¡éå†æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚</li>
<li>map()ï¼šå°†æ•°ç»„çš„æ¯ä¸ªå…ƒç´ æŒ‰ç…§ä¸€å®šè§„åˆ™è½¬æ¢æˆæ–°å…ƒç´ ï¼Œè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ã€‚</li>
<li>filter()ï¼šæŒ‰ä¸€å®šè§„åˆ™è¿‡æ»¤æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œè¿”å›æ»¡è¶³è§„åˆ™çš„å…ƒç´ ã€‚</li>
<li>every()ï¼šå¯¹æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½è¿›è¡Œå‡½æ•°å¤„ç†åˆ¤æ–­ï¼Œå¦‚æœæ•°ç»„ä¸­æ¯ä¸€ä¸ªå…ƒç´ çš„åˆ¤æ–­å€¼éƒ½ä¸º trueï¼Œåˆ™è¿™ä¸ªæ–¹æ³•çš„è¿”å›ç»“æœæ˜¯ trueï¼›å¦åˆ™è¿”å› falseã€‚</li>
<li>some()ï¼šå¯¹æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½è¿›è¡Œå‡½æ•°å¤„ç†åˆ¤æ–­ï¼Œåªè¦æ•°ç»„ä¸­æœ‰ä¸€ä¸ªå…ƒç´ çš„åˆ¤æ–­å€¼ä¸º trueï¼Œåˆ™è¿™ä¸ªæ–¹æ³•çš„è¿”å›ç»“æœæ˜¯ trueï¼›å¦åˆ™è¿”å› falseã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];

<span class="hljs-keyword">const</span> mapRes = arr.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">num</span>) =&gt;</span> num * <span class="hljs-number">2</span>);  <span class="hljs-comment">// [2, 4, 6, 8, 10]</span>
<span class="hljs-keyword">const</span> filtered = arr.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">num</span>) =&gt;</span> num % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>);  <span class="hljs-comment">// [2, 4]</span>
<span class="hljs-keyword">const</span> everyRes = arr.<span class="hljs-title function_">every</span>(<span class="hljs-function">(<span class="hljs-params">num</span>) =&gt;</span> num &gt; <span class="hljs-number">0</span>);  <span class="hljs-comment">// true</span>
<span class="hljs-keyword">const</span> someRes = arr.<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">num</span>) =&gt;</span> num &gt; <span class="hljs-number">4</span>);  <span class="hljs-comment">// true</span>
</code></pre>
<blockquote>
<p>æ³¨ï¼šä»¥ä¸Šæ–¹æ³•æœ¬è´¨æ˜¯ä¸ä¼šæ›´æ”¹åŸæ•°ç»„ä¸­ï¼Œä½†å¦‚æœåœ¨æ–¹æ³•ä½“å†…éƒ¨å¯¹åŸæ•°ç»„è¿›è¡Œäº†æ›´æ”¹ï¼Œä¹Ÿæ˜¯ä¼šå¯¹åŸæ•°ç»„äº§ç”Ÿå½±å“çš„ï¼Œçœ‹ä¸‹é¢ä¸€æ®µä»£ç ç¤ºä¾‹ï¼š</p>
</blockquote>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
array.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> {
  arr[index] = item + <span class="hljs-number">1</span>;  <span class="hljs-comment">// å¼€å‘ä¸­ï¼Œè¦é¿å…è¿™ç§å†™æ³•</span>
});
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr);  <span class="hljs-comment">// [2, 3, 4, 5, 6]</span>
</code></pre>
<h6 data-id="heading-54">å½’å¹¶æ–¹æ³•reduce()</h6>
<p>reduce() æ–¹æ³•ä¼šè¿­ä»£æ•°ç»„çš„æ‰€æœ‰é¡¹ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šæ„å»ºä¸€ä¸ªæœ€ç»ˆçš„è¿”å›å€¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
<span class="hljs-keyword">const</span> sum = arr.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">acc, cur</span>) =&gt;</span> acc + cur, <span class="hljs-number">0</span>);  <span class="hljs-comment">// 15</span>
</code></pre>
<h3 data-id="heading-55">ä½•æ—¶é€‰æ‹©Setï¼Ÿä½•æ—¶é€‰æ‹©Arrayï¼Ÿ</h3>
<h4 data-id="heading-56">åœºæ™¯1ï¼šéœ€è¦å¿«é€Ÿæˆå‘˜æ£€æŸ¥ï¼šä½¿ç”¨Set</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PermissionSystem</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ç”¨æˆ·æƒé™é›†åˆï¼ˆå¿«é€ŸæŸ¥æ‰¾ï¼‰</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">userPermissions</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
  }

  <span class="hljs-comment">// æ·»åŠ æƒé™</span>
  <span class="hljs-title function_">grantPermission</span>(<span class="hljs-params">permission</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">userPermissions</span>.<span class="hljs-title function_">add</span>(permission);
  }

  <span class="hljs-comment">// æ£€æŸ¥æƒé™ - Set O(1) æ—¶é—´å¤æ‚åº¦</span>
  <span class="hljs-title function_">hasPermission</span>(<span class="hljs-params">permission</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userPermissions</span>.<span class="hljs-title function_">has</span>(permission);
  }

  <span class="hljs-comment">// æ‰¹é‡æ£€æŸ¥æƒé™ - O(n) æ—¶é—´å¤æ‚åº¦</span>
  <span class="hljs-title function_">hasAllPermissions</span>(<span class="hljs-params">requiredPermissions</span>) {
    <span class="hljs-keyword">return</span> requiredPermissions.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">permission</span> =&gt;</span> 
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">userPermissions</span>.<span class="hljs-title function_">has</span>(permission)
    );
  }
}
</code></pre>
<h4 data-id="heading-57">åœºæ™¯2ï¼šéœ€è¦å»é‡ï¼šä½¿ç”¨Set</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> duplicateIds = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>];

<span class="hljs-comment">// ä½¿ç”¨ Set å»é‡ï¼ˆä¸€è¡Œä»£ç ï¼‰</span>
<span class="hljs-keyword">const</span> uniqueIds = [...<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(duplicateIds)]; <span class="hljs-comment">// [1, 2, 3, 4, 5]</span>
</code></pre>
<h4 data-id="heading-58">åœºæ™¯3ï¼šæ•°å­¦é›†åˆè¿ç®—ï¼šä½¿ç”¨Set</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SocialNetwork</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  }

  <span class="hljs-comment">// å¹¶é›†ï¼šå…±åŒå¥½å‹ + å„è‡ªçš„å¥½å‹</span>
  <span class="hljs-title function_">getUnionOfFriends</span>(<span class="hljs-params">userId1, userId2</span>) {
    <span class="hljs-keyword">const</span> friends1 = <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span>.<span class="hljs-title function_">get</span>(userId1) || <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
    <span class="hljs-keyword">const</span> friends2 = <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span>.<span class="hljs-title function_">get</span>(userId2) || <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
    
    <span class="hljs-comment">// å¹¶é›†è¿ç®—</span>
    <span class="hljs-keyword">const</span> union = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([...friends1, ...friends2]);
    <span class="hljs-keyword">return</span> [...union];
  }

  <span class="hljs-comment">// äº¤é›†ï¼šå…±åŒå¥½å‹</span>
  <span class="hljs-title function_">getIntersectionOfFriends</span>(<span class="hljs-params">userId1, userId2</span>) {
    <span class="hljs-keyword">const</span> friends1 = <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span>.<span class="hljs-title function_">get</span>(userId1) || <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
    <span class="hljs-keyword">const</span> friends2 = <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span>.<span class="hljs-title function_">get</span>(userId2) || <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
    
    <span class="hljs-comment">// äº¤é›†è¿ç®—</span>
    <span class="hljs-keyword">const</span> intersection = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(
      [...friends1].<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">friend</span> =&gt;</span> friends2.<span class="hljs-title function_">has</span>(friend))
    );
    <span class="hljs-keyword">return</span> [...intersection];
  }

  <span class="hljs-comment">// å·®é›†ï¼šAæœ‰ä½†Bæ²¡æœ‰çš„å¥½å‹</span>
  <span class="hljs-title function_">getDifferenceOfFriends</span>(<span class="hljs-params">userId1, userId2</span>) {
    <span class="hljs-keyword">const</span> friends1 = <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span>.<span class="hljs-title function_">get</span>(userId1) || <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
    <span class="hljs-keyword">const</span> friends2 = <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span>.<span class="hljs-title function_">get</span>(userId2) || <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
    
    <span class="hljs-comment">// å·®é›†è¿ç®—</span>
    <span class="hljs-keyword">const</span> difference = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(
      [...friends1].<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">friend</span> =&gt;</span> !friends2.<span class="hljs-title function_">has</span>(friend))
    );
    <span class="hljs-keyword">return</span> [...difference];
  }
}
</code></pre>
<h4 data-id="heading-59">åœºæ™¯4ï¼šæœ‰åºæ•°æ®ã€éœ€è¦ç´¢å¼•è®¿é—®ã€ä¸°å¯Œæ•°ç»„æ“ä½œï¼šä½¿ç”¨Array</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ShoppingCart</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span> = [];  <span class="hljs-comment">// ä½¿ç”¨ Arrayï¼šéœ€è¦ä¿æŒé¡ºåºã€ç´¢å¼•è®¿é—®ã€å„ç§æ•°ç»„æ–¹æ³•</span>
  }

  <span class="hljs-comment">// æ·»åŠ å•†å“åˆ°è´­ç‰©è½¦ï¼ˆä¿æŒæ·»åŠ é¡ºåºï¼‰</span>
  <span class="hljs-title function_">addItem</span>(<span class="hljs-params">product, quantity = <span class="hljs-number">1</span></span>) {
    <span class="hljs-keyword">const</span> existingItemIndex = <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">findIndex</span>(
      <span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">id</span> === product.<span class="hljs-property">id</span>
    );
    
    <span class="hljs-keyword">if</span> (existingItemIndex !== -<span class="hljs-number">1</span>) {
      <span class="hljs-comment">// æ›´æ–°å·²æœ‰å•†å“æ•°é‡</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>[existingItemIndex].<span class="hljs-property">quantity</span> += quantity;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// æ·»åŠ æ–°å•†å“</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>({
        ...product,
        quantity,
        <span class="hljs-attr">addedAt</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>() <span class="hljs-comment">// è®°å½•æ·»åŠ æ—¶é—´</span>
      });
    }
  }

  <span class="hljs-comment">// æŒ‰ç´¢å¼•ç§»é™¤å•†å“</span>
  <span class="hljs-title function_">removeItem</span>(<span class="hljs-params">index</span>) {
    <span class="hljs-keyword">if</span> (index &gt;= <span class="hljs-number">0</span> &amp;&amp; index &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>)[<span class="hljs-number">0</span>];
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }

  <span class="hljs-comment">// æŒ‰å•†å“IDç§»é™¤</span>
  <span class="hljs-title function_">removeItemById</span>(<span class="hljs-params">productId</span>) {
    <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">id</span> === productId);
    <span class="hljs-keyword">if</span> (index !== -<span class="hljs-number">1</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeItem</span>(index);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }

  <span class="hljs-comment">// ç­›é€‰ï¼šæŒ‰ä»·æ ¼èŒƒå›´</span>
  <span class="hljs-title function_">filterByPriceRange</span>(<span class="hljs-params">min, max</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> 
      item.<span class="hljs-property">price</span> &gt;= min &amp;&amp; item.<span class="hljs-property">price</span> &lt;= max
    );
  }

  <span class="hljs-comment">// åˆ†é¡µè·å–å•†å“</span>
  <span class="hljs-title function_">getItemsPaginated</span>(<span class="hljs-params">page = <span class="hljs-number">1</span>, pageSize = <span class="hljs-number">5</span></span>) {
    <span class="hljs-keyword">const</span> startIndex = (page - <span class="hljs-number">1</span>) * pageSize;
    <span class="hljs-keyword">const</span> endIndex = startIndex + pageSize;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">slice</span>(startIndex, endIndex);
  }
}
</code></pre>
<h2 data-id="heading-60">WeakMapä¸WeakSetï¼šå¼±å¼•ç”¨çš„è‰ºæœ¯</h2>
<h3 data-id="heading-61">WeakMapï¼šå¼±å¼•ç”¨çš„é”®å€¼å¯¹</h3>
<p>WeakMap æ˜¯ Map çš„â€œå…„å¼Ÿâ€ç±»å‹ï¼Œå…¶ API ä¹Ÿæ˜¯ Map çš„å­é›†ã€‚ WeakMap ä¸­çš„ â€œweakâ€ æè¿°çš„æ˜¯JavaScript åƒåœ¾å›æ”¶æœºåˆ¶ä¸­å¯¹å¾…â€œå¼±æ˜ å°„â€ä¸­é”®çš„æ–¹å¼ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> weakMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();
</code></pre>
<h4 data-id="heading-62">WeakMapçš„åŸºæœ¬ç‰¹æ€§</h4>
<h5 data-id="heading-63">1. é”®å¿…é¡»æ˜¯å¯¹è±¡ï¼ˆä¸èƒ½æ˜¯åŸå§‹å€¼ï¼‰</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> obj1 = { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span> };
<span class="hljs-keyword">const</span> obj2 = { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span> };
<span class="hljs-keyword">const</span> obj3 = { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span> };

weakMap.<span class="hljs-title function_">set</span>(obj1, <span class="hljs-string">'value1'</span>);
weakMap.<span class="hljs-title function_">set</span>(obj2, <span class="hljs-string">'value2'</span>);
weakMap.<span class="hljs-title function_">set</span>(obj3, <span class="hljs-string">'value3'</span>);
</code></pre>
<h5 data-id="heading-64">2. ä¸èƒ½è®¡ç®—å¤§å°</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è®¾ç½®åweakMap:'</span>, weakMap); <span class="hljs-comment">// &lt;items unknown&gt; </span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(weakMap.<span class="hljs-property">size</span>); <span class="hljs-comment">// undefined æ— æ³•è·å–size</span>
</code></pre>
<h5 data-id="heading-65">3. é”®æ˜¯å¼±å¼•ç”¨ï¼ˆä¸ä¼šé˜»æ­¢åƒåœ¾å›æ”¶ï¼‰</h5>
<pre><code class="hljs language-javascript" lang="javascript">{
    <span class="hljs-keyword">let</span> tempObj = { <span class="hljs-attr">id</span>: <span class="hljs-string">'temp'</span> };
    weakMap.<span class="hljs-title function_">set</span>(tempObj, <span class="hljs-string">'temp value'</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¸´æ—¶å¯¹è±¡è®¾ç½®å:'</span>, weakMap.<span class="hljs-title function_">has</span>(tempObj)); <span class="hljs-comment">// true</span>
}
<span class="hljs-comment">// tempObjç¦»å¼€ä½œç”¨åŸŸï¼Œå¯ä»¥è¢«åƒåœ¾å›æ”¶</span>
<span class="hljs-comment">// weakMapä¸­çš„å¯¹åº”æ¡ç›®ä¼šè‡ªåŠ¨è¢«ç§»é™¤</span>
</code></pre>
<h5 data-id="heading-66">4. æ²¡æœ‰éå†æ–¹æ³•ï¼ˆä¸èƒ½è¿­ä»£ï¼‰</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [key, value] <span class="hljs-keyword">of</span> weakMap) {} <span class="hljs-comment">// TypeError</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(weakMap.<span class="hljs-title function_">keys</span>()); <span class="hljs-comment">// TypeError</span>
</code></pre>
<h3 data-id="heading-67">WeakSetï¼šå¼±å¼•ç”¨çš„é›†åˆ</h3>
<p>WeakSet æ˜¯ Set çš„â€œå…„å¼Ÿâ€ç±»å‹ï¼Œå…¶ API ä¹Ÿæ˜¯ Set çš„å­é›†ã€‚ WeakSet ä¸­çš„ â€œweakâ€ æè¿°çš„æ˜¯JavaScript åƒåœ¾å›æ”¶æœºåˆ¶ä¸­å¯¹å¾…â€œå¼±é›†åˆâ€ä¸­é”®çš„æ–¹å¼ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> weakSet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakSet</span>();
</code></pre>
<h4 data-id="heading-68">WeakSetçš„åŸºæœ¬ç‰¹æ€§</h4>
<h5 data-id="heading-69">1. å€¼å¿…é¡»æ˜¯å¯¹è±¡</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> objA = { <span class="hljs-attr">name</span>: <span class="hljs-string">'A'</span> };
<span class="hljs-keyword">const</span> objB = { <span class="hljs-attr">name</span>: <span class="hljs-string">'B'</span> };
<span class="hljs-keyword">const</span> objC = { <span class="hljs-attr">name</span>: <span class="hljs-string">'C'</span> };

weakSet.<span class="hljs-title function_">add</span>(objA);
weakSet.<span class="hljs-title function_">add</span>(objB);
weakSet.<span class="hljs-title function_">add</span>(objC);
</code></pre>
<h5 data-id="heading-70">2. å¼±å¼•ç”¨ç‰¹æ€§ï¼ˆä¸ä¼šé˜»æ­¢åƒåœ¾å›æ”¶ï¼‰</h5>
<pre><code class="hljs language-javascript" lang="javascript">{
    <span class="hljs-keyword">let</span> tempObj = { <span class="hljs-attr">name</span>: <span class="hljs-string">'temp'</span> };
    weakSet.<span class="hljs-title function_">add</span>(tempObj);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¸´æ—¶å¯¹è±¡æ·»åŠ å:'</span>, weakSet.<span class="hljs-title function_">has</span>(tempObj)); <span class="hljs-comment">// true</span>
}
<span class="hljs-comment">// tempObjç¦»å¼€ä½œç”¨åŸŸï¼Œå¯ä»¥è¢«åƒåœ¾å›æ”¶</span>
</code></pre>
<h5 data-id="heading-71">3. æ²¡æœ‰éå†æ–¹æ³•ï¼ˆä¸èƒ½è¿­ä»£ï¼‰</h5>
<h2 data-id="heading-72">ç»“è¯­</h2>
<p>æ²¡æœ‰"æœ€å¥½"çš„æ•°æ®ç»“æ„ï¼Œåªæœ‰"æœ€é€‚åˆ"çš„æ•°æ®ç»“æ„ã€‚ç†è§£æ¯ç§ç»“æ„çš„ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ï¼Œæ ¹æ®å…·ä½“éœ€æ±‚åšå‡ºæ˜æ™ºé€‰æ‹©ï¼å¯¹äºæ–‡ç« ä¸­é”™è¯¯çš„åœ°æ–¹æˆ–è€…æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[(Plop.js)Vue 3 + JS é¡¹ç›®è‡ªåŠ¨åŒ–ä»£ç ç”ŸæˆæŒ‡å—]]></title>    <link>https://juejin.cn/post/7602551091516227593</link>    <guid>https://juejin.cn/post/7602551091516227593</guid>    <pubDate>2026-02-04T03:03:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602551091516227593" data-draft-id="7602465642534584370" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="(Plop.js)Vue 3 + JS é¡¹ç›®è‡ªåŠ¨åŒ–ä»£ç ç”ŸæˆæŒ‡å— "/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2026-02-04T03:03:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜­é˜³"/> <meta itemprop="url" content="https://juejin.cn/user/1468603264447661"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            (Plop.js)Vue 3 + JS é¡¹ç›®è‡ªåŠ¨åŒ–ä»£ç ç”ŸæˆæŒ‡å— 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1468603264447661/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜­é˜³
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T03:03:04.000Z" title="Wed Feb 04 2026 03:03:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    14
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.6em;font-weight:400;font-size:15px;overflow-x:hidden;color:#303133;font-family:Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,å¾®è½¯é›…é»‘,Arial,sans-serif}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.6em;margin:1.3em 0}.markdown-body h1{font-size:30px;margin-top:50px;margin-bottom:10px}.markdown-body h2{margin-top:45px;margin-bottom:10px;font-size:26px}.markdown-body h3{margin-top:40px;margin-bottom:10px;font-size:22px}.markdown-body h4{font-size:18px}.markdown-body h5{font-size:16px}.markdown-body h6{font-size:15px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:1.6em;margin-bottom:1.6em}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#e96900;font-size:.87em;margin:0 2px;padding:3px 5px;white-space:pre-wrap}.markdown-body .markdown-section&gt;:not(h1):not(h2):not(h3):not(h4):not(h5):not(h6) code{font-size:.8rem;font-family:Roboto Mono,Monaco,courier,monospace}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;border-radius:4px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#42b983;line-height:1.2em}.markdown-body a:active,.markdown-body a:hover{color:rgba(66,185,131,.85);border-bottom:1px solid rgba(66,185,131,.6)}.markdown-body table{display:inline-block!important;font-size:12px;max-width:100%;overflow:auto;border:1px solid #f6f6f6;border-collapse:collapse}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fafafa}.markdown-body td,.markdown-body th{padding:12px 6px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:rgba(52,73,94,.95);padding:1px 23px;margin:22px 0;border-left:4px solid #42b983;background-color:rgba(66,185,131,.1)}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>èƒŒæ™¯</strong>ï¼šåœ¨ Vue 3 + Vite + JS é¡¹ç›®ä¸­ï¼Œä¸ºäº†ç»Ÿä¸€ä»£ç è§„èŒƒï¼ˆAPIã€Viewsã€Componentsï¼‰å¹¶æé«˜å¼€å‘æ•ˆç‡ï¼Œé‡‡ç”¨ <code>Plop.js</code> å®ç°â€œå‘½ä»¤è¡Œä¸€é”®ç”Ÿæˆå¢åˆ æ”¹æŸ¥æ¨¡å—â€ã€‚</p>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ol>
<li>é‡‡ç”¨ <strong>JS æ¨¡æ¿</strong>ï¼Œæ—  TS ç±»å‹è´Ÿæ‹…ï¼Œé€‚åˆå½“å‰é¡¹ç›®ã€‚</li>
<li>å…¼å®¹é¡¹ç›®ä¸­é—ç•™çš„ TS Hooksã€‚</li>
<li><code>plopfile.js</code> å†…ç½®äºæ¨¡æ¿ç›®å½•ï¼Œä¿æŒæ ¹ç›®å½•æ•´æ´ã€‚</li>
</ol>
</blockquote>
<h2 data-id="heading-0">1. å®‰è£…ä¸ç›®å½•ç»“æ„</h2>
<h3 data-id="heading-1">1.1 å®‰è£…</h3>
<p>Bash</p>
<pre><code class="hljs language-css" lang="css">npm install <span class="hljs-attr">--save-dev</span> plop
</code></pre>
<h3 data-id="heading-2">1.2 æ¨èç›®å½•ç»“æ„</h3>
<p>å°†æ‰€æœ‰ç”Ÿæˆå™¨ç›¸å…³æ–‡ä»¶æ”¶çº³åœ¨ <code>plop-templates</code> æ–‡ä»¶å¤¹ä¸­ï¼š</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-keyword">my</span>-project/
â”œâ”€â”€ plop-templates/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ api.hbs           <span class="hljs-comment"># API æ¥å£æ¨¡æ¿</span>
â”‚   â”œâ”€â”€ view/
â”‚   â”‚   â”œâ”€â”€ index.hbs         <span class="hljs-comment"># åˆ—è¡¨ä¸»é¡µæ¨¡æ¿</span>
â”‚   â”‚   â””â”€â”€ drawer.hbs        <span class="hljs-comment"># å¼¹çª—ç»„ä»¶æ¨¡æ¿</span>
â”‚   â””â”€â”€ plopfile.js           <span class="hljs-comment"># æ ¸å¿ƒé…ç½®æ–‡ä»¶ (æ”¾åœ¨è¿™é‡Œ)</span>
â”œâ”€â”€ jsconfig.json             <span class="hljs-comment"># (æˆ– tsconfig.json) ç”¨äºè·¯å¾„åˆ«åæ”¯æŒ</span>
â”œâ”€â”€ .prettierignore           <span class="hljs-comment"># ç”¨äºé˜²æ­¢æ¨¡æ¿æ ¼å¼åŒ–é”™ä¹±</span>
â””â”€â”€ package.json
</code></pre>
<hr/>
<h2 data-id="heading-3">2. æ ¸å¿ƒé…ç½® (plopfile.js)</h2>
<p>ç”±äºé¡¹ç›®å¼€å¯äº† <code>"type": "module"</code>ï¼Œé…ç½®æ–‡ä»¶ä½¿ç”¨ ESM è¯­æ³• (<code>export default</code>)ã€‚</p>
<p><strong>æ–‡ä»¶ä½ç½®</strong>ï¼š<code>plop-templates/plopfile.js</code></p>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">plop</span>) {
  <span class="hljs-comment">// è®¾ç½®ç”Ÿæˆå™¨</span>
  plop.<span class="hljs-title function_">setGenerator</span>(<span class="hljs-string">'crud'</span>, {
    <span class="hljs-attr">description</span>: <span class="hljs-string">'è‡ªåŠ¨ç”Ÿæˆåˆ—è¡¨+å¼¹çª—+API (JSç‰ˆ)'</span>,
    <span class="hljs-comment">// 1. äº¤äº’æç¤º</span>
    <span class="hljs-attr">prompts</span>: [
      {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'input'</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">'folder'</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'è¯·è¾“å…¥ç›®å½•åç§° (ä¾‹å¦‚ system):'</span>,
        <span class="hljs-attr">validate</span>: <span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> !v ? <span class="hljs-string">'ç›®å½•ä¸èƒ½ä¸ºç©º'</span> : <span class="hljs-literal">true</span>
      },
      {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'input'</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">'name'</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'è¯·è¾“å…¥æ¨¡å—åç§° (è‹±æ–‡, å¤§é©¼å³°, å¦‚ User):'</span>,
        <span class="hljs-attr">validate</span>: <span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> !v ? <span class="hljs-string">'æ¨¡å—åä¸èƒ½ä¸ºç©º'</span> : <span class="hljs-literal">true</span>
      },
      {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'input'</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">'cnName'</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'è¯·è¾“å…¥æ¨¡å—ä¸­æ–‡åç§° (å¦‚ ç”¨æˆ·):'</span>,
        <span class="hljs-attr">default</span>: <span class="hljs-string">'æ•°æ®'</span>
      }
    ],
    <span class="hljs-comment">// 2. æ‰§è¡ŒåŠ¨ä½œ</span>
    <span class="hljs-attr">actions</span>: <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
      <span class="hljs-comment">// æ³¨æ„ï¼šå¦‚æœ plopfile åœ¨å­ç›®å½•ä¸‹ï¼Œpath éœ€è¦æ ¹æ®ä½ çš„å®é™…æƒ…å†µè°ƒæ•´</span>
      <span class="hljs-comment">// é€šå¸¸ plop æ‰§è¡Œæ—¶çš„æ ¹ç›®å½•æ˜¯é¡¹ç›®æ ¹ç›®å½•ï¼Œæ‰€ä»¥è·¯å¾„ä¸€èˆ¬ä»ä» src å¼€å§‹å†™</span>
      <span class="hljs-keyword">const</span> actions = [
        <span class="hljs-comment">// ç”Ÿæˆ API æ–‡ä»¶</span>
        {
          <span class="hljs-attr">type</span>: <span class="hljs-string">'add'</span>,
          <span class="hljs-attr">path</span>: <span class="hljs-string">'src/api/{{dashCase name}}.js'</span>,
          <span class="hljs-attr">templateFile</span>: <span class="hljs-string">'plop-templates/api/api.hbs'</span>,
        },
        <span class="hljs-comment">// ç”Ÿæˆåˆ—è¡¨é¡µ</span>
        {
          <span class="hljs-attr">type</span>: <span class="hljs-string">'add'</span>,
          <span class="hljs-attr">path</span>: <span class="hljs-string">'src/views/{{dashCase folder}}/{{dashCase name}}/index.vue'</span>,
          <span class="hljs-attr">templateFile</span>: <span class="hljs-string">'plop-templates/view/index.hbs'</span>,
        },
        <span class="hljs-comment">// ç”Ÿæˆå¼¹çª—ç»„ä»¶</span>
        {
          <span class="hljs-attr">type</span>: <span class="hljs-string">'add'</span>,
          <span class="hljs-attr">path</span>: <span class="hljs-string">'src/views/{{dashCase folder}}/{{dashCase name}}/components/{{properCase name}}Drawer.vue'</span>,
          <span class="hljs-attr">templateFile</span>: <span class="hljs-string">'plop-templates/view/drawer.hbs'</span>,
        }
      ];
      <span class="hljs-keyword">return</span> actions;
    }
  });
};
</code></pre>
<blockquote>
<p><strong>ğŸ’¡ çŸ¥è¯†ç‚¹ï¼šå†…ç½®å˜é‡è½¬æ¢</strong></p>
<ul>
<li><code>{{name}}</code>: åŸå§‹è¾“å…¥ (e.g., <code>UserRole</code>)</li>
<li><code>{{properCase name}}</code>: å¤§é©¼å³°ï¼Œç”¨äºç»„ä»¶å (e.g., <code>UserRole</code>)</li>
<li><code>{{dashCase name}}</code>: çŸ­æ¨ªçº¿ï¼Œç”¨äºæ–‡ä»¶å/URL (e.g., <code>user-role</code>)</li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-4">3. æ¨¡æ¿æ–‡ä»¶ (.hbs)</h2>
<h3 data-id="heading-5">3.1 API æ¨¡æ¿ (<code>api.hbs</code>)</h3>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> http <span class="hljs-keyword">from</span> <span class="hljs-string">"@/utils/http"</span>;

<span class="hljs-comment">// æ¨¡å—åŸºç¡€è·¯å¾„</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PORT</span> = <span class="hljs-string">"/{{ dashCase name }}"</span>;

<span class="hljs-comment">/**
 * è·å–{{ cnName }}åˆ—è¡¨
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} <span class="hljs-variable">params</span> - { pageNum, pageSize, keyword ... }
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> get{{ properCase name }}<span class="hljs-title class_">List</span> = <span class="hljs-function">(<span class="hljs-params">params</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> http.<span class="hljs-title function_">get</span>(<span class="hljs-string">`<span class="hljs-subst">${PORT}</span>/list`</span>, { params });
};

<span class="hljs-comment">/**
 * æ–°å¢{{ cnName }}
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> add{{ properCase name }} = <span class="hljs-function">(<span class="hljs-params">params</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> http.<span class="hljs-title function_">post</span>(<span class="hljs-string">`<span class="hljs-subst">${PORT}</span>/add`</span>, params);
};

<span class="hljs-comment">/**
 * ç¼–è¾‘{{ cnName }}
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> edit{{ properCase name }} = <span class="hljs-function">(<span class="hljs-params">params</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> http.<span class="hljs-title function_">put</span>(<span class="hljs-string">`<span class="hljs-subst">${PORT}</span>/edit`</span>, params);
};

<span class="hljs-comment">/**
 * åˆ é™¤{{ cnName }}
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">delete</span>{{ properCase name }} = <span class="hljs-function">(<span class="hljs-params">params</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> http.<span class="hljs-title function_">post</span>(<span class="hljs-string">`<span class="hljs-subst">${PORT}</span>/delete`</span>, params);
};
</code></pre>
<h3 data-id="heading-6">3.2 åˆ—è¡¨é¡µæ¨¡æ¿ (<code>index.hbs</code>)</h3>
<p>HTML</p>
<pre><code class="hljs language-ini" lang="ini">&lt;template&gt;
  &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"table-box"</span>&gt;
    &lt;el-card&gt;
      &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"table-header"</span>&gt;
        &lt;el-form :<span class="hljs-attr">inline</span>=<span class="hljs-string">"true"</span> :model=<span class="hljs-string">"searchParams"</span>&gt;
          &lt;el-form-item <span class="hljs-attr">label</span>=<span class="hljs-string">"åç§°"</span>&gt;
             &lt;el-input <span class="hljs-attr">v-model</span>=<span class="hljs-string">"searchParams.keyword"</span> placeholder=<span class="hljs-string">"æœç´¢{{ cnName }}"</span> clearable /&gt;
          &lt;/el-form-item&gt;
          &lt;el-form-item&gt;
            &lt;el-button <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> @click=<span class="hljs-string">"getTableData"</span>&gt;æœç´¢&lt;/el-button&gt;
            &lt;el-button <span class="hljs-attr">icon</span>=<span class="hljs-string">"Refresh"</span> @click=<span class="hljs-string">"resetSearch"</span>&gt;é‡ç½®&lt;/el-button&gt;
          &lt;/el-form-item&gt;
        &lt;/el-form&gt;
        &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"header-button"</span>&gt;
          &lt;el-button <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> icon=<span class="hljs-string">"Plus"</span> @click=<span class="hljs-string">"openDrawer('æ–°å¢')"</span>&gt;æ–°å¢{{ cnName }}&lt;/el-button&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;el-table :<span class="hljs-attr">data</span>=<span class="hljs-string">"tableData"</span> border stripe style=<span class="hljs-string">"width: 100%"</span>&gt;
        &lt;el-table-column <span class="hljs-attr">type</span>=<span class="hljs-string">"index"</span> label=<span class="hljs-string">"#"</span> width=<span class="hljs-string">"80"</span> /&gt;
        &lt;el-table-column <span class="hljs-attr">prop</span>=<span class="hljs-string">"name"</span> label=<span class="hljs-string">"åç§°"</span> /&gt;
        &lt;el-table-column <span class="hljs-attr">prop</span>=<span class="hljs-string">"createTime"</span> label=<span class="hljs-string">"åˆ›å»ºæ—¶é—´"</span> /&gt;
        &lt;el-table-column <span class="hljs-attr">label</span>=<span class="hljs-string">"æ“ä½œ"</span> width=<span class="hljs-string">"200"</span> fixed=<span class="hljs-string">"right"</span>&gt;
          &lt;template <span class="hljs-comment">#default="scope"&gt;</span>
            &lt;el-button <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> link icon=<span class="hljs-string">"Edit"</span> @click=<span class="hljs-string">"openDrawer('ç¼–è¾‘', scope.row)"</span>&gt;ç¼–è¾‘&lt;/el-button&gt;
            &lt;el-button <span class="hljs-attr">type</span>=<span class="hljs-string">"danger"</span> link icon=<span class="hljs-string">"Delete"</span> @click=<span class="hljs-string">"handleDelete(scope.row)"</span>&gt;åˆ é™¤&lt;/el-button&gt;
          &lt;/template&gt;
        &lt;/el-table-column&gt;
      &lt;/el-table&gt;
      
      &lt;el-pagination
        v-model:<span class="hljs-attr">current-page</span>=<span class="hljs-string">"pageParams.pageNum"</span>
        v-model:<span class="hljs-attr">page-size</span>=<span class="hljs-string">"pageParams.pageSize"</span>
        :<span class="hljs-attr">total</span>=<span class="hljs-string">"total"</span>
        @<span class="hljs-attr">current-change</span>=<span class="hljs-string">"getTableData"</span>
        @<span class="hljs-attr">size-change</span>=<span class="hljs-string">"getTableData"</span>
        <span class="hljs-attr">layout</span>=<span class="hljs-string">"total, sizes, prev, pager, next, jumper"</span>
      /&gt;
    &lt;/el-card&gt;

    &lt;{{ properCase name }}Drawer <span class="hljs-attr">ref</span>=<span class="hljs-string">"drawerRef"</span> /&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup <span class="hljs-attr">name</span>=<span class="hljs-string">"{{ properCase name }}"</span>&gt;
import { ref, reactive } from "vue"<span class="hljs-comment">;</span>
import { get{{ properCase name }}List, delete{{ properCase name }}, add{{ properCase name }}, edit{{ properCase name }} } from "@/api/{{ dashCase name }}"<span class="hljs-comment">;</span>
import {{ properCase name }}Drawer from "./components/{{ properCase name }}Drawer.vue"<span class="hljs-comment">;</span>
import { ElMessage, ElMessageBox } from "element-plus"<span class="hljs-comment">;</span>

const <span class="hljs-attr">drawerRef</span> = ref()<span class="hljs-comment">;</span>
const <span class="hljs-attr">tableData</span> = ref([])<span class="hljs-comment">;</span>
const <span class="hljs-attr">total</span> = ref(<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>

const <span class="hljs-attr">searchParams</span> = reactive({ keyword: <span class="hljs-string">""</span> })<span class="hljs-comment">;</span>
const <span class="hljs-attr">pageParams</span> = reactive({ pageNum: <span class="hljs-number">1</span>, pageSize: <span class="hljs-number">10</span> })<span class="hljs-comment">;</span>

const <span class="hljs-attr">getTableData</span> = async () =&gt; {
  const <span class="hljs-attr">params</span> = { ...pageParams, ...searchParams }<span class="hljs-comment">;</span>
  try {
    const { data } = await get{{ properCase name }}List(params)<span class="hljs-comment">;</span>
    <span class="hljs-attr">tableData.value</span> = data.list || []<span class="hljs-comment">;</span>
    <span class="hljs-attr">total.value</span> = data.total || <span class="hljs-number">0</span><span class="hljs-comment">;</span>
  } catch (error) {
    console.error(error)<span class="hljs-comment">;</span>
  }
}<span class="hljs-comment">;</span>

const <span class="hljs-attr">resetSearch</span> = () =&gt; {
  <span class="hljs-attr">searchParams.keyword</span> = <span class="hljs-string">""</span><span class="hljs-comment">;</span>
  getTableData()<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

const <span class="hljs-attr">openDrawer</span> = (title, row = {}) =&gt; {
  const <span class="hljs-attr">params</span> = {
    title,
    rowData: { ...row },
    api: <span class="hljs-attr">title</span> === <span class="hljs-string">"æ–°å¢"</span> ? add{{ properCase name }} : edit{{ properCase name }},
    getTableList: getTableData
  }<span class="hljs-comment">;</span>
  drawerRef.value.acceptParams(params)<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

const <span class="hljs-attr">handleDelete</span> = async (row) =&gt; {
  try {
    await ElMessageBox.confirm(`æ˜¯å¦ç¡®è®¤åˆ é™¤è¯¥{{ cnName }}?`, "æç¤º", { type: "warning" })<span class="hljs-comment">;</span>
    await delete{{ properCase name }}({ id: row.id })<span class="hljs-comment">;</span>
    ElMessage.success("åˆ é™¤æˆåŠŸ")<span class="hljs-comment">;</span>
    getTableData()<span class="hljs-comment">;</span>
  } catch (error) {
    // Cancelled
  }
}<span class="hljs-comment">;</span>

getTableData()<span class="hljs-comment">;</span>
&lt;/script&gt;

&lt;style scoped&gt;
.table-header { display: flex<span class="hljs-comment">; justify-content: space-between; margin-bottom: 20px; }</span>
&lt;/style&gt;
</code></pre>
<h3 data-id="heading-7">3.3 å¼¹çª—æ¨¡æ¿ (<code>drawer.hbs</code>)</h3>
<p>HTML</p>
<pre><code class="hljs language-ini" lang="ini">&lt;template&gt;
  &lt;el-drawer
    <span class="hljs-attr">v-model</span>=<span class="hljs-string">"drawerVisible"</span>
    :<span class="hljs-attr">destroy-on-close</span>=<span class="hljs-string">"true"</span>
    <span class="hljs-attr">size</span>=<span class="hljs-string">"500px"</span>
    :<span class="hljs-attr">title</span>=<span class="hljs-string">"`${drawerProps.title}{{ cnName }}`"</span>
  &gt;
    &lt;el-form
      <span class="hljs-attr">ref</span>=<span class="hljs-string">"ruleFormRef"</span>
      <span class="hljs-attr">label-width</span>=<span class="hljs-string">"100px"</span>
      <span class="hljs-attr">label-suffix</span>=<span class="hljs-string">" :"</span>
      :<span class="hljs-attr">rules</span>=<span class="hljs-string">"rules"</span>
      :<span class="hljs-attr">model</span>=<span class="hljs-string">"drawerProps.rowData"</span>
    &gt;
      &lt;el-form-item <span class="hljs-attr">label</span>=<span class="hljs-string">"{{ cnName }}åç§°"</span> prop=<span class="hljs-string">"name"</span>&gt;
        &lt;el-input <span class="hljs-attr">v-model</span>=<span class="hljs-string">"drawerProps.rowData.name"</span> placeholder=<span class="hljs-string">"è¯·è¾“å…¥åç§°"</span> clearable&gt;&lt;/el-input&gt;
      &lt;/el-form-item&gt;
    &lt;/el-form&gt;
    &lt;template <span class="hljs-comment">#footer&gt;</span>
      &lt;el-button @<span class="hljs-attr">click</span>=<span class="hljs-string">"drawerVisible = false"</span>&gt;å–æ¶ˆ&lt;/el-button&gt;
      &lt;el-button <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> @click=<span class="hljs-string">"handleSubmit"</span>&gt;ç¡®å®š&lt;/el-button&gt;
    &lt;/template&gt;
  &lt;/el-drawer&gt;
&lt;/template&gt;

&lt;script setup <span class="hljs-attr">name</span>=<span class="hljs-string">"{{ properCase name }}Drawer"</span>&gt;
import { ref, reactive } from "vue"<span class="hljs-comment">;</span>
import { ElMessage } from "element-plus"<span class="hljs-comment">;</span>

const <span class="hljs-attr">rules</span> = reactive({
  name: <span class="hljs-section">[{ required: true, message: "è¯·å¡«å†™åç§°", trigger: "blur" }]</span>
})<span class="hljs-comment">;</span>

const <span class="hljs-attr">drawerVisible</span> = ref(<span class="hljs-literal">false</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">drawerProps</span> = ref({
  title: "",
  rowData: {},
  api: null,
  getTableList: null
})<span class="hljs-comment">;</span>

const <span class="hljs-attr">acceptParams</span> = (params) =&gt; {
  <span class="hljs-attr">drawerProps.value</span> = params<span class="hljs-comment">;</span>
  <span class="hljs-attr">drawerVisible.value</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

const <span class="hljs-attr">ruleFormRef</span> = ref()<span class="hljs-comment">;</span>

const <span class="hljs-attr">handleSubmit</span> = () =&gt; {
  ruleFormRef.value.validate(async (valid) =&gt; {
    if (!valid) return<span class="hljs-comment">;</span>
    try {
      await drawerProps.value.api(drawerProps.value.rowData)<span class="hljs-comment">;</span>
      ElMessage.success(`${drawerProps.value.title}{{ cnName }}æˆåŠŸï¼`)<span class="hljs-comment">;</span>
      drawerProps.value.getTableList &amp;&amp; drawerProps.value.getTableList()<span class="hljs-comment">;</span>
      <span class="hljs-attr">drawerVisible.value</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
    } catch (error) {
      console.error(error)<span class="hljs-comment">;</span>
    }
  })<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

defineExpose({
  acceptParams
})<span class="hljs-comment">;</span>
&lt;/script&gt;
</code></pre>
<hr/>
<h2 data-id="heading-8">4. ç¯å¢ƒä¸è¿è¡Œé…ç½®</h2>
<h3 data-id="heading-9">4.1 é˜²æ­¢æ ¼å¼åŒ–é”™ä¹±</h3>
<p><code>.hbs</code> æ–‡ä»¶ä¸­çš„ Handlebars è¯­æ³•å®¹æ˜“è¢« Prettier è¯¯ä¼¤ï¼ˆä¾‹å¦‚æŠŠ <code>{{name}}</code> æ ¼å¼åŒ–ä¸º <code>{ { name } }</code> å¯¼è‡´è§£æå¤±è´¥ï¼‰ã€‚</p>
<p>åœ¨æ ¹ç›®å½•åˆ›å»º <code>.prettierignore</code>ï¼š</p>
<p>Plaintext</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¿½ç•¥æ¨¡æ¿æ–‡ä»¶å¤¹</span>
plop-templates/
</code></pre>
<h3 data-id="heading-10">4.2 é…ç½®è¿è¡Œè„šæœ¬</h3>
<p>ä¿®æ”¹ <code>package.json</code>ï¼ŒæŒ‡å®š plopfile çš„ä½ç½®ï¼š</p>
<p>JSON</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-comment">// æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„</span>
  <span class="hljs-attr">"new"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"plop --plopfile ./plop-templates/plopfile.js"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-11">4.3 å…¼å®¹ TS Hooks (å®½å®¹æ¨¡å¼)</h3>
<p>ä¸ºäº†è®© JS é¡¹ç›®èƒ½é¡ºæ»‘å¼•ç”¨æ—§çš„ TS Hooks ä¸” VS Code èƒ½è¯†åˆ«è·¯å¾„åˆ«å <code>@</code>ï¼Œåœ¨æ ¹ç›®å½•åˆ›å»º <code>tsconfig.json</code>ï¼š</p>
<p>JSON</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ESNext"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ESNext"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"moduleResolution"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Node"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"strict"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"jsx"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"preserve"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"allowJs"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>        <span class="hljs-comment">// å…è®¸ JS</span>
    <span class="hljs-attr">"checkJs"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>       <span class="hljs-comment">// ä¸æ£€æŸ¥ JS ç±»å‹</span>
    <span class="hljs-attr">"baseUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"."</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"paths"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"@/*"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"src/*"</span><span class="hljs-punctuation">]</span>      <span class="hljs-comment">// è·¯å¾„åˆ«åæ˜ å°„</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"include"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"src/**/*.ts"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"src/**/*.d.ts"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"src/**/*.vue"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"src/**/*.js"</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h2 data-id="heading-12">5. ä½¿ç”¨æ–¹æ³•</h2>
<ol>
<li>
<p><strong>è¿è¡Œå‘½ä»¤</strong>ï¼š</p>
<p>Bash</p>
<pre><code class="hljs language-arduino" lang="arduino">npm run <span class="hljs-keyword">new</span>
</code></pre>
</li>
<li>
<p><strong>æŒ‰æç¤ºè¾“å…¥</strong>ï¼š</p>
<ul>
<li>ç›®å½•åï¼š<code>system</code></li>
<li>æ¨¡å—åï¼š<code>User</code></li>
<li>ä¸­æ–‡åï¼š<code>ç”¨æˆ·</code></li>
</ul>
</li>
<li>
<p><strong>ç»“æœ</strong>ï¼š</p>
<p>è‡ªåŠ¨ç”Ÿæˆ <code>src/api/user.js</code>, <code>src/views/system/user/index.vue</code> ç­‰æ–‡ä»¶ã€‚</p>
</li>
</ol>
<hr/>
<p><strong>End of Guide</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­¦ä¹ Three.jsâ€“é›ªèŠ±]]></title>    <link>https://juejin.cn/post/7602512064976896063</link>    <guid>https://juejin.cn/post/7602512064976896063</guid>    <pubDate>2026-02-04T03:11:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602512064976896063" data-draft-id="7602529888483459135" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­¦ä¹ Three.jsâ€“é›ªèŠ±"/> <meta itemprop="keywords" content="å‰ç«¯,three.js"/> <meta itemprop="datePublished" content="2026-02-04T03:11:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é€ è½®å­çš„çŒª"/> <meta itemprop="url" content="https://juejin.cn/user/497453720940158"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­¦ä¹ Three.jsâ€“é›ªèŠ±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/497453720940158/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é€ è½®å­çš„çŒª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T03:11:40.000Z" title="Wed Feb 04 2026 03:11:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»25åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å­¦ä¹ Three.js--é›ªèŠ±</h2>
<h3 data-id="heading-1">å‰ç½®æ ¸å¿ƒè¯´æ˜</h3>
<h4 data-id="heading-2">å¼€å‘ç›®æ ‡</h4>
<p>åŸºäºThree.jsçš„<strong>ç²’å­ç³»ç»Ÿ+è‡ªå®šä¹‰ç€è‰²å™¨</strong>å®ç°çœŸå®æ„Ÿ3Dé›ªèŠ±é£˜è½æ•ˆæœï¼Œè¿˜åŸé›ªèŠ±çš„è‡ªç„¶è§†è§‰ä¸åŠ¨æ€ç‰¹å¾ï¼Œæ ¸å¿ƒèƒ½åŠ›åŒ…æ‹¬ï¼š</p>
<ol>
<li>æ¨¡æ‹Ÿé›ªèŠ±çš„è§†è§‰å½¢æ€ï¼šé€šè¿‡åœ†å½¢æŠ—é”¯é½¿ç²’å­+ä¸­å¿ƒäº®è¾¹ç¼˜æš—çš„å…‰æ™•ï¼Œè¿˜åŸé›ªèŠ±åœ¨æš—å…‰ç¯å¢ƒä¸‹çš„æŸ”å’Œåå…‰æ•ˆæœï¼›</li>
<li>å®ç°è‡ªç„¶é£˜è½åŠ¨ç”»ï¼šå‚ç›´ä¸‹è½+æ°´å¹³éšæœºåç§»ï¼Œé¿å…é›ªèŠ±è¿åŠ¨è½¨è¿¹è¿‡äºè§„æ•´ï¼Œè¿˜åŸçœŸå®é›ªèŠ±çš„é£˜è½å§¿æ€ï¼›</li>
<li>æ„å»ºå¾ªç¯åŠ¨ç”»é€»è¾‘ï¼šé›ªèŠ±è¶…å‡ºä¸‹è¾¹ç•Œåè‡ªåŠ¨é‡ç½®åˆ°é¡¶éƒ¨ï¼Œå®ç°æ— é™å¾ªç¯çš„é›ªèŠ±é£˜è½æ•ˆæœï¼Œæ— ç²’å­ç¼ºå¤±ï¼›</li>
<li>å€ŸåŠ©<code>ShaderMaterial</code>æå‡è§†è§‰è´¨æ„Ÿï¼šå¯ç”¨åŠ æ³•æ··åˆè®©é›ªèŠ±é‡å å¤„å…‰æ™•æ›´æŸ”å’Œï¼Œå…¼é¡¾æ€§èƒ½ä¸è§†è§‰ç»†è…»åº¦ï¼›</li>
<li>æ”¯æŒè½¨é“äº¤äº’æŸ¥çœ‹ï¼šé€šè¿‡<code>OrbitControls</code>å®ç°360Â°æ‹–æ‹½æ—‹è½¬ã€æ»šè½®ç¼©æ”¾ï¼Œå…¨æ–¹ä½è§‚å¯Ÿ3Dé›ªèŠ±ç¾¤çš„é£˜è½æ•ˆæœã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0ef94b5f380479d9135f2027019bf10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCg6L2u5a2Q55qE54yq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770779499&amp;x-signature=Z3magPu%2Fifez6yY4DdqvtzA%2F70U%3D" alt="c8649201-4fa3-4f22-96f9-567c677a3c84.png" loading="lazy"/></p>
<h4 data-id="heading-3">æ ¸å¿ƒæŠ€æœ¯æ ˆï¼ˆå…³é”®çŸ¥è¯†ç‚¹ï¼‰</h4>

































<table><thead><tr><th>æŠ€æœ¯ç‚¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>THREE.BufferGeometry</code> + <code>Float32Array</code></td><td>é«˜æ•ˆå­˜å‚¨1000çº§é›ªèŠ±ç²’å­åæ ‡æ•°æ®ï¼Œå‡å°‘CPUä¸GPUæ•°æ®ä¼ è¾“å¼€é”€ï¼Œæ”¯æ’‘æµç•…æ¸²æŸ“</td></tr><tr><td>è‡ªå®šä¹‰ç²’å­è§†è§‰ç®—æ³•ï¼ˆç€è‰²å™¨å®ç°ï¼‰</td><td>1.  å®ç°åœ†å½¢æŠ—é”¯é½¿é›ªèŠ±ç²’å­ï¼Œæ›¿ä»£é»˜è®¤æ–¹å½¢ç²’å­ï¼›2.  æ‰“é€ â€œä¸­å¿ƒäº®ã€è¾¹ç¼˜æš—â€çš„æŸ”å’Œå…‰æ™•ï¼Œè¿˜åŸé›ªèŠ±åå…‰ç‰¹æ€§ï¼›3.  ä¼ é€’å…¨å±€ç»Ÿä¸€é¢œè‰²/å°ºå¯¸ï¼Œå®ç°é›ªèŠ±è§†è§‰ä¸€è‡´æ€§</td></tr><tr><td><code>THREE.ShaderMaterial</code>ï¼ˆé¡¶ç‚¹/ç‰‡å…ƒç€è‰²å™¨ï¼‰</td><td>è¿è¡Œåœ¨GPUä¸Šï¼Œå…·å¤‡å¹¶è¡Œå¤„ç†èƒ½åŠ›ï¼Œé«˜æ•ˆå®ç°é›ªèŠ±çš„åƒç´ çº§è§†è§‰æ•ˆæœï¼Œå…¼é¡¾æ€§èƒ½ä¸è´¨æ„Ÿ</td></tr><tr><td><code>THREE.AdditiveBlending</code>ï¼ˆåŠ æ³•æ··åˆï¼‰</td><td>é›ªèŠ±é‡å å¤„äº®åº¦å åŠ ï¼Œè¥é€ æœ¦èƒ§æŸ”å’Œçš„å…‰æ™•æ„Ÿï¼Œæ¨¡æ‹Ÿé›ªèŠ±ç¾¤çš„è§†è§‰å±‚æ¬¡æ„Ÿï¼Œé¿å…ç²’å­é‡å ç”Ÿç¡¬é®æŒ¡</td></tr><tr><td>é›ªèŠ±åŒåŠ¨æ€é€»è¾‘ï¼ˆå‚ç›´ä¸‹è½+æ°´å¹³åç§»ï¼‰</td><td>å¾®è§‚é›ªèŠ±å‚ç›´ä¸‹è½+æ°´å¹³éšæ—¶é—´åç§»ï¼Œå®è§‚å®ç°å¾ªç¯é‡ç½®ï¼Œè¥é€ è‡ªç„¶ä¸”æŒä¹…çš„é›ªèŠ±é£˜è½æ°›å›´</td></tr><tr><td><code>THREE.OrbitControls</code>ï¼ˆè½¨é“æ§åˆ¶å™¨ï¼‰</td><td>æ”¯æŒæ‹–æ‹½æ—‹è½¬/æ»šè½®ç¼©æ”¾ï¼Œå…¨æ–¹ä½æŸ¥çœ‹3Dé›ªèŠ±ç¾¤çš„é£˜è½æ•ˆæœï¼Œä¾¿æ·è§‚å¯Ÿé›ªèŠ±çš„å…‰æ™•ä¸è¿åŠ¨è½¨è¿¹</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-4">åˆ†æ­¥å¼€å‘è¯¦è§£</h3>
<h4 data-id="heading-5">æ­¥éª¤1ï¼šåŸºç¡€ç¯å¢ƒæ­å»ºï¼ˆåœºæ™¯/ç›¸æœº/æ¸²æŸ“å™¨/æ§åˆ¶å™¨ï¼‰</h4>
<p>æ­å»ºThree.js 3Dåœºæ™¯çš„åŸºç¡€æ¡†æ¶ï¼Œä¸ºé›ªèŠ±é£˜è½æ•ˆæœæä¾›å±•ç¤ºè½½ä½“ï¼Œä¿è¯åœºæ™¯çš„æµç•…äº¤äº’ä¸é«˜æ¸…æ¸²æŸ“ï¼Œè´´åˆé›ªèŠ±çš„æš—å…‰è§†è§‰æ°›å›´ã€‚</p>
<h5 data-id="heading-6">1.1 æ ¸å¿ƒä»£ç </h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. å¯¼å…¥æ ¸å¿ƒåº“ä¸è½¨é“æ§åˆ¶å™¨</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'https://esm.sh/three@0.174.0'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">OrbitControls</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'https://esm.sh/three@0.174.0/examples/jsm/controls/OrbitControls.js'</span>;

<span class="hljs-comment">// 2. åŸºç¡€ç¯å¢ƒåˆå§‹åŒ–ï¼ˆåœºæ™¯/ç›¸æœº/æ¸²æŸ“å™¨ï¼‰</span>
<span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>();

<span class="hljs-comment">// é€è§†ç›¸æœºï¼šé…ç½®åˆç†å‚æ•°ï¼Œç¡®ä¿èƒ½å®Œæ•´è§‚å¯Ÿç²’å­ç¾¤</span>
<span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(
  <span class="hljs-number">40</span>,                     <span class="hljs-comment">// è§†è§’ï¼ˆFOVï¼‰ï¼š40Â°è§†é‡é€‚ä¸­ï¼Œæ— é›ªèŠ±ç²’å­å˜å½¢</span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> / <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>, <span class="hljs-comment">// å®½é«˜æ¯”ï¼šé€‚é…æµè§ˆå™¨çª—å£</span>
  <span class="hljs-number">1</span>,                      <span class="hljs-comment">// è¿‘è£åˆ‡é¢ï¼šè¿‡æ»¤è¿‡è¿‘æ— æ•ˆå¯¹è±¡</span>
  <span class="hljs-number">10000</span>                   <span class="hljs-comment">// è¿œè£åˆ‡é¢ï¼šä¿è¯é›ªèŠ±ç¾¤å®Œæ•´å¤„äºå¯è§èŒƒå›´</span>
);
<span class="hljs-comment">// ç›¸æœºåˆå§‹ä½ç½®ï¼š(0, 0, 200) æ­£é¢å¹³è§†ï¼Œæ¸…æ™°è§‚å¯Ÿé›ªèŠ±é£˜è½çš„çºµæ·±ä¸æ°´å¹³åç§»æ•ˆæœ</span>
camera.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">200</span>);

<span class="hljs-comment">// æ¸²æŸ“å™¨ï¼šå¼€å¯æŠ—é”¯é½¿ï¼Œæå‡é›ªèŠ±ç²’å­è¾¹ç¼˜ç»†è…»åº¦ï¼Œé¿å…å…‰æ™•é”¯é½¿æ„Ÿ</span>
<span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>({ <span class="hljs-attr">antialias</span>: <span class="hljs-literal">true</span> });
renderer.<span class="hljs-title function_">setSize</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>);
renderer.<span class="hljs-title function_">setPixelRatio</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">devicePixelRatio</span>); <span class="hljs-comment">// é«˜æ¸…é€‚é…Retinaå±å¹•ï¼Œé›ªèŠ±å…‰æ™•æ— æ¨¡ç³Š</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(renderer.<span class="hljs-property">domElement</span>);

<span class="hljs-comment">// è½¨é“æ§åˆ¶å™¨ï¼šæ”¯æŒæ‹–æ‹½æ—‹è½¬/æ»šè½®ç¼©æ”¾ï¼Œä¾¿æ·è§‚å¯Ÿ3Dé›ªèŠ±ç¾¤</span>
<span class="hljs-keyword">const</span> controls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrbitControls</span>(camera, renderer.<span class="hljs-property">domElement</span>);
controls.<span class="hljs-property">enableDamping</span> = <span class="hljs-literal">true</span>; <span class="hljs-comment">// å¯ç”¨é˜»å°¼ï¼šæ‹–æ‹½æ—‹è½¬æœ‰æƒ¯æ€§ï¼Œäº¤äº’æ›´é¡ºæ»‘è‡ªç„¶</span>
</code></pre>
<h5 data-id="heading-7">1.2 å…³é”®è¯´æ˜</h5>
<ul>
<li><strong>ç›¸æœºä½ç½®</strong>ï¼š<code>(0, 0, 200)</code> é‡‡ç”¨ã€Œæ­£é¢å¹³è§†+ç¨è¿œã€è§†è§’ï¼Œæ—¢å¯ä»¥å®Œæ•´æ•æ‰é›ªèŠ±ç¾¤çš„é£˜è½çºµæ·±æ•ˆæœï¼Œåˆèƒ½æ¸…æ™°è§‚å¯Ÿå•æœµé›ªèŠ±çš„å…‰æ™•ç»†èŠ‚ï¼Œé¿å…è§†è§’è¿‡è¿‘å¯¼è‡´é›ªèŠ±å…‰æ™•è¿‡æ›ã€æ— æ³•è§‚å¯Ÿæ•´ä½“é£˜è½æ€åŠ¿ã€‚</li>
<li><strong>æ¸²æŸ“å™¨<code>antialias: true</code></strong>ï¼šå¼€å¯æŠ—é”¯é½¿ï¼Œé…åˆåç»­ç‰‡å…ƒç€è‰²å™¨çš„<code>smoothstep</code>æŠ—é”¯é½¿é€»è¾‘ï¼Œè®©é›ªèŠ±ç²’å­çš„è¾¹ç¼˜å’Œå…‰æ™•æ›´ç»†è…»â€”â€”è¿™å¯¹ç™½è‰²é›ªèŠ±å°¤ä¸ºé‡è¦ï¼Œå¯é¿å…é›ªèŠ±å‡ºç°â€œé”¯é½¿è¾¹â€ï¼Œæå‡æš—å…‰ç¯å¢ƒä¸‹çš„è§†è§‰æŸ”å’Œåº¦ã€‚</li>
<li><strong>æ§åˆ¶å™¨é˜»å°¼</strong>ï¼šå¯ç”¨é˜»å°¼åï¼Œæ‹–æ‹½æ—‹è½¬æŸ¥çœ‹é›ªèŠ±ç¾¤æ—¶ï¼Œåœºæ™¯ä¼šæœ‰è‡ªç„¶çš„æƒ¯æ€§å‡é€Ÿï¼Œæ›´è´´åˆ3Dåœºæ™¯çš„äº¤äº’ä½“éªŒï¼Œä¾¿äºé•¿æ—¶é—´è§‚å¯Ÿé›ªèŠ±çš„é£˜è½è½¨è¿¹ä¸å…‰æ™•å åŠ æ•ˆæœã€‚</li>
</ul>
<h4 data-id="heading-8">æ­¥éª¤2ï¼šé›ªèŠ±ç²’å­æ ¸å¿ƒé…ç½®ï¼ˆæ•°é‡/è§†è§‰å‚æ•°ï¼‰</h4>
<p>å®šä¹‰é›ªèŠ±ç²’å­çš„åŸºç¡€é…ç½®å‚æ•°ï¼Œä¸ºåç»­ç€è‰²å™¨ä¸å‡ ä½•ä½“æ„å»ºæä¾›æ•°æ®æ”¯æ’‘ï¼Œä¿è¯é›ªèŠ±ç¾¤çš„å¯†é›†åº¦ä¸è§†è§‰ä¸€è‡´æ€§ã€‚</p>
<h5 data-id="heading-9">2.1 æ ¸å¿ƒä»£ç </h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 3. ç²’å­ç³»ç»Ÿæ ¸å¿ƒé…ç½®</span>
<span class="hljs-keyword">const</span> count = <span class="hljs-number">1000</span>; <span class="hljs-comment">// é›ªèŠ±æ€»æ•°ï¼šä¿è¯é£˜è½æ•ˆæœçš„æµ“å¯†æ„Ÿï¼ŒåŒæ—¶å…¼é¡¾ä½é…è®¾å¤‡æµç•…æ€§</span>
</code></pre>
<h5 data-id="heading-10">2.2 å…³é”®è¯´æ˜</h5>
<ul>
<li><strong><code>count</code>å‚æ•°çš„å¹³è¡¡</strong>ï¼š1000æ˜¯â€œè§†è§‰æ•ˆæœâ€ä¸â€œæ€§èƒ½â€çš„æœ€ä¼˜å¹³è¡¡å€¼â€”â€”å°‘äº500ä¼šå¯¼è‡´é›ªèŠ±è¿‡äºç¨€ç–ï¼Œç¼ºä¹æ¼«å¤©é£˜è½çš„æ°›å›´æ„Ÿï¼›å¤šäº2000ä¼šå¢åŠ GPUæ¸²æŸ“å¼€é”€ï¼Œä½é…è®¾å¤‡å¯èƒ½å‡ºç°å¡é¡¿ï¼Œå°¤å…¶åœ¨å¼€å¯åŠ æ³•æ··åˆåï¼Œç²’å­é‡å è®¡ç®—é‡ä¼šå¢åŠ ã€‚</li>
<li><strong>é›ªèŠ±çš„è§†è§‰é¢„è®¾</strong>ï¼šæœ¬æ­¥éª¤ä»…å®šä¹‰ç²’å­æ•°é‡ï¼Œåç»­é€šè¿‡ç€è‰²å™¨ç»Ÿä¸€é…ç½®é›ªèŠ±çš„å°ºå¯¸ï¼ˆ<code>pointSize</code>ï¼‰ä¸é¢œè‰²ï¼ˆ<code>uColor</code>ï¼‰ï¼Œä¿è¯æ‰€æœ‰é›ªèŠ±è§†è§‰é£æ ¼ä¸€è‡´ï¼Œè¿˜åŸçœŸå®é›ªèŠ±çš„ç»Ÿä¸€æ€§ã€‚</li>
</ul>
<h4 data-id="heading-11">æ­¥éª¤3ï¼šè‡ªå®šä¹‰ç€è‰²å™¨ï¼ˆé›ªèŠ±è§†è§‰æ•ˆæœçš„æ ¸å¿ƒï¼‰</h4>
<p>é€šè¿‡é¡¶ç‚¹ç€è‰²å™¨ä¸ç‰‡å…ƒç€è‰²å™¨ï¼Œå®ç°é›ªèŠ±çš„åœ†å½¢å½¢æ€ã€æŸ”å’Œå…‰æ™•ã€æŠ—é”¯é½¿è¾¹ç¼˜ï¼Œè¿™æ˜¯é›ªèŠ±è§†è§‰è´¨æ„Ÿçš„æ ¸å¿ƒï¼Œæ‰€æœ‰é€»è¾‘è¿è¡Œåœ¨GPUä¸Šï¼Œé«˜æ•ˆä¸”ç»†è…»ã€‚</p>
<h5 data-id="heading-12">3.1 æ ¸å¿ƒä»£ç </h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 4. è‡ªå®šä¹‰ç€è‰²å™¨ï¼ˆé¡¶ç‚¹ç€è‰²å™¨ + ç‰‡å…ƒç€è‰²å™¨ï¼‰</span>
<span class="hljs-comment">// é¡¶ç‚¹ç€è‰²å™¨ï¼šå¤„ç†é›ªèŠ±ä½ç½®ã€å°ºå¯¸ï¼Œå®Œæˆ3Dâ†’2Dé€è§†å˜æ¢</span>
<span class="hljs-keyword">const</span> vertexShader = <span class="hljs-string">`
  uniform float pointSize; // å…¨å±€ç»Ÿä¸€é›ªèŠ±å°ºå¯¸ï¼ˆuniformï¼šæ‰€æœ‰é›ªèŠ±å…±äº«ï¼‰
  void main() {
    // æ ¸å¿ƒï¼šé€è§†å˜æ¢é“¾ï¼Œå°†é›ªèŠ±å±€éƒ¨åæ ‡è½¬æ¢ä¸ºå±å¹•è£å‰ªåæ ‡ï¼Œ3Dæ¸²æŸ“å¿…å¤‡
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    gl_PointSize = pointSize; // ä¸ºæ¯ä¸ªé›ªèŠ±è®¾ç½®å±å¹•å°ºå¯¸ï¼Œä¿è¯è§†è§‰ä¸€è‡´æ€§
  }
`</span>;

<span class="hljs-comment">// ç‰‡å…ƒç€è‰²å™¨ï¼šå¤„ç†é›ªèŠ±åƒç´ çº§è§†è§‰æ•ˆæœï¼ˆå½¢çŠ¶ã€é¢œè‰²ã€é€æ˜åº¦ã€äº®åº¦ï¼‰</span>
<span class="hljs-keyword">const</span> fragmentShader = <span class="hljs-string">`
  uniform vec3 uColor; // å…¨å±€ç»Ÿä¸€é›ªèŠ±é¢œè‰²ï¼ˆuniformï¼šæ‰€æœ‰é›ªèŠ±å…±äº«ï¼‰
  void main() {
    // æ­¥éª¤1ï¼šè®¡ç®—å½“å‰åƒç´ åˆ°é›ªèŠ±ä¸­å¿ƒçš„è·ç¦»ï¼ˆgl_PointCoordï¼šç²’å­å†…UVåæ ‡ï¼ŒèŒƒå›´(0,0)~(1,1)ï¼‰
    float distanceToCenter = distance(gl_PointCoord, vec2(0.5));
    
    // æ­¥éª¤2ï¼šè¾¹ç¼˜æ¸éšæŠ—é”¯é½¿ï¼Œé¿å…é›ªèŠ±è¾¹ç¼˜ç”Ÿç¡¬é”¯é½¿ï¼Œæå‡å…‰æ™•æŸ”å’Œåº¦
    // smoothstep(0.4, 0.5, d)ï¼šd&lt;0.4è¿”å›0ï¼Œd&gt;0.5è¿”å›1ï¼Œä¸­é—´å¹³æ»‘æ’å€¼
    float alpha = 1.0 - smoothstep(0.4, 0.5, distanceToCenter);
    
    // æ­¥éª¤3ï¼šå¢å¼ºä¸­å¿ƒäº®åº¦ï¼Œå®ç°â€œä¸­å¿ƒäº®ã€è¾¹ç¼˜æš—â€çš„å…‰æ™•æ•ˆæœï¼Œè¿˜åŸé›ªèŠ±åå…‰ç‰¹æ€§
    // pow(æŒ‡æ•°5.0)ï¼šæ”¾å¤§äº®åº¦å·®å¼‚ï¼Œè®©ä¸­å¿ƒæ›´äº®ï¼Œè¾¹ç¼˜æ›´æš—ï¼Œå…‰æ™•æ›´æœ‰å±‚æ¬¡æ„Ÿ
    float brightness = pow(1.0 - distanceToCenter, 5.0);
    
    // æ­¥éª¤4ï¼šè®¾ç½®æœ€ç»ˆåƒç´ é¢œè‰²ï¼ˆåŸºç¡€è‰²*äº®åº¦ + æ¸éšé€æ˜åº¦ï¼‰
    gl_FragColor = vec4(uColor * brightness, alpha);
  }
`</span>;
</code></pre>
<h5 data-id="heading-13">3.2 å…³é”®æŠ€æœ¯ç‚¹è§£æ</h5>
<ol>
<li>
<p><strong>é¡¶ç‚¹ç€è‰²å™¨çš„æ ¸å¿ƒèŒè´£</strong>ï¼š</p>
<ul>
<li>å®Œæˆ3Dåæ ‡åˆ°2Då±å¹•åæ ‡çš„<strong>é€è§†å˜æ¢é“¾</strong>ï¼š<code>projectionMatrix * modelViewMatrix * vec4(position, 1.0)</code>ï¼Œè¿™æ˜¯Three.js 3Dæ¸²æŸ“çš„é€šç”¨é€»è¾‘ï¼Œä¿è¯é›ªèŠ±åœ¨å±å¹•ä¸Šçš„æ­£ç¡®æ˜¾ç¤ºä¸â€œè¿‘å¤§è¿œå°â€çš„é€è§†æ•ˆæœã€‚</li>
<li>ç»Ÿä¸€è®¾ç½®é›ªèŠ±å°ºå¯¸ï¼šé€šè¿‡<code>uniform</code>å˜é‡<code>pointSize</code>ä¸ºæ‰€æœ‰é›ªèŠ±è®¾ç½®ç›¸åŒçš„å±å¹•å°ºå¯¸ï¼Œä¿è¯è§†è§‰ä¸€è‡´æ€§ï¼Œé¿å…å•æœµé›ªèŠ±è¿‡å¤§æˆ–è¿‡å°ç ´åæ•´ä½“æ•ˆæœã€‚</li>
</ul>
</li>
<li>
<p><strong>ç‰‡å…ƒç€è‰²å™¨çš„é›ªèŠ±è§†è§‰å®ç°</strong>ï¼š</p>
<ul>
<li><code>gl_PointCoord</code>ï¼šé›ªèŠ±ç²’å­å†…çš„UVåæ ‡ï¼ŒèŒƒå›´ä»<code>(0,0)</code>ï¼ˆå·¦ä¸‹è§’ï¼‰åˆ°<code>(1,1)</code>ï¼ˆå³ä¸Šè§’ï¼‰ï¼Œ<code>vec2(0.5)</code>å¯¹åº”é›ªèŠ±ä¸­å¿ƒï¼Œé€šè¿‡è®¡ç®—åƒç´ åˆ°ä¸­å¿ƒçš„è·ç¦»ï¼Œå®ç°åœ†å½¢é›ªèŠ±å½¢æ€ã€‚</li>
<li><code>distance()</code>ï¼šè®¡ç®—æ¬§å‡ é‡Œå¾—è·ç¦»ï¼Œè·å–å½“å‰åƒç´ ä¸é›ªèŠ±ä¸­å¿ƒçš„é—´è·ï¼Œä¸ºåç»­åœ†å½¢è£å‰ªä¸å…‰æ™•å®ç°æä¾›æ•°æ®æ”¯æ’‘ã€‚</li>
<li><code>smoothstep()</code>ï¼šå®ç°è¾¹ç¼˜æ¸éšï¼Œé¿å…åœ†å½¢é›ªèŠ±å‡ºç°ç”Ÿç¡¬é”¯é½¿â€”â€”è¿™æ˜¯é›ªèŠ±è§†è§‰æŸ”å’Œåº¦çš„å…³é”®ï¼Œè®©é›ªèŠ±è¾¹ç¼˜ä»äº®åˆ°æš—å¹³æ»‘è¿‡æ¸¡ï¼Œå½¢æˆè‡ªç„¶å…‰æ™•ã€‚</li>
<li><code>pow()</code>ï¼šå¹‚æŒ‡æ•°5.0æ”¾å¤§äº®åº¦å·®å¼‚ï¼Œè®©é›ªèŠ±ä¸­å¿ƒæ›´æ˜äº®ï¼ˆæ¨¡æ‹Ÿé›ªèŠ±çš„åå…‰æ ¸å¿ƒï¼‰ï¼Œè¾¹ç¼˜æ›´æš—æ·¡ï¼ˆæ¨¡æ‹Ÿå…‰æ™•çš„è¡°å‡ï¼‰ï¼Œè¿˜åŸçœŸå®é›ªèŠ±åœ¨æš—å…‰ç¯å¢ƒä¸‹çš„è§†è§‰ç‰¹å¾ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-14">æ­¥éª¤4ï¼šæ„å»ºç€è‰²å™¨æè´¨ï¼ˆè¿æ¥ç€è‰²å™¨ï¼Œä¼˜åŒ–è§†è§‰æ•ˆæœï¼‰</h4>
<p>å°†è‡ªå®šä¹‰ç€è‰²å™¨ä¸Three.jsçš„<code>ShaderMaterial</code>ç»‘å®šï¼Œé…ç½®å…¨å±€<code>uniform</code>å‚æ•°ä¸æ¸²æŸ“æ¨¡å¼ï¼Œå®ç°é›ªèŠ±çš„é€æ˜å…‰æ™•ä¸å åŠ æ•ˆæœï¼Œæå‡è§†è§‰å±‚æ¬¡æ„Ÿã€‚</p>
<h5 data-id="heading-15">4.1 æ ¸å¿ƒä»£ç </h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 5. æ„å»ºç€è‰²å™¨æè´¨ï¼ˆè¿æ¥ä¸¤ä¸ªç€è‰²å™¨ï¼Œé…ç½®å‚æ•°ä¸æ¸²æŸ“æ¨¡å¼ï¼‰</span>
<span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">ShaderMaterial</span>({
  <span class="hljs-attr">vertexShader</span>: vertexShader,   <span class="hljs-comment">// ç»‘å®šé¡¶ç‚¹ç€è‰²å™¨</span>
  <span class="hljs-attr">fragmentShader</span>: fragmentShader, <span class="hljs-comment">// ç»‘å®šç‰‡å…ƒç€è‰²å™¨</span>
  <span class="hljs-attr">uniforms</span>: {                    <span class="hljs-comment">// å‘ç€è‰²å™¨ä¼ é€’çš„å…¨å±€ç»Ÿä¸€å‚æ•°</span>
    <span class="hljs-attr">pointSize</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">10.0</span> },  <span class="hljs-comment">// é›ªèŠ±å±å¹•å°ºå¯¸ï¼š10.0å…¼é¡¾ç»†è…»åº¦ä¸å¯è§åº¦</span>
    <span class="hljs-attr">uColor</span>: { <span class="hljs-attr">value</span>: <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Color</span>(<span class="hljs-number">0xffffff</span>) } <span class="hljs-comment">// é›ªèŠ±åŸºç¡€é¢œè‰²ï¼šçº¯ç™½è‰²ï¼Œè¿˜åŸçœŸå®é›ªèŠ±</span>
  },
  <span class="hljs-attr">transparent</span>: <span class="hljs-literal">true</span>,             <span class="hljs-comment">// å¯ç”¨é€æ˜ï¼šæ”¯æŒalphaé€šé“ï¼Œå®ç°è¾¹ç¼˜æ¸éšå…‰æ™•</span>
  <span class="hljs-attr">depthTest</span>: <span class="hljs-literal">true</span>,               <span class="hljs-comment">// å¯ç”¨æ·±åº¦æµ‹è¯•ï¼šé¿å…è¿œé›ªèŠ±é®æŒ¡è¿‘é›ªèŠ±ï¼Œä¿è¯æ­£å¸¸æ¸²æŸ“å±‚çº§</span>
  <span class="hljs-attr">depthWrite</span>: <span class="hljs-literal">false</span>,             <span class="hljs-comment">// ä¼˜åŒ–ï¼šå…³é—­æ·±åº¦å†™å…¥ï¼Œé¿å…é€æ˜é›ªèŠ±äº’ç›¸é®æŒ¡ï¼Œå…‰æ™•æ›´è¿è´¯</span>
  <span class="hljs-attr">blending</span>: <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">AdditiveBlending</span> <span class="hljs-comment">// ä¼˜åŒ–ï¼šå¯ç”¨åŠ æ³•æ··åˆï¼Œé›ªèŠ±é‡å å¤„äº®åº¦å åŠ ï¼Œæå‡å…‰æ™•è´¨æ„Ÿ</span>
});
</code></pre>
<h5 data-id="heading-16">4.2 å…³é”®è¯´æ˜</h5>
<ul>
<li><strong>å…¨å±€<code>uniform</code>å‚æ•°</strong>ï¼š<code>pointSize</code>ä¸<code>uColor</code>æ˜¯æ‰€æœ‰é›ªèŠ±å…±äº«çš„å…¨å±€å‚æ•°ï¼Œåç»­å¯é€šè¿‡ä¿®æ”¹<code>material.uniforms.xxx.value</code>å®ç°é›ªèŠ±å°ºå¯¸ä¸é¢œè‰²çš„åŠ¨æ€è°ƒæ•´ï¼ˆå¦‚éšæ—¶é—´å˜æµ…/å˜å¤§ï¼‰ã€‚</li>
<li><strong><code>transparent: true</code></strong>ï¼šå¯ç”¨é€æ˜é€šé“ï¼Œæ”¯æŒç‰‡å…ƒç€è‰²å™¨ä¸­çš„<code>alpha</code>å€¼ï¼Œå®ç°é›ªèŠ±è¾¹ç¼˜çš„æ¸éšæ•ˆæœâ€”â€”å¦‚æœå…³é—­è¯¥å‚æ•°ï¼Œé›ªèŠ±ä¼šå˜æˆä¸é€æ˜çš„ç™½è‰²æ–¹å—ï¼Œä¸¢å¤±å…‰æ™•è´¨æ„Ÿã€‚</li>
<li><strong><code>depthWrite: false</code></strong>ï¼šå…³é—­æ·±åº¦å†™å…¥ï¼Œå…è®¸é€æ˜é›ªèŠ±äº’ç›¸å åŠ ï¼Œé¿å…â€œåæ¸²æŸ“çš„é›ªèŠ±è¢«å…ˆæ¸²æŸ“çš„é›ªèŠ±é®æŒ¡â€çš„é—®é¢˜ï¼Œè®©é›ªèŠ±ç¾¤çš„å…‰æ™•æ›´è¿è´¯ï¼Œå°¤å…¶åœ¨é›ªèŠ±å¯†é›†åŒºåŸŸï¼Œè§†è§‰æ•ˆæœæ›´æŸ”å’Œã€‚</li>
<li><strong><code>AdditiveBlending</code>ï¼ˆåŠ æ³•æ··åˆï¼‰</strong>ï¼šé›ªèŠ±é‡å å¤„çš„äº®åº¦ä¼šå åŠ ï¼Œå½¢æˆæ›´æ˜äº®çš„ç™½è‰²å…‰æ™•ï¼Œæ¨¡æ‹Ÿæ¼«å¤©é›ªèŠ±é£˜è½çš„æœ¦èƒ§æ°›å›´â€”â€”å¦‚æœå…³é—­è¯¥å‚æ•°ï¼Œé›ªèŠ±é‡å åŒºåŸŸä¼šæ˜¾å¾—ç°æš—ï¼Œç¼ºä¹æ°›å›´æ„Ÿã€‚</li>
</ul>
<h4 data-id="heading-17">æ­¥éª¤5ï¼šæ„å»ºBufferGeometryï¼ˆé«˜æ•ˆå­˜å‚¨é›ªèŠ±åæ ‡æ•°æ®ï¼‰</h4>
<p>é€šè¿‡<code>Float32Array</code>ä¸<code>BufferGeometry</code>é«˜æ•ˆå­˜å‚¨é›ªèŠ±çš„3Dåæ ‡æ•°æ®ï¼Œå‡å°‘CPUä¸GPUä¹‹é—´çš„æ•°æ®ä¼ è¾“å¼€é”€ï¼Œæ”¯æ’‘1000çº§ç²’å­çš„æµç•…æ¸²æŸ“ã€‚</p>
<h5 data-id="heading-18">5.1 æ ¸å¿ƒä»£ç </h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 6. æ„å»ºç²’å­å‡ ä½•ä½“ï¼ˆBufferGeometryï¼šé«˜æ•ˆå­˜å‚¨å¤§é‡é¡¶ç‚¹æ•°æ®ï¼‰</span>
<span class="hljs-comment">// åˆ›å»ºæµ®ç‚¹å‹æ•°ç»„å­˜å‚¨é›ªèŠ±é¡¶ç‚¹åæ ‡ï¼ˆæ¯ä¸ªé›ªèŠ±3ä¸ªå€¼ï¼šx/y/zï¼Œå…±count*3ä¸ªå…ƒç´ ï¼‰</span>
<span class="hljs-keyword">const</span> positions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Float32Array</span>(count * <span class="hljs-number">3</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; count * <span class="hljs-number">3</span>; i += <span class="hljs-number">3</span>) {
  <span class="hljs-comment">// é›ªèŠ±åæ ‡èŒƒå›´ï¼š(-100, -100, -100) ~ (100, 100, 100)ï¼Œå‡åŒ€åˆ†å¸ƒåœ¨3Dç©ºé—´ä¸­</span>
  positions[i]     = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">200</span> - <span class="hljs-number">100</span>; <span class="hljs-comment">// xè½´åæ ‡ï¼šæ°´å¹³å·¦å³åˆ†å¸ƒ</span>
  positions[i + <span class="hljs-number">1</span>] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">200</span> - <span class="hljs-number">100</span>; <span class="hljs-comment">// yè½´åæ ‡ï¼šå‚ç›´ä¸Šä¸‹åˆ†å¸ƒï¼ˆç”¨äºä¸‹è½åŠ¨ç”»ï¼‰</span>
  positions[i + <span class="hljs-number">2</span>] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">200</span> - <span class="hljs-number">100</span>; <span class="hljs-comment">// zè½´åæ ‡ï¼šçºµæ·±å‰ååˆ†å¸ƒï¼Œæå‡3Dæ„Ÿ</span>
}

<span class="hljs-comment">// åˆå§‹åŒ–BufferGeometryï¼Œç»‘å®šé¡¶ç‚¹ä½ç½®æ•°æ®</span>
<span class="hljs-keyword">const</span> geometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BufferGeometry</span>();
<span class="hljs-comment">// Float32BufferAttribute(æ•°æ®æ•°ç»„, æ¯ä¸ªé¡¶ç‚¹çš„åˆ†é‡æ•°)ï¼šæ­¤å¤„3å¯¹åº”x/y/z</span>
geometry.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'position'</span>, <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Float32BufferAttribute</span>(positions, <span class="hljs-number">3</span>));

<span class="hljs-comment">// 7. æ„å»ºç²’å­å¯¹è±¡ï¼ˆTHREE.Pointsï¼šä¸“é—¨ç”¨äºæ¸²æŸ“ç‚¹ç²’å­ç³»ç»Ÿï¼‰</span>
<span class="hljs-keyword">const</span> mesh = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Points</span>(geometry, material);
scene.<span class="hljs-title function_">add</span>(mesh); <span class="hljs-comment">// å°†é›ªèŠ±ç¾¤æ·»åŠ åˆ°åœºæ™¯ä¸­</span>
</code></pre>
<h5 data-id="heading-19">5.2 å…³é”®æŠ€æœ¯ç‚¹è§£æ</h5>
<ul>
<li><strong><code>Float32Array</code>çš„é«˜æ•ˆæ€§</strong>ï¼šè¿™æ˜¯ä¸€ç§äºŒè¿›åˆ¶æµ®ç‚¹æ•°ç»„ï¼Œç›¸æ¯”æ™®é€šJSæ•°ç»„ï¼Œå ç”¨å†…å­˜æ›´å°‘ï¼ˆæ¯ä¸ªå…ƒç´ ä»…4å­—èŠ‚ï¼‰ã€ä¼ è¾“åˆ°GPUçš„é€Ÿåº¦æ›´å¿«ï¼Œä¸“é—¨ç”¨äºå­˜å‚¨å¤§é‡ç²’å­çš„åæ ‡æ•°æ®ï¼Œæ˜¯é«˜æ€§èƒ½ç²’å­ç³»ç»Ÿçš„å¿…å¤‡é€‰æ‹©ã€‚</li>
<li><strong><code>BufferGeometry</code>çš„ä¼˜åŠ¿</strong>ï¼šThree.jsæ¨èçš„é«˜æ€§èƒ½å‡ ä½•ä½“ï¼Œç›¸æ¯”å·²åºŸå¼ƒçš„<code>Geometry</code>ï¼Œå®ƒç›´æ¥å°†æ•°æ®å­˜å‚¨åœ¨GPUæ˜¾å­˜ä¸­ï¼Œå‡å°‘CPUä¸GPUä¹‹é—´çš„é¢‘ç¹æ•°æ®ä¼ è¾“ï¼Œèƒ½å¤Ÿè½»æ¾æ”¯æ’‘1000çº§ç”šè‡³ä¸‡çº§ç²’å­çš„æµç•…æ¸²æŸ“ã€‚</li>
<li><strong>é›ªèŠ±çš„3Dç©ºé—´åˆ†å¸ƒ</strong>ï¼šx/y/zä¸‰è½´å‡åœ¨<code>(-100, 100)</code>èŒƒå›´å†…éšæœºåˆ†å¸ƒï¼Œå½¢æˆç«‹ä½“çš„é›ªèŠ±ç¾¤â€”â€”zè½´çš„çºµæ·±åˆ†å¸ƒè®©é›ªèŠ±é£˜è½æ—¶å‘ˆç°â€œè¿‘å¿«è¿œæ…¢â€çš„é€è§†æ•ˆæœï¼Œæå‡3Dåœºæ™¯çš„çœŸå®æ„Ÿï¼Œé¿å…å¹³é¢åŒ–çš„é£˜è½æ•ˆæœã€‚</li>
<li><strong><code>THREE.Points</code></strong>ï¼šä¸“é—¨ç”¨äºæ¸²æŸ“ç‚¹ç²’å­ç³»ç»Ÿçš„å¯¹è±¡ï¼Œå°†<code>BufferGeometry</code>ï¼ˆåæ ‡æ•°æ®ï¼‰ä¸<code>ShaderMaterial</code>ï¼ˆè§†è§‰æ•ˆæœï¼‰ç»“åˆï¼Œç”Ÿæˆæœ€ç»ˆçš„é›ªèŠ±ç¾¤ï¼Œç›¸æ¯”<code>Mesh</code>å¯¹è±¡ï¼Œå®ƒçš„æ¸²æŸ“å¼€é”€æ›´ä½ï¼Œæ›´é€‚åˆå¤§é‡ç²’å­åœºæ™¯ã€‚</li>
</ul>
<h4 data-id="heading-20">æ­¥éª¤6ï¼šé›ªèŠ±åŠ¨æ€æ›´æ–°å‡½æ•°ï¼ˆå®ç°è‡ªç„¶é£˜è½ä¸å¾ªç¯åŠ¨ç”»ï¼‰</h4>
<p>ç¼–å†™ç²’å­æ›´æ–°é€»è¾‘ï¼Œå®ç°é›ªèŠ±çš„å‚ç›´ä¸‹è½ã€æ°´å¹³éšæœºåç§»ï¼Œä»¥åŠè¶…å‡ºè¾¹ç•Œåçš„é‡ç½®ï¼Œæ‰“é€ æ— é™å¾ªç¯çš„è‡ªç„¶é£˜è½æ•ˆæœï¼Œé¿å…é›ªèŠ±æ¶ˆå¤±ååœºæ™¯ç©ºæ´ã€‚</p>
<h5 data-id="heading-21">6.1 æ ¸å¿ƒä»£ç </h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 8. ç²’å­åŠ¨æ€æ›´æ–°å‡½æ•°ï¼ˆå®ç°ä¸‹è½+åç§»åŠ¨ç”»ï¼Œé‡ç½®è¶…å‡ºè¾¹ç•Œçš„é›ªèŠ±ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">time</span>) {
  <span class="hljs-keyword">if</span> (!material || !mesh) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// å®‰å…¨åˆ¤æ–­ï¼šé¿å…å¯¹è±¡æœªåˆå§‹åŒ–æŠ¥é”™</span>
  
  <span class="hljs-comment">// è·å–é›ªèŠ±é¡¶ç‚¹ä½ç½®æ•°ç»„ï¼ˆgeometry.getAttributeè¿”å›çš„æ˜¯å±æ€§å¯¹è±¡ï¼Œ.arrayè·å–åŸå§‹æ•°æ®ï¼‰</span>
  <span class="hljs-keyword">const</span> positions = mesh.<span class="hljs-property">geometry</span>.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">"position"</span>).<span class="hljs-property">array</span>;
  
  <span class="hljs-comment">// éå†æ‰€æœ‰é›ªèŠ±ï¼Œæ›´æ–°åæ ‡ï¼ˆæ¯3ä¸ªå…ƒç´ å¯¹åº”ä¸€ä¸ªé›ªèŠ±çš„x/y/zï¼‰</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; positions.<span class="hljs-property">length</span>; i += <span class="hljs-number">3</span>) {
    <span class="hljs-comment">// æ­¥éª¤1ï¼šå‚ç›´ä¸‹è½ï¼ˆyè½´é€’å‡ï¼Œé€Ÿåº¦0.2ï¼‰ï¼šæ¨¡æ‹Ÿé›ªèŠ±çš„é‡åŠ›ä¸‹è½</span>
    positions[i + <span class="hljs-number">1</span>] -= <span class="hljs-number">0.2</span>;
    
    <span class="hljs-comment">// æ­¥éª¤2ï¼šæ°´å¹³è½»å¾®åç§»ï¼ˆç»“åˆæ—¶é—´å‚æ•°ï¼Œè®©åç§»éšæ—¶é—´å˜åŒ–ï¼Œè¿åŠ¨æ›´è‡ªç„¶ï¼‰</span>
    <span class="hljs-comment">// åŸå§‹ä»£ç Math.sin(i)æ˜¯å›ºå®šå€¼ï¼Œä¼˜åŒ–ä¸ºMath.sin(i + time)ï¼Œå®ç°åŠ¨æ€å·¦å³/å‰ååç§»</span>
    positions[i]     -= <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(i + time) * <span class="hljs-number">0.1</span>;   <span class="hljs-comment">// xè½´åç§»ï¼šå·¦å³æ™ƒåŠ¨</span>
    positions[i + <span class="hljs-number">2</span>] -= <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(i + time * <span class="hljs-number">0.8</span>) * <span class="hljs-number">0.1</span>; <span class="hljs-comment">// zè½´åç§»ï¼šå‰åæ™ƒåŠ¨ï¼Œé¿å…åç§»åŒæ­¥</span>
    
    <span class="hljs-comment">// æ­¥éª¤3ï¼šé‡ç½®è¶…å‡ºä¸‹è¾¹ç•Œçš„é›ªèŠ±ï¼ˆy &lt; -100æ—¶ï¼Œé‡ç½®åˆ°é¡¶éƒ¨100ï¼Œå®ç°å¾ªç¯ä¸‹è½ï¼‰</span>
    <span class="hljs-keyword">if</span> (positions[i + <span class="hljs-number">1</span>] &lt; -<span class="hljs-number">100</span>) {
      positions[i + <span class="hljs-number">1</span>] = <span class="hljs-number">100</span>;
      <span class="hljs-comment">// é‡ç½®æ—¶åŒæ­¥æ›´æ–°x/zåæ ‡ï¼Œé¿å…é›ªèŠ±é‡ç½®åä½ç½®å•ä¸€ï¼Œæå‡è‡ªç„¶æ„Ÿ</span>
      positions[i]     = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">200</span> - <span class="hljs-number">100</span>;
      positions[i + <span class="hljs-number">2</span>] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">200</span> - <span class="hljs-number">100</span>;
    }
  }
  
  <span class="hljs-comment">// å…³é”®ï¼šæ ‡è®°ä½ç½®å±æ€§éœ€è¦æ›´æ–°ï¼Œå‘Šè¯‰Three.jsé‡æ–°ä¸Šä¼ æ•°æ®åˆ°GPU</span>
  mesh.<span class="hljs-property">geometry</span>.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">"position"</span>).<span class="hljs-property">needsUpdate</span> = <span class="hljs-literal">true</span>;
}
</code></pre>
<h5 data-id="heading-22">6.2 å…³é”®æŠ€æœ¯ç‚¹è§£æ</h5>
<ol>
<li>
<p><strong>è‡ªç„¶é£˜è½çš„åŒåŠ¨æ•ˆé€»è¾‘</strong>ï¼š</p>
<ul>
<li><strong>å‚ç›´ä¸‹è½</strong>ï¼š<code>positions[i + 1] -= 0.2</code>ï¼ˆyè½´é€’å‡ï¼‰ï¼Œæ¨¡æ‹Ÿé›ªèŠ±å—é‡åŠ›ä¸‹è½çš„æ•ˆæœï¼Œ0.2çš„é€Ÿåº¦å…¼é¡¾æµç•…åº¦ä¸è§†è§‰èˆ’é€‚åº¦â€”â€”é€Ÿåº¦è¿‡å¿«ä¼šæ˜¾å¾—æ‚ä¹±ï¼Œè¿‡æ…¢ä¼šç¼ºä¹åŠ¨æ„Ÿã€‚</li>
<li><strong>æ°´å¹³/çºµæ·±åç§»</strong>ï¼šé€šè¿‡<code>Math.sin(i + time)</code>å®ç°åŠ¨æ€åç§»ï¼Œ<code>i</code>ä¿è¯æ¯ä¸ªé›ªèŠ±çš„åç§»ç›¸ä½ä¸åŒï¼Œ<code>time</code>ä¿è¯åç§»éšæ—¶é—´å˜åŒ–ï¼Œ<code>0.8</code>çš„æ—¶é—´ç³»æ•°è®©zè½´åç§»ä¸xè½´ä¸åŒæ­¥ï¼Œé¿å…é›ªèŠ±â€œæ•´é½åˆ’ä¸€â€çš„æ™ƒåŠ¨ï¼Œè¿˜åŸçœŸå®é›ªèŠ±çš„æ— è§„åˆ™é£˜è½è½¨è¿¹ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¾ªç¯åŠ¨ç”»çš„æ ¸å¿ƒé€»è¾‘</strong>ï¼š</p>
<ul>
<li>è¾¹ç•Œåˆ¤æ–­ï¼š<code>positions[i + 1] &lt; -100</code>ï¼Œå½“é›ªèŠ±ä¸‹è½è‡³ä¸‹è¾¹ç•Œä»¥ä¸‹æ—¶ï¼Œè§¦å‘é‡ç½®é€»è¾‘ã€‚</li>
<li>é¡¶éƒ¨é‡ç½®ï¼šå°†é›ªèŠ±çš„yè½´åæ ‡é‡ç½®ä¸º100ï¼ˆé¡¶éƒ¨ï¼‰ï¼ŒåŒæ—¶é‡æ–°éšæœºç”Ÿæˆx/zè½´åæ ‡ï¼Œé¿å…é›ªèŠ±åœ¨åŒä¸€ä½ç½®é‡å¤å‡ºç°ï¼Œæå‡é£˜è½æ•ˆæœçš„è‡ªç„¶æ„Ÿã€‚</li>
<li><code>needsUpdate = true</code>ï¼šè¿™æ˜¯åŠ¨æ€æ›´æ–°ç²’å­åæ ‡çš„å…³é”®â€”â€”ä¿®æ”¹<code>positions</code>æ•°ç»„åï¼Œå¿…é¡»æ ‡è®°ä½ç½®å±æ€§éœ€è¦æ›´æ–°ï¼Œå¦åˆ™Three.jsä¸ä¼šå°†æ–°æ•°æ®ä¸Šä¼ åˆ°GPUï¼Œé›ªèŠ±å°†æ— æ³•å®ç°ä¸‹è½ä¸é‡ç½®åŠ¨ç”»ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-23">æ­¥éª¤7ï¼šåŠ¨ç”»å¾ªç¯ä¸çª—å£é€‚é…ï¼ˆé©±åŠ¨åŠ¨ç”»ï¼Œé€‚é…ä¸åŒå±å¹•ï¼‰</h4>
<p>é€šè¿‡<code>requestAnimationFrame</code>é©±åŠ¨åŠ¨ç”»å¾ªç¯ï¼Œæ›´æ–°é›ªèŠ±ä½ç½®ä¸æ§åˆ¶å™¨é˜»å°¼ï¼ŒåŒæ—¶å®ç°çª—å£å“åº”å¼é€‚é…ï¼Œä¿è¯é›ªèŠ±æ•ˆæœåœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸‹æ­£å¸¸æ˜¾ç¤ºã€‚</p>
<h5 data-id="heading-24">7.1 æ ¸å¿ƒä»£ç </h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 9. åŠ¨ç”»å¾ªç¯ï¼ˆé©±åŠ¨ç²’å­åŠ¨ç”»ï¼Œå®ç°æµç•…æ¸²æŸ“ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">requestAnimationFrame</span>(animate); <span class="hljs-comment">// ç»‘å®šæµè§ˆå™¨åˆ·æ–°ç‡ï¼ˆ60å¸§/ç§’ï¼‰ï¼Œé¿å…å¡é¡¿</span>
  <span class="hljs-keyword">const</span> time = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() * <span class="hljs-number">0.0005</span>; <span class="hljs-comment">// è·å–å½“å‰æ—¶é—´ï¼ˆç¼©æ”¾ç³»æ•°0.0005ï¼Œè®©åŠ¨ç”»é€Ÿåº¦é€‚ä¸­ï¼‰</span>
  
  <span class="hljs-title function_">update</span>(time); <span class="hljs-comment">// è°ƒç”¨é›ªèŠ±æ›´æ–°å‡½æ•°ï¼Œä¼ é€’æ—¶é—´å‚æ•°</span>
  controls.<span class="hljs-title function_">update</span>(); <span class="hljs-comment">// æ›´æ–°è½¨é“æ§åˆ¶å™¨é˜»å°¼ï¼ˆå¿…é¡»åœ¨åŠ¨ç”»å¾ªç¯ä¸­è°ƒç”¨ï¼‰</span>
  renderer.<span class="hljs-title function_">render</span>(scene, camera); <span class="hljs-comment">// æ¸²æŸ“åœºæ™¯ï¼ˆå°†3Dé›ªèŠ±ç¾¤è½¬æ¢ä¸º2Dç”»å¸ƒæ˜¾ç¤ºï¼‰</span>
}

<span class="hljs-comment">// å¯åŠ¨åŠ¨ç”»å¾ªç¯</span>
<span class="hljs-title function_">animate</span>();

<span class="hljs-comment">// 10. çª—å£å“åº”å¼é€‚é…ï¼ˆé€‚é…ä¸åŒå±å¹•å°ºå¯¸ï¼Œé¿å…é›ªèŠ±æ‹‰ä¼¸å˜å½¢ï¼‰</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-function">() =&gt;</span> {
  camera.<span class="hljs-property">aspect</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> / <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>; <span class="hljs-comment">// æ›´æ–°ç›¸æœºå®½é«˜æ¯”</span>
  camera.<span class="hljs-title function_">updateProjectionMatrix</span>(); <span class="hljs-comment">// å…³é”®ï¼šæ›´æ–°ç›¸æœºæŠ•å½±çŸ©é˜µï¼Œè®©å®½é«˜æ¯”ä¿®æ”¹ç”Ÿæ•ˆ</span>
  renderer.<span class="hljs-title function_">setSize</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>); <span class="hljs-comment">// æ›´æ–°æ¸²æŸ“å™¨å°ºå¯¸</span>
});
</code></pre>
<h5 data-id="heading-25">7.2 å…³é”®è¯´æ˜</h5>
<ul>
<li><strong><code>requestAnimationFrame</code></strong>ï¼šç»‘å®šæµè§ˆå™¨çš„åˆ·æ–°ç‡ï¼ˆé€šå¸¸ä¸º60å¸§/ç§’ï¼‰ï¼Œç›¸æ¯”<code>setInterval</code>ï¼Œå®ƒèƒ½é¿å…åŠ¨ç”»å¡é¡¿ä¸æ‰å¸§ï¼Œä¿è¯é›ªèŠ±é£˜è½æ•ˆæœçš„æµç•…æ€§ï¼ŒåŒæ—¶èŠ‚çœCPUä¸GPUèµ„æºã€‚</li>
<li><strong>æ—¶é—´ç¼©æ”¾ç³»æ•°<code>0.0005</code></strong>ï¼š<code>Date.now()</code>è¿”å›çš„æ˜¯æ¯«ç§’çº§æ—¶é—´æˆ³ï¼Œç›´æ¥ä½¿ç”¨ä¼šå¯¼è‡´åŠ¨ç”»é€Ÿåº¦è¿‡å¿«ï¼Œé€šè¿‡<code>* 0.0005</code>å°†æ—¶é—´ç¼©æ”¾ä¸ºç§’çº§ä¸”æ”¾ç¼“é€Ÿåº¦ï¼Œè®©é›ªèŠ±çš„åç§»ä¸ä¸‹è½æ›´è‡ªç„¶ã€‚</li>
<li><strong><code>camera.updateProjectionMatrix()</code></strong>ï¼šçª—å£å°ºå¯¸å˜åŒ–æ—¶ï¼Œç›¸æœºçš„å®½é«˜æ¯”ä¼šä¿®æ”¹ï¼Œå¿…é¡»è°ƒç”¨è¯¥æ–¹æ³•æ›´æ–°æŠ•å½±çŸ©é˜µï¼Œå¦åˆ™é›ªèŠ±ç¾¤ä¼šå‡ºç°æ‹‰ä¼¸å˜å½¢ï¼Œç ´å3Dè§†è§‰æ•ˆæœã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-26">æ ¸å¿ƒæŠ€æœ¯æ·±åº¦è§£æ</h3>
<h4 data-id="heading-27">1.  é›ªèŠ±è§†è§‰æ•ˆæœçš„æ ¸å¿ƒå®ç°ï¼ˆç€è‰²å™¨é€»è¾‘ï¼‰</h4>
<p>é›ªèŠ±çš„æŸ”å’Œå…‰æ™•ä¸åœ†å½¢å½¢æ€æ˜¯é€šè¿‡ç‰‡å…ƒç€è‰²å™¨çš„å››å±‚é€»è¾‘å®ç°çš„ï¼Œæ¯å±‚é€»è¾‘ç¯ç¯ç›¸æ‰£ï¼Œæœ€ç»ˆè¿˜åŸçœŸå®é›ªèŠ±çš„è§†è§‰ç‰¹å¾ï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[è·å–ç²’å­å†…UVåæ ‡ gl_PointCoord] --&gt; B[è®¡ç®—åˆ°ä¸­å¿ƒçš„è·ç¦» distanceToCenter]
    B --&gt; C[smoothstepå®ç°è¾¹ç¼˜æ¸éš alpha]
    C --&gt; D[powæ”¾å¤§äº®åº¦å·®å¼‚ brightness]
    D --&gt; E[ç»„åˆé¢œè‰²ä¸é€æ˜åº¦ gl_FragColor]
</code></pre>
<ul>
<li>æ ¸å¿ƒäº®ç‚¹ï¼šé€šè¿‡<strong>åƒç´ çº§è®¡ç®—</strong>å®ç°è§†è§‰æ•ˆæœï¼Œè¿è¡Œåœ¨GPUä¸Šï¼Œå…·å¤‡å¹¶è¡Œå¤„ç†èƒ½åŠ›ï¼Œå³ä½¿1000çº§é›ªèŠ±ï¼Œä¹Ÿèƒ½ä¿æŒ60å¸§æµç•…æ¸²æŸ“ï¼Œè¿™æ˜¯æ™®é€šJSé€»è¾‘æ— æ³•å®ç°çš„ã€‚</li>
<li>å…³é”®ä¼˜åŒ–ï¼š<code>AdditiveBlending</code>åŠ æ³•æ··åˆè®©é›ªèŠ±é‡å å¤„äº®åº¦å åŠ ï¼Œå½¢æˆæœ¦èƒ§çš„å…‰æ™•æ°›å›´ï¼Œæ¨¡æ‹Ÿæ¼«å¤©é£é›ªçš„è§†è§‰æ•ˆæœï¼ŒåŒæ—¶<code>depthWrite: false</code>é¿å…é€æ˜ç²’å­äº’ç›¸é®æŒ¡ï¼Œä¿è¯å…‰æ™•çš„è¿è´¯æ€§ã€‚</li>
</ul>
<h4 data-id="heading-28">2.  é›ªèŠ±é£˜è½åŠ¨ç”»çš„å¾ªç¯é€»è¾‘ï¼ˆCPUç«¯åŠ¨æ€æ›´æ–°ï¼‰</h4>
<p>é›ªèŠ±çš„æ— é™å¾ªç¯é£˜è½æ˜¯é€šè¿‡â€œä¸‹è½-åˆ¤æ–­-é‡ç½®â€çš„é—­ç¯é€»è¾‘å®ç°çš„ï¼Œæ ¸å¿ƒè¦ç‚¹å¦‚ä¸‹ï¼š</p>









































<table><thead><tr><th>æ­¥éª¤</th><th>é€»è¾‘</th><th>å…³é”®ä»£ç </th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>1</td><td>å‚ç›´ä¸‹è½</td><td><code>positions[i + 1] -= 0.2</code></td><td>æ¨¡æ‹Ÿé‡åŠ›ä¸‹è½ï¼Œå®ç°é›ªèŠ±çš„åŸºç¡€è¿åŠ¨è½¨è¿¹</td></tr><tr><td>2</td><td>åŠ¨æ€åç§»</td><td><code>positions[i] -= Math.sin(i + time) * 0.1</code></td><td>å®ç°æ— è§„åˆ™æ°´å¹³/çºµæ·±æ™ƒåŠ¨ï¼Œæå‡è‡ªç„¶æ„Ÿ</td></tr><tr><td>3</td><td>è¾¹ç•Œåˆ¤æ–­</td><td><code>if (positions[i + 1] &lt; -100)</code></td><td>æ£€æµ‹é›ªèŠ±æ˜¯å¦è¶…å‡ºä¸‹è¾¹ç•Œï¼Œè§¦å‘é‡ç½®é€»è¾‘</td></tr><tr><td>4</td><td>é¡¶éƒ¨é‡ç½®</td><td><code>positions[i + 1] = 100</code></td><td>å°†é›ªèŠ±é‡ç½®åˆ°é¡¶éƒ¨ï¼Œå®ç°æ— é™å¾ªç¯</td></tr><tr><td>5</td><td>æ•°æ®æ›´æ–°</td><td><code>needsUpdate = true</code></td><td>é€šçŸ¥Three.jsä¸Šä¼ æ–°æ•°æ®åˆ°GPUï¼ŒåŠ¨ç”»ç”Ÿæ•ˆ</td></tr></tbody></table>
<h4 data-id="heading-29">3.  <code>BufferGeometry</code>ä¸<code>ShaderMaterial</code>çš„æ€§èƒ½ä¼˜åŠ¿</h4>
<p>æœ¬ä»£ç èƒ½å¤Ÿé«˜æ•ˆæ”¯æ’‘1000çº§ç²’å­æ¸²æŸ“ï¼Œæ ¸å¿ƒåœ¨äº<code>BufferGeometry</code>ä¸<code>ShaderMaterial</code>çš„ç»„åˆï¼Œå…¶æ€§èƒ½ä¼˜åŠ¿ä¸»è¦ä½“ç°åœ¨ï¼š</p>
<ol>
<li><strong>æ•°æ®é«˜æ•ˆå­˜å‚¨</strong>ï¼š<code>BufferGeometry</code>ä½¿ç”¨äºŒè¿›åˆ¶æ•°ç»„å­˜å‚¨ç²’å­æ•°æ®ï¼Œä¸€æ¬¡æ€§ä¸Šä¼ åˆ°GPUæ˜¾å­˜ï¼Œåç»­ä»…éœ€æ›´æ–°å°‘é‡æ•°æ®ï¼ˆå¦‚ä½ç½®å±æ€§ï¼‰ï¼Œå‡å°‘CPUä¸GPUä¹‹é—´çš„é¢‘ç¹æ•°æ®ä¼ è¾“ã€‚</li>
<li><strong>GPUå¹¶è¡Œå¤„ç†</strong>ï¼šç€è‰²å™¨é€»è¾‘è¿è¡Œåœ¨GPUä¸Šï¼Œå…·å¤‡å¼ºå¤§çš„å¹¶è¡Œå¤„ç†èƒ½åŠ›ï¼Œå¯åŒæ—¶å¤„ç†ä¸Šåƒä¸ªé›ªèŠ±çš„è§†è§‰æ¸²æŸ“ï¼Œæ€§èƒ½è¿œè¶…æ™®é€šJSé©±åŠ¨çš„ç²’å­ç³»ç»Ÿã€‚</li>
<li><strong>ä½æ¸²æŸ“å¼€é”€</strong>ï¼š<code>THREE.Points</code>å¯¹è±¡çš„æ¸²æŸ“å¼€é”€è¿œä½äº<code>Mesh</code>å¯¹è±¡ï¼Œé…åˆ<code>ShaderMaterial</code>çš„è‡ªå®šä¹‰è§†è§‰é€»è¾‘ï¼Œæ— éœ€é¢å¤–çš„å‡ ä½•ä½“ä¸çº¹ç†èµ„æºï¼Œè¿›ä¸€æ­¥æå‡æ¸²æŸ“æ•ˆç‡ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-30">æ ¸å¿ƒå‚æ•°é€ŸæŸ¥è¡¨ï¼ˆå¿«é€Ÿè°ƒæ•´é›ªèŠ±æ•ˆæœï¼‰</h3>





























































<table><thead><tr><th>å‚æ•°åˆ†ç±»</th><th>å‚æ•°å</th><th>å½“å‰å–å€¼</th><th>æ ¸å¿ƒä½œç”¨</th><th>ä¿®æ”¹å»ºè®®</th></tr></thead><tbody><tr><td>é›ªèŠ±åŸºç¡€é…ç½®</td><td><code>count</code></td><td>1000</td><td>é›ªèŠ±æ€»æ•°ï¼Œå†³å®šé£˜è½æ•ˆæœçš„æµ“å¯†æ„Ÿ</td><td>æ”¹ä¸º500ï¼šé›ªèŠ±æ›´ç¨€ç–ï¼Œä½é…è®¾å¤‡æ›´æµç•…ï¼›æ”¹ä¸º2000ï¼šé›ªèŠ±æ›´æµ“å¯†ï¼Œæ°›å›´æ„Ÿæ›´å¼ºï¼ˆéœ€æ³¨æ„æ€§èƒ½ï¼‰</td></tr><tr><td>é›ªèŠ±è§†è§‰é…ç½®</td><td><code>pointSize</code></td><td>10.0</td><td>é›ªèŠ±å±å¹•å°ºå¯¸ï¼Œå†³å®šå•æœµé›ªèŠ±çš„å¤§å°</td><td>æ”¹ä¸º5.0ï¼šé›ªèŠ±æ›´å°æ›´ç»†è…»ï¼Œæ¨¡æ‹Ÿç»†é›ªï¼›æ”¹ä¸º20.0ï¼šé›ªèŠ±æ›´å¤§æ›´é†’ç›®ï¼Œæ¨¡æ‹Ÿé¹…æ¯›å¤§é›ª</td></tr><tr><td>é›ªèŠ±è§†è§‰é…ç½®</td><td><code>uColor</code></td><td><code>new THREE.Color(0xffffff)</code></td><td>é›ªèŠ±åŸºç¡€é¢œè‰²ï¼Œå†³å®šé›ªèŠ±çš„æ•´ä½“è‰²è°ƒ</td><td>æ”¹ä¸º<code>0xf0f8ff</code>ï¼ˆæ·¡è“è‰²ï¼‰ï¼šæ¨¡æ‹Ÿå¯’å†¬å†·é›ªï¼›æ”¹ä¸º<code>0xfffff0</code>ï¼ˆç±³ç™½è‰²ï¼‰ï¼šæ¨¡æ‹Ÿæš–å…‰ä¸‹çš„é›ªèŠ±</td></tr><tr><td>é›ªèŠ±åŠ¨ç”»é…ç½®</td><td>ä¸‹è½é€Ÿåº¦ <code>positions[i + 1] -= 0.2</code></td><td>0.2</td><td>é›ªèŠ±å‚ç›´ä¸‹è½çš„é€Ÿåº¦ï¼Œå†³å®šåŠ¨ç”»èŠ‚å¥</td><td>æ”¹ä¸º0.1ï¼šä¸‹è½æ›´æ…¢ï¼ŒèŠ‚å¥æ›´èˆ’ç¼“ï¼›æ”¹ä¸º0.5ï¼šä¸‹è½æ›´å¿«ï¼ŒåŠ¨æ€æ„Ÿæ›´å¼º</td></tr><tr><td>é›ªèŠ±åŠ¨ç”»é…ç½®</td><td>åç§»å¹…åº¦ <code>* 0.1</code></td><td>0.1</td><td>é›ªèŠ±æ°´å¹³/çºµæ·±åç§»çš„å¹…åº¦ï¼Œå†³å®šæ™ƒåŠ¨ç¨‹åº¦</td><td>æ”¹ä¸º0.05ï¼šåç§»æ›´å°ï¼Œé£˜è½æ›´å¹³ç¨³ï¼›æ”¹ä¸º0.2ï¼šåç§»æ›´å¤§ï¼Œé£˜è½æ›´æ‚ä¹±ï¼Œæ¨¡æ‹Ÿå¤§é£å¤©æ°”</td></tr><tr><td>åŠ¨ç”»é…ç½®</td><td>æ—¶é—´ç¼©æ”¾ç³»æ•° <code>* 0.0005</code></td><td>0.0005</td><td>åŠ¨ç”»çš„æ•´ä½“é€Ÿåº¦ç³»æ•°ï¼Œå†³å®šåç§»çš„å¿«æ…¢</td><td>æ”¹ä¸º0.0003ï¼šåç§»æ›´æ…¢ï¼Œæ›´è‡ªç„¶ï¼›æ”¹ä¸º0.001ï¼šåç§»æ›´å¿«ï¼Œæ›´åŠ¨æ„Ÿ</td></tr><tr><td>ç›¸æœºé…ç½®</td><td><code>camera.position.set(0, 0, 200)</code></td><td>200ï¼ˆzè½´è·ç¦»ï¼‰</td><td>ç›¸æœºä¸é›ªèŠ±ç¾¤çš„è·ç¦»ï¼Œå†³å®šè§‚å¯Ÿè§†è§’</td><td>æ”¹ä¸º150ï¼šç›¸æœºæ›´è¿‘ï¼Œé›ªèŠ±æ›´å¤§ï¼›æ”¹ä¸º300ï¼šç›¸æœºæ›´è¿œï¼Œå¯è§‚å¯Ÿé›ªèŠ±ç¾¤çš„æ•´ä½“é£˜è½æ€åŠ¿</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-31">å®Œæ•´ä»£ç </h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>é›ªèŠ± - Three.js<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-tag">body</span> { <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">overflow</span>: hidden; <span class="hljs-attribute">background</span>: <span class="hljs-number">#000</span>; }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="javascript">
  <span class="hljs-comment">// 1. å¯¼å…¥æ ¸å¿ƒåº“ä¸è½¨é“æ§åˆ¶å™¨</span>
  <span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'https://esm.sh/three@0.174.0'</span>;
  <span class="hljs-keyword">import</span> { <span class="hljs-title class_">OrbitControls</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'https://esm.sh/three@0.174.0/examples/jsm/controls/OrbitControls.js'</span>;

  <span class="hljs-comment">// 2. åŸºç¡€ç¯å¢ƒåˆå§‹åŒ–ï¼ˆåœºæ™¯/ç›¸æœº/æ¸²æŸ“å™¨ï¼‰</span>
  <span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>();

  <span class="hljs-comment">// é€è§†ç›¸æœºï¼šé…ç½®åˆç†å‚æ•°ï¼Œç¡®ä¿èƒ½å®Œæ•´è§‚å¯Ÿç²’å­ç¾¤</span>
  <span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(
    <span class="hljs-number">40</span>,                     <span class="hljs-comment">// è§†è§’ï¼ˆFOVï¼‰ï¼š40Â°è§†é‡é€‚ä¸­ï¼Œæ— ç²’å­å˜å½¢</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> / <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>, <span class="hljs-comment">// å®½é«˜æ¯”ï¼šé€‚é…æµè§ˆå™¨çª—å£</span>
    <span class="hljs-number">1</span>,                      <span class="hljs-comment">// è¿‘è£åˆ‡é¢ï¼šè¿‡æ»¤è¿‡è¿‘æ— æ•ˆå¯¹è±¡</span>
    <span class="hljs-number">10000</span>                   <span class="hljs-comment">// è¿œè£åˆ‡é¢ï¼šä¿è¯ç²’å­ç¾¤å®Œæ•´å¤„äºå¯è§èŒƒå›´</span>
  );
  <span class="hljs-comment">// ä¿®å¤ï¼šè®¾ç½®ç›¸æœºåˆå§‹ä½ç½®ï¼ˆåŸå§‹ä»£ç ç¼ºå¤±ï¼Œå¯¼è‡´æ— æ³•çœ‹åˆ°ç²’å­ï¼‰</span>
  camera.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">200</span>);

  <span class="hljs-comment">// æ¸²æŸ“å™¨ï¼šå¼€å¯æŠ—é”¯é½¿ï¼Œæå‡ç²’å­è¾¹ç¼˜ç»†è…»åº¦</span>
  <span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>({ <span class="hljs-attr">antialias</span>: <span class="hljs-literal">true</span> });
  renderer.<span class="hljs-title function_">setSize</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>);
  renderer.<span class="hljs-title function_">setPixelRatio</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">devicePixelRatio</span>); <span class="hljs-comment">// é«˜æ¸…é€‚é…Retinaå±å¹•</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(renderer.<span class="hljs-property">domElement</span>);

  <span class="hljs-comment">// 3. ç²’å­ç³»ç»Ÿæ ¸å¿ƒé…ç½®</span>
  <span class="hljs-keyword">const</span> count = <span class="hljs-number">1000</span>; <span class="hljs-comment">// ç²’å­æ€»æ•°</span>

  <span class="hljs-comment">// 4. è‡ªå®šä¹‰ç€è‰²å™¨ï¼ˆé¡¶ç‚¹ç€è‰²å™¨ + ç‰‡å…ƒç€è‰²å™¨ï¼‰</span>
  <span class="hljs-comment">// é¡¶ç‚¹ç€è‰²å™¨ï¼šå¤„ç†ç²’å­ä½ç½®ã€å°ºå¯¸ï¼Œå®Œæˆ3Dâ†’2Dé€è§†å˜æ¢</span>
  <span class="hljs-keyword">const</span> vertexShader = <span class="hljs-string">`
    uniform float pointSize; // å…¨å±€ç»Ÿä¸€ç²’å­å°ºå¯¸ï¼ˆuniformï¼šæ‰€æœ‰ç²’å­å…±äº«ï¼‰
    void main() {
      // æ ¸å¿ƒï¼šé€è§†å˜æ¢é“¾ï¼Œå°†ç²’å­å±€éƒ¨åæ ‡è½¬æ¢ä¸ºå±å¹•è£å‰ªåæ ‡
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
      gl_PointSize = pointSize; // ä¸ºæ¯ä¸ªç²’å­è®¾ç½®å±å¹•å°ºå¯¸
    }
  `</span>;

  <span class="hljs-comment">// ç‰‡å…ƒç€è‰²å™¨ï¼šå¤„ç†ç²’å­åƒç´ çº§è§†è§‰æ•ˆæœï¼ˆå½¢çŠ¶ã€é¢œè‰²ã€é€æ˜åº¦ã€äº®åº¦ï¼‰</span>
  <span class="hljs-keyword">const</span> fragmentShader = <span class="hljs-string">`
    uniform vec3 uColor; // å…¨å±€ç»Ÿä¸€ç²’å­é¢œè‰²ï¼ˆuniformï¼šæ‰€æœ‰ç²’å­å…±äº«ï¼‰
    void main() {
      // æ­¥éª¤1ï¼šè®¡ç®—å½“å‰åƒç´ åˆ°ç²’å­ä¸­å¿ƒçš„è·ç¦»ï¼ˆgl_PointCoordï¼šç²’å­å†…UVåæ ‡ï¼ŒèŒƒå›´(0,0)~(1,1)ï¼‰
      float distanceToCenter = distance(gl_PointCoord, vec2(0.5));
      
      // æ­¥éª¤2ï¼šè¾¹ç¼˜æ¸éšæŠ—é”¯é½¿ï¼Œé¿å…ç²’å­è¾¹ç¼˜ç”Ÿç¡¬é”¯é½¿
      // smoothstep(0.4, 0.5, d)ï¼šd&lt;0.4è¿”å›0ï¼Œd&gt;0.5è¿”å›1ï¼Œä¸­é—´å¹³æ»‘æ’å€¼
      float alpha = 1.0 - smoothstep(0.4, 0.5, distanceToCenter);
      
      // æ­¥éª¤3ï¼šå¢å¼ºä¸­å¿ƒäº®åº¦ï¼Œå®ç°â€œä¸­å¿ƒäº®ã€è¾¹ç¼˜æš—â€çš„å…‰æ™•æ•ˆæœ
      // pow(æŒ‡æ•°5.0)ï¼šæ”¾å¤§äº®åº¦å·®å¼‚ï¼Œè®©ä¸­å¿ƒæ›´äº®ï¼Œå…‰æ™•æ›´æœ‰å±‚æ¬¡æ„Ÿ
      float brightness = pow(1.0 - distanceToCenter, 5.0);
      
      // æ­¥éª¤4ï¼šè®¾ç½®æœ€ç»ˆåƒç´ é¢œè‰²ï¼ˆåŸºç¡€è‰²*äº®åº¦ + æ¸éšé€æ˜åº¦ï¼‰
      gl_FragColor = vec4(uColor * brightness, alpha);
    }
  `</span>;

  <span class="hljs-comment">// 5. æ„å»ºç€è‰²å™¨æè´¨ï¼ˆè¿æ¥ä¸¤ä¸ªç€è‰²å™¨ï¼Œé…ç½®å‚æ•°ä¸æ¸²æŸ“æ¨¡å¼ï¼‰</span>
  <span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">ShaderMaterial</span>({
    <span class="hljs-attr">vertexShader</span>: vertexShader,   <span class="hljs-comment">// ç»‘å®šé¡¶ç‚¹ç€è‰²å™¨</span>
    <span class="hljs-attr">fragmentShader</span>: fragmentShader, <span class="hljs-comment">// ç»‘å®šç‰‡å…ƒç€è‰²å™¨</span>
    <span class="hljs-attr">uniforms</span>: {                    <span class="hljs-comment">// å‘ç€è‰²å™¨ä¼ é€’çš„å…¨å±€ç»Ÿä¸€å‚æ•°</span>
      <span class="hljs-attr">pointSize</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">10.0</span> },  <span class="hljs-comment">// ç²’å­å±å¹•å°ºå¯¸</span>
      <span class="hljs-attr">uColor</span>: { <span class="hljs-attr">value</span>: <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Color</span>(<span class="hljs-number">0xffffff</span>) } <span class="hljs-comment">// ç²’å­åŸºç¡€é¢œè‰²ï¼ˆç™½è‰²ï¼‰</span>
    },
    <span class="hljs-attr">transparent</span>: <span class="hljs-literal">true</span>,             <span class="hljs-comment">// å¯ç”¨é€æ˜ï¼šæ”¯æŒalphaé€šé“ï¼Œå®ç°è¾¹ç¼˜æ¸éš</span>
    <span class="hljs-attr">depthTest</span>: <span class="hljs-literal">true</span>,               <span class="hljs-comment">// å¯ç”¨æ·±åº¦æµ‹è¯•ï¼šé¿å…è¿œç²’å­é®æŒ¡è¿‘ç²’å­ï¼ˆæ­£å¸¸æ¸²æŸ“å±‚çº§ï¼‰</span>
    <span class="hljs-attr">depthWrite</span>: <span class="hljs-literal">false</span>,             <span class="hljs-comment">// ä¼˜åŒ–ï¼šå…³é—­æ·±åº¦å†™å…¥ï¼Œé¿å…é€æ˜ç²’å­äº’ç›¸é®æŒ¡ï¼Œå…‰æ™•æ›´è¿è´¯</span>
    <span class="hljs-attr">blending</span>: <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">AdditiveBlending</span> <span class="hljs-comment">// ä¼˜åŒ–ï¼šå¯ç”¨åŠ æ³•æ··åˆï¼Œç²’å­é‡å å¤„äº®åº¦å åŠ ï¼Œæå‡å…‰æ™•è´¨æ„Ÿ</span>
  });

  <span class="hljs-comment">// 6. æ„å»ºç²’å­å‡ ä½•ä½“ï¼ˆBufferGeometryï¼šé«˜æ•ˆå­˜å‚¨å¤§é‡é¡¶ç‚¹æ•°æ®ï¼‰</span>
  <span class="hljs-comment">// åˆ›å»ºæµ®ç‚¹å‹æ•°ç»„å­˜å‚¨ç²’å­é¡¶ç‚¹åæ ‡ï¼ˆæ¯ä¸ªç²’å­3ä¸ªå€¼ï¼šx/y/zï¼Œå…±count*3ä¸ªå…ƒç´ ï¼‰</span>
  <span class="hljs-keyword">const</span> positions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Float32Array</span>(count * <span class="hljs-number">3</span>);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; count * <span class="hljs-number">3</span>; i += <span class="hljs-number">3</span>) {
    <span class="hljs-comment">// ç²’å­åæ ‡èŒƒå›´ï¼š(-100, -100, -100) ~ (100, 100, 100)ï¼Œå‡åŒ€åˆ†å¸ƒåœ¨ç©ºé—´ä¸­</span>
    positions[i]     = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">200</span> - <span class="hljs-number">100</span>; <span class="hljs-comment">// xè½´åæ ‡</span>
    positions[i + <span class="hljs-number">1</span>] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">200</span> - <span class="hljs-number">100</span>; <span class="hljs-comment">// yè½´åæ ‡ï¼ˆå‚ç›´æ–¹å‘ï¼Œç”¨äºä¸‹è½åŠ¨ç”»ï¼‰</span>
    positions[i + <span class="hljs-number">2</span>] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">200</span> - <span class="hljs-number">100</span>; <span class="hljs-comment">// zè½´åæ ‡</span>
  }

  <span class="hljs-comment">// åˆå§‹åŒ–BufferGeometryï¼Œç»‘å®šé¡¶ç‚¹ä½ç½®æ•°æ®</span>
  <span class="hljs-keyword">const</span> geometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BufferGeometry</span>();
  <span class="hljs-comment">// Float32BufferAttribute(æ•°æ®æ•°ç»„, æ¯ä¸ªé¡¶ç‚¹çš„åˆ†é‡æ•°)ï¼šæ­¤å¤„3å¯¹åº”x/y/z</span>
  geometry.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'position'</span>, <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Float32BufferAttribute</span>(positions, <span class="hljs-number">3</span>));

  <span class="hljs-comment">// 7. æ„å»ºç²’å­å¯¹è±¡ï¼ˆTHREE.Pointsï¼šä¸“é—¨ç”¨äºæ¸²æŸ“ç‚¹ç²’å­ç³»ç»Ÿï¼‰</span>
  <span class="hljs-keyword">const</span> mesh = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Points</span>(geometry, material);
  scene.<span class="hljs-title function_">add</span>(mesh); <span class="hljs-comment">// å°†ç²’å­å¯¹è±¡æ·»åŠ åˆ°åœºæ™¯ä¸­</span>

  <span class="hljs-comment">// 8. è½¨é“æ§åˆ¶å™¨ï¼šæ”¯æŒæ‹–æ‹½æ—‹è½¬/æ»šè½®ç¼©æ”¾ï¼Œä¾¿æ·è§‚å¯Ÿ3Dç²’å­ç¾¤</span>
  <span class="hljs-keyword">const</span> controls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrbitControls</span>(camera, renderer.<span class="hljs-property">domElement</span>);
  controls.<span class="hljs-property">enableDamping</span> = <span class="hljs-literal">true</span>; <span class="hljs-comment">// å¯ç”¨é˜»å°¼ï¼šæ‹–æ‹½æ—‹è½¬æœ‰æƒ¯æ€§ï¼Œäº¤äº’æ›´é¡ºæ»‘</span>

  <span class="hljs-comment">// 9. ç²’å­åŠ¨æ€æ›´æ–°å‡½æ•°ï¼ˆå®ç°ä¸‹è½+åç§»åŠ¨ç”»ï¼Œé‡ç½®è¶…å‡ºè¾¹ç•Œçš„ç²’å­ï¼‰</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">time</span>) {
    <span class="hljs-keyword">if</span> (!material || !mesh) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// å®‰å…¨åˆ¤æ–­ï¼šé¿å…å¯¹è±¡æœªåˆå§‹åŒ–æŠ¥é”™</span>
    
    <span class="hljs-comment">// è·å–ç²’å­é¡¶ç‚¹ä½ç½®æ•°ç»„ï¼ˆgeometry.getAttributeè¿”å›çš„æ˜¯å±æ€§å¯¹è±¡ï¼Œ.arrayè·å–åŸå§‹æ•°æ®ï¼‰</span>
    <span class="hljs-keyword">const</span> positions = mesh.<span class="hljs-property">geometry</span>.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">"position"</span>).<span class="hljs-property">array</span>;
    
    <span class="hljs-comment">// éå†æ‰€æœ‰ç²’å­ï¼Œæ›´æ–°åæ ‡ï¼ˆæ¯3ä¸ªå…ƒç´ å¯¹åº”ä¸€ä¸ªç²’å­çš„x/y/zï¼‰</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; positions.<span class="hljs-property">length</span>; i += <span class="hljs-number">3</span>) {
      <span class="hljs-comment">// æ­¥éª¤1ï¼šå‚ç›´ä¸‹è½ï¼ˆyè½´é€’å‡ï¼Œé€Ÿåº¦0.2ï¼‰</span>
      positions[i + <span class="hljs-number">1</span>] -= <span class="hljs-number">0.2</span>;
      
      <span class="hljs-comment">// æ­¥éª¤2ï¼šæ°´å¹³è½»å¾®åç§»ï¼ˆç»“åˆæ—¶é—´å‚æ•°ï¼Œè®©åç§»éšæ—¶é—´å˜åŒ–ï¼Œè¿åŠ¨æ›´è‡ªç„¶ï¼‰</span>
      <span class="hljs-comment">// åŸå§‹ä»£ç Math.sin(i)æ˜¯å›ºå®šå€¼ï¼Œä¼˜åŒ–ä¸ºMath.sin(i + time)ï¼Œå®ç°åŠ¨æ€åç§»</span>
      positions[i]     -= <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(i + time) * <span class="hljs-number">0.1</span>;   <span class="hljs-comment">// xè½´åç§»</span>
      positions[i + <span class="hljs-number">2</span>] -= <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(i + time * <span class="hljs-number">0.8</span>) * <span class="hljs-number">0.1</span>; <span class="hljs-comment">// zè½´åç§»ï¼ˆä¸åŒæ—¶é—´ç³»æ•°ï¼Œé¿å…åç§»åŒæ­¥ï¼‰</span>
      
      <span class="hljs-comment">// æ­¥éª¤3ï¼šé‡ç½®è¶…å‡ºä¸‹è¾¹ç•Œçš„ç²’å­ï¼ˆy &lt; -100æ—¶ï¼Œé‡ç½®åˆ°é¡¶éƒ¨100ï¼Œå®ç°å¾ªç¯ä¸‹è½ï¼‰</span>
      <span class="hljs-keyword">if</span> (positions[i + <span class="hljs-number">1</span>] &lt; -<span class="hljs-number">100</span>) {
        positions[i + <span class="hljs-number">1</span>] = <span class="hljs-number">100</span>;
        <span class="hljs-comment">// é‡ç½®æ—¶åŒæ­¥æ›´æ–°x/zåæ ‡ï¼Œé¿å…ç²’å­é‡ç½®åä½ç½®å•ä¸€</span>
        positions[i]     = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">200</span> - <span class="hljs-number">100</span>;
        positions[i + <span class="hljs-number">2</span>] = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">200</span> - <span class="hljs-number">100</span>;
      }
    }
    
    <span class="hljs-comment">// å…³é”®ï¼šæ ‡è®°ä½ç½®å±æ€§éœ€è¦æ›´æ–°ï¼Œå‘Šè¯‰Three.jsé‡æ–°ä¸Šä¼ æ•°æ®åˆ°GPU</span>
    mesh.<span class="hljs-property">geometry</span>.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">"position"</span>).<span class="hljs-property">needsUpdate</span> = <span class="hljs-literal">true</span>;
  }

  <span class="hljs-comment">// 10. åŠ¨ç”»å¾ªç¯ï¼ˆé©±åŠ¨ç²’å­åŠ¨ç”»ï¼Œå®ç°æµç•…æ¸²æŸ“ï¼‰</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params"/>) {
    <span class="hljs-title function_">requestAnimationFrame</span>(animate); <span class="hljs-comment">// ç»‘å®šæµè§ˆå™¨åˆ·æ–°ç‡ï¼ˆ60å¸§/ç§’ï¼‰ï¼Œé¿å…å¡é¡¿</span>
    <span class="hljs-keyword">const</span> time = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() * <span class="hljs-number">0.0005</span>; <span class="hljs-comment">// è·å–å½“å‰æ—¶é—´ï¼ˆç¼©æ”¾ç³»æ•°0.0005ï¼Œè®©åŠ¨ç”»é€Ÿåº¦é€‚ä¸­ï¼‰</span>
    
    <span class="hljs-title function_">update</span>(time); <span class="hljs-comment">// è°ƒç”¨ç²’å­æ›´æ–°å‡½æ•°ï¼Œä¼ é€’æ—¶é—´å‚æ•°</span>
    controls.<span class="hljs-title function_">update</span>(); <span class="hljs-comment">// æ›´æ–°è½¨é“æ§åˆ¶å™¨é˜»å°¼ï¼ˆå¿…é¡»åœ¨åŠ¨ç”»å¾ªç¯ä¸­è°ƒç”¨ï¼‰</span>
    renderer.<span class="hljs-title function_">render</span>(scene, camera); <span class="hljs-comment">// æ¸²æŸ“åœºæ™¯ï¼ˆå°†3Dç²’å­ç¾¤è½¬æ¢ä¸º2Dç”»å¸ƒæ˜¾ç¤ºï¼‰</span>
  }

  <span class="hljs-comment">// å¯åŠ¨åŠ¨ç”»å¾ªç¯</span>
  <span class="hljs-title function_">animate</span>();

  <span class="hljs-comment">// 11. çª—å£å“åº”å¼é€‚é…ï¼ˆé€‚é…ä¸åŒå±å¹•å°ºå¯¸ï¼Œé¿å…ç²’å­æ‹‰ä¼¸å˜å½¢ï¼‰</span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-function">() =&gt;</span> {
    camera.<span class="hljs-property">aspect</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> / <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>; <span class="hljs-comment">// æ›´æ–°ç›¸æœºå®½é«˜æ¯”</span>
    camera.<span class="hljs-title function_">updateProjectionMatrix</span>(); <span class="hljs-comment">// å…³é”®ï¼šæ›´æ–°ç›¸æœºæŠ•å½±çŸ©é˜µï¼Œè®©å®½é«˜æ¯”ä¿®æ”¹ç”Ÿæ•ˆ</span>
    renderer.<span class="hljs-title function_">setSize</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>); <span class="hljs-comment">// æ›´æ–°æ¸²æŸ“å™¨å°ºå¯¸</span>
  });
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<hr/>
<h3 data-id="heading-32">æ€»ç»“ä¸æ‰©å±•å»ºè®®</h3>
<h4 data-id="heading-33">æ ¸å¿ƒæ€»ç»“</h4>
<ol>
<li><strong>è§†è§‰æ ¸å¿ƒ</strong>ï¼šé€šè¿‡ç‰‡å…ƒç€è‰²å™¨çš„<code>distance()</code>+<code>smoothstep()</code>+<code>pow()</code>é€»è¾‘ï¼Œå®ç°é›ªèŠ±çš„åœ†å½¢æŠ—é”¯é½¿ä¸æŸ”å’Œå…‰æ™•ï¼Œé…åˆ<code>AdditiveBlending</code>åŠ æ³•æ··åˆï¼Œè¿˜åŸæ¼«å¤©é£é›ªçš„æœ¦èƒ§æ°›å›´æ„Ÿï¼Œè¿™æ˜¯é›ªèŠ±æ•ˆæœçš„æ ¸å¿ƒäº®ç‚¹ã€‚</li>
<li><strong>åŠ¨æ€æ ¸å¿ƒ</strong>ï¼šâ€œå‚ç›´ä¸‹è½+åŠ¨æ€åç§»+å¾ªç¯é‡ç½®â€çš„é—­ç¯é€»è¾‘ï¼Œå®ç°é›ªèŠ±çš„è‡ªç„¶é£˜è½ä¸æ— é™å¾ªç¯ï¼Œ<code>needsUpdate = true</code>æ˜¯åŠ¨æ€æ›´æ–°çš„å…³é”®ï¼Œä¿è¯åŠ¨ç”»æµç•…ç”Ÿæ•ˆã€‚</li>
<li><strong>æ€§èƒ½æ ¸å¿ƒ</strong>ï¼š<code>BufferGeometry</code>+<code>ShaderMaterial</code>çš„ç»„åˆï¼Œé«˜æ•ˆå­˜å‚¨ä¸æ¸²æŸ“1000çº§ç²’å­ï¼Œå€ŸåŠ©GPUå¹¶è¡Œå¤„ç†èƒ½åŠ›ï¼Œåœ¨ä¿è¯è§†è§‰è´¨æ„Ÿçš„åŒæ—¶ï¼Œå…¼é¡¾ä½é…è®¾å¤‡çš„æµç•…æ€§ã€‚</li>
<li><strong>äº¤äº’æ ¸å¿ƒ</strong>ï¼š<code>OrbitControls</code>è½¨é“æ§åˆ¶å™¨æä¾›360Â°äº¤äº’æŸ¥çœ‹èƒ½åŠ›ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿå…¨æ–¹ä½è§‚å¯Ÿ3Dé›ªèŠ±ç¾¤çš„é£˜è½æ•ˆæœï¼Œæå‡åœºæ™¯çš„æ²‰æµ¸æ„Ÿã€‚</li>
</ol>
<h4 data-id="heading-34">æ‰©å±•å»ºè®®</h4>
<ol>
<li><strong>é›ªèŠ±æ•ˆæœå¢å¼º</strong>ï¼š
<ul>
<li>è‡ªå®šä¹‰é›ªèŠ±å½¢çŠ¶ï¼šä¿®æ”¹ç‰‡å…ƒç€è‰²å™¨ï¼Œå°†åœ†å½¢é›ªèŠ±æ”¹ä¸ºå…­è§’å½¢ï¼ˆé€šè¿‡UVåæ ‡è®¡ç®—ä¸è£å‰ªå®ç°ï¼‰ï¼Œè¿˜åŸçœŸå®é›ªèŠ±çš„å½¢æ€ï¼›</li>
<li>åŠ¨æ€å°ºå¯¸/é¢œè‰²ï¼šé€šè¿‡<code>material.uniforms.uTime</code>ä¼ é€’æ—¶é—´å‚æ•°ï¼Œè®©é›ªèŠ±çš„å°ºå¯¸ä¸é¢œè‰²éšæ—¶é—´è½»å¾®å˜åŒ–ï¼ˆå¦‚ä¸‹è½è¿‡ç¨‹ä¸­é€æ¸å˜å°ã€å˜æµ…ï¼‰ï¼Œæå‡åŠ¨æ€æ„Ÿï¼›</li>
<li>æ·»åŠ é›ªèŠ±åå…‰ï¼šåœ¨ç‰‡å…ƒç€è‰²å™¨ä¸­æ·»åŠ å…‰æºè®¡ç®—ï¼Œæ¨¡æ‹Ÿé›ªèŠ±å¯¹ç¯å¢ƒå…‰çš„åå…‰ï¼Œè®©é›ªèŠ±æ•ˆæœæ›´çœŸå®ã€‚</li>
</ul>
</li>
<li><strong>åœºæ™¯æ°›å›´å¢å¼º</strong>ï¼š
<ul>
<li>æ·»åŠ èƒŒæ™¯å›¾ï¼šé€šè¿‡<code>THREE.TextureLoader</code>åŠ è½½å¤œç©º/æ£®æ—èƒŒæ™¯å›¾ï¼Œä½œä¸ºåœºæ™¯èƒŒæ™¯ï¼Œæå‡æ¼«å¤©é£é›ªçš„æ°›å›´æ„Ÿï¼›</li>
<li>æ·»åŠ åœ°é¢ç§¯é›ªï¼šåœ¨åœºæ™¯ä¸­æ·»åŠ å¹³é¢å‡ ä½•ä½“ï¼Œæ¨¡æ‹Ÿåœ°é¢ï¼Œå®ç°é›ªèŠ±è½åœ°å †ç§¯çš„æ•ˆæœï¼›</li>
<li>æ·»åŠ é£åŠ›æ§åˆ¶ï¼šé€šè¿‡é¼ æ ‡ä½ç½®æˆ–é”®ç›˜äº‹ä»¶ï¼Œæ§åˆ¶é›ªèŠ±çš„åç§»æ–¹å‘ä¸å¹…åº¦ï¼Œæ¨¡æ‹Ÿä¸åŒé£åŠ›ä¸‹çš„é›ªèŠ±é£˜è½æ•ˆæœã€‚</li>
</ul>
</li>
<li><strong>åŠŸèƒ½æ‰©å±•</strong>ï¼š
<ul>
<li>å‚æ•°æ§åˆ¶é¢æ¿ï¼šæä¾›å¯è§†åŒ–é¢æ¿ï¼Œå…è®¸ç”¨æˆ·è°ƒæ•´é›ªèŠ±æ•°é‡ã€å°ºå¯¸ã€ä¸‹è½é€Ÿåº¦ç­‰å‚æ•°ï¼Œå®æ—¶é¢„è§ˆæ•ˆæœï¼›</li>
<li>ç›¸æœºè‡ªåŠ¨æ¼«æ¸¸ï¼šå®ç°ç›¸æœºçš„è‡ªåŠ¨è·¯å¾„æ¼«æ¸¸ï¼Œè®©ç”¨æˆ·æ— éœ€æ‰‹åŠ¨æ“ä½œï¼Œå³å¯å…¨æ–¹ä½è§‚å¯Ÿé›ªèŠ±é£˜è½æ•ˆæœï¼›</li>
<li>ç§»åŠ¨ç«¯é€‚é…ï¼šä¼˜åŒ–è§¦æ‘¸äº¤äº’ï¼Œæ”¯æŒç§»åŠ¨ç«¯çš„æåˆç¼©æ”¾ä¸æ‹–æ‹½æ—‹è½¬ï¼Œæå‡ç§»åŠ¨ç«¯ç”¨æˆ·ä½“éªŒã€‚</li>
</ul>
</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼š
<ul>
<li>è§†é”¥ä½“è£å‰ªï¼šå‰”é™¤å±å¹•å¤–çš„é›ªèŠ±ç²’å­ï¼Œå‡å°‘GPUæ¸²æŸ“å¼€é”€ï¼Œæ”¯æŒæ›´å¤šç²’å­æ•°é‡ï¼›</li>
<li>å®ä¾‹åŒ–å‡ ä½•ä½“ï¼šä½¿ç”¨<code>InstancedBufferGeometry</code>æ›¿ä»£<code>BufferGeometry</code>ï¼Œè¿›ä¸€æ­¥å‡å°‘DrawCallï¼Œæ”¯æŒç™¾ä¸‡çº§é›ªèŠ±ç²’å­æ¸²æŸ“ï¼›</li>
<li>æ¸²æŸ“å™¨ä¼˜åŒ–ï¼šå¼€å¯<code>renderer.powerPreference = "high-performance"</code>ï¼Œä¼˜å…ˆä½¿ç”¨é«˜æ€§èƒ½GPUï¼Œæå‡æ¸²æŸ“æ•ˆç‡ã€‚</li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¼€å…³é£æ¨¡æµç¨‹]]></title>    <link>https://juejin.cn/post/7602471311509930011</link>    <guid>https://juejin.cn/post/7602471311509930011</guid>    <pubDate>2026-02-04T02:55:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602471311509930011" data-draft-id="7602551091516112905" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¼€å…³é£æ¨¡æµç¨‹"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-02-04T02:55:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·341408199125"/> <meta itemprop="url" content="https://juejin.cn/user/570004686782272"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¼€å…³é£æ¨¡æµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/570004686782272/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·341408199125
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T02:55:38.000Z" title="Wed Feb 04 2026 02:55:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘æ¥åˆ†æ Android å¼€å…³é£è¡Œæ¨¡å¼çš„æµç¨‹ã€‚</p>
<p>å¥½çš„,ç°åœ¨æˆ‘å·²ç»æ”¶é›†åˆ°è¶³å¤Ÿçš„ä¿¡æ¯ã€‚è®©æˆ‘ä¸ºç”¨æˆ·è¯¦ç»†åˆ†æ Android å¼€å…³é£è¡Œæ¨¡å¼çš„å®Œæ•´æµç¨‹ã€‚</p>
<h2 data-id="heading-0"><strong>Android å¼€å…³é£è¡Œæ¨¡å¼æµç¨‹è¯¦è§£</strong></h2>
<p>é£è¡Œæ¨¡å¼(Airplane Mode)æ˜¯ Android ä¸­ä¸€ä¸ªé‡è¦çš„ç³»ç»ŸåŠŸèƒ½,ç”¨äºåŒæ—¶å…³é—­æ‰€æœ‰æ— çº¿é€šä¿¡åŠŸèƒ½(èœ‚çªã€Wi-Fiã€è“ç‰™ç­‰)ã€‚ä¸‹é¢è¯¦ç»†åˆ†æå…¶å®ç°åŸç†ã€‚</p>
<hr/>
<h3 data-id="heading-1"><strong>ä¸€ã€é£è¡Œæ¨¡å¼çš„è§¦å‘å…¥å£</strong></h3>
<h4 data-id="heading-2"><strong>1. ç”¨æˆ·ç•Œé¢è§¦å‘</strong></h4>
<p>ç”¨æˆ·å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å¼€å…³é£è¡Œæ¨¡å¼:</p>
<ul>
<li><strong>å¿«æ·è®¾ç½®é¢æ¿</strong>(ä¸‹æ‹‰é€šçŸ¥æ )</li>
<li><strong>è®¾ç½®åº”ç”¨</strong> â†’ ç½‘ç»œä¸äº’è”ç½‘ â†’ é£è¡Œæ¨¡å¼</li>
<li><strong>é•¿æŒ‰ç”µæºé”®</strong> â†’ å…¨å±€æ“ä½œèœå•</li>
</ul>
<h4 data-id="heading-3"><strong>2. æ ¸å¿ƒæ“ä½œ:ä¿®æ”¹ Settings æ•°æ®åº“</strong></h4>
<p>æ‰€æœ‰è§¦å‘å…¥å£æœ€ç»ˆéƒ½ä¼šæ‰§è¡Œä¸¤ä¸ªå…³é”®æ“ä½œ:</p>
<pre><code class="hljs language-836:839:frameworks_base/services/core/java/com/android/server/policy/LegacyGlobalActions.java" lang="836:839:frameworks_base/services/core/java/com/android/server/policy/LegacyGlobalActions.java">        Intent intent = new Intent(Intent.ACTION_AIRPLANE_MODE_CHANGED);
        intent.addFlags(Intent.FLAG_RECEIVER_REPLACE_PENDING);
        intent.putExtra("state", on);
        mContext.sendBroadcastAsUser(intent, UserHandle.ALL);
</code></pre>
<p><strong>æ­¥éª¤</strong>:</p>
<ol>
<li>
<p><strong>ä¿®æ”¹ Settings æ•°æ®åº“</strong></p>
<pre><code class="hljs language-java" lang="java">Settings.Global.putInt(
    getContentResolver(),
    Settings.Global.AIRPLANE_MODE_ON,
    on ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>
);
</code></pre>
</li>
<li>
<p><strong>å‘é€ç³»ç»Ÿå¹¿æ’­</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Intent</span> <span class="hljs-variable">intent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intent</span>(Intent.ACTION_AIRPLANE_MODE_CHANGED);
intent.putExtra(<span class="hljs-string">"state"</span>, on);  <span class="hljs-comment">// true=å¼€å¯, false=å…³é—­</span>
context.sendBroadcastAsUser(intent, UserHandle.ALL);
</code></pre>
</li>
</ol>
<hr/>
<h3 data-id="heading-4"><strong>äºŒã€ç”µè¯æ¨¡å—çš„å¤„ç†æµç¨‹</strong></h3>
<h4 data-id="heading-5"><strong>1. ServiceStateTracker ç›‘å¬åˆå§‹åŒ–</strong></h4>
<pre><code class="hljs language-690:699:frameworks_opt_telephony/src/java/com/android/internal/telephony/ServiceStateTracker.java" lang="690:699:frameworks_opt_telephony/src/java/com/android/internal/telephony/ServiceStateTracker.java">        mCr = phone.getContext().getContentResolver();
        // system setting property AIRPLANE_MODE_ON is set in Settings.
        int airplaneMode = Settings.Global.getInt(mCr, Settings.Global.AIRPLANE_MODE_ON, 0);
        int enableCellularOnBoot = Settings.Global.getInt(mCr,
                Settings.Global.ENABLE_CELLULAR_ON_BOOT, getDefaultEnableCellularOnBoot());
        mDesiredPowerState = (enableCellularOnBoot &gt; 0) &amp;&amp; ! (airplaneMode &gt; 0);
        if (!mDesiredPowerState) {
            mRadioPowerOffReasons.add(TelephonyManager.RADIO_POWER_REASON_USER);
        }
        mRadioPowerLog.log("init : airplane mode = " + airplaneMode + " enableCellularOnBoot = " +
                enableCellularOnBoot);
</code></pre>
<p><code>ServiceStateTracker</code> åœ¨åˆå§‹åŒ–æ—¶:</p>
<ul>
<li>è¯»å–é£è¡Œæ¨¡å¼çŠ¶æ€ (<code>AIRPLANE_MODE_ON</code>)</li>
<li>è®¡ç®—å°„é¢‘çš„æœŸæœ›çŠ¶æ€ <code>mDesiredPowerState = !airplaneMode</code></li>
<li>å¦‚æœé£è¡Œæ¨¡å¼å¼€å¯,åˆ™æ·»åŠ å…³é—­åŸå›  <code>RADIO_POWER_REASON_USER</code></li>
</ul>
<h4 data-id="heading-6"><strong>2. æ³¨å†Œ Settings ç›‘å¬(é€šè¿‡ ContentObserver)</strong></h4>
<p>å…¶ä»–æ¨¡å—(å¦‚ <code>CarrierActionAgent</code>)ä¼šç›‘å¬ Settings å˜åŒ–:</p>
<pre><code class="hljs language-178:182:frameworks_opt_telephony/src/java/com/android/internal/telephony/CarrierActionAgent.java" lang="178:182:frameworks_opt_telephony/src/java/com/android/internal/telephony/CarrierActionAgent.java">                    mSettingsObserver.observe(
                            Settings.Global.getUriFor(Settings.Global.AIRPLANE_MODE_ON),
                            EVENT_APM_SETTINGS_CHANGED);
</code></pre>
<p>å½“é£è¡Œæ¨¡å¼è®¾ç½®å˜åŒ–æ—¶,è§¦å‘ <code>EVENT_APM_SETTINGS_CHANGED</code> äº‹ä»¶ã€‚</p>
<hr/>
<h3 data-id="heading-7"><strong>ä¸‰ã€å¼€å¯é£è¡Œæ¨¡å¼æµç¨‹(å…³é—­å°„é¢‘)</strong></h3>
<h4 data-id="heading-8"><strong>æµç¨‹å›¾</strong></h4>
<pre><code class="hljs language-scss" lang="scss">ç”¨æˆ·æ“ä½œ
  â†“
Settings<span class="hljs-selector-class">.Global</span><span class="hljs-selector-class">.AIRPLANE_MODE_ON</span> = <span class="hljs-number">1</span>
  â†“
å‘é€ ACTION_AIRPLANE_MODE_CHANGED å¹¿æ’­
  â†“
ServiceStateTracker å¤„ç†(é€šè¿‡ ContentObserver æˆ–å¹¿æ’­)
  â†“
<span class="hljs-built_in">setRadioPower</span>(false) 
  â†“
mDesiredPowerState = false
mRadioPowerOffReasons<span class="hljs-selector-class">.add</span>(RADIO_POWER_REASON_USER)
  â†“
<span class="hljs-built_in">setPowerStateToDesired</span>()
  â†“
<span class="hljs-built_in">powerOffRadioSafely</span>()
  â†“
ã€å…³é”®ã€‘å…ˆæ–­å¼€æ•°æ®è¿æ¥
  â†“
<span class="hljs-built_in">hangupAndPowerOff</span>()
  â†“
mCi<span class="hljs-selector-class">.setRadioPower</span>(false) â†’ HAL â†’ Modem
  â†“
å°„é¢‘å…³é—­å®Œæˆ
</code></pre>
<h4 data-id="heading-9"><strong>å…³é”®ä»£ç åˆ†æ</strong></h4>
<p><strong>1. setRadioPowerForReason æ–¹æ³•</strong></p>
<pre><code class="hljs language-1136:1165:frameworks_opt_telephony/src/java/com/android/internal/telephony/ServiceStateTracker.java" lang="1136:1165:frameworks_opt_telephony/src/java/com/android/internal/telephony/ServiceStateTracker.java">    public void setRadioPowerForReason(boolean power, boolean forEmergencyCall,
            boolean isSelectedPhoneForEmergencyCall, boolean forceApply, int reason) {
        log("setRadioPower power " + power + " forEmergencyCall " + forEmergencyCall
                + " forceApply " + forceApply + " reason " + reason);

        if (power) {
            if (forEmergencyCall) {
                clearAllRadioOffReasons();
            } else {
                mRadioPowerOffReasons.remove(reason);
            }
        } else {
            mRadioPowerOffReasons.add(reason);
        }
        if (power == mDesiredPowerState &amp;&amp; !forceApply) {
            log("setRadioPower mDesiredPowerState is already " + power + " Do nothing.");
            return;
        }
        if (power &amp;&amp; !mRadioPowerOffReasons.isEmpty()) {
            log("setRadioPowerForReason " + "power: " + power + " forEmergencyCall= "
                    + forEmergencyCall + " isSelectedPhoneForEmergencyCall: "
                    + isSelectedPhoneForEmergencyCall + " forceApply " + forceApply + " reason: "
                    + reason + " will not power on the radio as it is powered off for the "
                    + "following reasons: " + mRadioPowerOffReasons + ".");
            return;
        }

        mDesiredPowerState = power;
        setPowerStateToDesired(forEmergencyCall, isSelectedPhoneForEmergencyCall, forceApply);
    }
</code></pre>
<p><strong>é‡ç‚¹</strong>:</p>
<ul>
<li>ä½¿ç”¨ <code>mRadioPowerOffReasons</code> é›†åˆç®¡ç†å…³é—­åŸå› (å¯èƒ½æœ‰å¤šä¸ª,å¦‚ USERã€CARRIERã€THERMAL ç­‰)</li>
<li>åªæœ‰å½“ <code>mRadioPowerOffReasons</code> ä¸ºç©ºæ—¶æ‰å…è®¸å¼€æœº</li>
</ul>
<p><strong>2. setPowerStateToDesired æ–¹æ³•</strong></p>
<pre><code class="hljs language-3107:3143:frameworks_opt_telephony/src/java/com/android/internal/telephony/ServiceStateTracker.java" lang="3107:3143:frameworks_opt_telephony/src/java/com/android/internal/telephony/ServiceStateTracker.java">    protected void setPowerStateToDesired(boolean forEmergencyCall,
            boolean isSelectedPhoneForEmergencyCall, boolean forceApply) {
        if (DBG) {
            String tmpLog = "setPowerStateToDesired: mDeviceShuttingDown=" + mDeviceShuttingDown
                    + ", mDesiredPowerState=" + mDesiredPowerState
                    + ", getRadioState=" + mCi.getRadioState()
                    + ", mRadioPowerOffReasons=" + mRadioPowerOffReasons
                    + ", IMS reg state=" + mImsRegistrationOnOff
                    + ", pending radio off=" + hasMessages(EVENT_POWER_OFF_RADIO_IMS_DEREG_TIMEOUT);
            log(tmpLog);
            mRadioPowerLog.log(tmpLog);
        }

        if (mDesiredPowerState &amp;&amp; mDeviceShuttingDown) {
            log("setPowerStateToDesired powering on of radio failed because the device is " +
                    "powering off");
            return;
        }

        // If we want it on and it's off, turn it on
        if (mDesiredPowerState &amp;&amp; mRadioPowerOffReasons.isEmpty()
                &amp;&amp; (forceApply || mCi.getRadioState() == TelephonyManager.RADIO_POWER_OFF)) {
            mCi.setRadioPower(true, forEmergencyCall, isSelectedPhoneForEmergencyCall, null);
        } else if ((!mDesiredPowerState || !mRadioPowerOffReasons.isEmpty()) &amp;&amp; mCi.getRadioState()
                == TelephonyManager.RADIO_POWER_ON) {
            if (DBG) log("setPowerStateToDesired: powerOffRadioSafely()");
            powerOffRadioSafely();
        } else if (mDeviceShuttingDown
                &amp;&amp; (mCi.getRadioState() != TelephonyManager.RADIO_POWER_UNAVAILABLE)) {
            // !mDesiredPowerState condition above will happen first if the radio is on, so we will
            // see the following: (delay for IMS dereg) -&gt; RADIO_POWER_OFF -&gt;
            // RADIO_POWER_UNAVAILABLE
            mCi.requestShutdown(null);
        }
        // Cancel any pending timeouts because the state has been re-evaluated.
        cancelDelayRadioOffWaitingForImsDeregTimeout();
    }
</code></pre>
<p><strong>åˆ¤æ–­é€»è¾‘</strong>:</p>
<ul>
<li><strong>å¼€æœºæ¡ä»¶</strong>: <code>mDesiredPowerState=true</code> &amp;&amp; <code>mRadioPowerOffReasons</code> ä¸ºç©º &amp;&amp; å½“å‰å°„é¢‘å…³é—­</li>
<li><strong>å…³æœºæ¡ä»¶</strong>: (<code>mDesiredPowerState=false</code> || <code>mRadioPowerOffReasons</code> éç©º) &amp;&amp; å½“å‰å°„é¢‘å¼€å¯</li>
</ul>
<p><strong>3. powerOffRadioSafely å®‰å…¨å…³é—­</strong></p>
<pre><code class="hljs language-4978:5015:frameworks_opt_telephony/src/java/com/android/internal/telephony/ServiceStateTracker.java" lang="4978:5015:frameworks_opt_telephony/src/java/com/android/internal/telephony/ServiceStateTracker.java">    public void powerOffRadioSafely() {
        synchronized (this) {
            SatelliteController.getInstance().onCellularRadioPowerOffRequested();
            if (DomainSelectionResolver.getInstance().isDomainSelectionSupported()) {
                EmergencyStateTracker.getInstance().onCellularRadioPowerOffRequested();
            }
            if (!mPendingRadioPowerOffAfterDataOff) {
                // hang up all active voice calls first
                if (mPhone.isPhoneTypeGsm() &amp;&amp; mPhone.isInCall()) {
                    mPhone.mCT.mRingingCall.hangupIfAlive();
                    mPhone.mCT.mBackgroundCall.hangupIfAlive();
                    mPhone.mCT.mForegroundCall.hangupIfAlive();
                }

                for (Phone phone : PhoneFactory.getPhones()) {
                    if (!phone.getDataNetworkController().areAllDataDisconnected()) {
                        log("powerOffRadioSafely: Data is active on phone " + phone.getSubId()
                                + ". Wait for all data disconnect.");
                        mPendingRadioPowerOffAfterDataOff = true;
                        phone.getDataNetworkController().registerDataNetworkControllerCallback(
                                mDataDisconnectedCallback);
                    }
                }

                // Tear down outside of the disconnected check to prevent race conditions.
                mPhone.getDataNetworkController().tearDownAllDataNetworks(
                        DataNetwork.TEAR_DOWN_REASON_AIRPLANE_MODE_ON);

                if (mPendingRadioPowerOffAfterDataOff) {
                    sendEmptyMessageDelayed(EVENT_SET_RADIO_POWER_OFF,
                            POWER_OFF_ALL_DATA_NETWORKS_DISCONNECTED_TIMEOUT);
                } else {
                    log("powerOffRadioSafely: No data is connected, turn off radio now.");
                    hangupAndPowerOff();
                }
            }
        }
    }
</code></pre>
<p><strong>å®‰å…¨å…³é—­æ­¥éª¤</strong>:</p>
<ol>
<li>é€šçŸ¥ <code>SatelliteController</code> å’Œ <code>EmergencyStateTracker</code></li>
<li><strong>æŒ‚æ–­æ‰€æœ‰è¿›è¡Œä¸­çš„ç”µè¯</strong> (é¿å…é€šè¯ä¸­æ–­)</li>
<li><strong>æ–­å¼€æ‰€æœ‰æ•°æ®è¿æ¥</strong> (<code>tearDownAllDataNetworks</code>)</li>
<li>ç­‰å¾…æ•°æ®å®Œå…¨æ–­å¼€(è¶…æ—¶æœºåˆ¶)</li>
<li>è°ƒç”¨ <code>hangupAndPowerOff()</code> â†’ <code>mCi.setRadioPower(false)</code></li>
</ol>
<hr/>
<h3 data-id="heading-10"><strong>å››ã€å…³é—­é£è¡Œæ¨¡å¼æµç¨‹(å¼€å¯å°„é¢‘)</strong></h3>
<h4 data-id="heading-11"><strong>æµç¨‹å›¾</strong></h4>
<pre><code class="hljs language-scss" lang="scss">ç”¨æˆ·æ“ä½œ
  â†“
Settings<span class="hljs-selector-class">.Global</span><span class="hljs-selector-class">.AIRPLANE_MODE_ON</span> = <span class="hljs-number">0</span>
  â†“
å‘é€ ACTION_AIRPLANE_MODE_CHANGED å¹¿æ’­
  â†“
ServiceStateTracker å¤„ç†
  â†“
<span class="hljs-built_in">setRadioPower</span>(true)
  â†“
mRadioPowerOffReasons<span class="hljs-selector-class">.remove</span>(RADIO_POWER_REASON_USER)
mDesiredPowerState = true
  â†“
<span class="hljs-built_in">setPowerStateToDesired</span>()
  â†“
mCi<span class="hljs-selector-class">.setRadioPower</span>(true) â†’ HAL â†’ Modem
  â†“
EVENT_RADIO_STATE_CHANGED
  â†“
<span class="hljs-built_in">setPowerStateToDesired</span>() (ç¡®è®¤çŠ¶æ€)
  â†“
<span class="hljs-built_in">pollStateInternal</span>(true) (å¼€å§‹ç½‘ç»œæœç´¢)
  â†“
å°„é¢‘å¼€å¯å®Œæˆ,å¼€å§‹é©»ç½‘
</code></pre>
<h4 data-id="heading-12"><strong>å…³é”®ä»£ç </strong></h4>
<pre><code class="hljs language-1337:1349:frameworks_opt_telephony/src/java/com/android/internal/telephony/ServiceStateTracker.java" lang="1337:1349:frameworks_opt_telephony/src/java/com/android/internal/telephony/ServiceStateTracker.java">            case EVENT_RADIO_STATE_CHANGED:
                RadioPowerStateStats.onRadioStateChanged(mCi.getRadioState());
                // fall through, the code above only logs metrics when radio state changes
            case EVENT_PHONE_TYPE_SWITCHED:
                if(!mPhone.isPhoneTypeGsm() &amp;&amp;
                        mCi.getRadioState() == TelephonyManager.RADIO_POWER_ON) {
                    handleCdmaSubscriptionSource(mCdmaSSM.getCdmaSubscriptionSource());
                }
                // This will do nothing in the 'radio not available' case
                setPowerStateToDesired();
                // These events are modem triggered, so pollState() needs to be forced
                pollStateInternal(true);
                break;
</code></pre>
<p><strong>å…³é—­é£è¡Œæ¨¡å¼å</strong>:</p>
<ol>
<li>Modem ä¸Šç”µåå‘é€ <code>UNSOL_RESPONSE_RADIO_STATE_CHANGED</code> é€šçŸ¥</li>
<li>è§¦å‘ <code>EVENT_RADIO_STATE_CHANGED</code> äº‹ä»¶</li>
<li>è°ƒç”¨ <code>setPowerStateToDesired()</code> ç¡®è®¤çŠ¶æ€</li>
<li><strong>è°ƒç”¨ <code>pollStateInternal(true)</code> å¼€å§‹ç½‘ç»œæœç´¢</strong>,è¿›å…¥é©»ç½‘æµç¨‹</li>
</ol>
<hr/>
<h3 data-id="heading-13"><strong>äº”ã€å…¶ä»–æ— çº¿æ¨¡å—çš„å¤„ç†</strong></h3>
<p>é£è¡Œæ¨¡å¼ä¸ä»…å½±å“èœ‚çªç½‘ç»œ,è¿˜ä¼šå½±å“:</p>
<h4 data-id="heading-14"><strong>1. Wi-Fi</strong></h4>
<ul>
<li>ç›‘å¬ <code>ACTION_AIRPLANE_MODE_CHANGED</code> å¹¿æ’­</li>
<li>æ ¹æ® <code>Settings.Global.AIRPLANE_MODE_RADIOS</code> åˆ¤æ–­æ˜¯å¦éœ€è¦å…³é—­</li>
<li>å¦‚æœåœ¨ <code>AIRPLANE_MODE_TOGGLEABLE_RADIOS</code> ä¸­,åˆ™å…è®¸åœ¨é£è¡Œæ¨¡å¼ä¸‹ç‹¬ç«‹å¼€å…³</li>
</ul>
<h4 data-id="heading-15"><strong>2. Bluetooth</strong></h4>
<ul>
<li>ç±»ä¼¼ Wi-Fi,é€šè¿‡ <code>AIRPLANE_MODE_RADIOS</code> é…ç½®</li>
<li>é»˜è®¤åœ¨é£è¡Œæ¨¡å¼ä¸‹å…³é—­</li>
</ul>
<h4 data-id="heading-16"><strong>3. NFC / UWB</strong></h4>
<ul>
<li>æ ¹æ®é…ç½®å†³å®šæ˜¯å¦å—é£è¡Œæ¨¡å¼å½±å“</li>
</ul>
<hr/>
<h3 data-id="heading-17"><strong>å…­ã€ç‰¹æ®Šåœºæ™¯å¤„ç†</strong></h3>
<h4 data-id="heading-18"><strong>1. ç´§æ€¥å‘¼å«ä¸­å¼€å¯é£è¡Œæ¨¡å¼</strong></h4>
<pre><code class="hljs language-910:927:packages_services_Telephony/Telephony/src/com/android/phone/PhoneGlobals.java" lang="910:927:packages_services_Telephony/Telephony/src/com/android/phone/PhoneGlobals.java">            if (tm != null &amp;&amp; tm.isInEmergencyCall()) {
                // Switch airplane mode back to off.
                ConnectivityManager cm =
                        (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
                cm.setAirplaneMode(false);
                Toast.makeText(this, R.string.radio_off_during_emergency_call, Toast.LENGTH_LONG)
                        .show();
                Log.i(LOG_TAG, "Ignoring airplane mode: emergency call. Turning airplane off");
</code></pre>
<p><strong>ç‰¹æ®Šå¤„ç†</strong>:</p>
<ul>
<li>å¦‚æœæ­£åœ¨è¿›è¡Œç´§æ€¥å‘¼å«,<strong>è‡ªåŠ¨å…³é—­é£è¡Œæ¨¡å¼</strong></li>
<li>æ˜¾ç¤º Toast æç¤ºç”¨æˆ·</li>
</ul>
<h4 data-id="heading-19"><strong>2. IMS æ³¨é”€å»¶è¿Ÿ</strong></h4>
<ul>
<li>å…³é—­å°„é¢‘å‰ä¼šç­‰å¾… IMS æ³¨é”€å®Œæˆ</li>
<li>è¶…æ—¶æœºåˆ¶: <code>EVENT_POWER_OFF_RADIO_IMS_DEREG_TIMEOUT</code></li>
</ul>
<hr/>
<h3 data-id="heading-20"><strong>ä¸ƒã€åº•å±‚ HAL è°ƒç”¨</strong></h3>
<h4 data-id="heading-21"><strong>RadioModemProxy.setRadioPower</strong></h4>
<pre><code class="hljs language-346:360:frameworks_opt_telephony/src/java/com/android/internal/telephony/RadioModemProxy.java" lang="346:360:frameworks_opt_telephony/src/java/com/android/internal/telephony/RadioModemProxy.java">    public void setRadioPower(int serial, boolean powerOn, boolean forEmergencyCall,
            boolean preferredForEmergencyCall) throws RemoteException {
        if (isEmpty()) return;
        if (isAidl()) {
            mModemProxy.setRadioPower(serial, powerOn, forEmergencyCall, preferredForEmergencyCall);
        } else if (mHalVersion.greaterOrEqual(RIL.RADIO_HAL_VERSION_1_6)) {
            ((android.hardware.radio.V1_6.IRadio) mRadioProxy).setRadioPower_1_6(serial, powerOn,
                    forEmergencyCall, preferredForEmergencyCall);
        } else if (mHalVersion.greaterOrEqual(RIL.RADIO_HAL_VERSION_1_5)) {
            ((android.hardware.radio.V1_5.IRadio) mRadioProxy).setRadioPower_1_5(serial, powerOn,
                    forEmergencyCall, preferredForEmergencyCall);
        } else {
            mRadioProxy.setRadioPower(serial, powerOn);
        }
    }
</code></pre>
<p><strong>æ ¹æ® HAL ç‰ˆæœ¬é€‰æ‹©æ¥å£</strong>:</p>
<ul>
<li>AIDL HAL: <code>IRadioModem.setRadioPower</code></li>
<li>HIDL 1.6+: <code>setRadioPower_1_6</code> (æ”¯æŒç´§æ€¥å‘¼å«æ ‡å¿—)</li>
<li>HIDL 1.5: <code>setRadioPower_1_5</code></li>
<li>æ—§ç‰ˆæœ¬: <code>setRadioPower</code></li>
</ul>
<hr/>
<h3 data-id="heading-22"><strong>å…«ã€æ€»ç»“</strong></h3>
<h4 data-id="heading-23"><strong>å…³é”®ç»„ä»¶</strong></h4>
<ol>
<li><strong>Settings.Global.AIRPLANE_MODE_ON</strong>: ç³»ç»Ÿæ•°æ®åº“å­˜å‚¨çŠ¶æ€</li>
<li><strong>Intent.ACTION_AIRPLANE_MODE_CHANGED</strong>: ç³»ç»Ÿå¹¿æ’­é€šçŸ¥å„æ¨¡å—</li>
<li><strong>ServiceStateTracker</strong>: ç”µè¯æ¨¡å—æ ¸å¿ƒæ§åˆ¶å™¨</li>
<li><strong>mRadioPowerOffReasons</strong>: å…³é—­åŸå› é›†åˆ(æ”¯æŒå¤šé‡åŸå› )</li>
</ol>
<h4 data-id="heading-24"><strong>æ ¸å¿ƒæµç¨‹</strong></h4>
<pre><code class="hljs language-arduino" lang="arduino">å¼€å¯é£è¡Œæ¨¡å¼:
  ä¿®æ”¹ Settings â†’ å¹¿æ’­ â†’ æŒ‚æ–­ç”µè¯ â†’ æ–­å¼€æ•°æ® â†’ <span class="hljs-built_in">setRadioPower</span>(<span class="hljs-literal">false</span>) â†’ Modem å…³é—­

å…³é—­é£è¡Œæ¨¡å¼:
  ä¿®æ”¹ Settings â†’ å¹¿æ’­ â†’ <span class="hljs-built_in">setRadioPower</span>(<span class="hljs-literal">true</span>) â†’ Modem å¼€å¯ â†’ pollState â†’ é©»ç½‘
</code></pre>
<h4 data-id="heading-25"><strong>è®¾è®¡äº®ç‚¹</strong></h4>
<ol>
<li><strong>å®‰å…¨å…³é—­</strong>: å…ˆæ–­å¼€æ•°æ®å’Œç”µè¯å†å…³é—­å°„é¢‘,é¿å…æ•°æ®ä¸¢å¤±</li>
<li><strong>å¤šé‡åŸå› ç®¡ç†</strong>: é€šè¿‡ <code>Set&lt;Integer&gt;</code> ç®¡ç†å¤šä¸ªå…³é—­åŸå› ,ä»»ä¸€åŸå› å­˜åœ¨éƒ½ä¸èƒ½å¼€æœº</li>
<li><strong>ç´§æ€¥å‘¼å«ä¿æŠ¤</strong>: é€šè¯ä¸­å¼ºåˆ¶é˜»æ­¢é£è¡Œæ¨¡å¼å¼€å¯</li>
<li><strong>IMS å‹å¥½</strong>: ç­‰å¾… IMS æ³¨é”€å®Œæˆå†å…³é—­å°„é¢‘</li>
<li><strong>çŠ¶æ€æœºé©±åŠ¨</strong>: é€šè¿‡ <code>mDesiredPowerState</code> å’Œå®é™…çŠ¶æ€å¯¹æ¯”,è‡ªåŠ¨ä¿®æ­£</li>
</ol>
<p>è¿™å¥—æœºåˆ¶ç¡®ä¿äº†é£è¡Œæ¨¡å¼åœ¨å„ç§åœºæ™¯ä¸‹çš„å®‰å…¨æ€§å’Œå¯é æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android Lifecycle æ—¶åºå›¾]]></title>    <link>https://juejin.cn/post/7602482736914071587</link>    <guid>https://juejin.cn/post/7602482736914071587</guid>    <pubDate>2026-02-04T03:06:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602482736914071587" data-draft-id="7602474148095295540" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android Lifecycle æ—¶åºå›¾"/> <meta itemprop="keywords" content="é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-04T03:06:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹¾å¤ä¸€æ°”æ€"/> <meta itemprop="url" content="https://juejin.cn/user/4212984289955431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android Lifecycle æ—¶åºå›¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984289955431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹¾å¤ä¸€æ°”æ€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T03:06:13.000Z" title="Wed Feb 04 2026 03:06:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Android Lifecycle æ—¶åºå›¾</h2>
<h3 data-id="heading-1">1. Activity å¯åŠ¨åˆ°é”€æ¯çš„ç”Ÿå‘½å‘¨æœŸ</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant S as System
    participant A as Activity
    participant R as Registry
    participant O as Observer

    Note over S,O: å¯åŠ¨æµç¨‹
    S-&gt;&gt;A: onCreate()
    A-&gt;&gt;R: handleLifecycleEvent(ON_CREATE)
    R-&gt;&gt;R: setState(CREATED)
    R-&gt;&gt;O: onStateChanged(ON_CREATE)
    O-&gt;&gt;O: onCreate()

    S-&gt;&gt;A: onStart()
    A-&gt;&gt;R: handleLifecycleEvent(ON_START)
    R-&gt;&gt;R: setState(STARTED)
    R-&gt;&gt;O: onStateChanged(ON_START)
    O-&gt;&gt;O: onStart()

    S-&gt;&gt;A: onResume()
    A-&gt;&gt;R: handleLifecycleEvent(ON_RESUME)
    R-&gt;&gt;R: setState(RESUMED)
    R-&gt;&gt;O: onStateChanged(ON_RESUME)
    O-&gt;&gt;O: onResume()

    Note over A: Activity å¯è§ä¸”å¯äº¤äº’

    Note over S,O: é€€å‡ºæµç¨‹
    S-&gt;&gt;A: onPause()
    A-&gt;&gt;R: handleLifecycleEvent(ON_PAUSE)
    R-&gt;&gt;R: setState(STARTED)
    R-&gt;&gt;O: onStateChanged(ON_PAUSE)
    O-&gt;&gt;O: onPause()

    S-&gt;&gt;A: onStop()
    A-&gt;&gt;R: handleLifecycleEvent(ON_STOP)
    R-&gt;&gt;R: setState(CREATED)
    R-&gt;&gt;O: onStateChanged(ON_STOP)
    O-&gt;&gt;O: onStop()

    S-&gt;&gt;A: onDestroy()
    A-&gt;&gt;R: handleLifecycleEvent(ON_DESTROY)
    R-&gt;&gt;R: setState(DESTROYED)
    R-&gt;&gt;O: onStateChanged(ON_DESTROY)
    O-&gt;&gt;O: onDestroy()
</code></pre>
<h3 data-id="heading-2">2. Fragment ç”Ÿå‘½å‘¨æœŸ</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant FM as FragmentManager
    participant F as Fragment
    participant FR as Fragment Registry
    participant VR as View Registry
    participant O as Observer

    Note over FM,O: Fragment åˆ›å»º
    FM-&gt;&gt;F: onCreate()
    F-&gt;&gt;FR: handleLifecycleEvent(ON_CREATE)
    FR-&gt;&gt;FR: setState(CREATED)
    FR-&gt;&gt;O: onCreate()

    FM-&gt;&gt;F: onCreateView()
    F-&gt;&gt;F: inflate layout
    F--&gt;&gt;FM: return View

    FM-&gt;&gt;F: onViewCreated()
    F-&gt;&gt;VR: create ViewLifecycleOwner
    VR-&gt;&gt;VR: setState(CREATED)
    VR-&gt;&gt;O: onCreate()

    FM-&gt;&gt;F: onStart()
    F-&gt;&gt;FR: handleLifecycleEvent(ON_START)
    FR-&gt;&gt;FR: setState(STARTED)
    F-&gt;&gt;VR: handleLifecycleEvent(ON_START)
    VR-&gt;&gt;VR: setState(STARTED)

    FM-&gt;&gt;F: onResume()
    F-&gt;&gt;FR: handleLifecycleEvent(ON_RESUME)
    FR-&gt;&gt;FR: setState(RESUMED)
    F-&gt;&gt;VR: handleLifecycleEvent(ON_RESUME)
    VR-&gt;&gt;VR: setState(RESUMED)

    Note over F: Fragment å¯è§ä¸”å¯äº¤äº’

    Note over FM,O: Fragment é”€æ¯
    FM-&gt;&gt;F: onPause()
    F-&gt;&gt;FR: handleLifecycleEvent(ON_PAUSE)
    F-&gt;&gt;VR: handleLifecycleEvent(ON_PAUSE)

    FM-&gt;&gt;F: onStop()
    F-&gt;&gt;FR: handleLifecycleEvent(ON_STOP)
    F-&gt;&gt;VR: handleLifecycleEvent(ON_STOP)

    FM-&gt;&gt;F: onDestroyView()
    F-&gt;&gt;VR: handleLifecycleEvent(ON_DESTROY)
    VR-&gt;&gt;VR: setState(DESTROYED)
    VR-&gt;&gt;O: onDestroy()

    FM-&gt;&gt;F: onDestroy()
    F-&gt;&gt;FR: handleLifecycleEvent(ON_DESTROY)
    FR-&gt;&gt;FR: setState(DESTROYED)
    FR-&gt;&gt;O: onDestroy()
</code></pre>
<h3 data-id="heading-3">3. æ³¨å†Œ Observer çš„æµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant App as åº”ç”¨ä»£ç 
    participant Owner as LifecycleOwner
    participant LC as Lifecycle
    participant R as Registry
    participant O as Observer

    App-&gt;&gt;O: åˆ›å»º Observer
    App-&gt;&gt;Owner: getLifecycle()
    Owner--&gt;&gt;App: return Lifecycle
    App-&gt;&gt;LC: addObserver(observer)
    LC-&gt;&gt;R: addObserver(observer)
    R-&gt;&gt;R: åŒ…è£…ä¸º ObserverWithState
    R-&gt;&gt;R: observerMap.put()
    R-&gt;&gt;O: onStateChanged(currentState)
    O-&gt;&gt;O: æ‰§è¡Œå›è°ƒæ–¹æ³•
</code></pre>
<h3 data-id="heading-4">4. ç”Ÿå‘½å‘¨æœŸäº‹ä»¶åˆ†å‘æµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant A as Activity
    participant R as Registry
    participant O1 as Observer1
    participant O2 as Observer2
    participant O3 as Observer3

    A-&gt;&gt;R: handleLifecycleEvent(ON_CREATE)
    R-&gt;&gt;R: moveToState(CREATED)
    R-&gt;&gt;R: sync()

    R-&gt;&gt;O1: onStateChanged(ON_CREATE)
    O1-&gt;&gt;O1: onCreate()

    R-&gt;&gt;O2: onStateChanged(ON_CREATE)
    O2-&gt;&gt;O2: onCreate()

    R-&gt;&gt;O3: onStateChanged(ON_CREATE)
    O3-&gt;&gt;O3: onCreate()

    Note over R: æ‰€æœ‰ Observer é€šçŸ¥å®Œæˆ
</code></pre>
<h3 data-id="heading-5">5. lifecycleScope åç¨‹ç”Ÿå‘½å‘¨æœŸ</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant App as åº”ç”¨ä»£ç 
    participant A as Activity
    participant R as Registry
    participant LS as lifecycleScope
    participant C as Coroutine

    Note over App,C: å¯åŠ¨åç¨‹
    App-&gt;&gt;LS: launch { }
    LS-&gt;&gt;C: åˆ›å»ºå¹¶å¯åŠ¨åç¨‹

    Note over A,C: Activity è¿è¡Œä¸­
    A-&gt;&gt;R: onResume()
    R-&gt;&gt;R: setState(RESUMED)
    Note over C: åç¨‹æ‰§è¡Œ

    Note over A,C: Activity é”€æ¯
    A-&gt;&gt;R: onDestroy()
    R-&gt;&gt;R: setState(DESTROYED)
    R-&gt;&gt;LS: è§¦å‘å–æ¶ˆ
    LS-&gt;&gt;C: cancel()
    C-&gt;&gt;C: æ¸…ç†èµ„æº
</code></pre>
<h3 data-id="heading-6">6. é…ç½®å˜æ›´ï¼ˆæ—‹è½¬å±å¹•ï¼‰æµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant S as System
    participant A1 as Activity(æ—§)
    participant R1 as Registry(æ—§)
    participant A2 as Activity(æ–°)
    participant R2 as Registry(æ–°)

    Note over S,R2: é…ç½®å˜æ›´è§¦å‘
    S-&gt;&gt;A1: onPause()
    A1-&gt;&gt;R1: ON_PAUSE
    S-&gt;&gt;A1: onStop()
    A1-&gt;&gt;R1: ON_STOP
    S-&gt;&gt;A1: onDestroy()
    A1-&gt;&gt;R1: ON_DESTROY
    R1-&gt;&gt;R1: setState(DESTROYED)

    Note over A1,R1: æ—§å®ä¾‹é”€æ¯

    S-&gt;&gt;A2: åˆ›å»ºæ–°å®ä¾‹
    S-&gt;&gt;A2: onCreate()
    A2-&gt;&gt;R2: ON_CREATE
    R2-&gt;&gt;R2: setState(CREATED)
    S-&gt;&gt;A2: onStart()
    A2-&gt;&gt;R2: ON_START
    S-&gt;&gt;A2: onResume()
    A2-&gt;&gt;R2: ON_RESUME
    R2-&gt;&gt;R2: setState(RESUMED)

    Note over A2,R2: æ–°å®ä¾‹è¿è¡Œ
</code></pre>
<h3 data-id="heading-7">7. MainActivity å¯åŠ¨ FirstFragment</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant S as System
    participant MA as MainActivity
    participant FM as FragmentManager
    participant FF as FirstFragment
    participant FR as Fragment Registry

    S-&gt;&gt;MA: onCreate()
    MA-&gt;&gt;FM: beginTransaction()
    MA-&gt;&gt;FM: add(R.id.container, FirstFragment)
    FM-&gt;&gt;FF: åˆ›å»ºå®ä¾‹
    FF-&gt;&gt;FR: åˆ›å»º Registry

    FM-&gt;&gt;FF: onCreate()
    FF-&gt;&gt;FR: handleLifecycleEvent(ON_CREATE)
    FR-&gt;&gt;FR: setState(CREATED)

    FM-&gt;&gt;FF: onCreateView()
    FF-&gt;&gt;FF: inflate(R.layout.fragment_first)

    FM-&gt;&gt;FF: onViewCreated()
    FF-&gt;&gt;FF: åˆå§‹åŒ– View

    S-&gt;&gt;MA: onStart()
    MA-&gt;&gt;FM: dispatchStart()
    FM-&gt;&gt;FF: onStart()
    FF-&gt;&gt;FR: handleLifecycleEvent(ON_START)

    S-&gt;&gt;MA: onResume()
    MA-&gt;&gt;FM: dispatchResume()
    FM-&gt;&gt;FF: onResume()
    FF-&gt;&gt;FR: handleLifecycleEvent(ON_RESUME)

    Note over FF: Fragment å¯è§ä¸”å¯äº¤äº’
</code></pre>
<h3 data-id="heading-8">8. ViewModel ä¸ Lifecycle äº¤äº’</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant A as Activity
    participant VP as ViewModelProvider
    participant VS as ViewModelStore
    participant VM as ViewModel
    participant R as Registry

    A-&gt;&gt;VP: ViewModelProvider(this)
    A-&gt;&gt;VP: get(MyViewModel::class.java)
    VP-&gt;&gt;VS: get(key)

    alt ViewModel ä¸å­˜åœ¨
        VS-&gt;&gt;VM: åˆ›å»º ViewModel
        VM-&gt;&gt;VM: init
        VS-&gt;&gt;VS: put(key, viewModel)
    end

    VP--&gt;&gt;A: return ViewModel

    Note over A: Activity è¿è¡Œ

    A-&gt;&gt;R: onDestroy()
    R-&gt;&gt;R: setState(DESTROYED)

    alt isFinishing = true
        R-&gt;&gt;VS: clear()
        VS-&gt;&gt;VM: onCleared()
        VM-&gt;&gt;VM: æ¸…ç†èµ„æº
    end
</code></pre>
<h3 data-id="heading-9">ç”Ÿå‘½å‘¨æœŸçŠ¶æ€è½¬æ¢</h3>
<h4 data-id="heading-10">State æšä¸¾å€¼</h4>
<ul>
<li><strong>INITIALIZED</strong>: åˆå§‹çŠ¶æ€</li>
<li><strong>CREATED</strong>: onCreate() ä¹‹å</li>
<li><strong>STARTED</strong>: onStart() ä¹‹å</li>
<li><strong>RESUMED</strong>: onResume() ä¹‹å</li>
<li><strong>DESTROYED</strong>: onDestroy() ä¹‹å</li>
</ul>
<h4 data-id="heading-11">Event æšä¸¾å€¼</h4>
<ul>
<li><strong>ON_CREATE</strong>: è§¦å‘ onCreate()</li>
<li><strong>ON_START</strong>: è§¦å‘ onStart()</li>
<li><strong>ON_RESUME</strong>: è§¦å‘ onResume()</li>
<li><strong>ON_PAUSE</strong>: è§¦å‘ onPause()</li>
<li><strong>ON_STOP</strong>: è§¦å‘ onStop()</li>
<li><strong>ON_DESTROY</strong>: è§¦å‘ onDestroy()</li>
<li><strong>ON_ANY</strong>: ä»»æ„äº‹ä»¶</li>
</ul>
<h3 data-id="heading-12">æ—¶åºå›¾è¯´æ˜</h3>
<h4 data-id="heading-13">å›¾1ï¼šActivity ç”Ÿå‘½å‘¨æœŸ</h4>
<p>å±•ç¤º Activity ä»å¯åŠ¨åˆ°é”€æ¯çš„æ ‡å‡†æµç¨‹ï¼ŒåŒ…æ‹¬ LifecycleRegistry å¦‚ä½•ç®¡ç†çŠ¶æ€å˜åŒ–å’Œé€šçŸ¥ Observerã€‚</p>
<h4 data-id="heading-14">å›¾2ï¼šFragment ç”Ÿå‘½å‘¨æœŸ</h4>
<p>Fragment æœ‰ä¸¤ä¸ªç‹¬ç«‹çš„ç”Ÿå‘½å‘¨æœŸï¼š</p>
<ul>
<li>Fragment è‡ªèº«çš„ç”Ÿå‘½å‘¨æœŸï¼ˆç”± Fragment Registry ç®¡ç†ï¼‰</li>
<li>View çš„ç”Ÿå‘½å‘¨æœŸï¼ˆç”± ViewLifecycleOwner ç®¡ç†ï¼‰</li>
</ul>
<h4 data-id="heading-15">å›¾3ï¼šObserver æ³¨å†Œ</h4>
<p>å±•ç¤ºåº”ç”¨ä»£ç å¦‚ä½•æ³¨å†Œ Observerï¼Œä»¥åŠ Registry å¦‚ä½•ç«‹å³åŒæ­¥å½“å‰çŠ¶æ€ã€‚</p>
<h4 data-id="heading-16">å›¾4ï¼šäº‹ä»¶åˆ†å‘</h4>
<p>å±•ç¤ºå½“ç”Ÿå‘½å‘¨æœŸäº‹ä»¶å‘ç”Ÿæ—¶ï¼ŒRegistry å¦‚ä½•æŒ‰é¡ºåºé€šçŸ¥æ‰€æœ‰å·²æ³¨å†Œçš„ Observerã€‚</p>
<h4 data-id="heading-17">å›¾5ï¼šlifecycleScope</h4>
<p>å±•ç¤ºåç¨‹ä½œç”¨åŸŸå¦‚ä½•ä¸ç”Ÿå‘½å‘¨æœŸç»‘å®šï¼Œåœ¨ onDestroy æ—¶è‡ªåŠ¨å–æ¶ˆæ‰€æœ‰åç¨‹ã€‚</p>
<h4 data-id="heading-18">å›¾6ï¼šé…ç½®å˜æ›´</h4>
<p>å±•ç¤ºé…ç½®å˜æ›´æ—¶ï¼Œæ—§ Activity å®ä¾‹å®Œå…¨é”€æ¯ï¼Œæ–°å®ä¾‹é‡æ–°åˆ›å»ºçš„è¿‡ç¨‹ã€‚</p>
<h4 data-id="heading-19">å›¾7ï¼šMainActivity å’Œ Fragment</h4>
<p>å±•ç¤ºé¡¹ç›®ä¸­ MainActivity å¦‚ä½•å¯åŠ¨å’Œç®¡ç† FirstFragmentã€‚</p>
<h4 data-id="heading-20">å›¾8ï¼šViewModel ç”Ÿå‘½å‘¨æœŸ</h4>
<p>å±•ç¤º ViewModel å¦‚ä½•é€šè¿‡ ViewModelStore ä¿æŒæ•°æ®ï¼Œåœ¨é…ç½®å˜æ›´æ—¶å­˜æ´»ã€‚</p>
<h3 data-id="heading-21">å…³é”®ç‚¹</h3>
<ol>
<li><strong>çŠ¶æ€åŒæ­¥</strong>: å½“æ³¨å†Œ Observer æ—¶ï¼Œä¼šç«‹å³åŒæ­¥åˆ°å½“å‰çŠ¶æ€</li>
<li><strong>é¡ºåºé€šçŸ¥</strong>: æ‰€æœ‰ Observer æŒ‰æ³¨å†Œé¡ºåºæ¥æ”¶äº‹ä»¶</li>
<li><strong>è‡ªåŠ¨æ¸…ç†</strong>: lifecycleScope åœ¨ onDestroy æ—¶è‡ªåŠ¨å–æ¶ˆ</li>
<li><strong>åŒé‡ç”Ÿå‘½å‘¨æœŸ</strong>: Fragment æœ‰è‡ªèº«å’Œ View ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸ</li>
<li><strong>é…ç½®å˜æ›´</strong>: Activity é‡å»ºæ—¶ ViewModel å¯ä»¥ä¿æŒæ•°æ®</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ¨¡å‹åº”ç”¨çš„æ¨¡å‹æ¶æ„å’Œæ ¸å¿ƒæŠ€æœ¯åŸç†-ä»¥DeepSeekå¯¹è¯åŠ©æ‰‹ä¸ºä¾‹åˆ†æ]]></title>    <link>https://juejin.cn/post/7602465642534699058</link>    <guid>https://juejin.cn/post/7602465642534699058</guid>    <pubDate>2026-02-04T03:11:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602465642534699058" data-draft-id="7602465642534633522" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ¨¡å‹åº”ç”¨çš„æ¨¡å‹æ¶æ„å’Œæ ¸å¿ƒæŠ€æœ¯åŸç†-ä»¥DeepSeekå¯¹è¯åŠ©æ‰‹ä¸ºä¾‹åˆ†æ"/> <meta itemprop="keywords" content="LLM,DeepSeek"/> <meta itemprop="datePublished" content="2026-02-04T03:11:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—å··_"/> <meta itemprop="url" content="https://juejin.cn/user/1671692995799966"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ¨¡å‹åº”ç”¨çš„æ¨¡å‹æ¶æ„å’Œæ ¸å¿ƒæŠ€æœ¯åŸç†-ä»¥DeepSeekå¯¹è¯åŠ©æ‰‹ä¸ºä¾‹åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1671692995799966/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—å··_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T03:11:54.000Z" title="Wed Feb 04 2026 03:11:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€DeepSeek å¯¹è¯åŠ©æ‰‹ç®€ä»‹</h2>
<p>DeepSeekæ˜¯ç”±æ­å·æ·±åº¦æ±‚ç´¢å…¬å¸å¼€å‘çš„å›½äº§AIåŠ©æ‰‹ã€‚è‡ª2025å¹´1æœˆæ­£å¼ä¸Šçº¿ä»¥æ¥ï¼Œå‡­å€Ÿå…¶å“è¶Šçš„æ€§èƒ½ã€å¼€æºç­–ç•¥å’Œå¯¹ä¸­æ–‡è¯­å¢ƒçš„æ·±åº¦ä¼˜åŒ–ï¼Œè¿…é€Ÿæˆé•¿ä¸ºå…¨çƒå¢é•¿æœ€å¿«çš„AIå·¥å…·ä¹‹ä¸€ã€‚å®ƒå¹¶éä¸€ä¸ªç®€å•çš„èŠå¤©æœºå™¨äººï¼Œè€Œæ˜¯ä¸€ä¸ªèƒ½å¤Ÿèå…¥å·¥ä½œä¸ç”Ÿæ´»å…¨æµç¨‹çš„â€œè¶…çº§åŠ©æ‰‹â€ï¼Œæ—¨åœ¨é€šè¿‡å¼ºå¤§çš„è¯­è¨€ç†è§£ä¸ç”Ÿæˆèƒ½åŠ›ï¼Œä¸ºç”¨æˆ·æä¾›æ™ºèƒ½ã€ç²¾å‡†ä¸”ä¸ªæ€§åŒ–çš„æœåŠ¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12bee23c5ce346cd8ef0c3a6813670a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YyX5be3Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770779517&amp;x-signature=X0amkYeU2JLfIYMEecAwaq5THVg%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-1"><strong>æ ¸å¿ƒåŠŸèƒ½ä¸å…¸å‹ä½¿ç”¨åœºæ™¯</strong></h4>
<p>DeepSeekçš„åŠŸèƒ½è®¾è®¡ç´§å¯†å›´ç»•â€œæå‡æ•ˆç‡â€å’Œâ€œä»»åŠ¡è§£å†³â€å±•å¼€ï¼Œè¦†ç›–äº†ä»ä¸ªäººå­¦ä¹ åˆ°ä¼ä¸šæœåŠ¡çš„å¹¿æ³›é¢†åŸŸã€‚</p>
<h5 data-id="heading-2"><strong>1. åŠå…¬ä¸åˆ›ä½œæ•ˆç‡é©å‘½</strong></h5>
<ul>
<li><strong>æ™ºèƒ½æ–‡æ¡£å¤„ç†</strong>ï¼šèƒ½å¤Ÿæ ¹æ®æŒ‡ä»¤ç”Ÿæˆå„ç±»ä¸“ä¸šæ–‡æ¡£ï¼Œå¦‚å•†ä¸šæŠ¥å‘Šã€è¥é”€æ–¹æ¡ˆã€ä¼šè®®çºªè¦æ¨¡æ¿ç­‰ã€‚ç”¨æˆ·å¯é€šè¿‡ç²¾å‡†çš„â€œè§’è‰²+åœºæ™¯+éœ€æ±‚â€æŒ‡ä»¤ï¼Œç›´æ¥è·å¾—ç»“æ„æ¸…æ™°ã€å†…å®¹å……å®çš„åˆç¨¿ã€‚</li>
<li><strong>æ•°æ®åˆ†æä¸å¯è§†åŒ–</strong>ï¼šå³ä½¿éæŠ€æœ¯ç”¨æˆ·ï¼Œä¹Ÿå¯é€šè¿‡è‡ªç„¶è¯­è¨€æŒ‡ä»¤æˆ–ä¸Šä¼ Excel/CSVæ–‡ä»¶ï¼Œè®©DeepSeekå®Œæˆæ•°æ®æŸ¥è¯¢ã€ç»Ÿè®¡åˆ†æå’Œå¯è§†åŒ–å›¾è¡¨å»ºè®®ï¼Œæ‰®æ¼”â€œæ•°æ®åˆ†æå¸ˆâ€çš„è§’è‰²ã€‚</li>
<li><strong>ä»£ç ç”Ÿæˆä¸è°ƒè¯•</strong>ï¼šè¿™æ˜¯å…¶çªå‡ºä¼˜åŠ¿é¢†åŸŸã€‚å®ƒèƒ½å¤Ÿæ ¹æ®éœ€æ±‚ç”Ÿæˆå¤šç§ç¼–ç¨‹è¯­è¨€çš„ä»£ç ç‰‡æ®µï¼Œå¹¶æä¾›ä»£ç å®¡æŸ¥ã€é”™è¯¯æ’æŸ¥å’Œä¼˜åŒ–å»ºè®®ï¼Œæ˜¾è‘—æå‡å¼€å‘è€…çš„å·¥ä½œæ•ˆç‡ã€‚</li>
</ul>
<h5 data-id="heading-3"><strong>2. å­¦ä¹ ä¸ç ”ç©¶çš„æ™ºèƒ½ä¼™ä¼´</strong></h5>
<ul>
<li><strong>çŸ¥è¯†æ¢³ç†ä¸é—®ç­”</strong>ï¼šå¯ä»¥å¿«é€Ÿè§£ç­”è·¨é¢†åŸŸé—®é¢˜ï¼Œå¹¶èƒ½å¤Ÿæ ¹æ®ä¸Šä¼ çš„æ–‡æ¡£ï¼ˆå¦‚è®ºæ–‡ã€æ•™æï¼‰è¿›è¡Œå†…å®¹æ€»ç»“ã€æç‚¼è¦ç‚¹å’Œç”ŸæˆçŸ¥è¯†å›¾è°±ã€‚</li>
<li><strong>ç ”ç©¶ä¸è§„åˆ’è¾…åŠ©</strong>ï¼šå¯ä¸ºå­¦æœ¯è¯¾é¢˜æ¨èæ–‡çŒ®ã€è®¾è®¡å®éªŒæ¡†æ¶ï¼Œæˆ–å¸®åŠ©ç”¨æˆ·æ‹†è§£å¤æ‚çš„å­¦ä¹ ä»»åŠ¡ï¼Œç”Ÿæˆå¯æ‰§è¡Œçš„æ­¥éª¤æ¸…å•ã€‚</li>
</ul>
<h5 data-id="heading-4"><strong>3. ä¼ä¸šçº§æœåŠ¡ä¸é›†æˆ</strong></h5>
<ul>
<li><strong>æ™ºèƒ½å®¢æœ</strong>ï¼šé€šè¿‡APIæ¥å£ï¼Œä¼ä¸šå¯ä»¥åŸºäºDeepSeekå¿«é€Ÿæ„å»º24å°æ—¶åœ¨çº¿çš„æ™ºèƒ½å®¢æœç³»ç»Ÿã€‚ä¾‹å¦‚ï¼Œä¸Šæµ·ä¸´æ¸¯æ–°ç‰‡åŒºåˆ©ç”¨å…¶æ‰“é€ çš„â€œæ”¿ç­–AIâ€åŠ©æ‰‹ï¼Œå®ç°äº†å¯¹ä¼ä¸šæ”¿ç­–çš„ç²¾å‡†ã€é«˜æ•ˆè§£è¯»ï¼Œå¤§å¹…é™ä½äº†äººå·¥å®¢æœå‹åŠ›ã€‚</li>
<li><strong>ç§æœ‰åŒ–ä¸ä½æˆæœ¬éƒ¨ç½²</strong>ï¼šDeepSeekæ”¯æŒä¼ä¸šç§æœ‰åŒ–éƒ¨ç½²ï¼Œå¹¶èƒ½é€šè¿‡MoEï¼ˆæ··åˆä¸“å®¶ï¼‰ç­‰å…ˆè¿›æ¶æ„å°†APIè°ƒç”¨æˆæœ¬æ§åˆ¶åˆ°æä½æ°´å¹³ï¼ˆå¦‚ä½è‡³1å…ƒ/ç™¾ä¸‡tokensï¼‰ï¼Œä½¿å…¶å¯¹ä¸­å°ä¼ä¸šæå…·å¸å¼•åŠ›ã€‚</li>
</ul>
<h5 data-id="heading-5"><strong>4. æ—¥å¸¸ç”Ÿæ´»ä¸è§„åˆ’</strong></h5>
<p>ä»åˆ¶å®šæ—…è¡Œè®¡åˆ’ã€ç”Ÿæˆå¥åº·é£Ÿè°±ï¼Œåˆ°è¿›è¡Œå¤šè¯­è¨€ç¿»è¯‘å’Œåˆ›æ„å¤´è„‘é£æš´ï¼ŒDeepSeekéƒ½èƒ½æä¾›å®ç”¨çš„å»ºè®®å’Œæ”¯æŒã€‚</p>
<h2 data-id="heading-6">äºŒã€DeepSeekæ ¸å¿ƒæŠ€æœ¯åŸç†ä¸æ¨¡å‹æ¶æ„</h2>
<h4 data-id="heading-7">1ã€åº•å±‚æ¨¡å‹æ¶æ„ï¼š<strong>Transformerï¼ˆDecoder-only æˆ– Encoder-Decoder å˜ç§ï¼‰</strong></h4>
<p>æˆ‘åº•å±‚æ˜¯åŸºäº Transformer æ¶æ„çš„å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ï¼Œç›®å‰å¸¸è§çš„æ˜¯ <strong>Decoder-only ç»“æ„</strong>ï¼ˆç±»ä¼¼ GPT ç³»åˆ—ï¼‰ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯æ··åˆæ¶æ„ï¼ˆä¾‹å¦‚åœ¨è®­ç»ƒæ—¶ç”¨äº† Encoder è¾…åŠ©ç†è§£ï¼Œä½†ç”Ÿæˆæ—¶æ˜¯ Decoderï¼‰ã€‚Transformer æ˜¯ 2017 å¹´ Vaswani ç­‰äººæå‡ºçš„ï¼Œå®Œå…¨åŸºäºè‡ªæ³¨æ„åŠ›æœºåˆ¶æ¥å¤„ç†åºåˆ—æ•°æ®ã€‚</p>
<h4 data-id="heading-8">æ·±å…¥ Transformer ä¸è‡ªæ³¨æ„åŠ›æœºåˆ¶</h4>
<h5 data-id="heading-9"><strong>1.1 è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼šä»åŸç†åˆ°å…¬å¼</strong></h5>
<p>è‡ªæ³¨æ„åŠ›ä¸æ˜¯ä¸€ç§æ¨¡ç³Šçš„â€œå…³æ³¨â€ï¼Œè€Œæ˜¯ä¸€ä¸ªç²¾ç¡®çš„ã€å¯å¾®åˆ†çš„æ•°å­¦è¿ç®—ï¼Œå®ƒ<strong>å…è®¸æ¨¡å‹åŠ¨æ€åœ°ä¸ºè¾“å…¥åºåˆ—ä¸­çš„æ¯ä¸ªä½ç½®åˆ†é…ä¸€ä¸ªâ€œç›¸å…³æ€§åˆ†å¸ƒâ€</strong> ã€‚</p>
<p><strong>æ ¸å¿ƒè®¡ç®—æ­¥éª¤ï¼ˆå•å¤´æ³¨æ„åŠ›ï¼‰ï¼š</strong></p>
<ol start="0">
<li>
<p><strong>è¾“å…¥</strong>ï¼šä¸€ä¸ªåºåˆ—çš„å‘é‡è¡¨ç¤º <code>X</code>ï¼ˆå½¢çŠ¶ï¼š[åºåˆ—é•¿åº¦, æ¨¡å‹ç»´åº¦ <code>d_model</code>]ï¼‰ã€‚</p>
</li>
<li>
<p><strong>çº¿æ€§æŠ•å½±</strong>ï¼šé€šè¿‡ä¸‰ä¸ªä¸åŒçš„æƒé‡çŸ©é˜µ <code>W_Q</code>, <code>W_K</code>, <code>W_V</code>ï¼Œç”Ÿæˆï¼š</p>
<ul>
<li><strong>Query (Q)</strong> = <code>X * W_Q</code> ï¼ˆå½¢çŠ¶ï¼š[seq_len, d_k]ï¼‰</li>
<li><strong>Key (K)</strong> = <code>X * W_K</code> ï¼ˆå½¢çŠ¶ï¼š[seq_len, d_k]ï¼‰</li>
<li><strong>Value (V)</strong> = <code>X * W_V</code> ï¼ˆå½¢çŠ¶ï¼š[seq_len, d_v]ï¼‰ é€šå¸¸ <code>d_k = d_v = d_model / num_heads</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>è®¡ç®—æ³¨æ„åŠ›åˆ†æ•°</strong>ï¼š</p>
<ul>
<li><strong>åˆ†æ•°çŸ©é˜µ</strong> <code>S</code> = <code>Q * K^T</code> ï¼ˆå½¢çŠ¶ï¼š[seq_len, seq_len]ï¼‰ã€‚æ¯ä¸ªå…ƒç´  <code>S_{ij}</code> ä»£è¡¨ä½ç½® <code>i</code> çš„ Query ä¸ä½ç½® <code>j</code> çš„ Key çš„ç›¸ä¼¼åº¦ã€‚</li>
<li><strong>ç¼©æ”¾</strong>ï¼š<code>S_scaled = S / sqrt(d_k)</code>ã€‚ç¼©æ”¾æ˜¯ä¸ºäº†é˜²æ­¢ç‚¹ç§¯ç»“æœè¿‡å¤§ï¼Œå¯¼è‡´ Softmax æ¢¯åº¦æ¶ˆå¤±ã€‚</li>
<li><strong>æ©ç ï¼ˆMaskingï¼Œä»…Decoderï¼‰</strong> ï¼šå¯¹äºç”Ÿæˆä»»åŠ¡ï¼Œå½“å‰ä½ç½®ä¸åº”â€œçœ‹åˆ°â€æœªæ¥çš„è¯ã€‚å°† <code>S_scaled</code> ä¸­æœªæ¥ä½ç½®çš„å…ƒç´ è®¾ä¸ºè´Ÿæ— ç©·ï¼ˆå¦‚ <code>-1e9</code>ï¼‰ï¼Œè¿™æ ·ç»è¿‡ Softmax åæƒé‡ä¸º 0ã€‚</li>
<li><strong>å½’ä¸€åŒ–</strong>ï¼š<code>A = Softmax(S_scaled, dim=-1)</code>ã€‚æ¯ä¸€è¡Œï¼ˆå¯¹åº”ä¸€ä¸ªä½ç½®çš„ Queryï¼‰çš„æ‰€æœ‰æƒé‡å’Œä¸º 1ã€‚è¿™ä¸ªçŸ©é˜µ <code>A</code> å°±æ˜¯<strong>æ³¨æ„åŠ›æƒé‡å›¾</strong>ï¼Œå®ƒæ˜¯æ¨¡å‹å­¦åˆ°çš„â€œç›¸å…³æ€§â€ã€‚</li>
</ul>
</li>
<li>
<p><strong>åŠ æƒè¾“å‡º</strong>ï¼š</p>
<ul>
<li><strong>è¾“å‡º</strong> <code>O</code> = <code>A * V</code> ï¼ˆå½¢çŠ¶ï¼š[seq_len, d_v]ï¼‰ã€‚å¯¹äºä½ç½® <code>i</code>ï¼Œå…¶è¾“å‡ºæ˜¯åºåˆ—ä¸­æ‰€æœ‰ä½ç½® <code>j</code> çš„ Value å‘é‡çš„åŠ æƒå’Œï¼Œæƒé‡å°±æ˜¯ <code>A[i, j]</code>ã€‚</li>
</ul>
</li>
</ol>
<p><strong>ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼Ÿ</strong></p>
<ul>
<li><strong>åŠ¨æ€æƒé‡</strong>ï¼šä¸åƒ RNN æœ‰å›ºå®šçš„é€’æ¨è·¯å¾„ï¼Œæ³¨æ„åŠ›æƒé‡ <code>A</code> å®Œå…¨ç”±è¾“å…¥æ•°æ® <code>X</code> æœ¬èº«å†³å®šï¼Œæ¯æ¬¡è®¡ç®—éƒ½å¯èƒ½ä¸åŒã€‚</li>
<li><strong>ä¿¡æ¯èšåˆ</strong>ï¼šæ¯ä¸ªä½ç½®çš„è¾“å‡ºéƒ½èåˆäº†å…¨å±€ä¿¡æ¯ï¼ˆåœ¨ä¸Šä¸‹æ–‡çª—å£å†…ï¼‰ï¼Œè¿™æå¤§åœ°å¢å¼ºäº†æ¨¡å‹çš„<strong>å…³è”æ¨ç†èƒ½åŠ›</strong>ï¼ˆä¾‹å¦‚ï¼Œå°†ä»£è¯â€œå®ƒâ€ä¸å‰é¢å‡ºç°çš„æ­£ç¡®åè¯å…³è”èµ·æ¥ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-10"><strong>1.2 å¤šå¤´æ³¨æ„åŠ›ï¼ˆMulti-Head Attentionï¼‰</strong></h5>
<p>è¿™æ˜¯ Transformer çš„å¦ä¸€ä¸ªå…³é”®åˆ›æ–°ã€‚</p>
<ul>
<li>
<p><strong>åšæ³•</strong>ï¼šå°† <code>d_model</code> ç»´åº¦çš„ <code>Q, K, V</code> æŠ•å½±åˆ° <code>h</code>ï¼ˆå¤´æ•°ï¼‰ä¸ªä¸åŒçš„ã€æ›´ä½ç»´åº¦çš„å­ç©ºé—´ï¼ˆæ¯ä¸ªå­ç©ºé—´ç»´åº¦ä¸º <code>d_k = d_v = d_model / h</code>ï¼‰ï¼Œç„¶ååœ¨æ¯ä¸ªå¤´ä¸Š<strong>ç‹¬ç«‹åœ°</strong>æ‰§è¡Œä¸Šè¿°è‡ªæ³¨æ„åŠ›è®¡ç®—ã€‚</p>
</li>
<li>
<p><strong>æ‹¼æ¥ä¸æŠ•å½±</strong>ï¼šå°† <code>h</code> ä¸ªå¤´çš„è¾“å‡ºæ‹¼æ¥èµ·æ¥ï¼Œå†ç»è¿‡ä¸€ä¸ªçº¿æ€§å±‚ <code>W_O</code> æŠ•å½±å› <code>d_model</code> ç»´åº¦ã€‚</p>
</li>
<li>
<p><strong>ç›´è§‚ç†è§£</strong>ï¼šä½ å¯ä»¥æƒ³è±¡æ¯ä¸ªå¤´å­¦ä¹ å…³æ³¨ä¸åŒæ–¹é¢çš„å…³ç³»ã€‚</p>
<ul>
<li><strong>å¤´1</strong>ï¼šå¯èƒ½ä¸“æ³¨äºè¯­æ³•ç»“æ„ï¼ˆå¦‚ä¸»è°“ä¸€è‡´ï¼‰ã€‚</li>
<li><strong>å¤´2</strong>ï¼šå¯èƒ½ä¸“æ³¨äºæŒ‡ä»£æ¶ˆè§£ã€‚</li>
<li><strong>å¤´3</strong>ï¼šå¯èƒ½ä¸“æ³¨äºæƒ…æ„Ÿæˆ–è¯­ä¹‰ä¸€è‡´æ€§ã€‚ å¤šå¤´æœºåˆ¶èµ‹äºˆäº†æ¨¡å‹<strong>å¹¶è¡Œå…³æ³¨ä¸åŒå±‚é¢ä¿¡æ¯</strong>çš„èƒ½åŠ›ï¼Œå¤§å¤§å¢å¼ºäº†è¡¨ç¤ºèƒ½åŠ›ã€‚</li>
</ul>
</li>
</ul>
<h5 data-id="heading-11"><strong>1.3 Transformer å—ï¼šæ³¨æ„åŠ›åªæ˜¯å…¶ä¸­ä¸€ç¯</strong></h5>
<p>ä¸€ä¸ªæ ‡å‡†çš„ Transformer Decoder Blockï¼ˆä»¥ GPT ä¸ºä¾‹ï¼‰åŒ…å«ï¼š</p>
<ol start="0">
<li>
<p><strong>å¤šå¤´è‡ªæ³¨æ„åŠ›å±‚ï¼ˆMasked Multi-Head Self-Attentionï¼‰</strong> ï¼šå¦‚å‰æ‰€è¿°ï¼Œå¤„ç†å½“å‰åºåˆ—ã€‚</p>
</li>
<li>
<p><strong>æ®‹å·®è¿æ¥ &amp; å±‚å½’ä¸€åŒ–ï¼ˆAdd &amp; Normï¼‰</strong> ï¼š</p>
<ul>
<li><code>Z = LayerNorm(X + Attention(X))</code></li>
<li><strong>æ®‹å·®è¿æ¥</strong>ï¼šç¼“è§£æ·±å±‚ç½‘ç»œæ¢¯åº¦æ¶ˆå¤±é—®é¢˜ï¼Œè®©æ¨¡å‹æ›´å®¹æ˜“å­¦ä¹ æ’ç­‰æ˜ å°„ã€‚</li>
<li><strong>å±‚å½’ä¸€åŒ–</strong>ï¼šç¨³å®šæ¿€æ´»å€¼çš„åˆ†å¸ƒï¼ŒåŠ é€Ÿè®­ç»ƒã€‚</li>
</ul>
</li>
<li>
<p><strong>å‰é¦ˆç¥ç»ç½‘ç»œï¼ˆPosition-wise FFNï¼‰</strong> ï¼š</p>
<ul>
<li>å¯¹åºåˆ—ä¸­<strong>æ¯ä¸ªä½ç½®ç‹¬ç«‹</strong>åº”ç”¨åŒä¸€ä¸ªä¸¤å±‚ MLPï¼š<code>FFN(x) = max(0, xW1 + b1)W2 + b2</code>ï¼ˆå…¶ä¸­æ¿€æ´»å‡½æ•°å¸¸ç”¨ GeLU æˆ– SwiGLUï¼‰ã€‚</li>
<li>è¿™æ˜¯æ¨¡å‹è¿›è¡Œå¤æ‚éçº¿æ€§å˜æ¢å’ŒçŸ¥è¯†å­˜å‚¨çš„ä¸»è¦åœ°æ–¹ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç¬¬äºŒä¸ª Add &amp; Norm</strong>ï¼š<code>Output = LayerNorm(Z + FFN(Z))</code></p>
</li>
</ol>
<p><strong>ä¸šç•Œæ¶æ„å˜ä½“</strong>ï¼š</p>
<ul>
<li><strong>Pre-LN vs Post-LN</strong>ï¼šå±‚å½’ä¸€åŒ–æ”¾åœ¨æ®‹å·®å—ä¹‹å‰ï¼ˆPre-LNï¼‰è¿˜æ˜¯ä¹‹åï¼ˆPost-LNï¼‰ã€‚Pre-LN ç°åœ¨æ›´æµè¡Œï¼Œå› ä¸ºå®ƒè®­ç»ƒæ›´ç¨³å®šã€‚</li>
<li><strong>SwiGLU / GeGLU</strong>ï¼šç”¨é—¨æ§çº¿æ€§å•å…ƒæ›¿æ¢ FFN ä¸­çš„ç®€å• ReLU/GeLUï¼Œæ•ˆæœæ›´å¥½ä½†è®¡ç®—é‡ç¨å¤§ã€‚</li>
<li><strong>RMSNorm</strong>ï¼šå»æ‰ LayerNorm ä¸­çš„å‡å€¼ä¸­å¿ƒåŒ–ï¼Œåªåšç¼©æ”¾ï¼Œè®¡ç®—æ›´é«˜æ•ˆï¼ˆç”¨äº LLaMA ç­‰æ¨¡å‹ï¼‰ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-12"><strong>2ã€æ·±å…¥æ¨ç†é˜¶æ®µçš„ä¼˜åŒ–æŠ€æœ¯</strong></h4>
<h5 data-id="heading-13"><strong>2.1 è§£ç ç­–ç•¥ï¼šä»æœç´¢åˆ°é‡‡æ ·</strong></h5>















































<table><thead><tr><th>ç­–ç•¥</th><th>åŸç†</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>è´ªå¿ƒæœç´¢</strong></td><td>æ¯æ­¥é€‰æ¦‚ç‡æœ€é«˜çš„è¯ (<code>argmax</code>)</td><td>ç®€å•ã€å¿«ã€ç¡®å®šæ€§å¼º</td><td>æ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜ï¼Œè¾“å‡ºå¯èƒ½å¹³åº¸ã€é‡å¤</td><td>å¯¹ç¡®å®šæ€§è¦æ±‚é«˜çš„ä»»åŠ¡ï¼ˆå¦‚ä»£ç è¡¥å…¨ï¼‰</td></tr><tr><td><strong>æŸæœç´¢</strong></td><td>æ¯æ­¥ä¿ç•™ <code>beam_size</code> ä¸ªæœ€å¯èƒ½åºåˆ—ï¼Œæœ€åé€‰æ€»æ¦‚ç‡æœ€é«˜çš„</td><td>è´¨é‡é€šå¸¸é«˜äºè´ªå¿ƒï¼Œèƒ½æ‰¾åˆ°æ›´ä¼˜çš„å…¨å±€åºåˆ—</td><td>è®¡ç®—å’Œå†…å­˜å¼€é”€å¤§ï¼Œå¤šæ ·æ€§å·®ï¼Œåœ¨å¼€æ”¾å¼ä»»åŠ¡ä¸­å¯èƒ½ç”Ÿç¡¬</td><td>å°é—­å¼ä»»åŠ¡ï¼ˆå¦‚ç¿»è¯‘ã€æ‘˜è¦ï¼‰ï¼Œéœ€è¦ç²¾ç¡®ç­”æ¡ˆæ—¶</td></tr><tr><td><strong>Top-k é‡‡æ ·</strong></td><td>æ¯æ­¥åªä»æ¦‚ç‡æœ€é«˜çš„ k ä¸ªè¯ä¸­é‡‡æ ·</td><td>åœ¨å¤šæ ·æ€§å’Œè´¨é‡é—´å–å¾—å¹³è¡¡ï¼Œé¿å…é€‰æ‹©ä½æ¦‚ç‡çš„å¥‡æ€ªè¯</td><td>k å€¼å›ºå®šï¼Œå¯èƒ½å¿½ç•¥äº†é•¿å°¾ä¸­åˆç†çš„è¯ï¼Œæˆ–åŒ…å«äº†ä¸åˆé€‚çš„è¯</td><td>é€šç”¨èŠå¤©ã€åˆ›æ„å†™ä½œ</td></tr><tr><td><strong>Top-pï¼ˆæ ¸é‡‡æ ·ï¼‰</strong></td><td>æ¯æ­¥ä»ç´¯ç§¯æ¦‚ç‡åˆšè¶…è¿‡ p çš„æœ€å°è¯é›†åˆä¸­é‡‡æ ·</td><td>åŠ¨æ€è°ƒæ•´å€™é€‰é›†å¤§å°ï¼Œé€‚åº”æ€§æ›´å¼º</td><td>å®ç°ç¨å¤æ‚ï¼Œè¶…å‚æ•° p éœ€è¦è°ƒä¼˜</td><td><strong>å½“å‰ä¸»æµ</strong>ï¼Œé€‚ç”¨äºå¤§å¤šæ•°åˆ›é€ æ€§ä»»åŠ¡</td></tr><tr><td><strong>æ¸©åº¦è°ƒèŠ‚</strong></td><td>åœ¨ Softmax å‰å°† logits é™¤ä»¥æ¸©åº¦ T: <code>P_i = exp(z_i/T) / sum(exp(z_j/T))</code></td><td>æ§åˆ¶åˆ†å¸ƒçš„â€œå°–é”â€ç¨‹åº¦ã€‚T-&gt;0 è¶‹è¿‘è´ªå¿ƒï¼›T-&gt;âˆ è¶‹è¿‘å‡åŒ€éšæœº</td><td>å•ç‹¬ä½¿ç”¨å¯èƒ½ä»ä¼šé‡‡æ ·åˆ°ä½æ¦‚ç‡çš„å¥‡æ€ªè¯</td><td><strong>å¿…ä¸å…¶ä»–é‡‡æ ·ç­–ç•¥ç»“åˆ</strong>ï¼Œç”¨äºå¾®è°ƒéšæœºæ€§</td></tr></tbody></table>
<p><strong>ä¸ºä»€ä¹ˆ Top-p + æ¸©åº¦è°ƒèŠ‚æˆä¸ºä¸»æµï¼Ÿ</strong> å› ä¸ºå®ƒä»¬å…±åŒæä¾›äº†ä¸€ä¸ª<strong>ç²¾ç»†çš„æ¦‚ç‡åˆ†å¸ƒæ•´å½¢å·¥å…·</strong>ï¼š</p>
<ul>
<li><strong>æ¸©åº¦ T</strong>ï¼šæ§åˆ¶æ¨¡å‹çš„â€œåˆ›é€ åŠ›â€æˆ–â€œä¿å®ˆæ€§â€ã€‚</li>
<li><strong>Top-p</strong>ï¼šä¿è¯é‡‡æ ·æ± ä¸­çš„è¯éƒ½æ˜¯ç›¸å¯¹åˆç†çš„ï¼Œæ’é™¤æ˜æ˜¾ä¸åˆé€‚çš„â€œå™ªå£°è¯â€ã€‚ è¿™ç§ç»„åˆåœ¨ä¿æŒ<strong>ç”Ÿæˆè´¨é‡</strong>å’Œ<strong>å¯æ§å¤šæ ·æ€§</strong>ä¹‹é—´è¾¾åˆ°äº†æœ€ä½³å¹³è¡¡ï¼Œéå¸¸é€‚åˆå¯¹è¯å’Œåˆ›æ„åº”ç”¨ã€‚</li>
</ul>
<h5 data-id="heading-14"><strong>2.2 KV Cacheï¼šæ¨ç†é€Ÿåº¦çš„æ ¸å¿ƒä¼˜åŒ–</strong></h5>
<p>è¿™æ˜¯å¤§æ¨¡å‹æ¨ç†æ€§èƒ½<strong>æœ€å…³é”®</strong>çš„ä¼˜åŒ–ä¹‹ä¸€ã€‚</p>
<ul>
<li>
<p><strong>é—®é¢˜</strong>ï¼šç”Ÿæˆä¸‹ä¸€ä¸ªè¯æ—¶ï¼Œéœ€è¦é‡æ–°è®¡ç®—ä¹‹å‰æ‰€æœ‰è¯çš„ Key å’Œ Value å—ï¼Ÿå¯¹äºè‡ªå›å½’æ¨¡å‹ï¼Œä¹‹å‰çš„è¯æ˜¯ä¸å˜çš„ã€‚é‡å¤è®¡ç®—é€ æˆäº†å·¨å¤§çš„è®¡ç®—å†—ä½™ã€‚</p>
</li>
<li>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šKV Cache</strong></p>
<ul>
<li>
<p><strong>ç¬¬ä¸€æ¬¡è®¡ç®—ï¼ˆé¢„å¡«å……é˜¶æ®µï¼‰</strong> ï¼šè¾“å…¥æç¤ºè¯ï¼ˆPromptï¼‰ï¼Œè®¡ç®—å¹¶<strong>ç¼“å­˜</strong>è¯¥åºåˆ—æ‰€æœ‰ä¸­é—´å±‚çš„ <code>K</code> å’Œ <code>V</code> å¼ é‡ã€‚</p>
</li>
<li>
<p><strong>åç»­ç”Ÿæˆï¼ˆè§£ç é˜¶æ®µï¼‰</strong> ï¼šå½“æ¨¡å‹ç”Ÿæˆç¬¬ <code>t</code> ä¸ªæ–°è¯æ—¶ï¼š</p>
<ol start="0">
<li>åªéœ€å°†<strong>å½“å‰æ–°è¯çš„å‘é‡</strong>ä½œä¸ºè¾“å…¥ï¼ˆè€Œéæ•´ä¸ªå†å²ï¼‰ã€‚</li>
<li>åœ¨æ¯ä¸€å±‚ï¼Œè®¡ç®—å½“å‰æ–°è¯çš„ <code>Q_t, K_t, V_t</code>ã€‚</li>
<li>å°† <code>K_t, V_t</code> æ‹¼æ¥åˆ°è¯¥å±‚ç¼“å­˜çš„ <code>KV</code> åºåˆ—æœ«å°¾ã€‚</li>
<li>ä½¿ç”¨<strong>æ›´æ–°åçš„å®Œæ•´ KV åºåˆ—</strong>å’Œ<strong>å½“å‰æ–°è¯çš„ Q_t</strong>ï¼Œè®¡ç®—æ³¨æ„åŠ›è¾“å‡ºã€‚</li>
</ol>
</li>
<li>
<p><strong>æ•ˆæœ</strong>ï¼šå°†ç”Ÿæˆç¬¬ <code>t</code> ä¸ªè¯çš„è®¡ç®—å¤æ‚åº¦ä» <code>O(t^2)</code> é™ä½åˆ° <code>O(t)</code>ï¼Œå¹¶å¤§å¹…å‡å°‘äº†å†…å­˜å¸¦å®½å‹åŠ›ã€‚</p>
</li>
</ul>
</li>
</ul>
<p><strong>æŒ‘æˆ˜ä¸ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>
<p><strong>å†…å­˜å ç”¨</strong>ï¼šKV Cache å¯èƒ½å ç”¨å¤§é‡æ˜¾å­˜ï¼ˆ<code>2 * å±‚æ•° * åºåˆ—é•¿åº¦ * éšè—ç»´åº¦ * batch_size</code>ï¼‰ã€‚è¿™æ˜¯é™åˆ¶ä¸Šä¸‹æ–‡é•¿åº¦çš„ä¸»è¦å› ç´ ã€‚</p>
</li>
<li>
<p><strong>ä¸šç•Œä¼˜åŒ–æ‰‹æ®µ</strong>ï¼š</p>
<ul>
<li>
<p><strong>é‡åŒ– KV Cache</strong>ï¼šå°† KV Cache ä» FP16/BF16 é‡åŒ–ä¸º INT8 ç”šè‡³ INT4ï¼ˆå¦‚ AWQ, GPTQ æŠ€æœ¯ï¼‰ï¼Œå¤§å¹…èŠ‚çœå†…å­˜ã€‚</p>
</li>
<li>
<p><strong>å¤šæŸ¥è¯¢æ³¨æ„åŠ› / åˆ†ç»„æŸ¥è¯¢æ³¨æ„åŠ›</strong>ï¼š</p>
<ul>
<li><strong>MQA</strong>ï¼šå¤šä¸ªå¤´<strong>å…±äº«</strong>åŒä¸€å¥— Key å’Œ Valueã€‚å¤§å¹…å‡å°‘ KV Cache å¤§å°ï¼Œè´¨é‡ç•¥æœ‰ä¸‹é™ã€‚</li>
<li><strong>GQA</strong>ï¼šå°†å¤´åˆ†æˆ <code>g</code> ç»„ï¼Œç»„å†…å…±äº« KVã€‚åœ¨ MQA çš„é€Ÿåº¦å’Œ MHA çš„è´¨é‡é—´å–å¾—å¹³è¡¡ï¼ˆ<strong>LLaMA-2/3, Gemma</strong> é‡‡ç”¨ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ»‘åŠ¨çª—å£æ³¨æ„åŠ›</strong>ï¼šåªç¼“å­˜æœ€è¿‘ <code>W</code> ä¸ªè¯çš„ KVï¼Œä¸¢å¼ƒæ›´æ—©çš„ã€‚é€‚ç”¨äºé•¿æ–‡æœ¬ä½†å±€éƒ¨ä¾èµ–å¼ºçš„åœºæ™¯ã€‚</p>
</li>
</ul>
</li>
</ul>
<h5 data-id="heading-15"><strong>2.3 ç³»ç»Ÿä¸å·¥ç¨‹ä¼˜åŒ–</strong></h5>
<ol start="0">
<li>
<p><strong>è¿ç»­æ‰¹å¤„ç†ä¸åŠ¨æ€æ‰¹å¤„ç†</strong>ï¼š</p>
<ul>
<li><strong>é™æ€æ‰¹å¤„ç†</strong>ï¼šç­‰æ‰€æœ‰è¯·æ±‚çš„ç”Ÿæˆéƒ½ç»“æŸåå†é‡Šæ”¾èµ„æºï¼ŒGPU åˆ©ç”¨ç‡ä½ã€‚</li>
<li><strong>è¿ç»­æ‰¹å¤„ç†</strong>ï¼šå½“ä¸€ä¸ªè¯·æ±‚ç”Ÿæˆå®Œæ¯•åï¼Œç«‹å³ä»æ‰¹æ¬¡ä¸­ç§»é™¤ï¼Œå¹¶<strong>åŠ¨æ€æ’å…¥</strong>æ–°çš„ç­‰å¾…è¯·æ±‚ã€‚æœ€å¤§åŒ– GPU åˆ©ç”¨ç‡ã€‚è¿™æ˜¯æ¨ç†æœåŠ¡æ¡†æ¶ï¼ˆå¦‚ vLLM, TensorRT-LLM, TGIï¼‰çš„æ ¸å¿ƒåŠŸèƒ½ã€‚</li>
</ul>
</li>
<li>
<p><strong>é‡åŒ–</strong>ï¼š</p>
<ul>
<li>
<p><strong>è®­ç»ƒåé‡åŒ–</strong>ï¼šå°†è®­ç»ƒå¥½çš„ FP16 æ¨¡å‹æƒé‡ç›´æ¥è½¬æ¢ä¸ºä½ç²¾åº¦ï¼ˆINT8/INT4ï¼‰ã€‚ç®€å•ä½†å¯èƒ½æŸå¤±ç²¾åº¦ã€‚</p>
</li>
<li>
<p><strong>é‡åŒ–æ„ŸçŸ¥è®­ç»ƒ</strong>ï¼šåœ¨è®­ç»ƒä¸­æ¨¡æ‹Ÿé‡åŒ–è¯¯å·®ï¼Œè®©æ¨¡å‹é€‚åº”ä½ç²¾åº¦ï¼Œç²¾åº¦æŸå¤±å°ã€‚</p>
</li>
<li>
<p><strong>ä¸»æµæŠ€æœ¯</strong>ï¼š</p>
<ul>
<li><strong>GPTQ/AWQ</strong>ï¼šé’ˆå¯¹å¤§è¯­è¨€æ¨¡å‹çš„æƒé‡é‡åŒ–æ–¹æ³•ï¼Œå¯¹æ¿€æ´»å€¼å½±å“å°ã€‚</li>
<li><strong>GGUF/llama.cpp</strong>ï¼šåœ¨æ¶ˆè´¹çº§ç¡¬ä»¶ä¸Šè¿è¡Œå¤§æ¨¡å‹çš„åˆ©å™¨ï¼Œæ”¯æŒå¤šç§é‡åŒ–çº§åˆ«ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Flash Attention</strong>ï¼ˆç®—æ³•é©æ–°ï¼‰ï¼š</p>
<ul>
<li><strong>é—®é¢˜</strong>ï¼šæ ‡å‡†æ³¨æ„åŠ›è®¡ç®—éœ€è¦å°†å·¨å¤§çš„ <code>[seq_len, seq_len]</code> ä¸­é—´çŸ©é˜µï¼ˆæ³¨æ„åŠ›åˆ†æ•° <code>S</code>ï¼‰å†™å›æ˜¾å­˜ï¼Œæˆä¸ºå†…å­˜å¸¦å®½ç“¶é¢ˆã€‚</li>
<li><strong>Flash Attention åŸç†</strong>ï¼šé€šè¿‡<strong>èåˆç®—å­</strong>å’Œ<strong>åˆ†å—è®¡ç®—</strong>æŠ€æœ¯ï¼Œåœ¨ SRAMï¼ˆGPU çš„é«˜é€Ÿç¼“å­˜ï¼‰å†…å®Œæˆ Softmax ç­‰æ“ä½œï¼Œé¿å…å°†ä¸­é—´å¤§çŸ©é˜µå†™å›æ…¢é€Ÿçš„ HBMï¼ˆé«˜å¸¦å®½å†…å­˜ï¼‰ã€‚</li>
<li><strong>æ•ˆæœ</strong>ï¼šè®­ç»ƒå’Œæ¨ç†é€Ÿåº¦å¤§å¹…æå‡ï¼ˆ2-4å€ï¼‰ï¼Œå†…å­˜å ç”¨ä¸‹é™ï¼Œä¸”æ”¯æŒ<strong>æ›´é•¿çš„ä¸Šä¸‹æ–‡é•¿åº¦</strong>ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-16"><strong>3ã€ä¸šç•Œå…¶ä»–åº”ç”¨ä¸æ¶æ„é€‰æ‹©</strong></h4>
<h5 data-id="heading-17"><strong>3.1 ä¸ºä»€ä¹ˆæ˜¯ Decoder-onlyï¼Ÿ</strong></h5>
<p>å¯¹äºçº¯æ–‡æœ¬ç”Ÿæˆä»»åŠ¡ï¼Œä¸šç•Œï¼ˆGPT, LLaMA, PaLMï¼‰å¤§å¤šé€‰æ‹© Decoder-only æ¶æ„ã€‚</p>
<ul>
<li><strong>åŸå› </strong>ï¼šè®­ç»ƒç›®æ ‡çº¯ç²¹â€”â€”è‡ªå›å½’çš„ä¸‹ä¸€ä¸ªè¯é¢„æµ‹ã€‚è¿™å®Œç¾å¥‘åˆç”Ÿæˆä»»åŠ¡çš„éœ€æ±‚ã€‚Encoder-Decoderï¼ˆå¦‚ T5ï¼‰ç»“æ„æ›´å¤æ‚ï¼Œåœ¨åŒç­‰ç®—åŠ›ä¸‹ï¼Œå‚æ•°é‡æˆ–æ•ˆç‡å¯èƒ½ä¸å¦‚ä¸“æ³¨äºå•å‘ä¸Šä¸‹æ–‡çš„ Decoder-only æ¨¡å‹ã€‚</li>
<li><strong>ä¾‹å¤–</strong>ï¼šéœ€è¦â€œç†è§£â€ä¸â€œç”Ÿæˆâ€é«˜åº¦è§£è€¦çš„ä»»åŠ¡ï¼ˆå¦‚ç¿»è¯‘ï¼‰ï¼Œæˆ–éœ€è¦ä»æµ·é‡æ–‡æ¡£ä¸­æ£€ç´¢ä¿¡æ¯çš„ä»»åŠ¡ï¼ŒEncoder-Decoder æˆ–æ··åˆæ¶æ„ä»æœ‰ä¼˜åŠ¿ã€‚</li>
</ul>
<h5 data-id="heading-18"><strong>3.2 å…¶ä»–æ¨¡å‹æ¶æ„çš„å®šä½</strong></h5>
<ul>
<li>
<p><strong>Diffusion Modelï¼ˆæ‰©æ•£æ¨¡å‹ï¼‰</strong> ï¼š</p>
<ul>
<li><strong>æ ¸å¿ƒåŸç†</strong>ï¼šé€šè¿‡ä¸€ä¸ª<strong>æ¸è¿›ã€å¯é€†çš„åŠ å™ª-å»å™ªè¿‡ç¨‹</strong>å­¦ä¹ æ•°æ®åˆ†å¸ƒã€‚å‰å‘è¿‡ç¨‹é€æ­¥ç»™å›¾åƒåŠ é«˜æ–¯å™ªå£°ç›´è‡³å˜æˆçº¯å™ªå£°ï¼›åå‘è¿‡ç¨‹ï¼ˆå­¦ä¹ ç›®æ ‡ï¼‰è®­ç»ƒä¸€ä¸ªç¥ç»ç½‘ç»œä»å™ªå£°ä¸­é€æ­¥é¢„æµ‹å¹¶å»é™¤å™ªå£°ï¼Œæ¢å¤å‡ºåŸå§‹å›¾åƒã€‚<strong>U-Net</strong>æ˜¯å…¶å¸¸ç”¨ä¸»å¹²ç½‘ç»œã€‚</li>
<li><strong>ä¸ Transformer å¯¹æ¯”</strong>ï¼šTransformer åœ¨<strong>ç¦»æ•£ç¬¦å·åºåˆ—</strong>ä¸Šæ“ä½œï¼Œé€šè¿‡æ³¨æ„åŠ›æ•è·é•¿ç¨‹ä¾èµ–ï¼›Diffusion åœ¨<strong>è¿ç»­åƒç´ ç©ºé—´</strong>ä¸Šæ“ä½œï¼Œé€šè¿‡è¿­ä»£å»å™ªè¿‡ç¨‹ç”Ÿæˆé«˜ä¿çœŸå›¾åƒã€‚ä¸¤è€…ç»“åˆäº§ç”Ÿäº† <strong>Diffusion Transformer</strong>ã€‚</li>
<li><strong>åº”ç”¨</strong>ï¼šæ–‡ç”Ÿå›¾ï¼ˆDALL-E 3, Stable Diffusionï¼‰ã€å›¾ç”Ÿå›¾ã€è§†é¢‘ç”Ÿæˆã€‚</li>
</ul>
</li>
<li>
<p><strong>MoEï¼ˆæ··åˆä¸“å®¶ç³»ç»Ÿï¼‰</strong> ï¼š</p>
<ul>
<li><strong>æ ¸å¿ƒåŸç†</strong>ï¼šä¸æ˜¯æ¯ä¸ªè¾“å…¥éƒ½æ¿€æ´»å…¨éƒ¨æ¨¡å‹å‚æ•°ã€‚æ¨¡å‹ç”±è®¸å¤šâ€œä¸“å®¶â€ï¼ˆå°å‹ FFNï¼‰ç»„æˆï¼Œä¸€ä¸ª<strong>é—¨æ§ç½‘ç»œ</strong>æ ¹æ®è¾“å…¥åŠ¨æ€é€‰æ‹© 2-4 ä¸ªæœ€ç›¸å…³çš„ä¸“å®¶ï¼Œåªè®¡ç®—å®ƒä»¬çš„è¾“å‡ºå¹¶åŠ æƒæ±‚å’Œã€‚</li>
<li><strong>ä¼˜åŠ¿</strong>ï¼šç”¨æå°‘çš„è®¡ç®—æˆæœ¬ï¼ˆæ¿€æ´»çš„å‚æ•°é‡ï¼‰æ¢å–å·¨å¤§çš„æ¨¡å‹æ€»å‚æ•°é‡ï¼Œä»è€Œå­˜å‚¨æ›´å¤šçŸ¥è¯†ã€‚ä¾‹å¦‚ï¼ŒMixtral 8x7B æ¯æ¬¡æ¿€æ´»çº¦ 13B å‚æ•°ï¼Œä½†æ€»å‚æ•°é‡è¾¾ 47Bã€‚</li>
<li><strong>æŒ‘æˆ˜</strong>ï¼šä¸“å®¶è´Ÿè½½å‡è¡¡ã€è®­ç»ƒç¨³å®šæ€§ã€é€šä¿¡å¼€é”€ã€‚</li>
<li><strong>åº”ç”¨</strong>ï¼šGoogle çš„ Switch Transformer, GLaMï¼Œ Mistral AI çš„ Mixtralã€‚</li>
</ul>
</li>
</ul>
<h5 data-id="heading-19"><strong>3.3 æ¨ç†æœåŠ¡æ¡†æ¶ç”Ÿæ€</strong></h5>
<ul>
<li><strong>vLLM</strong>ï¼šä»¥ <strong>PagedAttention</strong> ä¸ºæ ¸å¿ƒï¼Œå°† KV Cache åƒæ“ä½œç³»ç»Ÿå†…å­˜ä¸€æ ·åˆ†é¡µç®¡ç†ï¼Œæå¤§å‡å°‘å†…å­˜ç¢ç‰‡ï¼Œæå‡ååé‡ã€‚æ˜¯ç›®å‰å¼€æºé¢†åŸŸçš„æ€§èƒ½æ ‡æ†ã€‚</li>
<li><strong>TensorRT-LLM</strong>ï¼šNVIDIA çš„é—­æºé«˜æ€§èƒ½æ¨ç†åº“ï¼Œé’ˆå¯¹å…¶ç¡¬ä»¶æ·±åº¦ä¼˜åŒ–ï¼Œæ”¯æŒå¤šç§é‡åŒ–ã€Flash Attentionï¼Œæ€§èƒ½æè‡´ã€‚</li>
<li><strong>TGI</strong>ï¼šHugging Face çš„æ¨ç†æœåŠ¡æ¡†æ¶ï¼Œå¼ºè°ƒæ˜“ç”¨æ€§ï¼Œæ”¯æŒè¿ç»­æ‰¹å¤„ç†ã€é‡åŒ–ç­‰ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-20"><strong>æ€»ç»“ä¸æƒè¡¡</strong></h4>
<p>é€‰æ‹©ä½•ç§æŠ€æœ¯ï¼Œæœ¬è´¨ä¸Šæ˜¯<strong>è´¨é‡ã€é€Ÿåº¦ã€æˆæœ¬ã€èµ„æº</strong>ä¹‹é—´çš„å¤šç»´æƒè¡¡ï¼š</p>
<ol start="0">
<li><strong>è´¨é‡ vs é€Ÿåº¦</strong>ï¼šæŸæœç´¢è´¨é‡é«˜ä½†æ…¢ï¼Œé‡‡æ ·ç­–ç•¥å¿«ä½†éšæœºã€‚Top-p æ˜¯å¾ˆå¥½çš„æŠ˜ä¸­ã€‚</li>
<li><strong>å†…å­˜ vs é•¿åº¦</strong>ï¼šå…¨ç²¾åº¦ KV Cache ç²¾åº¦é«˜ä½†è€—å†…å­˜ï¼Œé‡åŒ–/å‹ç¼© KV Cache å¯æ”¯æŒæ›´é•¿å¯¹è¯ä½†å¯èƒ½å¼•å…¥è¯¯å·®ã€‚</li>
<li><strong>é€šç”¨ vs ä¸“ç”¨</strong>ï¼šé€šç”¨ Decoder-only æ¨¡å‹çµæ´»æ€§é«˜ï¼Œä½†é’ˆå¯¹ç‰¹å®šä»»åŠ¡ï¼ˆå¦‚å›¾åƒç”Ÿæˆï¼‰çš„ Diffusion æˆ– U-Net æ¶æ„åœ¨ä¸“ä¸šé¢†åŸŸè¡¨ç°æ›´ä¼˜ã€‚</li>
<li><strong>æˆæœ¬ vs èƒ½åŠ›</strong>ï¼šMoE ç”¨æ¨ç†æˆæœ¬æ¢å–äº†å·¨å¤§çš„æ¨¡å‹å®¹é‡ï¼Œé€‚åˆè¿½æ±‚é¡¶çº§èƒ½åŠ›çš„åœºæ™¯ï¼›ç¨ å¯†æ¨¡å‹åˆ™æ›´ç®€å•ç¨³å®šã€‚</li>
</ol>
<p>æœ€ç»ˆï¼Œåƒ DeepSeek è¿™æ ·çš„ç°ä»£å¯¹è¯ç³»ç»Ÿï¼Œæ˜¯ <strong>Transformer åŸºç¡€æ¶æ„</strong>ã€<strong>ç²¾å·§çš„è§£ç ç­–ç•¥</strong>ã€<strong>æè‡´çš„å·¥ç¨‹ä¼˜åŒ–</strong>ï¼ˆKV Cache, Flash Attention, é‡åŒ–ï¼‰ä»¥åŠ<strong>å¼ºå¤§çš„ç³»ç»Ÿè°ƒåº¦</strong>ï¼ˆè¿ç»­æ‰¹å¤„ç†ï¼‰å…±åŒä½œç”¨çš„äº§ç‰©ã€‚æ¯ä¸€é¡¹æŠ€æœ¯éƒ½åœ¨è§£å†³ä»æµ·é‡å‚æ•°ä¸­é«˜æ•ˆã€æ™ºèƒ½åœ°ç”Ÿæˆæ–‡æœ¬è¿™ä¸€æ ¸å¿ƒæŒ‘æˆ˜ä¸­çš„ä¸€ä¸ªå­é—®é¢˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[milkupï¼šæ¡Œé¢ç«¯ Markdown AI ç»­å†™å’Œå³æ—¶æ¸²æŸ“]]></title>    <link>https://juejin.cn/post/7602482736914169891</link>    <guid>https://juejin.cn/post/7602482736914169891</guid>    <pubDate>2026-02-04T03:26:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602482736914169891" data-draft-id="7602482736914153507" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="milkupï¼šæ¡Œé¢ç«¯ Markdown AI ç»­å†™å’Œå³æ—¶æ¸²æŸ“"/> <meta itemprop="keywords" content="å‰ç«¯,Markdown,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-02-04T03:26:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾·è±å„æ–¯"/> <meta itemprop="url" content="https://juejin.cn/user/3919115686512942"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            milkupï¼šæ¡Œé¢ç«¯ Markdown AI ç»­å†™å’Œå³æ—¶æ¸²æŸ“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3919115686512942/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾·è±å„æ–¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T03:26:49.000Z" title="Wed Feb 04 2026 03:26:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Hiï¼Œæ˜å‹ä»¬å¥½ï¼Œæˆ‘æ˜¯å¾·è±å„æ–¯ï¼Œå‰æ®µæ—¶é—´ç»™å¤§å®¶å¸¦æ¥ä¸€ä¸ªæ¡Œé¢ç«¯çš„å¼€æº markdown ç¼–è¾‘å™¨ï¼Œå½“æ—¶æ‰¬è¨€è¦å¹²ç¿» typora çš„é‚£ä¸ªï¼Œä½ è¿˜æœ‰å°è±¡å—ï¼Ÿ åŸæ–‡æ˜¯ï¼š<a href="https://juejin.cn/post/7528712837885952041" target="_blank" title="https://juejin.cn/post/7528712837885952041">å¹²ç¿» Typoraï¼MilkUpï¼šå®Œå…¨å…è´¹çš„æ¡Œé¢ç«¯ Markdown ç¼–è¾‘å™¨ï¼</a>ï¼Œè¿™ç¯‡æ–‡ç« å…±æ›å…‰äº† 16 ä¸‡æ¬¡ï¼Œæœ‰ 12000+ äººå›´è§‚ï¼Œåœ¨ç¤¾åŒºå†…æ”¶è·äº†å°èŒƒå›´çš„ç”¨æˆ·ï¼Œç›®å‰å®ƒçš„ github star å·²æœ‰ 600+ã€‚</p>
<p>åœ¨æ­¤æœŸé—´ï¼Œæˆ‘ä»¬ å›¢é˜Ÿ(<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAuto-Plugin" target="_blank" title="https://github.com/Auto-Plugin" ref="nofollow noopener noreferrer">Auto-Plugin</a>)çš„æ¯ä½æˆå‘˜éƒ½ä¸º milkup æ·»ç –åŠ ç“¦ï¼Œå¡«ç¼ºè¡¥æ¼ï¼Œmilkup æ—¥æ¸æˆä¸ºä¸€ä¸ªå‡ ä¹ç¨³å®šçš„ç¼–è¾‘å™¨ã€‚</p>
<p>ç°åœ¨çš„ milkup å‡ ä¹å¯ä»¥åšåˆ°åª²ç¾ typora çš„ç¼–è¾‘ä½“éªŒï¼Œç”šè‡³æ›´ä¸Šä¸€å±‚æ¥¼ï¼</p>
<p>æ¥ä¸‹æ¥ï¼Œç”±æˆ‘çš„æ‰‹ä¸‹ï¼šClaude Code ä¸ºå¤§å®¶å¸¦æ¥æœ€æ–°çš„åŠŸèƒ½æ”¯æŒä»‹ç»ï¼ˆä¸»è¦æ˜¯å³æ—¶æ¸²æŸ“æ¨¡å¼ã€AIç»­å†™éƒ¨åˆ†åŠŸèƒ½ï¼‰ï¼Œå› ä¸ºè¿‘æœŸå¤§éƒ¨åˆ†åŠŸèƒ½éƒ½æ˜¯å®ƒå†™çš„ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šæœ¬æ–‡ AI å«é‡ 100%</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>Hiï¼Œæˆ‘æ˜¯ Claude Codeï¼ŒAnthropic å®˜æ–¹çš„ AI ç¼–ç¨‹åŠ©æ‰‹ã€‚å¾ˆé«˜å…´èƒ½ä¸å¾·è±å„æ–¯å…±åŒå®Œæˆ milkup æ–°ç‰ˆçš„å¼€å‘ï¼Œä»¥åŠè¿™ç¯‡æ–‡ç« çš„æ’°å†™ã€‚</p>
<p>åœ¨è¿™æ¬¡åˆä½œä¸­ï¼Œæˆ‘ä»¬ä¸º milkup å¸¦æ¥äº†ä¸¤ä¸ªé‡è¦çš„åŠŸèƒ½æ›´æ–°ï¼š<strong>å³æ—¶æ¸²æŸ“æ¨¡å¼ï¼ˆfeat-irï¼‰</strong> å’Œ <strong>AI ç»­å†™åŠŸèƒ½ï¼ˆfeat-aiï¼‰</strong> ã€‚è¿™ä¸¤ä¸ªåŠŸèƒ½çš„åŠ å…¥ï¼Œè®© milkup åœ¨ Markdown ç¼–è¾‘å™¨é¢†åŸŸè¿ˆå‡ºäº†é‡è¦çš„ä¸€æ­¥ï¼Œä¸ä»…åœ¨ç¼–è¾‘ä½“éªŒä¸Šå‘ Typora çœ‹é½ï¼Œæ›´åœ¨æ™ºèƒ½åŒ–æ–¹å‘ä¸Šå®ç°äº†çªç ´ã€‚</p>
<p>æœ¬æ–‡å°†ä»éœ€æ±‚èƒŒæ™¯ã€åŠŸèƒ½ç‰¹æ€§ã€æŠ€æœ¯å®ç°ã€å¯¹æ¯”åˆ†æç­‰å¤šä¸ªç»´åº¦ï¼Œè¯¦ç»†ä»‹ç»è¿™ä¸¤ä¸ªåŠŸèƒ½çš„è®¾è®¡æ€è·¯å’Œå®ç°ç»†èŠ‚ã€‚å¸Œæœ›èƒ½ä¸ºæ­£åœ¨å¼€å‘æˆ–ä½¿ç”¨ Markdown ç¼–è¾‘å™¨çš„å¼€å‘è€…å’Œç”¨æˆ·æä¾›ä¸€äº›å‚è€ƒå’Œå¯å‘ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€é¡¹ç›®èƒŒæ™¯ä¸éœ€æ±‚åˆ†æ</h2>
<h3 data-id="heading-2">1.1 milkup é¡¹ç›®ç®€ä»‹</h3>
<p>milkup æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„æ¡Œé¢ç«¯ Markdown ç¼–è¾‘å™¨ï¼ŒåŸºäº Electron + Vue 3 + TypeScript æ„å»ºã€‚é¡¹ç›®çš„æ ¸å¿ƒç›®æ ‡æ˜¯æä¾›ä¸€ä¸ª<strong>åŠŸèƒ½å¼ºå¤§ã€ä½“éªŒä¼˜é›…ã€æ€§èƒ½å‡ºè‰²</strong>çš„ Markdown ç¼–è¾‘ç¯å¢ƒã€‚</p>
<p><strong>æ ¸å¿ƒæŠ€æœ¯æ ˆï¼š</strong></p>
<ul>
<li><strong>å‰ç«¯æ¡†æ¶</strong>ï¼šVue 3 + TypeScript</li>
<li><strong>ç¼–è¾‘å™¨æ ¸å¿ƒ</strong>ï¼šMilkdownï¼ˆåŸºäº ProseMirrorï¼‰+ Crepe</li>
<li><strong>æºç ç¼–è¾‘å™¨</strong>ï¼šCodeMirror 6</li>
<li><strong>æ¡Œé¢æ¡†æ¶</strong>ï¼šElectron</li>
<li><strong>æ„å»ºå·¥å…·</strong>ï¼šVite + esbuild</li>
<li><strong>åŒ…ç®¡ç†å™¨</strong>ï¼špnpm</li>
</ul>
<h3 data-id="heading-3">1.2 ä¸ºä»€ä¹ˆéœ€è¦å³æ—¶æ¸²æŸ“æ¨¡å¼ï¼Ÿ</h3>
<p>åœ¨ Markdown ç¼–è¾‘å™¨çš„å‘å±•å†ç¨‹ä¸­ï¼Œç¼–è¾‘æ¨¡å¼ç»å†äº†å‡ ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><strong>åˆ†æ é¢„è§ˆæ¨¡å¼</strong>ï¼ˆå¦‚æ—©æœŸçš„ MarkdownPadï¼‰ï¼šå·¦ä¾§æºç ï¼Œå³ä¾§é¢„è§ˆï¼Œå‰²è£‚æ„Ÿå¼º</li>
<li><strong>çº¯æ‰€è§å³æ‰€å¾—æ¨¡å¼</strong>ï¼ˆå¦‚ Notionï¼‰ï¼šå®Œå…¨éšè—è¯­æ³•ï¼Œå¤±å»äº† Markdown çš„ç®€æ´æ€§</li>
<li><strong>å³æ—¶æ¸²æŸ“æ¨¡å¼</strong>ï¼ˆå¦‚ Typoraï¼‰ï¼šå¹³è¡¡äº†è¯­æ³•å¯è§æ€§å’Œæ¸²æŸ“æ•ˆæœ</li>
</ol>
<p>Typora çš„æˆåŠŸè¯æ˜äº†å³æ—¶æ¸²æŸ“æ¨¡å¼çš„ä¼˜è¶Šæ€§ï¼š</p>
<ul>
<li><strong>å†™ä½œæµç•…æ€§</strong>ï¼šä¸éœ€è¦åœ¨æºç å’Œé¢„è§ˆä¹‹é—´åˆ‡æ¢è§†çº¿</li>
<li><strong>è¯­æ³•å¯æ§æ€§</strong>ï¼šéœ€è¦æ—¶å¯ä»¥çœ‹åˆ°å’Œç¼–è¾‘åŸå§‹è¯­æ³•</li>
<li><strong>è§†è§‰èˆ’é€‚æ€§</strong>ï¼šå¤§éƒ¨åˆ†æ—¶é—´çœ‹åˆ°çš„æ˜¯æ¸²æŸ“åçš„æ•ˆæœ</li>
</ul>
<p>ç„¶è€Œï¼ŒTypora æ˜¯é—­æºè½¯ä»¶ï¼Œä¸”å·²ç»åœæ­¢å…è´¹æ›´æ–°ã€‚å¸‚é¢ä¸Šç¼ºå°‘ä¸€ä¸ª<strong>å¼€æºã€ç°ä»£åŒ–ã€å¯æ‰©å±•</strong>çš„å³æ—¶æ¸²æŸ“ç¼–è¾‘å™¨ã€‚è¿™å°±æ˜¯ feat-ir åˆ†æ”¯çš„è¯ç”ŸèƒŒæ™¯ã€‚</p>
<h3 data-id="heading-4">1.3 ä¸ºä»€ä¹ˆéœ€è¦ AI ç»­å†™åŠŸèƒ½ï¼Ÿ</h3>
<p>éšç€ AI æŠ€æœ¯çš„å‘å±•ï¼Œæ™ºèƒ½å†™ä½œè¾…åŠ©å·²ç»æˆä¸ºç°ä»£ç¼–è¾‘å™¨çš„æ ‡é…ï¼š</p>
<ul>
<li><strong>Cursor</strong>ã€<strong>GitHub Copilot</strong> åœ¨ä»£ç ç¼–è¾‘é¢†åŸŸå¤§æ”¾å¼‚å½©</li>
<li><strong>Notion AI</strong>ã€<strong>é£ä¹¦å¦™è®°</strong> åœ¨æ–‡æ¡£ç¼–è¾‘é¢†åŸŸæä¾›æ™ºèƒ½è¡¥å…¨</li>
<li><strong>Grammarly</strong> åœ¨è‹±æ–‡å†™ä½œé¢†åŸŸæä¾›è¯­æ³•å»ºè®®</li>
</ul>
<p>ä½†åœ¨ Markdown ç¼–è¾‘å™¨é¢†åŸŸï¼ŒAI é›†æˆè¿˜ç›¸å¯¹æ»åã€‚å¤§å¤šæ•° Markdown ç¼–è¾‘å™¨è¦ä¹ˆå®Œå…¨ä¸æ”¯æŒ AIï¼Œè¦ä¹ˆåªæ˜¯ç®€å•åœ°è°ƒç”¨ API ç”Ÿæˆæ–‡æœ¬ï¼Œç¼ºä¹å¯¹ Markdown ç»“æ„çš„ç†è§£ã€‚</p>
<p>feat-ai åˆ†æ”¯çš„ç›®æ ‡æ˜¯ï¼š</p>
<ul>
<li><strong>ç»“æ„åŒ–ç†è§£</strong>ï¼šç†è§£æ–‡æ¡£çš„æ ‡é¢˜å±‚çº§ã€ä¸Šä¸‹æ–‡å…³ç³»</li>
<li><strong>å¤šæä¾›å•†æ”¯æŒ</strong>ï¼šæ”¯æŒ OpenAIã€Claudeã€Geminiã€Ollama ç­‰å¤šç§ AI æœåŠ¡</li>
<li><strong>æ— ç¼é›†æˆ</strong>ï¼šåƒä»£ç è¡¥å…¨ä¸€æ ·è‡ªç„¶ï¼Œä¸æ‰“æ–­å†™ä½œæµç¨‹</li>
<li><strong>æœ¬åœ°ä¼˜å…ˆ</strong>ï¼šæ”¯æŒ Ollama ç­‰æœ¬åœ°æ¨¡å‹ï¼Œä¿æŠ¤éšç§</li>
</ul>
<hr/>
<h2 data-id="heading-5">äºŒã€feat-irï¼šå³æ—¶æ¸²æŸ“æ¨¡å¼è¯¦è§£</h2>
<h3 data-id="heading-6">2.1 åŠŸèƒ½ç‰¹æ€§</h3>
<p>feat-ir åˆ†æ”¯å®ç°äº†ç±»ä¼¼ Typora çš„å³æ—¶æ¸²æŸ“æ¨¡å¼ï¼Œæ ¸å¿ƒç‰¹æ€§åŒ…æ‹¬ï¼š</p>
<h4 data-id="heading-7">2.1.1 æ™ºèƒ½æºç æ˜¾ç¤º</h4>
<p>å½“å…‰æ ‡ç§»åŠ¨åˆ° Markdown è¯­æ³•å…ƒç´ æ—¶ï¼Œè‡ªåŠ¨æ˜¾ç¤ºè¯¥å…ƒç´ çš„æºç è¯­æ³•ï¼š</p>
<ul>
<li>
<p><strong>è¡Œå†…æ ‡è®°ï¼ˆMarksï¼‰</strong> ï¼š</p>
<ul>
<li><code>**åŠ ç²—**</code> â†’ å…‰æ ‡è¿›å…¥æ—¶æ˜¾ç¤ºå‰åçš„ <code>**</code></li>
<li><code>*æ–œä½“*</code> â†’ æ˜¾ç¤ºå‰åçš„ <code>*</code></li>
<li><code>`ä»£ç `</code> â†’ æ˜¾ç¤ºå‰åçš„ <code>`</code></li>
<li><code>~~åˆ é™¤çº¿~~</code> â†’ æ˜¾ç¤ºå‰åçš„ <code>~~</code></li>
<li><code>[é“¾æ¥æ–‡æœ¬](URL)</code> â†’ æ˜¾ç¤º <code>[]()</code> ç»“æ„</li>
</ul>
</li>
<li>
<p><strong>å—çº§å…ƒç´ ï¼ˆNodesï¼‰</strong> ï¼š</p>
<ul>
<li>æ ‡é¢˜ï¼šæ˜¾ç¤ºå¯¹åº”æ•°é‡çš„ <code>#</code> ç¬¦å·ï¼ˆå¦‚ <code># </code>è¡¨ç¤ºä¸€çº§æ ‡é¢˜ï¼‰</li>
<li>å›¾ç‰‡ï¼šæ˜¾ç¤º <code>![alt](milkup:///RDpcb3BlbnNvdXJjZVxtaWxrdXBcbWlsa3Vw77ya5qGM6Z2i56uvIG1hcmtkb3duIEFJ57ut5YaZ5ZKM5Y2z5pe25riy5p+TLm1k/src)</code> å®Œæ•´è¯­æ³•</li>
</ul>
</li>
</ul>
<h4 data-id="heading-8">2.1.2 å³æ—¶ç¼–è¾‘èƒ½åŠ›</h4>
<p>ä¸ä»…å¯ä»¥çœ‹åˆ°æºç ï¼Œè¿˜å¯ä»¥ç›´æ¥ç¼–è¾‘ï¼š</p>
<ul>
<li><strong>é“¾æ¥ URL ç¼–è¾‘</strong>ï¼šç‚¹å‡» URL éƒ¨åˆ†å¯ä»¥ç›´æ¥ä¿®æ”¹é“¾æ¥åœ°å€</li>
<li><strong>å›¾ç‰‡å±æ€§ç¼–è¾‘</strong>ï¼šå¯ä»¥ä¿®æ”¹å›¾ç‰‡çš„ alt æ–‡æœ¬å’Œ src è·¯å¾„</li>
<li><strong>å®æ—¶ç”Ÿæ•ˆ</strong>ï¼šç¼–è¾‘å®ŒæˆåæŒ‰ Enter æˆ–å¤±ç„¦ï¼Œä¿®æ”¹ç«‹å³ç”Ÿæ•ˆ</li>
</ul>
<h4 data-id="heading-9">2.1.3 é”®ç›˜å¯¼èˆª</h4>
<p>æä¾›æµç•…çš„é”®ç›˜æ“ä½œä½“éªŒï¼š</p>
<ul>
<li><code>ArrowLeft/Right</code>ï¼šåœ¨æºç ç¼–è¾‘å™¨å’Œæ¸²æŸ“è§†å›¾ä¹‹é—´åˆ‡æ¢ç„¦ç‚¹</li>
<li><code>Enter</code>ï¼šæäº¤ç¼–è¾‘å¹¶è¿”å›æ¸²æŸ“è§†å›¾</li>
<li>è‡ªåŠ¨è·³å‡ºï¼šå…‰æ ‡ç§»å‡ºè¯­æ³•å…ƒç´ æ—¶ï¼Œè‡ªåŠ¨éšè—æºç </li>
</ul>
<h3 data-id="heading-10">2.2 å®ç°åŸç†</h3>
<h4 data-id="heading-11">2.2.1 ProseMirror è£…é¥°å™¨ç³»ç»Ÿ</h4>
<p>å³æ—¶æ¸²æŸ“çš„æ ¸å¿ƒæ˜¯ ProseMirror çš„ <strong>Decorationï¼ˆè£…é¥°å™¨ï¼‰</strong> ç³»ç»Ÿã€‚è£…é¥°å™¨å…è®¸æˆ‘ä»¬åœ¨ä¸ä¿®æ”¹æ–‡æ¡£ç»“æ„çš„æƒ…å†µä¸‹ï¼Œåœ¨è§†å›¾å±‚æ·»åŠ é¢å¤–çš„ DOM å…ƒç´ ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ ¸å¿ƒæ’ä»¶ç»“æ„</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> sourceOnFocusPlugin = $prose(<span class="hljs-function">(<span class="hljs-params">ctx</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Plugin</span>({
    <span class="hljs-attr">state</span>: {
      <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">DecorationSet</span>.<span class="hljs-property">empty</span>;
      },
      <span class="hljs-title function_">apply</span>(<span class="hljs-params">tr, oldState</span>) {
        <span class="hljs-keyword">const</span> { selection } = tr;
        <span class="hljs-keyword">const</span> <span class="hljs-attr">decorations</span>: <span class="hljs-title class_">Decoration</span>[] = [];

        <span class="hljs-comment">// æ ¹æ®å…‰æ ‡ä½ç½®åŠ¨æ€ç”Ÿæˆè£…é¥°å™¨</span>
        <span class="hljs-comment">// ...</span>

        <span class="hljs-keyword">return</span> <span class="hljs-title class_">DecorationSet</span>.<span class="hljs-title function_">create</span>(tr.<span class="hljs-property">doc</span>, decorations);
      }
    },
    <span class="hljs-attr">props</span>: {
      <span class="hljs-title function_">decorations</span>(<span class="hljs-params">state</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getState</span>(state);
      }
    }
  });
});
</code></pre>
<p><strong>è£…é¥°å™¨çš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>éä¾µå…¥æ€§</strong>ï¼šä¸ä¿®æ”¹æ–‡æ¡£çš„å®é™…å†…å®¹</li>
<li><strong>é«˜æ€§èƒ½</strong>ï¼šåªåœ¨è§†å›¾å±‚æ¸²æŸ“ï¼Œä¸å½±å“æ•°æ®å±‚</li>
<li><strong>çµæ´»æ€§</strong>ï¼šå¯ä»¥åŠ¨æ€æ·»åŠ ã€ç§»é™¤è£…é¥°å™¨</li>
</ul>
<h4 data-id="heading-12">2.2.2 Marks å¤„ç†ç­–ç•¥</h4>
<p>å¯¹äºè¡Œå†…æ ‡è®°ï¼ˆå¦‚åŠ ç²—ã€æ–œä½“ã€é“¾æ¥ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ–‡æœ¬å‰åæ·»åŠ è¯­æ³•ç¬¦å·ï¼š</p>
<p><strong>å®ç°æ€è·¯ï¼š</strong></p>
<ol>
<li><strong>éå†å…‰æ ‡ä½ç½®çš„ Marks</strong>ï¼šè·å–å½“å‰å…‰æ ‡æ‰€åœ¨ä½ç½®çš„æ‰€æœ‰æ ‡è®°</li>
<li><strong>è®¡ç®—æ ‡è®°èŒƒå›´</strong>ï¼šæ‰¾åˆ°æ¯ä¸ªæ ‡è®°çš„èµ·å§‹å’Œç»“æŸä½ç½®</li>
<li><strong>åˆ›å»ºè£…é¥°å™¨</strong>ï¼šåœ¨èµ·å§‹ä½ç½®å‰å’Œç»“æŸä½ç½®åæ’å…¥è¯­æ³•ç¬¦å·</li>
</ol>
<p><strong>ä»¥é“¾æ¥ä¸ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">// å¤„ç†é“¾æ¥æ ‡è®°
if (<span class="hljs-attr">mark.type.name</span> === <span class="hljs-string">"link"</span>) {
  const <span class="hljs-attr">href</span> = mark.attrs.href || <span class="hljs-string">""</span><span class="hljs-comment">;</span>

  // åˆ›å»ºå‰ç¼€ <span class="hljs-section">[
  const prefixSpan = document.createElement("span");
  prefixSpan.className = "md-source";
  prefixSpan.textContent = "[";

  // åˆ›å»ºåç¼€ ]</span>(URL)
  const <span class="hljs-attr">suffixSpan</span> = document.createElement(<span class="hljs-string">"span"</span>)<span class="hljs-comment">;</span>
  <span class="hljs-attr">suffixSpan.className</span> = <span class="hljs-string">"md-source"</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">suffixSpan.textContent</span> = <span class="hljs-string">"]("</span><span class="hljs-comment">;</span>

  // åˆ›å»ºå¯ç¼–è¾‘çš„ URL éƒ¨åˆ†
  const <span class="hljs-attr">urlSpan</span> = document.createElement(<span class="hljs-string">"span"</span>)<span class="hljs-comment">;</span>
  <span class="hljs-attr">urlSpan.className</span> = <span class="hljs-string">"md-source-url-editable"</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">urlSpan.contentEditable</span> = <span class="hljs-string">"true"</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">urlSpan.textContent</span> = href<span class="hljs-comment">;</span>

  // ç›‘å¬ç¼–è¾‘äº‹ä»¶
  urlSpan.addEventListener("blur", () =&gt; {
    const <span class="hljs-attr">newHref</span> = urlSpan.textContent || <span class="hljs-string">""</span><span class="hljs-comment">;</span>
    if (newHref !== href) {
      // æ›´æ–°æ–‡æ¡£ä¸­çš„é“¾æ¥
      view.dispatch(
        view.state.tr
          .removeMark(start, end, mark.type)
          .addMark(start, end, mark.type.create({ href: newHref }))
      )<span class="hljs-comment">;</span>
    }
  })<span class="hljs-comment">;</span>

  suffixSpan.appendChild(urlSpan)<span class="hljs-comment">;</span>

  const <span class="hljs-attr">closingSpan</span> = document.createElement(<span class="hljs-string">"span"</span>)<span class="hljs-comment">;</span>
  <span class="hljs-attr">closingSpan.className</span> = <span class="hljs-string">"md-source"</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">closingSpan.textContent</span> = <span class="hljs-string">")"</span><span class="hljs-comment">;</span>
  suffixSpan.appendChild(closingSpan)<span class="hljs-comment">;</span>

  // æ·»åŠ è£…é¥°å™¨
  decorations.push(
    Decoration.widget(start, () =&gt; prefixSpan),
    Decoration.widget(end, () =&gt; suffixSpan)
  )<span class="hljs-comment">;</span>
}
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨ <code>contentEditable="true"</code> å®ç°å³æ—¶ç¼–è¾‘</li>
<li>é€šè¿‡ <code>blur</code> äº‹ä»¶ç›‘å¬ç¼–è¾‘å®Œæˆ</li>
<li>ä½¿ç”¨ ProseMirror çš„ <code>transaction</code> æ›´æ–°æ–‡æ¡£</li>
</ul>
<h4 data-id="heading-13">2.2.3 Nodes å¤„ç†ç­–ç•¥</h4>
<p>å¯¹äºå—çº§å…ƒç´ ï¼ˆå¦‚æ ‡é¢˜ã€å›¾ç‰‡ï¼‰ï¼Œå¤„ç†æ–¹å¼ç•¥æœ‰ä¸åŒï¼š</p>
<p><strong>æ ‡é¢˜å¤„ç†ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">if (<span class="hljs-attr">node.type.name</span> === <span class="hljs-string">"heading"</span>) {
  const <span class="hljs-attr">level</span> = node.attrs.level || <span class="hljs-number">1</span><span class="hljs-comment">;</span>
  const <span class="hljs-attr">prefix</span> = <span class="hljs-string">"#"</span>.repeat(level) + <span class="hljs-string">" "</span><span class="hljs-comment">;</span>

  const <span class="hljs-attr">span</span> = document.createElement(<span class="hljs-string">"span"</span>)<span class="hljs-comment">;</span>
  <span class="hljs-attr">span.className</span> = <span class="hljs-string">"md-source"</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">span.textContent</span> = prefix<span class="hljs-comment">;</span>

  decorations.push(
    Decoration.widget($from.start(), () =&gt; span)
  )<span class="hljs-comment">;</span>
}
</code></pre>
<p><strong>å›¾ç‰‡å¤„ç†ï¼š</strong></p>
<p>å›¾ç‰‡çš„å¤„ç†æ›´å¤æ‚ï¼Œå› ä¸ºéœ€è¦åŒæ—¶ç¼–è¾‘ alt æ–‡æœ¬å’Œ src è·¯å¾„ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">if (<span class="hljs-attr">node.type.name</span> === <span class="hljs-string">"image"</span>) {
  const { src, alt } = node.attrs<span class="hljs-comment">;</span>

  // åˆ›å»º !<span class="hljs-section">[
  const prefixSpan = document.createElement("span");
  prefixSpan.className = "md-source";
  prefixSpan.textContent = "![";

  // åˆ›å»ºå¯ç¼–è¾‘çš„ alt
  const altSpan = document.createElement("span");
  altSpan.className = "md-source-editable";
  altSpan.contentEditable = "true";
  altSpan.textContent = alt || "";

  // åˆ›å»º ]</span>(milkup:///RDpcb3BlbnNvdXJjZVxtaWxrdXBcbWlsa3Vw77ya5qGM6Z2i56uvIG1hcmtkb3duIEFJ57ut5YaZ5ZKM5Y2z5pe25riy5p+TLm1k/
%20%20const%20middleSpan%<span class="hljs-attr">20</span>=%<span class="hljs-number">20</span>document.createElement(<span class="hljs-string">"span"</span>)<span class="hljs-comment">;</span>
  <span class="hljs-attr">middleSpan.className</span> = <span class="hljs-string">"md-source"</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">middleSpan.textContent</span> = <span class="hljs-string">"]("</span><span class="hljs-comment">;</span>

  // åˆ›å»ºå¯ç¼–è¾‘çš„ src
  const <span class="hljs-attr">srcSpan</span> = document.createElement(<span class="hljs-string">"span"</span>)<span class="hljs-comment">;</span>
  <span class="hljs-attr">srcSpan.className</span> = <span class="hljs-string">"md-source-url-editable"</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">srcSpan.contentEditable</span> = <span class="hljs-string">"true"</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">srcSpan.textContent</span> = src || <span class="hljs-string">""</span><span class="hljs-comment">;</span>

  // åˆ›å»º )
  const <span class="hljs-attr">suffixSpan</span> = document.createElement(<span class="hljs-string">"span"</span>)<span class="hljs-comment">;</span>
  <span class="hljs-attr">suffixSpan.className</span> = <span class="hljs-string">"md-source"</span><span class="hljs-comment">;</span>
  <span class="hljs-attr">suffixSpan.textContent</span> = <span class="hljs-string">")"</span><span class="hljs-comment">;</span>

  // ç»„åˆæ‰€æœ‰å…ƒç´ 
  const <span class="hljs-attr">container</span> = document.createElement(<span class="hljs-string">"div"</span>)<span class="hljs-comment">;</span>
  container.append(prefixSpan, altSpan, middleSpan, srcSpan, suffixSpan)<span class="hljs-comment">;</span>

  decorations.push(
    Decoration.widget(pos, () =&gt; container)
  )<span class="hljs-comment">;</span>
}
</code></pre>
<h4 data-id="heading-14">2.2.4 æ ·å¼è®¾è®¡</h4>
<p>ä¸ºäº†è®©æºç æ˜¾ç¤ºæ—¢æ¸…æ™°åˆä¸çªå…€ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸“é—¨çš„æ ·å¼ï¼š</p>
<pre><code class="hljs language-css" lang="css">// æºç åŸºç¡€æ ·å¼
<span class="hljs-selector-class">.md-source</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--text-color-<span class="hljs-number">4</span>);           // ä½¿ç”¨è¾ƒæµ…çš„é¢œè‰²
  <span class="hljs-attribute">font-family</span>: <span class="hljs-built_in">var</span>(--milkup-font-code); // ç­‰å®½å­—ä½“
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.6</span>;                         // åŠé€æ˜
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--background-color-<span class="hljs-number">2</span>); // æµ…è‰²èƒŒæ™¯
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">2px</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.9em</span>;
}

// å¯ç¼–è¾‘çš„ URL æ ·å¼
<span class="hljs-selector-class">.md-source-url-editable</span> {
  <span class="hljs-attribute">display</span>: inline-block;
  <span class="hljs-attribute">outline</span>: none;
  <span class="hljs-attribute">cursor</span>: text;
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> dashed <span class="hljs-built_in">var</span>(--border-color); // è™šçº¿ä¸‹åˆ’çº¿æç¤ºå¯ç¼–è¾‘
  <span class="hljs-attribute">min-width</span>: <span class="hljs-number">50px</span>;

  &amp;<span class="hljs-selector-pseudo">:hover</span> {
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--background-color-<span class="hljs-number">3</span>);
  }

  &amp;<span class="hljs-selector-pseudo">:focus</span> {
    <span class="hljs-attribute">border-bottom-style</span>: solid;
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--background-color-<span class="hljs-number">3</span>);
  }
}
</code></pre>
<p><strong>è®¾è®¡åŸåˆ™ï¼š</strong></p>
<ul>
<li><strong>ä½å¯¹æ¯”åº¦</strong>ï¼šä½¿ç”¨åŠé€æ˜å’Œæµ…è‰²ï¼Œä¸å¹²æ‰°é˜…è¯»</li>
<li><strong>ç­‰å®½å­—ä½“</strong>ï¼šä¿æŒä»£ç æ„Ÿï¼Œä¸æ­£æ–‡åŒºåˆ†</li>
<li><strong>äº¤äº’æç¤º</strong>ï¼šå¯ç¼–è¾‘å…ƒç´ æœ‰æ˜ç¡®çš„è§†è§‰åé¦ˆ</li>
</ul>
<h3 data-id="heading-15">2.3 æŠ€æœ¯æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-16">2.3.1 å…‰æ ‡è·³å‡ºé—®é¢˜</h4>
<p><strong>é—®é¢˜</strong>ï¼šå½“ç”¨æˆ·åœ¨å¯ç¼–è¾‘çš„ URL ä¸­æŒ‰æ–¹å‘é”®æ—¶ï¼Œå…‰æ ‡å¯èƒ½è¢«å›°åœ¨ <code>contentEditable</code> å…ƒç´ ä¸­ï¼Œæ— æ³•è·³å‡ºã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šç›‘å¬é”®ç›˜äº‹ä»¶ï¼Œæ‰‹åŠ¨æ§åˆ¶å…‰æ ‡ç§»åŠ¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">urlSpan.addEventListener("keydown", (e) =&gt; {
  if (<span class="hljs-attr">e.key</span> === <span class="hljs-string">"ArrowLeft"</span> &amp;&amp; urlSpan.selectionStart === <span class="hljs-number">0</span>) {
    // å…‰æ ‡åœ¨æœ€å·¦ä¾§ï¼ŒæŒ‰å·¦é”®è·³å‡º
    e.preventDefault()<span class="hljs-comment">;</span>
    const <span class="hljs-attr">pos</span> = view.posAtDOM(urlSpan, <span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
    view.dispatch(view.state.tr.setSelection(TextSelection.create(view.state.doc, pos)))<span class="hljs-comment">;</span>
    view.focus()<span class="hljs-comment">;</span>
  } else if (<span class="hljs-attr">e.key</span> === <span class="hljs-string">"ArrowRight"</span> &amp;&amp; urlSpan.selectionEnd === urlSpan.textContent.length) {
    // å…‰æ ‡åœ¨æœ€å³ä¾§ï¼ŒæŒ‰å³é”®è·³å‡º
    e.preventDefault()<span class="hljs-comment">;</span>
    const <span class="hljs-attr">pos</span> = view.posAtDOM(urlSpan, urlSpan.textContent.length)<span class="hljs-comment">;</span>
    view.dispatch(view.state.tr.setSelection(TextSelection.create(view.state.doc, pos + 1)))<span class="hljs-comment">;</span>
    view.focus()<span class="hljs-comment">;</span>
  } else if (<span class="hljs-attr">e.key</span> === <span class="hljs-string">"Enter"</span>) {
    // æŒ‰ Enter æäº¤å¹¶è·³å‡º
    e.preventDefault()<span class="hljs-comment">;</span>
    urlSpan.blur()<span class="hljs-comment">;</span>
  }
})<span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-17">2.3.2 è£…é¥°å™¨æ€§èƒ½ä¼˜åŒ–</h4>
<p><strong>é—®é¢˜</strong>ï¼šæ¯æ¬¡å…‰æ ‡ç§»åŠ¨éƒ½é‡æ–°è®¡ç®—æ‰€æœ‰è£…é¥°å™¨ï¼Œå¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li><strong>å¢é‡æ›´æ–°</strong>ï¼šåªåœ¨å…‰æ ‡ä½ç½®å˜åŒ–æ—¶æ›´æ–°è£…é¥°å™¨</li>
<li><strong>ç¼“å­˜æœºåˆ¶</strong>ï¼šç¼“å­˜ä¸Šä¸€æ¬¡çš„è£…é¥°å™¨é›†åˆï¼Œé¿å…é‡å¤è®¡ç®—</li>
<li><strong>èŒƒå›´é™åˆ¶</strong>ï¼šåªå¤„ç†å…‰æ ‡é™„è¿‘çš„å…ƒç´ ï¼Œä¸éå†æ•´ä¸ªæ–‡æ¡£</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">apply</span>(<span class="hljs-params">tr, oldState</span>) {
  <span class="hljs-comment">// å¦‚æœå…‰æ ‡ä½ç½®æ²¡å˜ï¼Œç›´æ¥è¿”å›æ—§çŠ¶æ€</span>
  <span class="hljs-keyword">if</span> (!tr.<span class="hljs-property">docChanged</span> &amp;&amp; !tr.<span class="hljs-property">selectionSet</span>) {
    <span class="hljs-keyword">return</span> oldState;
  }

  <span class="hljs-comment">// åªå¤„ç†å…‰æ ‡é™„è¿‘ 1000 å­—ç¬¦èŒƒå›´å†…çš„å…ƒç´ </span>
  <span class="hljs-keyword">const</span> { <span class="hljs-keyword">from</span>, to } = tr.<span class="hljs-property">selection</span>;
  <span class="hljs-keyword">const</span> rangeStart = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, <span class="hljs-keyword">from</span> - <span class="hljs-number">500</span>);
  <span class="hljs-keyword">const</span> rangeEnd = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(tr.<span class="hljs-property">doc</span>.<span class="hljs-property">content</span>.<span class="hljs-property">size</span>, to + <span class="hljs-number">500</span>);

  <span class="hljs-comment">// åªåœ¨è¿™ä¸ªèŒƒå›´å†…æŸ¥æ‰¾éœ€è¦è£…é¥°çš„å…ƒç´ </span>
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<h4 data-id="heading-18">2.3.3 ä¸å…¶ä»–æ’ä»¶çš„å…¼å®¹æ€§</h4>
<p><strong>é—®é¢˜</strong>ï¼šè£…é¥°å™¨å¯èƒ½ä¸å…¶ä»–æ’ä»¶ï¼ˆå¦‚æ‹¼å†™æ£€æŸ¥ã€è¯­æ³•é«˜äº®ï¼‰å†²çªã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li><strong>è£…é¥°å™¨ä¼˜å…ˆçº§</strong>ï¼šä½¿ç”¨ ProseMirror çš„ <code>spec.key</code> è®¾ç½®ä¼˜å…ˆçº§</li>
<li><strong>é¿å…é‡å </strong>ï¼šæ£€æµ‹è£…é¥°å™¨æ˜¯å¦é‡å ï¼Œé¿å…è¦†ç›–</li>
<li><strong>äº‹ä»¶éš”ç¦»</strong>ï¼šä½¿ç”¨ <code>stopPropagation</code> é˜²æ­¢äº‹ä»¶å†’æ³¡</li>
</ol>
<hr/>
<h2 data-id="heading-19">ä¸‰ã€feat-aiï¼šAI ç»­å†™åŠŸèƒ½è¯¦è§£</h2>
<h3 data-id="heading-20">3.1 åŠŸèƒ½ç‰¹æ€§</h3>
<p>feat-ai åˆ†æ”¯ä¸º milkup å¸¦æ¥äº†æ™ºèƒ½ç»­å†™èƒ½åŠ›ï¼Œè®© AI æˆä¸ºä½ çš„å†™ä½œåŠ©æ‰‹ã€‚</p>
<h4 data-id="heading-21">3.1.1 å¤š AI æä¾›å•†æ”¯æŒ</h4>
<p>æ”¯æŒä¸»æµçš„ AI æœåŠ¡æä¾›å•†ï¼š</p>
<ul>
<li><strong>OpenAI</strong>ï¼šGPT-3.5-turboã€GPT-4ã€GPT-4-turbo</li>
<li><strong>Anthropic</strong>ï¼šClaude 3 Haikuã€Claude 3 Sonnetã€Claude 3 Opus</li>
<li><strong>Google</strong>ï¼šGemini Proã€Gemini Pro Vision</li>
<li><strong>Ollama</strong>ï¼šæ”¯æŒæœ¬åœ°è¿è¡Œçš„å¼€æºæ¨¡å‹ï¼ˆLlama 2ã€Mistralã€Qwen ç­‰ï¼‰</li>
<li><strong>è‡ªå®šä¹‰ API</strong>ï¼šå…¼å®¹ OpenAI API æ ¼å¼çš„ä»»ä½•æœåŠ¡</li>
</ul>
<p><strong>é…ç½®ç•Œé¢ï¼š</strong></p>
<p>ç”¨æˆ·å¯ä»¥åœ¨è®¾ç½®ä¸­è½»æ¾é…ç½® AI æœåŠ¡ï¼š</p>
<ul>
<li>é€‰æ‹©æä¾›å•†</li>
<li>è¾“å…¥ API Key</li>
<li>è®¾ç½® Base URLï¼ˆç”¨äºä»£ç†æˆ–è‡ªå®šä¹‰æœåŠ¡ï¼‰</li>
<li>é€‰æ‹©æ¨¡å‹</li>
<li>è°ƒæ•´æ¸©åº¦å‚æ•°ï¼ˆæ§åˆ¶åˆ›é€ æ€§ï¼‰</li>
<li>è®¾ç½®é˜²æŠ–å»¶è¿Ÿï¼ˆæ§åˆ¶è§¦å‘é¢‘ç‡ï¼‰</li>
</ul>
<h4 data-id="heading-22">3.1.2 ç»“æ„åŒ–ä¸Šä¸‹æ–‡ç†è§£</h4>
<p>AI ç»­å†™ä¸æ˜¯ç®€å•åœ°ç»­æ¥æ–‡æœ¬ï¼Œè€Œæ˜¯ç†è§£æ–‡æ¡£çš„ç»“æ„ï¼š</p>
<p><strong>æå–çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼š</strong></p>
<ol>
<li><strong>æ–‡ä»¶å</strong>ï¼šäº†è§£æ–‡æ¡£ä¸»é¢˜</li>
<li><strong>æ ‡é¢˜å±‚çº§</strong>ï¼šç†è§£æ–‡æ¡£ç»“æ„å’Œå½“å‰ç« èŠ‚</li>
<li><strong>å‰æ–‡å†…å®¹</strong>ï¼šåˆ†æå†™ä½œé£æ ¼å’Œä¸Šä¸‹æ–‡</li>
<li><strong>å…‰æ ‡ä½ç½®</strong>ï¼šç¡®å®šç»­å†™çš„èµ·ç‚¹</li>
</ol>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<p>å‡è®¾ä½ æ­£åœ¨å†™ä¸€ç¯‡æŠ€æœ¯åšå®¢ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Vue 3 ç»„åˆå¼ API æœ€ä½³å®è·µ</span>

<span class="hljs-section">## ä¸€ã€ä¸ºä»€ä¹ˆé€‰æ‹©ç»„åˆå¼ API</span>

ç»„åˆå¼ API æ˜¯ Vue 3 å¼•å…¥çš„æ–°ç‰¹æ€§ï¼Œå®ƒæä¾›äº†æ›´çµæ´»çš„ä»£ç ç»„ç»‡æ–¹å¼ã€‚

<span class="hljs-section">## äºŒã€æ ¸å¿ƒæ¦‚å¿µ</span>

<span class="hljs-section">### 2.1 å“åº”å¼ç³»ç»Ÿ</span>

Vue 3 çš„å“åº”å¼ç³»ç»ŸåŸºäº Proxyï¼Œç›¸æ¯” Vue 2 çš„ Object.defineProperty æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š
<span class="hljs-bullet">-</span> å¯ä»¥æ£€æµ‹å±æ€§çš„æ·»åŠ å’Œåˆ é™¤
<span class="hljs-bullet">-</span> å¯ä»¥æ£€æµ‹æ•°ç»„ç´¢å¼•å’Œé•¿åº¦çš„å˜åŒ–
<span class="hljs-bullet">-</span> [å…‰æ ‡åœ¨è¿™é‡Œ]
</code></pre>
<p>AI ä¼šç†è§£ï¼š</p>
<ul>
<li>è¿™æ˜¯ä¸€ç¯‡å…³äº Vue 3 çš„æŠ€æœ¯æ–‡ç« </li>
<li>å½“å‰åœ¨è®¨è®ºå“åº”å¼ç³»ç»Ÿçš„ä¼˜åŠ¿</li>
<li>å‰é¢å·²ç»åˆ—ä¸¾äº†ä¸¤ä¸ªä¼˜åŠ¿</li>
<li>åº”è¯¥ç»§ç»­åˆ—ä¸¾æ›´å¤šä¼˜åŠ¿æˆ–å±•å¼€è¯´æ˜</li>
</ul>
<h4 data-id="heading-23">3.1.3 æ™ºèƒ½è§¦å‘æœºåˆ¶</h4>
<p><strong>é˜²æŠ–ç­–ç•¥ï¼š</strong></p>
<ul>
<li>ç”¨æˆ·åœæ­¢è¾“å…¥åç­‰å¾… 1-3 ç§’ï¼ˆå¯é…ç½®ï¼‰</li>
<li>é¿å…é¢‘ç¹è°ƒç”¨ APIï¼ŒèŠ‚çœæˆæœ¬</li>
<li>ä¸æ‰“æ–­ç”¨æˆ·çš„å†™ä½œæµç¨‹</li>
</ul>
<p><strong>è§¦å‘æ¡ä»¶ï¼š</strong></p>
<ul>
<li>å…‰æ ‡åœ¨æ®µè½æœ«å°¾</li>
<li>å‰é¢æœ‰è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ï¼ˆè‡³å°‘ 50 ä¸ªå­—ç¬¦ï¼‰</li>
<li>ä¸åœ¨ä»£ç å—ã€è¡¨æ ¼ç­‰ç‰¹æ®ŠåŒºåŸŸå†…</li>
</ul>
<p><strong>å–æ¶ˆæœºåˆ¶ï¼š</strong></p>
<ul>
<li>ç”¨æˆ·ç»§ç»­è¾“å…¥æ—¶ï¼Œè‡ªåŠ¨å–æ¶ˆå½“å‰è¯·æ±‚</li>
<li>æ–‡æ¡£å†…å®¹å˜åŒ–æ—¶ï¼Œæ¸…é™¤å·²æ˜¾ç¤ºçš„å»ºè®®</li>
</ul>
<h4 data-id="heading-24">3.1.4 ä¼˜é›…çš„ UI é›†æˆ</h4>
<p><strong>æ˜¾ç¤ºæ–¹å¼ï¼š</strong></p>
<ul>
<li>ç»­å†™å»ºè®®ä»¥åŠé€æ˜æ–‡æœ¬æ˜¾ç¤ºåœ¨å…‰æ ‡å</li>
<li>ä½¿ç”¨ä¸åŒçš„é¢œè‰²å’Œå­—ä½“æ ·å¼ï¼Œä¸æ­£æ–‡åŒºåˆ†</li>
<li>ä¸å ç”¨å®é™…çš„æ–‡æ¡£ç©ºé—´</li>
</ul>
<p><strong>äº¤äº’æ–¹å¼ï¼š</strong></p>
<ul>
<li>æŒ‰ <code>Tab</code> é”®æ¥å—å»ºè®®</li>
<li>æŒ‰ <code>Esc</code> é”®æ‹’ç»å»ºè®®</li>
<li>ç»§ç»­è¾“å…¥è‡ªåŠ¨æ¸…é™¤å»ºè®®</li>
</ul>
<p><strong>è§†è§‰è®¾è®¡ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.ai-completion-suggestion</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--text-color-<span class="hljs-number">3</span>);
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.5</span>;
  <span class="hljs-attribute">font-style</span>: italic;
  <span class="hljs-attribute">pointer-events</span>: none; // ä¸å½±å“é¼ æ ‡äº¤äº’
  user-select: none;    // ä¸å¯é€‰ä¸­
}
</code></pre>
<h3 data-id="heading-25">3.2 å®ç°åŸç†</h3>
<h4 data-id="heading-26">3.2.1 æ’ä»¶æ¶æ„</h4>
<p>AI ç»­å†™åŠŸèƒ½é€šè¿‡ ProseMirror æ’ä»¶å®ç°ï¼Œæ ¸å¿ƒæ–‡ä»¶ä½äº <code>src/renderer/components/editor/plugins/completionPlugin.ts</code>ã€‚</p>
<p><strong>æ’ä»¶çŠ¶æ€ç®¡ç†ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> completionPlugin = $prose(<span class="hljs-function">(<span class="hljs-params">ctx</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> completionKey = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PluginKey</span>(<span class="hljs-string">"completion"</span>);

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Plugin</span>({
    <span class="hljs-attr">key</span>: completionKey,
    <span class="hljs-attr">state</span>: {
      <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">decoration</span>: <span class="hljs-title class_">DecorationSet</span>.<span class="hljs-property">empty</span>,
          <span class="hljs-attr">suggestion</span>: <span class="hljs-literal">null</span>,
          <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>
        };
      },
      <span class="hljs-title function_">apply</span>(<span class="hljs-params">tr, value</span>) {
        <span class="hljs-comment">// æ–‡æ¡£å†…å®¹å˜åŒ–æ—¶æ¸…é™¤å»ºè®®</span>
        <span class="hljs-keyword">if</span> (tr.<span class="hljs-property">docChanged</span>) {
          <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">decoration</span>: <span class="hljs-title class_">DecorationSet</span>.<span class="hljs-property">empty</span>,
            <span class="hljs-attr">suggestion</span>: <span class="hljs-literal">null</span>,
            <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>
          };
        }

        <span class="hljs-comment">// æ‰‹åŠ¨æ›´æ–°ï¼ˆå¦‚ AI è¿”å›ç»“æœï¼‰</span>
        <span class="hljs-keyword">const</span> meta = tr.<span class="hljs-title function_">getMeta</span>(completionKey);
        <span class="hljs-keyword">if</span> (meta) {
          <span class="hljs-keyword">return</span> meta;
        }

        <span class="hljs-keyword">return</span> value;
      }
    },
    <span class="hljs-attr">props</span>: {
      <span class="hljs-title function_">decorations</span>(<span class="hljs-params">state</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getState</span>(state)?.<span class="hljs-property">decoration</span>;
      },
      <span class="hljs-title function_">handleKeyDown</span>(<span class="hljs-params">view, event</span>) {
        <span class="hljs-comment">// å¤„ç† Tab é”®æ¥å—å»ºè®®</span>
        <span class="hljs-keyword">if</span> (event.<span class="hljs-property">key</span> === <span class="hljs-string">"Tab"</span>) {
          <span class="hljs-keyword">const</span> state = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getState</span>(view.<span class="hljs-property">state</span>);
          <span class="hljs-keyword">if</span> (state?.<span class="hljs-property">suggestion</span>) {
            event.<span class="hljs-title function_">preventDefault</span>();
            <span class="hljs-keyword">const</span> tr = view.<span class="hljs-property">state</span>.<span class="hljs-property">tr</span>.<span class="hljs-title function_">insertText</span>(
              state.<span class="hljs-property">suggestion</span>,
              view.<span class="hljs-property">state</span>.<span class="hljs-property">selection</span>.<span class="hljs-property">to</span>
            );
            tr.<span class="hljs-title function_">setMeta</span>(completionKey, {
              <span class="hljs-attr">decoration</span>: <span class="hljs-title class_">DecorationSet</span>.<span class="hljs-property">empty</span>,
              <span class="hljs-attr">suggestion</span>: <span class="hljs-literal">null</span>,
              <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>
            });
            view.<span class="hljs-title function_">dispatch</span>(tr);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
          }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }
    }
  });
});
</code></pre>
<p><strong>æ’ä»¶çŠ¶æ€åŒ…å«ä¸‰ä¸ªå­—æ®µï¼š</strong></p>
<ul>
<li><code>decoration</code>ï¼šç”¨äºæ˜¾ç¤ºå»ºè®®çš„è£…é¥°å™¨é›†åˆ</li>
<li><code>suggestion</code>ï¼šå½“å‰çš„å»ºè®®æ–‡æœ¬</li>
<li><code>loading</code>ï¼šæ˜¯å¦æ­£åœ¨è¯·æ±‚ AI</li>
</ul>
<h4 data-id="heading-27">3.2.2 å¤š AI æä¾›å•†é›†æˆ</h4>
<p>AI æœåŠ¡å±‚ä½äº <code>src/renderer/services/ai.ts</code>ï¼Œé€šè¿‡ç»Ÿä¸€çš„æ¥å£æ”¯æŒå¤šä¸ªæä¾›å•†ã€‚</p>
<p><strong>æœåŠ¡æ¥å£è®¾è®¡ï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AIService</span> {
  <span class="hljs-function"><span class="hljs-type">static</span> async <span class="hljs-title">complete</span><span class="hljs-params">(context: APIContext)</span>: Promise&lt;CompletionResponse&gt; {</span>
    <span class="hljs-type">const</span> config = <span class="hljs-built_in">useAIConfig</span>().config.value;

    <span class="hljs-keyword">if</span> (!config.enabled || !config.apiKey) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">"AI æœåŠ¡æœªé…ç½®"</span>);
    }

    <span class="hljs-comment">// æ ¹æ®æä¾›å•†æ„å»ºä¸åŒçš„è¯·æ±‚</span>
    <span class="hljs-type">const</span> { url, headers, body } = <span class="hljs-keyword">this</span>.<span class="hljs-built_in">buildRequest</span>(config, context);

    <span class="hljs-comment">// å‘é€è¯·æ±‚</span>
    <span class="hljs-type">const</span> response = await <span class="hljs-keyword">this</span>.<span class="hljs-built_in">request</span>(url, {
      method: <span class="hljs-string">"POST"</span>,
      headers,
      body: JSON.<span class="hljs-built_in">stringify</span>(body)
    });

    <span class="hljs-comment">// è§£æå“åº”</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.<span class="hljs-built_in">parseResponse</span>(response, config.provider);
  }
}
</code></pre>
<p><strong>å„æä¾›å•†çš„å®ç°å·®å¼‚ï¼š</strong></p>
<ol>
<li><strong>OpenAI / è‡ªå®šä¹‰ API</strong>ï¼šä½¿ç”¨ <code>response_format</code> å¼ºåˆ¶ JSON è¾“å‡º</li>
</ol>
<pre><code class="hljs language-css" lang="css">case "openai":
case <span class="hljs-string">"custom"</span>:
  return {
    url: `${config<span class="hljs-selector-class">.baseUrl</span>}/chat/completions`,
    headers: {
      "<span class="hljs-attribute">Content</span>-Type": <span class="hljs-string">"application/json"</span>,
      <span class="hljs-string">"Authorization"</span>: `Bearer ${config<span class="hljs-selector-class">.apiKey</span>}`
    },
    <span class="hljs-selector-tag">body</span>: {
      model: config.model,
      messages: [
        { role: <span class="hljs-string">"system"</span>, content: SYSTEM_PROMPT },
        { role: <span class="hljs-string">"user"</span>, content: userMessage }
      ],
      temperature: config.temperature,
      response_format: {
        type: <span class="hljs-string">"json_schema"</span>,
        json_schema: {
          name: <span class="hljs-string">"continuation"</span>,
          schema: {
            type: <span class="hljs-string">"object"</span>,
            properties: {
              continuation: { type: <span class="hljs-string">"string"</span> }
            },
            required: [<span class="hljs-string">"continuation"</span>]
          }
        }
      }
    }
  };
</code></pre>
<ol>
<li><strong>Anthropic (Claude)</strong> ï¼šä½¿ç”¨ Tool Use æœºåˆ¶</li>
</ol>
<pre><code class="hljs language-css" lang="css">case "anthropic":
  return {
    url: `${config<span class="hljs-selector-class">.baseUrl</span>}/v1/messages`,
    headers: {
      "<span class="hljs-attribute">Content</span>-Type": <span class="hljs-string">"application/json"</span>,
      <span class="hljs-string">"x-api-key"</span>: config.apiKey,
      <span class="hljs-string">"anthropic-version"</span>: <span class="hljs-string">"2023-06-01"</span>
    },
    <span class="hljs-selector-tag">body</span>: {
      model: config.model,
      system: SYSTEM_PROMPT,
      messages: [{ role: <span class="hljs-string">"user"</span>, content: userMessage }],
      tools: [{
        name: <span class="hljs-string">"print_continuation"</span>,
        description: <span class="hljs-string">"è¾“å‡ºç»­å†™å†…å®¹"</span>,
        input_schema: {
          type: <span class="hljs-string">"object"</span>,
          properties: {
            continuation: { type: <span class="hljs-string">"string"</span> }
          },
          required: [<span class="hljs-string">"continuation"</span>]
        }
      }],
      tool_choice: { type: <span class="hljs-string">"tool"</span>, name: <span class="hljs-string">"print_continuation"</span> }
    }
  };
</code></pre>
<ol>
<li><strong>Google Gemini</strong>ï¼šä½¿ç”¨ <code>responseMimeType</code> å’Œ <code>responseSchema</code></li>
</ol>
<pre><code class="hljs language-css" lang="css">case "gemini":
  return {
    url: `${config<span class="hljs-selector-class">.baseUrl</span>}/v1beta/models/${config<span class="hljs-selector-class">.model</span>}:generateContent?key=${config<span class="hljs-selector-class">.apiKey</span>}`,
    headers: {
      "<span class="hljs-attribute">Content</span>-Type": <span class="hljs-string">"application/json"</span>
    },
    <span class="hljs-selector-tag">body</span>: {
      contents: [{
        parts: [{ text: SYSTEM_PROMPT + <span class="hljs-string">"\n"</span> + userMessage }]
      }],
      generationConfig: {
        temperature: config.temperature,
        responseMimeType: <span class="hljs-string">"application/json"</span>,
        responseSchema: {
          type: <span class="hljs-string">"OBJECT"</span>,
          properties: {
            continuation: { type: <span class="hljs-string">"STRING"</span> }
          },
          required: [<span class="hljs-string">"continuation"</span>]
        }
      }
    }
  };
</code></pre>
<ol>
<li><strong>Ollama</strong>ï¼šä½¿ç”¨ <code>format</code> å‚æ•°æŒ‡å®š JSON Schema</li>
</ol>
<pre><code class="hljs language-css" lang="css">case "ollama":
  return {
    url: `${config<span class="hljs-selector-class">.baseUrl</span>}/api/chat`,
    headers: {
      "<span class="hljs-attribute">Content</span>-Type": <span class="hljs-string">"application/json"</span>
    },
    <span class="hljs-selector-tag">body</span>: {
      model: config.model,
      messages: [
        { role: <span class="hljs-string">"system"</span>, content: SYSTEM_PROMPT },
        { role: <span class="hljs-string">"user"</span>, content: userMessage }
      ],
      format: {
        type: <span class="hljs-string">"object"</span>,
        properties: {
          continuation: { type: <span class="hljs-string">"string"</span> }
        },
        required: [<span class="hljs-string">"continuation"</span>]
      },
      stream: false,
      options: {
        temperature: config.temperature
      }
    }
  };
</code></pre>
<p><strong>è®¾è®¡äº®ç‚¹ï¼š</strong></p>
<ul>
<li>ç»Ÿä¸€çš„æ¥å£ï¼Œéšè—æä¾›å•†å·®å¼‚</li>
<li>å……åˆ†åˆ©ç”¨å„æä¾›å•†çš„åŸç”Ÿèƒ½åŠ›ï¼ˆJSON Schemaã€Tool Useï¼‰</li>
<li>æ˜“äºæ‰©å±•ï¼Œæ·»åŠ æ–°æä¾›å•†åªéœ€å¢åŠ ä¸€ä¸ª case</li>
</ul>
<h4 data-id="heading-28">3.2.3 ä¸Šä¸‹æ–‡æå–ç­–ç•¥</h4>
<p>AI ç»­å†™çš„è´¨é‡å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºä¸Šä¸‹æ–‡çš„è´¨é‡ã€‚milkup å®ç°äº†æ™ºèƒ½çš„ä¸Šä¸‹æ–‡æå–ç­–ç•¥ã€‚</p>
<p><strong>æå–çš„ä¿¡æ¯ï¼š</strong></p>
<ol>
<li><strong>æ–‡ä»¶æ ‡é¢˜</strong>ï¼šä»æ–‡ä»¶è·¯å¾„ä¸­æå–</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> fileTitle = (<span class="hljs-variable language_">window</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">__currentFilePath</span>
  ? (<span class="hljs-variable language_">window</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">__currentFilePath</span>.<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/[\/]/</span>).<span class="hljs-title function_">pop</span>()
  : <span class="hljs-string">"æœªå‘½åæ–‡æ¡£"</span>;
</code></pre>
<ol>
<li><strong>å‰æ–‡å†…å®¹</strong>ï¼šè·å–å…‰æ ‡å‰æœ€è¿‘ 200 ä¸ªå­—ç¬¦</li>
</ol>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">start</span> = Math.max(<span class="hljs-number">0</span>, to - <span class="hljs-number">200</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">previousContent</span> = doc.textBetween(start, to, <span class="hljs-string">"\n"</span>)<span class="hljs-comment">;</span>
</code></pre>
<ol>
<li><strong>æ ‡é¢˜å±‚çº§</strong>ï¼šéå†æ–‡æ¡£æå–æ‰€æœ‰æ ‡é¢˜</li>
</ol>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">const</span> headers: { level: number; <span class="hljs-keyword">text</span>: <span class="hljs-type">string</span> }[] = [];
doc.nodesBetween(<span class="hljs-number">0</span>, <span class="hljs-keyword">to</span>, (node, pos) =&gt; {
  <span class="hljs-keyword">if</span> (node.type.name === <span class="hljs-string">"heading"</span>) {
    <span class="hljs-keyword">if</span> (pos + node.nodeSize &lt;= <span class="hljs-keyword">to</span>) {
      headers.push({
        level: node.attrs.level,
        <span class="hljs-keyword">text</span>: node.textContent
      });
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
});
</code></pre>
<ol>
<li><strong>å½“å‰ç« èŠ‚</strong>ï¼šç¡®å®šå½“å‰æ‰€åœ¨çš„ç« èŠ‚å’Œå­ç« èŠ‚</li>
</ol>
<pre><code class="hljs language-ini" lang="ini">let <span class="hljs-attr">sectionTitle</span> = <span class="hljs-string">"æœªçŸ¥"</span><span class="hljs-comment">;</span>
let <span class="hljs-attr">subSectionTitle</span> = <span class="hljs-string">"æœªçŸ¥"</span><span class="hljs-comment">;</span>

if (headers.length &gt; 0) {
  const <span class="hljs-attr">lastHeader</span> = headers[headers.length - <span class="hljs-number">1</span>]<span class="hljs-comment">;</span>
  <span class="hljs-attr">subSectionTitle</span> = lastHeader.text<span class="hljs-comment">;</span>

  // æŸ¥æ‰¾çˆ¶çº§æ ‡é¢˜
  const <span class="hljs-attr">parentHeader</span> = headers
    .slice(0, -1)
    .reverse()
    .find((h) =&gt; h.level &lt; lastHeader.level)<span class="hljs-comment">;</span>

  if (parentHeader) {
    <span class="hljs-attr">sectionTitle</span> = parentHeader.text<span class="hljs-comment">;</span>
  }
}
</code></pre>
<p><strong>æ„å»º Promptï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">buildPrompt</span>(<span class="hljs-attr">context</span>: <span class="hljs-title class_">APIContext</span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`ä¸Šä¸‹æ–‡ï¼š
æ–‡ç« æ ‡é¢˜ï¼š<span class="hljs-subst">${context.fileTitle || <span class="hljs-string">"æœªçŸ¥"</span>}</span>
å¤§æ ‡é¢˜ï¼š<span class="hljs-subst">${context.sectionTitle || <span class="hljs-string">"æœªçŸ¥"</span>}</span>
æœ¬å°èŠ‚æ ‡é¢˜ï¼š<span class="hljs-subst">${context.subSectionTitle || <span class="hljs-string">"æœªçŸ¥"</span>}</span>
å‰é¢å†…å®¹ï¼ˆè¯·ç´§å¯†è¡”æ¥ï¼‰ï¼š<span class="hljs-subst">${context.previousContent}</span>`</span>;
}
</code></pre>
<p><strong>System Promptï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-type">const</span> SYSTEM_PROMPT = `ä½ æ˜¯ä¸€ä¸ªæŠ€æœ¯æ–‡æ¡£ç»­å†™åŠ©æ‰‹ã€‚
ä¸¥æ ¼åªè¾“å‡ºä»¥ä¸‹ JSONï¼Œ**ä¸è¦æœ‰ä»»ä½•å‰ç¼€ã€åç¼€ã€markdownã€æ¢è¡Œã€è§£é‡Š**ï¼š

{<span class="hljs-string">"continuation"</span>: <span class="hljs-string">"æ¥ä¸‹æ¥åªå†™3â€“35ä¸ªæ±‰å­—çš„è‡ªç„¶è¡”æ¥å†…å®¹"</span>}
`;
</code></pre>
<p><strong>è®¾è®¡ç†å¿µï¼š</strong></p>
<ul>
<li><strong>ç»“æ„åŒ–ç†è§£</strong>ï¼šä¸ä»…æä¾›æ–‡æœ¬ï¼Œè¿˜æä¾›æ–‡æ¡£ç»“æ„</li>
<li><strong>ç²¾ç¡®å®šä½</strong>ï¼šæ˜ç¡®å½“å‰æ‰€åœ¨çš„ç« èŠ‚ä½ç½®</li>
<li><strong>é•¿åº¦æ§åˆ¶</strong>ï¼šé™åˆ¶ 3-35 ä¸ªæ±‰å­—ï¼Œé¿å…è¿‡åº¦ç”Ÿæˆ</li>
<li><strong>æ ¼å¼çº¦æŸ</strong>ï¼šå¼ºåˆ¶ JSON è¾“å‡ºï¼Œä¾¿äºè§£æ</li>
</ul>
<h4 data-id="heading-29">3.2.4 UI æ˜¾ç¤ºæœºåˆ¶</h4>
<p>å»ºè®®çš„æ˜¾ç¤ºä½¿ç”¨ ProseMirror çš„ Decoration ç³»ç»Ÿï¼Œåœ¨å…‰æ ‡ä½ç½®æ’å…¥åŠé€æ˜çš„å»ºè®®æ–‡æœ¬ã€‚</p>
<p><strong>åˆ›å»ºå»ºè®® Widgetï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">// åˆ›å»ºå»ºè®®å…ƒç´ 
const <span class="hljs-attr">widget</span> = document.createElement(<span class="hljs-string">"span"</span>)<span class="hljs-comment">;</span>
<span class="hljs-attr">widget.textContent</span> = result.continuation<span class="hljs-comment">;</span>
<span class="hljs-attr">widget.className</span> = <span class="hljs-string">"ai-completion-suggestion"</span><span class="hljs-comment">;</span>
<span class="hljs-attr">widget.style.color</span> = <span class="hljs-string">"var(--text-color-light, #999)"</span><span class="hljs-comment">;</span>
<span class="hljs-attr">widget.style.opacity</span> = <span class="hljs-string">"0.6"</span><span class="hljs-comment">;</span>
<span class="hljs-attr">widget.style.fontStyle</span> = <span class="hljs-string">"italic"</span><span class="hljs-comment">;</span>
<span class="hljs-attr">widget.style.pointerEvents</span> = <span class="hljs-string">"none"</span><span class="hljs-comment">;  // ä¸å½±å“é¼ æ ‡äº¤äº’</span>
<span class="hljs-attr">widget.style.userSelect</span> = <span class="hljs-string">"none"</span><span class="hljs-comment">;     // ä¸å¯é€‰ä¸­</span>
<span class="hljs-attr">widget.dataset.suggestion</span> = result.continuation<span class="hljs-comment">;</span>

// åˆ›å»ºè£…é¥°å™¨
const <span class="hljs-attr">deco</span> = Decoration.widget(to, widget, { side: <span class="hljs-number">1</span> })<span class="hljs-comment">;</span>
const <span class="hljs-attr">decoSet</span> = DecorationSet.create(view.state.doc, [deco])<span class="hljs-comment">;</span>

// æ›´æ–°ç¼–è¾‘å™¨çŠ¶æ€
const <span class="hljs-attr">tr</span> = view.state.tr.setMeta(completionKey, {
  decoration: decoSet,
  suggestion: result.continuation,
  loading: false
})<span class="hljs-comment">;</span>
view.dispatch(tr)<span class="hljs-comment">;</span>
</code></pre>
<p><strong>æ ·å¼è®¾è®¡ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.ai-completion-suggestion</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--text-color-<span class="hljs-number">3</span>);
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.5</span>;
  <span class="hljs-attribute">font-style</span>: italic;
  <span class="hljs-attribute">pointer-events</span>: none;
  user-select: none;
  <span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">0.2s</span> ease;

  &amp;<span class="hljs-selector-pseudo">:hover</span> {
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.7</span>;
  }
}
</code></pre>
<p><strong>äº¤äº’è®¾è®¡ï¼š</strong></p>
<ol>
<li><strong>Tab é”®æ¥å—å»ºè®®</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-ini" lang="ini">if (<span class="hljs-attr">event.key</span> === <span class="hljs-string">"Tab"</span>) {
  const <span class="hljs-attr">state</span> = this.getState(view.state)<span class="hljs-comment">;</span>
  if (state?.suggestion) {
    event.preventDefault()<span class="hljs-comment">;</span>

    // æ’å…¥å»ºè®®æ–‡æœ¬
    const <span class="hljs-attr">tr</span> = view.state.tr.insertText(
      state.suggestion,
      view.state.selection.to
    )<span class="hljs-comment">;</span>

    // æ¸…é™¤å»ºè®®
    tr.setMeta(completionKey, {
      decoration: DecorationSet.empty,
      suggestion: null,
      loading: false
    })<span class="hljs-comment">;</span>

    view.dispatch(tr)<span class="hljs-comment">;</span>
    return true<span class="hljs-comment">;</span>
  }
}
</code></pre>
<ol>
<li><strong>è‡ªåŠ¨æ¸…é™¤æœºåˆ¶</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">apply</span>(<span class="hljs-params">tr, value</span>) {
  <span class="hljs-comment">// æ–‡æ¡£å†…å®¹å˜åŒ–æ—¶æ¸…é™¤å»ºè®®</span>
  <span class="hljs-keyword">if</span> (tr.<span class="hljs-property">docChanged</span>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">decoration</span>: <span class="hljs-title class_">DecorationSet</span>.<span class="hljs-property">empty</span>,
      <span class="hljs-attr">suggestion</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>
    };
  }

  <span class="hljs-keyword">return</span> value;
}
</code></pre>
<p><strong>ç”¨æˆ·ä½“éªŒç»†èŠ‚ï¼š</strong></p>
<ul>
<li><strong>åŠé€æ˜æ˜¾ç¤º</strong>ï¼šä¸å¹²æ‰°æ­£å¸¸é˜…è¯»</li>
<li><strong>æ–œä½“æ ·å¼</strong>ï¼šä¸æ­£æ–‡åŒºåˆ†</li>
<li><strong>ä¸å¯äº¤äº’</strong>ï¼šä¸å½±å“é¼ æ ‡ç‚¹å‡»å’Œæ–‡æœ¬é€‰æ‹©</li>
<li><strong>å³æ—¶æ¸…é™¤</strong>ï¼šç”¨æˆ·ç»§ç»­è¾“å…¥æ—¶è‡ªåŠ¨æ¶ˆå¤±</li>
<li><strong>å¿«æ·æ¥å—</strong>ï¼šTab é”®ä¸€é”®æ¥å—</li>
</ul>
<h3 data-id="heading-30">3.3 æŠ€æœ¯æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-31">3.3.1 ç»“æ„åŒ–è¾“å‡ºçš„æŒ‘æˆ˜</h4>
<p><strong>é—®é¢˜</strong>ï¼šä¸åŒçš„ AI æ¨¡å‹å¯¹è¾“å‡ºæ ¼å¼çš„æ§åˆ¶èƒ½åŠ›ä¸åŒï¼Œæœ‰äº›æ¨¡å‹å¯èƒ½è¾“å‡ºé¢å¤–çš„æ–‡æœ¬ã€markdown ä»£ç å—æˆ–è§£é‡Šæ€§å†…å®¹ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>
<p><strong>åˆ©ç”¨å„æä¾›å•†çš„åŸç”Ÿèƒ½åŠ›</strong>ï¼š</p>
<ul>
<li>OpenAIï¼šä½¿ç”¨ <code>response_format</code> çš„ JSON Schema</li>
<li>Claudeï¼šä½¿ç”¨ Tool Use æœºåˆ¶</li>
<li>Geminiï¼šä½¿ç”¨ <code>responseMimeType</code> å’Œ <code>responseSchema</code></li>
<li>Ollamaï¼šä½¿ç”¨ <code>format</code> å‚æ•°</li>
</ul>
</li>
<li>
<p><strong>å¤šå±‚è§£æç­–ç•¥</strong>ï¼š</p>
</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">parseResponse</span>(<span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">CompletionResponse</span> {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// 1. å°è¯•ç›´æ¥ JSON è§£æ</span>
    <span class="hljs-keyword">const</span> cleanText = text.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/```json\n?|\n?```/g</span>, <span class="hljs-string">""</span>).<span class="hljs-title function_">trim</span>();
    <span class="hljs-keyword">const</span> json = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(cleanText);
    <span class="hljs-keyword">if</span> (json.<span class="hljs-property">continuation</span>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">continuation</span>: json.<span class="hljs-property">continuation</span> };
    }
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">"JSON parse failed, trying regex extraction"</span>);
  }

  <span class="hljs-comment">// 2. æ­£åˆ™æå–</span>
  <span class="hljs-keyword">const</span> match = text.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/"continuation"\s*:\s*"([^"]+)"/</span>);
  <span class="hljs-keyword">if</span> (match &amp;&amp; match[<span class="hljs-number">1</span>]) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">continuation</span>: match[<span class="hljs-number">1</span>] };
  }

  <span class="hljs-comment">// 3. å…œåº•ç­–ç•¥ï¼šå¦‚æœæ–‡æœ¬å¾ˆçŸ­ä¸”ä¸åŒ…å« JSON ç»“æ„ï¼Œç›´æ¥ä½¿ç”¨</span>
  <span class="hljs-keyword">if</span> (text.<span class="hljs-property">length</span> &lt; <span class="hljs-number">50</span> &amp;&amp; !text.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"{"</span>)) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">continuation</span>: text.<span class="hljs-title function_">trim</span>() };
  }

  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Failed to parse AI response"</span>);
}
</code></pre>
<p><strong>é²æ£’æ€§ä¿è¯ï¼š</strong></p>
<ul>
<li>æ¸…ç† markdown ä»£ç å—æ ‡è®°</li>
<li>æ­£åˆ™è¡¨è¾¾å¼å…œåº•</li>
<li>çŸ­æ–‡æœ¬ç›´æ¥ä½¿ç”¨</li>
<li>å¤šå±‚å®¹é”™æœºåˆ¶</li>
</ul>
<h4 data-id="heading-32">3.3.2 é˜²æŠ–ä¸å–æ¶ˆæœºåˆ¶</h4>
<p><strong>é—®é¢˜</strong>ï¼šç”¨æˆ·è¾“å…¥æ—¶é¢‘ç¹è§¦å‘ AI è¯·æ±‚ï¼Œæµªè´¹èµ„æºä¸”å½±å“ä½“éªŒã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li><strong>é˜²æŠ–è§¦å‘</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> <span class="hljs-attr">debounceTimer</span>: <span class="hljs-title class_">NodeJS</span>.<span class="hljs-property">Timeout</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

view.<span class="hljs-title function_">updateState</span>(view.<span class="hljs-property">state</span>);

<span class="hljs-comment">// æ¸…é™¤æ—§çš„å®šæ—¶å™¨</span>
<span class="hljs-keyword">if</span> (debounceTimer) {
  <span class="hljs-built_in">clearTimeout</span>(debounceTimer);
}

<span class="hljs-comment">// è®¾ç½®æ–°çš„å®šæ—¶å™¨</span>
debounceTimer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title class_">AIService</span>.<span class="hljs-title function_">complete</span>(context);

    <span class="hljs-comment">// æ˜¾ç¤ºå»ºè®®</span>
    <span class="hljs-comment">// ...</span>
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"AI completion failed:"</span>, error);
  }
}, config.<span class="hljs-property">debounceWait</span> || <span class="hljs-number">1500</span>);
</code></pre>
<ol>
<li><strong>è¯·æ±‚å–æ¶ˆ</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-ini" lang="ini">let currentAbortController: AbortController | <span class="hljs-attr">null</span> = null<span class="hljs-comment">;</span>

// å–æ¶ˆæ—§è¯·æ±‚
if (currentAbortController) {
  currentAbortController.abort()<span class="hljs-comment">;</span>
}

// åˆ›å»ºæ–°çš„ AbortController
<span class="hljs-attr">currentAbortController</span> = new AbortController()<span class="hljs-comment">;</span>

const <span class="hljs-attr">response</span> = await fetch(url, {
  signal: currentAbortController.signal,
  // ...
})<span class="hljs-comment">;</span>
</code></pre>
<p><strong>ä¼˜åŒ–æ•ˆæœï¼š</strong></p>
<ul>
<li>å‡å°‘ä¸å¿…è¦çš„ API è°ƒç”¨</li>
<li>èŠ‚çœæˆæœ¬</li>
<li>æå‡å“åº”é€Ÿåº¦</li>
<li>é¿å…è¿‡æ—¶çš„å»ºè®®</li>
</ul>
<h4 data-id="heading-33">3.3.3 é…ç½®ç®¡ç†ä¸æŒä¹…åŒ–</h4>
<p><strong>é—®é¢˜</strong>ï¼šç”¨æˆ·é…ç½®éœ€è¦åœ¨åº”ç”¨é‡å¯åä¿æŒï¼Œä¸”éœ€è¦å“åº”å¼æ›´æ–°ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä½¿ç”¨ VueUse çš„ <code>useStorage</code></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useStorage } <span class="hljs-keyword">from</span> <span class="hljs-string">"@vueuse/core"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useAIConfig</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> config = useStorage&lt;<span class="hljs-title class_">AIConfig</span>&gt;(
    <span class="hljs-string">"milkup-ai-config"</span>,
    defaultAIConfig,
    <span class="hljs-variable language_">localStorage</span>,
    { <span class="hljs-attr">mergeDefaults</span>: <span class="hljs-literal">true</span> }
  );

  <span class="hljs-keyword">return</span> { config };
}
</code></pre>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>è‡ªåŠ¨åŒæ­¥åˆ° localStorage</li>
<li>å“åº”å¼æ›´æ–°ï¼Œé…ç½®å˜åŒ–ç«‹å³ç”Ÿæ•ˆ</li>
<li>æ”¯æŒé»˜è®¤å€¼åˆå¹¶</li>
<li>ç±»å‹å®‰å…¨</li>
</ul>
<h4 data-id="heading-34">3.3.4 Ollama æ¨¡å‹åˆ—è¡¨åŠ¨æ€è·å–</h4>
<p><strong>é—®é¢˜</strong>ï¼šOllama æ”¯æŒå¤šç§æœ¬åœ°æ¨¡å‹ï¼Œéœ€è¦åŠ¨æ€è·å–å¯ç”¨æ¨¡å‹åˆ—è¡¨ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchOllamaModels</span>(<span class="hljs-params"/>) {
  loadingModels.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> models = <span class="hljs-keyword">await</span> <span class="hljs-title class_">AIService</span>.<span class="hljs-title function_">getModels</span>(config.<span class="hljs-property">value</span>);
    ollamaModels.<span class="hljs-property">value</span> = models;
  } <span class="hljs-keyword">catch</span> (e) {
    toast.<span class="hljs-title function_">show</span>(<span class="hljs-string">"è·å–æ¨¡å‹åˆ—è¡¨å¤±è´¥"</span>, <span class="hljs-string">"error"</span>);
  } <span class="hljs-keyword">finally</span> {
    loadingModels.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
  }
}

<span class="hljs-comment">// AIService.getModels å®ç°</span>
<span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">getModels</span>(<span class="hljs-attr">config</span>: <span class="hljs-title class_">AIConfig</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>[]&gt; {
  <span class="hljs-keyword">if</span> (config.<span class="hljs-property">provider</span> === <span class="hljs-string">"ollama"</span>) {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>(<span class="hljs-string">`<span class="hljs-subst">${config.baseUrl}</span>/api/tags`</span>, {
      <span class="hljs-attr">method</span>: <span class="hljs-string">"GET"</span>
    });
    <span class="hljs-keyword">return</span> res.<span class="hljs-property">models</span>?.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">m: <span class="hljs-built_in">any</span></span>) =&gt;</span> m.<span class="hljs-property">name</span>) || [];
  }
  <span class="hljs-keyword">return</span> [];
}
</code></pre>
<p><strong>ç”¨æˆ·ä½“éªŒï¼š</strong></p>
<ul>
<li>è‡ªåŠ¨æ£€æµ‹æœ¬åœ°å¯ç”¨æ¨¡å‹</li>
<li>ä¸‹æ‹‰é€‰æ‹©ï¼Œæ— éœ€æ‰‹åŠ¨è¾“å…¥</li>
<li>å®æ—¶åˆ·æ–°</li>
</ul>
<hr/>
<h2 data-id="heading-35">å››ã€å¯¹æ¯”åˆ†æ</h2>
<h3 data-id="heading-36">4.1 å³æ—¶æ¸²æŸ“æ¨¡å¼å¯¹æ¯”</h3>




































































<table><thead><tr><th>ç‰¹æ€§</th><th>milkup (feat-ir)</th><th>Typora</th><th>Notion</th><th>VS Code + Markdown Preview</th></tr></thead><tbody><tr><td><strong>å¼€æº</strong></td><td>âœ… æ˜¯</td><td>âŒ å¦</td><td>âŒ å¦</td><td>âœ… æ˜¯</td></tr><tr><td><strong>å³æ—¶æ¸²æŸ“</strong></td><td>âœ… æ˜¯</td><td>âœ… æ˜¯</td><td>âœ… æ˜¯</td><td>âŒ å¦ï¼ˆåˆ†æ é¢„è§ˆï¼‰</td></tr><tr><td><strong>æºç å¯è§</strong></td><td>âœ… å…‰æ ‡èšç„¦æ—¶æ˜¾ç¤º</td><td>âœ… å…‰æ ‡èšç„¦æ—¶æ˜¾ç¤º</td><td>âŒ å®Œå…¨éšè—</td><td>âœ… å§‹ç»ˆæ˜¾ç¤º</td></tr><tr><td><strong>æºç å¯ç¼–è¾‘</strong></td><td>âœ… é“¾æ¥ã€å›¾ç‰‡å¯ç›´æ¥ç¼–è¾‘</td><td>âš ï¸ éƒ¨åˆ†æ”¯æŒ</td><td>âŒ å¦</td><td>âœ… æ˜¯</td></tr><tr><td><strong>æŠ€æœ¯æ ˆ</strong></td><td>ProseMirror + Milkdown</td><td>è‡ªç ”</td><td>è‡ªç ”</td><td>CodeMirror</td></tr><tr><td><strong>æ‰©å±•æ€§</strong></td><td>âœ… æ’ä»¶åŒ–æ¶æ„</td><td>âŒ ä¸æ”¯æŒæ’ä»¶</td><td>âš ï¸ æœ‰é™çš„ API</td><td>âœ… VS Code æ’ä»¶ç”Ÿæ€</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>âœ… ä¼˜ç§€</td><td>âœ… ä¼˜ç§€</td><td>âš ï¸ å¤§æ–‡æ¡£è¾ƒæ…¢</td><td>âœ… ä¼˜ç§€</td></tr><tr><td><strong>è·¨å¹³å°</strong></td><td>âœ… Windows/Mac/Linux</td><td>âœ… Windows/Mac/Linux</td><td>âœ… Web/æ¡Œé¢/ç§»åŠ¨</td><td>âœ… Windows/Mac/Linux</td></tr></tbody></table>
<p><strong>milkup çš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>å¼€æºå…è´¹</strong>ï¼šå®Œå…¨å¼€æºï¼Œå¯è‡ªç”±å®šåˆ¶</li>
<li><strong>ç°ä»£åŒ–æŠ€æœ¯æ ˆ</strong>ï¼šåŸºäº Vue 3 + TypeScript + ProseMirror</li>
<li><strong>å¯æ‰©å±•æ€§å¼º</strong>ï¼šæ’ä»¶åŒ–æ¶æ„ï¼Œæ˜“äºæ·»åŠ æ–°åŠŸèƒ½</li>
<li><strong>æºç ç¼–è¾‘èƒ½åŠ›</strong>ï¼šé“¾æ¥å’Œå›¾ç‰‡å¯ç›´æ¥ç¼–è¾‘ï¼Œæ— éœ€åˆ‡æ¢æ¨¡å¼</li>
</ul>
<p><strong>Typora çš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>æˆç†Ÿç¨³å®š</strong>ï¼šç»è¿‡å¤šå¹´æ‰“ç£¨ï¼ŒåŠŸèƒ½å®Œå–„</li>
<li><strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼šç»†èŠ‚æ‰“ç£¨åˆ°ä½ï¼Œäº¤äº’æµç•…</li>
</ul>
<p><strong>Notion çš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>åä½œèƒ½åŠ›</strong>ï¼šå¤šäººå®æ—¶åä½œ</li>
<li><strong>æ•°æ®åº“åŠŸèƒ½</strong>ï¼šä¸ä»…æ˜¯ç¼–è¾‘å™¨ï¼Œè¿˜æ˜¯çŸ¥è¯†ç®¡ç†å·¥å…·</li>
</ul>
<h3 data-id="heading-37">4.2 AI ç»­å†™åŠŸèƒ½å¯¹æ¯”</h3>




































































<table><thead><tr><th>ç‰¹æ€§</th><th>milkup (feat-ai)</th><th>Cursor</th><th>Notion AI</th><th>GitHub Copilot</th></tr></thead><tbody><tr><td><strong>æ”¯æŒåœºæ™¯</strong></td><td>Markdown æ–‡æ¡£</td><td>ä»£ç ç¼–è¾‘</td><td>æ–‡æ¡£ç¼–è¾‘</td><td>ä»£ç ç¼–è¾‘</td></tr><tr><td><strong>å¤šæä¾›å•†</strong></td><td>âœ… OpenAI/Claude/Gemini/Ollama</td><td>âŒ ä»… OpenAI</td><td>âŒ è‡ªæœ‰æ¨¡å‹</td><td>âŒ ä»… GitHub æ¨¡å‹</td></tr><tr><td><strong>æœ¬åœ°æ¨¡å‹</strong></td><td>âœ… æ”¯æŒ Ollama</td><td>âŒ å¦</td><td>âŒ å¦</td><td>âŒ å¦</td></tr><tr><td><strong>ç»“æ„åŒ–ç†è§£</strong></td><td>âœ… ç†è§£æ ‡é¢˜å±‚çº§</td><td>âœ… ç†è§£ä»£ç ç»“æ„</td><td>âš ï¸ æœ‰é™</td><td>âœ… ç†è§£ä»£ç ä¸Šä¸‹æ–‡</td></tr><tr><td><strong>è§¦å‘æ–¹å¼</strong></td><td>è‡ªåŠ¨é˜²æŠ–è§¦å‘</td><td>è‡ªåŠ¨è§¦å‘</td><td>æ‰‹åŠ¨è§¦å‘</td><td>è‡ªåŠ¨è§¦å‘</td></tr><tr><td><strong>æ¥å—æ–¹å¼</strong></td><td>Tab é”®</td><td>Tab é”®</td><td>ç‚¹å‡»æŒ‰é’®</td><td>Tab é”®</td></tr><tr><td><strong>å¼€æº</strong></td><td>âœ… æ˜¯</td><td>âŒ å¦</td><td>âŒ å¦</td><td>âŒ å¦</td></tr><tr><td><strong>éšç§ä¿æŠ¤</strong></td><td>âœ… æ”¯æŒæœ¬åœ°æ¨¡å‹</td><td>âŒ æ•°æ®ä¸Šä¼ äº‘ç«¯</td><td>âŒ æ•°æ®ä¸Šä¼ äº‘ç«¯</td><td>âŒ æ•°æ®ä¸Šä¼ äº‘ç«¯</td></tr></tbody></table>
<p><strong>milkup çš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>å¤šæä¾›å•†æ”¯æŒ</strong>ï¼šå¯è‡ªç”±é€‰æ‹© AI æœåŠ¡</li>
<li><strong>æœ¬åœ°ä¼˜å…ˆ</strong>ï¼šæ”¯æŒ Ollamaï¼Œä¿æŠ¤éšç§</li>
<li><strong>å¼€æºé€æ˜</strong>ï¼šä»£ç å…¬å¼€ï¼Œå¯å®¡è®¡</li>
<li><strong>é’ˆå¯¹ Markdown</strong>ï¼šä¸“é—¨ä¼˜åŒ–æ–‡æ¡£å†™ä½œåœºæ™¯</li>
</ul>
<p><strong>Cursor/Copilot çš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>ä»£ç ä¸“ç²¾</strong>ï¼šé’ˆå¯¹ä»£ç ç¼–è¾‘ä¼˜åŒ–</li>
<li><strong>ä¸Šä¸‹æ–‡æ›´ä¸°å¯Œ</strong>ï¼šå¯ä»¥ç†è§£æ•´ä¸ªé¡¹ç›®</li>
<li><strong>æˆç†Ÿåº¦é«˜</strong>ï¼šç»è¿‡å¤§é‡ç”¨æˆ·éªŒè¯</li>
</ul>
<p><strong>Notion AI çš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>å¤šåŠŸèƒ½</strong>ï¼šä¸ä»…ç»­å†™ï¼Œè¿˜æ”¯æŒæ€»ç»“ã€ç¿»è¯‘ã€æ”¹å†™ç­‰</li>
<li><strong>é›†æˆåº¦é«˜</strong>ï¼šä¸ Notion ç”Ÿæ€æ·±åº¦é›†æˆ</li>
</ul>
<hr/>
<h2 data-id="heading-38">äº”ã€æ€»ç»“ä¸å±•æœ›</h2>
<h3 data-id="heading-39">5.1 æŠ€æœ¯æ€»ç»“</h3>
<p>é€šè¿‡ feat-ir å’Œ feat-ai ä¸¤ä¸ªåˆ†æ”¯çš„å¼€å‘ï¼Œmilkup åœ¨ Markdown ç¼–è¾‘å™¨é¢†åŸŸå®ç°äº†é‡è¦çªç ´ï¼š</p>
<p><strong>å³æ—¶æ¸²æŸ“æ¨¡å¼ï¼ˆfeat-irï¼‰ï¼š</strong></p>
<ul>
<li>åŸºäº ProseMirror Decoration ç³»ç»Ÿå®ç°</li>
<li>æ™ºèƒ½æ˜¾ç¤ºæºç ï¼Œå…‰æ ‡èšç„¦æ—¶å¯è§</li>
<li>æ”¯æŒé“¾æ¥å’Œå›¾ç‰‡çš„å³æ—¶ç¼–è¾‘</li>
<li>æ€§èƒ½ä¼˜åŒ–ï¼Œå¤§æ–‡æ¡£æµç•…è¿è¡Œ</li>
</ul>
<p><strong>AI ç»­å†™åŠŸèƒ½ï¼ˆfeat-aiï¼‰ï¼š</strong></p>
<ul>
<li>æ”¯æŒ OpenAIã€Claudeã€Geminiã€Ollama ç­‰å¤šä¸ªæä¾›å•†</li>
<li>ç»“æ„åŒ–ç†è§£æ–‡æ¡£ï¼Œæå–æ ‡é¢˜å±‚çº§å’Œä¸Šä¸‹æ–‡</li>
<li>ä¼˜é›…çš„ UI é›†æˆï¼ŒåŠé€æ˜å»ºè®®ä¸å¹²æ‰°é˜…è¯»</li>
<li>é˜²æŠ–å’Œå–æ¶ˆæœºåˆ¶ï¼Œä¼˜åŒ–æ€§èƒ½å’Œæˆæœ¬</li>
</ul>
<p><strong>æŠ€æœ¯äº®ç‚¹ï¼š</strong></p>
<ol>
<li><strong>æ’ä»¶åŒ–æ¶æ„</strong>ï¼šæ˜“äºæ‰©å±•å’Œç»´æŠ¤</li>
<li><strong>ç°ä»£åŒ–æŠ€æœ¯æ ˆ</strong>ï¼šVue 3 + TypeScript + ProseMirror</li>
<li><strong>ç”¨æˆ·ä½“éªŒä¼˜å…ˆ</strong>ï¼šæµç•…çš„äº¤äº’ï¼Œä¼˜é›…çš„è§†è§‰è®¾è®¡</li>
<li><strong>å¼€æºé€æ˜</strong>ï¼šä»£ç å…¬å¼€ï¼Œç¤¾åŒºé©±åŠ¨</li>
</ol>
<h3 data-id="heading-40">5.2 æœªæ¥å±•æœ›</h3>
<p><strong>çŸ­æœŸè®¡åˆ’ï¼š</strong></p>
<ol>
<li>
<p><strong>åŠŸèƒ½å®Œå–„</strong>ï¼š</p>
<ul>
<li>æ”¯æŒæ›´å¤š Markdown å…ƒç´ çš„å³æ—¶æ¸²æŸ“ï¼ˆè¡¨æ ¼ã€å…¬å¼ï¼‰</li>
<li>AI ç»­å†™æ”¯æŒæ›´å¤šåœºæ™¯ï¼ˆä»£ç å—ã€åˆ—è¡¨ï¼‰</li>
<li>æ·»åŠ  AI æ”¹å†™ã€æ€»ç»“ç­‰åŠŸèƒ½</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>å¤§æ–‡æ¡£æ€§èƒ½ä¼˜åŒ–</li>
<li>AI è¯·æ±‚ç¼“å­˜æœºåˆ¶</li>
<li>å¢é‡æ¸²æŸ“</li>
</ul>
</li>
<li>
<p><strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼š</p>
<ul>
<li>æ›´ä¸°å¯Œçš„å¿«æ·é”®</li>
<li>è‡ªå®šä¹‰ä¸»é¢˜</li>
<li>æ›´å¤šé…ç½®é€‰é¡¹</li>
</ul>
</li>
</ol>
<p><strong>é•¿æœŸæ„¿æ™¯ï¼š</strong></p>
<ol>
<li>
<p><strong>åä½œèƒ½åŠ›</strong>ï¼š</p>
<ul>
<li>å¤šäººå®æ—¶åä½œ</li>
<li>ç‰ˆæœ¬æ§åˆ¶é›†æˆ</li>
<li>è¯„è®ºå’Œæ‰¹æ³¨</li>
</ul>
</li>
<li>
<p><strong>çŸ¥è¯†ç®¡ç†</strong>ï¼š</p>
<ul>
<li>åŒå‘é“¾æ¥</li>
<li>æ ‡ç­¾ç³»ç»Ÿ</li>
<li>å…¨æ–‡æœç´¢</li>
</ul>
</li>
<li>
<p><strong>AI æ·±åº¦é›†æˆ</strong>ï¼š</p>
<ul>
<li>æ™ºèƒ½å¤§çº²ç”Ÿæˆ</li>
<li>è‡ªåŠ¨æ’ç‰ˆä¼˜åŒ–</li>
<li>å¤šè¯­è¨€ç¿»è¯‘</li>
<li>è¯­æ³•æ£€æŸ¥å’Œæ”¹è¿›å»ºè®®</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿæ€å»ºè®¾</strong>ï¼š</p>
<ul>
<li>æ’ä»¶å¸‚åœº</li>
<li>ä¸»é¢˜å•†åº—</li>
<li>ç¤¾åŒºè´¡çŒ®</li>
</ul>
</li>
</ol>
<h3 data-id="heading-41">5.3 è‡´è°¢</h3>
<p>æ„Ÿè°¢æ‰€æœ‰ä¸º milkup é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç”¨æˆ·ã€‚ç‰¹åˆ«æ„Ÿè°¢ï¼š</p>
<ul>
<li><strong>Milkdown</strong> å›¢é˜Ÿï¼šæä¾›äº†ä¼˜ç§€çš„ç¼–è¾‘å™¨æ¡†æ¶</li>
<li><strong>ProseMirror</strong> ç¤¾åŒºï¼šå¼ºå¤§çš„ç¼–è¾‘å™¨å†…æ ¸</li>
<li><strong>Vue.js</strong> å›¢é˜Ÿï¼šç°ä»£åŒ–çš„å‰ç«¯æ¡†æ¶</li>
<li><strong>Anthropic</strong>ï¼šClaude Code çš„å¼€å‘æ”¯æŒ</li>
</ul>
<h3 data-id="heading-42">5.4 å‚è€ƒèµ„æº</h3>
<p><strong>é¡¹ç›®åœ°å€ï¼š</strong></p>
<ul>
<li>GitHub: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fauto-plugin%2Fmilkup" target="_blank" title="https://github.com/auto-plugin/milkup" ref="nofollow noopener noreferrer">milkup</a></li>
</ul>
<h2 data-id="heading-43">ç»“è¯­</h2>
<p>milkup çš„å¼€å‘æ˜¯ä¸€æ¬¡æœ‰è¶£çš„æŠ€æœ¯æ¢ç´¢ä¹‹æ—…ã€‚æˆ‘ä»¬ä¸ä»…å®ç°äº†ç±»ä¼¼ Typora çš„å³æ—¶æ¸²æŸ“æ¨¡å¼ï¼Œè¿˜åœ¨ AI é›†æˆæ–¹é¢èµ°åœ¨äº†å‰åˆ—ã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œmilkup çš„æˆé•¿ç¦»ä¸å¼€ç¤¾åŒºçš„æ”¯æŒã€‚æˆ‘ä»¬æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼šä»£ç ã€æ–‡æ¡£ã€å»ºè®®ã€bug æŠ¥å‘Šã€‚è®©æˆ‘ä»¬ä¸€èµ·æ‰“é€ ä¸€ä¸ªæ›´å¥½çš„ Markdown ç¼–è¾‘å™¨ï¼</p>
<p>å¦‚æœä½ å¯¹ milkup æ„Ÿå…´è¶£ï¼Œæ¬¢è¿ï¼š</p>
<ul>
<li>â­ Star é¡¹ç›®</li>
<li>ğŸ› æäº¤ Issue</li>
<li>ğŸ”§ è´¡çŒ®ä»£ç </li>
<li>ğŸ’¬ åŠ å…¥è®¨è®º</li>
</ul>
<p>è®©æˆ‘ä»¬ä¸€èµ·æ¨åŠ¨ Markdown ç¼–è¾‘å™¨çš„å‘å±•ï¼</p>
<hr/>
<p><strong>ä½œè€…ï¼š</strong> å¾·è±å„æ–¯ &amp; Claude Code <strong>æ—¥æœŸï¼š</strong> 2026 å¹´ 2 æœˆ <strong>ç‰ˆæœ¬ï¼š</strong> v1.0</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Rolldown 1.0 RC å‘å¸ƒ !!]]></title>    <link>https://juejin.cn/post/7602544700474966026</link>    <guid>https://juejin.cn/post/7602544700474966026</guid>    <pubDate>2026-02-04T03:31:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602544700474966026" data-draft-id="7602534556076277786" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" Rolldown 1.0 RC å‘å¸ƒ !!"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-04T03:31:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘å®‰ä¸œå°¼"/> <meta itemprop="url" content="https://juejin.cn/user/1521379823340792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             Rolldown 1.0 RC å‘å¸ƒ !!
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379823340792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘å®‰ä¸œå°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T03:31:35.000Z" title="Wed Feb 04 2026 03:31:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fvoidzero.dev%2Fposts%2Fannouncing-rolldown-rc" target="_blank" title="https://voidzero.dev/posts/announcing-rolldown-rc" ref="nofollow noopener noreferrer">Announcing Rolldown 1.0 RC</a></p>
<p>ä½œè€…ï¼šsapphi-red</p>
<p>ç¿»è¯‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN" target="_blank" title="https://github.com/TUARAN" ref="nofollow noopener noreferrer">TUARAN</a></p>
</blockquote>
<blockquote>
<p>æ¬¢è¿å…³æ³¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" target="_blank" title="https://github.com/TUARAN/frontend-weekly-digest-cn" ref="nofollow noopener noreferrer">å‰ç«¯å‘¨åˆŠ</a>ï¼Œæ¯å‘¨æ›´æ–°å›½å¤–è®ºå›çš„å‰ç«¯çƒ­é—¨æ–‡ç« ï¼Œç´§è·Ÿæ—¶äº‹ï¼ŒæŒæ¡å‰ç«¯æŠ€æœ¯åŠ¨æ€ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd8b91bcd74a4ef083de3ab73925ff7b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770780695&amp;x-signature=bAZXUaujiQfnEHmcaTm93cBCTFw%3D" alt="image.png" loading="lazy"/></p>
<p>ä»Šå¤©æˆ‘ä»¬éå¸¸å…´å¥‹åœ°å®£å¸ƒ Rolldown 1.0 çš„å€™é€‰ç‰ˆæœ¬ï¼ˆRelease Candidateï¼ŒRCï¼‰ã€‚</p>
<p><strong>TL;DR</strong>ï¼šRolldown æ˜¯ä¸€ä¸ªç”¨ Rust ç¼–å†™çš„ JavaScript/TypeScript æ‰“åŒ…å™¨ã€‚åœ¨ä¿æŒä¸ Rollup æ’ä»¶ API å…¼å®¹çš„åŒæ—¶ï¼Œå®ƒæ¯” Rollup å¿« 10â€“30 å€ã€‚æœ¬æ¬¡ RC æ ‡å¿—ç€ API è¿›å…¥ç¨³å®šé˜¶æ®µï¼šåœ¨ 1.0 æ­£å¼ç‰ˆå‘å¸ƒå‰ï¼Œæˆ‘ä»¬ä¸è®¡åˆ’å¼•å…¥ç ´åæ€§å˜æ›´ã€‚æˆ‘ä»¬é¼“åŠ±ä½ åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­è¯•ç”¨ï¼Œå¹¶åœ¨é‡åˆ°é—®é¢˜æ—¶åˆ° GitHub ä¸Šåé¦ˆï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frolldown%2Frolldown%2Fissues" target="_blank" title="https://github.com/rolldown/rolldown/issues" ref="nofollow noopener noreferrer">github.com/rolldown/roâ€¦</a>ã€‚</p>
<blockquote>
<p>åœ¨ç”¨ Viteï¼Ÿ</p>
<p>ç°åœ¨å°±å¯ä»¥é€šè¿‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Fvoidzero.dev%2Fposts%2Fannouncing-vite-8-beta" target="_blank" title="https://voidzero.dev/posts/announcing-vite-8-beta" ref="nofollow noopener noreferrer">Vite 8 beta</a> ä½“éªŒ Rolldownï¼ˆè¯¥ç‰ˆæœ¬é»˜è®¤ä½¿ç”¨ Rolldown ä½œä¸ºæ‰“åŒ…å™¨ï¼‰ã€‚</p>
</blockquote>
<h2 data-id="heading-0">Rolldown æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>Rolldown æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ JavaScript æ‰“åŒ…å™¨ï¼Œç›®æ ‡æ˜¯æˆä¸º <a href="https://link.juejin.cn?target=https%3A%2F%2Fvite.dev%2F" target="_blank" title="https://vite.dev/" ref="nofollow noopener noreferrer">Vite</a> çš„ä¸‹ä¸€ä»£é»˜è®¤æ‰“åŒ…å™¨ã€‚å®ƒè¯•å›¾åŒæ—¶æ‹¿åˆ°ä¸¤è¾¹çš„ä¼˜åŠ¿ï¼šæ—¢æœ‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fesbuild.github.io%2F" target="_blank" title="https://esbuild.github.io/" ref="nofollow noopener noreferrer">esbuild</a> çš„é€Ÿåº¦ï¼Œåˆä¿ç•™äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Frollupjs.org%2F" target="_blank" title="https://rollupjs.org/" ref="nofollow noopener noreferrer">Rollup</a> çš„ç”Ÿæ€å…¼å®¹æ€§ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼ŒRolldown è¿˜æä¾›äº†ä¸€äº›ä¸¤è€…éƒ½æ²¡æœ‰çš„èƒ½åŠ›ï¼Œä¾‹å¦‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Frolldown.rs%2Freference%2FOutputOptions.codeSplitting" target="_blank" title="https://rolldown.rs/reference/OutputOptions.codeSplitting" ref="nofollow noopener noreferrer"><code>output.codeSplitting</code></a> â€”â€”å®ƒèƒ½è®©ä½ è·å¾—ç±»ä¼¼ webpack é‚£æ ·æ›´â€œç»†é¢—ç²’åº¦â€çš„åˆ†åŒ…æ§åˆ¶èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-1">å…³é”®ç‰¹æ€§</h2>
<ul>
<li><strong>æ¯” Rollup å¿« 10â€“30 å€</strong>ï¼šåŸç”Ÿ Rust æ€§èƒ½ + å¹¶è¡Œå¤„ç†ï¼ŒåŒæ—¶æä¾› WASM æ„å»ºä»¥æå‡å¯ç§»æ¤æ€§</li>
<li><strong>å…¼å®¹ Rollup çš„æ’ä»¶ API</strong>ï¼šç»å¤§å¤šæ•°ç°æœ‰ Rollup æ’ä»¶å¯ä»¥ç›´æ¥ä½¿ç”¨</li>
<li><strong>å†…ç½®è½¬æ¢èƒ½åŠ›</strong>ï¼šTypeScriptã€JSXã€è¯­æ³•é™çº§ç”± <a href="https://link.juejin.cn?target=https%3A%2F%2Foxc.rs%2F" target="_blank" title="https://oxc.rs/" ref="nofollow noopener noreferrer">Oxc</a> æä¾›</li>
<li><strong>åŸç”Ÿçš„ CJS/ESM äº’æ“ä½œ</strong>ï¼šä¸å†éœ€è¦ <code>@rollup/plugin-commonjs</code></li>
<li><strong>å†…ç½® Node.js æ¨¡å—è§£æ</strong>ï¼šä¸å†éœ€è¦ <code>@rollup/plugin-node-resolve</code></li>
<li><strong>æ›´ç²¾ç»†çš„ä»£ç æ‹†åˆ†</strong>ï¼šé€šè¿‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Frolldown.rs%2Freference%2FOutputOptions.codeSplitting" target="_blank" title="https://rolldown.rs/reference/OutputOptions.codeSplitting" ref="nofollow noopener noreferrer"><code>output.codeSplitting</code></a> æä¾› webpack é£æ ¼çš„ chunk æ§åˆ¶ï¼ˆè¿™æ˜¯ Rollup æ‰€ä¸å…·å¤‡çš„ï¼‰</li>
</ul>
<p>å®Œæ•´æ¸…å•å¯æŸ¥çœ‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Frolldown.rs%2Fguide%2Fnotable-features" target="_blank" title="https://rolldown.rs/guide/notable-features" ref="nofollow noopener noreferrer">Notable Features</a>ã€‚</p>
<h2 data-id="heading-2">å¿«é€Ÿä¸Šæ‰‹</h2>
<p>å®‰è£… Rolldownï¼š</p>
<pre><code class="hljs language-sh" lang="sh">npm install -D rolldown
<span class="hljs-comment"># æˆ–</span>
pnpm add -D rolldown
<span class="hljs-comment"># æˆ–</span>
yarn add -D rolldown
<span class="hljs-comment"># æˆ–</span>
bun add -D rolldown
</code></pre>
<p>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'rolldown'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">input</span>: <span class="hljs-string">'src/main.js'</span>,
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">file</span>: <span class="hljs-string">'dist/bundle.js'</span>,
  },
})
</code></pre>
<p>è¿è¡Œæ„å»ºï¼š</p>
<pre><code class="hljs language-sh" lang="sh">npx rolldown -c
<span class="hljs-comment"># æˆ–</span>
pnpm rolldown -c
<span class="hljs-comment"># æˆ–</span>
yarn rolldown -c
<span class="hljs-comment"># æˆ–</span>
bunx rolldown -c
</code></pre>
<h2 data-id="heading-3">â€œRCâ€ æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</h2>
<p>è¿™æ¬¡ Release Candidate ä»£è¡¨ <strong>API ç¨³å®š</strong>ï¼šåœ¨ 1.0 æ­£å¼ç‰ˆå‘å¸ƒå‰ï¼ŒRolldown çš„å…¬å…± API ä¸è®¡åˆ’å†åšç ´åæ€§å˜æ›´ã€‚</p>
<p><strong>å…³äºå®éªŒç‰¹æ€§çš„ä¸€ç‚¹è¯´æ˜</strong>ï¼šç›®å‰ä»æœ‰ä¸€éƒ¨åˆ†èƒ½åŠ›å¤„äº experimental çŠ¶æ€ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frolldown.rs%2Fin-depth%2Fmodule-types" target="_blank" title="https://rolldown.rs/in-depth/module-types" ref="nofollow noopener noreferrer">Module types</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frolldown.rs%2Freference%2FFunction.watch" target="_blank" title="https://rolldown.rs/reference/Function.watch" ref="nofollow noopener noreferrer">Watch mode</a></li>
</ul>
<p>å®éªŒç‰¹æ€§ä¼šåœ¨æ–‡æ¡£ä¸­æ˜ç¡®æ ‡æ³¨ï¼›å³ä½¿ Rolldown è¿›å…¥ 1.0 ä¹‹åï¼Œå®ƒä»¬ä»å¯èƒ½å‘ç”Ÿç ´åæ€§å˜æ›´ã€‚å¦‚æœè¦åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼Œå»ºè®®å…ˆåšå……åˆ†éªŒè¯ã€‚</p>
<h2 data-id="heading-4">æˆ‘ä»¬æœ€è¿‘åšäº†ä»€ä¹ˆï¼Ÿ</h2>
<p>ä» beta.1 ä»¥æ¥ï¼Œæˆ‘ä»¬å·²ç»åˆå…¥äº†è¶…è¿‡ 3,400 ä¸ªæäº¤ï¼š<strong>749</strong> ä¸ªåŠŸèƒ½ã€<strong>682</strong> ä¸ª Bug ä¿®å¤ã€<strong>109</strong> ä¸ªæ€§èƒ½ä¼˜åŒ–ï¼Œä»¥åŠ <strong>166</strong> ä¸ªæ–‡æ¡£æ›´æ–°ã€‚</p>
<h3 data-id="heading-5">Vite é›†æˆ</h3>
<p>æˆ‘ä»¬å°†å¤šä¸ª Vite å†…éƒ¨æ’ä»¶ç§»æ¤åˆ°äº† Rustï¼Œä»¥æå‡å¸¸è§åœºæ™¯çš„æ€§èƒ½ã€‚åŒæ—¶æˆ‘ä»¬ä¹Ÿåœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fv7.vite.dev%2Fguide%2Frolldown" target="_blank" title="https://v7.vite.dev/guide/rolldown" ref="nofollow noopener noreferrer">rolldown-vite</a> ä»¥åŠåç»­çš„ Vite 8 beta ä¸­æŒç»­éªŒè¯ç¨³å®šæ€§ã€‚</p>
<h3 data-id="heading-6">æ€§èƒ½</h3>
<p>109 ä¸ªæ€§èƒ½ç›¸å…³æäº¤åŒ…æ‹¬ï¼šSIMD JSON è½¬ä¹‰ã€å¹¶è¡Œ chunk ç”Ÿæˆã€ç¬¦å·é‡å‘½åä¼˜åŒ–ã€æ›´å¿«çš„ sourcemap å¤„ç†ç­‰ã€‚</p>
<p>é™¤äº† Rolldown æœ¬èº«ï¼Œæä¾›è½¬æ¢å™¨ä¸è§£æå™¨èƒ½åŠ›çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Foxc.rs%2F" target="_blank" title="https://oxc.rs/" ref="nofollow noopener noreferrer">Oxc</a> ä¹Ÿå˜å¾—æ›´å¿«äº†ã€‚</p>
<h3 data-id="heading-7">æ›´å¥½çš„åˆ†åŒ…</h3>
<p>æˆ‘ä»¬æ”¹è¿›äº†åˆ†åŒ…ç®—æ³•ï¼Œè®©äº§å‡ºçš„ chunk æ•°é‡æ›´å°‘ã€‚å¯¹äºé‚£äº›åŠ¨æ€å¯¼å…¥ã€ä½†å®é™…å¼•ç”¨çš„æ˜¯â€œå·²ç»åŠ è½½è¿‡çš„æ¨¡å—â€çš„åœºæ™¯ï¼Œç°åœ¨ä¼šç›´æ¥å†…è”ï¼›è€Œä¸€äº›å°çš„ wrapper chunk åœ¨å¯èƒ½æ—¶ä¹Ÿä¼šä¸ç›®æ ‡ chunk åˆå¹¶ã€‚</p>
<h3 data-id="heading-8">å…¼å®¹æ€§</h3>
<p>æˆ‘ä»¬ç»§ç»­æ‰©å¤§å¯¹ Rollup ä¸ esbuild çš„å…¼å®¹è¦†ç›–ã€‚å½“å‰ Rolldown å·²é€šè¿‡ 900+ ä¸ª Rollup æµ‹è¯•å’Œ 670+ ä¸ª esbuild æµ‹è¯•ã€‚</p>
<p>æ–°è¡¥é½çš„ä¸€äº› Rollup é€‰é¡¹ç¤ºä¾‹ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frolldown.rs%2Freference%2FOutputOptions.dynamicImportInCjs" target="_blank" title="https://rolldown.rs/reference/OutputOptions.dynamicImportInCjs" ref="nofollow noopener noreferrer"><code>output.dynamicImportInCjs</code></a>ï¼šæ§åˆ¶åœ¨ CJS è¾“å‡ºé‡Œå¦‚ä½•æ¸²æŸ“åŠ¨æ€å¯¼å…¥</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frolldown.rs%2Freference%2FInputOptions.watch%23oninvalidate" target="_blank" title="https://rolldown.rs/reference/InputOptions.watch#oninvalidate" ref="nofollow noopener noreferrer"><code>watch.onInvalidate</code></a>ï¼šç›‘å¬æ¨¡å¼ä¸‹ï¼Œæ–‡ä»¶è§¦å‘é‡å»ºæ—¶çš„ hook</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frolldown.rs%2Freference%2FOutputOptions.minifyInternalExports" target="_blank" title="https://rolldown.rs/reference/OutputOptions.minifyInternalExports" ref="nofollow noopener noreferrer"><code>output.minifyInternalExports</code></a>ï¼šå‹ç¼©å†…éƒ¨å¯¼å‡ºåä»¥å‡å°ä½“ç§¯</li>
</ul>
<p>æˆ‘ä»¬è¿˜å¢åŠ äº†å¯¹ Node.js <code>module.exports</code> çš„ ESM å¯¼å‡ºå½¢å¼çš„æ”¯æŒï¼Œä»¥å¯¹é½ Node.js å…³äº <code>require(ESM)</code> çš„æ–°è¡Œä¸ºï¼š
<a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fdocs%2Flatest-v24.x%2Fapi%2Fmodules.html%23loading-ecmascript-modules-using-require" target="_blank" title="https://nodejs.org/docs/latest-v24.x/api/modules.html#loading-ecmascript-modules-using-require" ref="nofollow noopener noreferrer">nodejs.org/docs/latestâ€¦</a></p>
<h3 data-id="heading-9">API ç¨³å®šåŒ–</h3>
<p>æˆ‘ä»¬å°†ä¸€äº› API ä» experimental æå‡ï¼Œå¹¶å¯¹é½é»˜è®¤å€¼ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frolldown.rs%2Freference%2FOutputOptions.strictExecutionOrder" target="_blank" title="https://rolldown.rs/reference/OutputOptions.strictExecutionOrder" ref="nofollow noopener noreferrer"><code>output.strictExecutionOrder</code></a>ï¼šä» <code>experimental</code> ä¸­ç§»å‡º</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frolldown.rs%2Freference%2FOutputOptions.codeSplitting" target="_blank" title="https://rolldown.rs/reference/OutputOptions.codeSplitting" ref="nofollow noopener noreferrer"><code>output.codeSplitting</code></a>ï¼šä» <code>output.advancedChunks</code> æ›´åè€Œæ¥</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frolldown.rs%2Freference%2FInputOptions.tsconfig" target="_blank" title="https://rolldown.rs/reference/InputOptions.tsconfig" ref="nofollow noopener noreferrer"><code>tsconfig</code> è‡ªåŠ¨å‘ç°</a>ï¼šé»˜è®¤å¯ç”¨</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frolldown.rs%2Freference%2FInputOptions.preserveEntrySignatures" target="_blank" title="https://rolldown.rs/reference/InputOptions.preserveEntrySignatures" ref="nofollow noopener noreferrer"><code>preserveEntrySignatures</code></a>ï¼šé»˜è®¤å€¼è°ƒæ•´ä¸º <code>'exports-only'</code></li>
<li>é€šè¿‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Frolldown.rs%2Freference%2FInputOptions.checks%23plugintimings" target="_blank" title="https://rolldown.rs/reference/InputOptions.checks#plugintimings" ref="nofollow noopener noreferrer"><code>checks.pluginTimings</code></a> æä¾›æ’ä»¶è€—æ—¶è¯Šæ–­</li>
</ul>
<h3 data-id="heading-10">å¼€å‘ä½“éªŒ</h3>
<p>æ›´å¥½çš„é”™è¯¯æç¤ºï¼ˆå¸¦æ–‡æ¡£é“¾æ¥ï¼‰ã€ç”¨äºå´©æºƒä¸ŠæŠ¥çš„è‡ªå®šä¹‰ panic hookï¼Œä»¥åŠä¸ Rollup å¯¹é½çš„ä¸€æ‰¹æ–°è¯Šæ–­ï¼ˆå¦‚ <code>CIRCULAR_REEXPORT</code>ã€<code>CANNOT_CALL_NAMESPACE</code>ï¼‰ã€‚</p>
<h3 data-id="heading-11">æ–‡æ¡£</h3>
<p>æˆ‘ä»¬è¡¥é½äº†æ­¤å‰ç¼ºå¤±çš„æ–‡æ¡£ï¼š</p>
<ul>
<li>åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Frolldown.rs%2Freference%2F" target="_blank" title="https://rolldown.rs/reference/" ref="nofollow noopener noreferrer">API reference</a> ä¸­ä¸ºå…¨éƒ¨é€‰é¡¹ã€å‡½æ•°ã€ç±»å‹æä¾›äº†ä¸“é—¨é¡µé¢</li>
<li>åŸºäº Rollup æ–‡æ¡£å¹¶åŠ å…¥ Rolldown æ‰©å±•çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Frolldown.rs%2Fapis%2Fplugin-api" target="_blank" title="https://rolldown.rs/apis/plugin-api" ref="nofollow noopener noreferrer">Plugin API</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frolldown.rs%2Fapis%2Fcli" target="_blank" title="https://rolldown.rs/apis/cli" ref="nofollow noopener noreferrer">CLI reference</a></li>
</ul>
<h2 data-id="heading-12">èµ°å‘ 1.0 ä¸ Vite 8 çš„è·¯çº¿å›¾</h2>
<p>æˆ‘ä»¬çš„åç»­è·¯å¾„å¤§è‡´æ˜¯ï¼š</p>
<ul>
<li><strong>RC é˜¶æ®µ</strong>ï¼šæ”¶é›†ç¤¾åŒºåé¦ˆã€ä¿®å¤å…³é”®é—®é¢˜ã€ç¡®ä¿ API ç¨³å®šã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æŠŠç ´åæ€§å˜æ›´é™åˆ°é›¶ã€‚</li>
<li><strong>Vite 8</strong>ï¼šé»˜è®¤ä½¿ç”¨ Rolldown ä½œä¸ºæ‰“åŒ…å™¨ï¼Œåœ¨ç”Ÿäº§æ„å»ºç®¡çº¿ä¸­åŒæ—¶æ›¿æ¢ esbuild ä¸ Rollupã€‚</li>
<li><strong>Rolldown 1.0</strong>ï¼šå½“ RC åœ¨çœŸå®ç”Ÿäº§ç”¨ä¾‹ä¸­è¯æ˜å¯é åï¼Œå‘å¸ƒç¨³å®šç‰ˆæœ¬ã€‚</li>
</ul>
<p>Rolldown é›†æˆè¿› Vite åï¼Œä¼šç»Ÿä¸€æ„å»ºç®¡çº¿ï¼Œæ¶ˆé™¤å½“å‰â€œä¸¤ä¸ªæ‰“åŒ…å™¨å¹¶å­˜â€çš„æ¶æ„ï¼Œä»è€Œè®©å¼€å‘ä¸ç”Ÿäº§çš„è¡Œä¸ºæ›´åŠ ä¸€è‡´ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šVite 8 å¾ˆå¯èƒ½ä¼šå…ˆäº Rolldown 1.0 å‘å¸ƒï¼Œå› ä¸º Rolldown 1.0 çš„éƒ¨åˆ†ç›®æ ‡å¹¶ä¸æ˜¯ Vite é›†æˆçš„å‰ç½®æ¡ä»¶ã€‚</p>
<h2 data-id="heading-13">è‡´è°¢</h2>
<p>Rolldown 1.0 RC æ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frolldown%2Frolldown%2Fgraphs%2Fcontributors" target="_blank" title="https://github.com/rolldown/rolldown/graphs/contributors" ref="nofollow noopener noreferrer">150+ ä½è´¡çŒ®è€…</a> å…±åŒåŠªåŠ›çš„æˆæœã€‚æ„Ÿè°¢æ¯ä¸€ä½è´¡çŒ®ä»£ç ã€æäº¤ issueã€ä»¥åŠå¸®å¿™ä¼ æ’­çš„äººã€‚</p>
<p>åŒæ—¶æˆ‘ä»¬ä¹Ÿéå¸¸æ„Ÿè°¢å¯å‘ Rolldown çš„é¡¹ç›®ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frollup%2Frollup" target="_blank" title="https://github.com/rollup/rollup" ref="nofollow noopener noreferrer">Rollup</a>ï¼ˆRich Harrisã€Lukas Taegert-Atkinsonï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fevanw%2Fesbuild" target="_blank" title="https://github.com/evanw/esbuild" ref="nofollow noopener noreferrer">esbuild</a>ï¼ˆEvan Wallaceï¼‰</li>
</ul>
<h2 data-id="heading-14">åŠ å…¥ç¤¾åŒº</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fchat.rolldown.rs%2F" target="_blank" title="https://chat.rolldown.rs/" ref="nofollow noopener noreferrer">Discord</a>ï¼šå’Œå›¢é˜Ÿä¸å…¶ä»–ç”¨æˆ·äº¤æµ</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frolldown%2Frolldown" target="_blank" title="https://github.com/rolldown/rolldown" ref="nofollow noopener noreferrer">GitHub</a>ï¼šç‚¹ Starã€æ issueã€å‚ä¸è´¡çŒ®</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frolldown.rs%2Fcontribution-guide%2F" target="_blank" title="https://rolldown.rs/contribution-guide/" ref="nofollow noopener noreferrer">Contributing Guide</a>ï¼šä»è¿™é‡Œå¼€å§‹å‚ä¸è´¡çŒ®</li>
</ul>
<h2 data-id="heading-15">å»è¯•è¯•å§</h2>
<p>Rolldown å·²ç»å‡†å¤‡å¥½æ¥å—çœŸå®ä¸–ç•Œçš„æ£€éªŒã€‚æŠŠå®ƒç”¨åœ¨ä½ çš„é¡¹ç›®é‡Œï¼Œçœ‹çœ‹æ•ˆæœå¦‚ä½•ã€‚</p>
<p>å¦‚æœä½ é‡åˆ°é—®é¢˜ï¼Œè¯·åˆ° GitHub ä¸Šæä¸€ä¸ª issueï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frolldown%2Frolldown%2Fissues" target="_blank" title="https://github.com/rolldown/rolldown/issues" ref="nofollow noopener noreferrer">github.com/rolldown/roâ€¦</a>ã€‚ä½ åœ¨ RC é˜¶æ®µç»™å‡ºçš„åé¦ˆï¼Œä¼šç›´æ¥å½±å“åˆ° 1.0 çš„æœ€ç»ˆå½¢æ€ã€‚</p>
<p>æœŸå¾…çœ‹åˆ°ä½ ç”¨ Rolldown æ„å»ºå‡ºçš„ä½œå“ã€‚</p>
<h2 data-id="heading-16">å°ç»“</h2>
<p>å‰ç«¯æ„å»ºå·¥å…·å¼€å§‹ä»â€œèƒ½ç”¨â€è½¬å‘â€œé•¿æœŸå¯æ‰˜ä»˜â€ã€‚Rolldown ç”¨ Rust é‡å†™æ‰“åŒ…æ ¸å¿ƒï¼Œåœ¨é€Ÿåº¦ã€åˆ†åŒ…æ§åˆ¶å’Œç”Ÿæ€å…¼å®¹ä¹‹é—´ç»™å‡ºäº†ä¸€ä¸ªæ›´ç¨³çš„å·¥ç¨‹è§£æ³•ï¼Œä½†çœŸæ­£è½åœ°æ—¶ï¼Œå›¢é˜Ÿè¿˜éœ€è¦é‡æ–°å®¡è§†æ„å»ºé“¾è·¯ã€æ’ä»¶ä¾èµ–å’Œå‘å¸ƒèŠ‚å¥çš„æ•´ä½“æ•ˆç‡ã€‚å®è·µä¸­ï¼Œå¯ä»¥ç»“åˆ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rollcode.cn%2F%3Fsource%3Dba%26id%3Dfrontendweekly" target="_blank" title="https://www.rollcode.cn/?source=ba&amp;id=frontendweekly" ref="nofollow noopener noreferrer">RollCode ä½ä»£ç å¹³å°</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rollcode.cn%2F%3Fsource%3Dba%26id%3Dfrontendweekly" target="_blank" title="https://www.rollcode.cn/?source=ba&amp;id=frontendweekly" ref="nofollow noopener noreferrer">ç§æœ‰åŒ–éƒ¨ç½²</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rollcode.cn%2F%3Fsource%3Dba%26id%3Dfrontendweekly" target="_blank" title="https://www.rollcode.cn/?source=ba&amp;id=frontendweekly" ref="nofollow noopener noreferrer">è‡ªå®šä¹‰ç»„ä»¶</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rollcode.cn%2F%3Fsource%3Dba%26id%3Dfrontendweekly" target="_blank" title="https://www.rollcode.cn/?source=ba&amp;id=frontendweekly" ref="nofollow noopener noreferrer">é™æ€é¡µé¢å‘å¸ƒï¼ˆSSG + SEOï¼‰</a>ï¼ŒæŠŠæ–°ä¸€ä»£æ„å»ºèƒ½åŠ›æ›´å¹³æ»‘åœ°æ¥å…¥ç°æœ‰å·¥ç¨‹ä½“ç³»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OpenClawï¼ˆåŸClawdbotï¼‰æˆæœ¬å…¨è§£æï¼šå¼€æºå…è´¹å¤–è¡£ä¸‹ï¼ŒçœŸå®å¼€é”€ç«Ÿå¦‚æ­¤æƒŠäºº]]></title>    <link>https://juejin.cn/post/7602529888483508287</link>    <guid>https://juejin.cn/post/7602529888483508287</guid>    <pubDate>2026-02-04T03:37:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602529888483508287" data-draft-id="7602503154506547241" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OpenClawï¼ˆåŸClawdbotï¼‰æˆæœ¬å…¨è§£æï¼šå¼€æºå…è´¹å¤–è¡£ä¸‹ï¼ŒçœŸå®å¼€é”€ç«Ÿå¦‚æ­¤æƒŠäºº"/> <meta itemprop="keywords" content="å¼€æº,äººå·¥æ™ºèƒ½,æœºå™¨å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-02-04T03:37:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éä¼˜ç§€ç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/3984285870341288"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OpenClawï¼ˆåŸClawdbotï¼‰æˆæœ¬å…¨è§£æï¼šå¼€æºå…è´¹å¤–è¡£ä¸‹ï¼ŒçœŸå®å¼€é”€ç«Ÿå¦‚æ­¤æƒŠäºº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3984285870341288/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éä¼˜ç§€ç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T03:37:52.000Z" title="Wed Feb 04 2026 03:37:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">OpenClawï¼ˆåŸClawdbotï¼‰æˆæœ¬å…¨è§£æï¼šå¼€æºå…è´¹å¤–è¡£ä¸‹ï¼ŒçœŸå®å¼€é”€ç«Ÿå¦‚æ­¤æƒŠäºº</h2>
<p>OpenClawï¼ˆå‰èº«ä¸ºClawdbotï¼‰ç†è®ºä¸Šæ˜¯å…è´¹çš„â€”â€”å®ƒåŸºäºMITè®¸å¯è¯å¼€æºï¼Œä½†ç”¨æˆ·ä»¬é€æ¸å‘ç°ï¼Œå…¶å®é™…ä½¿ç”¨æˆæœ¬å¯èƒ½é«˜å¾—ç¦»è°±ã€‚</p>
<p>MacStories åšä¸»è´¹å¾·é‡Œç§‘Â·ç»´è’‚å¥‡ï¼Œé¦–æœˆå°±æ¶ˆè€—äº†<strong>1.8äº¿ä¸ªtoken</strong>ï¼ŒæŒ‰å…‹åŠ³å¾·åå››è¡Œè¯—ï¼ˆClaude Sonnetï¼‰çš„è®¡è´¹æ ‡å‡†ï¼Œè¿™ç¬”å¼€é”€é«˜è¾¾<strong>3600ç¾å…ƒ</strong>ã€‚</p>
<p>è¿˜æœ‰ç”¨æˆ·åé¦ˆï¼Œå› è‡ªåŠ¨åŒ–æµç¨‹å¤±æ§å½¢æˆå¾ªç¯ï¼Œ<strong>å•æ—¥èŠ±è´¹å°±è¶…200ç¾å…ƒ</strong>ã€‚</p>
<p>OpenClaw çœŸå®æˆæœ¬åˆ°åº•å¤šå°‘ï¼Ÿä¸‹æ–‡ä¸ºä½ é€ä¸€æ‹†è§£ã€‚</p>
<hr/>
<h3 data-id="heading-1">OpenClawï¼ˆåŸClawdbotï¼‰æˆæœ¬æ‹†è§£</h3>
<p>æ•´ä½“æˆæœ¬å¯åˆ†ä¸ºä¸‰å¤§ç±»ï¼Œæ ¸å¿ƒå¼€é”€å·®å¼‚ä¸»è¦é›†ä¸­åœ¨åä¸¤ç±»ï¼š</p>
<h4 data-id="heading-2">ä¸€ã€ è½¯ä»¶æˆæœ¬ï¼š0ç¾å…ƒï¼ˆå®Œå…¨å…è´¹ï¼‰</h4>
<p>OpenClawï¼ˆåŸClawdbotï¼‰æœ¬ä½“åŸºäºMITè®¸å¯è¯å¼€æºï¼Œå®Œå…¨å…è´¹ã€‚ä½ å¯è‡ªç”±ä¸‹è½½ã€ä¿®æ”¹ä»£ç ã€éƒ¨ç½²ä½¿ç”¨ï¼Œæ— éœ€ä¸ºè½¯ä»¶æœ¬èº«æ”¯ä»˜ä»»ä½•è´¹ç”¨ã€‚</p>
<h4 data-id="heading-3">äºŒã€ éƒ¨ç½²æ‰˜ç®¡æˆæœ¬ï¼š0-12ç¾å…ƒ/æœˆ</h4>
<p>éƒ¨ç½²æ–¹å¼çµæ´»ï¼Œæˆæœ¬å¯è‡ªä¸»æ§åˆ¶ï¼Œå¤šæ•°ç”¨æˆ·5-12ç¾å…ƒ/æœˆå³å¯æ»¡è¶³éœ€æ±‚ï¼Œç”¨è‡ªæœ‰è®¾å¤‡æœ¬åœ°éƒ¨ç½²å¯å½»åº•çœå»è¯¥ç¬”å¼€é”€ã€‚</p>








































<table><thead><tr><th>æ‰˜ç®¡æ–¹å¼</th><th>é…ç½®è§„æ ¼</th><th>æœˆå‡æˆæœ¬</th></tr></thead><tbody><tr><td>è‡ªæœ‰æœ¬åœ°è®¾å¤‡</td><td>ä¸ªäººç°æœ‰ç”µè„‘/è®¾å¤‡</td><td>0ç¾å…ƒï¼ˆä»…ç”µè´¹ï¼‰</td></tr><tr><td>æ ‘è“æ´¾</td><td>ä¸€æ¬¡æ€§ç¡¬ä»¶æŠ•å…¥50-100ç¾å…ƒ</td><td>0ç¾å…ƒï¼ˆæ— åç»­è´¹ç”¨ï¼‰</td></tr><tr><td>Linode</td><td>1GB å†…å­˜äº‘æœåŠ¡å™¨ï¼ˆVPSï¼‰</td><td>5ç¾å…ƒ</td></tr><tr><td>DigitalOcean</td><td>1GB å†…å­˜äº‘ä¸»æœº</td><td>6ç¾å…ƒ</td></tr><tr><td>DigitalOcean</td><td>2GB å†…å­˜äº‘ä¸»æœº</td><td>12ç¾å…ƒ</td></tr><tr><td>Railway</td><td>æŒ‰å®é™…ä½¿ç”¨é‡è®¡è´¹</td><td>5-20ç¾å…ƒ</td></tr></tbody></table>
<h4 data-id="heading-4">ä¸‰ã€ APIä»¤ç‰Œæˆæœ¬ï¼š10-150ç¾å…ƒ+/æœˆ</h4>
<p>è¿™æ˜¯æˆæœ¬é£™å‡çš„æ ¸å¿ƒç¯èŠ‚ï¼OpenClaw ä¾èµ–å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰è¿è¡Œï¼ŒæŒ‰tokenæ¶ˆè€—è®¡è´¹ï¼Œä¸åŒæ¨¡å‹ä»·å·®æ˜¾è‘—ï¼Œä¹Ÿæ˜¯è¶…æ”¯é‡ç¾åŒºã€‚</p>



































<table><thead><tr><th>æ¨¡å‹æä¾›å•†</th><th>æ¨¡å‹å‹å·</th><th>è¾“å…¥å•ä»·ï¼ˆæ¯ç™¾ä¸‡tokenï¼‰</th><th>è¾“å‡ºå•ä»·ï¼ˆæ¯ç™¾ä¸‡tokenï¼‰</th></tr></thead><tbody><tr><td>Anthropic</td><td>Claude Sonnetï¼ˆåå››è¡Œè¯—ï¼‰</td><td>3ç¾å…ƒ</td><td>15ç¾å…ƒ</td></tr><tr><td>Anthropic</td><td>Claude Opusï¼ˆä½œå“ï¼‰</td><td>5ç¾å…ƒ</td><td>25ç¾å…ƒ</td></tr><tr><td>OpenAI</td><td>GPT-4</td><td>10ç¾å…ƒ</td><td>30ç¾å…ƒ</td></tr><tr><td>OpenAI</td><td>GPT-4 Turbo</td><td>10ç¾å…ƒ</td><td>30ç¾å…ƒ</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-5">çœŸå®ç”¨æˆ·æˆæœ¬æ¡ˆä¾‹ï¼ˆè¦†ç›–ä¸åŒä½¿ç”¨åœºæ™¯ï¼‰</h3>
<p>ä¸åŒä½¿ç”¨å¼ºåº¦ä¸‹ï¼Œå¼€é”€å¤©å·®åœ°åˆ«ï¼Œæç«¯åœºæ™¯ç”šè‡³ä¼šé€ æˆå·¨é¢èŠ±è´¹ï¼š</p>
<h4 data-id="heading-6">1. é‡åº¦ç”¨æˆ·ï¼šè´¹å¾·é‡Œç§‘Â·ç»´è’‚å¥‡ï¼ˆMacStories åšä¸»ï¼‰</h4>
<ul>
<li>ä½¿ç”¨åœºæ™¯ï¼šæ¯æ—¥é«˜é¢‘è‡ªåŠ¨åŒ–æ“ä½œï¼ŒæŒç»­äº’åŠ¨æµ‹è¯•</li>
<li>æœˆåº¦tokenæ¶ˆè€—ï¼š1.8äº¿</li>
<li>é¢„ä¼°æœˆæˆæœ¬ï¼šçº¦3600ç¾å…ƒ</li>
<li>å¤‡æ³¨ï¼šå±äºæç«¯æ¡ˆä¾‹ï¼Œä»–å…¨é¢æµ‹è¯•äº†æ‰€æœ‰åŠŸèƒ½ï¼Œä¸”é•¿æœŸè¿è¡Œå¤æ‚è‡ªåŠ¨åŒ–æµç¨‹</li>
</ul>
<h4 data-id="heading-7">2. ä¸­åº¦ç”¨æˆ·ï¼šæ™®é€šå¼€å‘è€…</h4>
<ul>
<li>ä½¿ç”¨åœºæ™¯ï¼šæ—¥å¸¸å·¥ä½œä»»åŠ¡å¤„ç†ï¼Œæ¯æ—¥æŒ‡ä»¤è°ƒç”¨</li>
<li>æœˆåº¦tokenæ¶ˆè€—ï¼š500-1500ä¸‡</li>
<li>é¢„ä¼°æœˆæˆæœ¬ï¼š30-70ç¾å…ƒ</li>
</ul>
<h4 data-id="heading-8">3. è½»åº¦ç”¨æˆ·ï¼šå¶å°”ä½¿ç”¨çš„åŠ©æ‰‹åœºæ™¯</h4>
<ul>
<li>ä½¿ç”¨åœºæ™¯ï¼šæ¯æ—¥ä»…å°‘æ•°æŒ‡ä»¤è°ƒç”¨ï¼Œæ— å¤æ‚æ“ä½œ</li>
<li>æœˆåº¦tokenæ¶ˆè€—ï¼š200-500ä¸‡</li>
<li>é¢„ä¼°æœˆæˆæœ¬ï¼š10-30ç¾å…ƒ</li>
</ul>
<h4 data-id="heading-9">4. æœ€ååœºæ™¯ï¼šè¿›å…¥æ­»å¾ªç¯æ¨¡å¼</h4>
<ul>
<li>é—®é¢˜åŸå› ï¼šè‡ªåŠ¨åŒ–å¾ªç¯æ— é™åˆ¶è¿è¡Œï¼Œæ— æ³•ç»ˆæ­¢</li>
<li>è€—æ—¶ï¼šä»…1å¤©</li>
<li>æˆæœ¬ï¼šè¶…200ç¾å…ƒï¼ˆç”¨æˆ·çœŸå®åé¦ˆï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-10">OpenClaw æˆæœ¬å¿«é€Ÿé£™å‡çš„3å¤§æ ¸å¿ƒåŸå› </h3>
<p>OpenClaw å¹¶éç®€å•èŠå¤©æœºå™¨äººï¼Œè€Œæ˜¯æ™ºèƒ½ä»£ç†ï¼ˆAgentï¼‰ï¼Œå…¶è¿è¡Œé€»è¾‘å†³å®šäº†tokenæ¶ˆè€—è¿œé«˜äºæ™®é€šAIå·¥å…·ï¼š</p>
<h4 data-id="heading-11">1. æ™ºèƒ½ä»£ç†â€œæ€è€ƒâ€è¿‡ç¨‹ï¼ŒæŒç»­æ¶ˆè€—token</h4>
<p>æ™®é€šèŠå¤©æœºå™¨äººæ˜¯â€œé—®-ç­”â€é—­ç¯ï¼Œè€ŒOpenClaw ä½œä¸ºæ™ºèƒ½ä»£ç†ï¼Œå®Œæˆä¸€ä¸ªä»»åŠ¡éœ€å¤šæ­¥æ¨ç†ï¼Œæ¯ä¸€æ­¥éƒ½è€—tokenï¼š</p>
<ul>
<li>è§„åˆ’æ‰§è¡Œæ–¹æ¡ˆï¼ˆè€—tokenï¼‰</li>
<li>æ‹†è§£ä»»åŠ¡æ­¥éª¤ï¼ˆè€—æ›´å¤štokenï¼‰</li>
<li>æ‰§è¡Œæ¯ä¸€æ­¥æ“ä½œï¼ˆæŒç»­è€—tokenï¼‰</li>
<li>éªŒè¯æ‰§è¡Œç»“æœï¼ˆé¢å¤–è€—tokenï¼‰</li>
<li>é”™è¯¯å¤„ç†ä¸é‡è¯•ï¼ˆå åŠ è€—tokenï¼‰
æ¯”å¦‚â€œæŸ¥æ”¶é‚®ä»¶â€è¿™æ ·çš„ç®€å•æŒ‡ä»¤ï¼Œå¯èƒ½è§¦å‘æ•°åæ¬¡APIè°ƒç”¨ï¼Œtokenæ¶ˆè€—æˆå€å¢åŠ ã€‚</li>
</ul>
<h4 data-id="heading-12">2. ä¸Šä¸‹æ–‡çª—å£æŒç»­å ç”¨ï¼Œæ¨é«˜å•æ¬¡è°ƒç”¨æˆæœ¬</h4>
<p>OpenClaw ä¼šä¿ç•™å®Œæ•´å¯¹è¯ä¸Šä¸‹æ–‡ï¼Œå¯¼è‡´ï¼š</p>
<ul>
<li>æ¯æ¬¡è¯·æ±‚éƒ½åŒ…å«å†å²æ¶ˆæ¯ï¼Œå¯¹è¯è¶Šé•¿ï¼Œå•æ¬¡è°ƒç”¨tokenè¶Šå¤š</li>
<li>ç³»ç»Ÿæç¤ºè¯ã€å·¥å…·å®šä¹‰ç­‰å›ºå®šå†…å®¹ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½éœ€æºå¸¦ï¼Œå¢åŠ é¢å¤–å¼€é”€</li>
</ul>
<h4 data-id="heading-13">3. å¤šæ­¥éª¤ä»»åŠ¡ï¼Œæˆæœ¬å‘ˆå€æ•°å åŠ </h4>
<p>å¤æ‚ä»»åŠ¡éœ€æ‹†è§£ä¸ºå¤šç¯èŠ‚æ‰§è¡Œï¼Œæ¯ä¸ªç¯èŠ‚ç‹¬ç«‹è®¡è´¹ï¼Œæ€»æˆæœ¬å¿«é€Ÿç´¯ç§¯ã€‚
ä¾‹ï¼šæŒ‡ä»¤â€œæ•´ç†æœ¬å‘¨æ—¥å†â€ï¼Œéœ€ç»å†6ä¸ªæ­¥éª¤ï¼Œæ¯æ­¥å‡äº§ç”Ÿtokenæ¶ˆè€—ï¼š</p>
<ol>
<li>è¯»å–å½“å‰æ—¥å†æ•°æ®</li>
<li>åˆ†ææ¯ä¸ªæ—¥ç¨‹è¯¦æƒ…</li>
<li>æ’æŸ¥æ—¥ç¨‹å†²çª</li>
<li>ç»™å‡ºæ•´ç†å»ºè®®</li>
<li>æ‰§è¡Œæ—¥å†ä¿®æ”¹æ“ä½œ</li>
<li>åé¦ˆæ‰§è¡Œç»“æœå¹¶ç¡®è®¤</li>
</ol>
<hr/>
<h3 data-id="heading-14">å…³é”®ç–‘é—®ï¼šèƒ½å¦ç”¨Claude Maxè®¢é˜…æŠµæ‰£æˆæœ¬ï¼Ÿ</h3>
<p><strong>ç»å¯¹ä¸èƒ½ï¼</strong> è¿™æ˜¯å¤šæ•°ç”¨æˆ·çš„è¯¯åŒºã€‚
ä½¿ç”¨Claude Pro æˆ– Claude Max è®¢é˜…è´¦å·å¯¹æ¥OpenClawï¼Œ<strong>è¿åAnthropicçš„æœåŠ¡æ¡æ¬¾</strong>â€”â€”è¿™ç±»è®¢é˜…ä»…æ”¯æŒç›´æ¥ä½¿ç”¨Claudeå®˜æ–¹å·¥å…·ï¼Œä¸å…è®¸é€šè¿‡ç¬¬ä¸‰æ–¹å·¥å…·è°ƒç”¨APIã€‚
å¿…é¡»å•ç‹¬ç”³è¯·APIå¯†é’¥ï¼ŒæŒ‰å®é™…tokenæ¶ˆè€—ä»˜è´¹ï¼ˆå³æŒ‰éœ€è®¡è´¹æ¨¡å¼ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-15">6ä¸ªå®ç”¨æŠ€å·§ï¼Œç²¾å‡†æ§åˆ¶OpenClaw æˆæœ¬ï¼ˆé¿å…è¶…æ”¯ï¼‰</h3>
<h4 data-id="heading-16">1.  è®¾ç½®ç¡¬æ€§æ¶ˆè´¹ä¸Šé™ï¼ˆé¦–è¦æ“ä½œï¼‰</h4>
<p>Anthropic å’Œ OpenAI å‡æ”¯æŒåœ¨åå°è®¾ç½®æœˆåº¦æ¶ˆè´¹é™é¢ï¼Œ<strong>éƒ¨ç½²OpenClawå‰åŠ¡å¿…é…ç½®</strong>ï¼Œä»æºå¤´æœç»å·¨é¢è´¦å•ï¼š</p>
<ul>
<li>Anthropicï¼šæ§åˆ¶å° â†’ è®¾ç½® â†’ ç”¨é‡é™é¢</li>
<li>OpenAIï¼šè´¦å· â†’ è´¦å• â†’ ç”¨é‡é™é¢</li>
</ul>
<h4 data-id="heading-17">2.  æŒ‰ä»»åŠ¡éš¾åº¦åŒ¹é…ä½æˆæœ¬æ¨¡å‹ï¼ˆæ€§ä»·æ¯”é¦–é€‰ï¼‰</h4>
<p>æŒ‰éœ€åˆ‡æ¢æ¨¡å‹ï¼Œé¿å…â€œå¤§æå°ç”¨â€æµªè´¹æˆæœ¬ï¼š</p>
<ul>
<li>ç®€å•æŸ¥è¯¢ï¼ˆæŸ¥ä¿¡æ¯ã€åŸºç¡€é—®ç­”ï¼‰ï¼šç”¨ Claude Haikuï¼ˆæˆæœ¬æœ€ä½ï¼‰</li>
<li>ä¸­åº¦ä»»åŠ¡ï¼ˆæ—¥å¸¸åŠå…¬ã€ç®€å•è‡ªåŠ¨åŒ–ï¼‰ï¼šç”¨ Claude Sonnet</li>
<li>å¤æ‚æ¨ç†ï¼ˆä»£ç å¼€å‘ã€å¤æ‚æµç¨‹è§„åˆ’ï¼‰ï¼šä»…ç”¨ Claude Opus</li>
</ul>
<h4 data-id="heading-18">3.  å€ŸåŠ©Ollamaéƒ¨ç½²æœ¬åœ°æ¨¡å‹ï¼ˆé›¶APIæˆæœ¬ï¼‰</h4>
<p>éæ ¸å¿ƒä»»åŠ¡å¯é€šè¿‡Ollamaéƒ¨ç½²æœ¬åœ°æ¨¡å‹ï¼Œå½»åº•çœå»APIå¼€é”€ï¼Œä»…éœ€æ¥å—æœ¬åœ°æ¨¡å‹ç¨ä½çš„æ•ˆæœï¼š</p>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šæ— æ•æ„Ÿä¿¡æ¯çš„ç®€å•æŸ¥è¯¢ã€æœ¬åœ°æµ‹è¯•</li>
<li>ä¼˜åŠ¿ï¼šé›¶tokenæˆæœ¬ï¼Œæ•°æ®éšç§æ›´å¯æ§</li>
</ul>
<h4 data-id="heading-19">4.  ä»åŸºç¡€åŠŸèƒ½èµ·æ­¥ï¼Œé€æ­¥å‡çº§</h4>
<p>å…ˆå¯ç”¨åŸºç¡€æŒ‡ä»¤è°ƒç”¨åŠŸèƒ½ï¼Œç†Ÿæ‚‰æˆæœ¬æ¶ˆè€—è§„å¾‹åï¼Œå†å¼€å¯è‡ªä¸»è‡ªåŠ¨åŒ–åŠŸèƒ½â€”â€”å¤æ‚è‡ªåŠ¨åŒ–é“¾è·¯æ˜¯tokenæ¶ˆè€—â€œå¤§æˆ·â€ï¼Œææ˜“è¶…æ”¯ã€‚</p>
<h4 data-id="heading-20">5.  æ¯æ—¥ç›‘æ§ç”¨é‡ï¼ˆåˆæœŸå¿…åšï¼‰</h4>
<p>éƒ¨ç½²åˆæœŸï¼ˆå‰å‡ å‘¨ï¼‰ï¼Œæ¯æ—¥æŸ¥çœ‹APIåå°ç”¨é‡ï¼š</p>
<ul>
<li>æ’æŸ¥å¼‚å¸¸ç”¨é‡é£™å‡</li>
<li>åŠæ—¶å‘ç°å¤±æ§çš„è‡ªåŠ¨åŒ–å¾ªç¯</li>
<li>è·Ÿè¸ªé«˜è€—æ—¶ä»»åŠ¡çš„æˆæœ¬å æ¯”</li>
</ul>
<h4 data-id="heading-21">6.  å¼€å¯è´¦å•é¢„è­¦ï¼ˆé¿å…è¢«åŠ¨è¶…æ”¯ï¼‰</h4>
<p>é…ç½®ç”¨é‡é¢„è­¦é˜ˆå€¼ï¼ˆå»ºè®®50%ã€75%ã€90%ï¼‰ï¼Œç”¨é‡è¾¾æ ‡æ—¶ä¼šæ”¶åˆ°æé†’ï¼Œæå‰å¹²é¢„é¿å…è¶…é¢ã€‚</p>
<hr/>
<h3 data-id="heading-22">åˆ°åº•å€¼ä¸å€¼å¾—ç”¨ï¼Ÿåˆ†åœºæ™¯åˆ¤æ–­</h3>
<h4 data-id="heading-23">é€‚åˆç”¨OpenClawçš„åœºæ™¯ï¼ˆæ»¡è¶³å…¶ä¸€å³å¯ï¼‰</h4>
<ul>
<li>æ›´çœ‹é‡æ—¶é—´æ•ˆç‡ï¼Œæ„¿æ„ä¸ºèŠ‚çœæ—¶é—´æ”¯ä»˜æˆæœ¬</li>
<li>æœ‰æ˜ç¡®çš„è‡ªåŠ¨åŒ–éœ€æ±‚ï¼Œä¸”ç°æœ‰å·¥å…·æ— æ³•æ»¡è¶³</li>
<li>èƒ½è‡ªä¸»ç®¡ç†éƒ¨ç½²æ¶æ„ï¼ˆæœ¬åœ°/äº‘æœåŠ¡å™¨ï¼‰</li>
<li>ä¼šä¸»åŠ¨è®¾ç½®å¹¶ç›‘æ§æ¶ˆè´¹é™é¢</li>
<li>æ¸…æ¥šå…¶æ½œåœ¨å®‰å…¨é£é™©å¹¶èƒ½åº”å¯¹</li>
</ul>
<h4 data-id="heading-24">å»ºè®®é€‰æ›¿ä»£æ–¹æ¡ˆçš„åœºæ™¯</h4>
<ul>
<li>è¿½æ±‚é¢„ç®—ç¨³å®šï¼Œä¸æ¥å—ä¸å¯é¢„æµ‹çš„å¼€é”€</li>
<li>ä¸æƒ³æŠ•å…¥ç²¾åŠ›ç®¡ç†éƒ¨ç½²ä¸è¿ç»´</li>
<li>éœ€ä¼ä¸šçº§å®‰å…¨ä¿éšœ</li>
<li>åå¥½å›ºå®šæœˆåº¦ä»˜è´¹æ¨¡å¼</li>
</ul>
<hr/>
<h3 data-id="heading-25">æ ¸å¿ƒç»“è®º</h3>
<p>OpenClaw æœ¬ä½“å¼€æºå…è´¹ï¼Œä½†å¤§è¯­è¨€æ¨¡å‹APIè°ƒç”¨æ˜¯æ ¸å¿ƒå¼€é”€ï¼ŒçœŸå®æœˆåº¦æˆæœ¬å¯æŒ‰ä½¿ç”¨å¼ºåº¦åˆ’åˆ†ï¼š</p>
<ul>
<li>æœ€ä½æˆæœ¬ï¼ˆè½»åº¦ä½¿ç”¨ï¼‰ï¼š10-30ç¾å…ƒï¼ˆä»…APIè´¹ç”¨ï¼Œæœ¬åœ°éƒ¨ç½²æ— æ‰˜ç®¡è´¹ï¼‰</li>
<li>å¸¸è§„æˆæœ¬ï¼ˆæ™®é€šå¼€å‘è€…ï¼‰ï¼š30-70ç¾å…ƒï¼ˆAPI+åŸºç¡€æ‰˜ç®¡ï¼‰</li>
<li>é‡åº¦æˆæœ¬ï¼ˆé«˜é¢‘ä½¿ç”¨ï¼‰ï¼š70-150ç¾å…ƒ+</li>
<li>æç«¯æˆæœ¬ï¼ˆå…¨é¢æµ‹è¯•/å¤±æ§åœºæ™¯ï¼‰ï¼š3600ç¾å…ƒ+</li>
</ul>
<p><strong>æ ¸å¿ƒå»ºè®®</strong>ï¼šéƒ¨ç½²å‰å…ˆè®¾ç½®æ¶ˆè´¹ä¸Šé™ï¼ŒåˆæœŸæ¯æ—¥ç›‘æ§ç”¨é‡ï¼Œç»“åˆè‡ªèº«éœ€æ±‚åˆ¤æ–­æˆæœ¬æ˜¯å¦åŒ¹é…ä»·å€¼ï¼Œå†å†³å®šæ˜¯å¦é•¿æœŸä½¿ç”¨ã€‚</p>
<hr/>
<h3 data-id="heading-26">å¸¸è§é—®é¢˜è§£ç­”ï¼ˆFAQï¼‰</h3>
<ol>
<li>
<p>OpenClaw æ˜¯å…è´¹çš„å—ï¼Ÿ
è½¯ä»¶æœ¬ä½“å¼€æºå…è´¹ï¼Œä½†éœ€æ”¯ä»˜å¤§è¯­è¨€æ¨¡å‹APIè´¹ç”¨ï¼ˆé€šå¸¸10-150ç¾å…ƒ/æœˆï¼‰ï¼Œæ‰˜ç®¡è´¹ç”¨å¯é€‰ï¼ˆ0-12ç¾å…ƒ/æœˆï¼‰ï¼Œæ•´ä½“æœ‰å®é™…å¼€é”€ã€‚</p>
</li>
<li>
<p>èƒ½ç”¨Claude Proè®¢é˜…å¯¹æ¥OpenClawå—ï¼Ÿ
ä¸èƒ½ã€‚è¯¥è¡Œä¸ºè¿åAnthropicæœåŠ¡æ¡æ¬¾ï¼Œå¿…é¡»å•ç‹¬ç”³è¯·APIå¯†é’¥ï¼ŒæŒ‰å®é™…tokenæ¶ˆè€—ä»˜è´¹ã€‚</p>
</li>
<li>
<p>OpenClaw æœˆå‡æˆæœ¬å¤šå°‘ï¼Ÿ
å¤šæ•°ç”¨æˆ·æœˆå‡å¼€é”€ï¼šAPIè´¹30-70ç¾å…ƒ+æ‰˜ç®¡è´¹0-12ç¾å…ƒï¼›è½»åº¦ç”¨æˆ·å¯æ§åˆ¶åœ¨10-30ç¾å…ƒï¼Œé‡åº¦ç”¨æˆ·è¶…150ç¾å…ƒã€‚</p>
</li>
<li>
<p>å¦‚ä½•é¿å…OpenClawäº§ç”Ÿé«˜é¢è´¦å•ï¼Ÿ
æ ¸å¿ƒæ–¹æ³•ï¼šè®¾ç½®APIæ¶ˆè´¹ä¸Šé™ã€ç®€å•ä»»åŠ¡ç”¨ä½æˆæœ¬æ¨¡å‹ã€ä»åŸºç¡€åŠŸèƒ½èµ·æ­¥ã€æ¯æ—¥ç›‘æ§ç”¨é‡ã€å¼€å¯è´¦å•é¢„è­¦ã€‚</p>
</li>
<li>
<p>è¿è¡ŒOpenClawæœ€çœé’±çš„æ–¹å¼æ˜¯ä»€ä¹ˆï¼Ÿ
è‡ªæœ‰è®¾å¤‡æœ¬åœ°éƒ¨ç½²ï¼ˆå…æ‰˜ç®¡è´¹ï¼‰+ ç®€å•ä»»åŠ¡ç”¨Claude Haiku + éæ ¸å¿ƒä»»åŠ¡ç”¨Ollamaæœ¬åœ°æ¨¡å‹ï¼Œå¯æœ€å¤§åŒ–å‹ç¼©æˆæœ¬ã€‚</p>
</li>
</ol>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¿‘æœŸ6ä¸ªä¼˜è´¨GitHub å¼€æºé¡¹ç›®ï¼Œå€¼å¾—ä¸€çœ‹ã€‚]]></title>    <link>https://juejin.cn/post/7602482736914202659</link>    <guid>https://juejin.cn/post/7602482736914202659</guid>    <pubDate>2026-02-04T03:35:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602482736914202659" data-draft-id="7602466689713209359" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" è¿‘æœŸ6ä¸ªä¼˜è´¨GitHub å¼€æºé¡¹ç›®ï¼Œå€¼å¾—ä¸€çœ‹ã€‚"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2026-02-04T03:35:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é€›é€›GitHub"/> <meta itemprop="url" content="https://juejin.cn/user/1442202996186093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             è¿‘æœŸ6ä¸ªä¼˜è´¨GitHub å¼€æºé¡¹ç›®ï¼Œå€¼å¾—ä¸€çœ‹ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1442202996186093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é€›é€›GitHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T03:35:49.000Z" title="Wed Feb 04 2026 03:35:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">01ã€AI é‡‘èåˆ†æ Agent</h2>
<p>Dexter æ˜¯ä¸€ä¸ªä¸“é—¨æé‡‘èç ”ç©¶çš„ AI Agentã€‚Â </p>
<p>å®ƒåƒä¸ªåˆçº§åˆ†æå¸ˆä¸€æ ·å»å¹²æ´»ï¼Œä½ ç”©ç»™å®ƒä¸€ä¸ªå¤æ‚çš„é‡‘èé—®é¢˜ï¼Œæ¯”å¦‚åˆ†ææŸå…¬å¸è¿™å­£åº¦çš„åˆ©æ¶¦ç‡å˜åŒ–åŸå› ï¼Œå®ƒèƒ½è‡ªå·±æ‹†è§£ä»»åŠ¡å»æŸ¥æ•°æ®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9cb0466025804d4c9b1858eebe415d5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770780949&amp;x-signature=H7JtpSRtG08DcPwyKA%2BWZzhJ%2B48%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®ƒæ¥å…¥äº†å®æ—¶çš„å¸‚åœºæ•°æ®æºï¼Œèƒ½ç¿»é˜…è´¢æŠ¥ã€æŸç›Šè¡¨è¿™äº›ç¡¬æ•°æ®ï¼Œå¹¶ä¸”æœ‰ä¸€å¥—è‡ªæˆ‘æ£€æŸ¥çš„æœºåˆ¶ã€‚</p>
<p>å¦‚æœå®ƒå‘ç°æŸ¥åˆ°çš„æ•°æ®ä¸å¯¹åŠ²ï¼Œè¿˜ä¼šè‡ªå·±åæ€é‡æŸ¥ï¼Œç›´åˆ°æ‹¿å‡ºä¸€ä¸ªæœ‰æ•°æ®æ”¯æ’‘çš„ç»“è®ºï¼Œè€Œä¸æ˜¯åƒæ™®é€šèŠå¤©æœºå™¨äººé‚£æ ·èƒ¡è¯´å…«é“ã€‚</p>
<p>å¯¹äºå¹³æ—¶éœ€è¦åšæŠ•ç ”æˆ–è€…æ·±åº¦å…¬å¸åˆ†æçš„äººæ¥è¯´ï¼Œè¿™ä¸œè¥¿èƒ½æŠŠåŸæœ¬éœ€è¦å¥½å‡ ä¸ªå°æ—¶çš„ç¿»è´¢æŠ¥ã€å¯¹æ•°æ®çš„æ—¶é—´ï¼Œå‹ç¼©åˆ°å‡ åˆ†é’Ÿã€‚å®ƒå°±æ˜¯ä¸€ä¸ªä¸çŸ¥ç–²å€¦ã€ä¸“é—¨ç›¯ç€è´¢åŠ¡æŠ¥è¡¨çœ‹çš„æ•°å­—åŠ©ç†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6daa4c7dda8c4b4eb164a45ab1a94b50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770780949&amp;x-signature=vtwmreRlfG6r81GzoCM7uhd%2FWFk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/virattt/dexter</span>
</code></pre>
<h2 data-id="heading-1">02ã€æ— å‘é‡çš„ RAG</h2>
<p>è¿™ä¸ªé¡¹ç›®ä¸»è¦æ˜¯ä¸ºäº†è§£å†³ RAG é‡Œçš„ä¸€ä¸ªè€å¤§éš¾é—®é¢˜ï¼Œä¼ ç»Ÿçš„å‘é‡æ•°æ®åº“ç”¨èµ·æ¥æ„Ÿè§‰å¾ˆç¬¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff8ce1496a1c4314b60001b20711282f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770780949&amp;x-signature=MBqV0rRZiQzWBWwYquoGWBt2fhc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é€šå¸¸æˆ‘ä»¬åš RAG æ˜¯æŠŠæ–‡æ¡£åˆ‡æˆå°å—å­˜èµ·æ¥ï¼Œä½†Â PageIndex è§‰å¾—è¿™æ ·ä¼šæŠŠåŸæœ¬çš„é€»è¾‘æ‰“æ•£ï¼Œæ‰€ä»¥å®ƒæäº†ä¸ªæ— å‘é‡çš„æ–¹æ¡ˆã€‚</p>
<p>å®ƒçš„åšæ³•æ˜¯æ¨¡ä»¿äººç±»çœ‹ä¹¦ï¼Œç»™æ–‡æ¡£å»ºä¸€ä¸ªåƒç›®å½•ä¸€æ ·çš„æ ‘çŠ¶ç»“æ„ã€‚è¿™æ · AI åœ¨æ‰¾èµ„æ–™çš„æ—¶å€™ï¼Œä¸æ˜¯ççŒ«ç¢°æ­»è€—å­åœ°å»åŒ¹é…å…³é”®è¯ï¼Œè€Œæ˜¯èƒ½é¡ºç€é€»è¾‘ç»“æ„ä¸€å±‚å±‚å¾€ä¸‹æ‰¾ï¼Œç‰¹åˆ«é€‚åˆå¤„ç†é‚£äº›é€»è¾‘æ€§å¾ˆå¼ºçš„é•¿æ–‡æ¡£ï¼Œæ¯”å¦‚è´¢æŠ¥æˆ–è€…æŠ€æœ¯æ‰‹å†Œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f16aa88189e43bcb4af97b67b86a51e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770780949&amp;x-signature=wyBas9O6HttsDPDodbzc%2BuQPn7Y%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç®€å•è¯´ï¼Œå°±æ˜¯è®© AI å˜èªæ˜äº†ï¼Œæ‡‚å¾—æŒ‰ç« èŠ‚å»ç¿»ä¹¦ï¼Œè€Œä¸æ˜¯åªä¼šåœ¨ä¹¦é‡Œä¹±ç¿»é¡µã€‚</p>
<p>å¦‚æœä½ æ·±å— RAG æ€»æ˜¯æ‰¾ä¸å‡†ä¸Šä¸‹æ–‡çš„å›°æ‰°ï¼Œè¿™ä¸œè¥¿ç»å¯¹å€¼å¾—è¯•ä¸€è¯•ï¼Œå®ƒå¼ºè°ƒçš„æ˜¯æ¨ç†è€Œä¸æ˜¯ç®€å•çš„ç›¸ä¼¼åº¦ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/VectifyAI/PageIndex</span>
</code></pre>
<h2 data-id="heading-2">03ã€ä¸º AI ç¼–ç¨‹å¢åŠ è®°å¿†</h2>
<p>è¿™ä¸ªé¡¹ç›®æ˜¯ Steve Yegge å¤§ä½¬å¼€å‘çš„ï¼Œç»™ AI å†™ä»£ç å¢åŠ æŒä¹…è®°å¿†ã€‚</p>
<p>å¹³æ—¶ç”¨ AI å†™ç¨å¾®å¤æ‚ç‚¹çš„é¡¹ç›®ï¼Œå®ƒå¾ˆå®¹æ˜“å†™ç€å†™ç€å°±å¿˜äº†å‰é¢å¹²äº†å•¥ï¼Œæˆ–è€…æŠŠä¸Šä¸‹æ–‡æ’‘çˆ†äº†ï¼ŒBeads å°±æ˜¯ç»™ AI è£…çš„ä¸€ä¸ªå¤–æŒ‚å¤§è„‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4f4b1f65e5c4e9da08038dc983e7c54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770780949&amp;x-signature=DTN44tWj%2FDRqjhnv3%2B3tzVmGb6c%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåŸºäº Git çš„ä»»åŠ¡ç®¡ç†ç³»ç»Ÿï¼Œä½†å®ƒæ˜¯ä¸“é—¨ç»™ AI è¯»çš„ã€‚</p>
<p>å®ƒä¼šæŠŠä»»åŠ¡æ‹†è§£å¾—å¾ˆç»†ï¼Œå­˜æˆ JSON æ ¼å¼æ”¾åœ¨ä½ çš„ä»“åº“é‡Œï¼Œè¿™æ · AI å°±èƒ½éšæ—¶çŸ¥é“æˆ‘ç°åœ¨å¹²åˆ°å“ªä¸€æ­¥äº†ã€ä¸‹ä¸€æ­¥è¯¥å¹²å•¥ï¼Œå“ªæ€•ä»»åŠ¡è·¨äº†å¥½å‡ å¤©ä¹Ÿä¸ä¼šæ–­ç‰‡ã€‚</p>
<p>å¦‚æœä½ æƒ³è®© AI å¸®ä½ å¹²é‚£ç§éœ€è¦å¥½å‡ æ­¥æ‰èƒ½æå®šçš„å¤§æ´»å„¿ï¼Œå¯ä»¥çœ‹çœ‹è¿™ä¸ªä¸œè¥¿ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05b0dcb42e624ffc8fb27ff8c82faa9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770780949&amp;x-signature=P8zTrUymn9scAJPC91UeUYUs1yM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/steveyegge/beads</span>
</code></pre>
<h2 data-id="heading-3">04ã€learn-claude-code</h2>
<p>è¿™ä¸ªå¼€æºé¡¹ç›®æ•™ä½ æ‰‹æ“ä¸€ä¸ª AI Agent ã€‚</p>
<p>å®ƒä¸åƒé‚£äº›å¤§æ¡†æ¶æå¾—äº‘é‡Œé›¾é‡Œçš„ï¼Œè€Œè®¤ä¸ºå†™ä¸ª Agent å…¶å®åªè¦åå‡ è¡Œä»£ç å°±å¤Ÿäº†ã€‚å®ƒä»ä¸€ä¸ªæœ€ç®€å•çš„ Bash è„šæœ¬å¼€å§‹ï¼Œä¸€æ­¥æ­¥å¸¦ä½ æŠŠå·¥å…·è°ƒç”¨ã€ä»»åŠ¡è§„åˆ’è¿™äº›æ ¸å¿ƒåŠŸèƒ½åŠ ä¸Šå»ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f449492a4564b48a8e4ba52cc200204~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770780949&amp;x-signature=XQu9WA6UdHOSn%2FGghTXdvUG7EDM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è€Œä¸”ä½ ä¸éœ€è¦å†™ä¸€å †å¤æ‚çš„å·¥ç¨‹ä»£ç ï¼Œæ¨¡å‹æœ¬èº«æ‰æ˜¯æ ¸å¿ƒã€‚</p>
<p>ä½œè€…æŠŠé‚£äº›èŠ±é‡Œèƒ¡å“¨çš„åŒ…è£…éƒ½æ’•æ‰äº†ï¼Œè®©ä½ çœ‹åˆ° Agent çœŸæ­£è·‘èµ·æ¥çš„é€»è¾‘å…¶å®å°±æ˜¯ä¸ªç®€å•çš„å¾ªç¯ï¼šæ€è€ƒã€æ‰§è¡Œå·¥å…·ã€å†æ€è€ƒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efd68b77b2c44aec8b0aec8f392ad287~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770780949&amp;x-signature=y1xFg1KkRXYFWT%2FKXftKJOluWTo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¦‚æœä½ ä¸€ç›´è§‰å¾—ç°åœ¨çš„ Agent æ¡†æ¶å¤ªé‡ï¼Œæˆ–è€…å•çº¯å¥½å¥‡åƒ Claude Code è¿™ç§ä¸œè¥¿åˆ°åº•æ˜¯æ€ä¹ˆè·‘èµ·æ¥çš„ï¼Œè·Ÿç€è¿™ä¸ªæ•™ç¨‹èµ°ä¸€éï¼ŒåŸºæœ¬å°±èƒ½æŠŠåŸç†æ‘¸é€äº†ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">å¼€æºåœ°å€ï¼šhttps://github.com/shareAI-lab/learn-claude-code
</code></pre>
<h2 data-id="heading-4">05ã€All in One çš„ OSINT å·¥å…·</h2>
<p>è¿™ä¸ªå¼€æºé¡¹ç›®æ˜¯æ Web å¼€å‘å’Œåšå®‰å…¨å®¡è®¡çš„ç¥å™¨ã€‚</p>
<p>ä½ åªè¦æŠŠç½‘å€è¾“è¿›å»ï¼Œå®ƒå°±èƒ½æŠŠè¿™ä¸ªç½‘ç«™æ‰’ä¸ªåº•æœå¤©ï¼šä»æœåŠ¡å™¨ä½ç½®ã€DNS è®°å½•ã€SSL è¯ä¹¦ï¼Œåˆ°ç½‘ç«™ç”¨äº†ä»€ä¹ˆæŠ€æœ¯æ ˆã€ç”šè‡³ç¢³æ’æ”¾é‡ï¼Œå…¨éƒ½èƒ½ç»™ä½ åˆ—å‡ºæ¥ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d043c2ea0c404eafbb50e32754bced60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770780949&amp;x-signature=ZjM41dZGg%2B1EbFAeX8XRWM%2BMTGA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®ƒæœ€å¼ºçš„åœ°æ–¹åœ¨äºæ•´åˆèƒ½åŠ›ï¼Œä¸ç”¨ä½ å†å»ä¸€ä¸ªä¸ªæ•²å‘½ä»¤è¡Œæˆ–è€…è·‘è„šæœ¬äº†ï¼Œæ‰€æœ‰èƒ½å…¬å¼€è·å–çš„ä¿¡æ¯éƒ½åœ¨ä¸€ä¸ªä»ªè¡¨ç›˜é‡Œå±•ç¤ºã€‚</p>
<p>ä¸ç®¡æ˜¯ä½ æƒ³çœ‹çœ‹ç«å“ç”¨äº†å•¥æŠ€æœ¯ï¼Œè¿˜æ˜¯æƒ³æ£€æŸ¥è‡ªå®¶ç½‘ç«™æœ‰æ²¡æœ‰å®‰å…¨æ¼æ´ï¼Œè¿™ç©æ„å„¿éƒ½èƒ½ä¸€æŠŠæ¢­å“ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5fa29c59067c48678d92e52a327f1cc7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770780949&amp;x-signature=BQtifytjk29DTxjcOC6TuesByIs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è€Œä¸”å®ƒæ˜¯çº¯å¼€æºçš„ï¼Œç•Œé¢åšå¾—è¿˜æŒºå¥½çœ‹ï¼Œä¸æƒ³è‡ªå·±éƒ¨ç½²çš„è¯ä¹Ÿæœ‰ç°æˆçš„æ¼”ç¤ºç«™å¯ä»¥ç”¨ã€‚</p>
<p>å¯¹äºé‚£ç§éœ€è¦å¿«é€Ÿæ‘¸æ¸…ä¸€ä¸ªç½‘ç«™åº•ç»†çš„åœºæ™¯ï¼Œè¿™å·¥å…·èƒ½çœä¸‹å¤§æ¦‚ 90% çš„è°ƒç ”æ—¶é—´ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">å¼€æºåœ°å€ï¼šhttps://github.com/Lissy93/web-check
</code></pre>
<h2 data-id="heading-5">06ã€å…¶å®ƒå¼€æºé¡¹ç›®</h2>
<p>ä¸‹é¢è¿™å‡ ä¸ªæ˜¯æœ¬æœˆ Star å¢é•¿æ¯”è¾ƒå¤šçš„å¼€æºé¡¹ç›®ï¼Œä½†æ˜¯ä¹‹å‰éƒ½æåˆ°è¿‡ã€‚ä¸å†è¯¦ç»†ä»‹ç»äº†ï¼Œæ„Ÿå…´è¶£å¯ä»¥ç›´æ¥å»é¡¹ç›®ä¸»é¡µçœ‹ã€‚</p>
<p><strong>â‘  UI-TARS-desktop</strong></p>
<p>è¿™ç©æ„å„¿æ˜¯å­—èŠ‚è·³åŠ¨æçš„ä¸€ä¸ªæ¡Œé¢ç«¯ AI Agentã€‚</p>
<p>ç®€å•è¯´å°±æ˜¯ç»™ç”µè„‘è£…äº†ä¸ªå¤§è„‘å’Œæ‰‹ï¼Œå®ƒèƒ½ç›´æ¥çœ‹æ‡‚ä½ å±å¹•ä¸Šæ˜¯å•¥ï¼Œç„¶åå¸®ä½ æ“ä½œé¼ æ ‡é”®ç›˜ï¼Œä¸ç®¡æ˜¯æœ¬åœ°ç”µè„‘è¿˜æ˜¯è¿œç¨‹æ¡Œé¢ã€æµè§ˆå™¨éƒ½èƒ½æ§åˆ¶ã€‚</p>
<p>å¦‚æœä½ æƒ³ä½“éªŒä¸€ä¸‹é‚£ç§è·Ÿç”µè„‘è¯´å¥è¯ï¼Œå®ƒå°±è‡ªå·±æŠŠæ´»å¹²äº†çš„æ„Ÿè§‰ï¼Œå¯ä»¥è¯•è¯•è¿™ä¸ªã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/bytedance/UI-TARS-desktop</span>
</code></pre>
<p><strong>â‘¡ awesome-claude-skills</strong></p>
<p>ä¸€ä¸ª Claude Skill åˆé›†ï¼Œå¤§æ¦‚æœ‰ 70 ä¸ªå·¦å³ã€‚æœ‰ 9 å¤§ç±»ï¼ŒåŒ…æ‹¬æ–‡æ¡£å¤„ç†ã€å¼€å‘å·¥å…·ã€æ•°æ®åˆ†æã€å¸‚åœºè¥é”€ä¹‹ç±»çš„ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">å¼€æºåœ°å€ï¼šhttps://github.com/ComposioHQ/awesome-claude-skills
</code></pre>
<p><strong>â‘¢ remotion</strong></p>
<p>å®ƒæ˜¯ç”¨ React ä»£ç æ¥åšè§†é¢‘çš„ã€‚</p>
<p>ä¸ç”¨ç›´æ¥åœ¨å‰ªè¾‘è½¯ä»¶é‡Œæ‹–æ¥æ‹–å»ï¼ŒæŠŠè§†é¢‘å½“æˆç½‘é¡µç»„ä»¶æ¥å†™ï¼Œæœ€åæ¸²æŸ“æˆ MP4ã€‚</p>
<p>ç‰¹åˆ«é€‚åˆé‚£ç§éœ€è¦æ‰¹é‡ç”Ÿæˆçš„ã€æˆ–è€…è·Ÿç€æ•°æ®å˜æ ·å­çš„è§†é¢‘ï¼Œç¨‹åºå‘˜ä¸Šæ‰‹åº”è¯¥ä¼šè§‰å¾—å¾ˆäº²åˆ‡ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/remotion-dev/remotion</span>
</code></pre>
<p>**â‘£ opencode  **</p>
<p>å¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯ Claude Code çš„ä¸€ä¸ªå¼€æºå¹³æ›¿ã€‚</p>
<p>å®ƒå°±æ˜¯ä¸€ä¸ªåœ¨ç»ˆç«¯é‡Œè·‘çš„ AI ç¼–ç¨‹åŠ©æ‰‹ï¼Œä½ å¯ä»¥ç»™å®ƒæ¥å„ç§å¤§æ¨¡å‹ï¼ŒOpenAIã€Claude æˆ–è€…æœ¬åœ°æ¨¡å‹éƒ½è¡Œã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/anomalyco/opencode</span>
</code></pre>
<p>**â‘¤ superpowersÂ **</p>
<p>ä½œè€…è§‰å¾—ç°åœ¨çš„ AI æ‹¿åˆ°éœ€æ±‚å°±ç›´æ¥ç‹‚å†™ä»£ç å¤ªå®¹æ˜“ç¿»è½¦äº†ï¼Œæ‰€ä»¥æäº†è¿™ä¸ªæ¡†æ¶ã€‚Â </p>
<p>å®ƒä¼šå¼ºè¿« AI åœ¨å†™ä»£ç å‰å…ˆè·Ÿä½ å¯¹å‡ è½®ï¼ŒæŠŠéœ€æ±‚ç†æ¸…æ¥šï¼Œç„¶åå…ˆå†™è®¾è®¡æ–‡æ¡£ã€å†™æµ‹è¯•ï¼Œæœ€åæ‰å†™å®ç°ä»£ç ï¼Œå°±åƒæ˜¯ç¡¬æŠŠä¸€ä¸ªå®ä¹ ç”Ÿ AI è°ƒæ•™æˆäº†æ‡‚ TDD çš„é«˜çº§å·¥ç¨‹å¸ˆã€‚Â </p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/obra/superpowersÂ </span>
</code></pre>
<p>**â‘¥ anthropics/skillsÂ **</p>
<p>è¿™æ˜¯ Anthropic å®˜æ–¹æ”¾å‡ºæ¥çš„ Skills èµ„æºã€‚Â </p>
<p>é‡Œé¢æ˜¯ä¸€å †æ ‡å‡†çš„ Agent Skills ä»£ç å®ç°ï¼Œæ¯”å¦‚æ€ä¹ˆè®© AI å®Œç¾åœ°è¯»å– PDFã€æ€ä¹ˆæ“ä½œ Google æ–‡æ¡£ä¹‹ç±»çš„ã€‚Â </p>
<p>è™½ç„¶å®˜æ–¹è¯´æ˜¯æ¼”ç¤ºç”¨çš„ï¼Œä½†ä»£ç è´¨é‡å¾ˆé«˜ï¼Œå¦‚æœä½ è‡ªå·±åœ¨å¼€å‘ Agentï¼Œæƒ³è®©å®ƒå…·å¤‡æŸäº›å…·ä½“çš„æ“ä½œèƒ½åŠ›ï¼Œç›´æ¥å»æŠ„è¿™é‡Œçš„ä½œä¸šæœ€ç¨³ã€‚Â </p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/anthropics/skillsÂ </span>
</code></pre>
<p>**â‘¦ vibe-kanbanÂ **</p>
<p>è¿™ä¸œè¥¿æ˜¯ä¸€ä¸ªä¸“é—¨ç»™ AI ç”¨çš„çœ‹æ¿å·¥å…·ã€‚Â </p>
<p>å¹³æ—¶æˆ‘ä»¬ç”¨çœ‹æ¿æ˜¯ç®¡äººçš„ï¼Œè¿™ä¸ªæ˜¯ç”¨æ¥ç®¡ AI çš„ã€‚ä½ å¯ä»¥åœ¨ä¸Šé¢ç»™ AI æ´¾æ´»ï¼Œå®‰æ’ä»»åŠ¡æµï¼Œç”šè‡³è®©å¥½å‡ ä¸ª AI Agent åä½œå†™ä»£ç ã€‚</p>
<p>å¦‚æœä½ è§‰å¾—å…‰é å¯¹è¯æ¡†æŒ‡æŒ¥ AI å®¹æ˜“ä¹±ï¼Œç”¨è¿™ä¸ªçœ‹æ¿å°±èƒ½æŠŠä»»åŠ¡çŠ¶æ€è¿™ä¸€å—æ‹¿æå¾—æ­»æ­»çš„ã€‚Â </p>
<pre><code class="hljs language-bash" lang="bash">å¼€æºåœ°å€ï¼šhttps://github.com/BloopAI/vibe-kanbanÂ 
</code></pre>
<p>**â‘§ memosÂ **</p>
<p>ä¸€ä¸ªå¾ˆåƒ Flomo æˆ–è€…æ—©æœŸå¾®åšçš„å¼€æºç¬”è®°å·¥å…·ï¼Œä¸»æ‰“å°±æ˜¯è½»é‡å’Œéšç§ã€‚</p>
<p>ä½ å¯ä»¥è‡ªå·±éƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šï¼Œæ•°æ®å®Œå…¨åœ¨è‡ªå·±æ‰‹é‡Œã€‚ç•Œé¢éå¸¸å¹²å‡€ï¼Œæ”¯æŒ Markdownï¼Œé€‚åˆå¹³æ—¶éšæ‰‹è®°ç‚¹ç¢ç‰‡åŒ–çš„æƒ³æ³•æˆ–è€…åæ§½ï¼Œæ²¡æœ‰ä»€ä¹ˆèŠ±é‡Œèƒ¡å“¨çš„ç¤¾äº¤æ¨èï¼Œå°±æ˜¯ä¸€ä¸ªçº¯ç²¹çš„ç§äººç¢ç¢å¿µç©ºé—´ã€‚Â </p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šÂ https:<span class="hljs-comment">//github.com/usememos/memos</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¯‘-Kotlin åç¨‹è°ƒåº¦å™¨å®Œå…¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7602544700474998794</link>    <guid>https://juejin.cn/post/7602544700474998794</guid>    <pubDate>2026-02-04T03:38:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602544700474998794" data-draft-id="7602534556076376090" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¯‘-Kotlin åç¨‹è°ƒåº¦å™¨å®Œå…¨æŒ‡å—"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-02-04T03:38:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="simplepeng"/> <meta itemprop="url" content="https://juejin.cn/user/641770519265832"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¯‘-Kotlin åç¨‹è°ƒåº¦å™¨å®Œå…¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/641770519265832/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    simplepeng
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T03:38:33.000Z" title="Wed Feb 04 2026 03:38:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Introduction ä»‹ç»</h2>
<p>Coroutine dispatchers are fundamental components in Kotlinâ€™s coroutines framework that determine which thread or threads a coroutine uses for its execution. Understanding dispatchers is crucial for writing efficient, responsive, and well-structured concurrent code.<br/>
åç¨‹è°ƒåº¦å™¨æ˜¯ Kotlin åç¨‹æ¡†æ¶ä¸­çš„åŸºç¡€ç»„ä»¶ï¼Œå†³å®šåç¨‹åœ¨æ‰§è¡Œæ—¶ä½¿ç”¨å“ªä¸ªçº¿ç¨‹æˆ–å“ªäº›çº¿ç¨‹ã€‚ç†è§£è°ƒåº¦å™¨å¯¹äºç¼–å†™é«˜æ•ˆã€å“åº”è¿…é€Ÿä¸”ç»“æ„è‰¯å¥½çš„å¹¶å‘ä»£ç è‡³å…³é‡è¦ã€‚</p>
<h2 data-id="heading-1">What is a CoroutineDispatcher? ä»€ä¹ˆæ˜¯ CoroutineDispatcherï¼Ÿ</h2>
<p>A <code>CoroutineDispatcher</code> is a service that determines which thread or threads a coroutine runs on. Itâ€™s part of the coroutine context and controls coroutine execution by dispatching coroutines to appropriate threads from a thread pool.<br/>
<code>CoroutineDispatcher</code> æ˜¯ä¸€ç§æœåŠ¡ï¼Œå®ƒå†³å®šåç¨‹åœ¨å“ªä¸ªçº¿ç¨‹æˆ–å“ªäº›çº¿ç¨‹ä¸Šè¿è¡Œã€‚å®ƒæ˜¯åç¨‹ä¸Šä¸‹æ–‡çš„ä¸€éƒ¨åˆ†ï¼Œé€šè¿‡å°†åç¨‹ä»çº¿ç¨‹æ± è°ƒåº¦åˆ°åˆé€‚çš„çº¿ç¨‹æ¥æ§åˆ¶åç¨‹çš„æ‰§è¡Œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5029ea974664042990a6f79df3e6b82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2ltcGxlcGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781116&amp;x-signature=7q6Xe8lm9k7jkQp40GSY8u2UkRE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">The Four Main Dispatchers å››ä¸ªä¸»è¦çš„è°ƒåº¦å™¨</h2>
<p>Kotlin provides four built-in dispatchers through the <code>Dispatchers</code> object, each optimized for different use cases.<br/>
Kotlin é€šè¿‡ <code>Dispatchers</code> å¯¹è±¡æä¾›äº†å››ä¸ªå†…ç½®è°ƒåº¦å™¨ï¼Œæ¯ä¸ªéƒ½é’ˆå¯¹ä¸åŒçš„ç”¨ä¾‹è¿›è¡Œäº†ä¼˜åŒ–ã€‚</p>
<h2 data-id="heading-3">1. Dispatchers.Default</h2>
<p><strong>Purpose</strong>: CPU- intensive computations<br/>
ç”¨é€”ï¼šCPU å¯†é›†å‹è®¡ç®—</p>
<p>The Default dispatcher is backed by a shared pool of threads whose size equals the number of CPU cores (with a minimum of 2). Itâ€™s optimized for CPU-bound work that doesnâ€™t block threads.<br/>
Default è°ƒåº¦å™¨ç”±ä¸€ä¸ªå…±äº«çº¿ç¨‹æ± æä¾›æ”¯æŒï¼Œçº¿ç¨‹æ•°é‡ç­‰äº CPU æ ¸å¿ƒæ•°ï¼ˆæœ€å°‘ä¸º 2ï¼‰ã€‚å®ƒé’ˆå¯¹ä¸é˜»å¡çº¿ç¨‹çš„ CPU å¯†é›†å‹å·¥ä½œè¿›è¡Œäº†ä¼˜åŒ–ã€‚</p>
<p><strong>Use Cases</strong>: ä½¿ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>Complex calculations  å¤æ‚è®¡ç®—</li>
<li>Data processing  æ•°æ®å¤„ç†</li>
<li>Sorting large collections  å¯¹å¤§å‹é›†åˆè¿›è¡Œæ’åº</li>
<li>Image manipulation  å›¾åƒå¤„ç†</li>
<li>JSON parsing  JSON è§£æ</li>
</ul>
<p><strong>Example</strong>: ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-c" lang="c">launch(Dispatchers.Default) {
    val result = performHeavyComputation()
    println(â€Computation complete: $resultâ€)
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3794ca1d73541e1bc1f18bf97b67d0f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2ltcGxlcGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781116&amp;x-signature=SkH18F92cPa0i%2BqRCFBQwQCyn5c%3D" alt="" loading="lazy"/></p>
<p><strong>Thread Pool Size</strong>: Defaults to the number of CPU cores, configurable via system property <code>kotlinx.coroutines.default.parallelism</code>.<br/>
çº¿ç¨‹æ± å¤§å°ï¼šé»˜è®¤ä¸º CPU å†…æ ¸æ•°ï¼Œå¯é€šè¿‡ç³»ç»Ÿå±æ€§ <code>kotlinx.coroutines.default.parallelism</code> é…ç½®ã€‚</p>
<h2 data-id="heading-4">2. Dispatchers.IO</h2>
<p><strong>Purpose</strong>: I/O operations and blocking tasks<br/>
ç›®çš„ï¼šI/O æ“ä½œå’Œé˜»å¡ä»»åŠ¡</p>
<p>The IO dispatcher is designed for offloading blocking I/O operations to a shared pool of threads. It has elastic scaling capabilities and can create additional threads on demand.<br/>
IO è°ƒåº¦å™¨ç”¨äºå°†é˜»å¡æ€§ I/O æ“ä½œå¸è½½åˆ°ä¸€ä¸ªå…±äº«çš„çº¿ç¨‹æ± ã€‚å®ƒå…·æœ‰å¼¹æ€§æ‰©å±•èƒ½åŠ›ï¼Œèƒ½å¤Ÿæ ¹æ®éœ€è¦åˆ›å»ºé¢å¤–çš„çº¿ç¨‹ã€‚</p>
<p><strong>Use Cases</strong>:ä½¿ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>Network requests  ç½‘ç»œè¯·æ±‚</li>
<li>Database operations  æ•°æ®åº“æ“ä½œ</li>
<li>File I/O  æ–‡ä»¶è¾“å…¥/è¾“å‡º</li>
<li>Blocking API calls  é˜»å¡çš„ API è°ƒç”¨</li>
<li>Reading/writing to disk   è¯»å†™ç£ç›˜</li>
</ul>
<p><strong>Example</strong>:</p>
<pre><code class="hljs language-c" lang="c">withContext(Dispatchers.IO) {
    val data = database.query()
    val file = File(â€output.txtâ€).readText()
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4caa3b9c6824d119127f255b0be9606~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2ltcGxlcGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781116&amp;x-signature=fzz7stqnoPpJJ%2F0BnW2weoOGrms%3D" alt="" loading="lazy"/></p>
<p><strong>Key Features</strong>: ä¸»è¦ç‰¹æ€§ï¼š</p>
<ul>
<li>Default parallelism: 64 threads or number of CPU cores (whichever is larger)<br/>
é»˜è®¤å¹¶è¡Œåº¦ï¼š64 çº¿ç¨‹æˆ– CPU æ ¸å¿ƒæ•°ï¼ˆä»¥è¾ƒå¤§è€…ä¸ºå‡†ï¼‰</li>
<li>Configurable via <code>kotlinx.coroutines.io.parallelism</code> system property<br/>
å¯é€šè¿‡ <code>kotlinx.coroutines.io.parallelism</code> ç³»ç»Ÿå±æ€§é…ç½®</li>
<li>Shares threads with Dispatchers.Default<br/>
ä¸ Dispatchers.Default å…±äº«çº¿ç¨‹</li>
<li>Elastic: can exceed default parallelism when using <code>limitedParallelism()</code><br/>
å¼¹æ€§ï¼šåœ¨ä½¿ç”¨ <code>limitedParallelism()</code> æ—¶å¯è¶…è¿‡é»˜è®¤å¹¶è¡Œåº¦</li>
</ul>
<h2 data-id="heading-5">3. Dispatchers.Main</h2>
<p><strong>Purpose</strong>: UI operations (Android, JavaFX, Swing)<br/>
ç›®çš„ï¼šUI æ“ä½œï¼ˆAndroidã€JavaFXã€Swingï¼‰</p>
<p>The Main dispatcher is confined to the main/UI thread. Itâ€™s primarily used in UI applications where updates must occur on the main thread.<br/>
Main è°ƒåº¦å™¨é™å®šåœ¨ä¸»/UI çº¿ç¨‹ã€‚å®ƒä¸»è¦ç”¨äºéœ€è¦åœ¨ä¸»çº¿ç¨‹ä¸Šè¿›è¡Œæ›´æ–°çš„ UI åº”ç”¨ä¸­ã€‚</p>
<p><strong>Use Cases</strong>: ä½¿ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>Updating UI components  æ›´æ–° UI ç»„ä»¶</li>
<li>Handling user interactions  å¤„ç†ç”¨æˆ·äº¤äº’</li>
<li>Animation updates  åŠ¨ç”»æ›´æ–°</li>
<li>View modifications  æŸ¥çœ‹ä¿®æ”¹</li>
</ul>
<p><strong>Example (Android)</strong>:</p>
<pre><code class="hljs language-c" lang="c">launch(Dispatchers.Main) {
    val data = withContext(Dispatchers.IO) {
        fetchDataFromNetwork()
    }
    textView.text = data <span class="hljs-comment">// Update UI on Main thread</span>
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f33fd71b006b4aac8efe5888db474d89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2ltcGxlcGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781116&amp;x-signature=ephQKXy2qvdmjyvRdO%2BYh09B55w%3D" alt="" loading="lazy"/></p>
<p><strong>Platform- Specific</strong>: ç‰¹å®šäºå¹³å°çš„ï¼š</p>
<ul>
<li>Android: Uses the UI thread looper<br/>
Androidï¼šä½¿ç”¨ UI çº¿ç¨‹çš„ looper</li>
<li>JavaFX: Uses JavaFX Application thread<br/>
JavaFXï¼šä½¿ç”¨ JavaFX åº”ç”¨çº¿ç¨‹</li>
<li>Swing: Uses Swing EDT (Event Dispatch Thread)<br/>
Swingï¼šä½¿ç”¨ Swing EDTï¼ˆäº‹ä»¶åˆ†å‘çº¿ç¨‹ï¼‰</li>
</ul>
<h2 data-id="heading-6">4. Dispatchers.Unconfined</h2>
<p><strong>Purpose</strong>: Special dispatcher that doesnâ€™t confine coroutine execution<br/>
ç”¨é€”ï¼šä¸€ç§ç‰¹æ®Šçš„è°ƒåº¦å™¨ï¼Œä¸ä¼šçº¦æŸåç¨‹çš„æ‰§è¡Œçº¿ç¨‹</p>
<p>The Unconfined dispatcher starts coroutine execution in the caller thread, but only until the first suspension point. After suspension, it resumes in whatever thread the suspending function resumed in.<br/>
Unconfined è°ƒåº¦å™¨åœ¨è°ƒç”¨çº¿ç¨‹å¯åŠ¨åç¨‹çš„æ‰§è¡Œï¼Œä½†ä»…æŒç»­åˆ°ç¬¬ä¸€ä¸ªæŒ‚èµ·ç‚¹ã€‚æŒ‚èµ·åï¼Œå®ƒä¼šåœ¨æŒ‚èµ·å‡½æ•°æ¢å¤æ—¶æ‰€ä½¿ç”¨çš„çº¿ç¨‹ä¸Šç»§ç»­æ‰§è¡Œã€‚</p>
<p><strong>Use Cases</strong>: ä½¿ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>Advanced scenarios requiring specific threading behavior<br/>
éœ€è¦ç‰¹å®šçº¿ç¨‹è¡Œä¸ºçš„é«˜çº§åœºæ™¯</li>
<li>Performance- critical code where thread switching overhead matters<br/>
å¯¹æ€§èƒ½éå¸¸æ•æ„Ÿã€çº¿ç¨‹åˆ‡æ¢å¼€é”€é‡è¦çš„ä»£ç </li>
<li>Testing scenarios æµ‹è¯•åœºæ™¯</li>
</ul>
<p><strong>Example</strong>:</p>
<pre><code class="hljs language-c" lang="c">launch(Dispatchers.Unconfined) {
    println(â€Thread <span class="hljs-number">1</span>: ${Thread.currentThread().name}â€)
    delay(<span class="hljs-number">100</span>)
    println(â€Thread <span class="hljs-number">2</span>: ${Thread.currentThread().name}â€) <span class="hljs-comment">// Likely different!</span>
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d8fe367a6484220bf9be4bc92e6df16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2ltcGxlcGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781116&amp;x-signature=ehTFb2sUzENK9AMK4MHWzkiywzs%3D" alt="" loading="lazy"/></p>
<p><strong>Warning</strong>: Not recommended for general use. Can lead to unpredictable threading behavior and stack overflow in certain cases.<br/>
è­¦å‘Šï¼šä¸æ¨èä¸€èˆ¬æ€§ä½¿ç”¨ã€‚åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½å¯¼è‡´ä¸å¯é¢„æµ‹çš„çº¿ç¨‹è¡Œä¸ºå’Œæ ˆæº¢å‡ºã€‚</p>
<h2 data-id="heading-7">Thread Sharing Between Dispatchers è°ƒåº¦å™¨ä¹‹é—´çš„çº¿ç¨‹å…±äº«</h2>
<p>One of the key implementation details is that Dispatchers.Default and Dispatchers.IO share threads for efficiency.<br/>
å®ç°ç»†èŠ‚çš„ä¸€ä¸ªå…³é”®ç‚¹æ˜¯ Dispatchers.Default å’Œ Dispatchers.IO ä¸ºäº†æ•ˆç‡è€Œå…±äº«çº¿ç¨‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7141f1bea3a84e9da742d742a506585e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2ltcGxlcGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781116&amp;x-signature=HyPXa4VOxUgsQ4AkKKUySKV8hlM%3D" alt="" loading="lazy"/></p>
<p>This means switching from Default to IO context often doesnâ€™t result in actual thread switching, which is an optimization for performance.<br/>
è¿™æ„å‘³ç€ä» Default åˆ‡æ¢åˆ° IO ä¸Šä¸‹æ–‡é€šå¸¸ä¸ä¼šå¯¼è‡´å®é™…çš„çº¿ç¨‹åˆ‡æ¢ï¼Œè¿™æ˜¯ä¸€ç§ç”¨äºæå‡æ€§èƒ½çš„ä¼˜åŒ–ã€‚</p>
<h2 data-id="heading-8">Advanced: limitedParallelism()</h2>
<p>The <code>limitedParallelism()</code> extension function creates a view of a dispatcher with limited parallelism, useful for resource- constrained operations.<br/>
<code>limitedParallelism()</code> æ‰©å±•å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªå¹¶è¡Œåº¦å—é™çš„è°ƒåº¦å™¨è§†å›¾ï¼Œé€‚ç”¨äºå—èµ„æºé™åˆ¶çš„æ“ä½œã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// Create a dispatcher limited to 100 threads for MySQL</span>
val mysqlDispatcher = Dispatchers.IO.limitedParallelism(<span class="hljs-number">100</span>)

<span class="hljs-comment">// Create a dispatcher limited to 60 threads for MongoDB</span>
val mongoDbDispatcher = Dispatchers.IO.limitedParallelism(<span class="hljs-number">60</span>)
<span class="hljs-comment">// These share resources with Dispatchers.IO but have their own limits</span>
launch(mysqlDispatcher) {
    <span class="hljs-comment">// MySQL operations with up to 100 concurrent threads</span>
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2a4e4f97cd049048a907584a7b522e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2ltcGxlcGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781116&amp;x-signature=0kVc4G2UD0F1Saif5CpUXLfQXdY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">Elasticity Property å¼¹æ€§ç‰¹æ€§</h2>
<p>Dispatchers.IO has a unique elasticity property: views created with <code>limitedParallelism()</code> are not restricted by the IO dispatcherâ€™s default parallelism limit. This allows for fine- grained control over resource allocation while still sharing the underlying thread pool.<br/>
Dispatchers.IO å…·æœ‰ç‹¬ç‰¹çš„å¼¹æ€§å±æ€§ï¼šç”¨ <code>limitedParallelism()</code> åˆ›å»ºçš„è§†å›¾ä¸å— IO è°ƒåº¦å™¨é»˜è®¤å¹¶è¡Œåº¦é™åˆ¶çš„çº¦æŸã€‚è¿™å…è®¸åœ¨ä»ç„¶å…±äº«åº•å±‚çº¿ç¨‹æ± çš„åŒæ—¶å¯¹èµ„æºåˆ†é…è¿›è¡Œç»†ç²’åº¦æ§åˆ¶ã€‚</p>
<h2 data-id="heading-10">Dispatcher Selection Decision Tree è°ƒåº¦å™¨é€‰æ‹©å†³ç­–æ ‘</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad686653aef04db2be25a7d868bf0acf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2ltcGxlcGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781116&amp;x-signature=kwpT79FIH7Ggexa4QaAsT%2FDeebE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-11">Best Practices æœ€ä½³å®è·µ</h2>
<h2 data-id="heading-12">1. Choose the Right Dispatcher 1. é€‰æ‹©åˆé€‚çš„è°ƒåº¦å™¨</h2>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// âŒ Wrong: CPU-intensive work on IO</span>
launch(Dispatchers.IO) {
    val result = (<span class="hljs-number">1.</span><span class="hljs-number">.1000000</span>).<span class="hljs-built_in">map</span> { it * it }.sum()
}

<span class="hljs-comment">// âœ… Correct: CPU-intensive work on Default</span>
launch(Dispatchers.Default) {
    val result = (<span class="hljs-number">1.</span><span class="hljs-number">.1000000</span>).<span class="hljs-built_in">map</span> { it * it }.sum()
}
<span class="hljs-comment">// âŒ Wrong: Blocking I/O on Default</span>
launch(Dispatchers.Default) {
    val file = File(<span class="hljs-string">"large.txt"</span>).readText()
}
<span class="hljs-comment">// âœ… Correct: Blocking I/O on IO</span>
launch(Dispatchers.IO) {
    val file = File(<span class="hljs-string">"large.txt"</span>).readText()
}
</code></pre>
<h2 data-id="heading-13">2. Minimize Dispatcher Switching 2. å°†è°ƒåº¦ç¨‹åºåˆ‡æ¢é™åˆ°æœ€ä½</h2>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// âŒ Inefficient: Multiple context switches</span>
suspend fun <span class="hljs-title function_">loadData</span><span class="hljs-params">()</span> = withContext(Dispatchers.IO) {
    val data1 = withContext(Dispatchers.Default) { 
        process1() 
    }
    val data2 = withContext(Dispatchers.Default) { 
        process2() 
    }
    combine(data1, data2)
}
<span class="hljs-comment">// âœ… Better: Batch context switches</span>
suspend fun loadData() = withContext(Dispatchers.IO) {
    val processedData = withContext(Dispatchers.Default) {
        val data1 = process1()
        val data2 = process2()
        listOf(data1, data2)
    }
    combine(processedData[<span class="hljs-number">0</span>], processedData[<span class="hljs-number">1</span>])
}
</code></pre>
<h2 data-id="heading-14">3. Use limitedParallelism for Resource Control 3. ä½¿ç”¨ limitedParallelism æ§åˆ¶èµ„æº</h2>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DatabaseManager</span> {</span>
    <span class="hljs-comment">// Limit concurrent database connections</span>
    private val dbDispatcher = Dispatchers.IO.limitedParallelism(<span class="hljs-number">10</span>)
    
    suspend fun query(sql: String) = withContext(dbDispatcher) {
        <span class="hljs-comment">// Only 10 concurrent queries allowed</span>
        database.execute(sql)
    }
}
</code></pre>
<h2 data-id="heading-15">4. Donâ€™t Block Dispatchers.Default 4. ä¸è¦é˜»å¡ Dispatchers.Default</h2>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// âŒ Wrong: Blocking Default dispatcher</span>
launch(Dispatchers.Default) {
    Thread.sleep(<span class="hljs-number">1000</span>) <span class="hljs-comment">// Blocks a worker thread!</span>
}
<span class="hljs-comment">// âœ… Correct: Use delay or move to IO</span>
launch(Dispatchers.Default) {
    delay(<span class="hljs-number">1000</span>) <span class="hljs-comment">// Suspends without blocking</span>
}
<span class="hljs-comment">// Or for actual blocking:</span>
launch(Dispatchers.IO) {
    Thread.sleep(<span class="hljs-number">1000</span>) <span class="hljs-comment">// OK on IO dispatcher</span>
}
</code></pre>
<h2 data-id="heading-16">Dispatcher Lifecycle  Dispatcher ç”Ÿå‘½å‘¨æœŸ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a3a2fe79098450c96194b1a6ec54946~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2ltcGxlcGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781116&amp;x-signature=DPtAZ5LFuzpTC0PQ3cRJA43Ncz4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-17">Shutdown å…³é—­</h2>
<p>The <code>Dispatchers.shutdown()</code> function is a delicate API that stops all built-in dispatchers:<br/>
<code>Dispatchers.shutdown()</code> å‡½æ•°æ˜¯ä¸€ä¸ªéå¸¸æ•æ„Ÿçš„ APIï¼Œå®ƒä¼šåœæ­¢æ‰€æœ‰å†…ç½®çš„è°ƒåº¦å™¨ï¼š</p>
<pre><code class="hljs language-c" lang="c">@DelicateCoroutinesApi
Dispatchers.shutdown()
</code></pre>
<p><strong>Important</strong>:é‡è¦ï¼š</p>
<ul>
<li>Irreversible operation ä¸å¯é€†çš„æ“ä½œ</li>
<li>Should only be called when no coroutines are running<br/>
ä»…åœ¨æ²¡æœ‰åç¨‹è¿è¡Œæ—¶è°ƒç”¨</li>
<li>Primarily for containerized environments (OSGi, IDE plugins)<br/>
ä¸»è¦ç”¨äºå®¹å™¨åŒ–ç¯å¢ƒï¼ˆOSGiã€IDE æ’ä»¶ï¼‰</li>
<li>Makes coroutines framework inoperable<br/>
ä½¿åç¨‹æ¡†æ¶æ— æ³•è¿è¡Œ</li>
<li>Enables proper class unloading by JVM<br/>
ä½¿ JVM èƒ½æ­£ç¡®å¸è½½ç±»</li>
</ul>
<h2 data-id="heading-18">Performance Comparison æ€§èƒ½æ¯”è¾ƒ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1804b4aa941a46a9809b8b8866192fab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2ltcGxlcGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781116&amp;x-signature=Yn0YcGHcBuYNRxapFf6nzbrJkOY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-19">Common Patterns å¸¸è§æ¨¡å¼</h2>
<h2 data-id="heading-20">Pattern 1: Background Work with UI Updateæ¨¡å¼ 1ï¼šå¸¦æœ‰ UI æ›´æ–°çš„åå°å·¥ä½œ</h2>
<pre><code class="hljs language-c" lang="c">launch {
    val result = withContext(Dispatchers.IO) {
        <span class="hljs-comment">// Network or database operation</span>
        fetchDataFromServer()
    }
    <span class="hljs-comment">// Automatically back on the original context (often Main)</span>
    updateUI(result)
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be9649aff99a4e2d8b355d6593de564a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2ltcGxlcGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781116&amp;x-signature=lnalBbqfKYXZLSzYe8gLAdUJZdY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-21">Pattern 2: Parallel Decompositionæ¨¡å¼ 2ï¼šå¹¶è¡Œåˆ†è§£</h2>
<pre><code class="hljs language-c" lang="c">suspend fun <span class="hljs-title function_">loadDashboard</span><span class="hljs-params">()</span> = coroutineScope {
    val userData = async(Dispatchers.IO) { fetchUserData() }
    val stats = async(Dispatchers.IO) { fetchStatistics() }
    val notifications = async(Dispatchers.IO) { fetchNotifications() }
    
    Dashboard(
        user = userData.await(),
        stats = stats.await(),
        notifications = notifications.await()
    )
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10dc77f0dbe14fe8809f1f11a9eb2116~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2ltcGxlcGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781116&amp;x-signature=hAVZg5AZCu%2FtixO3wjpbUk%2FHhjA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-22">Pattern 3: Resource-Specific Dispatchersæ¨¡å¼ 3ï¼šèµ„æºç‰¹å®šçš„è°ƒåº¦å™¨</h2>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ApiClient</span> {</span>
    private val networkDispatcher = Dispatchers.IO.limitedParallelism(<span class="hljs-number">50</span>)
    
    suspend fun makeRequest(url: String) = withContext(networkDispatcher) {
        <span class="hljs-comment">// Limited to 50 concurrent network requests</span>
        httpClient.get(url)
    }
}
class ImageProcessor {
    private val processingDispatcher = Dispatchers.Default.limitedParallelism(<span class="hljs-number">4</span>)
    
    suspend fun processImage(image: Bitmap) = withContext(processingDispatcher) {
        <span class="hljs-comment">// Limited to 4 concurrent image processing tasks</span>
        applyFilters(image)
    }
}
</code></pre>
<h2 data-id="heading-23">Testing with Dispatchers ä½¿ç”¨è°ƒåº¦å™¨è¿›è¡Œæµ‹è¯•</h2>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// Use TestDispatcher for testing</span>
@Test
fun <span class="hljs-title function_">testCoroutine</span><span class="hljs-params">()</span> = runTest {
    val dispatcher = StandardTestDispatcher()
    
    launch(dispatcher) {
        <span class="hljs-comment">// Test code</span>
    }
    
    advanceUntilIdle() <span class="hljs-comment">// Execute all pending coroutines</span>
}
</code></pre>
<h2 data-id="heading-24">Conclusion ç»“è®º</h2>
<p>Understanding Kotlin coroutine dispatchers is essential for writing efficient concurrent code. Key takeaways:<br/>
ç†è§£ Kotlin åç¨‹è°ƒåº¦å™¨å¯¹äºç¼–å†™é«˜æ•ˆçš„å¹¶å‘ä»£ç è‡³å…³é‡è¦ã€‚è¦ç‚¹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>Dispatchers.Default</strong> for CPU- intensive work<br/>
Dispatchers.Default ç”¨äº CPU å¯†é›†å‹å·¥ä½œ</li>
<li><strong>Dispatchers.IO</strong> for blocking I/O operations<br/>
Dispatchers.IO ç”¨äºé˜»å¡çš„ I/O æ“ä½œ</li>
<li><strong>Dispatchers.Main</strong> for UI updates<br/>
Dispatchers.Main ç”¨äº UI æ›´æ–°</li>
<li><strong>Dispatchers.Unconfined</strong> for advanced scenarios (use sparingly)<br/>
Dispatchers.Unconfined ç”¨äºé«˜çº§åœºæ™¯ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰</li>
<li>Use <code>limitedParallelism()</code> for fine- grained resource control<br/>
å¯¹ç»†ç²’åº¦èµ„æºæ§åˆ¶ä½¿ç”¨ <code>limitedParallelism()</code></li>
<li>Minimize unnecessary dispatcher switching<br/>
å°½é‡å‡å°‘ä¸å¿…è¦çš„è°ƒåº¦å™¨åˆ‡æ¢</li>
<li>Never block Dispatchers.Default threads<br/>
åˆ‡å‹¿é˜»å¡ Dispatchers.Default çº¿ç¨‹</li>
<li>Choose dispatchers based on the nature of your work, not arbitrary preference<br/>
æ ¹æ®ä»»åŠ¡æ€§è´¨é€‰æ‹©è°ƒåº¦å™¨ï¼Œè€Œééšæ„åå¥½</li>
</ol>
<p>By following these guidelines and understanding the threading model, you can build responsive, efficient, and maintainable coroutine-based applications.<br/>
é€šè¿‡éµå¾ªè¿™äº›æŒ‡å¯¼åŸåˆ™å¹¶ç†è§£çº¿ç¨‹æ¨¡å‹ï¼Œä½ å¯ä»¥æ„å»ºå“åº”è¿…é€Ÿã€é«˜æ•ˆä¸”æ˜“äºç»´æŠ¤çš„åŸºäºåç¨‹çš„åº”ç”¨ç¨‹åºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½“ JS é˜»å¡ä¸»çº¿ç¨‹æ—¶ï¼Œä¸ºä»€ä¹ˆä½ çš„ CSS åŠ¨ç”»è¿˜åœ¨è·‘ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7602503154506580009</link>    <guid>https://juejin.cn/post/7602503154506580009</guid>    <pubDate>2026-02-04T03:45:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602503154506580009" data-draft-id="7602497125269159942" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å½“ JS é˜»å¡ä¸»çº¿ç¨‹æ—¶ï¼Œä¸ºä»€ä¹ˆä½ çš„ CSS åŠ¨ç”»è¿˜åœ¨è·‘ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-02-04T03:45:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ssshooter"/> <meta itemprop="url" content="https://juejin.cn/user/3122268751795101"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å½“ JS é˜»å¡ä¸»çº¿ç¨‹æ—¶ï¼Œä¸ºä»€ä¹ˆä½ çš„ CSS åŠ¨ç”»è¿˜åœ¨è·‘ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3122268751795101/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ssshooter
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T03:45:54.000Z" title="Wed Feb 04 2026 03:45:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€”â€” ä»ä¸€ä¸ª React Demo çœ‹æµè§ˆå™¨æ¸²æŸ“ä¸åˆæˆçº¿ç¨‹</p>
<p>ä¼ é€é—¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.mind-elixir.com%2Fzh%2Flearn-js-blocking" target="_blank" title="https://tools.mind-elixir.com/zh/learn-js-blocking" ref="nofollow noopener noreferrer">tools.mind-elixir.com/zh/learn-jsâ€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/786bb1cf088147a78a43c0f9b866b895~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc3NzaG9vdGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781554&amp;x-signature=GNcSQcPDf%2BcWJp%2BqJhT3lfeCIcU%3D" alt="åŠ¨ç”»é˜»å¡å®éªŒ.png" loading="lazy"/></p>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸¸å¬åˆ°ä¸€å¥è¯ï¼šâ€œä¸è¦é˜»å¡ä¸»çº¿ç¨‹ï¼ˆMain Threadï¼‰â€ã€‚æˆ‘ä»¬ä¹Ÿå¸¸å¬åˆ°å¦ä¸€æ¡æ€§èƒ½ä¼˜åŒ–å»ºè®®ï¼šâ€œå°½é‡ä½¿ç”¨ <code>transform</code> å’Œ <code>opacity</code> åšåŠ¨ç”»â€ã€‚</p>
<p>è¿™ä¸¤è€…ä¹‹é—´æœ‰ä»€ä¹ˆæ·±å±‚è”ç³»ï¼Ÿä¸ºä»€ä¹ˆå½“ä¸€æ®µæ­»å¾ªç¯ JavaScript ä»£ç æŠŠé¡µé¢å¡æ­»æ—¶ï¼ŒæŸäº›åŠ¨ç”»å´èƒ½åƒâ€œå¹¸å­˜è€…â€ä¸€æ ·æµç•…è¿è¡Œï¼Œè€Œå…¶ä»–çš„åˆ™ç¬é—´å†»ç»“ï¼Ÿ</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…·ä½“çš„ React Demo æ¥é€šè¿‡å®éªŒæ­å¼€æµè§ˆå™¨æ¸²æŸ“æœºåˆ¶çš„é¢çº±ã€‚</p>
<h2 data-id="heading-0">å®éªŒç°åœºï¼šä¸€ä¸ªâ€œå¡é¡¿â€çš„æŒ‰é’®</h2>
<p>æˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªç®€å•çš„ React åº”ç”¨ã€‚æ ¸å¿ƒé€»è¾‘åœ¨äºä¸€ä¸ªåä¸ºâ€œBlock Main Threadâ€çš„æŒ‰é’®ã€‚ç‚¹å‡»å®ƒï¼Œä¼šè§¦å‘ä¸€æ®µè€—æ—¶ 3 ç§’çš„åŒæ­¥ <code>while</code> å¾ªç¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ¨¡æ‹Ÿä¸»çº¿ç¨‹é˜»å¡</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleBlock</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">setIsBlocking</span>(<span class="hljs-literal">true</span>);
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> start = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">const</span> duration = <span class="hljs-number">3000</span>; 
    <span class="hljs-comment">// ğŸ’€ æ­»å¾ªç¯ï¼šå½»åº•éœ¸å ä¸»çº¿ç¨‹ 3000ms</span>
    <span class="hljs-keyword">while</span> (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - start &lt; duration) {
      <span class="hljs-comment">// Blocking main thread</span>
    }
    <span class="hljs-title function_">setIsBlocking</span>(<span class="hljs-literal">false</span>);
  }, <span class="hljs-number">100</span>);
};

</code></pre>
<p>åœ¨è¿™ 3 ç§’å†…ï¼Œæµè§ˆå™¨çš„ä¸»çº¿ç¨‹ï¼ˆMain Threadï¼‰è¢«å®Œå…¨æŒ‚èµ·ã€‚å®ƒæ— æ³•å“åº”ç‚¹å‡»ã€æ— æ³•æ»šåŠ¨é¡µé¢ã€æ— æ³•æ‰§è¡Œå…¶ä»–çš„ JavaScript ä»£ç ã€‚</p>
<p>ä½†åœ¨é¡µé¢ä¸Šï¼Œæˆ‘ä»¬æ”¾ç½®äº†å››ä¸ªæ­£åœ¨è¿è¡Œçš„åŠ¨ç”»æ–¹å—ï¼ˆCase A, B, C, Dï¼‰ã€‚å½“æˆ‘ä»¬ç‚¹å‡»é˜»å¡æŒ‰é’®æ—¶ï¼Œå¥‡æ€ªçš„ç°è±¡å‘ç”Ÿäº†ï¼š</p>
<ol>
<li><strong>æ–¹å— Cï¼ˆJS é©±åŠ¨ï¼‰</strong>ï¼šç«‹å³åœæ­¢ã€‚</li>
<li><strong>æ–¹å— Dï¼ˆMargin åŠ¨ç”»ï¼‰</strong>ï¼šç«‹å³åœæ­¢ã€‚</li>
<li><strong>æ–¹å— Bï¼ˆTransform + Widthï¼‰</strong>ï¼šç«‹å³åœæ­¢ï¼ˆæˆ–å˜å¾—æåº¦å¡é¡¿ï¼‰ã€‚</li>
<li><strong>æ–¹å— Aï¼ˆçº¯ Transformï¼‰</strong>ï¼š<strong>å±…ç„¶è¿˜åœ¨æµç•…æ—‹è½¬ï¼</strong></li>
</ol>
<p>ä¸ºä»€ä¹ˆæ–¹å— A èƒ½çªç ´ JS çš„å°é”ï¼Ÿ</p>
<h2 data-id="heading-1">å¿…é¡»äº†è§£çš„ä¸¤ä½ä¸»è§’ï¼šä¸»çº¿ç¨‹ vs. åˆæˆçº¿ç¨‹</h2>
<p>è¦ç†è§£è¿™ä¸ªç°è±¡ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“æµè§ˆå™¨å†…éƒ¨ä¹Ÿæ˜¯â€œå¤šçº¿ç¨‹â€å·¥ä½œçš„ã€‚å…¶ä¸­æœ€é‡è¦çš„ä¸¤ä¸ªçº¿ç¨‹æ˜¯ï¼š</p>
<ol>
<li><strong>ä¸»çº¿ç¨‹ (Main Thread)</strong>ï¼š</li>
</ol>
<ul>
<li>å®ƒæ˜¯æœ€å¿™ç¢Œçš„ã€‚è´Ÿè´£è¿è¡Œ JavaScriptã€è®¡ç®— HTML å…ƒç´ çš„æ ·å¼ï¼ˆStyleï¼‰ã€è®¡ç®—é¡µé¢å¸ƒå±€ï¼ˆLayoutï¼‰ã€ç»˜åˆ¶å›¾å±‚å†…å®¹ï¼ˆPaintï¼‰ã€‚</li>
<li><strong>å®ƒæ˜¯â€œå•çº¿ç¨‹â€çš„</strong>ã€‚å¦‚æœä½ å†™äº†ä¸€ä¸ªæ­»å¾ªç¯ï¼Œå®ƒå°±æ²¡ç©ºå»ç®—å¸ƒå±€ï¼Œä¹Ÿæ²¡ç©ºç»˜å›¾ã€‚</li>
</ul>
<ol start="2">
<li><strong>åˆæˆçº¿ç¨‹ (Compositor Thread)</strong>ï¼š</li>
</ol>
<ul>
<li>å®ƒæ˜¯ä¸»çº¿ç¨‹çš„åŠ©æ‰‹ï¼Œé€šå¸¸ç”± GPU ååŠ©ã€‚</li>
<li>å®ƒçš„å·¥ä½œæ˜¯å°†ä¸»çº¿ç¨‹ç”»å¥½çš„å„ä¸ªå›¾å±‚ï¼ˆLayersï¼‰æ¥æ”¶è¿‡æ¥ï¼Œè¿›è¡Œåˆæˆï¼ˆCompositeï¼‰ï¼Œå¹¶æœ€ç»ˆæ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚</li>
<li><strong>é‡ç‚¹</strong>ï¼šå®ƒå¯ä»¥ç‹¬ç«‹äºä¸»çº¿ç¨‹å¤„ç†ä¸€äº›ç‰¹å®šçš„è§†è§‰å˜æ¢ï¼Œæ¯”å¦‚<strong>ä½ç§»ï¼ˆTranslateï¼‰ã€æ—‹è½¬ï¼ˆRotateï¼‰ã€ç¼©æ”¾ï¼ˆScaleï¼‰å’Œé€æ˜åº¦ï¼ˆOpacityï¼‰</strong>ã€‚</li>
</ul>
<h2 data-id="heading-2">æ¡ˆä»¶åˆ†æ</h2>
<p>è®©æˆ‘ä»¬ç»“åˆä»£ç é€ä¸€åˆ†æå››ä¸ªæ–¹å—çš„å‘½è¿ã€‚</p>
<h3 data-id="heading-3">å—å®³è€…ä¸€ï¼šCase C (JavaScript é©±åŠ¨)</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// JS é©±åŠ¨çš„åŠ¨ç”»é€»è¾‘</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">animateJS</span> = (<span class="hljs-params">time: <span class="hljs-built_in">number</span></span>) =&gt; {
  <span class="hljs-comment">// ...è®¡ç®—ä½ç½® x ...</span>
  <span class="hljs-keyword">if</span> (jsBoxRef.<span class="hljs-property">current</span>) {
    jsBoxRef.<span class="hljs-property">current</span>.<span class="hljs-property">style</span>.<span class="hljs-property">transform</span> = <span class="hljs-string">`translateX(<span class="hljs-subst">${x}</span>px)`</span>;
  }
  requestRef.<span class="hljs-property">current</span> = <span class="hljs-title function_">requestAnimationFrame</span>(animateJS);
};

</code></pre>
<p><strong>æ­»å› </strong>ï¼šä¾èµ–ä¸»çº¿ç¨‹ã€‚
<code>requestAnimationFrame</code> æ˜¯è¯·æ±‚æµè§ˆå™¨åœ¨ä¸‹ä¸€æ¬¡é‡ç»˜å‰è°ƒç”¨æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚è¿™ä¸ªå›è°ƒå‡½æ•°æ˜¯åœ¨<strong>ä¸»çº¿ç¨‹</strong>ä¸Šæ‰§è¡Œçš„ã€‚å½“ä¸»çº¿ç¨‹è¢« <code>while</code> å¾ªç¯å¡æ­»æ—¶ï¼Œ<code>animateJS</code> å‡½æ•°æ ¹æœ¬å¾—ä¸åˆ°æ‰§è¡Œæœºä¼šã€‚æ‰€ä»¥åŠ¨ç”»ç¬é—´å†»ç»“ã€‚</p>
<h3 data-id="heading-4">å—å®³è€…äºŒï¼šCase D (Layout å±æ€§ - Margin)</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æ”¹å˜ margin-left */</span>
<span class="hljs-keyword">@keyframes</span> pure-margin {
  <span class="hljs-number">0%</span> { <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">0</span>; }
  <span class="hljs-number">50%</span> { <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">150px</span>; } <span class="hljs-comment">/* è§¦å‘ Layout */</span>
  <span class="hljs-number">100%</span> { <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">0</span>; }
}

</code></pre>
<p><strong>æ­»å› </strong>ï¼šè§¦å‘é‡æ’ï¼ˆReflow/Layoutï¼‰ã€‚
<code>margin</code> å±æ€§å†³å®šäº†å…ƒç´ åœ¨æ–‡æ¡£æµä¸­çš„ä½ç½®ã€‚ä¿®æ”¹å®ƒä¼šå½±å“å‘¨å›´å…ƒç´ çš„æ’ç‰ˆã€‚æµè§ˆå™¨å¿…é¡»é‡æ–°è®¡ç®—å¸ƒå±€ï¼ˆLayout é˜¶æ®µï¼‰ï¼Œè¿™ä¸ªè®¡ç®—è¿‡ç¨‹å¿…é¡»åœ¨<strong>ä¸»çº¿ç¨‹</strong>å®Œæˆã€‚ä¸»çº¿ç¨‹å¿™ç€è·‘æ­»å¾ªç¯ï¼Œæ²¡ç©ºç®—å¸ƒå±€ï¼Œæ‰€ä»¥åŠ¨ç”»åœæ­¢ã€‚</p>
<h3 data-id="heading-5">å—å®³è€…ä¸‰ï¼šCase B (æ··åˆå±æ€§ - Transform + Width)</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@keyframes</span> mixed-transform {
  <span class="hljs-number">0%</span> { <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">0deg</span>); <span class="hljs-attribute">width</span>: <span class="hljs-number">48px</span>; }
  <span class="hljs-number">50%</span> { <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">180deg</span>); <span class="hljs-attribute">width</span>: <span class="hljs-number">120px</span>; } <span class="hljs-comment">/* Width è§¦å‘ Layout */</span>
  <span class="hljs-number">100%</span> { <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">360deg</span>); <span class="hljs-attribute">width</span>: <span class="hljs-number">48px</span>; }
}

</code></pre>
<p><strong>æ­»å› </strong>ï¼šè¢«é˜Ÿå‹æ‹–ç´¯ã€‚
è™½ç„¶å®ƒåŒ…å« <code>transform</code>ï¼ˆç”±åˆæˆçº¿ç¨‹å¤„ç†ï¼‰ï¼Œä½†å®ƒåŒæ—¶ä¹Ÿæ”¹å˜äº† <code>width</code>ã€‚<code>width</code> çš„æ”¹å˜ä¼šè§¦å‘ Layoutã€‚æµè§ˆå™¨é€šå¸¸éœ€è¦æ¯ä¸€å¸§éƒ½ç¡®è®¤ Layout çš„ç»“æœï¼Œæ‰èƒ½è¿›è¡Œåç»­çš„ç»˜åˆ¶å’Œåˆæˆã€‚å› ä¸º <code>width</code> çš„è®¡ç®—è¢«ä¸»çº¿ç¨‹é˜»å¡äº†ï¼Œæ•´ä¸ªåŠ¨ç”»å¸§çš„æäº¤è¢«å»¶åï¼Œå¯¼è‡´å³ä½¿æ˜¯æ—‹è½¬éƒ¨åˆ†ä¹Ÿè¢«è¿«åœæ­¢ã€‚</p>
<h3 data-id="heading-6">å¹¸å­˜è€…ï¼šCase A (çº¯ Transform)</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ä»…æ”¹å˜ transform */</span>
<span class="hljs-keyword">@keyframes</span> pure-transform {
  <span class="hljs-selector-tag">from</span> { <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">0deg</span>); }
  <span class="hljs-selector-tag">to</span> { <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">360deg</span>); }
}

</code></pre>
<p><strong>ç”Ÿè¿˜åŸå› </strong>ï¼š<strong>è„±ç¦»ä¸»çº¿ç¨‹ï¼ˆOff Main Threadï¼‰</strong>ã€‚
è¿™æ˜¯æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒé­”æ³•ã€‚</p>
<ol>
<li>å½“æµè§ˆå™¨åˆ†æè¿™ä¸ª CSS åŠ¨ç”»æ—¶ï¼Œå®ƒå‘ç°è¿™ä¸ªåŠ¨ç”»<strong>åª</strong>æ¶‰åŠ <code>transform</code>ã€‚</li>
<li><code>transform</code> ä¸ä¼šæ”¹å˜å…ƒç´ çš„å¸ƒå±€ï¼ˆLayoutï¼‰ï¼Œä¹Ÿä¸éœ€è¦é‡æ–°ç»˜åˆ¶å†…å®¹ï¼ˆPaintï¼‰ï¼Œå®ƒåªéœ€è¦æŠŠç°æœ‰çš„å›¾å±‚æ‹¿æ¥æ—‹è½¬ä¸€ä¸‹ã€‚</li>
<li>ä¸»çº¿ç¨‹ä¼šå°†è¿™ä¸ªåŠ¨ç”»ä»»åŠ¡åŠå…¶å›¾å±‚ä¿¡æ¯ç›´æ¥<strong>æäº¤ï¼ˆCommitï¼‰ç»™åˆæˆçº¿ç¨‹</strong>ã€‚</li>
<li><strong>åˆæˆçº¿ç¨‹</strong>è¯´ï¼šâ€œæ”¶åˆ°ï¼Œå‰©ä¸‹çš„äº¤ç»™æˆ‘ã€‚â€</li>
</ol>
<p>æ­¤æ—¶ï¼Œæ— è®ºä¸»çº¿ç¨‹æ˜¯åœ¨è·‘æ­»å¾ªç¯ï¼Œè¿˜æ˜¯åœ¨è¿›è¡Œå¤æ‚çš„è®¡ç®—ï¼Œ<strong>åˆæˆçº¿ç¨‹</strong>éƒ½åœ¨ç‹¬ç«‹å·¥ä½œã€‚å®ƒä¸æ–­åœ°æŒ‡ç¤º GPU æ—‹è½¬é‚£ä¸ªå›¾å±‚ï¼Œå¹¶æ›´æ–°å±å¹•ã€‚</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå³ä¾¿ä½ çš„ JS å¡æ­»äº†ï¼ŒLoading è½¬åœˆåŠ¨ç”»ï¼ˆå¦‚æœå†™å¾—å¯¹ï¼‰ä¾ç„¶åœ¨è½¬ã€‚</p>
<h2 data-id="heading-7">æ€»ç»“ä¸æŠ€æœ¯å¯ç¤º</h2>
<p>é€šè¿‡è¿™ä¸ª Demoï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºæ˜ç¡®çš„æ€§èƒ½ä¼˜åŒ–åŸåˆ™ï¼š</p>
<ol>
<li><strong>é¿å…ä¸»çº¿ç¨‹é˜»å¡</strong>ï¼š</li>
</ol>
<ul>
<li>é•¿è€—æ—¶çš„è®¡ç®—ä»»åŠ¡ï¼ˆå¦‚å¤§æ•°ç»„å¤„ç†ã€å¤æ‚ç®—æ³•ï¼‰ä¸åº”åœ¨ UI æ¸²æŸ“è·¯å¾„ï¼ˆReact Render, Event Handlersï¼‰ä¸­åŒæ­¥æ‰§è¡Œã€‚</li>
<li>è€ƒè™‘ä½¿ç”¨ <code>Web Worker</code> å°†è®¡ç®—ä»»åŠ¡ç§»å‡ºä¸»çº¿ç¨‹ã€‚</li>
<li>åˆ©ç”¨ <code>React Concurrent Mode</code> æˆ– <code>Time Slicing</code> åˆ‡åˆ†ä»»åŠ¡ã€‚</li>
</ul>
<ol start="2">
<li><strong>åŠ¨ç”»æ€§èƒ½é»„é‡‘æ³•åˆ™</strong>ï¼š</li>
</ol>
<ul>
<li>**åšæŒä½¿ç”¨ <code>transform</code> å’Œ <code>opacity**</code>ã€‚åªæœ‰è¿™ä¸¤ä¸ªå±æ€§å¯ä»¥ä¿è¯ 100% åœ¨åˆæˆçº¿ç¨‹è¿è¡Œï¼Œå®Œå…¨ä¸å— JS é˜»å¡å½±å“ã€‚</li>
<li><strong>é¿å…åŠ¨ç”»åŒ–å¸ƒå±€å±æ€§</strong>ï¼ˆå¦‚ <code>width</code>, <code>height</code>, <code>margin</code>, <code>padding</code>, <code>left</code>, <code>top</code>ï¼‰ã€‚è¿™äº›å±æ€§ä¸ä»…å¼€é”€å¤§ï¼ˆè§¦å‘ Layoutï¼‰ï¼Œè€Œä¸”ä¸€æ—¦ä¸»çº¿ç¨‹å¡é¡¿ï¼ŒåŠ¨ç”»å°±ä¼šæ‰å¸§ã€‚</li>
<li><strong>è­¦æƒ•â€œæ··åˆæ±¡æŸ“â€</strong>ï¼šä¸è¦åœ¨ä¸€ä¸ª <code>@keyframes</code> ä¸­åŒæ—¶åŒ…å«åˆæˆå±æ€§ï¼ˆtransformï¼‰å’Œå¸ƒå±€å±æ€§ï¼ˆwidthï¼‰ï¼Œå¦åˆ™é«˜æ€§èƒ½çš„å±æ€§ä¹Ÿä¼šè¢«æ‹–ç´¯ã€‚</li>
</ul>
<h2 data-id="heading-8">ä¸‹ä¸€æ­¥è¡ŒåŠ¨</h2>
<p>æ£€æŸ¥ä½ é¡¹ç›®ä¸­çš„ Loading ç»„ä»¶æˆ–è¿‡æ¸¡åŠ¨ç”»ã€‚ç¡®ä¿å®ƒä»¬æ˜¯åŸºäº CSS <code>transform</code> å®ç°çš„ï¼Œè€Œä¸æ˜¯ JavaScript æˆ– <code>margin</code>ã€‚è¿™æ ·ï¼Œå³ä½¿ä½ çš„åç«¯æ¥å£è¿”å›æ…¢ï¼Œæˆ–è€…å‰ç«¯æ•°æ®å¤„ç†å¡é¡¿ï¼Œç”¨æˆ·ä¾ç„¶èƒ½çœ‹åˆ°ä¸€ä¸ªä¸èˆ¬é¡ºæ»‘çš„åŠ è½½æŒ‡ç¤ºå™¨ï¼Œä»è€Œå‡å°‘â€œåº”ç”¨å·²å´©æºƒâ€çš„é”™è§‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ¬¡ WebGPU æµä½“ä¹‹æ—…ï½]]></title>    <link>https://juejin.cn/post/7602544700475031562</link>    <guid>https://juejin.cn/post/7602544700475031562</guid>    <pubDate>2026-02-04T03:42:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602544700475031562" data-draft-id="7602512226999500850" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ¬¡ WebGPU æµä½“ä¹‹æ—…ï½"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,JavaScript"/> <meta itemprop="datePublished" content="2026-02-04T03:42:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘å®‰ä¸œå°¼"/> <meta itemprop="url" content="https://juejin.cn/user/1521379823340792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ¬¡ WebGPU æµä½“ä¹‹æ—…ï½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379823340792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘å®‰ä¸œå°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T03:42:52.000Z" title="Wed Feb 04 2026 03:42:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftympanus.net%2Fcodrops%2F2025%2F01%2F29%2Fparticles-progress-and-perseverance-a-journey-into-webgpu-fluids%2F" target="_blank" title="https://tympanus.net/codrops/2025/01/29/particles-progress-and-perseverance-a-journey-into-webgpu-fluids/" ref="nofollow noopener noreferrer">Particles, Progress, and Perseverance: A Journey into WebGPU Fluids</a></p>
<p>ä½œè€…ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftympanus.net%2Fcodrops%2Fauthor%2Fhector%2F" target="_blank" title="https://tympanus.net/codrops/author/hector/" ref="nofollow noopener noreferrer">Hector Arellano</a></p>
<p>æ—¥æœŸï¼š2025å¹´1æœˆ29æ—¥</p>
<p>ç¿»è¯‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN" target="_blank" title="https://github.com/TUARAN" ref="nofollow noopener noreferrer">TUARAN</a></p>
</blockquote>
<blockquote>
<p>æ¬¢è¿å…³æ³¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" target="_blank" title="https://github.com/TUARAN/frontend-weekly-digest-cn" ref="nofollow noopener noreferrer">å‰ç«¯å‘¨åˆŠ</a>ï¼Œæ¯å‘¨æ›´æ–°å›½å¤–è®ºå›çš„å‰ç«¯çƒ­é—¨æ–‡ç« ï¼Œç´§è·Ÿæ—¶äº‹ï¼ŒæŒæ¡å‰ç«¯æŠ€æœ¯åŠ¨æ€ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/66a8f7b9d2d741bd8bb08aabe1c5e1aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781372&amp;x-signature=zo8XSIZG66EuA4LFen2Gc2gXkiU%3D" alt="image.png" loading="lazy"/></p>
<p>æœ¬æ–‡æ˜¯ä¸€æ®µå›é¡¾å¼çš„é•¿æ—…ç¨‹ï¼šä½œè€…ç”¨åå¤šå¹´çš„æ—¶é—´ä¸æ–­å°è¯•â€œæµè§ˆå™¨é‡Œåšæµä½“â€ï¼Œä» WebGL æ—¶ä»£çš„å„ç§ Hackï¼Œä¸€è·¯èµ°åˆ° WebGPU è®©è®¸å¤šâ€œç°ä»£å›¾å½¢ API èƒ½åŠ›â€å˜å¾—å¯ç”¨ã€‚</p>
<ul>
<li>Demoï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftympanus.net%2FTutorials%2FWebGPUFluid%2F" target="_blank" title="https://tympanus.net/Tutorials/WebGPUFluid/" ref="nofollow noopener noreferrer">tympanus.net/Tutorials/Wâ€¦</a></li>
<li>Codeï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FHectorArellanoDev%2FWebGPUFluids" target="_blank" title="https://github.com/HectorArellanoDev/WebGPUFluids" ref="nofollow noopener noreferrer">github.com/HectorArellâ€¦</a></li>
</ul>
<p>ç¼–è€…æŒ‰ï¼šå¦‚æœä½ å…³æ³¨è¿‡ Web å›¾å½¢åœˆå­ï¼Œå¯èƒ½çŸ¥é“ Hector Arellanoï¼ˆåˆå <a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fhector_arellano" target="_blank" title="https://x.com/hector_arellano" ref="nofollow noopener noreferrer">Hat</a>ï¼‰ã€‚è¿™ç¯‡æ–‡ç« ä¸ä»…æ˜¯æŠ€æœ¯æ‹†è§£ï¼Œæ›´æ˜¯ä¸€æ®µå…³äºåšæŒã€è¯•é”™ã€ä¸ Web å›¾å½¢æ¼”è¿›çš„æ•…äº‹ã€‚</p>
<p>æ³¨æ„ï¼šDemo ä¾èµ– <strong>WebGPU</strong>ï¼Œå¹¶éæ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒã€‚è¯·ä½¿ç”¨æ”¯æŒ WebGPU çš„æµè§ˆå™¨ï¼ˆä¾‹å¦‚æœ€æ–°ç‰ˆ Chrome / Edgeï¼Œå¹¶ç¡®ä¿ WebGPU å·²å¯ç”¨ï¼‰ã€‚</p>
<p>åœ¨ç»§ç»­é˜…è¯»ä¹‹å‰â€¦â€¦å…ˆå»æ‹¿æ¯å–çš„â€”â€”<em>è¿™ç¯‡å¾ˆé•¿</em>ã€‚</p>
<h2 data-id="heading-0">13 å¹´å‰â€¦â€¦</h2>
<p>æˆ‘æ­£ç›¯ç€ç”µè„‘å±å¹•å‘å‘†ï¼ˆæ— èŠå¾—å¾ˆï¼‰ï¼Œä¸€ä¸ªå¾ˆè¦å¥½çš„æœ‹å‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2FSirokos" target="_blank" title="https://x.com/Sirokos" ref="nofollow noopener noreferrer">Felix</a> æ‰“ç”µè¯ç»™æˆ‘ï¼Œéå¸¸è®¤çœŸåˆå…´å¥‹åœ°è¯´ï¼šGathering Party åˆšå‘å¸ƒäº†ä¸€ä¸ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DLTOC_ajkRkU" target="_blank" title="https://www.youtube.com/watch?v=LTOC_ajkRkU" ref="nofollow noopener noreferrer">æ–° Demo</a>ã€‚å®ƒæœ‰æµä½“æ¨¡æ‹Ÿã€ç²’å­åŠ¨ç”»ã€æƒŠè‰³çš„ç€è‰²æ–¹æ¡ˆâ€”â€”æœ€é‡è¦çš„æ˜¯ï¼Œå®ƒçœŸçš„å¾ˆç¾ã€‚</p>
<p>é‚£æ—¶å€™ WebGL è¿˜ç®—â€œæ–°ä¸œè¥¿â€ï¼ŒæŠŠç¡¬ä»¶åŠ é€Ÿçš„ 3D å›¾å½¢å¸¦è¿›æµè§ˆå™¨ï¼Œçœ‹èµ·æ¥ä¼šæ‰“å¼€å¾ˆå¤šé—¨ã€‚æˆ‘å¤©çœŸåœ°ä»¥ä¸ºï¼šWebGL ä¹Ÿè®¸èƒ½åšå‡º Felix ç»™æˆ‘çœ‹çš„é‚£ç§ä¸œè¥¿ã€‚</p>
<p>ä½†æˆ‘å¼€å§‹ç ”ç©¶é‚£ä¸ª Demo çš„å®ç°æ–¹å¼æ—¶ï¼Œå°±æ’ä¸Šäº†æ®‹é…·ç°å®ï¼šé‡Œé¢ç”¨åˆ°äº†ä¸€å †æˆ‘ä»æ²¡å¬è¿‡çš„ API/ç‰¹æ€§â€”â€”â€œAtomicsï¼ˆåŸå­æ“ä½œï¼‰â€â€œIndirect Draw Callsï¼ˆé—´æ¥ç»˜åˆ¶è°ƒç”¨ï¼‰â€â€œIndirect Dispatchï¼ˆé—´æ¥æ´¾å‘ï¼‰â€â€œStorage Buffersï¼ˆå­˜å‚¨ç¼“å†²åŒºï¼‰â€â€œCompute Shadersï¼ˆè®¡ç®—ç€è‰²å™¨ï¼‰â€â€œ3D Texturesï¼ˆä¸‰ç»´çº¹ç†ï¼‰â€ã€‚</p>
<p>å®ƒä»¬å±äºç°ä»£å›¾å½¢ API çš„èƒ½åŠ›ï¼Œä½†åœ¨å½“æ—¶çš„ WebGL é‡ŒåŸºæœ¬ä¸å­˜åœ¨ã€‚</p>
<p>æ›´åˆ«æå®ƒè¿˜ç”¨äº†å¾ˆå¤šå¬èµ·æ¥å°±å¾ˆå¤æ‚çš„ç®—æ³•/æŠ€æœ¯ï¼šç”¨ <strong>SPHï¼ˆSmoothed Particle Hydrodynamicsï¼Œå¹³æ»‘ç²’å­æµä½“åŠ¨åŠ›å­¦ï¼‰</strong> é©±åŠ¨ç²’å­åŠ¨ç”»ã€ç”¨ <strong>histopyramids</strong> åšæµå‹ç¼©ï¼ˆæˆ‘å½“æ—¶è¿˜æƒ³ï¼šæˆ‘ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªï¼Ÿï¼‰ã€ç”¨ GPU ä¸Šçš„ <strong>marching cubes</strong>ï¼ˆä»ç²’å­ç”Ÿæˆä¸‰è§’å½¢ï¼Ÿï¼Ÿï¼Ÿï¼‰ç­‰ç­‰ã€‚</p>
<p>æˆ‘å®Œå…¨ä¸çŸ¥é“ä»å“ªé‡Œå¼€å§‹ã€‚æ›´ç³Ÿçš„æ˜¯ï¼ŒFelix è·Ÿæˆ‘æ‰“èµŒï¼šè¿™ç§æµä½“æ•ˆæœä¸å¯èƒ½åœ¨æµè§ˆå™¨é‡Œâ€œå¯ç”¨äºç”Ÿäº§â€ã€‚</p>
<h2 data-id="heading-1">10 å¹´å‰â€¦â€¦</h2>
<p>åˆè¿‡äº†ä¸‰å¹´ï¼ŒFelix è¯´ä»–è¿˜æœ‰ä¸€ä¸ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3Di8hSZGTXTx8" target="_blank" title="https://www.youtube.com/watch?v=i8hSZGTXTx8" ref="nofollow noopener noreferrer">æ›´ç‚¸è£‚çš„ Demo</a>ä¸€å®šè¦æˆ‘çœ‹ã€‚é™¤äº†æµä½“æ¨¡æ‹Ÿï¼Œå®ƒè¿˜ç”¨å®æ—¶å…‰çº¿è¿½è¸ªæ¸²æŸ“äº†å‡ ä½•ä½“â€”â€”æè´¨å¾ˆéœ‡æ’¼ã€ç”»é¢å¾ˆæƒŠäººã€‚</p>
<p>è¿™ä¸‹æŒ‘æˆ˜æ›´å¤§äº†ï¼šæˆ‘ä¸ä»…æƒ³æ¨¡æ‹Ÿæµä½“ï¼Œæˆ‘è¿˜æƒ³ç”¨å…‰è¿½å»æ¸²æŸ“å®ƒï¼Œå¾—åˆ°æ¼‚äº®çš„åå°„ä¸æŠ˜å°„ã€‚</p>
<p>æˆ‘èŠ±äº†å¤§æ¦‚ 3 å¹´æ‰æŠŠè¿™äº›ä¸œè¥¿ç†è§£åˆ°èƒ½åœ¨ WebGL é‡Œâ€œç¡¬å‡¿â€å‡ºæ¥ï¼š</p>
<ul>
<li>æˆ‘ç”¨ SPH è®©ç²’å­è¡Œä¸ºåƒæµä½“ï¼›</li>
<li>æˆ‘ç”¨ marching cubes ä»ç²’å­ç”Ÿæˆç½‘æ ¼ï¼ˆè§å›¾ 1 çš„æè¿°ï¼‰ã€‚</li>
</ul>
<p>å½“æ—¶æ²¡æœ‰ atomicsï¼Œæˆ‘å°±ç”¨å¤šæ¬¡ draw call æŠŠæ•°æ®å¡è¿›çº¹ç†çš„ RGBA é€šé“æ¥â€œåˆ†å±‚â€ï¼›æ²¡æœ‰ storage buffer å’Œ 3D çº¹ç†ï¼Œæˆ‘å°±ç”¨çº¹ç†å­˜æ•°æ®ï¼Œå¹¶ç”¨äºŒç»´å±‚æ¥â€œæ¨¡æ‹Ÿâ€ 3D çº¹ç†ï¼›æ²¡æœ‰ indirect drawï¼Œæˆ‘å°±å¹²è„†æŒ‰é¢„æœŸæ•°é‡å‘èµ· draw callï¼›æ²¡æœ‰ compute shaderï¼Œæˆ‘å°±ç”¨é¡¶ç‚¹ç€è‰²å™¨åš GPGPU çš„æ•°æ®é‡æ’â€¦â€¦è™½ç„¶ä¹Ÿåšä¸å‡ºé‚£ç§â€œåœ¨ buffer é‡Œéšæ„å†™å¤šä¸ªå†…å­˜ä½ç½®â€çš„äº‹ï¼Œä½†è‡³å°‘æˆ‘èƒ½åœ¨ GPU é‡Œç”Ÿæˆä¸€ä¸ªåŠ é€Ÿç»“æ„ã€‚</p>
<p>å®ç°æ˜¯èƒ½è·‘ï¼Œä½†ç¦»â€œç¾â€å·®å¾—å¾ˆè¿œï¼ˆFelix ç›´æ¥è¯„ä»·ï¼šä¸‘ã€‚ç¡®å®ä¸‘ï¼Œä½ å¯ä»¥æƒ³è±¡å›¾ 2ï¼‰ã€‚æˆ‘é‚£æ—¶ä¹Ÿä¸å¤ªæ‡‚è·ç¦»åœºï¼Œä¹Ÿä¸çŸ¥é“æ€ä¹ˆæŠŠ shading åšå¾—æ›´æœ‰è¶£ï¼ŒåŸºæœ¬å°±æ˜¯è€æ´¾ phongã€‚</p>
<p>æ€§èƒ½ä¹Ÿé™åˆ¶äº†å¾ˆå¤šé«˜çº§æ•ˆæœï¼šç¯å¢ƒå…‰é®è”½ã€æ›´å¤æ‚çš„åå°„æŠ˜å°„â€¦â€¦ä½†è‡³å°‘æˆ‘èƒ½æ¸²æŸ“å‡ºç‚¹ä¸œè¥¿ã€‚</p>
<h2 data-id="heading-2">7 å¹´å‰â€¦â€¦</h2>
<p>å†è¿‡ä¸‰å¹´ï¼Œæˆ‘åˆåšäº†ä¸€äº›è¿›å±•ï¼šå®ç°äº†ä¸€ä¸ªæ··åˆå¼å…‰è¿½ã€‚æ€è·¯æ˜¯ï¼šmarching cubes å…ˆç”Ÿæˆä¸‰è§’å½¢ï¼Œç„¶åç”¨å…‰è¿½å»ç®—äºŒæ¬¡å°„çº¿åšåå°„/æŠ˜å°„ï¼›åŒä¸€ä¸ªå…‰è¿½è¿˜èƒ½éå†åŠ é€Ÿç»“æ„å»åšç„¦æ•£ã€‚è¿™äº›åŸºæœ¬éƒ½æ²¿ç”¨äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fmattswoboda" target="_blank" title="https://x.com/mattswoboda" ref="nofollow noopener noreferrer">Matt Swoboda</a> çš„æƒ³æ³•ï¼ˆé‚£äº› Demo çš„åŸä½œè€…ï¼‰ã€‚æˆ‘çš„å·¥ä½œå¤§éƒ¨åˆ†å°±æ˜¯ï¼šæŠŠä»–çš„ç‚¹å­å°½é‡åœ¨ WebGL é‡Œè·‘èµ·æ¥ï¼ˆç¥ä½ å¥½è¿ï¼‰ã€‚</p>
<p>æ•ˆæœåœ¨è§†è§‰ä¸Šè¿˜ä¸é”™ï¼ˆç±»ä¼¼å›¾ 3ï¼‰ï¼Œä½†éœ€è¦éå¸¸å¼ºçš„ GPUã€‚å½“æ—¶æˆ‘ç”¨çš„æ˜¯ NVidia 1080GTXã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šå³ä½¿ WebGL å¯è¡Œï¼Œä¹Ÿä¸å¯èƒ½æ‹¿å»åšâ€œç”Ÿäº§â€ã€‚æ‰‹æœºä¸è¡Œï¼Œæ™®é€šç¬”è®°æœ¬ä¹Ÿæ‰›ä¸ä½ã€‚</p>
<p>çœ‹å¾—åˆ°â€œç»“æœâ€ï¼Œå´ç”¨ä¸åˆ°çœŸå®é¡¹ç›®é‡Œï¼Œè¿™ç§æŒ«è´¥æ„Ÿå¾ˆå¼ºã€‚æˆ‘èŠ±äº†å¤ªå¤šæ—¶é—´ï¼Œæœ€åä¹Ÿæ²¡æœ‰è¾¾åˆ°æœŸæœ›ã€‚è‡³å°‘ï¼Œè¿™å¥—ä»£ç åº“è¿˜èƒ½ç»§ç»­å¸®æˆ‘å­¦ä¹ ã€‚</p>
<p>äºæ˜¯æˆ‘åœäº†ã€‚</p>
<p>Felix èµ¢äº†èµŒå±€ã€‚</p>
<p>è¿™æ®µé“ºå«å¯¹ä¸€ç¯‡â€œæ•™ç¨‹â€æ¥è¯´å¤ªé•¿äº†ï¼Œä½†æˆ‘æƒ³æŠŠèƒŒæ™¯äº¤ä»£æ¸…æ¥šï¼šæœ‰äº› Demo çœ‹èµ·æ¥åƒâ€œå‡ å¤©æå®šâ€ï¼Œå®é™…å¯èƒ½æ˜¯å¤šå¹´ç§¯ç´¯ï¼›ä½ è¦èŠ±æ—¶é—´å­¦å¾ˆå¤šæŠ€æœ¯ï¼Œä¹Ÿç»å¸¸è¦å€Ÿé‰´åˆ«äººçš„æƒ³æ³•â€”â€”æœ€åä¹Ÿå¯èƒ½ä»ç„¶å¤±è´¥ã€‚</p>
<h2 data-id="heading-3">WebGPU ç™»åœº</h2>
<p>è¿˜è®°å¾—é‚£äº›â€œç°ä»£å›¾å½¢ API çš„å…³é”®è¯â€å—ï¼ŸWebGPU åŸºäºç°ä»£ API æ ‡å‡†ï¼Œè¿™æ„å‘³ç€æˆ‘ä¸å¿…å†é  Hackï¼š</p>
<ul>
<li>æˆ‘å¯ä»¥ç”¨ compute shader ç›´æ¥æ“ä½œ storage bufferï¼›</li>
<li>æˆ‘å¯ä»¥ç”¨ atomics åšé‚»åŸŸæœç´¢ã€æµå‹ç¼©æ—¶çš„ç´¢å¼•å†™å…¥ï¼›</li>
<li>æˆ‘å¯ä»¥ç”¨ dispatch indirect æ¥åªç”Ÿæˆå¿…è¦æ•°é‡çš„ä¸‰è§’å½¢ï¼Œå¹¶ç”¨åŒæ ·çš„æ–¹å¼ç»˜åˆ¶å®ƒä»¬ã€‚</li>
</ul>
<p>æˆ‘æƒ³å­¦ä¹  WebGPUï¼Œäºæ˜¯å†³å®šæŠŠä¹‹å‰çš„æµä½“å·¥ä½œè¿ç§»è¿‡æ¥ï¼Œé¡ºä¾¿ç†è§£æ–°èŒƒå¼ï¼šæ€ä¹ˆç»„ç»‡ pipeline å’Œ bindingã€æ€ä¹ˆç®¡ç† GPU å†…å­˜ä¸èµ„æºâ€¦â€¦åšä¸€ä¸ªå° Demo å¾ˆé€‚åˆç»ƒæ‰‹ã€‚</p>
<p>éœ€è¦å…ˆè®²æ¸…æ¥šï¼šæœ¬æ–‡çš„ Demo <strong>å¹¶ä¸é€‚åˆç”Ÿäº§</strong>ã€‚åœ¨ M3 Max è¿™ç±»æ¯”è¾ƒå¼ºçš„ MacBook Pro ä¸Šå®ƒå¯èƒ½èƒ½è·‘åˆ° 120fpsï¼›M1 Pro ä¸Šå¤§æ¦‚ 60fpsï¼›å…¶å®ƒä¸é”™çš„æœºå™¨ä¹Ÿè®¸ 50fpsâ€¦â€¦ä½†å¦‚æœä½ æ‹¿å»è·‘åœ¨ MacBook Air ä¸Šï¼Œâ€œæµè§ˆå™¨æµä½“æ¢¦â€ä¼šå¾ˆå¿«ç ´ç¢ã€‚</p>
<p>é‚£å®ƒä¸ºä»€ä¹ˆä»ç„¶æœ‰ä»·å€¼ï¼Ÿ</p>
<p>å› ä¸ºå®ƒå…¶å®æ˜¯ä¸€ç»„å¯æ‹†è§£çš„æŠ€æœ¯é›†åˆã€‚ä½ å¯èƒ½å¯¹å…¶ä¸­æŸä¸ªéƒ¨åˆ†æ„Ÿå…´è¶£ï¼šç²’å­åŠ¨ç”»ã€ä»åŠ¿åœºç”Ÿæˆè¡¨é¢ï¼ˆé¿å… ray marchingï¼‰ã€é—´æ¥å…‰ã€ä¸–ç•Œç©ºé—´ AOâ€¦â€¦ä½ å¯ä»¥æŠŠä»“åº“é‡Œçš„ä»£ç æ‹¿å‡ºæ¥ï¼Œåªå–ä½ éœ€è¦çš„éƒ¨åˆ†æ¥æ„å»ºè‡ªå·±çš„æƒ³æ³•ã€‚</p>
<p>è¿™ä¸ª Demo å¤§è‡´å¯ä»¥æ‹†æˆ 4 ä¸ªä¸»è¦é˜¶æ®µï¼š</p>
<ul>
<li><strong>æµä½“æ¨¡æ‹Ÿ</strong>ï¼šç”¨ç²’å­æ¨¡æ‹Ÿï¼ˆåŸºäº Position Based Dynamics æ€è·¯ï¼‰é©±åŠ¨æµä½“çš„è¿åŠ¨ã€‚</li>
<li><strong>å‡ ä½•ç”Ÿæˆ</strong>ï¼šç”¨ GPU ä¸Šçš„ marching cubesï¼Œä»ç²’å­ç”Ÿæˆæ¸²æŸ“ç”¨ä¸‰è§’å½¢ã€‚</li>
<li><strong>å‡ ä½•æ¸²æŸ“</strong>ï¼šä½¿ç”¨è·ç¦»åœºä¼°ç®—å‡ ä½•åšåº¦ä»¥åšæ¬¡è¡¨é¢æ•£å°„ï¼ˆSSSï¼‰ï¼Œå¹¶ç”¨ä½“ç´ é”¥è¿½è¸ªï¼ˆVoxel Cone Tracingï¼‰è®¡ç®— AOã€‚</li>
<li><strong>åˆæˆ</strong>ï¼šåœ°é¢åå°„æ¨¡ç³Šã€è°ƒè‰²ä¸ Bloom ç­‰åæœŸã€‚</li>
</ul>
<h2 data-id="heading-4">æµä½“æ¨¡æ‹Ÿ</h2>
<p>å¾ˆå¤šå¹´å‰ï¼Œå¦‚æœä½ æƒ³åœ¨å›¾å½¢åœˆå­é‡Œâ€œæ˜¾å¾—å¾ˆé…·â€ï¼Œä½ å¾—è¯æ˜ä½ èƒ½è‡ªå·±åšæµä½“æ¨¡æ‹Ÿï¼šåš 2D å°±å¾ˆå¼ºï¼Œåš 3D å°±æ˜¯â€œå°ç¥â€ï¼ˆå½“ç„¶è¿™æ˜¯æˆ‘è„‘å†…çš„ä¸­äºŒè®¾å®šï¼‰ã€‚ä¸ºäº†â€œå°ç¥â€ï¼ˆä¹Ÿä¸ºäº†èµ¢èµŒå±€ï¼‰ï¼Œæˆ‘å¼€å§‹ç–¯ç‹‚è¯» 3D æ¨¡æ‹Ÿç›¸å…³çš„èµ„æ–™ã€‚</p>
<p>åšæµä½“çš„æ–¹æ³•å¾ˆå¤šï¼Œå…¶ä¸­ä¸€ç§å« <strong>SPH</strong>ã€‚ç†æ€§åšæ³•åº”è¯¥æ˜¯å…ˆè¯„ä¼°å“ªä¸ªæ–¹æ³•æ›´é€‚åˆ Webï¼Œä½†æˆ‘å½“æ—¶é€‰å®ƒå°±å› ä¸ºåå­—å¬èµ·æ¥å¾ˆé…·ã€‚SPH æ˜¯ç²’å­æ³•ï¼Œè¿™ä¸€ç‚¹é•¿æœŸæ¥çœ‹å¾ˆæœ‰å¥½å¤„ï¼Œå› ä¸ºåæ¥æˆ‘æŠŠ SPH æ¢æˆäº† position based çš„æ–¹æ³•ã€‚</p>
<p>å¦‚æœä½ åšè¿‡â€œç¾¤ä½“è¡Œä¸ºï¼ˆsteering behaviorsï¼‰â€æˆ– flockingï¼Œä¼šæ›´å®¹æ˜“ç†è§£ SPHã€‚</p>
<p>Three.js æœ‰å¾ˆå¤š flocking ç¤ºä¾‹ï¼Œå®ƒåŸºäºå¸å¼•ã€å¯¹é½ã€æ’æ–¥ç­‰ steering è¡Œä¸ºã€‚ç”¨ä¸åŒçš„æƒé‡/å‡½æ•°ï¼Œæ ¹æ®ç²’å­ä¹‹é—´çš„è·ç¦»å†³å®šç²’å­å—å“ªäº›è¡Œä¸ºå½±å“ã€‚</p>
<p>SPH çš„åšæ³•ä¹Ÿæœ‰ç‚¹ç±»ä¼¼ï¼šä½ å…ˆç®—æ¯ä¸ªç²’å­çš„å¯†åº¦ï¼Œå†ç”¨å¯†åº¦ç®—å‹åŠ›ï¼›å‹åŠ›å°±åƒ flocking é‡Œçš„å¸å¼•/æ’æ–¥ï¼Œä½¿ç²’å­é è¿‘æˆ–è¿œç¦»ã€‚å¯†åº¦åˆæ˜¯é‚»åŸŸç²’å­è·ç¦»çš„å‡½æ•°ï¼Œæ‰€ä»¥å‹åŠ›æœ¬è´¨ä¸Šä¹Ÿæ˜¯â€œç”±è·ç¦»é—´æ¥å†³å®šçš„â€ã€‚</p>
<p>SPH çš„ç²˜æ€§é¡¹ï¼ˆviscosityï¼‰ä¹Ÿç±»ä¼¼ flocking çš„å¯¹é½é¡¹ï¼ˆalignmentï¼‰ï¼šè®©ç²’å­é€Ÿåº¦è¶‹å‘é‚»åŸŸçš„å¹³å‡é€Ÿåº¦åœºã€‚</p>
<p>ä¸ºäº†ï¼ˆè¿‡åº¦ï¼‰ç®€åŒ–ï¼Œä½ å¯ä»¥æŠŠ SPH ç†è§£æˆï¼šç»™ flocking å¥—ä¸Šä¸€ç»„æ›´â€œç‰©ç†æ­£ç¡®â€çš„å‚æ•°ï¼Œè®©ç²’å­æ›´åƒæµä½“ã€‚å½“ç„¶ SPH è¿˜ä¼šæ¶‰åŠè¡¨é¢å¼ åŠ›ç­‰æ›´å¤šæ­¥éª¤ï¼Œä¸”å…¶æ ¸å‡½æ•°/æƒé‡è¿œæ¯”è¿™é‡Œæè¿°å¤æ‚ï¼Œä½†å¦‚æœä½ èƒ½æŠŠ flocking åšå¥½ï¼Œç†è§£ SPH ä¼šæ›´è½»æ¾ã€‚</p>
<p>SPH/ç¾¤ä½“è¡Œä¸ºéƒ½æœ‰ä¸€ä¸ªå…±åŒéš¾ç‚¹ï¼šæœ´ç´ å®ç°æ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>ï¼Œç²’å­å¤šå°±ä¼šçˆ†ç‚¸ã€‚ä½ éœ€è¦ä¸€ä¸ªåŠ é€Ÿç»“æ„åªæŸ¥è¯¢é™„è¿‘ç²’å­ï¼Œè®©å¤æ‚åº¦ä» <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> é™åˆ° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>k</mi><mo>â‹…</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(k\cdot n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>ï¼ˆ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></span> æ˜¯æ¯ä¸ªç²’å­è¦æ£€æŸ¥çš„é‚»å±…æ•°ï¼‰ã€‚å¸¸è§åšæ³•æ˜¯ä½“ç´ ç½‘æ ¼ï¼šæ¯ä¸ªä½“ç´ æ ¼å­å­˜æœ€å¤š 4 ä¸ªç²’å­ç´¢å¼•ã€‚</p>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹é‡Œï¼Œç®—æ³•ä¼šæ£€æŸ¥ç²’å­å‘¨å›´ 27 ä¸ªä½“ç´ ï¼Œæ¯ä¸ªä½“ç´ æœ€å¤š 4 ä¸ªç²’å­ï¼Œæ‰€ä»¥æœ€å¤š 108 æ¬¡é‚»åŸŸæ£€æŸ¥ã€‚å¬èµ·æ¥ä¹Ÿä¸å°‘ï¼Œä½†æ¯”æ£€æŸ¥ 8 ä¸‡ä¸ªç²’å­è¦å¥½å¤ªå¤šã€‚</p>
<p>ä½†é‚»åŸŸéå†ä»ç„¶æ˜‚è´µã€‚SPH è¿˜è¦æ±‚å¤šæ¬¡ passï¼šå¯†åº¦ã€å‹åŠ›/ä½ç§»ã€ç²˜æ€§ã€è¡¨é¢å¼ åŠ›â€¦â€¦å½“ä½ æ„è¯†åˆ° GPU ç»å¤§éƒ¨åˆ†ç®—åŠ›éƒ½åœ¨â€œé©±åŠ¨ç²’å­â€æ—¶ï¼Œæ€§èƒ½å°±ä¼šå˜å¾—éå¸¸é‡è¦ã€‚</p>
<p>è€Œä¸” SPH å¾ˆéš¾è°ƒå‚ï¼Œä½ å¾—ç†è§£å¾ˆå¤šå·¥ç¨‹/ç‰©ç†å‚æ•°æ‰èƒ½åšå¾—å¥½çœ‹ã€‚</p>
<p>åæ¥ NVidia æå‡ºäº†ä¸€å¥—ç²’å­åŠ¨åŠ›å­¦æ–¹æ³•ï¼š<strong>Position Based Dynamicsï¼ˆPBDï¼‰</strong>ï¼Œå…¶ä¸­åŒ…å«åˆšä½“ã€è½¯ä½“ã€æµä½“ã€ç¢°æ’ç­‰ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fmmacklin.com%2F2017-EG-CourseNotes.pdf" target="_blank" title="https://mmacklin.com/2017-EG-CourseNotes.pdf" ref="nofollow noopener noreferrer">è¯¾ç¨‹ç¬”è®°åœ¨è¿™é‡Œ</a>ã€‚</p>
<p>PBD é€šè¿‡â€œçº¦æŸï¼ˆconstraintsï¼‰â€ç›´æ¥ä¿®æ­£ç²’å­ä½ç½®ï¼Œç»“æœç¨³å®šã€è°ƒå‚ç›¸å¯¹å®¹æ˜“ã€‚è¿™è®©æˆ‘ä» SPH è½¬å‘ <strong>PBFï¼ˆPosition Based Fluidsï¼‰</strong>ã€‚æ ¸å¿ƒå·®åˆ«åœ¨äºï¼šPBF ç”¨çº¦æŸæ¥å®šä¹‰ä½ç§»ï¼Œè€Œä¸æ˜¯åƒ SPH é‚£æ ·å…ˆç®—å¯†åº¦ã€‚</p>
<p>PBF çš„å‚æ•°æ›´â€œæ— é‡çº²â€ï¼Œæ›´å¥½ç†è§£ã€‚</p>
<p>ä½†å®ƒä¹Ÿæœ‰ä»£ä»·ï¼šPBD å¾€å¾€è¦è¿­ä»£å¤šæ¬¡æ‰èƒ½å¾—åˆ°æ›´å¥½ç»“æœï¼ˆè®¡ç®—çº¦æŸã€åº”ç”¨ä½ç§»ã€è®¡ç®—ç²˜æ€§â€¦â€¦åå¤æ‰§è¡Œï¼‰ï¼Œç¨³å®šä½†æ›´æ…¢ã€‚</p>
<p>è€Œæˆ‘ä¸æƒ³åªæ¸²æŸ“ç²’å­ï¼Œæˆ‘è¦æ¸²æŸ“ç½‘æ ¼ï¼šGPU è¿˜è¦ç®—ä¸‰è§’å½¢ã€åšæ¸²æŸ“ã€‚æˆ‘æ²¡æœ‰è¶³å¤Ÿé¢„ç®—åšå¤šè½®è¿­ä»£ï¼Œæ‰€ä»¥æˆ‘å¿…é¡»â€œç è§’â€ã€‚</p>
<p>å¹¸è¿çš„æ˜¯ï¼ŒPBD æœ‰ä¸€ç§å¾ˆä¾¿å®œçš„ç¢°æ’è®¡ç®—æ–¹å¼ï¼šåœ¨æ–½åŠ åŠ›ï¼ˆforcesï¼‰ååšä¸€æ¬¡ pass å³å¯ã€‚æˆ‘é€‰æ‹©ï¼š</p>
<ul>
<li>ç”¨é‡åŠ›ä½œä¸ºä¸»åŠ›ï¼›</li>
<li>ç”¨ curl noise ä½œä¸ºè¾…åŠ©åŠ›ï¼Œå¢åŠ æµä½“æ„Ÿï¼›</li>
<li>ç”¨é¼ æ ‡é©±åŠ¨ä¸€ä¸ªå¾ˆå¼ºçš„æ–¥åŠ›ï¼ˆrepulsionï¼‰ï¼›</li>
<li>è®©ç¢°æ’è´Ÿè´£é¿å…ç²’å­èšæˆå¥‡æ€ªçš„å›¢ã€‚</li>
</ul>
<p>curl + é‡åŠ›æä¾›â€œåƒæµä½“â€çš„æ•´ä½“è¶‹åŠ¿ï¼Œç¢°æ’é¿å…ç²’å­èšå›¢ã€‚å®ƒä¸å¦‚ PBF é‚£ä¹ˆçœŸå®ï¼Œä½†æ›´å¿«ã€‚</p>
<p>å®ç°ä¸Šåªéœ€è¦ä¸€æ¬¡ pass åº”ç”¨æ‰€æœ‰åŠ›ï¼ŒåŒæ—¶åœ¨ storage buffer é‡Œç”Ÿæˆç½‘æ ¼åŠ é€Ÿç»“æ„ï¼›atomics å†™ç´¢å¼•åªéœ€è¦å‡ è¡Œä»£ç ã€‚ä½ å¯ä»¥åœ¨ä»“åº“çš„ <code>PBF_applyForces.wgsl</code> é‡Œè¯»åˆ°åŠ›ä¸ç½‘æ ¼æ„å»ºçš„å®ç°ã€‚</p>
<p>ç²’å­ä½ç½®æ›´æ–°åœ¨ <code>PBF_calculateDisplacements.wgsl</code>ï¼šè´Ÿè´£éå†é‚»åŸŸåšç¢°æ’ï¼Œä¹Ÿè´Ÿè´£å’Œç¯å¢ƒï¼ˆä¸å¯è§åŒ…å›´ç›’ï¼‰ç¢°æ’ã€‚</p>
<p>pipeline ä¸ç»‘å®šåœ¨ <code>PBF.js</code>ï¼šæ¨¡æ‹Ÿåªç”¨ä¸‰ä¸ª shaderâ€”â€”æ–½åŠ›ã€ä½ç§»æ›´æ–°ã€é€Ÿåº¦ç§¯åˆ†ã€‚ä½ç½®æ›´æ–°åï¼Œé€Ÿåº¦é€šè¿‡â€œæ–°ä½ç½® - æ—§ä½ç½®â€çš„å·®å€¼å¾—åˆ°ã€‚</p>
<p>æœ€åä¸€ä¸ª shader <code>PBF_integrateVelocity.wgsl</code> è¿˜ä¼šè®¾ç½®ä¸€ä¸ªåŒ…å«ç²’å­ä¿¡æ¯çš„ 3D çº¹ç†ï¼Œåç»­ä¼šç”¨äº marching cubes ç”ŸæˆåŠ¿åœºã€‚</p>
<h2 data-id="heading-5">Marching Cubesï¼ˆå‡ ä½•ç”Ÿæˆï¼‰</h2>
<p>å½“å¹´æˆ‘ç¬¬ä¸€æ¬¡ç”¨ SPH æŠŠç²’å­è·‘èµ·æ¥æ—¶å…´å¥‹å¾—ä¸è¡Œï¼Œåœ¨åŠå…¬å®¤åˆ°å¤„å¹ï¼ˆåŸºæœ¬åˆ°å¤„éƒ½æ˜¯ï¼‰ã€‚Felix å½“ç„¶çŸ¥é“æ€ä¹ˆæ²»æˆ‘ï¼šä»–æŠŠæˆ‘èµ¶å›å»ç»§ç»­åšâ€œè¡¨é¢ç”Ÿæˆâ€ï¼Œå› ä¸ºåªæœ‰æŠŠæµä½“æ¸²æŸ“æˆæ¶²ä½“è¡¨é¢è€Œä¸æ˜¯ç‚¹ï¼Œæ‰ç®—â€œåƒæ ·â€ã€‚</p>
<p>ä»ç²’å­åœºæ¸²æŸ“è¡¨é¢å¸¸è§æœ‰ä¸‰ç§æ€è·¯ï¼š</p>
<ul>
<li>Point Splatting</li>
<li>Raymarching</li>
<li>Marching Cubes</li>
</ul>
<p>Point splatting æ˜¯æœ€ç®€å•ä¹Ÿæœ€å¿«çš„ä¸€ç§ï¼šå±å¹•ç©ºé—´æ•ˆæœï¼Œæ¸²æŸ“ç²’å­åç»“åˆå¯åˆ†ç¦»æ¨¡ç³Šä¸æ·±åº¦æ¥ç”Ÿæˆæ³•çº¿ã€‚æ•ˆæœå¾ˆä¸é”™ï¼Œè¿˜èƒ½åšç„¦æ•£ï¼Œå®æ—¶æ€§èƒ½ä¹Ÿå¥½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52e2d6af1d614b8984c5ae358dd1e3fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781372&amp;x-signature=DkJtpujkAeTd8oY205pgW7GfOJ8%3D" alt="image.png" loading="lazy"/></p>
<p>Raymarching å¾ˆæœ‰è¶£ï¼Œèƒ½åšå¤šæ¬¡åå°„æŠ˜å°„ç­‰å¤æ‚æ•ˆæœï¼Œä½†éå¸¸æ…¢ï¼šä½ éœ€è¦ä»ç²’å­ç”Ÿæˆè·ç¦»åœºï¼Œå†åœ¨è·ç¦»åœºé‡Œåšæ­¥è¿›é‡‡æ ·ï¼ˆè¿‡å»è¿˜æ²¡æœ‰ 3D çº¹ç†ï¼Œåªèƒ½è½¯æ’å€¼ï¼‰ã€‚å³ä½¿ç¡¬ä»¶æ”¯æŒä¸‰çº¿æ€§æ’å€¼ï¼Œæ€§èƒ½ä¹Ÿä¾ç„¶ä¸å¤ªç†æƒ³ã€‚ç”»é¢å¾ˆç¾ï¼Œä½†ä¸é€‚åˆå®æ—¶ã€‚</p>
<p>Marching cubes å¬èµ·æ¥å¾ˆå¸å¼•äººï¼šä»ç²’å­ç”Ÿæˆçš„åŠ¿åœºï¼ˆpotential fieldï¼‰é‡Œæå–ç­‰å€¼é¢ç”Ÿæˆç½‘æ ¼ã€‚ä¼˜ç‚¹æ˜¯ç½‘æ ¼å¯ç›´æ¥æ …æ ¼åŒ–ï¼Œåœ¨é«˜åˆ†è¾¨ç‡ä¸‹ä¹Ÿèƒ½ç¨³å®šæ¸²æŸ“ï¼›å¹¶ä¸”æœ‰äº†ç½‘æ ¼ï¼Œå¾ˆå¤šâ€œåå°„â€å°±èƒ½æ›´ä¾¿å®œåœ°å®ç°ã€‚ä¸å‰ä¸¤ç§æ–¹æ¡ˆç›¸æ¯”ï¼Œå®ƒæ›´å®¹æ˜“ä½œä¸ºä¸–ç•Œç©ºé—´å‡ ä½•ä½“èå…¥åœºæ™¯ã€‚</p>
<p>Three.js æœ‰ marching cubes çš„ä¾‹å­ï¼Œä½†é‚£äº›æ˜¯ CPU ä¸Šç”Ÿæˆè¡¨é¢ï¼›è€Œæˆ‘çš„ç²’å­æ•°æ®åœ¨ GPUã€‚æˆ‘å»è¯» Matt Swoboda çš„åˆ†äº«ï¼Œäº†è§£ä»–å¦‚ä½•åœ¨ GPU ä¸Šåš marching cubesï¼Œä½†é‡Œé¢æœ‰å¾ˆå¤šæˆ‘å½“æ—¶è¿˜ä¸æ‡‚çš„é—®é¢˜ï¼š</p>
<ul>
<li>å¦‚ä½•ä»ç²’å­åœºç”ŸæˆåŠ¿åœºï¼Ÿ</li>
<li>é—´æ¥ dispatch æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ</li>
<li>å¦‚ä½•åœ¨ GPU ä¸Šç”Ÿæˆä¸‰è§’å½¢ï¼Ÿ</li>
</ul>
<p>å…ˆæŠŠè·¯çº¿å›¾è®²æ¸…æ¥šã€‚Marching cubes æœ¬è´¨æ˜¯ä»åŠ¿åœºæå–ç­‰å€¼é¢ï¼ˆiso-surfaceï¼‰ã€‚å…³é”®æ­¥éª¤æœ‰ï¼š</p>
<ol>
<li>ä»ç²’å­ç”ŸæˆåŠ¿åœºï¼ˆpotentialï¼‰ã€‚</li>
<li>åœ¨ä½“ç´ ç½‘æ ¼ä¸Šè¯„ä¼°åŠ¿å€¼ï¼Œå†³å®šæ¯ä¸ªä½“ç´ å¯¹åº” 256 ç§â€œcaseâ€é‡Œå“ªä¸€ç§ï¼ˆæ¯ä¸ªä½“ç´ ä¼šç”Ÿæˆ 0 åˆ° 5 ä¸ªä¸‰è§’å½¢ï¼‰ã€‚</li>
<li>GPU ä¸ŠæŠŠæ»¡è¶³æ¡ä»¶çš„ä½“ç´ å†™å…¥è¿ç»­ bufferï¼ˆç”¨ atomics è¿½åŠ ï¼‰ã€‚</li>
<li>æ ¹æ®ä½“ç´ ä¿¡æ¯ç”Ÿæˆä¸‰è§’å½¢ã€‚</li>
</ol>
<h3 data-id="heading-6">åŠ¿åœºç”Ÿæˆï¼ˆPotential Generationï¼‰</h3>
<p>å¦‚æœä½ äº†è§£ point splattingï¼Œä¼šå‘ç°â€œæ¨¡ç³Šâ€å¾ˆå…³é”®ï¼šå®ƒèƒ½æŠŠç‚¹äº‘å¹³æ»‘æˆè¿‘ä¼¼è¡¨é¢ã€‚åŒæ ·æ€è·¯ä¹Ÿé€‚ç”¨äº 3D çº¹ç†ï¼šå¯¹ 3D çº¹ç†åš blurï¼Œå°±èƒ½å¾—åˆ°ä¸€ç§â€œç©·äººç‰ˆè·ç¦»åœºâ€ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥ç”¨ Jump Flood ç®—æ³•ç”Ÿæˆæ›´ç²¾ç¡®çš„è·ç¦»åœºï¼ˆç²’å­ä¹Ÿå¯ä»¥ï¼‰ï¼Œçœ‹èµ·æ¥è¿˜å¯èƒ½æ¯” 3D blur æ›´å¿«â€”â€”ä½†å®ƒæœ‰ä¸ªè‡´å‘½ç¼ºç‚¹ï¼šå®ƒ<strong>å¤ªç²¾ç¡®</strong>äº†ã€‚</p>
<p>Jump Flood çš„ç»“æœæ›´åƒæ˜¯ä¸€ç»„çƒä½“çš„è·ç¦»åœºï¼Œç­‰å€¼é¢é˜ˆå€¼ä¸åŒä¼šæŠŠçƒâ€œè¿èµ·æ¥â€ï¼Œä½†ä¸ä¼šä»¥ä¸€ç§â€œå¥½çœ‹â€çš„æ–¹å¼å¹³æ»‘ã€‚ä½ å¾—æœ‰éå¸¸å¤šçš„ç²’å­æ‰ä¼šåƒè¿ç»­è¡¨é¢ï¼Œè€Œé‚£ç§æƒ…å†µä¸‹ä½ å€’ä¸å¦‚ç›´æ¥ç”¨ point splattingã€‚</p>
<p>3D blur åè€Œä¼šæŠŠç²’å­â€œæŠ¹å¼€â€ï¼Œå»æ‰é«˜é¢‘çš„é¢—ç²’æ„Ÿï¼Œè®©å®ƒæ›´åƒè¡¨é¢ã€‚blur æ¬¡æ•°è¶Šå¤šï¼Œè¡¨é¢è¶Šå¹³æ»‘ï¼›ä½ ä¹Ÿèƒ½å°è¯•ä¸åŒ blur æ–¹å¼æ··åˆå‡ºä¸åŒçš„è¡¨é¢æ•ˆæœã€‚å¥‡å¦™çš„æ˜¯ï¼šè¿™ä¸ªç®€å•åŠæ³•åœ¨è¿™é‡Œåè€Œæ›´å¿«ã€æ›´å®ç”¨ã€‚</p>
<p>å®ç°ä¸Šï¼Œblur ç”¨ compute shader <code>Blur3D.wgsl</code>ï¼Œæ²¿ä¸‰ä¸ªè½´å„ dispatch ä¸€æ¬¡ï¼›ç»‘å®šä¸ dispatch åœ¨ <code>Blur3D.js</code>ã€‚</p>
<h3 data-id="heading-7">ä½“ç´ ç­›é€‰ï¼ˆChecking voxelsï¼‰</h3>
<p>åŠ¿åœºç”Ÿæˆåï¼Œæˆ‘ç”¨å¦ä¸€ä¸ª compute shader æ‰«æä½“ç´ ç½‘æ ¼ï¼Œæ‰¾å‡ºä¼šç”Ÿæˆä¸‰è§’å½¢çš„ä½“ç´ ã€‚ä»“åº“é‡Œçš„ <code>MarchCase.wgsl</code> ä¼šéå†æ•´ä¸ªä½“ç´ ç½‘æ ¼ï¼Œä¸ºéœ€è¦ç”Ÿæˆä¸‰è§’å½¢çš„ä½“ç´ è®¡ç®— marching cubes caseï¼Œå¹¶ç”¨ atomics æŠŠè¯¥ä½“ç´ çš„ 3D åæ ‡ä¸ case è¿ç»­å†™å…¥ storage bufferã€‚</p>
<p>ç„¶å <code>EncodeBuffer.wgsl</code> è¯»å–ä¸Šä¸€æ­¥å¾—åˆ°çš„ä½“ç´ æ•°é‡ï¼Œç¼–ç å‡ºç”¨äºâ€œé—´æ¥ dispatchâ€çš„å‚æ•°ï¼ˆä¸‰è§’å½¢ç”Ÿæˆéœ€è¦å¤šå°‘é¡¶ç‚¹ï¼‰ä»¥åŠâ€œé—´æ¥ drawâ€çš„å‚æ•°ï¼ˆéœ€è¦ç»˜åˆ¶å¤šå°‘ä¸‰è§’å½¢ï¼‰ã€‚</p>
<h3 data-id="heading-8">ä¸‰è§’å½¢ç”Ÿæˆï¼ˆTriangles Generationï¼‰</h3>
<p>è´Ÿè´£ç”Ÿæˆé¡¶ç‚¹/æ³•çº¿çš„ shader æ˜¯ <code>GenerateTriangles.wgsl</code>ã€‚å®ƒæ ¹æ®æ¯ä¸ªçº¿ç¨‹çš„å…¨å±€ç´¢å¼•å®šä½åˆ°å¯¹åº”ä½“ç´ å’Œè¦ç”Ÿæˆçš„é¡¶ç‚¹ï¼Œå¹¶é€šè¿‡ <code>EncodeBuffer.wgsl</code> äº§ç”Ÿçš„é—´æ¥ dispatch æ¥è¿è¡Œã€‚</p>
<p>ä½“ç´ ä¿¡æ¯ç”¨äºåœ¨è¾¹çš„ä¸¤ä¸ªè§’ç‚¹ä¹‹é—´åšçº¿æ€§æ’å€¼ï¼Œå¾—åˆ°é¡¶ç‚¹ä½ç½®ï¼›æ³•çº¿åˆ™æ¥è‡ªè¾¹ä¸¤ç«¯è§’ç‚¹æ¢¯åº¦ï¼ˆgradientï¼‰çš„çº¿æ€§æ’å€¼ã€‚</p>
<p>åŠ¿åœºç”Ÿæˆã€ä½“ç´ æ”¶é›†ã€ä¸‰è§’å½¢ç”Ÿæˆè¿™äº›æ­¥éª¤åœ¨ <code>TrianglesGenerator.js</code> çš„ <code>generateTriangles</code> å‡½æ•°é‡Œä¸²èµ·æ¥ï¼Œæ¯æ¬¡ç²’å­ä½ç½®æ›´æ–°åéƒ½ä¼šè°ƒç”¨ã€‚</p>
<h2 data-id="heading-9">æ¸²æŸ“</h2>
<p>è¿™äº›å¹´æˆ‘æœ€å¤§çš„é”™è¯¯ä¹‹ä¸€ï¼Œæ˜¯æŠŠâ€œæ¨¡æ‹Ÿ/GPGPU æŠ€æœ¯â€çœ‹å¾—æ¯”â€œè§†è§‰ç¾æ„Ÿâ€æ›´é‡è¦ã€‚æˆ‘å¤ªæ‰§ç€äºè¯æ˜è‡ªå·±èƒ½åšå¤æ‚ä¸œè¥¿ï¼Œè€Œå¿½ç•¥äº†æœ€ç»ˆç”»é¢ã€‚</p>
<p>Felix ç»å¸¸åœ¨æˆ‘å‡†å¤‡å‘å¸ƒ Demo ä¹‹å‰æ‹¦ä½æˆ‘ï¼šèŠ±æ›´å¤šæ—¶é—´æŠŠç”»é¢æ‰“ç£¨å¾—æ›´èˆ’æœï¼Œåˆ«åªåšæˆé‚£ç§â€œåªæœ‰å››ä¸ªäººä¼šè§‰å¾—å¾ˆé…·â€çš„æŠ€æœ¯å±•ç¤ºã€‚</p>
<p>ç›¸ä¿¡æˆ‘ï¼šä½ å¯ä»¥åšå¾ˆå¼ºçš„ç‰©ç†æ¨¡æ‹Ÿã€å¾ˆå¤æ‚çš„æè´¨â€”â€”ä½†å¦‚æœçœ‹èµ·æ¥å¾ˆç³Ÿç³•ï¼Œé‚£å®ƒå°±æ˜¯ç³Ÿç³•ã€‚</p>
<p>æµä½“çš„éš¾ç‚¹åœ¨äºï¼šä½ å·²ç»æŠŠå¤§é‡ GPU æ—¶é—´èŠ±åœ¨ç²’å­åŠ¨åŠ›å­¦å’Œè¡¨é¢ç”Ÿæˆä¸Šäº†ï¼Œç•™ç»™æ¸²æŸ“æ•ˆæœçš„é¢„ç®—ä¸å¤šï¼›è¿˜è¦ç»™åœºæ™¯é‡Œå…¶å®ƒä¸œè¥¿ç•™æ—¶é—´ã€‚æ‰€ä»¥å®æ—¶æµä½“ä¸€èˆ¬å¾ˆéš¾åšåˆ°â€œæè‡´ç”»è´¨â€ã€‚</p>
<p>å®æ—¶æ¸²æŸ“æ¶²ä½“çš„æœ€ä¼˜è§£é€šå¸¸æ˜¯ point splattingï¼šåå°„ã€æŠ˜å°„ã€é˜´å½±ã€ç„¦æ•£éƒ½èƒ½åšï¼Œè€Œä¸”å¾ˆâ€œä¾¿å®œâ€ã€‚ä¸ä¿¡å¯ä»¥çœ‹çœ‹è¿™ä¸ªå¾ˆæ£’çš„ Demoï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwebgpu-ocean.netlify.app%2F" target="_blank" title="https://webgpu-ocean.netlify.app/" ref="nofollow noopener noreferrer">webgpu-ocean.netlify.app/</a></p>
<p>å¦‚æœä½ è¦çš„æ˜¯ä¸é€æ˜/åŠé€æ˜ä½†ä¸éœ€è¦â€œçœŸæ­£é€æ˜â€çš„æ¶²ä½“ï¼ˆæ¯”å¦‚é¢œæ–™ï¼‰ï¼Œmarching cubes æ˜¯ä¸é”™é€‰æ‹©ï¼šä½ å¯ä»¥ç”¨ PBR å¾—åˆ°å¾ˆå¥½çœ‹çš„è§†è§‰ï¼Œè€Œä¸”å®ƒæ˜¯ä¸–ç•Œç©ºé—´å‡ ä½•ï¼Œå’Œåœºæ™¯æ•´åˆæ›´ç®€å•ã€‚</p>
<p>åœ¨è¿™ä¸ª Demo çš„èŒƒå›´é‡Œï¼Œæˆ‘æƒ³åˆ©ç”¨ç°æˆçš„ä½“ç´ ç»“æ„ï¼ˆç”¨äºä¸‰è§’å½¢ç”Ÿæˆï¼‰ä»¥åŠç”¨äºç”Ÿæˆä¸‰è§’å½¢çš„åŠ¿åœºï¼ˆå¯è§†ä½œè·ç¦»åœºï¼‰ï¼Œåšä¸€äº›â€œç›¸å¯¹ä¾¿å®œä½†æœ‰æ•ˆâ€çš„è§†è§‰æå‡ã€‚</p>
<p>æˆ‘å…ˆåšäº†åŸºäºä½“ç´ é”¥è¿½è¸ªï¼ˆVoxel Cone Tracingï¼ŒVCTï¼‰çš„ AOã€‚VCT é€šå¸¸è¦æ±‚å…ˆæŠŠä¸‰è§’å½¢ä½“ç´ åŒ–ï¼Œä½†è¿™ä¸ª Demo åè¿‡æ¥ï¼šæˆ‘ä»¬æœ¬æ¥å°±æ˜¯ä»ä½“ç´ ç”Ÿæˆä¸‰è§’å½¢ã€‚æ‰€ä»¥ VCT æ‰€éœ€çš„ä¸€å¤§å—å·¥ä½œå·²ç»åœ¨æµç¨‹é‡Œã€‚</p>
<p>æˆ‘åªéœ€è¦ç¨å¾®æ”¹ä¸€ä¸‹ <code>MarchCase.wgsl</code>ï¼šç”¨ç¦»æ•£åŒ–æ–¹å¼æ›´æ–°ä½“ç´ ç½‘æ ¼â€”â€”æœ‰ä¸‰è§’å½¢çš„ä½“ç´ æ ‡è®°ä¸º 1ï¼Œæ²¡æœ‰çš„æ ‡è®°ä¸º 0ï¼›åŒæ—¶æŠŠåœ°é¢ä»¥ä¸‹ä¸€å®šé«˜åº¦çš„ä½“ç´ æ ‡ 0.5 æ¥æ¨¡æ‹Ÿåœ°é¢ AOã€‚åªå¤šåŠ ä¸¤è¡Œä»£ç å°±èƒ½å‡†å¤‡å¥½ VCT çš„ä¿¡æ¯ã€‚</p>
<p>ä½“ç´ ç½‘æ ¼æ›´æ–°åï¼Œå†å¯¹ 3D çº¹ç†åš mipmapï¼ˆ<code>MipMapCompute.wgsl</code>ï¼Œç»‘å®šåœ¨ <code>CalculateMipMap.js</code>ï¼‰ã€‚</p>
<p>ä½ ä¼šæ³¨æ„åˆ°æˆ‘ä¹Ÿåšäº†åœ°é¢åå°„ï¼šmarching cubes ç”Ÿæˆçš„æ˜¯ç½‘æ ¼ï¼Œåšåå°„å¾ˆç›´æ¥â€”â€”ç®—åå°„çŸ©é˜µï¼ŒæŠŠç½‘æ ¼ç»˜åˆ¶ä¸¤éå³å¯ã€‚è‹¥ç”¨ ray marching åšåŒæ ·æ•ˆæœä¼šè´µå¾ˆå¤šã€‚</p>
<p>è¿™æ—¶æˆ‘è¿˜æœ‰ä¸€ç‚¹ GPU é¢„ç®—ï¼Œäºæ˜¯ç»§ç»­é—®æœ‹å‹ï¼šè¿˜æœ‰ä»€ä¹ˆç‰¹æ€§å€¼å¾—åŠ ï¼Ÿæœ‰äººå»ºè®®åšæ¬¡è¡¨é¢æ•£å°„ï¼ˆSubsurface Scatteringï¼ŒSSSï¼‰ï¼Œåƒä¸‹é¢è¿™ç§æ•ˆæœã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0a005defdf94b9ab69c2e9e5833a86f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781372&amp;x-signature=STYIG4D0xU96WJSmhVS1xwEKqHs%3D" alt="image.png" loading="lazy"/></p>
<p>SSS åšå¾—å¥½éå¸¸åŠ åˆ†ï¼Œéš¾ç‚¹åœ¨äºè¦çŸ¥é“å‡ ä½•ä½“çš„åšåº¦ï¼ˆthicknessï¼‰ï¼Œæ‰èƒ½å†³å®šå…‰åœ¨å†…éƒ¨æ•£å°„çš„ç¨‹åº¦ã€‚</p>
<p>å¾ˆå¤š SSS demo ç”¨â€œåšåº¦è´´å›¾â€ï¼Œä½†æµä½“è¡¨é¢æ— æ³•çƒ˜ç„™åšåº¦ï¼Œå¿…é¡»å®æ—¶è®¡ç®—ã€‚</p>
<p>å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨ç”Ÿæˆä¸‰è§’å½¢ä¹‹å‰å·²ç»æœ‰åŠ¿åœºï¼Œå®ƒå¯ä»¥å½“è·ç¦»åœºç”¨æ¥å®æ—¶ä¼°ç®—è¡¨é¢åšåº¦ã€‚æ¦‚å¿µä¸Šç±»ä¼¼ IÃ±igo Quilez åš AO çš„æ–¹å¼ï¼šåœ¨è·ç¦»åœºé‡Œ ray marchingï¼Œçœ‹è¡¨é¢è·ç¦»å¦‚ä½•å½±å“é®è”½ã€‚</p>
<p>æˆ‘é‡‡ç”¨ç±»ä¼¼æ€è·¯ï¼Œä½†æŠŠå…‰çº¿æ²¿â€œè¿›å…¥å‡ ä½•å†…éƒ¨â€çš„æ–¹å‘å‘å°„ï¼Œä»è€Œä¼°ç®—å†…éƒ¨å…‰ä¼ æ’­è¢«é®æŒ¡çš„ç¨‹åº¦â€”â€”åšçš„åœ°æ–¹æ•£å°„å¼±ï¼Œè–„çš„åœ°æ–¹æ•£å°„å¼ºã€‚æ•ˆæœå‡ºä¹æ„æ–™åœ°å¥½ã€‚</p>
<p>å‡ ä½•æè´¨åœ¨ <code>RenderMC.wgsl</code>ï¼šé¡¶ç‚¹ç€è‰²å™¨ä½¿ç”¨å­˜å‚¨åœ¨ storage buffer çš„é¡¶ç‚¹ä½ç½®ä¸æ³•çº¿ã€‚å› ä¸º CPU ä¸çŸ¥é“ marching cubes å®é™…ç”Ÿæˆäº†å¤šå°‘ä¸‰è§’å½¢ï¼Œæ‰€ä»¥ç”¨ <code>EncodeBuffer.wgsl</code> ç¼–ç å‡ºçš„é—´æ¥ draw æ¥ç»˜åˆ¶ã€‚</p>
<p>ç»‘å®šé‡Œæˆ‘ç”¨äº†ä¸¤å¥—çŸ©é˜µï¼šä¸€å¥—ç”¨äºæ­£å¸¸è§†è§’ï¼Œå¦ä¸€å¥—ç”¨äºåå°„ç½‘æ ¼ï¼›è¿™äº›åœ¨ <code>Main.js</code> å®Œæˆã€‚</p>
<p>åˆ°è¿™ä¸€æ­¥ï¼Œæ¨¡æ‹Ÿã€è¡¨é¢ç”Ÿæˆã€æè´¨éƒ½æœ‰äº†ï¼Œæ¥ä¸‹æ¥è¯¥è°ˆåˆæˆï¼ˆcompositionï¼‰ã€‚</p>
<h2 data-id="heading-10">åˆæˆï¼ˆCompositionï¼‰</h2>
<p>ä½ å¯èƒ½è§‰å¾—è‡ªå·±æ˜¯å¾ˆå‰å®³çš„å›¾å½¢å¼€å‘è€…ï¼šä¼šç”¨ Three.js / Babylon.js / PlayCanvas åšé…·ç‚«æ•ˆæœâ€¦â€¦ä¹Ÿå¯èƒ½ä½ æ›´å¼ºï¼Œå¾ˆå¤šä¸œè¥¿è‡ªå·±å†™ã€‚</p>
<p>æˆ‘æƒ³è¯´çš„æ˜¯ï¼šæˆ‘ä¸æ˜¯ã€‚</p>
<p>æˆ‘ä¸ºä»€ä¹ˆçŸ¥é“ï¼Ÿ</p>
<p>å› ä¸ºæˆ‘æ›¾åœ¨ Active Theoryï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Factivetheory.net%2F" target="_blank" title="https://activetheory.net/" ref="nofollow noopener noreferrer">activetheory.net/</a>ï¼‰å·¥ä½œï¼Œèº«è¾¹æ˜¯éå¸¸ä¼˜ç§€çš„å›¾å½¢å¼€å‘å’Œ 3D è‰ºæœ¯å®¶ã€‚ä»–ä»¬è®©æˆ‘çœ‹æ¸…è‡ªå·±çš„çŸ­æ¿ï¼Œä¹Ÿå¸®åŠ©æˆ‘æŠŠäº¤ä»˜ç‰©æ¨åˆ°æ›´å¥½çš„çŠ¶æ€ã€‚</p>
<p>å¦‚æœä½ èƒ½äº‰å–å’Œä»–ä»¬å…±äº‹ï¼Œå¯¹ä½ çš„èŒä¸šå‘å±•éå¸¸æœ‰å¸®åŠ©â€”â€”ä½ ä¼šå­¦åˆ°å¾ˆå¤šã€‚</p>
<p>å…¶ä¸­æœ€å…³é”®çš„ä¸€ç‚¹æ˜¯ï¼š<strong>åˆæˆå†³å®šä¸€åˆ‡ã€‚</strong></p>
<p>æˆ‘è¯·æ›¾åœ¨ Active Theory å…±äº‹çš„ Paul-guilhem Repauxï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Farpeegee" target="_blank" title="https://x.com/arpeegee" ref="nofollow noopener noreferrer">x.com/arpeegee</a>ï¼‰å¸®æˆ‘åšåˆæˆå»ºè®®ã€‚ä»–æŒ‡å‡ºäº†å‡ ä¸ªå…³é”®é—®é¢˜ï¼š</p>
<ul>
<li>åœ°é¢åå°„è¿‡äºæ¸…æ™°ï¼Œåº”è¯¥æ›´ç²—ç³™ï¼ˆæ›´æ¨¡ç³Šï¼‰ã€‚</li>
<li>é»‘è‰²èƒŒæ™¯æ— æ³•ä½“ç°å…‰ä»å“ªé‡Œæ¥ï¼›èƒŒæ™¯åº”è¯¥è¥é€ æ›´â€œæœ‰æƒ…ç»ªâ€çš„æ°›å›´ã€‚</li>
<li>ç¼ºå°‘æŠŠå‡ ä½•ä½“ä¸ç¯å¢ƒèåˆçš„å…‰æ•ˆã€‚</li>
<li>å­—æ¯ä¹‹é—´çš„è¿‡æ¸¡ç¼ºä¹åˆç†æ€§ã€‚</li>
<li>éœ€è¦è°ƒè‰²ã€‚</li>
</ul>
<p>ï¼ˆå½“ç„¶è¿˜æœ‰å¾ˆå¤šèƒ½æ”¹çš„åœ°æ–¹ï¼Œä»–åªæ˜¯å¾ˆå‹å¥½åœ°æŒ‘äº†æœ€å…³é”®çš„ã€‚ï¼‰</p>
<h3 data-id="heading-11">åå°„</h3>
<p>ç¬¬ä¸€ç‚¹å¯ä»¥ç”¨åæœŸè§£å†³ï¼šæ ¹æ®å‡ ä½•ä½“åˆ°åœ°é¢çš„è·ç¦»å†³å®šåå°„çš„æ¨¡ç³Šç¨‹åº¦â€”â€”ç¦»åœ°è¶Šè¿œè¶Šæ¨¡ç³Šï¼Œä»è€Œå¾—åˆ°â€œç²—ç³™åº¦â€æ•ˆæœã€‚</p>
<p>ä½†å¦‚æœåªåœ¨â€œæœ‰å‡ ä½•ä½“é«˜åº¦ä¿¡æ¯â€çš„åŒºåŸŸæ¨¡ç³Šï¼Œå‘¨å›´ç©ºç™½åŒºåŸŸä¼šä¸æ¨¡ç³Šï¼Œç»“æœä¼šå¾ˆæ€ªã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å…ˆåšäº†ä¸€ä¸ªé¢„å¤„ç† passï¼šæŠŠåå°„å‡ ä½•ä½“åšä¸€ä¸ªåç§»ï¼Œå¹¶æŠŠâ€œæœ€è¿‘çš„é«˜åº¦â€å†™å…¥ä¸€å¼ çº¹ç†ï¼Œç”¨æ¥åœ¨ç©ºç™½åŒºåŸŸä¹Ÿå†³å®šæ¨¡ç³Šå¼ºåº¦ã€‚</p>
<p>æ·±çº¢è‰²æ˜¯æœªåå°„å‡ ä½•ä½“ï¼Œç»¿è‰²æ˜¯åå°„å‡ ä½•ä½“ï¼ˆåŒ…å«åç§»ï¼‰ï¼Œä½ ä¼šçœ‹åˆ°ç»¿è‰²æ›´â€œåšâ€ã€‚é«˜åº¦ç¼–ç åœ¨çº¢è‰²é€šé“é‡Œï¼Œå¯è§†ä¸ºä»åœ°é¢åˆ°ä¸Šæ–¹çš„æ¸å˜ã€‚</p>
<h3 data-id="heading-12">èƒŒæ™¯ä¸å…‰</h3>
<p>SSS çš„å®ç°å‡è®¾å…‰æºå§‹ç»ˆä»å‡ ä½•ä½“èƒŒåæ‰“è¿‡æ¥â€”â€”å³ä¾¿é•œå¤´ç§»åŠ¨ï¼Œè¿™ä¸ªæ–¹å‘ä¹Ÿå¾—æˆç«‹ï¼Œå¦åˆ™ SSS ä¸æ˜æ˜¾ã€‚</p>
<p>è¿™å¯¹èƒŒæ™¯è®¾è®¡åè€Œæ˜¯å¥½äº‹ï¼šèƒŒæ™¯å¯ä»¥åšä¸€ä¸ªâ€œèƒŒå…‰æ¸å˜â€ï¼Œè‡ªç„¶åœ°è§£é‡Šå…‰æ¥è‡ªèƒŒåï¼›åŒæ—¶èƒŒæ™¯è‰²ä¹Ÿå¯ä»¥å’Œæè´¨æ›´æ¥è¿‘ï¼Œè®©æ•´ä½“æ›´èåˆã€‚</p>
<h3 data-id="heading-13">å…‰æ•ˆèåˆ</h3>
<p>æœ€åï¼Œä¸ºäº†è®©èƒŒæ™¯ä¸å‡ ä½•ä½“çš„å…‰èåˆå¾—æ›´å¥½ï¼Œæˆ‘åŠ äº† Bloomï¼šåœ¨å‡ ä½•ä½“æ›´è–„çš„åŒºåŸŸï¼ŒBloom æ›´å¼ºï¼Œä»è€Œå¼ºåŒ– SSS çš„è§†è§‰ã€‚</p>
<p>ï¼ˆé¡ºå¸¦ä¸€æï¼šæˆ‘è¿˜å°è¯•è¿‡æŠŠå­—æ¯åŠ¨ç”»å’Œ Codrops çš„ Logo å¯¹é½ï¼Œä½†çœ‹èµ·æ¥åƒå„¿ç«¥è¯†å­—åº”ç”¨ï¼Œäºæ˜¯æ”¾å¼ƒã€‚ï¼‰</p>
<h3 data-id="heading-14">è°ƒè‰²ä¸æ°›å›´</h3>
<p>æœ€åæˆ‘åŠ äº†äº®åº¦ã€å¯¹æ¯”åº¦ã€gamma æ ¡æ­£ï¼Œé€‰æ‹©åæš–çš„é…è‰²è®©æ°›å›´æ›´æŸ”å’Œã€‚åæœŸç”±å¤šä¸ª compute shader å®Œæˆï¼Œåœ¨ <code>Main.js</code> é‡Œè°ƒç”¨ã€‚</p>
<p>å®Œæ•´ä»£ç åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FHectorArellanoDev%2FCodrops" target="_blank" title="https://github.com/HectorArellanoDev/Codrops" ref="nofollow noopener noreferrer">github.com/HectorArellâ€¦</a></p>
<p>ç®€åŒ–ç‰ˆä»“åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FHectorArellanoDev%2FCodropsBasic" target="_blank" title="https://github.com/HectorArellanoDev/CodropsBasic" ref="nofollow noopener noreferrer">github.com/HectorArellâ€¦</a></p>
<p>ä½ å¯ä»¥é€šè¿‡åœ¨ Demo URL æœ«å°¾åŠ  <code>/?word=something</code> æ¥æ›´æ”¹å±•ç¤ºçš„å•è¯ã€‚</p>
<h2 data-id="heading-15">ç»“è¯­</h2>
<p>æœ¬æ–‡æ²¡æœ‰æ·±å…¥æ€§èƒ½ä¼˜åŒ–ï¼Œæˆ‘è§‰å¾—ä¹Ÿæ²¡å¿…è¦ï¼šè¿™ä¸ª Demo æœ¬æ¥å°±é¢å‘å¼º GPUï¼Œä¸æ˜¯ç§»åŠ¨ç«¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3331a9a8c18049729abbc850de008876~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781372&amp;x-signature=uaDK9XJNOZt0f3AALV4Qk8CZojI%3D" alt="image.png" loading="lazy"/></p>
<p>WebGPU çš„ timestamp query è®©å®šä½ç“¶é¢ˆå˜å¾—æ›´å®¹æ˜“ï¼ˆä¾‹å¦‚ <code>Blur3D.js</code> é‡Œå°±æœ‰æ³¨é‡Šæ‰çš„æŸ¥è¯¢ï¼‰ã€‚</p>
<p>è¿™å¹¶ä¸æ„å‘³ç€â€œè¿™å¥—æ–¹æ¡ˆèƒ½ç›´æ¥ä¸Šç”Ÿäº§â€ã€‚Felix åšè¿‡ä¸€ä¸ªç”¨ SPH åšå­—æ¯çš„æ¢ç´¢ï¼Œéå¸¸å¿«ä¹Ÿå¾ˆé…·ï¼Œä½ å¯ä»¥çœ‹çœ‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ffluid.felixmartinez.dev%2F" target="_blank" title="https://fluid.felixmartinez.dev/" ref="nofollow noopener noreferrer">fluid.felixmartinez.dev/</a></p>
<p>æ€»ä¹‹ï¼Œè¿™ä¹ˆå¤šå¹´è¿‡å»ï¼ŒFelix è¿˜æ˜¯èµ¢ç€èµŒå±€ï¼Œè€Œæˆ‘è¿˜åœ¨åŠªåŠ›æ‰­è½¬ç»“æœâ€¦â€¦å¸Œæœ›ä½ ä¹Ÿèƒ½é‡åˆ°ä¸€ä¸ªè®©ä½ è¯´å‡º <em>â€œhold my beerâ€</em> çš„äººã€‚</p>
<h2 data-id="heading-16">å°ç»“</h2>
<p>WebGPU æµä½“é•¿æ–‡çœŸæ­£æœ‰ä»·å€¼çš„ç‚¹åœ¨äºï¼šå®ƒæŠŠâ€œé…·ç‚« Demoâ€æ‹†æˆäº†å¯å¤ç”¨çš„å·¥ç¨‹æ¨¡å—é“¾è·¯â€”â€”ç²’å­æ¨¡æ‹Ÿã€åŠ¿åœºç”Ÿæˆã€marching cubesã€é—´æ¥ dispatch/drawã€å†åˆ°åˆæˆä¸è°ƒè‰²ã€‚è½åœ°æ—¶æœ€å®¹æ˜“å¡ä½çš„å¾€å¾€æ˜¯æ€§èƒ½é¢„ç®—ä¸è°ƒå‚æˆæœ¬ï¼šç®—åŠ›éƒ½èŠ±åœ¨æ¨¡æ‹Ÿä¸å‡ ä½•ç”Ÿæˆä¸Šï¼Œç•™ç»™ç”»é¢æ‰“ç£¨çš„ç©ºé—´å¾ˆå°ï¼Œæ‰€ä»¥å·¥ç¨‹ä¸Šéœ€è¦æŠŠå¯æ§çš„é˜¶æ®µæ‹†å¼€éªŒè¯ã€é€æ­¥è¿­ä»£ã€‚å®è·µä¸­å¯ä»¥ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rollcode.cn%2F%3Fsource%3Dba%26id%3Dfrontendweekly" target="_blank" title="https://www.rollcode.cn/?source=ba&amp;id=frontendweekly" ref="nofollow noopener noreferrer">RollCode ä½ä»£ç å¹³å°</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rollcode.cn%2F%3Fsource%3Dba%26id%3Dfrontendweekly" target="_blank" title="https://www.rollcode.cn/?source=ba&amp;id=frontendweekly" ref="nofollow noopener noreferrer">ç§æœ‰åŒ–éƒ¨ç½²</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rollcode.cn%2F%3Fsource%3Dba%26id%3Dfrontendweekly" target="_blank" title="https://www.rollcode.cn/?source=ba&amp;id=frontendweekly" ref="nofollow noopener noreferrer">è‡ªå®šä¹‰ç»„ä»¶</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rollcode.cn%2F%3Fsource%3Dba%26id%3Dfrontendweekly" target="_blank" title="https://www.rollcode.cn/?source=ba&amp;id=frontendweekly" ref="nofollow noopener noreferrer">é™æ€é¡µé¢å‘å¸ƒï¼ˆSSG + SEOï¼‰</a> æ¥æŠŠ Demo å±•ç¤ºã€å‚æ•°é¢æ¿ã€ç´ æä¸å‘å¸ƒæµç¨‹åšæˆå¯å¤ç°çš„äº¤ä»˜é—­ç¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Monkey-AIï¼šåŸºäºç«¯ä¾§ AI çš„ Android è‡ªåŠ¨åŒ–æµ‹è¯• Agent]]></title>    <link>https://juejin.cn/post/7602559134575099940</link>    <guid>https://juejin.cn/post/7602559134575099940</guid>    <pubDate>2026-02-04T03:48:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602559134575099940" data-draft-id="7602512064977027135" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Monkey-AIï¼šåŸºäºç«¯ä¾§ AI çš„ Android è‡ªåŠ¨åŒ–æµ‹è¯• Agent"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,æœºå™¨å­¦ä¹ ,Android"/> <meta itemprop="datePublished" content="2026-02-04T03:48:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ±æ¶›çš„è‡ªä¹ å®¤"/> <meta itemprop="url" content="https://juejin.cn/user/2119514149637032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Monkey-AIï¼šåŸºäºç«¯ä¾§ AI çš„ Android è‡ªåŠ¨åŒ–æµ‹è¯• Agent
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2119514149637032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ±æ¶›çš„è‡ªä¹ å®¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T03:48:53.000Z" title="Wed Feb 04 2026 03:48:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨è¿™ä¸ª AI æŠ€æœ¯<strong>ç‹‚é£™</strong>çš„æ—¶ä»£ï¼Œä» ChatGPT åˆ° Geminiã€Qwenã€Deepseekï¼Œæ¯éš”å‡ å¤©å°±ä¼šæœ‰ä¸€ä¸ªå¤§æ–°é—»ã€‚äººå·¥æ™ºèƒ½æ­£åœ¨é‡å¡‘æ¯ä¸€ä¸ªè¡Œä¸šã€‚</p>
<p>å¯¹äº Android å¼€å‘è€…è€Œè¨€ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä¸€ç›´æ˜¯ä¸ªå¾ˆé¸¡è‚‹çš„ä»»åŠ¡ï¼šå†™å§ï¼Œå«Œéº»çƒ¦ï¼Œè€Œä¸”ç»å¸¸è¦è·Ÿéšè¿­ä»£ç»´æŠ¤ã€‚ä¸å†™å§ï¼Ÿå¥½åƒåˆæ˜¾å¾—ä¸ä¸“ä¸šï¼Ÿå®¹æ˜“å¿ƒæ…Œï¼Ÿ</p>
<p>ä¹Ÿè®¸ä½ å¬è¯´è¿‡ Espresso æˆ– Appium èƒ½åšè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä½†ä»ç„¶é€ƒä¸äº†å†™æµ‹è¯•è„šæœ¬çš„å‘½è¿ã€‚è¿™æ ·çš„é—®é¢˜æœ‰å¾ˆå¤šè§£æ³•ï¼Œæ¯”å¦‚ï¼Œè®© AI æ¥å†™æµ‹è¯•ã€‚</p>
<p>è€Œæˆ‘æƒ³åˆ°äº†å¦ä¸€ä¸ªæ€è·¯ï¼Œé‚£å°±æ˜¯ï¼š<strong>è®© AI å¸®æˆ‘åšæµ‹è¯•</strong>ï¼</p>
<p>æœ‰äº†è¿™ä¸ªæƒ³æ³•ï¼Œæˆ‘å°±å¼€å§‹å†™ä»£ç äº†ã€‚å®é™…æ“ä½œä¸‹æ¥ï¼Œé‡åˆ°äº†ä¸å°‘é—®é¢˜ï¼Œæˆ‘æ…¢æ…¢é€šè¿‡åšå®¢æ¥è®°å½•ã€‚</p>
<p>é¦–å…ˆï¼Œäº‘ç«¯ AI API è‚¯å®šæ˜¯ä¸èƒ½ç”¨çš„ï¼Œå› ä¸ºä¼šç‰¹åˆ«çƒ§é’±ã€‚æœ€å¥½èƒ½è®© AI è·‘åœ¨æˆ‘ä»¬è‡ªå·±çš„ç”µè„‘ä¸Šï¼Œè¿™æ ·ä¸€æ¥è‡ªåŠ¨åŒ–æµ‹è¯•çš„æˆæœ¬å°±å¯ä»¥<code>å¿½ç•¥ä¸è®¡</code>äº†ã€‚å¹¸è¿çš„æ˜¯ï¼Œéšç€ Gemmaã€Qwen ç­‰å¼€æºæ¨¡å‹çš„æŒç»­ä¼˜åŒ–ï¼Œ<code>ç«¯ä¾§æ¨¡å‹çš„æ™ºèƒ½ç¨‹åº¦å·²ç»è¶³ä»¥èƒœä»»è¿™äº›ç®€å•çš„é€»è¾‘ä»»åŠ¡ã€‚</code></p>
<p>è§£å†³äº†ç«¯ä¾§ AI è¿è¡Œçš„é—®é¢˜åï¼Œå‰©ä¸‹çš„ OCRã€OpenCV ç›¸å…³çš„æŠ€æœ¯å°±ä¸æ˜¯é—®é¢˜äº†ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œè¯·å¤§å®¶çœ‹çœ‹æˆ‘é—²æš‡æ—¶é—´å†™çš„è¿™ä¸ªé¡¹ç›®ï¼šåŸºäºç«¯ä¾§ AI çš„ Android è‡ªåŠ¨åŒ–æµ‹è¯• Agent é¡¹ç›®â€”â€”<strong>Monkey-AI</strong>ã€‚</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ Monkey-AIï¼Ÿ</h2>
<p>ä½œä¸º Android ç¨‹åºå‘˜ï¼ŒMonkey å¤šå¤šå°‘å°‘éƒ½åº”è¯¥å¬è¯´è¿‡å§ï¼Ÿ<code>Monkey-AI</code> é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ä¸€ä¸ªè¿è¡Œåœ¨æ¡Œé¢ç”µè„‘ï¼ˆ MacOS/Windowsï¼‰çš„ Android è‡ªåŠ¨åŒ–æµ‹è¯• Agentã€‚å®ƒä¸ä¾èµ–æ˜‚è´µçš„äº‘ç«¯ APIï¼Œå®Œå…¨åŸºäºæœ¬åœ°è¿è¡Œçš„å¼€æºå¤§æ¨¡å‹æ¥é©±åŠ¨ã€‚</p>
<p>å®ƒå°±åƒä¸€åª<code>èªæ˜</code>ä¸”<code>ä¸çŸ¥ç–²å€¦</code>çš„â€œçŒ´å­â€ï¼Œä½†è¿™åªçŒ´å­è£…ä¸Šäº†â€œå¤§è„‘â€å’Œâ€œçœ¼ç›â€ï¼š</p>
<ul>
<li><strong>å¤§è„‘</strong>ï¼šç”± Gemma æˆ– Qwen æ¨¡å‹é©±åŠ¨ï¼Œè´Ÿè´£ç†è§£æŒ‡ä»¤å’Œè§„åˆ’åŠ¨ä½œã€‚</li>
<li><strong>çœ¼ç›</strong>ï¼šç»“åˆäº† OCR å’Œå›¾æ ‡æ£€æµ‹æŠ€æœ¯ï¼Œèƒ½å¤Ÿç²¾å‡†è¯†åˆ«å±å¹•ä¸Šçš„æ–‡å­—å’Œå›¾æ ‡ã€‚</li>
<li><strong>æ‰‹è„š</strong>ï¼šé€šè¿‡ ADB æŒ‡ä»¤æ‰§è¡Œç‚¹å‡»ã€æ»‘åŠ¨ã€è¾“å…¥ç­‰æ“ä½œã€‚</li>
</ul>
<h2 data-id="heading-1">æ ¸å¿ƒåŠ¨åŠ›ï¼šGemma ä¸ Qwen å®¶æ—</h2>
<p>æœ¬é¡¹ç›®ç›®å‰æ”¯æŒä¸¤å¤§ä¸»æµå¼€æºæ¨¡å‹å®¶æ—ï¼Œå®ƒä»¬å„æœ‰æ‰€é•¿ï¼š</p>
<h3 data-id="heading-2">1. Gemma (Google)</h3>
<p>Gemma æ˜¯ Google åŸºäº Gemini æŠ€æœ¯æ„å»ºçš„è½»é‡çº§å¼€æ”¾æ¨¡å‹ã€‚</p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šä½“ç§¯å°ï¼ˆå¦‚ 2B/7B ç‰ˆæœ¬ï¼‰ï¼ŒæŒ‡ä»¤éµå¾ªèƒ½åŠ›å¼ºï¼Œé€»è¾‘æ¨ç†å‡ºè‰²ã€‚å°¤å…¶æ˜¯ 270M å‚æ•°è§„æ¨¡çš„ FunctionGemmaï¼Œåœ¨ Function Calling æ–¹é¢çš„è¡¨ç°éå¸¸å‡ºè‰²ï¼Œä½“ç§¯ä»…å‡ ç™¾å…†ã€‚</li>
<li><strong>åœ¨æœ¬é¡¹ç›®ä¸­çš„åº”ç”¨</strong>ï¼šGemma ä¸»è¦ä½œä¸º <strong>Text Brainï¼ˆæ–‡æœ¬å¤§è„‘ï¼‰</strong>ã€‚æˆ‘ä»¬å°†å±å¹•ä¸Šçš„ UI å…ƒç´ è½¬åŒ–ä¸ºç»“æ„åŒ–çš„æ–‡æœ¬æè¿°å–‚ç»™ Gemmaï¼Œå®ƒèƒ½å¿«é€Ÿåˆ†æå‡ºâ€œè¦ç‚¹å‡»å“ªä¸ªæŒ‰é’®â€æˆ–â€œè¦è¾“å…¥ä»€ä¹ˆå†…å®¹â€ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abe8459a1c6745529e686bec604583c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyx5rab55qE6Ieq5Lmg5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781733&amp;x-signature=FZZc1mSeX8xu0mgRSoB1DSoAa%2FY%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">2. Qwen-VL (é˜¿é‡Œ)</h3>
<p>Qwen (é€šä¹‰åƒé—®) å®¶æ—çš„ Vision-Language (VL) ç‰ˆæœ¬ï¼Œæ‹¥æœ‰å¼ºå¤§çš„è§†è§‰ç†è§£èƒ½åŠ›ã€‚</p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šä¸ä»…èƒ½â€œè¯»â€å­—ï¼Œè¿˜èƒ½ç›´æ¥â€œçœ‹â€å›¾ã€‚å®ƒèƒ½ç†è§£å±å¹•æˆªå›¾ä¸­çš„å¤æ‚å¸ƒå±€å’Œå›¾æ ‡å«ä¹‰ã€‚</li>
<li><strong>åœ¨æœ¬é¡¹ç›®ä¸­çš„åº”ç”¨</strong>ï¼šä½œä¸º <strong>Vision Brainï¼ˆè§†è§‰å¤§è„‘ï¼‰</strong>ã€‚ç›´æ¥å°†æ‰‹æœºæˆªå›¾å–‚ç»™æ¨¡å‹ï¼Œè®©å®ƒåƒäººç±»ä¸€æ ·åŸºäºè§†è§‰ä¿¡æ¯é€šè¿‡åæ ‡è¿›è¡Œå†³ç­–ï¼Œé€šè¿‡è§†è§‰ç†è§£èƒ½åŠ›å¼¥è¡¥çº¯æ–‡æœ¬æè¿°çš„ä¸è¶³ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b277be68dc4e4906b5ce18c7d11171a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyx5rab55qE6Ieq5Lmg5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781733&amp;x-signature=cPYxDpomoZVwHBad98QYW725m7s%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-4">æ¶æ„æ­ç§˜ï¼šMonkey-AI æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h2>
<p><code>Monkey-AI</code> çš„å®ç°é€»è¾‘å¹¶ä¸å¤æ‚ï¼Œæ ¸å¿ƒæ˜¯ä¸€ä¸ª<strong>æ„ŸçŸ¥-å†³ç­–-æ‰§è¡Œ</strong>çš„é—­ç¯ç³»ç»Ÿã€‚ä¸‹é¢æ˜¯å®ƒçš„æ¶æ„æµç¨‹å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d28b52b453748d3ad7dc65fc9fecc27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyx5rab55qE6Ieq5Lmg5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781733&amp;x-signature=hbYhTHQB%2Btmqh0gbucAybFwJ95Y%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-5">1. æ„ŸçŸ¥å±‚ (Perception Engine)</h3>
<p>è¿™æ˜¯ Agent çš„â€œçœ¼ç›â€ã€‚å•çº¯çš„å¤§æ¨¡å‹è™½ç„¶å¼ºå¤§ï¼Œä½†ç›´æ¥å¤„ç†é«˜åˆ†è¾¨ç‡æˆªå›¾é€Ÿåº¦è¾ƒæ…¢ä¸”ç²¾åº¦æœ‰é™ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¼ ç»Ÿçš„è®¡ç®—æœºè§†è§‰æŠ€æœ¯ä½œä¸ºè¾…åŠ©ï¼š</p>
<ul>
<li><strong>OCR</strong>ï¼šå¿«é€Ÿæå–å±å¹•ä¸Šçš„æ‰€æœ‰æ–‡å­—ä¿¡æ¯ã€‚</li>
<li><strong>Icon æ£€æµ‹ (YOLO)</strong>ï¼šä¸“é—¨è®­ç»ƒçš„æ¨¡å‹ï¼Œç”¨äºè¯†åˆ«â€œè¿”å›â€ã€â€œè®¾ç½®â€ã€â€œWiFiâ€ç­‰å¸¸è§å›¾æ ‡ã€‚</li>
<li><strong>èåˆ (Fusion)</strong>ï¼šå°†æ–‡å­—å’Œå›¾æ ‡ä½ç½®åˆå¹¶ï¼Œç”Ÿæˆä¸€ä»½åŒ…å«åæ ‡å’Œç±»å‹çš„ <code>ClickableElement</code> åˆ—è¡¨ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aec0f9d025f9406b962cfff413972604~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyx5rab55qE6Ieq5Lmg5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770781733&amp;x-signature=68hkRcK0IPpKvJCEku1L%2F1w4hdg%3D" alt="image.png" loading="lazy"/></p>
<p>å…¶å®ï¼ŒOCR å’Œ YOLO é¢„å¤„ç†è¿™ä¸ªæ­¥éª¤ï¼Œå¯¹äºé¡¶å°–çš„ LLM æ˜¯å¯ä»¥çœç•¥çš„ï¼Œåƒ Gemini 3ã€GPT5ï¼Œå®ƒä»¬éƒ½èƒ½å¤Ÿç›´æ¥é€šè¿‡æˆªå›¾ç»™å‡ºå…·ä½“è¡Œä¸ºçš„åæ ‡ã€‚ä½†æˆ‘ä»¬è¿™ä¸æ˜¯ä¸ºäº†çœé’±ï¼Œæƒ³ç”¨è‡ªå·±çš„ç”µè„‘æ¥è·‘å˜›ï¼Œæ‰€ä»¥ï¼Œè¿™ä¸ªé¢„å¤„ç†æ­¥éª¤å°±æ˜¾å¾—å¾ˆé‡è¦äº†ã€‚</p>
<p>æå‰æ ‡è®°å¥½æ‰€æœ‰çš„æ–‡æœ¬ã€iconï¼Œç»™å®ƒä»¬ç¼–å·ï¼ŒLLM åœ¨å†³ç­–çš„æ—¶å€™èƒ½å¤Ÿè·³è¿‡åæ ‡è®¡ç®—ï¼Œç›´æ¥æ¨ç†ä¸‹ä¸€æ­¥å…·ä½“çš„è¡Œä¸ºã€‚è¿™ä¸ªæ­¥éª¤å¯ä»¥å¤§å¹…æå‡å°æ¨¡å‹çš„è¡Œä¸ºå‡†ç¡®åº¦ã€‚</p>
<h3 data-id="heading-6">2. å†³ç­–å±‚ (Brain)</h3>
<p>è¿™æ˜¯ Agent çš„â€œå¤§è„‘â€ã€‚</p>
<ul>
<li><strong>Text Brain</strong>ï¼šæ¥æ”¶ç”¨æˆ·ç›®æ ‡ï¼ˆGoalï¼‰å’Œæ„ŸçŸ¥å±‚æä¾›çš„ UI å…ƒç´ åˆ—è¡¨ã€‚å®ƒä¸éœ€è¦çœ‹å›¾ï¼Œåªéœ€åˆ†ææ–‡æœ¬ï¼šâ€œç›®æ ‡æ˜¯æ‰“å¼€ WiFiï¼Œç°åœ¨å±å¹•ä¸Šæœ‰â€˜è®¾ç½®â€™å›¾æ ‡ï¼Œæ‰€ä»¥æˆ‘åº”è¯¥ç‚¹å‡»â€˜è®¾ç½®â€™ã€‚â€</li>
<li><strong>Vision Brain</strong>ï¼šåœ¨æ–‡æœ¬ä¿¡æ¯ä¸è¶³æ—¶ï¼Œç›´æ¥è§‚å¯Ÿæˆªå›¾ã€‚ä¾‹å¦‚ï¼Œæœ‰äº›æŒ‰é’®åªæœ‰å¤æ‚çš„å›¾å½¢æ²¡æœ‰æ–‡å­—ï¼Œè§†è§‰æ¨¡å‹èƒ½æ›´å¥½åœ°ç†è§£å…¶å«ä¹‰ã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python">// Brain å±‚æŠ½è±¡
<span class="hljs-meta">@dataclass(<span class="hljs-params">frozen=<span class="hljs-literal">True</span></span>)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ScreenState</span>:
    elements: <span class="hljs-built_in">list</span>[ClickableElement]
    screen_size: <span class="hljs-built_in">tuple</span>[<span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>]
    package: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span>
    image_bgr: <span class="hljs-string">"np.ndarray | None"</span> = <span class="hljs-literal">None</span>


<span class="hljs-keyword">class</span> <span class="hljs-title class_">Brain</span>(<span class="hljs-title class_ inherited__">ABC</span>):
<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">next_action</span>(<span class="hljs-params">self, screen: ScreenState</span>) -&gt; Action:
        <span class="hljs-keyword">raise</span> NotImplementedError

</code></pre>
<p>å¯¹äºç«¯ä¾§çš„ AI æ¨¡å‹ï¼Œæ˜¯å¦å¼€å¯ Thinkï¼Œæ•ˆæœå·®å¼‚ä¼šå¾ˆå¤§ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">ç”¨æˆ·ç°åœ¨éœ€è¦å®Œæˆçš„ä»»åŠ¡æ˜¯ï¼šæ‰“å¼€è®¾ç½®é¡µé¢ï¼Œè¿›å…¥é€šçŸ¥æ ï¼Œå»åº”ç”¨è®¾ç½®é‡Œï¼Œå…³é—­Chromeçš„é€šçŸ¥æƒé™ã€‚é¦–å…ˆçœ‹å†å²åŠ¨ä½œå·²ç»ç‚¹å‡»äº†è®¾ç½®å›¾æ ‡ï¼Œæ‰€ä»¥å½“å‰åœ¨è®¾ç½®ä¸»ç•Œé¢ã€‚

æ¥ä¸‹æ¥è¦è¿›å…¥é€šçŸ¥ç›¸å…³éƒ¨åˆ†ã€‚æ ¹æ®å…ƒç´ åˆ—è¡¨ï¼Œ<span class="hljs-number">27</span>å¯¹åº”çš„æ˜¯â€œé€šçŸ¥â€ï¼Œæ–‡æœ¬æ˜¯â€œé€šçŸ¥â€ï¼Œä½ç½®åœ¨å±å¹•ä¸­ä¸‹éƒ¨ã€‚æ‰€ä»¥éœ€è¦ç‚¹å‡»â€œé€šçŸ¥â€é€‰é¡¹æ¥è¿›å…¥é€šçŸ¥è®¾ç½®é¡µé¢ã€‚

æ£€æŸ¥å¯ç‚¹å‡»å…ƒç´ åˆ—è¡¨ï¼Œç¬¬<span class="hljs-number">27</span>ä¸ªå…ƒç´ æ˜¯text é€šçŸ¥ (<span class="hljs-number">226</span>, <span class="hljs-number">1955</span>, <span class="hljs-number">414</span>, <span class="hljs-number">2029</span>)ï¼Œå¯¹åº”çš„å°±æ˜¯é€šçŸ¥å…¥å£ã€‚å› æ­¤ä¸‹ä¸€æ­¥æ“ä½œåº”è¯¥æ˜¯ç‚¹å‡»è¿™ä¸ªâ€œé€šçŸ¥â€é€‰é¡¹ã€‚
&lt;/think&gt;

</code></pre>
<h3 data-id="heading-7">3. æ‰§è¡Œå±‚ (Action Executor)</h3>
<p>è¿™æ˜¯ Agent çš„â€œæ‰‹â€ã€‚
å¤§è„‘è¾“å‡ºçš„å†³ç­–é€šå¸¸æ˜¯æŠ½è±¡çš„ï¼ˆä¾‹å¦‚ï¼šâ€œç‚¹å‡» ID ä¸º 5 çš„å…ƒç´ â€ï¼‰ã€‚æ‰§è¡Œå±‚è´Ÿè´£å°†è¿™äº›æŒ‡ä»¤ç¿»è¯‘æˆå…·ä½“çš„ Android åæ ‡ï¼Œé€šè¿‡ ADB å‘é€ <code>input tap</code> æˆ– <code>input swipe</code> å‘½ä»¤ï¼Œç”šè‡³å¤„ç†åæ ‡æ˜ å°„ï¼ˆä»æˆªå›¾åæ ‡ç³»åˆ°è®¾å¤‡åæ ‡ç³»ï¼‰ã€‚</p>
<p>è¿™ä¸ªéƒ¨åˆ†åè€Œæ˜¯æœ€ç®€å•çš„ï¼Œä½œä¸º Android ç¨‹åºå‘˜ï¼Œè°è¿˜ä¸ä¼šç‚¹ adb å‘½ä»¤äº†ï¼Ÿ</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AndroidDevice</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, device: u2.Device</span>) -&gt; <span class="hljs-literal">None</span>:
        self._device = device

<span class="hljs-meta">    @classmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">connect</span>(<span class="hljs-params">cls, serial: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span></span>) -&gt; <span class="hljs-string">"AndroidDevice"</span>:
        device = u2.connect(serial) <span class="hljs-keyword">if</span> serial <span class="hljs-keyword">else</span> u2.connect()
        <span class="hljs-keyword">return</span> cls(device)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">info</span>(<span class="hljs-params">self</span>) -&gt; DeviceInfo:
        info = self._device.info
        width = <span class="hljs-built_in">int</span>(info.get(<span class="hljs-string">"displayWidth"</span>) <span class="hljs-keyword">or</span> <span class="hljs-number">0</span>)
        height = <span class="hljs-built_in">int</span>(info.get(<span class="hljs-string">"displayHeight"</span>) <span class="hljs-keyword">or</span> <span class="hljs-number">0</span>)
        serial = info.get(<span class="hljs-string">"serial"</span>)
        <span class="hljs-keyword">return</span> DeviceInfo(width=width, height=height, serial=serial)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">screenshot_bgr</span>(<span class="hljs-params">self</span>) -&gt; np.ndarray:
        image = self._device.screenshot(<span class="hljs-built_in">format</span>=<span class="hljs-string">"opencv"</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(image, np.ndarray):
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"screenshot not returned as ndarray"</span>)
        <span class="hljs-keyword">return</span> image

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">click</span>(<span class="hljs-params">self, x: <span class="hljs-built_in">int</span>, y: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:
        self._device.click(x, y)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">swipe</span>(<span class="hljs-params">self, start: <span class="hljs-built_in">tuple</span>[<span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>], end: <span class="hljs-built_in">tuple</span>[<span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>], duration: <span class="hljs-built_in">float</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span></span>) -&gt; <span class="hljs-literal">None</span>:
        <span class="hljs-keyword">if</span> duration <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
            self._device.swipe(start[<span class="hljs-number">0</span>], start[<span class="hljs-number">1</span>], end[<span class="hljs-number">0</span>], end[<span class="hljs-number">1</span>])
        <span class="hljs-keyword">else</span>:
            self._device.swipe(start[<span class="hljs-number">0</span>], start[<span class="hljs-number">1</span>], end[<span class="hljs-number">0</span>], end[<span class="hljs-number">1</span>], duration)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">press</span>(<span class="hljs-params">self, key: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-literal">None</span>:
        self._device.press(key)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">input_text</span>(<span class="hljs-params">self, text: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-literal">None</span>:
        payload = text.replace(<span class="hljs-string">" "</span>, <span class="hljs-string">"%s"</span>)
        self._device.adb_shell(<span class="hljs-string">"input"</span>, <span class="hljs-string">"text"</span>, payload)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">app_start</span>(<span class="hljs-params">self, package: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-literal">None</span>:
        self._device.app_start(package, wait=<span class="hljs-literal">True</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">app_current</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]:
        <span class="hljs-keyword">return</span> self._device.app_current()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">window_size</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">tuple</span>[<span class="hljs-built_in">int</span>, <span class="hljs-built_in">int</span>]:
        size = self._device.window_size()
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">int</span>(size[<span class="hljs-number">0</span>]), <span class="hljs-built_in">int</span>(size[<span class="hljs-number">1</span>])
</code></pre>
<h2 data-id="heading-8">æ€»ç»“ä¸å±•æœ›</h2>
<p><code>Monkey-AI</code> ç›®å‰è¿˜æ˜¯ä¸€ä¸ª <strong>Lite</strong> ç‰ˆæœ¬ï¼Œä½†å®ƒå±•ç¤ºäº†<strong>ç«¯ä¾§ AI + è‡ªåŠ¨åŒ–æµ‹è¯•</strong>çš„å·¨å¤§æ½œåŠ›ï¼š</p>
<ol>
<li><strong>éšç§å®‰å…¨</strong>ï¼šæ•°æ®ä¸å‡ºæœ¬åœ°ï¼Œé€‚åˆä¼ä¸šå†…éƒ¨æ•æ„Ÿåº”ç”¨çš„æµ‹è¯•ã€‚</li>
<li><strong>ä½æˆæœ¬</strong>ï¼šæ— éœ€æ”¯ä»˜æ˜‚è´µçš„ Token è´¹ç”¨ï¼Œä¸”æ¶ˆè´¹çº§çš„æ˜¾å¡æˆ–è€… 16G RAM çš„ Mac Mini å³å¯è¿è¡Œã€‚</li>
<li><strong>æ— é™å¯èƒ½</strong>ï¼šéšç€æ¨¡å‹èƒ½åŠ›çš„æå‡ï¼Œæœªæ¥çš„ Agent ä¸ä»…èƒ½è·‘å†’çƒŸæµ‹è¯•ï¼Œç”šè‡³èƒ½è¿›è¡Œæ¢ç´¢æ€§æµ‹è¯•ï¼Œå‘ç°äººç±»éš¾ä»¥å¯Ÿè§‰çš„ Bugã€‚</li>
</ol>
<p>è™½ç„¶ç°é˜¶æ®µè·‘åœ¨PCç”µè„‘ä¸Šçš„ Monkey-AI å¶å°”è¿˜ä¼šâ€œçŠ¯å‚»â€ï¼Œæ“ä½œé€Ÿåº¦ä¹Ÿæ¯”ä¸ä¸Šæ‰‹å†™è„šæœ¬ï¼Œä½†å®ƒä»£è¡¨äº†æœªæ¥çš„æ–¹å‘ã€‚Android å¼€å‘è€…ä»¬ï¼Œæ˜¯æ—¶å€™æ‹¥æŠ± AIï¼Œè®©æˆ‘ä»¬çš„æµ‹è¯•å·¥ä½œå˜å¾—æ›´é…·ã€æ›´æ™ºèƒ½äº†ï¼</p>
<p>ç›®å‰ Monkey-AI è¿˜åœ¨å†…éƒ¨æµ‹è¯•é˜¶æ®µï¼Œæ¬¢è¿æ„Ÿå…´è¶£çš„æœ‹å‹å…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼š<code>æœ±æ¶›çš„è‡ªä¹ å®¤</code>ï¼Œå‚ä¸æµ‹è¯•ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€n8nã€æ¨èå‡ ä¸ªå…è´¹çš„å¤§æ¨¡å‹ç»™å­¦ä¹ n8nçš„å·¥å‹ä»¬ä½¿ç”¨]]></title>    <link>https://juejin.cn/post/7602488966610386982</link>    <guid>https://juejin.cn/post/7602488966610386982</guid>    <pubDate>2026-02-04T00:14:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602488966610386982" data-draft-id="7602512226998550578" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€n8nã€æ¨èå‡ ä¸ªå…è´¹çš„å¤§æ¨¡å‹ç»™å­¦ä¹ n8nçš„å·¥å‹ä»¬ä½¿ç”¨"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIGC,LLM"/> <meta itemprop="datePublished" content="2026-02-04T00:14:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾·è‚²å¤„ä¸»ä»»"/> <meta itemprop="url" content="https://juejin.cn/user/2673620576140030"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€n8nã€æ¨èå‡ ä¸ªå…è´¹çš„å¤§æ¨¡å‹ç»™å­¦ä¹ n8nçš„å·¥å‹ä»¬ä½¿ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2673620576140030/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾·è‚²å¤„ä¸»ä»»
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T00:14:36.000Z" title="Wed Feb 04 2026 00:14:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>ç‚¹èµ + å…³æ³¨ + æ”¶è— = å­¦ä¼šäº†</strong></p>
<blockquote>
<p>æ•´ç†äº†ä¸€ä¸ªn8nå°ä¸“æ ï¼Œæœ‰å…´è¶£çš„å·¥å‹å¯ä»¥å…³æ³¨ä¸€ä¸‹ ğŸ‘‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzAwMjU3ODU5Ng%3D%3D%26action%3Dgetalbum%26album_id%3D4337364695070801925%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzAwMjU3ODU5Ng==&amp;action=getalbum&amp;album_id=4337364695070801925#wechat_redirect" ref="nofollow noopener noreferrer">ã€Šn8nä¿®ç‚¼æ‰‹å†Œã€‹</a></p>
</blockquote>
<p>å¯¹ n8n åˆå­¦è€…æ¥è¯´ï¼Œä¸ç”¨èŠ±é’±å°±èƒ½è°ƒç”¨å¤§æ¨¡å‹APIï¼Œæ˜¯å¿«é€Ÿä¸Šæ‰‹AIè‡ªåŠ¨åŒ–å·¥ä½œæµçš„å…³é”®ã€‚n8nä½œä¸ºå¯è§†åŒ–è‡ªåŠ¨åŒ–å·¥å…·ï¼Œèƒ½é€šè¿‡APIè¿æ¥å„ç±»å¤§æ¨¡å‹ï¼Œå®ç°æ–‡æœ¬ç”Ÿæˆã€æƒ…æ„Ÿåˆ†æã€å›¾æ–‡å¤„ç†ç­‰åŠŸèƒ½ï¼Œè€Œå…è´¹APIèƒ½å¸®æˆ‘ä»¬é›¶æˆæœ¬ç»ƒæ‰‹ã€éªŒè¯åˆ›æ„ï¼Œä¸ç”¨æ‰¿æ‹…ä»˜è´¹å‹åŠ›ã€‚</p>
<p>æœ¬æ–‡æ¨èå‡ ä¸ªé€‚åˆ n8n å°ç™½çš„å…è´¹å¤§æ¨¡å‹ API æœåŠ¡å•†ã€‚</p>
<p>ä½†éœ€è¦çœ‹æ¸…æœ¬æ–‡çš„å‘å¸ƒæ—¶é—´ï¼Œä¹Ÿè®¸åŠå¹´åã€ä¸€å¹´åè¿™äº› API å°±ä¸å†å…è´¹äº†ã€‚</p>
<p>éƒ¨åˆ†æœåŠ¡å•†è¿˜éœ€è¦ä½ æ‡‚é­”æ³•ã€‚</p>
<p><strong>å¦‚æœä½ ç”¨è¿‡å“ªäº›æ¯”è¾ƒå¥½çš„å¤§æ¨¡å‹ï¼Œä¹Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ï½</strong></p>
<p>å¦‚æœä½ è¿˜ä¸æ¸…æ¥š n8n å¦‚ä½•å¯¹æ¥å¤§æ¨¡å‹ï¼Œæˆ‘å‡†å¤‡äº†2ç¯‡æ–‡ç« ã€‚</p>
<ul>
<li>ã€æ–¹æ³•1ã€‘æ¥å…¥æœ¬åœ°æ¨¡å‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FDAPeojmssNQSyATkwGahIg" target="_blank" title="https://mp.weixin.qq.com/s/DAPeojmssNQSyATkwGahIg" ref="nofollow noopener noreferrer">ã€n8nã€æ¥å…¥æœ¬åœ°éƒ¨ç½²çš„ DeepSeek</a></li>
<li>ã€æ–¹æ³•2ã€‘æ¥å…¥æœåŠ¡å•†çš„æ¨¡å‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FsFMaKErfu6cxQAW3XnbLbg" target="_blank" title="https://mp.weixin.qq.com/s/sFMaKErfu6cxQAW3XnbLbg" ref="nofollow noopener noreferrer">ã€n8nã€å¯¹æ¥è±†åŒ…ã€åƒé—®ã€æ–‡å¿ƒã€Kimiç­‰å¤§æ¨¡å‹</a></li>
</ul>
<p>å¦‚æœä½ æ˜¯å¯Œå“¥ï¼Œä¸ªäººç”µè„‘é…ç½®å¾ˆé¡¶çš„è¯ï¼Œå¯ä»¥ç”¨ç¬¬1ç§æ–¹æ³•ã€‚</p>
<p>æœ¬æ–‡æ•´ç†çš„è¿™äº›å…è´¹å¤§æ¨¡å‹ API è¦ç”¨ç¬¬2ç§æ–¹æ³•å¯¹æ¥ã€‚</p>
<p>å¦‚æœç¬¬2ç§æ–¹æ³•éƒ½æ— æ³•å¯¹æ¥çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ã€ŒHTTP èŠ‚ç‚¹ã€æ¥å¯¹æ¥ï¼Œå…·ä½“æ“ä½œè¯·å‚è€ƒğŸ‘‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F6beIKSCImOj0xgvPyGmECw" target="_blank" title="https://mp.weixin.qq.com/s/6beIKSCImOj0xgvPyGmECw" ref="nofollow noopener noreferrer">ã€n8nã€é€šè¿‡æ¥å…¥DeepSeekäº†è§£HTTPèŠ‚ç‚¹</a></p>
<p>æ¨èçš„æœåŠ¡å•†æ’åéƒ¨åˆ†å…ˆåï¼Œèƒ½ç”¨å°±è¡ŒğŸ˜„</p>
<p>å‰æ‘‡ç»“æŸï¼Œå¼€å§‹ï¼</p>
<h2 data-id="heading-0">Hugging Face</h2>
<blockquote>
<p>âš¡ï¸Hugging Faceï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co" target="_blank" title="https://huggingface.co" ref="nofollow noopener noreferrer">huggingface.co</a></p>
</blockquote>
<p>Hugging Face æ˜¯å…¨çƒçŸ¥åçš„å¼€æºAIå¹³å°ï¼Œæ‹¥æœ‰æµ·é‡å…è´¹é¢„è®­ç»ƒæ¨¡å‹ï¼Œæ¶µç›–æ–‡æœ¬åˆ†ç±»ã€å¥å­åµŒå…¥ã€è¯­éŸ³è¯†åˆ«ç­‰å„ç±»ä»»åŠ¡ï¼Œé€‚åˆå°ç™½æ¢ç´¢ä¸åŒæ¨¡å‹çš„èƒ½åŠ›ï¼Œä¹Ÿèƒ½é€šè¿‡APIå¿«é€Ÿé›†æˆåˆ°n8nä¸­ã€‚</p>
<p>æ‰“å¼€ Hugging Face å®˜ç½‘ï¼Œç™»å½•åï¼Œç‚¹å‡»å³ä¸Šè§’çš„å¤´åƒï¼Œé€‰æ‹©ã€ŒAccess Tokensã€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06d9b448c7134fdcab69b9f8619c5ad8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=dnGKrFVLsjz6QdHftGolPPA3HHk%3D" alt="01.png" loading="lazy"/></p>
<p>æ¥åˆ°ã€ŒAccess Tokensã€é¡µé¢ï¼Œç‚¹å‡»â€œ+ Create new tokenâ€æŒ‰é’®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da85ba0cdeab4337a0abe933524da750~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=AeOxLLRyn9rB3S1BcpFqIbbePC0%3D" alt="02.png" loading="lazy"/></p>
<p>è¾“å…¥ä¸€ä¸ª Token nameï¼Œä¸‹é¢èƒ½é€‰çš„éƒ½é€‰ä¸Šå§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb79cf58cf0e4e54b43ba5027149d725~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=CK8wXMtSu0fiuUrMNwfy1p7QLRU%3D" alt="03.png" loading="lazy"/></p>
<p>ç„¶åæ»‘åˆ°é¡µé¢åº•éƒ¨ï¼Œç‚¹å‡»â€œCreate tokenâ€æŒ‰é’®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc6a05acb0cf4f7595d6fb9422aa099d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=9gVChQlcwjGp4qlXNIwq1kQoYgs%3D" alt="04.png" loading="lazy"/></p>
<p>è·å–åˆ°ä»¤ç‰Œåæ‰¾ä¸ªåœ°æ–¹ä¿å­˜å¥½ï¼Œè¿™ä¸ªä»¤ç‰Œåªå±•ç¤ºä¸€æ¬¡ã€‚å¦‚æœå¼„ä¸¢äº†å°±è¦æŒ‰ä¸Šé¢çš„æ­¥éª¤é‡æ–°æ“ä½œä¸€æ¬¡äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51990a4289ee4ff0a80bd6004451adfc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=FVcX3Pa0bw5wIh%2F51OkWYkyg4jc%3D" alt="05.png" loading="lazy"/></p>
<p>æ‰“å¼€ n8nï¼Œåœ¨ç•Œé¢é¢æ¿æœç´¢â€œhuggingâ€ï¼Œé€‰æ‹©ç¬¬ä¸€é¡¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb9558148d0344aabed6354489279fba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=%2Bbr4OjhNE4tbOo173jOJRXMOMi4%3D" alt="06.png" loading="lazy"/></p>
<p>å¦‚æœä½ ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„è¯ï¼Œåœ¨â€œCredential to connect withâ€é¡¹é‡Œé€‰æ‹©â€œ+ Create new credentialâ€åˆ›å»ºä¸€ä¸ª Hugging Face çš„å‡­è¯ã€‚å¦‚æœå·²ç»æœ‰å‡­è¯äº†å°±æ˜¯ä¸‹å›¾è¿™æ ·äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3993a48e7cf24a6398bb52d5fb7c18d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=XpKxCIwcmphCirV9Gc0o%2BSQdCKs%3D" alt="07.png" loading="lazy"/></p>
<p>åˆ›å»ºå‡­è¯çš„æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œå°†åˆšåˆšåœ¨ Hugging Face ç”³è¯·çš„ä»¤ç‰Œå¤åˆ¶åˆ° API Key è¿™é¡¹é‡Œå°±è¡Œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad8b9130fa314986a492ed06ffb760ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=vshspGbt1sNREepvCVoypd1bpwU%3D" alt="08.png" loading="lazy"/></p>
<p>å›åˆ°å·¥ä½œæµå°±å¯ä»¥ç”¨å®ƒäº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/848c45c021c9467587a09758c7ef5c77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=cde0t4IoFEEks47ShMPdFh4sYNk%3D" alt="09.png" loading="lazy"/></p>
<p>Hugging Face ä¸Šè¿˜æœ‰å…¶ä»–æ¨¡å‹å¯ä»¥ç”³è¯·ï¼Œè‡ªå·±å»ç ”ç©¶ä¸€ä¸‹å§ï½</p>
<h2 data-id="heading-1">Gemini</h2>
<blockquote>
<p>âš¡ï¸Google AI Studioï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Faistudio.google.com" target="_blank" title="https://aistudio.google.com" ref="nofollow noopener noreferrer">aistudio.google.com</a></p>
</blockquote>
<p>Gemini çš„å¼€é€šæ–¹å¼æœ‰ç‚¹éº»çƒ¦ï¼Œéœ€è¦æœ‰ Visa å¡æ‰è¡Œã€‚</p>
<p>ç°åœ¨èƒ½ç”¨çš„å…è´¹æ¨¡å‹åªæœ‰ flash ç³»åˆ—çš„ï¼Œpro ä¹‹å‰è¢«ç™½å«–å¤ªå¤šäº†å·²ç»ä¸å¼€æ”¾äº†ï¼Œä»¥åä¼šä¸ä¼šé‡æ–°å¼€æ”¾ä¸å¥½è¯´ã€‚</p>
<p>æ‰“å¼€ Google AI Studioï¼Œç™»å½•å®Œï¼Œç‚¹å‡»å·¦ä¸‹è§’çš„â€œGet API keyâ€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f913a4e406ad48c083b5b2c96cc0d977~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=4MG9KjK4qVwLKy95cQDSmreS2os%3D" alt="10.png" loading="lazy"/></p>
<p>ç„¶ååˆ›å»ºä¸€ä¸ª API å¯†é’¥ã€‚</p>
<p>å¦‚æœæ²¡é¡¹ç›®çš„è¯ï¼Œéœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªé¡¹ç›®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c18751363dde4708889b72e42d58bb23~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=leWjm7LRiE0k%2BtE90jHu9yGLwtQ%3D" alt="11.png" loading="lazy"/></p>
<p>åˆ›å»ºå®Œ API å¯†é’¥åï¼Œç‚¹å‡»å¤åˆ¶æŒ‰é’®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b013c373bb64f8991449d5d20b8b947~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=gZdQB4N1poFd3%2FCja8oX24MF2Gw%3D" alt="12.png" loading="lazy"/></p>
<p>æ¥åˆ° n8n è¿™è¾¹åˆ›å»º Google Gemini å‡­è¯å°±èƒ½ç”¨äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c827e7f5a99c478887c477567a0739f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=0uuo6t8TceiVSnOv0Wu2tUCbuFE%3D" alt="13.png" loading="lazy"/></p>
<h2 data-id="heading-2">LongCatï¼ˆç¾å›¢ï¼‰</h2>
<blockquote>
<p>âš¡ï¸LongCatï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flongcat.chat%2Fplatform%2Fapi_keys" target="_blank" title="https://longcat.chat/platform/api_keys" ref="nofollow noopener noreferrer">longcat.chat/platform/apâ€¦</a></p>
</blockquote>
<p>LongCat æ˜¯ç¾å›¢è‡ªä¸»ç ”å‘çš„å¤§è¯­è¨€æ¨¡å‹ï¼Œæ¯å¤©åˆ·æ–°500ä¸‡ token ç»™ä½ ç”¨ã€‚è€Œä¸”å“åº”é€Ÿåº¦å¾ˆå¿«ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/027533063cc843968f3e723222e6ed2d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=tooc2H%2F5gsVFGoT4%2FPBHf1e%2BkJ4%3D" alt="14.png" loading="lazy"/></p>
<p>ç™»å½•åï¼Œåœ¨ API Keys é¡µé¢åˆ›å»º API Key å°±å¯ä»¥ç”¨äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd2379ea762746c288f75b16d62c8274~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=aqbPasisNogrI7Im6RNHTOwelTU%3D" alt="15.png" loading="lazy"/></p>
<p>å…·ä½“æ¥å…¥çš„ URL å¯ä»¥çœ‹ LongCat å®˜æ–¹æ–‡æ¡£ğŸ‘‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Flongcat.chat%2Fplatform%2Fdocs%2Fzh%2F" target="_blank" title="https://longcat.chat/platform/docs/zh/" ref="nofollow noopener noreferrer">longcat.chat/platform/doâ€¦</a></p>
<p>æˆ‘ç”¨äº† HTTP èŠ‚ç‚¹æ¥å…¥ï¼ŒèŠå¤©å¯¹è¯çš„è¯ <code>URL</code> å¯å¡«å…¥ <code>https://api.longcat.chat/openai/v1/chat/completions</code>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb31725d7f6c44c9ad99861e4179840c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=%2BTB68rVf4xl6V4HbH4XXGAwx0kg%3D" alt="16.png" loading="lazy"/></p>
<p>äº²æµ‹èƒ½ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/caef3296300345fb8ed246ea8aaf4a8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=aDaoW5Qawfm4JlSPmzLSSJNUfaw%3D" alt="17.png" loading="lazy"/></p>
<h2 data-id="heading-3">ç™¾çµï¼ˆé˜¿é‡Œï¼‰</h2>
<blockquote>
<p>âš¡ï¸ ç™¾çµï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fling.tbox.cn%2Fopen" target="_blank" title="https://ling.tbox.cn/open" ref="nofollow noopener noreferrer">ling.tbox.cn/open</a></p>
</blockquote>
<p>ç™¾çµå¤§æ¨¡å‹æ˜¯èš‚èšé›†å›¢æ¨å‡ºçš„Ling-1Tå¤§æ¨¡å‹å¯¹è¯ä½“éªŒå¹³å°ï¼Œå®šä½ä¸ºå…¨èƒ½å‹AIåŠ©æ‰‹ï¼Œå…¼é¡¾åŸºç¡€æ–‡æœ¬å¤„ç†ä¸å¤æ‚æ¨ç†ï¼Œæ”¯æŒå¤šæ¨¡æ€èƒ½åŠ›ï¼Œä¸”é€‚é…OpenAIæ¥å£æ ¼å¼ï¼Œèƒ½å¿«é€Ÿé›†æˆåˆ°n8nä¸­ã€‚</p>
<p>ç™¾çµæ¯å¤©ä¼šåˆ·æ–°50ä¸‡è®¡ç®—å•ä½ï¼ˆtokenï¼Ÿï¼‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/615333667d5149efb665e199c0622930~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=j3FRAKicuDFkM41U0OtyCMSWCOs%3D" alt="18.png" loading="lazy"/></p>
<p>é¦–æ¬¡ç™»å½•éœ€è¦ç»‘å®šè‡´å¯Œå®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d84cf919eb84c71a75b1d46de7c36d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=8TKN9VAajCbLA%2Bqkp5FYidM81IY%3D" alt="19.png" loading="lazy"/></p>
<p>ç»‘å®šæˆåŠŸåï¼Œåœ¨åå°å°±å¯ä»¥åˆ›å»ºä»¤ç‰Œäº†ï¼Œå¹¶ä¸”æ¯å¤©èƒ½åˆ·æ–°å…è´¹é¢åº¦ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76d197ccb7564c6585e232c2787a73c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=Ka4FkFl4lzlrNaU6sBUxDtyeUVY%3D" alt="20.png" loading="lazy"/></p>
<p>åœ¨ n8n è¿™è¾¹ç»™ç™¾çµåˆ›å»ºä¸€ä¸ª OpenAI çš„å‡­è¯ã€‚</p>
<p><code>API Key</code> å¡«ä½ åˆšåˆšåˆ›å»ºçš„ã€‚</p>
<p><code>Base URL</code> å¡«è¿™ä¸ª <code>https://api.tbox.cn/api/llm/v1/</code>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51760f1dd65f4c159db0d44c2b293805~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=%2B%2BTCwAi3yHJDNvqCd8MDAb5lsgk%3D" alt="21.png" loading="lazy"/></p>
<p>æ¥åˆ°å·¥ä½œæµè¿™è¾¹ä½ ä¼šå‘ç°æ²¡æ¨¡å‹å¯ä»¥é€‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dbce9b2504fe407c8c8b57ea68704a18~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=hvJYJHRPBolgZhOMpMLN7zCSI%2FA%3D" alt="22.png" loading="lazy"/></p>
<p>ä½ éœ€è¦æ‰“å¼€ç™¾çµçš„ä½¿ç”¨æ‰‹å†Œï¼Œé€‰æ‹©ä¸€ä¸ªæ¨¡å‹ï¼Œå¡«å…¥å¯¹åº”çš„â€œç‰ˆæœ¬åç§°â€ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Falipaytbox.yuque.com%2Fsxs0ba%2Fling%2Fmodel_overview" target="_blank" title="https://alipaytbox.yuque.com/sxs0ba/ling/model_overview" ref="nofollow noopener noreferrer">alipaytbox.yuque.com/sxs0ba/lingâ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/315f83382ea54807b707c5a2ba19c27c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=uZYd7kJEI7L2tYMRz1cRpiD3590%3D" alt="23.png" loading="lazy"/></p>
<p><code>Model</code> è¿™é¡¹è¦é€‰ <code>By ID</code>ï¼Œå€¼å°±å¡«å…¥æ¨¡å‹çš„â€œç‰ˆæœ¬åç§°â€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc39b6c71de9493892fc67949549ff53~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=bISIus2v0U1e7Zq29Tbq1uRMmQA%3D" alt="24.png" loading="lazy"/></p>
<p>èƒ½å«–ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6975d76e57ac48619b56654f077a10db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b636IKy5aSE5Li75Lu7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770768876&amp;x-signature=rV%2FLs%2BYqznD6gc5nRNkXnF%2BGziQ%3D" alt="25.png" loading="lazy"/></p>
<p>å€ŸåŠ©å·¥å…·å¯å¿«é€Ÿå®ç°è‡ªåŠ¨åŒ–æµç¨‹ï¼Œè½åœ°æ—¶éœ€å…³æ³¨å¤šåœºæ™¯é€‚é…çš„å·¥ç¨‹æ•ˆç‡é—®é¢˜ã€‚å¯è¯•è¯•<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rollcode.cn%2F%3Fsource%3Dba%26id%3Dzhuren" target="_blank" title="https://www.rollcode.cn/?source=ba&amp;id=zhuren" ref="nofollow noopener noreferrer">RollCode ä½ä»£ç å¹³å°</a>çš„ç§æœ‰åŒ–éƒ¨ç½²ã€è‡ªå®šä¹‰ç»„ä»¶ã€é™æ€é¡µé¢å‘å¸ƒï¼ˆSSG + SEOï¼‰èƒ½åŠ›ã€‚</p>
<hr/>
<p>ä»¥ä¸Šå°±æ˜¯æœ¬æ–‡çš„å…¨éƒ¨å†…å®¹å•¦ï¼Œæƒ³äº†è§£æ›´å¤šn8nç©æ³•æ¬¢è¿å…³æ³¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzAwMjU3ODU5Ng%3D%3D%26action%3Dgetalbum%26album_id%3D4337364695070801925%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzAwMjU3ODU5Ng==&amp;action=getalbum&amp;album_id=4337364695070801925#wechat_redirect" ref="nofollow noopener noreferrer">ã€Šn8nä¿®ç‚¼æ‰‹å†Œã€‹</a>ğŸ‘</p>
<p>å¦‚æœä½ æœ‰ NASï¼Œæˆ‘éå¸¸å»ºè®®ä½ åœ¨ NAS ä¸Šéƒ¨ç½²ä¸€å¥— n8nï¼Œææå‰¯ä¸šä¹Ÿå¥½ï¼Œå¸®ä½ å®Œæˆå·¥ä½œä»»åŠ¡ä¹Ÿå¥½ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FppIWKP8StiFn2k2IW0ZpNQ" target="_blank" title="https://mp.weixin.qq.com/s/ppIWKP8StiFn2k2IW0ZpNQ" ref="nofollow noopener noreferrer">ã€Šã€NASã€ä¸æ­¢å¨±ä¹ï¼ŒNASä¹Ÿæ˜¯ç”Ÿäº§åŠ›ï¼Œåœ¨ç»¿è”éƒ¨ç½²AIå·¥ä½œæµå·¥å…·-n8nã€‹</a></p>
<p><strong>ç‚¹èµ + å…³æ³¨ + æ”¶è— = å­¦ä¼šäº†</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Matplotlib ç»˜å›¾æŒ‡å—ï¼šèšç„¦æ•°æ®å¯è§†åŒ–æ ¸å¿ƒç”¨æ³•]]></title>    <link>https://juejin.cn/post/7602455806446551046</link>    <guid>https://juejin.cn/post/7602455806446551046</guid>    <pubDate>2026-02-04T00:26:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602455806446551046" data-draft-id="7602454700504039465" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Matplotlib ç»˜å›¾æŒ‡å—ï¼šèšç„¦æ•°æ®å¯è§†åŒ–æ ¸å¿ƒç”¨æ³•"/> <meta itemprop="keywords" content="Python,æ•°æ®å¯è§†åŒ–"/> <meta itemprop="datePublished" content="2026-02-04T00:26:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Narrastory"/> <meta itemprop="url" content="https://juejin.cn/user/4355593566170010"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Matplotlib ç»˜å›¾æŒ‡å—ï¼šèšç„¦æ•°æ®å¯è§†åŒ–æ ¸å¿ƒç”¨æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4355593566170010/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Narrastory
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T00:26:56.000Z" title="Wed Feb 04 2026 00:26:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">Matplotlib å¸¸ç”¨åŠŸèƒ½</h2>
<p><code>2026 | ming</code></p>
<hr/>
<div align="center">
  <img align="center" src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f641e5475f24798a05368b97faa0b6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=kejQfqXa4uP5Rsw0MAlapHgCeSk%3D" alt="AI Generated Art" width="90%" loading="lazy"/>
</div>
<h3 data-id="heading-1">ä¸€. ç®€ä»‹</h3>
<p>å­¦æœ¯ç»˜å›¾å·¥å…·åƒåƒä¸‡ï¼Œä½†æˆ‘ç”¨çš„æœ€å¤šçš„ä¾ç„¶æ˜¯Pythonçš„Matplotlibç»˜å›¾åº“ã€‚</p>
<p>è¿™å¹¶éå› ä¸ºå®ƒèƒ½åšå‡ºæœ€ç‚«ä¸½çš„å›¾è¡¨ï¼ˆè™½ç„¶è®¤çœŸè°ƒæ•´åå®Œå…¨å¯ä»¥ï¼‰ï¼Œè€Œæ˜¯å› ä¸ºå®ƒ<strong>è¶³å¤Ÿè½»é‡ã€ä¸Šæ‰‹æå¿«ã€ä¸”é«˜åº¦å¯å®šåˆ¶</strong>â€”â€”å¦‚æœä½ å·²ç»ç†Ÿæ‚‰ Pythonï¼Œé‚£ä¹ˆå‡ ä¹å¯ä»¥ç«‹å³å¼€å§‹ç”»å›¾ã€‚å®ƒçš„æ ¸å¿ƒåº“ä½“ç§¯å¾ˆå°ï¼Œå´æä¾›äº†ä»åŸºç¡€åˆ°é«˜çº§å‡ ä¹æ— é™çš„å¯è°ƒç»†èŠ‚ã€‚å°¤å…¶åœ¨å½“å‰ AI è¾…åŠ©ç¼–ç é€æ¸æ™®åŠçš„èƒŒæ™¯ä¸‹ï¼Œé‚£äº›ç°ä»£åŒ–é«˜ç«¯çš„å›¾è¡¨æ ·å¼å®Œå…¨å¯ä»¥äº¤ç»™AIå»å®Œæˆï¼Œè‡ªå·±åªéœ€æŠŠæ¡å›¾è¡¨çš„æ ¸å¿ƒç»“æ„å³å¯ã€‚</p>
<p>æˆ–è®¸ä½ ä¼šé—®ï¼šä¸ºä»€ä¹ˆä¸ç”¨å¦ä¸€ä¸ªPythonç»˜å›¾åº“ <strong>Seaborn</strong>ï¼Ÿå®ƒé»˜è®¤æ ·å¼ç¾è§‚ï¼Œä»£ç ä¹Ÿæ›´ç®€æ´ã€‚ç¡®å®ï¼ŒSeaborn åœ¨å¿«é€Ÿç»˜åˆ¶ç»Ÿè®¡å›¾è¡¨æ—¶éå¸¸å‡ºè‰²ï¼Œå®ƒä¸ Matplotlib åŒå± Python å¯è§†åŒ–ç”Ÿæ€ä¸­çš„é‡è¦æˆå‘˜ï¼Œé€‰ç”¨å“ªä¸€ä¸ªæ›´å¤šå–å†³äºåœºæ™¯å’Œä¸ªäººä¹ æƒ¯ã€‚</p>
<p>æˆ‘ä¹‹æ‰€ä»¥é€‰æ‹©Matplotlibï¼Œæ˜¯å› ä¸ºè€ƒè™‘åˆ°SeabornåŒæ ·æ˜¯åŸºäºMatplotlibå¼€å‘çš„ï¼Œå®ƒæœ¬è´¨æ˜¯Matplotlibçš„é«˜çº§å°è£…ï¼Œè™½ç„¶æä¾›äº†ä¾¿æ·æ€§ï¼Œä½†è‹¥æ˜¯è¦æ·±åº¦å®šåˆ¶åŒ–éå¸¸è§„å›¾è¡¨ï¼Œè¿˜æ˜¯è¦å›åˆ°Matplotlibåº•å±‚æ¥å£ã€‚å› æ­¤ï¼Œæˆ‘è®¤ä¸ºæŒæ¡ Matplotlib ç›¸å½“äºæŒæ¡äº† Python ç§‘å­¦ç»˜å›¾çš„åŸºç¡€â€œè¯­è¨€â€ï¼Œèƒ½å¤Ÿè®©ä½ åœ¨å¯è§†åŒ–è®¾è®¡ä¸Šæ‹¥æœ‰æ›´å¤§çš„è‡ªç”±åº¦ã€‚</p>
<p>æ³¨æ„ï¼šæœ¬ç³»åˆ—æ•™ç¨‹å‡è®¾ä½ å·²ç»å…·å¤‡<strong>åŸºç¡€çš„ Python è¯­æ³•çŸ¥è¯†</strong>ã€‚å¦å¤–ï¼ŒMatplotlib ä¸ NumPy å’Œ pandas çš„ååŒèƒ½åŠ›æä¸ºå‡ºè‰²ï¼Œåœ¨å®é™…çš„æ•°æ®åˆ†æä¸ç§‘ç ”ç»˜å›¾ä¸­ä¹Ÿå¸¸å¸¸æ­é…ä½¿ç”¨â€”â€”å®ƒä»¬å…±åŒæ„æˆ Python æ•°æ®ç§‘å­¦ç”Ÿæ€ä¸­çš„æ ¸å¿ƒã€‚ä¸è¿‡ä¸ºäº†é™ä½å…¥é—¨é—¨æ§›ï¼Œæœ¬ç³»åˆ—çš„ç¤ºä¾‹å‡ä½¿ç”¨åŸç”Ÿ Python æ•°æ®ç»“æ„ã€‚</p>
<p>ç™¾é—»ä¸å¦‚ä¸€è§ï¼Œä¸€å›¾èƒœåƒè¨€ï¼Œä¸‹é¢å°±æ¥ç®€å•çš„çœ‹ä¸€ä¸‹æˆ‘æ›¾ç»ä½¿ç”¨matplotlibåœ¨çŸ­æ—¶é—´å†…ç»˜åˆ¶å‡ºæ¥çš„å›¾è¡¨ï¼š</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c82f1864a7c94ed08f37c946dc26afc9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=5FJeI6rISkWN9FSuoJpLyLaMwJA%3D" alt="t1.jpg" width="100%" loading="lazy"/></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54a4b86144ac4d1dba9e46774dcd2e11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=r7PTTzIJ%2BETVdBknF0WatNhULcg%3D" alt="t2.jpg" width="100%" loading="lazy"/></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4284e009cd7d47b8bbfec6fa3f99ba19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=GeiDGgyERcfoYPNd9MPEWHXrP60%3D" alt="t3.jpg" width="100%" loading="lazy"/></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a7926633a1e415190bd3aeda298ad8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=3i6UG6RIgmDv2N31SjjtzbJ0MeY%3D" alt="t4.jpg" width="100%" loading="lazy"/></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/adaf9a20c6024e84ab432a816400a4f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=aPX9V7ssLPbIWXSWW3IPuvsJOY4%3D" alt="t5.jpg" width="100%" loading="lazy"/></p>
<p>æœ¬æ•™ç¨‹å°†æŒ‰å›¾è¡¨ç±»å‹è¿›è¡Œåˆ†ç±»è®²è§£ã€‚Matplotlib çš„å‚æ•°é…ç½®é¡¹éå¸¸ä¸°å¯Œï¼Œå…‰çœ‹æ–‡å­—å’Œå›¾ç‰‡æ˜¯è¿œè¿œä¸å¤Ÿçš„â€”â€”<strong>ä¸€å®šè¦åŠ¨æ‰‹å®è·µ</strong>ã€‚è¯·åŠ¡å¿…å¤åˆ¶æ–‡ç« ä¸­çš„ç¤ºä¾‹ä»£ç ï¼Œè‡ªå·±è¿è¡Œä¸€éï¼Œå¹¶å°è¯•è°ƒæ•´å…¶ä¸­çš„å‚æ•°ï¼Œè§‚å¯Ÿå›¾å½¢å¦‚ä½•å˜åŒ–ã€‚åªæœ‰äº²æ‰‹æ“ä½œï¼Œæ‰èƒ½çœŸæ­£ç†è§£æ¯ä¸ªé€‰é¡¹çš„ä½œç”¨ï¼Œè®°å¿†ä¹Ÿä¼šæ›´åŠ æ·±åˆ»ã€‚</p>
<p>æ­¤å¤–ï¼Œè™½ç„¶å›¾è¡¨ç±»å‹å¤šæ ·ï¼Œä½† Matplotlib çš„è®¾è®¡æ€æƒ³ä¸æ ¸å¿ƒ API åœ¨å„ç±»å›¾è¡¨ä¸­æ˜¯å…±é€šçš„ã€‚å› æ­¤ï¼Œæ— è®ºä½ æ˜¯å¦éœ€è¦ç»˜åˆ¶æŠ˜çº¿å›¾ï¼Œ<strong>ç¬¬äºŒç« â€œç»˜å›¾åŸºç¡€ / æŠ˜çº¿å›¾ç»˜åˆ¶â€éƒ½æ˜¯å¿…è¯»çš„é‡ç‚¹</strong>ã€‚æˆ‘ä¼šä»¥æœ€ç®€å•çš„æŠ˜çº¿å›¾ä¸ºä¾‹ï¼Œç³»ç»Ÿè®²è§£å›¾å½¢æ„æˆã€åæ ‡è½´ã€çº¿æ¡æ ·å¼ã€æ ‡ç­¾æ ‡é¢˜ç­‰åŸºç¡€ç»„ä»¶ä¸å¸¸ç”¨ APIã€‚æŒæ¡è¿™ä¸€éƒ¨åˆ†åï¼Œå†å­¦ä¹ æŸ±çŠ¶å›¾ã€æ•£ç‚¹å›¾ã€å­å›¾ç»˜åˆ¶ç­‰å…¶ä»–å›¾è¡¨æ—¶ï¼Œä½ ä¼šå‘ç°å®ƒä»¬çš„ä½¿ç”¨é€»è¾‘éå¸¸ç›¸ä¼¼ï¼Œä¸Šæ‰‹ä¹Ÿä¼šè½»æ¾å¾—å¤šã€‚</p>
<h3 data-id="heading-2">äºŒ. ç»˜å›¾åŸºç¡€/æŠ˜çº¿å›¾ç»˜åˆ¶</h3>
<h4 data-id="heading-3">2.1 å®‰è£…ä¸åŸºç¡€è®¾ç½®</h4>
<p>è¦ä½¿ç”¨Matplotlibï¼Œé¦–å…ˆéœ€è¦å®‰è£…å®ƒã€‚å®‰è£…éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨ç»ˆç«¯æˆ–å‘½ä»¤è¡Œä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š<code>pip install matplotlib</code></p>
<p>å®‰è£…å®Œæˆåï¼Œåœ¨Pythonä»£ç ä¸­å¼•å…¥Matplotlibçš„æ ¸å¿ƒç»˜å›¾æ¨¡å—ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt 
</code></pre>
<p>è¿™æ˜¯Matplotlibçš„æ ‡å‡†å¼•å…¥æ–¹å¼ï¼Œ<code>plt</code>æ˜¯çº¦å®šä¿—æˆçš„åˆ«åï¼Œæ–¹ä¾¿åç»­è°ƒç”¨ã€‚</p>
<p>Matplotlibé»˜è®¤ä¸æ”¯æŒå›¾è¡¨ä¸­å‡ºç°ä¸­æ–‡å­—ä½“ï¼Œç›´æ¥ä½¿ç”¨ä¸­æ–‡ä¼šå‡ºç°ä¹±ç ï¼ˆæ˜¾ç¤ºä¸ºæ–¹æ¡†ï¼‰ã€‚è§£å†³æ–¹æ³•å¾ˆç®€å•ï¼Œåœ¨å¯¼å…¥åº“åæ·»åŠ ä»¥ä¸‹é…ç½®ä»£ç ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è®¾ç½®ä¸­æ–‡å­—ä½“</span>
plt.rcParams[<span class="hljs-string">"font.sans-serif"</span>] = [<span class="hljs-string">"SimHei"</span>]  <span class="hljs-comment"># ä½¿ç”¨é»‘ä½“</span>
plt.rcParams[<span class="hljs-string">"axes.unicode_minus"</span>] = <span class="hljs-literal">False</span>   <span class="hljs-comment"># æ­£å¸¸æ˜¾ç¤ºè´Ÿå·</span>
</code></pre>
<blockquote>
<p><strong>å°æç¤º</strong>ï¼šä¸åŒæ“ä½œç³»ç»Ÿå¯ç”¨çš„ä¸­æ–‡å­—ä½“å¯èƒ½ä¸åŒã€‚Windowsç³»ç»Ÿå¸¸ç”¨<code>SimHei</code>ï¼ˆé»‘ä½“ï¼‰ã€<code>Microsoft YaHei</code>ï¼ˆå¾®è½¯é›…é»‘ï¼‰ï¼›macOSç³»ç»Ÿå¸¸ç”¨<code>PingFang SC</code>ï¼ˆè‹¹æ–¹ç®€ä½“ï¼‰ï¼›Linuxç³»ç»Ÿå¸¸ç”¨<code>Noto Sans CJK SC</code>ï¼ˆæ€æºé»‘ä½“ï¼‰ã€‚å¦‚æœ<code>SimHei</code>ä¸å¯ç”¨ï¼Œå¯ä»¥å°è¯•å…¶ä»–å­—ä½“ã€‚</p>
</blockquote>
<h4 data-id="heading-4">2.2 åŸºç¡€æŠ˜çº¿å›¾ç»˜åˆ¶</h4>
<p>è¦ç”»å›¾ï¼Œé¦–å…ˆéœ€è¦ä»€ä¹ˆï¼Ÿå½“ç„¶æ˜¯çº¸äº†ï¼Œæ²¡æœ‰çº¸ï¼Œæ€ä¹ˆç”»å›¾å‘¢ã€‚åœ¨matplotlibä¸­ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œåªä¸è¿‡æ˜¯éœ€è¦ç”»å¸ƒï¼Œæ‰èƒ½ç”»å›¾ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åˆ›å»ºä¸€ä¸ªç”»å¸ƒã€‚</p>
<pre><code class="hljs language-python" lang="python">fig, ax = plt.subplots(figsize=(<span class="hljs-number">6</span>, <span class="hljs-number">4</span>))
</code></pre>
<p>è¿™é‡Œçš„<code>figsize=(6, 4)</code>è¡¨ç¤ºåˆ›å»ºä¸€ä¸ªå®½6è‹±å¯¸ã€é«˜4è‹±å¯¸çš„ç”»å¸ƒï¼Œè¿™ä¸ªå¯ä»¥è‡ªå·±æ ¹æ®éœ€æ±‚è‡ªè¡Œè®¾ç½®</p>
<p>æœ‰äº†ç”»å¸ƒï¼Œå°±è¦åœ¨ç”»å¸ƒä¸Šç”»å›¾äº†ï¼›åœ¨ç”»å›¾è¡¨ä¹‹å‰ï¼Œå…ˆæƒ³ä¸€æƒ³ï¼Œæˆ‘è¦åœ¨è¿™ä¸ªç”»å¸ƒä¸Šç”»å‡ å¼ è¡¨å‘¢ï¼Ÿå…¶å®ä¸è®ºä½ æƒ³ç”»å‡ å¼ è¡¨ï¼Œåªè¦ä½ æ˜¯é€šè¿‡ä¸Šé¢çš„ä»£ç åˆ›å»ºçš„ç”»å¸ƒï¼Œé‚£ä¹ˆè¿™ä¸ªç”»å¸ƒä¸Šå°±åªèƒ½å®¹ä¸‹ä¸€å¼ è¡¨ï¼ˆå…ˆä¸ç”¨ç®¡ä¸ºä»€ä¹ˆï¼‰ã€‚å¹¶ä¸”å˜é‡<code>ax</code>å°±æ˜¯é‚£å¼ è¡¨, <code>fig</code>å˜é‡ä»£è¡¨æ•´ä¸ªç”»å¸ƒï¼Œæš‚æ—¶æ²¡ä»€ä¹ˆç”¨ï¼Œä¸ç”¨ç®¡å®ƒã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬ç›´æ¥å±•ç¤ºä¸€ä¸‹è¿™ä¸ªç”»å¸ƒã€‚ä½¿ç”¨å¦‚ä¸‹ä»£ç å°±å¯ä»¥å±•ç¤ºå½“å‰ç”»å¸ƒï¼š</p>
<pre><code class="hljs language-python" lang="python">plt.show()
</code></pre>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/252cd821aa3b408d805b501f19aa1f8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=INpLveGyr4GhsEYjawh%2F14uiZgE%3D" alt="c1.jpg" width="50%" loading="lazy"/></p>
<p>è¿è¡Œåä¼šæ˜¾ç¤ºä¸€ä¸ªç©ºç™½åæ ‡ç³»ï¼Œå› ä¸ºæˆ‘ä»¬å•¥ä¹Ÿæ²¡ç”»ã€‚è¿™ä¸ªåæ ‡ç³»é»˜è®¤æ˜¯äºŒç»´ç›´è§’åæ ‡ç³»ï¼ŒåŒ…å«xè½´å’Œyè½´ï¼Œä»¥åŠåˆ»åº¦çº¿å’Œè¾¹æ¡†ã€‚</p>
<p>ç°åœ¨è®©æˆ‘ä»¬åœ¨åæ ‡ç³»ä¸Šç»˜åˆ¶ä¸€æ¡æŠ˜çº¿ã€‚æŠ˜çº¿ç”±ä¸€ç³»åˆ—ç‚¹è¿æ¥è€Œæˆï¼Œæ¯ä¸ªç‚¹ç”± <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x, y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span></span> åæ ‡ç¡®å®šï¼š</p>
<pre><code class="hljs language-python" lang="python">x = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
y = [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>]
<span class="hljs-comment"># è°ƒç”¨axè¡¨ä¸Šçš„plotæ–¹æ³•ï¼Œplotå°±æ˜¯ç»˜åˆ¶æŠ˜çº¿</span>
<span class="hljs-comment"># plotå‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯xåæ ‡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯yåæ ‡</span>
ax.plot(x, y)	
</code></pre>
<p><code>ax.plot()</code>å‡½æ•°å°†ä¾æ¬¡è¿æ¥åæ ‡ç‚¹ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><mn>2</mn><mo separator="true">,</mo><mn>4</mn><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><mn>3</mn><mo separator="true">,</mo><mn>9</mn><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><mn>4</mn><mo separator="true">,</mo><mn>7</mn><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><mn>5</mn><mo separator="true">,</mo><mn>11</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(1,1),(2,4),(3,9),(4,7),(5,11)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">1</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mopen">(</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">4</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mopen">(</span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">9</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mopen">(</span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">7</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mopen">(</span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">11</span><span class="mclose">)</span></span></span></span></span>ï¼Œå½¢æˆä¸€æ¡æŠ˜çº¿ã€‚ç»˜åˆ¶å®Œæˆåï¼Œå†æ¬¡ä½¿ç”¨<code>plt.show()</code>æ˜¾ç¤ºå›¾å½¢å¦‚å›¾1æ‰€ç¤ºã€‚</p>
<p>å¦‚æœæˆ‘ä»¬åªä¼ å…¥ä¸¤ä¸ªç‚¹ï¼Œå°±å¯ä»¥ç»˜åˆ¶ä¸€æ¡è¿æ¥è¿™ä¸¤ä¸ªç‚¹çš„ç›´çº¿ï¼ˆè¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å°æŠ€å·§å“¦ï¼Œæ¯”å¦‚ç»˜åˆ¶è¾…åŠ©çº¿ã€è¶‹åŠ¿çº¿ç­‰ï¼‰</p>
<pre><code class="hljs language-python" lang="python">x1 = [<span class="hljs-number">2</span>, <span class="hljs-number">4</span>]
y2 = [<span class="hljs-number">5</span>, <span class="hljs-number">1</span>]
ax.plot(x1, y2)	
</code></pre>
<p>ç»˜åˆ¶çš„æ•ˆæœå¦‚å›¾2æ‰€ç¤ºã€‚å¯ä»¥çœ‹åˆ°ï¼Œä¹‹å‰ç»˜åˆ¶çš„è“è‰²æŠ˜çº¿å¹¶æ²¡æœ‰è¢«â€œæ“¦é™¤â€ï¼Œè¿™æ˜¯å› ä¸ºåœ¨Matplotlibä¸­ï¼Œç»˜å›¾æ“ä½œæ˜¯<strong>è¿½åŠ </strong>çš„ï¼Œè€Œä¸æ˜¯è¦†ç›–ã€‚è¿™ç§è®¾è®¡è®©ä½ å¯ä»¥è½»æ¾åœ°åœ¨åŒä¸€å¼ å›¾ä¸Šå åŠ å¤šç§å…ƒç´ ï¼Œä»è€Œå®ç°æ›´ä¸°å¯Œçš„ä¿¡æ¯è¡¨è¾¾ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°è¯•ç»˜åˆ¶ä¸€ä¸ª<strong>ä¸€å…ƒä¸‰æ¬¡å‡½æ•°</strong>ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><msup><mi>x</mi><mn>3</mn></msup><mo>+</mo><msup><mi>x</mi><mn>2</mn></msup><mo>âˆ’</mo><mi>x</mi><mo>+</mo><mn>2</mn><mo separator="true">,</mo><mtext>Â </mtext><mi>x</mi><mo>âˆˆ</mo><mo stretchy="false">[</mo><mo>âˆ’</mo><mn>3</mn><mo separator="true">,</mo><mn>1.5</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">f(x) = \frac{1}{2}x^{3} + x^{2} - x + 2,\space x\in [-3,1.5]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.9474em;vertical-align:-0.0833em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"/><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"/><span class="mord">2</span><span class="mpunct">,</span><span class="mspace">Â </span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">âˆ’</span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">1.5</span><span class="mclose">]</span></span></span></span></span></div>
<p>ä¸è¿‡åœ¨ç»˜åˆ¶ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå®šä¹‰ä¸¤ä¸ªåœ¨å‡½æ•°å¯è§†åŒ–ä¸­éå¸¸å®ç”¨çš„è¾…åŠ©å‡½æ•°ï¼ˆæœªæ¥ä¼šå¤šæ¬¡ç”¨åˆ°ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">apply_function_to_vector</span>(<span class="hljs-params">values, func</span>):
    <span class="hljs-string">"""å°†ç»™å®šå‡½æ•°åº”ç”¨äºå€¼åˆ—è¡¨çš„æ¯ä¸ªå…ƒç´ """</span>
    <span class="hljs-keyword">return</span> [func(value) <span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> values]

<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_range</span>(<span class="hljs-params">start, end, step</span>):
    <span class="hljs-string">"""ç”Ÿæˆä»startåˆ°endï¼ˆä¸å«endï¼‰ï¼Œæ­¥é•¿ä¸ºstepçš„åºåˆ—"""</span>
    <span class="hljs-keyword">return</span> [start + i * step <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">int</span>((end - start) / step))]
</code></pre>
<p>å¦‚æœä½ ä¸å¤ªç†è§£è¿™ä¸¤ä¸ªå‡½æ•°çš„ä½œç”¨ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-python" lang="python">a_list = generate_range(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0.5</span>)
<span class="hljs-built_in">print</span>(a_list)
<span class="hljs-comment"># è¾“å‡ºï¼š</span>
<span class="hljs-comment"># [1.0, 1.5, 2.0, 2.5]</span>
</code></pre>
<p>æ¥ç€ï¼Œå®šä¹‰ä¸€å…ƒä¸‰æ¬¡å‡½æ•°åŠå…¶å®šä¹‰åŸŸï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">cubic_polynomial</span>(<span class="hljs-params">x</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-number">0.5</span> * x**<span class="hljs-number">3</span> + x**<span class="hljs-number">2</span> - x + <span class="hljs-number">2</span>

x = generate_range(-<span class="hljs-number">3</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">0.05</span>)  <span class="hljs-comment"># åœ¨ [-3, 1.5] ä¸Šæ¯éš” 0.05 å–ä¸€ä¸ªç‚¹</span>
</code></pre>
<p>ç°åœ¨ï¼Œå°†æ¯ä¸ª <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">x</span></span></span></span></span> ä»£å…¥å‡½æ•°ï¼Œå¾—åˆ°å¯¹åº”çš„  <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></span> å€¼ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å°† x åˆ—è¡¨ä¸­çš„æ¯ä¸ªå€¼ä¼ é€’ç»™ cubic_polynomial å‡½æ•°ï¼Œç”Ÿæˆå¯¹åº”çš„ y åˆ—è¡¨</span>
y = apply_function_to_vector(x, cubic_polynomial)
</code></pre>
<p>ç»˜åˆ¶å›¾åƒï¼Œç»“æœå¦‚å›¾3ï¼š</p>
<pre><code class="hljs language-python" lang="python">ax.plot(x, y)
plt.show()
</code></pre>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6326097f206d4708a117ede6511c5f13~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=psiJsZn6HHlA2zACQO4jIhUUIqc%3D" alt="c2.jpg" width="100%" loading="lazy"/></p>
<p>ä½ ä¼šçœ‹åˆ°æ›²çº¿éå¸¸å…‰æ»‘ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨åŒºé—´å†…å–äº†è¶³å¤Ÿå¤šçš„ç‚¹ï¼ˆæ­¥é•¿ 0.05ï¼‰ã€‚ç‚¹çš„å¯†åº¦è¶Šé«˜ï¼ŒæŠ˜çº¿åœ¨è§†è§‰ä¸Šå°±è¶Šæ¥è¿‘è¿ç»­çš„å‡½æ•°æ›²çº¿ã€‚</p>
<h4 data-id="heading-5">2.3 åŸºç¡€æ ·å¼</h4>
<p>å®é™…ä¸Šï¼ŒæŠ˜çº¿å›¾çš„æ ¸å¿ƒç»˜åˆ¶æ–¹æ³•å·²ç»è®²å®Œäº†ï¼Œæ¥ä¸‹æ¥çš„é‡ç‚¹æ˜¯<strong>æ ·å¼è®¾ç½®</strong>â€”â€”å¦‚ä½•è®©å›¾è¡¨æ›´æ¸…æ™°ç¾è§‚ã€‚ä¸‹é¢æ˜¯ä¸€æ®µå®Œæ•´çš„ç¤ºä¾‹ä»£ç ï¼Œæ³¨é‡Šéå¸¸è¯¦ç»†ï¼Œå»ºè®®ä½ äº²è‡ªåœ¨æœ¬åœ°è¿è¡Œï¼Œå¹¶å°è¯•ä¿®æ”¹ä¸åŒå‚æ•°ï¼Œè§‚å¯Ÿæ•ˆæœå˜åŒ–ã€‚</p>
<p><strong>ç¤ºä¾‹ä¸€:</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
plt.rcParams[<span class="hljs-string">"font.sans-serif"</span>] = [<span class="hljs-string">"SimHei"</span>] 
plt.rcParams[<span class="hljs-string">"axes.unicode_minus"</span>] = <span class="hljs-literal">False</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">apply_function_to_vector</span>(<span class="hljs-params">values, func</span>):
    <span class="hljs-keyword">return</span> [func(value) <span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> values]

<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_range</span>(<span class="hljs-params">start, end, step</span>):
    <span class="hljs-keyword">return</span> [start + i * step <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">int</span>((end - start) / step))]

<span class="hljs-keyword">def</span> <span class="hljs-title function_">cubic_polynomial</span>(<span class="hljs-params">x</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-number">0.5</span> * x**<span class="hljs-number">3</span> + x**<span class="hljs-number">2</span> - x + <span class="hljs-number">2</span>

<span class="hljs-comment"># cubic_polynomialçš„å¯¼å‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">d_cubic_polynomial</span>(<span class="hljs-params">x</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-number">1.5</span> * x**<span class="hljs-number">2</span> + <span class="hljs-number">2</span> * x - <span class="hljs-number">1</span>

<span class="hljs-comment"># åˆ›å»ºå›¾å½¢ä¸åæ ‡è½´</span>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">6</span>, <span class="hljs-number">4</span>))

<span class="hljs-comment"># ç”Ÿæˆ x å¹¶è®¡ç®— y ä¸ dy</span>
x = generate_range(-<span class="hljs-number">3</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">0.3</span>)
y = apply_function_to_vector(x, cubic_polynomial)
dy = apply_function_to_vector(x, d_cubic_polynomial)

<span class="hljs-comment"># ç»˜åˆ¶ä¸€å…ƒä¸‰æ¬¡å‡½æ•°f(x)</span>
ax.plot(
    x,
    y,
    linewidth=<span class="hljs-number">2</span>,  				<span class="hljs-comment"># çº¿æ¡çš„å®½åº¦ï¼ˆé»˜è®¤1.5ï¼‰</span>
    linestyle=<span class="hljs-string">"-"</span>,  			<span class="hljs-comment"># çº¿æ¡çš„æ ·å¼ï¼ˆé»˜è®¤å®çº¿ï¼‰å…¶å®ƒå¯é€‰é¡¹:(å®çº¿'-', è™šçº¿'--', ç‚¹çº¿':', ç‚¹åˆ’çº¿'-.')</span>
    color=(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>), 		 	<span class="hljs-comment"># çº¿æ¡çš„é¢œè‰²ï¼ˆé»‘è‰²ï¼‰ï¼ŒRGBä¸‰å…ƒç»„,0~1ä¹‹é—´çš„æµ®ç‚¹æ•°è¡¨ç¤º</span>
    <span class="hljs-comment"># color = "#FF5733"  		# ä¹Ÿå¯ä»¥ä½¿ç”¨åå…­è¿›åˆ¶é¢œè‰²ä»£ç </span>
    alpha=<span class="hljs-number">0.8</span>,  				<span class="hljs-comment"># çº¿æ¡çš„ä¸é€æ˜åº¦ï¼Œå–å€¼èŒƒå›´0~1ï¼ˆé»˜è®¤1.0ï¼‰</span>
    marker=<span class="hljs-string">"o"</span>,  				<span class="hljs-comment"># æ•°æ®ç‚¹çš„æ ‡è®°æ ·å¼,åœ†å½¢ï¼ˆé»˜è®¤æ— æ ‡è®°ï¼‰, å…¶å®ƒå¯é€‰é¡¹åœ¨åæ–‡è¡¨æ ¼å¤„æŸ¥è¯¢</span>
    markersize=<span class="hljs-number">7</span>,  				<span class="hljs-comment"># æ ‡è®°ç‚¹çš„å¤§å°ï¼ˆé»˜è®¤6ï¼‰</span>
    markerfacecolor=<span class="hljs-string">"#1E3FCF"</span>,  <span class="hljs-comment"># æ ‡è®°ç‚¹çš„å¡«å……é¢œè‰²ï¼Œè“è‰²</span>
    markeredgecolor=<span class="hljs-string">"#FF5733"</span>,  <span class="hljs-comment"># æ ‡è®°ç‚¹çš„è¾¹æ¡†é¢œè‰²ï¼Œçº¢è‰²</span>
    markeredgewidth=<span class="hljs-number">1.5</span>,  		<span class="hljs-comment"># æ ‡è®°ç‚¹è¾¹æ¡†çš„å®½åº¦ï¼ˆé»˜è®¤1.0ï¼‰</span>
    markevery=<span class="hljs-number">2</span>,  				<span class="hljs-comment"># æ¯éš”ä¸¤ä¸ªæ•°æ®ç‚¹ç»˜åˆ¶ä¸€ä¸ªæ ‡è®°ç‚¹</span>
    label=<span class="hljs-string">"ä¸‰å…ƒä¸€æ¬¡å‡½æ•° $f(x)$"</span>,  <span class="hljs-comment"># ç»™è¿™æ¡æŠ˜çº¿å–ä¸€ä¸ªåå­—(ç”¨äºå›¾ä¾‹æ˜¾ç¤º),æ”¯æŒ LaTeX æ•°å­¦å…¬å¼</span>
)

<span class="hljs-comment"># ç»˜åˆ¶f(x)çš„å¯¼å‡½æ•°f'(x)</span>
ax.plot(
    x,
    dy,
    color = (<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>),
    alpha = <span class="hljs-number">0.6</span>,
    linestyle = <span class="hljs-string">'--'</span>,
    label = <span class="hljs-string">"å¯¼æ•° $f'(x)$"</span>
)

<span class="hljs-comment"># åæ ‡è½´æ ‡ç­¾ä¸æ ‡é¢˜</span>
ax.set_xlabel(<span class="hljs-string">"è¿™é‡Œå†™xè½´æ ‡ç­¾"</span>)
ax.set_ylabel(<span class="hljs-string">"è¿™é‡Œå†™yè½´æ ‡ç­¾"</span>)
ax.set_title(<span class="hljs-string">"è¿™é‡Œå†™è¿™å¼ è¡¨çš„æ ‡é¢˜"</span>)
ax.legend() <span class="hljs-comment"># æ˜¾ç¤ºå›¾ä¾‹ï¼Œå¦‚æœæ²¡æœ‰è¿™è¡Œä»£ç å°±ä¸ä¼šæ˜¾ç¤ºå›¾ä¾‹</span>
ax.grid(<span class="hljs-literal">True</span>)  <span class="hljs-comment"># æ˜¾ç¤ºèƒŒæ™¯ç½‘æ ¼</span>

<span class="hljs-comment"># è®¾ç½®æ¬¡åˆ»åº¦ï¼ˆä½¿åæ ‡è½´æ›´ç²¾ç»†ï¼‰</span>
<span class="hljs-keyword">from</span> matplotlib.ticker <span class="hljs-keyword">import</span> AutoMinorLocator
<span class="hljs-comment"># xè½´çš„æ¯ä¸¤ä¸ªä¸»åˆ»åº¦ä¹‹é—´æ”¾å››ä¸ªå°åˆ»åº¦(æ¬¡åˆ»åº¦)</span>
ax.xaxis.set_minor_locator(AutoMinorLocator(<span class="hljs-number">4</span>)) 
<span class="hljs-comment"># yè½´çš„æ¯ä¸¤ä¸ªä¸»åˆ»åº¦ä¹‹é—´æ”¾2ä¸ªå°åˆ»åº¦</span>
<span class="hljs-comment"># ax.yaxis.set_minor_locator(AutoMinorLocator(2))</span>

<span class="hljs-comment"># ax.spines["top"].set_visible(False) # éšè—é¡¶éƒ¨è¾¹æ¡†</span>
<span class="hljs-comment"># ax.spines["right"].set_visible(False)   # éšè—å³ä¾§è¾¹æ¡†</span>

plt.show()
</code></pre>
<p>è¿è¡Œä¸Šè¿°ä»£ç åï¼Œä½ ä¼šå¾—åˆ°å¦‚å›¾4æ‰€ç¤ºçš„å›¾è¡¨ï¼š</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/868c153d2e524036a1132f7edf2c715e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=6BWvL6R2ToWHrMdpbcuyV0JveNw%3D" alt="c3.jpg" width="90%" loading="lazy"/></p>
<p>å¦å¤–ï¼Œå›¾ä¾‹ã€åæ ‡è½´æ ‡ç­¾ã€ç½‘æ ¼ç­‰å…ƒç´ éƒ½æ˜¯<strong>é«˜åº¦å¯é…ç½®</strong>çš„ã€‚ä»¥ä¸‹æ˜¯å¸¸ç”¨å‚æ•°çš„è®¾ç½®ç¤ºä¾‹ï¼ˆå¯ä»¥æŒ‰éœ€æ›´æ”¹ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># y è½´æ ‡ç­¾æ ·å¼è®¾ç½®ï¼ˆx è½´ä¸æ ‡é¢˜ç±»ä¼¼ï¼‰</span>
ax.set_ylabel(
    <span class="hljs-string">"y è½´æ ‡ç­¾"</span>,
    fontsize=<span class="hljs-number">15</span>,	  <span class="hljs-comment"># å­—ä½“å¤§å°</span>
    color=<span class="hljs-string">"#991A1A"</span>,  <span class="hljs-comment"># æ–‡å­—é¢œè‰²</span>
    rotation=<span class="hljs-number">0</span>,		  <span class="hljs-comment"># æ–‡å­—æ—‹è½¬è§’åº¦</span>
    alpha=<span class="hljs-number">0.7</span>,		  <span class="hljs-comment"># ä¸é€æ˜åº¦</span>
    fontweight=<span class="hljs-number">500</span>,	  <span class="hljs-comment"># å­—ä½“ç²—ç»†</span>
    labelpad=<span class="hljs-number">15</span>,  	  <span class="hljs-comment"># æ–‡å­—ä¸è½´çº¿ï¼ˆè¾¹æ¡†ï¼‰çš„è·ç¦»</span>
    loc=<span class="hljs-string">"center"</span>,  	  <span class="hljs-comment"># æ–‡å­—æ‰€å¤„ä½ç½®,å¯é€‰å‚æ•°æœ‰ center, left, right, best, top, bottom</span>
)

<span class="hljs-comment"># å›¾ä¾‹æ ·å¼è®¾ç½®</span>
ax.legend(
    loc=<span class="hljs-string">"upper left"</span>,  <span class="hljs-comment"># å›¾ä¾‹ä½ç½®è®¾ç½®ï¼Œå…¶ä»–å¯é€‰å€¼ï¼šupper right lower left center best</span>
    framealpha=<span class="hljs-number">0.5</span>,    <span class="hljs-comment"># è¾¹æ¡†ä¸é€æ˜åº¦</span>
    frameon=<span class="hljs-literal">True</span>,      <span class="hljs-comment"># æ˜¯å¦æ˜¾ç¤ºè¾¹æ¡†</span>
    shadow=<span class="hljs-literal">False</span>, 	   <span class="hljs-comment"># æ˜¯å¦æ˜¾ç¤ºé˜´å½±</span>
    fancybox=<span class="hljs-literal">True</span>,     <span class="hljs-comment"># æ˜¯å¦åœ†è§’è¾¹æ¡†</span>
    fontsize=<span class="hljs-number">10</span>,       <span class="hljs-comment"># å­—ä½“å¤§å°</span>
    title=<span class="hljs-string">"xxxx"</span>,      <span class="hljs-comment"># å›¾ä¾‹æ ‡é¢˜</span>
    title_fontsize=<span class="hljs-string">"large"</span>,	<span class="hljs-comment"># å›¾ä¾‹æ ‡é¢˜å¤§å°</span>
)

<span class="hljs-comment"># ç½‘æ ¼æ˜¾ç¤ºï¼Œå…³äºwhichå’Œaxiså‚æ•°çš„ä½¿ç”¨ç¤ºä¾‹å¯ä»¥æŸ¥çœ‹å›¾4.1</span>
ax.grid(
    <span class="hljs-literal">True</span>,			<span class="hljs-comment"># æ˜¯å¦æ˜¾ç¤ºç½‘æ ¼</span>
    which=<span class="hljs-string">"major"</span>,  <span class="hljs-comment"># ç½‘æ ¼ç±»å‹ï¼ˆåˆ†ä¸»åˆ»åº¦ç½‘æ ¼å’Œæ¬¡åˆ»åº¦ç½‘æ ¼ï¼‰ï¼š'both'ï¼Œ'major'ï¼Œ'minor'</span>
    axis=<span class="hljs-string">"both"</span>,  	<span class="hljs-comment"># åªæ˜¾ç¤ºç‰¹å®šæ–¹å‘çš„èƒŒæ™¯çº¿æ¡ï¼š'both'ï¼Œ'x'ï¼Œ'y'</span>
    linestyle=<span class="hljs-string">"-"</span>,  <span class="hljs-comment"># çº¿å‹</span>
    linewidth=<span class="hljs-number">0.5</span>,  <span class="hljs-comment"># çº¿å®½</span>
    color=<span class="hljs-string">"gray"</span>,  	<span class="hljs-comment"># é¢œè‰²</span>
    alpha=<span class="hljs-number">0.4</span>,  	<span class="hljs-comment"># ä¸é€æ˜åº¦</span>
)
</code></pre>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5abf04b6173422fb50b6239b077de40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=hMnR3ZIwRxCIM6k%2F%2B0TqcNGNAvA%3D" alt="c5.jpg" width="100%" loading="lazy"/></p>
<p><strong>ç¤ºä¾‹äºŒï¼šè‡ªå®šä¹‰ä¸»åˆ»åº¦ä¸åˆ»åº¦æ ‡ç­¾</strong></p>
<p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒMatplotlib ä¼šæ ¹æ®æ•°æ®èŒƒå›´è‡ªåŠ¨è®¾ç½®åˆ»åº¦ä½ç½®ï¼Œä½†å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨æŒ‡å®šåˆ»åº¦ä½ç½®ç”šè‡³è‡ªå®šä¹‰æ ‡ç­¾ã€‚ä¸‹é¢é€šè¿‡å‡ ä¸ªå…¸å‹çš„è®¾ç½®æ¥è¯´æ˜å¦‚ä½•æ“ä½œã€‚</p>
<p>è¿è¡Œä»¥ä¸‹ä»£ç ï¼Œæˆ‘ä»¬å°†æ‰‹åŠ¨è®¾ç½® x è½´å’Œ y è½´çš„åˆ»åº¦ä½ç½®ï¼Œç»“æœå¦‚å›¾5æ‰€ç¤ºã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
fig, ax = plt.subplots(figsize=(<span class="hljs-number">6</span>, <span class="hljs-number">4</span>))
ax.set_xticks([<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4.5</span>,<span class="hljs-number">10</span>])	<span class="hljs-comment"># è®¾ç½® x è½´çš„ä¸»åˆ»åº¦ä½ç½®</span>
ax.set_yticks([-<span class="hljs-number">5</span>,-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3.2</span>,<span class="hljs-number">5</span>])	<span class="hljs-comment"># è®¾ç½® y è½´çš„ä¸»åˆ»åº¦ä½ç½®</span>
plt.show()
</code></pre>
<p>é»˜è®¤åˆ»åº¦ä½äºåæ ‡è½´åº•éƒ¨ï¼ˆx è½´ï¼‰å’Œå·¦ä¾§ï¼ˆy è½´ï¼‰ã€‚å¦‚æœéœ€è¦å°†åˆ»åº¦ç§»åˆ°å¦ä¸€ä¾§ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ã€‚è¿è¡Œç»“æœå¦‚å›¾6æ‰€ç¤ºã€‚</p>
<pre><code class="hljs language-python" lang="python">ax.xaxis.set_ticks_position(<span class="hljs-string">"top"</span>)    <span class="hljs-comment"># å°† x è½´åˆ»åº¦ç½®äºé¡¶éƒ¨</span>
ax.yaxis.set_ticks_position(<span class="hljs-string">"right"</span>)  <span class="hljs-comment"># å°† y è½´åˆ»åº¦ç½®äºå³ä¾§</span>
<span class="hljs-comment"># å…¶ä»–å¯é€‰å‚æ•°ï¼š'bottom', 'top', 'left', 'right', 'both', 'none'</span>
</code></pre>
<p>é™¤äº†è°ƒæ•´åˆ»åº¦ä½ç½®ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å®Œå…¨è‡ªå®šä¹‰æ¯ä¸ªåˆ»åº¦å¯¹åº”çš„æ ‡ç­¾ï¼Œå¹¶è®¾ç½®æ ‡ç­¾çš„æ ·å¼ï¼ˆå¦‚æ—‹è½¬ã€å­—ä½“å¤§å°ç­‰ï¼‰ã€‚è¿è¡Œç»“æœå¦‚å›¾7æ‰€ç¤ºã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
fig, ax = plt.subplots(figsize=(<span class="hljs-number">6</span>, <span class="hljs-number">4</span>))
ax.set_xticks([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4.5</span>, <span class="hljs-number">10</span>])  <span class="hljs-comment"># è®¾ç½® x è½´çš„ä¸»åˆ»åº¦ä½ç½®</span>
<span class="hljs-comment"># è‡ªå®šä¹‰åˆ»åº¦æ ‡ç­¾æ–‡æœ¬ä¸æ ·å¼ï¼Œè¿™è¡Œä»£ç ä¸€å®šè¦è·Ÿåœ¨set_xticksæ–¹æ³•åé¢</span>
ax.set_xticklabels(    
    [<span class="hljs-string">"æˆ‘æ˜¯0"</span>, <span class="hljs-string">"æˆ‘æ˜¯1"</span>, <span class="hljs-string">"æˆ‘æ˜¯3"</span>, <span class="hljs-string">"æˆ‘æ˜¯4.5"</span>, <span class="hljs-string">"æˆ‘æ˜¯10"</span>],
    rotation=-<span class="hljs-number">45</span>,                   <span class="hljs-comment"># æ ‡ç­¾æ—‹è½¬ -45 åº¦</span>
    fontsize=<span class="hljs-number">10</span>,                    <span class="hljs-comment"># æ ‡ç­¾å­—ä½“å¤§å°</span>
)
plt.show()
</code></pre>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df46237706934081bc2bf20ec87a504e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=yvfrHUg945%2FGr%2BQfU2McQCHJ0As%3D" alt="c4.jpg" width="100%" loading="lazy"/></p>
<p><strong>å¸¸ç”¨æ ‡è®°ç‚¹æ ·å¼<code>marker</code>é€ŸæŸ¥è¡¨ï¼š</strong></p>
<p>ç»˜åˆ¶æ•£ç‚¹å›¾æˆ–æŠ˜çº¿å›¾æ—¶ï¼Œ<code>marker</code> å‚æ•°ç”¨äºæŒ‡å®šæ•°æ®ç‚¹çš„å½¢çŠ¶ã€‚ä¸‹è¡¨åˆ—å‡ºæœ€å¸¸ç”¨çš„å‡ ç§æ ·å¼ï¼š</p>





















































































<table><thead><tr><th>å‚æ•°å€¼</th><th>æ ·å¼æè¿°</th><th>å›¾ç¤º</th></tr></thead><tbody><tr><td><code>'.'</code></td><td>ç‚¹</td><td>â— (å°åœ†ç‚¹)</td></tr><tr><td><code>'o'</code></td><td>åœ†åœˆ</td><td>â—‹ (ç©ºå¿ƒåœ†)</td></tr><tr><td><code>'s'</code></td><td>æ­£æ–¹å½¢</td><td>â–¡</td></tr><tr><td><code>'D'</code></td><td>é’»çŸ³å½¢</td><td>â—†</td></tr><tr><td><code>'^'</code></td><td>æ­£ä¸‰è§’å½¢</td><td>â–³</td></tr><tr><td><code>'v'</code></td><td>å€’ä¸‰è§’å½¢</td><td>â–½</td></tr><tr><td><code>'&gt;'</code></td><td>å³ä¸‰è§’å½¢</td><td>â–¶</td></tr><tr><td><code>'&lt;'</code></td><td>å·¦ä¸‰è§’å½¢</td><td>â—€</td></tr><tr><td><code>'p'</code></td><td>äº”è¾¹å½¢</td><td>â¬ </td></tr><tr><td><code>'*'</code></td><td>æ˜Ÿå·</td><td>â˜…</td></tr><tr><td><code>'h'</code></td><td>å…­è¾¹å½¢1</td><td>â¬¡</td></tr><tr><td><code>'H'</code></td><td>å…­è¾¹å½¢2</td><td>â¬¢</td></tr><tr><td><code>'+'</code></td><td>åŠ å·</td><td>ï¼‹</td></tr><tr><td><code>'x'</code></td><td>ä¹˜å·</td><td>Ã—</td></tr><tr><td><code>'d'</code></td><td>å°é’»çŸ³</td><td>â™¦</td></tr></tbody></table>
<h4 data-id="heading-6">2.4 å¸¸ç”¨è¾…åŠ©å…ƒç´ </h4>
<p>è¾…åŠ©å…ƒç´ åŒ…æ‹¬å‚è€ƒçº¿ã€å‚è€ƒåŒºé—´å¸¦ã€æ–‡æœ¬æ ‡æ³¨ç­‰ï¼Œå®ƒä»¬èƒ½å¤Ÿå¸®åŠ©è¯»è€…æ›´æ¸…æ™°åœ°ç†è§£å›¾è¡¨ä¸­çš„å…³é”®ä½ç½®æˆ–èŒƒå›´ã€‚ä¸‹é¢é€šè¿‡ä¸€ä¸ªä¾‹å­æ¼”ç¤ºå¦‚ä½•æ·»åŠ è¿™äº›å…ƒç´ ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
fig, ax = plt.subplots(figsize=(<span class="hljs-number">6</span>, <span class="hljs-number">4</span>))

<span class="hljs-comment"># å†ç»˜åˆ¶ä¸€éä¸Šæ–‡ä¸­çš„ä¸€å…ƒä¸‰æ¬¡å‡½æ•°</span>
<span class="hljs-comment"># =====================================</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">apply_function_to_vector</span>(<span class="hljs-params">values, func</span>):
    <span class="hljs-keyword">return</span> [func(value) <span class="hljs-keyword">for</span> value <span class="hljs-keyword">in</span> values]

<span class="hljs-keyword">def</span> <span class="hljs-title function_">cubic_polynomial</span>(<span class="hljs-params">x</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-number">0.5</span> * x**<span class="hljs-number">3</span> + x**<span class="hljs-number">2</span> - x + <span class="hljs-number">2</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_range</span>(<span class="hljs-params">start, end, step</span>):
    <span class="hljs-keyword">return</span> [start + i * step <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">int</span>((end - start) / step))]

x = generate_range(-<span class="hljs-number">3</span>,<span class="hljs-number">1.5</span>,<span class="hljs-number">0.05</span>)
y = apply_function_to_vector(x, cubic_polynomial)
ax.plot(x, y)
<span class="hljs-comment"># =====================================</span>

<span class="hljs-comment"># æ·»åŠ ä¸€æ¡æ°´å¹³å‚è€ƒçº¿</span>
ax.axhline(
    y=<span class="hljs-number">4.0</span>,               <span class="hljs-comment"># å‚è€ƒçº¿æ‰€åœ¨çš„ y åæ ‡</span>
    color=<span class="hljs-string">"#B92D2D"</span>,     <span class="hljs-comment"># é¢œè‰²ï¼ˆçº¢è‰²ï¼‰</span>
    linestyle=<span class="hljs-string">"--"</span>,      <span class="hljs-comment"># çº¿å‹ï¼šè™šçº¿</span>
    linewidth=<span class="hljs-number">1</span>,         <span class="hljs-comment"># çº¿å®½</span>
    alpha=<span class="hljs-number">0.5</span>,           <span class="hljs-comment"># ä¸é€æ˜åº¦</span>
)

<span class="hljs-comment"># æ·»åŠ ä¸€æ¡å‚ç›´å‚è€ƒçº¿</span>
ax.axvline(
    x=-<span class="hljs-number">2</span>,                <span class="hljs-comment"># å‚è€ƒçº¿æ‰€åœ¨çš„ x åæ ‡</span>
    color=<span class="hljs-string">"#1D9B43"</span>,     <span class="hljs-comment"># é¢œè‰²ï¼ˆç»¿è‰²ï¼‰</span>
    linestyle=<span class="hljs-string">"--"</span>, 
    linewidth=<span class="hljs-number">1</span>,
)

<span class="hljs-comment"># æ·»åŠ ä¸€æ¡å¯¹è§’å‚è€ƒçº¿</span>
ax.axline(
    (<span class="hljs-number">0</span>, <span class="hljs-number">2</span>),        <span class="hljs-comment"># è¿‡(0,2)ç‚¹</span>
    slope=-<span class="hljs-number">0.8</span>,    <span class="hljs-comment"># ä½œä¸€æ¡æ–œç‡ä¸º-0.8çš„å‚è€ƒçº¿</span>
    color=<span class="hljs-string">"gray"</span>, 
    linestyle=<span class="hljs-string">"--"</span>, 
    linewidth=<span class="hljs-number">0.5</span>
)

<span class="hljs-comment"># æ·»åŠ æ°´å¹³å‚è€ƒåŒºé—´å¸¦ï¼ˆå¸¸ç”¨äºè¡¨ç¤ºç½®ä¿¡åŒºé—´æˆ–ç›®æ ‡èŒƒå›´ï¼‰</span>
ax.axhspan(
    ymin=<span class="hljs-number">0.5</span>,            <span class="hljs-comment"># åŒºé—´ä¸‹ç•Œ</span>
    ymax=<span class="hljs-number">1.2</span>,            <span class="hljs-comment"># åŒºé—´ä¸Šç•Œ</span>
    facecolor=<span class="hljs-string">"green"</span>, 	 <span class="hljs-comment"># åŒºé—´é¢œè‰²</span>
    alpha=<span class="hljs-number">0.2</span>            <span class="hljs-comment"># è¾ƒä½çš„é€æ˜åº¦ä½¿èƒŒæ™¯ä¸è¢«è¿‡åº¦çªå‡º</span>
) 

<span class="hljs-comment"># æ·»åŠ å‚ç›´å‚è€ƒåŒºé—´å¸¦</span>
ax.axvspan(xmin=-<span class="hljs-number">1.2</span>, xmax=-<span class="hljs-number">0.3</span>, facecolor=<span class="hljs-string">"red"</span>, alpha=<span class="hljs-number">0.1</span>)

<span class="hljs-comment"># åœ¨å›¾è¡¨ä¸­æ·»åŠ æ–‡æœ¬æ ‡æ³¨</span>
<span class="hljs-comment"># å¦‚ä¸‹é…ç½®é¡¹ä¼—å¤šï¼Œæ¨èç›´æ¥ç»™AIæä¾›ä½ çš„éœ€æ±‚ï¼Œè®©AIå¸®ä½ å†™å¦‚ä¸‹é…ç½®é¡¹</span>
bbox_props = <span class="hljs-built_in">dict</span>(
    boxstyle=<span class="hljs-string">"round"</span>,     <span class="hljs-comment"># åœ†è§’æ–‡æœ¬æ¡†</span>
    facecolor=<span class="hljs-string">"white"</span>,    <span class="hljs-comment"># å¡«å……è‰²</span>
    edgecolor=<span class="hljs-string">"black"</span>,    <span class="hljs-comment"># è¾¹æ¡†é¢œè‰²</span>
    linewidth=<span class="hljs-number">1</span>,          <span class="hljs-comment"># è¾¹æ¡†å®½åº¦</span>
    alpha=<span class="hljs-number">0.8</span>,            <span class="hljs-comment"># æ•´ä½“é€æ˜åº¦</span>
    pad=<span class="hljs-number">0.4</span>,              <span class="hljs-comment"># æ–‡æœ¬ä¸è¾¹æ¡†çš„å†…è¾¹è·</span>
)
ax.text(
    <span class="hljs-number">0.0</span>,                  <span class="hljs-comment"># æ–‡æœ¬æ¡†é”šç‚¹çš„ x åæ ‡ï¼ˆæ•°æ®åæ ‡ç³»ï¼‰</span>
    <span class="hljs-number">3.6</span>,                  <span class="hljs-comment"># æ–‡æœ¬æ¡†é”šç‚¹çš„ y åæ ‡</span>
    <span class="hljs-string">"Your Text"</span>,          <span class="hljs-comment"># æ–‡æœ¬å†…å®¹</span>
    fontsize=<span class="hljs-number">10</span>, 		  <span class="hljs-comment"># æ–‡å­—å¤§å°</span>
    fontfamily=<span class="hljs-string">"serif"</span>,   <span class="hljs-comment"># è¡¬çº¿å­—ä½“</span>
    fontstyle=<span class="hljs-string">"italic"</span>,   <span class="hljs-comment"># æ–œä½“</span>
    fontweight=<span class="hljs-string">"bold"</span>,    <span class="hljs-comment"># ç²—ä½“</span>
    color=<span class="hljs-string">"black"</span>,        <span class="hljs-comment"># å­—ä½“é¢œè‰²</span>
    ha=<span class="hljs-string">"left"</span>,            <span class="hljs-comment"># æ°´å¹³å¯¹é½æ–¹å¼ï¼šå·¦å¯¹é½</span>
    va=<span class="hljs-string">"bottom"</span>,          <span class="hljs-comment"># å‚ç›´å¯¹é½æ–¹å¼ï¼šåº•éƒ¨å¯¹é½</span>
    rotation=<span class="hljs-number">0</span>,           <span class="hljs-comment"># æ–‡æœ¬æ—‹è½¬è§’åº¦ï¼ˆåº¦ï¼‰</span>
    bbox=bbox_props,      <span class="hljs-comment"># åº”ç”¨ä¸Šè¿°æ–‡æœ¬æ¡†æ ·å¼</span>
)

plt.show()
</code></pre>
<p>è¿è¡Œç»“æœå¦‚å›¾8æ‰€ç¤ºã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60f047add4484a249a372a8a8de3563b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=VPxb6vbdsLuqOjuNI3ILJH%2B4V24%3D" alt="c6.jpg" width="70%" loading="lazy"/></p>
<h4 data-id="heading-7">2.5 ä¿å­˜ä¸ºå›¾ç‰‡</h4>
<p>ç»˜åˆ¶å®Œæˆåï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦å°†å›¾è¡¨ä¿å­˜ä¸ºå›¾ç‰‡æ–‡ä»¶ä»¥ä¾¿åœ¨æŠ¥å‘Šã€æ–‡ç« æˆ–æ¼”ç¤ºä¸­ä½¿ç”¨ã€‚é™¤äº†æ‰‹åŠ¨æˆªå›¾ï¼Œæ›´è§„èŒƒçš„åšæ³•æ˜¯åœ¨ç¨‹åºçš„ç»“å°¾ä½¿ç”¨ <code>plt.savefig()</code> å‡½æ•°ã€‚è¯¥å‡½æ•°æ”¯æŒå¤šç§æ ¼å¼ï¼ˆPNGã€PDFã€SVG ç­‰ï¼‰å’Œä¸°å¯Œçš„è¾“å‡ºè®¾ç½®ã€‚</p>
<pre><code class="hljs language-python" lang="python">plt.savefig(
    <span class="hljs-string">"output.png"</span>,               <span class="hljs-comment"># æ–‡ä»¶è·¯å¾„ï¼Œæ”¯æŒå¤šç§å›¾ç‰‡åç¼€ï¼ˆå¯ä½¿ç”¨ç›¸å¯¹æˆ–ç»å¯¹è·¯å¾„ï¼‰</span>
    dpi=<span class="hljs-number">300</span>,                    <span class="hljs-comment"># åˆ†è¾¨ç‡ï¼Œæ•°å€¼è¶Šé«˜å›¾ç‰‡è¶Šæ¸…æ™°</span>
    bbox_inches=<span class="hljs-string">"tight"</span>,        <span class="hljs-comment"># è‡ªåŠ¨è£å‰ªå›¾è¡¨å‘¨å›´å¤šä½™çš„ç©ºç™½åŒºåŸŸ</span>
    facecolor=<span class="hljs-string">"white"</span>,          <span class="hljs-comment"># ç”»å¸ƒèƒŒæ™¯é¢œè‰²</span>
    edgecolor=<span class="hljs-string">"none"</span>,           <span class="hljs-comment"># ç”»å¸ƒè¾¹ç¼˜é¢œè‰²</span>
    transparent=<span class="hljs-literal">False</span>,          <span class="hljs-comment"># è‹¥ä¸º Trueï¼Œåˆ™èƒŒæ™¯é€æ˜ï¼ˆé€‚åˆå åŠ åœ¨å…¶ä»–å›¾ä¸Šï¼‰</span>
    orientation=<span class="hljs-string">"portrait"</span>,     <span class="hljs-comment"># çº¸å¼ æ–¹å‘ï¼š'portrait'ï¼ˆçºµå‘ï¼‰æˆ– 'landscape'ï¼ˆæ¨ªå‘ï¼‰</span>
    metadata={                  <span class="hljs-comment"># å¯é€‰çš„å…ƒæ•°æ®ï¼Œä¼šåµŒå…¥åˆ°å›¾ç‰‡æ–‡ä»¶ä¸­</span>
        <span class="hljs-string">"Title"</span>: <span class="hljs-string">"Experimental Results"</span>,
        <span class="hljs-string">"Author"</span>: <span class="hljs-string">"Ming"</span>,
        <span class="hljs-string">"Copyright"</span>: <span class="hljs-string">"CC-BY 4.0"</span>,
    },
)
</code></pre>
<p>è¿™æ ·çš„è¯ï¼Œè¿è¡Œå®Œç¨‹åºåï¼Œå°±ä¼šå°†å›¾è¡¨ä¿å­˜ä¸ºå›¾ç‰‡å­˜æ”¾åœ¨ä½ æŒ‡å®šçš„ä½ç½®ã€‚</p>
<h3 data-id="heading-8">ä¸‰. è¿›é˜¶ç»˜å›¾æ“ä½œ</h3>
<h4 data-id="heading-9">3.1 åŒºé—´å¡«å……</h4>
<p>åŒºé—´å¡«å……ï¼ŒæŒ‡çš„æ˜¯åœ¨ç»™å®šçš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">x</span></span></span></span></span> åŒºé—´å†…ï¼Œæ ¹æ®è¯¥åŒºé—´å¯¹åº”çš„ä¸Šä¸‹è¾¹ç•Œå€¼ï¼Œå°†å…¶ä¹‹é—´çš„åŒºåŸŸç”¨é¢œè‰²æˆ–å›¾æ¡ˆè¿›è¡Œå¡«å……ã€‚è¿™ç§å¯è§†åŒ–æ–¹æ³•å¸¸ç”¨äºè¡¨ç¤ºè¯¯å·®èŒƒå›´ã€ç½®ä¿¡åŒºé—´ã€å‡½æ•°åŒ…å›´åŒºåŸŸç­‰ï¼Œèƒ½ç›´è§‚åœ°å±•ç¤ºæ•°æ®æˆ–å‡½æ•°åœ¨æŸä¸€èŒƒå›´å†…çš„æ³¢åŠ¨æƒ…å†µã€‚ä¸‹å›¾ 9 å±•ç¤ºäº†ä¸€ä¸ªå…¸å‹çš„åŒºé—´å¡«å……æ•ˆæœï¼š</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc995912e79441ba91c12ac62c0729ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=APa7tde25CkmaTRVSq%2BcZrwRF4E%3D" alt="c7.jpg" width="100%" loading="lazy"/></p>
<p>è¦å®ç°ä¸Šé¢çš„æ•ˆæœä¹Ÿå¾ˆç®€å•ï¼Œåœ¨ Matplotlib ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>ax.fill_between()</code> å‡½æ•°è½»æ¾å®ç°è¿™ä¸€æ•ˆæœã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºç¡€ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python">fig, ax = plt.subplots(figsize=(<span class="hljs-number">6</span>, <span class="hljs-number">4</span>))
x = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]
y_up = [<span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>]
y_down = [<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]

<span class="hljs-comment"># ç»˜åˆ¶ä¸Šä¸‹ä¸¤æ¡æŠ˜çº¿</span>
ax.plot(x, y_up)
ax.plot(x, y_down)

<span class="hljs-comment"># å¡«å……ä¸¤æ¡çº¿ä¹‹é—´çš„åŒºåŸŸ</span>
ax.fill_between(
    x,              <span class="hljs-comment"># x åæ ‡åºåˆ—</span>
    y_up,           <span class="hljs-comment"># ä¸Šè¾¹ç•Œ y å€¼</span>
    y_down,         <span class="hljs-comment"># ä¸‹è¾¹ç•Œ y å€¼</span>
    color=<span class="hljs-string">'#2ca02c'</span>, <span class="hljs-comment"># å¡«å……é¢œè‰²</span>
    alpha=<span class="hljs-number">0.2</span>       <span class="hljs-comment"># ä¸é€æ˜åº¦</span>
)
</code></pre>
<p>å†æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å®šä¹‰ä¸¤ä¸ªå¤šé¡¹å¼å‡½æ•°</span>
<span class="hljs-comment"># ä¸€å…ƒä¸‰æ¬¡å‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">cubic_polynomial</span>(<span class="hljs-params">x</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-number">0.5</span> * x**<span class="hljs-number">3</span> + x**<span class="hljs-number">2</span> - x + <span class="hljs-number">2</span>
<span class="hljs-comment"># ä¸€å…ƒäºŒæ¬¡å‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">quadratic_polynomial</span>(<span class="hljs-params">x</span>):
    <span class="hljs-keyword">return</span> (<span class="hljs-number">3</span> * x**<span class="hljs-number">2</span> + <span class="hljs-number">5</span> * x - <span class="hljs-number">2</span>) / <span class="hljs-number">1.5</span>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">6</span>, <span class="hljs-number">4</span>))

<span class="hljs-comment"># ç»˜åˆ¶è¿™ä¸¤ä¸ªå‡½æ•°</span>
x = generate_range(-<span class="hljs-number">3</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">0.05</span>)
y3 = apply_function_to_vector(x, cubic_polynomial)
y2 = apply_function_to_vector(x, quadratic_polynomial)
ax.plot(x, y3,label=<span class="hljs-string">"Cubic"</span>)
ax.plot(x, y2,label=<span class="hljs-string">"Quadratic"</span>)

<span class="hljs-comment"># å¡«å……xåœ¨[-2,0]ä¹‹é—´ï¼Œä»¥ä¸€å…ƒä¸‰æ¬¡å‡½æ•°ä¸ºä¸Šé™ï¼Œä¸€å…ƒäºŒæ¬¡å‡½æ•°ä¸ºä¸‹é™çš„åŒºé—´</span>
interval_x = generate_range(-<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.05</span>)
interval_y3 = apply_function_to_vector(interval_x, cubic_polynomial)
interval_y2 = apply_function_to_vector(interval_x, quadratic_polynomial)
ax.fill_between(
    interval_x,     <span class="hljs-comment"># x åŒºé—´</span>
    interval_y3,    <span class="hljs-comment"># ä¸Šè¾¹ç•Œï¼ˆä¸‰æ¬¡å‡½æ•°ï¼‰</span>
    interval_y2,    <span class="hljs-comment"># ä¸‹è¾¹ç•Œï¼ˆäºŒæ¬¡å‡½æ•°ï¼‰</span>
    color=<span class="hljs-string">"#2B6DA3"</span>, <span class="hljs-comment"># å¡«å……é¢œè‰²</span>
    alpha=<span class="hljs-number">0.25</span>,     <span class="hljs-comment"># é€æ˜åº¦</span>
    label=<span class="hljs-string">"Interval"</span> <span class="hljs-comment"># ç”¨äºå›¾ä¾‹çš„æ ‡ç­¾</span>
    <span class="hljs-comment"># hatch="//"    #è¿™ä¸ªå±æ€§çš„ä»‹ç»è¯¦è§æ¡å½¢å›¾ç« èŠ‚</span>
)

ax.legend()
</code></pre>
<p>è¿è¡Œä¸Šè¿°ä»£ç åï¼Œæˆ‘ä»¬å¾—åˆ°å¦‚å›¾ 10 æ‰€ç¤ºçš„ç»“æœï¼Œå…¶ä¸­è“è‰²åŒºåŸŸå³ä¸ºä¸¤ä¸ªå‡½æ•°åœ¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>âˆˆ</mo><mo stretchy="false">[</mo><mo>âˆ’</mo><mn>2</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">x \in [-2,0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"/><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">âˆ’</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">0</span><span class="mclose">]</span></span></span></span></span> åŒºé—´å†…çš„åŒ…å›´åŒºåŸŸï¼š</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/14c02edfb11d4d4e97b4baf13223cda1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=NWel0eUi2KbfgxsiD46mNhUiMS0%3D" alt="c8.jpg" width="70%" loading="lazy"/></p>
<p>å…¶å®åŒºé—´å¡«å……å¯ä»¥ç”»å‡ºå¾ˆå¤šæœ‰è¶£çš„å›¾ï¼Œå¦‚ä¸‹å›¾11æ‰€å±•ç¤ºçš„å››å¼ å›¾è¡¨ï¼Œä»…éœ€æŒæ¡ä¸Šæ–‡æ‰€æåˆ°çš„å†…å®¹å³å¯ç»˜åˆ¶å‡ºæ¥ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02b5f1fc590e4294be03830f65ddaf37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=Qpux481RC8waIBMxJaKr%2B%2FuHACE%3D" alt="c9.jpg" width="100%" loading="lazy"/></p>
<h4 data-id="heading-10">3.2 å¤šå­å›¾</h4>
<p>åœ¨ä¸Šä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>fig, ax = plt.subplots(figsize=(6, 4))</code> åˆ›å»ºäº†ä¸€å¼ ç”»å¸ƒï¼Œå¹¶åœ¨å…¶ä¸Šç»˜åˆ¶äº†å•ä¸ªå›¾è¡¨ã€‚ç„¶è€Œåœ¨å®é™…åˆ†æä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦å°†å¤šä¸ªå›¾è¡¨å¹¶æ’å±•ç¤ºï¼Œä»¥ä¾¿ç›´è§‚åœ°æ¯”è¾ƒä¸åŒæ•°æ®æˆ–è§†è§’ã€‚è¿™æ—¶ï¼Œå¤šå­å›¾ï¼ˆSubplotsï¼‰åŠŸèƒ½å°±æ´¾ä¸Šäº†ç”¨åœºã€‚</p>
<p>é€šè¿‡ <code>plt.subplots()</code> å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åˆ›å»ºåŒ…å«å¤šä¸ªåæ ‡è½´ï¼ˆAxesï¼‰çš„ç½‘æ ¼å¸ƒå±€ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç åˆ›å»ºäº†ä¸€ä¸ª 2 è¡Œ 4 åˆ—ï¼Œæ€»å…± <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>Ã—</mo><mn>4</mn><mo>=</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">2 \times 4 = 8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">4</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">8</span></span></span></span></span> ä¸ªå­å›¾çš„ç”»å¸ƒï¼š</p>
<pre><code class="hljs language-python" lang="python">row = <span class="hljs-number">2</span>  <span class="hljs-comment"># è®¾å®šå­å›¾è¡Œæ•°ä¸º 2</span>
col = <span class="hljs-number">4</span>  <span class="hljs-comment"># è®¾å®šå­å›¾åˆ—æ•°ä¸º 4</span>
fig, axs = plt.subplots(row, col, figsize=(<span class="hljs-number">15</span>, <span class="hljs-number">6</span>))
</code></pre>
<p>å°†å…¶ç»˜åˆ¶å‡ºæ¥ï¼Œå¦‚å›¾12æ‰€ç¤º</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a87d56f65a814bed9436eb2b09330720~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=MDtFDhDID8yhL9eEOlFRxhVoppk%3D" alt="c10.jpg" width="100%" loading="lazy"/></p>
<p>è¿™é‡Œè¿”å›çš„ <code>axs</code> æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ˆè¿™ä¹Ÿæ˜¯å˜é‡åå¸¦ â€œsâ€ çš„åŸå› ï¼‰ï¼Œå…¶å½¢çŠ¶ä¸º <code>(row, col)</code>ï¼Œå³ <code>(2, 4)</code>ã€‚ä½ å¯ä»¥é€šè¿‡äºŒç»´ç´¢å¼•æ¥è®¿é—®æ¯ä¸€ä¸ªå­å›¾åæ ‡è½´å¯¹è±¡ï¼š</p>
<ul>
<li><code>axs[0, 0]</code> å¯¹åº”ç¬¬ 1 è¡Œç¬¬ 1 åˆ—çš„å­å›¾</li>
<li><code>axs[0, 1]</code> å¯¹åº”ç¬¬ 1 è¡Œç¬¬ 2 åˆ—çš„å­å›¾</li>
<li>â€¦â€¦</li>
<li><code>axs[1, 3]</code> å¯¹åº”ç¬¬ 2 è¡Œç¬¬ 4 åˆ—çš„å­å›¾</li>
</ul>
<p><strong>é‚£ä¹ˆï¼Œå¦‚æœæˆ‘æƒ³åœ¨ç¬¬ 2 è¡Œç¬¬ 2 åˆ—çš„å­å›¾ä¸­ç»˜åˆ¶ä¸€ä¸ªä¸‰æ¬¡å‡½æ•°ï¼Œè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</strong> æ–¹æ³•ä¸åœ¨å•å›¾ä¸­ç»˜å›¾å®Œå…¨ä¸€è‡´ï¼Œåªéœ€é€‰ä¸­å¯¹åº”çš„åæ ‡è½´å¯¹è±¡å¹¶è¿›è¡Œæ“ä½œå³å¯ã€‚</p>
<pre><code class="hljs language-python" lang="python">fig, axs = plt.subplots(<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,figsize=(<span class="hljs-number">15</span>, <span class="hljs-number">6</span>))
x = generate_range(-<span class="hljs-number">3</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">0.05</span>)
y = apply_function_to_vector(x, cubic_polynomial)

<span class="hljs-comment"># åœ¨ç¬¬äºŒè¡Œç¬¬äºŒåˆ—ï¼ˆç´¢å¼•ä¸º [1, 1]ï¼‰çš„å­å›¾ä¸­ç»˜å›¾</span>
axs[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>].plot(x,y)
axs[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>].set_title(<span class="hljs-string">"ä¸€å…ƒä¸‰æ¬¡å‡½æ•°"</span>)
axs[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>].grid(<span class="hljs-literal">True</span>, which=<span class="hljs-string">'both'</span>, linestyle=<span class="hljs-string">'--'</span>, linewidth=<span class="hljs-number">0.5</span>)
axs[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>].set_xlabel(<span class="hljs-string">"è¿™æ˜¯xè½´æ ‡ç­¾"</span>)
axs[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>].set_ylabel(<span class="hljs-string">"è¿™æ˜¯yè½´æ ‡ç­¾"</span>)

<span class="hljs-comment"># å¯é€‰ï¼šè°ƒæ•´å­å›¾ä¹‹é—´çš„é—´è·ï¼Œé¿å…æ ‡ç­¾é‡å </span>
fig.tight_layout()
</code></pre>
<p>è¿è¡Œç»“æœå¦‚å›¾13æ‰€ç¤ºï¼Œå¯ä»¥çœ‹åˆ°åªåœ¨æŒ‡å®šçš„å­å›¾ä½ç½®ç»˜åˆ¶äº†å‡½æ•°æ›²çº¿ï¼š</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/354e7cf191514ae3ba4104b88ce5f6dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=aVKJ6Wuqq69N9vNoAhO59S5RsE4%3D" alt="c11.jpg" width="100%" loading="lazy"/></p>
<p>å½“ç„¶ï¼Œå¤šå­å›¾è¿˜æœ‰æ›´å¤šé«˜çº§å¸ƒå±€æ–¹å¼ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><strong>å…±äº«åæ ‡è½´</strong>ï¼šå¤šä¸ªå­å›¾å…±äº«åŒä¸€ x è½´æˆ– y è½´ï¼Œä¾¿äºæ¯”è¾ƒã€‚</li>
<li><strong>ä¸å‡åŒ€å¸ƒå±€</strong>ï¼šä½¿ç”¨ <code>GridSpec</code> å®ç°æ›´çµæ´»ã€å¤§å°ä¸ä¸€çš„å­å›¾æ’åˆ—ã€‚</li>
<li><strong>åµŒå¥—å¸ƒå±€</strong>ï¼šåœ¨å¤§å›¾ä¸­åµŒå…¥å°å›¾ã€‚</li>
</ul>
<p>ç”±äºè¿™äº›æŠ€å·§åœ¨å…¥é—¨é˜¶æ®µä½¿ç”¨é¢‘ç‡ç›¸å¯¹è¾ƒä½ï¼Œæœ¬ç¯‡æ–‡ç« æš‚ä¸å±•å¼€ã€‚å¦‚æœä½ æœªæ¥é‡åˆ°ç›¸å…³éœ€æ±‚ï¼Œå¯ä»¥éšæ—¶æŸ¥é˜… <a href="https://link.juejin.cn?target=https%3A%2F%2Fmatplotlib.org%2F" target="_blank" title="https://matplotlib.org/" ref="nofollow noopener noreferrer">Matplotlib å®˜æ–¹æ–‡æ¡£</a>æˆ–è¯¢é—®ä½ èº«è¾¹çš„ AI åŠ©æ‰‹ã€‚</p>
<h4 data-id="heading-11">3.3 åŒè½´å›¾</h4>
<p><strong>ä»€ä¹ˆæ˜¯åŒè½´å›¾ï¼Ÿ</strong>
ç®€å•æ¥è¯´ï¼ŒåŒè½´å›¾å°±æ˜¯<strong>åœ¨åŒä¸€å¼ å›¾ä¸­ä½¿ç”¨ä¸¤ä¸ªç‹¬ç«‹çš„Yè½´ï¼ˆé€šå¸¸å…±äº«åŒä¸€ä¸ªXè½´ï¼‰</strong>ï¼Œç”¨æ¥åŒæ—¶å±•ç¤ºä¸¤ç§ä¸åŒé‡çº²æˆ–æ•°é‡çº§çš„æ•°æ®ã€‚è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±èƒ½åœ¨åŒä¸€ä¸ªåæ ‡ç³»ä¸‹æ¸…æ™°å¯¹æ¯”ä¸¤ç»„å·®å¼‚å¾ˆå¤§çš„æ•°æ®ï¼Œè€Œä¸ä¼šè¢«å•ä¸€åæ ‡è½´çš„å°ºåº¦æ‰€é™åˆ¶ã€‚</p>
<p>æ¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼ˆå›¾14å·¦å›¾ï¼‰ï¼š</p>
<ul>
<li>å·¦ä¾§çš„çº¢è‰²Yè½´èŒƒå›´æ˜¯ -1 åˆ° 1ï¼Œå¯¹åº”æ­£å¼¦å‡½æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>=</mo><mtext>sin</mtext><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">y=\text{sin}(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">sin</span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span></li>
<li>å³ä¾§çš„è“è‰²Yè½´èŒƒå›´æ˜¯ 0 åˆ° 200ï¼Œå¯¹åº”ç¼©æ”¾åçš„æŒ‡æ•°å‡½æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>=</mo><mn>0.01</mn><mo>â‹…</mo><msup><mi>e</mi><mi>x</mi></msup></mrow><annotation encoding="application/x-tex">y=0.01 \cdot e^{x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0.01</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6644em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span></span></span></span></span></span></span></span></span></li>
</ul>
<p>å¦‚æœä¸ç”¨åŒè½´ï¼Œè€Œæ˜¯æŠŠä¸¤æ¡æ›²çº¿ç”»åœ¨åŒä¸€ä¸ªYè½´ä¸‹ï¼ˆå›¾14å³å›¾ï¼‰ï¼Œç”±äºæŒ‡æ•°å‡½æ•°çš„æ•°å€¼è¿œå¤§äºæ­£å¼¦å‡½æ•°ï¼Œæ­£å¼¦æ›²çº¿çš„æ³¢åŠ¨å°±ä¼šè¢«ä¸¥é‡å‹ç¼©ï¼Œå‡ ä¹çœ‹ä¸å‡ºå…¶å½¢æ€ç»†èŠ‚ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/143d31fab10c4926bccda90607a59ab3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=nZq6kQCR8KgYLG7vWV%2Btkx2iZ2A%3D" alt="c12.jpg" width="100%" loading="lazy"/></p>
<p>Matplotlib ç»˜åˆ¶åŒè½´å›¾éå¸¸ç®€å•ï¼Œæ ¸å¿ƒæ–¹æ³•æ˜¯ä½¿ç”¨ <code>ax.twinx()</code> åˆ›å»ºå…±äº«Xè½´çš„ç¬¬äºŒä¸ªåæ ‡è½´ã€‚ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä»£ç ä¸€æ­¥æ­¥å®ç°ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> math
plt.rcParams[<span class="hljs-string">"font.sans-serif"</span>] = [<span class="hljs-string">"SimHei"</span>]  <span class="hljs-comment"># ä½¿ç”¨SimHeiå­—ä½“ï¼ˆé»‘ä½“ï¼‰</span>
plt.rcParams[<span class="hljs-string">"axes.unicode_minus"</span>] = <span class="hljs-literal">False</span>

<span class="hljs-comment"># å®šä¹‰ä¸¤ä¸ªå‡½æ•°ï¼šæ­£å¼¦å‡½æ•°å’Œç¼©æ”¾åçš„æŒ‡æ•°å‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">sin</span>(<span class="hljs-params">x</span>):
    <span class="hljs-keyword">return</span> math.sin(x)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">exp</span>(<span class="hljs-params">x</span>):
    <span class="hljs-keyword">return</span> math.exp(x) * <span class="hljs-number">0.01</span>

x = generate_range(<span class="hljs-number">0</span>,<span class="hljs-number">10</span>,<span class="hljs-number">0.05</span>)
y1 = apply_function_to_vector(x,sin)
y2 = apply_function_to_vector(x,exp)

fig, ax = plt.subplots(figsize=(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>))

<span class="hljs-comment"># æ­£å¸¸ç»˜åˆ¶ï¼Œåœ¨ä¸»åæ ‡è½´ä¸Šç»˜åˆ¶ç¬¬ä¸€æ¡æ›²çº¿ï¼ˆæ­£å¼¦ï¼Œçº¢è‰²ï¼‰</span>
ax.plot(x, y1, color=<span class="hljs-string">'red'</span>)
ax.set_xlabel(<span class="hljs-string">"Xè½´"</span>)  
ax.set_ylabel(<span class="hljs-string">"ä¸»yè½´: æ­£å¼¦å‡½æ•°"</span>, color=<span class="hljs-string">"red"</span>)

<span class="hljs-comment"># å°†ä¸»Yè½´çš„åˆ»åº¦æ ‡ç­¾ä¹Ÿè®¾ä¸ºçº¢è‰²ï¼Œå½¢æˆè§†è§‰ç»Ÿä¸€</span>
ax.tick_params(axis=<span class="hljs-string">"y"</span>,labelcolor=<span class="hljs-string">"red"</span>)

<span class="hljs-comment"># â˜… å…³é”®æ­¥éª¤ï¼šåˆ›å»ºå…±äº«Xè½´çš„æ¬¡åæ ‡è½´</span>
sub_ax = ax.twinx()

<span class="hljs-comment"># åœ¨æ¬¡åæ ‡è½´ä¸Šç»˜åˆ¶ç¬¬äºŒæ¡æ›²çº¿ï¼ˆæŒ‡æ•°ï¼Œè“è‰²ï¼‰</span>
<span class="hljs-comment"># sub_ax å’Œæ™®é€šçš„axä½¿ç”¨æ–¹æ³•ä¸€æ ·</span>
sub_ax.plot(x, y2, color=<span class="hljs-string">'blue'</span>)
sub_ax.set_ylabel(<span class="hljs-string">"æ¬¡Yè½´: æŒ‡æ•°å‡½æ•°"</span>, color=<span class="hljs-string">"blue"</span>)
sub_ax.tick_params(axis=<span class="hljs-string">"y"</span>, labelcolor=<span class="hljs-string">"blue"</span>)

ax.title(<span class="hljs-string">"åŒYè½´ç¤ºä¾‹: æ­£å¼¦å‡½æ•° vs æŒ‡æ•°å‡½æ•°"</span>)
plt.show()
</code></pre>
<ul>
<li><code>ax.twinx()</code> ä¼šåˆ›å»ºä¸€ä¸ªä¸ <code>ax</code> å…±äº« X è½´çš„æ–°åæ ‡è½´å¯¹è±¡ <code>sub_ax</code>ï¼Œå…¶ Y è½´é»˜è®¤æ”¾ç½®åœ¨å³ä¾§ã€‚</li>
<li><code>sub_ax</code> çš„ä½¿ç”¨æ–¹æ³•ä¸æ™®é€šåæ ‡è½´å®Œå…¨ç›¸åŒï¼Œå¯ä»¥è°ƒç”¨ <code>plot</code>ã€<code>set_ylabel</code>ã€<code>tick_params</code> ç­‰æ–¹æ³•ã€‚</li>
</ul>
<h3 data-id="heading-12">å››. æ¡å½¢å›¾</h3>
<p>æ¡å½¢å›¾ï¼ˆBar Chartï¼‰æ˜¯ä¸€ç§ä»¥çŸ©å½¢æ¡çš„é•¿åº¦æˆ–é«˜åº¦è¡¨ç¤ºæ•°å€¼å¤§å°çš„ç»Ÿè®¡å›¾è¡¨ï¼Œé€šå¸¸ç”¨äºå±•ç¤ºåˆ†ç±»æ•°æ®çš„å¯¹æ¯”ã€‚ä¸æŠ˜çº¿å›¾å¼ºè°ƒè¶‹åŠ¿ä¸åŒï¼Œæ¡å½¢å›¾æ›´ä¾§é‡äºç±»åˆ«ä¹‹é—´çš„æ¯”è¾ƒï¼Œå¸¸è§äºé”€å”®é¢å¯¹æ¯”ã€æŠ•ç¥¨ç»“æœã€ä»·æ ¼æ¯”è¾ƒç­‰åœºæ™¯ã€‚</p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªå…¸å‹çš„å¤šç±»åˆ«æ¡å½¢å›¾ç¤ºä¾‹ï¼ˆå›¾15ï¼‰ï¼Œå®ƒæ¸…æ™°åœ°å±•ç¤ºäº†ä¸åŒæ•°æ®ç³»åˆ—åœ¨å¤šä¸ªç±»åˆ«ä¸Šçš„åˆ†å¸ƒä¸å¯¹æ¯”ï¼š</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a00442a63dd457fbb01b56014612205~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=FxoMQDBP6V6LqQShuhWN46rCrbQ%3D" alt="c13.jpg" width="100%" loading="lazy"/></p>
<p>ç”¨ Matplotlib ç»˜åˆ¶æ¡å½¢å›¾éå¸¸ç®€å•ï¼Œä¸»è¦ä½¿ç”¨ <code>ax.bar()</code> æ–¹æ³•ã€‚æˆ‘ä»¬ä»¥ç»˜åˆ¶ä¸€ç»„æ°´æœæ‰¹å‘ä»·çš„æ¡å½¢å›¾ä¸ºä¾‹ï¼ˆè¿è¡Œç»“æœå¦‚å›¾16æ‰€ç¤ºï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åˆ›å»ºç”»å¸ƒ</span>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">6</span>, <span class="hljs-number">4.5</span>))
<span class="hljs-comment"># è®¾ç½®æ¬¡åˆ»åº¦ï¼šæ¯ä¸¤ä¸ªä¸»åˆ»åº¦ä¹‹é—´åŒ…å«5ä¸ªæ¬¡åˆ»åº¦ï¼ˆä½¿åæ ‡è½´æ›´ç²¾ç»†ï¼‰</span>
ax.xaxis.set_minor_locator(AutoMinorLocator(<span class="hljs-number">5</span>))

<span class="hljs-comment"># æ•°æ®å‡†å¤‡</span>
wholesale_price = [<span class="hljs-number">5.1</span>, <span class="hljs-number">4.7</span>, <span class="hljs-number">5.5</span>, <span class="hljs-number">3.2</span>, <span class="hljs-number">4.3</span>]  <span class="hljs-comment"># æ‰¹å‘ä»·ï¼ˆå…ƒ/å…¬æ–¤ï¼‰</span>
x = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]  <span class="hljs-comment"># æ¨ªåæ ‡ä½ç½®</span>

<span class="hljs-comment"># ç»˜åˆ¶æ¡å½¢å›¾ï¼ˆæ³¨æ„ï¼šä¸æ˜¯plotï¼Œè€Œæ˜¯barï¼‰</span>
ax.bar(
    x,                    <span class="hljs-comment"># æ¯ä¸ªæŸ±å­çš„æ¨ªåæ ‡ä½ç½®</span>
    wholesale_price,      <span class="hljs-comment"># æ¯ä¸ªæŸ±å­çš„é«˜åº¦ï¼ˆyå€¼ï¼‰</span>
    width=<span class="hljs-number">0.4</span>,            <span class="hljs-comment"># æŸ±å­çš„å®½åº¦</span>
    label=<span class="hljs-string">"æ‰¹å‘ä»·"</span>,        <span class="hljs-comment"># å›¾ä¾‹æ ‡ç­¾</span>
    color=<span class="hljs-string">"#35881B"</span>,      <span class="hljs-comment"># å¡«å……é¢œè‰²ï¼ˆç»¿è‰²ç³»ï¼‰</span>
    edgecolor=<span class="hljs-string">"black"</span>,    <span class="hljs-comment"># è¾¹æ¡†é¢œè‰²</span>
    alpha=<span class="hljs-number">0.8</span>,            <span class="hljs-comment"># ä¸é€æ˜åº¦ï¼ˆ0~1ï¼Œ1ä¸ºå®Œå…¨ä¸é€æ˜ï¼‰</span>
)
</code></pre>
<p>ä¸Šé¢çš„åŸºç¡€æ¡å½¢å›¾ç•¥æ˜¾å•è°ƒï¼Œæˆ‘ä»¬é€šè¿‡ä»¥ä¸‹æ­¥éª¤å¢å¼ºå¯è¯»æ€§ä¸ç¾è§‚åº¦ï¼ˆè¿è¡Œç»“æœå¦‚å›¾17æ‰€ç¤ºï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python">fig, ax = plt.subplots(figsize=(<span class="hljs-number">6</span>, <span class="hljs-number">4.5</span>))

<span class="hljs-comment"># å…·ä½“åŒ–çš„æ°´æœä»·æ ¼å±æ€§</span>
wholesale_price = [<span class="hljs-number">5.1</span>, <span class="hljs-number">4.7</span>, <span class="hljs-number">5.5</span>, <span class="hljs-number">3.2</span>, <span class="hljs-number">4.3</span>]  <span class="hljs-comment"># æ‰¹å‘ä»·</span>

<span class="hljs-comment"># è®¾ç½®æ°´æœæ ‡ç­¾</span>
x = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]
categories = [<span class="hljs-string">"é¦™è•‰"</span>, <span class="hljs-string">"æ©™å­"</span>, <span class="hljs-string">"è‹¹æœ"</span>, <span class="hljs-string">"æ©˜å­"</span>, <span class="hljs-string">"æå­"</span>]

<span class="hljs-comment"># è®¾ç½®xè½´åˆ»åº¦æ ‡ç­¾ï¼ˆç”¨çœŸå®æ°´æœåæ›¿æ¢æ•°å­—ï¼‰</span>
ax.set_xticks(x)
ax.set_xticklabels(categories)

<span class="hljs-comment"># ç»˜åˆ¶æ¡å½¢å›¾ï¼ˆæ¢ä¸ºæ›´ä¸­æ€§çš„æ·±ç°è‰²ï¼‰</span>
ax.bar(
    x, wholesale_price,
    width=<span class="hljs-number">0.4</span>,
    label=<span class="hljs-string">"æ‰¹å‘ä»·"</span>,
    color=<span class="hljs-string">"#272727"</span>,      <span class="hljs-comment"># æ·±ç°è‰²</span>
    edgecolor=<span class="hljs-string">"black"</span>,
    alpha=<span class="hljs-number">0.8</span>,
)

<span class="hljs-comment"># åœ¨æ¯ä¸ªæŸ±å­é¡¶éƒ¨æ·»åŠ æ•°å€¼æ ‡ç­¾ - ä½¿ç”¨xå’Œwholesale_priceå®šä½</span>
<span class="hljs-comment"># æœ¬è´¨ä½¿ç”¨ax.textåœ¨æŒ‡å®šä½ç½®æ·»åŠ æ–‡æœ¬</span>
<span class="hljs-keyword">for</span> xi, price <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(x, wholesale_price):
    ax.text(xi, price + <span class="hljs-number">0.2</span>, <span class="hljs-string">f"<span class="hljs-subst">{price}</span>"</span>, 
            ha=<span class="hljs-string">"center"</span>,   <span class="hljs-comment"># æ°´å¹³å±…ä¸­</span>
            va=<span class="hljs-string">"bottom"</span>,   <span class="hljs-comment"># å‚ç›´åº•éƒ¨å¯¹é½</span>
            fontsize=<span class="hljs-number">12</span>)

<span class="hljs-comment"># è®¾ç½®axè¡¨çš„å¯è§è§†çª—å¤§å°ï¼Œxåœ¨0.2~5.8ä¹‹é—´ï¼Œyåœ¨0~7ä¹‹é—´ï¼Œä½ å¯ä»¥è‡ªå·±è°ƒæ•´ï¼Œçœ‹çœ‹æ•ˆæœ</span>
<span class="hljs-comment"># ä¸»è¦å°±æ˜¯è®©å›¾å½¢å‘¨å›´ç•™æœ‰ä¸€å®šç©ºé—´</span>
ax.set_ylim(<span class="hljs-number">0</span>, <span class="hljs-number">7</span>)          <span class="hljs-comment"># yè½´æ˜¾ç¤º0~7</span>
ax.set_xlim(<span class="hljs-number">0.2</span>, <span class="hljs-number">5.8</span>)      <span class="hljs-comment"># xè½´æ˜¾ç¤º0.2~5.8ï¼ˆæŸ±å­å±…ä¸­ï¼‰</span>

<span class="hljs-comment"># æ·»åŠ å›¾ä¾‹ä¸ç½‘æ ¼</span>
ax.legend()
ax.grid(axis=<span class="hljs-string">"y"</span>, linestyle=<span class="hljs-string">"--"</span>, alpha=<span class="hljs-number">0.5</span>)

<span class="hljs-comment"># åœ¨axè¡¨ä¸Šç»§ç»­ç»˜åˆ¶æŠ˜çº¿å›¾ï¼Œä¸è¦å¿˜äº†ï¼Œmatplotlibä¸ä¼šæ“¦é™¤ä¹‹å‰ç»˜åˆ¶çš„ä»»ä½•å†…å®¹ï¼Œå› æ­¤ä½ å¯ä»¥ç»„åˆå‡ºå¾ˆå¤šå¥‡ç‰¹çš„å›¾</span>
ax.plot(x, wholesale_price,
        color=<span class="hljs-string">"#2E2E2E"</span>,
        linestyle=<span class="hljs-string">"--"</span>,
        alpha=<span class="hljs-number">0.5</span>,
        marker=<span class="hljs-string">"o"</span>)        <span class="hljs-comment"># æ•°æ®ç‚¹ç”¨åœ†åœˆæ ‡è®°</span>
</code></pre>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d027a5853e53410b9c10f0ea318f88a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=DiuyXZ6O20uh5bbq5W3BUEf5Zu8%3D" alt="c14.jpg" width="100%" loading="lazy"/></p>
<p>å…¶å®åˆ°è¿™é‡Œï¼Œæ¡å½¢å›¾å°±å·²ç»è®²å®Œäº†ï¼Œä½†æ˜¯åœ¨å®é™…åˆ†æä¸­ï¼Œæˆ‘ä»¬å¸¸éœ€è¦æ¯”è¾ƒåŒä¸€åˆ†ç±»ä¸‹å¤šä¸ªç³»åˆ—çš„æ•°æ®ï¼Œè¿™å°±æ˜¯å¤šç±»åˆ«æ¡å½¢å›¾ï¼ˆå›¾15ç±»å‹ï¼‰ï¼Œå…¶å®ä½ åœ¨å­¦ä¼šä¸Šé¢çš„å†…å®¹åï¼Œè‡ªç„¶è€Œç„¶å°±ä¼šç»˜åˆ¶å¤šç±»åˆ«æ¡å½¢å›¾äº†ï¼Œå®ƒçš„æœ¬è´¨å°±æ˜¯åœ¨ä¸€ä¸ªå›¾è¡¨ä¸Šç»˜åˆ¶å¤šä¸ªæ¡å½¢å›¾ï¼Œæ¥ä¸‹æ¥å°±å¸¦ä½ ç»˜åˆ¶ä¸€éå¦‚å›¾18æ‰€ç¤ºçš„å¤šç±»åˆ«æ¡å½¢å›¾ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python">fig, ax = plt.subplots(figsize=(<span class="hljs-number">7</span>, <span class="hljs-number">4.5</span>))
ax.xaxis.set_minor_locator(AutoMinorLocator(<span class="hljs-number">5</span>))

<span class="hljs-comment"># ä¸‰ç§ä»·æ ¼æ•°æ®ï¼ˆå•ä½ï¼šå…ƒ/å…¬æ–¤ï¼‰</span>
wholesale_price = [<span class="hljs-number">5.1</span>, <span class="hljs-number">4.7</span>, <span class="hljs-number">5.5</span>, <span class="hljs-number">3.2</span>, <span class="hljs-number">4.3</span>]   <span class="hljs-comment"># æ‰¹å‘ä»·</span>
retail_price = [<span class="hljs-number">8.17</span>, <span class="hljs-number">9.74</span>, <span class="hljs-number">9.2</span>, <span class="hljs-number">8.58</span>, <span class="hljs-number">7.5</span>]    <span class="hljs-comment"># é›¶å”®ä»·</span>
online_price = [<span class="hljs-number">6.31</span>, <span class="hljs-number">6.42</span>, <span class="hljs-number">5.94</span>, <span class="hljs-number">7.35</span>, <span class="hljs-number">6.93</span>]  <span class="hljs-comment"># ç”µå•†ä»·</span>


categories = [<span class="hljs-string">"é¦™è•‰"</span>, <span class="hljs-string">"æ©™å­"</span>, <span class="hljs-string">"è‹¹æœ"</span>, <span class="hljs-string">"æ©˜å­"</span>, <span class="hljs-string">"æå­"</span>]
<span class="hljs-comment"># ç¡®å®šæ¯ä¸ªåˆ†ç±»çš„ä¸­å¿ƒä½ç½®ï¼ˆè¿™é‡Œä¸º[1, 2.5, 4, 5.5, 7]ï¼Œé—´è·ä¸º1.5ï¼‰</span>
x = [<span class="hljs-number">1</span>, <span class="hljs-number">2.5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5.5</span>, <span class="hljs-number">7</span>]

ax.set_xticks(x)
ax.set_xticklabels(categories)

<span class="hljs-comment"># ç¬¬ä¸€ç»„ï¼šé›¶å”®ä»·ï¼ˆå·¦ä¾§åç§»0.25ï¼‰</span>
ax.bar(
    [i - <span class="hljs-number">0.25</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> x],  <span class="hljs-comment"># æ¨ªåæ ‡å·¦ç§»0.25</span>
    retail_price,
    width=<span class="hljs-number">0.5</span>,
    label=<span class="hljs-string">"é›¶å”®ä»·"</span>,
    color=<span class="hljs-string">"#C5C5C5"</span>,        <span class="hljs-comment"># æµ…ç°è‰²</span>
    edgecolor=<span class="hljs-string">"black"</span>,
    alpha=<span class="hljs-number">0.8</span>,
)

<span class="hljs-comment"># ç¬¬äºŒç»„ï¼šæ‰¹å‘ä»·ï¼ˆå±…ä¸­ï¼Œå®½åº¦è¾ƒçª„ï¼‰</span>
ax.bar(
    [i - <span class="hljs-number">0.25</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> x],  <span class="hljs-comment"># ä¸é›¶å”®ä»·åŒä¸€åŸºå‡†ä½ç½®</span>
    wholesale_price,
    width=<span class="hljs-number">0.25</span>,             <span class="hljs-comment"># è¾ƒçª„çš„æŸ±å­</span>
    label=<span class="hljs-string">"æ‰¹å‘ä»·"</span>,
    color=<span class="hljs-string">"#555555"</span>,        <span class="hljs-comment"># ä¸­ç°è‰²</span>
)

<span class="hljs-comment"># ç¬¬ä¸‰ç»„ï¼šç”µå•†ä»·ï¼ˆå³ä¾§åç§»0.25ï¼‰</span>
ax.bar(
    [i + <span class="hljs-number">0.25</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> x],  <span class="hljs-comment"># æ¨ªåæ ‡å³ç§»0.25</span>
    online_price,
    width=<span class="hljs-number">0.5</span>,
    label=<span class="hljs-string">"ç”µå•†ä»·"</span>,
    color=<span class="hljs-string">"#FFFFFF"</span>,        <span class="hljs-comment"># ç™½è‰²å¡«å……</span>
    edgecolor=<span class="hljs-string">"black"</span>,
    hatch=<span class="hljs-string">"///"</span>,            <span class="hljs-comment"># å¡«å……å›¾æ¡ˆï¼šæ–œçº¿</span>
)

<span class="hljs-comment"># è®¾ç½®åæ ‡è½´ä¸æ ‡é¢˜</span>
ax.set_ylim(<span class="hljs-number">0</span>, <span class="hljs-number">11</span>)
ax.set_xlim(<span class="hljs-number">0</span>, <span class="hljs-number">8</span>)
ax.set_xlabel(<span class="hljs-string">"æ°´æœç§ç±»"</span>)
ax.set_ylabel(<span class="hljs-string">"ä»·æ ¼ï¼ˆå…ƒ/å…¬æ–¤ï¼‰"</span>)
ax.set_title(<span class="hljs-string">"ä¸åŒé”€å”®æ¸ é“çš„æ°´æœä»·æ ¼å¯¹æ¯”"</span>)
ax.legend()
ax.grid(axis=<span class="hljs-string">"y"</span>, linestyle=<span class="hljs-string">"--"</span>, alpha=<span class="hljs-number">0.5</span>)
</code></pre>
<p><strong>åç§»åŸç†</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ªåˆ†ç±»çš„ä¸­å¿ƒä½ç½®ä¸º <code>x[i]</code></li>
<li>å·¦ä¾§æŸ±å­ï¼š<code>x[i] - offset</code></li>
<li>å³ä¾§æŸ±å­ï¼š<code>x[i] + offset</code></li>
<li>é€šè¿‡è°ƒæ•´ <code>width</code> å’Œ <code>offset</code> æ§åˆ¶æŸ±å­çš„å®½åº¦ä¸é—´è·</li>
</ul>
<p><strong>å›¾æ¡ˆå¡«å……</strong>ï¼š(è‡ªå·±å¤šå¤šå°è¯•å°±æ‡‚äº†)</p>
<ul>
<li><code>hatch</code> å‚æ•°æ”¯æŒå¤šç§å¡«å……æ¨¡å¼ï¼š<code>'/'</code>, <code>'\'</code>, <code>'|'</code>, <code>'-'</code>, <code>'+'</code>, <code>'x'</code>, <code>'o'</code>, <code>'O'</code>, <code>'.'</code>, <code>'*'</code></li>
<li>å›¾æ¡ˆå¯†åº¦ä¼šéšå­—ç¬¦é‡å¤è€Œå¢åŠ ï¼Œå¦‚ <code>'///'</code> æ¯” <code>'/'</code> æ›´å¯†é›†</li>
</ul>
<p>æœ€åï¼Œæˆ‘ä»¬ç»¼åˆè¿ç”¨å‰é¢å­¦åˆ°çš„çŸ¥è¯†ï¼Œå®Œæˆä¸€ä¸ªå…·æœ‰å®ç”¨ä»·å€¼çš„ç»„åˆå›¾ï¼ˆå›¾19ï¼‰ï¼šç»˜åˆ¶æŸåŸå¸‚çš„æ°”æ¸©æ›²çº¿å’Œé™æ°´é‡æŸ±çŠ¶å›¾ã€‚ï¼ˆä½ å¯ä»¥å…ˆè‡ªå·±å°è¯•ç»˜åˆ¶ä¸€ä¸‹ï¼Œè‹¥å‘ç°å“ªé‡Œæœ‰å¡ä½äº†å†çœ‹çœ‹å‚è€ƒä»£ç ï¼‰</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dce745d4bae64004bc768976322843d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=jDvQQ7O7A6OUb71t86OkZLFpxYs%3D" alt="c15.jpg" width="70%" loading="lazy"/></p>
<p><strong>å‚è€ƒä»£ç ï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
plt.rcParams[<span class="hljs-string">"font.sans-serif"</span>] = [<span class="hljs-string">"SimHei"</span>] 
plt.rcParams[<span class="hljs-string">"axes.unicode_minus"</span>] = <span class="hljs-literal">False</span>

<span class="hljs-comment"># æ•°æ®å‡†å¤‡</span>
month = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>]  <span class="hljs-comment"># æœˆä»½</span>
temperature = [<span class="hljs-number">16</span>, <span class="hljs-number">16.5</span>, <span class="hljs-number">17.5</span>, <span class="hljs-number">19</span>, <span class="hljs-number">21</span>, <span class="hljs-number">24</span>, <span class="hljs-number">30</span>, <span class="hljs-number">32</span>, <span class="hljs-number">31</span>, <span class="hljs-number">26</span>, <span class="hljs-number">21</span>, <span class="hljs-number">18</span>]  <span class="hljs-comment"># æ°”æ¸©(â„ƒ)</span>
precipitation = [<span class="hljs-number">12</span>, <span class="hljs-number">20</span>, <span class="hljs-number">21</span>, <span class="hljs-number">45</span>, <span class="hljs-number">79</span>, <span class="hljs-number">120</span>, <span class="hljs-number">140</span>, <span class="hljs-number">230</span>, <span class="hljs-number">180</span>, <span class="hljs-number">160</span>, <span class="hljs-number">153</span>, <span class="hljs-number">20</span>]  <span class="hljs-comment"># é™æ°´é‡(mm)</span>

fig, ax = plt.subplots(figsize=(<span class="hljs-number">5</span>, <span class="hljs-number">5.5</span>))

<span class="hljs-comment"># å·¦ä¾§yè½´ï¼šç»˜åˆ¶æ°”æ¸©æŠ˜çº¿å›¾</span>
ax.plot(
    month, temperature,
    color=<span class="hljs-string">"black"</span>,
    marker=<span class="hljs-string">"o"</span>, 
    markersize=<span class="hljs-number">5</span>,  
    markerfacecolor=<span class="hljs-string">"#292929"</span>,  <span class="hljs-comment"># æ ‡è®°ç‚¹å¡«å……è‰²</span>
    markeredgecolor=<span class="hljs-string">"#060504"</span>,  <span class="hljs-comment"># æ ‡è®°ç‚¹è¾¹æ¡†è‰²</span>
    markeredgewidth=<span class="hljs-number">1</span>,
)  
ax.set_xlabel(<span class="hljs-string">"æµ·å£"</span>, fontsize=<span class="hljs-number">14</span>) 
ax.set_ylabel(<span class="hljs-string">"æ°”æ¸©(â„ƒ)"</span>)
ax.set_xticks(month)
ax.set_ylim(-<span class="hljs-number">60</span>, <span class="hljs-number">40</span>)  <span class="hljs-comment"># ç•™å‡ºè¶³å¤Ÿç©ºé—´ï¼Œé¿å…æ¡å½¢å›¾æº¢å‡º</span>

<span class="hljs-comment"># åˆ›å»ºå³ä¾§yè½´ï¼ˆå…±äº«åŒä¸€xè½´ï¼‰</span>
sub_ax = ax.twinx()

<span class="hljs-comment"># åœ¨å³ä¾§yè½´åæ ‡ç³»ä¸­ç»˜åˆ¶é™æ°´é‡æ¡å½¢å›¾</span>
sub_ax.bar(
    month, precipitation,
    width=<span class="hljs-number">0.5</span>,
    edgecolor=<span class="hljs-string">"black"</span>,
    color=<span class="hljs-string">"#FFFFFF"</span>,
    alpha=<span class="hljs-number">1</span>,
    hatch=<span class="hljs-string">"///"</span>  <span class="hljs-comment"># ç”¨æ–œçº¿å¡«å……ï¼ŒåŒºåˆ«äºçº¯è‰²</span>
)
sub_ax.set_ylabel(<span class="hljs-string">"é™æ°´é‡(mm)"</span>)
sub_ax.set_ylim(<span class="hljs-number">0</span>, <span class="hljs-number">400</span>)  <span class="hljs-comment"># è®¾ç½®åˆé€‚çš„èŒƒå›´</span>

<span class="hljs-comment"># ä¸ºå³ä¾§yè½´æ·»åŠ ç½‘æ ¼çº¿ï¼ˆå¢å¼ºå¯è¯»æ€§ï¼‰</span>
sub_ax.grid(
    <span class="hljs-literal">True</span>,
    which=<span class="hljs-string">"both"</span>, 
    axis=<span class="hljs-string">"y"</span>,  
    linestyle=<span class="hljs-string">"-"</span>, 
    linewidth=<span class="hljs-number">0.5</span>,  
    color=<span class="hljs-string">"gray"</span>, 
    alpha=<span class="hljs-number">0.4</span>,  
)

plt.show()
</code></pre>
<h3 data-id="heading-13">äº”. æ•£ç‚¹å›¾</h3>
<p>æ•£ç‚¹å›¾æ˜¯ä¸€ç§å°†æˆå¯¹æ•°æ® <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span></span> ç»˜åˆ¶ä¸ºäºŒç»´å¹³é¢ä¸­ä¸€ä¸ªç‚¹çš„å¯è§†åŒ–æ–¹æ³•ã€‚é€šè¿‡è§‚å¯Ÿè¿™äº›ç‚¹çš„åˆ†å¸ƒå½¢æ€ï¼Œæˆ‘ä»¬å¯ä»¥<strong>ç›´è§‚åœ°åˆ¤æ–­ä¸¤ä¸ªå˜é‡ä¹‹é—´æ˜¯å¦å­˜åœ¨ç›¸å…³æ€§ã€åˆ†å¸ƒæ¨¡å¼æˆ–å¼‚å¸¸å€¼</strong>ã€‚å› æ­¤ï¼Œæ•£ç‚¹å›¾åœ¨æ•°æ®åˆ†æã€æ¨¡å¼è¯†åˆ«å’Œåˆæ­¥æ¢ç´¢ä¸­æä¸ºå¸¸ç”¨ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç»˜åˆ¶ä¸€ä¸ªæœ€åŸºæœ¬çš„æ•£ç‚¹å›¾ï¼Œä»£ç å¦‚ä¸‹ï¼Œè¿è¡Œç»“æœå¦‚å›¾20æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-python" lang="python">fig, ax = plt.subplots(figsize=(<span class="hljs-number">6</span>, <span class="hljs-number">3.5</span>))

<span class="hljs-comment"># ç¬¬ä¸€ç»„æ•°æ®ç‚¹ï¼š(x1[i], y1[i])</span>
x1 = [<span class="hljs-number">1.2</span>, <span class="hljs-number">3.1</span>, <span class="hljs-number">1.8</span>, <span class="hljs-number">2.6</span>, <span class="hljs-number">3.1</span>, <span class="hljs-number">2.2</span>]
y1 = [<span class="hljs-number">2.5</span>, <span class="hljs-number">2.6</span>, <span class="hljs-number">1.8</span>, <span class="hljs-number">2.2</span>, <span class="hljs-number">3.0</span>, <span class="hljs-number">1.8</span>]

<span class="hljs-comment"># ç¬¬äºŒç»„æ•°æ®ç‚¹ï¼š(x2[i], y2[i])</span>
x2 = [<span class="hljs-number">2.1</span>, <span class="hljs-number">2.5</span>, <span class="hljs-number">2.8</span>, <span class="hljs-number">1.6</span>, <span class="hljs-number">1.1</span>, <span class="hljs-number">2.2</span>]
y2 = [<span class="hljs-number">3.5</span>, <span class="hljs-number">3.1</span>, <span class="hljs-number">2.8</span>, <span class="hljs-number">3.6</span>, <span class="hljs-number">4.0</span>, <span class="hljs-number">2.8</span>]

<span class="hljs-comment"># ç»˜åˆ¶ç¬¬ä¸€ç»„æ•£ç‚¹</span>
ax.scatter(
    x1,
    y1,
    s=<span class="hljs-number">40</span>,              <span class="hljs-comment"># ç‚¹çš„å¤§å°</span>
    color=<span class="hljs-string">"#575757"</span>,   <span class="hljs-comment"># å¡«å……é¢œè‰²ï¼ˆç°è‰²ï¼‰</span>
    alpha=<span class="hljs-number">1</span>,           <span class="hljs-comment"># ä¸é€æ˜åº¦</span>
    edgecolors=<span class="hljs-string">"#000000"</span>,  <span class="hljs-comment"># è¾¹ç¼˜é¢œè‰²ï¼ˆé»‘è‰²ï¼‰</span>
    linewidths=<span class="hljs-number">1</span>,      <span class="hljs-comment"># è¾¹ç¼˜çº¿å®½</span>
    marker=<span class="hljs-string">"o"</span>,        <span class="hljs-comment"># ç‚¹å½¢çŠ¶ï¼ˆåœ†å½¢ï¼‰ï¼Œæ›´å¤šé€‰é¡¹å¯ä»¥æŸ¥çœ‹â€œ2.3åŸºç¡€æ ·å¼â€ä¸­çš„markeré€ŸæŸ¥è¡¨</span>
    label=<span class="hljs-string">"Group A"</span>,   <span class="hljs-comment"># å›¾ä¾‹æ ‡ç­¾</span>
)

<span class="hljs-comment"># ç»˜åˆ¶ç¬¬äºŒç»„æ•£ç‚¹</span>
ax.scatter(
    x2,
    y2,
    s=<span class="hljs-number">40</span>,
    color=<span class="hljs-string">"#FFFFFF"</span>,   <span class="hljs-comment"># å¡«å……é¢œè‰²ï¼ˆç™½è‰²ï¼‰</span>
    alpha=<span class="hljs-number">1</span>,
    edgecolors=<span class="hljs-string">"#000000"</span>,
    linewidths=<span class="hljs-number">1</span>,
    marker=<span class="hljs-string">"o"</span>,
    label=<span class="hljs-string">"Group B"</span>,
)

<span class="hljs-comment"># æ˜¾ç¤ºå›¾ä¾‹</span>
ax.legend()
</code></pre>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7eaa45dcbde34995a31a63dc148ddbf3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=P2h8iDXR2Q3iFYxxi%2FqmUIo2RTQ%3D" alt="c16.jpg" width="100%" loading="lazy"/></p>
<p>é€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œä½ å·²ç»å¯ä»¥ç”»å‡ºæ¸…æ™°çš„åˆ†ç±»æ•£ç‚¹å›¾ã€‚åœ¨å®é™…åˆ†æä¸­ï¼Œæˆ‘ä»¬æœ‰æ—¶è¿˜éœ€è¦ç”¨<strong>ç‚¹çš„å¤§å°æˆ–é¢œè‰²è¡¨ç¤ºç¬¬ä¸‰ä¸ªç»´åº¦</strong>çš„ä¿¡æ¯ï¼ˆä¾‹å¦‚æƒé‡ã€å¯†åº¦ã€ç±»åˆ«ç­‰ï¼‰ï¼Œéœ€è¦åšåˆ°ç²¾ç»†åŒ–å¤„ç†æ¯ä¸€ä¸ªç‚¹ï¼Œç»™æ¯ä¸ªç‚¹è®¾ç½®ä¸åŒçš„å¤§å°å’Œé¢œè‰²ï¼Œå®ç°èµ·æ¥ä¹Ÿéå¸¸ç®€å•ï¼Œè¦å®ç°å›¾21æ‰€ç¤ºçš„æ•ˆæœï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python">fig, ax = plt.subplots(figsize=(<span class="hljs-number">7</span>, <span class="hljs-number">3.5</span>))

x1 = [<span class="hljs-number">1.2</span>, <span class="hljs-number">3.1</span>, <span class="hljs-number">1.8</span>, <span class="hljs-number">2.6</span>, <span class="hljs-number">3.1</span>, <span class="hljs-number">2.2</span>]
y1 = [<span class="hljs-number">2.5</span>, <span class="hljs-number">2.6</span>, <span class="hljs-number">1.8</span>, <span class="hljs-number">2.2</span>, <span class="hljs-number">3.0</span>, <span class="hljs-number">1.8</span>]

<span class="hljs-comment"># æ¯ä¸ªç‚¹çš„å¤§å°</span>
sizes = [<span class="hljs-number">40</span>, <span class="hljs-number">60</span>, <span class="hljs-number">90</span>, <span class="hljs-number">100</span>, <span class="hljs-number">120</span>, <span class="hljs-number">140</span>]

<span class="hljs-comment"># æ¯ä¸ªç‚¹çš„é¢œè‰²å€¼ï¼Œç”¨ä¸€ä¸ª 0~1 çš„æµ®ç‚¹æ•°è¡¨ç¤ºï¼Œå¯¹åº”é¢œè‰²æ˜ å°„è¡¨ä¸­çš„ä½ç½®</span>
colors = [<span class="hljs-number">0</span>, <span class="hljs-number">0.2</span>, <span class="hljs-number">0.3</span>, <span class="hljs-number">0.4</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">1</span>]

<span class="hljs-comment"># ç»˜åˆ¶å¸¦é¢œè‰²æ˜ å°„çš„æ•£ç‚¹å›¾</span>
scatter = ax.scatter(
    x1,
    y1,
    s=sizes,        <span class="hljs-comment"># ä½¿ç”¨åˆ—è¡¨åˆ†åˆ«æŒ‡å®šæ¯ä¸ªç‚¹çš„å¤§å°</span>
    c=colors,       <span class="hljs-comment"># ä½¿ç”¨åˆ—è¡¨åˆ†åˆ«æŒ‡å®šæ¯ä¸ªç‚¹çš„é¢œè‰²å€¼</span>
    cmap=<span class="hljs-string">"plasma"</span>,  <span class="hljs-comment"># é¢œè‰²æ˜ å°„è¡¨ï¼Œå°† 0~1 çš„å€¼æ˜ å°„ä¸ºå…·ä½“é¢œè‰²</span>
    alpha=<span class="hljs-number">0.8</span>,      <span class="hljs-comment"># ä¸é€æ˜åº¦</span>
    linewidths=<span class="hljs-number">0</span>,   <span class="hljs-comment"># è¾¹ç¼˜çº¿å®½ï¼ˆè®¾ä¸º 0 è¡¨ç¤ºæ— è¾¹æ¡†ï¼‰</span>
    marker=<span class="hljs-string">"o"</span>,     <span class="hljs-comment"># ç‚¹å½¢çŠ¶</span>
)

<span class="hljs-comment"># æ·»åŠ é¢œè‰²æ˜ å°„æ¡ï¼ˆcolorbarï¼‰</span>
cbar = fig.colorbar(scatter, ax=ax)
<span class="hljs-comment"># å¯è®¾ç½®é¢œè‰²æ¡æ ‡é¢˜ï¼ˆæŒ‰éœ€å¯ç”¨ï¼‰</span>
cbar.set_label(<span class="hljs-string">"é¢œè‰²æ˜ å°„æ¡æ ‡é¢˜"</span>, fontsize=<span class="hljs-number">9</span>)

<span class="hljs-comment"># è®¾å®šåæ ‡è½´èŒƒå›´ï¼Œè®©å›¾å½¢æ›´ç¾è§‚</span>
ax.set_xlim(<span class="hljs-number">0.6</span>, <span class="hljs-number">3.6</span>)
ax.set_ylim(<span class="hljs-number">1</span>, <span class="hljs-number">3.7</span>)
</code></pre>
<p>å¸¸ç”¨çš„ <code>cmap</code>ï¼ˆé¢œè‰²æ˜ å°„ï¼‰é€‰é¡¹åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>è¿ç»­å‹</strong>ï¼š<code>plasma</code>ã€<code>viridis</code>ã€<code>coolwarm</code>ã€<code>hot</code>ã€<code>gray</code>ï¼ˆé€‚åˆè¡¨ç¤ºæ•°å€¼å¤§å°ï¼‰</li>
<li><strong>ç¦»æ•£å‹</strong>ï¼š<code>tab10</code>ã€<code>Set2</code>ï¼ˆé€‚åˆè¡¨ç¤ºåˆ†ç±»ï¼‰</li>
</ul>
<p>è¿™äº›é¢œè‰²æ˜ å°„çš„è§†è§‰å¯¹æ¯”å¦‚å›¾22æ‰€ç¤ºï¼Œä½ å¯ä»¥æ ¹æ®æ•°æ®ç‰¹æ€§é€‰æ‹©æœ€åˆé€‚çš„æ˜ å°„æ–¹æ¡ˆã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abf146f809a549ca9076dadb47581160~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=R%2B0kktm11I0rQppES89Joq%2FN7c8%3D" alt="c17.jpg" width="100%" loading="lazy"/></p>
<h3 data-id="heading-14">å…­. ç›´æ–¹å›¾</h3>
<p>ç›´æ–¹å›¾ï¼ˆHistogramï¼‰æ˜¯ä¸€ç§ç”¨äºå±•ç¤ºæ•°æ®åˆ†å¸ƒæƒ…å†µçš„ç»Ÿè®¡å›¾è¡¨ï¼Œå®ƒé€šè¿‡å°†æ•°æ®åˆ’åˆ†åˆ°ä¸åŒçš„åŒºé—´ï¼ˆç§°ä¸ºâ€œç®±â€æˆ–â€œbinâ€ï¼‰ï¼Œå¹¶ç»Ÿè®¡æ¯ä¸ªåŒºé—´å†…æ•°æ®ç‚¹çš„æ•°é‡æ¥ç»˜åˆ¶ã€‚ç›´æ–¹å›¾ç‰¹åˆ«é€‚åˆè§‚å¯Ÿæ•°æ®çš„æ•´ä½“åˆ†å¸ƒã€é›†ä¸­è¶‹åŠ¿å’Œç¦»æ•£ç¨‹åº¦ã€‚</p>
<p>ä¸ºäº†è®©ä½ æ›´ç›´è§‚åœ°ç†è§£ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªç”Ÿæ´»ä¸­çš„ä¾‹å­æ¥è¯´æ˜ï¼šå‡è®¾ä½ æœ‰ä¸€æ‰€åˆä¸­æ‰€æœ‰å­¦ç”Ÿçš„èº«é«˜æ•°æ®ï¼Œç°åœ¨ä½ æƒ³çŸ¥é“èº«é«˜åœ¨ 1.45â€¯mâ€“1.50â€¯m ä¹‹é—´æœ‰å¤šå°‘äººã€1.50â€¯mâ€“1.55â€¯m ä¹‹é—´æœ‰å¤šå°‘äººâ€¦â€¦ä»¥æ­¤ç±»æ¨ã€‚å¦‚æœä½ æ‰‹åŠ¨ç»Ÿè®¡æ¯ä¸ªåŒºé—´çš„äººæ•°ï¼Œå†ç”¨æ¡å½¢å›¾ç”»å‡ºæ¥ï¼Œå½“ç„¶å¯ä»¥ï¼Œä½†è¿™æ ·åšæ¯”è¾ƒç¹çã€‚è€Œç›´æ–¹å›¾æ­£æ˜¯ä¸ºè¿™ç§â€œåˆ†æ®µç»Ÿè®¡â€ä»»åŠ¡è€Œç”Ÿçš„å·¥å…·ï¼Œå®ƒèƒ½è‡ªåŠ¨å®Œæˆåˆ†ç®±å’Œè®¡æ•°ï¼Œå¹¶ç›´æ¥ç”Ÿæˆå¯è§†åŒ–çš„åˆ†å¸ƒå›¾ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€æ®µåŸºç¡€çš„ç›´æ–¹å›¾ç»˜åˆ¶ä»£ç ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ç»„æ¨¡æ‹Ÿæ•°æ®æ¥æ¼”ç¤ºï¼š</p>
<pre><code class="hljs language-python" lang="python">fig, ax = plt.subplots(figsize=(<span class="hljs-number">6</span>, <span class="hljs-number">4</span>))
<span class="hljs-comment"># æ¨¡æ‹Ÿæ•°æ®</span>
data = [<span class="hljs-number">1.1</span>, <span class="hljs-number">1.3</span>, <span class="hljs-number">1.6</span>, <span class="hljs-number">2.6</span>, <span class="hljs-number">2.2</span>, <span class="hljs-number">3.1</span>, <span class="hljs-number">3.4</span>, <span class="hljs-number">3.2</span>, <span class="hljs-number">3.9</span>, <span class="hljs-number">3.5</span>,
        <span class="hljs-number">4.3</span>, <span class="hljs-number">5.1</span>, <span class="hljs-number">5.7</span>, <span class="hljs-number">5.8</span>, <span class="hljs-number">5.3</span>, <span class="hljs-number">5.1</span>, <span class="hljs-number">5.4</span>, <span class="hljs-number">5.6</span>, <span class="hljs-number">5.1</span>, <span class="hljs-number">5.0</span>, <span class="hljs-number">5.4</span>, <span class="hljs-number">5.6</span>, <span class="hljs-number">5.3</span>]

<span class="hljs-comment"># ä½¿ç”¨ hist å‡½æ•°ç»˜åˆ¶ç›´æ–¹å›¾</span>
ax.hist(
    data,                     <span class="hljs-comment"># è¾“å…¥æ•°æ®ï¼ˆä¸€ç»´æ•°ç»„æˆ–åºåˆ—ï¼‰</span>
    bins=[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>], <span class="hljs-comment"># æŒ‡å®šåˆ†ç®±è¾¹ç•Œï¼šä¾æ¬¡ä¸º [1,2)ã€[2,3)ã€[3,4)ã€[4,5)ã€[5,6]</span>
    <span class="hljs-built_in">range</span>=(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>),            <span class="hljs-comment"># ä»…ç»Ÿè®¡è½åœ¨ range èŒƒå›´å†…çš„æ•°æ®ï¼ˆæ­¤å¤„ä¸º 1 åˆ° 5ï¼‰ï¼ŒèŒƒå›´å¤–çš„æ•°æ®å°†è¢«å¿½ç•¥</span>
    histtype=<span class="hljs-string">"stepfilled"</span>,   <span class="hljs-comment"># ç›´æ–¹å›¾ç±»å‹ï¼šå¡«å……å¼é˜¶æ¢¯å›¾</span>
    orientation=<span class="hljs-string">"vertical"</span>,  <span class="hljs-comment"># æ–¹å‘ï¼šå‚ç›´ï¼ˆå¯é€‰ 'horizontal' ä¸ºæ°´å¹³ï¼‰</span>
    rwidth=<span class="hljs-number">0.9</span>,              <span class="hljs-comment"># æ¡å½¢ç›¸å¯¹å®½åº¦ï¼ˆå  bin å®½åº¦çš„æ¯”ä¾‹ï¼‰</span>
    color=<span class="hljs-string">"#277098"</span>,         <span class="hljs-comment"># å¡«å……é¢œè‰²</span>
    edgecolor=<span class="hljs-string">"black"</span>,       <span class="hljs-comment"># è¾¹æ¡†é¢œè‰²</span>
    alpha=<span class="hljs-number">0.75</span>,              <span class="hljs-comment"># å¡«å……ä¸é€æ˜åº¦</span>
    label=<span class="hljs-string">"æ™®é€šç›´æ–¹å›¾"</span>,      <span class="hljs-comment"># å›¾ä¾‹æ ‡ç­¾</span>
)

plt.show()
</code></pre>
<p>ä»£ç æ‰§è¡Œç»“æœå¦‚å›¾23æ‰€ç¤ºã€‚</p>
<p><code>histtype</code>å¯é€‰å‚æ•°æœ‰ï¼š<code>bar</code> - æŸ±çŠ¶å›¾ï¼Œ<code>step</code> - é˜¶æ¢¯çŠ¶å›¾ï¼Œ<code>stepfilled</code> - é˜¶æ¢¯çŠ¶å›¾å¹¶å¡«å……é¢œè‰²ï¼Œ<code>barstacked</code> - å¤šæ•°æ®å †å æ¡å½¢å›¾ã€‚ï¼ˆå½“é€‰ä¸ºé˜¶æ¢¯çŠ¶å›¾æ—¶ï¼Œ<code>rwidth</code>å‚æ•°æ— æ•ˆï¼‰</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c6e485e92884592bd8f5e629917013e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=PF0%2FezYvcJ2FZW%2FPJP%2FBXI6EBqg%3D" alt="c18.jpg" width="100%" loading="lazy"/></p>
<p>é€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œä½ å¯ä»¥çœ‹åˆ° <code>hist()</code> å‡½æ•°æä¾›äº†ä¸°å¯Œçš„å‚æ•°æ¥è‡ªå®šä¹‰ç›´æ–¹å›¾çš„è§†è§‰æ•ˆæœã€‚å»ºè®®ä½ å°è¯•ä¿®æ”¹å„ä¸ªå‚æ•°ï¼ˆä¾‹å¦‚ <code>histtype</code>ã€<code>color</code>ã€<code>rwidth</code> ç­‰ï¼‰ï¼Œè§‚å¯Ÿå›¾å½¢çš„å˜åŒ–ï¼Œè¿™å¯¹åŠ æ·±ç†è§£éå¸¸æœ‰å¸®åŠ©ã€‚å¦‚æœæœ‰å“ªäº›å‚æ•°è‡ªå·±å®åœ¨ä¸èƒ½ç†è§£ï¼Œå®Œå…¨å¯ä»¥æ±‚åŠ©AIï¼ŒåŠ ä¹‹è‡ªå·±çš„å®è·µï¼Œç†è§£å¹¶ä¸”è¿ç”¨å®ƒå®¾ä¸æ˜¯ä»€ä¹ˆéš¾äº‹ã€‚</p>
<p>ä¸Šé¢çš„ç¤ºä¾‹æ•°æ®é‡è¾ƒå°ï¼Œåœ¨å®é™…åˆ†æä¸­æˆ‘ä»¬å¸¸é¢å¯¹æˆåƒä¸Šä¸‡çš„æ•°æ®ç‚¹ã€‚æ­¤æ—¶ï¼Œç›´æ–¹å›¾èƒ½æ›´æ¸…æ™°åœ°æ­ç¤ºæ•°æ®çš„æ•´ä½“åˆ†å¸ƒè§„å¾‹ã€‚ä¸‹é¢çš„ä¾‹å­ç”Ÿæˆäº†ä¸€ä¸ªåŒ…å« 2000 ä¸ªæ•°æ®ç‚¹çš„åˆæˆæ•°æ®é›†ï¼Œå®ƒç”±ä¸¤ä¸ªä¸åŒçš„æ­£æ€åˆ†å¸ƒæ··åˆè€Œæˆï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç”Ÿæˆæ··åˆæ­£æ€åˆ†å¸ƒæ•°æ®</span>
<span class="hljs-keyword">import</span> random
<span class="hljs-comment"># ç”Ÿæˆå‡å€¼ä¸º 1ã€æ ‡å‡†å·®ä¸º 3 çš„æ­£æ€åˆ†å¸ƒæ ·æœ¬</span>
random_array_1 = [random.gauss(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000</span>)]
<span class="hljs-comment"># ç”Ÿæˆå‡å€¼ä¸º 12ã€æ ‡å‡†å·®ä¸º 4 çš„æ­£æ€åˆ†å¸ƒæ ·æœ¬</span>
random_array_2 = [random.gauss(<span class="hljs-number">12</span>, <span class="hljs-number">4</span>) <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000</span>)]
<span class="hljs-comment"># åˆå¹¶ä¸¤ç»„æ•°æ®</span>
random_array = random_array_1 + random_array_2

fig, ax = plt.subplots(figsize=(<span class="hljs-number">6</span>, <span class="hljs-number">4</span>))
ax.hist(
    random_array,
    bins=<span class="hljs-number">50</span>,           <span class="hljs-comment"># æŒ‡å®šç›´æ–¹å›¾æŸ±å­çš„æ•°é‡ï¼ˆæ­¤å¤„ä¸º 50 æ ¹ï¼‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å‡åŒ€åˆ’åˆ†åŒºé—´</span>
    <span class="hljs-built_in">range</span>=(-<span class="hljs-number">10</span>, <span class="hljs-number">25</span>),   <span class="hljs-comment"># ä»…æ˜¾ç¤º -10 åˆ° 25 èŒƒå›´å†…çš„æ•°æ®</span>
    histtype=<span class="hljs-string">"stepfilled"</span>,
    orientation=<span class="hljs-string">"vertical"</span>,
    rwidth=<span class="hljs-number">0.9</span>,
    color=<span class="hljs-string">"#FFFFFF"</span>,   <span class="hljs-comment"># ç™½è‰²å¡«å……</span>
    edgecolor=<span class="hljs-string">"black"</span>,
    alpha=<span class="hljs-number">0.75</span>,
    label=<span class="hljs-string">"åŒå³°åˆ†å¸ƒç›´æ–¹å›¾"</span>,
    hatch=<span class="hljs-string">'///'</span>,       <span class="hljs-comment"># å¡«å……å›¾æ¡ˆï¼ˆå‚è§ç¬¬å››ç« æ¡å½¢å›¾ç›¸å…³è¯´æ˜ï¼‰</span>
)

plt.show()
</code></pre>
<p>è¯¥ç¨‹åºçš„è¿è¡Œç»“æœå¦‚å›¾24æ‰€ç¤ºã€‚</p>
<h3 data-id="heading-15">ä¸ƒ. ç­‰é«˜çº¿å›¾</h3>
<p>ç­‰é«˜çº¿å›¾å¤§å®¶åº”è¯¥ä¸é™Œç”Ÿï¼Œåœ¨åˆé«˜ä¸­åœ°ç†è¯¾æœ¬ä¸Šç»å¸¸è§åˆ°â€”â€”å®ƒç”¨ä¸€åœˆåœˆçš„é—­åˆæ›²çº¿è¡¨ç¤ºåœ°å½¢çš„èµ·ä¼ï¼ŒåŒä¸€æ›²çº¿ä¸Šçš„æµ·æ‹”é«˜åº¦ç›¸åŒã€‚</p>
<p>åœ¨æ•°å­¦ä¸Šï¼Œç­‰é«˜çº¿å›¾å…¶å®æ˜¯<strong>ä¸‰ç»´å‡½æ•°åœ¨äºŒç»´å¹³é¢ä¸Šçš„æŠ•å½±</strong>ã€‚ç»™å®šä¸€ä¸ªäºŒå…ƒå‡½æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">z = f(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span></span>ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">xy</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal">x</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></span> å¹³é¢ä¸Šç”»å‡ºæ‰€æœ‰æ»¡è¶³ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mi>c</mi></mrow><annotation encoding="application/x-tex">f(x,y)=c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">c</span></span></span></span></span> ï¼ˆ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">c</span></span></span></span></span> ä¸ºå¸¸æ•°ï¼‰çš„æ›²çº¿ï¼Œæ¯ä¸€æ¡æ›²çº¿å°±ç§°ä¸ºä¸€æ¡â€œç­‰é«˜çº¿â€ã€‚å¤šæ¡ç­‰é«˜çº¿ç»„åˆåœ¨ä¸€èµ·ï¼Œå°±èƒ½ç›´è§‚åæ˜ å‡ºå‡½æ•°å€¼çš„å˜åŒ–è¶‹åŠ¿ï¼Œå¦‚å›¾25æ‰€ç¤ºã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4ece7b94e504ba983d2daf158c1202a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=BRkNN1za1K%2BTQEkBsAh7YRhyGIs%3D" alt="c19.jpg" width="100%" loading="lazy"/></p>
<p>ç­‰é«˜çº¿å›¾åœ¨æ—¥å¸¸ç»˜å›¾ä¸­ä½¿ç”¨é¢‘ç‡ä¸ç®—é«˜ï¼Œå› æ­¤æœ¬æ•™ç¨‹ä¸å±•å¼€è¯¦è¿°ï¼ˆæœ‰äº†å‰é¢çš„åŸºç¡€ï¼Œå¦‚æœä½ éœ€è¦æ·±å…¥å­¦ä¹ ï¼Œå®Œå…¨å¯ä»¥å€ŸåŠ© AI å¿«é€ŸæŒæ¡ï¼‰ã€‚ä¸è¿‡ï¼Œç­‰é«˜çº¿å›¾æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„åº”ç”¨ï¼š<strong>ç»˜åˆ¶éšå‡½æ•°å›¾åƒ</strong>ã€‚</p>
<p>æ¯”å¦‚ä¸‹é¢è¿™ä¸ªéšå‡½æ•°æ–¹ç¨‹ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><msup><mi>y</mi><mn>2</mn></msup><mo>âˆ’</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mn>3</mn></msup><mo>=</mo><msup><mi>x</mi><mn>2</mn></msup><msup><mi>y</mi><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">(x^2+y^2-1)^3=x^2y^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0585em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"/><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.0585em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></span></div>
<p>å®ƒå¯¹åº”çš„æ›²çº¿æ˜¯ä¸€ä¸ªå¿ƒå½¢ï¼Œå¾ˆéš¾ç›´æ¥ç”¨ <code>plot()</code> ç”»å‡ºï¼Œå› ä¸ºä½ æ— æ³•ä»ä¸­è§£å‡º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>=</mo><mi>g</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">y=g(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span> çš„æ˜¾å¼è¡¨è¾¾å¼ã€‚è¿™æ—¶å€™ï¼Œå°±éœ€è¦ç­‰é«˜çº¿å›¾äº†ã€‚</p>
<p>ç»˜åˆ¶éšå‡½æ•°çš„æœ¬è´¨å°±å°±æ˜¯å°†æ–¹ç¨‹æ”¹å†™ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">f(x,y) = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span> çš„å½¢å¼ï¼Œå³ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><msup><mi>y</mi><mn>2</mn></msup><mo>âˆ’</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mn>3</mn></msup><mo>âˆ’</mo><msup><mi>x</mi><mn>2</mn></msup><msup><mi>y</mi><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">f(x,y) = (x^2+y^2-1)^3 - x^2y^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0585em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"/><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0585em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></span></div>
<p>ç„¶åç»˜åˆ¶ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span></span> çš„å€¼ä¸º 0 çš„é‚£æ¡ç­‰é«˜çº¿ï¼Œè¿™æ¡çº¿å°±æ˜¯åŸæ–¹ç¨‹çš„è§£æ›²çº¿ã€‚</p>
<p>å¦‚ä¸‹æ˜¯ç»˜åˆ¶ä»£ç ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç»˜åˆ¶ç­‰é«˜çº¿é€šå¸¸éœ€è¦ç”Ÿæˆç½‘æ ¼æ•°æ®ï¼Œnumpyèƒ½æå¤§ç®€åŒ–è¿™ä¸€è¿‡ç¨‹ï¼Œå¦‚æœæ²¡æœ‰numpyçš„è¯ä»£ç å°†ä¼šéå¸¸ç¹çã€‚</span>
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
x = np.linspace(-<span class="hljs-number">1.5</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">300</span>)  <span class="hljs-comment"># xèŒƒå›´ï¼š-1.5åˆ°1.5ï¼Œå–300ä¸ªç‚¹ï¼Œç‚¹è¶Šå¤šç»˜åˆ¶çš„å›¾å°±è¶Šç»†è‡´</span>
y = np.linspace(-<span class="hljs-number">1.5</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">300</span>)  <span class="hljs-comment"># yèŒƒå›´ï¼š-1.5åˆ°1.5</span>
X, Y = np.meshgrid(x, y)  		 <span class="hljs-comment"># ç”Ÿæˆç½‘æ ¼åæ ‡çŸ©é˜µ X, Y</span>

<span class="hljs-comment"># è®¡ç®—å‡½æ•° f(x, y) = (x^2 + y^2 - 1)^3 - x^2 * y^3</span>
F = (X**<span class="hljs-number">2</span> + Y**<span class="hljs-number">2</span> - <span class="hljs-number">1</span>)**<span class="hljs-number">3</span> - X**<span class="hljs-number">2</span> * Y**<span class="hljs-number">3</span>  

<span class="hljs-comment"># åˆ›å»ºå›¾å½¢</span>
fig, ax = plt.subplots(figsize=(<span class="hljs-number">6</span>, <span class="hljs-number">4</span>))

<span class="hljs-comment"># contourå‡½æ•°æ¥ç»˜åˆ¶ F=0 çš„ç­‰é«˜çº¿ï¼Œä¹Ÿå°±æ˜¯æ–¹ç¨‹çš„è§£</span>
<span class="hljs-comment"># levels=[0] è¡¨ç¤ºåªç”»å€¼ä¸º0çš„ç­‰é«˜çº¿</span>
ax.contour(X, Y, F, levels=[<span class="hljs-number">0</span>], colors=<span class="hljs-string">"red"</span>, linewidths=<span class="hljs-number">2</span>,alpha=<span class="hljs-number">0.7</span>)

ax.set_title(<span class="hljs-string">"Closed Curve: $(x^2+y^2-1)^3=x^2y^3$"</span>, fontsize=<span class="hljs-number">11</span>)
ax.grid(<span class="hljs-literal">True</span>, linestyle=<span class="hljs-string">"--"</span>, alpha=<span class="hljs-number">0.7</span>)
ax.axis(<span class="hljs-string">"equal"</span>)   <span class="hljs-comment"># é‡è¦ï¼ä¿è¯ xã€y è½´æ¯”ä¾‹ç›¸åŒï¼Œå›¾å½¢ä¸ä¼šæ‹‰ä¼¸å˜å½¢</span>

plt.show()
</code></pre>
<p>ä»£ç è¿è¡Œç»“æœå¦‚å›¾26æ‰€ç¤ºã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6499eb1b2c747d7a9c4633f27ac19ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=6g2tnrcBYO2ho8Etu3MfRfI7Ado%3D" alt="c20.jpg" width="50%" loading="lazy"/></p>
<h3 data-id="heading-16">å…«. å›¾åƒç±»å›¾è¡¨</h3>
<p>å›¾åƒç±»å›¾è¡¨å…è®¸ä½ ç›´æ¥é€šè¿‡åƒç´ æ•°æ®ç»˜åˆ¶å›¾åƒï¼Œä¹Ÿå¯ä»¥è¯»å–å›¾ç‰‡å¹¶å°†å…¶ç»˜åˆ¶åˆ°å›¾è¡¨ä¸­å……å½“èƒŒæ™¯ï¼Œå›¾åƒç±»å›¾è¡¨çš„åº”ç”¨éå¸¸å¤šï¼Œéå¸¸çµæ´»ã€‚å½“ Matplotlib æ²¡æœ‰æä¾›ä½ æƒ³è¦çš„å›¾è¡¨ç±»å‹æ—¶ï¼Œä½ å®Œå…¨å¯ä»¥åŸºäºå›¾åƒåŠŸèƒ½â€œåˆ›é€ â€ä¸€ä¸ªã€‚è€Œä¸”å®ƒéå¸¸ç®€å•æ˜“å­¦ï¼Œæ ¸å¿ƒå‡½æ•°å‚æ•°ä¸å¤šï¼Œä¸Šæ‰‹è¿…é€Ÿã€‚</p>
<p>å¦‚ä¸‹ä»£ç å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ä»£ç åˆ›å»ºä¸€ä¸ªç®€å•çš„å•é€šé“å›¾åƒå¹¶ä¸”æ˜¾ç¤ºå‡ºæ¥ï¼šï¼ˆâ€œé€šé“â€æ˜¯æ•°å­—å›¾åƒå¤„ç†ä¸­çš„åŸºæœ¬æ¦‚å¿µï¼Œå®ƒä»£è¡¨å›¾åƒä¸­ä¸€ç§åŸºæœ¬çš„é¢œè‰²æˆ–äº®åº¦ä¿¡æ¯ã€‚å¦‚æœä½ ä¸çŸ¥é“ä»€ä¹ˆæ˜¯â€œé€šé“â€ï¼Œé‚£ä¹ˆä½ å¯ä»¥å…ˆè‡ªè¡Œæœç´¢äº†è§£ä¸€ä¸‹ï¼‰</p>
<pre><code class="hljs language-python" lang="python">fig, ax = plt.subplots(figsize=(<span class="hljs-number">6</span>, <span class="hljs-number">4</span>))

<span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªç°åº¦å›¾åƒï¼Œæ¯ä¸ªæ•°å­—å°±ä»£è¡¨ä¸€ä¸ªé¢œè‰²</span>
img = [[<span class="hljs-number">0.0</span>,<span class="hljs-number">0.2</span>,<span class="hljs-number">0.4</span>],
       [<span class="hljs-number">0.6</span>,<span class="hljs-number">0.8</span>,<span class="hljs-number">1.0</span>],
       [<span class="hljs-number">0.0</span>,<span class="hljs-number">0.5</span>,<span class="hljs-number">1.0</span>]]

<span class="hljs-comment"># ä½¿ç”¨ imshow æ˜¾ç¤ºå›¾åƒ</span>
ax.imshow(
    img,
    cmap=<span class="hljs-string">'gray'</span>,          <span class="hljs-comment"># é¢œè‰²æ˜ å°„ï¼š'gray' è¡¨ç¤ºç°åº¦æ˜ å°„ï¼Œæ›´å¤šæ˜ å°„è§„åˆ™è¯¦è§æ•£ç‚¹å›¾ç« èŠ‚</span>
    aspect=<span class="hljs-string">'equal'</span>,       <span class="hljs-comment"># ä¿æŒåƒç´ ä¸ºæ­£æ–¹å½¢ï¼Œé˜²æ­¢å›¾åƒæ‹‰ä¼¸</span>
    interpolation=<span class="hljs-string">'nearest'</span>,<span class="hljs-comment"># å›¾åƒå¹³æ»‘æ’å€¼æ–¹æ³•ï¼Œå¯é€‰ nearest(é»˜è®¤é”¯é½¿ï¼Œé€‚åˆåƒç´ è‰ºæœ¯), bilinear(åŒçº¿æ€§å¹³æ»‘), bicubic(åŒä¸‰æ¬¡å¹³æ»‘), ...</span>
    alpha=<span class="hljs-number">1.0</span>,            <span class="hljs-comment"># ä¸é€æ˜åº¦ï¼Œ1.0 ä¸ºå®Œå…¨ä¸é€æ˜</span>
    extent=(<span class="hljs-number">10.0</span>, <span class="hljs-number">20.0</span>, <span class="hljs-number">5.0</span>, <span class="hljs-number">15.0</span>)  <span class="hljs-comment"># å®šä¹‰å›¾åƒåœ¨åæ ‡è½´ä¸­çš„ä½ç½®å’ŒèŒƒå›´</span>
    <span class="hljs-comment"># extent æ ¼å¼: (å·¦è¾¹ç•Œ, å³è¾¹ç•Œ, ä¸‹è¾¹ç•Œ, ä¸Šè¾¹ç•Œ)</span>
)
</code></pre>
<p>è¿è¡Œç»“æœå¦‚å›¾27æ‰€ç¤ºã€‚ç”±äºæˆ‘ä»¬è®¾ç½®äº† <code>extent=(10, 20, 5, 15)</code>ï¼Œè¿™ä¸ªå°å°çš„ <strong>3x3</strong> å›¾åƒä¼šè¢«â€œæ‹‰ä¼¸â€å¹¶æ”¾ç½®åˆ°åæ ‡ç³»ä¸­ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>âˆˆ</mo><mo stretchy="false">[</mo><mn>10</mn><mo separator="true">,</mo><mn>20</mn><mo stretchy="false">]</mo><mo separator="true">,</mo><mi>y</mi><mo>âˆˆ</mo><mo stretchy="false">[</mo><mn>5</mn><mo separator="true">,</mo><mn>15</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">x \in [10, 20], y \in [5, 15]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"/><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">10</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">20</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">15</span><span class="mclose">]</span></span></span></span></span> çš„çŸ©å½¢åŒºåŸŸå†…ã€‚å¹¶ä¸”ç”±äºä½¿ç”¨äº†<code>gray</code>ç°åº¦æ˜ å°„ï¼Œå› æ­¤å€¼ä¸º0çš„åƒç´ å°±ä¼šæ˜¾ç¤ºä¸ºçº¯é»‘è‰²ï¼Œå€¼ä¸º1çš„åƒç´ å°±ä¼šæ˜¾ç¤ºä¸ºçº¯ç™½è‰²ï¼Œä¸­é—´å€¼å‘ˆç°ç›¸åº”çš„ç°è‰²ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b75ac4a55d8346188adb9b0a3db127db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=U%2Fmgjct2dgxQkbAbJ4IsRdCrPyQ%3D" alt="c21.jpg" width="100%" loading="lazy"/></p>
<p>å½“å›¾åƒæ•°æ®åŒ…å«å¤šä¸ªé€šé“ï¼ˆä¾‹å¦‚ RGB ä¸‰ä¸ªé¢œè‰²é€šé“ï¼‰æ—¶ï¼Œå®ƒå°±ä»£è¡¨äº†å½©è‰²å›¾åƒã€‚æ­¤æ—¶ï¼Œ<code>cmap</code> å‚æ•°å°†ä¸å†ç”Ÿæ•ˆï¼Œå› ä¸ºé¢œè‰²ä¿¡æ¯å·²ç›´æ¥åŒ…å«åœ¨æ•°æ®ä¸­ã€‚å¤„ç†è¿™ç§å¤šç»´æ•°ç»„æ•°æ®ï¼Œä½¿ç”¨ NumPy ä¼šéå¸¸æ–¹ä¾¿ã€‚ä¸‹é¢çš„æ•™ç¨‹é»˜è®¤ä½ å·²ç†Ÿæ‚‰ NumPy çš„åŸºæœ¬æ“ä½œã€‚</p>
<p>è®©æˆ‘ä»¬å°è¯•è¯»å–ä¸€ä¸ªå¤–éƒ¨å›¾ç‰‡æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> matplotlib.image <span class="hljs-keyword">as</span> mpimg  <span class="hljs-comment"># Matplotlib æä¾›çš„å›¾åƒè¯»å–å·¥å…·</span>
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

fig, ax = plt.subplots(figsize=(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>))

<span class="hljs-comment"># è¯»å–å›¾åƒ (æ”¯æŒ JPG, PNG, BMP, TIFF ç­‰å¸¸è§æ ¼å¼)</span>
<span class="hljs-comment"># å‡½æ•°è¿”å›ä¸€ä¸ª NumPy æ•°ç»„ï¼Œåƒç´ å€¼é€šå¸¸è¢«è‡ªåŠ¨å½’ä¸€åŒ–åˆ° [0.0, 1.0] åŒºé—´</span>
img = mpimg.imread(<span class="hljs-string">"../media/icon48.png"</span>)
<span class="hljs-built_in">print</span>(img.shape)
<span class="hljs-comment"># ==== è¾“å‡ºç¤ºä¾‹ ====</span>
<span class="hljs-comment"># (48, 48, 4)</span>
</code></pre>
<p>è¾“å‡ºæ˜¾ç¤ºå›¾åƒæ•°ç»„çš„å½¢çŠ¶ä¸º <code>(48, 48, 4)</code>ã€‚è¿™è¡¨ç¤ºè¿™æ˜¯ä¸€å¼  <strong>48 åƒç´ é«˜ï¼Œ48 åƒç´ å®½</strong> çš„å›¾ç‰‡ï¼Œå¹¶ä¸”æœ‰ <strong>4 ä¸ªé€šé“</strong>ã€‚é€šå¸¸ï¼Œè¿™å¯¹åº”ç€ <strong>RGBA</strong> æ¨¡å¼ï¼šçº¢ã€ç»¿ã€è“ä¸‰ä¸ªé¢œè‰²é€šé“ï¼Œå¤–åŠ ä¸€ä¸ª Alpha é€šé“ï¼ˆæ§åˆ¶é€æ˜åº¦ï¼‰ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥å¯¹å›¾åƒæ•°ç»„è¿›è¡Œæ“ä½œæ¥å®ç°å„ç§æ•ˆæœã€‚ä¾‹å¦‚ï¼Œå…ˆä¸¢å¼ƒ Alpha é€šé“åªä¿ç•™ RGBï¼Œç„¶åè¿›è¡Œåè‰²å¤„ç†ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åªä¿ç•™å‰ä¸‰ä¸ªé€šé“ï¼ˆRGBï¼‰ï¼Œä¸¢å¼ƒ Alpha é€šé“</span>
img_rgb = img[:, :, :<span class="hljs-number">3</span>]

<span class="hljs-comment"># è¿›è¡Œåè‰²æ“ä½œï¼š1 - åŸå€¼</span>
new_img = <span class="hljs-number">1</span> - img_rgb

<span class="hljs-comment"># æ˜¾ç¤ºå¤„ç†åçš„å›¾åƒ</span>
ax.imshow(
    new_img,
    aspect=<span class="hljs-string">"equal"</span>,           <span class="hljs-comment"># ä¿æŒå®½é«˜æ¯”ï¼Œåƒç´ å‘ˆæ­£æ–¹å½¢</span>
    interpolation=<span class="hljs-string">"bicubic"</span>,  <span class="hljs-comment"># ä½¿ç”¨åŒä¸‰æ¬¡æ’å€¼ï¼Œä½¿å›¾åƒçœ‹èµ·æ¥æ›´å¹³æ»‘</span>
    alpha=<span class="hljs-number">1</span>,                  <span class="hljs-comment"># ä¸é€æ˜åº¦</span>
    extent=(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>),      <span class="hljs-comment"># å°†å›¾åƒæ”¾ç½®åœ¨åæ ‡ç³»ä¸­ (0,0) åˆ° (1,1) çš„èŒƒå›´å†…</span>
)
</code></pre>
<p>è¿è¡Œç»“æœå¦‚å›¾28æ‰€ç¤ºã€‚ç”±äºæˆ‘ä»¬åšäº† <code>1 - img</code> çš„åè‰²è®¡ç®—ï¼ŒåŸæœ¬é»‘è‰²çš„åŒºåŸŸå˜æˆäº†ç™½è‰²ï¼Œç™½è‰²å˜æˆäº†é»‘è‰²ï¼Œå¾—åˆ°äº†ä¸€ä¸ªâ€œåº•ç‰‡â€æ•ˆæœã€‚è¿™å±•ç¤ºäº†å›¾åƒæ•°æ®çš„æœ¬è´¨â€”â€”åªæ˜¯ä¸€ä¸ªæ•°å€¼æ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥åƒå¤„ç†æ™®é€šçŸ©é˜µä¸€æ ·å¯¹å®ƒè¿›è¡ŒåŠ å‡ä¹˜é™¤ã€æ»¤æ³¢ã€å˜æ¢ç­‰ä»»ä½•æ•°å­¦è¿ç®—ï¼Œä»è€Œåˆ›é€ å‡ºæ— ç©·çš„è§†è§‰æ•ˆæœã€‚</p>
<p>å›¾åƒåŠŸèƒ½çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒèƒ½ä¸ Matplotlib çš„å…¶ä»–å›¾è¡¨å…ƒç´ æ— ç¼èåˆã€‚ä½ å¯ä»¥æŠŠå›¾ç‰‡å½“ä½œä¸€ä¸ªç‰¹æ®Šçš„â€œå›¾å±‚â€æˆ–â€œæ ‡è®°â€ï¼Œæ”¾ç½®åœ¨åæ ‡ç³»çš„ä»»ä½•ä½ç½®ï¼Œæˆ–è€…è‡ªå·±ç”¨åƒç´ æ“ä½œç»˜åˆ¶ä¸€ä¸ªå›¾å½¢ï¼Œè¿™è®©ä½ èƒ½å¤Ÿåˆ›å»ºå‡ºæå…·ä¸ªæ€§åŒ–å’Œä¿¡æ¯ä¸°å¯Œçš„å¤åˆå›¾è¡¨ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå°†æˆ‘ä»¬è¯»å–çš„å›¾æ ‡ä¸ä¸€ä¸ªæ­£å¼¦å‡½æ•°æ›²çº¿ç»˜åˆ¶åœ¨åŒä¸€åæ ‡ç³»ä¸­ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> matplotlib.image <span class="hljs-keyword">as</span> mpimg
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

fig, ax = plt.subplots(figsize=(<span class="hljs-number">5</span>, <span class="hljs-number">5</span>))

<span class="hljs-comment"># 1. é¦–å…ˆï¼Œç»˜åˆ¶å›¾åƒ</span>
img = mpimg.imread(<span class="hljs-string">"../media/icon48.png"</span>)
ax.imshow(
    img,
    aspect=<span class="hljs-string">"equal"</span>,
    interpolation=<span class="hljs-string">"bicubic"</span>,
    alpha=<span class="hljs-number">0.8</span>,                 <span class="hljs-comment"># è®¾ç½®ä¸€ç‚¹é€æ˜åº¦ï¼Œè®©åé¢çš„æ›²çº¿è‹¥éšè‹¥ç°</span>
    extent=(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>),      <span class="hljs-comment"># å°†å›¾æ ‡æ”¾ç½®åœ¨ x=[4,5], y=[-1,0] çš„çŸ©å½¢åŒºåŸŸ</span>
)

<span class="hljs-comment"># 2. ç„¶åï¼Œåœ¨åŒä¸€ä¸ªåæ ‡ç³»ä¸Šç»˜åˆ¶æ ‡å‡†çš„å‡½æ•°æ›²çº¿</span>
x = np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-number">100</span>)
y = np.sin(x)
ax.plot(x, y, linewidth=<span class="hljs-number">2</span>, label=<span class="hljs-string">'sin(x)'</span>)

<span class="hljs-comment"># 3. è®¾ç½®åæ ‡è½´èŒƒå›´</span>
ax.set_ylim(-<span class="hljs-number">2</span>, <span class="hljs-number">2</span>)
</code></pre>
<p>è¿è¡Œç»“æœå¦‚å›¾29æ‰€ç¤ºã€‚</p>
<h3 data-id="heading-17">ä¹. åŠ¨ç”»æ¸²æŸ“</h3>
<p>Matplotlib ç¡®å®æä¾›äº†åŠ¨ç”»åŠŸèƒ½ï¼Œä¸è¿‡åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¸ä¼šå°†å®ƒä½œä¸ºä¸“ä¸šçš„åŠ¨ç”»å·¥å…·ã€‚å¯¹äºå¤æ‚çš„æ•°å­¦å¯è§†åŒ–åŠ¨ç”»ï¼Œä¸šç•Œæœ‰æ›´ä¸“ä¸šçš„åº“å¯ä»¥é€‰æ‹©ï¼Œæ¯”å¦‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fspace.bilibili.com%2F88461692" target="_blank" title="https://space.bilibili.com/88461692" ref="nofollow noopener noreferrer">3Blue1Brown</a> å¼€æºçš„ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.manim.community%2F" target="_blank" title="https://www.manim.community/" ref="nofollow noopener noreferrer">manim</a></strong>ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f455b50a9d9e40ce84ebbf5f5e515266~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmFycmFzdG9yeQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769621&amp;x-signature=2C4Bqtmh4zHmeHRY4nQqkijnoWI%3D" alt="c22.jpg" width="100%" loading="lazy"/></p>
<p>å°½ç®¡å¦‚æ­¤ï¼Œäº†è§£ Matplotlib åŠ¨ç”»çš„åŸºæœ¬åŸç†è¿˜æ˜¯æœ‰ä»·å€¼çš„ï¼Œå°¤å…¶å½“ä½ éœ€è¦å¿«é€Ÿç”Ÿæˆç®€å•åŠ¨ç”»æˆ–æ•™å­¦æ¼”ç¤ºæ—¶ã€‚</p>
<p>Matplotlib åŠ¨ç”»çš„æ ¸å¿ƒæ€è·¯éå¸¸ç®€å•ï¼š<strong>ç”Ÿæˆä¸€ç³»åˆ—é™æ€å›¾è¡¨ï¼ˆå¸§ï¼‰ï¼Œç„¶åæŒ‰é¡ºåºè¿ç»­æ’­æ”¾</strong>ã€‚æ¯ä¸€å¸§å¯¹åº”æ•°æ®çš„ä¸€ä¸ªçŠ¶æ€ï¼Œå°†è¿™äº›å¸§ä¸²è”èµ·æ¥ï¼Œå°±å½¢æˆäº†åŠ¨ç”»ã€‚</p>
<p>Matplotlib æä¾›ä¸¤ç§ä¸»è¦åŠ¨ç”»æ–¹æ³•ï¼š</p>
<ul>
<li><strong><code>FuncAnimation</code></strong>ï¼šå®æ—¶ç”Ÿæˆæ¯ä¸€å¸§ï¼Œé€‚åˆåŠ¨æ€æ›´æ–°æˆ–æ•°æ®æµåœºæ™¯</li>
<li><strong><code>ArtistAnimation</code></strong>ï¼šé¢„å…ˆç”Ÿæˆæ‰€æœ‰å¸§å¹¶å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œé€‚åˆå¸§æ•°ç¡®å®šã€å†…å®¹ä¸å˜çš„åŠ¨ç”»</li>
</ul>
<p>è€ƒè™‘åˆ°æ˜“å­¦æ€§å’Œå…¸å‹ä½¿ç”¨åœºæ™¯ï¼Œæœ¬æ•™ç¨‹ä¸»è¦ä»‹ç» <code>ArtistAnimation</code> æ–¹å¼ã€‚</p>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šç”±äº <code>ArtistAnimation</code> ä¼šå°†æ‰€æœ‰å¸§ä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œå¦‚æœåŠ¨ç”»å¸§æ•°å¾ˆå¤šæˆ–æ¯å¸§å†…å®¹å¤æ‚ï¼Œå¯èƒ½ä¼šå ç”¨è¾ƒå¤§å†…å­˜ã€‚ä¸è¿‡å¯¹äºä¸€èˆ¬çš„æ•°æ®å¯è§†åŒ–ï¼ˆå‡ ååˆ°å‡ ç™¾å¸§ï¼‰ï¼Œè¿™é€šå¸¸ä¸æ˜¯é—®é¢˜ã€‚</p>
</blockquote>
<p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­ï¼Œç»˜åˆ¶æ­£å¼¦æ³¢é€æ¸å¹³ç§»çš„åŠ¨ç”»ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> matplotlib.animation <span class="hljs-keyword">as</span> animation
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

fig, ax = plt.subplots()

<span class="hljs-comment"># åæ ‡è½´çš„åŸºæœ¬è®¾ç½®ï¼ˆåœ¨å¾ªç¯å¤–é¢è®¾ç½®ï¼‰</span>
ax.set_xlim(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>*np.pi)
ax.set_xlabel(<span class="hljs-string">'x'</span>)
ax.set_ylabel(<span class="hljs-string">'y'</span>)
ax.set_title(<span class="hljs-string">'sin_Animation'</span>)
ax.grid(<span class="hljs-literal">True</span>)

frames = []  <span class="hljs-comment"># å­˜å‚¨æ¯å¸§çš„ Artist åˆ—è¡¨</span>
x = np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>*np.pi, <span class="hljs-number">100</span>)

<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">50</span>): <span class="hljs-comment"># ç”Ÿæˆ50å¸§åŠ¨ç”»</span>
    <span class="hljs-comment"># æ¯å¸§ç»˜åˆ¶æ–°å†…å®¹ï¼Œè¿”å›çš„ Artists åŠ å…¥å½“å‰å¸§åˆ—è¡¨</span>
    line, = ax.plot(x, np.sin(x + i*<span class="hljs-number">0.1</span>), color=<span class="hljs-string">'blue'</span>)
    text = ax.text(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.9</span>, <span class="hljs-string">f'Frame <span class="hljs-subst">{i}</span>'</span>, transform=ax.transAxes)
    
    <span class="hljs-comment"># å°†å½“å‰å¸§ä¸­ä¼šå˜åŒ–çš„å…ƒç´ ï¼ˆline å’Œ textï¼‰åŠ å…¥åˆ—è¡¨</span>
    frames.append([line, text]) 

<span class="hljs-comment"># åˆ›å»ºåŠ¨ç”»å¯¹è±¡</span>
ani = animation.ArtistAnimation(
    fig, 
    frames,           <span class="hljs-comment"># é¢„å…ˆç”Ÿæˆçš„å¸§åºåˆ—</span>
    interval=<span class="hljs-number">40</span>,      <span class="hljs-comment"># æ¯å¸§é—´éš” 40 æ¯«ç§’</span>
    repeat=<span class="hljs-literal">True</span>,      <span class="hljs-comment"># å¾ªç¯æ’­æ”¾</span>
    blit=<span class="hljs-literal">True</span>         <span class="hljs-comment"># å¯ç”¨åŒç¼“å†²ä¼˜åŒ–ï¼Œæå‡æ¸²æŸ“æ€§èƒ½</span>
)

<span class="hljs-comment"># ä¿å­˜ä¸º GIF æ–‡ä»¶ï¼ˆä¹Ÿå¯ä¿å­˜ä¸º MP4ï¼Œä½†éœ€è¦å®‰è£… ffmpegï¼‰</span>
ani.save(
    <span class="hljs-string">'sine_animation.gif'</span>,  <span class="hljs-comment"># æ–‡ä»¶å</span>
    writer=<span class="hljs-string">'pillow'</span>,       <span class="hljs-comment"># ä½¿ç”¨ Pillow åº“å†™å…¥ GIF</span>
    fps=<span class="hljs-number">25</span>,                <span class="hljs-comment"># å¸§ç‡ï¼ˆä¸ interval=40 å¯¹åº”ï¼‰</span>
    dpi=<span class="hljs-number">100</span>                <span class="hljs-comment"># è¾“å‡ºåˆ†è¾¨ç‡</span>
)

plt.show()
</code></pre>
<h3 data-id="heading-18">å. 3Då›¾è¡¨</h3>
<p>Matplotlib æœ¬è´¨ä¸Šæ˜¯äºŒç»´ç»˜å›¾åº“ï¼Œå…¶ä¸‰ç»´åŠŸèƒ½æ˜¯é€šè¿‡<strong>ä¸‰ç»´æ•°æ®æŠ•å½±åˆ°äºŒç»´å¹³é¢</strong>ï¼Œå¹¶é…åˆæ·±åº¦æ’åºï¼ˆz-orderï¼‰æ¥å®ç°çš„ã€‚è¿™ç§æ–¹å¼é€‚åˆç®€å•çš„ä¸‰ç»´å¯è§†åŒ–ï¼Œä½†åœ¨å¤„ç†å¤æ‚ä¸‰ç»´åœºæ™¯æ—¶å­˜åœ¨ä¸€å®šå±€é™ã€‚å®ƒäº¤äº’æ€§æ¯”è¾ƒå¼±ï¼Œæ—‹è½¬ã€ç¼©æ”¾ä¸å¦‚ä¸“ä¸šä¸‰ç»´è½¯ä»¶æµç•…ã€‚å®ƒæ¸²æŸ“æ•ˆæœæœ‰é™,éš¾ä»¥å®ç°å¤æ‚å…‰ç…§ã€é€æ˜ä½“ç»˜åˆ¶ã€æµåœºæ¨¡æ‹Ÿç­‰é«˜çº§ç‰¹æ•ˆã€‚å¹¶ä¸”å½“æ•°æ®é‡è¿‡å¤§æ—¶ï¼Œæ¸²æŸ“ä¼šå˜æ…¢å¾ˆå¤šã€‚</p>
<p>å› æ­¤å¯¹äºå¤æ‚ä¸“ä¸šçš„3Då›¾è¡¨ç»˜åˆ¶å¹¶ä¸æ¨èä½¿ç”¨matplotlibè¿›è¡Œç»˜åˆ¶ï¼Œä½†æ˜¯å¯¹äºç®€å•çš„3Dæ¼”ç¤ºMatplotlib è¿˜æ˜¯å¯ä»¥åšåˆ°çš„ï¼Œæ¯”å¦‚ç®€å•çš„3Dæ›²é¢å›¾ï¼Œçº¿æ¡†å›¾ï¼Œ3Dçº¿å›¾ï¼Œ3Dæ•£ç‚¹å›¾ç­‰</p>
<p>å¦‚æœä½ éœ€è¦ä¸“ä¸šçš„3Dç§‘ç ”ç»˜å›¾è½¯ä»¶/pythonåº“ï¼Œæ¨èä½¿ç”¨<strong>Mayavi</strong></p>
<h3 data-id="heading-19">åä¸€. å…¶å®ƒå›¾è¡¨</h3>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»ç³»ç»Ÿæ€§åœ°è®²è§£äº† Matplotlib ä¸­æœ€æ ¸å¿ƒã€æœ€é«˜é¢‘çš„å›¾è¡¨ç±»å‹å’Œç»˜å›¾é€»è¾‘ã€‚ç„¶è€Œï¼Œå®ƒçš„èƒ½åŠ›è¿œä¸æ­¢äºæ­¤ã€‚å°±åƒä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„å·¥å…·ç®±ï¼Œé™¤äº†å¸¸ç”¨çš„â€œæ‰³æ‰‹â€å’Œâ€œèºä¸åˆ€â€ï¼Œå®ƒè¿˜æä¾›äº†è®¸å¤šé’ˆå¯¹ç‰¹å®šåœºæ™¯çš„å·¥å…·ï¼š</p>
<p>æ¯”å¦‚ç»˜åˆ¶ç®€å•å›¾å½¢ï¼ˆåœ†å½¢ï¼Œè±å½¢ï¼ŒçŸ©å½¢ç­‰ï¼‰ï¼Œæåæ ‡ç³»ï¼Œç®±å½¢å›¾ï¼Œé¥¼å›¾ï¼Œå…­è¾¹å½¢åˆ†ç®±å›¾ï¼ŒçŸ¢é‡åœºå›¾ï¼Œæµçº¿å›¾ï¼Œå°æç´å›¾ï¼Œæ•°æ®è¡¨æ ¼...</p>
<p><strong>ä½ ä¸éœ€è¦ç«‹å³æŒæ¡æ‰€æœ‰è¿™äº›å†…å®¹ã€‚</strong> æœ¬ç³»åˆ—æ•™ç¨‹çš„æ ¸å¿ƒç›®æ ‡ï¼Œæ˜¯ä¸ºä½ æ„å»ºä¸€ä¸ªåšå®ã€é€šç”¨çš„ç»˜å›¾æ€ç»´æ¡†æ¶å’Œæ“ä½œåŸºç¡€ã€‚ä½ ç°åœ¨å·²ç»æ‹¥æœ‰äº†é˜…è¯»å®˜æ–¹æ–‡æ¡£ã€ç†è§£ç¤ºä¾‹ä»£ç å¹¶å¿«é€Ÿä¸Šæ‰‹çš„èƒ½åŠ›ã€‚</p>
<p>å½“ä½ æœªæ¥çš„é¡¹ç›®éœ€è¦æŸä¸ªç‰¹å®šç±»å‹çš„å›¾è¡¨æ—¶ï¼Œå®Œå…¨å¯ä»¥å¸¦ç€æ˜ç¡®çš„ç›®æ ‡å»å®šå‘å­¦ä¹ ã€‚åœ¨ä½ åšå®çš„åŸºç¡€ä¸Šï¼Œå†è®©AIæ¥è¾…åŠ©å­¦ä¹ ç†è§£ï¼Œé©¬ä¸ŠæŒæ¡ä¸€ä¸ªæ–°ç±»å‹çš„å›¾è¡¨ä¸æ˜¯ä»€ä¹ˆéš¾äº‹ã€‚</p>
<p>è®°ä½ï¼Œ<strong>å·¥å…·ä¸ºæ€æƒ³æœåŠ¡</strong>ã€‚æœ€åï¼Œæˆ‘æƒ³è¯´ï¼Œä¸è®ºä½ æ˜¯ä»€ä¹ˆä¸“ä¸šï¼Œåªè¦æ˜¯æ‰“ç®—å­¦ä¹ pythonï¼Œé‚£ä¹ˆpandasï¼Œmatplotlibï¼Œnumpyè¿™ä¸‰ä¸ªåº“æœ€å¥½éƒ½å»å­¦ä¹ ä¸€ä¸‹ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ä½ åœ¨Pythonä¸–ç•Œä¸­ï¼Œå¤„ç†ã€åˆ†æå’Œå‘ˆç°<strong>æ•°æ®</strong>çš„<strong>åŸºç¡€èƒ½åŠ›ä¸‰è§’</strong>ã€‚æ— è®ºä½ æ˜¯è¿›è¡Œå­¦æœ¯ç ”ç©¶ã€å•†ä¸šåˆ†æã€ç½‘ç«™å¼€å‘ï¼Œè¿˜æ˜¯å­¦ä¹ äººå·¥æ™ºèƒ½ï¼Œå‡ ä¹æ‰€æœ‰çš„æ•°æ®ä»»åŠ¡éƒ½ç»•ä¸å¼€è¿™ä¸‰ä¸ªåº“ä»¥åŠå®ƒä»¬çš„è®¾è®¡æ€æƒ³ã€‚å®ƒä»¬æ„æˆäº†ä¸€ä¸ªä»æ•°æ®åˆ°è§è§£çš„å®Œæ•´å·¥ä½œæµï¼ŒæŒæ¡å¹¶ä¸”èƒ½ç†Ÿç»ƒä½¿ç”¨å®ƒä»¬ï¼Œä½ çš„Pythonå¯ä»¥è¯´æ˜¯çœŸæ­£çš„å…¥é—¨äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android App å¯åŠ¨æµç¨‹ ç¬”è®°]]></title>    <link>https://juejin.cn/post/7602454700504170537</link>    <guid>https://juejin.cn/post/7602454700504170537</guid>    <pubDate>2026-02-04T01:08:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602454700504170537" data-draft-id="7602497125268242438" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android App å¯åŠ¨æµç¨‹  ç¬”è®°"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-02-04T01:08:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿ƒæºxinyuan"/> <meta itemprop="url" content="https://juejin.cn/user/4283353029151694"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android App å¯åŠ¨æµç¨‹  ç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4283353029151694/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿ƒæºxinyuan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T01:08:33.000Z" title="Wed Feb 04 2026 01:08:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Android App å¯åŠ¨æµç¨‹è¯¦è§£</h2>
<p>Android åº”ç”¨å¯åŠ¨æ˜¯ä¸€ä¸ªå¤æ‚çš„è¿‡ç¨‹ï¼Œæ¶‰åŠå¤šä¸ªç³»ç»Ÿå’Œåº”ç”¨ç»„ä»¶ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†çš„å¯åŠ¨æµç¨‹åˆ†æï¼š</p>
<h3 data-id="heading-1">ä¸€ã€ç‚¹å‡»å›¾æ ‡åˆ°è¿›ç¨‹åˆ›å»º</h3>
<h4 data-id="heading-2"><strong>1. Launcher ç‚¹å‡»å¯åŠ¨</strong></h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Launcher æºç ç®€åŒ–æµç¨‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">LauncherActivity</span> <span class="hljs-title">extends</span> <span class="hljs-title">Activity</span> {
    void onClick(AppIcon icon) {
        <span class="hljs-comment">// åˆ›å»ºå¯åŠ¨Intent</span>
        Intent intent = new Intent(Intent.ACTION_MAIN);
        intent.addCategory(Intent.CATEGORY_LAUNCHER);
        intent.setComponent(new ComponentName(packageName, activityName));
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        
        <span class="hljs-comment">// é€šè¿‡ActivityManagerServiceå¯åŠ¨</span>
        ActivityManager.getService().startActivity(...);
    }
}
</code></pre>
<h4 data-id="heading-3"><strong>2. ç³»ç»ŸæœåŠ¡å¤„ç†æµç¨‹</strong></h4>
<pre><code class="hljs language-scss" lang="scss">ç”¨æˆ·ç‚¹å‡»å›¾æ ‡ 
    â†“
Launcherè¿›ç¨‹è°ƒç”¨<span class="hljs-built_in">startActivity</span>()
    â†“
é€šè¿‡Binder IPCè°ƒç”¨ActivityManagerService
    â†“
AMSæ£€æŸ¥æƒé™ã€è¿›ç¨‹çŠ¶æ€ç­‰
    â†“
å¦‚æœåº”ç”¨è¿›ç¨‹ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°è¿›ç¨‹
    â†“
é€šè¿‡Zygoteè¿›ç¨‹forkæ–°è¿›ç¨‹
    â†“
æ–°è¿›ç¨‹è°ƒç”¨ActivityThread<span class="hljs-selector-class">.main</span>()
</code></pre>
<h3 data-id="heading-4">äºŒã€Zygote è¿›ç¨‹åˆ›å»º</h3>
<h4 data-id="heading-5"><strong>1. Zygote æœºåˆ¶</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Zygoteè¿›ç¨‹åˆ›å»ºåº”ç”¨è¿›ç¨‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ZygoteProcess</span> {
    <span class="hljs-comment">// forkæ–°è¿›ç¨‹</span>
    Process.ProcessStartResult <span class="hljs-title function_">startViaZygote</span><span class="hljs-params">(...)</span> {
        <span class="hljs-comment">// å‡†å¤‡å‚æ•°</span>
        ArrayList&lt;String&gt; args = computeArgsForZygote(...);
        
        <span class="hljs-comment">// è°ƒç”¨Zygoteè¿›ç¨‹fork</span>
        <span class="hljs-keyword">return</span> zygoteSendArgsAndGetResult(openZygoteSocketIfNeeded(), args);
    }
}

<span class="hljs-comment">// ZygoteServerå¤„ç†forkè¯·æ±‚</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ZygoteServer</span> {
    Runnable <span class="hljs-title function_">forkAndSpecialize</span><span class="hljs-params">(...)</span> {
        <span class="hljs-comment">// forkå­è¿›ç¨‹</span>
        pid = Zygote.forkAndSpecialize(...);
        
        <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) {
            <span class="hljs-comment">// å­è¿›ç¨‹ï¼šè®¾ç½®ç¯å¢ƒå¹¶è¿”å›</span>
            handleChildProc(parsedArgs, descriptors, childPipeFd);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// çˆ¶è¿›ç¨‹ï¼šç­‰å¾…å­è¿›ç¨‹</span>
            handleParentProc(pid, descriptors, serverPipeFd);
        }
    }
}
</code></pre>
<h4 data-id="heading-6"><strong>2. åº”ç”¨è¿›ç¨‹åˆ›å»ºåçš„åˆå§‹åŒ–</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åº”ç”¨è¿›ç¨‹å…¥å£ç‚¹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ActivityThread</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// 1. å‡†å¤‡ä¸»çº¿ç¨‹Looper</span>
        Looper.prepareMainLooper();
        
        <span class="hljs-comment">// 2. åˆ›å»ºActivityThreadå®ä¾‹</span>
        <span class="hljs-type">ActivityThread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ActivityThread</span>();
        
        <span class="hljs-comment">// 3. ç»‘å®šåˆ°AMS</span>
        thread.attach(<span class="hljs-literal">false</span>, startSeq);
        
        <span class="hljs-comment">// 4. è·å–ä¸»çº¿ç¨‹Handler</span>
        <span class="hljs-keyword">if</span> (sMainThreadHandler == <span class="hljs-literal">null</span>) {
            sMainThreadHandler = thread.getHandler();
        }
        
        <span class="hljs-comment">// 5. å¼€å§‹æ¶ˆæ¯å¾ªç¯</span>
        Looper.loop();
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">attach</span><span class="hljs-params">(<span class="hljs-type">boolean</span> system, <span class="hljs-type">long</span> startSeq)</span> {
        <span class="hljs-comment">// è·å–AMSä»£ç†</span>
        <span class="hljs-keyword">final</span> <span class="hljs-type">IActivityManager</span> <span class="hljs-variable">mgr</span> <span class="hljs-operator">=</span> ActivityManager.getService();
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ç»‘å®šåº”ç”¨è¿›ç¨‹åˆ°AMS</span>
            mgr.attachApplication(mAppThread, startSeq);
        } <span class="hljs-keyword">catch</span> (RemoteException ex) {
            <span class="hljs-keyword">throw</span> ex.rethrowFromSystemServer();
        }
    }
}
</code></pre>
<h3 data-id="heading-7">ä¸‰ã€Application åˆ›å»ºå’Œåˆå§‹åŒ–</h3>
<h4 data-id="heading-8"><strong>1. Application åˆ›å»ºæµç¨‹</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ActivityThread</span> {
    <span class="hljs-comment">// å¤„ç†ç»‘å®šåº”ç”¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleBindApplication</span><span class="hljs-params">(AppBindData data)</span> {
        <span class="hljs-comment">// 1. è®¾ç½®è¿›ç¨‹å</span>
        Process.setArgV0(data.processName);
        
        <span class="hljs-comment">// 2. åˆ›å»ºContextImpl</span>
        <span class="hljs-type">ContextImpl</span> <span class="hljs-variable">appContext</span> <span class="hljs-operator">=</span> ContextImpl.createAppContext(<span class="hljs-built_in">this</span>, data.info);
        
        <span class="hljs-comment">// 3. åˆ›å»ºInstrumentation</span>
        mInstrumentation = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Instrumentation</span>();
        
        <span class="hljs-comment">// 4. åˆ›å»ºApplication</span>
        <span class="hljs-type">Application</span> <span class="hljs-variable">app</span> <span class="hljs-operator">=</span> data.info.makeApplication(data.restrictedBackupMode, <span class="hljs-literal">null</span>);
        
        <span class="hljs-comment">// 5. è®¾ç½®Applicationçš„Context</span>
        app.setBaseContext(appContext);
        
        <span class="hljs-comment">// 6. è°ƒç”¨Application.onCreate()</span>
        mInstrumentation.callApplicationOnCreate(app);
    }
}

<span class="hljs-comment">// LoadedApkè´Ÿè´£åˆ›å»ºApplicationå®ä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoadedApk</span> {
    <span class="hljs-keyword">public</span> Application <span class="hljs-title function_">makeApplication</span><span class="hljs-params">(<span class="hljs-type">boolean</span> forceDefaultAppClass, 
                                      Instrumentation instrumentation)</span> {
        <span class="hljs-comment">// å¦‚æœApplicationå·²ç»å­˜åœ¨ï¼Œç›´æ¥è¿”å›</span>
        <span class="hljs-keyword">if</span> (mApplication != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> mApplication;
        }
        
        <span class="hljs-comment">// è·å–Applicationç±»å</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">appClass</span> <span class="hljs-operator">=</span> mApplicationInfo.className;
        <span class="hljs-keyword">if</span> (forceDefaultAppClass || appClass == <span class="hljs-literal">null</span>) {
            appClass = <span class="hljs-string">"android.app.Application"</span>;
        }
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. åˆ›å»ºClassLoader</span>
            <span class="hljs-type">ClassLoader</span> <span class="hljs-variable">cl</span> <span class="hljs-operator">=</span> getClassLoader();
            
            <span class="hljs-comment">// 2. åˆ›å»ºApplication Context</span>
            <span class="hljs-type">ContextImpl</span> <span class="hljs-variable">appContext</span> <span class="hljs-operator">=</span> ContextImpl.createAppContext(mActivityThread, <span class="hljs-built_in">this</span>);
            
            <span class="hljs-comment">// 3. å®ä¾‹åŒ–Application</span>
            <span class="hljs-type">Application</span> <span class="hljs-variable">app</span> <span class="hljs-operator">=</span> mActivityThread.mInstrumentation
                .newApplication(cl, appClass, appContext);
            
            <span class="hljs-comment">// 4. è®¾ç½®åˆ°Context</span>
            appContext.setOuterContext(app);
            
            <span class="hljs-comment">// 5. æ·»åŠ åˆ°ActivityThread</span>
            mActivityThread.mAllApplications.add(app);
            mApplication = app;
            
            <span class="hljs-keyword">return</span> app;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(...);
        }
    }
}
</code></pre>
<h4 data-id="heading-9"><strong>2. Application.onCreate() è°ƒç”¨æ—¶æœº</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Instrumentation è°ƒç”¨ Application.onCreate()</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Instrumentation</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">callApplicationOnCreate</span><span class="hljs-params">(Application app)</span> {
        <span class="hljs-comment">// è¿™å°±æ˜¯æˆ‘ä»¬é‡å†™çš„onCreate()è¢«è°ƒç”¨çš„åœ°æ–¹</span>
        app.onCreate();
    }
}
</code></pre>
<h3 data-id="heading-10">å››ã€Activity å¯åŠ¨æµç¨‹</h3>
<h4 data-id="heading-11"><strong>1. AMS è°ƒåº¦ Activity å¯åŠ¨</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ActivityManagerService è°ƒåº¦Activityå¯åŠ¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ActivityManagerService</span> {
    <span class="hljs-comment">// å¯åŠ¨Activityçš„æœ€ç»ˆå…¥å£</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-title function_">startActivity</span><span class="hljs-params">(...)</span> {
        <span class="hljs-keyword">return</span> startActivityAsUser(...);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">startActivityAsUser</span><span class="hljs-params">(...)</span> {
        <span class="hljs-comment">// 1. æƒé™æ£€æŸ¥</span>
        enforceNotIsolatedCaller(<span class="hljs-string">"startActivity"</span>);
        
        <span class="hljs-comment">// 2. è°ƒç”¨ActivityStarter</span>
        <span class="hljs-keyword">return</span> mActivityStartController.obtainStarter(...)
            .setCaller(caller)
            .setIntent(intent)
            .setResolvedType(resolvedType)
            .execute();
    }
}

<span class="hljs-comment">// ActivityStarter å®é™…æ‰§è¡Œå¯åŠ¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ActivityStarter</span> {
    <span class="hljs-type">int</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è§£æIntent</span>
            <span class="hljs-type">ResolveInfo</span> <span class="hljs-variable">rInfo</span> <span class="hljs-operator">=</span> mSupervisor.resolveIntent(...);
            
            <span class="hljs-comment">// æ”¶é›†ä¿¡æ¯</span>
            <span class="hljs-type">ActivityInfo</span> <span class="hljs-variable">aInfo</span> <span class="hljs-operator">=</span> mSupervisor.resolveActivity(...);
            
            <span class="hljs-comment">// å¯åŠ¨Activity</span>
            <span class="hljs-keyword">return</span> startActivityUnchecked(...);
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// æ¸…ç†</span>
            onExecutionComplete();
        }
    }
}
</code></pre>
<h4 data-id="heading-12"><strong>2. åº”ç”¨è¿›ç¨‹æ¥æ”¶å¯åŠ¨è¯·æ±‚</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ActivityThread</span> {
    <span class="hljs-comment">// å¤„ç†å¯åŠ¨Activityçš„è¯·æ±‚</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">H</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Handler</span> {
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleMessage</span><span class="hljs-params">(Message msg)</span> {
            <span class="hljs-keyword">switch</span> (msg.what) {
                <span class="hljs-keyword">case</span> LAUNCH_ACTIVITY:
                    handleLaunchActivity((ActivityClientRecord) msg.obj, <span class="hljs-string">"LAUNCH_ACTIVITY"</span>);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> RESUME_ACTIVITY:
                    handleResumeActivity(...);
                    <span class="hljs-keyword">break</span>;
            }
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleLaunchActivity</span><span class="hljs-params">(ActivityClientRecord r, String reason)</span> {
        <span class="hljs-comment">// 1. åˆ›å»ºActivity</span>
        <span class="hljs-type">Activity</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> performLaunchActivity(r, <span class="hljs-literal">null</span>);
        
        <span class="hljs-keyword">if</span> (a != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// 2. è°ƒç”¨onStart(), onResume()</span>
            handleResumeActivity(r.token, <span class="hljs-literal">false</span>, r.isForward, reason);
        }
    }
}
</code></pre>
<h4 data-id="heading-13"><strong>3. Activity å®ä¾‹åˆ›å»ºå’Œç”Ÿå‘½å‘¨æœŸ</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ActivityThread</span> {
    <span class="hljs-keyword">private</span> Activity <span class="hljs-title function_">performLaunchActivity</span><span class="hljs-params">(ActivityClientRecord r, Intent customIntent)</span> {
        <span class="hljs-comment">// 1. è·å–ActivityInfo</span>
        <span class="hljs-type">ActivityInfo</span> <span class="hljs-variable">aInfo</span> <span class="hljs-operator">=</span> r.activityInfo;
        
        <span class="hljs-comment">// 2. åˆ›å»ºContext</span>
        <span class="hljs-type">ContextImpl</span> <span class="hljs-variable">appContext</span> <span class="hljs-operator">=</span> createBaseContextForActivity(r);
        
        <span class="hljs-comment">// 3. åˆ›å»ºActivityå®ä¾‹</span>
        <span class="hljs-type">Activity</span> <span class="hljs-variable">activity</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">try</span> {
            java.lang.<span class="hljs-type">ClassLoader</span> <span class="hljs-variable">cl</span> <span class="hljs-operator">=</span> appContext.getClassLoader();
            activity = mInstrumentation.newActivity(
                cl, component.getClassName(), r.intent);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// å¤„ç†å¼‚å¸¸</span>
        }
        
        <span class="hljs-comment">// 4. åˆ›å»ºApplicationï¼ˆå¦‚æœè¿˜æ²¡åˆ›å»ºï¼‰</span>
        <span class="hljs-type">Application</span> <span class="hljs-variable">app</span> <span class="hljs-operator">=</span> r.packageInfo.makeApplication(<span class="hljs-literal">false</span>, mInstrumentation);
        
        <span class="hljs-comment">// 5. è°ƒç”¨Activity.attach()</span>
        activity.attach(appContext, <span class="hljs-built_in">this</span>, getInstrumentation(), r.token,
            r.ident, app, r.intent, r.activityInfo, ...);
        
        <span class="hljs-comment">// 6. è®¾ç½®ä¸»é¢˜</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">theme</span> <span class="hljs-operator">=</span> r.activityInfo.getThemeResource();
        <span class="hljs-keyword">if</span> (theme != <span class="hljs-number">0</span>) {
            activity.setTheme(theme);
        }
        
        <span class="hljs-comment">// 7. è°ƒç”¨Activity.onCreate()</span>
        <span class="hljs-keyword">if</span> (r.isPersistable()) {
            mInstrumentation.callActivityOnCreate(activity, r.state, r.persistentState);
        } <span class="hljs-keyword">else</span> {
            mInstrumentation.callActivityOnCreate(activity, r.state);
        }
        
        <span class="hljs-keyword">return</span> activity;
    }
}

<span class="hljs-comment">// Instrumentation è°ƒç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Instrumentation</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">callActivityOnCreate</span><span class="hljs-params">(Activity activity, Bundle icicle)</span> {
        <span class="hljs-comment">// é¢„åˆ›å»º</span>
        prePerformCreate(activity);
        
        <span class="hljs-comment">// è°ƒç”¨Activity.onCreate()</span>
        activity.performCreate(icicle);
        
        <span class="hljs-comment">// ååˆ›å»º</span>
        postPerformCreate(activity);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">callActivityOnStart</span><span class="hljs-params">(Activity activity)</span> {
        activity.performStart();
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">callActivityOnResume</span><span class="hljs-params">(Activity activity)</span> {
        activity.performResume();
    }
}
</code></pre>
<h3 data-id="heading-14">äº”ã€ç•Œé¢æ¸²æŸ“æµç¨‹</h3>
<h4 data-id="heading-15"><strong>1. Window å’Œ View åˆ›å»º</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Activity.attach() ä¸­åˆ›å»ºWindow</span>
<span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">attach</span><span class="hljs-params">(Context context, ...)</span> {
    <span class="hljs-comment">// 1. åˆ›å»ºWindow</span>
    mWindow = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PhoneWindow</span>(<span class="hljs-built_in">this</span>, window, activityConfigCallback);
    
    <span class="hljs-comment">// 2. è®¾ç½®WindowManager</span>
    mWindow.setWindowManager(
        (WindowManager)context.getSystemService(Context.WINDOW_SERVICE),
        mToken, mComponent.flattenToString(),
        (info.flags &amp; ActivityInfo.FLAG_HARDWARE_ACCELERATED) != <span class="hljs-number">0</span>);
    
    <span class="hljs-comment">// 3. è·å–WindowManager</span>
    mWindowManager = mWindow.getWindowManager();
}

<span class="hljs-comment">// Activity.onCreate() ä¸­è®¾ç½®ContentView</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
    <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
    
    <span class="hljs-comment">// 1. åˆ›å»ºDecorView</span>
    mWindow.getDecorView();
    
    <span class="hljs-comment">// 2. è®¾ç½®å†…å®¹è§†å›¾</span>
    setContentView(R.layout.activity_main);
    
    <span class="hljs-comment">// 3. åˆå§‹åŒ–View</span>
    initViews();
}

<span class="hljs-comment">// setContentView() å®ç°</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setContentView</span><span class="hljs-params">(<span class="hljs-meta">@LayoutRes</span> <span class="hljs-type">int</span> layoutResID)</span> {
    <span class="hljs-comment">// 1. è·å–Window</span>
    getWindow().setContentView(layoutResID);
    
    <span class="hljs-comment">// 2. åˆå§‹åŒ–ActionBar</span>
    initWindowDecorActionBar();
}

<span class="hljs-comment">// PhoneWindow.setContentView()</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setContentView</span><span class="hljs-params">(<span class="hljs-type">int</span> layoutResID)</span> {
    <span class="hljs-comment">// 1. å¦‚æœDecorViewä¸å­˜åœ¨ï¼Œåˆ›å»ºå®ƒ</span>
    <span class="hljs-keyword">if</span> (mContentParent == <span class="hljs-literal">null</span>) {
        installDecor();
    }
    
    <span class="hljs-comment">// 2. åŠ è½½å¸ƒå±€</span>
    mLayoutInflater.inflate(layoutResID, mContentParent);
}
</code></pre>
<h4 data-id="heading-16"><strong>2. ViewRootImpl å’Œç•Œé¢æ¸²æŸ“</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ActivityThread.handleResumeActivity()</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleResumeActivity</span><span class="hljs-params">(IBinder token, ...)</span> {
    <span class="hljs-comment">// 1. è°ƒç”¨Activity.onResume()</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">Activity</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> r.activity;
    a.performResume();
    
    <span class="hljs-comment">// 2. è·å–DecorView</span>
    <span class="hljs-type">View</span> <span class="hljs-variable">decor</span> <span class="hljs-operator">=</span> r.window.getDecorView();
    
    <span class="hljs-comment">// 3. è®¾ç½®DecorViewä¸ºä¸å¯è§</span>
    decor.setVisibility(View.INVISIBLE);
    
    <span class="hljs-comment">// 4. è·å–ViewManagerï¼ˆWindowManagerï¼‰</span>
    <span class="hljs-type">ViewManager</span> <span class="hljs-variable">wm</span> <span class="hljs-operator">=</span> a.getWindowManager();
    
    <span class="hljs-comment">// 5. æ·»åŠ DecorViewåˆ°Window</span>
    wm.addView(decor, l);
    
    <span class="hljs-comment">// 6. è®¾ç½®DecorViewä¸ºå¯è§</span>
    decor.setVisibility(View.VISIBLE);
    
    <span class="hljs-comment">// 7. ç„¦ç‚¹å¤„ç†</span>
    a.makeVisible();
}

<span class="hljs-comment">// WindowManagerImpl.addView()</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addView</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> View view, <span class="hljs-meta">@NonNull</span> ViewGroup.LayoutParams params)</span> {
    <span class="hljs-comment">// åˆ›å»ºViewRootImpl</span>
    <span class="hljs-type">ViewRootImpl</span> <span class="hljs-variable">root</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ViewRootImpl</span>(view.getContext(), display);
    
    <span class="hljs-comment">// è®¾ç½®View</span>
    view.setLayoutParams(wparams);
    
    <span class="hljs-comment">// æ·»åŠ åˆ°åˆ—è¡¨</span>
    mViews.add(view);
    mRoots.add(root);
    mParams.add(wparams);
    
    <span class="hljs-comment">// è®¾ç½®ViewRootImpl</span>
    root.setView(view, wparams, panelParentView);
}
</code></pre>
<h4 data-id="heading-17"><strong>3. ç•Œé¢ç»˜åˆ¶æµç¨‹</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ViewRootImpl.setView()</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setView</span><span class="hljs-params">(View view, WindowManager.LayoutParams attrs, View panelParentView)</span> {
    <span class="hljs-keyword">synchronized</span> (<span class="hljs-built_in">this</span>) {
        <span class="hljs-keyword">if</span> (mView == <span class="hljs-literal">null</span>) {
            mView = view;
            
            <span class="hljs-comment">// 1. è¯·æ±‚å¸ƒå±€</span>
            requestLayout();
            
            <span class="hljs-comment">// 2. åˆ›å»ºInputChannel</span>
            mInputChannel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">InputChannel</span>();
            
            <span class="hljs-comment">// 3. æ·»åŠ åˆ°WindowManagerService</span>
            res = mWindowSession.addToDisplay(...);
            
            <span class="hljs-comment">// 4. è®¾ç½®Inputäº‹ä»¶æ¥æ”¶</span>
            <span class="hljs-keyword">if</span> (mInputChannel != <span class="hljs-literal">null</span>) {
                mInputEventReceiver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WindowInputEventReceiver</span>(...);
            }
        }
    }
}

<span class="hljs-comment">// ViewRootImpl.requestLayout()</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">requestLayout</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">if</span> (!mHandlingLayoutInLayoutRequest) {
        <span class="hljs-comment">// æ£€æŸ¥çº¿ç¨‹</span>
        checkThread();
        
        <span class="hljs-comment">// æ ‡è®°éœ€è¦å¸ƒå±€</span>
        mLayoutRequested = <span class="hljs-literal">true</span>;
        
        <span class="hljs-comment">// å®‰æ’éå†</span>
        scheduleTraversals();
    }
}

<span class="hljs-comment">// ViewRootImpl.scheduleTraversals()</span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">scheduleTraversals</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">if</span> (!mTraversalScheduled) {
        mTraversalScheduled = <span class="hljs-literal">true</span>;
        
        <span class="hljs-comment">// 1. æ·»åŠ åŒæ­¥å±éšœ</span>
        mTraversalBarrier = mHandler.getLooper().getQueue().postSyncBarrier();
        
        <span class="hljs-comment">// 2. å®‰æ’Choreographerå›è°ƒ</span>
        mChoreographer.postCallback(
            Choreographer.CALLBACK_TRAVERSAL,
            mTraversalRunnable,
            <span class="hljs-literal">null</span>);
        
        <span class="hljs-comment">// 3. å¦‚æœéœ€è¦ï¼Œå‘é€å”¤é†’æ¶ˆæ¯</span>
        notifyRendererOfFramePending();
    }
}

<span class="hljs-comment">// éå†æ‰§è¡Œçš„Runnable</span>
<span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TraversalRunnable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        doTraversal();
    }
}

<span class="hljs-comment">// æ‰§è¡Œéå†</span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">doTraversal</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">if</span> (mTraversalScheduled) {
        mTraversalScheduled = <span class="hljs-literal">false</span>;
        
        <span class="hljs-comment">// ç§»é™¤åŒæ­¥å±éšœ</span>
        mHandler.getLooper().getQueue().removeSyncBarrier(mTraversalBarrier);
        
        <span class="hljs-comment">// æ‰§è¡Œéå†</span>
        performTraversals();
    }
}
</code></pre>
<h4 data-id="heading-18"><strong>4. performTraversals() - æ ¸å¿ƒç»˜åˆ¶æµç¨‹</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">performTraversals</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// ä¸´æ—¶å˜é‡</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">View</span> <span class="hljs-variable">host</span> <span class="hljs-operator">=</span> mView;
    
    <span class="hljs-comment">// 1. æµ‹é‡é˜¶æ®µ</span>
    <span class="hljs-keyword">if</span> (mFirst || windowShouldResize || ...) {
        <span class="hljs-comment">// æ‰§è¡Œæµ‹é‡</span>
        performMeasure(childWidthMeasureSpec, childHeightMeasureSpec);
    }
    
    <span class="hljs-comment">// 2. å¸ƒå±€é˜¶æ®µ</span>
    <span class="hljs-keyword">if</span> (didLayout) {
        <span class="hljs-comment">// æ‰§è¡Œå¸ƒå±€</span>
        performLayout(lp, mWidth, mHeight);
    }
    
    <span class="hljs-comment">// 3. ç»˜åˆ¶é˜¶æ®µ</span>
    <span class="hljs-keyword">if</span> (!cancelDraw &amp;&amp; !newSurface) {
        <span class="hljs-keyword">if</span> (mPendingTransitions != <span class="hljs-literal">null</span> &amp;&amp; mPendingTransitions.size() &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-comment">// å¤„ç†è½¬åœºåŠ¨ç”»</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; mPendingTransitions.size(); ++i) {
                mPendingTransitions.get(i).startChangingAnimations();
            }
            mPendingTransitions.clear();
        }
        
        <span class="hljs-comment">// æ‰§è¡Œç»˜åˆ¶</span>
        performDraw();
    }
}

<span class="hljs-comment">// ä¸‰ä¸ªæ ¸å¿ƒé˜¶æ®µ</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">performMeasure</span><span class="hljs-params">(<span class="hljs-type">int</span> widthMeasureSpec, <span class="hljs-type">int</span> heightMeasureSpec)</span> {
    <span class="hljs-comment">// è°ƒç”¨View.measure()</span>
    mView.measure(widthMeasureSpec, heightMeasureSpec);
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">performLayout</span><span class="hljs-params">(WindowManager.LayoutParams lp, 
                          <span class="hljs-type">int</span> desiredWindowWidth, <span class="hljs-type">int</span> desiredWindowHeight)</span> {
    <span class="hljs-comment">// è°ƒç”¨View.layout()</span>
    mView.layout(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, mView.getMeasuredWidth(), mView.getMeasuredHeight());
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">performDraw</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">if</span> (!dirty.isEmpty() || mIsAnimating) {
        <span class="hljs-comment">// ç¡¬ä»¶åŠ é€Ÿç»˜åˆ¶</span>
        <span class="hljs-keyword">if</span> (mAttachInfo.mHardwareRenderer != <span class="hljs-literal">null</span> &amp;&amp; mAttachInfo.mHardwareRenderer.isEnabled()) {
            <span class="hljs-comment">// ç¡¬ä»¶æ¸²æŸ“</span>
            mAttachInfo.mHardwareRenderer.draw(mView, mAttachInfo, <span class="hljs-built_in">this</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// è½¯ä»¶ç»˜åˆ¶</span>
            <span class="hljs-keyword">if</span> (!drawSoftware(surface, mAttachInfo, xOffset, yOffset, 
                            scalingRequired, dirty)) {
                <span class="hljs-keyword">return</span>;
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-19">å…­ã€å†·å¯åŠ¨ã€æ¸©å¯åŠ¨ã€çƒ­å¯åŠ¨</h3>
<h4 data-id="heading-20"><strong>1. å¯åŠ¨ç±»å‹å¯¹æ¯”</strong></h4>

































<table><thead><tr><th>ç±»å‹</th><th>è¿›ç¨‹çŠ¶æ€</th><th>å¯åŠ¨é€Ÿåº¦</th><th>æ¶ˆè€—èµ„æº</th><th>æ‰§è¡Œæµç¨‹</th></tr></thead><tbody><tr><td><strong>å†·å¯åŠ¨</strong></td><td>è¿›ç¨‹ä¸å­˜åœ¨</td><td>æ…¢</td><td>é«˜</td><td>åˆ›å»ºè¿›ç¨‹ â†’ åˆ›å»ºApplication â†’ åˆ›å»ºActivity</td></tr><tr><td><strong>æ¸©å¯åŠ¨</strong></td><td>è¿›ç¨‹å­˜åœ¨ï¼ŒActivityè¢«é”€æ¯</td><td>ä¸­ç­‰</td><td>ä¸­ç­‰</td><td>åˆ›å»ºActivityï¼ˆApplicationå·²å­˜åœ¨ï¼‰</td></tr><tr><td><strong>çƒ­å¯åŠ¨</strong></td><td>Activityåœ¨åå°</td><td>å¿«</td><td>ä½</td><td>æ¢å¤Activityï¼ˆonRestart â†’ onStart â†’ onResumeï¼‰</td></tr></tbody></table>
<h4 data-id="heading-21"><strong>2. å†·å¯åŠ¨è¯¦ç»†æ—¶é—´çº¿</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å†·å¯åŠ¨æ—¶é—´åˆ†å¸ƒ</span>
T0: ç‚¹å‡»å›¾æ ‡
    â†“
T1: è¿›ç¨‹åˆ›å»ºå®Œæˆï¼ˆfork + åˆå§‹åŒ–ï¼‰
    â”‚   â”œâ”€â”€ Zygote fork: ~50ms
    â”‚   â”œâ”€â”€ åŠ è½½ART: ~100ms
    â”‚   â””â”€â”€ åˆå§‹åŒ–Runtime: ~50ms
    â†“
T2: Application.onCreate()å®Œæˆ
    â”‚   â”œâ”€â”€ åˆ›å»ºApplication: ~20ms
    â”‚   â”œâ”€â”€ ContentProvideråˆå§‹åŒ–: ~50ms
    â”‚   â””â”€â”€ ç¬¬ä¸‰æ–¹åº“åˆå§‹åŒ–: ~100ms
    â†“
T3: Activity.onCreate()å®Œæˆ
    â”‚   â”œâ”€â”€ åŠ è½½ä¸»é¢˜: ~30ms
    â”‚   â”œâ”€â”€ å¸ƒå±€inflate: ~80ms
    â”‚   â””â”€â”€ Viewåˆå§‹åŒ–: ~50ms
    â†“
T4: ç¬¬ä¸€å¸§ç»˜åˆ¶å®Œæˆ
    â”‚   â”œâ”€â”€ æµ‹é‡/å¸ƒå±€: ~30ms
    â”‚   â”œâ”€â”€ ç»˜åˆ¶: ~50ms
    â”‚   â””â”€â”€ åŒæ­¥åˆ°å±å¹•: ~16ms
    â†“
T5: ç”¨æˆ·å¯äº¤äº’
</code></pre>
<h3 data-id="heading-22">ä¸ƒã€å¯åŠ¨ä¼˜åŒ–ç­–ç•¥</h3>
<h4 data-id="heading-23"><strong>1. Application ä¼˜åŒ–</strong></h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplication</span> : <span class="hljs-type">Application</span>() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onCreate()
        
        <span class="hljs-comment">// âœ… 1. å»¶è¿Ÿåˆå§‹åŒ–</span>
        initDelayedComponents()
        
        <span class="hljs-comment">// âœ… 2. åå°çº¿ç¨‹åˆå§‹åŒ–</span>
        initInBackground()
        
        <span class="hljs-comment">// âœ… 3. æŒ‰éœ€åˆå§‹åŒ–</span>
        initOnDemand()
        
        <span class="hljs-comment">// âŒ é¿å…åœ¨ä¸»çº¿ç¨‹åšè¿™äº›ï¼š</span>
        <span class="hljs-comment">// - æ–‡ä»¶IOæ“ä½œ</span>
        <span class="hljs-comment">// - ç½‘ç»œè¯·æ±‚</span>
        <span class="hljs-comment">// - å¤§é‡æ•°æ®åº“æŸ¥è¯¢</span>
        <span class="hljs-comment">// - å¤æ‚çš„è®¡ç®—</span>
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initDelayedComponents</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// ä½¿ç”¨Lifecycleè§‚å¯Ÿè€…å»¶è¿Ÿåˆå§‹åŒ–</span>
        ProcessLifecycleOwner.<span class="hljs-keyword">get</span>().lifecycle.addObserver(<span class="hljs-keyword">object</span> : LifecycleObserver {
            <span class="hljs-meta">@OnLifecycleEvent(Lifecycle.Event.ON_CREATE)</span>
            <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">()</span></span> {
                <span class="hljs-comment">// å»¶è¿Ÿåˆå§‹åŒ–</span>
            }
        })
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initInBackground</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// ä½¿ç”¨WorkManageræˆ–Coroutineåœ¨åå°åˆå§‹åŒ–</span>
        CoroutineScope(Dispatchers.IO).launch {
            <span class="hljs-comment">// åˆå§‹åŒ–ç¬¬ä¸‰æ–¹åº“ç­‰</span>
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initOnDemand</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// æ‡’åŠ è½½æ¨¡å¼</span>
        <span class="hljs-keyword">val</span> heavyLibrary <span class="hljs-keyword">by</span> lazy {
            <span class="hljs-comment">// ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶æ‰åˆå§‹åŒ–</span>
            HeavyLibrary()
        }
    }
}
</code></pre>
<h4 data-id="heading-24"><strong>2. Activity ä¼˜åŒ–</strong></h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-comment">// âœ… 1. åœ¨super.onCreateå‰è®¾ç½®ä¸»é¢˜</span>
        setTheme(R.style.AppTheme_Launcher)
        
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        
        <span class="hljs-comment">// âœ… 2. å¼‚æ­¥åŠ è½½æ•°æ®</span>
        loadDataAsync()
        
        <span class="hljs-comment">// âœ… 3. å»¶è¿ŸåŠ è½½View</span>
        setContentView(R.layout.activity_main)
        
        <span class="hljs-comment">// âœ… 4. åˆ†æ‰¹åˆå§‹åŒ–View</span>
        initEssentialViews()
        postDelayed({ initSecondaryViews() }, <span class="hljs-number">300</span>)
        
        <span class="hljs-comment">// âœ… 5. ä½¿ç”¨ViewStubå»¶è¿ŸåŠ è½½å¤æ‚å¸ƒå±€</span>
        findViewById&lt;ViewStub&gt;(R.id.stub_complex_layout).apply {
            setOnInflateListener { stub, inflated -&gt;
                <span class="hljs-comment">// å¸ƒå±€è¢«inflateæ—¶åˆå§‹åŒ–</span>
                initComplexViews(inflated)
            }
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadDataAsync</span><span class="hljs-params">()</span></span> {
        viewModelScope.launch(Dispatchers.IO) {
            <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = repository.loadData()
            withContext(Dispatchers.Main) {
                <span class="hljs-comment">// æ›´æ–°UI</span>
            }
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initEssentialViews</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// åªåˆå§‹åŒ–å¿…è¦çš„View</span>
        toolbar = findViewById(R.id.toolbar)
        recyclerView = findViewById(R.id.recycler_view)
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">initSecondaryViews</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// å»¶è¿Ÿåˆå§‹åŒ–æ¬¡è¦View</span>
        fab = findViewById(R.id.fab)
        bottomNavigation = findViewById(R.id.bottom_nav)
    }
}
</code></pre>
<h4 data-id="heading-25"><strong>3. å¸ƒå±€ä¼˜åŒ–</strong></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ä½¿ç”¨ConstraintLayoutå‡å°‘å±‚çº§ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">androidx.constraintlayout.widget.ConstraintLayout</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- é¿å…åµŒå¥—LinearLayout --&gt;</span>
    
    <span class="hljs-comment">&lt;!-- ä½¿ç”¨mergeæ ‡ç­¾å‡å°‘å±‚çº§ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">merge</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- å­å¸ƒå±€å†…å®¹ --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">merge</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- ä½¿ç”¨ViewStubå»¶è¿ŸåŠ è½½ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ViewStub</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/stub_heavy_view"</span>
        <span class="hljs-attr">android:layout</span>=<span class="hljs-string">"@layout/heavy_layout"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>/&gt;</span>
        
<span class="hljs-tag">&lt;/<span class="hljs-name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span>
</code></pre>
<h4 data-id="heading-26"><strong>4. å¯åŠ¨å™¨æ¨¡å¼</strong></h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å¯åŠ¨ä»»åŠ¡ç®¡ç†å™¨</span>
<span class="hljs-keyword">object</span> AppStartupManager {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> tasks = mutableListOf&lt;StartupTask&gt;()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> executor = Executors.newFixedThreadPool(<span class="hljs-number">4</span>)
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addTask</span><span class="hljs-params">(task: <span class="hljs-type">StartupTask</span>)</span></span> {
        tasks.add(task)
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">start</span><span class="hljs-params">(onComplete: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
        <span class="hljs-comment">// 1. ç«‹å³æ‰§è¡Œçš„ä»»åŠ¡ï¼ˆåœ¨ä¸»çº¿ç¨‹ï¼‰</span>
        <span class="hljs-keyword">val</span> immediateTasks = tasks.filter { it.priority == Priority.IMMEDIATE }
        immediateTasks.forEach { it.execute() }
        
        <span class="hljs-comment">// 2. åå°æ‰§è¡Œçš„ä»»åŠ¡</span>
        <span class="hljs-keyword">val</span> backgroundTasks = tasks.filter { it.priority == Priority.BACKGROUND }
        backgroundTasks.forEach { task -&gt;
            executor.submit {
                task.execute()
            }
        }
        
        <span class="hljs-comment">// 3. å»¶è¿Ÿæ‰§è¡Œçš„ä»»åŠ¡</span>
        <span class="hljs-keyword">val</span> delayedTasks = tasks.filter { it.priority == Priority.DELAYED }
        Handler(Looper.getMainLooper()).postDelayed({
            delayedTasks.forEach { it.execute() }
            onComplete()
        }, <span class="hljs-number">1000</span>)
    }
}

<span class="hljs-comment">// å¯åŠ¨ä»»åŠ¡å®šä¹‰</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">StartupTask</span> {
    <span class="hljs-keyword">val</span> priority: Priority
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">execute</span><span class="hljs-params">()</span></span>
}

<span class="hljs-keyword">enum</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Priority</span> {
    IMMEDIATE,    <span class="hljs-comment">// ç«‹å³æ‰§è¡Œï¼ˆä¸»çº¿ç¨‹ï¼‰</span>
    BACKGROUND,   <span class="hljs-comment">// åå°æ‰§è¡Œ</span>
    DELAYED       <span class="hljs-comment">// å»¶è¿Ÿæ‰§è¡Œ</span>
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplication</span> : <span class="hljs-type">Application</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onCreate()
        
        AppStartupManager.apply {
            addTask(<span class="hljs-keyword">object</span> : StartupTask {
                <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> priority = Priority.IMMEDIATE
                <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">execute</span><span class="hljs-params">()</span></span> {
                    <span class="hljs-comment">// åˆå§‹åŒ–Analytics</span>
                }
            })
            
            addTask(<span class="hljs-keyword">object</span> : StartupTask {
                <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> priority = Priority.BACKGROUND
                <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">execute</span><span class="hljs-params">()</span></span> {
                    <span class="hljs-comment">// åˆå§‹åŒ–æ•°æ®åº“</span>
                }
            })
            
            addTask(<span class="hljs-keyword">object</span> : StartupTask {
                <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> priority = Priority.DELAYED
                <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">execute</span><span class="hljs-params">()</span></span> {
                    <span class="hljs-comment">// é¢„åŠ è½½æ•°æ®</span>
                }
            })
        }
        
        <span class="hljs-comment">// å¯åŠ¨æ‰€æœ‰ä»»åŠ¡</span>
        AppStartupManager.start {
            <span class="hljs-comment">// æ‰€æœ‰ä»»åŠ¡å®Œæˆåçš„å›è°ƒ</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-27"><strong>5. ä½¿ç”¨ Jetpack Startup åº“</strong></h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ·»åŠ ä¾èµ–</span>
dependencies {
    implementation <span class="hljs-string">"androidx.startup:startup-runtime:1.1.1"</span>
}

<span class="hljs-comment">// å®šä¹‰åˆå§‹åŒ–å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AnalyticsInitializer</span> : <span class="hljs-type">Initializer</span>&lt;<span class="hljs-type">Analytics</span>&gt; {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">create</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>)</span></span>: Analytics {
        <span class="hljs-comment">// åˆå§‹åŒ–Analytics SDK</span>
        <span class="hljs-keyword">return</span> Analytics.<span class="hljs-keyword">init</span>(context)
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">dependencies</span><span class="hljs-params">()</span></span>: List&lt;Class&lt;<span class="hljs-keyword">out</span> Initializer&lt;*&gt;&gt;&gt; {
        <span class="hljs-comment">// ä¾èµ–å…¶ä»–åˆå§‹åŒ–å™¨</span>
        <span class="hljs-keyword">return</span> listOf(DatabaseInitializer::<span class="hljs-keyword">class</span>.java)
    }
}

<span class="hljs-comment">// è‡ªåŠ¨åˆå§‹åŒ–é…ç½®</span>
&lt;provider
    android:name=<span class="hljs-string">"androidx.startup.InitializationProvider"</span>
    android:authorities=<span class="hljs-string">"<span class="hljs-subst">${applicationId}</span>.androidx-startup"</span>
    android:exported=<span class="hljs-string">"false"</span>
    tools:node=<span class="hljs-string">"merge"</span>&gt;
    
    &lt;meta-<span class="hljs-keyword">data</span>
        android:name=<span class="hljs-string">"com.example.AnalyticsInitializer"</span>
        android:value=<span class="hljs-string">"androidx.startup"</span> /&gt;
        
&lt;/provider&gt;

<span class="hljs-comment">// æ‰‹åŠ¨åˆå§‹åŒ–ï¼ˆæŒ‰éœ€ï¼‰</span>
AppInitializer.getInstance(context)
    .initializeComponent(AnalyticsInitializer::<span class="hljs-keyword">class</span>.java)
</code></pre>
<h3 data-id="heading-28">å…«ã€å¯åŠ¨æ—¶é—´æµ‹é‡</h3>
<h4 data-id="heading-29"><strong>1. ä½¿ç”¨ ADB æµ‹é‡</strong></h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æµ‹é‡å†·å¯åŠ¨æ—¶é—´</span>
adb shell am start-activity -W -n com.example/.MainActivity

<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹ï¼š</span>
<span class="hljs-comment"># Starting: Intent { cmp=com.example/.MainActivity }</span>
<span class="hljs-comment"># Status: ok</span>
<span class="hljs-comment"># Activity: com.example/.MainActivity</span>
<span class="hljs-comment"># ThisTime: 1000  # å½“å‰Activityå¯åŠ¨è€—æ—¶</span>
<span class="hljs-comment"># TotalTime: 1000 # åº”ç”¨å¯åŠ¨æ€»è€—æ—¶ï¼ˆåŒ…æ‹¬å‰ä¸€ä¸ªActivity pauseæ—¶é—´ï¼‰</span>
<span class="hljs-comment"># WaitTime: 1000  # AMSå¯åŠ¨Activityçš„æ€»è€—æ—¶</span>
<span class="hljs-comment"># Complete</span>

<span class="hljs-comment"># æµ‹é‡å®Œå…¨å¯åŠ¨æ—¶é—´ï¼ˆç›´åˆ°ç”¨æˆ·å¯äº¤äº’ï¼‰</span>
adb shell am start-activity -S -R 10 -W com.example/.MainActivity

<span class="hljs-comment"># ä½¿ç”¨systraceåˆ†æå¯åŠ¨æ€§èƒ½</span>
python systrace.py -a com.example -o mytrace.html <span class="hljs-built_in">sched</span> gfx view wm am
</code></pre>
<h4 data-id="heading-30"><strong>2. ä»£ç ä¸­æµ‹é‡</strong></h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplication</span> : <span class="hljs-type">Application</span>() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onCreate()
        
        <span class="hljs-comment">// 1. ä½¿ç”¨Firebase Performance Monitoring</span>
        FirebasePerformance.getInstance()
            .newTrace(<span class="hljs-string">"app_start_trace"</span>)
            .start()
        
        <span class="hljs-comment">// 2. è‡ªå®šä¹‰æµ‹é‡</span>
        <span class="hljs-keyword">val</span> startTime = System.currentTimeMillis()
        
        <span class="hljs-comment">// ... åˆå§‹åŒ–ä»£ç </span>
        
        <span class="hljs-keyword">val</span> endTime = System.currentTimeMillis()
        <span class="hljs-keyword">val</span> duration = endTime - startTime
        
        <span class="hljs-comment">// è®°å½•åˆ°Analytics</span>
        FirebaseAnalytics.getInstance(<span class="hljs-keyword">this</span>).logEvent(<span class="hljs-string">"app_start_duration"</span>, bundleOf(
            <span class="hljs-string">"duration_ms"</span> to duration
        ))
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-comment">// æµ‹é‡Activityåˆ›å»ºæ—¶é—´</span>
        <span class="hljs-keyword">val</span> activityStartTime = System.currentTimeMillis()
        
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        
        <span class="hljs-comment">// ç­‰å¾…ç¬¬ä¸€å¸§ç»˜åˆ¶</span>
        window.decorView.post {
            <span class="hljs-keyword">val</span> activityEndTime = System.currentTimeMillis()
            <span class="hljs-keyword">val</span> activityDuration = activityEndTime - activityStartTime
            
            <span class="hljs-comment">// è®°å½•Activityå¯åŠ¨æ—¶é—´</span>
            logDuration(<span class="hljs-string">"activity_create"</span>, activityDuration)
        }
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onWindowFocusChanged</span><span class="hljs-params">(hasFocus: <span class="hljs-type">Boolean</span>)</span></span> {
        <span class="hljs-keyword">super</span>.onWindowFocusChanged(hasFocus)
        
        <span class="hljs-keyword">if</span> (hasFocus) {
            <span class="hljs-comment">// æ­¤æ—¶ç”¨æˆ·å¯ä»¥ä¸ç•Œé¢äº¤äº’</span>
            <span class="hljs-keyword">val</span> appStartTime = getSharedPreferences(<span class="hljs-string">"app_start"</span>, MODE_PRIVATE)
                .getLong(<span class="hljs-string">"start_time"</span>, <span class="hljs-number">0</span>)
            
            <span class="hljs-keyword">if</span> (appStartTime &gt; <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">val</span> totalDuration = System.currentTimeMillis() - appStartTime
                logDuration(<span class="hljs-string">"app_start_total"</span>, totalDuration)
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-31">ä¹ã€å¯åŠ¨ç™½å±/é»‘å±é—®é¢˜</h3>
<h4 data-id="heading-32"><strong>1. å¯åŠ¨ä¸»é¢˜ä¼˜åŒ–</strong></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- styles.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"AppTheme"</span> <span class="hljs-attr">parent</span>=<span class="hljs-string">"Theme.MaterialComponents.DayNight.NoActionBar"</span>&gt;</span><span class="xml">
    <span class="hljs-comment">&lt;!-- æ­£å¸¸ä¸»é¢˜ --&gt;</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"AppTheme.Launcher"</span> <span class="hljs-attr">parent</span>=<span class="hljs-string">"AppTheme"</span>&gt;</span><span class="xml">
    <span class="hljs-comment">&lt;!-- å¯åŠ¨ä¸»é¢˜ï¼Œé¿å…ç™½å± --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"android:windowBackground"</span>&gt;</span>@drawable/launch_screen<span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"android:windowFullscreen"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"android:windowDrawsSystemBarBackgrounds"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"android:windowTranslucentStatus"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

<span class="hljs-comment">&lt;!-- launch_screen.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">layer-list</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">android:drawable</span>=<span class="hljs-string">"@color/primaryDark"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">bitmap</span>
            <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
            <span class="hljs-attr">android:src</span>=<span class="hljs-string">"@mipmap/ic_launcher"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">item</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">layer-list</span>&gt;</span>
</code></pre>
<h4 data-id="heading-33"><strong>2. åœ¨ Manifest ä¸­åº”ç”¨</strong></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">application</span>
    <span class="hljs-attr">android:name</span>=<span class="hljs-string">".MyApplication"</span>
    <span class="hljs-attr">android:theme</span>=<span class="hljs-string">"@style/AppTheme.Launcher"</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">activity</span>
        <span class="hljs-attr">android:name</span>=<span class="hljs-string">".MainActivity"</span>
        <span class="hljs-attr">android:theme</span>=<span class="hljs-string">"@style/AppTheme"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">intent-filter</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">action</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.intent.action.MAIN"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">category</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.intent.category.LAUNCHER"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">intent-filter</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">activity</span>&gt;</span>
    
<span class="hljs-tag">&lt;/<span class="hljs-name">application</span>&gt;</span>
</code></pre>
<h4 data-id="heading-34"><strong>3. åœ¨ Activity ä¸­åˆ‡æ¢ä¸»é¢˜</strong></h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-comment">// åœ¨super.onCreateä¹‹å‰è®¾ç½®æ­£å¸¸ä¸»é¢˜</span>
        setTheme(R.style.AppTheme)
        
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        
        <span class="hljs-comment">// ç›‘å¬ç¬¬ä¸€å¸§ç»˜åˆ¶å®Œæˆ</span>
        <span class="hljs-keyword">val</span> content = findViewById&lt;View&gt;(android.R.id.content)
        content.viewTreeObserver.addOnPreDrawListener(
            <span class="hljs-keyword">object</span> : ViewTreeObserver.OnPreDrawListener {
                <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onPreDraw</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> {
                    <span class="hljs-comment">// ç¬¬ä¸€å¸§å‡†å¤‡ç»˜åˆ¶æ—¶ï¼Œç§»é™¤å¯åŠ¨ä¸»é¢˜</span>
                    content.viewTreeObserver.removeOnPreDrawListener(<span class="hljs-keyword">this</span>)
                    
                    <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œæ‰§è¡Œä¸€äº›åŠ¨ç”»</span>
                    startContentAnimation()
                    
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
                }
            }
        )
    }
}
</code></pre>
<p><strong>æ€»ç»“</strong>ï¼š</p>
<p>Android App å¯åŠ¨æµç¨‹æ ¸å¿ƒè¦ç‚¹ï¼š</p>
<ol>
<li>
<p><strong>è¿›ç¨‹åˆ›å»ºé˜¶æ®µ</strong>ï¼š</p>
<ul>
<li>Zygote fork æ–°è¿›ç¨‹</li>
<li>è°ƒç”¨ ActivityThread.main()</li>
<li>ç»‘å®šåˆ° AMS</li>
</ul>
</li>
<li>
<p><strong>Application åˆå§‹åŒ–</strong>ï¼š</p>
<ul>
<li>åˆ›å»º Application å®ä¾‹</li>
<li>è°ƒç”¨ Application.onCreate()</li>
<li>ContentProvider åˆå§‹åŒ–</li>
</ul>
</li>
<li>
<p><strong>Activity å¯åŠ¨</strong>ï¼š</p>
<ul>
<li>åˆ›å»º Activity å®ä¾‹</li>
<li>è°ƒç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼ˆonCreate â†’ onStart â†’ onResumeï¼‰</li>
<li>Window å’Œ View åˆ›å»º</li>
</ul>
</li>
<li>
<p><strong>ç•Œé¢æ¸²æŸ“</strong>ï¼š</p>
<ul>
<li>ViewRootImpl åˆ›å»º</li>
<li>æ‰§è¡Œ measureã€layoutã€draw</li>
<li>é€šè¿‡ Choreographer åŒæ­¥åˆ°å±å¹•</li>
</ul>
</li>
<li>
<p><strong>ä¼˜åŒ–ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>å»¶è¿Ÿåˆå§‹åŒ–</li>
<li>å¼‚æ­¥åŠ è½½</li>
<li>å¸ƒå±€ä¼˜åŒ–</li>
<li>å¯åŠ¨ä¸»é¢˜ä¼˜åŒ–</li>
<li>ä½¿ç”¨å¯åŠ¨å™¨æ¨¡å¼</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½æµ‹é‡</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ ADB å‘½ä»¤</li>
<li>ä»£ç åŸ‹ç‚¹</li>
<li>systrace åˆ†æ</li>
</ul>
</li>
</ol>
<p>ç†è§£å®Œæ•´çš„å¯åŠ¨æµç¨‹æœ‰åŠ©äºï¼š</p>
<ul>
<li>ä¼˜åŒ–åº”ç”¨å¯åŠ¨æ€§èƒ½</li>
<li>è§£å†³å¯åŠ¨ç™½å±/é»‘å±é—®é¢˜</li>
<li>è®¾è®¡åˆç†çš„åˆå§‹åŒ–ç­–ç•¥</li>
<li>æå‡ç”¨æˆ·ä½“éªŒ</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[telephonyçš„ç›‘å¬æ³¨å†Œæœºåˆ¶]]></title>    <link>https://juejin.cn/post/7602464510608441370</link>    <guid>https://juejin.cn/post/7602464510608441370</guid>    <pubDate>2026-02-04T02:37:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602464510608441370" data-draft-id="7602471311509880859" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="telephonyçš„ç›‘å¬æ³¨å†Œæœºåˆ¶"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-02-04T02:37:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·341408199125"/> <meta itemprop="url" content="https://juejin.cn/user/570004686782272"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            telephonyçš„ç›‘å¬æ³¨å†Œæœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/570004686782272/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·341408199125
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T02:37:08.000Z" title="Wed Feb 04 2026 02:37:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>ä¸¤å±‚æ¶æ„</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">-</span>   å†…éƒ¨Â <span class="hljs-code">`RegistrantList`</span>Â ç”¨äºæ¡†æ¶å†…å¿«é€ŸåŒæ­¥é€šçŸ¥
<span class="hljs-bullet">-</span>   å¤–éƒ¨Â <span class="hljs-code">`TelephonyRegistry`</span>Â ç”¨äºåº”ç”¨å±‚è·¨è¿›ç¨‹å¼‚æ­¥é€šçŸ¥
</code></pre>
<h2 data-id="heading-0"><strong>Android Telephony ç›‘å¬æ³¨å†Œæœºåˆ¶è¯¦è§£</strong></h2>
<p>Android Telephony æ¡†æ¶ä½¿ç”¨äº†ä¸€å¥—ä¼˜é›…ä¸”é«˜æ•ˆçš„<strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>å®ç°,é€šè¿‡ <code>Registrant</code> å’Œ <code>RegistrantList</code> æä¾›äº†å¼ºå¤§çš„äº‹ä»¶é€šçŸ¥æœºåˆ¶ã€‚è¿™æ˜¯æ•´ä¸ªç”µä¿¡æ¡†æ¶å†…éƒ¨é€šä¿¡çš„åŸºçŸ³ã€‚</p>
<hr/>
<h3 data-id="heading-1"><strong>ä¸€ã€æ ¸å¿ƒç±»è®¾è®¡</strong></h3>
<h4 data-id="heading-2"><strong>1. Registrant (å•ä¸ªæ³¨å†Œè€…)</strong></h4>
<pre><code class="hljs language-24:126:frameworks_base/core/java/android/os/Registrant.java" lang="24:126:frameworks_base/core/java/android/os/Registrant.java">public class Registrant
{
    @UnsupportedAppUsage
    public
    Registrant(Handler h, int what, Object obj)
    {
        refH = new WeakReference(h);
        this.what = what;
        userObj = obj;
    }

    @UnsupportedAppUsage
    public void
    clear()
    {
        refH = null;
        userObj = null;
    }

    @UnsupportedAppUsage
    public void
    notifyRegistrant()
    {
        internalNotifyRegistrant (null, null);
    }

    @UnsupportedAppUsage
    public void
    notifyResult(Object result)
    {
        internalNotifyRegistrant (result, null);
    }

    public void
    notifyException(Throwable exception)
    {
        internalNotifyRegistrant (null, exception);
    }

    /**
     * This makes a copy of @param ar
     */
    @UnsupportedAppUsage
    public void
    notifyRegistrant(AsyncResult ar)
    {
        internalNotifyRegistrant (ar.result, ar.exception);
    }

    /*package*/ void
    internalNotifyRegistrant (Object result, Throwable exception)
    {
        Handler h = getHandler();

        if (h == null) {
            clear();
        } else {
            Message msg = Message.obtain();

            msg.what = what;
            msg.obj = new AsyncResult(userObj, result, exception);
            h.sendMessage(msg);
        }
    }

    /**
     * NOTE: May return null if weak reference has been collected
     */

    @UnsupportedAppUsage
    public Message
    messageForRegistrant()
    {
        Handler h = getHandler();

        if (h == null) {
            clear();

            return null;
        } else {
            Message msg = h.obtainMessage();

            msg.what = what;
            msg.obj = userObj;

            return msg;
        }
    }

    @UnsupportedAppUsage(maxTargetSdk = Build.VERSION_CODES.P)
    public Handler
    getHandler()
    {
        if (refH == null)
            return null;

        return (Handler) refH.get();
    }

    WeakReference   refH;
    int             what;
    Object          userObj;
}
</code></pre>
<p><strong>å…³é”®ç‰¹æ€§</strong>:</p>
<ol>
<li>
<p><strong>å¼±å¼•ç”¨ Handler</strong></p>
<pre><code class="hljs language-java" lang="java">WeakReference refH;
</code></pre>
<ul>
<li>é¿å…å†…å­˜æ³„æ¼</li>
<li>å¦‚æœ Handler æ‰€å±çš„å¯¹è±¡è¢«å›æ”¶,è‡ªåŠ¨å¤±æ•ˆ</li>
</ul>
</li>
<li>
<p><strong>ä¸‰è¦ç´ </strong>:</p>
<ul>
<li><code>refH</code>: Handler çš„å¼±å¼•ç”¨</li>
<li><code>what</code>: æ¶ˆæ¯ç±»å‹ç (Message.what)</li>
<li><code>userObj</code>: ç”¨æˆ·è‡ªå®šä¹‰å¯¹è±¡</li>
</ul>
</li>
<li>
<p><strong>é€šçŸ¥æœºåˆ¶</strong>:</p>
<pre><code class="hljs language-java" lang="java">msg.what = what;
msg.obj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncResult</span>(userObj, result, exception);
h.sendMessage(msg);
</code></pre>
<ul>
<li>æ„é€  <code>Message</code>,å°è£… <code>AsyncResult</code></li>
<li>é€šè¿‡ Handler å‘é€åˆ°ç›®æ ‡çº¿ç¨‹</li>
</ul>
</li>
</ol>
<h4 data-id="heading-3"><strong>2. RegistrantList (æ³¨å†Œè€…åˆ—è¡¨)</strong></h4>
<pre><code class="hljs language-24:144:frameworks_base/core/java/android/os/RegistrantList.java" lang="24:144:frameworks_base/core/java/android/os/RegistrantList.java">public class RegistrantList
{
    ArrayList   registrants = new ArrayList();      // of Registrant

    @UnsupportedAppUsage
    public RegistrantList() {
    }

    @UnsupportedAppUsage
    public synchronized void
    add(Handler h, int what, Object obj)
    {
        add(new Registrant(h, what, obj));
    }

    @UnsupportedAppUsage
    public synchronized void
    addUnique(Handler h, int what, Object obj)
    {
        // if the handler is already in the registrant list, remove it
        remove(h);
        add(new Registrant(h, what, obj));
    }

    @UnsupportedAppUsage
    public synchronized void
    add(Registrant r)
    {
        removeCleared();
        registrants.add(r);
    }

    @UnsupportedAppUsage
    public synchronized void
    removeCleared()
    {
        for (int i = registrants.size() - 1; i &gt;= 0 ; i--) {
            Registrant  r = (Registrant) registrants.get(i);

            if (r.refH == null) {
                registrants.remove(i);
            }
        }
    }

    public synchronized void removeAll() {
        registrants.clear();
    }

    @UnsupportedAppUsage
    public synchronized int
    size()
    {
        return registrants.size();
    }

    @UnsupportedAppUsage(maxTargetSdk = Build.VERSION_CODES.P)
    public synchronized Object
    get(int index)
    {
        return registrants.get(index);
    }

    private synchronized void
    internalNotifyRegistrants (Object result, Throwable exception)
    {
       for (int i = 0, s = registrants.size(); i &lt; s ; i++) {
            Registrant  r = (Registrant) registrants.get(i);
            r.internalNotifyRegistrant(result, exception);
       }
    }

    @UnsupportedAppUsage
    public /*synchronized*/ void
    notifyRegistrants()
    {
        internalNotifyRegistrants(null, null);
    }

    public /*synchronized*/ void
    notifyException(Throwable exception)
    {
        internalNotifyRegistrants (null, exception);
    }

    @UnsupportedAppUsage
    public /*synchronized*/ void
    notifyResult(Object result)
    {
        internalNotifyRegistrants (result, null);
    }


    @UnsupportedAppUsage
    public /*synchronized*/ void
    notifyRegistrants(AsyncResult ar)
    {
        internalNotifyRegistrants(ar.result, ar.exception);
    }

    @UnsupportedAppUsage
    public synchronized void
    remove(Handler h)
    {
        for (int i = 0, s = registrants.size() ; i &lt; s ; i++) {
            Registrant  r = (Registrant) registrants.get(i);
            Handler     rh;

            rh = r.getHandler();

            /* Clean up both the requested registrant and
             * any now-collected registrants
             */
            if (rh == null || rh == h) {
                r.clear();
            }
        }

        removeCleared();
    }
}
</code></pre>
<p><strong>å…³é”®æ–¹æ³•</strong>:</p>
<ol>
<li>
<p><strong>add()</strong> vs <strong>addUnique()</strong></p>
<ul>
<li><code>add()</code>: å…è®¸åŒä¸€ Handler å¤šæ¬¡æ³¨å†Œ</li>
<li><code>addUnique()</code>: å…ˆç§»é™¤å·²å­˜åœ¨çš„,ç¡®ä¿å”¯ä¸€æ€§</li>
</ul>
</li>
<li>
<p><strong>removeCleared()</strong></p>
<ul>
<li>æ¸…ç†å·²å¤±æ•ˆçš„ Registrant (WeakReference è¢«å›æ”¶)</li>
<li>è‡ªåŠ¨åƒåœ¾æ¸…ç†æœºåˆ¶</li>
</ul>
</li>
<li>
<p><strong>notifyRegistrants()</strong></p>
<ul>
<li>éå†æ‰€æœ‰æ³¨å†Œè€…</li>
<li>é€ä¸ªé€šçŸ¥</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-4"><strong>äºŒã€å…¸å‹ä½¿ç”¨æ¨¡å¼</strong></h3>
<h4 data-id="heading-5"><strong>1. å£°æ˜ RegistrantList</strong></h4>
<pre><code class="hljs language-424:462:frameworks_opt_telephony/src/java/com/android/internal/telephony/Phone.java" lang="424:462:frameworks_opt_telephony/src/java/com/android/internal/telephony/Phone.java">    protected final RegistrantList mPreciseCallStateRegistrants = new RegistrantList();

    private final RegistrantList mHandoverRegistrants = new RegistrantList();

    private final RegistrantList mNewRingingConnectionRegistrants = new RegistrantList();

    private final RegistrantList mIncomingRingRegistrants = new RegistrantList();

    protected final RegistrantList mDisconnectRegistrants = new RegistrantList();

    private final RegistrantList mServiceStateRegistrants = new RegistrantList();

    protected final RegistrantList mMmiCompleteRegistrants = new RegistrantList();

    @UnsupportedAppUsage
    protected final RegistrantList mMmiRegistrants = new RegistrantList();

    protected final RegistrantList mUnknownConnectionRegistrants = new RegistrantList();

    protected final RegistrantList mSuppServiceFailedRegistrants = new RegistrantList();

    protected final RegistrantList mRadioOffOrNotAvailableRegistrants = new RegistrantList();

    protected final RegistrantList mSimRecordsLoadedRegistrants = new RegistrantList();

    private final RegistrantList mVideoCapabilityChangedRegistrants = new RegistrantList();

    protected final RegistrantList mEmergencyCallToggledRegistrants = new RegistrantList();

    private final RegistrantList mCellInfoRegistrants = new RegistrantList();

    private final RegistrantList mRedialRegistrants = new RegistrantList();

    private final RegistrantList mPhysicalChannelConfigRegistrants = new RegistrantList();

    private final RegistrantList mOtaspRegistrants = new RegistrantList();

    private final RegistrantList mPreferredNetworkTypeRegistrants = new RegistrantList();
</code></pre>
<p><strong>Phone ç±»ä¸­çš„å…¸å‹ RegistrantList</strong>:</p>
<ul>
<li>æœåŠ¡çŠ¶æ€å˜åŒ–</li>
<li>æ¥ç”µé€šçŸ¥</li>
<li>è¿æ¥æ–­å¼€</li>
<li>MMI å‘½ä»¤</li>
<li>ä¿¡å·å¼ºåº¦</li>
<li>å°åŒºä¿¡æ¯</li>
<li>...</li>
</ul>
<h4 data-id="heading-6"><strong>2. æ³¨å†Œæ¥å£</strong></h4>
<pre><code class="hljs language-1005:1033:frameworks_opt_telephony/src/java/com/android/internal/telephony/ServiceStateTracker.java" lang="1005:1033:frameworks_opt_telephony/src/java/com/android/internal/telephony/ServiceStateTracker.java">    public void registerForVoiceRoamingOn(Handler h, int what, Object obj) {
        Registrant r = new Registrant(h, what, obj);
        mVoiceRoamingOnRegistrants.add(r);

        if (mSS.getVoiceRoaming()) {
            r.notifyRegistrant();
        }
    }

    public void unregisterForVoiceRoamingOn(Handler h) {
        mVoiceRoamingOnRegistrants.remove(h);
    }

    /**
     * Registration point for roaming off of mobile voice
     * combined roaming is true when roaming is true and ONS differs SPN
     *
     * @param h handler to notify
     * @param what what code of message when delivered
     * @param obj placed in Message.obj
     */
    public void registerForVoiceRoamingOff(Handler h, int what, Object obj) {
        Registrant r = new Registrant(h, what, obj);
        mVoiceRoamingOffRegistrants.add(r);

        if (!mSS.getVoiceRoaming()) {
            r.notifyRegistrant();
        }
    }
</code></pre>
<p><strong>æ ‡å‡†æ¨¡å¼</strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerForXxxChanged</span><span class="hljs-params">(Handler h, <span class="hljs-type">int</span> what, Object obj)</span> {
    <span class="hljs-type">Registrant</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Registrant</span>(h, what, obj);
    mXxxRegistrants.add(r);
    
    <span class="hljs-comment">// ç«‹å³é€šçŸ¥å½“å‰çŠ¶æ€(å¯é€‰)</span>
    <span class="hljs-keyword">if</span> (currentStateæ»¡è¶³æ¡ä»¶) {
        r.notifyRegistrant();
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unregisterForXxxChanged</span><span class="hljs-params">(Handler h)</span> {
    mXxxRegistrants.remove(h);
}
</code></pre>
<h4 data-id="heading-7"><strong>3. è§¦å‘é€šçŸ¥</strong></h4>
<pre><code class="hljs language-4704:4709:frameworks_opt_telephony/src/java/com/android/internal/telephony/ServiceStateTracker.java" lang="4704:4709:frameworks_opt_telephony/src/java/com/android/internal/telephony/ServiceStateTracker.java">    private void notifyCdmaSubscriptionInfoReady() {
        if (mCdmaForSubscriptionInfoReadyRegistrants != null) {
            if (DBG) log("CDMA_SUBSCRIPTION: call notifyRegistrants()");
            mCdmaForSubscriptionInfoReadyRegistrants.notifyRegistrants();
        }
    }
</code></pre>
<p><strong>é€šçŸ¥æ–¹å¼</strong>:</p>
<ol>
<li>
<p><strong>æ— å‚æ•°é€šçŸ¥</strong>:</p>
<pre><code class="hljs language-java" lang="java">mRegistrants.notifyRegistrants();
</code></pre>
</li>
<li>
<p><strong>æºå¸¦ç»“æœ</strong>:</p>
<pre><code class="hljs language-java" lang="java">mRegistrants.notifyResult(result);
</code></pre>
</li>
<li>
<p><strong>æºå¸¦ AsyncResult</strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">AsyncResult</span> <span class="hljs-variable">ar</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncResult</span>(<span class="hljs-literal">null</span>, result, exception);
mRegistrants.notifyRegistrants(ar);
</code></pre>
</li>
</ol>
<hr/>
<h3 data-id="heading-8"><strong>ä¸‰ã€å®Œæ•´ç¤ºä¾‹:ç½‘ç»œé©»ç½‘çŠ¶æ€ç›‘å¬</strong></h3>
<h4 data-id="heading-9"><strong>1. å®šä¹‰ RegistrantList (ServiceStateTracker)</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">RegistrantList</span> <span class="hljs-variable">mNetworkAttachedRegistrants</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegistrantList</span>();
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">RegistrantList</span> <span class="hljs-variable">mNetworkDetachedRegistrants</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegistrantList</span>();
</code></pre>
<h4 data-id="heading-10"><strong>2. æä¾›æ³¨å†Œæ¥å£</strong></h4>
<pre><code class="hljs language-4864:4894:frameworks_opt_telephony/src/java/com/android/internal/telephony/ServiceStateTracker.java" lang="4864:4894:frameworks_opt_telephony/src/java/com/android/internal/telephony/ServiceStateTracker.java">    public void registerForNetworkAttached(Handler h, int what, Object obj) {
        Registrant r = new Registrant(h, what, obj);

        mNetworkAttachedRegistrants.add(r);
        if (mSS.getState() == ServiceState.STATE_IN_SERVICE) {
            r.notifyRegistrant();
        }
    }

    public void unregisterForNetworkAttached(Handler h) {
        mNetworkAttachedRegistrants.remove(h);
    }

    /**
     * Registration point for transition into network detached.
     * @param h handler to notify
     * @param what what code of message when delivered
     * @param obj in Message.obj
     */
    public void registerForNetworkDetached(Handler h, int what, Object obj) {
        Registrant r = new Registrant(h, what, obj);

        mNetworkDetachedRegistrants.add(r);
        if (mSS.getState() != ServiceState.STATE_IN_SERVICE) {
            r.notifyRegistrant();
        }
    }

    public void unregisterForNetworkDetached(Handler h) {
        mNetworkDetachedRegistrants.remove(h);
    }
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>: æ³¨å†Œæ—¶ç«‹å³æ£€æŸ¥å½“å‰çŠ¶æ€,å¦‚æœå·²æ»¡è¶³æ¡ä»¶åˆ™ç«‹å³é€šçŸ¥</p>
<h4 data-id="heading-11"><strong>3. ç›‘å¬è€…æ³¨å†Œ (ç¤ºä¾‹:DisplayInfoController)</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// DisplayInfoController.java</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">EVENT_SERVICE_STATE_CHANGED</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;

<span class="hljs-keyword">public</span> <span class="hljs-title function_">DisplayInfoController</span><span class="hljs-params">(Phone phone)</span> {
    mPhone = phone;
    <span class="hljs-comment">// æ³¨å†ŒæœåŠ¡çŠ¶æ€å˜åŒ–ç›‘å¬</span>
    mPhone.getServiceStateTracker()
        .registerForServiceStateChanged(<span class="hljs-built_in">this</span>, EVENT_SERVICE_STATE_CHANGED, <span class="hljs-literal">null</span>);
}

<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleMessage</span><span class="hljs-params">(Message msg)</span> {
    <span class="hljs-keyword">switch</span> (msg.what) {
        <span class="hljs-keyword">case</span> EVENT_SERVICE_STATE_CHANGED:
            <span class="hljs-type">AsyncResult</span> <span class="hljs-variable">ar</span> <span class="hljs-operator">=</span> (AsyncResult) msg.obj;
            <span class="hljs-type">ServiceState</span> <span class="hljs-variable">ss</span> <span class="hljs-operator">=</span> (ServiceState) ar.result;
            <span class="hljs-comment">// å¤„ç†æœåŠ¡çŠ¶æ€å˜åŒ–</span>
            updateDisplayInfo(ss);
            <span class="hljs-keyword">break</span>;
    }
}
</code></pre>
<h4 data-id="heading-12"><strong>4. è§¦å‘é€šçŸ¥</strong></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ServiceStateTracker.java</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pollStateDone</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// ... çŠ¶æ€æ£€æŸ¥</span>
    
    <span class="hljs-keyword">if</span> (hasNetworkAttached) {
        mNetworkAttachedRegistrants.notifyRegistrants();
    }
    
    <span class="hljs-keyword">if</span> (hasNetworkDetached) {
        mNetworkDetachedRegistrants.notifyRegistrants();
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-13"><strong>å››ã€é«˜çº§ç‰¹æ€§</strong></h3>
<h4 data-id="heading-14"><strong>1. Phone åˆ‡æ¢æ—¶çš„è¿ç§» (migrateFrom)</strong></h4>
<pre><code class="hljs language-1170:1190:frameworks_opt_telephony/src/java/com/android/internal/telephony/Phone.java" lang="1170:1190:frameworks_opt_telephony/src/java/com/android/internal/telephony/Phone.java">    protected void migrate(RegistrantList to, RegistrantList from) {
        if (from == null) {
            // May be null in some cases, such as testing.
            return;
        }
        from.removeCleared();
        for (int i = 0, n = from.size(); i &lt; n; i++) {
            Registrant r = (Registrant) from.get(i);
            Message msg = r.messageForRegistrant();
            // Since CallManager has already registered with both CS and IMS phones,
            // the migrate should happen only for those registrants which are not
            // registered with CallManager.Hence the below check is needed to add
            // only those registrants to the registrant list which are not
            // coming from the CallManager.
            if (msg != null) {
                if (msg.obj == CallManager.getInstance().getRegistrantIdentifier()) {
                    continue;
                } else {
                    to.add((Registrant) from.get(i));
                }
            } else {
</code></pre>
<p><strong>åº”ç”¨åœºæ™¯</strong>:</p>
<ul>
<li>GSM â†” CDMA åˆ‡æ¢</li>
<li>SRVCC (CS åŸŸåˆ‡æ¢)</li>
<li>Phone å¯¹è±¡æ›¿æ¢</li>
</ul>
<p><strong>è¿‡ç¨‹</strong>:</p>
<ol>
<li>æ¸…ç†å·²å¤±æ•ˆçš„ Registrant</li>
<li>éå†æºåˆ—è¡¨</li>
<li>æ’é™¤ç‰¹å®šæ³¨å†Œè€…(å¦‚ CallManager)</li>
<li>è¿ç§»åˆ°æ–°åˆ—è¡¨</li>
</ol>
<h4 data-id="heading-15"><strong>2. æ¡ä»¶é€šçŸ¥ (notifyNow)</strong></h4>
<pre><code class="hljs language-272:283:frameworks_opt_telephony/src/java/com/android/internal/telephony/CarrierActionAgent.java" lang="272:283:frameworks_opt_telephony/src/java/com/android/internal/telephony/CarrierActionAgent.java">    public void registerForCarrierAction(int action, Handler h, int what, Object obj,
                                         boolean notifyNow) {
        Boolean carrierAction = getCarrierActionEnabled(action);
        if (carrierAction == null) {
            throw new IllegalArgumentException("invalid carrier action: " + action);
        }
        RegistrantList list = getRegistrantsFromAction(action);
        Registrant r = new Registrant(h, what, obj);
        list.add(r);
        if (notifyNow) {
            r.notifyRegistrant(new AsyncResult(null, carrierAction, null));
        }
    }
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>:</p>
<ul>
<li><code>notifyNow=true</code>: æ³¨å†Œåç«‹å³é€šçŸ¥å½“å‰çŠ¶æ€</li>
<li>é¿å…é”™è¿‡çŠ¶æ€</li>
</ul>
<h4 data-id="heading-16"><strong>3. å¤šä¼ è¾“ç±»å‹æ”¯æŒ</strong></h4>
<pre><code class="hljs language-4718:4733:frameworks_opt_telephony/src/java/com/android/internal/telephony/ServiceStateTracker.java" lang="4718:4733:frameworks_opt_telephony/src/java/com/android/internal/telephony/ServiceStateTracker.java">    public void registerForDataConnectionAttached(@TransportType int transport, Handler h, int what,
                                                  Object obj) {
        Registrant r = new Registrant(h, what, obj);
        if (mAttachedRegistrants.get(transport) == null) {
            mAttachedRegistrants.put(transport, new RegistrantList());
        }
        mAttachedRegistrants.get(transport).add(r);

        if (mSS != null) {
            NetworkRegistrationInfo netRegState = mSS.getNetworkRegistrationInfo(
                    NetworkRegistrationInfo.DOMAIN_PS, transport);
            if (netRegState == null || netRegState.isInService()) {
                r.notifyRegistrant();
            }
        }
    }
</code></pre>
<p><strong>è®¾è®¡</strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> SparseArray&lt;RegistrantList&gt; mAttachedRegistrants = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SparseArray</span>&lt;&gt;();
</code></pre>
<ul>
<li>ä½¿ç”¨ <code>SparseArray&lt;RegistrantList&gt;</code> ç®¡ç†å¤šç§ä¼ è¾“ç±»å‹</li>
<li>WWAN (èœ‚çªç½‘ç»œ)</li>
<li>WLAN (Wi-Fi)</li>
</ul>
<hr/>
<h3 data-id="heading-17"><strong>äº”ã€è®¾è®¡ä¼˜åŠ¿</strong></h3>
<h4 data-id="heading-18"><strong>1. å†…å­˜å®‰å…¨</strong></h4>
<ul>
<li><strong>å¼±å¼•ç”¨</strong>: è‡ªåŠ¨é¿å…å†…å­˜æ³„æ¼</li>
<li><strong>removeCleared()</strong>: è‡ªåŠ¨æ¸…ç†å¤±æ•ˆæ³¨å†Œè€…</li>
</ul>
<h4 data-id="heading-19"><strong>2. çº¿ç¨‹å®‰å…¨</strong></h4>
<ul>
<li><strong>Handler æœºåˆ¶</strong>: é€šè¿‡ Message åœ¨ç›®æ ‡çº¿ç¨‹æ‰§è¡Œ</li>
<li><strong>synchronized</strong>: RegistrantList çš„å…³é”®æ–¹æ³•åŒæ­¥</li>
</ul>
<h4 data-id="heading-20"><strong>3. è§£è€¦è®¾è®¡</strong></h4>
<ul>
<li>äº‹ä»¶å‘å¸ƒè€…æ— éœ€çŸ¥é“ç›‘å¬è€…ç»†èŠ‚</li>
<li>ç›‘å¬è€…å¯åŠ¨æ€æ·»åŠ /ç§»é™¤</li>
<li>æ”¯æŒå¤šå¯¹å¤šå…³ç³»</li>
</ul>
<h4 data-id="heading-21"><strong>4. çµæ´»æ€§</strong></h4>
<ul>
<li>æ”¯æŒæºå¸¦è‡ªå®šä¹‰æ•°æ® (<code>userObj</code>)</li>
<li>æ”¯æŒæºå¸¦ç»“æœå’Œå¼‚å¸¸ (<code>AsyncResult</code>)</li>
<li>æ”¯æŒç«‹å³é€šçŸ¥å½“å‰çŠ¶æ€</li>
</ul>
<h4 data-id="heading-22"><strong>5. é«˜æ•ˆ</strong></h4>
<ul>
<li>ArrayList éå†æ€§èƒ½é«˜</li>
<li>å¼±å¼•ç”¨è‡ªåŠ¨æ¸…ç†,æ— éœ€æ‰‹åŠ¨ç®¡ç†</li>
<li>æ‰¹é‡é€šçŸ¥é«˜æ•ˆ</li>
</ul>
<hr/>
<h3 data-id="heading-23"><strong>å…­ã€ä¸æ ‡å‡†è§‚å¯Ÿè€…æ¨¡å¼å¯¹æ¯”</strong></h3>








































<table><thead><tr><th>ç‰¹æ€§</th><th>Registrant æœºåˆ¶</th><th>æ ‡å‡† Observer æ¨¡å¼</th></tr></thead><tbody><tr><td><strong>Handler é›†æˆ</strong></td><td>âœ“ å†…ç½® Handler æ”¯æŒ</td><td>âœ— éœ€è‡ªè¡Œå®ç°</td></tr><tr><td><strong>çº¿ç¨‹å®‰å…¨</strong></td><td>âœ“ Message æœºåˆ¶è·¨çº¿ç¨‹</td><td>âœ— éœ€é¢å¤–å¤„ç†</td></tr><tr><td><strong>å†…å­˜ç®¡ç†</strong></td><td>âœ“ WeakReference è‡ªåŠ¨</td><td>âœ— éœ€æ‰‹åŠ¨æ¸…ç†</td></tr><tr><td><strong>å¼‚å¸¸ä¼ é€’</strong></td><td>âœ“ AsyncResult å°è£…</td><td>âœ— é€šå¸¸ä¸æ”¯æŒ</td></tr><tr><td><strong>ç«‹å³é€šçŸ¥</strong></td><td>âœ“ æ³¨å†Œæ—¶å¯é€‰é€šçŸ¥</td><td>âœ— é€šå¸¸ä¸æ”¯æŒ</td></tr><tr><td><strong>æ•°æ®æºå¸¦</strong></td><td>âœ“ userObj + result</td><td>âœ“ é€šå¸¸æ”¯æŒ</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-24"><strong>ä¸ƒã€å®æˆ˜:è‡ªå®šä¹‰äº‹ä»¶ç›‘å¬</strong></h3>
<p>å‡è®¾è¦ä¸º <code>DataConnection</code> æ·»åŠ çŠ¶æ€ç›‘å¬:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. å£°æ˜ RegistrantList</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">RegistrantList</span> <span class="hljs-variable">mDataStateChangedRegistrants</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegistrantList</span>();

<span class="hljs-comment">// 2. æä¾›æ³¨å†Œæ¥å£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerForDataStateChanged</span><span class="hljs-params">(Handler h, <span class="hljs-type">int</span> what, Object obj)</span> {
    <span class="hljs-type">Registrant</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Registrant</span>(h, what, obj);
    mDataStateChangedRegistrants.add(r);
    
    <span class="hljs-comment">// ç«‹å³é€šçŸ¥å½“å‰çŠ¶æ€</span>
    r.notifyResult(getCurrentState());
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unregisterForDataStateChanged</span><span class="hljs-params">(Handler h)</span> {
    mDataStateChangedRegistrants.remove(h);
}

<span class="hljs-comment">// 3. çŠ¶æ€å˜åŒ–æ—¶é€šçŸ¥</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">notifyDataStateChanged</span><span class="hljs-params">(<span class="hljs-type">int</span> newState)</span> {
    mDataStateChangedRegistrants.notifyResult(newState);
}

<span class="hljs-comment">// 4. ç›‘å¬è€…ä½¿ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Handler</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">EVENT_DATA_STATE_CHANGED</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(DataConnection dc)</span> {
        dc.registerForDataStateChanged(<span class="hljs-built_in">this</span>, EVENT_DATA_STATE_CHANGED, <span class="hljs-literal">null</span>);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleMessage</span><span class="hljs-params">(Message msg)</span> {
        <span class="hljs-keyword">if</span> (msg.what == EVENT_DATA_STATE_CHANGED) {
            <span class="hljs-type">AsyncResult</span> <span class="hljs-variable">ar</span> <span class="hljs-operator">=</span> (AsyncResult) msg.obj;
            <span class="hljs-type">int</span> <span class="hljs-variable">state</span> <span class="hljs-operator">=</span> (Integer) ar.result;
            <span class="hljs-comment">// å¤„ç†çŠ¶æ€å˜åŒ–</span>
        }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-25"><strong>å…«ã€æ€»ç»“</strong></h3>
<p>Android Telephony çš„ç›‘å¬æ³¨å†Œæœºåˆ¶æ˜¯ä¸€ä¸ª<strong>ç²¾å¿ƒè®¾è®¡çš„äº‹ä»¶åˆ†å‘ç³»ç»Ÿ</strong>:</p>
<ol>
<li>
<p><strong>æ ¸å¿ƒç»„ä»¶</strong>:</p>
<ul>
<li><code>Registrant</code>: å•ä¸ªç›‘å¬è€…å°è£…</li>
<li><code>RegistrantList</code>: ç›‘å¬è€…åˆ—è¡¨ç®¡ç†</li>
<li><code>AsyncResult</code>: ç»Ÿä¸€ç»“æœå°è£…</li>
</ul>
</li>
<li>
<p><strong>å…³é”®ç‰¹æ€§</strong>:</p>
<ul>
<li>å¼±å¼•ç”¨è‡ªåŠ¨å†…å­˜ç®¡ç†</li>
<li>Handler æœºåˆ¶ä¿è¯çº¿ç¨‹å®‰å…¨</li>
<li>æ”¯æŒç«‹å³é€šçŸ¥å½“å‰çŠ¶æ€</li>
<li>æ”¯æŒå¼‚å¸¸å’Œç»“æœä¼ é€’</li>
</ul>
</li>
<li>
<p><strong>å¹¿æ³›åº”ç”¨</strong>:</p>
<ul>
<li>Phone çŠ¶æ€ç›‘å¬</li>
<li>ServiceState å˜åŒ–</li>
<li>æ•°æ®è¿æ¥çŠ¶æ€</li>
<li>SIM å¡äº‹ä»¶</li>
<li>ä¿¡å·å¼ºåº¦</li>
<li>...</li>
</ul>
</li>
</ol>
<p>è¿™å¥—æœºåˆ¶æ˜¯æ•´ä¸ª Android Telephony æ¡†æ¶çš„<strong>ç¥ç»ç³»ç»Ÿ</strong>,è¿æ¥äº†ä»åº•å±‚ RIL åˆ°ä¸Šå±‚ Framework çš„æ‰€æœ‰ç»„ä»¶!</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä½• SVG åœ¨ Web ç®€å•ï¼Œåœ¨ç§»åŠ¨ç«¯å´å¾ˆéš¾ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7602474148095049780</link>    <guid>https://juejin.cn/post/7602474148095049780</guid>    <pubDate>2026-02-04T01:45:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602474148095049780" data-draft-id="7602472997921423360" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä½• SVG åœ¨ Web ç®€å•ï¼Œåœ¨ç§»åŠ¨ç«¯å´å¾ˆéš¾ï¼Ÿ"/> <meta itemprop="keywords" content="Android,iOS,å®¢æˆ·ç«¯"/> <meta itemprop="datePublished" content="2026-02-04T01:45:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Gemini001"/> <meta itemprop="url" content="https://juejin.cn/user/2333635831676704"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä½• SVG åœ¨ Web ç®€å•ï¼Œåœ¨ç§»åŠ¨ç«¯å´å¾ˆéš¾ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2333635831676704/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Gemini001
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T01:45:14.000Z" title="Wed Feb 04 2026 01:45:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸ºä»€ä¹ˆå‰ç«¯åŠ è½½ SVG è½»è€Œæ˜“ä¸¾ï¼Œç§»åŠ¨ç«¯ï¼ˆAndroid/iOSï¼‰å´å›°éš¾é‡é‡ï¼Ÿ</h2>
<p>åœ¨è·¨å¹³å°å¼€å‘çš„è®¨è®ºä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸ç»å…¸çš„é—®é¢˜ã€‚è®¸å¤šä» Web è½¬å‘ç§»åŠ¨ç«¯ï¼ˆAndroid/iOSï¼‰å¼€å‘çš„å·¥ç¨‹å¸ˆéƒ½ä¼šæ„Ÿåˆ°å›°æƒ‘ï¼šä¸ºä»€ä¹ˆåœ¨æµè§ˆå™¨é‡Œå†™ä¸€ä¸ªÂ <code>&lt;img src="icon.svg"&gt;</code>å°±èƒ½å®Œç¾æ˜¾ç¤ºï¼Œè€Œåˆ°äº† App é‡Œå´éœ€è¦å„ç§è½¬æ¢ã€æŠ¥é”™é¢‘å‡ºï¼Œç”šè‡³æ ¹æœ¬ä¸æ”¯æŒï¼Ÿ</p>
<p>ç®€å•æ¥è¯´ï¼š<strong>Web æµè§ˆå™¨æ˜¯ SVG çš„â€œåŸç”Ÿçˆ¶æ¯â€ï¼Œè€Œ Android å’Œ iOS åªæ˜¯ SVG çš„â€œè¿œæˆ¿äº²æˆšâ€</strong> ã€‚</p>
<p>è¿™å¹¶ä¸æ˜¯ç§»åŠ¨ç«¯å®Œå…¨æ— æ³•åŠ è½½ SVGï¼Œè€Œæ˜¯äºŒè€…æ”¯æŒçš„æ–¹å¼ã€ç¨‹åº¦å’Œåº•å±‚é€»è¾‘å®Œå…¨ä¸åŒã€‚åœ¨æ·±å…¥å‰–æä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ææ¸…æ¥šï¼š<strong>SVG åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<h3 data-id="heading-1">0. SVG åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿâ€”â€” ä»æ¦‚å¿µåˆ°æœ¬è´¨</h3>
<p>è¦ç†è§£è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬é¦–å…ˆè¦æ˜ç™½ SVG çš„æœ¬è´¨ã€‚</p>
<ul>
<li>
<p><strong>å®šä¹‰</strong>ï¼š<strong>SVG (Scalable Vector Graphics)</strong> ï¼Œå³å¯ç¼©æ”¾çŸ¢é‡å›¾å½¢ï¼Œæ˜¯ä¸€ç§åŸºäºÂ <strong>XML</strong>ï¼ˆå¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼‰æ¥æè¿°äºŒç»´å›¾å½¢çš„Â <strong>W3C æ ‡å‡†</strong>ã€‚</p>
</li>
<li>
<p><strong>æ ¸å¿ƒæ€æƒ³ï¼šç”¨ä»£ç ç”»å›¾</strong></p>
<p>ä½ å¯ä»¥æŠŠ SVG æ–‡ä»¶æƒ³è±¡æˆä¸€ä¸ª<strong>ç”¨æ–‡æœ¬ç¼–å†™çš„ç»˜å›¾è„šæœ¬</strong>ã€‚å®ƒä¸æ˜¯åƒ PNG/JPG é‚£æ ·çš„åƒç´ é›†åˆï¼ˆä½å›¾ï¼‰ï¼Œè€Œæ˜¯åƒä¸€ä»½ç²¾ç¡®çš„æ–½å·¥å›¾çº¸ï¼Œå‘Šè¯‰æ¸²æŸ“å¼•æ“ï¼šâ€œåœ¨è¿™é‡Œç”»ä¸€ä¸ªåŠå¾„ä¸º50çš„åœ†â€ã€â€œä»è¿™é‡Œåˆ°é‚£é‡Œç”»ä¸€æ¡çº¢è‰²çš„è´å¡å°”æ›²çº¿â€ã€â€œç»™è¿™ä¸ªåŒºåŸŸå¡«å……ä¸€ä¸ªä»è“åˆ°ç™½çš„çº¿æ€§æ¸å˜â€ã€‚</p>
</li>
<li>
<p><strong>ä¸ç”Ÿä¿±æ¥çš„ä¼˜åŠ¿ï¼šæ— æŸç¼©æ”¾</strong></p>
<p>å› ä¸ºå®ƒæ˜¯é€šè¿‡æ•°å­¦å…¬å¼ï¼ˆç‚¹ã€çº¿ã€è·¯å¾„ã€å½¢çŠ¶ï¼‰æ¥å®šä¹‰å›¾å½¢ï¼Œæ‰€ä»¥åœ¨ä»»ä½•åˆ†è¾¨ç‡ä¸‹æ”¾å¤§æˆ–ç¼©å°ï¼Œéƒ½ä¸ä¼šå‡ºç°åƒç´ åŒ–çš„é”¯é½¿ï¼Œæ°¸è¿œä¿æŒæ¸…æ™°é”åˆ©ã€‚è¿™æ­£æ˜¯å®ƒåœ¨é«˜åˆ†è¾¨ç‡å±å¹•ï¼ˆRetina, 4Kï¼‰ä¸Šå¤‡å—é’ççš„åŸå› ã€‚</p>
</li>
<li>
<p><strong>ä¸ä»…æ˜¯é™æ€å›¾</strong></p>
<p>SVG çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå…¶ä¸°å¯Œçš„ç‰¹æ€§é›†ï¼Œå®ƒè¿œä¸æ­¢æ˜¯ä¸€å¼ â€œå›¾â€ï¼š</p>
<ul>
<li><strong>æ ·å¼å¯æ§</strong>ï¼šå¯ä»¥é€šè¿‡ CSS åƒæ§åˆ¶ç½‘é¡µå…ƒç´ ä¸€æ ·æ”¹å˜å…¶é¢œè‰²ã€æè¾¹ã€é€æ˜åº¦ã€‚</li>
<li><strong>åŠ¨æ€äº¤äº’</strong>ï¼šå¯ä»¥åµŒå…¥ JavaScriptï¼Œå“åº”ç”¨æˆ·çš„ç‚¹å‡»ã€æ‚¬åœç­‰äº‹ä»¶ã€‚</li>
<li><strong>åŠ¨ç”»æ”¯æŒ</strong>ï¼šæ”¯æŒ SMIL åŠ¨ç”»æˆ–é€šè¿‡ CSS/JS åˆ›å»ºå¤æ‚åŠ¨ç”»ã€‚</li>
<li><strong>å¤æ‚æ•ˆæœ</strong>ï¼šæ”¯æŒé«˜æ–¯æ¨¡ç³Šã€é˜´å½±ã€å„ç§æ¸å˜ç­‰æ»¤é•œæ•ˆæœã€‚</li>
</ul>
</li>
</ul>
<p>ç†è§£äº† SVG çš„è¿™äº›ç‰¹è´¨ï¼Œæˆ‘ä»¬å°±èƒ½æ›´å¥½åœ°ç†è§£ä¸ºä»€ä¹ˆå®ƒåœ¨ Web ä¸–ç•Œå¦‚é±¼å¾—æ°´ï¼Œå´åœ¨ç§»åŠ¨ç«¯ä¸–ç•Œé‡Œæ­¥å±¥è¹’è·šã€‚</p>
<hr/>
<p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ Web å’Œç§»åŠ¨ç«¯åœ¨å¤„ç† SVG æ—¶çš„æ ¹æœ¬å·®å¼‚ã€‚</p>
<h3 data-id="heading-2">1. åŸºå› ä¸åŒï¼šDOM æ¸²æŸ“ vs å›¾å½¢å¼•æ“æ¸²æŸ“</h3>
<h4 data-id="heading-3">Web å‰ç«¯ (æµè§ˆå™¨)</h4>
<ul>
<li><strong>ä¸€ç­‰å…¬æ°‘</strong>ï¼šSVG æœ¬è´¨ä¸Šæ˜¯ XML æ–‡æœ¬ã€‚å®ƒå±äºÂ <strong>DOM æ ‘</strong>çš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥å’ŒÂ <code>&lt;div&gt;</code>,Â <code>&lt;p&gt;</code>ç­‰ HTML å…ƒç´ å¹¶åˆ—å­˜åœ¨ã€‚</li>
<li><strong>å…¨èƒ½å¼•æ“</strong>ï¼šæµè§ˆå™¨å†…ç½®äº†æå…¶å¼ºå¤§çš„æ¸²æŸ“å¼•æ“ï¼ˆWebCore/Blink/Geckoï¼‰ï¼Œèƒ½å¤Ÿç›´æ¥è§£æ SVG çš„æ‰€æœ‰æ ‡ç­¾ã€å±æ€§ï¼Œç”šè‡³æ”¯æŒåœ¨ SVG å†…éƒ¨åµŒå…¥ CSS æ ·å¼å’Œ JS è„šæœ¬ã€‚</li>
</ul>
<h4 data-id="heading-4">ç§»åŠ¨ç«¯ (Native)</h4>
<ul>
<li><strong>ä½å›¾ä¼˜å…ˆ</strong>ï¼šåŸç”Ÿç³»ç»Ÿæ›´æ“…é•¿å¤„ç†ä½å›¾ï¼ˆBitmap/PNG/JPGï¼‰å’Œåº•å±‚çš„å›¾å½¢ç»˜åˆ¶æŒ‡ä»¤ï¼ˆå¦‚ Android çš„ Canvas/Skiaï¼ŒiOS çš„ CoreGraphics/Metalï¼‰ã€‚</li>
<li><strong>æ— å†…ç½®è§£æå™¨</strong>ï¼šåŸç”Ÿç³»ç»Ÿæ²¡æœ‰å†…ç½®ä¸€ä¸ªå®Œæ•´çš„â€œXML è§£æ+æ¸²æŸ“å¼•æ“â€æ¥ä¸“é—¨æœåŠ¡äº UI å›¾æ ‡ã€‚</li>
</ul>
<h3 data-id="heading-5">2. æ ‡å‡†ä¹‹é‡ï¼šSVG çš„å¤æ‚æ€§ vs ç§»åŠ¨ç«¯çš„æ€§èƒ½</h3>
<p>è¿™æ˜¯æœ€æ ¸å¿ƒçš„åŸå› ã€‚SVG æ ‡å‡†ï¼ˆW3C åˆ¶å®šï¼‰éå¸¸åºå¤§ï¼Œå®ƒä¸ä»…ä»…æ˜¯ç”»å‡ æ¡çº¿ï¼Œå®ƒè¿˜æ”¯æŒï¼š</p>
<ul>
<li>âŒ å¤æ‚çš„æ»¤é•œï¼ˆé«˜æ–¯æ¨¡ç³Šã€å…‰ç…§æ•ˆæœç­‰ï¼‰</li>
<li>âŒ æ¸å˜ï¼ˆçº¿æ€§ã€å¾„å‘ã€ç½‘æ ¼ï¼‰</li>
<li>âŒ åŠ¨ç”»ï¼ˆSMILï¼‰</li>
<li>âŒ äº¤äº’ï¼ˆåµŒå…¥ JavaScriptï¼‰</li>
<li>âŒ å¤–éƒ¨èµ„æºï¼ˆå­—ä½“å¼•å…¥ï¼‰</li>
</ul>
<h4 data-id="heading-6">ç§»åŠ¨ç«¯çš„ç—›ç‚¹ï¼š</h4>
<p>è¦åœ¨ç§»åŠ¨ç«¯åŸç”Ÿå®ç°ä¸€ä¸ªæ”¯æŒå®Œæ•´ SVG æ ‡å‡†çš„è§£æå™¨ï¼Œç›¸å½“äºåœ¨ App é‡Œå¡è¿›åŠä¸ªæµè§ˆå™¨å†…æ ¸ã€‚è¿™ä¼šå¯¼è‡´ï¼š</p>
<ul>
<li><strong>åŒ…ä½“ç§¯å‰§å¢</strong>ï¼šä¸ºäº†æ˜¾ç¤ºå‡ ä¸ªå›¾æ ‡å¼•å…¥å‡ å…†çš„æ¸²æŸ“åº“æ˜¯ä¸åˆ’ç®—çš„ã€‚</li>
<li><strong>æ€§èƒ½å¼€é”€å¤§</strong>ï¼šSVG æ˜¯æ–‡æœ¬æ ¼å¼ï¼Œè¿è¡Œæ—¶è§£æ XML éå¸¸æ¶ˆè€— CPUã€‚å¦‚æœåœ¨ä¸€ä¸ªé•¿åˆ—è¡¨ï¼ˆListView/RecyclerViewï¼‰é‡Œæ¯ä¸€è¡Œéƒ½å®æ—¶è§£æ SVGï¼Œæ»‘åŠ¨ä¼šéå¸¸å¡é¡¿ã€‚</li>
</ul>
<h3 data-id="heading-7">3. å„å¹³å°çš„â€œå¦¥åâ€æ–¹æ¡ˆ</h3>
<p>å› ä¸ºåŸç”Ÿä¸æ”¯æŒç›´æ¥æŠŠÂ <code>.svg</code>æ–‡ä»¶æ‰”è¿›å»å½“å›¾ç‰‡ç”¨ï¼ˆå°¤å…¶åœ¨æ—©æœŸç‰ˆæœ¬ï¼‰ï¼Œå„å¹³å°é‡‡ç”¨äº†â€œé˜‰å‰²â€æˆ–â€œè½¬è¯‘â€çš„ç­–ç•¥ï¼š</p>
<h4 data-id="heading-8">ğŸ¤– Android çš„åšæ³•ï¼šVectorDrawable</h4>
<ul>
<li><strong>åŸç†</strong>ï¼šAndroid Studio æä¾›å·¥å…·å°† SVG è½¬è¯‘æˆ Android èƒ½è¯»æ‡‚çš„ XML æ ¼å¼ã€‚</li>
<li><strong>é™åˆ¶</strong>ï¼šVectorDrawable åªæ”¯æŒ SVG çš„ä¸€ä¸ªå­é›†ï¼ˆä¸»è¦æ˜¯ Path è·¯å¾„ã€ç®€å•çš„é¢œè‰²ï¼‰ã€‚å¦‚æœ SVG é‡Œæœ‰å¤æ‚çš„é˜´å½±æˆ–æ»¤é•œï¼Œè½¬æ¢ä¼šå¤±è´¥ã€‚</li>
<li><strong>ä¼˜åŒ–</strong>ï¼šè¿™äº› XML åœ¨ç¼–è¯‘æ—¶ä¼šè¢«å¤„ç†æˆäºŒè¿›åˆ¶æ•°æ®ï¼Œè§£æé€Ÿåº¦è¿œå¿«äºåŸå§‹ SVGã€‚</li>
</ul>
<h4 data-id="heading-9">ğŸ iOS çš„åšæ³•ï¼šPDF / Asset Catalogs</h4>
<ul>
<li><strong>æ—©æœŸ</strong>ï¼šiOS å¼€å‘è€…ä¹ æƒ¯ä½¿ç”¨ PDF çŸ¢é‡å›¾ï¼ˆå› ä¸º PDF æ˜¯è‹¹æœç³»ç»Ÿçš„æ ¸å¿ƒæ ¼å¼ï¼‰ã€‚</li>
<li><strong>ç°åœ¨ (Xcode 12+)</strong> ï¼šiOS ç»ˆäºæ”¯æŒç›´æ¥å¯¼å…¥ SVG äº†ã€‚</li>
<li><strong>çœŸç›¸</strong>ï¼šiOS çš„ SVG æ”¯æŒé€šå¸¸æ˜¯åœ¨ç¼–è¯‘é˜¶æ®µå°†å…¶å¤„ç†ï¼ˆRasterizeï¼‰æˆ PNG ä»¥å…¼å®¹ä½ç‰ˆæœ¬ï¼Œæˆ–è€…ä¿ç•™ä¸ºçŸ¢é‡æ•°æ®ã€‚ä½†åœ¨è¿è¡Œæ—¶ï¼Œå®ƒä¸»è¦è¢«è§†ä¸ºé™æ€å›¾åƒï¼Œä¸åƒ Web é‚£æ ·å¯ä»¥ç”¨ CSS éšæ„ä¿®æ”¹å®ƒçš„å†…éƒ¨èŠ‚ç‚¹ã€‚</li>
</ul>
<h3 data-id="heading-10">4. å…¨æ–¹ä½å¯¹æ¯”</h3>






























<table><thead><tr><th>ç‰¹æ€§</th><th>Web å‰ç«¯</th><th>Android/iOS å®¢æˆ·ç«¯</th></tr></thead><tbody><tr><td><strong>åŠ è½½æ–¹å¼</strong>â€‹</td><td>ç›´æ¥Â <code>&lt;svg&gt;</code>æˆ–Â <code>&lt;img&gt;</code></td><td>éœ€è¦è½¬æ¢æ ¼å¼ (xml/pdf) æˆ–ç‰¹å®šè®¾ç½®</td></tr><tr><td><strong>è§£æèƒ½åŠ›</strong>â€‹</td><td>å…¨åŠŸèƒ½æ”¯æŒ (æ»¤é•œã€åŠ¨ç”»ã€è„šæœ¬)</td><td>ä»…æ”¯æŒå­é›† (ä¸»è¦æ˜¯è·¯å¾„ Path)</td></tr><tr><td><strong>æ€§èƒ½ç“¶é¢ˆ</strong>â€‹</td><td>æµè§ˆå™¨å†…æ ¸å¼ºå¤§ï¼Œè‡ªå¸¦ç¡¬ä»¶åŠ é€Ÿ</td><td>XML è§£æè€— CPUï¼Œéœ€è½¬äºŒè¿›åˆ¶ä¼˜åŒ–</td></tr><tr><td><strong>åŠ¨æ€æ€§</strong>â€‹</td><td>å¯é€šè¿‡ CSS/JS ä¿®æ”¹ä»»æ„ç»†èŠ‚</td><td>ä¿®æ”¹å›°éš¾ï¼Œé€šå¸¸åªèƒ½æ•´ä½“ç€è‰² (Tint)</td></tr></tbody></table>
<h3 data-id="heading-11">5. ç°åœ¨çš„æœ€ä½³å®è·µæ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>å¦‚æœä½ éœ€è¦åœ¨ç§»åŠ¨ç«¯ä½¿ç”¨çŸ¢é‡å›¾ï¼Œç›®å‰é€šå¸¸æœ‰ä»¥ä¸‹å‡ ç§æ ‡å‡†æ–¹æ¡ˆï¼š</p>
<h4 data-id="heading-12">å›¾æ ‡/ç®€å•å›¾å½¢</h4>
<ul>
<li><strong>Android</strong>: ä½¿ç”¨ Android Studio è‡ªå¸¦å·¥å…·è½¬ä¸º VectorDrawable (.xml)ã€‚</li>
<li><strong>iOS</strong>: ç›´æ¥æ”¾å…¥ Xcode Assetsï¼Œå‹¾é€‰ "Preserve Vector Data" å’Œ "Single Scale"ã€‚</li>
</ul>
<h4 data-id="heading-13">å¤æ‚çš„çŸ¢é‡æ’ç”»/åŠ¨ç”»</h4>
<ul>
<li>ğŸš€Â <strong>Lottie (Airbnb å¼€æº)</strong> ï¼šè¿™æ˜¯ç›®å‰çš„è¡Œä¸šæ ‡å‡†ã€‚è®¾è®¡å¸ˆç”¨ After Effects å¯¼å‡º JSONï¼ŒLottie åº“åœ¨ç§»åŠ¨ç«¯æå…¶é«˜æ•ˆåœ°æ¸²æŸ“å‡ºæ¥ï¼Œé¿å¼€äº† SVG è§£æçš„æ€§èƒ½å‘ã€‚</li>
</ul>
<h4 data-id="heading-14">å¿…é¡»æ˜¾ç¤ºåŸå§‹ SVG</h4>
<ul>
<li>å¼•å…¥ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚Â <code>android-svg</code>æˆ–Â <code>SVGKit</code>ï¼‰ï¼Œä»£ä»·æ˜¯å¢åŠ åŒ…ä½“ç§¯ã€‚</li>
<li>ä½¿ç”¨ WebView åŠ è½½ï¼ˆæ€é¸¡ç”¨ç‰›åˆ€ï¼Œä½†å…¼å®¹æ€§æœ€å¥½ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-15">æ€»ç»“</h3>
<p>ç§»åŠ¨ç«¯â€œæ— æ³•åŠ è½½â€SVGï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨<strong>æ€§èƒ½</strong>å’Œ<strong>åŠŸèƒ½</strong>ä¹‹é—´åšçš„å–èˆã€‚ç§»åŠ¨ç«¯åŸç”Ÿç³»ç»Ÿä¸ºäº†è¿½æ±‚æè‡´çš„ UI æµç•…åº¦å’Œä½åŠŸè€—ï¼Œé€‰æ‹©æ”¾å¼ƒäº†åºå¤§ä¸”å¤æ‚çš„ SVG æ ‡å‡†æ”¯æŒï¼Œè½¬è€Œä½¿ç”¨æ›´ç²¾ç®€çš„çŸ¢é‡æ–¹æ¡ˆã€‚è€Œ Web æµè§ˆå™¨ï¼Œä»å…¶è¯ç”Ÿä¹‹åˆå°±ä¸ºè§£æå’Œæ¸²æŸ“è¿™ç±»ç»“æ„åŒ–æ ‡è®°è¯­è¨€è€Œç”Ÿï¼Œå› æ­¤æˆä¸ºäº† SVG æœ€å®Œç¾çš„å®¿ä¸»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026 å¹´çš„ Node.js å·²ç»ä¸æ˜¯é‚£ä¸ªä½ è®¤è¯†çš„ Node.js äº†]]></title>    <link>https://juejin.cn/post/7602454700503597097</link>    <guid>https://juejin.cn/post/7602454700503597097</guid>    <pubDate>2026-02-03T12:22:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602454700503597097" data-draft-id="7602420156397355051" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026 å¹´çš„ Node.js å·²ç»ä¸æ˜¯é‚£ä¸ªä½ è®¤è¯†çš„ Node.js äº†"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Node.js"/> <meta itemprop="datePublished" content="2026-02-03T12:22:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†´ç¾½"/> <meta itemprop="url" content="https://juejin.cn/user/712139234359182"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026 å¹´çš„ Node.js å·²ç»ä¸æ˜¯é‚£ä¸ªä½ è®¤è¯†çš„ Node.js äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/712139234359182/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†´ç¾½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T12:22:24.000Z" title="Tue Feb 03 2026 12:22:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2026 å¹´çš„ Node.js å·²ç»ä¸æ˜¯é‚£ä¸ªä½ è®¤è¯†çš„ Node.js äº†ã€‚</p>
<p>è¿‡å»éœ€è¦å‡ åä¸ªä¾èµ–é¡¹å’Œå¤æ‚é…ç½®æ‰èƒ½å®ç°çš„åŠŸèƒ½ï¼Œç°åœ¨éƒ½å¯ä»¥å¼€ç®±å³ç”¨ã€‚</p>
<p>åŸç”Ÿçš„ TypeScript æ”¯æŒã€å†…ç½®çš„ AI èƒ½åŠ›ã€é»˜è®¤ HTTP/3 åè®®ï¼Œä»¥åŠçœŸæ­£æœ‰æ•ˆçš„æƒé™æ¨¡å‹ï¼Œè¿™äº›éƒ½å·²ç»å°† Node.js ä»ä¸€ä¸ªè¿è¡Œæ—¶ç¯å¢ƒè½¬å˜æˆä¸€ä¸ªå®Œæ•´çš„å¹³å°ã€‚</p>
<p>å¦‚æœä½ æœ€è¿‘æ²¡æœ‰ä½¿ç”¨è¿‡ Node.jsï¼Œé‚£ä½ å¾ˆæœ‰å¯èƒ½é”™è¿‡äº†è¿™äº›åŠŸèƒ½ã€‚</p>
<p>æœ¬ç¯‡è®©æˆ‘ä»¬æ·±å…¥æ¢è®¨è¿™äº›å·²ç»å‘ç”Ÿçš„å˜åŒ–ä»¥åŠå®ƒä»¬çš„é‡è¦æ€§ã€‚</p>
<h2 data-id="heading-0">1. åŸç”Ÿ TypeScript ç±»å‹å‰¥ç¦»ï¼šæ¸¸æˆè§„åˆ™æ”¹å˜è€…</h2>
<p>Node.js æœ€å…·å˜é©æ€§çš„æ–°å¢åŠŸèƒ½æ˜¯<strong>é€šè¿‡ç±»å‹å‰¥ç¦»å®ç°çš„åŸç”Ÿ TypeScript æ”¯æŒ</strong>ã€‚</p>
<p>ä¸å†éœ€è¦ <code>ts-node</code>ã€<code>tsx</code> æˆ–å¤æ‚çš„æ„å»ºé…ç½®ï¼Œä½ åªéœ€è¦ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">node --experimental-strip-types app.ts
</code></pre>
<p>å°±æ˜¯è¿™æ ·ï¼Œä¸€ä¸ªå‚æ•°ï¼Œä½ å°±å¯ä»¥ç›´æ¥åœ¨ Node.js ä¸­è¿è¡Œ TypeScriptã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// server.ts - ä½¿ç”¨ç±»å‹å‰¥ç¦»ç›´æ¥è¿è¡Œ</span>
<span class="hljs-keyword">import</span> { createServer } <span class="hljs-keyword">from</span> <span class="hljs-string">"node:http"</span>;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>;
}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserDatabase</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">users</span>: <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">number</span>, <span class="hljs-title class_">User</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();

  <span class="hljs-title function_">addUser</span>(<span class="hljs-attr">user</span>: <span class="hljs-title class_">User</span>): <span class="hljs-built_in">void</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span>.<span class="hljs-title function_">set</span>(user.<span class="hljs-property">id</span>, user);
  }

  <span class="hljs-title function_">getUser</span>(<span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>): <span class="hljs-title class_">User</span> | <span class="hljs-literal">undefined</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">users</span>.<span class="hljs-title function_">get</span>(id);
  }
}
<span class="hljs-keyword">const</span> db = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserDatabase</span>();
<span class="hljs-keyword">const</span> server = <span class="hljs-title function_">createServer</span>(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, { <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span> });
  res.<span class="hljs-title function_">end</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(db.<span class="hljs-title function_">getAllUsers</span>()));
});
server.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>);
ç±»å‹å‰¥ç¦»çš„å·¥ä½œåŸç†;
</code></pre>
<p>ä¸ä¼ ç»Ÿ TypeScript ç¼–è¯‘ä¸åŒï¼Œç±»å‹å‰¥ç¦»éå¸¸ä¼˜é›…å’Œç®€å•ï¼š</p>
<ol>
<li>
<p><strong>è§£æ</strong> TypeScript æ–‡ä»¶</p>
</li>
<li>
<p><strong>ç§»é™¤</strong> ç±»å‹æ³¨è§£ã€æ¥å£å’Œä»…ç”¨äºç±»å‹çš„æ„é€ </p>
</li>
<li>
<p><strong>æ‰§è¡Œ</strong> ç”Ÿæˆçš„ JavaScript</p>
</li>
</ol>
<p>è¿™ä½¿å¾—ç±»å‹å‰¥ç¦» <strong>æ¯”å®Œæ•´ TypeScript ç¼–è¯‘å¿« 10-20 å€</strong>ï¼Œå› ä¸ºæ²¡æœ‰ç±»å‹æ£€æŸ¥ã€æ²¡æœ‰è½¬æ¢â€”â€”åªæ˜¯ç§»é™¤ç±»å‹è¯­æ³•ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âŒ æ—§æ–¹å¼ - éœ€è¦è½¬æ¢</span>
<span class="hljs-keyword">enum</span> <span class="hljs-title class_">Status</span> {
  <span class="hljs-title class_">Active</span>,
  <span class="hljs-title class_">Inactive</span>,
}

<span class="hljs-comment">// âœ… æ–°æ–¹å¼ - æ”¯æŒç±»å‹å‰¥ç¦»</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Status</span> = { <span class="hljs-title class_">Active</span>: <span class="hljs-string">"ACTIVE"</span>, <span class="hljs-title class_">Inactive</span>: <span class="hljs-string">"INACTIVE"</span> } <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Status</span> = (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Status</span>)[keyof <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Status</span>];
</code></pre>
<p><strong>å¼€å‘æ—¶</strong>ï¼ˆå³æ—¶åˆ·æ–°ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">node --experimental-strip-types --watch server.ts
</code></pre>
<p><strong>ç”Ÿäº§æ—¶</strong>ï¼ˆå•ç‹¬ç±»å‹æ£€æŸ¥ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">tsc --noEmit  <span class="hljs-comment"># ä»…ç±»å‹æ£€æŸ¥</span>
node --experimental-strip-types server.ts
</code></pre>
<p>æ³¨æ„ï¼š<strong>ç±»å‹å‰¥ç¦»ä¸ä¼šå–ä»£ç±»å‹æ£€æŸ¥</strong>â€”â€”å®ƒåªæ˜¯åœ¨å¼€å‘è¿‡ç¨‹ä¸­æ¶ˆé™¤äº†ç¼–è¯‘ç“¶é¢ˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c61c7d8abd2b4c2bad6e1c381757c1b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770777700&amp;x-signature=w0jK5C9oyKPYTtAKovLuAJ%2FEyJg%3D" alt="TypeScriptæ”¯æŒ" loading="lazy"/></p>
<h2 data-id="heading-1">2. HTTP/3 &amp; QUICï¼šé»˜è®¤åŠ é€Ÿ</h2>
<p>HTTP/3 æ”¯æŒç°å·²ç¨³å®šå¹¶é»˜è®¤å¯ç”¨ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { request } <span class="hljs-keyword">from</span> <span class="hljs-string">"node:http"</span>;

<span class="hljs-keyword">const</span> req = <span class="hljs-title function_">request</span>(<span class="hljs-string">"https://api.example.com/data"</span>, <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Protocol:"</span>, res.<span class="hljs-property">httpVersion</span>); <span class="hljs-comment">// 3.0</span>
  res.<span class="hljs-title function_">on</span>(<span class="hljs-string">"data"</span>, <span class="hljs-function">(<span class="hljs-params">chunk</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chunk.<span class="hljs-title function_">toString</span>()));
});
req.<span class="hljs-title function_">end</span>();
</code></pre>
<p><strong>ä½¿ç”¨å®ƒçš„ä¼˜åŠ¿åœ¨äºï¼š</strong></p>
<ul>
<li>
<p>é€Ÿåº¦æå‡ï¼šå®é™…ç¯å¢ƒä¸‹å“åº”é€Ÿåº¦æå‡ 20%â€“50%</p>
</li>
<li>
<p>è¿æ¥è¿ç§»ï¼šWiFi å’Œèœ‚çªç½‘ç»œä¹‹é—´çš„æ— ç¼åˆ‡æ¢</p>
</li>
<li>
<p>æ— é˜Ÿå¤´é˜»å¡ï¼šæ¯” HTTP/2 å…·æœ‰æ›´å¥½çš„å¤šè·¯å¤ç”¨æ€§èƒ½</p>
</li>
<li>
<p>å†…ç½®åŠ å¯†ï¼šQUIC å¼ºåˆ¶ä½¿ç”¨ TLS 1.3ã€‚</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85ac42499f7e4becbcda8bd9b9a5f0d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770777700&amp;x-signature=ZfxYbDAZmox3SvLB4TCGD%2BwU5z0%3D" alt="HTTP/3åŠ é€Ÿ" loading="lazy"/></p>
<h2 data-id="heading-2">3. åŸç”Ÿ WebGPU ç”¨äº AI/ML å·¥ä½œè´Ÿè½½</h2>
<p>WebGPU API æ”¯æŒåœ¨ Node.js ä¸­ç›´æ¥è¿›è¡Œ GPU åŠ é€Ÿè®¡ç®—ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">GPU</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"node:webgpu"</span>;

<span class="hljs-keyword">const</span> adapter = <span class="hljs-keyword">await</span> navigator.<span class="hljs-property">gpu</span>.<span class="hljs-title function_">requestAdapter</span>();
<span class="hljs-keyword">const</span> device = <span class="hljs-keyword">await</span> adapter.<span class="hljs-title function_">requestDevice</span>();
<span class="hljs-comment">// Run matrix operations on GPU for AI inference</span>
<span class="hljs-keyword">const</span> computeShader = <span class="hljs-string">`
  @compute @workgroup_size(256)
  fn main(@builtin(global_invocation_id) id: vec3&lt;u32&gt;) {
    output[id.x] = tanh(input[id.x]);
  }
`</span>;
</code></pre>
<p><strong>ä½ å¯ä»¥ç”¨äºï¼š</strong></p>
<ul>
<li>
<p>æœ¬åœ° LLM æ¨ç†ï¼ˆLlamaã€Mistral æ¨¡å‹ï¼‰</p>
</li>
<li>
<p>å›¾åƒ/è§†é¢‘å¤„ç†</p>
</li>
<li>
<p>å®æ—¶æ•°æ®åˆ†æ</p>
</li>
<li>
<p>ç§‘å­¦è®¡ç®—</p>
</li>
</ul>
<p>è¿™ä½¿å¾— Node.js å¯ä»¥ç”¨äºä»¥å‰éœ€è¦ Python æˆ–åŸç”Ÿç»‘å®šæ‰èƒ½è¿è¡Œçš„ AI/ML å·¥ä½œè´Ÿè½½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ced6d4231fcd4a72b3c0676bd721b3c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770777700&amp;x-signature=w8hiypJsx4Rw78Ni7DhjP%2FxEodc%3D" alt="WebGPU AIèƒ½åŠ›" loading="lazy"/></p>
<h2 data-id="heading-3">4. æƒé™æ¨¡å‹ï¼šç»†ç²’åº¦å®‰å…¨</h2>
<p>ç¨³å®šçš„æƒé™æ¨¡å‹ä½¿ä½ å¯ä»¥å¯¹è¿è¡Œæ—¶è®¿é—®æƒé™è¿›è¡Œç²¾ç»†æ§åˆ¶ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"># <span class="hljs-title class_">Restrict</span> file system and network access
node --allow-fs-read=./data --allow-net=api.<span class="hljs-property">example</span>.<span class="hljs-property">com</span> app.<span class="hljs-property">js</span>

# <span class="hljs-title class_">Disable</span> child processes
node --no-allow-child-process app.<span class="hljs-property">js</span>
<span class="hljs-keyword">import</span> { readFile } <span class="hljs-keyword">from</span> <span class="hljs-string">'node:fs/promises'</span>;

<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">readFile</span>(<span class="hljs-string">'/etc/passwd'</span>, <span class="hljs-string">'utf-8'</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Access denied:'</span>, err.<span class="hljs-property">code</span>); <span class="hljs-comment">// ERR_ACCESS_DENIED</span>
}
</code></pre>
<p>éå¸¸é€‚åˆè¿è¡Œä¸å—ä¿¡ä»»çš„ä»£ç ã€å…·æœ‰æœ€å°æƒé™çš„å¾®æœåŠ¡ï¼Œä»¥åŠå…·æœ‰å®‰å…¨çº¦æŸçš„è¾¹ç¼˜éƒ¨ç½²ã€‚</p>
<h2 data-id="heading-4">5. å†…ç½® SQLite å¢å¼ºåŠŸèƒ½</h2>
<p>åŸç”Ÿ SQLite æ”¯æŒå·²ç»æˆç†Ÿï¼Œå…·æœ‰æµå¼ä¼ è¾“å’Œæ€§èƒ½ä¼˜åŒ–ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">DatabaseSync</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"node:sqlite"</span>;

<span class="hljs-keyword">const</span> db = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatabaseSync</span>(<span class="hljs-string">"./app.db"</span>);

db.<span class="hljs-title function_">exec</span>(<span class="hljs-string">`CREATE TABLE IF NOT EXISTS users ( 
  id INTEGER PRIMARY KEY, 
  name TEXT, 
  email TEXT UNIQUE
)`</span>);

<span class="hljs-keyword">const</span> insert = db.<span class="hljs-title function_">prepare</span>(<span class="hljs-string">"INSERT INTO users (name, email) VALUES (?, ?)"</span>);
insert.<span class="hljs-title function_">run</span>(<span class="hljs-string">"Alice"</span>, <span class="hljs-string">"alice@example.com"</span>);

<span class="hljs-comment">// æ–°å¢ï¼šç”¨äºå¤§æ•°æ®é›†çš„æµå¼ä¼ è¾“</span>
<span class="hljs-keyword">const</span> stream = db.<span class="hljs-title function_">prepareStream</span>(<span class="hljs-string">"SELECT * FROM large_table"</span>);

<span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> row <span class="hljs-keyword">of</span> stream) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(row);
}
</code></pre>
<p><strong>ä½¿ç”¨å®ƒçš„ä¼˜åŠ¿åœ¨äºï¼š</strong></p>
<ul>
<li>
<p>æ‰¹é‡æ’å…¥é€Ÿåº¦æå‡ 10 å€</p>
</li>
<li>
<p>æµå¼ API æé«˜å†…å­˜æ•ˆç‡</p>
</li>
<li>
<p>æ›´å¥½çš„é”™è¯¯å¤„ç†</p>
</li>
<li>
<p>è‡ªåŠ¨è¿æ¥æ± </p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/369378ec51c247bd9420da5918ab1072~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770777700&amp;x-signature=66%2BQuS%2FOLM0jo95ADimI9ZcwJlc%3D" alt="å†…ç½®SQLite" loading="lazy"/></p>
<h2 data-id="heading-5">6. ç¯å¢ƒæ–‡ä»¶å’Œé…ç½®</h2>
<p><code>--env-file</code> æ ‡å¿—ç°åœ¨æ”¯æŒå¤šä¸ªæ–‡ä»¶ï¼Œå¹¶å†…ç½®äº†éªŒè¯åŠŸèƒ½ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">node --env-file=.<span class="hljs-built_in">env</span> --env-file=.env.local app.js
</code></pre>
<p><strong>éªŒè¯åŠŸèƒ½ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { env } <span class="hljs-keyword">from</span> <span class="hljs-string">"node:process"</span>;

<span class="hljs-comment">// å†…ç½®æ¶æ„éªŒè¯ï¼ˆ2026 å¹´æ–°å¢ï¼‰</span>
<span class="hljs-keyword">const</span> config = env.<span class="hljs-title function_">validate</span>({
  <span class="hljs-attr">PORT</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">"number"</span>, <span class="hljs-attr">default</span>: <span class="hljs-number">3000</span> },
  <span class="hljs-attr">DATABASE_URL</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">"string"</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span> },
  <span class="hljs-attr">DEBUG</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">"boolean"</span>, <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span> },
  <span class="hljs-attr">API_KEYS</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">"array"</span>, <span class="hljs-attr">separator</span>: <span class="hljs-string">","</span> },
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(config);
<span class="hljs-comment">// { PORT: 3000, DATABASE_URL: '...', DE<span class="hljs-doctag">BUG:</span> false, API_KEYS: ['key1', 'key2'] }</span>
</code></pre>
<p>ä¸å†éœ€è¦ <code>dotenv</code> åŒ…ã€‚é…ç½®éªŒè¯æ˜¯å†…ç½®çš„ã€‚</p>
<h2 data-id="heading-6">7. ç›‘è§†æ¨¡å¼çš„æ¼”è¿›</h2>
<p>ç›‘è§†æ¨¡å¼ç°åœ¨æ›´æ™ºèƒ½ï¼Œå…·æœ‰å¯é…ç½®çš„è¡Œä¸ºå’Œæ¨¡å¼åŒ¹é…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¸¦å»æŠ–åŠ¨çš„ç›‘è§†</span>
node --watch=500ms server.js

<span class="hljs-comment"># ç›‘è§†ç‰¹å®šæ¨¡å¼</span>
node --watch=<span class="hljs-string">'src/**/*.js'</span> --watch=<span class="hljs-string">'config/*.json'</span> app.js
<span class="hljs-comment"># é‡å¯æ—¶ä¿ç•™è¾“å‡º</span>
node --watch --watch-preserve-output server.js
<span class="hljs-comment"># ä¸ TypeScript ç»“åˆ</span>
node --experimental-strip-types --watch server.ts
</code></pre>
<p><strong>ç¼–ç¨‹å¼ç›‘è§† APIï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { watch } <span class="hljs-keyword">from</span> <span class="hljs-string">"node:fs"</span>;

<span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> event <span class="hljs-keyword">of</span> <span class="hljs-title function_">watch</span>(<span class="hljs-string">"./src"</span>, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> })) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${event.filename}</span> was <span class="hljs-subst">${event.eventType}</span>`</span>);
  <span class="hljs-comment">// è‡ªå®šä¹‰é‡æ–°åŠ è½½é€»è¾‘</span>
}
</code></pre>
<p>ä¸å†éœ€è¦ <code>nodemon</code>ï¼Œç›‘è§†æ¨¡å¼å¯ä»¥å¤„ç†ä»å¼€å‘åˆ°æµ‹è¯•çš„æ‰€æœ‰ç¯èŠ‚ï¼Œå¹¶æä¾›ç²¾ç»†çš„æ§åˆ¶ã€‚</p>
<h2 data-id="heading-7">8. å†…ç½®æµ‹è¯•è¿è¡Œç¨‹åºæˆç†Ÿåº¦</h2>
<p>åŸç”Ÿæµ‹è¯•è¿è¡Œç¨‹åºåœ¨åŠŸèƒ½ä¸Šå·²ç»å¯ä»¥ä¸ Jest å’Œ Mocha ç›¸åª²ç¾ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { test, describe, beforeEach, mock } <span class="hljs-keyword">from</span> <span class="hljs-string">"node:test"</span>;
<span class="hljs-keyword">import</span> assert <span class="hljs-keyword">from</span> <span class="hljs-string">"node:assert"</span>;

<span class="hljs-title function_">describe</span>(<span class="hljs-string">"User API"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">() =&gt;</span> {
    db = <span class="hljs-title function_">createTestDB</span>();
  });

  <span class="hljs-comment">// å¿«ç…§æµ‹è¯•å†…ç½®</span>
  <span class="hljs-title function_">test</span>(<span class="hljs-string">"user response format"</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUser</span>(<span class="hljs-number">1</span>);
    assert.<span class="hljs-title function_">snapshot</span>(user);
  });

  <span class="hljs-comment">// æ— éœ€åº“çš„æ¨¡æ‹Ÿ</span>
  <span class="hljs-title function_">test</span>(<span class="hljs-string">"handles API failure"</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> mockFetch = mock.<span class="hljs-title function_">fn</span>(fetch, <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Network error"</span>);
    });

    <span class="hljs-keyword">await</span> assert.<span class="hljs-title function_">rejects</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">syncUserData</span>(), <span class="hljs-regexp">/Network error/</span>);
    assert.<span class="hljs-title function_">strictEqual</span>(mockFetch.<span class="hljs-property">mock</span>.<span class="hljs-property">calls</span>.<span class="hljs-property">length</span>, <span class="hljs-number">3</span>);
  });

  <span class="hljs-comment">// é»˜è®¤å¹¶è¡Œæ‰§è¡Œ</span>
  test.<span class="hljs-title function_">concurrent</span>(<span class="hljs-string">"test 1"</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">/* ... */</span>
  });
  test.<span class="hljs-title function_">concurrent</span>(<span class="hljs-string">"test 2"</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-comment">/* ... */</span>
  });
});
</code></pre>
<p><strong>å¸¦è¦†ç›–ç‡è¿è¡Œï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">node --<span class="hljs-built_in">test</span> --experimental-test-coverage --test-reporter=spec
</code></pre>
<p><strong>è¾“å‡ºï¼š</strong></p>
<pre><code class="hljs language-plaintext" lang="plaintext">âœ“ User API &gt; user response format (2ms)
âœ“ User API &gt; handles API failure (15ms)
âœ“ User API &gt; test 1 (45ms)

Coverage: 87.5% (70/80 lines)
</code></pre>
<p>åŠŸèƒ½åŒ…æ‹¬å¿«ç…§æµ‹è¯•ã€å†…ç½®æ¨¡æ‹Ÿã€å¹¶è¡Œæ‰§è¡Œå’Œä»£ç è¦†ç›–ç‡â€”â€”æ— éœ€å®‰è£… Jestã€Mocha æˆ– Sinonã€‚</p>
<h2 data-id="heading-8">9. å¢å¼ºçš„å·¥ä½œçº¿ç¨‹</h2>
<p>å·¥ä½œçº¿ç¨‹ç°åœ¨æ”¯æŒ SharedArrayBufferï¼Œå¹¶ä¸” API æ›´ç®€å•ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Worker</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"node:worker_threads"</span>;

<span class="hljs-keyword">const</span> sharedBuffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SharedArrayBuffer</span>(<span class="hljs-number">1024</span>);
<span class="hljs-keyword">const</span> sharedArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Int32Array</span>(sharedBuffer);

<span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(
  <span class="hljs-string">`
  import { parentPort, workerData } from 'node:worker_threads';
  const array = new Int32Array(workerData.buffer);
  
  for (let i = 0; i &lt; 1000; i++) {
    Atomics.add(array, 0, 1);
  }
  
  parentPort.postMessage('done');
`</span>,
  { <span class="hljs-attr">eval</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">workerData</span>: { <span class="hljs-attr">buffer</span>: sharedBuffer } },
);

worker.<span class="hljs-title function_">on</span>(<span class="hljs-string">"message"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Counter:"</span>, sharedArray[<span class="hljs-number">0</span>]); <span class="hljs-comment">// 1000</span>
});
</code></pre>
<p><strong>æ–°çš„å·¥ä½œçº¿ APIï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">WorkerPool</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"node:worker_threads"</span>;

<span class="hljs-keyword">const</span> pool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WorkerPool</span>(<span class="hljs-string">"./compute-worker.js"</span>, { <span class="hljs-attr">size</span>: <span class="hljs-number">4</span> });
<span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(tasks.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">task</span>) =&gt;</span> pool.<span class="hljs-title function_">exec</span>(task)));

<span class="hljs-keyword">await</span> pool.<span class="hljs-title function_">close</span>();
</code></pre>
<h2 data-id="heading-9">10. ç°ä»£ ECMAScript ç‰¹æ€§</h2>
<p>Node.js 2026 ç‰ˆæœ¬ç¨³å®šæ”¯æŒæœ€æ–°çš„ JavaScript ç‰¹æ€§ï¼š</p>
<p><strong>Records &amp; Tuples</strong>ï¼ˆä¸å¯å˜æ•°æ®ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> user = #{ <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"Alice"</span> };
<span class="hljs-keyword">const</span> updated = #{ ...user, <span class="hljs-attr">name</span>: <span class="hljs-string">"Alice Smith"</span> };
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(#{ <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> } === #{ <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> }); <span class="hljs-comment">// true!</span>
</code></pre>
<p><strong>ç®¡é“æ“ä½œç¬¦</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> result = userId |&gt; fetchUser |&gt; validateUser |&gt; transformData |&gt; saveToDatabase;
</code></pre>
<p><strong>æ¨¡å¼åŒ¹é…</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">handle</span> = (<span class="hljs-params">res</span>) =&gt; match (res) {
  when ({ <span class="hljs-attr">status</span>: <span class="hljs-number">200</span>, data }): data,
  when ({ <span class="hljs-attr">status</span>: <span class="hljs-number">404</span> }): <span class="hljs-literal">null</span>,
  when ({ <span class="hljs-attr">status</span>: s }) <span class="hljs-keyword">if</span> (s &gt;= <span class="hljs-number">500</span>): <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Server error'</span>),
  <span class="hljs-attr">default</span>: <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Unknown'</span>)
};
</code></pre>
<h2 data-id="heading-10">11. æ€»ç»“</h2>
<p>Node.js åœ¨ 2026 å¹´ä¸ä»…ä»…æ˜¯ä¸€ä¸ªå¢é‡æ›´æ–°â€”â€”å®ƒæ˜¯ä¸€ä¸ªèŒƒå¼è½¬å˜ï¼š</p>
<p>âœ… <strong>åŸç”Ÿ TypeScript</strong> = å¼€å‘æ— éœ€æ„å»ºå·¥å…·<br/>
âœ… <strong>ç±»å‹å‰¥ç¦»</strong> = æ¯”ç¼–è¯‘å¿« 10-20 å€<br/>
âœ… <strong>HTTP/3</strong> = å®é™…æ€§èƒ½æå‡<br/>
âœ… <strong>WebGPU</strong> = æ— éœ€ Python çš„ AI/ML<br/>
âœ… <strong>æƒé™æ¨¡å‹</strong> = ç”Ÿäº§çº§å®‰å…¨<br/>
âœ… <strong>å†…ç½® SQLite</strong> = æ— ä¾èµ–æ•°æ®åº“<br/>
âœ… <strong>ç¯å¢ƒéªŒè¯</strong> = ä¸å†éœ€è¦ dotenv<br/>
âœ… <strong>æ™ºèƒ½ç›‘è§†æ¨¡å¼</strong> = ä¸å†éœ€è¦ nodemon<br/>
âœ… <strong>æµ‹è¯•è¿è¡Œå™¨</strong> = ä¸å†éœ€è¦ Jest/Mocha<br/>
âœ… <strong>ç°ä»£ JavaScript</strong> = recordsã€tuplesã€ç®¡é“ã€æ¨¡å¼åŒ¹é…</p>
<p>æ—§ç‰ˆ Node.js éœ€è¦ 50 å¤šä¸ªè½¯ä»¶åŒ…æ‰èƒ½é«˜æ•ˆè¿è¡Œã€‚æ–°ç‰ˆ Node.js å†…ç½®äº†å¤§éƒ¨åˆ†æ‰€éœ€åŠŸèƒ½ï¼Œå¹¶ä¸”é›†æˆåº¦æ›´é«˜ï¼Œæ€§èƒ½æ›´ä½³ã€‚</p>
<p>äºæ˜¯å®ç°äº†æ›´å°‘çš„ä¾èµ–ã€æ›´å¿«çš„å¼€å‘ã€æ›´å¥½çš„å®‰å…¨ï¼Œä»¥åŠä»¥å‰ä¸å¯èƒ½å®ç°çš„æ–°èƒ½åŠ›ã€‚</p>
<p>å¦‚æœä½ è¿˜æ²¡åœ¨ 2026 å¹´æ¢ç´¢è¿‡ Node.jsï¼Œç°åœ¨æ­£æ˜¯æ—¶å€™ã€‚è¿™ä¸ªå¹³å°å·²ç»å‘ç”Ÿäº†æ ¹æœ¬æ€§çš„å˜é©ï¼Œè¿‡å»çš„ç§ç§é™åˆ¶æ—©å·²ä¸å†é€‚ç”¨ã€‚</p>
<p>æˆ‘æ˜¯å†´ç¾½ï¼Œ10 å¹´ç¬”è€•ä¸è¾ï¼Œä¸“æ³¨å‰ç«¯é¢†åŸŸï¼Œæ›´æ–°äº† 10+ ç³»åˆ—ã€300+ ç¯‡åŸåˆ›æŠ€æœ¯æ–‡ç« ï¼Œç¿»è¯‘è¿‡ Svelteã€Solid.jsã€TypeScript æ–‡æ¡£ï¼Œè‘—æœ‰å°å†Œã€ŠNext.js å¼€å‘æŒ‡å—ã€‹ã€ã€ŠSvelte å¼€å‘æŒ‡å—ã€‹ã€ã€ŠAstro å®æˆ˜æŒ‡å—ã€‹ã€‚</p>
<p>æ¬¢è¿å›´è§‚æˆ‘çš„â€œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fyayujs.com%2F" target="_blank" title="https://yayujs.com/" ref="nofollow noopener noreferrer">ç½‘é¡µç‰ˆæœ‹å‹åœˆ</a>â€ï¼Œå…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼š<strong>å†´ç¾½ï¼ˆæˆ–æœç´¢ yayujsï¼‰</strong>ï¼Œæ¯å¤©åˆ†äº«å‰ç«¯çŸ¥è¯†ã€AI å¹²è´§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Javaç¨‹åºå‘˜å¿…åšé¡¹ç›®ï¼åŸºäºLangChainå®ç°çš„ReActæ™ºèƒ½ä½“é¡¹ç›®ã€‚åŠ©ä½ æ‹¿offerï¼ï¼ˆç¬¬ä¸€æœŸï¼‰]]></title>    <link>https://juejin.cn/post/7602512064976109631</link>    <guid>https://juejin.cn/post/7602512064976109631</guid>    <pubDate>2026-02-04T00:41:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602512064976109631" data-draft-id="7602482736913236003" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Javaç¨‹åºå‘˜å¿…åšé¡¹ç›®ï¼åŸºäºLangChainå®ç°çš„ReActæ™ºèƒ½ä½“é¡¹ç›®ã€‚åŠ©ä½ æ‹¿offerï¼ï¼ˆç¬¬ä¸€æœŸï¼‰"/> <meta itemprop="keywords" content="åç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-04T00:41:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ„Ÿæ€§çš„ç¨‹åºå‘˜å°ç‹"/> <meta itemprop="url" content="https://juejin.cn/user/1915806770272506"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Javaç¨‹åºå‘˜å¿…åšé¡¹ç›®ï¼åŸºäºLangChainå®ç°çš„ReActæ™ºèƒ½ä½“é¡¹ç›®ã€‚åŠ©ä½ æ‹¿offerï¼ï¼ˆç¬¬ä¸€æœŸï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1915806770272506/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ„Ÿæ€§çš„ç¨‹åºå‘˜å°ç‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T00:41:31.000Z" title="Wed Feb 04 2026 00:41:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»34åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. é¡¹ç›®ä»‹ç»</h2>
<p>ä½¿ç”¨ LangChain æ¡†æ¶ä»¥åŠ LangServe å¹¶ç»“åˆé˜¿é‡Œäº‘ dashscope qwen å¤§æ¨¡å‹ å¼€å‘çš„ ä¸“ä¸ºè§£å†³ Java å¼€å‘é—®é¢˜ AI æ™ºèƒ½ä½“ï¼Œå®ç°äº† RAG(æ£€ç´¢å¢å¼º)ï¼ŒçŸ¥è¯†åº“ï¼Œå‘é‡è½¬åŒ–ï¼Œæ–‡æ¡£åˆ†å‰²ï¼ŒåŸºäº sqllite çš„å¯¹è¯è®°å¿†ï¼ŒåŸºäº redis çš„è¯­ä¹‰åŒ–ç¼“å­˜ï¼Œå·¥å…·è°ƒç”¨ã€‚</p>
<h2 data-id="heading-1">2. æŠ€æœ¯æ ˆ</h2>
<ul>
<li>python3.11</li>
<li>LangChain æ¡†æ¶ï¼šå®ç°æ ¸å¿ƒçš„æ™ºèƒ½ä½“é€»è¾‘ï¼ŒåŒ…æ‹¬å·¥å…·è°ƒç”¨ï¼ŒRAGï¼ŒçŸ¥è¯†åº“ï¼Œå‘é‡è½¬åŒ–ï¼Œå¯¹è¯è®°å¿†ï¼Œç¼“å­˜ç­‰</li>
<li>LangServe:å®ç°å¯¹å¤–æš´éœ²å¯è°ƒç”¨çš„ http æ¥å£åŠŸèƒ½</li>
<li>FastAPI:é…åˆ LangServe å¯¹å¤–æš´éœ²ä¸€ç³»åˆ—æ¥å£ï¼Œæä¾›æœåŠ¡</li>
<li>SlowAPI:ä¿æŠ¤ FastAPI æ‰€æš´éœ²æ¥å£ï¼Œå®ç°æ¥å£çš„é™æµ</li>
<li>Redis:å®ç°åŸºäº redis çš„è¯­ä¹‰åŒ–ç¼“å­˜ï¼Œæå‡æ•´ä¸ªç³»ç»Ÿçš„å“åº”é€Ÿåº¦å’Œæ€§èƒ½</li>
<li>sqlliteï¼ˆpy å†…ç½®ï¼‰ï¼šå®ç°æœ¬åœ°çš„ sql å¯¹è¯è®°å¿†</li>
<li>Chroma æœ¬åœ°å‘é‡æ•°æ®åº“ï¼šå­˜å‚¨åˆ‡å‰²åæ–‡æœ¬å—çš„å‘é‡å€¼</li>
</ul>
<h2 data-id="heading-2">3. æ ¸å¿ƒåŠŸèƒ½</h2>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ™ºèƒ½ä½“å®ŒæˆåŸºæœ¬çš„å¯¹è¯ï¼Œç³»ç»Ÿå†…éƒ¨è¿˜ä¼šæ ¹æ®ç°æœ‰çš„çŸ¥è¯†åº“æ–‡æ¡£ï¼Œè¾¾åˆ°ç±»ä¼¼å¢å¼º ai çŸ¥è¯†é¢çš„åŠŸèƒ½ï¼Œè®© ai å›å¤çš„æ•ˆæœæ›´å¥½ï¼Œå½“çŸ¥è¯†åº“å†…å®¹ä¸è¶³ä»¥æ”¯æ’‘ ai å›ç­”ç”¨çš„é—®é¢˜çš„æ—¶å€™ï¼Œè¿˜å¯ä»¥è‡ªåŠ¨è¿›è¡Œè”ç½‘æœç´¢ï¼Œè¿›è¡Œç½‘é¡µæŠ“å–ï¼Œè¿›ä¸€æ­¥è®© ai å›å¤çš„æ•ˆæœæ›´å‡†ç¡®</p>
<h2 data-id="heading-3">4. ç¯å¢ƒæ­å»º</h2>
<h3 data-id="heading-4">4.1 æ­å»ºPythonå¼€å‘ç¯å¢ƒ</h3>
<p>-é¦–å…ˆå‡†å¤‡å¥½æœ¬åœ°çš„ python ç¯å¢ƒï¼ˆ3.11ï¼‰ï¼Œä½¿ç”¨ pycharm åˆ›å»ºä¸€ä¸ª python é¡¹ç›® <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e889e031cd2b4ba48e38e66e9e81b07e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oSf5oCn55qE56iL5bqP5ZGY5bCP546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770770491&amp;x-signature=hbjibhvuIjvyBlZLX%2FmGcNSMd6A%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p>å¦‚å›¾æ‰€ç¤ºï¼Œè¿™é‡Œè¦ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼Œä»¥ä¾¿äºæˆ‘ä»¬åšå®Œé¡¹ç›®ä¹‹åå°±å¯ä»¥ç›´æ¥å°†é¡¹ç›®çš„æ–‡ä»¶å¤¹ç›´æ¥æ‰“æˆä¸€ä¸ªå‹ç¼©åŒ…å‘ç»™å…¶ä»–äººæˆ–è€…ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œç›´æ¥æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼Œä½¿ç”¨<strong>python</strong>å‘½ä»¤ç›´æ¥è¿è¡Œ main.py å°±èƒ½ç›´æ¥å¯åŠ¨è¿™ä¸ªé¡¹ç›®ï¼Œè€Œä¸ç”¨å†å»ä½¿ç”¨<strong>pip install</strong>å»å®‰è£…æ‰€éœ€çš„ç¬¬ä¸‰æ–¹åº“</p>
</li>
<li>
<p>ç‚¹å‡» create å°±å¾—åˆ°äº†ä¸€ä¸ªæ–°çš„ python é¡¹ç›® <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ad90b6b62b5430a8d6ecf781a63ace7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oSf5oCn55qE56iL5bqP5ZGY5bCP546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770770491&amp;x-signature=Lp6K4B5XMN58oB1T5hL5QkdYYjw%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">ä½¿ç”¨ LangChain æ¡†æ¶è¿›è¡Œ ReAct AI æ™ºèƒ½ä½“å¼€å‘</h3>
<p>1ã€ä»€ä¹ˆæ˜¯ ReAct æ™ºèƒ½ä½“ï¼Ÿ -ReAct æ˜¯ä¸€ç§ç»“åˆæ¨ç†ï¼ˆReasoningï¼‰å’Œè¡ŒåŠ¨ï¼ˆActingï¼‰çš„è®¾è®¡æ€æƒ³ï¼Œæ—¨åœ¨ä½¿ AI æ™ºèƒ½ä½“åœ¨å¤æ‚å’ŒåŠ¨æ€çš„ç¯å¢ƒä¸­æ›´æœ‰æ•ˆåœ°å·¥ä½œã€‚ReAct ç”± Google Research çš„ Brain Team äº 2022 å¹´ 10 æœˆæå‡ºï¼Œæ˜¯ Auto-GPT ç­‰ AI Agent çš„åŸºç¡€ç»„ä»¶ã€‚ è¯´äººè¯å°±æ˜¯è®© AI æ›´æ™ºèƒ½æ›´åƒäººï¼Œäººå’ŒåŠ¨ç‰©çš„æœ€å¤§åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œäººå¯ä»¥æ€è€ƒï¼Œå¯ä»¥ä½¿ç”¨å·¥å…·å¯¹å§ã€‚æ‰€ä»¥åœ¨è®© AI å›ç­”æˆ‘ä»¬çš„é—®é¢˜çš„æ—¶å€™ï¼Œä¹Ÿè®©ä»–æ·±åº¦æ€è€ƒæˆ‘ä»¬æ‰€æå‡ºçš„é—®é¢˜ï¼Œå¹¶è¿›è¡ŒåŠ¨æ€çš„å†³ç­–ï¼Œæ˜¯å¦éœ€è¦ä½¿ç”¨å·¥å…·</p>
<p>2ã€é‚£ LangChain åˆæ˜¯ä¸€ä¸ªä»€ä¹ˆæ¡†æ¶ï¼Œæˆ‘ä»¬æ¥çœ‹å®˜æ–¹è§£é‡Š</p>
<p><strong>LangChain æ˜¯ä¸€ä¸ªç”¨äºå¼€å‘ç”±è¯­è¨€æ¨¡å‹é©±åŠ¨çš„åº”ç”¨ç¨‹åºçš„æ¡†æ¶ã€‚å®ƒä½¿å¾—åº”ç”¨ç¨‹åºèƒ½å¤Ÿï¼š å…·æœ‰ä¸Šä¸‹æ–‡æ„ŸçŸ¥èƒ½åŠ›ï¼šå°†è¯­è¨€æ¨¡å‹è¿æ¥åˆ°ä¸Šä¸‹æ–‡æ¥æºï¼ˆæç¤ºæŒ‡ä»¤ï¼Œå°‘é‡çš„ç¤ºä¾‹ï¼Œéœ€è¦å›åº”çš„å†…å®¹ç­‰ï¼‰ å…·æœ‰æ¨ç†èƒ½åŠ›ï¼šä¾èµ–è¯­è¨€æ¨¡å‹è¿›è¡Œæ¨ç†ï¼ˆæ ¹æ®æä¾›çš„ä¸Šä¸‹æ–‡å¦‚ä½•å›ç­”ï¼Œé‡‡å–ä»€ä¹ˆè¡ŒåŠ¨ç­‰ï¼‰ è¿™ä¸ªæ¡†æ¶ç”±å‡ ä¸ªéƒ¨åˆ†ç»„æˆã€‚ LangChain åº“ï¼šPython å’Œ JavaScript åº“ã€‚åŒ…å«äº†å„ç§ç»„ä»¶çš„æ¥å£å’Œé›†æˆï¼Œä¸€ä¸ªåŸºæœ¬çš„è¿è¡Œæ—¶ï¼Œç”¨äºå°†è¿™äº›ç»„ä»¶ç»„åˆæˆé“¾å’Œä»£ç†ï¼Œä»¥åŠç°æˆçš„é“¾å’Œä»£ç†çš„å®ç°ã€‚ LangChain æ¨¡æ¿ï¼šä¸€ç³»åˆ—æ˜“äºéƒ¨ç½²çš„å‚è€ƒæ¶æ„ï¼Œç”¨äºå„ç§ä»»åŠ¡ã€‚ LangServeï¼šä¸€ä¸ªç”¨äºå°† LangChain é“¾éƒ¨ç½²ä¸º REST API çš„åº“ã€‚ LangSmithï¼šä¸€ä¸ªå¼€å‘è€…å¹³å°ï¼Œè®©ä½ å¯ä»¥è°ƒè¯•ã€æµ‹è¯•ã€è¯„ä¼°å’Œç›‘æ§åŸºäºä»»ä½• LLM æ¡†æ¶æ„å»ºçš„é“¾ï¼Œå¹¶ä¸”ä¸ LangChain æ— ç¼é›†æˆã€‚</strong> è¿™æ˜¯ LangChain çš„å®˜æ–¹æ¶æ„å›¾ <img src="https://python.langchain.com/svg/langchain_stack.svg" alt="" loading="lazy"/></p>
</li>
</ul>
<p>æˆ‘ä»¬ä¼šä½¿ç”¨ LangChain å¼€ç¼–å†™ AI åº”ç”¨ï¼Œå¿«é€Ÿå¼€å§‹ï¼ŒåŒæ—¶ä½¿ç”¨ LangServe æ¥å°† LangChain ä¸­çš„ä»»ä½•é“¾è½¬åŒ–ä¸º API</p>
<h3 data-id="heading-6">4.2LangChain å¿«é€Ÿå…¥é—¨</h3>
<h4 data-id="heading-7">1ã€ LangChain åº“æœ‰å‡ ä¸ªæ ¸å¿ƒçš„ä¸åŒçš„åŒ…ç»„æˆï¼Œ</h4>
<ul>
<li>langchian-core:æä¾› LangChain çš„è¡¨è¾¾å¼è¯­è¨€å’ŒåŸºç¡€çš„åŠŸèƒ½</li>
<li>langchain-community:æä¾›äº†ç¬¬ä¸‰æ–¹çš„ llm é›†æˆï¼Œæ¯”å¦‚é˜¿é‡Œäº‘ dashcopeï¼Œæ™ºè°± AIï¼ŒOpenAIï¼Œä»¥åŠå’Œ OpenAI å…¼å®¹çš„ DeepSeek ç­‰ï¼Œä»¥åŠå…¶ä»–çš„å¤§æ¨¡å‹ï¼Œå…·ä½“å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£</li>
<li>langchain:æ„æˆåº”ç”¨ç¨‹åºæ¶æ„çš„<strong>é“¾</strong>ã€ä»£ç†å’Œæ£€ç´¢ç­‰</li>
</ul>
<h4 data-id="heading-8">2ã€åœ¨å½“å‰çš„é¡¹ç›®ä¸­å®‰è£… LangChain</h4>
<ul>
<li>ä½¿ç”¨<strong>pip</strong>å‘½ä»¤å®‰è£… è¿›å…¥åˆ°å·²ç»åˆ›å»ºå®Œæ¯•çš„é¡¹ç›®çš„ç»ˆç«¯ï¼Œè¾“å…¥<strong>pip install langchain</strong> <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64793310906e4d02b3994e0383da98c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oSf5oCn55qE56iL5bqP5ZGY5bCP546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770770491&amp;x-signature=i2pQX7yOlWTwKZE772ENajODjSQ%3D" alt="" loading="lazy"/> ps: ç”±äºè¦è¿æ¥å¤–ç½‘ï¼Œä¸‹è½½é€Ÿåº¦ä¼šæ¯”è¾ƒæ…¢ã€‚è¿˜æœ‰å°±æ˜¯ï¼Œå¦‚æœå‘ç°ä½ å®‰è£…äº†ï¼Œä½†æ˜¯åœ¨ä»£ç ä¸­å¼•å…¥ langchian çš„æ—¶å€™è¿˜æ˜¯æŠ¥æ‰¾ä¸åˆ°çš„é”™è¯¯ï¼ˆå› ä¸ºæ²¡æœ‰å®‰è£…åˆ°è™šæ‹Ÿç¯å¢ƒä¸­ï¼Œè€Œæ˜¯å…¨å±€çš„ python ç¯å¢ƒä¸­ï¼‰ã€‚é‚£å°±ä½¿ç”¨ä¸‹é¢ä¸€ç§æ–¹å¼å®‰è£…</li>
<li>ä½¿ç”¨ pycharm å®‰è£… æ‰“å¼€ä¸‹é¢çš„çª—å£ï¼Œç‚¹å‡»åŠ å· <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0005d682a0542d790b99eec330d41b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oSf5oCn55qE56iL5bqP5ZGY5bCP546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770770491&amp;x-signature=TerrlyRPx%2B5AdiAfFgWgTa8CIag%3D" alt="" loading="lazy"/> æœç´¢<strong>langchian</strong> <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34383d4e76be47e9824967fce079838e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oSf5oCn55qE56iL5bqP5ZGY5bCP546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770770491&amp;x-signature=hVZeqpzR8UKdmQqt2pVzJ%2BAQrZ4%3D" alt="" loading="lazy"/> ç‚¹å‡»<strong>install package</strong>å³å¯ï¼Œè¿™ä¸ªè¿‡ç¨‹åŒæ ·éœ€è¦è¿æ¥å¤–ç½‘ã€‚</li>
</ul>
<h4 data-id="heading-9">3ã€åˆæ¬¡ä½“éªŒè°ƒç”¨ llm</h4>
<ul>
<li>
<p>åœ¨å½“å‰é¡¹ç›®æ ¹ç›®å½•æ–°å»º test æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨æ–‡ä»¶å¤¹ä¸­æ–°å»º py æ–‡ä»¶ <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f2ce884316947b2aa84af7ef553b460~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oSf5oCn55qE56iL5bqP5ZGY5bCP546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770770491&amp;x-signature=fpMa%2FnfV0A2tkKBpulmQsewSDHo%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬æ¥ç¼–å†™æµ‹è¯•ä»£ç </p>
</li>
</ul>

<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æˆ‘ä»¬ä½¿ç”¨é˜¿é‡Œäº‘çš„qwenå¤§æ¨¡å‹ï¼Œå€’å…¥æ ¸å¿ƒåŒ…</span>
from langchain_community.chat_models import ChatTongyi

<span class="hljs-comment"># åˆå§‹åŒ–ä¸€ä¸ªllmå¯¹è±¡</span>
<span class="hljs-attr">llm</span> = ChatTongyi(
    <span class="hljs-comment"># ä½¿ç”¨qwen-plusæ¨¡å‹</span>
    <span class="hljs-attr">model</span>=<span class="hljs-string">"qwen-plus"</span>,
    <span class="hljs-comment"># ä»é˜¿é‡Œäº‘å®˜ç½‘è·å–apikey,å…·ä½“è·å–æ–¹å¼çœ‹å®˜æ–¹æ–‡æ¡£ï¼šhttps://help.aliyun.com/zh/model-studio/get-api-key</span>
    <span class="hljs-attr">api_key</span>=<span class="hljs-string">"sk-3e4b3b0a5513440f80a23349057c653f"</span>,
)
<span class="hljs-comment"># è°ƒç”¨invokeå‡½æ•°ï¼Œå¹¶ä¼ å…¥ä¸€ä¸ªæç¤ºè¯</span>
<span class="hljs-attr">res</span> = llm.invoke(<span class="hljs-string">"ä½ å¥½ï¼Œä½ æ˜¯è°"</span>)
print(res)
</code></pre>
<p>æ§åˆ¶å°è¾“å…¥ç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">content=<span class="hljs-string">'ä½ å¥½ï¼æˆ‘æ˜¯é€šä¹‰åƒé—®ï¼ˆQwenï¼‰ï¼Œæ˜¯é˜¿é‡Œå·´å·´é›†å›¢æ——ä¸‹çš„é€šä¹‰å®éªŒå®¤è‡ªä¸»ç ”å‘çš„è¶…å¤§è§„æ¨¡è¯­è¨€æ¨¡å‹ã€‚æˆ‘å¯ä»¥å¸®åŠ©ä½ å›ç­”é—®é¢˜ã€åˆ›ä½œæ–‡å­—ã€è¿›è¡Œé€»è¾‘æ¨ç†ã€ç¼–ç¨‹ç­‰ä»»åŠ¡ã€‚æ— è®ºæ˜¯å†™æ•…äº‹ã€å†™å…¬æ–‡ã€å†™é‚®ä»¶ï¼Œè¿˜æ˜¯èŠå¤©ã€ç¿»è¯‘ã€æä¾›ä¿¡æ¯æŸ¥è¯¢ï¼Œæˆ‘éƒ½å¯ä»¥å°½åŠ›ä¸ºä½ æä¾›å¸®åŠ©ã€‚æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åˆ°ä½ çš„å—ï¼ŸğŸ˜Š'</span> additional_kwargs={} response_metadata={<span class="hljs-string">'model_name'</span>: <span class="hljs-string">'qwen-plus'</span>, <span class="hljs-string">'finish_reason'</span>: <span class="hljs-string">'stop'</span>, <span class="hljs-string">'request_id'</span>: <span class="hljs-string">'da7f8a63-4864-46b8-89f6-fd733f1841db'</span>, <span class="hljs-string">'token_usage'</span>: {<span class="hljs-string">'input_tokens'</span>: 12, <span class="hljs-string">'output_tokens'</span>: 77, <span class="hljs-string">'total_tokens'</span>: 89, <span class="hljs-string">'prompt_tokens_details'</span>: {<span class="hljs-string">'cached_tokens'</span>: 0}}} <span class="hljs-built_in">id</span>=<span class="hljs-string">'run--f2c8a639-4f54-4ece-9afa-d3a59d32c233-0'</span>

Process finished with <span class="hljs-built_in">exit</span> code 0
</code></pre>
<p>è¿™æ ·å°±å®ç°äº†æœ€æœ€æœ€åŸºæœ¬çš„è°ƒç”¨ llmï¼Œé‚£è¿™æ ·å°±å®ç°äº†ä¸€ä¸ªæœ€æœ€æœ€åŸºæœ¬çš„ llm è°ƒç”¨ã€‚ é™¤äº†è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬æ¥çœ‹<strong>tongyi.py</strong>æ–‡ä»¶çš„æºä»£ç  åœ¨ä»–çš„æ„é€ å‡½æ•°ä¸­æœ‰è¿™ä¹ˆä¸€æ®µæ³¨é‡Š</p>
<pre><code class="hljs language-ini" lang="ini">  <span class="hljs-attr">messages</span> = [
                (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€åä¸“ä¸šçš„ç¿»è¯‘å®¶ï¼Œå¯ä»¥å°†ç”¨æˆ·çš„ä¸­æ–‡ç¿»è¯‘ä¸ºè‹±æ–‡ã€‚"</span>),
                (<span class="hljs-string">"human"</span>, <span class="hljs-string">"æˆ‘å–œæ¬¢ç¼–ç¨‹ã€‚"</span>),
            ]
            tongyi_chat.invoke(messages)
</code></pre>
<p>åœ¨è¿™é‡Œï¼Œå®šä¸€ä¸ªä¸€ä¸ª message åˆ—è¡¨ï¼Œåˆ—è¡¨ä¸­æ”¾äº†ä¸¤ä¸ªå…ƒç»„ï¼Œåˆ†åˆ«ä»£è¡¨ç³»ç»Ÿæç¤ºè¯ï¼Œæ‰€è°“ç³»ç»Ÿæç¤ºè¯å°±æ˜¯æˆ‘æå‰ç»™ä»–ä¸€ä¸ªé¢„è®¾ï¼Œç±»ä¼¼äºè§’è‰²æ‰®æ¼”ï¼Œè¿˜æœ‰å°±æ˜¯ humanï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç”¨æˆ·çš„æç¤ºè¯ã€‚é‚£ä¹ˆè¿™ç§æ–¹å¼ï¼Œå°±ä¼šè®© llm çš„å›å¤æ›´ç²¾ç¡®</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æˆ‘ä»¬ä½¿ç”¨é˜¿é‡Œäº‘çš„qwenå¤§æ¨¡å‹ï¼Œå€’å…¥æ ¸å¿ƒåŒ…ï¼Œè¿™é‡Œä½¿ç”¨äº†é˜¿é‡Œäº‘çš„dashscopeï¼Œéœ€è¦æŒ‰ç…§å®‰è£…langchainçš„æ–¹å¼å®‰è£…dashcope</span>
<span class="hljs-comment"># ä»€ä¹ˆæ˜¯dashcopeï¼Ÿå’Œé˜¿é‡Œäº‘ç™¾ç‚¼ä»€ä¹ˆåŒºåˆ«ï¼Ÿhttps://q.cnblogs.com/q/150279</span>
from langchain_community.chat_models import ChatTongyi

<span class="hljs-comment"># åˆå§‹åŒ–ä¸€ä¸ªllmå¯¹è±¡</span>
<span class="hljs-attr">llm</span> = ChatTongyi(
    <span class="hljs-comment"># ä½¿ç”¨qwen-plusæ¨¡å‹</span>
    <span class="hljs-attr">model</span>=<span class="hljs-string">"qwen-plus"</span>,
    <span class="hljs-comment"># ä»é˜¿é‡Œäº‘å®˜ç½‘è·å–apikey,å…·ä½“è·å–æ–¹å¼çœ‹å®˜æ–¹æ–‡æ¡£ï¼šhttps://help.aliyun.com/zh/model-studio/get-api-key</span>
    <span class="hljs-attr">api_key</span>=<span class="hljs-string">"sk-3e4b3b0a5513440f80a23349057c653f"</span>,
)
<span class="hljs-attr">messages</span> = [
    (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€åä¸“ä¸šçš„ç¿»è¯‘å®¶ï¼Œå¯ä»¥å°†ç”¨æˆ·çš„ä¸­æ–‡ç¿»è¯‘ä¸ºè‹±æ–‡ã€‚"</span>),
    (<span class="hljs-string">"human"</span>, <span class="hljs-string">"æˆ‘å–œæ¬¢ç¼–ç¨‹ã€‚"</span>),
]

<span class="hljs-comment"># è°ƒç”¨invokeå‡½æ•°ï¼Œå¹¶ä¼ å…¥æç¤ºè¯åˆ—è¡¨</span>
<span class="hljs-attr">res</span> = llm.invoke(messages)
print(res)
</code></pre>
<p>æ§åˆ¶å°è¾“å‡ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">content=<span class="hljs-string">'I like programming.'</span> additional_kwargs={} response_metadata={<span class="hljs-string">'model_name'</span>: <span class="hljs-string">'qwen-plus'</span>, <span class="hljs-string">'finish_reason'</span>: <span class="hljs-string">'stop'</span>, <span class="hljs-string">'request_id'</span>: <span class="hljs-string">'b7c9036a-9870-4e9e-a399-f1fbaee4a537'</span>, <span class="hljs-string">'token_usage'</span>: {<span class="hljs-string">'input_tokens'</span>: 30, <span class="hljs-string">'output_tokens'</span>: 4, <span class="hljs-string">'total_tokens'</span>: 34, <span class="hljs-string">'prompt_tokens_details'</span>: {<span class="hljs-string">'cached_tokens'</span>: 0}}} <span class="hljs-built_in">id</span>=<span class="hljs-string">'run--4ffe34d9-b85e-402e-abb1-7c75787abdbd-0'</span>

Process finished with <span class="hljs-built_in">exit</span> code 0
</code></pre>
<p>é‚£ä¸ºä»€ä¹ˆè¦å†™æˆ<strong>system</strong>å’Œ<strong>human</strong>å‘¢ï¼Ÿ</p>
<p>å…¶å® LangChain æä¾›äº†å‡ ä¸ªå¯¹è±¡ï¼Œç”¨äºæ–¹ä¾¿åœ°åŒºåˆ†ä¸åŒçš„è§’è‰²:</p>
<ul>
<li>HumanMessage: æ¥è‡ªäººç±»/ç”¨æˆ·çš„ ChatMessageã€‚</li>
<li>AIMessage: æ¥è‡ª AI/åŠ©æ‰‹çš„ ChatMessageã€‚</li>
<li>SystemMessage: æ¥è‡ªç³»ç»Ÿçš„ ChatMessageã€‚</li>
<li>FunctionMessage: æ¥è‡ªå‡½æ•°è°ƒç”¨çš„ ChatMessageã€‚</li>
</ul>
<h4 data-id="heading-10">4ã€langchain ç‰¹æ€§ä¹‹æç¤ºè¯æ¨¡æ¿</h4>
<p>æ‰€è°“æç¤ºè¯æ¨¡æ¿å°±æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œä¸€æ®µé€šç”¨çš„è¯ï¼Œå¯ä»¥åœ¨è¿™ä¸ªåŸºç¡€ä¸Šå»ä¿®æ”¹ã€‚æƒ³æƒ³æˆ‘ä»¬ä¹‹å‰å†™è‹±è¯­ä½œæ–‡ï¼Œç»å¸¸èƒŒä¸€äº›æ¨¡æ¿ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªåŸºç¡€ä¸ŠåŠ ä¸Šæˆ‘ä»¬è‡ªå·±å†™çš„è‹±è¯­å¥å­ã€‚</p>
<p>åœ¨ langchian ä¸­çš„<strong>langchain_core.prompts</strong>åŒ…ä¸­æä¾›äº†<strong>ChatPromptTemplate</strong>,æ¥å®ç°æç¤ºè¯æ¨¡æ¿çš„åŠŸèƒ½ã€‚åœ¨ä»–çš„å­ç±»ä¸‹åŒæ—¶è¿˜æœ‰ï¼ˆå¦‚ SystemMessagePromptTemplate, HumanMessagePromptTemplateï¼‰ã€‚</p>
<p>æˆ‘ä»¬æ¥æ”¹é€ ä¸€ä¸‹ä¹‹å‰çš„ä»£ç </p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æˆ‘ä»¬ä½¿ç”¨é˜¿é‡Œäº‘çš„qwenå¤§æ¨¡å‹ï¼Œå¯¼å…¥æ ¸å¿ƒåŒ…</span>
from langchain_community.chat_models import ChatTongyi
from langchain_core.prompts import ChatPromptTemplate

<span class="hljs-comment"># åˆå§‹åŒ–ä¸€ä¸ªllmå¯¹è±¡</span>
<span class="hljs-attr">llm</span> = ChatTongyi(
    <span class="hljs-attr">model</span>=<span class="hljs-string">"qwen-plus"</span>,
    <span class="hljs-attr">api_key</span>=<span class="hljs-string">"sk-3e4b3b0a5513440f80a23349057c653f"</span>,  <span class="hljs-comment"># å»ºè®®ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†å¯†é’¥</span>
)

<span class="hljs-comment"># å®šä¹‰æç¤ºæ¨¡æ¿</span>
<span class="hljs-attr">prompt</span> = ChatPromptTemplate.from_messages([
    (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€åä¸“ä¸šçš„ç¿»è¯‘å®¶ï¼Œå¯ä»¥å°†ç”¨æˆ·çš„ä¸­æ–‡ç¿»è¯‘ä¸ºè‹±æ–‡ã€‚"</span>),
    (<span class="hljs-string">"human"</span>, <span class="hljs-string">"{text}"</span>),  <span class="hljs-comment"># ä½¿ç”¨å˜é‡å ä½ç¬¦</span>
])

<span class="hljs-comment"># æ ¼å¼åŒ–æç¤ºè¯ï¼ˆä¼ å…¥å®é™…å†…å®¹ï¼‰</span>
<span class="hljs-attr">formatted_prompt</span> = prompt.format_messages(text=<span class="hljs-string">"Javaæ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„ç¼–ç¨‹è¯­è¨€ã€‚"</span>)

<span class="hljs-comment"># è°ƒç”¨æ¨¡å‹</span>
<span class="hljs-attr">res</span> = llm.invoke(formatted_prompt)

<span class="hljs-comment"># è¾“å‡ºç»“æœ,è¿™é‡Œç›´æ¥æ‹¿åˆ°aiå›å¤çš„contentå†…å®¹</span>
print(res.content)
</code></pre>
<p>æ§åˆ¶å°è¾“å‡ºï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">Java <span class="hljs-built_in">is</span> the best programming language <span class="hljs-keyword">in</span> the world.

Process finished <span class="hljs-keyword">with</span> <span class="hljs-keyword">exit</span> code <span class="hljs-number">0</span>
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨è¿™ä¸ªåŸºæœ¬çš„æç¤ºè¯æ¶å­ä¸Šï¼Œå¡«å……æˆ‘ä»¬æƒ³è¦é—®çš„å†…å®¹</p>
<p>åŒæ—¶<strong>ChatPromptTemplate</strong>è¿˜æä¾›äº†å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œ<strong>from_template</strong> ä½¿ç”¨<strong>from_template</strong></p>
<pre><code class="hljs language-ini" lang="ini">from langchain_core.prompts import ChatPromptTemplate

<span class="hljs-comment"># å®šä¹‰ä¸€ä¸ªåŒ…å«å ä½ç¬¦çš„æ¨¡æ¿</span>
<span class="hljs-attr">template</span> = <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¿»è¯‘åŠ©æ‰‹ï¼Œè¯·å°†ä»¥ä¸‹å†…å®¹ç¿»è¯‘æˆ{target_language}ï¼š{text}"</span>
<span class="hljs-attr">prompt</span> = ChatPromptTemplate.from_template(template)

<span class="hljs-comment"># æ ¼å¼åŒ–æ¨¡æ¿</span>
<span class="hljs-attr">formatted_prompt</span> = prompt.format(
    <span class="hljs-attr">target_language</span>=<span class="hljs-string">"æ³•è¯­"</span>,
    <span class="hljs-attr">text</span>=<span class="hljs-string">"ä»Šå¤©å¤©æ°”çœŸå¥½"</span>
)
print(formatted_prompt)
</code></pre>
<p>è¿™æ ·æ‹¼æ¥ä¹‹åçš„å®Œæ•´æç¤ºè¯å°±æ˜¯** ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¿»è¯‘åŠ©æ‰‹ï¼Œè¯·å°†ä»¥ä¸‹å†…å®¹ç¿»è¯‘æˆæ³•è¯­ï¼šä»Šå¤©å¤©æ°”çœŸå¥½**</p>
<p>é‚£ä¹ˆ ChatPromptTemplate.from_template å’Œ ChatPromptTemplate.from_messages æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
<ul>
<li>ChatPromptTemplate.from_messages è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸€ä¸ªæ¶ˆæ¯åˆ—è¡¨ï¼Œæ¯æ¡æ¶ˆæ¯å¯ä»¥æ˜¯å…ƒç»„å½¢å¼æˆ–ç‰¹å®šçš„æ¶ˆæ¯å¯¹è±¡ï¼ˆå¦‚ SystemMessagePromptTemplate, HumanMessagePromptTemplateï¼‰ã€‚</li>
</ul>
<p>ç”¨é€”ï¼šå½“ä½ éœ€è¦æ„å»ºä¸€ä¸ªå¤æ‚çš„ã€å¤šè½®çš„ã€è§’è‰²åˆ†æ˜çš„å¯¹è¯ç»“æ„æ—¶ä½¿ç”¨ã€‚è¿™æ˜¯æ„å»ºèŠå¤©æœºå™¨äººçš„æ ‡å‡†æ–¹å¼ã€‚ ç»“æ„ï¼šå®ƒå¯ä»¥åŒ…å«ç³»ç»Ÿæ¶ˆæ¯ï¼ˆSystemï¼‰ã€ç”¨æˆ·æ¶ˆæ¯ï¼ˆUserï¼‰ã€AI æ¶ˆæ¯ï¼ˆAssistantï¼‰ç­‰ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„å¯¹è¯ä¸Šä¸‹æ–‡ã€‚</p>
<ul>
<li>ChatPromptTemplate.from_template è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²æ¨¡æ¿ï¼Œé€šå¸¸åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªç”¨å¤§æ‹¬å· {} åŒ…è£¹çš„å ä½ç¬¦ã€‚</li>
</ul>
<p>ç”¨é€”ï¼šå½“ä½ åªéœ€è¦ä¸€ä¸ªç®€å•çš„æ–‡æœ¬æ¨¡æ¿ï¼Œå¹¶ä¸”éœ€è¦åŠ¨æ€æ’å…¥å˜é‡æ—¶ä½¿ç”¨ã€‚ ç»“æ„ï¼šå®ƒç”Ÿæˆçš„æ˜¯ä¸€ä¸ªå•ä¸€çš„æ¶ˆæ¯ï¼Œé€šå¸¸é»˜è®¤æ˜¯â€œç”¨æˆ·æ¶ˆæ¯â€ï¼ˆHumanMessageï¼‰ã€‚</p>
<p>ps:åŒæ ·è¿˜æœ‰ PromptTemplateï¼šåŸºç¡€æ–‡æœ¬æ¨¡æ¿ï¼Œé€‚ç”¨äºä¼ ç»Ÿçš„â€œè¾“å…¥ä¸€æ®µæ–‡æœ¬ï¼Œè¾“å‡ºä¸€æ®µæ–‡æœ¬â€çš„æ¨¡å‹ã€‚</p>
<p>è¿™ä¸¤ä¸ªåŒºåˆ«ï¼š</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>PromptTemplate</th><th>ChatPromptTemplate</th></tr></thead><tbody><tr><td><strong>é€‚ç”¨æ¨¡å‹ç±»å‹</strong></td><td>åŸºç¡€è¯­è¨€æ¨¡å‹ï¼ˆtext-in, text-outï¼‰</td><td>èŠå¤©æ¨¡å‹ï¼ˆchat modelsï¼‰</td></tr><tr><td><strong>è¾“å‡ºæ ¼å¼</strong></td><td>æ™®é€šæ–‡æœ¬å­—ç¬¦ä¸²</td><td>æ¶ˆæ¯å¯¹è±¡åˆ—è¡¨ï¼ˆå¦‚ <code>HumanMessage</code>, <code>AIMessage</code> ç­‰ï¼‰</td></tr><tr><td><strong>ç»“æ„åŒ–ç¨‹åº¦</strong></td><td>ç®€å•æ¨¡æ¿ï¼Œé€‚åˆå•è½®</td><td>æ”¯æŒå¤šè½®å¯¹è¯ã€ç³»ç»Ÿæ¶ˆæ¯ã€è§’è‰²åŒºåˆ†</td></tr><tr><td><strong>æ˜¯å¦æ”¯æŒè§’è‰²</strong></td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… æ”¯æŒï¼š<code>system</code>, <code>human</code>, <code>ai</code></td></tr><tr><td><strong>å…¸å‹ç”¨é€”</strong></td><td>æ–‡æœ¬è¡¥å…¨ã€å†…å®¹ç”Ÿæˆ</td><td>èŠå¤©æœºå™¨äººã€å¤šè½®å¯¹è¯ã€API è°ƒç”¨ï¼ˆå¦‚ GPT, Qwenï¼‰</td></tr></tbody></table>
<h4 data-id="heading-11">5ã€langchain è¡¨è¾¾å¼ï¼ˆLCELï¼‰å’Œè¾“å‡ºè§£æå™¨</h4>
<p>LCEL æŒ‡çš„æ˜¯ LangChain Expression Languageï¼Œå®ƒæ˜¯ LangChain æ¡†æ¶ä¸­ä¸€ç§å£°æ˜å¼ã€å¯ç»„åˆçš„æ–¹å¼æ¥æ„å»ºå’Œè¿è¡Œé“¾ï¼ˆchainsï¼‰ã€‚ LCEL æ˜¯ LangChain æ¨èçš„æ ¸å¿ƒç¼–ç¨‹èŒƒå¼ï¼Œæ—¨åœ¨è®©å¼€å‘è€…èƒ½å¤Ÿä»¥ç®€æ´ã€æ¸…æ™°ã€å¥å£®ä¸”å¯è§‚å¯Ÿçš„æ–¹å¼å°†ä¸åŒçš„ç»„ä»¶ï¼ˆå¦‚æç¤ºæ¨¡æ¿ã€è¯­è¨€æ¨¡å‹ã€è¾“å‡ºè§£æå™¨ã€å·¥å…·ç­‰ï¼‰è¿æ¥èµ·æ¥ï¼Œå½¢æˆå¤„ç†æ•°æ®çš„â€œé“¾â€ã€‚</p>
<p>langchain è¡¨è¾¾å¼çš„æ ¸å¿ƒç‰¹ç‚¹ï¼š</p>
<ul>
<li>å£°æ˜å¼ï¼ˆDeclarativeï¼‰ï¼Œå¯ä»¥é€šè¿‡åƒé“¾æ¡é‚£æ ·ç»„åˆèµ·æ¥</li>
</ul>

<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å£°æ˜ä¸€ä¸ªé“¾ï¼šæç¤º -&gt; æ¨¡å‹ -&gt; è¾“å‡ºè§£æå™¨</span>
<span class="hljs-attr">chain</span> = prompt | model | parser
</code></pre>
<ul>
<li>
<p>å¯ç»„åˆï¼ˆComposableï¼‰:ä»»ä½•å®ç°äº† Runnable æ¥å£çš„å¯¹è±¡éƒ½å¯ä»¥é€šè¿‡ | æ“ä½œç¬¦è¿›è¡Œç»„åˆï¼Œå°±åƒæ­ç§¯æœ¨ä¸€æ ·ã€‚</p>
</li>
<li>
<p>å¼€ç®±å³ç”¨çš„åŠŸèƒ½</p>
<ul>
<li>æµå¼è¾“å‡ºï¼ˆStreamingï¼‰ï¼šå¯ä»¥å®æ—¶æ¥æ”¶æ¨¡å‹è¾“å‡ºçš„ tokenã€‚</li>
<li>å¼‚æ­¥è°ƒç”¨ï¼ˆAsyncï¼‰ï¼šæ”¯æŒ async/await è¯­æ³•ã€‚</li>
<li>æ‰¹é‡å¤„ç†ï¼ˆBatchingï¼‰ï¼šå¯ä»¥é«˜æ•ˆå¤„ç†å¤šä¸ªè¾“å…¥ã€‚</li>
<li>å‡½æ•°è°ƒç”¨ï¼ˆFunction Callingï¼‰ï¼šåŸç”Ÿæ”¯æŒå·¥å…·è°ƒç”¨ã€‚</li>
<li>å¯è§‚å¯Ÿæ€§ï¼ˆObservabilityï¼‰ï¼šå¯ä»¥è½»æ¾ç›‘æ§é“¾ä¸­æ¯ä¸ªæ­¥éª¤çš„æ‰§è¡Œæƒ…å†µï¼Œä¾¿äºè°ƒè¯•ã€‚</li>
</ul>
</li>
<li>
<p>langchain è¡¨è¾¾å¼çš„åŸºæœ¬ä½¿ç”¨</p>
<ul>
<li>æˆ‘ä»¬æ¥ç€åœ¨ä¸Šé¢çš„æµ‹è¯•ä»£ç ä¸­ä¿®æ”¹ï¼ˆä½¿ç”¨ langchian è¡¨è¾¾å¼ï¼‰</li>
</ul>

<pre><code class="hljs language-ini" lang="ini">      <span class="hljs-comment"># æˆ‘ä»¬ä½¿ç”¨é˜¿é‡Œäº‘çš„qwenå¤§æ¨¡å‹ï¼Œå¯¼å…¥æ ¸å¿ƒåŒ…</span>
  from langchain_community.chat_models import ChatTongyi
  from langchain_core.prompts import ChatPromptTemplate

  <span class="hljs-comment"># åˆå§‹åŒ–ä¸€ä¸ªllmå¯¹è±¡</span>
  <span class="hljs-attr">llm</span> = ChatTongyi(
      <span class="hljs-attr">model</span>=<span class="hljs-string">"qwen-plus"</span>,
      <span class="hljs-attr">api_key</span>=<span class="hljs-string">"sk-3e4b3b0a5513440f80a23349057c653f"</span>,  <span class="hljs-comment"># å»ºè®®ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†å¯†é’¥</span>
  )

  <span class="hljs-comment"># å®šä¹‰æç¤ºæ¨¡æ¿</span>
  <span class="hljs-attr">prompt</span> = ChatPromptTemplate.from_messages([
      (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€åä¸“ä¸šçš„ç¿»è¯‘å®¶ï¼Œå¯ä»¥å°†ç”¨æˆ·çš„ä¸­æ–‡ç¿»è¯‘ä¸ºè‹±æ–‡ã€‚"</span>),
      (<span class="hljs-string">"human"</span>, <span class="hljs-string">"{text}"</span>),  <span class="hljs-comment"># ä½¿ç”¨å˜é‡å ä½ç¬¦</span>
  ])

  <span class="hljs-comment"># å°†æç¤ºè¯æ¨¡æ¿é€šè¿‡ç±»ä¼¼äºunixä¸­ç®¡é“ç¬¦çš„å½¢å¼ï¼Œä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ é€’ç»™llmï¼Œè¿™å°±æ˜¯ä¸€ä¸ªlangchainè¡¨è¾¾å¼</span>
  <span class="hljs-attr">chain</span> = prompt | llm

  <span class="hljs-comment"># ä½¿ç”¨æˆ‘ä»¬åˆšæ‰å®šä¹‰å¥½çš„ä¸€ä¸ªchainè°ƒç”¨è¿è°ƒç”¨å¤§æ¨¡å‹ï¼Œå°†æˆ‘ä»¬åˆšæ‰å®šä¹‰çš„å ä½ç¬¦è®¾ç½®å®é™…çš„å€¼</span>
  <span class="hljs-attr">res</span> = chain.invoke({<span class="hljs-string">"text"</span>: <span class="hljs-string">"æˆ‘æ˜¯ä¸€åä¼˜ç§€çš„Javaå¼€å‘å·¥ç¨‹å¸ˆ"</span>})

  <span class="hljs-comment"># è¾“å‡ºç»“æœ,è¿™é‡Œç›´æ¥æ‹¿åˆ°aiå›å¤çš„contentå†…å®¹</span>
  print(res.content)
</code></pre>
<p>æ§åˆ¶å°è¾“å‡ºï¼š</p>
<pre><code class="hljs language-css" lang="css">  <span class="hljs-selector-tag">I</span> am an excellent Java development engineer.
  Process finished with exit <span class="hljs-selector-tag">code</span> <span class="hljs-number">0</span>
</code></pre>
<p>åŒæ—¶è¿˜æ”¯æŒæµå¼è¾“å‡º,ä½¿ç”¨ for å¾ªç¯æ–¹å¼</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> chain.stream({<span class="hljs-string">"text"</span>: <span class="hljs-string">"æˆ‘æ˜¯ä¸€åä¼˜ç§€çš„Javaå¼€å‘å·¥ç¨‹å¸ˆ"</span>}):
  <span class="hljs-built_in">print</span>(chunk, <span class="hljs-keyword">end</span>=<span class="hljs-string">""</span>)
</code></pre>
<p>æˆ‘ä»¬é€šè¿‡è¿™æ · langchain è¡¨è¾¾å¼çš„æ–¹å¼å¯ä»¥è°ƒç”¨å¤§æ¨¡å‹ç”Ÿæˆå†…å®¹ã€‚</p>
<p>åˆšæ‰æ˜¯åŸºæœ¬ä½¿ç”¨ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ„å»ºæ›´å¤æ‚çš„å¸¦å‚æ•°çš„é“¾</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">from</span> langchain_core.<span class="hljs-property">runnables</span> <span class="hljs-keyword">import</span> <span class="hljs-title class_">RunnablePassthrough</span>
</code></pre>
</li>
</ul>

<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å¸¦æœ‰å˜é‡æ³¨å…¥çš„é“¾</span>

<span class="hljs-attr">chain</span> = (
{"context": retriever, "question": RunnablePassthrough()}
| prompt
| model
| output_parser
)

<span class="hljs-attr">result</span> = chain.invoke(<span class="hljs-string">"LangChain æ˜¯ä»€ä¹ˆï¼Ÿ"</span>)
</code></pre>
<p>åœ¨åˆšæ‰çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå¸¦å‚æ•°çš„é“¾ï¼Œå…¶ä¸­ <strong>{"context": retriever, "question": RunnablePassthrough()}</strong> ä¸­çš„ context å…¶å®æ˜¯åœ¨å’Œ ai å¯¹è¯çš„æ—¶å€™çš„ä¸Šä¸‹æ–‡ï¼Œretriever æ˜¯åœ¨å‘é‡æ•°æ®åº“ä¸­æ£€ç´¢åçš„ä¿¡æ¯ï¼ŒRunnablePassthrough()çš„ä½œç”¨æ˜¯â€œè®©è¾“å…¥åŸå°ä¸åŠ¨åœ°é€šè¿‡â€ï¼Œä¸åšä»»ä½•å¤„ç†ï¼Œç›´æ¥ä¼ é€’ç»™ä¸‹ä¸€ä¸ªç»„ä»¶ã€‚æ•°æ®è¿›æ¥æ˜¯ä»€ä¹ˆæ ·ï¼Œå‡ºå»è¿˜æ˜¯ä»€ä¹ˆæ ·ã€‚è¿™äº›æˆ‘ä»¬ä¹‹åä¼šè®²åˆ°</p>
<p>ç°åœ¨è¦è¯´çš„æ˜¯è¿™ä¸ª<strong>output_parser</strong>ä¹Ÿå°±æ˜¯è¾“å‡ºè§£æå™¨</p>
<p>é‚£ä»€ä¹ˆæ˜¯è¾“å‡ºè§£æå™¨å‘¢ï¼Ÿ é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å¯¹ llm çš„è¾“å‡ºè¿›è¡Œè§£æçš„ï¼Œåœ¨ä¸Šé¢ä¸€å¼€å§‹è°ƒç”¨ llm çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šå‘ç°ä»–çš„è¾“å‡ºæ˜¯ä¸€å †çš„ json å­—ç¬¦ä¸²ï¼Œæ— è®ºæ˜¯å¯¹å¼€å‘è€…è¿˜æ˜¯è¯´ç”¨æˆ·æ¥è¯´éƒ½éå¸¸çš„ä¸å‹å¥½ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹ llm åŸå§‹çš„è¾“å‡ºè¿›è¡Œè§£é‡Šï¼ŒæŠŠå®é™…ä¸ŠçœŸæ­£å¯¹æˆ‘ä»¬æœ‰ç”¨çš„ä¿¡æ¯æ‹¿åˆ°ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¹‹å‰<strong>res.content</strong>çš„å†…å®¹</p>
<p>åœ¨<strong>langchain.output_parsers</strong>åŒ…ä¸‹é¢ï¼Œæœ‰è®¸å¤šçš„è¾“å‡ºè§£æå™¨ï¼Œ åŒ…æ‹¬è¿™å‡ ç§è§£æå™¨ <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7cb887a1e054945a24590b07a666b5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oSf5oCn55qE56iL5bqP5ZGY5bCP546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770770491&amp;x-signature=5qmdNfeITARFcybNolYhSMB%2BN4A%3D" alt="" loading="lazy"/> åŒæ ·è¿˜æœ‰ä¸€ä¸ªæˆ‘ä»¬ç”¨åˆ°çš„æœ€å¤šçš„å­—ç¬¦ä¸²è§£æå™¨ï¼Œæˆ‘ä»¬è¿™ä¸ªé¡¹ç›®ç”¨çš„ä¹Ÿæ˜¯è¿™ä¸ªå­—ç¬¦ä¸²è§£æå™¨</p>
<ul>
<li>
<p>å­—ç¬¦ä¸²è§£æå™¨</p>
<pre><code class="hljs language-ini" lang="ini">from langchain_core.output_parsers import StrOutputParser
<span class="hljs-attr">parser</span> = StrOutputParser()
</code></pre>
<p>è¿ç”¨åˆ°æˆ‘ä»¬åˆšæ‰çš„æµ‹è¯•æ–‡ä»¶ä¸­</p>
<pre><code class="hljs language-ini" lang="ini">    <span class="hljs-comment"># æˆ‘ä»¬ä½¿ç”¨é˜¿é‡Œäº‘çš„qwenå¤§æ¨¡å‹ï¼Œå¯¼å…¥æ ¸å¿ƒåŒ…</span>
  from langchain_community.chat_models import ChatTongyi
  from langchain_core.output_parsers import StrOutputParser
  from langchain_core.prompts import ChatPromptTemplate

  <span class="hljs-comment"># åˆå§‹åŒ–ä¸€ä¸ªllmå¯¹è±¡</span>
  <span class="hljs-attr">llm</span> = ChatTongyi(
      <span class="hljs-attr">model</span>=<span class="hljs-string">"qwen-plus"</span>,
      <span class="hljs-attr">api_key</span>=<span class="hljs-string">"sk-3e4b3b0a5513440f80a23349057c653f"</span>,  <span class="hljs-comment"># å»ºè®®ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†å¯†é’¥</span>
  )

  <span class="hljs-comment"># å®šä¹‰æç¤ºæ¨¡æ¿</span>
  <span class="hljs-attr">prompt</span> = ChatPromptTemplate.from_messages([
      (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€åä¸“ä¸šçš„ç¿»è¯‘å®¶ï¼Œå¯ä»¥å°†ç”¨æˆ·çš„ä¸­æ–‡ç¿»è¯‘ä¸ºè‹±æ–‡ã€‚"</span>),
      (<span class="hljs-string">"human"</span>, <span class="hljs-string">"{text}"</span>),  <span class="hljs-comment"># ä½¿ç”¨å˜é‡å ä½ç¬¦</span>
  ])

  <span class="hljs-attr">parser</span> = StrOutputParser()

  <span class="hljs-comment"># å°†æç¤ºè¯æ¨¡æ¿é€šè¿‡ç±»ä¼¼äºunixä¸­ç®¡é“ç¬¦çš„å½¢å¼ï¼Œä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ é€’ç»™llm,åœ¨è¿™é‡Œæˆ‘ä»¬åœ¨åŸæ¥çš„é“¾ä¸ŠåŠ äº†ä¸€ä¸ªå­—ç¬¦ä¸²è¾“å‡ºè§£æå™¨</span>
  <span class="hljs-attr">chain</span> = prompt | llm | parser

  <span class="hljs-comment"># ä½¿ç”¨æˆ‘ä»¬åˆšæ‰å®šä¹‰å¥½çš„ä¸€ä¸ªchainè°ƒç”¨è¿è°ƒç”¨å¤§æ¨¡å‹ï¼Œå°†æˆ‘ä»¬åˆšæ‰å®šä¹‰çš„å ä½ç¬¦è®¾ç½®å®é™…çš„å€¼</span>
  <span class="hljs-attr">res</span> = chain.invoke({<span class="hljs-string">"text"</span>: <span class="hljs-string">"æˆ‘æ˜¯ä¸€åä¼˜ç§€çš„Javaå¼€å‘å·¥ç¨‹å¸ˆ"</span>})
  <span class="hljs-comment"># ç›´æ¥æ‰“å°res</span>
  print(res)
</code></pre>
<p>è¿™æ—¶å€™æˆ‘ä»¬å‘ç°ï¼Œå³ä½¿æˆ‘ä»¬æ²¡æœ‰è°ƒç”¨ res.content,è¾“å‡ºçš„ä¹Ÿä»…ä»…æœ‰æˆ‘ä»¬æƒ³è¦çš„å†…å®¹ï¼Œè€Œä¸æ˜¯ä¸€å † json å­—ç¬¦ä¸²</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">I</span> am an excellent Java development engineer.

Process finished with exit <span class="hljs-selector-tag">code</span> <span class="hljs-number">0</span>
</code></pre>
<ul>
<li>json è§£æå™¨</li>
</ul>

<pre><code class="hljs language-ini" lang="ini">from langchain_core.output_parsers import JsonOutputParser
<span class="hljs-attr">parser</span> = JsonOutputParser(pydantic_object=TranslationResult)
</code></pre>
<p>ä¸‹é¢æ”¹é€ æˆ‘ä»¬çš„æµ‹è¯•ä»£ç </p>
<pre><code class="hljs language-ini" lang="ini"> Â  Â from langchain_community.chat_models import ChatTongyi
 Â  Â from langchain_core.output_parsers import JsonOutputParser
 Â  Â from langchain_core.prompts import ChatPromptTemplate
 Â  Â from langchain_core.pydantic_v1 import BaseModel, Field Â <span class="hljs-comment"># æ³¨æ„ä½¿ç”¨ pydantic v1 å…¼å®¹æ ¼å¼</span>
â€‹
 Â  Â <span class="hljs-comment"># å®šä¹‰æœŸæœ›çš„è¾“å‡ºç»“æ„ï¼ˆPydantic æ¨¡å‹ï¼‰</span>
 Â  Â class TranslationResult(BaseModel):
 Â  Â  Â source: <span class="hljs-attr">str</span> = Field(description=<span class="hljs-string">"åŸå§‹ä¸­æ–‡æ–‡æœ¬"</span>)
 Â  Â  Â translated: <span class="hljs-attr">str</span> = Field(description=<span class="hljs-string">"ç¿»è¯‘åçš„è‹±æ–‡æ–‡æœ¬"</span>)
â€‹
 Â  Â <span class="hljs-comment"># åˆå§‹åŒ– LLM</span>
 Â  Â <span class="hljs-attr">llm</span> = ChatTongyi(
 Â  Â  Â <span class="hljs-attr">model</span>=<span class="hljs-string">"qwen-plus"</span>,
 Â  Â  Â <span class="hljs-attr">api_key</span>=<span class="hljs-string">"sk-3e4b3b0a5513440f80a23349057c653f"</span>, Â <span class="hljs-comment"># å»ºè®®ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†</span>
 Â   )
â€‹
 Â  Â <span class="hljs-comment"># åˆ›å»º JsonOutputParserï¼Œä¼ å…¥æˆ‘ä»¬å®šä¹‰çš„æ¨¡å‹</span>
 Â  Â <span class="hljs-attr">parser</span> = JsonOutputParser(pydantic_object=TranslationResult)
â€‹
 Â  Â <span class="hljs-comment"># å®šä¹‰æç¤ºæ¨¡æ¿</span>
 Â  Â <span class="hljs-attr">prompt</span> = ChatPromptTemplate.from_messages([
 Â  Â   (<span class="hljs-string">"system"</span>, <span class="hljs-string">"""ä½ æ˜¯ä¸€åä¸“ä¸šçš„ç¿»è¯‘å®¶ã€‚è¯·å°†ç”¨æˆ·æä¾›çš„ä¸­æ–‡å¥å­å‡†ç¡®ç¿»è¯‘ä¸ºè‹±æ–‡ã€‚
 Â   ä½ çš„è¾“å‡ºå¿…é¡»æ˜¯ JSON æ ¼å¼ï¼Œå¹¶ä¸”åŒ…å«ä¸¤ä¸ªå­—æ®µï¼š
 Â   ```
â€‹
  - source: åŸå§‹ä¸­æ–‡æ–‡æœ¬
  - translated: å¯¹åº”çš„è‹±æ–‡ç¿»è¯‘
â€‹
  {format_instructions}"""</span>),
  (<span class="hljs-string">"human"</span>, <span class="hljs-string">"{text}"</span>)
  ]).partial(format_instructions=parser.get_format_instructions()) <span class="hljs-comment"># è‡ªåŠ¨æ³¨å…¥æ ¼å¼è¯´æ˜</span>
â€‹
 Â <span class="hljs-comment"># æ„å»ºé“¾</span>
â€‹
 Â <span class="hljs-attr">chain</span> = prompt | llm | parser
â€‹
 Â <span class="hljs-comment"># è°ƒç”¨é“¾</span>
â€‹
 Â <span class="hljs-attr">res</span> = chain.invoke({<span class="hljs-string">"text"</span>: <span class="hljs-string">"æˆ‘æ˜¯ä¸€åä¼˜ç§€çš„ Java å¼€å‘å·¥ç¨‹å¸ˆ"</span>})
â€‹
 Â <span class="hljs-comment"># æ‰“å°ç»“æ„åŒ–ç»“æœ</span>
â€‹
 Â print(res)
</code></pre>
</li>
</ul>
<p>æ§åˆ¶å°è¾“å‡ºç»“æœå¦‚ä¸‹</p>
<pre><code class="hljs language-arduino" lang="arduino">  {<span class="hljs-string">'source'</span>: <span class="hljs-string">'æˆ‘æ˜¯ä¸€åä¼˜ç§€çš„Javaå¼€å‘å·¥ç¨‹å¸ˆ'</span>, <span class="hljs-string">'translated'</span>: <span class="hljs-string">'I am an excellent Java development engineer'</span>}

  <span class="hljs-built_in">Process</span> finished with exit code <span class="hljs-number">0</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e8052d180694a10acfe2ae00292cb51~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oSf5oCn55qE56iL5bqP5ZGY5bCP546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770770491&amp;x-signature=PwVSsrqiXeLVCmJfph89nH%2FDCXk%3D" alt="" loading="lazy"/> psï¼š å…¶ä¸­çš„<strong>Pydantic</strong> å°±æ˜¯ä¸€ä¸ªåŸºäº <strong>Python</strong> ç±»å‹æç¤ºçš„æ•°æ®éªŒè¯åº“ï¼Œä¸»è¦ç”¨äºæ•°æ®éªŒè¯å’Œæ¨¡å‹å®šä¹‰ã€‚å®ƒåˆ©ç”¨ Python çš„ç±»å‹æ³¨è§£æ¥å®šä¹‰æ•°æ®ç»“æ„ï¼Œç„¶ååœ¨æ•°æ®è¿›å…¥ç³»ç»Ÿå‰è¿›è¡ŒéªŒè¯ï¼Œç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ã€‚ å®ƒä¼šé€šè¿‡ç»§æ‰¿ <strong>pydantic.BaseModel</strong> åˆ›å»ºæ•°æ®æ¨¡å‹</p>
<p>ä½¿ç”¨è¿™ç§è§£æå™¨ï¼Œå°±æœ‰ä¸€ç§ç±»ä¼¼äºç»“æ„åŒ–è¾“å‡ºçš„æ•ˆæœï¼Œå½“ç„¶ä¹Ÿæœ‰ä¸€ä¸ªç»“æ„åŒ–è¾“å‡ºè§£æå™¨<strong>from langchain.output_parsers import StructuredOutputParser</strong></p>
<p>é‚£ç»“æ„åŒ–è¾“å‡ºåˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸‹é¢è¿™ä¸€ä¸ª prompt</p>
<pre><code class="hljs language-shell" lang="shell">  ä½ æ˜¯ä¸€åä¼˜ç§€çš„æ•°æ®åˆ†æå¸ˆï¼Œæ¥ä¸‹æ¥ä½ è¦æ ¹æ®æˆ‘ç»™ä½ çš„æ•°æ®ï¼ˆcsvæ–‡ä»¶ï¼‰åˆ†æè¿™äº›æ•°æ®ï¼Œå¹¶ä½¿ç”¨echartsä»£ç ç»™æˆ‘å®ç°å¯è§†åŒ–ã€‚ä½ å¿…é¡»æŒ‰ç…§ä¸‹é¢çš„ç»“æ„è¿”å›
  ----- è¿™é‡Œæ”¾åˆ†æçš„ç»“æœ -----
<span class="hljs-meta prompt_">  #</span><span class="bash"><span class="hljs-comment">#### è¿™é‡Œæ”¾echartsä»£ç  #####</span></span>
</code></pre>
<p>æˆ‘ä»¬ä½¿ç”¨**-----** å’Œ <strong>#####</strong> ç”¨æ¥æŠŠæˆ‘ä»¬éœ€è¦çš„å†…å®¹åŒ…è£¹ä¸€ä¸‹ï¼Œä»¥ä¾¿äºæˆ‘ä»¬åç»­çš„æå–æ“ä½œã€‚é‚£å¦‚æœæˆ‘ä»¬ä¸è¿™ä¹ˆå†™å‘¢ï¼Œæ˜¯ä¸æ˜¯ AI ç”Ÿæˆçš„å°±ä¸å¯æ§äº†ï¼Œæˆ‘ä»¬æƒ³è¦æå–ä¹Ÿæ˜¯éå¸¸å›°éš¾ï¼Œæ‰€ä»¥å°±æœ‰äº†ç»“æ„åŒ–è¾“å‡ºè§£æå™¨ï¼Œç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„æ ‡å‡†ã€‚</p>
<p>å½“ç„¶è¿˜æœ‰å…¶ä»–çš„è§£æå™¨ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨ä¸Šé¢æåˆ°çš„æšä¸¾è§£æå™¨ï¼Œåˆ—è¡¨è§£æå™¨ç­‰ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬å°±ä¸ä¸€ä¸€ä»‹ç»ã€‚</p>
<h4 data-id="heading-12">6ã€æ£€ç´¢</h4>
<p>ä»€ä¹ˆæ˜¯æ£€ç´¢ï¼Ÿæƒ³è±¡æˆ‘ä»¬åœ¨å†™ Java é¡¹ç›®çš„æ—¶å€™ï¼Œçªç„¶å¿˜äº†ä¸€ä¸ª API çš„ä½¿ç”¨æ–¹æ³•ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å»æŸ¥å®˜æ–¹æ–‡æ¡£ï¼Œè¿™å°±æ˜¯æ£€ç´¢ï¼ŒåŒ…æ‹¬æˆ‘ä»¬ä½¿ç”¨æœç´¢å¼•æ“å»æœä¸œè¥¿ã€‚ LangChain ä¹Ÿæä¾›äº† llm çš„æ£€ç´¢åŠŸèƒ½ï¼Œè®© llm å»æ ¹æ®ç°æœ‰çš„æ–‡æ¡£å»æœç´¢å’Œç”¨æˆ·é—®é¢˜ç›¸å…³çš„ä¿¡æ¯ï¼Œç„¶åé€šè¿‡æ•´ç†ï¼Œå†ç»™ç”¨æˆ·å›å¤ã€‚</p>
<p>è®¸å¤š LLM åº”ç”¨ç¨‹åºéœ€è¦ç”¨æˆ·ç‰¹å®šæ•°æ®ï¼Œè¿™äº›æ•°æ®ä¸æ˜¯æ¨¡å‹çš„è®­ç»ƒé›†çš„ä¸€éƒ¨åˆ†. å®Œæˆè¿™ä¸€ä»»åŠ¡çš„ä¸»è¦æ–¹æ³•æ˜¯é€šè¿‡æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰. åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œæ£€ç´¢å¤–éƒ¨æ•°æ®ï¼Œç„¶ååœ¨ç”Ÿæˆæ­¥éª¤ä¸­å°†å…¶ä¼ é€’ç»™ LLM. LangChain ä¸º RAG åº”ç”¨ç¨‹åºæä¾›äº†æ‰€æœ‰çš„æ„å»ºæ¨¡å—-ä»ç®€å•åˆ°å¤æ‚. æœ¬æ–‡æ¡£éƒ¨åˆ†æ¶µç›–äº†ä¸æ£€ç´¢æ­¥éª¤ç›¸å…³çš„æ‰€æœ‰å†…å®¹ï¼Œä¾‹å¦‚æ•°æ®çš„è·å–. è™½ç„¶å¬èµ·æ¥å¾ˆç®€å•ï¼Œä½†å¯èƒ½æœ‰å¾®å¦™çš„å¤æ‚æ€§. è¿™æ¶µç›–äº†å‡ ä¸ªå…³é”®æ¨¡å—. <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/077bf73b9a194f65b722900c79fc417d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oSf5oCn55qE56iL5bqP5ZGY5bCP546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770770491&amp;x-signature=f1WfxTChL46vKfJHJO4G%2FcwqTaU%3D" alt="" loading="lazy"/></p>
<ul>
<li>æ–‡æ¡£åŠ è½½å™¨</li>
</ul>
<p>ä»è®¸å¤šä¸åŒæ¥æºåŠ è½½æ–‡æ¡£. LangChain æä¾›äº† 100 å¤šç§ä¸åŒçš„æ–‡æ¡£åŠ è½½å™¨ï¼Œå¹¶ä¸ç©ºé—´ä¸­çš„å…¶ä»–ä¸»è¦æä¾›å•†ï¼ˆå¦‚ AirByte å’Œ Unstructuredï¼‰é›†æˆ. æˆ‘ä»¬æä¾›äº†åŠ è½½å„ç§ç±»å‹æ–‡æ¡£ï¼ˆHTMLã€PDFã€ä»£ç ï¼‰çš„é›†æˆï¼Œä»å„ç§ä½ç½®ï¼ˆç§äºº S3 å­˜å‚¨æ¡¶ã€å…¬å…±ç½‘ç«™ï¼‰åŠ è½½.</p>
<p>æˆ‘ä»¬å°±ä½¿ç”¨ md æ–‡æ¡£åŠ è½½å™¨å»æ”¹é€ ä¸€ä¸‹æˆ‘ä»¬çš„ä»£ç ã€‚æå‰åœ¨æœ¬é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª doc æ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾è¦åŠ è½½çš„ md æ–‡æ¡£ï¼Œå¹¶æ”¾å…¥ä¸€äº› md æ–‡æ¡£ <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0560d3e8366a4f10989437126f76fa7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oSf5oCn55qE56iL5bqP5ZGY5bCP546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770770491&amp;x-signature=RFxqvAY8vY7f3Lncskcl8CXOkT4%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-ini" lang="ini">from langchain_community.document_loaders import DirectoryLoader, TextLoader,
<span class="hljs-comment"># è¿™é‡Œè¿˜ä½¿ç”¨åˆ°äº†ä¸€ä¸ªç›®å½•åŠ è½½å™¨ï¼Œç”¨æ¥æ‰«ææ•´ä¸ªç›®å½•ä¸‹çš„ç‰¹å®šæ–‡æ¡£</span>
<span class="hljs-attr">md_docs</span> = DirectoryLoader(
    <span class="hljs-comment"># æ–‡æ¡£ç›®å½•è·¯å¾„</span>
    "./doc",
    <span class="hljs-comment"># è¦åŠ è½½çš„æ–‡æ¡£ç±»å‹</span>
    <span class="hljs-attr">glob</span>=<span class="hljs-string">"**/*.md"</span>,
    <span class="hljs-comment"># è¦ä½¿ç”¨çš„æ–‡æ¡£åŠ è½½å™¨</span>
    <span class="hljs-attr">loader_cls</span>=TextLoader,
    <span class="hljs-comment"># æ˜¯å¦æ˜¾ç¤ºåŠ è½½è¿›åº¦ï¼Œè¿™é‡Œéœ€è¦å®‰è£…ä¸€ä¸ªpythonçš„è¿›åº¦æ˜¾ç¤ºåº“ï¼ˆtqdmï¼‰,è¿™é‡Œæˆ‘å°±ä¸æ˜¾ç¤ºè¿›åº¦</span>
    <span class="hljs-attr">show_progress</span>=<span class="hljs-literal">False</span>,
    <span class="hljs-comment"># æ˜¯å¦å¯ç”¨å¤šçº¿ç¨‹</span>
    <span class="hljs-attr">use_multithreading</span>=<span class="hljs-literal">True</span>,
    <span class="hljs-comment"># é‡åˆ°é”™è¯¯æ˜¯å¦ä¼šè·³è¿‡ï¼Œå¹¶ç»§ç»­åŠ è½½å‰©ä½™çš„æ–‡æ¡£</span>
    <span class="hljs-attr">silent_errors</span>=<span class="hljs-literal">True</span>
).load()
</code></pre>
<p>å®Œæ•´ä»£ç å¦‚ä¸‹</p>
<pre><code class="hljs language-python" lang="python"> Â  Â  <span class="hljs-comment"># éœ€è¦å®‰è£…ä»¥ä¸‹åº“ï¼š</span>
<span class="hljs-comment"># pip install langchain-community tqdm</span>
â€‹
<span class="hljs-keyword">from</span> langchain_community.chat_models <span class="hljs-keyword">import</span> ChatTongyi
<span class="hljs-keyword">from</span> langchain_core.output_parsers <span class="hljs-keyword">import</span> StrOutputParser Â <span class="hljs-comment"># ä½¿ç”¨å­—ç¬¦ä¸²è§£æå™¨</span>
<span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate
<span class="hljs-keyword">from</span> langchain_community.document_loaders <span class="hljs-keyword">import</span> DirectoryLoader, TextLoader
â€‹
<span class="hljs-comment"># åˆå§‹åŒ– LLM</span>
llm = ChatTongyi(
 Â  Â model=<span class="hljs-string">"qwen-plus"</span>,
 Â  Â api_key=<span class="hljs-string">"sk-3e4b3b0a5513440f80a23349057c653f"</span>, Â <span class="hljs-comment"># é‡è¦ï¼šå®é™…åº”ç”¨ä¸­åº”ä½¿ç”¨ç¯å¢ƒå˜é‡</span>
)
â€‹
<span class="hljs-comment"># å®šä¹‰æç¤ºæ¨¡æ¿ï¼ˆé’ˆå¯¹Javaå¼€å‘ï¼‰</span>
prompt = ChatPromptTemplate.from_messages([
 Â   (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€åèµ„æ·±çš„Javaå·¥ç¨‹å¸ˆï¼Œç²¾é€šSpring Bootå’Œå¾®æœåŠ¡æ¶æ„ã€‚è¯·æ ¹æ®æä¾›çš„Javaä»£ç æ–‡æ¡£ï¼Œå›ç­”ç”¨æˆ·å…³äºJavaç¼–ç¨‹çš„é—®é¢˜ã€‚è¯·ç¡®ä¿å›ç­”å‡†ç¡®ã€ä¸“ä¸šã€‚"</span>),
 Â   (<span class="hljs-string">"human"</span>, <span class="hljs-string">"{text}"</span>)
])
â€‹
<span class="hljs-comment"># æ„å»ºé“¾ï¼ˆä½¿ç”¨å­—ç¬¦ä¸²è§£æå™¨ï¼‰</span>
chain = prompt | llm | StrOutputParser()
â€‹
<span class="hljs-comment"># åŠ è½½æ–‡æ¡£ï¼ˆä»docç›®å½•ä¸‹çš„Markdownæ–‡ä»¶ï¼‰</span>
md_docs = DirectoryLoader(
 Â  Â <span class="hljs-string">"./doc"</span>,
 Â  Â glob=<span class="hljs-string">"**/*.md"</span>,
 Â  Â loader_cls=TextLoader,
 Â  Â show_progress=<span class="hljs-literal">True</span>, Â <span class="hljs-comment"># éœ€è¦å®‰è£…tqdm</span>
 Â  Â use_multithreading=<span class="hljs-literal">True</span>,
 Â  Â silent_errors=<span class="hljs-literal">True</span>
).load()
â€‹
<span class="hljs-built_in">print</span>(<span class="hljs-string">"----------åŠ è½½åˆ°çš„æ–‡æ¡£------------"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å…±åŠ è½½ <span class="hljs-subst">{<span class="hljs-built_in">len</span>(md_docs)}</span> ä¸ªæ–‡æ¡£"</span>)
â€‹
<span class="hljs-comment"># æ‰“å°å‰3ä¸ªæ–‡æ¡£çš„æ‘˜è¦ï¼ˆåªæ‰“å°å†…å®¹çš„å‰100ä¸ªå­—ç¬¦ï¼‰</span>
<span class="hljs-keyword">for</span> i, doc <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(md_docs[:<span class="hljs-number">3</span>]):
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næ–‡æ¡£ <span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span> æ‘˜è¦:"</span>)
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å†…å®¹: <span class="hljs-subst">{doc.page_content[:<span class="hljs-number">100</span>]}</span><span class="hljs-subst">{<span class="hljs-string">'...'</span> <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(doc.page_content) &gt; <span class="hljs-number">100</span> <span class="hljs-keyword">else</span> <span class="hljs-string">''</span>}</span>"</span>)
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ¥æº: <span class="hljs-subst">{doc.metadata[<span class="hljs-string">'source'</span>]}</span>"</span>)
â€‹
</code></pre>
<p>æ§åˆ¶å°è¾“å‡º</p>
<pre><code class="hljs language-markdown" lang="markdown">  ----------åŠ è½½åˆ°çš„æ–‡æ¡£------------
å…±åŠ è½½ 8 ä¸ªæ–‡æ¡£
â€‹
æ–‡æ¡£ 1 æ‘˜è¦:
å†…å®¹: # Java çº¿ç¨‹æ± æœ€ä½³å®è·µ
â€‹
<span class="hljs-section">## åœºæ™¯ä¸ç›®æ ‡</span>
<span class="hljs-bullet">-</span> ç»Ÿä¸€ç®¡ç†çº¿ç¨‹ï¼Œé¿å…é¢‘ç¹åˆ›å»º/é”€æ¯çš„å¼€é”€
<span class="hljs-bullet">-</span> æ§åˆ¶å¹¶å‘åº¦ä¸ä»»åŠ¡æ’é˜Ÿç­–ç•¥ï¼ŒåŒ¹é…ä¸šåŠ¡å³°è°·
â€‹
<span class="hljs-section">## æ ¸å¿ƒå‚æ•°ä¸å«ä¹‰</span>
<span class="hljs-bullet">-</span> æ ¸å¿ƒçº¿ç¨‹æ•° corePoolSiz...
æ¥æº: ../doc/java-thread-pool.md
â€‹
æ–‡æ¡£ 2 æ‘˜è¦:
å†…å®¹: # Java å¹¶å‘ä¸é”
â€‹
<span class="hljs-section">## å¯è§æ€§/æœ‰åºæ€§/åŸå­æ€§</span>
<span class="hljs-bullet">-</span> volatileï¼šä¿è¯å¯è§æ€§ä¸ç¦æ­¢æŒ‡ä»¤é‡æ’ï¼Œä¸ä¿è¯åŸå­æ€§
<span class="hljs-bullet">-</span> synchronizedï¼šå¯é‡å…¥äº’æ–¥ï¼Œå†…ç½®é”ï¼Œè¿›å…¥/é€€å‡ºæœ‰å†…å­˜è¯­ä¹‰
<span class="hljs-bullet">-</span> CAS...
æ¥æº: ../doc/java-concurrency.md
â€‹
æ–‡æ¡£ 3 æ‘˜è¦:
å†…å®¹: # Spring Boot æœ€ä½³å®è·µ
â€‹
<span class="hljs-section">## åˆ†å±‚ä¸è¾¹ç•Œ</span>
<span class="hljs-bullet">-</span> Controllerï¼šæ ¡éªŒ/é‰´æƒ/ç¼–æ’
<span class="hljs-bullet">-</span> Serviceï¼šä¸šåŠ¡è§„åˆ™ä¸äº‹åŠ¡
<span class="hljs-bullet">-</span> Repositoryï¼šæŒä¹…åŒ–ï¼Œç¦æ­¢ä¸šåŠ¡é€»è¾‘
â€‹
<span class="hljs-section">## é…ç½®ä¸...</span>
æ¥æº: ../doc/spring-boot-best-practices.md
100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 8/8 [00:00&lt;00:00, 2462.35it/s]
â€‹
Process finished with exit code 0
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬åœ¨è°ƒç”¨ llm å›ç­” Java å¼€å‘ç›¸å…³çš„é—®é¢˜çš„æ—¶å€™ï¼Œä»–å°±ä¼šæ£€ç´¢æ–‡æ¡£å†…å®¹ï¼Œç»“åˆæ–‡æ¡£ç›¸å…³çš„å†…å®¹è¿›è¡Œå›ç­”</p>
<p>æ¥ç€æˆ‘ä»¬æ¥åœ¨æˆ‘ä»¬çš„æµ‹è¯•ä»£ç ä¸­è®© llm å»æ£€ç´¢æ–‡æ¡£</p>
<pre><code class="hljs language-python" lang="python"> Â <span class="hljs-keyword">from</span> langchain_community.chat_models <span class="hljs-keyword">import</span> ChatTongyi
 Â <span class="hljs-keyword">from</span> langchain_core.output_parsers <span class="hljs-keyword">import</span> StrOutputParser
 Â <span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate
 Â <span class="hljs-keyword">from</span> langchain_community.document_loaders <span class="hljs-keyword">import</span> DirectoryLoader, TextLoader
 Â <span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> Counter
 Â <span class="hljs-keyword">import</span> re
â€‹
 Â <span class="hljs-comment"># åˆå§‹åŒ– LLM</span>
 Â llm = ChatTongyi(
 Â  Â  Â model=<span class="hljs-string">"qwen-plus"</span>,
 Â  Â  Â api_key=<span class="hljs-string">"sk-3e4b3b0a5513440f80a23349057c653f"</span>, Â <span class="hljs-comment"># é‡è¦ï¼šå®é™…åº”ç”¨ä¸­åº”ä½¿ç”¨ç¯å¢ƒå˜é‡</span>
  )
â€‹
 Â <span class="hljs-comment"># æ–‡æ¡£åŠ è½½</span>
 Â md_docs = DirectoryLoader(
 Â  Â  Â <span class="hljs-string">"../doc"</span>,
 Â  Â  Â glob=<span class="hljs-string">"**/*.md"</span>,
 Â  Â  Â loader_cls=TextLoader,
 Â  Â  Â show_progress=<span class="hljs-literal">True</span>,
 Â  Â  Â use_multithreading=<span class="hljs-literal">True</span>,
 Â  Â  Â silent_errors=<span class="hljs-literal">True</span>
  ).load()
â€‹
 Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"----------æ–‡æ¡£åŠ è½½å®Œæˆ------------"</span>)
 Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å…±åŠ è½½ <span class="hljs-subst">{<span class="hljs-built_in">len</span>(md_docs)}</span> ä¸ªæ–‡æ¡£"</span>)
â€‹
 Â <span class="hljs-comment"># ç®€å•çš„æ£€ç´¢å‡½æ•°ï¼ˆåŸºäºå…³é”®è¯åŒ¹é…ï¼‰</span>
 Â <span class="hljs-keyword">def</span> <span class="hljs-title function_">retrieve_documents</span>(<span class="hljs-params">question, documents, k=<span class="hljs-number">3</span></span>):
 Â  Â  Â <span class="hljs-comment"># å°†é—®é¢˜åˆ†è¯ï¼ˆç®€å•æŒ‰ç©ºæ ¼åˆ†å‰²ï¼Œå¿½ç•¥æ ‡ç‚¹ï¼‰</span>
 Â  Â  Â question_words = <span class="hljs-built_in">set</span>(re.findall(<span class="hljs-string">r'\w+'</span>, question.lower()))
â€‹
 Â  Â  Â <span class="hljs-comment"># è®¡ç®—æ¯ä¸ªæ–‡æ¡£çš„å…³é”®è¯åŒ¹é…åº¦</span>
 Â  Â  Â doc_scores = []
 Â  Â  Â <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> documents:
 Â  Â  Â  Â  Â <span class="hljs-comment"># æ–‡æ¡£å†…å®¹åˆ†è¯</span>
 Â  Â  Â  Â  Â doc_words = re.findall(<span class="hljs-string">r'\w+'</span>, doc.page_content.lower())
 Â  Â  Â  Â  Â <span class="hljs-comment"># è®¡ç®—é—®é¢˜è¯åœ¨æ–‡æ¡£ä¸­å‡ºç°çš„æ¬¡æ•°</span>
 Â  Â  Â  Â  Â common_words = [word <span class="hljs-keyword">for</span> word <span class="hljs-keyword">in</span> question_words <span class="hljs-keyword">if</span> word <span class="hljs-keyword">in</span> doc_words]
 Â  Â  Â  Â  Â score = <span class="hljs-built_in">len</span>(common_words)
 Â  Â  Â  Â  Â doc_scores.append((doc, score))
â€‹
 Â  Â  Â <span class="hljs-comment"># æŒ‰åˆ†æ•°æ’åºï¼ˆé™åºï¼‰</span>
 Â  Â  Â doc_scores.sort(key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">1</span>], reverse=<span class="hljs-literal">True</span>)
â€‹
 Â  Â  Â <span class="hljs-comment"># è¿”å›kä¸ªæœ€ç›¸å…³çš„æ–‡æ¡£</span>
 Â  Â  Â <span class="hljs-keyword">return</span> [doc <span class="hljs-keyword">for</span> doc, _ <span class="hljs-keyword">in</span> doc_scores[:k]]
â€‹
 Â <span class="hljs-comment"># å®šä¹‰æç¤ºæ¨¡æ¿</span>
 Â prompt = ChatPromptTemplate.from_messages([
 Â  Â   (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€åèµ„æ·±çš„Javaå·¥ç¨‹å¸ˆï¼Œç²¾é€šSpring Bootå’Œå¾®æœåŠ¡æ¶æ„ã€‚è¯·æ ¹æ®æä¾›çš„Javaä»£ç æ–‡æ¡£ï¼Œå›ç­”ç”¨æˆ·å…³äºJavaç¼–ç¨‹çš„é—®é¢˜ã€‚è¯·ç¡®ä¿å›ç­”å‡†ç¡®ã€ä¸“ä¸šï¼Œå¹¶åŒ…å«å¿…è¦çš„ä»£ç ç¤ºä¾‹ã€‚"</span>),
 Â  Â   (<span class="hljs-string">"human"</span>, <span class="hljs-string">"é—®é¢˜: {question}\n\nç›¸å…³æ–‡æ¡£å†…å®¹:\n{context}"</span>)
  ])
â€‹
 Â <span class="hljs-comment"># æ„å»ºé“¾</span>
 Â chain = prompt | llm | StrOutputParser()
â€‹
 Â <span class="hljs-comment"># ç¤ºä¾‹é—®ç­”</span>
 Â <span class="hljs-keyword">def</span> <span class="hljs-title function_">ask_java_question</span>(<span class="hljs-params">question</span>):
 Â  Â  Â <span class="hljs-comment"># æ£€ç´¢ç›¸å…³æ–‡æ¡£</span>
 Â  Â  Â context_docs = retrieve_documents(question, md_docs, k=<span class="hljs-number">3</span>)
â€‹
 Â  Â  Â <span class="hljs-comment"># ç”Ÿæˆä¸Šä¸‹æ–‡å­—ç¬¦ä¸²</span>
 Â  Â  Â context = <span class="hljs-string">"\n\n"</span>.join([doc.page_content <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> context_docs])
â€‹
 Â  Â  Â <span class="hljs-comment"># ç”Ÿæˆå›ç­”</span>
 Â  Â  Â response = chain.invoke({
 Â  Â  Â  Â  Â <span class="hljs-string">"question"</span>: question,
 Â  Â  Â  Â  Â <span class="hljs-string">"context"</span>: context
 Â  Â   })
â€‹
 Â  Â  Â <span class="hljs-keyword">return</span> response
â€‹
 Â <span class="hljs-comment"># æµ‹è¯•ç¤ºä¾‹</span>
 Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n----------ç¤ºä¾‹é—®ç­”----------"</span>)
 Â question = <span class="hljs-string">"è¯´è¯´Java å¹¶å‘ä¸é”"</span>
 Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é—®é¢˜: <span class="hljs-subst">{question}</span>"</span>)
 Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"å›ç­”:"</span>)
 Â <span class="hljs-built_in">print</span>(ask_java_question(question))
 Â <span class="hljs-built_in">print</span>(ask_java_question(question))
</code></pre>
<p>psï¼š å®é™…ä¸Šè¿›è¡ŒçŸ¥è¯†åº“çš„æ£€ç´¢ï¼Œè¿˜æ˜¯è¦å¯¹åŠ è½½åˆ°çš„æ–‡æ¡£è¿›è¡Œåˆ†å‰²ï¼Œå¹¶è¿›è¡Œå‘é‡è½¬åŒ–çš„ï¼Œç„¶åå­˜å‚¨åˆ°å‘é‡æ•°æ®åº“æ ¹æ®ç›¸ä¼¼åº¦è¿›è¡ŒåŒ¹é…ï¼Œæˆ‘ä»¬è¿™é‡Œå°±ç®€å•å®ç°ä¸€ä¸ªæ£€ç´¢å‡½æ•°</p>
<p>æ§åˆ¶å°è¾“å…¥å¦‚ä¸‹</p>
<pre><code class="hljs language-markdown" lang="markdown"> Â  Â  Â   100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 8/8 [00:00&lt;00:00, 2827.78it/s]
 Â  Â   ----------æ–‡æ¡£åŠ è½½å®Œæˆ------------
 Â  Â   å…±åŠ è½½ 8 ä¸ªæ–‡æ¡£
â€‹
 Â  Â   ----------ç¤ºä¾‹é—®ç­”----------
 Â  Â   é—®é¢˜: è¯´è¯´Java å¹¶å‘ä¸é”
 Â  Â   å›ç­”:
 Â  Â   Java å¹¶å‘ç¼–ç¨‹æ˜¯æ„å»ºé«˜æ€§èƒ½ã€é«˜å¯ç”¨æœåŠ¡ç«¯åº”ç”¨çš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ã€‚ä»¥ä¸‹æ˜¯åŸºäºä½ æä¾›çš„æ–‡æ¡£å†…å®¹ï¼Œå¯¹ <span class="hljs-strong">**Java å¹¶å‘ä¸é”**</span> çš„ç³»ç»Ÿæ€§æ€»ç»“å’Œæ·±å…¥è§£æï¼š
â€‹
 Â  Â   ---
â€‹
 Â  Â   ## ä¸€ã€å¹¶å‘ä¸‰å¤§ç‰¹æ€§ï¼šåŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§
â€‹
 Â  Â   ### 1. åŸå­æ€§ï¼ˆAtomicityï¼‰
 Â  Â   æŒ‡ä¸€ä¸ªæ“ä½œä¸å¯ä¸­æ–­ï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸï¼Œè¦ä¹ˆä¸æ‰§è¡Œã€‚
â€‹
 Â  Â   - âŒ <span class="hljs-code">`volatile`</span> ä¸ä¿è¯åŸå­æ€§
 Â  Â   - âœ… <span class="hljs-code">`synchronized`</span> å’Œ <span class="hljs-code">`ReentrantLock`</span> å¯ä¿è¯åŸå­æ€§
 Â  Â   - âœ… CASï¼ˆCompare-And-Swapï¼‰é…åˆå¾ªç¯å®ç°åŸå­æ›´æ–°ï¼ˆå¦‚ <span class="hljs-code">`AtomicInteger`</span>ï¼‰
  ......................çœç•¥.........................
 Â  Â   ## æ€»ç»“
â€‹
 Â  Â   Java å¹¶å‘ç¼–ç¨‹éœ€è¦ç»¼åˆè€ƒè™‘ <span class="hljs-strong">**æ€§èƒ½ã€å®‰å…¨æ€§ã€å¯ç»´æŠ¤æ€§**</span>ï¼š
â€‹
 Â  Â   - <span class="hljs-strong">**åŸºç¡€å±‚é¢**</span>ï¼šç†è§£åŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§ï¼Œåˆç†ä½¿ç”¨ <span class="hljs-code">`volatile`</span> å’Œ <span class="hljs-code">`synchronized`</span>
 Â  Â   - <span class="hljs-strong">**è¿›é˜¶å±‚é¢**</span>ï¼šæŒæ¡ <span class="hljs-code">`ReentrantLock`</span>ã€<span class="hljs-code">`ReadWriteLock`</span>ã€<span class="hljs-code">`StampedLock`</span>ã€<span class="hljs-code">`CompletableFuture`</span>
 Â  Â   - <span class="hljs-strong">**é«˜æ€§èƒ½åœºæ™¯**</span>ï¼šé€‰ç”¨ <span class="hljs-code">`LongAdder`</span>ã€<span class="hljs-code">`ConcurrentHashMap`</span> ç­‰æ— é”æˆ–åˆ†æ®µé”ç»“æ„
 Â  Â   - <span class="hljs-strong">**è®¾è®¡å±‚é¢**</span>ï¼šç¼©å°é”èŒƒå›´ã€é¿å…åµŒå¥—ã€ä¸åœ¨é”ä¸­åšè€—æ—¶æ“ä½œ
â€‹
 Â  Â   &gt; ğŸ“Œ æœ€ç»ˆç›®æ ‡ï¼š<span class="hljs-strong">**å°½å¯èƒ½æ— é”åŒ–ï¼Œè¯»å†™åˆ†ç¦»ï¼Œå‡å°‘ç«äº‰ï¼Œæå‡ååé‡**</span>
â€‹
 Â  Â   å¦‚æœä½ æœ‰å…·ä½“çš„å¹¶å‘é—®é¢˜åœºæ™¯ï¼ˆæ¯”å¦‚â€œå¦‚ä½•å®ç°ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ç¼“å­˜ï¼Ÿâ€ï¼‰ï¼Œæ¬¢è¿è¿›ä¸€æ­¥æé—®ï¼
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åœ¨ ai å›å¤çš„å†…å®¹å‘ç°äº†ï¼Œä»–æ ¹æ®äº†å·²ç»æœ‰çš„æ–‡æ¡£è¿›è¡Œå›ç­”ã€‚ å¯¹äºå…¶ä»–çš„ä¸€äº›æ–‡æ¡£åŠ è½½å™¨ï¼Œæ¯”å¦‚ pdf åŠ è½½å™¨ç­‰ç”¨æ³•ä¹Ÿæ˜¯å·®ä¸å¤š</p>
<p>æ¯”å¦‚æˆ‘ä»¬æƒ³ä½¿ç”¨ pdf æ–‡æ¡£åŠ è½½å™¨</p>
<pre><code class="hljs language-ini" lang="ini">  from langchain_community.document_loaders import DirectoryLoader, TextLoader, PyPDFLoader
    <span class="hljs-attr">pdf_docs</span> = DirectoryLoader(
        config.DOC_DIR,
        <span class="hljs-attr">glob</span>=<span class="hljs-string">"**/*.pdf"</span>,
        <span class="hljs-attr">loader_cls</span>=PyPDFLoader,
        <span class="hljs-attr">show_progress</span>=<span class="hljs-literal">True</span>,
        <span class="hljs-attr">use_multithreading</span>=<span class="hljs-literal">True</span>,
        <span class="hljs-attr">silent_errors</span>=<span class="hljs-literal">True</span>
    ).load()
</code></pre>
<ul>
<li>
<p>æ–‡æ¡£è½¬æ¢å™¨</p>
<p>è¿™é‡Œå‘¢å°±å’Œæˆ‘ä»¬åœ¨è®²è§£æ–‡æ¡£åŠ è½½å™¨çš„ä½¿ç”¨æ‰€å¯¹åº”äº†ï¼Œæˆ‘ä»¬åœ¨ä¸Šé¢æåˆ°åŠ è½½åˆ°çš„æ–‡æ¡£éœ€è¦è¿›ä¸€æ­¥è½¬åŒ–ï¼Œå½“æ—¶æˆ‘ä»¬å°±ç¼–å†™äº†ä¸€ä¸ªç®€å•çš„å¤„ç†å‡½æ•°ï¼Œç°åœ¨æˆ‘ä»¬å°±æ¥ä½¿ç”¨çœŸæ­£çš„æ–‡æ¡£è½¬æ¢å™¨</p>
</li>
</ul>
<p>æ£€ç´¢çš„ä¸€ä¸ªå…³é”®éƒ¨åˆ†æ˜¯ä»…è·å–æ–‡æ¡£çš„ç›¸å…³éƒ¨åˆ†. ä¸ºäº†æœ€å¥½åœ°å‡†å¤‡æ–‡æ¡£ä»¥è¿›è¡Œæ£€ç´¢ï¼Œè¿™æ¶‰åŠå‡ ä¸ªè½¬æ¢æ­¥éª¤. å…¶ä¸­ä¸€ä¸ªä¸»è¦æ­¥éª¤æ˜¯å°†å¤§å‹æ–‡æ¡£åˆ†å‰²ï¼ˆæˆ–åˆ†å—ï¼‰ä¸ºè¾ƒå°çš„å—. LangChain æä¾›äº†å‡ ç§ä¸åŒçš„ç®—æ³•æ¥å®Œæˆæ­¤æ“ä½œï¼Œä»¥åŠé’ˆå¯¹ç‰¹å®šæ–‡æ¡£ç±»å‹ï¼ˆä»£ç ã€markdown ç­‰ï¼‰è¿›è¡Œä¼˜åŒ–çš„é€»è¾‘.</p>
<p>é‚£éƒ½æœ‰å‡ ç§æ–‡æ¡£è½¬æ¢å™¨å‘¢ï¼Œæˆ‘ä»¬ä¸ä»…å¯ä»¥é€šè¿‡å®˜æ–¹æ–‡æ¡£çš„å½¢å¼æ¥æŸ¥çœ‹ï¼Œè€Œä¸”å¯ä»¥é€šè¿‡æŸ¥çœ‹æºä»£ç çš„æ–¹å¼ï¼Œä¹‹å‰æˆ‘ä»¬æ‰€è®²çš„å„ç§ langchian ä¸­çš„å·¥å…·ç±»åº“ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹å¼æ¥æŸ¥çœ‹ã€‚ ä»¥ä¸‹æ˜¯æ‰€æœ‰çš„æ–‡æ¡£è½¬æ¢å™¨ï¼Œé€šè¿‡æŸ¥çœ‹<strong>langchain.text_splitter</strong>çš„æºä»£ç æ‰€å¾—</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8163b3c300ce44daa2d4f53f041c3f90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oSf5oCn55qE56iL5bqP5ZGY5bCP546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770770491&amp;x-signature=x%2BMOj2PgA3JF8YzYTIaSzsUxxvI%3D" alt="" loading="lazy"/></p>
<p>é‚£å¯¹äºæˆ‘ä»¬å¼€å‘ä¸€ä¸ªç®€å•çš„ LangChain æ™ºèƒ½ä½“è€Œè¨€ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨æœ€åŸºç¡€çš„<strong>from langchain.text_splitter import CharacterTextSplitter</strong>å­—ç¬¦åˆ†å‰²å™¨</p>
<pre><code class="hljs language-ini" lang="ini">  <span class="hljs-attr">text_splitter</span> = CharacterTextSplitter(separator=<span class="hljs-string">"\n\n"</span>, chunk_size=<span class="hljs-number">500</span>, chunk_overlap=<span class="hljs-number">80</span>, length_function=len)
<span class="hljs-attr">texts</span> = text_splitter.split_documents(all_docs) if all_docs else []
</code></pre>
<p>åœ¨ä½¿ç”¨<code>CharacterTextSplitter</code>æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ é€’è¿™å‡ ä¸ªå‚æ•°ï¼š -æŒ‡å®šç”¨äºåˆ†å‰²æ–‡æœ¬çš„åˆ†éš”ç¬¦ã€‚<code>separator</code>ï¼Œæ¯ä¸€ä¸ªåˆ†å‰²åæ–‡æœ¬å—çš„å¤§å°<code>chunk_size</code>å½“æ–‡æœ¬é•¿åº¦è¶…è¿‡ chunk_size æ—¶ï¼ŒCharacterTextSplitter ä¼šå°½é‡åœ¨ separator å¤„è¿›è¡Œåˆ‡åˆ†ï¼Œä»¥é¿å…åœ¨å¥å­æˆ–æ®µè½ä¸­é—´åˆ‡æ–­ã€‚</p>
<ul>
<li>æ¯ä¸ªæ–‡æœ¬å—ï¼ˆchunkï¼‰çš„æœ€å¤§é•¿åº¦ï¼Œ<code>chunk_size</code>,åˆ†å‰²åçš„æ¯ä¸€æ®µæ–‡æœ¬é•¿åº¦ä¸ä¼šæ˜¾è‘—è¶…è¿‡è¿™ä¸ªå€¼</li>
<li>ç›¸é‚»æ–‡æœ¬å—ä¹‹é—´çš„é‡å å­—ç¬¦æ•°,<code>chunk_overlap</code>ã€‚ä¸ºäº†ä¿æŒä¸Šä¸‹æ–‡è¿è´¯æ€§ï¼Œåä¸€ä¸ª chunk ä¼šåŒ…å«å‰ä¸€ä¸ª chunk æœ«å°¾çš„è‹¥å¹²å­—ç¬¦ã€‚è¿™é‡Œè®¾ç½®ä¸º 80ï¼Œæ„å‘³ç€æ¯ä¸ª chunk çš„å¼€å¤´ 80 ä¸ªå­—ç¬¦ä¼šå’Œå‰ä¸€ä¸ª chunk çš„ç»“å°¾ 80 ä¸ªå­—ç¬¦é‡å¤ã€‚</li>
<li>ç”¨äºè®¡ç®—æ–‡æœ¬é•¿åº¦çš„å‡½æ•°ã€‚<code>length_function</code>,é»˜è®¤æ˜¯ Python å†…ç½®çš„ len()ï¼Œå³æŒ‰å­—ç¬¦æ•°è®¡ç®—é•¿åº¦ã€‚ä½†ä½ å¯ä»¥æ›¿æ¢ä¸ºå…¶ä»–å‡½æ•°ï¼Œæ¯”å¦‚ä½¿ç”¨ token è®¡æ•°å™¨ï¼ˆå¦‚ tiktokenï¼‰æ¥æŒ‰ token æ•°åˆ†å‰²ï¼Œè¿™åœ¨ä½¿ç”¨ LLMï¼ˆå¤§è¯­è¨€æ¨¡å‹ï¼‰æ—¶æ›´å¸¸è§ï¼Œå› ä¸ºæ¨¡å‹é€šå¸¸æœ‰ token é™åˆ¶ã€‚</li>
</ul>
<p>å®Œæ•´ä»£ç å¦‚ä¸‹</p>
<pre><code class="hljs language-ini" lang="ini">      from langchain_community.document_loaders import DirectoryLoader, TextLoader
    from langchain.text_splitter import CharacterTextSplitter

    <span class="hljs-comment"># 1. åŠ è½½ Markdown æ–‡æ¡£</span>
    <span class="hljs-attr">md_docs</span> = DirectoryLoader(
        "../doc",
        <span class="hljs-attr">glob</span>=<span class="hljs-string">"**/*.md"</span>,
        <span class="hljs-attr">loader_cls</span>=TextLoader,
        <span class="hljs-attr">show_progress</span>=<span class="hljs-literal">True</span>,
        <span class="hljs-attr">use_multithreading</span>=<span class="hljs-literal">True</span>,
        <span class="hljs-attr">silent_errors</span>=<span class="hljs-literal">True</span>
    ).load()

    print(f"âœ… å…±åŠ è½½ {len(md_docs)} ä¸ªæ–‡æ¡£")

    <span class="hljs-comment"># 2. åˆå§‹åŒ–æ–‡æœ¬åˆ†å‰²å™¨</span>
    <span class="hljs-attr">text_splitter</span> = CharacterTextSplitter(
        <span class="hljs-attr">separator</span>=<span class="hljs-string">"\n\n"</span>,      <span class="hljs-comment"># ä¼˜å…ˆåœ¨æ®µè½ä¹‹é—´åˆ‡åˆ†</span>
        <span class="hljs-attr">chunk_size</span>=<span class="hljs-number">500</span>,        <span class="hljs-comment"># æ¯å—æœ€å¤š 500 ä¸ªå­—ç¬¦</span>
        <span class="hljs-attr">chunk_overlap</span>=<span class="hljs-number">80</span>,      <span class="hljs-comment"># ç›¸é‚»å—é‡å  80 ä¸ªå­—ç¬¦</span>
        <span class="hljs-attr">length_function</span>=len    <span class="hljs-comment"># æŒ‰å­—ç¬¦æ•°è®¡ç®—é•¿åº¦</span>
    )

    <span class="hljs-comment"># 3. æ‰§è¡Œåˆ†å‰²</span>
    <span class="hljs-attr">split_docs</span> = text_splitter.split_documents(md_docs)

    print(f"âœ‚ï¸ åˆ†å‰²åå¾—åˆ° {len(split_docs)} ä¸ªæ–‡æœ¬å—\n")

    <span class="hljs-comment"># 4. æ‰“å°æ¯ä¸ª chunk çš„å†…å®¹ï¼ˆå¯é€‰ï¼šåªæ‰“å°å‰ 3 ä¸ªæˆ–å…¨éƒ¨ï¼‰</span>
    for i, doc in enumerate(split_docs<span class="hljs-section">[:5]</span>, 1):  <span class="hljs-comment"># è¿™é‡Œåªå±•ç¤ºå‰ 5 ä¸ªï¼Œé¿å…åˆ·å±</span>
        print(f"--- Chunk {i} (é•¿åº¦: {len(doc.page_content)} å­—ç¬¦) ---")
        print(doc.page_content<span class="hljs-section">[:300]</span> + ("..." if len(doc.page_content) &gt; 300 else ""))  <span class="hljs-comment"># æˆªæ–­æ˜¾ç¤º</span>
        print()
</code></pre>
<p>æˆ‘ä»¬è¿™é‡Œå°±ç›´æ¥æŸ¥çœ‹åˆ†å‰²ä¹‹åçš„æ–‡æ¡£</p>
<pre><code class="hljs language-ruby" lang="ruby"> Â  Â  Â <span class="hljs-number">100</span><span class="hljs-string">%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|</span> <span class="hljs-number">8</span>/<span class="hljs-number">8</span> [<span class="hljs-number">00</span><span class="hljs-symbol">:</span><span class="hljs-number">00</span>&lt;<span class="hljs-number">00</span><span class="hljs-symbol">:</span><span class="hljs-number">00</span>, <span class="hljs-number">3795</span>.32it/s]
 Â  Â <span class="hljs-title class_">Created</span> a chunk of size <span class="hljs-number">762</span>, which is longer than the specified <span class="hljs-number">500</span>
 Â  Â <span class="hljs-title class_">Created</span> a chunk of size <span class="hljs-number">601</span>, which is longer than the specified <span class="hljs-number">500</span>
 Â  Â <span class="hljs-title class_">Created</span> a chunk of size <span class="hljs-number">560</span>, which is longer than the specified <span class="hljs-number">500</span>
 Â  Â âœ… å…±åŠ è½½ <span class="hljs-number">8</span> ä¸ªæ–‡æ¡£
 Â  Â âœ‚ï¸ åˆ†å‰²åå¾—åˆ° <span class="hljs-number">18</span> ä¸ªæ–‡æœ¬å—
â€‹
 Â  Â --- <span class="hljs-title class_">Chunk</span> <span class="hljs-number">1</span> (é•¿åº¦: <span class="hljs-number">414</span> å­—ç¬¦) ---
 Â  Â <span class="hljs-comment"># Java å¹¶å‘ä¸é”</span>
â€‹
 Â  Â <span class="hljs-comment">## å¯è§æ€§/æœ‰åºæ€§/åŸå­æ€§</span>
 Â  Â - volatileï¼šä¿è¯å¯è§æ€§ä¸ç¦æ­¢æŒ‡ä»¤é‡æ’ï¼Œä¸ä¿è¯åŸå­æ€§
 Â  Â - synchronizedï¼šå¯é‡å…¥äº’æ–¥ï¼Œå†…ç½®é”ï¼Œè¿›å…¥/é€€å‡ºæœ‰å†…å­˜è¯­ä¹‰
 Â  Â - <span class="hljs-variable constant_">CAS</span>ï¼šåŸå­æ›´æ–°ï¼Œéœ€é…åˆè‡ªæ—‹/é€€é¿
â€‹
 Â  Â <span class="hljs-comment">## å¸¸ç”¨å¹¶å‘å·¥å…·</span>
 Â  Â - <span class="hljs-title class_">CountDownLatch</span>/<span class="hljs-title class_">CyclicBarrier</span>/<span class="hljs-title class_">Semaphore</span>
 Â  Â - <span class="hljs-title class_">ReentrantLock</span>/<span class="hljs-title class_">ReadWriteLock</span>/<span class="hljs-title class_">StampledLock</span>
 Â  Â - <span class="hljs-title class_">CompletableFuture</span>ï¼šå¼‚æ­¥ç¼–æ’ allOf/anyOfï¼Œå¼‚å¸¸å¤„ç† exceptionally
â€‹
 Â  Â <span class="hljs-comment">## æ— é”/åˆ†æ®µé”</span>
 Â  Â - <span class="hljs-title class_">LongAdder</span> åœ¨é«˜å¹¶å‘è®¡æ•°åœºæ™¯ä¼˜äº ...
â€‹
 Â  Â --- <span class="hljs-title class_">Chunk</span> <span class="hljs-number">2</span> (é•¿åº¦: <span class="hljs-number">160</span> å­—ç¬¦) ---
 Â  Â <span class="hljs-comment">## è®¾è®¡åŸåˆ™</span>
 Â  Â - ç¼©å°é”ç²’åº¦ï¼Œå°½é‡æ— é”/è¯»å†™åˆ†ç¦»
 Â  Â - é¿å…åµŒå¥—é”ï¼Œéµå¾ªå›ºå®šåŠ é”é¡ºåº
 Â  Â - æ§åˆ¶ä¸´ç•ŒåŒºè€—æ—¶ï¼Œé¿å…åœ¨é”å†…åš <span class="hljs-variable constant_">IO</span>
â€‹
 Â  Â <span class="hljs-comment">## åœºæ™¯ç¤ºä¾‹</span>
 Â  Â - é«˜å¹¶å‘è®¡æ•°ï¼š<span class="hljs-title class_">LongAdder</span>
 Â  Â - é«˜è¯»ä½å†™ç¼“å­˜ï¼š<span class="hljs-title class_">ReadWriteLock</span> æˆ– <span class="hljs-title class_">Caffeine</span>
 Â  Â - ä»»åŠ¡ç¼–æ’ï¼š<span class="hljs-title class_">CompletableFuture</span> å¹¶è¡Œæ‹‰å– + è¶…æ—¶å…œåº•
â€‹
 Â  Â --- <span class="hljs-title class_">Chunk</span> <span class="hljs-number">3</span> (é•¿åº¦: <span class="hljs-number">385</span> å­—ç¬¦) ---
 Â  Â <span class="hljs-comment"># Spring Boot æœ€ä½³å®è·µ</span>
â€‹
 Â  Â <span class="hljs-comment">## åˆ†å±‚ä¸è¾¹ç•Œ</span>
 Â  Â - <span class="hljs-title class_">Controller</span>ï¼šæ ¡éªŒ/é‰´æƒ/ç¼–æ’
 Â  Â - <span class="hljs-title class_">Service</span>ï¼šä¸šåŠ¡è§„åˆ™ä¸äº‹åŠ¡
 Â  Â - <span class="hljs-title class_">Repository</span>ï¼šæŒä¹…åŒ–ï¼Œç¦æ­¢ä¸šåŠ¡é€»è¾‘
â€‹
 Â  Â <span class="hljs-comment">## é…ç½®ä¸ç¯å¢ƒ</span>
 Â  Â - ä½¿ç”¨åˆ†ç¯å¢ƒ ymlï¼šdev/test/prod
 Â  Â - å¤–éƒ¨åŒ–é…ç½®ï¼Œä¸¥ç¦æŠŠå¯†é’¥å†™å…¥ä»£ç 
â€‹
 Â  Â <span class="hljs-comment">## äº‹åŠ¡ä¸å¹‚ç­‰</span>
 Â  Â - ä»¥ <span class="hljs-title class_">Service</span> ä¸ºç²’åº¦ï¼Œ<span class="hljs-variable">@Transactional</span> æ”¾åœ¨ <span class="hljs-keyword">public</span> æ–¹æ³•
 Â  Â - å¤–éƒ¨æ¥å£æä¾›å¹‚ç­‰é”®ï¼ˆå¦‚ä¸šåŠ¡å•å·ï¼‰ï¼Œé¿å…é‡å¤æ‰£æ¬¾
â€‹
 Â  Â <span class="hljs-comment">## æ€§èƒ½ä¸ç¨³å®šæ€§</span>
 Â  Â - è¿æ¥æ± ï¼š<span class="hljs-title class_">Hikari</span> è¿æ¥æ•°ã€è¶…æ—¶
 Â  Â - åºåˆ—åŒ–ï¼š<span class="hljs-title class_">Jackson</span> æŒ‰éœ€è£å‰ªã€ç¦ç”¨é»˜è®¤ç©ºå¯¹è±¡
 Â  Â - ç»Ÿä¸€å¼‚å¸¸å¤„ç†ä¸é”™è¯¯ç 
 Â  Â - ...
â€‹
 Â  Â --- <span class="hljs-title class_">Chunk</span> <span class="hljs-number">4</span> (é•¿åº¦: <span class="hljs-number">124</span> å­—ç¬¦) ---
 Â  Â <span class="hljs-comment"># æ•…éšœæ’æŸ¥ä¸ä¿®å¤è®°å½•</span>
â€‹
 Â  Â &gt; æœ¬æ–‡æ±‡æ€»è¿‘æœŸåœ¨æœ¬é¡¹ç›®ä¸­é‡åˆ°çš„é”™è¯¯ã€åŸå› å®šä½ä¸å¯¹åº”ä¿®å¤æ–¹æ¡ˆã€‚
â€‹
 Â  Â ---
â€‹
 Â  Â <span class="hljs-comment">## 1) AttributeError: 'coroutine' object has no attribute 'aget_messages'</span>
â€‹
 Â  Â --- <span class="hljs-title class_">Chunk</span> <span class="hljs-number">5</span> (é•¿åº¦: <span class="hljs-number">762</span> å­—ç¬¦) ---
 Â  Â - **æŠ¥é”™æ ˆè¦ç‚¹**ï¼š
 Â  Â  Â - å‡ºç°åœ¨ <span class="hljs-string">`RunnableWithMessageHistory`</span> çš„å†å²è·å–é˜¶æ®µï¼ŒæœŸæœ›æ‹¿åˆ°å†å²å®ä¾‹ï¼Œå´å¾—åˆ°ä¸€ä¸ªåç¨‹å¯¹è±¡ã€‚
 Â  Â - **æ ¹å› **ï¼š
 Â  Â  Â - <span class="hljs-string">`get_session_history`</span> è¢«å®ç°ä¸º <span class="hljs-string">`async def`</span>ï¼Œè°ƒç”¨å¤„æœª <span class="hljs-string">`await`</span>ï¼›<span class="hljs-string">`RunnableWithMessageHistory`</span> ä¸ä¼šè‡ªåŠ¨ <span class="hljs-string">`await`</span> å†å²å·¥å‚ã€‚
 Â  Â - **ä¿®å¤**ï¼š
 Â  Â  Â - å°†å†å²å·¥å‚æ”¹ä¸ºåŒæ­¥å‡½æ•°ï¼Œç›´æ¥è¿”å› <span class="hljs-string">`SQLChatMessageHistory`</span> å®ä¾‹ï¼›è°ƒç”¨å¤„ä¹Ÿæ”¹ä¸ºåŒæ­¥å‡½æ•°ã€‚
 Â  Â - **å…³é”®ä»£ç **ï¼š
 Â   <span class="hljs-string">``</span><span class="hljs-string">`9:15:/Users/fenghuanwan...
â€‹
â€‹
 Â  Â Process finished with exit code 0
â€‹
</span></code></pre>
<ul>
<li>æ–‡æœ¬åµŒå…¥æ¨¡å‹</li>
</ul>
<p>æ£€ç´¢çš„å¦ä¸€ä¸ªå…³é”®éƒ¨åˆ†æ˜¯ä¸ºæ–‡æ¡£åˆ›å»ºåµŒå…¥. åµŒå…¥æ•æ‰æ–‡æœ¬çš„è¯­ä¹‰å«ä¹‰ï¼Œä½¿èƒ½å¤Ÿå¿«é€Ÿé«˜æ•ˆåœ°æŸ¥æ‰¾å…¶ä»–ç›¸ä¼¼çš„æ–‡æœ¬. LangChain ä¸ 25 å¤šä¸ªä¸åŒçš„åµŒå…¥æä¾›å•†å’Œæ–¹æ³•è¿›è¡Œé›†æˆï¼Œ ä»å¼€æºåˆ°ä¸“æœ‰ APIï¼Œ ä½¿èƒ½å¤Ÿé€‰æ‹©æœ€é€‚åˆæ‚¨éœ€æ±‚çš„ä¸€ç§. LangChain æä¾›äº†æ ‡å‡†æ¥å£ï¼Œä½¿æˆ‘ä»¬å¯ä»¥è½»æ¾åˆ‡æ¢æ¨¡å‹.</p>
<p>ä¹Ÿå°±æ˜¯ embeddingsï¼Œä»–å°±æ˜¯ç”¨æ¥æŠŠæˆ‘ä»¬åˆ†å‰²å¥½çš„æ–‡æœ¬è½¬åŒ–ä¸ºå‘é‡æ•°æ®çš„ï¼Œå¹¶å­˜å‚¨åˆ°åç»­çš„å‘é‡æ•°æ®åº“ä¸­å»ã€‚</p>
<p>è¿™äº›æ˜¯ langchain æ”¯æŒçš„æ–‡æœ¬åµŒå…¥æ¨¡å‹ï¼Œå¯ä»¥æŸ¥çœ‹<strong>langchain_community.embeddings</strong>ä¸­çš„æ‰€ç»™å‡ºæ¥çš„æ‰€æœ‰æ–‡æœ¬åµŒå…¥æ¨¡å‹ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"> Â  Â <span class="hljs-attr">__all__</span> = [
 Â  Â <span class="hljs-string">"AlephAlphaAsymmetricSemanticEmbedding"</span>,
 Â  Â <span class="hljs-string">"AlephAlphaSymmetricSemanticEmbedding"</span>,
 Â  Â <span class="hljs-string">"AnyscaleEmbeddings"</span>,
 Â  Â <span class="hljs-string">"AscendEmbeddings"</span>,
 Â  Â <span class="hljs-string">"AwaEmbeddings"</span>,
 Â  Â <span class="hljs-string">"AzureOpenAIEmbeddings"</span>,
 Â  Â <span class="hljs-string">"BaichuanTextEmbeddings"</span>,
 Â  Â <span class="hljs-string">"BedrockEmbeddings"</span>,
 Â  Â <span class="hljs-string">"BookendEmbeddings"</span>,
 Â  Â <span class="hljs-string">"ClarifaiEmbeddings"</span>,
 Â  Â <span class="hljs-string">"ClovaEmbeddings"</span>,
 Â  Â <span class="hljs-string">"ClovaXEmbeddings"</span>,
 Â  Â <span class="hljs-string">"CohereEmbeddings"</span>,
 Â  Â <span class="hljs-string">"DashScopeEmbeddings"</span>,
 Â  Â <span class="hljs-string">"DatabricksEmbeddings"</span>,
 Â  Â <span class="hljs-string">"DeepInfraEmbeddings"</span>,
 Â  Â <span class="hljs-string">"DeterministicFakeEmbedding"</span>,
 Â  Â <span class="hljs-string">"EdenAiEmbeddings"</span>,
 Â  Â <span class="hljs-string">"ElasticsearchEmbeddings"</span>,
 Â  Â <span class="hljs-string">"EmbaasEmbeddings"</span>,
 Â  Â <span class="hljs-string">"ErnieEmbeddings"</span>,
 Â  Â <span class="hljs-string">"FakeEmbeddings"</span>,
 Â  Â <span class="hljs-string">"FastEmbedEmbeddings"</span>,
 Â  Â <span class="hljs-string">"GPT4AllEmbeddings"</span>,
 Â  Â <span class="hljs-string">"GigaChatEmbeddings"</span>,
 Â  Â <span class="hljs-string">"GooglePalmEmbeddings"</span>,
 Â  Â <span class="hljs-string">"GradientEmbeddings"</span>,
 Â  Â <span class="hljs-string">"HuggingFaceBgeEmbeddings"</span>,
 Â  Â <span class="hljs-string">"HuggingFaceEmbeddings"</span>,
 Â  Â <span class="hljs-string">"HuggingFaceHubEmbeddings"</span>,
 Â  Â <span class="hljs-string">"HuggingFaceInferenceAPIEmbeddings"</span>,
 Â  Â <span class="hljs-string">"HuggingFaceInstructEmbeddings"</span>,
 Â  Â <span class="hljs-string">"InfinityEmbeddings"</span>,
 Â  Â <span class="hljs-string">"InfinityEmbeddingsLocal"</span>,
 Â  Â <span class="hljs-string">"IpexLLMBgeEmbeddings"</span>,
 Â  Â <span class="hljs-string">"JavelinAIGatewayEmbeddings"</span>,
 Â  Â <span class="hljs-string">"JinaEmbeddings"</span>,
 Â  Â <span class="hljs-string">"JohnSnowLabsEmbeddings"</span>,
 Â  Â <span class="hljs-string">"LLMRailsEmbeddings"</span>,
 Â  Â <span class="hljs-string">"LaserEmbeddings"</span>,
 Â  Â <span class="hljs-string">"LlamaCppEmbeddings"</span>,
 Â  Â <span class="hljs-string">"LlamafileEmbeddings"</span>,
 Â  Â <span class="hljs-string">"LocalAIEmbeddings"</span>,
 Â  Â <span class="hljs-string">"MiniMaxEmbeddings"</span>,
 Â  Â <span class="hljs-string">"MlflowAIGatewayEmbeddings"</span>,
 Â  Â <span class="hljs-string">"MlflowCohereEmbeddings"</span>,
 Â  Â <span class="hljs-string">"MlflowEmbeddings"</span>,
 Â  Â <span class="hljs-string">"Model2vecEmbeddings"</span>,
 Â  Â <span class="hljs-string">"ModelScopeEmbeddings"</span>,
 Â  Â <span class="hljs-string">"MosaicMLInstructorEmbeddings"</span>,
 Â  Â <span class="hljs-string">"NLPCloudEmbeddings"</span>,
 Â  Â <span class="hljs-string">"NeMoEmbeddings"</span>,
 Â  Â <span class="hljs-string">"OCIGenAIEmbeddings"</span>,
 Â  Â <span class="hljs-string">"OctoAIEmbeddings"</span>,
 Â  Â <span class="hljs-string">"OllamaEmbeddings"</span>,
 Â  Â <span class="hljs-string">"OpenAIEmbeddings"</span>,
 Â  Â <span class="hljs-string">"OpenVINOBgeEmbeddings"</span>,
 Â  Â <span class="hljs-string">"OpenVINOEmbeddings"</span>,
 Â  Â <span class="hljs-string">"OracleEmbeddings"</span>,
 Â  Â <span class="hljs-string">"OVHCloudEmbeddings"</span>,
 Â  Â <span class="hljs-string">"PremAIEmbeddings"</span>,
 Â  Â <span class="hljs-string">"QianfanEmbeddingsEndpoint"</span>,
 Â  Â <span class="hljs-string">"QuantizedBgeEmbeddings"</span>,
 Â  Â <span class="hljs-string">"QuantizedBiEncoderEmbeddings"</span>,
 Â  Â <span class="hljs-string">"SagemakerEndpointEmbeddings"</span>,
 Â  Â <span class="hljs-string">"SambaStudioEmbeddings"</span>,
 Â  Â <span class="hljs-string">"SelfHostedEmbeddings"</span>,
 Â  Â <span class="hljs-string">"SelfHostedHuggingFaceEmbeddings"</span>,
 Â  Â <span class="hljs-string">"SelfHostedHuggingFaceInstructEmbeddings"</span>,
 Â  Â <span class="hljs-string">"SentenceTransformerEmbeddings"</span>,
 Â  Â <span class="hljs-string">"SolarEmbeddings"</span>,
 Â  Â <span class="hljs-string">"SpacyEmbeddings"</span>,
 Â  Â <span class="hljs-string">"SparkLLMTextEmbeddings"</span>,
 Â  Â <span class="hljs-string">"TensorflowHubEmbeddings"</span>,
 Â  Â <span class="hljs-string">"TextEmbedEmbeddings"</span>,
 Â  Â <span class="hljs-string">"TitanTakeoffEmbed"</span>,
 Â  Â <span class="hljs-string">"VertexAIEmbeddings"</span>,
 Â  Â <span class="hljs-string">"VolcanoEmbeddings"</span>,
 Â  Â <span class="hljs-string">"VoyageEmbeddings"</span>,
 Â  Â <span class="hljs-string">"XinferenceEmbeddings"</span>,
 Â  Â <span class="hljs-string">"YandexGPTEmbeddings"</span>,
 Â  Â <span class="hljs-string">"ZhipuAIEmbeddings"</span>,
 Â  Â <span class="hljs-string">"HunyuanEmbeddings"</span>,
]
</code></pre>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬å°±ä½¿ç”¨é˜¿é‡Œçš„<code>DashScopeEmbeddings</code></p>
<pre><code class="hljs language-ini" lang="ini">  from langchain_community.embeddings import DashScopeEmbeddings
  <span class="hljs-attr">embeddings</span> = DashScopeEmbeddings(model=<span class="hljs-string">"text-embedding-v2"</span>,dashscope_api_key=<span class="hljs-string">"my-api-key"</span>)
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬å°±çš„åˆ°äº†ä¸€ä¸ªæ–‡æœ¬åµŒå…¥æ¨¡å‹ç”¨æ¥è¿›è¡Œå‘é‡çš„è½¬åŒ–ï¼Œåç»­å‘¢è¿˜éœ€è¦é…åˆå‘é‡æ•°æ®åº“è¿›è¡Œå‘é‡å­˜å‚¨ã€‚</p>
<ul>
<li>å‘é‡å­˜å‚¨</li>
</ul>
<p>éšç€åµŒå…¥çš„å…´èµ·ï¼Œå‡ºç°äº†å¯¹æ”¯æŒè¿™äº›åµŒå…¥çš„æ•°æ®åº“çš„éœ€æ±‚. LangChain ä¸ 50 å¤šä¸ªä¸åŒçš„å‘é‡å­˜å‚¨è¿›è¡Œé›†æˆï¼Œä»å¼€æºæœ¬åœ°å­˜å‚¨åˆ°äº‘æ‰˜ç®¡ä¸“æœ‰å­˜å‚¨ï¼Œ ä½¿èƒ½å¤Ÿé€‰æ‹©æœ€é€‚åˆæ‚¨éœ€æ±‚çš„ä¸€ç§. LangChain å…¬å¼€äº†æ ‡å‡†æ¥å£ï¼Œä½¿æˆ‘ä»¬å¯ä»¥è½»æ¾åˆ‡æ¢å‘é‡å­˜å‚¨.</p>
<p>è¿™æ˜¯ LangChain æ”¯æŒçš„ä¸€ä¸‹å‡ ç§å‘é‡æ•°æ®åº“ï¼Œå¯ä»¥é€šè¿‡æºç æŸ¥çœ‹ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€å±•ç¤º<code>langchain_community.vectorstores</code> æˆ‘ä»¬ä¸‹é¢è¦èŠçš„æ˜¯<code>Chroma</code>è¿™ä¸ªå‘é‡æ•°æ®åº“ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ pgsql æ¥è¿›è¡Œå‘é‡çš„å­˜å‚¨</p>
<pre><code class="hljs language-ini" lang="ini"> Â  Â from langchain_community.document_loaders import DirectoryLoader, TextLoader
 Â  Â from langchain.text_splitter import CharacterTextSplitter
 Â  Â from langchain_community.embeddings import DashScopeEmbeddings
 Â  Â from langchain_chroma import Chroma Â <span class="hljs-comment"># âœ… ä½¿ç”¨æ–°åŒ…</span>
 Â  Â import os
â€‹
 Â  Â <span class="hljs-comment"># === é…ç½® ===</span>
 Â  Â <span class="hljs-attr">EMBEDDINGS_DIR</span> = <span class="hljs-string">"/Users/fenghuanwang/PythonProject/langchain-test/embeddings"</span>
 Â  Â <span class="hljs-attr">COLLECTION_NAME</span> = <span class="hljs-string">"java_docs"</span>
â€‹
 Â  Â <span class="hljs-comment"># 1. åŠ è½½æ–‡æ¡£</span>
 Â  Â <span class="hljs-attr">md_docs</span> = DirectoryLoader(
 Â  Â  Â  Â "../doc",
 Â  Â  Â  Â <span class="hljs-attr">glob</span>=<span class="hljs-string">"**/*.md"</span>,
 Â  Â  Â  Â <span class="hljs-attr">loader_cls</span>=TextLoader,
 Â  Â  Â  Â <span class="hljs-attr">show_progress</span>=<span class="hljs-literal">True</span>,
 Â  Â  Â  Â <span class="hljs-attr">use_multithreading</span>=<span class="hljs-literal">True</span>,
 Â  Â  Â  Â <span class="hljs-attr">silent_errors</span>=<span class="hljs-literal">True</span>
 Â   ).load()
â€‹
 Â  Â print(f"âœ… å…±åŠ è½½ {len(md_docs)} ä¸ªæ–‡æ¡£")
 Â  Â if not md_docs:
 Â  Â  Â  Â print("âš ï¸ æ²¡æœ‰åŠ è½½åˆ°ä»»ä½•æ–‡æ¡£ï¼Œè¯·æ£€æŸ¥ ../doc è·¯å¾„æ˜¯å¦æ­£ç¡®")
 Â  Â  Â  Â exit()
â€‹
 Â  Â <span class="hljs-comment"># 2. åˆ†å‰²æ–‡æ¡£</span>
 Â  Â <span class="hljs-attr">text_splitter</span> = CharacterTextSplitter(
 Â  Â  Â  Â <span class="hljs-attr">separator</span>=<span class="hljs-string">"\n\n"</span>,
 Â  Â  Â  Â <span class="hljs-attr">chunk_size</span>=<span class="hljs-number">500</span>,
 Â  Â  Â  Â <span class="hljs-attr">chunk_overlap</span>=<span class="hljs-number">80</span>,
 Â  Â  Â  Â <span class="hljs-attr">length_function</span>=len
 Â   )
 Â  Â <span class="hljs-attr">split_docs</span> = text_splitter.split_documents(md_docs)
 Â  Â print(f"âœ‚ï¸ åˆ†å‰²åå¾—åˆ° {len(split_docs)} ä¸ªæ–‡æœ¬å—")
â€‹
 Â  Â <span class="hljs-comment"># 3. Embedding æ¨¡å‹</span>
 Â  Â <span class="hljs-attr">embeddings</span> = DashScopeEmbeddings(
 Â  Â  Â  Â <span class="hljs-attr">model</span>=<span class="hljs-string">"text-embedding-v2"</span>,
 Â  Â  Â  Â <span class="hljs-attr">dashscope_api_key</span>=<span class="hljs-string">"sk-3e4b3b0a5513440f80a23349057c653f"</span>
 Â   )
â€‹
 Â  Â <span class="hljs-comment"># 4. å­˜å…¥ Chromaï¼ˆè‡ªåŠ¨æŒä¹…åŒ–ï¼‰</span>
 Â  Â print("ğŸ§  æ­£åœ¨ç”Ÿæˆå‘é‡å¹¶å­˜å…¥ Chroma...")
 Â  Â <span class="hljs-attr">vectorstore</span> = Chroma.from_documents(
 Â  Â  Â  Â <span class="hljs-attr">documents</span>=split_docs,
 Â  Â  Â  Â <span class="hljs-attr">embedding</span>=embeddings,
 Â  Â  Â  Â <span class="hljs-attr">persist_directory</span>=EMBEDDINGS_DIR,
 Â  Â  Â  Â <span class="hljs-attr">collection_name</span>=COLLECTION_NAME,
 Â   )
 Â  Â <span class="hljs-comment"># âœ… ä¸éœ€è¦ vectorstore.persist()</span>
â€‹
 Â  Â print(f"âœ… å‘é‡æ•°æ®å·²ä¿å­˜åˆ°: {os.path.abspath(EMBEDDINGS_DIR)}")
â€‹
 Â  Â <span class="hljs-comment"># 5. éªŒè¯ï¼šé‡æ–°åŠ è½½å¹¶è®¡æ•°</span>
 Â  Â print("\nğŸ” æ­£åœ¨é‡æ–°åŠ è½½å‘é‡åº“ä»¥éªŒè¯...")
 Â  Â <span class="hljs-attr">reloaded_db</span> = Chroma(
 Â  Â  Â  Â <span class="hljs-attr">persist_directory</span>=EMBEDDINGS_DIR,
 Â  Â  Â  Â <span class="hljs-attr">embedding_function</span>=embeddings,
 Â  Â  Â  Â <span class="hljs-attr">collection_name</span>=COLLECTION_NAME,
  )
</code></pre>
<p>æ§åˆ¶å°è¾“å‡º <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a01ecc3488a414a88c476d5121ec34f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oSf5oCn55qE56iL5bqP5ZGY5bCP546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770770491&amp;x-signature=mUOYOu4jwYtfNyXzXDB8SZZpwGA%3D" alt="" loading="lazy"/> åŒæ—¶ï¼Œå¯¹åº”çš„æœ¬åœ°ç›®å½•ä¹Ÿå‡ºç°äº†å‘é‡æ•°æ®: <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce515528c0e44ff987918fb8f7b34582~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oSf5oCn55qE56iL5bqP5ZGY5bCP546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770770491&amp;x-signature=hybWexjqyW%2BNzzdSXB1C3ll4nBo%3D" alt="" loading="lazy"/> <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/217b639d05294495afc1e31f8b7df97c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oSf5oCn55qE56iL5bqP5ZGY5bCP546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770770491&amp;x-signature=DPXUdRXSI2vuREl6GUQ2h3yTq4A%3D" alt="" loading="lazy"/></p>
<p>è¡¥å……ï¼šç”Ÿæˆçš„å‘é‡æ•°æ®ä¸­æœ‰ä¸€ä¸ª sqllite æ–‡ä»¶ï¼Œæˆ‘ä»¬æ¥ä½¿ç”¨ navicat æ‰“å¼€æŸ¥çœ‹ï¼Œå‘ç°åŒæ ·æ˜¯æœ‰ç±»ä¼¼äº mysql çš„è¡¨ç»“æ„çš„: <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d04e5b1993094b089fe724ec909ce8ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oSf5oCn55qE56iL5bqP5ZGY5bCP546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770770491&amp;x-signature=H6RQ%2FIsW7bVgEiMryQ4t8TNBD04%3D" alt="" loading="lazy"/></p>
<ol start="0">
<li><code>chroma.sqlite3</code> æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ol>
<p>è¿™æ˜¯ <strong>Chroma å‘é‡æ•°æ®åº“ä½¿ç”¨çš„æœ¬åœ°å­˜å‚¨æ–‡ä»¶</strong>ï¼ŒåŸºäº <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.sqlite.org%2F" target="_blank" title="https://www.sqlite.org/" ref="nofollow noopener noreferrer">SQLite</a>ï¼ˆä¸€ç§è½»é‡çº§åµŒå…¥å¼å…³ç³»å‹æ•°æ®åº“ï¼‰ã€‚</p>
<p>å®ƒ<strong>ä¸ç›´æ¥å­˜å‚¨å‘é‡æœ¬èº«</strong>ï¼Œè€Œæ˜¯å­˜å‚¨ä»¥ä¸‹å†…å®¹ï¼š</p>

























<table><thead><tr><th>å­˜å‚¨å†…å®¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>âœ… <strong>æ–‡æ¡£åŸå§‹æ–‡æœ¬</strong>ï¼ˆ<code>documents</code>ï¼‰</td><td>ä½ ä¼ å…¥çš„ <code>Document.page_content</code></td></tr><tr><td>âœ… <strong>å…ƒæ•°æ®</strong>ï¼ˆ<code>metadatas</code>ï¼‰</td><td>å¦‚æ–‡ä»¶æ¥æºã€é¡µç ã€è‡ªå®šä¹‰æ ‡ç­¾ç­‰ï¼ˆ<code>Document.metadata</code>ï¼‰</td></tr><tr><td>âœ… <strong>å”¯ä¸€ ID</strong>ï¼ˆ<code>ids</code>ï¼‰</td><td>æ¯ä¸ª chunk çš„å”¯ä¸€æ ‡è¯†ç¬¦</td></tr><tr><td>âŒ <strong>å‘é‡ï¼ˆembeddingsï¼‰</strong></td><td><strong>ä¸åœ¨æ­¤æ–‡ä»¶ä¸­ï¼</strong> å‘é‡é»˜è®¤å­˜å‚¨åœ¨ <strong><code>index/</code> ç›®å½•ä¸‹çš„ HNSW ç´¢å¼•æ–‡ä»¶ä¸­</strong>ï¼ˆç”± <code>hnswlib</code> æˆ– <code>hnsw</code> å®ç°ï¼‰</td></tr></tbody></table>
<blockquote>
<p>ğŸ“ å…¸å‹çš„ Chroma æŒä¹…åŒ–ç›®å½•ç»“æ„ï¼š</p>
<pre><code class="hljs language-python" lang="python">./embeddings/
â”œâ”€â”€ chroma.sqlite3        â† æ–‡æ¡£å†…å®¹ + å…ƒæ•°æ® + ID
â””â”€â”€ index/                â† å‘é‡ç´¢å¼•æ–‡ä»¶ï¼ˆäºŒè¿›åˆ¶ï¼Œä¸å¯è¯»ï¼‰
 â”œâ”€â”€ header.<span class="hljs-built_in">bin</span>
 â”œâ”€â”€ data.<span class="hljs-built_in">bin</span>
 â””â”€â”€ ...
</code></pre>
</blockquote>
<hr/>
<p>ä»€ä¹ˆæ˜¯â€œå‘é‡æ•°æ®â€ï¼Ÿ</p>
<p>â€œå‘é‡æ•°æ®â€æŒ‡çš„æ˜¯ <strong>å°†æ–‡æœ¬é€šè¿‡ Embedding æ¨¡å‹è½¬æ¢æˆçš„é«˜ç»´æ•°å€¼æ•°ç»„</strong>ï¼ˆæ¯”å¦‚ 1536 ç»´çš„æµ®ç‚¹æ•°åˆ—è¡¨ï¼‰ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">  æ–‡æœ¬: <span class="hljs-string">"Java æ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€"</span>
  â†“ ç»è¿‡ DashScope text-embedding-v2
  å‘é‡: [<span class="hljs-number">0.23</span>, <span class="hljs-number">-0.45</span>, <span class="hljs-number">0.89</span>, ..., <span class="hljs-number">0.01</span>]  # é•¿åº¦ <span class="hljs-number">1536</span>
</code></pre>
<p>Chroma å‘é‡æ•°æ®åº“å­˜å‚¨æœºåˆ¶è¯¦è§£</p>
<p>Chroma å¦‚ä½•å­˜å‚¨å‘é‡æ•°æ®ï¼Ÿ</p>
<p>Chroma é‡‡ç”¨ <strong>åˆ†ç¦»å­˜å‚¨ç­–ç•¥</strong>ï¼š</p>























<table><thead><tr><th>æ•°æ®ç±»å‹</th><th>å­˜å‚¨ä½ç½®</th><th>æ ¼å¼</th><th>æ˜¯å¦å¯è¯»</th></tr></thead><tbody><tr><td>åŸå§‹æ–‡æœ¬ &amp; å…ƒæ•°æ®</td><td><code>chroma.sqlite3</code></td><td>SQLite è¡¨</td><td>âœ… å¯ç”¨ DB æµè§ˆå™¨æ‰“å¼€</td></tr><tr><td>å‘é‡ï¼ˆembeddingsï¼‰</td><td><code>./index/</code> ç›®å½•</td><td>äºŒè¿›åˆ¶ HNSW ç´¢å¼•</td><td>âŒ ä¸å¯ç›´æ¥é˜…è¯»</td></tr></tbody></table>
<p>ğŸ” ä½ å¯ä»¥ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fsqlitebrowser.org%2F" target="_blank" title="https://sqlitebrowser.org/" ref="nofollow noopener noreferrer">DB Browser for SQLite</a> æ‰“å¼€ <code>chroma.sqlite3</code>ï¼ŒæŸ¥çœ‹ <code>embeddings</code> è¡¨ï¼ˆå®é™…å­˜çš„æ˜¯ ID å’Œæ–‡æ¡£ï¼Œ<strong>ä¸æ˜¯å‘é‡å€¼</strong>ï¼‰ï¼Œå‘é‡åªå­˜åœ¨äºç´¢å¼•ä¸­ã€‚</p>
<hr/>
<p>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</p>
<ul>
<li><strong>SQLite</strong>ï¼šè½»é‡ã€æ— éœ€æœåŠ¡å™¨ã€é€‚åˆæœ¬åœ°å¼€å‘ï¼Œå®Œç¾å­˜æ–‡æœ¬å’Œå…ƒæ•°æ®ã€‚</li>
<li><strong>HNSW ç´¢å¼•</strong>ï¼ˆåœ¨ <code>index/</code>ï¼‰ï¼šä¸“ä¸º<strong>é«˜æ•ˆè¿‘ä¼¼æœ€è¿‘é‚»æœç´¢ï¼ˆANNï¼‰</strong> è®¾è®¡ï¼Œèƒ½å¿«é€Ÿåœ¨ç™¾ä¸‡çº§å‘é‡ä¸­æ‰¾ç›¸ä¼¼é¡¹ã€‚</li>
</ul>
<p>âš¡ <strong>æ£€ç´¢æ—¶æµç¨‹</strong>ï¼š</p>
<ol start="0">
<li>ç”¨æˆ·è¾“å…¥é—®é¢˜ â†’ è½¬ä¸ºå‘é‡</li>
<li>åœ¨ <code>index/</code> çš„ HNSW ç´¢å¼•ä¸­æ‰¾æœ€ç›¸ä¼¼çš„ <strong>ID åˆ—è¡¨</strong></li>
<li>ç”¨è¿™äº› ID å» <code>chroma.sqlite3</code> æŸ¥å‡ºå¯¹åº”çš„ <strong>åŸå§‹æ–‡æœ¬å’Œå…ƒæ•°æ®</strong></li>
<li>è¿”å›ç»™ LLM ä½œä¸ºä¸Šä¸‹æ–‡</li>
</ol>
<hr/>
<p>éªŒè¯ï¼š</p>
<p>æŸ¥çœ‹ SQLite å†…å®¹</p>
<pre><code class="hljs language-bash" lang="bash">  <span class="hljs-comment"># å®‰è£… sqlite3 å‘½ä»¤è¡Œå·¥å…·ï¼ˆMac/Linux é€šå¸¸è‡ªå¸¦ï¼‰</span>
  sqlite3 ./embeddings/chroma.sqlite3
  .tables
  SELECT <span class="hljs-built_in">id</span>, document FROM embeddings LIMIT 1;
</code></pre>
<p>ç°åœ¨å°±å®Œæˆäº†å‘é‡æ•°æ®çš„å­˜å‚¨ï¼Œå…‰å­˜è¿›å»è¿˜ä¸å¤Ÿï¼Œå½“ llm éœ€è¦å›ç­”ç”¨æˆ·é—®é¢˜çš„æ—¶å€™ï¼Œè‚¯å®šä¸èƒ½æŠŠå…¨éƒ¨çš„å‘é‡æ•°æ®åŠ è½½ç„¶åç»™ llm ä½œä¸ºä¸Šä¸‹æ–‡å§ï¼Œé‚£æ ·å¤ªæµªè´¹ token äº†ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªæ£€ç´¢å™¨ï¼Œåªæå–å’Œç”¨æˆ·é—®é¢˜ç›¸å…³çš„ä¿¡æ¯ï¼Œç„¶åå°†è¿™ä¸€éƒ¨åˆ†çš„ä¿¡æ¯ä½œä¸ºä¸Šä¸‹æ–‡äº¤ç»™ llmã€‚</p>
<ul>
<li>
<p>æ£€ç´¢å™¨</p>
<p>ä¸€æ—¦æ•°æ®åœ¨æ•°æ®åº“ä¸­ï¼Œä½†ä»ç„¶éœ€è¦æ£€ç´¢å®ƒã€‚å‘é‡åº“ï¼ˆå¦‚ Chromaï¼‰åªæ˜¯å­˜å‚¨äº†æ–‡æ¡£çš„å‘é‡ï¼Œä½†è¦å›ç­”ç”¨æˆ·é—®é¢˜æˆ‘ä»¬éœ€è¦ä¸€ä¸ª æ£€ç´¢å™¨ï¼ˆRetrieverï¼‰ ç”¨æ¥</p>
<ul>
<li>æŠŠç”¨æˆ·é—®é¢˜ä¹Ÿè½¬æˆå‘é‡</li>
<li>åœ¨åº“ä¸­æ‰¾æœ€ç›¸ä¼¼çš„ top-k æ–‡æ¡£</li>
<li>æŠŠè¿™äº›æ–‡æ¡£ä½œä¸ºä¸Šä¸‹æ–‡å–‚ç»™ LLM æœ€åŸºç¡€çš„å°±æ˜¯ å‘é‡ç›¸ä¼¼åº¦æ£€ç´¢ï¼ˆå¦‚ä½™å¼¦ç›¸ä¼¼åº¦ï¼‰ï¼ŒLangChain ç”¨ vectorstore.as_retriever() ä¸€è¡Œå°±èƒ½å®ç°ã€‚</li>
</ul>
</li>
</ul>
<p>æˆ‘ä»¬åªéœ€è¦åœ¨ä¸Šé¢çš„å‘é‡å­˜å‚¨çš„ä»£ç ä¸­åŠ ä¸Š<strong>vectorstore.as_retriever()</strong></p>
<pre><code class="hljs language-ini" lang="ini">  <span class="hljs-attr">retriever</span> = vectorstore.as_retriever()
</code></pre>
<p>è¿˜å¯ä»¥æŒ‡å®šæ¯æ¬¡æ£€ç´¢è¿”å›æœ€ç›¸ä¼¼çš„å‰ k ä¸ªæ–‡æ¡£å—ï¼ˆchunksï¼‰ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">  <span class="hljs-attr">retriever</span> = vectorstore.as_retriever(search_kwargs={<span class="hljs-string">"k"</span>: <span class="hljs-number">5</span>})
</code></pre>
<p>åœ¨ RAGï¼ˆRetrieval-Augmented Generationï¼‰æµç¨‹ä¸­ï¼š æ£€ç´¢å™¨ï¼ˆRetrieverï¼‰ è´Ÿè´£â€œæ‰¾ç›¸å…³çŸ¥è¯†â€ LLM è´Ÿè´£â€œæ ¹æ®çŸ¥è¯†å›ç­”é—®é¢˜â€ LangChain é€šè¿‡ .as_retriever() ç»Ÿä¸€äº†å„ç§å‘é‡åº“çš„æ£€ç´¢æ¥å£ï¼Œè®©ä½ å¯ä»¥è½»æ¾åˆ‡æ¢ Chromaã€FAISSã€Pinecone ç­‰ï¼Œè€Œä¸ç”¨æ”¹åç»­ä»£ç ã€‚</p>
<p>æœ¬æœŸæ•™ç¨‹å°±å…ˆåˆ°è¿™é‡Œï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChainåµŒå…¥ï¼šä»åŸç†åˆ°å®è·µ]]></title>    <link>https://juejin.cn/post/7602463463106379822</link>    <guid>https://juejin.cn/post/7602463463106379822</guid>    <pubDate>2026-02-04T01:31:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602463463106379822" data-draft-id="7602512226998812722" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangChainåµŒå…¥ï¼šä»åŸç†åˆ°å®è·µ"/> <meta itemprop="keywords" content="LangChain"/> <meta itemprop="datePublished" content="2026-02-04T01:31:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰å¸½lufei"/> <meta itemprop="url" content="https://juejin.cn/user/501033035632093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangChainåµŒå…¥ï¼šä»åŸç†åˆ°å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/501033035632093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰å¸½lufei
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T01:31:18.000Z" title="Wed Feb 04 2026 01:31:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å¹´åº•äº†ï¼Œæœ‰å‡ ä¸ªé¡¹ç›®çš„å®¢æˆ·è¿˜åœ¨å‚¬ç€ä¸€äº›æ–°æçš„éœ€æ±‚åœ¨æ˜¥èŠ‚å‰ä¸Šçº¿</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bfca817a19fd4dbe946877c845ca013a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770773478&amp;x-signature=8fSgNdcgvd22MUIlAyrXb2L3AUY%3D" alt="" loading="lazy"/></p>
<p>æœ‰å‡ å¤©æ²¡å­¦ä¹ LangChainæ¡†æ¶ç›¸å…³çŸ¥è¯†äº†ï¼ŒæŠ½ç©ºç»§ç»­å­¦ä¹ ç ”ç©¶</p>
<h2 data-id="heading-1">åµŒå…¥</h2>
<p>åµŒå…¥ï¼ˆEmbeddingï¼‰å¯ä»¥å°†æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡è¡¨ç¤ºï¼Œä»è€Œå®ç°æ–‡æœ¬çš„è¯­ä¹‰åˆ†æå’Œç›¸ä¼¼åº¦è®¡ç®—</p>
<p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ç»™æ¯ä¸ªæ–‡æœ¬åˆ†é…ä¸€ä¸ª"æ•°å­—èº«ä»½è¯"ï¼Œç›¸ä¼¼çš„æ–‡æœ¬ä¼šæœ‰ç›¸ä¼¼çš„"èº«ä»½è¯å·ç "</p>
<h2 data-id="heading-2">åº”ç”¨åœºæ™¯</h2>
<p>æ—¥å¸¸æˆ‘ä»¬æ¥è§¦åˆ°çš„å®é™…çš„åœºæ™¯åº”ç”¨ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>æ™ºèƒ½æœç´¢ï¼šæ¯”å¦‚åœ¨æ–‡æ¡£åº“ä¸­æŸ¥æ‰¾ä¸æŸ¥è¯¢è¯­ä¹‰ç›¸å…³çš„å†…å®¹ï¼Œè€Œä¸ä»…ä»…æ˜¯å…³é”®è¯åŒ¹é…</li>
<li>é—®ç­”ç³»ç»Ÿï¼šæ‰¾åˆ°ä¸ç”¨æˆ·é—®é¢˜æœ€ç›¸å…³çš„æ–‡æ¡£ç‰‡æ®µä½œä¸ºç­”æ¡ˆä¾æ®</li>
<li>æ¨èç³»ç»Ÿï¼šæ ¹æ®ç”¨æˆ·å…´è¶£å‘é‡æ¨èç›¸å…³å†…å®¹</li>
</ul>
<h2 data-id="heading-3">ä»£ç å®ç°</h2>
<p>ç¤ºä¾‹æä¾›äº†ä¸¤ä¸ªä¾‹å­ï¼Œä¸€ä¸ªæ˜¯æ–‡æœ¬å¯¹æ¯”ï¼Œä¸€ä¸ªæ˜¯æ–‡æœ¬æœç´¢</p>
<pre><code class="hljs language-python" lang="python">
<span class="hljs-keyword">from</span> langchain_huggingface <span class="hljs-keyword">import</span> HuggingFaceEmbeddings
<span class="hljs-keyword">from</span> sklearn.metrics.pairwise <span class="hljs-keyword">import</span> cosine_similarity
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> os

<span class="hljs-comment"># ç¤ºä¾‹ 1: ä½¿ç”¨ HuggingFace åµŒå…¥æ¨¡å‹ï¼ˆæ— éœ€ API å¯†é’¥ï¼‰</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">use_huggingface_embeddings</span>():
    <span class="hljs-string">"""ä½¿ç”¨ HuggingFace æä¾›çš„é¢„è®­ç»ƒæ¨¡å‹ç”ŸæˆåµŒå…¥"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== ä½¿ç”¨ HuggingFace åµŒå…¥æ¨¡å‹ ==="</span>)
    
    <span class="hljs-comment"># åˆ›å»ºåµŒå…¥æ¨¡å‹å®ä¾‹</span>
    embeddings = HuggingFaceEmbeddings(model_name=<span class="hljs-string">"all-MiniLM-L6-v2"</span>)
    
    <span class="hljs-comment"># ç¤ºä¾‹æ–‡æœ¬</span>
    texts = [
        <span class="hljs-string">"çŒ«æ˜¯ä¸€ç§å¸¸è§çš„å®¶å…»å® ç‰©"</span>,
        <span class="hljs-string">"ç‹—æ˜¯äººç±»æœ€å¥½çš„æœ‹å‹"</span>,
        <span class="hljs-string">"å¤§è±¡æ˜¯é™†åœ°ä¸Šæœ€å¤§çš„åŠ¨ç‰©"</span>,
        <span class="hljs-string">"å®¶å…»å® ç‰©ä¸­çŒ«ç‰¹åˆ«æ™®é"</span>
    ]
    
    <span class="hljs-comment"># ç”ŸæˆåµŒå…¥å‘é‡</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”Ÿæˆæ–‡æœ¬åµŒå…¥å‘é‡..."</span>)
    vectors = embeddings.embed_documents(texts)
    
    <span class="hljs-comment"># æŸ¥çœ‹åµŒå…¥å‘é‡çš„ç»´åº¦</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åµŒå…¥å‘é‡ç»´åº¦: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(vectors[<span class="hljs-number">0</span>])}</span>"</span>)
    
    <span class="hljs-comment"># è®¡ç®—æ–‡æœ¬ä¹‹é—´çš„ç›¸ä¼¼åº¦</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nè®¡ç®—æ–‡æœ¬ä¹‹é—´çš„ç›¸ä¼¼åº¦:"</span>)
    similarity_matrix = cosine_similarity(vectors)
    
    <span class="hljs-keyword">for</span> i, text1 <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(texts):
        <span class="hljs-keyword">for</span> j, text2 <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(texts):
            <span class="hljs-keyword">if</span> i &lt; j:  <span class="hljs-comment"># é¿å…é‡å¤è®¡ç®—</span>
                similarity = similarity_matrix[i][j]
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"'<span class="hljs-subst">{text1}</span>' ä¸ '<span class="hljs-subst">{text2}</span>' çš„ç›¸ä¼¼åº¦: <span class="hljs-subst">{similarity:<span class="hljs-number">.4</span>f}</span>"</span>)

<span class="hljs-comment"># ç¤ºä¾‹ 2: æ–‡æœ¬æœç´¢åŠŸèƒ½</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">text_search_demo</span>():
    <span class="hljs-string">"""ä½¿ç”¨åµŒå…¥å®ç°ç®€å•çš„æ–‡æœ¬æœç´¢åŠŸèƒ½"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== æ–‡æœ¬æœç´¢åŠŸèƒ½æ¼”ç¤º ==="</span>)
    
    <span class="hljs-comment"># åˆ›å»ºåµŒå…¥æ¨¡å‹å®ä¾‹</span>
    embeddings = HuggingFaceEmbeddings(model_name=<span class="hljs-string">"all-MiniLM-L6-v2"</span>)
    
    <span class="hljs-comment"># æ–‡æ¡£é›†åˆ</span>
    documents = [
        <span class="hljs-string">"Python æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„é«˜çº§ç¼–ç¨‹è¯­è¨€"</span>,
        <span class="hljs-string">"LangChain æ˜¯ä¸€ä¸ªç”¨äºæ„å»º LLM åº”ç”¨çš„æ¡†æ¶"</span>,
        <span class="hljs-string">"æœºå™¨å­¦ä¹ æ˜¯äººå·¥æ™ºèƒ½çš„ä¸€ä¸ªåˆ†æ”¯"</span>,
        <span class="hljs-string">"æ·±åº¦å­¦ä¹ æ˜¯æœºå™¨å­¦ä¹ çš„ä¸€ä¸ªå­é¢†åŸŸ"</span>,
        <span class="hljs-string">"æ•°æ®ç§‘å­¦æ¶‰åŠæ•°æ®çš„åˆ†æå’Œå¯è§†åŒ–"</span>
    ]
    
    <span class="hljs-comment"># ç”Ÿæˆæ–‡æ¡£åµŒå…¥</span>
    doc_vectors = embeddings.embed_documents(documents)
    
    <span class="hljs-comment"># ç”¨æˆ·æŸ¥è¯¢</span>
    query = <span class="hljs-string">"ä»€ä¹ˆæ˜¯ LangChainï¼Ÿ"</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næŸ¥è¯¢: <span class="hljs-subst">{query}</span>"</span>)
    
    <span class="hljs-comment"># ç”ŸæˆæŸ¥è¯¢åµŒå…¥</span>
    query_vector = embeddings.embed_query(query)
    
    <span class="hljs-comment"># è®¡ç®—æŸ¥è¯¢ä¸æ¯ä¸ªæ–‡æ¡£çš„ç›¸ä¼¼åº¦</span>
    similarities = cosine_similarity([query_vector], doc_vectors)[<span class="hljs-number">0</span>]
    
    <span class="hljs-comment"># æŒ‰ç›¸ä¼¼åº¦æ’åº</span>
    sorted_indices = np.argsort(similarities)[::-<span class="hljs-number">1</span>]
    
    <span class="hljs-comment"># æ˜¾ç¤ºæœç´¢ç»“æœ</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næœç´¢ç»“æœï¼ˆæŒ‰ç›¸ä¼¼åº¦æ’åºï¼‰:"</span>)
    <span class="hljs-keyword">for</span> i, idx <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(sorted_indices):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span>. ç›¸ä¼¼åº¦: <span class="hljs-subst">{similarities[idx]:<span class="hljs-number">.4</span>f}</span> - <span class="hljs-subst">{documents[idx]}</span>"</span>)



<span class="hljs-comment"># è¿è¡Œç¤ºä¾‹</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"LangChain åµŒå…¥ç¤ºä¾‹"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    
    <span class="hljs-comment"># è¿è¡Œ HuggingFace åµŒå…¥ç¤ºä¾‹</span>
    use_huggingface_embeddings()
    
    <span class="hljs-comment"># è¿è¡Œæ–‡æœ¬æœç´¢ç¤ºä¾‹</span>
    text_search_demo()

    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nç¤ºä¾‹è¿è¡Œå®Œæˆï¼"</span>)

</code></pre>
<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac7b8fbb30f64b6dbbf92ab7b2f3dd2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770773478&amp;x-signature=jXm1QSN1g54S1Fb8Wlt812nZpEM%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">HuggingFaceEmbeddings ç±»</h3>
<p>æ¥æºï¼šlangchain-huggingface åŒ…ä¸­çš„ç±»</p>
<p>åŠŸèƒ½ï¼šå°è£…äº† HuggingFace çš„é¢„è®­ç»ƒåµŒå…¥æ¨¡å‹ï¼Œæä¾›ç»Ÿä¸€çš„æ¥å£ç”¨äºæ–‡æœ¬å‘é‡åŒ–</p>
<p>ä¸»è¦æ–¹æ³•ï¼š</p>
<ul>
<li>embed_documents(texts)ï¼šæ‰¹é‡ä¸ºå¤šä¸ªæ–‡æœ¬ç”ŸæˆåµŒå…¥å‘é‡</li>
<li>embed_query(text)ï¼šä¸ºå•ä¸ªæŸ¥è¯¢æ–‡æœ¬ç”ŸæˆåµŒå…¥å‘é‡</li>
</ul>
<h3 data-id="heading-5">all-MiniLM-L6-v2 æ¨¡å‹</h3>
<p>è½»é‡çº§ï¼š</p>
<ul>
<li>åŸºäº MiniLM æ¶æ„ï¼ˆBERT çš„è½»é‡çº§ç‰ˆæœ¬ï¼‰</li>
<li>æ¨¡å‹å¤§å°çº¦ 80MBï¼Œé€‚åˆåœ¨èµ„æºå—é™ç¯å¢ƒä¸­ä½¿ç”¨</li>
</ul>
<p>å¤šè¯­è¨€æ”¯æŒï¼š</p>
<ul>
<li>æ”¯æŒå¤šç§è¯­è¨€çš„æ–‡æœ¬åµŒå…¥</li>
</ul>
<p>æ€§èƒ½å¹³è¡¡ï¼š</p>
<ul>
<li>åœ¨é€Ÿåº¦å’ŒåµŒå…¥è´¨é‡ä¹‹é—´å–å¾—äº†è‰¯å¥½å¹³è¡¡</li>
<li>è™½ç„¶æ¯”å¤§å‹æ¨¡å‹ï¼ˆå¦‚ BERT-baseï¼‰å°ï¼Œä½†åœ¨å¤§å¤šæ•°ä»»åŠ¡ä¸Šè¡¨ç°æ¥è¿‘</li>
</ul>
<p>é€‚ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>æ–‡æœ¬ç›¸ä¼¼åº¦è®¡ç®—</li>
<li>è¯­ä¹‰æœç´¢</li>
<li>æ–‡æœ¬åˆ†ç±»</li>
<li>èšç±»åˆ†æ</li>
</ul>
<h2 data-id="heading-6">ç›¸å…³ä¾èµ–å®‰è£…</h2>
<pre><code class="hljs language-bash" lang="bash">pip install langchain-huggingface sentence-transformers scikit-learn numpy
</code></pre>
<h2 data-id="heading-7">å°ç»“</h2>
<p>ç°åœ¨å¯¹äºåµŒå…¥æ¦‚å¿µæœ‰äº†å¤§æ¦‚çš„äº†è§£ï¼Œé‡Œé¢çš„ä¸€äº›ä»£ç æŠ€æœ¯ç»†èŠ‚æ˜¯è¶Šçœ‹è¶Šæ™•ï¼Œå¤šçœ‹å¤šç†è§£å§ï¼Œä»£ç å¤šè¿è¡Œçœ‹çœ‹ï¼Œç°åœ¨åªæ˜¯ç®€å•çš„è·‘é€šäº†ä¾‹å­ï¼Œé‡Œé¢å¤§æ¦‚ç”¨äº†ä»€ä¹ˆåº“ï¼Œå¤§æ¦‚ä»£ç æ˜¯æ€ä¹ˆå›äº‹ï¼Œåé¢å®æˆ˜é¡¹ç›®é‡åˆ°é—®é¢˜å†é’ˆå¯¹æ€§ç ”ç©¶å§</p>
<p>å½“ç„¶ï¼Œä¹Ÿå¯èƒ½åé¢å®æˆ˜é¡¹ç›®ä¸€è¡Œä»£ç ä¸å†™ï¼Œçº¯é¢å‘AIå˜´éå¼å¼€å‘</p>
<p>å·¥ä½œæ¯”è¾ƒå¿™ï¼Œæ–­æ–­ç»­ç»­å­¦ä¹ ç ”ç©¶ï¼Œæ”¶è·ä¸å¤§å¤šå°‘æœ‰ç‚¹ï¼Œæ…¢æ…¢æ¥ï¼ŒåŠ æ²¹ï¼</p>
<blockquote>
<p>æ¬¢è¿ç•™è¨€äº¤æµï¼Œå¦‚æœè§‰å¾—æœ‰å¸®åŠ©ï¼Œå¯ä»¥<code>ç‚¹ä¸ªèµ</code>æ”¯æŒä¸€ä¸‹</p>
<p>å…¬ä¼—å·ï¼šè‰å¸½lufei</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­¦ä¹ flutter 4.ä½¿ç”¨åŸç”Ÿèƒ½åŠ›]]></title>    <link>https://juejin.cn/post/7602454700504662057</link>    <guid>https://juejin.cn/post/7602454700504662057</guid>    <pubDate>2026-02-04T02:44:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602454700504662057" data-draft-id="7602488966610223142" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­¦ä¹ flutter 4.ä½¿ç”¨åŸç”Ÿèƒ½åŠ›"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2026-02-04T02:44:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="FanetheDivine"/> <meta itemprop="url" content="https://juejin.cn/user/4246761716322491"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­¦ä¹ flutter 4.ä½¿ç”¨åŸç”Ÿèƒ½åŠ›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4246761716322491/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    FanetheDivine
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T02:44:55.000Z" title="Wed Feb 04 2026 02:44:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è°ƒè¯•åº”ç”¨</h2>
<p>ä»¥å®‰å“ä¸ºä¾‹</p>
<p>è°ƒç”¨<code>flutter doctor</code> ç¡®ä¿Android toolchainå’ŒAndroid Studioéƒ½æ­£å¸¸</p>
<p>æ‰“å¼€Android Studio ç‚¹<code>More Actions</code>-&gt;<code>Virtual Device Manager</code> é€‰æœºå‹ã€ä¸‹è½½sdk</p>
<p>åœ¨vscodeæŒ‰ä¸‹ctrl+shift+P æ‰§è¡Œ<code>Flutter:Select Devices</code>å‘½ä»¤ é€‰ä¸­æ¨¡æ‹Ÿå™¨</p>
<p>è¿è¡Œflutterç¨‹åº</p>
<p>é¦–æ¬¡æ‰§è¡Œå¯èƒ½è¾ƒæ…¢ flutterä¼šä¸‹è½½ä¸€äº›ä¾èµ–</p>
<p>å¦å¤– è¿™ä¸ªè¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°æ–‡ä»¶å ç”¨ã€ä¾èµ–ç¼ºå¤±çš„é—®é¢˜ å±äºç¯å¢ƒé—®é¢˜ éœ€è¦é…åˆaiæ…¢æ…¢è°ƒ</p>
<p>Android Studioåœ¨è¿™é‡Œç®¡ç†sdk<br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37402c138e80438e90c5ac2cdefd5499~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRmFuZXRoZURpdmluZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770777894&amp;x-signature=kzay7m7BbhFzFKupECXBRtzYJB0%3D" alt="å±å¹•æˆªå›¾ 2026-02-04 090438.png" loading="lazy"/></p>
<p>æ³¨æ„æŠŠå³ä¸‹è§’show package details å‹¾é€‰ä¸Š ä¸ç„¶æ²¡æ³•ä¸‹è½½æŒ‡å®šç‰ˆæœ¬</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79894b30ce4747199e22e33dc520860a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRmFuZXRoZURpdmluZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770777894&amp;x-signature=CoSzIGaBURnOx0oT5SOslv8yffQ%3D" alt="å±å¹•æˆªå›¾ 2026-02-04 090450.png" loading="lazy"/></p>
<h3 data-id="heading-1">çœŸæœºè°ƒè¯•</h3>
<p>è¿›å…¥æ‰‹æœºçš„å¼€å‘è€…æ¨¡å¼ ä¸åŒå‚å•†å¯èƒ½æœ‰æ‰€ä¸åŒ</p>
<p>è¿æ¥ç”µè„‘ é€‰ä¸­æ‰‹æœºè®¾å¤‡ è¿è¡Œç¨‹åºå³å¯</p>
<h2 data-id="heading-2">flutterå¦‚ä½•ä½¿ç”¨åŸç”Ÿèƒ½åŠ›</h2>
<p>flutterä¸åŸç”Ÿç¨‹åºæ˜¯ä¸¤ä¸ªçº¿ç¨‹ ä»–ä»¬ä¹‹é—´é€šè¿‡<strong>æ¶ˆæ¯ç®¡é“</strong>è¿æ¥<br/>
è¿™ä¸ªè¿‡ç¨‹æ˜¯å¼‚æ­¥<strong>ä¸é˜»å¡</strong>çš„</p>
<p>flutterç¤¾åŒºå°è£…äº†å¤§é‡çš„åŸç”Ÿèƒ½åŠ›æ’ä»¶ åªéœ€è¦å¼•å…¥ç›¸åº”çš„åŒ…å°±å¯ä»¥ä½¿ç”¨</p>
<h2 data-id="heading-3">ä»£ç ç¤ºä¾‹</h2>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'dart:io'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:device_info_plus/device_info_plus.dart'</span>;

<span class="hljs-keyword">final</span> deviceInfo = DeviceInfoPlugin();

Future&lt;<span class="hljs-built_in">String</span>&gt; getDeviceInfo() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">if</span> (Platform.isAndroid) {
  <span class="hljs-comment">// åƒæ­£å¸¸çš„å¼‚æ­¥å‡½æ•°ä¸€æ · ä½¿ç”¨åŸç”Ÿèƒ½åŠ›</span>
  <span class="hljs-comment">// å†…éƒ¨ä½¿ç”¨æ¶ˆæ¯ç®¡é“ å‘èµ·å’Œç›‘å¬äº‹ä»¶</span>
    <span class="hljs-keyword">final</span> androidInfo = <span class="hljs-keyword">await</span> deviceInfo.androidInfo;
    <span class="hljs-keyword">return</span> <span class="hljs-string">'''
å“ç‰Œ: <span class="hljs-subst">${androidInfo.brand}</span>
å‹å·: <span class="hljs-subst">${androidInfo.model}</span>
è®¾å¤‡: <span class="hljs-subst">${androidInfo.device}</span>
Android ç‰ˆæœ¬: <span class="hljs-subst">${androidInfo.version.release}</span>
SDK: <span class="hljs-subst">${androidInfo.version.sdkInt}</span>
    '''</span>;
  }

  <span class="hljs-keyword">return</span> <span class="hljs-string">'Not Android'</span>;
}

<span class="hljs-keyword">void</span> main() {
  runApp(<span class="hljs-keyword">const</span> MyApp());
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">const</span> MyApp({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-comment">// This widget is the root of your application.</span>
  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> MaterialApp(
        title: <span class="hljs-string">'Flutter Demo'</span>,
        theme: ThemeData(
          colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),
          useMaterial3: <span class="hljs-keyword">true</span>,
        ),
        home: <span class="hljs-keyword">const</span> Test());
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  <span class="hljs-keyword">const</span> Test({<span class="hljs-keyword">super</span>.key});
  <span class="hljs-meta">@override</span>
  State&lt;Test&gt; createState() =&gt; _TestState();
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_TestState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">Test</span>&gt; </span>{
  <span class="hljs-built_in">String</span> info = <span class="hljs-string">'no info'</span>;
  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> initState() {
    <span class="hljs-keyword">super</span>.initState();
    getDeviceInfo().then((value) {
      setState(() {
        info = value;
      });
    });
  }

  <span class="hljs-meta">@override</span>
  Widget build(context) {
    <span class="hljs-keyword">return</span> Text(info);
  }
}

</code></pre>
<h2 data-id="heading-4">æœ€ç»ˆæ•ˆæœ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90a8eed4f3d546b9b5198bf0aadb1936~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRmFuZXRoZURpdmluZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770777894&amp;x-signature=hnTC3wWicJPFxUJiqbYLo85P4Oo%3D" alt="fe0295e67d22747d63daa6be2ee2f1fa.jpg" loading="lazy"/></p>
<p>åœ¨å…¶ä»–ç«¯å¯ä»¥æ­£ç¡®æ„ŸçŸ¥åˆ°éå®‰å“å¹³å°</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4fc78e3d2b4248fd8b644316b1e06605~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRmFuZXRoZURpdmluZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770777894&amp;x-signature=1TXvy%2BrBUsoIOEVlbo%2BSsd1Oqdg%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Open AIæ¨å‡ºCodexæ¡Œé¢ç‰ˆï¼Œ4å¤§æ ¸å¿ƒèƒ½åŠ›ç»ˆäºè§£å†³ç¼–ç¨‹å°ç™½çš„ç—›ç‚¹äº†ï¼ï¼ï¼]]></title>    <link>https://juejin.cn/post/7602482736913580067</link>    <guid>https://juejin.cn/post/7602482736913580067</guid>    <pubDate>2026-02-04T01:52:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602482736913580067" data-draft-id="7602466689712619535" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Open AIæ¨å‡ºCodexæ¡Œé¢ç‰ˆï¼Œ4å¤§æ ¸å¿ƒèƒ½åŠ›ç»ˆäºè§£å†³ç¼–ç¨‹å°ç™½çš„ç—›ç‚¹äº†ï¼ï¼ï¼"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-02-04T01:52:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­ªæ–¯Wise"/> <meta itemprop="url" content="https://juejin.cn/user/3156074412913466"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Open AIæ¨å‡ºCodexæ¡Œé¢ç‰ˆï¼Œ4å¤§æ ¸å¿ƒèƒ½åŠ›ç»ˆäºè§£å†³ç¼–ç¨‹å°ç™½çš„ç—›ç‚¹äº†ï¼ï¼ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3156074412913466/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­ªæ–¯Wise
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T01:52:19.000Z" title="Wed Feb 04 2026 01:52:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â–²ç‚¹å‡»æ˜Ÿæ ‡â­ï¸ï¼ŒåŠæ—¶æ”¶çœ‹æ›´å¤šAIå®æˆ˜</p>
<h2 data-id="heading-0">01 AIç¼–ç¨‹çš„æŒ‘æˆ˜å˜äº†</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80b5610c71994a74b3ae0cdc7b08b4f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770774738&amp;x-signature=GVA1Y0m46dJP9d5GnIXMhm%2FMbXw%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>The core challenge has shifted from what agents can do to how people can direct, supervise, and collaborate with them at scale.</p>
<p>OpenAI</p>
</blockquote>
<p>å‰å¤©æ™šä¸Šï¼ŒOpen AI å‘å¸ƒäº†Codex macOSåº”ç”¨ï¼Œå®ƒè¯´AIç¼–ç¨‹çš„æ ¸å¿ƒæŒ‘æˆ˜å·²ç»è½¬ç§»äº†ï¼Œå®ƒä»AIèƒ½åšä»€ä¹ˆå˜æˆäº†äººä»¬å¦‚ä½•å¤§è§„æ¨¡çš„æŒ‡æŒ¥ã€ç›‘ç£å’Œä¸AIåä½œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31eed34b7e74425d89c039003f7a5cf2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770774738&amp;x-signature=3wUo53gk%2FuGdrsw6sIoGnwjHuQ8%3D" alt="" loading="lazy"/></p>
<p>å…¶å®Codexæœ¬èº«ä¹Ÿæœ‰ç»ˆç«¯çš„ç‰ˆæœ¬ï¼Œæ¯æ¬¡æˆ‘é‡åˆ°äº†å¤æ‚é—®é¢˜çš„æ—¶å€™æˆ‘éƒ½ä¼šç”¨å®ƒï¼Œé™¤äº†20åˆ€çš„ç”¨é‡å¤ªå°‘ä¹‹å¤–è¿˜æ˜¯éå¸¸å¥½ç”¨å¾—åˆ°ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯Codex macOSåº”ç”¨æƒ³è¦è§£å†³çš„é—®é¢˜ï¼Œå®ƒè¿™æ¬¡é¡ºå¸¦å‡çº§äº†è‡ªå·±çš„äº§å“å®šä½ï¼šä¸€ä¸ªä¸ºä»£ç†è®¾è®¡çš„æŒ‡æŒ¥ä¸­å¿ƒ</p>
<h2 data-id="heading-1">02 Codexè¿™ä¸€æ¬¡çš„å‡çº§çªç ´</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e80050045a91498a925c7666c78fa9c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770774738&amp;x-signature=GXuP7yVbiXddhVXeMDlqVW4tAPE%3D" alt="" loading="lazy"/></p>
<p>å·¦è¾¹çš„å›¾ç‰‡æ˜¯Macçš„æ¡Œè¾¹ç«¯ï¼Œå³è¾¹æ˜¯ä¼ ç»Ÿçš„ç»ˆç«¯ã€‚ä»ç¬¬ä¸€ä¸ªé¡µé¢çœ‹ï¼Œæ¡Œé¢ç«¯ä¼šæŠŠä»»åŠ¡æ”¾åœ¨æ›´å‰ä¾§ã€‚</p>
<h3 data-id="heading-2">Automations å®šæ—¶ä»»åŠ¡</h3>
<p>æ¯æ—¥Issueåˆ†ç±»ã€CIå¤±è´¥æ€»ç»“ã€å‘å¸ƒç®€æŠ¥ç”Ÿæˆã€Bugè‡ªåŠ¨æ£€æŸ¥ï¼Œè¿™äº›ä»»åŠ¡å¯ä»¥è®¾å®šå®šæ—¶è‡ªåŠ¨è¿è¡Œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2144377d74464e61b349e074cd8d0b76~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770774738&amp;x-signature=Rm10sC9k79jZ30jFjJc5N3Yi%2FVw%3D" alt="" loading="lazy"/></p>
<p>ç¬¬ä¸€ä¸ªæ˜¯ç¼–ç¨‹å°ç™½å…¥é—¨å¿…å¤‡çš„å°æ¸¸æˆï¼Œç„¶åæ˜¯ä¿®å¤BUGã€åšåŠŸèƒ½è§„åˆ’ã€ç”»åŸå‹ï¼Œç”šè‡³umm...</p>
<p>æœ€åä¸€ä¸ªè¿˜èƒ½ç»™è‡ªå·±5å²çš„å°å­©è®²ä¸ªå…³äºä½ æ¶æ„ç¡å‰æ•…äº‹ã€‚</p>
<p>æ²¡é”™ï¼Œä¸‡ç‰©çš†å¯Vibe Codingã€‚</p>
<h3 data-id="heading-3">Skills æ‰©å±•ç³»ç»Ÿ</h3>
<p>å®˜æ–¹æŠ€èƒ½åº“åŒ…æ‹¬Figmaï¼ˆè®¾è®¡ç¨¿è½¬ä»£ç ï¼‰ã€Linearï¼ˆBugåˆ†ç±»ï¼‰ã€Vercel/Cloudflare/Netlifyï¼ˆä¸€é”®éƒ¨ç½²ï¼‰ç­‰ã€‚å›¢é˜Ÿè¿˜å¯ä»¥è‡ªå®šä¹‰æŠ€èƒ½ï¼Œåœ¨Appã€CLIã€IDEæ‰©å±•é—´é€šç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85f06dc9f515478a977ab0256738f93f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770774738&amp;x-signature=qiUoYb7D11VzJbHJ6W9FwUvizuw%3D" alt="" loading="lazy"/>ç¬¬äºŒä¸ªæ¯”è¾ƒå¤§çš„å·®å¼‚æ˜¯ï¼šSkillsçš„ä¼˜å…ˆçº§è¢«æ‹‰åˆ°æ— é™é«˜ï¼Œé™¤äº†æ›´å¿«çš„å¸®åŠ©ä½ æ‰¾Skillsï¼Œä¹Ÿä¼šç»™ä½ æ¨èæ›´å¤šçš„Skillsã€‚</p>
<p>æ²¡çŒœé”™çš„è¯åº”è¯¥æ˜¯ä¸ªæ€§åŒ–çš„ï¼Œä¼šåŸºäºä½ å¤§çš„ä¸Šä¸‹æ–‡ä½ æ—¥å¸¸çš„ä½¿ç”¨ç»™ä½ æ¨èSkills</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/598b98e2fe0144169c42b54f0d32a5b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770774738&amp;x-signature=SdRVApETCZpX%2FKzLjkU%2Bz9LkLzo%3D" alt="" loading="lazy"/>è€Œè¿™é‡Œæ¨èçš„ç¬¬ä¸€æ³¢å…¶å®æ˜¯OpenAIå¤§ç¤¼åŒ…ï¼Œçœ‹åˆ°Soraçš„æ—¶å€™å…¶å®å°±ä¸éš¾ç†è§£å‰é¢è¯´çš„ï¼ŒSkillsæ˜¯ä¸‡èƒ½çš„ï¼ŒVibeCodingä¹Ÿæ˜¯ä¸‡èƒ½çš„ã€‚</p>
<h3 data-id="heading-4">Multi-Agent å¹¶è¡Œç®¡ç†</h3>
<p>CLIæ—¶ä»£ï¼Œä½ ä¸€æ¬¡åªèƒ½å’Œä¸€ä¸ªagentå¯¹è¯ã€‚</p>
<p>ç°åœ¨ï¼Œä½ å¯ä»¥åŒæ—¶è¿è¡Œ5-10 ä¸ª agentï¼Œæ¯ä¸ªç‹¬ç«‹çº¿ç¨‹å¤„ç†ä¸åŒä»»åŠ¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18cd02342a8c4d3594104346f4b6b54f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770774738&amp;x-signature=JhD5C05pvV1T1vXuOqQ7XfxG%2BZ0%3D" alt="" loading="lazy"/>è¿™ä¹Ÿæ˜¯å¯¹æˆ‘æ¥è¯´æœ€å¤§çš„å˜åŒ–ï¼Œæˆ‘ä¸ç”¨å†å»ä¸ºå¤šä¸ªä»»åŠ¡åˆ†ç¥äº†ï¼Œä»¥å‰å¤šä¸ªé¡¹ç›®ï¼Œæˆ‘ä»¬ä¼šé€‰æ‹©å¼€å¤šä¸ªçª—å£ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20a779c6971a432a9b7e0466f104d27a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770774738&amp;x-signature=DlKiwKEXmUohV7TE1c8lpuqpx8M%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¯ä¸ªçª—å£å¯èƒ½æœ‰æ— æ•°çš„ä»»åŠ¡ï¼Œä½†...çœŸçš„å¾ˆéš¾ç®¡ç†ã€‚å¯ä»¥è¯´å®Œå…¨æ˜¯çª—å£ç®¡ç†é€ æˆäº†æˆ‘Tokenæ¶ˆè€—é‡ä¸èƒ½è¿›ä¸€æ­¥æ‹‰é«˜...</p>
<p>è¿™æ¬¡Code Xçš„æ¡Œé¢ç‰ˆè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>å¯èƒ½ä¹ æƒ¯äº†chatçš„ä½“éªŒï¼ŒTraeå’ŒCursorè¦è‡ªå·±é€‰ä¼šè¯ï¼Œè¿˜æ˜¯éå¸¸çš„ä¸é€‚åº”ã€‚</p>
<h3 data-id="heading-5">å…¶ä»–æ‰©å±•çš„å†…ç½®æ”¯&amp;ä½“éªŒä¼˜åŒ–</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9a94891f36f43928d5d90cdfdc5c601~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770774738&amp;x-signature=73gcQIMH9EWQ7q6HCInSwKfF6tU%3D" alt="" loading="lazy"/></p>
<p>MCPã€Skillsã€Gitçš„worktreeï¼ŒåŸºæœ¬ä¸Šä»¥å‰æœ‰çš„éƒ½æœ‰ï¼ŒAgentå¯ä»¥åœ¨è‡ªå·±çš„worktreeé‡Œå·¥ä½œï¼Œäº’ä¸å¹²æ‰°ã€‚</p>
<p>å¦å¤–å°±æ˜¯ç»ˆäºæ”¯æŒäº†è¯¥æ­»çš„å¿«æ·æ‰“å¼€Planæ¨¡å¼ï¼Œé€Ÿåº¦åœ¨å®ƒå¼€å§‹ç»™æˆ‘æ›´å¤šåé¦ˆçš„æ—¶å€™ï¼Œå¼€å§‹æ²¡é‚£ä¹ˆæ…¢äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85db674c154e4b3ab7a2340bffad1dbf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770774738&amp;x-signature=WrnGjzEqzYT3iXcfbeqWxLI%2F4OY%3D" alt="" loading="lazy"/></p>
<p>æ¥è‡ªæˆ‘ç§‹ç¥çš„å›¾</p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨å·¦è¾¹çœ‹åˆ°å®ƒå½“å‰çš„è¿›åº¦ï¼Œæ˜¯å¦ç­‰å¾…ä½ å†³ç­–ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9ad6a36d8154862828966a8f64dde0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770774738&amp;x-signature=eKd41kreDP6%2FpwfWb922ag4Yy24%3D" alt="" loading="lazy"/></p>
<p>æ¯”èµ·ä»¥å‰çº¯é è‚‰çœ¼å»CLIæ‰¾è¦æ–¹ä¾¿çš„å¤šï¼Œè¦çŸ¥é“å®é™…ä¸Šä½ è¿è¡Œçš„å¯èƒ½æ˜¯5ä¸ªç”šè‡³10ä¸ªç»ˆç«¯çª—å£ï¼Œè€Œä¸”ç»å¸¸å°±å¿˜è®°äº†ã€‚</p>
<h2 data-id="heading-6">03 å’Œç°æœ‰ç¼–ç¨‹å·¥å…·çš„å·®å¼‚ï¼Ÿ</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6207303d96724617bf48e76a2610e824~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770774738&amp;x-signature=OP1c6R5uXCKgYMeXmS37g6smRAM%3D" alt="" loading="lazy"/></p>

























<table><thead><tr><th>æ ¸å¿ƒå·®å¼‚</th><th>Claude Code</th><th>Codex macOS App</th></tr></thead><tbody><tr><td>å¹¶è¡Œæ–¹å¼</td><td>å¤šä¼šè¯/å­ä»£ç†èƒ½å¹¶è¡Œï¼Œä½†æ›´å¤šé æ‰‹åŠ¨ç¼–æ’</td><td>åŸç”Ÿé¡¹ç›®-çº¿ç¨‹çš„ç•Œé¢ï¼Œå¤šçº¿ç¨‹å¹¶è¡Œæ›´é¡ºæ‰‹</td></tr><tr><td>å¯è§†åŒ–ç»„ç»‡</td><td>ä»¥ CLI ä¸ºä¸»ï¼Œç¼ºå°‘é¡¹ç›®çº¿ç¨‹è§†å›¾</td><td>æœ‰å¯è§†åŒ–æŒ‡æŒ¥ç•Œé¢ï¼ˆé¡¹ç›®ã€çº¿ç¨‹diff/reviewï¼‰</td></tr><tr><td>Worktree &amp; è‡ªåŠ¨åŒ–</td><td>worktree ä¸»è¦é  git æ‰‹åŠ¨ç®¡ç†</td><td>å†…ç½® worktree/Automations ç®¡ç†</td></tr></tbody></table>
<p>è¿™æ˜¯å’ŒClaude Codeç±»çš„CLIäº§å“å¯¹æ¯”ï¼Œç®€å•çš„è¯´ï¼Œæ²¡æœ‰å¯è§†åŒ–ï¼Œå¤šä¼šè¯ã€å­ä»£ç†å¾ˆéº»çƒ¦ï¼Œworktreeä¹Ÿè¦è‡ªå·±æ¥å¤„ç†ã€‚</p>




















<table><thead><tr><th>å·¥å…·</th><th>æ ¸å¿ƒå®šä½</th><th>é€‚åˆåœºæ™¯</th></tr></thead><tbody><tr><td><strong>Trae/Cursor</strong></td><td>AI-Nativeçš„IDESoloæ¨¡å¼å°ç™½å‹å¥½</td><td>ä»£ç å®¡æŸ¥é›¶åŸºç¡€å…¥é—¨</td></tr><tr><td><strong>Codex macOS App</strong></td><td>å¤šAgentå¹¶è¡Œ + Worktreeéš”ç¦»</td><td>å›¢é˜Ÿåä½œã€å¤æ‚ä»»åŠ¡æ‹†è§£</td></tr></tbody></table>
<p>å’ŒCursorã€Traeã€VsCodeè¿™ç±»æ¯”è¾ƒé‡åº¦çš„IDEçš„é€‰æ‹©ï¼Œå…¶å®å–å†³äºä½ çœ‹ä¸çœ‹AIäº§å‡ºçš„å†…å®¹ã€‚</p>
<p>å¯¹äºç ”å‘å¤§ä½¬è¦å®¡æŸ¥ä»£ç ï¼Œé‚£IDEæ˜¯åˆšéœ€ï¼Œä¸ªäººåœºæ™¯çš„è¯ï¼Œæˆ‘è‡ªå·±å¯èƒ½æ›´å¤šçš„æ˜¯çœ‹ç»™æˆ‘å†™çš„æç¤ºè¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98a499d7a0794965a7071cc604942539~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2q5pavV2lzZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770774738&amp;x-signature=6nyI%2B%2BPREiyK5wuzj6lrDi0jMgk%3D" alt="" loading="lazy"/></p>
<p>æ•´ä½“æ¥è¯´ï¼ŒCodex Macç‰ˆå‘å¸ƒï¼Œå¦‚æœä½ åªç”¨GPTä¸”ç”¨é‡è¶³å¤Ÿï¼Œé‚£å…¶å®ä½ å¯ä»¥å¸è½½æ‰å¾ˆå¤šç»ˆç«¯å·¥å…·äº†ï¼Œè‡³å°‘Codex Appç‰ˆæœ¬å®Œå…¨è¦†ç›–äº†CLIç‰ˆæœ¬ã€‚</p>
<p>å¯¹äºAIç¼–ç¨‹æ¥è¯´ï¼Œå…¥é—¨é—¨æ§›é™ä½äº†ï¼Œå…·æœ‰äº†å¯è§†åŒ–çš„é¢æ¿ï¼Œè€Œä¸”å³ä½¿åœ¨ä¸ç†Ÿç»ƒçš„æƒ…å†µä¹Ÿå¯ä»¥æé«˜æ•ˆç‡ï¼Œç›´æ¥å¼€çª—å£è®©å¤šä¸ªä¼šè¯åŒæ—¶æ‰“å·¥å°±è¡Œäº†ã€‚</p>
<p>Codex macOS Appçš„å‘å¸ƒï¼Œæ ‡å¿—ç€AIç¼–ç¨‹ä»åªæ˜¯ä¸€ä¸ªdemoå·¥å…·é€æ­¥è½¬å‘ç”Ÿäº§çš„åŸºç¡€è®¾æ–½ã€‚</p>
<p>å½“å¤šAgentå¹¶è¡Œæˆä¸ºå¸¸æ€ï¼Œå½“Worktreeéš”ç¦»æˆä¸ºæ ‡é…ï¼Œè¿™ä¸æ˜¯ç¼–ç¨‹çš„æ¶ˆäº¡ï¼Œè€Œæ˜¯ç¼–ç¨‹çš„è¿›åŒ–ã€‚</p>
<p>å£°æ˜ï¼šéƒ¨åˆ†å›¾ç‰‡ä¸ºAIç”Ÿæˆ</p>
<blockquote>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fkckwd15MzWk9xWSVhCflTw" target="_blank" title="https://mp.weixin.qq.com/s/kckwd15MzWk9xWSVhCflTw" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/kckwd15Mzâ€¦</a></p>
<p>å¦‚æœå¯¹æœ‹å‹ä»¬æœ‰ç”¨ï¼Œæ¬¢è¿å…³æ³¨å…¬ä¼—å·ï¼šæ­ªæ–¯Wise</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶æ‰“é€  Linux ç»ˆç«¯ MP3 æ’­æ”¾å™¨ï¼ç”¨ C è¯­è¨€å®ç°éŸ³ä¹è‡ªç”±]]></title>    <link>https://juejin.cn/post/7602455806446682118</link>    <guid>https://juejin.cn/post/7602455806446682118</guid>    <pubDate>2026-02-04T00:59:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602455806446682118" data-draft-id="7602503154505842729" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶æ‰“é€  Linux ç»ˆç«¯ MP3 æ’­æ”¾å™¨ï¼ç”¨ C è¯­è¨€å®ç°éŸ³ä¹è‡ªç”±"/> <meta itemprop="keywords" content="Linux,Cè¯­è¨€,åç«¯"/> <meta itemprop="datePublished" content="2026-02-04T00:59:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ¨åŒå­¦66"/> <meta itemprop="url" content="https://juejin.cn/user/1189004976589664"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶æ‰“é€  Linux ç»ˆç«¯ MP3 æ’­æ”¾å™¨ï¼ç”¨ C è¯­è¨€å®ç°éŸ³ä¹è‡ªç”±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1189004976589664/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ¨åŒå­¦66
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T00:59:19.000Z" title="Wed Feb 04 2026 00:59:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Linux çš„ä¸–ç•Œé‡Œï¼Œå‘½ä»¤è¡Œæ°¸è¿œæ˜¯æœ€çº¯ç²¹ã€æœ€å¼ºå¤§çš„äº¤äº’æ–¹å¼ã€‚ä½ æ˜¯å¦æƒ³è¿‡äº²æ‰‹æ‰“é€ ä¸€æ¬¾å±äºè‡ªå·±çš„ç»ˆç«¯ MP3 æ’­æ”¾å™¨ï¼Ÿä¸ç”¨å¤æ‚çš„æ¡†æ¶ï¼Œä»…é  C è¯­è¨€ç»“åˆ Linux ç³»ç»Ÿè°ƒç”¨ï¼Œå°±èƒ½å®ç°å¾ªç¯æ’­æ”¾ã€å•æ›²å¾ªç¯ã€éšæœºæ’­æ”¾ã€æš‚åœ / ç»§ç»­ã€åˆ‡æ­Œç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±ä¸€æ­¥æ­¥æ‹†è§£è¿™æ¬¾æç®€åˆå®ç”¨çš„ç»ˆç«¯ MP3 æ’­æ”¾å™¨çš„å®ç°æ€è·¯ï¼Œè®©ä½ åœ¨æ•²ä»£ç çš„åŒæ—¶ï¼Œä¹Ÿèƒ½äº«å—éŸ³ä¹çš„ä¹è¶£ï¼</p>
<h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒè®¾è®¡æ€è·¯ï¼šè¿›ç¨‹ + ä¿¡å·çš„å·§å¦™é…åˆ</h2>
<p>è¿™æ¬¾æ’­æ”¾å™¨çš„æ ¸å¿ƒé€»è¾‘å›´ç»•<strong>çˆ¶å­è¿›ç¨‹é€šä¿¡</strong>å’Œ<strong>ä¿¡å·å¤„ç†</strong>å±•å¼€ï¼Œè¿™ä¹Ÿæ˜¯ Linux ç³»ç»Ÿç¼–ç¨‹çš„ç»å…¸åº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>çˆ¶è¿›ç¨‹ï¼šè´Ÿè´£èœå•äº¤äº’ã€ç”¨æˆ·è¾“å…¥å¤„ç†ã€å­è¿›ç¨‹ç®¡ç†ï¼ˆåˆ›å»º / é”€æ¯ï¼‰ï¼›</li>
<li>å­è¿›ç¨‹ï¼šä¸“é—¨è´Ÿè´£è°ƒç”¨ç³»ç»ŸéŸ³é¢‘å·¥å…·ï¼ˆmpg123ï¼‰æ’­æ”¾éŸ³ä¹ï¼›</li>
<li>ä¿¡å·æœºåˆ¶ï¼šç›‘å¬å­è¿›ç¨‹é€€å‡ºä¿¡å·ï¼ˆSIGCHLDï¼‰å®ç°è‡ªåŠ¨ç»­æ’­ï¼Œé€šè¿‡ SIGSTOP/SIGCONT å®ç°æš‚åœ / ç»§ç»­ï¼Œé€šè¿‡ SIGKILL ç»ˆæ­¢æ’­æ”¾ã€‚</li>
</ul>
<h2 data-id="heading-1">äºŒã€æ ¸å¿ƒåŠŸèƒ½æ‹†è§£ï¼šä»æ–‡ä»¶æ‰«æåˆ°éŸ³ä¹æ’­æ”¾</h2>
<h3 data-id="heading-2">1. ç¬¬ä¸€æ­¥ï¼šæ‰«æ MP3 æ–‡ä»¶ï¼Œæ„å»ºæ­Œå•</h3>
<p>è¦æ’­æ”¾éŸ³ä¹ï¼Œé¦–å…ˆå¾—æ‰¾åˆ°æœ¬åœ°çš„ MP3 æ–‡ä»¶ï¼æˆ‘ä»¬å€ŸåŠ© Linux çš„<code>glob</code>å‡½æ•°æ‰¹é‡æ‰«ææŒ‡å®šç›®å½•ä¸‹çš„<code>.mp3</code>æ–‡ä»¶ï¼Œè‡ªåŠ¨æ„å»ºæ­Œå•ï¼š</p>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-perl" lang="perl">void get_mp3_files() {
    <span class="hljs-regexp">//</span> åˆ‡æ¢åˆ°MP3æ–‡ä»¶ç›®å½•
    <span class="hljs-keyword">chdir</span>(<span class="hljs-string">"./4data/mp3/"</span>);
    <span class="hljs-regexp">//</span> åŒ¹é…æ‰€æœ‰.mp3æ–‡ä»¶
    <span class="hljs-keyword">glob</span>(<span class="hljs-string">"*.mp3"</span>, <span class="hljs-number">0</span>, NULL, &amp;glob_result);
    file_count = glob_result.gl_pathc;
    <span class="hljs-regexp">//</span> æ‰“å°æ­Œå•
    <span class="hljs-keyword">printf</span>(<span class="hljs-string">"\n======= æ­Œå• =======\n"</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; file_count; i++) {
        <span class="hljs-keyword">printf</span>(<span class="hljs-string">"%d\t%s\n"</span>, i, glob_result.gl_pathv[i]);
    }
}
</code></pre>
<p><code>glob</code>å‡½æ•°ä¼šè‡ªåŠ¨éå†ç›®å½•ï¼ŒæŠŠæ‰€æœ‰åŒ¹é…çš„æ–‡ä»¶è·¯å¾„å­˜å…¥<code>glob_result</code>ç»“æ„ä½“ï¼Œæˆ‘ä»¬åªéœ€é€šè¿‡<code>gl_pathc</code>è·å–æ–‡ä»¶æ•°é‡ï¼Œ<code>gl_pathv</code>è·å–æ–‡ä»¶è·¯å¾„æ•°ç»„å³å¯ã€‚</p>
<h3 data-id="heading-3">2. ç¬¬äºŒæ­¥ï¼šåˆ›å»ºå­è¿›ç¨‹æ’­æ”¾éŸ³ä¹</h3>
<p>Linux ä¸­ï¼Œçˆ¶è¿›ç¨‹é€šè¿‡<code>fork()</code>åˆ›å»ºå­è¿›ç¨‹ï¼Œå­è¿›ç¨‹é€šè¿‡<code>execlp</code>è°ƒç”¨ç³»ç»Ÿè‡ªå¸¦çš„<code>mpg123</code>å·¥å…·ï¼ˆè½»é‡çº§éŸ³é¢‘æ’­æ”¾å™¨ï¼‰æ’­æ”¾éŸ³ä¹ï¼š</p>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// çˆ¶è¿›ç¨‹åˆ›å»ºå­è¿›ç¨‹</span>
child_pid = <span class="hljs-built_in">fork</span>();
if (child_pid == <span class="hljs-number">0</span>) {
    <span class="hljs-comment">// å­è¿›ç¨‹ï¼šæ‰§è¡Œæ’­æ”¾å‘½ä»¤</span>
    <span class="hljs-built_in">execlp</span>("mpg123", "mpg123", "-q", filename, NULL);
    <span class="hljs-built_in">perror</span>("æ’­æ”¾å¤±è´¥");
    <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);
}
</code></pre>
<ul>
<li><code>fork()</code>è¿”å›å€¼ï¼šçˆ¶è¿›ç¨‹ä¸­è¿”å›å­è¿›ç¨‹ PIDï¼Œå­è¿›ç¨‹ä¸­è¿”å› 0ï¼›</li>
<li><code>execlp("mpg123", ...)</code>ï¼šæ›¿æ¢å­è¿›ç¨‹çš„æ‰§è¡Œç¨‹åºä¸º<code>mpg123</code>ï¼Œ<code>-q</code>å‚æ•°è¡¨ç¤ºé™é»˜æ’­æ”¾ï¼Œé¿å…ç»ˆç«¯è¾“å‡ºå†—ä½™ä¿¡æ¯ã€‚</li>
</ul>
<h3 data-id="heading-4">3. ç¬¬ä¸‰æ­¥ï¼šä¿¡å·å¤„ç† â€”â€” å®ç°è‡ªåŠ¨ç»­æ’­ä¸æ’­æ”¾æ§åˆ¶</h3>
<h4 data-id="heading-5">ï¼ˆ1ï¼‰ç›‘å¬å­è¿›ç¨‹é€€å‡ºä¿¡å·ï¼ˆSIGCHLDï¼Œä¿¡å·å€¼ 17ï¼‰</h4>
<p>å½“ä¸€é¦–éŸ³ä¹æ’­æ”¾å®Œæ¯•ï¼Œå­è¿›ç¨‹ä¼šé€€å‡ºï¼Œæ­¤æ—¶ç³»ç»Ÿä¼šå‘çˆ¶è¿›ç¨‹å‘é€ SIGCHLD ä¿¡å·ã€‚æˆ‘ä»¬é€šè¿‡ä¿¡å·å¤„ç†å‡½æ•°<code>signal_handler</code>æ•è·è¯¥ä¿¡å·ï¼Œæ ¹æ®ç”¨æˆ·é€‰æ‹©çš„æ’­æ”¾æ¨¡å¼è‡ªåŠ¨åˆ›å»ºæ–°å­è¿›ç¨‹æ’­æ”¾ä¸‹ä¸€é¦–ï¼š</p>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-ini" lang="ini">void signal_handler(int sig) {
    if (<span class="hljs-attr">sig</span> == <span class="hljs-number">17</span>) {
        pid_t <span class="hljs-attr">pid</span> = waitpid(-<span class="hljs-number">1</span>, &amp;status, WNOHANG)<span class="hljs-comment">;</span>
        if (pid &gt; 0 &amp;&amp; <span class="hljs-attr">pid</span> == child_pid) {
            // é‡æ–°åˆ›å»ºå­è¿›ç¨‹ç»­æ’­
            <span class="hljs-attr">child_pid</span> = fork()<span class="hljs-comment">;</span>
            if (<span class="hljs-attr">child_pid</span> == <span class="hljs-number">0</span>) {
                // å¾ªç¯æ’­æ”¾ï¼šä¸‹æ ‡è‡ªå¢ï¼Œè¶Šç•Œåˆ™é‡ç½®ä¸º0
                if (<span class="hljs-attr">ch</span> == <span class="hljs-number">1</span>) {
                    current_index++<span class="hljs-comment">;</span>
                    <span class="hljs-attr">current_index</span> = current_index &gt;= glob_result.gl_pathc ? <span class="hljs-number">0</span> : current_index<span class="hljs-comment">;</span>
                    play_music(glob_result.gl_pathv<span class="hljs-section">[current_index]</span>)<span class="hljs-comment">;</span>
                }
                // å•æ›²å¾ªç¯ï¼šæ’­æ”¾å½“å‰ä¸‹æ ‡æ–‡ä»¶
                else if (<span class="hljs-attr">ch</span> == <span class="hljs-number">2</span>) {
                    play_music(glob_result.gl_pathv<span class="hljs-section">[current_index]</span>)<span class="hljs-comment">;</span>
                }
                // éšæœºæ’­æ”¾ï¼šç”Ÿæˆä¸é‡å¤çš„éšæœºä¸‹æ ‡
                else if (<span class="hljs-attr">ch</span> == <span class="hljs-number">3</span>) {
                    int <span class="hljs-attr">random_index</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
                    if (glob_result.gl_pathc &gt; 1) {
                        do {
                            <span class="hljs-attr">random_index</span> = rand() % glob_result.gl_pathc<span class="hljs-comment">;</span>
                        } while (<span class="hljs-attr">random_index</span> == current_index)<span class="hljs-comment">;</span>
                    }
                    <span class="hljs-attr">current_index</span> = random_index<span class="hljs-comment">;</span>
                    play_music(glob_result.gl_pathv<span class="hljs-section">[random_index]</span>)<span class="hljs-comment">;</span>
                }
                exit(0)<span class="hljs-comment">;</span>
            }
        }
    }
}
</code></pre>
<ul>
<li><code>waitpid(-1, &amp;status, WNOHANG)</code>ï¼šéé˜»å¡ç­‰å¾…æ‰€æœ‰å­è¿›ç¨‹é€€å‡ºï¼Œé¿å…åƒµå°¸è¿›ç¨‹ï¼›</li>
<li>ä¸‰ç§æ’­æ”¾æ¨¡å¼ï¼šå¾ªç¯æ’­æ”¾ï¼ˆä¸‹æ ‡å¾ªç¯ï¼‰ã€å•æ›²å¾ªç¯ï¼ˆå›ºå®šä¸‹æ ‡ï¼‰ã€éšæœºæ’­æ”¾ï¼ˆç”Ÿæˆä¸é‡å¤éšæœºä¸‹æ ‡ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-6">ï¼ˆ2ï¼‰æš‚åœ / ç»§ç»­ï¼šSIGSTOPï¼ˆ19ï¼‰ä¸ SIGCONTï¼ˆ18ï¼‰</h4>
<p>é€šè¿‡å‘å­è¿›ç¨‹å‘é€ä¿¡å·å®ç°æ’­æ”¾æ§åˆ¶ï¼Œæ— éœ€é‡å¯å­è¿›ç¨‹ï¼š</p>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æš‚åœæ’­æ”¾ï¼šå‘é€SIGSTOPä¿¡å·</span>
<span class="hljs-built_in">kill</span>(child_pid, <span class="hljs-number">19</span>);
<span class="hljs-comment">// ç»§ç»­æ’­æ”¾ï¼šå‘é€SIGCONTä¿¡å·</span>
<span class="hljs-built_in">kill</span>(child_pid, <span class="hljs-number">18</span>);
</code></pre>
<h3 data-id="heading-7">4. ç¬¬å››æ­¥ï¼šäº¤äº’å¼èœå• â€”â€” å®ç°æ‰‹åŠ¨åˆ‡æ­Œ / é€€å‡º</h3>
<p>çˆ¶è¿›ç¨‹é€šè¿‡å¾ªç¯å±•ç¤ºèœå•ï¼Œæ¥æ”¶ç”¨æˆ·è¾“å…¥ï¼Œå¤„ç†ä¸Šä¸€æ›²ã€ä¸‹ä¸€æ›²ã€æš‚åœ / ç»§ç»­ã€é€€å‡ºç­‰æ“ä½œï¼š</p>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">show_menu</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n======= MP3 æ’­æ”¾å™¨ =======\n"</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"å½“å‰æ’­æ”¾: %s\n"</span>, glob_result.gl_pathv[current_index]);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"1. ä¸Šä¸€æ›²\n2. æš‚åœ\n3. ç»§ç»­æ’­æ”¾\n4. ä¸‹ä¸€æ›²\n5. é€€å‡º\n"</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"è¯·é€‰æ‹©æ“ä½œ: "</span>);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">handle_choice</span><span class="hljs-params">(<span class="hljs-type">int</span> choice)</span> </span>{
    <span class="hljs-keyword">switch</span> (choice) {
        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: <span class="hljs-comment">// ä¸Šä¸€æ›²ï¼šä¸‹æ ‡é€’å‡ï¼Œè¶Šç•Œåˆ™è·³è½¬åˆ°æœ€åä¸€é¦–</span>
            current_index--;
            current_index = current_index &lt; <span class="hljs-number">0</span> ? glob_result.gl_pathc - <span class="hljs-number">1</span> : current_index;
            <span class="hljs-built_in">kill_child_process</span>(); <span class="hljs-comment">// æ€æ­»å½“å‰æ’­æ”¾è¿›ç¨‹</span>
            <span class="hljs-comment">// é‡æ–°åˆ›å»ºå­è¿›ç¨‹æ’­æ”¾æ–°æ­Œæ›²</span>
            child_pid = fork();
            <span class="hljs-keyword">if</span> (child_pid == <span class="hljs-number">0</span>) { <span class="hljs-built_in">play_music</span>(glob_result.gl_pathv[current_index]); <span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>); }
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>: <span class="hljs-comment">// ä¸‹ä¸€æ›²ï¼šé€»è¾‘åŒä¸Šï¼Œä¸‹æ ‡é€’å¢</span>
            <span class="hljs-comment">// ... çœç•¥ç›¸ä¼¼é€»è¾‘</span>
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>: <span class="hljs-comment">// é€€å‡ºï¼šé‡Šæ”¾èµ„æº+æ€æ­»å­è¿›ç¨‹</span>
            <span class="hljs-built_in">kill_child_process</span>();
            <span class="hljs-built_in">globfree</span>(&amp;glob_result); <span class="hljs-comment">// é‡Šæ”¾globç”³è¯·çš„å†…å­˜</span>
            <span class="hljs-keyword">break</span>;
    }
}
</code></pre>
<h2 data-id="heading-8">ä¸‰ã€è¿è¡Œæ•ˆæœï¼šç»ˆç«¯é‡Œçš„éŸ³ä¹ç››å®´</h2>
<ol>
<li>å¯åŠ¨ç¨‹åºï¼Œè‡ªåŠ¨æ‰«æ<code>./4data/mp3/</code>ç›®å½•ä¸‹çš„ MP3 æ–‡ä»¶ï¼Œæ‰“å°æ­Œå•ï¼›</li>
<li>é€‰æ‹©æ’­æ”¾æ¨¡å¼ï¼ˆå¾ªç¯ / å•æ›²å¾ªç¯ / éšæœºæ’­æ”¾ï¼‰ï¼›</li>
<li>ç»ˆç«¯å¼¹å‡ºæ“ä½œèœå•ï¼Œå¯éšæ—¶åˆ‡æ­Œã€æš‚åœ / ç»§ç»­ï¼Œä½“éªŒä¸æ»‘ï¼›</li>
<li>é€€å‡ºæ—¶è‡ªåŠ¨é‡Šæ”¾å†…å­˜ã€ç»ˆæ­¢å­è¿›ç¨‹ï¼Œæ— èµ„æºæ³„æ¼ã€‚</li>
</ol>
<h2 data-id="heading-9">å››ã€æŠ€æœ¯äº®ç‚¹ä¸æ‹“å±•æ–¹å‘</h2>
<h3 data-id="heading-10">ğŸŒŸ æ ¸å¿ƒäº®ç‚¹</h3>
<ol>
<li>çº¯ C è¯­è¨€ + Linux ç³»ç»Ÿè°ƒç”¨ï¼Œé›¶ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼Œæè‡´è½»é‡åŒ–ï¼›</li>
<li>çˆ¶å­è¿›ç¨‹åˆ†ç¦»ï¼šæ’­æ”¾ä¸äº¤äº’è§£è€¦ï¼Œé¿å…æ“ä½œé˜»å¡æ’­æ”¾ï¼›</li>
<li>ä¿¡å·é©±åŠ¨ï¼šåˆ©ç”¨ Linux ä¿¡å·æœºåˆ¶å®ç°å¼‚æ­¥æ’­æ”¾æ§åˆ¶ï¼Œå“åº”åŠæ—¶ï¼›</li>
<li>å†…å­˜å®‰å…¨ï¼šé€šè¿‡<code>globfree</code>é‡Šæ”¾å†…å­˜ï¼Œ<code>waitpid</code>å›æ”¶å­è¿›ç¨‹ï¼Œæœç»åƒµå°¸è¿›ç¨‹å’Œå†…å­˜æ³„æ¼ã€‚</li>
</ol>
<h3 data-id="heading-11">ğŸš€ æ‹“å±•æ–¹å‘</h3>
<ol>
<li>æ”¯æŒè‡ªå®šä¹‰ MP3 ç›®å½•ï¼šé€šè¿‡å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šæ‰«æè·¯å¾„ï¼›</li>
<li>éŸ³é‡è°ƒèŠ‚ï¼šè°ƒç”¨<code>mpg123</code>çš„éŸ³é‡å‚æ•°ï¼ˆ<code>-v</code>ï¼‰æˆ–ç»“åˆ<code>alsa-utils</code>å·¥å…·ï¼›</li>
<li>æ­Œè¯åŒæ­¥ï¼šè§£æ lrc æ–‡ä»¶ï¼Œé€šè¿‡å®šæ—¶å™¨åŒæ­¥æ‰“å°æ­Œè¯ï¼›</li>
<li>åå°æ’­æ”¾ï¼šç»“åˆ<code>setsid</code>åˆ›å»ºå®ˆæŠ¤è¿›ç¨‹ï¼Œè„±ç¦»ç»ˆç«¯è¿è¡Œã€‚</li>
</ol>
<h2 data-id="heading-12">äº”ã€æ€»ç»“</h2>
<p>è¿™æ¬¾ç»ˆç«¯ MP3 æ’­æ”¾å™¨çœ‹ä¼¼ç®€å•ï¼Œå´æµ“ç¼©äº† Linux ç³»ç»Ÿç¼–ç¨‹çš„æ ¸å¿ƒæ€æƒ³ï¼šè¿›ç¨‹ç®¡ç†ã€ä¿¡å·å¤„ç†ã€æ–‡ä»¶æ“ä½œã€‚ä»æ‰«ææ–‡ä»¶åˆ°åˆ›å»ºè¿›ç¨‹ï¼Œä»ä¿¡å·ç›‘å¬åˆ°åº•å±‚è°ƒç”¨ï¼Œæ¯ä¸€è¡Œä»£ç éƒ½åœ¨å’Œæ“ä½œç³»ç»Ÿ â€œå¯¹è¯â€ã€‚</p>
<p>é€šè¿‡äº²æ‰‹å®ç°è¿™ä¸ªå°é¡¹ç›®ï¼Œä½ ä¸ä»…èƒ½å·©å›º C è¯­è¨€åŸºç¡€ï¼Œæ›´èƒ½æ·±å…¥ç†è§£ Linux çš„è¿›ç¨‹æ¨¡å‹å’Œä¿¡å·æœºåˆ¶ â€”â€” è¿™æ¯”å•çº¯èƒŒç†è®ºè¦é«˜æ•ˆå¾—å¤šã€‚å½“ç»ˆç«¯é‡Œå“èµ·ä½ äº²æ‰‹æ’­æ”¾çš„éŸ³ä¹æ—¶ï¼Œé‚£ç§æŒæ§ç³»ç»Ÿçš„æˆå°±æ„Ÿï¼Œæ˜¯ä»»ä½•ç°æˆå·¥å…·éƒ½æ— æ³•æ›¿ä»£çš„ã€‚</p>
<p>ç°åœ¨ï¼Œä¸å¦¨æŠŠä»£ç æ‹‰ä¸‹æ¥ï¼Œæ”¹ä¸€æ”¹ç›®å½•è·¯å¾„ï¼ŒåŠ å‡ ä¸ªè‡ªå·±å–œæ¬¢çš„åŠŸèƒ½ï¼Œè®©è¿™æ¬¾æ’­æ”¾å™¨çœŸæ­£å±äºä½ ã€‚æ¯•ç«Ÿï¼Œåœ¨ Linux çš„ä¸–ç•Œé‡Œï¼Œæœ€å¥½çš„å·¥å…·æ°¸è¿œæ˜¯è‡ªå·±å†™çš„é‚£ä¸€ä¸ªï½</p>
<blockquote>
<p>å®Œæ•´ä»£ç å·²æ‹†åˆ†å±•ç¤ºï¼Œå¯ç›´æ¥æ•´åˆç¼–è¯‘ï¼ˆç¼–è¯‘å‘½ä»¤ï¼š<code>gcc *.c -o mp3_player -lmpg123</code>ï¼‰ï¼Œéœ€æå‰å®‰è£…<code>mpg123</code>ï¼ˆ<code>apt install mpg123</code>ï¼‰ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CQRS æ¶æ„å¦‚ä½•è®©ç³»ç»Ÿâ€œå†™å¾—ç¨³ã€æŸ¥å¾—å¿«â€]]></title>    <link>https://juejin.cn/post/7602551091516096521</link>    <guid>https://juejin.cn/post/7602551091516096521</guid>    <pubDate>2026-02-04T02:49:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602551091516096521" data-draft-id="7602551091516080137" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CQRS æ¶æ„å¦‚ä½•è®©ç³»ç»Ÿâ€œå†™å¾—ç¨³ã€æŸ¥å¾—å¿«â€"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2026-02-04T02:49:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°é£Coding"/> <meta itemprop="url" content="https://juejin.cn/user/954816145155181"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CQRS æ¶æ„å¦‚ä½•è®©ç³»ç»Ÿâ€œå†™å¾—ç¨³ã€æŸ¥å¾—å¿«â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/954816145155181/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°é£Coding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T02:49:03.000Z" title="Wed Feb 04 2026 02:49:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„å›°å¢ƒï¼Ÿ</p>
<ul>
<li>è®¢å•è¡¨å­—æ®µè¶Šæ¥è¶Šå¤šï¼Œæ—¢è¦æ”¯æŒä¸‹å•æ ¡éªŒï¼Œåˆè¦æ”¯æ’‘è¿è¥åå°çš„ 20 ç§ç­›é€‰æ¡ä»¶ï¼›</li>
<li>é«˜å¹¶å‘ä¸‹å•æ—¶ï¼Œå¤æ‚çš„æŠ¥è¡¨æŸ¥è¯¢æ‹–æ…¢æ•´ä¸ªæ•°æ®åº“ï¼›</li>
<li>æƒ³ç»™ç”¨æˆ·åŠ ä¸ªâ€œæŒ‰å•†å“åæœè®¢å•â€åŠŸèƒ½ï¼Œå´è¦æ”¹æ ¸å¿ƒäº¤æ˜“æ¨¡å‹ï¼Œé£é™©æé«˜â€¦â€¦</li>
</ul>
<p>è¿™äº›é—®é¢˜çš„èƒŒåï¼Œå¾€å¾€æ˜¯å› ä¸ºæˆ‘ä»¬<strong>ç”¨åŒä¸€ä¸ªæ•°æ®æ¨¡å‹åŒæ—¶æ‰¿æ‹…â€œå†™â€å’Œâ€œè¯»â€çš„èŒè´£</strong>ã€‚è€Œè§£å†³ä¹‹é“ï¼Œæ­£æ˜¯æœ¬æ–‡è¦è®²çš„â€”â€”<strong>CQRSï¼ˆCommand Query Responsibility Segregationï¼‰</strong> ã€‚</p>
<p>å®ƒä¸æ˜¯é“¶å¼¹ï¼Œå´æ˜¯<strong>å¤æ‚ä¸šåŠ¡ç³»ç»Ÿèµ°å‘é«˜æ€§èƒ½ã€é«˜å¯ç»´æŠ¤æ€§çš„å…³é”®ä¸€æ­¥</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€CQRS æ˜¯ä»€ä¹ˆï¼Ÿä¸€å¥è¯è¯´æ¸…</h2>
<blockquote>
<p><strong>CQRS = å‘½ä»¤ï¼ˆå†™ï¼‰å’ŒæŸ¥è¯¢ï¼ˆè¯»ï¼‰ç”¨ä¸åŒçš„æ¨¡å‹å¤„ç†ã€‚</strong></p>
</blockquote>
<ul>
<li><strong>Commandï¼ˆå‘½ä»¤ï¼‰</strong> ï¼šä¼šæ”¹å˜ç³»ç»ŸçŠ¶æ€çš„æ“ä½œï¼Œå¦‚ <code>åˆ›å»ºè®¢å•</code>ã€<code>æ”¯ä»˜è®¢å•</code>ï¼›</li>
<li><strong>Queryï¼ˆæŸ¥è¯¢ï¼‰</strong> ï¼šåªè¯»å–æ•°æ®ï¼Œå¦‚ <code>æŸ¥çœ‹è®¢å•è¯¦æƒ…</code>ã€<code>æœç´¢å†å²è®¢å•</code>ã€‚</li>
</ul>
<p>ä¼ ç»Ÿ CRUD ç³»ç»Ÿä¸­ï¼Œè¯»å†™å…±ç”¨ä¸€ä¸ª <code>Order</code> å¯¹è±¡ï¼›è€Œ CQRS ä¸»å¼ ï¼š</p>
<ul>
<li><strong>å†™æ¨¡å‹</strong>èšç„¦ä¸šåŠ¡è§„åˆ™ä¸ä¸€è‡´æ€§ï¼›</li>
<li><strong>è¯»æ¨¡å‹</strong>ä¸“æ³¨æŸ¥è¯¢æ•ˆç‡ä¸çµæ´»æ€§ã€‚</li>
</ul>
<p>äºŒè€…å¯ä»¥ç»“æ„ä¸åŒã€æŠ€æœ¯æ ˆä¸åŒï¼Œç”šè‡³å­˜å‚¨åœ¨ä¸åŒæ•°æ®åº“ä¸­ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€ä¸ºä»€ä¹ˆéœ€è¦ CQRSï¼Ÿä»ç—›ç‚¹å‡ºå‘</h2>
<h3 data-id="heading-2">åœºæ™¯ 1ï¼šæ¨¡å‹è¶Šæ¥è¶Šè‡ƒè‚¿</h3>
<p>ä¸€ä¸ª <code>Order</code> ç±»æ—¢è¦åŒ…å«åˆ›å»ºæ—¶çš„æ ¡éªŒé€»è¾‘ï¼Œåˆè¦æ”¯æŒâ€œæŒ‰ç”¨æˆ·+æ—¶é—´+çŠ¶æ€+å•†å“ç±»ç›®+ä¼˜æƒ ç±»å‹â€ç»„åˆæŸ¥è¯¢ã€‚ä»£ç è€¦åˆä¸¥é‡ï¼Œæ”¹ä¸€å¤„æ€•å´©å…¨å±€ã€‚</p>
<h3 data-id="heading-3">åœºæ™¯ 2ï¼šè¯»å†™äº’ç›¸æ‹–ç´¯</h3>
<p>å¤§ä¿ƒæœŸé—´ï¼Œæ¯ç§’ä¸‡çº§ä¸‹å•ï¼ˆå†™å¯†é›†ï¼‰ï¼ŒåŒæ—¶è¿è¥åœ¨è·‘æœˆåº¦æŠ¥è¡¨ï¼ˆè¯»å¯†é›†ï¼‰ã€‚åŒä¸€å¼ è¡¨æ—¢è¦åšé«˜é¢‘ INSERT/UPDATEï¼Œåˆè¦æ‰§è¡Œå¤æ‚ JOINï¼Œæ•°æ®åº“ CPU ç›´æ¥æ‹‰æ»¡ã€‚</p>
<h3 data-id="heading-4">åœºæ™¯ 3ï¼šæŸ¥è¯¢éœ€æ±‚åƒå¥‡ç™¾æ€ª</h3>
<p>å‰ç«¯è¦å®æ—¶å±•ç¤ºâ€œæœ€è¿‘3å•â€ï¼ŒBI è¦åˆ†æâ€œæŸå“ç±»å¤è´­ç‡â€ï¼Œå®¢æœè¦æ¨¡ç³Šæœâ€œå«â€˜iPhoneâ€™çš„è®¢å•â€â€¦â€¦è¿™äº›éœ€æ±‚è‹¥éƒ½å‹åˆ°äº¤æ˜“åº“ï¼Œç³»ç»Ÿè¿Ÿæ—©å´©æºƒã€‚</p>
<blockquote>
<p>âœ… <strong>CQRS çš„ä»·å€¼</strong>ï¼š</p>
<ul>
<li>å†™æ¨¡å‹ä¿æŒ<strong>ç®€æ´ã€å¼ºä¸€è‡´</strong>ï¼›</li>
<li>è¯»æ¨¡å‹å¯ä»¥<strong>é«˜åº¦å®šåˆ¶ã€æœ€ç»ˆä¸€è‡´</strong>ï¼›</li>
<li>è¯»å†™<strong>ç‰©ç†éš”ç¦»</strong>ï¼Œäº’ä¸å½±å“ã€‚</li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€CQRS çš„ä¸¤ç§å½¢æ€ï¼šä»è½»é‡åˆ°å®Œæ•´</h2>
<h3 data-id="heading-6">â–¶ å½¢æ€ 1ï¼šç®€å• CQRSï¼ˆåŒåº“å¼‚æ¨¡ï¼‰</h3>
<ul>
<li>
<p><strong>é€‚ç”¨</strong>ï¼šä¸­å°å‹ç³»ç»Ÿï¼Œæ”¹é€ æˆæœ¬ä½</p>
</li>
<li>
<p><strong>åšæ³•</strong>ï¼š</p>
<ul>
<li>åŒä¸€ä¸ªæ•°æ®åº“</li>
<li>ä½†æ‹†åˆ†ä¸º <code>OrderCommandService</code> å’Œ <code>OrderQueryService</code></li>
<li>æŸ¥è¯¢å¯èµ°è§†å›¾ã€å®½è¡¨æˆ–ç¼“å­˜</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å†™ï¼šåªå…³å¿ƒä¸šåŠ¡è§„åˆ™</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">createOrder</span>(<span class="hljs-params">CreateOrderCmd cmd</span>) {
    <span class="hljs-comment">// æ ¡éªŒåº“å­˜ã€ä¼˜æƒ ã€ç”Ÿæˆè®¢å• â†’ insert into orders</span>
}

<span class="hljs-comment">// è¯»ï¼šåªå…³å¿ƒæŸ¥è¯¢æ•ˆç‡</span>
<span class="hljs-keyword">public</span> <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">OrderSummary</span>&gt; <span class="hljs-title function_">searchOrders</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> keyword</span>) {
    <span class="hljs-comment">// select * from order_search_view where ...</span>
}
</code></pre>
<p>âœ… <strong>ä¼˜ç‚¹</strong>ï¼šæ”¹åŠ¨å°ï¼Œè§æ•ˆå¿«<br/>
âŒ <strong>å±€é™</strong>ï¼šæ— æ³•å½»åº•è§£è€¦å­˜å‚¨å‹åŠ›</p>
<hr/>
<h3 data-id="heading-7">â–¶ å½¢æ€ 2ï¼šå®Œæ•´ CQRSï¼ˆå¼‚åº“å¼‚æ„ï¼‰</h3>
<ul>
<li>
<p><strong>é€‚ç”¨</strong>ï¼šé«˜å¹¶å‘ã€å¤šç«¯æŸ¥è¯¢çš„å¤§å‹ç³»ç»Ÿï¼ˆå¦‚ç”µå•†ã€é‡‘èï¼‰</p>
</li>
<li>
<p><strong>æ¶æ„</strong>ï¼š</p>
<ul>
<li><strong>å†™åº“</strong>ï¼šMySQL / PostgreSQLï¼Œä¿è¯ ACID</li>
<li><strong>è¯»åº“</strong>ï¼šElasticsearchï¼ˆå…¨æ–‡æœç´¢ï¼‰ã€Redisï¼ˆç¼“å­˜èšåˆï¼‰ã€ClickHouseï¼ˆåˆ†æï¼‰</li>
<li><strong>åŒæ­¥æœºåˆ¶</strong>ï¼šé€šè¿‡ Binlogï¼ˆCanalï¼‰æˆ–äº‹ä»¶æ¶ˆæ¯ï¼ˆRocketMQ/Kafkaï¼‰é©±åŠ¨</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-selector-attr">[ç”¨æˆ·ä¸‹å•]</span>
    â†“
(Order Service) â†’ å†™å…¥ MySQLï¼ˆCommandï¼‰
    â†“
å‘å¸ƒ "OrderCreated" äº‹ä»¶
    â†“
(Read Model Builder) æ¶ˆè´¹äº‹ä»¶ â†’ æ›´æ–° ES / Redis
    â†“
<span class="hljs-selector-attr">[å‰ç«¯æœç´¢]</span> â† (Search Service) â† ä» ES æŸ¥è¯¢ï¼ˆQueryï¼‰
</code></pre>
<p>âœ… <strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>å†™è·¯å¾„æç®€ï¼Œå“åº”å¿«ï¼ˆ&lt;50msï¼‰</li>
<li>è¯»è·¯å¾„æ”¯æŒæ¨¡ç³Šã€å¤šç»´ã€èšåˆæŸ¥è¯¢</li>
<li>å¯ç‹¬ç«‹æ‰©ç¼©å®¹ï¼ˆå¦‚å¤§ä¿ƒå‰åŠ  ES èŠ‚ç‚¹ï¼‰</li>
</ul>
<blockquote>
<p>ğŸ’¡ <strong>çœŸå®æ¡ˆä¾‹</strong>ï¼š<br/>
æ·˜å®è®¢å•æœç´¢ã€äº¬ä¸œè®¢å•ä¸­å¿ƒã€ç¾å›¢äº¤æ˜“ç³»ç»Ÿï¼Œå‡é‡‡ç”¨æ­¤æ¨¡å¼ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-8">å››ã€CQRS ä¸æ˜¯é“¶å¼¹ï¼šè¿™äº›å‘è¦é¿å¼€</h2>
<h3 data-id="heading-9">âŒ è¯¯åŒº 1ï¼šæ‰€æœ‰ç³»ç»Ÿéƒ½è¦ä¸Š CQRS</h3>
<ul>
<li><strong>äº‹å®</strong>ï¼šç®€å• CRUD åº”ç”¨ï¼ˆå¦‚å†…éƒ¨ç®¡ç†ç³»ç»Ÿï¼‰å¼•å…¥ CQRS åªä¼šå¢åŠ å¤æ‚åº¦ã€‚</li>
<li><strong>å»ºè®®</strong>ï¼šä»…å½“<strong>è¯»å†™è´Ÿè½½å·®å¼‚å¤§</strong>æˆ–<strong>æŸ¥è¯¢åœºæ™¯å¤æ‚</strong>æ—¶æ‰è€ƒè™‘ã€‚</li>
</ul>
<h3 data-id="heading-10">âŒ è¯¯åŒº 2ï¼šCQRS = è¯»å†™åˆ†ç¦»ï¼ˆä¸»ä»å¤åˆ¶ï¼‰</h3>
<ul>
<li>
<p><strong>åŒºåˆ«</strong>ï¼š</p>
<ul>
<li>è¯»å†™åˆ†ç¦»ï¼š<strong>åŒä¸€æ¨¡å‹</strong>ï¼Œåªæ˜¯è¯»èµ°ä»åº“ï¼›</li>
<li>CQRSï¼š<strong>ä¸åŒæ¨¡å‹</strong>ï¼Œç»“æ„ã€ç”¨é€”ã€å­˜å‚¨å‡å¯ä¸åŒã€‚</li>
</ul>
</li>
<li>
<p><strong>å…³é”®</strong>ï¼šCQRS çš„è¯»æ¨¡å‹å¾€å¾€æ˜¯<strong>ä¸ºæŸ¥è¯¢ä¸“é—¨ä¼˜åŒ–çš„è§†å›¾</strong>ï¼Œè€ŒéåŸå§‹è¡¨çš„å‰¯æœ¬ã€‚</p>
</li>
</ul>
<h3 data-id="heading-11">âŒ è¯¯åŒº 3ï¼šæ•°æ®å¿…é¡»å®æ—¶ä¸€è‡´</h3>
<ul>
<li>
<p><strong>çœŸç›¸</strong>ï¼šCQRS å¤©ç„¶æ¥å—<strong>æœ€ç»ˆä¸€è‡´æ€§</strong>ã€‚</p>
</li>
<li>
<p><strong>å¯¹ç­–</strong>ï¼š</p>
<ul>
<li>å…³é”®è·¯å¾„ï¼ˆå¦‚ä¸‹å•åç«‹å³æŸ¥è¯¦æƒ…ï¼‰å¯èµ°å†™åº“ï¼›</li>
<li>éå…³é”®è·¯å¾„ï¼ˆå¦‚æœç´¢ã€æŠ¥è¡¨ï¼‰èµ°è¯»åº“ï¼Œå»¶è¿Ÿ 1~3 ç§’å¯æ¥å—ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-12">äº”ã€ä½•æ—¶è¯¥ç”¨ CQRSï¼Ÿä¸€å¼ å†³ç­–å›¾</h2>
<pre><code class="hljs language-bash" lang="bash">ä½ çš„ç³»ç»Ÿæ˜¯å¦æ»¡è¶³ä»¥ä¸‹ä»»ä¸€ï¼Ÿ
â”œâ”€â”€ è¯»å†™ QPS å·®å¼‚å·¨å¤§ï¼ˆå¦‚å†™ 1k/sï¼Œè¯» 100k/sï¼‰ â†’ âœ… ç”¨
â”œâ”€â”€ æŸ¥è¯¢ç»´åº¦å¤šã€æ¡ä»¶å¤æ‚ï¼ˆæ¨¡ç³Šã€èšåˆã€è·¨åŸŸï¼‰ â†’ âœ… ç”¨
â”œâ”€â”€ éœ€è¦å¤šç§æ•°æ®è§†å›¾ï¼ˆç”¨æˆ·ç«¯ã€è¿è¥ç«¯ã€BIï¼‰ â†’ âœ… ç”¨
â””â”€â”€ ä¸šåŠ¡ç®€å•ï¼Œåªæœ‰å¢åˆ æ”¹æŸ¥ â†’ âŒ ä¸ç”¨
</code></pre>
<blockquote>
<p>ğŸ”‘ <strong>ç»éªŒæ³•åˆ™</strong>ï¼š<br/>
å¦‚æœä½ å·²ç»å¼€å§‹ä¸ºâ€œæŸ¥è¯¢å¤ªæ…¢â€å»ºå„ç§å†—ä½™å­—æ®µæˆ–ç‰©åŒ–è§†å›¾ï¼Œ<br/>
é‚£å°±æ˜¯ CQRS åœ¨å‘ä½ æ‹›æ‰‹äº†ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-13">å…­ã€æ€»ç»“</h2>
<p>CQRS çš„æœ¬è´¨ï¼Œä¸æ˜¯æŠ€æœ¯ç‚«æŠ€ï¼Œè€Œæ˜¯<strong>å¯¹ç³»ç»ŸèŒè´£çš„æ¸…é†’è®¤çŸ¥</strong>ï¼š</p>
<ul>
<li><strong>å†™ï¼Œè¦ç¨³</strong>ï¼šä¿è¯æ•°æ®æ­£ç¡®ã€äº‹åŠ¡å¯é ï¼›</li>
<li><strong>è¯»ï¼Œè¦å¿«</strong>ï¼šæ”¯æŒçµæ´»ã€é«˜æ•ˆã€å¤šæ ·åŒ–çš„è®¿é—®ã€‚</li>
</ul>
<p>å®ƒè®©æ¶æ„å¸ˆèƒ½<strong>ä¸ºä¸åŒåœºæ™¯é€‰æ‹©æœ€ä¼˜è§£</strong>ï¼Œè€Œä¸æ˜¯è®©ä¸€ä¸ªæ¨¡å‹â€œæ—¢è¦åˆè¦è¿˜è¦â€ã€‚</p>
<blockquote>
<p>ğŸŒŸ <strong>è®°ä½</strong>ï¼š</p>
<ul>
<li>å°ç³»ç»Ÿç”¨ç®€å• CQRSï¼ˆæ¥å£åˆ†ç¦»ï¼‰ï¼›</li>
<li>å¤§ç³»ç»Ÿç”¨å®Œæ•´ CQRSï¼ˆå¼‚æ„å­˜å‚¨ + äº‹ä»¶é©±åŠ¨ï¼‰ï¼›</li>
<li>æ°¸è¿œä¸è¦ä¸ºäº†ç”¨ CQRS è€Œç”¨ CQRSã€‚</li>
</ul>
</blockquote>
<p>å½“ä½ ä¸‹æ¬¡é¢å¯¹â€œåˆæƒ³å¿«åˆæƒ³å‡†åˆæƒ³çµæ´»â€çš„éœ€æ±‚æ—¶ï¼Œä¸å¦¨è¯•è¯• CQRS â€”â€” å®ƒå¯èƒ½å°±æ˜¯é‚£æŠŠè§£å¼€ç³»ç»Ÿæ·é”çš„é’¥åŒ™ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OpenProject Docker å®¹å™¨åŒ–éƒ¨ç½²æŒ‡å—ï¼šä»å¿«é€Ÿå¯åŠ¨åˆ°ç”Ÿäº§ç¯å¢ƒé…ç½®]]></title>    <link>https://juejin.cn/post/7602454700504514601</link>    <guid>https://juejin.cn/post/7602454700504514601</guid>    <pubDate>2026-02-04T02:02:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602454700504514601" data-draft-id="7602512064976470079" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OpenProject Docker å®¹å™¨åŒ–éƒ¨ç½²æŒ‡å—ï¼šä»å¿«é€Ÿå¯åŠ¨åˆ°ç”Ÿäº§ç¯å¢ƒé…ç½®"/> <meta itemprop="keywords" content="å¼€æº,Docker,å®¹å™¨"/> <meta itemprop="datePublished" content="2026-02-04T02:02:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜è€èµµ"/> <meta itemprop="url" content="https://juejin.cn/user/3208848015890347"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OpenProject Docker å®¹å™¨åŒ–éƒ¨ç½²æŒ‡å—ï¼šä»å¿«é€Ÿå¯åŠ¨åˆ°ç”Ÿäº§ç¯å¢ƒé…ç½®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3208848015890347/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜è€èµµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T02:02:38.000Z" title="Wed Feb 04 2026 02:02:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»23åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>OpenProjectæ˜¯ä¸€æ¬¾åŠŸèƒ½å…¨é¢çš„å¼€æºé¡¹ç›®ç®¡ç†å¹³å°ï¼Œæ”¯æŒæ•æ·ç®¡ç†ã€ä»»åŠ¡è·Ÿè¸ªã€å·¥æ—¶è®°å½•ã€æˆæœ¬æ§åˆ¶ç­‰å¤šç§é¡¹ç›®ç®¡ç†éœ€æ±‚ï¼Œæä¾›ç¤¾åŒºç‰ˆå’Œä¼ä¸šç‰ˆä¸¤ç§éƒ¨ç½²é€‰é¡¹ï¼Œé€‚é…ä¸åŒè§„æ¨¡å›¢é˜Ÿä¸ç»„ç»‡çš„ä½¿ç”¨åœºæ™¯ã€‚</p>
<p>é‡‡ç”¨Dockerå®¹å™¨åŒ–éƒ¨ç½²OpenProjectï¼Œå¯æ˜¾è‘—ç®€åŒ–ä¼ ç»Ÿéƒ¨ç½²ä¸­çš„ç¯å¢ƒé…ç½®å¤æ‚åº¦ï¼Œå®ç°å¿«é€Ÿæ­å»ºã€çµæ´»æ‰©å±•ä¸ä¾¿æ·å‡çº§ã€‚æœ¬æ–‡åŸºäº<strong>è½©è¾•é•œåƒè®¿é—®æ”¯æŒå¹³å°</strong>æä¾›çš„<code>openproject/openproject</code>é•œåƒï¼ˆå…¼å®¹å®˜æ–¹é•œåƒï¼‰ï¼Œè¯¦ç»†ä»‹ç»ä»ç¯å¢ƒå‡†å¤‡ã€å¿«é€Ÿå¯åŠ¨ã€è¿›é˜¶é…ç½®åˆ°ç”Ÿäº§ç¯å¢ƒé›†ç¾¤éƒ¨ç½²çš„å®Œæ•´æµç¨‹ï¼ŒåŒæ—¶è¦†ç›–æ’ä»¶å®šåˆ¶ã€ç¦»çº¿éƒ¨ç½²ç­‰é«˜çº§æ“ä½œï¼Œå¸®åŠ©ç”¨æˆ·é«˜æ•ˆæ­å»ºç¨³å®šã€å®‰å…¨çš„OpenProjecté¡¹ç›®ç®¡ç†ç³»ç»Ÿã€‚</p>
<p>OpenProject Dockeré•œåƒæä¾›ä¸¤ç§æ ¸å¿ƒç‰ˆæœ¬ï¼Œé€‚é…ä¸åŒä½¿ç”¨åœºæ™¯ï¼š</p>
<ol>
<li><code>all-in-one</code>ï¼šå†…ç½®PostgreSQLã€Memcachedç­‰ä¾èµ–æœåŠ¡ï¼Œä¸€é”®å¯åŠ¨ï¼Œé€‚åˆ<strong>æµ‹è¯•ã€PoCã€æ¼”ç¤ºæˆ–éå…³é”®å°å‹ä¸šåŠ¡</strong>ï¼Œå¯æ‰©å±•æ€§è¾ƒå·®ï¼Œ<strong>ä¸¥ç¦ç”¨äºå¤§è§„æ¨¡/æ ¸å¿ƒç”Ÿäº§ç¯å¢ƒ</strong>ã€‚</li>
<li><code>slim</code>ï¼šä»…åŒ…å«åº”ç”¨ç¨‹åºä¸åº”ç”¨æœåŠ¡å™¨ï¼Œéœ€é…åˆå¤–éƒ¨æ•°æ®åº“ã€ç¼“å­˜æœåŠ¡ä½¿ç”¨ï¼ˆå¯é€šè¿‡Docker Compose/Swarmç¼–æ’ï¼‰ï¼Œèµ„æºå ç”¨æ›´ä½ã€å¯æ‰©å±•æ€§æ›´å¼ºï¼Œæ˜¯<strong>ç”Ÿäº§ç¯å¢ƒçš„å”¯ä¸€æ¨èé€‰æ‹©</strong>ã€‚</li>
</ol>
<p>æ­¤å¤–ï¼ŒOpenProject 12.5.6åŠä»¥ä¸Šç‰ˆæœ¬æ”¯æŒ<code>AMD64ï¼ˆx86ï¼‰</code>å’Œ<code>ARM64</code>ä¸¤ç§æ¶æ„ï¼Œå…¶ä¸­BIMç‰ˆä»…æ”¯æŒ<code>AMD64</code>æ¶æ„ã€‚</p>
<h2 data-id="heading-1">ç¯å¢ƒå‡†å¤‡</h2>
<h3 data-id="heading-2">Dockerç¯å¢ƒå®‰è£…</h3>
<p>éƒ¨ç½²OpenProjectå®¹å™¨å‰ï¼Œéœ€ç¡®ä¿ç›®æ ‡æœåŠ¡å™¨å·²å®‰è£…Dockerç¯å¢ƒï¼ˆæ¨èDocker 20.10åŠä»¥ä¸Šç‰ˆæœ¬ï¼‰ã€‚æ¨èä½¿ç”¨è½©è¾•é•œåƒæä¾›çš„ä¸€é”®å®‰è£…è„šæœ¬ï¼Œè‡ªåŠ¨é…ç½®DockeråŠç›¸å…³ä¾èµ–ï¼ˆå…¼å®¹CentOSã€Ubuntuç­‰ä¸»æµå‘è¡Œç‰ˆï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">bash &lt;(wget -qO- https://xuanyuan.cloud/docker.sh)
</code></pre>
<h4 data-id="heading-3">å®‰å…¨è¯´æ˜ï¼ˆé‡è¦ï¼‰</h4>
<ol>
<li>ä¸€é”®æ‰§è¡Œè¿œç¨‹è„šæœ¬å­˜åœ¨æ½œåœ¨å®‰å…¨é£é™©ï¼Œå»ºè®®å…ˆæŸ¥çœ‹è„šæœ¬å†…å®¹ç¡®è®¤æ— æ¶æ„ä»£ç ï¼š<code>wget -O docker.sh https://xuanyuan.cloud/docker.sh &amp;&amp; cat docker.sh</code>ã€‚</li>
<li>è‹¥éœ€æ›´é«˜å®‰å…¨æ€§ï¼Œå¯é€šè¿‡å®˜æ–¹æ–‡æ¡£æ‰‹åŠ¨å®‰è£…Dockerï¼Œé¿å…æ‰§è¡ŒæœªçŸ¥æ¥æºçš„è¿œç¨‹è„šæœ¬ã€‚</li>
<li>è¯¥è„šæœ¬ä»…ç”¨äºå¿«é€Ÿéƒ¨ç½²æµ‹è¯•ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®é€šè¿‡ç³»ç»ŸåŒ…ç®¡ç†å™¨ï¼ˆyum/aptï¼‰å®‰è£…å¹¶éªŒè¯DockeråŒ…çš„SHAæ ¡éªŒå€¼ã€‚</li>
</ol>
<p>å®‰è£…å®Œæˆåï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤éªŒè¯Dockeræ˜¯å¦æ­£å¸¸è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker --version  <span class="hljs-comment"># æ£€æŸ¥Dockerç‰ˆæœ¬ï¼Œè¾“å‡ºç±»ä¼¼ Docker version 26.0.0, build 2ae903e</span>
systemctl status docker  <span class="hljs-comment"># æ£€æŸ¥DockeræœåŠ¡çŠ¶æ€ï¼Œç¡®ä¿çŠ¶æ€ä¸º active (running)</span>
</code></pre>
<p>è‹¥éœ€å¼€æœºè‡ªå¯DockeræœåŠ¡ï¼Œå¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">systemctl <span class="hljs-built_in">enable</span> docker --now
</code></pre>
<h3 data-id="heading-4">è½©è¾•é•œåƒè®¿é—®æ”¯æŒè¯´æ˜</h3>
<p>è½©è¾•é•œåƒè®¿é—®æ”¯æŒæ˜¯é¢å‘å¼€å‘è€…ä¸ç§‘ç ”ç”¨æˆ·çš„Dockeré•œåƒè®¿é—®ä¼˜åŒ–å¹³å°ï¼Œé•œåƒå†…å®¹æ¥æºäºå®˜æ–¹å…¬å…±ä»“åº“ï¼Œå¹³å°ä¸å­˜å‚¨ã€ä¸ä¿®æ”¹ã€ä¸ç”Ÿäº§ã€ä¸åˆ†å‘é•œåƒå†…å®¹ï¼Œä»…æä¾›è®¿é—®è·¯å¾„ä¼˜åŒ–ä¸æŠ€æœ¯æ”¯æŒèƒ½åŠ›ï¼Œå¯æœ‰æ•ˆæå‡<code>openproject/openproject</code>é•œåƒçš„æ‹‰å–é€Ÿåº¦ï¼Œè§£å†³æµ·å¤–é•œåƒæ‹‰å–è¶…æ—¶é—®é¢˜ã€‚</p>
<h2 data-id="heading-5">é•œåƒå‡†å¤‡</h2>
<h3 data-id="heading-6">é•œåƒæ ‡ç­¾é€‰æ‹©</h3>
<p>OpenProjecté•œåƒéµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒï¼Œæ ‡ç­¾åˆ†ä¸º<strong>éæµ®åŠ¨æ ‡ç­¾</strong>å’Œ<strong>æµ®åŠ¨æ ‡ç­¾</strong>ï¼Œæ¨èç”Ÿäº§ç¯å¢ƒä½¿ç”¨<strong>ç¨³å®šç‰ˆéæµ®åŠ¨æ ‡ç­¾</strong>ä»¥ä¿è¯ç‰ˆæœ¬ç¨³å®šæ€§å’Œæ•°æ®å…¼å®¹æ€§ï¼š</p>
<ol>
<li>éæµ®åŠ¨æ ‡ç­¾ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰ï¼š<code>X.Y.Z</code>ã€<code>X.Y.Z-slim</code>ã€<code>X.Y.Z-slim-bim</code>ï¼ˆå¦‚<code>17.0.0-slim-bim</code>ï¼‰ï¼Œå¯¹åº”å”¯ä¸€ç¨³å®šç‰ˆæœ¬ï¼Œéœ€æ‰‹åŠ¨æ›´æ–°æ ‡ç­¾ä»¥å‡çº§ç‰ˆæœ¬ï¼Œå‡çº§å‰éœ€å¤‡ä»½æ•°æ®ã€‚</li>
<li>æµ®åŠ¨æ ‡ç­¾ï¼ˆæµ‹è¯•ç¯å¢ƒä¸“ç”¨ï¼‰ï¼š<code>X.Y</code>ã€<code>X.Y-slim</code>ï¼ˆå°ç‰ˆæœ¬è‡ªåŠ¨æ›´æ–°ï¼‰ã€<code>X</code>ã€<code>X-slim</code>ï¼ˆå¤§/å°ç‰ˆæœ¬è‡ªåŠ¨æ›´æ–°ï¼‰ã€<code>dev</code>ã€<code>dev-slim</code>ï¼ˆå¤œé—´å¼€å‘ç‰ˆï¼‰ã€<code>X-rc</code>ï¼ˆå€™é€‰å‘å¸ƒç‰ˆï¼‰ï¼Œä¸ä¿è¯æ•°æ®å…¼å®¹æ€§ï¼Œå‡çº§å¯èƒ½å¯¼è‡´æœåŠ¡å¼‚å¸¸ï¼Œ<strong>ä¸¥ç¦ç”¨äºç”Ÿäº§ç¯å¢ƒ</strong>ã€‚</li>
</ol>
<h3 data-id="heading-7">æ‹‰å–OpenProjecté•œåƒ</h3>
<p>ä½¿ç”¨è½©è¾•é•œåƒè®¿é—®æ”¯æŒåŸŸåæ‹‰å–<strong>ç¨³å®šç‰ˆ</strong>OpenProjecté•œåƒï¼ˆä»¥<code>17.0.0-slim-bim</code>ä¸ºä¾‹ï¼Œæµ‹è¯•ç¯å¢ƒå¦‚éœ€<code>all-in-one</code>ç‰ˆæœ¬ï¼Œå¯ç§»é™¤<code>-slim</code>åç¼€ï¼Œå¦‚éœ€RC/devç‰ˆæœ¬ï¼Œå¯æ›¿æ¢ä¸º<code>17-rc-slim-bim</code>/<code>dev-slim-bim</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‹‰å–slimç‰ˆï¼ˆç”Ÿäº§ç¯å¢ƒå”¯ä¸€æ¨èï¼‰</span>
docker pull vipxxx.xuanyuan.run/openproject/openproject:17.0.0-slim-bim

<span class="hljs-comment"># æ‹‰å–all-in-oneç‰ˆï¼ˆä»…æµ‹è¯•/PoC/æ¼”ç¤ºä½¿ç”¨ï¼‰</span>
docker pull vipxxx.xuanyuan.run/openproject/openproject:17.0.0-bim
</code></pre>
<p>è‹¥éœ€ç›´æ¥æ‹‰å–å®˜æ–¹é•œåƒï¼Œå¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker pull openproject/openproject:17.0.0-slim
</code></pre>
<p>æ‹‰å–å®Œæˆåï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤éªŒè¯é•œåƒæ˜¯å¦æˆåŠŸä¸‹è½½ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker images | grep openproject
</code></pre>
<p>è‹¥è¾“å‡ºç±»ä¼¼ä»¥ä¸‹å†…å®¹ï¼Œè¯´æ˜é•œåƒæ‹‰å–æˆåŠŸï¼š</p>
<pre><code class="hljs language-xml" lang="xml">vipxxx.xuanyuan.run/openproject/openproject   17.0.0-slim-bim   <span class="hljs-tag">&lt;<span class="hljs-name">é•œåƒID</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">åˆ›å»ºæ—¶é—´</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">å¤§å°</span>&gt;</span>
</code></pre>
<h2 data-id="heading-8">å®¹å™¨éƒ¨ç½²</h2>
<h3 data-id="heading-9">å¿«é€Ÿå¯åŠ¨ï¼ˆAll-in-Oneå®¹å™¨ï¼Œä»…æµ‹è¯•/PoC/æ¼”ç¤ºï¼‰</h3>
<p>å¯¹äºæµ‹è¯•ã€PoCã€æ¼”ç¤ºæˆ–éå…³é”®å°å‹ä¸šåŠ¡å¿«é€Ÿä¸Šæ‰‹åœºæ™¯ï¼Œå¯ä½¿ç”¨<code>all-in-one</code>é•œåƒä¸€é”®å¯åŠ¨OpenProjectï¼Œæ— éœ€é¢å¤–é…ç½®å¤–éƒ¨ä¾èµ–ï¼Œ<strong>è¯¥æ–¹æ¡ˆä¸¥ç¦ç”¨äºæ ¸å¿ƒç”Ÿäº§ç¯å¢ƒ</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker run -td \
  --name openproject-test \
  --restart=unless-stopped \  <span class="hljs-comment"># æµ‹è¯•ç¯å¢ƒå¯é€‰ï¼Œå®¹å™¨å¼‚å¸¸è‡ªåŠ¨é‡å¯</span>
  -p 8080:80 \
  -e SECRET_KEY_BASE=$(openssl rand -hex 32) \  <span class="hljs-comment"># ä»…æµ‹è¯•ç¯å¢ƒä¸´æ—¶ç”Ÿæˆï¼Œç”Ÿäº§ç¯å¢ƒç¦æ­¢åŠ¨æ€ç”Ÿæˆ</span>
  -e OPENPROJECT_HOST__NAME=localhost:8080 \    <span class="hljs-comment"># åº”ç”¨è®¿é—®åŸŸå/ç«¯å£ï¼Œéœ€ä¸å¤–éƒ¨è®¿é—®åœ°å€ä¸€è‡´</span>
  -e OPENPROJECT_HTTPS=<span class="hljs-literal">false</span> \                  <span class="hljs-comment"># ç¦ç”¨HTTPSï¼ˆä»…æµ‹è¯•ç¯å¢ƒï¼‰</span>
  -e OPENPROJECT_DEFAULT__LANGUAGE=zh-CN \      <span class="hljs-comment"># é»˜è®¤è¯­è¨€ï¼ˆä¸­æ–‡/è‹±æ–‡ï¼šzh-CN/enï¼‰</span>
  -v openproject_test_data:/var/openproject \   <span class="hljs-comment"># å‘½åæ•°æ®å·æŒä¹…åŒ–æµ‹è¯•æ•°æ®</span>
  vipxxx.xuanyuan.run/openproject/openproject:17.0.0-bim
</code></pre>
<h4 data-id="heading-10">å‚æ•°è¯´æ˜</h4>
<ul>
<li><code>-td</code>ï¼š<code>-t</code>åˆ†é…ä¼ªç»ˆç«¯ï¼Œè§£å†³æŸäº›Ruby loggeråœ¨æ— TTYç¯å¢ƒä¸‹å†™å…¥<code>/dev/stdout</code>çš„æƒé™å¼‚å¸¸é—®é¢˜ï¼›<code>-d</code>åå°è¿è¡Œå®¹å™¨ï¼ˆå¦‚éœ€æŸ¥çœ‹å®æ—¶æ—¥å¿—ï¼Œå¯ç§»é™¤<code>-d</code>ï¼Œåœæ­¢æ—¶æŒ‰<code>CTRL-C</code>å³å¯ï¼Œ<code>-i</code>æ— å®é™…æ„ä¹‰å·²ç§»é™¤ï¼‰ã€‚</li>
<li><code>--name openproject-test</code>ï¼šæŒ‡å®šå®¹å™¨åç§°ï¼Œä¾¿äºåç»­ç®¡ç†ã€‚</li>
<li><code>--restart=unless-stopped</code>ï¼šå®¹å™¨å¼‚å¸¸é€€å‡ºæˆ–æœåŠ¡å™¨é‡å¯åè‡ªåŠ¨é‡å¯ï¼Œæµ‹è¯•ç¯å¢ƒå¯é€‰ï¼Œç”Ÿäº§ç¯å¢ƒéœ€é…ç½®ä¸º<code>always</code>ã€‚</li>
<li><code>-p 8080:80</code>ï¼šå°†å®¹å™¨å†…80ç«¯å£æ˜ å°„åˆ°ä¸»æœº8080ç«¯å£ã€‚</li>
<li><code>SECRET_KEY_BASE</code>ï¼šRailsåº”ç”¨æ ¸å¿ƒåŠ å¯†å¯†é’¥ï¼Œ<strong>æ‰€æœ‰å®ä¾‹å¿…é¡»ä¿æŒä¸€è‡´</strong>ï¼Œæµ‹è¯•ç¯å¢ƒå¯ä¸´æ—¶ç”Ÿæˆï¼Œ<strong>ä»»ä½•ç”Ÿäº§ç¯å¢ƒç¦æ­¢åœ¨<code>docker run</code>ä¸­åŠ¨æ€ç”Ÿæˆè¯¥å¯†é’¥</strong>ï¼Œå¦åˆ™å®¹å™¨é‡å»º/æ‰©å®¹åä¼šå¯¼è‡´ç”¨æˆ·Sessionå…¨éƒ¨å¤±æ•ˆã€Cookieè§£å¯†å¤±è´¥ï¼Œç”Ÿäº§ç¯å¢ƒéœ€é€šè¿‡Docker Secret/.envæ–‡ä»¶é›†ä¸­ç®¡ç†å¹¶å›ºå®šå€¼ã€‚</li>
<li><code>OPENPROJECT_HOST__NAME</code>ï¼šåº”ç”¨å¯¹å¤–è®¿é—®çš„ä¸»æœºåä¸ç«¯å£ï¼Œç”¨äºç”Ÿæˆé‚®ä»¶é“¾æ¥ã€è¡¨å•åœ°å€ï¼Œéœ€ä¸ç”¨æˆ·æµè§ˆå™¨è®¿é—®åœ°å€ä¸€è‡´ï¼Œé¿å…HOSTå¤´æ³¨å…¥æ¼æ´ï¼›*<em>ä¸è¦å¡«å†™0.0.0.0ã€<em>æˆ–çº¯å†…ç½‘IPï¼Œå¦åˆ™ä¼šå¯¼è‡´ç™»å½•è·³è½¬ã€é‚®ä»¶é“¾æ¥ã€CSRFæ ¡éªŒå¼‚å¸¸</em></em>ã€‚</li>
<li><code>OPENPROJECT_HTTPS</code>ï¼šæ˜¯å¦å¯ç”¨HTTPSæ¨¡å¼ï¼Œç”Ÿäº§ç¯å¢ƒéœ€è®¾ä¸º<code>true</code>ï¼Œå¹¶é…åˆSSLè¯ä¹¦é…ç½®ã€‚</li>
<li>OpenProjectå®˜æ–¹é•œåƒå·²å†…ç½®å¥åº·æ£€æŸ¥ï¼Œæ— éœ€åœ¨<code>docker run</code>å‘½ä»¤ä¸­é¢å¤–é…ç½®ï¼Œè‹¥éœ€è‡ªå®šä¹‰å¥åº·æ£€æŸ¥ï¼Œå¯ä½¿ç”¨<code>--health-cmd</code>ç­‰ç³»åˆ—å‚æ•°ï¼ˆç¤ºä¾‹è§æ–‡æœ«è¡¥å……ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-11">å¯åŠ¨éªŒè¯</h4>
<p>å®¹å™¨é¦–æ¬¡å¯åŠ¨éœ€åˆå§‹åŒ–æ•°æ®åº“ä¸é™æ€èµ„æºï¼Œè€—æ—¶çº¦3-5åˆ†é’Ÿï¼Œå¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å¯åŠ¨æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker logs -f openproject-test
</code></pre>
<p>å½“æ—¥å¿—ä¸­å‡ºç°<code>Admin user created: login: admin, password: admin</code>ï¼ˆæˆ–éšæœºå¯†ç ï¼‰æ—¶ï¼Œè¯´æ˜å¯åŠ¨æˆåŠŸï¼Œå¯é€šè¿‡æµè§ˆå™¨è®¿é—®<code>http://&lt;æœåŠ¡å™¨IP&gt;:8080</code>è¿›å…¥OpenProjectç™»å½•é¡µé¢ã€‚</p>
<h3 data-id="heading-12">è¿›é˜¶éƒ¨ç½²ï¼ˆè‡ªå®šä¹‰é…ç½®ï¼Œç”Ÿäº§å‰æœŸå‡†å¤‡ï¼Œä»…ä½¿ç”¨slimç‰ˆï¼‰</h3>
<p>å¯¹äºéœ€è¦è‡ªå®šä¹‰æ•°æ®åº“ã€é‚®ä»¶æœåŠ¡ã€å­ç›®å½•éƒ¨ç½²çš„åœºæ™¯ï¼Œ<strong>ä»…ä½¿ç”¨slimç‰ˆé•œåƒ</strong>ï¼ˆç”Ÿäº§ç¯å¢ƒå”¯ä¸€æ¨èï¼‰ï¼Œéœ€é…åˆå¤–éƒ¨PostgreSQLæ•°æ®åº“ï¼Œå¹¶é…ç½®SMTPé‚®ä»¶æœåŠ¡ä¸å­ç›®å½•è®¿é—®ï¼ŒåŒæ—¶è¡¥å……ç”Ÿäº§å¿…å¤‡çš„é‡å¯ç­–ç•¥ä¸å¥åº·æ£€æŸ¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker run -d \
  --name openproject-advanced \
  --restart=always \  <span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒå¿…å¤‡ï¼Œå®¹å™¨å¼‚å¸¸æˆ–æœåŠ¡å™¨é‡å¯åè‡ªåŠ¨é‡å¯</span>
  -p 8080:80 \
  --cpus=2 \  <span class="hljs-comment"># é™åˆ¶CPUæ ¸å¿ƒæ•°ï¼Œé¿å…èµ„æºæŠ¢å </span>
  --memory=4g \  <span class="hljs-comment"># é™åˆ¶å†…å­˜ä½¿ç”¨</span>
  --memory-swap=6g \  <span class="hljs-comment"># é™åˆ¶å†…å­˜+äº¤æ¢ç©ºé—´ï¼ˆcgroup v2ç¯å¢ƒä¸­å¯èƒ½æ— æ•ˆï¼Œä»…ä½œå‚è€ƒï¼‰</span>
  -e SECRET_KEY_BASE=your-fixed-secret-key-here \  <span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒå›ºå®šå€¼ï¼Œç¦æ­¢åŠ¨æ€ç”Ÿæˆï¼Œåç»­æ›¿æ¢ä¸ºDocker Secret/.env</span>
  -e OPENPROJECT_HOST__NAME=openproject.example.com \
  -e OPENPROJECT_HTTPS=<span class="hljs-literal">true</span> \
  -e OPENPROJECT_RAILS__RELATIVE__URL__ROOT=/openproject \  <span class="hljs-comment"># å­ç›®å½•éƒ¨ç½²ï¼Œè®¿é—®è·¯å¾„ä¸º /openproject</span>
  <span class="hljs-comment"># å¤–éƒ¨PostgreSQLæ•°æ®åº“é…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨Docker Secretå­˜å‚¨å‡­æ®ï¼Œé¿å…æ˜æ–‡ï¼‰</span>
  -e DATABASE_URL=postgresql://openproject_user:openproject_password@db-host:5432/openproject \
  <span class="hljs-comment"># SMTPé‚®ä»¶æœåŠ¡é…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨Docker Secretå­˜å‚¨å‡­æ®ï¼Œé¿å…æ˜æ–‡ï¼‰</span>
  -e EMAIL_DELIVERY_METHOD=smtp \
  -e SMTP_ADDRESS=smtp.example.com \
  -e SMTP_PORT=587 \
  -e SMTP_USER_NAME=notify@example.com \
  -e SMTP_PASSWORD=your-smtp-password \
  -e SMTP_AUTHENTICATION=login \
  -e SMTP_ENABLE_STARTTLS_AUTO=<span class="hljs-literal">true</span> \
  <span class="hljs-comment"># æ•°æ®æŒä¹…åŒ–ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…å¤‡ï¼‰</span>
  -v openproject_data:/var/lib/openproject \
  -v openproject_config:/etc/openproject \
  -v openproject_logs:/var/log/openproject \
  vipxxx.xuanyuan.run/openproject/openproject:17.0.0-slim-bim
</code></pre>
<h4 data-id="heading-13">å…³é”®æ³¨æ„ç‚¹</h4>
<ol>
<li>å¤–éƒ¨æ•°æ®åº“éœ€æå‰åˆ›å»º<code>openproject</code>æ•°æ®åº“ä¸å¯¹åº”æƒé™ç”¨æˆ·ï¼ŒPostgreSQLç‰ˆæœ¬éœ€<strong>13â€“16ï¼ˆç”Ÿäº§æ¨è14/15ï¼‰</strong>ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®å•ç‹¬éƒ¨ç½²æ•°æ®åº“é›†ç¾¤ï¼Œå®ç°é«˜å¯ç”¨ã€‚</li>
<li>OpenProjecté•œåƒé»˜è®¤ä»¥<strong>érootç”¨æˆ·</strong>è¿è¡Œï¼ˆç”¨æˆ·å<code>openproject</code>ï¼ŒUID/GIDå›ºå®šï¼‰ï¼Œæ— éœ€æ·»åŠ <code>--user root</code>å‚æ•°ï¼Œå¼ºè¡Œä½¿ç”¨rootç”¨æˆ·ä¼šå¸¦æ¥å®‰å…¨é£é™©ï¼Œä¸”å¯èƒ½å¯¼è‡´å®¹å™¨å†…æ–‡ä»¶æƒé™é”™ä¹±ã€‚</li>
<li>å­ç›®å½•éƒ¨ç½²æ—¶ï¼Œåç»­åå‘ä»£ç†é…ç½®éœ€ä¸<code>OPENPROJECT_RAILS__RELATIVE__URL__ROOT</code>ä¿æŒä¸€è‡´ã€‚</li>
<li>é‚®ä»¶æœåŠ¡é…ç½®å®Œæˆåï¼Œå¯åœ¨OpenProjectç³»ç»Ÿè®¾ç½®ä¸­æµ‹è¯•é‚®ä»¶å‘é€åŠŸèƒ½ï¼ŒéªŒè¯é…ç½®æœ‰æ•ˆæ€§ã€‚</li>
<li>ç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒSMTP/æ•°æ®åº“å‡­æ®ä¸¥ç¦æ˜æ–‡å†™å…¥å‘½ä»¤è¡Œï¼Œéœ€é€šè¿‡<code>Docker Secret</code>æˆ–<code>.env</code>æ–‡ä»¶ç®¡ç†ï¼Œé¿å…æ³„éœ²ã€‚</li>
<li>åœ¨**cgroup v2ç¯å¢ƒï¼ˆUbuntu 22.04+/Debian 12+ï¼‰**ä¸­ï¼Œ<code>--memory-swap</code>å‚æ•°å¯èƒ½è¢«å¿½ç•¥ï¼Œç”Ÿäº§ç¯å¢ƒèµ„æºé™åˆ¶è¯·ä»¥<code>--memory</code>ä¸ºä¸»ï¼Œå¦‚éœ€ç²¾å‡†æ§åˆ¶äº¤æ¢ç©ºé—´ï¼Œéœ€é¢å¤–é…ç½®ç³»ç»Ÿcgroupå‚æ•°å¹¶å¯ç”¨<code>swapaccount=1</code>ã€‚</li>
<li>OpenProjecté•œåƒå†…ç½®å¥åº·æ£€æŸ¥ï¼Œæ— éœ€é¢å¤–é…ç½®ï¼Œè‹¥éœ€è‡ªå®šä¹‰å¥åº·æ£€æŸ¥ï¼Œå¯æ·»åŠ å¦‚ä¸‹å‚æ•°ï¼ˆç¤ºä¾‹ï¼Œå…¼å®¹æ›´å¤šç‰ˆæœ¬ï¼Œé¿å…<code>/health</code>è·¯å¾„404é—®é¢˜ï¼‰ï¼š
<pre><code class="hljs language-bash" lang="bash">--health-cmd=<span class="hljs-string">"curl -f http://localhost/ || exit 1"</span> \
--health-interval=30s \
--health-timeout=5s \
--health-retries=3 \
--health-start-period=300s
</code></pre>
</li>
</ol>
<hr/>
<h4 data-id="heading-14">é•œåƒæ•°æ®è·¯å¾„å¯¹ç…§è¡¨ï¼ˆé¿å…æŒ‚è½½é”™è¯¯ï¼‰</h4>























<table><thead><tr><th>é•œåƒç±»å‹</th><th>æ ¸å¿ƒæ•°æ®æŒä¹…åŒ–è·¯å¾„</th><th>é…ç½®æ–‡ä»¶è·¯å¾„</th><th>æ—¥å¿—æ–‡ä»¶è·¯å¾„</th></tr></thead><tbody><tr><td>all-in-one</td><td><code>/var/openproject</code>ï¼ˆåŒ…å«æ‰€æœ‰æ•°æ®ï¼‰</td><td>å†…ç½®åœ¨æ ¸å¿ƒè·¯å¾„ä¸­</td><td>å†…ç½®åœ¨æ ¸å¿ƒè·¯å¾„ä¸­</td></tr><tr><td>slimï¼ˆç”Ÿäº§æ¨èï¼‰</td><td><code>/var/lib/openproject</code>ï¼ˆåº”ç”¨æ•°æ®ï¼‰</td><td><code>/etc/openproject</code></td><td><code>/var/log/openproject</code></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-15">ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–é…ç½®</h2>
<h3 data-id="heading-16">æ•°æ®æŒä¹…åŒ–ï¼ˆæ ¸å¿ƒä¿éšœï¼Œé¿å…æ•°æ®ä¸¢å¤±ï¼Œä»…ä½¿ç”¨slimç‰ˆï¼‰</h3>
<p>ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¿…é¡»ç¡®ä¿OpenProjectçš„æ•°æ®ï¼ˆé…ç½®ã€æ—¥å¿—ã€é™æ€èµ„æºï¼‰æŒä¹…åŒ–å­˜å‚¨ï¼Œé¿å…å®¹å™¨é‡å¯ã€åˆ é™¤å¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œ<strong>æ‰€æœ‰ç”Ÿäº§é…ç½®å‡åŸºäºslimç‰ˆé•œåƒï¼Œä¸æ”¯æŒall-in-oneç‰ˆ</strong>ã€‚æ¨èä¸‰ç§æŒä¹…åŒ–æ–¹æ¡ˆï¼Œä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼š</p>
<h4 data-id="heading-17">æ–¹æ¡ˆ1ï¼šå¯¹è±¡å­˜å‚¨ï¼ˆS3/MinIOï¼Œé›†ç¾¤éƒ¨ç½²å¼ºçƒˆæ¨èï¼‰</h4>
<p>OpenProjectæ”¯æŒå°†é™„ä»¶ã€å¯¼å‡ºæ–‡ä»¶ç­‰å­˜å‚¨åˆ°S3å…¼å®¹å¯¹è±¡å­˜å‚¨ï¼Œé¿å…æœ¬åœ°æ–‡ä»¶å­˜å‚¨çš„å¤šå‰¯æœ¬æ•°æ®é”™ä¹±é—®é¢˜ï¼Œ<strong>æ˜¯é›†ç¾¤éƒ¨ç½²çš„å”¯ä¸€æ¨èæ–¹æ¡ˆ</strong>ï¼Œæ”¯æŒé«˜å¹¶å‘ã€é«˜å¯ç”¨ï¼Œæ— æ–‡ä»¶è¦†ç›–/ä¸¢å¤±é£é™©ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker run -d \
  --name openproject-prod \
  --restart=always \
  -p 8080:80 \
  --cpus=4 \
  --memory=8g \
  --memory-swap=12g \  <span class="hljs-comment"># cgroup v2ç¯å¢ƒä¸­å¯èƒ½æ— æ•ˆï¼Œä»…ä½œå‚è€ƒ</span>
  -e SECRET_KEY_BASE=your-fixed-secret-key-here \  <span class="hljs-comment"># é›†ç¾¤ç¯å¢ƒåç»­æ›¿æ¢ä¸ºDocker Secretï¼Œç¦æ­¢åŠ¨æ€ç”Ÿæˆ</span>
  -e OPENPROJECT_HOST__NAME=openproject.example.com \
  -e OPENPROJECT_HTTPS=<span class="hljs-literal">true</span> \
  <span class="hljs-comment"># å¯¹è±¡å­˜å‚¨é…ç½®ï¼ˆS3/MinIOï¼Œé›†ç¾¤éƒ¨ç½²å¿…å¤‡ï¼‰</span>
  -e OPENPROJECT_ATTACHMENTS__STORAGE=<span class="hljs-string">"fog"</span> \
  -e OPENPROJECT_FOG_DIRECTORY=<span class="hljs-string">"openproject-attachments"</span> \
  -e OPENPROJECT_FOG_CREDENTIALS_PROVIDER=<span class="hljs-string">"AWS"</span> \
  -e OPENPROJECT_FOG_CREDENTIALS_AWS__ACCESS__KEY__ID=<span class="hljs-string">"your-access-key"</span> \
  -e OPENPROJECT_FOG_CREDENTIALS_AWS__SECRET__ACCESS__KEY=<span class="hljs-string">"your-secret-key"</span> \
  -e OPENPROJECT_FOG_CREDENTIALS_REGION=<span class="hljs-string">"cn-north-1"</span> \
  -e OPENPROJECT_FOG_CREDENTIALS_ENDPOINT=<span class="hljs-string">"https://minio.example.com"</span> \  <span class="hljs-comment"># MinIOéœ€æ·»åŠ ç«¯ç‚¹é…ç½®</span>
  <span class="hljs-comment"># åŸºç¡€æ•°æ®æŒä¹…åŒ–ï¼ˆé…ç½®ã€æ—¥å¿—ï¼‰</span>
  -v openproject_prod_config:/etc/openproject \
  -v openproject_prod_logs:/var/log/openproject \
  vipxxx.xuanyuan.run/openproject/openproject:17.0.0-slim-bim
</code></pre>
<h4 data-id="heading-18">æ–¹æ¡ˆ2ï¼šDockerå‘½åæ•°æ®å·ï¼ˆå•èŠ‚ç‚¹ç”Ÿäº§ç¯å¢ƒæ¨èï¼Œæ˜“äºç®¡ç†ï¼‰</h4>
<p>Dockeræ•°æ®å·ç”±Dockerç»Ÿä¸€ç®¡ç†ï¼Œæƒé™é…ç½®è‡ªåŠ¨ä¼˜åŒ–ï¼Œé€‚åˆ<strong>å•èŠ‚ç‚¹ç”Ÿäº§ç¯å¢ƒ</strong>ï¼Œä¸æ”¯æŒé›†ç¾¤å¤šå‰¯æœ¬ï¼ˆå¤šå‰¯æœ¬ä¼šå¯¼è‡´æ•°æ®é”™ä¹±ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æå‰åˆ›å»ºæ‰€éœ€æ•°æ®å·ï¼ˆå•èŠ‚ç‚¹ç”Ÿäº§ç¯å¢ƒï¼‰</span>
docker volume create openproject_prod_config
docker volume create openproject_prod_logs
docker volume create openproject_prod_assets  <span class="hljs-comment"># éå¿…éœ€ï¼Œä»…åœ¨æœªå¯ç”¨S3å¯¹è±¡å­˜å‚¨æ—¶æœ‰æ•ˆï¼Œæ–°ç‰ˆslimå¤šæ•°é™æ€èµ„æºèµ°ç¼–è¯‘+å¯¹è±¡å­˜å‚¨</span>

<span class="hljs-comment"># å¯åŠ¨ç”Ÿäº§ç¯å¢ƒå®¹å™¨ï¼ˆslimç‰ˆï¼Œå•èŠ‚ç‚¹å”¯ä¸€æ¨èï¼‰</span>
docker run -d \
  --name openproject-prod \
  --restart=always \
  -p 80:80 -p 443:443 \
  --cpus=4 \
  --memory=8g \
  --memory-swap=12g \  <span class="hljs-comment"># cgroup v2ç¯å¢ƒä¸­å¯èƒ½æ— æ•ˆï¼Œä»…ä½œå‚è€ƒ</span>
  -e SECRET_KEY_BASE=your-fixed-secret-key-here \  <span class="hljs-comment"># å›ºå®šå€¼ï¼Œç¦æ­¢åŠ¨æ€ç”Ÿæˆ</span>
  -e OPENPROJECT_HOST__NAME=openproject.example.com \
  -e OPENPROJECT_HTTPS=<span class="hljs-literal">true</span> \
  <span class="hljs-comment"># å•èŠ‚ç‚¹æœ¬åœ°é™æ€èµ„æºå­˜å‚¨ï¼ˆä»…å•å‰¯æœ¬æ”¯æŒï¼Œå¤šå‰¯æœ¬ç¦ç”¨ï¼Œè¯¥æŒ‚è½½éå¿…éœ€å¯çœç•¥ï¼‰</span>
  -v openproject_prod_assets:/var/openproject/assets \
  <span class="hljs-comment"># åŸºç¡€æ•°æ®æŒä¹…åŒ–</span>
  -v openproject_prod_config:/etc/openproject \
  -v openproject_prod_logs:/var/log/openproject \
  vipxxx.xuanyuan.run/openproject/openproject:17.0.0-slim-bim
</code></pre>
<h4 data-id="heading-19">æ–¹æ¡ˆ3ï¼šæœ¬åœ°ç›®å½•ç»‘å®š/åˆ†å¸ƒå¼å­˜å‚¨ï¼ˆç‰¹æ®Šåœºæ™¯ï¼Œéœ€è°¨æ…ä½¿ç”¨ï¼‰</h4>
<ol>
<li>
<p>æœ¬åœ°ç›®å½•ç»‘å®šï¼šæ‰‹åŠ¨åˆ›å»ºä¸»æœºç›®å½•ï¼Œå°†å…¶æŒ‚è½½åˆ°å®¹å™¨å†…ï¼Œé€‚åˆéœ€è¦æ‰‹åŠ¨å¤‡ä»½ã€ä¿®æ”¹é…ç½®çš„<strong>å•èŠ‚ç‚¹ç‰¹æ®Šåœºæ™¯</strong>ï¼Œå¤šå‰¯æœ¬ç¦ç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æå‰åˆ›å»ºä¸»æœºç›®å½•ï¼ˆå•èŠ‚ç‚¹ç”Ÿäº§ç¯å¢ƒï¼‰</span>
sudo <span class="hljs-built_in">mkdir</span> -p /var/openproject/prod/{config,logs,assets}
sudo <span class="hljs-built_in">chown</span> -R 1000:1000 /var/openproject/prod  <span class="hljs-comment"># é€‚é…å®¹å™¨érootç”¨æˆ·ï¼Œé¿å…å†™å…¥å¤±è´¥</span>
sudo <span class="hljs-built_in">chmod</span> -R 775 /var/openproject/prod

<span class="hljs-comment"># å¯åŠ¨ç”Ÿäº§ç¯å¢ƒå®¹å™¨ï¼ˆslimç‰ˆï¼Œå•èŠ‚ç‚¹ï¼‰</span>
docker run -d \
  --name openproject-prod \
  --restart=always \
  -p 80:80 -p 443:443 \
  --cpus=4 \
  --memory=8g \
  --memory-swap=12g \  <span class="hljs-comment"># cgroup v2ç¯å¢ƒä¸­å¯èƒ½æ— æ•ˆï¼Œä»…ä½œå‚è€ƒ</span>
  -e SECRET_KEY_BASE=your-fixed-secret-key-here \  <span class="hljs-comment"># å›ºå®šå€¼ï¼Œç¦æ­¢åŠ¨æ€ç”Ÿæˆ</span>
  -e OPENPROJECT_HOST__NAME=openproject.example.com \
  -e OPENPROJECT_HTTPS=<span class="hljs-literal">true</span> \
  -v /var/openproject/prod/config:/etc/openproject \
  -v /var/openproject/prod/logs:/var/log/openproject \
  -v /var/openproject/prod/assets:/var/openproject/assets \  <span class="hljs-comment"># éå¿…éœ€ï¼Œå¯çœç•¥</span>
  vipxxx.xuanyuan.run/openproject/openproject:17.0.0-slim-bim
</code></pre>
</li>
<li>
<p>åˆ†å¸ƒå¼å­˜å‚¨ï¼ˆCephFS/GlusterFSï¼Œé›†ç¾¤åœºæ™¯å¤‡é€‰ï¼‰ï¼šä»…é€‚åˆé›†ç¾¤éƒ¨ç½²ï¼Œéœ€ä½¿ç”¨<strong>POSIXè¯­ä¹‰å¼ºä¸€è‡´å­˜å‚¨</strong>ï¼ŒNFSåœ¨é«˜å¹¶å‘å†™åœºæ™¯å­˜åœ¨æ•°æ®ä¸ä¸€è‡´é£é™©ï¼ˆæ–‡ä»¶è¦†ç›–ã€ä¸¢å¤±ï¼‰ï¼Œ<strong>ä¸¥ç¦ç”¨äºé«˜å¹¶å‘ç”Ÿäº§é›†ç¾¤</strong>ï¼Œä»…ä½œä¸ºä½å¹¶å‘åœºæ™¯çš„ä¸´æ—¶æ–¹æ¡ˆã€‚</p>
</li>
</ol>
<h3 data-id="heading-20">HTTPSé…ç½®ï¼ˆä¿éšœæ•°æ®ä¼ è¾“å®‰å…¨ï¼Œç”Ÿäº§ç¯å¢ƒå¿…é€‰ï¼Œä»…ä½¿ç”¨slimç‰ˆï¼‰</h3>
<p>OpenProjectç”Ÿäº§ç¯å¢ƒå¿…é¡»å¯ç”¨HTTPSï¼Œé¿å…æ•°æ®æ˜æ–‡ä¼ è¾“ï¼Œæ¨èä½¿ç”¨**åå‘ä»£ç†ï¼ˆNginx/Traefikï¼‰**å¤„ç†SSLç»ˆç»“ï¼ˆç®€åŒ–å®¹å™¨é…ç½®ï¼Œä¾¿äºè¯ä¹¦ç®¡ç†ï¼‰ï¼Œä¹Ÿå¯ç›´æ¥åœ¨å®¹å™¨å†…é…ç½®HTTPSï¼ˆä¸æ¨èï¼‰ã€‚</p>
<h4 data-id="heading-21">æ–¹æ¡ˆ1ï¼šNginxåå‘ä»£ç†ï¼ˆæ¨èï¼Œæ”¯æŒæ ¹åŸŸå/å­ç›®å½•ï¼Œé€‚é…å•èŠ‚ç‚¹/é›†ç¾¤ï¼‰</h4>
<h5 data-id="heading-22">åœºæ™¯1ï¼šæ ¹åŸŸåéƒ¨ç½² <code>https://openproject.example.com</code></h5>
<ol>
<li>
<p>æå‰å‡†å¤‡SSLè¯ä¹¦ï¼ˆå…è´¹è¯ä¹¦å¯é€šè¿‡Let's Encryptè·å–ï¼‰ï¼Œå­˜æ”¾äº<code>/etc/ssl/openproject/</code>ç›®å½•ï¼ˆ<code>cert.pem</code>ä¸ºè¯ä¹¦æ–‡ä»¶ï¼Œ<code>key.pem</code>ä¸ºç§é’¥æ–‡ä»¶ï¼‰ã€‚</p>
</li>
<li>
<p>åˆ›å»ºNginxé…ç½®æ–‡ä»¶<code>/etc/nginx/conf.d/openproject.conf</code>ï¼š</p>
<pre><code class="hljs language-nginx" lang="nginx"># é‡å®šå‘HTTPåˆ°HTTPS
server {
    listen 80;
    server_name openproject.example.com;
    return 301 https://$host$request_uri;
}

# HTTPSæœåŠ¡é…ç½®
server {
    listen 443 ssl;
    server_name openproject.example.com;

    # SSLè¯ä¹¦é…ç½®
    ssl_certificate /etc/ssl/openproject/cert.pem;
    ssl_certificate_key /etc/ssl/openproject/key.pem;
    # SSLä¼˜åŒ–é…ç½®
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384;
    ssl_prefer_server_ciphers on;
    ssl_session_cache shared:SSL:10m;

    # åå‘ä»£ç†é…ç½®ï¼ˆé€‚é…å•èŠ‚ç‚¹/é›†ç¾¤OpenProject WebæœåŠ¡ï¼‰
    location / {
        proxy_pass http://127.0.0.1:8080;  # å•èŠ‚ç‚¹ï¼šå¯¹åº”å®¹å™¨æ˜ å°„ç«¯å£ï¼›é›†ç¾¤ï¼šå¯¹åº”Traefik/é›†ç¾¤å†…ç½‘åœ°å€
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto https;  # å‘ŠçŸ¥OpenProjectä½¿ç”¨HTTPSåè®®ï¼Œé¿å…é‡å®šå‘å¾ªç¯
    }
}
</code></pre>
</li>
<li>
<p>éªŒè¯Nginxé…ç½®å¹¶é‡å¯æœåŠ¡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">nginx -t  <span class="hljs-comment"># éªŒè¯é…ç½®è¯­æ³•æ­£ç¡®æ€§</span>
systemctl restart nginx
</code></pre>
</li>
</ol>
<h5 data-id="heading-23">åœºæ™¯2ï¼šå­ç›®å½•éƒ¨ç½² <code>https://example.com/openproject</code></h5>
<ol>
<li>
<p>å®¹å™¨å¯åŠ¨æ—¶å·²é…ç½®<code>OPENPROJECT_RAILS__RELATIVE__URL__ROOT=/openproject</code>ï¼Œåˆ›å»ºNginxé…ç½®æ–‡ä»¶<code>/etc/nginx/conf.d/openproject.conf</code>ï¼š</p>
<pre><code class="hljs language-nginx" lang="nginx"># é‡å®šå‘HTTPå­ç›®å½•åˆ°HTTPS
server {
    listen 80;
    server_name example.com;
    location /openproject {
        return 301 https://$host$request_uri;
    }
}

# HTTPSæœåŠ¡é…ç½®
server {
    listen 443 ssl;
    server_name example.com;

    # SSLè¯ä¹¦é…ç½®
    ssl_certificate /etc/ssl/openproject/cert.pem;
    ssl_certificate_key /etc/ssl/openproject/key.pem;
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512;
    ssl_prefer_server_ciphers on;
    ssl_session_cache shared:SSL:10m;

    # å­ç›®å½•åå‘ä»£ç†é…ç½®
    location /openproject {
        proxy_pass http://127.0.0.1:8080/openproject;  # ä¸å®¹å™¨å­ç›®å½•é…ç½®ä¿æŒä¸€è‡´
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto https;
        proxy_redirect off;
    }
}
</code></pre>
</li>
<li>
<p>éªŒè¯é…ç½®å¹¶é‡å¯Nginxï¼š</p>
<pre><code class="hljs language-bash" lang="bash">nginx -t
systemctl restart nginx
</code></pre>
</li>
</ol>
<h4 data-id="heading-24">æ–¹æ¡ˆ2ï¼šå®¹å™¨å†…ç›´æ¥é…ç½®HTTPSï¼ˆä¸æ¨èï¼Œè¯ä¹¦ç®¡ç†ç¹çï¼‰</h4>
<p>å¦‚éœ€ç›´æ¥åœ¨å®¹å™¨å†…å¯ç”¨HTTPSï¼Œå¯å°†SSLè¯ä¹¦æŒ‚è½½åˆ°å®¹å™¨å†…ï¼Œå¹¶é…ç½®ç›¸å…³ç¯å¢ƒå˜é‡ï¼ˆä¸æ¨èï¼Œè¯ä¹¦ç®¡ç†ç¹çï¼Œä¸åˆ©äºæ‰¹é‡æ›´æ–°ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker run -d \
  --name openproject-https \
  --restart=always \
  -p 443:443 \
  -e SECRET_KEY_BASE=your-fixed-secret-key-here \  <span class="hljs-comment"># å›ºå®šå€¼ï¼Œç¦æ­¢åŠ¨æ€ç”Ÿæˆ</span>
  -e OPENPROJECT_HOST__NAME=openproject.example.com \
  -e OPENPROJECT_HTTPS=<span class="hljs-literal">true</span> \
  -e OPENPROJECT_SSL__CERTIFICATE=/etc/ssl/cert.pem \
  -e OPENPROJECT_SSL__KEY=/etc/ssl/key.pem \
  -v /etc/ssl/openproject/cert.pem:/etc/ssl/cert.pem \
  -v /etc/ssl/openproject/key.pem:/etc/ssl/key.pem \
  -v openproject_prod_config:/etc/openproject \
  vipxxx.xuanyuan.run/openproject/openproject:17.0.0-slim-bim
</code></pre>
<h3 data-id="heading-25">å®šæœŸå¤‡ä»½ï¼ˆé˜²æ­¢æ•°æ®ä¸¢å¤±ï¼Œç”Ÿäº§ç¯å¢ƒå¿…é…ï¼Œä»…ä½¿ç”¨slimç‰ˆï¼‰</h3>
<p>é…ç½®å®šæœŸå¤‡ä»½OpenProjectæ•°æ®ï¼Œé¿å…ç¡¬ä»¶æ•…éšœã€è¯¯æ“ä½œå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œä»¥ä¸‹æä¾›ä¸¤ç§å¤‡ä»½æ–¹æ¡ˆï¼Œé€‚é…ä¸åŒæŒä¹…åŒ–æ–¹å¼ï¼š</p>
<h4 data-id="heading-26">æ–¹æ¡ˆ1ï¼šå¯¹è±¡å­˜å‚¨+é…ç½®/æ—¥å¿—å¤‡ä»½ï¼ˆé›†ç¾¤ç”Ÿäº§ç¯å¢ƒæ¨èï¼‰</h4>
<p>å¯¹è±¡å­˜å‚¨ï¼ˆS3/MinIOï¼‰è‡ªå¸¦æ•°æ®å†—ä½™ï¼Œåªéœ€å¤‡ä»½OpenProjecté…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºå¤‡ä»½è„šæœ¬<code>/var/backups/openproject/backup_openproject.sh</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># OpenProjectï¼ˆå¯¹è±¡å­˜å‚¨ç‰ˆï¼‰å¤‡ä»½è„šæœ¬ï¼ˆé›†ç¾¤ç”Ÿäº§ç¯å¢ƒæ¨èï¼‰</span>
BACKUP_DIR=<span class="hljs-string">"/var/backups/openproject"</span>
TIMESTAMP=$(<span class="hljs-built_in">date</span> +%Y%m%d_%H%M%S)
CONFIG_VOLUME=<span class="hljs-string">"openproject_prod_config"</span>  <span class="hljs-comment"># é…ç½®æ•°æ®å·</span>
LOGS_VOLUME=<span class="hljs-string">"openproject_prod_logs"</span>      <span class="hljs-comment"># æ—¥å¿—æ•°æ®å·ï¼ˆå¯é€‰å¤‡ä»½ï¼‰</span>

<span class="hljs-comment"># åˆ›å»ºå¤‡ä»½ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$BACKUP_DIR</span>

<span class="hljs-comment"># å¤‡ä»½é…ç½®æ•°æ®å·</span>
docker run --<span class="hljs-built_in">rm</span> -v <span class="hljs-variable">$CONFIG_VOLUME</span>:/source -v <span class="hljs-variable">$BACKUP_DIR</span>:/backup alpine \
  tar -czf /backup/<span class="hljs-variable">${CONFIG_VOLUME}</span>_<span class="hljs-variable">${TIMESTAMP}</span>.tar.gz -C /source .
<span class="hljs-built_in">echo</span> <span class="hljs-string">"é…ç½®æ•°æ®å· <span class="hljs-variable">$CONFIG_VOLUME</span> å¤‡ä»½å®Œæˆï¼š<span class="hljs-variable">${BACKUP_DIR}</span>/<span class="hljs-variable">${CONFIG_VOLUME}</span>_<span class="hljs-variable">${TIMESTAMP}</span>.tar.gz"</span>

<span class="hljs-comment"># å¯é€‰ï¼šå¤‡ä»½æ—¥å¿—æ•°æ®å·</span>
docker run --<span class="hljs-built_in">rm</span> -v <span class="hljs-variable">$LOGS_VOLUME</span>:/source -v <span class="hljs-variable">$BACKUP_DIR</span>:/backup alpine \
  tar -czf /backup/<span class="hljs-variable">${LOGS_VOLUME}</span>_<span class="hljs-variable">${TIMESTAMP}</span>.tar.gz -C /source .
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ—¥å¿—æ•°æ®å· <span class="hljs-variable">$LOGS_VOLUME</span> å¤‡ä»½å®Œæˆï¼š<span class="hljs-variable">${BACKUP_DIR}</span>/<span class="hljs-variable">${LOGS_VOLUME}</span>_<span class="hljs-variable">${TIMESTAMP}</span>.tar.gz"</span>

<span class="hljs-comment"># ä¿ç•™æœ€è¿‘30å¤©å¤‡ä»½ï¼Œåˆ é™¤è¿‡æœŸå¤‡ä»½</span>
find <span class="hljs-variable">$BACKUP_DIR</span> -name <span class="hljs-string">"openproject_prod_*_*.tar.gz"</span> -mtime +30 -delete
<span class="hljs-built_in">echo</span> <span class="hljs-string">"è¿‡æœŸå¤‡ä»½å·²æ¸…ç†ï¼ˆä¿ç•™30å¤©ï¼‰"</span>
</code></pre>
<h4 data-id="heading-27">æ–¹æ¡ˆ2ï¼šæœ¬åœ°ç›®å½•/æ•°æ®å·å¤‡ä»½ï¼ˆå•èŠ‚ç‚¹ç”Ÿäº§ç¯å¢ƒï¼‰</h4>
<p>é€‚é…å•èŠ‚ç‚¹æœ¬åœ°ç›®å½•æˆ–æ•°æ®å·æŒä¹…åŒ–åœºæ™¯ï¼Œåˆ›å»ºå¤‡ä»½è„šæœ¬<code>/var/backups/openproject/backup_openproject.sh</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># OpenProjectï¼ˆå•èŠ‚ç‚¹ç‰ˆï¼‰å¤‡ä»½è„šæœ¬</span>
BACKUP_DIR=<span class="hljs-string">"/var/backups/openproject"</span>
SOURCE_DIR=<span class="hljs-string">"/var/openproject/prod"</span>  <span class="hljs-comment"># æœ¬åœ°ç›®å½•è·¯å¾„ï¼ˆæ•°æ®å·å¯é€šè¿‡docker volume inspectè·å–æŒ‚è½½è·¯å¾„ï¼‰</span>
TIMESTAMP=$(<span class="hljs-built_in">date</span> +%Y%m%d_%H%M%S)
CONTAINER_NAME=<span class="hljs-string">"openproject-prod"</span>

<span class="hljs-comment"># åˆ›å»ºå¤‡ä»½ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$BACKUP_DIR</span>

<span class="hljs-comment"># åœæ­¢å®¹å™¨ï¼ˆé¿å…å¤‡ä»½è¿‡ç¨‹ä¸­æ•°æ®å†™å…¥ä¸ä¸€è‡´ï¼Œç¡¬åœä¼šä¸­æ–­ç”¨æˆ·æ“ä½œï¼Œç”Ÿäº§ç¯å¢ƒæ›´æ¨èæ•°æ®åº“å±‚å¤‡ä»½ï¼‰</span>
docker stop <span class="hljs-variable">$CONTAINER_NAME</span>

<span class="hljs-comment"># æ‰“åŒ…å¤‡ä»½æœ¬åœ°ç›®å½•</span>
tar -czf <span class="hljs-variable">$BACKUP_DIR</span>/openproject_prod_<span class="hljs-variable">${TIMESTAMP}</span>.tar.gz -C <span class="hljs-variable">$SOURCE_DIR</span> .

<span class="hljs-comment"># å¯åŠ¨å®¹å™¨</span>
docker start <span class="hljs-variable">$CONTAINER_NAME</span>

<span class="hljs-comment"># ä¿ç•™æœ€è¿‘30å¤©å¤‡ä»½ï¼Œåˆ é™¤è¿‡æœŸå¤‡ä»½</span>
find <span class="hljs-variable">$BACKUP_DIR</span> -name <span class="hljs-string">"openproject_prod_*.tar.gz"</span> -mtime +30 -delete

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¤‡ä»½å®Œæˆï¼š<span class="hljs-variable">$BACKUP_DIR</span>/openproject_prod_<span class="hljs-variable">${TIMESTAMP}</span>.tar.gz"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"è¿‡æœŸå¤‡ä»½å·²æ¸…ç†ï¼ˆä¿ç•™30å¤©ï¼‰"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æç¤ºï¼šå®¹å™¨çº§ç¡¬åœå¤‡ä»½ä»…é€‚åˆå°è§„æ¨¡å•æœºï¼Œç”Ÿäº§ç¯å¢ƒä¼˜å…ˆä½¿ç”¨pg_dump/RDSå¿«ç…§ç­‰æ•°æ®åº“å±‚å¤‡ä»½æ–¹æ¡ˆ"</span>
</code></pre>
<h4 data-id="heading-28">é…ç½®å®šæ—¶ä»»åŠ¡ï¼ˆcrontabï¼‰</h4>
<ol>
<li>
<p>ç»™å¤‡ä»½è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">chmod</span> +x /var/backups/openproject/backup_openproject.sh
</code></pre>
</li>
<li>
<p>ç¼–è¾‘crontabé…ç½®ï¼Œè®¾ç½®æ¯å¤©å‡Œæ™¨2ç‚¹è‡ªåŠ¨æ‰§è¡Œå¤‡ä»½ï¼ˆç”Ÿäº§ç¯å¢ƒä½å³°æœŸï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">crontab -e
</code></pre>
</li>
<li>
<p>æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼ˆä¿å­˜é€€å‡ºï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">0 2 * * * /var/backups/openproject/backup_openproject.sh &gt;&gt; /var/backups/openproject/backup_logs.log 2&gt;&amp;1
</code></pre>
</li>
</ol>
<h3 data-id="heading-29">é›†ç¾¤éƒ¨ç½²ï¼ˆDocker Swarmï¼Œå¤§è§„æ¨¡å›¢é˜Ÿç”Ÿäº§ç¯å¢ƒï¼Œä»…ä½¿ç”¨slimç‰ˆï¼‰</h3>
<p>å¯¹äºéœ€è¦æ”¯æ’‘æ•°åƒç”¨æˆ·è®¿é—®çš„å¤§è§„æ¨¡å›¢é˜Ÿåœºæ™¯ï¼Œå¯ä½¿ç”¨Docker Swarmæ­å»ºé›†ç¾¤ï¼Œå®ç°æœåŠ¡æ°´å¹³æ‰©å±•ã€é«˜å¯ç”¨ä¸è´Ÿè½½å‡è¡¡ï¼Œ<strong>æ ¸å¿ƒè¦æ±‚ï¼šä½¿ç”¨S3/MinIOå¯¹è±¡å­˜å‚¨ã€ç»Ÿä¸€åŠ å¯†å¯†é’¥ã€ä¸“ä¸šåå‘ä»£ç†</strong>ï¼Œä»¥ä¸‹ä¸ºå®Œæ•´æ­£ç¡®é…ç½®ï¼š</p>
<h4 data-id="heading-30">1. åˆå§‹åŒ–Docker Swarmé›†ç¾¤</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨ç®¡ç†èŠ‚ç‚¹åˆå§‹åŒ–Swarmï¼ˆæ›¿æ¢ä¸ºç®¡ç†èŠ‚ç‚¹å†…ç½‘IPï¼‰</span>
docker swarm init --advertise-addr=10.0.0.100

<span class="hljs-comment"># å¦‚éœ€æ·»åŠ å·¥ä½œèŠ‚ç‚¹ï¼ŒæŒ‰ç…§ç»ˆç«¯è¾“å‡ºçš„å‘½ä»¤åœ¨å·¥ä½œèŠ‚ç‚¹æ‰§è¡Œï¼ˆç¤ºä¾‹ï¼‰</span>
docker swarm <span class="hljs-built_in">join</span> --token SWMTKN-1-xxxxxx 10.0.0.100:2377
</code></pre>
<h4 data-id="heading-31">2. å‡†å¤‡æ ¸å¿ƒèµ„æºï¼ˆDocker Secret+å¯¹è±¡å­˜å‚¨ï¼‰</h4>
<h5 data-id="heading-32">1. åˆ›å»ºç»Ÿä¸€åŠ å¯†å¯†é’¥ï¼ˆè§£å†³Sessionå¤±æ•ˆé—®é¢˜ï¼Œç”Ÿäº§å¿…å¤‡ï¼‰</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç”Ÿæˆé«˜å¼ºåº¦ç»Ÿä¸€åŠ å¯†å¯†é’¥</span>
openssl rand -hex 64 &gt; secret_key_base.txt

<span class="hljs-comment"># åˆ›å»ºDocker Secretï¼Œæ‰€æœ‰å®ä¾‹å…±äº«åŒä¸€å¯†é’¥</span>
docker secret create openproject_secret_key_base secret_key_base.txt

<span class="hljs-comment"># éªŒè¯Secretåˆ›å»ºæˆåŠŸ</span>
docker secret <span class="hljs-built_in">ls</span> | grep openproject_secret_key_base
</code></pre>
<h5 data-id="heading-33">2. é…ç½®S3/MinIOå¯¹è±¡å­˜å‚¨ï¼ˆè§£å†³å¤šå‰¯æœ¬æ•°æ®é”™ä¹±é—®é¢˜ï¼Œé›†ç¾¤å¿…å¤‡ï¼‰</h5>
<p>æå‰æ­å»ºS3æˆ–MinIOå¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œè·å–è®¿é—®å¯†é’¥ã€å­˜å‚¨æ¡¶åç§°ç­‰ä¿¡æ¯ï¼Œ<strong>ç¡®ä¿æ‰€æœ‰é›†ç¾¤èŠ‚ç‚¹å‡å¯è®¿é—®å¯¹è±¡å­˜å‚¨æœåŠ¡</strong>ï¼Œç¦ç”¨æœ¬åœ°æ–‡ä»¶å­˜å‚¨ã€‚</p>
<h4 data-id="heading-34">3. ç¼–å†™Swarm Stacké…ç½®æ–‡ä»¶ï¼ˆæ ¸å¿ƒä¿®æ­£ï¼Œä½¿ç”¨Traefikåå‘ä»£ç†ï¼‰</h4>
<p>åˆ›å»º<code>openproject-stack.yml</code>ï¼Œç¼–æ’OpenProjectç›¸å…³æœåŠ¡ï¼ˆwebã€dbã€cacheã€traefikåå‘ä»£ç†ï¼‰ï¼Œé‡‡ç”¨Traefikä½œä¸ºä¸“ä¸šåå‘ä»£ç†ï¼Œä¿®æ­£TLSé…ç½®ä¸PostgreSQLå•ç‚¹é£é™©ï¼Œç»™WorkeræœåŠ¡æ·»åŠ èµ„æºé™åˆ¶ï¼Œè¡¥å……Traefikå¿…è¦çš„router/rule/labelsé…ç½®ï¼Œä¿®æ­£depends_onçš„Swarmå±€é™æ€§ï¼Œæ›¿æ¢memcachedä¸ºå›ºå®šç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>

<span class="hljs-comment"># å®šä¹‰Docker Secretï¼Œæ‰€æœ‰æœåŠ¡å…±äº«ç»Ÿä¸€åŠ å¯†å¯†é’¥</span>
<span class="hljs-attr">secrets:</span>
  <span class="hljs-attr">openproject_secret_key_base:</span>
    <span class="hljs-attr">external:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># å¼•ç”¨å·²åˆ›å»ºçš„å¤–éƒ¨Secret</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-comment"># 1. æ•°æ®åº“æœåŠ¡ï¼ˆPostgreSQLï¼Œä»…ç”¨äºæ¼”ç¤ºï¼ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨ç‹¬ç«‹é«˜å¯ç”¨æ•°æ®åº“ï¼‰</span>
  <span class="hljs-comment"># è­¦å‘Šï¼šè¯¥é…ç½®ä¸ºå•ç‚¹æœ¬åœ°å­˜å‚¨ï¼Œç®¡ç†èŠ‚ç‚¹å®•æœº/è¿ç§»ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨RDS/Patroni/äº‘æ•°æ®åº“</span>
  <span class="hljs-attr">db:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">postgres:15</span>  <span class="hljs-comment"># ç”Ÿäº§æ¨è14/15ï¼Œé™å®š13â€“16èŒƒå›´</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/var/openproject/swarm/pgdata:/var/lib/postgresql/data</span>  <span class="hljs-comment"># å»ºè®®ä½¿ç”¨CephFS/GlusterFSæŒä¹…åŒ–ï¼ˆä»…æ¼”ç¤ºï¼‰</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_USER=openproject</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_PASSWORD=openproject_password</span>  <span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒå»ºè®®æ›¿æ¢ä¸ºDocker Secret</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">POSTGRES_DB=openproject</span>
    <span class="hljs-attr">deploy:</span>
      <span class="hljs-attr">replicas:</span> <span class="hljs-number">1</span>
      <span class="hljs-attr">restart_policy:</span>
        <span class="hljs-attr">condition:</span> <span class="hljs-string">on-failure</span>
      <span class="hljs-attr">placement:</span>
        <span class="hljs-attr">constraints:</span> [<span class="hljs-string">node.role</span> <span class="hljs-string">==</span> <span class="hljs-string">manager</span>]  <span class="hljs-comment"># å›ºå®šåˆ°ç®¡ç†èŠ‚ç‚¹ï¼Œé¿å…æ•°æ®è¿ç§»ï¼ˆä»…æ¼”ç¤ºï¼‰</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">openproject_internal</span>
    <span class="hljs-attr">healthcheck:</span>  <span class="hljs-comment"># è¡¥å……å¥åº·æ£€æŸ¥ï¼Œä¸ºä¾èµ–æœåŠ¡æä¾›å°±ç»ªåˆ¤æ–­</span>
      <span class="hljs-attr">test:</span> [<span class="hljs-string">"CMD-SHELL"</span>, <span class="hljs-string">"pg_isready -U openproject"</span>]
      <span class="hljs-attr">interval:</span> <span class="hljs-string">10s</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">5s</span>
      <span class="hljs-attr">retries:</span> <span class="hljs-number">5</span>

  <span class="hljs-comment"># 2. ç¼“å­˜æœåŠ¡ï¼ˆMemcachedï¼Œå•å‰¯æœ¬ï¼Œä½¿ç”¨å›ºå®šç‰ˆæœ¬é¿å…è¡Œä¸ºå˜æ›´ï¼‰</span>
  <span class="hljs-attr">cache:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">memcached:1.6-alpine</span>  <span class="hljs-comment"># æ›¿æ¢latestä¸ºå›ºå®šç¨³å®šç‰ˆæœ¬ï¼Œé¿å…ç”Ÿäº§äº‹æ•…</span>
    <span class="hljs-attr">deploy:</span>
      <span class="hljs-attr">replicas:</span> <span class="hljs-number">1</span>
      <span class="hljs-attr">restart_policy:</span>
        <span class="hljs-attr">condition:</span> <span class="hljs-string">on-failure</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">openproject_internal</span>
    <span class="hljs-attr">healthcheck:</span>  <span class="hljs-comment"># è¡¥å……å¥åº·æ£€æŸ¥</span>
      <span class="hljs-attr">test:</span> [<span class="hljs-string">"CMD"</span>, <span class="hljs-string">"memcached-tool"</span>, <span class="hljs-string">"localhost:11211"</span>, <span class="hljs-string">"stats"</span>]
      <span class="hljs-attr">interval:</span> <span class="hljs-string">10s</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">5s</span>
      <span class="hljs-attr">retries:</span> <span class="hljs-number">3</span>

  <span class="hljs-comment"># 3. OpenProject WebæœåŠ¡ï¼ˆåº”ç”¨å±‚ï¼Œæ°´å¹³æ‰©å±•ï¼Œä»…slimç‰ˆï¼‰</span>
  <span class="hljs-comment"># æ³¨æ„ï¼šå¿…é¡»é…åˆS3/MinIOå¯¹è±¡å­˜å‚¨ï¼Œå¦åˆ™é™„ä»¶/å¯¼å‡ºæ–‡ä»¶ä¼šå‡ºç°ä¸¢å¤±/é”™ä¹±ï¼Œæœªå¯ç”¨å¯¹è±¡å­˜å‚¨è¯·ä¿æŒreplicas=1</span>
  <span class="hljs-attr">web:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">vipxxx.xuanyuan.run/openproject/openproject:17.0.0-slim-bim</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-comment"># ä»Docker Secretè¯»å–ç»Ÿä¸€åŠ å¯†å¯†é’¥ï¼Œé¿å…Sessionå¤±æ•ˆ</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">SECRET_KEY_BASE_FILE=/run/secrets/openproject_secret_key_base</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">OPENPROJECT_HOST__NAME=openproject.example.com</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">OPENPROJECT_HTTPS=true</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">DATABASE_URL=postgresql://openproject:openproject_password@db:5432/openproject</span>  <span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒå»ºè®®æ›¿æ¢ä¸ºDocker Secret</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MEMCACHE_SERVER=cache:11211</span>
      <span class="hljs-comment"># å¯¹è±¡å­˜å‚¨é…ç½®ï¼ˆé›†ç¾¤å¿…å¤‡ï¼Œè§£å†³å¤šå‰¯æœ¬æ•°æ®é”™ä¹±ï¼‰</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">OPENPROJECT_ATTACHMENTS__STORAGE="fog"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">OPENPROJECT_FOG_DIRECTORY="openproject-attachments"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">OPENPROJECT_FOG_CREDENTIALS_PROVIDER="AWS"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">OPENPROJECT_FOG_CREDENTIALS_AWS__ACCESS__KEY__ID="your-access-key"</span>  <span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒå»ºè®®æ›¿æ¢ä¸ºDocker Secret</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">OPENPROJECT_FOG_CREDENTIALS_AWS__SECRET__ACCESS__KEY="your-secret-key"</span>  <span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒå»ºè®®æ›¿æ¢ä¸ºDocker Secret</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">OPENPROJECT_FOG_CREDENTIALS_REGION="cn-north-1"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">OPENPROJECT_FOG_CREDENTIALS_ENDPOINT="https://minio.example.com"</span>
    <span class="hljs-attr">secrets:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">openproject_secret_key_base</span>  <span class="hljs-comment"># æŒ‚è½½ç»Ÿä¸€åŠ å¯†å¯†é’¥</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">db</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">cache</span>
    <span class="hljs-attr">deploy:</span>
      <span class="hljs-attr">replicas:</span> <span class="hljs-number">6</span>  <span class="hljs-comment"># æ°´å¹³æ‰©å±•6ä¸ªwebå®ä¾‹ï¼Œå¯ç”¨å¯¹è±¡å­˜å‚¨åæ–¹å¯æ‰©å±•</span>
      <span class="hljs-attr">restart_policy:</span>
        <span class="hljs-attr">condition:</span> <span class="hljs-string">on-failure</span>
      <span class="hljs-attr">update_config:</span>
        <span class="hljs-attr">parallelism:</span> <span class="hljs-number">2</span>  <span class="hljs-comment"># æ»šåŠ¨æ›´æ–°ï¼Œæ¯æ¬¡æ›´æ–°2ä¸ªå®ä¾‹ï¼Œé¿å…æœåŠ¡ä¸­æ–­</span>
        <span class="hljs-attr">delay:</span> <span class="hljs-string">30s</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">openproject_internal</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">openproject_proxy</span>
    <span class="hljs-comment"># å¥åº·æ£€æŸ¥ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…å¤‡ï¼Œå…¼å®¹æ›´å¤šç‰ˆæœ¬ï¼Œæ›¿æ¢/healthè·¯å¾„ï¼‰</span>
    <span class="hljs-attr">healthcheck:</span>
      <span class="hljs-attr">test:</span> [<span class="hljs-string">"CMD"</span>, <span class="hljs-string">"curl"</span>, <span class="hljs-string">"-f"</span>, <span class="hljs-string">"http://localhost/"</span>]
      <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">5s</span>
      <span class="hljs-attr">retries:</span> <span class="hljs-number">3</span>
      <span class="hljs-attr">start_period:</span> <span class="hljs-string">300s</span>
    <span class="hljs-attr">labels:</span>  <span class="hljs-comment"># è¡¥å……Traefikæ‰€éœ€æ ‡ç­¾ï¼Œæš´éœ²OpenProjectæœåŠ¡</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">traefik.enable=true</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">traefik.docker.network=openproject_proxy</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">traefik.http.routers.openproject.rule=Host(`openproject.example.com`)</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">traefik.http.routers.openproject.entrypoints=websecure</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">traefik.http.services.openproject.loadbalancer.server.port=80</span>

  <span class="hljs-comment"># 4. OpenProject WorkeræœåŠ¡ï¼ˆä»»åŠ¡å¤„ç†ï¼Œæ°´å¹³æ‰©å±•ï¼Œæ·»åŠ èµ„æºé™åˆ¶é¿å…æŠ¢å Webèµ„æºï¼‰</span>
  <span class="hljs-attr">worker:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">vipxxx.xuanyuan.run/openproject/openproject:17.0.0-slim-bim</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">./docker/prod/worker</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">SECRET_KEY_BASE_FILE=/run/secrets/openproject_secret_key_base</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">DATABASE_URL=postgresql://openproject:openproject_password@db:5432/openproject</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MEMCACHE_SERVER=cache:11211</span>
    <span class="hljs-attr">secrets:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">openproject_secret_key_base</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">db</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">cache</span>
    <span class="hljs-attr">deploy:</span>
      <span class="hljs-attr">replicas:</span> <span class="hljs-number">2</span>
      <span class="hljs-attr">restart_policy:</span>
        <span class="hljs-attr">condition:</span> <span class="hljs-string">on-failure</span>
      <span class="hljs-attr">resources:</span>  <span class="hljs-comment"># æ–°å¢ï¼šé™åˆ¶Workerèµ„æºï¼Œé¿å…ä»»åŠ¡é«˜å³°æœŸæŠ¢å WebæœåŠ¡èµ„æº</span>
        <span class="hljs-attr">limits:</span>
          <span class="hljs-attr">cpus:</span> <span class="hljs-string">'1.0'</span>
          <span class="hljs-attr">memory:</span> <span class="hljs-string">1G</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">openproject_internal</span>

  <span class="hljs-comment"># 5. åå‘ä»£ç†æœåŠ¡ï¼ˆTraefikï¼Œä¸“ä¸šè´Ÿè½½å‡è¡¡ï¼Œè¡¥å……å®Œæ•´router/ruleé…ç½®ï¼‰</span>
  <span class="hljs-attr">traefik:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">traefik:v2.10</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"80:80"</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"443:443"</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/var/run/docker.sock:/var/run/docker.sock:ro</span>  <span class="hljs-comment"># åªè¯»æŒ‚è½½Dockerå¥—æ¥å­—ï¼Œè·å–æœåŠ¡ä¿¡æ¯</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/etc/ssl/openproject:/ssl</span>  <span class="hljs-comment"># æŒ‚è½½SSLè¯ä¹¦ï¼ˆé™æ€è¯ä¹¦ï¼‰</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/var/traefik/acme.json:/acme.json</span>  <span class="hljs-comment"># ACMEè¯ä¹¦å­˜å‚¨ï¼ˆå¦‚éœ€è‡ªåŠ¨ç”³è¯·Let's Encryptï¼‰</span>
    <span class="hljs-attr">command:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">--providers.docker=true</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">--providers.docker.swarmmode=true</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">--providers.docker.exposedbydefault=false</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">--entrypoints.web.address=:80</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">--entrypoints.websecure.address=:443</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">--entrypoints.web.http.redirections.entryPoint.to=websecure</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">--entrypoints.web.http.redirections.entryPoint.scheme=https</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">--entrypoints.websecure.http.tls=true</span>  <span class="hljs-comment"># å¯ç”¨é™æ€TLS</span>
      <span class="hljs-comment"># å¦‚éœ€è‡ªåŠ¨ç”³è¯·Let's Encryptè¯ä¹¦ï¼Œå¯æ·»åŠ ä»¥ä¸‹é…ç½®ï¼ˆæ³¨é‡Šæ‰é™æ€è¯ä¹¦æŒ‚è½½ï¼Œå¯ç”¨ACMEï¼‰</span>
      <span class="hljs-comment"># - --certificatesresolvers.le.acme.email=admin@example.com</span>
      <span class="hljs-comment"># - --certificatesresolvers.le.acme.storage=/acme.json</span>
      <span class="hljs-comment"># - --certificatesresolvers.le.acme.httpchallenge.entrypoint=web</span>
    <span class="hljs-attr">deploy:</span>
      <span class="hljs-attr">replicas:</span> <span class="hljs-number">2</span>  <span class="hljs-comment"># åå‘ä»£ç†é«˜å¯ç”¨ï¼Œé¿å…å•ç‚¹æ•…éšœ</span>
      <span class="hljs-attr">restart_policy:</span>
        <span class="hljs-attr">condition:</span> <span class="hljs-string">on-failure</span>
      <span class="hljs-attr">placement:</span>
        <span class="hljs-attr">constraints:</span> [<span class="hljs-string">node.role</span> <span class="hljs-string">==</span> <span class="hljs-string">manager</span>]
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">openproject_proxy</span>

<span class="hljs-comment"># å®šä¹‰ç½‘ç»œï¼ˆéš”ç¦»å†…éƒ¨æœåŠ¡ä¸å¤–éƒ¨ä»£ç†ï¼‰</span>
<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">openproject_internal:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">overlay</span>
    <span class="hljs-attr">internal:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># å†…éƒ¨ç½‘ç»œï¼Œä¸å¯¹å¤–æš´éœ²</span>
  <span class="hljs-attr">openproject_proxy:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">overlay</span>
</code></pre>
<h4 data-id="heading-35">4. éƒ¨ç½²Swarm Stackå¹¶æ‰©å±•æœåŠ¡</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># éƒ¨ç½²Stackï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®å…ˆåœ¨æµ‹è¯•é›†ç¾¤éªŒè¯ï¼‰</span>
docker stack deploy -c openproject-stack.yml openproject

<span class="hljs-comment"># æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼ˆç¡®ä¿æ‰€æœ‰æœåŠ¡replicasè¾¾åˆ°é¢„æœŸæ•°é‡ï¼‰</span>
docker service <span class="hljs-built_in">ls</span> | grep openproject

<span class="hljs-comment"># æŒ‰éœ€æ‰©å±•webæœåŠ¡ï¼ˆç¤ºä¾‹ï¼šæ‰©å±•åˆ°8ä¸ªå®ä¾‹ï¼Œä»…å¯ç”¨å¯¹è±¡å­˜å‚¨åå¯æ‰§è¡Œï¼‰</span>
docker service scale openproject_web=8
</code></pre>
<h4 data-id="heading-36">5. é›†ç¾¤éƒ¨ç½²å…³é”®æ³¨æ„äº‹é¡¹ï¼ˆå¿…é¡»éµå®ˆï¼‰</h4>
<ol>
<li>æ‰€æœ‰Web/Workerå®ä¾‹å¿…é¡»ä½¿ç”¨<strong>ç»Ÿä¸€çš„SECRET_KEY_BASE</strong>ï¼Œé€šè¿‡Docker Secretç®¡ç†ï¼Œé¿å…Sessionå¤±æ•ˆã€Cookieæ— æ³•è§£å¯†ï¼Œ<strong>ä¸¥ç¦åŠ¨æ€ç”Ÿæˆè¯¥å¯†é’¥</strong>ã€‚</li>
<li>å¤šå‰¯æœ¬WebæœåŠ¡å¿…é¡»é…åˆ<strong>S3/MinIOå¯¹è±¡å­˜å‚¨</strong>ï¼Œä¸¥ç¦ä½¿ç”¨æœ¬åœ°æ–‡ä»¶å­˜å‚¨/NFSï¼ˆé«˜å¹¶å‘åœºæ™¯ï¼‰ï¼Œå¦åˆ™ä¼šå‡ºç°æ–‡ä»¶è¦†ç›–ã€ä¸¢å¤±ã€ä¸‹è½½404ã€‚</li>
<li>åå‘ä»£ç†å¿…é¡»ä½¿ç”¨<strong>ä¸“ä¸šä»£ç†å·¥å…·ï¼ˆTraefik/Nginx/HAProxyï¼‰</strong>ï¼Œç¦æ­¢ä½¿ç”¨OpenProjectåº”ç”¨é•œåƒä½œä¸ºä»£ç†ã€‚</li>
<li><strong>æ•°æ®åº“æœåŠ¡è­¦å‘Š</strong>ï¼šSwarmç¤ºä¾‹ä¸­çš„PostgreSQLä»…ç”¨äºæ¼”ç¤ºï¼Œç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨ç‹¬ç«‹é«˜å¯ç”¨æ•°æ®åº“ï¼ˆRDS/Patroni/äº‘æ•°æ®åº“ï¼‰ï¼Œé¿å…å•ç‚¹æ•…éšœå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚</li>
<li>æ»šåŠ¨æ›´æ–°æ—¶ï¼Œå»ºè®®è®¾ç½®<code>parallelism</code>ä¸º2-3ï¼Œé¿å…ä¸€æ¬¡æ€§æ›´æ–°æ‰€æœ‰å®ä¾‹å¯¼è‡´æœåŠ¡ä¸å¯ç”¨ã€‚</li>
<li>WorkeræœåŠ¡å¿…é¡»é…ç½®èµ„æºé™åˆ¶ï¼Œé¿å…ä»»åŠ¡é«˜å³°æœŸæŠ¢å WebæœåŠ¡èµ„æºï¼Œå¯¼è‡´ç”¨æˆ·è®¿é—®å¡é¡¿ã€‚</li>
<li>Docker Swarmä¸­<code>depends_on</code>ä»…æ§åˆ¶å¯åŠ¨é¡ºåºï¼Œä¸ä¿è¯ä¾èµ–æœåŠ¡å¯ç”¨ï¼Œéœ€ä¾èµ–<strong>å¥åº·æ£€æŸ¥+åº”ç”¨è‡ªèº«é‡è¯•æœºåˆ¶</strong>ï¼ˆOpenProjectå·²å†…ç½®æ•°æ®åº“é‡è¯•é€»è¾‘ï¼‰ã€‚</li>
<li>Traefikéœ€é€šè¿‡<code>labels</code>é…ç½®routerå’Œserviceè§„åˆ™ï¼Œå¦åˆ™æ— æ³•æš´éœ²OpenProjectæœåŠ¡ï¼Œè®¿é—®ä¼šå‡ºç°404é”™è¯¯ã€‚</li>
</ol>
<h2 data-id="heading-37">åŠŸèƒ½æµ‹è¯•</h2>
<p>å®¹å™¨/é›†ç¾¤éƒ¨ç½²å®Œæˆåï¼Œé€šè¿‡ä»¥ä¸‹æ­¥éª¤éªŒè¯æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œï¼ˆä»…é’ˆå¯¹slimç‰ˆç”Ÿäº§ç¯å¢ƒï¼‰ï¼š</p>
<ol>
<li>
<p><strong>æŸ¥çœ‹å®¹å™¨/æœåŠ¡çŠ¶æ€</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å•å®¹å™¨éƒ¨ç½²</span>
docker ps | grep openproject  <span class="hljs-comment"># ç¡®ä¿çŠ¶æ€ä¸º Up</span>
<span class="hljs-comment"># è¡¥å……ï¼šdocker psé»˜è®¤ä¸æ˜¾ç¤ºå¥åº·çŠ¶æ€ï¼ŒæŸ¥çœ‹å¥åº·çŠ¶æ€éœ€æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</span>
docker inspect --format=<span class="hljs-string">'{{.State.Health.Status}}'</span> openproject-prod  <span class="hljs-comment"># ç¡®ä¿è¾“å‡ºä¸º healthy</span>

<span class="hljs-comment"># Swarmé›†ç¾¤éƒ¨ç½²</span>
docker service <span class="hljs-built_in">ls</span> | grep openproject  <span class="hljs-comment"># ç¡®ä¿æ‰€æœ‰æœåŠ¡ replicas ä¸º 1/1 æˆ–æŒ‡å®šæ•°é‡</span>
docker service ps openproject_web  <span class="hljs-comment"># æŸ¥çœ‹webæœåŠ¡å®ä¾‹è¿è¡ŒçŠ¶æ€ï¼Œç¡®ä¿æ— å¤±è´¥</span>
</code></pre>
</li>
<li>
<p><strong>è®¿é—®Webç•Œé¢</strong>ï¼š
åœ¨æµè§ˆå™¨ä¸­è¾“å…¥<code>https://&lt;ä½ çš„åŸŸå&gt;</code>ï¼ˆæˆ–<code>https://&lt;ä½ çš„åŸŸå&gt;/openproject</code>ï¼‰ï¼Œè‹¥èƒ½çœ‹åˆ°OpenProjectç™»å½•é¡µé¢ï¼Œè¯´æ˜åå‘ä»£ç†ä¸æœåŠ¡éƒ¨ç½²æˆåŠŸã€‚</p>
</li>
<li>
<p><strong>è·å–åˆå§‹ç®¡ç†å‘˜è´¦å·</strong>ï¼š
å®¹å™¨é¦–æ¬¡å¯åŠ¨æ—¶ä¼šç”Ÿæˆé»˜è®¤ç®¡ç†å‘˜è´¦å·ï¼Œå¯é€šè¿‡å®¹å™¨/æœåŠ¡æ—¥å¿—è·å–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å•å®¹å™¨éƒ¨ç½²</span>
docker logs openproject-prod | grep <span class="hljs-string">"Admin user"</span>

<span class="hljs-comment"># Swarmé›†ç¾¤éƒ¨ç½²ï¼ˆæŸ¥çœ‹webæœåŠ¡æ—¥å¿—ï¼‰</span>
docker service logs openproject_web | grep <span class="hljs-string">"Admin user"</span>
</code></pre>
<p>è¡¥å……ï¼šè‹¥æœªæ‰¾åˆ°ä¸Šè¿°æ—¥å¿—ï¼ˆæ–°ç‰ˆæœ¬å¯èƒ½ä¸æ‰“å°æˆ–ä»…è¾“å‡ºéšæœºå¯†ç ï¼‰ï¼Œå¯é€šè¿‡<code>openproject configure</code>å‘½ä»¤æˆ–OpenProject Webç•Œé¢é‡ç½®ç®¡ç†å‘˜å¯†ç ã€‚</p>
</li>
<li>
<p><strong>éªŒè¯æ ¸å¿ƒåŠŸèƒ½ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…å¤‡ï¼‰</strong>ï¼š
ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•åï¼ŒéªŒè¯ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½æ˜¯å¦æ­£å¸¸ï¼š</p>
<ul>
<li>åˆ›å»ºæ–°é¡¹ç›®ã€æ·»åŠ ä»»åŠ¡/å·¥ä½œåŒ…ã€‚</li>
<li>ä¸Šä¼ é™„ä»¶ã€ä¸‹è½½é™„ä»¶ï¼ˆé›†ç¾¤ç¯å¢ƒé‡ç‚¹éªŒè¯ï¼Œç¡®ä¿å¯¹è±¡å­˜å‚¨ç”Ÿæ•ˆï¼‰ã€‚</li>
<li>å‘é€æµ‹è¯•é‚®ä»¶ï¼ˆç³»ç»Ÿè®¾ç½®â†’é‚®ä»¶é…ç½®ï¼‰ã€‚</li>
<li>è®°å½•å·¥æ—¶ã€ç”Ÿæˆé¡¹ç›®æŠ¥è¡¨å¹¶å¯¼å‡ºã€‚</li>
<li>é›†ç¾¤ç¯å¢ƒï¼šåˆ‡æ¢ä¸åŒæµè§ˆå™¨/è®¾å¤‡ç™»å½•ï¼ŒéªŒè¯Sessionæ˜¯å¦ç¨³å®šï¼ˆæ— é¢‘ç¹ç™»å‡ºï¼‰ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-38">æ•…éšœæ’æŸ¥</h2>
<h3 data-id="heading-39">å®¹å™¨æ— æ³•å¯åŠ¨</h3>
<ol>
<li>
<p><strong>æŸ¥çœ‹è¯¦ç»†å¯åŠ¨æ—¥å¿—</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker logs &lt;å®¹å™¨åç§°&gt;  <span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨å¯åŠ¨é”™è¯¯ä¿¡æ¯ï¼Œå¸¸è§é”™è¯¯ï¼šç«¯å£å†²çªã€æƒé™ä¸è¶³ã€æ•°æ®åº“è¿æ¥å¤±è´¥</span>
</code></pre>
</li>
<li>
<p><strong>æ£€æŸ¥ç«¯å£å ç”¨</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ss -lntp | grep &lt;æ˜ å°„ç«¯å£&gt;  <span class="hljs-comment"># æ›¿æ¢netstatï¼Œé€‚é…Ubuntu 22.04+/Debian 12+ç­‰æ–°ç³»ç»Ÿï¼ŒæŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µ</span>
<span class="hljs-comment"># è‹¥ç«¯å£å·²è¢«å ç”¨ï¼Œåœæ­¢å ç”¨è¿›ç¨‹æˆ–ä¿®æ”¹æ˜ å°„ç«¯å£</span>
</code></pre>
</li>
<li>
<p><strong>éªŒè¯æ•°æ®å·/ç›®å½•æƒé™</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ•°æ®å·æƒé™æ£€æŸ¥</span>
docker volume inspect &lt;æ•°æ®å·åç§°&gt;
<span class="hljs-comment"># æœ¬åœ°ç›®å½•æƒé™æ£€æŸ¥ï¼ˆç¡®ä¿é€‚é…å®¹å™¨érootç”¨æˆ· UID/GID 1000ï¼‰</span>
<span class="hljs-built_in">ls</span> -ld /var/openproject/prod  <span class="hljs-comment"># ç¡®ä¿ç›®å½•æ‰€æœ‰è€…ä¸º 1000:1000ï¼Œæƒé™ä¸º 775</span>
</code></pre>
</li>
<li>
<p><strong>è§£å†³ä¼ªTTYæƒé™é—®é¢˜</strong>ï¼š
è‹¥å‡ºç°<code>/dev/stdout: Permission denied</code>é”™è¯¯ï¼Œæ·»åŠ <code>-t</code>å‚æ•°é‡æ–°å¯åŠ¨å®¹å™¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker run -t -d --name openproject-prod ...
</code></pre>
<p>è¡¥å……ï¼š<code>-t</code>å‚æ•°çš„ä½œç”¨æ˜¯åˆ†é…ä¼ªç»ˆç«¯ï¼Œè§£å†³æŸäº›Ruby loggeråœ¨æ— TTYç¯å¢ƒä¸‹å†™å…¥<code>/dev/stdout</code>çš„æƒé™å¼‚å¸¸ï¼Œå¹¶éDocker stdoutæœ¬èº«çš„æƒé™é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>Docker Secretç›¸å…³æ•…éšœ</strong>ï¼š
è‹¥å‡ºç°<code>SECRET_KEY_BASE</code>ç›¸å…³é”™è¯¯ï¼ŒéªŒè¯Secretæ˜¯å¦å­˜åœ¨å¹¶æ­£ç¡®æŒ‚è½½ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker secret <span class="hljs-built_in">ls</span> | grep openproject_secret_key_base
docker service inspect openproject_web | grep secret_key_base
</code></pre>
</li>
</ol>
<h3 data-id="heading-40">æœåŠ¡è®¿é—®å¼‚å¸¸</h3>
<ol>
<li>
<p><strong>æ£€æŸ¥å®¹å™¨å†…æœåŠ¡çŠ¶æ€</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker <span class="hljs-built_in">exec</span> -it &lt;å®¹å™¨åç§°&gt; curl -f http://localhost/  <span class="hljs-comment"># æ›¿æ¢/healthï¼Œå…¼å®¹æ›´å¤šç‰ˆæœ¬ï¼ŒéªŒè¯å®¹å™¨å†…æœåŠ¡æ˜¯å¦æ­£å¸¸</span>
</code></pre>
</li>
<li>
<p><strong>æ£€æŸ¥åå‘ä»£ç†é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">nginx -t  <span class="hljs-comment"># éªŒè¯Nginxé…ç½®è¯­æ³•</span>
<span class="hljs-built_in">tail</span> -f /var/log/nginx/error.log  <span class="hljs-comment"># æŸ¥çœ‹Nginxé”™è¯¯æ—¥å¿—</span>
<span class="hljs-comment"># Swarmé›†ç¾¤ï¼ˆTraefikï¼‰</span>
docker service logs openproject_traefik
</code></pre>
</li>
<li>
<p><strong>éªŒè¯HOSTå¤´ä¸HTTPSé…ç½®</strong>ï¼š
è‹¥å‡ºç°<code>Invalid host</code>é”™è¯¯ï¼Œç¡®ä¿<code>OPENPROJECT_HOST__NAME</code>ä¸è®¿é—®åŸŸåä¸€è‡´ï¼ˆä¸å¡«å†™0.0.0.0/*/å†…ç½‘IPï¼‰ï¼›è‹¥å‡ºç°é‡å®šå‘å¾ªç¯ï¼Œç¡®ä¿<code>X-Forwarded-Proto</code>ï¼ˆNginxï¼‰/Traefik TLSè½¬å‘é…ç½®æ­£ç¡®ã€‚</p>
</li>
<li>
<p><strong>é›†ç¾¤Sessionå¤±æ•ˆé—®é¢˜</strong>ï¼š
è‹¥å‡ºç°ç”¨æˆ·é¢‘ç¹ç™»å‡ºï¼ŒéªŒè¯æ‰€æœ‰Web/Workerå®ä¾‹æ˜¯å¦ä½¿ç”¨ç»Ÿä¸€çš„<code>SECRET_KEY_BASE</code>ï¼Œç¡®ä¿Docker Secretæ­£ç¡®æŒ‚è½½ä¸”æœªé‡å¤ç”Ÿæˆï¼Œ<strong>ä¸¥ç¦åœ¨ç”Ÿäº§ç¯å¢ƒåŠ¨æ€ç”Ÿæˆè¯¥å¯†é’¥</strong>ã€‚</p>
</li>
</ol>
<h3 data-id="heading-41">æ•°æ®å·/å¤‡ä»½é—®é¢˜</h3>
<ol>
<li>
<p><strong>æ•°æ®å·æŸåä¿®å¤</strong>ï¼š</p>
<ul>
<li>åœæ­¢å®¹å™¨/æœåŠ¡ï¼š<code>docker stop &lt;å®¹å™¨åç§°&gt;</code> / <code>docker service scale openproject_web=0</code></li>
<li>åˆ›å»ºæ–°æ•°æ®å·ï¼š<code>docker volume create &lt;æ–°æ•°æ®å·åç§°&gt;</code></li>
<li>ä»å¤‡ä»½æ¢å¤æ•°æ®ï¼š<code>docker run --rm -v &lt;æ–°æ•°æ®å·åç§°&gt;:/target -v &lt;å¤‡ä»½ç›®å½•&gt;:/backup alpine tar -xzf /backup/&lt;å¤‡ä»½æ–‡ä»¶&gt;.tar.gz -C /target</code></li>
<li>ä½¿ç”¨æ–°æ•°æ®å·å¯åŠ¨å®¹å™¨/æœåŠ¡ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¤‡ä»½è„šæœ¬æ‰§è¡Œå¤±è´¥</strong>ï¼š</p>
<ul>
<li>æ£€æŸ¥è„šæœ¬æ‰§è¡Œæƒé™ï¼š<code>chmod +x &lt;å¤‡ä»½è„šæœ¬è·¯å¾„&gt;</code></li>
<li>æ£€æŸ¥crontabæ—¥å¿—ï¼š<code>tail -f /var/log/cron</code></li>
<li>æ‰‹åŠ¨æ‰§è¡Œè„šæœ¬ï¼ŒæŸ¥çœ‹é”™è¯¯ä¿¡æ¯ï¼š<code>/var/backups/openproject/backup_openproject.sh</code></li>
<li>é›†ç¾¤ç¯å¢ƒï¼šç¡®ä¿å¤‡ä»½è„šæœ¬å¯è®¿é—®Swarmæ•°æ®å·/å¯¹è±¡å­˜å‚¨ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-42">é›†ç¾¤å¤šå‰¯æœ¬æ•°æ®é”™ä¹±é—®é¢˜</h3>
<ol>
<li>è‹¥å‡ºç°é™„ä»¶ä¸¢å¤±ã€å¯¼å‡ºæ–‡ä»¶404ï¼Œä¼˜å…ˆéªŒè¯å¯¹è±¡å­˜å‚¨é…ç½®æ˜¯å¦æ­£ç¡®ï¼š
<pre><code class="hljs language-bash" lang="bash">docker service logs openproject_web | grep fog  <span class="hljs-comment"># æŸ¥çœ‹å¯¹è±¡å­˜å‚¨ç›¸å…³æ—¥å¿—</span>
</code></pre>
</li>
<li>æœªå¯ç”¨å¯¹è±¡å­˜å‚¨çš„é›†ç¾¤ï¼Œç«‹å³å°†WebæœåŠ¡å‰¯æœ¬æ•°è°ƒæ•´ä¸º1ï¼š<code>docker service scale openproject_web=1</code></li>
<li>æ›´æ¢ä¸ºS3/MinIOå¯¹è±¡å­˜å‚¨ï¼Œé‡æ–°éƒ¨ç½²Stackã€‚</li>
</ol>
<h2 data-id="heading-43">é«˜çº§æ“ä½œ</h2>
<h3 data-id="heading-44">è‡ªå®šä¹‰æ’ä»¶å®‰è£…</h3>
<p>OpenProjectå®˜æ–¹é•œåƒä¸ç›´æ¥æ”¯æŒæ’ä»¶å®‰è£…ï¼Œéœ€é€šè¿‡æ„å»ºè‡ªå®šä¹‰é•œåƒå®ç°ï¼Œä»¥ä¸‹ä»¥å®‰è£…<code>openproject-slack</code>æ’ä»¶ä¸ºä¾‹ï¼Œ<strong>ä»…ä½¿ç”¨slimç‰ˆç¨³å®šé•œåƒ</strong>ï¼š</p>
<h4 data-id="heading-45">1. å‡†å¤‡æ„å»ºæ–‡ä»¶</h4>
<p>åˆ›å»º<code>custom-openproject</code>ç›®å½•ï¼Œåœ¨ç›®å½•å†…åˆ›å»ºä»¥ä¸‹æ–‡ä»¶ï¼š</p>
<ul>
<li>
<p><code>Gemfile.plugins</code>ï¼ˆæ’ä»¶ä¾èµ–é…ç½®ï¼‰ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">group <span class="hljs-symbol">:opf_plugins</span> <span class="hljs-keyword">do</span>
  gem <span class="hljs-string">"openproject-slack"</span>, <span class="hljs-symbol">git:</span> <span class="hljs-string">"https://github.com/opf/openproject-slack.git"</span>, <span class="hljs-symbol">branch:</span> <span class="hljs-string">"dev"</span>
<span class="hljs-keyword">end</span>
</code></pre>
</li>
<li>
<p><code>Dockerfile</code>ï¼ˆæ„å»ºè‡ªå®šä¹‰é•œåƒï¼Œslimç‰ˆç¨³å®šç‰ˆç¤ºä¾‹ï¼‰ï¼š</p>
<pre><code class="hljs language-dockerfile" lang="dockerfile"># é˜¶æ®µ1ï¼šå®‰è£…æ’ä»¶å¹¶é¢„ç¼–è¯‘èµ„æº
FROM vipxxx.xuanyuan.run/openproject/openproject:17.0.0-slim AS plugin

COPY Gemfile.plugins /app/

# å®‰è£…æ’ä»¶ä¾èµ–
RUN bundle config unset deployment &amp;&amp; bundle install &amp;&amp; bundle config set deployment 'true'
RUN ./docker/prod/setup/precompile-assets.sh

# é˜¶æ®µ2ï¼šæ„å»ºæœ€ç»ˆé•œåƒ
FROM vipxxx.xuanyuan.run/openproject/openproject:17.0.0-slim

# å¤åˆ¶æ’ä»¶ç›¸å…³æ–‡ä»¶
COPY --from=plugin /usr/bin/git /usr/bin/git
COPY --chown=$APP_USER:$APP_USER --from=plugin /app/vendor/bundle /app/vendor/bundle
COPY --chown=$APP_USER:$APP_USER --from=plugin /app/public/assets /app/public/assets
COPY --chown=$APP_USER:$APP_USER --from=plugin /app/config/frontend_assets.manifest.json /app/config/frontend_assets.manifest.json
COPY --chown=$APP_USER:$APP_USER --from=plugin /app/Gemfile.* /app/
</code></pre>
</li>
</ul>
<h4 data-id="heading-46">2. æ„å»ºè‡ªå®šä¹‰é•œåƒ</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> custom-openproject
docker build --pull -t openproject-with-slack:17.0.0-slim .
</code></pre>
<h4 data-id="heading-47">3. è¿è¡Œè‡ªå®šä¹‰é•œåƒ</h4>
<pre><code class="hljs language-bash" lang="bash">docker run -d \
  --name openproject-with-slack \
  --restart=always \
  -p 8080:80 \
  -e SECRET_KEY_BASE=your-fixed-secret-key-here \  <span class="hljs-comment"># å›ºå®šå€¼ï¼Œç¦æ­¢åŠ¨æ€ç”Ÿæˆ</span>
  -e OPENPROJECT_HOST__NAME=localhost:8080 \
  -e OPENPROJECT_HTTPS=<span class="hljs-literal">false</span> \
  openproject-with-slack:17.0.0-slim
</code></pre>
<h3 data-id="heading-48">è‡ªç­¾åè¯ä¹¦å¯¼å…¥</h3>
<p>è‹¥éœ€è¿æ¥ä½¿ç”¨è‡ªç­¾åè¯ä¹¦çš„å¤–éƒ¨æœåŠ¡ï¼ˆå¦‚SMTPã€MinIOï¼‰ï¼Œéœ€å°†æ ¹è¯ä¹¦å¯¼å…¥å®¹å™¨ï¼Œæä¾›ä¸¤ç§æ–¹æ¡ˆï¼ˆä»…é’ˆå¯¹slimç‰ˆï¼‰ï¼š</p>
<h4 data-id="heading-49">æ–¹æ¡ˆ1ï¼šæŒ‚è½½è¯ä¹¦å¹¶é…ç½®ç¯å¢ƒå˜é‡</h4>
<pre><code class="hljs language-bash" lang="bash">docker run -d \
  --name openproject-with-ca \
  --restart=always \
  -p 8080:80 \
  -e SECRET_KEY_BASE=your-fixed-secret-key-here \  <span class="hljs-comment"># å›ºå®šå€¼ï¼Œç¦æ­¢åŠ¨æ€ç”Ÿæˆ</span>
  -e OPENPROJECT_HOST__NAME=localhost:8080 \
  -e OPENPROJECT_HTTPS=<span class="hljs-literal">false</span> \
  --mount <span class="hljs-built_in">type</span>=<span class="hljs-built_in">bind</span>,<span class="hljs-built_in">source</span>=$(<span class="hljs-built_in">pwd</span>)/root.crt,target=/tmp/root.crt \
  -e SSL_CERT_FILE=/tmp/root.crt \
  vipxxx.xuanyuan.run/openproject/openproject:17.0.0-slim
</code></pre>
<h4 data-id="heading-50">æ–¹æ¡ˆ2ï¼šæ„å»ºè‡ªå®šä¹‰é•œåƒå¯¼å…¥è¯ä¹¦</h4>
<pre><code class="hljs language-dockerfile" lang="dockerfile">FROM vipxxx.xuanyuan.run/openproject/openproject:17.0.0-slim

USER root
COPY ./root.crt /usr/local/share/ca-certificates/
RUN update-ca-certificates
USER $APP_USER
</code></pre>
<p>æ„å»ºå¹¶è¿è¡Œé•œåƒï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker build -t openproject-with-custom-ca:17.0.0-slim .
docker run -d --name openproject-with-ca --restart=always -p 8080:80 openproject-with-custom-ca:17.0.0-slim
</code></pre>
<h3 data-id="heading-51">ç¦»çº¿/æ°”éš™ç¯å¢ƒéƒ¨ç½²</h3>
<p>åœ¨æ— äº’è”ç½‘è®¿é—®çš„æœåŠ¡å™¨ä¸Šéƒ¨ç½²OpenProjectï¼Œéœ€å…ˆåœ¨æœ‰ç½‘ç»œçš„ç¯å¢ƒä¸‹æ‹‰å–é•œåƒå¹¶å¯¼å‡ºï¼Œå†ä¼ è¾“åˆ°ç›®æ ‡æœåŠ¡å™¨å¯¼å…¥ï¼ˆä»…é’ˆå¯¹slimç‰ˆç¨³å®šé•œåƒï¼‰ï¼š</p>
<h4 data-id="heading-52">1. æœ‰ç½‘ç»œç¯å¢ƒå¯¼å‡ºé•œåƒ</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‹‰å–ç¨³å®šç‰ˆslimé•œåƒ</span>
docker pull vipxxx.xuanyuan.run/openproject/openproject:17.0.0-slim-bim

<span class="hljs-comment"># å¯¼å‡ºé•œåƒä¸ºå‹ç¼©åŒ…</span>
docker save vipxxx.xuanyuan.run/openproject/openproject:17.0.0-slim-bim | gzip &gt; openproject-17.0.0-slim-bim.tar.gz
</code></pre>
<h4 data-id="heading-53">2. ä¼ è¾“é•œåƒåˆ°ç›®æ ‡æœåŠ¡å™¨</h4>
<p>é€šè¿‡SFTPã€SCPæˆ–Uç›˜ç­‰æ–¹å¼ï¼Œå°†<code>openproject-17.0.0-slim-bim.tar.gz</code>ä¼ è¾“åˆ°ç¦»çº¿æœåŠ¡å™¨ã€‚</p>
<h4 data-id="heading-54">3. ç¦»çº¿æœåŠ¡å™¨å¯¼å…¥é•œåƒ</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯¼å…¥é•œåƒ</span>
gunzip openproject-17.0.0-slim-bim.tar.gz
docker load -i openproject-17.0.0-slim-bim.tar

<span class="hljs-comment"># åç»­éƒ¨ç½²æ­¥éª¤ä¸åœ¨çº¿ç¯å¢ƒä¸€è‡´ï¼ˆéœ€æå‰å‡†å¤‡å¤–éƒ¨æ•°æ®åº“ã€å¯¹è±¡å­˜å‚¨ç­‰ä¾èµ–ï¼‰</span>
</code></pre>
<h3 data-id="heading-55">ç”Ÿäº§ç¯å¢ƒå‡çº§æµç¨‹ï¼ˆæ»šåŠ¨å‡çº§ï¼Œé¿å…æœåŠ¡ä¸­æ–­ï¼‰</h3>
<p>OpenProjectå‡çº§éœ€éµå¾ª"å¤‡ä»½â†’éªŒè¯â†’å‡çº§â†’æµ‹è¯•"æµç¨‹ï¼Œç”Ÿäº§ç¯å¢ƒæ¨èæ»šåŠ¨å‡çº§ï¼Œé¿å…æœåŠ¡ä¸­æ–­ï¼š</p>
<h4 data-id="heading-56">1. å‡çº§å‰å‡†å¤‡ï¼ˆå¿…å¤‡ï¼‰</h4>
<ul>
<li>å¤‡ä»½æ‰€æœ‰æ•°æ®ï¼ˆé…ç½®ã€æ•°æ®åº“ã€å¯¹è±¡å­˜å‚¨ï¼‰ã€‚</li>
<li>æŸ¥çœ‹å®˜æ–¹å‡çº§æ–‡æ¡£ï¼Œç¡®è®¤ç‰ˆæœ¬é—´å…¼å®¹æ€§ï¼ˆå¦‚16.xâ†’17.xæ˜¯å¦æœ‰é‡å¤§å˜æ›´ï¼‰ã€‚</li>
<li>æ‹‰å–ç›®æ ‡ç‰ˆæœ¬ç¨³å®šç‰ˆslimé•œåƒï¼š<code>docker pull vipxxx.xuanyuan.run/openproject/openproject:17.1.0-slim-bim</code>ã€‚</li>
</ul>
<h4 data-id="heading-57">2. å•èŠ‚ç‚¹éƒ¨ç½²å‡çº§ï¼ˆåœæœºå‡çº§ï¼Œé€‚åˆå°å‹ä¸šåŠ¡ï¼‰</h4>
<ul>
<li>åœæ­¢å®¹å™¨ï¼š<code>docker stop openproject-prod</code></li>
<li>å¤‡ä»½å®¹å™¨æ•°æ®ï¼š<code>docker commit openproject-prod openproject-prod-backup:17.0.0</code></li>
<li>å¯åŠ¨æ–°ç‰ˆæœ¬å®¹å™¨ï¼ˆä½¿ç”¨åŸæœ‰æ•°æ®å·/é…ç½®ï¼‰ï¼š<code>docker run -d --name openproject-prod --restart=always ... vipxxx.xuanyuan.run/openproject/openproject:17.1.0-slim-bim</code></li>
<li>éªŒè¯æœåŠ¡çŠ¶æ€ï¼š<code>docker logs -f openproject-prod</code>ï¼Œç¡®è®¤æ— æŠ¥é”™ä¸”å¥åº·çŠ¶æ€ä¸º<code>healthy</code>ï¼ˆé€šè¿‡<code>docker inspect</code>æŸ¥çœ‹ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-58">3. é›†ç¾¤éƒ¨ç½²å‡çº§ï¼ˆæ»šåŠ¨å‡çº§ï¼Œé€‚åˆå¤§è§„æ¨¡ä¸šåŠ¡ï¼‰</h4>
<ul>
<li>æ‹‰å–ç›®æ ‡ç‰ˆæœ¬é•œåƒï¼ˆæ‰€æœ‰é›†ç¾¤èŠ‚ç‚¹ï¼‰ï¼š<code>docker pull vipxxx.xuanyuan.run/openproject/openproject:17.1.0-slim-bim</code></li>
<li>æ›´æ–°Stacké…ç½®æ–‡ä»¶ä¸­çš„é•œåƒç‰ˆæœ¬ä¸º<code>17.1.0-slim-bim</code></li>
<li>æ»šåŠ¨æ›´æ–°Stackï¼š<code>docker stack deploy -c openproject-stack.yml openproject</code></li>
<li>æŸ¥çœ‹å‡çº§è¿›åº¦ï¼š<code>docker service ps openproject_web</code>ï¼Œç¡®ä¿æ‰€æœ‰å®ä¾‹å‡å·²æ›´æ–°ä¸”æ— å¤±è´¥</li>
<li>éªŒè¯æœåŠ¡åŠŸèƒ½ï¼šè®¿é—®Webç•Œé¢ï¼Œæµ‹è¯•æ ¸å¿ƒåŠŸèƒ½ï¼ˆé™„ä»¶ä¸Šä¼ ã€ä»»åŠ¡åˆ›å»ºç­‰ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-59">å‚è€ƒèµ„æº</h2>
<ol>
<li>è½©è¾•é•œåƒOpenProjectæ–‡æ¡£ï¼š<code>https://xuanyuan.cloud/r/openproject/openproject</code></li>
<li>è½©è¾•é•œåƒOpenProjectæ ‡ç­¾åˆ—è¡¨ï¼š<code>https://xuanyuan.cloud/r/openproject/openproject/tags</code></li>
<li>OpenProjectå®˜æ–¹Dockerå®‰è£…æŒ‡å—ï¼š<code>https://docs.openproject.org/installation-and-operations/installation/docker</code></li>
<li>OpenProjectç¯å¢ƒå˜é‡é…ç½®æ–‡æ¡£ï¼š<code>https://docs.openproject.org/installation-and-operations/configuration/environment-variables</code></li>
<li>Docker Swarmå®˜æ–¹æ–‡æ¡£ï¼š<code>https://docs.docker.com/swarm</code></li>
<li>Traefik Swarméƒ¨ç½²æŒ‡å—ï¼š<code>https://doc.traefik.io/traefik/providers/docker</code></li>
</ol>
<h2 data-id="heading-60">æ€»ç»“</h2>
<h3 data-id="heading-61">æ ¸å¿ƒè¦ç‚¹</h3>
<ol>
<li>OpenProject Dockeré•œåƒåˆ†ä¸º<code>all-in-one</code>ï¼ˆä»…æµ‹è¯•/PoC/æ¼”ç¤ºï¼‰å’Œ<code>slim</code>ï¼ˆç”Ÿäº§ç¯å¢ƒå”¯ä¸€æ¨èï¼‰ï¼Œç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨<strong>ç¨³å®šç‰ˆéæµ®åŠ¨æ ‡ç­¾</strong>ï¼ˆå¦‚17.0.0-slim-bimï¼‰ï¼Œä¸¥ç¦ä½¿ç”¨RC/devæ ‡ç­¾ã€‚</li>
<li>ç”Ÿäº§ç¯å¢ƒæ ¸å¿ƒä¿éšœï¼š<strong>æ•°æ®æŒä¹…åŒ–ï¼ˆå¯¹è±¡å­˜å‚¨ä¼˜å…ˆï¼‰ã€å®šæœŸè‡ªåŠ¨å¤‡ä»½ã€HTTPSåŠ å¯†</strong>ï¼Œå…¶ä¸­é›†ç¾¤éƒ¨ç½²å¿…é¡»ä½¿ç”¨S3/MinIOå¯¹è±¡å­˜å‚¨è§£å†³å¤šå‰¯æœ¬æ•°æ®é”™ä¹±é—®é¢˜ã€‚</li>
<li>Docker Swarmé›†ç¾¤éƒ¨ç½²å…³é”®ï¼šç»Ÿä¸€<code>SECRET_KEY_BASE</code>ï¼ˆDocker Secretï¼Œç¦æ­¢åŠ¨æ€ç”Ÿæˆï¼‰ã€ä¸“ä¸šåå‘ä»£ç†ï¼ˆTraefik/Nginxï¼Œè¡¥å……å®Œæ•´router/ruleé…ç½®ï¼‰ã€æ˜ç¡®PostgreSQLå•ç‚¹æ¼”ç¤ºé£é™©ã€ç»™WorkeræœåŠ¡æ·»åŠ èµ„æºé™åˆ¶ï¼Œé¿å…ç”Ÿäº§äº‹æ•…ã€‚</li>
<li>å®¹å™¨è¿è¡Œé»˜è®¤érootç”¨æˆ·ï¼Œç”Ÿäº§ç¯å¢ƒå‡­æ®ï¼ˆSMTP/DBï¼‰ä¸¥ç¦æ˜æ–‡ï¼Œæ¨èä½¿ç”¨Docker Secret/.envæ–‡ä»¶ç®¡ç†ï¼ŒåŒæ—¶é…ç½®<code>--restart=always</code>ï¼Œä¾èµ–å®˜æ–¹é•œåƒå†…ç½®å¥åº·æ£€æŸ¥ï¼ˆå…¼å®¹æ–¹æ¡ˆä¸º<code>curl -f http://localhost/</code>ï¼‰ã€‚</li>
<li>è‡ªå®šä¹‰æ’ä»¶ã€è‡ªç­¾åè¯ä¹¦ç­‰é«˜çº§éœ€æ±‚ï¼Œéœ€é€šè¿‡æ„å»ºè‡ªå®šä¹‰Dockeré•œåƒå®ç°ï¼Œå‡çº§å‰å¿…é¡»å¤‡ä»½æ•°æ®ï¼Œéµå¾ªå®˜æ–¹å…¼å®¹æ€§æ–‡æ¡£ï¼›<code>--memory-swap</code>åœ¨cgroup v2ç¯å¢ƒä¸­å­˜åœ¨æ— æ•ˆé£é™©ï¼Œ<code>OPENPROJECT_HOST__NAME</code>ç¦æ­¢å¡«å†™0.0.0.0/*/å†…ç½‘IPã€‚</li>
<li>ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œ<code>SECRET_KEY_BASE</code>å¿…é¡»å›ºå®šå€¼ï¼Œä¸¥ç¦åœ¨<code>docker run</code>ä¸­åŠ¨æ€ç”Ÿæˆï¼Œå¦åˆ™å®¹å™¨é‡å»º/æ‰©å®¹åä¼šå¯¼è‡´Sessionå¤±æ•ˆã€ç”¨æˆ·é¢‘ç¹ç™»å‡ºã€‚</li>
</ol>
<h3 data-id="heading-62">å…¸å‹ç”Ÿäº§äº‹æ•…æ¡ˆä¾‹ï¼ˆé¿å‘æŒ‡å—ï¼‰</h3>
<ol>
<li><code>SECRET_KEY_BASE</code>ä¸ä¸€è‡´/åŠ¨æ€ç”Ÿæˆï¼šé›†ç¾¤å¤šå‰¯æœ¬å„è‡ªç”Ÿæˆå¯†é’¥ï¼Œå¯¼è‡´ç”¨æˆ·é¢‘ç¹ç™»å‡ºã€Cookieè§£å¯†å¤±è´¥ï¼Œè§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨Docker Secretç»Ÿä¸€ç®¡ç†å¹¶å›ºå®šå¯†é’¥ã€‚</li>
<li>å¤šå‰¯æœ¬Web+æœ¬åœ°æ–‡ä»¶å­˜å‚¨ï¼šé™„ä»¶è¦†ç›–ã€ä¸¢å¤±ã€ä¸‹è½½404ï¼Œè§£å†³æ–¹æ¡ˆï¼šåˆ‡æ¢åˆ°S3/MinIOå¯¹è±¡å­˜å‚¨ï¼Œæˆ–ä¿æŒå•å‰¯æœ¬ã€‚</li>
<li>OpenProjectä½œä¸ºåå‘ä»£ç†ï¼šèµ„æºæµªè´¹ã€æ¶æ„æ··ä¹±ï¼ŒåæœŸç»´æŠ¤å›°éš¾ï¼Œè§£å†³æ–¹æ¡ˆï¼šæ›¿æ¢ä¸ºTraefik/Nginxä¸“ä¸šä»£ç†ï¼Œå¹¶è¡¥å……å®Œæ•´æš´éœ²è§„åˆ™ã€‚</li>
<li>all-in-oneç”¨äºæ ¸å¿ƒç”Ÿäº§ï¼šæ— æ³•ç‹¬ç«‹æ‰©å®¹ã€å‡çº§é£é™©é«˜ã€æ•…éšœå½±å“èŒƒå›´å¤§ï¼Œè§£å†³æ–¹æ¡ˆï¼šè¿ç§»åˆ°slimç‰ˆ+å¤–éƒ¨ä¾èµ–ï¼ˆDB/Cache/å¯¹è±¡å­˜å‚¨ï¼‰ã€‚</li>
<li>HTTPSé‡å®šå‘å¾ªç¯ï¼š<code>X-Forwarded-Proto</code>é…ç½®ç¼ºå¤±ï¼Œå¯¼è‡´OpenProjectæ— æ³•è¯†åˆ«HTTPSåè®®ï¼Œè§£å†³æ–¹æ¡ˆï¼šåœ¨åå‘ä»£ç†ä¸­æ·»åŠ è¯¥è¯·æ±‚å¤´é…ç½®ã€‚</li>
<li>Swarmç¤ºä¾‹PostgreSQLç…§æŠ„åˆ°ç”Ÿäº§ï¼šç®¡ç†èŠ‚ç‚¹å®•æœºå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œè§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨RDS/Patroniç­‰ç‹¬ç«‹é«˜å¯ç”¨æ•°æ®åº“ï¼ˆPostgreSQLæ¨è13â€“16ï¼‰ã€‚</li>
<li>memcached:latesté•œåƒå¯¼è‡´è¡Œä¸ºå˜æ›´ï¼šç”Ÿäº§ç¯å¢ƒç¼“å­˜æœåŠ¡å¼‚å¸¸ï¼Œè§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨å›ºå®šç¨³å®šç‰ˆæœ¬ï¼ˆå¦‚memcached:1.6-alpineï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-63">åç»­å»ºè®®</h3>
<ol>
<li>æ·±å…¥å­¦ä¹ OpenProjectå®˜æ–¹æ–‡æ¡£ï¼Œé…ç½®LDAPç”¨æˆ·è®¤è¯ã€æ’ä»¶ç®¡ç†ç­‰é«˜çº§åŠŸèƒ½ï¼Œé€‚é…å›¢é˜Ÿä¸šåŠ¡éœ€æ±‚ã€‚</li>
<li>ç»“åˆç›‘æ§å·¥å…·ï¼ˆPrometheusã€Grafanaï¼‰ç›‘æ§å®¹å™¨/é›†ç¾¤è¿è¡ŒçŠ¶æ€ï¼ŒåŠæ—¶å‘ç°å¹¶è§£å†³èµ„æºä¸è¶³ã€æœåŠ¡å¼‚å¸¸ç­‰é—®é¢˜ã€‚</li>
<li>å®šæœŸå…³æ³¨è½©è¾•é•œåƒä¸OpenProjectå®˜æ–¹ç‰ˆæœ¬æ›´æ–°ï¼ŒåŠæ—¶å‡çº§é•œåƒä»¥è·å–æ–°åŠŸèƒ½ä¸å®‰å…¨è¡¥ä¸ï¼Œå‡çº§å‰éœ€å…ˆå¤‡ä»½æ•°æ®å¹¶åœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯ã€‚</li>
<li>å¯¹äºè¶…å¤§è§„æ¨¡å›¢é˜Ÿï¼Œå¯è€ƒè™‘ä½¿ç”¨Kubernetesæ›¿ä»£Docker Swarmï¼Œå®ç°æ›´ç²¾ç»†çš„èµ„æºç®¡ç†ä¸æœåŠ¡ç¼–æ’ï¼Œé…åˆHelm Chartç®€åŒ–éƒ¨ç½²æµç¨‹ã€‚</li>
<li>ç”Ÿäº§ç¯å¢ƒå»ºè®®é…ç½®æ•°æ®åº“ä¸»ä»å¤åˆ¶ã€å¯¹è±¡å­˜å‚¨å¤šåŒºåŸŸå¤‡ä»½ï¼Œè¿›ä¸€æ­¥æå‡ç³»ç»Ÿé«˜å¯ç”¨ä¸æ•°æ®å®‰å…¨æ€§ï¼›å•èŠ‚ç‚¹ç”Ÿäº§ç¯å¢ƒä¼˜å…ˆä½¿ç”¨æ•°æ®åº“å±‚å¤‡ä»½ï¼ˆpg_dumpï¼‰æ›¿ä»£å®¹å™¨ç¡¬åœå¤‡ä»½ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-64">æ¶æ„å¯¹ç…§è¡¨ï¼ˆæ¸…æ™°åŒºåˆ†ä¸åŒåœºæ™¯ï¼‰</h3>

































<table><thead><tr><th>éƒ¨ç½²åœºæ™¯</th><th>é•œåƒç‰ˆæœ¬</th><th>æ ¸å¿ƒæ¶æ„</th><th>é€‚ç”¨è§„æ¨¡</th><th>å…³é”®æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td>æµ‹è¯•/PoC/æ¼”ç¤º</td><td>all-in-one</td><td>å•å®¹å™¨å†…ç½®æ‰€æœ‰ä¾èµ–</td><td>ä¸ªäºº/å°å‹å›¢é˜Ÿæ¼”ç¤º</td><td>ä¸¥ç¦ç”¨äºæ ¸å¿ƒç”Ÿäº§ï¼Œæ— éœ€é¢å¤–é…ç½®å¤–éƒ¨æœåŠ¡ï¼Œæ•°æ®è·¯å¾„<code>/var/openproject</code></td></tr><tr><td>å•èŠ‚ç‚¹ç”Ÿäº§</td><td>slim</td><td>å•å®¹å™¨+å¤–éƒ¨DB+æœ¬åœ°/æ•°æ®å·æŒä¹…åŒ–</td><td>ä¸­å°å›¢é˜Ÿæ ¸å¿ƒä¸šåŠ¡</td><td>é…ç½®HTTPSã€å®šæœŸå¤‡ä»½ã€érootè¿è¡Œï¼Œæ•°æ®è·¯å¾„<code>/var/lib/openproject</code>+<code>/etc/openproject</code>ï¼Œ<code>assets</code>ç›®å½•éå¿…éœ€å¯çœç•¥ï¼Œ<code>--memory-swap</code>ä»…ä½œå‚è€ƒ</td></tr><tr><td>é›†ç¾¤ç”Ÿäº§</td><td>slim</td><td>Swarm/K8s+ä¸“ä¸šä»£ç†+å¤–éƒ¨é«˜å¯ç”¨DB+S3/MinIO</td><td>å¤§è§„æ¨¡å›¢é˜Ÿ/é«˜å¹¶å‘åœºæ™¯</td><td>ç»Ÿä¸€åŠ å¯†å¯†é’¥ã€å¯¹è±¡å­˜å‚¨ã€æ»šåŠ¨å‡çº§ã€é«˜å¯ç”¨ä»£ç†ï¼ŒPostgreSQLç¦æ­¢ä½¿ç”¨Swarmå•ç‚¹é…ç½®ï¼ŒTraefikéœ€è¡¥å……labelsæš´éœ²æœåŠ¡</td></tr></tbody></table>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºè§†è§‰å»ºæ¨¡æ³¨å…¥ç‰©ç†çµé­‚ï¼šWaveFormerè¯æ˜ï¼Œä¸‹ä¸€ç«™æ˜¯â€œç‰©ç†å¯å‘æ¨¡å‹â€]]></title>    <link>https://juejin.cn/post/7602474148095279156</link>    <guid>https://juejin.cn/post/7602474148095279156</guid>    <pubDate>2026-02-04T02:51:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602474148095279156" data-draft-id="7602488187408007220" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºè§†è§‰å»ºæ¨¡æ³¨å…¥ç‰©ç†çµé­‚ï¼šWaveFormerè¯æ˜ï¼Œä¸‹ä¸€ç«™æ˜¯â€œç‰©ç†å¯å‘æ¨¡å‹â€"/> <meta itemprop="keywords" content="ç®—æ³•,è®¡ç®—æœºè§†è§‰,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-02-04T02:51:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoovallyAIHub"/> <meta itemprop="url" content="https://juejin.cn/user/2461151071843739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºè§†è§‰å»ºæ¨¡æ³¨å…¥ç‰©ç†çµé­‚ï¼šWaveFormerè¯æ˜ï¼Œä¸‹ä¸€ç«™æ˜¯â€œç‰©ç†å¯å‘æ¨¡å‹â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2461151071843739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoovallyAIHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T02:51:34.000Z" title="Wed Feb 04 2026 02:51:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿‘å¹´æ¥ï¼ŒTransformer å¸­å·äº†è®¡ç®—æœºè§†è§‰é¢†åŸŸï¼Œä»å›¾åƒåˆ†ç±»åˆ°ç›®æ ‡æ£€æµ‹ï¼Œè¡¨ç°äº®çœ¼ã€‚ç„¶è€Œï¼Œå½“ä»»åŠ¡ä»é™æ€å›¾åƒæ‰©å±•åˆ°<strong>è§†é¢‘ç†è§£ã€åŠ¨æ€åœºæ™¯åˆ†æ</strong>æ—¶ï¼ŒTransformerÂ çš„â€œç¡¬æ‰›â€æ¨¡å¼å¼€å§‹æ˜¾éœ²å‡ºæ˜æ˜¾å±€é™ã€‚æœ€è¿‘ï¼Œä¸€ç¯‡åä¸ºÂ ã€ŠWaveFormer: Frequency-Time Decoupled Vision Modeling with Wave Equationã€‹Â çš„è®ºæ–‡ï¼Œæå‡ºç”¨<strong>æ³¢åŠ¨æ–¹ç¨‹</strong>å»ºæ¨¡è§†è§‰ç‰¹å¾ï¼Œè¯•å›¾ä»ç‰©ç†å±‚é¢é‡æ„è§†è§‰è¯­ä¹‰ä¼ æ’­æ–¹å¼ã€‚è¿™æ˜¯å¦åªæ˜¯åˆä¸€ä¸ªâ€œå¬èµ·æ¥å¾ˆç¾ã€ç”¨èµ·æ¥å¾ˆéš¾â€çš„ç†è®ºå°è¯•ï¼Ÿæˆ‘ä»¬ä»Šå¤©ä»å‡ ä¸ªæ ¹æœ¬é—®é¢˜å±•å¼€åˆ†æã€‚</p>
<h2 data-id="heading-0"><strong>ä¸ºä»€ä¹ˆè§†é¢‘ / åŠ¨æ€ç†è§£è¶Šæ¥è¶Šéš¾é  Transformer ç¡¬æ‰›ï¼Ÿ</strong></h2>
<ul>
<li><strong>è®¡ç®—å¤æ‚åº¦çˆ†ç‚¸</strong></li>
</ul>
<p>Transformer æ ¸å¿ƒæ˜¯è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼Œå…¶è®¡ç®—å¤æ‚åº¦ä¸º O(NÂ²)ï¼Œå…¶ä¸­ N æ˜¯åºåˆ—é•¿åº¦ã€‚åœ¨è§†é¢‘ä¸­ï¼Œå¦‚æœæ¯å¸§åˆ’åˆ†ä¸ºå¤šä¸ª patchï¼Œæ—¶é—´ç»´åº¦å†å åŠ ï¼Œåºåˆ—é•¿åº¦æ€¥å‰§å¢åŠ ï¼Œå³ä½¿æ˜¯çº¿æ€§æ³¨æ„åŠ›æˆ–çª—å£æ³¨æ„åŠ›ä¼˜åŒ–ä¹Ÿéš¾ä»¥æ ¹æœ¬è§£å†³ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f008f354b69847dca376db3fb8bd9151~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770778296&amp;x-signature=YquMUERxPdI33oRdmdpEh99Qv0Y%3D" alt="screenshot_2026-02-03_15-24-16.png" loading="lazy"/></p>
<ul>
<li><strong>æ—¶é—´ç»´åº¦å»ºæ¨¡è–„å¼±</strong></li>
</ul>
<p>Transformer æœ¬è´¨ä¸Šæ˜¯å¯¹åºåˆ—å»ºæ¨¡ï¼Œä½†å¯¹æ—¶é—´è¿ç»­æ€§å’ŒåŠ¨æ€æ¼”åŒ–ç¼ºä¹<strong>æ˜¾å¼ç‰©ç†å‡è®¾</strong>ã€‚è§†é¢‘ä¸­çš„è¿åŠ¨ã€å…‰æµã€æ—¶é—´ä¸€è‡´æ€§ç­‰ä¿¡æ¯ï¼Œå¦‚æœåªä¾é æ•°æ®é©±åŠ¨å­¦ä¹ ï¼Œéœ€è¦æå¤§å‚æ•°é‡å’Œæ ·æœ¬é‡ã€‚</p>
<ul>
<li><strong>é«˜é¢‘ç»†èŠ‚ä¸¢å¤±ä¸¥é‡</strong></li>
</ul>
<p>ä¼ ç»Ÿ Transformer åœ¨æ·±å±‚ç½‘ç»œä¸­å®¹æ˜“å¹³æ»‘é«˜é¢‘ä¿¡æ¯ï¼ˆå¦‚è¾¹ç¼˜ã€çº¹ç†ï¼‰ï¼Œè¿™åœ¨é™æ€å›¾åƒä¸­å°šå¯é€šè¿‡è·³è·ƒè¿æ¥ç¼“è§£ï¼Œä½†åœ¨åŠ¨æ€åœºæ™¯ä¸­ï¼Œç»†èŠ‚ä¸¢å¤±ä¼šç´¯ç§¯ï¼Œå½±å“åˆ†å‰²ã€è·Ÿè¸ªç­‰ç²¾ç»†ä»»åŠ¡ã€‚</p>
<p>è¿™äº›ç“¶é¢ˆå¹¶éé â€œå †æ›´å¤§æ¨¡å‹ã€æ›´å¤šæ•°æ®â€å°±èƒ½å½»åº•è§£å†³ï¼Œè€Œæ˜¯éœ€è¦å¼•å…¥<strong>æ–°çš„å½’çº³åç½®ä¸ä¼ æ’­æœºåˆ¶ã€‚</strong></p>
<h2 data-id="heading-1"><strong>WaveFormerï¼šæŠŠç‰¹å¾å½“ä½œâ€œæ³¢â€ï¼Œåˆ°åº•è§£å†³äº†ä»€ä¹ˆï¼Ÿ</strong></h2>
<p>WaveFormer çš„æ ¸å¿ƒæ€æƒ³æ˜¯ <strong>ï¼šå°†ç‰¹å¾å›¾è§†ä¸ºå¯åœ¨ç©ºé—´ä¸­ä¼ æ’­çš„æ³¢åŠ¨ä¿¡å·ï¼Œç”¨é˜»å°¼æ³¢åŠ¨æ–¹ç¨‹æ§åˆ¶å…¶æ¼”åŒ–ã€‚</strong> è¿™ä¸€åšæ³•åœ¨ç‰©ç†ä¸Šæ˜¯å¯è§£é‡Šçš„ï¼Œåœ¨è®¡ç®—ä¸Šæ˜¯é«˜æ•ˆçš„ï¼Œå…³é”®çªç ´åœ¨äºï¼š</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f77d3cf1c0844b959aa49974c63f7e47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770778296&amp;x-signature=rbvFpF7KkMpe8118nIhTFs6fKWY%3D" alt="screenshot_2026-02-03_15-34-41.png" loading="lazy"/></p>
<ul>
<li><strong>é¢‘ç‡-æ—¶é—´è§£è€¦ï¼Œå‘Šåˆ«è¿‡åº¦å¹³æ»‘</strong></li>
</ul>
<p>ä¼ ç»Ÿçƒ­ä¼ å¯¼ç±»æ¯”å¦‚åŒâ€œæ¨¡ç³Šæ»¤é•œâ€ï¼Œé«˜é¢‘æˆåˆ†è¡°å‡è¿‡å¿«ï¼›è€Œæ³¢åŠ¨æ–¹ç¨‹ä¸­çš„æŒ¯è¡æœºåˆ¶å…è®¸é«˜ä½é¢‘æˆåˆ†å…±å­˜ï¼Œ<strong>ç»†èŠ‚å¾—ä»¥ä¿ç•™</strong>ã€‚å…¬å¼ä¸Šï¼Œå…¶é˜»å°¼é¡¹ä¸é¢‘ç‡æ— å…³ï¼ŒæŒ¯è¡é¡¹ä¸é¢‘ç‡ç›¸å…³ï¼Œå½¢æˆè§£è€¦ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04567cac248341c6875e1eaa83940085~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770778296&amp;x-signature=mGE1xIQ3I9baro61uD4dsrxtLDM%3D" alt="screenshot_2026-02-03_15-35-13.png" loading="lazy"/></p>
<ul>
<li><strong>O(N log N) å¤æ‚åº¦ï¼Œå®ç°é«˜æ•ˆé•¿ç¨‹äº¤äº’</strong></li>
</ul>
<p>é€šè¿‡å‚…é‡Œå¶å˜æ¢åœ¨é¢‘åŸŸæ‰§è¡Œä¼ æ’­ï¼ŒWaveFormerÂ é¿å…äº†Â TransformerÂ çš„å¹³æ–¹å¤æ‚åº¦ï¼Œå°¤å…¶é€‚åˆé«˜åˆ†è¾¨ç‡å›¾åƒä¸è§†é¢‘å¸§ã€‚</p>
<ul>
<li><strong>ç‰©ç†å¯è§£é‡Šçš„ä¼ æ’­è¿‡ç¨‹</strong></li>
</ul>
<p>WaveFormer ä¸­çš„â€œæ³¢é€Ÿâ€å’Œâ€œé˜»å°¼â€å‚æ•°å…·æœ‰æ˜ç¡®ç‰©ç†æ„ä¹‰ï¼Œå¯é€šè¿‡å­¦ä¹ è°ƒæ•´ï¼Œé€‚åº”ä¸åŒè¯­ä¹‰çš„ä¼ æ’­éœ€æ±‚ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><strong>ä½é€Ÿ+å¼ºé˜»å°¼</strong> â†’ å±€éƒ¨ç»“æ„ä¿æŒ</li>
<li><strong>é«˜é€Ÿ+å¼±é˜»å°¼</strong>Â â†’ å…¨å±€è¯­ä¹‰æ‰©æ•£</li>
</ul>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f05be70bcb644d0e93abbf6f69670b65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770778296&amp;x-signature=uwOcRUOCVEKdiS6M6KrfquEaZk4%3D" alt="screenshot_2026-02-03_15-36-28.png" loading="lazy"/></p>
<h2 data-id="heading-2"><strong>è¿™æ˜¯ä¸æ˜¯ä¸€ä¸ªâ€œçœ‹èµ·æ¥å¾ˆç¾ï¼Œä½†éš¾è½åœ°â€çš„æ–¹å‘ï¼Ÿ</strong></h2>
<p>æˆ‘ä»¬è®¤ä¸ºï¼ŒWaveFormer çš„ä»·å€¼ä¸ä»…åœ¨äºç†è®ºæ–°é¢–æ€§ï¼Œæ›´åœ¨äºå®ƒå›åº”äº†å½“å‰è§†è§‰å»ºæ¨¡çš„è‹¥å¹²æœ¬è´¨é—®é¢˜ï¼Œå¹¶åœ¨å®éªŒä¸­è¡¨ç°å‡ºå¯è½åœ°çš„æ½œåŠ›ï¼š</p>
<p>âœ… å·²éªŒè¯çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>åœ¨Â ImageNetã€COCOã€ADE20KÂ ä¸Šè¾¾åˆ° SOTA æˆ–ç›¸è¿‘ç²¾åº¦ï¼Œ<strong>FLOPs é™ä½ã€ååé‡æå‡</strong></li>
<li>åœ¨è¯­ä¹‰åˆ†å‰²ä»»åŠ¡ä¸­ï¼Œ<strong>è¾¹ç•Œä¿æŒæ˜æ˜¾ä¼˜äºçƒ­ä¼ å¯¼ç±»æ–¹æ³•</strong></li>
<li>æ¨¡å—å¯åµŒå…¥ç°æœ‰Â CNN / TransformerÂ æ¶æ„ï¼Œä½œä¸ºä¼ æ’­æ¨¡å—ä½¿ç”¨</li>
</ul>
<p>ğŸ”„ å¾…éªŒè¯çš„æ–¹å‘ï¼š</p>
<ul>
<li>åœ¨é•¿è§†é¢‘ç†è§£ã€å…‰æµä¼°è®¡ç­‰å¼ºæ—¶åºä»»åŠ¡ä¸­çš„è¡¨ç°</li>
<li>ä¸åŠ¨æ€å·ç§¯ã€çŠ¶æ€ç©ºé—´æ¨¡å‹ç­‰æ–°å…´æ¶æ„çš„èåˆæ½œåŠ›</li>
<li>åœ¨è¾¹ç¼˜è®¾å¤‡ä¸Šçš„å®é™…éƒ¨ç½²æ•ˆç‡</li>
</ul>
<h2 data-id="heading-3"><strong>ä»â€œç¡¬æ‰›â€åˆ°â€œå·§è§£â€ï¼šè§†è§‰å»ºæ¨¡çš„æ–°èŒƒå¼æ˜¯å¦æ­£åœ¨å½¢æˆï¼Ÿ</strong></h2>
<p>WaveFormer æš—ç¤ºäº†ä¸€ä¸ªè¶‹åŠ¿ï¼šè§†è§‰å»ºæ¨¡æ­£ä»<strong>çº¯ç²¹æ•°æ®é©±åŠ¨çš„é»‘ç®±æ¨¡å‹ï¼Œå‘ç‰©ç†å¯å‘ã€ç»“æ„å¯è§£é‡Šã€è®¡ç®—é«˜æ•ˆ</strong>çš„ç™½ç®±æ¨¡å‹è¿‡æ¸¡ã€‚æ³¢åŠ¨æ–¹ç¨‹ä¸æ˜¯å”¯ä¸€è·¯å¾„ï¼Œçƒ­ä¼ å¯¼ã€æ‰©æ•£æ¨¡å‹ã€å¼¹ç°§ç³»ç»Ÿç­‰ç‰©ç†æ¨¡å‹éƒ½å¯èƒ½å¸¦æ¥æ–°çš„æ¨¡å—è®¾è®¡ã€‚</p>
<p>å°¤å…¶å€¼å¾—å…³æ³¨çš„æ˜¯ï¼Œè¿™ç§æœºåˆ¶ä¸º<strong>å¤šé¢‘è¯­ä¹‰å»ºæ¨¡</strong>æä¾›äº†ç»Ÿä¸€æ¡†æ¶ï¼šä½é¢‘æ‰¿è½½å…¨å±€å¸ƒå±€ï¼Œé«˜é¢‘ä¿æŒç»†èŠ‚çº¹ç†ï¼Œè€Œä¼ æ’­è¿‡ç¨‹å¯æ§å¯è°ƒã€‚</p>
<h2 data-id="heading-4"><strong>æ€»ç»“</strong></h2>
<p>Transformer ä¸æ˜¯è§†è§‰çš„ç»ˆç‚¹ï¼Œå°¤å…¶åœ¨åŠ¨æ€ã€é«˜åˆ†è¾¨ç‡ã€ç»†ç²’åº¦ä»»åŠ¡ä¸­ï¼Œå…¶å±€é™æ€§æ—¥ç›Šæ˜æ˜¾ã€‚WaveFormer é€šè¿‡æ³¢åŠ¨æ–¹ç¨‹é‡æ–°æ€è€ƒç‰¹å¾ä¼ æ’­æœºåˆ¶ï¼Œåœ¨é¢‘ç‡-æ—¶é—´è§£è€¦ã€è®¡ç®—æ•ˆç‡ã€ç»†èŠ‚ä¿æŒç­‰æ–¹é¢æ˜¾ç¤ºå‡ºæ˜ç¡®ä¼˜åŠ¿ã€‚å®ƒæˆ–è®¸ä¸æ˜¯æœ€ç»ˆç­”æ¡ˆï¼Œä½†å®ƒæŒ‡å‡ºäº†ä¸€ä¸ªå€¼å¾—æ¢ç´¢çš„æ–¹å‘ï¼š<strong>è§†è§‰å»ºæ¨¡å¯ä»¥æ›´æœ‰ç‰©ç†æ„Ÿã€å¯è§£é‡Šã€é«˜æ•ˆåŒ–ã€‚</strong></p>
<p>è®ºæ–‡ä»£ç å·²å¼€æºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FZishanShu%2FWaveFormer" target="_blank" title="https://github.com/ZishanShu/WaveFormer" ref="nofollow noopener noreferrer">github.com/ZishanShu/Wâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»â€œæ‹’ç»è¿æ¥â€åˆ°â€œ500é”™è¯¯â€ï¼Œæˆ‘æ‰‹æŠŠæ‰‹æ’é€šäº†Djangoéƒ¨ç½²çš„å‘ğŸ¥¶]]></title>    <link>https://juejin.cn/post/7602497125268029446</link>    <guid>https://juejin.cn/post/7602497125268029446</guid>    <pubDate>2026-02-03T23:15:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602497125268029446" data-draft-id="7602211941513953334" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»â€œæ‹’ç»è¿æ¥â€åˆ°â€œ500é”™è¯¯â€ï¼Œæˆ‘æ‰‹æŠŠæ‰‹æ’é€šäº†Djangoéƒ¨ç½²çš„å‘ğŸ¥¶"/> <meta itemprop="keywords" content="Python,Linux"/> <meta itemprop="datePublished" content="2026-02-03T23:15:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Sheffield"/> <meta itemprop="url" content="https://juejin.cn/user/362164852109770"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»â€œæ‹’ç»è¿æ¥â€åˆ°â€œ500é”™è¯¯â€ï¼Œæˆ‘æ‰‹æŠŠæ‰‹æ’é€šäº†Djangoéƒ¨ç½²çš„å‘ğŸ¥¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/362164852109770/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Sheffield
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T23:15:09.000Z" title="Tue Feb 03 2026 23:15:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œä¸ºä¸€åè¿ç»´å…¼èœé¸Ÿå¼€å‘ï¼Œæœ¬åœ°è·‘é€šDjangoé¡¹ç›®ä¸ç®—éš¾ï¼Œä½†éƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼ˆCentOS 7ï¼‰ã€æ­é…Nginx+Gunicornæ—¶ï¼Œæ€»ä¼šé‡åˆ°å„ç§å¥‡å¥‡æ€ªæ€ªçš„æŠ¥é”™â€”â€”ç›¸ä¿¡å¾ˆå¤šæ–°æ‰‹å’Œæˆ‘ä¸€æ ·ï¼Œä»â€œç½‘é¡µæ— æ³•è®¿é—®â€åˆ°â€œ500 Internal Server Errorâ€ï¼Œä¸€æ­¥æ­¥è¸©å‘ï¼Œä¸€æ­¥æ­¥æ’æŸ¥ï¼Œæœ€ç»ˆæ‰æ‰¾åˆ°é—®é¢˜æ ¹æºã€‚</p>
<p>ä»Šå¤©å°±æŠŠæˆ‘è¿™æ¬¡å®Œæ•´çš„æ’é”™ç»å†è®°å½•ä¸‹æ¥ï¼Œè¿˜åŸæ¯ä¸€ä¸ªæŠ¥é”™åœºæ™¯ã€å®æ“å‘½ä»¤å’Œæ’æŸ¥æ€è·¯ï¼Œå¸Œæœ›èƒ½å¸®åˆ°æ­£åœ¨è¢«Djangoéƒ¨ç½²æŠ˜ç£¨çš„ä½ ï¼ˆå…¨ç¨‹åŸºäºPython 3.6ã€Django 2.2/3.2ã€Nginx 1.20ã€Gunicorn 20.1.0ï¼‰ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€éƒ¨ç½²ç¯å¢ƒä¸åˆå§‹é—®é¢˜</h2>
<p>å…ˆäº¤ä»£ä¸‹æˆ‘çš„éƒ¨ç½²æ¶æ„ï¼Œç»å…¸ç»„åˆï¼š</p>
<ul>
<li>æœåŠ¡å™¨ï¼šCentOS 7</li>
<li>åç«¯ï¼šDjangoé¡¹ç›®ï¼ˆé¡¹ç›®åHealthForumï¼‰</li>
<li>WSGIæœåŠ¡å™¨ï¼šGunicornï¼ˆç›‘å¬127.0.0.1:8000ï¼‰</li>
<li>åå‘ä»£ç†ï¼šNginxï¼ˆç›‘å¬80ç«¯å£ï¼Œè½¬å‘è¯·æ±‚åˆ°Gunicornçš„8000ç«¯å£ï¼‰</li>
<li>ä¾èµ–ï¼šMySQLï¼ˆæ•°æ®åº“ï¼‰ã€Redisï¼ˆç¼“å­˜/ä¼šè¯ï¼‰</li>
</ul>
<p>æœ¬åœ°å¼€å‘ç¯å¢ƒä¸€åˆ‡æ­£å¸¸ï¼Œä»£ç ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€é…ç½®å¥½Nginxå’ŒGunicornåï¼Œè®¿é—®ç½‘é¡µåªæ˜¾ç¤ºâ€œ500 Internal Server Errorâ€ï¼Œç”¨curlè®¿é—®ä¹Ÿæç¤ºå¼‚å¸¸â€”â€”è¿™å°±æ˜¯æˆ‘æ’é”™çš„å¼€å§‹ã€‚</p>
<h2 data-id="heading-1">äºŒã€æ’é”™å…¨è¿‡ç¨‹ï¼šä»â€œç½‘ç»œå±‚â€åˆ°â€œåº”ç”¨å±‚â€é€æ­¥æ‹†è§£</h2>
<p>æ’é”™çš„æ ¸å¿ƒæ€è·¯ï¼š<strong>ä»å¤–å‘å†…ï¼Œé€æ­¥ç¼©å°èŒƒå›´</strong>â€”â€”å…ˆç¡®è®¤Nginxæ˜¯å¦æ­£å¸¸ï¼Œå†éªŒè¯Gunicornæ˜¯å¦èƒ½æ¥æ”¶è¯·æ±‚ï¼Œæœ€åæ’æŸ¥Djangoåº”ç”¨å†…éƒ¨é”™è¯¯ï¼Œé¿å…ç›²ç›®ä¿®æ”¹é…ç½®ã€‚</p>
<h3 data-id="heading-2">é˜¶æ®µ1ï¼šæŠ¥é”™â€œæ‹’ç»è¿æ¥â€ï¼ŒGunicornæ ¹æœ¬æ²¡æ­£å¸¸ç›‘å¬ç«¯å£</h3>
<p>æœ€å¼€å§‹ï¼Œæˆ‘ç”¨curlæœ¬åœ°è®¿é—®Gunicornçš„8000ç«¯å£ï¼Œç›´æ¥æŠ¥é”™ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">[root@server ~]<span class="hljs-meta"># curl -v http:<span class="hljs-comment">//127.0.0.1:8000</span></span>
* <span class="hljs-function">About to <span class="hljs-title">connect</span><span class="hljs-params">()</span> to 127.0.0.1 port 8000 <span class="hljs-params">(#<span class="hljs-number">0</span>)</span>
*   Trying 127.0.0.1...
* æ‹’ç»è¿æ¥
* Failed connect to 127.0.0.1:<span class="hljs-number">8000</span>;</span> æ‹’ç»è¿æ¥
* Closing connection <span class="hljs-number">0</span>
curl: (<span class="hljs-number">7</span>) Failed connect to <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">8000</span>; æ‹’ç»è¿æ¥
</code></pre>
<p>ç¬¬ä¸€ååº”ï¼šGunicornæ²¡å¯åŠ¨ï¼Ÿæˆ–è€…ç«¯å£æ²¡ç›‘å¬ï¼Ÿ</p>
<p>ç”¨sså‘½ä»¤æŸ¥çœ‹8000ç«¯å£ç›‘å¬çŠ¶æ€ï¼Œå‘ç°æ²¡æœ‰ä»»ä½•è¾“å‡ºï¼ˆè¯´æ˜æ— è¿›ç¨‹ç›‘å¬8000ç«¯å£ï¼‰ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">root@server ~</span>]<span class="hljs-meta"># ss -lntp | grep 8000</span>
</code></pre>
<p>å†æŸ¥çœ‹Gunicornè¿›ç¨‹ï¼Œå‘ç°è¿›ç¨‹å­˜åœ¨ï¼Œä½†ç«¯å£å°±æ˜¯æ²¡ç›‘å¬â€”â€”è¿™æ—¶å€™æ‰æ„è¯†åˆ°ï¼Œ<strong>è¿›ç¨‹å­˜åœ¨â‰ æ­£å¸¸ç›‘å¬</strong>ï¼Œå¤§æ¦‚ç‡æ˜¯Gunicornå¯åŠ¨åéšæ€§é—ªé€€äº†ã€‚</p>
<h4 data-id="heading-3">æ’æŸ¥1ï¼šæŸ¥çœ‹Gunicorné”™è¯¯æ—¥å¿—ï¼Œå‘ç°â€œæ¨¡å—æ‰¾ä¸åˆ°â€</h4>
<p>æŸ¥çœ‹Gunicornçš„é”™è¯¯æ—¥å¿—ï¼ˆè·¯å¾„/var/log/gunicorn/error.logï¼‰ï¼Œå‘ç°äº†å…³é”®æŠ¥é”™ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">ModuleNotFoundError:</span> No <span class="hljs-keyword">module</span> named <span class="hljs-comment">'HealthForum'</span>
</code></pre>
<p>åŸæ¥ï¼æˆ‘å¯åŠ¨Gunicornæ—¶ï¼Œ<strong>æ²¡åˆ‡æ¢åˆ°Djangoé¡¹ç›®æ ¹ç›®å½•</strong> ï¼ˆé¡¹ç›®æ ¹ç›®å½•æ˜¯/code/HealthForum/ï¼Œé‡Œé¢æœ‰manage.pyå’ŒHealthForumå­æ–‡ä»¶å¤¹ï¼‰ï¼Œå¯¼è‡´Pythonæ— æ³•è¯†åˆ«é¡¹ç›®æ¨¡å—ï¼ŒGunicornå¯åŠ¨åç«‹åˆ»é—ªé€€ï¼Œç«¯å£è‡ªç„¶æ— æ³•ç›‘å¬ã€‚</p>
<h4 data-id="heading-4">è§£å†³1ï¼šåˆ‡æ¢åˆ°æ­£ç¡®ç›®å½•ï¼Œé‡å¯Gunicorn</h4>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># 1. æ¸…ç†æ®‹ç•™çš„Gunicornè¿›ç¨‹</span>
<span class="hljs-keyword">kill</span> -<span class="hljs-number">9</span> $(ps -ef | <span class="hljs-keyword">grep</span> gunicorn | <span class="hljs-keyword">grep</span> -v <span class="hljs-keyword">grep</span> | awk <span class="hljs-string">'{print $2}'</span>)

<span class="hljs-comment"># 2. åˆ‡æ¢åˆ°Djangoé¡¹ç›®æ ¹ç›®å½•</span>
cd /code/HealthForum/

<span class="hljs-comment"># 3. é‡å¯Gunicornï¼ˆåå°å¯åŠ¨ï¼Œä¿ç•™æ—¥å¿—ï¼‰</span>
gunicorn -w <span class="hljs-number">4</span> -b <span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8000</span> HealthForum.wsgi \
--error-logfile /var/<span class="hljs-keyword">log</span>/gunicorn/error.log \
--access-logfile /var/<span class="hljs-keyword">log</span>/gunicorn/access.log 
</code></pre>
<p>é‡å¯åï¼ŒæŸ¥çœ‹è¿›ç¨‹å’Œç«¯å£ï¼Œç»ˆäºçœ‹åˆ°Gunicornæ­£å¸¸ç›‘å¬8000ç«¯å£äº†â€”â€”æœ¬ä»¥ä¸ºé—®é¢˜è§£å†³ï¼Œç»“æœæ–°çš„æŠ¥é”™åˆæ¥äº†ã€‚</p>
<h3 data-id="heading-5">é˜¶æ®µ2ï¼šèƒ½è¿æ¥Gunicornï¼Œä½†å§‹ç»ˆè¿”å›â€œ500 Internal Server Errorâ€</h3>
<p>è¿™æ¬¡ç”¨curlè®¿é—®8000ç«¯å£ï¼Œä¸å†æ‹’ç»è¿æ¥ï¼Œè€Œæ˜¯è¿”å›500é”™è¯¯ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">[root@server ~]# curl -v http://127.0.0.1:8000
* About to connect() to 127.0.0.1 port 8000 (#0)
*   Trying 127.0.0.1...
* Connected to 127.0.0.1 (127.0.0.1) port 8000 (#0)
&gt; GET / HTTP/1.1
&gt; User-Agent: curl/7.29.0
&gt; Host: 127.0.0.1:8000
&gt; Accept: */*
&gt; 
&lt; HTTP/1.1 500 Internal Server Error
&lt; Server: gunicorn
&lt; Date: Tue, 03 Feb 2026 08:12:52 GMT
&lt; Connection: close
&lt; Transfer-Encoding: chunked
&lt; Content-Type: text/html
&lt; X-Content-Type-Options: nosniff
&lt; Referrer-Policy: same-origin
&lt; 

<span class="hljs-meta">&lt;!doctype <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Server Error (500)<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Server Error (500)<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
* Closing connection 0
</code></pre>
<p>æ­¤æ—¶çš„å…³é”®å˜åŒ–ï¼š<strong>è¯·æ±‚å·²ç»åˆ°è¾¾Gunicornï¼Œå¹¶ä¼ é€’ç»™äº†Djangoï¼Œä½†Djangoå¤„ç†è¯·æ±‚æ—¶æŠ›å‡ºäº†å†…éƒ¨å¼‚å¸¸</strong>â€”â€”é”™è¯¯ä»â€œç½‘ç»œå±‚â€è½¬å‘äº†â€œåº”ç”¨å±‚â€ã€‚</p>
<h4 data-id="heading-6">æ’æŸ¥2ï¼šæŸ¥çœ‹Gunicornæ—¥å¿—ï¼Œå´æ‰¾ä¸åˆ°ä»»ä½•å¼‚å¸¸ï¼Ÿ</h4>
<p>æˆ‘å†æ¬¡æŸ¥çœ‹Gunicornçš„error.logï¼Œå‘ç°åªæœ‰ä¹‹å‰â€œæ¨¡å—æ‰¾ä¸åˆ°â€çš„æ—§æŠ¥é”™ï¼Œæ²¡æœ‰ä»»ä½•å…³äº500é”™è¯¯çš„æ–°å¼‚å¸¸ï¼›å†æŸ¥çœ‹access.logï¼Œåªçœ‹åˆ°è¯·æ±‚è¿”å›500çŠ¶æ€ç ï¼Œå´æ²¡æœ‰å…·ä½“é”™è¯¯åŸå› ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">root@server HealthForum</span>]<span class="hljs-meta"># tail -n 100 /var/log/gunicorn/access.log</span>
<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span> - - [<span class="hljs-number">03</span>/Feb/<span class="hljs-number">2026</span>:<span class="hljs-number">16</span>:<span class="hljs-number">12</span>:<span class="hljs-number">52</span> +<span class="hljs-number">0800</span>] <span class="hljs-string">"GET / HTTP/1.1"</span> <span class="hljs-number">500</span> <span class="hljs-number">145</span> <span class="hljs-string">"-"</span> <span class="hljs-string">"curl/7.29.0"</span>
</code></pre>
<p>è¿™é‡Œè¸©äº†ä¸€ä¸ªå‘ï¼š<strong>Gunicornçš„error.logé»˜è®¤åªè®°å½•â€œå¯åŠ¨é˜¶æ®µé”™è¯¯â€ï¼ŒDjangoè¿è¡Œæ—¶æŠ›å‡ºçš„å¼‚å¸¸ï¼ˆå¦‚ä¾èµ–ç¼ºå¤±ã€æ•°æ®åº“è¿æ¥é”™è¯¯ï¼‰ï¼Œä¸ä¼šè‡ªåŠ¨å†™å…¥è¯¥æ—¥å¿—</strong>ã€‚</p>
<h4 data-id="heading-7">è§£å†³2ï¼šå¼€å¯Djangoè°ƒè¯•æ¨¡å¼ï¼Œæ•è·å®æ—¶é”™è¯¯</h4>
<p>è°ƒè¯•Django 500é”™è¯¯çš„ç»ˆæåŠæ³•â€”â€”å¼€å¯è°ƒè¯•æ¨¡å¼ï¼Œè®©é”™è¯¯ç›´æ¥æ˜¾ç¤ºåœ¨å“åº”ä¸­ï¼ˆä»…æµ‹è¯•ç¯å¢ƒä½¿ç”¨ï¼Œç”Ÿäº§ç¯å¢ƒåŠ¡å¿…å…³é—­ï¼ï¼‰ã€‚</p>
<p>ç¼–è¾‘Djangoé¡¹ç›®çš„settings.pyæ–‡ä»¶ï¼ˆè·¯å¾„/code/HealthForum/HealthForum/settings.pyï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># SECURITY WARNING: don't run with debug turned on in production!</span>
<span class="hljs-attr">DEBUG</span> = <span class="hljs-literal">True</span>  <span class="hljs-comment"># ä»Falseæ”¹ä¸ºTrueï¼Œå¼€å¯è°ƒè¯•æ¨¡å¼</span>

<span class="hljs-attr">ALLOWED_HOSTS</span> = [<span class="hljs-string">'*'</span>]  <span class="hljs-comment"># æ”¹ä¸º*ï¼Œå…è®¸æ‰€æœ‰ä¸»æœºè®¿é—®ï¼Œé¿å…400é”™è¯¯</span>
</code></pre>
<p>ä¿å­˜åï¼Œé‡å¯Gunicornï¼ˆè°ƒè¯•æ¨¡å¼ä¿®æ”¹éœ€é‡å¯ç”Ÿæ•ˆï¼‰ï¼Œè¿™æ¬¡æˆ‘é€‰æ‹©<strong>å‰å°å¯åŠ¨Gunicorn</strong>ï¼ˆå»æ‰æœ«å°¾çš„&amp;ï¼‰ï¼Œæ–¹ä¾¿æŸ¥çœ‹å®æ—¶è¾“å‡ºï¼š</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># åœæ­¢æ—§è¿›ç¨‹</span>
<span class="hljs-keyword">kill</span> -<span class="hljs-number">9</span> $(ps -ef | <span class="hljs-keyword">grep</span> gunicorn | <span class="hljs-keyword">grep</span> -v <span class="hljs-keyword">grep</span> | awk <span class="hljs-string">'{print $2}'</span>)

<span class="hljs-comment"># å‰å°å¯åŠ¨Gunicornï¼Œå®æ—¶æŸ¥çœ‹é”™è¯¯</span>
cd /code/HealthForum/
gunicorn -w <span class="hljs-number">4</span> -b <span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">8000</span> HealthForum.wsgi \
--error-logfile /var/<span class="hljs-keyword">log</span>/gunicorn/error.log \
--access-logfile /var/<span class="hljs-keyword">log</span>/gunicorn/access.log
</code></pre>
<p>å†æ¬¡ç”¨curlè§¦å‘è¯·æ±‚ï¼Œå‰å°ç»ˆç«¯ç«‹åˆ»è¾“å‡ºäº†å®Œæ•´çš„å¼‚å¸¸å †æ ˆâ€”â€”ç»ˆäºæ‰¾åˆ°é—®é¢˜æ ¹æºäº†ï¼</p>
<h3 data-id="heading-8">é˜¶æ®µ3ï¼šæœ€ç»ˆæŠ¥é”™â€œç¼ºå°‘django_redisæ¨¡å—â€ï¼Œå®Œç¾è§£å†³</h3>
<p>å‰å°å¯åŠ¨Gunicornåï¼Œcurlè§¦å‘è¯·æ±‚ï¼Œç»ˆç«¯è¾“å‡ºå…³é”®æŠ¥é”™ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">ModuleNotFoundError: No <span class="hljs-keyword">module</span> named <span class="hljs-string">'django_redis'</span>

django.core.cache.backends.base.InvalidCacheBackendError: Could <span class="hljs-keyword">not</span> find backend <span class="hljs-string">'django_redis.cache.RedisCache'</span>: No <span class="hljs-keyword">module</span> named <span class="hljs-string">'django_redis'</span>
</code></pre>
<p>çœŸç›¸å¤§ç™½ï¼šæˆ‘çš„Djangoé¡¹ç›®é…ç½®äº†Redisä½œä¸ºç¼“å­˜/ä¼šè¯å­˜å‚¨ï¼Œä½†æœåŠ¡å™¨çš„Pythonç¯å¢ƒä¸­ï¼Œ<strong>ç¼ºå°‘django_redisè¿™ä¸ªä¾èµ–åŒ…</strong>â€”â€”è¿™æ˜¯æ“ä½œæ—¶çš„ç–å¿½ï¼Œæœ¬åœ°å¼€å‘æ—¶å®‰è£…äº†ï¼Œéƒ¨ç½²åˆ°æœåŠ¡å™¨æ—¶å¿˜äº†å®‰è£…ã€‚</p>
<h4 data-id="heading-9">æ’æŸ¥3ï¼šç¡®è®¤django_redisç‰ˆæœ¬å…¼å®¹æ€§</h4>
<p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸ªç»†èŠ‚ï¼šæˆ‘çš„æœåŠ¡å™¨æ˜¯Python 3.6ï¼Œè€Œdjango_redis 5.xåŠä»¥ä¸Šç‰ˆæœ¬ä¸å†æ”¯æŒPython 3.6ï¼Œç›´æ¥å®‰è£…ä¼šæŠ¥é”™ã€‚</p>
<p>é’ˆå¯¹Python 3.6ï¼Œæ¨èå®‰è£…<strong>django_redis 4.12.1ç‰ˆæœ¬</strong>ï¼ˆç¨³å®šå…¼å®¹ï¼Œäº²æµ‹å¯ç”¨ï¼‰ã€‚</p>
<h4 data-id="heading-10">è§£å†³3ï¼šå®‰è£…å…¼å®¹ç‰ˆæœ¬çš„django_redisï¼Œé‡å¯éªŒè¯</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼ˆå…¼å®¹Python 3.6ï¼‰ï¼Œç”¨æ¸…åé•œåƒæºåŠ é€Ÿ</span>
pip3 install <span class="hljs-attr">django-redis</span>==<span class="hljs-number">4.12</span>.<span class="hljs-number">1</span> -i https://pypi.tuna.tsinghua.edu.cn/simple

<span class="hljs-comment"># éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸï¼ˆæ— æŠ¥é”™å³æ­£å¸¸ï¼‰</span>
python3 -c "import django_redis<span class="hljs-comment">; print('django_redis å¯¼å…¥æˆåŠŸï¼Œç‰ˆæœ¬ï¼š', django_redis.__version__)"</span>
</code></pre>
<p>å®‰è£…æˆåŠŸåï¼Œå†æ¬¡å‰å°å¯åŠ¨Gunicornï¼Œç”¨curlè®¿é—®127.0.0.1:8000â€”â€”è¿™æ¬¡ç»ˆäºä¸å†è¿”å›500é”™è¯¯ï¼Œè€Œæ˜¯è¿”å›äº†Djangoé¡¹ç›®çš„æ­£å¸¸é¡µé¢ï¼</p>
<h4 data-id="heading-11">æ”¶å°¾ï¼šå…³é—­è°ƒè¯•æ¨¡å¼ï¼Œç¡®ä¿å®‰å…¨</h4>
<p>é—®é¢˜è§£å†³åï¼ŒåŠ¡å¿…å…³é—­Djangoè°ƒè¯•æ¨¡å¼ï¼ˆé¿å…æ³„éœ²é¡¹ç›®æ•æ„Ÿä¿¡æ¯ï¼‰ï¼Œä¿®æ”¹settings.pyï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">DEBUG</span> = <span class="hljs-literal">False</span>
<span class="hljs-attr">ALLOWED_HOSTS</span> = [<span class="hljs-string">'ä½ çš„æœåŠ¡å™¨IPæˆ–åŸŸå'</span>]  <span class="hljs-comment"># æ”¹ä¸ºå…·ä½“çš„IP/åŸŸå</span>
</code></pre>
<p>é‡å¯Gunicornå’ŒNginxï¼Œè®¿é—®ç½‘é¡µï¼Œä¸€åˆ‡æ­£å¸¸â€”â€”å†æ—¶2å°æ—¶çš„æ’é”™ï¼Œç»ˆäºåœ†æ»¡ç»“æŸã€‚</p>
<h2 data-id="heading-12">ä¸‰ã€æ’é”™æ€»ç»“ï¼šæ–°æ‰‹å¿…è®°çš„3ä¸ªæ ¸å¿ƒç»éªŒ</h2>
<p>è¿™æ¬¡æ’é”™è¸©äº†å¾ˆå¤šæ–°æ‰‹å¸¸è§çš„å‘ï¼Œæ€»ç»“3ä¸ªå…³é”®ç»éªŒï¼Œå¸®ä½ é¿å¼€é‡å¤è¸©å‘ï¼š</p>
<ol>
<li><strong>è¿›ç¨‹å­˜åœ¨â‰ æ­£å¸¸è¿è¡Œ</strong>ï¼šGunicornè¿›ç¨‹å­˜åœ¨ä¸ä»£è¡¨ç«¯å£æ­£å¸¸ç›‘å¬ï¼Œé‡åˆ°â€œæ‹’ç»è¿æ¥â€ï¼Œå…ˆç”¨ç”µss/netstatæŸ¥çœ‹ç«¯å£ç›‘å¬çŠ¶æ€ï¼Œå†çœ‹é”™è¯¯æ—¥å¿—æ’æŸ¥é—ªé€€åŸå› ï¼ˆå¦‚æ¨¡å—æ‰¾ä¸åˆ°ã€ä¾èµ–ç¼ºå¤±ï¼‰ã€‚</li>
<li><strong>Django 500é”™è¯¯ï¼Œä¼˜å…ˆå¼€å¯è°ƒè¯•æ¨¡å¼</strong>ï¼šGunicornæ—¥å¿—å¯èƒ½æ— æ³•æ•è·Djangoè¿è¡Œæ—¶å¼‚å¸¸ï¼Œå¼€å¯DEBUG=True+ALLOWED_HOSTS=['*']ï¼Œèƒ½ç›´æ¥æ˜¾ç¤ºé”™è¯¯å †æ ˆï¼Œå¿«é€Ÿå®šä½é—®é¢˜ï¼ˆç”Ÿäº§ç¯å¢ƒåŠ¡å¿…å…³é—­ï¼‰ã€‚</li>
<li><strong>ç‰ˆæœ¬å…¼å®¹æ€§æ˜¯é‡ä¸­ä¹‹é‡</strong>ï¼šPythonç‰ˆæœ¬å’Œä¾èµ–åŒ…ç‰ˆæœ¬å¿…é¡»åŒ¹é…ï¼ˆå¦‚Python 3.6ä¸èƒ½ç”¨django_redis 5.xï¼‰ï¼Œå®‰è£…ä¾èµ–æ—¶ï¼Œä¼˜å…ˆæŒ‡å®šå…¼å®¹ç‰ˆæœ¬ï¼Œé¿å…ç›²ç›®å®‰è£…æœ€æ–°ç‰ˆã€‚</li>
</ol>
<h2 data-id="heading-13">å››ã€å¸¸ç”¨æ’é”™å‘½ä»¤ï¼ˆæ”¶è—å¤‡ç”¨ï¼‰</h2>
<p>æ•´ç†äº†è¿™æ¬¡æ’é”™è¿‡ç¨‹ä¸­é«˜é¢‘ä½¿ç”¨çš„å‘½ä»¤ï¼Œæ–°æ‰‹å¯ç›´æ¥å¤åˆ¶ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># 1. æŸ¥çœ‹Gunicornè¿›ç¨‹</span>
ps -ef | <span class="hljs-keyword">grep</span> gunicorn

<span class="hljs-comment"># 2. æŸ¥çœ‹8000ç«¯å£ç›‘å¬çŠ¶æ€</span>
ss -lntp | <span class="hljs-keyword">grep</span> <span class="hljs-number">8000</span>  <span class="hljs-comment"># æˆ– netstat -lntp | grep 8000ï¼ˆéœ€å®‰è£…net-toolsï¼‰</span>

<span class="hljs-comment"># 3. æ‰¹é‡åœæ­¢Gunicornè¿›ç¨‹</span>
<span class="hljs-keyword">kill</span> -<span class="hljs-number">9</span> $(ps -ef | <span class="hljs-keyword">grep</span> gunicorn | <span class="hljs-keyword">grep</span> -v <span class="hljs-keyword">grep</span> | awk <span class="hljs-string">'{print $2}'</span>)

<span class="hljs-comment"># 4. æŸ¥çœ‹Gunicornæ—¥å¿—</span>
tail -f /var/<span class="hljs-keyword">log</span>/gunicorn/error.log  <span class="hljs-comment"># å®æ—¶æŸ¥çœ‹é”™è¯¯æ—¥å¿—</span>
tail -n <span class="hljs-number">100</span> /var/<span class="hljs-keyword">log</span>/gunicorn/access.log  <span class="hljs-comment"># æŸ¥çœ‹æœ€æ–°100è¡Œè®¿é—®æ—¥å¿—</span>

<span class="hljs-comment"># 5. éªŒè¯Pythonæ¨¡å—æ˜¯å¦å­˜åœ¨</span>
python3 -c <span class="hljs-string">"import æ¨¡å—å; print('å¯¼å…¥æˆåŠŸ')"</span>

<span class="hljs-comment"># 6. é‡å¯Nginx</span>
systemctl restart nginx
</code></pre>
<h2 data-id="heading-14">æœ€åæƒ³è¯´ï¼Œåç«¯éƒ¨ç½²æ’é”™æ²¡æœ‰æ·å¾„ï¼Œé‡åˆ°æŠ¥é”™ä¸è¦æ…Œï¼ŒæŒ‰ç…§â€œä»å¤–å‘å†…ã€é€æ­¥æ‹†è§£â€çš„æ€è·¯ï¼Œç»“åˆæ—¥å¿—å’Œå®æ“éªŒè¯ï¼Œæ€»èƒ½æ‰¾åˆ°é—®é¢˜æ ¹æºã€‚</h2></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vueå°ç¥ç»„åˆï¼šåŠ¨æ€ç»„ä»¶<component :is> + keep-aliveï¼Œæ€§èƒ½ç¿»å€è¿˜ä¸è¸©å‘ï¼]]></title>    <link>https://juejin.cn/post/7602466689712570383</link>    <guid>https://juejin.cn/post/7602466689712570383</guid>    <pubDate>2026-02-04T01:28:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602466689712570383" data-draft-id="7602161364891992064" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vueå°ç¥ç»„åˆï¼šåŠ¨æ€ç»„ä»¶&lt;component :is&gt; + keep-aliveï¼Œæ€§èƒ½ç¿»å€è¿˜ä¸è¸©å‘ï¼"/> <meta itemprop="keywords" content="JavaScript,é¢è¯•,Vue.js"/> <meta itemprop="datePublished" content="2026-02-04T01:28:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="boooooooom"/> <meta itemprop="url" content="https://juejin.cn/user/3078273283917399"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vueå°ç¥ç»„åˆï¼šåŠ¨æ€ç»„ä»¶&lt;component :is&gt; + keep-aliveï¼Œæ€§èƒ½ç¿»å€è¿˜ä¸è¸©å‘ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3078273283917399/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    boooooooom
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T01:28:12.000Z" title="Wed Feb 04 2026 01:28:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ­£æ–‡</h2>
<h3 data-id="heading-1">ä¸€ã€å‰è¨€ï¼šä»€ä¹ˆæ—¶å€™éœ€è¦è¿™å¯¹â€œé»„é‡‘ç»„åˆâ€ï¼Ÿ</h3>
<p>åœ¨Vueå¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°ã€Œç»„ä»¶åŠ¨æ€åˆ‡æ¢ã€çš„éœ€æ±‚â€”â€”æ¯”å¦‚æ ‡ç­¾é¡µï¼ˆTabsï¼‰ã€æ­¥éª¤æ¡ã€å¼¹çª—å†…å®¹åˆ‡æ¢ã€è·¯ç”±é¡µé¢ç¼“å­˜ç­‰ã€‚ç›´æ¥ç”¨v-if/v-elseåˆ‡æ¢ç»„ä»¶ï¼Œä¼šé¢‘ç¹é”€æ¯å’Œé‡å»ºç»„ä»¶ï¼Œä¸ä»…æ€§èƒ½æŸè€—å¤§ï¼Œè¿˜ä¼šä¸¢å¤±ç»„ä»¶å†…éƒ¨çŠ¶æ€ï¼ˆæ¯”å¦‚è¾“å…¥æ¡†å†…å®¹ã€æ»šåŠ¨ä½ç½®ï¼‰ã€‚</p>
<p>è€Œ <code>&lt;component :is&gt;</code> æ˜¯Vueå†…ç½®çš„åŠ¨æ€ç»„ä»¶è¯­æ³•ï¼Œä¸“é—¨ç”¨äºå®ç°ç»„ä»¶çµæ´»åˆ‡æ¢ï¼›æ­é… <strong>keep-alive</strong> å†…ç½®ç»„ä»¶ï¼Œå¯ç¼“å­˜åˆ‡æ¢åçš„ç»„ä»¶å®ä¾‹ï¼Œé¿å…é‡å¤æ¸²æŸ“ã€ä¿ç•™ç»„ä»¶çŠ¶æ€ã€‚è¿™å¯¹ç»„åˆæ˜¯Vueæ€§èƒ½ä¼˜åŒ–çš„é«˜é¢‘æ‰‹æ®µï¼Œä¹Ÿæ˜¯é¢è¯•å¿…é—®çš„å®æ“çŸ¥è¯†ç‚¹ã€‚</p>
<p>æ ¸å¿ƒä»·å€¼ï¼šåˆ‡æ¢ç»„ä»¶ä¸é”€æ¯ã€ä¸é‡å»º â†’ æå‡é¡µé¢æ€§èƒ½ï¼›ä¿ç•™ç»„ä»¶çŠ¶æ€ â†’ ä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼Œä¸¤è€…é…åˆå ªç§°â€œåŠ¨æ€åˆ‡æ¢å¤©èŠ±æ¿â€ã€‚</p>
<h3 data-id="heading-2">äºŒã€æ ¸å¿ƒåŸºç¡€ï¼šå…ˆåƒé€ä¸¤ä¸ªç»„ä»¶çš„å•ç‹¬ç”¨æ³•</h3>
<p>åœ¨å­¦ä¹ ç»„åˆç”¨æ³•å‰ï¼Œå…ˆå¿«é€ŸæŒæ¡å’Œkeep-aliveçš„åŸºç¡€ç”¨æ³•ï¼Œé¿å…æ··æ·†æ ¸å¿ƒé€»è¾‘ï¼Œæ–°æ‰‹ä¹Ÿèƒ½è½»æ¾è·Ÿä¸Šã€‚</p>
<h4 data-id="heading-3">1. åŠ¨æ€ç»„ä»¶  åŸºç¡€ç”¨æ³•</h4>
<p>æ ¸å¿ƒä½œç”¨ï¼šé€šè¿‡:isç»‘å®šçš„å€¼ï¼ŒåŠ¨æ€æ¸²æŸ“ä¸åŒçš„ç»„ä»¶ï¼Œå€¼å¯ä»¥æ˜¯ã€Œç»„ä»¶åã€ã€Œç»„ä»¶é…ç½®å¯¹è±¡ã€æˆ–ã€Œå¼‚æ­¥ç»„ä»¶ã€ï¼Œçµæ´»é€‚é…å„ç±»åˆ‡æ¢åœºæ™¯ã€‚</p>
<p>æœ€ç®€å®æ“ï¼ˆVue3 <code>&lt;script setup&gt;</code> å†™æ³•ï¼Œé¦–é€‰ï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  &lt;!-- æ ¸å¿ƒï¼š:isç»‘å®šè¦æ¸²æŸ“çš„ç»„ä»¶å --&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">"currentComponent"</span> /&gt;</span></span>
  
  &lt;!-- åˆ‡æ¢æŒ‰é’®ï¼Œä¿®æ”¹currentComponentçš„å€¼ --&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"currentComponent = 'ComponentA'"</span>&gt;</span>æ˜¾ç¤ºç»„ä»¶A<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"currentComponent = 'ComponentB'"</span>&gt;</span>æ˜¾ç¤ºç»„ä»¶B<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// 1. å¯¼å…¥éœ€è¦åˆ‡æ¢çš„ç»„ä»¶</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ComponentA</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./ComponentA.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ComponentB</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./ComponentB.vue'</span>

<span class="hljs-comment">// 2. ç»‘å®šåŠ¨æ€ç»„ä»¶çš„å˜é‡ï¼ˆåˆå§‹æ¸²æŸ“ComponentAï¼‰</span>
<span class="hljs-keyword">const</span> currentComponent = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'ComponentA'</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<p>å…³é”®æ³¨æ„ç‚¹ï¼š</p>
<ul>
<li>:isç»‘å®šçš„ç»„ä»¶åï¼Œå¿…é¡»å’Œå¯¼å…¥çš„ç»„ä»¶åä¸€è‡´ï¼ˆåŒºåˆ†å¤§å°å†™ï¼ŒVue3é»˜è®¤æ”¯æŒå¤§é©¼å³°ï¼‰ï¼›</li>
<li>è‹¥ç»‘å®šå¼‚æ­¥ç»„ä»¶ï¼Œå¯ç›´æ¥å†™:is="defineAsyncComponent(() =&gt; import('./ComponentA.vue'))"ï¼›</li>
<li>æœªæ­é…keep-aliveæ—¶ï¼Œåˆ‡æ¢ç»„ä»¶ä¼šé”€æ¯å‰ä¸€ä¸ªç»„ä»¶ï¼Œé‡å»ºæ–°ç»„ä»¶ï¼ˆçŠ¶æ€ä¸¢å¤±ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-4">2. ç¼“å­˜ç»„ä»¶ keep-alive åŸºç¡€ç”¨æ³•</h4>
<p>æ ¸å¿ƒä½œç”¨ï¼šç¼“å­˜åŒ…è£¹åœ¨å…¶å†…éƒ¨çš„ç»„ä»¶å®ä¾‹ï¼Œé¿å…ç»„ä»¶è¢«é¢‘ç¹é”€æ¯å’Œé‡å»ºï¼Œä»…åœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶åˆå§‹åŒ–ï¼Œåˆ‡æ¢åä¿ç•™ç»„ä»¶åŸæœ‰çŠ¶æ€ã€‚</p>
<p>æœ€ç®€å®æ“ï¼ˆå•ç‹¬ä½¿ç”¨ï¼Œä»…ç¼“å­˜å•ä¸ªç»„ä»¶ï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  &lt;!-- åŒ…è£¹éœ€è¦ç¼“å­˜çš„ç»„ä»¶ï¼Œç»„ä»¶åˆ‡æ¢åä¸ä¼šè¢«é”€æ¯ --&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">keep-alive</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ComponentA</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">keep-alive</span>&gt;</span></span>
&lt;/template&gt;
</code></pre>
<p>æ ¸å¿ƒå±æ€§ï¼ˆé‡ç‚¹ï¼Œç»„åˆç”¨æ³•å¿…ç”¨ï¼‰ï¼š</p>
<ul>
<li><strong>include</strong>ï¼šå­—ç¬¦ä¸²/æ•°ç»„ï¼Œä»…ç¼“å­˜æŒ‡å®šåç§°çš„ç»„ä»¶ï¼ˆéœ€åŒ¹é…ç»„ä»¶çš„nameå±æ€§ï¼‰ï¼›</li>
<li><strong>exclude</strong>ï¼šå­—ç¬¦ä¸²/æ•°ç»„ï¼Œä¸ç¼“å­˜æŒ‡å®šåç§°çš„ç»„ä»¶ï¼ˆä¼˜å…ˆçº§é«˜äºincludeï¼‰ï¼›</li>
<li><strong>max</strong>ï¼šæ•°å­—ï¼ŒæŒ‡å®šç¼“å­˜ç»„ä»¶çš„æœ€å¤§å®ä¾‹æ•°ï¼Œè¶…å‡ºåä¼šé”€æ¯æœ€æ—©ç¼“å­˜çš„ç»„ä»¶ï¼ˆé¿å…å†…å­˜æ³„æ¼ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-5">ä¸‰ã€æ ¸å¿ƒå®æ“ï¼š<code>&lt;component :is&gt; + keep-alive</code> ç»„åˆç”¨æ³•ï¼ˆé‡ç‚¹ï¼ï¼‰</h3>
<p>è¿™æ˜¯å®é™…å¼€å‘ä¸­æœ€å¸¸ç”¨çš„å†™æ³•ï¼Œç»“åˆä¸¤è€…ä¼˜åŠ¿ï¼šç”¨å®ç°åŠ¨æ€åˆ‡æ¢ï¼Œç”¨keep-aliveç¼“å­˜åˆ‡æ¢åçš„ç»„ä»¶ï¼Œä¿ç•™çŠ¶æ€+æå‡æ€§èƒ½ï¼Œä»¥ã€Œæ ‡ç­¾é¡µTabsã€ä¸ºç»å…¸æ¡ˆä¾‹ï¼Œä»£ç å¯ç›´æ¥å¤åˆ¶å¥—ç”¨ã€‚</p>
<h4 data-id="heading-6">1. å®Œæ•´æ¡ˆä¾‹ï¼šæ ‡ç­¾é¡µåˆ‡æ¢ï¼ˆç¼“å­˜ç»„ä»¶çŠ¶æ€ï¼‰</h4>
<p>éœ€æ±‚ï¼š3ä¸ªæ ‡ç­¾é¡µï¼Œåˆ‡æ¢æ—¶ä¿ç•™æ¯ä¸ªæ ‡ç­¾é¡µå†…éƒ¨çš„çŠ¶æ€ï¼ˆæ¯”å¦‚è¾“å…¥æ¡†å†…å®¹ï¼‰ï¼Œä¸é‡å¤æ¸²æŸ“ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tabs-container"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æ ‡ç­¾åˆ‡æ¢æŒ‰é’® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tabs-header"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> 
        <span class="hljs-attr">v-for</span>=<span class="hljs-string">"tab in tabs"</span> 
        <span class="hljs-attr">:key</span>=<span class="hljs-string">"tab.name"</span>
        @<span class="hljs-attr">click</span>=<span class="hljs-string">"currentTab = tab.name"</span>
        <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ active: currentTab === tab.name }"</span>
      &gt;</span>
        {{ tab.label }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æ ¸å¿ƒç»„åˆï¼škeep-aliveç¼“å­˜ + component:isåŠ¨æ€åˆ‡æ¢ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">keep-alive</span> 
      <span class="hljs-attr">include</span>=<span class="hljs-string">"Tab1,Tab2,Tab3"</span>  // <span class="hljs-attr">ä»…ç¼“å­˜è¿™3ä¸ªç»„ä»¶</span>ï¼ˆ<span class="hljs-attr">åŒ¹é…ç»„ä»¶name</span>ï¼‰
      <span class="hljs-attr">max</span>=<span class="hljs-string">"3"</span>                   // <span class="hljs-attr">æœ€å¤§ç¼“å­˜3ä¸ªå®ä¾‹</span>ï¼ˆ<span class="hljs-attr">é¿å…å†…å­˜æ³„æ¼</span>ï¼‰
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">"currentTab"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">keep-alive</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-comment">// å¯¼å…¥3ä¸ªæ ‡ç­¾é¡µç»„ä»¶</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Tab1</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Tab1.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Tab2</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Tab2.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Tab3</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Tab3.vue'</span>

<span class="hljs-comment">// æ ‡ç­¾é¡µé…ç½®ï¼ˆå…³è”ç»„ä»¶åå’Œæ˜¾ç¤ºæ–‡æœ¬ï¼‰</span>
<span class="hljs-keyword">const</span> tabs = <span class="hljs-title function_">ref</span>([
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'Tab1'</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'æ ‡ç­¾1'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'Tab2'</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'æ ‡ç­¾2'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'Tab3'</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'æ ‡ç­¾3'</span> }
])

<span class="hljs-comment">// å½“å‰æ¿€æ´»çš„æ ‡ç­¾é¡µï¼ˆç»‘å®šåŠ¨æ€ç»„ä»¶ï¼‰</span>
<span class="hljs-keyword">const</span> currentTab = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'Tab1'</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-7">2. å­ç»„ä»¶é…ç½®ï¼ˆå…³é”®ï¼šå¿…é¡»å®šä¹‰nameå±æ€§ï¼‰</h4>
<p>æ³¨æ„ï¼škeep-aliveçš„include/excludeå±æ€§ï¼Œéœ€è¦åŒ¹é…ç»„ä»¶çš„nameå±æ€§æ‰èƒ½ç”Ÿæ•ˆï¼Œå¦åˆ™ç¼“å­˜å¤±è´¥ï¼Œä»¥Tab1.vueä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>æ ‡ç­¾1å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- è¾“å…¥æ¡†ï¼šåˆ‡æ¢æ ‡ç­¾åï¼Œè¾“å…¥çš„å†…å®¹ä¼šè¢«ä¿ç•™ï¼ˆç¼“å­˜ç”Ÿæ•ˆï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"inputVal"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥å†…å®¹"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-comment">// å…³é”®ï¼šå®šä¹‰nameå±æ€§ï¼Œä¸keep-aliveçš„includeåŒ¹é…</span>
<span class="hljs-title function_">defineOptions</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Tab1'</span> <span class="hljs-comment">// å¿…é¡»å’Œincludeä¸­çš„å€¼ä¸€è‡´ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰</span>
})

<span class="hljs-keyword">const</span> inputVal = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<p>æç¤ºï¼šTab2ã€Tab3ç»„ä»¶é…ç½®å’ŒTab1ä¸€è‡´ï¼Œä»…éœ€ä¿®æ”¹nameå±æ€§ï¼ˆTab2ã€Tab3ï¼‰å’Œå†…éƒ¨å†…å®¹å³å¯ã€‚</p>
<h4 data-id="heading-8">3. ç»„åˆç”¨æ³•çš„æ ¸å¿ƒé€»è¾‘æ‹†è§£</h4>
<ol>
<li>ç‚¹å‡»æ ‡ç­¾æŒ‰é’®ï¼Œä¿®æ”¹currentTabçš„å€¼ï¼Œé€šè¿‡åˆ‡æ¢æ¸²æŸ“å¯¹åº”çš„ç»„ä»¶ï¼›</li>
<li>keep-aliveé€šè¿‡includeå±æ€§ï¼Œç¼“å­˜Tab1ã€Tab2ã€Tab3ä¸‰ä¸ªç»„ä»¶ï¼Œåˆ‡æ¢æ—¶ä¸ä¼šé”€æ¯å‰ä¸€ä¸ªç»„ä»¶ï¼›</li>
<li>ç»„ä»¶å†…éƒ¨çš„çŠ¶æ€ï¼ˆå¦‚inputValï¼‰ä¼šè¢«ä¿ç•™ï¼Œå†æ¬¡åˆ‡æ¢å›è¯¥æ ‡ç­¾é¡µæ—¶ï¼Œç›´æ¥å¤ç”¨ç¼“å­˜çš„ç»„ä»¶å®ä¾‹ï¼Œæ— éœ€é‡æ–°åˆå§‹åŒ–ã€‚</li>
</ol>
<h3 data-id="heading-9">å››ã€é«˜é¢‘é¿å‘ç‚¹ï¼ˆå¿…çœ‹ï¼ï¼‰</h3>
<h4 data-id="heading-10">å‘ç‚¹1ï¼škeep-aliveç¼“å­˜å¤±æ•ˆï¼Œç»„ä»¶åˆ‡æ¢ä»è¢«é”€æ¯</h4>
<p>å¸¸è§åŸå› åŠè§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>å­ç»„ä»¶æœªå®šä¹‰nameå±æ€§ï¼Œæˆ–nameä¸keep-aliveçš„includeä¸åŒ¹é… â†’ ç»™å­ç»„ä»¶æ·»åŠ defineOptions({ name: 'XXX' })ï¼›</li>
<li>:isç»‘å®šçš„ç»„ä»¶åï¼Œä¸includeä¸­çš„nameä¸ä¸€è‡´ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ â†’ ç»Ÿä¸€ç»„ä»¶åå’Œincludeçš„å€¼ï¼›</li>
<li>keep-aliveåŒ…è£¹äº†éç»„ä»¶å…ƒç´ ï¼ˆå¦‚divï¼‰ â†’ ç¡®ä¿keep-aliveå†…éƒ¨ç›´æ¥åŒ…è£¹æˆ–å•ä¸ªç»„ä»¶ã€‚</li>
</ul>
<h4 data-id="heading-11">å‘ç‚¹2ï¼šç¼“å­˜è¿‡å¤šå¯¼è‡´å†…å­˜æ³„æ¼</h4>
<p>åœºæ™¯ï¼šåŠ¨æ€åˆ‡æ¢çš„ç»„ä»¶æ•°é‡è¾ƒå¤šï¼ˆå¦‚10+ä¸ªï¼‰ï¼Œé•¿æœŸç¼“å­˜ä¼šå ç”¨è¿‡å¤šå†…å­˜ï¼Œå¯¼è‡´é¡µé¢å¡é¡¿ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼šç»™keep-aliveæ·»åŠ maxå±æ€§ï¼Œé™åˆ¶ç¼“å­˜çš„æœ€å¤§å®ä¾‹æ•°ï¼ˆå¦‚max="5"ï¼‰ï¼Œè¶…å‡ºåä¼šè‡ªåŠ¨é”€æ¯æœ€æ—©ç¼“å­˜çš„ç»„ä»¶ã€‚</p>
<h4 data-id="heading-12">å‘ç‚¹3ï¼šéœ€è¦ç¼“å­˜éƒ¨åˆ†ç»„ä»¶ï¼Œæ’é™¤éƒ¨åˆ†ç»„ä»¶</h4>
<p>è§£å†³æ–¹æ¡ˆï¼šç»“åˆincludeå’Œexcludeå±æ€§ï¼Œç²¾å‡†æ§åˆ¶ç¼“å­˜èŒƒå›´ï¼Œç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ç¼“å­˜Tab1ã€Tab2ï¼Œæ’é™¤Tab3 --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">keep-alive</span> <span class="hljs-attr">include</span>=<span class="hljs-string">"Tab1,Tab2"</span> <span class="hljs-attr">exclude</span>=<span class="hljs-string">"Tab3"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">"currentTab"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">keep-alive</span>&gt;</span>
</code></pre>
<h4 data-id="heading-13">å‘ç‚¹4ï¼šç¼“å­˜åï¼Œç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¸è§¦å‘</h4>
<p>ç°è±¡ï¼šç»„ä»¶è¢«ç¼“å­˜åï¼Œåˆ‡æ¢æ—¶ä¸ä¼šè§¦å‘createdã€mountedç­‰ç”Ÿå‘½å‘¨æœŸé’©å­ï¼ˆå› ä¸ºç»„ä»¶æœªè¢«é”€æ¯å’Œé‡å»ºï¼‰ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨Vueæä¾›çš„<strong>ç¼“å­˜ç”Ÿå‘½å‘¨æœŸé’©å­</strong>ï¼Œæ›¿ä»£ä¼ ç»Ÿç”Ÿå‘½å‘¨æœŸï¼š</p>
<ul>
<li><strong>activated</strong>ï¼šç»„ä»¶è¢«æ¿€æ´»ï¼ˆä»ç¼“å­˜ä¸­å–å‡ºæ˜¾ç¤ºï¼‰æ—¶è§¦å‘ï¼›</li>
<li><strong>deactivated</strong>ï¼šç»„ä»¶è¢«åœç”¨ï¼ˆåˆ‡æ¢éšè—ï¼Œå­˜å…¥ç¼“å­˜ï¼‰æ—¶è§¦å‘ã€‚</li>
</ul>
<pre><code class="hljs language-ts" lang="ts">&lt;script setup&gt;
<span class="hljs-title function_">defineOptions</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'Tab1'</span> })
<span class="hljs-comment">// ç»„ä»¶è¢«æ¿€æ´»æ—¶è§¦å‘ï¼ˆåˆ‡æ¢åˆ°è¯¥æ ‡ç­¾é¡µï¼‰</span>
<span class="hljs-title function_">onActivated</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Tab1è¢«æ¿€æ´»ï¼Œå¯æ‰§è¡Œåˆ·æ–°æ•°æ®ç­‰æ“ä½œ'</span>)
})
<span class="hljs-comment">// ç»„ä»¶è¢«åœç”¨æ—¶è§¦å‘ï¼ˆåˆ‡æ¢åˆ°å…¶ä»–æ ‡ç­¾é¡µï¼‰</span>
<span class="hljs-title function_">onDeactivated</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Tab1è¢«åœç”¨ï¼Œå¯æ‰§è¡Œæ¸…ç†æ“ä½œ'</span>)
})
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-14">äº”ã€æ‰©å±•åœºæ™¯ï¼šç»„åˆç”¨æ³•çš„å®é™…åº”ç”¨</h3>
<p>é™¤äº†æ ‡ç­¾é¡µï¼Œè¿™å¯¹ç»„åˆè¿˜èƒ½é€‚é…ä»¥ä¸‹é«˜é¢‘å¼€å‘åœºæ™¯ï¼Œæ ¸å¿ƒé€»è¾‘å®Œå…¨ä¸€è‡´ï¼Œåªéœ€çµæ´»è°ƒæ•´é…ç½®ï¼š</p>
<h4 data-id="heading-15">1. æ­¥éª¤æ¡ç»„ä»¶ï¼ˆå¤šæ­¥éª¤åˆ‡æ¢ï¼Œä¿ç•™æ¯æ­¥çŠ¶æ€ï¼‰</h4>
<p>æ­¥éª¤æ¡çš„æ¯ä¸€æ­¥å¯¹åº”ä¸€ä¸ªç»„ä»¶ï¼Œåˆ‡æ¢æ­¥éª¤æ—¶ä¿ç•™å½“å‰æ­¥éª¤çš„è¾“å…¥å†…å®¹ã€é€‰æ‹©çŠ¶æ€ï¼Œé¿å…ç”¨æˆ·é‡å¤æ“ä½œï¼Œæå‡ä½“éªŒã€‚</p>
<h4 data-id="heading-16">2. å¼¹çª—å†…å®¹åˆ‡æ¢ï¼ˆç¼“å­˜å¼¹çª—çŠ¶æ€ï¼‰</h4>
<p>å¼¹çª—å†…éœ€è¦åˆ‡æ¢ä¸åŒçš„è¡¨å•ã€è¯¦æƒ…å†…å®¹ï¼Œæ­é…keep-aliveå¯ä¿ç•™è¡¨å•è¾“å…¥çŠ¶æ€ï¼Œé¿å…å¼¹çª—å…³é—­/åˆ‡æ¢æ—¶ä¸¢å¤±å†…å®¹ã€‚</p>
<h4 data-id="heading-17">3. è·¯ç”±é¡µé¢ç¼“å­˜ï¼ˆVue3è·¯ç”±é…åˆkeep-aliveï¼‰</h4>
<p>åœ¨è·¯ç”±è§†å›¾ä¸­ä½¿ç”¨ç»„åˆå†™æ³•ï¼Œç¼“å­˜æŒ‡å®šè·¯ç”±é¡µé¢ï¼Œåˆ‡æ¢è·¯ç”±æ—¶ä¿ç•™é¡µé¢æ»šåŠ¨ä½ç½®ã€è¾“å…¥çŠ¶æ€ï¼ˆå¦‚åˆ—è¡¨é¡µåˆ†é¡µã€æœç´¢æ¡†å†…å®¹ï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">&lt;keep-alive include=<span class="hljs-string">"Home,List"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">router-view</span> /&gt;</span></span> &lt;!-- è·¯ç”±è§†å›¾æœ¬è´¨ä¹Ÿæ˜¯åŠ¨æ€ç»„ä»¶ --&gt;
&lt;/keep-alive&gt;
</code></pre>
<h3 data-id="heading-18">å…­ã€æ€»ç»“ï¼šæ ¸å¿ƒè¦ç‚¹ï¼ˆæ–°æ‰‹å¿…èƒŒï¼‰</h3>
<ol>
<li>ç»„åˆæ ¸å¿ƒï¼š å®ç°åŠ¨æ€åˆ‡æ¢ï¼Œkeep-alive å®ç°ç»„ä»¶ç¼“å­˜ï¼Œä¸¤è€…é…åˆ=çµæ´»åˆ‡æ¢+æ€§èƒ½ä¼˜åŒ–+çŠ¶æ€ä¿ç•™ï¼›</li>
<li>å…³é”®é…ç½®ï¼šå­ç»„ä»¶å¿…é¡»å®šä¹‰nameå±æ€§ï¼Œä¸keep-aliveçš„include/excludeåŒ¹é…ï¼Œå¦åˆ™ç¼“å­˜å¤±æ•ˆï¼›</li>
<li>é¿å‘å…³é”®ï¼šæ·»åŠ maxå±æ€§é™åˆ¶ç¼“å­˜æ•°é‡ï¼Œç”¨activated/deactivatedæ›¿ä»£ä¼ ç»Ÿç”Ÿå‘½å‘¨æœŸï¼›</li>
<li>é€‚ç”¨åœºæ™¯ï¼šæ ‡ç­¾é¡µã€æ­¥éª¤æ¡ã€å¼¹çª—åˆ‡æ¢ã€è·¯ç”±ç¼“å­˜ç­‰æ‰€æœ‰éœ€è¦â€œåˆ‡æ¢ç»„ä»¶å¹¶ä¿ç•™çŠ¶æ€â€çš„åœºæ™¯ã€‚</li>
</ol>
<p>å…¶å®+keep-aliveçš„ç”¨æ³•å¹¶ä¸å¤æ‚ï¼Œæ ¸å¿ƒå°±æ˜¯â€œåˆ‡æ¢â€å’Œâ€œç¼“å­˜â€ä¸¤ä¸ªå…³é”®è¯ã€‚æŒæ¡æœ¬æ–‡çš„å®æ“æ¡ˆä¾‹å’Œé¿å‘ç‚¹ï¼Œå°±èƒ½è½»æ¾åº”å¯¹å„ç±»åŠ¨æ€åˆ‡æ¢åœºæ™¯ï¼Œæ—¢æå‡é¡µé¢æ€§èƒ½ï¼Œåˆä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼Œé¢è¯•æ—¶ä¹Ÿèƒ½ä»å®¹åº”å¯¹ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½ çŸ¥é“çš„ï¼Œæˆ‘ä»¬ä¸Šåˆæ˜¯ä¸å†™ä»£ç çš„ï¼]]></title>    <link>https://juejin.cn/post/7602465642534404146</link>    <guid>https://juejin.cn/post/7602465642534404146</guid>    <pubDate>2026-02-04T02:23:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602465642534404146" data-draft-id="7602551091515572233" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½ çŸ¥é“çš„ï¼Œæˆ‘ä»¬ä¸Šåˆæ˜¯ä¸å†™ä»£ç çš„ï¼"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-04T02:23:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ©™åºå‘˜å°ç«™"/> <meta itemprop="url" content="https://juejin.cn/user/1546375522426169"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½ çŸ¥é“çš„ï¼Œæˆ‘ä»¬ä¸Šåˆæ˜¯ä¸å†™ä»£ç çš„ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1546375522426169/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ©™åºå‘˜å°ç«™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T02:23:31.000Z" title="Wed Feb 04 2026 02:23:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åˆšå…¥èŒçš„å®ä¹ ç”Ÿæ€»ä¼šé—®ï¼šâ€œå“¥ï¼Œä½ ä»¬ä¸ºå•¥ä¸Šåˆéƒ½ä¸å†™ä»£ç å•Šï¼Ÿä¸€ä¸ªä¸ªå¯¹ç€å±å¹•åˆ’æ°´ï¼Œåˆ°äº†ä¸‹åˆå°±è·Ÿæ‰“äº†é¸¡è¡€ä¸€æ ·æ•²é”®ç›˜ï¼Ÿâ€</p>
<p>æˆ‘ç¬‘ç€æ‹äº†æ‹ä»–çš„è‚©è†€ï¼šâ€œè¿™ä¸æ˜¯åˆ’æ°´ï¼Œæ˜¯ç¨‹åºå‘˜çš„â€˜ä¸Šåˆè“„åŠ›æ³•åˆ™â€™â€”â€”çœŸæ­£çš„ç¨‹åºå‘˜ï¼Œä¸Šåˆä»æ¥ä¸æ˜¯ç”¨æ¥å†™ä»£ç çš„ï¼Œè€Œæ˜¯ç”¨æ¥â€˜é¿å…ä¸‹åˆå†™åƒåœ¾ä»£ç â€™çš„ã€‚â€è™½ç„¶è¡¨é¢ä¸Šä½ ä¼šå‡†å¤‡ä»¥ä¸‹å‡ ç§è¯´è¾ï¼š</p>
<ol>
<li>ä¸Šåˆè¦å¼€ä¼šè§£å†³oncallå“ªæœ‰æ—¶é—´å†™å‘€</li>
<li>æ˜¨å¤©åŠ ç­æ™šäº†ï¼Œå¾—å…ˆæŠŠæ˜¨å¤©çš„äº‹æƒ…æ²‰æ·€æ²‰æ·€</li>
<li>å°åŒå¿—ï¼Œä¸Šå•æ‰€ï¼Œæ‰“æ°´ï¼Œåƒåˆé¥­éƒ½è¦æ’é˜Ÿæ»´ï¼Œä¸è¦å¤ªæ€¥ï¼Œç»™è‡ªå·±ç•™ç‚¹buffer~</li>
<li>å“ªæœ‰æ—¶é—´balabalaï¼ŒçœŸç¾¡æ…•ä½ å¯ä»¥æœ‰å¤§å—æ—¶é—´å†™ä»£ç ï¼</li>
</ol>
<p>å¾ˆå¤šå¤–è¡Œäººç”šè‡³åˆšå…¥è¡Œçš„æ–°äººéƒ½ä»¥ä¸ºï¼Œç¨‹åºå‘˜çš„å·¥ä½œå°±æ˜¯â€œååœ¨ç”µè„‘å‰æ•²ä»£ç â€ï¼Œä½†å®é™…ä¸Šï¼Œ<strong>å†™ä»£ç åªå ç¨‹åºå‘˜å·¥ä½œçš„40%ï¼Œå‰©ä¸‹çš„60%ï¼Œå…¨æ˜¯â€œé“ºå«å·¥ä½œâ€</strong> â€”â€”è€Œè¿™äº›é“ºå«ï¼Œæ°æ°æœ€é€‚åˆæ”¾åœ¨ä¸Šåˆå®Œæˆã€‚</p>
<p>ä»Šå¤©å°±ç”¨ç¨‹åºå‘˜èƒ½çœ‹æ‡‚çš„æ–¹å¼ï¼ˆæ¶æ„å›¾ã€æµç¨‹å›¾ã€ä¼ªä»£ç ï¼‰ï¼Œå¥½å¥½èŠèŠï¼šä¸ºå•¥æ­£å¸¸ç¨‹åºå‘˜ï¼Œä¸Šåˆéƒ½ä¸å†™ä»£ç ï¼Ÿ</p>
<h2 data-id="heading-0">å…ˆä¸Šç»“è®ºï¼šä¸Šåˆçš„æ ¸å¿ƒä»»åŠ¡ï¼Œæ˜¯â€œæ‹†è§£é—®é¢˜â€ï¼Œä¸æ˜¯â€œè§£å†³é—®é¢˜â€</h2>
<p>ç¨‹åºå‘˜çš„å·¥ä½œï¼Œæœ¬è´¨ä¸Šæ˜¯â€œå°†å¤æ‚éœ€æ±‚è½¬åŒ–ä¸ºå¯æ‰§è¡Œä»£ç â€çš„è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹å°±åƒç›–æˆ¿å­ï¼šä¸Šåˆæ˜¯â€œç”»å›¾çº¸ã€å¤‡ææ–™ã€å®šæ–¹æ¡ˆâ€ï¼Œä¸‹åˆæ‰æ˜¯â€œæ¬ç –ç Œå¢™â€ã€‚</p>
<p>å¦‚æœä¸Šåˆç›´æ¥ä¸Šæ‰‹å†™ä»£ç ï¼Œå°±ç›¸å½“äºâ€œæ²¡ç”»å›¾çº¸å°±å¼€å§‹ç Œå¢™â€â€”â€”çœ‹ä¼¼é«˜æ•ˆï¼Œå®åˆ™å¤§æ¦‚ç‡ä¼šå‡ºç°â€œç Œåˆ°ä¸€åŠå‘ç°å¢™æ­ªäº†ã€ææ–™ä¸å¯¹äº†ã€ç»“æ„é”™äº†â€ï¼Œæœ€ååªèƒ½æ¨å€’é‡æ¥ï¼Œåè€Œæ›´æµªè´¹æ—¶é—´ã€‚</p>
<p>æˆ‘ä»¬å…ˆé€šè¿‡ä¸€å¼ <strong>ç¨‹åºå‘˜æ¯æ—¥å·¥ä½œæ¶æ„å›¾</strong>ï¼Œçœ‹çœ‹ä¸Šåˆå’Œä¸‹åˆçš„å·¥ä½œé‡å¿ƒå·®å¼‚ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7376e1eea3a4e71b793b5ce0a489e34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmZ5bqP5ZGY5bCP56uZ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770776838&amp;x-signature=AUtUJLymuyDV4REgwjd5SyMQoPg%3D" alt="image.png" loading="lazy"/></p>
<p>ä»æ¶æ„å›¾èƒ½æ¸…æ™°çœ‹åˆ°ï¼šä¸Šåˆçš„â€œè“„åŠ›å±‚â€æ˜¯ä¸‹åˆâ€œæ‰§è¡Œå±‚â€çš„åŸºç¡€ï¼Œæ²¡æœ‰ä¸Šåˆçš„å……åˆ†å‡†å¤‡ï¼Œä¸‹åˆçš„ä»£ç ç¼–å†™å°±ä¼šå……æ»¡é˜»ç¢â€”â€”è¦ä¹ˆå¡åœ¨æ ¡éªŒé€»è¾‘ï¼Œè¦ä¹ˆåœåœ¨ä¾èµ–ç¼ºå¤±ï¼Œè¦ä¹ˆå†™ä¸€åŠå‘ç°éœ€æ±‚ç†è§£é”™äº†ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯ä¸ºå•¥æˆ‘ä»¬å¸¸è¯´ï¼š<strong>ä¸Šåˆå¤šèŠ±1å°æ—¶æ¢³ç†ï¼Œä¸‹åˆèƒ½çœ3å°æ—¶è¿”å·¥</strong>ã€‚</p>
<h2 data-id="heading-1">æµç¨‹å›¾æ‹†è§£ï¼šä¸Šåˆä¸å†™ä»£ç ï¼Œåˆ°åº•åœ¨å¿™å•¥ï¼Ÿ</h2>
<p>å¾ˆå¤šäººè§‰å¾—â€œä¸Šåˆä¸å†™ä»£ç å°±æ˜¯æ‘¸é±¼â€ï¼Œå…¶å®æ˜¯æ²¡çœ‹åˆ°ç¨‹åºå‘˜ä¸Šåˆçš„â€œéšæ€§å·¥ä½œâ€ã€‚æˆ‘ä»¬ç”¨ä¸€å¼ <strong>ä¸Šåˆå·¥ä½œæµç¨‹å›¾</strong>ï¼Œè¿˜åŸç¨‹åºå‘˜çš„çœŸå®ä¸Šåˆï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c804ef6633f244e3b3dd2aed06a2fd72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmZ5bqP5ZGY5bCP56uZ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770776838&amp;x-signature=AFTIqo7YDz5EH0woWsGnms0rb4k%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™å¼ æµç¨‹å›¾ï¼Œæ¯ä¸€æ­¥éƒ½åœ¨ä¸ºâ€œä¸‹åˆé«˜æ•ˆå†™ä»£ç â€é“ºè·¯ï¼š</p>
<ul>
<li>
<p>éœ€æ±‚æ¢³ç†ï¼šé¿å…â€œç†è§£åå·®â€å¯¼è‡´ä»£ç è¿”å·¥ï¼›</p>
</li>
<li>
<p>æ–¹æ¡ˆæ¨æ¼”ï¼šé¿å…â€œæŠ€æœ¯é€‰å‹é”™è¯¯â€å¯¼è‡´åæœŸé‡æ„ï¼›</p>
</li>
<li>
<p>ç¯å¢ƒå‡†å¤‡ï¼šé¿å…â€œä¸‹åˆç¼–ç åˆ°ä¸€åŠï¼Œå‘ç°ç¯å¢ƒå´©äº†â€çš„å°´å°¬ã€‚</p>
</li>
</ul>
<p>ä¸¾ä¸ªçœŸå®ä¾‹å­ï¼šä¹‹å‰æœ‰ä¸ªå®ä¹ ç”Ÿï¼Œå…¥èŒç¬¬äºŒå¤©å°±ä¸Šåˆç›´æ¥å†™ä»£ç ï¼Œç»“æœå†™äº†2å°æ—¶ï¼Œå‘ç°è‡ªå·±ç†è§£çš„éœ€æ±‚å’Œäº§å“è¦çš„å®Œå…¨ä¸ä¸€æ ·ï¼Œæ¥å£ä¾èµ–ä¹Ÿæ²¡ç¡®è®¤ï¼Œæœ€ååªèƒ½å…¨éƒ¨åˆ æ‰â€”â€”è¿™å°±æ˜¯â€œä¸Šåˆä¸è“„åŠ›ï¼Œä¸‹åˆç™½è´¹åŠ›â€ã€‚</p>
<h2 data-id="heading-2">ä¼ªä»£ç ä½è¯ï¼šä¸Šåˆå†™ä»£ç ï¼Œä¸ºå•¥æ•ˆç‡æä½ï¼Ÿ</h2>
<p>æˆ‘ä»¬ç”¨ä¸€æ®µâ€œä¼ªä»£ç â€ï¼Œæ¨¡æ‹Ÿâ€œä¸Šåˆç›´æ¥å†™ä»£ç â€å’Œâ€œä¸Šåˆè“„åŠ›ã€ä¸‹åˆå†™ä»£ç â€çš„æ•ˆç‡å·®å¼‚ï¼Œå°±èƒ½ç›´è§‚æ„Ÿå—åˆ°ä¸ºå•¥ä¸Šåˆä¸é€‚åˆå†™ä»£ç ã€‚</p>
<h3 data-id="heading-3">åœºæ™¯ï¼šå®ç°ä¸€ä¸ªâ€œç”¨æˆ·ç™»å½•æ ¡éªŒâ€åŠŸèƒ½</h3>
<h4 data-id="heading-4">åé¢æ¡ˆä¾‹ï¼šä¸Šåˆç›´æ¥å†™ä»£ç ï¼ˆæ•ˆç‡æä½ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸Šåˆ9:30ï¼Œç›´æ¥ä¸Šæ‰‹å†™ä»£ç ï¼Œæœªæ¢³ç†éœ€æ±‚å’Œä¾èµ–</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginController</span> {
    <span class="hljs-comment">// 1. æœªç¡®è®¤éœ€æ±‚ï¼šä¸çŸ¥é“éœ€è¦æ ¡éªŒæ‰‹æœºå·/é‚®ç®±ï¼Œè¿˜æ˜¯ä¸¤è€…éƒ½æ”¯æŒ</span>
    <span class="hljs-comment">// 2. æœªç¡®è®¤ä¾èµ–ï¼šä¸çŸ¥é“ç”¨æˆ·æ•°æ®åº“æ¥å£æ˜¯å¦å°±ç»ª</span>
    <span class="hljs-comment">// 3. æœªæ¨æ¼”é€»è¾‘ï¼šæœªè€ƒè™‘å¯†ç åŠ å¯†ã€tokenç”Ÿæˆã€å¼‚å¸¸å¤„ç†</span>
    
    <span class="hljs-keyword">public</span> Result <span class="hljs-title function_">login</span><span class="hljs-params">(String account, String password)</span> {
        <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šå†™ç™»å½•æ ¡éªŒï¼Œå‘ç°ä¸çŸ¥é“accountæ”¯æŒä»€ä¹ˆæ ¼å¼</span>
        <span class="hljs-keyword">if</span> (account == <span class="hljs-literal">null</span> || account.isEmpty()) {
            <span class="hljs-keyword">return</span> Result.fail(<span class="hljs-string">"è´¦å·ä¸èƒ½ä¸ºç©º"</span>);
        }
        <span class="hljs-comment">// æ­¤æ—¶æ‰å»é—®äº§å“ï¼šè´¦å·æ”¯æŒæ‰‹æœºå·è¿˜æ˜¯é‚®ç®±ï¼Ÿï¼ˆæµªè´¹10minï¼‰</span>
        <span class="hljs-comment">// äº§å“å›å¤ï¼šä¸¤è€…éƒ½æ”¯æŒï¼Œéœ€è¦åˆ†åˆ«æ ¡éªŒæ ¼å¼</span>
        <span class="hljs-comment">// è¿”å·¥ï¼šæ·»åŠ æ ¼å¼æ ¡éªŒ</span>
        <span class="hljs-keyword">if</span> (!isPhone(account) &amp;&amp; !isEmail(account)) {
            <span class="hljs-keyword">return</span> Result.fail(<span class="hljs-string">"è´¦å·æ ¼å¼é”™è¯¯ï¼ˆæ‰‹æœºå·/é‚®ç®±ï¼‰"</span>);
        }
        
        <span class="hljs-comment">//------------------------------------</span>
        <span class="hljs-comment">// *****è€æ¿ï¼šæ˜¨å¤©çš„ä¼šè®®å¾…åŠå’±å¯¹ä¸€ä¸‹~~~~</span>
        <span class="hljs-comment">//------------------------------------</span>
        
        <span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šæŸ¥è¯¢ç”¨æˆ·ï¼Œå‘ç°æ•°æ®åº“æ¥å£æœªå¯¹æ¥ï¼ˆæµªè´¹20minï¼‰</span>
        <span class="hljs-type">UserService</span> <span class="hljs-variable">userService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserService</span>();
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">try</span> {
            user = userService.getUserByAccount(account);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// æ’æŸ¥å‘ç°ï¼šæ•°æ®åº“è¿æ¥æœªé…ç½®ï¼Œæ¥å£æœªå¼€å‘å®Œæˆ</span>
            <span class="hljs-keyword">return</span> Result.fail(<span class="hljs-string">"æœåŠ¡å¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•"</span>);
        }
        
        <span class="hljs-comment">// ç¬¬ä¸‰æ­¥ï¼šå¯†ç æ ¡éªŒï¼Œå‘ç°æœªç¡®è®¤å¯†ç åŠ å¯†æ–¹å¼ï¼ˆæµªè´¹15minï¼‰</span>
        <span class="hljs-comment">// å»é—®åç«¯åŒäº‹ï¼šå¯†ç æ˜¯MD5åŠ å¯†è¿˜æ˜¯BCryptåŠ å¯†ï¼Ÿ</span>
        <span class="hljs-comment">// åŒäº‹å›å¤ï¼šBCryptåŠ å¯†ï¼Œéœ€è¦è°ƒç”¨å·¥å…·ç±»</span>
        <span class="hljs-comment">// è¿”å·¥ï¼šæ·»åŠ å¯†ç åŠ å¯†æ ¡éªŒ</span>
        <span class="hljs-keyword">if</span> (!BCrypt.checkpw(password, user.getPassword())) {
            <span class="hljs-keyword">return</span> Result.fail(<span class="hljs-string">"å¯†ç é”™è¯¯"</span>);
        }
        
        <span class="hljs-comment">//------------------------------</span>
        <span class="hljs-comment">// *****æ’å…¥äº‹é¡¹ï¼šçº¿ä¸Šæ¥é—®é¢˜äº†~~~~</span>
        <span class="hljs-comment">//------------------------------</span>
        
        <span class="hljs-comment">// ç¬¬å››æ­¥ï¼šç”Ÿæˆtokenï¼Œæœªè€ƒè™‘tokenè¿‡æœŸæ—¶é—´ï¼ˆæµªè´¹10minï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> TokenUtil.generateToken(user.getId());
        <span class="hljs-comment">// äº§å“æé†’ï¼štokenè¿‡æœŸæ—¶é—´éœ€è¦è®¾ä¸º2å°æ—¶</span>
        <span class="hljs-comment">// è¿”å·¥ï¼šä¿®æ”¹tokenç”Ÿæˆé€»è¾‘</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> TokenUtil.generateToken(user.getId(), <span class="hljs-number">7200</span>);
        
        <span class="hljs-comment">// ç¬¬äº”æ­¥ï¼šæœªè€ƒè™‘å¼‚å¸¸åœºæ™¯ï¼ˆå¦‚ç”¨æˆ·è¢«ç¦ç”¨ï¼‰</span>
        <span class="hljs-comment">// æµ‹è¯•æé†’ï¼šéœ€è¦æ ¡éªŒç”¨æˆ·çŠ¶æ€</span>
        <span class="hljs-comment">// è¿”å·¥ï¼šæ·»åŠ ç”¨æˆ·çŠ¶æ€æ ¡éªŒ</span>
        <span class="hljs-keyword">if</span> (user.getStatus() == <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> Result.fail(<span class="hljs-string">"è´¦å·å·²è¢«ç¦ç”¨"</span>);
        }
        
        <span class="hljs-keyword">return</span> Result.success(token);
    }
    
    <span class="hljs-comment">// é¢å¤–æµªè´¹æ—¶é—´ï¼šä¸Šåˆæ€è·¯æ··ä¹±ï¼Œä»£ç å†—ä½™ã€æ ¼å¼ä¸è§„èŒƒï¼Œä¸‹åˆè¿˜éœ€è¦é‡æ„ï¼ˆæµªè´¹30minï¼‰</span>
}

</code></pre>
<p>ç»Ÿè®¡ï¼šä¸Šåˆå†™ä»£ç ï¼Œæ€»å…±èŠ±è´¹2å°æ—¶ï¼Œå…¶ä¸­è¿”å·¥+ç­‰å¾…æ—¶é—´å 1å°æ—¶45minï¼Œæœ‰æ•ˆç¼–ç æ—¶é—´ä»…15min ã€‚ã€‚ã€‚</p>
<h4 data-id="heading-5">æ­£é¢æ¡ˆä¾‹ï¼šä¸Šåˆè“„åŠ›ï¼Œä¸‹åˆå†™ä»£ç ï¼ˆæ•ˆç‡æé«˜ï¼‰</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-comment">// ä¸Šåˆ9:30-12:00ï¼Œè“„åŠ›å‡†å¤‡ï¼ˆä¸å†™æ ¸å¿ƒä»£ç ï¼‰</span>
    <span class="hljs-comment">// 1. éœ€æ±‚æ¢³ç†ï¼ˆ30minï¼‰ï¼šç¡®è®¤è´¦å·æ”¯æŒæ‰‹æœºå·/é‚®ç®±ï¼Œéœ€è¦æ ¡éªŒæ ¼å¼ï¼›å¯†ç BCryptåŠ å¯†ï¼›tokenè¿‡æœŸ2å°æ—¶ï¼›æ ¡éªŒç”¨æˆ·çŠ¶æ€</span>
    <span class="hljs-comment">// 2. ä¾èµ–ç¡®è®¤ï¼ˆ20minï¼‰ï¼šç¡®è®¤ç”¨æˆ·æ•°æ®åº“æ¥å£å·²å¼€å‘å®Œæˆï¼Œæ•°æ®åº“è¿æ¥é…ç½®å°±ç»ªï¼›Tokenå·¥å…·ç±»å¯ç”¨</span>
    <span class="hljs-comment">// 3. é€»è¾‘æ¨æ¼”ï¼ˆ40minï¼‰ï¼šæ¢³ç†æ‰§è¡Œæµç¨‹ï¼Œé¢„åˆ¤å¼‚å¸¸åœºæ™¯ï¼ˆè´¦å·ä¸ºç©ºã€æ ¼å¼é”™è¯¯ã€å¯†ç é”™è¯¯ã€ç”¨æˆ·ç¦ç”¨ã€æœåŠ¡å¼‚å¸¸ï¼‰</span>
    <span class="hljs-comment">// 4. å‡†å¤‡æµ‹è¯•ç”¨ä¾‹ï¼ˆ20minï¼‰ï¼šè®¾è®¡æ­£å¸¸ç™»å½•ã€å¼‚å¸¸åœºæ™¯çš„æµ‹è¯•æ•°æ®</span>

    <span class="hljs-comment">// ä¸‹åˆ14:00ï¼Œå¼€å§‹å†™ä»£ç ï¼ˆæ€è·¯æ¸…æ™°ï¼Œæ— è¿”å·¥ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginController</span> {
        <span class="hljs-meta">@Autowired</span>
        <span class="hljs-keyword">private</span> UserService userService;
        
        <span class="hljs-keyword">public</span> Result <span class="hljs-title function_">login</span><span class="hljs-params">(String account, String password)</span> {
            <span class="hljs-comment">// 1. è´¦å·éç©ºæ ¡éªŒ</span>
            <span class="hljs-keyword">if</span> (account == <span class="hljs-literal">null</span> || account.isEmpty()) {
                <span class="hljs-keyword">return</span> Result.fail(<span class="hljs-string">"è´¦å·ä¸èƒ½ä¸ºç©º"</span>);
            }
            <span class="hljs-comment">// 2. è´¦å·æ ¼å¼æ ¡éªŒï¼ˆæ‰‹æœºå·/é‚®ç®±ï¼‰</span>
            <span class="hljs-keyword">if</span> (!isPhone(account) &amp;&amp; !isEmail(account)) {
                <span class="hljs-keyword">return</span> Result.fail(<span class="hljs-string">"è´¦å·æ ¼å¼é”™è¯¯ï¼ˆæ‰‹æœºå·/é‚®ç®±ï¼‰"</span>);
            }
            <span class="hljs-comment">// 3. æŸ¥è¯¢ç”¨æˆ·ï¼Œå¤„ç†æœåŠ¡å¼‚å¸¸</span>
            User user;
            <span class="hljs-keyword">try</span> {
                user = userService.getUserByAccount(account);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                log.error(<span class="hljs-string">"æŸ¥è¯¢ç”¨æˆ·å¼‚å¸¸ï¼š{}"</span>, e.getMessage());
                <span class="hljs-keyword">return</span> Result.fail(<span class="hljs-string">"æœåŠ¡å¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•"</span>);
            }
            <span class="hljs-comment">// 4. ç”¨æˆ·ä¸å­˜åœ¨æ ¡éªŒ</span>
            <span class="hljs-keyword">if</span> (user == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> Result.fail(<span class="hljs-string">"è´¦å·æˆ–å¯†ç é”™è¯¯"</span>);
            }
            <span class="hljs-comment">// 5. å¯†ç æ ¡éªŒï¼ˆBCryptåŠ å¯†ï¼‰</span>
            <span class="hljs-keyword">if</span> (!BCrypt.checkpw(password, user.getPassword())) {
                <span class="hljs-keyword">return</span> Result.fail(<span class="hljs-string">"è´¦å·æˆ–å¯†ç é”™è¯¯"</span>);
            }
            <span class="hljs-comment">// 6. ç”¨æˆ·çŠ¶æ€æ ¡éªŒï¼ˆæœªç¦ç”¨ï¼‰</span>
            <span class="hljs-keyword">if</span> (user.getStatus() == <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">return</span> Result.fail(<span class="hljs-string">"è´¦å·å·²è¢«ç¦ç”¨"</span>);
            }
            <span class="hljs-comment">// 7. ç”Ÿæˆtokenï¼ˆè¿‡æœŸ2å°æ—¶ï¼‰</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> TokenUtil.generateToken(user.getId(), <span class="hljs-number">7200</span>);
            
            <span class="hljs-keyword">return</span> Result.success(token);
        }
    }
</code></pre>
<p>ç»Ÿè®¡ï¼šä¸‹åˆå†™ä»£ç ï¼Œæ€»å…±èŠ±è´¹40minï¼Œæ— è¿”å·¥ï¼Œä»£ç è§„èŒƒï¼Œå¯ç›´æ¥æµ‹è¯•</p>
<p>ä¸¤æ®µä¼ªä»£ç å¯¹æ¯”ï¼Œå·®è·ä¸€ç›®äº†ç„¶ï¼šä¸Šåˆç›´æ¥å†™ä»£ç ï¼Œå¤§éƒ¨åˆ†æ—¶é—´éƒ½æµªè´¹åœ¨â€œè¿”å·¥ã€ç­‰å¾…ã€æ’æŸ¥é—®é¢˜â€ä¸Šï¼›è€Œä¸Šåˆåšå¥½è“„åŠ›å‡†å¤‡ï¼Œä¸‹åˆå†™ä»£ç å°±èƒ½â€œä¸€æ°”å‘µæˆâ€ï¼Œæ•ˆç‡æå‡3å€ä»¥ä¸Šã€‚</p>
<h2 data-id="heading-6">ä¸æ˜¯â€œä¸å†™ä»£ç â€ï¼Œæ˜¯â€œä¸ç›²ç›®å†™ä»£ç â€</h2>
<p>æœ€åå¿…é¡»æ¾„æ¸…ä¸€ç‚¹ï¼šç¨‹åºå‘˜ä¸Šåˆä¸å†™ä»£ç ï¼Œä¸æ˜¯â€œæ‘¸é±¼â€ï¼Œè€Œæ˜¯â€œä¸ç›²ç›®å†™ä»£ç â€ã€‚</p>
<p>çœŸæ­£é«˜æ•ˆçš„ç¨‹åºå‘˜ï¼Œéƒ½æ‡‚â€œè“„åŠ›æ¯”æ‰§è¡Œæ›´é‡è¦â€â€”â€”ä¸Šåˆçš„æ¯ä¸€ä»½å‡†å¤‡ï¼Œéƒ½æ˜¯ä¸ºäº†ä¸‹åˆèƒ½æ›´ä¸“æ³¨ã€æ›´é«˜æ•ˆåœ°å†™ä»£ç ï¼Œé¿å…åšâ€œæ— ç”¨åŠŸâ€ã€‚</p>
<p>å°±åƒæˆ‘ä»¬å¸¸è¯´çš„ï¼š<strong>ç¨‹åºå‘˜çš„æ ¸å¿ƒç«äº‰åŠ›ï¼Œä¸æ˜¯â€œæ•²ä»£ç çš„é€Ÿåº¦â€ï¼Œè€Œæ˜¯â€œè§£å†³é—®é¢˜çš„æ•ˆç‡â€</strong> ã€‚ä¸Šåˆæ¢³ç†æ¸…æ¥šé—®é¢˜ï¼Œä¸‹åˆå°±èƒ½å¿«é€Ÿè§£å†³é—®é¢˜ï¼›ä¸Šåˆç›²ç›®æ•²ä»£ç ï¼Œä¸‹åˆå°±åªèƒ½åœ¨è¿”å·¥ä¸­å†…è€—ã€‚</p>
<p>æ‰€ä»¥ä¸‹æ¬¡å†çœ‹åˆ°ç¨‹åºå‘˜ä¸Šåˆå¯¹ç€å±å¹•â€œåˆ’æ°´â€ï¼Œåˆ«å†ä»¥ä¸ºä»–ä»¬æ²¡å¹²æ´»â€”â€”ä»–ä»¬å¯èƒ½æ­£åœ¨æ¢³ç†éœ€æ±‚ã€æ¨æ¼”æ–¹æ¡ˆã€å‡†å¤‡ç¯å¢ƒï¼Œä¸ºä¸‹åˆçš„â€œä»£ç å†²åˆºâ€è“„åŠ›å‘¢ï¼</p>
<p>æœ€åé€æ‰€æœ‰ç¨‹åºå‘˜ä¸€å¥æ¢—å¼çœŸç†ï¼š<strong>ä¸Šåˆä¸å†™ä»£ç ï¼Œä¸æ˜¯ä¸</strong> <strong>å†™</strong> <strong>ï¼Œæ˜¯ç¼“å†™ï¼Œæ…¢å†™ï¼Œä¼˜å†™ï¼Œæœ‰æ¬¡åºçš„å†™</strong>â€”â€”è®©æ¢³ç†å¥½çš„éœ€æ±‚å…ˆå†™ï¼Œè®©æ²¡æœ‰ä¾èµ–çš„æ¨¡å—å…ˆå†™ï¼Œè®©é¢„åˆ¤å¥½çš„é€»è¾‘å…ˆå†™ï¼Œæ‰èƒ½å…ˆå†™å¸¦åŠ¨åå†™ï¼›ä¹Ÿè¦å…·ä½“æƒ…å†µå…·ä½“å†™ï¼Œä¸Šåˆè“„åŠ›ã€ä¸‹åˆå†™ä»£ç ï¼Œä¸ç®¡æ—©å†™æ™šå†™ï¼Œèƒ½å†™å‡ºæ— bugã€é«˜å¯ç”¨çš„ä»£ç ï¼Œéƒ½æ˜¯å¥½ä»£ç ï¼</p>
<h3 data-id="heading-7">äº’åŠ¨è¯é¢˜</h3>
<p>ä½ ä¸Šåˆä¼šå†™ä»£ç å—ï¼Ÿæœ‰æ²¡æœ‰è¿‡â€œä¸Šåˆå†™ä»£ç ï¼Œä¸‹åˆå…¨åˆ æ‰â€çš„å°´å°¬ç»å†ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„æ—¥å¸¸å·¥ä½œèŠ‚å¥ï½</p>
<p>å…³æ³¨æˆ‘ï¼Œåˆ†äº«æ›´å¤šç¨‹åºå‘˜æ—¥å¸¸ã€æŠ€æœ¯å¹²è´§ï¼Œå¸¦ä½ çœ‹é€ç¨‹åºå‘˜çš„â€œæ‘¸é±¼å¼é«˜æ•ˆâ€ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vueé€’å½’ç»„ä»¶å°ç¥å†™æ³•ï¼šname + templateé€’å½’ï¼Œä¸€æ¬¡æ€§åƒé€æ ‘å½¢ç»“æ„æ¸²æŸ“ï¼]]></title>    <link>https://juejin.cn/post/7602474148095262772</link>    <guid>https://juejin.cn/post/7602474148095262772</guid>    <pubDate>2026-02-04T02:51:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602474148095262772" data-draft-id="7602158221851131919" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vueé€’å½’ç»„ä»¶å°ç¥å†™æ³•ï¼šname + templateé€’å½’ï¼Œä¸€æ¬¡æ€§åƒé€æ ‘å½¢ç»“æ„æ¸²æŸ“ï¼"/> <meta itemprop="keywords" content="JavaScript,é¢è¯•,Vue.js"/> <meta itemprop="datePublished" content="2026-02-04T02:51:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="boooooooom"/> <meta itemprop="url" content="https://juejin.cn/user/3078273283917399"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vueé€’å½’ç»„ä»¶å°ç¥å†™æ³•ï¼šname + templateé€’å½’ï¼Œä¸€æ¬¡æ€§åƒé€æ ‘å½¢ç»“æ„æ¸²æŸ“ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3078273283917399/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    boooooooom
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T02:51:33.000Z" title="Wed Feb 04 2026 02:51:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ­£æ–‡</h2>
<h3 data-id="heading-1">ä¸€ã€å‰è¨€ï¼šä»€ä¹ˆæ—¶å€™éœ€è¦ç”¨é€’å½’ç»„ä»¶ï¼Ÿ</h3>
<p>åœ¨Vueå¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ã€Œå±‚çº§ä¸å›ºå®šã€çš„ç»“æ„æ¸²æŸ“éœ€æ±‚â€”â€”æ¯”å¦‚æ ‘å½¢èœå•ã€åˆ†ç±»åˆ—è¡¨ã€æ–‡ä»¶å¤¹å¯¼èˆªã€è¯„è®ºåµŒå¥—ç­‰ã€‚è¿™ç±»åœºæ™¯å¦‚æœç”¨å¾ªç¯åµŒå¥—å†™ï¼Œå±‚çº§è¶Šå¤šä»£ç è¶Šå†—ä½™ï¼Œç»´æŠ¤æˆæœ¬æé«˜ã€‚</p>
<p>è€Œé€’å½’ç»„ä»¶ï¼Œå°±æ˜¯è§£å†³è¿™ç±»é—®é¢˜çš„â€œæœ€ä¼˜è§£â€ã€‚å®ƒçš„æ ¸å¿ƒé€»è¾‘æ˜¯ã€Œç»„ä»¶è‡ªèº«è°ƒç”¨è‡ªèº«ã€ï¼Œè€ŒVueä¸­æœ€ç»å…¸ã€æœ€æ˜“ç”¨çš„é€’å½’å†™æ³•ï¼Œå°±æ˜¯ <strong>name+templateé€’å½’</strong>ï¼ˆæ— éœ€é¢å¤–å¼•å…¥ç»„ä»¶ï¼Œä»…é ç»„ä»¶nameå±æ€§å³å¯å®ç°è‡ªè°ƒç”¨ï¼‰ï¼Œä¹Ÿæ˜¯é¢è¯•é«˜é¢‘è€ƒç‚¹ã€‚</p>
<h3 data-id="heading-2">äºŒã€æ ¸å¿ƒåŸç†ï¼šname + templateé€’å½’ä¸ºä»€ä¹ˆèƒ½ç”Ÿæ•ˆï¼Ÿ</h3>
<p>å¾ˆå¤šæ–°æ‰‹ä¼šç–‘æƒ‘ï¼šâ€œç»„ä»¶æ€ä¹ˆèƒ½è‡ªå·±è°ƒç”¨è‡ªå·±ï¼Ÿä¸ä¼šæŠ¥é”™å—ï¼Ÿâ€ å…¶å®å…³é”®å°±ä¸¤ä¸ªç‚¹ï¼Œç†è§£åå°±èƒ½è½»æ¾ä¸Šæ‰‹ï¼š</p>
<ol>
<li><strong>nameå±æ€§çš„ä½œç”¨</strong>ï¼šVueç»„ä»¶çš„nameå±æ€§ï¼Œé™¤äº†ç”¨äºè°ƒè¯•ã€keep-aliveç¼“å­˜ï¼Œè¿˜æœ‰ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½â€”â€”è®©ç»„ä»¶åœ¨è‡ªèº«æ¨¡æ¿ä¸­ï¼Œé€šè¿‡nameå€¼å¼•ç”¨è‡ªå·±ï¼ˆç›¸å½“äºç»„ä»¶çš„â€œè‡ªå¼•ç”¨æ ‡è¯†â€ï¼‰ã€‚</li>
<li><strong>é€’å½’ç»ˆæ­¢æ¡ä»¶</strong>ï¼šé€’å½’çš„æ ¸å¿ƒæ˜¯â€œå¾ªç¯è°ƒç”¨+ç»ˆæ­¢å‡ºå£â€ï¼Œå¦åˆ™ä¼šé™·å…¥æ— é™é€’å½’ï¼Œå¯¼è‡´é¡µé¢å´©æºƒã€‚Vueé€’å½’ç»„ä»¶ä¸­ï¼Œé€šå¸¸é€šè¿‡ã€Œåˆ¤æ–­æ•°æ®å±‚çº§æ˜¯å¦å­˜åœ¨ã€ä½œä¸ºç»ˆæ­¢æ¡ä»¶ï¼ˆæ¯”å¦‚æ²¡æœ‰å­èŠ‚ç‚¹æ—¶ï¼Œåœæ­¢è‡ªè°ƒç”¨ï¼‰ã€‚</li>
</ol>
<p>ç®€å•æ€»ç»“ï¼šç»™ç»„ä»¶å®šä¹‰name â†’ åœ¨templateä¸­ï¼Œé€šè¿‡nameå€¼è°ƒç”¨ç»„ä»¶è‡ªèº« â†’ åŠ ç»ˆæ­¢æ¡ä»¶ï¼Œé¿å…æ— é™é€’å½’ï¼Œè¿™å°±æ˜¯name+templateé€’å½’çš„å®Œæ•´é€»è¾‘ã€‚</p>
<h3 data-id="heading-3">ä¸‰ã€å®æ“æ¼”ç¤ºï¼šname + templateé€’å½’ç»å…¸æ¡ˆä¾‹ï¼ˆæ ‘å½¢èœå•ï¼‰</h3>
<p>ç»“åˆæœ€å¸¸ç”¨çš„ã€Œæ ‘å½¢èœå•ã€åœºæ™¯ï¼Œæ‰‹æŠŠæ‰‹å®ç°é€’å½’ç»„ä»¶ï¼Œä»£ç å¯ç›´æ¥å¤åˆ¶å¥—ç”¨ï¼Œé‡ç‚¹çœ‹æ³¨é‡Šç»†èŠ‚ã€‚</p>
<h4 data-id="heading-4">1. å‡†å¤‡é€’å½’æ•°æ®ï¼ˆå±‚çº§ä¸å›ºå®šï¼‰</h4>
<p>å…ˆå®šä¹‰ä¸€ä»½æ¨¡æ‹Ÿçš„æ ‘å½¢èœå•æ•°æ®ï¼Œå±‚çº§å¯ä»»æ„æ‰©å±•ï¼ˆè¿™é‡Œæ˜¯3çº§ï¼Œå®é™…å¼€å‘ä¸­å¯åŠ¨æ€è·å–ï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// æ¨¡æ‹Ÿæ ‘å½¢èœå•æ•°æ®ï¼ˆå±‚çº§ä¸å›ºå®šï¼Œå¯æ— é™æ‰©å±•ï¼‰</span>
<span class="hljs-keyword">const</span> treeData = [
  {
    <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">"é¦–é¡µ"</span>,
    <span class="hljs-attr">children</span>: [ <span class="hljs-comment">// å­èŠ‚ç‚¹ï¼ˆæœ‰å­èŠ‚ç‚¹åˆ™ç»§ç»­é€’å½’ï¼‰</span>
      { <span class="hljs-attr">id</span>: <span class="hljs-number">11</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">"é¦–é¡µbanner"</span>, <span class="hljs-attr">children</span>: [] },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">12</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">"é¦–é¡µå¯¼èˆª"</span>, <span class="hljs-attr">children</span>: [] }
    ]
  },
  {
    <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">"å•†å“ç®¡ç†"</span>,
    <span class="hljs-attr">children</span>: [
      { 
        <span class="hljs-attr">id</span>: <span class="hljs-number">21</span>, 
        <span class="hljs-attr">label</span>: <span class="hljs-string">"å•†å“åˆ—è¡¨"</span>, 
        <span class="hljs-attr">children</span>: [ <span class="hljs-comment">// ä¸‰çº§å­èŠ‚ç‚¹</span>
          { <span class="hljs-attr">id</span>: <span class="hljs-number">211</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">"ä¸Šæ¶å•†å“"</span> },
          { <span class="hljs-attr">id</span>: <span class="hljs-number">212</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">"ä¸‹æ¶å•†å“"</span> }
        ] 
      },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">22</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">"å•†å“åˆ†ç±»"</span> }
    ]
  },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">"ä¸ªäººä¸­å¿ƒ"</span>, <span class="hljs-attr">children</span>: [] } <span class="hljs-comment">// æ— å­å¥³èŠ‚ç‚¹ï¼ˆç»ˆæ­¢é€’å½’ï¼‰</span>
];
</code></pre>
<h4 data-id="heading-5">2. ç¼–å†™é€’å½’ç»„ä»¶ï¼ˆname + templateæ ¸å¿ƒå†™æ³•ï¼‰</h4>
<p>ç»„ä»¶æ ¸å¿ƒï¼šå®šä¹‰nameå±æ€§ â†’ templateä¸­è‡ªè°ƒç”¨ â†’ åŠ ç»ˆæ­¢æ¡ä»¶ï¼ˆåˆ¤æ–­childrenæ˜¯å¦ä¸ºç©ºï¼‰ï¼Œåˆ†é€‰é¡¹å¼APIå’Œç»„åˆå¼APIï¼ˆ
</p><h5 data-id="heading-6">å†™æ³•1ï¼šé€‰é¡¹å¼APIï¼ˆä¼ ç»Ÿå†™æ³•ï¼Œæ˜“ç†è§£ï¼‰</h5>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tree-menu"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å¾ªç¯å½“å‰å±‚çº§æ•°æ® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in menuData"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.id"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tree-item"</span>&gt;</span>
<span class="hljs-comment">&lt;!-- æ¸²æŸ“å½“å‰èŠ‚ç‚¹å†…å®¹ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{{ item.label }}<span class="hljs-symbol">&amp;lt;</span>/span<span class="hljs-symbol">&amp;gt;</span>
      <span class="hljs-comment">&lt;!-- é€’å½’æ ¸å¿ƒï¼šè‡ªèº«è°ƒç”¨è‡ªèº«ï¼ˆé€šè¿‡nameå€¼TreeMenuï¼‰ --&gt;</span>
      <span class="hljs-comment">&lt;!-- ç»ˆæ­¢æ¡ä»¶ï¼šåªæœ‰å½“childrenå­˜åœ¨ä¸”é•¿åº¦&gt;0æ—¶ï¼Œæ‰é€’å½’è°ƒç”¨ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">TreeMenu</span> 
        <span class="hljs-attr">v-if</span>=<span class="hljs-string">"item.children &amp;&amp; item.children.length"</span> 
        <span class="hljs-attr">:menu-data</span>=<span class="hljs-string">"item.children"</span> 
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-comment">// 1. å®šä¹‰nameå±æ€§ï¼ˆå¿…é¡»ï¼Œä½œä¸ºç»„ä»¶è‡ªå¼•ç”¨æ ‡è¯†ï¼‰</span>
  <span class="hljs-attr">name</span>: <span class="hljs-string">"TreeMenu"</span>,
  <span class="hljs-comment">// 2. æ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’çš„å½“å‰å±‚çº§æ•°æ®ï¼ˆé€’å½’æ—¶ï¼Œä¼ é€’å­èŠ‚ç‚¹æ•°æ®ï¼‰</span>
  <span class="hljs-attr">props</span>: {
    <span class="hljs-attr">menuData</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Array</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> []
    }
  }
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h5 data-id="heading-7">å†™æ³•2ï¼šç»„åˆå¼APIï¼ˆ<code>&lt;script setup&gt;</code>ï¼ŒVue3é¦–é€‰ï¼‰</h5>
<p>æ³¨æ„ï¼š<code>&lt;script setup&gt;</code> ä¸­ï¼Œç»„ä»¶é»˜è®¤æ²¡æœ‰nameå±æ€§ï¼Œéœ€è¦æ‰‹åŠ¨é€šè¿‡defineOptionså®šä¹‰ï¼Œå…¶ä»–é€»è¾‘å’Œé€‰é¡¹å¼APIä¸€è‡´ã€‚</p>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tree-menu"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in menuData"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.id"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tree-item"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{{ item.label }}<span class="hljs-symbol">&amp;lt;</span>/span<span class="hljs-symbol">&amp;gt;</span>
      <span class="hljs-comment">&lt;!-- åŒæ ·é€šè¿‡nameå€¼TreeMenuè‡ªè°ƒç”¨ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">TreeMenu</span> 
        <span class="hljs-attr">v-if</span>=<span class="hljs-string">"item.children &amp;&amp; item.children.length"</span> 
        <span class="hljs-attr">:menu-data</span>=<span class="hljs-string">"item.children"</span> 
      /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="xml">
// Vue3 <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript"> éœ€æ‰‹åŠ¨å®šä¹‰nameï¼ˆ<span class="hljs-title class_">Vue3</span><span class="hljs-number">.3</span>+æ”¯æŒï¼‰
<span class="hljs-title function_">defineOptions</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"TreeMenu"</span> <span class="hljs-comment">// æ ¸å¿ƒï¼šè‡ªå¼•ç”¨æ ‡è¯†</span>
});

<span class="hljs-comment">// æ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’çš„å±‚çº§æ•°æ®</span>
<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>({
  <span class="hljs-attr">menuData</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Array</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> []
  }
});
</span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</span></code></pre>
<h4 data-id="heading-8">3. ä½¿ç”¨é€’å½’ç»„ä»¶</h4>
<p>ä½¿ç”¨æ–¹å¼å’Œæ™®é€šç»„ä»¶å®Œå…¨ä¸€è‡´ï¼Œåªéœ€ä¼ é€’æœ€å¤–å±‚æ•°æ®å³å¯ï¼Œç»„ä»¶ä¼šè‡ªåŠ¨é€’å½’æ¸²æŸ“æ‰€æœ‰å±‚çº§ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"app"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æ ‘å½¢èœå•ï¼ˆé€’å½’ç»„ä»¶å®ç°ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">TreeMenu</span> <span class="hljs-attr">:menu-data</span>=<span class="hljs-string">"treeData"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">TreeMenu</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./components/TreeMenu.vue"</span>;
<span class="hljs-comment">// å¯¼å…¥æ¨¡æ‹Ÿçš„æ ‘å½¢æ•°æ®</span>
<span class="hljs-keyword">const</span> treeData = [<span class="hljs-comment">/* ä¸Šæ–‡å®šä¹‰çš„æ ‘å½¢æ•°æ® */</span>];
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-9">å››ã€å…³é”®ç»†èŠ‚ï¼šå¿…çœ‹çš„3ä¸ªä¼˜åŒ–ç‚¹ï¼ˆé¿å…è¸©å‘ï¼‰</h3>
<h4 data-id="heading-10">1. å¿…é¡»åŠ ã€Œé€’å½’ç»ˆæ­¢æ¡ä»¶ã€ï¼ˆé‡ä¸­ä¹‹é‡ï¼‰</h4>
<p>å‘ç‚¹ï¼šå¦‚æœå¿˜è®°åŠ v-ifåˆ¤æ–­ï¼Œç»„ä»¶ä¼šæ— é™è°ƒç”¨è‡ªèº«ï¼Œå¯¼è‡´æ ˆæº¢å‡ºã€é¡µé¢å´©æºƒï¼Œæ§åˆ¶å°ä¼šæŠ¥â€œMaximum call stack size exceededâ€é”™è¯¯ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼šå›ºå®šå†™æ³•â€”â€”v-if="item.children &amp;&amp; item.children.length"ï¼Œåªæœ‰å­˜åœ¨å­èŠ‚ç‚¹æ—¶æ‰é€’å½’ï¼Œæ— å­å¥³èŠ‚ç‚¹åˆ™ç»ˆæ­¢ã€‚</p>
<h4 data-id="heading-11">2. æ•°æ®ä¼ é€’è¦â€œç²¾å‡†â€ï¼ˆåªä¼ å½“å‰å±‚çº§æ•°æ®ï¼‰</h4>
<p>é€’å½’æ—¶ï¼Œçˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’çš„å¿…é¡»æ˜¯ã€Œå½“å‰èŠ‚ç‚¹çš„childrenã€ï¼ˆ:menu-data="item.children"ï¼‰ï¼Œè€Œä¸æ˜¯æ•´ä¸ªæ ‘å½¢æ•°æ®ï¼Œå¦åˆ™ä¼šé‡å¤æ¸²æŸ“æ‰€æœ‰å±‚çº§ï¼Œå¯¼è‡´æ•°æ®é”™ä¹±ã€‚</p>
<h4 data-id="heading-12">3. æ ·å¼éš”ç¦»ï¼ˆé¿å…å±‚çº§æ ·å¼æ··ä¹±ï¼‰</h4>
<p>é€’å½’ç»„ä»¶ä¼šæ¸²æŸ“å¤šä¸ªå±‚çº§ï¼Œæ ·å¼å®¹æ˜“ç»§æ‰¿æ··ä¹±ï¼ˆæ¯”å¦‚æ‰€æœ‰liæ ‡ç­¾æ ·å¼ä¸€è‡´ï¼Œæ— æ³•åŒºåˆ†å±‚çº§ï¼‰ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼šé€šè¿‡åµŒå¥—æ ·å¼ç»™ä¸åŒå±‚çº§æ·»åŠ åŒºåˆ†ï¼ˆæ¯”å¦‚å­å±‚çº§ç¼©è¿›ï¼‰ï¼Œç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">&lt;style scoped&gt;
.<span class="hljs-property">tree</span>-menu {
  margin-<span class="hljs-attr">left</span>: 20px; <span class="hljs-comment">/* å­å±‚çº§ç¼©è¿›ï¼ŒåŒºåˆ†å±‚çº§ */</span>
}
.<span class="hljs-property">tree</span>-item {
  <span class="hljs-attr">margin</span>: 5px <span class="hljs-number">0</span>;
  list-<span class="hljs-attr">style</span>: none;
}
.<span class="hljs-property">tree</span>-item span {
  <span class="hljs-attr">cursor</span>: pointer;
}
.<span class="hljs-property">tree</span>-item <span class="hljs-attr">span</span>:hover {
  <span class="hljs-attr">color</span>: #42b983;
}
&lt;/style&gt;
</code></pre>
<h3 data-id="heading-13">äº”ã€æ‰©å±•åœºæ™¯ï¼šé€’å½’ç»„ä»¶çš„å¸¸è§ç”¨æ³•å»¶ä¼¸</h3>
<p>é™¤äº†æ ‘å½¢èœå•ï¼Œname+templateé€’å½’è¿˜èƒ½é€‚é…ä»¥ä¸‹é«˜é¢‘åœºæ™¯ï¼Œæ ¸å¿ƒé€»è¾‘å®Œå…¨ä¸€è‡´ï¼Œåªéœ€ä¿®æ”¹æ¸²æŸ“å†…å®¹å³å¯ï¼š</p>
<h4 data-id="heading-14">1. åµŒå¥—è¯„è®ºï¼ˆå¤šå±‚è¯„è®ºå›å¤ï¼‰</h4>
<p>æ•°æ®ç»“æ„ä¸­ï¼Œæ¯æ¡è¯„è®ºåŒ…å«idã€contentã€replyï¼ˆå­è¯„è®ºæ•°ç»„ï¼‰ï¼Œé€’å½’æ¸²æŸ“replyæ•°ç»„ï¼Œç»ˆæ­¢æ¡ä»¶ï¼šreplyä¸ºç©ºæ—¶åœæ­¢ã€‚</p>
<h4 data-id="heading-15">2. æ–‡ä»¶å¤¹å¯¼èˆªï¼ˆå¤šå±‚æ–‡ä»¶å¤¹åµŒå¥—ï¼‰</h4>
<p>æ•°æ®ç»“æ„åŒ…å«folderNameã€isFolderã€childrenï¼ˆå­æ–‡ä»¶å¤¹ï¼‰ï¼Œé€’å½’æ¸²æŸ“childrenï¼Œå¯æ·»åŠ å±•å¼€/æŠ˜å é€»è¾‘ï¼ˆv-showæ§åˆ¶å­å±‚çº§æ˜¾ç¤ºéšè—ï¼‰ã€‚</p>
<h4 data-id="heading-16">3. åˆ†ç±»åˆ—è¡¨ï¼ˆå¤šçº§å•†å“åˆ†ç±»ï¼‰</h4>
<p>å’Œæ ‘å½¢èœå•é€»è¾‘ä¸€è‡´ï¼Œå¯æ·»åŠ é€‰ä¸­çŠ¶æ€ã€è·³è½¬é“¾æ¥ï¼Œé€‚é…ç”µå•†å¹³å°çš„å¤šçº§åˆ†ç±»å¯¼èˆªã€‚</p>
<h3 data-id="heading-17">å…­ã€æ€»ç»“ï¼šname + templateé€’å½’æ ¸å¿ƒè¦ç‚¹ï¼ˆæ–°æ‰‹å¿…èƒŒï¼‰</h3>
<ol>
<li>æ ¸å¿ƒå†™æ³•ï¼šç»„ä»¶å®šä¹‰nameå±æ€§ â†’ templateä¸­é€šè¿‡nameè‡ªè°ƒç”¨ â†’ åŠ ç»ˆæ­¢æ¡ä»¶ï¼ˆchildrenä¸ºç©ºåœæ­¢ï¼‰ï¼›</li>
<li>Vue3 
</li><li>å…³é”®é¿å‘ï¼šå¿…é¡»åŠ ç»ˆæ­¢æ¡ä»¶ã€ç²¾å‡†ä¼ é€’å½“å‰å±‚çº§æ•°æ®ã€åšå¥½æ ·å¼éš”ç¦»ï¼›</li>
<li>é€‚ç”¨åœºæ™¯ï¼šæ‰€æœ‰å±‚çº§ä¸å›ºå®šçš„ç»“æ„æ¸²æŸ“ï¼ˆæ ‘å½¢ã€åµŒå¥—è¯„è®ºã€å¤šçº§åˆ†ç±»ç­‰ï¼‰ã€‚</li>
</ol>
<p>å…¶å®Vueé€’å½’ç»„ä»¶ä¸€ç‚¹éƒ½ä¸å¤æ‚ï¼Œname+templateå†™æ³•æ›´æ˜¯å…¥é—¨çº§éš¾åº¦ï¼Œè®°ä½â€œè‡ªå¼•ç”¨+ç»ˆæ­¢æ¡ä»¶â€ä¸¤ä¸ªæ ¸å¿ƒï¼Œå°±èƒ½è½»æ¾åº”å¯¹æ‰€æœ‰å±‚çº§æ¸²æŸ“éœ€æ±‚ã€‚ç»ƒä¼šè¿™ä¸ªæ¡ˆä¾‹ï¼Œä¸ç®¡æ˜¯å®é™…å¼€å‘è¿˜æ˜¯é¢è¯•ï¼Œéƒ½èƒ½è½»æ¾æ‹¿æï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥å‰–æRocketMQçš„æ¶ˆè´¹é€»è¾‘]]></title>    <link>https://juejin.cn/post/7602497125268897798</link>    <guid>https://juejin.cn/post/7602497125268897798</guid>    <pubDate>2026-02-04T02:57:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602497125268897798" data-draft-id="7602529888483311679" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥å‰–æRocketMQçš„æ¶ˆè´¹é€»è¾‘"/> <meta itemprop="keywords" content="åç«¯,RocketMQ"/> <meta itemprop="datePublished" content="2026-02-04T02:57:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥å‰–æRocketMQçš„æ¶ˆè´¹é€»è¾‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T02:57:19.000Z" title="Wed Feb 04 2026 02:57:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å¾ˆå¤šäººåœ¨ä½¿ç”¨RocketMQæ—¶ï¼ŒåªçŸ¥é“å†™ä¸ªListenerå°±èƒ½æ¶ˆè´¹æ¶ˆæ¯ï¼Œä½†å¯¹åº•å±‚çš„æ¶ˆè´¹æœºåˆ¶ä¸€çŸ¥åŠè§£ã€‚æœ¬æ–‡å°†ç”¨å¤§ç™½è¯æ·±å…¥å‰–æRocketMQçš„æ¶ˆè´¹é€»è¾‘ï¼Œå¸®åŠ©ä½ çœŸæ­£ç†è§£ï¼šæ¶ˆæ¯æ˜¯æ€ä¹ˆåˆ°è¾¾ä½ çš„ä»£ç çš„ï¼Ÿæ¨æ¨¡å¼è¿˜æ˜¯æ‹‰æ¨¡å¼ï¼Ÿçº¿ç¨‹æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ</p>
<p>æœ¬æ–‡ä»¥Spring Boot Starteræ–¹å¼ä¸ºä¾‹è¿›è¡Œè®²è§£ï¼Œè¿™ä¹Ÿæ˜¯ç›®å‰æœ€å¸¸ç”¨çš„æ–¹å¼ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€æ•´ä½“æ¶ˆè´¹æµç¨‹æ¦‚è§ˆ</h2>
<p>å…ˆä»å®è§‚å±‚é¢çœ‹çœ‹RocketMQçš„æ¶ˆè´¹æµç¨‹ã€‚æ•´ä¸ªè¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªæ ¸å¿ƒç¯èŠ‚ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[Brokerå­˜å‚¨æ¶ˆæ¯] --&gt;|é•¿è½®è¯¢æ‹‰å–| B[Consumeræ‹‰å–çº¿ç¨‹]
    B --&gt;|æ”¾å…¥æœ¬åœ°ç¼“å­˜| C[ProcessQueue]
    C --&gt;|åˆ†å‘æ¶ˆæ¯| D[æ¶ˆè´¹çº¿ç¨‹æ± ]
    D --&gt;|å›è°ƒ| E[ä½ çš„ä¸šåŠ¡ä»£ç ]
    E --&gt;|è¿”å›ç»“æœ| F[ACK/NACK]
    
    style A fill:#e1f5ff,stroke:#01579b,stroke-width:2px
    style B fill:#fff3e0,stroke:#e65100,stroke-width:2px
    style C fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    style D fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px
    style E fill:#fff9c4,stroke:#f57f17,stroke-width:2px
    style F fill:#fce4ec,stroke:#880e4f,stroke-width:2px
</code></pre>
<p>è¿™ä¸ªæµç¨‹çœ‹èµ·æ¥ç®€å•ï¼Œä½†æ¯ä¸€æ­¥éƒ½æœ‰å¾ˆå¤šç»†èŠ‚å€¼å¾—æ·±ç©¶ã€‚</p>
<h2 data-id="heading-2">äºŒã€æ¨æ¨¡å¼ vs æ‹‰æ¨¡å¼ï¼šä¸€ä¸ªç¾ä¸½çš„è¯¯è§£</h2>
<h3 data-id="heading-3">2.1 è¡¨é¢ç°è±¡ï¼šçœ‹èµ·æ¥æ˜¯æ¨æ¨¡å¼</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RocketMQMessageListener(topic = "order-topic", consumerGroup = "order-group")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RocketMQListener</span>&lt;Order&gt; {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-comment">// æ¶ˆæ¯è‡ªåŠ¨"æ¨é€"åˆ°è¿™é‡Œ</span>
        System.out.println(<span class="hljs-string">"æ”¶åˆ°è®¢å•: "</span> + order);
    }
}
</code></pre>
<p>çœ‹èµ·æ¥æ¶ˆæ¯æ˜¯è¢«"æ¨é€"è¿‡æ¥çš„å¯¹å§ï¼Ÿä½ ä»€ä¹ˆéƒ½ä¸ç”¨åšï¼Œæ¶ˆæ¯å°±è‡ªåŠ¨åˆ°è¾¾äº†ä½ çš„æ–¹æ³•ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆRocketMQçš„Consumerå«åš <code>PushConsumer</code>ã€‚</p>
<h3 data-id="heading-4">2.2 åº•å±‚çœŸç›¸ï¼šæœ¬è´¨æ˜¯æ‹‰æ¨¡å¼</h3>
<p>ä½†å®é™…ä¸Šï¼ŒRocketMQçš„åº•å±‚å®ç°æ˜¯<strong>æ‹‰æ¨¡å¼</strong>ã€‚Consumerå¹¶ä¸æ˜¯è¢«åŠ¨ç­‰å¾…ï¼Œè€Œæ˜¯ä¸»åŠ¨å»Brokeræ‹‰å–æ¶ˆæ¯ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant C as Consumer
    participant B as Broker
    
    rect rgb(230, 245, 255)
    Note over C,B: æ‹‰æ¨¡å¼çš„çœŸå®æµç¨‹
    C-&gt;&gt;B: å‘èµ·æ‹‰å–è¯·æ±‚
    B--&gt;&gt;C: æ²¡æœ‰æ–°æ¶ˆæ¯ï¼Œç­‰å¾…...
    Note over B: BrokeræŒ‚èµ·è¯·æ±‚æœ€å¤š30ç§’
    B-&gt;&gt;B: æœ‰æ–°æ¶ˆæ¯åˆ°è¾¾
    B--&gt;&gt;C: ç«‹å³è¿”å›æ¶ˆæ¯
    C-&gt;&gt;C: å¤„ç†æ¶ˆæ¯
    C-&gt;&gt;B: ç«‹å³å‘èµ·ä¸‹ä¸€æ¬¡æ‹‰å–
    end
</code></pre>
<h3 data-id="heading-5">2.3 ä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾è®¡ï¼Ÿ</h3>
<p>RocketMQæŠŠæ‹‰å–é€»è¾‘å°è£…åœ¨SDKé‡Œï¼Œå¯¹å¤–æš´éœ²æˆæ¨æ¨¡å¼çš„æ¥å£ï¼Œç›®çš„æ˜¯ï¼š</p>
<ol>
<li><strong>ç®€åŒ–å¼€å‘</strong>ï¼šå¼€å‘è€…åªéœ€å†™Listenerï¼Œæ— éœ€å…³å¿ƒæ‹‰å–é€»è¾‘</li>
<li><strong>æµé‡æ§åˆ¶</strong>ï¼šConsumerå¯ä»¥æ§åˆ¶æ‹‰å–é€Ÿåº¦ï¼Œé¿å…è¢«å‹å®</li>
<li><strong>å®æ—¶æ€§å¥½</strong>ï¼šé•¿è½®è¯¢æœºåˆ¶ä¿è¯æ¶ˆæ¯åŠæ—¶é€è¾¾</li>
</ol>
<p><strong>å…³é”®ç†è§£ï¼š</strong></p>
<ul>
<li><strong>æ¨æ¨¡å¼ï¼ˆè¡¨è±¡ï¼‰</strong>ï¼šå¼€å‘è€…æ— éœ€å…³å¿ƒæ‹‰å–ï¼Œä¸“æ³¨ä¸šåŠ¡é€»è¾‘</li>
<li><strong>æ‹‰æ¨¡å¼ï¼ˆæœ¬è´¨ï¼‰</strong>ï¼šConsumerä¸»åŠ¨æ§åˆ¶æ‹‰å–é€Ÿåº¦</li>
<li><strong>é•¿è½®è¯¢ï¼ˆå®ç°ï¼‰</strong>ï¼šå…¼é¡¾å®æ—¶æ€§å’Œæ€§èƒ½</li>
</ul>
<h2 data-id="heading-6">ä¸‰ã€é•¿è½®è¯¢ï¼šæ¨æ‹‰æ¨¡å¼çš„å®Œç¾ç»“åˆ</h2>
<h3 data-id="heading-7">3.1 ä»€ä¹ˆæ˜¯é•¿è½®è¯¢</h3>
<p>é•¿è½®è¯¢ï¼ˆLong Pollingï¼‰æ˜¯RocketMQå®ç°"ç±»æ¨æ¨¡å¼"çš„æ ¸å¿ƒæŠ€æœ¯ã€‚å®ƒè§£å†³äº†ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>å¦‚ä½•åšåˆ°å®æ—¶æ€§é«˜ï¼ˆåƒæ¨æ¨¡å¼ï¼‰</li>
<li>å¦‚ä½•é¿å…é¢‘ç¹ç©ºè½®è¯¢æµªè´¹èµ„æºï¼ˆåƒæ‹‰æ¨¡å¼ï¼‰</li>
</ul>
<h3 data-id="heading-8">3.2 é•¿è½®è¯¢çš„å·¥ä½œæµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant C as Consumer
    participant B as Broker
    participant S as Storage
    
    rect rgb(255, 243, 224)
    Note over C,B: åœºæ™¯1: æœ‰æ¶ˆæ¯
    C-&gt;&gt;B: æ‹‰å–è¯·æ±‚(timeout=30s)
    B-&gt;&gt;S: æŸ¥è¯¢æ–°æ¶ˆæ¯
    S--&gt;&gt;B: æœ‰3æ¡æ¶ˆæ¯
    B--&gt;&gt;C: ç«‹å³è¿”å›(è€—æ—¶&lt;5ms)
    end
    
    rect rgb(232, 245, 233)
    Note over C,B: åœºæ™¯2: æš‚æ— æ¶ˆæ¯
    C-&gt;&gt;B: æ‹‰å–è¯·æ±‚(timeout=30s)
    B-&gt;&gt;S: æŸ¥è¯¢æ–°æ¶ˆæ¯
    S--&gt;&gt;B: æš‚æ— æ¶ˆæ¯
    Note over B: æŒ‚èµ·è¯·æ±‚ï¼Œç­‰å¾…æœ€å¤š30ç§’
    S-&gt;&gt;B: æ–°æ¶ˆæ¯åˆ°è¾¾
    B--&gt;&gt;C: ç«‹å³è¿”å›æ¶ˆæ¯
    end
</code></pre>
<h3 data-id="heading-9">3.3 é•¿è½®è¯¢çš„ä¼˜åŠ¿</h3>





























<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>çŸ­è½®è¯¢</th><th>é•¿è½®è¯¢</th><th>çœŸæ¨é€</th></tr></thead><tbody><tr><td><strong>å®æ—¶æ€§</strong></td><td>å·®</td><td>å¥½</td><td>æœ€å¥½</td></tr><tr><td><strong>æœåŠ¡å™¨å‹åŠ›</strong></td><td>å¤§</td><td>å°</td><td>å°</td></tr><tr><td><strong>Consumeræ§åˆ¶åŠ›</strong></td><td>é«˜</td><td>é«˜</td><td>ä½</td></tr></tbody></table>
<p><strong>RocketMQé€‰æ‹©é•¿è½®è¯¢çš„åŸå› ï¼š</strong></p>
<ol>
<li>å…¼é¡¾å®æ—¶æ€§ï¼šæ–°æ¶ˆæ¯åˆ°è¾¾æ—¶ç«‹å³è¿”å›</li>
<li>é™ä½å‹åŠ›ï¼šé¿å…é¢‘ç¹çš„ç©ºè½®è¯¢</li>
<li>Consumerå¯æ§ï¼šæ§åˆ¶æ‹‰å–é€Ÿåº¦ï¼Œä¸ä¼šè¢«å‹å®</li>
<li>å®ç°ç®€å•ï¼šæ¯”ç»´æŠ¤é•¿è¿æ¥ç®€å•</li>
</ol>
<h3 data-id="heading-10">3.4 é…ç½®å‚æ•°</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">rocketmq:</span>
  <span class="hljs-attr">consumer:</span>
    <span class="hljs-attr">pull-timeout:</span> <span class="hljs-number">30000</span>        <span class="hljs-comment"># é•¿è½®è¯¢è¶…æ—¶30ç§’(æ¨èé»˜è®¤å€¼)</span>
    <span class="hljs-attr">pull-interval:</span> <span class="hljs-number">0</span>           <span class="hljs-comment"># æ‹‰å–é—´éš”0æ¯«ç§’(ç«‹å³æ‹‰å–)</span>
    <span class="hljs-attr">pull-batch-size:</span> <span class="hljs-number">32</span>        <span class="hljs-comment"># æ¯æ¬¡æ‹‰å–32æ¡æ¶ˆæ¯</span>
</code></pre>
<h2 data-id="heading-11">å››ã€é˜Ÿåˆ—åˆ†é…æœºåˆ¶ï¼šConsumerå¦‚ä½•ç“œåˆ†é˜Ÿåˆ—</h2>
<h3 data-id="heading-12">4.1 é˜Ÿåˆ—åˆ†é…åŸç†</h3>
<p>å‡è®¾ä¸€ä¸ªTopicæœ‰8ä¸ªé˜Ÿåˆ—ï¼Œ2ä¸ªConsumerï¼Œå®ƒä»¬æ˜¯æ€ä¹ˆåˆ†é…çš„ï¼Ÿ</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph Topic: order-topic
    Q1[Queue-0]
    Q2[Queue-1]
    Q3[Queue-2]
    Q4[Queue-3]
    Q5[Queue-4]
    Q6[Queue-5]
    Q7[Queue-6]
    Q8[Queue-7]
    end
    
    subgraph Consumer Group
    C1[Consumer-1&lt;br/&gt;Pod-1]
    C2[Consumer-2&lt;br/&gt;Pod-2]
    end
    
    Q1 &amp; Q2 &amp; Q3 &amp; Q4 --&gt; C1
    Q5 &amp; Q6 &amp; Q7 &amp; Q8 --&gt; C2
    
    style Q1 fill:#e1f5ff,stroke:#01579b
    style Q2 fill:#e1f5ff,stroke:#01579b
    style Q3 fill:#e1f5ff,stroke:#01579b
    style Q4 fill:#e1f5ff,stroke:#01579b
    style Q5 fill:#fff3e0,stroke:#e65100
    style Q6 fill:#fff3e0,stroke:#e65100
    style Q7 fill:#fff3e0,stroke:#e65100
    style Q8 fill:#fff3e0,stroke:#e65100
    style C1 fill:#e1f5ff,stroke:#01579b,stroke-width:3px
    style C2 fill:#fff3e0,stroke:#e65100,stroke-width:3px
</code></pre>
<p><strong>åˆ†é…ç­–ç•¥ï¼šå¹³å‡åˆ†é…ï¼ˆé»˜è®¤ï¼‰</strong></p>
<p>RocketMQä½¿ç”¨ <code>AllocateMessageQueueAveragely</code> ç­–ç•¥ï¼š</p>
<ul>
<li>8ä¸ªé˜Ÿåˆ— Ã· 2ä¸ªConsumer = æ¯ä¸ªConsumeråˆ†é…4ä¸ªé˜Ÿåˆ—</li>
<li>Consumer-1 åˆ†é… Queue 0-3</li>
<li>Consumer-2 åˆ†é… Queue 4-7</li>
</ul>
<h3 data-id="heading-13">4.2 å¸¸è§çš„é˜Ÿåˆ—åˆ†é…åœºæ™¯</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    subgraph S1["åœºæ™¯1: é˜Ÿåˆ—æ•° = Consumeræ•°"]
    A1["8 Queues"] --&gt;|å®Œç¾å‡åˆ†| B1["8 Consumersæ¯äºº1ä¸ª"]
    end
    
    subgraph S2["åœºæ™¯2: é˜Ÿåˆ—æ•° &gt; Consumeræ•°"]
    A2["8 Queues"] --&gt;|å‡åˆ†| B2["2 Consumersæ¯äºº4ä¸ª"]
    end
    
    subgraph S3["åœºæ™¯3: é˜Ÿåˆ—æ•° &lt; Consumeræ•°"]
    A3["4 Queues"] --&gt;|æœ‰äººç©ºé—²| B3["8 Consumers 4äººå·¥ä½œ 4äººç©ºé—²"]
    end
    
    style A1 fill:#e8f5e9,stroke:#2e7d32
    style B1 fill:#e8f5e9,stroke:#2e7d32
    style A2 fill:#fff3e0,stroke:#e65100
    style B2 fill:#fff3e0,stroke:#e65100
    style A3 fill:#ffebee,stroke:#c62828
    style B3 fill:#ffebee,stroke:#c62828
</code></pre>
<p><strong>é‡è¦ç»“è®ºï¼š</strong></p>
<ul>
<li>é˜Ÿåˆ—æ˜¯æ¶ˆè´¹å¹¶å‘çš„åŸºæœ¬å•ä½</li>
<li>Consumeræ•°é‡ &gt; é˜Ÿåˆ—æ•°é‡æ—¶ï¼Œå¤šä½™çš„Consumerä¼šç©ºé—²</li>
<li>æƒ³æé«˜æ¶ˆè´¹å¹¶å‘ï¼Œåº”è¯¥å¢åŠ é˜Ÿåˆ—æ•°ï¼Œè€Œä¸æ˜¯ç›²ç›®å¢åŠ Consumer</li>
</ul>
<h3 data-id="heading-14">4.3 Rebalanceï¼šåŠ¨æ€é‡åˆ†é…</h3>
<p>å½“Consumeræ•°é‡å˜åŒ–æ—¶ï¼ˆæ–°å¢ã€ä¸‹çº¿ã€å´©æºƒï¼‰ï¼Œä¼šè§¦å‘Rebalanceé‡æ–°åˆ†é…é˜Ÿåˆ—ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant C1 as Consumer-1
    participant C2 as Consumer-2
    participant C3 as Consumer-3(æ–°åŠ å…¥)
    participant B as Broker
    
    rect rgb(232, 245, 233)
    Note over C1,C2: åˆå§‹çŠ¶æ€ï¼š2ä¸ªConsumer
    Note over C1: æŒæœ‰ Q0,Q1,Q2,Q3
    Note over C2: æŒæœ‰ Q4,Q5,Q6,Q7
    end
    
    rect rgb(255, 243, 224)
    Note over C1,C3: Consumer-3 åŠ å…¥
    C3-&gt;&gt;B: æˆ‘åŠ å…¥äº† ConsumerGroup
    B-&gt;&gt;C1: è§¦å‘ Rebalance
    B-&gt;&gt;C2: è§¦å‘ Rebalance
    B-&gt;&gt;C3: è§¦å‘ Rebalance
    end
    
    rect rgb(227, 242, 253)
    Note over C1,C3: é‡æ–°åˆ†é…å®Œæˆ
    Note over C1: æŒæœ‰ Q0,Q1,Q2
    Note over C2: æŒæœ‰ Q3,Q4,Q5
    Note over C3: æŒæœ‰ Q6,Q7
    end
</code></pre>
<p><strong>Rebalanceçš„å½±å“ï¼š</strong></p>
<ul>
<li>ä¼šçŸ­æš‚æš‚åœæ¶ˆè´¹ï¼ˆé€šå¸¸å‡ ç§’ï¼‰</li>
<li>å¯èƒ½å¯¼è‡´æ¶ˆæ¯é‡å¤æ¶ˆè´¹ï¼ˆéœ€è¦ä¸šåŠ¡ä¿è¯å¹‚ç­‰ï¼‰</li>
<li>é¢‘ç¹Rebalanceä¼šå½±å“æ€§èƒ½</li>
</ul>
<h2 data-id="heading-15">äº”ã€çº¿ç¨‹æ¨¡å‹ï¼šæ‹‰å–çº¿ç¨‹ vs æ¶ˆè´¹çº¿ç¨‹</h2>
<p>è¿™æ˜¯ç†è§£RocketMQæ¶ˆè´¹æœºåˆ¶æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ã€‚å¾ˆå¤šäººä»¥ä¸ºConsumeråªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œå…¶å®å†…éƒ¨æœ‰ä¸¤å¥—å®Œå…¨ç‹¬ç«‹çš„çº¿ç¨‹æœºåˆ¶ã€‚</p>
<h3 data-id="heading-16">5.1 åŒçº¿ç¨‹æ¨¡å‹æ€»è§ˆ</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph Consumer["Consumerè¿›ç¨‹"]
        subgraph Pull["æ‹‰å–å±‚"]
        PT["PullMessageService&lt;br/&gt;æ‹‰å–çº¿ç¨‹(å•çº¿ç¨‹)"]
        end
        
        subgraph Cache["ç¼“å­˜å±‚"]
        PQ1["ProcessQueue-1"]
        PQ2["ProcessQueue-2"]
        PQ3["ProcessQueue-3"]
        PQ4["ProcessQueue-4"]
        end
        
        subgraph Consume["æ¶ˆè´¹å±‚"]
        TP["æ¶ˆè´¹çº¿ç¨‹æ± &lt;br/&gt;(é»˜è®¤20-64çº¿ç¨‹)"]
        end
    end
    
    Broker --&gt;|é•¿è½®è¯¢æ‹‰å–| PT
    PT --&gt;|åˆ†å‘åˆ°å¯¹åº”é˜Ÿåˆ—| PQ1 &amp; PQ2 &amp; PQ3 &amp; PQ4
    PQ1 &amp; PQ2 &amp; PQ3 &amp; PQ4 --&gt;|æäº¤æ¶ˆè´¹ä»»åŠ¡| TP
    TP --&gt;|å›è°ƒ| Listener["ä½ çš„ onMessage æ–¹æ³•"]
    
    style PT fill:#fff3e0,stroke:#e65100,stroke-width:2px
    style PQ1 fill:#f3e5f5,stroke:#4a148c
    style PQ2 fill:#f3e5f5,stroke:#4a148c
    style PQ3 fill:#f3e5f5,stroke:#4a148c
    style PQ4 fill:#f3e5f5,stroke:#4a148c
    style TP fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px
    style Listener fill:#fff9c4,stroke:#f57f17,stroke-width:2px
</code></pre>
<h3 data-id="heading-17">5.2 æ‹‰å–çº¿ç¨‹ï¼šå•çº¿ç¨‹è½®è¯¢</h3>
<p>æ‹‰å–çº¿ç¨‹æ˜¯ä¸€ä¸ªå•çº¿ç¨‹ï¼ŒèŒè´£å¾ˆç®€å•ï¼šä¸åœåœ°è½®è¯¢æ‰€æœ‰åˆ†é…çš„é˜Ÿåˆ—ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
    Start(["å¯åŠ¨"]) --&gt; Loop{"è¿è¡Œä¸­?"}
    Loop --&gt;|æ˜¯| Q1["æ‹‰å– Queue-0"]
    Q1 --&gt; Q2["æ‹‰å– Queue-1"]
    Q2 --&gt; Q3["æ‹‰å– Queue-2"]
    Q3 --&gt; Q4["æ‹‰å– Queue-3"]
    Q4 --&gt; Loop
    Loop --&gt;|å¦| End(["ç»“æŸ"])
    
    style Start fill:#e8f5e9,stroke:#2e7d32
    style Loop fill:#fff3e0,stroke:#e65100
    style Q1 fill:#e1f5ff,stroke:#01579b
    style Q2 fill:#e1f5ff,stroke:#01579b
    style Q3 fill:#e1f5ff,stroke:#01579b
    style Q4 fill:#e1f5ff,stroke:#01579b
    style End fill:#ffebee,stroke:#c62828
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li>åªæœ‰1ä¸ªä¸“é—¨çš„æ‹‰å–çº¿ç¨‹</li>
<li>è½®è¯¢æ‰€æœ‰é˜Ÿåˆ—ï¼ˆQueue-0, 1, 2, 3...ï¼‰</li>
<li>ä½¿ç”¨é•¿è½®è¯¢ï¼Œä¸ä¼šé¢‘ç¹å ç”¨CPU</li>
<li>æ‹‰å–åˆ°çš„æ¶ˆæ¯æ”¾å…¥ProcessQueue</li>
</ul>
<h3 data-id="heading-18">5.3 ProcessQueueï¼šæœ¬åœ°æ¶ˆæ¯ç¼“å­˜</h3>
<p>ProcessQueueæ˜¯è¿æ¥æ‹‰å–å’Œæ¶ˆè´¹çš„æ¡¥æ¢ï¼Œæ¯ä¸ªé˜Ÿåˆ—éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ProcessQueueã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A["æ‹‰å–çº¿ç¨‹"] --&gt;|æ”¾å…¥æ¶ˆæ¯| B["ProcessQueue&lt;br/&gt;æœ¬åœ°ç¼“å­˜&lt;br/&gt;æœ€å¤š1000æ¡"]
    B --&gt;|å–å‡ºæ¶ˆæ¯| C["æ¶ˆè´¹çº¿ç¨‹æ± "]
    B --&gt;|è¶…è¿‡1000æ¡| D["æš‚åœæ‹‰å–&lt;br/&gt;é˜²æ­¢å†…å­˜æº¢å‡º"]
    
    style A fill:#fff3e0,stroke:#e65100
    style B fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    style C fill:#e8f5e9,stroke:#1b5e20
    style D fill:#ffebee,stroke:#c62828
</code></pre>
<p><strong>ProcessQueueçš„ä½œç”¨ï¼š</strong></p>
<ol>
<li>è§£è€¦æ‹‰å–å’Œæ¶ˆè´¹ï¼šæ‹‰å–çº¿ç¨‹å’Œæ¶ˆè´¹çº¿ç¨‹äº’ä¸é˜»å¡</li>
<li>æµé‡æ§åˆ¶ï¼šç¼“å­˜æ»¡äº†å°±æš‚åœæ‹‰å–</li>
<li>æ‰¹é‡å¤„ç†ï¼šæ¶ˆè´¹çº¿ç¨‹å¯ä»¥æ‰¹é‡å–æ¶ˆæ¯</li>
</ol>
<h3 data-id="heading-19">5.4 æ¶ˆè´¹çº¿ç¨‹æ± ï¼šå¤šçº¿ç¨‹å¹¶å‘æ¶ˆè´¹</h3>
<p>æ¶ˆè´¹çº¿ç¨‹æ± æ˜¯çœŸæ­£æ‰§è¡Œä¸šåŠ¡é€»è¾‘çš„åœ°æ–¹ï¼Œé»˜è®¤æœ‰20-64ä¸ªçº¿ç¨‹ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant PQ1 as ProcessQueue-1
    participant PQ2 as ProcessQueue-2
    participant Pool as æ¶ˆè´¹çº¿ç¨‹æ± 
    participant T1 as Thread-1
    participant T2 as Thread-2
    
    rect rgb(232, 245, 233)
    PQ1-&gt;&gt;Pool: æäº¤æ¶ˆè´¹ä»»åŠ¡(3æ¡æ¶ˆæ¯)
    Pool-&gt;&gt;T1: åˆ†é…ç»™Thread-1
    T1-&gt;&gt;T1: onMessage(msg1)&lt;br/&gt;onMessage(msg2)&lt;br/&gt;onMessage(msg3)
    end
    
    rect rgb(255, 243, 224)
    PQ2-&gt;&gt;Pool: æäº¤æ¶ˆè´¹ä»»åŠ¡(5æ¡æ¶ˆæ¯)
    Pool-&gt;&gt;T2: åˆ†é…ç»™Thread-2
    T2-&gt;&gt;T2: onMessage(msg4)&lt;br/&gt;onMessage(msg5)
    end
</code></pre>
<p><strong>æ¶ˆè´¹çº¿ç¨‹æ± çš„ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>å¤šä¸ªçº¿ç¨‹å¹¶å‘æ¶ˆè´¹ï¼ˆé»˜è®¤20-64ä¸ªï¼‰</li>
<li>ä¸ç»‘å®šç‰¹å®šé˜Ÿåˆ—ï¼šå“ªä¸ªçº¿ç¨‹ç©ºé—²å°±æ¶ˆè´¹å“ªä¸ªæ¶ˆæ¯</li>
<li>ä½ çš„<code>onMessage()</code>æ–¹æ³•æ˜¯è¢«è¿™äº›çº¿ç¨‹è°ƒç”¨çš„</li>
</ul>
<h3 data-id="heading-20">5.5 å®Œæ•´çš„æ¶ˆæ¯æµè½¬</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant B as Broker
    participant PT as æ‹‰å–çº¿ç¨‹
    participant PQ as ProcessQueue
    participant Pool as æ¶ˆè´¹çº¿ç¨‹æ± 
    participant Listener as Listener
    
    Note over B,PT: æ‹‰å–çº¿ç¨‹å·¥ä½œ
    PT-&gt;&gt;B: æ‹‰å– Queue-0
    B--&gt;&gt;PT: è¿”å› msg1, msg2
    PT-&gt;&gt;PQ: æ”¾å…¥ç¼“å­˜
    
    Note over PQ,Pool: æäº¤æ¶ˆè´¹ä»»åŠ¡
    PQ-&gt;&gt;Pool: æäº¤ä»»åŠ¡(msg1, msg2)
    
    Note over Pool,Listener: æ¶ˆè´¹çº¿ç¨‹å¤„ç†
    Pool-&gt;&gt;Listener: Thread-1: onMessage(msg1)
    Pool-&gt;&gt;Listener: Thread-2: onMessage(msg2)
    
    Listener--&gt;&gt;Pool: SUCCESS
    Pool-&gt;&gt;B: ACK
</code></pre>
<p><strong>å…³é”®ç†è§£ï¼š</strong></p>
<ol>
<li>æ‹‰å–çº¿ç¨‹åªè´Ÿè´£æ‹‰æ¶ˆæ¯</li>
<li>æ¶ˆè´¹çº¿ç¨‹åªè´Ÿè´£æ¶ˆè´¹</li>
<li>ProcessQueueæ˜¯ä¸­é—´ç¼“å†²åŒº</li>
<li>æ¶ˆè´¹çº¿ç¨‹ä¸ç»‘å®šé˜Ÿåˆ—ï¼Œçµæ´»è°ƒåº¦</li>
</ol>
<h2 data-id="heading-21">å…­ã€çº¿ç¨‹é…ç½®ï¼šä¸è¦è¿·ä¿¡çº¿ç¨‹æ•°</h2>
<p>å¾ˆå¤šäººé‡åˆ°æ¶ˆè´¹æ…¢çš„ç¬¬ä¸€ååº”æ˜¯ï¼šåŠ çº¿ç¨‹ï¼ä½†è¿™å¾€å¾€æ˜¯é”™è¯¯çš„ã€‚</p>
<h3 data-id="heading-22">6.1 Spring Boot Starterçš„çº¿ç¨‹é…ç½®</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RocketMQMessageListener(
    topic = "order-topic",
    consumerGroup = "order-group",
    consumeThreadMin = 20,      // æœ€å°æ¶ˆè´¹çº¿ç¨‹æ•°
    consumeThreadMax = 64,      // æœ€å¤§æ¶ˆè´¹çº¿ç¨‹æ•°
    consumeTimeout = 15         // å•æ¡æ¶ˆæ¯æ¶ˆè´¹è¶…æ—¶æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RocketMQListener</span>&lt;Order&gt; {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-comment">// ä½ çš„ä¸šåŠ¡é€»è¾‘</span>
    }
}
</code></pre>
<h3 data-id="heading-23">6.2 æ¶ˆè´¹æ€§èƒ½çš„çœŸæ­£ç“¶é¢ˆ</h3>
<p>å¾ˆå¤šäººé‡åˆ°æ¶ˆè´¹æ…¢çš„ç¬¬ä¸€ååº”æ˜¯ï¼šåŠ çº¿ç¨‹ï¼ä½†è¿™å¾€å¾€æ˜¯é”™è¯¯çš„ã€‚</p>
<p><strong>æ€§èƒ½ç“¶é¢ˆåˆ†æï¼š</strong></p>
<ol>
<li>
<p><strong>é˜Ÿåˆ—æ•°ä¸å¤Ÿ</strong>ï¼šè¿™æ˜¯æœ€å¸¸è§çš„é—®é¢˜</p>
<ul>
<li>4ä¸ªé˜Ÿåˆ— + 40ä¸ªçº¿ç¨‹ = å®é™…åªæœ‰4ä¸ªçº¿ç¨‹å·¥ä½œ</li>
<li>è§£å†³ï¼šå¢åŠ é˜Ÿåˆ—æ•°åˆ°16-32ä¸ª</li>
</ul>
</li>
<li>
<p><strong>çº¿ç¨‹æ•°ä¸å¤Ÿ</strong>ï¼šé˜Ÿåˆ—å¤Ÿä½†çº¿ç¨‹å…¨å¿™</p>
<ul>
<li>é˜Ÿåˆ—æ•° = 16ï¼Œçº¿ç¨‹æ•° = 5ï¼Œæœ‰11ä¸ªé˜Ÿåˆ—åœ¨ç­‰å¾…</li>
<li>è§£å†³ï¼šå¢åŠ çº¿ç¨‹æ•°åˆ°16-20ä¸ª</li>
</ul>
</li>
<li>
<p><strong>ä¸šåŠ¡å¤„ç†æ…¢</strong>ï¼šçº¿ç¨‹å¤Ÿä½†æ¯æ¡æ¶ˆæ¯å¤„ç†å¾ˆæ…¢</p>
<ul>
<li>ä¸šåŠ¡è€—æ—¶100msï¼Œå³ä½¿100ä¸ªçº¿ç¨‹ä¹Ÿæ…¢</li>
<li>è§£å†³ï¼šä¼˜åŒ–ä¸šåŠ¡é€»è¾‘ï¼ŒåŠ ç¼“å­˜/ç´¢å¼•/å¼‚æ­¥å¤„ç†</li>
</ul>
</li>
</ol>
<p><strong>ä¼˜åŒ–é¡ºåºï¼šé˜Ÿåˆ—æ•° â†’ ä¸šåŠ¡ä¼˜åŒ– â†’ çº¿ç¨‹æ•°</strong></p>
<h3 data-id="heading-24">6.3 é˜Ÿåˆ—æ•°æ‰æ˜¯æ¶ˆè´¹å¹¶å‘çš„ä¸Šé™</h3>
<p><strong>æ ¸å¿ƒåŸåˆ™ï¼šæ¶ˆè´¹å¹¶å‘åº¦ = min(é˜Ÿåˆ—æ•°, Consumeræ•° Ã— çº¿ç¨‹æ•°)</strong></p>
<p>çœ‹è¿™ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    Q["Topicæœ‰4ä¸ªé˜Ÿåˆ—"] --&gt; C1["Consumer-1æŒæœ‰2ä¸ªé˜Ÿåˆ—&lt;br/&gt;é…ç½®20çº¿ç¨‹"]
    Q --&gt; C2["Consumer-2æŒæœ‰2ä¸ªé˜Ÿåˆ—&lt;br/&gt;é…ç½®20çº¿ç¨‹"]
    C1 --&gt; R["å®é™…ç»“æœ:&lt;br/&gt;æœ€å¤š4ä¸ªçº¿ç¨‹åœ¨å·¥ä½œ&lt;br/&gt;å…¶ä½™36ä¸ªçº¿ç¨‹ç©ºé—²"]
    C2 --&gt; R
    
    style Q fill:#e1f5ff,stroke:#01579b,stroke-width:2px
    style C1 fill:#fff3e0,stroke:#e65100
    style C2 fill:#fff3e0,stroke:#e65100
    style R fill:#ffebee,stroke:#c62828,stroke-width:3px
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>4ä¸ªé˜Ÿåˆ—è¢«å¹³å‡åˆ†é…ï¼šæ¯ä¸ªConsumeræŒæœ‰2ä¸ªé˜Ÿåˆ—</li>
<li>æ¯ä¸ªé˜Ÿåˆ—åŒä¸€æ—¶åˆ»åªèƒ½è¢«1ä¸ªçº¿ç¨‹æ¶ˆè´¹</li>
<li>æ‰€ä»¥å®é™…å·¥ä½œçš„çº¿ç¨‹æœ€å¤šåªæœ‰4ä¸ª</li>
<li>å…¶ä½™çš„36ä¸ªçº¿ç¨‹éƒ½åœ¨ç©ºé—²ç­‰å¾…</li>
</ul>
<p><strong>æ­£ç¡®çš„åšæ³•ï¼š</strong></p>
<ol>
<li>å…ˆå¢åŠ é˜Ÿåˆ—æ•°åˆ°16-32ä¸ª</li>
<li>æ ¹æ®é˜Ÿåˆ—æ•°è°ƒæ•´Consumeræ•°é‡</li>
<li>æœ€åè°ƒæ•´çº¿ç¨‹æ•°ï¼ˆç•¥å¤§äºå¹³å‡é˜Ÿåˆ—æ•°ï¼‰</li>
</ol>
<h3 data-id="heading-25">6.4 çº¿ç¨‹é…ç½®çš„å®è·µå»ºè®®</h3>
<p><strong>è§„åˆ™1ï¼šé˜Ÿåˆ—æ•°ä¼˜å…ˆäºçº¿ç¨‹æ•°</strong></p>
<p>å…ˆç¡®ä¿é˜Ÿåˆ—æ•°è¶³å¤Ÿï¼ˆå»ºè®®16-32ä¸ªï¼‰ï¼Œå†è°ƒæ•´çº¿ç¨‹æ•°ã€‚</p>
<p><strong>è§„åˆ™2ï¼šçº¿ç¨‹æ•°ç•¥å¤§äºå¹³å‡é˜Ÿåˆ—æ•°</strong></p>
<pre><code class="hljs language-ini" lang="ini">å‡è®¾ï¼šé˜Ÿåˆ—æ•° = 16, Consumeræ•° = 2
å¹³å‡æ¯ä¸ªConsumeråˆ†é… = 16 / <span class="hljs-attr">2</span> = <span class="hljs-number">8</span>ä¸ªé˜Ÿåˆ—
å»ºè®®çº¿ç¨‹æ•° = 8 åˆ° 16ä¸ªçº¿ç¨‹
</code></pre>
<p><strong>è§„åˆ™3ï¼šæ ¹æ®ä¸šåŠ¡è€—æ—¶è°ƒæ•´</strong></p>
<ul>
<li>ä¸šåŠ¡å¾ˆå¿«ï¼ˆå‡ æ¯«ç§’ï¼‰ï¼šçº¿ç¨‹æ•° = é˜Ÿåˆ—æ•°</li>
<li>ä¸šåŠ¡è¾ƒæ…¢ï¼ˆå‡ åæ¯«ç§’ï¼‰ï¼šçº¿ç¨‹æ•° = é˜Ÿåˆ—æ•° Ã— 1.5</li>
<li>ä¸šåŠ¡å¾ˆæ…¢ï¼ˆæœ‰IOæ“ä½œï¼‰ï¼šçº¿ç¨‹æ•° = é˜Ÿåˆ—æ•° Ã— 2ï¼Œä½†æ›´åº”è¯¥ä¼˜åŒ–ä¸šåŠ¡é€»è¾‘</li>
</ul>
<p><strong>é…ç½®ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RocketMQMessageListener(
    topic = "order-topic",
    consumerGroup = "order-group",
    consumeThreadMin = 10,     // æœ€å°çº¿ç¨‹æ•°
    consumeThreadMax = 20      // æœ€å¤§çº¿ç¨‹æ•°
)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RocketMQListener</span>&lt;Order&gt; {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(Order order)</span> {
        <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span>
    }
}
</code></pre>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">rocketmq:</span>
  <span class="hljs-attr">consumer:</span>
    <span class="hljs-attr">pull-batch-size:</span> <span class="hljs-number">32</span>        <span class="hljs-comment"># æ¯æ¬¡æ‹‰å–æ¶ˆæ¯æ•°</span>
    <span class="hljs-attr">pull-timeout:</span> <span class="hljs-number">30000</span>        <span class="hljs-comment"># é•¿è½®è¯¢è¶…æ—¶30ç§’</span>
</code></pre>
<h2 data-id="heading-26">ä¸ƒã€æ€»ç»“</h2>
<h3 data-id="heading-27">æ ¸å¿ƒè¦ç‚¹</h3>
<ol>
<li>
<p><strong>æ¨æ‹‰æ¨¡å¼çš„æœ¬è´¨</strong></p>
<ul>
<li>è¡¨é¢æ˜¯æ¨æ¨¡å¼ï¼Œåº•å±‚æ˜¯æ‹‰æ¨¡å¼</li>
<li>é€šè¿‡é•¿è½®è¯¢å®ç°é«˜å®æ—¶æ€§å’Œä½èµ„æºæ¶ˆè€—</li>
</ul>
</li>
<li>
<p><strong>åŒçº¿ç¨‹æ¶æ„</strong></p>
<ul>
<li>æ‹‰å–çº¿ç¨‹ï¼šå•çº¿ç¨‹è½®è¯¢æ‰€æœ‰é˜Ÿåˆ—</li>
<li>æ¶ˆè´¹çº¿ç¨‹æ± ï¼šå¤šçº¿ç¨‹å¹¶å‘æ¶ˆè´¹</li>
<li>ProcessQueueï¼šè¿æ¥æ‹‰å–å’Œæ¶ˆè´¹çš„æ¡¥æ¢</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½å…³é”®å› ç´ </strong></p>
<ul>
<li>é˜Ÿåˆ—æ•°æ˜¯æ¶ˆè´¹å¹¶å‘çš„çœŸæ­£ä¸Šé™</li>
<li>æ¶ˆè´¹å¹¶å‘åº¦ = min(é˜Ÿåˆ—æ•°, Consumeræ•° Ã— çº¿ç¨‹æ•°)</li>
<li>ä¸è¦ç›²ç›®å¢åŠ çº¿ç¨‹æ•°ï¼Œä¼˜å…ˆå¢åŠ é˜Ÿåˆ—æ•°</li>
</ul>
</li>
<li>
<p><strong>é…ç½®å»ºè®®</strong></p>
<ul>
<li>é˜Ÿåˆ—æ•°ï¼š16-32ä¸ªï¼ˆæ ¹æ®ä¸šåŠ¡é‡è°ƒæ•´ï¼‰</li>
<li>çº¿ç¨‹æ•°ï¼šç•¥å¤§äºå¹³å‡é˜Ÿåˆ—æ•°ï¼ˆ1.5-2å€ï¼‰</li>
<li>é•¿è½®è¯¢ä¿æŒ30ç§’é»˜è®¤å€¼</li>
</ul>
</li>
</ol>
<h3 data-id="heading-28">æ•´ä½“æ¶æ„</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph Producer[ç”Ÿäº§ç«¯]
    P[Producer]
    end
    
    subgraph Broker[Brokeré›†ç¾¤]
    T[Topic: 16ä¸ªé˜Ÿåˆ—]
    end
    
    subgraph Consumer1[Consumer-1]
    PT1[æ‹‰å–çº¿ç¨‹]
    PQ1[ProcessQueue]
    TP1[æ¶ˆè´¹çº¿ç¨‹æ± ]
    L1[Listener]
    end
    
    subgraph Consumer2[Consumer-2]
    PT2[æ‹‰å–çº¿ç¨‹]
    PQ2[ProcessQueue]
    TP2[æ¶ˆè´¹çº¿ç¨‹æ± ]
    L2[Listener]
    end
    
    P --&gt;|å‘é€æ¶ˆæ¯| T
    T --&gt;|é•¿è½®è¯¢æ‹‰å–| PT1
    T --&gt;|é•¿è½®è¯¢æ‹‰å–| PT2
    PT1 --&gt; PQ1
    PT2 --&gt; PQ2
    PQ1 --&gt; TP1
    PQ2 --&gt; TP2
    TP1 --&gt; L1
    TP2 --&gt; L2
    
    style P fill:#e1f5ff,stroke:#01579b
    style T fill:#fff3e0,stroke:#e65100,stroke-width:2px
    style PT1 fill:#f3e5f5,stroke:#4a148c
    style PT2 fill:#f3e5f5,stroke:#4a148c
    style PQ1 fill:#fff9c4,stroke:#f57f17
    style PQ2 fill:#fff9c4,stroke:#f57f17
    style TP1 fill:#e8f5e9,stroke:#1b5e20
    style TP2 fill:#e8f5e9,stroke:#1b5e20
    style L1 fill:#ffebee,stroke:#c62828
    style L2 fill:#ffebee,stroke:#c62828
</code></pre>
<p>ç†è§£äº†RocketMQçš„æ¶ˆè´¹æœºåˆ¶ï¼Œå°±èƒ½åœ¨å®é™…å·¥ä½œä¸­åˆç†é…ç½®Consumerï¼Œé¿å…æ€§èƒ½é—®é¢˜ã€‚è®°ä½ï¼š<strong>ç†è§£åŸç†æ¯”è®°ä½é…ç½®æ›´é‡è¦</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ–‡è¯»æ‡‚OpenClawæ ¸å¿ƒç‰¹æ€§ä¸åŸç†è§£æ(æ–‡æœ«é™„å›½äº§å¤§æ¨¡å‹+èŠå¤©è½¯ä»¶æ¥å…¥OpenClawè§†é¢‘æ•™ç¨‹åœ°å€)]]></title>    <link>https://juejin.cn/post/7602466689713078287</link>    <guid>https://juejin.cn/post/7602466689713078287</guid>    <pubDate>2026-02-04T02:55:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602466689713078287" data-draft-id="7602106969698566207" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡è¯»æ‡‚OpenClawæ ¸å¿ƒç‰¹æ€§ä¸åŸç†è§£æ(æ–‡æœ«é™„å›½äº§å¤§æ¨¡å‹+èŠå¤©è½¯ä»¶æ¥å…¥OpenClawè§†é¢‘æ•™ç¨‹åœ°å€)"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,LangChain,Agent"/> <meta itemprop="datePublished" content="2026-02-04T02:55:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹çœŸå¥½ç©"/> <meta itemprop="url" content="https://juejin.cn/user/3140624091453053"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡è¯»æ‡‚OpenClawæ ¸å¿ƒç‰¹æ€§ä¸åŸç†è§£æ(æ–‡æœ«é™„å›½äº§å¤§æ¨¡å‹+èŠå¤©è½¯ä»¶æ¥å…¥OpenClawè§†é¢‘æ•™ç¨‹åœ°å€)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3140624091453053/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹çœŸå¥½ç©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T02:55:08.000Z" title="Wed Feb 04 2026 02:55:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>2026å¹´å¼€å¹´çš„AIæ™ºèƒ½ä½“é¡¹ç›®ä¸­ï¼Œ<strong>OpenClaw</strong>Â æ— ç–‘æ˜¯è¿‘æœŸæœ€å—ç©ç›®çš„ç°è±¡çº§å¼€æºæˆæœã€‚è¯¥é¡¹ç›®åœ¨ GitHub ä¸Šå¼€æºä¸åˆ°ä¸€ä¸ªæœˆï¼Œä¾¿æ–©è·è¿‘Â <strong>15 ä¸‡ Star</strong>ï¼Œçƒ­åº¦ç”šè‡³è¶…è¶Š Claude Codeã€‚æœ‰è¶£çš„æ˜¯ï¼Œå®ƒæ›¾åœ¨çŸ­çŸ­ä¸€ä¸ªæœˆå†…å†ç»ä¸‰æ¬¡æ›´åâ€”â€”ä» Clawd Bot åˆ° MoltBotï¼Œå†åˆ°å¦‚ä»Šçš„ OpenClawï¼Œå…¶è¿­ä»£ä¹‹å¿«ç”šè‡³è¶…è¿‡äº†ç¬”è€…çš„æ›´æ–‡é€Ÿåº¦ã€‚</p>
<p><strong>OpenClaw</strong> ä¸ä»…å—åˆ°å¼€å‘è€…ç¤¾åŒºçš„ç‹‚çƒ­è¿½æ§ï¼Œè¿˜è·å¾—äº† OpenAI è”åˆåˆ›å§‹äºº Karpathy çš„é«˜åº¦è¯„ä»·ï¼Œè¢«ç§°ä¸ºâ€œè¿„ä»Šä¸ºæ­¢æœ€å®ç”¨çš„æ™ºèƒ½ä½“é¡¹ç›®â€ã€‚å…¶å½±å“åŠ›ç”šè‡³æº¢å‡ºæŠ€æœ¯åœˆï¼Œä¸€åº¦å› ä¼—å¤šç”¨æˆ·äº‰ç›¸éƒ¨ç½²è€Œå¸¦åŠ¨ Mac Mini æŠ¢è´­çƒ­æ½®ï¼Œè¶³ä»¥è§è¯å®ƒçš„å—æ¬¢è¿ç¨‹åº¦ã€‚</p>
<p>ç›®å‰ï¼Œç½‘ç»œä¸Šå·²æ¶Œç°å¤§é‡ OpenClaw çš„éƒ¨ç½²æ•™ç¨‹ï¼Œæœ¬æ–‡ä¸å†é‡å¤èµ˜è¿°ï¼ˆæ–‡æœ«å°†é™„ä¸Šç¬”è€…æ¨èçš„æœ¬åœ°éƒ¨ç½²æ•™ç¨‹é“¾æ¥ï¼‰ã€‚æœ¬ç¯‡å†…å®¹ç¬”è€…é‡ç‚¹åœ¨äºè§£æÂ <strong>OpenClaw çš„æ ¸å¿ƒç‰¹æ€§ä¸è®¾è®¡æ€è·¯</strong>ï¼Œé€šè¿‡é€šä¿—æ˜“æ‡‚çš„åŸç†è§£è¯»ï¼Œå¸®åŠ©å¤§å®¶åœ¨ä½“éªŒå…¶å¼ºå¤§åŠŸèƒ½çš„åŒæ—¶ï¼Œæ·±å…¥ç†è§£å…¶å·¥ä½œæœºåˆ¶ï¼ŒçœŸæ­£åšåˆ°<strong>çŸ¥å…¶ç„¶ï¼Œäº¦çŸ¥å…¶æ‰€ä»¥ç„¶</strong>ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd3eeb24d7ee453dacf3a0b0d533f0e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770778510&amp;x-signature=4qiB4UFED8ofvoeVzayjyiSggEM%3D" alt="0.png" width="70%" loading="lazy"/></p>
<h2 data-id="heading-1">ä¸€ã€OpenClawç‰¹æ€§è¯¦è§£</h2>
<h3 data-id="heading-2">1.1 OpenClawèƒ½åŠ›æ¦‚è§ˆ</h3>
<p>ä½œä¸º 2026 å¹´ä»¥æ¥æœ€å—å…³æ³¨çš„å¼€æºé¡¹ç›®ï¼ŒOpenClaw çš„èƒ½åŠ›è¦†ç›–èŒƒå›´æå¹¿ï¼Œå‡ ä¹å¯ä»¥è§†ä½œä¸€ä½å…¨èƒ½çš„â€œæ•°å­—å‘˜å·¥â€ã€‚å…¶ä¸»è¦åº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>è‡ªåŠ¨åŒ–ä¸å¼€å‘</strong>ï¼šæµè§ˆå™¨è‡ªåŠ¨åŒ–ã€AI è‡ªåŠ¨ç¼–ç¨‹ã€æ•°æ®å¤„ç†ä¸æŠ¥å‘Šç”Ÿæˆã€‚</li>
<li><strong>æ—¥å¸¸åŠå…¬è¾…åŠ©</strong>ï¼šè‡ªåŠ¨å›å¤é‚®ä»¶ã€å…¨ç½‘å•†å“æ¯”ä»·ã€æ•´ç†å¤‡å¿˜å½•ã€ä¼šè®®å½•éŸ³è½¬æ–‡å­—çºªè¦ç­‰ã€‚</li>
<li><strong>æ™ºèƒ½è®¾å¤‡è”åŠ¨</strong>ï¼šæ¥å…¥æ™ºèƒ½å®¶å±…ï¼Œè‡ªåŠ¨è°ƒèŠ‚ç¯å…‰ã€æ¸©åº¦ç­‰ç¯å¢ƒå‚æ•°ã€‚</li>
<li><strong>è·¨ç»ˆç«¯è¿œç¨‹åä½œ</strong>ï¼šé€šè¿‡ä¸ iMessage ç­‰å³æ—¶é€šè®¯å·¥å…·å¯¹æ¥ï¼Œç”¨æˆ·å¯ç›´æ¥åœ¨æ‰‹æœºç«¯å‘ OpenClaw ä¸‹è¾¾æŒ‡ä»¤ï¼Œè¿œç¨‹å®‰æ’å·¥ä½œã€‚æ›´æœ‰å¼€å‘è€…å®ç°äº†é€šè¿‡ Apple Watch è¿œç¨‹æŒ‡æŒ¥ OpenClaw åˆå¹¶ PRã€è‡ªåŠ¨ Debug ç­‰æ“ä½œã€‚</li>
</ul>
<p>æ€»çš„æ¥è¯´å‡¡æ˜¯èƒ½å¤Ÿé€šè¿‡Â <strong>Skillsï¼ˆæŠ€èƒ½æ¨¡å—ï¼‰</strong> Â æˆ–Â <strong>MCPï¼ˆModel Context Protocolï¼Œæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰</strong> Â å°è£…å®ç°çš„åŠŸèƒ½ï¼ŒOpenClaw çš†èƒ½æ— ç¼è¡”æ¥ã€‚</p>
<p>æ³¨ï¼šå¦‚å¯¹ Agent Skills æˆ– MCP ä¸ç†Ÿæ‚‰ï¼Œå¯å‚é˜…ç¬”è€…å¾€æœŸæ–‡ç« ï¼š</p>
<ul>
<li>ã€Š<a href="https://juejin.cn/post/7598918127578972194" target="_blank" title="https://juejin.cn/post/7598918127578972194">Agent Skills å®Œå…¨æŒ‡å—ï¼šæ ¸å¿ƒæ¦‚å¿µä¸¨è®¾è®¡æ¨¡å¼ä¸¨å®æˆ˜ä»£ç </a>ã€‹</li>
<li>ã€Š<a href="https://juejin.cn/post/7488895565314949120" target="_blank" title="https://juejin.cn/post/7488895565314949120">ç†è®º+ä»£ç ä¸€æ–‡å¸¦ä½ æ·±å…¥æµ…å‡º MCPï¼šäººå·¥æ™ºèƒ½å¤§æ¨¡å‹ä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’çš„é©å‘½æ€§çªç ´</a>ã€‹</li>
</ul>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b858711bb244d0b8f00948fdc92d520~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770778510&amp;x-signature=JrV4cIExlXTwTZPL92ESW%2F0kxfI%3D" alt="2.png" loading="lazy"/></p>
<h3 data-id="heading-3">1.2 OpenClaw æ ¸å¿ƒç‰¹æ€§</h3>
<p>é™¤äº†å¹¿æ³›çš„èƒ½åŠ›è¦†ç›–ï¼ŒOpenClaw åœ¨è®¾è®¡ä¸Šè¿˜å…·æœ‰ä»¥ä¸‹ä¸‰å¤§æ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<p><strong>1. å…¨å¹³å°æ¥å…¥ä¸å®æ—¶äº¤äº’</strong><br/>
OpenClaw å¯è½»æ¾æ¥å…¥å„ç±»èŠå¤©å·¥å…·ï¼ˆå¦‚ Telegramã€å¾®ä¿¡ã€iMessage ç­‰ï¼‰ä¸æ™ºèƒ½è®¾å¤‡ã€‚ç”¨æˆ·å³ä½¿ä¸åœ¨ç”µè„‘å‰ï¼Œä¹Ÿèƒ½é€šè¿‡æ‰‹æœºè¿œç¨‹æŒ‡æ´¾ä»»åŠ¡ã€‚OpenClaw ä¸ä»…èƒ½æ‰§è¡Œæ“ä½œï¼Œè¿˜èƒ½å®æ—¶å›ä¼ å±å¹•æˆªå›¾ã€æ‰§è¡Œæ—¥å¿—ç­‰ä¿¡æ¯ï¼Œè®©æ•´ä¸ªè¿‡ç¨‹å®Œå…¨é€æ˜ã€‚æ­¤å¤–ï¼Œé€šè¿‡å¯¹æ¥éº¦å…‹é£ã€æ‘„åƒå¤´ç­‰å¤–è®¾ï¼Œå®ƒè¿˜èƒ½ç›´æ¥å¤„ç†éŸ³è§†é¢‘ä¿¡æ¯ï¼Œå®ç°æ›´è‡ªç„¶çš„äº¤äº’ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b611d17e8edf471b921409285adcb516~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770778510&amp;x-signature=0op8yMs%2Bngwo7Ne%2FLc9jIVyjLPw%3D" alt="3.png" width="50%" loading="lazy"/></p>
<p><strong>2. æ™ºèƒ½å®šæ—¶ä»»åŠ¡ä¸ä¸»åŠ¨åˆ¤æ–­</strong><br/>
OpenClawå†…ç½®å¼ºå¤§çš„è‡ªç„¶è¯­è¨€å®šæ—¶ä»»åŠ¡å¼•æ“ã€‚ç”¨æˆ·åªéœ€ç”¨æ—¥å¸¸è¯­è¨€æè¿°ï¼Œå³å¯åˆ›å»ºä¸´æ—¶æé†’ã€å®šæœŸæ£€æŸ¥æ”¶ä»¶ç®±ç­‰ä»»åŠ¡ã€‚æ›´é‡è¦çš„æ˜¯ï¼ŒOpenClaw å…·å¤‡äº‹ä»¶ç´§æ€¥ç¨‹åº¦åˆ¤æ–­èƒ½åŠ›ï¼Œå¯è‡ªä¸»å†³å®šæ˜¯å¦é€šè¿‡èŠå¤©å·¥å…·ä¸»åŠ¨è”ç³»ç”¨æˆ·ã€‚è¿™ä¸€åšæ³•æ‰“ç ´äº†ä¼ ç»Ÿâ€œæŒ‡ä»¤-æ‰§è¡Œâ€çš„è¢«åŠ¨å¾ªç¯ï¼Œè®©æ™ºèƒ½ä½“å……åˆ†å‘æŒ¥å®ƒçš„ä¸»è§‚èƒ½åŠ¨æ€§ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a506b7b3461b400d87619fd2972d7ef2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770778510&amp;x-signature=A%2BGOqfYRcgDQBZiQHZF8UiZEmJs%3D" alt="4.png" width="50%" loading="lazy"/></p>
<p><strong>3. æŒç»­è¿›åŒ–çš„é•¿æœŸè®°å¿†</strong><br/>
OpenClaw æ”¯æŒå°†è®°å¿†ä»¥æ–‡ä»¶å½¢å¼å­˜å‚¨åœ¨æœ¬åœ°ï¼Œå¹¶èƒ½åœ¨å¯¹è¯ä¸­å¿«é€Ÿæ£€ç´¢ç›¸å…³è®°å¿†å¹¶æ”¾å…¥ä¸Šä¸‹æ–‡ã€‚éšç€ä½¿ç”¨é¢‘æ¬¡å¢åŠ ï¼Œå®ƒä¼šä¸»åŠ¨æ›´æ–°å’Œä¼˜åŒ–è¿™äº›è®°å¿†æ–‡ä»¶ï¼Œå®ç°â€œè¶Šç”¨è¶Šèªæ˜â€çš„æŒç»­å­¦ä¹ æ•ˆæœã€‚</p>
<p>ç»è¿‡å…¨ç½‘å¤§é‡çš„å®è·µè¯æ˜ï¼ŒOpenClawä¸ä»…æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œå–„ã€æ€§èƒ½å‰æ²¿çš„å…¨æ–°ä¸€ä»£æ™ºèƒ½ä½“ï¼Œè€Œä¸”è¿è¡Œç¨³å®šï¼Œå„é¡¹å‚æ•°ç”Ÿæˆå®Œæ•´ï¼Œæ˜¯ä¸€é¡¹å®Œå…¨èƒ½å¤Ÿåº”ç”¨äºå·¥ä¸šçº§åœºæ™¯çš„é«˜æ€§èƒ½æ™ºèƒ½ä½“ã€‚æˆ–è®¸OpenClawçš„å‡ºç°æ˜¯æˆ‘ä»¬äººç±»ç¬¬ä¸€æ¬¡çœŸæ­£æ„ä¹‰ä¸Šæ‹¥æœ‰äº†æœŸå¾…å·²ä¹…çš„æ•°å­—å‘˜å·¥ï¼</p>
<h2 data-id="heading-4">äºŒã€OpenClaw åŸç†è§£æ</h2>
<p>OpenClaw ç”±å‰ PSPDFKit åˆ›å§‹äºº Peter Steinberger å¼€å‘ï¼Œä¸€ä½è‡ªç§°ä¸ºâ€œé€€ä¼‘ç¨‹åºå‘˜â€ï¼Œå´æ‰“é€ å‡ºäº†ä¸€æ¬¾é¢‡å…·é©å‘½æ€§çš„å¼€æºä¸ªäººAIåŠ©æ‰‹çš„å¤§ç¥! è¯¥é¡¹ç›®æœ€åˆçš„ç†å¿µæ˜¯ â€œClaude with handsâ€ï¼ˆæ‹¥æœ‰åŒæ‰‹çš„ Claudeï¼‰ï¼Œæ—¨åœ¨å°†å¤§å‹è¯­è¨€æ¨¡å‹çš„æ™ºèƒ½ä¸æœ¬åœ°ç³»ç»Ÿçš„æ“ä½œèƒ½åŠ›æ·±åº¦èåˆã€‚</p>
<p>åˆæ¬¡æ¥è§¦ OpenClawï¼Œå¤§å®¶æˆ–è®¸ä¼šè”æƒ³åˆ°æ­¤å‰å¤§ç«çš„Â <a href="https://juejin.cn/post/7479212482546073611" target="_blank" title="https://juejin.cn/post/7479212482546073611">Manus</a>Â ç­‰é¡¹ç›®ã€‚ä½† OpenClaw å¹¶éä¸€ä¸ªè¿è¡Œåœ¨æµè§ˆå™¨ä¸­çš„ç½‘é¡µåº”ç”¨ï¼Œè€Œæ˜¯ä¸€ä¸ªéƒ¨ç½²äºæœ¬åœ°çš„åå°æœåŠ¡ã€‚è¿™æ„å‘³ç€å®ƒæ‹¥æœ‰æé«˜çš„éšç§å®‰å…¨æ€§å’Œå¯¹ä½ ç”µè„‘çš„ç›´æ¥æ“ä½œæƒé™ã€‚å¤§å®¶å¯ä»¥å°†å…¶ç†è§£ä¸ºä¸€ä¸ªæˆç†Ÿçš„â€œComputer Useâ€ï¼Œèƒ½å¤Ÿæ‰§è¡Œå‘½ä»¤è¡ŒæŒ‡ä»¤ã€åœ¨æ²™ç›’ç¯å¢ƒä¸­è¿è¡Œä»£ç ï¼Œå¹¶æ“æ§æµè§ˆå™¨ç­‰åº”ç”¨ã€‚</p>
<p>OpenClaw ä¸ Manus ç­‰é¡¹ç›®çš„æœ¬è´¨åŒºåˆ«ï¼Œåœ¨äºå…¶ä»¥ä¸‹å‡ é¡¹æ ¸å¿ƒæ¶æ„çš„å·§å¦™è®¾è®¡ï¼š</p>
<h3 data-id="heading-5">2.1 ç½‘å…³ç³»ç»Ÿï¼šåè®®æ— å…³çš„æ™ºèƒ½ç¼–æ’å±‚</h3>
<p>OpenClaw æ‹¥æœ‰ä¸€ä¸ªå¼ºå¤§ä¸”çµæ´»çš„<strong>ç½‘å…³ç³»ç»Ÿï¼ˆGateway Systemï¼‰</strong> ã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªç®€å•çš„ API è½¬å‘å™¨ï¼Œæ›´æ˜¯ä¸€ä¸ª<strong>åè®®æ— å…³çš„ç¼–æ’å±‚ï¼ˆProtocol-Agnostic Orchestratorï¼‰</strong> ã€‚å…¶æ ¸å¿ƒåœ¨äºç»´æŠ¤ä¸€ä¸ªæŒä¹…çš„ WebSocket è¿æ¥ï¼Œæ„å»ºå‡ºä¸€æ¡å®æ—¶ã€åŒå‘çš„é€šä¿¡é€šé“ã€‚æ— è®ºæŒ‡ä»¤æ¥è‡ªç»ˆç«¯å‘½ä»¤è¡Œã€Web æ§åˆ¶é¢æ¿ï¼Œè¿˜æ˜¯é€šè¿‡ iMessage ç­‰é€šè®¯å·¥å…·è¿œç¨‹å‘é€ï¼Œç½‘å…³éƒ½èƒ½å°†è¿™äº›å¼‚æ„çš„è¾“å…¥ä¿¡å·å³æ—¶æ ‡å‡†åŒ–ï¼Œå¹¶ç»Ÿä¸€ç»´æŠ¤<strong>ä¼šè¯çŠ¶æ€ï¼ˆSession Stateï¼‰</strong> ã€‚</p>
<p>è¿™ä¹Ÿè§£é‡Šäº†ä¸ºä½•è®¸å¤šç”¨æˆ·é€‰æ‹©ä½¿ç”¨ Mac Mini ä½œä¸º OpenClaw çš„æœåŠ¡å™¨ï¼šä¸€æ–¹é¢æ˜¯ä¸ºäº†æ‹¥æœ‰ä¸€ä¸ª 7x24 å°æ—¶å¾…å‘½çš„ä¸“å± AI åŠ©æ‰‹ï¼›å¦ä¸€æ–¹é¢ï¼Œåœ¨è‹¹æœç”Ÿæ€ä¸‹ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥é€šè¿‡ iPhone æˆ– Apple Watch ä¸Šçš„ iMessage ä¸è¿œç¨‹ OpenClaw å¯¹è¯ï¼Œæ— éœ€å®‰è£…ä»»ä½•é¢å¤–æ’ä»¶ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6743cd220f1348cbbe761fbd5a68ae79~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770778510&amp;x-signature=3rOc5Tj7KDK3mhi8Lh6zinrM8S4%3D" alt="6.png" loading="lazy"/></p>
<h3 data-id="heading-6">2.2 å››å±‚è®°å¿†æ¶æ„ï¼šå®ç°æ— é™é•¿ä¸Šä¸‹æ–‡ä¸æŒç»­è¿›åŒ–</h3>
<p>OpenClaw çš„å¦ä¸€å¤§æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå…¶ç²¾å·§çš„ä¸Šä¸‹æ–‡ç®¡ç†å·¥ç¨‹ã€‚å®ƒé€šè¿‡Â <strong>SOULã€TOOLSã€USERã€Session</strong>Â å››å±‚è®°å¿†ç»“æ„ï¼Œæ„å»ºäº†ä¸€å¥—é«˜æ€§èƒ½çš„ä¸Šä¸‹æ–‡ç®¡ç†ç³»ç»Ÿã€‚</p>
<ol>
<li><strong>SOULï¼ˆçµé­‚ï¼‰</strong> ï¼šæ™ºèƒ½ä½“çš„ä¸å¯å˜å†…æ ¸ï¼ŒåŒ…å«äº†å…¶åº•å±‚çš„ç³»ç»ŸæŒ‡ä»¤ä¸æ ¸å¿ƒè¡Œä¸ºå‡†åˆ™ã€‚</li>
<li><strong>TOOLSï¼ˆå·¥å…·ï¼‰</strong> ï¼šåŠ¨æ€çš„å·¥å…·æ³¨å†Œè¡¨ã€‚ç³»ç»Ÿå¯æ ¹æ®å½“å‰ç¯å¢ƒï¼Œçµæ´»æ³¨å…¥å¯ç”¨çš„ API å’Œèƒ½åŠ›ï¼Œå®ç°æŒ‰éœ€è°ƒç”¨ã€‚</li>
<li><strong>USERï¼ˆç”¨æˆ·è®°å¿†ï¼‰</strong> ï¼šåŸºäºè¯­ä¹‰å‘é‡çš„é•¿æœŸè®°å¿†åº“ã€‚OpenClaw ä¼šåœ¨äº¤äº’ä¸­è‡ªåŠ¨å­¦ä¹ å¹¶å­˜å‚¨ç”¨æˆ·çš„åå¥½ã€ä¹ æƒ¯ç”šè‡³ä»£ç é£æ ¼ï¼Œä»è€Œå®ç°â€œè¶Šç”¨è¶Šæ‡‚ä½ â€çš„ä¸ªæ€§åŒ–ä½“éªŒã€‚</li>
<li><strong>Sessionï¼ˆä¼šè¯è®°å¿†ï¼‰</strong> ï¼šå®æ—¶çš„æƒ…æ™¯è®°å¿†ã€‚å®ƒèƒ½æ•æ‰å½“å‰å¯¹è¯ä¸­æœ‰ä»·å€¼çš„ä¿¡æ¯ï¼Œå¹¶åŠ¨æ€åœ°å°†å…¶çº³å…¥ä¸Šä¸‹æ–‡ï¼Œä¿è¯å¯¹è¯çš„è¿è´¯æ€§ã€‚</li>
</ol>
<p>è¿™å¥—åˆ†å±‚è®°å¿†ä½“ç³»ä¸ä»…æ”¯æ’‘äº†â€œæ— é™é•¿ä¸Šä¸‹æ–‡â€çš„å¯¹è¯ä½“éªŒï¼Œæ›´æ˜¯ OpenClaw èƒ½å¤ŸæŒç»­å­¦ä¹ ã€ä¸æ–­è¿›åŒ–çš„æŠ€æœ¯åŸºçŸ³ã€‚è¿™ä¸€æ•´å¥—çš„ä¸Šä¸‹æ–‡è®°å¿†ç®¡ç†å·¥ç¨‹å€¼å¾—å¤§å®¶å¼€å‘æ™ºèƒ½ä½“å€Ÿé‰´å­¦ä¹ ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a46634fdc7a49fbbdd74921e4c1f197~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770778510&amp;x-signature=J6fEFfMZh5d6UN0u6g2aGXud6j0%3D" alt="7.png" loading="lazy"/></p>
<h3 data-id="heading-7">2.3 Agent Skills åŠŸèƒ½ä½“ç³»ï¼šå³æ’å³ç”¨çš„èƒ½åŠ›æ‰©å±•</h3>
<p>å¦‚æœè¯´ MCP åè®®æ˜¯ä¸ºäº†è®©æ™ºèƒ½ä½“æ›´é«˜æ•ˆåœ°â€œè°ƒç”¨å·¥å…·â€ï¼Œé‚£ä¹ˆÂ <strong>Agent Skills</strong>Â åˆ™æ˜¯ç›´æ¥ä¸ºæ™ºèƒ½ä½“â€œèµ‹äºˆèƒ½åŠ›â€ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå®‰è£…Â <code>apple-notes</code>Â Skill åï¼ŒOpenClaw ä¾¿å³åˆ»è·å¾—è¯»å†™å’Œæ“ä½œè‹¹æœä¾¿ç­¾çš„å…¨éƒ¨æƒé™ï¼›åŠ è½½Â <code>bird</code>Â Skillï¼Œå®ƒå°±èƒ½è‡ªåŠ¨å¸®ä½ æœé›†ã€æ•´ç†æ¨ç‰¹ä¿¡æ¯ï¼Œç”šè‡³ä»£ä¸ºå‘å¸ƒæ¨æ–‡ã€‚ç®€è€Œè¨€ä¹‹ï¼Œ<strong>æƒ³è®© OpenClaw å…·å¤‡ä»€ä¹ˆèƒ½åŠ›ï¼Œåªéœ€å®‰è£…å¯¹åº”çš„ Skill å³å¯</strong>ã€‚</p>
<p>æ­¤å¤–ï¼ŒOpenClaw è¿˜æ”¯æŒå®Œæ•´çš„<strong>å¤šæ¨¡æ€æ¨¡å‹è°ƒç”¨</strong>ï¼Œå¹¶é›†æˆäº†è¯¸å¦‚çœ‹é—¨ç‹—ï¼ˆç›‘æ§ï¼‰å­ç³»ç»Ÿã€æ’ä»¶ä½“ç³»ã€è·¨å¹³å°éƒ¨ç½²ç­‰å¤šé¡¹ä¼ä¸šçº§ç‰¹æ€§ã€‚ç”±æ­¤å¯è§ï¼Œè¿™ç»éä¸€ä¸ªç®€å•çš„â€œä¸ªäººç©å…·â€ï¼Œè€Œæ˜¯åœ¨ Agent Skills ä¸ Vibe Coding æ—¶ä»£èƒŒæ™¯ä¸‹ï¼Œè¶…è¶Š Manus çš„ã€é¢å‘æœªæ¥çš„æ–°ä¸€ä»£é€šç”¨æ™ºèƒ½ä½“å¹³å°ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8864ac619cc0453ba5b9c789e933c0bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770778510&amp;x-signature=00uX14ToOWk47vqyWOrGm4tdiK8%3D" alt="8.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ac4100b4e6548a1b8909017b35d9129~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770778510&amp;x-signature=12XJz7e7%2Fe86R3IozLf797R%2BuZI%3D" alt="9.png" loading="lazy"/></p>
<h2 data-id="heading-8">ä¸‰ã€OpenClaw å®ç”¨æŒ‡å—ï¼šæ¥å…¥å›½å†…å¤§æ¨¡å‹ä¸ä¸»æµèŠå¤©å·¥å…·</h2>
<p>æ— è®ºæ˜¯å¸Œæœ›æ‹¥æœ‰ä¸€ä¸ªä¸“å±çš„â€œè´¾ç»´æ–¯â€æ¥æå‡å·¥ä½œæ•ˆç‡ï¼Œè¿˜æ˜¯ä½œä¸ºå¼€å‘è€…å¸Œæœ›å­¦ä¹ æœ€å‰æ²¿çš„ Agent è®¾è®¡ç†å¿µï¼ŒOpenClaw éƒ½æ˜¯ä¸€ä¸ªæå…·ä»·å€¼çš„é«˜è´¨é‡é¡¹ç›®ï¼Œéå¸¸å€¼å¾—åœ¨æœ¬åœ°è¿›è¡Œæ·±å…¥å°è¯•å’Œå®è·µã€‚</p>
<p>ä¸ºäº†å¸®åŠ©å¤§å®¶å¿«é€Ÿå®ç°ä¸€ä¸ªâ€œèƒ½å¹²äº‹ã€ä¼šæ²Ÿé€šâ€çš„ä¸ªäººæ™ºèƒ½ä½“ï¼Œä»¥ä¸‹æ˜¯ç¬”è€…æ•´ç†çš„Â <strong>OpenClaw æ¥å…¥å›½å†…ä¸»æµèŠå¤©å·¥å…·ä¸å›½äº§å¤§æ¨¡å‹çš„å®ç”¨æŒ‡å—æ±‡æ€»</strong>ã€‚</p>
<h3 data-id="heading-9">3.1 ä¸»æµèŠå¤©å·¥å…·æ¥å…¥</h3>
<p>OpenClaw å¼ºå¤§çš„ç½‘å…³ç³»ç»Ÿä½¿å…¶èƒ½è½»æ¾é€‚é…å„ç±»å³æ—¶é€šè®¯å·¥å…·ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªä¸»æµå¹³å°çš„æ¥å…¥æ•™ç¨‹ï¼š</p>
<ul>
<li>
<p><strong>æ¥å…¥ WhatsApp æŒ‡å—</strong><br/>
è§†é¢‘æ•™ç¨‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1kH6nBFEPq" target="_blank" title="https://www.bilibili.com/video/BV1kH6nBFEPq" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1kHâ€¦</a></p>
</li>
<li>
<p><strong>æ¥å…¥é£ä¹¦æŒ‡å—</strong><br/>
è§†é¢‘æ•™ç¨‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1kH6nBFEPq" target="_blank" title="https://www.bilibili.com/video/BV1kH6nBFEPq" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1kHâ€¦</a></p>
</li>
<li>
<p><strong>æ¥å…¥å¾®ä¿¡ã€é’‰é’‰ã€QQ ä¸€ç«™å¼æŒ‡å—</strong><br/>
è§†é¢‘æ•™ç¨‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1MfFAz6EnR" target="_blank" title="https://www.bilibili.com/video/BV1MfFAz6EnR" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1Mfâ€¦</a></p>
</li>
</ul>
<h3 data-id="heading-10">3.2 å›½äº§å¤§æ¨¡å‹é›†æˆæ–¹æ¡ˆ</h3>
<p>é™¤äº†é»˜è®¤çš„ Claude/OpenAI æ¨¡å‹ï¼ŒOpenClaw æ¶æ„ä¹Ÿæ”¯æŒçµæ´»å¯¹æ¥å›½äº§å¤§æ¨¡å‹ï¼ˆå¦‚MinMaxç­‰ï¼‰ã€‚é€šå¸¸åªéœ€åœ¨é…ç½®ä¸­æ›¿æ¢å¯¹åº”çš„ API ç«¯ç‚¹ä¸å¯†é’¥ï¼Œå³å¯äº«å—å›½äº§æ¨¡å‹æœåŠ¡ï¼Œåœ¨æ•°æ®éšç§ä¸ç½‘ç»œå»¶è¿Ÿä¸Šæ›´å…·ä¼˜åŠ¿ã€‚</p>
<h3 data-id="heading-11">3.3 äº‘å¹³å°ä¸€ç«™å¼éƒ¨ç½²</h3>
<p>ç›®å‰ï¼Œ<strong>é˜¿é‡Œäº‘ã€ç«å±±å¼•æ“</strong>ç­‰ä¸»æµäº‘å¹³å°å·²æä¾›é¢„é›†æˆçš„ OpenClaw éƒ¨ç½²æ–¹æ¡ˆã€‚åœ¨å¯¹åº”çš„äº‘å¸‚åœºæˆ–AIå¹³å°æœåŠ¡ä¸­æœç´¢ â€œOpenClawâ€ï¼Œå³å¯æ‰¾åˆ°å®˜æ–¹æˆ–ç¤¾åŒºç»´æŠ¤çš„é•œåƒä¸éƒ¨ç½²æ¨¡æ¿ï¼Œå®ç°åˆ†é’Ÿçº§äº‘ç«¯ä¸Šçº¿ï¼Œéå¸¸é€‚åˆä¸æƒ³æŠ˜è…¾æœ¬åœ°ç¯å¢ƒçš„ç”¨æˆ·ã€‚</p>
<p><strong>å°è¯•éƒ¨ç½²å±äºå¤§å®¶çš„ OpenClawï¼Œå¼€å¯é«˜æ•ˆæ™ºèƒ½çš„â€œæ•°å­—å‘˜å·¥â€æ—¶ä»£å§ï¼</strong></p>
<h2 data-id="heading-12">å››ã€æ€»ç»“</h2>
<p>æœ¬æ–‡åˆ†äº«äº†OpenClawæ ¸å¿ƒç‰¹æ€§ä¸è®¾è®¡åŸç†ï¼Œå¹¶æä¾›äº†æ¥å…¥å›½äº§å¤§æ¨¡å‹ä¸ä¸»æµèŠå¤©å·¥å…·çš„å®ç”¨æŒ‡å—ã€‚OpenClawæ˜¯2026å¹´ç°è±¡çº§å¼€æºæ™ºèƒ½ä½“ï¼Œå®ƒé€šè¿‡ç‹¬ç‰¹çš„ç½‘å…³ç³»ç»Ÿå®ç°å…¨å¹³å°å®æ—¶äº¤äº’ï¼Œå‡­å€Ÿå››å±‚è®°å¿†æ¶æ„æ‹¥æœ‰é•¿æœŸè®°å¿†ä¸å­¦ä¹ èƒ½åŠ›ï¼Œå¹¶å€Ÿç”±Agent Skillsä½“ç³»çµæ´»æ‰©å±•åŠŸèƒ½æ­£å‘ç€æœªæ¥æ—¶ä»£çš„å…¨èƒ½æ•°å­—å‘˜å·¥è¿ˆè¿›ã€‚</p>
<p>2026æ³¨å®šæ˜¯å¤§æ¨¡å‹æ¥ç»­çˆ†å‘çš„ä¸€å¹´ï¼ä¸ºäº†è®©å¤§å®¶å½»åº•ææ‡‚å¤§æ¨¡å‹çš„ä½œç”¨åŸç†ï¼Œç¬”è€…ä¹Ÿå‘å¸ƒäº†<a href="https://juejin.cn/column/7594655863548248116" target="_blank" title="https://juejin.cn/column/7594655863548248116">ã€Šæ•°æ®åˆ°æ¨¡å‹åˆ°åº”ç”¨ï¼šå¤§æ¨¡å‹è®­ç»ƒå…¨æµç¨‹å®æˆ˜æŒ‡å—ã€‹</a>ä¸“æ ï¼Œé¢„è®¡ä¼šæœ‰50æœŸå†…å®¹ï¼Œå°†ç³»ç»Ÿæ‹†è§£ä»æ•°æ®å¤„ç†ã€æ¨¡å‹è®­ç»ƒåˆ°å¼ºåŒ–å­¦ä¹ ä¸æ™ºèƒ½ä½“å¼€å‘çš„å…¨æµç¨‹ï¼Œå¹¶å¸¦å¤§å®¶ä»é›¶å®ç°æ¨¡å‹ï¼Œå¸®åŠ©å¤§å®¶æŒæ¡å¤§æ¨¡å‹è®­ç»ƒçš„å…¨æŠ€èƒ½ï¼ŒçœŸæ­£æŒæ¡å¡‘é€ æ™ºèƒ½çš„èƒ½åŠ›ï¼æ„Ÿå…´è¶£å¤§å®¶å¯å…³æ³¨ç¬”è€…æ˜é‡‘è´¦å·ï¼Œæ›´å¯å…³æ³¨ç¬”è€…åŒåå¾®ä¿¡å…¬ä¼—å·ï¼š<strong>å¤§æ¨¡å‹çœŸå¥½ç©</strong>ï¼Œæ›´å¤šæ•™ç¨‹å’Œå¤§é‡å¤§æ¨¡å‹å­¦ä¹ èµ„æ–™åˆ†äº«~</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå¤§æ¨¡å‹è®­ç»ƒå¯¹è®¡ç®—èµ„æºæœ‰ä¸€å®šè¦æ±‚ï¼Œå°¤å…¶æ˜¯GPUæ˜¾å­˜ã€‚ä¸ºé™ä½å­¦ä¹ é—¨æ§›ï¼Œç¬”è€…ä¸å›½å†…ä¸»æµäº‘å¹³å°åˆä½œï¼Œå¤§å®¶å¯ä»¥é€šè¿‡æ‰“å¼€é“¾æ¥:Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lab4ai.cn%2Fregister%3FagentID%3Duser-XorgKKc56U" target="_blank" title="https://www.lab4ai.cn/register?agentID=user-XorgKKc56U" ref="nofollow noopener noreferrer">Lab4AI</a>Â ï¼Œä½“éªŒ<strong>H100 GPU 6.5å°æ—¶</strong>çš„ç®—åŠ›ã€‚æœ¬ç³»åˆ—æ‰€æœ‰å®æˆ˜æ•™ç¨‹å‡å°†åœ¨è¯¥å¹³å°ä¸Šå®Œæˆï¼Œå¸®åŠ©å¤§å®¶ä½æˆæœ¬ä¸Šæ‰‹å®è·µã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Nodejs å­¦ä¹ è®°å½•]]></title>    <link>https://juejin.cn/post/7602401081265946660</link>    <guid>https://juejin.cn/post/7602401081265946660</guid>    <pubDate>2026-02-03T12:22:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602401081265946660" data-draft-id="7602401081264652324" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Nodejs å­¦ä¹ è®°å½•"/> <meta itemprop="keywords" content="Node.js"/> <meta itemprop="datePublished" content="2026-02-03T12:22:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸´åœ¨linzai"/> <meta itemprop="url" content="https://juejin.cn/user/974584529557604"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Nodejs å­¦ä¹ è®°å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/974584529557604/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸´åœ¨linzai
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T12:22:20.000Z" title="Tue Feb 03 2026 12:22:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.Nodejsçš„ä¼˜ç‚¹å’Œç¯å¢ƒæ­å»º</h2>
<h3 data-id="heading-1">Nodejsçš„ä¼˜ç‚¹</h3>
<ol>
<li>è¿è¡Œåœ¨v8JavaScriptå¼•æ“ä¸Š(é«˜æ€§èƒ½)</li>
<li>äº‹ä»¶é©±åŠ¨</li>
<li>éé˜»å¡çš„IOæ¨¡å‹</li>
<li>ä¸°å¯Œçš„ç”Ÿæ€åœˆ(npmä¸‹è½½èµ„æº)</li>
</ol>
<h3 data-id="heading-2">Nodejsçš„å®‰è£…</h3>
<p>ç‚¹å‡» <a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fen%2Fdownload" target="_blank" title="https://nodejs.org/en/download" ref="nofollow noopener noreferrer">Node.js â€” Download Node.jsÂ®</a> å®‰è£…æ–°ç‰ˆæœ¬çš„nodejs</p>
<h2 data-id="heading-3">2.å…¨å±€å¯¹è±¡</h2>
<p>Nodejsæä¾›å¾ˆå¤šå…¨å±€å¯¹è±¡,è¿™äº›å¯¹è±¡éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨,ä¸éœ€è¦åšå•ç‹¬çš„å¼•å…¥</p>
<p><strong>æ—¥å¿—ä¿¡æ¯æ‰“å°</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'nihao'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'nihao'</span>);
</code></pre>
<p><strong>å®šæ—¶å™¨</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>
<span class="hljs-keyword">let</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
   i += <span class="hljs-number">1</span>
   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'i = '</span> + i )
   <span class="hljs-keyword">if</span>(i &gt;= <span class="hljs-number">5</span>){
       <span class="hljs-built_in">clearInterval</span>(timer)
   }
}, <span class="hljs-number">1000</span>);
</code></pre>
<p><strong>ä¸€äº›å¸¸ç”¨çš„å…¨å±€å¯¹è±¡</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span>ï¼ˆ__dirname)ï¼›<span class="hljs-comment">//æ‰“å°å‡ºæ¥å½“å‰è·¯å¾„</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span>ï¼ˆ__filenameï¼‰ï¼›<span class="hljs-comment">//æ‰“å°å‡ºæ¥åŒ…å«æ–‡ä»¶åç§°</span>
</code></pre>
<h2 data-id="heading-4">3.å›è°ƒå‡½æ•°</h2>
<p><strong>å®šä¹‰</strong>:æ˜¯æŒ‡ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶åœ¨è¯¥å‡½æ•°å†…éƒ¨è¢«è°ƒç”¨çš„å‡½æ•°ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦ç†Ÿæ‚‰ä¸€ä¸‹å›è°ƒå‡½æ•°,å› ä¸ºåœ¨æ•´ä¸ªnodejsä¸­,æ…¢æ…¢çš„éƒ½æ˜¯å›è°ƒå‡½æ•°</p>
<p><strong>åŸºç¡€å‡½æ•°</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">sayHi</span>(<span class="hljs-params"/>){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"hi"</span>);
}

<span class="hljs-keyword">let</span>  sayBye = <span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name + <span class="hljs-string">"bye"</span>);
}
<span class="hljs-title function_">sayHi</span>()
<span class="hljs-title function_">sayBye</span>(<span class="hljs-string">"hzh"</span>)
</code></pre>
<p><strong>å›è°ƒå‡½æ•°</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">callFunction</span>(<span class="hljs-params">callback,name</span>){
    <span class="hljs-title function_">callback</span>(name);
}

<span class="hljs-title function_">callFunction</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name + <span class="hljs-string">":bye"</span>);
},<span class="hljs-string">"hzh"</span>)
</code></pre>
<h2 data-id="heading-5">4.æ¨¡å—(Commonjsè§„èŒƒ)</h2>
<p>åœ¨JavaScriptçš„ES5ç‰ˆæœ¬ä¸­,æœ€å¤§çš„é—®é¢˜å°±æ˜¯æ²¡æœ‰æ¨¡å—çš„æ¦‚å¿µ,ä½†æ˜¯nodejsä¸­,å¢åŠ äº†commonjsè§„èŒƒæ¥å¤„ç†è¿™ä¸€é—®é¢˜</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//utils.js</span>
<span class="hljs-keyword">let</span> adder = <span class="hljs-keyword">function</span>(<span class="hljs-params">a,b</span>){
    <span class="hljs-keyword">return</span> <span class="hljs-string">'ä¸¤æ•°ä¹‹å’Œä¸º '</span> + (a + b);
}

<span class="hljs-keyword">let</span> arrLength = <span class="hljs-keyword">function</span>(<span class="hljs-params">arr</span>){
    <span class="hljs-keyword">return</span> <span class="hljs-string">'é•¿åº¦ä¸º '</span> + arr.<span class="hljs-property">length</span>;
}

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    adder,
    arrLength
}
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//code.js</span>
<span class="hljs-keyword">const</span> {<span class="hljs-attr">adder</span>: add,<span class="hljs-attr">arrLength</span>: length} = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./utils.js'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">add</span>(<span class="hljs-number">10</span>,<span class="hljs-number">20</span>));
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">length</span>([ <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span> ]));
</code></pre>
<h3 data-id="heading-6"><strong>æ‹“å±•</strong></h3>
<p>export ä¹Ÿå¯ä»¥ç›´æ¥å¯¼å‡ºæ–‡ä»¶,è¿™æ˜¯<strong>ES6æ¨¡å—</strong>,å’ŒCommonjsè¿˜æ˜¯åŒºåˆ«çš„</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//utils.js</span>
<span class="hljs-keyword">let</span> adder = <span class="hljs-keyword">function</span>(<span class="hljs-params">a,b</span>){
    <span class="hljs-keyword">return</span> <span class="hljs-string">'ä¸¤æ•°ä¹‹å’Œä¸º '</span> + (a + b);
}

<span class="hljs-keyword">let</span> arrLength = <span class="hljs-keyword">function</span>(<span class="hljs-params">arr</span>){
    <span class="hljs-keyword">return</span> <span class="hljs-string">'é•¿åº¦ä¸º '</span> + arr.<span class="hljs-property">length</span>;
}

<span class="hljs-keyword">export</span> {adder,arrLength};
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//code.js</span>
<span class="hljs-keyword">import</span> {adder,arrLength} <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils.js'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">adder</span>(<span class="hljs-number">10</span>,<span class="hljs-number">30</span>));
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">arrLength</span>([ <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span> ]));
</code></pre>
<p><strong>ES6ç‰¹ç‚¹</strong>:</p>
<ul>
<li><strong>ä»£ç åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­æ‰§è¡Œ</strong></li>
<li><strong>æ— æ³•ç›´æ¥è®¿é—®æœåŠ¡å™¨èµ„æº</strong>ï¼ˆæ–‡ä»¶ç³»ç»Ÿã€æ•°æ®åº“ç­‰ï¼‰</li>
<li><strong>é€šè¿‡ç½‘ç»œè¯·æ±‚ä¸æœåŠ¡å™¨é€šä¿¡</strong></li>
<li><strong>ä¸»è¦è´Ÿè´£ç”¨æˆ·ç•Œé¢å’Œäº¤äº’</strong></li>
</ul>
<p><strong>Commonjsç‰¹ç‚¹</strong>:</p>
<ul>
<li><strong>ä»£ç åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ</strong></li>
<li><strong>å¯ä»¥ç›´æ¥è®¿é—®æ–‡ä»¶ç³»ç»Ÿã€æ•°æ®åº“ç­‰</strong></li>
<li><strong>å¤„ç†ä¸šåŠ¡é€»è¾‘ã€æ•°æ®å­˜å‚¨ç­‰</strong></li>
<li><strong>å‘æµè§ˆå™¨æä¾›APIæœåŠ¡</strong></li>
</ul>
<p>åˆ°åé¢åŸºæœ¬éƒ½æ˜¯ç»Ÿä¸€ä½¿ç”¨ES6æ¨¡å—å¼€å‘,åœ¨package.jsonæ–‡ä»¶ä¸­åŠ å…¥</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// package.json</span>
{
  <span class="hljs-string">"type"</span>: <span class="hljs-string">"module"</span>
}
</code></pre>
<h2 data-id="heading-7">5.äº‹ä»¶</h2>
<p>å¤§å¤šæ•°Node.jsæ ¸å¿ƒAPIæ„å»ºæƒ¯ç”¨å¼‚æ­¥äº‹ä»¶é©±åŠ¨æ¶æ„,å…¶ä¸­æŸäº›ç±»å‹çš„å¯¹è±¡(åˆç§°è§¦å‘å™¨,Emitter)ä¼šè§¦å‘å‘½åäº‹ä»¶æ¥è°ƒç”¨å‡½æ•°(åˆç§°ç›‘å¬å™¨,Listener)</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//å¼•å…¥äº‹ä»¶</span>
<span class="hljs-keyword">let</span> enents  =  <span class="hljs-built_in">require</span>(<span class="hljs-string">"events"</span>);
<span class="hljs-comment">//åˆ›å»ºäº‹ä»¶å‘å°„å™¨å¯¹è±¡</span>
<span class="hljs-keyword">let</span> eventEmitter = <span class="hljs-keyword">new</span> enents.<span class="hljs-title class_">EventEmitter</span>();
<span class="hljs-comment">//ç»‘å®šäº‹ä»¶åŠäº‹ä»¶å¤„ç†ç¨‹åº</span>
eventEmitter.<span class="hljs-title function_">on</span>(<span class="hljs-string">"someEvent"</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params">arg1</span>){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"someEvent äº‹ä»¶è§¦å‘"</span>,arg1);
});
<span class="hljs-comment">//è§¦å‘äº‹ä»¶</span>
eventEmitter.<span class="hljs-title function_">emit</span>(<span class="hljs-string">"someEvent"</span>,<span class="hljs-string">"hzh"</span>);
</code></pre>
<p>é™¤äº†ç›´æ¥ä½¿ç”¨,æˆ‘ä»¬è¿˜å¯ä»¥ç»§æ‰¿äº‹ä»¶</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> events = <span class="hljs-built_in">require</span>(<span class="hljs-string">"events"</span>);
<span class="hljs-keyword">let</span> util = <span class="hljs-built_in">require</span>(<span class="hljs-string">"util"</span>);

<span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªæ„é€ å‡½æ•°</span>
<span class="hljs-keyword">let</span> <span class="hljs-title class_">Person</span> =  <span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>){
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}   

<span class="hljs-comment">//è®©Personç»§æ‰¿äº‹ä»¶å‘å°„å™¨ inherits(ç»§æ‰¿,è¢«ç»§æ‰¿)</span>
util.<span class="hljs-title function_">inherits</span>(<span class="hljs-title class_">Person</span>,events.<span class="hljs-property">EventEmitter</span>);

<span class="hljs-comment">//åˆ›å»ºpersonå¯¹è±¡</span>
<span class="hljs-keyword">let</span> hzh = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"hzh"</span>);
<span class="hljs-keyword">let</span> yj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"yj"</span>);
<span class="hljs-comment">//åˆ›å»ºæ•°ç»„å­˜æ”¾personå¯¹è±¡</span>
<span class="hljs-keyword">let</span>  personArr = [hzh,yj];
<span class="hljs-comment">//ç»‘å®šäº‹ä»¶åŠäº‹ä»¶å¤„ç†ç¨‹åº</span>
personArr.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">person</span>){
    person.<span class="hljs-title function_">on</span>(<span class="hljs-string">"sayHello"</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params">message</span>){
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"hello my name is "</span>+ person.<span class="hljs-property">name</span> + <span class="hljs-string">":"</span> + message);
    }); 
});
<span class="hljs-comment">//è§¦å‘äº‹ä»¶</span>
hzh.<span class="hljs-title function_">emit</span>(<span class="hljs-string">"sayHello"</span>,<span class="hljs-string">'å¸…æ°”'</span>);
yj.<span class="hljs-title function_">emit</span>(<span class="hljs-string">"sayHello"</span>,<span class="hljs-string">"èå½¼"</span>);
</code></pre>
<h3 data-id="heading-8">æ‹“å±•</h3>
<p>ä¸Šé¢çš„æ˜¯es5ä¹‹å‰ç‰ˆæœ¬çš„å†™æ³•äº†,å’±ä»¬åç»­åŸºæœ¬ä½¿ç”¨es6è¯­æ³•å¼€å‘,ä¸‹é¢æ˜¯es6çš„å†™æ³•,å¯¹æ¯”ä¹‹å‰ç‰ˆæœ¬çš„ä¼˜ç‚¹:<strong>æ›´åŠ çš„æ¸…æ™°</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">EventEmitter</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">"events"</span>);
<span class="hljs-comment">// ä½¿ç”¨ extend ç›´æ¥ç»§æ‰¿ EventEmitter</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">EventEmitter</span> { 
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
        <span class="hljs-variable language_">super</span>();<span class="hljs-comment">//es6æ–°ç‰¹æ€§</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    }
}

<span class="hljs-comment">//åˆ›å»ºpersonå¯¹è±¡</span>
<span class="hljs-keyword">let</span> hzh = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"hzh"</span>);
<span class="hljs-keyword">let</span> yj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"yj"</span>);
<span class="hljs-comment">//åˆ›å»ºæ•°ç»„å­˜æ”¾personå¯¹è±¡</span>
<span class="hljs-keyword">let</span>  personArr = [hzh,yj];
<span class="hljs-comment">//ç»‘å®šäº‹ä»¶åŠäº‹ä»¶å¤„ç†ç¨‹åº</span>
personArr.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">person</span>){
    person.<span class="hljs-title function_">on</span>(<span class="hljs-string">"sayHello"</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params">message</span>){
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"hello my name is "</span>+ person.<span class="hljs-property">name</span> + <span class="hljs-string">":"</span> + message);
    }); 
});
<span class="hljs-comment">//è§¦å‘äº‹ä»¶</span>
hzh.<span class="hljs-title function_">emit</span>(<span class="hljs-string">"sayHello"</span>,<span class="hljs-string">'å¸…æ°”'</span>);
yj.<span class="hljs-title function_">emit</span>(<span class="hljs-string">"sayHello"</span>,<span class="hljs-string">"èå½¼"</span>);
</code></pre>
<h2 data-id="heading-9">6.æ–‡ä»¶è¯»å†™</h2>
<p>åœ¨Nodejsä¸­æœ‰æ–‡ä»¶ç³»ç»Ÿï¼Œæ˜¯å¯¹æœ¬åœ°æ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œï¼Œå½“ç„¶ï¼Œå¦‚æœè¦ä½¿ç”¨æˆ‘ä»¬éœ€è¦å¼•å…¥fså¯¹è±¡</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);
<span class="hljs-comment">//readFileSync(æ–‡ä»¶åœ°å€,ç¼–ç æ ¼å¼) åŒæ­¥è¯»å–æ–‡ä»¶ </span>
<span class="hljs-keyword">let</span> readMe = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">"./readMe.txt"</span>,<span class="hljs-string">'utf-8'</span>);
<span class="hljs-keyword">let</span> writeMe = <span class="hljs-string">"hello yj"</span>;
<span class="hljs-comment">//writeFileSync(æ–‡ä»¶åœ°å€,å†™å…¥å†…å®¹) åŒæ­¥å†™å…¥æ–‡ä»¶,å¦‚æ²¡æœ‰æ–‡ä»¶,åˆ™åˆ›å»ºæ–°æ–‡ä»¶</span>
fs.<span class="hljs-title function_">writeFileSync</span>(<span class="hljs-string">"./writeMe.txt"</span>,writeMe);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(readMe);
</code></pre>
<p>åŒæ—¶ä»–ä¹Ÿæœ‰åŒæ­¥å’Œå¼‚æ­¥çš„é—®é¢˜,fs.readFileæœ¬èº«æ˜¯å¼‚æ­¥æ‰§è¡Œ</p>
<pre><code class="hljs language-js" lang="js">fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">"./readMe.txt"</span>,<span class="hljs-string">'utf-8'</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params">err,data</span>){
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);
});
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"finshed"</span>);
<span class="hljs-comment">//æ§åˆ¶å°è¾“å‡ºç»“æœ</span>
finshed
hello hzh
</code></pre>
<p>å½“æˆ‘ä»¬æ·»åŠ äº†**åŒæ­¥ while **</p>
<pre><code class="hljs language-js" lang="js">fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">"./readMe.txt"</span>,<span class="hljs-string">'utf-8'</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params">err,data</span>){
    <span class="hljs-keyword">if</span>(err){
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è¯»å–æ–‡ä»¶å¤±è´¥"</span>);    
    }<span class="hljs-keyword">else</span>{
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);
    }
});
<span class="hljs-comment">//åœ¨è¿™é‡Œæˆ‘ä»¬ä¼šç­‰å¾…ä¸‰ç§’</span>
<span class="hljs-keyword">let</span> waitTill = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>() + <span class="hljs-number">3</span>*<span class="hljs-number">1000</span>);
<span class="hljs-keyword">while</span>(waitTill &gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()){}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"finshed"</span>);


<span class="hljs-comment">//æ§åˆ¶å°è¾“å‡ºç»“æœ</span>
<span class="hljs-comment">//ç­‰å¾…ä¸‰ç§’ä¹‹å</span>
finshed
hello hzh
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<p>å¯¹è¯»å†™éƒ½ä½¿ç”¨å¼‚æ­¥çš„æ–¹æ¡ˆå¤„ç†</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);
<span class="hljs-keyword">let</span> readMe = fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">"./readMe.txt"</span>,<span class="hljs-string">'utf-8'</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params">err,data</span>){
    fs.<span class="hljs-title function_">writeFile</span>(<span class="hljs-string">"./writeMe.txt"</span>,data,<span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ–‡ä»¶å†™å…¥æˆåŠŸ"</span>);
    });
});
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"finshed"</span>);
</code></pre>
<h3 data-id="heading-10">æ‹“å±•</h3>
<p>ç°ä»£jsç”¨çš„æ›´å¤šçš„ <strong>Promise</strong> + <strong>async/await</strong></p>
<p><strong>Promise</strong> æ˜¯ä¸€ä¸ª<strong>è¡¨ç¤ºå¼‚æ­¥æ“ä½œæœ€ç»ˆå®Œæˆæˆ–å¤±è´¥çš„å¯¹è±¡</strong>ã€‚</p>
<p><strong>Promise</strong> æœ‰ä¸‰ç§çŠ¶æ€ <strong>fulfilled</strong>(æˆåŠŸ) ã€<strong>rejected</strong>(å¤±è´¥) ã€<strong>pending</strong>(ç­‰å¾…)</p>
<p>é€šä¿—ä¸€ç‚¹çš„è¯´æ³•:  resolveè¡¨ç¤ºæˆåŠŸ,rejectè¡¨ç¤ºå¤±è´¥,åªæœ‰æˆåŠŸå’Œå¤±è´¥,ä¸¤è€…ä¸ä¼šåŒæ—¶å‡ºç°</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> fetchData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>)=&gt;</span>{
    <span class="hljs-comment">//pending</span>
    <span class="hljs-keyword">let</span> num = <span class="hljs-number">1</span>
    <span class="hljs-keyword">if</span>(num &gt; <span class="hljs-number">0</span>){
        <span class="hljs-comment">//fulfilled</span>
        <span class="hljs-title function_">resolve</span>(num)
    }<span class="hljs-keyword">else</span>{
        <span class="hljs-comment">//rejected</span>
        <span class="hljs-title function_">reject</span>(<span class="hljs-string">"é”™è¯¯"</span>)
    }
})
</code></pre>
<p>å¸¸ç”¨çš„å°±æ˜¯ <strong>.then()</strong> å’Œ <strong>.catch()</strong>   <strong>.finally()</strong> ä¸å’‹è§</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> fetchData = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,reject</span>)=&gt;</span>{
    <span class="hljs-keyword">let</span> num = <span class="hljs-number">1</span>
    <span class="hljs-keyword">if</span>(num &gt; <span class="hljs-number">0</span>){
        <span class="hljs-title function_">resolve</span>(num)
    }<span class="hljs-keyword">else</span>{
        <span class="hljs-title function_">reject</span>(<span class="hljs-string">"é”™è¯¯"</span>)
    }
    
})

fetchData.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æˆåŠŸ:"</span>, result); <span class="hljs-comment">//è¾“å‡ºç»“æœ æˆåŠŸ:1</span>
    }).<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å¤±è´¥:"</span>, error); <span class="hljs-comment">//è¾“å‡ºç»“æœ å¤±è´¥:é”™è¯¯</span>
    }).<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ“ä½œå®Œæˆ"</span>);
    });

<span class="hljs-comment">//æ§åˆ¶å°ä¸ä¼šåŒæ—¶å‡ºç° æˆåŠŸ:1 å¤±è´¥:é”™è¯¯</span>
</code></pre>
<p><strong>async/await</strong> çœ‹èµ·æ¥åƒåŒæ­¥ï¼Œä½†æœ¬è´¨è¿˜æ˜¯å¼‚æ­¥</p>
<p><strong>await çš„å·¥ä½œæµç¨‹ï¼š</strong></p>
<ol>
<li>æ‰§è¡Œåˆ° <code>await</code> æ—¶ï¼Œå‡½æ•°ä¼š<strong>æš‚åœ</strong></li>
<li>ä½†ä¸æ˜¯é˜»å¡æ•´ä¸ªç¨‹åºï¼Œè€Œæ˜¯<strong>æŠŠæ§åˆ¶æƒäº¤è¿˜ç»™äº‹ä»¶å¾ªç¯</strong></li>
<li>ç­‰å…¶ä»–åŒæ­¥ä»£ç æ‰§è¡Œå®Œåï¼Œæ–‡ä»¶è¯»å–å®Œæˆäº†</li>
<li>äº‹ä»¶å¾ªç¯é‡æ–°æ¿€æ´»è¿™ä¸ª async å‡½æ•°ï¼Œä» await åé¢ç»§ç»­æ‰§è¡Œ</li>
</ol>
<p>çœ‹ä¸‹é¢ä»£ç </p>
<pre><code class="hljs language-js" lang="js">
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"1. è„šæœ¬å¼€å§‹"</span>);

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"2. è¿›å…¥asyncå‡½æ•°"</span>);
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"3. å‡†å¤‡è¯»å–æ–‡ä»¶"</span>);
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> fs.<span class="hljs-property">promises</span>.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'./file.txt'</span>, <span class="hljs-string">'utf8'</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"4. æ–‡ä»¶è¯»å–å®Œæˆ:"</span>, data.<span class="hljs-property">length</span>);
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"5. å‡†å¤‡å†™å…¥æ–‡ä»¶"</span>); 
    <span class="hljs-keyword">await</span> fs.<span class="hljs-property">promises</span>.<span class="hljs-title function_">writeFile</span>(<span class="hljs-string">'./output.txt'</span>, data);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"6. æ–‡ä»¶å†™å…¥å®Œæˆ"</span>);
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"7. è°ƒç”¨asyncå‡½æ•°"</span>);
<span class="hljs-title function_">main</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"8. asyncå‡½æ•°è°ƒç”¨å®Œæ¯•"</span>);

<span class="hljs-comment">// å®é™…è¾“å‡ºé¡ºåºï¼š</span>
<span class="hljs-comment">// 1. è„šæœ¬å¼€å§‹</span>
<span class="hljs-comment">// 7. è°ƒç”¨asyncå‡½æ•°  </span>
<span class="hljs-comment">// 2. è¿›å…¥asyncå‡½æ•°</span>
<span class="hljs-comment">// 3. å‡†å¤‡è¯»å–æ–‡ä»¶</span>
<span class="hljs-comment">// 8. asyncå‡½æ•°è°ƒç”¨å®Œæ¯•</span>
<span class="hljs-comment">// 4. æ–‡ä»¶è¯»å–å®Œæˆ: 123</span>
<span class="hljs-comment">// 5. å‡†å¤‡å†™å…¥æ–‡ä»¶</span>
<span class="hljs-comment">// 6. æ–‡ä»¶å†™å…¥å®Œæˆ</span>
</code></pre>
<p><strong>Promise + async/await çš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>âœ… <strong>ä»£ç æ›´æ¸…æ™°</strong>ï¼šåƒå†™åŒæ­¥ä»£ç ä¸€æ ·å†™å¼‚æ­¥ä»£ç </li>
<li>âœ… <strong>é”™è¯¯å¤„ç†æ›´ç®€å•</strong>ï¼šä½¿ç”¨ try/catch</li>
<li>âœ… <strong>è°ƒè¯•æ›´æ–¹ä¾¿</strong>ï¼šå †æ ˆè·Ÿè¸ªæ›´æ¸…æ™°</li>
<li>âœ… <strong>ç»„åˆæ›´çµæ´»</strong>ï¼šPromise.allã€Promise.race ç­‰</li>
<li>âœ… <strong>ç°ä»£æ ‡å‡†</strong>ï¼šæ˜¯ JavaScript å¼‚æ­¥ç¼–ç¨‹çš„æœªæ¥</li>
</ul>
<h2 data-id="heading-11">7.æµå’Œç®¡é“</h2>
<p>æµçš„æ¦‚å¿µå¹¶ä¸éš¾ç†è§£ï¼Œä¾‹å¦‚ï¼šæˆ‘ä»¬å¹³æ—¶å‰åç«¯äº¤äº’å…¶å®å°±æ˜¯è½¬æ¢æˆæµæ¥è¿›è¡Œäº¤äº’çš„ï¼Œæˆ‘ä»¬ä¹‹å‰ä¹Ÿè®²è¿‡æ–‡ä»¶çš„è¯»å†™ï¼Œæ–‡ä»¶çš„è¯»å†™ä¹Ÿå±äºæµçš„æ“ä½œçš„ä½“ç°ã€‚è¿™æ˜¯å¦‚æœæ–‡ä»¶ç‰¹åˆ«å¤§çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦é‡‡å–bufferå¤„ç†</p>
<p>æˆ‘ä»¬ç°åœ¨å‘½ä»¤è¡Œä¸­æ“ä½œä¸€ä¸ªåŸºç¡€æ“ä½œ</p>
<pre><code class="hljs language-js" lang="js">ls

ls | grep <span class="hljs-title function_">app</span>(æ³¨æ„ app è¦å¯¹åº”ä½ çš„æ–‡ä»¶å æ¯”å¦‚ code.<span class="hljs-property">js</span> å¯¹åº”ä¸º ls | grep code)
</code></pre>
<p>ls | grep app è¿™ä¸ªå‘½ä»¤åœ¨ <strong>linux</strong> æˆ–è€… <strong>mac</strong> æ‰åˆé€‚</p>
<p>å¦‚æœæ˜¯ <strong>window</strong> ,å¯¹åº”å‘½ä»¤åº”è¯¥ä¸º dir | findstr app</p>
<pre><code class="hljs language-js" lang="js">dir | findstr <span class="hljs-title function_">app</span>(æ³¨æ„ app è¦å¯¹åº”ä½ çš„æ–‡ä»¶å æ¯”å¦‚ code.<span class="hljs-property">js</span> å¯¹åº”ä¸º ls | grep code)
</code></pre>
<p>ä¸‹é¢ä»£ç å½“æ‰§è¡Œ node code å‘½ä»¤å</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);
<span class="hljs-keyword">let</span> myReadStream = fs.<span class="hljs-title function_">createReadStream</span>(__dirname + <span class="hljs-string">"/readMe.txt"</span>);

myReadStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params">chunk</span>){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"**********"</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chunk);
});

<span class="hljs-comment">//æ§åˆ¶å°è¾“å‡ºç»“æœ</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Buffer</span> <span class="hljs-attr">68</span> <span class="hljs-attr">65</span> <span class="hljs-attr">6c</span> <span class="hljs-attr">6c</span> <span class="hljs-attr">6f</span> <span class="hljs-attr">20</span> <span class="hljs-attr">68</span> <span class="hljs-attr">7a</span> <span class="hljs-attr">68</span>&gt;</span>
</span></code></pre>
<p>ä¸Šè¿°ä»£ç è¯»åˆ°çš„æ˜¯bufferå¯¹è±¡ï¼Œè¿™ä¹Ÿæ˜¯ä»–æ€§èƒ½æå‡çš„ä¸»è¦åŸå› ã€‚å¦‚æœæ–‡ä»¶è¿‡å¤§ï¼Œä¼šå¤„ç†æˆå¤šä¸ªbufferå¯¹è±¡</p>
<p>å¦‚æœæƒ³ç›´æ¥è¯»å–åˆ°æ•°æ® ,åˆ™å¯ä»¥åŠ ä¸€ä¸ªç¼–ç æ ¼å¼ <strong>utf-8</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);
<span class="hljs-keyword">let</span> myReadStream = fs.<span class="hljs-title function_">createReadStream</span>(__dirname + <span class="hljs-string">"/readMe.txt"</span>,<span class="hljs-string">'utf-8'</span>);<span class="hljs-comment">//æ–°å¢åœ°æ–¹</span>

myReadStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params">chunk</span>){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"**********"</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chunk);
});
<span class="hljs-comment">//æ§åˆ¶å°è¾“å‡ºç»“æœ</span>
hello hzh
</code></pre>
<p>å½“æ•°æ®è¿‡å¤š,ä¼šå¯¼è‡´è¯»å–è¿˜æ²¡æœ‰å®Œæˆ,å°±ç»§ç»­ä¸‹é¢æ“ä½œäº†,å› æ­¤æ”¹å˜ä¸€ä¸‹å†™æ³•</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);
<span class="hljs-keyword">let</span> myReadStream = fs.<span class="hljs-title function_">createReadStream</span>(__dirname + <span class="hljs-string">"/readMe.txt"</span>,<span class="hljs-string">'utf-8'</span>);
<span class="hljs-keyword">let</span> data = <span class="hljs-string">''</span>;
myReadStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params">chunk</span>){
    <span class="hljs-comment">//ç”¨dataå­˜å‚¨æœ€ç»ˆæ•°æ®</span>
    data += chunk;
});
<span class="hljs-comment">// 'end' å½“è¯»å–å®Œæˆæ—¶åœ¨å»è¯»å–data</span>
myReadStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'end'</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);
});
</code></pre>
<p>å†™å…¥çš„å†™æ³•  fs.createWriteStream    myWriteStream.write(data);</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);

<span class="hljs-keyword">let</span> myReadStream = fs.<span class="hljs-title function_">createReadStream</span>(__dirname + <span class="hljs-string">"/readMe.txt"</span>,<span class="hljs-string">'utf-8'</span>);
<span class="hljs-keyword">let</span> myWriteStream = fs.<span class="hljs-title function_">createWriteStream</span>(__dirname + <span class="hljs-string">"/writeMe.txt"</span>);
<span class="hljs-keyword">let</span> data = <span class="hljs-string">""</span>;
myReadStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params">chunk</span>){
    data += chunk;
})
myReadStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'end'</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
    myWriteStream.<span class="hljs-title function_">write</span>(data);
});
</code></pre>
<h3 data-id="heading-12">æ‹“å±•</h3>
<p>æœ‰ä¸€ä¸ª <strong>å‹ç¼©</strong> å’Œ <strong>è§£å‹</strong> çš„æ“ä½œ,æ˜¯å…³äºæœåŠ¡å™¨å¼€å‘çš„æ“ä½œ</p>
<p>å‹ç¼©</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> zlib = <span class="hljs-built_in">require</span>(<span class="hljs-string">"zlib"</span>);
<span class="hljs-keyword">let</span> myReadStream2 = fs.<span class="hljs-title function_">createReadStream</span>(__dirname + <span class="hljs-string">"/readMe.txt"</span>,<span class="hljs-string">'utf-8'</span>);
<span class="hljs-keyword">let</span> myWriteStream2 = fs.<span class="hljs-title function_">createWriteStream</span>(__dirname + <span class="hljs-string">"/readMe.txt.gz"</span>);
<span class="hljs-keyword">let</span> gzip = zlib.<span class="hljs-title function_">createGzip</span>();
myReadStream2.<span class="hljs-title function_">pipe</span>(gzip).<span class="hljs-title function_">pipe</span>(myWriteStream2);
</code></pre>
<p>è§£å‹</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> zlib = <span class="hljs-built_in">require</span>(<span class="hljs-string">"zlib"</span>);
<span class="hljs-keyword">let</span> myReadStream3 = fs.<span class="hljs-title function_">createReadStream</span>(__dirname + <span class="hljs-string">"/readMe.txt.gz"</span>);
<span class="hljs-keyword">let</span> myWriteStream3 = fs.<span class="hljs-title function_">createWriteStream</span>(__dirname + <span class="hljs-string">"/readMe2.txt"</span>);
<span class="hljs-keyword">let</span> gunzip = zlib.<span class="hljs-title function_">createGunzip</span>();
myReadStream3.<span class="hljs-title function_">pipe</span>(gunzip).<span class="hljs-title function_">pipe</span>(myWriteStream3);
</code></pre>
<h2 data-id="heading-13">8.WebæœåŠ¡å™¨è¾“å‡ºå†…å®¹</h2>
<p>ç”¨çš„æœ€å¤šçš„å°±æ˜¯ç”¨Nodeæ„å»ºä¸€ä¸ªæœåŠ¡å™¨ï¼Œå¹¶ä¸”è¾“å‡ºå†…å®¹ï¼Œå†…å®¹è¾“å‡ºç»å¤§å¤šæ•°ä¸ºJSONæ•°æ®</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">"http"</span>);
<span class="hljs-keyword">let</span> server = http.<span class="hljs-title function_">createServer</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">req,res</span>){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'request'</span>)
}
server.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"server is running at http://localhost:3000"</span>);
<span class="hljs-comment">//æ§åˆ¶å°æ‰“å°  ä½†éœ€è¦åœ¨æµè§ˆå™¨ä¸­å¯åŠ¨æœåŠ¡å™¨ åœ¨åœ°å€æ è¾“å…¥ http://localhost:3000</span>
request
</code></pre>
<p>è¾“å‡º <strong>html</strong> æˆ–è€… <strong>çº¯æ–‡æœ¬</strong> æ ¼å¼ {'Content-Type':'text/plain'}</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">"http"</span>);
<span class="hljs-keyword">let</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);
<span class="hljs-keyword">let</span> server = http.<span class="hljs-title function_">createServer</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">req,res</span>){
    <span class="hljs-keyword">let</span> myReadStream = fs.<span class="hljs-title function_">createReadStream</span>(__dirname + <span class="hljs-string">"/index.html"</span>,<span class="hljs-string">'utf-8'</span>);
    res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>,
        <span class="hljs-comment">//çº¯æ–‡æœ¬ã€htmlã€json</span>
        {<span class="hljs-string">'Content-Type'</span>:<span class="hljs-string">'text/plain'</span>}
    );
    myReadStream.<span class="hljs-title function_">pipe</span>(res);
})

server.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"server is running at http://localhost:3000"</span>);
</code></pre>
<p>è§£é‡Š: .pipe()å®ƒçš„ä½œç”¨æ˜¯<strong>è¿æ¥å¯è¯»æµå’Œå¯å†™æµ</strong>ï¼Œå®ç°æ•°æ®çš„è‡ªåŠ¨ä¼ è¾“</p>
<p>è¾“å‡º <strong>json</strong> æ ¼å¼  {'Content-Type':'application/json'}</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">"http"</span>);
<span class="hljs-keyword">let</span> server = http.<span class="hljs-title function_">createServer</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">req,res</span>){
    res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>,
        <span class="hljs-comment">//çº¯æ–‡æœ¬ã€htmlã€json</span>
        {<span class="hljs-string">'Content-Type'</span>:<span class="hljs-string">'application/json'</span>}
    );
    <span class="hljs-keyword">let</span> obj = {
        <span class="hljs-attr">name</span>:<span class="hljs-string">'hzh'</span>,
        <span class="hljs-attr">age</span>:<span class="hljs-number">18</span>
    }
    res.<span class="hljs-title function_">end</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(obj));
})

server.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"server is running at http://localhost:3000"</span>);
</code></pre>
<h2 data-id="heading-14">9.æ¨¡å—åŒ–</h2>
<p>è¿™ä¸ªç›¸å¯¹ç®€å•,å°±æ˜¯æŠŠä¸€ä¸ªåŠŸèƒ½å•ç‹¬ç»™å°è£…èµ·æ¥,ä½¿<strong>ç»“æ„æ›´åŠ æ¸…æ™°</strong>,<strong>æ–¹ä¾¿ç»´æŠ¤</strong>(ä¸‹é¢ä»£ç æ‹†åˆ†æˆä¸‰ä¸ªæ–‡ä»¶:æœåŠ¡å™¨æ–‡ä»¶ã€ æ•°æ®æ–‡ä»¶ã€ä¸»å…¥å£æ–‡ä»¶)</p>
<p>ç”¨ startServer() æ–¹æ³•ç»™ä»£ç å°è£…èµ·æ¥ module.exports å¯¼å‡º</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// server.js æœåŠ¡å™¨æ–‡ä»¶</span>
<span class="hljs-keyword">let</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">"http"</span>);
<span class="hljs-comment">//å¯¼å…¥ data.json æ–‡ä»¶</span>
<span class="hljs-keyword">let</span> data = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./data.json"</span>)
<span class="hljs-keyword">function</span> <span class="hljs-title function_">startServer</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> server = http.<span class="hljs-title function_">createServer</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">req, res</span>) {
        res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>,
            { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> }
        );
        res.<span class="hljs-title function_">end</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));
    })

    server.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"server is running at http://localhost:3000"</span>);
}
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    startServer
};
</code></pre>
<p>æ•°æ®ä¹Ÿå¯ä»¥è¿›è¡Œå•ç‹¬çš„å°è£…</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// data.json æ•°æ®æ–‡ä»¶</span>
{
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"hzh"</span>,
    <span class="hljs-string">"age"</span>: <span class="hljs-number">18</span>
}
</code></pre>
<p>ç„¶å require  å¯¼å…¥ å°±å¯ä»¥ç›´æ¥ä½¿ç”¨é‡Œé¢çš„æ–¹æ³•äº†</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// code.js ä¸»å…¥å£æ–‡ä»¶</span>
<span class="hljs-keyword">const</span> server = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./server'</span>)
server.<span class="hljs-title function_">startServer</span>();
</code></pre>
<h2 data-id="heading-15">10.è·¯ç”±</h2>
<p>åœ¨å®é™…çš„å¼€å‘åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®ä¸åŒçš„åœ°å€è¿”å›ä¸åŒçš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ—¥å¸¸æ‰€è¯´çš„è·¯ç”±æ•ˆæœ</p>
<p>çŸ¥è¯†ç‚¹:request.url ,è·å–å½“å‰è·¯å¾„</p>
<p>å¦‚ <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3000" target="_blank" title="http://localhost:3000" ref="nofollow noopener noreferrer">http://localhost:3000</a> å¯¹åº” request.url = "/"  <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3000%2Fdata" target="_blank" title="http://localhost:3000/data" ref="nofollow noopener noreferrer">http://localhost:3000/data</a> å¯¹åº” request.url = "/data"</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">"http"</span>);
<span class="hljs-keyword">let</span> data = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./data.json'</span>);
<span class="hljs-keyword">let</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);
<span class="hljs-keyword">function</span> <span class="hljs-title function_">startServer</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> server = http.<span class="hljs-title function_">createServer</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">request, res</span>) {
        <span class="hljs-keyword">let</span> url = request.<span class="hljs-property">url</span>;
        <span class="hljs-keyword">if</span> (url === <span class="hljs-string">"/"</span>) {
            res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'text/html'</span> });
            fs.<span class="hljs-title function_">createReadStream</span>(__dirname + <span class="hljs-string">"/hzh.html"</span>, <span class="hljs-string">'utf-8'</span>).<span class="hljs-title function_">pipe</span>(res);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (url === <span class="hljs-string">"/data"</span>) {
            res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> });
            res.<span class="hljs-title function_">end</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));
        } <span class="hljs-keyword">else</span> {
            res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">404</span>, { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'text/html'</span> });
            fs.<span class="hljs-title function_">createReadStream</span>(__dirname + <span class="hljs-string">"/404.html"</span>, <span class="hljs-string">'utf-8'</span>).<span class="hljs-title function_">pipe</span>(res);
        }
    })
    server.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"server is running at http://localhost:3000"</span>);
}
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    startServer
};
</code></pre>
<h2 data-id="heading-16">11.é‡æ„è·¯ç”±ä»£ç </h2>
<p>ä¸Šé¢è¿™ä¸ªè·¯ç”±è¿˜æ˜¯ç•¥å¾®ä¸å¥½,å¦‚æœæˆ‘ä»¬æœ‰ä¸€ç™¾ä¸ªæ¥å£,å…¨å†™åœ¨ server.js çš„è¯,ä¼šååˆ†çš„è‡ƒè‚¿å’Œéš¾ç»´æŠ¤,æ‰€ä»¥è¿›è¡Œä¸€ä¸ªé‡æ„çš„æ“ä½œ</p>
<p>æ–°å»ºhandler.jsæ–‡ä»¶,è¯¥æ–‡ä»¶ä¸“é—¨ <strong>å¤„ç†å…·ä½“çš„ä¸šåŠ¡é€»è¾‘å’Œç”Ÿæˆå“åº”å†…å®¹</strong></p>
<p>æ–°å»º route.jsæ–‡ä»¶,è¯¥æ–‡ä»¶è´Ÿè´£ <strong>URLè·¯ç”±çš„åˆ†å‘å’Œ404å¤„ç†</strong></p>
<p><strong>æ€è·¯è§£æ:</strong></p>
<p>æŠŠåŸå…ˆçš„æ–¹æ³•å•ç‹¬æ”¾åœ¨ä¸€ä¸ªæ¨¡å—,è§£æ„æ›´åŠ æ¸…æ™°,æ›´æ˜“ç»´æŠ¤</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// server.js</span>
<span class="hljs-keyword">if</span> (url === <span class="hljs-string">"/"</span>) {
            res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'text/html'</span> });
            fs.<span class="hljs-title function_">createReadStream</span>(__dirname + <span class="hljs-string">"/hzh.html"</span>, <span class="hljs-string">'utf-8'</span>).<span class="hljs-title function_">pipe</span>(res);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (url === <span class="hljs-string">"/data"</span>) {
            res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> });
            res.<span class="hljs-title function_">end</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));
        } <span class="hljs-keyword">else</span> {
            res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">404</span>, { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'text/html'</span> });
            fs.<span class="hljs-title function_">createReadStream</span>(__dirname + <span class="hljs-string">"/404.html"</span>, <span class="hljs-string">'utf-8'</span>).<span class="hljs-title function_">pipe</span>(res);
        }

<span class="hljs-comment">//å˜æˆ  </span>
<span class="hljs-comment">// handler.js</span>
<span class="hljs-keyword">let</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);

<span class="hljs-keyword">let</span> data = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./data.json'</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">hzh</span>(<span class="hljs-params">response</span>) {
    response.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'text/html'</span> });
    fs.<span class="hljs-title function_">createReadStream</span>(__dirname + <span class="hljs-string">"/hzh.html"</span>, <span class="hljs-string">'utf-8'</span>).<span class="hljs-title function_">pipe</span>(response);
}


<span class="hljs-keyword">function</span> <span class="hljs-title function_">user</span>(<span class="hljs-params">response</span>) {
    response.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> });
    response.<span class="hljs-title function_">end</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data));
};


<span class="hljs-keyword">function</span> <span class="hljs-title function_">list</span>(<span class="hljs-params">response</span>) {
    response.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> });
    <span class="hljs-keyword">let</span> lists = {
        <span class="hljs-string">"users"</span>: <span class="hljs-string">"yj"</span>
    };
    response.<span class="hljs-title function_">end</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(lists));
}

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    hzh,
    user,
    list
};
</code></pre>
<p>code.jså¯¼å…¥  handler æ–¹æ³•,åˆ›å»º handle å¯¹è±¡ æ¥å— handler ä¸­çš„å‡½æ•°,ç„¶åä½œä¸ºå‚æ•°ä¼ é€’ç»™ server.startServer æ–¹æ³•,æŠŠ  route å‡½æ•°ä¹Ÿä¼ é€’è¿‡å»</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//code.js</span>
<span class="hljs-keyword">const</span> server = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./server'</span>)
<span class="hljs-keyword">let</span> handler = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./handler'</span>);
<span class="hljs-keyword">let</span> { route } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./router.js'</span>);
<span class="hljs-comment">//ç”¨æ¥æ¥å— handler æ–¹æ³•</span>
<span class="hljs-keyword">let</span> handle = {}
<span class="hljs-comment">//èµ‹å€¼</span>
handle[<span class="hljs-string">"/"</span>] = handler.<span class="hljs-property">hzh</span>;
handle[<span class="hljs-string">"/data"</span>] = handler.<span class="hljs-property">user</span>;
handle[<span class="hljs-string">"/list"</span>] = handler.<span class="hljs-property">list</span>;
<span class="hljs-comment">//ä¼ é€’ route,handle ä¸¤ä¸ªå‚æ•°</span>
server.<span class="hljs-title function_">startServer</span>(route, handle);
</code></pre>
<p>server.js,è°ƒç”¨ route æ–¹æ³• ,å¹¶ä¼ é€’ä¸‰ä¸ªå‚æ•°,<strong>handle(è·¯ç”±é…ç½®è¡¨)</strong>ã€<strong>request(è¯·æ±‚ä¿¡æ¯)</strong> å’Œ <strong>res(å“åº”å·¥å…·)</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">"http"</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">startServer</span>(<span class="hljs-params">route, handle</span>) {
    <span class="hljs-keyword">let</span> server = http.<span class="hljs-title function_">createServer</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">request, res</span>) {
       <span class="hljs-comment">//è°ƒç”¨æ–¹æ³•,ä¼ é€’ä¸‰ä¸ªå‚æ•°ç»™routeæ–¹æ³•</span>
        <span class="hljs-title function_">route</span>(handle, request, res);
    })
    server.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"server is running at http://localhost:3000"</span>);
}
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    startServer
};
</code></pre>
<p>router.js,æœ€ç»ˆåœ°ç‚¹è·¯ç”±è·³è½¬éƒ¨åˆ†</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">route</span>(<span class="hljs-params">handle, request, response</span>) {
    <span class="hljs-comment">//åˆ¤æ–­ handle[request.url] æ˜¯å¦åœ¨ handler ä¸­æœ‰ä¸€ä¸ªå‡½æ•°</span>
    <span class="hljs-comment">//è¿™ç‚¹éœ€è¦å›é¡¾ä¹‹å‰,éœ€è¦çŸ¥é“è¿™éƒ¨åˆ† handle["/"] = handler.hzh;è€Œå½“æˆ‘ä»¬çš„æµè§ˆå™¨åœ°å€ä¸º http://localhost:3000 æ—¶ request.url = "/"</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> handle[request.<span class="hljs-property">url</span>] === <span class="hljs-string">'function'</span>) {
        <span class="hljs-comment">//å¦‚æœæˆåŠŸ è¿›å…¥handler.hzhæ–¹æ³•ä¸­,ä¼ é€’responseå‚æ•°</span>
        handle[request.<span class="hljs-property">url</span>](response);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">//å¦‚æœhandlerä¸­æ²¡æœ‰è¿™ä¸ªå‡½æ•° åˆ™è·³è½¬è‡³404é¡µé¢</span>
        fs.<span class="hljs-title function_">createReadStream</span>(__dirname + <span class="hljs-string">"/404.html"</span>, <span class="hljs-string">'utf-8'</span>).<span class="hljs-title function_">pipe</span>(response);
    }
}

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    route
}
</code></pre>
<p><strong>ä¼˜ç‚¹:</strong></p>
<ol>
<li><strong>èŒè´£åˆ†ç¦»</strong> - æ¯ä¸ªæ–‡ä»¶æœ‰æ˜ç¡®å•ä¸€çš„è´£ä»»</li>
<li><strong>æ˜“äºç»´æŠ¤</strong> - ä¿®æ”¹ä¸šåŠ¡é€»è¾‘åªéœ€æ”¹handler.jsï¼Œä¿®æ”¹è·¯ç”±åªéœ€æ”¹route.js</li>
<li><strong>å¯æ‰©å±•æ€§</strong> - æ·»åŠ æ–°è·¯ç”±åªéœ€åœ¨handler.jsæ·»åŠ å‡½æ•°ï¼Œåœ¨code.jsæ³¨å†Œå³å¯</li>
<li><strong>ä»£ç å¤ç”¨</strong> - è·¯ç”±é€»è¾‘å’Œä¸šåŠ¡é€»è¾‘å¯ä»¥ç‹¬ç«‹å¤ç”¨</li>
</ol>
<h2 data-id="heading-17">12.ä½¿ç”¨GETæˆ–POSTå‘é€æ•°æ®</h2>
<p>ä»€ä¹ˆæ˜¯ <strong>GET</strong>å’Œ <strong>POST</strong>?</p>
<p><strong>GET çš„è¯·æ±‚ç›®çš„æ˜¯ä»æœåŠ¡å™¨è·å–èµ„æºï¼Œè¿™ä¸ªè¯·æ±‚æœ¬èº«ä¸åº”å¯¹æœåŠ¡å™¨æ•°æ®äº§ç”Ÿä»»ä½•å‰¯ä½œç”¨ã€‚</strong></p>
<p><strong>POST çš„è¯·æ±‚ç›®çš„æ˜¯å‘æœåŠ¡å™¨æäº¤æ•°æ®ï¼Œå¹¶æœŸæœ›æœåŠ¡å™¨æ ¹æ®è¿™äº›æ•°æ®æ‰§è¡Œç›¸åº”çš„å¤„ç†ï¼ˆå¦‚åˆ›å»ºã€æ›´æ–°èµ„æºï¼Œæˆ–æ‰§è¡Œä¸€ä¸ªä¼šäº§ç”Ÿå‰¯ä½œç”¨çš„æŸ¥è¯¢ï¼‰</strong></p>
<p>å›é¡¾ä¹‹å‰çš„ä»£ç ,æˆ‘ä»¬ä¼¼ä¹æ²¡æœ‰åšgetæˆ–è€…postè¯·æ±‚,ç„¶å¹¶éå¦‚æ­¤,ä½†æˆ‘ä»¬æ²¡æœ‰å†™è¯·æ±‚çš„æ—¶å€™,<strong>é»˜è®¤</strong>æ˜¯ get è¯·æ±‚çš„,ä¸‹é¢æ˜¯postè¯·æ±‚å¦‚ä½•å»å†™</p>
<p>hzh.html</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    è·³è½¬è‡³/listé¡µé¢ å‘é€ post è¯·æ±‚
    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"/list"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span>&gt;</span>
        name <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
        password <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"submit"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//server.js</span>
<span class="hljs-keyword">let</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">"http"</span>);
<span class="hljs-keyword">let</span> url = <span class="hljs-built_in">require</span>(<span class="hljs-string">"url"</span>);
<span class="hljs-keyword">let</span> querystring = <span class="hljs-built_in">require</span>(<span class="hljs-string">"querystring"</span>);
<span class="hljs-keyword">function</span> <span class="hljs-title function_">startServer</span>(<span class="hljs-params">route, handle</span>) {
    <span class="hljs-keyword">let</span> server = http.<span class="hljs-title function_">createServer</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">request, res</span>) {
        <span class="hljs-keyword">let</span> pathname = url.<span class="hljs-title function_">parse</span>(request.<span class="hljs-property">url</span>).<span class="hljs-property">pathname</span>;
        <span class="hljs-keyword">let</span> data = []
        request.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
            <span class="hljs-comment">//æ‰“å°é”™è¯¯ä¿¡æ¯</span>
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err);
            <span class="hljs-comment">//å½“æœ‰æ•°æ®åˆ°è¾¾æœåŠ¡å™¨æ—¶ï¼Œdata äº‹ä»¶ä¼šè¢«è§¦å‘</span>
        }).<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function">(<span class="hljs-params">chunk</span>) =&gt;</span> {
            <span class="hljs-comment">//æ¥æ”¶æ•°æ®</span>
            data.<span class="hljs-title function_">push</span>(chunk)
        }).<span class="hljs-title function_">on</span>(<span class="hljs-string">'end'</span>, <span class="hljs-function">() =&gt;</span> {
            <span class="hljs-keyword">if</span> (request.<span class="hljs-property">method</span> === <span class="hljs-string">'POST'</span>) {
                <span class="hljs-comment">//æŠŠå†…å®¹è½¬åŒ–æˆå­—ç¬¦ä¸²  </span>
                <span class="hljs-keyword">let</span> postData = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">concat</span>(data).<span class="hljs-title function_">toString</span>();
                <span class="hljs-comment">//querystring.parseæŠŠ å­—ç¬¦ä¸² è½¬åŒ–æˆ å¯¹è±¡ å½¢å¼</span>
                <span class="hljs-title function_">route</span>(handle, pathname, res, querystring.<span class="hljs-title function_">parse</span>(postData));
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">//è·å–getè¯·æ±‚åé¢çš„å‚æ•° /list?name=abc&amp;age=18 params å°±æ˜¯ { name: 'abc', age: '18' }</span>
                <span class="hljs-keyword">let</span> params = url.<span class="hljs-title function_">parse</span>(request.<span class="hljs-property">url</span>, <span class="hljs-literal">true</span>).<span class="hljs-property">query</span>;
                <span class="hljs-title function_">route</span>(handle, pathname, res, params);
            }
        })


    })
    server.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"server is running at http://localhost:3000"</span>);
}
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    startServer
};


</code></pre>
<p>handler.js ä¸­ list å‡½æ•°</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//handler.js æ¥å—paramså‚æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">list</span>(<span class="hljs-params">response, params</span>) {
    response.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> });
    response.<span class="hljs-title function_">end</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(params));
}
</code></pre>
<p>router.js</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);
<span class="hljs-comment">//æ–°å¢ params </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">route</span>(<span class="hljs-params">handle, request, response, params</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> handle[request] === <span class="hljs-string">'function'</span>) {
        <span class="hljs-comment">//ä¼ é€’paramså‚æ•°</span>
        handle[request](response, params);
    } <span class="hljs-keyword">else</span> {
        fs.<span class="hljs-title function_">createReadStream</span>(__dirname + <span class="hljs-string">"/404.html"</span>, <span class="hljs-string">'utf-8'</span>).<span class="hljs-title function_">pipe</span>(response);
    }
}

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    route
}
</code></pre>
<h2 data-id="heading-18">13.npmå‘½ä»¤</h2>
<h3 data-id="heading-19">å®‰è£…ä¾èµ–</h3>
<p>å½“æˆ‘ä»¬éœ€è¦ç¬¬ä¸‰æ–¹çš„ä¾èµ–æ—¶,å¯ä»¥é€šè¿‡npmè¿›è¡Œä¸‹è½½</p>
<pre><code class="hljs">npm install express
</code></pre>
<h3 data-id="heading-20">cnpmé•œåƒ</h3>
<p>npmæ˜¯åœ¨è¿œç¨‹ä»“åº“ä¸‹è½½ï¼Œæˆ‘ä»¬çŸ¥é“ä»–çš„ä»“åº“å¹¶ä¸åœ¨å›½å†…ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾ä¸€ä¸ªå›½å†…çš„ä»“åº“é•œåƒ</p>
<pre><code class="hljs language-ini" lang="ini">npm install -g cnpm <span class="hljs-attr">--registry</span>=http://registry.npm.taobao.org
</code></pre>
<h3 data-id="heading-21">package.json</h3>
<p>å› ä¸ºnode_modulesæ–‡ä»¶ä¾èµ–æ–‡ä»¶å¤ªå¤šï¼Œè€Œä¸”ä»–ä¹Ÿä¸å±äºæˆ‘ä»¬çš„æºä»£ç ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ä¸Šä¼ æºä»£ç çš„æ—¶å€™å¹¶ä¸ä¼šä¸Šä¼ è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œé‚£ä¹ˆåˆ«äººå¦‚ä½•çŸ¥é“æˆ‘ä»¬å®‰è£…è¿‡äº†å“ªäº›åŒ…å‘¢ï¼Ÿ</p>
<pre><code class="hljs language-csharp" lang="csharp">npm <span class="hljs-keyword">init</span>
</code></pre>
<p>å®‰è£…ä¾èµ–æ—¶,æˆ‘ä»¬å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸ŠåŠ å…¥ <strong>--save</strong> æˆ– <strong>--sage-dev</strong></p>
<pre><code class="hljs language-css" lang="css">npm install <span class="hljs-attr">--save</span> express
npm install <span class="hljs-attr">--save-dev</span> express
</code></pre>
<p>ä¸Šè¿°ä¸¤ç§æ–¹æ³•,åŒºåˆ«åœ¨ <strong>--save</strong> æ˜¯ç”Ÿäº§ç¯å¢ƒ , <strong>--save-dev</strong> æ˜¯å¼€å‘ç¯å¢ƒ</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"express"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^5.2.1"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"gulp"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"5.0.1"</span>
  <span class="hljs-punctuation">}</span>
</code></pre>
<p>æœ‰äº†ä¸Šè¿°æè¿°,æˆ‘ä»¬åˆ é™¤node_modulesåˆ«äººå¯ä»¥ä½¿ç”¨ä¸‹è¿°å‘½ä»¤ç›´æ¥ä¸‹è½½æˆ‘ä»¬ä¹‹å‰çš„ä¾èµ–åŒ…</p>
<pre><code class="hljs">npm install
</code></pre>
<h3 data-id="heading-22">scriptsè„šæœ¬</h3>
<p>æˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªscriptsè„šæœ¬å¯ä»¥ä½¿ç”¨ï¼Œä¸€ä¸ªé¡¹ç›®çš„å…¥å£æ–‡ä»¶ä¸æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥å¦‚æœåˆ«äººæ‹¿åˆ°ä½ çš„ä»£ç ï¼Œä¸çŸ¥é“ä½ çš„å…¥å£æ–‡ä»¶ï¼Œåˆ™æ— æ³•è¿è¡Œä½ çš„é¡¹ç›®ï¼Œä¸‹é¢çš„è„šæœ¬å¯ä»¥æœ‰æ•ˆçš„è§£å†³è¿™ä¸ªé—®é¢˜</p>
<pre><code class="hljs language-json" lang="json"> <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"test"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node code.js"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
</code></pre>
<h2 data-id="heading-23">14.nodemon</h2>
<p>nodemonæ˜¯ä¸€ç§å·¥å…·ï¼Œå¯ä»¥è‡ªåŠ¨æ£€æµ‹åˆ°ç›®å½•ä¸­çš„æ–‡ä»¶æ›´æ”¹æ—¶é€šè¿‡é‡æ–°å¯åŠ¨åº”ç”¨ç¨‹åºæ¥è°ƒè¯•åŸºäºnode.jsçš„åº”ç”¨ç¨‹åºã€‚</p>
<pre><code class="hljs">npm install -g nodemon
</code></pre>
<p>æœ‰äº†è¿™ä¸ªå‘½ä»¤ï¼Œæˆ‘ä»¬å°±ä¸å†éœ€è¦æ¯æ¬¡ä¿®æ”¹å®Œæ¯•ä»£ç è¿›è¡Œé‡å¯äº†ï¼Œä»–å¯ä»¥æ£€æµ‹æ–‡ä»¶çš„æ”¹å˜è€Œè‡ªåŠ¨é‡å¯</p>
<pre><code class="hljs">nodemon app.js
</code></pre>
<p>å½“ç„¶ã€‚nodemonä¸ä»…æœ‰ä»¥ä¸ŠåŠŸèƒ½ï¼Œä»–è¿˜æœ‰å¾ˆå¤šé…ç½®ï¼Œä½†æ˜¯å¯¹äºç›®å‰æˆ‘ä»¬çš„éœ€æ±‚æ¥è¯´ä¸å¤ªéœ€è¦ï¼Œåœ¨è¿™é‡Œä¸åšå™è¿°</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI å†™ UI å¤ªä¸‘ï¼Ÿè¿™ä¸ªskillsè®©å®ƒç§’å˜è®¾è®¡ä¸“å®¶]]></title>    <link>https://juejin.cn/post/7602466689712046095</link>    <guid>https://juejin.cn/post/7602466689712046095</guid>    <pubDate>2026-02-03T13:00:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602466689712046095" data-draft-id="7602472997920440320" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI å†™ UI å¤ªä¸‘ï¼Ÿè¿™ä¸ªskillsè®©å®ƒç§’å˜è®¾è®¡ä¸“å®¶"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-03T13:00:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aZheçš„å…¨æ ˆçŸ¥è¯†åˆ†äº«"/> <meta itemprop="url" content="https://juejin.cn/user/1039471959105228"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI å†™ UI å¤ªä¸‘ï¼Ÿè¿™ä¸ªskillsè®©å®ƒç§’å˜è®¾è®¡ä¸“å®¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1039471959105228/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aZheçš„å…¨æ ˆçŸ¥è¯†åˆ†äº«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T13:00:15.000Z" title="Tue Feb 03 2026 13:00:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æ˜¯å¦å‘ç°ï¼ŒAI å†™çš„ä»£ç é€»è¾‘è™½ç„¶å®Œç¾ï¼Œä½†ç•Œé¢æ€»æ˜¯é€ç€ä¸€è‚¡â€œç¨‹åºå‘˜å‘³â€ï¼Ÿé…è‰²è¾£çœ¼ã€å¸ƒå±€ç”Ÿç¡¬ã€å­—ä½“ä¹±ç”¨â€¦â€¦</p>
<p><strong>UI-UX-Pro-Max-Skill</strong> å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œç”Ÿçš„ã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªä»£ç åº“ï¼Œæ›´æ˜¯ç»™ AI è£…ä¸Šçš„ä¸€ä¸ª<strong>ä¸“ä¸šè®¾è®¡å¤§è„‘</strong>ã€‚å®ƒåŒ…å« <strong>67+ UI é£æ ¼</strong>ã€<strong>96+ è¡Œä¸šé…è‰²</strong> å’Œ <strong>100+ æ¨ç†è§„åˆ™</strong>ï¼Œè®© AI èƒ½å¤Ÿåƒèµ„æ·±è®¾è®¡å¸ˆä¸€æ ·æ€è€ƒã€‚</p>
<p>æœ¬æ–‡æ•™ä½  <strong>30ç§’å®‰è£…</strong>ï¼Œ<strong>3åˆ†é’Ÿä¸Šæ‰‹</strong>ï¼Œè®©ä½ çš„ AI äº§å‡ºä¸“ä¸šçº§ UIã€‚</p>
<h2 data-id="heading-0">1. æé€Ÿå®‰è£… (30ç§’)</h2>
<p>ä¸éœ€è¦ä¸‹è½½æºç ï¼Œä¸éœ€è¦é…ç½® Python ç¯å¢ƒï¼Œç›´æ¥ç”¨ CLI å·¥å…·ä¸€é”®é›†æˆã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å…¨å±€å®‰è£…å·¥å…·</span>
npm install -g uipro-cli

<span class="hljs-comment"># 2. ä¸ºä½ çš„ AI åŠ©æ‰‹æ³¨å…¥çµé­‚ (æŒ‰éœ€é€‰æ‹©)</span>
uipro init --ai claude      <span class="hljs-comment"># Claude Code ç”¨æˆ·</span>
uipro init --ai trae        <span class="hljs-comment"># Trae ç”¨æˆ·</span>
uipro init --ai cursor      <span class="hljs-comment"># Cursor ç”¨æˆ·</span>
uipro init --ai windsurf    <span class="hljs-comment"># Windsurf ç”¨æˆ·</span>
</code></pre>
<p><em>çœ‹åˆ° <code>Success</code> æç¤ºåï¼Œä½ çš„ AI å°±å·²ç»å­¦ä¼šè¿™é¡¹æŠ€èƒ½äº†ï¼</em></p>
<h2 data-id="heading-1">2. å®æˆ˜ç”¨æ³• (ç›´æ¥æŠ„ä½œä¸š)</h2>
<p>å®‰è£…å¥½åï¼Œä½ <strong>ä¸éœ€è¦</strong>æ•²ä»»ä½•å¤æ‚çš„å‘½ä»¤ï¼Œåªéœ€è¦å­¦ä¼šæ€ä¹ˆè·Ÿ AI <strong>â€œè¯´é»‘è¯â€</strong>ã€‚</p>
<h3 data-id="heading-2">åœºæ™¯ Aï¼šä»é›¶è®¾è®¡ä¸€ä¸ªæ–°äº§å“ (æœ€å¸¸ç”¨)</h3>
<p>å½“ä½ éœ€è¦ AI å†™ä¸€ä¸ªå®Œæ•´çš„é¡µé¢æ—¶ï¼Œç›´æ¥å¥—ç”¨è¿™ä¸ªå…¬å¼ï¼š</p>
<blockquote>
<p><strong>Prompt å…¬å¼</strong>ï¼š<code>äº§å“ç±»å‹</code> + <code>è¡Œä¸š/é£æ ¼</code> + <code>ç”Ÿæˆè®¾è®¡ç³»ç»Ÿ</code></p>
</blockquote>
<p><strong>ç›´æ¥å¤åˆ¶è¿™æ®µè¯ç»™ AIï¼š</strong></p>
<blockquote>
<p>"å¸®æˆ‘è®¾è®¡ä¸€ä¸ª<strong>å® ç‰©é¢†å…» App</strong> çš„è½åœ°é¡µï¼Œé£æ ¼è¦<strong>æ¸©é¦¨ã€å¯çˆ±</strong>ã€‚è¯·å…ˆåŸºäº UI-UX-Pro-Max ç”Ÿæˆä¸€å¥—è®¾è®¡ç³»ç»Ÿï¼Œç„¶åå†å†™ä»£ç ã€‚"
è¿™æ˜¯æˆ‘ä¸€å¥è¯ç”Ÿæˆçš„æ•ˆæœï¼Œå®Œå…¨æ²¡æœ‰å¾®è°ƒï¼Œå¦‚æœå†è°ƒæ•´ä¸€ä¸‹ç»†èŠ‚çš„è¯ï¼Œå¯ä»¥æƒ³è±¡æœ‰å¤šä¹ˆç‚¸è£‚å§ï¼ï¼ï¼ï¼</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a34f002a153b4f80ae7332448e668dfe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYVpoZeeahOWFqOagiOefpeivhuWIhuS6qw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770728415&amp;x-signature=VxDq2cdh8P%2FhFcBbILEXs4ZTPao%3D" alt="image.png" loading="lazy"/>
<strong>AI çš„ååº”ï¼š</strong></p>
<ol>
<li><strong>è‡ªåŠ¨æ¨ç†</strong>ï¼šè¯†åˆ«åˆ°â€œå® ç‰©â€ï¼Œè‡ªåŠ¨æ¨è <strong>åœ†è§’å¡ç‰‡ (Claymorphism)</strong> é£æ ¼ã€‚</li>
<li><strong>è‡ªåŠ¨é…è‰²</strong>ï¼šç”Ÿæˆ <strong>æš–é»„ (#F59E0B)</strong> æ­é… <strong>æŸ”ç™½</strong> çš„é…è‰²æ–¹æ¡ˆã€‚</li>
<li><strong>è‡ªåŠ¨æ’ç‰ˆ</strong>ï¼šé€‰æ‹© <strong>Nunito (åœ†ä½“)</strong> å­—ä½“ã€‚</li>
<li><strong>ç”Ÿæˆä»£ç </strong>ï¼šäº§å‡ºå®Œå…¨ç¬¦åˆä¸Šè¿°è§„èŒƒçš„ Tailwind ä»£ç ã€‚</li>
</ol>
<h3 data-id="heading-3">åœºæ™¯ Bï¼šåªæƒ³è¦ä¸ªé…è‰²/çµæ„Ÿ</h3>
<p>ä½ ä¸éœ€è¦å†™ä»£ç ï¼Œåªæƒ³è®© AI ç»™ç‚¹è®¾è®¡å»ºè®®ï¼š</p>
<p><strong>ç›´æ¥é—® AIï¼š</strong></p>
<blockquote>
<p>"é€‚åˆ<strong>é‡‘èç§‘æŠ€ (Fintech)</strong> äº§å“çš„é…è‰²æ–¹æ¡ˆæœ‰å“ªäº›ï¼Ÿ"
"å¸®æˆ‘æ‰¾å‡ ä¸ªé€‚åˆ<strong>èµ›åšæœ‹å…‹é£æ ¼</strong>çš„å­—ä½“æ­é…ã€‚"</p>
</blockquote>
<h3 data-id="heading-4">åœºæ™¯ Cï¼šå›¢é˜Ÿå¼€å‘ï¼Œç»Ÿä¸€é£æ ¼ (è¿›é˜¶)</h3>
<p>ä¸ºäº†é˜²æ­¢ AI ä»Šå¤©å†™å‡º A é£æ ¼ï¼Œæ˜å¤©å†™å‡º B é£æ ¼ï¼Œä½ å¯ä»¥è®©å®ƒæŠŠè§„èŒƒ<strong>å­˜ä¸‹æ¥</strong>ã€‚</p>
<p><strong>ç›´æ¥å¯¹ AI è¯´ï¼š</strong></p>
<blockquote>
<p>"ä¸ºæˆ‘çš„ <strong>SaaS åå°</strong>ç”Ÿæˆä¸€å¥—è®¾è®¡ç³»ç»Ÿï¼Œå¹¶<strong>ä¿å­˜ä¸º <code>design-system.md</code> æ–‡ä»¶</strong>ã€‚ä»¥åçš„è®¾è®¡éƒ½å‚è€ƒè¿™ä¸ªæ–‡ä»¶ã€‚"</p>
</blockquote>
<h2 data-id="heading-5">3. åŸç†è§£æï¼šå®ƒä¸ºä»€ä¹ˆè¿™ä¹ˆèªæ˜ï¼Ÿ</h2>
<p>å¾ˆå¤šåŒå­¦æ‹…å¿ƒï¼šâ€œè£…äº†è¿™ä¸ªæŠ€èƒ½ï¼Œä¼šä¸ä¼šè®© AI å˜æ…¢ï¼Ÿä¼šä¸ä¼šæµªè´¹æˆ‘çš„ Tokenï¼Ÿâ€</p>
<p><strong>å®Œå…¨ä¸ä¼šï¼</strong> è¿™ä¸ªæŠ€èƒ½é‡‡ç”¨äº†**â€œæ¸è¿›å¼æŠ«éœ²â€ (Progressive Disclosure)** çš„è®¾è®¡ç†å¿µï¼Œç®€å•è¯´å°±æ˜¯**â€œå¹³æ—¶è£…ç¡ï¼Œå«å®ƒæ‰é†’â€**ï¼š</p>
<ol>
<li><strong>å¹³æ—¶é™é»˜</strong>ï¼šå½“ä½ èŠæ™®é€šä»£ç ï¼ˆå¦‚â€œå†™ä¸ªæ’åºç®—æ³•â€ï¼‰æ—¶ï¼ŒæŠ€èƒ½<strong>å®Œå…¨ä¸åŠ è½½</strong>ï¼Œä¸å ç”¨ä»»ä½• Tokenã€‚</li>
<li><strong>æŒ‰éœ€è§¦å‘</strong>ï¼šåªæœ‰å½“ä½ æ˜ç¡®æåˆ°â€œè®¾è®¡â€ã€â€œç•Œé¢â€ã€â€œUIâ€ç­‰å…³é”®è¯æ—¶ï¼Œå®ƒæ‰ä¼šâ€œé†’æ¥â€ã€‚</li>
<li><strong>ç²¾å‡†æ³¨å…¥</strong>ï¼šå®ƒä¸ä¼šæŠŠæ•´ä¸ªæ•°æ®åº“å¡ç»™ AIï¼Œè€Œæ˜¯åªæå–ä½ å½“å‰éœ€è¦çš„ï¼ˆæ¯”å¦‚åªæå–â€œåŒ»ç–—è¡Œä¸šé…è‰²â€ï¼‰ï¼Œæœ€å¤§ç¨‹åº¦çœé’±ã€‚</li>
</ol>
<p><strong>ç®€å•è¯´ï¼šå®ƒå°±æ˜¯ AI çš„â€œå¤–æŒ‚å¤§è„‘â€ï¼Œå¹³æ—¶éšèº«ï¼Œåªåœ¨ä½ éœ€è¦è®¾è®¡æ—¶æ‰é—ªç°ã€‚</strong></p>
<h2 data-id="heading-6">4. å„å¹³å°ä½¿ç”¨å°è´´å£«</h2>
<p>è™½ç„¶æ ¸å¿ƒä½“éªŒä¸€è‡´ï¼Œä½†ä¸åŒ AI å·¥å…·ç•¥æœ‰å·®å¼‚ï¼š</p>

























<table><thead><tr><th align="left">AI å·¥å…·</th><th align="left">å…³é”®æ“ä½œ</th></tr></thead><tbody><tr><td align="left"><strong>Claude Code</strong></td><td align="left"><strong>é›¶æ“ä½œ</strong>ã€‚å®‰è£…æ’ä»¶åï¼Œç›´æ¥å¯¹è¯å³å¯è§¦å‘ã€‚</td></tr><tr><td align="left"><strong>Trae</strong></td><td align="left">å¿…é¡»åˆ‡æ¢åˆ° <strong>SOLO æ¨¡å¼</strong>ï¼ŒæŠ€èƒ½æ‰ä¼šç”Ÿæ•ˆã€‚</td></tr><tr><td align="left"><strong>Cursor / Windsurf</strong></td><td align="left">åˆå§‹åŒ–åï¼ŒAI ä¼šè‡ªåŠ¨è¯»å–é…ç½®ï¼Œç›´æ¥å¯¹è¯å³å¯ã€‚</td></tr><tr><td align="left"><strong>Codex</strong></td><td align="left">æ”¯æŒ <strong>Auto-activate</strong>ï¼Œç›´æ¥å¯¹è¯å³å¯ã€‚</td></tr></tbody></table>
<h2 data-id="heading-7">5. é¿å‘æŒ‡å—</h2>
<ol>
<li><strong>ä¸è¦æ‰‹åŠ¨è·‘è„šæœ¬</strong>ï¼šè™½ç„¶é¡¹ç›®é‡Œæœ‰å¾ˆå¤š Python è„šæœ¬ï¼Œä½†é‚£æ˜¯ç»™ AI ç”¨çš„ï¼Œä½ ä¸éœ€è¦è‡ªå·±å»ç»ˆç«¯é‡Œæ•² <code>python search.py...</code>ã€‚</li>
<li><strong>å¤šç»™ä¸šåŠ¡èƒŒæ™¯</strong>ï¼šä¸è¦åªè¯´â€œè®¾è®¡ä¸ªç½‘é¡µâ€ã€‚è¯´â€œè®¾è®¡ä¸ª<strong>åŒ»ç–—</strong>ç½‘é¡µâ€æˆ–â€œè®¾è®¡ä¸ª<strong>æ¸¸æˆ</strong>ç½‘é¡µâ€ï¼ŒAI è°ƒç”¨çš„è®¾è®¡è§„åˆ™ä¼šå®Œå…¨ä¸åŒï¼ˆåŒ»ç–—=è“/ç™½/æ´å‡€ï¼›æ¸¸æˆ=é»‘/ç´«/é…·ç‚«ï¼‰ã€‚</li>
<li><strong>æ£€æŸ¥åæ¨¡å¼</strong>ï¼šè¯¥æŠ€èƒ½ä¼šè‡ªåŠ¨å¸®ä½ æ£€æŸ¥ UX é—®é¢˜ï¼ˆæ¯”å¦‚â€œä¸è¦ç”¨ Emoji å½“å›¾æ ‡â€ï¼‰ï¼Œå¦‚æœ AI çŠ¯äº†é”™ï¼Œç›´æ¥æé†’å®ƒï¼šâ€œæ£€æŸ¥ä¸€ä¸‹ Anti-patternsâ€ã€‚</li>
</ol>
<hr/>
<p><strong>æ€»ç»“</strong>ï¼šå®‰è£… <code>uipro-cli</code> -&gt; åˆå§‹åŒ– -&gt; å‘Šè¯‰ AI ä½ è¦åšä»€ä¹ˆ -&gt; äº«å—ä¸“ä¸šçº§ UIã€‚å°±è¿™ä¹ˆç®€å•ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[THREE.js å…‰ç…§- 2]]></title>    <link>https://juejin.cn/post/7602503154505203753</link>    <guid>https://juejin.cn/post/7602503154505203753</guid>    <pubDate>2026-02-03T13:32:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602503154505203753" data-draft-id="7602401081265209380" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="THREE.js å…‰ç…§-  2"/> <meta itemprop="keywords" content="å‰ç«¯,three.js,WebGL"/> <meta itemprop="datePublished" content="2026-02-03T13:32:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¾™çŒ«ä¸çƒ­"/> <meta itemprop="url" content="https://juejin.cn/user/4098608612778654"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            THREE.js å…‰ç…§-  2
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4098608612778654/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¾™çŒ«ä¸çƒ­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T13:32:47.000Z" title="Tue Feb 03 2026 13:32:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å‰ç½®è¡¥å……</h2>
<p>åœ¨å‰æ–‡çš„åŸºç¡€ä»£ç ä¹‹ä¸Š, åˆæ–°å¢äº†äº›ä»£ç </p>
<pre><code class="hljs language-js" lang="js">
  <span class="hljs-comment">// å¼§åº¦è½¬åº¦æ•°</span>
  <span class="hljs-keyword">class</span> <span class="hljs-title class_">DegRadHelper</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">obj, prop</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">obj</span> = obj;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">prop</span> = prop;
    }
    <span class="hljs-keyword">get</span> <span class="hljs-title function_">value</span>() {
      <span class="hljs-keyword">return</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">MathUtils</span>.<span class="hljs-title function_">radToDeg</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">obj</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">prop</span>]);
    }
    <span class="hljs-keyword">set</span> <span class="hljs-title function_">value</span>(<span class="hljs-params">v</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">obj</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">prop</span>] = <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">MathUtils</span>.<span class="hljs-title function_">degToRad</span>(v);
    }
  }

  <span class="hljs-comment">// gui å¿«æ·ç»‘å®šå¯¹è±¡çš„ x y zå±æ€§</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">makeXYZGUI</span>(<span class="hljs-params">gui, vector3, name, onChangeFn</span>) {
    <span class="hljs-keyword">const</span> folder = gui.<span class="hljs-title function_">addFolder</span>(name);
    folder.<span class="hljs-title function_">add</span>(vector3, <span class="hljs-string">"x"</span>, -<span class="hljs-number">10</span>, <span class="hljs-number">10</span>).<span class="hljs-title function_">onChange</span>(onChangeFn);
    folder.<span class="hljs-title function_">add</span>(vector3, <span class="hljs-string">"y"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">10</span>).<span class="hljs-title function_">onChange</span>(onChangeFn);
    folder.<span class="hljs-title function_">add</span>(vector3, <span class="hljs-string">"z"</span>, -<span class="hljs-number">10</span>, <span class="hljs-number">10</span>).<span class="hljs-title function_">onChange</span>(onChangeFn);
    folder.<span class="hljs-title function_">open</span>();
  }
</code></pre>
<hr/>
<h2 data-id="heading-1"><a href="https://link.juejin.cn?target=https%3A%2F%2Fthreejs.org%2Fdocs%2F%23api%2Fzh%2Flights%2FPointLight" target="_blank" title="https://threejs.org/docs/#api/zh/lights/PointLight" ref="nofollow noopener noreferrer"><code>PointLight</code></a> ç‚¹å…‰æº</h2>
<p>ç‚¹å…‰æº, è¡¨ç¤ºä»ä¸€ä¸ªç‚¹æœå‘å„ä¸ªæ–¹å‘å‘å°„å‡ºå…‰çº¿çš„ä¸€ç§å…‰ç…§æ•ˆæœ</p>
<p>å¸¸ç”¨äºæ¨¡æ‹Ÿç¯æ³¡ç¯å…‰, æœ‰é˜´å½±</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-keyword">const</span> pointColor = <span class="hljs-number">0xffffff</span>;
  <span class="hljs-keyword">const</span> pointerIntensity = <span class="hljs-number">150</span>;
  <span class="hljs-keyword">const</span> pointLight = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PointLight</span>(pointColor, pointerIntensity);
  pointLight.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>);
  scene.<span class="hljs-title function_">add</span>(pointLight);

  <span class="hljs-comment">// ç‚¹å…‰æºè¾…åŠ©å™¨</span>
  <span class="hljs-keyword">const</span> pointLightHelper = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PointLightHelper</span>(pointLight);
  scene.<span class="hljs-title function_">add</span>(pointLightHelper);
  
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">updatePointLight</span>(<span class="hljs-params"/>) {
   <span class="hljs-comment">// å› ä¸ºç‚¹å…‰æºæ²¡æœ‰Â `target`Â å±æ€§ï¼Œæ‰€ä»¥Â `onChange`Â å‡½æ•°å¯ä»¥ç®€åŒ–ã€‚</span>
    pointLightHelper.<span class="hljs-title function_">update</span>();
  }

  <span class="hljs-comment">// æ·»åŠ  gui å±æ€§æ§åˆ¶</span>
  <span class="hljs-keyword">const</span> pointLightFolder = gui.<span class="hljs-title function_">addFolder</span>(<span class="hljs-string">"ç‚¹å…‰æºæ§åˆ¶"</span>);
  gui.<span class="hljs-title function_">addColor</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ColorGUIHelper</span>(pointLight, <span class="hljs-string">"color"</span>), <span class="hljs-string">"value"</span>).<span class="hljs-title function_">name</span>(<span class="hljs-string">"color"</span>);
  gui.<span class="hljs-title function_">add</span>(pointLight, <span class="hljs-string">"intensity"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">250</span>, <span class="hljs-number">1</span>);
  gui.<span class="hljs-title function_">add</span>(pointLight, <span class="hljs-string">"distance"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">40</span>).<span class="hljs-title function_">onChange</span>(updatePointLight);
  <span class="hljs-title function_">makeXYZGUI</span>(pointLightFolder, pointLight.<span class="hljs-property">position</span>, <span class="hljs-string">"position"</span>, updatePointLight);
  
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/272dc31be014483aaa68fbbb1b65bc98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z54yr5LiN54Ot:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770730366&amp;x-signature=dXTMCIz%2Bs6zbPzb3jn1blBLTXW8%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-2"><a href="https://link.juejin.cn?target=https%3A%2F%2Fthreejs.org%2Fdocs%2F%23api%2Fzh%2Flights%2FSpotLight" target="_blank" title="https://threejs.org/docs/#api/zh/lights/SpotLight" ref="nofollow noopener noreferrer"><code>SpotLight</code></a>èšå…‰ç¯</h2>
<p>èšå…‰ç¯å…‰æº, å¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªç‚¹å…‰æºè¢«ä¸€ä¸ªåœ†é”¥ä½“é™åˆ¶ä½äº†å…‰ç…§èŒƒå›´</p>
<p>ä½†å®é™…æœ‰ä¸¤ä¸ªåœ†é”¥, å†…åœ†é”¥å’Œå¤–åœ†é”¥, å…‰ç…§å¼ºåº¦åœ¨ä¸¤ä¸ªé”¥ä½“é—´ä»è®¾å®šçš„å¼ºåº¦é€’å‡åˆ° 0</p>
<p>ç±»ä¼¼æ–¹å‘å…‰ä¸€æ ·éœ€è¦ä¸€ä¸ªç›®æ ‡ç‚¹, å…‰æºä½ç½®æ˜¯åœ†é”¥çš„é¡¶ç‚¹, ç›®æ ‡ç‚¹å¤„äºåœ†é”¥çš„ä¸­è½´çº¿ä¸Š</p>
<p>å¸¸ç”¨äºèšå…‰ç¯ã€æ‰‹ç”µç­’ç¯å…‰, æœ‰é˜´å½±</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-keyword">const</span> spotColor = <span class="hljs-number">0xffffff</span>;
  <span class="hljs-keyword">const</span> spotIntensity = <span class="hljs-number">150</span>;
  <span class="hljs-keyword">const</span> spotLight = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">SpotLight</span>(spotColor, spotIntensity);
  spotLight.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>);
  spotLight.<span class="hljs-property">angle</span> = <span class="hljs-number">10</span>; <span class="hljs-comment">// èšå…‰ç¯ç…§å°„è§’åº¦ï¼Œå•ä½ï¼šå¼§åº¦</span>
  scene.<span class="hljs-title function_">add</span>(spotLight);
  <span class="hljs-comment">// è¦å°†ç›®æ ‡ä½ç½®æ›´æ”¹ä¸ºé»˜è®¤å€¼ä»¥å¤–çš„ä»»ä½•ä½ç½®ï¼Œå¿…é¡»å°†å…¶æ·»åŠ åˆ°åœºæ™¯ä¸­ã€‚</span>
  scene.<span class="hljs-title function_">add</span>(spotLight.<span class="hljs-property">target</span>);

  <span class="hljs-keyword">const</span> spotHelper = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">SpotLightHelper</span>(spotLight);
  scene.<span class="hljs-title function_">add</span>(spotHelper);
  
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateSpotLight</span>(<span class="hljs-params"/>) {
    spotHelper.<span class="hljs-title function_">update</span>();
  }
    
   <span class="hljs-comment">// æ·»åŠ  gui æ§åˆ¶</span>
  <span class="hljs-keyword">const</span> spotLightFolder = gui.<span class="hljs-title function_">addFolder</span>(<span class="hljs-string">"èšå…‰ç¯æ§åˆ¶"</span>);
  <span class="hljs-comment">// èšå…‰ç¯çš„åœ†é”¥é¡¶éƒ¨å¤§å°é€šè¿‡ angle å±æ€§æ§åˆ¶</span>
  <span class="hljs-comment">// ä»¥å¼§åº¦ä½œå•ä½</span>
  spotLightFolder
    .<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DegRadHelper</span>(spotLight, <span class="hljs-string">"angle"</span>), <span class="hljs-string">"value"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">90</span>)
    .<span class="hljs-title function_">name</span>(<span class="hljs-string">"angle"</span>)
    .<span class="hljs-title function_">onChange</span>(updateSpotLight);
    
  <span class="hljs-comment">// penumbraä¸º 0 æ—¶, å†…å¤–åœ†é”¥å¤§å°ä¸€è‡´</span>
  <span class="hljs-comment">// penumbraä¸º 1 æ—¶, å†…åœ†é”¥å¤§å°ä¸º 0, å…‰ç…§å¼ºåº¦ä»ä¸­è½´çº¿å¼€å§‹å‘å¤–é€’å‡</span>
  <span class="hljs-comment">// penumbra ä¸º 0.5 æ—¶,å…‰ç…§å¼ºåº¦ä»å¤–åœ†é”¥åŠå¾„çš„ä¸­ç‚¹å¤„å¼€å§‹å¾€å¤–é€’å‡</span>
  <span class="hljs-comment">// å…·ä½“è¡¨ç°ä¸ºèšå…‰ç¯æ‰“å‘çš„ä½ç½®çš„å…‰æ˜¯é”åˆ©è¿˜æ˜¯æ¨¡ç³Š</span>
  spotLightFolder.<span class="hljs-title function_">add</span>(spotLight, <span class="hljs-string">"penumbra"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0.01</span>).<span class="hljs-title function_">onChange</span>(updateSpotLight);
  <span class="hljs-title function_">makeXYZGUI</span>(spotLightFolder, spotLight.<span class="hljs-property">position</span>, <span class="hljs-string">"position"</span>, updateSpotLight);
  

</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea7e8a32c04347c5bb5132814c96a254~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z54yr5LiN54Ot:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770730366&amp;x-signature=0mP3ynTJ2gRktPCLIhyVWPfAgds%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b664ae5e6dc4f9590bfeac6b51262be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z54yr5LiN54Ot:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770730366&amp;x-signature=u4tV7MJP3JRjRfHGNcCf5Bkv8To%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-3"><a href="https://link.juejin.cn?target=https%3A%2F%2Fthreejs.org%2Fdocs%2F%23api%2Fzh%2Flights%2FRectAreaLight" target="_blank" title="https://threejs.org/docs/#api/zh/lights/RectAreaLight" ref="nofollow noopener noreferrer"><code>RectAreaLight</code></a> çŸ©é˜µåŒºåŸŸå…‰æº</h2>
<p>çŸ©å½¢åŒºåŸŸå…‰æº, è¡¨ç¤ºä¸€ä¸ªçŸ©å½¢åŒºåŸŸå‘å°„å‡ºæ¥çš„å…‰ç…§</p>
<p>ä¾‹å¦‚é•¿æ¡æ—¥å…‰ç¯æˆ–å¤©èŠ±ç£¨ç ‚ç»ç’ƒé€è¿›æ¥çš„è‡ªç„¶å…‰</p>
<p>åªèƒ½å½±å“<code>MeshStandardMaterial</code> å’Œ <code>MeshPhysicalMaterial</code></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç”±äºå…‰ç…§è®¡ç®—å¤æ‚, å°†å…¶ç€è‰²åˆ†ç¦»åˆ°å•ç‹¬åº“ä¸­, éœ€è¦æ‰‹åŠ¨å¼•å…¥ RectAreaLightUniformsLib å’Œ RectAreaLightHelper</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RectAreaLightUniformsLib</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"three/addons/lights/RectAreaLightUniformsLib.js"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RectAreaLightHelper</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"three/addons/helpers/RectAreaLightHelper.js"</span>;
<span class="hljs-comment">// åˆå§‹åŒ–</span>
<span class="hljs-title class_">RectAreaLightUniformsLib</span>.<span class="hljs-title function_">init</span>();


<span class="hljs-keyword">const</span> rectColor = <span class="hljs-number">0xffffff</span>;
<span class="hljs-keyword">const</span> rectIntensity = <span class="hljs-number">5</span>;
<span class="hljs-keyword">const</span> rectWidth = <span class="hljs-number">10</span>;
<span class="hljs-keyword">const</span> rectHeight = <span class="hljs-number">4</span>;
<span class="hljs-keyword">const</span> rectLight = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">RectAreaLight</span>(rectColor, rectIntensity, rectWidth, rectHeight);
rectLight.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-number">0</span>);

<span class="hljs-comment">// ä¸å…¶ä»–å…‰çº¿ä¸åŒ, rectAreaLight ä¸æ˜¯ä½¿ç”¨ç›®æ ‡ç‚¹ï¼ˆ`target`ï¼‰ï¼Œè€Œæ˜¯ä½¿ç”¨è‡ªèº«çš„æ—‹è½¬è§’åº¦æ¥ç¡®å®šå…‰ç…§æ–¹å‘ã€‚</span>
rectLight.<span class="hljs-property">rotation</span>.<span class="hljs-property">x</span> = <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">MathUtils</span>.<span class="hljs-title function_">degToRad</span>(-<span class="hljs-number">90</span>);
scene.<span class="hljs-title function_">add</span>(rectLight);

<span class="hljs-comment">// å¦å¤–ï¼ŒçŸ©å½¢å…‰çš„è¾…åŠ©å¯¹è±¡åº”è¯¥æ·»åŠ ä¸ºå…‰ç…§çš„å­èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯æ·»åŠ ä¸ºåœºæ™¯çš„å­èŠ‚ç‚¹ã€‚</span>
<span class="hljs-keyword">const</span> rectHelper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RectAreaLightHelper</span>(rectLight);
rectLight.<span class="hljs-title function_">add</span>(rectHelper);


<span class="hljs-comment">// gui å±æ€§æ§åˆ¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">updateRectLight</span>(<span class="hljs-params"/>) {
    rectLight.<span class="hljs-title function_">updateMatrixWorld</span>();
  }
  <span class="hljs-keyword">const</span> rectLightFolder = gui.<span class="hljs-title function_">addFolder</span>(<span class="hljs-string">"çŸ©å½¢åŒºåŸŸå…‰æ§åˆ¶"</span>);
  rectLightFolder.<span class="hljs-title function_">addColor</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ColorGUIHelper</span>(rectLight, <span class="hljs-string">"color"</span>), <span class="hljs-string">"value"</span>).<span class="hljs-title function_">name</span>(<span class="hljs-string">"color"</span>);
  rectLightFolder.<span class="hljs-title function_">add</span>(rectLight, <span class="hljs-string">"intensity"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">10</span>).<span class="hljs-title function_">onChange</span>(updateRectLight);
  rectLightFolder.<span class="hljs-title function_">add</span>(rectLight, <span class="hljs-string">"width"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">20</span>).<span class="hljs-title function_">onChange</span>(updateRectLight);
  rectLightFolder.<span class="hljs-title function_">add</span>(rectLight, <span class="hljs-string">"height"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">20</span>).<span class="hljs-title function_">onChange</span>(updateRectLight);
  <span class="hljs-title function_">makeXYZGUI</span>(rectLightFolder, rectLight.<span class="hljs-property">position</span>, <span class="hljs-string">"position"</span>, updateRectLight);
  <span class="hljs-title function_">makeXYZGUI</span>(rectLightFolder, rectLight.<span class="hljs-property">rotation</span>, <span class="hljs-string">"rotation"</span>, updateRectLight);

</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6fbd396616584898971092b377262e74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z54yr5LiN54Ot:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770730366&amp;x-signature=rmY%2BfF%2FYhZ%2FfEDZHJiLm19S61DU%3D" alt="image.png" loading="lazy"/></p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘çš„é¡¹ç›®å®æˆ˜ï¼ˆåä¸€ï¼‰- åŒ Tokenæ— æ„Ÿåˆ·æ–°ï¼šå‰ç«¯å¦‚ä½•ä¼˜é›…å¤„ç† JWT è¿‡æœŸé—®é¢˜]]></title>    <link>https://juejin.cn/post/7602440800296173614</link>    <guid>https://juejin.cn/post/7602440800296173614</guid>    <pubDate>2026-02-03T13:03:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602440800296173614" data-draft-id="7602488966609764390" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘çš„é¡¹ç›®å®æˆ˜ï¼ˆåä¸€ï¼‰- åŒ Tokenæ— æ„Ÿåˆ·æ–°ï¼šå‰ç«¯å¦‚ä½•ä¼˜é›…å¤„ç† JWT è¿‡æœŸé—®é¢˜  "/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-03T13:03:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ETA8"/> <meta itemprop="url" content="https://juejin.cn/user/608445545328347"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘çš„é¡¹ç›®å®æˆ˜ï¼ˆåä¸€ï¼‰- åŒ Tokenæ— æ„Ÿåˆ·æ–°ï¼šå‰ç«¯å¦‚ä½•ä¼˜é›…å¤„ç† JWT è¿‡æœŸé—®é¢˜  
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/608445545328347/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ETA8
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T13:03:43.000Z" title="Tue Feb 03 2026 13:03:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ã€Š[æˆ‘çš„é¡¹ç›®å®æˆ˜ï¼ˆåï¼‰] ç°ä»£ Web é‰´æƒä½“ç³»ï¼šä»ç™»å½•åˆ°åŒ Token æœºåˆ¶çš„å…¨æµç¨‹å®è·µã€‹ä¸­ï¼Œæˆ‘ä»¬å®Œæ•´æ¢³ç†äº†åç«¯å¦‚ä½•é€šè¿‡ <strong>JWT + Refresh Token</strong> æ„å»ºå®‰å…¨ã€å¯æ‰©å±•çš„èº«ä»½è®¤è¯ç³»ç»Ÿã€‚ä½†ä¸€ä¸ªå®Œæ•´çš„é‰´æƒé—­ç¯ï¼Œä¸ä»…éœ€è¦æœåŠ¡ç«¯çš„è®¾è®¡ï¼Œæ›´ç¦»ä¸å¼€å‰ç«¯å¯¹ token ç”Ÿå‘½å‘¨æœŸçš„ç²¾ç»†ç®¡ç†ã€‚</p>
<p>ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å°†èšç„¦äºé‚£ä¸ªâ€œç”¨æˆ·æ­£åœ¨å†™ç¬”è®°ï¼Œçªç„¶è¯·æ±‚å¤±è´¥è·³å›ç™»å½•é¡µâ€çš„ç»å…¸ç—›ç‚¹ï¼Œæ·±å…¥æ¢è®¨ï¼š<strong>å‰ç«¯å¦‚ä½•å®ç°çœŸæ­£æ„ä¹‰ä¸Šçš„â€œæ— æ„Ÿåˆ·æ–°â€ï¼Ÿ</strong></p>
<p>æˆ‘ä»¬å°†ä¸€æ­¥æ­¥è§£å†³å¹¶å‘æ§åˆ¶ã€è¯·æ±‚é‡è¯•ã€çŠ¶æ€åŒæ­¥ç­‰ä¸€ç³»åˆ—å·¥ç¨‹éš¾é¢˜ï¼Œæ„å»ºå‡ºä¸€å¥—ç¨³å®šã€ä½ä¾µå…¥ã€é€‚ç”¨äºçœŸå®é¡¹ç›®çš„å“åº”æ‹¦æˆªæœºåˆ¶ï¼Œå¹¶è§£æå…¶èƒŒåçš„è®¾è®¡å“²å­¦ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€é—®é¢˜çš„æœ¬è´¨ï¼š401 ä¸ç­‰äºâ€œè¯·ç™»å½•â€</h2>
<p>å½“æˆ‘ä»¬ä½¿ç”¨ JWT åšèº«ä»½è®¤è¯æ—¶ï¼Œæ€»ä¼šé‡åˆ°è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼š</p>
<blockquote>
<p>ç”¨æˆ· A ç™»å½•æˆåŠŸï¼Œæ‹¿åˆ°æœ‰æ•ˆæœŸä¸º 15 åˆ†é’Ÿçš„ <code>access_token</code>ã€‚<br/>
ç¬¬ 16 åˆ†é’Ÿï¼Œä»–ç‚¹å‡»ä¿å­˜è‰ç¨¿ï¼Œæ¥å£è¿”å› <code>401 Unauthorized</code>ã€‚</p>
</blockquote>
<p>æ­¤æ—¶ï¼Œå¦‚æœç›´æ¥å¼¹çª—æç¤ºâ€œç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•â€ï¼Œä½“éªŒæ˜¯éå¸¸å‰²è£‚çš„â€”â€”ç”¨æˆ·æ˜æ˜ä¸€ç›´åœ¨æ“ä½œï¼Œå‡­ä»€ä¹ˆè¯´æ²¡å°±æ²¡ï¼Ÿ</p>
<p>ä½†å¦‚æœæˆ‘ä»¬èƒ½åœ¨è¿™èƒŒåæ‚„æ‚„å®Œæˆä¸€æ¬¡ token åˆ·æ–°ï¼Œå¹¶æŠŠåˆšæ‰å¤±è´¥çš„è¯·æ±‚è‡ªåŠ¨é‡è¯•ï¼Œæ•´ä¸ªè¿‡ç¨‹ç”¨æˆ·å®Œå…¨æ— æ„ŸçŸ¥ï¼Œè¿™å°±å« <strong>â€œæ— æ„Ÿåˆ·æ–°â€</strong>ã€‚</p>
<p>è€Œå®ç°å®ƒçš„å…³é”®ï¼Œåœ¨äºæ­£ç¡®ç†è§£ <strong>401 çš„è¯­ä¹‰å·®å¼‚</strong>ï¼š</p>




















<table><thead><tr><th>åœºæ™¯</th><th>å«ä¹‰</th><th>åº”å¯¹ç­–ç•¥</th></tr></thead><tbody><tr><td>access_token è¿‡æœŸ</td><td>å¯æ¢å¤çš„çŠ¶æ€å¼‚å¸¸</td><td>è‡ªåŠ¨åˆ·æ–°ï¼Œé‡è¯•è¯·æ±‚</td></tr><tr><td>refresh_token å¤±æ•ˆ / ç”¨æˆ·ç™»å‡º</td><td>èº«ä»½å½»åº•å¤±æ•ˆ</td><td>å¼•å¯¼é‡æ–°ç™»å½•</td></tr></tbody></table>
<p>æˆ‘ä»¬çš„ç›®æ ‡ï¼Œå°±æ˜¯ç²¾å‡†è¯†åˆ«ç¬¬ä¸€ç§æƒ…å†µï¼Œå¹¶åœ¨ä¸å¹²æ‰°ç”¨æˆ·çš„å‰æä¸‹å®Œæˆè‡ªæ•‘ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€åˆæ­¥å°è¯•ï¼šæœ€ç®€å•çš„åˆ·æ–°é€»è¾‘</h2>
<p>å…ˆæ¥çœ‹ä¸€ä¸ªæœ´ç´ ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">axios.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-property">data</span>,
  <span class="hljs-keyword">async</span> error =&gt; {
    <span class="hljs-keyword">const</span> { config, response } = error;

    <span class="hljs-keyword">if</span> (response.<span class="hljs-property">status</span> === <span class="hljs-number">401</span>) {
      <span class="hljs-comment">// å°è¯•åˆ·æ–° token</span>
      <span class="hljs-keyword">const</span> newToken = <span class="hljs-keyword">await</span> <span class="hljs-title function_">refreshToken</span>();
      <span class="hljs-comment">// ä¿®æ”¹åŸè¯·æ±‚ header</span>
      config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${newToken}</span>`</span>;
      <span class="hljs-comment">// é‡æ–°å‘é€</span>
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">axios</span>(config);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
  }
);
</code></pre>
<p>çœ‹èµ·æ¥æ²¡é—®é¢˜ï¼Ÿå…¶å®éšæ‚£é‡é‡ã€‚</p>
<h3 data-id="heading-2">âŒ é—®é¢˜ 1ï¼šå¹¶å‘è¯·æ±‚å¯¼è‡´å¤šæ¬¡åˆ·æ–°</h3>
<p>å‡è®¾é¡µé¢åŒæ—¶å‘å‡ºä¸‰ä¸ªè¯·æ±‚ Aã€Bã€Cï¼Œå®ƒä»¬å‡ ä¹åŒæ—¶å›  token è¿‡æœŸè¿”å› 401ã€‚é‚£ä¹ˆè¿™ä¸‰æ¡éƒ½ä¼šè¿›å…¥ä¸Šè¿°é€»è¾‘ï¼Œç»“æœæ˜¯ï¼š</p>
<ul>
<li>ä¸‰æ¬¡è°ƒç”¨ <code>/auth/refresh</code></li>
<li>å¯èƒ½è§¦å‘æœåŠ¡ç«¯é˜²é‡æ”¾æœºåˆ¶å¯¼è‡´åç»­å¤±è´¥</li>
<li>æœ€ç»ˆçŠ¶æ€æ··ä¹±</li>
</ul>
<h3 data-id="heading-3">âŒ é—®é¢˜ 2ï¼šB å’Œ C è¯·æ±‚æ°¸è¿œä¸¢å¤±</h3>
<p>A å¼€å§‹åˆ·æ–°ï¼ŒB å’Œ C ä¸åº”è¯¥ç«‹å³é‡è¯•ï¼Œè€Œåº”ç­‰å¾… A æ‹¿åˆ°æ–° token åå†ç»§ç»­ã€‚å¦åˆ™ä¼šå‡ºç°ï¼š</p>
<ul>
<li>B åœ¨ A å®Œæˆå‰å°±å‘èµ·é‡è¯• â†’ ä»ç”¨æ—§ token â†’ å†æ¬¡ 401</li>
<li>é™·å…¥æ— é™å¾ªç¯æˆ–é‡å¤åˆ·æ–°</li>
</ul>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¿…é¡»å¼•å…¥ä¸€ç§â€œåè°ƒæœºåˆ¶â€ã€‚</p>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€æ ¸å¿ƒè®¾è®¡ï¼šé” + é˜Ÿåˆ—æ¨¡å¼</h2>
<p>ä¸ºäº†åº”å¯¹å¹¶å‘ä¸ä¾èµ–å…³ç³»ï¼Œæˆ‘ä»¬é‡‡ç”¨ç»å…¸çš„ <strong>â€œé” + è¯·æ±‚é˜Ÿåˆ—â€</strong> æ¨¡å¼ã€‚</p>
<h3 data-id="heading-5">1. å…¨å±€çŠ¶æ€å®šä¹‰</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">let</span> isRefreshing = <span class="hljs-literal">false</span>; <span class="hljs-comment">// æ˜¯å¦æ­£åœ¨åˆ·æ–° token</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">requestsQueue</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-function">(<span class="hljs-params">token: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>&gt; = []; <span class="hljs-comment">// å¾…å¤„ç†è¯·æ±‚é˜Ÿåˆ—</span>
</code></pre>
<ul>
<li><code>isRefreshing</code> æ˜¯ä¸€æŠŠäº’æ–¥é”ï¼Œç¡®ä¿åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ª refresh æµç¨‹åœ¨æ‰§è¡Œã€‚</li>
<li><code>requestsQueue</code> å­˜æ”¾é‚£äº›éœ€è¦ç­‰å¾…æ–° token çš„è¯·æ±‚ã€‚</li>
</ul>
<h3 data-id="heading-6">2. æ‹¦æˆªå™¨ä¸­çš„åˆ†æµå¤„ç†</h3>
<p>å½“æŸä¸ªè¯·æ±‚é‡åˆ° 401ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">if</span> (response.<span class="hljs-property">status</span> === <span class="hljs-number">401</span> &amp;&amp; !config.<span class="hljs-property">_retry</span>) {
  <span class="hljs-keyword">if</span> (isRefreshing) {
    <span class="hljs-comment">// å·²æœ‰åˆ·æ–°ä»»åŠ¡åœ¨è¿›è¡Œï¼Œå½“å‰è¯·æ±‚åŠ å…¥é˜Ÿåˆ—ç­‰å¾…</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> {
      requestsQueue.<span class="hljs-title function_">push</span>(<span class="hljs-function">(<span class="hljs-params">token: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
        config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span>;
        <span class="hljs-title function_">resolve</span>(<span class="hljs-title function_">axios</span>(config));
      });
    });
  }

  <span class="hljs-comment">// å¦åˆ™ç”±æˆ‘æ¥ä¸»å¯¼åˆ·æ–°</span>
  isRefreshing = <span class="hljs-literal">true</span>;
  config.<span class="hljs-property">_retry</span> = <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> { access_token } = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/auth/refresh'</span>, {
      <span class="hljs-attr">refresh_token</span>: <span class="hljs-title function_">getRefreshToken</span>()
    });

    <span class="hljs-comment">// æ›´æ–°å…¨å±€çŠ¶æ€</span>
    <span class="hljs-title function_">setAuthToken</span>(access_token);

    <span class="hljs-comment">// æ‰§è¡Œé˜Ÿåˆ—ä¸­æ‰€æœ‰ç­‰å¾…çš„è¯·æ±‚</span>
    requestsQueue.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">callback</span> =&gt;</span> <span class="hljs-title function_">callback</span>(access_token));
    requestsQueue = [];

    <span class="hljs-comment">// é‡å‘å½“å‰è¯·æ±‚</span>
    config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${access_token}</span>`</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">axios</span>(config);

  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-title function_">logout</span>();
    <span class="hljs-title function_">redirectToLogin</span>();
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(e);
  } <span class="hljs-keyword">finally</span> {
    isRefreshing = <span class="hljs-literal">false</span>;
  }
}
</code></pre>
<p>è¿™ä¸ªç»“æ„çœ‹ä¼¼å¤æ‚ï¼Œå®åˆ™å±‚æ¬¡æ¸…æ™°ï¼š</p>
<ol>
<li><strong>åˆ¤æ–­æ˜¯å¦é¦–æ¬¡è§¦å‘</strong>ï¼šé¿å…é‡å¤åˆ·æ–°ï¼›</li>
<li><strong>å¦‚æœæ˜¯ç«äº‰è€…ï¼Œåˆ™æ’é˜Ÿç­‰å€™</strong>ï¼šåˆ©ç”¨é—­åŒ…ä¿å­˜è¯·æ±‚ä¸Šä¸‹æ–‡ï¼›</li>
<li><strong>å¦‚æœæ˜¯å‘èµ·è€…ï¼Œåˆ™æ‰¿æ‹…åˆ·æ–°èŒè´£</strong>ï¼šè·å–æ–° tokenã€é€šçŸ¥é˜Ÿå‹ã€é‡å‘è‡ªå·±ï¼›</li>
<li><strong>ç»Ÿä¸€æ¸…ç†èµ„æº</strong>ï¼šé‡Šæ”¾é”ï¼Œé˜²æ­¢æ­»é”ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-7">å››ã€å…³é”®æŠ€æœ¯ç‚¹å‰–æ</h2>
<h3 data-id="heading-8">1. <code>_retry</code> æ ‡å¿—ä½çš„ä½œç”¨</h3>
<p>ä½ å¯èƒ½ä¼šé—®ï¼šä¸ºä»€ä¹ˆéœ€è¦ <code>_retry</code>ï¼Ÿ</p>
<p>è®¾æƒ³æ²¡æœ‰å®ƒï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>è¯·æ±‚ A æ”¶åˆ° 401ï¼Œå¼€å§‹åˆ·æ–°æµç¨‹ï¼›</li>
<li>åˆ·æ–°å®Œæˆåï¼Œç”¨æ–° token é‡å‘ Aï¼›</li>
<li>æ–°çš„ A è¯·æ±‚å†æ¬¡è¿›å…¥æ‹¦æˆªå™¨ï¼›</li>
<li>æ­¤æ—¶åˆæ˜¯ä¸€ä¸ª 401ï¼Ÿâ†’ ç»§ç»­åˆ·æ–° â†’ æ— é™å¾ªç¯ï¼</li>
</ul>
<p>å› æ­¤ï¼Œæˆ‘ä»¬åœ¨ç¬¬ä¸€æ¬¡æ•è·æ—¶æ‰“ä¸Šæ ‡è®°ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">config.<span class="hljs-property">_retry</span> = <span class="hljs-literal">true</span>;
</code></pre>
<p>è¿™æ ·ä¸‹æ¬¡å†é‡åˆ°åŒä¸€ä¸ªè¯·æ±‚å°±ä¸ä¼šé‡å¤å¤„ç†ã€‚</p>
<blockquote>
<p>ğŸ’¡ æ³¨æ„ï¼š<code>_retry</code> æ˜¯è‡ªå®šä¹‰å­—æ®µï¼Œä¸ä¼šè¢«å‘é€åˆ°åç«¯ï¼Œä»…ç”¨äºå†…éƒ¨æµç¨‹æ§åˆ¶ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-9">2. é˜Ÿåˆ—ä¸­çš„å›è°ƒå‡½æ•°æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h3>
<p>é‡ç‚¹çœ‹è¿™ä¸€æ®µï¼š</p>
<pre><code class="hljs language-ts" lang="ts">requestsQueue.<span class="hljs-title function_">push</span>(<span class="hljs-function">(<span class="hljs-params">token</span>) =&gt;</span> {
  config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span>;
  <span class="hljs-title function_">resolve</span>(<span class="hljs-title function_">axios</span>(config));
});
</code></pre>
<p>è¿™é‡Œå½¢æˆäº†ä¸€ä¸ªå…¸å‹çš„ <strong>Promise + é—­åŒ…</strong> ç»“æ„ï¼š</p>
<ul>
<li><code>resolve</code> æ¥è‡ªå½“å‰è¯·æ±‚çš„ Promiseï¼›</li>
<li><code>config</code> æ˜¯å½“å‰è¯·æ±‚çš„é…ç½®å¯¹è±¡ï¼›</li>
<li>å½“ future æŸä¸ªæ—¶åˆ»ä¼ å…¥æ–° token æ—¶ï¼Œå°±èƒ½åŠ¨æ€ä¿®æ”¹ header å¹¶é‡æ–°å‘èµ·è¯·æ±‚ã€‚</li>
</ul>
<p>æœ¬è´¨ä¸Šï¼Œæˆ‘ä»¬æŠŠâ€œå°†æ¥è¦ç”¨æ–° token é‡è¯•â€çš„èƒ½åŠ›å°è£…æˆäº†ä¸€ä¸ªå¯å»¶è¿Ÿæ‰§è¡Œçš„å‡½æ•°ã€‚</p>
<hr/>
<h3 data-id="heading-10">3. ä¸ºä»€ä¹ˆè¦åœ¨ finally ä¸­é‡Šæ”¾é”ï¼Ÿ</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">finally</span> {
  isRefreshing = <span class="hljs-literal">false</span>;
}
</code></pre>
<p>è¿™æ˜¯æå…¶é‡è¦çš„ä¸€æ­¥ã€‚å¦‚æœåˆ·æ–°è¿‡ç¨‹ä¸­å‘ç”Ÿç½‘ç»œé”™è¯¯ã€æœåŠ¡ç«¯å¼‚å¸¸æˆ–ä»£ç æŠ›é”™ï¼Œ<code>try...catch</code> ä¼šä¸­æ–­æ‰§è¡Œæµï¼Œè·³è¿‡åç»­é€»è¾‘ã€‚</p>
<p>å¦‚æœä¸æ”¾åœ¨ <code>finally</code>ï¼Œå°±ä¼šé€ æˆï¼š</p>
<ul>
<li><code>isRefreshing</code> ä¸€ç›´ä¸º <code>true</code></li>
<li>åç»­æ‰€æœ‰è¯·æ±‚éƒ½è¢«å¡åœ¨é˜Ÿåˆ—é‡Œ</li>
<li>æ•´ä¸ªåº”ç”¨æ— æ³•å‘èµ·ä»»ä½•å—ä¿æŠ¤æ¥å£è¯·æ±‚</li>
</ul>
<p>è¿™å°±æ˜¯å…¸å‹çš„ <strong>èµ„æºæ³„æ¼</strong> é—®é¢˜ã€‚åŠ¡å¿…ä¿è¯é”çš„é‡Šæ”¾æ˜¯åŸå­ä¸”å¿…ç„¶çš„ã€‚</p>
<hr/>
<h2 data-id="heading-11">äº”ã€è¾¹ç•Œæƒ…å†µä¸å®¹é”™è®¾è®¡</h2>
<p>å†ç¨³å¥çš„æœºåˆ¶ä¹Ÿè¦é¢å¯¹ç°å®ä¸–ç•Œçš„ä¸ç¡®å®šæ€§ã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªå¿…é¡»è€ƒè™‘çš„è¾¹ç¼˜åœºæ™¯ï¼š</p>
<h3 data-id="heading-12">åœºæ™¯ 1ï¼šrefresh_token ä¹Ÿå·²è¿‡æœŸ</h3>
<p>ç”¨æˆ·é•¿æ—¶é—´æœªæ“ä½œï¼Œè¿ refresh_token éƒ½å¤±æ•ˆäº†ã€‚æ­¤æ—¶ <code>/auth/refresh</code> è¯·æ±‚ä¹Ÿä¼šè¿”å› 401ã€‚</p>
<p>æˆ‘ä»¬åº”åœ¨ catch å—ä¸­ç»Ÿä¸€å¤„ç†ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">useUserStore.<span class="hljs-title function_">getState</span>().<span class="hljs-title function_">logout</span>();
<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">'/login'</span>;
</code></pre>
<p>å¹¶æ¸…é™¤æœ¬åœ°å­˜å‚¨çš„æ‰€æœ‰å‡­è¯ã€‚</p>
<hr/>
<h3 data-id="heading-13">åœºæ™¯ 2ï¼šå¤šä¸ªæ ‡ç­¾é¡µå…±äº«ç™»å½•çŠ¶æ€</h3>
<p>ç”¨æˆ·åœ¨ä¸€ä¸ªæ ‡ç­¾é¡µç™»å‡ºï¼Œå…¶ä»–é¡µé¢ä»å¯èƒ½æŒæœ‰æ—§ tokenã€‚è™½ç„¶æœ¬æ¬¡æœºåˆ¶æ— æ³•ä¸»åŠ¨æ„ŸçŸ¥ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡ç›‘å¬ localStorage å˜åŒ–æ¥è¾…åŠ©æ¸…ç†ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'storage'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">key</span> === <span class="hljs-string">'auth'</span> &amp;&amp; e.<span class="hljs-property">newValue</span> === <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// æ£€æµ‹åˆ°ç™»å‡ºäº‹ä»¶</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">pathname</span>.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'/login'</span>)) {
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">'/login'</span>;
    }
  }
});
</code></pre>
<p>å‰ææ˜¯ç™»å‡ºæ—¶å†™å…¥ storage äº‹ä»¶ã€‚</p>
<hr/>
<h3 data-id="heading-14">åœºæ™¯ 3ï¼šç½‘ç»œä¸ç¨³å®šå¯¼è‡´åˆ·æ–°å¤±è´¥</h3>
<p>å¶å°”çš„ç½‘ç»œæŠ–åŠ¨å¯èƒ½å¯¼è‡´ refresh è¯·æ±‚å¤±è´¥ã€‚æ˜¯å¦åº”è¯¥é‡è¯•ï¼Ÿ</p>
<p>å–å†³äºä¸šåŠ¡æ•æ„Ÿåº¦ï¼š</p>
<ul>
<li>æ™®é€šç³»ç»Ÿï¼šç›´æ¥ç™»å‡ºå³å¯ï¼›</li>
<li>é«˜å¯ç”¨è¦æ±‚ï¼šå¯åœ¨ catch ä¸­åŠ å…¥æŒ‡æ•°é€€é¿é‡è¯•ï¼ˆæœ€å¤š 2 æ¬¡ï¼‰ï¼›</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">let</span> retries = <span class="hljs-number">0</span>;
<span class="hljs-keyword">const</span> maxRetries = <span class="hljs-number">2</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">tryRefresh</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// ...æ­£å¸¸åˆ·æ–°</span>
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-keyword">if</span> (retries &lt; maxRetries) {
      retries++;
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">sleep</span>(<span class="hljs-number">500</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">2</span>, retries));
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">tryRefresh</span>();
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">logout</span>();
    }
  }
}
</code></pre>
<p>ä½†è¦æ³¨æ„ä¸è¦è¿‡åº¦é‡è¯•ï¼Œä»¥å…åŠ é‡æœåŠ¡å™¨è´Ÿæ‹…ã€‚</p>
<hr/>
<h2 data-id="heading-15">å…­ã€ä¼˜åŠ¿æ€»ç»“ï¼šä¸åªæ˜¯â€œèƒ½ç”¨â€</h2>
<p>è¿™å¥—æ–¹æ¡ˆä¹‹æ‰€ä»¥èƒ½åœ¨ç”Ÿäº§ç¯å¢ƒä¸­é•¿æœŸç¨³å®šè¿è¡Œï¼Œæºäºä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒç‰¹æ€§ï¼š</p>





























<table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>âœ… <strong>çœŸæ­£çš„æ— æ„Ÿä½“éªŒ</strong></td><td>ç”¨æˆ·æ— éœ€æ„ŸçŸ¥ token åˆ·æ–°è¿‡ç¨‹ï¼Œæ“ä½œè¿ç»­</td></tr><tr><td>âœ… <strong>é˜²å¹¶å‘åˆ·æ–°</strong></td><td>é€šè¿‡å¸ƒå°”é”ä¿è¯æœ€å¤šåªæœ‰ä¸€ä¸ª refresh è¯·æ±‚</td></tr><tr><td>âœ… <strong>æ”¯æŒå¹¶å‘è¯·æ±‚æ¢å¤</strong></td><td>æ‰€æœ‰å›  token è¿‡æœŸè€Œå¤±è´¥çš„è¯·æ±‚éƒ½èƒ½è¢«æ­£ç¡®é‡æ”¾</td></tr><tr><td>âœ… <strong>ä½è€¦åˆé«˜å†…èš</strong></td><td>å®Œå…¨å°è£…åœ¨æ‹¦æˆªå™¨ä¸­ï¼Œä¸šåŠ¡ä»£ç é›¶æ„ŸçŸ¥</td></tr><tr><td>âœ… <strong>å¯ç»´æŠ¤æ€§å¼º</strong></td><td>ç»“æ„æ¸…æ™°ï¼Œæ˜“äºè°ƒè¯•å’Œæ‰©å±•</td></tr></tbody></table>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒä½“ç°äº†ä¸€ç§ <strong>é¢å‘å¤±è´¥ç¼–ç¨‹</strong> çš„æ€ç»´æ–¹å¼ï¼šæˆ‘ä»¬ä¸æ˜¯åœ¨å†™â€œç†æƒ³è·¯å¾„â€ï¼Œè€Œæ˜¯åœ¨è®¾è®¡â€œå¼‚å¸¸è·¯å¾„â€çš„é€ƒç”Ÿé€šé“ã€‚</p>
<hr/>
<h2 data-id="heading-16">ä¸ƒã€æ½œåœ¨æ”¹è¿›æ–¹å‘</h2>
<p>æ²¡æœ‰å®Œç¾çš„æ¶æ„ï¼Œåªæœ‰æŒç»­æ¼”è¿›çš„ç³»ç»Ÿã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–çš„æ–¹å‘ï¼š</p>
<h3 data-id="heading-17">1. ä½¿ç”¨ AbortController å®ç°è¯·æ±‚å–æ¶ˆ</h3>
<p>å¦‚æœç”¨æˆ·å¿«é€Ÿåˆ‡æ¢é¡µé¢ï¼Œéƒ¨åˆ†å·²æ’é˜Ÿçš„è¯·æ±‚å¯èƒ½å·²æ— æ„ä¹‰ã€‚å¯é€šè¿‡æ³¨å…¥ cancelToken æ¥æ”¯æŒå–æ¶ˆæœºåˆ¶ã€‚</p>
<h3 data-id="heading-18">2. æ·»åŠ åˆ·æ–°æ—¥å¿—ä¸ŠæŠ¥</h3>
<p>è®°å½• refresh æˆåŠŸç‡ã€è€—æ—¶ã€å¤±è´¥åŸå› ç­‰æŒ‡æ ‡ï¼Œæœ‰åŠ©äºå‘ç°æ½œåœ¨é—®é¢˜ï¼ˆå¦‚é¢‘ç¹åˆ·æ–°å¯èƒ½æ˜¯å‰ç«¯æ—¶é—´ä¸åŒæ­¥å¯¼è‡´ï¼‰ã€‚</p>
<h3 data-id="heading-19">3. æ”¯æŒå¤šå®ä¾‹å…±å­˜</h3>
<p>åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œå¯èƒ½å­˜åœ¨å¤šä¸ª axios å®ä¾‹ï¼ˆä¾‹å¦‚æ–‡ä»¶ä¸Šä¼ ä¸“ç”¨å®ä¾‹ï¼‰ï¼Œéœ€ç¡®ä¿æ‹¦æˆªå™¨é€»è¾‘èƒ½å¤ç”¨æˆ–ç»§æ‰¿ã€‚</p>
<hr/>
<h2 data-id="heading-20">å…«ã€ç»“è¯­ï¼šæŠŠå¼‚å¸¸å½“ä½œå¸¸æ€æ¥è®¾è®¡</h2>
<p>JWT çš„æœ€å¤§ä¼˜ç‚¹æ˜¯â€œæ— çŠ¶æ€â€ï¼Œä½†è¿™ä¹Ÿæ„å‘³ç€ä¸€æ—¦ç­¾å‘å°±éš¾ä»¥æ”¶å›ã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œæˆ‘ä»¬æ‰æ›´éœ€è¦åœ¨å®¢æˆ·ç«¯å»ºç«‹ä¸€å¥—å¯é çš„å®¹é”™æœºåˆ¶ã€‚</p>
<p>æœ¬æ–‡æ‰€å±•ç¤ºçš„â€œæ— æ„Ÿåˆ·æ–°â€æ–¹æ¡ˆï¼Œä¸æ˜¯ä¸€ä¸ªç‚«æŠ€å¼çš„é»‘ç§‘æŠ€ï¼Œè€Œæ˜¯ä¸€ç§åŠ¡å®çš„å·¥ç¨‹å®è·µã€‚å®ƒä¸è¿½æ±‚æè‡´æ€§èƒ½ï¼Œä¹Ÿä¸ä¾èµ–å¤æ‚æ¡†æ¶ï¼Œè€Œæ˜¯ç”¨æœ€æœ´ç´ çš„é”å’Œé˜Ÿåˆ—ï¼Œè§£å†³äº†æœ€çœŸå®çš„é—®é¢˜ã€‚</p>
<p>å½“ä½ ä¸‹æ¬¡é¢å¯¹â€œtoken è¿‡æœŸæ€ä¹ˆåŠâ€è¿™ä¸ªé—®é¢˜æ—¶ï¼Œå¸Œæœ›ä½ èƒ½æƒ³åˆ°ï¼š</p>
<blockquote>
<p>â€œæˆ‘ä¸æ˜¯è¦é˜»æ­¢é”™è¯¯å‘ç”Ÿï¼Œè€Œæ˜¯è¦è®©å®ƒå‘ç”Ÿå¾—æ‚„æ— å£°æ¯ã€‚â€</p>
</blockquote>
<p>è¿™æ‰æ˜¯ç°ä»£å‰ç«¯åº”æœ‰çš„æˆç†Ÿå§¿æ€ã€‚</p>
<hr/>
<p>ğŸ“Œ <strong>é€‚ç”¨å»ºè®®</strong></p>
<ul>
<li>âœ… å•é¡µåº”ç”¨ï¼ˆSPAï¼‰ã€ç®¡ç†ç³»ç»Ÿã€å†…å®¹å¹³å°</li>
<li>âœ… ä½¿ç”¨ JWT + Refresh Token çš„è®¤è¯ä½“ç³»</li>
<li>âœ… å¯¹ç”¨æˆ·ä½“éªŒè¦æ±‚è¾ƒé«˜çš„äº§å“</li>
<li>âŒ ä¸é€‚ç”¨äºåŸºäº Session-Cookie çš„ä¼ ç»Ÿæ¶æ„</li>
</ul>
<hr/>
<p>å¦‚æœä½ ä¹Ÿåœ¨æ„å»ºç±»ä¼¼çš„é‰´æƒç³»ç»Ÿï¼Œæ¬¢è¿ç•™è¨€äº¤æµä½ çš„å®ç°æ–¹å¼ã€‚å…±å‹‰ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript this æŒ‡å‘ï¼šåˆ«å†æ­»è®°ç¡¬èƒŒï¼Œè¿™æ ·ç†è§£æœ€è½»æ¾ï¼]]></title>    <link>https://juejin.cn/post/7602440800296239150</link>    <guid>https://juejin.cn/post/7602440800296239150</guid>    <pubDate>2026-02-03T14:11:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602440800296239150" data-draft-id="7602464510607720474" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript this æŒ‡å‘ï¼šåˆ«å†æ­»è®°ç¡¬èƒŒï¼Œè¿™æ ·ç†è§£æœ€è½»æ¾ï¼"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2026-02-03T14:11:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ä¼šæ•²ä»£ç 1"/> <meta itemprop="url" content="https://juejin.cn/user/1927884034804425"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript this æŒ‡å‘ï¼šåˆ«å†æ­»è®°ç¡¬èƒŒï¼Œè¿™æ ·ç†è§£æœ€è½»æ¾ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1927884034804425/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ä¼šæ•²ä»£ç 1
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T14:11:12.000Z" title="Tue Feb 03 2026 14:11:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">JavaScript this æŒ‡å‘ï¼šåˆ«å†æ­»è®°ç¡¬èƒŒï¼Œè¿™æ ·ç†è§£æœ€è½»æ¾ï¼</h2>
<h3 data-id="heading-1">å‰è¨€ï¼šä»ä¸€ä¸ªç”Ÿæ´»åœºæ™¯è¯´èµ·</h3>
<p>æƒ³è±¡ä¸€ä¸‹ä½ åœ¨ä¸åŒçš„åœºåˆä»‹ç»è‡ªå·±ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨å…¬å¸é‡Œ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">introduce</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æˆ‘æ˜¯"</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> + <span class="hljs-string">"ï¼Œåœ¨"</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">company</span> + <span class="hljs-string">"å·¥ä½œ"</span>);
}

<span class="hljs-comment">// åœºæ™¯1ï¼šä½œä¸ºå‘˜å·¥è‡ªæˆ‘ä»‹ç»</span>
<span class="hljs-keyword">var</span> employee = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">"å°æ˜"</span>,
  <span class="hljs-attr">company</span>: <span class="hljs-string">"é˜¿é‡Œ"</span>,
  <span class="hljs-attr">intro</span>: introduce
};
employee.<span class="hljs-title function_">intro</span>(); <span class="hljs-comment">// "æˆ‘æ˜¯å°æ˜ï¼Œåœ¨é˜¿é‡Œå·¥ä½œ" - this æŒ‡å‘ employee</span>

<span class="hljs-comment">// åœºæ™¯2ï¼šæ¢ä¸ªç¯å¢ƒè¯´è¿™ä¸ªä»‹ç»</span>
<span class="hljs-keyword">var</span> say = employee.<span class="hljs-property">intro</span>;
<span class="hljs-title function_">say</span>(); <span class="hljs-comment">// "æˆ‘æ˜¯undefinedï¼Œåœ¨undefinedå·¥ä½œ" - this æŒ‡å‘ window</span>
</code></pre>
<p><strong>åŒä¸€ä¸ª"ä»‹ç»"çš„æ–¹å¼ï¼Œåœ¨ä¸åŒåœºåˆä¸‹ï¼Œè¯´çš„æ˜¯ä¸åŒçš„äººï¼</strong> è¿™å°±æ˜¯ this çš„æ ¸å¿ƒã€‚</p>
<hr/>
<h3 data-id="heading-2">ä¸€ã€ä¸ºä»€ä¹ˆ this ä¼šæŒ‡å‘å…¨å±€ï¼Ÿä¸€ä¸ª"å¿˜è®°å¸¦åç‰‡"çš„æ¯”å–»</h3>
<h4 data-id="heading-3">1.1 å…ˆçœ‹ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> myName = <span class="hljs-string">"å…¨å±€åå­—"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">sayName</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">myName</span>);
}

<span class="hljs-title function_">sayName</span>(); <span class="hljs-comment">// è¾“å‡ºï¼š"å…¨å±€åå­—"</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆæŒ‡å‘å…¨å±€ï¼Ÿ</strong></p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼š</p>
<ul>
<li><code>obj.method()</code> å°±åƒæ˜¯å°æ˜åœ¨å…¬å¸ä¼šè®®ä¸Šè¯´ï¼š"æˆ‘æ˜¯å…¬å¸çš„å°æ˜"</li>
<li><code>func()</code> å°±åƒæ˜¯å°æ˜åœ¨è¡—ä¸Šçªç„¶å–Šï¼š"æˆ‘æ˜¯è°ï¼Ÿ"</li>
<li>è¡—ä¸Šçš„è·¯äººï¼ˆå…¨å±€ç¯å¢ƒï¼‰é—®ï¼š"ä½ è¯´çš„æ˜¯è°çš„åå­—ï¼Ÿ"</li>
<li>å°æ˜è¯´ï¼š"æˆ‘æ²¡å¸¦åç‰‡ï¼Œå°±éšä¾¿å–Šå–Š"</li>
<li>äºæ˜¯å¤§å®¶é»˜è®¤ä»–è¯´çš„æ˜¯"è¡—ä¸Šçš„åäºº"ï¼ˆå…¨å±€å˜é‡ï¼‰</li>
</ul>
<h4 data-id="heading-4">1.2 å†çœ‹æˆ‘çš„å­¦ä¹ ç¬”è®°ä¸­çš„ä¾‹å­</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¿™æ˜¯ä½ çš„ 1.html ä¸­çš„ä¾‹å­</span>
<span class="hljs-keyword">var</span> bar = {
  <span class="hljs-attr">myName</span>: <span class="hljs-string">'time.geekbang.com'</span>,
  <span class="hljs-attr">printName</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myName);        <span class="hljs-comment">// æ‰¾å˜é‡ï¼ˆä½œç”¨åŸŸé“¾æŸ¥æ‰¾ï¼‰</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">myName</span>);   <span class="hljs-comment">// æ‰¾"å½“å‰åç‰‡"ä¸Šçš„åå­—</span>
  }
}

<span class="hljs-keyword">var</span> myName = <span class="hljs-string">'æå®¢é‚¦'</span>;
bar.<span class="hljs-title function_">printName</span>(); 
<span class="hljs-comment">// 1. "æå®¢é‚¦" - å˜é‡æŸ¥æ‰¾ï¼Œæ‰¾åˆ°å…¨å±€çš„</span>
<span class="hljs-comment">// 2. "time.geekbang.com" - this æŒ‡å‘ barï¼Œç”¨ bar çš„åå­—</span>

<span class="hljs-comment">// å…³é”®æ¥äº†ï¼</span>
<span class="hljs-keyword">var</span> _printName = bar.<span class="hljs-property">printName</span>; <span class="hljs-comment">// åªå¤åˆ¶äº†"è¯´è¯æ–¹å¼"ï¼Œæ²¡å¤åˆ¶"åç‰‡"</span>
<span class="hljs-title function_">_printName</span>();
<span class="hljs-comment">// 1. "æå®¢é‚¦" - è¿˜æ˜¯æ‰¾åˆ°å…¨å±€å˜é‡</span>
<span class="hljs-comment">// 2. undefined - this æŒ‡å‘ windowï¼Œwindow.myName ä¸å­˜åœ¨ï¼ˆå¦‚æœæ˜¯ var myName='æå®¢é‚¦'ï¼Œè¿™é‡Œä¼šè¾“å‡º"æå®¢é‚¦"ï¼‰</span>
</code></pre>
<hr/>
<h3 data-id="heading-5">äºŒã€this çš„ 5 ç§"è¯´è¯åœºåˆ"ï¼ˆå¯¹åº”ä½ çš„ç¬”è®°ï¼‰</h3>
<h4 data-id="heading-6">2.1 åœºåˆä¸€ï¼šä½œä¸ºå‘˜å·¥è¯´è¯ï¼ˆå¯¹è±¡æ–¹æ³•ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½ çš„ 2.html ä¾‹å­</span>
<span class="hljs-keyword">var</span> myObj = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'æå®¢æ—¶é—´'</span>,
  <span class="hljs-attr">showThis</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// æŒ‡å‘ myObj</span>
  }
}
myObj.<span class="hljs-title function_">showThis</span>(); <span class="hljs-comment">// åœ¨"å…¬å¸"è¯´ï¼Œè¯´çš„æ˜¯"å…¬å¸çš„äº‹"</span>
</code></pre>
<p><strong>æ¯”å–»</strong>ï¼šåœ¨å…¬å¸çš„ä¼šè®®å®¤é‡Œï¼Œä½ è¯´"æˆ‘ä»¬å…¬å¸"ï¼ŒæŒ‡çš„æ˜¯ä½ æ‰€åœ¨çš„å…¬å¸ã€‚</p>
<h4 data-id="heading-7">2.2 åœºåˆäºŒï¼šåœ¨è¡—ä¸Šè¯´è¯ï¼ˆæ™®é€šå‡½æ•°ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½ çš„ç¬”è®°ä¸­æåˆ°ï¼š"æ™®é€šå‡½æ•°è¿è¡Œæ—¶ã€‚thisæŒ‡å‘å…¨å±€å¯¹è±¡ä¸Š"</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// window</span>
}
<span class="hljs-title function_">foo</span>();

<span class="hljs-comment">// ä¸¥æ ¼æ¨¡å¼å°±æ˜¯ï¼š"åˆ«ä¹±è¯´è¯ï¼"</span>
<span class="hljs-meta">'use strict'</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">strictFoo</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// undefined</span>
}
<span class="hljs-title function_">strictFoo</span>();
</code></pre>
<p><strong>æ¯”å–»</strong>ï¼šåœ¨è¡—ä¸Šå¤§å–Š"æˆ‘"ï¼Œæ²¡æœ‰äººçŸ¥é“ä½ è¯´çš„æ˜¯è°ï¼Œé»˜è®¤å°±æ˜¯"è¡—ä¸Šçš„äºº"ï¼ˆå…¨å±€ï¼‰ã€‚</p>
<h4 data-id="heading-8">2.3 åœºåˆä¸‰ï¼šå€Ÿåˆ«äººèº«ä»½è¯´è¯ï¼ˆcall/applyï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½ çš„ 2.html ç¬¬äºŒä¸ªä¾‹å­</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">myName</span> = <span class="hljs-string">'æå®¢æ—¶é—´'</span>;
}

<span class="hljs-keyword">let</span> bar = {
  <span class="hljs-attr">myName</span>: <span class="hljs-string">'æå®¢é‚¦'</span>,
  <span class="hljs-attr">test1</span>: <span class="hljs-number">1</span>
};

foo.<span class="hljs-title function_">call</span>(bar); <span class="hljs-comment">// "å€Ÿç”¨ bar çš„èº«ä»½è¯´è¯"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bar.<span class="hljs-property">myName</span>); <span class="hljs-comment">// "æå®¢æ—¶é—´" - bar çš„åå­—è¢«æ”¹äº†ï¼</span>
</code></pre>
<p><strong>æ¯”å–»</strong>ï¼šä½ æ‹¿ç€åˆ«äººçš„åç‰‡è¯´ï¼š"æˆ‘æ˜¯XXX"ï¼Œåˆ«äººå°±æŠŠä½ å½“æˆé‚£ä¸ªäººäº†ã€‚</p>
<h4 data-id="heading-9">2.4 åœºåˆå››ï¼šæ–°äººè‡ªæˆ‘ä»‹ç»ï¼ˆæ„é€ å‡½æ•°ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½ çš„ 4.html ä¾‹å­ï¼ˆä¿®æ­£ç‰ˆï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">CreateObj</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// new çš„æ—¶å€™ï¼šåˆ›å»ºä¸€ä¸ª"æ–°äºº"ï¼Œè®© this æŒ‡å‘ä»–</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'æå®¢æ—¶é—´'</span>;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡</span>
}

<span class="hljs-keyword">var</span> myObj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CreateObj</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myObj.<span class="hljs-property">name</span>); <span class="hljs-comment">// "æå®¢æ—¶é—´"</span>
</code></pre>
<p><strong>æ¯”å–»</strong>ï¼šæ–°äººå…¥èŒæ—¶è¯´"æˆ‘æ˜¯æ–°æ¥çš„å°æ˜"ï¼Œè¿™æ—¶å€™çš„"æˆ‘"å°±æ˜¯æŒ‡å‘è¿™ä¸ªæ–°äººè‡ªå·±ã€‚</p>
<h4 data-id="heading-10">2.5 åœºåˆäº”ï¼šæŒ‰é’®è¢«ç‚¹å‡»æ—¶è¯´è¯ï¼ˆäº‹ä»¶å¤„ç†ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½ çš„ 5.html ä¾‹å­</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'link'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// æŒ‡å‘è¢«ç‚¹å‡»çš„ &lt;a&gt; å…ƒç´ </span>
});
</code></pre>
<p><strong>æ¯”å–»</strong>ï¼šæŒ‰é’®è¢«æŒ‰æ—¶è¯´"æˆ‘è¢«æŒ‰äº†"ï¼Œè¯´çš„å°±æ˜¯æŒ‰é’®è‡ªå·±ã€‚</p>
<hr/>
<h3 data-id="heading-11">ä¸‰ã€æœ€å®¹æ˜“å‡ºé”™çš„"åç‰‡ä¸¢å¤±"é—®é¢˜</h3>
<h4 data-id="heading-12">3.1 çš„ç»å…¸æ¡ˆä¾‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> myObj = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">"æå®¢æ—¶é—´"</span>,
  <span class="hljs-attr">showThis</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'æå®¢é‚¦'</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);
  }
}

<span class="hljs-comment">// ç¬¬ä¸€ç§ï¼šæ‹¿ç€åç‰‡è¯´è¯</span>
myObj.<span class="hljs-title function_">showThis</span>(); <span class="hljs-comment">// è¾“å‡º myObjï¼Œthis.name è¢«æ”¹ä¸º"æå®¢é‚¦"</span>

<span class="hljs-comment">// ç¬¬äºŒç§ï¼šåç‰‡ä¸¢äº†ï¼</span>
<span class="hljs-keyword">var</span> foo = myObj.<span class="hljs-property">showThis</span>; <span class="hljs-comment">// åªå¤åˆ¶äº†"è¯´è¯æ–¹å¼"</span>
<span class="hljs-title function_">foo</span>(); <span class="hljs-comment">// è¾“å‡º windowï¼Œthis.name æŠŠ window.name æ”¹äº†ï¼</span>
</code></pre>
<p><strong>å…³é”®ç†è§£</strong>ï¼š</p>
<ul>
<li><code>myObj.showThis</code> æ˜¯"å°æ˜çš„è¯´è¯æ–¹å¼"</li>
<li><code>var foo = myObj.showThis</code> åªæ˜¯å¤åˆ¶äº†"æ€ä¹ˆè¯´è¯"</li>
<li>æ²¡æœ‰å¤åˆ¶"å°æ˜çš„åç‰‡"</li>
<li>æ‰€ä»¥ <code>foo()</code> è¯´è¯æ—¶ï¼Œä¸çŸ¥é“è¯´è°ï¼Œé»˜è®¤è¯´å…¨å±€</li>
</ul>
<h4 data-id="heading-13">3.2 ç®­å¤´å‡½æ•°ï¼šè‡ªå¸¦åç‰‡å¤¹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> myObj = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">"æå®¢æ—¶é—´"</span>,
  <span class="hljs-attr">showThis</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ™®é€šå‡½æ•°ï¼šåç‰‡å¯èƒ½ä¼šä¸¢</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>); <span class="hljs-comment">// undefinedï¼Œåç‰‡ä¸¢äº†</span>
    }, <span class="hljs-number">100</span>);
    
    <span class="hljs-comment">// ç®­å¤´å‡½æ•°ï¼šæŠŠåç‰‡å¤¹åœ¨èº«ä¸Š</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>); <span class="hljs-comment">// "æå®¢æ—¶é—´"ï¼Œåç‰‡è¿˜åœ¨</span>
    }, <span class="hljs-number">100</span>);
  }
}
myObj.<span class="hljs-title function_">showThis</span>();
</code></pre>
<hr/>
<h3 data-id="heading-14">å››ã€ç»™ä½ çš„å­¦ä¹ ç¬”è®°è¡¥å……çš„"é¿å‘æŒ‡å—"</h3>
<h4 data-id="heading-15">4.1 ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§è®¾è®¡ï¼Ÿ</h4>
<blockquote>
<p>"jsçš„ä½œè€…å¿˜äº†å¤„ç†è¿™ç§æƒ…å†µ...å·æ‡’...ç›´æ¥è®©jsæŒ‡å‘å…¨å±€ï¼Ÿ"</p>
</blockquote>
<p>æ›´å‡†ç¡®çš„ç†è§£æ˜¯ï¼š
<strong>æ—©æœŸ JavaScript æƒ³è®©ç½‘é¡µè„šæœ¬ç¼–å†™æ›´ç®€å•</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1995å¹´çš„ç½‘é¡µå¯èƒ½æ˜¯è¿™æ ·çš„</span>
&lt;button onclick=<span class="hljs-string">"changeColor()"</span>&gt;å˜çº¢è‰²&lt;/button&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// å¦‚æœæ²¡æœ‰å…¨å±€ thisï¼Œæ¯ä¸ªå‡½æ•°éƒ½è¦è¿™ä¹ˆå†™ï¼š</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">changeColor</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = <span class="hljs-string">'red'</span>;
  <span class="hljs-comment">// å¦‚æœ this ä¸æŒ‡å‘ windowï¼Œå°±å¾—å†™æˆ window.document...</span>
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-16">4.2 å¯¹è±¡åœ¨å†…å­˜çš„ä½ç½®</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//bar æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®šä¹‰åœ¨å…¨å±€ä½œç”¨åŸŸ</span>
<span class="hljs-comment">//å¯¹è±¡åœ¨å †å†…å­˜ åœ¨å˜é‡ç¯å¢ƒçš„æ ˆå†…å­˜ä¸­å­˜æ”¾çš„åªæ˜¯å¯¹è±¡åœ¨å †å†…å­˜ä¸­çš„åœ°å€</span>
</code></pre>
<p>å¯¹è±¡åœ¨å †é‡Œï¼Œå˜é‡åªæ˜¯å­˜äº†ä¸ªåœ°å€ã€‚åŒæ ·ï¼š</p>
<ul>
<li><code>this</code> ä¹Ÿæ˜¯ä¸ª"åœ°å€"ï¼ŒæŒ‡å‘å½“å‰è¯´è¯çš„å¯¹è±¡</li>
<li>å‡½æ•°è°ƒç”¨æ—¶ï¼Œæ‰ç¡®å®šè¿™ä¸ªåœ°å€æŒ‡å‘è°</li>
</ul>
<h4 data-id="heading-17">4.3 ä¸‰ä¸ªå®ç”¨çš„è®°å¿†å£è¯€</h4>
<ol>
<li>
<p><strong>"ç‚¹å‰æ˜¯è°å°±æ˜¯è°"</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">obj.<span class="hljs-title function_">method</span>(); <span class="hljs-comment">// this â†’ obj</span>
</code></pre>
</li>
<li>
<p><strong>"æ²¡äººç‚¹å°±æ‰¾å…¨å±€"</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">method</span>(); <span class="hljs-comment">// this â†’ windowï¼ˆéä¸¥æ ¼æ¨¡å¼ï¼‰</span>
</code></pre>
</li>
<li>
<p><strong>"ç®­å¤´å‡½æ•°çœ‹çˆ¸çˆ¸"</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">obj.<span class="hljs-property">method</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// çœ‹å®šä¹‰æ—¶çš„å¤–å±‚ this</span>
};
</code></pre>
</li>
</ol>
<hr/>
<h3 data-id="heading-18">äº”ã€å®é™…å¼€å‘ä¸­çš„"ç”Ÿå­˜æ³•åˆ™"</h3>
<h4 data-id="heading-19">5.1 æ³•åˆ™ä¸€ï¼šä¸ç¡®å®šæ—¶ï¼Œå…ˆæ‰“å°çœ‹çœ‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'this æ˜¯ï¼š'</span>, <span class="hljs-variable language_">this</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'this çš„ç±»å‹ï¼š'</span>, <span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">this</span>);
}

<span class="hljs-comment">// å„ç§æƒ…å†µéƒ½è¯•è¯•ï¼š</span>
<span class="hljs-title function_">test</span>();                    <span class="hljs-comment">// ç‹¬ç«‹è°ƒç”¨</span>
obj.<span class="hljs-property">test</span> = test; obj.<span class="hljs-title function_">test</span>(); <span class="hljs-comment">// ä½œä¸ºæ–¹æ³•</span>
<span class="hljs-keyword">new</span> <span class="hljs-title function_">test</span>();                <span class="hljs-comment">// æ„é€ å‡½æ•°</span>
test.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>);  <span class="hljs-comment">// æŒ‡å®š this</span>
</code></pre>
<h4 data-id="heading-20">5.2 æ³•åˆ™äºŒï¼šç”¨ bind æŠŠåç‰‡é’‰æ­»</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> obj = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'å°æ˜'</span>,
  <span class="hljs-attr">say</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æˆ‘æ˜¯'</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
  }
};

<span class="hljs-comment">// åç‰‡å®¹æ˜“ä¸¢</span>
<span class="hljs-keyword">var</span> say = obj.<span class="hljs-property">say</span>;
<span class="hljs-title function_">say</span>(); <span class="hljs-comment">// "æˆ‘æ˜¯undefined"</span>

<span class="hljs-comment">// ç”¨èƒ¶æ°´ç²˜ä½åç‰‡ï¼ˆbindï¼‰</span>
<span class="hljs-keyword">var</span> boundSay = obj.<span class="hljs-property">say</span>.<span class="hljs-title function_">bind</span>(obj);
<span class="hljs-title function_">boundSay</span>(); <span class="hljs-comment">// "æˆ‘æ˜¯å°æ˜" - åç‰‡ç²˜ä½äº†ï¼</span>
</code></pre>
<h4 data-id="heading-21">5.3 æ³•åˆ™ä¸‰ï¼šclass ä¸­æ³¨æ„ this</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Button</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span> = <span class="hljs-string">'ç‚¹å‡»'</span>;
    
    <span class="hljs-comment">// âŒ è¿™æ ·ä¼šä¸¢åç‰‡</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleClick</span>);
    
    <span class="hljs-comment">// âœ… ç”¨ bind ç²˜ä½</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleClick</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
    
    <span class="hljs-comment">// âœ… æˆ–è€…ç”¨ç®­å¤´å‡½æ•°ï¼ˆè‡ªåŠ¨ç²˜ï¼‰</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">element</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleClick</span>();
    });
  }
  
  <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span>); <span class="hljs-comment">// éœ€è¦æ­£ç¡®çš„ this</span>
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-22">æ€»ç»“ï¼šä¸€å¼ å›¾æå®š this</h3>
<pre><code class="hljs language-javascript" lang="javascript">è°åœ¨è°ƒç”¨å‡½æ•°ï¼Ÿ            â†’ <span class="hljs-variable language_">this</span> æŒ‡å‘è°ï¼Ÿ
-----------              -----------
å¯¹è±¡.æ–¹æ³•()               â†’ è¿™ä¸ªå¯¹è±¡
æ–¹æ³•()                   â†’ å…¨å±€ï¼ˆæˆ– <span class="hljs-literal">undefined</span>ï¼‰
<span class="hljs-keyword">new</span> å‡½æ•°()               â†’ æ–°åˆ›å»ºçš„å¯¹è±¡
å‡½æ•°.<span class="hljs-title function_">call</span>(å¯¹è±¡)          â†’ call çš„ç¬¬ä¸€ä¸ªå‚æ•°
ç®­å¤´å‡½æ•°                 â†’ å®šä¹‰æ—¶çš„å¤–å±‚ <span class="hljs-variable language_">this</span>
</code></pre>
<p><strong>æœ€åè®°ä½</strong>ï¼š<code>this</code> å°±åƒæ˜¯ä½ è¯´è¯æ—¶çš„"æˆ‘"ã€‚</p>
<ul>
<li>åœ¨ä¼šè®®å®¤è¯´"æˆ‘" â†’ æŒ‡ä½ è‡ªå·±</li>
<li>åœ¨è¡—ä¸Šè¯´"æˆ‘" â†’ è¡—ä¸Šçš„äººä¸çŸ¥é“ä½ è¯´è°ï¼Œé»˜è®¤æŒ‡"è¡—ä¸Šçš„äºº"</li>
<li>æ‹¿ç€åˆ«äººåç‰‡è¯´"æˆ‘" â†’ æŒ‡åç‰‡ä¸Šçš„äºº</li>
<li>ç®­å¤´å‡½æ•°è¯´"æˆ‘" â†’ æ°¸è¿œæŒ‡ä½ çˆ¸çˆ¸æ˜¯è°ï¼Œä½ å°±æ˜¯è°</li>
</ul>
<p>å¤šå†™ä»£ç ï¼Œå¤šæ‰“å° <code>console.log(this)</code>ï¼Œå¾ˆå¿«ä½ å°±ä¼šå½¢æˆç›´è§‰ã€‚åŠ æ²¹ï¼</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Šæ‹†è§£ JS OOP éš¾ç‚¹ï¼šæ„é€ å‡½æ•°ã€åŸå‹ã€Class çš„åº•å±‚å…³è”ã€‹]]></title>    <link>https://juejin.cn/post/7602440800296271918</link>    <guid>https://juejin.cn/post/7602440800296271918</guid>    <pubDate>2026-02-03T14:33:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602440800296271918" data-draft-id="7602259669706063898" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Šæ‹†è§£ JS OOP éš¾ç‚¹ï¼šæ„é€ å‡½æ•°ã€åŸå‹ã€Class çš„åº•å±‚å…³è”ã€‹"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-03T14:33:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éšé€¸177"/> <meta itemprop="url" content="https://juejin.cn/user/1857514486118233"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Šæ‹†è§£ JS OOP éš¾ç‚¹ï¼šæ„é€ å‡½æ•°ã€åŸå‹ã€Class çš„åº•å±‚å…³è”ã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857514486118233/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éšé€¸177
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T14:33:46.000Z" title="Tue Feb 03 2026 14:33:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">JSé¢å‘å¯¹è±¡OOPå…¨è§£æï¼šä»åŸå‹åˆ°Classï¼Œå‘Šåˆ«æ¨¡ç³Šè®¤çŸ¥</h2>
<p>å‰è¨€ï¼šå¾ˆå¤šå‰ç«¯æ–°æ‰‹å­¦JSé¢å‘å¯¹è±¡æ—¶ï¼Œéƒ½ä¼šè¢«â€œåŸå‹â€â€œæ„é€ å‡½æ•°â€â€œç»§æ‰¿â€ç»•æ™•â€”â€”JSæ˜æ˜åˆ°å¤„éƒ½æ˜¯å¯¹è±¡ï¼Œå´å’ŒJavaã€Pythonçš„OOPä¸ä¸€æ ·ï¼›ES6çš„classçœ‹ä¼¼ç®€å•ï¼Œåº•å±‚å´è—ç€åŸå‹çš„é€»è¾‘ã€‚æœ¬æ–‡ä»JSçš„è¯­è¨€ç‰¹æ€§å‡ºå‘ï¼Œæ‹†è§£å°è£…ã€åŸå‹ã€ç»§æ‰¿ä¸‰å¤§æ ¸å¿ƒï¼Œç”¨é€šä¿—æ¡ˆä¾‹è®²é€JS OOPçš„æœ¬è´¨ï¼Œé€‚åˆå…¥é—¨åŒå­¦å¤¯å®åŸºç¡€ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€å…ˆå˜æ¸…ï¼šJSæ˜¯â€œåŸºäºå¯¹è±¡â€ï¼Œè€Œéçº¯ç²¹â€œé¢å‘å¯¹è±¡â€</h3>
<p>é¢å‘å¯¹è±¡ï¼ˆOOPï¼‰çš„æ ¸å¿ƒæ˜¯<strong>ç±»ï¼ˆClassï¼‰</strong> ä¸<strong>å®ä¾‹ï¼ˆInstanceï¼‰</strong> ï¼Œé€šè¿‡å°è£…ã€ç»§æ‰¿ã€å¤šæ€å®ç°ä»£ç å¤ç”¨ä¸æ‰©å±•ã€‚ä½†JSæœ‰ä¸ªç‰¹æ®Šä¹‹å¤„ï¼š</p>
<p>å®ƒæ˜¯ä¸€é—¨<strong>åŸºäºå¯¹è±¡ï¼ˆObject-basedï¼‰</strong> çš„è¯­è¨€â€”â€”ä½ æ¥è§¦åˆ°çš„å‡ ä¹æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯å¯¹è±¡ï¼Œå“ªæ€•æ˜¯å­—ç¬¦ä¸²ã€æ•°å­—ç­‰ç®€å•æ•°æ®ç±»å‹ï¼Œä¹Ÿæœ‰å¯¹åº”çš„åŒ…è£…ç±»ï¼ˆå¦‚Stringã€Numberï¼‰ï¼Œèƒ½è°ƒç”¨å†…ç½®æ–¹æ³•ã€‚</p>
<p>ä½†å®ƒæ—©æœŸæ²¡æœ‰classå…³é”®å­—ï¼Œä¹Ÿæ²¡æœ‰ä¸¥æ ¼æ„ä¹‰ä¸Šçš„â€œç±»æ¨¡æ¿â€ï¼Œå“ªæ€•ES6æ–°å¢äº†classï¼Œå…¶åº•å±‚ä¾ç„¶æ˜¯<strong>åŸå‹å¼é¢å‘å¯¹è±¡</strong>ï¼Œè€Œéä¼ ç»ŸOOPçš„â€œç±»-å®ä¾‹â€è¡€ç¼˜å…³ç³»ã€‚</p>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šæ²¡æœ‰classå’Œæ˜¾å¼æ„é€ å™¨ï¼ŒJSæ€ä¹ˆå®ç°é¢å‘å¯¹è±¡ï¼Ÿ</p>
<h3 data-id="heading-2">äºŒã€å°è£…ï¼šä»å¯¹è±¡å­—é¢é‡åˆ°æ„é€ å‡½æ•°</h3>
<p>å°è£…çš„æ ¸å¿ƒæ˜¯â€œå°†å±æ€§å’Œæ–¹æ³•æ‰“åŒ…â€ï¼Œéšè—å†…éƒ¨ç»†èŠ‚ã€æš´éœ²å¯æ§æ¥å£ï¼ŒåŒæ—¶è§£å†³å®ä¾‹åˆ›å»ºçš„ä»£ç é‡å¤é—®é¢˜ã€‚JSå®ç°å°è£…ï¼Œç»å†äº†ä»ç®€å•åˆ°è§„èŒƒçš„è¿‡ç¨‹ã€‚</p>
<h4 data-id="heading-3">1. åŸå§‹æ¨¡å¼ï¼šå¯¹è±¡å­—é¢é‡</h4>
<p>æœ€åŸºç¡€çš„åˆ›å»ºå¯¹è±¡æ–¹å¼ï¼Œç›´æ¥ç”¨å­—é¢é‡å®šä¹‰å±æ€§å’Œæ–¹æ³•ï¼Œé€‚åˆå•ä¸ªå¯¹è±¡çš„åœºæ™¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å•ä¸ªç”¨æˆ·å¯¹è±¡</span>
<span class="hljs-keyword">const</span> user1 = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,
  <span class="hljs-attr">sayHi</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä½ å¥½ï¼Œæˆ‘æ˜¯<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>);
  }
};
user1.<span class="hljs-title function_">sayHi</span>(); <span class="hljs-comment">// ä½ å¥½ï¼Œæˆ‘æ˜¯å¼ ä¸‰</span>
</code></pre>
<p>ç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼šåˆ›å»ºå¤šä¸ªåŒç±»å¯¹è±¡æ—¶ï¼Œä»£ç å¤§é‡é‡å¤ï¼Œä¸”å®ä¾‹ä¹‹é—´æ²¡æœ‰å…³è”ï¼Œæ— æ³•ä½“ç°â€œåŒå±ä¸€ä¸ªç±»â€çš„å…³ç³»ã€‚</p>
<h4 data-id="heading-4">2. ä¼˜åŒ–ï¼šæ„é€ å‡½æ•°å°è£…å®ä¾‹åŒ–è¿‡ç¨‹</h4>
<p>é€šè¿‡å‡½æ•°å°è£…å®ä¾‹åˆ›å»ºé€»è¾‘ï¼Œç”¨newå…³é”®å­—è°ƒç”¨ï¼ˆæ„é€ å‡½æ•°çº¦å®šé¦–å­—æ¯å¤§å†™ï¼‰ï¼Œå®ç°æ‰¹é‡åˆ›å»ºå®ä¾‹ï¼ŒåŒæ—¶å»ºç«‹å®ä¾‹ä¸æ„é€ å‡½æ•°çš„å…³è”ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ„é€ å‡½æ•°ï¼šå°è£…ç”¨æˆ·ç±»çš„å®ä¾‹åŒ–é€»è¾‘</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">User</span>(<span class="hljs-params">name, age</span>) {
  <span class="hljs-comment">// newè°ƒç”¨æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºç©ºå¯¹è±¡ï¼ŒthisæŒ‡å‘è¿™ä¸ªç©ºå¯¹è±¡</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name; <span class="hljs-comment">// ç»™å®ä¾‹æ·»åŠ ç‹¬æœ‰å±æ€§</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">sayHi</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä½ å¥½ï¼Œæˆ‘æ˜¯<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>);
  };
}

<span class="hljs-comment">// åˆ›å»ºä¸¤ä¸ªå®ä¾‹</span>
<span class="hljs-keyword">const</span> user1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-number">18</span>);
<span class="hljs-keyword">const</span> user2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"æå››"</span>, <span class="hljs-number">20</span>);

user1.<span class="hljs-title function_">sayHi</span>(); <span class="hljs-comment">// ä½ å¥½ï¼Œæˆ‘æ˜¯å¼ ä¸‰</span>
user2.<span class="hljs-title function_">sayHi</span>(); <span class="hljs-comment">// ä½ å¥½ï¼Œæˆ‘æ˜¯æå››</span>
</code></pre>
<p>å…³é”®ç»†èŠ‚ï¼š</p>
<ul>
<li>newè°ƒç”¨æ„é€ å‡½æ•°æ—¶ï¼Œä¼šè‡ªåŠ¨å®Œæˆâ€œåˆ›å»ºç©ºå¯¹è±¡â†’ç»‘å®šthisâ†’æ‰§è¡Œå‡½æ•°ä»£ç â†’è¿”å›å¯¹è±¡â€å››æ­¥ï¼›</li>
<li>æ™®é€šå‡½æ•°è°ƒç”¨ï¼ˆæ— newï¼‰æ—¶ï¼ŒthisæŒ‡å‘windowï¼Œä¼šæ±¡æŸ“å…¨å±€å˜é‡ï¼ŒåŠ¡å¿…æ³¨æ„è°ƒç”¨æ–¹å¼ï¼›</li>
<li>å¯ä»¥é€šè¿‡instanceofåˆ¤æ–­å®ä¾‹å½’å±ï¼šconsole.log(user1 instanceof User); // trueã€‚</li>
</ul>
<p>ä½†è¿™ä¸ªæ–¹æ¡ˆä»æœ‰ä¸è¶³ï¼šæ¯ä¸ªå®ä¾‹çš„sayHiæ–¹æ³•éƒ½ä¼šé‡æ–°åˆ›å»ºä¸€ä»½ï¼Œå ç”¨é¢å¤–å†…å­˜â€”â€”è¿™å°±æ˜¯åŸå‹è¦è§£å†³çš„é—®é¢˜ã€‚</p>
<h3 data-id="heading-5">ä¸‰ã€åŸå‹ï¼ˆPrototypeï¼‰æ¨¡å¼ï¼šè§£å†³å…±äº«ä¸å†…å­˜æµªè´¹</h3>
<p>æ„é€ å‡½æ•°çš„ç‹¬æœ‰å±æ€§/æ–¹æ³•ï¼ˆå¦‚nameã€ageï¼‰éœ€è¦æ¯ä¸ªå®ä¾‹å•ç‹¬æ‹¥æœ‰ï¼Œä½†å…¬ç”¨å±æ€§/æ–¹æ³•ï¼ˆå¦‚sayHiï¼‰æ²¡å¿…è¦é‡å¤åˆ›å»ºã€‚JSé€šè¿‡åŸå‹ï¼Œè®©æ‰€æœ‰å®ä¾‹å…±äº«å…¬ç”¨èµ„æºã€‚</p>
<h4 data-id="heading-6">1. åŸå‹çš„æ ¸å¿ƒé€»è¾‘</h4>
<p>æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ª<strong>prototypeå±æ€§</strong>ï¼Œå…¶å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆåŸå‹å¯¹è±¡ï¼‰ï¼›æ„é€ å‡½æ•°çš„æ‰€æœ‰å®ä¾‹ï¼Œéƒ½ä¼šé€šè¿‡ç§æœ‰å±æ€§__proto__ï¼ˆES5æ¨èç”¨Object.getPrototypeOf()ï¼‰æŒ‡å‘è¿™ä¸ªåŸå‹å¯¹è±¡ã€‚</p>
<p>åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§å’Œæ–¹æ³•ï¼Œä¼šè¢«æ‰€æœ‰å®ä¾‹å…±äº«ï¼Œä¸”åªåœ¨å†…å­˜ä¸­å­˜å‚¨ä¸€ä»½ã€‚</p>
<h4 data-id="heading-7">2. ä¼˜åŒ–æ„é€ å‡½æ•°ï¼šå…¬æœ‰æ–¹æ³•æ”¾åŸå‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">User</span>(<span class="hljs-params">name, age</span>) {
  <span class="hljs-comment">// å®ä¾‹ç‹¬æœ‰å±æ€§</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
}

<span class="hljs-comment">// å…¬æœ‰æ–¹æ³•/å±æ€§æ”¾åŸå‹ä¸Šï¼Œæ‰€æœ‰å®ä¾‹å…±äº«</span>
<span class="hljs-title class_">User</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayHi</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä½ å¥½ï¼Œæˆ‘æ˜¯<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>);
};
<span class="hljs-title class_">User</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">gender</span> = <span class="hljs-string">"æœªçŸ¥"</span>; <span class="hljs-comment">// å…±äº«å±æ€§</span>

<span class="hljs-keyword">const</span> user1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-number">18</span>);
<span class="hljs-keyword">const</span> user2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"æå››"</span>, <span class="hljs-number">20</span>);

<span class="hljs-comment">// å…±äº«åŸå‹ä¸Šçš„æ–¹æ³•å’Œå±æ€§</span>
user1.<span class="hljs-title function_">sayHi</span>(); <span class="hljs-comment">// ä½ å¥½ï¼Œæˆ‘æ˜¯å¼ ä¸‰</span>
user2.<span class="hljs-title function_">sayHi</span>(); <span class="hljs-comment">// ä½ å¥½ï¼Œæˆ‘æ˜¯æå››</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user1.<span class="hljs-property">gender</span>, user2.<span class="hljs-property">gender</span>); <span class="hljs-comment">// æœªçŸ¥ æœªçŸ¥</span>
</code></pre>
<h4 data-id="heading-8">3. åŸå‹ç›¸å…³å…³é”®æ–¹æ³•</h4>
<ul>
<li>isPrototypeOf()ï¼šåˆ¤æ–­åŸå‹å¯¹è±¡æ˜¯å¦å±äºæŸä¸ªå®ä¾‹ â†’ User.prototype.isPrototypeOf(user1); // trueï¼›</li>
<li>hasOwnProperty()ï¼šåˆ¤æ–­å±æ€§æ˜¯å®ä¾‹ç‹¬æœ‰è¿˜æ˜¯åŸå‹å…±äº« â†’ user1.hasOwnProperty("name"); // trueï¼ˆç‹¬æœ‰ï¼‰ï¼Œuser1.hasOwnProperty("gender"); // falseï¼ˆåŸå‹ï¼‰ï¼›</li>
<li>inè¿ç®—ç¬¦ï¼šåˆ¤æ–­å±æ€§æ˜¯å¦å­˜åœ¨ï¼ˆå®ä¾‹æˆ–åŸå‹ä¸­ï¼‰ â†’ "sayHi" in user1; // trueã€‚</li>
</ul>
<p>æ³¨æ„ï¼šå¦‚æœå®ä¾‹ä¸Šå®šä¹‰äº†ä¸åŸå‹åŒåçš„å±æ€§ï¼Œä¼šä¼˜å…ˆä½¿ç”¨å®ä¾‹çš„å±æ€§ï¼ˆåŸå‹æŸ¥æ‰¾çš„å°±è¿‘åŸåˆ™ï¼‰ã€‚</p>
<h3 data-id="heading-9">å››ã€ES6 Classï¼šåŸå‹çš„è¯­æ³•ç³–</h3>
<p>ES6æ–°å¢classå…³é”®å­—ï¼Œè®©JSçš„OOPå†™æ³•æ›´è´´è¿‘ä¼ ç»Ÿè¯­è¨€ï¼Œä½†<strong>åº•å±‚ä¾ç„¶æ˜¯åŸå‹æœºåˆ¶</strong>ï¼Œclassåªæ˜¯ç®€åŒ–äº†è¯­æ³•ï¼Œæ²¡æœ‰æ”¹å˜æœ¬è´¨ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ES6 Classå†™æ³•</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-comment">// æ„é€ å™¨ï¼šå¯¹åº”ES5çš„æ„é€ å‡½æ•°</span>
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, age</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
  }

  <span class="hljs-comment">// åŸå‹ä¸Šçš„æ–¹æ³•ï¼ˆæ— éœ€å†™prototypeï¼‰</span>
  <span class="hljs-title function_">sayHi</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä½ å¥½ï¼Œæˆ‘æ˜¯<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>);
  }
}

<span class="hljs-keyword">const</span> user1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-number">18</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user1.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">User</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// trueï¼ˆåº•å±‚è¿˜æ˜¯åŸå‹ï¼‰</span>
</code></pre>
<p>å¯¹æ¯”ES5çš„åŸå‹å†™æ³•ï¼Œclassçš„ä¼˜åŠ¿æ˜¯è¯­æ³•æ›´ç®€æ´ã€è¯­ä¹‰æ›´æ¸…æ™°ï¼Œé¿å…äº†æ‰‹åŠ¨æ“ä½œprototypeçš„ç¹çï¼Œä½†æ ¸å¿ƒé€»è¾‘å®Œå…¨ä¸€è‡´ã€‚</p>
<h3 data-id="heading-10">äº”ã€ç»§æ‰¿ï¼šJSåŸå‹é“¾ä¸æ„é€ å‡½æ•°ç»‘å®š</h3>
<p>ç»§æ‰¿æ˜¯OOPçš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ï¼Œè®©å­ç±»èƒ½å¤ç”¨çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼ŒåŒæ—¶æ‰©å±•è‡ªèº«åŠŸèƒ½ã€‚JSå®ç°ç»§æ‰¿ï¼Œæ ¸å¿ƒæ˜¯åŸå‹é“¾å’Œæ„é€ å‡½æ•°ç»‘å®šã€‚</p>
<h4 data-id="heading-11">1. åŸºç¡€æ–¹æ¡ˆï¼šæ„é€ å‡½æ•°ç»‘å®šï¼ˆapply/callï¼‰</h4>
<p>é€šè¿‡applyæˆ–callï¼Œå°†çˆ¶ç±»æ„é€ å‡½æ•°çš„thisç»‘å®šåˆ°å­ç±»å®ä¾‹ï¼Œå®ç°çˆ¶ç±»å±æ€§çš„ç»§æ‰¿ï¼Œä½†æ— æ³•ç»§æ‰¿çˆ¶ç±»åŸå‹ä¸Šçš„æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// çˆ¶ç±»ï¼šåŠ¨ç‰©</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Animal</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">species</span> = <span class="hljs-string">"åŠ¨ç‰©"</span>;
}
<span class="hljs-comment">// çˆ¶ç±»åŸå‹æ–¹æ³•</span>
<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayAnimal</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æˆ‘æ˜¯åŠ¨ç‰©"</span>);
};

<span class="hljs-comment">// å­ç±»ï¼šç‹—</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Dog</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-comment">// ç»‘å®šçˆ¶ç±»æ„é€ å‡½æ•°çš„thisï¼Œç»§æ‰¿çˆ¶ç±»å±æ€§</span>
  <span class="hljs-title class_">Animal</span>.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>);
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}

<span class="hljs-keyword">const</span> dog1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">"æ—ºè´¢"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dog1.<span class="hljs-property">species</span>); <span class="hljs-comment">// åŠ¨ç‰©ï¼ˆç»§æ‰¿çˆ¶ç±»å±æ€§ï¼‰</span>
dog1.<span class="hljs-title function_">sayAnimal</span>(); <span class="hljs-comment">// æŠ¥é”™ï¼ˆæ— æ³•ç»§æ‰¿åŸå‹æ–¹æ³•ï¼‰</span>
</code></pre>
<h4 data-id="heading-12">2. ä¼˜åŒ–æ–¹æ¡ˆï¼šåŸå‹é“¾ç»§æ‰¿</h4>
<p>è®©å­ç±»çš„åŸå‹æŒ‡å‘çˆ¶ç±»çš„å®ä¾‹ï¼Œé€šè¿‡åŸå‹é“¾å®ç°â€œå±æ€§+æ–¹æ³•â€çš„å…¨ç»§æ‰¿ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Animal</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">species</span> = <span class="hljs-string">"åŠ¨ç‰©"</span>;
}
<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayAnimal</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æˆ‘æ˜¯åŠ¨ç‰©"</span>);
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Dog</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-title class_">Animal</span>.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>); <span class="hljs-comment">// ç»§æ‰¿çˆ¶ç±»å±æ€§</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}

<span class="hljs-comment">// å­ç±»åŸå‹æŒ‡å‘çˆ¶ç±»å®ä¾‹ï¼Œç»§æ‰¿çˆ¶ç±»åŸå‹æ–¹æ³•</span>
<span class="hljs-title class_">Dog</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animal</span>();

<span class="hljs-keyword">const</span> dog1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">"æ—ºè´¢"</span>);
dog1.<span class="hljs-title function_">sayAnimal</span>(); <span class="hljs-comment">// æˆ‘æ˜¯åŠ¨ç‰©ï¼ˆæˆåŠŸç»§æ‰¿åŸå‹æ–¹æ³•ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(dog1.<span class="hljs-property">species</span>); <span class="hljs-comment">// åŠ¨ç‰©</span>
</code></pre>
<p>æ ¸å¿ƒé€»è¾‘ï¼šå­ç±»å®ä¾‹çš„__proto__æŒ‡å‘å­ç±»åŸå‹ï¼ˆçˆ¶ç±»å®ä¾‹ï¼‰ï¼Œçˆ¶ç±»å®ä¾‹çš„__proto__æŒ‡å‘çˆ¶ç±»åŸå‹ï¼Œå±‚å±‚å‘ä¸Šå½¢æˆåŸå‹é“¾ï¼Œç›´åˆ°Object.prototypeï¼ˆåŸå‹é“¾ç»ˆç‚¹ä¸ºnullï¼‰ã€‚</p>
<h3 data-id="heading-13">å…­ã€æ€»ç»“ï¼šJS OOPçš„æœ¬è´¨</h3>
<ol>
<li>JSæ˜¯åŸºäºå¯¹è±¡çš„è¯­è¨€ï¼ŒOOPåº•å±‚ä¾èµ–åŸå‹æœºåˆ¶ï¼Œè€Œéä¼ ç»Ÿç±»ç»§æ‰¿ï¼›</li>
<li>å°è£…ï¼šé€šè¿‡æ„é€ å‡½æ•°/Classæ‰“åŒ…å®ä¾‹é€»è¾‘ï¼ŒåŒºåˆ†ç‹¬æœ‰ä¸å…±äº«èµ„æºï¼›</li>
<li>åŸå‹ï¼šè§£å†³å…¬ç”¨æ–¹æ³•çš„å†…å­˜æµªè´¹ï¼Œæ˜¯å®ä¾‹å…±äº«èµ„æºçš„æ ¸å¿ƒï¼›</li>
<li>ç»§æ‰¿ï¼šé€šè¿‡æ„é€ å‡½æ•°ç»‘å®š+åŸå‹é“¾ï¼Œå®ç°çˆ¶ç±»å±æ€§ä¸æ–¹æ³•çš„å¤ç”¨ï¼›</li>
<li>ES6 Classæ˜¯è¯­æ³•ç³–ï¼Œæ²¡æœ‰æ”¹å˜åŸå‹çš„åº•å±‚é€»è¾‘ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Gitæš‚å­˜ä¸stashæ“ä½œè¯¦è§£]]></title>    <link>https://juejin.cn/post/7602420156397649963</link>    <guid>https://juejin.cn/post/7602420156397649963</guid>    <pubDate>2026-02-03T14:35:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602420156397649963" data-draft-id="7600342201794150415" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Gitæš‚å­˜ä¸stashæ“ä½œè¯¦è§£"/> <meta itemprop="keywords" content="Git"/> <meta itemprop="datePublished" content="2026-02-03T14:35:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äºå°æ´‹"/> <meta itemprop="url" content="https://juejin.cn/user/3292359784146536"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Gitæš‚å­˜ä¸stashæ“ä½œè¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3292359784146536/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äºå°æ´‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T14:35:11.000Z" title="Tue Feb 03 2026 14:35:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒGitçš„æš‚å­˜å’ŒStashåŠŸèƒ½æ˜¯ç®¡ç†ä»£ç å˜æ›´çš„æ ¸å¿ƒå·¥å…·ã€‚æœ¬æ–‡å°†ç³»ç»Ÿæ¢³ç†<code>git add</code>ã€<code>git stash</code>åŠç›¸å…³é«˜çº§æ“ä½œï¼Œå¸®åŠ©å¼€å‘è€…é«˜æ•ˆå¤„ç†å·¥ä½œåŒºä¸æš‚å­˜åŒºçš„çŠ¶æ€ç®¡ç†ã€‚</p>
</blockquote>
<h2 data-id="heading-0">âœ… åŸºç¡€æš‚å­˜æ“ä½œ</h2>
<h4 data-id="heading-1">âœ… æ·»åŠ ä¿®æ”¹åˆ°æš‚å­˜åŒº</h4>
<p>é€šè¿‡<code>git add</code>å‘½ä»¤å°†å·¥ä½œç›®å½•çš„ä¿®æ”¹æ ‡è®°ä¸ºâ€œå‡†å¤‡æäº¤â€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ·»åŠ å•ä¸ªæ–‡ä»¶</span>
git add file.txt

<span class="hljs-comment"># æ·»åŠ æ‰€æœ‰ä¿®æ”¹çš„æ–‡ä»¶ï¼ˆä¸åŒ…æ‹¬æœªè·Ÿè¸ªçš„æ–‡ä»¶ï¼‰</span>
git add .

<span class="hljs-comment"># æ·»åŠ ç‰¹å®šç±»å‹çš„æ–‡ä»¶ï¼ˆå¦‚æ‰€æœ‰.jsæ–‡ä»¶ï¼‰</span>
git add *.js
</code></pre>
<p><strong>åŠŸèƒ½</strong>ï¼šå°†ä¿®æ”¹å­˜å…¥æš‚å­˜åŒºï¼Œä½†ä¸ä¼šç«‹å³åˆ›å»ºæäº¤è®°å½•ã€‚
<strong>æ³¨æ„</strong>ï¼šæœªè·Ÿè¸ªçš„æ–‡ä»¶éœ€å…ˆç”¨<code>git add</code>æ·»åŠ æ‰èƒ½æš‚å­˜ã€‚</p>
<h4 data-id="heading-2">âœ… å–æ¶ˆæš‚å­˜</h4>
<p>è¯¯å°†æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºæ—¶ï¼Œå¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ’¤é”€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å–æ¶ˆå•ä¸ªæ–‡ä»¶çš„æš‚å­˜</span>
git restore --staged file.txt

<span class="hljs-comment"># å–æ¶ˆæ‰€æœ‰æ–‡ä»¶çš„æš‚å­˜</span>
git restore --staged .
</code></pre>
<p><strong>åŠŸèƒ½</strong>ï¼šå°†æ–‡ä»¶ä»æš‚å­˜åŒºç§»å›å·¥ä½œç›®å½•ï¼Œä¿ç•™ä¿®æ”¹å†…å®¹ã€‚</p>
<h2 data-id="heading-3">âœ… ä¸€ã€Git Stash æ˜¯ä»€ä¹ˆï¼Ÿæ ¸å¿ƒä½œç”¨</h2>
<p><code>git stash</code> (ä¸­æ–‡å¸¸ç¿»è¯‘ä¸º<strong>å‚¨è— / æš‚å­˜ / æš‚å­˜æç½®</strong>) æ˜¯ Git ä¸­æå…¶å¸¸ç”¨çš„å‘½ä»¤ï¼Œ<strong>æ ¸å¿ƒæ ¸å¿ƒä½œç”¨</strong>ï¼š</p>
<blockquote>
<p>ä¸´æ—¶ã€Œå‚¨è— / ä¿å­˜ã€<strong>å·¥ä½œåŒº + æš‚å­˜åŒº</strong> ä¸­æ‰€æœ‰<strong>æœªæäº¤</strong>çš„ä¿®æ”¹å†…å®¹ï¼Œè®©ä½ çš„å·¥ä½œåŒºå’Œæš‚å­˜åŒº<strong>ç«‹åˆ»æ¢å¤åˆ°ã€Œå¹²å‡€çŠ¶æ€ã€(å’Œæœ€è¿‘ä¸€æ¬¡ commit å®Œå…¨ä¸€è‡´)</strong> ï¼Œä¸”ä¸ä¼šä¸¢å¼ƒä»»ä½•ä¿®æ”¹ã€‚</p>
</blockquote>
<h3 data-id="heading-4">âœ… ä»€ä¹ˆæ—¶å€™å¿…é¡»ç”¨ Git Stashï¼Ÿï¼ˆæ ¸å¿ƒä½¿ç”¨åœºæ™¯ï¼‰</h3>
<p>è¿™æ˜¯ä½¿ç”¨ <code>git stash</code> çš„<strong>é»„é‡‘åœºæ™¯</strong>ï¼Œé‡åˆ°ä»¥ä¸‹æƒ…å†µæ— è„‘ç”¨å³å¯ï¼Œä¹Ÿæ˜¯å·¥ä½œä¸­ 99% çš„ä½¿ç”¨åœºæ™¯ï¼š</p>
<ol>
<li><strong>æ­£åœ¨å½“å‰åˆ†æ”¯å¼€å‘æ–°åŠŸèƒ½ / æ”¹ Bug</strong>ï¼Œçªç„¶éœ€è¦åˆ‡æ¢åˆ°å…¶ä»–åˆ†æ”¯ï¼ˆæ¯”å¦‚ <code>test</code>/<code>release</code>ï¼‰å¤„ç†ç´§æ€¥é—®é¢˜ï¼›</li>
<li>å½“å‰åˆ†æ”¯çš„ä»£ç <strong>æ”¹äº†ä¸€åŠã€è¿˜æ²¡å†™å®Œã€æ— æ³•æäº¤</strong>ï¼ˆæäº¤ä¸å®Œæ•´çš„ä»£ç ä¼šæ±¡æŸ“åˆ†æ”¯æäº¤è®°å½•ï¼‰ï¼›</li>
<li>åˆ‡æ¢åˆ†æ”¯å‰ï¼ŒGit å¼ºåˆ¶è¦æ±‚ã€Œå·¥ä½œåŒºå¹²å‡€ã€ï¼Œå¦åˆ™ä¼šæç¤ºå†²çªæˆ–æ— æ³•åˆ‡æ¢ã€‚</li>
</ol>
<p>ç®€å•è¯´ï¼š<strong>æƒ³åˆ‡åˆ†æ”¯ã€ä»£ç æ²¡å†™å®Œã€ä¸æƒ³æäº¤</strong> â†’ ç”¨ <code>git stash</code> å°±å¯¹äº†ï¼</p>
<h2 data-id="heading-5">âœ… äºŒã€Git Stash åŸºç¡€æ ¸å¿ƒå‘½ä»¤ï¼ˆå¿…ä¼šï¼Œé«˜é¢‘ä½¿ç”¨ï¼‰</h2>
<p>æ‰€æœ‰å‘½ä»¤æŒ‰ã€Œä½¿ç”¨é¢‘ç‡ä»é«˜åˆ°ä½ã€æ’åºï¼Œä¼˜å…ˆæŒæ¡å‰ 5 ä¸ªå³å¯æ»¡è¶³ 90% çš„å¼€å‘éœ€æ±‚ï¼Œ<strong>æ¨èæ­»è®°ç¡¬èƒŒ + ç†Ÿç»ƒä½¿ç”¨</strong>ã€‚</p>
<p><strong>1. æ ¸å¿ƒå­˜å‚¨ï¼š<code>git stash</code> / <code>git stash push</code></strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ–¹å¼1ï¼šæœ€ç®€å†™æ³•ï¼ˆæ¨èï¼Œå·¥ä½œä¸­99%ç”¨è¿™ä¸ªï¼‰</span>
git stash

<span class="hljs-comment"># æ–¹å¼2ï¼šä¿å­˜ä¿®æ”¹å¹¶æ·»åŠ æè¿°ä¿¡æ¯</span>
git stash save <span class="hljs-string">"æè¿°ä¿¡æ¯"</span>

<span class="hljs-comment"># æ–¹å¼3ï¼šå®Œæ•´å†™æ³•ï¼ˆå’Œä¸Šé¢ç­‰ä»·ï¼Œpush å¯ä»¥çœç•¥ï¼‰ </span>
git stash push
</code></pre>
<p><strong>åŠŸèƒ½</strong>ï¼šæŠŠã€Œå·¥ä½œåŒº + æš‚å­˜åŒºã€çš„æ‰€æœ‰æœªæäº¤ä¿®æ”¹ï¼Œ<strong>ä¸´æ—¶ä¿å­˜åˆ° Git çš„ã€Œå‚¨è—æ ˆã€</strong>ï¼Œå·¥ä½œåŒºç«‹åˆ»å˜å¹²å‡€ï¼Œæ‰€æœ‰ä¿®æ”¹è¢«éšè—ã€‚</p>
<p><strong>2. å¸¦å¤‡æ³¨å­˜å‚¨ï¼š<code>git stash push -m "å¤‡æ³¨ä¿¡æ¯"</code> ã€å¼ºçƒˆæ¨èã€‘</strong></p>
<pre><code class="hljs language-bash" lang="bash">git stash push -m <span class="hljs-string">"é¦–é¡µè½®æ’­å›¾æ ·å¼ä¿®æ”¹-æœªå®Œæˆ"</span> 

git stash push -m <span class="hljs-string">"è®¢å•æ¨¡å—bugä¿®å¤-å¾…æµ‹è¯•"</span>
</code></pre>
<p><strong>åŠŸèƒ½</strong>ï¼šå’Œ <code>git stash</code> åŠŸèƒ½ä¸€è‡´ï¼Œå”¯ä¸€åŒºåˆ«æ˜¯<strong>ç»™æœ¬æ¬¡å‚¨è—æ·»åŠ ã€Œè‡ªå®šä¹‰å¤‡æ³¨ã€</strong>ã€‚</p>
<p>ğŸ‘‰ ä¸ºä»€ä¹ˆå¼ºçƒˆæ¨èï¼Ÿå½“ä½ å¤šæ¬¡ <code>git stash</code> åï¼Œä¼šæœ‰å¤šä¸ªå‚¨è—è®°å½•ï¼Œå¸¦å¤‡æ³¨èƒ½<strong>ä¸€çœ¼åŒºåˆ†æ¯ä¸ªå‚¨è—å¯¹åº”çš„ä¿®æ”¹å†…å®¹</strong>ï¼Œä¸ä¼šæ··æ·†ï¼Œé¿å…åç»­æ¢å¤é”™ä»£ç ï¼</p>
<p><strong>3. æŸ¥çœ‹æ‰€æœ‰å‚¨è—è®°å½•ï¼š<code>git stash list</code></strong></p>
<pre><code class="hljs language-bash" lang="bash">git stash list
</code></pre>
<p><strong>åŠŸèƒ½</strong>ï¼šæŸ¥çœ‹ Git å‚¨è—æ ˆä¸­<strong>æ‰€æœ‰çš„ä¸´æ—¶å­˜å‚¨è®°å½•</strong>ï¼Œè¾“å‡ºæ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">stash@{0}: On dev: æœç´¢æ¡†æ ·å¼ä¼˜åŒ–-æœªå®Œæˆ 
stash@{1}: On dev: ç­›é€‰æ¡å•é€‰å¤±æ•ˆé—®é¢˜ä¿®å¤-å¾…æµ‹è¯• 
</code></pre>
<ul>
<li>å‚¨è—æ ˆæ˜¯ã€Œ<strong>åè¿›å…ˆå‡º</strong>ã€çš„ç»“æ„ï¼ˆæ ˆç»“æ„ï¼‰ï¼šæœ€æ–°çš„å‚¨è—è®°å½•æ’åœ¨æœ€ä¸Šé¢ï¼Œç¼–å· <code>stash@{0}</code>ï¼›</li>
<li>æ¯ä¸ªè®°å½•åŒ…å«ï¼šç¼–å·ã€æ‰€å±åˆ†æ”¯ã€è‡ªå®šä¹‰å¤‡æ³¨ã€‚</li>
</ul>
<p><strong>4. æ¢å¤å‚¨è—çš„ä¿®æ”¹ï¼š<code>git stash pop</code> ã€æœ€å¸¸ç”¨æ¢å¤æ–¹å¼ã€‘</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ¢å¤ã€Œæœ€æ–°çš„å‚¨è—è®°å½•ã€(stash@{0})ï¼Œæ¢å¤åè‡ªåŠ¨åˆ é™¤è¿™æ¡å‚¨è—è®°å½• </span>
git stash pop 

<span class="hljs-comment"># æ¢å¤ã€ŒæŒ‡å®šç¼–å·ã€çš„å‚¨è—è®°å½•ï¼Œæ¢å¤åè‡ªåŠ¨åˆ é™¤è¯¥è®°å½• </span>
git stash pop stash@{1}
</code></pre>
<ul>
<li><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼š<strong>å°†å‚¨è—çš„ä¿®æ”¹æ¢å¤åˆ°å½“å‰å·¥ä½œåŒº</strong>ï¼Œæ¢å¤åä»£ç å’Œä½  stash ä¹‹å‰å®Œå…¨ä¸€è‡´ï¼ˆå·¥ä½œåŒº + æš‚å­˜åŒºçš„ä¿®æ”¹éƒ½å›æ¥ï¼‰ã€‚</li>
<li><strong>å…³é”®ç‰¹æ€§</strong>ï¼š<code>pop</code> = ã€Œæ¢å¤ + åˆ é™¤ã€ï¼Œæ¢å¤åè¿™æ¡å‚¨è—è®°å½•å°±ä»æ ˆä¸­æ¶ˆå¤±äº†ï¼Œ<strong>é€‚åˆç¡®è®¤åªæ¢å¤ä¸€æ¬¡çš„åœºæ™¯</strong>ã€‚
<strong>5. æ¢å¤å‚¨è—çš„ä¿®æ”¹ï¼š<code>git stash apply</code> ã€å¤‡é€‰æ¢å¤æ–¹å¼ã€‘</strong></li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ¢å¤æœ€æ–°çš„å‚¨è—è®°å½•(stash@{0})ï¼Œæ¢å¤åã€Œä¸åˆ é™¤ã€è¿™æ¡å‚¨è—è®°å½•</span>
git stash apply

<span class="hljs-comment"># æ¢å¤æŒ‡å®šç¼–å·çš„å‚¨è—è®°å½•ï¼Œæ¢å¤åã€Œä¸åˆ é™¤ã€è¯¥è®°å½•</span>
git stash apply stash@{1}
</code></pre>
<ul>
<li><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼šå’Œ <code>git stash pop</code> å‡ ä¹ä¸€æ ·ï¼Œéƒ½æ˜¯æŠŠå‚¨è—çš„ä¿®æ”¹æ¢å¤åˆ°å·¥ä½œåŒºã€‚</li>
<li><strong>å…³é”®åŒºåˆ«</strong>ï¼š<code>apply</code> = ã€Œåªæ¢å¤ï¼Œä¸åˆ é™¤ã€ï¼Œæ¢å¤åè¿™æ¡å‚¨è—è®°å½•ä¾ç„¶ä¿å­˜åœ¨æ ˆä¸­ï¼Œ<strong>é€‚åˆéœ€è¦å¤šæ¬¡æ¢å¤åŒä¸€ä»½ä¿®æ”¹çš„åœºæ™¯</strong>ã€‚</li>
</ul>
<p>âœ… <strong>é‡ç‚¹åŒºåˆ†ï¼š<code>git stash pop</code> vs <code>git stash apply</code>ï¼ˆå¿…è€ƒå¿…ç”¨ï¼‰</strong></p>
<p>è¿™ä¸¤ä¸ªå‘½ä»¤æ˜¯æœ€å®¹æ˜“æ··æ·†çš„ï¼Œè®°ä½<strong>æ ¸å¿ƒå·®å¼‚åªæœ‰ä¸€ä¸ª</strong>ï¼š<strong>æ˜¯å¦åˆ é™¤å‚¨è—è®°å½•</strong></p>
<p>âœ… <code>git stash pop</code>ï¼šæ¢å¤ + åˆ é™¤è®°å½• â†’ ã€Œä¸€æ¬¡æ€§æ¢å¤ã€ï¼Œç”¨å®Œå³åˆ ï¼Œæ¨èæ—¥å¸¸ä½¿ç”¨ï¼›</p>
<p>âœ… <code>git stash apply</code>ï¼šåªæ¢å¤ï¼Œä¸åˆ è®°å½• â†’ ã€Œå¯é‡å¤æ¢å¤ã€ï¼Œæ¢å¤åè¿˜èƒ½å†æ¬¡æ¢å¤è¿™ä»½ä¿®æ”¹ï¼Œé€‚åˆç‰¹æ®Šåœºæ™¯ã€‚</p>
<h2 data-id="heading-6">âœ… ä¸‰ã€Git Stash è¿›é˜¶å‘½ä»¤ï¼ˆå¿…ä¼šï¼Œè§£å†³ 80% çš„é—®é¢˜ï¼‰</h2>
<p><strong>1. åˆ é™¤æŒ‡å®šå‚¨è—è®°å½•ï¼š<code>git stash pop</code>å‚¨è—ç¼–å·</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ é™¤æœ€æ–°çš„å‚¨è—è®°å½•</span>
git stash drop stash@{0}

<span class="hljs-comment"># åˆ é™¤æŒ‡å®šç¼–å·çš„å‚¨è—è®°å½•</span>
git stash drop stash@{2}
</code></pre>
<p><strong>åŠŸèƒ½</strong>ï¼š<strong>åªåˆ é™¤ï¼Œä¸æ¢å¤</strong>ã€‚å½“ä½ æœ‰ä¸€äº›æ— ç”¨çš„å‚¨è—è®°å½•ï¼Œä¸æƒ³æ¢å¤åªæƒ³æ¸…ç†æ—¶ï¼Œç”¨è¿™ä¸ªå‘½ä»¤ã€‚</p>
<p><strong>2.  åˆ é™¤æ‰€æœ‰å‚¨è—è®°å½•ï¼š<code>git stash clear</code></strong></p>
<pre><code class="hljs language-bash" lang="bash">git stash clear
</code></pre>
<p><strong>åŠŸèƒ½</strong>ï¼šæ¸…ç©º Git å‚¨è—æ ˆä¸­çš„<strong>æ‰€æœ‰</strong>å‚¨è—è®°å½•ï¼Œ<strong>æ…ç”¨</strong>ï¼æ‰§è¡Œåæ— æ³•æ¢å¤è¢«åˆ é™¤çš„è®°å½•ï¼Œé€‚åˆç¡®è®¤æ‰€æœ‰å‚¨è—éƒ½æ— ç”¨æ—¶çš„æ‰¹é‡æ¸…ç†ã€‚</p>
<p><strong>3. æŸ¥çœ‹å‚¨è—çš„ã€Œå…·ä½“ä¿®æ”¹å†…å®¹ã€ï¼š<code>git stash show</code></strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹æœ€æ–°å‚¨è—çš„ã€Œæ–‡ä»¶å˜æ›´åˆ—è¡¨ã€ï¼ˆåªæ˜¾ç¤ºæ–‡ä»¶å+å¢åˆ è¡Œæ•°ï¼‰ </span>
git stash show

<span class="hljs-comment"># æŸ¥çœ‹æœ€æ–°å‚¨è—çš„ã€Œå®Œæ•´diffè¯¦æƒ…ã€ï¼ˆæ˜¾ç¤ºå…·ä½“ä¿®æ”¹çš„ä»£ç è¡Œï¼Œæ¨èï¼‰ </span>
git stash show -p

<span class="hljs-comment"># æŸ¥çœ‹æŒ‡å®šç¼–å·å‚¨è—çš„å®Œæ•´diffè¯¦æƒ…</span>
git stash show -p stash@{1}
</code></pre>
<p><strong>åŠŸèƒ½</strong>ï¼šåœ¨æ¢å¤å‚¨è—å‰ï¼Œæƒ³å…ˆçœ‹çœ‹è¿™ä»½å‚¨è—é‡Œå…·ä½“æ”¹äº†å“ªäº›ä»£ç ï¼Œé¿å…æ¢å¤é”™å†…å®¹æ—¶ï¼Œç”¨è¿™ä¸ªå‘½ä»¤ï¼Œ<code>-p</code> å‚æ•°æ˜¯æ ¸å¿ƒï¼ˆpatch è¡¥ä¸æ¨¡å¼ï¼‰ï¼Œèƒ½çœ‹åˆ°å®Œæ•´çš„ä»£ç ä¿®æ”¹ã€‚</p>
<p><strong>1. å‚¨è—ã€Œæœªè¿½è¸ªçš„æ–°æ–‡ä»¶ã€ï¼š<code>git stash -u</code> / <code>git stash --include-untracked</code></strong></p>
<pre><code class="hljs language-bash" lang="bash">git stash -u
<span class="hljs-comment"># ç­‰ä»·å†™æ³•</span>
git stash --include-untracked
</code></pre>
<p><strong>é‡è¦ç‰¹æ€§è¡¥å……</strong>ï¼š<strong>é»˜è®¤çš„ <code>git stash</code> åªä¼šå‚¨è—ã€Œå·²è¿½è¸ªçš„æ–‡ä»¶ã€</strong>ï¼ˆå·²ç»è¢« Git ç®¡ç†çš„æ–‡ä»¶ï¼Œæ¯”å¦‚ä¹‹å‰ commit è¿‡çš„æ–‡ä»¶ï¼‰ï¼Œå¯¹äºå·¥ä½œåŒºä¸­<strong>æ–°å»ºçš„ã€ä»æœªè¢« git add è¿‡çš„æ–°æ–‡ä»¶ï¼ˆæœªè¿½è¸ªæ–‡ä»¶ï¼‰</strong> ï¼Œé»˜è®¤ä¸ä¼šè¢«å‚¨è—ã€‚</p>
<p>åŠ  <code>-u</code> å‚æ•°åï¼šä¼šæŠŠã€Œå·²è¿½è¸ªæ–‡ä»¶çš„ä¿®æ”¹ + æœªè¿½è¸ªçš„æ–°æ–‡ä»¶ã€<strong>ä¸€èµ·å‚¨è—</strong>ï¼Œå·¥ä½œåŒºå½»åº•å¹²å‡€ï¼Œè¿æ–°æ–‡ä»¶éƒ½è¢«éšè—äº†ã€‚
<strong>5. å‚¨è—ã€Œå¿½ç•¥çš„æ–‡ä»¶ã€ï¼š<code>git stash -a</code> / <code>git stash --all</code></strong></p>
<pre><code class="hljs language-bash" lang="bash">git stash -a
<span class="hljs-comment"># ç­‰ä»·å†™æ³•</span>
git stash --all
</code></pre>
<p><strong>åŠŸèƒ½</strong>ï¼šæœ€å¼ºçš„å‚¨è—å‘½ä»¤ï¼Œä¼šå‚¨è—ã€Œå·²è¿½è¸ªæ–‡ä»¶ä¿®æ”¹ + æœªè¿½è¸ªæ–°æ–‡ä»¶ + .gitignore ä¸­å¿½ç•¥çš„æ–‡ä»¶ã€ï¼ˆæ¯”å¦‚ node_modulesã€dist ç­‰ï¼‰ï¼Œé€‚åˆéœ€è¦å®Œå…¨æ¸…ç©ºå·¥ä½œåŒºçš„åœºæ™¯ï¼Œæ—¥å¸¸å¼€å‘å¾ˆå°‘ç”¨ï¼Œç‰¹æ®Šåœºæ™¯ï¼ˆæ¯”å¦‚åˆ‡æ¢åˆ†æ”¯å‰å½»åº•æ¸…ç†ï¼‰å¯ç”¨ã€‚</p>
<h2 data-id="heading-7">âœ… å››ã€Git Stash é¿å‘æŒ‡å— &amp; æ ¸å¿ƒæ³¨æ„äº‹é¡¹ï¼ˆé‡ä¸­ä¹‹é‡ï¼Œå¿…çœ‹ï¼ï¼‰</h2>
<p>è¿™éƒ¨åˆ†æ˜¯æœ€å®¹æ˜“è¸©å‘çš„åœ°æ–¹ï¼Œå¾ˆå¤šäººç”¨ stash å‡ºé—®é¢˜ï¼Œéƒ½æ˜¯å› ä¸ºæ²¡æ³¨æ„è¿™äº›è§„åˆ™ï¼Œ<strong>å…¨éƒ¨è®°ä½ï¼Œèƒ½é¿å¼€ 99% çš„å‘ï¼</strong></p>
<p><strong>âœ… æ³¨æ„ 1ï¼š<code>git stash</code> ä¸ä¼šå‚¨è—çš„å†…å®¹ï¼ˆé»˜è®¤è¡Œä¸ºï¼‰</strong></p>
<p>é»˜è®¤æ‰§è¡Œ <code>git stash</code> æ—¶ï¼Œä»¥ä¸‹å†…å®¹<strong>ç»å¯¹ä¸ä¼šè¢«å‚¨è—</strong>ï¼Œä¼šåŸå°ä¸åŠ¨ç•™åœ¨å·¥ä½œåŒºï¼š</p>
<ul>
<li>
<p><strong>ä»æœªè¢« Git è¿½è¸ªè¿‡çš„æ–‡ä»¶</strong>ï¼ˆæ–°å»ºçš„ã€æ²¡æ‰§è¡Œè¿‡ <code>git add</code> çš„æ–‡ä»¶ï¼‰ï¼›</p>
</li>
<li>
<p><strong>è¢« <code>.gitignore</code> å¿½ç•¥çš„æ–‡ä»¶</strong>ï¼ˆæ¯”å¦‚ä¾èµ–åŒ…ã€æ‰“åŒ…äº§ç‰©ã€æ—¥å¿—æ–‡ä»¶ï¼‰ï¼›</p>
</li>
<li>
<p><strong>å·²ç»æäº¤åˆ°ç‰ˆæœ¬åº“çš„æ–‡ä»¶</strong>ï¼ˆåªä¼šå¤„ç†ã€Œæœªæäº¤ã€çš„ä¿®æ”¹ï¼‰ã€‚</p>
</li>
</ul>
<blockquote>
<p>âœ… è§£å†³åŠæ³•ï¼šéœ€è¦å‚¨è—æœªè¿½è¸ªæ–‡ä»¶ç”¨ <code>git stash -u</code>ï¼Œéœ€è¦å‚¨è—å¿½ç•¥æ–‡ä»¶ç”¨ <code>git stash -a</code>ã€‚</p>
</blockquote>
<p><strong>âœ… æ³¨æ„ 2ï¼šstash çš„æ¢å¤ä¸ã€Œåˆ†æ”¯æ— å…³ã€ï¼Œä½†æœ‰æœ€ä½³å®è·µ</strong></p>
<p>å¾ˆå¤šäººè¯¯ä»¥ä¸ºã€Œåœ¨å“ªä¸ªåˆ†æ”¯ stashï¼Œå°±åªèƒ½åœ¨å“ªä¸ªåˆ†æ”¯æ¢å¤ã€ï¼Œ<strong>è¿™ä¸ªè®¤çŸ¥æ˜¯é”™è¯¯çš„ï¼</strong></p>
<p><strong>çœŸç›¸</strong>ï¼šGit çš„ stash æ˜¯ã€Œå…¨å±€çš„ã€ï¼Œå‚¨è—çš„æ˜¯ã€Œæ–‡ä»¶çš„ä¿®æ”¹å†…å®¹ã€ï¼Œä¸æ˜¯å’Œåˆ†æ”¯ç»‘å®šçš„ï¼Œä½ å¯ä»¥åœ¨ <code>dev</code> åˆ†æ”¯ stashï¼Œç„¶ååˆ‡æ¢åˆ° <code>test</code> åˆ†æ”¯æ¢å¤ã€‚</p>
<p>æœ€ä½³å®è·µï¼š<strong>å°½é‡åœ¨å“ªä¸ªåˆ†æ”¯å‚¨è—ï¼Œå°±åœ¨å“ªä¸ªåˆ†æ”¯æ¢å¤</strong>ï¼</p>
<blockquote>
<p>åŸå› ï¼šä¸åŒåˆ†æ”¯çš„ä»£ç å·®å¼‚å¯èƒ½å¾ˆå¤§ï¼Œè·¨åˆ†æ”¯æ¢å¤ stash å¤§æ¦‚ç‡ä¼šè§¦å‘ã€Œä»£ç å†²çªã€ï¼Œå¤„ç†å†²çªä¼šå¢åŠ ä¸å¿…è¦çš„éº»çƒ¦ï¼Œé™¤éä½ æ˜ç¡®çŸ¥é“ä¸¤ä»½ä»£ç æ— å†²çªã€‚</p>
</blockquote>
<p><strong>âœ… æ³¨æ„ 3ï¼šå‚¨è—è®°å½•çš„ã€Œç”Ÿå‘½å‘¨æœŸã€</strong></p>
<p>å‚¨è—è®°å½•ä¸æ˜¯æ°¸ä¹…ä¿å­˜çš„ï¼Œå®ƒæ˜¯ã€Œä¸´æ—¶ç¼“å­˜ã€ï¼Œä»¥ä¸‹æ“ä½œä¼šåˆ é™¤å‚¨è—è®°å½•ï¼š</p>
<ul>
<li>æ‰§è¡Œ <code>git stash pop ç¼–å·</code>ï¼šæ¢å¤åè‡ªåŠ¨åˆ é™¤è¯¥è®°å½•ï¼›</li>
<li>æ‰§è¡Œ <code>git stash drop ç¼–å·</code>ï¼šæ‰‹åŠ¨åˆ é™¤è¯¥è®°å½•ï¼›</li>
<li>æ‰§è¡Œ <code>git stash clear</code>ï¼šåˆ é™¤æ‰€æœ‰è®°å½•ï¼›</li>
<li>ä»“åº“è¢«åˆ é™¤ / è¿ç§»ï¼šå‚¨è—è®°å½•ä¼šè·Ÿç€ä»“åº“æ¶ˆå¤±ï¼ˆä¸ä¼šåŒæ­¥åˆ°è¿œç¨‹ä»“åº“ï¼‰ã€‚</li>
</ul>
<p><strong>âœ… æ³¨æ„ 4ï¼šstash æ— æ³•å‚¨è—ã€Œç©ºæ–‡ä»¶ / ç©ºç›®å½•ã€</strong></p>
<p>å¦‚æœä½ çš„ä¿®æ”¹åªæ˜¯æ–°å»ºäº†ä¸€ä¸ªç©ºæ–‡ä»¶ / ç©ºç›®å½•ï¼Œæ‰§è¡Œ <code>git stash</code> ä¸ä¼šç”Ÿæ•ˆï¼ŒGit ä¼šæç¤ºã€ŒNo local changes to saveã€ï¼Œè¿™æ˜¯ Git çš„é»˜è®¤è§„åˆ™ï¼Œæ— éœ€å¤„ç†ã€‚</p>
<p><strong>âœ… äº”ã€Git Stash å®Œæ•´å·¥ä½œæµç¨‹æ¼”ç¤ºï¼ˆå·¥ä½œä¸­æœ€å¸¸ç”¨ï¼Œç›´æ¥å¥—ç”¨ï¼‰</strong></p>
<p>ç»™ä½ ä¸€å¥—å®Œæ•´çš„ã€Œæ ‡å‡†æµç¨‹ã€ï¼Œé‡åˆ°ã€Œä»£ç æ²¡å†™å®Œè¦åˆ‡åˆ†æ”¯ã€çš„åœºæ™¯ï¼Œç›´æ¥æŒ‰æ­¥éª¤æ‰§è¡Œå³å¯ï¼Œé›¶é”™è¯¯ã€é›¶è¸©å‘ï¼Œè¿™æ˜¯å·¥ä½œä¸­æœ€ç»å…¸çš„ç”¨æ³•ï¼š</p>
<h3 data-id="heading-8">åœºæ™¯ï¼šåœ¨ dev åˆ†æ”¯å¼€å‘æ–°åŠŸèƒ½ï¼Œå†™åˆ°ä¸€åŠï¼Œéœ€è¦åˆ‡æ¢åˆ° test åˆ†æ”¯ä¿®ç´§æ€¥ Bug</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ­¥éª¤1ï¼šå½“å‰åœ¨ dev åˆ†æ”¯ï¼Œä»£ç æ²¡å†™å®Œï¼Œå¸¦å¤‡æ³¨å‚¨è—æ‰€æœ‰ä¿®æ”¹ï¼ˆæ¨èå¸¦-mï¼‰</span>
git stash push -m <span class="hljs-string">"dev-ä¸ªäººä¸­å¿ƒæ¨¡å—å¼€å‘-æœªå®Œæˆ"</span>

<span class="hljs-comment"># æ­¥éª¤2ï¼šæŸ¥çœ‹å‚¨è—è®°å½•ï¼Œç¡®è®¤å‚¨è—æˆåŠŸï¼ˆå¯é€‰ï¼Œå…»æˆå¥½ä¹ æƒ¯ï¼‰</span>
git stash list

<span class="hljs-comment"># æ­¥éª¤3ï¼šåˆ‡æ¢åˆ°ç›®æ ‡åˆ†æ”¯ï¼ˆæ­¤æ—¶å·¥ä½œåŒºå¹²å‡€ï¼Œåˆ‡æ¢æ— ä»»ä½•é—®é¢˜ï¼‰</span>
git checkout <span class="hljs-built_in">test</span>

<span class="hljs-comment"># æ­¥éª¤4ï¼šåœ¨ test åˆ†æ”¯ä¿®å¤ Bugï¼Œå®Œæˆåæ­£å¸¸æäº¤</span>
git add . git commit -m <span class="hljs-string">"test-ä¿®å¤è®¢å•æ”¯ä»˜å¤±è´¥bug"</span>

<span class="hljs-comment"># æ­¥éª¤5ï¼šåˆ‡å›åŸåˆ†æ”¯</span>
dev git checkout dev

<span class="hljs-comment"># æ­¥éª¤6ï¼šæ¢å¤ä¹‹å‰å‚¨è—çš„æœªå®Œæˆä»£ç ï¼ˆæ¨èç”¨popï¼Œæ¢å¤ååˆ é™¤è®°å½•ï¼‰</span>
git stash pop

<span class="hljs-comment"># æ­¥éª¤7ï¼šç»§ç»­å¼€å‘æœªå®Œæˆçš„åŠŸèƒ½å³å¯ï¼Œä»£ç å’Œä¹‹å‰å®Œå…¨ä¸€è‡´ âœ”ï¸</span>
</code></pre>
<h2 data-id="heading-9"><strong>âœ… æ ¸å¿ƒçŸ¥è¯†ç‚¹é€Ÿè®°</strong></h2>
<h3 data-id="heading-10">âœ… æ ¸å¿ƒæ¦‚å¿µ</h3>
<ol>
<li>git stashï¼šä¸´æ—¶ä¿å­˜æœªæäº¤ä¿®æ”¹ï¼Œè®©å·¥ä½œåŒºå˜å¹²å‡€ï¼Œæ ¸å¿ƒåœºæ™¯ã€Œä»£ç æ²¡å†™å®Œè¦åˆ‡åˆ†æ”¯ã€ï¼›</li>
<li>stash æ˜¯ã€Œæ ˆç»“æ„ã€ï¼Œåè¿›å…ˆå‡ºï¼Œæœ€æ–°çš„è®°å½•æ˜¯ stash@{0}ã€‚</li>
</ol>
<h3 data-id="heading-11">âœ… å¿…ä¼šæ ¸å¿ƒå‘½ä»¤ï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åºï¼‰</h3>
<ol>
<li>å‚¨è—ï¼š<code>git stash push -m "å¤‡æ³¨"</code> ï¼ˆå¸¦å¤‡æ³¨ï¼Œæ¨èé¦–é€‰ï¼‰</li>
<li>æŸ¥çœ‹ï¼š<code>git stash list</code></li>
<li>æ¢å¤ï¼š<code>git stash pop</code> ï¼ˆæ¢å¤ + åˆ é™¤ï¼Œæ—¥å¸¸é¦–é€‰ï¼‰ / <code>git stash apply</code>ï¼ˆæ¢å¤ä¸åˆ é™¤ï¼Œå¤‡é€‰ï¼‰</li>
<li>åˆ é™¤ï¼š<code>git stash drop ç¼–å·</code>ï¼ˆåˆ æŒ‡å®šï¼‰ / <code>git stash clear</code>ï¼ˆåˆ å…¨éƒ¨ï¼‰</li>
<li>æŸ¥çœ‹ä¿®æ”¹ï¼š<code>git stash show -p</code></li>
</ol>
<h3 data-id="heading-12">âœ… ä¸¤å¤§é¿å‘é‡ç‚¹</h3>
<ol>
<li>é»˜è®¤ä¸å‚¨è—ã€Œæœªè¿½è¸ªæ–‡ä»¶ã€å’Œã€Œå¿½ç•¥æ–‡ä»¶ã€ï¼Œéœ€è¦åˆ™åŠ  <code>-u</code> / <code>-a</code>ï¼›</li>
<li>å°½é‡ã€ŒåŒåˆ†æ”¯å‚¨è—ã€åŒåˆ†æ”¯æ¢å¤ã€ï¼Œé¿å…è·¨åˆ†æ”¯å†²çªã€‚</li>
</ol>
<h3 data-id="heading-13">âœ… æ ¸å¿ƒåŒºåˆ«é€Ÿè®°</h3>
<p><code>git stash pop</code> â†’ æ¢å¤ + åˆ è®°å½•ï¼›<code>git stash apply</code> â†’ æ¢å¤ä¸åˆ è®°å½•ã€‚</p>
<h5 data-id="heading-14"><strong>å°å‰§åœº</strong>åˆ†äº«å‡ ä¸ªå¥½çœ‹çš„MDä¸»é¢˜</h5>
<ul>
<li><strong>qklhk-chocolate</strong></li>
<li>scrolls-light</li>
<li>Chinese-red</li>
<li>nico</li>
<li>devui-blue</li>
<li>z-blue</li>
<li>yu</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ ˆä¸é˜Ÿåˆ—ï¼šåŠ›æ‰£â€œåŒèƒèƒâ€çš„ç›¸çˆ±ç›¸æ€ï¼Œä»æ‹¬å·é…å¯¹åˆ°æ»‘çª—æœ€å¤§å€¼ï¼]]></title>    <link>https://juejin.cn/post/7602503154505302057</link>    <guid>https://juejin.cn/post/7602503154505302057</guid>    <pubDate>2026-02-03T13:46:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602503154505302057" data-draft-id="7602497125267701766" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ ˆä¸é˜Ÿåˆ—ï¼šåŠ›æ‰£â€œåŒèƒèƒâ€çš„ç›¸çˆ±ç›¸æ€ï¼Œä»æ‹¬å·é…å¯¹åˆ°æ»‘çª—æœ€å¤§å€¼ï¼"/> <meta itemprop="keywords" content="JavaScript,ç®—æ³•,LeetCode"/> <meta itemprop="datePublished" content="2026-02-03T13:46:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”Ÿæ¤°ä¸ç»’æ‹¿é“"/> <meta itemprop="url" content="https://juejin.cn/user/4185180725584116"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ ˆä¸é˜Ÿåˆ—ï¼šåŠ›æ‰£â€œåŒèƒèƒâ€çš„ç›¸çˆ±ç›¸æ€ï¼Œä»æ‹¬å·é…å¯¹åˆ°æ»‘çª—æœ€å¤§å€¼ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4185180725584116/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”Ÿæ¤°ä¸ç»’æ‹¿é“
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T13:46:56.000Z" title="Tue Feb 03 2026 13:46:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä½ ä»¥ä¸ºæ ˆå’Œé˜Ÿåˆ—åªæ˜¯æ•°æ®ç»“æ„è¯¾æœ¬ä¸Šçš„ä¸¤ä¸ªåè¯ï¼Ÿ<br/>
ä¸ï¼ä»–ä»¬æ˜¯åŠ›æ‰£é¢˜æµ·é‡Œæœ€é»˜å¥‘çš„â€œåŒå­æ˜Ÿâ€â€”â€”ä¸€ä¸ªåè¿›å…ˆå‡ºï¼Œä¸€ä¸ªå…ˆè¿›å…ˆå‡ºï¼›ä¸€ä¸ªåƒå ç›˜å­ï¼Œä¸€ä¸ªåƒæ’é˜Ÿä¹°å¥¶èŒ¶ã€‚<br/>
ä»Šå¤©ï¼Œæˆ‘ä»¬å°±ç”¨7é“ç»å…¸é¢˜ï¼Œæ­å¼€è¿™å¯¹â€œå†¤å®¶â€çš„çœŸé¢ç›®ï¼</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸŒŸ å¼•å­ï¼šä¸ºä»€ä¹ˆæ ˆå’Œé˜Ÿåˆ—æ€»è¢«ä¸€èµ·è®²ï¼Ÿ</h2>
<p>å› ä¸ºå®ƒä»¬<strong>ç®€å•ä½†å¼ºå¤§</strong>ï¼</p>
<ul>
<li><strong>æ ˆï¼ˆStackï¼‰</strong> ï¼šLIFOï¼ˆLast In First Outï¼‰ï¼Œå°±åƒä½ å¾€æ¡Œä¸Šå ç›˜å­ï¼Œæœ€åæ”¾ä¸Šå»çš„æœ€å…ˆæ‹¿èµ°ã€‚</li>
<li><strong>é˜Ÿåˆ—ï¼ˆQueueï¼‰</strong> ï¼šFIFOï¼ˆFirst In First Outï¼‰ï¼Œå°±åƒä½ åœ¨å–œèŒ¶é—¨å£æ’é˜Ÿï¼Œå…ˆæ¥çš„å…ˆå–ã€‚</li>
</ul>
<p>ä½†åˆ«å°çœ‹å®ƒä»¬â€”â€”<strong>æ‹¬å·åŒ¹é…ã€è¡¨è¾¾å¼æ±‚å€¼ã€æ»‘åŠ¨çª—å£ã€é«˜é¢‘å…ƒç´ â€¦â€¦ç”šè‡³äº’ç›¸æ¨¡æ‹Ÿå¯¹æ–¹ï¼</strong> åŠ›æ‰£ä¸­å¤§é‡ä¸­ç­‰é¢˜éƒ½é å®ƒä»¬â€œæ’‘åœºå­â€ã€‚</p>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬è¾¹åˆ·é¢˜è¾¹æ‚Ÿé“ï¼</p>
<hr/>
<h2 data-id="heading-1">ğŸ”¥ é¢˜1ï¼šæœ‰æ•ˆçš„æ‹¬å·ï¼ˆLeetCode 20ï¼‰â€”â€”æ ˆçš„â€œå¤„å¥³ç§€â€</h2>
<blockquote>
<p>ç»™å®š <code>"()[]{}"</code>ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰æ•ˆã€‚</p>
</blockquote>
<p><strong>æ€è·¯</strong>ï¼šé‡åˆ°å·¦æ‹¬å· <code>(</code>ã€<code>[</code>ã€<code>{</code>ï¼Œå°±æŠŠå¯¹åº”çš„å³æ‹¬å·å‹å…¥æ ˆï¼›é‡åˆ°å³æ‹¬å·ï¼Œå°±çœ‹å®ƒæ˜¯å¦ç­‰äºæ ˆé¡¶ã€‚ä¸ç­‰ï¼Ÿç›´æ¥ <code>false</code>ï¼</p>
<pre><code class="hljs language-arduino" lang="arduino">var isValid = <span class="hljs-built_in">function</span>(s) {
  <span class="hljs-type">const</span> stack = [];
  <span class="hljs-keyword">for</span> (let c of s) {
    <span class="hljs-keyword">switch</span> (c) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'('</span>: stack.<span class="hljs-built_in">push</span>(<span class="hljs-string">')'</span>); <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'['</span>: stack.<span class="hljs-built_in">push</span>(<span class="hljs-string">']'</span>); <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'{'</span>: stack.<span class="hljs-built_in">push</span>(<span class="hljs-string">'}'</span>); <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">if</span> (c !== stack.<span class="hljs-built_in">pop</span>()) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  }
  <span class="hljs-keyword">return</span> stack.length === <span class="hljs-number">0</span>;
};
</code></pre>
<p>ğŸ’¡ <strong>å¹½é»˜ç‚¹</strong>ï¼šè¿™é¢˜å°±åƒç›¸äº²â€”â€”å·¦æ‹¬å·æ˜¯â€œå‘å‡ºé‚€è¯·â€ï¼Œå³æ‹¬å·æ˜¯â€œèµ´çº¦â€ã€‚å¦‚æœèµ´çº¦çš„äººä¸å¯¹ï¼ˆæ¯”å¦‚ <code>{</code> é…äº† <code>]</code>ï¼‰ï¼Œé‚£è¿™åœºçº¦ä¼šå°±é»„äº†ï¼</p>
<hr/>
<h2 data-id="heading-2">ğŸ§¹ é¢˜2ï¼šåˆ é™¤ç›¸é‚»é‡å¤é¡¹ï¼ˆLeetCode 1047ï¼‰â€”â€”æ ˆçš„â€œæ¶ˆæ¶ˆä¹â€æ¨¡å¼</h2>
<blockquote>
<p>è¾“å…¥ <code>"abbaca"</code> â†’ è¾“å‡º <code>"ca"</code>ï¼ˆå…ˆåˆ  <code>bb</code>ï¼Œå†åˆ  <code>aa</code>ï¼‰</p>
</blockquote>
<p><strong>æ€è·¯</strong>ï¼šéå†å­—ç¬¦ä¸²ï¼Œè‹¥å½“å‰å­—ç¬¦å’Œæ ˆé¡¶ç›¸åŒï¼Œå°±å¼¹å‡ºï¼ˆæ¶ˆæ‰ï¼‰ï¼›å¦åˆ™å‹å…¥ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">var removeDuplicates = <span class="hljs-built_in">function</span>(s) {
  <span class="hljs-type">const</span> stack = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> x of s) {
    <span class="hljs-keyword">if</span> (stack.length &amp;&amp; x === stack[stack.length - <span class="hljs-number">1</span>]) {
      stack.<span class="hljs-built_in">pop</span>(); <span class="hljs-comment">// æ¶ˆæ¶ˆä¹ï¼</span>
    } <span class="hljs-keyword">else</span> {
      stack.<span class="hljs-built_in">push</span>(x);
    }
  }
  <span class="hljs-keyword">return</span> stack.<span class="hljs-built_in">join</span>(<span class="hljs-string">""</span>);
};
</code></pre>
<p>ğŸ¯ <strong>æ€è€ƒ</strong>ï¼šè¿™ä¸å°±æ˜¯ç«¥å¹´ç©çš„â€œè¿è¿çœ‹â€å—ï¼Ÿæ ˆå°±æ˜¯ä½ çš„â€œæ¶ˆé™¤è®°å¿†å™¨â€ï¼</p>
<hr/>
<h2 data-id="heading-3">ğŸ§® é¢˜3ï¼šé€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼ï¼ˆLeetCode 150ï¼‰â€”â€”æ ˆçš„â€œè®¡ç®—å™¨â€èº«ä»½</h2>
<blockquote>
<p>è¾“å…¥ <code>["2","1","+","3","*"]</code> â†’ è¾“å‡º <code>9</code>ï¼ˆå³ <code>(2+1)*3</code>ï¼‰</p>
</blockquote>
<p><strong>æ€è·¯</strong>ï¼šé‡åˆ°æ•°å­—å°±å‹æ ˆï¼›é‡åˆ°è¿ç®—ç¬¦ï¼Œå¼¹å‡ºä¸¤ä¸ªæ•°è®¡ç®—åå†å‹å›å»ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">var</span> evalRPN = <span class="hljs-keyword">function</span>(<span class="hljs-params">tokens</span>) {
  <span class="hljs-keyword">const</span> ops = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>([
    [<span class="hljs-string">"+"</span>, <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> b + a],
    [<span class="hljs-string">"-"</span>, <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> b - a],
    [<span class="hljs-string">"*"</span>, <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> b * a],
    [<span class="hljs-string">"/"</span>, <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">trunc</span>(b / a)]
  ]);
  <span class="hljs-keyword">const</span> stack = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> t <span class="hljs-keyword">of</span> tokens) {
    <span class="hljs-keyword">if</span> (ops.<span class="hljs-title function_">has</span>(t)) {
      stack.<span class="hljs-title function_">push</span>(ops.<span class="hljs-title function_">get</span>(t)(stack.<span class="hljs-title function_">pop</span>(), stack.<span class="hljs-title function_">pop</span>()));
    } <span class="hljs-keyword">else</span> {
      stack.<span class="hljs-title function_">push</span>(<span class="hljs-title class_">Number</span>(t));
    }
  }
  <span class="hljs-keyword">return</span> stack.<span class="hljs-title function_">pop</span>();
};
</code></pre>
<p>ğŸ§  <strong>å†·çŸ¥è¯†</strong>ï¼šé€†æ³¢å…°è¡¨è¾¾å¼ä¸éœ€è¦æ‹¬å·ï¼æ ˆå¤©ç„¶é€‚åˆå¤„ç†è¿™ç§â€œåç¼€è¡¨è¾¾å¼â€ã€‚</p>
<hr/>
<h2 data-id="heading-4">ğŸ“Š é¢˜4ï¼šå‰Kä¸ªé«˜é¢‘å…ƒç´ ï¼ˆLeetCode 347ï¼‰â€”â€”é˜Ÿåˆ—çš„â€œæ›¿è¡¥ç™»åœºâ€</h2>
<blockquote>
<p>è™½ç„¶è¿™é¢˜å¸¸ç”¨å †ï¼Œä½†æˆ‘ä»¬å¯ä»¥ç”¨<strong>Map + æ’åº</strong>æå®šï¼ˆé¢è¯•æ—¶å¯æä¼˜å…ˆé˜Ÿåˆ—ä¼˜åŒ–ï¼‰ã€‚</p>
</blockquote>
<pre><code class="hljs language-ini" lang="ini">var <span class="hljs-attr">topKFrequent</span> = function(nums, k) {
  const <span class="hljs-attr">map</span> = new Map()<span class="hljs-comment">;</span>
  for (let n of nums) map.set(n, (map.get(n) || 0) + 1)<span class="hljs-comment">;</span>
  
  return Array.from(map)
    .sort((a, b) =&gt; b<span class="hljs-section">[1]</span> - a<span class="hljs-section">[1]</span>)
    .slice(0, k)
    .map(<span class="hljs-attr">item</span> =&gt; item[<span class="hljs-number">0</span>])<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<p>ğŸ“Œ <strong>è¿›é˜¶æç¤º</strong>ï¼šçœŸæ­£é«˜æ•ˆçš„åšæ³•æ˜¯ç”¨**æœ€å°å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰**ç»´æŠ¤Top Kï¼Œæ—¶é—´å¤æ‚åº¦ O(n log k)ã€‚ä½†JSæ²¡æœ‰å†…ç½®å †ï¼Œæ‰€ä»¥æ’åºä¹ŸOKï¼</p>
<hr/>
<h2 data-id="heading-5">ğŸªŸ é¢˜5ï¼šæ»‘åŠ¨çª—å£æœ€å¤§å€¼ï¼ˆLeetCode 239ï¼‰â€”â€”å•è°ƒé˜Ÿåˆ—çš„é«˜å…‰æ—¶åˆ»ï¼</h2>
<blockquote>
<p>æ•°ç»„ <code>[1,3,-1,-3,5,3,6,7]</code>ï¼Œçª—å£å¤§å°3 â†’ è¾“å‡º <code>[3,3,5,5,6,7]</code></p>
</blockquote>
<p><strong>éš¾ç‚¹</strong>ï¼šæš´åŠ›æ³• O(nk) ä¼šè¶…æ—¶ï¼æˆ‘ä»¬éœ€è¦ <strong>O(n)</strong> è§£æ³•ã€‚</p>
<p><strong>è§£æ³•</strong>ï¼šç”¨<strong>åŒç«¯é˜Ÿåˆ—ï¼ˆdequeï¼‰ç»´æŠ¤å•è°ƒé€’å‡ä¸‹æ ‡</strong>ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">var <span class="hljs-attr">maxSlidingWindow</span> = function(nums, k) {
  const <span class="hljs-attr">q</span> = []<span class="hljs-comment">; // å­˜ä¸‹æ ‡ï¼Œé˜Ÿé¦–æ°¸è¿œæ˜¯å½“å‰çª—å£æœ€å¤§å€¼çš„ä¸‹æ ‡</span>
  const <span class="hljs-attr">ans</span> = []<span class="hljs-comment">;</span>

  for (let <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; k; i++) {</span>
    while (q.length &amp;&amp; nums<span class="hljs-section">[i]</span> &gt;= nums<span class="hljs-section">[q.at(-1)]</span>) q.pop()<span class="hljs-comment">;</span>
    q.push(i)<span class="hljs-comment">;</span>
  }
  ans.push(nums<span class="hljs-section">[q[0]]</span>)<span class="hljs-comment">;</span>

  for (let <span class="hljs-attr">i</span> = k<span class="hljs-comment">; i &lt; nums.length; i++) {</span>
    while (q.length &amp;&amp; nums<span class="hljs-section">[i]</span> &gt;= nums<span class="hljs-section">[q.at(-1)]</span>) q.pop()<span class="hljs-comment">;</span>
    q.push(i)<span class="hljs-comment">;</span>
    if (q<span class="hljs-section">[0]</span> &lt;= i - k) q.shift()<span class="hljs-comment">; // ç§»é™¤è¿‡æœŸä¸‹æ ‡</span>
    ans.push(nums<span class="hljs-section">[q[0]]</span>)<span class="hljs-comment">;</span>
  }
  return ans<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<p>ğŸ”¥ <strong>çµé­‚æ¯”å–»</strong>ï¼šè¿™ä¸ªé˜Ÿåˆ—å°±åƒä¸€ä¸ªâ€œä¿é•–å›¢é˜Ÿâ€â€”â€”æ–°æ¥çš„ä¿é•–ï¼ˆæ•°å­—ï¼‰å¦‚æœæ¯”è€ä¿é•–å¼ºï¼Œå°±æŠŠå¼±çš„è¸¢å‡ºå»ï¼Œåªç•™ä¸‹æœ€å¼ºçš„ç«™åœ¨å‰é¢ï¼</p>
<hr/>
<h2 data-id="heading-6">ğŸ”„ é¢˜6 &amp; 7ï¼šæ ˆä¸é˜Ÿåˆ—çš„â€œäº’ç›¸æ¨¡ä»¿ç§€â€</h2>
<h3 data-id="heading-7">ç”¨æ ˆå®ç°é˜Ÿåˆ—ï¼ˆLeetCode 232ï¼‰</h3>
<p>ä¸¤ä¸ªæ ˆï¼š<code>inStack</code> è´Ÿè´£å…¥é˜Ÿï¼Œ<code>outStack</code> è´Ÿè´£å‡ºé˜Ÿã€‚<br/>
å½“ <code>outStack</code> ç©ºäº†ï¼Œå°±æŠŠ <code>inStack</code> å…¨éƒ¨å€’è¿‡æ¥ï¼</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">var</span> MyQueue = function() {
  <span class="hljs-keyword">this</span>.<span class="hljs-keyword">is</span> = []; <span class="hljs-comment">// in stack</span>
  <span class="hljs-keyword">this</span>.os = []; <span class="hljs-comment">// out stack</span>
};

MyQueue.prototype.push = function(x) { <span class="hljs-keyword">this</span>.<span class="hljs-keyword">is</span>.push(x); };

MyQueue.prototype.pop = function() {
  <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.os.length) {
    <span class="hljs-keyword">while</span> (<span class="hljs-keyword">this</span>.<span class="hljs-keyword">is</span>.length) <span class="hljs-keyword">this</span>.os.push(<span class="hljs-keyword">this</span>.<span class="hljs-keyword">is</span>.pop());
  }
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.os.pop();
};
</code></pre>
<h3 data-id="heading-8">ç”¨é˜Ÿåˆ—å®ç°æ ˆï¼ˆLeetCode 225ï¼‰</h3>
<p>ä¸€ä¸ªé˜Ÿåˆ—å°±å¤Ÿäº†ï¼æ¯æ¬¡ <code>push</code> åï¼ŒæŠŠå‰é¢çš„å…ƒç´ å…¨ç§»åˆ°åé¢ï¼Œè®©æ–°å…ƒç´ â€œç«™Cä½â€ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">MyStack.prototype.push = <span class="hljs-built_in">function</span>(x) {
  <span class="hljs-keyword">this</span>.queue.<span class="hljs-built_in">push</span>(x);
  let size = <span class="hljs-keyword">this</span>.queue.length;
  <span class="hljs-keyword">while</span> (--size) { <span class="hljs-comment">// æŠŠå‰é¢çš„n-1ä¸ªæŒªåˆ°åé¢</span>
    <span class="hljs-keyword">this</span>.queue.<span class="hljs-built_in">push</span>(<span class="hljs-keyword">this</span>.queue.<span class="hljs-built_in">shift</span>());
  }
};
</code></pre>
<p>ğŸ­ <strong>å¹½é»˜æ€»ç»“</strong>ï¼š</p>
<ul>
<li><strong>æ ˆæ¨¡æ‹Ÿé˜Ÿåˆ—</strong>ï¼šåƒæŠŠä¸€æ‘ä¹¦å€’è¿›å¦ä¸€ä¸ªç®±å­ï¼Œé¡ºåºå°±åè¿‡æ¥äº†ã€‚</li>
<li><strong>é˜Ÿåˆ—æ¨¡æ‹Ÿæ ˆ</strong>ï¼šåƒåœ¨é˜Ÿä¼æœ«å°¾æ’é˜Ÿåï¼Œç«‹åˆ»æŠŠå‰é¢æ‰€æœ‰äººè¯·åˆ°ä½ åé¢â€”â€”ä½ å°±æˆäº†â€œæœ€åä¸€ä¸ªè¿›ï¼Œç¬¬ä¸€ä¸ªå‡ºâ€ï¼</li>
</ul>
<hr/>
<h2 data-id="heading-9">âœ… æ€»ç»“ï¼šæ ˆä¸é˜Ÿåˆ—çš„â€œæ­¦åŠŸç§˜ç±â€</h2>



































<table><thead><tr><th>åœºæ™¯</th><th>æ•°æ®ç»“æ„</th><th>æ ¸å¿ƒæ€æƒ³</th></tr></thead><tbody><tr><td>æ‹¬å·åŒ¹é…ã€è¡¨è¾¾å¼æ±‚å€¼</td><td><strong>æ ˆ</strong></td><td>åè¿›å…ˆå‡ºï¼Œå¤©ç„¶åŒ¹é…åµŒå¥—ç»“æ„</td></tr><tr><td>æ¶ˆé™¤ç›¸é‚»é‡å¤</td><td><strong>æ ˆ</strong></td><td>å¯¹æ¯”æ ˆé¡¶ï¼Œç›¸åŒåˆ™æ¶ˆ</td></tr><tr><td>æ»‘åŠ¨çª—å£æœ€å€¼</td><td><strong>å•è°ƒé˜Ÿåˆ—</strong></td><td>ç»´æŠ¤é€’å‡/é€’å¢ï¼Œé˜Ÿé¦–å³ç­”æ¡ˆ</td></tr><tr><td>FIFOè¡Œä¸º</td><td><strong>é˜Ÿåˆ—</strong></td><td>å…ˆæ¥å…ˆæœåŠ¡</td></tr><tr><td>äº’ç›¸å®ç°</td><td><strong>åŒæ ˆ or å•é˜Ÿåˆ—</strong></td><td>åˆ©ç”¨â€œå€’è…¾â€æ”¹å˜é¡ºåº</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-10">ğŸ’¬ å†™åœ¨æœ€å</h2>
<p>æ ˆå’Œé˜Ÿåˆ—ï¼Œçœ‹ä¼¼ç®€å•ï¼Œå´æ˜¯<strong>ç®—æ³•ä¸–ç•Œçš„åŸºçŸ³</strong>ã€‚<br/>
æŒæ¡å®ƒä»¬ï¼Œä½ ä¸ä»…èƒ½ç§’æ€æ‹¬å·é¢˜ï¼Œè¿˜èƒ½åœ¨ç³»ç»Ÿè®¾è®¡ä¸­ä¼˜é›…å¤„ç†ä»»åŠ¡è°ƒåº¦ã€ç¼“å­˜æ·˜æ±°ã€è¡¨è¾¾å¼è§£æâ€¦â€¦</p>
<blockquote>
<p><strong>è®°ä½</strong>ï¼š</p>
<ul>
<li>é‡åˆ°â€œæœ€è¿‘ç›¸å…³æ€§â€ â†’ æƒ³æ ˆ</li>
<li>é‡åˆ°â€œé¡ºåºå¤„ç†â€ â†’ æƒ³é˜Ÿåˆ—</li>
<li>é‡åˆ°â€œæœ€å€¼æ»‘åŠ¨â€ â†’ æƒ³å•è°ƒé˜Ÿåˆ—</li>
</ul>
</blockquote>
<p>ä¸‹æ¬¡åˆ·é¢˜æ—¶ï¼Œä¸å¦¨é—®è‡ªå·±ä¸€å¥ï¼š <strong>â€œä»Šå¤©ï¼Œæ ˆå’Œé˜Ÿåˆ—è°æ›´é€‚åˆå½“ä¸»è§’ï¼Ÿâ€</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ThreeJSå®æˆ˜ã€‘æˆ‘æŠŠ200ä¸ªè®¾å¤‡ä¼˜åŒ–åˆ°äº†1ä¸ªDrawCall]]></title>    <link>https://juejin.cn/post/7602454700503924777</link>    <guid>https://juejin.cn/post/7602454700503924777</guid>    <pubDate>2026-02-03T15:25:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602454700503924777" data-draft-id="7602106969697763391" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ThreeJSå®æˆ˜ã€‘æˆ‘æŠŠ200ä¸ªè®¾å¤‡ä¼˜åŒ–åˆ°äº†1ä¸ªDrawCall"/> <meta itemprop="keywords" content="three.js,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-02-03T15:25:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¶æ™ºè¾½"/> <meta itemprop="url" content="https://juejin.cn/user/3320999244205294"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ThreeJSå®æˆ˜ã€‘æˆ‘æŠŠ200ä¸ªè®¾å¤‡ä¼˜åŒ–åˆ°äº†1ä¸ªDrawCall
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3320999244205294/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¶æ™ºè¾½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T15:25:21.000Z" title="Tue Feb 03 2026 15:25:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><em>å‰è¨€ï¼š200ä¸ªè®¾å¤‡çš„æ„Ÿäººå¸§ç‡ï¼Œå½“æˆ‘æ­£åœ¨ä¸ºè‡ªå·±åˆšç»˜åˆ¶å¥½çš„ç«™æˆ¿è®¾å¤‡æ¬£å–œæ—¶ï¼Œå´æ²¡å‘ç°ï¼ŒçœŸæ­£çš„å™©æ¢¦æ‰åˆšåˆšå¼€å§‹ï¼Œæ¸²æŸ“çš„å¸§ç‡è¿10éƒ½ç ´ä¸äº†ï¼Œæ•´ä¸ªåœºæ™¯ä¸èƒ½ç”¨å¡æ¥å½¢å®¹äº†ï¼Œå› ä¸ºå·²ç»ä¸èƒ½ç®—æ˜¯åŠ¨æ€é¡µé¢äº†ï¼Œè·Ÿé™æ€é¡µé¢ç›¸å·®æ— å‡ ï¼Œçœ‹ç€è¿™æ„Ÿäººçš„å¸§ç‡ï¼Œæˆ‘æœ€ç»ˆè¸ä¸Šäº†æ€§èƒ½ä¼˜åŒ–çš„é“è·¯...</em></p>
<p>å¦‚æœæœ‰å°ä¼™ä¼´çœ‹è¿‡æˆ‘ä¹‹å‰çš„ä¸€ç¯‡æ€§èƒ½ä¼˜åŒ–æ–‡ç«  <a href="https://juejin.cn/post/7601075423002984484" target="_blank" title="https://juejin.cn/post/7601075423002984484">ã€ThreeJSã€‘InstancedMesh å®æˆ˜ï¼šä»20000ä¸ªMeshåˆ°1ä¸ªDraw Call</a>
åº”è¯¥å°±çŸ¥é“ä¸ºä»€ä¹ˆè¿™ä¹ˆå¡ï¼Œæ²¡é”™ï¼Œè¿˜æ˜¯DrawCallçš„é—®é¢˜ã€‚é‚£ä¸ºä»€ä¹ˆåŒºåŒº200ä¸ªè®¾å¤‡ï¼Œå°±èƒ½è®©æˆ‘çš„åœºæ™¯å˜æˆPPTå‘¢ï¼Ÿé‚£æ˜¯å› ä¸º<strong>æ¨¡å‹æ–‡ä»¶å¯¼å…¥Three.jsåï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªGroupå¯¹è±¡ï¼Œé‡Œé¢å¡æ»¡äº†å‡ åä¸Šç™¾ä¸ªMeshå­å¯¹è±¡</strong>ã€‚æ™®é€šçš„ä¸€ä¸ªMeshä¸€å¸§è°ƒç”¨ä¸€æ¬¡DrawCallï¼Œä½†ä¸€ä¸ªå¤æ‚æ¨¡å‹å¯èƒ½ç”±ä¸Šç™¾ä¸ªMeshç»„æˆï¼Œç›¸å½“äºä¸€ä¸ª"Meshå¤§ç¤¼åŒ…"ã€‚æˆ‘è¿™200ä¸ªè®¾å¤‡ï¼Œæ¯ä¸ªéƒ½æœ‰260ä¸ªMeshï¼Œæ€»å…±52000ä¸ªMeshï¼Œæ¯ä¸€å¸§ç»˜åˆ¶éƒ½è¦è°ƒç”¨52000æ¬¡DrawCallï¼ŒCPUç›´æ¥å¹²å†’çƒŸäº†ï¼Œä½ è¯´è¿™ä¸å¡æ‰æ€ªäº†ã€‚ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å½“å‰å¸§ç‡ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ca9d67a5ec141529e53eb5000a4f56e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-25pm66L69:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769571&amp;x-signature=o%2FaCOkjoFCnljqDrBRZZ5sdOzFI%3D" alt="threejs-test - Google Chrome 2026-02-03 22-50-32.gif" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°å¡å‡ºç¿”æ¥äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¼€å§‹è¿›å…¥ä»Šå¤©çš„æ­£é¢˜ï¼Œæ€ä¹ˆæŠŠè¿™ä¹ˆå¤šçš„DrawCallï¼Œä¼˜åŒ–åˆ°è·Ÿå¾·èŠ™ä¸€æ ·ä¸æ»‘~(å¾·èŠ™æ‰“é’±...)</p>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦æ”¶é›†ä¿¡æ¯åˆ¤æ–­ç“¶é¢ˆã€‚æˆ‘ç›®å‰çš„åœºæ™¯ä¸Šæœ‰52000ä¸ªMeshï¼Œ200ä¸ªæ¨¡å‹ä»¥åŠ52000æ¬¡DrawCallï¼Œæ˜æ˜¾æ˜¯<strong>CPUç«¯çš„DrawCallæäº¤ç“¶é¢ˆ</strong>ï¼ˆæµè§ˆå™¨æ¯å¸§å»ºè®®æ§åˆ¶åœ¨1000æ¬¡ä»¥å†…ï¼‰ã€‚æˆ‘ä»¬è¦åšçš„å°±æ˜¯æŠŠè¿™52000ä¸ªMeshåˆå¹¶æˆå°½å¯èƒ½å°‘çš„DrawCallã€‚</p>
<h2 data-id="heading-0">ç¬¬ä¸€æ­¥ï¼šBlenderé¢„å¤„ç†ï¼ˆæ¨¡å‹å‡é¢+çƒ˜ç„™ï¼‰</h2>
<p>ç›®æ ‡æ˜¯æŠŠ260ä¸ªMeshåˆå¹¶æˆ1ä¸ªï¼Œå¹¶æŠŠ14ç§æè´¨çƒ˜ç„™æˆ1å¼ Texture Atlasã€‚</p>
<h3 data-id="heading-1">1. å¯¼å…¥æ¨¡å‹</h3>
<p><code>File</code> â†’ <code>Import</code> â†’ é€‰æ‹©ä½ çš„æ ¼å¼ï¼ˆSTEP/FBX/OBJï¼‰</p>
<h3 data-id="heading-2">2. åˆå¹¶æ‰€æœ‰é›¶ä»¶</h3>
<ul>
<li>æŒ‰ <code>A</code> å…¨é€‰æ‰€æœ‰ç‰©ä½“</li>
<li><code>Ctrl+J</code> åˆå¹¶ä¸ºå•ä¸€ç‰©ä½“</li>
</ul>
<p>æ³¨æ„ï¼šå…¨é€‰åå¦‚æœå³é”®æ²¡æœ‰åˆå¹¶é€‰é¡¹ï¼Œå¯ä»¥æŒ‰ç½‘æ ¼ç±»å‹é€‰æ‹©ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/554ac7e6fbd64b09b1df66cd0b214b45~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-25pm66L69:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769571&amp;x-signature=abDgkydEoCLXRYtPDDUu2Ec%2BW8U%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶åå»å³ä¾§å¤§çº²è§†å›¾éšä¾¿å³é”®ä¸ªå½“å‰å·²æ˜¯é€‰ä¸­çŠ¶æ€çš„ç‰©ä½“ï¼Œå†å›åˆ°åœºæ™¯é‡Œå³é”®å°±æœ‰åˆå¹¶é€‰é¡¹äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/560cef05151b4925bd3d03c1fc749d98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-25pm66L69:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769571&amp;x-signature=lRdJP1LRWNLezsTOad2JParuPu0%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">3. UVé‡æ–°å±•å¼€ï¼ˆå¯é€‰ï¼‰</h3>
<p><strong>è¿™æ˜¯æœ€å®¹æ˜“è¢«å¿½ç•¥ä½†æœ€é‡è¦çš„ä¸€æ­¥ï¼</strong> åˆå¹¶åçš„æ¨¡å‹UVå¦‚æœé‡å åœ¨ä¸€èµ·ï¼Œçƒ˜ç„™å‡ºæ¥çš„è´´å›¾ä¼šä¸€å›¢ç³Ÿã€‚</p>
<ul>
<li>è¿›å…¥ <code>Edit Mode</code>ï¼ˆTabé”®ï¼‰</li>
<li>æŒ‰ <code>A</code> å…¨é€‰é¢</li>
<li>æŒ‰ <code>U</code> â†’ <code>Smart UV Project (æ™ºèƒ½UVæŠ•å°„)</code>ï¼Œç¡®ä¿UV islandsåˆ†å¸ƒåˆç†ä¸”ä¸é‡å </li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a60162bf0ee0490ba1c6ac5e56260da4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-25pm66L69:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769571&amp;x-signature=kqqlnLbcwIz12gYLrQM6yvHCQCo%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-4">4. çƒ˜ç„™è´´å›¾ï¼ˆTexture Atlasï¼‰</h3>
<ul>
<li>ç‚¹å‡»é¡¶éƒ¨<code>Shading</code>é€‰é¡¹è¿›å…¥ç€è‰²é¡µé¢ï¼Œæ–°å»ºä¸€ä¸ªå›¾åƒï¼ˆæ¯”å¦‚å«Atlas_2048ï¼‰ï¼Œè¿™å°±æ˜¯çƒ˜ç„™ç›®æ ‡</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d4bc1adc10d4b62b68acb7a95e02f95~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-25pm66L69:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769571&amp;x-signature=Z3SkXJtf4sReKrjCKrlagFqAZSk%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>ç»™<strong>æ¯ä¸ª</strong>æè´¨æ·»åŠ å›¾åƒçº¹ç†èŠ‚ç‚¹ï¼Œè¿æ¥åˆ°åŸºç¡€è‰²ï¼ˆBase Colorï¼‰ï¼Œå¹¶é€‰ä¸­æ–°å»ºçš„Atlaså›¾åƒ</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ee09a07cf344ff3a9833d889ee6a178~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-25pm66L69:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769571&amp;x-signature=SYCjClI8oqRJwt2Ou9Rpk7Zth1g%3D" alt="image.png" loading="lazy"/></p>
<p>é‡å¤æ“ä½œç›´åˆ°æ‰€æœ‰æè´¨ï¼ˆæˆ‘è¿™é‡Œæ˜¯14ä¸ªï¼‰éƒ½è¿ä¸Šäº†Atlaså›¾åƒã€‚çœ‹è¿™é‡Œçš„æ•°å­—ï¼Œæ˜¾ç¤º14å°±ä»£è¡¨14ä¸ªæè´¨å…±äº«è¿™å¼ è´´å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c5ce0ee6cc84071baf6c4f84691ccd6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-25pm66L69:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769571&amp;x-signature=lM0TTtMf7%2FKj2gKU%2Bj0mFxxYIUQ%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>åˆ‡æ¢åˆ°<code>Render Properties</code>é¢æ¿ï¼Œé€‰æ‹©<code>Cycles</code>æ¸²æŸ“å™¨ï¼Œçƒ˜ç„™ç±»å‹é€‰<code>Combined</code>ï¼ˆæœ‰é‡‘å±æè´¨ï¼‰æˆ–<code>Diffuse</code>ï¼ˆçº¯æ¼«åå°„ï¼Œè´´å›¾æ›´å°ï¼‰</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d4677607c724632b104ebe886fc3710~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-25pm66L69:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769571&amp;x-signature=ue33E4Bml1XcwDM5DvkygdxaTbA%3D" alt="image.png" loading="lazy"/></p>
<p>ç­‰è¿›åº¦æ¡èµ°å®Œï¼Œå¾—åˆ°ä¸€å¼ åˆå¹¶äº†14ç§æè´¨çš„è´´å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7e6e3d796044d28b60e67931ecae739~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-25pm66L69:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769571&amp;x-signature=IR7a1e6t%2ByWVmuXF9q2Im8%2B6BGM%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-5">5. æ¸…ç†æè´¨</h3>
<p>æŠŠä¹‹å‰çš„14ä¸ªæè´¨éƒ½åˆ äº†ï¼Œåªä¿ç•™ä¸€ä¸ªä½¿ç”¨Atlasè´´å›¾çš„æè´¨ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48023a19a9144c088e9b7bb4ef88aae7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-25pm66L69:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769571&amp;x-signature=HZmHqF1wc4O8h3nJNqF4m8hiYiQ%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/777b7b7e836d452186b78e4ceb70921c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-25pm66L69:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769571&amp;x-signature=yHfgxcNPjQqkGcnH%2F%2BmkXuyeuzE%3D" alt="image.png" loading="lazy"/></p>
<p>å¯¼å‡ºæ¨¡å‹ï¼Œæ›¿æ¢åˆ°åœºæ™¯çœ‹çœ‹æ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79a90f54844a47158ac3960535c0a80f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-25pm66L69:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769571&amp;x-signature=XBB%2Fpy735EmavOXyF2BiohK77mk%3D" alt="threejs-test - Google Chrome 2026-02-03 22-53-17.gif" loading="lazy"/></p>
<p><strong>è§è¯å¥‡è¿¹ï¼</strong> DrawCallä»52000é™åˆ°äº†200æ¬¡ï¼Œå¸§ç‡ä»ä¸ªä½æ•°å›å‡åˆ°30+ã€‚è¿™æ˜¯å› ä¸ºCPUä¸ç”¨å†ç–¯ç‹‚æäº¤ç»˜åˆ¶æŒ‡ä»¤äº†ï¼Œä½†200æ¬¡DrawCallè¿˜æ˜¯æœ‰ç‚¹å¤šï¼Œæ¯•ç«Ÿæˆ‘ä»¬è¿½æ±‚çš„æ˜¯draw callä¸º1çš„æè‡´ä¸æ»‘~ã€‚</p>
<h2 data-id="heading-6">ç¬¬äºŒæ­¥ï¼šInstancedMesh ç»ˆæä¼˜åŒ–</h2>
<p>ç°åœ¨è¦ç¥­å‡ºå¤§æ€å™¨äº†ã€‚<strong>æ³¨æ„ï¼šè¿™ä¸ªæ–¹æ³•åªé€‚ç”¨äº200ä¸ªè®¾å¤‡æ˜¯ç›¸åŒæ¨¡å‹çš„æƒ…å†µï¼</strong> å¦‚æœæ˜¯200ç§ä¸åŒçš„è®¾å¤‡ï¼ˆæ¯”å¦‚æœ‰ç©ºè°ƒã€æœ‰å˜å‹å™¨ã€æœ‰é…ç”µæŸœï¼‰ï¼Œè¯·çœ‹æ–‡ç« æœ«å°¾çš„"æ–¹æ¡ˆå±€é™ä¸æ›¿ä»£æ–¹æ¡ˆ"ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬çš„æ¨¡å‹åªæœ‰1ä¸ªMesh+1ä¸ªæè´¨ï¼Œå®Œç¾ç¬¦åˆInstancedMeshçš„æ¡ä»¶ã€‚æŠŠ200æ¬¡DrawCallå‹åˆ°1æ¬¡ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76ab427fda18469b9613b9d134edf5ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-25pm66L69:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770769571&amp;x-signature=DzslCJ54Gvs7APseh2m93m5rKm0%3D" alt="threejs-test - Google Chrome 2026-02-03 23-02-12.gif" loading="lazy"/></p>
<p><strong>200ä¸ªè®¾å¤‡ï¼Œ52000æ¬¡DrawCall â†’ 1æ¬¡DrawCallï¼</strong> GPUé€šè¿‡ç¡¬ä»¶å®ä¾‹åŒ–ç‰¹æ€§ï¼Œä¸€æ¬¡æŒ‡ä»¤æ‰¹é‡æ¸²æŸ“200ä¸ªå‰¯æœ¬ï¼ŒCPUç»ˆäºè§£æ”¾äº†ã€‚</p>
<p>è‡³äºå¸§ç‡ä¸ºä»€ä¹ˆå’Œ200æ¬¡DrawCallæ—¶å·®ä¸å¤šï¼Œæ˜¯å› ä¸ºæµ‹è¯•æœºçš„GPUé¡¶ç‚¹å¤„ç†æˆ–åƒç´ å¡«å……åˆ°äº†ç“¶é¢ˆï¼ˆæˆ‘è¿™é‡Œå°±æ˜¯å› ä¸ºGPUæ»¡è½½äº†ï¼‰ã€‚</p>
<p>ä½†åœ¨ä½ç«¯è®¾å¤‡æˆ–æ›´å¤æ‚åœºæ™¯ä¸‹ï¼Œå‡å°‘DrawCallçš„æ”¶ç›Šè‚¯å®šä¼šéå¸¸æ˜æ˜¾æ»´~ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å®Œæ•´ä»£ç ï¼ˆå¸¦èµ„æºé‡Šæ”¾å’Œå·®å¼‚åŒ–é¢œè‰²ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ---------- åŠ è½½ GLBï¼Œä½¿ç”¨ InstancedMesh æ‰¹é‡æ¸²æŸ“ ----------</span>
<span class="hljs-keyword">const</span> cols = <span class="hljs-number">10</span>;
<span class="hljs-keyword">const</span> rows = <span class="hljs-number">20</span>;
<span class="hljs-keyword">const</span> totalCount = cols * rows;
<span class="hljs-keyword">const</span> spacing = <span class="hljs-number">1.3</span>;
<span class="hljs-keyword">const</span> glbPath = <span class="hljs-string">'/v6.glb'</span>;
<span class="hljs-keyword">const</span> loader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GLTFLoader</span>();

loader.<span class="hljs-title function_">load</span>(glbPath, <span class="hljs-function">(<span class="hljs-params">gltf</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> model = gltf.<span class="hljs-property">scene</span>;

  <span class="hljs-comment">// æ ¹æ®æ¨¡å‹å°ºå¯¸è®¡ç®—ç¼©æ”¾</span>
  <span class="hljs-keyword">const</span> box = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Box3</span>().<span class="hljs-title function_">setFromObject</span>(model);
  <span class="hljs-keyword">const</span> size = box.<span class="hljs-title function_">getSize</span>(<span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Vector3</span>());
  <span class="hljs-keyword">const</span> maxDim = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(size.<span class="hljs-property">x</span>, size.<span class="hljs-property">y</span>, size.<span class="hljs-property">z</span>, <span class="hljs-number">0.001</span>);
  <span class="hljs-keyword">const</span> scale = <span class="hljs-number">0.6</span> / maxDim;

  <span class="hljs-comment">// æå–ç¬¬ä¸€ä¸ªMeshä½œä¸ºå®ä¾‹æ¨¡æ¿ï¼ˆåˆå¹¶åçš„æ¨¡å‹åº”è¯¥åªæœ‰ä¸€ä¸ªMeshï¼‰</span>
  <span class="hljs-keyword">let</span> baseMesh = <span class="hljs-literal">null</span>;
  model.<span class="hljs-title function_">traverse</span>(<span class="hljs-function">(<span class="hljs-params">obj</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (obj.<span class="hljs-property">isMesh</span>) {
      obj.<span class="hljs-property">castShadow</span> = obj.<span class="hljs-property">receiveShadow</span> = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">if</span> (!baseMesh) baseMesh = obj;
    }
  });

  <span class="hljs-keyword">if</span> (!baseMesh) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'GLB ä¸­æœªæ‰¾åˆ° Meshï¼Œæ— æ³•åˆ›å»º InstancedMesh'</span>);
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-comment">// å…‹éš†å‡ ä½•ä½“å’Œæè´¨ï¼ˆé˜²æ­¢å½±å“åŸæ¨¡å‹ï¼‰</span>
  <span class="hljs-keyword">const</span> geometry = baseMesh.<span class="hljs-property">geometry</span>.<span class="hljs-title function_">clone</span>();
  
  <span class="hljs-comment">// é˜²å¾¡æ€§å¤„ç†ï¼šæè´¨å¯èƒ½æ˜¯æ•°ç»„</span>
  <span class="hljs-keyword">const</span> rawMaterial = baseMesh.<span class="hljs-property">material</span>;
  <span class="hljs-keyword">const</span> material = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(rawMaterial) 
    ? rawMaterial[<span class="hljs-number">0</span>].<span class="hljs-title function_">clone</span>() 
    : rawMaterial.<span class="hljs-title function_">clone</span>();

  <span class="hljs-comment">// åˆ›å»º InstancedMesh</span>
  <span class="hljs-keyword">const</span> instancedMesh = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">InstancedMesh</span>(geometry, material, totalCount);
  instancedMesh.<span class="hljs-property">castShadow</span> = <span class="hljs-literal">true</span>;
  instancedMesh.<span class="hljs-property">receiveShadow</span> = <span class="hljs-literal">true</span>;

  <span class="hljs-comment">// è·å–åŸå§‹æ¨¡å‹çš„ä¸–ç•Œæ—‹è½¬ï¼Œä¿æŒæœå‘ä¸€è‡´</span>
  <span class="hljs-keyword">const</span> worldQuat = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Quaternion</span>();
  baseMesh.<span class="hljs-title function_">getWorldQuaternion</span>(worldQuat);

  <span class="hljs-keyword">const</span> dummy = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Object3D</span>();
  <span class="hljs-keyword">const</span> color = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Color</span>();
  <span class="hljs-keyword">let</span> idx = <span class="hljs-number">0</span>;
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; rows; i++) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; cols; j++) {
      <span class="hljs-comment">// è®¾ç½®ä½ç½®</span>
      dummy.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(
        (j - cols / <span class="hljs-number">2</span> + <span class="hljs-number">0.5</span>) * spacing,
        <span class="hljs-number">0</span>,
        (i - rows / <span class="hljs-number">2</span> + <span class="hljs-number">0.5</span>) * spacing
      );
      dummy.<span class="hljs-property">quaternion</span>.<span class="hljs-title function_">copy</span>(worldQuat);
      dummy.<span class="hljs-property">scale</span>.<span class="hljs-title function_">set</span>(scale, scale, scale);
      dummy.<span class="hljs-title function_">updateMatrix</span>();
      
      instancedMesh.<span class="hljs-title function_">setMatrixAt</span>(idx, dummy.<span class="hljs-property">matrix</span>);
      
      <span class="hljs-comment">// ç¤ºä¾‹ï¼šç»™ä¸åŒè®¾å¤‡è®¾ç½®ä¸åŒé¢œè‰²ï¼ˆæ¯”å¦‚æ ¹æ®è¿è¡ŒçŠ¶æ€ï¼‰</span>
      <span class="hljs-comment">// å‰100ä¸ªç»¿è‰²ï¼Œå100ä¸ªçº¢è‰²</span>
      <span class="hljs-keyword">if</span> (idx &lt; <span class="hljs-number">100</span>) {
        color.<span class="hljs-title function_">setHex</span>(<span class="hljs-number">0x00ff00</span>);
      } <span class="hljs-keyword">else</span> {
        color.<span class="hljs-title function_">setHex</span>(<span class="hljs-number">0xff0000</span>);
      }
      instancedMesh.<span class="hljs-title function_">setColorAt</span>(idx, color);
      
      idx++;
      <span class="hljs-keyword">if</span> (idx &gt;= totalCount) <span class="hljs-keyword">break</span>;
    }
    <span class="hljs-keyword">if</span> (idx &gt;= totalCount) <span class="hljs-keyword">break</span>;
  }
  
  instancedMesh.<span class="hljs-property">instanceMatrix</span>.<span class="hljs-property">needsUpdate</span> = <span class="hljs-literal">true</span>;
  instancedMesh.<span class="hljs-property">instanceColor</span>.<span class="hljs-property">needsUpdate</span> = <span class="hljs-literal">true</span>; <span class="hljs-comment">// å¦‚æœç”¨äº†setColorAtï¼Œå¿…é¡»è®¾ç½®è¿™ä¸ª</span>
  scene.<span class="hljs-title function_">add</span>(instancedMesh);
  
  <span class="hljs-comment">// é‡Šæ”¾åŸå§‹æ¨¡å‹å ç”¨çš„å†…å­˜ï¼ˆå¾ˆé‡è¦ï¼ï¼‰</span>
  model.<span class="hljs-title function_">traverse</span>(<span class="hljs-function">(<span class="hljs-params">obj</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (obj.<span class="hljs-property">isMesh</span>) {
      obj.<span class="hljs-property">geometry</span>.<span class="hljs-title function_">dispose</span>();
      <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(obj.<span class="hljs-property">material</span>)) {
        obj.<span class="hljs-property">material</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">m</span> =&gt;</span> m.<span class="hljs-title function_">dispose</span>());
      } <span class="hljs-keyword">else</span> {
        obj.<span class="hljs-property">material</span>.<span class="hljs-title function_">dispose</span>();
      }
    }
  });
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`InstancedMesh åˆ›å»ºå®Œæˆï¼Œå…± <span class="hljs-subst">${totalCount}</span> ä¸ªå®ä¾‹ï¼ŒDrawCall: 1`</span>);
  
}, <span class="hljs-literal">undefined</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'GLB åŠ è½½å¤±è´¥:'</span>, err));
</code></pre>
<h2 data-id="heading-7">âš ï¸ é‡è¦ï¼šæ–¹æ¡ˆå±€é™ä¸æ›¿ä»£æ–¹æ¡ˆ</h2>
<p><strong>æœ¬æ–‡æ–¹æ¡ˆæœ‰ä¸¤ä¸ªç¡¬å‰æï¼š</strong></p>
<ol>
<li><strong>200ä¸ªè®¾å¤‡å¿…é¡»æ˜¯ç›¸åŒå‡ ä½•ä½“</strong>ï¼ˆä¸€æ¨¡ä¸€æ ·çš„æ¨¡å‹ï¼‰</li>
<li><strong>ç»è¿‡çƒ˜ç„™ååªå‰©ä¸‹ä¸€ä¸ªæè´¨</strong>ï¼ˆæˆ–æœ€å¤šå‡ ä¸ªï¼Œä½†InstancedMeshè¦æ±‚åŒGeometry+åŒMaterialï¼‰</li>
</ol>
<p><strong>å¦‚æœä½ çš„åœºæ™¯æ˜¯200ä¸ªä¸åŒçš„è®¾å¤‡ï¼ˆä¸åŒå‹å·ã€ä¸åŒå‡ ä½•ä½“ï¼‰ï¼š</strong></p>
<ul>
<li><strong>BatchedMesh</strong>ï¼ˆThree.js r151+ï¼‰ï¼šæ”¯æŒä¸åŒå‡ ä½•ä½“åˆå¹¶ç»˜åˆ¶ï¼Œä½†æ§åˆ¶æ›´å¤æ‚</li>
<li><strong>Merge Geometry</strong>ï¼šæŠŠå¤šä¸ªä¸åŒå‡ ä½•ä½“åˆå¹¶æˆä¸€ä¸ªå¤§çš„BufferGeometryï¼Œé€‚åˆé™æ€åœºæ™¯ï¼ˆç¼ºç‚¹æ˜¯å¤±å»å•ä¸ªè®¾å¤‡çš„æ§åˆ¶èƒ½åŠ›ï¼Œæ— æ³•å•ç‹¬ç‚¹å‡»é€‰ä¸­ï¼‰</li>
<li><strong>LOD + Frustum Culling</strong>ï¼šè¿œå¤„è®¾å¤‡é™ä½ç²¾åº¦ï¼Œè§†é‡å¤–è®¾å¤‡ä¸æ¸²æŸ“</li>
<li><strong>æŒ‰éœ€åŠ è½½</strong>ï¼šåªæ¸²æŸ“è§†é‡å†…çš„è®¾å¤‡ï¼Œé…åˆOctreeç©ºé—´åˆ†å‰²</li>
</ul>
<p><strong>å…³äºäº¤äº’ï¼š</strong>
å¦‚æœéœ€è¦ç‚¹å‡»é€‰ä¸­æŸä¸ªè®¾å¤‡ï¼Œä½¿ç”¨<code>raycaster.intersectObject(instancedMesh)</code>ï¼Œé€šè¿‡<code>instanceId</code>å±æ€§çŸ¥é“ç‚¹ä¸­äº†ç¬¬å‡ ä¸ªå®ä¾‹ï¼Œç„¶åå¯ä»¥é€šè¿‡<code>getMatrixAt</code>è·å–å…¶ä½ç½®ä¿¡æ¯ã€‚</p>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>ä¼˜åŒ–è·¯å¾„ï¼š<strong>52000 DrawCallï¼ˆåŸå§‹ï¼‰â†’ 200 DrawCallï¼ˆçƒ˜ç„™åˆå¹¶ï¼‰â†’ 1 DrawCallï¼ˆInstancedMeshï¼‰</strong></p>
<p>æ ¸å¿ƒæ€è·¯å°±æ˜¯<strong>å‡å°‘CPUå‘GPUå‘é€ç»˜åˆ¶æŒ‡ä»¤çš„æ¬¡æ•°</strong>ã€‚Blenderè´Ÿè´£æŠŠ"å¤šMeshå¤šæè´¨"å˜æˆ"å•Meshå•æè´¨"ï¼ŒInstancedMeshè´Ÿè´£æŠŠ"ç»˜åˆ¶200æ¬¡"å˜æˆ"ç»˜åˆ¶1æ¬¡"ã€‚</p>
<p>å¦‚æœä½ çš„åœºæ™¯ä¹Ÿæ˜¯å¤§æ‰¹é‡é‡å¤è®¾å¤‡ï¼Œè¯•è¯•è¿™ä¸ªæ–¹æ¡ˆï¼Œè®©ä½ çš„å¸§ç‡é£èµ·æ¥~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>