<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ã€Vue-4 /Lesson70(2025-12-16)ã€‘Vue 3 + Vite å·¥ç¨‹åŒ–å¼€å‘å…¨è§£æï¼šä»é›¶æ„å»ºç°ä»£å‰ç«¯é¡¹ç›®ğŸš€]]></title>    <link>https://juejin.cn/post/7597270795212292136</link>    <guid>https://juejin.cn/post/7597270795212292136</guid>    <pubDate>2026-01-20T14:34:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597270795212292136" data-draft-id="7597326073671548943" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Vue-4 /Lesson70(2025-12-16)ã€‘Vue 3 + Vite å·¥ç¨‹åŒ–å¼€å‘å…¨è§£æï¼šä»é›¶æ„å»ºç°ä»£å‰ç«¯é¡¹ç›®ğŸš€ "/> <meta itemprop="keywords" content="Vue.js,åç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-20T14:34:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Jing_Rainbow"/> <meta itemprop="url" content="https://juejin.cn/user/1285809519198256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Vue-4 /Lesson70(2025-12-16)ã€‘Vue 3 + Vite å·¥ç¨‹åŒ–å¼€å‘å…¨è§£æï¼šä»é›¶æ„å»ºç°ä»£å‰ç«¯é¡¹ç›®ğŸš€ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1285809519198256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Jing_Rainbow
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T14:34:48.000Z" title="Tue Jan 20 2026 14:34:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ğŸš€ åœ¨å½“ä»Šå¿«é€Ÿæ¼”è¿›çš„å‰ç«¯ç”Ÿæ€ä¸­ï¼Œ<strong>Vue 3</strong> ä¸ <strong>Vite</strong> çš„ç»„åˆå·²æˆä¸ºæ„å»ºé«˜æ€§èƒ½ã€é«˜æ•ˆç‡ç°ä»£ Web åº”ç”¨çš„é»„é‡‘æ­æ¡£ã€‚æœ¬æ–‡å°†æ·±å…¥å‰–æä¸€ä¸ªåŸºäº Vue 3 å’Œ Vite çš„å®Œæ•´é¡¹ç›®ç»“æ„ï¼Œæ¶µç›–ä»é¡¹ç›®åˆå§‹åŒ–ã€ä¾èµ–ç®¡ç†ã€ç»„ä»¶å¼€å‘ã€è·¯ç”±é…ç½®åˆ°æ ·å¼ç³»ç»Ÿå’Œå¼€å‘å·¥å…·é“¾çš„æ–¹æ–¹é¢é¢ï¼Œå¸¦ä½ å…¨é¢æŒæ¡ç°ä»£å‰ç«¯å·¥ç¨‹åŒ–çš„ç²¾é«“ã€‚</p>
<hr/>
<h2 data-id="heading-0">âš™ï¸ Viteï¼šä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·</h2>
<p>Viteï¼ˆæ³•è¯­æ„ä¸ºâ€œå¿«â€ï¼‰æ˜¯ç”± Vue.js ä½œè€… <strong>å°¤é›¨æºª</strong> å¼€å‘çš„æ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·ã€‚å®ƒå½»åº•é¢ è¦†äº†ä¼ ç»Ÿæ‰“åŒ…å¼æ„å»ºæµç¨‹ï¼ˆå¦‚ Webpackï¼‰ï¼Œè½¬è€Œåˆ©ç”¨ <strong>æµè§ˆå™¨åŸç”Ÿ ES æ¨¡å—ï¼ˆESMï¼‰</strong> èƒ½åŠ›ï¼Œåœ¨å¼€å‘é˜¶æ®µå®ç° <strong>æ— éœ€æ‰“åŒ…ã€æŒ‰éœ€åŠ è½½</strong> çš„æè‡´ä½“éªŒã€‚</p>
<h3 data-id="heading-1">ğŸ”¥ æ ¸å¿ƒä¼˜åŠ¿</h3>
<ul>
<li><strong>æé€Ÿå†·å¯åŠ¨</strong>ï¼šVite å¯åŠ¨å¼€å‘æœåŠ¡å™¨æ—¶å‡ ä¹ç¬é—´å®Œæˆï¼Œå› ä¸ºå®ƒä¸è¿›è¡Œå…¨é‡æ‰“åŒ…ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡åŸç”Ÿ ESM åŠ è½½æ¨¡å—ã€‚</li>
<li><strong>é—ªç”µçƒ­æ›´æ–°ï¼ˆHMRï¼‰</strong> ï¼šå½“æ–‡ä»¶ä¿®æ”¹æ—¶ï¼ŒVite åˆ©ç”¨åŸç”Ÿ ESM çš„åŠ¨æ€å¯¼å…¥èƒ½åŠ›ï¼Œä»…æ›´æ–°å˜æ›´æ¨¡å—åŠå…¶ä¾èµ–ï¼Œé€Ÿåº¦è¿œè¶…ä¼ ç»Ÿæ‰“åŒ…å™¨ã€‚</li>
<li><strong>ç°ä»£åŒ–é»˜è®¤é…ç½®</strong>ï¼šå¼€ç®±å³ç”¨æ”¯æŒ TypeScriptã€JSXã€CSS é¢„å¤„ç†å™¨ç­‰ï¼Œä¸”é…ç½®ç®€æ´ã€‚</li>
<li><strong>ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–</strong>ï¼šè™½ç„¶å¼€å‘æ—¶ä¸æ‰“åŒ…ï¼Œä½† Vite åœ¨ <code>build</code> é˜¶æ®µä¼šä½¿ç”¨ <strong>Rollup</strong> è¿›è¡Œé«˜æ•ˆçš„ä»£ç åˆ†å‰²ä¸å‹ç¼©ï¼Œç”Ÿæˆé«˜åº¦ä¼˜åŒ–çš„é™æ€èµ„æºã€‚</li>
</ul>
<p>è¦åˆ›å»ºä¸€ä¸ª Vite + Vue é¡¹ç›®ï¼Œåªéœ€è¿è¡Œï¼š</p>
<pre><code class="hljs language-perl" lang="perl">npm init vite@latest <span class="hljs-keyword">my</span>-vue-app -- --template vue
cd <span class="hljs-keyword">my</span>-vue-app
npm install
npm run dev
</code></pre>
<p>è¿™å°†ç”Ÿæˆä¸€ä¸ªæ ‡å‡†çš„ Vue 3 + Vite é¡¹ç›®æ¨¡æ¿ï¼ŒåŒ…å«æ‰€æœ‰å¿…è¦æ–‡ä»¶ã€‚</p>
<hr/>
<h2 data-id="heading-2">ğŸ“ é¡¹ç›®ç›®å½•ç»“æ„è¯¦è§£</h2>
<p>ä¸€ä¸ªå…¸å‹çš„ Vite + Vue 3 é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-keyword">my</span>-vue-app/
â”œâ”€â”€ index.html                <span class="hljs-comment"># åº”ç”¨å…¥å£ HTML æ–‡ä»¶</span>
â”œâ”€â”€ package.json              <span class="hljs-comment"># é¡¹ç›®å…ƒæ•°æ®ä¸è„šæœ¬å‘½ä»¤</span>
â”œâ”€â”€ vite.config.js            <span class="hljs-comment"># Vite é…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰</span>
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.js               <span class="hljs-comment"># åº”ç”¨å…¥å£ JavaScript æ–‡ä»¶</span>
â”‚   â”œâ”€â”€ App.vue               <span class="hljs-comment"># æ ¹ç»„ä»¶</span>
â”‚   â”œâ”€â”€ style.css             <span class="hljs-comment"># å…¨å±€æ ·å¼</span>
â”‚   â”œâ”€â”€ components/           <span class="hljs-comment"># å¯å¤ç”¨ UI ç»„ä»¶</span>
â”‚   â”‚   â””â”€â”€ HelloWorld.vue
â”‚   â””â”€â”€ views/                <span class="hljs-comment"># é¡µé¢çº§ç»„ä»¶ï¼ˆé…åˆè·¯ç”±ä½¿ç”¨ï¼‰</span>
â”‚       â”œâ”€â”€ Home.vue
â”‚       â””â”€â”€ About.vue
â””â”€â”€ router/
    â””â”€â”€ index.js              <span class="hljs-comment"># è·¯ç”±é…ç½®</span>
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>å…³é”®ç‚¹</strong>ï¼šVite é»˜è®¤ä»¥ <code>index.html</code> ä½œä¸ºå¼€å‘æœåŠ¡å™¨çš„å…¥å£ï¼Œå¹¶é€šè¿‡ <code>&lt;script type="module"&gt;</code> å¼•å…¥ <code>src/main.js</code>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-3">ğŸ§± æ ¸å¿ƒæ–‡ä»¶æ·±åº¦è§£æ</h2>
<h3 data-id="heading-4">ğŸŒ <code>index.html</code>ï¼šåº”ç”¨çš„ HTML åŸºçŸ³</h3>
<p>è™½ç„¶æœªæä¾›å…·ä½“å†…å®¹ï¼Œä½†å®ƒæ˜¯ Vite å¼€å‘æœåŠ¡å™¨çš„èµ·ç‚¹ã€‚é€šå¸¸åŒ…å«ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"icon"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/favicon.ico"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Vite + Vue<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <span class="hljs-comment">&lt;!-- Vue åº”ç”¨æŒ‚è½½ç‚¹ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/src/main.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-5">ğŸ§¬ <code>main.js</code>ï¼šåº”ç”¨çš„ JavaScript å…¥å£</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å…¥å£æ–‡ä»¶</span>
<span class="hljs-comment">// vue createApp åˆ›å»ºä¸€ä¸ªApp</span>
<span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./style.css'</span>        <span class="hljs-comment">// å¼•å…¥å…¨å±€æ ·å¼</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span> <span class="hljs-comment">// å¼•å…¥æ ¹ç»„ä»¶</span>

<span class="hljs-comment">// å¼•å…¥è·¯ç”±æ¨¡å—</span>
<span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'./router'</span>;

<span class="hljs-comment">// ç°ä»£å‰ç«¯åº”ç”¨</span>
<span class="hljs-comment">// ç»„ä»¶åŒ–ï¼Œå“åº”å¼...</span>
<span class="hljs-comment">// è·ŸDOMç¼–ç¨‹say byebye</span>
<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>) <span class="hljs-comment">// æŒ‚è½½è·¯ç”±æ¨¡å—</span>
  .<span class="hljs-title function_">use</span>(router) <span class="hljs-comment">// å¯ç”¨è·¯ç”±</span>
  <span class="hljs-comment">// æŒ‚è½½åœ¨#app ä¸Š</span>
  .<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<ul>
<li><code>createApp(App)</code>ï¼šåˆ›å»º Vue åº”ç”¨å®ä¾‹ã€‚</li>
<li><code>.use(router)</code>ï¼šå®‰è£… Vue Router æ’ä»¶ï¼Œä½¿æ•´ä¸ªåº”ç”¨å…·å¤‡è·¯ç”±èƒ½åŠ›ã€‚</li>
<li><code>.mount('#app')</code>ï¼šå°†åº”ç”¨æŒ‚è½½åˆ° <code>index.html</code> ä¸­ id ä¸º <code>app</code> çš„ DOM å…ƒç´ ä¸Šã€‚</li>
</ul>
<blockquote>
<p>âœ… <strong>æœ€ä½³å®è·µ</strong>ï¼šæ‰€æœ‰å…¨å±€æ’ä»¶ï¼ˆå¦‚çŠ¶æ€ç®¡ç† Piniaã€UI åº“ç­‰ï¼‰éƒ½åœ¨æ­¤å¤„é€šè¿‡ <code>.use()</code> æ³¨å†Œã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-6">ğŸ–¼ï¸ ç»„ä»¶ç³»ç»Ÿï¼šVue 3 çš„æ ¸å¿ƒ</h2>
<h3 data-id="heading-7">ğŸ  <code>App.vue</code>ï¼šæ ¹ç»„ä»¶</h3>
<pre><code class="hljs">Hello Money !
Home
About
</code></pre>
<p>è¿™æ˜¯ä¸€ä¸ªæç®€çš„æ ¹ç»„ä»¶ï¼Œç›´æ¥åœ¨æ¨¡æ¿ä¸­å†™å…¥æ–‡æœ¬å’Œé“¾æ¥ã€‚ä½†åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œåº”ä½¿ç”¨ <code>&lt;router-link&gt;</code> å’Œ <code>&lt;router-view&gt;</code> å®ç°å¯¼èˆªä¸è§†å›¾åˆ‡æ¢ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/"</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span> |
      <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">"/about"</span>&gt;</span>About<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span> /&gt;</span> <span class="hljs-comment">&lt;!-- è·¯ç”±åŒ¹é…åˆ°çš„ç»„ä»¶å°†åœ¨æ­¤æ¸²æŸ“ --&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<h3 data-id="heading-8">ğŸ‘‹ <code>HelloWorld.vue</code>ï¼šç¤ºä¾‹åŠŸèƒ½ç»„ä»¶</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-title function_">defineProps</span>({ 
  <span class="hljs-attr">msg</span>: <span class="hljs-title class_">String</span>,
})
<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{{ msg }}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"count++"</span>&gt;</span>count is {{ count }}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span> Edit <span class="hljs-tag">&lt;<span class="hljs-name">code</span>&gt;</span>components/HelloWorld.vue<span class="hljs-tag">&lt;/<span class="hljs-name">code</span>&gt;</span> to test HMR <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span> Check out <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://vuejs.org/guide/quick-start.html#local"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> &gt;</span>create-vue&lt;/a &gt;, the official Vue + Vite starter <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span> Learn more about IDE Support for Vue in the <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://vuejs.org/guide/scaling-up/tooling.html#ide-support"</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_blank"</span> &gt;</span>Vue Docs Scaling up Guide&lt;/a &gt;. <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"read-the-docs"</span>&gt;</span>Click on the Vite and Vue logos to learn more<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.read-the-docs</span> { <span class="hljs-attribute">color</span>: <span class="hljs-number">#888</span>; }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<ul>
<li><strong><code>&lt;script setup&gt;</code></strong> ï¼šVue 3 çš„ç¼–è¯‘æ—¶è¯­æ³•ç³–ï¼Œç®€åŒ–ç»„åˆå¼ API çš„ä½¿ç”¨ã€‚å˜é‡å’Œå‡½æ•°è‡ªåŠ¨æš´éœ²ç»™æ¨¡æ¿ã€‚</li>
<li><strong><code>defineProps</code></strong>ï¼šå£°æ˜æ¥æ”¶çš„ propsï¼ˆå¦‚ <code>msg</code>ï¼‰ã€‚</li>
<li><strong><code>ref(0)</code></strong> ï¼šåˆ›å»ºå“åº”å¼å¼•ç”¨ï¼Œ<code>count</code> æ˜¯ä¸€ä¸ªåŒ…è£…å¯¹è±¡ï¼Œ<code>.value</code> è®¿é—®å€¼ï¼Œä½†åœ¨æ¨¡æ¿ä¸­è‡ªåŠ¨è§£åŒ…ã€‚</li>
<li><strong><code>@click="count++"</code></strong> ï¼šäº‹ä»¶ç»‘å®šï¼Œç‚¹å‡»æŒ‰é’®é€’å¢è®¡æ•°ã€‚</li>
<li><strong><code>&lt;style scoped&gt;</code></strong> ï¼šæ ·å¼ä½œç”¨åŸŸé™å®šï¼Œç¡®ä¿ <code>.read-the-docs</code> æ ·å¼ä»…åº”ç”¨äºå½“å‰ç»„ä»¶ã€‚</li>
</ul>
<blockquote>
<p>ğŸ” <strong>HMRï¼ˆçƒ­æ¨¡å—æ›¿æ¢ï¼‰</strong> ï¼šä¿®æ”¹æ­¤æ–‡ä»¶æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æ›´æ–°å†…å®¹è€Œä¸åˆ·æ–°é¡µé¢ï¼Œæå¤§æå‡å¼€å‘æ•ˆç‡ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-9">ğŸ—ºï¸ è·¯ç”±ç³»ç»Ÿï¼š<code>vue-router</code> å®ç°å¤šé¡µé¢å¯¼èˆª</h2>
<h3 data-id="heading-10">ğŸ“¦ å®‰è£…ä¸é…ç½®</h3>
<pre><code class="hljs language-css" lang="css">npm <span class="hljs-selector-tag">i</span> vue-router
</code></pre>
<h3 data-id="heading-11">ğŸ§­ <code>router/index.js</code>ï¼šè·¯ç”±å®šä¹‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// router æ¨¡å— å®šä¹‰è·¯ç”±</span>
<span class="hljs-keyword">import</span> { createRouter, createWebHashHistory } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/Home.vue'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">About</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'../views/About.vue'</span>;

<span class="hljs-keyword">const</span> routes = [
  { <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Home'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">Home</span> },
  { <span class="hljs-attr">path</span>: <span class="hljs-string">'/about'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'About'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">About</span> }
];

<span class="hljs-comment">// å®ä¾‹åŒ– è´Ÿè´£å‰ç«¯è·¯ç”± è·¯ç”±åŠŸèƒ½ è·¯ç”±ç®¡å®¶</span>
<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>({
  <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHashHistory</span>(), <span class="hljs-comment">// ä½¿ç”¨ #/about å½¢å¼çš„å“ˆå¸Œè·¯ç”±</span>
  routes
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router;
</code></pre>
<ul>
<li><strong><code>createRouter</code></strong>ï¼šåˆ›å»ºè·¯ç”±å™¨å®ä¾‹ã€‚</li>
<li><strong><code>createWebHashHistory()</code></strong> ï¼šä½¿ç”¨ URL å“ˆå¸Œæ¨¡å¼ï¼ˆå…¼å®¹æ€§å¥½ï¼Œæ— éœ€æœåŠ¡ç«¯é…ç½®ï¼‰ã€‚ä¹Ÿå¯ç”¨ <code>createWebHistory()</code> å®ç°å¹²å‡€ URLï¼ˆéœ€æœåŠ¡ç«¯æ”¯æŒï¼‰ã€‚</li>
<li><strong><code>routes</code> æ•°ç»„</strong>ï¼šå®šä¹‰è·¯å¾„ã€åç§°ä¸å¯¹åº”ç»„ä»¶çš„æ˜ å°„å…³ç³»ã€‚</li>
</ul>
<h3 data-id="heading-12">ğŸ“„ é¡µé¢ç»„ä»¶ï¼š<code>Home.vue</code> ä¸ <code>About.vue</code></h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- Home.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-comment">&lt;!-- About.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>About<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p>è¿™äº›æ˜¯ç®€å•çš„é¡µé¢çº§ç»„ä»¶ï¼Œæœªæ¥å¯åœ¨æ­¤æ·»åŠ å¤æ‚å¸ƒå±€ã€æ•°æ®è·å–é€»è¾‘ç­‰ã€‚</p>
<hr/>
<h2 data-id="heading-13">ğŸ¨ å…¨å±€æ ·å¼ï¼š<code>style.css</code></h2>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attribute">font-family</span>: system-ui, Avenir, Helvetica, Arial, sans-serif;
  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.5</span>;
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">400</span>;
  <span class="hljs-attribute">color</span>-scheme: light dark;
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.87</span>);
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#242424</span>;
  <span class="hljs-comment">/* ... */</span>
}

<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">prefers-color-scheme</span>: light) {
  <span class="hljs-selector-pseudo">:root</span> {
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#213547</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ffffff</span>;
  }
}
</code></pre>
<ul>
<li>å®šä¹‰äº† <strong>æ·±è‰²/æµ…è‰²ä¸»é¢˜</strong> çš„åŸºç¡€æ ·å¼ã€‚</li>
<li>åˆ©ç”¨ <code>color-scheme</code> å’Œåª’ä½“æŸ¥è¯¢ <code>prefers-color-scheme</code> å®ç° <strong>ç³»ç»Ÿçº§ä¸»é¢˜é€‚é…</strong>ã€‚</li>
<li>è®¾ç½®äº†å…¨å±€å­—ä½“ã€æŒ‰é’®æ ·å¼ã€é“¾æ¥æ‚¬åœæ•ˆæœç­‰ï¼Œç¡®ä¿ UI ä¸€è‡´æ€§ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-14">ğŸ› ï¸ å¼€å‘å·¥å…·é“¾å¢å¼ºä½“éªŒ</h2>
<h3 data-id="heading-15">ğŸ’¡ Volarï¼šVue å®˜æ–¹ VS Code æ’ä»¶</h3>
<ul>
<li>æä¾› <strong>è¯­æ³•é«˜äº®</strong>ã€<strong>æ™ºèƒ½æç¤º</strong>ã€<strong>ç±»å‹æ£€æŸ¥</strong>ï¼ˆé…åˆ TypeScriptï¼‰ã€<strong>ç»„ä»¶æ ‡ç­¾è¡¥å…¨</strong> ç­‰åŠŸèƒ½ã€‚</li>
<li>æ˜¯å¼€å‘ Vue 3 é¡¹ç›®çš„å¿…å¤‡åˆ©å™¨ï¼Œå¤§å¹…æå‡ç¼–ç æ•ˆç‡ä¸å‡†ç¡®æ€§ã€‚</li>
</ul>
<h3 data-id="heading-16">ğŸ” Vue DevToolsï¼šæµè§ˆå™¨è°ƒè¯•ç¥å™¨</h3>
<ul>
<li>æµè§ˆå™¨æ‰©å±•ï¼Œå¯ <strong>å®¡æŸ¥ç»„ä»¶æ ‘</strong>ã€<strong>æŸ¥çœ‹å“åº”å¼çŠ¶æ€</strong>ã€<strong>è¿½è¸ªäº‹ä»¶</strong>ã€<strong>åˆ†ææ€§èƒ½</strong>ã€‚</li>
<li>å¯¹äºè°ƒè¯•å¤æ‚çŠ¶æ€æµå’Œç»„ä»¶é€šä¿¡è‡³å…³é‡è¦ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-17">â–¶ï¸ å¯åŠ¨ä¸å¼€å‘æµç¨‹</h2>
<ol>
<li>
<p><strong>å®‰è£…ä¾èµ–</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">npm <span class="hljs-selector-tag">i</span>
</code></pre>
<p>æ­¤å‘½ä»¤è¯»å– <code>package.json</code> ä¸­çš„ <code>dependencies</code> å’Œ <code>devDependencies</code>ï¼Œå®‰è£…æ‰€æœ‰æ‰€éœ€åŒ…ï¼ˆåŒ…æ‹¬ <code>vite</code>ã€<code>vue</code>ã€<code>vue-router</code> ç­‰ï¼‰ã€‚</p>
</li>
<li>
<p><strong>å¯åŠ¨å¼€å‘æœåŠ¡å™¨</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">npm run dev
</code></pre>
<p>æ‰§è¡Œ <code>package.json</code> ä¸­å®šä¹‰çš„è„šæœ¬ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vite"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>Vite ä¼šå¯åŠ¨æœ¬åœ°æœåŠ¡å™¨ï¼ˆé»˜è®¤ <code>http://localhost:5173</code>ï¼‰ï¼Œå¹¶è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ã€‚</p>
</li>
<li>
<p><strong>å¼€å‘ä¸çƒ­æ›´æ–°</strong>ï¼š</p>
<ul>
<li>ä¿®æ”¹ä»»ä½• <code>.vue</code>ã€<code>.js</code>ã€<code>.css</code> æ–‡ä»¶ï¼Œæµè§ˆå™¨ä¼š <strong>è‡ªåŠ¨æ›´æ–°</strong> ç›¸å…³æ¨¡å—ï¼Œæ— éœ€æ‰‹åŠ¨åˆ·æ–°ã€‚</li>
<li>è¿™å¾—ç›Šäº Vite åŸºäºåŸç”Ÿ ESM çš„ HMR å®ç°ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-18">ğŸ§© æ€»ç»“ï¼šç°ä»£å‰ç«¯å·¥ç¨‹åŒ–çš„å…¸èŒƒ</h2>
<p>è¿™ä¸ªé¡¹ç›®è™½å°ï¼Œå´å®Œæ•´ä½“ç°äº†ç°ä»£å‰ç«¯å¼€å‘çš„æ ¸å¿ƒç†å¿µï¼š</p>
<ul>
<li><strong>ç»„ä»¶åŒ–</strong>ï¼šUI æ‹†åˆ†ä¸ºç‹¬ç«‹ã€å¯å¤ç”¨çš„ç»„ä»¶ï¼ˆ<code>HelloWorld.vue</code>, <code>Home.vue</code>ï¼‰ã€‚</li>
<li><strong>å“åº”å¼</strong>ï¼šåˆ©ç”¨ Vue 3 çš„ <code>ref</code>ã€<code>reactive</code> ç­‰ API æ„å»ºæ•°æ®é©±åŠ¨è§†å›¾ã€‚</li>
<li><strong>è·¯ç”±ç®¡ç†</strong>ï¼šé€šè¿‡ <code>vue-router</code> å®ç° SPAï¼ˆå•é¡µåº”ç”¨ï¼‰çš„å¤šè§†å›¾å¯¼èˆªã€‚</li>
<li><strong>é«˜æ•ˆæ„å»º</strong>ï¼šVite æä¾›æ— ä¸ä¼¦æ¯”çš„å¼€å‘ä½“éªŒä¸ç”Ÿäº§ä¼˜åŒ–ã€‚</li>
<li><strong>å·¥ç¨‹è§„èŒƒ</strong>ï¼šæ¸…æ™°çš„ç›®å½•ç»“æ„ã€ä½œç”¨åŸŸæ ·å¼ã€æ¨¡å—åŒ–å¯¼å…¥å¯¼å‡ºã€‚</li>
</ul>
<p>éšç€é¡¹ç›®å¤æ‚åº¦å¢åŠ ï¼Œè¿˜å¯å¼•å…¥ <strong>Piniaï¼ˆçŠ¶æ€ç®¡ç†ï¼‰</strong> ã€<strong>Axiosï¼ˆHTTP è¯·æ±‚ï¼‰</strong> ã€<strong>TypeScriptï¼ˆç±»å‹å®‰å…¨ï¼‰</strong> ã€<strong>å•å…ƒæµ‹è¯•ï¼ˆVitestï¼‰</strong> ç­‰ï¼Œæ„å»ºä¼ä¸šçº§åº”ç”¨ã€‚</p>
<blockquote>
<p>ğŸŒˆ <strong>æœªæ¥å·²æ¥</strong>ï¼šVue 3 + Vite ä¸ä»…æ˜¯æŠ€æœ¯æ ˆçš„é€‰æ‹©ï¼Œæ›´æ˜¯ä¸€ç§é«˜æ•ˆã€æ„‰æ‚¦çš„å¼€å‘å“²å­¦ã€‚æŒæ¡å®ƒï¼Œä½ ä¾¿ç«™åœ¨äº†ç°ä»£ Web å¼€å‘çš„æœ€å‰æ²¿ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬åå…«ç¯‡Â·å¤§ç»“å±€ï¼‰ï¼šå†¯è¡¡çš„â€œè¿‡ç›®ä¸å¿˜â€ä¸è¯­è¨€çš„åœ†æ»¡]]></title>    <link>https://juejin.cn/post/7597346583114203162</link>    <guid>https://juejin.cn/post/7597346583114203162</guid>    <pubDate>2026-01-21T01:52:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597346583114203162" data-draft-id="7597346583114170394" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬åå…«ç¯‡Â·å¤§ç»“å±€ï¼‰ï¼šå†¯è¡¡çš„â€œè¿‡ç›®ä¸å¿˜â€ä¸è¯­è¨€çš„åœ†æ»¡"/> <meta itemprop="keywords" content="Swift,ç¼–ç¨‹è¯­è¨€,Apple"/> <meta itemprop="datePublished" content="2026-01-21T01:52:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§ç†ŠçŒ«ä¾¯ä½©"/> <meta itemprop="url" content="https://juejin.cn/user/4292907536222152"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬åå…«ç¯‡Â·å¤§ç»“å±€ï¼‰ï¼šå†¯è¡¡çš„â€œè¿‡ç›®ä¸å¿˜â€ä¸è¯­è¨€çš„åœ†æ»¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292907536222152/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§ç†ŠçŒ«ä¾¯ä½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-21T01:52:37.000Z" title="Wed Jan 21 2026 01:52:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e3a6578ceaa4496bb58719c997f71e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769565156&amp;x-signature=yIqK%2B7yK0Y2VF5AJiQcyJ3FHSEo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<blockquote>
<p><strong>æ‘˜è¦</strong>ï¼šæœ¬ç³»åˆ—è¿æ¥ç»ˆç« ã€‚Swift 6.2 ä¸ä»…å¸¦æ¥äº†å¹¶å‘å’Œæµ‹è¯•é¢†åŸŸçš„å·¨å¤§é©æ–°ï¼Œè¿˜é€šè¿‡ä¸€ç³»åˆ—çœ‹ä¼¼å¾®å°å®åˆ™<strong>ç”»é¾™ç‚¹ç›</strong>çš„ææ¡ˆï¼Œå®Œæˆäº†è¯­è¨€ä½“ç³»çš„è‡ªæˆ‘ä¿®æ­£ä¸è¿›åŒ–ã€‚æœ¬æ–‡å°†å€Ÿé»„è¯å¸ˆä¹‹å¦»<strong>å†¯è¡¡</strong>é‚£è¿‡ç›®ä¸å¿˜çš„æƒŠäººè®°å¿†ï¼Œæ€»ç»“æœ€åçš„ API ç»Ÿä¸€ä¸ ABI ç¨³å®šä¹‹æœ¯ï¼Œä¸ºè¿™åœº Swift 6.2 ä¾ å®¢è¡Œï¼Œç”»ä¸Šåœ†æ»¡çš„å¥å·ï¼</p>
</blockquote>
<h2 data-id="heading-0">0ï¸âƒ£ ğŸ¼ åºç« ï¼šæ¡ƒèŠ±å²›ä¸Šçš„â€œè§„åˆ™ä¹‹äº‰â€</h2>
<p>æ¡ƒèŠ±å²›ï¼Œä¸œé‚ªé»„è¯å¸ˆçš„è™šæ‹Ÿç§˜å¢ƒã€‚</p>
<p>è¿™é‡Œçš„ç«¹æ—é˜µæ³•ä¸æ˜¯ç”±æ ‘æœ¨æ„æˆï¼Œè€Œæ˜¯ç”±æ— æ•°çš„ä»£ç è¡Œå †å è€Œæˆã€‚å¤§ç†ŠçŒ«ä¾¯ä½©ç©¿æ¢­åœ¨è¿·å®«ä¸­ï¼Œç¬¬Næ¬¡ç¡®è®¤äº†è‡ªå·±<strong>å¤´ç»å¯¹ä¸ç§ƒ</strong>ï¼Œå¹¶å¯¹ç€ç©ºæ°”å–Šé“ï¼šâ€œæˆ‘åªæ˜¯è·¯ç—´ï¼Œä¸æ˜¯æ²¡è„‘å­ï¼æˆ‘åªæ˜¯æ‰¾ä¸ç€å¨æˆ¿ï¼â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0998bab698a94980a5a42e9f361553ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769565156&amp;x-signature=lCX%2FDWvhh%2BzeiF1Oh2l3jvcvG2U%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä»–ç»ˆäºåœ¨ä¸€åº§å †æ»¡äº†ä»£ç å·è½´çš„é˜æ¥¼é‡Œï¼Œæ‰¾åˆ°äº†æ­¤è¡Œçš„ç›®æ ‡â€”â€”<strong>å†¯è¡¡</strong>ã€‚å†¯è¡¡å®¹è²Œç§€ä¸½ï¼Œæ°”è´¨æ·¡é›…ï¼Œæœ€æ“…é•¿çš„æ˜¯<strong>è¿‡ç›®ä¸å¿˜ï¼Œèƒ½å°†ä¸–é—´æ‰€æœ‰ç§˜ç±ï¼ˆä»£ç ï¼‰èä¼šè´¯é€š</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e6089dcae6f42729ddad3b3736fb23f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769565156&amp;x-signature=JYLHw0en6bfLZlQE9gnneSAoO3M%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©å¸¦æ¥äº†ä»–ä»ç¨‹ç‘¶è¿¦é‚£é‡Œç»§æ‰¿çš„æœ€åä¸€ä¸ªé—®é¢˜ï¼š<strong>å¦‚ä½•æ‰“ç ´æµ‹è¯•ä»£ç ï¼ˆTestï¼‰å’Œç”Ÿäº§ä»£ç ï¼ˆAppï¼‰ä¹‹é—´çš„è—©ç¯±ï¼Ÿ</strong></p>
<p><strong>åœ¨æœ¬æ¬¡å¤§å†’é™©ä¸­ï¼Œæ‚¨å°†å­¦åˆ°å¦‚ä¸‹å†…å®¹ï¼š</strong></p>
<ul>
<li>0ï¸âƒ£ ğŸ¼ åºç« ï¼šæ¡ƒèŠ±å²›ä¸Šçš„â€œè§„åˆ™ä¹‹äº‰â€</li>
<li>1ï¸âƒ£ ğŸ“ å†¯è¡¡çš„æ³•åˆ™ï¼ševaluate() çš„ç»Ÿä¸€åˆ¤å†³ (ST-0010)
<ul>
<li>æ‹›å¼ï¼šåˆ›é€ æ¡ä»¶ï¼Œå…¬å¼€è¯„ä¼°</li>
</ul>
</li>
<li>2ï¸âƒ£ ğŸ“œ å†¯è¡¡çš„è¿‡ç›®ä¸å¿˜ï¼šSwift 6.2 çš„æœ€ç»ˆç§˜ç±
<ul>
<li>ğŸ¯ åŸºç¡€å®‰å…¨æ€§ä¸æ€§èƒ½çš„â€œå¾®è°ƒâ€ï¼š</li>
<li>ğŸ›¡ï¸ å…¼å®¹æ€§ä¸ç¨³å®šæ€§çš„â€œæŠ¤æ³•ç¥åŠŸâ€ï¼š</li>
<li>ğŸ‘‘ æœ€åçš„ç»æŠ€ï¼š@abi çš„â€œèµ·æ­»å›ç”Ÿâ€ (SE-0476)</li>
</ul>
</li>
<li>3ï¸âƒ£ ğŸ¥‚ ç»ˆæåœ†æ»¡ï¼šSwift 6.2 çš„æ€»ç»“ä¸è‡´æ•¬</li>
</ul>
<p>â€œå†¯å¤«äººï¼Œæ‚¨çœ‹ï¼Œæµ‹è¯•å® <code>@Test</code> çŸ¥é“ç°åœ¨æ˜¯â€˜é€Ÿé€šæ¨¡å¼â€™ï¼ˆ<code>Smoke Test Mode</code>ï¼‰ï¼Œæ‰€ä»¥å®ƒè·³è¿‡äº†é‚£äº›è€—æ—¶å·¨å¤§çš„æµ‹è¯•ã€‚â€ä¾¯ä½©æŒ‡ç€å·è½´è¯´ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> Testing

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">TestManager</span> {
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> inSmokeTestMode <span class="hljs-operator">=</span> <span class="hljs-literal">true</span> <span class="hljs-comment">// å‡è®¾å½“å‰å¤„äºå¿«é€Ÿæ¨¡å¼</span>
}

<span class="hljs-comment">// ğŸ¥‹ @Test å®çŸ¥é“è¿™ä¸ªæ¡ä»¶ï¼Œæ‰€ä»¥å®ƒä¼šç¦ç”¨è‡ªå·±ï¼Œè¿™æ˜¯å®ƒçš„â€œå†…åŠŸâ€</span>
<span class="hljs-meta">@Test</span>(.disabled(if: <span class="hljs-type">TestManager</span>.inSmokeTestMode))
<span class="hljs-keyword">func</span> <span class="hljs-title function_">runLongComplexTest</span>() {
    <span class="hljs-comment">// è€—æ—¶æµ‹è¯•è¢«è·³è¿‡...</span>
}
</code></pre>
<p>â€œä½†æ˜¯æˆ‘çš„ä¸»ç¨‹åºä»£ç å¹¶ä¸çŸ¥é“ï¼å®ƒå¯èƒ½ä¼šåœ¨æµ‹è¯•å¼€å§‹å‰ï¼Œå¾’åŠ³åœ°è¿›è¡Œè€—æ—¶åˆå§‹åŒ–ã€‚æˆ‘ä»¬æ€¥éœ€ä¸€ç§æ–¹æ³•ï¼Œè®©æµ‹è¯•çš„â€˜å†…åŠŸâ€™ï¼Œè½¬åŒ–ä¸ºä¸»ç¨‹åºçš„â€˜å¤–åŠŸâ€™ï¼â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb629ab758044ce7886ccdf67157e0d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769565156&amp;x-signature=Z6Sui2ekwNUeKYrRKVJjaJIRWsY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">1ï¸âƒ£ ğŸ“ å†¯è¡¡çš„æ³•åˆ™ï¼ševaluate() çš„ç»Ÿä¸€åˆ¤å†³ (ST-0010)</h2>
<p>å†¯è¡¡æ·¡æ·¡ä¸€ç¬‘ï¼Œä»å·è½´å †ä¸­æŠ½å‡ºäº†ä¸€æœ¬å†™ç€ <strong>ST-0010</strong> çš„ç§˜ç±ï¼šâ€œä¾¯ä¾ å£«ï¼Œä½ è¯´çš„æ­£æ˜¯<strong>è§„åˆ™çš„ç»Ÿä¸€æ€§</strong>ã€‚ä»£ç çš„æ•ˆç‡ï¼Œä¸èƒ½æœ‰â€˜åŒé‡æ ‡å‡†â€™ã€‚â€</p>
<p>å¥¹è§£é‡Šé“ï¼ŒSwift 6.2 å¸¦æ¥çš„ <strong><code>evaluate()</code></strong> æ–¹æ³•ï¼Œå°±æ˜¯å°†<strong>æµ‹è¯•çš„è§„åˆ™å¼•æ“</strong>æš´éœ²ç»™<strong>åº”ç”¨ç¨‹åºé€»è¾‘</strong>çš„é’¥åŒ™ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cdf481f1882448e9f030245c51a9c96~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769565156&amp;x-signature=ao0BD6YVRk9dNrErOIV5yUU5fFA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-2">æ‹›å¼ï¼šåˆ›é€ æ¡ä»¶ï¼Œå…¬å¼€è¯„ä¼°</h3>
<p>â€œä»¥å‰ï¼Œä½ åªèƒ½åœ¨ <code>@Test</code> å®é‡Œå®šä¹‰ä¸€ä¸ªæ¡ä»¶ç‰¹æ€§ï¼ˆCondition Traitï¼‰ã€‚ç°åœ¨ï¼Œä½ å¯ä»¥æŠŠå®ƒå½“æˆä¸€ä¸ªæ™®é€šçš„å¯¹è±¡æ¥å®ä¾‹åŒ–ï¼Œç„¶åè°ƒç”¨å®ƒçš„ <code>evaluate()</code> æ–¹æ³•è¿›è¡Œè¯„ä¼°ã€‚â€å†¯è¡¡åœ¨ç©ºä¸­å†™ä¸‹äº†ä»£ç ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// å†¯è¡¡ï¼šè®©è§„çŸ©èµ°å‡ºæµ‹è¯•æˆ¿ï¼Œå»æŒ‡å¯¼ç”Ÿäº§</span>
<span class="hljs-keyword">func</span> <span class="hljs-title function_">checkForSmokeTest</span>() <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> {
    <span class="hljs-comment">// 1. å®ä¾‹åŒ–æ¡ä»¶ç‰¹æ€§ï¼ˆConditionTraitï¼‰ï¼šå°†æµ‹è¯•é€»è¾‘å…·è±¡åŒ–</span>
    <span class="hljs-keyword">let</span> trait <span class="hljs-operator">=</span> <span class="hljs-type">ConditionTrait</span>.disabled(if: <span class="hljs-type">TestManager</span>.inSmokeTestMode)

    <span class="hljs-comment">// 2. è¯„ä¼°ï¼šä½¿ç”¨ try await trait.evaluate() è·å–æœ€ç»ˆçš„å¸ƒå°”ç»“æœ</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> trait.evaluate() {
        <span class="hljs-comment">// å¦‚æœè¯„ä¼°ä¸º True (å³æ»¡è¶³ç¦ç”¨æ¡ä»¶)</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸš¨ å½“å‰å¤„äºå¿«é€Ÿæ¨¡å¼ã€‚ä¸»ç¨‹åºï¼šè¯·åœæ­¢ä¸å¿…è¦çš„åˆå§‹åŒ–æ“ä½œã€‚"</span>)
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å¦‚æœè¯„ä¼°ä¸º False (å³ä¸æ»¡è¶³ç¦ç”¨æ¡ä»¶)</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… å¤„äºå®Œæ•´æ¨¡å¼ã€‚ä¸»ç¨‹åºï¼šè¯·è¿è¡Œæ‰€æœ‰åˆå§‹åŒ–ã€‚"</span>)
    }
}
</code></pre>
<p>ä¾¯ä½©æ‹æ¡ˆå«ç»ï¼šâ€œ<strong>å¤§æ™ºè‹¥æ„šï¼</strong> è¿™ä¹ˆç®€å•çš„ <code>evaluate()</code>ï¼Œå´è§£å†³äº†æµ‹è¯•ä»£ç ä¸ç”Ÿäº§ä»£ç ä¹‹é—´<strong>äº’ç›¸çŒœå¿Œ</strong>çš„åƒå¹´éš¾é¢˜ï¼æˆ‘ä»¬ç»ˆäºå¯ä»¥ç¡®ä¿ï¼Œåœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œ<strong>å¯¹ç¯å¢ƒçš„åˆ¤æ–­éƒ½æ˜¯ä¸€è‡´ä¸”å…¬æ­£çš„</strong>ã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89ad83d7186c45ceab81db797e496f9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769565156&amp;x-signature=OxnxtOgoJyyXBgVp2T%2BbgFQwnNc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-3">2ï¸âƒ£ ğŸ“œ å†¯è¡¡çš„è¿‡ç›®ä¸å¿˜ï¼šSwift 6.2 çš„æœ€ç»ˆç§˜ç±</h2>
<p>å°±åœ¨ä¾¯ä½©ä»¥ä¸º Swift 6.2 çš„ç§˜ç±å·²ç»å­¦å®Œæ—¶ï¼Œå†¯è¡¡å´å¾®ç¬‘ç€æŒ‡äº†æŒ‡å¥¹èº«åé‚£å †ç§¯å¦‚å±±çš„å·è½´ï¼šâ€œä¾¯ä¾ å£«ï¼Œä½ åªå­¦äº†å¤–å®¶åŠŸå¤«çš„å‡ ä¸ªå¤§æ‹›ï¼Œè¿˜æœ‰è®¸å¤š<strong>æ‰“é€šä»»ç£äºŒè„‰çš„å†…åŠŸå¿ƒæ³•</strong>ï¼Œè—åœ¨è¿™äº›ç§˜ç±é‡Œå‘¢ã€‚â€</p>
<p>å†¯è¡¡å‡­å€Ÿå¥¹è¿‡ç›®ä¸å¿˜çš„ç¥æŠ€ï¼Œå¼€å§‹æ€»ç»“é‚£äº›éšè—åœ¨è§’è½ã€å´è‡³å…³é‡è¦çš„ <strong>Swift 6.2 æ”¹è¿›</strong>ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f53a1c9d4fd4cbfbe49d24957f95fb7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769565156&amp;x-signature=BH05MOInJ4TW%2Fibl9NYv7Ez3g8k%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-4">ğŸ¯ åŸºç¡€å®‰å…¨æ€§ä¸æ€§èƒ½çš„â€œå¾®è°ƒâ€ï¼š</h3>
<ul>
<li><strong>SE-0446 (Non-escapable types)ï¼šæ•°æ®çš„é—­å…³é”é­‚æœ¯ã€‚</strong> å®ƒå¼•å…¥äº†<strong>ä¸å¯é€ƒé€¸ç±»å‹</strong>ï¼Œç¡®ä¿æ•°æ®ä¸èƒ½è¿”å›æˆ–åˆ†é…åˆ°åˆ›å»ºå‡½æ•°çš„ä½œç”¨åŸŸä¹‹å¤–ã€‚è¿™å°±åƒæ˜¯ç»™æ•°æ®åŠ äº†ä¸€é“ç¦åˆ¶ï¼Œç¡®ä¿å…¶<strong>å±€éƒ¨å®‰å…¨</strong>ï¼Œé˜²æ­¢å¹¶å‘å¸¦æ¥çš„æ··ä¹±ã€‚</li>
<li><strong>SE-0447 (Span)ï¼šå®‰å…¨è®¿é—®è®°å¿†çš„ç§˜è¯€ã€‚</strong> åŸºäºä¸å¯é€ƒé€¸ç±»å‹ï¼Œæ–°å¢äº† <code>Span</code> ç»“æ„ä½“ï¼Œè®©æˆ‘ä»¬å¯ä»¥æ›´å®‰å…¨ã€æ›´ä¾¿æ·åœ°è®¿é—®<strong>è¿ç»­å†…å­˜</strong>ï¼Œæ˜¯é«˜æ€§èƒ½ä»£ç çš„<strong>æ‰“é€šä»»ç£äºŒè„‰</strong>ä¹‹æ³•ã€‚</li>
<li><strong>SE-0457 (Duration/Int128)ï¼šæ—¶é—´å°ºåº¦çš„å‡çº§ã€‚</strong> <code>Duration</code> ç±»å‹ç°åœ¨å¯ä»¥æš´éœ²å…¶æ€»å…±çš„ <strong>attoseconds</strong>ï¼ˆåäº¿åˆ†ä¹‹ä¸€ç§’çš„åäº¿åˆ†ä¹‹ä¸€ï¼‰ï¼Œå¹¶ç”¨ <strong>Int128</strong> æ¥æ‰¿è½½ã€‚è¿™ä½¿å¾— Swift åœ¨æ—¶é—´æµ‹é‡ç²¾åº¦ä¸Šè¾¾åˆ°äº†<strong>ç™»å³°é€ æ</strong>çš„å¾®è§‚å±‚é¢ã€‚</li>
<li><strong>SE-0474 (Yielding Accessors)ï¼šé›¶æ‹·è´çš„å¥¥ç§˜ã€‚</strong> å¼•å…¥<strong>è®©æ¸¡è®¿é—®å™¨</strong>ï¼Œå…è®¸åœ¨è¯»å†™å€¼æ—¶æ— éœ€è¿›è¡Œæ‹·è´ã€‚è¿™å¯¹äºå¤§å‹ç»“æ„ä½“æ¥è¯´ï¼Œæ˜¯æå¤§çš„<strong>æ€§èƒ½æå‡</strong>ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02b7623647ca4ae38ea859ef054e44f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769565156&amp;x-signature=Pr6u9G5%2Fdq8PtMD2nGypWffwxq0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-5">ğŸ›¡ï¸ å…¼å®¹æ€§ä¸ç¨³å®šæ€§çš„â€œæŠ¤æ³•ç¥åŠŸâ€ï¼š</h3>
<ul>
<li><strong>SE-0463 (Objective-C Imports)ï¼šå¹¶å‘çš„å…¼å®¹ä¹‹é“ã€‚</strong> æ”¹å˜äº† Objective-C å¯¼å…¥è§„åˆ™ï¼Œé»˜è®¤å°† <code>completion handler</code> å‚æ•°è§†ä¸º <strong><code>@Sendable</code></strong>ï¼Œé™¤éæ˜ç¡®è¦æ±‚ï¼Œå¤§å¤§å‡å°‘äº†ä¸æ—§ä»£ç é›†æˆæ—¶çš„å¹¶å‘è­¦å‘Šã€‚</li>
<li><strong>SE-0480 (Diagnostic Groups)ï¼šåŒ…ç®¡ç†è€…çš„åˆ©å™¨ã€‚</strong> å¢å¼ºäº†è¯Šæ–­ç»„åŠŸèƒ½ï¼Œå…è®¸å¼€å‘è€…ç›´æ¥åœ¨ <strong>Swift Package</strong> å†…éƒ¨è®¾ç½®è­¦å‘Šå’Œé”™è¯¯çš„çº§åˆ«ï¼Œæ˜¯ä»£ç è´¨é‡ç®¡ç†çš„<strong>å°šæ–¹å®å‰‘</strong>ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3774799f48504664bbb9896b40580fe7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769565156&amp;x-signature=whFn6YclN9RJ%2B7L%2BQiq7sA1HEto%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-6">ğŸ‘‘ æœ€åçš„ç»æŠ€ï¼š@abi çš„â€œèµ·æ­»å›ç”Ÿâ€ (SE-0476)</h3>
<p>å†¯è¡¡æ‹¿èµ·æœ€åä¸€å·å·è½´ï¼Œè¡¨æƒ…å˜å¾—å¼‚å¸¸ä¸¥è‚ƒï¼šâ€œåœ¨æ‰€æœ‰è¿™äº›æ”¹è¿›ä¸­ï¼Œæœ‰ä¸€ä¸ªææ¡ˆï¼Œè™½ç„¶éš¾ä»¥ç”¨ç®€å•çš„ä»£ç ç¤ºä¾‹å±•ç¤ºï¼Œä½†å®ƒå¯¹<strong>åº“ä½œè€…</strong>æ¥è¯´ï¼Œå´æ˜¯<strong>æœ€èªæ˜ã€æœ€ä»æ…ˆ</strong>çš„ã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa5986e0f8484b7dbd23cb15a381a278~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769565156&amp;x-signature=XUFvcLRuFdopCGt6B1r0bZJ6cAA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¥¹æŒ‡çš„æ˜¯ <strong>SE-0476</strong>ï¼Œå¼•å…¥äº† <strong><code>@abi</code> å±æ€§</strong>ã€‚</p>
<blockquote>
<p><strong>ğŸŒŸ æŠ€æœ¯å“²å­¦ï¼šABI ç¨³å®šä¸‹çš„èµ¦å…çŠ¶</strong>
åœ¨ <strong>ABI ç¨³å®šï¼ˆApplication Binary Interface Stabilityï¼‰</strong> çš„å¤§å‰æä¸‹ï¼Œåº“ä½œè€…ä¸€æ—¦å‘å¸ƒä»£ç ï¼Œå°±å¾ˆéš¾åšå‡ºæ”¹åŠ¨ï¼Œå“ªæ€•æ˜¯ä¸€ä¸ªå¾®å°çš„é”™è¯¯ã€‚<code>@abi</code> å±æ€§å°±åƒæ˜¯ç»™åº“ä½œè€…å‘äº†ä¸€å¼  <strong>â€œèµ¦å…çŠ¶â€</strong> ï¼Œå…è®¸ä»–ä»¬åœ¨ä¸ç ´åä¾èµ–æ—§è¡Œä¸ºçš„ä»£ç çš„å‰æä¸‹ï¼Œè¿›è¡ŒæŸäº›ä¿®æ”¹ï¼Œä¾‹å¦‚ï¼šå°† <code>rethrows</code> æ›´æ”¹ä¸º <code>typed throws</code>ï¼Œæˆ–è€…â€”â€”â€œ<strong>é‡å‘½åä¸€ä¸ªè¢«è®¤ä¸ºå…·æœ‰ç¾éš¾æ€§è¯¯å¯¼çš„ API åç§°ã€‚</strong>â€</p>
</blockquote>
<p>ä¾¯ä½©æ„Ÿæ…¨é“ï¼šâ€œè¿™çœŸæ˜¯<strong>åŠŸå¾·æ— é‡</strong>å•Šï¼è°æ²¡åœ¨å¹´è½»æ—¶çŠ¯è¿‡å‡ ä¸ªâ€˜å‘½åé”™è¯¯â€™ï¼Ÿç°åœ¨å¯ä»¥ä¿®æ­£ï¼Œè€Œä¸ç”¨æ‹…å¿ƒæ‰“ç ´æ•´ä¸ªç”Ÿæ€ç³»ç»Ÿï¼è¿™æ˜¯å¯¹â€˜<strong>çŸ¥é”™èƒ½æ”¹</strong>â€™æœ€å¥½çš„æ”¯æŒï¼â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b2b974465744d66851324dac9afb5bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769565156&amp;x-signature=KHdTbOR3uoxmsuvHLnMliyDkJlY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-7">3ï¸âƒ£ ğŸ¥‚ ç»ˆæåœ†æ»¡ï¼šSwift 6.2 çš„æ€»ç»“ä¸è‡´æ•¬</h2>
<p>â€œå¥½äº†ï¼Œä¾¯ä¾ å£«ï¼Œâ€å†¯è¡¡åˆä¸Šæ‰€æœ‰å·è½´ï¼Œâ€œSwift 6.2 å¸¦æ¥çš„ï¼Œæ˜¯ä¸€åœºå¯¹<strong>è¯­è¨€åŸºç¡€å»ºè®¾</strong>çš„<strong>å…¨é¢èƒœåˆ©</strong>ã€‚å®ƒä¸ä»…ä»…æ˜¯å¢åŠ äº†æ–°åŠŸèƒ½ï¼Œæ›´æ˜¯ä¿®å¤äº†å¹¶å‘æ—¶ä»£çš„é—ç•™é—®é¢˜ï¼Œè®©æ•´ä¸ª Swift ä½“ç³»å˜å¾—æ›´åŠ <strong>ç¨³å¥ã€å®‰å…¨ã€é«˜æ•ˆ</strong>ã€‚â€</p>
<p>ä¾¯ä½©æ·±æ·±é èº¬ï¼šâ€œå¤šè°¢å†¯å¤«äººä¼ æˆç»ˆæå¿ƒæ³•ã€‚æˆ‘çš„ Swift 6.2 ä¾ å®¢è¡Œï¼Œç»ˆäºåœ†æ»¡äº†ã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12c92cf528a34de39a5049ab975a67c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769565156&amp;x-signature=RpJ3%2B2roBUo6HcqwsaqLCg8NhDY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä»–æŠ¬èµ·å¤´ï¼Œçœ¼ç¥ä¸­å……æ»¡äº†å…‰èŠ’ï¼Œå¸¦ç€ä¸€ä¸å¹½é»˜å’Œå“²ç†çš„æ€»ç»“é“ï¼š</p>
<blockquote>
<p>â€œè¯šç„¶ï¼Œå¹¶éæ‰€æœ‰çš„ç‰¹æ€§éƒ½ä¼šåœ¨æ¯ä¸ªé¡¹ç›®ä¸Šå¤§æ”¾å¼‚å½©ã€‚ä½†å†å²å‘Šè¯‰æˆ‘ä»¬ï¼Œé‚£äº›çœ‹ä¼¼ä¸èµ·çœ¼çš„â€˜å¾®åˆ›æ–°â€™ï¼Œå¾€å¾€ä¼šæˆä¸ºæœªæ¥çš„æ ‡å‡†ã€‚è¯·å„ä½ä¾ å£«åŠ¡å¿…ç•™æ„é‚£äº›<strong>éé€ƒé€¸ç±»å‹</strong>ã€<strong>é›¶æ‹·è´è®¿é—®å™¨</strong>ï¼Œä»¥åŠæˆ‘ä»¬æ­¤å‰è®¨è®ºè¿‡çš„ <strong>InlineArray</strong>ï¼å®ƒä»¬å¯èƒ½å°±æ˜¯ä½ é¡¹ç›®ä¸­ï¼Œä¸‹ä¸€ä¸ª<strong>ç™»å³°é€ æ</strong>çš„å…³é”®ã€‚â€</p>
</blockquote>
<p>ä¾¯ä½©è½¬èº«ï¼Œå¤§æ­¥æµæ˜Ÿåœ°èµ°å‘æ¡ƒèŠ±å²›çš„å‡ºå£ã€‚</p>
<p>â€œå†¯å¤«äººï¼Œæ±Ÿæ¹–è·¯è¿œï¼Œæˆ‘ä»¬åä¼šæœ‰æœŸï¼â€</p>
<p>â€œä¾¯ä¾ å£«ï¼Œä½ ç°åœ¨è¦å»å“ªï¼Ÿâ€å†¯è¡¡é—®é“ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae9bde0ecec24082b8daa8705dee611f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769565156&amp;x-signature=pIXqk6RoOCfjWCj9Y6kYT%2Bet%2FL8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©å¤´ä¹Ÿä¸å›ï¼Œå£°éŸ³å´æ¸…æ™°åœ°ä¼ äº†å›æ¥ï¼šâ€œæˆ‘è¦å»â€¦â€¦å»æ‰¾åˆ°é‚£åº§ä¼ è¯´ä¸­ï¼Œç”±ç«¹ç¬‹é›•åˆ»è€Œæˆçš„<strong>ç»ˆæå¨æˆ¿</strong>ï¼å› ä¸ºï¼Œæˆ‘çš„å¤´<strong>ç»å¯¹ä¸ç§ƒ</strong>ï¼Œä½†æˆ‘çš„è‚šå­ï¼Œ<strong>ç»å¯¹é¥¿äº†ï¼</strong>â€</p>
<p><strong>ï¼ˆè‡³æ­¤ï¼ŒSwift 6.2 ä¾ å®¢è¡Œç³»åˆ—æŠ¥é“å…¨éƒ¨ç»“æŸã€‚æ„Ÿè°¢å„ä½è¯»è€…å¯¹å¤§ç†ŠçŒ«ä¾¯ä½©ä¸€è·¯çš„æ”¯æŒä¸å…³æ³¨ï¼æ±Ÿæ¹–å†è§ï¼ï¼‰</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa2397fcb7974c6b9622aa27a7d9f518~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769565156&amp;x-signature=CFvJsjd8H5Bz41%2FCwDSs9FmyPgI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[1-åˆè¯†HTMLä¸CSS]]></title>    <link>https://juejin.cn/post/7597317683051184137</link>    <guid>https://juejin.cn/post/7597317683051184137</guid>    <pubDate>2026-01-20T15:03:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597317683051184137" data-draft-id="7597058147750002698" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="1-åˆè¯†HTMLä¸CSS"/> <meta itemprop="keywords" content="å‰ç«¯,CSS"/> <meta itemprop="datePublished" content="2026-01-20T15:03:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="makinohara"/> <meta itemprop="url" content="https://juejin.cn/user/455637552340731"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            1-åˆè¯†HTMLä¸CSS
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/455637552340731/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    makinohara
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T15:03:22.000Z" title="Tue Jan 20 2026 15:03:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">åˆè¯†Webå‰ç«¯</h4>
<p>å‰ç«¯ä»£ç é€šè¿‡æµè§ˆå™¨çš„è§£æä¸æ¸²æŸ“è½¬åŒ–ä¸ºç”¨æˆ·å¯ä»¥çœ‹åˆ°çš„ç½‘é¡µã€‚æµè§ˆå™¨ä¸­å¯¹ä»£ç è¿›è¡Œè§£ææ¸²æŸ“çš„éƒ¨åˆ†ï¼Œç§°ä¸ºæµè§ˆå™¨å†…æ ¸ã€‚ä¸åŒçš„æµè§ˆå™¨ï¼Œå†…æ ¸ä¸åŒï¼Œå¯¹ç›¸åŒçš„å‰ç«¯ä»£ç çš„è§£ææ•ˆæœå¯èƒ½å­˜åœ¨å·®å¼‚ã€‚Webæ ‡å‡†å°±æ˜¯ç”¨æ¥è¿›è¡Œç»Ÿä¸€çš„ã€‚Webæ ‡å‡†æå‡ºï¼Œä¸€ä¸ªç½‘é¡µç¨‹åºç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼š</p>
<p>HTMLï¼šè´Ÿè´£ç½‘é¡µçš„ç»“æ„ï¼ˆé¡µé¢å…ƒç´ å’Œå†…å®¹ï¼‰</p>
<p>CSSï¼šè´Ÿè´£ç½‘é¡µçš„è¡¨ç°ï¼ˆé¡µé¢å…ƒç´ çš„å¤–è§‚ã€ä½ç½®ç­‰é¡µé¢æ ·å¼ï¼Œå¦‚é¢œè‰²ã€å¤§å°ç­‰ï¼‰</p>
<p>JavaScriptï¼šè´Ÿè´£ç½‘é¡µçš„è¡Œä¸ºï¼ˆäº¤äº’æ•ˆæœï¼‰</p>
<h4 data-id="heading-1">ä»€ä¹ˆæ˜¯HTML</h4>
<p>HTMLï¼ˆHyperText Markup Languageï¼‰ï¼šè¶…æ–‡æœ¬æ ‡è®°è¯­è¨€</p>
<p>è¶…æ–‡æœ¬ï¼šè¶…è¶Šäº†æ–‡æœ¬çš„é™åˆ¶ã€‚é™¤äº†æ–‡å­—ä¿¡æ¯ï¼Œè¿˜å¯ä»¥å®šä¹‰å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰å†…å®¹ã€‚</p>
<p>æ ‡è®°è¯­è¨€ï¼šç”±æ ‡ç­¾"&lt;æ ‡ç­¾å&gt;" æ„æˆçš„è¯­è¨€ã€‚</p>
<p>HTMLæ ‡ç­¾éƒ½æ˜¯é¢„å®šä¹‰å¥½çš„ã€‚ä¾‹å¦‚ï¼šä½¿ç”¨<code>&lt;h1&gt;</code>å±•å¼€æ ‡é¢˜ï¼Œä½¿ç”¨<code>&lt;img&gt;</code>å±•ç¤ºå›¾ç‰‡ï¼Œä½¿ç”¨<code>&lt;video&gt;</code>å±•ç¤ºè§†é¢‘ã€‚HTMLä»£ç ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼ŒHTMLæ ‡ç­¾ç”±æµè§ˆå™¨è§£æã€‚</p>
<h4 data-id="heading-2">ä»€ä¹ˆæ˜¯CSS</h4>
<p>CSSï¼ˆCascading Style Sheetï¼‰ï¼šå±‚å æ ·å¼è¡¨ï¼Œç”¨äºæ§åˆ¶é¡µé¢çš„æ ·å¼ã€‚</p>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">h1</span> style="<span class="hljs-attribute">color</span>:red;"&gt;<span class="hljs-selector-tag">HTML</span>å…¥é—¨ç¨‹åº&lt;/<span class="hljs-selector-tag">h1</span>&gt;
</code></pre>
<p>è¿™æ ·å°±å¯ä»¥æŠŠHTMLå…¥é—¨ç¨‹åºè¿™å‡ ä¸ªå­—å˜æˆçº¢è‰²ã€‚</p>
<p>Webå‰ç«¯å¼€å‘çš„ç›¸å…³æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2F" target="_blank" title="https://developer.mozilla.org/zh-CN/" ref="nofollow noopener noreferrer">MDN Web Docs</a></p>
<h4 data-id="heading-3">å®‰è£…æ’ä»¶</h4>
<p>1.HTML CSS Support</p>
<p>2.JavaScript(ES6) code snippets</p>
<p>3.Mithril Emmet</p>
<p>4.Path Intellisense</p>
<p>5.Vue 3 Snippets</p>
<p>6.Auto Close Tag</p>
<p>7.open in browser</p>
<p>8.Auto Rename Tag</p>
<p>9.Live Server</p>
<p>10.Vue(Official)</p>
<p>11.File Utils</p>
<p>12.IntelliJ IDEA Keybindings</p>
<p>13.Trae AI:Coding Assistant</p>
<p>14.Lingma - Alibaba Cloud AI Coding Assistant</p>
<p>åœ¨ç¼–å†™HTMLæ–‡ä»¶æ—¶ï¼Œç›´æ¥å…ˆè¾“å…¥ä¸€ä¸ªæ„Ÿå¹å·å†å›è½¦ï¼ŒVSCodeå°±ä¼šè¡¥å…¨æ‰€æœ‰çš„æ ‡ç­¾ã€‚é€‰ä¸­æ–‡æœ¬ï¼Œå†Ctrl+/å¯ä»¥ç”Ÿæˆæ³¨é‡Šã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span> <span class="hljs-comment">&lt;!--å£°æ˜å½“å‰æ–‡æ¡£çš„ç±»å‹ä¸ºHTML--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
â€‹
 Â <span class="hljs-comment">&lt;!-- è®¾ç½®ç½‘é¡µåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šçš„æ˜¾ç¤ºå®½åº¦ä¸ç¼©æ”¾æ¯”ä¾‹ --&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>HTMLå¿«é€Ÿå…¥é—¨<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>HTMLå¿«é€Ÿå…¥é—¨<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"img/1.png"</span>&gt;</span>
 Â 
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>å¯ä»¥é€šè¿‡å†™æ³¨é‡Šçš„æ–¹å¼ï¼Œè®©AIæ ¹æ®æ³¨é‡Šå®Œæˆå¯¹åº”çš„å†…å®¹ã€‚</p>
<h4 data-id="heading-4">é¢œè‰²è°ƒæ•´</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å£¹è§†ç•ŒÂ·å¾®è§†é¢‘ä¸¨å¦‚ä½•è´¯å½»è½å®å››ä¸­å…¨ä¼šç²¾ç¥ï¼Ÿæ€»ä¹¦è®°è¿™æ ·åˆ’é‡ç‚¹<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å£¹è§†ç•ŒÂ·å¾®è§†é¢‘ä¸¨å¦‚ä½•è´¯å½»è½å®å››ä¸­å…¨ä¼šç²¾ç¥ï¼Ÿæ€»ä¹¦è®°è¿™æ ·åˆ’é‡ç‚¹<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
 Â <span class="hljs-comment">&lt;!-- æœ‰å…­ç§æ ‡é¢˜æ ‡ç­¾ï¼Œä»h1åˆ°h6ï¼Œå…¶ä¸­h1ä¸ºæœ€é¡¶å±‚æ ‡é¢˜ï¼Œh6ä¸ºæœ€ä½å±‚æ ‡é¢˜ã€‚ --&gt;</span>
â€‹
 Â <span class="hljs-comment">&lt;!-- å®šä¹‰ä¸€ä¸ªè¶…é“¾æ¥ï¼Œå±•ç¤ºçš„å†…å®¹æ˜¯å¤®è§†ç½‘ --&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://www.cctv.com"</span>&gt;</span>å¤®è§†ç½‘<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
 Â <span class="hljs-comment">&lt;!-- a è¶…é“¾æ¥æ ‡ç­¾ 
 Â  href å±æ€§ï¼šè¶…é“¾æ¥çš„ç½‘å€
 Â  target å±æ€§ï¼šè¶…é“¾æ¥æ‰“å¼€æ–¹å¼
 Â  Â _blankï¼šåœ¨æ–°çª—å£æ‰“å¼€
 Â  Â _selfï¼šåœ¨å½“å‰çª—å£æ‰“å¼€ï¼ˆé»˜è®¤ï¼‰
 Â  Â å¦‚æœè¦åœ¨æ–°çª—å£æ‰“å¼€ï¼Œåº”è¯¥è¿™ä¹ˆä¹¦å†™ï¼š &lt;a href="http://www.cctv.com" target="_blank"&gt;å¤®è§†ç½‘&lt;/a&gt;
 Â --&gt;</span>
 Â   2026å¹´01æœˆ19æ—¥ 08:49
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>æ³¨æ„åˆ°åœ¨åŸæ¥çš„æ–°é—»ä¸­ï¼Œå‘å¸ƒæ—¶é—´æ˜¯å‘ˆç°è‰²çš„ã€‚è¿™å°±éœ€è¦CSSçš„æ ·å¼æ§åˆ¶äº†ã€‚</p>
<p>CSSçš„å¼•å…¥æ–¹å¼ï¼š</p>
<p>1.è¡Œå†…æ ·å¼ï¼šå†™åœ¨æ ‡ç­¾çš„styleå±æ€§ä¸­ï¼ˆé€šå¸¸é…åˆJavaScriptä½¿ç”¨ï¼‰</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å£¹è§†ç•ŒÂ·å¾®è§†é¢‘ä¸¨å¦‚ä½•è´¯å½»è½å®å››ä¸­å…¨ä¼šç²¾ç¥ï¼Ÿæ€»ä¹¦è®°è¿™æ ·åˆ’é‡ç‚¹<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å£¹è§†ç•ŒÂ·å¾®è§†é¢‘ä¸¨å¦‚ä½•è´¯å½»è½å®å››ä¸­å…¨ä¼šç²¾ç¥ï¼Ÿæ€»ä¹¦è®°è¿™æ ·åˆ’é‡ç‚¹<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://www.cctv.com"</span>&gt;</span>å¤®è§†ç½‘<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
 Â  Â <span class="hljs-comment">&lt;!-- æ–¹å¼ä¸€ï¼šè¡Œå†…æ ·å¼ --&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"color: gray"</span>&gt;</span>2026å¹´01æœˆ19æ—¥ 08:49<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>2.å†…éƒ¨æ ·å¼ï¼šå†™åœ¨styleæ ‡ç­¾ä¸­ï¼ˆå¯ä»¥å†™åœ¨é¡µé¢ä»»ä½•ä½ç½®ï¼Œä½†é€šå¸¸çº¦å®šå†™åœ¨headæ ‡ç­¾ä¸­ï¼‰</p>
<p>ç›¸å½“äºå…ˆå®šä¹‰è¢«spanåŒ…è£¹çš„æ–‡å­—çš„å±æ€§ï¼Œç„¶åå°†éœ€è¦è°ƒæ•´æ ·å¼çš„æ–‡å­—ç”¨spanåŒ…è£¹ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å£¹è§†ç•ŒÂ·å¾®è§†é¢‘ä¸¨å¦‚ä½•è´¯å½»è½å®å››ä¸­å…¨ä¼šç²¾ç¥ï¼Ÿæ€»ä¹¦è®°è¿™æ ·åˆ’é‡ç‚¹<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
 Â <span class="hljs-comment">&lt;!-- æ–¹å¼äºŒï¼šå†…éƒ¨æ ·å¼ --&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
 Â  Â <span class="hljs-selector-tag">span</span> {
 Â  Â  Â <span class="hljs-attribute">color</span>: gray;
 Â   }
 Â </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å£¹è§†ç•ŒÂ·å¾®è§†é¢‘ä¸¨å¦‚ä½•è´¯å½»è½å®å››ä¸­å…¨ä¼šç²¾ç¥ï¼Ÿæ€»ä¹¦è®°è¿™æ ·åˆ’é‡ç‚¹<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://www.cctv.com"</span>&gt;</span>å¤®è§†ç½‘<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>2026å¹´01æœˆ19æ—¥ 08:49<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>å¯ä»¥å°†spanæ”¹ä¸ºå…¶å®ƒæ ‡ç­¾ï¼Œé“ç†æ˜¯ä¸€æ ·çš„ï¼Œè¡¨ç¤ºè°ƒæ•´è¿™ä¸ªæ ‡ç­¾åŒ…è£¹çš„æ–‡å­—çš„å±æ€§ã€‚</p>
<p>3.å¤–éƒ¨æ ·å¼ï¼šå†™åœ¨ä¸€ä¸ªå•ç‹¬çš„.cssæ–‡ä»¶ä¸­ï¼ˆéœ€è¦é€šè¿‡linkæ ‡ç­¾åœ¨ç½‘é¡µä¸­å¼•å…¥ï¼‰</p>
<p>åœ¨htmlæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªcssæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾cssæ–‡ä»¶ï¼Œç„¶ååœ¨é‡Œé¢åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„news.cssæ–‡ä»¶ï¼Œå†…å®¹ä¸ºï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">span</span> {
 Â  Â <span class="hljs-attribute">color</span>: gray;
}
</code></pre>
<p>å†åœ¨htmlæ–‡ä»¶ä¸­é€šè¿‡linkæ ‡ç­¾å¼•å…¥</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å£¹è§†ç•ŒÂ·å¾®è§†é¢‘ä¸¨å¦‚ä½•è´¯å½»è½å®å››ä¸­å…¨ä¼šç²¾ç¥ï¼Ÿæ€»ä¹¦è®°è¿™æ ·åˆ’é‡ç‚¹<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
 Â <span class="hljs-comment">&lt;!-- æ–¹å¼ä¸‰ï¼šå¤–éƒ¨æ ·å¼ --&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"css/news.css"</span>&gt;</span>
 Â <span class="hljs-comment">&lt;!-- relè¡¨ç¤ºå¼•å…¥çš„æ–‡ä»¶ç±»å‹ï¼Œè¿™é‡Œæ˜¯stylesheetï¼Œè¡¨ç¤ºæ ·å¼æ–‡ä»¶ï¼Œå³css
 Â hrefè¡¨ç¤ºå¼•å…¥çš„æ–‡ä»¶è·¯å¾„ï¼Œè¿™é‡Œæ˜¯css/news.css --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å£¹è§†ç•ŒÂ·å¾®è§†é¢‘ä¸¨å¦‚ä½•è´¯å½»è½å®å››ä¸­å…¨ä¼šç²¾ç¥ï¼Ÿæ€»ä¹¦è®°è¿™æ ·åˆ’é‡ç‚¹<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://www.cctv.com"</span>&gt;</span>å¤®è§†ç½‘<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>2026å¹´01æœˆ19æ—¥ 08:49<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>ç¬¬ä¸€ç§æ–¹å¼çš„å¤ç”¨æ€§æ˜¯æœ€å·®çš„ï¼Œå› ä¸ºåªé’ˆå¯¹å½“å‰è¡Œç”Ÿæ•ˆã€‚ç¬¬ä¸‰ç§æ–¹å¼çš„å¤ç”¨æ€§æ˜¯æœ€å¥½çš„ï¼Œå“ªä¸ªHTMLæ–‡ä»¶è¦ç”¨ï¼Œç›´æ¥é€šè¿‡linkå¼•å…¥ã€‚ç¬¬äºŒç§å±…ä¸­ï¼Œé’ˆå¯¹å½“å‰çš„HTMLæ–‡ä»¶ç”Ÿæ•ˆã€‚</p>
<h4 data-id="heading-5">é¢œè‰²é€æ˜åº¦è°ƒæ•´</h4>
<p>è°ƒæ•´äº†é¢œè‰²ä¹‹åï¼Œæˆ‘ä»¬å‘ç°åŸå§‹çš„å¤®è§†æ–°é—»ä¸­çš„ç°è‰²æ˜¯éå¸¸æ·¡çš„ï¼Œè¿˜è¦è°ƒæ•´ã€‚</p>
<p>é¢œè‰²è¡¨ç¤ºå½¢å¼ï¼š</p>



































<table><thead><tr><th>è¡¨ç¤ºæ–¹å¼</th><th>å±æ€§å€¼</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>å…³é”®å­—</td><td>é¢œè‰²è‹±æ–‡å•è¯</td><td>red\green\blue\gray</td><td>ä¸Šé¢çš„ä¸‰ä¸ªä¾‹å­éƒ½ä½¿ç”¨å…³é”®å­—å£°æ˜é¢œè‰²</td></tr><tr><td>rgbè¡¨ç¤ºæ³•</td><td>rgb(r,g,b)</td><td>çº¢ç»¿è“ä¸‰åŸè‰²ï¼Œå–å€¼0-255</td><td>rgb(0,0,0)ã€rgb(255,0,0)ï¼ˆçº¢è‰²ï¼‰</td></tr><tr><td>rgbaè¡¨ç¤ºæ³•</td><td>rgba(r,g,b,a)</td><td>çº¢ç»¿è“ä¸‰åŸè‰²ï¼Œaè¡¨ç¤ºé€æ˜åº¦ï¼Œå–å€¼ï¼š0-1</td><td>rgba(0,0,0,0.3),rgba(255,0,0,0.5)</td></tr><tr><td>åå…­è¿›åˆ¶è¡¨ç¤ºæ³•</td><td>#rrggbb</td><td>#å¼€å¤´ï¼Œå°†æ•°å­—è½¬æ¢ä¸ºåå…­è¿›åˆ¶è¡¨ç¤º</td><td>#000000ã€#ff0000ï¼Œç®€å†™ï¼š#000ï¼Œ#f00</td></tr></tbody></table>
<p>ff=<code>16*15+1*15</code>=255ï¼Œæ‰€ä»¥#ff0000ç›¸å½“äºrgb(255,0,0)ï¼Œéƒ½è¡¨ç¤ºçº¯çº¢è‰²ã€‚</p>
<p>å¦‚ä½•ä¸æ–°é—»çš„é¢œè‰²ä¿æŒä¸€è‡´ï¼Ÿå¯ä»¥Win+Shift+Sè¿›å…¥æˆªå›¾ï¼Œé€‰æ‹©é¢œè‰²é€‰å–å™¨å³å¯ï¼Œå¯ä»¥é€‰æ‹©çº¢ç»¿è“è¡¨ç¤ºæ³•ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©åå…­è¿›åˆ¶è¡¨ç¤ºæ³•ã€‚æˆ–è€…åœ¨ç½‘é¡µç©ºç™½å¤„å³é”®ï¼Œç‚¹å‡»View Page SourceæŸ¥çœ‹æºç ä¹Ÿå¯ä»¥ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">span</span> {
 Â <span class="hljs-comment">/* å…³é”®å­—
  color: gray; */</span>
 Â <span class="hljs-attribute">color</span>: <span class="hljs-number">#b2b2b2</span>;
}
</code></pre>
<h4 data-id="heading-6">é€‰æ‹©å™¨</h4>
<p>è¿™é‡Œæˆ‘ä»¬çš„æ“ä½œæ˜¯å°†æ‰€æœ‰ç”¨spanåŒ…è£¹çš„æ–‡å­—éƒ½è®¾ç½®ä¸ºè¿™ä¸ªé¢œè‰²ã€‚é‚£ä¹ˆå¦‚æœå½“å‰é¡µé¢ä¸­æœ‰å¤šä¸ªspanæ ‡ç­¾ï¼Œåˆ™æ‰€æœ‰spanæ ‡ç­¾ä¸­çš„æ–‡å­—é¢œè‰²éƒ½å°†è¢«è®¾ç½®ä¸ºç°è‰²ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ã€‚å¦‚ä½•åªé’ˆå¯¹å‘å¸ƒæ—¶é—´è®¾ç½®CSSæ ·å¼ï¼Ÿå¯ä»¥é€šè¿‡CSSä¸­çš„é€‰æ‹©å™¨æ¥é€‰å–éœ€è¦è®¾ç½®æ ·å¼çš„å…ƒç´ ï¼ˆæ ‡ç­¾ï¼‰ã€‚</p>





















































<table><thead><tr><th>é€‰æ‹©å™¨</th><th>å†™æ³•</th><th>ç¤ºä¾‹</th><th>ç¤ºä¾‹è¯´æ˜</th></tr></thead><tbody><tr><td>å…ƒç´ é€‰æ‹©å™¨</td><td>å…ƒç´ åç§° {...}</td><td>h1 {...}</td><td>é€‰æ‹©é¡µé¢ä¸Šæ‰€æœ‰çš„<code>&lt;h1&gt;</code>æ ‡ç­¾</td></tr><tr><td>ç±»é€‰æ‹©å™¨</td><td>.classå±æ€§å€¼ {...}</td><td>.cls {...}</td><td>é€‰æ‹©é¡µé¢ä¸Šæ‰€æœ‰classå±æ€§ä¸ºclsçš„æ ‡ç­¾</td></tr><tr><td>idé€‰æ‹©å™¨</td><td>#idå±æ€§å€¼ {...}</td><td>#hid {...}</td><td>é€‰æ‹©é¡µé¢ä¸Šidå±æ€§ä¸ºhidçš„æ ‡ç­¾</td></tr><tr><td>åˆ†ç»„é€‰æ‹©å™¨</td><td>é€‰æ‹©å™¨1ï¼Œé€‰æ‹©å™¨2 {...}</td><td>h1,h2 {...}</td><td>é€‰æ‹©é¡µé¢ä¸Šæ‰€æœ‰çš„<code>&lt;h1&gt;</code>å’Œ<code>&lt;h2&gt;</code>æ ‡ç­¾</td></tr><tr><td>å±æ€§é€‰æ‹©å™¨</td><td>å…ƒç´ åç§°[å±æ€§] {...}</td><td>input[type] {...}</td><td>é€‰æ‹©é¡µé¢ä¸Šæœ‰typeå±æ€§çš„<code>&lt;input&gt;</code>æ ‡ç­¾</td></tr><tr><td>å±æ€§é€‰æ‹©å™¨</td><td>å…ƒç´ åç§°[å±æ€§å=â€å€¼â€œ] {...}</td><td>input[type="text"] {...}</td><td>é€‰æ‹©é¡µé¢ä¸Štypeå±æ€§ä¸ºtextçš„<code>&lt;input&gt;</code>æ ‡ç­¾</td></tr><tr><td>åä»£é€‰æ‹©å™¨</td><td>å…ƒç´ 1 å…ƒç´ 2 {...}</td><td>form input {...}</td><td>é€‰æ‹©<code>&lt;form&gt;</code>æ ‡ç­¾å†…çš„æ‰€æœ‰<code>&lt;input&gt;</code>æ ‡ç­¾</td></tr></tbody></table>
<p>å‰é¢æˆ‘ä»¬å†™çš„spanå°±æ˜¯å…ƒç´ é€‰æ‹©å™¨ã€‚</p>
<p>ç±»é€‰æ‹©å™¨ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.cls</span> {
 Â <span class="hljs-attribute">color</span>: <span class="hljs-number">#b2b2b2</span>;
}
</code></pre>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å£¹è§†ç•ŒÂ·å¾®è§†é¢‘ä¸¨å¦‚ä½•è´¯å½»è½å®å››ä¸­å…¨ä¼šç²¾ç¥ï¼Ÿæ€»ä¹¦è®°è¿™æ ·åˆ’é‡ç‚¹<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"css/news.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å£¹è§†ç•ŒÂ·å¾®è§†é¢‘ä¸¨å¦‚ä½•è´¯å½»è½å®å››ä¸­å…¨ä¼šç²¾ç¥ï¼Ÿæ€»ä¹¦è®°è¿™æ ·åˆ’é‡ç‚¹<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://www.cctv.com"</span>&gt;</span>å¤®è§†ç½‘<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
 Â 
 Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"cls"</span>&gt;</span>2026å¹´01æœˆ19æ—¥ 08:49<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>6666<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåªæœ‰å‘å¸ƒæ—¶é—´æ˜¯ç°è‰²ï¼Œ6666æ˜¯æ­£å¸¸çš„é»‘è‰²ã€‚</p>
<p>IDé€‰æ‹©å™¨ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-id">#time</span> {
 Â <span class="hljs-attribute">color</span>: <span class="hljs-number">#b2b2b2</span>;
}
</code></pre>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å£¹è§†ç•ŒÂ·å¾®è§†é¢‘ä¸¨å¦‚ä½•è´¯å½»è½å®å››ä¸­å…¨ä¼šç²¾ç¥ï¼Ÿæ€»ä¹¦è®°è¿™æ ·åˆ’é‡ç‚¹<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"css/news.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å£¹è§†ç•ŒÂ·å¾®è§†é¢‘ä¸¨å¦‚ä½•è´¯å½»è½å®å››ä¸­å…¨ä¼šç²¾ç¥ï¼Ÿæ€»ä¹¦è®°è¿™æ ·åˆ’é‡ç‚¹<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://www.cctv.com"</span>&gt;</span>å¤®è§†ç½‘<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
 Â 
 Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"time"</span>&gt;</span>2026å¹´01æœˆ19æ—¥ 08:49<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>6666<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒIDé€‰æ‹©å™¨å¯ä»¥å”¯ä¸€åœ°å®šä½åˆ°å‘å¸ƒæ—¶é—´è¿™ä¸ªæ ‡ç­¾ã€‚</p>
<p>å¦‚æœä¸‰ç±»é€‰æ‹©å™¨éƒ½åŒæ—¶åŒ¹é…åˆ°åŒä¸€ä¸ªå…ƒç´ ï¼Œåˆ™ä¼šæ ¹æ®ä¼˜å…ˆçº§æ˜¾ç¤ºå±æ€§ã€‚IDé€‰æ‹©å™¨ä¼˜å…ˆçº§æœ€é«˜ï¼Œç±»é€‰æ‹©å™¨æ¬¡ä¹‹ï¼Œæœ€åæ˜¯å…ƒç´ é€‰æ‹©å™¨ã€‚</p>
<h4 data-id="heading-7">ä¸‹åˆ’çº¿</h4>
<p>åŸæ–°é—»ä¸­çš„è¶…é“¾æ¥ä¸‹æ–¹æ˜¯æ²¡æœ‰ä¸‹åˆ’çº¿çš„ï¼Œç°åœ¨æˆ‘ä»¬è¦å»æ‰ä¸‹åˆ’çº¿ã€‚ç”±äºé¡µé¢åªæœ‰è¿™ä¸€ä¸ªè¶…é“¾æ¥ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨å…ƒç´ é€‰æ‹©å™¨ã€‚è®°ä¸ä½æ²¡å…³ç³»ï¼Œç›´æ¥å†™æ³¨é‡Šäº¤ç»™AIå³å¯ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-id">#time</span> {
 Â <span class="hljs-attribute">color</span>: <span class="hljs-number">#b2b2b2</span>;
}
â€‹
<span class="hljs-comment">/* å»é™¤è¶…é“¾æ¥çš„ä¸‹åˆ’çº¿ */</span>
<span class="hljs-selector-tag">a</span> {
 Â <span class="hljs-attribute">text-decoration</span>: none;
}
</code></pre>
<p>å¦‚æœæƒ³è¦è¿›ä¸€æ­¥äº†è§£text-decorationå±æ€§çš„ä½œç”¨ï¼Œå¯ä»¥å°†å…‰æ ‡æ”¾åœ¨å®ƒä¸Šé¢ï¼Œç‚¹å‡»MDN Referenceå°±èƒ½è¿›å…¥æˆ‘ä»¬å‰é¢ç»™å‡ºçš„å¸®åŠ©æ–‡æ¡£ä¸­ã€‚</p>
<h4 data-id="heading-8">å›¾ç‰‡ä¸è§†é¢‘</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å£¹è§†ç•ŒÂ·å¾®è§†é¢‘ä¸¨å¦‚ä½•è´¯å½»è½å®å››ä¸­å…¨ä¼šç²¾ç¥ï¼Ÿæ€»ä¹¦è®°è¿™æ ·åˆ’é‡ç‚¹<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"css/news.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
â€‹
 Â <span class="hljs-comment">&lt;!---------------------- æ–°é—»æ ‡é¢˜ --------------------------&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å£¹è§†ç•ŒÂ·å¾®è§†é¢‘ä¸¨å¦‚ä½•è´¯å½»è½å®å››ä¸­å…¨ä¼šç²¾ç¥ï¼Ÿæ€»ä¹¦è®°è¿™æ ·åˆ’é‡ç‚¹<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://www.cctv.com"</span>&gt;</span>å¤®è§†ç½‘<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
 Â 
 Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"time"</span>&gt;</span>2026å¹´01æœˆ19æ—¥ 08:49<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
 Â <span class="hljs-comment">&lt;!-- æ¢ä¸¤è¡Œ --&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
â€‹
 Â <span class="hljs-comment">&lt;!---------------------- æ–°é—»æ­£æ–‡ --------------------------&gt;</span>
 Â <span class="hljs-comment">&lt;!-- å®šä¹‰ä¸€ä¸ªè§†é¢‘ï¼Œå¼•å…¥video/news.mp4 --&gt;</span>
 Â  <span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"video/news.mp4"</span> <span class="hljs-attr">controls</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"800px"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>
 Â  <span class="hljs-comment">&lt;!-- videoæ ‡ç­¾å±æ€§
 Â  Â src: è§†é¢‘æ–‡ä»¶è·¯å¾„
 Â  Â width: è§†é¢‘å®½åº¦
 Â  Â height: è§†é¢‘é«˜åº¦
 Â  Â é«˜åº¦ä¸å®½åº¦çš„å•ä½ï¼špxï¼ˆåƒç´ ï¼‰ã€%
 Â  Â ç™¾åˆ†æ¯”ï¼šç›¸å¯¹äºçˆ¶å…ƒç´ çš„å®½åº¦æˆ–é«˜åº¦ã€‚è¿™é‡Œçš„çˆ¶å…ƒç´ æ˜¯body
 Â  Â é«˜åº¦ä¸å®½åº¦è®¾ç½®ä¸€ä¸ªå³å¯ï¼Œå¦ä¸€ä¸ªä¼šè‡ªåŠ¨æŒ‰æ¯”ä¾‹è°ƒæ•´
 Â  Â controls: æ˜¾ç¤ºæ’­æ”¾æ§ä»¶ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ªå±æ€§ï¼Œè§†é¢‘ä¸ä¼šæ˜¾ç¤ºæ’­æ”¾æ§ä»¶ï¼Œç”¨æˆ·æ— æ³•æ§åˆ¶è§†é¢‘æ’­æ”¾
 Â  Â loop: å¾ªç¯æ’­æ”¾
 Â  Â autoplay: è‡ªåŠ¨æ’­æ”¾ 
 Â  --&gt;</span>
 Â 
 Â  <span class="hljs-comment">&lt;!-- å¦‚æœæ˜¯éŸ³é¢‘ï¼Œä½¿ç”¨&lt;audio&gt;æ ‡ç­¾ï¼Œå±æ€§ä¸videoæ ‡ç­¾ç±»ä¼¼ --&gt;</span>
â€‹
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
â€‹
 Â  Â <span class="hljs-comment">&lt;!-- ä½¿ç”¨æ®µè½æ ‡ç­¾&lt;p&gt;ï¼Œä¸¤æ®µä¹‹é—´ä¼šè‡ªåŠ¨æ¢è¡Œ --&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
 Â  Â   2026å¹´ç¬¬1æœŸã€Šæ±‚æ˜¯ã€‹æ‚å¿—å‘è¡¨ä¸­å…±ä¸­å¤®æ€»ä¹¦è®°ã€å›½å®¶ä¸»å¸­ã€ä¸­å¤®å†›å§”ä¸»å¸­ä¹ è¿‘å¹³çš„é‡è¦æ–‡ç« ã€Šå­¦ä¹ å¥½è´¯å½»å¥½å…šçš„äºŒåå±Šå››ä¸­å…¨ä¼šç²¾ç¥ã€‹ã€‚
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
â€‹
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
 Â  Â   å…šçš„äºŒåå±Šå››ä¸­å…¨ä¼šå®¡è®®é€šè¿‡â€œåäº”äº”â€è§„åˆ’å»ºè®®ï¼Œæ“˜ç”»äº†æœªæ¥äº”å¹´çš„å®ä¼Ÿè“å›¾ã€‚
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
â€‹
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
 Â  Â   åœ¨è´¯å½»è½å®å…¨ä¼šç²¾ç¥è¿‡ç¨‹ä¸­ï¼Œä¹ è¿‘å¹³æ€»ä¹¦è®°æŒ‡å‡ºè¦ç€é‡æŠŠæ¡ä»¥ä¸‹å‡ ç‚¹ï¼šç¬¬ä¸€ï¼Œåšå®šä¸ç§»æ¨åŠ¨é«˜è´¨é‡å‘å±•ï¼›ç¬¬äºŒï¼ŒåŠ å¿«æ„å»ºæ–°å‘å±•æ ¼å±€ï¼›ç¬¬ä¸‰ï¼Œæ¨åŠ¨å…¨ä½“äººæ°‘å…±åŒå¯Œè£•è¿ˆå‡ºåšå®æ­¥ä¼ï¼›ç¬¬å››ï¼Œæ›´å¥½ç»Ÿç­¹å‘å±•å’Œå®‰å…¨ï¼›ç¬¬äº”ï¼Œç»Ÿç­¹æ¨è¿›å„é¢†åŸŸå·¥ä½œã€‚
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
â€‹
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
 Â  Â   2026å¹´æ˜¯â€œåäº”äº”â€å¼€å±€ä¹‹å¹´ã€‚ä¹ è¿‘å¹³ä¸»å¸­åœ¨äºŒã€‡äºŒå…­å¹´æ–°å¹´è´ºè¯ä¸­æŒ‡å‡ºï¼šâ€œæˆ‘ä»¬è¦é”šå®šç›®æ ‡ä»»åŠ¡ï¼Œåšå®šä¿¡å¿ƒã€ä¹˜åŠ¿è€Œä¸Šï¼Œæ‰å®æ¨åŠ¨é«˜è´¨é‡å‘å±•ï¼Œè¿›ä¸€æ­¥å…¨é¢æ·±åŒ–æ”¹é©å¼€æ”¾ï¼Œæ¨è¿›å…¨ä½“äººæ°‘å…±åŒå¯Œè£•ï¼Œç»­å†™ä¸­å›½å¥‡è¿¹æ–°ç¯‡ç« ã€‚â€
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
â€‹
 Â  Â <span class="hljs-comment">&lt;!-- å®šä¹‰ä¸€å¼ å›¾ç‰‡ï¼Œå¼•å…¥img/1.png --&gt;</span>
 Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"img/1.png"</span>&gt;</span>
 Â  Â <span class="hljs-comment">&lt;!-- imgæ ‡ç­¾å±æ€§
 Â  Â  Â src: å›¾ç‰‡æ–‡ä»¶è·¯å¾„
 Â  Â  Â  Â 1. ç›¸å¯¹è·¯å¾„ï¼šç›¸å¯¹äºå½“å‰HTMLæ–‡ä»¶çš„ä½ç½®
 Â  Â  Â  Â  Â 1.1 åŒä¸€æ–‡ä»¶å¤¹ä¸‹ï¼šimg/1.pngï¼ˆæˆ–./img/1.pngï¼‰
 Â  Â  Â  Â  Â 1.2 ä¸Šä¸€çº§æ–‡ä»¶å¤¹ï¼š../img/1.png
 Â  Â  Â  Â  Â 1.3 ä¸‹ä¸€çº§æ–‡ä»¶å¤¹ï¼šfolder/img/1.png
 Â  Â  Â  Â 2. ç»å¯¹è·¯å¾„ï¼šä»æ ¹ç›®å½•å¼€å§‹å†™èµ·ï¼Œå®Œæ•´çš„æ–‡ä»¶
 Â  Â  Â  Â  Â 2.1 ç»å¯¹ç£ç›˜è·¯å¾„ï¼šC:/Users/31604/Desktop/Personal/JavaWeb/code/HTML-CSS/img/1.png
 Â  Â  Â  Â  Â 2.2 ç»å¯¹ç½‘ç»œè·¯å¾„ï¼šhttps://www.example.com/img/1.png
 Â  Â  Â  Â  Â åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€å›¾ç‰‡å³å¯çœ‹åˆ°å›¾ç‰‡çš„ç»å¯¹ç½‘ç»œè·¯å¾„
 Â  Â  Â  Â  Â éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæµè§ˆå™¨å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œé€šå¸¸ä¸å…è®¸ç½‘é¡µç›´æ¥è®¿é—®æœ¬åœ°æ–‡ä»¶ï¼Œå»ºè®®ä½¿ç”¨ç›¸å¯¹è·¯å¾„æˆ–å°†å›¾ç‰‡ä¸Šä¼ åˆ°æœåŠ¡å™¨åä½¿ç”¨ç½‘ç»œè·¯å¾„ã€‚
 Â  Â  Â alt: å›¾ç‰‡æ— æ³•æ˜¾ç¤ºæ—¶ï¼Œæ˜¾ç¤ºçš„æ›¿ä»£æ–‡æœ¬
 Â  Â  Â width: å›¾ç‰‡å®½åº¦
 Â  Â  Â height: å›¾ç‰‡é«˜åº¦
 Â  Â  Â é«˜åº¦ä¸å®½åº¦çš„å•ä½ï¼špxï¼ˆåƒç´ ï¼‰ã€%
 Â  Â  Â ç™¾åˆ†æ¯”ï¼šç›¸å¯¹äºçˆ¶å…ƒç´ çš„å®½åº¦æˆ–é«˜åº¦ã€‚è¿™é‡Œçš„çˆ¶å…ƒç´ æ˜¯body
 Â  Â  Â é«˜åº¦ä¸å®½åº¦è®¾ç½®ä¸€ä¸ªå³å¯ï¼Œå¦ä¸€ä¸ªä¼šè‡ªåŠ¨æŒ‰æ¯”ä¾‹è°ƒæ•´
 Â  Â --&gt;</span>
â€‹
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h4 data-id="heading-9">é¦–è¡Œç¼©è¿›ã€åŠ ç²—ã€è¡Œé«˜</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-id">#time</span> {
 Â <span class="hljs-attribute">color</span>: <span class="hljs-number">#b2b2b2</span>;
}
â€‹
<span class="hljs-comment">/* å»é™¤è¶…é“¾æ¥çš„ä¸‹åˆ’çº¿ */</span>
<span class="hljs-selector-tag">a</span> {
 Â <span class="hljs-attribute">text-decoration</span>: none;
}
â€‹
â€‹
<span class="hljs-selector-tag">p</span> {
 Â <span class="hljs-comment">/* ä¸ºæ‰€æœ‰æ®µè½æ ‡ç­¾è®¾ç½®è¡Œé«˜ */</span>
 Â <span class="hljs-attribute">line-height</span>: <span class="hljs-number">2</span>;
â€‹
 Â <span class="hljs-comment">/* è®¾ç½®é¦–è¡Œç¼©è¿›2ä¸ªå­—ç¬¦ */</span>
 Â <span class="hljs-attribute">text-indent</span>: <span class="hljs-number">2em</span>;
}
</code></pre>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å£¹è§†ç•ŒÂ·å¾®è§†é¢‘ä¸¨å¦‚ä½•è´¯å½»è½å®å››ä¸­å…¨ä¼šç²¾ç¥ï¼Ÿæ€»ä¹¦è®°è¿™æ ·åˆ’é‡ç‚¹<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"css/news.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
â€‹
 Â <span class="hljs-comment">&lt;!---------------------- æ–°é—»æ ‡é¢˜ --------------------------&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å£¹è§†ç•ŒÂ·å¾®è§†é¢‘ä¸¨å¦‚ä½•è´¯å½»è½å®å››ä¸­å…¨ä¼šç²¾ç¥ï¼Ÿæ€»ä¹¦è®°è¿™æ ·åˆ’é‡ç‚¹<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://www.cctv.com"</span>&gt;</span>å¤®è§†ç½‘<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
 Â 
 Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"time"</span>&gt;</span>2026å¹´01æœˆ19æ—¥ 08:49<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
 Â <span class="hljs-comment">&lt;!-- æ¢ä¸¤è¡Œ --&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
â€‹
 Â <span class="hljs-comment">&lt;!---------------------- æ–°é—»æ­£æ–‡ --------------------------&gt;</span>
 Â  <span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"video/news.mp4"</span> <span class="hljs-attr">controls</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"800px"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>
â€‹
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
â€‹
 Â  Â <span class="hljs-comment">&lt;!-- ä½¿ç”¨&lt;b&gt;æ ‡ç­¾åŠ ç²—&lt;/b&gt; --&gt;</span>
 Â  Â <span class="hljs-comment">&lt;!-- ä½¿ç”¨&lt;;strong&gt;æ ‡ç­¾åŠ ç²—&lt;/strong&gt;æœ‰åŒæ ·æ•ˆæœ --&gt;</span>
 Â  Â <span class="hljs-comment">&lt;!-- &amp;nbsp;æ˜¯ç©ºæ ¼ç¬¦ï¼Œä½†æ˜¯è¿™ä¹ˆåšå¤ªéº»çƒ¦ä¸”ä¸ç¾è§‚ï¼Œä½¿ç”¨CSSè®¾ç½®æ®µè½ç¼©è¿› --&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
 Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>
 Â  Â  Â   2026å¹´ç¬¬1æœŸã€Šæ±‚æ˜¯ã€‹æ‚å¿—å‘è¡¨ä¸­å…±ä¸­å¤®æ€»ä¹¦è®°ã€å›½å®¶ä¸»å¸­ã€ä¸­å¤®å†›å§”ä¸»å¸­ä¹ è¿‘å¹³çš„é‡è¦æ–‡ç« ã€Šå­¦ä¹ å¥½è´¯å½»å¥½å…šçš„äºŒåå±Šå››ä¸­å…¨ä¼šç²¾ç¥ã€‹ã€‚
 Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
â€‹
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
 Â  Â   å…šçš„äºŒåå±Šå››ä¸­å…¨ä¼šå®¡è®®é€šè¿‡â€œåäº”äº”â€è§„åˆ’å»ºè®®ï¼Œæ“˜ç”»äº†æœªæ¥äº”å¹´çš„å®ä¼Ÿè“å›¾ã€‚
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
â€‹
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
 Â  Â   åœ¨è´¯å½»è½å®å…¨ä¼šç²¾ç¥è¿‡ç¨‹ä¸­ï¼Œä¹ è¿‘å¹³æ€»ä¹¦è®°æŒ‡å‡ºè¦ç€é‡æŠŠæ¡ä»¥ä¸‹å‡ ç‚¹ï¼šç¬¬ä¸€ï¼Œåšå®šä¸ç§»æ¨åŠ¨é«˜è´¨é‡å‘å±•ï¼›ç¬¬äºŒï¼ŒåŠ å¿«æ„å»ºæ–°å‘å±•æ ¼å±€ï¼›ç¬¬ä¸‰ï¼Œæ¨åŠ¨å…¨ä½“äººæ°‘å…±åŒå¯Œè£•è¿ˆå‡ºåšå®æ­¥ä¼ï¼›ç¬¬å››ï¼Œæ›´å¥½ç»Ÿç­¹å‘å±•å’Œå®‰å…¨ï¼›ç¬¬äº”ï¼Œç»Ÿç­¹æ¨è¿›å„é¢†åŸŸå·¥ä½œã€‚
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
â€‹
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
 Â  Â   2026å¹´æ˜¯â€œåäº”äº”â€å¼€å±€ä¹‹å¹´ã€‚ä¹ è¿‘å¹³ä¸»å¸­åœ¨äºŒã€‡äºŒå…­å¹´æ–°å¹´è´ºè¯ä¸­æŒ‡å‡ºï¼šâ€œæˆ‘ä»¬è¦é”šå®šç›®æ ‡ä»»åŠ¡ï¼Œåšå®šä¿¡å¿ƒã€ä¹˜åŠ¿è€Œä¸Šï¼Œæ‰å®æ¨åŠ¨é«˜è´¨é‡å‘å±•ï¼Œè¿›ä¸€æ­¥å…¨é¢æ·±åŒ–æ”¹é©å¼€æ”¾ï¼Œæ¨è¿›å…¨ä½“äººæ°‘å…±åŒå¯Œè£•ï¼Œç»­å†™ä¸­å›½å¥‡è¿¹æ–°ç¯‡ç« ã€‚â€
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
â€‹
 Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"img/1.png"</span>&gt;</span>
â€‹
â€‹
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h4 data-id="heading-10">æ•´ä½“å¸ƒå±€å¤„ç†</h4>
<p>æˆ‘ä»¬è¦è®©æ•´ä¸ªç½‘é¡µå±…ä¸­æ˜¾ç¤ºã€å·¦å³ç­‰è·ã€‚è®©AIå¸®æˆ‘ä»¬ç”Ÿæˆå³å¯ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-id">#time</span> {
 Â <span class="hljs-attribute">color</span>: <span class="hljs-number">#b2b2b2</span>;
}
â€‹
<span class="hljs-comment">/* å»é™¤è¶…é“¾æ¥çš„ä¸‹åˆ’çº¿ */</span>
<span class="hljs-selector-tag">a</span> {
 Â <span class="hljs-attribute">text-decoration</span>: none;
}
â€‹
â€‹
<span class="hljs-selector-tag">p</span> {
 Â <span class="hljs-comment">/* ä¸ºæ‰€æœ‰æ®µè½æ ‡ç­¾è®¾ç½®è¡Œé«˜ */</span>
 Â <span class="hljs-attribute">line-height</span>: <span class="hljs-number">2</span>;
â€‹
 Â <span class="hljs-comment">/* è®¾ç½®é¦–è¡Œç¼©è¿›2ä¸ªå­—ç¬¦ */</span>
 Â <span class="hljs-attribute">text-indent</span>: <span class="hljs-number">2em</span>;
}
â€‹
<span class="hljs-selector-class">.container</span> {
 Â <span class="hljs-attribute">width</span>: <span class="hljs-number">70%</span>;
 Â <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
 Â <span class="hljs-attribute">box-sizing</span>: border-box;
}
</code></pre>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å£¹è§†ç•ŒÂ·å¾®è§†é¢‘ä¸¨å¦‚ä½•è´¯å½»è½å®å››ä¸­å…¨ä¼šç²¾ç¥ï¼Ÿæ€»ä¹¦è®°è¿™æ ·åˆ’é‡ç‚¹<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"css/news.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
â€‹
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å£¹è§†ç•ŒÂ·å¾®è§†é¢‘ä¸¨å¦‚ä½•è´¯å½»è½å®å››ä¸­å…¨ä¼šç²¾ç¥ï¼Ÿæ€»ä¹¦è®°è¿™æ ·åˆ’é‡ç‚¹<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://www.cctv.com"</span>&gt;</span>å¤®è§†ç½‘<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
 Â  Â 
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"time"</span>&gt;</span>2026å¹´01æœˆ19æ—¥ 08:49<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
â€‹
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"video/news.mp4"</span> <span class="hljs-attr">controls</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"100%"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
â€‹
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
 Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>
 Â  Â  Â   2026å¹´ç¬¬1æœŸã€Šæ±‚æ˜¯ã€‹æ‚å¿—å‘è¡¨ä¸­å…±ä¸­å¤®æ€»ä¹¦è®°ã€å›½å®¶ä¸»å¸­ã€ä¸­å¤®å†›å§”ä¸»å¸­ä¹ è¿‘å¹³çš„é‡è¦æ–‡ç« ã€Šå­¦ä¹ å¥½è´¯å½»å¥½å…šçš„äºŒåå±Šå››ä¸­å…¨ä¼šç²¾ç¥ã€‹ã€‚
 Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
â€‹
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
 Â  Â   å…šçš„äºŒåå±Šå››ä¸­å…¨ä¼šå®¡è®®é€šè¿‡"åäº”äº”"è§„åˆ’å»ºè®®ï¼Œæ“˜ç”»äº†æœªæ¥äº”å¹´çš„å®ä¼Ÿè“å›¾ã€‚
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
â€‹
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
 Â  Â   åœ¨è´¯å½»è½å®å…¨ä¼šç²¾ç¥è¿‡ç¨‹ä¸­ï¼Œä¹ è¿‘å¹³æ€»ä¹¦è®°æŒ‡å‡ºè¦ç€é‡æŠŠæ¡ä»¥ä¸‹å‡ ç‚¹ï¼šç¬¬ä¸€ï¼Œåšå®šä¸ç§»æ¨åŠ¨é«˜è´¨é‡å‘å±•ï¼›ç¬¬äºŒï¼ŒåŠ å¿«æ„å»ºæ–°å‘å±•æ ¼å±€ï¼›ç¬¬ä¸‰ï¼Œæ¨åŠ¨å…¨ä½“äººæ°‘å…±åŒå¯Œè£•è¿ˆå‡ºåšå®æ­¥ä¼ï¼›ç¬¬å››ï¼Œæ›´å¥½ç»Ÿç­¹å‘å±•å’Œå®‰å…¨ï¼›ç¬¬äº”ï¼Œç»Ÿç­¹æ¨è¿›å„é¢†åŸŸå·¥ä½œã€‚
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
â€‹
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
 Â  Â   2026å¹´æ˜¯"åäº”äº”"å¼€å±€ä¹‹å¹´ã€‚ä¹ è¿‘å¹³ä¸»å¸­åœ¨äºŒã€‡äºŒå…­å¹´æ–°å¹´è´ºè¯ä¸­æŒ‡å‡ºï¼š"æˆ‘ä»¬è¦é”šå®šç›®æ ‡ä»»åŠ¡ï¼Œåšå®šä¿¡å¿ƒã€ä¹˜åŠ¿è€Œä¸Šï¼Œæ‰å®æ¨åŠ¨é«˜è´¨é‡å‘å±•ï¼Œè¿›ä¸€æ­¥å…¨é¢æ·±åŒ–æ”¹é©å¼€æ”¾ï¼Œæ¨è¿›å…¨ä½“äººæ°‘å…±åŒå¯Œè£•ï¼Œç»­å†™ä¸­å›½å¥‡è¿¹æ–°ç¯‡ç« ã€‚"
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
â€‹
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"img/1.png"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"100%"</span>&gt;</span>
 Â  Â <span class="hljs-comment">&lt;!-- å› ä¸ºbodyå˜æˆäº†divï¼Œè€Œæˆ‘ä»¬å¸Œæœ›divå 70%è€Œå›¾ç‰‡ä¸è§†é¢‘ä¸divåŒå®½ï¼Œæ‰€ä»¥è¿™é‡Œå›¾ç‰‡å’Œè§†é¢‘ä¹Ÿè®¾ç½®äº†width:100% --&gt;</span>
 Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h5 data-id="heading-11">ç›’å­æ¨¡å‹</h5>
<p>ç›’å­ï¼šé¡µé¢ä¸­æ‰€æœ‰çš„å…ƒç´ ï¼ˆæ ‡ç­¾ï¼‰ï¼Œéƒ½å¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªç›’å­ï¼Œç”±ç›’å­å°†é¡µé¢ä¸­çš„å…ƒç´ åŒ…å«åœ¨ä¸€ä¸ªçŸ©å½¢åŒºåŸŸå†…ï¼Œé€šè¿‡ç›’å­çš„è§†è§’æ›´æ–¹ä¾¿åœ°è¿›è¡Œé¡µé¢å¸ƒå±€ã€‚</p>
<p>ç›’å­æ¨¡å‹ç»„æˆï¼šå†…å®¹åŒºåŸŸï¼ˆcontentï¼‰ã€å†…è¾¹è·åŒºåŸŸï¼ˆpaddingï¼‰ã€è¾¹æ¡†åŒºåŸŸï¼ˆborderï¼‰ã€å¤–è¾¹è·åŒºåŸŸï¼ˆmarginï¼‰</p>
<p>å¸ƒå±€æ ‡ç­¾ï¼šä½¿ç”¨divå’Œspanè¿™ä¸¤ä¸ªæ²¡æœ‰è¯­ä¹‰çš„å¸ƒå±€æ ‡ç­¾ã€‚</p>
<p>divæ ‡ç­¾ç‰¹ç‚¹ï¼šä¸€è¡Œåªæ˜¾ç¤ºä¸€ä¸ªï¼ˆç‹¬å ä¸€è¡Œï¼‰ã€å®½åº¦é»˜è®¤æ˜¯çˆ¶å…ƒç´ çš„å®½åº¦ï¼Œé«˜åº¦é»˜è®¤ç”±å†…å®¹æ’‘å¼€ã€å¯ä»¥è®¾ç½®å®½é«˜ã€‚</p>
<p>spanæ ‡ç­¾ç‰¹ç‚¹ï¼šä¸€è¡Œå¯ä»¥æ˜¾ç¤ºå¤šä¸ªã€å®½åº¦å’Œé«˜åº¦é»˜è®¤ç”±å†…å®¹æ’‘å¼€ã€ä¸å¯ä»¥è®¾ç½®å®½é«˜ã€‚</p>
<p>å¸¸è§çš„CSSæ ·å¼ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">div</span> {
 Â  Â <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;
 Â  Â <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
 Â  Â <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#05a5d2</span>;
 Â  Â <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span> <span class="hljs-number">20px</span> <span class="hljs-number">20px</span> <span class="hljs-number">20px</span>;
 Â  Â <span class="hljs-attribute">border</span>: <span class="hljs-number">20px</span> solid <span class="hljs-number">#6bd5d7</span>;
 Â  Â <span class="hljs-attribute">margin</span>: <span class="hljs-number">30px</span> <span class="hljs-number">30px</span> <span class="hljs-number">30px</span> <span class="hljs-number">30px</span>;
}
</code></pre>
<p>widthå’Œheighté»˜è®¤æƒ…å†µä¸‹è®¾ç½®çš„æ˜¯contentåŒºåŸŸçš„å®½åº¦å’Œé«˜åº¦ã€‚paddingå’Œmarginçš„å››ä¸ªæ•°å€¼åˆ†åˆ«ä»£è¡¨ä¸Šã€å³ã€ä¸‹ã€å·¦ï¼Œå³é¡ºæ—¶é’ˆã€‚ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºä¸¤ä¸ªå€¼ï¼Œä¸Šä¸‹æ˜¯ç¬¬ä¸€ä¸ªå€¼ï¼Œå·¦å³æ˜¯ç¬¬äºŒä¸ªå€¼ã€‚ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºä¸€ä¸ªå€¼ï¼Œè¡¨ç¤ºä¸Šä¸‹å·¦å³çš„å†…è¾¹è·/å¤–è¾¹è·ç›¸åŒã€‚borderçš„ä¸‰ä¸ªå€¼åˆ†åˆ«è¡¨ç¤ºè·ç¦»ã€å®çº¿è¿˜æ˜¯è™šçº¿ã€è¾¹æ¡†é¢œè‰²ã€‚autoè¡¨ç¤ºå±…ä¸­ã€‚å…·ä½“å¯ä»¥å»MDN ReferenceæŸ¥çœ‹ã€‚</p>
<p>å¯ä»¥é€šè¿‡inspectï¼ˆæ£€æŸ¥ï¼‰æ¥æŸ¥çœ‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7446da52dab74c788257f463accc76b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWFraW5vaGFyYQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769526202&amp;x-signature=Iuck%2FZuCUkvVfyUVCA3Cc4qC%2BQo%3D" alt="b43011426a0d5751263d856ca9e21c88.png" loading="lazy"/></p>
<h4 data-id="heading-12">è¡¨å•</h4>
<p><strong>è¡¨å•</strong>ï¼šåœ¨ç½‘é¡µä¸­ä¸»è¦è´Ÿè´£æ•°æ®é‡‡é›†åŠŸèƒ½ï¼Œå¦‚æ³¨å†Œã€ç™»å½•ç­‰æ•°æ®é‡‡é›†ã€‚æ ‡ç­¾ä¸º<code>&lt;form&gt;</code></p>
<p><strong>è¡¨å•é¡¹</strong>ï¼šä¸åŒç±»å‹çš„inputå…ƒç´ ã€ä¸‹æ‹‰åˆ—è¡¨ã€æ–‡æœ¬åŸŸç­‰ã€‚</p>
<p><code>&lt;input&gt;</code>ï¼šå®šä¹‰è¡¨å•é¡¹ï¼Œé€šè¿‡typeå±æ€§æ§åˆ¶è¾“å…¥å½¢å¼ï¼ˆtext/password/...ï¼‰</p>
<p><code>&lt;select&gt;</code>ï¼šå®šä¹‰ä¸‹æ‹‰åˆ—è¡¨ï¼Œ<code>&lt;option&gt;</code>å®šä¹‰åˆ—è¡¨é¡¹</p>
<p><code>&lt;textarea&gt;</code>ï¼šå®šä¹‰æ–‡æœ¬åŸŸ</p>









































<table><thead><tr><th>typeå–å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>text</td><td>é»˜è®¤å€¼ï¼Œå®šä¹‰å•è¡Œçš„è¾“å…¥å­—æ®µ</td></tr><tr><td>password</td><td>å®šä¹‰å¯†ç å­—æ®µ</td></tr><tr><td>radio</td><td>å®šä¹‰å•é€‰æŒ‰é’®ï¼ˆnameå±æ€§è¦ä¸€è‡´æ‰èƒ½äº’æ–¥ï¼‰</td></tr><tr><td>checkbox</td><td>å®šä¹‰å¤é€‰æ¡†</td></tr><tr><td>file</td><td>å®šä¹‰æ–‡ä»¶ä¸Šä¼ æŒ‰é’®</td></tr><tr><td>date/time/datetime-local</td><td>å®šä¹‰æ—¥æœŸ/æ—¶é—´/æ—¥æœŸæ—¶é—´</td></tr><tr><td>hidden</td><td>å®šä¹‰éšè—åŸŸï¼ˆè¯¥è¡¨å•é¡¹çœ‹ä¸åˆ°ï¼Œä½†ä¼šæäº¤åˆ°æœåŠ¡å™¨ç«¯ï¼‰</td></tr><tr><td>submit/reset/button</td><td>å®šä¹‰æäº¤/é‡ç½®/å¯ç‚¹å‡»æŒ‰é’®</td></tr></tbody></table>
<p><strong>å±æ€§</strong>ï¼š</p>
<p>actionï¼šè§„å®šå½“æäº¤è¡¨å•æ—¶å‘ä½•å¤„å‘é€è¡¨å•æ•°æ®ï¼ŒURL</p>
<p>methodï¼šè§„å®šç”¨äºå‘é€è¡¨å•æ•°æ®çš„æ–¹å¼ï¼Œget\postï¼ˆgetä¸ºé»˜è®¤ï¼‰</p>
<p><strong>æ³¨æ„</strong>ï¼š</p>
<p>1.è¡¨å•é¡¹è¦æƒ³é‡‡é›†æ•°æ®ï¼Œå¿…é¡»è®¾ç½®nameå±æ€§</p>
<p>2.å¯¹äºgetï¼Œè¡¨å•æ•°æ®ä¼šå‡ºç°åœ¨URLåé¢ï¼Œå½¢å¼ä¸ºï¼š/URL?è¡¨å•æ•°æ®1&amp;è¡¨å•æ•°æ®2&amp;...</p>
<p>ç‰¹ç‚¹ï¼š</p>
<p>(i).å¦‚æœè¡¨å•ä¸­åŒ…å«äº†éšç§æ•°æ®ï¼Œgetæ–¹å¼å¹¶ä¸å®‰å…¨</p>
<p>(ii).åœ¨æµè§ˆå™¨ä¸­getè¯·æ±‚çš„å¤§å°æ˜¯æœ‰é™åˆ¶çš„ï¼Œä¸é€‚åˆæäº¤å¤§æ•°æ®é‡çš„è¡¨å•</p>
<p>3.å¯¹äºpostï¼Œè¡¨å•æ•°æ®ä¼šåœ¨æ¶ˆæ¯ä½“/è¯·æ±‚ä½“ä¸­æäº¤åˆ°æœåŠ¡å™¨ã€‚åœ¨ç½‘é¡µçš„å¼€å‘è€…å·¥å…·çš„â€œè½½è·â€å¤„å¯ä»¥çœ‹åˆ°</p>
<p>ç‰¹ç‚¹ï¼š</p>
<p>(i).å®‰å…¨</p>
<p>(ii).è¯·æ±‚å¤§å°æ²¡æœ‰é™åˆ¶</p>
<p>4.labelæ ‡ç­¾ï¼šå°†é€‰é¡¹è¿›è¡Œæ•´ä½“åŒ…è£¹ï¼Œç‚¹å‡»é€‰é¡¹çš„æ–‡å­—ä¹Ÿèƒ½é€‰ä¸­ã€‚</p>
<h4 data-id="heading-13">ç»ƒä¹ ï¼šæ™ºèƒ½å­¦ä¹ è¾…åŠ©ç³»ç»Ÿ</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ™ºèƒ½å­¦ä¹ è¾…åŠ©ç³»ç»Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
 Â  Â  Â  Â <span class="hljs-comment">/* é¡¶éƒ¨å¯¼èˆªæ æ ·å¼ */</span>
 Â  Â  Â  Â <span class="hljs-selector-class">.top-nav</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#333</span>; <span class="hljs-comment">/* æ·±ç°è‰²èƒŒæ™¯ */</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">overflow</span>: hidden;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.nav-title</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">float</span>: left; <span class="hljs-comment">/* æ ‡é¢˜å±…å·¦ */</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">font-size</span>: <span class="hljs-number">24px</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">font-weight</span>: bold; <span class="hljs-comment">/* åŠ ç²—å±•ç¤º */</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">color</span>:<span class="hljs-number">#f0f0f0</span>;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.nav-logout</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">float</span>: right; <span class="hljs-comment">/* é€€å‡ºç™»å½•å±…å³ */</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">8px</span>;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.nav-logout</span> <span class="hljs-selector-tag">a</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">color</span>: white;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">text-decoration</span>: none;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.nav-logout</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">text-decoration</span>: underline;
 Â  Â  Â   }
â€‹
 Â  Â  Â  Â <span class="hljs-comment">/* æœç´¢è¡¨å•åŒºåŸŸæ ·å¼ */</span>
 Â  Â  Â  Â <span class="hljs-selector-class">.search-form</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f8f9fa</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e9ecef</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.search-form</span> <span class="hljs-selector-tag">form</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">display</span>: flex;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">align-items</span>: center;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">gap</span>: <span class="hljs-number">15px</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">flex-wrap</span>: wrap;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.form-group</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">display</span>: flex;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">align-items</span>: center;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">gap</span>: <span class="hljs-number">5px</span>;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.form-group</span> <span class="hljs-selector-tag">label</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">min-width</span>: <span class="hljs-number">60px</span>;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.form-group</span> <span class="hljs-selector-tag">input</span>,
 Â  Â  Â  Â <span class="hljs-selector-class">.form-group</span> select {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">12px</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ced4da</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.form-group</span> <span class="hljs-selector-tag">input</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">width</span>: <span class="hljs-number">150px</span>;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.form-group</span> select {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">width</span>: <span class="hljs-number">120px</span>;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.form-buttons</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">margin-left</span>: auto;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">display</span>: flex;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.btn</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">20px</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">border</span>: none;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">cursor</span>: pointer;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.btn-primary</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#007bff</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">color</span>: white;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.btn-primary</span><span class="hljs-selector-pseudo">:hover</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#0056b3</span>;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.btn-secondary</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#6c757d</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">color</span>: white;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.btn-secondary</span><span class="hljs-selector-pseudo">:hover</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#545b62</span>;
 Â  Â  Â   }
â€‹
 Â  Â  Â  Â <span class="hljs-comment">/* è¡¨æ ¼å±•ç¤ºåŒºæ ·å¼ */</span>
 Â  Â  Â  Â <span class="hljs-selector-class">.table-container</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">overflow</span>: hidden;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.data-table</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">border-collapse</span>: collapse;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">background-color</span>: white;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.data-table</span> <span class="hljs-selector-tag">th</span>,
 Â  Â  Â  Â <span class="hljs-selector-class">.data-table</span> <span class="hljs-selector-tag">td</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span> <span class="hljs-number">15px</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">text-align</span>: center;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e9ecef</span>;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.data-table</span> <span class="hljs-selector-tag">th</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f8f9fa</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">color</span>: <span class="hljs-number">#495057</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.data-table</span> <span class="hljs-selector-tag">tbody</span> <span class="hljs-selector-tag">tr</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">transition</span>: background-color <span class="hljs-number">0.2s</span>;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.data-table</span> <span class="hljs-selector-tag">tbody</span> <span class="hljs-selector-tag">tr</span><span class="hljs-selector-pseudo">:hover</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f8f9fa</span>;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.btn-edit</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#28a745</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">color</span>: white;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span> <span class="hljs-number">12px</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">5px</span>;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.btn-edit</span><span class="hljs-selector-pseudo">:hover</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#218838</span>;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.btn-delete</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#dc3545</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">color</span>: white;
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span> <span class="hljs-number">12px</span>;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-selector-class">.btn-delete</span><span class="hljs-selector-pseudo">:hover</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#c82333</span>;
 Â  Â  Â   }
 Â  Â </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
 Â  Â <span class="hljs-comment">&lt;!-- é¡¶éƒ¨å¯¼èˆªæ  --&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"top-nav"</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-title"</span>&gt;</span>æ™ºèƒ½å­¦ä¹ è¾…åŠ©ç³»ç»Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-logout"</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span>&gt;</span>é€€å‡ºç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
â€‹
 Â  Â <span class="hljs-comment">&lt;!-- æœç´¢è¡¨å•åŒºåŸŸ --&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"search-form"</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"get"</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"name"</span>&gt;</span>å§“åï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥å§“å"</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"gender"</span>&gt;</span>æ€§åˆ«ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"gender"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"gender"</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">""</span>&gt;</span>è¯·é€‰æ‹©<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"ç”·"</span>&gt;</span>ç”·<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"å¥³"</span>&gt;</span>å¥³<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"position"</span>&gt;</span>èŒä½ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"position"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"position"</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">""</span>&gt;</span>è¯·é€‰æ‹©<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"ç­ä¸»ä»»"</span>&gt;</span>ç­ä¸»ä»»<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"è®²å¸ˆ"</span>&gt;</span>è®²å¸ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"å­¦å·¥ä¸»ç®¡"</span>&gt;</span>å­¦å·¥ä¸»ç®¡<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"æ•™ç ”ä¸»ç®¡"</span>&gt;</span>æ•™ç ”ä¸»ç®¡<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"å’¨è¯¢å¸ˆ"</span>&gt;</span>å’¨è¯¢å¸ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-buttons"</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-primary"</span>&gt;</span>æŸ¥è¯¢<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"reset"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-secondary"</span>&gt;</span>æ¸…ç©º<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
â€‹
 Â  Â <span class="hljs-comment">&lt;!-- è¡¨æ ¼å±•ç¤ºåŒº --&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"table-container"</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"data-table"</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span> 
 Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">&lt;!-- theadç”¨æ¥å®šä¹‰è¡¨å¤´ --&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">&lt;!-- trç”¨æ¥å®šä¹‰è¡¨æ ¼ä¸­çš„è¡Œ --&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>å§“å<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>æ€§åˆ«<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>èŒä½<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>å…¥èŒæ—¥æœŸ<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>æœ€åæ“ä½œæ—¶é—´<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>æ“ä½œ<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">&lt;!-- thç”¨æ¥å®šä¹‰è¡¨æ ¼ä¸­çš„å•å…ƒæ ¼ --&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">&lt;!-- æµ‹è¯•æ•°æ®ï¼šåŸºäºã€Šè¿›å‡»çš„å·¨äººã€‹è§’è‰² --&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>è‰¾ä¼¦<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>ç”·<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>è®²å¸ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>2023-01-15<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>2023-12-10 14:30:25<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-edit"</span>&gt;</span>ç¼–è¾‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-delete"</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>ä¸‰ç¬ <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>å¥³<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>å­¦å·¥ä¸»ç®¡<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>2023-02-20<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>2023-12-09 09:15:42<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-edit"</span>&gt;</span>ç¼–è¾‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-delete"</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>é˜¿å°”æ•<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>ç”·<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>æ•™ç ”ä¸»ç®¡<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>2023-03-05<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>2023-12-08 16:45:18<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-edit"</span>&gt;</span>ç¼–è¾‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-delete"</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>åˆ©å¨å°”<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>ç”·<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>ç­ä¸»ä»»<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>2023-01-10<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>2023-12-10 11:20:30<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-edit"</span>&gt;</span>ç¼–è¾‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-delete"</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>éŸ©å‰<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>å¥³<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>å’¨è¯¢å¸ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>2023-02-15<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>2023-12-07 15:50:45<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-edit"</span>&gt;</span>ç¼–è¾‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-delete"</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>æ•ˆæœå¦‚å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b533a9facd2a4b339521840026547f3b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWFraW5vaGFyYQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769526202&amp;x-signature=iCK0sYqMWldXWd%2BJZcShotNTVXg%3D" alt="a73615c3306423d7897c3330313898ff.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Promise.all å’Œ Promise.allsettledæœ‰å“ªäº›åŒºåˆ«]]></title>    <link>https://juejin.cn/post/7597243334177554472</link>    <guid>https://juejin.cn/post/7597243334177554472</guid>    <pubDate>2026-01-20T14:50:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597243334177554472" data-draft-id="7597243334177521704" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Promise.all å’Œ Promise.allsettledæœ‰å“ªäº›åŒºåˆ«"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-20T14:50:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»£ç çŒäºº"/> <meta itemprop="url" content="https://juejin.cn/user/624972624037374"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Promise.all å’Œ Promise.allsettledæœ‰å“ªäº›åŒºåˆ«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/624972624037374/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»£ç çŒäºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T14:50:13.000Z" title="Tue Jan 20 2026 14:50:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ ¸å¿ƒåŒºåˆ«å¯¹æ¯”è¡¨</h2>








































<table><thead><tr><th>ç‰¹æ€§</th><th><strong>Promise.all</strong></th><th><strong>Promise.allSettled</strong></th></tr></thead><tbody><tr><td><strong>æˆåŠŸæ¡ä»¶</strong></td><td>æ‰€æœ‰ PromiseÂ <strong>éƒ½æˆåŠŸ</strong></td><td>æ‰€æœ‰ PromiseÂ <strong>éƒ½å®Œæˆ</strong>ï¼ˆæ— è®ºæˆåŠŸå¤±è´¥ï¼‰</td></tr><tr><td><strong>å¤±è´¥æ¡ä»¶</strong></td><td>ä»»ä½•ä¸€ä¸ª PromiseÂ <strong>å¤±è´¥</strong>å°±ç«‹å³å¤±è´¥</td><td><strong>æ°¸è¿œä¸ä¼šå¤±è´¥</strong></td></tr><tr><td><strong>è¿”å›å€¼</strong></td><td>æˆåŠŸå€¼æ•°ç»„</td><td>çŠ¶æ€å¯¹è±¡æ•°ç»„</td></tr><tr><td><strong>è®¾è®¡ç›®çš„</strong></td><td>éœ€è¦æ‰€æœ‰ç»“æœéƒ½æˆåŠŸæ‰èƒ½ç»§ç»­</td><td>éœ€è¦çŸ¥é“æ¯ä¸ª Promise çš„æœ€ç»ˆçŠ¶æ€</td></tr><tr><td><strong>ESç‰ˆæœ¬</strong></td><td>ES6 (2015)</td><td>ES2020</td></tr><tr><td><strong>ä½¿ç”¨åœºæ™¯</strong></td><td>å¹¶è¡Œä¾èµ–çš„æ“ä½œ</td><td>ç‹¬ç«‹çš„å¹¶è¡Œæ“ä½œ</td></tr></tbody></table>
<h2 data-id="heading-1">è¯¦ç»†å¯¹æ¯”</h2>
<h3 data-id="heading-2">1.Â <strong>è¡Œä¸ºå·®å¼‚</strong></h3>
<h4 data-id="heading-3"><strong>Promise.all - å…¨æœ‰æˆ–å…¨æ— </strong></h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> p1 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">'æˆåŠŸ1'</span>);
<span class="hljs-keyword">const</span> p2 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-string">'é”™è¯¯2'</span>);  <span class="hljs-comment">// è¿™ä¸ªä¼šå¤±è´¥</span>
<span class="hljs-keyword">const</span> p3 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">'æˆåŠŸ3'</span>);

<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([p1, p2, p3])
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">results</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…¨éƒ¨æˆåŠŸ:'</span>, results);
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœ‰ä¸€ä¸ªå¤±è´¥:'</span>, error); <span class="hljs-comment">// è¾“å‡º: "é”™è¯¯2"</span>
    <span class="hljs-comment">// p1å’Œp3çš„ç»“æœè¢«ä¸¢å¼ƒï¼</span>
  });
</code></pre>
<ul>
<li>åªè¦æœ‰ä¸€ä¸ªå¤±è´¥ï¼Œ<strong>ç«‹å³å¤±è´¥</strong></li>
<li>å…¶ä»– Promise çš„ç»“æœä¼šè¢«<strong>ä¸¢å¼ƒ</strong></li>
</ul>
<h4 data-id="heading-4"><strong>Promise.allSettled - å…¨éƒ¨å®Œæˆ</strong></h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> p1 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">'æˆåŠŸ1'</span>);
<span class="hljs-keyword">const</span> p2 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-string">'é”™è¯¯2'</span>);
<span class="hljs-keyword">const</span> p3 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">'æˆåŠŸ3'</span>);

<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>([p1, p2, p3])
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">results</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…¨éƒ¨å®Œæˆ:'</span>);
    results.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">result, index</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (result.<span class="hljs-property">status</span> === <span class="hljs-string">'fulfilled'</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`p<span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span>: æˆåŠŸ - <span class="hljs-subst">${result.value}</span>`</span>);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`p<span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span>: å¤±è´¥ - <span class="hljs-subst">${result.reason}</span>`</span>);
      }
    });
  });
<span class="hljs-comment">// è¾“å‡º:</span>
<span class="hljs-comment">// å…¨éƒ¨å®Œæˆ:</span>
<span class="hljs-comment">// p1: æˆåŠŸ - æˆåŠŸ1</span>
<span class="hljs-comment">// p2: å¤±è´¥ - é”™è¯¯2</span>
<span class="hljs-comment">// p3: æˆåŠŸ - æˆåŠŸ3</span>
</code></pre>
<ul>
<li>ç­‰å¾…æ‰€æœ‰ PromiseÂ <strong>å®Œæˆ</strong></li>
<li>è¿”å›æ¯ä¸ª Promise çš„<strong>å®Œæ•´çŠ¶æ€ä¿¡æ¯</strong></li>
</ul>
<h3 data-id="heading-5">2.Â <strong>è¿”å›å€¼ç»“æ„ä¸åŒ</strong></h3>
<h4 data-id="heading-6"><strong>Promise.all è¿”å›å€¼</strong></h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æˆåŠŸæ—¶è¿”å›: [value1, value2, ...]</span>
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>), <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">2</span>)])
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">values</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(values)); <span class="hljs-comment">// [1, 2]</span>

<span class="hljs-comment">// å¤±è´¥æ—¶è¿”å›: ç¬¬ä¸€ä¸ªé”™è¯¯</span>
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>), <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-string">'é”™è¯¯'</span>)])
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(error)); <span class="hljs-comment">// "é”™è¯¯"</span>
</code></pre>
<h4 data-id="heading-7"><strong>Promise.allSettled è¿”å›å€¼</strong></h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>([
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>),
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-string">'é”™è¯¯'</span>),
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">3</span>)
])
.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">results</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(results);
  <span class="hljs-comment">/*
  [
    { status: 'fulfilled', value: 1 },
    { status: 'rejected', reason: 'é”™è¯¯' },
    { status: 'fulfilled', value: 3 }
  ]
  */</span>
});
</code></pre>
<h3 data-id="heading-8">3.Â <strong>å®é™…åº”ç”¨åœºæ™¯</strong></h3>
<h4 data-id="heading-9"><strong>é€‚åˆ Promise.all çš„åœºæ™¯</strong></h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åœºæ™¯1: éœ€è¦æ‰€æœ‰æ•°æ®æ‰èƒ½æ¸²æŸ“é¡µé¢</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadDashboard</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> [user, orders, notifications] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
      <span class="hljs-title function_">fetchUser</span>(),
      <span class="hljs-title function_">fetchOrders</span>(),
      <span class="hljs-title function_">fetchNotifications</span>()
    ]);
    
    <span class="hljs-comment">// æ‰€æœ‰æ•°æ®éƒ½æˆåŠŸæ‰æ¸²æŸ“</span>
    <span class="hljs-title function_">renderDashboard</span>({ user, orders, notifications });
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// ä»»ä½•ä¸€ä¸ªå¤±è´¥å°±æ˜¾ç¤ºé”™è¯¯é¡µé¢</span>
    <span class="hljs-title function_">showErrorPage</span>(<span class="hljs-string">'åŠ è½½æ•°æ®å¤±è´¥'</span>);
  }
}

<span class="hljs-comment">// åœºæ™¯2: å¹¶è¡Œæ‰§è¡Œä½†æœ‰ä¾èµ–å…³ç³»</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">processOrder</span>(<span class="hljs-params">orderId</span>) {
  <span class="hljs-keyword">const</span> [order, inventory, payment] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
    <span class="hljs-title function_">getOrder</span>(orderId),
    <span class="hljs-title function_">checkInventory</span>(orderId),
    <span class="hljs-title function_">verifyPayment</span>(orderId)
  ]);
  
  <span class="hljs-comment">// ä¸‰ä¸ªæ£€æŸ¥éƒ½é€šè¿‡æ‰èƒ½ç»§ç»­</span>
  <span class="hljs-keyword">return</span> { order, inventory, payment };
}
</code></pre>
<h4 data-id="heading-10"><strong>é€‚åˆ Promise.allSettled çš„åœºæ™¯</strong></h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åœºæ™¯1: æ‰¹é‡æ“ä½œï¼Œéœ€è¦çŸ¥é“æ¯ä¸ªç»“æœ</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendNotifications</span>(<span class="hljs-params">users</span>) {
  <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>(
    users.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> <span class="hljs-title function_">sendNotification</span>(user))
  );
  
  <span class="hljs-keyword">const</span> successful = results
    .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-property">status</span> === <span class="hljs-string">'fulfilled'</span>)
    .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-property">value</span>);
    
  <span class="hljs-keyword">const</span> failed = results
    .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-property">status</span> === <span class="hljs-string">'rejected'</span>)
    .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-property">reason</span>);
    
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å‘é€æˆåŠŸ: <span class="hljs-subst">${successful.length}</span>, å¤±è´¥: <span class="hljs-subst">${failed.length}</span>`</span>);
  <span class="hljs-keyword">return</span> { successful, failed };
}

<span class="hljs-comment">// åœºæ™¯2: å¤šæºæ•°æ®è·å–ï¼Œå“ªä¸ªå¿«ç”¨å“ªä¸ª</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getDataFromMultipleSources</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>([
    <span class="hljs-title function_">fetchFromPrimaryAPI</span>().<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-literal">null</span>),    <span class="hljs-comment">// ä¸»API</span>
    <span class="hljs-title function_">fetchFromBackupAPI1</span>().<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-literal">null</span>),    <span class="hljs-comment">// å¤‡ä»½API1</span>
    <span class="hljs-title function_">fetchFromBackupAPI2</span>().<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-literal">null</span>)     <span class="hljs-comment">// å¤‡ä»½API2</span>
  ]);
  
  <span class="hljs-comment">// ä½¿ç”¨ç¬¬ä¸€ä¸ªæˆåŠŸçš„ç»“æœ</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> result <span class="hljs-keyword">of</span> results) {
    <span class="hljs-keyword">if</span> (result.<span class="hljs-property">status</span> === <span class="hljs-string">'fulfilled'</span> &amp;&amp; result.<span class="hljs-property">value</span>) {
      <span class="hljs-keyword">return</span> result.<span class="hljs-property">value</span>;
    }
  }
  
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æ‰€æœ‰æ•°æ®æºéƒ½å¤±è´¥äº†'</span>);
}

<span class="hljs-comment">// åœºæ™¯3: æ¸…ç†æ“ä½œï¼Œæ— è®ºå•ä¸ªæˆåŠŸå¤±è´¥éƒ½è¦ç»§ç»­</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">cleanupResources</span>(<span class="hljs-params">resources</span>) {
  <span class="hljs-keyword">const</span> cleanupResults = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>(
    resources.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">resource</span> =&gt;</span> resource.<span class="hljs-title function_">cleanup</span>())
  );
  
  <span class="hljs-comment">// è®°å½•æ‰€æœ‰æ¸…ç†ç»“æœï¼Œä½†ä¸ä¸­æ–­æµç¨‹</span>
  <span class="hljs-title function_">logCleanupResults</span>(cleanupResults);
}
</code></pre>
<h3 data-id="heading-11">4.Â <strong>é”™è¯¯å¤„ç†å·®å¼‚</strong></h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä½¿ç”¨ Promise.all çš„é”™è¯¯å¤„ç†</span>
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([<span class="hljs-title function_">task1</span>(), <span class="hljs-title function_">task2</span>(), <span class="hljs-title function_">task3</span>()])
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">[result1, result2, result3]</span>) =&gt;</span> {
    <span class="hljs-comment">// æˆåŠŸå¤„ç†</span>
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-comment">// ä»»ä½•ä¸€ä¸ªå¤±è´¥éƒ½ä¼šåˆ°è¿™é‡Œ</span>
    <span class="hljs-comment">// ä½†ä¸çŸ¥é“å“ªäº›æˆåŠŸäº†ï¼Œå“ªäº›å¤±è´¥äº†</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æŸä¸ªä»»åŠ¡å¤±è´¥:'</span>, error);
  });

<span class="hljs-comment">// ä½¿ç”¨ Promise.allSettled çš„é”™è¯¯å¤„ç†</span>
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>([<span class="hljs-title function_">task1</span>(), <span class="hljs-title function_">task2</span>(), <span class="hljs-title function_">task3</span>()])
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">results</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> errors = results
      .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-property">status</span> === <span class="hljs-string">'rejected'</span>)
      .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-property">reason</span>);
    
    <span class="hljs-keyword">const</span> successes = results
      .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-property">status</span> === <span class="hljs-string">'fulfilled'</span>)
      .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-property">value</span>);
    
    <span class="hljs-keyword">if</span> (errors.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${errors.length}</span> ä¸ªä»»åŠ¡å¤±è´¥ï¼Œä½†ç»§ç»­å¤„ç†æˆåŠŸçš„`</span>);
      <span class="hljs-comment">// å¯ä»¥ç»§ç»­å¤„ç† successes</span>
    }
    
    <span class="hljs-keyword">return</span> { successes, errors };
  });
</code></pre>
<h3 data-id="heading-12">5.Â <strong>äº’ç›¸æ¨¡æ‹Ÿå®ç°</strong></h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç”¨ Promise.allSettled æ¨¡æ‹Ÿ Promise.all</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">promiseAll</span>(<span class="hljs-params">promises</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>(promises)
    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">results</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> rejected = results.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-property">status</span> === <span class="hljs-string">'rejected'</span>);
      <span class="hljs-keyword">if</span> (rejected) {
        <span class="hljs-keyword">throw</span> rejected.<span class="hljs-property">reason</span>;  <span class="hljs-comment">// æŠ›å‡ºç¬¬ä¸€ä¸ªé”™è¯¯</span>
      }
      <span class="hljs-keyword">return</span> results.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-property">value</span>);  <span class="hljs-comment">// è¿”å›æ‰€æœ‰å€¼</span>
    });
}

<span class="hljs-comment">// ç”¨ Promise.all æ¨¡æ‹Ÿ Promise.allSettledï¼ˆä¸å®Œç¾ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">promiseAllSettled</span>(<span class="hljs-params">promises</span>) {
  <span class="hljs-comment">// ä¸ºæ¯ä¸ª Promise æ·»åŠ é”™è¯¯å¤„ç†ï¼Œç¡®ä¿ä¸ä¼šæŠ›å‡º</span>
  <span class="hljs-keyword">const</span> wrappedPromises = promises.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span>
    <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(p).<span class="hljs-title function_">then</span>(
      <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> ({ <span class="hljs-attr">status</span>: <span class="hljs-string">'fulfilled'</span>, value }),
      <span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> ({ <span class="hljs-attr">status</span>: <span class="hljs-string">'rejected'</span>, reason })
    )
  );
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(wrappedPromises);
}
</code></pre>
<h2 data-id="heading-13">æ€»ç»“é€‰æ‹©å»ºè®®</h2>
<h3 data-id="heading-14">ä½¿ç”¨Â <strong>Promise.all</strong>Â å½“ï¼š</h3>
<ul>
<li>æ‰€æœ‰ PromiseÂ <strong>å¿…é¡»éƒ½æˆåŠŸ</strong>æ‰èƒ½ç»§ç»­</li>
<li>æ“ä½œæœ‰<strong>å¼ºä¾èµ–å…³ç³»</strong></li>
<li>ä¸€ä¸ªå¤±è´¥æ„å‘³ç€æ•´ä¸ªæ“ä½œå¤±è´¥</li>
<li>éœ€è¦<strong>å¿«é€Ÿå¤±è´¥</strong>æœºåˆ¶</li>
</ul>
<h3 data-id="heading-15">ä½¿ç”¨Â <strong>Promise.allSettled</strong>Â å½“ï¼š</h3>
<ul>
<li>éœ€è¦çŸ¥é“<strong>æ¯ä¸ª Promise çš„æœ€ç»ˆçŠ¶æ€</strong></li>
<li>æ“ä½œæ˜¯<strong>ç‹¬ç«‹çš„</strong>ï¼Œä¸€ä¸ªå¤±è´¥ä¸å½±å“å…¶ä»–</li>
<li>éœ€è¦æ”¶é›†<strong>æ‰€æœ‰ç»“æœ</strong>ï¼ˆæˆåŠŸå’Œå¤±è´¥ï¼‰</li>
<li>å®ç°<strong>é™çº§æœºåˆ¶</strong>æˆ–<strong>å¤‡ç”¨æ–¹æ¡ˆ</strong></li>
<li>æ‰§è¡Œ<strong>æ¸…ç†</strong>æˆ–<strong>æ—¥å¿—è®°å½•</strong>æ“ä½œ</li>
</ul>
<h3 data-id="heading-16">ç®€å•è®°å¿†ï¼š</h3>
<ul>
<li><strong>Promise.all</strong>Â = "å…¨éƒ¨æˆåŠŸæ‰ç®—æˆåŠŸ"</li>
<li><strong>Promise.allSettled</strong>Â = "å…¨éƒ¨å®Œæˆå°±æ˜¯æˆåŠŸ"</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3åº•å±‚æ¶æ„â€”â€”ç¼–è¯‘å™¨]]></title>    <link>https://juejin.cn/post/7597252004714119210</link>    <guid>https://juejin.cn/post/7597252004714119210</guid>    <pubDate>2026-01-20T15:51:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597252004714119210" data-draft-id="7597276695403773993" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3åº•å±‚æ¶æ„â€”â€”ç¼–è¯‘å™¨"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,Vue.js"/> <meta itemprop="datePublished" content="2026-01-20T15:51:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç§€ç§€ä¸åªä¼šå‰ç«¯"/> <meta itemprop="url" content="https://juejin.cn/user/1410009035452887"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3åº•å±‚æ¶æ„â€”â€”ç¼–è¯‘å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1410009035452887/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç§€ç§€ä¸åªä¼šå‰ç«¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T15:51:23.000Z" title="Tue Jan 20 2026 15:51:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ç¼–è¯‘å™¨æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå’Œæˆ‘ä»¬ä¹‹å‰è®²è¿‡çš„å“åº”å¼ç³»ç»Ÿæœ‰ä»€ä¹ˆå…³è”å‘¢ï¼Ÿ</p>
<p>ç¼–è¯‘å™¨åªä¼šç”Ÿæˆâ€œè®¿é—®å“åº”å¼æ•°æ®çš„ä»£ç â€ï¼Œæ‰§è¡Œæ”¶é›†ä¾èµ–åœ¨è¿è¡Œæ—¶ã€‚</p>
<p><code>ç¼–è¯‘ .vue æ–‡ä»¶ -&gt; render -&gt; è®¿é—® _ctx.count -&gt; proxy.set -&gt; track</code></p>
<p>è€Œæœ¬æ–‡æˆ‘ä»¬ç€é‡è®²è®²ç¼–è¯‘è¿™ä¸ªè¿‡ç¨‹ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€Vue ç¼–è¯‘å™¨æ•´ä½“æ¶æ„</h2>
<p>Vue3 æŠŠç¼–è¯‘å™¨æ‹†åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">@vue/compiler-sfc   â†’ å¤„ç† .vue æ–‡ä»¶
@vue/compiler-dom   â†’ DOM å¹³å°ç›¸å…³ç¼–è¯‘
@vue/compiler-core  â†’ æ ¸å¿ƒç¼–è¯‘é€»è¾‘ï¼ˆå¹³å°æ— å…³ï¼‰
</code></pre>
<blockquote>
<p><strong>90% çš„â€œåŸç†â€ï¼Œéƒ½åœ¨ compiler-core</strong></p>
</blockquote>
<p><strong>æ ¸å¿ƒç›®æ ‡æ˜¯æŠŠ template è½¬æˆâ€œå°½é‡å°‘ diff çš„ render å‡½æ•°â€</strong></p>
<p>æœ€ç»ˆäº§ç‰©ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯ï¼š</p>
<h2 data-id="heading-1">äºŒã€ç¼–è¯‘æµæ°´çº¿</h2>
<p>Vue ç¼–è¯‘æ˜¯ä¸€ä¸ªâ€‹<strong>æ ‡å‡†ä¸‰æ®µå¼ç¼–è¯‘å™¨</strong>â€‹ï¼š</p>
<blockquote>
<p>å­¦è¿‡ babel çš„åŒå­¦å¯ä»¥å‘ç°ï¼Œè¿™ä¸ªè¿‡ç¨‹éå¸¸åƒ babel ã€‚</p>
</blockquote>
<pre><code class="hljs language-Plain" lang="Plain">Template
  â†“ parse
Template AST
  â†“ transform
JavaScript ASTï¼ˆå¢å¼ºï¼‰
  â†“ generate
render function
</code></pre>
<p>æºç å…¥å£ï¼ˆcompiler-coreï¼‰ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-title function_">baseCompile</span>(template, options)
</code></pre>
<h2 data-id="heading-2">ä¸‰ã€ç¬¬ä¸€é˜¶æ®µï¼šparseï¼ˆæ¨¡æ¿ â†’ ASTï¼‰</h2>
<h3 data-id="heading-3">3.1 AST èŠ‚ç‚¹ç»“æ„</h3>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Node</span> {
  <span class="hljs-attr">type</span>: <span class="hljs-title class_">NodeTypes</span>
  loc
}
</code></pre>
<p>å¸¸è§èŠ‚ç‚¹ç±»å‹ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">NodeTypes</span> {
  <span class="hljs-variable constant_">ROOT</span>,
  <span class="hljs-variable constant_">ELEMENT</span>,
  <span class="hljs-variable constant_">TEXT</span>,
  <span class="hljs-variable constant_">INTERPOLATION</span>,
  <span class="hljs-variable constant_">SIMPLE_EXPRESSION</span>,
  <span class="hljs-variable constant_">ATTRIBUTE</span>,
  <span class="hljs-variable constant_">DIRECTIVE</span>
}
</code></pre>
<h3 data-id="heading-4">3.2 parse çš„æœ¬è´¨</h3>
<blockquote>
<p><strong>ä¾æ¬¡éå†è§£ææ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒæŠŠ template å­—ç¬¦ä¸²è§£ææˆä¸€æ£µ AST</strong></p>
</blockquote>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">&lt;div&gt;{{ count }}&lt;/div&gt;
</code></pre>
<p>ç”Ÿæˆ ASTï¼ˆç®€åŒ–ï¼‰ï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">ROOT
 â””â”€ ELEMENT(div)
     â””â”€ INTERPOLATION
         â””â”€ SIMPLE_EXPRESSION(count)
</code></pre>
<h2 data-id="heading-5">å››ã€ç¬¬äºŒé˜¶æ®µï¼štransformï¼ˆAST â†’ ä¼˜åŒ– ASTï¼‰</h2>
<p>transform é˜¶æ®µåšçš„ä¸æ˜¯â€œæ”¹ç»“æ„â€ï¼Œè€Œæ˜¯ï¼š<strong>ç»™ AST æ‰“â€œè¿è¡Œæ—¶ä¼˜åŒ–æ ‡è®°â€</strong></p>
<h3 data-id="heading-6">4.1 transform çš„æ‰§è¡Œæ¨¡å‹</h3>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">transform</span>(<span class="hljs-params">root, options</span>) {
  <span class="hljs-title function_">traverseNode</span>(root, context)
}
</code></pre>
<p>éå† ASTï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹ï¼š</p>
<ul>
<li>æ‰§è¡Œ <strong>nodeTransforms</strong></li>
<li>æ”¶é›†ä¾èµ–</li>
<li>æ ‡è®° PatchFlag</li>
<li>æ„å»º BlockTree</li>
</ul>
<h3 data-id="heading-7">4.2 transformContext</h3>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">TransformContext</span> {
  helpers
  components
  directives
  currentNode
  parent
}
</code></pre>
<blockquote>
<p>transform ä¸æ˜¯â€œçº¯å‡½æ•°â€ï¼Œè€Œæ˜¯<strong>æœ‰ä¸Šä¸‹æ–‡çš„ç¼–è¯‘è¿‡ç¨‹</strong></p>
</blockquote>
<h3 data-id="heading-8">4.3 è¡¨è¾¾å¼åˆ†æ</h3>
<pre><code class="hljs language-Plain" lang="Plain">{{ count }}
</code></pre>
<p>ä¼šè¢«è½¬æˆï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-title function_">toDisplayString</span>(_ctx.<span class="hljs-property">count</span>)
</code></pre>
<p>å¹¶ä¸”ï¼š</p>
<ul>
<li>æ ‡è®°è¯¥èŠ‚ç‚¹ <strong>ä¾èµ–å“åº”å¼æ•°æ®</strong></li>
<li>æœªæ¥ä¼šç”Ÿæˆ PatchFlag</li>
</ul>
<h3 data-id="heading-9">4.4 PatchFlag çš„æ¥æº</h3>
<p>PatchFlag æ˜¯åœ¨ transform é˜¶æ®µç”Ÿæˆçš„ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-title class_">PatchFlags</span>.<span class="hljs-property">TEXT</span>
<span class="hljs-title class_">PatchFlags</span>.<span class="hljs-property">CLASS</span>
<span class="hljs-title class_">PatchFlags</span>.<span class="hljs-property">PROPS</span>
<span class="hljs-title class_">PatchFlags</span>.<span class="hljs-property">STYLE</span>
</code></pre>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">&lt;div&gt;{{ count }}&lt;/div&gt;
</code></pre>
<p>æœ€ç»ˆæ ‡è®°ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-number">1</span> <span class="hljs-comment">/* TEXT */</span>
</code></pre>
<blockquote>
<p>è¯¥é­”æ³•æ³¨é‡Šè¡¨ç¤ºï¼š<strong>è¿™ä¸ªèŠ‚ç‚¹åªéœ€è¦ diff æ–‡æœ¬</strong></p>
</blockquote>
<h3 data-id="heading-10">4.5 Block Tree</h3>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-title function_">openBlock</span>()
<span class="hljs-title function_">createElementBlock</span>(...)
</code></pre>
<p>Block çš„ä½œç”¨ï¼š<strong>æ”¶é›†æ‰€æœ‰â€œåŠ¨æ€å­èŠ‚ç‚¹â€</strong></p>
<p>transform é˜¶æ®µä¼šåˆ¤æ–­ï¼š</p>
<ul>
<li>å“ªäº›èŠ‚ç‚¹æ˜¯é™æ€çš„</li>
<li>å“ªäº›æ˜¯åŠ¨æ€çš„</li>
</ul>
<p>åŠ¨æ€çš„æ‰è¿›å…¥ blockï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript">block.<span class="hljs-property">children</span>.<span class="hljs-title function_">push</span>(node)
</code></pre>
<blockquote>
<p><strong>diff æ—¶åªéå† blockï¼Œä¸å…¨æ ‘ diff</strong></p>
</blockquote>
<h2 data-id="heading-11">äº”ã€ç¬¬ä¸‰é˜¶æ®µï¼šgenerateï¼ˆAST â†’ render å‡½æ•°ï¼‰</h2>
<h3 data-id="heading-12">5.1 generate çš„ç›®æ ‡</h3>
<p>è¾“å‡ºä¸€ä¸ª JS å‡½æ•° ASTï¼Œæœ€å stringifyï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params">_ctx, _cache</span>) {
  <span class="hljs-keyword">return</span> ...
}
</code></pre>
<h3 data-id="heading-13">5.2 helper çš„æ³¨å…¥æœºåˆ¶</h3>
<p>transform é˜¶æ®µæ”¶é›†ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript">context.<span class="hljs-property">helpers</span>.<span class="hljs-title function_">add</span>(<span class="hljs-variable constant_">CREATE_ELEMENT_VNODE</span>)
</code></pre>
<p>generate æ—¶ç”Ÿæˆï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">import</span> { createElementVNode } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>
</code></pre>
<h3 data-id="heading-14">5.3 ç”Ÿæˆä»£ç ç¤ºä¾‹</h3>
<pre><code class="hljs language-Plain" lang="Plain">&lt;div class="a"&gt;{{ count }}&lt;/div&gt;
</code></pre>
<p>ç”Ÿæˆ renderï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params">_ctx, _cache</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">openBlock</span>(), <span class="hljs-title function_">createElementBlock</span>(
    <span class="hljs-string">"div"</span>,
    { <span class="hljs-attr">class</span>: <span class="hljs-string">"a"</span> },
    <span class="hljs-title function_">toDisplayString</span>(_ctx.<span class="hljs-property">count</span>),
    <span class="hljs-number">1</span>
  )
}
</code></pre>
<h2 data-id="heading-15">å…­ã€compiler-sfcï¼š.vue æ–‡ä»¶æ˜¯æ€ä¹ˆæ¥çš„ï¼Ÿ</h2>
<pre><code class="hljs language-Plain" lang="Plain">&lt;template /&gt;
&lt;script setup /&gt;
&lt;style scoped /&gt;
</code></pre>
<p>compiler-sfc åšçš„äº‹ï¼š</p>
<ul>
<li>æ‹†å—</li>
<li>script setup â†’ æ™®é€š setup</li>
<li>CSS scopeId æ³¨å…¥</li>
<li>template äº¤ç»™ compiler-dom</li>
</ul>
<h2 data-id="heading-16">ä¸ƒã€ä¸ºä»€ä¹ˆ template æ€§èƒ½æ¯” JSX æ›´ç¨³å®šï¼Ÿ</h2>
<p>ä¸€å¥è¯æ€»ç»“ï¼šJSX ç›´æ¥å†™ render å‡½æ•°ï¼Œ<strong>ç»•è¿‡äº† compilerï¼ˆç»•è¿‡äº† PatchFlagã€BlockTreeã€ç²¾å‡† diffï¼‰ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘çš„é¡¹ç›®å®æˆ˜ï¼ˆä¸€ï¼‰- ä¼˜ç§€çš„è·¯ç”±é…ç½®ã€åº•éƒ¨å¯¼èˆªæ å’Œé¦–éƒ¨ç»„ä»¶]]></title>    <link>https://juejin.cn/post/7597250364125560895</link>    <guid>https://juejin.cn/post/7597250364125560895</guid>    <pubDate>2026-01-20T15:09:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597250364125560895" data-draft-id="7597253913248907305" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘çš„é¡¹ç›®å®æˆ˜ï¼ˆä¸€ï¼‰- ä¼˜ç§€çš„è·¯ç”±é…ç½®ã€åº•éƒ¨å¯¼èˆªæ å’Œé¦–éƒ¨ç»„ä»¶"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2026-01-20T15:09:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ETA8"/> <meta itemprop="url" content="https://juejin.cn/user/608445545328347"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘çš„é¡¹ç›®å®æˆ˜ï¼ˆä¸€ï¼‰- ä¼˜ç§€çš„è·¯ç”±é…ç½®ã€åº•éƒ¨å¯¼èˆªæ å’Œé¦–éƒ¨ç»„ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/608445545328347/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ETA8
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T15:09:46.000Z" title="Tue Jan 20 2026 15:09:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šé¢å¯¹è¿™æ ·çš„é—®é¢˜ï¼šå¦‚ä½•æ„å»ºä¸€ä¸ªç»“æ„æ¸…æ™°ã€æ€§èƒ½è‰¯å¥½ã€æ˜“äºç»´æŠ¤çš„ React å•é¡µåº”ç”¨ï¼Ÿä»Šå¤©ï¼Œè®°å½•ä¸‹æˆ‘é¡¹ç›®çš„ç¬¬ä¸€æ­¥â€”â€”<strong>åº•éƒ¨å¯¼èˆªæ ï¼ˆBottomNavï¼‰ã€é¡µé¢å¤´éƒ¨ï¼ˆHeaderï¼‰å’Œè·¯ç”±ç³»ç»Ÿ</strong>ï¼Œæ·±å…¥å‰–æå…¶è®¾è®¡æ€è·¯ã€å®ç°ç»†èŠ‚ä»¥åŠèƒŒåçš„å·¥ç¨‹è€ƒé‡ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« é€‚åˆæœ‰ä¸€å®š React åŸºç¡€çš„å¼€å‘è€…é˜…è¯»ã€‚æˆ‘ä»¬å°†ä¸æ»¡è¶³äºâ€œèƒ½è·‘å°±è¡Œâ€ï¼Œè€Œæ˜¯æ¢è®¨ä¸ºä»€ä¹ˆè¿™ä¹ˆå†™ã€æœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹å¼ã€å¯èƒ½ä¼šè¸©å“ªäº›å‘ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä»éœ€æ±‚å‡ºå‘ï¼šæˆ‘ä»¬éœ€è¦ä»€ä¹ˆæ ·çš„å¯¼èˆªä½“éªŒï¼Ÿ</h2>
<p>å‡è®¾æˆ‘ä»¬è¦åšä¸€ä¸ªç§»åŠ¨ç«¯ Web åº”ç”¨ï¼Œæ¯”å¦‚ä¸€ä¸ªå¤–å–æˆ–ç”µå•†ç±»å¹³å°ã€‚è¿™ç±»åº”ç”¨é€šå¸¸å…·å¤‡ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p>
<ul>
<li>ä½¿ç”¨åº•éƒ¨ Tab å¯¼èˆªåˆ‡æ¢ä¸»è¦åŠŸèƒ½é¡µï¼ˆé¦–é¡µã€è®¢å•ã€èŠå¤©ã€æˆ‘çš„ï¼‰</li>
<li>æ¯ä¸ªé¡µé¢é¡¶éƒ¨æœ‰æ ‡é¢˜æ ï¼Œéƒ¨åˆ†é¡µé¢éœ€è¦è¿”å›æŒ‰é’®</li>
<li>ç”¨æˆ·æœªç™»å½•æ—¶è®¿é—®æŸäº›é¡µé¢åº”è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µ</li>
<li>é¡µé¢åŠ è½½ä¸èƒ½å¤ªæ…¢ï¼Œå°¤å…¶æ˜¯é¦–æ¬¡è¿›å…¥æ—¶</li>
</ul>
<p>è¿™äº›çœ‹ä¼¼ç®€å•çš„éœ€æ±‚ï¼ŒèƒŒåæ¶‰åŠäº†å¤šä¸ªå…³é”®æŠ€æœ¯ç‚¹ï¼šç»„ä»¶é€šä¿¡ã€è·¯ç”±æ§åˆ¶ã€æƒé™æ‹¦æˆªã€æ‡’åŠ è½½ä¼˜åŒ–ç­‰ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä»è¿™ä¸‰ä¸ªæ ¸å¿ƒæ¨¡å—å…¥æ‰‹ï¼Œå±‚å±‚æ‹†è§£ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€åº•éƒ¨å¯¼èˆªæ çš„è®¾è®¡ä¸å®ç°</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1381909b84664d769a93343cf33e5b32~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRVRBOA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769526586&amp;x-signature=8HSA9t%2BQHKp2xLypHubBaEvpfWo%3D" alt="PixPin_2026-01-20_22-56-45.png" loading="lazy"/></p>
<h3 data-id="heading-2">1. åŠŸèƒ½åˆ†æ</h3>
<p>åº•éƒ¨å¯¼èˆªæ çš„ä¸»è¦èŒè´£æ˜¯ï¼š</p>
<ul>
<li>æä¾›å…¨å±€å…¥å£ï¼Œè®©ç”¨æˆ·å¿«é€Ÿåˆ‡æ¢ä¸»é¡µé¢</li>
<li>è§†è§‰ä¸Šé«˜äº®å½“å‰æ‰€åœ¨é¡µé¢</li>
<li>ç‚¹å‡»åæ­£ç¡®è·³è½¬ï¼Œå¹¶é¿å…é‡å¤æ¸²æŸ“æ— æ„ä¹‰æ“ä½œ</li>
<li>æ”¯æŒç™»å½•æ€æ ¡éªŒï¼ˆå¦‚â€œæˆ‘çš„â€é¡µé¢éœ€ç™»å½•ï¼‰</li>
</ul>
<h3 data-id="heading-3">2. å®ç°ç­–ç•¥</h3>
<p>æˆ‘ä»¬é‡‡ç”¨ <code>react-router-dom</code> çš„ <code>useNavigate</code> å’Œ <code>useLocation</code> æ¥ç®¡ç†è·¯ç”±è·³è½¬å’ŒçŠ¶æ€åˆ¤æ–­ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> { pathname } = <span class="hljs-title function_">useLocation</span>();
<span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();
</code></pre>
<p>é€šè¿‡ç›‘å¬ <code>pathname</code>ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¤æ–­å“ªä¸ª Tab å½“å‰å¤„äºæ¿€æ´»çŠ¶æ€ï¼Œå¹¶åŠ¨æ€è®¾ç½®å›¾æ ‡çš„é¢œè‰²å’Œæ–‡å­—æ ·å¼ã€‚è¿™ç§åšæ³•æ¯”ç»´æŠ¤é¢å¤–çš„çŠ¶æ€æ›´å¯é ï¼Œå› ä¸º URL æ‰æ˜¯å”¯ä¸€çœŸç›¸æºã€‚</p>
<h4 data-id="heading-4">å›¾æ ‡å¤„ç†ï¼šä¸ºä½•ä½¿ç”¨ Lucide-reactï¼Ÿ</h4>
<p>æˆ‘ä»¬å¼•å…¥çš„æ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Flucide.dev%2F" target="_blank" title="https://lucide.dev/" ref="nofollow noopener noreferrer">Lucide</a> å›¾æ ‡åº“ï¼Œè€Œé Ant Design æˆ–å…¶ä»– UI æ¡†æ¶è‡ªå¸¦å›¾æ ‡ã€‚åŸå› å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>è½»é‡æŒ‰éœ€</strong>ï¼šæ¯ä¸ªå›¾æ ‡æ˜¯ä¸€ä¸ªç‹¬ç«‹ç»„ä»¶ï¼ŒTree-shaking ååªä¼šæ‰“åŒ…ç”¨åˆ°çš„éƒ¨åˆ†ã€‚</li>
<li><strong>é£æ ¼ç»Ÿä¸€</strong>ï¼šçº¿æ¡ç®€æ´ï¼Œé€‚é…ç°ä»£è®¾è®¡è¯­è¨€ã€‚</li>
<li><strong>TypeScript å‹å¥½</strong>ï¼šç±»å‹å®šä¹‰å®Œæ•´ï¼Œç¼–è¾‘å™¨æç¤ºé¡ºç•…ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Icon</span> = tab.<span class="hljs-property">icon</span>;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Icon</span> <span class="hljs-attr">size</span>=<span class="hljs-string">{24}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{isActive</span> ? "<span class="hljs-attr">text-primary</span>" <span class="hljs-attr">:</span> "<span class="hljs-attr">text-muted-foreground</span>"} /&gt;</span></span>
</code></pre>
<p>è¿™é‡Œå°†å›¾æ ‡ä½œä¸ºç»„ä»¶åŠ¨æ€æ¸²æŸ“ï¼Œæå‡äº†ä»£ç å¤ç”¨æ€§ï¼Œä¹Ÿä¾¿äºåæœŸæ‰©å±•æ›´å¤š Tabã€‚</p>
<h4 data-id="heading-5">è·¯ç”±è·³è½¬é€»è¾‘çš„å°è£…</h4>
<p>ç‚¹å‡»äº‹ä»¶ä¸­åšäº†ä¸¤å±‚åˆ¤æ–­ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">if</span> (pathname === path) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// é˜²æ­¢é‡å¤è·³è½¬</span>
<span class="hljs-keyword">if</span> (needsLogin.<span class="hljs-title function_">includes</span>(path) &amp;&amp; !isLogin) {
  <span class="hljs-title function_">navigate</span>(<span class="hljs-string">'/login'</span>);
  <span class="hljs-keyword">return</span>;
}
<span class="hljs-title function_">navigate</span>(path);
</code></pre>
<p>è¿™ä½“ç°äº†ä¸¤ä¸ªé‡è¦æ€æƒ³ï¼š</p>
<ol>
<li><strong>é˜²æŠ–ä¼˜åŒ–</strong>ï¼šé¿å…ç”¨æˆ·é¢‘ç¹ç‚¹å‡»é€ æˆä¸å¿…è¦çš„ re-renderã€‚</li>
<li><strong>å‰ç½®å®ˆå«æœºåˆ¶</strong>ï¼šç±»ä¼¼ Vue Router çš„ <code>beforeEach</code>ï¼Œåœ¨è·³è½¬å‰æ£€æŸ¥æ¡ä»¶ã€‚</li>
</ol>
<blockquote>
<p>ğŸ’¡ å°æŠ€å·§ï¼š<code>needsLogin</code> æ˜¯ä¸€ä¸ªé…ç½®æ•°ç»„ï¼Œå­˜æ”¾éœ€è¦ç™»å½•æ‰èƒ½è®¿é—®çš„è·¯å¾„ã€‚è¿™ç§æ–¹å¼æ¯”åœ¨æ¯ä¸ªè·¯ç”±é‡Œå†™ <code>requireAuth: true</code> æ›´é›†ä¸­ã€æ˜“ç»´æŠ¤ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€é¡µé¢å¤´éƒ¨ç»„ä»¶çš„è®¾è®¡å“²å­¦</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b0fe552766849e298a9edd41e1ddb5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRVRBOA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769526586&amp;x-signature=gw33ZZ7pgbZ09tIVZxi%2FElcdM5k%3D" alt="PixPin_2026-01-20_22-59-11.png" loading="lazy"/></p>
<h3 data-id="heading-7">1. å¤´éƒ¨è¦è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h3>
<ul>
<li>æ˜¾ç¤ºå½“å‰é¡µé¢æ ‡é¢˜ï¼ˆå¯èƒ½è¿‡é•¿éœ€æˆªæ–­ï¼‰</li>
<li>æ”¯æŒè¿”å›æŒ‰é’®ï¼ˆå†å²æ ˆå›é€€ or è‡ªå®šä¹‰è¡Œä¸ºï¼‰</li>
<li>å›ºå®šå®šä½ï¼Œä¸å½±å“å†…å®¹æ»šåŠ¨</li>
<li>å…¼å®¹é»‘å¤œæ¨¡å¼ï¼ˆdark modeï¼‰</li>
</ul>
<h3 data-id="heading-8">2. ç»“æ„è®¾è®¡ï¼šè¯­ä¹‰åŒ– + å¼¹æ€§å¸ƒå±€</h3>
<p>æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨ <code>&lt;header&gt;</code> åŒ…è£¹æ•´ä¸ªç»“æ„ç„¶åå±…ä¸­å†…å®¹ï¼Œè€Œæ˜¯å·§å¦™åœ°åˆ©ç”¨ç»å¯¹å®šä½æ¥å¤„ç†å·¦å³ä¸¤ä¾§çš„æŒ‰é’®åŒºåŸŸï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx">&lt;div className=<span class="hljs-string">"absolute left-4"</span>&gt;...&lt;/div&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"truncate max-w-[60%] text-center"</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"absolute right-4 w-10"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
</code></pre>
<p>è¿™æ ·åšæœ‰å‡ ä¸ªå¥½å¤„ï¼š</p>
<ul>
<li>æ ‡é¢˜å§‹ç»ˆå±…ä¸­ï¼Œä¸å—å·¦å³å…ƒç´ å®½åº¦å½±å“</li>
<li>å·¦å³é¢„ç•™ç©ºé—´ä¸€è‡´ï¼Œè§†è§‰å¹³è¡¡</li>
<li>ä½¿ç”¨ <code>truncate</code> å’Œ <code>max-w</code> é˜²æ­¢é•¿æ ‡é¢˜æº¢å‡º</li>
<li><code>w-10</code> å ä½ç¡®ä¿å³ä¾§å³ä½¿æ— å†…å®¹ä¹Ÿä¸ä¼šåç§»</li>
</ul>
<h4 data-id="heading-9">è¿”å›æŒ‰é’®çš„é»˜è®¤è¡Œä¸ºè®¾è®¡</h4>
<pre><code class="hljs language-ts" lang="ts">onBack = <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">back</span>()
</code></pre>
<p>è¿™æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„é»˜è®¤å€¼è®¾å®šã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç‚¹å‡»è¿”å›å°±æ˜¯æµè§ˆå™¨åé€€ä¸€æ­¥ã€‚åªæœ‰ç‰¹æ®Šåœºæ™¯æ‰éœ€è¦è‡ªå®šä¹‰é€»è¾‘ï¼ˆå¦‚å…³é—­å¼¹çª—ã€é€€å‡ºè¡¨å•ç¼–è¾‘ç­‰ï¼‰ã€‚</p>
<p>åŒæ—¶ä½¿ç”¨ <code>Button</code> ç»„ä»¶å¹¶è®¾ç½® <code>variant='ghost'</code>ï¼Œä¿è¯è§†è§‰è½»é‡åŒ–ï¼Œä¸å–§å®¾å¤ºä¸»ã€‚</p>
<blockquote>
<p>âœ… æœ€ä½³å®è·µå»ºè®®ï¼šå¯¹å¤–æš´éœ² API æ—¶ï¼Œå°½é‡æä¾›åˆç†çš„é»˜è®¤å€¼ï¼Œé™ä½è°ƒç”¨æ–¹æˆæœ¬ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-10">å››ã€è·¯ç”±ç³»ç»Ÿçš„å·¥ç¨‹åŒ–æ€è€ƒ</h2>
<h3 data-id="heading-11">1. ä¸ºä»€ä¹ˆè¦ç”¨æ‡’åŠ è½½ï¼ˆLazy Loadingï¼‰ï¼Ÿ</h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæ‰€æœ‰é¡µé¢éƒ½åœ¨åº”ç”¨å¯åŠ¨æ—¶ä¸€æ¬¡æ€§åŠ è½½ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./pages/Home'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Mine</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./pages/Mine'</span>
<span class="hljs-comment">// ...</span>
</code></pre>
<p>é‚£ä¹ˆé¦–å± JS åŒ…ä½“ç§¯å¯èƒ½è¾¾åˆ°å‡ ç™¾ KB ç”šè‡³ MBï¼Œä¸¥é‡å½±å“åŠ è½½é€Ÿåº¦ã€‚</p>
<p>è€Œä½¿ç”¨ <code>React.lazy</code> + <code>Suspense</code> å¯ä»¥å®ç°<strong>ä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Home</span> = <span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/pages/Home'</span>))
</code></pre>
<p>Webpack ä¼šåœ¨æ„å»ºæ—¶è‡ªåŠ¨ä¸ºæ¯ä¸ª <code>import()</code> åˆ›å»ºå•ç‹¬çš„ chunk æ–‡ä»¶ï¼Œç”¨æˆ·è®¿é—®å¯¹åº”è·¯ç”±æ—¶æ‰åŠ è½½ã€‚</p>
<p>é…åˆ <code>Suspense fallback={&lt;Loading /&gt;}</code>ï¼Œè¿˜èƒ½ä¼˜é›…å±•ç¤ºåŠ è½½çŠ¶æ€ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 data-id="heading-12">2. å¸ƒå±€ç»„ä»¶çš„æŠ½è±¡ï¼šMainLayout</h3>
<p>ä½ æ˜¯å¦è§è¿‡è¿™æ ·çš„ç»“æ„ï¼Ÿ</p>
<pre><code class="hljs language-tsx" lang="tsx">&lt;<span class="hljs-title class_">Route</span> path=<span class="hljs-string">"/order"</span> element={
  <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"è®¢å•"</span> <span class="hljs-attr">showBackBtn</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">OrderPage</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">BottomNav</span> /&gt;</span>
  <span class="hljs-tag">&lt;/&gt;</span></span>
}/&gt;
</code></pre>
<p>å¦‚æœæ¯ä¸ªé¡µé¢éƒ½è¿™æ ·å†™ï¼Œä¸ä»…é‡å¤ï¼Œè€Œä¸”éš¾ä»¥ç»Ÿä¸€ä¿®æ”¹ï¼ˆæ¯”å¦‚æŸå¤©è¦åŠ ä¸€ä¸ª footerï¼‰ã€‚</p>
<p>æˆ‘ä»¬çš„æ–¹æ¡ˆæ˜¯ä½¿ç”¨åµŒå¥—è·¯ç”± + å¸ƒå±€ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx">&lt;<span class="hljs-title class_">Route</span> path=<span class="hljs-string">"/"</span> element={<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MainLayout</span> /&gt;</span></span>}&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">""</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Home</span> /&gt;</span>} /&gt;</span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"order"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Order</span> /&gt;</span>} /&gt;</span>
&lt;/<span class="hljs-title class_">Route</span>&gt;
</code></pre>
<p><code>MainLayout</code> è´Ÿè´£åŒ…è£¹å…¬å…± UIï¼ˆHeaderã€BottomNavï¼‰ï¼Œå­è·¯ç”±çš„å†…å®¹æ’å…¥å…¶ä¸­ã€‚è¿™æ˜¯ React Router æ¨èçš„æœ€ä½³å®è·µä¹‹ä¸€ã€‚</p>
<blockquote>
<p>ğŸ“Œ è¡¥å……çŸ¥è¯†ï¼š<code>Outlet</code> ç»„ä»¶ç”¨äºæ¸²æŸ“å­è·¯ç”±å†…å®¹ï¼Œç±»ä¼¼äº Vue çš„ <code>&lt;router-view&gt;</code>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-13">äº”ã€çŠ¶æ€ç®¡ç†ä¸æƒé™æ§åˆ¶</h2>
<p>å…³äºçŠ¶æ€çš„ç®¡ç†  æˆ‘ä»¬é‡‡ç”¨äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fzustand-demo.pmnd.rs%2F" target="_blank" title="https://zustand-demo.pmnd.rs/" ref="nofollow noopener noreferrer">Zustand</a> è¿™ç±»è½»é‡çº§çŠ¶æ€ç®¡ç†å·¥å…·ï¼Œè€Œä¸æ˜¯ Reduxã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> { isLogin } = <span class="hljs-title function_">useUserStore</span>();
</code></pre>
<p>åŸå› ä¹Ÿå¾ˆæ˜ç¡®ï¼š</p>
<ul>
<li>æ›´å°‘æ¨¡æ¿ä»£ç </li>
<li>ä¸ä¾èµ– Provider åµŒå¥—</li>
<li>API ç®€æ´ç›´è§‚ï¼Œå­¦ä¹ æˆæœ¬ä½</li>
</ul>
<p>å¯¹äºä¸­å°å‹é¡¹ç›®æ¥è¯´ï¼ŒZustand å®Œå…¨å¤Ÿç”¨ä¸”é«˜æ•ˆã€‚</p>
<p>ç»“åˆè·¯ç”±å®ˆå«é€»è¾‘ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">if</span> (needsLogin.<span class="hljs-title function_">includes</span>(path) &amp;&amp; !isLogin) {
  <span class="hljs-title function_">navigate</span>(<span class="hljs-string">'/login'</span>);
}
</code></pre>
<p>è¿™æ˜¯ä¸€ç§ç®€æ˜“ä½†æœ‰æ•ˆçš„â€œè·¯ç”±å®ˆå«â€å®ç°ã€‚å®ƒè™½ä¸å¦‚ Vue Router çš„å¯¼èˆªå®ˆå«é‚£æ ·ç²¾ç»†ï¼ˆæ¯”å¦‚æ”¯æŒå¼‚æ­¥éªŒè¯ï¼‰ï¼Œä½†å¯¹äºå¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯å·²ç»è¶³å¤Ÿã€‚</p>
<blockquote>
<p>âš ï¸ æ³¨æ„äº‹é¡¹ï¼šè¿™ç§å®ˆå«åªèƒ½é˜²æ­¢ä¸»åŠ¨è·³è½¬ï¼Œæ— æ³•é˜»æ­¢ç”¨æˆ·ç›´æ¥è¾“å…¥ URL è®¿é—®ã€‚çœŸæ­£çš„å®‰å…¨æ ¡éªŒä»éœ€æœåŠ¡ç«¯é…åˆã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-14">å…­ã€å·¥ç¨‹é…ç½®çš„è‰ºæœ¯ï¼šalias ä¸è·¯å¾„ä¼˜åŒ–</h2>
<p>åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­å¤§é‡ä½¿ç”¨äº† <code>@/</code> å¼€å¤´çš„å¯¼å…¥è·¯å¾„ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/store/useUserStore'</span>;
</code></pre>
<p>è¿™æ˜¯é€šè¿‡é…ç½® TypeScript å’Œ Vite çš„è·¯å¾„åˆ«åå®ç°çš„ï¼š</p>
<h3 data-id="heading-15">vite.config.ts</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-attr">resolve</span>: {
  <span class="hljs-attr">alias</span>: {
    <span class="hljs-string">'@'</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>)
  }
}
</code></pre>
<h3 data-id="heading-16">tsconfig.json</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"baseUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"."</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"paths"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"@/*"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"src/*"</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™æ ·åšå¸¦æ¥çš„å¥½å¤„éå¸¸æ˜æ˜¾ï¼š</p>
<ul>
<li>è·¯å¾„ä¸å†å—ç›¸å¯¹å±‚çº§å½±å“ï¼ˆå‘Šåˆ« <code>../../../../</code>ï¼‰</li>
<li>é‡å‘½åæ–‡ä»¶å¤¹æ›´å®‰å…¨</li>
<li>IDE è‡ªåŠ¨è¡¥å…¨æ›´å‡†ç¡®</li>
<li>é¡¹ç›®ç»“æ„æ›´æ¸…æ™°</li>
</ul>
<p>è¿™ä¹Ÿæ˜¯ç°ä»£å‰ç«¯é¡¹ç›®çš„æ ‡é…é…ç½®ã€‚</p>
<hr/>
<h2 data-id="heading-17">ä¸ƒã€å…³äº shadcn/ui çš„é€‰æ‹©</h2>
<p>æˆ‘çš„é€‰æ‹©æ˜¯ <code>shadcn</code>ï¼Œå®ƒä¸æ˜¯ä¸€ä¸ªä¼ ç»Ÿæ„ä¹‰ä¸Šçš„ç»„ä»¶åº“ï¼ˆå¦‚ Ant Designï¼‰ï¼Œè€Œæ˜¯ä¸€ç§<strong>å¯å®šåˆ¶çš„ã€åŸºäº Tailwind CSS çš„ç»„ä»¶ç”Ÿæˆå·¥å…·</strong>ã€‚</p>
<p>ä½ å¯ä»¥è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npx shadcn@latest add button
</code></pre>
<p>å®ƒä¼šä¸‹è½½ <code>Button</code> ç»„ä»¶çš„æºç åˆ°æœ¬åœ° <code>components/ui/button</code>ï¼Œä½ å¯ä»¥è‡ªç”±ä¿®æ”¹æ ·å¼ã€é€»è¾‘ï¼Œè€Œä¸å—ç‰ˆæœ¬å‡çº§å½±å“ã€‚</p>
<p>è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹åœ¨äºï¼š</p>
<ul>
<li><strong>å®Œå…¨æŒ‰éœ€</strong>ï¼šåªå¼•å…¥ç”¨åˆ°çš„ç»„ä»¶</li>
<li><strong>æ·±åº¦å®šåˆ¶</strong>ï¼šæ ·å¼å¯æ”¹ï¼Œè¡Œä¸ºå¯æ§</li>
<li><strong>æ— è¿è¡Œæ—¶ä¾èµ–</strong>ï¼šæœ€ç»ˆåªæ˜¯æ™®é€š React ç»„ä»¶ + Tailwind ç±»å</li>
</ul>
<p>ç¼ºç‚¹åˆ™æ˜¯ï¼š</p>
<ul>
<li>åˆå§‹é…ç½®ç¨å¤æ‚</li>
<li>éœ€è¦ç†è§£ Tailwind çš„ utility-first æ€æƒ³</li>
<li>æ›´æ–°ç»„ä»¶éœ€æ‰‹åŠ¨æ‹‰å–æ–°ç‰ˆæœ¬ä»£ç </li>
</ul>
<p>ä½†å¯¹äºè¿½æ±‚æè‡´æ§åˆ¶åŠ›å’Œæ€§èƒ½ä¼˜åŒ–çš„å›¢é˜Ÿæ¥è¯´ï¼Œè¿™æ­£æ˜¯ç†æƒ³ä¹‹é€‰ã€‚</p>
<hr/>
<h2 data-id="heading-18">å…«ã€æ€»ç»“ï¼šæˆ‘ä»¬åœ¨æ„å»ºä»€ä¹ˆï¼Ÿ</h2>
<p>å›é¡¾æ•´ä¸ªæ¶æ„ï¼Œå…¶å®æˆ‘ä»¬æ„å»ºçš„ä¸ä»…ä»…æ˜¯ä¸€ä¸ªåº•éƒ¨å¯¼èˆªæˆ–å‡ ä¸ªé¡µé¢ï¼Œè€Œæ˜¯ä¸€å¥—<strong>å¯æ‰©å±•çš„åº”ç”¨éª¨æ¶ï¼ˆApp Scaffoldï¼‰</strong>ï¼š</p>



































<table><thead><tr><th>æ¨¡å—</th><th>è§£å†³çš„é—®é¢˜</th><th>æŠ€æœ¯æ‰‹æ®µ</th></tr></thead><tbody><tr><td>BottomNav</td><td>å…¨å±€å¯¼èˆª</td><td>å›¾æ ‡ç»„ä»¶ + è·¯ç”±è”åŠ¨</td></tr><tr><td>Header</td><td>é¡µé¢æ ‡é¢˜ä¸äº¤äº’</td><td>ç»å¯¹å®šä½ + é»˜è®¤å‚æ•°</td></tr><tr><td>RouterConfig</td><td>æ€§èƒ½ä¸ç»“æ„</td><td>Lazy + Suspense + åµŒå¥—è·¯ç”±</td></tr><tr><td>State Management</td><td>ç™»å½•çŠ¶æ€å…±äº«</td><td>Zustand</td></tr><tr><td>Build Config</td><td>å·¥ç¨‹ä½“éªŒ</td><td>alias + TS è·¯å¾„æ˜ å°„</td></tr></tbody></table>
<p>è¿™å¥—ä½“ç³»å…·å¤‡ä»¥ä¸‹ç‰¹è´¨ï¼š</p>
<p>âœ… <strong>é«˜æ€§èƒ½</strong>ï¼šä»£ç åˆ†å‰²ã€æ‡’åŠ è½½ã€æŒ‰éœ€å¼•å…¥<br/>
âœ… <strong>æ˜“ç»´æŠ¤</strong>ï¼šç»“æ„æ¸…æ™°ã€èŒè´£åˆ†æ˜<br/>
âœ… <strong>å¯æ‹“å±•</strong>ï¼šæ–°å¢é¡µé¢åªéœ€æ·»åŠ è·¯ç”±ï¼Œæ— éœ€æ”¹åŠ¨å…¨å±€é€»è¾‘<br/>
âœ… <strong>ä¸“ä¸šæ„Ÿå¼º</strong>ï¼šç¬¦åˆç°ä»£ React å¼€å‘èŒƒå¼</p>
<hr/>
<h2 data-id="heading-19">å†™åœ¨æœ€å</h2>
<p>æŠ€æœ¯æ²¡æœ‰é“¶å¼¹ï¼Œä½†å¥½çš„æ¶æ„èƒ½è®©å›¢é˜Ÿèµ°å¾—æ›´è¿œã€‚ä»Šå¤©æˆ‘ä»¬ä»å‡ ä¸ªçœ‹ä¼¼ç®€å•çš„ç»„ä»¶åˆ‡å…¥ï¼Œæ­ç¤ºäº†èƒŒåéšè—çš„è®¾è®¡æƒè¡¡ä¸å·¥ç¨‹æ™ºæ…§ã€‚</p>
<p>ä¹Ÿè®¸ä½ ç°åœ¨çš„é¡¹ç›®è¿˜ç”¨ä¸ä¸Šè¿™ä¹ˆå¤æ‚çš„ç»“æ„ï¼Œä½†äº†è§£è¿™äº›æ¨¡å¼çš„æ„ä¹‰åœ¨äºï¼šå½“ä½ é‡åˆ°ç±»ä¼¼é—®é¢˜æ—¶ï¼Œè„‘å­é‡Œå·²ç»æœ‰äº†ç­”æ¡ˆçš„è½®å»“ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ æŠŠâ€œä¼šç”¨â€å˜æˆâ€œæ‡‚ç”¨â€ï¼ŒæŠŠâ€œå†™å‡ºæ¥â€å˜æˆâ€œå†™å¾—å¥½â€ã€‚</p>
<blockquote>
<p>å¦‚æœä½ è§‰å¾—æœ‰æ”¶è·ï¼Œæ¬¢è¿ç‚¹èµæ”¶è—ï¼Œä¹Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„è·¯ç”±è®¾è®¡æ–¹æ¡ˆ ğŸ‘‡</p>
</blockquote>
<hr/>
<p>ğŸ“Œ <strong>å»¶ä¼¸é˜…è¯»å»ºè®®</strong>ï¼š</p>
<ul>
<li>ã€ŠReact Router v6 å®˜æ–¹æ–‡æ¡£ã€‹</li>
<li>ã€ŠZustand vs Redux Toolkit å¯¹æ¯”åˆ†æã€‹</li>
<li>ã€ŠTailwind CSS Utility-First Philosophy è§£è¯»ã€‹</li>
</ul>
<p>ä¿æŒå¥½å¥‡ï¼ŒæŒç»­ç²¾è¿›ã€‚å…±å‹‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android ä¸­ä½¿ç”¨ ScreenMatchæ’ä»¶ å®ç°æœ€å°å®½åº¦ç¬¦é€‚é…]]></title>    <link>https://juejin.cn/post/7597259271110279208</link>    <guid>https://juejin.cn/post/7597259271110279208</guid>    <pubDate>2026-01-20T11:09:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597259271110279208" data-draft-id="7597266967137959970" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android ä¸­ä½¿ç”¨ ScreenMatchæ’ä»¶ å®ç°æœ€å°å®½åº¦ç¬¦é€‚é… "/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-20T11:09:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xq9527"/> <meta itemprop="url" content="https://juejin.cn/user/1239904848712184"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android ä¸­ä½¿ç”¨ ScreenMatchæ’ä»¶ å®ç°æœ€å°å®½åº¦ç¬¦é€‚é… 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1239904848712184/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xq9527
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T11:09:28.000Z" title="Tue Jan 20 2026 11:09:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Android ä¸­ä½¿ç”¨ ScreenMatch å®ç°æœ€å°å®½åº¦é€‚é…</h2>
<h3 data-id="heading-1">å‰è¨€å¯¼è¯»</h3>
<p>å„ä½åŒå­¦å¤§å®¶å¥½ï¼Œæœ€è¿‘åœ¨åšæµ·å¤–é¡¹ç›®æ—¶é‡åˆ°äº†å±å¹•é€‚é…çš„éœ€æ±‚ã€‚ç»è¿‡è°ƒç ”ï¼Œå¸‚é¢ä¸Šæ¯”è¾ƒæµè¡Œçš„æ–¹æ¡ˆæœ‰ <code>AndroidAutoSize</code> ç­‰ä¸‰æ–¹åº“ã€‚è™½ç„¶ <code>AndroidAutoSize</code> å¾ˆå¼ºå¤§ï¼Œä½†å®ƒéœ€è¦åœ¨é¡¹ç›®ä¸­å¼•å…¥é¢å¤–çš„ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œå¹¶ä¸”åœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹å¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘æœ€ç»ˆé€‰æ‹©äº† <strong>æœ€å°å®½åº¦é€‚é… (Smallest Width Adaptation)</strong> æ–¹æ¡ˆã€‚è¿™æ˜¯ä¸€ç§ Android åŸç”Ÿæ”¯æŒçš„é€‚é…æ–¹å¼ï¼Œç¨³å®šæ€§é«˜ä¸”æ— éœ€å¼•å…¥è¿è¡Œæ—¶ä¾èµ–ã€‚</p>
<p>ä»Šå¤©ä¸»è¦è®²è§£å¦‚ä½•ä½¿ç”¨ <strong>ScreenMatch</strong> æ’ä»¶æ¥å¿«é€Ÿå®ç°æœ€å°å®½åº¦é€‚é…ã€‚è‡³äºå…¶åº•å±‚åŸç†ï¼Œæˆ‘ä»¬å°†åœ¨åç»­æ–‡ç« ä¸­æ·±å…¥æ¢è®¨ã€‚</p>
<h3 data-id="heading-2">æ–¹æ¡ˆå¯¹æ¯”</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d2f47cf959f4998bdbd4f9d47b9a373~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHE5NTI3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769512168&amp;x-signature=qGVcB36EjvM1JHVa%2FVaKAjgIRS4%3D" alt="image.png" loading="lazy"/></p>
<p>ç›¸æ¯”äºè¿è¡Œæ—¶è®¡ç®—çš„æ–¹æ¡ˆï¼ŒScreenMatch æ˜¯åœ¨ç¼–è¯‘å‰è‡ªåŠ¨ç”Ÿæˆå„åˆ†è¾¨ç‡å¯¹åº”çš„ <code>dimens.xml</code> æ–‡ä»¶ï¼Œåˆ©ç”¨ Android ç³»ç»ŸåŸç”Ÿçš„èµ„æºåŠ è½½æœºåˆ¶è¿›è¡Œé€‚é…ï¼Œæ€§èƒ½æ›´å¥½ä¸”é›¶ä¾µå…¥ã€‚</p>
<h3 data-id="heading-3">ä½¿ç”¨æ­¥éª¤</h3>
<h4 data-id="heading-4">ç¬¬ä¸€æ­¥ï¼šå®‰è£…æ’ä»¶</h4>
<ol>
<li>
<p><strong>æ‰“å¼€è®¾ç½®</strong>ï¼šFile -&gt; Settings (Windows) / Android Studio -&gt; Preferences (Mac)ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/835b4f8394ac44b38dbc47cc237a61ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHE5NTI3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769512168&amp;x-signature=1Tsz3LdCLQ82kDbl%2BCDJI%2BFLUUY%3D" alt="image.png" loading="lazy"/></p>
</li>
<li>
<p><strong>æœç´¢æ’ä»¶</strong>ï¼šåœ¨æ’ä»¶å¸‚åœº (Marketplace) ä¸­æœç´¢ <code>ScreenMatch</code>ï¼Œç‚¹å‡»å®‰è£…ï¼Œç„¶åé‡å¯ IDEã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be02c267a976427aaf6cccf7a2292423~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHE5NTI3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769512168&amp;x-signature=bt8umu1eFiNDMJm%2FR1MTwPNgZ0k%3D" alt="image.png" loading="lazy"/></p>
</li>
</ol>
<h4 data-id="heading-5">ç¬¬äºŒæ­¥ï¼šå‡†å¤‡åŸºç¡€èµ„æºæ–‡ä»¶</h4>
<p>åœ¨é¡¹ç›®çš„ <code>res/values</code> ç›®å½•ä¸‹åˆ›å»º <code>dimens.xml</code> æ–‡ä»¶ï¼ˆå¦‚æœå·²å­˜åœ¨åˆ™å¿½ç•¥ï¼‰ã€‚è¿™ä¸ªæ–‡ä»¶å°†ä½œä¸ºåŸºç¡€çš„é€‚é…åŸºå‡†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9eaf8911a0cc49038a7f18c20bb52222~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHE5NTI3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769512168&amp;x-signature=Go3Z%2F01rV1VN7%2ByQyB8D1bQP1dY%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-6">ç¬¬ä¸‰æ­¥ï¼šç”Ÿæˆé€‚é…æ–‡ä»¶</h4>
<ol>
<li>
<p><strong>è¿è¡Œæ’ä»¶</strong>ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•é€‰ä¸­é¡¹ç›®æ–‡ä»¶å¤¹ï¼ˆæˆ–è€…ä»»æ„ç›®å½•ï¼‰ï¼Œå³é”®ç‚¹å‡»ï¼Œé€‰æ‹© <code>ScreenMatch</code> é€‰é¡¹ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/947976a012454277b8d7b7d317290d70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHE5NTI3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769512168&amp;x-signature=fZ2g450Gb6NrzasFF5hdKsoR7Ws%3D" alt="image.png" loading="lazy"/></p>
</li>
<li>
<p><strong>é€‰æ‹©æ¨¡å—</strong>ï¼šåœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­ï¼Œé€‰ä¸­æˆ‘ä»¬è¦ç”Ÿæˆé€‚é…èµ„æºçš„å·¥ç¨‹æ¨¡å—ï¼ˆ<code>app</code> æˆ– <code>library</code> å‡å¯ï¼‰ï¼Œç„¶åç‚¹å‡» <strong>OK</strong>ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/654fe2e457b349ae88ebcd4eb2fc9ea9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHE5NTI3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769512168&amp;x-signature=H6RiHa8SXcseiXTNV%2BNY97ZWu2g%3D" alt="image.png" loading="lazy"/></p>
</li>
<li>
<p><strong>ç¡®è®¤ç”Ÿæˆ</strong>ï¼šçœ‹åˆ°å¦‚ä¸‹æç¤ºå³è¡¨ç¤ºæˆåŠŸã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šå¦‚æœæç¤ºæ‰¾ä¸åˆ° <code>dimens.xml</code> æ–‡ä»¶ï¼Œè¯·æ£€æŸ¥è¯¥æ–‡ä»¶æ˜¯å¦ç¡®å®å­˜åœ¨äº <code>res/values</code> ç›®å½•ä¸‹ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e94dfdac5f82424aab5bb3d01e218411~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHE5NTI3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769512168&amp;x-signature=DI%2F3meUsKEX%2Fdl%2Bj3W05XocZ2tU%3D" alt="image.png" loading="lazy"/></p>
</li>
<li>
<p><strong>æŸ¥çœ‹ç»“æœ</strong>ï¼šé‡å¯ IDEï¼ˆæˆ–åˆ·æ–°é¡¹ç›®ï¼‰ï¼Œä½ ä¼šå‘ç° <code>res</code> ç›®å½•ä¸‹å¤šå‡ºäº†è®¸å¤š <code>values-swXXXdp</code> æ–‡ä»¶å¤¹ã€‚è¿™äº›å°±æ˜¯æ’ä»¶æ ¹æ®åŸºå‡† <code>dimens.xml</code> è‡ªåŠ¨è®¡ç®—å¹¶ç”Ÿæˆçš„é€‚é…æ–‡ä»¶ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ec2ea2fe18f4251adeff4c5bf1b9b9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHE5NTI3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769512168&amp;x-signature=X3lhyk3nRvFsJpgBFWz3%2Fli2X%2BY%3D" alt="image.png" loading="lazy"/></p>
</li>
</ol>
<h4 data-id="heading-7">ç¬¬å››æ­¥ï¼šä»£ç å¼•ç”¨</h4>
<p>ç”Ÿæˆé€‚é…æ–‡ä»¶åï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨å¸ƒå±€æ–‡ä»¶ä¸­åƒå¾€å¸¸ä¸€æ ·å¼•ç”¨ <code>dimens</code> å³å¯ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ ¹æ®è®¾å¤‡çš„æœ€å°å®½åº¦åŠ è½½å¯¹åº”çš„èµ„æºå€¼ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ç´«è‰²æ ‡é¢˜æ  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:background</span>=<span class="hljs-string">"#8000FF"</span>
        <span class="hljs-attr">android:text</span>=<span class="hljs-string">"TestDemo"</span>
        <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"#FFFFFF"</span>
        <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"@dimen/text_size_title"</span>
        <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"@dimen/dimen16"</span> /&gt;</span>

    <span class="hljs-comment">&lt;!-- çº¢ç»¿åˆ†éš”æ¡ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"@dimen/dimen50"</span>
        <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">View</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"0dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"#FF0000"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">View</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"0dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">"1"</span>
            <span class="hljs-attr">android:background</span>=<span class="hljs-string">"#00FF00"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ä¸»è¦å†…å®¹åŒºåŸŸ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>
        <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>
        <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"16dp"</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"Hello World!"</span>
            <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"@dimen/text_size_title"</span>
            <span class="hljs-attr">android:layout_marginBottom</span>=<span class="hljs-string">"@dimen/margin_bottom"</span> /&gt;</span>

        <span class="hljs-comment">&lt;!-- æµ‹è¯•1æŒ‰é’® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"æµ‹è¯•1"</span>
            <span class="hljs-attr">android:backgroundTint</span>=<span class="hljs-string">"#8000FF"</span>
            <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"#FFFFFF"</span>
            <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"@dimen/dimen16"</span>
            <span class="hljs-attr">android:layout_marginBottom</span>=<span class="hljs-string">"@dimen/margin_bottom"</span> /&gt;</span>

        <span class="hljs-comment">&lt;!-- æµ‹è¯•NæŒ‰é’® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"æµ‹è¯•N"</span>
            <span class="hljs-attr">android:backgroundTint</span>=<span class="hljs-string">"#8000FF"</span>
            <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"#FFFFFF"</span>
            <span class="hljs-attr">android:padding</span>=<span class="hljs-string">"@dimen/dimen16"</span> /&gt;</span>

    <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
</code></pre>
<h4 data-id="heading-8">ç¬¬äº”æ­¥ï¼šæ•ˆæœå±•ç¤º</h4>
<p>æœ€ç»ˆè¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°åœ¨ä¸åŒåˆ†è¾¨ç‡çš„è®¾å¤‡ä¸Šï¼ŒUI å…ƒç´ çš„å¤§å°ä¼šæ ¹æ®å±å¹•å®½åº¦è‡ªåŠ¨é€‚é…ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cfc87dc442204d5899fe6c766ec4d028~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHE5NTI3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769512168&amp;x-signature=aoMXnBNLKSOT2fY4X4KR6d4%2BLoA%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-9">æ€»ç»“</h3>
<p>ä½¿ç”¨ ScreenMatch æ’ä»¶è¿›è¡Œæœ€å°å®½åº¦é€‚é…çš„ä¼˜åŠ¿åœ¨äºï¼š</p>
<ol>
<li><strong>é›¶ä¾èµ–</strong>ï¼šä¸éœ€è¦å¼•å…¥ä»»ä½•ç¬¬ä¸‰æ–¹åº“ã€‚</li>
<li><strong>é«˜æ€§èƒ½</strong>ï¼šåŸºäºç³»ç»ŸåŸç”Ÿèµ„æºåŠ è½½æœºåˆ¶ï¼Œæ— è¿è¡Œæ—¶æ€§èƒ½æŸè€—ã€‚</li>
<li><strong>æ˜“ç»´æŠ¤</strong>ï¼šåªéœ€ç»´æŠ¤ä¸€ä»½åŸºå‡† <code>dimens.xml</code>ï¼Œå…¶ä½™æ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆã€‚</li>
</ol>
<p>å¸Œæœ›è¿™ç¯‡æ•™ç¨‹èƒ½å¸®åˆ°å¤§å®¶ï¼Œå¦‚æœæœ‰ç–‘é—®æ¬¢è¿ç•™è¨€äº¤æµï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘åœ¨ Windows ä¸ŠæŠ˜è…¾ PostgreSQL çš„çœŸå®ç»å†ï¼šä»å®‰è£…å¤±è´¥åˆ°è·‘é€šç¬¬ä¸€å¼ è¡¨]]></title>    <link>https://juejin.cn/post/7597283981185351732</link>    <guid>https://juejin.cn/post/7597283981185351732</guid>    <pubDate>2026-01-20T15:30:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597283981185351732" data-draft-id="7597243334177636392" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘åœ¨ Windows ä¸ŠæŠ˜è…¾ PostgreSQL çš„çœŸå®ç»å†ï¼šä»å®‰è£…å¤±è´¥åˆ°è·‘é€šç¬¬ä¸€å¼ è¡¨"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-20T15:30:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ— æ•Œçš„æ‹–æ‹‰æ–¯æ—‹é£"/> <meta itemprop="url" content="https://juejin.cn/user/951508170179208"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘åœ¨ Windows ä¸ŠæŠ˜è…¾ PostgreSQL çš„çœŸå®ç»å†ï¼šä»å®‰è£…å¤±è´¥åˆ°è·‘é€šç¬¬ä¸€å¼ è¡¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/951508170179208/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ— æ•Œçš„æ‹–æ‹‰æ–¯æ—‹é£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T15:30:10.000Z" title="Tue Jan 20 2026 15:30:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œä¸ºä¸€ä¸ªçº¯ Windows å¼€å‘è€…ï¼ˆä¸ç”¨ WSLï¼Œä¸ç”¨ Dockerï¼‰ï¼Œå»å¹´æˆ‘æƒ³ç»™è‡ªå·±çš„åšå®¢é¡¹ç›®é…ä¸ªæ­£ç»æ•°æ®åº“ã€‚å¬è¯´ PostgreSQL æ¯” SQLite å¼ºï¼Œæ¯” MySQL â€œæ›´ä¸¥è°¨â€ï¼Œé‚£å°±è¯•è¯•å§ã€‚</p>
<p>ç»“æœå…‰æ˜¯<strong>å®‰è£…</strong>å°±è®©æˆ‘é‡è£…äº†ä¸‰æ¬¡ã€‚</p>
<h2 data-id="heading-0">ç¬¬ä¸€æ¬¡å®‰è£…ï¼šå®˜ç½‘ä¸‹è½½ï¼Œä½†å¡åœ¨â€œåˆ›å»ºè¶…çº§ç”¨æˆ·â€</h2>
<p>æˆ‘å»äº†Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.postgresql.org%2Fdownload%2Fwindows%2F" target="_blank" title="https://www.postgresql.org/download/windows/" ref="nofollow noopener noreferrer">www.postgresql.org/download/wiâ€¦</a><br/>
ç‚¹è¿›å»ï¼Œå®ƒæ¨èç”¨Â <strong>EnterpriseDB å®‰è£…åŒ…</strong>ï¼ˆä¹Ÿå°±æ˜¯Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.enterprisedb.com%2Fdownloads%2Fpostgres-postgresql-downloads" target="_blank" title="https://www.enterprisedb.com/downloads/postgres-postgresql-downloads" ref="nofollow noopener noreferrer">www.enterprisedb.com/downloads/pâ€¦</a>ï¼‰ã€‚</p>
<p>ä¸‹è½½çš„æ˜¯ä¸ªÂ <code>.exe</code>Â æ–‡ä»¶ï¼ŒåŒå‡»è¿è¡Œï¼Œå›¾å½¢åŒ–å®‰è£…ç•Œé¢ï¼Œçœ‹ç€æŒºå‹å¥½ã€‚</p>
<p>ä¸€è·¯ä¸‹ä¸€æ­¥ï¼Œç›´åˆ°è¿™ä¸€æ­¥ï¼š</p>
<blockquote>
<p><strong>Password for superuser 'postgres':</strong><br/>
ï¼ˆè¯·è¾“å…¥è¶…çº§ç”¨æˆ· postgres çš„å¯†ç ï¼‰</p>
</blockquote>
<p>æˆ‘éšä¾¿è¾“äº†ä¸ªÂ <code>123456</code>ï¼Œç»§ç»­ã€‚</p>
<p>ç„¶åå®ƒå¼€å§‹å®‰è£…ï¼Œè¿›åº¦æ¡èµ°å®Œï¼Œæœ€åå¼¹å‡ºä¸€ä¸ªæ¡†ï¼š</p>
<blockquote>
<p><strong>Failed to load SQL modules into the database cluster</strong></p>
</blockquote>
<p>æˆ‘å‚»äº†ã€‚é‡è¯•ï¼Ÿä¸è¡Œã€‚å¸è½½é‡è£…ï¼Ÿè¿˜æ˜¯è¿™ä¸ªé”™ã€‚</p>
<p>åæ¥æ‰çŸ¥é“â€”â€”<strong>Windows é˜²ç«å¢™æˆ–æ€æ¯’è½¯ä»¶ï¼ˆæ¯”å¦‚ 360ã€Defenderï¼‰å¯èƒ½é˜»æ­¢äº† PostgreSQL åˆå§‹åŒ–æ•°æ®åº“</strong>ã€‚</p>
<h3 data-id="heading-1">âœ… æ­£ç¡®åšæ³•ï¼ˆäº²æµ‹æœ‰æ•ˆï¼‰ï¼š</h3>
<ol>
<li><strong>å…³é—­æ‰€æœ‰æ€æ¯’è½¯ä»¶</strong>ï¼ˆä¸´æ—¶ç¦ç”¨ Windows Defender å®æ—¶ä¿æŠ¤ï¼‰</li>
<li><strong>å³é”®å®‰è£…ç¨‹åº â†’ â€œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œâ€</strong></li>
<li>å¯†ç åˆ«å¤ªç®€å•ï¼ˆæˆ‘åæ¥æ”¹æˆÂ <code>Postgres@2024</code>ï¼Œå¸¦å¤§å°å†™+ç¬¦å·ï¼‰</li>
<li>å®‰è£…è·¯å¾„<strong>ä¸è¦æœ‰ä¸­æ–‡æˆ–ç©ºæ ¼</strong>ï¼ˆæ¯”å¦‚åˆ«è£…åœ¨Â <code>D:\æˆ‘çš„è½¯ä»¶</code>ï¼‰</li>
</ol>
<p>ç¬¬äºŒæ¬¡å®‰è£…ï¼ŒæˆåŠŸäº†ï¼</p>
<hr/>
<h2 data-id="heading-2">å¯åŠ¨ pgAdminï¼šç»ˆäºçœ‹åˆ°å›¾å½¢ç•Œé¢</h2>
<p>å®‰è£…å®Œæˆåï¼Œå¼€å§‹èœå•é‡Œå¤šäº†ä¸¤ä¸ªä¸œè¥¿ï¼š</p>
<ul>
<li><strong>SQL Shell (psql)</strong> Â â†’ å‘½ä»¤è¡Œ</li>
<li><strong>pgAdmin 4</strong>Â â†’ å›¾å½¢ç®¡ç†å·¥å…·ï¼ˆæµè§ˆå™¨æ‰“å¼€ï¼‰</li>
</ul>
<p>æˆ‘ç‚¹äº†Â <strong>pgAdmin 4</strong>ï¼Œè‡ªåŠ¨å¼¹å‡ºæµè§ˆå™¨ï¼Œåœ°å€æ˜¯Â <code>http://127.0.0.1:5050</code>ã€‚</p>
<p>ç¬¬ä¸€æ¬¡ç™»å½•è¦è®¾Â <strong>pgAdmin çš„ç™»å½•è´¦å·</strong>ï¼ˆä¸æ˜¯æ•°æ®åº“è´¦å·ï¼ï¼‰ï¼Œæˆ‘åˆè¾“äº†ä¸ªé‚®ç®±å’Œå¯†ç ã€‚</p>
<p>è¿›å»åï¼Œå·¦è¾¹æœ‰ä¸ªÂ <strong>Servers â†’ PostgreSQL 16</strong>ï¼Œç‚¹å¼€è¦è¾“åˆšæ‰è®¾çš„Â <strong>æ•°æ®åº“è¶…çº§ç”¨æˆ·å¯†ç </strong>ï¼ˆå°±æ˜¯å®‰è£…æ—¶é‚£ä¸ªÂ <code>postgres</code>Â çš„å¯†ç ï¼‰ã€‚</p>
<p>è¾“å¯¹äº†ï¼Œå°±èƒ½çœ‹åˆ°æ•°æ®åº“åˆ—è¡¨ã€‚</p>
<blockquote>
<p>ğŸ’¡ æé†’ï¼š<strong>pgAdmin è´¦å· â‰  æ•°æ®åº“è´¦å·</strong>ï¼Œå¾ˆå¤šäººåœ¨è¿™é‡Œæ··æ·†ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-3">ç”¨ psql å‘½ä»¤è¡Œï¼šé»‘çª—å£å…¶å®æŒºå¥½ç”¨</h2>
<p>è™½ç„¶ pgAdmin å¾ˆç›´è§‚ï¼Œä½†æˆ‘è¿˜æ˜¯æƒ³è¯•è¯•å‘½ä»¤è¡Œâ€”â€”å› ä¸ºéƒ¨ç½²æ—¶æœåŠ¡å™¨ä¸Šåªæœ‰å‘½ä»¤è¡Œã€‚</p>
<p>åœ¨å¼€å§‹èœå•æœÂ  <strong>â€œSQL Shell (psql)â€</strong> ï¼Œç‚¹å¼€ï¼Œä¼šå¼¹å‡ºå‡ ä¸ªé…ç½®ï¼š</p>
<p>text</p>
<pre><code class="hljs language-ini" lang="ini">Server <span class="hljs-section">[localhost]</span>:
Database <span class="hljs-section">[postgres]</span>:
Port <span class="hljs-section">[5432]</span>:
Username <span class="hljs-section">[postgres]</span>:
Password for user postgres:
</code></pre>
<p>å…¨éƒ¨é»˜è®¤å›è½¦ï¼Œæœ€åè¾“å¯†ç ï¼ˆå°±æ˜¯å®‰è£…æ—¶è®¾çš„é‚£ä¸ªï¼‰ã€‚</p>
<p>æˆåŠŸè¿›å…¥åï¼Œçœ‹åˆ°ï¼š</p>
<p>text</p>
<pre><code class="hljs language-makefile" lang="makefile">postgres=<span class="hljs-comment">#</span>
</code></pre>
<p>è¿™æ—¶å€™å°±å¯ä»¥æ•² SQL äº†ï¼</p>
<p>å¸¸ç”¨å‘½ä»¤ï¼ˆæ³¨æ„å‰é¢æ˜¯åæ–œæ Â ``ï¼Œä¸æ˜¯Â <code>/</code>ï¼‰ï¼š</p>
<p>è¡¨æ ¼</p>





























<table><thead><tr><th>å‘½ä»¤</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>\l</code></td><td>åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“</td></tr><tr><td><code>\c xuebi</code></td><td>è¿æ¥åˆ°å«Â <code>xuebi</code>Â çš„æ•°æ®åº“</td></tr><tr><td><code>\dt</code></td><td>æ˜¾ç¤ºå½“å‰æ•°æ®åº“æ‰€æœ‰è¡¨</td></tr><tr><td><code>\d users</code></td><td>æŸ¥çœ‹Â <code>users</code>Â è¡¨ç»“æ„</td></tr><tr><td><code>\q</code></td><td>é€€å‡º</td></tr></tbody></table>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼šè¿™äº›å‘½ä»¤<strong>ä¸èƒ½åŠ åˆ†å·</strong>ï¼<code>\l;</code>Â æ˜¯é”™çš„ï¼Œå¿…é¡»Â <code>\l</code></p>
</blockquote>
<hr/>
<h2 data-id="heading-4">å»ºæ•°æ®åº“å’Œè¡¨ï¼šè¸©äº†å­—æ®µå‘½åçš„å‘</h2>
<p>æˆ‘æƒ³å»ºä¸ªè‡ªå·±çš„æ•°æ®åº“ï¼š</p>
<p>sql</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> DATABASE xuebi <span class="hljs-keyword">WITH</span> OWNER postgres ENCODING <span class="hljs-string">'UTF8'</span>;
</code></pre>
<p>ç„¶åÂ <code>\c xuebi</code>Â åˆ‡è¿‡å»ã€‚</p>
<p>æ¥ç€å»ºÂ <code>users</code>Â è¡¨ï¼š</p>
<p>sql</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> users (
    id <span class="hljs-type">BIGINT</span> GENERATED <span class="hljs-keyword">BY</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">IDENTITY</span> <span class="hljs-keyword">PRIMARY</span> KEY,
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">UNIQUE</span>,
    password <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    created_at TIMESTAMPTZ <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
);
</code></pre>
<p>æ²¡é—®é¢˜ã€‚</p>
<p>ä½†å»ºÂ <code>posts</code>Â è¡¨æ—¶ï¼Œæˆ‘å†™äº†ï¼š</p>
<p>sql</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> posts (
    id <span class="hljs-type">BIGINT</span> GENERATED <span class="hljs-keyword">BY</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">IDENTITY</span> <span class="hljs-keyword">PRIMARY</span> KEY,
    title <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    content TEXT,
    userId <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,  <span class="hljs-comment">-- è¿™é‡ŒåŸ‹é›·äº†ï¼</span>
    <span class="hljs-keyword">FOREIGN</span> KEY (userId) <span class="hljs-keyword">REFERENCES</span> users(id)
);
</code></pre>
<p>æ’å…¥æ•°æ®æ—¶å‡ºé”™ï¼š</p>
<p>sql</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> posts (title, content, userId) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'æµ‹è¯•'</span>, <span class="hljs-string">'å†…å®¹'</span>, <span class="hljs-number">1</span>);
</code></pre>
<p>æŠ¥é”™ï¼š</p>
<p>text</p>
<pre><code class="hljs language-sql" lang="sql">ERROR: <span class="hljs-keyword">column</span> "userid" does <span class="hljs-keyword">not</span> exist
</code></pre>
<p>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºÂ <strong>PostgreSQL åœ¨æ²¡åŠ å¼•å·çš„æƒ…å†µä¸‹ï¼Œä¼šæŠŠå­—æ®µåè‡ªåŠ¨è½¬æˆå°å†™</strong>ï¼<br/>
ä½ å†™Â <code>userId</code>ï¼Œå®ƒå­˜æˆÂ <code>userid</code>ï¼›ä½†æ’å…¥æ—¶åˆæŒ‰Â <code>userId</code>Â æ‰¾ï¼Œæ‰¾ä¸åˆ°ã€‚</p>
<h3 data-id="heading-5">âœ… è§£å†³æ–¹æ¡ˆï¼ˆäºŒé€‰ä¸€ï¼‰ï¼š</h3>
<h4 data-id="heading-6">æ–¹æ¡ˆä¸€ï¼ˆæ¨èï¼‰ï¼šå…¨ç”¨ä¸‹åˆ’çº¿å‘½åï¼ˆWindows å¼€å‘è€…æœ€çœå¿ƒï¼‰</h4>
<p>sql</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å»ºè¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> posts (
    id <span class="hljs-type">BIGINT</span> GENERATED <span class="hljs-keyword">BY</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">AS</span> <span class="hljs-keyword">IDENTITY</span> <span class="hljs-keyword">PRIMARY</span> KEY,
    title <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    content TEXT,
    user_id <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,  <span class="hljs-comment">-- å…¨å°å†™ + ä¸‹åˆ’çº¿</span>
    <span class="hljs-keyword">FOREIGN</span> KEY (user_id) <span class="hljs-keyword">REFERENCES</span> users(id)
);

<span class="hljs-comment">-- æ’å…¥</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> posts (title, content, user_id) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'æµ‹è¯•'</span>, <span class="hljs-string">'å†…å®¹'</span>, <span class="hljs-number">1</span>);
</code></pre>
<h4 data-id="heading-7">æ–¹æ¡ˆäºŒï¼šåŠ åŒå¼•å·ä¿ç•™å¤§å°å†™ï¼ˆéº»çƒ¦ï¼Œä½†èƒ½åŒ¹é…å‰ç«¯å­—æ®µï¼‰</h4>
<p>sql</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å»ºè¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> posts (
    "userId" <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,  <span class="hljs-comment">-- å¿…é¡»åŠ å¼•å·</span>
    <span class="hljs-keyword">FOREIGN</span> KEY ("userId") <span class="hljs-keyword">REFERENCES</span> users(id)
);

<span class="hljs-comment">-- æ’å…¥ä¹Ÿå¾—åŠ å¼•å·ï¼ˆå…¶å®åœ¨ INSERT é‡Œä¸ç”¨ï¼Œä½† SELECT è¦ï¼‰</span>
<span class="hljs-keyword">SELECT</span> "userId" <span class="hljs-keyword">FROM</span> posts;
</code></pre>
<blockquote>
<p>ğŸ™…â€â™‚ï¸ æˆ‘çš„å»ºè®®ï¼š<strong>åœ¨ Windows + Node.js é¡¹ç›®é‡Œï¼Œç›´æ¥ç”¨Â <code>user_id</code></strong>ã€‚å‰ç«¯æ‹¿åˆ° JSON åï¼Œç”¨ Axios çš„Â <code>transformResponse</code>Â æˆ– TypeScript ç±»å‹æ˜ å°„è½¬æˆÂ <code>userId</code>Â å°±è¡Œï¼Œæ•°æ®åº“å±‚ä¿æŒç®€æ´ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-8">è¿æ¥æ•°æ®åº“ï¼šNode.js é‡Œæ€ä¹ˆé…ï¼Ÿ</h2>
<p>æˆ‘åœ¨é¡¹ç›®é‡Œè£…äº†Â <code>pg</code>ï¼ˆnode-postgresï¼‰ï¼š</p>
<p>bash</p>
<pre><code class="hljs">npm install pg
</code></pre>
<p>ç„¶åå†™è¿æ¥ä»£ç ï¼š</p>
<p>js</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-type">const</span> { <span class="hljs-built_in">Client</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'pg'</span>);

<span class="hljs-type">const</span> client = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Client</span>({
  host: <span class="hljs-string">'localhost'</span>,
  port: <span class="hljs-number">5432</span>,
  user: <span class="hljs-string">'postgres'</span>,
  password: <span class="hljs-string">'ä½ å®‰è£…æ—¶è®¾çš„å¯†ç '</span>,
  database: <span class="hljs-string">'xuebi'</span>
});

client.<span class="hljs-built_in">connect</span>();
</code></pre>
<p>ç¬¬ä¸€æ¬¡è·‘ï¼ŒæŠ¥é”™ï¼š</p>
<p>text</p>
<pre><code class="hljs language-rust" lang="rust">password authentication failed <span class="hljs-keyword">for</span> <span class="hljs-title class_">user</span> <span class="hljs-string">"postgres"</span>
</code></pre>
<p>æŸ¥äº†åŠå¤©ï¼Œå‘ç°æ˜¯Â <strong>pg_hba.conf é…ç½®é—®é¢˜</strong>ã€‚ä½†ä½œä¸ºæ–°æ‰‹ï¼Œæˆ‘ä¸æ•¢ä¹±æ”¹é…ç½®æ–‡ä»¶ã€‚</p>
<h3 data-id="heading-9">âœ… æœ€ç®€å•çš„åŠæ³•ï¼š</h3>
<p>åœ¨ pgAdmin é‡Œï¼š</p>
<ol>
<li>å³é”®ä½ çš„æ•°æ®åº“ â†’Â <strong>Properties</strong></li>
<li>çœ‹Â <strong>Connection</strong>Â æ ‡ç­¾é¡µï¼Œç¡®è®¤ç«¯å£æ˜¯ 5432</li>
<li>ç¡®ä¿ä½ ç”¨çš„å¯†ç å°±æ˜¯å®‰è£…æ—¶è®¾çš„é‚£ä¸ª</li>
</ol>
<p>æˆ–è€…ï¼Œç›´æ¥åœ¨ psql é‡Œæ”¹å¯†ç ï¼š</p>
<p>sql</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> postgres PASSWORD <span class="hljs-string">'æ–°å¯†ç '</span>;
</code></pre>
<hr/>
<h2 data-id="heading-10">æ€»ç»“ï¼šWindows ä¸Šç”¨ PostgreSQL çš„çœŸå¿ƒè¯</h2>
<ul>
<li>âœ…Â <strong>ç”¨ EnterpriseDB å®‰è£…åŒ…</strong>ï¼Œåˆ«è‡ªå·±ç¼–è¯‘</li>
<li>âœ…Â <strong>å…³æ€æ¯’è½¯ä»¶ + ç®¡ç†å‘˜è¿è¡Œ</strong>ï¼Œé¿å…åˆå§‹åŒ–å¤±è´¥</li>
<li>âœ…Â <strong>å­—æ®µåå…¨ç”¨å°å†™+ä¸‹åˆ’çº¿</strong>ï¼ˆ<code>user_id</code>ï¼‰ï¼Œçœæ‰å¼•å·çƒ¦æ¼</li>
<li>âœ…Â <strong>pgAdmin çœ‹ç»“æ„ï¼Œpsql è·‘è„šæœ¬</strong>ï¼Œä¸¤è€…é…åˆ</li>
<li>âŒ åˆ«ä¿¡ç½‘ä¸Šé‚£äº›Â <code>sudo service postgresql start</code>Â â€”â€” è¿™æ˜¯ Linux å‘½ä»¤ï¼ŒWindows ç”¨ä¸äº†</li>
</ul>
<p>ç°åœ¨ï¼Œæˆ‘çš„åšå®¢åå°ç¨³ç¨³è·‘åœ¨ PostgreSQL ä¸Šã€‚è™½ç„¶åªæ˜¯æœ¬åœ°å¼€å‘ï¼Œä½†æ¯æ¬¡Â <code>\dt</code>Â çœ‹åˆ°é‚£å‡ å¼ è¡¨ï¼Œå°±è§‰å¾—â€”â€”<strong>æ•°æ®æ˜¯çœŸçš„ï¼Œä¸æ˜¯å†…å­˜é‡Œçš„å¹»è§‰</strong>ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿåœ¨ Windows ä¸Šèµ·æ­¥ï¼Œåˆ«æ€•ã€‚è£…ä¸€æ¬¡ï¼Œé”™å‡ æ¬¡ï¼Œæ”¹å‡ æ¬¡ï¼Œå°±æˆäº†ã€‚</p>
<p>åŠ æ²¹ï¼Œå…„å¼Ÿã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android U è‡ªç”±çª—å£(æµ®çª—)â€”â€”è¡¥å……]]></title>    <link>https://juejin.cn/post/7597283981184712756</link>    <guid>https://juejin.cn/post/7597283981184712756</guid>    <pubDate>2026-01-20T11:23:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597283981184712756" data-draft-id="7597266967138058274" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android U è‡ªç”±çª—å£(æµ®çª—)â€”â€”è¡¥å……"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-20T11:23:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="yiè¯ºåƒé‡‘"/> <meta itemprop="url" content="https://juejin.cn/user/4464480371870584"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android U è‡ªç”±çª—å£(æµ®çª—)â€”â€”è¡¥å……
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4464480371870584/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    yiè¯ºåƒé‡‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T11:23:33.000Z" title="Tue Jan 20 2026 11:23:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç”Ÿå‘½å‘¨æœŸç›¸å…³</h2>
<p>è¿™é‡Œè¿˜æ˜¯ä»¥å¤šä»»åŠ¡ä¸­å¯åŠ¨è‡ªç”±çª—å£ä¸ºä¾‹</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//è¿›å…¥å¤šä»»åŠ¡</span>
<span class="hljs-number">01</span>-<span class="hljs-number">20</span> <span class="hljs-number">10</span>:<span class="hljs-number">36</span>:<span class="hljs-number">00.892</span>  <span class="hljs-number">1399</span>  <span class="hljs-number">1399</span> I wm_on_restart_called: [<span class="hljs-number">77094127</span>,com.android.launcher3.uioverrides.QuickstepLauncher,performRestart,<span class="hljs-number">0</span>]
<span class="hljs-number">01</span>-<span class="hljs-number">20</span> <span class="hljs-number">10</span>:<span class="hljs-number">36</span>:<span class="hljs-number">00.917</span>  <span class="hljs-number">1399</span>  <span class="hljs-number">1399</span> I wm_on_start_called: [<span class="hljs-number">77094127</span>,com.android.launcher3.uioverrides.QuickstepLauncher,handleStartActivity,<span class="hljs-number">25</span>]
<span class="hljs-number">01</span>-<span class="hljs-number">20</span> <span class="hljs-number">10</span>:<span class="hljs-number">36</span>:<span class="hljs-number">00.920</span>  <span class="hljs-number">1399</span>  <span class="hljs-number">1399</span> I wm_on_resume_called: [<span class="hljs-number">77094127</span>,com.android.launcher3.uioverrides.QuickstepLauncher,RESUME_ACTIVITY,<span class="hljs-number">0</span>]
<span class="hljs-number">01</span>-<span class="hljs-number">20</span> <span class="hljs-number">10</span>:<span class="hljs-number">36</span>:<span class="hljs-number">01.011</span>  <span class="hljs-number">1399</span>  <span class="hljs-number">1399</span> I wm_on_top_resumed_gained_called: [<span class="hljs-number">77094127</span>,com.android.launcher3.uioverrides.QuickstepLauncher,topStateChangedWhenResumed]

<span class="hljs-comment">//å¯åŠ¨è‡ªç”±çª—å£</span>
<span class="hljs-number">01</span>-<span class="hljs-number">20</span> <span class="hljs-number">10</span>:<span class="hljs-number">36</span>:<span class="hljs-number">26.706</span>  <span class="hljs-number">1399</span>  <span class="hljs-number">1399</span> I wm_on_top_resumed_lost_called: [<span class="hljs-number">77094127</span>,com.android.launcher3.uioverrides.QuickstepLauncher,topStateChangedWhenResumed]
<span class="hljs-number">01</span>-<span class="hljs-number">20</span> <span class="hljs-number">10</span>:<span class="hljs-number">36</span>:<span class="hljs-number">26.736</span>  <span class="hljs-number">2378</span>  <span class="hljs-number">2378</span> I wm_on_stop_called: [<span class="hljs-number">180634051</span>,com.android.messaging.ui.conversationlist.ConversationListActivity,handleRelaunchActivity,<span class="hljs-number">0</span>]
<span class="hljs-number">01</span>-<span class="hljs-number">20</span> <span class="hljs-number">10</span>:<span class="hljs-number">36</span>:<span class="hljs-number">26.756</span>  <span class="hljs-number">2378</span>  <span class="hljs-number">2378</span> I wm_on_destroy_called: [<span class="hljs-number">180634051</span>,com.android.messaging.ui.conversationlist.ConversationListActivity,performDestroy,<span class="hljs-number">10</span>]
<span class="hljs-number">01</span>-<span class="hljs-number">20</span> <span class="hljs-number">10</span>:<span class="hljs-number">36</span>:<span class="hljs-number">26.930</span>  <span class="hljs-number">2378</span>  <span class="hljs-number">2378</span> I wm_on_create_called: [<span class="hljs-number">180634051</span>,com.android.messaging.ui.conversationlist.ConversationListActivity,performCreate,<span class="hljs-number">64</span>]
<span class="hljs-number">01</span>-<span class="hljs-number">20</span> <span class="hljs-number">10</span>:<span class="hljs-number">36</span>:<span class="hljs-number">26.938</span>  <span class="hljs-number">2378</span>  <span class="hljs-number">2378</span> I wm_on_start_called: [<span class="hljs-number">180634051</span>,com.android.messaging.ui.conversationlist.ConversationListActivity,handleStartActivity,<span class="hljs-number">0</span>]
<span class="hljs-number">01</span>-<span class="hljs-number">20</span> <span class="hljs-number">10</span>:<span class="hljs-number">36</span>:<span class="hljs-number">27.006</span>  <span class="hljs-number">2378</span>  <span class="hljs-number">2378</span> I wm_on_resume_called: [<span class="hljs-number">180634051</span>,com.android.messaging.ui.conversationlist.ConversationListActivity,RESUME_ACTIVITY,<span class="hljs-number">53</span>]
<span class="hljs-number">01</span>-<span class="hljs-number">20</span> <span class="hljs-number">10</span>:<span class="hljs-number">36</span>:<span class="hljs-number">27.072</span>  <span class="hljs-number">2378</span>  <span class="hljs-number">2378</span> I wm_on_top_resumed_gained_called: [<span class="hljs-number">180634051</span>,com.android.messaging.ui.conversationlist.ConversationListActivity,topStateChangedWhenResumed]

</code></pre>
<p>å‘ç° å¯åŠ¨è‡ªç”±çª—å£æ—¶åº•å±‚activityï¼ˆlauncher3ï¼‰ä¸ä¼šè¿›è¡Œpauseã€‚
ä¸€èˆ¬æ¥è¯´å½“ä¸€ä¸ªåº”ç”¨resumeï¼Œé‚£ä¹ˆå½“å‰åº”ç”¨å°±ä¼šèµ°pauseæµç¨‹ï¼Œæˆ‘ä»¬è¿™é‡Œlauncher3ä¸ºä»€ä¹ˆæ²¡æœ‰èµ°pauseå‘¢ï¼Ÿæˆ‘ä»¬ç®€å•è·Ÿè¸ªä¸€ä¸‹æµç¨‹ã€‚
ä»£ç è·¯å¾„ï¼šframeworks/base/services/core/java/com/android/server/wm/TaskFragment.java</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">resumeTopActivity</span><span class="hljs-params">(ActivityRecord prev, ActivityOptions options,
            <span class="hljs-type">boolean</span> deferPause)</span> {
            ......
            <span class="hljs-type">boolean</span> <span class="hljs-variable">pausing</span> <span class="hljs-operator">=</span> !deferPause &amp;&amp; taskDisplayArea.pauseBackTasks(next);
</code></pre>
<p>å…ˆçœ‹è¿™ä¸ªresumeæµç¨‹ï¼Œè¿™ä¼šå»åˆ¤æ–­æ˜¯å¦éœ€è¦pauseã€‚
è¿™é‡Œ<code>deferPause</code>çš„å€¼æ˜¯é€šè¿‡Task.resumeTopActivityUncheckedLockedæ–¹æ³•ä¸­ä¼ é€’è¿‡æ¥çš„ï¼Œå…¶å€¼ä¸ºfalseï¼Œå› æ­¤<code>!deferPause</code>ä¸ºtrueã€‚
<code>next</code>æŒ‡çš„æ˜¯è¦å¯åŠ¨çš„activityï¼ˆæˆ‘ä»¬è¿™é‡Œæ˜¯ConversationListActivityï¼‰ã€‚</p>
<p>ä»£ç è·¯å¾„ï¼šframeworks/base/services/core/java/com/android/server/wm/TaskDisplayArea.java</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-comment">/**
     * Pause all activities in either all of the root tasks or just the back root tasks. This is
     * done before resuming a new activity and to make sure that previously active activities are
     * paused in root tasks that are no longer visible or in pinned windowing mode. This does not
     * pause activities in visible root tasks, so if an activity is launched within the same root
     * task, hen we should explicitly pause that root task's top activity.
     *
     * <span class="hljs-doctag">@param</span> resuming    The resuming activity.
     * <span class="hljs-doctag">@return</span> {<span class="hljs-doctag">@code</span> true} if any activity was paused as a result of this call.
     */</span>
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">pauseBackTasks</span><span class="hljs-params">(ActivityRecord resuming)</span> {
        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span>[] someActivityPaused = {<span class="hljs-number">0</span>};
        forAllLeafTasks(leafTask -&gt; {
            <span class="hljs-comment">// Check if the direct child resumed activity in the leaf task needed to be paused if</span>
            <span class="hljs-comment">// the leaf task is not a leaf task fragment.</span>
            <span class="hljs-comment">//task fragmentåœºæ™¯ï¼Œæš‚ä¸å…³æ³¨</span>
            <span class="hljs-keyword">if</span> (!leafTask.isLeafTaskFragment()) {
                <span class="hljs-keyword">final</span> <span class="hljs-type">ActivityRecord</span> <span class="hljs-variable">top</span> <span class="hljs-operator">=</span> topRunningActivity();
                <span class="hljs-keyword">final</span> <span class="hljs-type">ActivityRecord</span> <span class="hljs-variable">resumedActivity</span> <span class="hljs-operator">=</span> leafTask.getResumedActivity();
                <span class="hljs-keyword">if</span> (resumedActivity != <span class="hljs-literal">null</span> &amp;&amp; top.getTaskFragment() != leafTask) {
                    <span class="hljs-comment">// Pausing the resumed activity because it is occluded by other task fragment.</span>
                    <span class="hljs-keyword">if</span> (leafTask.startPausing(<span class="hljs-literal">false</span> <span class="hljs-comment">/* uiSleeping*/</span>, resuming, <span class="hljs-string">"pauseBackTasks"</span>)) {
                        someActivityPaused[<span class="hljs-number">0</span>]++;
                    }
                }
            }
            
            <span class="hljs-comment">//éå†æ‰€æœ‰leafTaskèŠ‚ç‚¹ï¼Œå³æœ€åº•ç«¯TaskèŠ‚ç‚¹</span>
            leafTask.forAllLeafTaskFragments((taskFrag) -&gt; {
                <span class="hljs-keyword">final</span> <span class="hljs-type">ActivityRecord</span> <span class="hljs-variable">resumedActivity</span> <span class="hljs-operator">=</span> taskFrag.getResumedActivity();
                <span class="hljs-comment">//åˆ¤æ–­å½“å‰taskFragæ˜¯å¦æœ‰å­˜åœ¨resumedçš„Activityï¼Œå¹¶ä¸”å³å°†å¯åŠ¨çš„Activityä¸èƒ½resumed</span>
                <span class="hljs-keyword">if</span> (resumedActivity != <span class="hljs-literal">null</span> &amp;&amp; !taskFrag.canBeResumed(resuming)) {
                     <span class="hljs-comment">//æš‚åœå½“å‰å­˜åœ¨resumedçš„Activity</span>
                    <span class="hljs-keyword">if</span> (taskFrag.startPausing(<span class="hljs-literal">false</span> <span class="hljs-comment">/* uiSleeping*/</span>, resuming, <span class="hljs-string">"pauseBackTasks"</span>)) {
                        <span class="hljs-comment">//è®°å½•æš‚åœçš„Activity</span>
                        someActivityPaused[<span class="hljs-number">0</span>]++;
                    }
                }
            }, <span class="hljs-literal">true</span> <span class="hljs-comment">/* traverseTopToBottom */</span>);
        }, <span class="hljs-literal">true</span> <span class="hljs-comment">/* traverseTopToBottom */</span>);
        <span class="hljs-keyword">return</span> someActivityPaused[<span class="hljs-number">0</span>] &gt; <span class="hljs-number">0</span>;
    }
</code></pre>
<p>è¿™ä¸ªæ–¹æ³•ä¼šéå†TaskDisplayAreaä¸‹çš„æ‰€æœ‰leafTaskèŠ‚ç‚¹ï¼Œå³æœ€åº•ç«¯TaskèŠ‚ç‚¹</p>
<ol>
<li>åˆ¤æ–­å½“å‰Taskçš„Activityæ˜¯å¦å­˜åœ¨resumedçŠ¶æ€ï¼Œä¸”å³å°†å¯åŠ¨çš„Activityä¸èƒ½è¢«resumed</li>
<li>æš‚åœå½“å‰å­˜åœ¨resumedçš„Activityï¼Œè‹¥æš‚åœæˆåŠŸï¼Œç»™å‚æ•°<code>someActivityPaused</code>è®¡æ•°</li>
</ol>
<p>å¦‚ä¸‹å›¾åœˆçš„taskèŠ‚ç‚¹æ˜¯ä¼šéå†çš„taskèŠ‚ç‚¹ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/934a05e7e6bb40ba8f00e7f7f367d0aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeWnor7rljYPph5E=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769513012&amp;x-signature=VPFXrtR2IEWcFWpXH9Vw%2F%2FREX2g%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
åœ¨è¯¥ç•Œé¢å½“æˆ‘ä»¬ç‚¹å‡»å¯åŠ¨è‡ªç”±çª—å£åå¼€å§‹æ¡ä»¶åˆ¤æ–­<code>resumedActivity != null &amp;&amp; !taskFrag.canBeResumed(resuming)</code>ã€‚
<code>taskFrag.getResumedActivity()</code>è·å–æ­¤æ—¶æ˜¯resumedçŠ¶æ€çš„taskï¼Œå½“éå†åˆ°æ¡Œé¢Taskæ—¶ï¼Œç”±äºæˆ‘ä»¬è¦ä»å¤šä»»åŠ¡è¿›å…¥åˆ°è‡ªç”±çª—å£ï¼Œè€Œæ­¤æ—¶å¤šä»»åŠ¡ç•Œé¢ä¸ºresumedçŠ¶æ€ï¼Œå­˜åœ¨resumedçŠ¶æ€çš„Activityï¼Œå› æ­¤å‚æ•°<code>resumedActivity</code>ä¸ä¸ºç©ºã€‚
è¿™é‡Œ<code>resumedActivity != null</code>ä¸ºtrueï¼Œå†æ¥çœ‹çœ‹<code>!taskFrag.canBeResumed(resuming)</code>å…¶ä¸­å‚æ•°<code>resuming</code>æŒ‡çš„æ˜¯å³å°†å¯åŠ¨çš„Activityï¼ˆConversationListActivityï¼‰ã€‚</p>
<p>ä»£ç è·¯å¾„ï¼šframeworks/base/services/core/java/com/android/server/wm/TaskFragment.java</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-comment">/**
     * Returns {<span class="hljs-doctag">@code</span> true} is the activity in this TaskFragment can be resumed.
     *
     * <span class="hljs-doctag">@param</span> starting The currently starting activity or {<span class="hljs-doctag">@code</span> null} if there is none.
     */</span>
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">canBeResumed</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> ActivityRecord starting)</span> {
        <span class="hljs-comment">// No need to resume activity in TaskFragment that is not visible.</span>
        <span class="hljs-keyword">return</span> isTopActivityFocusable()
                &amp;&amp; getVisibility(starting) == TASK_FRAGMENT_VISIBILITY_VISIBLE;
    }
</code></pre>
<p><code>isTopActivityFocusable()</code>åˆ¤æ–­é¡¶éƒ¨Activityæ˜¯å¦å¯èšç„¦ï¼Œä¸€èˆ¬ä¸ºtrueï¼Œè¿™é‡Œä¸»è¦å…³æ³¨<code>getVisibility(starting)</code>æ–¹æ³•ï¼Œé€šæ ·ä¼ é€’<code>starting</code>å³å°†å¯åŠ¨çš„çš„Activity ï¼ˆConversationListActivityï¼‰ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-comment">/**
     * Returns the visibility state of this TaskFragment.
     *
     * <span class="hljs-doctag">@param</span> starting The currently starting activity or null if there is none.
     */</span>
    <span class="hljs-meta">@TaskFragmentVisibility</span>
    <span class="hljs-type">int</span> <span class="hljs-title function_">getVisibility</span><span class="hljs-params">(ActivityRecord starting)</span> {
        ......
        <span class="hljs-comment">//æ ¹æ®ä¸Šè¿°ä»£ç æµç¨‹ï¼Œè¿™é‡ŒthisæŒ‡çš„æ˜¯æ¡Œé¢taskï¼Œå› æ­¤æ­¤æ—¶getParentè·å–çš„æ˜¯æ¡Œé¢taskçš„task</span>
        <span class="hljs-keyword">final</span> WindowContainer&lt;?&gt; parent = getParent();
        ......
        <span class="hljs-comment">// This TaskFragment is only considered visible if all its parent TaskFragments are</span>
        <span class="hljs-comment">// considered visible, so check the visibility of all ancestor TaskFragment first.</span>
        
        <span class="hljs-comment">//åˆ¤æ–­parentæ˜¯å¦æ˜¯taskæˆ–è€…TaskFragment</span>
        <span class="hljs-keyword">if</span> (parent.asTaskFragment() != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">//é€’å½’è°ƒç”¨getVisibilityï¼Œç›´åˆ°parentä¸ºTaskDisplayArea(ä¸æ˜¯task)ä¸ºæ­¢ã€‚</span>
            <span class="hljs-comment">//å…¶ç›®çš„æ˜¯ä¸ºäº†èƒ½å¤Ÿéå†åˆ°TaskDisplayAreaä¸‹æ‰€æœ‰taskèŠ‚ç‚¹</span>
            <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">parentVisibility</span> <span class="hljs-operator">=</span> parent.asTaskFragment().getVisibility(starting);
            <span class="hljs-keyword">if</span> (parentVisibility == TASK_FRAGMENT_VISIBILITY_INVISIBLE) {
                <span class="hljs-comment">// Can't be visible if parent isn't visible</span>
                <span class="hljs-keyword">return</span> TASK_FRAGMENT_VISIBILITY_INVISIBLE;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (parentVisibility == TASK_FRAGMENT_VISIBILITY_VISIBLE_BEHIND_TRANSLUCENT) {
                <span class="hljs-comment">// Parent is behind a translucent container so the highest visibility this container</span>
                <span class="hljs-comment">// can get is that.</span>
                gotTranslucentFullscreen = <span class="hljs-literal">true</span>;
            }
        }
        
        <span class="hljs-keyword">final</span> List&lt;TaskFragment&gt; adjacentTaskFragments = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-comment">//é€†åºéå†parentä¸‹çš„taskï¼Œå³ä¼˜å…ˆæœ€å‰å°ï¼Œä»å¤§åˆ°å°éå†</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> parent.getChildCount() - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; --i) {
            <span class="hljs-keyword">final</span> <span class="hljs-type">WindowContainer</span> <span class="hljs-variable">other</span> <span class="hljs-operator">=</span> parent.getChildAt(i);
            <span class="hljs-keyword">if</span> (other == <span class="hljs-literal">null</span>) <span class="hljs-keyword">continue</span>;

            <span class="hljs-comment">//åˆ¤æ–­otheræ˜¯å¦æ˜¯è¿è¡Œä¸­çš„Activity</span>
            <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">hasRunningActivities</span> <span class="hljs-operator">=</span> hasRunningActivity(other);
            <span class="hljs-comment">//otherå’Œthisç›¸åŒåˆ™ä¸­æ–­å¾ªç¯ï¼Œåšåç»­å¤„ç†</span>
            <span class="hljs-keyword">if</span> (other == <span class="hljs-built_in">this</span>) {
                ......
                <span class="hljs-comment">// Should be visible if there is no other fragment occluding it, unless it doesn't</span>
                <span class="hljs-comment">// have any running activities, not starting one and not home stack.</span>
                shouldBeVisible = hasRunningActivities
                        || (starting != <span class="hljs-literal">null</span> &amp;&amp; starting.isDescendantOf(<span class="hljs-built_in">this</span>))
                        || isActivityTypeHome();
                <span class="hljs-keyword">break</span>;
            }

            <span class="hljs-keyword">if</span> (!hasRunningActivities) {
                <span class="hljs-keyword">continue</span>;
            }

            <span class="hljs-comment">//æ ¹æ®otherçš„WindowingModeåˆ¤æ–­è¿”å›å€¼</span>
            <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">otherWindowingMode</span> <span class="hljs-operator">=</span> other.getWindowingMode();
            <span class="hljs-keyword">if</span> (otherWindowingMode == WINDOWING_MODE_FULLSCREEN) {
                <span class="hljs-keyword">if</span> (isTranslucent(other, starting)) {
                    <span class="hljs-comment">// Can be visible behind a translucent fullscreen TaskFragment.</span>
                    gotTranslucentFullscreen = <span class="hljs-literal">true</span>;
                    <span class="hljs-keyword">continue</span>;
                }
                <span class="hljs-keyword">return</span> TASK_FRAGMENT_VISIBILITY_INVISIBLE;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (otherWindowingMode == WINDOWING_MODE_MULTI_WINDOW
                    &amp;&amp; other.matchParentBounds()) {
                <span class="hljs-keyword">if</span> (isTranslucent(other, starting)) {
                    <span class="hljs-comment">// Can be visible behind a translucent TaskFragment.</span>
                    gotTranslucentFullscreen = <span class="hljs-literal">true</span>;
                    <span class="hljs-keyword">continue</span>;
                }
                <span class="hljs-comment">// Multi-window TaskFragment that matches parent bounds would occlude other children</span>
                <span class="hljs-keyword">return</span> TASK_FRAGMENT_VISIBILITY_INVISIBLE;
            }

            ......

        }
        
        <span class="hljs-keyword">if</span> (!shouldBeVisible) {
            <span class="hljs-keyword">return</span> TASK_FRAGMENT_VISIBILITY_INVISIBLE;
        }
        
        <span class="hljs-comment">// Lastly - check if there is a translucent fullscreen TaskFragment on top.</span>
        <span class="hljs-keyword">return</span> gotTranslucentFullscreen
                ? TASK_FRAGMENT_VISIBILITY_VISIBLE_BEHIND_TRANSLUCENT
                : TASK_FRAGMENT_VISIBILITY_VISIBLE;
    }
</code></pre>
<p>ç®€å•æ¥è¯´è¿™ä¸ªæ–¹æ³•å°±æ˜¯åˆ¤æ–­å½“å‰å¯åŠ¨ä¹‹åçš„activityçš„<code>WindowingMode</code>å¦‚æœ<strong>ä¸æ˜¯</strong><code>WINDOWING_MODE_FULLSCREENæˆ–è€…WINDOWING_MODE_MULTI_WINDOW</code>é‚£ä¹ˆå°±è¿”å›<code>TASK_FRAGMENT_VISIBILITY_VISIBLE</code>ï¼Œä½¿åå°åº”ç”¨å¯è§ï¼Œä¸è¿›å…¥åˆ°pauseæµç¨‹ã€‚</p>
<p>å› æ­¤å¯åŠ¨è‡ªç”±çª—å£æ—¶åº•å±‚activityï¼ˆlauncher3ï¼‰ä¸ä¼šè¿›è¡Œpauseã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Kotlinç³»åˆ—10ã€‘åç¨‹åŸç†ä¸å®æˆ˜ï¼ˆä¸Šï¼‰ï¼šç»“æ„åŒ–å¹¶å‘è®©å¼‚æ­¥ç¼–ç¨‹ä¸å†æ˜¯å™©æ¢¦]]></title>    <link>https://juejin.cn/post/7597266141912465454</link>    <guid>https://juejin.cn/post/7597266141912465454</guid>    <pubDate>2026-01-20T13:23:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597266141912465454" data-draft-id="7597251197426319386" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Kotlinç³»åˆ—10ã€‘åç¨‹åŸç†ä¸å®æˆ˜ï¼ˆä¸Šï¼‰ï¼šç»“æ„åŒ–å¹¶å‘è®©å¼‚æ­¥ç¼–ç¨‹ä¸å†æ˜¯å™©æ¢¦"/> <meta itemprop="keywords" content="Kotlin,Android,ç¼–ç¨‹è¯­è¨€"/> <meta itemprop="datePublished" content="2026-01-20T13:23:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Kotlinç³»åˆ—10ã€‘åç¨‹åŸç†ä¸å®æˆ˜ï¼ˆä¸Šï¼‰ï¼šç»“æ„åŒ–å¹¶å‘è®©å¼‚æ­¥ç¼–ç¨‹ä¸å†æ˜¯å™©æ¢¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T13:23:27.000Z" title="Tue Jan 20 2026 13:23:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šå¼‚æ­¥ç¼–ç¨‹çš„å™©æ¢¦</h2>
<p>è¿˜è®°å¾—é‚£ä¸ªè®©æ— æ•°å¼€å‘è€…æŠ“ç‹‚çš„"å›è°ƒåœ°ç‹±"å—ï¼Ÿ</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å›è°ƒåœ°ç‹±ï¼šAndroidå¼€å‘çš„å™©æ¢¦</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadUserData</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>)</span></span> {
    showLoading()

    userApi.fetchUser(userId) { user -&gt;
        <span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span>) {
            friendsApi.fetchFriends(user.id) { friends -&gt;
                <span class="hljs-keyword">if</span> (friends != <span class="hljs-literal">null</span>) {
                    postsApi.fetchPosts(user.id) { posts -&gt;
                        <span class="hljs-keyword">if</span> (posts != <span class="hljs-literal">null</span>) {
                            commentsApi.fetchComments(posts[<span class="hljs-number">0</span>].id) { comments -&gt;
                                <span class="hljs-keyword">if</span> (comments != <span class="hljs-literal">null</span>) {
                                    <span class="hljs-comment">// ç»ˆäºåˆ°è¿™é‡Œäº†...</span>
                                    updateUI(user, friends, posts, comments)
                                    hideLoading()
                                } <span class="hljs-keyword">else</span> {
                                    showError(<span class="hljs-string">"åŠ è½½è¯„è®ºå¤±è´¥"</span>)
                                }
                            }
                        } <span class="hljs-keyword">else</span> {
                            showError(<span class="hljs-string">"åŠ è½½å¸–å­å¤±è´¥"</span>)
                        }
                    }
                } <span class="hljs-keyword">else</span> {
                    showError(<span class="hljs-string">"åŠ è½½å¥½å‹å¤±è´¥"</span>)
                }
            }
        } <span class="hljs-keyword">else</span> {
            showError(<span class="hljs-string">"åŠ è½½ç”¨æˆ·å¤±è´¥"</span>)
        }
    }
}
</code></pre>
<p>è¿™æ®µä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p>
<ol>
<li><strong>åµŒå¥—åœ°ç‹±</strong>ï¼š4å±‚åµŒå¥—ï¼Œéš¾ä»¥é˜…è¯»å’Œç»´æŠ¤</li>
<li><strong>é”™è¯¯å¤„ç†æ··ä¹±</strong>ï¼šæ¯ä¸€å±‚éƒ½è¦å¤„ç†é”™è¯¯ï¼Œé‡å¤ä»£ç å¤š</li>
<li><strong>éš¾ä»¥å–æ¶ˆ</strong>ï¼šç”¨æˆ·é€€å‡ºç•Œé¢åå¦‚ä½•å–æ¶ˆè¯·æ±‚ï¼Ÿ</li>
<li><strong>èµ„æºæ³„æ¼é£é™©</strong>ï¼šloadingçŠ¶æ€å¯èƒ½æ— æ³•æ­£ç¡®å…³é—­</li>
</ol>
<p><strong>Kotlinåç¨‹</strong>ä¼˜é›…åœ°è§£å†³äº†è¿™äº›é—®é¢˜ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä½¿ç”¨åç¨‹ï¼šç®€æ´ã€æ¸…æ™°ã€æ˜“ç»´æŠ¤</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadUserData</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>)</span></span> {
    <span class="hljs-keyword">try</span> {
        showLoading()

        <span class="hljs-keyword">val</span> user = userApi.fetchUser(userId)
        <span class="hljs-keyword">val</span> friends = friendsApi.fetchFriends(user.id)
        <span class="hljs-keyword">val</span> posts = postsApi.fetchPosts(user.id)
        <span class="hljs-keyword">val</span> comments = commentsApi.fetchComments(posts[<span class="hljs-number">0</span>].id)

        updateUI(user, friends, posts, comments)
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        showError(<span class="hljs-string">"åŠ è½½æ•°æ®å¤±è´¥: <span class="hljs-subst">${e.message}</span>"</span>)
    } <span class="hljs-keyword">finally</span> {
        hideLoading()
    }
}
</code></pre>
<p>ä»£ç é‡å‡å°‘äº†60%ï¼Œå¯è¯»æ€§æå‡äº†300%ï¼è¿™å°±æ˜¯åç¨‹çš„é­”åŠ›ã€‚</p>
<p>æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥ç†è§£åç¨‹çš„åŸç†ï¼ŒæŒæ¡ç»“æ„åŒ–å¹¶å‘çš„ç²¾é«“ã€‚</p>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯åç¨‹ï¼Ÿ</h2>
<h3 data-id="heading-2">åç¨‹çš„æœ¬è´¨</h3>
<p><strong>åç¨‹ï¼ˆCoroutineï¼‰</strong> = Coï¼ˆåä½œï¼‰ + Routineï¼ˆä¾‹ç¨‹/å‡½æ•°ï¼‰</p>
<p>åç¨‹æ˜¯ä¸€ç§<strong>è½»é‡çº§çº¿ç¨‹</strong>ï¼Œæˆ–è€…è¯´æ˜¯"ç”¨æˆ·æ€çº¿ç¨‹"ã€‚å®ƒçš„æ ¸å¿ƒç‰¹ç‚¹ï¼š</p>
<ol>
<li><strong>å¯æŒ‚èµ·ï¼ˆSuspendableï¼‰</strong>ï¼šæ‰§è¡Œåˆ°æŸä¸ªç‚¹å¯ä»¥æš‚åœï¼Œç¨åæ¢å¤</li>
<li><strong>éé˜»å¡ï¼ˆNon-blockingï¼‰</strong>ï¼šæŒ‚èµ·ä¸ä¼šé˜»å¡çº¿ç¨‹</li>
<li><strong>è½»é‡çº§</strong>ï¼šåˆ›å»ºæˆæœ¬æä½ï¼Œå¯ä»¥è½»æ¾åˆ›å»ºæ•°åä¸‡ä¸ªåç¨‹</li>
<li><strong>ç»“æ„åŒ–å¹¶å‘</strong>ï¼šè‡ªåŠ¨ç®¡ç†åç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</li>
</ol>
<h3 data-id="heading-3">åç¨‹ vs çº¿ç¨‹</h3>



































<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">çº¿ç¨‹</th><th align="left">åç¨‹</th></tr></thead><tbody><tr><td align="left"><strong>åˆ›å»ºæˆæœ¬</strong></td><td align="left">é«˜ï¼ˆçº¦1MBæ ˆç©ºé—´ï¼‰</td><td align="left">æä½ï¼ˆçº¦å‡ åå­—èŠ‚ï¼‰</td></tr><tr><td align="left"><strong>åˆ‡æ¢æˆæœ¬</strong></td><td align="left">é«˜ï¼ˆå†…æ ¸æ€åˆ‡æ¢ï¼‰</td><td align="left">ä½ï¼ˆç”¨æˆ·æ€åˆ‡æ¢ï¼‰</td></tr><tr><td align="left"><strong>æ•°é‡é™åˆ¶</strong></td><td align="left">å—ç³»ç»Ÿèµ„æºé™åˆ¶ï¼ˆé€šå¸¸å‡ åƒä¸ªï¼‰</td><td align="left">å‡ ä¹æ— é™åˆ¶ï¼ˆå¯è½»æ¾ç™¾ä¸‡çº§ï¼‰</td></tr><tr><td align="left"><strong>è°ƒåº¦</strong></td><td align="left">æ“ä½œç³»ç»ŸæŠ¢å å¼è°ƒåº¦</td><td align="left">åä½œå¼è°ƒåº¦</td></tr><tr><td align="left"><strong>é˜»å¡å½±å“</strong></td><td align="left">é˜»å¡æ•´ä¸ªçº¿ç¨‹</td><td align="left">åªæŒ‚èµ·åç¨‹ï¼Œä¸é˜»å¡çº¿ç¨‹</td></tr></tbody></table>
<h3 data-id="heading-4">åç¨‹çš„å·¥ä½œåŸç†</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3304bd3647404849830330bd2ca67f30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769520206&amp;x-signature=K7TaGbq3mkEFH1VawUM3h6RfMyo%3D" alt="10-01-coroutine-mechanism.png" loading="lazy"/></p>
<p>åç¨‹é€šè¿‡**æŒ‚èµ·å‡½æ•°ï¼ˆsuspend functionï¼‰<strong>å’Œ</strong>å»¶ç»­ä¼ é€’ï¼ˆContinuation Passing Style, CPSï¼‰**å®ç°ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä½ å†™çš„ä»£ç </span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchData</span><span class="hljs-params">()</span></span>: String {
    delay(<span class="hljs-number">1000</span>)  <span class="hljs-comment">// æŒ‚èµ·1ç§’</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Data"</span>
}

<span class="hljs-comment">// ç¼–è¯‘å™¨ç”Ÿæˆçš„ä»£ç ï¼ˆç®€åŒ–ç‰ˆï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchData</span><span class="hljs-params">(continuation: <span class="hljs-type">Continuation</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span>: Any? {
    <span class="hljs-comment">// çŠ¶æ€æœºå®ç°</span>
    <span class="hljs-keyword">when</span> (continuation.label) {
        <span class="hljs-number">0</span> -&gt; {
            continuation.label = <span class="hljs-number">1</span>
            <span class="hljs-keyword">return</span> delay(<span class="hljs-number">1000</span>, continuation)  <span class="hljs-comment">// æŒ‚èµ·ç‚¹</span>
        }
        <span class="hljs-number">1</span> -&gt; {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"Data"</span>  <span class="hljs-comment">// æ¢å¤åæ‰§è¡Œ</span>
        }
    }
}
</code></pre>
<p>ç¼–è¯‘å™¨å°†æŒ‚èµ·å‡½æ•°è½¬æ¢ä¸º<strong>çŠ¶æ€æœº</strong>ï¼Œæ¯ä¸ªæŒ‚èµ·ç‚¹å¯¹åº”ä¸€ä¸ªçŠ¶æ€ã€‚</p>
<h2 data-id="heading-5">ç¬¬ä¸€ä¸ªåç¨‹ç¨‹åº</h2>
<h3 data-id="heading-6">åŸºç¡€ç¤ºä¾‹</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {  <span class="hljs-comment">// åˆ›å»ºåç¨‹ä½œç”¨åŸŸ</span>
    println(<span class="hljs-string">"ä¸»åç¨‹å¼€å§‹"</span>)

    launch {  <span class="hljs-comment">// å¯åŠ¨å­åç¨‹</span>
        delay(<span class="hljs-number">1000</span>)
        println(<span class="hljs-string">"å­åç¨‹æ‰§è¡Œ"</span>)
    }

    println(<span class="hljs-string">"ä¸»åç¨‹ç»§ç»­"</span>)
    delay(<span class="hljs-number">2000</span>)
    println(<span class="hljs-string">"ä¸»åç¨‹ç»“æŸ"</span>)
}

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// ä¸»åç¨‹å¼€å§‹</span>
<span class="hljs-comment">// ä¸»åç¨‹ç»§ç»­</span>
<span class="hljs-comment">// å­åç¨‹æ‰§è¡Œï¼ˆ1ç§’åï¼‰</span>
<span class="hljs-comment">// ä¸»åç¨‹ç»“æŸï¼ˆ2ç§’åï¼‰</span>
</code></pre>
<p><strong>å…³é”®æ¦‚å¿µ</strong>ï¼š</p>
<ol>
<li><strong>runBlocking</strong>ï¼šåˆ›å»ºé˜»å¡å¼åç¨‹ä½œç”¨åŸŸï¼ˆä¸»è¦ç”¨äºmainå‡½æ•°å’Œæµ‹è¯•ï¼‰</li>
<li><strong>launch</strong>ï¼šå¯åŠ¨æ–°åç¨‹ï¼Œè¿”å›Jobå¯¹è±¡</li>
<li><strong>delay</strong>ï¼šæŒ‚èµ·å‡½æ•°ï¼ŒæŒ‚èµ·åç¨‹è€Œä¸é˜»å¡çº¿ç¨‹</li>
</ol>
<h3 data-id="heading-7">åç¨‹çš„ä¸‰å¤§æ„å»ºå™¨</h3>
<h4 data-id="heading-8">1. launch - å¯åŠ¨åç¨‹</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> job = launch {
        repeat(<span class="hljs-number">5</span>) { i -&gt;
            println(<span class="hljs-string">"åç¨‹å·¥ä½œä¸­ <span class="hljs-variable">$i</span>"</span>)
            delay(<span class="hljs-number">500</span>)
        }
    }

    delay(<span class="hljs-number">1300</span>)
    println(<span class="hljs-string">"å–æ¶ˆåç¨‹"</span>)
    job.cancel()  <span class="hljs-comment">// å–æ¶ˆåç¨‹</span>
    job.join()    <span class="hljs-comment">// ç­‰å¾…åç¨‹å®Œæˆ</span>
    println(<span class="hljs-string">"ä¸»åç¨‹ç»“æŸ"</span>)
}
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>ç±»ä¼¼äº"fire and forget"</li>
<li>è¿”å›<code>Job</code>å¯¹è±¡ï¼Œç”¨äºç®¡ç†åç¨‹ç”Ÿå‘½å‘¨æœŸ</li>
<li>ä¸è¿”å›ç»“æœå€¼</li>
</ul>
<h4 data-id="heading-9">2. async - å¹¶å‘è®¡ç®—</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> deferred1 = async {
        delay(<span class="hljs-number">1000</span>)
        println(<span class="hljs-string">"è®¡ç®—1å®Œæˆ"</span>)
        <span class="hljs-number">100</span>
    }

    <span class="hljs-keyword">val</span> deferred2 = async {
        delay(<span class="hljs-number">500</span>)
        println(<span class="hljs-string">"è®¡ç®—2å®Œæˆ"</span>)
        <span class="hljs-number">200</span>
    }

    <span class="hljs-keyword">val</span> result = deferred1.await() + deferred2.await()
    println(<span class="hljs-string">"æ€»å’Œ: <span class="hljs-variable">$result</span>"</span>)
}

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// è®¡ç®—2å®Œæˆï¼ˆ500msåï¼‰</span>
<span class="hljs-comment">// è®¡ç®—1å®Œæˆï¼ˆ1000msåï¼‰</span>
<span class="hljs-comment">// æ€»å’Œ: 300</span>
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>è¿”å›<code>Deferred&lt;T&gt;</code>å¯¹è±¡</li>
<li>é€šè¿‡<code>await()</code>è·å–ç»“æœ</li>
<li>ä¸¤ä¸ªasync<strong>å¹¶å‘æ‰§è¡Œ</strong>ï¼Œæ€»è€—æ—¶çº¦1ç§’è€Œé1.5ç§’</li>
</ul>
<h4 data-id="heading-10">3. runBlocking - é˜»å¡å¼åç¨‹</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    println(<span class="hljs-string">"å¼€å§‹"</span>)

    runBlocking {
        delay(<span class="hljs-number">1000</span>)
        println(<span class="hljs-string">"åç¨‹æ‰§è¡Œ"</span>)
    }

    println(<span class="hljs-string">"ç»“æŸ"</span>)
}
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>é˜»å¡å½“å‰çº¿ç¨‹ï¼Œç›´åˆ°åç¨‹å®Œæˆ</li>
<li>ä¸»è¦ç”¨äºmainå‡½æ•°ã€æµ‹è¯•ã€æ¡¥æ¥é˜»å¡ä»£ç </li>
<li><strong>ç”Ÿäº§ä»£ç ä¸­åº”é¿å…ä½¿ç”¨</strong></li>
</ul>
<h3 data-id="heading-11">å¯¹æ¯”ï¼šä¸²è¡Œ vs å¹¶å‘</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä¸²è¡Œæ‰§è¡Œï¼šæ€»è€—æ—¶2ç§’</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">serialExecution</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> time = measureTimeMillis {
        <span class="hljs-keyword">val</span> one = fetchData1()  <span class="hljs-comment">// 1ç§’</span>
        <span class="hljs-keyword">val</span> two = fetchData2()  <span class="hljs-comment">// 1ç§’</span>
        println(<span class="hljs-string">"ç»“æœ: <span class="hljs-variable">$one</span>, <span class="hljs-variable">$two</span>"</span>)
    }
    println(<span class="hljs-string">"ä¸²è¡Œè€—æ—¶: <span class="hljs-variable">$time</span> ms"</span>)
}

<span class="hljs-comment">// å¹¶å‘æ‰§è¡Œï¼šæ€»è€—æ—¶1ç§’</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">concurrentExecution</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> time = measureTimeMillis {
        <span class="hljs-keyword">val</span> one = async { fetchData1() }  <span class="hljs-comment">// å¹¶å‘</span>
        <span class="hljs-keyword">val</span> two = async { fetchData2() }  <span class="hljs-comment">// å¹¶å‘</span>
        println(<span class="hljs-string">"ç»“æœ: <span class="hljs-subst">${one.await()}</span>, <span class="hljs-subst">${two.await()}</span>"</span>)
    }
    println(<span class="hljs-string">"å¹¶å‘è€—æ—¶: <span class="hljs-variable">$time</span> ms"</span>)
}
</code></pre>
<h2 data-id="heading-12">ç»“æ„åŒ–å¹¶å‘ï¼šåç¨‹çš„çµé­‚</h2>
<h3 data-id="heading-13">ä»€ä¹ˆæ˜¯ç»“æ„åŒ–å¹¶å‘ï¼Ÿ</h3>
<p>**ç»“æ„åŒ–å¹¶å‘ï¼ˆStructured Concurrencyï¼‰**æ˜¯åç¨‹çš„æ ¸å¿ƒè®¾è®¡ç†å¿µï¼š</p>
<blockquote>
<p>åç¨‹å¿…é¡»åœ¨æ˜ç¡®çš„ä½œç”¨åŸŸå†…å¯åŠ¨ï¼Œå­åç¨‹çš„ç”Ÿå‘½å‘¨æœŸä¸èƒ½è¶…è¿‡çˆ¶åç¨‹ã€‚</p>
</blockquote>
<p>è¿™å°±åƒ"ä½ ä¸èƒ½è®©å­©å­æµè½è¡—å¤´"â€”â€”æ¯ä¸ªåç¨‹éƒ½æœ‰æ˜ç¡®çš„çˆ¶åç¨‹è´Ÿè´£ç®¡ç†ã€‚</p>
<h3 data-id="heading-14">åç¨‹ä½œç”¨åŸŸï¼ˆCoroutineScopeï¼‰</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29715f0da306416eb324bfdbd6abc4ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769520206&amp;x-signature=McGyBf3aFlJi90N9i9GL1J%2BfufA%3D" alt="10-02-coroutine-scope-hierarchy.png" loading="lazy"/></p>
<h4 data-id="heading-15">ä½œç”¨åŸŸçš„ä½œç”¨</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {  <span class="hljs-comment">// çˆ¶ä½œç”¨åŸŸ</span>
    launch {  <span class="hljs-comment">// å­åç¨‹1</span>
        delay(<span class="hljs-number">1000</span>)
        println(<span class="hljs-string">"å­åç¨‹1å®Œæˆ"</span>)
    }

    launch {  <span class="hljs-comment">// å­åç¨‹2</span>
        delay(<span class="hljs-number">500</span>)
        println(<span class="hljs-string">"å­åç¨‹2å®Œæˆ"</span>)
    }

    println(<span class="hljs-string">"çˆ¶åç¨‹ç­‰å¾…å­åç¨‹..."</span>)
}  <span class="hljs-comment">// çˆ¶åç¨‹ä¼šè‡ªåŠ¨ç­‰å¾…æ‰€æœ‰å­åç¨‹å®Œæˆ</span>

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// çˆ¶åç¨‹ç­‰å¾…å­åç¨‹...</span>
<span class="hljs-comment">// å­åç¨‹2å®Œæˆï¼ˆ500msåï¼‰</span>
<span class="hljs-comment">// å­åç¨‹1å®Œæˆï¼ˆ1000msåï¼‰</span>
<span class="hljs-comment">// ï¼ˆç„¶åmainå‡½æ•°æ‰ç»“æŸï¼‰</span>
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li><code>runBlocking</code>ä¼šç­‰å¾…æ‰€æœ‰å­åç¨‹å®Œæˆæ‰ç»“æŸ</li>
<li>è¿™æ˜¯<strong>è‡ªåŠ¨ç®¡ç†</strong>ï¼Œæ— éœ€æ‰‹åŠ¨join</li>
</ul>
<h4 data-id="heading-16">å–æ¶ˆä¼ æ’­</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> parentJob = launch {
        <span class="hljs-keyword">val</span> child1 = launch {
            repeat(<span class="hljs-number">10</span>) {
                println(<span class="hljs-string">"å­åç¨‹1å·¥ä½œä¸­ <span class="hljs-variable">$it</span>"</span>)
                delay(<span class="hljs-number">200</span>)
            }
        }

        <span class="hljs-keyword">val</span> child2 = launch {
            repeat(<span class="hljs-number">10</span>) {
                println(<span class="hljs-string">"å­åç¨‹2å·¥ä½œä¸­ <span class="hljs-variable">$it</span>"</span>)
                delay(<span class="hljs-number">200</span>)
            }
        }
    }

    delay(<span class="hljs-number">500</span>)
    println(<span class="hljs-string">"å–æ¶ˆçˆ¶åç¨‹"</span>)
    parentJob.cancel()  <span class="hljs-comment">// å–æ¶ˆçˆ¶åç¨‹</span>
    delay(<span class="hljs-number">1000</span>)
    println(<span class="hljs-string">"ç¨‹åºç»“æŸ"</span>)
}

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// å­åç¨‹1å·¥ä½œä¸­ 0</span>
<span class="hljs-comment">// å­åç¨‹2å·¥ä½œä¸­ 0</span>
<span class="hljs-comment">// å­åç¨‹1å·¥ä½œä¸­ 1</span>
<span class="hljs-comment">// å­åç¨‹2å·¥ä½œä¸­ 1</span>
<span class="hljs-comment">// å–æ¶ˆçˆ¶åç¨‹</span>
<span class="hljs-comment">// ç¨‹åºç»“æŸï¼ˆå­åç¨‹ä¹Ÿè¢«å–æ¶ˆäº†ï¼‰</span>
</code></pre>
<p><strong>å–æ¶ˆè§„åˆ™</strong>ï¼š</p>
<ul>
<li>å–æ¶ˆçˆ¶åç¨‹ä¼š<strong>è‡ªåŠ¨å–æ¶ˆ</strong>æ‰€æœ‰å­åç¨‹</li>
<li>å–æ¶ˆæ˜¯<strong>åä½œå¼</strong>çš„ï¼Œéœ€è¦æ£€æŸ¥å–æ¶ˆçŠ¶æ€</li>
</ul>
<h3 data-id="heading-17">åç¨‹ä¸Šä¸‹æ–‡ï¼ˆCoroutineContextï¼‰</h3>
<p>åç¨‹ä¸Šä¸‹æ–‡æ˜¯ä¸€ç»„å…ƒç´ çš„é›†åˆï¼ŒåŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>Job</strong>ï¼šåç¨‹çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†</li>
<li><strong>Dispatcher</strong>ï¼šå†³å®šåç¨‹è¿è¡Œåœ¨å“ªä¸ªçº¿ç¨‹</li>
<li><strong>CoroutineName</strong>ï¼šåç¨‹çš„åç§°ï¼ˆè°ƒè¯•ç”¨ï¼‰</li>
<li><strong>CoroutineExceptionHandler</strong>ï¼šå¼‚å¸¸å¤„ç†å™¨</li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> job = launch(
        CoroutineName(<span class="hljs-string">"MyCoroutine"</span>) +  <span class="hljs-comment">// è®¾ç½®åç§°</span>
        Dispatchers.Default  <span class="hljs-comment">// æŒ‡å®šè°ƒåº¦å™¨</span>
    ) {
        println(<span class="hljs-string">"åç¨‹åç§°: <span class="hljs-subst">${coroutineContext[CoroutineName]}</span>"</span>)
        println(<span class="hljs-string">"è¿è¡Œçº¿ç¨‹: <span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
        delay(<span class="hljs-number">1000</span>)
    }

    job.join()
}

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// åç¨‹åç§°: CoroutineName(MyCoroutine)</span>
<span class="hljs-comment">// è¿è¡Œçº¿ç¨‹: DefaultDispatcher-worker-1</span>
</code></pre>
<h3 data-id="heading-18">åç¨‹è°ƒåº¦å™¨ï¼ˆDispatchersï¼‰</h3>
<p>è°ƒåº¦å™¨å†³å®šåç¨‹è¿è¡Œåœ¨å“ªä¸ªçº¿ç¨‹ä¸Šï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-comment">// 1. Dispatchers.Default - CPUå¯†é›†å‹ä»»åŠ¡</span>
    launch(Dispatchers.Default) {
        println(<span class="hljs-string">"Default: <span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
        <span class="hljs-comment">// é€‚åˆï¼šè®¡ç®—ã€æ•°æ®å¤„ç†</span>
    }

    <span class="hljs-comment">// 2. Dispatchers.IO - IOå¯†é›†å‹ä»»åŠ¡</span>
    launch(Dispatchers.IO) {
        println(<span class="hljs-string">"IO: <span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
        <span class="hljs-comment">// é€‚åˆï¼šç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å†™ã€æ•°æ®åº“æ“ä½œ</span>
    }

    <span class="hljs-comment">// 3. Dispatchers.Main - ä¸»çº¿ç¨‹ï¼ˆAndroid/Swingï¼‰</span>
    <span class="hljs-comment">// launch(Dispatchers.Main) {</span>
    <span class="hljs-comment">//     println("Main: ${Thread.currentThread().name}")</span>
    <span class="hljs-comment">//     // é€‚åˆï¼šUIæ›´æ–°</span>
    <span class="hljs-comment">// }</span>

    <span class="hljs-comment">// 4. Dispatchers.Unconfined - éå—é™è°ƒåº¦å™¨</span>
    launch(Dispatchers.Unconfined) {
        println(<span class="hljs-string">"Unconfined 1: <span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
        delay(<span class="hljs-number">100</span>)
        println(<span class="hljs-string">"Unconfined 2: <span class="hljs-subst">${Thread.currentThread().name}</span>"</span>)
        <span class="hljs-comment">// ç¬¬ä¸€ä¸ªæŒ‚èµ·ç‚¹å‰åœ¨è°ƒç”¨è€…çº¿ç¨‹ï¼Œæ¢å¤ååœ¨æ¢å¤è€…çº¿ç¨‹</span>
    }

    delay(<span class="hljs-number">200</span>)
}
</code></pre>
<p><strong>é€‰æ‹©å»ºè®®</strong>ï¼š</p>






























<table><thead><tr><th align="left">è°ƒåº¦å™¨</th><th align="left">é€‚ç”¨åœºæ™¯</th><th align="left">çº¿ç¨‹æ± å¤§å°</th></tr></thead><tbody><tr><td align="left"><strong>Default</strong></td><td align="left">CPUå¯†é›†å‹ï¼ˆè®¡ç®—ã€æ’åºã€è§£æï¼‰</td><td align="left">CPUæ ¸å¿ƒæ•°</td></tr><tr><td align="left"><strong>IO</strong></td><td align="left">IOå¯†é›†å‹ï¼ˆç½‘ç»œã€æ–‡ä»¶ã€æ•°æ®åº“ï¼‰</td><td align="left">64ä¸ªçº¿ç¨‹</td></tr><tr><td align="left"><strong>Main</strong></td><td align="left">UIæ›´æ–°ï¼ˆAndroidã€Swingã€JavaFXï¼‰</td><td align="left">ä¸»çº¿ç¨‹</td></tr><tr><td align="left"><strong>Unconfined</strong></td><td align="left">æµ‹è¯•ã€ç‰¹æ®Šåœºæ™¯</td><td align="left">ä¸å›ºå®š</td></tr></tbody></table>
<h3 data-id="heading-19">åˆ‡æ¢çº¿ç¨‹</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadData</span><span class="hljs-params">()</span></span> {
    withContext(Dispatchers.IO) {  <span class="hljs-comment">// åˆ‡æ¢åˆ°IOçº¿ç¨‹</span>
        <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = fetchFromNetwork()

        withContext(Dispatchers.Default) {  <span class="hljs-comment">// åˆ‡æ¢åˆ°è®¡ç®—çº¿ç¨‹</span>
            <span class="hljs-keyword">val</span> processed = processData(<span class="hljs-keyword">data</span>)

            withContext(Dispatchers.Main) {  <span class="hljs-comment">// åˆ‡æ¢åˆ°ä¸»çº¿ç¨‹</span>
                updateUI(processed)
            }
        }
    }
}
</code></pre>
<p><strong>å…³é”®å‡½æ•°</strong>ï¼š</p>
<ul>
<li><code>withContext</code>ï¼šä¸´æ—¶åˆ‡æ¢åç¨‹ä¸Šä¸‹æ–‡</li>
<li>è‡ªåŠ¨è¿”å›åˆ°åŸè°ƒåº¦å™¨</li>
<li>è¿”å›lambdaçš„ç»“æœ</li>
</ul>
<h2 data-id="heading-20">åç¨‹çš„å–æ¶ˆä¸è¶…æ—¶</h2>
<h3 data-id="heading-21">åä½œå¼å–æ¶ˆ</h3>
<p>åç¨‹çš„å–æ¶ˆæ˜¯<strong>åä½œå¼</strong>çš„ï¼Œéœ€è¦åç¨‹ä¸»åŠ¨æ£€æŸ¥ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> job = launch {
        repeat(<span class="hljs-number">1000</span>) { i -&gt;
            <span class="hljs-keyword">if</span> (!isActive) {  <span class="hljs-comment">// æ£€æŸ¥åç¨‹æ˜¯å¦æ´»è·ƒ</span>
                println(<span class="hljs-string">"åç¨‹è¢«å–æ¶ˆï¼Œæ¸…ç†èµ„æº..."</span>)
                <span class="hljs-keyword">return</span><span class="hljs-symbol">@launch</span>
            }
            println(<span class="hljs-string">"å·¥ä½œä¸­ <span class="hljs-variable">$i</span>"</span>)
            Thread.sleep(<span class="hljs-number">100</span>)  <span class="hljs-comment">// æ³¨æ„ï¼šè¿™æ˜¯Thread.sleepï¼Œä¸æ˜¯delay</span>
        }
    }

    delay(<span class="hljs-number">500</span>)
    println(<span class="hljs-string">"å–æ¶ˆåç¨‹"</span>)
    job.cancelAndJoin()
    println(<span class="hljs-string">"åç¨‹å·²å–æ¶ˆ"</span>)
}
</code></pre>
<h3 data-id="heading-22">å–æ¶ˆæ£€æŸ¥ç‚¹</h3>
<p>ä»¥ä¸‹å‡½æ•°ä¼šè‡ªåŠ¨æ£€æŸ¥å–æ¶ˆçŠ¶æ€ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// è‡ªåŠ¨æ£€æŸ¥å–æ¶ˆçš„æŒ‚èµ·å‡½æ•°</span>
delay(<span class="hljs-number">1000</span>)      <span class="hljs-comment">// âœ… ä¼šæ£€æŸ¥</span>
yield()          <span class="hljs-comment">// âœ… ä¼šæ£€æŸ¥</span>
withContext()    <span class="hljs-comment">// âœ… ä¼šæ£€æŸ¥</span>
withTimeout()    <span class="hljs-comment">// âœ… ä¼šæ£€æŸ¥</span>

<span class="hljs-comment">// ä¸ä¼šæ£€æŸ¥å–æ¶ˆ</span>
Thread.sleep()   <span class="hljs-comment">// âŒ ä¸ä¼šæ£€æŸ¥</span>
</code></pre>
<h3 data-id="heading-23">è®©ä¸å¯å–æ¶ˆçš„ä»£ç å¯å–æ¶ˆ</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> job = launch {
        repeat(<span class="hljs-number">1000</span>) { i -&gt;
            println(<span class="hljs-string">"å·¥ä½œä¸­ <span class="hljs-variable">$i</span>"</span>)
            <span class="hljs-comment">// æ–¹æ³•1: ä½¿ç”¨yield()æ’å…¥å–æ¶ˆæ£€æŸ¥ç‚¹</span>
            yield()

            <span class="hljs-comment">// æ–¹æ³•2: æ‰‹åŠ¨æ£€æŸ¥isActive</span>
            <span class="hljs-comment">// ensureActive()  // å¦‚æœå·²å–æ¶ˆï¼ŒæŠ›å‡ºCancellationException</span>

            Thread.sleep(<span class="hljs-number">100</span>)
        }
    }

    delay(<span class="hljs-number">500</span>)
    job.cancelAndJoin()
}
</code></pre>
<h3 data-id="heading-24">ä¸å¯å–æ¶ˆå—</h3>
<p>æœ‰æ—¶éœ€è¦åœ¨å–æ¶ˆè¿‡ç¨‹ä¸­æ‰§è¡Œæ¸…ç†æ“ä½œï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> job = launch {
        <span class="hljs-keyword">try</span> {
            repeat(<span class="hljs-number">1000</span>) { i -&gt;
                println(<span class="hljs-string">"å·¥ä½œä¸­ <span class="hljs-variable">$i</span>"</span>)
                delay(<span class="hljs-number">100</span>)
            }
        } <span class="hljs-keyword">finally</span> {
            withContext(NonCancellable) {  <span class="hljs-comment">// ä¸å¯å–æ¶ˆå—</span>
                println(<span class="hljs-string">"æ¸…ç†èµ„æº..."</span>)
                delay(<span class="hljs-number">500</span>)  <span class="hljs-comment">// è¿™é‡Œçš„delayä¸ä¼šè¢«å–æ¶ˆ</span>
                println(<span class="hljs-string">"èµ„æºæ¸…ç†å®Œæˆ"</span>)
            }
        }
    }

    delay(<span class="hljs-number">300</span>)
    job.cancelAndJoin()
    println(<span class="hljs-string">"ç¨‹åºç»“æŸ"</span>)
}
</code></pre>
<h3 data-id="heading-25">è¶…æ—¶å¤„ç†</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. withTimeout - è¶…æ—¶æŠ›å‡ºå¼‚å¸¸</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchWithTimeout</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">try</span> {
        withTimeout(<span class="hljs-number">1000</span>) {
            println(<span class="hljs-string">"å¼€å§‹è¯·æ±‚..."</span>)
            delay(<span class="hljs-number">2000</span>)  <span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span>
            println(<span class="hljs-string">"è¯·æ±‚å®Œæˆ"</span>)
        }
    } <span class="hljs-keyword">catch</span> (e: TimeoutCancellationException) {
        println(<span class="hljs-string">"è¯·æ±‚è¶…æ—¶"</span>)
    }
}

<span class="hljs-comment">// 2. withTimeoutOrNull - è¶…æ—¶è¿”å›null</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchWithTimeoutOrNull</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> result = withTimeoutOrNull(<span class="hljs-number">1000</span>) {
        println(<span class="hljs-string">"å¼€å§‹è¯·æ±‚..."</span>)
        delay(<span class="hljs-number">2000</span>)
        <span class="hljs-string">"æ•°æ®"</span>
    }

    <span class="hljs-keyword">if</span> (result == <span class="hljs-literal">null</span>) {
        println(<span class="hljs-string">"è¯·æ±‚è¶…æ—¶"</span>)
    } <span class="hljs-keyword">else</span> {
        println(<span class="hljs-string">"è¯·æ±‚æˆåŠŸ: <span class="hljs-variable">$result</span>"</span>)
    }
}
</code></pre>
<h2 data-id="heading-26">å¼‚å¸¸å¤„ç†</h2>
<h3 data-id="heading-27">å¼‚å¸¸ä¼ æ’­è§„åˆ™</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c2cab61965b4f0db50b9e926161e6a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769520206&amp;x-signature=B0wH1cgJ0BvMs3%2BNkgEF6tsTRAY%3D" alt="10-03-exception-propagation.png" loading="lazy"/></p>
<p>åç¨‹ä¸­çš„å¼‚å¸¸éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š</p>
<ol>
<li><strong>launch</strong>ï¼šå¼‚å¸¸å‘ä¸Šä¼ æ’­ç»™çˆ¶åç¨‹</li>
<li><strong>async</strong>ï¼šå¼‚å¸¸è¢«å°è£…ï¼Œåœ¨await()æ—¶æŠ›å‡º</li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// launchçš„å¼‚å¸¸ä¼ æ’­</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> job = launch {
        println(<span class="hljs-string">"å­åç¨‹å¼€å§‹"</span>)
        <span class="hljs-keyword">throw</span> RuntimeException(<span class="hljs-string">"å‡ºé”™äº†ï¼"</span>)
    }

    delay(<span class="hljs-number">100</span>)
    println(<span class="hljs-string">"ä¸»åç¨‹ç»§ç»­æ‰§è¡Œï¼Ÿ"</span>)  <span class="hljs-comment">// ä¸ä¼šæ‰§è¡Œï¼Œå› ä¸ºå¼‚å¸¸ä¼šä¼ æ’­åˆ°ä¸»åç¨‹</span>
}

<span class="hljs-comment">// asyncçš„å¼‚å¸¸å»¶è¿Ÿ</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> deferred = async {
        println(<span class="hljs-string">"å­åç¨‹å¼€å§‹"</span>)
        <span class="hljs-keyword">throw</span> RuntimeException(<span class="hljs-string">"å‡ºé”™äº†ï¼"</span>)
    }

    delay(<span class="hljs-number">100</span>)
    println(<span class="hljs-string">"ä¸»åç¨‹ç»§ç»­æ‰§è¡Œ"</span>)  <span class="hljs-comment">// âœ… ä¼šæ‰§è¡Œ</span>

    <span class="hljs-keyword">try</span> {
        deferred.await()  <span class="hljs-comment">// å¼‚å¸¸åœ¨è¿™é‡ŒæŠ›å‡º</span>
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        println(<span class="hljs-string">"æ•è·å¼‚å¸¸: <span class="hljs-subst">${e.message}</span>"</span>)
    }
}
</code></pre>
<h3 data-id="heading-28">å¼‚å¸¸å¤„ç†å™¨</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> handler = CoroutineExceptionHandler { context, exception -&gt;
    println(<span class="hljs-string">"æ•è·å¼‚å¸¸: <span class="hljs-subst">${context[CoroutineName]}</span> - <span class="hljs-subst">${exception.message}</span>"</span>)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> job = launch(handler + CoroutineName(<span class="hljs-string">"MyCoroutine"</span>)) {
        <span class="hljs-keyword">throw</span> RuntimeException(<span class="hljs-string">"å‡ºé”™äº†ï¼"</span>)
    }

    job.join()
    println(<span class="hljs-string">"ç¨‹åºç»§ç»­"</span>)
}

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// æ•è·å¼‚å¸¸: CoroutineName(MyCoroutine) - å‡ºé”™äº†ï¼</span>
<span class="hljs-comment">// ç¨‹åºç»§ç»­</span>
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼š</p>
<ul>
<li>å¼‚å¸¸å¤„ç†å™¨åªå¯¹<strong>æ ¹åç¨‹</strong>æœ‰æ•ˆ</li>
<li>å­åç¨‹çš„å¼‚å¸¸ä¼šä¼ æ’­åˆ°çˆ¶åç¨‹ï¼Œä¸ä¼šè¢«å­åç¨‹çš„handleræ•è·</li>
</ul>
<h3 data-id="heading-29">SupervisorJob</h3>
<p>ä½¿ç”¨<code>SupervisorJob</code>å¯ä»¥è®©å­åç¨‹çš„å¼‚å¸¸ä¸å½±å“å…„å¼Ÿåç¨‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> supervisor = SupervisorJob()

    with(CoroutineScope(coroutineContext + supervisor)) {
        <span class="hljs-keyword">val</span> child1 = launch {
            println(<span class="hljs-string">"å­åç¨‹1å¼€å§‹"</span>)
            delay(<span class="hljs-number">100</span>)
            <span class="hljs-keyword">throw</span> RuntimeException(<span class="hljs-string">"å­åç¨‹1å‡ºé”™"</span>)
        }

        <span class="hljs-keyword">val</span> child2 = launch {
            println(<span class="hljs-string">"å­åç¨‹2å¼€å§‹"</span>)
            delay(<span class="hljs-number">200</span>)
            println(<span class="hljs-string">"å­åç¨‹2å®Œæˆ"</span>)  <span class="hljs-comment">// âœ… ä»ä¼šæ‰§è¡Œ</span>
        }

        joinAll(child1, child2)
    }

    println(<span class="hljs-string">"ç¨‹åºç»“æŸ"</span>)
}
</code></pre>
<h3 data-id="heading-30">supervisorScope</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    supervisorScope {
        launch {
            println(<span class="hljs-string">"å­åç¨‹1å¼€å§‹"</span>)
            delay(<span class="hljs-number">100</span>)
            <span class="hljs-keyword">throw</span> RuntimeException(<span class="hljs-string">"å­åç¨‹1å‡ºé”™"</span>)
        }

        launch {
            println(<span class="hljs-string">"å­åç¨‹2å¼€å§‹"</span>)
            delay(<span class="hljs-number">200</span>)
            println(<span class="hljs-string">"å­åç¨‹2å®Œæˆ"</span>)
        }
    }

    println(<span class="hljs-string">"ä¸»åç¨‹ç»§ç»­"</span>)
}

<span class="hljs-comment">// è¾“å‡ºï¼š</span>
<span class="hljs-comment">// å­åç¨‹1å¼€å§‹</span>
<span class="hljs-comment">// å­åç¨‹2å¼€å§‹</span>
<span class="hljs-comment">// Exception in thread "main" RuntimeException: å­åç¨‹1å‡ºé”™</span>
<span class="hljs-comment">// å­åç¨‹2å®Œæˆ</span>
<span class="hljs-comment">// ä¸»åç¨‹ç»§ç»­</span>
</code></pre>
<p><strong>supervisorScope vs SupervisorJob</strong>ï¼š</p>
<ul>
<li><code>supervisorScope</code>ï¼šåˆ›å»ºä¸´æ—¶çš„supervisorä½œç”¨åŸŸ</li>
<li><code>SupervisorJob</code>ï¼šåˆ›å»ºé•¿æœŸçš„supervisorä½œç”¨åŸŸ</li>
</ul>
<h2 data-id="heading-31">å®æˆ˜æ¡ˆä¾‹ï¼šå¹¶å‘ä¸‹è½½æ–‡ä»¶</h2>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®é™…æ¡ˆä¾‹æ¥ç»¼åˆè¿ç”¨æ‰€å­¦çŸ¥è¯†ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*
<span class="hljs-keyword">import</span> java.io.File
<span class="hljs-keyword">import</span> java.net.URL

<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DownloadTask</span>(
    <span class="hljs-keyword">val</span> url: String,
    <span class="hljs-keyword">val</span> fileName: String
)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">FileDownloader</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> scope = CoroutineScope(
        SupervisorJob() + Dispatchers.IO
    )

    <span class="hljs-comment">/**
     * å¹¶å‘ä¸‹è½½å¤šä¸ªæ–‡ä»¶
     */</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">downloadFiles</span><span class="hljs-params">(tasks: <span class="hljs-type">List</span>&lt;<span class="hljs-type">DownloadTask</span>&gt;)</span></span>: List&lt;Result&lt;File&gt;&gt; {
        <span class="hljs-keyword">return</span> tasks.map { task -&gt;
            scope.async {
                <span class="hljs-keyword">try</span> {
                    downloadFile(task)
                } <span class="hljs-keyword">catch</span> (e: Exception) {
                    Result.failure(e)
                }
            }
        }.awaitAll()
    }

    <span class="hljs-comment">/**
     * ä¸‹è½½å•ä¸ªæ–‡ä»¶ï¼ˆå¸¦è¶…æ—¶ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">downloadFile</span><span class="hljs-params">(task: <span class="hljs-type">DownloadTask</span>)</span></span>: Result&lt;File&gt; {
        <span class="hljs-keyword">return</span> withTimeoutOrNull(<span class="hljs-number">30_000</span>) {  <span class="hljs-comment">// 30ç§’è¶…æ—¶</span>
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">val</span> file = File(task.fileName)
                URL(task.url).openStream().use { input -&gt;
                    file.outputStream().use { output -&gt;
                        input.copyTo(output)
                    }
                }
                Result.success(file)
            } <span class="hljs-keyword">catch</span> (e: Exception) {
                Result.failure(e)
            }
        } ?: Result.failure(TimeoutCancellationException(<span class="hljs-string">"ä¸‹è½½è¶…æ—¶"</span>))
    }

    <span class="hljs-comment">/**
     * ä¸‹è½½æ–‡ä»¶å¹¶æ˜¾ç¤ºè¿›åº¦
     */</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">downloadWithProgress</span><span class="hljs-params">(
        task: <span class="hljs-type">DownloadTask</span>,
        onProgress: (<span class="hljs-type">Float</span>) -&gt; <span class="hljs-type">Unit</span>
    )</span></span>: Result&lt;File&gt; = withContext(Dispatchers.IO) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> file = File(task.fileName)
            <span class="hljs-keyword">val</span> connection = URL(task.url).openConnection()
            <span class="hljs-keyword">val</span> totalSize = connection.contentLength.toLong()
            <span class="hljs-keyword">var</span> downloadedSize = <span class="hljs-number">0L</span>

            connection.getInputStream().use { input -&gt;
                file.outputStream().use { output -&gt;
                    <span class="hljs-keyword">val</span> buffer = ByteArray(<span class="hljs-number">8192</span>)
                    <span class="hljs-keyword">var</span> bytesRead: <span class="hljs-built_in">Int</span>

                    <span class="hljs-keyword">while</span> (input.read(buffer).also { bytesRead = it } != -<span class="hljs-number">1</span>) {
                        <span class="hljs-comment">// æ£€æŸ¥å–æ¶ˆ</span>
                        ensureActive()

                        output.write(buffer, <span class="hljs-number">0</span>, bytesRead)
                        downloadedSize += bytesRead

                        <span class="hljs-comment">// æŠ¥å‘Šè¿›åº¦</span>
                        <span class="hljs-keyword">val</span> progress = downloadedSize.toFloat() / totalSize
                        withContext(Dispatchers.Main) {
                            onProgress(progress)
                        }
                    }
                }
            }

            Result.success(file)
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            Result.failure(e)
        }
    }

    <span class="hljs-comment">/**
     * å…³é—­ä¸‹è½½å™¨
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">close</span><span class="hljs-params">()</span></span> {
        scope.cancel()
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> downloader = FileDownloader()

    <span class="hljs-keyword">val</span> tasks = listOf(
        DownloadTask(<span class="hljs-string">"https://example.com/file1.zip"</span>, <span class="hljs-string">"file1.zip"</span>),
        DownloadTask(<span class="hljs-string">"https://example.com/file2.zip"</span>, <span class="hljs-string">"file2.zip"</span>),
        DownloadTask(<span class="hljs-string">"https://example.com/file3.zip"</span>, <span class="hljs-string">"file3.zip"</span>)
    )

    println(<span class="hljs-string">"å¼€å§‹å¹¶å‘ä¸‹è½½..."</span>)
    <span class="hljs-keyword">val</span> startTime = System.currentTimeMillis()

    <span class="hljs-keyword">val</span> results = downloader.downloadFiles(tasks)

    <span class="hljs-keyword">val</span> elapsedTime = System.currentTimeMillis() - startTime
    println(<span class="hljs-string">"ä¸‹è½½å®Œæˆï¼Œè€—æ—¶: <span class="hljs-subst">${elapsedTime}</span>ms"</span>)

    results.forEachIndexed { index, result -&gt;
        result.fold(
            onSuccess = { file -&gt;
                println(<span class="hljs-string">"æ–‡ä»¶<span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span>ä¸‹è½½æˆåŠŸ: <span class="hljs-subst">${file.name}</span>"</span>)
            },
            onFailure = { error -&gt;
                println(<span class="hljs-string">"æ–‡ä»¶<span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span>ä¸‹è½½å¤±è´¥: <span class="hljs-subst">${error.message}</span>"</span>)
            }
        )
    }

    downloader.close()
}
</code></pre>
<p><strong>ä»£ç äº®ç‚¹</strong>ï¼š</p>
<ol>
<li><strong>SupervisorJob</strong>ï¼šä¸€ä¸ªæ–‡ä»¶å¤±è´¥ä¸å½±å“å…¶ä»–æ–‡ä»¶</li>
<li><strong>Dispatchers.IO</strong>ï¼šIOæ“ä½œä½¿ç”¨IOè°ƒåº¦å™¨</li>
<li><strong>async/awaitAll</strong>ï¼šå¹¶å‘ä¸‹è½½ï¼Œæé«˜æ•ˆç‡</li>
<li><strong>withTimeout</strong>ï¼šé˜²æ­¢ä¸‹è½½hangä½</li>
<li><strong>ensureActive</strong>ï¼šæ”¯æŒå–æ¶ˆä¸‹è½½</li>
<li><strong>withContext(Main)</strong>ï¼šåˆ‡æ¢åˆ°ä¸»çº¿ç¨‹æ›´æ–°UI</li>
</ol>
<h2 data-id="heading-32">å¸¸è§é™·é˜±ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-33">âŒ é™·é˜±1ï¼šåœ¨åç¨‹ä¸­é˜»å¡çº¿ç¨‹</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šä½¿ç”¨Thread.sleepé˜»å¡çº¿ç¨‹</span>
launch {
    Thread.sleep(<span class="hljs-number">1000</span>)  <span class="hljs-comment">// é˜»å¡äº†çº¿ç¨‹ï¼</span>
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨delayæŒ‚èµ·åç¨‹</span>
launch {
    delay(<span class="hljs-number">1000</span>)  <span class="hljs-comment">// åªæŒ‚èµ·åç¨‹ï¼Œä¸é˜»å¡çº¿ç¨‹</span>
}
</code></pre>
<h3 data-id="heading-34">âŒ é™·é˜±2ï¼šå¿˜è®°å¤„ç†å–æ¶ˆ</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šé•¿æ—¶é—´è®¡ç®—ä¸æ£€æŸ¥å–æ¶ˆ</span>
launch {
    <span class="hljs-keyword">var</span> sum = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.1_000_000_000</span>) {
        sum += i  <span class="hljs-comment">// æ— æ³•å–æ¶ˆ</span>
    }
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šå®šæœŸæ£€æŸ¥å–æ¶ˆ</span>
launch {
    <span class="hljs-keyword">var</span> sum = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.1_000_000_000</span>) {
        <span class="hljs-keyword">if</span> (i % <span class="hljs-number">1_000_000</span> == <span class="hljs-number">0</span>) {
            yield()  <span class="hljs-comment">// æ£€æŸ¥å–æ¶ˆ</span>
        }
        sum += i
    }
}
</code></pre>
<h3 data-id="heading-35">âŒ é™·é˜±3ï¼šåœ¨finallyä¸­è°ƒç”¨æŒ‚èµ·å‡½æ•°</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šfinallyä¸­çš„æŒ‚èµ·å‡½æ•°ä¼šè¢«å–æ¶ˆ</span>
launch {
    <span class="hljs-keyword">try</span> {
        delay(<span class="hljs-number">1000</span>)
    } <span class="hljs-keyword">finally</span> {
        delay(<span class="hljs-number">100</span>)  <span class="hljs-comment">// å¯èƒ½è¢«å–æ¶ˆ</span>
        cleanup()
    }
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨NonCancellable</span>
launch {
    <span class="hljs-keyword">try</span> {
        delay(<span class="hljs-number">1000</span>)
    } <span class="hljs-keyword">finally</span> {
        withContext(NonCancellable) {
            delay(<span class="hljs-number">100</span>)  <span class="hljs-comment">// ä¿è¯æ‰§è¡Œ</span>
            cleanup()
        }
    }
}
</code></pre>
<h3 data-id="heading-36">âœ… æœ€ä½³å®è·µ1ï¼šä½¿ç”¨structured concurrency</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ é¿å…ï¼šGlobalScopeå¯åŠ¨åç¨‹</span>
GlobalScope.launch {
    <span class="hljs-comment">// åç¨‹ç”Ÿå‘½å‘¨æœŸä¸å—æ§åˆ¶</span>
}

<span class="hljs-comment">// âœ… æ¨èï¼šä½¿ç”¨æ˜ç¡®çš„ä½œç”¨åŸŸ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> viewModelScope = CoroutineScope(
        SupervisorJob() + Dispatchers.Main
    )

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadData</span><span class="hljs-params">()</span></span> {
        viewModelScope.launch {
            <span class="hljs-comment">// åç¨‹ç”Ÿå‘½å‘¨æœŸä¸ViewModelç»‘å®š</span>
        }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCleared</span><span class="hljs-params">()</span></span> {
        viewModelScope.cancel()
    }
}
</code></pre>
<h3 data-id="heading-37">âœ… æœ€ä½³å®è·µ2ï¼šåˆç†é€‰æ‹©è°ƒåº¦å™¨</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… ç½‘ç»œè¯·æ±‚ â†’ IOè°ƒåº¦å™¨</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchUser</span><span class="hljs-params">()</span></span> = withContext(Dispatchers.IO) {
    api.getUser()
}

<span class="hljs-comment">// âœ… æ•°æ®å¤„ç† â†’ Defaultè°ƒåº¦å™¨</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">processData</span><span class="hljs-params">(<span class="hljs-keyword">data</span>: <span class="hljs-type">List</span>&lt;<span class="hljs-type">Int</span>&gt;)</span></span> = withContext(Dispatchers.Default) {
    <span class="hljs-keyword">data</span>.map { it * <span class="hljs-number">2</span> }.filter { it &gt; <span class="hljs-number">100</span> }
}

<span class="hljs-comment">// âœ… UIæ›´æ–° â†’ Mainè°ƒåº¦å™¨</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateUI</span><span class="hljs-params">(<span class="hljs-keyword">data</span>: <span class="hljs-type">String</span>)</span></span> = withContext(Dispatchers.Main) {
    textView.text = <span class="hljs-keyword">data</span>
}
</code></pre>
<h3 data-id="heading-38">âœ… æœ€ä½³å®è·µ3ï¼šä½¿ç”¨æŒ‚èµ·å‡½æ•°è€Œéå›è°ƒ</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ é¿å…ï¼šå›è°ƒé£æ ¼</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadData</span><span class="hljs-params">(callback: (<span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>&gt;) -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    thread {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = fetchFromNetwork()
            callback(Result.success(<span class="hljs-keyword">data</span>))
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            callback(Result.failure(e))
        }
    }
}

<span class="hljs-comment">// âœ… æ¨èï¼šæŒ‚èµ·å‡½æ•°</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadData</span><span class="hljs-params">()</span></span>: Result&lt;String&gt; = withContext(Dispatchers.IO) {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = fetchFromNetwork()
        Result.success(<span class="hljs-keyword">data</span>)
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        Result.failure(e)
    }
}
</code></pre>
<h2 data-id="heading-39">æ€§èƒ½å¯¹æ¯”</h2>
<p>è®©æˆ‘ä»¬ç”¨å®é™…æ•°æ®çœ‹çœ‹åç¨‹çš„æ€§èƒ½ä¼˜åŠ¿ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-comment">// æµ‹è¯•1ï¼šåˆ›å»º10ä¸‡ä¸ªåç¨‹</span>
    <span class="hljs-keyword">val</span> time1 = measureTimeMillis {
        <span class="hljs-keyword">val</span> jobs = List(<span class="hljs-number">100_000</span>) {
            launch {
                delay(<span class="hljs-number">1000</span>)
            }
        }
        jobs.forEach { it.join() }
    }
    println(<span class="hljs-string">"10ä¸‡ä¸ªåç¨‹è€—æ—¶: <span class="hljs-subst">${time1}</span>ms"</span>)  <span class="hljs-comment">// çº¦1000ms</span>

    <span class="hljs-comment">// æµ‹è¯•2ï¼šåˆ›å»º10ä¸‡ä¸ªçº¿ç¨‹ï¼ˆæ…ç”¨ï¼ï¼‰</span>
    <span class="hljs-comment">// å¤§å¤šæ•°ç³»ç»Ÿä¼šOOMæˆ–æå…¶ç¼“æ…¢</span>
}
</code></pre>
<p><strong>ç»“æœå¯¹æ¯”</strong>ï¼š</p>

























<table><thead><tr><th align="left">æ“ä½œ</th><th align="left">çº¿ç¨‹</th><th align="left">åç¨‹</th></tr></thead><tbody><tr><td align="left">åˆ›å»º10ä¸‡ä¸ª</td><td align="left">âŒ OOMæˆ–ææ…¢</td><td align="left">âœ… çº¦1ç§’</td></tr><tr><td align="left">å†…å­˜å ç”¨</td><td align="left">çº¦100GB</td><td align="left">çº¦å‡ MB</td></tr><tr><td align="left">åˆ‡æ¢æˆæœ¬</td><td align="left">é«˜ï¼ˆå¾®ç§’çº§ï¼‰</td><td align="left">ä½ï¼ˆçº³ç§’çº§ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-40">å°ç»“</h2>
<p>æœ¬æ–‡ä»‹ç»äº†Kotlinåç¨‹çš„æ ¸å¿ƒæ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•ï¼š</p>
<h3 data-id="heading-41">æ ¸å¿ƒæ¦‚å¿µ</h3>
<ol>
<li><strong>åç¨‹</strong>ï¼šè½»é‡çº§çº¿ç¨‹ï¼Œå¯æŒ‚èµ·ã€éé˜»å¡</li>
<li><strong>æŒ‚èµ·å‡½æ•°</strong>ï¼šç”¨<code>suspend</code>ä¿®é¥°ï¼Œå¯ä»¥æš‚åœå’Œæ¢å¤</li>
<li><strong>åç¨‹æ„å»ºå™¨</strong>ï¼š<code>launch</code>ã€<code>async</code>ã€<code>runBlocking</code></li>
<li><strong>ç»“æ„åŒ–å¹¶å‘</strong>ï¼šåç¨‹å¿…é¡»åœ¨ä½œç”¨åŸŸå†…å¯åŠ¨</li>
</ol>
<h3 data-id="heading-42">å…³é”®æŠ€èƒ½</h3>
<ol>
<li><strong>åˆ›å»ºåç¨‹</strong>ï¼šä½¿ç”¨launch/asyncå¯åŠ¨åç¨‹</li>
<li><strong>åˆ‡æ¢çº¿ç¨‹</strong>ï¼šä½¿ç”¨Dispatcherså’ŒwithContext</li>
<li><strong>å–æ¶ˆåç¨‹</strong>ï¼šåä½œå¼å–æ¶ˆï¼Œä½¿ç”¨isActive/yield</li>
<li><strong>å¼‚å¸¸å¤„ç†</strong>ï¼šç†è§£ä¼ æ’­è§„åˆ™ï¼Œä½¿ç”¨SupervisorJob</li>
<li><strong>å¹¶å‘ç¼–ç¨‹</strong>ï¼šasync/awaitå®ç°å¹¶å‘</li>
</ol>
<h3 data-id="heading-43">æœ€ä½³å®è·µ</h3>
<ul>
<li>âœ… ä½¿ç”¨ç»“æ„åŒ–å¹¶å‘ï¼Œé¿å…GlobalScope</li>
<li>âœ… åˆç†é€‰æ‹©è°ƒåº¦å™¨</li>
<li>âœ… ä½¿ç”¨delayè€ŒéThread.sleep</li>
<li>âœ… å®šæœŸæ£€æŸ¥å–æ¶ˆçŠ¶æ€</li>
<li>âœ… ä½¿ç”¨supervisorScopeå¤„ç†ç‹¬ç«‹ä»»åŠ¡</li>
</ul>
<h3 data-id="heading-44">ä¸‹æœŸé¢„å‘Š</h3>
<p>ä¸‹ä¸€ç¯‡æ–‡ç« ã€ŠKotlinåç¨‹åŸç†ä¸å®æˆ˜ï¼ˆä¸‹ï¼‰ï¼šFlowä¸Channelã€‹å°†ä»‹ç»ï¼š</p>
<ul>
<li><strong>Flow</strong>ï¼šå“åº”å¼ç¼–ç¨‹çš„åç¨‹å®ç°</li>
<li><strong>Channel</strong>ï¼šåç¨‹ä¹‹é—´çš„é€šä¿¡</li>
<li><strong>StateFlow/SharedFlow</strong>ï¼šçŠ¶æ€ç®¡ç†</li>
<li><strong>å®æˆ˜æ¡ˆä¾‹</strong>ï¼šæ„å»ºå“åº”å¼æ•°æ®æµ</li>
</ul>
<h2 data-id="heading-45">ç»ƒä¹ é¢˜</h2>
<h3 data-id="heading-46">åŸºç¡€ç»ƒä¹ </h3>
<p><strong>ç»ƒä¹ 1</strong>ï¼šå®ç°ä¸€ä¸ªå¹¶å‘åŠ è½½å›¾ç‰‡çš„å‡½æ•°</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadImages</span><span class="hljs-params">(urls: <span class="hljs-type">List</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span>: List&lt;Bitmap&gt; {
    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> å¹¶å‘åŠ è½½æ‰€æœ‰å›¾ç‰‡</span>
    <span class="hljs-comment">// æç¤ºï¼šä½¿ç”¨asyncå’ŒawaitAll</span>
}
</code></pre>
<p><strong>ç»ƒä¹ 2</strong>ï¼šå®ç°ä¸€ä¸ªå¸¦é‡è¯•çš„ç½‘ç»œè¯·æ±‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">retryRequest</span><span class="hljs-params">(
    times: <span class="hljs-type">Int</span> = <span class="hljs-number">3</span>,
    delayMillis: <span class="hljs-type">Long</span> = <span class="hljs-number">1000</span>,
    block: <span class="hljs-type">suspend</span> () -&gt; <span class="hljs-type">T</span>
)</span></span>: T {
    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> å¤±è´¥æ—¶é‡è¯•ï¼Œæœ€å¤šé‡è¯•timesæ¬¡</span>
}
</code></pre>
<h3 data-id="heading-47">è¿›é˜¶ç»ƒä¹ </h3>
<p><strong>ç»ƒä¹ 3</strong>ï¼šå®ç°ä¸€ä¸ªåç¨‹æ± </p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CoroutinePool</span>(
    <span class="hljs-keyword">val</span> maxConcurrent: <span class="hljs-built_in">Int</span>
) {
    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> é™åˆ¶åŒæ—¶è¿è¡Œçš„åç¨‹æ•°é‡</span>
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">execute</span><span class="hljs-params">(block: <span class="hljs-type">suspend</span> () -&gt; <span class="hljs-type">T</span>)</span></span>: T {
        <span class="hljs-comment">// å®ç°å¹¶å‘æ§åˆ¶</span>
    }
}
</code></pre>
<p><strong>ç»ƒä¹ 4</strong>ï¼šå®ç°ä¸€ä¸ªè¿›åº¦èšåˆå™¨</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ProgressAggregator</span>(
    <span class="hljs-keyword">val</span> taskCount: <span class="hljs-built_in">Int</span>
) {
    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> èšåˆå¤šä¸ªä»»åŠ¡çš„è¿›åº¦</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateProgress</span><span class="hljs-params">(taskId: <span class="hljs-type">Int</span>, progress: <span class="hljs-type">Float</span>)</span></span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getTotalProgress</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Float</span>
}
</code></pre>
<h2 data-id="heading-48">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fkotlinlang.org%2Fdocs%2Fcoroutines-guide.html" target="_blank" title="https://kotlinlang.org/docs/coroutines-guide.html" ref="nofollow noopener noreferrer">Kotlinå®˜æ–¹åç¨‹æŒ‡å—</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FKotlin%2Fkotlinx.coroutines" target="_blank" title="https://github.com/Kotlin/kotlinx.coroutines" ref="nofollow noopener noreferrer">Kotlin Coroutinesæºç </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fkotlin%2Fcoroutines" target="_blank" title="https://developer.android.com/kotlin/coroutines" ref="nofollow noopener noreferrer">Androidåç¨‹æœ€ä½³å®è·µ</a></li>
</ul>
<hr/>
<p><strong>ç³»åˆ—æ–‡ç« å¯¼èˆª:</strong></p>
<ul>
<li>ğŸ‘‰ ä¸Šä¸€ç¯‡: <a href="https://juejin.cn/post/7596906473306275890" target="_blank" title="https://juejin.cn/post/7596906473306275890">å§”æ‰˜æœºåˆ¶ä¸å±æ€§å§”æ‰˜å®æˆ˜ï¼šç»„åˆä¼˜äºç»§æ‰¿çš„æœ€ä½³å®è·µ</a></li>
</ul>
<hr/>
<p><em>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©,æ¬¢è¿ç‚¹èµã€æ”¶è—ã€åˆ†äº«!æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®,æ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºã€‚è®©æˆ‘ä»¬ä¸€èµ·å­¦ä¹ ,ä¸€èµ·æˆé•¿!</em></p>
<p><em>ä¹Ÿæ¬¢è¿è®¿é—®æˆ‘çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top" target="_blank" title="https://home.wonlab.top" ref="nofollow noopener noreferrer">ä¸ªäººä¸»é¡µ</a>å‘ç°æ›´å¤šå®è—èµ„æº</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ComposeåŸç†å››ä¹‹é‡ç»„]]></title>    <link>https://juejin.cn/post/7597276695403708457</link>    <guid>https://juejin.cn/post/7597276695403708457</guid>    <pubDate>2026-01-20T14:47:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597276695403708457" data-draft-id="7594854295759519787" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ComposeåŸç†å››ä¹‹é‡ç»„"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-20T14:47:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è£´äº‘é£"/> <meta itemprop="url" content="https://juejin.cn/user/3734361144570285"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ComposeåŸç†å››ä¹‹é‡ç»„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3734361144570285/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è£´äº‘é£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T14:47:57.000Z" title="Tue Jan 20 2026 14:47:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>é¦–æ¬¡ç»„åˆæŒ‡çš„æ˜¯ç¬¬ä¸€æ¬¡æ‰§è¡Œå‡½æ•°ï¼Œåœ¨<a href="https://juejin.cn/post/7595043440520265734#heading-36" target="_blank" title="https://juejin.cn/post/7595043440520265734#heading-36">ComposeåŸç†ä¸‰ä¹‹SlotTable</a>æ–‡ç« ä¸­è®²è§£çš„å°±æ˜¯é¦–æ¬¡ç»„åˆï¼Œä½†æ˜¯ä¸€ä¸ªé¡µé¢è¿˜ä¼šæœ‰å„ç§å„æ ·çš„åˆ·æ–°æ“ä½œï¼Œå£°æ˜å¼UIçš„åˆ·æ–°é çš„æ˜¯é‡æ–°æ‰§è¡Œå‡½æ•°ï¼Œé‡ç»„å°±æ˜¯é‡æ–°æ‰§è¡Œå‡½æ•°ã€‚è¦æƒ³çŸ¥é“é‡ç»„åŸç†ï¼Œå°±å¾—å…ˆçŸ¥é“å¿«ç…§ã€‚åœ¨<a href="https://juejin.cn/post/7591360623469215754#heading-42" target="_blank" title="https://juejin.cn/post/7591360623469215754#heading-42">ComposeåŸç†ä¸€ä¹‹å¿«ç…§ç³»ç»Ÿ</a>æ–‡ç« ä¸­é€šè¿‡ä¾‹å­æ¥è®²è§£å¿«ç…§æ˜¯èƒ½å¤Ÿä¿å­˜å†å²çŠ¶æ€çš„åŸå› ï¼Œå¹¶æ²¡æœ‰è·ŸComposeå…³è”èµ·æ¥ã€‚æœ¬æ–‡å°†ä¼šæŠŠComposeå’Œå¿«ç…§å…³è”èµ·æ¥ï¼Œçœ‹çœ‹Composeæ˜¯å¦‚ä½•å€ŸåŠ©å¿«ç…§æ¥å®ç°é‡ç»„ã€‚</p>
<h2 data-id="heading-1">äºŒã€å¿«ç…§</h2>
<h3 data-id="heading-2">ç¤ºä¾‹ä»£ç </h3>
<p>ä¾ç„¶ç”¨ä¸‹é¢çš„ç¤ºä¾‹ä»£ç </p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">Count</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> content <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-number">0</span>) }
    
    Button({
        content++
    }, content = {
        Text(content.toString())
    })
}
</code></pre>
<h3 data-id="heading-3">Recomposer.composing</h3>
<p>é¦–æ¬¡ç»„åˆçš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯åœ¨è°ƒç”¨Countå‡½æ•°ä¹‹å‰ï¼Œ<code>Recomposer.composing</code>å°±åˆ›å»ºäº†å¿«ç…§ï¼Œå¹¶ä¸”æ³¨å†Œè¯»è§‚å¯Ÿè€…å’Œå†™è§‚å¯Ÿè€…ã€‚<code>takeMutableSnapshot</code>åˆ›å»ºçš„æ˜¯å¯å˜å¿«ç…§ï¼Œæ”¯æŒçŠ¶æ€ä¿®æ”¹å’Œéš”ç¦»ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Recomposer.composing</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">composing</span><span class="hljs-params">(
    composition: <span class="hljs-type">ControlledComposition</span>,
    modifiedValues: <span class="hljs-type">MutableScatterSet</span>&lt;<span class="hljs-type">Any</span>&gt;?,
    block: () -&gt; <span class="hljs-type">T</span>,
)</span></span>: T {
    <span class="hljs-comment">// åˆ›å»ºå¿«ç…§</span>
    <span class="hljs-keyword">val</span> snapshot =
        Snapshot.takeMutableSnapshot(
            <span class="hljs-comment">// å½“è¯»å–æ•°æ®çš„æ—¶å€™ï¼Œèƒ½æ”¶åˆ°å›è°ƒ</span>
            readObserverOf(composition),
            <span class="hljs-comment">// å½“å†™æ•°æ®çš„æ—¶å€™ï¼Œèƒ½æ”¶åˆ°å›è°ƒ</span>
            writeObserverOf(composition, modifiedValues),
        )
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// è¿›å…¥å¿«ç…§</span>
        <span class="hljs-keyword">return</span> snapshot.enter(block)
    } <span class="hljs-keyword">finally</span> {
        applyAndCheck(snapshot)
    }
}
</code></pre>
<h3 data-id="heading-4">å¿«ç…§ç±»å‹è¯¦è§£</h3>
<h4 data-id="heading-5">GlobalSnapshot</h4>
<p>å…¨å±€å”¯ä¸€ï¼Œæ‰€æœ‰çº¿ç¨‹å…±äº«çš„é»˜è®¤å¿«ç…§ã€‚</p>
<h4 data-id="heading-6">MutableSnapshot</h4>
<p>å¯å˜å¿«ç…§ï¼Œæ”¯æŒçŠ¶æ€ä¿®æ”¹å’Œéš”ç¦»ï¼ŒComposeåˆ›å»ºçš„å°±æ˜¯è¿™ä¸ªå¿«ç…§ã€‚</p>
<h4 data-id="heading-7">ReadonlySnapshot</h4>
<p>åªè¯»å¿«ç…§ï¼Œåªèƒ½è§‚å¯Ÿä¸èƒ½ä¿®æ”¹ã€‚</p>
<h4 data-id="heading-8">NestedMutableSnapshot</h4>
<p>åµŒå¥—å¯å˜å¿«ç…§ï¼Œapplyåˆ°çˆ¶å¿«ç…§ã€‚</p>
<h4 data-id="heading-9">TransparentObserverMutableSnapshot</h4>
<p>é€æ˜è§‚å¯Ÿè€…å¿«ç…§ï¼Œåªæ·»åŠ è§‚å¯Ÿè€…ä¸éš”ç¦»ã€‚</p>
<h3 data-id="heading-10">snapshot.enter è¿›å…¥å¿«ç…§</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">enter</span><span class="hljs-params">(block: () -&gt; <span class="hljs-type">T</span>)</span></span>: T {
    <span class="hljs-keyword">val</span> previous = makeCurrent()
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">return</span> block()
    } <span class="hljs-keyword">finally</span> {
        restoreCurrent(previous)
    }
}
</code></pre>
<h3 data-id="heading-11">makeCurrent</h3>
<p>é»˜è®¤æƒ…å†µä¸‹ä¼šåˆ›å»ºå…¨å±€å¿«ç…§ï¼Œæ‰€æœ‰çº¿ç¨‹å…±äº«çš„é»˜è®¤å¿«ç…§ã€‚ç¬¬ä¸€æ¬¡è·å–<code>threadSnapshot.get()</code>å¿«ç…§ä¸ºç©ºã€‚æ¥ä¸‹æ¥å°†MutableSnapshotè®¾ä¸ºå½“å‰å¿«ç…§ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">open</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">makeCurrent</span><span class="hljs-params">()</span></span>: Snapshot? {
    <span class="hljs-comment">// previousä¸ºç©º</span>
    <span class="hljs-keyword">val</span> previous = threadSnapshot.<span class="hljs-keyword">get</span>()
    <span class="hljs-comment">// å°†MutableSnapshotè®¾ä¸ºå½“å‰å¿«ç…§</span>
    threadSnapshot.<span class="hljs-keyword">set</span>(<span class="hljs-keyword">this</span>)
    <span class="hljs-keyword">return</span> previous
}
</code></pre>
<p>ç°åœ¨é€šè¿‡<code>Snapshot.current</code>è¿”å›å°±æ˜¯Composeåˆ›å»ºçš„MutableSnapshotå¯å˜å¿«ç…§ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">enter</span><span class="hljs-params">(block: () -&gt; <span class="hljs-type">T</span>)</span></span>: T {
    <span class="hljs-keyword">val</span> previous = makeCurrent()
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// åœ¨Countå‡½æ•°ä¸­è·å–çš„å¿«ç…§å°±æ˜¯Composeåˆ›å»ºçš„MutableSnapshotå¯å˜å¿«ç…§</span>
        <span class="hljs-keyword">return</span> block()
    } <span class="hljs-keyword">finally</span> {
        restoreCurrent(previous)
    }
}
</code></pre>
<p>åˆ°æ­¤æˆ‘ä»¬è®°ä½ï¼Œ<strong>åœ¨Countå‡½æ•°ä¸­è·å–çš„å¿«ç…§å°±æ˜¯Composeåˆ›å»ºçš„MutableSnapshotå¯å˜å¿«ç…§ã€‚</strong></p>
<h3 data-id="heading-12">mutableStateOf(0)</h3>
<p><code>mutableStateOf</code>åˆ›å»ºçš„æ˜¯<code>SnapshotMutableStateImpl</code>å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¼šè¢«ä¿å­˜åˆ°slotsæ•°ç»„ï¼Œä»€ä¹ˆä¿å­˜åˆ°slotsæ•°ç»„é‡Œé¢å‘¢ï¼Ÿç­”æ¡ˆå°±åœ¨<code>remember</code>å‡½æ•°ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">mutableStateOf</span><span class="hljs-params">(
    value: <span class="hljs-type">T</span>,
    policy: <span class="hljs-type">SnapshotMutationPolicy</span>&lt;<span class="hljs-type">T</span>&gt; = structuralEqualityPolicy()</span></span>,
): MutableState&lt;T&gt; = createSnapshotMutableState(value, policy)

<span class="hljs-keyword">internal</span> <span class="hljs-keyword">expect</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">createSnapshotMutableState</span><span class="hljs-params">(
    value: <span class="hljs-type">T</span>,
    policy: <span class="hljs-type">SnapshotMutationPolicy</span>&lt;<span class="hljs-type">T</span>&gt;,
)</span></span>: SnapshotMutableState&lt;T&gt;


<span class="hljs-keyword">internal</span> <span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SnapshotMutableStateImpl</span>&lt;<span class="hljs-type">T</span>&gt;(
    value: T,
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> policy: SnapshotMutationPolicy&lt;T&gt;,
) : StateObjectImpl(), SnapshotMutableState&lt;T&gt; {
    <span class="hljs-meta">@Suppress(<span class="hljs-string">"UNCHECKED_CAST"</span>)</span>
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">var</span> value: T
        <span class="hljs-comment">// å–å€¼çš„æ—¶å€™æ‰§è¡Œ</span>
        <span class="hljs-keyword">get</span>() = next.readable(<span class="hljs-keyword">this</span>).value
        <span class="hljs-comment">// ä¿®æ”¹å€¼çš„æ—¶å€™æ‰§è¡Œ</span>
        <span class="hljs-keyword">set</span>(value) =
            next.withCurrent {
                <span class="hljs-keyword">if</span> (!policy.equivalent(it.value, value)) {
                    next.overwritable(<span class="hljs-keyword">this</span>, it) { <span class="hljs-keyword">this</span>.value = value }
                }
            }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> next: StateStateRecord&lt;T&gt; =
        currentSnapshot().let { snapshot -&gt;
            StateStateRecord(snapshot.snapshotId, value).also {
                <span class="hljs-keyword">if</span> (snapshot !<span class="hljs-keyword">is</span> GlobalSnapshot) {
                    it.next = StateStateRecord(Snapshot.PreexistingSnapshotId.toSnapshotId(), value)
                }
            }
        }
}
</code></pre>
<h3 data-id="heading-13">remember</h3>
<p><code>remember</code>å‡½æ•°åœ¨é¦–æ¬¡ç»„åˆçš„æ—¶å€™ä¼šè°ƒç”¨<code>mutableStateOf</code>ï¼Œè¿”å›<code>SnapshotMutableStateImpl</code>å¯¹è±¡ï¼Œå°†<code>SnapshotMutableStateImpl</code>å¯¹è±¡ä¿å­˜åˆ°<code>slots</code>æ•°ç»„ï¼Œè¿”å›å°†<code>SnapshotMutableStateImpl</code>å¯¹è±¡ã€‚</p>
<p>é‡ç»„çš„æ—¶å€™ï¼Œç”±äº<code>slots</code>æ•°ç»„å·²ç»æœ‰<code>SnapshotMutableStateImpl</code>å¯¹è±¡ï¼Œç›´æ¥è¿”å›<code>SnapshotMutableStateImpl</code>å¯¹è±¡ã€‚ä¸ç®¡<code>remember</code>å‡½æ•°é‡å¤æ‰§è¡Œå¤šå°‘æ¬¡ï¼Œæ¯æ¬¡è·å–åˆ°çš„éƒ½æ˜¯åŒä¸€ä¸ª<code>SnapshotMutableStateImpl</code>å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">remember</span><span class="hljs-params">(<span class="hljs-keyword">crossinline</span> calculation: @<span class="hljs-type">DisallowComposableCalls</span> () -&gt; <span class="hljs-type">T</span>)</span></span>: T =
    currentComposer.cache(<span class="hljs-literal">false</span>, calculation)

<span class="hljs-keyword">public</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> Composer.<span class="hljs-title">cache</span><span class="hljs-params">(invalid: <span class="hljs-type">Boolean</span>, block: @<span class="hljs-type">DisallowComposableCalls</span> () -&gt; <span class="hljs-type">T</span>)</span></span>: T {
    <span class="hljs-meta">@Suppress(<span class="hljs-string">"UNCHECKED_CAST"</span>)</span>
    <span class="hljs-comment">// å…ˆä»slotsæ•°ç»„è·å–</span>
    <span class="hljs-keyword">return</span> rememberedValue().let {
        <span class="hljs-comment">// é¦–æ¬¡ç»„åˆçš„æ—¶å€™è·å–è‚¯å®šä¸ºç©º</span>
        <span class="hljs-keyword">if</span> (invalid || it === Composer.Empty) {
            <span class="hljs-comment">// è°ƒç”¨mutableStateOfï¼Œè¿”å›SnapshotMutableStateImplå¯¹è±¡</span>
            <span class="hljs-keyword">val</span> value = block()
            <span class="hljs-comment">// å°†SnapshotMutableStateImplå¯¹è±¡ä¿å­˜åˆ°slotsæ•°ç»„</span>
            updateRememberedValue(value)
            value
        } <span class="hljs-keyword">else</span> it <span class="hljs-comment">// é‡ç»„çš„æ—¶å€™ï¼Œç›´æ¥è¿”å›SnapshotMutableStateImplå¯¹è±¡</span>
    } <span class="hljs-keyword">as</span> T
}
</code></pre>
<h3 data-id="heading-14">Text(content.toString())</h3>
<p>é¦–æ¬¡ç»„åˆï¼Œè°ƒç”¨<code>Text(content.toString())</code>ä»<code>SnapshotMutableStateImpl</code>ä¸­å–å€¼ï¼Œè°ƒç”¨åˆ°<code>next.readable(this).value</code>ï¼Œvalueå°±æ˜¯<code>var content by remember { mutableStateOf(0) }</code>ä¸­çš„0äº†ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SnapshotMutableStateImpl</span>&lt;<span class="hljs-type">T</span>&gt;(
    value: T,
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> policy: SnapshotMutationPolicy&lt;T&gt;,
) : StateObjectImpl(), SnapshotMutableState&lt;T&gt; {
    <span class="hljs-meta">@Suppress(<span class="hljs-string">"UNCHECKED_CAST"</span>)</span>
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">var</span> value: T
        <span class="hljs-comment">// å–å€¼çš„æ—¶å€™æ‰§è¡Œ</span>
        <span class="hljs-keyword">get</span>() = next.readable(<span class="hljs-keyword">this</span>).value
        <span class="hljs-comment">// ä¿®æ”¹å€¼çš„æ—¶å€™æ‰§è¡Œ</span>
        <span class="hljs-keyword">set</span>(value) =
            next.withCurrent {
                <span class="hljs-keyword">if</span> (!policy.equivalent(it.value, value)) {
                    next.overwritable(<span class="hljs-keyword">this</span>, it) { <span class="hljs-keyword">this</span>.value = value }
                }
            }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> next: StateStateRecord&lt;T&gt; =
        currentSnapshot().let { snapshot -&gt;
            StateStateRecord(snapshot.snapshotId, value).also {
                <span class="hljs-keyword">if</span> (snapshot !<span class="hljs-keyword">is</span> GlobalSnapshot) {
                    it.next = StateStateRecord(Snapshot.PreexistingSnapshotId.toSnapshotId(), value)
                }
            }
        }
}
</code></pre>
<h3 data-id="heading-15">readable</h3>
<p>å…³é”®æ¥äº†ï¼Œ<code>Snapshot.current</code>è·å–åˆ°çš„å¿«ç…§æ˜¯Composeåˆ›å»ºçš„å¯å˜å¿«ç…§ï¼Œç”±äºComposeåœ¨åˆ›å»ºå¿«ç…§çš„æ—¶å€™ï¼Œæ³¨å†Œäº†è¯»è§‚å¯Ÿè€…ï¼Œ<code>snapshot.readObserver?.invoke(state)</code>å°±æ˜¯é€šçŸ¥Composeæ‰§è¡Œã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : StateRecord&gt;</span> T.<span class="hljs-title">readable</span><span class="hljs-params">(state: <span class="hljs-type">StateObject</span>)</span></span>: T {
    <span class="hljs-comment">// è·å–åˆ°çš„å¿«ç…§æ˜¯Composeåˆ›å»ºçš„å¯å˜å¿«ç…§</span>
    <span class="hljs-keyword">val</span> snapshot = Snapshot.current
    <span class="hljs-comment">// é€šçŸ¥Composeæ‰§è¡Œ</span>
    snapshot.readObserver?.invoke(state)
    <span class="hljs-keyword">return</span> readable(<span class="hljs-keyword">this</span>, snapshot.snapshotId, snapshot.invalid)
        ?: sync {
            <span class="hljs-comment">// Readable can return null when the global snapshot has been advanced by another thread</span>
            <span class="hljs-comment">// and state written to the object was overwritten while this thread was paused.</span>
            <span class="hljs-comment">// Repeating the read is valid here as either this will return the same result as</span>
            <span class="hljs-comment">// the previous call or will find a valid record. Being in a sync block prevents other</span>
            <span class="hljs-comment">// threads from writing to this state object until the read completes.</span>
            <span class="hljs-keyword">val</span> syncSnapshot = Snapshot.current
            <span class="hljs-meta">@Suppress(<span class="hljs-string">"UNCHECKED_CAST"</span>)</span>
            readable(state.firstStateRecord <span class="hljs-keyword">as</span> T, syncSnapshot.snapshotId, syncSnapshot.invalid)
                ?: readError()
        }
}
</code></pre>
<p>åˆšåˆšæåˆ°ï¼Œ<code>Recompose.composing</code>åˆ›å»ºå¿«ç…§çš„æ—¶å€™ï¼Œæ³¨å†Œäº†è¯»è§‚å¯Ÿè€…ï¼Œ<code>snapshot.readObserver?.invoke(state)</code>å°±ä¼šè°ƒç”¨åˆ°<code>readObserverOf</code>ï¼Œè¿›è€Œè°ƒç”¨åˆ°<code>Composition.recordReadOf</code>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Recomposer.kt</span>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">readObserverOf</span><span class="hljs-params">(composition: <span class="hljs-type">ControlledComposition</span>)</span></span>: (Any) -&gt; <span class="hljs-built_in">Unit</span> {
    <span class="hljs-keyword">return</span> { value -&gt; composition.recordReadOf(value) }
}

<span class="hljs-comment">// Composition.kt</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">recordReadOf</span><span class="hljs-params">(value: <span class="hljs-type">Any</span>)</span></span> {
    <span class="hljs-comment">// Not acquiring lock since this happens during composition with it already held</span>
    <span class="hljs-keyword">if</span> (!areChildrenComposing) {
        <span class="hljs-comment">// å–å‡ºå½“å‰çš„é‡ç»„ä½œç”¨åŸŸå¯¹è±¡ï¼Œå½“å‰çš„é‡ç»„ä½œç”¨åŸŸå¯¹è±¡æ˜¯è°ï¼Ÿ</span>
        composer.currentRecomposeScope?.let { scope -&gt;
            scope.used = <span class="hljs-literal">true</span>

            <span class="hljs-keyword">val</span> alreadyRead = scope.recordRead(value)

            observer()?.onReadInScope(scope, value)

            <span class="hljs-keyword">if</span> (!alreadyRead) {
                <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">is</span> StateObjectImpl) {
                    value.recordReadIn(ReaderKind.Composition)
                }

                observations.add(value, scope)

                <span class="hljs-comment">// Record derived state dependency mapping</span>
                <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">is</span> DerivedState&lt;*&gt;) {
                    <span class="hljs-keyword">val</span> record = value.currentRecord
                    derivedStates.removeScope(value)
                    record.dependencies.forEachKey { dependency -&gt;
                        <span class="hljs-keyword">if</span> (dependency <span class="hljs-keyword">is</span> StateObjectImpl) {
                            dependency.recordReadIn(ReaderKind.Composition)
                        }
                        derivedStates.add(dependency, value)
                    }
                    scope.recordDerivedStateValue(value, record.currentValue)
                }
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-16">currentRecomposeScope</h3>
<p>ä»å¤±æ•ˆæ ˆä¸­è·å–é‡ç»„ä½œç”¨åŸŸå¯¹è±¡ï¼Œæ ˆé¡¶çš„é‡ç»„ä½œç”¨åŸŸå¯¹è±¡æ˜¯å“ªä¸ªï¼Ÿ</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">internal</span> val currentRecomposeScope: RecomposeScopeImpl?
    <span class="hljs-keyword">get</span>() =
        invalidateStack.<span class="hljs-keyword">let</span> {
            <span class="hljs-keyword">if</span> (childrenComposing == <span class="hljs-number">0</span> &amp;&amp; it.isNotEmpty()) it.peek() <span class="hljs-keyword">else</span> <span class="hljs-literal">null</span>
        }
</code></pre>
<p>é¦–æ¬¡ç»„åˆè°ƒç”¨Countå‡½æ•°ä¼šå…ˆè°ƒç”¨<code>startRestartGroup</code>ï¼Œ<code>startRestartGroup</code>è°ƒç”¨<code>addRecomposeScope</code>ã€‚æ²¡é”™ï¼Œå°±æ˜¯åœ¨<code>addRecomposeScope</code>é‡Œé¢åˆ›å»ºäº†é‡ç»„ä½œç”¨åŸŸå¯¹è±¡ï¼Œå°†å…¶æ”¾å…¥åˆ°å¤±æ•ˆæ ˆä¸­ã€‚ä»<code>currentRecomposeScope</code>è·å–çš„é‡ç»„ä½œç”¨åŸŸå¯¹è±¡å°±æ˜¯åœ¨<code>startRestartGroup</code>åˆ›å»ºçš„é‡ç»„ä½œç”¨åŸŸå¯¹è±¡ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startRestartGroup</span><span class="hljs-params">(key: <span class="hljs-type">Int</span>)</span></span>: Composer {
    startReplaceGroup(key)
    addRecomposeScope()
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>
}

<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addRecomposeScope</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">if</span> (inserting) {
        <span class="hljs-comment">// åˆ›å»ºé‡ç»„ä½œç”¨åŸŸå¯¹è±¡</span>
        <span class="hljs-keyword">val</span> scope = RecomposeScopeImpl(composition <span class="hljs-keyword">as</span> CompositionImpl)
        <span class="hljs-comment">// æ”¾å…¥åˆ°å¤±æ•ˆæ ˆä¸­</span>
        invalidateStack.push(scope)
        updateValue(scope)
        enterRecomposeScope(scope)
    }
    
</code></pre>
<p>å›åˆ°<code>recordReadOf</code>æ–¹æ³•ï¼Œå‚æ•°valueæ˜¯<code>SnapshotMutableState</code>çŠ¶æ€å¯¹è±¡ï¼Œè·å–æ ˆé¡¶çš„é‡ç»„ä½œç”¨åŸŸå¯¹è±¡ï¼Œå°†çŠ¶æ€å¯¹è±¡ä¸é‡ç»„ä½œç”¨åŸŸå¯¹è±¡å»ºç«‹æ˜ å°„ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Composition.kt</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">recordReadOf</span><span class="hljs-params">(value: <span class="hljs-type">Any</span>)</span></span> {
    <span class="hljs-keyword">if</span> (!areChildrenComposing) {
        <span class="hljs-comment">// å–å‡ºå½“å‰çš„é‡ç»„ä½œç”¨åŸŸå¯¹è±¡ï¼Œå°±æ˜¯åœ¨`startRestartGroup`åˆ›å»ºé‡ç»„ä½œç”¨åŸŸå¯¹è±¡</span>
        composer.currentRecomposeScope?.let { scope -&gt;
            scope.used = <span class="hljs-literal">true</span>
            <span class="hljs-keyword">val</span> alreadyRead = scope.recordRead(value)
            
            <span class="hljs-keyword">if</span> (!alreadyRead) {
                  <span class="hljs-comment">// å»ºç«‹çŠ¶æ€å¯¹è±¡ä¸é‡ç»„ä½œç”¨åŸŸå¯¹è±¡çš„æ˜ å°„</span>
                observations.add(value, scope)
            }
        }
    }
}
</code></pre>
<p>åˆ°æ­¤ä¸ºæ­¢ï¼Œ<code>Text(content.toString())</code>å–å€¼çš„é€»è¾‘å°±ç»“æŸäº†ã€‚ç¨ç¨çš„æ€»ç»“ä¸‹ï¼š
<strong>Composeåœ¨è°ƒç”¨Composeå‡½æ•°å‰ï¼Œå°±åˆ›å»ºäº†å¯å˜å¿«ç…§ï¼Œå½“å–å€¼çš„æ—¶å€™ï¼ŒçŠ¶æ€å¯¹è±¡ä¸é‡ç»„ä½œç”¨åŸŸå¯¹è±¡å­˜åœ¨æ˜ å°„å…³ç³»</strong>ã€‚è¿™ä¸ªéšå°„åé¢ä¼šç”¨åˆ°ï¼Œå¤§å®¶å…ˆè®°ä½ã€‚</p>
<h2 data-id="heading-17">ä¸‰ã€é‡ç»„</h2>
<p>é¦–æ¬¡ç»„åˆï¼Œåˆ›å»ºå¿«ç…§ï¼Œé¦–æ¬¡è·å–çŠ¶æ€ï¼Œä¼šå°†çŠ¶æ€å¯¹è±¡ä¸é‡ç»„ä½œç”¨åŸŸå¯¹è±¡å»ºç«‹æ˜ å°„å…³ç³»ã€‚çŸ¥é“äº†è¿™ä¸ªï¼Œå°±å¯ä»¥æ¥çœ‹é‡ç»„çš„åŸç†ã€‚ç‚¹å‡»æŒ‰é’®ï¼Œè§¦å‘çŠ¶æ€ä¿®æ”¹ï¼Œç”±äºåˆ›å»ºäº†å¿«ç…§ï¼Œåˆæ³¨å†Œäº†å†™è§‚å¯Ÿè€…ï¼Œæ­£å¸¸åº”å½“æ˜¯èƒ½æ”¶åˆ°å›è°ƒï¼Œäº‹å®çœŸçš„æ˜¯è¿™æ ·å—ï¼Ÿ</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">Count</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> content <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-number">0</span>) }
    
    Button({
        content++
    }, content = {
        Text(content.toString())
    })
}

<span class="hljs-comment">// Recomposer.composing</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">composing</span><span class="hljs-params">(
    composition: <span class="hljs-type">ControlledComposition</span>,
    modifiedValues: <span class="hljs-type">MutableScatterSet</span>&lt;<span class="hljs-type">Any</span>&gt;?,
    block: () -&gt; <span class="hljs-type">T</span>,
)</span></span>: T {
    <span class="hljs-comment">// åˆ›å»ºå¿«ç…§</span>
    <span class="hljs-keyword">val</span> snapshot =
        Snapshot.takeMutableSnapshot(
            <span class="hljs-comment">// å½“è¯»å–æ•°æ®çš„æ—¶å€™ï¼Œèƒ½æ”¶åˆ°å›è°ƒ</span>
            readObserverOf(composition),
            <span class="hljs-comment">// ç‚¹å‡»æŒ‰é’®ä¿®æ”¹çŠ¶æ€ï¼Œå¹¶æ²¡æœ‰æ‰§è¡ŒwriteObserverOf</span>
            writeObserverOf(composition, modifiedValues),
        )
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// è¿›å…¥å¿«ç…§</span>
        <span class="hljs-keyword">return</span> snapshot.enter(block)
    } <span class="hljs-keyword">finally</span> {
        applyAndCheck(snapshot)
    }
}
</code></pre>
<p>ç‚¹å‡»æŒ‰é’®ä¿®æ”¹çŠ¶æ€ï¼Œå¹¶æ²¡æœ‰æ‰§è¡Œ<code>writeObserverOf</code>ï¼Œæ˜¯å¿«ç…§å¤±æ•ˆäº†å—ï¼Ÿå¦‚æœå¿«ç…§æ²¡å¤±æ•ˆï¼Œé‚£ä»£ç åˆæ‰§è¡Œåˆ°å“ªäº†ï¼Ÿç¨ç¨çš„ä¿®æ”¹ä¸‹ä»£ç ï¼Œä¿®æ”¹çŠ¶æ€çš„æ—¶å€™ï¼Œæ‰“å°ä¸‹å½“å‰å¿«ç…§ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">Count</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> content <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-number">0</span>) }
    
    Button({
        content++
        print(<span class="hljs-string">"å½“å‰å¿«ç…§ï¼š<span class="hljs-subst">${Snapshot.current}</span>"</span>)
    }, content = {
        Text(content.toString())
    })
}
</code></pre>
<p>æ‰“å°å‡ºæ¥çš„æ˜¯<code>androidx.compose.runtime.snapshots.GlobalSnapshot@db1e488</code>ï¼Œ<code>GlobalSnapshot</code>æ˜¯å…¨å±€å¿«ç…§ï¼Œä¸æ˜¯Composeåˆ›å»ºçš„å¯å˜å¿«ç…§ï¼Œè‡ªç„¶ä¸ä¼šé€šçŸ¥Composeæ‰§è¡Œã€‚</p>
<p><strong>ç‚¹å‡»ä¿®æ”¹çŠ¶æ€ï¼Œä¸ºä»€ä¹ˆè·å–åˆ°çš„æ˜¯å…¨å±€å¿«ç…§ï¼Ÿç‚¹å‡»äº‹ä»¶æ˜¯ç”±ç³»ç»Ÿå›è°ƒçš„ï¼Œä¸åœ¨composeåˆ›å»ºçš„å¿«ç…§å†…ã€‚</strong></p>
<h3 data-id="heading-18">å…¨å±€å¿«ç…§</h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå°±å·²ç»åˆ›å»ºäº†å…¨å±€å¿«ç…§ï¼Œå…¨å±€å¿«ç…§æ³¨å†Œäº†å†™å…¥è§‚å¯Ÿè€…ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Snapshot.kt</span>
<span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalSnapshot</span>(snapshotId: SnapshotId, invalid: SnapshotIdSet) :
    MutableSnapshot(
        snapshotId,
        invalid,
        readObserver = <span class="hljs-literal">null</span>,
        writeObserver = {
            <span class="hljs-comment">// è¿™é‡Œå°±æ˜¯å…¨å±€å¿«ç…§çš„å†™å…¥è§‚å¯Ÿè€…</span>
            <span class="hljs-comment">// å®é™…ä¸Šå®ƒä¼šé€šçŸ¥é€šè¿‡ Snapshot.registerGlobalWriteObserver æ³¨å†Œçš„è§‚å¯Ÿè€…</span>
            state -&gt; sync { globalWriteObservers.fastForEach { it(state) } } 
        }
    )
</code></pre>
<p>Composeåœ¨å“ªè°ƒç”¨äº†Snapshot.registerGlobalWriteObserverï¼Ÿåœ¨<code>AbstractComposeView.setContent</code>ä¸­å…ˆè°ƒç”¨äº†<code>GlobalSnapshotManager.ensureStarted()</code>ï¼Œç„¶åæ‰åˆ›å»º<code>AndroidComposeView</code>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> AbstractComposeView.<span class="hljs-title">setContent</span><span class="hljs-params">(
    parent: <span class="hljs-type">CompositionContext</span>,
    content: @<span class="hljs-type">Composable</span> () -&gt; <span class="hljs-type">Unit</span>,
)</span></span>: Composition {
    <span class="hljs-comment">// ç¡®ä¿å…¨å±€å¿«ç…§æ‰§è¡Œ</span>
    GlobalSnapshotManager.ensureStarted()
    <span class="hljs-keyword">val</span> composeView =
        <span class="hljs-keyword">if</span> (childCount &gt; <span class="hljs-number">0</span>) {
            getChildAt(<span class="hljs-number">0</span>) <span class="hljs-keyword">as</span>? AndroidComposeView
        } <span class="hljs-keyword">else</span> {
            removeAllViews()
            <span class="hljs-literal">null</span>
        }
            ?: AndroidComposeView(context, parent.effectCoroutineContext).also {
                addView(it.view, DefaultLayoutParams)
            }
    <span class="hljs-keyword">return</span> doSetContent(composeView, parent, content)
}
</code></pre>
<h3 data-id="heading-19">GlobalSnapshotManager.ensureStarted</h3>
<p><code>Snapshot.registerGlobalWriteObserver</code>æ³¨å†Œå…¨å±€çš„å†™å…¥è§‚å¯Ÿè€…ï¼Œå½“ä¿®æ”¹è¿™ä¸ªçš„æ—¶å€™ï¼Œå‘é€ä¿¡å·åˆ°é€šé“ä¸Šï¼Œæ¢å¤åç¨‹ï¼Œè°ƒç”¨<code>sendApplyNotifications</code>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">object</span> GlobalSnapshotManager {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> started = atomic(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> sent = atomic(<span class="hljs-number">0</span>)

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ensureStarted</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">if</span> (started.compareAndSet(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)) {
            <span class="hljs-keyword">val</span> channel = Channel&lt;<span class="hljs-built_in">Unit</span>&gt;(<span class="hljs-number">1</span>)
            CoroutineScope(GlobalSnapshotManagerDispatcher).launch {
                channel.consumeEach {
                    sent.compareAndSet(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)
                    Snapshot.sendApplyNotifications()  <span class="hljs-comment">//è°ƒç”¨sendApplyNotifications</span>
                }
            }
            <span class="hljs-comment">// æ³¨å†Œå…¨å±€çš„å†™å…¥è§‚å¯Ÿè€…</span>
            Snapshot.registerGlobalWriteObserver {
                <span class="hljs-keyword">if</span> (sent.compareAndSet(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)) {
                    channel.trySend(<span class="hljs-built_in">Unit</span>)  <span class="hljs-comment">// å‘é€ä¿¡å·åˆ° channel</span>
                }
            }
        }
    }
}
</code></pre>
<p>çŠ¶æ€å¯¹è±¡çš„å€¼ä»0å˜æˆ1ï¼Œè°ƒç”¨<code>overwritable</code>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SnapshotMutableStateImpl</span>&lt;<span class="hljs-type">T</span>&gt;(
    value: T,
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> policy: SnapshotMutationPolicy&lt;T&gt;,
) : StateObjectImpl(), SnapshotMutableState&lt;T&gt; {
    <span class="hljs-meta">@Suppress(<span class="hljs-string">"UNCHECKED_CAST"</span>)</span>
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">var</span> value: T
        <span class="hljs-keyword">get</span>() = next.readable(<span class="hljs-keyword">this</span>).value
        <span class="hljs-keyword">set</span>(value) =
            next.withCurrent {
                <span class="hljs-keyword">if</span> (!policy.equivalent(it.value, value)) {
                    <span class="hljs-comment">// ä¿®æ”¹å€¼ï¼Œè°ƒç”¨overwritable</span>
                    next.overwritable(<span class="hljs-keyword">this</span>, it) { <span class="hljs-keyword">this</span>.value = value }
                }
            }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> next: StateStateRecord&lt;T&gt; =
        currentSnapshot().let { snapshot -&gt;
            StateStateRecord(snapshot.snapshotId, value).also {
                <span class="hljs-keyword">if</span> (snapshot !<span class="hljs-keyword">is</span> GlobalSnapshot) {
                    it.next = StateStateRecord(Snapshot.PreexistingSnapshotId.toSnapshotId(), value)
                }
            }
        }
</code></pre>
<h3 data-id="heading-20">overwritable</h3>
<p>è·å–å…¨å±€å¿«ç…§ï¼Œå°†çŠ¶æ€å¯¹è±¡ä¿å­˜åˆ°å…¨å±€å¿«ç…§çš„modifiedå¯¹è±¡ä¸­ï¼Œé€šçŸ¥å…¨å±€å¿«ç…§æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : StateRecord, R&gt;</span> T.<span class="hljs-title">overwritable</span><span class="hljs-params">(
    state: <span class="hljs-type">StateObject</span>,
    candidate: <span class="hljs-type">T</span>,
    block: <span class="hljs-type">T</span>.() -&gt; <span class="hljs-type">R</span>,
)</span></span>: R {
    <span class="hljs-keyword">val</span> snapshot: Snapshot
    <span class="hljs-keyword">return</span> sync {
            <span class="hljs-comment">// å½“å‰å¿«ç…§ä¸ºå…¨å±€å¿«ç…§</span>
            snapshot = Snapshot.current
            <span class="hljs-comment">// overwritableRecordä¼šè°ƒç”¨åˆ°recordModified</span>
            <span class="hljs-keyword">this</span>.overwritableRecord(state, snapshot, candidate).block()
        }
        .also { notifyWrite(snapshot, state) }
}

<span class="hljs-comment">// å°†çŠ¶æ€å¯¹è±¡ä¿å­˜åˆ°å…¨å±€å¿«ç…§çš„modifiedå¯¹è±¡ä¸­</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">recordModified</span><span class="hljs-params">(state: <span class="hljs-type">StateObject</span>)</span></span> {
    (modified ?: mutableScatterSetOf&lt;StateObject&gt;().also { modified = it }).add(state)
}

<span class="hljs-keyword">internal</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">notifyWrite</span><span class="hljs-params">(snapshot: <span class="hljs-type">Snapshot</span>, state: <span class="hljs-type">StateObject</span>)</span></span> {
    snapshot.writeCount += <span class="hljs-number">1</span>
    <span class="hljs-comment">// é€šçŸ¥å…¨å±€å¿«ç…§æ‰§è¡Œ</span>
    snapshot.writeObserver?.invoke(state)
}
</code></pre>
<p>é€šçŸ¥å…¨å±€å¿«ç…§æ‰§è¡Œå°±æ˜¯å‘é€ä¿¡å·åˆ°é€šé“ä¸Šï¼Œæ¢å¤åç¨‹ï¼Œè°ƒç”¨<code>sendApplyNotifications</code>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">object</span> GlobalSnapshotManager {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> started = atomic(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> sent = atomic(<span class="hljs-number">0</span>)

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ensureStarted</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">if</span> (started.compareAndSet(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)) {
            <span class="hljs-keyword">val</span> channel = Channel&lt;<span class="hljs-built_in">Unit</span>&gt;(<span class="hljs-number">1</span>)
            CoroutineScope(GlobalSnapshotManagerDispatcher).launch {
                channel.consumeEach {
                    sent.compareAndSet(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>)
                    Snapshot.sendApplyNotifications()  <span class="hljs-comment">//è°ƒç”¨sendApplyNotifications</span>
                }
            }
            <span class="hljs-comment">// æ³¨å†Œå…¨å±€çš„å†™å…¥è§‚å¯Ÿè€…</span>
            Snapshot.registerGlobalWriteObserver {
                <span class="hljs-keyword">if</span> (sent.compareAndSet(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>)) {
                    channel.trySend(<span class="hljs-built_in">Unit</span>)  <span class="hljs-comment">// å‘é€ä¿¡å·åˆ° channel</span>
                }
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-21">Snapshot.sendApplyNotifications</h3>
<p>ä»å…¨å±€å¿«ç…§ä¸­è·å–ä¿®æ”¹åçš„çŠ¶æ€ï¼Œéå†è§‚å¯Ÿè€…ï¼Œé€šçŸ¥Conposeæ‰§è¡Œï¼Œå°†ä¿®æ”¹åçš„çŠ¶æ€ä¼ ç»™Composeã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">sendApplyNotifications</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> changes = sync { globalSnapshot.hasPendingChanges() }
    <span class="hljs-keyword">if</span> (changes) advanceGlobalSnapshot()
}

<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">advanceGlobalSnapshot</span><span class="hljs-params">(block: (<span class="hljs-type">invalid</span>: <span class="hljs-type">SnapshotIdSet</span>) -&gt; <span class="hljs-type">T</span>)</span></span>: T {
    <span class="hljs-keyword">val</span> globalSnapshot = globalSnapshot

    <span class="hljs-keyword">val</span> modified: MutableScatterSet&lt;StateObject&gt;?
    <span class="hljs-keyword">val</span> result = sync {
        <span class="hljs-comment">// åˆšåˆšå°†çŠ¶æ€å¯¹è±¡ä¿å­˜åˆ°äº†å…¨å±€å¿«ç…§çš„modifiedå¯¹è±¡</span>
        modified = globalSnapshot.modified
        <span class="hljs-keyword">if</span> (modified != <span class="hljs-literal">null</span>) {
            pendingApplyObserverCount.add(<span class="hljs-number">1</span>)
        }
        resetGlobalSnapshotLocked(globalSnapshot, block)
    }

    <span class="hljs-comment">// If the previous global snapshot had any modified states then notify the registered apply</span>
    <span class="hljs-comment">// observers.</span>
    modified?.let {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> observers = applyObservers
            <span class="hljs-comment">// éå†è§‚å¯Ÿè€…ï¼Œé€šçŸ¥Conposeæ‰§è¡Œï¼Œå°†ä¿®æ”¹åçš„çŠ¶æ€ä¼ ç»™Composeã€‚</span>
            observers.fastForEach { observer -&gt; observer(it.wrapIntoSet(), globalSnapshot) }
        } <span class="hljs-keyword">finally</span> {
            pendingApplyObserverCount.add(-<span class="hljs-number">1</span>)
        }
    }

    sync {
        checkAndOverwriteUnusedRecordsLocked()
        modified?.forEach { processForUnusedRecordsLocked(it) }
    }

    <span class="hljs-keyword">return</span> result
}
</code></pre>
<h3 data-id="heading-22">Recomposeræ³¨å†ŒapplyObserver</h3>
<p>åœ¨<code>AbstractComposeView</code>çš„<code>onAttachedToWindow</code>åˆ›å»ºäº†<code>Recomposer</code>å¯¹è±¡ï¼Œå½“Activity/Fragment çš„ç”Ÿå‘½å‘¨æœŸè¾¾åˆ°<code>CREATED</code>çŠ¶æ€æ—¶è°ƒç”¨<code>runRecomposeAndApplyChanges</code>å¯åŠ¨<code>Recomposer</code>çš„ä¸»å¾ªç¯ï¼Œå¼€å§‹ç›‘å¬å¿«ç…§å˜åŒ–å’Œå¸§ä¿¡å·ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// androidx.compose.ui.platform.WindowRecomposer.android.kt</span>

<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createLifecycleAwareWindowRecomposer</span><span class="hljs-params">(
    rootView: <span class="hljs-type">View</span>,
    lifecycle: <span class="hljs-type">Lifecycle</span>,
    coroutineContext: <span class="hljs-type">CoroutineContext</span>
)</span></span>: Recomposer {
    <span class="hljs-comment">// 1ã€åˆ›å»º Recomposer å¯¹è±¡</span>
    <span class="hljs-keyword">val</span> recomposer = Recomposer(coroutineContext)
    
    <span class="hljs-comment">// 2ã€åˆ›å»ºåç¨‹ä½œç”¨åŸŸï¼Œç»‘å®šåˆ° rootView çš„ç”Ÿå‘½å‘¨æœŸ</span>
    <span class="hljs-keyword">val</span> runnerJob = Job(coroutineContext[Job])
    
    <span class="hljs-comment">// 3ã€ åœ¨ç”Ÿå‘½å‘¨æœŸä½œç”¨åŸŸä¸­å¯åŠ¨ Recomposer</span>
    lifecycle.coroutineScope.launch(runnerJob + coroutineContext) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ç­‰å¾…ç”Ÿå‘½å‘¨æœŸè¿›å…¥ CREATED çŠ¶æ€</span>
            lifecycle.repeatOnLifecycle(Lifecycle.State.CREATED) {
                <span class="hljs-comment">// 4ã€è°ƒç”¨ runRecomposeAndApplyChanges å¯åŠ¨ Recomposer çš„ä¸»å¾ªç¯</span>
                recomposer.runRecomposeAndApplyChanges()
            }
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶å…³é—­ Recomposer</span>
            recomposer.cancel()
        }
    }
    
    <span class="hljs-keyword">return</span> recomposer
}
</code></pre>
<h3 data-id="heading-23">recompositionRunner</h3>
<p><code>runRecomposeAndApplyChanges</code>è°ƒç”¨äº†<code>recompositionRunner</code>ï¼Œæ³¨å†Œäº†è§‚å¯Ÿè€…ï¼Œæœ€å…³é”®çš„æ˜¯å”¤é†’äº†æŒ‚èµ·çš„åç¨‹</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">recompositionRunner</span><span class="hljs-params">(
    block: <span class="hljs-type">suspend</span> <span class="hljs-type">CoroutineScope</span>.(<span class="hljs-type">parentFrameClock</span>: <span class="hljs-type">MonotonicFrameClock</span>) -&gt; <span class="hljs-type">Unit</span>
)</span></span> {
  <span class="hljs-keyword">val</span> unregsterApplyObserver =
    <span class="hljs-comment">// æ³¨å†Œè§‚å¯Ÿè€…</span>
    Snapshot.registerApplyObserver { changed, _ -&gt;
        <span class="hljs-comment">// changeå°±æ˜¯ä¿®æ”¹å€¼åçš„çŠ¶æ€å¯¹è±¡</span>
        synchronized(stateLock) {
            <span class="hljs-keyword">if</span> (_state.value &gt;= State.Idle) {
                <span class="hljs-keyword">val</span> snapshotInvalidations = snapshotInvalidations
                changed.fastForEach {
                    <span class="hljs-comment">// éå†ä¿®æ”¹åçš„çŠ¶æ€</span>
                    <span class="hljs-keyword">if</span> (it <span class="hljs-keyword">is</span> StateObjectImpl &amp;&amp; !it.isReadIn(ReaderKind.Composition)) {
                        <span class="hljs-keyword">return</span><span class="hljs-symbol">@fastForEach</span>  <span class="hljs-comment">// è·³è¿‡æœªåœ¨ç»„åˆä¸­è¯»å–çš„çŠ¶æ€</span>
                    }
                    snapshotInvalidations.add(it)  <span class="hljs-comment">// è®°å½•éœ€è¦å¤±æ•ˆçš„çŠ¶æ€</span>
                }
                deriveStateLocked()  <span class="hljs-comment">// æ´¾ç”ŸçŠ¶æ€ï¼Œè¿”å›å¾…å”¤é†’çš„åç¨‹</span>
            } <span class="hljs-keyword">else</span> <span class="hljs-literal">null</span>
        }?.resume(<span class="hljs-built_in">Unit</span>)  <span class="hljs-comment">// å”¤é†’æŒ‚èµ·çš„åç¨‹</span>
    }
}    
</code></pre>
<h3 data-id="heading-24">åç¨‹å”¤é†’æœºåˆ¶</h3>
<h4 data-id="heading-25">Recomposerçš„ä¸»å¾ªç¯ç»“æ„</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Recomposer.kt</span>
<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">runRecomposeAndApplyChanges</span><span class="hljs-params">()</span></span> = recompositionRunner { parentFrameClock -&gt;
   
    
    <span class="hljs-comment">// ä¸»å¾ªç¯ï¼šç­‰å¾…å·¥ä½œ -&gt; æ‰§è¡Œå·¥ä½œ -&gt; é‡å¤</span>
    <span class="hljs-keyword">while</span> (shouldKeepRecomposing) {
        awaitWorkAvailable()  <span class="hljs-comment">// å…³é”®ï¼šåœ¨è¿™é‡ŒæŒ‚èµ·ç­‰å¾…</span>
        <span class="hljs-comment">// èƒ½æ‰§è¡Œåˆ°è¿™ï¼Œè¯´æ˜åç¨‹è¢«å”¤é†’äº†</span>
    }
    <span class="hljs-comment">// çœç•¥éƒ¨åˆ†ä»£ç ......</span>
}
</code></pre>
<p><strong>å…³é”®è¦ç‚¹ï¼š</strong></p>
<ol>
<li><code>awaitWorkAvailable()</code> æ˜¯åç¨‹çš„æŒ‚èµ·ç‚¹ã€‚</li>
<li>å½“æœ‰å·¥ä½œæ—¶ï¼ˆçŠ¶æ€å˜åŒ–ã€å¸§äº‹ä»¶ç­‰ï¼‰ï¼Œåç¨‹è¢«å”¤é†’ã€‚</li>
<li>å¤„ç†å®Œä¸€è½®å·¥ä½œåï¼Œå†æ¬¡è¿›å…¥ç­‰å¾…çŠ¶æ€ã€‚</li>
</ol>
<h4 data-id="heading-26">awaitWorkAvailable - åç¨‹æŒ‚èµ·é€»è¾‘</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Recomposer.kt</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">awaitWorkAvailable</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">if</span> (!hasSchedulingWork) {
        <span class="hljs-comment">// å¦‚æœå½“å‰æ²¡æœ‰å·¥ä½œï¼ŒæŒ‚èµ·åç¨‹</span>
        suspendCancellableCoroutine&lt;<span class="hljs-built_in">Unit</span>&gt; { co -&gt;
            synchronized(stateLock) {
                <span class="hljs-keyword">if</span> (hasSchedulingWork) {
                    <span class="hljs-comment">// åŒé‡æ£€æŸ¥ï¼šå¯èƒ½åœ¨è·å–é”æœŸé—´æœ‰å·¥ä½œè¿›æ¥äº†</span>
                    co  <span class="hljs-comment">// ç«‹å³æ¢å¤</span>
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">// ä¿å­˜ continuationï¼Œç­‰å¾…è¢«å”¤é†’</span>
                    workContinuation = co
                    <span class="hljs-literal">null</span>  <span class="hljs-comment">// ä¸æ¢å¤ï¼Œç»§ç»­æŒ‚èµ·</span>
                }
            }?.resume(<span class="hljs-built_in">Unit</span>)
        }
    }
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> hasSchedulingWork: <span class="hljs-built_in">Boolean</span>
    <span class="hljs-keyword">get</span>() = synchronized(stateLock) {
        snapshotInvalidations.isNotEmpty() ||  <span class="hljs-comment">// æœ‰çŠ¶æ€å¤±æ•ˆ</span>
            compositionInvalidations.isNotEmpty() ||  <span class="hljs-comment">// æœ‰ç»„åˆå¤±æ•ˆ</span>
            hasBroadcastFrameClockAwaitersLocked  <span class="hljs-comment">// æœ‰å¸§æ—¶é’Ÿç­‰å¾…è€…</span>
    }
</code></pre>
<p><strong>æ‰§è¡Œæµç¨‹ï¼š</strong></p>
<ol>
<li>é¦–å…ˆæ£€æŸ¥ <code>hasSchedulingWork</code>ï¼Œå¦‚æœå·²ç»æœ‰å·¥ä½œï¼Œç›´æ¥è¿”å›ä¸æŒ‚èµ·ã€‚</li>
<li>è°ƒç”¨ <code>suspendCancellableCoroutine</code> æŒ‚èµ·å½“å‰åç¨‹ã€‚</li>
<li>åœ¨é”å†…å†æ¬¡æ£€æŸ¥ï¼ˆåŒé‡æ£€æŸ¥æ¨¡å¼ï¼‰ã€‚</li>
<li>å¦‚æœç¡®å®æ²¡æœ‰å·¥ä½œï¼Œå°† <code>CancellableContinuation</code> ä¿å­˜åˆ° <code>workContinuation</code>ã€‚</li>
<li>åç¨‹åœ¨è¿™é‡ŒæŒ‚èµ·ï¼Œç­‰å¾…è¢«æ¢å¤ã€‚</li>
</ol>
<h4 data-id="heading-27">deriveStateLocked- çŠ¶æ€è®¡ç®—ä¸å”¤é†’</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Recomposer.kt</span>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">deriveStateLocked</span><span class="hljs-params">()</span></span>: CancellableContinuation&lt;<span class="hljs-built_in">Unit</span>&gt;? {
    <span class="hljs-comment">// å¦‚æœ Recomposer æ­£åœ¨å…³é—­ï¼Œæ¸…ç†èµ„æº</span>
    <span class="hljs-keyword">if</span> (_state.value &lt;= State.ShuttingDown) {
        clearKnownCompositionsLocked()
        snapshotInvalidations = MutableScatterSet()
        compositionInvalidations.clear()
        compositionsAwaitingApply.clear()
        movableContentAwaitingInsert.clear()
        failedCompositions = <span class="hljs-literal">null</span>
        workContinuation?.cancel()
        workContinuation = <span class="hljs-literal">null</span>
        errorState = <span class="hljs-literal">null</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
    }
    
    <span class="hljs-comment">// è®¡ç®—æ–°çŠ¶æ€</span>
    <span class="hljs-keyword">val</span> newState = <span class="hljs-keyword">when</span> {
        errorState != <span class="hljs-literal">null</span> -&gt; State.Inactive
        runnerJob == <span class="hljs-literal">null</span> -&gt; {
            snapshotInvalidations = MutableScatterSet()
            compositionInvalidations.clear()
            <span class="hljs-keyword">if</span> (hasBroadcastFrameClockAwaitersLocked) State.InactivePendingWork
            <span class="hljs-keyword">else</span> State.Inactive
        }
        <span class="hljs-comment">// å…³é”®åˆ¤æ–­ï¼šæ˜¯å¦æœ‰å¾…å¤„ç†çš„å·¥ä½œ</span>
        compositionInvalidations.isNotEmpty() ||
            snapshotInvalidations.isNotEmpty() ||
            compositionsAwaitingApply.isNotEmpty() ||
            movableContentAwaitingInsert.isNotEmpty() ||
            concurrentCompositionsOutstanding &gt; <span class="hljs-number">0</span> ||
            hasBroadcastFrameClockAwaitersLocked ||
            movableContentRemoved.isNotEmpty() -&gt; State.PendingWork
        <span class="hljs-keyword">else</span> -&gt; State.Idle
    }
    
    _state.value = newState
    
    <span class="hljs-comment">// å¦‚æœçŠ¶æ€å˜ä¸º PendingWorkï¼Œè¿”å› continuation ä»¥ä¾¿å”¤é†’</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (newState == State.PendingWork) {
        workContinuation.also { workContinuation = <span class="hljs-literal">null</span> }
    } <span class="hljs-keyword">else</span> <span class="hljs-literal">null</span>
}
</code></pre>
<p><strong>æ ¸å¿ƒé€»è¾‘ï¼š</strong></p>
<ol>
<li>å¦‚æœè®¡ç®—å‡ºçš„çŠ¶æ€æ˜¯ <code>PendingWork</code>ï¼ˆæœ‰å·¥ä½œå¾…å¤„ç†ï¼‰ã€‚</li>
<li>å–å‡ºä¹‹å‰ä¿å­˜çš„ <code>workContinuation</code> å¹¶è¿”å›ã€‚</li>
<li>è°ƒç”¨è€…ä¼šè°ƒç”¨ <code>continuation.resume(Unit)</code> å”¤é†’æŒ‚èµ·çš„åç¨‹ã€‚</li>
</ol>
<h3 data-id="heading-28">runRecomposeAndApplyChanges</h3>
<p>åç¨‹è¢«å”¤é†’åï¼Œå½“ä¸‹ä¸€å¸§æ¥ä¸´çš„æ—¶å€™ï¼Œè°ƒç”¨<code>performRecompose</code>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Recomposer.kt</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">runRecomposeAndApplyChanges</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Unit</span> =
    recompositionRunner { parentFrameClock -&gt;
        <span class="hljs-keyword">while</span> (shouldKeepRecomposing) {
            awaitWorkAvailable()
            <span class="hljs-comment">// æ‰§è¡Œåˆ°è¿™ï¼Œè¯´æ˜åç¨‹è¢«å”¤é†’</span>
            <span class="hljs-comment">// ç›‘å¬ä¸‹ä¸€å¸§</span>
            parentFrameClock.withFrameNanos { frameTime -&gt;
                trace(<span class="hljs-string">"Recomposer:recompose"</span>) {
                    <span class="hljs-comment">// ä¸‹ä¸€å¸§æ¥äº†</span>
                    <span class="hljs-keyword">while</span> (toRecompose.isNotEmpty() || toInsert.isNotEmpty()) {
                        <span class="hljs-keyword">try</span> {
                            toRecompose.fastForEach { composition -&gt;
                                <span class="hljs-comment">// è°ƒç”¨performRecompose</span>
                                performRecompose(composition, modifiedValues)?.let {
                                    toApply += it
                                }
                                alreadyComposed.add(composition)
                            }
                        } <span class="hljs-keyword">catch</span> (e: Throwable) {
                            processCompositionError(e, recoverable = <span class="hljs-literal">true</span>)
                            clearRecompositionState()
                            <span class="hljs-keyword">return</span><span class="hljs-symbol">@withFrameNanos</span>
                        } <span class="hljs-keyword">finally</span> {
                            toRecompose.clear()
                        }
                    }
                }
            }
        }
    }
</code></pre>
<h3 data-id="heading-29">performRecompose</h3>
<p>è°ƒç”¨<code>composing</code>ï¼Œ<code>composing</code>ä¼šåˆ›å»ºå¿«ç…§ï¼Œæ¯æ¬¡é‡ç»„çš„æ—¶å€™ï¼Œå…¶å®éƒ½ä¼šåˆ›å»ºå¿«ç…§ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Recomposer.kt</span>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">performRecompose</span><span class="hljs-params">(
    composition: <span class="hljs-type">ControlledComposition</span>,
    modifiedValues: <span class="hljs-type">MutableScatterSet</span>&lt;<span class="hljs-type">Any</span>&gt;?,
)</span></span>: ControlledComposition? {
    <span class="hljs-keyword">if</span> (
        composition.isComposing ||
            composition.isDisposed ||
            compositionsRemoved?.contains(composition) == <span class="hljs-literal">true</span>
    )
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (
        <span class="hljs-comment">// </span>
        composing(composition, modifiedValues) {
            <span class="hljs-keyword">if</span> (modifiedValues?.isNotEmpty() == <span class="hljs-literal">true</span>) {
                <span class="hljs-comment">// Record write performed by a previous composition as if they happened during</span>
                <span class="hljs-comment">// composition.</span>
                composition.prepareCompose {
                    modifiedValues.forEach { composition.recordWriteOf(it) }
                }
            }
            <span class="hljs-comment">// é‡ç»„</span>
            composition.recompose()
        }
    )
        composition
    <span class="hljs-keyword">else</span> <span class="hljs-literal">null</span>
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">composing</span><span class="hljs-params">(
    composition: <span class="hljs-type">ControlledComposition</span>,
    modifiedValues: <span class="hljs-type">MutableScatterSet</span>&lt;<span class="hljs-type">Any</span>&gt;?,
    block: () -&gt; <span class="hljs-type">T</span>,
)</span></span>: T {
    <span class="hljs-keyword">val</span> snapshot =
        Snapshot.takeMutableSnapshot(
            readObserverOf(composition),
            writeObserverOf(composition, modifiedValues),
        )
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">return</span> snapshot.enter(block)
    } <span class="hljs-keyword">finally</span> {
        applyAndCheck(snapshot)
    }
}
</code></pre>
<h3 data-id="heading-30">recordWriteOf</h3>
<p><code>recordWriteOf</code>è°ƒç”¨<code>invalidateScopeOfLocked</code>ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// Composition.kt</span>
override fun <span class="hljs-built_in">recordWriteOf</span>(value: Any) =
    <span class="hljs-built_in">synchronized</span>(lock) {
        <span class="hljs-built_in">invalidateScopeOfLocked</span>(value)
        derivedStates<span class="hljs-selector-class">.forEachScopeOf</span>(value) { <span class="hljs-built_in">invalidateScopeOfLocked</span>(it) }
    }
</code></pre>
<h3 data-id="heading-31">invalidateScopeOfLocked</h3>
<p>æˆ‘ä»¬çœ‹åˆ°äº†å…³é”®çš„<code>observations</code>ï¼Œåœ¨é¦–æ¬¡ç»„åˆè·å–çŠ¶æ€çš„æ—¶å€™ï¼ŒComposeå°†çŠ¶æ€å¯¹è±¡ä¸é‡ç»„ä½œç”¨åŸŸå¯¹è±¡å»ºç«‹æ˜ å°„ã€‚è¿™ä¸ªåˆšåˆšè®²è¿‡ï¼Œè¿˜ç‰¹æ„è®©å¤§å®¶è®°ä½ã€‚éå†<code>observations</code>ï¼Œå–å‡ºé‡ç»„ä½œç”¨åŸŸå¯¹è±¡ï¼Œè°ƒç”¨<code>invalidateForResult</code>ï¼Œ<code>invalidateForResult</code>ä¼šè°ƒç”¨åˆ°<code>invalidateChecked</code>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Composition.kt</span>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">invalidateScopeOfLocked</span><span class="hljs-params">(value: <span class="hljs-type">Any</span>)</span></span> {
    <span class="hljs-comment">// å–å‡ºé‡ç»„ä½œç”¨åŸŸå¯¹è±¡</span>
    observations.forEachScopeOf(value) { scope -&gt;
        <span class="hljs-keyword">if</span> (scope.invalidateForResult(value) == InvalidationResult.IMMINENT) {
            observationsProcessed.add(value, scope)
        }
    }
}
</code></pre>
<h3 data-id="heading-32">invalidateChecked</h3>
<p>å°†é‡ç»„ä½œç”¨åŸŸå¯¹è±¡ä¿å­˜åˆ°<code>invalidations</code>ï¼Œåç»­ä¼šä»<code>invalidations</code>å–å‡ºé‡ç»„ä½œç”¨åŸŸå¯¹è±¡ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Composition.kt</span>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">invalidateChecked</span><span class="hljs-params">(
    scope: <span class="hljs-type">RecomposeScopeImpl</span>,
    anchor: <span class="hljs-type">Anchor</span>,
    instance: <span class="hljs-type">Any</span>?,
)</span></span>: InvalidationResult {
    <span class="hljs-keyword">val</span> delegate =
        synchronized(lock) {
            <span class="hljs-keyword">val</span> delegate =
                invalidationDelegate?.let { changeDelegate -&gt;
                    <span class="hljs-keyword">if</span> (slotTable.groupContainsAnchor(invalidationDelegateGroup, anchor)) {
                        changeDelegate
                    } <span class="hljs-keyword">else</span> <span class="hljs-literal">null</span>
                }
            <span class="hljs-keyword">if</span> (delegate == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">if</span> (tryImminentInvalidation(scope, instance)) {
                    <span class="hljs-keyword">return</span> InvalidationResult.IMMINENT
                }
                <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) {
                    <span class="hljs-comment">// å°†é‡ç»„ä½œç”¨åŸŸå¯¹è±¡ä¿å­˜åˆ°invalidations</span>
                    invalidations.<span class="hljs-keyword">set</span>(scope, ScopeInvalidated)
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (instance !<span class="hljs-keyword">is</span> DerivedState&lt;*&gt;) {
                    <span class="hljs-comment">// å°†é‡ç»„ä½œç”¨åŸŸå¯¹è±¡ä¿å­˜åˆ°invalidations</span>
                    invalidations.<span class="hljs-keyword">set</span>(scope, ScopeInvalidated)
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">if</span> (!invalidations.anyScopeOf(scope) { it === ScopeInvalidated }) {
                        invalidations.add(scope, instance)
                    }
                }
            }
            delegate
        }
    parent.invalidate(<span class="hljs-keyword">this</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (isComposing) InvalidationResult.DEFERRED <span class="hljs-keyword">else</span> InvalidationResult.SCHEDULED
}
</code></pre>
<h3 data-id="heading-33">recompose</h3>
<p>å°†é‡ç»„ä½œç”¨åŸŸå¯¹è±¡ä¿å­˜åˆ°<code>invalidations</code>åï¼Œè°ƒç”¨<code>recompose</code>ï¼Œ<code>recompose</code>è°ƒç”¨<code>doCompose</code></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Composer.kt</span>
<span class="hljs-keyword">internal</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">recompose</span><span class="hljs-params">(
    invalidationsRequested: <span class="hljs-type">ScopeMap</span>&lt;<span class="hljs-type">RecomposeScopeImpl</span>, Any&gt;,
    shouldPause: <span class="hljs-type">ShouldPauseCallback</span>?,
)</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">if</span> (invalidationsRequested.size &gt; <span class="hljs-number">0</span> || invalidations.isNotEmpty() || forciblyRecompose) {
        shouldPauseCallback = shouldPause
        <span class="hljs-keyword">try</span> {
            doCompose(invalidationsRequested, <span class="hljs-literal">null</span>)
        } <span class="hljs-keyword">finally</span> {
            shouldPauseCallback = <span class="hljs-literal">null</span>
        }
        <span class="hljs-keyword">return</span> changes.isNotEmpty()
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
}
</code></pre>
<h3 data-id="heading-34">doCompose</h3>
<p><code>doCompose</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯<code>invalidations</code>ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºç©ºã€‚é¦–æ¬¡ç»„åˆçš„æ—¶å€™ï¼Œä¹Ÿä¼šè°ƒç”¨<code>doCompose</code>ï¼Œé¦–æ¬¡ç»„åˆï¼Œ<code>doCompose</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºç©ºï¼Œç¬¬äºŒä¸ªå‚æ•°éç©ºã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Composer.kt</span>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">doCompose</span><span class="hljs-params">(
    invalidationsRequested: <span class="hljs-type">ScopeMap</span>&lt;<span class="hljs-type">RecomposeScopeImpl</span>, Any&gt;,
    content: (@<span class="hljs-type">Composable</span> () -&gt; <span class="hljs-type">Unit</span>)?,
)</span></span> {
    runtimeCheck(!isComposing) { <span class="hljs-string">"Reentrant composition is not supported"</span> }
    <span class="hljs-keyword">val</span> observer = observerHolder.current()
    trace(<span class="hljs-string">"Compose:recompose"</span>) {
        compositionToken = currentSnapshot().snapshotId.hashCode()
        providerUpdates = <span class="hljs-literal">null</span>
        <span class="hljs-comment">// å°†invalidationsRequestedè½¬æˆinvalidations</span>
        updateComposerInvalidations(invalidationsRequested)
        nodeIndex = <span class="hljs-number">0</span>
        <span class="hljs-keyword">var</span> complete = <span class="hljs-literal">false</span>
        isComposing = <span class="hljs-literal">true</span>
        observer?.onBeginComposition(composition)
        <span class="hljs-keyword">try</span> {
            startRoot()
            observeDerivedStateRecalculations(derivedStateObserver) {
                <span class="hljs-keyword">if</span> (content != <span class="hljs-literal">null</span>) {
                    <span class="hljs-comment">// é¦–æ¬¡ç»„åˆçš„æ—¶å€™æ‰§è¡Œ</span>
                    startGroup(invocationKey, invocation)
                    invokeComposable(<span class="hljs-keyword">this</span>, content)
                    endGroup()
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (
                    (forciblyRecompose || providersInvalid) &amp;&amp;
                        savedContent != <span class="hljs-literal">null</span> &amp;&amp;
                        savedContent != Composer.Empty
                ) {
                    startGroup(invocationKey, invocation)
                    <span class="hljs-meta">@Suppress(<span class="hljs-string">"UNCHECKED_CAST"</span>)</span>
                    invokeComposable(<span class="hljs-keyword">this</span>, savedContent <span class="hljs-keyword">as</span> <span class="hljs-meta">@Composable</span> () -&gt; <span class="hljs-built_in">Unit</span>)
                    endGroup()
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">// é‡ç»„çš„æ—¶å€™æ‰§è¡Œ</span>
                    skipCurrentGroup()
                }
            }
            endRoot()
            complete = <span class="hljs-literal">true</span>
        } <span class="hljs-keyword">catch</span> (e: Throwable) {
            <span class="hljs-keyword">throw</span> e.attachComposeStackTrace { currentStackTrace() }
        } <span class="hljs-keyword">finally</span> {
            observer?.onEndComposition(composition)
            isComposing = <span class="hljs-literal">false</span>
            invalidations.clear()
            <span class="hljs-keyword">if</span> (!complete) abortRoot()
            createFreshInsertTable()
        }
    }
}
</code></pre>
<h3 data-id="heading-35">recomposeToGroupEnd</h3>
<p><code>skipCurrentGroup</code>è°ƒç”¨<code>recomposeToGroupEnd</code>ï¼Œå–å‡ºé‡ç»„ä½œç”¨åŸŸå¯¹è±¡ï¼Œè°ƒç”¨composeã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Composer.kt</span>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">recomposeToGroupEnd</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> wasComposing = isComposing
    isComposing = <span class="hljs-literal">true</span>
    <span class="hljs-keyword">var</span> recomposed = <span class="hljs-literal">false</span>

    <span class="hljs-keyword">val</span> parent = reader.parent
    <span class="hljs-keyword">val</span> end = parent + reader.groupSize(parent)
    <span class="hljs-keyword">val</span> recomposeIndex = nodeIndex
    <span class="hljs-keyword">val</span> recomposeCompositeKey = <span class="hljs-keyword">this</span><span class="hljs-symbol">@ComposerImpl</span>.compositeKeyHashCode
    <span class="hljs-keyword">val</span> oldGroupNodeCount = groupNodeCount
    <span class="hljs-keyword">val</span> oldRGroupIndex = rGroupIndex
    <span class="hljs-keyword">var</span> oldGroup = parent

    <span class="hljs-keyword">var</span> firstInRange = invalidations.firstInRange(reader.currentGroup, end)
    <span class="hljs-keyword">while</span> (firstInRange != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">val</span> location = firstInRange.location
        <span class="hljs-comment">// å–å‡ºé‡ç»„ä½œç”¨åŸŸå¯¹è±¡</span>
        <span class="hljs-keyword">val</span> scope = firstInRange.scope

        invalidations.removeLocation(location)

        <span class="hljs-keyword">if</span> (firstInRange.isInvalid()) {
            <span class="hljs-comment">// å¤±æ•ˆ</span>
            recomposed = <span class="hljs-literal">true</span>

            reader.reposition(location)
            <span class="hljs-keyword">val</span> newGroup = reader.currentGroup
            <span class="hljs-comment">// Record the changes to the applier location</span>
            recordUpsAndDowns(oldGroup, newGroup, parent)
            oldGroup = newGroup
            nodeIndex = nodeIndexOf(location, newGroup, parent, recomposeIndex)

            <span class="hljs-comment">// è°ƒç”¨</span>
            scope.compose(<span class="hljs-keyword">this</span>)

            
            providerCache = <span class="hljs-literal">null</span>

            <span class="hljs-comment">// Restore the parent of the reader to the previous parent</span>
            reader.restoreParent(parent)
        } <span class="hljs-keyword">else</span> {
            
            invalidateStack.push(scope)
            <span class="hljs-keyword">val</span> observer = observerHolder.current()
            <span class="hljs-keyword">if</span> (observer != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">try</span> {
                    observer.onScopeEnter(scope)
                    scope.rereadTrackedInstances()
                } <span class="hljs-keyword">finally</span> {
                    observer.onScopeExit(scope)
                }
            } <span class="hljs-keyword">else</span> {
                scope.rereadTrackedInstances()
            }
            invalidateStack.pop()
        }

      
        firstInRange = invalidations.firstInRange(reader.currentGroup, end)
    }

    isComposing = wasComposing
}
</code></pre>
<h3 data-id="heading-36">compose</h3>
<p><code>block</code>æ˜¯ä»€ä¹ˆï¼Ÿå®ƒå°±æ˜¯æˆ‘ä»¬éœ€è¦é‡æ–°æ‰§è¡Œçš„å‡½æ•°ï¼Œ<code>block?.invoke(composer, 1)</code>å°±æ˜¯åœ¨é‡æ–°æ‰§è¡Œå‡½æ•°ã€‚<code>block</code>ä»€ä¹ˆæ—¶å€™è¢«èµ‹å€¼ï¼Ÿ<a href="https://juejin.cn/post/7595043440520265734#heading-36" target="_blank" title="https://juejin.cn/post/7595043440520265734#heading-36">ComposeåŸç†ä¸‰ä¹‹SlotTable</a>æ–‡ç« ä¸­æˆ‘ä»¬å°±ä»‹ç»è¿‡ï¼Œé¦–æ¬¡ç»„åˆçš„æ—¶å€™ï¼Œå…ˆè°ƒç”¨<code>startRestartGroup</code>ï¼Œåˆ›å»ºé‡ç»„ä½œç”¨åŸŸå¯¹è±¡ï¼Œåè°ƒç”¨äº†<code>endRestartGroup</code>ï¼Œ<code>endRestartGroup</code>è¿”å›äº†é‡ç»„ä½œç”¨åŸŸå¯¹è±¡ï¼Œè°ƒç”¨é‡ç»„ä½œç”¨åŸŸå¯¹è±¡çš„<code>updateScope</code>ï¼Œå°†éœ€è¦é‡æ–°æ‰§è¡Œçš„å‡½æ•°èµ‹å€¼ç»™äº†<code>block</code>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// RecomposerScopeImpl.kt</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">compose</span><span class="hljs-params">(composer: <span class="hljs-type">Composer</span>)</span></span> {
    <span class="hljs-comment">// æ‰§è¡Œé‡ç»„ï¼Œè°ƒç”¨å‡½æ•°</span>
    block?.invoke(composer, <span class="hljs-number">1</span>) ?: error(<span class="hljs-string">"Invalid restart scope"</span>)
}

<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateScope</span><span class="hljs-params">(block: (<span class="hljs-type">Composer</span>, <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    <span class="hljs-keyword">this</span>.block = block
}
</code></pre>
<p>å†ç»åƒè¾›ä¸‡è‹¦ï¼Œæˆ‘ä»¬ç»ˆäºçœ‹åˆ°äº†Composeå‡½æ•°æ˜¯å¦‚ä½•é‡æ–°æ‰§è¡Œçš„ï¼Œæœ€å…³é”®çš„é‡ç»„ä½œç”¨åŸŸå¯¹è±¡åœ¨ä¸åŒçš„å¯¹è±¡ä¸­æ¥å›ç©¿æ¢­ï¼ŒçœŸæ˜¯å¤æ‚ã€‚</p>
<h2 data-id="heading-37">é‡æ–°æ‰§è¡Œå‡½æ•°</h2>
<p>é‡ç»„å°±æ˜¯é‡æ–°ä¸‹é¢çš„ä»£ç </p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> void <span class="hljs-type">Count</span>(<span class="hljs-meta">@Nullable</span> <span class="hljs-type">Composer</span> <span class="hljs-variable">$composer</span>, int <span class="hljs-variable">$changed</span>) {
    <span class="hljs-comment">// ============================================================</span>
    <span class="hljs-comment">// æ­¥éª¤1: å¯åŠ¨ RestartGroup</span>
    <span class="hljs-comment">// startRestartGroup ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Group å¹¶è®°å½• RecomposeScope</span>
    <span class="hljs-comment">// key = -1491082337 æ˜¯ç¼–è¯‘å™¨ä¸º Count å‡½æ•°ç”Ÿæˆçš„å”¯ä¸€æ ‡è¯†</span>
    <span class="hljs-comment">// ============================================================</span>
    <span class="hljs-variable">$composer</span> <span class="hljs-operator">=</span> <span class="hljs-variable">$composer</span>.startRestartGroup(<span class="hljs-operator">-</span><span class="hljs-number">1491082337</span>);
    
    <span class="hljs-comment">// è®°å½•æºä»£ç ä½ç½®ä¿¡æ¯ï¼ˆç”¨äºè°ƒè¯•å’Œå·¥å…·ï¼‰</span>
    <span class="hljs-type">ComposerKt</span>.sourceInformation(<span class="hljs-variable">$composer</span>, <span class="hljs-string">"C(Count)20@464L30,24@544L40,22@500L85:Demo.kt#bw2bq5"</span>);
    
    <span class="hljs-comment">// ============================================================</span>
    <span class="hljs-comment">// æ­¥éª¤2: è·³è¿‡æ£€æŸ¥</span>
    <span class="hljs-comment">// å¦‚æœ $changed == 0 ä¸”å¯ä»¥è·³è¿‡ï¼Œåˆ™è·³è¿‡æ•´ä¸ªç»„åˆ</span>
    <span class="hljs-comment">// ============================================================</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable">$changed</span> <span class="hljs-operator">==</span> <span class="hljs-number">0</span> <span class="hljs-operator">&amp;&amp;</span> <span class="hljs-variable">$composer</span>.getSkipping()) {
        <span class="hljs-variable">$composer</span>.skipToGroupEnd();
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å¼€å§‹è·Ÿè¸ªï¼ˆç”¨äºæ€§èƒ½åˆ†æï¼‰</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-type">ComposerKt</span>.isTraceInProgress()) {
            <span class="hljs-type">ComposerKt</span>.traceEventStart(<span class="hljs-operator">-</span><span class="hljs-number">1491082337</span>, <span class="hljs-variable">$changed</span>, <span class="hljs-operator">-</span><span class="hljs-number">1</span>, <span class="hljs-string">"com.example.kmp.Count (Demo.kt:18)"</span>);
        }

        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-comment">// æ­¥éª¤3: remember å— - åˆ›å»ºå¹¶ç¼“å­˜ MutableState</span>
        <span class="hljs-comment">// ============================================================</span>
        boolean var3 <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
        int <span class="hljs-variable">$i</span><span class="hljs-variable">$f</span><span class="hljs-variable">$remember</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        
        <span class="hljs-comment">// sourceInformationMarkerStart ä¸åˆ›å»º Groupï¼Œåªæ˜¯æ ‡è®°æºä»£ç ä½ç½®</span>
        <span class="hljs-type">ComposerKt</span>.sourceInformationMarkerStart(<span class="hljs-variable">$composer</span>, <span class="hljs-operator">-</span><span class="hljs-number">492369756</span>, <span class="hljs-string">"CC(remember)N(calculation):Composables.kt#9igjgp"</span>);
        
        boolean invalid<span class="hljs-variable">$iv</span><span class="hljs-variable">$iv</span> <span class="hljs-operator">=</span> (boolean)<span class="hljs-number">0</span>;
        int <span class="hljs-variable">$i</span><span class="hljs-variable">$f</span><span class="hljs-variable">$cache</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-comment">// æ­¥éª¤4: è¯»å–å·²ç¼“å­˜çš„å€¼</span>
        <span class="hljs-comment">// rememberedValue() ä»å½“å‰ slot è¯»å–ä¹‹å‰å­˜å‚¨çš„å€¼</span>
        <span class="hljs-comment">// å¦‚æœæ˜¯é¦–æ¬¡ç»„åˆï¼Œè¿”å› Composer.Empty</span>
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-type">Object</span> it<span class="hljs-variable">$iv</span><span class="hljs-variable">$iv</span> <span class="hljs-operator">=</span> <span class="hljs-variable">$composer</span>.rememberedValue();
        
        int var9 <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-type">Object</span> var10000;
        
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-comment">// æ­¥éª¤5: åˆ¤æ–­æ˜¯å¦éœ€è¦åˆ›å»ºæ–°å€¼</span>
        <span class="hljs-comment">// å¦‚æœè¯»å–åˆ° Emptyï¼Œè¯´æ˜æ˜¯é¦–æ¬¡ç»„åˆï¼Œéœ€è¦åˆ›å»ºæ–°çš„ MutableState</span>
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-keyword">if</span> (it<span class="hljs-variable">$iv</span><span class="hljs-variable">$iv</span> <span class="hljs-operator">==</span> <span class="hljs-type">Composer</span>.<span class="hljs-type">Companion</span>.getEmpty()) {
            int var10 <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
            <span class="hljs-comment">// åˆ›å»º MutableState&lt;Int&gt;ï¼Œåˆå§‹å€¼ä¸º 0</span>
            <span class="hljs-type">Object</span> value<span class="hljs-variable">$iv</span><span class="hljs-variable">$iv</span> <span class="hljs-operator">=</span> <span class="hljs-type">SnapshotStateKt</span>.mutableStateOf<span class="hljs-variable">$default</span>(<span class="hljs-number">0</span>, (<span class="hljs-type">SnapshotMutationPolicy</span>)null, <span class="hljs-number">2</span>, (<span class="hljs-type">Object</span>)null);
            <span class="hljs-comment">// å°†æ–°åˆ›å»ºçš„å€¼å­˜å‚¨åˆ° slot</span>
            <span class="hljs-variable">$composer</span>.updateRememberedValue(value<span class="hljs-variable">$iv</span><span class="hljs-variable">$iv</span>);
            var10000 <span class="hljs-operator">=</span> value<span class="hljs-variable">$iv</span><span class="hljs-variable">$iv</span>;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// é‡ç»„æ—¶ç›´æ¥ä½¿ç”¨ç¼“å­˜çš„å€¼</span>
            var10000 <span class="hljs-operator">=</span> it<span class="hljs-variable">$iv</span><span class="hljs-variable">$iv</span>;
        }

        <span class="hljs-type">Object</span> var11 <span class="hljs-operator">=</span> var10000;
        <span class="hljs-type">ComposerKt</span>.sourceInformationMarkerEnd(<span class="hljs-variable">$composer</span>);
        
        <span class="hljs-comment">// content$delegate å°±æ˜¯ remember { mutableStateOf(0) } çš„ç»“æœ</span>
        <span class="hljs-keyword">final</span> <span class="hljs-type">MutableState</span> content<span class="hljs-variable">$delegate</span> <span class="hljs-operator">=</span> (<span class="hljs-type">MutableState</span>)var11;
        
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-comment">// æ­¥éª¤6: ä¸º onClick lambda åˆ›å»º ReplaceGroup</span>
        <span class="hljs-comment">// startReplaceGroup åˆ›å»ºä¸€ä¸ªå¯æ›¿æ¢çš„ Group</span>
        <span class="hljs-comment">// key = -548075111 æ˜¯ç¼–è¯‘å™¨ç”Ÿæˆçš„å”¯ä¸€æ ‡è¯†</span>
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-variable">$composer</span>.startReplaceGroup(<span class="hljs-operator">-</span><span class="hljs-number">548075111</span>);
        
        <span class="hljs-comment">// æ£€æŸ¥ content$delegate æ˜¯å¦å‘ç”Ÿå˜åŒ–</span>
        boolean <span class="hljs-variable">$this</span><span class="hljs-variable">$cache</span><span class="hljs-variable">$iv</span><span class="hljs-variable">$iv</span> <span class="hljs-operator">=</span> <span class="hljs-variable">$composer</span>.changed(content<span class="hljs-variable">$delegate</span>);
        
        invalid<span class="hljs-variable">$iv</span><span class="hljs-variable">$iv</span> <span class="hljs-operator">=</span> (boolean)<span class="hljs-number">0</span>;
        <span class="hljs-type">Object</span> it<span class="hljs-variable">$iv</span> <span class="hljs-operator">=</span> <span class="hljs-variable">$composer</span>.rememberedValue();
        int var16 <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-comment">// æ­¥éª¤7: ç¼“å­˜ onClick lambda</span>
        <span class="hljs-comment">// å¦‚æœä¾èµ–æ²¡å˜ä¸”ä¹‹å‰æœ‰ç¼“å­˜ï¼Œä½¿ç”¨ç¼“å­˜çš„ lambda</span>
        <span class="hljs-comment">// å¦åˆ™åˆ›å»ºæ–°çš„ lambda å¹¶ç¼“å­˜</span>
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-operator">!</span><span class="hljs-variable">$this</span><span class="hljs-variable">$cache</span><span class="hljs-variable">$iv</span><span class="hljs-variable">$iv</span> <span class="hljs-operator">&amp;&amp;</span> it<span class="hljs-variable">$iv</span> <span class="hljs-operator">!=</span> <span class="hljs-type">Composer</span>.<span class="hljs-type">Companion</span>.getEmpty()) {
            var10000 <span class="hljs-operator">=</span> it<span class="hljs-variable">$iv</span>;
        } <span class="hljs-keyword">else</span> {
            var9 <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
            <span class="hljs-comment">// DemoKt::Count$lambda$4$lambda$3 æ˜¯ç¼–è¯‘å™¨ç”Ÿæˆçš„ lambda å¼•ç”¨</span>
            <span class="hljs-type">Object</span> value<span class="hljs-variable">$iv</span> <span class="hljs-operator">=</span> <span class="hljs-type">DemoKt</span>::<span class="hljs-type">Count</span><span class="hljs-variable">$lambda</span><span class="hljs-variable">$4</span><span class="hljs-variable">$lambda</span><span class="hljs-variable">$3</span>;
            <span class="hljs-variable">$composer</span>.updateRememberedValue(value<span class="hljs-variable">$iv</span>);
            var10000 <span class="hljs-operator">=</span> value<span class="hljs-variable">$iv</span>;
        }

        <span class="hljs-type">Function0</span> var13 <span class="hljs-operator">=</span> (<span class="hljs-type">Function0</span>)var10000;
        
        <span class="hljs-comment">// ç»“æŸ ReplaceGroup</span>
        <span class="hljs-variable">$composer</span>.endReplaceGroup();
        
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-comment">// æ­¥éª¤8: è°ƒç”¨ Button Composable</span>
        <span class="hljs-comment">// Button å†…éƒ¨ä¼šåˆ›å»ºè‡ªå·±çš„ Groups</span>
        <span class="hljs-comment">// æœ€åä¸€ä¸ªå‚æ•°æ˜¯ content lambdaï¼Œä½¿ç”¨ rememberComposableLambda åŒ…è£…</span>
        <span class="hljs-comment">// ============================================================</span>
        <span class="hljs-type">ButtonKt</span>.<span class="hljs-type">Button</span>(
            var13,                    <span class="hljs-comment">// onClick</span>
            (<span class="hljs-type">Modifier</span>)null,           <span class="hljs-comment">// modifier</span>
            <span class="hljs-literal">false</span>,                    <span class="hljs-comment">// enabled</span>
            (<span class="hljs-type">Shape</span>)null,              <span class="hljs-comment">// shape</span>
            (<span class="hljs-type">ButtonColors</span>)null,       <span class="hljs-comment">// colors</span>
            (<span class="hljs-type">ButtonElevation</span>)null,    <span class="hljs-comment">// elevation</span>
            (<span class="hljs-type">BorderStroke</span>)null,       <span class="hljs-comment">// border</span>
            (<span class="hljs-type">PaddingValues</span>)null,      <span class="hljs-comment">// contentPadding</span>
            (<span class="hljs-type">MutableInteractionSource</span>)null, <span class="hljs-comment">// interactionSource</span>
            <span class="hljs-comment">// content lambda - ä½¿ç”¨ rememberComposableLambda ç¼“å­˜</span>
            (<span class="hljs-type">Function3</span>)<span class="hljs-type">ComposableLambdaKt</span>.rememberComposableLambda(
                <span class="hljs-number">1836707247</span>,           <span class="hljs-comment">// key</span>
                <span class="hljs-literal">true</span>,                 <span class="hljs-comment">// tracked</span>
                new <span class="hljs-type">Function3</span>() {     <span class="hljs-comment">// lambda å®ç°</span>
                    <span class="hljs-meta">@Composable</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> void invoke(<span class="hljs-type">RowScope</span> <span class="hljs-variable">$this</span><span class="hljs-variable">$Button</span>, <span class="hljs-type">Composer</span> <span class="hljs-variable">$composer</span>, int <span class="hljs-variable">$changed</span>) {
                        <span class="hljs-comment">// ... Text(content.toString()) ...</span>
                    }
                    <span class="hljs-comment">// ...</span>
                },
                <span class="hljs-variable">$composer</span>,
                <span class="hljs-number">54</span>
            ),
            <span class="hljs-variable">$composer</span>,
            <span class="hljs-number">805306368</span>,               <span class="hljs-comment">// $changed</span>
            <span class="hljs-number">510</span>                      <span class="hljs-comment">// $default</span>
        );
        
        <span class="hljs-keyword">if</span> (<span class="hljs-type">ComposerKt</span>.isTraceInProgress()) {
            <span class="hljs-type">ComposerKt</span>.traceEventEnd();
        }
    }

    <span class="hljs-comment">// ============================================================</span>
    <span class="hljs-comment">// æ­¥éª¤9: ç»“æŸ RestartGroup å¹¶æ³¨å†Œé‡ç»„å›è°ƒ</span>
    <span class="hljs-comment">// endRestartGroup è¿”å› ScopeUpdateScopeï¼Œç”¨äºæ³¨å†Œé‡ç»„ lambda</span>
    <span class="hljs-comment">// ============================================================</span>
    <span class="hljs-type">ScopeUpdateScope</span> var21 <span class="hljs-operator">=</span> <span class="hljs-variable">$composer</span>.endRestartGroup();
    <span class="hljs-keyword">if</span> (var21 <span class="hljs-operator">!=</span> null) {
        <span class="hljs-comment">// æ³¨å†Œé‡ç»„å›è°ƒï¼šå½“éœ€è¦é‡ç»„æ—¶ï¼Œè°ƒç”¨ Count$lambda$5</span>
        var21.updateScope(DemoKt::<span class="hljs-type">Count</span><span class="hljs-variable">$lambda</span><span class="hljs-variable">$5</span>);
    }
}

<span class="hljs-comment">// é‡ç»„æ—¶è°ƒç”¨çš„ lambda</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Unit</span> <span class="hljs-type">Count</span><span class="hljs-variable">$lambda</span><span class="hljs-variable">$5</span>(int $<span class="hljs-variable">$changed</span>, <span class="hljs-type">Composer</span> <span class="hljs-variable">$composer</span>, int <span class="hljs-variable">$force</span>) {
    <span class="hljs-type">Count</span>(<span class="hljs-variable">$composer</span>, <span class="hljs-type">RecomposeScopeImplKt</span>.updateChangedFlags($<span class="hljs-variable">$changed</span> <span class="hljs-operator">|</span> <span class="hljs-number">1</span>));
    <span class="hljs-keyword">return</span> <span class="hljs-type">Unit</span>.<span class="hljs-type">INSTANCE</span>;
}
</code></pre>
<h3 data-id="heading-38">startRestartGroup</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">//Composer.kt</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startRestartGroup</span><span class="hljs-params">(key: <span class="hljs-type">Int</span>)</span></span>: Composer {
    startReplaceGroup(key)
    addRecomposeScope()
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>
}
</code></pre>
<h3 data-id="heading-39">startReplaceGroup</h3>
<p>é¦–æ¬¡ç»„åˆï¼Œkeyä¿å­˜åˆ°äº†groupsæ•°ç»„ï¼Œé‡ç»„çš„æ—¶å€™ï¼Œä»groupsæ•°ç»„å–å‡ºçš„keyä¸ä¼ å…¥çš„keyç›¸ç­‰ï¼Œè¿›å…¥æ›´æ–°ç»„çš„ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">//Composer.kt</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startReplaceGroup</span><span class="hljs-params">(key: <span class="hljs-type">Int</span>)</span></span> {
    <span class="hljs-comment">// é‡ç»„ï¼Œinsertingä¸ºfalse</span>
    <span class="hljs-keyword">if</span> (inserting) {
        reader.beginEmpty()
        writer.startGroup(key, Composer.Empty)
        enterGroup(<span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>)
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-comment">// é¦–æ¬¡ç»„åˆï¼Œkeyä¿å­˜åˆ°äº†groupsæ•°ç»„</span>
    <span class="hljs-keyword">val</span> slotKey = reader.groupKey
    <span class="hljs-comment">// é‡ç»„ï¼Œkeyç›¸ç­‰</span>
    <span class="hljs-keyword">if</span> (slotKey == key &amp;&amp; !reader.hasObjectKey) {
        <span class="hljs-comment">// è¯»å–ç»„çš„ä¿¡æ¯</span>
        reader.startGroup()
        enterGroup(<span class="hljs-literal">false</span>, <span class="hljs-literal">null</span>)
        <span class="hljs-keyword">return</span>
    }
}
</code></pre>
<h3 data-id="heading-40">startGroup</h3>
<p>è¯»å–ç»„çš„ä¿¡æ¯</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// SlotTable.kt</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startGroup</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">if</span> (emptyCount &lt;= <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">val</span> parent = parent
        <span class="hljs-keyword">val</span> currentGroup = currentGroup
        requirePrecondition(groups.parentAnchor(currentGroup) == parent) {
            <span class="hljs-string">"Invalid slot table detected"</span>
        }
        sourceInformationMap?.<span class="hljs-keyword">get</span>(anchor(parent))?.reportGroup(table, currentGroup)
        <span class="hljs-keyword">val</span> currentSlotStack = currentSlotStack
        <span class="hljs-keyword">val</span> currentSlot = currentSlot
        <span class="hljs-keyword">val</span> currentEndSlot = currentSlotEnd
        <span class="hljs-keyword">if</span> (currentSlot == <span class="hljs-number">0</span> &amp;&amp; currentEndSlot == <span class="hljs-number">0</span>) {
            currentSlotStack.push(-<span class="hljs-number">1</span>)
        } <span class="hljs-keyword">else</span> {
            currentSlotStack.push(currentSlot)
        }
        <span class="hljs-keyword">this</span>.parent = currentGroup
        currentEnd = currentGroup + groups.groupSize(currentGroup)
        <span class="hljs-keyword">this</span>.currentGroup = currentGroup + <span class="hljs-number">1</span>
        <span class="hljs-keyword">this</span>.currentSlot = groups.slotAnchor(currentGroup)
        <span class="hljs-keyword">this</span>.currentSlotEnd =
            <span class="hljs-keyword">if</span> (currentGroup &gt;= groupsSize - <span class="hljs-number">1</span>) slotsSize
            <span class="hljs-keyword">else</span> groups.dataAnchor(currentGroup + <span class="hljs-number">1</span>)
    }
}
</code></pre>
<h3 data-id="heading-41">addRecomposeScope</h3>
<p>é‡ç»„çš„æ—¶å€™ï¼Œinsertingä¸ºfalseï¼Œä»slotsæ•°ç»„å–å‡ºé‡ç»„ä½œç”¨åŸŸå¯¹è±¡ï¼Œç”±äºåç»­è¿˜éœ€è¦æ‰§è¡Œ<code>endReplaceGroup</code>ï¼Œæ‰€ä»¥è¿˜æ˜¯éœ€è¦å°†é‡ç»„ä½œç”¨åŸŸå¯¹è±¡æ·»åŠ åˆ°å¤±æ•ˆæ ˆã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Composer.kt</span>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addRecomposeScope</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// insertingä¸ºfalse</span>
    <span class="hljs-keyword">if</span> (inserting) {
        <span class="hljs-keyword">val</span> scope = RecomposeScopeImpl(composition <span class="hljs-keyword">as</span> CompositionImpl)
        invalidateStack.push(scope)
        updateValue(scope)
        enterRecomposeScope(scope)
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">val</span> invalidation = invalidations.removeLocation(reader.parent)
        <span class="hljs-comment">// ä»slotsæ•°ç»„å–å‡ºé‡ç»„ä½œç”¨åŸŸå¯¹è±¡</span>
        <span class="hljs-keyword">val</span> slot = reader.next()
        <span class="hljs-keyword">val</span> scope =
            <span class="hljs-keyword">if</span> (slot == Composer.Empty) {
                <span class="hljs-comment">// This code is executed when a previously deactivate region is becomes active</span>
                <span class="hljs-comment">// again. See Composer.deactivateToEndGroup()</span>
                <span class="hljs-keyword">val</span> newScope = RecomposeScopeImpl(composition <span class="hljs-keyword">as</span> CompositionImpl)
                updateValue(newScope)
                newScope
            } <span class="hljs-keyword">else</span> slot <span class="hljs-keyword">as</span> RecomposeScopeImpl
        scope.requiresRecompose =
            invalidation != <span class="hljs-literal">null</span> ||
                scope.forcedRecompose.also { forced -&gt;
                    <span class="hljs-keyword">if</span> (forced) scope.forcedRecompose = <span class="hljs-literal">false</span>
                }
        <span class="hljs-comment">// æ·»åŠ åˆ°å¤±æ•ˆæ ˆ        </span>
        invalidateStack.push(scope)
        enterRecomposeScope(scope)

        <span class="hljs-keyword">if</span> (scope.paused) {
            scope.paused = <span class="hljs-literal">false</span>
            scope.resuming = <span class="hljs-literal">true</span>
            changeListWriter.startResumingScope(scope)
            <span class="hljs-keyword">if</span> (!reusing &amp;&amp; scope.reusing) {
                reusing = <span class="hljs-literal">true</span>
                scope.resetReusing = <span class="hljs-literal">true</span>
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-42">remember</h3>
<p>é¦–æ¬¡ç»„åˆï¼Œåˆ›å»ºçŠ¶æ€å¯¹è±¡ï¼Œä¿å­˜åˆ°slotsæ•°ç»„ï¼Œé‡ç»„çš„æ—¶å€™ä»slotsæ•°ç»„ä¸­å–å‡ºçŠ¶æ€å¯¹è±¡ã€‚æœ‰äº†slotsæ•°ç»„ï¼Œç»„åˆå’Œé‡ç»„çš„çŠ¶æ€å¯¹è±¡å°±æ˜¯åŒä¸€ä¸ªã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">remember</span><span class="hljs-params">(<span class="hljs-keyword">crossinline</span> calculation: @<span class="hljs-type">DisallowComposableCalls</span> () -&gt; <span class="hljs-type">T</span>)</span></span>: T =
    currentComposer.cache(<span class="hljs-literal">false</span>, calculation)
   

<span class="hljs-keyword">public</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> Composer.<span class="hljs-title">cache</span><span class="hljs-params">(invalid: <span class="hljs-type">Boolean</span>, block: @<span class="hljs-type">DisallowComposableCalls</span> () -&gt; <span class="hljs-type">T</span>)</span></span>: T {
    <span class="hljs-meta">@Suppress(<span class="hljs-string">"UNCHECKED_CAST"</span>)</span>
    <span class="hljs-comment">// ä»slotsæ•°ç»„ä¸­å–å‡ºçŠ¶æ€å¯¹è±¡ï¼Œé‡ç»„çš„æ—¶å€™ï¼ŒçŠ¶æ€å¯¹è±¡ä¸ä¸ºç©ºï¼Œç›´æ¥è¿”å›</span>
    <span class="hljs-keyword">return</span> rememberedValue().let {
        <span class="hljs-keyword">if</span> (invalid || it === Composer.Empty) {
            <span class="hljs-keyword">val</span> value = block()
            updateRememberedValue(value)
            value
        } <span class="hljs-keyword">else</span> it
    } <span class="hljs-keyword">as</span> T
}
</code></pre>
<h3 data-id="heading-43">endRestartGroup</h3>
<p>ä»å¤±æ•ˆæ ˆä¸­å–å‡ºé‡ç»„ä½œç”¨åŸŸå¯¹è±¡ï¼Œè¿”å›é‡ç»„ä½œç”¨åŸŸå¯¹è±¡ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">override fun endRestartGroup(): ScopeUpdateScope? {
    // å–å‡ºé‡ç»„ä½œç”¨åŸŸå¯¹è±¡
    val <span class="hljs-attr">scope</span> = if (invalidateStack.isNotEmpty()) invalidateStack.pop() else null
    if (scope != null) {
        <span class="hljs-attr">scope.requiresRecompose</span> = <span class="hljs-literal">false</span>
        exitRecomposeScope(scope)?.let { changeListWriter.endCompositionScope(it, composition) }
        if (scope.resuming) {
            <span class="hljs-attr">scope.resuming</span> = <span class="hljs-literal">false</span>
            changeListWriter.endResumingScope(scope)
            <span class="hljs-attr">scope.reusing</span> = <span class="hljs-literal">false</span>
            if (scope.resetReusing) {
                <span class="hljs-attr">scope.resetReusing</span> = <span class="hljs-literal">false</span>
                <span class="hljs-attr">reusing</span> = <span class="hljs-literal">false</span>
            }
        }
    }
    val <span class="hljs-attr">result</span> =
        if (scope != null &amp;&amp; !scope.skipped &amp;&amp; (scope.used || forceRecomposeScopes)) {
            if (<span class="hljs-attr">scope.anchor</span> == null) {
                <span class="hljs-attr">scope.anchor</span> =
                    if (inserting) {
                        writer.anchor(writer.parent)
                    } else {
                        reader.anchor(reader.parent)
                    }
            }
            <span class="hljs-attr">scope.defaultsInvalid</span> = <span class="hljs-literal">false</span>
            scope
        } else {
            null
        }
    end(<span class="hljs-attr">isNode</span> = <span class="hljs-literal">false</span>)
    // è¿”å›é‡ç»„ä½œç”¨åŸŸå¯¹è±¡
    return result
}
</code></pre>
<p>æ‹¿åˆ°é‡ç»„ä½œç”¨åŸŸå¯¹è±¡åï¼Œè°ƒç”¨updateScopeä¿å­˜éœ€è¦é‡æ–°æ‰§è¡Œçš„å‡½æ•°ï¼Œä¸‹æ¬¡é‡ç»„ï¼Œé‡å¤æµç¨‹ã€‚</p>
<pre><code class="hljs language-php" lang="php">ScopeUpdateScope var21 = <span class="hljs-variable">$composer</span>.<span class="hljs-title function_ invoke__">endRestartGroup</span>(); 
<span class="hljs-keyword">if</span> (var21 != <span class="hljs-literal">null</span>) { <span class="hljs-comment">// æ³¨å†Œé‡ç»„å›è°ƒï¼šå½“éœ€è¦é‡ç»„æ—¶ï¼Œè°ƒç”¨ Count$lambda$5          </span>
	var21.<span class="hljs-title function_ invoke__">updateScope</span>(<span class="hljs-title class_">DemoKt</span>::Count$lambda$<span class="hljs-number">5</span>); 
}

<span class="hljs-comment">// é‡ç»„æ—¶è°ƒç”¨çš„lambda</span>
<span class="hljs-keyword">private</span> <span class="hljs-built_in">static</span> <span class="hljs-keyword">final</span> Unit Count$lambda$<span class="hljs-number">5</span>(<span class="hljs-keyword">int</span> <span class="hljs-variable">$$changed</span>, Composer <span class="hljs-variable">$composer</span>, <span class="hljs-keyword">int</span> <span class="hljs-variable">$force</span>) {
    <span class="hljs-title function_ invoke__">Count</span>(<span class="hljs-variable">$composer</span>, RecomposeScopeImplKt.<span class="hljs-title function_ invoke__">updateChangedFlags</span>(<span class="hljs-variable">$$changed</span> | <span class="hljs-number">1</span>));
    <span class="hljs-keyword">return</span> Unit.INSTANCE;
}
</code></pre>
<h2 data-id="heading-44">æ€»ç»“</h2>
<p><strong>ä¸ç®¡æ˜¯é¦–æ¬¡ç»„åˆè¿˜æ˜¯é‡ç»„ï¼Œéƒ½ä¼šåˆ›å»ºå¿«ç…§ã€‚é¦–æ¬¡ç»„åˆï¼Œåˆ›å»ºé‡ç»„ä½œç”¨åŸŸå¯¹è±¡ï¼Œè·å–çŠ¶æ€æ—¶ï¼ŒComposeä¼šå°†çŠ¶æ€å¯¹è±¡ä¸é‡ç»„ä½œç”¨åŸŸå¯¹è±¡å»ºç«‹æ˜ å°„ã€‚</strong></p>
<p><strong>ç‚¹å‡»æŒ‰é’®ä¿®æ”¹çŠ¶æ€ï¼Œç‚¹å‡»äº‹ä»¶æ˜¯ç”±ç³»ç»Ÿå›è°ƒçš„ï¼Œä¸åœ¨Composeåˆ›å»ºçš„å¿«ç…§å†…ï¼Œé€šè¿‡å…¨å±€å¿«ç…§å›è°ƒï¼ŒComposeæ³¨å†Œäº†å›è°ƒã€‚å”¤é†’åç¨‹ï¼Œå½“ä¸‹ä¸€å¸§æ¥ä¸´æ—¶ï¼Œå–å‡ºé‡ç»„ä½œç”¨åŸŸå¯¹è±¡ï¼Œé‡æ–°æ‰§è¡Œå‡½æ•°ã€‚</strong></p>
<p><strong>é‡ç»„çš„æ—¶å€™ï¼Œä¸æ˜¯é‡æ–°åˆ›å»ºå¯¹è±¡ï¼Œè€Œæ˜¯ä»slotæ•°ç»„ä¸­å–å‡ºé‡ç»„ä½œç”¨åŸŸå¯¹è±¡å’ŒçŠ¶æ€å¯¹è±¡ï¼Œå‡½æ•°å°±èƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œã€‚</strong></p>
<h2 data-id="heading-45">é—®ä¸ªé—®é¢˜</h2>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">Count</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> content <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-number">0</span>) }

    Button({
        content++
    }, content = {
        TextWrapper {
            Text(content.toString())
        }
    })
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">TextWrapper</span><span class="hljs-params">(content: @<span class="hljs-type">Composable</span> () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    content()
}
</code></pre>
<p>å¦‚ä¸Šä»£ç ï¼Œ<code>Count</code>å‡½æ•°å’ŒÂ <code>TextWrapper</code>å‡½æ•°éƒ½è¢«ç¼–è¯‘å™¨æ’å…¥äº†<code>startRestartGroup</code>ï¼Œéƒ½ä¼šåˆ›å»ºé‡ç»„ä½œç”¨åŸŸå¯¹è±¡ã€‚ä½†ç‚¹å‡»æŒ‰é’®åï¼Œåªæœ‰<code>TextWrapper</code>å‡½æ•°ä¼šé‡ç»„ï¼Œè€Œ<code>Count</code>å‡½æ•°ä¸ä¼šã€‚è¿™æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿç­”æ¡ˆå°±æ•£è½åœ¨æœ¬æ–‡ä¸­ï¼Œå¦‚æœä½ è¯»æ‡‚äº†æœ¬æ–‡ï¼Œé‚£é—®é¢˜åº”å½“ä¸éš¾ã€‚</p>
<p><strong>æ¬¢è¿å¤§å®¶åœ¨è¯„è®ºåŒºè®¨è®ºã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SwiftUI ä¼ å€¼æ–¹å¼ç³»ç»Ÿæ•´ç†]]></title>    <link>https://juejin.cn/post/7597271614941773843</link>    <guid>https://juejin.cn/post/7597271614941773843</guid>    <pubDate>2026-01-20T11:02:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597271614941773843" data-draft-id="7597250364125020223" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SwiftUI ä¼ å€¼æ–¹å¼ç³»ç»Ÿæ•´ç†"/> <meta itemprop="keywords" content="iOS,SwiftUI"/> <meta itemprop="datePublished" content="2026-01-20T11:02:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å®¶ç”µç»´ä¿®æŠ€å¸ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1345457963410103"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SwiftUI ä¼ å€¼æ–¹å¼ç³»ç»Ÿæ•´ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1345457963410103/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å®¶ç”µç»´ä¿®æŠ€å¸ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T11:02:23.000Z" title="Tue Jan 20 2026 11:02:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">SwiftUI ä¼ å€¼æ–¹å¼ç³»ç»Ÿæ•´ç†</h2>
<p>åœ¨ SwiftUI ä¸­ï¼Œæ‰€è°“â€œä¼ å€¼â€æœ¬è´¨ä¸Šæ˜¯ <strong>çŠ¶æ€ï¼ˆStateï¼‰å’Œæ•°æ®æµï¼ˆData Flowï¼‰åœ¨ä¸åŒ View ä¹‹é—´çš„ä¼ æ’­æ–¹å¼</strong>ã€‚<code>fullScreenCover</code>ã€<code>sheet</code>ã€<code>NavigationStack</code> åªæ˜¯è§†å›¾å‘ˆç°æ‰‹æ®µï¼Œæœ¬èº«å¹¶ä¸è´Ÿè´£æ•°æ®ä¼ é€’ã€‚</p>
<p>æœ¬æ–‡ä»åŸºç¡€åˆ°å·¥ç¨‹åŒ–ï¼Œç³»ç»Ÿæ•´ç† SwiftUI ä¸­å¸¸è§ã€å¯è½åœ°çš„ä¼ å€¼æ–¹å¼ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€åˆå§‹åŒ–ä¼ å€¼ï¼ˆçˆ¶ â†’ å­ï¼Œæœ€æ¨èï¼‰</h3>
<h4 data-id="heading-2">1. æ„é€ å‡½æ•°å‚æ•°ï¼ˆValue Injectionï¼‰</h4>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>çˆ¶ View â†’ å­ View</li>
<li>ä¸€æ¬¡æ€§æ•°æ®</li>
<li>åªè¯»æˆ–æœ¬åœ°ä¿®æ”¹</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">struct DetailView: View {
    <span class="hljs-built_in">let</span> <span class="hljs-built_in">id</span>: Int
}

DetailView(<span class="hljs-built_in">id</span>: 10)
</code></pre>
<p>ç”¨äº <code>fullScreenCover</code>ï¼š</p>
<pre><code class="hljs language-php" lang="php">.<span class="hljs-title function_ invoke__">fullScreenCover</span>(<span class="hljs-attr">isPresented</span>: <span class="hljs-variable">$showDetail</span>) {
    <span class="hljs-title function_ invoke__">DetailView</span>(<span class="hljs-attr">id</span>: selectedId)
}
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>ç±»å‹å®‰å…¨</li>
<li>ç»“æ„æ¸…æ™°</li>
<li>SwiftUI é¦–é€‰æ–¹å¼</li>
</ul>
<hr/>
<h3 data-id="heading-3">äºŒã€çŠ¶æ€ç»‘å®šä¼ å€¼ï¼ˆçˆ¶ â†” å­ï¼‰</h3>
<h4 data-id="heading-4">2. <code>@Binding</code></h4>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç¼–è¾‘é¡µ</li>
<li>è¡¨å•</li>
<li>å­ View éœ€è¦ä¿®æ”¹çˆ¶çŠ¶æ€</li>
</ul>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">EditView</span>: View {
    @Binding var text: <span class="hljs-type">String</span>
}
</code></pre>
<p>çˆ¶ Viewï¼š</p>
<pre><code class="hljs language-php" lang="php">@State <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> name = <span class="hljs-string">""</span>

.<span class="hljs-title function_ invoke__">fullScreenCover</span>(<span class="hljs-attr">isPresented</span>: <span class="hljs-variable">$showEdit</span>) {
    <span class="hljs-title function_ invoke__">EditView</span>(<span class="hljs-attr">text</span>: <span class="hljs-variable">$name</span>)
}
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>åŒå‘åŒæ­¥</li>
<li>ç”Ÿå‘½å‘¨æœŸç”±çˆ¶ View æ§åˆ¶</li>
<li><code>sheet</code> / <code>fullScreenCover</code> é€šç”¨</li>
</ul>
<hr/>
<h3 data-id="heading-5">ä¸‰ã€ViewModel ä¼ å€¼ï¼ˆå·¥ç¨‹åŒ–é¦–é€‰ï¼‰</h3>
<h4 data-id="heading-6">3. <code>ObservableObject</code> æ³¨å…¥</h4>
<h5 data-id="heading-7">ViewModel</h5>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserViewModel</span>: <span class="hljs-title class_">ObservableObject</span> {
    <span class="hljs-meta">@Published</span> <span class="hljs-keyword">var</span> name: <span class="hljs-type">String</span>

    <span class="hljs-keyword">init</span>(<span class="hljs-params">name</span>: <span class="hljs-type">String</span>) {
        <span class="hljs-keyword">self</span>.name <span class="hljs-operator">=</span> name
    }
}
</code></pre>
<h5 data-id="heading-8">æ–¹å¼ä¸€ï¼šæ–°å»º VM</h5>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-class">.fullScreenCover</span>(<span class="hljs-attribute">isPresented</span>: $show) {
    <span class="hljs-selector-tag">UserView</span>(<span class="hljs-attribute">vm</span>: <span class="hljs-built_in">UserViewModel</span>(<span class="hljs-attribute">name</span>: <span class="hljs-string">"Tom"</span>))
}
</code></pre>
<h5 data-id="heading-9">æ–¹å¼äºŒï¼šå…±äº« VM</h5>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@StateObject</span> var vm = <span class="hljs-built_in">UserViewModel</span>(<span class="hljs-attribute">name</span>: <span class="hljs-string">"Tom"</span>)

.<span class="hljs-built_in">fullScreenCover</span>(<span class="hljs-attribute">isPresented</span>: $show) {
    <span class="hljs-selector-tag">UserView</span>(<span class="hljs-attribute">vm</span>: vm)
}
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>æ¸…æ™°çš„çŠ¶æ€å½’å±</li>
<li>é€‚åˆå¤æ‚é¡µé¢</li>
<li>MVVM æ ‡å‡†åšæ³•</li>
</ul>
<hr/>
<h3 data-id="heading-10">å››ã€å…¨å±€ä¼ å€¼ï¼ˆè·¨å±‚çº§å…±äº«ï¼‰</h3>
<h4 data-id="heading-11">4. <code>@EnvironmentObject</code></h4>
<h5 data-id="heading-12">å…¨å±€çŠ¶æ€</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppState</span>: <span class="hljs-type">ObservableObject</span> {
    <span class="hljs-meta">@Published</span> <span class="hljs-keyword">var</span> isLogin = <span class="hljs-literal">false</span>
}
</code></pre>
<p>æ³¨å…¥ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">RootView</span>()
    <span class="hljs-selector-class">.environmentObject</span>(AppState())
</code></pre>
<p>ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@EnvironmentObject</span> var <span class="hljs-attribute">appState</span>: AppState
</code></pre>
<p>ç”¨äº <code>fullScreenCover</code>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-selector-class">.fullScreenCover</span>(isPresented: $showLogin) {
    <span class="hljs-built_in">LoginView</span>()
        <span class="hljs-selector-class">.environmentObject</span>(appState)
}
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç™»å½•æ€</li>
<li>ç”¨æˆ·ä¿¡æ¯</li>
<li>ä¸»é¢˜ / æƒé™ / å…¨å±€é…ç½®</li>
</ul>
<hr/>
<h3 data-id="heading-13">äº”ã€å¯¼èˆªæ ˆä¼ å€¼ï¼ˆiOS 16+ï¼‰</h3>
<h4 data-id="heading-14">5. <code>NavigationStack</code> + <code>navigationDestination</code></h4>
<pre><code class="hljs language-scss" lang="scss">NavigationStack {
    <span class="hljs-built_in">NavigationLink</span>(value: user) {
        Text(user.name)
    }
}
<span class="hljs-selector-class">.navigationDestination</span>(for: User.self) { user in
    <span class="hljs-built_in">UserDetailView</span>(user: user)
}
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>è·¯ç”±çŠ¶æ€åŒ–</li>
<li>æ”¯æŒæ·±é“¾ä¸çŠ¶æ€æ¢å¤</li>
<li>éå¸¸é€‚åˆåˆ—è¡¨ â†’ è¯¦æƒ…</li>
</ul>
<hr/>
<h3 data-id="heading-15">å…­ã€å›è°ƒé—­åŒ…ï¼ˆå­ â†’ çˆ¶ï¼Œè¡Œä¸ºå‹ï¼‰</h3>
<h4 data-id="heading-16">6. Closure å›ä¼ </h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">EditView</span>: View {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">onSave</span>: (<span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> Void
}
</code></pre>
<pre><code class="hljs language-ini" lang="ini">.fullScreenCover(isPresented: $showEdit) {
    EditView { newName in
        <span class="hljs-attr">name</span> = newName
    }
}
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>æ˜ç¡®è¡¨è¾¾â€œäº‹ä»¶â€è€ŒéçŠ¶æ€</li>
<li>ä¸æš´éœ²çˆ¶ View å†…éƒ¨ç»“æ„</li>
<li>éå¸¸é€‚åˆå·¥ç¨‹åŒ–è®¾è®¡</li>
</ul>
<hr/>
<h3 data-id="heading-17">ä¸ƒã€Dismiss + å…±äº«çŠ¶æ€</h3>
<h4 data-id="heading-18">7. <code>@Environment(.dismiss)</code></h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Environment(.dismiss)</span> <span class="hljs-keyword">var</span> dismiss
</code></pre>
<p>å¸¸ä¸ä»¥ä¸‹æ–¹å¼é…åˆï¼š</p>
<ul>
<li><code>@Binding</code></li>
<li><code>ObservableObject</code></li>
</ul>
<p><strong>ä½¿ç”¨æ¨¡å¼</strong>ï¼š</p>
<ul>
<li>å­ View ä¿®æ”¹çŠ¶æ€</li>
<li>è°ƒç”¨ <code>dismiss()</code> å…³é—­é¡µé¢</li>
<li>ä¸ç›´æ¥ return æ•°æ®</li>
</ul>
<hr/>
<h3 data-id="heading-19">å…«ã€PreferenceKeyï¼ˆé«˜çº§ï¼Œä¸å»ºè®®å¸¸è§„ä½¿ç”¨ï¼‰</h3>
<h4 data-id="heading-20">8. <code>PreferenceKey</code></h4>
<p><strong>ç”¨é€”</strong>ï¼š</p>
<ul>
<li>å­ View â†’ çˆ¶ View</li>
<li>å¸ƒå±€ä¿¡æ¯å›ä¼ </li>
</ul>
<p><strong>å…¸å‹åœºæ™¯</strong>ï¼š</p>
<ul>
<li>è‡ªå®šä¹‰å¯¼èˆªæ é«˜åº¦</li>
<li>å¤æ‚å¸ƒå±€åé¦ˆ</li>
</ul>
<p><strong>ä¸é€‚åˆ</strong>ï¼š</p>
<ul>
<li>æ™®é€šä¸šåŠ¡æ•°æ®ä¼ é€’</li>
</ul>
<hr/>
<h3 data-id="heading-21">ä¹ã€<code>fullScreenCover</code> ä¸“å±æ³¨æ„ç‚¹</h3>
<h4 data-id="heading-22">1. æ§åˆ¶æƒæ¥è‡ªçŠ¶æ€</h4>
<pre><code class="hljs language-javascript" lang="javascript">.<span class="hljs-title function_">fullScreenCover</span>(<span class="hljs-params">isPresented: $isPresented</span>) { ... }
</code></pre>
<h4 data-id="heading-23">2. View ä¼šè¢«å¤šæ¬¡åˆ›å»º</h4>
<ul>
<li>ä¸è¦åœ¨ <code>body</code> ä¸­åˆå§‹åŒ–é‡è¦çŠ¶æ€</li>
<li>ä½¿ç”¨ <code>@StateObject</code> æŒæœ‰ ViewModel</li>
</ul>
<h4 data-id="heading-24">3. æ¨è <code>item:</code>ï¼ˆiOS 16+ï¼‰</h4>
<pre><code class="hljs language-php" lang="php">.<span class="hljs-title function_ invoke__">fullScreenCover</span>(<span class="hljs-attr">item</span>: <span class="hljs-variable">$selectedUser</span>) { user in
    <span class="hljs-title function_ invoke__">UserView</span>(<span class="hljs-attr">user</span>: user)
}
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>ç”Ÿå‘½å‘¨æœŸä¸æ•°æ®å¼ºç»‘å®š</li>
<li>å‡å°‘çŠ¶æ€ä¸åŒæ­¥é—®é¢˜</li>
</ul>
<hr/>
<h3 data-id="heading-25">åã€ä¼ å€¼æ–¹å¼é€ŸæŸ¥è¡¨</h3>





































<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹å¼</th></tr></thead><tbody><tr><td>çˆ¶ â†’ å­ï¼ˆä¸€æ¬¡æ€§ï¼‰</td><td>init å‚æ•°</td></tr><tr><td>çˆ¶ â†” å­ï¼ˆç¼–è¾‘ï¼‰</td><td>@Binding</td></tr><tr><td>å¤æ‚é¡µé¢</td><td>ObservableObject</td></tr><tr><td>å¤šé¡µé¢å…±äº«</td><td>@EnvironmentObject</td></tr><tr><td>è¡Œä¸ºå›ä¼ </td><td>Closure</td></tr><tr><td>è·¯ç”±ä¼ å€¼</td><td>NavigationStack</td></tr><tr><td>fullScreenCover</td><td>init / Binding / ViewModel</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-26">æ€»ç»“</h3>
<blockquote>
<p>SwiftUI ä¸­ä¸å­˜åœ¨â€œè·³è½¬æ—¶ä¼ å€¼â€ï¼Œåªæœ‰ <strong>çŠ¶æ€æ³¨å…¥ä¸æ•°æ®æµç®¡ç†</strong>ã€‚</p>
<p><code>fullScreenCover</code>ã€<code>sheet</code>ã€<code>NavigationStack</code> åªæ˜¯ UI å‘ˆç°æ–¹å¼ï¼ŒçœŸæ­£å†³å®šæ•°æ®ä¼ é€’çš„æ˜¯çŠ¶æ€çš„è®¾è®¡ä¸å½’å±ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[# ä» 0 åˆ° 1ï¼š**é»è·ƒæ˜¥**è¯¦è§£ AI æ™ºèƒ½ä½“è¿ç”¨å·¥ç¨‹å¸ˆçš„å·¥ç¨‹åŒ–æ–¹æ³•]]></title>    <link>https://juejin.cn/post/7597253913248563241</link>    <guid>https://juejin.cn/post/7597253913248563241</guid>    <pubDate>2026-01-20T11:16:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597253913248563241" data-draft-id="7597252004713463850" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="# ä» 0 åˆ° 1ï¼š**é»è·ƒæ˜¥**è¯¦è§£ AI æ™ºèƒ½ä½“è¿ç”¨å·¥ç¨‹å¸ˆçš„å·¥ç¨‹åŒ–æ–¹æ³•"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2026-01-20T11:16:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸æˆ‘188"/> <meta itemprop="url" content="https://juejin.cn/user/2314913794238314"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            # ä» 0 åˆ° 1ï¼š**é»è·ƒæ˜¥**è¯¦è§£ AI æ™ºèƒ½ä½“è¿ç”¨å·¥ç¨‹å¸ˆçš„å·¥ç¨‹åŒ–æ–¹æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2314913794238314/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸æˆ‘188
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T11:16:44.000Z" title="Tue Jan 20 2026 11:16:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Sï½œæƒ…å¢ƒï¼ˆSituationï¼‰ï¼š</h2>
<p>2024â€“2025 å¹´ï¼Œå‡ ä¹æ‰€æœ‰æŠ€æœ¯ç¤¾åŒºéƒ½åœ¨é«˜é¢‘è®¨è®º <strong>AI Agentï¼ˆæ™ºèƒ½ä½“ï¼‰</strong> ã€‚</p>
<ul>
<li>å¤§æ¨¡å‹è¶Šæ¥è¶Šå¼º</li>
<li>å·¥å…·è°ƒç”¨ï¼ˆTool Callingï¼‰è¶Šæ¥è¶Šæˆç†Ÿ</li>
<li>AutoGPTã€LangGraphã€CrewAIã€AutoGen å±‚å‡ºä¸ç©·</li>
</ul>
<p>ä½†ä¸€ä¸ªæ®‹é…·ç°å®æ˜¯ï¼š</p>
<blockquote>
<p><strong>90% çš„äººï¼Œåªåœç•™åœ¨â€œä¼šç”¨ Promptâ€ï¼Œè€Œä¸æ˜¯â€œèƒ½äº¤ä»˜ Agent ç³»ç»Ÿâ€ã€‚</strong></p>
</blockquote>
<p>è¿™æ­£æ˜¯ <strong>é»è·ƒæ˜¥åå¤å¼ºè°ƒçš„ä¸€ä¸ªè§’è‰²ç©ºç¼º</strong> â€”â€” ğŸ‘‰ <strong>AI æ™ºèƒ½ä½“è¿ç”¨å·¥ç¨‹å¸ˆï¼ˆAgent Application Engineerï¼‰</strong></p>
<hr/>
<h2 data-id="heading-1">Cï½œå†²çªï¼ˆConflictï¼‰ï¼š</h2>
<p>å¾ˆå¤šå·¥ç¨‹å¸ˆåœ¨ CSDN ä¸Šå¡åœ¨ä¸‰ä¸ªè¯¯åŒºï¼š</p>
<ol>
<li><strong>æŠŠ Agent å½“äº§å“ï¼Œè€Œä¸æ˜¯å·¥ç¨‹ç³»ç»Ÿ</strong></li>
<li><strong>åªä¼š Demoï¼Œä¸ä¼šä¸Šçº¿</strong></li>
<li><strong>ä¼šè°ƒæ¨¡å‹ï¼Œå´ä¸ä¼šè®¾è®¡â€œåä½œç»“æ„â€</strong></li>
</ol>
<p>ç»“æœæ˜¯ï¼š</p>
<ul>
<li>Demo å¾ˆç‚«</li>
<li>ä¸€ä¸Šçº¿å°±å´©</li>
<li>æ— æ³•å¤ç”¨ã€æ— æ³•æ‰©å±•ã€æ— æ³•ç»´æŠ¤</li>
</ul>
<hr/>
<h2 data-id="heading-2">Qï½œå…³é”®é—®é¢˜ï¼ˆQuestionï¼‰ï¼š</h2>
<blockquote>
<p><strong>AI æ™ºèƒ½ä½“è¿ç”¨å·¥ç¨‹å¸ˆï¼Œç©¶ç«Ÿåœ¨â€œå·¥ç¨‹â€ä»€ä¹ˆï¼Ÿ</strong></p>
</blockquote>
<p>ä»¥åŠæ›´ç°å®çš„é—®é¢˜ï¼š</p>
<ul>
<li>å·¥ç¨‹åŒ– Agent çš„ <strong>æœ€å°é—­ç¯</strong> æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>å¦‚ä½•ä» 0 åˆ° 1 è®¾è®¡ä¸€ä¸ª <strong>å¯è½åœ°çš„æ™ºèƒ½ä½“ç³»ç»Ÿ</strong>ï¼Ÿ</li>
<li>CSDN å·¥ç¨‹å¸ˆåº”è¯¥è¡¥å“ªå‡ å—èƒ½åŠ›ï¼Ÿ</li>
</ul>
<hr/>
<h2 data-id="heading-3">Aï½œç­”æ¡ˆï¼ˆAnswerï¼‰ï¼š</h2>
<h3 data-id="heading-4">ğŸ‘‰ æ ¸å¿ƒç»“è®ºä¸€å¥è¯å…ˆç»™ä½ ï¼š</h3>
<blockquote>
<p><strong>AI æ™ºèƒ½ä½“è¿ç”¨å·¥ç¨‹å¸ˆ = ç”¨å·¥ç¨‹æ–¹æ³•ï¼Œç®¡ç†â€œæ¨¡å‹ Ã— å·¥å…· Ã— ä»»åŠ¡ Ã— è®°å¿† Ã— åä½œâ€ã€‚</strong></p>
</blockquote>
<p>ä¸‹é¢æˆ‘ä»¬å®Œå…¨æŒ‰ <strong>é»è·ƒæ˜¥çš„å·¥ç¨‹åŒ–æ‹†è§£é€»è¾‘</strong>ï¼Œä¸€æ­¥ä¸€æ­¥æ¥ã€‚</p>
<hr/>
<h2 data-id="heading-5">ğŸ” æ ¸å¿ƒæ¦‚å¿µå¡ç‰‡ â‘ </h2>
<blockquote>
<p>ğŸ’¡ <strong>AI æ™ºèƒ½ä½“ï¼ˆAgentï¼‰</strong> ä¸æ˜¯ä¸€ä¸ª Promptï¼Œè€Œæ˜¯ä¸€ä¸ª <strong>å…·å¤‡ç›®æ ‡ã€çŠ¶æ€ã€å·¥å…·è°ƒç”¨èƒ½åŠ›çš„â€œä»»åŠ¡æ‰§è¡Œä½“â€</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-6">ä¸€ã€AI æ™ºèƒ½ä½“è¿ç”¨å·¥ç¨‹å¸ˆåœ¨â€œå¹²ä»€ä¹ˆâ€ï¼Ÿï¼ˆèŒè´£æ‹†è§£ï¼‰</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15d11330863242098cb94cb89b6624e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiO5oiRMTg4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769512603&amp;x-signature=seIx5qB2zTMXXVX99mxWi5WAItc%3D" alt="Image" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9eb4f603108c4c3d91dc8035bc51ae48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiO5oiRMTg4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769512603&amp;x-signature=Ul91Cax2GKl6gK4nlfeGHgS0KJY%3D" alt="Image" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57fd5df3a08a43459f09d25a12836576~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiO5oiRMTg4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769512603&amp;x-signature=7CJ%2Bb4j0Huyf9dnr4am8fTpwaNY%3D" alt="Image" loading="lazy"/></p>
<h3 data-id="heading-7">1ï¸âƒ£ ä»–ä¸æ˜¯â€œæ¨¡å‹å·¥ç¨‹å¸ˆâ€</h3>
<ul>
<li>ä¸è®­ç»ƒå¤§æ¨¡å‹</li>
<li>ä¸å·å‚æ•°è§„æ¨¡</li>
</ul>
<h3 data-id="heading-8">2ï¸âƒ£ ä»–æ˜¯<strong>ç³»ç»Ÿé›†æˆå·¥ç¨‹å¸ˆ</strong></h3>
<p>æ ¸å¿ƒå·¥ä½œåŒ…æ‹¬ï¼š</p>





























<table><thead><tr><th>æ¨¡å—</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ¨¡å‹å±‚</td><td>GPT / Claude / é€šä¹‰ / æ–‡å¿ƒ</td></tr><tr><td>å·¥å…·å±‚</td><td>APIã€æ•°æ®åº“ã€æœç´¢ã€RPA</td></tr><tr><td>æ§åˆ¶å±‚</td><td>Planner / Router / Policy</td></tr><tr><td>è®°å¿†å±‚</td><td>Short / Long / Vector</td></tr><tr><td>åä½œå±‚</td><td>å• Agent / å¤š Agent</td></tr></tbody></table>
<p>ğŸ‘‰ <strong>Agent è¿ç”¨å·¥ç¨‹å¸ˆï¼Œè´Ÿè´£æŠŠè¿™äº›â€œæ‹§åœ¨ä¸€èµ·â€ã€‚</strong></p>
<hr/>
<h2 data-id="heading-9">äºŒã€å·¥ç¨‹åŒ– Agent çš„æœ€å°é—­ç¯ï¼ˆé»è·ƒæ˜¥æ–¹æ³•è®ºï¼‰</h2>
<h3 data-id="heading-10">âœ… ä¸€ä¸ªå¯äº¤ä»˜ Agentï¼Œå¿…é¡»æ»¡è¶³ 4 ä¸ªæ¡ä»¶ï¼š</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/754b530236fa46368932b03fd5590fac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiO5oiRMTg4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769512603&amp;x-signature=tT15jhahOOMmGT3kKUcx3YnsdmI%3D" alt="Image" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/236092c8304844499670a60f6219fb8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiO5oiRMTg4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769512603&amp;x-signature=u%2B4yPn6bCPaYlishf7a7EfKc8X0%3D" alt="Image" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33de5785b0fe4943ac16aeca3e1eeba9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiO5oiRMTg4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769512603&amp;x-signature=g6G%2F1F7nVNdzov3ponSrKusiNTw%3D" alt="Image" loading="lazy"/></p>
<h3 data-id="heading-11">â‘  æ˜ç¡®ç›®æ ‡ï¼ˆGoalï¼‰</h3>
<p>ä¸æ˜¯ï¼š</p>
<blockquote>
<p>â€œå¸®æˆ‘å†™ä»£ç â€</p>
</blockquote>
<p>è€Œæ˜¯ï¼š</p>
<blockquote>
<p>â€œåœ¨ 5 æ­¥å†…ï¼Œç”Ÿæˆå¯è¿è¡Œçš„ Python è„šæœ¬ï¼Œå¹¶é€šè¿‡å•å…ƒæµ‹è¯•â€</p>
</blockquote>
<hr/>
<h3 data-id="heading-12">â‘¡ å¯æ§è§„åˆ’ï¼ˆPlanningï¼‰</h3>
<ul>
<li>ReAct</li>
<li>Plan-and-Execute</li>
<li>LangGraph çŠ¶æ€æœº</li>
</ul>
<p><strong>å·¥ç¨‹ç‚¹</strong>ï¼š</p>
<blockquote>
<p>è§„åˆ’ â‰  Promptï¼Œè€Œæ˜¯ <strong>å¯å›æº¯çš„æ‰§è¡Œè·¯å¾„</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-13">â‘¢ å·¥å…·é—­ç¯ï¼ˆTool Loopï¼‰</h3>
<ul>
<li>å·¥å…·å¤±è´¥è¦èƒ½ Retry</li>
<li>å·¥å…·ç»“æœè¦èƒ½è¢« Agent è¯»æ‡‚</li>
<li>å·¥å…·ä¸æ˜¯è£…é¥°ï¼Œè€Œæ˜¯ <strong>å†³ç­–è¾“å…¥</strong></li>
</ul>
<hr/>
<h3 data-id="heading-14">â‘£ çŠ¶æ€è®°å¿†ï¼ˆState &amp; Memoryï¼‰</h3>
<ul>
<li>å½“å‰ä»»åŠ¡çŠ¶æ€</li>
<li>å†å²ä¸Šä¸‹æ–‡</li>
<li>ç”¨æˆ·åå¥½</li>
</ul>
<p>ğŸ‘‰ æ²¡æœ‰è®°å¿†ï¼ŒAgent æ°¸è¿œæ˜¯â€œé‡‘é±¼â€ã€‚</p>
<hr/>
<h2 data-id="heading-15">ğŸ” æ ¸å¿ƒæ¦‚å¿µå¡ç‰‡ â‘¡</h2>
<blockquote>
<p>ğŸ’¡ <strong>å·¥ç¨‹åŒ– Agent</strong> = çŠ¶æ€æœº + å·¥å…·è°ƒåº¦ + å¤±è´¥å…œåº• + å¯è§‚æµ‹æ€§</p>
</blockquote>
<hr/>
<h2 data-id="heading-16">ä¸‰ã€CSDN å·¥ç¨‹å¸ˆå¦‚ä½•ä» 0 åˆ° 1 å®æˆ˜ï¼Ÿ</h2>
<h3 data-id="heading-17">ğŸš§ å®æˆ˜è·¯å¾„ï¼ˆéå¸¸å…³é”®ï¼‰</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6021a4cd60b8474fb8821912a39287e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiO5oiRMTg4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769512603&amp;x-signature=7KG5qpUoML6JvFiA21KvSPi99yQ%3D" alt="Image" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8cf275b6f1a4a3584a96fc135413584~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiO5oiRMTg4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769512603&amp;x-signature=ys84GAdLUb%2FX6gpxl2xkh14ioQs%3D" alt="Image" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03873cc7bc8e402c92d843454c8fc63c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiO5oiRMTg4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769512603&amp;x-signature=NisZnhT2j2byfpu5eNZ5ir%2FgLbQ%3D" alt="Image" loading="lazy"/></p>
<h4 data-id="heading-18">Step 1ï¼šä» <strong>å• Agent + å•å·¥å…·</strong> å¼€å§‹</h4>
<ul>
<li>ä¸€ä¸ªç›®æ ‡</li>
<li>ä¸€ä¸ªæ¨¡å‹</li>
<li>ä¸€ä¸ª API</li>
</ul>
<p>âŒ ä¸è¦ä¸€ä¸Šæ¥å°±å¤š Agent</p>
<hr/>
<h4 data-id="heading-19">Step 2ï¼šå¼•å…¥ <strong>æ˜¾å¼çŠ¶æ€</strong></h4>
<pre><code class="hljs language-sql" lang="sql">INIT â†’ PLAN â†’ ACTION â†’ OBSERVE â†’ DECIDE â†’ <span class="hljs-keyword">END</span>
</code></pre>
<p>ğŸ‘‰ ç”¨ä»£ç ï¼Œè€Œä¸æ˜¯ Promptï¼Œè¡¨è¾¾çŠ¶æ€ã€‚</p>
<hr/>
<h4 data-id="heading-20">Step 3ï¼šç»™ Agentâ€œå¤±è´¥å…œåº•â€</h4>
<ul>
<li>è¶…æ—¶</li>
<li>å·¥å…·å¼‚å¸¸</li>
<li>æ¨¡å‹èƒ¡è¯´</li>
</ul>
<p>è¿™æ˜¯ <strong>å·¥ç¨‹å¸ˆä¸ç©å®¶çš„åˆ†æ°´å²­</strong>ã€‚</p>
<hr/>
<h4 data-id="heading-21">Step 4ï¼šæ—¥å¿—ä¸å¯è§‚æµ‹æ€§</h4>
<ul>
<li>æ¯ä¸€æ­¥ Agent åœ¨æƒ³ä»€ä¹ˆï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆè°ƒç”¨è¿™ä¸ªå·¥å…·ï¼Ÿ</li>
<li>å“ªä¸€æ­¥æœ€è€— Tokenï¼Ÿ</li>
</ul>
<hr/>
<h2 data-id="heading-22">ğŸ’¾ ä»·å€¼èƒ¶å›Šï½œAgent å·¥ç¨‹ Checklist</h2>





























<table><thead><tr><th>æ˜¯å¦å…·å¤‡</th><th>é¡¹ç›®</th></tr></thead><tbody><tr><td>â¬œ</td><td>çŠ¶æ€å¯è¿½è¸ª</td></tr><tr><td>â¬œ</td><td>å·¥å…·å¤±è´¥å…œåº•</td></tr><tr><td>â¬œ</td><td>å¯å¤ç°æ‰§è¡Œè·¯å¾„</td></tr><tr><td>â¬œ</td><td>æˆæœ¬ä¸ Token ç»Ÿè®¡</td></tr><tr><td>â¬œ</td><td>æ”¯æŒæ‰©å±•ä¸ºå¤š Agent</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-23">å››ã€ä¸ºä»€ä¹ˆè¿™æ˜¯ CSDN çš„â€œæ–°æŠ€æœ¯çº¢åˆ©â€ï¼Ÿ</h2>
<h3 data-id="heading-24">å› ä¸ºï¼š</h3>
<ul>
<li>ä¼ä¸š <strong>ç¼ºâ€œèƒ½è½åœ°çš„äººâ€</strong></li>
<li>ä¼š Prompt çš„å¤ªå¤š</li>
<li>ä¼š <strong>Agent å·¥ç¨‹</strong> çš„å¤ªå°‘</li>
</ul>
<blockquote>
<p><strong>é»è·ƒæ˜¥åå¤å¼ºè°ƒï¼š</strong> ä¸‹ä¸€é˜¶æ®µæ¯”æ‹¼çš„ä¸æ˜¯â€œè°æ¨¡å‹å¼ºâ€ï¼Œ è€Œæ˜¯ <strong>è°æ›´ä¼šâ€œç”¨æ¨¡å‹å¹²æ´»â€</strong> ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ”¾å¼ƒDifyï¼æˆ‘ä»¬ç”¨LangGraph+LangFuse+RAGFlowæ­å»ºå·¥ä¸šçº§AIç³»ç»Ÿï¼Œå‡†ç¡®ç‡é£™å‡25%]]></title>    <link>https://juejin.cn/post/7597058147749527562</link>    <guid>https://juejin.cn/post/7597058147749527562</guid>    <pubDate>2026-01-20T11:40:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597058147749527562" data-draft-id="7596991930986135603" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ”¾å¼ƒDifyï¼æˆ‘ä»¬ç”¨LangGraph+LangFuse+RAGFlowæ­å»ºå·¥ä¸šçº§AIç³»ç»Ÿï¼Œå‡†ç¡®ç‡é£™å‡25%"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-20T11:40:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼ å±…é‚ª"/> <meta itemprop="url" content="https://juejin.cn/user/2154698522507927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ”¾å¼ƒDifyï¼æˆ‘ä»¬ç”¨LangGraph+LangFuse+RAGFlowæ­å»ºå·¥ä¸šçº§AIç³»ç»Ÿï¼Œå‡†ç¡®ç‡é£™å‡25%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2154698522507927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼ å±…é‚ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T11:40:45.000Z" title="Tue Jan 20 2026 11:40:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆ90%çš„AIåº”ç”¨éƒ½æ­»åœ¨äº†Demoé˜¶æ®µï¼Ÿ</h3>
<p>å»å¹´æˆ‘ä»¬æ¥åˆ°ä¸€ä¸ªéœ€æ±‚ï¼š<strong>ç”¨AIè‡ªåŠ¨ç”Ÿæˆå»ºç­‘æ–½å·¥å›¾è®¾è®¡è¯´æ˜</strong>ã€‚å¬èµ·æ¥å¾ˆç®€å•ï¼Ÿè°ƒä¸ªGPT APIï¼Œæ¥å…¥å‡ ä¸ªPDFæ–‡æ¡£ï¼Œå†™ä¸ªå‰ç«¯ç•Œé¢å°±å®Œäº‹äº†ã€‚</p>
<p><strong>ç°å®å¾ˆéª¨æ„Ÿ</strong>ï¼š</p>
<ul>
<li>
<p>ç¬¬ä¸€ç‰ˆDemoç”¨äº†2å‘¨ï¼Œæ•ˆæœè¿˜ä¸é”™</p>
</li>
<li>
<p>ä½†çœŸæ­£æŠ•å…¥ä½¿ç”¨åï¼Œé—®é¢˜æ¥è¸µè€Œè‡³ï¼š</p>
<ul>
<li>ç”Ÿæˆå†…å®¹ä¸ç¬¦åˆè§„èŒƒï¼Œè®¾è®¡å¸ˆä¸æ•¢ç”¨</li>
<li>æ£€ç´¢é€Ÿåº¦æ…¢ï¼Œç”¨æˆ·ç­‰ä¸èµ·</li>
<li>ä¸Šä¸‹æ–‡è¶…é™ï¼Œé•¿å¯¹è¯ç›´æ¥å´©æºƒ</li>
<li>Promptæ•£è½å„å¤„ï¼Œæ”¹ä¸€æ¬¡è¦é‡æ–°éƒ¨ç½²</li>
</ul>
</li>
</ul>
<p><strong>æˆ‘ä»¬èŠ±äº†3ä¸ªæœˆé‡æ„</strong>ï¼Œæœ€ç»ˆæ­å»ºäº†ä¸€å¥—å·¥ä¸šçº§AIç³»ç»Ÿã€‚æœ¬æ–‡å°†å®Œæ•´åˆ†äº«ï¼š</p>
<ul>
<li>ä¸ºä»€ä¹ˆé€‰æ‹© LangGraph è€Œä¸æ˜¯ Dify</li>
<li>å¦‚ä½•ç”¨ RAGFlow è§£å†³ä¸“ä¸šæ–‡æ¡£è§£æ</li>
<li>ReAct æ¨¡å¼å¦‚ä½•æå‡25%å‡†ç¡®ç‡</li>
<li>ä¸Šä¸‹æ–‡çˆ†ç‚¸çš„è§£å†³æ–¹æ¡ˆ</li>
<li>å®Œæ•´çš„éƒ¨ç½²æ¶æ„å’Œè¸©å‘ç»éªŒ</li>
</ul>
<hr/>
<h3 data-id="heading-1">äºŒã€ç³»ç»Ÿæ¶æ„ï¼šå‰åç«¯åˆ†ç¦»+ç‹¬ç«‹AIæœåŠ¡</h3>
<p>å…ˆçœ‹æ•´ä½“æ¶æ„å›¾ï¼š <img src="" alt="" loading="lazy"/></p>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</strong></p>





























<table><thead><tr><th>è®¾è®¡å†³ç­–</th><th>ç†ç”±</th></tr></thead><tbody><tr><td><strong>Java + Python åˆ†ç¦»</strong></td><td>Javaå¤„ç†ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®æŒä¹…åŒ–ï¼ŒPythonä¸“æ³¨AIèƒ½åŠ›ï¼Œå„å¸å…¶èŒ</td></tr><tr><td><strong>ç‹¬ç«‹AIæœåŠ¡</strong></td><td>AIæœåŠ¡å¯ç‹¬ç«‹æ‰©å®¹ï¼Œä¸å½±å“ä¸šåŠ¡ç³»ç»Ÿç¨³å®šæ€§</td></tr><tr><td><strong>SSEæµå¼ä¼ è¾“</strong></td><td>å®æ—¶è¿”å›ç”Ÿæˆå†…å®¹ï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½</td></tr><tr><td><strong>RAGFlowç‹¬ç«‹éƒ¨ç½²</strong></td><td>çŸ¥è¯†åº“ç®¡ç†ä¸ä¸šåŠ¡è§£è€¦ï¼Œä¾¿äºç»´æŠ¤</td></tr><tr><td><strong>Langfuseç‹¬ç«‹éƒ¨ç½²</strong></td><td>å¯æ’æ‹”çš„ AI åº”ç”¨ç›‘æ§ã€è¯„æµ‹</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-2">ä¸‰ã€æ ¸å¿ƒæŠ€æœ¯é€‰å‹ï¼šä¸ºä»€ä¹ˆä¸ç”¨Difyï¼Ÿ</h3>
<h4 data-id="heading-3">LangGraph vs Difyï¼šä»£ç æ§åˆ¶ vs ä½ä»£ç </h4>
<p>å¾ˆå¤šäººä¼šé—®ï¼š<strong>Difyè¿™ä¹ˆç«ï¼Œä¸ºä»€ä¹ˆä¸ç”¨ï¼Ÿ</strong></p>
<p><strong>Difyçš„ä¼˜åŠ¿</strong>ï¼šå¯è§†åŒ–æ‹–æ‹½ï¼Œå¿«é€Ÿæ­å»ºæ ‡å‡†RAGåº”ç”¨ï¼Œé€‚åˆéæŠ€æœ¯äººå‘˜ã€‚</p>
<p><strong>ä½†æˆ‘ä»¬çš„åœºæ™¯éœ€è¦æ›´å¼ºçš„æ§åˆ¶åŠ›</strong>ï¼š</p>






























<table><thead><tr><th>éœ€æ±‚</th><th>Dify</th><th>LangGraph</th></tr></thead><tbody><tr><td><strong>å¤æ‚æ§åˆ¶æµ</strong></td><td>å¯è§†åŒ–ç¼–æ’éš¾ä»¥è¡¨è¾¾é€»è¾‘å¾ªç¯ã€ReActå¾ªç¯ã€æ¡ä»¶é‡è¯•</td><td>ä»£ç æ–¹å¼å¤©ç„¶æ”¯æŒ</td></tr><tr><td><strong>çŠ¶æ€ç®¡ç†</strong></td><td>é»‘ç›’ï¼Œéš¾ä»¥è°ƒè¯•</td><td>TypedDictæ˜¾å¼å®šä¹‰ï¼Œé€æ˜å¯æ§</td></tr><tr><td><strong>ä¸­æ–­ä¸æ¢å¤</strong></td><td>ä¸æ”¯æŒ</td><td>interruptæœºåˆ¶æ”¯æŒäººå·¥å®¡æ ¸</td></tr><tr><td><strong>æ·±åº¦é›†æˆ</strong></td><td>APIè°ƒç”¨</td><td>ä¸Spring Bootã€RAGFlowæ·±åº¦é›†æˆ</td></tr></tbody></table>
<p><strong>LangGraphæ ¸å¿ƒä¼˜åŠ¿ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#Â æ˜¾å¼çŠ¶æ€å®šä¹‰ï¼Œæ¯ä¸ªå­—æ®µæ¸…æ™°å¯æ§</span>
<span class="hljs-keyword">class</span>Â <span class="hljs-title class_">AgentState</span>(<span class="hljs-title class_ inherited__">TypedDict</span>):
Â Â Â Â messages:Â Annotated[<span class="hljs-type">List</span>[BaseMessage],Â add_messages]
Â Â Â Â project_info:Â <span class="hljs-built_in">str</span>
Â Â Â Â research_loop_count:Â <span class="hljs-built_in">int</span>Â Â <span class="hljs-comment">#Â å¾ªç¯è®¡æ•°å™¨</span>

graphÂ =Â StateGraph(AgentState)
graph.add_node(<span class="hljs-string">"researcher"</span>,Â researcher_node)
graph.add_node(<span class="hljs-string">"generate"</span>,Â generate_node)

<span class="hljs-comment">#Â æ¡ä»¶åˆ†æ”¯ï¼šæ ¹æ®çŠ¶æ€åŠ¨æ€å†³å®šä¸‹ä¸€æ­¥</span>
graph.add_conditional_edges(<span class="hljs-string">"researcher"</span>,
Â Â Â Â <span class="hljs-keyword">lambda</span>Â state:Â <span class="hljs-string">"tools"</span>Â <span class="hljs-keyword">if</span>Â state[<span class="hljs-string">"messages"</span>][-<span class="hljs-number">1</span>].tool_callsÂ <span class="hljs-keyword">else</span>Â <span class="hljs-string">"generate"</span>)
</code></pre>
<p><strong>æˆ‘ä»¬çš„é€‰æ‹©</strong>ï¼šæŠ€æœ¯å›¢é˜Ÿä¸»å¯¼ï¼Œä»£ç å¯ç»´æŠ¤æ€§ä¼˜å…ˆäºä½ä»£ç ä¾¿æ·æ€§ã€‚</p>
<hr/>
<h4 data-id="heading-4">RAGFlowï¼šContext Engineä¸“ä¸šæ–‡æ¡£è§£æçš„æœ€ä½³é€‰æ‹©</h4>
<p><strong>è‡ªå»ºRAGçš„ç—›ç‚¹</strong>ï¼š</p>
<ul>
<li>å»ºç­‘è§„èŒƒPDFè§£æå¤æ‚ï¼šè¡¨æ ¼ã€å…¬å¼ã€å±‚çº§ç»“æ„</li>
<li>éœ€è¦2-3ä¸ªæœˆå¼€å‘æ–‡æ¡£è§£æã€å‘é‡æ•°æ®åº“ã€æ£€ç´¢ç­–ç•¥</li>
</ul>
<p><strong>RAGFlowçš„æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š</p>




















<table><thead><tr><th>ç»´åº¦</th><th>è‡ªå»ºRAG</th><th>RAGFlow</th></tr></thead><tbody><tr><td><strong>æ–‡æ¡£è§£æ</strong></td><td>éœ€è‡ªç ”</td><td>DeepDocå¼€ç®±å³ç”¨</td></tr><tr><td><strong>æ£€ç´¢ç­–ç•¥</strong></td><td>éœ€è°ƒä¼˜</td><td>å¤šç§ç­–ç•¥å¯é€‰</td></tr></tbody></table>
<p><strong>é›†æˆç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">fromÂ ragflow_sdkÂ importÂ RAGFlow

classÂ RAGService:
Â Â Â Â asyncÂ defÂ search(self,Â query:Â str,Â kb_ids:Â List<span class="hljs-section">[str]</span>):
Â Â Â Â Â Â Â Â <span class="hljs-attr">results</span>Â =Â awaitÂ self.client.search(
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">question</span>=query,
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">datasets</span>=kb_ids,
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">similarity_threshold</span>=<span class="hljs-number">0.7</span>,
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">top_k</span>=<span class="hljs-number">10</span>
Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â returnÂ results
</code></pre>
<p><strong>å®é™…æ•ˆæœ</strong>ï¼šä¸‡æ¡è§„èŒƒæ–‡æ¡£ï¼Œæ£€ç´¢å»¶è¿Ÿ &lt; 1ç§’ã€‚</p>
<hr/>
<h4 data-id="heading-5">Langfuseï¼šLLMåº”ç”¨å…¨ç”Ÿå‘½å‘¨æœŸè§‚å¯Ÿã€æµ‹è¯•</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f65d7a6feceb444dbceb0e05e32ba6f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byg5bGF6YKq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769514045&amp;x-signature=t%2FIfdhr7MIXUEe9Tm0dxIk3F4pg%3D" alt="" loading="lazy"/> <strong>æ—©æœŸçš„ç—›ç‚¹</strong>ï¼š</p>
<ul>
<li>Promptæ•£è½åœ¨ä»£ç å„å¤„ï¼Œéš¾ä»¥ç»Ÿä¸€ç®¡ç†</li>
<li>ä¿®æ”¹Promptéœ€è¦é‡æ–°éƒ¨ç½²</li>
<li>æ— æ³•è¿½è¸ªå“ªä¸ªç‰ˆæœ¬çš„Promptæ•ˆæœæ›´å¥½</li>
<li>ç”Ÿäº§ç¯å¢ƒé—®é¢˜éš¾ä»¥å¤ç°å’Œè°ƒè¯•</li>
<li>ç¼ºå°‘æˆæœ¬å’Œæ€§èƒ½ç›‘æ§</li>
</ul>
<p><strong>Langfuseçš„å®Œæ•´ä»·å€¼</strong>ï¼š</p>
<p>Langfuseä¸ä»…ä»…æ˜¯Promptç®¡ç†å·¥å…·ï¼Œå®ƒæ˜¯<strong>LLMåº”ç”¨ä»å¼€å‘ã€æµ‹è¯•åˆ°ç”Ÿäº§çš„å…¨ç”Ÿå‘½å‘¨æœŸç›‘æ§å’Œè°ƒè¯•å¹³å°</strong>ã€‚</p>



































<table><thead><tr><th>åŠŸèƒ½æ¨¡å—</th><th>èƒ½åŠ›</th><th>ä»·å€¼</th></tr></thead><tbody><tr><td><strong>Promptç®¡ç†</strong></td><td>é›†ä¸­ç®¡ç†ã€ç‰ˆæœ¬æ§åˆ¶ã€çƒ­æ›´æ–°</td><td>è¿­ä»£å‘¨æœŸä»1å¤©â†’10åˆ†é’Ÿ</td></tr><tr><td><strong>è°ƒç”¨è¿½è¸ª</strong></td><td>å®Œæ•´çš„è°ƒç”¨é“¾è·¯ã€Tokenç»Ÿè®¡</td><td>å¿«é€Ÿå®šä½é—®é¢˜æ ¹å› </td></tr><tr><td><strong>æ€§èƒ½ç›‘æ§</strong></td><td>å»¶è¿Ÿã€æˆæœ¬ã€é”™è¯¯ç‡å®æ—¶ç›‘æ§</td><td>ç”Ÿäº§ç¯å¢ƒå¯è§‚æµ‹</td></tr><tr><td><strong>è¯„æµ‹ä½“ç³»</strong></td><td>è‡ªåŠ¨åŒ–è¯„æµ‹ã€äººå·¥æ ‡æ³¨</td><td>æŒç»­ä¼˜åŒ–æ¨¡å‹æ•ˆæœ</td></tr><tr><td><strong>æ•°æ®é›†ç®¡ç†</strong></td><td>æµ‹è¯•ç”¨ä¾‹ã€å›å½’æµ‹è¯•</td><td>ä¿è¯ç‰ˆæœ¬è´¨é‡</td></tr></tbody></table>
<p><strong>ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">PromptManager</span>:
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">get_prompt</span>(<span class="hljs-params">self,Â name:Â <span class="hljs-built_in">str</span>,Â version:Â <span class="hljs-built_in">str</span>Â =Â <span class="hljs-literal">None</span></span>):
Â Â Â Â Â Â Â Â <span class="hljs-string">"""è·å–æŒ‡å®šç‰ˆæœ¬çš„Promptæ¨¡æ¿"""</span>
Â Â Â Â Â Â Â Â promptÂ =Â self.langfuse.get_prompt(name=name,Â version=version)
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â prompt.<span class="hljs-built_in">compile</span>()

Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">trace_generation</span>(<span class="hljs-params">self,Â trace_id:Â <span class="hljs-built_in">str</span>,Â <span class="hljs-built_in">input</span>:Â <span class="hljs-built_in">str</span>,Â output:Â <span class="hljs-built_in">str</span></span>):
Â Â Â Â Â Â Â Â <span class="hljs-string">"""è®°å½•å®Œæ•´çš„ç”Ÿæˆè¿‡ç¨‹ç”¨äºè¿½è¸ªå’Œåˆ†æ"""</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â self.langfuse.trace(<span class="hljs-built_in">id</span>=trace_id,Â <span class="hljs-built_in">input</span>=<span class="hljs-built_in">input</span>,Â output=output)
</code></pre>
<p><strong>å®é™…æ•ˆæœ</strong>ï¼š</p>
<ul>
<li>ç”Ÿäº§ç¯å¢ƒé—®é¢˜å®šä½æ—¶é—´å¤§å¹…é™ä½</li>
<li>é€šè¿‡è°ƒç”¨è¿½è¸ªå‘ç°å¹¶ä¼˜åŒ–äº†å¤šä¸ªæ€§èƒ½ç“¶é¢ˆ</li>
</ul>
<hr/>
<h3 data-id="heading-6">å››ã€æ ¸å¿ƒçªç ´ï¼šReActæ¨¡å¼æå‡25%å‡†ç¡®ç‡</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1f93a6a22e64f91aed83c64bc2cd3c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byg5bGF6YKq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769514045&amp;x-signature=jDhi0L8pUpuih%2BfyyuyoKwExzCE%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-7">å¤šAgentå·¥ä½œæµè®¾è®¡</h4>
<p><strong>ä¸šåŠ¡åœºæ™¯</strong>ï¼šç”Ÿæˆå®Œæ•´çš„æ–½å·¥å›¾è®¾è®¡è¯´æ˜ï¼Œéœ€è¦ä¿¡æ¯æ”¶é›†ã€æ–‡æ¡£ç”Ÿæˆã€åˆè§„å®¡æ ¸çš„å®Œæ•´æµç¨‹ã€‚</p>
<p><strong>ä¸‰ä¸ªæ ¸å¿ƒAgent</strong>ï¼š</p>

























<table><thead><tr><th>Agent</th><th>èŒè´£</th><th>å·¥å…·</th></tr></thead><tbody><tr><td><strong>æ•°æ®æ”¶é›†Agent</strong></td><td>æŸ¥è¯¢è§„èŒƒåº“ã€æ¡ˆä¾‹åº“ä¸­çš„ç›¸å…³ä¿¡æ¯</td><td>RAGFlowæ£€ç´¢ã€çŸ¥è¯†åº“è·¯ç”±</td></tr><tr><td><strong>æ–‡æ¡£ç¼–å†™Agent</strong></td><td>æ ¹æ®æ”¶é›†çš„ä¿¡æ¯ç”Ÿæˆè®¾è®¡è¯´æ˜</td><td>æ¨¡æ¿æ¸²æŸ“ã€æ ¼å¼è½¬æ¢</td></tr><tr><td><strong>å®¡æ ¸Agent</strong></td><td>æ ¡éªŒç”Ÿæˆå†…å®¹æ˜¯å¦ç¬¦åˆè§„èŒƒ</td><td>è§„èŒƒæ¡æ–‡æ¯”å¯¹ã€åˆè§„æ€§æ£€æŸ¥</td></tr></tbody></table>
<h4 data-id="heading-8">ReActæ¨¡å¼ï¼šä»60%åˆ°85%çš„å‡†ç¡®ç‡æå‡</h4>
<p><strong>ä¼ ç»Ÿæ–¹æ¡ˆçš„é—®é¢˜</strong>ï¼š</p>
<ul>
<li>ä¸€æ¬¡æ€§æ£€ç´¢æ‰€æœ‰çŸ¥è¯†åº“ â†’ å¯èƒ½æ¼æŸ¥å…³é”®ä¿¡æ¯ï¼Œæˆ–æŸ¥è¯¢è¿‡å¤šæ— å…³å†…å®¹</li>
<li>ä¸Šä¸‹æ–‡è´¨é‡ä¸é«˜ â†’ æ–‡æ¡£ç”Ÿæˆè´¨é‡å·®</li>
</ul>
<p><strong>ReActæ¨¡å¼</strong>ï¼šAgentåœ¨"æ€è€ƒ-è¡ŒåŠ¨-è§‚å¯Ÿ"çš„å¾ªç¯ä¸­é€æ­¥å®Œå–„ä¿¡æ¯æ”¶é›†ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">ç”¨æˆ·éœ€æ±‚:</span> <span class="hljs-string">"ç”Ÿæˆå¤§è¿æŸä½å®…é¡¹ç›®çš„å»ºç­‘è®¾è®¡è¯´æ˜"</span>
    <span class="hljs-string">â”‚</span>
    <span class="hljs-string">â–¼</span>
<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-attr">Reasoning:</span> <span class="hljs-string">å¤§è¿å±äºå¯’å†·åœ°åŒºï¼Œéœ€è¦æŸ¥è¯¢å¯’å†·åœ°åŒº</span>  <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>            <span class="hljs-string">ä½å®…å»ºç­‘çš„é˜²ç«å’Œä¿æ¸©è§„èŒƒ</span>             <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-attr">Action:</span> <span class="hljs-string">è°ƒç”¨RAGFlowæ£€ç´¢é˜²ç«+ä¿æ¸©è§„èŒƒçŸ¥è¯†åº“</span>     <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-attr">Observation:</span> <span class="hljs-string">è·å–åˆ°8æ¡ç›¸å…³è§„èŒƒæ¡æ–‡</span>             <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-attr">Reasoning:</span> <span class="hljs-string">å¤§è¿ä¸´æµ·ï¼Œéœ€è¦æŸ¥è¯¢æ²¿æµ·åœ°åŒºçš„</span>        <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>            <span class="hljs-string">é˜²è…èš€å’ŒæŠ—é£å‹è®¾è®¡è¦æ±‚</span>               <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-attr">Action:</span> <span class="hljs-string">è°ƒç”¨RAGFlowæ£€ç´¢æ²¿æµ·å»ºç­‘è§„èŒƒçŸ¥è¯†åº“</span>      <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-attr">Observation:</span> <span class="hljs-string">è·å–åˆ°5æ¡æ²¿æµ·åœ°åŒºç‰¹æ®Šè¦æ±‚</span>         <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-attr">Reasoning:</span> <span class="hljs-string">è¿˜éœ€è¦æŸ¥è¯¢ä½å®…çš„èŠ‚èƒ½è®¾è®¡æ ‡å‡†</span>        <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-attr">Action:</span> <span class="hljs-string">è°ƒç”¨RAGFlowæ£€ç´¢èŠ‚èƒ½è§„èŒƒçŸ¥è¯†åº“</span>          <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-attr">Observation:</span> <span class="hljs-string">è·å–åˆ°4æ¡èŠ‚èƒ½è®¾è®¡æ ‡å‡†</span>             <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-attr">Reasoning:</span> <span class="hljs-string">ä¿¡æ¯å·²è¶³å¤Ÿï¼Œå¯ä»¥å¼€å§‹ç”Ÿæˆæ–‡æ¡£</span>        <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-attr">Action:</span> <span class="hljs-string">å°†æ”¶é›†çš„ä¿¡æ¯ä¼ é€’ç»™æ–‡æ¡£ç¼–å†™Agent</span>        <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre>
<p><strong>LangGraphå®ç°ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#Â å·¥å…·å®šä¹‰</span>
researcher_toolsÂ =Â [retrieve_case,Â retrieve_standard,Â web_search]

<span class="hljs-comment">#Â æ„å»ºå·¥ä½œæµ</span>
workflowÂ =Â StateGraph(AgentState)
workflow.add_node(<span class="hljs-string">"researcher"</span>,Â researcher_node)
workflow.add_node(<span class="hljs-string">"generate"</span>,Â generate_node)
workflow.add_node(<span class="hljs-string">"auditor"</span>,Â auditor_node)

<span class="hljs-comment">#Â ReActå¾ªç¯æ§åˆ¶ï¼šè¾¾åˆ°æœ€å¤§æ¬¡æ•°æˆ–æ— å·¥å…·è°ƒç”¨æ—¶é€€å‡º</span>
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">researcher_condition</span>(<span class="hljs-params">state</span>):
Â Â Â Â <span class="hljs-keyword">if</span>Â state.get(<span class="hljs-string">"research_loop_count"</span>,Â <span class="hljs-number">0</span>)Â &gt;=Â MAX_LOOPS:
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">"generate"</span>
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">"tools"</span>Â <span class="hljs-keyword">if</span>Â state[<span class="hljs-string">"messages"</span>][-<span class="hljs-number">1</span>].tool_callsÂ <span class="hljs-keyword">else</span>Â <span class="hljs-string">"generate"</span>

workflow.add_conditional_edges(<span class="hljs-string">"researcher"</span>,Â researcher_condition)
workflow.add_edge(<span class="hljs-string">"researcher_tools"</span>,Â <span class="hljs-string">"researcher"</span>)Â Â <span class="hljs-comment">#Â å·¥å…·ç»“æœè¿”å›æ¨ç†</span>
workflow.add_edge(<span class="hljs-string">"generate"</span>,Â <span class="hljs-string">"auditor"</span>)
appÂ =Â workflow.<span class="hljs-built_in">compile</span>()
</code></pre>
<p><strong>æ ¸å¿ƒç‰¹æ€§</strong>ï¼š</p>
<ul>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼š<code>AgentState</code> æ˜¾å¼å®šä¹‰æ‰€æœ‰çŠ¶æ€å­—æ®µï¼Œä¾¿äºè°ƒè¯•</li>
<li><strong>å¾ªç¯æ§åˆ¶</strong>ï¼šé€šè¿‡ <code>research_loop_count</code> å’Œæ¡ä»¶åˆ¤æ–­æ§åˆ¶å¾ªç¯æ¬¡æ•°</li>
<li><strong>æ¡ä»¶è¾¹</strong>ï¼šæ ¹æ®æ¶ˆæ¯å†…å®¹å’ŒçŠ¶æ€åŠ¨æ€å†³å®šä¸‹ä¸€æ­¥</li>
</ul>
<p><strong>æ•ˆæœå¯¹æ¯”</strong>ï¼š</p>






























<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¸€æ¬¡æ€§æ£€ç´¢</th><th>ReActæ¨¡å¼ + å®¡æ ¸</th></tr></thead><tbody><tr><td><strong>ä¸€æ¬¡é€šè¿‡ç‡</strong></td><td>60%</td><td><strong>90%</strong></td></tr><tr><td><strong>å¹³å‡æ£€ç´¢æ¬¡æ•°</strong></td><td>1æ¬¡</td><td>2.3æ¬¡</td></tr><tr><td><strong>ä¸Šä¸‹æ–‡è´¨é‡</strong></td><td>ä¸­</td><td><strong>é«˜</strong></td></tr><tr><td><strong>ç”Ÿæˆæ—¶é—´</strong></td><td>5min</td><td>10min</td></tr></tbody></table>
<blockquote>
<p><strong>æ ¸å¿ƒä»·å€¼</strong>ï¼šç”¨æ—¶é—´æ¢ç©ºé—´ï¼Œå‡†ç¡®ç‡æå‡25%ï¼Œå¤§å¹…å‡å°‘äººå·¥ä¿®æ”¹æˆæœ¬ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-9">äº”ã€ç”Ÿäº§éƒ¨ç½²ï¼šDocker Composeä¸€é”®å¯åŠ¨</h3>
<p><strong>å¤šç¯å¢ƒé…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#Â docker-compose-dev.ymlÂ æ ¸å¿ƒç»“æ„</span>
services:
Â Â web:
Â Â Â Â build:Â ../../apps/web
Â Â Â Â ports:Â <span class="hljs-section">["3000:80"]</span>

Â Â backend:
Â Â Â Â build:Â ../../apps/backend
Â Â Â Â ports:Â <span class="hljs-section">["4999:4999"]</span>
Â Â Â Â environment:
Â Â Â Â Â Â -Â <span class="hljs-attr">MYSQL_HOST</span>=mysql
Â Â Â Â Â Â -Â <span class="hljs-attr">AGENT_URL</span>=http://agent:<span class="hljs-number">8000</span>

Â Â agent:
Â Â Â Â build:Â ../../apps/agent
Â Â Â Â ports:Â <span class="hljs-section">["8000:8000"]</span>
Â Â Â Â environment:
Â Â Â Â Â Â -Â <span class="hljs-attr">RAGFLOW_BASE_URL</span>=<span class="hljs-variable">${RAGFLOW_BASE_URL}</span>
Â Â Â Â Â Â -Â <span class="hljs-attr">DASHSCOPE_API_KEY</span>=<span class="hljs-variable">${DASHSCOPE_API_KEY}</span>
Â Â Â Â Â Â -Â <span class="hljs-attr">LANGFUSE_PUBLIC_KEY</span>=<span class="hljs-variable">${LANGFUSE_PUBLIC_KEY}</span>

Â Â mysql:
Â Â Â Â image:Â mysql:8.0
Â Â Â Â volumes:Â <span class="hljs-section">[mysql_data:/var/lib/mysql]</span>
</code></pre>
<p><strong>ç¯å¢ƒåŒºåˆ†</strong>ï¼š</p>
<ul>
<li><code>docker-compose-dev.yml</code>ï¼šå¼€å‘ç¯å¢ƒï¼Œæš´éœ²è°ƒè¯•ç«¯å£</li>
<li><code>docker-compose-pro.yml</code>ï¼šç”Ÿäº§ç¯å¢ƒï¼Œå®‰å…¨é…ç½®</li>
<li><code>.env</code> æ–‡ä»¶ï¼šæ•æ„Ÿé…ç½®ç»Ÿä¸€ç®¡ç†</li>
</ul>
<hr/>
<h3 data-id="heading-10">å…­ã€è¡€æ³ªæ•™è®­ï¼šè‡´å‘½å‘åŠè§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-11">å‘1ï¼šä¸Šä¸‹æ–‡çˆ†ç‚¸å¯¼è‡´LLMå´©æºƒ</h4>
<p><strong>é—®é¢˜ç°è±¡</strong>ï¼š</p>
<ul>
<li>æ£€ç´¢10æ¡è§„èŒƒæ–‡æ¡£ï¼Œæ¯æ¡2000å­— = 20K tokens</li>
<li>åŠ ä¸Šå¯¹è¯å†å²ã€ç³»ç»ŸPromptã€è¾“å‡ºç©ºé—´ â†’ è½»æ¾è¶…è¿‡128Ké™åˆ¶</li>
<li>LLMæŠ¥é”™æˆ–æˆªæ–­å…³é”®ä¿¡æ¯</li>
</ul>
<p><strong>4ç§è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>

























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>åšæ³•</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td><strong>1. æ–‡æ¡£å‹ç¼©</strong></td><td>æå–å…³é”®å¥å­ï¼Œè€Œéå…¨æ–‡</td><td>å‡å°‘70% tokens</td></tr><tr><td><strong>2. æ»‘åŠ¨çª—å£</strong></td><td>åªä¿ç•™æœ€è¿‘5è½®å¯¹è¯</td><td>æ§åˆ¶å†å²å¢é•¿</td></tr><tr><td><strong>3. åŠ¨æ€Top-K</strong></td><td>æ ¹æ®å‰©ä½™ç©ºé—´è°ƒæ•´æ£€ç´¢æ•°é‡</td><td>è‡ªé€‚åº”è°ƒæ•´</td></tr></tbody></table>
<p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#Â æ–‡æ¡£æ‘˜è¦å‹ç¼©</span>
defÂ compress_documents(docs,Â <span class="hljs-attr">max_length</span>=<span class="hljs-number">500</span>):
Â Â Â Â returnÂ <span class="hljs-section">[Document(
Â Â Â Â Â Â Â Â page_content=extract_key_sentences(doc.page_content,Â max_length),
Â Â Â Â Â Â Â Â metadata=doc.metadata
Â Â Â Â )Â forÂ docÂ inÂ docs]</span>

<span class="hljs-comment">#Â æ»‘åŠ¨çª—å£ç®¡ç†å¯¹è¯å†å²</span>
defÂ get_recent_context(messages,Â <span class="hljs-attr">max_history</span>=<span class="hljs-number">5</span>):
Â Â Â Â returnÂ messages<span class="hljs-section">[-max_historyÂ *Â 2:]</span>Â Â <span class="hljs-comment">#Â æ¯è½®åŒ…å«Â userÂ +Â assistant</span>

<span class="hljs-comment">#Â åŠ¨æ€è°ƒæ•´æ£€ç´¢æ•°é‡</span>
defÂ adaptive_retrieve(query,Â <span class="hljs-attr">max_tokens</span>=<span class="hljs-number">8000</span>):
Â Â Â Â <span class="hljs-attr">available</span>Â =Â max_tokensÂ -Â count_tokens(history)Â -Â <span class="hljs-number">2000</span>
Â Â Â Â returnÂ rag_service.search(query,Â <span class="hljs-attr">top_k</span>=min(<span class="hljs-number">10</span>,Â availableÂ //Â <span class="hljs-number">500</span>))
</code></pre>
<p><strong>æ•ˆæœ</strong>ï¼šä¸Šä¸‹æ–‡æ§åˆ¶åœ¨32Kä»¥å†…ï¼Œæ”¯æŒæ›´é•¿çš„å¤šè½®å¯¹è¯ã€‚</p>
<hr/>
<h4 data-id="heading-12">å‘2ï¼šPromptç‰ˆæœ¬çˆ†ç‚¸ï¼Œç®¡ç†æ··ä¹±</h4>
<p><strong>é—®é¢˜</strong>ï¼šæ—©æœŸPromptæ•£è½åœ¨ä»£ç å„å¤„ï¼Œä¿®æ”¹éœ€è¦é‡æ–°éƒ¨ç½²ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>æ‰€æœ‰Promptæ¨¡æ¿è¿ç§»åˆ°Langfuse</li>
<li>ä»£ç ä¸­åªä¿ç•™Promptåç§°å¼•ç”¨</li>
<li>æ”¯æŒåŠ¨æ€å‚æ•°ç¼–è¯‘</li>
</ol>

<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#Â é‡æ„å‰ï¼šç¡¬ç¼–ç åœ¨ä»£ç ä¸­</span>
<span class="hljs-attr">prompt</span>Â =Â <span class="hljs-string">"""ä½ æ˜¯ä¸€ä¸ªå»ºç­‘è§„èŒƒåŠ©æ‰‹..."""</span>

<span class="hljs-comment">#Â é‡æ„åï¼šä»Â LangfuseÂ åŠ¨æ€è·å–Â +Â å‚æ•°ç¼–è¯‘</span>
<span class="hljs-attr">prompt_manager</span>Â =Â PromptManager()
<span class="hljs-attr">researcher_prompt</span>Â =Â prompt_manager.get_prompt(<span class="hljs-string">"langchain_researcher"</span>)
<span class="hljs-attr">system_msg</span>Â =Â researcher_prompt.compile(
Â Â Â Â <span class="hljs-attr">project_info</span>=project_info,
Â Â Â Â <span class="hljs-attr">loop_count</span>=loop_count,
Â Â Â Â <span class="hljs-attr">loop_guidance</span>=loop_guidance
)
</code></pre>
<p><strong>æ•ˆæœ</strong>ï¼š</p>
<ul>
<li>PromptåŠ¨æ€æ›´æ–°ï¼Œæœ‰åºç®¡ç†ã€‚</li>
<li>LLM å…¨è¿‡ç¨‹å¯è§†åŒ–ç›‘æµ‹ã€‚</li>
<li>åŸºäºè¯„åˆ†ç³»ç»Ÿï¼Œä¸ºæ•°æ®é—­ç¯æä¾›æ”¯æ’‘ã€‚</li>
</ul>
<h2 data-id="heading-13"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59bdadd3e95f4cc2bf11c4a00cc7bf9a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byg5bGF6YKq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769514045&amp;x-signature=y9CrgNU9hXdGlN8gc5Sd0RZd6Tc%3D" alt="" loading="lazy"/></h2>
<h3 data-id="heading-14">ä¸ƒã€å±•æœ›</h3>
<p><strong>å¼€æºè®¡åˆ’</strong>ï¼š</p>
<ul>
<li>æ ¸å¿ƒä»£ç å³å°†å¼€æº</li>
<li>æä¾›Dockerä¸€é”®éƒ¨ç½²</li>
<li>å®Œæ•´çš„éƒ¨ç½²æ–‡æ¡£</li>
</ul>
<p>é™„ä¸Šé¡¹ç›®æ•ˆæœå›¾</p>
<hr/>
<h2 data-id="heading-15">å†™åœ¨æœ€å</h2>
<blockquote>
<p><strong>å·¥ç¨‹åŒ–æ¯”æ¨¡å‹æ›´é‡è¦ï¼Œæˆ–è€…è‡³å°‘ä¸æ¨¡å‹åŒæ ·é‡è¦ã€‚</strong></p>
</blockquote>
<p>æˆ‘ä»¬æ˜¯ä¸€å®¶é¢å‘ AEC è¡Œä¸šçš„ AI åˆ›ä¸šå…¬å¸ï¼Œäº§å“æ–¹å‘ä»åœ¨æ¢ç´¢ä¸­ã€‚</p>
<p>å¦‚æœä½ åœ¨åšç±»ä¼¼çš„AIåº”ç”¨å·¥ç¨‹åŒ–ï¼Œæˆ–è€…å¯¹å‚ç›´è¡Œä¸šAIè½åœ°æ„Ÿå…´è¶£ï¼Œæ¬¢è¿è¯„è®ºåŒºè®¨è®ºæˆ–æ·»åŠ è”ç³»æ–¹å¼æ²Ÿé€šã€‚</p>
<p><strong>å¾®ä¿¡ï¼šDamondut</strong></p>
<p>è§‰å¾—æœ‰ç”¨çš„è¯ï¼Œ<strong>ç‚¹èµ</strong>æ”¯æŒä¸€ä¸‹ ğŸ‘‡</p>
<hr/>
<h2 data-id="heading-16">ä¸‹ä¸€ç¯‡é¢„å‘Š</h2>
<p><strong>ã€ŠLLMåº”ç”¨ä¸­çš„è®°å¿†ç³»ç»Ÿè®¾è®¡â€”â€”ä»çŸ­æœŸè®°å¿†åˆ°é•¿æœŸè®°å¿†çš„å®Œæ•´å®è·µã€‹</strong></p>
<p>ä»‹ç» LLM åº”ç”¨ä¸­ï¼Œä¸åŒç»´åº¦çš„è®°å¿†çš„è½åœ°å®è·µã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude Code çš„éšè—æŠ€èƒ½ï¼šSubagent å…¨æµç¨‹å®æ“]]></title>    <link>https://juejin.cn/post/7597251197426204698</link>    <guid>https://juejin.cn/post/7597251197426204698</guid>    <pubDate>2026-01-20T12:21:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597251197426204698" data-draft-id="7597058147749658634" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude Code çš„éšè—æŠ€èƒ½ï¼šSubagent å…¨æµç¨‹å®æ“"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-20T12:21:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å’Œå¹³hepingfly"/> <meta itemprop="url" content="https://juejin.cn/user/4100516930912747"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude Code çš„éšè—æŠ€èƒ½ï¼šSubagent å…¨æµç¨‹å®æ“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4100516930912747/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å’Œå¹³hepingfly
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T12:21:08.000Z" title="Tue Jan 20 2026 12:21:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼šè®© Claude å¸®ä½  review ä»£ç ï¼Œç»“æœå¯¹è¯è¶Šæ¥è¶Šé•¿ï¼Œä¸Šä¸‹æ–‡è¶Šæ¥è¶Šä¹±ï¼Œæœ€åè¿˜æŠŠå‰é¢çš„éœ€æ±‚ç»™å¿˜äº†ï¼Ÿå°¤å…¶æ˜¯é¡¹ç›®è¶Šåšè¶Šå¤§ï¼Œè¿™ç§æƒ…å†µå°±è¶Šæ˜æ˜¾ã€‚</p>
<p>å…¶å® Claude Code é‡Œæœ‰ä¸€ä¸ªéšè—åŠŸèƒ½ï¼šSubagentï¼ˆå­ä»£ç†ï¼‰å®ƒå¯ä»¥è®© Claude åƒé¡¹ç›®ç»ç†ä¸€æ ·ï¼ŒæŠŠä¸åŒä»»åŠ¡å¤–åŒ…ç»™ä¸åŒçš„ AI åŠ©æ‰‹ã€‚</p>
<p>è¯´å®è¯ï¼Œç”¨äº† Subagent ä¹‹åï¼Œæˆ‘å·²ç»å¾ˆå°‘åœ¨ä¸»å¯¹è¯é‡Œåšä»£ç å®¡æŸ¥äº†ã€‚åˆçœä¸Šä¸‹æ–‡ï¼Œåˆä¸æ‰“æ–­ä¸»ä»»åŠ¡ï¼Œä½“éªŒéå¸¸ä¸æ»‘ã€‚</p>
<p>ä»Šå¤©å¸¦ä½ æ‰‹æŠŠæ‰‹å®Œæ•´å®æ“ä¸€æ¬¡ï¼Œä» 0 åˆ›å»ºä¸€ä¸ªã€Œä»£ç å®¡æŸ¥ä¸“å‘˜ã€Subagentã€‚</p>
<h2 data-id="heading-0">1ã€ä¸ºä»€ä¹ˆæ™®é€š Claude ä¸å¤Ÿç”¨ï¼Ÿ</h2>
<p>ç”¨ claude ä¸»agent ç”¨çš„å¥½å¥½çš„ï¼Œä¸ºä»€ä¹ˆè¦ç”¨ subagent å‘¢ï¼Ÿ</p>
<p>åŸå› å°±æ˜¯ï¼Œä½ å¯ä»¥æŠŠ claude æƒ³è±¡æˆä¸€ä¸ªé¡¹ç›®ç»ç†ï¼Œä»–ä¸€ä¸ªäººè¦å¹²æ‰€æœ‰çš„æ´»ï¼ˆå†™ä»£ç ã€æŸ¥Bugã€å†™æ–‡æ¡£ã€åšæµ‹è¯•ï¼‰ã€‚</p>
<p>è¿™æ ·ä»–ä¸ä»…ç´¯ï¼Œè€Œä¸”å®¹æ˜“ææ··ä¸Šä¸‹æ–‡ï¼Œæˆ–è€…ç”¨æ˜‚è´µçš„èµ„æºåšç®€å•çš„å°äº‹ã€‚</p>
<p>æœ€æ˜æ˜¾çš„ä¸€ä¸ªæƒ…å†µå°±æ˜¯ï¼Œä½ å’Œ claude èŠç€èŠç€ï¼Œä½ å°±ä¼šå‘ç°ä¸Šä¸‹æ–‡æ»¡äº†ã€‚</p>
<p>åƒ review ä»£ç è¿™ç§äº‹æƒ…ï¼Œå…¶å®ä¸éœ€è¦åœ¨æˆ‘ä»¬ä¸»çª—å£å»åšï¼Œç›´æ¥è®©ä¸€ä¸ªå­ agent å»åšå°±å¯ä»¥äº†ï¼Œå½“ä»–reviewå®Œï¼ŒæŠŠç»“æœé€šçŸ¥æˆ‘ä»¬å°±è¡Œäº†ã€‚è¿™æ ·å®Œå…¨ä¸å ç”¨ä¸»è¿›ç¨‹çš„ä¸Šä¸‹æ–‡ã€‚</p>
<p><strong>å¯¹æ¯”æ¥çœ‹å°±æ˜¯è¿™æ ·ï¼š</strong></p>
<p><strong>1ï¼‰æ™®é€š Claudeï¼š</strong></p>
<p>å…¨èƒ½å‘˜å·¥</p>
<ul>
<li>åˆå†™ä»£ç </li>
<li>åˆæŸ¥ Bug</li>
<li>åˆå†™æ–‡æ¡£</li>
<li>ä¸Šä¸‹æ–‡è¶ŠèŠè¶Šä¹±</li>
</ul>
<p><strong>2ï¼‰Subagentï¼š</strong></p>
<ul>
<li>åªå¹²ä¸€ä»¶äº‹</li>
<li>ä¸Šä¸‹æ–‡ç‹¬ç«‹</li>
<li>æ›´ä¸“æ³¨</li>
<li>æ›´çœ Token</li>
</ul>
<p>ç®€å•è¯´å°±æ˜¯ï¼šæ™®é€š Claude = ä¸‡é‡‘æ²¹ ï¼ŒSubagent = æ‰‹æœ¯åˆ€ ã€‚ä¸€ä¸ªä»€ä¹ˆéƒ½èƒ½åšï¼Œä¸€ä¸ªä¸“é—¨æŠŠäº‹åšå¥½ã€‚</p>
<p>æ‰€ä»¥ï¼Œæœ‰äº† Subagentsä¹‹åï¼Œå½“é‡åˆ°ç‰¹å®šä»»åŠ¡æ—¶ï¼Œé¡¹ç›®ç»ç†ï¼ˆClaudeï¼‰ä¼šæŠŠä»»åŠ¡<strong>å¤–åŒ…</strong>ç»™ä¸“é—¨çš„å­æ™ºèƒ½ä½“å»åšã€‚</p>
<h2 data-id="heading-1">2ã€Subagents æ˜¯ä»€ä¹ˆ</h2>
<p><strong>å®˜æ–¹è¿™ä¹ˆè¯´çš„ï¼š</strong></p>
<p>Subagents æ˜¯ä¸“é—¨å¤„ç†ç‰¹å®šç±»å‹ä»»åŠ¡çš„ AI åŠ©æ‰‹ã€‚</p>
<p>æ¯ä¸ªå­ä»£ç†éƒ½åœ¨ç‹¬ç«‹çš„ä¸Šä¸‹æ–‡ç¯å¢ƒä¸­è¿è¡Œï¼Œæ‹¥æœ‰ä¸“å±çš„ç³»ç»Ÿæç¤ºè®¾ç½®ã€ç‰¹å®šçš„å·¥å…·è®¿é—®æƒé™ä»¥åŠç‹¬ç«‹çš„æ“ä½œæƒé™ã€‚</p>
<p>å½“ Claude é‡åˆ°ç¬¦åˆå­ä»£ç†æè¿°çš„ä»»åŠ¡æ—¶ï¼Œä¼šè‡ªåŠ¨å°†è¯¥ä»»åŠ¡å§”æ‰˜ç»™å¯¹åº”çš„å­ä»£ç†è¿›è¡Œå¤„ç†ï¼Œå­ä»£ç†å°†ç‹¬ç«‹å®Œæˆä»»åŠ¡å¹¶è¿”å›ç»“æœã€‚</p>
<p>Claude ä¼šæ ¹æ®æ¯ä¸ªå­ä»£ç†çš„åŠŸèƒ½æè¿°æ¥å†³å®šä½•æ—¶è¿›è¡Œä»»åŠ¡å§”æ´¾ã€‚</p>
<p>åˆ›å»ºå­ä»£ç†æ—¶ï¼Œè¯·ç¼–å†™æ¸…æ™°æ˜ç¡®çš„æè¿°ï¼Œè¿™æ · claude å°±èƒ½å‡†ç¡®åˆ¤æ–­ä½•æ—¶è°ƒç”¨è¯¥å­ä»£ç†ã€‚</p>
<p><strong>è¯´äººè¯ï¼š</strong></p>
<p>Subagents å°±æ˜¯ç»™ Claude è¯·çš„ä¸´æ—¶å·¥ï¼Œè€Œä¸”æ¯ä¸ªä¸´æ—¶å·¥åªå¹²ä¸€ä»¶äº‹ã€‚</p>
<p>ä¸» Agent è´Ÿè´£ç»Ÿç­¹å…¨å±€ ï¼ŒSubagent è´Ÿè´£ä¸“é¡¹ä»»åŠ¡ ã€‚æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¸¦ç‹¬ç«‹è®°å¿† + ç‹¬ç«‹æƒé™çš„ä¸“èŒ AI åŠ©æ‰‹ã€‚</p>
<p>Claude Code æä¾›äº†å¤šä¸ªå†…ç½®å­ä»£ç†ï¼ŒåŒ…æ‹¬æ¢ç´¢å‹ï¼ˆExploreï¼‰ã€è§„åˆ’å‹ï¼ˆPlanï¼‰å’Œé€šç”¨å‹ç­‰ã€‚</p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å»åˆ›å»ºè‡ªå®šä¹‰å­ä»£ç†å»æ‰§è¡Œç‰¹å®šçš„ä»»åŠ¡ã€‚</p>
<p>ä¸‹é¢çº¢æ¡†è¿™äº›éƒ½æ˜¯å†…ç½®çš„å­ä»£ç†</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e883bbb28a47422d9bc568c08d879a91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769516468&amp;x-signature=9WiuONWGp4lI%2F08VyBJi48aZUjk%3D" alt="img" loading="lazy"/></p>
<p><strong>Claude å†…ç½®å­ä»£ç†ä¸¾ä¾‹ï¼š</strong></p>
<p>å†…ç½®çš„æ¢ç´¢å‹å­ä»£ç†ï¼ˆExplore Subagentï¼‰</p>
<p>ä¸€ä¸ªä¸“ä¸ºä»£ç åº“æœç´¢ä¸åˆ†æä¼˜åŒ–çš„å¿«é€Ÿåªè¯»ä»£ç†ã€‚</p>
<ul>
<li>æ¨¡å‹ï¼šHaikuï¼ˆå“åº”è¿…é€Ÿã€å»¶è¿Ÿä½ï¼‰</li>
<li>å·¥å…·ï¼šä»…è¯»å·¥å…·ï¼ˆæ— å†™å…¥ä¸ç¼–è¾‘æƒé™ï¼‰</li>
<li>ç”¨é€”ï¼šæ–‡ä»¶æŸ¥æ‰¾ã€ä»£ç æ£€ç´¢ã€ä»£ç åº“æ¢ç´¢</li>
</ul>
<p>å½“ Claude éœ€è¦åœ¨ä¸ä¿®æ”¹ä»£ç çš„æƒ…å†µä¸‹æœç´¢æˆ–ç†è§£ä»£ç åº“æ—¶ï¼Œå®ƒä¼šå°†ä»»åŠ¡å§”æ‰˜ç»™ Explore è¿™ä¸ªå­ä»£ç†ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿æ¢ç´¢ç»“æœä¸ä¼šæ··å…¥æ‚¨çš„ä¸»è¦å¯¹è¯ä¸Šä¸‹æ–‡ä¸­ã€‚</p>
<h2 data-id="heading-2">3ã€å®æˆ˜ï¼šåˆ›å»ºä¸€ä¸ªä»£ç å®¡æŸ¥ Subagent</h2>
<p>subagent æ˜¯åŸºäº markdown æ–‡ä»¶çš„ï¼Œåªä¸è¿‡è¿™ä¸ª Markdown æ–‡ä»¶ä¼šåŒ…å« YAML å‰ç½®å…ƒæ•°æ®ï¼Œä½ å¯ä»¥æ‰‹åŠ¨åˆ›å»ºï¼Œä¹Ÿå¯ä½¿ç”¨Â <code>/agents</code>Â æ–œæ å‘½ä»¤å¿«é€Ÿç”Ÿæˆã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬ä»¥<code>/agent</code>Â å‘½ä»¤åˆ›å»ºä¸€ä¸ªç”¨æˆ·çº§å­ä»£ç†ä¸ºä¾‹ï¼Œè¿™ä¸ªå­ä»£ç†èƒ½å¤Ÿå®¡æŸ¥ä»£ç å¹¶æä¾›ä¼˜åŒ–å»ºè®®</p>
<p><strong>1ï¼‰åœ¨å‘½ä»¤è¡Œè¾“å…¥</strong><code>/agents</code></p>
<p>é€‰æ‹© Â Create new agent</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a19f3bd8aeae4eb2b0fdea71fb87281b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769516468&amp;x-signature=GegfTMZX08bu0bGcOlL5xlXN2J0%3D" alt="img" loading="lazy"/></p>
<p><strong>2ï¼‰é€‰æ‹©å­ä»£ç†ä½¿ç”¨çº§åˆ«</strong></p>
<ul>
<li>é¡¹ç›®çº§åˆ«ï¼Œä»…é™å½“å‰é¡¹ç›®ä½¿ç”¨</li>
<li>ç”¨æˆ·çº§åˆ«ï¼Œæ‰€æœ‰çš„é¡¹ç›®éƒ½å¯ä»¥ä½¿ç”¨</li>
</ul>
<p>å¦‚æœä½ ç»å¸¸åœ¨å¤šä¸ªé¡¹ç›®é‡Œç”¨åŒä¸€ä¸ªå­ä»£ç†ï¼Œå»ºè®®é€‰ã€Œç”¨æˆ·çº§åˆ«ã€ï¼Œä¸€æ¬¡é…ç½®ï¼Œé•¿æœŸä½¿ç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dcf2f32ec1eb4722a35482c69cba588d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769516468&amp;x-signature=w6K9ud9Z5OcxtYWr9rDzFEGaMCI%3D" alt="img" loading="lazy"/></p>
<p>æ ¹æ®è‡ªå·±çš„éœ€æ±‚ä»»é€‰ä¸€ä¸ªï¼Œé€‰æ‹©å®Œä¹‹åä¼šåœ¨å¯¹åº”çš„ç›®å½•ä¸‹ç”Ÿæˆ agents è¿™ä¸ªç›®å½•</p>
<p><strong>3ï¼‰åˆ›å»ºå­ä»£ç†æ–¹å¼</strong></p>
<p>æ˜¯é€šè¿‡ ä½¿ç”¨ Claude å¸®ä½ å»ç”Ÿæˆ subagent ï¼Œè¿˜æ˜¯ä½ è‡ªå·±çº¯æ‰‹åŠ¨å»é…ç½®</p>
<p>æ¨èé€‰æ‹©ä½¿ç”¨ Claudeå»å¸®æˆ‘ä»¬åˆ›å»ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a275971c5d6943fe952be607780b6fee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769516468&amp;x-signature=ruLfwobWk3J0ooZgMQaJuQkpkSs%3D" alt="img" loading="lazy"/></p>
<p><strong>4ï¼‰ç»™å­ä»£ç†æ·»åŠ æè¿°</strong></p>
<p>ç»™å³å°†åˆ›å»ºçš„ subagent æ·»åŠ æè¿°ï¼Œè¿™ä¸ª subagent å…·ä½“æ˜¯å¹²ä»€ä¹ˆçš„ï¼Œä»¥åŠä»€ä¹ˆæ—¶å€™ä¼šè¢«è°ƒç”¨ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<p>BASH</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">A</span> <span class="hljs-selector-tag">code</span> improvement agent that scans files and suggests improvements
for readability, performance, and best practices. It should explain
each issue, show the current <span class="hljs-selector-tag">code</span>, and provide an improved version.
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1366d537e334a5aaf74a58283c86ccc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769516468&amp;x-signature=ilOB1JdFA3yA3eizR6FVMGvI%2BRA%3D" alt="img" loading="lazy"/></p>
<p><strong>5ï¼‰é€‰æ‹©å­ä»£ç†ä½¿ç”¨çš„å·¥å…·</strong></p>
<ul>
<li>æ‰€æœ‰å·¥å…·æƒé™éƒ½æä¾›</li>
<li>åªè¯»å·¥å…·æƒé™</li>
<li>ç¼–è¾‘å·¥å…·æƒé™</li>
<li>æ‰§è¡Œå·¥å…·æƒé™</li>
<li>å…¶ä»–å·¥å…·æƒé™</li>
</ul>
<p>æ ¹æ®è‡ªå·±çš„éœ€è¦ç»™è¿™ä¸ª subagent åˆé€‚çš„å·¥å…·æƒé™ã€‚</p>
<p>ä¾‹å¦‚ï¼šä»£ç å®¡æŸ¥åœºæ™¯å»ºè®®ç”¨ã€Œåªè¯»æƒé™ã€ï¼Œå¯ä»¥é˜²æ­¢ AI è¯¯ä¿®æ”¹ä»£ç ã€‚</p>
<p><strong>å° tipsï¼š</strong></p>
<p>å¦‚æœä½ ç»™ Subagent å¼€äº†ç¼–è¾‘æƒé™ï¼Œä¸€å®šè¦ç¡®è®¤å®ƒçš„æè¿°å†™å¾—éå¸¸æ¸…æ¥šï¼Œå¦åˆ™å¯èƒ½ä¼šè¯¯æ”¹ä½ ä¸æƒ³æ”¹çš„æ–‡ä»¶ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4782d25937b46e2b8f393212a5eebef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769516468&amp;x-signature=2ESSpaYTuVXHcBIFN8ZRZiPuYh8%3D" alt="img" loading="lazy"/></p>
<p><strong>6ï¼‰é€‰æ‹©å­ä»£ç†ä½¿ç”¨çš„æ¨¡å‹</strong></p>
<p>å¯ä»¥æŒ‡å®šä¸€ä¸ªæ¨¡å‹ï¼Œæˆ–è€…è·Ÿä¸»å¯¹è¯ä½¿ç”¨åŒæ ·çš„æ¨¡å‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3e1fd29d4454cdf9f3c28aafffb4dcf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769516468&amp;x-signature=jV2DAD%2B0la%2FoA45ouGAtepur3tI%3D" alt="img" loading="lazy"/></p>
<p><strong>7ï¼‰é€‰æ‹©å­ä»£ç†èƒŒæ™¯é¢œè‰²</strong></p>
<p>ä¸ºå­ä»£ç†é€‰æ‹©èƒŒæ™¯é¢œè‰²ï¼Œä¾¿äºæ‚¨åœ¨ç•Œé¢ä¸­åŒºåˆ†å½“å‰è¿è¡Œçš„æ˜¯å“ªä¸ªå­ä»£ç†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92ce9e1dd0744abdbc70efc4d4a2ace8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769516468&amp;x-signature=NME2DasqLfITptJKp7UNQMD0hLo%3D" alt="img" loading="lazy"/></p>
<p><strong>8ï¼‰ä¿å­˜å¹¶è¿è¡Œ</strong></p>
<p>ä¿å­˜è¯¥å­ä»£ç†ï¼Œæ— éœ€é‡å¯å³å¯ç«‹å³ç”Ÿæ•ˆã€‚</p>
<p>åœ¨ä½ çš„å½“å‰é¡¹ç›®ç›®å½•ä¸‹ï¼Œæˆ–è€…å½“å‰ç”¨æˆ·ç›®å½•ä¸‹çš„Â <code>.claudeÂ </code>æ–‡ä»¶å¤¹ä¸‹ï¼Œå°±èƒ½çœ‹åˆ°Â <code>agents</code>Â æ–‡ä»¶å¤¹å’Œé‡Œé¢çš„ markdown æ–‡ä»¶</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/697b09ee145f42658ae2e4e7c205c7e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769516468&amp;x-signature=avZXKFT6%2F3M2rEplJyLAE6UyhvA%3D" alt="img" loading="lazy"/></p>
<p>æˆ‘ä»¬ç°åœ¨å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ª subagent ï¼Œè®©ä»–å¸®æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹ä»£ç è´¨é‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62cf4776a47543e79a94eed9a8c0f00e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769516468&amp;x-signature=qP8jLI13tTblrOP8eqX0h96CuFA%3D" alt="img" loading="lazy"/></p>
<h2 data-id="heading-3">4ã€è¿›é˜¶æŠ€å·§ï¼šåå°æ‰§è¡Œ</h2>
<p>æŒ‰<code>Ctrl + B</code>Â å¯ä»¥è®© subagent åœ¨åå°æ‰§è¡Œã€‚è¿™æ ·å­ä»£ç†åœ¨æ‰§è¡Œä»»åŠ¡ï¼Œä½†æ˜¯å¹¶ä¸å½±å“ä¸»ä»£ç†çš„ä½¿ç”¨ã€‚ä½ å¯ä»¥ç»§ç»­å’Œ claude æ²Ÿé€šï¼Œå½“ subagent å®Œæˆä¹‹åä¼šè‡ªåŠ¨é€šçŸ¥ä½ </p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d26f6698b664616b42467759c4582a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZKM5bmzaGVwaW5nZmx5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769516468&amp;x-signature=Ky%2BFIlG3co0BGBRhxgMCGBauqZQ%3D" alt="img" loading="lazy"/></p>
<p>è¯´å®è¯ï¼ŒSubagent è¿™ä¸ªåŠŸèƒ½å¦‚æœä½ ä¸ç”¨ï¼ŒClaude Code çš„ä»·å€¼è‡³å°‘å°‘äº†ä¸€åŠã€‚å°¤å…¶æ˜¯åšä¸­å¤§å‹é¡¹ç›®çš„æ—¶å€™ï¼Œå®ƒçœŸçš„èƒ½èŠ‚çœä½ å¾ˆå¤šæ—¶é—´ã€‚è€Œä¸”Subagent çš„é…ç½®å¾ˆç®€å•ï¼Œå¤§å®¶éƒ½å¯ä»¥åŠ¨æ‰‹å»è¯•ä¸€ä¸‹ã€‚</p>
<p>é‚£ä½ æœ€æƒ³ç”¨ Subagent æ¥åšä»€ä¹ˆï¼Ÿ ä»£ç å®¡æŸ¥ ï¼Ÿè‡ªåŠ¨æµ‹è¯• ï¼Ÿæˆ–è€…ä½ ç°åœ¨å·²ç»åœ¨ç”¨ Subagent åšäº†å“ªäº›äº‹æƒ…ï¼Ÿ</p>
<p>æ¬¢è¿åœ¨è¯„è®ºåŒºå‘Šè¯‰æˆ‘ ï¼Œå¦‚æœè§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œæ¬¢è¿ç‚¹èµ + è½¬å‘ç»™èº«è¾¹çš„æœ‹å‹ ğŸ«¶</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½ å¯èƒ½ä¸ç›¸ä¿¡ï¼Œæˆ‘æ„¿ç§°Markdownæ˜¯AIæ—¶ä»£æœ€ä¼Ÿå¤§çš„å‘æ˜ä¹‹ä¸€]]></title>    <link>https://juejin.cn/post/7597058147749789706</link>    <guid>https://juejin.cn/post/7597058147749789706</guid>    <pubDate>2026-01-20T13:08:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597058147749789706" data-draft-id="7597266141912285230" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½ å¯èƒ½ä¸ç›¸ä¿¡ï¼Œæˆ‘æ„¿ç§°Markdownæ˜¯AIæ—¶ä»£æœ€ä¼Ÿå¤§çš„å‘æ˜ä¹‹ä¸€"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-20T13:08:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰çŸ³æµæµªè®°"/> <meta itemprop="url" content="https://juejin.cn/user/4072246800548999"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½ å¯èƒ½ä¸ç›¸ä¿¡ï¼Œæˆ‘æ„¿ç§°Markdownæ˜¯AIæ—¶ä»£æœ€ä¼Ÿå¤§çš„å‘æ˜ä¹‹ä¸€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4072246800548999/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰çŸ³æµæµªè®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T13:08:14.000Z" title="Tue Jan 20 2026 13:08:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><h3 data-id="heading-0">1.è´è¶æ•ˆåº”ï¼šä¸€åœºé•¿è¾¾20å¹´çš„æ— å¿ƒæ’æŸ³</h3>
<p>2004 å¹´ï¼ŒJohn Gruber å’Œ Aaron Swartz åœ¨è®¾è®¡ Markdown æ—¶ï¼Œå¿ƒä¸­åªæœ‰ä¸€ä¸ªæå…¶æœ´ç´ çš„æ„¿æœ›ï¼š<strong>ã€Œè®©å†™ HTML å˜å¾—ä¸é‚£ä¹ˆåäººç±»ã€‚ã€</strong></p>
<p>é‚£æ—¶å€™çš„äº’è”ç½‘æ˜¯å°–æ‹¬å·çš„æµ·æ´‹ã€‚ä½ æƒ³å†™ä¸€ä¸ªåˆ—è¡¨ï¼Œå¾—æ•² <code>&lt;ul&gt;&lt;li&gt;...&lt;/li&gt;&lt;/ul&gt;</code>ï¼›æƒ³åŠ ä¸ªç²—ä½“ï¼Œå¾—æ•² <code>&lt;strong&gt;...&lt;/strong&gt;</code>ã€‚è¿™ç§åç›´è§‰çš„è¯­æ³•ï¼ŒæŠŠæ— æ•°æ™®é€šäººæŒ¡åœ¨äº†å†…å®¹åˆ›ä½œçš„é—¨å¤–ã€‚</p>
<p>ä»–ä»¬åˆ›é€  Markdownï¼Œæœ¬æ„æ˜¯ç»™äººç±»ä¸€ä¸ªâ€œå·æ‡’â€çš„å·¥å…·â€”â€”ç”¨çº¯æ–‡æœ¬é‚®ä»¶çš„ç›´è§‰ï¼ˆæ¯”å¦‚ç”¨ <code>*</code> ä»£è¡¨å¼ºè°ƒï¼Œç”¨ <code>&gt;</code> ä»£è¡¨å¼•ç”¨ï¼‰æ¥æ›¿ä»£å¤æ‚çš„æ ‡ç­¾ã€‚</p>
<p>è°ä¹Ÿæ²¡æƒ³åˆ°ï¼Œè¿™ä¸ªä¸ºäº†â€œæ’ç‰ˆâ€è€Œç”Ÿçš„å°å‘æ˜ï¼Œåœ¨è›°ä¼äº† 20 å¹´åï¼Œç«Ÿç„¶å‡»ç©¿äº†æŠ€æœ¯å‘¨æœŸï¼Œæˆä¸ºäº† <strong>ã€ŒAI æ—¶ä»£æœ€é‡è¦çš„åŸºç¡€è®¾æ–½ã€</strong>ã€‚</p>
<p>å¦‚æœè¯´ TCP/IP åè®®è¿æ¥äº†è®¡ç®—æœºä¸è®¡ç®—æœºï¼Œé‚£ä¹ˆ <strong>ã€ŒMarkdown åè®®è¿æ¥äº†ç”Ÿç‰©å¤§è„‘ï¼ˆäººç±»ï¼‰ä¸ç¡…åŸºå¤§è„‘ï¼ˆAIï¼‰ã€‚ã€</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b73bde12e6434437a7828883dcd33ad1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ55-z5rWB5rWq6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769519294&amp;x-signature=akJLkbsTMdLz%2BkQM2cvBYoXwzWw%3D" alt="d66c1ec217ed8847a99561cb86388ffb.png" loading="lazy"/></p>
<h3 data-id="heading-1">2. è®¤çŸ¥åå·®ï¼šè¿™ä¸æ˜¯æ–‡æ¡£ï¼Œè¿™æ˜¯æºä»£ç </h3>
<p>å¤§å¤šæ•°äººå¯¹ Markdown çš„è¯¯è§£åœ¨äºï¼šä»¥ä¸ºå®ƒåªæ˜¯ä¸ªâ€œæ ¼å¼åˆ·â€ã€‚ ä½†åœ¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰çš„çœ¼é‡Œï¼ŒMarkdown æ˜¯**ã€Œä¿¡å™ªæ¯”æœ€é«˜çš„æ•°æ®æ ¼å¼ã€**ã€‚</p>
<h4 data-id="heading-2">ä¸ºä»€ä¹ˆ AI åçˆ± Markdownï¼Ÿ</h4>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ç»„ç¡¬æ ¸çš„**ã€ŒTokenï¼ˆè¯å…ƒï¼‰ç»æµå­¦ã€**å¯¹æ¯”ã€‚ å‡è®¾ä½ è¦å‘Šè¯‰ AI ä¸€ä¸ªç®€å•çš„é”®å€¼å¯¹æ•°æ®ï¼š</p>
<ul>
<li>
<p><strong>ã€ŒJSON æ ¼å¼ï¼ˆOld Wayï¼‰ï¼šã€</strong></p>
<pre><code class="hljs language-css" lang="css">{Â "<span class="hljs-selector-tag">section</span>":Â <span class="hljs-string">"Intro"</span>,Â <span class="hljs-string">"content"</span>:Â <span class="hljs-string">"Hello"</span>Â }
</code></pre>
<p><em>AI è§†è§’ï¼š</em> è¿™é‡Œæœ‰å¤§é‡çš„èŠ±æ‹¬å·ã€å¼•å·ã€å†’å·ã€‚è¿™äº›ç¬¦å·æ¶ˆè€—äº†æ˜‚è´µçš„ Tokenï¼Œå´ä¸æ‰¿è½½æ ¸å¿ƒè¯­ä¹‰ã€‚æ¨¡å‹è¿˜è¦èŠ±è´¹ç®—åŠ›å»è§£æåµŒå¥—ç»“æ„ã€‚</p>
</li>
<li>
<p><strong>ã€ŒMarkdown æ ¼å¼ï¼ˆNew Wayï¼‰ï¼šã€</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment">#Â Intro</span>
Hello
</code></pre>
<p><em>AI è§†è§’ï¼š</em> æåº¦çº¯å‡€ã€‚<code>#</code> ä¸ä»…æ˜¯å­—ç¬¦ï¼Œå®ƒæ˜¯**ã€Œæ³¨æ„åŠ›æœºåˆ¶ï¼ˆAttention Mechanismï¼‰çš„é”šç‚¹ã€**ã€‚Transformer æ¨¡å‹åœ¨è®­ç»ƒæ—¶å°±å­¦ä¼šäº†ï¼šé‡åˆ° <code>#</code>ï¼Œæ„å‘³ç€ä¸€ä¸ªæ–°çš„è¯­ä¹‰å—å¼€å§‹äº†ã€‚</p>
</li>
</ul>
<p>Markdown å‰”é™¤äº†ä¸€åˆ‡æ ¼å¼å™ªéŸ³ï¼Œç•™ä¸‹äº†æœ€çº¯ç²¹çš„**ã€Œè¯­ä¹‰éª¨æ¶ã€**ã€‚å®ƒæ˜¯ AI èƒ½å¤Ÿç›´æ¥â€œç¼–è¯‘â€è¿è¡Œçš„æºä»£ç ã€‚</p>
<h3 data-id="heading-3">3. å·¥ç¨‹åŒ–é©å‘½ï¼šç”¨ 5 ä¸ª .md æ–‡ä»¶é‡æ„è½¯ä»¶å¼€å‘</h3>
<p>åœ¨æœ€å‰æ²¿çš„ AI å·¥ç¨‹åŒ–é¢†åŸŸï¼ˆå¦‚ Google Conductor, Claude Codeï¼‰ï¼Œå·¥ç¨‹å¸ˆä»¬æ­£åœ¨æŠ›å¼ƒå¤æ‚çš„ XML å’Œ YAMLã€‚æ•´ä¸ªè½¯ä»¶å¼€å‘æµç¨‹ï¼Œæ­£åœ¨è¢« 5 ä¸ª <code>.md</code> æ–‡ä»¶å½»åº•æ¥ç®¡ã€‚</p>
<h4 data-id="heading-4">ğŸ“‚ 1. <code>agents.md</code> â€”â€” å®šä¹‰â€œçµé­‚â€ (The Persona)</h4>
<p><strong>ã€Œä»¥å‰ï¼šã€</strong> ä½ éœ€è¦åœ¨ Python/JS ä»£ç é‡Œå†™ä¸€å † System Prompt å­—ç¬¦ä¸²ï¼Œç”šè‡³ç¡¬ç¼–ç é€»è¾‘ã€‚ <strong>ã€Œç°åœ¨ï¼šã€</strong> ä½ åªéœ€è¦ä¸€ä¸ª Markdown æ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">#Â Role:Â èµ„æ·±å®‰å…¨å®¡è®¡å¸ˆ</span>
<span class="hljs-section">##Â Profile</span>
<span class="hljs-bullet">-</span>Â Experience:Â 10å¹´+
<span class="hljs-bullet">-</span>Â Style:Â çŠ€åˆ©ã€ç›´æ¥ã€é›¶å®¹å¿

<span class="hljs-section">##Â ConstraintsÂ (è¡Œä¸ºå‡†åˆ™)</span>
<span class="hljs-quote">&gt;Â 1.Â å‘ç°æ¼æ´æ—¶ï¼Œå¿…é¡»å¼•ç”¨Â CVEÂ ç¼–å·ã€‚</span>
<span class="hljs-quote">&gt;Â 2.Â å¿½ç•¥ä»£ç ç¼©è¿›é—®é¢˜ï¼Œåªå…³æ³¨é€»è¾‘æ¼æ´ã€‚</span>
<span class="hljs-quote">&gt;Â 3.Â æ¯ä¸€ä¸ªå»ºè®®å¿…é¡»é™„å¸¦ä¿®å¤ä»£ç å—ã€‚</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77cbdc42e1484b5492186d46b3b2c66d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ55-z5rWB5rWq6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769519294&amp;x-signature=rzbVmZfyP%2Bg86GZ2bttou%2BxTffo%3D" alt="faebfbc82f24250bbdf5b72a7658214d.png" loading="lazy"/></p>
<p><strong>ã€Œæ·±åº¦è§£æï¼šã€</strong> è¿™ä¸ä»…ä»…æ˜¯æ–‡æ¡£ã€‚å½“ AI Agent å¯åŠ¨æ—¶ï¼Œå®ƒä¼šç›´æ¥è¯»å–è¿™ä¸ªæ–‡ä»¶ã€‚Markdown çš„å±‚çº§ç»“æ„ï¼ˆH1, H2, Blockquoteï¼‰ç›´æ¥æ˜ å°„ä¸ºæ¨¡å‹å†…éƒ¨çš„**ã€Œæƒé‡åˆ†é…ã€**ã€‚å¼•ç”¨å— <code>&gt;</code> é‡Œçš„å†…å®¹ï¼Œä¼šè¢« AI è§†ä¸ºæœ€é«˜ä¼˜å…ˆçº§çš„â€œå®ªæ³•â€ã€‚</p>
<h4 data-id="heading-5">ğŸ“‚ 2. <code>skills/*.md</code> â€”â€” å®šä¹‰â€œæ¥å£â€ (The Interface)</h4>
<p>è¿™æ˜¯æœ€åç›´è§‰çš„ä¸€ç‚¹ï¼š<strong>ã€Œè‡ªç„¶è¯­è¨€æè¿°å°±æ˜¯æœ€å¥½çš„ API æ¥å£ã€‚ã€</strong> è¿‡å»è®© AI è°ƒç”¨å·¥å…·ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰å¤æ‚çš„ JSON Schemaã€‚ç°åœ¨ï¼Œä¸€ä¸ª <code>.md</code> å°±æ˜¯ä¸€ä¸ªæŠ€èƒ½ã€‚</p>
<p>æ¯”å¦‚ <code>skills/search_db.md</code>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta">#Â Skill:Â æŸ¥è¯¢ç”¨æˆ·æ•°æ®åº“</span>
å½“ç”¨æˆ·éœ€è¦æŸ¥æ‰¾ç‰¹å®šç”¨æˆ·çš„ä¿¡æ¯ï¼ˆå¦‚é‚®ç®±ã€æ³¨å†Œæ—¶é—´ï¼‰æ—¶ï¼Œä½¿ç”¨æ­¤å·¥å…·ã€‚

<span class="hljs-meta">##Â Parameters</span>
-Â user_id:Â <span class="hljs-built_in">string</span>Â (å¿…é¡»æ˜¯Â UUIDÂ æ ¼å¼)
-Â fields:Â listÂ (å¯é€‰ï¼Œå¦‚Â [<span class="hljs-string">'email'</span>,Â <span class="hljs-string">'created_at'</span>])
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5d964b68ce64e29aa5bcbe3ba73ee08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ55-z5rWB5rWq6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769519294&amp;x-signature=7Kgb3IQyLJPAAj%2BbZCkkbHvF3wY%3D" alt="5cc3435edc1cd0f207a328b2be6c35ae.png" loading="lazy"/></p>
<p><strong>ã€Œæ·±åº¦è§£æï¼šã€</strong> AI ä¸éœ€è¦çœ‹ä»£ç å®ç°ã€‚å®ƒåªè¦è¯»æ‡‚è¿™æ®µ Markdown æè¿°ï¼Œå°±èƒ½ç²¾å‡†åœ°åˆ¤æ–­**ã€Œä½•æ—¶ã€<strong>è°ƒç”¨è¿™ä¸ªå·¥å…·ï¼Œä»¥åŠ</strong>ã€Œå¦‚ä½•ã€**æå–å‚æ•°ã€‚Markdown æ–‡æ¡£ç›´æ¥å˜æˆäº†å¯è°ƒç”¨çš„å‡½æ•°ã€‚</p>
<h4 data-id="heading-6">ğŸ“‚ 3. <code>plan.md</code> â€”â€” å®šä¹‰â€œçŠ¶æ€â€ (The State Machine)</h4>
<p>å¦‚ä½•é˜²æ­¢ AI åœ¨å¤æ‚çš„ä»»åŠ¡ä¸­â€œæ­»å¾ªç¯â€ï¼Ÿç­”æ¡ˆæ˜¯ä¸€ä¸ª Markdown å¤é€‰æ¡†ã€‚</p>
<p>åœ¨ <strong>ã€ŒContext Driven Development (CDD)ã€</strong> æ¨¡å¼ä¸­ï¼Œ<code>plan.md</code> æ˜¯äººç±»å’Œ AI å…±äº«çš„å†…å­˜æ¡ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">##Â ä»»åŠ¡æ‰§è¡Œè®¡åˆ’
-Â <span class="hljs-selector-attr">[x]</span>Â é˜¶æ®µä¸€ï¼šè§£æç”¨æˆ·ä¸Šä¼ çš„Â CSVÂ æ–‡ä»¶Â (å·²å®Œæˆ)
-Â <span class="hljs-selector-attr">[Â ]</span>Â é˜¶æ®µäºŒï¼šæ¸…æ´—æ•°æ®ï¼Œå»é™¤ç©ºè¡ŒÂ (AIÂ å½“å‰ç„¦ç‚¹)
-Â <span class="hljs-selector-attr">[Â ]</span>Â é˜¶æ®µä¸‰ï¼šç”Ÿæˆåˆ†æå›¾è¡¨Â (ç­‰å¾…ä¸­)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0b7db4a0ae34429aeb8f32b9ac2fc89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ55-z5rWB5rWq6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769519294&amp;x-signature=r9xkt3ORQc0PGr%2BW591iuPCdzHI%3D" alt="c7a606e4d2508042251b0a1f62c1329b.png" loading="lazy"/></p>
<p><strong>ã€Œæ·±åº¦è§£æï¼šã€</strong></p>
<ol>
<li><strong>ã€Œè¯»å–ï¼šã€</strong> AI æ‰«ææ–‡ä»¶ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªæœªå‹¾é€‰çš„ <code>[ ]</code>ã€‚</li>
<li><strong>ã€Œæ‰§è¡Œï¼šã€</strong> ä¸“æ³¨æ‰§è¡Œè¯¥ä»»åŠ¡ã€‚</li>
<li><strong>ã€Œå†™å…¥ï¼šã€</strong> ä»»åŠ¡å®Œæˆï¼ŒAI è‡ªåŠ¨ä¿®æ”¹æ–‡ä»¶ä¸º <code>[x]</code>ã€‚ è¿™ä¸ªç®€å•çš„ ASCII å­—ç¬¦å˜åŒ–ï¼Œæ„æˆäº†ä¸€ä¸ª**ã€Œå›¾çµå®Œå¤‡çš„çŠ¶æ€æœºã€**ã€‚</li>
</ol>
<h4 data-id="heading-7">ğŸ“‚ 4. <code>llms.txt</code> â€”â€” å®šä¹‰â€œåœ°å›¾â€ (The Map)</h4>
<p>è¿™æ˜¯ Anthropic å’Œ OpenAI æ­£åœ¨æ¨è¡Œçš„**ã€Œäº’è”ç½‘æ–°æ ‡å‡†ã€<strong>ã€‚ è™½ç„¶å®ƒçš„åç¼€æ˜¯ <code>.txt</code>ï¼ˆä¸ºäº†å…¼å®¹æ‰€æœ‰æœåŠ¡å™¨ï¼‰ï¼Œä½†å…¶è§„èŒƒæ˜ç¡®è¦æ±‚ï¼š</strong>ã€Œå†…å®¹å¿…é¡»æ˜¯ Markdownã€‚ã€**</p>
<p>å®ƒå°±åƒæ˜¯ç»™ AI çœ‹çš„â€œç±³å…¶æ—æŒ‡å—â€ã€‚ å¦‚æœä¸€ä¸ª AI è®¿é—®ä½ çš„å¼€æºé¡¹ç›®ï¼Œå®ƒä¸ä¼šåƒæ— å¤´è‹è‡ä¸€æ ·ä¹±æ’ã€‚å®ƒä¼šé¦–å…ˆå¯»æ‰¾ <code>/llms.txt</code>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">#Â ProjectÂ Map</span>
<span class="hljs-quote">&gt;Â æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„Â RustÂ WebÂ æ¡†æ¶ã€‚</span>

<span class="hljs-section">##Â CoreÂ Concept</span>
<span class="hljs-bullet">-</span>Â [<span class="hljs-string">è·¯ç”±ç³»ç»Ÿ</span>](<span class="hljs-link">./docs/router.md</span>)Â -Â æ ¸å¿ƒè·¯ç”±é€»è¾‘
<span class="hljs-bullet">-</span>Â [<span class="hljs-string">ä¸­é—´ä»¶</span>](<span class="hljs-link">./docs/middleware.md</span>)Â -Â è¯·æ±‚æ‹¦æˆªæœºåˆ¶
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0680a613ce9466e90b383583671edf0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ55-z5rWB5rWq6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769519294&amp;x-signature=uxxDkCyKCg6o6Zg0hPhRUaTejPg%3D" alt="659dd835838611fb6198b3ea5b0e45b8.png" loading="lazy"/></p>
<p><strong>ã€Œæ·±åº¦è§£æï¼šã€</strong> ä¼ ç»Ÿçš„ Sitemap.xml åªæœ‰é“¾æ¥ï¼Œæ²¡æœ‰è¯­ä¹‰ã€‚è€Œ Markdown æ ¼å¼çš„ <code>llms.txt</code> æä¾›äº†**ã€Œä¸Šä¸‹æ–‡ï¼ˆContextï¼‰ã€**ã€‚AI é€šè¿‡é˜…è¯»å®ƒï¼Œèƒ½åœ¨æ¶ˆè€—æå°‘ Token çš„æƒ…å†µä¸‹ï¼Œå»ºç«‹èµ·å¯¹æ•´ä¸ªé¡¹ç›®çš„å…¨æ™¯è®¤çŸ¥ã€‚</p>
<h4 data-id="heading-8">ğŸ“‚ 5. <code>*.mermaid</code> in Markdown â€”â€” å®šä¹‰â€œè“å›¾â€ (The Visualization)</h4>
<p>AI æ²¡æœ‰æ‰‹ï¼Œç”»ä¸äº†å›¾ï¼Ÿ é”™ã€‚Markdown å†…åµŒçš„ <strong>ã€ŒMermaidã€</strong> è¯­æ³•ï¼Œè®© AI æ‹¥æœ‰äº†è§†è§‰æ€ç»´ã€‚</p>
<pre><code class="hljs language-rust" lang="rust">sequenceDiagram
Â Â Â Â User<span class="hljs-punctuation">-&gt;</span>&gt;+AuthServer:Â å‘é€Â Token
Â Â Â Â AuthServer-<span class="hljs-punctuation">-&gt;</span>&gt;-User:Â éªŒè¯é€šè¿‡Â (<span class="hljs-number">200</span>Â OK)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/beef74c96b8f4bbf999789266c3ac60b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ55-z5rWB5rWq6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769519294&amp;x-signature=sfmPwtwBJ6u3ElLoo3Ogc0wpncc%3D" alt="338367e47ba54c5ff41beb3a0d635cf2.png" loading="lazy"/>
<strong>ã€Œæ·±åº¦è§£æï¼šã€</strong> è¿™æ˜¯æ–‡æœ¬åˆ°å›¾å½¢çš„**ã€Œé›¶æŸè€—è½¬æ¢ã€**ã€‚AI åœ¨â€œæ€è€ƒâ€æ¶æ„æ—¶ï¼Œç›´æ¥ç”Ÿæˆè¿™æ®µ Markdown ä»£ç ï¼Œäººç±»çœ‹åˆ°çš„å°±æ˜¯æ¸…æ™°çš„æ—¶åºå›¾ã€‚Markdown æŠ¹å¹³äº†â€œä»£ç â€ä¸â€œå›¾è¡¨â€çš„é¸¿æ²Ÿã€‚</p>
<h3 data-id="heading-9">4. ä¸ªäººè¿›åŒ–ï¼šObsidian ä¸ Graph RAG</h3>
<p>ç†è§£äº†ä¸Šé¢è¿™äº›ï¼Œä½ å†çœ‹ä½ ç”µè„‘é‡Œçš„ <strong>ã€ŒObsidianã€</strong> æˆ– <strong>ã€ŒLogseqã€</strong>ï¼Œå®ƒä»¬å°±ä¸å†æ˜¯ç®€å•çš„ç¬”è®°è½¯ä»¶äº†ã€‚</p>
<p>å®ƒä»¬æ˜¯ä½ ä¸ªäººçš„ <strong>ã€ŒRAGï¼ˆRetrieval-Augmented Generationï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æ•°æ®ä¸­å¿ƒã€</strong>ã€‚</p>
<ul>
<li>
<p><strong>ã€ŒWord/PDFï¼šã€</strong> æ˜¯â€œæ­»â€çš„æ•°æ®ã€‚AI å¾ˆéš¾è§£æå…¶ä¸­çš„é€»è¾‘å…³è”ï¼Œæ ¼å¼å™ªéŸ³å¤ªå¤§ã€‚</p>
</li>
<li>
<p><strong>ã€ŒMarkdown ç¬”è®°ï¼šã€</strong> æ˜¯â€œæ´»â€çš„æ•°æ®ã€‚</p>
<ul>
<li><code>[[åŒå‘é“¾æ¥]]</code> æ„æˆäº†çŸ¥è¯†çš„**ã€Œå›¾è°±ï¼ˆGraphï¼‰ã€**ã€‚</li>
<li><code># æ ‡ç­¾</code> æ„æˆäº†çŸ¥è¯†çš„**ã€Œåˆ†ç±»ç»´åº¦ã€**ã€‚</li>
</ul>
</li>
</ul>
<p>å½“ä½ ç§¯ç´¯äº† 1000 ç¯‡ Markdown ç¬”è®°ï¼Œæœªæ¥çš„ AI åŠ©ç†ï¼ˆPersonal AIï¼‰å¯ä»¥ç›´æ¥æŒ‚è½½ä½ çš„ç¬”è®°åº“ã€‚å› ä¸ºå®ƒè¯»å¾—æ‡‚ Markdown çš„**ã€Œæ˜¾æ€§ç»“æ„ã€**ï¼Œå®ƒèƒ½ç¬é—´æå–ä½ çš„æ€ç»´æ¨¡å‹ï¼Œå›ç­”è¯¸å¦‚â€œæ ¹æ®æˆ‘è¿‡å»ä¸‰å¹´çš„æ—¥è®°ï¼Œæˆ‘é€šå¸¸åœ¨å‡ æœˆä»½æƒ…ç»ªæœ€ä½è½ï¼Ÿâ€è¿™æ ·æ·±åº¦çš„é—®é¢˜ã€‚</p>
<p><strong>ã€Œä½ ä»Šå¤©å†™ä¸‹çš„æ¯ä¸€è¡Œ Markdownï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯åœ¨ä¸ºä½ æœªæ¥çš„â€œæ•°å­—åˆ†èº«â€ç¼–å†™è®­ç»ƒæ•°æ®ã€‚ã€</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2194e81cb8c4f19a35f17a2edfd88b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ55-z5rWB5rWq6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769519294&amp;x-signature=JS3NR2FqIcRSqIxHFMrtYBavC5A%3D" alt="4c6f73a37deb65c8c8f32d8ebfc9b387.png" loading="lazy"/></p>
<h3 data-id="heading-10">5. ç»“è¯­ï¼šå¤§é“è‡³ç®€çš„èƒœåˆ©</h3>
<p>Markdown æ²¡æœ‰å¤æ‚çš„ç¼–è¯‘å™¨ï¼Œæ²¡æœ‰åºå¤§çš„ IDEï¼Œæ²¡æœ‰ç”±äºç‰ˆæœ¬è¿­ä»£å¯¼è‡´çš„å…¼å®¹æ€§åœ°ç‹±ã€‚ å®ƒç®€å•å¦‚ç©ºæ°”ã€‚</p>
<p>ä½†æ­£æ˜¯è¿™ç§æè‡´çš„ç®€å•ï¼Œè®©å®ƒç©¿é€äº†ç¼–ç¨‹è¯­è¨€çš„å£å’ï¼ˆä»»ä½•è¯­è¨€éƒ½èƒ½å¤„ç†å­—ç¬¦ä¸²ï¼‰ï¼Œç©¿é€äº†å¹³å°çš„å›´å¢™ï¼ˆWindows/Mac/Linux é€šåƒï¼‰ï¼Œæœ€ç»ˆç©¿é€äº†ç¢³åŸºç”Ÿå‘½ä¸ç¡…åŸºç”Ÿå‘½çš„ç•Œé™ã€‚</p>
<p>åœ¨ AI æ—¶ä»£ï¼ŒæŒæ¡ Markdownï¼Œä¸æ˜¯ä¸ºäº†è®©ä½ çš„åšå®¢æ›´å¥½çœ‹ã€‚ <strong>ã€Œè€Œæ˜¯ä¸ºäº†æŒæ¡ä¸€ç§èƒ½åŒæ—¶æŒ‡æŒ¥äººç±»ç›´è§‰å’Œæœºå™¨é€»è¾‘çš„â€œé€šå¤©å¡”è¯­è¨€â€ã€‚ã€</strong></p>
<p>æ‰€ä»¥ï¼Œåˆ«å†åªæŠŠå®ƒå½“æ’ç‰ˆå·¥å…·äº†ã€‚ <strong>ã€Œæ‰“å¼€ä½ çš„ç¼–è¾‘å™¨ï¼Œè®¤çœŸå†™ä¸‹é‚£ä¸ª <code>#</code>ã€‚ä½ æ­£åœ¨ç¼–å†™æœªæ¥ã€‚ã€</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude Code ç¬¬å…­ç¯‡ï¼šè‡ªå®šä¹‰Windowsç³»ç»Ÿé€šçŸ¥ï¼]]></title>    <link>https://juejin.cn/post/7597252004713857066</link>    <guid>https://juejin.cn/post/7597252004713857066</guid>    <pubDate>2026-01-20T13:36:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597252004713857066" data-draft-id="7597276695403479081" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude Code ç¬¬å…­ç¯‡ï¼šè‡ªå®šä¹‰Windowsç³»ç»Ÿé€šçŸ¥ï¼"/> <meta itemprop="keywords" content="Claude,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-20T13:36:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”²ç»´æ–¯"/> <meta itemprop="url" content="https://juejin.cn/user/63109670111066"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude Code ç¬¬å…­ç¯‡ï¼šè‡ªå®šä¹‰Windowsç³»ç»Ÿé€šçŸ¥ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/63109670111066/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”²ç»´æ–¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T13:36:34.000Z" title="Tue Jan 20 2026 13:36:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å½“ä½ å¼€å§‹ä½¿ç”¨ Claude Code ä¹‹åï¼Œè‚¯å®šä¼šé‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼š</p>
<p>è®© Claude Code æ‰§è¡Œä¸€ä¸ªè€—æ—¶ä»»åŠ¡ï¼Œç„¶ååˆ‡æ¢åˆ°å…¶ä»–çª—å£å·¥ä½œï¼Œç­‰ä½ æƒ³èµ·æ¥å›å»çœ‹çš„æ—¶å€™ï¼Œæ‰å‘ç°å®ƒæ—©å°±å®Œæˆäº†ã€‚</p>
<p>è¿˜æœ‰æ›´ç¦»è°±çš„æ˜¯ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/deb7ad0916904096b36305092e3af9fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sy57u05pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769520993&amp;x-signature=6GEA3Fy%2FXWVgiprnGgmCHZ6%2Fymc%3D" alt="" loading="lazy"/></p>
<p>ä½ æäº†ä¸€ä¸ªå¼€å‘éœ€æ±‚ï¼Œå°±åˆ‡å…¶ä»–è½¯ä»¶äº†ï¼Œå¥½ä¹…ä¹‹åä½ æƒ³èµ·æ¥ï¼Œå‘ç°å®ƒæ ¹æœ¬å°±æ²¡æœ‰åŠ¨å·¥ï¼Œè€Œä¸”åœ¨ç­‰ä½ æˆæƒã€‚ç›´æ¥æµªè´¹ä¸€ä¸ªä¸Šåˆçš„æ—¶é—´ï¼Œå’Œ 5 ä¸ªå°æ—¶çš„é…é¢ã€‚å“ˆå“ˆï¼</p>
<p><strong>æˆ‘ä»¬éå¸¸éœ€è¦ä¸€ä¸ªæ˜ç¡®çš„é€šçŸ¥ä¿¡æ¯ï¼Œè®© Claude Code é«˜æ•ˆå·¥ä½œï¼Œä¸æ‘¸é±¼ã€‚</strong></p>
<h2 data-id="heading-0">Claude Code å†…ç½®é€šçŸ¥åŠŸèƒ½</h2>
<p>å¾ˆæ˜¾ç„¶ Claude Codeï¼ˆCCï¼‰ä¹Ÿè€ƒè™‘åˆ°äº†è¿™ä¸€ç‚¹ï¼Œæ‰€ä»¥å†…ç½®äº†ä¸€ä¸ªé€šçŸ¥åŠŸèƒ½ã€‚å¯ä»¥é€šè¿‡ <code>/config</code> æ¥è¿›è¡Œè®¾ç½®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4839d0e0008f4716a7e1d32379ec4bac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sy57u05pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769520993&amp;x-signature=5ccHh6eCysMYCxefHfCIgbPfWXU%3D" alt="" loading="lazy"/></p>
<p>è¾“å…¥å‘½ä»¤ä¹‹åï¼Œå¯ä»¥æ‰¾åˆ°ä¸€ä¸ª notifications é€‰é¡¹ã€‚å¯ä»¥é€šè¿‡è¿™ä¸ªé€‰é¡¹æ¥è¿›è¡Œè®¾ç½®ã€‚</p>
<p>è¿™ä¸ªé€‰é¡¹é»˜è®¤ä¸º autoï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰å¥½å‡ ç§é€šçŸ¥æ–¹å¼ã€‚</p>





















<table><thead><tr><th>å¯é€‰é¡¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>terminal_bell</code></td><td>ç»ˆç«¯å“é“ƒï¼ˆå‘å‡ºâ€œå®â€çš„å£°éŸ³ï¼‰</td></tr><tr><td><code>iterm2</code></td><td>iTerm2 ä¸“ç”¨é€šçŸ¥ï¼ˆä»… macOSï¼‰</td></tr><tr><td><code>iterm2_with_bell</code></td><td>iTerm2 é€šçŸ¥ + å“é“ƒ</td></tr></tbody></table>
<p>ä½œä¸º Windows ç”¨æˆ·ï¼Œåªæœ‰é€‰æ‹© Terminal Bell æ‰ä¼šæœ‰å“åŠ¨ã€‚</p>
<p>Claude Code ä¼šåœ¨ä»¥ä¸‹åœºæ™¯å‘é€é€šçŸ¥ï¼š</p>

























<table><thead><tr><th>ç±»å‹</th><th>è§¦å‘æ—¶æœº</th></tr></thead><tbody><tr><td><code>permission_prompt</code></td><td>éœ€è¦ä½ å®¡æ‰¹æƒé™æ—¶ï¼ˆå¦‚æ‰§è¡Œå‘½ä»¤ã€å†™å…¥æ–‡ä»¶ï¼‰</td></tr><tr><td><code>idle_prompt</code></td><td>Claude ç­‰å¾…ä½ è¾“å…¥è¶…è¿‡ 60 ç§’æ—¶</td></tr><tr><td><code>elicitation_dialog</code></td><td>MCP å·¥å…·éœ€è¦ä½ è¾“å…¥ä¿¡æ¯æ—¶</td></tr><tr><td><code>auth_success</code></td><td>è®¤è¯æˆåŠŸæ—¶</td></tr></tbody></table>
<h2 data-id="heading-1">è‡ªå®šä¹‰ Claude Code é€šçŸ¥</h2>
<p>é€šè¿‡å†…ç½®çš„é€šçŸ¥åŠŸèƒ½ï¼Œå¯ä»¥è§£å†³ä¸€äº›é—®é¢˜ã€‚</p>
<p><strong>ä½†æ˜¯è¿™ä¸ªé€šçŸ¥çš„æ•ˆæœéå¸¸æœ‰é™ã€‚</strong></p>
<p>é¦–å…ˆï¼Œå®ƒåªæœ‰ duang çš„ä¸€å£°ï¼Œæ²¡æœ‰ä»»ä½•å…¶ä»–æç¤ºï¼Œå¾ˆå®¹æ˜“è¢«å¿½ç•¥ã€‚</p>
<p>å…¶æ¬¡ï¼Œä»»åŠ¡ç»“æŸçš„æ—¶å€™ï¼Œè¿ duang çš„ä¸€å£°éƒ½æ²¡æœ‰ã€‚</p>
<p>è¿™æ ·è‚¯å®šä¸è¡Œï¼</p>
<p>ç»è¿‡åˆ†æå‘ç°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ CC çš„ Hook äº‹ä»¶æ¥ä¼˜åŒ–é€šçŸ¥åŠŸèƒ½ã€‚</p>
<p><strong>Hooks æ˜¯ CC æä¾›çš„æ‰©å±•æœºåˆ¶ï¼Œå…è®¸ä½ åœ¨ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶æ‰§è¡Œè‡ªå®šä¹‰å‘½ä»¤æˆ–è„šæœ¬ã€‚</strong></p>
<p>Hooks æ”¯æŒçš„äº‹ä»¶ï¼š</p>









































<table><thead><tr><th>äº‹ä»¶</th><th>è§¦å‘æ—¶æœº</th></tr></thead><tbody><tr><td><code>PreToolUse</code></td><td>å·¥å…·è°ƒç”¨å‰</td></tr><tr><td><code>PostToolUse</code></td><td>å·¥å…·è°ƒç”¨å</td></tr><tr><td><code>Notification</code></td><td>å‘é€é€šçŸ¥æ—¶</td></tr><tr><td><code>Stop</code></td><td>ä»»åŠ¡å®Œæˆæ—¶</td></tr><tr><td><code>SubagentStop</code></td><td>å­ä»£ç†ä»»åŠ¡å®Œæˆæ—¶</td></tr><tr><td><code>PreCompact</code></td><td>ä¸Šä¸‹æ–‡å‹ç¼©å‰</td></tr><tr><td><code>SessionStart</code></td><td>ä¼šè¯å¯åŠ¨æ—¶</td></tr><tr><td><code>SessionEnd</code></td><td>ä¼šè¯ç»“æŸæ—¶</td></tr></tbody></table>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å¤„ç† Hook äº‹ä»¶ï¼Œæ¥å¼¹å‡º Windows åŸç”Ÿé€šçŸ¥ï¼Œå°±æ˜¯å³ä¸‹è§’çš„é‚£ç§é€šçŸ¥ï¼Œé™¤äº†å£°éŸ³ä¹‹å¤–ï¼Œè¿˜ä¼šæœ‰æ˜æ˜¾çš„é€šçŸ¥æ¶ˆæ¯ã€‚</p>
<h2 data-id="heading-2">å®æˆ˜ï¼šæ‰“é€  Windows æ¡Œé¢é€šçŸ¥</h2>
<p>çŸ¥é“äº†åŸç†ä¹‹åå°±å¯ä»¥åŠ¨æ‰‹ä¿®æ”¹äº†ã€‚</p>
<h3 data-id="heading-3">ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºé€šçŸ¥è„šæœ¬</h3>
<p>æƒ³è¦è°ƒç”¨ Windows çš„ç³»ç»Ÿé€šçŸ¥ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¥½å¤šç§æ–¹å¼ã€‚æœ€ç®€å•çš„å°±æ˜¯ç›´æ¥ç”¨ PowerShell è„šæœ¬æ¥å®ç°ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬æœ€å¥½æ˜¯å…ˆåˆ›å»ºä¸€ä¸ª PowerShellï¼ˆPSï¼‰è„šæœ¬ã€‚ä¸ç”¨æ‹…å¿ƒä¸ä¼šå†™è„šæœ¬ã€‚è¿™ä¸€åˆ‡å°±äº¤ç»™ Claude Code è‡ªå·±æ¥å®Œæˆã€‚</p>
<p>ä½ åªè¦æŠŠéœ€æ±‚è¯´æ¸…æ¥šã€‚</p>
<p>ä¸ºäº†æ–¹ä¾¿å¤§å®¶å¿«é€Ÿå¤ç°ï¼Œå¿«é€Ÿä½¿ç”¨ï¼Œæˆ‘å°±ç›´æ¥è´´ AI å†™å®Œçš„ä»£ç äº†ã€‚</p>
<p>åˆ›å»ºæ–‡ä»¶ <code>windows-notification.ps1</code>ã€‚</p>
<p>ç„¶åæŠŠå®ƒæ”¾åˆ°ç”¨æˆ·ç›®å½• <code>~/.claude/hooks/</code> ä¸‹é¢ã€‚</p>
<p>é‡Œé¢å†™å…¥è„šæœ¬ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">#Â WindowsÂ NotificationÂ forÂ ClaudeÂ Code</span>
<span class="hljs-comment">#Â CompatibleÂ withÂ WindowsÂ 10/11Â usingÂ multipleÂ fallbackÂ methods</span>

<span class="hljs-title function_ invoke__">param</span>(
Â Â Â Â [<span class="hljs-keyword">string</span>]<span class="hljs-variable">$TitleÂ </span>=Â <span class="hljs-string">"ClaudeÂ Code"</span>,
Â Â Â Â [<span class="hljs-keyword">string</span>]<span class="hljs-variable">$MessageÂ </span>=Â <span class="hljs-string">"TaskÂ Completed"</span>
)

<span class="hljs-comment">#Â MethodÂ 1:Â TryÂ WindowsÂ ToastÂ NotificationÂ (WindowsÂ 10/11)</span>
<span class="hljs-function"><span class="hljs-keyword">function</span>Â <span class="hljs-title">Send</span>-<span class="hljs-title">ToastNotification</span>Â </span>{
Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â Â Â [Windows.UI.Notifications.ToastNotificationManager,Â Windows.UI.Notifications,Â ContentTypeÂ =Â WindowsRuntime]Â &gt;Â <span class="hljs-variable">$null</span>
Â Â Â Â Â Â Â Â <span class="hljs-variable">$templateÂ </span>=Â <span class="hljs-string">'&lt;toast&gt;&lt;visual&gt;&lt;bindingÂ template="ToastText02"&gt;&lt;textÂ id="1"&gt;'</span>Â +Â <span class="hljs-variable">$TitleÂ </span>+Â <span class="hljs-string">'&lt;/text&gt;&lt;textÂ id="2"&gt;'</span>Â +Â <span class="hljs-variable">$MessageÂ </span>+Â <span class="hljs-string">'&lt;/text&gt;&lt;/binding&gt;&lt;/visual&gt;&lt;audioÂ src="ms-winsoundevent:Notification.Default"/&gt;&lt;/toast&gt;'</span>

Â Â Â Â Â Â Â Â <span class="hljs-variable">$xmlÂ </span>=Â New-ObjectÂ Windows.Data.Xml.Dom.XmlDocument
Â Â Â Â Â Â Â Â <span class="hljs-variable">$xml</span>.<span class="hljs-title function_ invoke__">LoadXml</span>(<span class="hljs-variable">$template</span>)
Â Â Â Â Â Â Â Â <span class="hljs-variable">$toastÂ </span>=Â [Windows.UI.Notifications.ToastNotification]::<span class="hljs-keyword">new</span>(<span class="hljs-variable">$xml</span>)
Â Â Â Â Â Â Â Â [Windows.UI.Notifications.ToastNotificationManager]::<span class="hljs-title function_ invoke__">CreateToastNotifier</span>(<span class="hljs-string">'ClaudeCode'</span>).<span class="hljs-title function_ invoke__">Show</span>(<span class="hljs-variable">$toast</span>)
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-variable">$true</span>
Â Â Â Â }Â <span class="hljs-keyword">catch</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-variable">$false</span>
Â Â Â Â }
}

<span class="hljs-comment">#Â MethodÂ 2:Â UseÂ WindowsÂ FormsÂ BalloonÂ NotificationÂ (Fallback)</span>
<span class="hljs-function"><span class="hljs-keyword">function</span>Â <span class="hljs-title">Send</span>-<span class="hljs-title">BalloonNotification</span>Â </span>{
Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â Â Â Add-TypeÂ -AssemblyNameÂ System.Windows.Forms
Â Â Â Â Â Â Â Â Add-TypeÂ -AssemblyNameÂ System.Drawing

Â Â Â Â Â Â Â Â <span class="hljs-variable">$notificationÂ </span>=Â New-ObjectÂ System.Windows.Forms.NotifyIcon
Â Â Â Â Â Â Â Â <span class="hljs-variable">$notification</span>.IconÂ =Â [System.Drawing.SystemIcons]::<span class="hljs-variable constant_">Information</span>
Â Â Â Â Â Â Â Â <span class="hljs-variable">$notification</span>.BalloonTipIconÂ =Â [System.Windows.Forms.ToolTipIcon]::<span class="hljs-variable constant_">Info</span>
Â Â Â Â Â Â Â Â <span class="hljs-variable">$notification</span>.BalloonTipTitleÂ =Â <span class="hljs-variable">$Title</span>
Â Â Â Â Â Â Â Â <span class="hljs-variable">$notification</span>.BalloonTipTextÂ =Â <span class="hljs-variable">$Message</span>
Â Â Â Â Â Â Â Â <span class="hljs-variable">$notification</span>.VisibleÂ =Â <span class="hljs-variable">$true</span>
Â Â Â Â Â Â Â Â <span class="hljs-variable">$notification</span>.<span class="hljs-title function_ invoke__">ShowBalloonTip</span>(<span class="hljs-number">5000</span>)
Â Â Â Â Â Â Â Â Start-SleepÂ -MillisecondsÂ <span class="hljs-number">5000</span>
Â Â Â Â Â Â Â Â <span class="hljs-variable">$notification</span>.<span class="hljs-title function_ invoke__">Dispose</span>()
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-variable">$true</span>
Â Â Â Â }Â <span class="hljs-keyword">catch</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-variable">$false</span>
Â Â Â Â }
}

<span class="hljs-comment">#Â TryÂ methodsÂ inÂ order</span>
<span class="hljs-variable">$successÂ </span>=Â Send-ToastNotification
<span class="hljs-keyword">if</span><span class="hljs-title function_ invoke__">Â </span>(-notÂ <span class="hljs-variable">$success</span>)Â {
Â Â Â Â Write-HostÂ <span class="hljs-string">"ToastÂ notificationÂ failed,Â tryingÂ balloonÂ notification..."</span>
Â Â Â Â <span class="hljs-variable">$successÂ </span>=Â Send-BalloonNotification
}

<span class="hljs-keyword">if</span><span class="hljs-title function_ invoke__">Â </span>(<span class="hljs-variable">$success</span>)Â {
Â Â Â Â Write-HostÂ <span class="hljs-string">"NotificationÂ sentÂ successfully"</span>
Â Â Â Â <span class="hljs-keyword">exit</span>Â <span class="hljs-number">0</span>
}Â <span class="hljs-keyword">else</span>Â {
Â Â Â Â Write-HostÂ <span class="hljs-string">"AllÂ notificationÂ methodsÂ failed"</span>
Â Â Â Â <span class="hljs-keyword">exit</span>Â <span class="hljs-number">1</span>
}
</code></pre>
<p>è¿™ä¸ªè„šæœ¬å®ç°äº†å¦‚ä¸‹åŠŸèƒ½ï¼š</p>
<ol>
<li>ä¼˜å…ˆä½¿ç”¨ Windows 10/11 çš„ Toast é€šçŸ¥ï¼ˆç°ä»£åŒ–å¼¹çª—ï¼‰</li>
<li>å¦‚æœå¤±è´¥ï¼Œå›é€€åˆ°ç»å…¸çš„æ°”æ³¡é€šçŸ¥</li>
<li>æ”¯æŒè‡ªå®šä¹‰æ ‡é¢˜å’Œæ¶ˆæ¯å†…å®¹</li>
</ol>
<h3 data-id="heading-4">ç¬¬äºŒæ­¥ï¼šé…ç½® Hooks</h3>
<p>å®ç°äº†å…·ä½“çš„è„šæœ¬å¹¶æµ‹è¯•æˆåŠŸä¹‹åï¼Œå°±å¯ä»¥æ·»åŠ è§¦å‘é…ç½®äº†ã€‚</p>
<p>ç¼–è¾‘ <code>~/.claude/settings.json</code>ï¼Œæ·»åŠ  Hooks é…ç½®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
Â Â <span class="hljs-attr">"hooks"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">{</span>
Â Â Â Â <span class="hljs-attr">"Stop"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">[</span>
Â Â Â Â Â Â <span class="hljs-punctuation">{</span>
Â Â Â Â Â Â Â Â <span class="hljs-attr">"hooks"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">[</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-punctuation">{</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"command"</span><span class="hljs-punctuation">,</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exeÂ -ExecutionPolicyÂ BypassÂ -FileÂ "</span>%USERPROFILE%\.claude\hooks\windows-notification.ps1<span class="hljs-string">"Â -TitleÂ "</span>ClaudeÂ Code<span class="hljs-string">"Â -MessageÂ "</span>ä»»åŠ¡å·²å®Œæˆ<span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">"timeout"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-number">10</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-punctuation">}</span>
Â Â Â Â Â Â Â Â <span class="hljs-punctuation">]</span>
Â Â Â Â Â Â <span class="hljs-punctuation">}</span>
Â Â Â Â <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
Â Â Â Â <span class="hljs-attr">"Notification"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">[</span>
Â Â Â Â Â Â <span class="hljs-punctuation">{</span>
Â Â Â Â Â Â Â Â <span class="hljs-attr">"matcher"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"permission_prompt"</span><span class="hljs-punctuation">,</span>
Â Â Â Â Â Â Â Â <span class="hljs-attr">"hooks"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">[</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-punctuation">{</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"command"</span><span class="hljs-punctuation">,</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exeÂ -ExecutionPolicyÂ BypassÂ -FileÂ "</span>%USERPROFILE%\.claude\hooks\windows-notification.ps1<span class="hljs-string">"Â -TitleÂ "</span>ClaudeÂ Code<span class="hljs-string">"Â -MessageÂ "</span>éœ€è¦æƒé™å®¡æ‰¹<span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">"timeout"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-number">10</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-punctuation">}</span>
Â Â Â Â Â Â Â Â <span class="hljs-punctuation">]</span>
Â Â Â Â Â Â <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
Â Â Â Â Â Â <span class="hljs-punctuation">{</span>
Â Â Â Â Â Â Â Â <span class="hljs-attr">"matcher"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"idle_prompt"</span><span class="hljs-punctuation">,</span>
Â Â Â Â Â Â Â Â <span class="hljs-attr">"hooks"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">[</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-punctuation">{</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"command"</span><span class="hljs-punctuation">,</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exeÂ -ExecutionPolicyÂ BypassÂ -FileÂ "</span>%USERPROFILE%\.claude\hooks\windows-notification.ps1<span class="hljs-string">"Â -TitleÂ "</span>ClaudeÂ Code<span class="hljs-string">"Â -MessageÂ "</span>ç­‰å¾…ä½ çš„è¾“å…¥<span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">"timeout"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-number">10</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-punctuation">}</span>
Â Â Â Â Â Â Â Â <span class="hljs-punctuation">]</span>
Â Â Â Â Â Â <span class="hljs-punctuation">}</span>
Â Â Â Â <span class="hljs-punctuation">]</span>
Â Â <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-5">é…ç½®è¯´æ˜</h3>
<p>æˆ‘è¿™é‡Œæ˜¯é…ç½®äº†ä¸¤ç±» Hookã€‚</p>
<ol>
<li>Stop Hook â€”â€” ä»»åŠ¡å®Œæˆé€šçŸ¥</li>
</ol>

<pre><code class="hljs language-arduino" lang="arduino">è§¦å‘æ¡ä»¶ï¼šClaudeÂ CodeÂ å®Œæˆå“åº”æ—¶
é€šçŸ¥æ¶ˆæ¯ï¼š<span class="hljs-string">"ä»»åŠ¡å·²å®Œæˆ"</span>
ä½¿ç”¨åœºæ™¯ï¼šæ‰§è¡Œé•¿æ—¶é—´ä»»åŠ¡åæé†’ä½ å›æ¥æŸ¥çœ‹ç»“æœ
</code></pre>
<p>2.  Notification Hook â€”â€” éœ€è¦äº¤äº’é€šçŸ¥</p>
<p>è¿™ä¸ª Hook éœ€è¦æŒ‡å®š <code>matcher</code> æ¥åŒ¹é…å…·ä½“çš„é€šçŸ¥ç±»å‹ï¼š</p>




















<table><thead><tr><th>matcher</th><th>è§¦å‘æ¡ä»¶</th><th>é€šçŸ¥æ¶ˆæ¯</th></tr></thead><tbody><tr><td><code>permission_prompt</code></td><td>éœ€è¦ä½ å®¡æ‰¹æƒé™æ—¶</td><td>"éœ€è¦æƒé™å®¡æ‰¹"</td></tr><tr><td><code>idle_prompt</code></td><td>ç­‰å¾…ä½ è¾“å…¥è¶…è¿‡ 60 ç§’</td><td>"ç­‰å¾…ä½ çš„è¾“å…¥"</td></tr></tbody></table>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼š<code>idle_prompt</code> çš„ 60 ç§’ç­‰å¾…æ—¶é—´æ˜¯å›ºå®šçš„ï¼Œæ— æ³•ä¿®æ”¹ã€‚</p>
</blockquote>
<h2 data-id="heading-6">æ•ˆæœå±•ç¤º</h2>
<p>é…ç½®å®Œæˆåï¼Œé‡å¯ Claude Codeï¼Œå°±å¯ä»¥ä½“éªŒä¸€ä¸‹äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c53bc011ce9d497abb7303187ba11c2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sy57u05pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769520993&amp;x-signature=bUxcw0aUPXW9RYxs0%2FRlTBBFkqI%3D" alt="" loading="lazy"/></p>
<p>å…·ä½“è§¦å‘æ—¶æœºä¸ºï¼š</p>
<ol>
<li><strong>ä»»åŠ¡å®Œæˆæ—¶</strong> â€”â€” æ¡Œé¢å³ä¸‹è§’å¼¹å‡ºé€šçŸ¥ï¼Œå‘Šè¯‰ä½ å¯ä»¥å›æ¥çœ‹ç»“æœäº†</li>
<li><strong>éœ€è¦æƒé™å®¡æ‰¹æ—¶</strong> â€”â€” ç«‹å³å¼¹å‡ºé€šçŸ¥ï¼Œä¸ä¼šé”™è¿‡ä»»ä½•éœ€è¦ç¡®è®¤çš„æ“ä½œ</li>
<li><strong>é•¿æ—¶é—´æœªå“åº”æ—¶</strong> â€”â€” 60 ç§’åå¼¹å‡ºæé†’ï¼Œé¿å… Claude ä¸€ç›´å¹²ç­‰</li>
</ol>
<p>è¿™æ ·è®¾ç½®ä¹‹åï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒé”™è¿‡ Claude Code çš„æ¶ˆæ¯äº†ï¼</p>
<p>æ€ç»´æ‰©æ•£ä¸€ä¸‹ï¼Œé™¤äº†è°ƒç”¨ç³»ç»Ÿé€šçŸ¥ä¹‹å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ç»™ä¸åŒäº‹ä»¶æ·»åŠ ä¸€ä¸‹å¥½ç©çš„éŸ³æ•ˆæˆ–è€…å½•éŸ³ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼š</p>
<p>è¿™ä¸ª hook æœºåˆ¶ä¼¼ä¹åªæœ‰ç”¨ Claude Code å®˜æ–¹æ¨¡å‹æ‰èƒ½è§¦å‘ï¼Œåˆ‡æ¢ GLM-4.7 ç­‰ç¬¬ä¸‰æ–¹æ¨¡å‹ä¹‹åï¼Œæ— æ³•è§¦å‘ã€‚</p>
<p>å®˜æ–¹çš„ä¼˜åŠ¿ï¼Œä½“ç°å‡ºæ¥äº†ã€‚</p>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p>é€šè¿‡ Hooks æœºåˆ¶ï¼Œæˆ‘ä»¬æˆåŠŸè®© Claude Code åœ¨ Windows ä¸Šæ‹¥æœ‰äº†åŸç”Ÿæ¡Œé¢é€šçŸ¥èƒ½åŠ›ï¼š</p>





















<table><thead><tr><th>åŠŸèƒ½</th><th>å®ç°æ–¹å¼</th></tr></thead><tbody><tr><td>ä»»åŠ¡å®Œæˆé€šçŸ¥</td><td><code>Stop</code> Hook</td></tr><tr><td>æƒé™å®¡æ‰¹é€šçŸ¥</td><td><code>Notification</code> Hook + <code>permission_prompt</code> matcher</td></tr><tr><td>ç­‰å¾…è¾“å…¥é€šçŸ¥</td><td><code>Notification</code> Hook + <code>idle_prompt</code> matcher</td></tr></tbody></table>
<p>Hooks çš„èƒ½åŠ›è¿œä¸æ­¢äºæ­¤ï¼Œä½ è¿˜å¯ä»¥ç”¨å®ƒæ¥ï¼š</p>
<ul>
<li>è‡ªåŠ¨è®°å½•æ“ä½œæ—¥å¿—</li>
<li>åœ¨ç‰¹å®šæ“ä½œå‰è¿›è¡Œé¢å¤–æ£€æŸ¥</li>
<li>ä¸å…¶ä»–å·¥å…·é›†æˆï¼ˆå¦‚ Slack é€šçŸ¥ã€é‚®ä»¶æé†’ç­‰ï¼‰</li>
</ul>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ æ‰“é€ æ›´é«˜æ•ˆçš„ Claude Code ä½¿ç”¨ä½“éªŒï¼</p>
<p><strong>ç›¸å…³æ–‡ç« ï¼š</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzI2MzQ3MzUxMg%3D%3D%26mid%3D2247484171%26idx%3D1%26sn%3D86cad6cf87860a9da4b85e2cc2516193%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzI2MzQ3MzUxMg==&amp;mid=2247484171&amp;idx=1&amp;sn=86cad6cf87860a9da4b85e2cc2516193&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Claude Code æ–°æ‰‹å…¥é—¨ï¼Œå®˜æ–¹æŒ‡å¼•ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzI2MzQ3MzUxMg%3D%3D%26mid%3D2247484127%26idx%3D1%26sn%3D3ee9853b133d32a57f887e89c2c30bf2%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzI2MzQ3MzUxMg==&amp;mid=2247484127&amp;idx=1&amp;sn=3ee9853b133d32a57f887e89c2c30bf2&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Claude Code æ¢ä¸Šå›½äº§å¼•æ“GLM4.7</a>ï¼</p>
<p>â€¦â€¦</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FGTHz88RPJXQE2Q6DjYDQZA" target="_blank" title="https://mp.weixin.qq.com/s/GTHz88RPJXQE2Q6DjYDQZA" ref="nofollow noopener noreferrer">Claude Code ç¬¬å››ç¯‡ï¼šSKILLçš„åˆ›å»ºï¼Œå®‰è£…ï¼ŒæŸ¥çœ‹<strong>åŸåˆ›</strong></a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FAALRWTlBuWVJ9v4bAeCJDg" target="_blank" title="https://mp.weixin.qq.com/s/AALRWTlBuWVJ9v4bAeCJDg" ref="nofollow noopener noreferrer">Claude Code ç¬¬äº”ç¯‡ï¼šæ“æ§ Chrome æµè§ˆå™¨ï¼</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Windows ä¸‹ä½¿ç”¨ OpenFace å¤„ç† UBFC-rPPG æ•°æ®é›†çš„å®Œæ•´æŠ€æœ¯æ€»ç»“]]></title>    <link>https://juejin.cn/post/7597250364125298751</link>    <guid>https://juejin.cn/post/7597250364125298751</guid>    <pubDate>2026-01-20T12:50:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597250364125298751" data-draft-id="7597252004713627690" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Windows ä¸‹ä½¿ç”¨ OpenFace å¤„ç† UBFC-rPPG æ•°æ®é›†çš„å®Œæ•´æŠ€æœ¯æ€»ç»“"/> <meta itemprop="keywords" content="æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-01-20T12:50:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº‘æµ·é‡Œçš„å±±"/> <meta itemprop="url" content="https://juejin.cn/user/4174186941528174"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Windows ä¸‹ä½¿ç”¨ OpenFace å¤„ç† UBFC-rPPG æ•°æ®é›†çš„å®Œæ•´æŠ€æœ¯æ€»ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4174186941528174/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº‘æµ·é‡Œçš„å±±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T12:50:50.000Z" title="Tue Jan 20 2026 12:50:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Windows ä¸‹ä½¿ç”¨ OpenFace å¤„ç† UBFC-rPPG æ•°æ®é›†çš„å®Œæ•´æŠ€æœ¯æ€»ç»“</h2>
<h3 data-id="heading-1">èƒŒæ™¯ä¸ç ”ç©¶åŠ¨æœº</h3>
<p>è¿œç¨‹å…‰ç”µå®¹ç§¯æè®°ï¼ˆremote Photoplethysmography, rPPGï¼‰æ˜¯å½“å‰è®¡ç®—æœºè§†è§‰ä¸ç”Ÿç‰©ä¿¡å·äº¤å‰é¢†åŸŸçš„é‡è¦ç ”ç©¶æ–¹å‘ï¼Œå…¶ç›®æ ‡æ˜¯<strong>ä»…ä¾èµ–æ™®é€š RGB æ‘„åƒå¤´è§†é¢‘ï¼Œéæ¥è§¦å¼åœ°ä¼°è®¡äººä½“å¿ƒç‡ç­‰ç”Ÿç†ä¿¡å·</strong>ã€‚åœ¨æ·±åº¦å­¦ä¹ æ–¹æ³•ä¸­ï¼Œç»å¤§å¤šæ•°æ¨¡å‹éƒ½ä¾èµ–äº<strong>é«˜è´¨é‡çš„äººè„¸åŒºåŸŸï¼ˆROIï¼‰ä¸ç¨³å®šçš„äººè„¸å‡ ä½•å¯¹é½ä¿¡æ¯</strong>ã€‚</p>
<p>åœ¨è¿™ä¸€èƒŒæ™¯ä¸‹ï¼Œ<strong>OpenFace</strong> æˆä¸º rPPG ç ”ç©¶ä¸­äº‹å®ä¸Šçš„æ ‡å‡†å·¥å…·ä¹‹ä¸€ï¼Œå¸¸ç”¨äºï¼š</p>
<ul>
<li>äººè„¸æ£€æµ‹ä¸ 68 ç‚¹å…³é”®ç‚¹å®šä½</li>
<li>äººè„¸å¯¹é½ï¼ˆalignmentï¼‰</li>
<li>ç¨³å®š ROIï¼ˆé¢å¤´ã€åŒé¢Šç­‰ï¼‰æå–</li>
</ul>
<p>æœ¬æ–‡ä»¥ <strong>Windows å¹³å°</strong> ä¸ºä¾‹ï¼Œç»“åˆ <strong>UBFC-rPPG æ•°æ®é›†</strong>ï¼Œç³»ç»Ÿæ€§æ€»ç»“äº†ä» <strong>OpenFace å®‰è£… â†’ æ­£ç¡®é…ç½® â†’ å¸¸è§é—®é¢˜æ’æŸ¥ â†’ å®é™…å¯ç”¨çŠ¶æ€éªŒè¯</strong> çš„å®Œæ•´æµç¨‹ï¼Œæ—¨åœ¨ä¸ºåˆå­¦è€…æä¾›ä¸€ç¯‡å¯ç›´æ¥å¤ç°çš„æŠ€æœ¯åšå®¢çº§æ•™ç¨‹ã€‚</p>
<hr/>
<h3 data-id="heading-2">OpenFace ç®€ä»‹</h3>
<h4 data-id="heading-3">OpenFace æ˜¯ä»€ä¹ˆ</h4>
<p>OpenFace æ˜¯ä¸€ä¸ªå¼€æºçš„äººè„¸è¡Œä¸ºåˆ†æå·¥å…·åŒ…ï¼Œæ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ul>
<li>äººè„¸æ£€æµ‹ä¸è·Ÿè¸ª</li>
<li>68 ç‚¹é¢éƒ¨å…³é”®ç‚¹å®šä½ï¼ˆåŸºäº CE-CLMï¼‰</li>
<li>å¤´éƒ¨å§¿æ€ä¼°è®¡ï¼ˆposeï¼‰</li>
<li>çœ¼åŠ¨ã€è¡¨æƒ…åŠ¨ä½œå•å…ƒï¼ˆAUï¼‰åˆ†æ</li>
</ul>
<p>åœ¨ rPPG åœºæ™¯ä¸­ï¼Œ<strong>æˆ‘ä»¬åªä½¿ç”¨ OpenFace çš„äººè„¸æ£€æµ‹ä¸å…³é”®ç‚¹æ¨¡å—</strong>ï¼Œä¸æ¶‰åŠ AUã€gaze ç­‰é«˜çº§åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-4">ä¸ºä»€ä¹ˆ rPPG å¸¸ç”¨ OpenFace</h4>
<p>ç›¸æ¯”äº dlib æˆ– mediapipeï¼ŒOpenFace åœ¨ rPPG é¢†åŸŸçš„ä¼˜åŠ¿ä¸»è¦ä½“ç°åœ¨ï¼š</p>
<ul>
<li>åœ¨é•¿è§†é¢‘ä¸­å…·æœ‰è¾ƒç¨³å®šçš„ landmark è·Ÿè¸ªèƒ½åŠ›</li>
<li>å…³é”®ç‚¹åºåˆ—æ—¶é—´ä¸€è‡´æ€§å¥½ï¼Œé€‚åˆæ—¶åºå»ºæ¨¡</li>
<li>è¢«å¤§é‡ rPPG è®ºæ–‡ä¸å¼€æºä»£ç ä½¿ç”¨ï¼Œå…·æœ‰äº‹å®æ ‡å‡†åœ°ä½</li>
</ul>
<hr/>
<h3 data-id="heading-5">Windows ä¸‹æ­£ç¡®ä½¿ç”¨ OpenFace çš„å®Œæ•´æµç¨‹</h3>
<h4 data-id="heading-6">ä¸‹è½½ä¸è§£å‹</h4>
<p>æœ¬æ–‡ä½¿ç”¨çš„æ˜¯å®˜æ–¹æä¾›çš„ <strong>Windows 64 ä½é¢„ç¼–è¯‘ç‰ˆæœ¬</strong>ï¼š</p>
<pre><code class="hljs">OpenFace_2.2.0_win_x64
</code></pre>
<p>è§£å‹åç›®å½•ä¸­åº”è‡³å°‘åŒ…å«ï¼š</p>
<ul>
<li><code>FeatureExtraction.exe</code></li>
<li><code>model/</code></li>
<li><code>download_models.ps1</code></li>
</ul>
<p>æ­¤æ—¶ <strong>OpenFace è¿˜ä¸èƒ½ç›´æ¥è¿è¡Œ</strong>ã€‚</p>
<hr/>
<h4 data-id="heading-7">ç¬¬ä¸€æ¬¡è¿è¡Œä¸å…¸å‹æŠ¥é”™</h4>
<p>åœ¨ PowerShell ä¸­è¿›å…¥ OpenFace ç›®å½•åæ‰§è¡Œï¼š</p>
<pre><code class="hljs">.\FeatureExtraction.exe -h
</code></pre>
<p>å¸¸è§è¾“å‡ºé”™è¯¯ä¸ºï¼š</p>
<pre><code class="hljs language-lua" lang="lua">Could <span class="hljs-keyword">not</span> <span class="hljs-built_in">find</span> CEN patch experts
ERROR: Could <span class="hljs-keyword">not</span> <span class="hljs-built_in">load</span> the landmark detector
</code></pre>
<p>è¿™æ˜¯<strong>æ–°æ‰‹ä½¿ç”¨ OpenFace æ—¶æœ€å¸¸è§ã€ä¹Ÿæ˜¯æœ€æ ¸å¿ƒçš„é—®é¢˜</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-8">é—®é¢˜æœ¬è´¨åˆ†æï¼šä¸ºä»€ä¹ˆ OpenFace ä¼šæŠ¥é”™</h3>
<h4 data-id="heading-9">OpenFace æ¨¡å‹æ–‡ä»¶å¹¶éå®Œæ•´æ‰“åŒ…</h4>
<p>OpenFace å®˜æ–¹è¯´æ˜ä¸­æ˜ç¡®æŒ‡å‡ºï¼š</p>
<blockquote>
<p>OpenFace comes pre-packaged with most models required to run it. However, due to github file size restrictions it does not include the patch expert files required for the CE-CLM algorithm.</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š</p>
<ul>
<li><strong>CE-CLM å…³é”®ç‚¹ç®—æ³•ä¾èµ–çš„ patch experts æ¨¡å‹æ²¡æœ‰éš binaries æä¾›</strong></li>
<li>å¿…é¡»é¢å¤–ä¸‹è½½ <code>.dat</code> æ–‡ä»¶</li>
</ul>
<hr/>
<h4 data-id="heading-10">download_models.ps1 åœ¨å›½å†…å¤±è´¥çš„åŸå› </h4>
<p>å®˜æ–¹æä¾›äº†è‡ªåŠ¨ä¸‹è½½è„šæœ¬ï¼š</p>
<ul>
<li><code>download_models.ps1</code>ï¼ˆWindowsï¼‰</li>
</ul>
<p>ä½†åœ¨å›½å†…ç¯å¢ƒä¸­ï¼Œæ‰§è¡Œè¯¥è„šæœ¬é€šå¸¸ä¼šé‡åˆ°ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Invoke-WebRequest :</span> <span class="hljs-string">æ— æ³•è¿æ¥åˆ°è¿œç¨‹æœåŠ¡å™¨</span>
<span class="hljs-string">åŸºç¡€è¿æ¥å·²ç»å…³é—­</span>
</code></pre>
<p>æ ¹æœ¬åŸå› åœ¨äºï¼š</p>
<ul>
<li>æ¨¡å‹æ‰˜ç®¡åœ¨ <strong>GitHub / Google Drive / Dropbox</strong></li>
<li>å›½å†…ç½‘ç»œç¯å¢ƒä¸‹é»˜è®¤æ— æ³•ç¨³å®šè®¿é—®</li>
</ul>
<p><strong>è¿™ä¸æ˜¯æ“ä½œé”™è¯¯ï¼Œè€Œæ˜¯ç½‘ç»œç¯å¢ƒé—®é¢˜ã€‚</strong></p>
<hr/>
<h3 data-id="heading-11">æ­£ç¡®ä¸”å¯å¤ç°çš„è§£å†³æ–¹æ¡ˆï¼ˆæ‰‹åŠ¨ä¸‹è½½ï¼‰</h3>
<h4 data-id="heading-12">æ˜ç¡®éœ€è¦ä¸‹è½½å“ªäº›æ–‡ä»¶</h4>
<p>åœ¨ Windows + é¢„ç¼–è¯‘ binaries åœºæ™¯ä¸‹ï¼š</p>
<ul>
<li>âœ… åªéœ€è¦ <strong>C++ patch expertsï¼ˆ.datï¼‰</strong></li>
<li>âŒ ä¸éœ€è¦ Matlab çš„ <code>.mat</code> æ–‡ä»¶</li>
</ul>
<p>å®˜æ–¹å»ºè®®ä¸‹è½½ <strong>å…¨éƒ¨ 4 ä¸ª scale çš„æ¨¡å‹æ–‡ä»¶</strong>ï¼š</p>

























<table><thead><tr><th>scale</th><th>æ–‡ä»¶å</th></tr></thead><tbody><tr><td>0.25</td><td>cen_patches_0.25_of.dat</td></tr><tr><td>0.35</td><td>cen_patches_0.35_of.dat</td></tr><tr><td>0.50</td><td>cen_patches_0.50_of.dat</td></tr><tr><td>1.00</td><td>cen_patches_1.00_of.dat</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-13">æ­£ç¡®æ”¾ç½®è·¯å¾„ï¼ˆæå…¶é‡è¦ï¼‰</h4>
<p>å¯¹äº Windows binaries ç‰ˆæœ¬ï¼Œæ¨¡å‹æ–‡ä»¶åº”æ”¾ç½®åœ¨ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">OpenFace<span class="hljs-emphasis">_2.2.0_</span>win<span class="hljs-emphasis">_x64
â””â”€â”€ model
    â””â”€â”€ patch_</span>experts
<span class="hljs-code">        â”œâ”€â”€ cen_patches_0.25_of.dat
        â”œâ”€â”€ cen_patches_0.35_of.dat
        â”œâ”€â”€ cen_patches_0.50_of.dat
        â””â”€â”€ cen_patches_1.00_of.dat
</span></code></pre>
<p><strong>ä»»ä½•ç›®å½•å±‚çº§é”™è¯¯éƒ½ä¼šå¯¼è‡´ OpenFace ç»§ç»­æŠ¥é”™ã€‚</strong></p>
<hr/>
<h4 data-id="heading-14">æœ€ç»ˆéªŒè¯</h4>
<p>æ¨¡å‹æ–‡ä»¶æ”¾ç½®å®Œæˆåï¼Œå†æ¬¡æ‰§è¡Œï¼š</p>
<pre><code class="hljs">.\FeatureExtraction.exe -h
</code></pre>
<p>è‹¥ï¼š</p>
<ul>
<li>ä¸å†å‡ºç° <code>Could not find CEN patch experts</code></li>
<li>æ­£å¸¸æ‰“å°å‚æ•°è¯´æ˜</li>
</ul>
<p>åˆ™è¯´æ˜ <strong>OpenFace å·²åœ¨ Windows ä¸‹æ­£ç¡®é…ç½®å®Œæˆ</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-15">ä¸ UBFC-rPPG æ•°æ®é›†ç»“åˆçš„æ„ä¹‰</h3>
<p>åœ¨ UBFC-rPPG æ•°æ®å¤„ç†ä¸­ï¼ŒOpenFace é€šå¸¸ç”¨äºï¼š</p>
<ol>
<li>å¯¹æ¯ä¸€å¸§è§†é¢‘è¿›è¡Œäººè„¸æ£€æµ‹ä¸å…³é”®ç‚¹å®šä½</li>
<li>åŸºäº landmark å®šä¹‰ç¨³å®š ROIï¼ˆé¢å¤´ã€åŒé¢Šï¼‰</li>
<li>æå– ROI çš„ RGB æ—¶é—´åºåˆ—</li>
<li>å°†ç»“æœæ•´ç†ä¸º <code>.h5</code> æ–‡ä»¶ä¾›æ·±åº¦å­¦ä¹ æ¨¡å‹ä½¿ç”¨</li>
</ol>
<p>OpenFace çš„ç¨³å®šè¿è¡Œæ˜¯æ•´ä¸ª rPPG æ•°æ®é¢„å¤„ç†æµæ°´çº¿çš„<strong>ç¬¬ä¸€å—åŸºçŸ³</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-16">ç»éªŒæ€§æ€»ç»“</h3>
<ol>
<li><strong>OpenFace å®‰è£…å¤±è´¥ï¼Œ90% ä¸æ˜¯ä»£ç é—®é¢˜ï¼Œè€Œæ˜¯æ¨¡å‹æ–‡ä»¶ç¼ºå¤±</strong></li>
<li><code>download_models.ps1</code> åœ¨å›½å†…ç¯å¢ƒä¸‹å¹¶ä¸å¯é ï¼Œæ‰‹åŠ¨ä¸‹è½½æ˜¯æœ€ç¨³å¦¥æ–¹æ¡ˆ</li>
<li>å¯¹ Windows ç”¨æˆ·è€Œè¨€ï¼Œç›®å½•ç»“æ„æ¯”ç‰ˆæœ¬é€‰æ‹©æ›´å®¹æ˜“å‡ºé”™</li>
<li>ä¸€æ—¦ <code>FeatureExtraction.exe -h</code> æ­£å¸¸è¾“å‡ºï¼Œåç»­æµç¨‹å°†éå¸¸é¡ºç•…</li>
</ol>
<hr/>
<h3 data-id="heading-17">ç»“è¯­</h3>
<p>åœ¨ rPPG ç ”ç©¶ä¸­ï¼Œæ•°æ®é¢„å¤„ç†å¾€å¾€æ¯”æ¨¡å‹è®¾è®¡æ›´å®¹æ˜“è¸©å‘ã€‚OpenFace è™½ç„¶æˆç†Ÿç¨³å®šï¼Œä½†å…¶æ¨¡å‹ä¸‹è½½æœºåˆ¶å¯¹æ–°æ‰‹æä¸å‹å¥½ï¼Œå°¤å…¶æ˜¯åœ¨ Windows ä¸å›½å†…ç½‘ç»œç¯å¢ƒä¸‹ã€‚</p>
<p>æœ¬æ–‡é€šè¿‡ä¸€æ¬¡å®Œæ•´ã€çœŸå®çš„æ’é”™è¿‡ç¨‹ï¼Œæ€»ç»“äº† <strong>OpenFace åœ¨ Windows ä¸‹çš„æ­£ç¡®ä½¿ç”¨æ–¹å¼</strong>ï¼Œå¸Œæœ›èƒ½ä¸ºåç»­ä»äº‹ UBFC-rPPGã€PhysNetã€TS-CAN ç­‰ç ”ç©¶çš„è¯»è€…èŠ‚çœå¤§é‡æ— æ„ä¹‰çš„æ—¶é—´æˆæœ¬ã€‚</p>
<p><strong>å½“å·¥å…·é“¾çœŸæ­£è·‘é€šä¹‹åï¼Œç ”ç©¶æ‰åˆšåˆšå¼€å§‹ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€AIåŠå…¬è‡ªåŠ¨åŒ–ã€‘å¦‚ä½•ä½¿ç”¨Pythonæ¥è‡ªåŠ¨åŒ–å¤„ç†PDFæ–‡æ¡£]]></title>    <link>https://juejin.cn/post/7597276695403692073</link>    <guid>https://juejin.cn/post/7597276695403692073</guid>    <pubDate>2026-01-20T14:40:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597276695403692073" data-draft-id="7597271614942216211" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€AIåŠå…¬è‡ªåŠ¨åŒ–ã€‘å¦‚ä½•ä½¿ç”¨Pythonæ¥è‡ªåŠ¨åŒ–å¤„ç†PDFæ–‡æ¡£"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2026-01-20T14:40:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§ç¥å›Bob"/> <meta itemprop="url" content="https://juejin.cn/user/3913917126947496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€AIåŠå…¬è‡ªåŠ¨åŒ–ã€‘å¦‚ä½•ä½¿ç”¨Pythonæ¥è‡ªåŠ¨åŒ–å¤„ç†PDFæ–‡æ¡£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3913917126947496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§ç¥å›Bob
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T14:40:14.000Z" title="Tue Jan 20 2026 14:40:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>PDFï¼ˆPortable Document Formatï¼Œä¾¿æºå¼æ–‡æ¡£æ ¼å¼ï¼‰æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„æ–‡æ¡£æ ¼å¼ï¼Œå…·æœ‰è·¨å¹³å°ã€ç¨³å®šæ€§å¥½ã€å®‰å…¨æ€§é«˜ç­‰ç‰¹ç‚¹ã€‚åœ¨åŠå…¬è‡ªåŠ¨åŒ–ä¸­ï¼ŒPDFæ–‡æ¡£å¤„ç†æ˜¯ä¸€é¡¹å¸¸è§éœ€æ±‚ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨Pythonå®ç°PDFæ–‡æ¡£çš„è‡ªåŠ¨åŒ–å¤„ç†ï¼ŒåŒ…æ‹¬è¯»å†™ã€åˆå¹¶æ‹†åˆ†ã€æå–å†…å®¹ã€æ·»åŠ æ°´å°ç­‰æ“ä½œã€‚</p>
<h2 data-id="heading-0">ä½¿ç”¨pymupdfè¯»å†™PDFæ–‡ä»¶</h2>
<h3 data-id="heading-1">åŸºæœ¬æ¦‚å¿µ</h3>
<p>ä¸€ä¸ªçœŸå®çš„PDFæ–‡ä»¶ä¸»è¦ç”±å››å¤§éƒ¨åˆ†æ„æˆï¼Œåˆ†åˆ«æ˜¯æ–‡ä»¶å¤´ï¼ˆHeaderï¼‰ã€æ–‡ä»¶ä¸»ä½“ï¼ˆBodyï¼‰ã€äº¤å‰å¼•ç”¨è¡¨ï¼ˆCross-Reference Tableï¼‰å’Œæ–‡ä»¶å°¾ï¼ˆTrailerï¼‰ã€‚äº†è§£è¿™äº›åŸºæœ¬ç»“æ„æœ‰åŠ©äºæˆ‘ä»¬æ›´å¥½åœ°å¤„ç†PDFæ–‡ä»¶ã€‚</p>
<h3 data-id="heading-2">å®‰è£…pymupdf</h3>
<pre><code class="hljs language-python" lang="python">pip install pymupdf
</code></pre>
<h3 data-id="heading-3">æå–æ–‡æœ¬å†…å®¹</h3>
<p>pymupdfåº“ï¼ˆä¹Ÿç§°ä¸ºfitzï¼‰å¯ä»¥è½»æ¾å®ç°å¯¹PDFæ–‡ä»¶çš„è¯»å†™æ“ä½œã€‚ä»¥ä¸‹æ˜¯æå–PDFæ–‡æœ¬å†…å®¹çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> fitz  <span class="hljs-comment"># pymupdfçš„å¯¼å…¥åç§°æ˜¯fitz</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_text_from_pdf</span>(<span class="hljs-params">pdf_path</span>):
    <span class="hljs-string">"""ä»PDFæ–‡ä»¶ä¸­æå–æ‰€æœ‰æ–‡æœ¬å†…å®¹"""</span>
    <span class="hljs-comment"># æ‰“å¼€PDFæ–‡ä»¶</span>
    doc = fitz.<span class="hljs-built_in">open</span>(pdf_path)
    
    <span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªç©ºå­—ç¬¦ä¸²ç”¨äºå­˜å‚¨æ–‡æœ¬å†…å®¹</span>
    text = <span class="hljs-string">""</span>
    
    <span class="hljs-comment"># éå†æ¯ä¸€é¡µ</span>
    <span class="hljs-keyword">for</span> page_num <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(doc)):
        <span class="hljs-comment"># è·å–å½“å‰é¡µé¢</span>
        page = doc[page_num]
        
        <span class="hljs-comment"># æå–æ–‡æœ¬</span>
        page_text = page.get_text()
        
        <span class="hljs-comment"># æ·»åŠ é¡µç ä¿¡æ¯å’Œé¡µé¢æ–‡æœ¬</span>
        text += <span class="hljs-string">f"\n--- ç¬¬ <span class="hljs-subst">{page_num + <span class="hljs-number">1</span>}</span> é¡µ ---\n"</span>
        text += page_text
    
    <span class="hljs-comment"># å…³é—­æ–‡æ¡£</span>
    doc.close()
    
    <span class="hljs-keyword">return</span> text

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
pdf_path = <span class="hljs-string">"example.pdf"</span>  <span class="hljs-comment"># æ›¿æ¢ä¸ºå®é™…çš„PDFæ–‡ä»¶è·¯å¾„</span>
<span class="hljs-keyword">try</span>:
    extracted_text = extract_text_from_pdf(pdf_path)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æå–çš„æ–‡æœ¬å†…å®¹:"</span>)
    <span class="hljs-built_in">print</span>(extracted_text[:<span class="hljs-number">500</span>] + <span class="hljs-string">"..."</span> <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(extracted_text) &gt; <span class="hljs-number">500</span> <span class="hljs-keyword">else</span> extracted_text)
    
    <span class="hljs-comment"># å°†æå–çš„æ–‡æœ¬ä¿å­˜åˆ°æ–‡ä»¶</span>
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"extracted_text.txt"</span>, <span class="hljs-string">"w"</span>, encoding=<span class="hljs-string">"utf-8"</span>) <span class="hljs-keyword">as</span> f:
        f.write(extracted_text)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡æœ¬å·²ä¿å­˜åˆ° extracted_text.txt"</span>)
    
<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æå–æ–‡æœ¬æ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
</code></pre>
<h3 data-id="heading-4">æå–å›¾åƒ</h3>
<p>ä¸€ä¸ªPDFæ–‡ä»¶é€šå¸¸ä¼šåŒ…å«å›¾åƒå…ƒç´ ï¼Œå›¾åƒä½œä¸ºPDFæ–‡ä»¶ä¸­çš„å¯¹è±¡ä¹Ÿä¼šè®°å½•åœ¨äº¤å‰å¼•ç”¨è¡¨ä¸­ã€‚åœ¨pymupdfåº“ä¸­ï¼Œå¯ä»¥é€šè¿‡ç›¸åº”çš„æ–¹æ³•è·å–äº¤å‰å¼•ç”¨è¡¨ä¸­è®°å½•çš„å¯¹è±¡IDç¼–å·ï¼Œå¹¶å°†å…¶ç§°ä¸ºxrefæ•´æ•°ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> fitz
<span class="hljs-keyword">import</span> os

<span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_images_from_pdf</span>(<span class="hljs-params">pdf_path, output_folder=<span class="hljs-string">"extracted_images"</span></span>):
    <span class="hljs-string">"""ä»PDFæ–‡ä»¶ä¸­æå–æ‰€æœ‰å›¾åƒ"""</span>
    <span class="hljs-comment"># ç¡®ä¿è¾“å‡ºæ–‡ä»¶å¤¹å­˜åœ¨</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(output_folder):
        os.makedirs(output_folder)
    
    <span class="hljs-comment"># æ‰“å¼€PDFæ–‡ä»¶</span>
    doc = fitz.<span class="hljs-built_in">open</span>(pdf_path)
    
    <span class="hljs-comment"># ç”¨äºè®°å½•æå–çš„å›¾åƒæ•°é‡</span>
    image_count = <span class="hljs-number">0</span>
    
    <span class="hljs-comment"># éå†æ¯ä¸€é¡µ</span>
    <span class="hljs-keyword">for</span> page_num <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(doc)):
        <span class="hljs-comment"># è·å–å½“å‰é¡µé¢</span>
        page = doc[page_num]
        
        <span class="hljs-comment"># è·å–é¡µé¢ä¸Šçš„å›¾åƒåˆ—è¡¨</span>
        image_list = page.get_images()
        
        <span class="hljs-comment"># éå†å›¾åƒåˆ—è¡¨</span>
        <span class="hljs-keyword">for</span> img_index, img <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(image_list):
            <span class="hljs-comment"># è·å–å›¾åƒçš„xref</span>
            xref = img[<span class="hljs-number">0</span>]
            
            <span class="hljs-comment"># è·å–å›¾åƒä¿¡æ¯</span>
            base_image = doc.extract_image(xref)
            image_bytes = base_image[<span class="hljs-string">"image"</span>]
            image_ext = base_image[<span class="hljs-string">"ext"</span>]
            
            <span class="hljs-comment"># ç”Ÿæˆè¾“å‡ºæ–‡ä»¶å</span>
            output_filename = <span class="hljs-string">f"<span class="hljs-subst">{output_folder}</span>/page<span class="hljs-subst">{page_num + <span class="hljs-number">1</span>}</span>_img<span class="hljs-subst">{img_index + <span class="hljs-number">1</span>}</span>.<span class="hljs-subst">{image_ext}</span>"</span>
            
            <span class="hljs-comment"># ä¿å­˜å›¾åƒ</span>
            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(output_filename, <span class="hljs-string">"wb"</span>) <span class="hljs-keyword">as</span> f:
                f.write(image_bytes)
            
            image_count += <span class="hljs-number">1</span>
    
    <span class="hljs-comment"># å…³é—­æ–‡æ¡£</span>
    doc.close()
    
    <span class="hljs-keyword">return</span> image_count

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
pdf_path = <span class="hljs-string">"example.pdf"</span>  <span class="hljs-comment"># æ›¿æ¢ä¸ºå®é™…çš„PDFæ–‡ä»¶è·¯å¾„</span>
<span class="hljs-keyword">try</span>:
    num_images = extract_images_from_pdf(pdf_path)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æˆåŠŸæå–äº† <span class="hljs-subst">{num_images}</span> å¼ å›¾åƒåˆ° 'extracted_images' æ–‡ä»¶å¤¹"</span>)
<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æå–å›¾åƒæ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
</code></pre>
<h3 data-id="heading-5">æ·»åŠ æ°´å°</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> fitz

<span class="hljs-keyword">def</span> <span class="hljs-title function_">add_watermark_to_pdf</span>(<span class="hljs-params">input_pdf, output_pdf, watermark_text</span>):
    <span class="hljs-string">"""ä¸ºPDFæ–‡ä»¶æ·»åŠ æ–‡å­—æ°´å°"""</span>
    <span class="hljs-comment"># æ‰“å¼€PDFæ–‡ä»¶</span>
    doc = fitz.<span class="hljs-built_in">open</span>(input_pdf)
    
    <span class="hljs-comment"># éå†æ¯ä¸€é¡µ</span>
    <span class="hljs-keyword">for</span> page_num <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(doc)):
        <span class="hljs-comment"># è·å–å½“å‰é¡µé¢</span>
        page = doc[page_num]
        
        <span class="hljs-comment"># è·å–é¡µé¢å°ºå¯¸</span>
        rect = page.rect
        
        <span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªé€æ˜çš„æ°´å°æ–‡æœ¬</span>
        <span class="hljs-comment"># è®¾ç½®å­—ä½“å¤§å°ã€é¢œè‰²å’Œé€æ˜åº¦</span>
        text_color = (<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>)  <span class="hljs-comment"># ç°è‰²</span>
        alpha = <span class="hljs-number">0.3</span>  <span class="hljs-comment"># é€æ˜åº¦</span>
        fontsize = <span class="hljs-number">24</span>
        
        <span class="hljs-comment"># åœ¨é¡µé¢ä¸­å¿ƒæ·»åŠ æ°´å°</span>
        tw = fitz.TextWriter(rect)
        tw.append((rect.width/<span class="hljs-number">2</span>, rect.height/<span class="hljs-number">2</span>), watermark_text, fontsize=fontsize, color=text_color)
        tw.write_text(page, opacity=alpha)
    
    <span class="hljs-comment"># ä¿å­˜ä¿®æ”¹åçš„PDF</span>
    doc.save(output_pdf)
    doc.close()
    
    <span class="hljs-keyword">return</span> output_pdf

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
input_pdf = <span class="hljs-string">"example.pdf"</span>  <span class="hljs-comment"># æ›¿æ¢ä¸ºå®é™…çš„PDFæ–‡ä»¶è·¯å¾„</span>
output_pdf = <span class="hljs-string">"watermarked.pdf"</span>
watermark_text = <span class="hljs-string">"æœºå¯†æ–‡ä»¶ - è¯·å‹¿å¤–ä¼ "</span>

<span class="hljs-keyword">try</span>:
    result_pdf = add_watermark_to_pdf(input_pdf, output_pdf, watermark_text)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·²æˆåŠŸæ·»åŠ æ°´å°å¹¶ä¿å­˜ä¸º: <span class="hljs-subst">{result_pdf}</span>"</span>)
<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ·»åŠ æ°´å°æ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
</code></pre>
<h2 data-id="heading-6">ä½¿ç”¨pdfplumberæå–PDFä¸­è¡¨æ ¼</h2>
<p>PDFæ–‡ä»¶ä¸­é€šå¸¸ä¼šæœ‰è¡¨æ ¼å…ƒç´ ï¼Œå¦‚æœæƒ³æå–è¡¨æ ¼å…ƒç´ ä¸­çš„å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨pdfplumberåº“ã€‚</p>
<h3 data-id="heading-7">å®‰è£…pdfplumber</h3>
<pre><code class="hljs language-python" lang="python">pip install pdfplumber
</code></pre>
<h3 data-id="heading-8">æå–è¡¨æ ¼æ•°æ®</h3>
<p>pdfplumberåº“æä¾›çš„extract_tableæ–¹æ³•å¯ä»¥è½»æ¾æå–PDFæ–‡ä»¶ä¸­æŸé¡µçš„æ‰€æœ‰è¡¨æ ¼ï¼Œå¯¹äºç¼ºå°‘è¾¹ç•Œçš„è¡¨æ ¼ï¼Œpdfplumberåº“ä¼šåˆ©ç”¨æ–‡æœ¬ä½ç½®ä¿¡æ¯è¿›è¡ŒçŒœæµ‹ï¼Œä»è€Œå®šä½å‡ºä¸å¯è§è¾¹ç•Œçš„ä½ç½®ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> pdfplumber
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd

<span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_tables_from_pdf</span>(<span class="hljs-params">pdf_path</span>):
    <span class="hljs-string">"""ä»PDFæ–‡ä»¶ä¸­æå–æ‰€æœ‰è¡¨æ ¼"""</span>
    <span class="hljs-comment"># æ‰“å¼€PDFæ–‡ä»¶</span>
    <span class="hljs-keyword">with</span> pdfplumber.<span class="hljs-built_in">open</span>(pdf_path) <span class="hljs-keyword">as</span> pdf:
        all_tables = []
        
        <span class="hljs-comment"># éå†æ¯ä¸€é¡µ</span>
        <span class="hljs-keyword">for</span> page_num, page <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(pdf.pages):
            <span class="hljs-comment"># æå–è¡¨æ ¼</span>
            tables = page.extract_tables()
            
            <span class="hljs-keyword">if</span> tables:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åœ¨ç¬¬ <span class="hljs-subst">{page_num + <span class="hljs-number">1</span>}</span> é¡µæ‰¾åˆ° <span class="hljs-subst">{<span class="hljs-built_in">len</span>(tables)}</span> ä¸ªè¡¨æ ¼"</span>)
                
                <span class="hljs-comment"># å¤„ç†æ¯ä¸ªè¡¨æ ¼</span>
                <span class="hljs-keyword">for</span> table_num, table <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(tables):
                    <span class="hljs-comment"># åˆ›å»ºDataFrame</span>
                    df = pd.DataFrame(table[<span class="hljs-number">1</span>:], columns=table[<span class="hljs-number">0</span>])
                    
                    <span class="hljs-comment"># æ·»åŠ é¡µç å’Œè¡¨æ ¼ç¼–å·ä¿¡æ¯</span>
                    df[<span class="hljs-string">'é¡µç '</span>] = page_num + <span class="hljs-number">1</span>
                    df[<span class="hljs-string">'è¡¨æ ¼ç¼–å·'</span>] = table_num + <span class="hljs-number">1</span>
                    
                    all_tables.append(df)
            <span class="hljs-keyword">else</span>:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åœ¨ç¬¬ <span class="hljs-subst">{page_num + <span class="hljs-number">1</span>}</span> é¡µæ²¡æœ‰æ‰¾åˆ°è¡¨æ ¼"</span>)
        
        <span class="hljs-comment"># å¦‚æœæ‰¾åˆ°äº†è¡¨æ ¼ï¼Œåˆå¹¶æ‰€æœ‰è¡¨æ ¼</span>
        <span class="hljs-keyword">if</span> all_tables:
            combined_df = pd.concat(all_tables, ignore_index=<span class="hljs-literal">True</span>)
            <span class="hljs-keyword">return</span> combined_df
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
pdf_path = <span class="hljs-string">"example_with_tables.pdf"</span>  <span class="hljs-comment"># æ›¿æ¢ä¸ºåŒ…å«è¡¨æ ¼çš„PDFæ–‡ä»¶è·¯å¾„</span>
<span class="hljs-keyword">try</span>:
    tables_df = extract_tables_from_pdf(pdf_path)
    
    <span class="hljs-keyword">if</span> tables_df <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næå–çš„è¡¨æ ¼æ•°æ®:"</span>)
        <span class="hljs-built_in">print</span>(tables_df.head())
        
        <span class="hljs-comment"># å°†è¡¨æ ¼æ•°æ®ä¿å­˜åˆ°Excelæ–‡ä»¶</span>
        excel_path = <span class="hljs-string">"extracted_tables.xlsx"</span>
        tables_df.to_excel(excel_path, index=<span class="hljs-literal">False</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¡¨æ ¼æ•°æ®å·²ä¿å­˜åˆ°: <span class="hljs-subst">{excel_path}</span>"</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"æœªåœ¨PDFä¸­æ‰¾åˆ°ä»»ä½•è¡¨æ ¼"</span>)
        
<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æå–è¡¨æ ¼æ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
</code></pre>
<h2 data-id="heading-9">ä½¿ç”¨PyPDF2æ“æ§PDFæ–‡ä»¶</h2>
<p>PyPDF2æ˜¯ä¸€ä¸ªæµè¡Œçš„Pythonåº“ï¼Œç”¨äºå¤„ç†PDFæ–‡ä»¶ã€‚å®ƒèƒ½å®ŒæˆPDFæ–‡ä»¶çš„ä¿¡æ¯æå–ã€æ‹†åˆ†ã€åˆå¹¶ã€é¡µé¢è£å‰ªã€åŠ å¯†/è§£å¯†ç­‰å¤šç§æ“ä½œã€‚</p>
<h3 data-id="heading-10">å®‰è£…PyPDF2</h3>
<pre><code class="hljs language-python" lang="python">pip install PyPDF2
</code></pre>
<h3 data-id="heading-11">åˆå¹¶PDFæ–‡ä»¶</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> PyPDF2 <span class="hljs-keyword">import</span> PdfMerger

<span class="hljs-keyword">def</span> <span class="hljs-title function_">merge_pdfs</span>(<span class="hljs-params">pdf_files, output_path</span>):
    <span class="hljs-string">"""åˆå¹¶å¤šä¸ªPDFæ–‡ä»¶"""</span>
    merger = PdfMerger()
    
    <span class="hljs-comment"># æ·»åŠ æ¯ä¸ªPDFæ–‡ä»¶</span>
    <span class="hljs-keyword">for</span> pdf <span class="hljs-keyword">in</span> pdf_files:
        <span class="hljs-keyword">try</span>:
            merger.append(pdf)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·²æ·»åŠ : <span class="hljs-subst">{pdf}</span>"</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ·»åŠ  <span class="hljs-subst">{pdf}</span> æ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
    
    <span class="hljs-comment"># ä¿å­˜åˆå¹¶åçš„PDF</span>
    merger.write(output_path)
    merger.close()
    
    <span class="hljs-keyword">return</span> output_path

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
pdf_files = [<span class="hljs-string">"document1.pdf"</span>, <span class="hljs-string">"document2.pdf"</span>, <span class="hljs-string">"document3.pdf"</span>]  <span class="hljs-comment"># æ›¿æ¢ä¸ºå®é™…çš„PDFæ–‡ä»¶è·¯å¾„</span>
output_path = <span class="hljs-string">"merged_document.pdf"</span>

<span class="hljs-keyword">try</span>:
    result_path = merge_pdfs(pdf_files, output_path)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·²æˆåŠŸåˆå¹¶PDFæ–‡ä»¶å¹¶ä¿å­˜ä¸º: <span class="hljs-subst">{result_path}</span>"</span>)
<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆå¹¶PDFæ–‡ä»¶æ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
</code></pre>
<h3 data-id="heading-12">æ‹†åˆ†PDFæ–‡ä»¶</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> PyPDF2 <span class="hljs-keyword">import</span> PdfReader, PdfWriter
<span class="hljs-keyword">import</span> os

<span class="hljs-keyword">def</span> <span class="hljs-title function_">split_pdf</span>(<span class="hljs-params">input_pdf, output_folder=<span class="hljs-string">"split_pages"</span></span>):
    <span class="hljs-string">"""å°†PDFæ–‡ä»¶æ‹†åˆ†ä¸ºå•é¡µæ–‡ä»¶"""</span>
    <span class="hljs-comment"># ç¡®ä¿è¾“å‡ºæ–‡ä»¶å¤¹å­˜åœ¨</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(output_folder):
        os.makedirs(output_folder)
    
    <span class="hljs-comment"># æ‰“å¼€PDFæ–‡ä»¶</span>
    reader = PdfReader(input_pdf)
    total_pages = <span class="hljs-built_in">len</span>(reader.pages)
    
    <span class="hljs-comment"># è·å–æ–‡ä»¶åï¼ˆä¸å«æ‰©å±•åï¼‰</span>
    base_name = os.path.splitext(os.path.basename(input_pdf))[<span class="hljs-number">0</span>]
    
    <span class="hljs-comment"># æ‹†åˆ†æ¯ä¸€é¡µ</span>
    <span class="hljs-keyword">for</span> page_num <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(total_pages):
        writer = PdfWriter()
        writer.add_page(reader.pages[page_num])
        
        <span class="hljs-comment"># ç”Ÿæˆè¾“å‡ºæ–‡ä»¶å</span>
        output_filename = <span class="hljs-string">f"<span class="hljs-subst">{output_folder}</span>/<span class="hljs-subst">{base_name}</span>_page_<span class="hljs-subst">{page_num + <span class="hljs-number">1</span>}</span>.pdf"</span>
        
        <span class="hljs-comment"># ä¿å­˜å•é¡µPDF</span>
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(output_filename, <span class="hljs-string">"wb"</span>) <span class="hljs-keyword">as</span> output_file:
            writer.write(output_file)
        
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·²ä¿å­˜ç¬¬ <span class="hljs-subst">{page_num + <span class="hljs-number">1</span>}</span> é¡µåˆ°: <span class="hljs-subst">{output_filename}</span>"</span>)
    
    <span class="hljs-keyword">return</span> total_pages

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
input_pdf = <span class="hljs-string">"example.pdf"</span>  <span class="hljs-comment"># æ›¿æ¢ä¸ºå®é™…çš„PDFæ–‡ä»¶è·¯å¾„</span>
<span class="hljs-keyword">try</span>:
    num_pages = split_pdf(input_pdf)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·²æˆåŠŸå°† <span class="hljs-subst">{input_pdf}</span> æ‹†åˆ†ä¸º <span class="hljs-subst">{num_pages}</span> ä¸ªå•é¡µPDFæ–‡ä»¶"</span>)
<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‹†åˆ†PDFæ–‡ä»¶æ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
</code></pre>
<h3 data-id="heading-13">åŠ å¯†å’Œè§£å¯†PDF</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> PyPDF2 <span class="hljs-keyword">import</span> PdfReader, PdfWriter

<span class="hljs-keyword">def</span> <span class="hljs-title function_">encrypt_pdf</span>(<span class="hljs-params">input_pdf, output_pdf, password</span>):
    <span class="hljs-string">"""åŠ å¯†PDFæ–‡ä»¶"""</span>
    reader = PdfReader(input_pdf)
    writer = PdfWriter()
    
    <span class="hljs-comment"># å¤åˆ¶æ‰€æœ‰é¡µé¢</span>
    <span class="hljs-keyword">for</span> page <span class="hljs-keyword">in</span> reader.pages:
        writer.add_page(page)
    
    <span class="hljs-comment"># è®¾ç½®å¯†ç å’ŒåŠ å¯†é€‰é¡¹</span>
    writer.encrypt(password)
    
    <span class="hljs-comment"># ä¿å­˜åŠ å¯†åçš„PDF</span>
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(output_pdf, <span class="hljs-string">"wb"</span>) <span class="hljs-keyword">as</span> output_file:
        writer.write(output_file)
    
    <span class="hljs-keyword">return</span> output_pdf

<span class="hljs-keyword">def</span> <span class="hljs-title function_">decrypt_pdf</span>(<span class="hljs-params">input_pdf, output_pdf, password</span>):
    <span class="hljs-string">"""è§£å¯†PDFæ–‡ä»¶"""</span>
    reader = PdfReader(input_pdf)
    
    <span class="hljs-comment"># æ£€æŸ¥PDFæ˜¯å¦åŠ å¯†</span>
    <span class="hljs-keyword">if</span> reader.is_encrypted:
        <span class="hljs-comment"># å°è¯•ä½¿ç”¨å¯†ç è§£å¯†</span>
        <span class="hljs-keyword">if</span> reader.decrypt(password) != <span class="hljs-number">1</span>:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"å¯†ç ä¸æ­£ç¡®"</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è­¦å‘Š: è¾“å…¥çš„PDFæ–‡ä»¶æœªåŠ å¯†"</span>)
    
    writer = PdfWriter()
    
    <span class="hljs-comment"># å¤åˆ¶æ‰€æœ‰é¡µé¢</span>
    <span class="hljs-keyword">for</span> page <span class="hljs-keyword">in</span> reader.pages:
        writer.add_page(page)
    
    <span class="hljs-comment"># ä¿å­˜è§£å¯†åçš„PDF</span>
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(output_pdf, <span class="hljs-string">"wb"</span>) <span class="hljs-keyword">as</span> output_file:
        writer.write(output_file)
    
    <span class="hljs-keyword">return</span> output_pdf

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹ - åŠ å¯†</span>
input_pdf = <span class="hljs-string">"example.pdf"</span>  <span class="hljs-comment"># æ›¿æ¢ä¸ºå®é™…çš„PDFæ–‡ä»¶è·¯å¾„</span>
encrypted_pdf = <span class="hljs-string">"encrypted_document.pdf"</span>
password = <span class="hljs-string">"secure123"</span>  <span class="hljs-comment"># è®¾ç½®å¯†ç </span>

<span class="hljs-keyword">try</span>:
    result_path = encrypt_pdf(input_pdf, encrypted_pdf, password)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·²æˆåŠŸåŠ å¯†PDFæ–‡ä»¶å¹¶ä¿å­˜ä¸º: <span class="hljs-subst">{result_path}</span>"</span>)
<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åŠ å¯†PDFæ–‡ä»¶æ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹ - è§£å¯†</span>
decrypted_pdf = <span class="hljs-string">"decrypted_document.pdf"</span>

<span class="hljs-keyword">try</span>:
    result_path = decrypt_pdf(encrypted_pdf, decrypted_pdf, password)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·²æˆåŠŸè§£å¯†PDFæ–‡ä»¶å¹¶ä¿å­˜ä¸º: <span class="hljs-subst">{result_path}</span>"</span>)
<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è§£å¯†PDFæ–‡ä»¶æ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
</code></pre>
<h2 data-id="heading-14">ä½¿ç”¨wkhtmltopdfå°†ç½‘é¡µè½¬ä¸ºPDF</h2>
<p>wkhtmltopdfæ˜¯ä¸€ä¸ªå¼€æºå·¥å…·ï¼Œå¯ä»¥å°†HTMLé¡µé¢è½¬æ¢ä¸ºPDFæ–‡æ¡£ã€‚å®ƒå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œç›´æ¥ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡Pythonçš„pdfkitåº“è¿›è¡Œè°ƒç”¨ã€‚</p>
<h3 data-id="heading-15">å®‰è£…wkhtmltopdfå’Œpdfkit</h3>
<ol>
<li>
<p>é¦–å…ˆï¼Œéœ€è¦å®‰è£…wkhtmltopdfå·¥å…·ï¼š</p>
<ul>
<li>åœ¨macOSä¸Šï¼š<code>brew install wkhtmltopdf</code></li>
<li>åœ¨Windowsä¸Šï¼šä»<a href="https://link.juejin.cn?target=https%3A%2F%2Fwkhtmltopdf.org%2Fdownloads.html" target="_blank" title="https://wkhtmltopdf.org/downloads.html" ref="nofollow noopener noreferrer">å®˜æ–¹ç½‘ç«™</a>ä¸‹è½½å®‰è£…ç¨‹åº</li>
<li>åœ¨Linuxä¸Šï¼š<code>sudo apt-get install wkhtmltopdf</code>ï¼ˆUbuntu/Debianï¼‰æˆ– <code>sudo yum install wkhtmltopdf</code>ï¼ˆCentOS/RHELï¼‰</li>
</ul>
</li>
<li>
<p>ç„¶åï¼Œå®‰è£…pdfkit Pythonåº“ï¼š</p>
<pre><code class="hljs language-python" lang="python">pip install pdfkit
</code></pre>
</li>
</ol>
<h3 data-id="heading-16">å°†ç½‘é¡µè½¬æ¢ä¸ºPDF</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> pdfkit

<span class="hljs-keyword">def</span> <span class="hljs-title function_">url_to_pdf</span>(<span class="hljs-params">url, output_pdf</span>):
    <span class="hljs-string">"""å°†URLæŒ‡å‘çš„ç½‘é¡µè½¬æ¢ä¸ºPDF"""</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># é…ç½®wkhtmltopdfè·¯å¾„ï¼ˆå¦‚æœä¸åœ¨ç³»ç»ŸPATHä¸­ï¼‰</span>
        <span class="hljs-comment"># config = pdfkit.configuration(wkhtmltopdf='/path/to/wkhtmltopdf')</span>
        <span class="hljs-comment"># pdfkit.from_url(url, output_pdf, configuration=config)</span>
        
        <span class="hljs-comment"># å¦‚æœwkhtmltopdfåœ¨ç³»ç»ŸPATHä¸­</span>
        pdfkit.from_url(url, output_pdf)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·²æˆåŠŸå°† <span class="hljs-subst">{url}</span> è½¬æ¢ä¸ºPDF: <span class="hljs-subst">{output_pdf}</span>"</span>)
        <span class="hljs-keyword">return</span> output_pdf
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è½¬æ¢ç½‘é¡µåˆ°PDFæ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">html_to_pdf</span>(<span class="hljs-params">html_file, output_pdf</span>):
    <span class="hljs-string">"""å°†HTMLæ–‡ä»¶è½¬æ¢ä¸ºPDF"""</span>
    <span class="hljs-keyword">try</span>:
        pdfkit.from_file(html_file, output_pdf)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·²æˆåŠŸå°† <span class="hljs-subst">{html_file}</span> è½¬æ¢ä¸ºPDF: <span class="hljs-subst">{output_pdf}</span>"</span>)
        <span class="hljs-keyword">return</span> output_pdf
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è½¬æ¢HTMLæ–‡ä»¶åˆ°PDFæ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">html_string_to_pdf</span>(<span class="hljs-params">html_content, output_pdf</span>):
    <span class="hljs-string">"""å°†HTMLå­—ç¬¦ä¸²è½¬æ¢ä¸ºPDF"""</span>
    <span class="hljs-keyword">try</span>:
        pdfkit.from_string(html_content, output_pdf)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·²æˆåŠŸå°†HTMLå†…å®¹è½¬æ¢ä¸ºPDF: <span class="hljs-subst">{output_pdf}</span>"</span>)
        <span class="hljs-keyword">return</span> output_pdf
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è½¬æ¢HTMLå­—ç¬¦ä¸²åˆ°PDFæ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹ - ä»URLåˆ›å»ºPDF</span>
url = <span class="hljs-string">"https://www.example.com"</span>  <span class="hljs-comment"># æ›¿æ¢ä¸ºå®é™…çš„URL</span>
output_pdf = <span class="hljs-string">"webpage.pdf"</span>
url_to_pdf(url, output_pdf)

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹ - ä»HTMLæ–‡ä»¶åˆ›å»ºPDF</span>
html_file = <span class="hljs-string">"example.html"</span>  <span class="hljs-comment"># æ›¿æ¢ä¸ºå®é™…çš„HTMLæ–‡ä»¶è·¯å¾„</span>
output_pdf = <span class="hljs-string">"from_html_file.pdf"</span>
html_to_pdf(html_file, output_pdf)

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹ - ä»HTMLå­—ç¬¦ä¸²åˆ›å»ºPDF</span>
html_content = <span class="hljs-string">"""&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;æµ‹è¯•é¡µé¢&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Hello, World!&lt;/h1&gt;
    &lt;p&gt;è¿™æ˜¯ä¸€ä¸ªç”±HTMLå­—ç¬¦ä¸²ç”Ÿæˆçš„PDFæ–‡æ¡£ã€‚&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;"""</span>
output_pdf = <span class="hljs-string">"from_html_string.pdf"</span>
html_string_to_pdf(html_content, output_pdf)
</code></pre>
<h3 data-id="heading-17">å°†ç½‘é¡µè½¬æ¢ä¸ºå›¾ç‰‡</h3>
<p>é™¤äº†è½¬æ¢ä¸ºPDFï¼Œwkhtmltoimageå·¥å…·ï¼ˆwkhtmltopdfçš„ä¸€éƒ¨åˆ†ï¼‰è¿˜å¯ä»¥å°†ç½‘é¡µè½¬æ¢ä¸ºå›¾ç‰‡ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> subprocess

<span class="hljs-keyword">def</span> <span class="hljs-title function_">url_to_image</span>(<span class="hljs-params">url, output_image</span>):
    <span class="hljs-string">"""å°†URLæŒ‡å‘çš„ç½‘é¡µè½¬æ¢ä¸ºå›¾ç‰‡"""</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># æ‰§è¡Œwkhtmltoimageå‘½ä»¤</span>
        command = [<span class="hljs-string">"wkhtmltoimage"</span>, url, output_image]
        subprocess.run(command, check=<span class="hljs-literal">True</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·²æˆåŠŸå°† <span class="hljs-subst">{url}</span> è½¬æ¢ä¸ºå›¾ç‰‡: <span class="hljs-subst">{output_image}</span>"</span>)
        <span class="hljs-keyword">return</span> output_image
    <span class="hljs-keyword">except</span> subprocess.CalledProcessError <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è½¬æ¢ç½‘é¡µåˆ°å›¾ç‰‡æ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‘ç”Ÿé”™è¯¯: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
url = <span class="hljs-string">"https://www.example.com"</span>  <span class="hljs-comment"># æ›¿æ¢ä¸ºå®é™…çš„URL</span>
output_image = <span class="hljs-string">"webpage.jpg"</span>
url_to_image(url, output_image)
</code></pre>
<h2 data-id="heading-18">ä»Word/Excelå¯¼å‡ºPDFæŠ¥å‘Š</h2>
<h3 data-id="heading-19">ä»Wordå¯¼å‡ºPDF</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> docx2pdf <span class="hljs-keyword">import</span> convert

<span class="hljs-keyword">def</span> <span class="hljs-title function_">word_to_pdf</span>(<span class="hljs-params">input_docx, output_pdf=<span class="hljs-literal">None</span></span>):
    <span class="hljs-string">"""å°†Wordæ–‡æ¡£è½¬æ¢ä¸ºPDF"""</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># å¦‚æœæœªæŒ‡å®šè¾“å‡ºPDFè·¯å¾„ï¼Œåˆ™ä½¿ç”¨ç›¸åŒçš„æ–‡ä»¶åä½†æ‰©å±•åä¸º.pdf</span>
        <span class="hljs-keyword">if</span> output_pdf <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
            output_pdf = input_docx.replace(<span class="hljs-string">".docx"</span>, <span class="hljs-string">".pdf"</span>)
        
        <span class="hljs-comment"># è½¬æ¢Wordæ–‡æ¡£ä¸ºPDF</span>
        convert(input_docx, output_pdf)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·²æˆåŠŸå°† <span class="hljs-subst">{input_docx}</span> è½¬æ¢ä¸ºPDF: <span class="hljs-subst">{output_pdf}</span>"</span>)
        <span class="hljs-keyword">return</span> output_pdf
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è½¬æ¢Wordåˆ°PDFæ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
input_docx = <span class="hljs-string">"example.docx"</span>  <span class="hljs-comment"># æ›¿æ¢ä¸ºå®é™…çš„Wordæ–‡æ¡£è·¯å¾„</span>
word_to_pdf(input_docx)
</code></pre>
<h3 data-id="heading-20">ä»Excelå¯¼å‡ºPDF</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> win32com.client
<span class="hljs-keyword">import</span> os

<span class="hljs-keyword">def</span> <span class="hljs-title function_">excel_to_pdf</span>(<span class="hljs-params">input_excel, output_pdf=<span class="hljs-literal">None</span></span>):
    <span class="hljs-string">"""å°†Excelæ–‡ä»¶è½¬æ¢ä¸ºPDFï¼ˆä»…é€‚ç”¨äºWindowsç³»ç»Ÿï¼‰"""</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># å¦‚æœæœªæŒ‡å®šè¾“å‡ºPDFè·¯å¾„ï¼Œåˆ™ä½¿ç”¨ç›¸åŒçš„æ–‡ä»¶åä½†æ‰©å±•åä¸º.pdf</span>
        <span class="hljs-keyword">if</span> output_pdf <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
            output_pdf = input_excel.replace(<span class="hljs-string">".xlsx"</span>, <span class="hljs-string">".pdf"</span>).replace(<span class="hljs-string">".xls"</span>, <span class="hljs-string">".pdf"</span>)
        
        <span class="hljs-comment"># è·å–ç»å¯¹è·¯å¾„</span>
        input_excel = os.path.abspath(input_excel)
        output_pdf = os.path.abspath(output_pdf)
        
        <span class="hljs-comment"># åˆ›å»ºExcelåº”ç”¨ç¨‹åºå®ä¾‹</span>
        excel = win32com.client.Dispatch(<span class="hljs-string">"Excel.Application"</span>)
        excel.Visible = <span class="hljs-literal">False</span>
        
        <span class="hljs-comment"># æ‰“å¼€Excelæ–‡ä»¶</span>
        workbook = excel.Workbooks.Open(input_excel)
        
        <span class="hljs-comment"># å°†å·¥ä½œç°¿å¯¼å‡ºä¸ºPDF</span>
        workbook.ExportAsFixedFormat(<span class="hljs-number">0</span>, output_pdf)
        
        <span class="hljs-comment"># å…³é—­å·¥ä½œç°¿å’ŒExcelåº”ç”¨ç¨‹åº</span>
        workbook.Close()
        excel.Quit()
        
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·²æˆåŠŸå°† <span class="hljs-subst">{input_excel}</span> è½¬æ¢ä¸ºPDF: <span class="hljs-subst">{output_pdf}</span>"</span>)
        <span class="hljs-keyword">return</span> output_pdf
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è½¬æ¢Excelåˆ°PDFæ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹ï¼ˆä»…é€‚ç”¨äºWindowsç³»ç»Ÿï¼‰</span>
<span class="hljs-comment"># input_excel = "example.xlsx"  # æ›¿æ¢ä¸ºå®é™…çš„Excelæ–‡ä»¶è·¯å¾„</span>
<span class="hljs-comment"># excel_to_pdf(input_excel)</span>
</code></pre>
<h2 data-id="heading-21">å®é™…åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-22">åœºæ™¯ä¸€ï¼šæ‰¹é‡å¤„ç†å‘ç¥¨PDF</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> fitz
<span class="hljs-keyword">import</span> re
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd

<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_invoice_pdfs</span>(<span class="hljs-params">invoice_folder, output_excel</span>):
    <span class="hljs-string">"""æ‰¹é‡å¤„ç†å‘ç¥¨PDFï¼Œæå–å…³é”®ä¿¡æ¯å¹¶ç”Ÿæˆæ±‡æ€»è¡¨"""</span>
    <span class="hljs-comment"># å­˜å‚¨æå–çš„å‘ç¥¨ä¿¡æ¯</span>
    invoices_data = []
    
    <span class="hljs-comment"># è·å–æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰PDFæ–‡ä»¶</span>
    pdf_files = [f <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> os.listdir(invoice_folder) <span class="hljs-keyword">if</span> f.lower().endswith(<span class="hljs-string">'.pdf'</span>)]
    
    <span class="hljs-keyword">for</span> pdf_file <span class="hljs-keyword">in</span> pdf_files:
        pdf_path = os.path.join(invoice_folder, pdf_file)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¤„ç†: <span class="hljs-subst">{pdf_path}</span>"</span>)
        
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># æ‰“å¼€PDFæ–‡ä»¶</span>
            doc = fitz.<span class="hljs-built_in">open</span>(pdf_path)
            
            <span class="hljs-comment"># æå–ç¬¬ä¸€é¡µæ–‡æœ¬ï¼ˆå‡è®¾å‘ç¥¨ä¿¡æ¯åœ¨ç¬¬ä¸€é¡µï¼‰</span>
            text = doc[<span class="hljs-number">0</span>].get_text()
            
            <span class="hljs-comment"># ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æå–å…³é”®ä¿¡æ¯</span>
            <span class="hljs-comment"># æ³¨æ„ï¼šä»¥ä¸‹æ­£åˆ™è¡¨è¾¾å¼éœ€è¦æ ¹æ®å®é™…å‘ç¥¨æ ¼å¼è¿›è¡Œè°ƒæ•´</span>
            invoice_number = re.search(<span class="hljs-string">r'å‘ç¥¨å·ç [ï¼š:](\s*\d+)'</span>, text)
            invoice_number = invoice_number.group(<span class="hljs-number">1</span>).strip() <span class="hljs-keyword">if</span> invoice_number <span class="hljs-keyword">else</span> <span class="hljs-string">"æœªçŸ¥"</span>
            
            invoice_date = re.search(<span class="hljs-string">r'å¼€ç¥¨æ—¥æœŸ[ï¼š:](\s*\d{4}[å¹´/-]\d{1,2}[æœˆ/-]\d{1,2})'</span>, text)
            invoice_date = invoice_date.group(<span class="hljs-number">1</span>).strip() <span class="hljs-keyword">if</span> invoice_date <span class="hljs-keyword">else</span> <span class="hljs-string">"æœªçŸ¥"</span>
            
            amount = re.search(<span class="hljs-string">r'é‡‘é¢[ï¼š:]\s*Â¥?\s*(\d+\.\d{2})'</span>, text)
            amount = amount.group(<span class="hljs-number">1</span>).strip() <span class="hljs-keyword">if</span> amount <span class="hljs-keyword">else</span> <span class="hljs-string">"0.00"</span>
            
            <span class="hljs-comment"># å°†ä¿¡æ¯æ·»åŠ åˆ°åˆ—è¡¨</span>
            invoices_data.append({
                <span class="hljs-string">'æ–‡ä»¶å'</span>: pdf_file,
                <span class="hljs-string">'å‘ç¥¨å·ç '</span>: invoice_number,
                <span class="hljs-string">'å¼€ç¥¨æ—¥æœŸ'</span>: invoice_date,
                <span class="hljs-string">'é‡‘é¢'</span>: <span class="hljs-built_in">float</span>(amount),
            })
            
            <span class="hljs-comment"># å…³é—­æ–‡æ¡£</span>
            doc.close()
            
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¤„ç† <span class="hljs-subst">{pdf_file}</span> æ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
    
    <span class="hljs-comment"># åˆ›å»ºDataFrameå¹¶ä¿å­˜ä¸ºExcel</span>
    <span class="hljs-keyword">if</span> invoices_data:
        df = pd.DataFrame(invoices_data)
        
        <span class="hljs-comment"># æ·»åŠ æ€»è®¡è¡Œ</span>
        total_amount = df[<span class="hljs-string">'é‡‘é¢'</span>].<span class="hljs-built_in">sum</span>()
        df.loc[<span class="hljs-built_in">len</span>(df)] = [<span class="hljs-string">'æ€»è®¡'</span>, <span class="hljs-string">''</span>, <span class="hljs-string">''</span>, total_amount]
        
        <span class="hljs-comment"># ä¿å­˜ä¸ºExcel</span>
        df.to_excel(output_excel, index=<span class="hljs-literal">False</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·²æˆåŠŸå¤„ç† <span class="hljs-subst">{<span class="hljs-built_in">len</span>(invoices_data)}</span> ä¸ªå‘ç¥¨PDFå¹¶ä¿å­˜æ±‡æ€»è¡¨åˆ°: <span class="hljs-subst">{output_excel}</span>"</span>)
        <span class="hljs-keyword">return</span> output_excel
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"æœªæ‰¾åˆ°æœ‰æ•ˆçš„å‘ç¥¨PDFæ–‡ä»¶"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
invoice_folder = <span class="hljs-string">"invoices"</span>  <span class="hljs-comment"># æ›¿æ¢ä¸ºå®é™…çš„å‘ç¥¨PDFæ–‡ä»¶å¤¹è·¯å¾„</span>
output_excel = <span class="hljs-string">"invoice_summary.xlsx"</span>

<span class="hljs-comment"># process_invoice_pdfs(invoice_folder, output_excel)</span>
</code></pre>
<h3 data-id="heading-23">åœºæ™¯äºŒï¼šè‡ªåŠ¨ç”ŸæˆPDFæŠ¥å‘Š</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">import</span> fitz
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime

<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_sales_report_pdf</span>(<span class="hljs-params">sales_data_excel, output_pdf</span>):
    <span class="hljs-string">"""æ ¹æ®é”€å”®æ•°æ®ç”ŸæˆPDFæŠ¥å‘Š"""</span>
    <span class="hljs-comment"># è¯»å–é”€å”®æ•°æ®</span>
    df = pd.read_excel(sales_data_excel)
    
    <span class="hljs-comment"># åˆ›å»ºä¸´æ—¶HTMLæ–‡ä»¶</span>
    html_path = <span class="hljs-string">"temp_report.html"</span>
    
    <span class="hljs-comment"># ç”Ÿæˆå›¾è¡¨</span>
    plt.figure(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">6</span>))
    df.groupby(<span class="hljs-string">'äº§å“'</span>)[<span class="hljs-string">'é”€å”®é¢'</span>].<span class="hljs-built_in">sum</span>().plot(kind=<span class="hljs-string">'bar'</span>)
    plt.title(<span class="hljs-string">'å„äº§å“é”€å”®é¢å¯¹æ¯”'</span>)
    plt.ylabel(<span class="hljs-string">'é”€å”®é¢'</span>)
    plt.tight_layout()
    chart_path = <span class="hljs-string">"sales_chart.png"</span>
    plt.savefig(chart_path)
    
    <span class="hljs-comment"># è®¡ç®—æ±‡æ€»æ•°æ®</span>
    total_sales = df[<span class="hljs-string">'é”€å”®é¢'</span>].<span class="hljs-built_in">sum</span>()
    avg_sales = df[<span class="hljs-string">'é”€å”®é¢'</span>].mean()
    max_product = df.loc[df[<span class="hljs-string">'é”€å”®é¢'</span>].idxmax()][<span class="hljs-string">'äº§å“'</span>]
    max_sales = df[<span class="hljs-string">'é”€å”®é¢'</span>].<span class="hljs-built_in">max</span>()
    
    <span class="hljs-comment"># ç”ŸæˆHTMLæŠ¥å‘Š</span>
    html_content = <span class="hljs-string">f"""
    &lt;!DOCTYPE html&gt;
    &lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;é”€å”®æ•°æ®æŠ¥å‘Š&lt;/title&gt;
        &lt;style&gt;
            body {{ font-family: Arial, sans-serif; margin: 40px; }}
            h1 {{ color: #2c3e50; text-align: center; }}
            .report-date {{ text-align: right; color: #7f8c8d; }}
            .summary {{ background-color: #f8f9fa; padding: 20px; border-radius: 5px; margin: 20px 0; }}
            table {{ width: 100%; border-collapse: collapse; margin: 20px 0; }}
            th, td {{ padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }}
            th {{ background-color: #3498db; color: white; }}
            tr:hover {{ background-color: #f5f5f5; }}
            .chart {{ text-align: center; margin: 30px 0; }}
            .footer {{ text-align: center; margin-top: 50px; font-size: 12px; color: #7f8c8d; }}
        &lt;/style&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div class="report-date"&gt;ç”Ÿæˆæ—¥æœŸ: <span class="hljs-subst">{datetime.now().strftime(<span class="hljs-string">'%Yå¹´%mæœˆ%dæ—¥'</span>)}</span>&lt;/div&gt;
        &lt;h1&gt;é”€å”®æ•°æ®æŠ¥å‘Š&lt;/h1&gt;
        
        &lt;div class="summary"&gt;
            &lt;h2&gt;é”€å”®æ‘˜è¦&lt;/h2&gt;
            &lt;p&gt;æ€»é”€å”®é¢: Â¥<span class="hljs-subst">{total_sales:,<span class="hljs-number">.2</span>f}</span>&lt;/p&gt;
            &lt;p&gt;å¹³å‡é”€å”®é¢: Â¥<span class="hljs-subst">{avg_sales:,<span class="hljs-number">.2</span>f}</span>&lt;/p&gt;
            &lt;p&gt;æœ€ç•…é”€äº§å“: <span class="hljs-subst">{max_product}</span> (Â¥<span class="hljs-subst">{max_sales:,<span class="hljs-number">.2</span>f}</span>)&lt;/p&gt;
        &lt;/div&gt;
        
        &lt;h2&gt;é”€å”®æ•°æ®æ˜ç»†&lt;/h2&gt;
        &lt;table&gt;
            &lt;tr&gt;
                &lt;th&gt;äº§å“&lt;/th&gt;
                &lt;th&gt;é”€å”®é‡&lt;/th&gt;
                &lt;th&gt;é”€å”®é¢&lt;/th&gt;
                &lt;th&gt;æ—¥æœŸ&lt;/th&gt;
            &lt;/tr&gt;
    """</span>
    
    <span class="hljs-comment"># æ·»åŠ è¡¨æ ¼æ•°æ®</span>
    <span class="hljs-keyword">for</span> _, row <span class="hljs-keyword">in</span> df.iterrows():
        html_content += <span class="hljs-string">f"""
            &lt;tr&gt;
                &lt;td&gt;<span class="hljs-subst">{row[<span class="hljs-string">'äº§å“'</span>]}</span>&lt;/td&gt;
                &lt;td&gt;<span class="hljs-subst">{row[<span class="hljs-string">'é”€å”®é‡'</span>]}</span>&lt;/td&gt;
                &lt;td&gt;Â¥<span class="hljs-subst">{row[<span class="hljs-string">'é”€å”®é¢'</span>]:,<span class="hljs-number">.2</span>f}</span>&lt;/td&gt;
                &lt;td&gt;<span class="hljs-subst">{row[<span class="hljs-string">'æ—¥æœŸ'</span>]}</span>&lt;/td&gt;
            &lt;/tr&gt;
        """</span>
    
    <span class="hljs-comment"># æ·»åŠ å›¾è¡¨å’Œé¡µè„š</span>
    html_content += <span class="hljs-string">f"""
        &lt;/table&gt;
        
        &lt;div class="chart"&gt;
            &lt;h2&gt;é”€å”®å›¾è¡¨&lt;/h2&gt;
            &lt;img src="<span class="hljs-subst">{chart_path}</span>" alt="é”€å”®æ•°æ®å›¾è¡¨" style="max-width: 100%;"&gt;
        &lt;/div&gt;
        
        &lt;div class="footer"&gt;
            &lt;p&gt;æ­¤æŠ¥å‘Šç”±Pythonè‡ªåŠ¨ç”Ÿæˆ | ä»…ä¾›å†…éƒ¨ä½¿ç”¨&lt;/p&gt;
        &lt;/div&gt;
    &lt;/body&gt;
    &lt;/html&gt;
    """</span>
    
    <span class="hljs-comment"># ä¿å­˜HTMLæ–‡ä»¶</span>
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(html_path, <span class="hljs-string">"w"</span>, encoding=<span class="hljs-string">"utf-8"</span>) <span class="hljs-keyword">as</span> f:
        f.write(html_content)
    
    <span class="hljs-comment"># å°†HTMLè½¬æ¢ä¸ºPDF</span>
    <span class="hljs-keyword">import</span> pdfkit
    <span class="hljs-keyword">try</span>:
        pdfkit.from_file(html_path, output_pdf)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·²æˆåŠŸç”Ÿæˆé”€å”®æŠ¥å‘ŠPDF: <span class="hljs-subst">{output_pdf}</span>"</span>)
        
        <span class="hljs-comment"># æ¸…ç†ä¸´æ—¶æ–‡ä»¶</span>
        os.remove(html_path)
        os.remove(chart_path)
        
        <span class="hljs-keyword">return</span> output_pdf
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”ŸæˆPDFæŠ¥å‘Šæ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
sales_data_excel = <span class="hljs-string">"sales_data.xlsx"</span>  <span class="hljs-comment"># æ›¿æ¢ä¸ºå®é™…çš„é”€å”®æ•°æ®Excelæ–‡ä»¶è·¯å¾„</span>
output_pdf = <span class="hljs-string">"sales_report.pdf"</span>

<span class="hljs-comment"># generate_sales_report_pdf(sales_data_excel, output_pdf)</span>
</code></pre>
<p>é€šè¿‡ä»¥ä¸Šä»£ç ç¤ºä¾‹å’Œåº”ç”¨åœºæ™¯ï¼Œä½ å¯ä»¥è½»æ¾æŒæ¡Python PDFæ–‡æ¡£è‡ªåŠ¨åŒ–çš„å„ç§æŠ€å·§ï¼Œå¤§å¹…æé«˜å·¥ä½œæ•ˆç‡ã€‚æ— è®ºæ˜¯æå–æ–‡æœ¬å’Œå›¾åƒã€åˆå¹¶æ‹†åˆ†PDFã€æ·»åŠ æ°´å°ï¼Œè¿˜æ˜¯ä»ç½‘é¡µæˆ–Officeæ–‡æ¡£ç”ŸæˆPDFæŠ¥å‘Šï¼ŒPythonéƒ½èƒ½å¸®ä½ è½»æ¾åº”å¯¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ†äº«Kiroã€Claude Codeã€Open Codeã€Codex4ç§SpecèŒƒå¼ç¼–ç¨‹æ–¹å¼]]></title>    <link>https://juejin.cn/post/7597270795211767848</link>    <guid>https://juejin.cn/post/7597270795211767848</guid>    <pubDate>2026-01-20T10:48:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597270795211767848" data-draft-id="7597266967137878050" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ†äº«Kiroã€Claude Codeã€Open Codeã€Codex4ç§SpecèŒƒå¼ç¼–ç¨‹æ–¹å¼"/> <meta itemprop="keywords" content="Claude,Cursor,VibeCoding"/> <meta itemprop="datePublished" content="2026-01-20T10:48:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜è¾‰å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/1486195451236231"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ†äº«Kiroã€Claude Codeã€Open Codeã€Codex4ç§SpecèŒƒå¼ç¼–ç¨‹æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1486195451236231/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜è¾‰å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T10:48:08.000Z" title="Tue Jan 20 2026 10:48:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å—¨ï¼Œæˆ‘æ˜¯è¾‰å“¥ï¼Œä¸€ä¸ªè‡´åŠ›äºä½¿ç”¨ AI æŠ€æœ¯æå‰¯ä¸šçš„è¶…çº§ä¸ªä½“</p>
<p>Vibe Codingæ°›å›´ç¼–ç¨‹æ˜¯å¤§å®¶ç†Ÿæ‚‰çš„æ–¹å¼ï¼Œç›´æ¥å¯¹è¯çš„æ–¹å¼æè¿°éœ€æ±‚ï¼Œç„¶åå‘å‘†ç­‰å®Œæˆå°±å¯ä»¥äº†ï¼Œè¿™ç§æ¯”è¾ƒé€‚åˆå¿«é€Ÿçš„äº§å“è½åœ°ã€‚å¯¹äºå¤æ‚åŠŸèƒ½æ¥è¯´ï¼Œè¿˜æ˜¯æ›´åŠ æ¨èç”¨Specæ–¹å¼æ¥å®ç°ã€‚ä»Šå¤©æ¥åˆ†äº«æˆ‘å¸¸ç”¨çš„4ä¸­specå®ç°æ–¹å¼</p>
<h2 data-id="heading-0">Kiro</h2>
<p>è¿™ä¸ªIDEæˆ‘ä»¬ä¹‹å‰ä¹Ÿç»å¸¸æåˆ°ï¼Œå†…ç½®äº†SpecèŒƒå¼ï¼Œä¼šå°†éœ€æ±‚æ–‡æ¡£åŒ–ä¿å­˜ä¸ºrequirementã€planã€taskï¼Œåç»­ç›´æ¥å¯¹ç€taskæ¥å®Œæˆæ‹†åˆ†å¥½çš„æ¯ä¸€ä¸ªå­ä»»åŠ¡ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿæ˜¯éå¸¸æ–¹ä¾¿</p>
<p>Kiroå­˜åœ¨çš„é—®é¢˜æ˜¯ï¼Œæˆ‘è§‰å¾—å¤ªæ…¢äº†ï¼Œè€Œä¸”æœ€è¿‘çš„å¥—é¤åˆå‡çº§äº†ï¼Œä½¿ç”¨æˆæœ¬è¶Šæ¥è¶Šé«˜ã€‚å¹¶ä¸”ä¸€ä¸ªè‡´å‘½çš„é—®é¢˜æ˜¯ï¼Œä¸Šä¸‹æ–‡çª—å£å¤ªå°äº†ï¼Œè™½ç„¶ä¼šè‡ªåŠ¨æ€»ç»“åå¼€å¯ä¸‹ä¸€ä¸ªä¼šè¯ï¼Œä½†æ˜¯æ€»å½’ä¼šä¸¢å¤±ä¸€äº›å…³é”®ä¿¡æ¯</p>
<p>æ–°çš„è´¦å·æœ‰å…è´¹çš„è¯•ç”¨é¢åº¦ï¼Œå¦‚æœä½ æ²¡æœ‰ä½¿ç”¨è¿‡ï¼Œå¯ä»¥æ¨èå°è¯•ä¸€ä¸‹</p>
<h2 data-id="heading-1">Claude Code</h2>
<p>è¿™ä¸ªä¹Ÿä¸ç”¨è¿‡å¤šä»‹ç»äº†ï¼Œç¼–ç¨‹ç•Œçš„æ ‡æ†ï¼Œå°±ç®—ä½¿ç”¨å…¶ä»–å·¥å…·ï¼Œä¹Ÿæ˜¯ä¼˜å…ˆæ¨èClaudeæ¨¡å‹ï¼ˆè¿˜æœ‰GPTå…¨å®¶æ¡¶ï¼‰ã€‚</p>
<p>Claude Codeè™½ç„¶åŠŸèƒ½å¼ºå¤§ï¼Œä½†æ˜¯ä¹Ÿè¦é…åˆä¸€äº›æ­£ç¡®çš„ä½¿ç”¨æ–¹å¼ï¼Œæ‰èƒ½æ›´å¤§ç¨‹åº¦çš„å‘æŒ¥æ•ˆæœã€‚æˆ‘ä»¬ç°åœ¨åªè®¨è®ºSpecçš„åœºæ™¯ï¼Œæ¨èå®‰è£… <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fobra%2Fsuperpowers" target="_blank" title="https://github.com/obra/superpowers" ref="nofollow noopener noreferrer">github.com/obra/superpâ€¦</a>æ’ä»¶:</p>
<pre><code class="hljs language-bash" lang="bash">/plugin marketplace add obra/superpowers-marketplace

/plugin install superpowers@superpowers-marketplace
</code></pre>
<p>é…åˆä¸€äº›ç®€å•çš„å‘½ä»¤å°±å¯ä»¥å®ç°specçš„æ•ˆæœï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">Should see:</span>
<span class="hljs-meta prompt_"># </span><span class="bash">/superpowers:brainstorm - Interactive design refinement</span>
<span class="hljs-meta prompt_"># </span><span class="bash">/superpowers:write-plan - Create implementation plan</span>
<span class="hljs-meta prompt_"># </span><span class="bash">/superpowers:execute-plan - Execute plan <span class="hljs-keyword">in</span> batches</span>
</code></pre>
<p>Claude Codeçš„é—®é¢˜å°±æ˜¯è´¹ç”¨å¤ªè´µï¼Œä½¿ç”¨ç¯å¢ƒè¦æ±‚é«˜ï¼Œè€Œä¸”å¾ˆå¤šçš„å¥—å£³ç¬¬ä¸‰æ–¹APIéƒ½æ˜¯æ··ç€å…¶ä»–æ¨¡å‹æ¥ä¸­è½¬ï¼Œéœ€è¦è°¨æ…ä½¿ç”¨ã€‚å¯ä»¥æ¨èä½¿ç”¨Googleçš„Antigravityæ¥ä½“éªŒä½¿ç”¨</p>
<h2 data-id="heading-2">Open Code</h2>
<p>å¦‚æœæ‹…å¿ƒClaude Codeçƒ§çš„tokenå¤ªå¿«ï¼Œè´¹ç”¨å¤ªé«˜ã€‚é‚£ä¹ˆæ¨èä¸€ä¸ªå¼€æºç‰ˆçš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fopencode.ai%2F" target="_blank" title="https://opencode.ai/" ref="nofollow noopener noreferrer">opencode.ai/</a>ï¼Œå¯ä»¥ç®—å¾—ä¸Šæ˜¯å¹³æ›¿ç‰ˆæœ¬ï¼Œä½¿ç”¨ä¸Šå·®åˆ«ä¸å¤§ï¼Œä½†æ˜¯å¯ä»¥æ¥å…¥å…¶ä»–å‚å®¶çš„ä¸»æµæ¨¡å‹</p>
<p>å¦‚æœéœ€è¦ä½¿ç”¨Specæ–¹å¼ï¼Œæ¨èå®‰è£… <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcode-yeongyu%2Foh-my-opencode" target="_blank" title="https://github.com/code-yeongyu/oh-my-opencode" ref="nofollow noopener noreferrer">github.com/code-yeongyâ€¦</a></p>
<p>å†…ç½®äº†å¤šç§åœºæ™¯çš„Agentï¼Œå¹¶ä¸”æ ¹æ®æœ€ä½³å®è·µï¼Œç»™æ¯ä¸ªAgenté…ç½®äº†ä¸åŒå‚å®¶çš„å¤§æ¨¡å‹ï¼Œ</p>
<pre><code class="hljs language-scss" lang="scss">Sisyphus çš„é˜Ÿå‹ï¼ˆç²¾é€‰æ™ºèƒ½ä½“ï¼‰
Oracleï¼šè®¾è®¡ã€è°ƒè¯• (GPT <span class="hljs-number">5.2</span> Medium)
Frontend UI/UX Engineerï¼šå‰ç«¯å¼€å‘ (Gemini <span class="hljs-number">3</span> Pro)
Librarianï¼šå®˜æ–¹æ–‡æ¡£ã€å¼€æºå®ç°ã€ä»£ç åº“æ¢ç´¢ (Claude Sonnet <span class="hljs-number">4.5</span>)
Exploreï¼šæé€Ÿä»£ç åº“æ¢ç´¢ï¼ˆä¸Šä¸‹æ–‡æ„ŸçŸ¥ Grepï¼‰(Grok Code)
</code></pre>
<p>å¦‚æœä½ è®¢é˜…äº†ä¸åŒå‚å®¶çš„å¤§æ¨¡å‹ï¼Œè¿™ä¹ˆé…åˆä½¿ç”¨ï¼Œå……åˆ†åˆ©ç”¨å„è‡ªæ“…é•¿çš„é¢†åŸŸï¼Œå¹¶ä¸”ä¹Ÿä¸ä¼šæµªè´¹tokenäº†ï¼Œè¿˜æ˜¯éå¸¸é¦™çš„</p>
<h2 data-id="heading-3">Codex</h2>
<p>2å¤§å‚å®¶ï¼Œå¦ä¸€ä¸ªå°±æ˜¯GPTç³»åˆ—äº†ï¼Œå¦‚æœæœ‰è®¢é˜…GPTå¥—é¤ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨Codex</p>
<p>æ¨èæ­é…<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgithub%2Fspec-kit" target="_blank" title="https://github.com/github/spec-kit" ref="nofollow noopener noreferrer">github.com/github/specâ€¦</a>çš„æç¤ºè¯æ–¹å¼æ¥ä½¿ç”¨spec</p>
<p>é€šè¿‡ä¸‹é¢å‘½ä»¤å®‰è£…ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">uv tool install specify-cli --<span class="hljs-keyword">from</span> git+https:<span class="hljs-comment">//github.com/github/spec-kit.git</span>
</code></pre>
<p>å°±å¯ä»¥é€šè¿‡/æ¥å”¤é†’ä¸åŒçš„æç¤ºè¯äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f69b067614a4158a272d9b25569a52b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6L6J5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769510888&amp;x-signature=GkRxLsij21PAjfmTsLVidq%2F0i8Q%3D" alt="" loading="lazy"/></p>
<p>Codexçš„é—®é¢˜å°±æ˜¯æœ‰ç‚¹æ…¢ï¼Œå»ºè®®thinkingå¼€åˆ°mediumå°±è¡Œï¼Œé€‚åˆä¿®å¤ä¸€ä¸‹å¤æ‚çš„bugç–‘éš¾æ‚ç—‡ï¼Œæœ‰æ—¶å€™ç«Ÿç„¶å¯ä»¥é»˜é»˜çš„thinkä¸€ä¸ªå°æ—¶ï¼Œæ‰€ä»¥è¦æ³¨æ„tokençš„æ¶ˆè€—</p>
<h2 data-id="heading-4">Spec ç¼–ç¨‹ vs ä¼ ç»Ÿç¼–ç¨‹</h2>



































<table><thead><tr><th>ç»´åº¦</th><th>ä¼ ç»Ÿç¼–ç¨‹</th><th>Spec ç¼–ç¨‹</th></tr></thead><tbody><tr><td>è§„èŒƒè½½ä½“</td><td>è‡ªç„¶è¯­è¨€æ–‡æ¡£/å£å¤´çº¦å®š</td><td>ç»“æ„åŒ– Spec æ–‡ä»¶ï¼ˆæœºå™¨å¯è¯»ï¼‰</td></tr><tr><td>å¼€å‘ä¾æ®</td><td>å¼€å‘è€…ç»éªŒ/è®°å¿†</td><td>ä¸¥æ ¼æŒ‰ Spec æ‰§è¡Œ</td></tr><tr><td>AI è¾…åŠ©ç²¾å‡†åº¦</td><td>ä½ï¼ˆæ˜“åç¦»è§„èŒƒï¼‰</td><td>é«˜ï¼ˆ100% è´´åˆ Specï¼‰</td></tr><tr><td>è§„èŒƒæ ¡éªŒæ–¹å¼</td><td>äººå·¥ Code Review</td><td>å·¥å…·è‡ªåŠ¨åŒ–æ ¡éªŒï¼ˆspec-kitï¼‰</td></tr><tr><td>æ–°åŠŸèƒ½è½åœ°æ•ˆç‡</td><td>æ…¢ï¼ˆæ‰‹åŠ¨å†™æ¨¡æ¿ä»£ç ï¼‰</td><td>å¿«ï¼ˆä¸€é”®ç”ŸæˆåŸºç¡€ä»£ç ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-5">æ€»ç»“</h2>
<p>ä¹Ÿå¹¶ä¸æ˜¯è¯´æ‰€æœ‰çš„åœºæ™¯éƒ½åº”è¯¥ä½¿ç”¨Specæ–¹å¼ï¼Œæ¯•ç«Ÿä¼šæ¶ˆè€—æ›´å¤šçš„tokenï¼Œé€Ÿåº¦ä¹Ÿä¼šæ…¢ä¸€ç‚¹ã€‚ä½†æ˜¯ï¼Œæœ‰æ—¶å€™<strong>æ…¢å°±æ˜¯å¿«</strong>ï¼Œæ¯”èµ·ç›´æ¥å‡ºç»“æœï¼Œè°ƒè¯•10æ¬¡æ”¹bugï¼Œç”¨specçš„æ–¹å¼æ•ˆæœå¯èƒ½ä¼šæ›´å¥½ã€‚æ€»ä¹‹ï¼Œå¯¹äºä¸€äº›å¤æ‚çš„åœºæ™¯åŠŸèƒ½ï¼Œè¿˜æ˜¯æ¨èä½¿ç”¨çš„</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰‘æŒ‡offer-66ã€æœºå™¨â¼ˆçš„è¿åŠ¨èŒƒå›´]]></title>    <link>https://juejin.cn/post/7597278451030147082</link>    <guid>https://juejin.cn/post/7597278451030147082</guid>    <pubDate>2026-01-21T00:13:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597278451030147082" data-draft-id="7595800318519246854" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" å‰‘æŒ‡offer-66ã€æœºå™¨â¼ˆçš„è¿åŠ¨èŒƒå›´"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-01-21T00:13:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SevenCoding"/> <meta itemprop="url" content="https://juejin.cn/user/3261615728242467"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             å‰‘æŒ‡offer-66ã€æœºå™¨â¼ˆçš„è¿åŠ¨èŒƒå›´
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3261615728242467/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SevenCoding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-21T00:13:17.000Z" title="Wed Jan 21 2026 00:13:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é¢˜ç›®æè¿°</h2>
<p>åœ°ä¸Šæœ‰â¼€ä¸ª m â¾å’Œ n åˆ—çš„â½…æ ¼ã€‚â¼€ä¸ªæœºå™¨â¼ˆä»åæ ‡ï¼ˆ0,0ï¼‰ çš„æ ¼â¼¦å¼€å§‹ç§»åŠ¨ï¼Œæ¯â¼€æ¬¡åªèƒ½å‘å·¦ï¼Œå³ï¼Œä¸Šï¼Œä¸‹å››ä¸ªâ½…å‘ç§»åŠ¨â¼€æ ¼ï¼Œä½†æ˜¯ä¸èƒ½è¿›â¼Šâ¾åæ ‡å’Œåˆ—åæ ‡çš„æ•°ä½ä¹‹å’Œâ¼¤äº k çš„æ ¼â¼¦ã€‚ ä¾‹å¦‚ï¼Œå½“k ä¸º 18 æ—¶ï¼Œæœºå™¨â¼ˆèƒ½å¤Ÿè¿›â¼Šâ½…æ ¼ï¼ˆ35,37ï¼‰ ï¼Œå› ä¸º 3+5+3+7 = 18 ã€‚ä½†æ˜¯ï¼Œå®ƒä¸èƒ½è¿›â¼Šâ½…æ ¼ï¼ˆ35,38ï¼‰ ï¼Œå› ä¸º 3+5+3+8 = 19 ã€‚è¯·é—®è¯¥æœºå™¨â¼ˆèƒ½å¤Ÿè¾¾åˆ°å¤šå°‘ä¸ªæ ¼â¼¦ï¼Ÿ</p>
<p>ç¤ºä¾‹1</p>
<p>è¾“â¼Šï¼š5,10,10
è¿”å›å€¼ï¼š21</p>
<p>ç¤ºä¾‹2</p>
<p>è¾“â¼Šï¼š10,1,100
è¿”å›å€¼ï¼š29</p>
<p>è¯´æ˜ï¼š[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],[0,8],[0,9],[0,10],[0,11],[0,12],[0,13],[0,14],[0,15],[0,16],[0,17],[0,18],[0,19],[0,20],[0,21],[0,22],[0,23],[0,24],[0,25],[0,26],[0,27],[0,28] è¿™29ç§ï¼Œåâ¾¯çš„[0,29] , [0,30] ä»¥åŠ[0,31] ç­‰ç­‰æ˜¯â½†æ³•åˆ°è¾¾çš„ã€‚</p>
<h2 data-id="heading-1">æ€è·¯åŠè§£ç­”</h2>
<h3 data-id="heading-2">DFSï¼ˆæ·±åº¦ä¼˜å…ˆæœç´¢ï¼‰</h3>
<p>æ·±åº¦ä¼˜å…ˆæœç´¢ç®—æ³•ï¼Œä¹Ÿå°±æ˜¯ DFS ,â¾¸å…ˆéœ€è¦åˆå§‹åŒ–æ•°ç»„ï¼Œæ³¨æ„æ˜¯ boolean ç±»å‹çš„â¼†å…ƒæ•°ç»„ã€‚è¾¹åˆå§‹åŒ–
è¾¹è®¡ç®—ä½æ•°çš„å’Œï¼Œåˆ¤æ–­å¦‚æœâ¼¤äºç­‰äºé˜ˆå€¼çš„è¯ï¼Œå°±ç›´æ¥ç½®ä¸º true ï¼Œä¹Ÿå°±æ˜¯å·²ç»è¢«è®¿é—®åˆ°ï¼ˆä½†æ˜¯è¿™â¼€éƒ¨åˆ†è®¡â¼Šç»“æœï¼‰ã€‚</p>
<p>ç„¶åéå†æ¯â¼€ä¸ªå…ƒç´ ï¼Œåªè¦ i ï¼Œ j ä¸åœ¨åˆæ³•çš„ç´¢å¼•èŒƒå›´æˆ–è€…æ˜¯å·²ç»è¢«è®¿é—®è¿‡ï¼Œéƒ½ä¼šç›´æ¥è¿”å›
false ã€‚</p>
<p>å¦åˆ™çš„è¯ï¼Œå¯è®¿é—®çš„æ•°é‡ +1 ï¼Œå¹¶ä¸”é€’å½’éå†ä¸Šä¸‹å·¦å³å››ä¸ªå…ƒç´ ï¼Œè¿”å›æœ€ç»ˆçš„å¯è®¿é—®çš„ä¸ªæ•°ã€‚</p>
<p>DFS ä¼šä¼˜å…ˆåŒâ¼€ä¸ªâ½…å‘ï¼Œâ¼€ç›´â¾›ä¸‹å»ï¼Œä¸æ’å—å¢™ä¸å›å¤´ï¼Œç›´åˆ°æ¡ä»¶ä¸æ»¡â¾œçš„æ—¶å€™ï¼Œæ‰ä¼šå›å¤´ã€‚å›å¤´ä¹‹åï¼Œæ¯æ¬¡åªä¼šå›å¤´â¼€æ­¥ï¼Œå¾€å¦å¤–â¼€ä¸ªâ½…å‘å»ï¼ŒåŒæ ·æ˜¯â¼€å¤´æ‰è¿›å»ã€‚</p>
<p>å‡è®¾æœ‰â¼€ä¸ª 4 x 4 çš„â½…æ ¼ï¼Œä»ç¬¬â¼€ä¸ªå¼€å§‹éå†ï¼Œå‡è®¾éå†é¡ºåºæ˜¯ä¸Šï¼Œå³ï¼Œä¸‹ï¼Œå·¦ï¼Œé‚£ä¹ˆéå†çš„é¡ºåºå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/392fc23287824ff3beb2bed62819573b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769559196&amp;x-signature=YjKHxJafxIS%2BbTX6Pj91dUz40I4%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">movingCount</span><span class="hljs-params">(<span class="hljs-type">int</span> threshold, <span class="hljs-type">int</span> rows, <span class="hljs-type">int</span> cols)</span> {
        <span class="hljs-keyword">if</span> (rows &gt; <span class="hljs-number">0</span> &amp;&amp; cols &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-type">boolean</span>[][] visited = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[rows][cols];
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; rows; i++) {
                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; cols; j++) {
                    <span class="hljs-comment">// å¦‚æœâ¼¤äºé˜ˆå€¼ï¼Œè®¾ç½®å·²è¢«è®¿é—®è¿‡</span>
                    visited[i][j] = ((getSum(i) + getSum(j)) &gt; threshold);
                }
            }
            <span class="hljs-keyword">return</span> getNum(visited, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }
    
   <span class="hljs-comment">// è·å–å¯ä»¥è¢«è®¿é—®çš„ä¸ªæ•°</span>
   <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getNum</span><span class="hljs-params">(<span class="hljs-type">boolean</span>[][] visited, <span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j, <span class="hljs-type">int</span> count)</span> {
        <span class="hljs-keyword">if</span> (i &lt; <span class="hljs-number">0</span> || j &lt; <span class="hljs-number">0</span> || i &gt;= visited.length || j &gt;= visited[<span class="hljs-number">0</span>].length ||
            visited[i][j]) {
            <span class="hljs-keyword">return</span> count;
        }
        count++;
        visited[i][j] = <span class="hljs-literal">true</span>;
        count = getNum(visited, i, j + <span class="hljs-number">1</span>, count);
        count = getNum(visited, i, j - <span class="hljs-number">1</span>, count);
        count = getNum(visited, i + <span class="hljs-number">1</span>, j, count);
        count = getNum(visited, i - <span class="hljs-number">1</span>, j, count);
        <span class="hljs-keyword">return</span> count;
   }
   
    <span class="hljs-comment">// è®¡ç®—ä½æ•°ä¹‹å’Œ</span>
   <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getSum</span><span class="hljs-params">(<span class="hljs-type">int</span> num)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">while</span> (num &gt; <span class="hljs-number">0</span>) {
            result = result + num % <span class="hljs-number">10</span>;
            num = num / <span class="hljs-number">10</span>;
        }
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šæœ€åçš„æƒ…å†µæ˜¯å°†æ‰€æœ‰çš„æ ¼â¼¦éƒ½éå†â¼€éï¼Œ O(m*n) ã€‚</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šå€ŸåŠ©äº†é¢å¤–çš„ç©ºé—´ä¿å­˜æ˜¯å¦è¢«è®¿é—®è¿‡ï¼ŒåŒæ ·ä¸ºO(m*n) ã€‚</li>
</ul>
<h3 data-id="heading-3">BFSï¼ˆâ¼´åº¦ä¼˜å…ˆæœç´¢ï¼‰</h3>
<p>â¼´åº¦ä¼˜å…ˆæœç´¢ï¼Œä¹Ÿå°±æ˜¯æ²¡è¿›â¾â¼€æ­¥ï¼Œä¼˜å…ˆæœç´¢å½“å‰ç‚¹çš„å„ä¸ªâ½…å‘ä¸Šçš„ç‚¹ï¼Œä¸æ€¥ç€å¾€ä¸‹æœç´¢ï¼Œç­‰æœç´¢å®Œå½“å‰ç‚¹çš„å„ä¸ªâ½…å‘çš„ç‚¹ï¼Œå†ä¾æ¬¡æŠŠä¹‹å‰æœç´¢çš„ç‚¹ï¼Œå–å‡ºæ¥ï¼ŒåŒæ ·å…ˆæœç´¢å‘¨è¾¹çš„ç‚¹...</p>
<p>è¿™æ ·ç›´åˆ°æ‰€æœ‰éƒ½è¢«æœç´¢å®Œæˆã€‚</p>
<p>åŒæ ·æœ‰â¼€ä¸ª 4 x 4 çš„â½…æ ¼ï¼Œä»ç¬¬â¼€ä¸ªå¼€å§‹éå†ï¼Œå‡è®¾éå†é¡ºåºæ˜¯ä¸Šï¼Œå³ï¼Œä¸‹ï¼Œå·¦ï¼Œé‚£ä¹ˆéå†çš„é¡ºåºå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0baa3a35fab447f99749e11f86011974~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769559196&amp;x-signature=zrTrnGeZob8bLf9SnzCcFgKc0Ng%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0d94609bdc340d99b5050d946922ad9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769559196&amp;x-signature=sY8CvTimTpqRJcBkv2%2BUk7wWRQM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/227d9fc051564fe0b4d68fc3ec136f34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769559196&amp;x-signature=OzEcV8UUAxLzaLvdmE3QYdPPSm4%3D" alt="" loading="lazy"/></p>
<p>åœ¨ä¸Šâ¾¯çš„è¿‡ç¨‹å›¾ç¤ºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œè®¿é—®æ˜¯æœ‰é¡ºåºçš„ï¼Œæ¯éå†â¼€ä¸ªæ–°çš„â½…å—ï¼Œéƒ½ä¼šæ ‡â¼€ä¸ªé¡ºåºï¼Œç„¶åæŒ‰ç…§é¡ºåºéå†å…¶å››ä¸ªâ½…å‘ã€‚</p>
<p>è¿™ä¹Ÿå°±æ˜¯â¼´åº¦ä¼˜å…ˆæœç´¢çš„æœ¬è´¨ï¼Œæˆ‘ä»¬éœ€è¦â¼€ä¸ªé˜Ÿåˆ—ï¼Œæ¥ä¿å­˜éå†çš„é¡ºåºï¼Œæ¯æ¬¡éƒ½ä»é˜Ÿåˆ—â¾¥â¾¯å–å‡ºâ¼€ä¸ªä½ç½®ï¼Œéå†å…¶å››å‘¨çš„â½…å—ï¼Œæ¯æ¬¡éå†åˆ°çš„ç‚¹ï¼Œéƒ½ä¼šæ”¾åˆ°é˜Ÿåˆ—â¾¥â¾¯ï¼Œè¿™æ ·ç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºçš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯å…¨éƒ¨éå†å®Œæˆã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.LinkedList;
<span class="hljs-keyword">import</span> java.util.Queue;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution13</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">movingCount</span><span class="hljs-params">(<span class="hljs-type">int</span> threshold, <span class="hljs-type">int</span> rows, <span class="hljs-type">int</span> cols)</span> {
        <span class="hljs-type">boolean</span>[][] visited = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[rows][cols];
        <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        
        Queue&lt;<span class="hljs-type">int</span>[]&gt; queue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();
        <span class="hljs-comment">// æŠŠç¬¬â¼€ä¸ªç‚¹åŠ åˆ°é˜Ÿåˆ—â¾¥â¾¯</span>
        queue.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[]{<span class="hljs-number">0</span>, <span class="hljs-number">0</span>});
        
        <span class="hljs-keyword">while</span> (queue.size() &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-comment">// â¼€ç›´å–æ•°æ®ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©º</span>
            <span class="hljs-type">int</span>[] x = queue.poll();
            <span class="hljs-comment">// å–å‡ºæ¥çš„æ•°æ®ï¼ŒåŒ…å«xï¼Œyåæ ‡</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> x[<span class="hljs-number">0</span>], j = x[<span class="hljs-number">1</span>];
            <span class="hljs-comment">// å¦‚æœè®¿é—®è¿‡æˆ–è€…ä¸ç¬¦åˆï¼Œç›´æ¥ä¸‹â¼€ä¸ª</span>
            <span class="hljs-keyword">if</span> (i &gt;= rows || j &gt;= cols || threshold &lt; getSum(i) + getSum(j) || visited[i][j]) <span class="hljs-keyword">continue</span>;
            
            <span class="hljs-comment">// ç½®ä¸ºè®¿é—®è¿‡</span>
            visited[i][j] = <span class="hljs-literal">true</span>;
            <span class="hljs-comment">// æ•°é‡å¢åŠ </span>
            count++;
            <span class="hljs-comment">// å³</span>
            queue.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[]{i + <span class="hljs-number">1</span>, j});
            <span class="hljs-comment">// ä¸‹</span>
            queue.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[]{i, j + <span class="hljs-number">1</span>});
       }
       <span class="hljs-keyword">return</span> count;
   }
   
    <span class="hljs-comment">// è®¡ç®—ä½æ•°ä¹‹å’Œ</span>
   <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getSum</span><span class="hljs-params">(<span class="hljs-type">int</span> num)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">while</span> (num &gt; <span class="hljs-number">0</span>) {
            result = result + num % <span class="hljs-number">10</span>;
            num = num / <span class="hljs-number">10</span>;
        }
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ï¼šæœ€åçš„æƒ…å†µæ˜¯å°†æ‰€æœ‰çš„æ ¼â¼¦éƒ½éå†â¼€éï¼Œ O(m*n) ã€‚</li>
<li>ç©ºé—´å¤æ‚åº¦ï¼šå€ŸåŠ©äº†é¢å¤–çš„ç©ºé—´ä¿å­˜æ˜¯å¦è¢«è®¿é—®è¿‡ï¼ŒåŒæ ·ä¸ºO(m*n) ã€‚</li>
</ul>
<h3 data-id="heading-4">åŠ¨æ€è§„åˆ’ï¼ˆæœ€ä¼˜è§£ï¼‰</h3>
<p>åˆ©ç”¨é€’æ¨å…³ç³»å¼ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚</p>
<ul>
<li>æ ¼å­(i,j)å¯è¾¾ â‡” æ•°ä½å’Œæ»¡è¶³æ¡ä»¶ âˆ§ (å·¦è¾¹æ ¼å­å¯è¾¾ âˆ¨ ä¸Šè¾¹æ ¼å­å¯è¾¾)</li>
<li>dp[i][j]è¡¨ç¤º(i,j)æ˜¯å¦å¯è¾¾ï¼ŒåŸºäºå·¦è¾¹å’Œä¸Šè¾¹æ ¼å­çš„çŠ¶æ€ï¼š<code>dp[i][j] = (digitSum(i) + digitSum(j) â‰¤ k) &amp;&amp; (dp[i-1][j] || dp[i][j-1])</code></li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">movingCount</span><span class="hljs-params">(<span class="hljs-type">int</span> m, <span class="hljs-type">int</span> n, <span class="hljs-type">int</span> k)</span> {
        <span class="hljs-keyword">if</span> (k == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
        
        <span class="hljs-comment">// dp[i][j]è¡¨ç¤ºæ ¼å­(i,j)æ˜¯å¦å¯è¾¾</span>
        <span class="hljs-type">boolean</span>[][] dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[m][n];
        dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// èµ·ç‚¹å¯è¾¾</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;     <span class="hljs-comment">// èµ·ç‚¹å·²è®¡å…¥</span>
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; m; i++) {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; n; j++) {
                <span class="hljs-comment">// è·³è¿‡èµ·ç‚¹å’Œæ•°ä½å’Œè¶…é™çš„æƒ…å†µ</span>
                <span class="hljs-keyword">if</span> ((i == <span class="hljs-number">0</span> &amp;&amp; j == <span class="hljs-number">0</span>) || digitSum(i) + digitSum(j) &gt; k) {
                    <span class="hljs-keyword">continue</span>;
                }
                
                <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å¯ä»¥ä»å·¦è¾¹æˆ–ä¸Šè¾¹åˆ°è¾¾å½“å‰æ ¼å­</span>
                <span class="hljs-keyword">if</span> (i - <span class="hljs-number">1</span> &gt;= <span class="hljs-number">0</span>) {
                    dp[i][j] |= dp[i - <span class="hljs-number">1</span>][j];  <span class="hljs-comment">// ä»ä¸Šè¾¹æ¥</span>
                }
                <span class="hljs-keyword">if</span> (j - <span class="hljs-number">1</span> &gt;= <span class="hljs-number">0</span>) {
                    dp[i][j] |= dp[i][j - <span class="hljs-number">1</span>];  <span class="hljs-comment">// ä»å·¦è¾¹æ¥</span>
                }
                
                <span class="hljs-comment">// å¦‚æœå½“å‰æ ¼å­å¯è¾¾ï¼Œè®¡æ•°åŠ 1</span>
                count += dp[i][j] ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;
            }
        }
        
        <span class="hljs-keyword">return</span> count;
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">digitSum</span><span class="hljs-params">(<span class="hljs-type">int</span> num)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">while</span> (num &gt; <span class="hljs-number">0</span>) {
            sum += num % <span class="hljs-number">10</span>;
            num /= <span class="hljs-number">10</span>;
        }
        <span class="hljs-keyword">return</span> sum;
    }
}
</code></pre>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(mn)ï¼ŒåŒé‡å¾ªç¯éå†æ‰€æœ‰æ ¼å­</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(mn)ï¼Œdpæ•°ç»„çš„ç©ºé—´</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vueé¡¹ç›®æ€§èƒ½æå‡50%ï¼Ÿè¿™5ä¸ªä¼˜åŒ–æŠ€å·§90%å¼€å‘è€…éƒ½å¿½ç•¥äº†]]></title>    <link>https://juejin.cn/post/7597311768729714688</link>    <guid>https://juejin.cn/post/7597311768729714688</guid>    <pubDate>2026-01-21T00:16:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597311768729714688" data-draft-id="7597283981185515572" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vueé¡¹ç›®æ€§èƒ½æå‡50%ï¼Ÿè¿™5ä¸ªä¼˜åŒ–æŠ€å·§90%å¼€å‘è€…éƒ½å¿½ç•¥äº†"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-21T00:16:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vueé¡¹ç›®æ€§èƒ½æå‡50%ï¼Ÿè¿™5ä¸ªä¼˜åŒ–æŠ€å·§90%å¼€å‘è€…éƒ½å¿½ç•¥äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-21T00:16:50.000Z" title="Wed Jan 21 2026 00:16:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Vueé¡¹ç›®æ€§èƒ½æå‡50%ï¼Ÿè¿™5ä¸ªä¼˜åŒ–æŠ€å·§90%å¼€å‘è€…éƒ½å¿½ç•¥äº†</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>åœ¨å½“ä»Šå‰ç«¯å¼€å‘é¢†åŸŸï¼ŒVue.jså› å…¶ç®€æ´çš„APIå’Œçµæ´»çš„æ¶æ„è€Œå¹¿å—æ¬¢è¿ã€‚ç„¶è€Œï¼Œéšç€åº”ç”¨è§„æ¨¡çš„æ‰©å¤§ï¼Œè®¸å¤šVueé¡¹ç›®éƒ½ä¼šé¢ä¸´æ€§èƒ½ç“¶é¢ˆçš„é—®é¢˜ã€‚ä»¤äººæƒŠè®¶çš„æ˜¯ï¼Œè®¸å¤šå¸¸è§çš„æ€§èƒ½ä¼˜åŒ–æœºä¼šå¾€å¾€è¢«å¤§å¤šæ•°å¼€å‘è€…å¿½è§†ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨5ä¸ªè¢«90%å¼€å‘è€…å¿½ç•¥çš„å…³é”®ä¼˜åŒ–æŠ€å·§ï¼Œè¿™äº›æ–¹æ³•å¯èƒ½å¸®åŠ©ä½ çš„Vueåº”ç”¨æ€§èƒ½æå‡é«˜è¾¾50%ã€‚æˆ‘ä»¬å°†ä»ç¼–è¯‘æ—¶ä¼˜åŒ–ã€è¿è¡Œæ—¶ä¼˜åŒ–ã€æ‡’åŠ è½½ç­–ç•¥ã€çŠ¶æ€ç®¡ç†æœ€ä½³å®è·µå’Œæ¸²æŸ“ä¼˜åŒ–ç­‰å¤šä¸ªç»´åº¦è¿›è¡Œåˆ†æã€‚</p>
<h2 data-id="heading-2">ä¸»ä½“å†…å®¹</h2>
<h3 data-id="heading-3">1. ç¼–è¯‘æ—¶ä¼˜åŒ–ï¼šåˆç†é…ç½®Webpack/Babel</h3>
<p>å¤§å¤šæ•°Vueé¡¹ç›®é€šè¿‡Vue CLIåˆ›å»ºåç›´æ¥ä½¿ç”¨é»˜è®¤é…ç½®ï¼Œä½†è¿™å¯èƒ½ä¸æ˜¯æœ€ä¼˜é€‰æ‹©ã€‚</p>
<h4 data-id="heading-4">a. ç”Ÿäº§ç¯å¢ƒå»é™¤console.log</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vue.config.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">chainWebpack</span>: <span class="hljs-function"><span class="hljs-params">config</span> =&gt;</span> {
    config.<span class="hljs-property">optimization</span>.<span class="hljs-title function_">minimizer</span>(<span class="hljs-string">'terser'</span>).<span class="hljs-title function_">tap</span>(<span class="hljs-function"><span class="hljs-params">args</span> =&gt;</span> {
      args[<span class="hljs-number">0</span>].<span class="hljs-property">terserOptions</span>.<span class="hljs-property">compress</span>.<span class="hljs-property">drop_console</span> = <span class="hljs-literal">true</span>
      <span class="hljs-keyword">return</span> args
    })
  }
}
</code></pre>
<h4 data-id="heading-5">b. BabelæŒ‰éœ€polyfill</h4>
<p>é¿å…å…¨é‡å¼•å…¥@babel/polyfillï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// babel.config.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">presets</span>: [
    [
      <span class="hljs-string">'@vue/cli-plugin-babel/preset'</span>,
      {
        <span class="hljs-attr">useBuiltIns</span>: <span class="hljs-string">'usage'</span>, <span class="hljs-comment">// å…³é”®é…ç½®</span>
        <span class="hljs-attr">corejs</span>: <span class="hljs-number">3</span>
      }
    ]
  ]
}
</code></pre>
<h4 data-id="heading-6">c. SplitChunksä¼˜åŒ–</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vue.config.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">configureWebpack</span>: {
    <span class="hljs-attr">optimization</span>: {
      <span class="hljs-attr">splitChunks</span>: {
        <span class="hljs-attr">chunks</span>: <span class="hljs-string">'all'</span>,
        <span class="hljs-attr">maxSize</span>: <span class="hljs-number">244</span> * <span class="hljs-number">1024</span>, <span class="hljs-comment">// æ‹†åˆ†ä¸º~244KBçš„å—</span>
        <span class="hljs-attr">cacheGroups</span>: {
          <span class="hljs-attr">vendors</span>: {
            <span class="hljs-attr">test</span>: <span class="hljs-regexp">/[\\/]node_modules[\\/]/</span>,
            <span class="hljs-attr">priority</span>: -<span class="hljs-number">10</span>
          },
          <span class="hljs-attr">default</span>: {
            <span class="hljs-attr">minChunks</span>: <span class="hljs-number">2</span>,
            <span class="hljs-attr">priority</span>: -<span class="hljs-number">20</span>,
            <span class="hljs-attr">reuseExistingChunk</span>: <span class="hljs-literal">true</span>
          }
        }
      }
    }
  }
}
</code></pre>
<h3 data-id="heading-7">2. Vueè¿è¡Œæ—¶ä¼˜åŒ–ï¼šå‡å°‘å“åº”å¼å¼€é”€</h3>
<h4 data-id="heading-8">a. Object.freezeå†»ç»“å¤§å‹é™æ€æ•°æ®</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> { 
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> { 
      <span class="hljs-attr">largeList</span>: <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">freeze</span>(hugeArray) <span class="hljs-comment">// Vueå°†ä¸ä¼šä¸ºå…¶æ·»åŠ å“åº”å¼ç‰¹æ€§</span>
    } 
  } 
}
</code></pre>
<h4 data-id="heading-9">b. v-onceç”¨äºé™æ€å†…å®¹ç¼“å­˜</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-once</span>&gt;</span>{{ staticContent }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<h4 data-id="heading-10">c. computedå±æ€§ç¼“å­˜å¦™ç”¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">computed</span>: { 
 <span class="hljs-comment">// Good:</span>
 <span class="hljs-title function_">optimizedData</span>(<span class="hljs-params"/>) { 
   <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">heavyCalculation</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">input</span>)
 },
  
 <span class="hljs-comment">// Better (å½“ä¾èµ–é¡¹ä¸å˜æ—¶):</span>
 <span class="hljs-title function_">memoizedData</span>(<span class="hljs-params"/>) { 
   <span class="hljs-keyword">const</span> cacheKey = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">input</span>)
   <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">_cache</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">_cache</span>.<span class="hljs-property">key</span> !== cacheKey) { 
     <span class="hljs-variable language_">this</span>.<span class="hljs-property">_cache</span> = { 
       <span class="hljs-attr">key</span>: cacheKey,
       <span class="hljs-attr">value</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">heavyCalculation</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">input</span>)
     } 
   } 
   <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_cache</span>.<span class="hljs-property">value</span> 
 } 
}
</code></pre>
<h3 data-id="heading-11">3. Smart Lazy Loadingï¼šè¶…è¶Šè·¯ç”±çº§åˆ«çš„æ‡’åŠ è½½</h3>
<h4 data-id="heading-12">a. Intersection Observerå®ç°çš„ç»„ä»¶æ‡’åŠ è½½</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// lazy-component.js  </span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">LazyComponent</span> = (<span class="hljs-params"/>) =&gt; ({
 <span class="hljs-attr">component</span>: <span class="hljs-keyword">import</span>(<span class="hljs-string">'./ExpensiveComponent.vue'</span>),
 <span class="hljs-attr">loading</span>: <span class="hljs-title class_">LoadingComponent</span>,
 <span class="hljs-attr">error</span>: <span class="hljs-title class_">ErrorComponent</span>,
 <span class="hljs-attr">delay</span>: <span class="hljs-number">200</span>, <span class="hljs-comment">// mså»¶è¿Ÿæ˜¾ç¤ºloadingç»„ä»¶</span>
 
})

<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">component</span>(<span class="hljs-string">'LazyComponent'</span>, <span class="hljs-title class_">LazyComponent</span>)
</code></pre>
<h4 data-id="heading-13">b. prefetchç­–ç•¥æ§åˆ¶ï¼ˆé€‚ç”¨äºvue-routerï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript">{
 <span class="hljs-attr">path</span>:<span class="hljs-string">'/dashboard'</span>,
 <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackPrefetchPriority:.5 */</span> <span class="hljs-string">'./views/Dashboard.vue'</span>)
}
</code></pre>
<h4 data-id="heading-14">c. webpacké­”æ³•æ³¨é‡Šæ§åˆ¶é¢„åŠ è½½è¡Œä¸ºï¼š</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Foo</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-keyword">import</span>(
 <span class="hljs-comment">/* webpackPreloadPriority:.8 */</span>
 <span class="hljs-comment">/* webpackChunkName:"group-foo" */</span>
 <span class="hljs-string">'./Foo.vue'</span>
)
</code></pre>
<h3 data-id="heading-15">4. VuexçŠ¶æ€ç®¡ç†ç²¾ç»†æ§åˆ¶</h3>
<h4 data-id="heading-16">a. getterå‡½æ•°å»é‡è®¡ç®—ï¼š</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">getters</span>:{
 <span class="hljs-title function_">activeUsers</span>(<span class="hljs-params">state</span>){  
   <span class="hljs-keyword">return</span> state.<span class="hljs-property">users</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">u</span> =&gt;</span> u.<span class="hljs-property">isActive</span>)   
   <span class="hljs-comment">// Badï¼šæ¯æ¬¡è®¿é—®éƒ½ä¼šé‡æ–°è®¡ç®—</span>
    
   <span class="hljs-comment">// Goodï¼šä½¿ç”¨reselect-likeè®°å¿†åŒ–æŠ€æœ¯  </span>
   <span class="hljs-keyword">let</span> lastState, lastResult  
   <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> {  
     <span class="hljs-keyword">if</span>(lastState === state.<span class="hljs-property">users</span> &amp;&amp; state.<span class="hljs-property">showActive</span>){  
       <span class="hljs-keyword">return</span> lastResult  
     }  
     lastState = state.<span class="hljs-property">users</span>  
     lastResult = state.<span class="hljs-property">users</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">u</span> =&gt;</span> u.<span class="hljs-property">isActive</span>)  
     <span class="hljs-keyword">return</span> lastResult  
   }   
 }
}
</code></pre>
<h4 data-id="heading-17">b. Actionæ‰¹å¤„ç†æ¨¡å¼ï¼š</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">actions</span>:{
 <span class="hljs-keyword">async</span> <span class="hljs-title function_">batchUpdate</span>(<span class="hljs-params">{ commit }, payloads</span>){
   <span class="hljs-keyword">const</span> batchedMutations = payloads.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">batch, payload</span>) =&gt;</span> {
     batch.<span class="hljs-title function_">push</span>([<span class="hljs-string">'UPDATE_ITEM'</span>, payload])
     <span class="hljs-keyword">return</span> batch;
   }, []);
   
   <span class="hljs-title function_">commit</span>(<span class="hljs-string">'BATCH_MUTATION'</span>, batchedMutations);
   
   <span class="hljs-comment">// VSä¼ ç»Ÿçš„å¤šæ¬¡commitæ–¹å¼ï¼š</span>
   <span class="hljs-comment">// payloads.forEach(payload=&gt;commit('UPDATE_ITEM',payload))</span>
 }
}  
  
<span class="hljs-attr">mutations</span>:{
 <span class="hljs-title function_">BATCH_MUTATION</span>(<span class="hljs-params">state, mutations</span>){
   mutations.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[type,payload]</span>) =&gt;</span>{...})
 }
}
</code></pre>
<h3 data-id="heading-18">5. DOMæ¸²æŸ“å±‚æ·±åº¦ä¼˜åŒ–</h3>
<h4 data-id="heading-19">a. Virtual Scrollingå…³é”®æŠ€æœ¯ç‚¹ï¼š</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">RecycleScroller</span>	
 <span class="hljs-attr">class</span>=<span class="hljs-string">"scroller"</span>	
 <span class="hljs-attr">:items</span>=<span class="hljs-string">"largeList"</span>	
 <span class="hljs-attr">:item-size</span>=<span class="hljs-string">"56"</span>	
 <span class="hljs-attr">key-field</span>=<span class="hljs-string">"id"</span>	
 <span class="hljs-attr">v-slot</span>=<span class="hljs-string">"{ item }"</span>&gt;</span>	
 <span class="hljs-tag">&lt;<span class="hljs-name">ListItem</span> <span class="hljs-attr">:item</span>=<span class="hljs-string">"item"</span>/&gt;</span>	
<span class="hljs-tag">&lt;/<span class="hljs-name">RecycleScroller</span>&gt;</span>
</code></pre>
<p>æ›¿ä»£ä¼ ç»Ÿv-foræ–¹æ¡ˆå¯å‡å°‘90%+çš„DOMèŠ‚ç‚¹ã€‚</p>
<h4 data-id="heading-20">b. CSS Containmentå±æ€§é…åˆï¼š</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.list-item</span>{
 <span class="hljs-attribute">contain</span>:layout paint style; <span class="hljs-comment">/* Chrome/Safari */</span>
 <span class="hljs-attribute">content-visibility</span>:hidden; <span class="hljs-comment">/* Firefox */</span>
}	
	
<span class="hljs-selector-class">.list-item-visible</span>{	
 <span class="hljs-attribute">content-visibility</span>:hidden;	<span class="hljs-attribute">contain</span>:none;
}	
</code></pre>
<p>å¯ä½¿æµè§ˆå™¨è·³è¿‡ä¸å¯è§å…ƒç´ çš„å¸ƒå±€å’Œç»˜åˆ¶ã€‚</p>
<h2 data-id="heading-21">æ€»ç»“</h2>
<p>æœ¬æ–‡ä»‹ç»çš„äº”ä¸ªç»´åº¦ä¼˜åŒ–ç­–ç•¥æ¶µç›–äº†ä»æ„å»ºå·¥å…·é…ç½®åˆ°è¿è¡Œæ—¶ä¼˜åŒ–çš„å®Œæ•´é“¾æ¡ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒçœŸæ­£çš„æ€§èƒ½æå‡å¾€å¾€æ¥è‡ªäºå¯¹åº”ç”¨ç‰¹æ€§çš„æ·±åˆ»ç†è§£è€Œéç›²ç›®å¥—ç”¨æ–¹æ¡ˆã€‚å»ºè®®å¼€å‘è€…é¦–å…ˆä½¿ç”¨Vue DevToolså’ŒLighthouseè¿›è¡ŒåŸºå‡†æµ‹è¯•ï¼Œè¯†åˆ«ç“¶é¢ˆåå†é’ˆå¯¹æ€§åº”ç”¨ä¸Šè¿°æŠ€å·§ã€‚è®°ä½ï¼Œ"è¿‡æ—©çš„ä¼˜åŒ–æ˜¯ä¸‡æ¶ä¹‹æº"ï¼Œä½†å½“åº”ç”¨ç¡®å®éœ€è¦æ€§èƒ½æå‡æ—¶ï¼Œè¿™äº›è¢«å¤§å¤šæ•°å¼€å‘è€…å¿½ç•¥çš„æŠ€æœ¯å¯èƒ½ä¼šå¸¦æ¥æ„æƒ³ä¸åˆ°çš„æ•ˆæœã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kotlin åç¨‹å¼‚å¸¸çš„é»„é‡‘å‡†åˆ™]]></title>    <link>https://juejin.cn/post/7597326073671974927</link>    <guid>https://juejin.cn/post/7597326073671974927</guid>    <pubDate>2026-01-21T00:26:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597326073671974927" data-draft-id="7594657393830707238" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kotlin åç¨‹å¼‚å¸¸çš„é»„é‡‘å‡†åˆ™"/> <meta itemprop="keywords" content="Kotlin,Android"/> <meta itemprop="datePublished" content="2026-01-21T00:26:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kotlin åç¨‹å¼‚å¸¸çš„é»„é‡‘å‡†åˆ™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-21T00:26:05.000Z" title="Wed Jan 21 2026 00:26:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;color:#282d36}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px;color:#2f845e}.markdown-body h2{font-size:22px;display:inline-block;font-weight:700;background:#2f845e;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(47,132,194,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 32px);border-bottom:3px solid #2f845e}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%;box-shadow:6px 6px 6px #888}.markdown-body hr{border:none;border-top:1px solid rgba(66,185,131,.15);margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:16px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#262626;border:1px solid #2f845e;border-top:8px solid #2f845e;background:linear-gradient(180deg,rgba(66,185,131,.1),transparent)!important}.markdown-body pre&gt;code.hljs[lang]:before{top:8px!important;color:#2f845e!important}.markdown-body pre&gt;code.language-awesome_error{border:1px solid #ff4d4f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ff4d4f!important;background:#fff2f0!important}.markdown-body pre&gt;code.language-awesome_error:before{content:"!"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ff4d4f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_warn{border:1px solid #ffc46f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ffc46f!important;background:#fffbe6!important}.markdown-body pre&gt;code.language-awesome_warn:before{content:"â˜‚"!important;position:absolute;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ffc46f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_success{border:1px solid #52c41a!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#52c41a!important;background:#f6ffed!important}.markdown-body pre&gt;code.language-awesome_success:before{content:"âœ“"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#52c41a!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_info{border:1px solid #1890ff!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#1890ff!important;background:#e6f7ff!important}.markdown-body pre&gt;code.language-awesome_info:before{content:"i"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#1890ff!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body strong{background-color:inherit;color:#2f845e}.markdown-body em{background-color:inherit;color:#949415}.markdown-body a{text-decoration:none;color:#2f8e54;border-bottom:1px solid #3f9e64}.markdown-body a:active,.markdown-body a:hover{color:#3f9e64}.markdown-body a[class^=footnote]{margin-left:4px}.markdown-body a:before{content:"â¤ "}.markdown-body table{font-size:12px;width:100%;max-width:100%;overflow:auto;border:2px solid #2f8e54}.markdown-body thead{background:#2f8e54;color:#fff;text-align:left;font-weight:700}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:22px}.markdown-body td{min-width:120px}.markdown-body blockquote{padding:1px 22px;margin:22px 0;border-left:6px solid #2f845e;background-color:rgba(66,185,131,.1);border-radius:2px}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#2f845e}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px;color:#282d36}.markdown-body del{color:#2f845e}.markdown-body input[type=checkbox]:checked:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA/klEQVQ4T72TMU7DQBBF318XdFR06egQEnAXRINEGlqgowoIR8AF4AZOZ4JEGq5AC5EixBU4A55BNrEVHAcSBTHlaubt37/zxZKlcn7n6mDPXJvz8IJ89HzWu8t7C8D2dfsY52ae4apHnLx0ktsCsHXZjiUuFgG40x2eJ/H/AhztB+zDUTpLwWj8jGkzxSHiHaMPrDQC8sMoilKzLAUqiKQjmb+ZuAdW80tmelCHODoNgSfP7AFprTTaRTzsJN1GEyuIZ7uW6TEEHwCtyV/6EVBKJHhfzgC0Xv/iXwEFBF4FG0378bd7sPQq5xK/hSnk6sdlX3mZrKkwLZKBeu8n9XuWEUE7X+YAAAAASUVORK5CYII=);position:relative;top:-1px;left:-1px}.markdown-body .math .katex{font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}@media (max-width:720px){.markdown-body h1{font-size:22px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="xcode">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.xml .hljs-meta{color:silver}.hljs-comment,.hljs-quote{color:#007400}.hljs-attribute,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#aa0d91}.hljs-template-variable,.hljs-variable{color:#3f6e74}.hljs-code,.hljs-meta-string,.hljs-string{color:#c41a16}.hljs-link,.hljs-regexp{color:#0e0eff}.hljs-bullet,.hljs-number,.hljs-symbol,.hljs-title{color:#1c00cf}.hljs-meta,.hljs-section{color:#643820}.hljs-built_in,.hljs-builtin-name,.hljs-class .hljs-title,.hljs-params,.hljs-type{color:#5c2699}.hljs-attr{color:#836c28}.hljs-subst{color:#000}.hljs-formula{background-color:#eee;font-style:italic}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-selector-class,.hljs-selector-id{color:#9b703f}.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0ca5b7edf22418d94601a1398bba020~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769559965&amp;x-signature=LziwAwIiP2DImyzd71500K28jNs%3D" alt="0.jpg" loading="lazy"/></p>
<p>ä¹‹å‰æˆ‘å†™è¿‡ä¸€ç¯‡æ–‡ç«  <a href="https://juejin.cn/post/7497895954102468648" target="_blank" title="https://juejin.cn/post/7497895954102468648">Kotlinåç¨‹å¼‚å¸¸ä¸€æ–‡é€š</a>ï¼Œé‚£ç¯‡æ–‡ç« ç›´æ¥ä»å¼‚å¸¸çš„å‡½æ•°å…¥æ‰‹ï¼Œè®²è¿°äº† Kotlin åç¨‹çš„ç‰¹ç‚¹å’Œéƒ¨åˆ†ç”¨æ³•ã€‚</p>
<p>æˆ‘æŠŠé‚£ç¯‡æ–‡ç« åˆ†äº«ç»™äº†åŒäº‹ï¼Œè¿‡äº†ä¸€æ®µæ—¶é—´ï¼Œä»–è¿˜æ˜¯æ¥é—®æˆ‘ï¼š<code>coroutineScope</code> å¤„ç†å¼‚å¸¸æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ</p>
<p>è™½ç„¶é‚£ç¯‡æ–‡ç« æˆ‘è®¤ä¸ºå†™çš„éå¸¸æ˜ç¡®ï¼Œä½†æ˜¯æˆ‘æƒ³ä»–æ—¢ç„¶è®°ä¸ä½ï¼Œå¯èƒ½å¤ªæ•™ç§‘ä¹¦äº†ã€‚æˆ‘å‘Šè¯‰ä»–ï¼Œä½ ç­‰æˆ‘ä¸‹ç¯‡æ–‡ç« ï¼Œæˆ‘ç»™ä½ è®²ä¸ªæ˜æ˜ç™½ç™½ã€‚</p>
<p>äºæ˜¯ï¼Œæˆ‘æ‰“ç®—ä»æ¡ˆä¾‹å…¥æ‰‹ï¼Œæ¥å‡ æ¡é»„é‡‘å‡†åˆ™ï¼Œä¸€ç¯‡æ–‡ç« ææ‡‚åœ¨ Kotlin åç¨‹ä¸­å¦‚ä½•å¤„ç†å¼‚å¸¸ã€‚</p>
<p>åç¨‹å¼‚å¸¸å¤„ç†çš„æ ¸å¿ƒæœºåˆ¶æ˜¯<strong>ç»“æ„åŒ–å¹¶å‘</strong>ã€‚</p>
<p>è¿™æ˜¯ Kotlin åç¨‹çš„è®¾è®¡åŸåˆ™ï¼Œä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåç¨‹å¼‚å¸¸æœ‰ç‚¹éš¾å¤„ç†çš„åŸå› ã€‚</p>
<p>ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€æ£µä»»åŠ¡æ ‘ï¼šåªè¦æŸä¸ªå­åç¨‹å› å¼‚å¸¸å¤±è´¥ï¼Œå°±ä¼šç«‹å³é€šçŸ¥çˆ¶åç¨‹ï¼›çˆ¶åç¨‹ä¼šé©¬ä¸Šå–æ¶ˆæ‰€æœ‰å…¶ä»–å­åç¨‹ï¼Œéšåè‡ªèº«ä¹Ÿè¢«å–æ¶ˆï¼Œå¹¶å°†å¼‚å¸¸ç»§ç»­å‘ä¸Šä¼ æ’­ã€‚</p>
<p>è¿™ç§æœºåˆ¶èƒ½ç¡®ä¿ä¸ä¼šæœ‰ä»»ä½•â€œå­¤å„¿åç¨‹â€è¢«é—æ¼ï¼Œè®©åç¨‹çš„ç”Ÿå‘½å‘¨æœŸå§‹ç»ˆå¤„äºå¯æ§çŠ¶æ€ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬ç»“åˆå®é™…å¼€å‘åœºæ™¯ï¼Œæ‹†è§£åç¨‹å¼‚å¸¸å¤„ç†çš„æ ¸å¿ƒé€»è¾‘å’Œæ­£ç¡®å§¿åŠ¿ã€‚</p>
<h2 data-id="heading-0">åœºæ™¯ä¸€ï¼šä½¿ç”¨ launch</h2>
<p><code>launch</code> æ˜¯å…¸å‹çš„ â€œfire-and-forgetï¼ˆå‘èµ·å³å¿˜ï¼‰â€å‹åç¨‹æ„å»ºå™¨ï¼Œé€‚åˆä¸éœ€è¦è¿”å›ç»“æœçš„ä»»åŠ¡ã€‚ä½†å®ƒçš„å¼‚å¸¸å¤„ç†é€»è¾‘å¾ˆå®¹æ˜“è¸©å‘ï¼Œæ–°æ‰‹å¸¸åœ¨è¿™é‡Œæ ½è·Ÿå¤´ã€‚</p>
<h3 data-id="heading-1">é”™è¯¯åšæ³•ï¼šåœ¨ launch å¤–å±‚å¥— try-catch</h3>
<p>è¿™æ˜¯é«˜é¢‘é”™è¯¯ç”¨æ³•ï¼šæŠŠ <code>launch</code> è°ƒç”¨åŒ…è£¹åœ¨ <code>try-catch</code> é‡Œï¼Œè¿™æ ·åš<strong>æ ¹æœ¬æ— æ³•æ•è·åç¨‹å†…éƒ¨æŠ›å‡ºçš„å¼‚å¸¸</strong>ã€‚</p>
<h3 data-id="heading-2">é—®é¢˜åŸå› </h3>
<p><code>launch</code> ä¼šç«‹å³è¿”å›ï¼Œè€Œåç¨‹ä½“é‡Œçš„ä»£ç æ˜¯åœ¨åå°çº¿ç¨‹å¼‚æ­¥æ‰§è¡Œçš„ã€‚ç­‰å¼‚å¸¸çœŸæ­£æŠ›å‡ºæ—¶ï¼Œå¤–å±‚çš„ <code>try-catch</code> æ—©å°±æ‰§è¡Œå®Œäº†ã€‚æœ€ç»ˆå¼‚å¸¸ä¼šä¸€è·¯å†’æ³¡åˆ°é¡¶å±‚å¼‚å¸¸å¤„ç†å™¨ï¼Œè‹¥æ— äººå¤„ç†ï¼Œåº”ç”¨å°±ä¼šç›´æ¥å´©æºƒã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"Before launch"</span>)
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// è¿™ä¸ª launch å—ä¼šæŠ›å‡ºå¼‚å¸¸</span>
        launch {
            println(<span class="hljs-string">"Inside launch: Throwing exception..."</span>)
            delay(<span class="hljs-number">500</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span>
            <span class="hljs-keyword">throw</span> RuntimeException(<span class="hljs-string">"Something went wrong!"</span>)
        }
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        <span class="hljs-comment">// âŒ è¿™æ®µä»£ç æ°¸è¿œä¸ä¼šæ‰§è¡Œ âŒ</span>
        println(<span class="hljs-string">"Caught exception: <span class="hljs-variable">$e</span>"</span>)
    }
    println(<span class="hljs-string">"After launch"</span>)
    delay(<span class="hljs-number">1000</span>) <span class="hljs-comment">// ä¿æŒä¸»çº¿ç¨‹å­˜æ´»ï¼Œè§‚å¯Ÿå´©æºƒç°è±¡</span>
    println(<span class="hljs-string">"Main finished"</span>)
}
</code></pre>
<pre><code class="hljs language-php" lang="php">Before launch
After launch
Inside launch: Throwing exception...
<span class="hljs-built_in">Exception</span> in thread <span class="hljs-string">"main"</span> java.lang.<span class="hljs-built_in">RuntimeException</span>: Something went wrong!
...
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œâ€œCaught exceptionâ€ ä»æœªæ‰“å°ï¼Œç¨‹åºç›´æ¥å´©æºƒã€‚</p>
<h3 data-id="heading-3">æ­£ç¡®åšæ³•ï¼šåœ¨ launch å†…éƒ¨ä½¿ç”¨ try-catch</h3>
<p>è¦å¤„ç†æŸä¸ª <code>launch</code> åç¨‹çš„å¼‚å¸¸ï¼Œå¿…é¡»æŠŠ <code>try-catch</code> ç›´æ¥æ”¾åœ¨åç¨‹çš„ <strong>lambda</strong> è¡¨è¾¾å¼å†…éƒ¨ã€‚</p>
<p><em>è¿™ä¸ªåšæ³•ç®€ç›´æ˜¯å¼‚å¸¸å¤„ç†çš„å¤æ³•æ•è·ï¼</em></p>
<p>è¿™æ ·èƒ½è®©å¼‚å¸¸å¤„ç†é€»è¾‘ç´§è·Ÿå¼‚å¸¸å‘ç”Ÿçš„ä½ç½®â€”â€”ä¹Ÿå°±æ˜¯åç¨‹è‡ªèº«çš„æ‰§è¡Œè·¯å¾„ä¸Šã€‚åªæœ‰è¿™æ ·ï¼Œæ‰èƒ½ä¼˜é›…å¤„ç†é”™è¯¯ï¼Œé¿å…æ•´ä¸ªä½œç”¨åŸŸå´©æºƒã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"Before launch"</span>)
    launch {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// é£é™©ä»£ç æ”¾åœ¨ try å—ä¸­</span>
            println(<span class="hljs-string">"Inside launch: Doing some work..."</span>)
            delay(<span class="hljs-number">500</span>)
            <span class="hljs-keyword">throw</span> RuntimeException(<span class="hljs-string">"Oops, failed!"</span>)
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            <span class="hljs-comment">// âœ… æ­£ç¡®æ•è·å¼‚å¸¸</span>
            println(<span class="hljs-string">"Caught exception inside launch: <span class="hljs-subst">${e.message}</span>"</span>)
        }
    }
    println(<span class="hljs-string">"After launch"</span>)
    delay(<span class="hljs-number">1000</span>) <span class="hljs-comment">// ç­‰å¾… launch æ‰§è¡Œå®Œæˆ</span>
    println(<span class="hljs-string">"Main finished"</span>)
}
</code></pre>
<pre><code class="hljs language-Plain" lang="Plain">
Before launch
After launch
Inside launch: Doing some work...
Caught exception inside launch: Oops, failed!
Main finished
</code></pre>
<p>æ­¤æ—¶ç¨‹åºèƒ½æ­£å¸¸å¤„ç†å¼‚å¸¸ï¼Œä¸ä¼šå´©æºƒã€‚</p>
<h2 data-id="heading-4">åœºæ™¯äºŒï¼šä½¿ç”¨ async æ„å»ºå™¨</h2>
<p>å½“éœ€è¦æ‰§è¡Œä»»åŠ¡å¹¶åç»­è·å–ç»“æœæ—¶ï¼Œç”¨ <code>async</code> æ„å»ºå™¨ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ª <code>Deferred</code> å¯¹è±¡ã€‚<code>async</code> çš„å¼‚å¸¸å¤„ç†é€»è¾‘å’Œ <code>launch</code> ä¸åŒâ€”â€”å®ƒä¼šâ€œæš‚å­˜â€å¼‚å¸¸ï¼Œç›´åˆ°ä½ è°ƒç”¨ <code>await()</code> è·å–ç»“æœæ—¶æ‰ä¼šæŠ›å‡ºã€‚</p>
<h3 data-id="heading-5">é”™è¯¯åšæ³•ï¼šåœ¨ async è°ƒç”¨å‘¨å›´å¥— try-catch</h3>
<p>ä»…æŠŠ <code>async</code> æœ¬èº«åŒ…è£¹åœ¨ <code>try-catch</code> é‡Œæ˜¯æ— æ•ˆçš„ã€‚</p>
<h3 data-id="heading-6">é—®é¢˜åŸå› </h3>
<p><code>async</code> ä¼šç«‹å³è¿”å› <code>Deferred</code> å¯¹è±¡ï¼Œåç¨‹å†…éƒ¨çš„å¼‚å¸¸ä¼šè¢«å­˜å‚¨åœ¨è¿™ä¸ªå¯¹è±¡ä¸­ï¼Œç­‰å¾…ä½ æ˜¾å¼è°ƒç”¨ <code>await()</code> æ—¶æ‰ä¼šæš´éœ²ã€‚å› æ­¤ï¼Œåœ¨ <code>async</code> å¤–å±‚ <code>try-catch</code> æ ¹æœ¬æ•è·ä¸åˆ°è¿™ä¸ªå»¶è¿Ÿå‡ºç°çš„å¼‚å¸¸ã€‚</p>
<h3 data-id="heading-7">æ­£ç¡®åšæ³•ï¼šåœ¨ await() è°ƒç”¨å‘¨å›´ç”¨ try-catch</h3>
<p>åªæœ‰è°ƒç”¨ <code>await()</code> è·å–ç»“æœæ—¶ï¼Œ<code>async</code> å†…éƒ¨çš„å¼‚å¸¸æ‰ä¼šè¢«é‡æ–°æŠ›å‡ºâ€”â€”è¿™æ˜¯å¼‚å¸¸çœŸæ­£â€œæ˜¾ç°â€çš„æ—¶åˆ»ã€‚</p>
<p>è¿™ç§è®¾è®¡è®©ä½ å¯ä»¥è‡ªä¸»å†³å®šå¤„ç†å¤±è´¥çš„æ—¶æœºå’Œæ–¹å¼ã€‚å¼‚å¸¸æ˜¯â€œå»¶è¿Ÿç»“æœâ€çš„ä¸€éƒ¨åˆ†ï¼Œåªæœ‰ä¸»åŠ¨è¯·æ±‚ç»“æœæ—¶æ‰ä¼šè§¦å‘å¼‚å¸¸ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"Before async"</span>)
    <span class="hljs-keyword">val</span> deferredResult: Deferred&lt;String&gt; = async {
        println(<span class="hljs-string">"Inside async: About to fail..."</span>)
        delay(<span class="hljs-number">500</span>)
        <span class="hljs-keyword">throw</span> IllegalStateException(<span class="hljs-string">"Async operation failed!"</span>)
        <span class="hljs-string">"This will never be returned"</span>
    }
    println(<span class="hljs-string">"After async"</span>)
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// å¼‚å¸¸åœ¨è°ƒç”¨ await() æ—¶æŠ›å‡º</span>
        <span class="hljs-keyword">val</span> result = deferredResult.await()
        println(<span class="hljs-string">"Result: <span class="hljs-variable">$result</span>"</span>)
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        <span class="hljs-comment">// âœ… æ­£ç¡®æ•è·å¼‚å¸¸</span>
        println(<span class="hljs-string">"Caught exception on await: <span class="hljs-subst">${e.message}</span>"</span>)
    }
    println(<span class="hljs-string">"Main finished"</span>)
}
</code></pre>
<pre><code class="hljs language-vbnet" lang="vbnet">
Before <span class="hljs-keyword">async</span>
After <span class="hljs-keyword">async</span>
Inside <span class="hljs-keyword">async</span>: About <span class="hljs-keyword">to</span> fail...
Caught exception <span class="hljs-keyword">on</span> <span class="hljs-built_in">await</span>: <span class="hljs-keyword">Async</span> operation failed!
Main finished
Exception <span class="hljs-keyword">in</span> thread <span class="hljs-string">"main"</span> java.lang.IllegalStateException: <span class="hljs-keyword">Async</span> operation failed!
... (å †æ ˆä¿¡æ¯) ...
</code></pre>
<p>æ³¨æ„ï¼šè™½ç„¶ <code>catch</code> å—æˆåŠŸæ•è·äº†å¼‚å¸¸ï¼Œä½†ç”±äºé¡¶å±‚å¼‚å¸¸æœªå¤„ç†ï¼Œç¨‹åºä»ä¼šå´©æºƒã€‚</p>
<p>è¿™é‡Œæ­£å¥½ä½“ç°äº†åç¨‹å¼‚å¸¸å‘ä¸Šä¼ æ’­çš„ç‰¹æ€§ã€‚</p>
<p>è‹¥è¦å®Œå…¨é¿å…å´©æºƒï¼Œéœ€åœ¨é¡¶å±‚æ·»åŠ å¼‚å¸¸å¤„ç†é€»è¾‘ï¼Œæˆ–ä½¿ç”¨ <code>CoroutineScope</code> çš„å¼‚å¸¸å¤„ç†å™¨ã€‚</p>
<p>æˆ–è€…ï¼Œä½ ç»§ç»­å¾€ä¸‹çœ‹ï¼</p>
<h3 data-id="heading-8">æ›¿ä»£æ–¹æ¡ˆï¼šåœ¨ async å†…éƒ¨ä½¿ç”¨ try-catch</h3>
<p>åœ¨ <code>async</code> å†…éƒ¨å¤„ç†å¼‚å¸¸ï¼Œèƒ½å®ç°é”™è¯¯æœ¬åœ°åŒ–ï¼Œå¹¶å¯æ ¹æ®å¤„ç†é€»è¾‘ä» <code>catch</code> å—è¿”å›ç»“æœã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>Deferred</code> å¯¹è±¡è¿”å›åä¸ä¼šå†æŠ›å‡ºå¼‚å¸¸â€”â€”å› ä¸ºå¼‚å¸¸å·²ç»æå‰å¤„ç†å®Œæ¯•ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"Before async"</span>)
    <span class="hljs-keyword">val</span> deferredResult = async {
        <span class="hljs-keyword">try</span> {
            println(<span class="hljs-string">"Inside async: About to fail..."</span>)
            delay(<span class="hljs-number">500</span>)
            <span class="hljs-keyword">throw</span> IllegalStateException(<span class="hljs-string">"Async operation failed!"</span>)
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            println(<span class="hljs-string">"Caught exception inside async: <span class="hljs-subst">${e.message}</span>"</span>)
            <span class="hljs-keyword">return</span><span class="hljs-symbol">@async</span> <span class="hljs-string">"Fallback result"</span> <span class="hljs-comment">// å¼‚å¸¸å¤„ç†åè¿”å›é»˜è®¤ç»“æœ</span>
        }
        <span class="hljs-string">"This will never be returned"</span>
    }
    println(<span class="hljs-string">"After async"</span>)
    <span class="hljs-keyword">val</span> result = deferredResult.await()
    println(<span class="hljs-string">"Result: <span class="hljs-variable">$result</span>"</span>)
    println(<span class="hljs-string">"Main finished"</span>)
}
</code></pre>
<pre><code class="hljs language-vbnet" lang="vbnet">
Before <span class="hljs-keyword">async</span>
After <span class="hljs-keyword">async</span>
Inside <span class="hljs-keyword">async</span>: About <span class="hljs-keyword">to</span> fail...
Caught exception inside <span class="hljs-keyword">async</span>: <span class="hljs-keyword">Async</span> operation failed!
<span class="hljs-symbol">Result:</span> Fallback result
Main finished
</code></pre>
<p>æ­¤æ—¶ç¨‹åºä¸ä¼šå´©æºƒï¼Œå› ä¸ºå¼‚å¸¸å·²åœ¨ <code>async</code> å†…éƒ¨å¤„ç†å®Œæ¯•ï¼Œ<code>await()</code> èƒ½æ­£å¸¸è·å–åˆ° <code>catch</code> å—è¿”å›çš„ç»“æœã€‚</p>
<h2 data-id="heading-9">åœºæ™¯ä¸‰ï¼šçˆ¶å­åç¨‹å…³ç³»</h2>
<p>è¿™æ˜¯ç»“æ„åŒ–å¹¶å‘çš„æ ¸å¿ƒä»·å€¼æ‰€åœ¨ã€‚<code>coroutineScope</code> ä¼šç­‰å¾…æ‰€æœ‰å­åç¨‹å®Œæˆï¼Œä¸€æ—¦ä»»æ„ä¸€ä¸ªå­åç¨‹å¤±è´¥ï¼Œæ•´ä¸ªä½œç”¨åŸŸä¼šç«‹å³å–æ¶ˆå…¶ä»–æ‰€æœ‰å­åç¨‹ï¼Œéšåè‡ªèº«ä¹Ÿå¤±è´¥ã€‚</p>
<h3 data-id="heading-10">ä¸€ä¸ªå­åç¨‹å¤±è´¥ï¼Œå…¨ä½œç”¨åŸŸå–æ¶ˆ</h3>
<p>è¿™ç§æœºåˆ¶èƒ½é˜²æ­¢ç¨‹åºè¿›å…¥ä¸ä¸€è‡´çŠ¶æ€ã€‚å¦‚æœæŸä¸ªå…³é”®æ“ä½œå¤±è´¥ï¼Œå–æ¶ˆæ•´ä¸ªå…³è”æ“ä½œè¿œæ¯”è®©å…¶ä»–éƒ¨åˆ†ç»§ç»­è¿è¡Œæ›´å®‰å…¨ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"Starting the scope..."</span>)
    <span class="hljs-keyword">try</span> {
        coroutineScope { <span class="hljs-comment">// åˆ›å»ºæ–°ä½œç”¨åŸŸ</span>
            launch {
                <span class="hljs-keyword">try</span> {
                    println(<span class="hljs-string">"Child 1: Working for 1000ms..."</span>)
                    delay(<span class="hljs-number">1000</span>)
                    println(<span class="hljs-string">"Child 1: Finished."</span>) <span class="hljs-comment">// ä¸ä¼šæ‰§è¡Œ</span>
                } <span class="hljs-keyword">finally</span> {
                    println(<span class="hljs-string">"Child 1: I was cancelled!"</span>)
                }
            }

            launch {
                println(<span class="hljs-string">"Child 2: Working for 500ms then failing..."</span>)
                delay(<span class="hljs-number">500</span>)
                <span class="hljs-keyword">throw</span> RuntimeException(<span class="hljs-string">"Child 2 failed!"</span>)
            }
        }
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        <span class="hljs-comment">// Child 2 çš„å¼‚å¸¸å‘ä¸Šä¼ æ’­åˆ°çˆ¶ä½œç”¨åŸŸå¹¶è¢«æ•è·</span>
        println(<span class="hljs-string">"Caught exception in parent scope: <span class="hljs-subst">${e.message}</span>"</span>)
    }
    println(<span class="hljs-string">"Scope finished."</span>)
}
</code></pre>
<pre><code class="hljs language-Plain" lang="Plain">
Starting the scope...
Child 1: Working for 1000ms...
Child 2: Working for 500ms then failing...
Child 1: I was cancelled!
Caught exception in parent scope: Child 2 failed!
Scope finished.
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒChild 2 å¤±è´¥åï¼ŒChild 1 è¿˜æ²¡å®Œæˆå·¥ä½œå°±è¢«ç«‹å³å–æ¶ˆäº†ã€‚</p>
<h3 data-id="heading-11">åµŒå¥—ä½œç”¨åŸŸçš„å¼‚å¸¸ä¼ æ’­</h3>
<p>åœ¨åç¨‹ä½œç”¨åŸŸå†…åµŒå¥—å¦ä¸€ä¸ª <code>coroutineScope</code> æ—¶ï¼Œå†…å±‚ä½œç”¨åŸŸä¼šéµå¾ªåŒæ ·çš„â€œå¤±è´¥å³å–æ¶ˆâ€è§„åˆ™ã€‚</p>
<p>å¦‚æœçˆ¶ä½œç”¨åŸŸå¤±è´¥ï¼Œå†…å±‚ä½œç”¨åŸŸä¼šè¢«å–æ¶ˆï¼›åä¹‹ï¼Œå†…å±‚ä½œç”¨åŸŸçš„ä»»æ„å­åç¨‹å¤±è´¥ï¼Œä¹Ÿä¼šå¯¼è‡´å†…å±‚æ‰€æœ‰å­åç¨‹å–æ¶ˆï¼Œå¹¶å°†å¼‚å¸¸ä¼ æ’­åˆ°çˆ¶ä½œç”¨åŸŸã€‚è¿™ç§åµŒå¥—ç»“æ„ç¡®ä¿äº†æ•´ä¸ªä»»åŠ¡æ ‘çš„ä¸€è‡´æ€§å’Œå¯æ§æ€§ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"Starting the scope..."</span>)
    launch {
        println(<span class="hljs-string">"Parent: Working for 500ms then failing..."</span>)
        delay(<span class="hljs-number">500</span>)
        <span class="hljs-comment">// æŠ›å‡ºä¸€ä¸ªä¸Šå±‚å¼‚å¸¸</span>
        <span class="hljs-keyword">throw</span> RuntimeException(<span class="hljs-string">"Parent failed!"</span>)
    }
    <span class="hljs-keyword">try</span> {
        coroutineScope { <span class="hljs-comment">// åˆ›å»ºæ–°ä½œç”¨åŸŸ</span>
            launch {
                <span class="hljs-keyword">try</span> {
                    println(<span class="hljs-string">"Child 1: Working for 1000ms..."</span>)
                    delay(<span class="hljs-number">1000</span>)
                    println(<span class="hljs-string">"Child 1: Finished."</span>) <span class="hljs-comment">// ä¸ä¼šæ‰§è¡Œ</span>
                } <span class="hljs-keyword">finally</span> {
                    println(<span class="hljs-string">"Child 1: I was cancelled!"</span>)
                }
            }
        }
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        <span class="hljs-comment">// ä¸Šå±‚å¼‚å¸¸å¯¼è‡´åç¨‹å–æ¶ˆå¹¶è¢«æ•è·</span>
        println(<span class="hljs-string">"Caught exception in scope: <span class="hljs-subst">${e.message}</span>"</span>)
    }
}
</code></pre>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">Starting</span> <span class="hljs-string">the</span> <span class="hljs-string">scope...</span>
<span class="hljs-attr">Parent:</span> <span class="hljs-string">Working</span> <span class="hljs-string">for</span> <span class="hljs-string">500ms</span> <span class="hljs-string">then</span> <span class="hljs-string">failing...</span>
<span class="hljs-attr">Child 1:</span> <span class="hljs-string">Working</span> <span class="hljs-string">for</span> <span class="hljs-string">1000ms...</span>
<span class="hljs-attr">Child 1:</span> <span class="hljs-string">I</span> <span class="hljs-string">was</span> <span class="hljs-string">cancelled!</span>
<span class="hljs-attr">Caught exception in scope:</span> <span class="hljs-string">Parent</span> <span class="hljs-string">job</span> <span class="hljs-string">is</span> <span class="hljs-string">Cancelling</span>
<span class="hljs-string">...</span>
</code></pre>
<h2 data-id="heading-12">åœºæ™¯å››ï¼šéš”ç¦»</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5848ba38d0e44e79ebe58c3d2477b6f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769559965&amp;x-signature=8DBhvOgNfjptcIN9%2F8uT1XqcLgg%3D" alt="1.jpg" loading="lazy"/></p>
<p>å¦‚æœå¸Œæœ›æŸä¸ªå­åç¨‹çš„å¤±è´¥ä¸å½±å“å…¶ä»–å…„å¼Ÿåç¨‹ï¼Œå°±ç”¨ <code>supervisorScope</code>â€”â€”å®ƒä¼šè¦†ç›–çˆ¶ä½œç”¨åŸŸçš„å–æ¶ˆç­–ç•¥ã€‚</p>
<h3 data-id="heading-13">ä½¿ç”¨æ€è·¯</h3>
<p><code>supervisorScope</code> ä¸­ç›´æ¥å­åç¨‹çš„å¼‚å¸¸ï¼Œä¸ä¼šè§¦å‘çˆ¶ä½œç”¨åŸŸæˆ–å…„å¼Ÿåç¨‹çš„å–æ¶ˆã€‚è¿™ç§ç‰¹æ€§åœ¨ UI åº”ç”¨ä¸­ç‰¹åˆ«å®ç”¨ï¼Œæ¯”å¦‚å¤šä¸ªç‹¬ç«‹ä»»åŠ¡å¹¶è¡Œè¿è¡Œæ—¶ï¼Œä¸€ä¸ªä»»åŠ¡å‡ºé”™ä¸è¯¥å¯¼è‡´æ•´ä¸ªç•Œé¢å¡æ­»ã€‚</p>
<p>é‡è¦æç¤ºï¼šç›‘ç£æœºåˆ¶ä»…å¯¹<strong>ç›´æ¥å­åç¨‹</strong>ç”Ÿæ•ˆã€‚</p>
<p>è¿™ä¸€ç‚¹æˆ‘å‘ç°å¾ˆå¤šå¼€å‘è€…åŒ…æ‹¬æˆ‘çš„åŒäº‹ä¹Ÿå¿½ç•¥äº†ï¼ä½ å¯ä»¥è¿™æ ·è®°ä½ï¼š</p>
<p>çˆ¸çˆ¸åªç®¡å„¿å­ï¼Œç®¡ä¸ç€å­™å­ï¼</p>
<p>å­™å­è°ç®¡ï¼Ÿå„¿å­ç®¡ï¼</p>
<p>å½“ç„¶ï¼Œå¦‚æœåœ¨ <code>supervisorScope</code> å†…éƒ¨åµŒå¥— <code>coroutineScope</code>ï¼Œè¿™ä¸ªå†…å±‚ä½œç”¨åŸŸä»éµå¾ªâ€œå¤±è´¥å³å–æ¶ˆâ€è§„åˆ™â€”â€”å…¶å†…éƒ¨ä»»æ„å­åç¨‹å¤±è´¥ï¼Œéƒ½ä¼šå¯¼è‡´å†…å±‚æ‰€æœ‰å­åç¨‹è¢«å–æ¶ˆã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"Starting the supervisor scope..."</span>)
    <span class="hljs-keyword">try</span> {
        supervisorScope { <span class="hljs-comment">// å­åç¨‹å¤±è´¥éš”ç¦»</span>
            launch {
                println(<span class="hljs-string">"Child 1: Working for 500ms then failing..."</span>)
                delay(<span class="hljs-number">500</span>)
                <span class="hljs-keyword">throw</span> RuntimeException(<span class="hljs-string">"Child 1 failed!"</span>)
            }

            launch {
                <span class="hljs-keyword">try</span> {
                    println(<span class="hljs-string">"Child 2: Working for 1000ms..."</span>)
                    delay(<span class="hljs-number">1000</span>)
                    println(<span class="hljs-string">"Child 2: Finished successfully!"</span>) <span class="hljs-comment">// ä¼šæ‰§è¡Œ</span>
                } <span class="hljs-keyword">finally</span> {
                    println(<span class="hljs-string">"Child 2: I was NOT cancelled!"</span>)
                }
            }
        }
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        <span class="hljs-comment">// âŒ ä¸ä¼šæ‰§è¡Œï¼ŒsupervisorScope ä¸ä¼ æ’­å­åç¨‹å¼‚å¸¸</span>
        println(<span class="hljs-string">"Caught exception in parent scope: <span class="hljs-variable">$e</span>"</span>)
    }
    println(<span class="hljs-string">"Supervisor scope finished."</span>)
}
</code></pre>
<pre><code class="hljs language-Plain" lang="Plain">
Starting the supervisor scope...
Child 1: Working for 500ms then failing...
Child 2: Working for 1000ms...
Exception in thread "main" java.lang.RuntimeException: Child 1 failed!
... (å †æ ˆä¿¡æ¯) ...
Child 2: Finished successfully!
Child 2: I was NOT cancelled!
Supervisor scope finished.
</code></pre>
<p>è¿™é‡Œç¨‹åºä¾ç„¶å´©æºƒäº†â€”â€”åŸå› æ˜¯ <code>supervisorScope</code> åªé˜»æ­¢å–æ¶ˆä¼ æ’­ï¼ˆä¹Ÿå°±æ˜¯ä¸ä¼šå–æ¶ˆå…¶ä»–å„¿å­çš„ä»»åŠ¡ï¼‰ï¼Œä¸ä¼šè‡ªåŠ¨å¤„ç†å¼‚å¸¸ã€‚</p>
<p>Child 1 æŠ›å‡ºçš„å¼‚å¸¸æœªè¢«æ•è·ï¼Œæœ€ç»ˆå¯¼è‡´ä¸»çº¿ç¨‹å´©æºƒã€‚å› æ­¤ï¼Œå¿…é¡»åœ¨ <code>supervisorScope</code> çš„å­åç¨‹å†…éƒ¨æ‰‹åŠ¨å¤„ç†å¼‚å¸¸ã€‚</p>
<h3 data-id="heading-14">æ­£ç¡®ä½¿ç”¨ supervisorScope</h3>
<p>åœ¨ <code>supervisorScope</code> çš„å­åç¨‹å†…éƒ¨æ·»åŠ  <code>try-catch</code>ï¼Œæ‰‹åŠ¨å¤„ç†å¼‚å¸¸ã€‚</p>
<p><em>å†æ¬¡ç”¨åˆ°å¤æ³•æ•è·ï¼ä½ ä¸è¦ç®¡è€ä¸è€ï¼Œå…³é”®æ˜¯å¥½ä½¿ï¼</em></p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"Starting the supervisor scope..."</span>)
    supervisorScope {
        <span class="hljs-comment">// Child 1 è‡ªè¡Œå¤„ç†å¼‚å¸¸</span>
        launch {
            <span class="hljs-keyword">try</span> {
                println(<span class="hljs-string">"Child 1: I'm going to fail."</span>)
                delay(<span class="hljs-number">500</span>)
                <span class="hljs-keyword">throw</span> RuntimeException(<span class="hljs-string">"Child 1 failed!"</span>)
            } <span class="hljs-keyword">catch</span> (e: Exception) {
                println(<span class="hljs-string">"Caught in Child 1: <span class="hljs-subst">${e.message}</span>"</span>)
            }
        }

        <span class="hljs-comment">// Child 2 ç‹¬ç«‹è¿è¡Œï¼Œä¸å—å½±å“</span>
        launch {
            println(<span class="hljs-string">"Child 2: I will succeed."</span>)
            delay(<span class="hljs-number">1000</span>)
            println(<span class="hljs-string">"Child 2: Finished successfully!"</span>)
        }
    }
    println(<span class="hljs-string">"Supervisor scope finished."</span>)
}
</code></pre>
<pre><code class="hljs language-Plain" lang="Plain">
Starting the supervisor scope...
Child 1: I'm going to fail.
Child 2: I will succeed.
Caught in Child 1: Child 1 failed!
Child 2: Finished successfully!
Supervisor scope finished.
</code></pre>
<p>æ­¤æ—¶è¿è¡Œæ­£å¸¸ï¼šChild 1 å¤±è´¥åè‡ªè¡Œå¤„ç†äº†é”™è¯¯ï¼ŒChild 2 ä¸å—å½±å“å¹¶é¡ºåˆ©å®Œæˆä»»åŠ¡ï¼ŒåŒæ—¶ä¹Ÿä¸ä¼šå½±å“ç¨‹åºè¿è¡Œï¼Œä¸€åˆ‡ç…§å¸¸ï¼</p>
<h2 data-id="heading-15">åœºæ™¯äº”ï¼šå…¨å±€å¼‚å¸¸æ•è·</h2>
<p><code>CoroutineExceptionHandler</code> æ˜¯åç¨‹å¼‚å¸¸å¤„ç†çš„â€œæœ€åé˜²çº¿â€ï¼Œå®ƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ä¸Šä¸‹æ–‡å…ƒç´ ï¼Œå¯æ·»åŠ åˆ°é¡¶å±‚ä½œç”¨åŸŸï¼Œç”¨äºæ•è·æ‰€æœ‰æœªè¢«å…¶ä»–æ–¹å¼å¤„ç†çš„å¼‚å¸¸ã€‚</p>
<h3 data-id="heading-16">é€‚ç”¨åœºæ™¯</h3>
<p>ä¸»è¦ç”¨äºæ—¥å¿—è®°å½•ã€é”™è¯¯ä¸ŠæŠ¥æˆ–æ¸…ç†æœªå¤„ç†å¼‚å¸¸ï¼Œç‰¹åˆ«é€‚åˆä¸ <code>GlobalScope</code> æˆ– <code>SupervisorJob</code> é…åˆä½¿ç”¨ã€‚</p>
<h3 data-id="heading-17">æ— æ•ˆåœºæ™¯</h3>
<p>å¯¹æ™®é€š <code>coroutineScope</code> çš„å­åç¨‹æ— æ•ˆâ€”â€”å› ä¸º <code>coroutineScope</code> ä¼šåœ¨å­åç¨‹å¤±è´¥æ—¶ä¸»åŠ¨å–æ¶ˆå¹¶å¤„ç†å¼‚å¸¸ï¼Œä¸ä¼šè®©å¼‚å¸¸å†’æ³¡åˆ°é¡¶å±‚å¤„ç†å™¨ã€‚</p>
<p>ä½†å¯¹ <code>async</code> æœ‰æ•ˆï¼Œå› ä¸ºå…¶å¼‚å¸¸è¢«å°è£…åœ¨ <code>Deferred</code> ä¸­ï¼Œç›´åˆ° <code>await()</code> æ‰æš´éœ²ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-comment">// 1. åˆ›å»ºå¼‚å¸¸å¤„ç†å™¨</span>
    <span class="hljs-keyword">val</span> handler = CoroutineExceptionHandler { _, exception -&gt;
        println(<span class="hljs-string">"Caught by CoroutineExceptionHandler: <span class="hljs-variable">$exception</span>"</span>)
    }

    <span class="hljs-comment">// 2. åˆ›å»ºå¸¦å¤„ç†å™¨çš„ SupervisorJob ä½œç”¨åŸŸ</span>
    <span class="hljs-keyword">val</span> scope = CoroutineScope(SupervisorJob() + handler)

    <span class="hljs-comment">// 3. å¯åŠ¨ä¼šå¤±è´¥çš„åç¨‹</span>
    scope.launch {
        println(<span class="hljs-string">"Child 1: Failing..."</span>)
        <span class="hljs-keyword">throw</span> AssertionError(<span class="hljs-string">"Something is wrong!"</span>)
    }

    <span class="hljs-comment">// 4. å¯åŠ¨ä¸å—å½±å“çš„åç¨‹</span>
    scope.launch {
        delay(<span class="hljs-number">500</span>)
        println(<span class="hljs-string">"Child 2: I'm alive!"</span>)
    }

    <span class="hljs-comment">// ç­‰å¾…åç¨‹æ‰§è¡Œ</span>
    delay(<span class="hljs-number">1000</span>)
    println(<span class="hljs-string">"Main finished."</span>)
}
</code></pre>
<pre><code class="hljs language-Plain" lang="Plain">
Child 1: Failing...
Caught by CoroutineExceptionHandler: java.lang.AssertionError: Something is wrong!
Child 2: I'm alive!
Main finished.
</code></pre>
<p>å¤„ç†å™¨æˆåŠŸæ•è·äº† Child 1 çš„å¼‚å¸¸ï¼ŒåŒæ—¶ Child 2 ä¸å—å½±å“æ­£å¸¸è¿è¡Œï¼Œä¸”ç¨‹åºä¹Ÿæ­£å¸¸è¿è¡Œï¼Œæ²¡æœ‰å´©æºƒâ€”â€”è¿™æ­£æ˜¯ <code>SupervisorJob</code> éš”ç¦»å¤±è´¥çš„ç‰¹æ€§ä¸ <code>CoroutineExceptionHandler</code> å…¨å±€æ•è·çš„ç»“åˆæ•ˆæœã€‚</p>
<h2 data-id="heading-18">åœºæ™¯å…­ï¼šsupervisorScope ä¸­ä½¿ç”¨ async</h2>
<p><code>supervisorScope</code> éš”ç¦»å¤±è´¥çš„è§„åˆ™å¯¹ <code>async</code> åŒæ ·é€‚ç”¨ï¼šæŸä¸ª <code>async</code> å­åç¨‹å¤±è´¥ï¼Œä¸ä¼šå½±å“å…¶ä»–å…„å¼Ÿåç¨‹ï¼ˆæ— è®º <code>launch</code> è¿˜æ˜¯ <code>async</code>ï¼‰ã€‚</p>
<p>ä½† <code>async</code> çš„å¼‚å¸¸ä»ä¼šæš‚å­˜äº <code>Deferred</code> å¯¹è±¡ä¸­ï¼Œéœ€åœ¨è°ƒç”¨ <code>await()</code> æ—¶æ‰‹åŠ¨å¤„ç†ã€‚</p>
<h3 data-id="heading-19">ä½¿ç”¨æ€è·¯</h3>
<p>è¿™ç§ç»„åˆé€‚åˆå¤šä¸ªç‹¬ç«‹çš„å¼‚æ­¥ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œçš„åœºæ™¯ã€‚å³ä½¿æŸä¸ªä»»åŠ¡å¤±è´¥ï¼Œå…¶ä»–ä»»åŠ¡ä»èƒ½æ­£å¸¸å®Œæˆï¼Œä¸”å¤±è´¥ä»»åŠ¡çš„å¼‚å¸¸å¯åœ¨è·å–ç»“æœæ—¶å•ç‹¬å¤„ç†ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"Starting supervisor scope with async..."</span>)
    supervisorScope {
        <span class="hljs-comment">// ä¼šå¤±è´¥çš„ async ä»»åŠ¡</span>
        <span class="hljs-keyword">val</span> deferredFailure = async {
            println(<span class="hljs-string">"Async 1: I will fail in 500ms."</span>)
            delay(<span class="hljs-number">500</span>)
            <span class="hljs-keyword">throw</span> IllegalStateException(<span class="hljs-string">"Failure!"</span>)
        }

        <span class="hljs-comment">// ä¼šæˆåŠŸçš„ async ä»»åŠ¡</span>
        <span class="hljs-keyword">val</span> deferredSuccess = async {
            println(<span class="hljs-string">"Async 2: I will succeed in 1000ms."</span>)
            delay(<span class="hljs-number">1000</span>)
            <span class="hljs-string">"Success!"</span>
        }

        <span class="hljs-comment">// å¤„ç†å¤±è´¥ä»»åŠ¡çš„å¼‚å¸¸</span>
        <span class="hljs-keyword">try</span> {
            deferredFailure.await()
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            println(<span class="hljs-string">"Caught expected failure from Async 1: <span class="hljs-subst">${e.message}</span>"</span>)
        }

        <span class="hljs-comment">// è·å–æˆåŠŸä»»åŠ¡çš„ç»“æœ</span>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> result = deferredSuccess.await()
            println(<span class="hljs-string">"Result from Async 2: <span class="hljs-variable">$result</span>"</span>)
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            println(<span class="hljs-string">"Caught unexpected failure from Async 2: <span class="hljs-variable">$e</span>"</span>)
        }
    }
    println(<span class="hljs-string">"Supervisor scope finished."</span>)
}
</code></pre>
<pre><code class="hljs language-Plain" lang="Plain">
Starting supervisor scope with async...
Async 1: I will fail in 500ms.
Async 2: I will succeed in 1000ms.
Caught expected failure from Async 1: Failure!
Result from Async 2: Success!
Supervisor scope finished.
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>deferredSuccess</code> æœªå— <code>deferredFailure</code> å¼‚å¸¸å½±å“ï¼Œæ­£å¸¸å®Œæˆå¹¶è¿”å›ç»“æœï¼›åŒæ—¶ï¼Œ<code>deferredFailure</code> çš„å¼‚å¸¸åœ¨ <code>await()</code> æ—¶è¢«æˆåŠŸæ•è·ã€‚</p>
<h2 data-id="heading-20">åœºæ™¯ä¸ƒï¼šå–æ¶ˆæ˜¯ä¸€ç§ç‰¹æ®Šçš„å¼‚å¸¸</h2>
<p>åç¨‹è¢«å–æ¶ˆæ—¶ï¼Œä¼šæŠ›å‡º <code>CancellationException</code>â€”â€”è¿™æ˜¯ä¸€ç§ç‰¹æ®Šå¼‚å¸¸ï¼Œé€šå¸¸ä¼šè¢«åç¨‹æœºåˆ¶è‡ªåŠ¨å¿½ç•¥ï¼Œæ— éœ€æ‰‹åŠ¨æ•è·ã€‚</p>
<h3 data-id="heading-21">ä½¿ç”¨æ€è·¯</h3>
<p><code>CancellationException</code> ä»£è¡¨åç¨‹æ­£å¸¸å–æ¶ˆï¼Œæ˜¯ç»“æ„åŒ–å¹¶å‘çš„å¸¸è§„è¡Œä¸ºã€‚è™½ç„¶å¯ä»¥ç”¨ <code>try-catch</code> æ•è·å®ƒï¼ˆæ¯”å¦‚ç”¨äºæ—¥å¿—è®°å½•ï¼‰ï¼Œä½†<strong>ä¸åº”â€œåæ‰â€å®ƒ</strong>â€”â€”è‹¥æ•è·åéœ€è¦æ‰§è¡Œé€»è¾‘ï¼ŒåŠ¡å¿…é‡æ–°æŠ›å‡ºï¼Œç¡®ä¿å–æ¶ˆæµç¨‹å®Œæ•´ã€‚åç¨‹çš„æ¸…ç†é€»è¾‘ï¼ˆå¦‚å…³é—­èµ„æºã€é‡Šæ”¾è¿æ¥ï¼‰ï¼Œæœ€ä½³ä½ç½®æ˜¯ <code>finally</code> å—ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> job = launch {
        <span class="hljs-keyword">try</span> {
            println(<span class="hljs-string">"Job: I'm working..."</span>)
            delay(<span class="hljs-number">2000</span>) <span class="hljs-comment">// æŒ‚èµ·ç‚¹ï¼Œå¯å“åº”å–æ¶ˆ</span>
            println(<span class="hljs-string">"Job: I'm done."</span>) <span class="hljs-comment">// ä¸ä¼šæ‰§è¡Œ</span>
        } <span class="hljs-keyword">catch</span> (e: CancellationException) {
            <span class="hljs-comment">// æ—¥å¿—è®°å½•ï¼Œå¿…é¡»é‡æ–°æŠ›å‡º</span>
            println(<span class="hljs-string">"Job: I was cancelled. Re-throwing exception."</span>)
            <span class="hljs-keyword">throw</span> e
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            println(<span class="hljs-string">"Job: Caught some other exception: <span class="hljs-variable">$e</span>"</span>)
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// âœ… æ¸…ç†é€»è¾‘çš„æ­£ç¡®ä½ç½®</span>
            println(<span class="hljs-string">"Job: Finally block executed for cleanup."</span>)
        }
    }

    delay(<span class="hljs-number">1000</span>)
    println(<span class="hljs-string">"Main: I'm tired of waiting, cancelling the job."</span>)
    job.cancelAndJoin() <span class="hljs-comment">// å–æ¶ˆå¹¶ç­‰å¾…åç¨‹å®Œæˆ</span>
    println(<span class="hljs-string">"Main: Job has been cancelled."</span>)
}
</code></pre>
<pre><code class="hljs language-Plain" lang="Plain">
Job: I'm working...
Main: I'm tired of waiting, cancelling the job.
Job: I was cancelled. Re-throwing exception.
Job: Finally block executed for cleanup.
Main: Job has been cancelled.
</code></pre>
<h2 data-id="heading-22">åœºæ™¯å…«ï¼šä¸å¯å–æ¶ˆçš„æ¸…ç†</h2>
<p>å¦‚æœ <code>finally</code> å—ä¸­çš„æ¸…ç†é€»è¾‘åŒ…å«æŒ‚èµ·å‡½æ•°ï¼ˆæ¯”å¦‚å†™æ–‡ä»¶ã€ç½‘ç»œè¯·æ±‚ï¼‰ï¼Œåç¨‹è¢«å–æ¶ˆåï¼Œè¿™äº›æŒ‚èµ·è°ƒç”¨ä¼šç«‹å³æŠ›å‡º <code>CancellationException</code>ï¼Œå¯¼è‡´æ¸…ç†é€»è¾‘æ— æ³•å®Œæ•´æ‰§è¡Œã€‚</p>
<h3 data-id="heading-23">è§£å†³æ–¹æ¡ˆ</h3>
<p>åœ¨ <code>finally</code> å—ä¸­ï¼Œé€šè¿‡ <code>withContext(NonCancellable)</code> åˆ‡æ¢ä¸Šä¸‹æ–‡ã€‚</p>
<p><code>NonCancellable</code> èƒ½ä¿è¯å—å†…ä»£ç å®Œæ•´æ‰§è¡Œï¼Œä¸å—åç¨‹å–æ¶ˆçŠ¶æ€å½±å“ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> job = launch {
        <span class="hljs-keyword">try</span> {
            println(<span class="hljs-string">"Job: Working..."</span>)
            delay(<span class="hljs-number">2000</span>)
        } <span class="hljs-keyword">finally</span> {
            println(<span class="hljs-string">"Job: Entering finally block."</span>)
            <span class="hljs-comment">// åˆ‡æ¢åˆ° NonCancellable ä¸Šä¸‹æ–‡æ‰§è¡ŒæŒ‚èµ·æ¸…ç†é€»è¾‘</span>
            withContext(NonCancellable) {
                println(<span class="hljs-string">"Job: Starting a suspending cleanup that takes 500ms..."</span>)
                delay(<span class="hljs-number">500</span>) <span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶æ¸…ç†</span>
                println(<span class="hljs-string">"Job: Crucial cleanup finished."</span>)
            }
        }
    }

    delay(<span class="hljs-number">1000</span>)
    println(<span class="hljs-string">"Main: Cancelling the job."</span>)
    job.cancelAndJoin()
    println(<span class="hljs-string">"Main: Job cancelled."</span>)
}
</code></pre>
<pre><code class="hljs language-Plain" lang="Plain">
Job: Working...
Main: Cancelling the job.
Job: Entering finally block.
Job: Starting a suspending cleanup that takes 500ms...
Job: Crucial cleanup finished.
Main: Job cancelled.
</code></pre>
<p>å³ä½¿åç¨‹è¢«å–æ¶ˆï¼Œ<code>NonCancellable</code> å—å†…çš„ <code>delay(500)</code> ä»èƒ½é¡ºåˆ©æ‰§è¡Œï¼Œç¡®ä¿æ¸…ç†é€»è¾‘å®Œæˆã€‚</p>
<p>å¦‚æœä½ éœ€è¦åœ¨åç¨‹è¢«å–æ¶ˆä¹‹åæ‰§è¡Œä¸€ä¸ªæ¸…ç†ä»»åŠ¡ï¼Œä½†æ˜¯è¿™ä¸ªæ¸…ç†ä»»åŠ¡åˆæ˜¯ä¸€ä¸ªå¯æŒ‚èµ·çš„å‡½æ•°ï¼Œé‚£ä¹ˆ <code>NonCancellable</code> å°±å†é€‚åˆä¸è¿‡äº†ã€‚</p>
<h2 data-id="heading-24">åœºæ™¯ä¹ï¼šåµŒå¥—ä½œç”¨åŸŸä¸å¼‚å¸¸ä¼ æ’­ç»†èŠ‚</h2>
<p><code>coroutineScope</code>ï¼ˆå¤±è´¥å³å–æ¶ˆï¼‰å’Œ <code>supervisorScope</code>ï¼ˆéš”ç¦»å¤±è´¥ï¼‰çš„è§„åˆ™ï¼Œä»…å¯¹<strong>ç›´æ¥å­åç¨‹</strong>ç”Ÿæ•ˆã€‚</p>
<p>åµŒå¥—ç»“æ„ä¸­ï¼Œå†…å±‚ä½œç”¨åŸŸçš„è§„åˆ™ä¸ä¼šè¢«å¤–å±‚è¦†ç›–â€”â€”æ¯”å¦‚ <code>supervisorScope</code> å†…çš„ <code>coroutineScope</code>ï¼Œä»éµå¾ªâ€œå†…éƒ¨å¤±è´¥å³å…¨å–æ¶ˆâ€ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-comment">// é¡¶å±‚ supervisorScopeï¼šéš”ç¦»ç›´æ¥å­åç¨‹å¤±è´¥</span>
    supervisorScope {
        <span class="hljs-comment">// ç›´æ¥å­åç¨‹ 1ï¼šæ­£å¸¸è¿è¡Œ</span>
        launch {
            println(<span class="hljs-string">"Supervisor's Child 1: I survived!"</span>)
        }

        <span class="hljs-comment">// ç›´æ¥å­åç¨‹ 2ï¼šåŒ…å«å†…å±‚ coroutineScope</span>
        launch {
            coroutineScope { <span class="hljs-comment">// å†…å±‚éµå¾ªâ€œå¤±è´¥å³å–æ¶ˆâ€</span>
                println(<span class="hljs-string">"Inner Scope Child: I'm about to fail!"</span>)
                delay(<span class="hljs-number">500</span>)
                <span class="hljs-keyword">throw</span> RuntimeException(<span class="hljs-string">"Failure in inner scope"</span>)
            }
        }
    }
    println(<span class="hljs-string">"All done."</span>)
}
</code></pre>
<h5 data-id="heading-25">è¾“å‡ºç»“æœ</h5>
<pre><code class="hljs language-Plain" lang="Plain">
Inner Scope Child: I'm about to fail!
Supervisor's Child 1: I survived!
Exception in thread "main" java.lang.RuntimeException: Failure in inner scope
...
</code></pre>
<p>å…³é”®ç»“è®ºï¼šSupervisor's Child 1 æœªå—å½±å“ï¼ˆä½“ç° <code>supervisorScope</code> éš”ç¦»ç‰¹æ€§ï¼‰ï¼›å†…å±‚ <code>coroutineScope</code> çš„å­åç¨‹å¤±è´¥åï¼Œå†…å±‚ä½œç”¨åŸŸè‡ªèº«è¢«å–æ¶ˆï¼ˆä½“ç° <code>coroutineScope</code> è§„åˆ™ï¼‰ï¼›æœªæ•è·çš„å¼‚å¸¸æœ€ç»ˆå¯¼è‡´ç¨‹åºå´©æºƒã€‚</p>
<h2 data-id="heading-26">åœºæ™¯åï¼šä»»åŠ¡å±‚çº§è¯¦è§£</h2>
<p>ç»“æ„åŒ–å¹¶å‘çš„æ ¸å¿ƒæ˜¯â€œä»»åŠ¡å±‚çº§ï¼ˆJob Hierarchyï¼‰â€ï¼Œå¯ä»¥å½¢è±¡ç†è§£ä¸ºä¸€æ£µä»»åŠ¡æ ‘ï¼š</p>
<ul>
<li>
<p>åœ¨åç¨‹ï¼ˆæˆ–ä½œç”¨åŸŸï¼‰ä¸­å¯åŠ¨æ–°åç¨‹æ—¶ï¼Œæ–°åç¨‹ä¼šæˆä¸ºçˆ¶åç¨‹çš„å­ä»»åŠ¡ï¼›</p>
</li>
<li>
<p>çˆ¶ä»»åŠ¡æœ‰ä¸¤ä¸ªæ ¸å¿ƒè´£ä»»ï¼šä¸€æ˜¯ç­‰å¾…æ‰€æœ‰å­ä»»åŠ¡å®Œæˆåæ‰ä¼šè‡ªèº«å®Œæˆï¼›äºŒæ˜¯è‹¥å­ä»»åŠ¡å¤±è´¥ï¼ˆé <code>supervisor</code> åœºæ™¯ï¼‰ï¼Œåˆ™å–æ¶ˆæ‰€æœ‰å…¶ä»–å­ä»»åŠ¡å¹¶è‡ªèº«å¤±è´¥ã€‚</p>
</li>
</ul>
<p>è¿™ç§å±‚çº§å…³ç³»ç¡®ä¿äº†åç¨‹çš„â€œç»“æ„åŒ–â€ï¼Œé¿å…ä»»åŠ¡å¤±æ§ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-comment">// runBlocking æ˜¯é¡¶å±‚çˆ¶ä½œç”¨åŸŸ</span>
    println(<span class="hljs-string">"Parent Scope: I'm the parent job."</span>)
    <span class="hljs-keyword">val</span> job1 = launch {
        println(<span class="hljs-string">"Child Job 1: I'm a child of the parent scope."</span>)
        delay(<span class="hljs-number">1000</span>)
        println(<span class="hljs-string">"Child 1: I'm done."</span>)
    }

    <span class="hljs-keyword">val</span> job2 = launch {
        println(<span class="hljs-string">"Child Job 2: I'm also a child."</span>)
        delay(<span class="hljs-number">500</span>)
        <span class="hljs-comment">// åˆ›å»ºå­™åç¨‹ï¼ˆjob2 çš„å­åç¨‹ï¼‰</span>
        launch {
            println(<span class="hljs-string">"Grandchild: My parent is Child 2."</span>)
            delay(<span class="hljs-number">500</span>)
            println(<span class="hljs-string">"Grandchild: I'm done."</span>)
        }
        println(<span class="hljs-string">"Child 2: I'm done."</span>)
    }

    println(<span class="hljs-string">"Parent Scope: Waiting for my children to finish."</span>)
    <span class="hljs-comment">// runBlocking ä¼šç­‰å¾…æ‰€æœ‰å­ä»»åŠ¡ï¼ˆjob1ã€job2ã€å­™åç¨‹ï¼‰å®Œæˆåæ‰ç»“æŸ</span>
}
</code></pre>
<h5 data-id="heading-27">è¾“å‡ºç»“æœ</h5>
<pre><code class="hljs language-Plain" lang="Plain">
Parent Scope: I'm the parent job.
Parent Scope: Waiting for my children to finish.
Child Job 1: I'm a child of the parent scope.
Child Job 2: I'm also a child.
Grandchild: My parent is Child 2.
Grandchild: I'm done.
Child 2: I'm done.
Child 1: I'm done.
</code></pre>
<p>å¯è§ï¼Œ<code>runBlocking</code> ä½œä¸ºçˆ¶ä½œç”¨åŸŸï¼Œä¼šç­‰å¾…æ‰€æœ‰å­åç¨‹ï¼ˆåŒ…æ‹¬åµŒå¥—çš„å­™åç¨‹ï¼‰å®Œæˆåæ‰ç»“æŸï¼Œå®Œå…¨éµå¾ªä»»åŠ¡å±‚çº§çš„çº¦æŸã€‚</p>
<h2 data-id="heading-28">åœºæ™¯åä¸€ï¼šsupervisorScope vs CoroutineScope(SupervisorJob())</h2>
<p>ä¸¤è€…éƒ½åŸºäº <code>SupervisorJob</code> å®ç°å¤±è´¥éš”ç¦»ï¼Œä½†é€‚ç”¨åœºæ™¯ä¸åŒï¼š</p>
<ul>
<li>
<p><strong>supervisorScope { ... }</strong>ï¼šç”¨äºåˆ›å»ºâ€œå±€éƒ¨éš”ç¦»åŒºâ€ï¼Œé€‚åˆéš”ç¦»ä¸€ç»„ç›¸å…³ä½†ç‹¬ç«‹çš„ä¸´æ—¶ä»»åŠ¡ã€‚å®ƒæ˜¯ä¸€ä¸ªæŒ‚èµ·å‡½æ•°ï¼ˆ<strong>è¿™æ„å‘³ç€å®ƒçš„è¿è¡Œéœ€è¦ä¸€ä¸ªåç¨‹åŸŸ</strong>ï¼‰ï¼Œä¼šç­‰å¾…æ‰€æœ‰ç›´æ¥å­åç¨‹å®Œæˆï¼›è‹¥å­åç¨‹å¼‚å¸¸æœªè¢«æ•è·ï¼Œä¼šæŠ›å‡ºåˆ°å¤–éƒ¨ä½œç”¨åŸŸã€‚</p>
</li>
<li>
<p><strong>CoroutineScope(SupervisorJob())</strong>ï¼šåˆ›å»ºä¸€ä¸ªå¯å¤ç”¨çš„ä½œç”¨åŸŸå¯¹è±¡ï¼ˆ<code>å®ƒæœ¬èº«å°±æ˜¯åœ¨åˆ›å»ºä¸€ä¸ªåç¨‹åŸŸ</code>ï¼‰ï¼Œé€‚åˆç»„ä»¶åŒ–æ¶æ„ï¼ˆå¦‚ Android <code>ViewModel</code>ã€ç‹¬ç«‹æ¨¡å—ï¼‰ã€‚ä½œç”¨åŸŸå†…çš„ç›´æ¥å­åç¨‹ç›¸äº’éš”ç¦»ï¼Œä¸”ä½œç”¨åŸŸä¸ä¼šè‡ªåŠ¨ç»“æŸï¼Œéœ€æ˜¾å¼è°ƒç”¨ <code>cancel()</code> é”€æ¯ã€‚</p>
</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Component</span> {
    <span class="hljs-comment">// åˆ›å»ºå¸¦ SupervisorJob å’Œå¼‚å¸¸å¤„ç†å™¨çš„ä½œç”¨åŸŸ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> scope = CoroutineScope(SupervisorJob() + CoroutineExceptionHandler { _, e -&gt;
        println(<span class="hljs-string">"Component: Caught an error: <span class="hljs-variable">$e</span>"</span>)
    })

    <span class="hljs-comment">// å¯åŠ¨é«˜é£é™©ä»»åŠ¡</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startRiskyTask</span><span class="hljs-params">()</span></span> {
        scope.launch {
            println(<span class="hljs-string">"Risky Task: Starting..."</span>)
            delay(<span class="hljs-number">1000</span>)
            <span class="hljs-keyword">throw</span> RuntimeException(<span class="hljs-string">"Something went wrong"</span>)
        }
    }

    <span class="hljs-comment">// å¯åŠ¨ç¨³å®šä»»åŠ¡</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startStableTask</span><span class="hljs-params">()</span></span> {
        scope.launch {
            println(<span class="hljs-string">"Stable Task: I'm running..."</span>)
            delay(<span class="hljs-number">1000</span>)
            println(<span class="hljs-string">"Stable Task: I finished successfully."</span>)
        }
    }

    <span class="hljs-comment">// ç»„ä»¶é”€æ¯æ—¶å–æ¶ˆä½œç”¨åŸŸ</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">destroy</span><span class="hljs-params">()</span></span> {
        println(<span class="hljs-string">"Component: Destroying and cancelling scope."</span>)
        scope.cancel()
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> component = Component()
    component.startRiskyTask()
    component.startStableTask()
    delay(<span class="hljs-number">2000</span>) <span class="hljs-comment">// ç­‰å¾…ä»»åŠ¡æ‰§è¡Œ</span>
    component.destroy()
    delay(<span class="hljs-number">500</span>)
}
</code></pre>
<pre><code class="hljs language-Plain" lang="Plain">
Risky Task: Starting...
Stable Task: I'm running...
Component: Caught an error: java.lang.RuntimeException: Something went wrong
Stable Task: I finished successfully.
Component: Destroying and cancelling scope.
</code></pre>
<p>å³ä½¿é«˜é£é™©ä»»åŠ¡å¤±è´¥ï¼Œç¨³å®šä»»åŠ¡ä»æ­£å¸¸å®Œæˆï¼›ä½œç”¨åŸŸä¿æŒæ´»è·ƒç›´åˆ°æ˜¾å¼é”€æ¯ï¼Œç¬¦åˆç»„ä»¶åŒ–å¼€å‘çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†éœ€æ±‚ã€‚</p>
<h3 data-id="heading-29">åœºæ™¯åäºŒï¼šå¤„ç†è¶…æ—¶</h3>
<p>é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡å¯èƒ½å¯¼è‡´èµ„æºå ç”¨æˆ–å“åº”ç¼“æ…¢ï¼Œåç¨‹æä¾›äº†ç®€æ´çš„è¶…æ—¶æ§åˆ¶æ–¹æ¡ˆï¼š</p>
<ul>
<li>
<p><strong>withTimeout(timeoutMillis) { ... }</strong>ï¼šæ‰§è¡Œä»£ç å—ï¼Œè‹¥è¶…æ—¶åˆ™æŠ›å‡º <code>TimeoutCancellationException</code>ï¼ŒåŒæ—¶å–æ¶ˆåç¨‹ï¼›</p>
</li>
<li>
<p><strong>withTimeoutOrNull(timeoutMillis) { ... }</strong>ï¼šéæŠ›å‡ºç‰ˆæœ¬ï¼Œè¶…æ—¶åè¿”å› <code>null</code>ï¼Œä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œä»£ç æ›´ç®€æ´æ˜“ç»´æŠ¤ã€‚</p>
</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-comment">// ä½¿ç”¨ withTimeoutï¼ˆæŠ›å‡ºç‰ˆï¼‰</span>
    <span class="hljs-keyword">try</span> {
        withTimeout(<span class="hljs-number">1000</span>) {
            println(<span class="hljs-string">"Task 1: I have a second to complete."</span>)
            delay(<span class="hljs-number">2000</span>) <span class="hljs-comment">// ä¼šè¶…æ—¶</span>
            println(<span class="hljs-string">"Task 1: I finished."</span>) <span class="hljs-comment">// ä¸ä¼šæ‰§è¡Œ</span>
        }
    } <span class="hljs-keyword">catch</span> (e: TimeoutCancellationException) {
        println(<span class="hljs-string">"Task 1 failed: <span class="hljs-subst">${e.message}</span>"</span>)
    }

    <span class="hljs-comment">// ä½¿ç”¨ withTimeoutOrNullï¼ˆéæŠ›å‡ºç‰ˆï¼‰</span>
    <span class="hljs-keyword">val</span> result = withTimeoutOrNull(<span class="hljs-number">1000</span>) {
        println(<span class="hljs-string">"Task 2: Trying to complete in 1 second."</span>)
        delay(<span class="hljs-number">2000</span>)
        <span class="hljs-string">"Success"</span>
    }

    <span class="hljs-keyword">if</span> (result == <span class="hljs-literal">null</span>) {
        println(<span class="hljs-string">"Task 2 timed out and returned null."</span>)
    } <span class="hljs-keyword">else</span> {
        println(<span class="hljs-string">"Task 2 finished with result: <span class="hljs-variable">$result</span>"</span>)
    }
}
</code></pre>
<pre><code class="hljs language-Plain" lang="Plain">
Task 1: I have a second to complete.
Task 1 failed: Timed out waiting for 1000 ms
Task 2: Trying to complete in 1 second.
Task 2 timed out and returned null.
</code></pre>
<p>å®é™…å¼€å‘ä¸­ï¼ŒwithTimeoutOrNull æ›´å¸¸ç”¨ï¼Œå¯é¿å…é¢å¤–çš„ try-catch åµŒå¥—ã€‚</p>
<h2 data-id="heading-30">åœºæ™¯åä¸‰ï¼šç­‰å¾…å¤šä¸ªå¼‚æ­¥ä»»åŠ¡çš„å¼‚å¸¸å¤„ç†</h2>
<p>å½“éœ€è¦ç­‰å¾…å¤šä¸ª <code>async</code> ä»»åŠ¡å®Œæˆæ—¶ï¼Œæ¨èä½¿ç”¨ <code>awaitAll()</code>â€”â€”å®ƒéµå¾ªâ€œå…¨æˆ–æ— â€åŸåˆ™ï¼Œä¸ <code>coroutineScope</code> é€»è¾‘ä¸€è‡´ï¼šè‹¥ä»»æ„ä¸€ä¸ªä»»åŠ¡å¤±è´¥ï¼Œç«‹å³å–æ¶ˆæ‰€æœ‰å…¶ä»–ä»»åŠ¡ï¼Œå¹¶æŠ›å‡ºç¬¬ä¸€ä¸ªå¤±è´¥çš„å¼‚å¸¸ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"Starting multiple async jobs."</span>)
    <span class="hljs-keyword">try</span> {
        coroutineScope {
            <span class="hljs-keyword">val</span> deferred1 = async {
                delay(<span class="hljs-number">1000</span>)
                println(<span class="hljs-string">"Job 1: Success."</span>)
                <span class="hljs-string">"Result 1"</span>
            }

            <span class="hljs-keyword">val</span> deferred2 = async {
                delay(<span class="hljs-number">500</span>)
                println(<span class="hljs-string">"Job 2: Failing!"</span>)
                <span class="hljs-keyword">throw</span> IllegalStateException(<span class="hljs-string">"Job 2 Error"</span>)
            }

            <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆï¼Œä»»æ„å¤±è´¥åˆ™ç«‹å³æŠ›å‡ºå¼‚å¸¸</span>
            <span class="hljs-keyword">val</span> results = awaitAll(deferred1, deferred2)
            println(<span class="hljs-string">"All jobs finished: <span class="hljs-variable">$results</span>"</span>) <span class="hljs-comment">// ä¸ä¼šæ‰§è¡Œ</span>
        }
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        println(<span class="hljs-string">"Caught exception in awaitAll: <span class="hljs-subst">${e.message}</span>"</span>)
    }
}
</code></pre>
<pre><code class="hljs language-Plain" lang="Plain">
Starting multiple async jobs.
Job 2: Failing!
Caught exception in awaitAll: Job 2 Error
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒJob 2 å¤±è´¥åï¼Œ<code>awaitAll()</code> ç«‹å³æŠ›å‡ºå¼‚å¸¸ï¼ŒJob 1 è¢«å–æ¶ˆï¼ˆå…¶å»¶è¿Ÿ 1000ms çš„ä»»åŠ¡æœªå®Œæˆï¼Œå› æ­¤â€œJob 1: Success.â€ æœªæ‰“å°ï¼‰ã€‚</p>
<h2 data-id="heading-31">æ€»ç»“</h2>
<p>ä»¥ä¸Šåœºæ™¯è¦†ç›–äº†åç¨‹å¼‚å¸¸å¤„ç†çš„æ ¸å¿ƒåœºæ™¯å’Œæœ€ä½³å®è·µã€‚</p>
<p><em>å±å¹•å‰çš„ä½ ï¼Œç°åœ¨å¼ºçš„å¯æ€•ï¼</em></p>
<p>å¼‚å¸¸å¤„ç†çš„æ ¸å¿ƒåŸåˆ™æ˜¯ï¼šåˆ©ç”¨ç»“æ„åŒ–å¹¶å‘çš„å±‚çº§ç‰¹æ€§ï¼Œè®©å¼‚å¸¸å¤„ç†é€»è¾‘ç´§è·Ÿå¼‚å¸¸å‘ç”Ÿä½ç½®ï¼Œæ ¹æ®ä»»åŠ¡å…³è”æ€§é€‰æ‹©åˆé€‚çš„ä½œç”¨åŸŸï¼ˆ<code>coroutineScope</code>/<code>supervisorScope</code>ï¼‰ï¼Œå¿…è¦æ—¶ç”¨ <code>CoroutineExceptionHandler</code> å…œåº•ã€‚</p>
<p><em>å®åœ¨ä¸è¡Œï¼Œå¤æ³•æ•è·ï¼</em></p>
<p>æŒæ¡è¿™äº›é€»è¾‘ï¼Œå°±èƒ½è®©åç¨‹çš„å¼‚å¸¸å¤„ç†æ—¢å®‰å…¨åˆä¼˜é›…ã€‚</p>
<p><em>æˆ‘æŠŠè¿™ç¯‡æ–‡ç« ç”©ç»™æˆ‘çš„åŒäº‹ï¼Œæˆ‘ç›¸ä¿¡ä»–ä»¥åç»å¯¹ä¸ä¼šé—®æˆ‘å¼‚å¸¸å¤„ç†çš„é—®é¢˜äº†ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[excelè¡¨è¾¾å¼ä¸­çš„letè¯­æ³•]]></title>    <link>https://juejin.cn/post/7597266141913006126</link>    <guid>https://juejin.cn/post/7597266141913006126</guid>    <pubDate>2026-01-21T00:27:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597266141913006126" data-draft-id="7597258378590978058" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="excelè¡¨è¾¾å¼ä¸­çš„letè¯­æ³•"/> <meta itemprop="keywords" content="æ•°æ®å¯è§†åŒ–"/> <meta itemprop="datePublished" content="2026-01-21T00:27:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‡ªç”±ç”Ÿé•¿2024"/> <meta itemprop="url" content="https://juejin.cn/user/1591748569862670"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            excelè¡¨è¾¾å¼ä¸­çš„letè¯­æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1591748569862670/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‡ªç”±ç”Ÿé•¿2024
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-21T00:27:47.000Z" title="Wed Jan 21 2026 00:27:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>excelè¡¨è¾¾å¼ä¸­çš„letæœ‰ä¸€ç§å±€éƒ¨å£°æ˜å¼ç¼–ç¨‹çš„æ„Ÿè§‰ï¼Œè¿˜æ˜¯å¾ˆå¥½ç”¨çš„ã€‚letè¡¨è¾¾å¼ä¸­å£°æ˜çš„æ‰€æœ‰å˜é‡å¯ä»¥æ–¹ä¾¿çš„è‡ªç”±ä½¿ç”¨ï¼Œå¤šæ¬¡ä½¿ç”¨ï¼Œå£°æ˜è¿‡çš„éƒ½å¯ä»¥åå¤ä½¿ç”¨ï¼Œå¾ˆå¥½ç”¨ï¼Œæœ€åä¸è¾“å‡ºä¹Ÿæ²¡å…³ç³»ã€‚</p>
<p>ä¹‹å‰ä»æ²¡æ·±å…¥ä½¿ç”¨è¿‡Excel,ç„¶è€Œå·¥ä½œä¸­ç”¨åˆ°äº†è¡¨æ ¼å¤„ç†ï¼Œå­¦ä¹ æµªè´¹äº†å¾ˆé•¿æ—¶é—´ï¼Œå› æ­¤åœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚</p>
<p>åœ¨Excelä¸­ï¼Œ<strong>LETå‡½æ•°</strong> ç”¨äºå®šä¹‰å˜é‡ï¼ˆåç§°ï¼‰å¹¶åœ¨å…¬å¼ä¸­é‡å¤ä½¿ç”¨ï¼Œä»è€Œ<strong>ç®€åŒ–å¤æ‚å…¬å¼ã€æé«˜å¯è¯»æ€§å’Œè®¡ç®—æ•ˆç‡</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>1. è¯­æ³•</strong></h2>
<pre><code class="hljs language-excel" lang="excel">=LET(name1, value1, [name2, value2], â€¦, calculation)
</code></pre>
<ul>
<li><strong>name1</strong>ï¼šå˜é‡çš„åç§°ï¼ˆä¸èƒ½æ˜¯å•å…ƒæ ¼å¼•ç”¨æˆ–æ•°å­—å¼€å¤´ï¼‰ã€‚</li>
<li><strong>value1</strong>ï¼šåˆ†é…ç»™è¯¥å˜é‡çš„å€¼æˆ–è¡¨è¾¾å¼ã€‚</li>
<li>å¯ä»¥å®šä¹‰å¤šä¸ªå˜é‡ï¼ˆæœ€å¤š 126 å¯¹åç§°/å€¼ï¼‰ã€‚</li>
<li><strong>calculation</strong>ï¼šä½¿ç”¨å·²å®šä¹‰å˜é‡è¿›è¡Œè®¡ç®—çš„æœ€ç»ˆè¡¨è¾¾å¼ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-1"><strong>2. ä¸»è¦ç”¨é€”</strong></h2>
<h3 data-id="heading-2"><strong>ï¼ˆ1ï¼‰é¿å…é‡å¤è®¡ç®—ï¼Œæé«˜æ•ˆç‡</strong></h3>
<p>ä¾‹å¦‚ï¼šç”¨å…¬å¼æå–å­—ç¬¦ä¸²çš„å§“å’Œåï¼Œå¹¶åˆå¹¶æˆâ€œå§“,åâ€æ ¼å¼ã€‚</p>
<p><strong>ä¸ç”¨ LET</strong>ï¼ˆé‡å¤ä½¿ç”¨ LEFT å’Œ RIGHTï¼‰ï¼š</p>
<pre><code class="hljs language-excel" lang="excel">=LEFT(A1, FIND(" ", A1)-1) &amp; "," &amp; RIGHT(A1, LEN(A1)-FIND(" ", A1))
</code></pre>
<p>è¿™é‡Œ <code>FIND(" ", A1)</code> å‡ºç°äº†ä¸¤æ¬¡ï¼ŒExcel ä¼šè®¡ç®—ä¸¤æ¬¡ã€‚</p>
<p><strong>ç”¨ LET</strong>ï¼š</p>
<pre><code class="hljs language-excel" lang="excel">=LET(
    fullName, A1,
    spacePos, FIND(" ", fullName),
    firstName, LEFT(fullName, spacePos-1),
    lastName, RIGHT(fullName, LEN(fullName)-spacePos),
    firstName &amp; "," &amp; lastName
)
</code></pre>
<p><code>spacePos</code> åªè®¡ç®—ä¸€æ¬¡ï¼Œå…¬å¼æ›´æ¸…æ™°ã€‚</p>
<hr/>
<h3 data-id="heading-3"><strong>ï¼ˆ2ï¼‰è®©å¤æ‚å…¬å¼æ›´æ˜“è¯»</strong></h3>
<p>ä¾‹å¦‚ï¼šåˆ¤æ–­ä¸€ä¸ªæ•°å€¼æ˜¯å¦åœ¨æŸä¸€èŒƒå›´å†…ï¼Œå¹¶è¿”å›æ–‡å­—è¯´æ˜ã€‚</p>
<p><strong>æ™®é€šå…¬å¼</strong>ï¼ˆè¾ƒéš¾ç›´æ¥ç†è§£ä¸­é—´éƒ¨åˆ†ï¼‰ï¼š</p>
<pre><code class="hljs language-excel" lang="excel">=IF(AND(A1&gt;=80, A1&lt;=100), "ä¼˜ç§€", IF(AND(A1&gt;=60, A1&lt;80), "åˆæ ¼", "ä¸åˆæ ¼"))
</code></pre>
<p><strong>ä½¿ç”¨ LET</strong>ï¼š</p>
<pre><code class="hljs language-excel" lang="excel">=LET(
    score, A1,
    isExcellent, AND(score&gt;=80, score&lt;=100),
    isPass, AND(score&gt;=60, score&lt;80),
    IF(isExcellent, "ä¼˜ç§€", IF(isPass, "åˆæ ¼", "ä¸åˆæ ¼"))
)
</code></pre>
<p>å˜é‡åç›´æ¥è¡¨è¾¾å«ä¹‰ï¼Œä¾¿äºç»´æŠ¤ã€‚</p>
<hr/>
<h2 data-id="heading-4"><strong>3. å®é™…æ¡ˆä¾‹</strong></h2>
<h3 data-id="heading-5"><strong>æ¡ˆä¾‹1ï¼šæå–æ‹¬å·å†…çš„æ–‡æœ¬</strong></h3>
<p>A1 å•å…ƒæ ¼å†…å®¹ï¼š<code>"äº§å“A (å‹å·123)"</code><br/>
ç›®æ ‡ï¼šæå– <code>å‹å·123</code>ã€‚</p>
<p><strong>ç”¨ LET</strong>ï¼š</p>
<pre><code class="hljs language-excel" lang="excel">=LET(
    text, A1,
    openPos, FIND("(", text),
    closePos, FIND(")", text),
    MID(text, openPos+1, closePos-openPos-1)
)
</code></pre>
<hr/>
<h3 data-id="heading-6"><strong>æ¡ˆä¾‹2ï¼šå¤šæ¡ä»¶ç»Ÿè®¡</strong></h3>
<p>ç»Ÿè®¡åŒºåŸŸ <code>B2:B100</code> ä¸­å¤§äºå¹³å‡å€¼ä¸”å°äºæœ€å¤§å€¼çš„ä¸ªæ•°ã€‚</p>
<p><strong>ä¸ç”¨ LET</strong>ï¼š</p>
<pre><code class="hljs language-excel" lang="excel">=COUNTIFS(B2:B100, "&gt;"&amp;AVERAGE(B2:B100), B2:B100, "&lt;"&amp;MAX(B2:B100))
</code></pre>
<p>è¿™é‡Œ <code>AVERAGE</code> å’Œ <code>MAX</code> å¯èƒ½è¢«é‡å¤è®¡ç®—ï¼ˆå¦‚æœç”¨åœ¨å¤šä¸ªå•å…ƒæ ¼ä¸”æ•°æ®é‡å¤§æ—¶ï¼‰ã€‚</p>
<p><strong>ç”¨ LET</strong>ï¼š</p>
<pre><code class="hljs language-excel" lang="excel">=LET(
    data, B2:B100,
    avg, AVERAGE(data),
    maxVal, MAX(data),
    COUNTIFS(data, "&gt;"&amp;avg, data, "&lt;"&amp;maxVal)
)
</code></pre>
<p>æ•ˆç‡æ›´é«˜ï¼Œç‰¹åˆ«æ˜¯æ•°æ®é‡å¤§æˆ–å…¬å¼å¤æ‚æ—¶ã€‚</p>
<hr/>
<h2 data-id="heading-7"><strong>4. æ³¨æ„äº‹é¡¹</strong></h2>
<ol>
<li><strong>å˜é‡ä½œç”¨åŸŸ</strong>ï¼šä»…åœ¨å½“å‰å…¬å¼å†…æœ‰æ•ˆï¼Œä¸ä¼šå½±å“å·¥ä½œç°¿åç§°ç®¡ç†å™¨ã€‚</li>
<li><strong>ç‰ˆæœ¬è¦æ±‚</strong>ï¼šéœ€è¦ <strong>Excel 365 æˆ– Excel 2021</strong> åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œæ—§ç‰ˆæœ¬ä¸æ”¯æŒã€‚</li>
<li><strong>å‘½åé™åˆ¶</strong>ï¼šå˜é‡åä¸èƒ½ä¸å•å…ƒæ ¼åœ°å€ç›¸åŒï¼ˆå¦‚ <code>A1</code>ã€<code>B2</code>ï¼‰ï¼Œä¸èƒ½ä»¥æ•°å­—å¼€å¤´ã€‚</li>
<li><strong>æ€§èƒ½æå‡</strong>ï¼šå¦‚æœæŸä¸ªå€¼åœ¨å…¬å¼ä¸­è¢«å¤šæ¬¡ä½¿ç”¨ï¼Œç”¨ LET å¯é¿å…é‡å¤è®¡ç®—ï¼Œæå‡æ•ˆç‡ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-8"><strong>5. ä¼˜ç‚¹æ€»ç»“</strong></h2>
<ul>
<li><strong>å¯è¯»æ€§</strong>ï¼šç”¨æœ‰æ„ä¹‰çš„å˜é‡åæ›¿ä»£å†—é•¿ä¸­é—´æ­¥éª¤ã€‚</li>
<li><strong>å¯ç»´æŠ¤æ€§</strong>ï¼šä¿®æ”¹å˜é‡å€¼åªéœ€æ”¹ä¸€å¤„ã€‚</li>
<li><strong>æ€§èƒ½</strong>ï¼šå‡å°‘é‡å¤è®¡ç®—ã€‚</li>
<li><strong>è°ƒè¯•æ–¹ä¾¿</strong>ï¼šå¯åœ¨ calculation éƒ¨åˆ†é€æ­¥æµ‹è¯•ä¸­é—´å˜é‡ã€‚</li>
</ul>
<hr/>
<p>letæœ‰ä¸€ç§å±€éƒ¨å£°æ˜å¼ç¼–ç¨‹çš„æ„Ÿè§‰ï¼Œè¿˜æ˜¯å¾ˆå¥½ç”¨çš„ã€‚letè¡¨è¾¾å¼ä¸­å£°æ˜çš„æ‰€æœ‰å˜é‡å¯ä»¥æ–¹ä¾¿çš„è‡ªç”±ä½¿ç”¨ï¼Œå¤šæ¬¡ä½¿ç”¨ï¼Œå£°æ˜è¿‡çš„éƒ½å¯ä»¥åå¤ä½¿ç”¨ï¼Œå¾ˆå¥½ç”¨ï¼Œæœ€åä¸è¾“å‡ºä¹Ÿæ²¡å…³ç³»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kotlin é‡ä¸Š JPAï¼šå½“ã€Œä¼˜é›…ã€æ’ä¸Šã€Œåå°„ã€]]></title>    <link>https://juejin.cn/post/7597251197426663450</link>    <guid>https://juejin.cn/post/7597251197426663450</guid>    <pubDate>2026-01-21T00:32:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597251197426663450" data-draft-id="7597266141913022510" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kotlin é‡ä¸Š JPAï¼šå½“ã€Œä¼˜é›…ã€æ’ä¸Šã€Œåå°„ã€"/> <meta itemprop="keywords" content="Android,Android Jetpack"/> <meta itemprop="datePublished" content="2026-01-21T00:32:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é»„æ—æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/3985057546510423"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kotlin é‡ä¸Š JPAï¼šå½“ã€Œä¼˜é›…ã€æ’ä¸Šã€Œåå°„ã€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3985057546510423/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é»„æ—æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-21T00:32:34.000Z" title="Wed Jan 21 2026 00:32:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä½ ä»¥ä¸ºç”¨ Kotlin å†™ JPA å®ä½“å¾ˆç®€å•ï¼Ÿdata class ä¸€æŠŠæ¢­ï¼ŸæŠ±æ­‰ï¼Œè¿™å¯èƒ½æ˜¯ä½ è¸©å‘çš„å¼€å§‹ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å¼€ç¯‡ï¼šä¸€ä¸ªè®©äººå›°æƒ‘çš„ç°è±¡</h2>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// çœ‹èµ·æ¥å®Œç¾çš„ä»£ç </span>
<span class="hljs-meta">@Entity</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>(
    <span class="hljs-meta">@Id</span> <span class="hljs-meta">@GeneratedValue</span>
    <span class="hljs-keyword">val</span> id: <span class="hljs-built_in">Long</span> = <span class="hljs-number">0</span>,
    <span class="hljs-keyword">val</span> name: String,
    <span class="hljs-keyword">val</span> email: String
)
</code></pre>
<p>è¿™æ®µä»£ç èƒ½ç¼–è¯‘ï¼Œèƒ½è¿è¡Œï¼Œä½†å®ƒ<strong>åŸ‹äº†è‡³å°‘ 4 ä¸ªé›·</strong>ã€‚</p>
<p>å¾ˆå¤šä» Java è½¬ Kotlin çš„å¼€å‘è€…ï¼Œç¬¬ä¸€ååº”å°±æ˜¯ç”¨ <code>data class</code> æ¥å†™å®ä½“ç±»â€”â€”æ¯•ç«Ÿ Kotlin å®˜æ–¹éƒ½è¯´å®ƒé€‚åˆåšã€Œæ•°æ®è½½ä½“ã€ã€‚ä½† JPA çš„ä¸–ç•Œè§‚å’Œ Kotlin å®Œå…¨ä¸åŒã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬å°±æ¥èŠèŠï¼š<strong>ä¸ºä»€ä¹ˆ Kotlin çš„ã€Œä¼˜é›…ã€åœ¨ JPA é¢å‰ä¼šå¤±æ•ˆï¼Ÿ</strong></p>
<hr/>
<h2 data-id="heading-1">æ ¸å¿ƒçŸ›ç›¾ï¼šä¸¤ç§è®¾è®¡å“²å­¦çš„ç¢°æ’</h2>

























<table><thead><tr><th>Kotlin çš„ä¿¡ä»°</th><th>JPA çš„éœ€æ±‚</th></tr></thead><tbody><tr><td>ä¸å¯å˜æ€§ (<code>val</code>)</td><td>å¯å˜æ€§ï¼ˆåå°„ä¿®æ”¹å­—æ®µï¼‰</td></tr><tr><td>ç©ºå®‰å…¨ (<code>String</code> vs <code>String?</code>)</td><td>åå°„ç»•è¿‡ç©ºæ£€æŸ¥</td></tr><tr><td><code>data class</code> ç®€æ´</td><td>éœ€è¦é final ç±»æ”¯æŒä»£ç†</td></tr><tr><td>æ„é€ å‡½æ•°åˆå§‹åŒ–</td><td>æ— å‚æ„é€  + åå°„èµ‹å€¼</td></tr></tbody></table>
<p>JPA è§„èŒƒï¼ˆJakarta Persistenceï¼‰æ˜ç¡®è¦æ±‚å®ä½“ç±»å¿…é¡»ï¼š</p>
<ul>
<li>æä¾›<strong>æ— å‚æ„é€ å‡½æ•°</strong>ï¼ˆç”¨äºåå°„å®ä¾‹åŒ–ï¼‰</li>
<li>å±æ€§<strong>ä¸èƒ½æ˜¯ final</strong>ï¼ˆæ”¯æŒè„æ£€æŸ¥å’Œæ‡’åŠ è½½ä»£ç†ï¼‰</li>
<li>ç±»<strong>ä¸èƒ½æ˜¯ final</strong>ï¼ˆæ”¯æŒç”Ÿæˆä»£ç†å­ç±»ï¼‰</li>
</ul>
<p>è€Œ Kotlin çš„ <code>data class</code> æ°å¥½<strong>å…¨éƒ¨è¿å</strong>â€”â€”å®ƒé»˜è®¤æ˜¯ final çš„ï¼Œå±æ€§é€šå¸¸ç”¨ <code>val</code>ï¼Œä¹Ÿæ²¡æœ‰æ— å‚æ„é€ ã€‚</p>
<hr/>
<h2 data-id="heading-2">é™·é˜±ä¸€ï¼šdata class ä¸æ˜¯å®ä½“ç±»çš„æ­£ç¡®é€‰æ‹©</h2>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ é”™è¯¯ç¤ºèŒƒ</span>
<span class="hljs-meta">@Entity</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Company</span>(
    <span class="hljs-meta">@Id</span> <span class="hljs-meta">@GeneratedValue</span>
    <span class="hljs-keyword">val</span> id: <span class="hljs-built_in">Long</span> = <span class="hljs-number">0</span>,
    <span class="hljs-keyword">val</span> name: String
)
</code></pre>
<p><strong>é—®é¢˜</strong>ï¼š</p>
<ol>
<li><code>data class</code> æ˜¯ final çš„ï¼ŒHibernate æ— æ³•ç”Ÿæˆä»£ç†ç±»</li>
<li>æ‡’åŠ è½½ä¼šå¤±æ•ˆ</li>
<li><code>equals()</code> / <code>hashCode()</code> åŸºäºæ‰€æœ‰å±æ€§ï¼Œè€Œéä¸»é”®</li>
</ol>
<p><strong>æ­£ç¡®åšæ³•</strong>ï¼šä½¿ç”¨æ™®é€š class</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… æ­£ç¡®ç¤ºèŒƒ</span>
<span class="hljs-meta">@Entity</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Company</span> {
    <span class="hljs-meta">@Id</span> <span class="hljs-meta">@GeneratedValue</span>
    <span class="hljs-keyword">var</span> id: <span class="hljs-built_in">Long</span>? = <span class="hljs-literal">null</span>

    <span class="hljs-keyword">var</span> name: String = <span class="hljs-string">""</span>
}
</code></pre>
<hr/>
<h2 data-id="heading-3">é™·é˜±äºŒï¼šval çœ‹ä¼¼èƒ½ç”¨ï¼Œå®åˆ™æ˜¯å®šæ—¶ç‚¸å¼¹</h2>
<p>ä½ å¯èƒ½å‘ç°ç”¨ <code>val</code> ä¹Ÿèƒ½æ­£å¸¸è¿è¡Œï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Entity</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-meta">@Id</span> <span class="hljs-meta">@GeneratedValue</span>
    <span class="hljs-keyword">val</span> id: <span class="hljs-built_in">Long</span>? = <span class="hljs-literal">null</span>  <span class="hljs-comment">// çœ‹èµ·æ¥æ²¡é—®é¢˜ï¼Ÿ</span>

    <span class="hljs-keyword">val</span> name: String = <span class="hljs-string">""</span>
}
</code></pre>
<p><strong>çœŸç›¸</strong>ï¼šJPA é€šè¿‡åå°„<strong>å¼ºè¡Œä¿®æ”¹</strong> <code>val</code> å­—æ®µï¼Œè¿™è¿åäº† Kotlin çš„ä¸å¯å˜æ€§å¥‘çº¦ã€‚</p>
<p>æ›´å±é™©çš„æ˜¯ï¼š<strong>Java çš„ JEP 500 ææ¡ˆæ­£åœ¨è€ƒè™‘é™åˆ¶åå°„ä¿®æ”¹ final å­—æ®µ</strong>ã€‚ä¸€æ—¦å®æ–½ï¼Œä½ çš„ä»£ç ä¼šç›´æ¥å´©æºƒã€‚</p>
<p><strong>ç»“è®º</strong>ï¼šæ‰€æœ‰å®ä½“å±æ€§éƒ½åº”è¯¥ç”¨ <code>var</code>ï¼Œä¸è¦å¿ƒå­˜ä¾¥å¹¸ã€‚</p>
<hr/>
<h2 data-id="heading-4">é™·é˜±ä¸‰ï¼šä¸»é”®å¿…é¡»æ˜¯å¯ç©ºç±»å‹</h2>
<p>è¿™æ˜¯å¾ˆå¤šäººå¿½ç•¥çš„ç»†èŠ‚ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ é”™è¯¯</span>
<span class="hljs-meta">@Id</span> <span class="hljs-meta">@GeneratedValue</span>
<span class="hljs-keyword">var</span> id: <span class="hljs-built_in">Long</span> = <span class="hljs-number">0</span>

<span class="hljs-comment">// âœ… æ­£ç¡®</span>
<span class="hljs-meta">@Id</span> <span class="hljs-meta">@GeneratedValue</span>
<span class="hljs-keyword">var</span> id: <span class="hljs-built_in">Long</span>? = <span class="hljs-literal">null</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong></p>
<p>JPA è§„èŒƒè§„å®šï¼šä¸»é”®ä¸º <code>null</code> è¡¨ç¤ºã€Œå°šæœªæŒä¹…åŒ–ã€ã€‚å¦‚æœä½ ç”¨ <code>Long = 0</code>ï¼ŒJPA æ— æ³•åŒºåˆ†ï¼š</p>
<ul>
<li>è¿™æ˜¯ä¸€ä¸ªæ–°å®ä½“ï¼ˆåº”è¯¥ INSERTï¼‰</li>
<li>è¿˜æ˜¯ ID æ°å¥½ä¸º 0 çš„å·²æœ‰å®ä½“ï¼ˆåº”è¯¥ UPDATEï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-5">é™·é˜±å››ï¼šKotlin çš„ç©ºå®‰å…¨è¢«åå°„ã€Œæ¶ç©ºã€</h2>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Entity</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> {
    <span class="hljs-meta">@Id</span> <span class="hljs-meta">@GeneratedValue</span>
    <span class="hljs-keyword">var</span> id: <span class="hljs-built_in">Long</span>? = <span class="hljs-literal">null</span>

    <span class="hljs-keyword">var</span> name: String = <span class="hljs-string">""</span>  <span class="hljs-comment">// éç©ºç±»å‹ï¼Œåº”è¯¥å®‰å…¨ï¼Ÿ</span>
}
</code></pre>
<p><strong>æ®‹é…·çš„ç°å®</strong>ï¼šå¦‚æœæ•°æ®åº“é‡Œ <code>name</code> å­—æ®µæ˜¯ <code>NULL</code>ï¼ŒJPA ä¼šé€šè¿‡åå°„ç›´æ¥æŠŠ <code>null</code> å¡è¿›å»ï¼Œå®Œå…¨ç»•è¿‡ Kotlin çš„ç©ºæ£€æŸ¥ã€‚</p>
<p>å½“ä½ åç»­è®¿é—® <code>product.name</code> æ—¶ï¼Œä¼šå¾—åˆ°ä¸€ä¸ª<strong>è¡¨é¢æ˜¯ <code>String</code>ï¼Œå®é™…æ˜¯ <code>null</code></strong> çš„å€¼ï¼Œå¯¼è‡´ NPEã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>æ•°æ®åº“å±‚é¢åŠ  <code>NOT NULL</code> çº¦æŸ</li>
<li>ä»£ç å±‚é¢å¯¹å¯èƒ½ä¸ºç©ºçš„å­—æ®µä½¿ç”¨ <code>String?</code></li>
<li>ä¸è¦ç›²ç›®ä¿¡ä»» Kotlin çš„ç±»å‹ç³»ç»Ÿ</li>
</ol>
<hr/>
<h2 data-id="heading-6">é™·é˜±äº”ï¼šé»˜è®¤å€¼åœ¨æŸ¥è¯¢æ—¶ä¸ç”Ÿæ•ˆ</h2>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Entity</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> {
    <span class="hljs-meta">@Id</span> <span class="hljs-meta">@GeneratedValue</span>
    <span class="hljs-keyword">var</span> id: <span class="hljs-built_in">Long</span>? = <span class="hljs-literal">null</span>

    <span class="hljs-keyword">var</span> status: String = <span class="hljs-string">"PENDING"</span>  <span class="hljs-comment">// æœŸæœ›æ–°å»ºæ—¶é»˜è®¤ä¸º PENDING</span>
}
</code></pre>
<p><strong>æ–°å»ºå®ä½“æ—¶</strong>ï¼šé»˜è®¤å€¼ç”Ÿæ•ˆï¼Œ<code>status = "PENDING"</code> âœ…</p>
<p><strong>ä»æ•°æ®åº“æŸ¥è¯¢æ—¶</strong>ï¼šJPA ç”¨åå°„ç›´æ¥èµ‹å€¼ï¼Œ<strong>å®Œå…¨å¿½ç•¥é»˜è®¤å€¼</strong> âŒ</p>
<p>è¿™æ„å‘³ç€å¦‚æœæ•°æ®åº“é‡Œ <code>status</code> æ˜¯ <code>NULL</code>ï¼ŒæŸ¥å‡ºæ¥å°±æ˜¯ <code>null</code>ï¼Œè€Œä¸æ˜¯ <code>"PENDING"</code>ã€‚</p>
<hr/>
<h2 data-id="heading-7">ç»ˆæè§£å†³æ–¹æ¡ˆï¼šç¼–è¯‘å™¨æ’ä»¶</h2>
<p>æ‰‹åŠ¨å¤„ç†è¿™äº›é—®é¢˜å¤ªç¹çï¼ŒKotlin æä¾›äº†å®˜æ–¹æ’ä»¶ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// build.gradle.kts</span>
plugins {
    kotlin(<span class="hljs-string">"plugin.spring"</span>) version <span class="hljs-string">"2.1.0"</span>  <span class="hljs-comment">// è‡ªåŠ¨ open</span>
    kotlin(<span class="hljs-string">"plugin.jpa"</span>) version <span class="hljs-string">"2.1.0"</span>     <span class="hljs-comment">// è‡ªåŠ¨ç”Ÿæˆæ— å‚æ„é€ </span>
}
</code></pre>
<p><strong>plugin.jpa</strong> ä¼šä¸ºæ ‡æ³¨äº† <code>@Entity</code>ã€<code>@Embeddable</code>ã€<code>@MappedSuperclass</code> çš„ç±»è‡ªåŠ¨ç”Ÿæˆæ— å‚æ„é€ å‡½æ•°ã€‚</p>
<p><strong>plugin.spring</strong>ï¼ˆæˆ– all-openï¼‰ä¼šè‡ªåŠ¨æŠŠç›¸å…³ç±»å˜æˆé finalã€‚</p>
<hr/>
<h2 data-id="heading-8">æœ€ä½³å®è·µæ¨¡æ¿</h2>
<p>ç»“åˆä»¥ä¸Šæ‰€æœ‰ç»éªŒï¼Œè¿™æ˜¯æˆ‘æ¨èçš„ Kotlin JPA å®ä½“å†™æ³•ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = <span class="hljs-string">"companies"</span>)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Company</span> {

    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">var</span> id: <span class="hljs-built_in">Long</span>? = <span class="hljs-literal">null</span>

    <span class="hljs-meta">@Column(nullable = false)</span>
    <span class="hljs-keyword">var</span> name: String = <span class="hljs-string">""</span>

    <span class="hljs-meta">@Column(nullable = false)</span>
    <span class="hljs-keyword">var</span> email: String = <span class="hljs-string">""</span>

    <span class="hljs-meta">@Column</span>
    <span class="hljs-keyword">var</span> description: String? = <span class="hljs-literal">null</span>  <span class="hljs-comment">// å¯ç©ºå­—æ®µæ˜ç¡®æ ‡æ³¨</span>

    <span class="hljs-meta">@ManyToOne(fetch = FetchType.LAZY)</span>
    <span class="hljs-keyword">var</span> parent: Company? = <span class="hljs-literal">null</span>

    <span class="hljs-comment">// åŸºäºä¸»é”®çš„ equals/hashCode</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">equals</span><span class="hljs-params">(other: <span class="hljs-type">Any</span>?)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> === other) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
        <span class="hljs-keyword">if</span> (other !<span class="hljs-keyword">is</span> Company) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
        <span class="hljs-keyword">return</span> id != <span class="hljs-literal">null</span> &amp;&amp; id == other.id
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">hashCode</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> = javaClass.hashCode()
}
</code></pre>
<p><strong>è¦ç‚¹</strong>ï¼š</p>
<ol>
<li>æ™®é€š classï¼Œä¸æ˜¯ data class</li>
<li>æ‰€æœ‰å±æ€§ç”¨ <code>var</code></li>
<li>ä¸»é”®ç”¨ <code>Long?</code></li>
<li>å¯ç©ºå­—æ®µç”¨ <code>?</code> ç±»å‹</li>
<li>æ‰‹åŠ¨å®ç°åŸºäºä¸»é”®çš„ <code>equals/hashCode</code></li>
</ol>
<hr/>
<h2 data-id="heading-9">å†™åœ¨æœ€å</h2>
<p>Kotlin å’Œ JPA çš„å†²çªæœ¬è´¨ä¸Šæ˜¯<strong>ç°ä»£è¯­è¨€è®¾è®¡</strong>ä¸<strong>ä¼ ç»Ÿ ORM è§„èŒƒ</strong>çš„ç¢°æ’ã€‚</p>
<p>JPA è¯ç”Ÿäº 2006 å¹´ï¼Œé‚£æ—¶ Java è¿˜æ²¡æœ‰ <code>record</code>ï¼Œæ›´æ²¡æœ‰ Kotlinã€‚å®ƒçš„è®¾è®¡æ·±åº¦ä¾èµ–åå°„å’Œå¯å˜æ€§â€”â€”è¿™åœ¨å½“æ—¶æ˜¯åˆç†çš„ï¼Œä½†ä¸ Kotlin çš„ç†å¿µæ ¼æ ¼ä¸å…¥ã€‚</p>
<p>å¥½æ¶ˆæ¯æ˜¯ï¼ŒJetBrains åœ¨ <strong>IntelliJ IDEA 2026.1</strong> ä¸­å¢åŠ äº† JPA + Kotlin çš„ä¸“é¡¹æ£€æŸ¥ï¼Œèƒ½è‡ªåŠ¨å‘ç°è¿™äº›é—®é¢˜ã€‚</p>
<p>åœ¨é‚£ä¹‹å‰ï¼Œè®°ä½è¿™ä¸ªåŸåˆ™ï¼š</p>
<blockquote>
<p><strong>åœ¨ JPA çš„ä¸–ç•Œé‡Œï¼Œæ”¾ä¸‹ Kotlin çš„ã€Œæ´ç™–ã€ï¼Œæ‹¥æŠ± <code>var</code> å’Œ <code>null</code>ã€‚</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬2ç« ã€ä»ç¯å¢ƒæ­å»ºåˆ°ç¨‹åºè¿è¡Œï¼šç¬¬ä¸€ä¸ª Go ç¨‹åºä¹‹æ—…]]></title>    <link>https://juejin.cn/post/7597317683051708425</link>    <guid>https://juejin.cn/post/7597317683051708425</guid>    <pubDate>2026-01-21T00:57:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597317683051708425" data-draft-id="7597278451030245386" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬2ç« ã€ä»ç¯å¢ƒæ­å»ºåˆ°ç¨‹åºè¿è¡Œï¼šç¬¬ä¸€ä¸ª Go ç¨‹åºä¹‹æ—…"/> <meta itemprop="keywords" content="åç«¯,Go"/> <meta itemprop="datePublished" content="2026-01-21T00:57:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ€•æµªçŒ«"/> <meta itemprop="url" content="https://juejin.cn/user/2832784963939438"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬2ç« ã€ä»ç¯å¢ƒæ­å»ºåˆ°ç¨‹åºè¿è¡Œï¼šç¬¬ä¸€ä¸ª Go ç¨‹åºä¹‹æ—…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2832784963939438/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ€•æµªçŒ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-21T00:57:19.000Z" title="Wed Jan 21 2026 00:57:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï½ åœ¨ä¸Šä¸€ç¯‡æ–‡ç« é‡Œï¼Œæˆ‘ä»¬èŠäº†ä¸ºä»€ä¹ˆé€‰æ‹©Goè¯­è¨€ï¼Œä»Šå¤©å°±ä»æœ€åŸºç¡€çš„â€œç¬¬ä¸€ä¸ªGoç¨‹åºâ€å¼€å§‹ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ èµ°å®Œä»ç¯å¢ƒæ­å»ºåˆ°ä»£ç è¿è¡Œã€é¡¹ç›®è§„èŒƒçš„å…¨æµç¨‹ã€‚ä¸ç®¡ä½ æ˜¯é›¶åŸºç¡€çš„ç¼–ç¨‹æ–°æ‰‹ï¼Œè¿˜æ˜¯ä»å…¶ä»–è¯­è¨€è½¬è¿‡æ¥çš„å¼€å‘è€…ï¼Œè¿™ç¯‡æ–‡ç« éƒ½èƒ½è®©ä½ å¿«é€Ÿä¸Šæ‰‹Goçš„åŸºç¡€å¼€å‘æµç¨‹ã€‚</p>
<h2 data-id="heading-0">1. å®‰è£…Goå¼€å‘ç¯å¢ƒä¸ç‰ˆæœ¬ç®¡ç†</h2>
<p>æƒ³è¦å†™Goç¨‹åºï¼Œç¬¬ä¸€æ­¥å½“ç„¶æ˜¯æŠŠå¼€å‘ç¯å¢ƒæ­å¥½ã€‚è¿™éƒ¨åˆ†æˆ‘ä»¬ä¸ä»…è®²åŸºç¡€å®‰è£…ï¼Œè¿˜ä¼šé‡ç‚¹è¯´ç‰ˆæœ¬ç®¡ç†â€”â€”æ¯•ç«Ÿå®é™…å¼€å‘ä¸­ï¼Œä¸åŒé¡¹ç›®å¯èƒ½éœ€è¦ä¸åŒç‰ˆæœ¬çš„Goï¼Œå­¦ä¼šç‰ˆæœ¬ç®¡ç†èƒ½å°‘è¸©å¾ˆå¤šå‘ã€‚</p>
<h3 data-id="heading-1">1.1 åŸºç¡€å®‰è£…ï¼ˆWindows/Mac/Linuxï¼‰</h3>
<p>Goçš„å®˜æ–¹å®‰è£…åŒ…é€‚é…æ‰€æœ‰ä¸»æµç³»ç»Ÿï¼Œæ­¥éª¤ç®€å•ä¸”ç»Ÿä¸€ï¼š</p>
<ol>
<li><strong>ä¸‹è½½å®‰è£…åŒ…</strong>ï¼š</li>
</ol>
<p>å®˜æ–¹ä¸‹è½½åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgo.dev%2Fdl%2F" target="_blank" title="https://go.dev/dl/" ref="nofollow noopener noreferrer">go.dev/dl/</a>ï¼ˆæ¨èä¸‹è½½â€œStableâ€ç¨³å®šç‰ˆï¼Œæ¯”å¦‚go1.22.xï¼‰</p>
<ul>
<li>
<p>Windowsï¼šä¸‹è½½<code>.msi</code>æ–‡ä»¶ï¼ŒåŒå‡»å®‰è£…ï¼Œé»˜è®¤è·¯å¾„<code>C:\Program Files\Go\</code>ï¼Œå®‰è£…ç¨‹åºä¼šè‡ªåŠ¨é…ç½®ç¯å¢ƒå˜é‡ã€‚</p>
</li>
<li>
<p>MacOSï¼šä¸‹è½½<code>.pkg</code>æ–‡ä»¶åŒå‡»å®‰è£…ï¼›æˆ–ç”¨Homebrewä¸€é”®å®‰è£…ï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">
brew install go
</code></pre>
</li>
<li>
<p>Linuxï¼šä¸‹è½½<code>.tar.gz</code>æ–‡ä»¶ï¼Œè§£å‹åˆ°<code>/usr/local</code>ï¼Œå¹¶é…ç½®ç¯å¢ƒå˜é‡ï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">
<span class="hljs-comment"># è§£å‹</span>
tar -C /usr/local -xzf go1.22.0.linux-amd64.tar.gz
<span class="hljs-comment"># é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå†™å…¥~/.bashrcæˆ–~/.zshrcï¼‰</span>
<span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$PATH</span>:/usr/local/go/bin
<span class="hljs-comment"># ç”Ÿæ•ˆé…ç½®</span>
<span class="hljs-built_in">source</span> ~/.bashrc
</code></pre>
</li>
</ul>
<ol>
<li><strong>éªŒè¯å®‰è£…</strong>ï¼š</li>
</ol>
<p>æ‰“å¼€ç»ˆç«¯ï¼ˆWindowsç”¨CMD/PowerShellï¼ŒMac/Linuxç”¨Terminalï¼‰ï¼Œè¾“å…¥ï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">
go version
</code></pre>
<p>è‹¥è¾“å‡ºç±»ä¼¼<code>go version go1.22.0 darwin/arm64</code>ï¼ˆMacï¼‰æˆ–<code>go version go1.22.0 windows/amd64</code>ï¼ˆWindowsï¼‰çš„ä¿¡æ¯ï¼Œè¯´æ˜å®‰è£…æˆåŠŸã€‚</p>
<h3 data-id="heading-2">1.2 ç‰ˆæœ¬ç®¡ç†ï¼ˆå¤šç‰ˆæœ¬åˆ‡æ¢ï¼‰</h3>
<p>å®é™…å¼€å‘ä¸­ï¼Œæ¯”å¦‚è€é¡¹ç›®ä¾èµ–Go1.20ï¼Œæ–°é¡¹ç›®è¦ç”¨Go1.22ï¼Œè¿™æ—¶å€™éœ€è¦ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œæ¨è<code>gvm</code>ï¼ˆGo Version Managerï¼‰ï¼š</p>
<ol>
<li>
<p><strong>å®‰è£…gvm</strong>ï¼ˆMac/Linuxï¼‰ï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">
bash &lt; &lt;(curl -s -S -L https://raw.githubusercontent.com/moovweb/gvm/master/binscripts/gvm-installer)
</code></pre>
<p>Windowsç”¨æˆ·å¯ä½¿ç”¨<code>gvm-windows</code>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fandrewkroh%2Fgvm-windows" target="_blank" title="https://github.com/andrewkroh/gvm-windows" ref="nofollow noopener noreferrer">github.com/andrewkroh/â€¦</a></p>
</li>
<li>
<p><strong>ä½¿ç”¨gvmç®¡ç†ç‰ˆæœ¬</strong>ï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">
<span class="hljs-comment"># å®‰è£…æŒ‡å®šç‰ˆæœ¬</span>
gvm install go1.20.0 -B
gvm install go1.22.0 -B
<span class="hljs-comment"># åˆ‡æ¢ç‰ˆæœ¬</span>
gvm use go1.20.0 --default  <span class="hljs-comment"># è®¾ç½®é»˜è®¤ç‰ˆæœ¬ä¸º1.20</span>
gvm use go1.22.0             <span class="hljs-comment"># ä¸´æ—¶åˆ‡æ¢åˆ°1.22</span>
</code></pre>
</li>
<li>
<p><strong>éªŒè¯ç‰ˆæœ¬åˆ‡æ¢</strong>ï¼š</p>
</li>
</ol>
<p>åˆ‡æ¢åå†æ¬¡æ‰§è¡Œ<code>go version</code>ï¼Œç¡®è®¤ç‰ˆæœ¬å·å·²æ›´æ–°ã€‚</p>
<h2 data-id="heading-3">2. è®¾ç½®GOPATHä¸æ¨¡å—æ¨¡å¼</h2>
<p>Goçš„é¡¹ç›®ç®¡ç†ç»å†äº†ä¸¤ä¸ªé˜¶æ®µï¼šæ—©æœŸçš„<code>GOPATH</code>æ¨¡å¼ï¼Œå’Œç°åœ¨ä¸»æµçš„<code>Go Modules</code>æ¨¡å¼ã€‚æˆ‘ä»¬å…ˆææ‡‚è¿™ä¸¤ä¸ªæ¦‚å¿µï¼Œé¿å…åç»­è¸©å‘ã€‚</p>
<h3 data-id="heading-4">2.1 ä»€ä¹ˆæ˜¯GOPATHï¼Ÿ</h3>
<p><code>GOPATH</code>æ˜¯Goæ—©æœŸçš„å·¥ä½œåŒºç›®å½•ï¼Œé»˜è®¤è·¯å¾„ï¼š</p>
<ul>
<li>
<p>Windowsï¼š<code>%USERPROFILE%\go</code>ï¼ˆæ¯”å¦‚<code>C:\Users\ä½ çš„ç”¨æˆ·å\go</code>ï¼‰</p>
</li>
<li>
<p>Mac/Linuxï¼š<code>$HOME/go</code>ï¼ˆæ¯”å¦‚<code>/Users/ä½ çš„ç”¨æˆ·å/go</code>ï¼‰</p>
</li>
</ul>
<p>å®ƒåŒ…å«ä¸‰ä¸ªå­ç›®å½•ï¼š</p>
<ul>
<li>
<p><code>src</code>ï¼šå­˜æ”¾Goé¡¹ç›®æºç </p>
</li>
<li>
<p><code>bin</code>ï¼šå­˜æ”¾ç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶</p>
</li>
<li>
<p><code>pkg</code>ï¼šå­˜æ”¾ç¼–è¯‘åçš„åŒ…æ–‡ä»¶</p>
</li>
</ul>
<h3 data-id="heading-5">2.2 ä¸ºä»€ä¹ˆæ¨èæ¨¡å—æ¨¡å¼ï¼ˆGo Modulesï¼‰ï¼Ÿ</h3>
<p>æ—©æœŸ<code>GOPATH</code>æ¨¡å¼æœ‰ä¸ªç—›ç‚¹ï¼šæ‰€æœ‰é¡¹ç›®å¿…é¡»æ”¾åœ¨<code>GOPATH/src</code>ä¸‹ï¼Œä¸”æ— æ³•ä¸ºä¸åŒé¡¹ç›®ç®¡ç†ä¸åŒç‰ˆæœ¬çš„ä¾èµ–ã€‚Go1.11å¼€å§‹å¼•å…¥<code>Go Modules</code>ï¼ˆæ¨¡å—æ¨¡å¼ï¼‰ï¼Œå½»åº•è§£å†³äº†è¿™ä¸ªé—®é¢˜â€”â€”<strong>é¡¹ç›®å¯ä»¥æ”¾åœ¨ä»»æ„ç›®å½•</strong>ï¼Œä¸”èƒ½ç²¾å‡†ç®¡ç†ä¾èµ–ç‰ˆæœ¬ã€‚</p>
<h3 data-id="heading-6">2.3 å¯ç”¨æ¨¡å—æ¨¡å¼ï¼ˆæ— éœ€æ‰‹åŠ¨é…ç½®GOPATHï¼‰</h3>
<p>Go1.16åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œ<code>Go Modules</code>å·²é»˜è®¤å¯ç”¨ï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚è‹¥ä½ çš„ç‰ˆæœ¬è¾ƒä½ï¼Œå¯é€šè¿‡ç¯å¢ƒå˜é‡å¯ç”¨ï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">
<span class="hljs-comment"># ä¸´æ—¶å¯ç”¨</span>
<span class="hljs-built_in">export</span> GO111MODULE=on
<span class="hljs-comment"># æ°¸ä¹…å¯ç”¨ï¼ˆå†™å…¥~/.bashrcæˆ–~/.zshrcï¼‰</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"export GO111MODULE=on"</span> &gt;&gt; ~/.bashrc
<span class="hljs-built_in">source</span> ~/.bashrc
</code></pre>
<h3 data-id="heading-7">3. ç¼–å†™å¹¶è¿è¡Œç¬¬ä¸€ä¸ªHello Worldç¨‹åº</h3>
<p>ç¯å¢ƒæ­å¥½åï¼Œæˆ‘ä»¬æ¥å†™ç¬¬ä¸€ä¸ªGoç¨‹åºï¼Œä½“éªŒä»ç¼–ç åˆ°è¿è¡Œçš„å®Œæ•´æµç¨‹ã€‚</p>
<h4 data-id="heading-8">3.1 æ­¥éª¤1ï¼šåˆ›å»ºé¡¹ç›®ç›®å½•ï¼ˆä»»æ„ä½ç½®ï¼‰</h4>
<p>ä¸ç”¨å±€é™äº<code>GOPATH</code>ï¼Œæ¯”å¦‚åœ¨æ¡Œé¢åˆ›å»º<code>hello-go</code>ç›®å½•ï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">
<span class="hljs-comment"># Mac/Linux</span>
<span class="hljs-built_in">mkdir</span> -p ~/Desktop/hello-go
<span class="hljs-built_in">cd</span> ~/Desktop/hello-go

<span class="hljs-comment"># Windowsï¼ˆPowerShellï¼‰</span>
<span class="hljs-built_in">mkdir</span> <span class="hljs-variable">$HOME</span>/Desktop/hello-go
<span class="hljs-built_in">cd</span> <span class="hljs-variable">$HOME</span>/Desktop/hello-go
</code></pre>
<h3 data-id="heading-9">3.2 æ­¥éª¤2ï¼šç¼–å†™ä»£ç </h3>
<p>æ–°å»º<code>main.go</code>æ–‡ä»¶ï¼ˆGoæºç æ–‡ä»¶åç¼€ä¸º<code>.go</code>ï¼‰ï¼Œå†™å…¥ä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-Go" lang="Go">
<span class="hljs-comment">// å£°æ˜åŒ…åï¼ŒmainåŒ…æ˜¯å¯æ‰§è¡Œç¨‹åºçš„å…¥å£åŒ…</span>
<span class="hljs-keyword">package</span> main

<span class="hljs-comment">// å¯¼å…¥æ ‡å‡†åº“çš„fmtåŒ…ï¼Œç”¨äºè¾“å…¥è¾“å‡º</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span>

<span class="hljs-comment">// ä¸»å‡½æ•°ï¼Œç¨‹åºçš„å…¥å£ç‚¹ï¼Œå¿…é¡»æ˜¯mainåŒ…ä¸‹çš„mainå‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// è¾“å‡ºHello World</span>
    fmt.Println(<span class="hljs-string">"Hello, Go! ğŸ‘‹"</span>)
}
</code></pre>
<h3 data-id="heading-10">3.3 æ­¥éª¤3ï¼šè¿è¡Œç¨‹åº</h3>
<p>åœ¨ç»ˆç«¯è¿›å…¥<code>hello-go</code>ç›®å½•ï¼Œæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">
go run main.go
</code></pre>
<p>ç»ˆç«¯ä¼šè¾“å‡ºï¼š<code>Hello, Go! ğŸ‘‹</code>ï¼Œæ­å–œä½ ï¼Œç¬¬ä¸€ä¸ªGoç¨‹åºè¿è¡ŒæˆåŠŸï¼</p>
<h2 data-id="heading-11">4. ä½¿ç”¨go runä¸go buildæ„å»ºç¨‹åº</h2>
<p><code>go run</code>å’Œ<code>go build</code>æ˜¯Goæœ€å¸¸ç”¨çš„ä¸¤ä¸ªæ„å»ºå‘½ä»¤ï¼Œæˆ‘ä»¬æ¥ææ‡‚å®ƒä»¬çš„åŒºåˆ«å’Œç”¨æ³•ã€‚</p>
<h3 data-id="heading-12">4.1 go runï¼šç›´æ¥è¿è¡Œï¼ˆä¸ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼‰</h3>
<p><code>go run</code>ä¼šå…ˆç¼–è¯‘æºç ï¼Œç„¶åç›´æ¥è¿è¡Œç¨‹åºï¼Œä½†ä¸ä¼šç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œé€‚åˆå¼€å‘è°ƒè¯•é˜¶æ®µï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">
<span class="hljs-comment"># åŸºæœ¬ç”¨æ³•</span>
go run main.go

<span class="hljs-comment"># è‹¥æœ‰å¤šä¸ªæºç æ–‡ä»¶ï¼ˆæ¯”å¦‚main.goã€utils.goï¼‰</span>
go run main.go utils.go
</code></pre>
<h3 data-id="heading-13">4.2 go buildï¼šç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶</h3>
<p><code>go build</code>ä¼šå°†æºç ç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œé€‚åˆéƒ¨ç½²å‘å¸ƒï¼š</p>
<ol>
<li>
<p><strong>åŸºæœ¬ç”¨æ³•</strong>ï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">
go build main.go
</code></pre>
<p>æ‰§è¡Œåï¼Œç›®å½•ä¸‹ä¼šç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼š</p>
<ul>
<li>
<p>Windowsï¼š<code>main.exe</code></p>
</li>
<li>
<p>Mac/Linuxï¼š<code>main</code></p>
</li>
</ul>
</li>
<li>
<p><strong>è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶</strong>ï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">
<span class="hljs-comment"># Windows</span>
.\main.exe

<span class="hljs-comment"># Mac/Linux</span>
./main
</code></pre>
</li>
<li>
<p><strong>è‡ªå®šä¹‰å¯æ‰§è¡Œæ–‡ä»¶å</strong>ï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">
<span class="hljs-comment"># -o æŒ‡å®šè¾“å‡ºæ–‡ä»¶å</span>
go build -o hello main.go

<span class="hljs-comment"># è¿è¡Œè‡ªå®šä¹‰åç§°çš„ç¨‹åº</span>
./hello  <span class="hljs-comment"># Mac/Linux</span>
.\hello.exe  <span class="hljs-comment"># Windows</span>
</code></pre>
</li>
</ol>
<h3 data-id="heading-14">4.3 è·¨å¹³å°ç¼–è¯‘</h3>
<p>Goçš„ä¸€å¤§ä¼˜åŠ¿æ˜¯è·¨å¹³å°ç¼–è¯‘â€”â€”åœ¨ä¸€å°æœºå™¨ä¸Šç¼–è¯‘å‡ºå…¶ä»–ç³»ç»Ÿçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ— éœ€ç›®æ ‡ç³»ç»Ÿç¯å¢ƒï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">
<span class="hljs-comment"># ç¤ºä¾‹ï¼šåœ¨Macä¸Šç¼–è¯‘Windows 64ä½ç¨‹åº</span>
CGO_ENABLED=0 GOOS=windows GOARCH=amd64 go build -o hello-windows.exe main.go

<span class="hljs-comment"># ç¤ºä¾‹ï¼šåœ¨Windowsä¸Šç¼–è¯‘Linux 64ä½ç¨‹åºï¼ˆPowerShellï¼‰</span>
<span class="hljs-variable">$env</span>:CGO_ENABLED=0
<span class="hljs-variable">$env</span>:GOOS=<span class="hljs-string">"linux"</span>
<span class="hljs-variable">$env</span>:GOARCH=<span class="hljs-string">"amd64"</span>
go build -o hello-linux main.go
</code></pre>
<p>å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li>
<p><code>CGO_ENABLED=0</code>ï¼šç¦ç”¨CGOï¼ˆé¿å…è·¨å¹³å°ä¾èµ–é—®é¢˜ï¼‰</p>
</li>
<li>
<p><code>GOOS</code>ï¼šç›®æ ‡æ“ä½œç³»ç»Ÿï¼ˆwindows/linux/darwinï¼ˆMacï¼‰ï¼‰</p>
</li>
<li>
<p><code>GOARCH</code>ï¼šç›®æ ‡æ¶æ„ï¼ˆamd64/arm64/386ï¼‰</p>
</li>
</ul>
<h2 data-id="heading-15">5. ç¨‹åºç»“æ„è§£æï¼šåŒ…ã€å¯¼å…¥ã€ä¸»å‡½æ•°</h2>
<p>ç¬¬ä¸€ä¸ªç¨‹åºè™½ç„¶ç®€å•ï¼Œä½†åŒ…å«äº†Goç¨‹åºçš„æ ¸å¿ƒç»“æ„ï¼Œæˆ‘ä»¬é€è¡Œæ‹†è§£ï¼Œç†è§£èƒŒåçš„é€»è¾‘ã€‚</p>
<h3 data-id="heading-16">5.1 åŒ…ï¼ˆPackageï¼‰</h3>
<pre><code class="hljs language-Go" lang="Go">
<span class="hljs-keyword">package</span> main
</code></pre>
<ul>
<li>
<p>Goä¸­æ‰€æœ‰ä»£ç éƒ½å±äºæŸä¸ªâ€œåŒ…â€ï¼ŒåŒ…æ˜¯Goçš„åŸºæœ¬ç»„ç»‡å•ä½ã€‚</p>
</li>
<li>
<p><code>main</code>åŒ…æ˜¯<strong>ç‰¹æ®ŠåŒ…</strong>ï¼šåªæœ‰<code>main</code>åŒ…æ‰èƒ½ç”Ÿæˆå¯æ‰§è¡Œç¨‹åºï¼Œå…¶ä»–åŒ…åªèƒ½ä½œä¸ºåº“è¢«å¯¼å…¥ä½¿ç”¨ã€‚</p>
</li>
<li>
<p>åŒ…åé€šå¸¸å’Œç›®å½•åä¸€è‡´ï¼ˆä½†ä¸æ˜¯å¼ºåˆ¶ï¼‰ï¼Œæ¯”å¦‚<code>fmt</code>åŒ…å¯¹åº”çš„ç›®å½•å°±æ˜¯<code>fmt</code>ã€‚</p>
</li>
</ul>
<h3 data-id="heading-17">5.2 å¯¼å…¥ï¼ˆImportï¼‰</h3>
<pre><code class="hljs language-Go" lang="Go">
<span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span>
</code></pre>
<ul>
<li>
<p><code>import</code>ç”¨äºå¯¼å…¥å…¶ä»–åŒ…ï¼Œä½¿ç”¨å…¶ä¸­çš„å‡½æ•°ã€å˜é‡ç­‰ã€‚</p>
</li>
<li>
<p><code>"fmt"</code>æ˜¯Goæ ‡å‡†åº“çš„åŒ…ï¼Œæä¾›æ ¼å¼åŒ–è¾“å…¥è¾“å‡ºåŠŸèƒ½ã€‚</p>
</li>
<li>
<p>å¤šåŒ…å¯¼å…¥çš„ä¸¤ç§å†™æ³•ï¼ˆæ¨èç¬¬äºŒç§ï¼Œæ›´è§„èŒƒï¼‰ï¼š</p>
<pre><code class="hljs language-Go" lang="Go">
<span class="hljs-comment">// å†™æ³•1ï¼šå¤šè¡Œå¯¼å…¥</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">"os"</span>

<span class="hljs-comment">// å†™æ³•2ï¼šåˆ†ç»„å¯¼å…¥ï¼ˆæ¨èï¼‰</span>
<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"os"</span>
)
</code></pre>
</li>
</ul>
<h3 data-id="heading-18">5.3 ä¸»å‡½æ•°ï¼ˆmainå‡½æ•°ï¼‰</h3>
<pre><code class="hljs language-Go" lang="Go">
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    fmt.Println(<span class="hljs-string">"Hello, Go! ğŸ‘‹"</span>)
}
</code></pre>
<ul>
<li>
<p><code>main()</code>å‡½æ•°æ˜¯ç¨‹åºçš„<strong>å”¯ä¸€å…¥å£</strong>ï¼Œå¿…é¡»å®šä¹‰åœ¨<code>main</code>åŒ…ä¸‹ï¼Œä¸”æ²¡æœ‰å‚æ•°ã€æ²¡æœ‰è¿”å›å€¼ã€‚</p>
</li>
<li>
<p><code>fmt.Println()</code>æ˜¯<code>fmt</code>åŒ…çš„å‡½æ•°ï¼Œç”¨äºè¾“å‡ºä¸€è¡Œæ–‡æœ¬åˆ°æ§åˆ¶å°ã€‚</p>
</li>
<li>
<p>å‡½æ•°ä½“å¿…é¡»ç”¨<code>{}</code>åŒ…è£¹ï¼Œä¸”<code>{</code>å¿…é¡»å’Œå‡½æ•°ååœ¨åŒä¸€è¡Œï¼ˆGoçš„è¯­æ³•è§„èŒƒï¼‰ã€‚</p>
</li>
</ul>
<h3 data-id="heading-19">5.4 å®Œæ•´ç»“æ„æ€»ç»“</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[Package: åŒ…å£°æ˜] --&gt; B[Import: åŒ…å¯¼å…¥]
    B --&gt; C[Function: å‡½æ•°å®šä¹‰ï¼ˆmainæ˜¯å…¥å£ï¼‰]
    C --&gt; D[Code: ä¸šåŠ¡é€»è¾‘ä»£ç ]
</code></pre>
<h2 data-id="heading-20">6. æ³¨é‡Šä¸ä»£ç å¯è¯»æ€§è§„èŒƒ</h2>
<p>å¥½çš„æ³¨é‡Šå’Œä»£ç è§„èŒƒèƒ½è®©ä½ çš„ä»£ç æ›´æ˜“è¯»ã€æ˜“ç»´æŠ¤ï¼ŒGoæœ‰æ˜ç¡®çš„æ³¨é‡Šè§„èŒƒï¼Œæˆ‘ä»¬æ¥å­¦ä¹ ã€‚</p>
<h3 data-id="heading-21">6.1 Goçš„æ³¨é‡Šæ–¹å¼</h3>
<p>Goæ”¯æŒä¸¤ç§æ³¨é‡Šï¼šå•è¡Œæ³¨é‡Šå’Œå¤šè¡Œæ³¨é‡Šï¼Œ<strong>å¤šè¡Œæ³¨é‡Šä»…ç”¨äºåŒ…æ³¨é‡Š</strong>ï¼Œå•è¡Œæ³¨é‡Šç”¨äºä»£ç å†…æ³¨é‡Šã€‚</p>
<pre><code class="hljs language-Go" lang="Go">
<span class="hljs-comment">// å•è¡Œæ³¨é‡Šï¼šè¿™æ˜¯mainåŒ…ï¼Œç¨‹åºå…¥å£åŒ…</span>
<span class="hljs-keyword">package</span> main

<span class="hljs-comment">/*
å¤šè¡Œæ³¨é‡Šï¼ˆåŒ…æ³¨é‡Šä¸“ç”¨ï¼‰ï¼š
fmtåŒ…æä¾›æ ¼å¼åŒ–è¾“å…¥è¾“å‡ºåŠŸèƒ½ï¼Œ
æ˜¯Goæ ‡å‡†åº“çš„æ ¸å¿ƒåŒ…ä¹‹ä¸€ã€‚
*/</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span>

<span class="hljs-comment">// mainå‡½æ•°ï¼šç¨‹åºçš„å…¥å£ç‚¹</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// è¾“å‡ºHello World</span>
    <span class="hljs-comment">// fmt.Printlnæ˜¯æ‰“å°å‡½æ•°ï¼Œä¼šè‡ªåŠ¨æ¢è¡Œ</span>
    fmt.Println(<span class="hljs-string">"Hello, Go! ğŸ‘‹"</span>)
}
</code></pre>
<h3 data-id="heading-22">6.2 ä»£ç å¯è¯»æ€§è§„èŒƒï¼ˆGoå®˜æ–¹æ¨èï¼‰</h3>
<ol>
<li>
<p><strong>åŒ…æ³¨é‡Š</strong>ï¼šæ¯ä¸ªåŒ…éƒ½è¦æœ‰å¤šè¡Œæ³¨é‡Šï¼Œè¯´æ˜åŒ…çš„åŠŸèƒ½ï¼ˆæ”¾åœ¨<code>package</code>å£°æ˜ä¸Šæ–¹ï¼‰ã€‚</p>
</li>
<li>
<p><strong>å‡½æ•°æ³¨é‡Š</strong>ï¼šå¯¹å¤–æš´éœ²çš„å‡½æ•°ï¼ˆé¦–å­—æ¯å¤§å†™ï¼‰å¿…é¡»åŠ å•è¡Œæ³¨é‡Šï¼Œè¯´æ˜åŠŸèƒ½ã€å‚æ•°ã€è¿”å›å€¼ã€‚</p>
</li>
<li>
<p><strong>å‘½åè§„èŒƒ</strong>ï¼š</p>
<ul>
<li>
<p>åŒ…åï¼šå°å†™ã€ç®€æ´ï¼Œæ— ä¸‹åˆ’çº¿ï¼ˆæ¯”å¦‚<code>fmt</code>ã€<code>net/http</code>ï¼‰ã€‚</p>
</li>
<li>
<p>å˜é‡/å‡½æ•°åï¼šé©¼å³°å‘½åï¼Œå¯¹å¤–æš´éœ²çš„é¦–å­—æ¯å¤§å†™ï¼ˆ<code>UserName</code>ï¼‰ï¼Œå†…éƒ¨ä½¿ç”¨çš„é¦–å­—æ¯å°å†™ï¼ˆ<code>userName</code>ï¼‰ã€‚</p>
</li>
<li>
<p>å¸¸é‡åï¼šå…¨å¤§å†™ï¼Œä¸‹åˆ’çº¿åˆ†éš”ï¼ˆ<code>MAX_SIZE</code>ï¼‰ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>ä»£ç æ ¼å¼</strong>ï¼š</p>
<ul>
<li>
<p>ä½¿ç”¨<code>go fmt</code>å‘½ä»¤è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç ï¼ˆVS Code/Golandä¼šè‡ªåŠ¨æ‰§è¡Œï¼‰ï¼Œä¿è¯ä»£ç é£æ ¼ç»Ÿä¸€ã€‚</p>
</li>
<li>
<p>æ¯è¡Œä»£ç ä¸è¶…è¿‡80ä¸ªå­—ç¬¦ï¼Œè¿‡é•¿æ—¶æ¢è¡Œã€‚</p>
</li>
</ul>
</li>
</ol>
<p>ç¤ºä¾‹ï¼šè§„èŒƒçš„ä»£ç æ³¨é‡Š</p>
<pre><code class="hljs language-Go" lang="Go">
<span class="hljs-comment">// åŒ…æ³¨é‡Šï¼šhelloåŒ…æä¾›ç®€å•çš„é—®å€™åŠŸèƒ½</span>
<span class="hljs-keyword">package</span> hello

<span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span>

<span class="hljs-comment">// Greet å‘æŒ‡å®šç”¨æˆ·å‘é€é—®å€™è¯­</span>
<span class="hljs-comment">// å‚æ•°ï¼šname - ç”¨æˆ·å</span>
<span class="hljs-comment">// è¿”å›å€¼ï¼šæ‹¼æ¥å¥½çš„é—®å€™å­—ç¬¦ä¸²</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Greet</span><span class="hljs-params">(name <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">string</span> {
    <span class="hljs-comment">// æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œä½¿ç”¨fmt.Sprintfæ ¼å¼åŒ–</span>
    <span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">"Hello, %s!"</span>, name)
}

<span class="hljs-comment">// å†…éƒ¨å‡½æ•°ï¼Œé¦–å­—æ¯å°å†™ï¼Œæ— éœ€å¯¹å¤–æ³¨é‡Š</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">printGreet</span><span class="hljs-params">(name <span class="hljs-type">string</span>)</span></span> {
    fmt.Println(Greet(name))
}
</code></pre>
<h2 data-id="heading-23">7. ä½¿ç”¨Go Modulesåˆå§‹åŒ–é¡¹ç›®</h2>
<p>å‰é¢æˆ‘ä»¬æåˆ°<code>Go Modules</code>æ˜¯ç°åœ¨çš„ä¸»æµé¡¹ç›®ç®¡ç†æ–¹å¼ï¼Œæ¥ä¸‹æ¥å­¦ä¹ å¦‚ä½•ç”¨å®ƒåˆå§‹åŒ–é¡¹ç›®ã€ç®¡ç†ä¾èµ–ã€‚</p>
<h3 data-id="heading-24">7.1 åˆå§‹åŒ–æ¨¡å—</h3>
<p>è¿›å…¥ä½ çš„é¡¹ç›®ç›®å½•ï¼ˆæ¯”å¦‚<code>hello-go</code>ï¼‰ï¼Œæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">
go mod init github.com/ä½ çš„ç”¨æˆ·å/hello-go
</code></pre>
<ul>
<li>
<p><code>github.com/ä½ çš„ç”¨æˆ·å/hello-go</code>æ˜¯<strong>æ¨¡å—è·¯å¾„</strong>ï¼ˆå¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ä¸²ï¼Œæ¨èç”¨GitHubä»“åº“åœ°å€ï¼Œæ–¹ä¾¿åç»­å‘å¸ƒï¼‰ã€‚</p>
</li>
<li>
<p>æ‰§è¡Œåä¼šç”Ÿæˆ<code>go.mod</code>æ–‡ä»¶ï¼Œè¿™æ˜¯æ¨¡å—çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œè®°å½•æ¨¡å—è·¯å¾„å’ŒGoç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">
module github.com/ä½ çš„ç”¨æˆ·å/hello-go

go 1.22
</code></pre>
</li>
</ul>
<h3 data-id="heading-25">7.2 æ·»åŠ ä¾èµ–</h3>
<p>æ¯”å¦‚æˆ‘ä»¬è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“<code>github.com/gin-gonic/gin</code>ï¼ˆé«˜æ€§èƒ½Webæ¡†æ¶ï¼‰ï¼Œç›´æ¥åœ¨ä»£ç ä¸­å¯¼å…¥ï¼Œç„¶åæ‰§è¡Œ<code>go mod tidy</code>å³å¯è‡ªåŠ¨ä¸‹è½½ä¾èµ–ï¼š</p>
<ol>
<li>
<p>ä¿®æ”¹<code>main.go</code>ï¼š</p>
<pre><code class="hljs language-Go" lang="Go">
<span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"github.com/gin-gonic/gin"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    fmt.Println(<span class="hljs-string">"Hello, Go! ğŸ‘‹"</span>)
    <span class="hljs-comment">// åˆå§‹åŒ–ginå¼•æ“</span>
    r := gin.Default()
    r.GET(<span class="hljs-string">"/"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> {
        c.JSON(<span class="hljs-number">200</span>, gin.H{
            <span class="hljs-string">"message"</span>: <span class="hljs-string">"Hello, Go!"</span>,
        })
    })
    r.Run(<span class="hljs-string">":8080"</span>) <span class="hljs-comment">// å¯åŠ¨æœåŠ¡</span>
}
</code></pre>
</li>
<li>
<p>æ‰§è¡Œ<code>go mod tidy</code>ï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">
go mod tidy
</code></pre>
<p>è¯¥å‘½ä»¤ä¼šè‡ªåŠ¨åˆ†æä»£ç ä¸­çš„ä¾èµ–ï¼Œä¸‹è½½ç¼ºå¤±çš„ä¾èµ–ï¼Œå¹¶åˆ é™¤æ— ç”¨çš„ä¾èµ–ã€‚æ‰§è¡Œåä¼šç”Ÿæˆ<code>go.sum</code>æ–‡ä»¶ï¼ˆè®°å½•ä¾èµ–çš„å“ˆå¸Œå€¼ï¼Œä¿è¯ä¾èµ–å®Œæ•´æ€§ï¼‰ï¼Œ<code>go.mod</code>ä¼šæ–°å¢ä¾èµ–è®°å½•ï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">
module github.com/ä½ çš„ç”¨æˆ·å/hello-go

go 1.22

require github.com/gin-gonic/gin v1.9.1

require (
    // çœç•¥ginçš„ä¾èµ–...
)
</code></pre>
</li>
</ol>
<h3 data-id="heading-26">7.3 å¸¸ç”¨Go Moduleså‘½ä»¤</h3>
<pre><code class="hljs language-Bash" lang="Bash">
go mod init  <span class="hljs-comment"># åˆå§‹åŒ–æ¨¡å—</span>
go mod tidy  <span class="hljs-comment"># æ•´ç†ä¾èµ–</span>
go mod download  <span class="hljs-comment"># ä¸‹è½½ä¾èµ–åˆ°æœ¬åœ°ç¼“å­˜</span>
go mod vendor  <span class="hljs-comment"># å°†ä¾èµ–å¤åˆ¶åˆ°é¡¹ç›®çš„vendorç›®å½•</span>
go mod verify  <span class="hljs-comment"># éªŒè¯ä¾èµ–çš„å®Œæ•´æ€§</span>
</code></pre>
<h2 data-id="heading-27">8. å¸¸è§é”™è¯¯ä¸è°ƒè¯•å…¥é—¨</h2>
<p>æ–°æ‰‹å†™Goç¨‹åºæ—¶ï¼Œå®¹æ˜“é‡åˆ°ä¸€äº›å¸¸è§é”™è¯¯ï¼Œæˆ‘ä»¬æ¥æ€»ç»“å¹¶ç»™å‡ºè§£å†³æ–¹æ³•ï¼ŒåŒæ—¶å…¥é—¨åŸºç¡€è°ƒè¯•æŠ€å·§ã€‚</p>
<h3 data-id="heading-28">8.1 å¸¸è§é”™è¯¯åŠè§£å†³</h3>
<ol>
<li>
<p><strong>é”™è¯¯1ï¼šåŒ…åä¸æ˜¯mainï¼Œä½†æƒ³ç”Ÿæˆå¯æ‰§è¡Œç¨‹åº</strong></p>
<pre><code class="hljs language-Go" lang="Go">
<span class="hljs-comment">// é”™è¯¯ä»£ç </span>
<span class="hljs-keyword">package</span> hello  <span class="hljs-comment">// ä¸æ˜¯mainåŒ…</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    fmt.Println(<span class="hljs-string">"Hello"</span>)
}
</code></pre>
<p>æŠ¥é”™ï¼š<code>runtime.main_mainÂ·f: function main is undeclared in the main package</code></p>
<p>è§£å†³ï¼šå°†åŒ…åæ”¹ä¸º<code>main</code>ã€‚</p>
</li>
<li>
<p><strong>é”™è¯¯2ï¼šimportå¯¼å…¥äº†æœªä½¿ç”¨çš„åŒ…</strong></p>
<pre><code class="hljs language-Go" lang="Go">
<span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"fmt"</span>
    <span class="hljs-string">"os"</span>  <span class="hljs-comment">// å¯¼å…¥ä½†æœªä½¿ç”¨</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    fmt.Println(<span class="hljs-string">"Hello"</span>)
}
</code></pre>
<p>æŠ¥é”™ï¼š<code>imported and not used: "os"</code></p>
<p>è§£å†³ï¼šåˆ é™¤æœªä½¿ç”¨çš„åŒ…å¯¼å…¥ï¼Œæˆ–ä½¿ç”¨<code>_</code>å¿½ç•¥ï¼ˆ<code>import _ "os"</code>ï¼‰ã€‚</p>
</li>
<li>
<p><strong>é”™è¯¯3ï¼šå‡½æ•°åå¤§å°å†™é”™è¯¯ï¼ˆå¯¹å¤–æš´éœ²çš„å‡½æ•°é¦–å­—æ¯å°å†™ï¼‰</strong></p>
<pre><code class="hljs language-Go" lang="Go">
<span class="hljs-keyword">package</span> hello

<span class="hljs-comment">// é¦–å­—æ¯å°å†™ï¼Œå…¶ä»–åŒ…æ— æ³•å¯¼å…¥</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">greet</span><span class="hljs-params">()</span></span> <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello"</span>
}
</code></pre>
<p>è§£å†³ï¼šå¯¹å¤–æš´éœ²çš„å‡½æ•°é¦–å­—æ¯å¤§å†™ï¼ˆ<code>Greet</code>ï¼‰ã€‚</p>
</li>
<li>
<p><strong>é”™è¯¯4ï¼šgo buildè·¨å¹³å°ç¼–è¯‘æ—¶CGOæœªç¦ç”¨</strong></p>
</li>
</ol>
<p>æŠ¥é”™ï¼š<code>cannot load C:\Program Files\Go\pkg\windows_amd64\runtime/cgo: open ...: permission denied</code></p>
<p>è§£å†³ï¼šç¼–è¯‘æ—¶åŠ <code>CGO_ENABLED=0</code>ï¼ˆè§4.3èŠ‚ï¼‰ã€‚</p>
<h3 data-id="heading-29">8.2 è°ƒè¯•å…¥é—¨ï¼ˆä½¿ç”¨VS Codeï¼‰</h3>
<ol>
<li>
<p><strong>é…ç½®è°ƒè¯•ç¯å¢ƒ</strong>ï¼š</p>
<ul>
<li>
<p>åœ¨VS Codeä¸­æ‰“å¼€é¡¹ç›®ï¼Œç‚¹å‡»å·¦ä¾§â€œè¿è¡Œå’Œè°ƒè¯•â€ï¼ˆCtrl+Shift+Dï¼‰ã€‚</p>
</li>
<li>
<p>ç‚¹å‡»â€œåˆ›å»ºlaunch.jsonæ–‡ä»¶â€ï¼Œé€‰æ‹©â€œGoâ€ï¼Œè‡ªåŠ¨ç”Ÿæˆè°ƒè¯•é…ç½®ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>è®¾ç½®æ–­ç‚¹</strong>ï¼š</p>
</li>
</ol>
<p>åœ¨ä»£ç è¡Œå·å·¦ä¾§ç‚¹å‡»ï¼Œå‡ºç°çº¢è‰²åœ†ç‚¹å³ä¸ºæ–­ç‚¹ï¼ˆæ¯”å¦‚<code>fmt.Println</code>é‚£ä¸€è¡Œï¼‰ã€‚</p>
<ol>
<li><strong>å¯åŠ¨è°ƒè¯•</strong>ï¼š</li>
</ol>
<p>ç‚¹å‡»â€œå¯åŠ¨è°ƒè¯•â€ï¼ˆF5ï¼‰ï¼Œç¨‹åºä¼šåœåœ¨æ–­ç‚¹å¤„ï¼Œå¯æŸ¥çœ‹å˜é‡ã€å•æ­¥æ‰§è¡Œï¼ˆF10ï¼‰ã€ç»§ç»­æ‰§è¡Œï¼ˆF5ï¼‰ã€‚</p>
<h3 data-id="heading-30">8.3 åŸºç¡€è°ƒè¯•å‘½ä»¤ï¼ˆç»ˆç«¯ï¼‰</h3>
<p>è‹¥æ²¡æœ‰IDEï¼Œå¯ä½¿ç”¨<code>go run</code>ç»“åˆæ‰“å°è¯­å¥è°ƒè¯•ï¼Œæˆ–ä½¿ç”¨<code>dlv</code>ï¼ˆDelveï¼ŒGoå®˜æ–¹è°ƒè¯•å·¥å…·ï¼‰ï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">
<span class="hljs-comment"># å®‰è£…dlv</span>
go install github.com/go-delve/delve/cmd/dlv@latest

<span class="hljs-comment"># å¯åŠ¨è°ƒè¯•</span>
dlv debug main.go

<span class="hljs-comment"># è°ƒè¯•å‘½ä»¤</span>
(dlv) <span class="hljs-built_in">break</span> main.go:10  <span class="hljs-comment"># åœ¨ç¬¬10è¡Œè®¾ç½®æ–­ç‚¹</span>
(dlv) run               <span class="hljs-comment"># è¿è¡Œç¨‹åº</span>
(dlv) next              <span class="hljs-comment"># å•æ­¥æ‰§è¡Œ</span>
(dlv) <span class="hljs-built_in">print</span> name        <span class="hljs-comment"># æ‰“å°å˜é‡nameçš„å€¼</span>
(dlv) <span class="hljs-built_in">continue</span>          <span class="hljs-comment"># ç»§ç»­æ‰§è¡Œ</span>
(dlv) <span class="hljs-built_in">exit</span>              <span class="hljs-comment"># é€€å‡ºè°ƒè¯•</span>
</code></pre>
<h2 data-id="heading-31">æ€»ç»“</h2>
<ol>
<li>
<p><strong>ç¯å¢ƒæ­å»º</strong>ï¼šä¼˜å…ˆä½¿ç”¨å®˜æ–¹å®‰è£…åŒ…ï¼Œå¤šç‰ˆæœ¬ç®¡ç†ç”¨<code>gvm</code>ï¼Œæ— éœ€çº ç»“<code>GOPATH</code>ï¼ŒGo1.16+é»˜è®¤å¯ç”¨æ¨¡å—æ¨¡å¼ã€‚</p>
</li>
<li>
<p><strong>ç¨‹åºæ ¸å¿ƒç»“æ„</strong>ï¼š<code>main</code>åŒ…+<code>main</code>å‡½æ•°æ˜¯å¯æ‰§è¡Œç¨‹åºçš„å…¥å£ï¼Œ<code>import</code>å¯¼å…¥ä¾èµ–åŒ…ï¼Œä»£ç éœ€éµå¾ªGoçš„å‘½åå’Œæ³¨é‡Šè§„èŒƒã€‚</p>
</li>
<li>
<p><strong>é¡¹ç›®ç®¡ç†</strong>ï¼šç”¨<code>go mod init</code>åˆå§‹åŒ–æ¨¡å—ï¼Œ<code>go mod tidy</code>ç®¡ç†ä¾èµ–ï¼Œ<code>go run</code>è°ƒè¯•ã€<code>go build</code>ç¼–è¯‘éƒ¨ç½²ã€‚</p>
</li>
<li>
<p><strong>é¿å‘ä¸è°ƒè¯•</strong>ï¼šå¸¸è§é”™è¯¯å¤šæ˜¯åŒ…åã€å¯¼å…¥ã€å‘½åè§„èŒƒé—®é¢˜ï¼Œè°ƒè¯•ä¼˜å…ˆç”¨VS Codeæ–­ç‚¹è°ƒè¯•ï¼Œç»ˆç«¯å¯ç”¨<code>dlv</code>å·¥å…·ã€‚</p>
</li>
</ol>
<p>åˆ°è¿™é‡Œï¼Œä½ å·²ç»æŒæ¡äº†Goç¨‹åºçš„åŸºç¡€å¼€å‘æµç¨‹ï¼Œæ¥ä¸‹æ¥å¯ä»¥å°è¯•å†™ä¸€äº›ç®€å•çš„å°ç¨‹åºï¼ˆæ¯”å¦‚è®¡ç®—å™¨ã€æ–‡ä»¶è¯»å†™ï¼‰ï¼Œå·©å›ºä»Šå¤©çš„çŸ¥è¯†ç‚¹ã€‚å¦‚æœæœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Activitiå·¥ä½œæµä»å…¥é—¨åˆ°ç²¾é€š]]></title>    <link>https://juejin.cn/post/7597266141913219118</link>    <guid>https://juejin.cn/post/7597266141913219118</guid>    <pubDate>2026-01-21T00:58:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597266141913219118" data-draft-id="7597276695403675689" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Activitiå·¥ä½œæµä»å…¥é—¨åˆ°ç²¾é€š"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-01-21T00:58:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ä¸­é£˜è¡çš„è®°å¿†"/> <meta itemprop="url" content="https://juejin.cn/user/694547077666606"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Activitiå·¥ä½œæµä»å…¥é—¨åˆ°ç²¾é€š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547077666606/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ä¸­é£˜è¡çš„è®°å¿†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-21T00:58:09.000Z" title="Wed Jan 21 2026 00:58:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-21
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Activitiå·¥ä½œæµä»å…¥é—¨åˆ°ç²¾é€š</h2>
<h3 data-id="heading-1">ä¸€ã€ä»€ä¹ˆæ˜¯Activitiï¼Ÿ</h3>
<p>Activitiæ˜¯ä¸€ä¸ªå¼€æºçš„å·¥ä½œæµå¼•æ“ï¼Œå®ƒå®ç°äº†BPMN 2.0ï¼ˆBusiness Process Model and Notationï¼‰è§„èŒƒï¼Œå¯ä»¥ç”¨äºè‡ªåŠ¨åŒ–ä¸šåŠ¡æµç¨‹ã€‚Activitiç”±Alfrescoè½¯ä»¶å…¬å¸å¼€å‘ï¼ŒåŸºäºApacheè®¸å¯åè®®å‘å¸ƒï¼Œæ˜¯ç›®å‰æœ€æµè¡Œçš„è½»é‡çº§å·¥ä½œæµå¼•æ“ä¹‹ä¸€ã€‚</p>
<h4 data-id="heading-2">1.1 æ ¸å¿ƒæ¦‚å¿µ</h4>
<ul>
<li><strong>æµç¨‹å¼•æ“ï¼ˆProcess Engineï¼‰</strong>ï¼šActivitiçš„æ ¸å¿ƒï¼Œè´Ÿè´£æµç¨‹çš„æ‰§è¡Œå’Œç®¡ç†</li>
<li><strong>BPMN</strong>ï¼šä¸šåŠ¡æµç¨‹å»ºæ¨¡ä¸ notationï¼Œä¸€ç§æ ‡å‡†çš„æµç¨‹å»ºæ¨¡è¯­è¨€</li>
<li><strong>æµç¨‹å®šä¹‰ï¼ˆProcess Definitionï¼‰</strong>ï¼šä¸šåŠ¡æµç¨‹çš„é™æ€æè¿°ï¼Œé€šå¸¸ä»¥BPMN XMLæ ¼å¼å­˜å‚¨</li>
<li><strong>æµç¨‹å®ä¾‹ï¼ˆProcess Instanceï¼‰</strong>ï¼šæµç¨‹å®šä¹‰çš„ä¸€æ¬¡æ‰§è¡Œ</li>
<li><strong>ä»»åŠ¡ï¼ˆTaskï¼‰</strong>ï¼šæµç¨‹ä¸­çš„å·¥ä½œå•å…ƒï¼Œéœ€è¦ç”±ç”¨æˆ·æˆ–ç³»ç»Ÿå®Œæˆ</li>
<li><strong>æœåŠ¡ä»»åŠ¡ï¼ˆService Taskï¼‰</strong>ï¼šè‡ªåŠ¨æ‰§è¡Œçš„ç³»ç»Ÿä»»åŠ¡</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff113f1365394f5f9ba6f9ab92659066~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769561888&amp;x-signature=GTUcCTpOlYyk6XiCN0uN8t8Cg%2FI%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">äºŒã€ç¯å¢ƒæ­å»º</h3>
<h4 data-id="heading-4">2.1 Mavenä¾èµ–é…ç½®</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- åœ¨pom.xmlä¸­æ·»åŠ Activitiä¾èµ– --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Activitiæ ¸å¿ƒä¾èµ– --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.activiti<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>activiti-engine<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>7.1.0.M6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- Activiti Springé›†æˆ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.activiti<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>activiti-spring<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>7.1.0.M6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- BPMNå»ºæ¨¡å·¥å…· --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.activiti<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>activiti-bpmn-model<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>7.1.0.M6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- MySQLé©±åŠ¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.28<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥æ±  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.8<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h4 data-id="heading-5">2.2 é…ç½®æµç¨‹å¼•æ“</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.activiti.config;

<span class="hljs-keyword">import</span> org.activiti.engine.ProcessEngine;
<span class="hljs-keyword">import</span> org.activiti.engine.ProcessEngineConfiguration;
<span class="hljs-keyword">import</span> org.activiti.engine.impl.cfg.StandaloneProcessEngineConfiguration;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Value;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;

<span class="hljs-keyword">import</span> javax.sql.DataSource;

<span class="hljs-comment">/**
 * Activitiæµç¨‹å¼•æ“é…ç½®ç±»
 */</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ActivitiConfig</span> {

    <span class="hljs-meta">@Value("${spring.datasource.url}")</span>
    <span class="hljs-keyword">private</span> String url;

    <span class="hljs-meta">@Value("${spring.datasource.username}")</span>
    <span class="hljs-keyword">private</span> String username;

    <span class="hljs-meta">@Value("${spring.datasource.password}")</span>
    <span class="hljs-keyword">private</span> String password;

    <span class="hljs-meta">@Value("${spring.datasource.driver-class-name}")</span>
    <span class="hljs-keyword">private</span> String driverClassName;

    <span class="hljs-comment">/**
     * é…ç½®æµç¨‹å¼•æ“
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> ProcessEngineConfiguration <span class="hljs-title function_">processEngineConfiguration</span><span class="hljs-params">()</span> {
        <span class="hljs-type">StandaloneProcessEngineConfiguration</span> <span class="hljs-variable">configuration</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StandaloneProcessEngineConfiguration</span>();

        <span class="hljs-comment">// é…ç½®æ•°æ®åº“è¿æ¥</span>
        configuration.setJdbcDriver(driverClassName);
        configuration.setJdbcUrl(url);
        configuration.setJdbcUsername(username);
        configuration.setJdbcPassword(password);

        <span class="hljs-comment">// æ•°æ®åº“ç­–ç•¥é…ç½®</span>
        <span class="hljs-comment">// DB_SCHEMA_UPDATE_TRUEï¼šå¦‚æœè¡¨ä¸å­˜åœ¨ï¼Œè‡ªåŠ¨åˆ›å»ºè¡¨</span>
        <span class="hljs-comment">// DB_SCHEMA_UPDATE_FALSEï¼šä¸è‡ªåŠ¨æ›´æ–°è¡¨ç»“æ„</span>
        <span class="hljs-comment">// DB_SCHEMA_UPDATE_CREATE_DROPï¼šå…ˆåˆ›å»ºè¡¨ï¼Œå…³é—­æ—¶åˆ é™¤è¡¨</span>
        configuration.setDatabaseSchemaUpdate(ProcessEngineConfiguration.DB_SCHEMA_UPDATE_TRUE);

        <span class="hljs-comment">// å¼‚æ­¥æ‰§è¡Œå™¨é…ç½®</span>
        configuration.setAsyncExecutorActivate(<span class="hljs-literal">true</span>);
        configuration.setAsyncExecutorEnabled(<span class="hljs-literal">true</span>);

        <span class="hljs-keyword">return</span> configuration;
    }

    <span class="hljs-comment">/**
     * åˆ›å»ºæµç¨‹å¼•æ“Bean
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> ProcessEngine <span class="hljs-title function_">processEngine</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> processEngineConfiguration().buildProcessEngine();
    }
}
</code></pre>
<h4 data-id="heading-6">2.3 åˆ›å»ºæ•°æ®åº“åˆå§‹åŒ–é…ç½®</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.activiti.config;

<span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;
<span class="hljs-keyword">import</span> com.alibaba.druid.pool.DruidDataSource;

<span class="hljs-keyword">import</span> javax.sql.DataSource;

<span class="hljs-comment">/**
 * æ•°æ®æºé…ç½®
 */</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceConfig</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">dataSource</span><span class="hljs-params">()</span> {
        <span class="hljs-type">DruidDataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DruidDataSource</span>();
        dataSource.setUrl(<span class="hljs-string">"jdbc:mysql://localhost:3306/activiti_db?useUnicode=true&amp;characterEncoding=utf8&amp;serverTimezone=Asia/Shanghai"</span>);
        dataSource.setUsername(<span class="hljs-string">"root"</span>);
        dataSource.setPassword(<span class="hljs-string">"123456"</span>);
        dataSource.setDriverClassName(<span class="hljs-string">"com.mysql.cj.jdbc.Driver"</span>);

        <span class="hljs-comment">// è¿æ¥æ± é…ç½®</span>
        dataSource.setInitialSize(<span class="hljs-number">5</span>);
        dataSource.setMinIdle(<span class="hljs-number">5</span>);
        dataSource.setMaxActive(<span class="hljs-number">20</span>);
        dataSource.setMaxWait(<span class="hljs-number">60000</span>);

        <span class="hljs-keyword">return</span> dataSource;
    }
}
</code></pre>
<h3 data-id="heading-7">ä¸‰ã€æ ¸å¿ƒAPIè¯¦è§£</h3>
<h4 data-id="heading-8">3.1 æµç¨‹å¼•æ“æœåŠ¡æ¶æ„</h4>
<p>Activitiæä¾›äº†å¤šä¸ªæ ¸å¿ƒæœåŠ¡æ¥å£ï¼Œæ¯ä¸ªæ¥å£è´Ÿè´£ä¸åŒçš„åŠŸèƒ½æ¨¡å—ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d98906ab21de43d5a0344777c273e536~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769561888&amp;x-signature=v9X%2BjYNcMukM6ytxQnj3s8bdEzM%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-9">3.2 æ ¸å¿ƒæœåŠ¡æ¥å£</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.activiti.service;

<span class="hljs-keyword">import</span> org.activiti.engine.*;
<span class="hljs-keyword">import</span> org.activiti.engine.repository.Deployment;
<span class="hljs-keyword">import</span> org.activiti.engine.runtime.ProcessInstance;
<span class="hljs-keyword">import</span> org.activiti.engine.task.Task;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-comment">/**
 * Activitiæ ¸å¿ƒæœåŠ¡ä½¿ç”¨ç¤ºä¾‹
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ActivitiCoreService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ProcessEngine processEngine;

    <span class="hljs-comment">/**
     * è·å–æµç¨‹å®šä¹‰æœåŠ¡ - ç®¡ç†æµç¨‹å®šä¹‰å’Œéƒ¨ç½²
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">repositoryServiceExample</span><span class="hljs-params">()</span> {
        <span class="hljs-type">RepositoryService</span> <span class="hljs-variable">repositoryService</span> <span class="hljs-operator">=</span> processEngine.getRepositoryService();

        <span class="hljs-comment">// éƒ¨ç½²æµç¨‹å®šä¹‰</span>
        <span class="hljs-type">Deployment</span> <span class="hljs-variable">deployment</span> <span class="hljs-operator">=</span> repositoryService.createDeployment()
                .addClasspathResource(<span class="hljs-string">"processes/leave-request.bpmn20.xml"</span>)
                .name(<span class="hljs-string">"è¯·å‡æµç¨‹"</span>)
                .deploy();

        System.out.println(<span class="hljs-string">"æµç¨‹éƒ¨ç½²ID: "</span> + deployment.getId());
        System.out.println(<span class="hljs-string">"æµç¨‹éƒ¨ç½²åç§°: "</span> + deployment.getName());
    }

    <span class="hljs-comment">/**
     * è·å–è¿è¡Œæ—¶æœåŠ¡ - å¯åŠ¨æµç¨‹å®ä¾‹ã€æŸ¥è¯¢æµç¨‹å®ä¾‹
     */</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">runtimeServiceExample</span><span class="hljs-params">()</span> {
        <span class="hljs-type">RuntimeService</span> <span class="hljs-variable">runtimeService</span> <span class="hljs-operator">=</span> processEngine.getRuntimeService();

        <span class="hljs-comment">// è®¾ç½®æµç¨‹å˜é‡</span>
        Map&lt;String, Object&gt; variables = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        variables.put(<span class="hljs-string">"applicant"</span>, <span class="hljs-string">"å¼ ä¸‰"</span>);
        variables.put(<span class="hljs-string">"days"</span>, <span class="hljs-number">3</span>);

        <span class="hljs-comment">// å¯åŠ¨æµç¨‹å®ä¾‹</span>
        <span class="hljs-type">ProcessInstance</span> <span class="hljs-variable">processInstance</span> <span class="hljs-operator">=</span> runtimeService.startProcessInstanceByKey(
                <span class="hljs-string">"leaveRequest"</span>,
                variables
        );

        System.out.println(<span class="hljs-string">"æµç¨‹å®ä¾‹ID: "</span> + processInstance.getId());
        System.out.println(<span class="hljs-string">"æµç¨‹å®šä¹‰ID: "</span> + processInstance.getProcessDefinitionId());

        <span class="hljs-keyword">return</span> processInstance.getId();
    }

    <span class="hljs-comment">/**
     * è·å–ä»»åŠ¡æœåŠ¡ - æŸ¥è¯¢ã€å®Œæˆç”¨æˆ·ä»»åŠ¡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">taskServiceExample</span><span class="hljs-params">(String processInstanceId)</span> {
        <span class="hljs-type">TaskService</span> <span class="hljs-variable">taskService</span> <span class="hljs-operator">=</span> processEngine.getTaskService();

        <span class="hljs-comment">// æŸ¥è¯¢å¾…åŠä»»åŠ¡</span>
        List&lt;Task&gt; tasks = taskService.createTaskQuery()
                .processInstanceId(processInstanceId)
                .list();

        <span class="hljs-keyword">for</span> (Task task : tasks) {
            System.out.println(<span class="hljs-string">"ä»»åŠ¡ID: "</span> + task.getId());
            System.out.println(<span class="hljs-string">"ä»»åŠ¡åç§°: "</span> + task.getName());
            System.out.println(<span class="hljs-string">"ä»»åŠ¡åŠç†äºº: "</span> + task.getAssignee());

            <span class="hljs-comment">// è®¾ç½®ä»»åŠ¡å˜é‡</span>
            Map&lt;String, Object&gt; taskVariables = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            taskVariables.put(<span class="hljs-string">"approved"</span>, <span class="hljs-literal">true</span>);
            taskVariables.put(<span class="hljs-string">"comment"</span>, <span class="hljs-string">"åŒæ„è¯·å‡"</span>);

            <span class="hljs-comment">// å®Œæˆä»»åŠ¡</span>
            taskService.complete(task.getId(), taskVariables);
        }
    }

    <span class="hljs-comment">/**
     * è·å–å†å²æœåŠ¡ - æŸ¥è¯¢å†å²æ•°æ®
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">historyServiceExample</span><span class="hljs-params">(String processInstanceId)</span> {
        <span class="hljs-type">HistoryService</span> <span class="hljs-variable">historyService</span> <span class="hljs-operator">=</span> processEngine.getHistoryService();

        <span class="hljs-comment">// æŸ¥è¯¢å·²å®Œæˆçš„å†å²ä»»åŠ¡</span>
        List&lt;org.activiti.engine.task.history.HistoricTaskInstance&gt; historicTasks =
                historyService.createHistoricTaskInstanceQuery()
                        .processInstanceId(processInstanceId)
                        .finished()
                        .orderByHistoricTaskInstanceEndTime()
                        .asc()
                        .list();

        <span class="hljs-keyword">for</span> (org.activiti.engine.task.history.HistoricTaskInstance historicTask : historicTasks) {
            System.out.println(<span class="hljs-string">"å†å²ä»»åŠ¡ID: "</span> + historicTask.getId());
            System.out.println(<span class="hljs-string">"å†å²ä»»åŠ¡åç§°: "</span> + historicTask.getName());
            System.out.println(<span class="hljs-string">"å®Œæˆæ—¶é—´: "</span> + historicTask.getEndTime());
        }
    }

    <span class="hljs-comment">/**
     * è·å–ç®¡ç†æœåŠ¡ - æ‰§è¡Œç®¡ç†å’Œè¿ç»´æ“ä½œ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">managementServiceExample</span><span class="hljs-params">()</span> {
        <span class="hljs-type">ManagementService</span> <span class="hljs-variable">managementService</span> <span class="hljs-operator">=</span> processEngine.getManagementService();

        <span class="hljs-comment">// æ‰§è¡Œè‡ªå®šä¹‰SQLæŸ¥è¯¢</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">tableCount</span> <span class="hljs-operator">=</span> managementService.createTableCountQuery().count();
        System.out.println(<span class="hljs-string">"Activitiè¡¨æ•°é‡: "</span> + tableCount);

        <span class="hljs-comment">// è·å–æ•°æ®åº“è¡¨å…ƒæ•°æ®</span>
        List&lt;String&gt; tableNames = managementService.getTableNames();
        System.out.println(<span class="hljs-string">"Activitiè¡¨ååˆ—è¡¨: "</span> + tableNames);
    }

    <span class="hljs-comment">/**
     * è·å–åŠ¨æ€BPMNæœåŠ¡ - åŠ¨æ€ä¿®æ”¹æµç¨‹
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dynamicBpmnServiceExample</span><span class="hljs-params">()</span> {
        <span class="hljs-type">DynamicBpmnService</span> <span class="hljs-variable">dynamicBpmnService</span> <span class="hljs-operator">=</span> processEngine.getDynamicBpmnService();

        <span class="hljs-comment">// åŠ¨æ€ä¿®æ”¹æµç¨‹å®šä¹‰çš„æŸäº›å±æ€§ï¼Œè€Œä¸éœ€è¦é‡æ–°éƒ¨ç½²</span>
        <span class="hljs-comment">// ä¾‹å¦‚ï¼šä¿®æ”¹ä»»åŠ¡åç§°ã€æ·»åŠ ç›‘å¬å™¨ç­‰</span>
        System.out.println(<span class="hljs-string">"åŠ¨æ€BPMNæœåŠ¡å¯ç”¨äºè¿è¡Œæ—¶ä¿®æ”¹æµç¨‹å®šä¹‰"</span>);
    }
}
</code></pre>
<h3 data-id="heading-10">å››ã€BPMNæµç¨‹è®¾è®¡</h3>
<h4 data-id="heading-11">4.1 åˆ›å»ºè¯·å‡æµç¨‹</h4>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„è¯·å‡å®¡æ‰¹æµç¨‹BPMNæ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">definitions</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.omg.org/spec/BPMN/20100524/MODEL"</span>
             <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
             <span class="hljs-attr">xmlns:activiti</span>=<span class="hljs-string">"http://activiti.org/bpmn"</span>
             <span class="hljs-attr">xmlns:bpmndi</span>=<span class="hljs-string">"http://www.omg.org/spec/BPMN/20100524/DI"</span>
             <span class="hljs-attr">typeLanguage</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema"</span>
             <span class="hljs-attr">expressionLanguage</span>=<span class="hljs-string">"http://www.w3.org/1999/XPath"</span>
             <span class="hljs-attr">targetNamespace</span>=<span class="hljs-string">"http://www.example.org/process"</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æµç¨‹å®šä¹‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">process</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"leaveRequest"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"è¯·å‡å®¡æ‰¹æµç¨‹"</span> <span class="hljs-attr">isExecutable</span>=<span class="hljs-string">"true"</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- å¼€å§‹äº‹ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">startEvent</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"startEvent"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"å¼€å§‹"</span>/&gt;</span>

        <span class="hljs-comment">&lt;!-- ç”¨æˆ·ä»»åŠ¡ï¼šæäº¤è¯·å‡ç”³è¯· --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">userTask</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"submitLeave"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"æäº¤è¯·å‡ç”³è¯·"</span> <span class="hljs-attr">activiti:assignee</span>=<span class="hljs-string">"${applicant}"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">documentation</span>&gt;</span>å‘˜å·¥æäº¤è¯·å‡ç”³è¯·<span class="hljs-tag">&lt;/<span class="hljs-name">documentation</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">userTask</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- ç”¨æˆ·ä»»åŠ¡ï¼šéƒ¨é—¨ç»ç†å®¡æ‰¹ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">userTask</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"managerApproval"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"éƒ¨é—¨ç»ç†å®¡æ‰¹"</span> <span class="hljs-attr">activiti:candidateGroups</span>=<span class="hljs-string">"managers"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">documentation</span>&gt;</span>éƒ¨é—¨ç»ç†å®¡æ‰¹è¯·å‡ç”³è¯·<span class="hljs-tag">&lt;/<span class="hljs-name">documentation</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">userTask</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- ç½‘å…³ï¼šæ’ä»–ç½‘å…³ï¼Œæ ¹æ®è¯·å‡å¤©æ•°åˆ¤æ–­ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">exclusiveGateway</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"gateway"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"å¤©æ•°åˆ¤æ–­"</span>/&gt;</span>

        <span class="hljs-comment">&lt;!-- ç”¨æˆ·ä»»åŠ¡ï¼šæ€»ç»ç†å®¡æ‰¹ï¼ˆè¯·å‡å¤©æ•°å¤§äº3å¤©ï¼‰ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">userTask</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"gmApproval"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"æ€»ç»ç†å®¡æ‰¹"</span> <span class="hljs-attr">activiti:candidateGroups</span>=<span class="hljs-string">"general_managers"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">documentation</span>&gt;</span>æ€»ç»ç†å®¡æ‰¹é•¿æœŸè¯·å‡<span class="hljs-tag">&lt;/<span class="hljs-name">documentation</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">userTask</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æœåŠ¡ä»»åŠ¡ï¼šå‘é€é€šçŸ¥ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">serviceTask</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sendNotification"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"å‘é€é€šçŸ¥"</span>
                     <span class="hljs-attr">activiti:class</span>=<span class="hljs-string">"com.example.activiti.delegate.SendNotificationDelegate"</span>/&gt;</span>

        <span class="hljs-comment">&lt;!-- ç»“æŸäº‹ä»¶ï¼šå®¡æ‰¹é€šè¿‡ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">endEvent</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"endEventApproved"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"å®¡æ‰¹é€šè¿‡"</span>/&gt;</span>

        <span class="hljs-comment">&lt;!-- ç»“æŸäº‹ä»¶ï¼šå®¡æ‰¹æ‹’ç» --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">endEvent</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"endEventRejected"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"å®¡æ‰¹æ‹’ç»"</span>/&gt;</span>

        <span class="hljs-comment">&lt;!-- æµç¨‹è¿çº¿ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"flow1"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"startEvent"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"submitLeave"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"flow2"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"submitLeave"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"managerApproval"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"flow3"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"managerApproval"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"gateway"</span>/&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"flow4"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"gateway"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"gmApproval"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">conditionExpression</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">"tFormalExpression"</span>&gt;</span>
                &lt;![CDATA[${days &gt; 3}]]&gt;
            <span class="hljs-tag">&lt;/<span class="hljs-name">conditionExpression</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">sequenceFlow</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"flow5"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"gateway"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"sendNotification"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">conditionExpression</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">"tFormalExpression"</span>&gt;</span>
                &lt;![CDATA[${days &lt;= 3}]]&gt;
            <span class="hljs-tag">&lt;/<span class="hljs-name">conditionExpression</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">sequenceFlow</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"flow6"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"gmApproval"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"sendNotification"</span>/&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"flow7"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"sendNotification"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"endEventApproved"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">conditionExpression</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">"tFormalExpression"</span>&gt;</span>
                &lt;![CDATA[${approved == true}]]&gt;
            <span class="hljs-tag">&lt;/<span class="hljs-name">conditionExpression</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">sequenceFlow</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">sequenceFlow</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"flow8"</span> <span class="hljs-attr">sourceRef</span>=<span class="hljs-string">"sendNotification"</span> <span class="hljs-attr">targetRef</span>=<span class="hljs-string">"endEventRejected"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">conditionExpression</span> <span class="hljs-attr">xsi:type</span>=<span class="hljs-string">"tFormalExpression"</span>&gt;</span>
                &lt;![CDATA[${approved == false}]]&gt;
            <span class="hljs-tag">&lt;/<span class="hljs-name">conditionExpression</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">sequenceFlow</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">process</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- BPMNå›¾å½¢ä¿¡æ¯ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bpmndi:BPMNDiagram</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"BPMNDiagram_leaveRequest"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">bpmndi:BPMNPlane</span> <span class="hljs-attr">bpmnElement</span>=<span class="hljs-string">"leaveRequest"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"BPMNPlane_leaveRequest"</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- è¿™é‡ŒåŒ…å«å›¾å½¢å¸ƒå±€ä¿¡æ¯ --&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">bpmndi:BPMNPlane</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">bpmndi:BPMNDiagram</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">definitions</span>&gt;</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b3e2024b3ae45c2acd0e7308349094e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769561888&amp;x-signature=dd9i6Spi16RZgpjnoffMJOFsGJ4%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-12">4.2 æµç¨‹è®¾è®¡æœ€ä½³å®è·µ</h4>
<ol>
<li><strong>å‘½åè§„èŒƒ</strong>ï¼šæµç¨‹å®šä¹‰IDä½¿ç”¨é©¼å³°å‘½åï¼Œä»»åŠ¡åç§°ä½¿ç”¨ä¸­æ–‡æè¿°</li>
<li><strong>ç½‘å…³ä½¿ç”¨</strong>ï¼šåˆç†ä½¿ç”¨æ’ä»–ç½‘å…³ã€å¹¶è¡Œç½‘å…³å’ŒåŒ…å®¹ç½‘å…³</li>
<li><strong>ä»»åŠ¡åˆ†é…</strong>ï¼šä½¿ç”¨å€™é€‰äººï¼ˆcandidateUsersï¼‰å’Œå€™é€‰ç»„ï¼ˆcandidateGroupsï¼‰</li>
<li><strong>æµç¨‹å˜é‡</strong>ï¼šåˆç†è®¾ç½®æµç¨‹å˜é‡ï¼Œé¿å…ä¼ é€’è¿‡å¤šæ•°æ®</li>
</ol>
<h3 data-id="heading-13">äº”ã€ç”Ÿäº§ç¯å¢ƒå®æˆ˜æ¡ˆä¾‹</h3>
<h4 data-id="heading-14">5.1 ç³»ç»Ÿæ•´ä½“æ¶æ„</h4>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„OAç³»ç»Ÿä¸Activitié›†æˆçš„æ¶æ„è®¾è®¡ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f610c33daa1437482e1ae46f3974947~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769561888&amp;x-signature=KZo8nn%2BJPa%2BxDpkIprc8Is4%2BMd0%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-15">5.2 è¯·å‡å®¡æ‰¹å®Œæ•´å®ç°</h4>
<h5 data-id="heading-16">5.2.1 å®ä½“ç±»è®¾è®¡</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.activiti.entity;

<span class="hljs-keyword">import</span> java.util.Date;

<span class="hljs-comment">/**
 * è¯·å‡ç”³è¯·å®ä½“
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LeaveRequest</span> {

    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String processInstanceId;
    <span class="hljs-keyword">private</span> String applicant;
    <span class="hljs-keyword">private</span> Integer days;
    <span class="hljs-keyword">private</span> String reason;
    <span class="hljs-keyword">private</span> Date startTime;
    <span class="hljs-keyword">private</span> Date endTime;
    <span class="hljs-keyword">private</span> String status;
    <span class="hljs-keyword">private</span> Date createTime;
    <span class="hljs-keyword">private</span> Date updateTime;

    <span class="hljs-comment">// Getterå’ŒSetteræ–¹æ³•</span>
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getProcessInstanceId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> processInstanceId;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setProcessInstanceId</span><span class="hljs-params">(String processInstanceId)</span> {
        <span class="hljs-built_in">this</span>.processInstanceId = processInstanceId;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getApplicant</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> applicant;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setApplicant</span><span class="hljs-params">(String applicant)</span> {
        <span class="hljs-built_in">this</span>.applicant = applicant;
    }

    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getDays</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> days;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDays</span><span class="hljs-params">(Integer days)</span> {
        <span class="hljs-built_in">this</span>.days = days;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getReason</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> reason;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setReason</span><span class="hljs-params">(String reason)</span> {
        <span class="hljs-built_in">this</span>.reason = reason;
    }

    <span class="hljs-keyword">public</span> Date <span class="hljs-title function_">getStartTime</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> startTime;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setStartTime</span><span class="hljs-params">(Date startTime)</span> {
        <span class="hljs-built_in">this</span>.startTime = startTime;
    }

    <span class="hljs-keyword">public</span> Date <span class="hljs-title function_">getEndTime</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> endTime;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setEndTime</span><span class="hljs-params">(Date endTime)</span> {
        <span class="hljs-built_in">this</span>.endTime = endTime;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getStatus</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> status;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setStatus</span><span class="hljs-params">(String status)</span> {
        <span class="hljs-built_in">this</span>.status = status;
    }

    <span class="hljs-keyword">public</span> Date <span class="hljs-title function_">getCreateTime</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> createTime;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCreateTime</span><span class="hljs-params">(Date createTime)</span> {
        <span class="hljs-built_in">this</span>.createTime = createTime;
    }

    <span class="hljs-keyword">public</span> Date <span class="hljs-title function_">getUpdateTime</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> updateTime;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUpdateTime</span><span class="hljs-params">(Date updateTime)</span> {
        <span class="hljs-built_in">this</span>.updateTime = updateTime;
    }
}
</code></pre>
<h5 data-id="heading-17">5.2.2 æœåŠ¡å±‚å®ç°</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.activiti.service;

<span class="hljs-keyword">import</span> com.example.activiti.entity.LeaveRequest;
<span class="hljs-keyword">import</span> org.activiti.engine.*;
<span class="hljs-keyword">import</span> org.activiti.engine.repository.Deployment;
<span class="hljs-keyword">import</span> org.activiti.engine.runtime.ProcessInstance;
<span class="hljs-keyword">import</span> org.activiti.engine.task.Task;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> org.springframework.transaction.annotation.Transactional;

<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-comment">/**
 * è¯·å‡å®¡æ‰¹æœåŠ¡
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LeaveRequestService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ProcessEngine processEngine;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RepositoryService repositoryService;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RuntimeService runtimeService;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> TaskService taskService;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> HistoryService historyService;

    <span class="hljs-comment">/**
     * éƒ¨ç½²æµç¨‹å®šä¹‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deployProcess</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Deployment</span> <span class="hljs-variable">deployment</span> <span class="hljs-operator">=</span> repositoryService.createDeployment()
                .addClasspathResource(<span class="hljs-string">"processes/leave-request.bpmn20.xml"</span>)
                .name(<span class="hljs-string">"è¯·å‡å®¡æ‰¹æµç¨‹"</span>)
                .category(<span class="hljs-string">"OA"</span>)
                .deploy();

        System.out.println(<span class="hljs-string">"æµç¨‹éƒ¨ç½²æˆåŠŸï¼ŒID: "</span> + deployment.getId());
    }

    <span class="hljs-comment">/**
     * å¯åŠ¨è¯·å‡æµç¨‹
     */</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">startLeaveProcess</span><span class="hljs-params">(LeaveRequest leaveRequest)</span> {
        <span class="hljs-comment">// å‡†å¤‡æµç¨‹å˜é‡</span>
        Map&lt;String, Object&gt; variables = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        variables.put(<span class="hljs-string">"applicant"</span>, leaveRequest.getApplicant());
        variables.put(<span class="hljs-string">"days"</span>, leaveRequest.getDays());
        variables.put(<span class="hljs-string">"reason"</span>, leaveRequest.getReason());
        variables.put(<span class="hljs-string">"startTime"</span>, leaveRequest.getStartTime());
        variables.put(<span class="hljs-string">"endTime"</span>, leaveRequest.getEndTime());

        <span class="hljs-comment">// å¯åŠ¨æµç¨‹å®ä¾‹</span>
        <span class="hljs-type">ProcessInstance</span> <span class="hljs-variable">processInstance</span> <span class="hljs-operator">=</span> runtimeService.startProcessInstanceByKey(
                <span class="hljs-string">"leaveRequest"</span>,
                variables
        );

        <span class="hljs-comment">// ä¿å­˜æµç¨‹å®ä¾‹IDåˆ°ä¸šåŠ¡è¡¨</span>
        leaveRequest.setProcessInstanceId(processInstance.getId());
        leaveRequest.setStatus(<span class="hljs-string">"PENDING"</span>);
        <span class="hljs-comment">// è¿™é‡Œåº”è¯¥è°ƒç”¨DAOä¿å­˜åˆ°æ•°æ®åº“</span>
        <span class="hljs-comment">// leaveRequestDao.insert(leaveRequest);</span>

        <span class="hljs-keyword">return</span> processInstance.getId();
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢å¾…åŠä»»åŠ¡
     */</span>
    <span class="hljs-keyword">public</span> List&lt;Task&gt; <span class="hljs-title function_">findPendingTasks</span><span class="hljs-params">(String assignee)</span> {
        <span class="hljs-keyword">return</span> taskService.createTaskQuery()
                .taskAssignee(assignee)
                .orderByTaskCreateTime()
                .desc()
                .list();
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢å€™é€‰ä»»åŠ¡ï¼ˆç»„ä»»åŠ¡ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> List&lt;Task&gt; <span class="hljs-title function_">findCandidateTasks</span><span class="hljs-params">(String candidateGroup)</span> {
        <span class="hljs-keyword">return</span> taskService.createTaskQuery()
                .taskCandidateGroup(candidateGroup)
                .orderByTaskCreateTime()
                .desc()
                .list();
    }

    <span class="hljs-comment">/**
     * å®Œæˆä»»åŠ¡
     */</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">completeTask</span><span class="hljs-params">(String taskId, <span class="hljs-type">boolean</span> approved, String comment)</span> {
        <span class="hljs-comment">// è®¾ç½®å®¡æ‰¹ç»“æœ</span>
        Map&lt;String, Object&gt; variables = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        variables.put(<span class="hljs-string">"approved"</span>, approved);
        variables.put(<span class="hljs-string">"comment"</span>, comment);

        <span class="hljs-comment">// æ·»åŠ è¯„è®º</span>
        taskService.addComment(taskId, <span class="hljs-literal">null</span>, comment);

        <span class="hljs-comment">// å®Œæˆä»»åŠ¡</span>
        taskService.complete(taskId, variables);

        <span class="hljs-comment">// æ›´æ–°ä¸šåŠ¡çŠ¶æ€</span>
        <span class="hljs-type">Task</span> <span class="hljs-variable">task</span> <span class="hljs-operator">=</span> taskService.createTaskQuery().taskId(taskId).singleResult();
        <span class="hljs-type">String</span> <span class="hljs-variable">processInstanceId</span> <span class="hljs-operator">=</span> task.getProcessInstanceId();

        <span class="hljs-comment">// æ ¹æ®å®¡æ‰¹ç»“æœæ›´æ–°ä¸šåŠ¡è¡¨</span>
        <span class="hljs-comment">// LeaveRequest leaveRequest = leaveRequestDao.findByProcessInstanceId(processInstanceId);</span>
        <span class="hljs-comment">// leaveRequest.setStatus(approved ? "APPROVED" : "REJECTED");</span>
        <span class="hljs-comment">// leaveRequestDao.update(leaveRequest);</span>
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢æµç¨‹å†å²
     */</span>
    <span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">getProcessHistory</span><span class="hljs-params">(String processInstanceId)</span> {
        <span class="hljs-comment">// æŸ¥è¯¢æµç¨‹å®ä¾‹å†å²</span>
        org.activiti.engine.history.<span class="hljs-type">HistoricProcessInstance</span> <span class="hljs-variable">historicProcessInstance</span> <span class="hljs-operator">=</span>
                historyService.createHistoricProcessInstanceQuery()
                        .processInstanceId(processInstanceId)
                        .singleResult();

        <span class="hljs-comment">// æŸ¥è¯¢å†å²ä»»åŠ¡</span>
        List&lt;org.activiti.engine.task.history.HistoricTaskInstance&gt; historicTasks =
                historyService.createHistoricTaskInstanceQuery()
                        .processInstanceId(processInstanceId)
                        .orderByHistoricTaskInstanceEndTime()
                        .asc()
                        .list();

        <span class="hljs-comment">// æŸ¥è¯¢å†å²å˜é‡</span>
        List&lt;org.activiti.engine.history.HistoricVariableInstance&gt; historicVariables =
                historyService.createHistoricVariableInstanceQuery()
                        .processInstanceId(processInstanceId)
                        .list();

        Map&lt;String, Object&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        result.put(<span class="hljs-string">"processInstance"</span>, historicProcessInstance);
        result.put(<span class="hljs-string">"tasks"</span>, historicTasks);
        result.put(<span class="hljs-string">"variables"</span>, historicVariables);

        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-comment">/**
     * æ’¤é”€æµç¨‹
     */</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cancelProcess</span><span class="hljs-params">(String processInstanceId, String reason)</span> {
        <span class="hljs-comment">// åˆ é™¤æµç¨‹å®ä¾‹</span>
        runtimeService.deleteProcessInstance(processInstanceId, reason);

        <span class="hljs-comment">// æ›´æ–°ä¸šåŠ¡è¡¨çŠ¶æ€</span>
        <span class="hljs-comment">// LeaveRequest leaveRequest = leaveRequestDao.findByProcessInstanceId(processInstanceId);</span>
        <span class="hljs-comment">// leaveRequest.setStatus("CANCELLED");</span>
        <span class="hljs-comment">// leaveRequestDao.update(leaveRequest);</span>
    }

    <span class="hljs-comment">/**
     * æŒ‚èµ·æµç¨‹
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">suspendProcess</span><span class="hljs-params">(String processInstanceId)</span> {
        runtimeService.suspendProcessInstanceById(processInstanceId);
    }

    <span class="hljs-comment">/**
     * æ¿€æ´»æµç¨‹
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">activateProcess</span><span class="hljs-params">(String processInstanceId)</span> {
        runtimeService.activateProcessInstanceById(processInstanceId);
    }
}
</code></pre>
<h4 data-id="heading-18">5.3 ä»»åŠ¡ç›‘å¬å™¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.activiti.listener;

<span class="hljs-keyword">import</span> org.activiti.engine.delegate.DelegateTask;
<span class="hljs-keyword">import</span> org.activiti.engine.delegate.TaskListener;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-comment">/**
 * ä»»åŠ¡åˆ›å»ºç›‘å¬å™¨
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TaskCreateListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">TaskListener</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">notify</span><span class="hljs-params">(DelegateTask delegateTask)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">taskName</span> <span class="hljs-operator">=</span> delegateTask.getName();
        <span class="hljs-type">String</span> <span class="hljs-variable">assignee</span> <span class="hljs-operator">=</span> delegateTask.getAssignee();

        System.out.println(<span class="hljs-string">"ä»»åŠ¡åˆ›å»º: "</span> + taskName);
        System.out.println(<span class="hljs-string">"åŠç†äºº: "</span> + assignee);

        <span class="hljs-comment">// å‘é€é€šçŸ¥</span>
        sendNotification(assignee, taskName);

        <span class="hljs-comment">// è®°å½•æ—¥å¿—</span>
        logTask(delegateTask);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendNotification</span><span class="hljs-params">(String assignee, String taskName)</span> {
        <span class="hljs-comment">// å®ç°å‘é€é‚®ä»¶ã€çŸ­ä¿¡ç­‰é€šçŸ¥é€»è¾‘</span>
        System.out.println(<span class="hljs-string">"å‘é€é€šçŸ¥ç»™: "</span> + assignee + <span class="hljs-string">", ä»»åŠ¡: "</span> + taskName);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logTask</span><span class="hljs-params">(DelegateTask delegateTask)</span> {
        <span class="hljs-comment">// è®°å½•ä»»åŠ¡åˆ›å»ºæ—¥å¿—</span>
        System.out.println(<span class="hljs-string">"ä»»åŠ¡ID: "</span> + delegateTask.getId());
        System.out.println(<span class="hljs-string">"æµç¨‹å®ä¾‹ID: "</span> + delegateTask.getProcessInstanceId());
    }
}
</code></pre>
<h4 data-id="heading-19">5.4 æ‰§è¡Œç›‘å¬å™¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.activiti.listener;

<span class="hljs-keyword">import</span> org.activiti.engine.delegate.DelegateExecution;
<span class="hljs-keyword">import</span> org.activiti.engine.delegate.ExecutionListener;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-comment">/**
 * æµç¨‹å¼€å§‹ç›‘å¬å™¨
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProcessStartListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ExecutionListener</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">notify</span><span class="hljs-params">(DelegateExecution execution)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">processInstanceId</span> <span class="hljs-operator">=</span> execution.getProcessInstanceId();
        <span class="hljs-type">String</span> <span class="hljs-variable">processDefinitionId</span> <span class="hljs-operator">=</span> execution.getProcessDefinitionId();

        System.out.println(<span class="hljs-string">"æµç¨‹å¯åŠ¨: "</span> + processInstanceId);
        System.out.println(<span class="hljs-string">"æµç¨‹å®šä¹‰: "</span> + processDefinitionId);

        <span class="hljs-comment">// åˆå§‹åŒ–æµç¨‹å˜é‡</span>
        execution.setVariable(<span class="hljs-string">"startTime"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.util.Date());
        execution.setVariable(<span class="hljs-string">"status"</span>, <span class="hljs-string">"RUNNING"</span>);

        <span class="hljs-comment">// è®°å½•æµç¨‹å¯åŠ¨æ—¥å¿—</span>
        logProcessStart(execution);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logProcessStart</span><span class="hljs-params">(DelegateExecution execution)</span> {
        <span class="hljs-comment">// è®°å½•æµç¨‹å¯åŠ¨æ—¥å¿—</span>
        System.out.println(<span class="hljs-string">"è®°å½•æµç¨‹å¯åŠ¨æ—¥å¿—"</span>);
    }
}
</code></pre>
<h4 data-id="heading-20">5.5 Java Delegateä»»åŠ¡</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.activiti.delegate;

<span class="hljs-keyword">import</span> org.activiti.engine.delegate.DelegateExecution;
<span class="hljs-keyword">import</span> org.activiti.engine.delegate.JavaDelegate;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-comment">/**
 * å‘é€é€šçŸ¥å§”æ‰˜ç±»
 */</span>
<span class="hljs-meta">@Component("sendNotificationDelegate")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SendNotificationDelegate</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">JavaDelegate</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">(DelegateExecution execution)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">processInstanceId</span> <span class="hljs-operator">=</span> execution.getProcessInstanceId();

        <span class="hljs-comment">// è·å–æµç¨‹å˜é‡</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">applicant</span> <span class="hljs-operator">=</span> (String) execution.getVariable(<span class="hljs-string">"applicant"</span>);
        <span class="hljs-type">Integer</span> <span class="hljs-variable">days</span> <span class="hljs-operator">=</span> (Integer) execution.getVariable(<span class="hljs-string">"days"</span>);
        <span class="hljs-type">Boolean</span> <span class="hljs-variable">approved</span> <span class="hljs-operator">=</span> (Boolean) execution.getVariable(<span class="hljs-string">"approved"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">comment</span> <span class="hljs-operator">=</span> (String) execution.getVariable(<span class="hljs-string">"comment"</span>);

        <span class="hljs-comment">// æ„å»ºé€šçŸ¥å†…å®¹</span>
        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
        message.append(<span class="hljs-string">"è¯·å‡å®¡æ‰¹é€šçŸ¥\n"</span>);
        message.append(<span class="hljs-string">"ç”³è¯·äºº: "</span>).append(applicant).append(<span class="hljs-string">"\n"</span>);
        message.append(<span class="hljs-string">"è¯·å‡å¤©æ•°: "</span>).append(days).append(<span class="hljs-string">"\n"</span>);
        message.append(<span class="hljs-string">"å®¡æ‰¹ç»“æœ: "</span>).append(approved ? <span class="hljs-string">"é€šè¿‡"</span> : <span class="hljs-string">"æ‹’ç»"</span>).append(<span class="hljs-string">"\n"</span>);
        <span class="hljs-keyword">if</span> (comment != <span class="hljs-literal">null</span>) {
            message.append(<span class="hljs-string">"å®¡æ‰¹æ„è§: "</span>).append(comment);
        }

        <span class="hljs-comment">// å‘é€é€šçŸ¥</span>
        sendEmail(applicant, message.toString());
        sendSMS(applicant, message.toString());

        System.out.println(<span class="hljs-string">"é€šçŸ¥å·²å‘é€: "</span> + message);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendEmail</span><span class="hljs-params">(String to, String content)</span> {
        <span class="hljs-comment">// å®ç°é‚®ä»¶å‘é€é€»è¾‘</span>
        System.out.println(<span class="hljs-string">"å‘é€é‚®ä»¶ç»™: "</span> + to);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendSMS</span><span class="hljs-params">(String to, String content)</span> {
        <span class="hljs-comment">// å®ç°çŸ­ä¿¡å‘é€é€»è¾‘</span>
        System.out.println(<span class="hljs-string">"å‘é€çŸ­ä¿¡ç»™: "</span> + to);
    }
}
</code></pre>
<h3 data-id="heading-21">å…­ã€æµç¨‹äº¤äº’æ—¶åºå›¾</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3267bc453f744ff1a7428dac28bfb364~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769561888&amp;x-signature=5rw6kJoYOI7cSDaUq99o76ljKc4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-22">ä¸ƒã€REST APIè®¾è®¡</h3>
<h4 data-id="heading-23">7.1 æ§åˆ¶å™¨å®ç°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.activiti.controller;

<span class="hljs-keyword">import</span> com.example.activiti.entity.LeaveRequest;
<span class="hljs-keyword">import</span> com.example.activiti.service.LeaveRequestService;
<span class="hljs-keyword">import</span> org.activiti.engine.task.Task;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;

<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-comment">/**
 * è¯·å‡å®¡æ‰¹æ§åˆ¶å™¨
 */</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api/leave")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LeaveRequestController</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> LeaveRequestService leaveRequestService;

    <span class="hljs-comment">/**
     * æäº¤è¯·å‡ç”³è¯·
     * POST /api/leave/submit
     */</span>
    <span class="hljs-meta">@PostMapping("/submit")</span>
    <span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">submitLeaveRequest</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> LeaveRequest leaveRequest)</span> {
        Map&lt;String, Object&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();

        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">String</span> <span class="hljs-variable">processInstanceId</span> <span class="hljs-operator">=</span> leaveRequestService.startLeaveProcess(leaveRequest);
            result.put(<span class="hljs-string">"success"</span>, <span class="hljs-literal">true</span>);
            result.put(<span class="hljs-string">"processInstanceId"</span>, processInstanceId);
            result.put(<span class="hljs-string">"message"</span>, <span class="hljs-string">"è¯·å‡ç”³è¯·æäº¤æˆåŠŸ"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            result.put(<span class="hljs-string">"success"</span>, <span class="hljs-literal">false</span>);
            result.put(<span class="hljs-string">"message"</span>, <span class="hljs-string">"æäº¤å¤±è´¥: "</span> + e.getMessage());
        }

        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢å¾…åŠä»»åŠ¡
     * GET /api/leave/tasks/pending?assignee=xxx
     */</span>
    <span class="hljs-meta">@GetMapping("/tasks/pending")</span>
    <span class="hljs-keyword">public</span> List&lt;Task&gt; <span class="hljs-title function_">getPendingTasks</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> String assignee)</span> {
        <span class="hljs-keyword">return</span> leaveRequestService.findPendingTasks(assignee);
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢å€™é€‰ä»»åŠ¡
     * GET /api/leave/tasks/candidate?group=xxx
     */</span>
    <span class="hljs-meta">@GetMapping("/tasks/candidate")</span>
    <span class="hljs-keyword">public</span> List&lt;Task&gt; <span class="hljs-title function_">getCandidateTasks</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> String group)</span> {
        <span class="hljs-keyword">return</span> leaveRequestService.findCandidateTasks(group);
    }

    <span class="hljs-comment">/**
     * å®¡æ‰¹ä»»åŠ¡
     * POST /api/leave/tasks/{taskId}/complete
     */</span>
    <span class="hljs-meta">@PostMapping("/tasks/{taskId}/complete")</span>
    <span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">completeTask</span><span class="hljs-params">(
            <span class="hljs-meta">@PathVariable</span> String taskId,
            <span class="hljs-meta">@RequestParam</span> <span class="hljs-type">boolean</span> approved,
            <span class="hljs-meta">@RequestParam</span> String comment)</span> {

        Map&lt;String, Object&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();

        <span class="hljs-keyword">try</span> {
            leaveRequestService.completeTask(taskId, approved, comment);
            result.put(<span class="hljs-string">"success"</span>, <span class="hljs-literal">true</span>);
            result.put(<span class="hljs-string">"message"</span>, <span class="hljs-string">"ä»»åŠ¡å®¡æ‰¹å®Œæˆ"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            result.put(<span class="hljs-string">"success"</span>, <span class="hljs-literal">false</span>);
            result.put(<span class="hljs-string">"message"</span>, <span class="hljs-string">"å®¡æ‰¹å¤±è´¥: "</span> + e.getMessage());
        }

        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢æµç¨‹å†å²
     * GET /api/leave/history/{processInstanceId}
     */</span>
    <span class="hljs-meta">@GetMapping("/history/{processInstanceId}")</span>
    <span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">getProcessHistory</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> String processInstanceId)</span> {
        <span class="hljs-keyword">return</span> leaveRequestService.getProcessHistory(processInstanceId);
    }

    <span class="hljs-comment">/**
     * æ’¤é”€æµç¨‹
     * DELETE /api/leave/process/{processInstanceId}
     */</span>
    <span class="hljs-meta">@DeleteMapping("/process/{processInstanceId}")</span>
    <span class="hljs-keyword">public</span> Map&lt;String, Object&gt; <span class="hljs-title function_">cancelProcess</span><span class="hljs-params">(
            <span class="hljs-meta">@PathVariable</span> String processInstanceId,
            <span class="hljs-meta">@RequestParam</span> String reason)</span> {

        Map&lt;String, Object&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();

        <span class="hljs-keyword">try</span> {
            leaveRequestService.cancelProcess(processInstanceId, reason);
            result.put(<span class="hljs-string">"success"</span>, <span class="hljs-literal">true</span>);
            result.put(<span class="hljs-string">"message"</span>, <span class="hljs-string">"æµç¨‹å·²æ’¤é”€"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            result.put(<span class="hljs-string">"success"</span>, <span class="hljs-literal">false</span>);
            result.put(<span class="hljs-string">"message"</span>, <span class="hljs-string">"æ’¤é”€å¤±è´¥: "</span> + e.getMessage());
        }

        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<h3 data-id="heading-24">å…«ã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-25">8.1 æµç¨‹æ— æ³•å¯åŠ¨</h4>
<p><strong>é—®é¢˜</strong>ï¼šè°ƒç”¨startProcessInstanceByKeyæ—¶æŠ›å‡ºå¼‚å¸¸</p>
<p><strong>åŸå› </strong>ï¼š</p>
<ul>
<li>æµç¨‹å®šä¹‰æœªéƒ¨ç½²</li>
<li>æµç¨‹å®šä¹‰keyä¸åŒ¹é…</li>
<li>æ•°æ®åº“è¡¨æœªæ­£ç¡®åˆ›å»º</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ£€æŸ¥æµç¨‹æ˜¯å¦å·²éƒ¨ç½²</span>
<span class="hljs-type">long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> repositoryService.createProcessDefinitionQuery()
        .processDefinitionKey(<span class="hljs-string">"leaveRequest"</span>)
        .count();

<span class="hljs-keyword">if</span> (count == <span class="hljs-number">0</span>) {
    <span class="hljs-comment">// éƒ¨ç½²æµç¨‹</span>
    deployProcess();
}
</code></pre>
<h4 data-id="heading-26">8.2 ä»»åŠ¡æŸ¥è¯¢ä¸åˆ°</h4>
<p><strong>é—®é¢˜</strong>ï¼šæŸ¥è¯¢å¾…åŠä»»åŠ¡è¿”å›ç©ºåˆ—è¡¨</p>
<p><strong>åŸå› </strong>ï¼š</p>
<ul>
<li>ä»»åŠ¡å·²åˆ†é…ç»™å…¶ä»–ç”¨æˆ·</li>
<li>ä»»åŠ¡å·²åœ¨å…¶ä»–ä¼šè¯ä¸­å®Œæˆ</li>
<li>æµç¨‹å·²ç»“æŸ</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨å¤šç§æ–¹å¼æŸ¥è¯¢</span>
List&lt;Task&gt; tasks = taskService.createTaskQuery()
        .taskAssignee(assignee)  <span class="hljs-comment">// æŒ‡å®šåŠç†äºº</span>
        .taskCandidateGroup(<span class="hljs-string">"managers"</span>)  <span class="hljs-comment">// å€™é€‰ç»„</span>
        .taskCandidateUser(assignee)  <span class="hljs-comment">// å€™é€‰äºº</span>
        .includeIdentityLinks()  <span class="hljs-comment">// åŒ…å«èº«ä»½å…³è”</span>
        .list();
</code></pre>
<h4 data-id="heading-27">8.3 æµç¨‹å˜é‡ä¸¢å¤±</h4>
<p><strong>é—®é¢˜</strong>ï¼šè®¾ç½®çš„æµç¨‹å˜é‡åœ¨åç»­èŠ‚ç‚¹æ— æ³•è·å–</p>
<p><strong>åŸå› </strong>ï¼š</p>
<ul>
<li>å˜é‡ä½œç”¨åŸŸè®¾ç½®é”™è¯¯</li>
<li>å˜é‡è¢«è¦†ç›–</li>
<li>æµç¨‹å˜é‡æœªæŒä¹…åŒ–</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨å…¨å±€å˜é‡</span>
runtimeService.setVariable(processInstanceId, <span class="hljs-string">"varName"</span>, value);

<span class="hljs-comment">// ä½¿ç”¨æœ¬åœ°å˜é‡ï¼ˆä»…å½“å‰ä»»åŠ¡å¯è§ï¼‰</span>
taskService.setVariableLocal(taskId, <span class="hljs-string">"varName"</span>, value);
</code></pre>
<h3 data-id="heading-28">ä¹ã€æ€»ç»“</h3>
<p>Activitiæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å·¥ä½œæµå¼•æ“ï¼Œæœ¬æ–‡ä¸»è¦ä»‹ç»äº†ä»¥ä¸‹å†…å®¹ï¼š</p>
<ol>
<li>æ­å»ºActivitiå¼€å‘ç¯å¢ƒ</li>
<li>ç†è§£æ ¸å¿ƒAPIçš„ä½¿ç”¨æ–¹æ³•</li>
<li>è®¾è®¡å’Œå®ç°å¤æ‚çš„ä¸šåŠ¡æµç¨‹</li>
<li>å¤„ç†æµç¨‹ä¸­çš„å„ç§ä¸šåŠ¡åœºæ™¯</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç©è½¬æ™ºèƒ½å®¶å±…å…¥é—¨]]></title>    <link>https://juejin.cn/post/7597278451029770250</link>    <guid>https://juejin.cn/post/7597278451029770250</guid>    <pubDate>2026-01-20T15:20:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597278451029770250" data-draft-id="7597317683051249673" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç©è½¬æ™ºèƒ½å®¶å±…å…¥é—¨"/> <meta itemprop="keywords" content="æ¶æ„,ç¨‹åºå‘˜,è¿ç»´"/> <meta itemprop="datePublished" content="2026-01-20T15:20:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰å ‚ç¬º"/> <meta itemprop="url" content="https://juejin.cn/user/1732486056383976"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç©è½¬æ™ºèƒ½å®¶å±…å…¥é—¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1732486056383976/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰å ‚ç¬º
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T15:20:19.000Z" title="Tue Jan 20 2026 15:20:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>ä½ ä¹°çš„æ˜¯â€œæ™ºèƒ½å®¶ç”µâ€è¿˜æ˜¯â€œæ™ºèƒ½å®¶å±…â€?</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de7f138b623149089a803130ab288de3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5aCC56y6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527218&amp;x-signature=EyXWtL8nb0X65CYh7p7u%2F1rZmDk%3D" alt="image-20260118200022352.png" loading="lazy"/></p>
<h2 data-id="heading-0"><strong>ä¸€ã€ å¼•è¨€ï¼šæˆ³ç ´æ³¡æ²«</strong></h2>
<p>ç°åœ¨çš„â€œæ™ºèƒ½å®¶å±…â€æ¦‚å¿µæ»¡å¤©é£ï¼Œä½†å¤šæ•°ä¹°å›å®¶çš„ï¼Œåªæ˜¯ä¸€ä¸ªâ€œå¸¦æ‰‹æœºé¥æ§å™¨çš„æ˜‚è´µç¯æ³¡â€ã€ä¸€ä¸ªç›¸å½“äºæ¥¼é“æ„Ÿåº”ç¯çš„ç©å…·ï¼ˆäººåŠ¨ä¼ æ„Ÿå™¨+æ™ºèƒ½ç¯/å¼€å…³ï¼‰......</p>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªæå®¢æš´è®ºï¼š <strong>ä½ ä¹°ä¸åˆ°â€œæ™ºèƒ½å®¶å±…â€ï¼Œåªèƒ½ä¹°åˆ°â€œè®¾å¤‡â€æˆ–è€…â€œæ¨¡ç‰ˆâ€ã€‚</strong></p>
<p>èµ°è¿›é‚£äº›é«˜å¤§ä¸Šçš„å…¨å±‹æ™ºèƒ½ä½“éªŒåº—ï¼Œçœ‹åˆ°çš„å¾€å¾€ä¹Ÿåªæ˜¯ä¸€åœºç²¾å¿ƒç¼–æ’çš„â€œæ ·æ¿é—´ç§€â€ã€‚é”€å”®æ¿€æƒ…æ¼”ç¤ºçš„é‚£äº›ç‚«é…·åœºæ™¯å¤§éƒ½æ˜¯åè€Œä¸å®çš„â€œè¡¨æ¼”å‹æ™ºèƒ½â€ã€‚</p>
<p>ä»–ä»¬å–ç»™ä½ çš„æ˜¯æ ‡å‡†åŒ–çš„â€œå¥—é¤â€ï¼Œå¼ºè¡Œè®©ä½ çš„ç”Ÿæ´»å»é€‚åº”ä»–ä»¬çš„ç³»ç»Ÿï¼Œè€Œä¸æ˜¯è®¾è®¡ä¸€å¥—çœŸæ­£é€‚é…ä½ ä¸ªäººä¹ æƒ¯çš„å®šåˆ¶åŒ–æ–¹æ¡ˆã€‚<strong>æ™ºèƒ½å®¶å±…ä¸æ˜¯äº§å“ï¼Œè€Œæ˜¯ä¸€é¡¹å…³äºç”Ÿæ´»æ–¹å¼çš„ç³»ç»Ÿå·¥ç¨‹ã€‚</strong></p>
<p>å¦‚æœä½ åªæ˜¯æƒ³ç”¨æ‰‹æœºå…³ç¯ï¼Œä¹°ä¸ªè“ç‰™ç¯ã€è“ç‰™å¼€å…³å³å¯ï¼›å¦‚æœä½ æƒ³è®©æˆ¿å­ä¸ºä½ æœåŠ¡, äº«å—æ™ºèƒ½åŒ–å¸¦æ¥çš„ä¾¿åˆ©ï¼Œå¯ä»¥ç»§ç»­å¾€ä¸‹çœ‹çœ‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/898e6ec36bdf491d8b7b0e7cc0090c97~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5aCC56y6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527218&amp;x-signature=Fvf2ZalQOOOVJvHcVULH3FaUBuw%3D" alt="image-20260118200638736.png" loading="lazy"/></p>
<h2 data-id="heading-1"><strong>äºŒã€ å®šä¹‰ï¼šä»€ä¹ˆæ˜¯æ™ºèƒ½å®¶å±…ï¼Ÿ</strong></h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50dd841647c8455d9b250b0e3d95418c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5aCC56y6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527218&amp;x-signature=JXRYQXy9t1QWpB8BrSizkOp0eZI%3D" alt="image-20260118200954300.png" loading="lazy"/>
æˆ‘ä»¬æŠŠå®šä¹‰åˆ†ä¸ºä¸¤å±‚ï¼š</p>
<h3 data-id="heading-2">1. é€šä¿—ç‰ˆï¼šå°‘åŠ¨å˜´ï¼Œä¸åŠ¨æ‰‹</h3>
<p>çœŸæ­£çš„æ™ºèƒ½å®¶å±…ï¼Œåº”è¯¥åƒã€Šé’¢é“ä¾ ã€‹é‡Œçš„è´¾ç»´æ–¯ï¼ˆJarvisï¼‰ã€‚å®ƒä¸éœ€è¦ä½ æå‡ºæ‰‹æœºï¼Œç”šè‡³ä¸éœ€è¦ä½ å¤§å–Šå¤§å«ã€‚å®ƒæ‡‚ä½ çš„ä¹ æƒ¯ï¼Œé¢„åˆ¤ä½ çš„éœ€æ±‚ã€‚</p>
<ul>
<li><strong>ä¼ªæ™ºèƒ½</strong>ï¼šæ‰‹æœº App è¿œç¨‹é¥æ§ï¼ˆæŠŠå¼€å…³åšåˆ°äº†æ‰‹æœºé‡Œï¼Œæœ‰ç‚¹ç”¨ï¼Œä½†ä¸å¤šï¼‰ã€‚</li>
<li><strong>çœŸæ™ºèƒ½</strong>ï¼šè‡ªåŠ¨åŒ–ï¼Œæ— æ„Ÿè§¦å‘ã€‚</li>
</ul>
<p>è¿™é‡Œä¸¾ä¸€äº›å½¢è±¡çš„ä¾‹å­ï¼ˆå›¾ï¼‰</p>
<h3 data-id="heading-3">2. ä¸“ä¸šç‰ˆï¼šæ„ŸçŸ¥ -&gt; å†³ç­– -&gt; æ‰§è¡Œ</h3>
<p>åŸºäº AIoT æŠ€æœ¯ï¼Œé€šè¿‡ä¸‰ä¸ªé—­ç¯å®ç°ç‰©ç†ç©ºé—´çš„æ•°å­—åŒ–ï¼š</p>
<ul>
<li><strong>æ„ŸçŸ¥</strong>ï¼šçœ¼ç›å’Œè€³æœµï¼ˆäººä½“ä¼ æ„Ÿå™¨ã€æ¸©æ¹¿åº¦è®¡ã€é—¨çª—ç£ã€å¤©æ°”ç­‰ï¼‰ã€‚</li>
<li><strong>å†³ç­–</strong>ï¼šå¤§è„‘ï¼ˆç½‘å…³ã€æœ¬åœ°æœåŠ¡å™¨ã€è‡ªåŠ¨åŒ–è§„åˆ™ï¼Œç”šè‡³å¤§æ¨¡å‹ï¼‰ã€‚</li>
<li><strong>æ‰§è¡Œ</strong>ï¼šæ‰‹å’Œè„šï¼ˆæ™ºèƒ½å¼€å…³ã€ç”µæœºã€çº¢å¤–å‘å°„å™¨ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-4"><strong>ä¸‰ã€ äººç¾¤ç”»åƒ</strong></h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f25da0aca45940318ebc41b9e512a3d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5aCC56y6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527218&amp;x-signature=zKS3owyUbV4PPBiUEYLwY9wu6Hs%3D" alt="image-20260118201810757.png" loading="lazy"/></p>
<p>åœ¨å…¥å‘ä¹‹å‰ï¼Œçœ‹çœ‹è‡ªå·±å¤„äºå“ªä¸ªé˜¶æ®µã€‚è¿™å†³å®šäº†ä½ è¯¥èŠ±å¤šå°‘é’±ã€å¤šå°‘ç²¾åŠ›ã€‚</p>
<ul>
<li><strong>Lv 0 å°ç™½ç”¨æˆ·</strong>ï¼šæ™ºèƒ½éŸ³ç®±æˆ–é€šè¿‡æ™ºèƒ½æ‰‹æœºè¯­éŸ³åŠ©æ‰‹ï¼Œå¶å°”å–Šä¸€å£°â€œå…³ç¯â€ï¼Œç»å¸¸æ–­è¿æˆ–å¬é”™ï¼Œå¿ƒé‡Œåæ§½ä¸€å¥â€œäººå·¥æ™ºéšœâ€ï¼Œè§‰å¾—æ™ºèƒ½å®¶å±…ä¸è¿‡å°”å°”ã€‚</li>
<li><strong>Lv 1 æ™®é€šç”¨æˆ·</strong>ï¼šå…¨å±‹ç±³å®¶æˆ– HomeKitï¼Œä¼šè®¾ç½®ç®€å•çš„â€œç¦»å®¶/å›å®¶â€æ¨¡å¼ï¼Œä¸»è¦ä¾èµ–è¯­éŸ³æ§åˆ¶ï¼Œäº«å—ç€æ™ºèƒ½è®¾å¤‡å¸¦æ¥çš„ä¾¿æ·ã€‚</li>
<li><strong>Lv 2 æ·±åº¦ç”¨æˆ·</strong>ï¼šå¼€å§‹å…³æ³¨<strong>ä¼ æ„Ÿå™¨</strong>ï¼Œè®¾ç½®è‡ªåŠ¨åŒ–é€»è¾‘ï¼ˆå¦‚ï¼šäººæ¥ç¯äº®ï¼Œäººèµ°ç¯ç­ï¼‰ï¼Œéå¸¸å…³æ³¨ç¨³å®šæ€§ã€‚</li>
<li><strong>Lv 3 é«˜çº§ç©å®¶</strong>ï¼šæ‹¥æœ‰nas ã€æ ‘è“æ´¾ æˆ– å¸¸å¼€çš„å°å¼æœºï¼ˆç”µè´¹æ„Ÿäººï¼‰ï¼Œå¼•å…¥ Home Assistant (HA) ã€ Node-REDï¼Œå¼€å§‹è·¨å“ç‰Œæ¥å…¥ï¼Œè‡ªéƒ¨ç½²æœåŠ¡ã€‚</li>
<li><strong>Lv 4 æå®¢ç©å®¶</strong>ï¼šè‡ªå·±ç”» PCBï¼Œå†™å›ºä»¶ï¼Œé€†å‘é€šä¿¡åè®®ï¼Œä»ç¼ºå•¥ä¹°å•¥åˆ°<strong>ç¼ºå•¥åšå•¥</strong>ã€‚</li>
<li><strong>Lv 5 â€œå…¥é­”â€ç©å®¶ï¼ˆè‡´æ•¬ï¼‰</strong>ï¼šå•çº¯çš„nasè·‘æœåŠ¡å·²ç»æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œå®¶é‡ŒæœºæŸœæ¯”å…¬å¸æœºæˆ¿è¿˜ä¸“ä¸šï¼Œè¿½æ±‚ 99.999% çš„æåº¦ç¨³å®šæ€§ï¼Œç”¨å¤§é‡æ—¶é—´è‡ªå®šä¹‰æ™ºèƒ½è®¾å¤‡ï¼Œè‹¥éä¸šå†…äººå£«ï¼Œé‚£å°±æ˜¯çœŸçš„çˆ±å¥½äº†ï¼ŒèŠ±è´¹çš„æ—¶é—´å’Œé‡‘é’±æˆæœ¬å·²ç»è¿œé«˜äºæ”¶è·çš„ä¾¿åˆ©ï¼Œä¸»æ‰“ä¸€ä¸ªå¼€å¿ƒå’Œæˆå°±æ„Ÿã€‚</li>
</ul>
<p><strong>å»ºè®®</strong>ï¼šæœ¬æ–‡é€‚ç”¨äº Lv 0-2 çš„ç”¨æˆ·ã€‚ ä¸è¦è¯•å›¾ä¸€å£åƒåˆ°é¥±ï¼Œå¦åˆ™ä¼šç»å¸¸è¢«å®¶é‡Œäººéª‚ã€‚</p>
<p>å¥½ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬å¼€å§‹ï¼š</p>
<h2 data-id="heading-5"><strong>å››ã€ åŸºç¡€è®¾æ–½ï¼šæˆ¿å­çš„ç¥ç»ç³»ç»Ÿ</strong></h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77fb6ae0f928449eaad25678bb454cd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5aCC56y6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527218&amp;x-signature=QYkgoa%2Fwknp79Pb2857N4aB0ZfA%3D" alt="image-20260118194127474.png" loading="lazy"/></p>
<h3 data-id="heading-6">1. ç½‘ç»œæ˜¯åœ°åŸº</h3>
<p>å¦‚æœå†³å®šææ™ºèƒ½å®¶å±…ï¼Œé‚£å°±ä¸è¦ç›¸ä¿¡è¿è¥å•†é€çš„å…‰çŒ«è·¯ç”±ä¸€ä½“æœºï¼é‚£æ˜¯ä¸ºäº†è®©ä½ èƒ½ä¸Šç½‘ï¼Œä¸æ˜¯ä¸ºäº†è®©ä½ è¿100+è®¾å¤‡çš„ã€‚</p>
<ul>
<li><strong>å…¨å±‹ Wi-Fi (Mesh)</strong> æ˜¯å¿…é¡»çš„ã€‚</li>
<li><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼šèƒ½ç”¨ç½‘çº¿åˆ«ç”¨æ— çº¿ã€‚è£…ä¿®æ—¶ï¼Œæ¯ä¸ªæˆ¿é—´è‡³å°‘ç•™ä¸€æ ¹ç½‘çº¿ã€‚</li>
</ul>
<h3 data-id="heading-7">2. é€šä¿¡åè®®å¤§ä¹±æ–—</h3>
<p>ä½ çš„è®¾å¤‡é ä»€ä¹ˆè¯´è¯ï¼Ÿ</p>



































<table><thead><tr><th>åè®®</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th><th>æå®¢è¯„ä»·</th></tr></thead><tbody><tr><td><strong>Wi-Fi</strong></td><td>è€—ç”µå¤§ï¼Œä¸ä»…å å¸¦å®½è¿˜å ä¿¡é“</td><td>æ’åº§ã€å¤§ç”µå™¨ã€æ‘„åƒå¤´</td><td>è®¾å¤‡å¤šäº†è·¯ç”±å™¨å¿…å´©ï¼Œå°½é‡å°‘ç”¨ã€‚</td></tr><tr><td><strong>è“ç‰™Mesh</strong></td><td>ä¾¿å®œï¼Œå»¶è¿Ÿå°šå¯ï¼Œéœ€ç½‘å…³</td><td>å°ç±³/ç±³å®¶ç³»ä¸»æµ</td><td>ç°åœ¨çš„å…¥é—¨é¦–é€‰ï¼Œæ€§ä»·æ¯”é«˜ã€‚</td></tr><tr><td><strong>Zigbee</strong></td><td>æå…¶ç¨³å®šï¼Œä½åŠŸè€—ï¼Œ<strong>æœ¬åœ°åŒ–æ‰§è¡Œèƒ½åŠ›å¼º</strong></td><td>ä¼ æ„Ÿå™¨ã€å¼€å…³</td><td>æå®¢é¦–é€‰ï¼ˆç»¿ç±³ Aqaraç­‰ï¼‰ã€‚æ–­ç½‘äº†ä¹Ÿèƒ½è·‘è‡ªåŠ¨åŒ–ã€‚</td></tr><tr><td><strong>Matter</strong></td><td>æœªæ¥çš„å¤§ä¸€ç»Ÿï¼Ÿ</td><td>è·¨å¹³å°äº’è”</td><td>è¿˜åœ¨ç”»é¥¼é˜¶æ®µï¼Œè®¾å¤‡è´µä¸”å°‘ï¼Œ<strong>ä¸è¦ç›²ç›®ç­‰</strong>ã€‚</td></tr></tbody></table>
<p><strong>åŸåˆ™</strong>ï¼šæ ¸å¿ƒè‡ªåŠ¨åŒ–ï¼ˆç¯å…‰ã€å®‰é˜²ï¼‰å°½é‡èµ° Zigbee æˆ–è“ç‰™Meshï¼Œ<strong>èƒ½æœ¬åœ°æ‰§è¡Œç»ä¸èµ°äº‘ç«¯</strong>ï¼ˆä¸‡ä¸€æ–­ç½‘è¿ç¯éƒ½å¼€ä¸äº†ï¼‰ã€‚</p>
<h2 data-id="heading-8"><strong>äº”ã€ è½¯ä»¶ç”Ÿæ€ï¼šçµé­‚çš„é€‰æ‹©</strong></h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40aef7baeef94807bc6780f66580e0ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5aCC56y6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527218&amp;x-signature=TuYd3xMfPsdSMW9O9UppcuTUjVY%3D" alt="image-20260118202008196.png" loading="lazy"/></p>
<h3 data-id="heading-9">1. é—­æºç”Ÿæ€ï¼ˆè‹¹æœ HomeKit / å°ç±³ç±³å®¶ / åä¸ºå…¨å±‹ï¼‰</h3>
<ul>
<li><strong>ä¼˜åŠ¿</strong>ï¼šå¼€ç®±å³ç”¨ï¼Œå­¦ä¹ æˆæœ¬ä½ï¼Œé€‚åˆ 90% çš„äººã€‚</li>
<li><strong>åŠ£åŠ¿</strong>ï¼šéšç§åœ¨äº‘ç«¯ï¼Œå“ç‰Œç»‘å®šä¸¥é‡ï¼Œæ‰©å±•æ€§å—é™ã€‚</li>
<li><strong>å»ºè®®</strong>ï¼š
<ul>
<li><strong>æœç²‰</strong>ï¼šå†² HomeKitï¼ˆAqara ç­‰ï¼‰ï¼Œä½“éªŒä¸æ»‘ä½†<strong>é’±åŒ…å—ç½ª</strong>ã€‚</li>
<li><strong>æ€§ä»·æ¯”</strong>ï¼šç±³å®¶å…¨å®¶æ¡¶ï¼Œç”Ÿæ€æœ€å…¨ï¼Œä»·æ ¼æœ€é¦™ã€‚</li>
<li><strong>ä»€ä¹ˆæ—¶å€™ç”¨åä¸ºå‘¢ï¼šæœ‰é’±ï¼Œåªæƒ³äº«å—æ™ºèƒ½å®¶å±…å¸¦æ¥çš„ä¾¿åˆ©ï¼Œå¯¹è¿‡ç¨‹çš„å¿«ä¹æ— æ„Ÿï¼Œé€‚åº”èƒ½åŠ›è¾ƒå¼ºï¼Œä¸ªæ€§åŒ–éœ€æ±‚å¾ˆå°‘ã€‚</strong></li>
</ul>
</li>
</ul>
<h3 data-id="heading-10">2. å¼€æºç”Ÿæ€ï¼ˆHome Assistantï¼‰</h3>
<ul>
<li><strong>ä¼˜åŠ¿</strong>ï¼šæ— é™å¯èƒ½ï¼Œæ‰“é€šä¸€åˆ‡å“ç‰Œï¼ˆæ¯”å¦‚æŠŠå°ç±³æ¥å…¥è‹¹æœã€æŠŠç¾çš„æ¥å…¥å°ç±³ï¼‰ï¼Œæ•°æ®å®Œå…¨æœ¬åœ°åŒ–ã€‚</li>
<li><strong>åŠ£åŠ¿</strong>ï¼šå­¦ä¹ æ›²çº¿æå…¶é™¡å³­ï¼Œéœ€è¦æ‡‚ç‚¹è½¯ä»¶ï¼Œéœ€è¦æŠ˜è…¾ä»£ç å’ŒæœåŠ¡å™¨ã€‚</li>
<li><strong>å»ºè®®</strong>ï¼šæ™®é€šç”¨æˆ·é¦–é€‰â€œç±³å®¶â€æˆ–â€œHomeKitâ€ï¼Œ<strong>ç¨³å®šå‹å€’ä¸€åˆ‡</strong>ã€‚å½“ç°æœ‰çš„ç”Ÿæ€æ— æ³•æ»¡è¶³ä½ å¤šå˜çš„éœ€æ±‚æ—¶ï¼Œå†è€ƒè™‘ Home Assistantã€‚</li>
</ul>
<h2 data-id="heading-11"><strong>å…­ã€ è®¾å¤‡é€‰æï¼šæŠŠé’±èŠ±åœ¨åˆ€åˆƒä¸Š</strong></h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af542989273d4260a47ca1284114e941~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5aCC56y6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527218&amp;x-signature=1cKDbf37tzL0wn4bf3em3odY%2FuM%3D" alt="image-20260118202211549.png" loading="lazy"/></p>
<h3 data-id="heading-12">1. ä¼ æ„Ÿå™¨ï¼ˆæ„ŸçŸ¥å±‚ï¼‰ï¼šä¸è¦çœé’±ï¼</h3>
<p>é™¤äº†ç½‘å…³ï¼Œä¼ æ„Ÿå™¨æ˜¯æœ€é‡è¦çš„ã€‚</p>
<ul>
<li><strong>äººä½“ä¼ æ„Ÿå™¨</strong>ï¼š
<ul>
<li><em>äººåŠ¨ä¼ æ„Ÿå™¨</em>ï¼šåªèƒ½æµ‹â€œæœ‰äººåœ¨åŠ¨â€ã€‚ä½ ä¸Šå•æ‰€ç©æ‰‹æœºä¸åŠ¨ï¼Œç¯å°±ä¼šç­ï¼Œéå¸¸å°´å°¬ã€‚</li>
<li><em>äººåœ¨ä¼ æ„Ÿå™¨</em>ï¼šèƒ½æµ‹â€œæœ‰äººå­˜åœ¨â€äºæŒ‡å®šåŒºåŸŸã€‚<strong>æ¨èå§å®¤ã€ä¹¦æˆ¿ã€å«ç”Ÿé—´ä½¿ç”¨ã€‚</strong></li>
</ul>
</li>
<li><strong>é—¨çª—/å…‰ç…§/æ¸©æ¹¿åº¦</strong>ï¼šè¿™æ˜¯è‡ªåŠ¨åŒ–çš„åŸºç¡€æ•°æ®æºï¼Œå¤šä¹°å‡ ä¸ªè´´ç€ã€‚</li>
<li><strong>å¤©æ°”</strong>ï¼šè¿™ä¸ªä¸€èˆ¬é…ç½®ç»çº¬åº¦ï¼ˆå®šä½ï¼‰å³å¯ï¼Œä»å¤©æ°”é¢„æŠ¥è·å–ï¼Œæœ¬è´¨ä¸Šä¸éœ€è¦ä¼ æ„Ÿå™¨</li>
</ul>
<h3 data-id="heading-13">2. æ‰§è¡Œå™¨ï¼ˆæ‰§è¡Œå±‚ï¼‰</h3>
<ul>
<li><strong>ç¯å…‰</strong>ï¼šæ™ºèƒ½å¼€å…³ vs æ™ºèƒ½ç¯æ³¡ï¼Ÿ
<ul>
<li><strong>å°ç™½é€‰å¼€å…³</strong>ï¼šä¿ç•™ç‰©ç†æ§åˆ¶ä¹ æƒ¯ï¼Œå®¶é‡Œè€äººä¹Ÿèƒ½ç”¨ï¼Œç¯åäº†æ¢ç¯æ³¡ä¾¿å®œï¼Œä¸»æ‰“ä¸€ä¸ªçš®å®ç¨³å®šã€‚</li>
<li><strong>æå®¢é€‰ç¯æ³¡</strong>ï¼šä¸ºäº†è‰²æ¸©å’Œäº®åº¦è°ƒèŠ‚ï¼Œä¸ºäº†é‚£è¯¥æ­»çš„æ°›å›´æ„Ÿã€‚ä½†å¿…é¡»æ­é…â€œå‡ŒåŠ¨å¼€å…³â€æˆ–â€œæ— çº¿å¼€å…³â€ï¼Œå¦åˆ™ç‰©ç†æ–­ç”µåå°±ç¦»çº¿äº†ã€‚</li>
</ul>
</li>
<li><strong>çª—å¸˜ç”µæœº</strong>ï¼šè¿™æ˜¯æå‡å¹¸ç¦æ„Ÿæ€§ä»·æ¯”æœ€é«˜çš„äº§å“ï¼Œæ²¡æœ‰ä¹‹ä¸€ã€‚æ—©æ™¨è¢«é˜³å…‰å«é†’çš„æ„Ÿè§‰ï¼Œæ¯”é—¹é’Ÿå¼ºä¸€ä¸‡å€ã€‚ï¼ˆè¯·æ³¨æ„æ­é…ç¡è¡£ï¼‰</li>
<li><strong>ç©ºè°ƒ</strong>ï¼š
<ul>
<li><strong>ä¸­å¤®ç©ºè°ƒ</strong>ï¼š<strong>æ‹’ç»åŸå‚æ˜‚è´µçš„æ™ºæ§æ¨¡ç»„ï¼</strong> æ¨èä½¿ç”¨ <strong>VRFç©ºè°ƒç½‘å…³</strong>ï¼ˆè‡ªè´­çº¦å‡ ç™¾å…ƒï¼Œé—®æ¸…æ¥šå–å®¶å…¼å®¹çš„å‹å·ï¼‰ï¼Œæ¥åœ¨å†…æœºçº¿ä¸Šï¼Œç›´æ¥å®Œç¾æ¥å…¥ç±³å®¶/HomeKitã€‚ä¼˜åŠ¿æ˜¯<strong>åŒå‘åé¦ˆ</strong>â€”â€”ä½ èƒ½çœ‹åˆ°å®ƒç°åœ¨åˆ°åº•å¼€äº†æ²¡ã€å¤šå°‘åº¦ï¼Œæ¯”çº¢å¤–å‘å°„å™¨é‚£ç§â€œç›²å‘æŒ‡ä»¤â€ç¨³ä¸€ä¸‡å€ã€‚</li>
<li><strong>æŒ‚æœº/æŸœæœº</strong>ï¼šå‡ åå—é’±çš„ <strong>ç©ºè°ƒä¼´ä¾£ï¼ˆæ’åº§ç‰ˆï¼‰</strong> æ˜¯ç¥å™¨ã€‚ä¸ä»…èƒ½çº¢å¤–æ§åˆ¶ï¼Œè¿˜èƒ½<strong>æ£€æµ‹å®æ—¶åŠŸç‡</strong>ã€‚æå®¢ç”¨æ³•ï¼šé€šè¿‡åŠŸç‡åˆ¤æ–­ç©ºè°ƒæ˜¯å¦çœŸçš„å¯åŠ¨äº†ï¼Œä»è€Œæ‰§è¡Œä¸‹ä¸€æ­¥é€»è¾‘ï¼Œé¿å…çº¢å¤–æŒ‡ä»¤ä¸¢å¤±é€ æˆçš„é€»è¾‘æ­»å¾ªç¯ã€‚</li>
</ul>
</li>
<li><strong>åœ°æš–</strong>ï¼š
<ul>
<li>æ ¸å¿ƒåœ¨äº <strong>æ¸©æ§é¢æ¿</strong>ã€‚ä¸è¦å»åŠ¨åˆ†é›†æ°´å™¨é‚£ç§å¤æ‚çš„é˜€é—¨ï¼Œç›´æ¥æŠŠå¢™ä¸Šçš„ä¼ ç»Ÿæ¸©æ§å™¨æ›¿æ¢ä¸ºæ”¯æŒ Zigbee/Wi-Fi çš„æ™ºèƒ½æ¸©æ§é¢æ¿ï¼ˆæ³¨æ„åŒºåˆ†æ°´æš–/ç”µæš–æ¥çº¿ï¼‰ã€‚</li>
<li><strong>ä»·å€¼</strong>ï¼šä¸åœ¨äºè¿œç¨‹å¼€å…³ï¼Œè€Œåœ¨äº<strong>åˆ†æ—¶æ®µæ’æ¸©</strong>ã€‚æ¯”å¦‚ç™½å¤©å®¶ä¸­æ— äººè‡ªåŠ¨é™è‡³18åº¦èŠ‚èƒ½ï¼Œä¸‹ç­å‰ä¸€å°æ—¶è‡ªåŠ¨å‡è‡³22åº¦ã€‚</li>
</ul>
</li>
<li><strong>æ–°é£</strong>ï¼š
<ul>
<li><strong>ç—›ç‚¹</strong>ï¼šå¤§å¤šæ•°æ–°é£æœºè‡ªå¸¦çš„â€œæ™ºèƒ½â€éƒ½å¾ˆé¸¡è‚‹ï¼Œå› ä¸ºå®ƒæµ‹çš„æ˜¯æœºå™¨å†…éƒ¨æˆ–å›é£å£çš„ç©ºæ°”ï¼Œä¸ä»£è¡¨ä½ åºŠå¤´çš„ç©ºæ°”è´¨é‡ã€‚</li>
<li><strong>æå®¢æ–¹æ¡ˆ</strong>ï¼š<strong>æ–°é£æœºå¸¸å¼€ï¼ˆæˆ–è€…æ¥æ™ºèƒ½æ’åº§ï¼‰ + ç‹¬ç«‹ç©ºæ°”æ£€æµ‹ä»ª</strong>ã€‚</li>
<li><strong>è”åŠ¨é€»è¾‘</strong>ï¼šå½“å§å®¤äºŒæ°§åŒ–ç¢³æµ“åº¦é«˜æ—¶ï¼Œè‡ªåŠ¨å¼€å¯æ–°é£/è°ƒå¤§é£é‡ï¼›å½“äºŒæ°§åŒ–ç¢³æµ“åº¦ä½æ—¶ï¼Œä½é€Ÿè¿è¡Œæˆ–å…³é—­ã€‚è¿™æ‰æ˜¯çœŸæ­£çš„â€œä¸ºäº†å¥åº·å‘¼å¸â€ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-14">3. é¿å‘æŒ‡å—</h3>
<ul>
<li>âŒ <strong>å¸¦å¤§å±çš„å†°ç®±</strong>ï¼šçº¯å±ä¼ªéœ€æ±‚ï¼Œåœ¨å†°ç®±ä¸Šåˆ·æŠ–éŸ³ï¼Ÿ</li>
<li>âŒ <strong>å¿…é¡»è”ç½‘æ‰èƒ½ç”¨çš„è®¾å¤‡</strong>ï¼šå®¶ç”µå°½é‡ä¹°â€œæ„šè ¢â€ä½†æ€§èƒ½å¥½çš„ï¼Œé€šè¿‡<strong>æ™ºèƒ½æ’åº§</strong>æˆ–<strong>çº¢å¤–é¥æ§å™¨</strong>è®©å®ƒä»¬å˜èªæ˜å³å¯ã€‚ï¼ˆæˆ‘ä¹°è¿‡WIFIåè®®çš„æ™ºèƒ½ç¯ï¼Œè¿˜ä¸æ”¯æŒå‡ŒåŠ¨ï¼Œä½“éªŒä¸‹æ¥ä¸€è¨€éš¾å°½ï¼‰</li>
</ul>
<h2 data-id="heading-15"><strong>ä¸ƒã€ åœºæ™¯åº”ç”¨ï¼šä»â€œæ§åˆ¶â€åˆ°â€œæœåŠ¡â€</strong></h2>
<p>ä¸è¦å†é—®â€œå˜¿ Siriï¼Œæ‰“å¼€å®¢å…ç¯â€äº†ï¼Œè¿™å¾ˆéº»çƒ¦ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f272ee3c59754608a09364759e2d71c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5aCC56y6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527218&amp;x-signature=YWYgZAoRm6s8pgLKqFLYze09%2BvA%3D" alt="image-20260118202452683.png" loading="lazy"/></p>
<h3 data-id="heading-16">1. ç¯å…‰ç³»ç»Ÿï¼šå…‰ç¯å¢ƒ</h3>
<p>åŠå¤œä¸Šå•æ‰€ï¼Œç³»ç»Ÿæ£€æµ‹åˆ°æœ‰äººä¸‹åºŠï¼ˆäººä½“ä¼ æ„Ÿå™¨ï¼‰ï¼Œæ—¶é—´æ˜¯å‡Œæ™¨3ç‚¹ï¼ˆæ¡ä»¶ï¼‰ï¼Œè‡ªåŠ¨å¼€å¯èµ°å»Šåœ°ç¯ï¼Œäº®åº¦ 10%ï¼ˆæ‰§è¡Œï¼‰ã€‚è¿™å«æœåŠ¡ã€‚å¦‚æœæ˜¯å¸é¡¶ç¯å…¨å¼€æŠŠä½ äº®çï¼Œé‚£å«äº‹æ•…ã€‚</p>
<h3 data-id="heading-17">2. å®‰é˜²ç³»ç»Ÿ</h3>
<p>ç¦»å®¶æ¨¡å¼å¯åŠ¨åï¼Œå¦‚æœé—¨çª—è¢«æ‰“å¼€ï¼Œç«‹åˆ»è­¦æŠ¥å¹¶æ¨é€æ‰‹æœºï¼ŒåŒæ—¶è”åŠ¨æ‘„åƒå¤´å½•åƒã€‚æ¼æ°´ä¼ æ„Ÿå™¨æ£€æµ‹åˆ°æ°´æµ¸ï¼Œæœºæ¢°è‡‚è‡ªåŠ¨å…³é—­æ°´é˜€ç„¶åè­¦æŠ¥æ¨é€æ‰‹æœºã€‚</p>
<h3 data-id="heading-18">3. ç¯å¢ƒç³»ç»Ÿ</h3>
<p>æ’æ¸©æ’æ¹¿ï¼Œç”šè‡³æ ¹æ® CO2 æµ“åº¦è‡ªåŠ¨å¼€å¯æ–°é£ã€‚ä½ ä¸éœ€è¦çŸ¥é“ä»Šå¤©å¤šå°‘åº¦ï¼Œä½ åªéœ€è¦è§‰å¾—â€œèˆ’æœâ€ã€‚</p>
<h3 data-id="heading-19">4. å½±éŸ³å¨±ä¹</h3>
<p>ä¸€å¥â€œæˆ‘è¦çœ‹ç”µå½±â€ï¼Œçª—å¸˜é—­åˆã€ç¯å…‰æ¸æš—ã€æŠ•å½±/ç”µè§†æ‰“å¼€ã€éŸ³å“å°±ä½ã€‚</p>
<h2 data-id="heading-20"><strong>å…«ã€ å¦‚ä½•çœé’±ï¼šæå®¢çš„æŠ é—¨æ™ºæ…§</strong></h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/117db6f724bb4f3b958ee12b3edfb40a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5aCC56y6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527218&amp;x-signature=Vjoi%2F1BmpFSWDATX0pPkdijYsrg%3D" alt="image-20260118203246817.png" loading="lazy"/></p>
<ol>
<li><strong>ä¸è¦ä¸€æ¬¡æ€§ä¹°å…¨</strong>ï¼šå…ˆä»ä¸€ä¸ªæˆ¿é—´ï¼ˆå¦‚å®¢å…ï¼‰å¼€å§‹è¯•ç‚¹ã€‚æ™ºèƒ½å®¶å±…æ˜¯å…»æˆç³»æ¸¸æˆï¼Œä¸æ˜¯è£…ä¿®å·¥ç¨‹ã€‚</li>
<li><strong>æ··æ­å¤§æ³•</strong>ï¼šæ ¸å¿ƒè®¾å¤‡ï¼ˆç½‘å…³ã€ä¼ æ„Ÿå™¨ã€ä¸»å¼€å…³ï¼‰ä¹°å¤§ç‰Œï¼ˆå¦‚ç»¿ç±³ã€é¢†æ™®ã€Yeelightï¼‰ï¼Œå¤–å›´è®¾å¤‡ï¼ˆç¯å¸¦ã€æ’åº§ï¼‰å¯ä»¥åœ¨ 1688 æˆ–å¹³æ›¿å“ç‰Œä¸­æ‰¾ã€‚</li>
<li><strong>æ—§ç‰©åˆ©ç”¨</strong>ï¼šé€€å½¹çš„ iPad ä¸Šå¢™åšä¸­æ§å±ï¼ˆHomeKit ä»ªè¡¨ç›˜ï¼‰ï¼Œæ—§æ‰‹æœºè£…ä¸ª App åšç›‘æ§æ‘„åƒå¤´ã€åºŸå¼ƒçš„MacBookAiråˆä¸Šç›–å­åšæœåŠ¡å™¨ã€‚</li>
<li><strong>é¢„ç•™ã€é¢„ç•™ã€é¢„ç•™</strong>ï¼šæ‰©å±•æ€§æ˜¯ç‹é“ï¼Œæ¯”å¦‚æ’åº§ä½ã€ç½‘çº¿ä½ã€ä¸Šä¸‹æ°´ç­‰ï¼Œè™½ç„¶æš‚æ—¶æ²¡æœ‰éœ€æ±‚ï¼Œä½†å¦‚æœæ˜¯æ–°è£…ä¿®ï¼Œå»ºè®®åœ¨åˆé€‚çš„ä½ç½®é¢„ç•™è¶³å¤Ÿçš„æ‰©å±•ã€‚
<ol>
<li>çª—å¸˜æ—è¾¹ï¼šæ’åº§</li>
<li>å¨æˆ¿åŠé¡¶å†…ï¼šç½‘çº¿å’Œæ’åº§</li>
<li>é©¬æ¡¶æ—è¾¹ï¼šå¸¦ç›–å­çš„æ’åº§</li>
<li>é˜³å°æˆ–ä¸‰åˆ†ç¦»æ°´æ± å¼€æ”¾çš„æ´—æ‰‹é—´ï¼šç›†ä¸‹çš„ä¸Šä¸‹æ°´ç®¡ã€æ’åº§</li>
<li>å¯ä»¥è·Ÿè®¾è®¡å¸ˆæ¢è®¨ï¼Œä¸€èˆ¬æƒ…å†µï¼Œå¸¸è§çš„æ™ºèƒ½è®¾å¤‡é¢„ç•™ä½ï¼Œä»–ä»¬éƒ½ä¼šæœ‰ä¸€å®šç»éªŒ</li>
</ol>
</li>
<li><strong>æ‰¾â€œå…¨å±‹æ™ºèƒ½æœåŠ¡å•†â€çš„é˜²å‘æŒ‡å—ï¼ˆå¦‚æœä¸æƒ³è‡ªå·±åŠ¨æ‰‹ï¼‰</strong>
<ul>
<li>å¦‚æœä½ æœ‰é¢„ç®—ä½†æ²¡æ—¶é—´æŠ˜è…¾ï¼Œæƒ³æ‰¾æœåŠ¡å•†ï¼Œè¯·åŠ¡å¿…è­¦æƒ•â€œå¥—é¤é™·é˜±â€ã€‚</li>
<li><strong>é¿å‘æ ¸å¿ƒ1ï¼šæ‹’ç»â€œåªç®¡è£…ä¸ç®¡è°ƒâ€</strong>
<ul>
<li>æ™ºèƒ½å®¶å±…çš„çµé­‚æ˜¯<strong>é€»è¾‘é…ç½®</strong>ï¼Œä¸æ˜¯æ‹§èºä¸ã€‚å¦‚æœæœåŠ¡å•†åªç»™ä½ åˆ—è®¾å¤‡æ¸…å•ï¼ˆå¤šå°‘ä¸ªå¼€å…³ã€å¤šå°‘ä¸ªç”µæœºï¼‰ï¼Œå´è¯´ä¸æ¸…æ¥šå…·ä½“çš„è‡ªåŠ¨åŒ–åœºæ™¯è®¾è®¡ï¼Œå¤§æ¦‚ç‡æ˜¯å–ç¡¬ä»¶çš„äºŒé“è´©å­ã€‚</li>
<li>è¦æ±‚ï¼šé—®ä»–ä»¬æ ¹æ®ä½ æ—¥å¸¸ç”Ÿæ´»çš„åŠ¨çº¿ï¼Œä¼šè®¾è®¡å“ªäº›æ™ºèƒ½åŒ–åœºæ™¯ï¼Œæ¯ä¸ªæ™ºèƒ½åœºæ™¯æ˜¯å¦‚ä½•å®ç°çš„ã€‚</li>
</ul>
</li>
<li><strong>é¿å‘æ ¸å¿ƒ2ï¼šè´¦å·æ‰€æœ‰æƒï¼ˆæå…¶é‡è¦ï¼ï¼‰</strong>
<ul>
<li>æŸäº›ä¸è‰¯æœåŠ¡å•†ä¼šæŠŠè®¾å¤‡ç»‘å®šåœ¨ä»–ä»¬çš„ä¼ä¸šè´¦å·ä¸‹ï¼Œä½ åªæ˜¯ä¸ªâ€œä½¿ç”¨è€…â€ã€‚ä¸€æ—¦ä½ æƒ³æ”¹ä¸ªåå­—ã€æ¢ä¸ªé€»è¾‘ï¼Œè¿˜å¾—æ±‚ä»–ä»¬ä¸Šé—¨ï¼ˆé¡ºä¾¿æ”¶ä½ ç‚¹æœåŠ¡è´¹ï¼‰ã€‚</li>
<li><strong>è¦æ±‚</strong>ï¼šå¿…é¡»äº¤ä»˜<strong>è¶…çº§ç®¡ç†å‘˜æƒé™</strong>ï¼Œè®¾å¤‡å¿…é¡»ç»‘å®šåœ¨ä½ è‡ªå·±çš„è´¦å·ä¸Šã€‚</li>
</ul>
</li>
<li><strong>é¿å‘æ ¸å¿ƒ3ï¼šè€ƒå¯Ÿâ€œæ–­ç½‘èƒ½åŠ›â€</strong>
<ul>
<li>é—®é”€å”®ï¼šâ€œå¦‚æœå®¶é‡Œæ–­ç½‘äº†ï¼Œæˆ–è€…è·¯ç”±å™¨åäº†ï¼Œè¿™äº›å¼€å…³è¿˜èƒ½æ§åˆ¶ç¯å—ï¼Ÿä¼ æ„Ÿå™¨è¿˜èƒ½è‡ªåŠ¨å¼€ç¯å—ï¼Ÿâ€</li>
<li>å¦‚æœå¯¹æ–¹æ”¯æ”¯å¾å¾ï¼Œæˆ–è€…æ¨èå…¨å±‹ WiFi æ–¹æ¡ˆï¼Œ<strong>èµ°</strong>ã€‚åˆæ ¼çš„å…¨å±‹æ™ºèƒ½å¿…é¡»åŸºäº Zigbee/PLC/è“ç‰™Mesh ç­‰å…·å¤‡<strong>æœ¬åœ°åŒ–è¾¹ç¼˜è®¡ç®—</strong>èƒ½åŠ›çš„åè®®ï¼Œæ­é…æ™ºèƒ½ç½‘å…³æ¥å®ç°æ–­ç½‘â€œå…œåº•â€ã€‚</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 data-id="heading-21"><strong>ä¹ã€ ç»“è¯­ï¼šè‡ªåŠ¨åŒ–çš„å°½å¤´æ˜¯â€œæ— æ„Ÿâ€</strong></h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/523b67d0c7ae475aa0f48dc00d78b961~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5aCC56y6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527218&amp;x-signature=AoEOxKrsW9aiAO0i9p7oZPWGo68%3D" alt="image-20260118203444426.png" loading="lazy"/>
è¿½æ±‚æœ¬åœ°æ§åˆ¶ï¼Œä¸ä»…ä»…æ˜¯ä¸ºäº†éšç§ï¼Œæ›´æ˜¯ä¸ºäº†æ¯«ç§’çº§çš„å“åº”é€Ÿåº¦ã€‚ä½ æ‰€åˆ°ä¹‹å¤„ï¼Œæ™ºèƒ½åœºæ™¯å‡å¦‚ä½ æ‰€æƒ³ï¼Œæ²¡æœ‰ä»»ä½•å»¶è¿Ÿï¼Œè¿™æ‰æ˜¯ç§‘æŠ€çš„æ€§æ„Ÿä¹‹å¤„ã€‚</p>
<p><strong>æœ€å¥½çš„æ™ºèƒ½å®¶å±…ï¼Œæ˜¯ä½ æ„Ÿè§‰ä¸åˆ°å®ƒçš„å­˜åœ¨ã€‚</strong></p>
<p>ä¸è¦ä¸ºäº†å±•ç¤ºæ™ºèƒ½è€Œå¼ºè¡Œè®¾ç½®å¤æ‚çš„è¯­éŸ³æŒ‡ä»¤ï¼Œé‚£æ˜¯ç»™å®¢äººè¡¨æ¼”ç”¨çš„ã€‚è®©æˆ¿å­åƒä¸€ä¸ªæ²‰é»˜çš„è€ç®¡å®¶ï¼Œæ¶¦ç‰©ç»†æ— å£°åœ°æœåŠ¡ä½ çš„ç”Ÿæ´»ï¼Œæ‰æ˜¯æˆ‘ä»¬æŠ˜è…¾çš„ç»ˆææ„ä¹‰ã€‚</p>
<hr/>
<p>åç»­ä¼šé’ˆå¯¹æ™ºèƒ½å®¶å±…ç›¸å…³å‘å¸ƒç³»åˆ—æ–‡ç« , å¦‚æœ‰å…´è¶£å¯ç‚¹å‡»å…³æ³¨</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GDAL å®ç°å½±åƒåˆå¹¶]]></title>    <link>https://juejin.cn/post/7597317683051364361</link>    <guid>https://juejin.cn/post/7597317683051364361</guid>    <pubDate>2026-01-20T15:42:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597317683051364361" data-draft-id="7597266141912711214" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GDAL å®ç°å½±åƒåˆå¹¶"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-20T15:42:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GISä¹‹è·¯"/> <meta itemprop="url" content="https://juejin.cn/user/4346787284915481"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GDAL å®ç°å½±åƒåˆå¹¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4346787284915481/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GISä¹‹è·¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T15:42:29.000Z" title="Tue Jan 20 2026 15:42:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">^Â å…³æ³¨æˆ‘ï¼Œå¸¦ä½ ä¸€èµ·å­¦GISÂ ^</h2>
<h2 data-id="heading-1">å‰è¨€</h2>
<blockquote>
<p>â</p>
<p>GDALä½œä¸ºåœ°ç†ç©ºé—´æ•°æ®å¤„ç†çš„æ ¸å¿ƒå·¥å…·ï¼Œå…¶å½±åƒåˆå¹¶åŠŸèƒ½ä¸ºå¤šæºæ …æ ¼æ•°æ®çš„é›†æˆä¸åˆ†ææä¾›äº†é«˜æ•ˆã€çµæ´»çš„è§£å†³æ–¹æ¡ˆã€‚æ— è®ºæ˜¯é¥æ„Ÿå½±åƒé•¶åµŒã€åœ°å›¾ç“¦ç‰‡æ‹¼æ¥ï¼Œè¿˜æ˜¯æ—¶é—´åºåˆ—æ•°æ®çš„èåˆï¼Œè¯¥åŠŸèƒ½èƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·å°†åˆ†æ•£çš„å½±åƒç‰‡æ®µæ•´åˆä¸ºå…·æœ‰ç»Ÿä¸€åœ°ç†å‚è€ƒå’Œè¿è´¯ä¿¡æ¯è¡¨è¾¾çš„å®Œæ•´æ•°æ®é›†ï¼Œä¸ºåç»­çš„ç©ºé—´åˆ†æã€å¯è§†åŒ–åŠåº”ç”¨æ„å»ºå¯é çš„æ•°æ®åŸºç¡€ã€‚</p>
</blockquote>
<p>ç”±äºæœ¬æ–‡ç”±ä¸€äº›å‰ç½®çŸ¥è¯†ï¼Œåœ¨æ­£å¼å¼€å§‹ä¹‹å‰ï¼Œéœ€è¦ä½ æŒæ¡ä¸€å®šçš„<code>Python</code>å¼€å‘åŸºç¡€å’ŒGDALçš„åŸºæœ¬æ¦‚å¿µã€‚åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­è®²è§£äº†å¦‚ä½•ä½¿ç”¨<code>GDAL</code>æˆ–è€…<code>ogr2ogr</code>å·¥å…·å°†<code>txt</code>ä»¥åŠ<code>csv</code>æ–‡æœ¬æ•°æ®è½¬æ¢ä¸º<code>Shp</code>æ ¼å¼ï¼Œå¯ä»¥ä½œä¸ºåŸºç¡€å…¥é—¨å­¦ä¹ ã€‚æœ¬ç¯‡æ•™ç¨‹åœ¨ä¹‹å‰ä¸€ç³»åˆ—æ–‡ç« çš„åŸºç¡€ä¸Šè®²è§£å¦‚ä½•ä½¿ç”¨<strong>GDAL å®ç°å½±åƒåˆå¹¶</strong>ã€‚</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FQtb_BJw91nKrFMeoa7WcxA" target="_blank" title="https://mp.weixin.qq.com/s/Qtb_BJw91nKrFMeoa7WcxA" ref="nofollow noopener noreferrer">GDAL ç®€ä»‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FFLWfZItLj24JYicQEX-PbQ" target="_blank" title="https://mp.weixin.qq.com/s/FLWfZItLj24JYicQEX-PbQ" ref="nofollow noopener noreferrer">GDAL ä¸‹è½½å®‰è£…</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fu0539e3CM2q4Y3MbMxxZKQ" target="_blank" title="https://mp.weixin.qq.com/s/u0539e3CM2q4Y3MbMxxZKQ" ref="nofollow noopener noreferrer">GDAL å¼€å‘èµ·æ­¥</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F0DGoC0oFHizJbweBnEvI-g" target="_blank" title="https://mp.weixin.qq.com/s/0DGoC0oFHizJbweBnEvI-g" ref="nofollow noopener noreferrer">GDAL å®ç° GIS æ•°æ®è¯»å–è½¬æ¢ï¼ˆå…¨ï¼‰</a></li>
</ul>
<p>å¦‚æœä½ è¿˜æ²¡æœ‰çœ‹è¿‡ï¼Œå»ºè®®ä»ä»¥ä¸Šå†…å®¹å¼€å§‹ã€‚</p>
<h2 data-id="heading-2">1. å¼€å‘ç¯å¢ƒ</h2>
<p>æœ¬æ–‡ä½¿ç”¨å¦‚ä¸‹å¼€å‘ç¯å¢ƒï¼Œä»¥ä¾›å‚è€ƒã€‚</p>
<p>æ—¶é—´ï¼š<code>2025å¹´</code></p>
<p>ç³»ç»Ÿï¼š<code>Windows 11</code></p>
<p>Pythonï¼š<code>3.11.7</code></p>
<p>GDALï¼š<code>3.11.1</code></p>
<h2 data-id="heading-3">2. æ•°æ®å‡†å¤‡</h2>
<p>ä¿—è¯è¯´å·§å¦‡éš¾ä¸ºæ— ç±³ä¹‹ç‚Šï¼Œæ•°æ®å°±æ˜¯è½¯ä»¶çš„åŸºçŸ³ï¼Œæ²¡æœ‰æ•°æ®ï¼Œå†ç¾å¥½çš„è®¾æƒ³éƒ½æ˜¯ç©ºä¸­æ¥¼é˜ã€‚å› æ­¤ï¼Œç¬¬ä¸€æ­¥éœ€è¦ä¸‹è½½é¥æ„Ÿå½±åƒæ•°æ®ã€‚</p>
<p>ä½†æ˜¯ï¼Œå½±åƒæ•°æ®åœ¨å“ªé‡Œä¸‹è½½å‘¢ï¼Ÿåˆ«ç€æ€¥ï¼Œæœ¬æ–‡éƒ½ç»™ä½ æ•´ç†å¥½äº†ã€‚</p>
<p>æ•°æ®ä¸‹è½½å¯å‚è€ƒæ–‡ç« ï¼š<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F5c_J7f0xkUXEv7_z0eNweQ" target="_blank" title="https://mp.weixin.qq.com/s/5c_J7f0xkUXEv7_z0eNweQ" ref="nofollow noopener noreferrer">GIS å½±åƒæ•°æ®æºä»‹ç»</a></strong></p>
<p>å¦‚ä¸‹ï¼Œè¿™æ˜¯æˆ‘åœ¨ã€åœ°ç†ç©ºé—´æ•°æ®äº‘ã€‘å¹³å°ä¸‹è½½çš„<code>landsat8</code>é¥æ„Ÿå½±åƒã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/445289344a844e10aae8dc47b01dd5c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528548&amp;x-signature=iyODsToTtGQY3kqIe%2BXwcsGpflw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">3. å¯¼å…¥ä¾èµ–</h2>
<p><code>GeoTIFF</code>ä½œä¸ºä¸€ç§æ …æ ¼æ•°æ®æ ¼å¼ï¼Œå¯ä»¥ä½¿ç”¨<code>GDAL</code>ç›´æ¥è¿›è¡Œå¤„ç†ï¼Œä»¥å®ç°å½±åƒæ•°æ®çš„åˆå¹¶æ“ä½œã€‚å½±åƒåˆå¹¶æ¶‰åŠåˆ°å¤§é‡æ•°å­¦è¿ç®—ï¼Œæ‰€ä»¥è¿˜éœ€è¦å¯¼å…¥<code>numpy</code>æ¨¡å—è¿›è¡Œå¤„ç†ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">from</span> osgeo <span class="hljs-keyword">import</span> gdal
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
</code></pre>
<p>å¦‚æœä½ æ²¡æœ‰å®‰è£…<code>numpy</code>æ¨¡å—çš„è¯ï¼Œå¯æ‰§è¡Œå‘½ä»¤<code>pip install numpy</code>è¿›è¡Œå®‰è£…ã€‚</p>
<h2 data-id="heading-5">4. å½±åƒåˆå¹¶</h2>
<p>å®šä¹‰ä¸€ä¸ªæ–¹æ³•<code>merge_raster(input_files, output_file, target_resolution=None)</code>ç”¨äºå®ç°æ …æ ¼æ•°æ®çš„åˆå¹¶ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
è¯´æ˜ï¼šGDAL å½±åƒåˆå¹¶
å‚æ•°ï¼š
Â  Â  -input_filesï¼šè¾“å…¥åˆå¹¶çš„å½±åƒæ–‡ä»¶åˆ—è¡¨
Â  Â  -output_fileï¼šè¾“å‡ºå½±åƒæ–‡ä»¶
Â  Â  -target_resolutionï¼šå½±åƒåˆå¹¶åˆ†è¾¨ç‡
"""</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">merge_raster</span>(<span class="hljs-params">input_files, output_file, target_resolution=<span class="hljs-literal">None</span></span>):
</code></pre>
<p>åœ¨è·å–åˆ°å½±åƒæ•°æ®åï¼Œéœ€è¦å¯¹æ•°æ®èŒƒå›´è¿›è¡Œåˆå¹¶ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">"""
éœ€è¦åˆå¹¶å›¾åƒå°ºå¯¸åè¿›è¡Œè¾“å‡º
"""

<span class="hljs-comment"># è·å–æ‰€æœ‰å½±åƒçš„è¾¹ç•Œå’Œåˆ†è¾¨ç‡</span>
min_x, max_x, min_y, <span class="hljs-attr">max_y</span> =Â float(<span class="hljs-string">'inf'</span>), -float(<span class="hljs-string">'inf'</span>),Â float(<span class="hljs-string">'inf'</span>), -float(<span class="hljs-string">'inf'</span>)
res_x, <span class="hljs-attr">res_y</span> = None, None

forÂ fileÂ inÂ input_files:
Â  Â Â <span class="hljs-comment"># æ‰“å¼€æ•°æ®é›†</span>
Â  Â  <span class="hljs-attr">ds</span> = gdal.Open(file)
Â  Â Â <span class="hljs-comment"># è·å–åœ°ç†å˜æ¢ä¿¡æ¯</span>
Â  Â  <span class="hljs-attr">gt</span> = ds.GetGeoTransform()

Â  Â Â <span class="hljs-comment"># è·å–è¡Œã€åˆ—æ•°</span>
Â  Â  <span class="hljs-attr">x_size</span> = ds.RasterXSize
Â  Â  <span class="hljs-attr">y_size</span> = ds.RasterYSize

Â  Â Â <span class="hljs-comment"># è®¡ç®—å®é™…è¾¹ç•Œ</span>
Â  Â  <span class="hljs-attr">x_min</span> = gt[<span class="hljs-number">0</span>]
Â  Â  <span class="hljs-attr">y_max</span> = gt[<span class="hljs-number">3</span>]
Â  Â  <span class="hljs-attr">x_max</span> = gt[<span class="hljs-number">0</span>] + x_size * gt[<span class="hljs-number">1</span>]
Â  Â  <span class="hljs-attr">y_min</span> = gt[<span class="hljs-number">3</span>] + y_size * gt[<span class="hljs-number">5</span>]

Â  Â  <span class="hljs-attr">min_x</span> = min(min_x, x_min)
Â  Â  <span class="hljs-attr">max_x</span> = max(max_x, x_max)
Â  Â  <span class="hljs-attr">min_y</span> = min(min_y, y_min)
Â  Â  <span class="hljs-attr">max_y</span> = max(max_y, y_max)

Â  Â Â ifÂ res_x is None or abs(gt<span class="hljs-section">[1]</span>) &lt; abs(res_x):
Â  Â  Â  Â  <span class="hljs-attr">res_x</span> = abs(gt[<span class="hljs-number">1</span>])
Â  Â  Â  Â  <span class="hljs-attr">res_y</span> = abs(gt[<span class="hljs-number">5</span>])

Â  Â Â <span class="hljs-comment"># å…³é—­æ•°æ®æº</span>
Â  Â  <span class="hljs-attr">ds</span> = None
</code></pre>
<p>è®¡ç®—å½±åƒåˆå¹¶åˆ†è¾¨ç‡ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä½¿ç”¨ç›®æ ‡åˆ†è¾¨ç‡æˆ–è®¡ç®—å‡ºçš„åˆ†è¾¨ç‡</span>
ifÂ target_resolution:
Â  Â  <span class="hljs-attr">res_x</span> = res_y = target_resolution
</code></pre>
<p>è·å–å½±åƒå¤§å°ï¼Œè¾“å‡ºåˆå¹¶å½±åƒçš„æ€»è¡Œæ•°å’Œæ€»åˆ—æ•°ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è®¡ç®—è¾“å‡ºå°ºå¯¸</span>
<span class="hljs-attr">out_cols</span> = int((max_x - min_x) / res_x + <span class="hljs-number">0.5</span>)
<span class="hljs-attr">out_rows</span> = int((max_y - min_y) / res_y + <span class="hljs-number">0.5</span>)
</code></pre>
<p>è°ƒç”¨<code>gdal</code>å¯¹è±¡æ–¹æ³•<code>Warp</code>è¿›è¡Œå½±åƒåˆå¹¶ï¼Œè¯¥å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°<code>destNameOrDestDS</code>Â ä¸ºè¾“å‡ºæ•°æ®é›†åç§°æˆ–è€…æ•°æ®æºï¼Œç¬¬äºŒä¸ªå‚æ•°<code>srcDSOrSrcDSTab</code>ä¸ºæºæ•°æ®ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°<code>options</code>ä¸ºå¯é€‰é¡¹æè¿°ï¼Œç”¨äºå®šä¹‰åˆå¹¶å½±åƒä¿¡æ¯ã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/438f9d8e123b475883cc9d6c536504d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528548&amp;x-signature=xw0QqRO8Rx1O%2FfZ5%2Bb6gfBIbauE%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è®¾ç½®Warpå‚æ•°</span>
<span class="hljs-attr">warp_options</span> = gdal.WarpOptions(
Â  Â  <span class="hljs-attr">format</span>=<span class="hljs-string">'GTiff'</span>,
Â  Â  <span class="hljs-attr">outputBounds</span>=[min_x, min_y, max_x, max_y],
Â  Â  <span class="hljs-attr">xRes</span>=res_x,
Â  Â  <span class="hljs-attr">yRes</span>=res_y,
Â  Â  <span class="hljs-attr">resampleAlg</span>=<span class="hljs-string">'bilinear'</span>, Â <span class="hljs-comment"># æ ¹æ®éœ€è¦é€‰æ‹©ï¼šnear, bilinear, cubic, lanczosç­‰</span>
Â  Â  <span class="hljs-attr">dstNodata</span>=<span class="hljs-number">0</span>,
Â  Â  <span class="hljs-attr">targetAlignedPixels</span>=<span class="hljs-literal">True</span>, Â <span class="hljs-comment"># ç¡®ä¿åƒç´ å¯¹é½</span>
Â  Â  <span class="hljs-attr">multithread</span>=<span class="hljs-literal">True</span>,
Â  Â  <span class="hljs-attr">creationOptions</span>=[<span class="hljs-string">'COMPRESS=LZW'</span>,Â <span class="hljs-string">'TILED=YES'</span>,Â <span class="hljs-string">'BIGTIFF=IF_SAFER'</span>]
)

<span class="hljs-comment"># æ‰§è¡Œåˆå¹¶</span>
gdal.Warp(output_file, input_files, <span class="hljs-attr">options</span>=warp_options)
</code></pre>
<p>åœ¨<code>main</code>å‡½æ•°ä¸­è°ƒç”¨åˆå¹¶æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">ifÂ <span class="hljs-attr">__name__</span> ==Â <span class="hljs-string">"__main__"</span>:

Â  Â Â <span class="hljs-comment"># è¾“å…¥å½±åƒæ–‡ä»¶</span>
Â  Â  <span class="hljs-attr">input_files</span> = [Â 
Â  Â  Â  Â Â <span class="hljs-string">"E:\ArcGIS\bandmerge\lc8_band_432.tif"</span>,
Â  Â  Â  Â Â <span class="hljs-string">"E:\ArcGIS\bandmerge\lc8_band_432_d.tif"</span>
Â  Â  ]
Â  Â Â <span class="hljs-comment"># è¾“å‡ºå½±åƒæ–‡ä»¶</span>
Â  Â  <span class="hljs-attr">output_file</span> =Â <span class="hljs-string">"E:\ArcGIS\bandmerge\merge_result.tif"</span>

Â  Â  merge_raster(input_files, output_file, <span class="hljs-attr">target_resolution</span>=<span class="hljs-number">10</span>)
</code></pre>
<p><strong>å›¾ç‰‡æ•ˆæœ</strong></p>
<p><strong><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cab37a47d3fb48ab837b7db149980e8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528548&amp;x-signature=ZqtFz8W%2BkOHmj%2BURSmkLAzxuj6k%3D" alt="" loading="lazy"/></strong></p>
<p><strong><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9da082e8c6474b79ba14429252362328~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528548&amp;x-signature=KaieS37Z3vwN80SaYJYmYyFF8%2B8%3D" alt="" loading="lazy"/></strong></p>
<blockquote>
<p>â</p>
<p>OpenLayersç¤ºä¾‹æ•°æ®ä¸‹è½½ï¼Œè¯·åœ¨å…¬ä¼—å·åå°å›å¤ï¼š<strong>vector</strong></p>
<p>å…¨å›½ä¿¡æ¯åŒ–å·¥ç¨‹å¸ˆï¼GIS åº”ç”¨æ°´å¹³è€ƒè¯•èµ„æ–™ï¼Œè¯·åœ¨å…¬ä¼—å·åå°å›å¤ï¼š<strong>GISè€ƒè¯•</strong></p>
</blockquote>
<blockquote>
<p>â</p>
<p><em><strong>GISä¹‹è·¯</strong></em> å…¬ä¼—å·å·²ç»æ¥å…¥äº†<strong>æ™ºèƒ½</strong> <strong>åŠ©æ‰‹</strong>ï¼Œå¯ä»¥åœ¨å¯¹è¯æ¡†è¿›è¡Œæé—®ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æœç´¢å†å²æ–‡ç« è¿›è¡ŒæŸ¥çœ‹ã€‚</p>
</blockquote>
<p>éƒ½çœ‹åˆ°è¿™äº†ï¼Œä¸è¦å¿˜è®°<em><strong>ç‚¹èµã€æ”¶è—</strong></em> <strong>+</strong> <em><strong>å…³æ³¨</strong></em> å“¦ <strong>ï¼</strong></p>
<p>æœ¬å·ä¸å®šæ—¶æ›´æ–°æœ‰å…³Â <em><strong>GISå¼€å‘</strong></em> ç›¸å…³å†…å®¹ï¼Œ<em><strong>æ¬¢è¿å…³æ³¨Â <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60a20f016616439b82c168439d9fab7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528548&amp;x-signature=jkVMN2FzQJpnlKmcNd0OlEZsMK0%3D" alt="" loading="lazy"/><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acf6e76429534fa4a2938e323ef6f6f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528548&amp;x-signature=UhlMt9t9CFE1ODhQuQMQWdw8Mmo%3D" alt="" loading="lazy"/></strong></em></p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2e4debb563c4619ad81009420a378c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528548&amp;x-signature=X7EjrBYbPUsTFs5TzOlZ8aqeBAg%3D" alt="" loading="lazy"/></p>
<p>Â  Â <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/947660caa98d4dccaf370016c96a1e54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528548&amp;x-signature=mpYbJ6l211G1xc3aYk84ciJQq7M%3D" alt="" loading="lazy"/>Â </p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwOTEzNjI5NQ%3D%3D%26mid%3D2247487953%26idx%3D1%26sn%3D0b2d5aeefdb290583cf8cdd82f3c2077%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwOTEzNjI5NQ==&amp;mid=2247487953&amp;idx=1&amp;sn=0b2d5aeefdb290583cf8cdd82f3c2077&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">GeoTools å¼€å‘åˆé›†ï¼ˆå…¨ï¼‰</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwOTEzNjI5NQ%3D%3D%26mid%3D2247487119%26idx%3D1%26sn%3Dc313efa84c27bf933ef2f2a47991ef2d%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwOTEzNjI5NQ==&amp;mid=2247487119&amp;idx=1&amp;sn=c313efa84c27bf933ef2f2a47991ef2d&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">OpenLayers å¼€å‘åˆé›†</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FGynyIuYw2eRJ4y6gZ8oSLQ" target="_blank" title="https://mp.weixin.qq.com/s/GynyIuYw2eRJ4y6gZ8oSLQ" ref="nofollow noopener noreferrer">å°å°å£°è¯´ä¸€ä¸‹GDALçš„å®˜æ–¹APIæ¥å£</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FlEqKlTbHKzJ25XsIX6CBuw" target="_blank" title="https://mp.weixin.qq.com/s/lEqKlTbHKzJ25XsIX6CBuw" ref="nofollow noopener noreferrer">ã€Šäº‘å—çœåŠ å¿«æ„å»ºç°ä»£åŒ–äº§ä¸šä½“ç³»æ¨è¿›äº§ä¸šå¼ºçœå»ºè®¾è¡ŒåŠ¨è®¡åˆ’ã€‹å‘å¸ƒ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F8ZDl_-gzCVWrvGAe-VNe8Q" target="_blank" title="https://mp.weixin.qq.com/s/8ZDl_-gzCVWrvGAe-VNe8Q" ref="nofollow noopener noreferrer">ArcGIS Pro æ·»åŠ åº•å›¾çš„æ–¹å¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FE9BrT9VzidvziCayXgRCQA" target="_blank" title="https://mp.weixin.qq.com/s/E9BrT9VzidvziCayXgRCQA" ref="nofollow noopener noreferrer">ä¸ºä»€ä¹ˆæ¯æ¬¡æ‰“å¼€ ArcGIS Pro é¡µé¢åŠ è½½éƒ½å¦‚æ­¤ç¼“æ…¢ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FhBXfq6zRK9twSicMXw69jw" target="_blank" title="https://mp.weixin.qq.com/s/hBXfq6zRK9twSicMXw69jw" ref="nofollow noopener noreferrer">ArcGIS Pro å®ç°å½±åƒæ³¢æ®µåˆæˆ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FQVFiW5C5wXQ6a1WODCaH0g" target="_blank" title="https://mp.weixin.qq.com/s/QVFiW5C5wXQ6a1WODCaH0g" ref="nofollow noopener noreferrer">è‡ªç„¶èµ„æºéƒ¨å…šç»„å…³äºè‹—æ³½ç­‰4ååŒå¿—èŒåŠ¡ä»»å…çš„é€šçŸ¥</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FJmv3J_bjbBG-4jB72zS3hw" target="_blank" title="https://mp.weixin.qq.com/s/Jmv3J_bjbBG-4jB72zS3hw" ref="nofollow noopener noreferrer">GDAL åˆ›å»ºçŸ¢é‡å›¾å±‚çš„ä¸¤ç§æ–¹å¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FwkHv2NnJfuPhtyjJcFLrEQ" target="_blank" title="https://mp.weixin.qq.com/s/wkHv2NnJfuPhtyjJcFLrEQ" ref="nofollow noopener noreferrer">GDAL å®ç°çŸ¢é‡æ•°æ®è½¬æ¢å¤„ç†ï¼ˆå…¨ï¼‰</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FMZIQ57Ka3NQfKFi9AuEQEg" target="_blank" title="https://mp.weixin.qq.com/s/MZIQ57Ka3NQfKFi9AuEQEg" ref="nofollow noopener noreferrer">GDAL å®ç°æŠ•å½±è½¬æ¢</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FSX2u2ww1iNOtqR5m3BE93g" target="_blank" title="https://mp.weixin.qq.com/s/SX2u2ww1iNOtqR5m3BE93g" ref="nofollow noopener noreferrer">å›½äº§ç‰ˆçš„Google Earthï¼Œå‰æ—ä¸€å·å«æ˜ŸAppâ€œå…±ç”Ÿåœ°çƒâ€æ¥äº†</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FfWufqSyplniNj4Q3BRRbAQ" target="_blank" title="https://mp.weixin.qq.com/s/fWufqSyplniNj4Q3BRRbAQ" ref="nofollow noopener noreferrer">2026å¹´å…¨å›½è‡ªç„¶èµ„æºå·¥ä½œä¼šè®®å¬å¼€</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FRq7mCSrKU7DA7WRGDEy6Cg" target="_blank" title="https://mp.weixin.qq.com/s/Rq7mCSrKU7DA7WRGDEy6Cg" ref="nofollow noopener noreferrer">æ—¥æœ¬æ¬²æ‰“é€ â€œæœ¬åœŸç‰ˆâ€æ˜Ÿé“¾ç³»ç»Ÿ</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026 å¹´ æŒæ¡ Git Merge ä¸ Rebase é¿å…ä»£ç å†²çª]]></title>    <link>https://juejin.cn/post/7597317683051560969</link>    <guid>https://juejin.cn/post/7597317683051560969</guid>    <pubDate>2026-01-20T23:19:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597317683051560969" data-draft-id="7597258378590928906" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026 å¹´ æŒæ¡ Git Merge ä¸ Rebase é¿å…ä»£ç å†²çª"/> <meta itemprop="keywords" content="Git"/> <meta itemprop="datePublished" content="2026-01-20T23:19:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BingoGo"/> <meta itemprop="url" content="https://juejin.cn/user/993614242266077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026 å¹´ æŒæ¡ Git Merge ä¸ Rebase é¿å…ä»£ç å†²çª
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614242266077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BingoGo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T23:19:43.000Z" title="Tue Jan 20 2026 23:19:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">2026 å¹´ æŒæ¡ Git Merge ä¸ Rebase é¿å…ä»£ç å†²çª</h2>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆ Git Merge å’Œ Rebase ä¾ç„¶é‡è¦</h3>
<p>åœ¨ç°ä»£è½¯ä»¶å¼€å‘ä¸­ï¼Œå¤šäººåä½œåŒä¸€ä»£ç åº“å·²æ˜¯å¸¸æ€ã€‚Git è¿™ç±»ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„è®¾è®¡åˆè¡·ï¼Œå°±æ˜¯è®©å›¢é˜Ÿèƒ½å¤ŸåŒæ—¶åœ¨ä¸åŒåˆ†æ”¯ä¸Šå·¥ä½œã€‚ç„¶è€Œï¼Œè¿™ç§è‡ªç”±ä¹Ÿå¸¦æ¥äº†æŒ‘æˆ˜ï¼šå½“éœ€è¦æ•´åˆè¿™äº›åˆ†æ”¯æ—¶ï¼Œå¦‚ä½•ç®¡ç†ä»£ç å˜æ›´ã€è§£å†³å†²çªï¼ŸGit æä¾›äº†ä¸¤ç§ä¸»è¦çš„åˆå¹¶å·¥å…·ï¼šGit Merge å’Œ Git Rebaseã€‚</p>
<p>è¿™ä¸¤ç§æ“ä½œéƒ½èƒ½å°†ä¸€ä¸ªåˆ†æ”¯çš„å˜æ›´åˆå¹¶åˆ°å¦ä¸€ä¸ªåˆ†æ”¯ï¼Œä½†å®ç°æ–¹å¼ä¸åŒã€‚ç†è§£å®ƒä»¬çš„åŒºåˆ«ï¼Œå¯¹äºä¿æŒä»£ç åº“æ•´æ´ã€é¿å…ä¸å¿…è¦çš„å†²çªã€ç¡®ä¿é¡¹ç›®å†å²æ¸…æ™°å¯è¿½æº¯è‡³å…³é‡è¦ã€‚</p>
<p>æœ¬æ–‡å°†è¯¦ç»†æ‹†è§£ Git Merge å’Œ Git Rebaseï¼Œé…åˆå®é™…ç¤ºä¾‹ï¼Œå¸®åŠ©ä½ ç†è§£ä½•æ—¶è¯¥ç”¨å“ªä¸€ç§ã€‚è¯»å®Œä¹‹åï¼Œä½ å°†å¯¹è¿™ä¸¤ç§ Git ç­–ç•¥æœ‰æ‰å®çš„æŒæ¡ï¼Œèƒ½å¤Ÿé¿å…é‚£äº›å¯¼è‡´ä»£ç å†²çªçš„å¸¸è§é™·é˜±ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.com%2Fpost%2F2026-01%2Fmastering-git-merge-rebase-avoid-code-conflicts" target="_blank" title="https://catchadmin.com/post/2026-01/mastering-git-merge-rebase-avoid-code-conflicts" ref="nofollow noopener noreferrer">åŸæ–‡ 2026 å¹´ æŒæ¡ Git Merge ä¸ Rebase é¿å…ä»£ç å†²çª</a></p>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯ Git Mergeï¼Ÿ</h3>
<p>Git Merge æ˜¯ Git çš„åŸºç¡€æ“ä½œä¹‹ä¸€ï¼Œç”¨äºå°†ä¸€ä¸ªåˆ†æ”¯çš„å˜æ›´åˆå¹¶åˆ°å¦ä¸€ä¸ªåˆ†æ”¯ã€‚é€šå¸¸ç”¨äºå°†åŠŸèƒ½åˆ†æ”¯æ•´åˆåˆ°ä¸»åˆ†æ”¯ï¼ˆä¸€èˆ¬å« <code>main</code> æˆ– <code>master</code>ï¼‰ã€‚Git Merge ä¼šä¿ç•™ä¸¤ä¸ªåˆ†æ”¯çš„å†å²ï¼ŒåŒæ–¹çš„å˜æ›´éƒ½å®Œæ•´ä¿ç•™ã€‚</p>
<p>æ‰§è¡Œ merge æ—¶ï¼ŒGit ä¼šå°è¯•è‡ªåŠ¨åˆå¹¶ä¸¤ä¸ªåˆ†æ”¯çš„å˜æ›´ã€‚å¦‚æœé‡åˆ°å†²çªâ€”â€”å³ä¸¤ä¸ªåˆ†æ”¯ä»¥ä¸å…¼å®¹çš„æ–¹å¼ä¿®æ”¹äº†åŒä¸€æ®µä»£ç â€”â€”Git ä¼šåœä¸‹æ¥ï¼Œè¦æ±‚ä½ æ‰‹åŠ¨è§£å†³å†²çªã€‚è§£å†³åï¼Œæäº¤å˜æ›´å³å¯å®Œæˆåˆå¹¶ã€‚</p>
<h4 data-id="heading-3">Git Merge å·¥ä½œæµç¤ºä¾‹</h4>
<p>å‡è®¾ä½ åœ¨ <code>feature-branch</code> ä¸Šå¼€å‘ï¼Œæƒ³æŠŠå®ƒåˆå¹¶åˆ° <code>main</code> åˆ†æ”¯ã€‚æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>å…ˆåˆ‡æ¢åˆ° <code>main</code> åˆ†æ”¯ï¼ˆå³ç›®æ ‡åˆ†æ”¯ï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">git checkout main
</code></pre>
<ol start="2">
<li>æ‰§è¡Œåˆå¹¶ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">git merge feature-branch
</code></pre>
<p>å¦‚æœæ²¡æœ‰å†²çªï¼ŒGit ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªåˆå¹¶æäº¤ï¼ˆmerge commitï¼‰ï¼Œå°†ä¸¤ä¸ªåˆ†æ”¯åˆå¹¶ã€‚å¦‚æœæœ‰å†²çªï¼ŒGit ä¼šæš‚åœå¹¶æç¤ºå“ªäº›æ–‡ä»¶éœ€è¦å¤„ç†ã€‚</p>
<ol start="3">
<li>è§£å†³ Git æ ‡è®°çš„å†²çªæ–‡ä»¶ï¼Œè§£å†³åæ ‡è®°ä¸ºå·²è§£å†³ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">git add &lt;conflicted-file&gt;
</code></pre>
<ol start="4">
<li>æäº¤å®Œæˆåˆå¹¶ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">git commit
</code></pre>
<p>è¿™æ ·ä¼šç”Ÿæˆä¸€ä¸ªåˆå¹¶æäº¤ï¼Œè®°å½•ä¸¤ä¸ªåˆ†æ”¯çš„åˆå¹¶ã€‚æäº¤å†å²ç°åœ¨ä¼šæ˜¾ç¤º <code>feature-branch</code> è¢«åˆå¹¶è¿›äº† <code>main</code>ï¼ŒåŒæ–¹å†å²éƒ½å¾—ä»¥ä¿ç•™ã€‚</p>
<h4 data-id="heading-4">Git Merge çš„ä¼˜ç¼ºç‚¹</h4>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li><strong>åä½œå®‰å…¨</strong>ï¼šMerge ä¸ä¼šä¿®æ”¹æäº¤å†å²ï¼Œé€‚åˆå›¢é˜Ÿåä½œã€‚æ¯ä¸ªå¼€å‘è€…éƒ½èƒ½æ¸…æ¥šçœ‹åˆ°ä»£ç çš„æ¼”å˜è¿‡ç¨‹ã€‚</li>
<li><strong>åˆ†æ”¯å†å²æ¸…æ™°</strong>ï¼šåˆå¹¶æäº¤æ˜ç¡®æ˜¾ç¤ºåˆ†æ”¯ä½•æ—¶åˆ†å‰ã€ä½•æ—¶æ•´åˆï¼Œå®Œæ•´ä¿ç•™å†å²ã€‚</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li><strong>æäº¤å†å²å¯èƒ½æ‚ä¹±</strong>ï¼šé¢‘ç¹åˆå¹¶ä¼šè®©å†å²å˜å¾—æ··ä¹±ï¼Œå°¤å…¶æ˜¯å¤šä¸ªåŠŸèƒ½åˆ†æ”¯åŠ ä¸Šå¤šä¸ªåˆå¹¶æäº¤æ—¶ï¼Œè¿½è¸ªç‰¹å®šå˜æ›´ä¼šå˜å¾—å›°éš¾ã€‚</li>
<li><strong>åˆå¹¶æäº¤æœ‰æ—¶æ˜¾å¾—å¤šä½™</strong>ï¼šå¦‚æœä½ æ›´å–œæ¬¢çº¿æ€§å†å²ï¼Œåˆå¹¶æäº¤å¯èƒ½ä¼šç»™é¡¹ç›®å†å²å¢åŠ å™ªéŸ³ã€‚</li>
</ul>
<h3 data-id="heading-5">ä»€ä¹ˆæ˜¯ Git Rebaseï¼Ÿ</h3>
<p>Git Rebase æ˜¯å¦ä¸€ç§æ•´åˆåˆ†æ”¯å˜æ›´çš„æ–¹å¼ï¼Œä½†å®ƒé€šè¿‡é‡å†™æäº¤å†å²æ¥å®ç°ã€‚ä¸ Git Merge åˆ›å»ºåˆå¹¶æäº¤ä¸åŒï¼ŒGit Rebase ä¼šæŠŠä½ çš„å˜æ›´é‡æ–°åº”ç”¨åˆ°ç›®æ ‡åˆ†æ”¯ï¼ˆé€šå¸¸æ˜¯ <code>main</code>ï¼‰ä¹‹ä¸Šï¼Œå½¢æˆçº¿æ€§çš„æäº¤å†å²ï¼Œæ²¡æœ‰åˆå¹¶æäº¤ã€‚</p>
<p>Rebase èƒ½è®©é¡¹ç›®å†å²æ›´å¹²å‡€ï¼Œå› ä¸ºå®ƒæ¶ˆé™¤äº†ä¸å¿…è¦çš„åˆå¹¶æäº¤ã€‚ä½† rebase ä¼šé‡å†™æäº¤å†å²ï¼Œåœ¨åä½œç¯å¢ƒä¸­å¯èƒ½å¸¦æ¥é£é™©ï¼Œå°¤å…¶æ˜¯å½“ä½ å·²ç»æŠŠåˆ†æ”¯æ¨é€ç»™å…¶ä»–äººæ—¶ã€‚</p>
<h4 data-id="heading-6">Git Rebase å·¥ä½œæµç¤ºä¾‹</h4>
<p>å‡è®¾ä½ åœ¨ <code>feature-branch</code> ä¸Šå¼€å‘ï¼Œæƒ³æŠŠå®ƒ rebase åˆ° <code>main</code> åˆ†æ”¯ä»¥è·å–æœ€æ–°å˜æ›´ã€‚æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>å…ˆåˆ‡æ¢åˆ°ä½ çš„ <code>feature-branch</code>ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">git checkout feature-branch
</code></pre>
<ol start="2">
<li>å°† <code>feature-branch</code> rebase åˆ° <code>main</code>ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">git rebase main
</code></pre>
<p>Git ä¼šæŠŠ <code>feature-branch</code> ä¸Šçš„æäº¤é€ä¸ªé‡æ”¾åˆ°å½“å‰ <code>main</code> åˆ†æ”¯ä¹‹ä¸Šï¼Œç›¸å½“äºè®© <code>feature-branch</code> åŒ…å«äº† <code>main</code> çš„æ‰€æœ‰æœ€æ–°å˜æ›´ã€‚å¦‚æœæ²¡æœ‰å†²çªï¼Œrebase ä¼šè‡ªåŠ¨å®Œæˆã€‚</p>
<ol start="3">
<li>è§£å†³ rebase è¿‡ç¨‹ä¸­å‡ºç°çš„å†²çªã€‚Git ä¼šåœ¨æ¯ä¸ªå†²çªå¤„åœä¸‹æ¥è®©ä½ å¤„ç†ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è§£å†³æ–‡ä»¶ä¸­çš„å†²çª</span>
git add &lt;conflicted-file&gt;
</code></pre>
<ol start="4">
<li>è§£å†³æ¯ä¸ªå†²çªåç»§ç»­ rebaseï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">git rebase --<span class="hljs-built_in">continue</span>
</code></pre>
<ol start="5">
<li>å°† rebase åçš„åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼ˆæ³¨æ„ï¼šå¦‚æœä¹‹å‰å·²ç»æ¨é€è¿‡è¿™ä¸ªåˆ†æ”¯ï¼Œå¯èƒ½éœ€è¦å¼ºåˆ¶æ¨é€ï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">git push --force
</code></pre>
<p>ç°åœ¨ï¼Œä½ çš„ <code>feature-branch</code> åœ¨ <code>main</code> ä¹‹ä¸Šæœ‰äº†çº¿æ€§çš„æäº¤å†å²ï¼Œå¯ä»¥åˆ›å»º pull request åˆå¹¶åˆ° <code>main</code> äº†ã€‚</p>
<h4 data-id="heading-7">Git Rebase çš„ä¼˜ç¼ºç‚¹</h4>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li><strong>å¹²å‡€çš„çº¿æ€§å†å²</strong>ï¼šRebase é¿å…äº†åˆå¹¶æäº¤çš„æ‚ä¹±ï¼Œé¡¹ç›®å†å²æ›´ç®€æ´æ˜“æ‡‚ã€‚</li>
<li><strong>ç®€åŒ–ä»£ç å®¡æŸ¥</strong>ï¼šçº¿æ€§å†å²è®©å®¡æŸ¥è€…æ›´å®¹æ˜“è·Ÿè¸ªä»£ç æ¼”å˜ï¼Œç†è§£æ¯ä¸ªå˜æ›´ã€‚</li>
<li><strong>é¿å…ä¸å¿…è¦çš„åˆå¹¶æäº¤</strong>ï¼šé¢‘ç¹ä¸ä¸»åˆ†æ”¯åŒæ­¥æ—¶ï¼Œrebase èƒ½ä¿æŒå†å²æ•´æ´ã€‚</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li><strong>é‡å†™æäº¤å†å²</strong>ï¼šRebase ä¼šæ”¹å˜æäº¤å†å²ï¼Œåœ¨å›¢é˜Ÿåä½œä¸­å¯èƒ½å¼•å‘é—®é¢˜ã€‚å¦‚æœå…¶ä»–äººåŸºäºä½ çš„åˆ†æ”¯å·¥ä½œï¼Œrebase å¯èƒ½å¯¼è‡´å†²çªå’Œæ··ä¹±ã€‚</li>
<li><strong>å‡ºé”™é£é™©</strong>ï¼šä½¿ç”¨ä¸å½“æ—¶ï¼Œrebase å¯èƒ½å¯¼è‡´æäº¤ä¸¢å¤±æˆ–æ··ä¹±ï¼Œå°¤å…¶æ˜¯å¯¹è§£å†³ rebase å†²çªä¸ç†Ÿç»ƒçš„æƒ…å†µä¸‹ã€‚</li>
</ul>
<h3 data-id="heading-8">Git Merge ä¸ Git Rebase çš„æ ¸å¿ƒåŒºåˆ«</h3>
<p>é€‰æ‹©ä½¿ç”¨å“ªç§ç­–ç•¥æ—¶ï¼Œç†è§£ä¸¤è€…çš„åŒºåˆ«å¾ˆé‡è¦ã€‚ä»¥ä¸‹æ˜¯å¯¹æ¯”æ¦‚è§ˆï¼š</p>
<p><strong>æäº¤å†å²ï¼š</strong>
Git Merge ä¿ç•™æäº¤å†å²ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„åˆå¹¶æäº¤æ¥æ•´åˆåˆ†æ”¯ã€‚è¿™ä¿æŒäº†å†å²å®Œæ•´ï¼Œä½†é¢‘ç¹åˆå¹¶å¯èƒ½å¯¼è‡´æäº¤æ—¥å¿—æ‚ä¹±ã€‚è€Œ Git Rebase é‡å†™æäº¤å†å²ï¼Œç”Ÿæˆå¹²å‡€çš„çº¿æ€§æäº¤åºåˆ—ï¼Œæ²¡æœ‰åˆå¹¶æäº¤ã€‚</p>
<p><strong>å†²çªè§£å†³ï¼š</strong>
Merge æ—¶ï¼Œå†²çªåœ¨åˆå¹¶å‘èµ·åè§£å†³ã€‚Git ä¼šåœä¸‹æ¥è®©ä½ è§£å†³å†²çªåå†ç»§ç»­ã€‚Rebase æ—¶ï¼Œå†²çªåœ¨ rebase è¿‡ç¨‹ä¸­è§£å†³ï¼Œå› ä¸ºæ¯ä¸ªæäº¤æ˜¯é€ä¸ªé‡æ–°åº”ç”¨çš„ï¼Œéœ€è¦åœ¨æ¯ä¸€æ­¥è§£å†³å†²çªã€‚</p>
<p><strong>åä½œåœºæ™¯ï¼š</strong>
Git Merge åœ¨åä½œç¯å¢ƒä¸­é€šå¸¸æ›´å®‰å…¨ï¼Œå› ä¸ºå®ƒä¸é‡å†™å†å²ï¼Œé€‚åˆåœ¨å…±äº«åˆ†æ”¯ä¸Šä½¿ç”¨ã€‚Rebase ä¼šé‡å†™å†å²ï¼Œå¯èƒ½ç»™åŸºäºä½ åˆ†æ”¯å·¥ä½œçš„åŒäº‹å¸¦æ¥é—®é¢˜ã€‚åœ¨ç§æœ‰åˆ†æ”¯æˆ–æ²¡æœ‰å…¶ä»–äººåœ¨ç”¨çš„åˆ†æ”¯ä¸Š rebase æ›´å®‰å…¨ã€‚</p>
<p><strong>å†å²æ¸…æ™°åº¦ï¼š</strong>
Rebase é€šè¿‡æ¶ˆé™¤åˆå¹¶æäº¤æä¾›æ›´å¹²å‡€çš„çº¿æ€§å†å²ï¼Œé€‚åˆå¸Œæœ›å¼€å‘å†å²å‘ˆç›´çº¿çš„åœºæ™¯ã€‚åˆå¹¶æäº¤è™½ç„¶ä¿ç•™äº†æ›´å¤šå†å²ä¿¡æ¯ï¼Œä½†å¯èƒ½å¯¼è‡´æ›´å¤æ‚çš„æäº¤å†å²ï¼Œæµè§ˆå’Œå®¡æŸ¥èµ·æ¥æ›´å›°éš¾ã€‚</p>
<h3 data-id="heading-9">æœ€ä½³å®è·µï¼šä½•æ—¶ç”¨ Mergeï¼Œä½•æ—¶ç”¨ Rebase</h3>
<p><strong>ä½¿ç”¨ Git Merge çš„åœºæ™¯ï¼š</strong></p>
<ul>
<li>æƒ³ä¿ç•™åˆ†æ”¯å¼€å‘çš„å®Œæ•´å†å²</li>
<li>åœ¨å…±äº«åˆ†æ”¯ä¸Šå·¥ä½œï¼Œéœ€è¦é¿å…é‡å†™å†å²</li>
<li>æƒ³æ¸…æ¥šçœ‹åˆ°ä¸åŒåˆ†æ”¯ä½•æ—¶è¢«æ•´åˆ</li>
<li>èƒ½æ¥å—ç¨å¤æ‚çš„å†å²ï¼Œåªè¦å®ƒåæ˜ äº†æ¯ä¸ªåˆ†æ”¯çš„è´¡çŒ®</li>
</ul>
<p><strong>ä½¿ç”¨ Git Rebase çš„åœºæ™¯ï¼š</strong></p>
<ul>
<li>æƒ³ä¿æŒå¹²å‡€çš„çº¿æ€§å†å²ï¼Œå°¤å…¶æ˜¯åœ¨å°†åŠŸèƒ½åˆ†æ”¯åˆå¹¶åˆ° <code>main</code> ä¹‹å‰</li>
<li>ç‹¬è‡ªåœ¨åŠŸèƒ½åˆ†æ”¯ä¸Šå·¥ä½œï¼Œæƒ³ä¸ <code>main</code> ä¿æŒåŒæ­¥ä½†ä¸æƒ³äº§ç”Ÿä¸å¿…è¦çš„åˆå¹¶æäº¤</li>
<li>æƒ³åœ¨æäº¤ pull request å‰ç®€åŒ–æäº¤å†å²ï¼Œæ–¹ä¾¿å®¡æŸ¥</li>
</ul>
<h3 data-id="heading-10">å¸¸è§é”™è¯¯åŠé¿å…æ–¹æ³•</h3>
<ul>
<li><strong>åœ¨å…±äº«åˆ†æ”¯ä¸Š Rebase</strong>ï¼šGit Rebase æœ€å¸¸è§çš„é”™è¯¯æ˜¯åœ¨å…¶ä»–äººæ­£åœ¨ä½¿ç”¨çš„åˆ†æ”¯ä¸Šé‡å†™å†å²ï¼Œè¿™ä¼šç»™é˜Ÿå‹å¸¦æ¥å›°æƒ‘å’Œé”™è¯¯ã€‚</li>
<li><strong>å†²çªè§£å†³ä¸å½“</strong>ï¼šæ— è®ºç”¨ merge è¿˜æ˜¯ rebaseï¼Œéƒ½è¦ä»”ç»†è§£å†³å†²çªã€‚è·³è¿‡è¿™ä¸€æ­¥å¯èƒ½å¯¼è‡´ä»£ç æŸåæˆ–å˜æ›´ä¸¢å¤±ã€‚</li>
<li><strong>Rebase åå¿˜è®°æ¨é€</strong>ï¼šå¦‚æœ rebase åå¿˜è®°å¼ºåˆ¶æ¨é€ï¼Œè¿œç¨‹åˆ†æ”¯ä¸ä¼šåæ˜  rebase åçš„å˜æ›´ã€‚åŠ¡å¿…åœ¨ rebase åæ¨é€ï¼Œå¿…è¦æ—¶ä½¿ç”¨å¼ºåˆ¶æ¨é€ã€‚</li>
<li><strong>å¤æ‚åˆå¹¶åœºæ™¯ä¸‹ä½¿ç”¨ Rebase</strong>ï¼šå¦‚æœåˆ†æ”¯åˆ†å‰ä¸¥é‡ï¼Œéš¾ä»¥å¹²å‡€åœ° rebaseï¼ŒGit Merge å¯èƒ½æ˜¯æ›´å®‰å…¨ã€æ›´ç®€å•çš„é€‰æ‹©ã€‚</li>
</ul>
<h3 data-id="heading-11">æ€»ç»“</h3>
<p>åœ¨ 2026 å¹´ï¼ŒGit ä»ç„¶æ˜¯è½¯ä»¶å¼€å‘ä¸å¯æˆ–ç¼ºçš„å·¥å…·ï¼Œç†è§£ Git Merge å’Œ Git Rebase çš„åŒºåˆ«å¯¹äºä¿æŒé«˜æ•ˆå·¥ä½œæµè‡³å…³é‡è¦ã€‚ä¸¤ç§æ“ä½œå„æœ‰ä¼˜åŠ£ï¼Œå…³é”®åœ¨äºçŸ¥é“ä½•æ—¶ä½¿ç”¨å“ªä¸€ç§ã€‚</p>
<p>Git Merge é€‚åˆä¿ç•™å®Œæ•´çš„åˆ†æ”¯å†å²ï¼Œåœ¨åä½œç¯å¢ƒä¸­æ›´å®‰å…¨ï¼›Git Rebase æ“…é•¿ä¿æŒæ•´æ´çš„çº¿æ€§å†å²ï¼Œé€‚åˆç²¾ç®€é¡¹ç›®æäº¤è®°å½•ã€ç®€åŒ–ä»£ç å®¡æŸ¥ã€‚</p>
<p>é€šè¿‡å®è·µè¿™ä¸¤ç§ç­–ç•¥å¹¶ç†è§£å®ƒä»¬çš„å½±å“ï¼Œä½ å¯ä»¥é¿å…ä»£ç å†²çªï¼Œä¿æŒé¡¹ç›®å†å²æ•´æ´ï¼Œæˆä¸ºæ›´é«˜æ•ˆçš„å¼€å‘è€…ã€‚é€‰æ‹©åˆé€‚çš„å·¥å…·ï¼Œç¥ä½ åœ¨ 2026 å¹´ç¼–ç æ„‰å¿«ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœ‰äº†MCPï¼Œä¸ºä»€ä¹ˆä½ è¿˜éœ€è¦skills]]></title>    <link>https://juejin.cn/post/7597266967138746402</link>    <guid>https://juejin.cn/post/7597266967138746402</guid>    <pubDate>2026-01-20T21:43:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597266967138746402" data-draft-id="7597326073671876623" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœ‰äº†MCPï¼Œä¸ºä»€ä¹ˆä½ è¿˜éœ€è¦skills"/> <meta itemprop="keywords" content="ç®—æ³•,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-20T21:43:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MobotStone"/> <meta itemprop="url" content="https://juejin.cn/user/3839909554568840"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœ‰äº†MCPï¼Œä¸ºä»€ä¹ˆä½ è¿˜éœ€è¦skills
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3839909554568840/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MobotStone
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T21:43:08.000Z" title="Tue Jan 20 2026 21:43:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘ Anthropic åˆåˆ·äº†ä¸€æ³¢å­˜åœ¨æ„Ÿã€‚ä½œä¸ºæœ€æ—©æŠŠ MCP è¿™ä¸ªæ¦‚å¿µå¸¦ç«çš„â€œå¼€æ‹“è€…â€ï¼Œä»–ä»¬æ˜¾ç„¶æ²¡æ‰“ç®—åœä¸‹æ¥ï¼šè¿™ä¸¤å¤©åˆæå‡ºäº†ä¸€ä¸ªæ–°æ¦‚å¿µï¼Œå«<strong>Skills</strong>ã€‚æ›´å…³é”®çš„æ˜¯ï¼ŒAnthropic è¿˜****æŠŠ<strong>Agent Skills</strong>ä»¥<strong>å¼€æ”¾æ ‡å‡†</strong>çš„å½¢å¼æ­£å¼å‘å¸ƒå‡ºæ¥äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01fa0aa50d8449268ae00839e113a909~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9ib3RTdG9uZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769550188&amp;x-signature=pCMQyKvkEyBg2kr6TUqt4z5kvbE%3D" alt="image.png" loading="lazy"/></p>
<p>ä¹ä¸€çœ‹ï¼ŒMCPï¼ˆæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰å’Œ Skills å°±åƒæ˜¯ç»™å¤§æ¨¡å‹è£…ä¸Šçš„å„ç§â€œå¤–æŒ‚â€æˆ–è€…â€œæ’ä»¶â€ã€‚æ—¢ç„¶å·²ç»æœ‰äº† MCP è¿™ç§èƒ½è®© AI è”ç½‘ã€è¯»æ•°æ®çš„æ ‡å‡†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦æå‡ºä¸€ä¸ªå« Skills çš„æ–°æ¦‚å¿µï¼Ÿè¿™åˆ°åº•æ˜¯æŠ€æœ¯çœŸçš„å‡çº§äº†ï¼Œè¿˜æ˜¯åˆä¸€æ¬¡â€œæ¢ä¸ªåå­—ç»§ç»­è®²â€çš„æ¦‚å¿µè†¨èƒ€ï¼Ÿ</p>
<p>å…¶å®ï¼ŒææŠ€æœ¯å¼€å‘çš„æ ¸å¿ƒç›®æ ‡å°±ä¸‰ä¸ªï¼šèƒ½ä¸èƒ½æ–¹ä¾¿æ‰©å±•ã€é ä¸é è°±ã€å€¼ä¸å€¼å¾—ï¼ˆæˆæœ¬æ˜¯å¦åˆ’ç®—ï¼‰ã€‚å¾ˆå¤šçœ‹èµ·æ¥â€œæ–°ä¸œè¥¿â€çš„å‡ºç°ï¼Œå…¶å®éƒ½æ˜¯å›´ç»•è¿™ä¸‰ç‚¹åœ¨ä¼˜åŒ–ã€‚</p>
<p>ä»è¿™ä¸ªè§’åº¦å‡ºå‘ï¼ŒSkills ä¹‹æ‰€ä»¥å‡ºç°ï¼Œæ˜¯å› ä¸ºç°æœ‰æ¶æ„åœ¨å®é™…è½åœ°æ—¶æš´éœ²äº†ä¸€äº›æ˜æ˜¾çš„ç—›ç‚¹ï¼Œè€Œå®ƒæ­£æ˜¯ç”¨æ¥é’ˆå¯¹è¿™äº›é—®é¢˜åšè¡¥é½å’Œæ”¹è¿›çš„ã€‚</p>
<h3 data-id="heading-0">ä¸ºä»€ä¹ˆæœ‰äº† MCPï¼Œè¿˜éœ€è¦ SKILLSï¼Ÿ</h3>
<p>ä¹‹æ‰€ä»¥åœ¨ MCP ç”Ÿæ€æ—¥æ¸æˆç†Ÿååˆå¼•å…¥ SKILLSï¼Œæ ¸å¿ƒåŸå› ä¸»è¦å½’ç»“äºä»¥ä¸‹ä¸¤ç‚¹ç°å®çº¦æŸä¸å®šä½ç¼ºå¤±ï¼š</p>
<p>MCP ç”Ÿæ€è¶Šæ¥è¶Šæˆç†Ÿä¹‹åï¼ŒMCP è™½ç„¶å¥½ç”¨ï¼Œä½†éšç€åŠŸèƒ½å˜å¼ºï¼Œå®ƒä¹Ÿå˜å¾—è¶Šæ¥è¶Šâ€œè‡ƒè‚¿â€ã€‚å¼•å…¥<strong>SKILLS</strong>ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸ºäº†ç»™æ¨¡å‹â€œå‡è´Ÿâ€å’Œâ€œçœé’±â€ã€‚</p>
<h4 data-id="heading-1">1) ç°å®é™åˆ¶ï¼šä¸Šä¸‹æ–‡çª—å£å®¹æ˜“â€œè¢«æ’‘çˆ†â€ï¼Œè¿˜æ˜¾å¾—ç¬¨é‡</h4>
<p>æ¯”å¦‚å‰æ®µæ—¶é—´æ¢ç´¢<strong>Playwright MCP</strong>ï¼Œ ç»™æ¨¡å‹åŠ ä¸Šæµè§ˆå™¨è‡ªåŠ¨åŒ–èƒ½åŠ›ã€‚ä¸ºäº†è®©æ¨¡å‹â€œä¼šç”¨â€è¿™ä¸ªå·¥å…·ï¼Œå¾€å¾€éœ€è¦åœ¨æç¤ºè¯/ä¸Šä¸‹æ–‡é‡Œå¡è¿›å¾ˆå¤šä¸œè¥¿ï¼š</p>
<ul>
<li>Playwright ä¸€å¤§å † API å®šä¹‰</li>
<li>å„ç§å‚æ•°ç»“æ„è¯´æ˜</li>
<li>ç”šè‡³è¿˜æœ‰å½“å‰é¡µé¢çš„ DOM æ ‘ä¿¡æ¯</li>
</ul>
<p>è¿™äº›å†…å®¹ä¸€å¤šï¼Œ<strong>ä¸Šä¸‹æ–‡çª—å£å¾ˆå¿«å°±è¢«å æ»¡</strong>ï¼Œç³»ç»Ÿä¹Ÿæ˜¾å¾—ç¬¨é‡ã€ä¸çµæ´»ã€‚</p>
<p>æ›´éº»çƒ¦çš„æ˜¯ï¼š<strong>å·¥å…·è°ƒç”¨è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ä¸­é—´ç»“æœä¹Ÿè¦å  token</strong>ã€‚åœ¨å…¸å‹çš„ MCP æµç¨‹é‡Œï¼Œæ¨¡å‹ä¸ä»…è¦åšå†³ç­–ï¼Œè¿˜å¸¸å¸¸è¦è´Ÿè´£â€œè½¬å‘/æ•´ç†æ•°æ®â€ï¼ˆæœ‰ç‚¹åƒæ•°æ®è·¯ç”±å™¨ï¼‰ï¼Œäºæ˜¯ä¸­é—´æ•°æ®æ¥æ¥å›å›ï¼Œtoken æ¶ˆè€—å°±è¢«æ”¾å¤§äº†ã€‚</p>
<p>å®˜æ–¹ä¸¾çš„ä¾‹å­ä¹Ÿèƒ½è¯´æ˜è¿™ä¸ªé—®é¢˜ï¼šå½“ä½ è®© Agent æ‰§è¡Œâ€œä» Google Drive ä¸‹è½½ä¼šè®®è®°å½•ï¼Œå¹¶æŠŠå®ƒé™„åŠ åˆ° Salesforce çš„çº¿ç´¢é‡Œâ€è¿™ç§è·¨å·¥å…·ä»»åŠ¡æ—¶ï¼Œè¿‡ç¨‹ä¸­ä¼šäº§ç”Ÿå¾ˆå¤šæ­¥éª¤å’Œä¸­é—´ä¿¡æ¯ï¼Œè€Œè¿™äº›éƒ½ä¼šæŒç»­æŒ¤å ä¸Šä¸‹æ–‡å’Œ token(å¤ªè´¹é’±äº†)ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e773a8b43b5b42858aaa73be09612a5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTW9ib3RTdG9uZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769550188&amp;x-signature=4nrqdTmn5n%2FZPLBWcXPyXCq9ilo%3D" alt="" loading="lazy"/></p>
<p>åœ¨ MCP è¿™ç§æ¨¡å¼é‡Œï¼Œæ•°æ®çš„ä¼ é€’æ–¹å¼è¯´ç™½äº†æœ‰ç‚¹åƒâ€œäººå·¥æ¬å®¶â€ï¼Œè€Œä¸”æ˜¯ç”¨æ‰‹æ‰›ç€ç€ä¸€æ•´å¥—æ²™å‘ä»ä¸€æ¥¼çˆ¬åˆ°äºŒåæ¥¼é‚£ç§ç¬¨åŠæ³•ï¼š</p>
<p><strong>(1ï¼‰è¯»å–æ—¶æ€ä¹ˆåšï¼š</strong> æ¨¡å‹å…ˆè°ƒç”¨ Drive å·¥å…·ï¼ŒDrive ä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€ï¼ŒæŠŠä¸€ä»½é•¿è¾¾ 2 ä¸‡å­—çš„ä¼šè®®çºªè¦<strong>æ•´ä»½</strong>å¡è¿›æ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£é‡Œã€‚</p>
<p><strong>(2ï¼‰å†™å…¥æ—¶æ€ä¹ˆåšï¼š</strong> æ¨¡å‹æŠŠè¿™ä»½é•¿æ–‡æ¡£è¯»å®Œåï¼Œåˆè°ƒç”¨ Salesforce å·¥å…·ï¼Œç„¶åæŠŠè¿™<strong>2 ä¸‡å­—åŸå°ä¸åŠ¨å½“ä½œå‚æ•°</strong>å†å¡è¿›å»ï¼Œé‡æ–°å‘é€ä¸€éã€‚</p>
<p>ç»“æœå°±æ˜¯ï¼š<strong>åˆè´µã€åˆå¡ã€è¿˜å®¹æ˜“å‡ºé”™ã€‚</strong></p>
<ul>
<li>
<p><strong>Token èŠ±è´¹ç¿»å€ï¼ˆè´µï¼‰ï¼š</strong></p>
<p>æ¯”å¦‚ä¸€åœº 2 å°æ—¶çš„é”€å”®ä¼šè®®ï¼Œè½¬å½•æ–‡æœ¬å¯èƒ½å°±æœ‰ 50,000 ä¸ª Tokenã€‚ç°åœ¨ç­‰äºâ€œè¿›ä¸€æ¬¡ã€å‡ºä¸€æ¬¡â€ï¼Œæ¨¡å‹è¦å¤„ç†ä¸¤éå¤§æ–‡æœ¬ï¼Œé¢å¤–å¤šåƒæ‰ 100,000+ Tokenï¼Œæˆæœ¬ç›´æ¥é£™å‡ã€‚</p>
</li>
<li>
<p><strong>ä¸Šä¸‹æ–‡å®¹æ˜“çˆ†æ‰ï¼ˆå¡ï¼‰ï¼š</strong></p>
<p>å°±ç®—æ˜¯æ”¯æŒé•¿ä¸Šä¸‹æ–‡çš„æ¨¡å‹ï¼Œé‡åˆ°æ›´å¤§çš„æ–‡æ¡£æˆ–æ›´å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œä¹Ÿå¯èƒ½ä¸€ä¸‹å­æŠŠçª—å£å¡æ»¡ï¼Œå¯¼è‡´æµç¨‹è·‘åˆ°ä¸€åŠç›´æ¥ä¸­æ–­ã€‚</p>
</li>
<li>
<p><strong>ç¨³å®šæ€§å˜å·®ï¼ˆé”™ï¼‰ï¼š</strong></p>
<p>æ¨¡å‹åœ¨â€œæ‰‹åŠ¨æ¬è¿â€æµ·é‡å†…å®¹æ—¶ï¼Œå°±åƒäºº copy-paste å¤§æ®µæ–‡å­—ä¸€æ ·ï¼Œå®¹æ˜“å‡ºç°<strong>å¹»è§‰ã€æ¼å†…å®¹ã€è¢«æˆªæ–­ã€æ ¼å¼ä¹±</strong>ç­‰é—®é¢˜ã€‚</p>
</li>
</ul>
<p>è¿™ç§åšæ³•ä¸ä»…è®© Token æ¶ˆè€—æš´æ¶¨ï¼ˆæˆæœ¬æ›´é«˜ï¼‰ï¼Œè¿˜ä¼šå› ä¸ºä¸Šä¸‹æ–‡å¤ªé•¿ã€ä¿¡æ¯å¤ªå¤šè€Œåˆ†æ•£æ¨¡å‹æ³¨æ„åŠ›ï¼Œè®©å®ƒåœ¨çœŸæ­£éœ€è¦æ€è€ƒçš„å…³é”®é€»è¾‘ä¸Šåè€Œâ€œå˜ç¬¨â€ã€‚</p>
<h4 data-id="heading-2">2). å®šä½ç¼ºå¤±ï¼šå·¥å…·å’Œæ–¹æ³•â€œæ²¡è¿èµ·æ¥â€</h4>
<p>MCP çš„æ ¸å¿ƒä½œç”¨ï¼Œæ˜¯æŠŠâ€œæ€ä¹ˆè°ƒç”¨å·¥å…·â€è¿™ä»¶äº‹ç»Ÿä¸€æˆä¸€å¥—æ ‡å‡†åè®®ã€‚å®ƒæœ€åˆè¦è§£å†³çš„é—®é¢˜å¾ˆç°å®ï¼šå¦‚æœæœ‰Nä¸ªæ¨¡å‹ã€M ä¸ªå·¥å…·ï¼Œä¸¤ä¸¤é€‚é…ä¼šå˜å¾—ç‰¹åˆ«å¤æ‚ã€‚</p>
<p>ä½†é—®é¢˜åœ¨äºï¼šMCP åªè§„å®šäº†â€œæ‰‹æ€ä¹ˆç”¨å·¥å…·â€ï¼ˆè°ƒç”¨æ–¹å¼ï¼‰ï¼Œå´æ²¡è§„å®šâ€œè„‘å­æ€ä¹ˆæŠŠäº‹æƒ…åšå®Œâ€ï¼ˆä¸šåŠ¡æµç¨‹/SOP æ€ä¹ˆç¼–æ’ï¼‰ã€‚</p>
<p>æ‰€ä»¥åœ¨å½“å‰å¸¸è§æ¶æ„é‡Œï¼Œå°±ç®— Difyã€n8n è¿™ç±»å¹³å°èƒ½å¾ˆæ–¹ä¾¿æŠŠ MCP æ¥è¿›æ¥å½“â€œå·¥å…·åº“â€ï¼ŒçœŸæ­£çš„ä¸šåŠ¡é€»è¾‘å¾€å¾€è¿˜æ˜¯ï¼š</p>
<ul>
<li>è—åœ¨å¤§æ¨¡å‹çš„â€œéšæ€§ç»éªŒâ€é‡Œï¼ˆé æ¨¡å‹ä¸´åœºå‘æŒ¥ï¼‰ï¼Œæˆ–</li>
<li>å†™æ­»åœ¨äººå·¥é…ç½®/ç¡¬ç¼–ç çš„å·¥ä½œæµé‡Œã€‚</li>
</ul>
<p>ç»“æœå°±æ˜¯ï¼šå·¥å…·æœ¬èº«æ˜¯â€œè¢«åŠ¨æä¾›èƒ½åŠ›â€çš„ï¼Œä½†â€œæ€ä¹ˆç»„åˆè¿™äº›å·¥å…·å®Œæˆå¤æ‚ä»»åŠ¡â€ï¼Œç¼ºå°‘ä¸€ä¸ªç»Ÿä¸€ã€æ ‡å‡†çš„æ‰¿è½½æ–¹å¼ã€‚</p>
<h4 data-id="heading-3">3). æ€ä¹ˆè¡¥è¿™ä¸ªç©ºï¼ŸAnthropic ç”¨ Skills ç»™å‡ºç­”æ¡ˆ</h4>
<p>ä¸ºäº†è§£å†³â€œæœ‰å·¥å…·ä½†ç¼ºæµç¨‹æ ‡å‡†â€çš„é—®é¢˜ï¼ŒAnthropic æå‡ºäº†<strong>Skillsï¼ˆæŠ€èƒ½ï¼‰</strong> ã€‚</p>
<p>ä½ å¯ä»¥æŠŠ Skill ç†è§£æˆï¼š<strong>æŠŠæŸä»¶äº‹åšå¥½çš„æ ‡å‡†æ“ä½œæ–¹æ³•ï¼ˆSOPï¼‰æ‰“åŒ…æˆä¸€ä¸ªå¯å¤ç”¨æ¨¡å—</strong>ã€‚</p>
<p>æ‰“ä¸ªæ¯”æ–¹ï¼š</p>
<ul>
<li>å¤§æ¨¡å‹åƒå¨å¸ˆï¼Œ</li>
<li>å·¥å…·åƒé”…ç¢—ç“¢ç›†å’Œç¶å°ï¼Œ</li>
<li>Skill å°±åƒä¸€é“èœçš„â€œæ ‡å‡†èœè°±â€ï¼šä»€ä¹ˆæ—¶å€™åˆ‡èœã€å…ˆç‚’ä»€ä¹ˆã€ç«å€™å¤šå°‘ã€ç”¨å“ªäº›å¨å…·â€”â€”éƒ½å†™æ¸…æ¥šã€‚</li>
</ul>
<p>å› æ­¤ï¼ŒSkill çš„æœ¬è´¨æ˜¯<strong>æ ‡å‡†åŒ–çš„ SOP æ²‰æ·€</strong>ï¼šä¸ä»…è¯´æ˜â€œè¦åšä»€ä¹ˆâ€ï¼Œè¿˜æŠŠâ€œæ€ä¹ˆåšã€éœ€è¦å“ªäº›èµ„æºâ€ä¸€èµ·å°è£…è¿›å»ã€‚</p>
<p>å¯¹æ¯”ä¸€ä¸‹å˜åŒ–ä¼šæ›´ç›´è§‚ï¼š</p>
<ul>
<li><strong>è¿‡å»</strong>ï¼šå› ä¸ºæ¨¡å‹ç†è§£æœ‰é™ï¼Œä¸šåŠ¡æµç¨‹é€šå¸¸åªèƒ½ç”¨ Python/JS æˆ– Dify çš„ YAML è¿™ç±»æ–¹å¼â€œç¡¬ç¼–ç â€å‡ºæ¥ã€‚</li>
<li><strong>ç°åœ¨</strong>ï¼šæ¨¡å‹ç†è§£åŠ›æ›´å¼ºåï¼Œå¾ˆå¤šæµç¨‹å¯ä»¥ç›´æ¥ç”¨è‡ªç„¶è¯­è¨€æè¿°ï¼›éç¨‹åºå‘˜ä¹Ÿèƒ½æŠŠè‡ªå·±çš„ç»éªŒå›ºåŒ–æˆå¯å¤ç”¨çš„æµç¨‹æ¨¡å—ã€‚ç±»ä¼¼æ€è·¯æ—©æœŸåœ¨ OpenAI çš„ GPTs ä¸Šå‡ºç°è¿‡ï¼Œä½† Skill æ›´å¼ºè°ƒâ€œå·¥ç¨‹åŒ–ä¸æ ‡å‡†åŒ–â€â€”â€”ä¸å±€é™åœ¨æŸä¸ªèŠå¤©äº§å“é‡Œï¼Œè€Œæ˜¯èƒ½æˆä¸º Agent å¯è°ƒç”¨çš„åŸºç¡€èƒ½åŠ›å•å…ƒã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-4">æ ¸å¿ƒç†å¿µï¼šåˆ«ä¸€è‚¡è„‘å¡ç»™ AIï¼Œè¦â€œæŒ‰éœ€æŠ•å–‚â€</h3>
<p>è™½ç„¶ç°åœ¨çš„ AI è®°æ€§è¶Šæ¥è¶Šå¥½ï¼ˆä¸Šä¸‹æ–‡çª—å£å˜å¤§ï¼‰ï¼Œä½†å¦‚æœä½ æŠŠæˆå¨çš„ä¿¡æ¯ä¸€æ¬¡æ€§å…¨å€’ç»™å®ƒï¼ŒAI ä¹Ÿä¼šâ€œå¤§è„‘è¿‡è½½â€ï¼Œä¸ä»…å®¹æ˜“èƒ¡è¨€ä¹±è¯­ã€æŠ“ä¸ä½é‡ç‚¹ï¼Œè€Œä¸”è¿˜ç‰¹åˆ«è´¹é’±ã€‚</p>
<p>æ‰€ä»¥ï¼ŒSkill çš„è®¾è®¡æ€è·¯å°±åƒ**â€œå‰¥æ´‹è‘±â€<strong>æˆ–è€…</strong>â€œçœ‹èœå•â€**ï¼š<strong>ä¸é—®ä¸ç»™ï¼Œé—®åˆ°å“ªå±‚ç»™å“ªå±‚</strong>ã€‚è¿™ç§ä¸“ä¸šæœ¯è¯­å«â€œæ¸è¿›å¼æŠ«éœ²â€ï¼Œè¯´ç™½äº†å°±æ˜¯ï¼š<strong>åªåœ¨æœ€éœ€è¦çš„æ—¶å€™ï¼Œç»™æœ€å…³é”®çš„ä¿¡æ¯ã€‚</strong></p>
<p>ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼ŒSkill æŠŠä¿¡æ¯åˆ†æˆäº†ä¸‰å±‚ï¼š</p>
<h4 data-id="heading-5">ç¬¬ä¸€å±‚ï¼šåº—æ‹›/åç‰‡ï¼ˆå…ƒæ•°æ®å±‚ â€”â€” å§‹ç»ˆäº®ç€ï¼‰</h4>
<ul>
<li><strong>ä½œç”¨ï¼š</strong> å‘Šè¯‰ AI â€œæˆ‘æ˜¯å¹²å˜›çš„â€ã€‚</li>
<li><strong>å†…å®¹ï¼š</strong> åªæœ‰æŠ€èƒ½çš„åå­—å’Œä¸€å¥è¯ç®€ä»‹ã€‚</li>
<li><strong>å¥½å¤„ï¼š</strong> å°±åƒåº—é—¨å£çš„æ‹›ç‰Œï¼ŒAI ä¸€çœ¼å°±èƒ½æ‰«åˆ°ï¼Œå ç”¨çš„â€œè„‘åŠ›â€ï¼ˆTokenï¼‰æå°‘ï¼Œéå¸¸çœé’±ã€‚</li>
</ul>
<h4 data-id="heading-6">ç¬¬äºŒå±‚ï¼šæ“ä½œæ‰‹å†Œï¼ˆæŒ‡ä»¤å±‚ â€”â€” é€‰ä¸­åå†çœ‹ï¼‰</h4>
<ul>
<li><strong>ä½œç”¨ï¼š</strong> å‘Šè¯‰ AI â€œè¿™äº‹å„¿å…·ä½“æ€ä¹ˆåŠâ€ã€‚</li>
<li>**å†…å®¹ï¼š**è¯¦ç»†çš„æ­¥éª¤ã€è§„çŸ©å’Œå·¥ä½œæµç¨‹ï¼ˆæ¯”å¦‚<code>SKILL.md</code> æ–‡ä»¶ï¼‰ã€‚</li>
<li><strong>å¥½å¤„ï¼š</strong> åªæœ‰å½“ AI ç¡®å®šè¦ç”¨è¿™ä¸ªæŠ€èƒ½æ—¶ï¼Œæ‰ä¼šå»è¯»è¿™ä»½æ‰‹å†Œã€‚è¿™æ ·å®ƒèƒ½é›†ä¸­æ³¨æ„åŠ›ï¼ŒæŠŠäº‹å„¿åŠå¾—æ›´ç¨³å¦¥ã€‚</li>
</ul>
<h4 data-id="heading-7">ç¬¬ä¸‰å±‚ï¼šå·¥å…·ç®±/å¤§ä»“åº“ï¼ˆèµ„æºå±‚ â€”â€” å¹²æ´»æ—¶æ‰å¼€ï¼‰</h4>
<ul>
<li><strong>ä½œç”¨ï¼š</strong> ç»™ AI çœŸæ­£å¹²æ´»ç”¨çš„â€œåŸææ–™â€ã€‚</li>
<li><strong>å†…å®¹ï¼š</strong> å¤æ‚çš„ä»£ç è„šæœ¬ã€åšåšçš„å‚è€ƒæ–‡æ¡£ã€åºå¤§çš„æ•°æ®æ¨¡æ¿ã€‚</li>
<li><strong>å¥½å¤„ï¼š</strong> è¿™æ˜¯æœ€å å†…å­˜ã€æœ€è´¹é’±çš„éƒ¨åˆ†ã€‚æ‰€ä»¥ï¼Œåªæœ‰å½“ AI çœŸæ­£å¼€å§‹åŠ¨æ‰‹å¹²æ´»ã€éç”¨ä¸å¯æ—¶ï¼Œæ‰ä¼šå»ä»“åº“é‡Œå–ã€‚</li>
</ul>
<h3 data-id="heading-8">Skill çš„æ ‡å‡†ç»“æ„ï¼šä¸€ä¸ªæœ‰åºçš„â€œå·¥ä½œé—´â€</h3>
<p>ä¸€ä¸ªæ ‡å‡†çš„ Skill é€šå¸¸ä¼šæŒ‰â€œæ–‡ä»¶å¤¹ + æ–‡ä»¶â€çš„æ–¹å¼æ¥ç»„ç»‡ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³æˆï¼š<strong>ä¸€ä¸ªæŠ€èƒ½åŒ…</strong>ï¼Œé‡Œé¢æŠŠâ€œè¯´æ˜ä¹¦ã€å·¥å…·ã€èµ„æ–™ã€ç´ æâ€åˆ†é—¨åˆ«ç±»æ”¾å¥½ï¼Œç»“æ„å¤§æ¦‚æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-keyword">my</span>-skill/
â”œâ”€â”€ SKILL.md Â  Â  Â  Â  Â <span class="hljs-comment"># [å¿…éœ€] æ ¸å¿ƒå¤§è„‘ã€‚åŒ…å«å…ƒæ•°æ®ï¼ˆnameã€descriptionï¼‰å’Œè‡ªç„¶è¯­è¨€ç¼–å†™çš„æŒ‡ä»¤æµç¨‹</span>
â”œâ”€â”€ scripts/ Â  Â  Â  Â  Â <span class="hljs-comment"># [å¯é€‰] æ‰§è¡Œæ‰‹è„šã€‚å­˜æ”¾ Python/Bash ç­‰å¯æ‰§è¡Œä»£ç ï¼Œå°è£…å¤æ‚é€»è¾‘</span>
â”œâ”€â”€ references/ Â  Â  Â  <span class="hljs-comment"># [å¯é€‰] çŸ¥è¯†åº“ã€‚å­˜æ”¾æ¨¡å‹å†³ç­–æ‰€éœ€çš„å‚è€ƒæ–‡æ¡£ã€API æ‰‹å†Œç­‰</span>
â””â”€â”€ assets/ Â  Â  Â  Â  Â  <span class="hljs-comment"># [å¯é€‰] é™æ€èµ„æºã€‚å­˜æ”¾è¾“å‡ºæŠ¥å‘Šæ‰€éœ€çš„æ¨¡æ¿ã€å›¾ç‰‡ã€ç¤ºä¾‹æ•°æ®ç­‰</span>
</code></pre>
<p>è¿™ç§åˆ†å±‚è®¾è®¡æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</p>
<ul>
<li>
<p><strong>æ›´çœ Tokenã€ä¸Šä¸‹æ–‡æ›´â€œå¹²å‡€â€</strong></p>
<p>æ¨¡å‹ä¸ä¼šä¸€ä¸Šæ¥å°±æŠŠæ‰€æœ‰å†…å®¹éƒ½è¯»è¿›æ¥ï¼š</p>
<p>å…ˆåªçœ‹<code>SKILL.md</code>é‡Œçš„å…ƒä¿¡æ¯æ¥åˆ¤æ–­â€œè¦ä¸è¦ç”¨è¿™ä¸ªæŠ€èƒ½â€ï¼›å†³å®šè¦ç”¨ä¹‹åå†è¯»å…·ä½“æµç¨‹ï¼›çœŸæ­£æ‰§è¡Œæ—¶æ‰å»åŠ è½½<code>scripts</code>æˆ–<code>references</code>ã€‚</p>
<p>è¿™æ ·å¯ä»¥æœ‰æ•ˆé¿å…ä¸Šä¸‹æ–‡è¶Šå †è¶Šå¤§ã€‚</p>
<p>ä¹Ÿèƒ½è§£å†³â€œä¸­é—´å·¥å…·ç»“æœæŠŠ token åƒå…‰â€çš„é—®é¢˜ï¼šåœ¨ Skill æ¨¡å¼ä¸‹ï¼Œæ¨¡å‹æ›´å¤šæ˜¯<strong>ä¸‹æŒ‡ä»¤è®©è„šæœ¬å»å¹²æ´»</strong>ï¼Œæ¯”å¦‚è„šæœ¬ç›´æ¥ä» Google Drive æ‹‰æ•°æ®å¹¶å†™è¿› Salesforceï¼Œå¤§æ®µä¼šè®®è®°å½•æ ¹æœ¬ä¸éœ€è¦å¡è¿›æ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£ã€‚</p>
</li>
<li>
<p><strong>æ›´ç¨³å®šã€æ›´ä¸å®¹æ˜“å‡ºé”™ï¼ˆé²æ£’æ€§æ›´å¼ºï¼‰</strong></p>
<p>æŠŠå¤æ‚ã€å¸¸ç”¨ã€å®¹æ˜“è¸©å‘çš„æ“ä½œå°è£…è¿›<code>scripts</code>ï¼Œå°±ä¸éœ€è¦æ¨¡å‹æ¯æ¬¡éƒ½â€œç°åœºå†™ä»£ç ã€ç°åœºè°ƒè¯•â€ã€‚</p>
<p>ç»“æœå°±æ˜¯ï¼š<strong>å¹»è§‰æ›´å°‘ã€é”™è¯¯æ›´å°‘ã€æ‰§è¡Œæ›´ä¸€è‡´</strong>ã€‚</p>
<p>è¿™ä¹Ÿç¬¦åˆå¾ˆå¤šå·¥å…·å‹äº§å“çš„æ€è·¯ï¼šæŠŠé«˜é¢‘ä¸”å®¹æ˜“é”™çš„éƒ¨åˆ†å›ºåŒ–æˆâ€œå·¥å…·/ä»£ç â€ï¼ŒæŠŠéœ€è¦çµæ´»åˆ¤æ–­çš„éƒ¨åˆ†ç•™ç»™æ¨¡å‹æ¥åšã€‚</p>
</li>
</ul>
<h3 data-id="heading-9">ç®€å•ä¸‰æ­¥ï¼Œä¸Šæ‰‹ä½¿ç”¨ Skill</h3>
<p>ä½¿ç”¨ Skill çš„è¿‡ç¨‹éå¸¸ç›´è§‚ï¼Œå°±åƒç»™ä½ çš„ AI åŠ©æ‰‹å®‰è£…äº†ä¸€ä¸ªâ€œåŠŸèƒ½æ’ä»¶â€ã€‚</p>
<h4 data-id="heading-10">1). æ€ä¹ˆå®‰è£…ï¼Ÿ</h4>
<p>ä½ ä¸éœ€è¦å¤æ‚çš„é…ç½®ï¼Œåªéœ€è¦æŠŠå†™å¥½çš„<code>skills</code>æ–‡ä»¶å¤¹ï¼Œåƒæ”¾æ–‡ä»¶ä¸€æ ·ä¸¢è¿›ç‰¹å®šçš„ç›®å½•å³å¯ã€‚</p>
<p>é€šå¸¸æœ‰ä¸¤ä¸ªåœ°æ–¹å¯ä»¥é€‰æ‹©ï¼š</p>
<ul>
<li><strong>å…¨å±€æœ‰æ•ˆï¼š</strong> æ”¾åœ¨ä½ ç”µè„‘çš„ç”¨æˆ·ç›®å½•ä¸‹ã€‚</li>
<li>**é¡¹ç›®æœ‰æ•ˆï¼š**æ”¾åœ¨ä½ å½“å‰å·¥ä½œé¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œè·¯å¾„é€šå¸¸æ˜¯<code>.claude/skills</code>ã€‚</li>
</ul>
<h4 data-id="heading-11">2). æ€ä¹ˆè¿è¡Œï¼Ÿ</h4>
<p>å¦‚æœä½ ä¹ æƒ¯ç”¨å‘½ä»¤è¡Œï¼Œç›´æ¥ä½¿ç”¨<strong>Claude Code</strong>å·¥å…·å°±èƒ½è°ƒç”¨ã€‚å¦‚æœä½ æ›´å–œæ¬¢åœ¨ç¼–è¯‘å™¨é‡Œæ“ä½œï¼Œæ¯”å¦‚<strong>Cursor</strong>æˆ–<strong>VS Code</strong>ï¼Œåªè¦ç¬¦åˆæ–‡ä»¶è§„èŒƒï¼ŒAI å°±èƒ½è‡ªåŠ¨è¯†åˆ«å¹¶å­¦ä¼šè¿™ä¸ªæ–°æŠ€èƒ½ã€‚</p>
<h4 data-id="heading-12">3). ä¸¾ä¸ªä¾‹å­ï¼šåšä¸€ä»½çº¢çƒ§è‚‰</h4>
<p>å¼€å‘ä¸€ä¸ª Skill åˆ°åº•æœ‰å¤šç®€å•ï¼Ÿä»¥â€œæ•™ AI åšçº¢çƒ§è‚‰â€ä¸ºä¾‹ï¼šä½ åªéœ€è¦å†™æ¸…æ¥šæ­¥éª¤å’Œé€»è¾‘ï¼Œä¿å­˜æˆæ–‡ä»¶å³å¯ã€‚</p>
<p>è¿™ç§æ–¹å¼å¸¦æ¥äº†ä¸€ä¸ªå·¨å¤§çš„å˜åŒ–â€”â€” <strong>â€œé…ç½®å³ä»£ç â€</strong> ï¼š</p>
<ul>
<li><strong>ä»¥å‰ï¼š</strong> ä½ å¯èƒ½éœ€è¦åœ¨ Dify è¿™ç§å¯è§†åŒ–å¹³å°ä¸Šï¼Œåƒè¿è¿çœ‹ä¸€æ ·æ‹‰å¾ˆå¤šçº¿æ¡ã€ç‚¹å¾ˆå¤šæŒ‰é’®æ¥è®¾è®¡å·¥ä½œæµã€‚</li>
<li><strong>ç°åœ¨ï¼š</strong> ä½ åªéœ€è¦å†™ä¸€æ®µç»“æ„åŒ–çš„æ–‡å­—ï¼ˆä»£ç ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-13">è¿™æ ·åšæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</h4>
<ul>
<li><strong>ç®¡ç†æ–¹ä¾¿ï¼š</strong> åƒç®¡ç†ä»£ç æ–‡ä»¶ä¸€æ ·ï¼Œä½ å¯ä»¥éšæ—¶æŸ¥çœ‹ä¿®æ”¹è®°å½•ï¼ˆç‰ˆæœ¬ç®¡ç†ï¼‰ã€‚</li>
<li><strong>è½»æ¾åˆ†äº«ï¼š</strong> æŠŠæ–‡ä»¶å‘ç»™åŒäº‹ï¼Œä»–ç²˜è´´åˆ°æ–‡ä»¶å¤¹é‡Œå°±èƒ½ç›´æ¥ç”¨ã€‚</li>
<li><strong>éšå¤„å¤ç”¨ï¼š</strong> åŒæ ·çš„åŠŸèƒ½ï¼Œå¯ä»¥åœ¨ä¸åŒçš„é¡¹ç›®ä¸­æ— ç¼åˆ‡æ¢ã€‚</li>
</ul>
<p>å°±ä¸€å¥è¯ï¼ŒSkill è®© AI çš„èƒ½åŠ›å˜å¾—â€œæ¨¡å—åŒ–â€äº†â€”â€”<strong>å†™å®Œå³ç”¨ï¼Œå¤åˆ¶å³å­¦ä¼šã€‚</strong></p>
<h3 data-id="heading-14">åè®°</h3>
<p>è¿™å‡ ä¸ªæœˆé‡Œï¼Œå¼€å‘è€…ç¤¾åŒºä¸€ç›´åœ¨åˆ†äº«å„ç§ MCP å·¥å…·ï¼Œå¤§å®¶ä¸»è¦æ˜¯åœ¨è§£å†³â€œæ€ä¹ˆæŠŠæ‰‹ä¼¸å‡ºå»å¹²æ´»â€çš„é—®é¢˜â€”â€”ä¹Ÿå°±æ˜¯è®©æ¨¡å‹èƒ½è°ƒç”¨å·¥å…·ã€è®¿é—®èµ„æºã€å®Œæˆå…·ä½“æ“ä½œã€‚</p>
<p>ä½†ä»ç°åœ¨å¼€å§‹ã€ä»¥åŠæ¥ä¸‹æ¥ä¸€æ®µæ—¶é—´ï¼Œ<strong>Skill å¾ˆå¯èƒ½ä¼šæˆä¸ºçš„æ–¹å‘</strong>ã€‚å› ä¸ºå®ƒä¸åªè§£å†³â€œæ‰‹â€ï¼Œæ›´åœ¨è§£å†³ä¸¤ä»¶æ›´å…³é”®çš„äº‹ï¼š<strong>æ€ä¹ˆæ€è€ƒï¼ˆè„‘ï¼‰</strong> ï¼Œä»¥åŠ<strong>æ€ä¹ˆæŠŠäº‹æƒ…æŒ‰æ­¥éª¤åšå®Œï¼ˆæµç¨‹ï¼‰</strong> ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼ŒSkill ä¸åªæ˜¯æŠŠå·¥å…·å’Œèµ„æºâ€œæ”¶çº³èµ·æ¥â€ï¼Œå®ƒè¿˜èƒ½æŠŠä¸€å¥—åšäº‹æ–¹æ³•<strong>æ ‡å‡†åŒ–ã€æµç¨‹åŒ–</strong>ã€‚å½“å¤§æ¨¡å‹çš„æ¨ç†èƒ½åŠ›è¶Šæ¥è¶Šå¼ºï¼ŒSkill å°±åƒè¡¥ä¸Šäº†â€œè‡ªä¸»æ™ºèƒ½ä½“â€æ‹¼å›¾é‡Œé‚£å—æœ€å…³é”®çš„ç¼ºå£â€”â€”è®©å®ƒä¸æ­¢ä¼šåšäº‹ï¼Œè¿˜ä¼š<strong>æŒ‰æ­£ç¡®çš„æ–¹æ³•æŒç»­æŠŠäº‹åšæˆ</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ConvertX:ä¸€ç«™å¼è‡ªæ‰˜ç®¡åœ¨çº¿æ–‡ä»¶è½¬æ¢å¹³å°,æ”¯æŒä¸Šåƒç§æ ¼å¼]]></title>    <link>https://juejin.cn/post/7597283981185302580</link>    <guid>https://juejin.cn/post/7597283981185302580</guid>    <pubDate>2026-01-20T15:27:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597283981185302580" data-draft-id="7597326073671696399" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ConvertX:ä¸€ç«™å¼è‡ªæ‰˜ç®¡åœ¨çº¿æ–‡ä»¶è½¬æ¢å¹³å°,æ”¯æŒä¸Šåƒç§æ ¼å¼"/> <meta itemprop="keywords" content="å¼€æº"/> <meta itemprop="datePublished" content="2026-01-20T15:27:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¿®å·±xj"/> <meta itemprop="url" content="https://juejin.cn/user/2641475936724142"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ConvertX:ä¸€ç«™å¼è‡ªæ‰˜ç®¡åœ¨çº¿æ–‡ä»¶è½¬æ¢å¹³å°,æ”¯æŒä¸Šåƒç§æ ¼å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2641475936724142/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¿®å·±xj
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T15:27:48.000Z" title="Tue Jan 20 2026 15:27:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æ˜¯å¦æ›¾ç»ä¸ºäº†è½¬æ¢ä¸€ä¸ªæ–‡ä»¶æ ¼å¼ï¼Œåœ¨ç”µè„‘ä¸Šå®‰è£…å„ç§è‡ƒè‚¿çš„è½¯ä»¶ï¼Œæˆ–è€…å°†æ•æ„Ÿæ–‡ä»¶ä¸Šä¼ åˆ°ç¬¬ä¸‰æ–¹åœ¨çº¿è½¬æ¢ç½‘ç«™ï¼Ÿå¦‚æœä½ æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªæ—¢èƒ½ä¿æŠ¤éšç§ã€åˆèƒ½æ»¡è¶³å¤šæ ·åŒ–è½¬æ¢éœ€æ±‚çš„è‡ªæ‰˜ç®¡è§£å†³æ–¹æ¡ˆï¼Œé‚£ä¹ˆ <strong>ConvertX</strong> å°±æ˜¯ä¸ºä½ é‡èº«æ‰“é€ çš„å·¥å…·ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15f6b2448cc9445f9d75f3b7a3f5422c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527667&amp;x-signature=lL6fsv%2F5SE66WalF0UHKsf9psT8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">ğŸ’¥ä»€ä¹ˆæ˜¯ ConvertXï¼Ÿ</h2>
<p>ConvertX æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„è‡ªæ‰˜ç®¡åœ¨çº¿æ–‡ä»¶è½¬æ¢å™¨ã€‚å®ƒæœ€å¤§çš„äº®ç‚¹æ˜¯ <strong>æ”¯æŒè¶…è¿‡ä¸€åƒç§ä¸åŒçš„æ–‡ä»¶æ ¼å¼è½¬æ¢</strong>ï¼Œæ¶µç›–äº†æ–‡æ¡£ã€å›¾åƒã€è§†é¢‘ã€ç”µå­ä¹¦ã€3Dæ¨¡å‹ç­‰å¤šç§ç±»å‹ã€‚è¯¥é¡¹ç›®é‡‡ç”¨ TypeScriptã€Bun å’Œ Elysia ç­‰ç°ä»£æŠ€æœ¯æ ˆå¼€å‘ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªå®‰å…¨ã€é«˜æ•ˆã€å¯å®Œå…¨æŒæ§çš„æœ¬åœ°åŒ–æ–‡ä»¶å¤„ç†ä¸­å¿ƒã€‚</p>
<p>githubåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FC4illin%2FConvertX" target="_blank" title="https://github.com/C4illin/ConvertX" ref="nofollow noopener noreferrer">github.com/C4illin/Conâ€¦</a></p>
<p>è¯¥é¡¹ç›®åœ¨github å·²æœ‰15.3k â­star</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd5050a58bae45e2b6d5def2beb1f798~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527667&amp;x-signature=%2F6IX8CnFDJs6nnPqDKgI%2Bi%2BtU%2F0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">â˜€ï¸ æ ¸å¿ƒç‰¹æ€§</h2>
<ul>
<li><strong>æµ·é‡æ ¼å¼æ”¯æŒï¼š</strong> æ”¯æŒä¸Šåƒç§æ ¼å¼äº’è½¬ï¼Œå‡ ä¹èƒ½æ»¡è¶³æ‰€æœ‰æ—¥å¸¸åŠä¸“ä¸šéœ€æ±‚ã€‚</li>
<li><strong>æ‰¹é‡å¤„ç†ï¼š</strong> å¯ä»¥ä¸€æ¬¡æ€§ä¸Šä¼ å¹¶è½¬æ¢å¤šä¸ªæ–‡ä»¶ï¼Œæ˜¾è‘—æå‡å·¥ä½œæ•ˆç‡ã€‚</li>
<li><strong>éšç§å®‰å…¨ï¼š</strong> è‡ªæ‰˜ç®¡æ„å‘³ç€ä½ çš„æ–‡ä»¶æ•°æ®æ°¸è¿œä¸ä¼šç¦»å¼€ä½ è‡ªå·±çš„æœåŠ¡å™¨ï¼Œéå¸¸é€‚åˆå¤„ç†æ•æ„Ÿæˆ–æœºå¯†æ–‡æ¡£ã€‚</li>
<li><strong>å¤šç”¨æˆ·è´¦æˆ·ï¼š</strong> æ”¯æŒä¸ºå›¢é˜Ÿæˆå‘˜æˆ–å®¶åº­æˆå‘˜åˆ›å»ºç‹¬ç«‹çš„è´¦æˆ·ï¼Œå…±äº«æœåŠ¡åˆä¿æŒä¸ªäººæ–‡ä»¶å†å²éš”ç¦»ã€‚</li>
<li><strong>å¼€æºå…è´¹ï¼š</strong> å®Œå…¨å¼€æºï¼Œä»£ç é€æ˜ï¼Œå¯è‡ªç”±éƒ¨ç½²å’Œä¿®æ”¹ã€‚</li>
</ul>
<h2 data-id="heading-2">ğŸ å¼ºå¤§çš„è½¬æ¢å¼•æ“é˜µå®¹</h2>
<p>ConvertX çš„å¼ºå¤§èƒ½åŠ›æºäºå…¶èƒŒåæ•´åˆçš„ä¼—å¤šä¸šç•ŒçŸ¥åçš„å¼€æºè½¬æ¢å·¥å…·ï¼Œå®ƒä»¬å…±åŒæ„æˆäº†ä¸€ä¸ªè¶…çº§è½¬æ¢å·¥å‚ï¼š</p>

































































<table><thead><tr><th>å·¥å…·</th><th>ç”¨é€”</th><th>æ”¯æŒè¾“å…¥æ ¼å¼æ•°</th><th>æ”¯æŒè¾“å‡ºæ ¼å¼æ•°</th></tr></thead><tbody><tr><td><strong>FFmpeg</strong></td><td>éŸ³è§†é¢‘å¤„ç†</td><td>~472ç§</td><td>~199ç§</td></tr><tr><td><strong>ImageMagick / GraphicsMagick</strong></td><td>å›¾åƒå¤„ç†</td><td>412ç§</td><td>313ç§</td></tr><tr><td><strong>LibreOffice</strong></td><td>åŠå…¬æ–‡æ¡£</td><td>41ç§</td><td>22ç§</td></tr><tr><td><strong>Pandoc</strong></td><td>æ–‡æ¡£æ ¼å¼ï¼ˆå¦‚Markdownï¼‰</td><td>43ç§</td><td>65ç§</td></tr><tr><td><strong>Calibre</strong></td><td>ç”µå­ä¹¦</td><td>26ç§</td><td>19ç§</td></tr><tr><td><strong>Inkscape</strong></td><td>çŸ¢é‡å›¾å½¢</td><td>7ç§</td><td>17ç§</td></tr><tr><td><strong>Assimp</strong></td><td>3Dæ¨¡å‹èµ„äº§</td><td>77ç§</td><td>23ç§</td></tr><tr><td><strong>Vips / libheif / libjxl</strong></td><td>é«˜æ€§èƒ½å›¾åƒä¸HEIF/JPEG XLæ ¼å¼</td><td>58ç§</td><td>38ç§</td></tr><tr><td>... ä»¥åŠæ›´å¤š</td><td>åŒ…æ‹¬ SVGã€LaTeXã€Outlooké‚®ä»¶ã€è”ç³»äººæ–‡ä»¶ç­‰</td><td/><td/></tr></tbody></table>
<p>è¿™ä¸ªåˆ—è¡¨æ¸…æ™°åœ°å±•ç¤ºäº† ConvertX çš„æ ¼å¼è¦†ç›–å¹¿åº¦ã€‚æ— è®ºæ˜¯å¸¸è§çš„ <code>.pdf</code>ã€<code>.docx</code>ã€<code>.mp4</code>ã€<code>.jpg</code>ï¼Œè¿˜æ˜¯ç›¸å¯¹å°ä¼—çš„æ ¼å¼ï¼Œå®ƒéƒ½æœ‰å¾ˆå¤§å¯èƒ½æ”¯æŒã€‚</p>
<h2 data-id="heading-3">ğŸï¸å¿«é€Ÿéƒ¨ç½²æŒ‡å—</h2>
<p>ä½¿ç”¨ Docker éƒ¨ç½² ConvertX æ˜¯æå…¶ç®€å•çš„è¿‡ç¨‹ï¼Œåªéœ€å‡ åˆ†é’Ÿå³å¯æ‹¥æœ‰è‡ªå·±çš„è½¬æ¢æœåŠ¡ã€‚</p>
<ol>
<li><strong>å‡†å¤‡ <code>docker-compose.yml</code> æ–‡ä»¶ï¼š</strong></li>
</ol>

<pre><code class="hljs language-ini" lang="ini">services:
  convertx:
  <span class="hljs-comment"># æ­¤æœåŠ¡çš„é•œåƒ3.59GBï¼Œå›½å†…ä¸‹è½½æ¯”è¾ƒæ…¢ï¼Œéœ€è¦çš„å®¶äººä»¬å¯ä»¥ä½¿ç”¨æˆ‘è½¬å­˜é˜¿é‡Œäº‘é•œåƒä»“åº“çš„é•œåƒ</span>
    image: registry.cn-hangzhou.aliyuncs.com/xjpublic/convertx
    container_name: convertx
    restart: unless-stopped
    ports:
      - "10000:3000"
    environment: 
      - <span class="hljs-attr">ACCOUNT_REGISTRATION</span>=<span class="hljs-literal">false</span> <span class="hljs-comment"># trueæˆ–falseï¼Œé¦–è´¦æˆ·åˆ›å»ºä¸å—å½±å“ï¼ˆä¾‹å¦‚è‹¥åªéœ€å•è´¦æˆ·å¯ä¿æŒfalseï¼‰</span>
      - <span class="hljs-attr">JWT_SECRET</span>=aLongAndSecretStringUsedToSignTheJSONWebToken1234 <span class="hljs-comment"># é»˜è®¤ä½¿ç”¨randomUUID()ç”Ÿæˆ</span>
      - <span class="hljs-attr">HTTP_ALLOWED</span>=<span class="hljs-literal">true</span> <span class="hljs-comment"># è‹¥è¦ä½¿ç”¨httpè®¿é—®ï¼Œåˆ™è®¾ç½®ä¸ºtrue</span>
      - <span class="hljs-attr">ALLOW_UNAUTHENTICATED</span>=<span class="hljs-literal">true</span>  <span class="hljs-comment"># å…è®¸æœªç™»å½•ç”¨æˆ·ä½¿ç”¨æœåŠ¡ï¼Œä»…é™æœ¬åœ°ç¯å¢ƒè®¾ä¸ºtrue</span>
      - <span class="hljs-attr">AUTO_DELETE_EVERY_N_HOURS</span>=<span class="hljs-number">24</span> <span class="hljs-comment"># æ¯Nå°æ—¶æ£€æŸ¥å¹¶åˆ é™¤è¶…è¿‡Nå°æ—¶çš„æ—§æ–‡ä»¶ï¼Œè®¾ä¸º0å¯ç¦ç”¨</span>
    volumes:
      - ./data:/app/data
</code></pre>
<p>ğŸ³<strong>Docker é•œåƒ</strong></p>
<p>æ¯æ¬¡å‘å¸ƒæ—¶ä¼šæ›´æ–° <code>:latest</code> æ ‡ç­¾ï¼Œæ¯æ¬¡æ¨é€åˆ°ä¸»åˆ†æ”¯æ—¶ä¼šæ›´æ–° <code>:main</code> æ ‡ç­¾ã€‚å¸¸è§„ä½¿ç”¨æ¨èä½¿ç”¨ <code>:latest</code> æ ‡ç­¾ã€‚</p>
<p>é•œåƒå¯åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FC4illin%2FConvertX%2Fpkgs%2Fcontainer%2FConvertX" target="_blank" title="https://github.com/C4illin/ConvertX/pkgs/container/ConvertX" ref="nofollow noopener noreferrer">GitHub Container Registry</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fhub.docker.com%2Fr%2Fc4illin%2Fconvertx" target="_blank" title="https://hub.docker.com/r/c4illin/convertx" ref="nofollow noopener noreferrer">Docker Hub</a> è·å–ã€‚</p>

























<table><thead><tr><th>é•œåƒ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>image: ghcr.io/c4illin/convertx</code></td><td>GitHub Container Registry ä¸Šçš„æœ€æ–°å‘å¸ƒç‰ˆæœ¬</td></tr><tr><td><code>image: ghcr.io/c4illin/convertx:main</code></td><td>GitHub Container Registry ä¸Šçš„æœ€æ–°æäº¤</td></tr><tr><td><code>image: c4illin/convertx</code></td><td>Docker Hub ä¸Šçš„æœ€æ–°å‘å¸ƒç‰ˆæœ¬</td></tr><tr><td><code>image: c4illin/convertx:main</code></td><td>Docker Hub ä¸Šçš„æœ€æ–°æäº¤</td></tr></tbody></table>
<p>æ­¤æœåŠ¡çš„é•œåƒ3.59GBï¼Œå›½å†…ä¸‹è½½æ¯”è¾ƒæ…¢ï¼Œéœ€è¦çš„å®¶äººä»¬å¯ä»¥ä½¿ç”¨æˆ‘è½¬å­˜é˜¿é‡Œäº‘é•œåƒä»“åº“çš„é•œåƒ<code>registry.cn-hangzhou.aliyuncs.com/xjpublic/convertx</code></p>
<ol start="2">
<li>
<p><strong>å¯åŠ¨æœåŠ¡ï¼š</strong></p>
<p>åœ¨ <code>docker-compose.yml</code> æ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸‹è¿è¡Œï¼š</p>
</li>
</ol>

<pre><code class="hljs">docker-compose up -d
</code></pre>
<p>3.  <strong>åˆå§‹åŒ–è´¦æˆ·ï¼š</strong> åœ¨æµè§ˆå™¨ä¸­è®¿é—® <code>http://ä½ çš„æœåŠ¡å™¨IP:3000</code>ã€‚<strong>ç¬¬ä¸€ä¸ªæ³¨å†Œçš„ç”¨æˆ·å°†è‡ªåŠ¨æˆä¸ºç®¡ç†å‘˜</strong>ã€‚</p>
<p>å°±è¿™ä¹ˆç®€å•ï¼ä½ å·²ç»æˆåŠŸæ­å»ºäº†ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„åœ¨çº¿æ–‡ä»¶è½¬æ¢å¹³å°ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea5e412ffef949c0b361cf4a406093d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527667&amp;x-signature=GGHqYDL9Q1atciNfvU7RE%2FWxW2A%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e959a7762eb45e7bf30d155dc3f513e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527667&amp;x-signature=n5K9tEYwr%2FdvSY%2BM79RURKu%2BsRQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">ğŸ›ç¯å¢ƒå˜é‡</h3>
<p>æ‰€æœ‰å˜é‡å‡ä¸ºå¯é€‰ï¼Œä½†å»ºè®®è®¾ç½® JWT_SECRETã€‚</p>






































































<table><thead><tr><th>å˜é‡å</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>JWT_SECRET</td><td>æœªè®¾ç½®æ—¶ä½¿ç”¨ randomUUID() ç”Ÿæˆçš„å€¼</td><td>ç”¨äºç­¾å JSON Web Token çš„é•¿è€Œä¿å¯†çš„å­—ç¬¦ä¸²</td></tr><tr><td>ACCOUNT_REGISTRATION</td><td>false</td><td>æ˜¯å¦å…è®¸ç”¨æˆ·æ³¨å†Œè´¦æˆ·</td></tr><tr><td>HTTP_ALLOWED</td><td>false</td><td>æ˜¯å¦å…è®¸ HTTP è¿æ¥ï¼Œä»…åœ¨æœ¬åœ°ç¯å¢ƒä¸­è®¾ç½®ä¸º true</td></tr><tr><td>ALLOW_UNAUTHENTICATED</td><td>false</td><td>æ˜¯å¦å…è®¸æœªè®¤è¯ç”¨æˆ·ä½¿ç”¨æœåŠ¡ï¼Œä»…åœ¨æœ¬åœ°ç¯å¢ƒä¸­è®¾ç½®ä¸º true</td></tr><tr><td>AUTO_DELETE_EVERY_N_HOURS</td><td>24</td><td>æ¯éš” n å°æ—¶æ£€æŸ¥å¹¶åˆ é™¤è¶…è¿‡ n å°æ—¶çš„æ–‡ä»¶ï¼Œè®¾ç½®ä¸º 0 ä»¥ç¦ç”¨</td></tr><tr><td>WEBROOT</td><td/><td>æ ¹è·¯å¾„åœ°å€ï¼Œä¾‹å¦‚è®¾ç½®ä¸º "/convert" åï¼Œç½‘ç«™å°†é€šè¿‡ "example.com/convert/" è®¿é—®</td></tr><tr><td>FFMPEG_ARGS</td><td/><td>ä¼ é€’ç»™ ffmpeg è¾“å…¥æ–‡ä»¶çš„å‚æ•°ï¼Œä¾‹å¦‚ <code>-hwaccel vaapi</code>ã€‚æœ‰å…³ç¡¬ä»¶åŠ é€Ÿçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FC4illin%2FConvertX%2Fissues%2F190%25E3%2580%2582" target="_blank" title="https://github.com/C4illin/ConvertX/issues/190%E3%80%82" ref="nofollow noopener noreferrer">github.com/C4illin/Conâ€¦</a></td></tr><tr><td>FFMPEG_OUTPUT_ARGS</td><td/><td>ä¼ é€’ç»™ ffmpeg è¾“å‡ºæ–‡ä»¶çš„å‚æ•°ï¼Œä¾‹å¦‚ <code>-preset veryfast</code></td></tr><tr><td>HIDE_HISTORY</td><td>false</td><td>æ˜¯å¦éšè—å†å²è®°å½•é¡µé¢</td></tr><tr><td>LANGUAGE</td><td>en</td><td>ç”¨äºæ ¼å¼åŒ–æ—¥æœŸå­—ç¬¦ä¸²çš„è¯­è¨€ï¼Œéœ€ä½¿ç”¨ [BCP 47 è¯­è¨€æ ‡ç­¾] æŒ‡å®š</td></tr><tr><td>UNAUTHENTICATED_USER_SHARING</td><td>false</td><td>æ˜¯å¦åœ¨æ‰€æœ‰æœªè®¤è¯ç”¨æˆ·ä¹‹é—´å…±äº«è½¬æ¢å†å²è®°å½•</td></tr><tr><td>MAX_CONVERT_PROCESS</td><td>0</td><td>å…è®¸çš„æœ€å¤§å¹¶å‘è½¬æ¢è¿›ç¨‹æ•°ã€‚è®¾ç½®ä¸º 0 è¡¨ç¤ºæ— é™åˆ¶ã€‚</td></tr></tbody></table>
<h2 data-id="heading-5">ğŸŒ…æ€»ç»“</h2>
<p><strong>ConvertX å®Œç¾åœ°è§£å†³äº†ä¸€ä¸ªæ ¸å¿ƒç—›ç‚¹ï¼šåœ¨ä¿éšœæ•°æ®éšç§çš„å‰æä¸‹ï¼Œæä¾›å ªæ¯”ç”šè‡³è¶…è¶Šå•†ä¸šäº‘æœåŠ¡çš„æ–‡ä»¶æ ¼å¼è½¬æ¢èƒ½åŠ›ã€‚</strong> æ— è®ºä½ æ˜¯ä¸ªäººç”¨æˆ·ï¼Œæƒ³è¦ä¸€ä¸ªå¹²å‡€ã€æ— å¹¿å‘Šã€ä¸é™æ¬¡æ•°çš„æœ¬åœ°è½¬æ¢å·¥å…·ï¼›è¿˜æ˜¯å›¢é˜Ÿæˆ–ç»„ç»‡ï¼Œéœ€è¦åœ¨å†…ç½‘éƒ¨ç½²ä¸€ä¸ªå®‰å…¨çš„æ–‡ä»¶å¤„ç†æœåŠ¡ï¼ŒConvertX éƒ½æ˜¯ä¸€ä¸ªæå…·å¸å¼•åŠ›çš„é€‰æ‹©ã€‚</p>
<p>å…¶åŸºäº Docker çš„ä¸€é”®å¼éƒ¨ç½²ã€è¯¦å°½çš„é…ç½®é€‰é¡¹å’Œæ´»è·ƒçš„å¼€æºç”Ÿæ€ï¼Œä½¿å¾—ä»è¯•ç”¨ã€éƒ¨ç½²åˆ°é•¿æœŸç»´æŠ¤éƒ½å˜å¾—éå¸¸è½»æ¾ã€‚å¦‚æœä½ åŒå€¦äº†åœ¨å¤šä¸ªåœ¨çº¿è½¬æ¢ç½‘ç«™é—´è·³è½¬ï¼Œæˆ–æ˜¯å¯¹äº‘æœåŠ¡çš„æ•°æ®å®‰å…¨å¿ƒå­˜é¡¾è™‘ï¼Œä¸å¦¨ç°åœ¨å°±å°è¯•éƒ¨ç½²ä¸€ä¸ªå±äºä½ è‡ªå·±çš„ ConvertXã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d73106e49464640808061ad601a1975~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527667&amp;x-signature=EcJVtGJWS5pP1yYFOojreSlynl0%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Agent Skill å­¦ä¹ ç¬”è®°]]></title>    <link>https://juejin.cn/post/7597278451029786634</link>    <guid>https://juejin.cn/post/7597278451029786634</guid>    <pubDate>2026-01-20T15:27:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597278451029786634" data-draft-id="7597266141912694830" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Agent Skill å­¦ä¹ ç¬”è®°"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-20T15:27:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="KaneLogger"/> <meta itemprop="url" content="https://juejin.cn/user/3650034333917031"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Agent Skill å­¦ä¹ ç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3650034333917031/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    KaneLogger
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T15:27:55.000Z" title="Tue Jan 20 2026 15:27:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64133b5a33e94c4cbd00e99de984ec98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2FuZUxvZ2dlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527674&amp;x-signature=xS6hZWJ6Bvp8rMPyKLA4oQqWFYI%3D" alt="Agent_Skills_Progressive_Capability_Encapsulation-å›¾ç‰‡-0.jpg" loading="lazy"/></p>
<h2 data-id="heading-0">Agent Skills æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>Agent Skills æœ¬è´¨ä¸Šæ˜¯ä¸€ç§æ¸è¿›å¼æŠ«éœ²çš„æç¤ºè¯æœºåˆ¶ã€‚
æˆ‘ç†è§£ Skills å…¶å®æ˜¯ä¸€ç§ä¸Šä¸‹æ–‡å·¥ç¨‹ã€‚Skills åªæ˜¯æŠŠå‚ç›´é¢†åŸŸçš„çŸ¥è¯†ã€è„šæœ¬è°ƒç”¨æ–¹æ³•ç­‰æŒ‚è½½åˆ° Agent çš„ä¸Šä¸‹æ–‡çª—å£ã€‚</p>
<p>Skills å°†æç¤ºè¯æ‹†è§£ä¸ºä¸‰ä¸ªå±‚çº§ï¼Œé€šè¿‡â€œæŒ‰éœ€åŠ è½½â€é™ä½ Token æ¶ˆè€—ä¸å¤æ‚åº¦ï¼š</p>
<ul>
<li>å…ƒæ•°æ®ï¼š å¿…é¡»åŠ è½½ã€‚ç±»ä¼¼ä¹¦çš„â€œç›®å½•â€ã€‚è®© Agent çŸ¥é“æœ‰å“ªäº›æŠ€èƒ½å¯ç”¨ã€‚</li>
<li>æŒ‡ä»¤ï¼š æŒ‰éœ€åŠ è½½ã€‚ç±»ä¼¼ä¹¦çš„â€œæ­£æ–‡â€ã€‚å…·ä½“çš„æ‰§è¡Œæ­¥éª¤å’Œ SOPã€‚</li>
<li>èµ„æºï¼š æŒ‰éœ€åŠ è½½ã€‚ç±»ä¼¼ä¹¦çš„â€œé™„å½•â€ã€‚æ¨¡æ¿ã€æ¡ˆä¾‹ã€è§„èŒƒæ–‡æ¡£ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49ad196cfc8a485b9f3f47bc5a87c0c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2FuZUxvZ2dlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527674&amp;x-signature=3HyvYtUCVm5ZcLCNj6AXUnRaLO0%3D" alt="image.png" loading="lazy"/>
Skill æ–‡ä»¶ç»“æ„ï¼š</p>
<pre><code class="hljs language-sh" lang="sh">/.claude/skills/skill-name
    â”œâ”€â”€ SKILL.md    <span class="hljs-comment"># å…ƒæ•°æ®+æŒ‡ä»¤</span>
    â”œâ”€â”€ scripts/    <span class="hljs-comment"># å¯æ‰§è¡Œè„šæœ¬</span>
    â”‚   â””â”€â”€ main.py
    â”œâ”€â”€ references/ <span class="hljs-comment"># è¡¥å……æ–‡æ¡£ï¼ˆå¯é€‰ï¼‰</span>
    â”‚   â””â”€â”€ doc.md
    â””â”€â”€ assets/     <span class="hljs-comment"># ç´ æèµ„æº</span>
        â””â”€â”€ pic.jpg
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0e569d5c6304cf196f1aae1187fcb85~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2FuZUxvZ2dlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527674&amp;x-signature=GuCFl%2BQDQ5sc0WtxcI7KC4Yr2i0%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-1">SKILL.md åˆ†æ</h3>
<p>meta-data å…ƒæ•°æ®ã€‚æœ€é‡è¦çš„éƒ¨åˆ†ã€‚
æè¿°éƒ¨åˆ†è¿™å—æœ€é‡è¦æ˜¯å†™æ¸…æ¥š AI åº”è¯¥åœ¨ä»€ä¹ˆæ—¶æœºæ¥è°ƒç”¨è¿™ä¸ª Skillã€‚</p>
<pre><code class="hljs language-text" lang="text">---
name: { { æŠ€èƒ½åç§° } }
description: { { æè¿°éƒ¨åˆ† } }
---

{{ æŒ‡ä»¤éƒ¨åˆ† }}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71c918dcbb2a4348ad4bf490b00384fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2FuZUxvZ2dlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527674&amp;x-signature=CIgSiyWJ121usHPCVAKNOhibSMo%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">è°ƒç”¨è¿‡ç¨‹</h3>
<ol>
<li>ç”¨æˆ· â†’ Claude Codeï¼ˆagentï¼‰: {task}-ç»“åˆææ–™å†™ä½œã€æ ¡å¯¹æ–‡ç« ç”¨è¯ã€‚</li>
<li>Claude Codeï¼ˆagentï¼‰â†’ å¤§æ¨¡å‹ï¼šUser{task};Available Skills: ....</li>
<li>å¤§æ¨¡å‹ â†’ Claude Codeï¼ˆagentï¼‰: Choose Skill: å†™ä½œ</li>
<li>ã€æŒ‡ä»¤å±‚ æŒ‰éœ€åŠ è½½ã€‘Claude Codeï¼ˆagentï¼‰â†’ å¤§æ¨¡å‹ï¼šSKILL.md</li>
<li>ã€èµ„æºå±‚ æŒ‰éœ€åŠ è½½ã€‘å¤§æ¨¡å‹ â†’ Claude Codeï¼ˆagentï¼‰ï¼šRead references/*.md</li>
<li>Claude Codeï¼ˆagentï¼‰â†’ å¤§æ¨¡å‹ï¼šæä¾›references/*.md ä¸­çš„å†…å®¹</li>
<li>å¤§æ¨¡å‹ â†’ ç”¨æˆ·ï¼šæœ€ç»ˆå›ç­”</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9314764b2dc2441c870c468c20ecfbd8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2FuZUxvZ2dlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527674&amp;x-signature=gc%2BRGrfFyCw9HOaTZYWfZ5b4glg%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">Agent Skills vs MCP vs Prompt</h3>



































<table><thead><tr><th align="center"/><th align="center">Agent Skills</th><th align="center">MCP</th></tr></thead><tbody><tr><td align="center">ä¾§é‡ç‚¹</td><td align="center">æç¤ºè¯</td><td align="center">å·¥å…·è°ƒç”¨</td></tr><tr><td align="center">ç±»æ¯”</td><td align="center">å¸¦ç›®å½•çš„è¯´æ˜ä¹¦</td><td align="center">æ ‡å‡†åŒ–å·¥å…·ç®±</td></tr><tr><td align="center">Tokenæ¶ˆè€—</td><td align="center">ä½</td><td align="center">é«˜</td></tr><tr><td align="center">æ ¸å¿ƒä¸»ä½“</td><td align="center">SKILL.md</td><td align="center">è½¯ä»¶åŒ…</td></tr><tr><td align="center">ç¼–å†™éš¾åº¦</td><td align="center">ä½</td><td align="center">é«˜</td></tr></tbody></table>
<p>Skills å’Œ MCP æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
<ol>
<li>MCP æ˜¯ä¸€ç§å¼€æ”¾æ ‡å‡†çš„åè®®ï¼Œå…³æ³¨çš„æ˜¯ AI å¦‚ä½•ä»¥ç»Ÿä¸€æ–¹å¼è°ƒç”¨å¤–éƒ¨çš„å·¥å…·ã€æ•°æ®å’ŒæœåŠ¡ï¼Œæœ¬èº«ä¸å®šä¹‰ä»»åŠ¡é€»è¾‘æˆ–æ‰§è¡Œæµç¨‹ã€‚</li>
<li>Skill åˆ™æ•™ Agent å¦‚ä½•å®Œæ•´å¤„ç†ç‰¹å®šå·¥ä½œï¼Œå®ƒå°†æ‰§è¡Œæ–¹æ³•ã€å·¥å…·è°ƒç”¨æ–¹å¼ä»¥åŠç›¸å…³çŸ¥è¯†ææ–™ï¼Œå°è£…ä¸ºä¸€ä¸ªå®Œæ•´çš„ã€Œèƒ½åŠ›æ‰©å±•åŒ…ã€ï¼Œä½¿ Agent å…·å¤‡ç¨³å®šã€å¯å¤ç”¨çš„åšäº‹æ–¹æ³•ã€‚</li>
</ol>
<h3 data-id="heading-4">Agent Skills vs. Workflow å·¥ä½œæµ</h3>
<p>ä¸¤ç§ä¸åŒçš„ç³»ç»Ÿè®¾è®¡å“²å­¦ï¼š</p>
<ul>
<li>Workflow (åˆšæ€§ç³»ç»Ÿ)ï¼š â€œé¢„è®¾è·¯å¾„â€ã€‚åœ¨è®¾è®¡æ—¶æšä¸¾æ‰€æœ‰èŠ‚ç‚¹ä¸è¿æ¥ã€‚ç¨³å®šæ€§é«˜ï¼Œä½†è„†å¼±ï¼Œä¸€æ—¦é‡åˆ°æœªçŸ¥æƒ…å†µå®¹æ˜“å´©æºƒã€‚ç±»ä¼¼äºä¼ ç»Ÿçš„å·¥ä¸šæµæ°´çº¿ã€è´¢åŠ¡å®¡æ‰¹æµç¨‹ã€‚</li>
<li>Agent + Skills (æŸ”æ€§ç³»ç»Ÿ)ï¼š â€œæ¶Œç°è·¯å¾„â€ã€‚è®¾è®¡æ—¶åªå®šä¹‰åŸå­èƒ½åŠ›ï¼ˆSkillsï¼‰ï¼Œè¿è¡Œæ—¶ç”± Agent æ ¹æ®ä¸Šä¸‹æ–‡åŠ¨æ€å†³ç­–æ‰§è¡Œè·¯å¾„ã€‚å…·æœ‰æå¼ºçš„é€‚åº”æ€§å’Œè¿›åŒ–èƒ½åŠ›ï¼Œç±»ä¼¼äºç”Ÿç‰©ç”Ÿæ€ç³»ç»Ÿã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/021bca619e144483aa2d307734bffa3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2FuZUxvZ2dlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527674&amp;x-signature=VS3Cf5hYeM5T0rzZRM4Hk8KyKMY%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-5">æŠ€æœ¯å®ç°</h2>
<p>æ ‡å‡†ç›®å½•ç»“æ„ï¼šåœ¨ <code>/.claude/skills</code> ä¸‹åˆ›å»ºé¡¹ç›®ï¼š</p>
<pre><code class="hljs language-sh" lang="sh">/.claude/skills/skill-name
    â”œâ”€â”€ SKILL.md        <span class="hljs-comment"># æ ¸å¿ƒï¼šå…ƒæ•°æ® + æŒ‡ä»¤</span>
    â”œâ”€â”€ scripts/        <span class="hljs-comment"># å¯é€‰ï¼šå¯æ‰§è¡Œè„šæœ¬ (å¦‚ main.py)</span>
    â”œâ”€â”€ references/     <span class="hljs-comment"># å¯é€‰ï¼šè¡¥å……æ–‡æ¡£ (å¦‚ è§„èŒƒ.md)</span>
    â””â”€â”€ assets/         <span class="hljs-comment"># å¯é€‰ï¼šç´ æèµ„æº (å¦‚ æ¨¡æ¿.jpg)</span>
</code></pre>
<p>SKILL.md ç¼–å†™è§„èŒƒ</p>
<pre><code class="hljs language-text" lang="text">---
name: æ–‡æ¡ˆå¤§å¸ˆ # æŠ€èƒ½åç§°
description: ç”¨äºæ ¹æ®æä¾›çš„ææ–™æ’°å†™ã€æ ¡å¯¹å’Œæ¶¦è‰²æ–‡ç«  # æè¿°ï¼ˆå†³å®š AI ä½•æ—¶è°ƒç”¨ï¼‰
---

# æŒ‡ä»¤éƒ¨åˆ†

è¿™é‡Œå†™è¯¦ç»†çš„ SOPã€æ­¥éª¤è¦æ±‚ã€æ³¨æ„äº‹é¡¹...
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a165a4668394e1aa6f8476f0388d750~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2FuZUxvZ2dlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527674&amp;x-signature=1D5yAcNOE0X4LqejRxWfe3isqbo%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-6">å®æˆ˜æŒ‡å—ï¼šä»å®‰è£…åˆ°æ„å»º</h2>
<h3 data-id="heading-7">1.ç¯å¢ƒå‡†å¤‡</h3>
<ul>
<li>å®‰è£… Claude Codeï¼š
<ul>
<li>macOS: <code>brew install --cask claude-code</code></li>
<li>Windows (PowerShell): <code>irm https://claude.ai/install.ps1 | iex</code></li>
</ul>
</li>
</ul>
<h3 data-id="heading-8">2. é…ç½®æ¨¡å‹</h3>
<p>æ¨èä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffarion1231%2Fcc-switch" target="_blank" title="https://github.com/farion1231/cc-switch" ref="nofollow noopener noreferrer">CC Switch</a> ç®¡ç†æ¨¡å‹ç‰ˆæœ¬ã€‚</p>
<h3 data-id="heading-9">3. åˆ›å»º Skill</h3>
<p>å¦‚ä½•å°†ä¸€ä¸ªä»»åŠ¡è½¬åŒ–ä¸ºé«˜è´¨é‡çš„ Skillï¼Ÿ
å…ˆåˆ¤æ–­æ˜¯å¦æ˜¯éœ€è¦åå¤åšçš„ä»»åŠ¡ï¼Ÿå¦‚æœåªæ˜¯ä¸€æ¬¡å°±æ²¡å¿…è¦åšæˆSkillã€‚å› ä¸º Skill çš„æ ¸å¿ƒä»·å€¼åœ¨äºå¤ç”¨ã€‚
å†åŠ¨æ‰‹åšå‡ éï¼Œæ²‰æ·€æœ€ä½³å®è·µã€‚æ€è€ƒè®°å½•å“ªäº›æ­¥éª¤æ˜¯å›ºå®šçš„ï¼Ÿå“ªäº›åœ°æ–¹å®¹æ˜“å‡ºé—®é¢˜ï¼Ÿä»€ä¹ˆæ ·çš„è¾“å‡ºè´¨é‡æœ€å¥½ï¼Ÿ
å…·ä½“æ“ä½œï¼š
è®© Agent å¸®ä½ åˆ›å»º Skillã€‚æ–°å¼€ä¸€ä¸ªä¼šè¯ï¼Œåœ¨æ”¯æŒ Skills çš„ Agent é‡ŒæŠŠä»»åŠ¡å®Œæ•´åšä¸€éï¼Œåšå®Œåå‘Šè¯‰å®ƒï¼šæŠŠåˆšæ‰çš„æ“ä½œåˆ›å»ºæˆä¸€ä¸ª Skillï¼Œæ–¹ä¾¿ä»¥åå¤ç”¨ã€‚
ç”¨ Skill åšä»»åŠ¡ï¼ŒæŒç»­è¿­ä»£ä¼˜åŒ–ã€‚ä»¥åéƒ½ç”¨è¿™ä¸ª Skill æ¥æ‰§è¡Œä»»åŠ¡ã€‚æ¯æ¬¡å®Œæˆåæ£€æŸ¥è¾“å‡ºï¼Œå“ªé‡Œä¸æ»¡æ„å°±å‘Šè¯‰ Agentï¼Œè®©å®ƒæ”¹è¿›å¹¶æ›´æ–° Skillã€‚</p>
<p>ç®€å•æ¥è¯´å°±æ˜¯ï¼šå…ˆäººå·¥è·‘é€šä¸€éä»»åŠ¡ï¼Œç¡®è®¤ SOP æ— è¯¯åï¼Œå‘Šè¯‰ Agentï¼šâ€œæŠŠåˆšæ‰çš„æ“ä½œåˆ›å»ºæˆä¸€ä¸ª Skillï¼Œæ–¹ä¾¿ä»¥åå¤ç”¨ã€‚â€</p>
<p><strong>å¿«é€Ÿåˆ›å»ºæŠ€å·§</strong></p>
<ul>
<li>äº¤äº’å¼åˆ›å»ºï¼š ä½¿ç”¨ <code>/skill-creator</code> å·¥å…·è¾…åŠ©åˆ›å»ºã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a30dc7c610da48faa46a3fc755bcf245~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2FuZUxvZ2dlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527674&amp;x-signature=5tm7BbT0urarv5p7TozcoqKq7xk%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-10">æ·±åº¦æ€è€ƒï¼šSkills çš„é•¿æœŸä»·å€¼</h2>
<p>å…¶å®åœ¨å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™æˆ‘å¿ƒé‡Œå°±åœ¨æƒ³ï¼šéšç€æ¨¡å‹å˜å¼ºï¼ŒSkills ä¼šè¿‡æ—¶å—ï¼Ÿ
å†™å®Œä¹‹åæˆ‘å¾—åˆ°äº†ä¸€ä¸ªç­”æ¡ˆæ˜¯ï¼šè‚¯å®šä¼šè¿‡æ—¶ã€‚Skills åªæ˜¯çŸ­æœŸçº¢åˆ©ï¼Œéšç€æ¨¡å‹å˜å¼ºï¼Œå¥½çš„Skillsä¼šå†…ç½®è¿›æ¨¡å‹é‡Œé¢ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/502239323741415fad63937c8b9fb8e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2FuZUxvZ2dlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527674&amp;x-signature=GEjGk0KL5MBPfVxdw89ZBKa6QbM%3D" alt="image.png" loading="lazy"/>
<strong>Skills æ˜¯çŸ­æœŸçš„çº¢åˆ©ï¼Œä½†â€œèƒ½åŠ›â€æ˜¯é•¿æœŸçš„å£å’ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a43faa1bbd774400a5d1e87dd1257755~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2FuZUxvZ2dlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527674&amp;x-signature=p6weiV7eoCxHbJZNCpJ6BRRZUxM%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>å½“ä¸‹çº¢åˆ©ï¼ˆæ•ˆç‡ï¼‰ï¼š Skills æ˜¯å½“å‰æŠ€æœ¯é˜¶æ®µçš„â€œæœ€ä¼˜è§£â€ï¼Œå®ƒæ˜¯å°è£…ç‰¹å®šå·¥ä½œæµçš„äº§å“ï¼Œèƒ½ç›´æ¥å¸¦æ¥ç”Ÿäº§åŠ›æå‡ã€‚</li>
<li>çœŸæ­£å£å’ï¼ˆè®¤çŸ¥ï¼‰ï¼š Skills çš„å…·ä½“å½¢å¼å¯èƒ½ä¼šå˜ï¼ˆæœªæ¥æ¨¡å‹å¯èƒ½ä¸éœ€è¦è¿™ä¹ˆæ˜¾å¼çš„ Skillï¼‰ï¼Œä½†ä½ åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ç»ƒå°±çš„é—®é¢˜æ‹†è§£èƒ½åŠ›ã€æµç¨‹è®¾è®¡èƒ½åŠ›ã€äººæœºååŒç»éªŒï¼Œæ˜¯ä¸ä¼šè´¬å€¼çš„èµ„äº§ã€‚</li>
</ul>
<p>æ‰€ä»¥æˆ‘ä¸åº”è¯¥åªå…³æ³¨åˆ¶ä½œ Skill è¿™ä¸ªåŠ¨ä½œï¼Œè€Œè¦é€šè¿‡åˆ¶ä½œ Skillï¼Œ<strong>æ²‰æ·€è‡ªå·±è§£å†³å¤æ‚é—®é¢˜</strong>çš„æ€ç»´æ¨¡å‹ï¼ŒæŠ•èµ„è‡ªå·±è·¨è¶Šå‘¨æœŸçš„â€œé—®é¢˜è§£å†³èƒ½åŠ›â€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a5fc99919b844f1ab08d200ff54fc63~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2FuZUxvZ2dlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527674&amp;x-signature=aEZ0qrWwf%2FGB%2FOPOBFZszln8Wcc%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Ace Data Cloud æµè§ˆå™¨æ’ä»¶é…ç½®ä¸å†…å®¹å‘å¸ƒ SOPï¼ˆæ ‡å‡†ä½œä¸šç¨‹åºï¼Œå‚åŠ æ´»åŠ¨é€ç§¯åˆ†ï¼‰]]></title>    <link>https://juejin.cn/post/7597266141912727598</link>    <guid>https://juejin.cn/post/7597266141912727598</guid>    <pubDate>2026-01-20T15:44:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597266141912727598" data-draft-id="7597258378590814218" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Ace Data Cloud æµè§ˆå™¨æ’ä»¶é…ç½®ä¸å†…å®¹å‘å¸ƒ SOPï¼ˆæ ‡å‡†ä½œä¸šç¨‹åºï¼Œå‚åŠ æ´»åŠ¨é€ç§¯åˆ†ï¼‰"/> <meta itemprop="keywords" content="API"/> <meta itemprop="datePublished" content="2026-01-20T15:44:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å´”åº†æ‰ä¸¨é™è§…"/> <meta itemprop="url" content="https://juejin.cn/user/1521379821230269"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Ace Data Cloud æµè§ˆå™¨æ’ä»¶é…ç½®ä¸å†…å®¹å‘å¸ƒ SOPï¼ˆæ ‡å‡†ä½œä¸šç¨‹åºï¼Œå‚åŠ æ´»åŠ¨é€ç§¯åˆ†ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379821230269/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å´”åº†æ‰ä¸¨é™è§…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T15:44:20.000Z" title="Tue Jan 20 2026 15:44:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ´»åŠ¨ï¼š2026.1.21~2026.1.27 æœŸé—´å¼€é€šè‡ªåŠ¨å‘å¸ƒå¹¶æˆåŠŸæˆªå›¾ï¼Œå¯è·å¾—æ¯æ—¥<strong>æœ€é«˜ 50 ç§¯åˆ†â‰ˆï¿¥48</strong>å¥–åŠ±ï¼ˆå‘å¸ƒä¸€ä¸ªå¹³å° 10 ç§¯åˆ†ï¼‰ï¼Œæ¯æ—¥ç»Ÿè®¡ï¼Œå¯ä»¥å åŠ ã€‚</p>
</blockquote>
<p>æœ¬ SOP ç”¨äºæŒ‡å¯¼å›¢é˜Ÿå®Œæˆä¸¤ä»¶äº‹ï¼š<br/>
1ï¼‰å®‰è£… Ace Data Cloud æµè§ˆå™¨æ’ä»¶å¹¶å®Œæˆè´¦å·æˆæƒï¼›<br/>
2ï¼‰åœ¨ Ace Data Cloud å¹³å°å®Œæˆé¢‘é“ç»‘å®šã€å†…å®¹å‡†å¤‡ã€å‘å¸ƒä¸è‡ªåŠ¨å‘å¸ƒã€‚</p>
<hr/>
<h2 data-id="heading-0">1. ç›®æ ‡ä¸æ¦‚è¿°</h2>
<ul>
<li><strong>ç›®æ ‡</strong>ï¼šé€šè¿‡ Ace Data Cloud å¹³å°ï¼Œå°†æ–‡ç« /è§†é¢‘ç­‰å†…å®¹åˆ†å‘åˆ°å¤šä¸ªè‡ªåª’ä½“å¹³å°ï¼ˆé¢‘é“ï¼‰ï¼Œæå‡åˆ†å‘æ•ˆç‡ï¼Œå¹¶é€šè¿‡è‡ªåŠ¨å‘å¸ƒå®ç°â€œä½äººå·¥æŠ•å…¥â€çš„æŒç»­æ¨å¹¿ã€‚</li>
<li><strong>å‰ç½®æ¡ä»¶</strong>ï¼š
<ul>
<li>ä½¿ç”¨ Chrome æµè§ˆå™¨</li>
<li>å¯è®¿é—® Ace Data Cloud å¹³å°</li>
<li>å·²ä¸‹è½½æµè§ˆå™¨æ’ä»¶å‹ç¼©åŒ…å¹¶è§£å‹</li>
<li><strong>æµè§ˆå™¨æ’ä»¶é…ç½®æ–‡æ¡£ï¼ˆå¹³å°å†…ï¼‰</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fdocuments%2F6becb82d-5981-4c21-a596-39e751647fb1" target="_blank" title="https://platform.acedata.cloud/documents/6becb82d-5981-4c21-a596-39e751647fb1" ref="nofollow noopener noreferrer">é“¾æ¥</a></li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-1">2. æ ¸å¿ƒæ¦‚å¿µè¯´æ˜</h2>
<ul>
<li><strong>æµè§ˆå™¨æ’ä»¶</strong>ï¼šç”¨äºåœ¨ç¬¬ä¸‰æ–¹å¹³å°ï¼ˆå¦‚çŸ¥ä¹ã€CSDN ç­‰ï¼‰å®Œæˆè´¦å·æˆæƒï¼Œä½¿ Ace Data Cloud èƒ½ä»£è¡¨ä½ æ‰§è¡Œå‘å¸ƒã€‚</li>
<li><strong>é¢‘é“ï¼ˆChannelsï¼‰</strong>ï¼šç›®æ ‡å‘å¸ƒå¹³å°çš„è´¦å·æˆæƒé€šé“ï¼ˆå¦‚çŸ¥ä¹ã€CSDNã€æ˜é‡‘ç­‰ï¼‰ã€‚</li>
<li><strong>ææ–™ï¼ˆMaterialsï¼‰</strong>ï¼šå¹³å°æä¾›çš„å¯ç›´æ¥ä½¿ç”¨/å‚è€ƒçš„é¢„åˆ¶å†…å®¹åº“ã€‚</li>
<li><strong>æ–‡æ¡£ï¼ˆDocsï¼‰</strong>ï¼šä½ å‡†å¤‡å‘å¸ƒçš„å†…å®¹è‰ç¨¿ï¼ˆå¯ç”±ææ–™ç”Ÿæˆï¼Œä¹Ÿå¯è‡ªå·±åˆ›å»ºï¼‰ã€‚</li>
<li><strong>å‘å¸ƒä»»åŠ¡ï¼ˆTasksï¼‰</strong>ï¼šæ¯ä¸€æ¬¡å‘å¸ƒæ“ä½œç”Ÿæˆçš„è®°å½•ï¼Œç”¨äºè¿½è¸ªçŠ¶æ€ã€é“¾æ¥ä¸ç»“æœã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-2">3. æ’ä»¶å®‰è£… SOP</h2>
<h3 data-id="heading-3">3.1 ä¸‹è½½æ’ä»¶</h3>
<ol>
<li>è®¿é—®ä¸‹è½½é“¾æ¥å¹¶ä¸‹è½½å‹ç¼©åŒ…ï¼š
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcdn.acedata.cloud%2Fi9h4af.zip" target="_blank" title="https://cdn.acedata.cloud/i9h4af.zip" ref="nofollow noopener noreferrer">cdn.acedata.cloud/i9h4af.zip</a></li>
</ul>
</li>
<li>è§£å‹åå¾—åˆ°ä¸€ä¸ªæ’ä»¶æ–‡ä»¶å¤¹ï¼ˆä¿æŒæ–‡ä»¶å¤¹ç»“æ„ä¸å˜ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-4">3.2 å®‰è£…æ’ä»¶ï¼ˆChromeï¼‰</h3>
<ol>
<li>åœ¨ Chrome åœ°å€æ è¾“å…¥ï¼š<code>chrome://extensions</code></li>
<li>æ‰“å¼€å³ä¸Šè§’ <strong>å¼€å‘è€…æ¨¡å¼ï¼ˆDeveloper modeï¼‰</strong></li>
<li>ç‚¹å‡» <strong>Load unpackedï¼ˆåŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åºï¼‰</strong></li>
<li>é€‰æ‹©ä½ åˆšåˆšè§£å‹å‡ºæ¥çš„æ’ä»¶æ–‡ä»¶å¤¹å¹¶ç¡®è®¤</li>
</ol>
<h3 data-id="heading-5">3.3 å®‰è£…æˆåŠŸéªŒè¯</h3>
<ol>
<li>æ‰“å¼€ Ace Data Cloud åˆ†å‘ä¸­å¿ƒé¡µé¢å¹¶åˆ·æ–°ï¼š
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fconsole%2Fpublish" target="_blank" title="https://platform.acedata.cloud/console/publish" ref="nofollow noopener noreferrer">platform.acedata.cloud/console/pubâ€¦</a></li>
</ul>
</li>
<li>å¦‚æœé¡µé¢ä¸å†å‡ºç°â€œæœªå®‰è£…æµè§ˆå™¨æ’ä»¶â€çš„æç¤ºï¼Œåˆ™å®‰è£…æˆåŠŸã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-6">4. å†…å®¹å‘å¸ƒå¹³å° SOPï¼ˆå«æˆªå›¾ï¼‰</h2>
<blockquote>
<p>ä»¥ä¸‹ SOP ä»¥å¹³å°é¡µé¢ä¸ºä¸»çº¿ï¼š<strong>åˆ†å‘ä¸­å¿ƒ â†’ é¢‘é“ â†’ æ–‡æ¡£/ææ–™ â†’ å‘å¸ƒä»»åŠ¡ â†’ è‡ªåŠ¨å‘å¸ƒ</strong><br/>
æˆªå›¾è¯´æ˜ï¼š</p>
<ul>
<li>æˆªå›¾1ï¼šå‘å¸ƒä¸­å¿ƒ</li>
<li>æˆªå›¾2ï¼šé¢‘é“ç®¡ç†</li>
<li>æˆªå›¾3ï¼šå‘å¸ƒä»»åŠ¡</li>
<li>æˆªå›¾4ï¼šå‘å¸ƒæ¦‚è§ˆ/æ‘˜è¦</li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-7">4.1 æ­¥éª¤ä¸€ï¼šè¿›å…¥å‘å¸ƒä¸­å¿ƒï¼ˆæ€»è§ˆä¸è‡ªåŠ¨å‘å¸ƒå¼€å…³ï¼‰</h3>
<ul>
<li><strong>ç›®æ ‡</strong>ï¼šç¡®è®¤æ’ä»¶çŠ¶æ€æ­£å¸¸ï¼Œå¹¶äº†è§£â€œè‡ªåŠ¨å‘å¸ƒâ€å…¥å£ä¸æ•´ä½“çŠ¶æ€ã€‚</li>
</ul>
<p><strong>æ“ä½œï¼š</strong></p>
<ol>
<li>è¿›å…¥åˆ†å‘ä¸­å¿ƒï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fconsole%2Fpublish" target="_blank" title="https://platform.acedata.cloud/console/publish" ref="nofollow noopener noreferrer">platform.acedata.cloud/console/pubâ€¦</a></li>
<li>æ£€æŸ¥æ˜¯å¦å­˜åœ¨â€œæœªå®‰è£…æ’ä»¶â€ç­‰å¼‚å¸¸æç¤º</li>
<li>ç†Ÿæ‚‰é¡µé¢å†…çš„è‡ªåŠ¨å‘å¸ƒæ¨¡å—ã€æ•´ä½“æ¦‚è§ˆä¿¡æ¯</li>
</ol>
<p><strong>æ£€æŸ¥ç‚¹ï¼š</strong></p>
<ul>
<li>é¡µé¢æ­£å¸¸æ˜¾ç¤ºï¼Œæ— æ’ä»¶ç¼ºå¤±æç¤º</li>
<li>èƒ½çœ‹åˆ°è‡ªåŠ¨å‘å¸ƒæ¨¡å—ï¼ˆå¼€å…³/è¯´æ˜ï¼‰</li>
</ul>
<p><strong>æˆªå›¾1ï¼ˆå‘å¸ƒä¸­å¿ƒï¼‰</strong><br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21c5c59e8ef74af8bc3af00d8b043f10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSU5bqG5omN5Lio6Z2Z6KeF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528661&amp;x-signature=MUBCwtg7TjQsYEpjQalh%2Bh%2BcwyI%3D" alt="æˆªå›¾1-å‘å¸ƒä¸­å¿ƒ" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-8">4.2 æ­¥éª¤äºŒï¼šç»‘å®šå‘å¸ƒé¢‘é“ï¼ˆæˆæƒç¬¬ä¸‰æ–¹è´¦å·ï¼‰</h3>
<ul>
<li><strong>ç›®æ ‡</strong>ï¼šå°†ç¬¬ä¸‰æ–¹å¹³å°è´¦å·æˆæƒç»™ Ace Data Cloudï¼Œå»ºç«‹å‘å¸ƒé€šé“ã€‚</li>
</ul>
<p><strong>æ“ä½œï¼š</strong></p>
<ol>
<li>è¿›å…¥é¢‘é“é¡µé¢ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fconsole%2Fpublish%2Fchannels" target="_blank" title="https://platform.acedata.cloud/console/publish/channels" ref="nofollow noopener noreferrer">platform.acedata.cloud/console/pubâ€¦</a></li>
<li>æ‰¾åˆ°éœ€è¦ç»‘å®šçš„å¹³å°ï¼ˆå¦‚çŸ¥ä¹ã€CSDN ç­‰ï¼‰</li>
<li>ç‚¹å‡» <strong>ç»‘å®š</strong>ï¼ŒæŒ‰æç¤ºå®Œæˆç¬¬ä¸‰æ–¹å¹³å°ç™»å½•ä¸æˆæƒ</li>
<li>ç»‘å®šæˆåŠŸåï¼Œé¢‘é“çŠ¶æ€åº”å˜ä¸º <strong>æœ‰æ•ˆ</strong></li>
</ol>
<p><strong>æ£€æŸ¥ç‚¹ï¼š</strong></p>
<ul>
<li>ç›®æ ‡å¹³å°é¢‘é“çŠ¶æ€æ˜¾ç¤º <strong>æœ‰æ•ˆ</strong></li>
<li>å¯ç»‘å®šå¤šä¸ªé¢‘é“ä»¥å®ç°â€œä¸€æ–‡å¤šå‘â€</li>
</ul>
<p><strong>æˆªå›¾2ï¼ˆé¢‘é“ç®¡ç†ï¼‰</strong><br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36408134ab9247d0bca180200dbd336f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSU5bqG5omN5Lio6Z2Z6KeF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528661&amp;x-signature=ADF2wbJVEvDIO1fOOooZezwpUTA%3D" alt="æˆªå›¾2-é¢‘é“ç®¡ç†" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-9">4.3 æ­¥éª¤ä¸‰ï¼šå‡†å¤‡å†…å®¹ï¼ˆä»ææ–™åº“åˆ›å»ºæ–‡æ¡£ / ç¼–è¾‘æ–‡æ¡£ï¼‰</h3>
<ul>
<li><strong>ç›®æ ‡</strong>ï¼šè·å¾—å¯å‘å¸ƒçš„æ–‡ç« è‰ç¨¿ï¼Œå¹¶è¿›è¡Œå¿…è¦ç¼–è¾‘ã€‚</li>
</ul>
<p><strong>å¸¸è§è·¯å¾„ Aï¼šä»ææ–™åº“é€‰å–å¹¶ç”Ÿæˆæ–‡æ¡£</strong></p>
<ol>
<li>åœ¨â€œææ–™â€åº“ä¸­æµè§ˆ/æœç´¢å†…å®¹</li>
<li>æŸ¥çœ‹æ ‡é¢˜ã€å†…å®¹ä¸æ”¯æŒé¢‘é“</li>
<li>ç‚¹å‡» <strong>é¢„è§ˆ</strong>ç¡®è®¤å†…å®¹é€‚ç”¨</li>
<li>ç‚¹å‡» <strong>ä½¿ç”¨</strong>ï¼šç³»ç»Ÿä¼šå°†ææ–™å¤åˆ¶åˆ°ä½ çš„â€œæ–‡æ¡£â€åˆ—è¡¨ï¼Œå½¢æˆå¯ç¼–è¾‘è‰ç¨¿</li>
</ol>
<p><strong>å¸¸è§è·¯å¾„ Bï¼šåˆ›å»ºåŸåˆ›æ–‡æ¡£ï¼ˆå¦‚å¹³å°æ”¯æŒâ€œæ–°å»ºæ–‡æ¡£â€ï¼‰</strong></p>
<ol>
<li>åœ¨â€œæ–‡æ¡£â€é¡µé¢ç‚¹å‡» <strong>æ–°å»º</strong></li>
<li>è¾“å…¥æ ‡é¢˜ä¸æ­£æ–‡ï¼Œä¿å­˜ä¸ºè‰ç¨¿</li>
</ol>
<p><strong>æ£€æŸ¥ç‚¹ï¼š</strong></p>
<ul>
<li>æ–‡æ¡£å·²ç”Ÿæˆå¹¶å¯è¿›å…¥ç¼–è¾‘é¡µ</li>
<li>æ ‡é¢˜ã€æ­£æ–‡ã€æ ¼å¼ç¬¦åˆç›®æ ‡å¹³å°å‘å¸ƒè¦æ±‚</li>
</ul>
<hr/>
<h3 data-id="heading-10">4.4 æ­¥éª¤å››ï¼šæ‰‹åŠ¨å‘å¸ƒï¼ˆé€‰æ‹©é¢‘é“å¹¶ç”Ÿæˆå‘å¸ƒä»»åŠ¡ï¼‰</h3>
<ul>
<li><strong>ç›®æ ‡</strong>ï¼šå°†æŒ‡å®šæ–‡æ¡£å‘å¸ƒåˆ°å·²ç»‘å®šçš„å¤šä¸ªé¢‘é“ã€‚</li>
</ul>
<p><strong>æ“ä½œï¼š</strong></p>
<ol>
<li>åœ¨â€œæ–‡æ¡£â€åˆ—è¡¨æ‰¾åˆ°ç›®æ ‡æ–‡ç« </li>
<li>è¿›å…¥ç¼–è¾‘é¡µå®Œæˆæœ€ç»ˆæ£€æŸ¥ï¼ˆæ ‡é¢˜ä¼˜åŒ–ã€æ’ç‰ˆã€é“¾æ¥ç­‰ï¼‰</li>
<li>ç‚¹å‡» <strong>å‘å¸ƒ</strong></li>
<li>åœ¨å¼¹çª—ä¸­å‹¾é€‰è¦å‘å¸ƒçš„ <strong>é¢‘é“</strong></li>
<li>ç¡®è®¤å‘å¸ƒ â†’ ç³»ç»Ÿåˆ›å»º <strong>å‘å¸ƒä»»åŠ¡</strong></li>
</ol>
<p><strong>æ£€æŸ¥ç‚¹ï¼š</strong></p>
<ul>
<li>å‘å¸ƒä»»åŠ¡å·²ç”Ÿæˆ</li>
<li>çŠ¶æ€ä»â€œè¿›è¡Œä¸­â€å˜ä¸ºâ€œå·²å®Œæˆâ€</li>
<li>å¯ç‚¹å‡»ä»»åŠ¡ä¸­çš„é“¾æ¥ï¼Œè·³è½¬ç¬¬ä¸‰æ–¹å¹³å°ç¡®è®¤æ–‡ç« å·²å‘å¸ƒ</li>
</ul>
<hr/>
<h3 data-id="heading-11">4.5 æ­¥éª¤äº”ï¼šæŸ¥çœ‹å‘å¸ƒä»»åŠ¡ï¼ˆè¿½è¸ªçŠ¶æ€ä¸ç»“æœé“¾æ¥ï¼‰</h3>
<ul>
<li><strong>ç›®æ ‡</strong>ï¼šç»Ÿä¸€æŸ¥çœ‹æ‰‹åŠ¨/è‡ªåŠ¨å‘å¸ƒçš„å†å²ä¸ç»“æœã€‚</li>
</ul>
<p><strong>æ“ä½œï¼š</strong></p>
<ol>
<li>è¿›å…¥å‘å¸ƒä»»åŠ¡é¡µé¢ï¼ˆæˆ–ä»åˆ†å‘ä¸­å¿ƒè¿›å…¥ä»»åŠ¡åˆ—è¡¨ï¼‰</li>
<li>æŸ¥çœ‹ä»»åŠ¡çŠ¶æ€ã€å‘å¸ƒæ—¶é—´ã€ç›®æ ‡é¢‘é“ä¸å¤–é“¾</li>
<li>å¼‚å¸¸ä»»åŠ¡æ ¹æ®æç¤ºé‡è¯•æˆ–é‡æ–°æˆæƒé¢‘é“</li>
</ol>
<p><strong>æ£€æŸ¥ç‚¹ï¼š</strong></p>
<ul>
<li>ä»»åŠ¡çŠ¶æ€æ¸…æ™°å¯è¿½è¸ª</li>
<li>å·²å®Œæˆä»»åŠ¡å…·å¤‡å¯è®¿é—®çš„å¤–é“¾</li>
</ul>
<p><strong>æˆªå›¾3ï¼ˆå‘å¸ƒä»»åŠ¡ï¼‰</strong><br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5911dbfe92bb41888f648db8d1122b8e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSU5bqG5omN5Lio6Z2Z6KeF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528661&amp;x-signature=zi%2F8Ae7pfEQFQB90V2qS9ZvFLtc%3D" alt="æˆªå›¾3-å‘å¸ƒä»»åŠ¡" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-12">4.6 æ­¥éª¤å…­ï¼šå¯ç”¨è‡ªåŠ¨å‘å¸ƒï¼ˆå…¨è‡ªåŠ¨åˆ†å‘ï¼‰</h3>
<ul>
<li><strong>ç›®æ ‡</strong>ï¼šå¼€å¯è‡ªåŠ¨å‘å¸ƒåï¼Œç³»ç»ŸæŒ‰è§„åˆ™è‡ªåŠ¨é€‰å–å†…å®¹å¹¶å‘å¸ƒåˆ°â€œæœ‰æ•ˆé¢‘é“â€ã€‚</li>
</ul>
<p><strong>æ“ä½œï¼š</strong></p>
<ol>
<li>è¿”å› <strong>å‘å¸ƒä¸­å¿ƒ</strong></li>
<li>æ‰¾åˆ° <strong>è‡ªåŠ¨å‘å¸ƒ</strong> æ¨¡å—</li>
<li>å°†å¼€å…³ä»â€œå…³é—­â€æ‹¨åŠ¨è‡³â€œæ‰“å¼€â€</li>
<li>åç»­å®šæœŸåˆ°â€œå‘å¸ƒä»»åŠ¡â€ç¡®è®¤ç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºçš„ä»»åŠ¡ä¸å®Œæˆæƒ…å†µ</li>
</ol>
<p><strong>æ£€æŸ¥ç‚¹ï¼š</strong></p>
<ul>
<li>è‡ªåŠ¨å‘å¸ƒå¼€å…³å¤„äºå¼€å¯çŠ¶æ€</li>
<li>å‘å¸ƒä»»åŠ¡ä¸­æŒç»­å‡ºç°è‡ªåŠ¨ä»»åŠ¡è®°å½•</li>
</ul>
<p><strong>æˆªå›¾4ï¼ˆå‘å¸ƒæ¦‚è§ˆ/æ‘˜è¦ï¼‰</strong><br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dfc63044672d4cd5a054d21d961320cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSU5bqG5omN5Lio6Z2Z6KeF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528661&amp;x-signature=vVBfxYg9TsyQvInP35ybHkDQg%2FY%3D" alt="æˆªå›¾4-å‘å¸ƒæ¦‚è§ˆ" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-13">5. å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰</h2>
<h3 data-id="heading-14">Q1ï¼šé¢‘é“ç»‘å®šå¤±è´¥ / çŠ¶æ€æ˜¾ç¤ºâ€œå·²è¿‡æœŸâ€æ€ä¹ˆåŠï¼Ÿ</h3>
<ul>
<li>å»ºè®®æ“ä½œï¼šå…ˆ <strong>è§£ç»‘</strong> å† <strong>é‡æ–°ç»‘å®š</strong>ï¼ŒæŒ‰é¡µé¢æç¤ºé‡æ–°å®Œæˆæˆæƒç™»å½•ã€‚</li>
<li>è‹¥ä»å¤±è´¥ï¼šæ£€æŸ¥æµè§ˆå™¨æ’ä»¶æ˜¯å¦å®‰è£…å¯ç”¨ã€ç¬¬ä¸‰æ–¹å¹³å°æ˜¯å¦è§¦å‘é£æ§/äºŒæ¬¡éªŒè¯ã€‚</li>
</ul>
<h3 data-id="heading-15">Q2ï¼šå¯ä»¥å‘å¸ƒæˆ‘è‡ªå·±å†™çš„åŸåˆ›æ–‡ç« å—ï¼Ÿ</h3>
<ul>
<li>å¯ä»¥ã€‚ä¸€èˆ¬åœ¨â€œæ–‡æ¡£â€é¡µé¢æ”¯æŒ <strong>æ–°å»ºæ–‡æ¡£</strong>ï¼Œåˆ›å»ºåæŒ‰â€œæ‰‹åŠ¨å‘å¸ƒâ€æµç¨‹å‘å¸ƒã€‚</li>
</ul>
<h3 data-id="heading-16">Q3ï¼šè‡ªåŠ¨å‘å¸ƒçš„å†…å®¹ä¸å–œæ¬¢ï¼Œå¯ä»¥å¹²é¢„å—ï¼Ÿ</h3>
<ul>
<li>å¯ä»¥ã€‚éšæ—¶å…³é—­å‘å¸ƒä¸­å¿ƒçš„ <strong>è‡ªåŠ¨å‘å¸ƒ</strong> å¼€å…³ã€‚</li>
<li>åŒæ—¶ä½ ä¹Ÿå¯ä»¥åªç»‘å®šä½ å¸Œæœ›è‡ªåŠ¨åˆ†å‘çš„å¹³å°é¢‘é“ï¼Œå‡å°‘ä¸æœŸæœ›çš„å¹³å°è¦†ç›–ã€‚</li>
</ul>
<h3 data-id="heading-17">Q4ï¼šå¦‚ä½•æŸ¥çœ‹å‘å¸ƒæ•ˆæœï¼ˆé˜…è¯»é‡/äº’åŠ¨ç­‰ï¼‰ï¼Ÿ</h3>
<ul>
<li>åœ¨ <strong>å‘å¸ƒä»»åŠ¡</strong> ä¸­ç‚¹å‡»å¤–é“¾è¿›å…¥ç¬¬ä¸‰æ–¹å¹³å°æŸ¥çœ‹æ•°æ®ï¼›</li>
<li>å¹³å°å†…è‹¥æœ‰ç»Ÿè®¡æ¨¡å—ï¼Œä¹Ÿå¯åœ¨æ¦‚è§ˆ/æŠ¥è¡¨ä¸­æŸ¥çœ‹æ±‡æ€»ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-18">6. æ€»ç»“ï¼ˆæœ€çŸ­è·¯å¾„ï¼‰</h2>
<ul>
<li><strong>æ’ä»¶å®‰è£…æˆåŠŸ</strong> â†’ <strong>ç»‘å®šé¢‘é“ï¼ˆæœ‰æ•ˆï¼‰</strong> â†’ <strong>å‡†å¤‡æ–‡æ¡£</strong> â†’ <strong>å‘å¸ƒå¹¶æŸ¥çœ‹ä»»åŠ¡</strong> â†’ ï¼ˆå¯é€‰ï¼‰<strong>å¼€å¯è‡ªåŠ¨å‘å¸ƒ</strong></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[D2C çš„å¦ä¸€ç§é€‰æ‹©â€”Figma MCP + Claude Code]]></title>    <link>https://juejin.cn/post/7597253913249038377</link>    <guid>https://juejin.cn/post/7597253913249038377</guid>    <pubDate>2026-01-20T15:49:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597253913249038377" data-draft-id="7597252004714086442" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="D2C çš„å¦ä¸€ç§é€‰æ‹©â€”Figma MCP + Claude Code"/> <meta itemprop="keywords" content="AIGC,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-20T15:49:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰é‡‘å¾—é‘«"/> <meta itemprop="url" content="https://juejin.cn/user/4406498335130216"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            D2C çš„å¦ä¸€ç§é€‰æ‹©â€”Figma MCP + Claude Code
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4406498335130216/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰é‡‘å¾—é‘«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T15:49:28.000Z" title="Tue Jan 20 2026 15:49:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰æ®µæ—¶é—´ä¸‰é‡‘ç»™å¤§å®¶åˆ†äº«äº†ä¸€æ¬¾å¯ä»¥<strong>æ ¹æ®æˆªå›¾æˆ–è€… URL è‡ªåŠ¨ç”Ÿæˆä»£ç çš„ AI D2C äº§å“â€”â€”ScreenshotToCode</strong>ã€‚å®ƒçš„åŸç†æ˜¯é€šè¿‡å¤šæ¨¡æ€æ¨¡å‹å»åˆ†æå’Œç†è§£ä¸Šä¼ çš„æˆªå›¾ï¼Œç„¶åå†ç”Ÿæˆä»£ç ã€‚æ•´ä¸ªæµç¨‹ç®€å•æ¥è¯´å°±æ˜¯ï¼š<strong>å›¾ç‰‡è¾“å…¥</strong> â†’ <strong>LLMç†è§£</strong> â†’ <strong>ç›´æ¥è¾“å‡ºä»£ç ã€‚</strong></p>
<blockquote>
<p>åŸæ–‡ï¼š<a href="https://juejin.cn/post/7592823500416761882" target="_blank" title="https://juejin.cn/post/7592823500416761882">è™½ç„¶ V0 å¾ˆå¼ºå¤§ï¼Œä½†æ˜¯ ScreenshotToCode ä¾æ—§æœ‰å¸‚åœº</a></p>
</blockquote>
<p>å¬èµ·æ¥å¾ˆç‚«é…·å¯¹å§ï¼Ÿ</p>
<p>ä½†å…¶å®å®ƒæœ‰ä¸€ä¸ª<strong>å¯¹å¼€å‘äººå‘˜æ¥è¯´æ— æ³•å®¹å¿çš„ç¼ºé™·â€”â€”æ— æ³•é›†æˆåˆ°å¼€å‘ç¯å¢ƒä¸­</strong>ï¼ä¹Ÿå°±æ˜¯è¯´å®ƒåªèƒ½ç”Ÿæˆä»¥å•é¡µé¢ä¸ºä¸»çš„ HTML æ–‡ä»¶ã€‚</p>
<p>é‚£æœ‰æ²¡æœ‰å¯ä»¥å’Œå¼€å‘ç¯å¢ƒå®Œç¾é›†æˆçš„å·¥å…·ä»¥åŠæ–¹æ³•å‘¢ï¼Ÿç­”æ¡ˆè‚¯å®šæ˜¯æœ‰çš„ï¼é‚£å°±æ˜¯ Figma MCP + Claude Codeã€‚</p>
<h3 data-id="heading-0">Claude Code + Figma MCP</h3>
<p>é¦–å…ˆï¼Œå‡è®¾ä½ ä»¬å…¬å¸çš„ UI å·²ç»ä½¿ç”¨ Figma è®¾è®¡äº†ä¸€æ¬¾äº§å“è®¾è®¡ç¨¿ï¼Œå¹¶å°†è®¾è®¡ç¨¿é“¾æ¥å‘ç»™äº†ä½ ï¼›</p>
<p>ç„¶åï¼Œç»™ä½ çš„ Claude Code å®‰è£… Figma MCPï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">claude mcp add --transport http figma https://mcp.figma.com/mcp
</code></pre>
<p>å®‰è£…å¥½ä¹‹åæ‰“å¼€ Claude Codeï¼Œå¹¶è¾“å…¥ <code>/mcp</code> é€‰æ‹© figmaï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7814bfa1fed457489876765da0e8cea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=HUOnIZ8keAfrcZyzIJK7d4dXDXM%3D" alt="" loading="lazy"/></p>
<p>ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶ï¼Œæ˜¯éœ€è¦è¿›è¡Œè®¤è¯çš„ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a71b2ebbbe3749db824ca18b8a337e4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=CAfCojnUjZ3lbg78EdpYauD1hyg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8cf4294c086e402eaddd9bcb2c884614~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=B2PNf5edadU484gtwthkrdSOM3c%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef049af0d36a4daf8bb710aaae61e853~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=ROYQLZZKSedGqcmSSKp%2FUfHlFHQ%3D" alt="" loading="lazy"/></p>
<p>ç‚¹å‡» ã€ŒAgree &amp; Allow Accessã€ æŒ‰é’®å³å¯ï¼ŒæˆåŠŸåä¼šæç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5486c2e2987142f5933b34233707aee5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=YmXadNIASfcjf%2BRXpudgVTWFJf8%3D" alt="" loading="lazy"/></p>
<p>Claude Code ä¸­ä¹Ÿä¼šæœ‰ç›¸åº”çš„æç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85c4c562af9c48c19748bce6e1172a37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=wKoJ5H0v3hFAa96hhgDZ7mJEBjk%3D" alt="" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦æ‰“å¼€ Figma ä¸­çš„è®¾è®¡ç¨¿ï¼Œå¹¶é€‰ä¸­è¦è®© AI ç”Ÿæˆä»£ç çš„éƒ¨åˆ†ï¼Œå³å‡»å†é€‰ä¸­ã€Œcopy link to selecttionã€ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a68abcd38e9444468364154fdae8e47d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=QWUjzEygT3hwRfObdRv14%2BgiJ4I%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06438d2efbe9448cb844c94b064d1099~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=LS7652Iz%2FGdTOU1fLBld2Yd4AS4%3D" alt="" loading="lazy"/></p>
<p>å›åˆ° Claude Code åæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œ AI D2C å·¥ä½œäº†ï¼š</p>
<blockquote>
<p>è¾“å…¥æç¤ºè¯ï¼šè¯·ä½¿ç”¨ React + Tailwind CSS ä¸¥æ ¼æŒ‰ç…§è¿™ä¸ªè®¾è®¡ç¨¿ä¸­çš„æ ·å¼å’Œäº¤äº’è¿›è¡Œè¿˜åŸã€‚ã€Œè¿™é‡Œå†å°†åˆšåˆšå¤åˆ¶çš„ Figma Url ç²˜è´´è¿›æ¥ã€</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30cb543476f54569af81edfe7ccf8e0f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=8Q%2FLVogeWJIIxho%2BCGW8d9oNQiE%3D" alt="" loading="lazy"/></p>
<p>ç­‰ä¸ªå‡ åˆ†é’Ÿï¼Œä¸€ä¸ªé¡µé¢å°±å·²ç»ç”»å¥½äº†ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9a9629914d54842a0558358ca750ee0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=9BoyB%2FfDW1SBCcw4v1A7eOmDe2c%3D" alt="" loading="lazy"/></p>
<p>å¯åŠ¨ä»¥åæ£€æŸ¥äº†ä¸€ä¸‹ï¼Œè¿˜åŸåº¦å¯ä»¥è¯´è¾¾åˆ°äº† 95% ä»¥ä¸Šï¼Œç®€ç›´å®Œç¾ï¼ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4417f4beaf94896b8665f163f98a4c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=hyEdJqPt4ZvJvP7%2B6aM4X0ngPCo%3D" alt="" loading="lazy"/></p>
<p>å¦å¤–ï¼Œå®˜æ–¹è¿˜æä¾›äº† VSCode å’Œ Cursor çš„ç¤ºä¾‹ï¼Œæ¥éƒ½æ¥äº†ï¼Œæˆ‘ä»¬å†ä¸€èµ·çœ‹ä¸‹ VSCode + Figmaï½</p>
<h3 data-id="heading-1">VSCode + Figma MCP</h3>
<ul>
<li>æŒ‰ä¸‹ Command + Shift + Pï¼Œè¾“å…¥ MCP ä¹‹åä¼šæœ‰ä¸¤ç§è®¾ç½® MCP çš„æ–¹å¼ï¼Œä¸€ç§æ˜¯ç”¨æˆ·çº§åˆ«çš„è®¾ç½®ï¼Œä¸€ç§æ˜¯å·¥ä½œåŒºçº§åˆ«çš„è®¾ç½®ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥è®¾ç½®ç”¨æˆ·çº§åˆ«çš„</li>
<li>ç„¶ååœ¨ <code>mcp.json</code> ä¸­ç²˜è´´ä»¥ä¸‹ä»£ç ï¼Œå¹¶ç‚¹å‡»å¯åŠ¨å³å¯è¿›è¡Œè®¤è¯ï¼Œè®¤è¯æˆåŠŸåå¼€å§‹è¿›è¡Œ AI D2Cï¼š</li>
</ul>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
   <span class="hljs-attr">"inputs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
   <span class="hljs-attr">"servers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
     <span class="hljs-attr">"figma"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
       <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://mcp.figma.com/mcp"</span><span class="hljs-punctuation">,</span>
       <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http"</span>
     <span class="hljs-punctuation">}</span>
   <span class="hljs-punctuation">}</span>
 <span class="hljs-punctuation">}</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4e138a4c8cf450bb8a001a194bd88fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=HmOF0lDwKfO%2BIkugIE0E2iK2yZE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de9069e5ffda4979b5aa60f5ffb88aaf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=EjXXgTVyHIAqZELW%2FNnCj6vIyM0%3D" alt="" loading="lazy"/></p>
<p>æ‰“å¼€ Github Copilot è¿›è¡Œ AI D2Cï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/831e94e129e342d1acbe4df63ff916b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=CH%2F4EnfmK6X6Q41EsXYljbmQKEA%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67868eb07e00492d84dc5ab7b4d75693~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=QK52yv7Hby%2BnXRgf3lnXQFG1wrM%3D" alt="" loading="lazy"/></p>
<p>ä¸çŸ¥é“æˆ‘ä¸ä¼šç”¨è¿˜æ˜¯å’‹ï¼ŒGithub Copilot çš„äº§å‡ºç»“æœè®©æˆ‘éš¾ä»¥ç½®ä¿¡ï¼š</p>
<ul>
<li>ä»£ç æ··ä¹±</li>
<li>å¥½å¤š UI éƒ¨åˆ†ç›´æ¥ä½¿ç”¨å›¾å±‚æˆªå›¾æ¥å®ç°çš„ï¼Œæ¯”å¦‚æœç´¢æ¡†ï¼Œä½ æ ¹æœ¬å°±ç‚¹å‡»ä¸äº†</li>
<li>å¸ƒå±€æ··ä¹±ï¼Œåˆ—è¡¨ä¸Šéƒ½å‡ºç°äº†é‡å </li>
</ul>
<p>Agent æ¨¡å¼ä¸‹ä½¿ç”¨çš„æ¨¡å‹æ˜¯ GPT-4.1ï¼Œå“åº”é€Ÿåº¦éå¸¸æ…¢ï¼Œäº§å‡ºç»“æœè¿˜æ˜¯è¿™ä¸ªæ ·å­ï¼Œä½“éªŒç®€ç›´ç³Ÿç³•é€äº†ï¼</p>
<p>è¿˜æ˜¯æ¨èä½¿ç”¨ Claude Code + GLM 4.7 å§ğŸ˜‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æé™ç§‘æŠ€è£è†º 2025 é‡‘çŒ¿å¥– â€” â€œå¹´åº¦å›½äº§åŒ–ä¼˜ç§€ä»£è¡¨å‚å•†â€ï¼Œè‡ªä¸»å¯æ§æœç´¢æ–¹æ¡ˆ Easysearch è·è¡Œä¸šé«˜åº¦è®¤å¯]]></title>    <link>https://juejin.cn/post/7597326073671729167</link>    <guid>https://juejin.cn/post/7597326073671729167</guid>    <pubDate>2026-01-20T15:50:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597326073671729167" data-draft-id="7597270795212423208" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æé™ç§‘æŠ€è£è†º 2025 é‡‘çŒ¿å¥– â€” â€œå¹´åº¦å›½äº§åŒ–ä¼˜ç§€ä»£è¡¨å‚å•†â€ï¼Œè‡ªä¸»å¯æ§æœç´¢æ–¹æ¡ˆ Easysearch è·è¡Œä¸šé«˜åº¦è®¤å¯"/> <meta itemprop="keywords" content="æ•°æ®åº“,æœç´¢å¼•æ“"/> <meta itemprop="datePublished" content="2026-01-20T15:50:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æé™å®éªŒå®¤"/> <meta itemprop="url" content="https://juejin.cn/user/1258294223312599"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æé™ç§‘æŠ€è£è†º 2025 é‡‘çŒ¿å¥– â€” â€œå¹´åº¦å›½äº§åŒ–ä¼˜ç§€ä»£è¡¨å‚å•†â€ï¼Œè‡ªä¸»å¯æ§æœç´¢æ–¹æ¡ˆ Easysearch è·è¡Œä¸šé«˜åº¦è®¤å¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1258294223312599/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æé™å®éªŒå®¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T15:50:28.000Z" title="Tue Jan 20 2026 15:50:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿‘æ—¥äºä¸Šæµ·æ˜æ·ä¸‡ä¸½é…’åº—æˆåŠŸä¸¾åŠçš„ â€œ<strong>2025 ç¬¬å…«å±Šé‡‘çŒ¿å¤§æ•°æ®äº§ä¸šå‘å±•è®ºå› â€” æš¨ AI Infra &amp; Data Agent è¶‹åŠ¿è®ºå›</strong>â€ å¤§ä¼šä¸Šï¼Œ<strong>æé™æ•°æ®ï¼ˆåŒ—äº¬ï¼‰ç§‘æŠ€æœ‰é™å…¬å¸ï¼ˆä»¥ä¸‹ç®€ç§°â€œæé™ç§‘æŠ€â€ï¼‰</strong> å‡­å€Ÿå…¶åœ¨åˆ†å¸ƒå¼æœç´¢å‹æ•°æ®åº“é¢†åŸŸçš„æŠ€æœ¯çªç ´ä¸å“è¶Šçš„å›½äº§åŒ–å®è·µï¼ŒæˆåŠŸå…¥é€‰ã€Š<strong>2025 ä¸­å›½å¤§æ•°æ®äº§ä¸šã€Œå¹´åº¦å›½äº§åŒ–ä¼˜ç§€ä»£è¡¨å‚å•†ã€</strong>ã€‹æ¦œå•ï¼Œå¹¶è·é¢è¿™ä¸€è¡Œä¸šé‡ç£…å¥–é¡¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22a64040821c46d986272af278c3a58d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p6B6ZmQ5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769529027&amp;x-signature=qa4TrINjxBYZKUeMlAwprC4slbo%3D" alt="" loading="lazy"/></p>
<p>æœ¬å±Šè®ºå›ç”±é‡‘çŒ¿ç»„å§”ä¼šã€æ•°æ®çŒ¿ã€ä¸Šæµ·å¸‚æ•°å•†åä¼šåŠä¸Šæµ·å¤§æ•°æ®è”ç›Ÿè”åˆä¸»åŠï¼Œä»¥â€œ<strong>æ•°æ®æœ‰çŒ¿Â·æ™ºè§åå¹´</strong>â€ä¸ºä¸»é¢˜ï¼Œå¸å¼•äº†è¿‘åƒå®¶ä¼ä¸šå‚ä¸ç”³æŠ¥ã€‚ç»è¿‡ä¸¥æ ¼çš„åˆå®¡ã€å…¬å®¡ä¸ç»ˆå®¡äº¤å‰éªŒè¯æœºåˆ¶ï¼Œæé™ç§‘æŠ€æœ€ç»ˆä»ä¼—å¤šç«äº‰è€…ä¸­è„±é¢–è€Œå‡ºï¼Œè£ç™»æ¦œå•ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e834ea43b3fc48ed8c511ff98545f4d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p6B6ZmQ5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769529027&amp;x-signature=uU%2F2YDxQ%2FETkfbGI6hqpFWd8igY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">æ·±è€•æ ¸å¿ƒæœç´¢æŠ€æœ¯ï¼Œå¡«è¡¥å›½äº§åŒ–ç©ºç™½</h2>
<p>æé™ç§‘æŠ€æˆç«‹äº 2021 å¹´ 12 æœˆï¼Œæ˜¯ä¸€å®¶ä¸“æ³¨äºå¤§æ•°æ®æœç´¢ä¸åˆ†æçš„åŸºç¡€è½¯ä»¶å…¬å¸ã€‚å…¬å¸æ€»éƒ¨ä½äºåŒ—äº¬ï¼Œåœ¨é•¿æ²™è®¾ç«‹ç ”å‘ä¸­å¿ƒï¼Œå¹¶åœ¨ä¸Šæµ·ã€å¹¿å·è®¾ç«‹åŠäº‹å¤„æˆ–æœåŠ¡ä¸­å¿ƒã€‚å…¶æ ¸å¿ƒå›¢é˜Ÿå‡æ¥è‡ª Elasticsearch åŸå‚åŠä¸­æ–‡ç¤¾åŒºï¼Œæ‹¥æœ‰å¤šå¹´ ES æºç å¼€å‘ç»éªŒï¼Œè‡´åŠ›äºâ€œè®©æœç´¢æ›´ç®€å•â€ï¼Œæ‰“é€ æè‡´æ˜“ç”¨çš„æ•°æ®æ¢ç´¢ä¸åˆ†æä½“éªŒã€‚</p>
<p>å…¬å¸è‡ªä¸»ç ”å‘çš„æ ¸å¿ƒäº§å“ Easysearch æœç´¢å‹æ•°æ®åº“ï¼Œæ˜¯æˆ‘å›½åœ¨åˆ†å¸ƒå¼æœç´¢å‹æ•°æ®åº“é¢†åŸŸå®ç°å…³é”®å›½äº§åŒ–æ›¿ä»£çš„ä»£è¡¨æ€§æˆæœã€‚è¯¥äº§å“ç²¾å‡†å¡«è¡¥äº†å›½å†…åœ¨è½»é‡åŒ–ã€é«˜æ€§èƒ½ã€è‡ªä¸»å¯æ§æœç´¢å¼•æ“æ–¹é¢çš„å¸‚åœºç©ºç™½ã€‚</p>
<h2 data-id="heading-1">äº§å“æ€§èƒ½å“è¶Šï¼Œå®ç°æ— ç¼è¿ç§»ä¸è¶…è¶Š</h2>
<p>Easysearch æ”¯æŒç»“æ„åŒ–ä¸éç»“æ„åŒ–æ•°æ®æ£€ç´¢ã€å…¨æ–‡æ£€ç´¢ã€å‘é‡æ£€ç´¢ã€ç©ºé—´åœ°ç†ä½ç½®ä¿¡æ¯æ£€ç´¢ã€å¤šæ¨¡æ€æ··åˆæ£€ç´¢ã€ç»„åˆæŸ¥è¯¢ã€å¤šè¯­ç§æ”¯æŒã€è¯­ä¹‰åˆ†æã€èšåˆåˆ†æç­‰å¤šç§æ ¸å¿ƒåŠŸèƒ½ã€‚æµ‹è¯•è¡¨æ˜ï¼Œå…¶æ€§èƒ½å·²è¾¾åˆ°ç”šè‡³ä¼˜äºå›½å¤–é¢†å…ˆäº§å“ã€‚</p>
<p>åœ¨äº§å“èƒ½åŠ›ä¸Šï¼ŒEasysearch ä¸ä»…å®Œå…¨å…¼å®¹ Elasticsearch çš„ç”Ÿæ€æ¥å£ï¼Œä¿éšœäº†ç”¨æˆ·ä¸šåŠ¡çš„æ— ç¼å¹³æ»‘è¿ç§»ï¼Œæ›´åœ¨æ€§èƒ½ä¼˜åŒ–ã€å­˜å‚¨æ•ˆç‡ã€ä¼ä¸šçº§å®‰å…¨åŠåŸç”Ÿä¸­æ–‡å¤„ç†ç­‰æ–¹é¢å®ç°äº†æ˜¾è‘—è¶…è¶Šã€‚å…¶å†…ç½®çš„ Web ç®¡ç†æ§åˆ¶å°ã€å…¨é¢çš„æ•°æ®åŠ å¯†ä¸æƒé™ç®¡æ§åŠŸèƒ½ï¼Œæä¾›äº†å¼€ç®±å³ç”¨çš„ä¼ä¸šçº§ä½“éªŒã€‚</p>
<h2 data-id="heading-2">æ„å»ºå®Œæ•´ä¿¡åˆ›ç”Ÿæ€</h2>
<p>å°¤ä¸ºå…³é”®çš„æ˜¯ï¼ŒEasysearch ç‡å…ˆå®Œæˆäº†ä¸å›½äº§ä¸»æµ CPUï¼ˆå¦‚é²²é¹ã€é£è…¾ã€æµ·å…‰ã€é¾™èŠ¯ã€ç”³å¨ã€å…†èŠ¯ç­‰ï¼‰å’Œæ“ä½œç³»ç»Ÿï¼ˆå¦‚ç»Ÿä¿¡ UOSã€é“¶æ²³éº’éºŸã€å¼€æºæ¬§æ‹‰ç­‰ï¼‰çš„æ·±åº¦é€‚é…ä¸äº’è®¤è¯ï¼Œæ„å»ºäº†å®Œæ•´çš„ä¿¡åˆ›æŠ€æœ¯æ ˆæ”¯æŒèƒ½åŠ›ï¼Œå½»åº•è§£å†³äº†å›½å¤–äº§å“åœ¨å›½äº§åŒ–ç¯å¢ƒä¸‹å…¼å®¹æ€§å·®ã€ç»´æŠ¤å›°éš¾ã€æ›´æ–°å—é™ç­‰é•¿æœŸå­˜åœ¨çš„ç—›ç‚¹ã€‚</p>
<p>åœ¨æ ¸å¿ƒæŠ€æœ¯å›½äº§åŒ–æ„ä¹‰ä¸Šï¼ŒEasysearch é€šè¿‡å®Œå…¨è‡ªä¸»å¯æ§çš„åˆ†å¸ƒå¼æœç´¢æŠ€æœ¯ä½“ç³»ï¼Œçªç ´äº†å…³é”®åŸºç¡€è½¯ä»¶ä¾èµ–å›½å¤–ä¼ä¸šçš„å±€é¢ï¼Œæ»¡è¶³äº†æ”¿åºœã€é‡‘èã€èƒ½æºã€è¿è¥å•†ç­‰è¡Œä¸šå¯¹â€œå¯æ§ã€å®‰å…¨ã€å¯æ›¿ä»£â€çš„æˆ˜ç•¥éœ€æ±‚ã€‚åŒæ—¶ï¼Œå…¶å‘é‡æœç´¢å’Œ AI æ£€ç´¢èƒ½åŠ›å¡«è¡¥äº†å›½å†…åœ¨æ™ºèƒ½æœç´¢ä¸å¤§æ¨¡å‹ç»“åˆé¢†åŸŸçš„æŠ€æœ¯ç¼ºå£ã€‚</p>
<h2 data-id="heading-3">è·æƒå¨èµ„è´¨è®¤å¯ï¼Œè½åœ°ä¼—å¤šå¤´éƒ¨å®¢æˆ·</h2>
<p>æé™ç§‘æŠ€åŠ Easysearch å·²è·å¾—å¤šé¡¹æƒå¨èµ„è´¨è®¤è¯ï¼ŒåŒ…æ‹¬å›½å®¶é«˜æ–°æŠ€æœ¯ä¼ä¸šã€ISO ä¸‰å¤§ç®¡ç†ä½“ç³»è®¤è¯ï¼Œå¹¶è£è· 2023 å¹´æ˜Ÿæ²³æ¡ˆä¾‹æ•°æ®åº“æ ‡æ†æ¡ˆä¾‹ã€‚äº§å“äº¦é€šè¿‡äº†ä¿¡é€šé™¢åŸºç¡€èƒ½åŠ›ä¸“é¡¹æµ‹è¯„åŠä¸­å›½æ³°å°”å®éªŒå®¤æ£€éªŒæµ‹è¯•ã€‚</p>
<p>ç›®å‰ï¼ŒEasysearch å·²åœ¨é‡‘èã€è¿è¥å•†ã€åˆ¶é€ ã€æ”¿ä¼ç­‰å¤šé¢†åŸŸå®ç°è§„æ¨¡åŒ–è½åœ°ï¼ŒæœåŠ¡å®¢æˆ·åŒ…æ‹¬ç§»åŠ¨äº‘ã€ä¸­å›½ä¸€æ±½ã€ä¸­å›½äººä¿ã€ä¸œèè¯åˆ¸ã€èˆªå¤©ä¿¡æ¯ç­‰å¤´éƒ¨ä¼ä¸šï¼Œç´¯è®¡ä¸‹è½½éƒ¨ç½²é‡å·²è¶…è¿‡ 500 ä¸‡æ¬¡ã€‚å…¶ä¸­ï¼Œå…¬å¸å¼€å‘çš„ä¸­æ–‡åˆ†è¯å™¨ï¼ˆIKã€Pinyinï¼‰ã€å‹æµ‹å·¥å…·ï¼ˆLoadgenï¼‰ã€æ•°æ®è¿ç§»å·¥å…·ï¼ˆESMï¼‰å·²è¢« 85% çš„ä¸­å›½ Elasticsearch ç”¨æˆ·éƒ¨ç½²åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ã€‚</p>
<h2 data-id="heading-4">è£è·è¡Œä¸šå¤§å¥–ï¼Œå½°æ˜¾æ ‡æ†ä»·å€¼</h2>
<p>æ­¤æ¬¡è£è· â€œå¹´åº¦å›½äº§åŒ–ä¼˜ç§€ä»£è¡¨å‚å•†â€ å¥–é¡¹ï¼Œä¸ä»…æ˜¯è¡Œä¸šå¯¹æé™ç§‘æŠ€æŠ€æœ¯å®åŠ›ä¸å›½äº§åŒ–è´¡çŒ®çš„é«˜åº¦è®¤å¯ï¼Œæ›´å½°æ˜¾äº†å…¬å¸åœ¨æ¨åŠ¨å¤§æ•°æ®äº§ä¸šè‡ªä¸»åˆ›æ–°è¿›ç¨‹ä¸­çš„æ ‡æ†ä½œç”¨ã€‚</p>
<p>æé™ç§‘æŠ€åˆ›å§‹äººè¡¨ç¤ºï¼š</p>
<blockquote>
<p>â€œæˆ‘ä»¬åšä¿¡â€˜è¿½æ±‚æè‡´ï¼Œæ— é™å¯èƒ½â€™ã€‚è·å¾—è¿™ä»½è£èª‰ï¼Œæ˜¯å¯¹æˆ‘ä»¬å›¢é˜Ÿå¤šå¹´æ¥åšæŒè‡ªä¸»åˆ›æ–°ã€æ·±è€•æœç´¢æŠ€æœ¯çš„æœ€å¥½é¼“åŠ±ã€‚æœªæ¥ï¼Œæé™ç§‘æŠ€å°†æŒç»­åŠ å¤§ç ”å‘æŠ•å…¥ï¼Œä»¥æŠ€æœ¯åˆ›æ–°é©±åŠ¨äº§ä¸šå‡çº§ï¼Œä¸ºå„è¡Œä¸šå®¢æˆ·æä¾›æ›´é«˜æ•ˆã€æ›´å®‰å…¨ã€æ›´æ™ºèƒ½çš„æ•°æ®æ¢ç´¢ä¸åˆ†æèƒ½åŠ›ï¼ŒåŠ©åŠ›ä¸­å›½å¤§æ•°æ®äº§ä¸šåœ¨æ™ºèƒ½æ—¶ä»£å®ç°é«˜è´¨é‡ã€è‡ªä¸»å¯æ§çš„å‘å±•ã€‚â€</p>
</blockquote>
<hr/>
<p>ç›¸å…³é“¾æ¥ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F0aMKBWhE1cJ2toAMkUwGYw" target="_blank" title="https://mp.weixin.qq.com/s/0aMKBWhE1cJ2toAMkUwGYw" ref="nofollow noopener noreferrer">ã€Š2025 ä¸­å›½å¤§æ•°æ®äº§ä¸šå¹´åº¦ã€Œå›½äº§åŒ–ä¼˜ç§€ä»£è¡¨å‚å•†ã€ã€‹æ¦œå•/å¥–é¡¹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F_77xDmEvPMli_fZh0YsYCA" target="_blank" title="https://mp.weixin.qq.com/s/_77xDmEvPMli_fZh0YsYCA" ref="nofollow noopener noreferrer">ã€é‡‘çŒ¿å›½äº§åŒ–å±•ã€‘Easysearch â€”â€” ä¸€ä¸ªè‡ªä¸»å¯æ§ã€å®‰å…¨å¯é çš„ä¼ä¸šçº§æœç´¢è§£å†³æ–¹æ¡ˆ</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸‡å­—é•¿æ–‡ï¼ææ‡‚æœºå™¨å­¦ä¹ ä¸­åŠç›‘ç£å­¦ä¹ çš„ç»å…¸æ–¹æ³•ï¼]]></title>    <link>https://juejin.cn/post/7597258378590830602</link>    <guid>https://juejin.cn/post/7597258378590830602</guid>    <pubDate>2026-01-20T15:53:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597258378590830602" data-draft-id="7597251197426466842" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸‡å­—é•¿æ–‡ï¼ææ‡‚æœºå™¨å­¦ä¹ ä¸­åŠç›‘ç£å­¦ä¹ çš„ç»å…¸æ–¹æ³•ï¼"/> <meta itemprop="keywords" content="é¢è¯•,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-20T15:53:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aicoting"/> <meta itemprop="url" content="https://juejin.cn/user/933911964427818"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸‡å­—é•¿æ–‡ï¼ææ‡‚æœºå™¨å­¦ä¹ ä¸­åŠç›‘ç£å­¦ä¹ çš„ç»å…¸æ–¹æ³•ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/933911964427818/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aicoting
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T15:53:17.000Z" title="Tue Jan 20 2026 15:53:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ¨èç›´æ¥ç½‘ç«™åœ¨çº¿é˜…è¯»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Faicoting.cn%2F" target="_blank" title="https://aicoting.cn/" ref="nofollow noopener noreferrer">aicoting.cn</a></p>
</blockquote>
<p>åŠç›‘ç£å­¦ä¹ ï¼ˆSemi-Supervised Learningï¼‰æ˜¯ä¸€ç±»ä»‹äºç›‘ç£å­¦ä¹ å’Œæ— ç›‘ç£å­¦ä¹ ä¹‹é—´çš„æ–¹æ³•ï¼Œæ—¨åœ¨åˆ©ç”¨å°‘é‡å¸¦æ ‡ç­¾çš„æ•°æ®ä¸å¤§é‡æ— æ ‡ç­¾çš„æ•°æ®å…±åŒè®­ç»ƒæ¨¡å‹ã€‚åœ¨ç°å®ä»»åŠ¡ä¸­ï¼Œæ ‡æ³¨æ•°æ®é€šå¸¸è·å–æˆæœ¬é«˜ï¼Œè€Œæ— æ ‡ç­¾æ•°æ®ä¸°å¯Œï¼Œæ¯”å¦‚è¦è¿›è¡Œç‰©ä½“æ£€æµ‹ï¼Œé‚£ä¹ˆå°±è¦äººå·¥ç”¨ä¸€ä¸ªæ–¹æ¡†æŠŠä¸åŒçš„ç‰©ä½“æ ‡æ³¨å‡ºæ¥ï¼Œè€Œä¸”ä¸åŒçš„ç±»åˆ«æ ‡æ³¨ä¹Ÿè¦ä¸åŒï¼Œæˆ‘åœ¨å¤§ä¸‰çš„æ—¶å€™å°±å¹²è¿‡ï¼Œä»é‚£ä¹‹åå†ä¹Ÿä¸æƒ³æ ‡æ³¨äº†ï¼Œè¿™ä¸ªæ˜¯è€—è´¹æ—¶é—´å’Œç²¾åŠ›å·¨å¤§çš„ä¸€ä¸ªå·¥ä½œã€‚</p>
<p>åŠç›‘ç£å­¦ä¹ é€šè¿‡æŒ–æ˜æ•°æ®åˆ†å¸ƒç»“æ„ä¸æ ‡ç­¾ä¿¡æ¯ä¹‹é—´çš„å…³è”ï¼Œæé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚å…¶ä¸»è¦æŠ€æœ¯åŒ…æ‹¬è‡ªè®­ç»ƒã€ååŒè®­ç»ƒã€åŸºäºå›¾çš„æ ‡ç­¾ä¼ æ’­ã€åŠç›‘ç£æ”¯æŒå‘é‡æœºä»¥åŠä¸æ·±åº¦å­¦ä¹ ç»“åˆçš„ç”Ÿæˆå¼ä¸ä¸€è‡´æ€§æ­£åˆ™åŒ–æ–¹æ³•ï¼Œå¹¿æ³›åº”ç”¨äºæ–‡æœ¬åˆ†ç±»ã€å›¾åƒè¯†åˆ«ã€åŒ»ç–—åˆ†æç­‰åœºæ™¯ã€‚</p>
<h2 data-id="heading-0">è‡ªè®­ç»ƒ</h2>
<p>è‡ªè®­ç»ƒï¼ˆSelf-trainingï¼‰æ˜¯åŠç›‘ç£å­¦ä¹ ä¸­æœ€ç»å…¸ã€æœ€ç›´è§‚çš„æ–¹æ³•ä¹‹ä¸€ã€‚å®ƒé€šè¿‡åˆ©ç”¨å°‘é‡å¸¦æ ‡ç­¾æ•°æ®è®­ç»ƒä¸€ä¸ªåˆå§‹æ¨¡å‹ï¼Œå†å€ŸåŠ©è¯¥æ¨¡å‹å¯¹æœªæ ‡æ³¨æ•°æ®è¿›è¡Œé¢„æµ‹ï¼Œå°†é«˜ç½®ä¿¡åº¦çš„é¢„æµ‹ç»“æœä½œä¸ºä¼ªæ ‡ç­¾ï¼ˆpseudo labelsï¼‰ï¼Œé€æ­¥æ‰©å……è®­ç»ƒé›†ï¼Œä»è€Œæå‡æ¨¡å‹æ€§èƒ½ã€‚è‡ªè®­ç»ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ æ¨¡å‹è‡ªå·±æ•™è‡ªå·±ï¼Œä¸æ–­åˆ©ç”¨æ— æ ‡ç­¾æ•°æ®ä¸­æ½œåœ¨çš„ä¿¡æ¯æ¥æ”¹è¿›é¢„æµ‹èƒ½åŠ›ã€‚</p>
<p>è‡ªè®­ç»ƒçš„ä¸€èˆ¬è¿‡ç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>åˆå§‹è®­ç»ƒï¼šä½¿ç”¨å°‘é‡æ ‡æ³¨æ•°æ®è®­ç»ƒä¸€ä¸ªç›‘ç£å­¦ä¹ æ¨¡å‹ã€‚</li>
<li>ä¼ªæ ‡ç­¾ç”Ÿæˆï¼šç”¨è¯¥æ¨¡å‹é¢„æµ‹æœªæ ‡æ³¨æ•°æ®ï¼Œå¹¶è®¡ç®—æ¯ä¸ªæ ·æœ¬çš„ç½®ä¿¡åº¦ã€‚</li>
<li>æ ·æœ¬ç­›é€‰ï¼šé€‰æ‹©ç½®ä¿¡åº¦è¾ƒé«˜çš„é¢„æµ‹æ ·æœ¬ï¼Œèµ‹äºˆå…¶ä¼ªæ ‡ç­¾ã€‚</li>
<li>æ•°æ®æ‰©å……ï¼šå°†è¿™äº›ä¼ªæ ‡ç­¾æ ·æœ¬åŠ å…¥è®­ç»ƒé›†ï¼Œå½¢æˆæ–°çš„â€œæ ‡æ³¨â€æ•°æ®é›†ã€‚</li>
<li>è¿­ä»£æ›´æ–°ï¼šé‡æ–°è®­ç»ƒæ¨¡å‹ï¼Œå¹¶é‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œç›´åˆ°æ€§èƒ½æ”¶æ•›æˆ–è¾¾åˆ°é¢„è®¾è¿­ä»£æ¬¡æ•°ã€‚</li>
</ol>
<p>ä»¥é€»è¾‘å›å½’ï¼ˆLogistic Regressionï¼‰ä¸ºä¾‹ï¼Œå¯ä»¥å…ˆç”¨å°‘é‡å¸¦æ ‡ç­¾æ ·æœ¬è®­ç»ƒä¸€ä¸ªæ¨¡å‹ï¼Œç„¶ååˆ©ç”¨è¯¥æ¨¡å‹é¢„æµ‹æœªæ ‡æ³¨æ ·æœ¬çš„ç±»åˆ«ï¼Œå¹¶é€‰æ‹©ç½®ä¿¡åº¦è¶…è¿‡é˜ˆå€¼çš„æ ·æœ¬ä½œä¸ºä¼ªæ ‡ç­¾ï¼Œé€æ­¥åŠ å…¥è®­ç»ƒé›†ï¼Œè¿­ä»£æ›´æ–°æ¨¡å‹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> load_iris
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LogisticRegression
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># 1. åŠ è½½æ•°æ®ï¼Œåªå–å‰ä¸¤ä¸ªç‰¹å¾ä¾¿äºäºŒç»´å¯è§†åŒ–</span>
X, y = load_iris(return_X_y=<span class="hljs-literal">True</span>)
X = X[:, :<span class="hljs-number">2</span>]

n_labeled = <span class="hljs-number">30</span>
X_labeled, y_labeled = X[:n_labeled], y[:n_labeled]
X_unlabeled = X[n_labeled:]

<span class="hljs-comment"># 2. åˆå§‹è®­ç»ƒ</span>
model = LogisticRegression(max_iter=<span class="hljs-number">200</span>)
model.fit(X_labeled, y_labeled)

<span class="hljs-comment"># å¯è§†åŒ–å‡½æ•°ï¼šç»˜åˆ¶å†³ç­–è¾¹ç•Œ + å·²æ ‡æ³¨/ä¼ªæ ‡ç­¾æ ·æœ¬</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">plot_step</span>(<span class="hljs-params">X_labeled, y_labeled, X_unlabeled, title</span>):
    h = <span class="hljs-number">.02</span>  <span class="hljs-comment"># ç½‘æ ¼æ­¥é•¿</span>
    x_min, x_max = X[:, <span class="hljs-number">0</span>].<span class="hljs-built_in">min</span>() - <span class="hljs-number">1</span>, X[:, <span class="hljs-number">0</span>].<span class="hljs-built_in">max</span>() + <span class="hljs-number">1</span>
    y_min, y_max = X[:, <span class="hljs-number">1</span>].<span class="hljs-built_in">min</span>() - <span class="hljs-number">1</span>, X[:, <span class="hljs-number">1</span>].<span class="hljs-built_in">max</span>() + <span class="hljs-number">1</span>
    xx, yy = np.meshgrid(np.arange(x_min, x_max, h),
                         np.arange(y_min, y_max, h))
    
    Z = model.predict(np.c_[xx.ravel(), yy.ravel()])
    Z = Z.reshape(xx.shape)
    
    plt.contourf(xx, yy, Z, alpha=<span class="hljs-number">0.3</span>, cmap=plt.cm.Set1)
    plt.scatter(X_unlabeled[:, <span class="hljs-number">0</span>], X_unlabeled[:, <span class="hljs-number">1</span>], 
                c=<span class="hljs-string">'gray'</span>, marker=<span class="hljs-string">'x'</span>, label=<span class="hljs-string">'Unlabeled'</span>, alpha=<span class="hljs-number">0.5</span>)
    plt.scatter(X_labeled[:, <span class="hljs-number">0</span>], X_labeled[:, <span class="hljs-number">1</span>], 
                c=y_labeled, cmap=plt.cm.Set1, edgecolor=<span class="hljs-string">'k'</span>, label=<span class="hljs-string">'Labeled'</span>)
    plt.title(title)
    plt.legend()
    plt.show()

<span class="hljs-comment"># 3. è‡ªè®­ç»ƒå¾ªç¯</span>
<span class="hljs-keyword">for</span> step <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):
    plot_step(X_labeled, y_labeled, X_unlabeled, <span class="hljs-string">f"Iteration <span class="hljs-subst">{step}</span>"</span>)
    
    probs = model.predict_proba(X_unlabeled)
    pseudo_labels = probs.argmax(axis=<span class="hljs-number">1</span>)
    confidences = probs.<span class="hljs-built_in">max</span>(axis=<span class="hljs-number">1</span>)
    mask = confidences &gt; <span class="hljs-number">0.9</span>  <span class="hljs-comment"># é«˜ç½®ä¿¡åº¦æ ·æœ¬</span>
    
    <span class="hljs-keyword">if</span> mask.<span class="hljs-built_in">sum</span>() == <span class="hljs-number">0</span>:
        <span class="hljs-keyword">break</span>
    
    <span class="hljs-comment"># å°†ä¼ªæ ‡ç­¾æ ·æœ¬åŠ å…¥è®­ç»ƒé›†</span>
    X_labeled = np.vstack([X_labeled, X_unlabeled[mask]])
    y_labeled = np.concatenate([y_labeled, pseudo_labels[mask]])
    X_unlabeled = X_unlabeled[~mask]
    
    <span class="hljs-comment"># é‡æ–°è®­ç»ƒ</span>
    model.fit(X_labeled, y_labeled)

<span class="hljs-comment"># æœ€ç»ˆå¯è§†åŒ–</span>
plot_step(X_labeled, y_labeled, X_unlabeled, <span class="hljs-string">"Final Model"</span>)
</code></pre>
<p>è¾“å‡ºå¦‚ä¸‹ï¼ŒèƒŒæ™¯é¢œè‰²è¡¨ç¤ºæ¨¡å‹é¢„æµ‹çš„ åˆ†ç±»åŒºåŸŸï¼›åœ†ç‚¹è¡¨ç¤ºå·²æ ‡æ³¨/ä¼ªæ ‡æ³¨æ ·æœ¬ï¼Œè‰²è¡¨ç¤º æœªæ ‡æ³¨æ ·æœ¬ï¼›</p>
<p>æ¯æ¬¡è¿­ä»£ä¼šç”»ä¸€å¼ å›¾ï¼Œå¯ä»¥çœ‹åˆ°éšç€ä¼ªæ ‡ç­¾æ ·æœ¬åŠ å…¥ï¼Œå†³ç­–è¾¹ç•Œé€æ¸å˜åŒ–ï¼Œè¦†ç›–æ›´å¤šæœªæ ‡æ³¨æ•°æ®ã€‚</p>
<p>åˆå§‹è¿­ä»£æ—¶ï¼Œæ¨¡å‹ä»…ä¾èµ–å°‘é‡æ ‡æ³¨æ ·æœ¬ï¼Œåˆ†ç±»åŒºåŸŸç›¸å¯¹ç‹­çª„ï¼›éšç€é«˜ç½®ä¿¡åº¦ä¼ªæ ‡ç­¾è¢«åŠ å…¥è®­ç»ƒé›†ï¼Œæ¨¡å‹èƒ½å¤Ÿåˆ©ç”¨æ›´å¤šä¿¡æ¯è¿›è¡Œæ›´æ–°ï¼Œè®­ç»ƒæ ·æœ¬åˆ†å¸ƒæ›´åŠ ä¸°å¯Œï¼Œåˆ†ç±»è¾¹ç•Œé€æ¸è°ƒæ•´ï¼Œè¦†ç›–æ›´å¤šæœªæ ‡æ³¨æ ·æœ¬ã€‚æœ€ç»ˆï¼Œæ¨¡å‹çš„å†³ç­–èƒ½åŠ›æ˜æ˜¾å¢å¼ºï¼Œæœªæ ‡æ³¨æ ·æœ¬è¢«è¾ƒå¥½åœ°åˆ’åˆ†åˆ°æ­£ç¡®ç±»åˆ«ä¸­ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b37f2dd105542a1affed039a276f1df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769529196&amp;x-signature=gxEdSpyY53eMMyZm6QCaJLs8Pcg%3D" alt="" loading="lazy"/></p>
<p>è‡ªè®­ç»ƒçš„ä¼˜ç‚¹åœ¨äºå®ç°ç®€å•ï¼Œå‡ ä¹å¯ä»¥åº”ç”¨äºä»»ä½•ç›‘ç£å­¦ä¹ æ¨¡å‹ï¼Œä¾‹å¦‚é€»è¾‘å›å½’ã€SVMã€ç¥ç»ç½‘ç»œç­‰ï¼Œè€Œä¸”èƒ½å¤Ÿæœ‰æ•ˆåˆ©ç”¨å¤§é‡æœªæ ‡æ³¨æ•°æ®ï¼Œåœ¨æ ‡æ³¨æ ·æœ¬ç¨€ç¼ºçš„æƒ…å†µä¸‹æå‡æ€§èƒ½ã€‚ç„¶è€Œï¼Œè¯¥æ–¹æ³•ä¹Ÿå­˜åœ¨å±€é™æ€§ï¼šå¦‚æœåˆå§‹æ¨¡å‹è´¨é‡è¾ƒå·®æˆ–é¢„æµ‹å‡ºç°é”™è¯¯ï¼Œé«˜ç½®ä¿¡åº¦çš„ä¼ªæ ‡ç­¾å¯èƒ½ä¼šä¼ æ’­é”™è¯¯ï¼Œä»è€Œé™ä½æ•´ä½“æ€§èƒ½ã€‚æ­¤å¤–ï¼Œå®ƒå¯¹æ•°æ®åˆ†å¸ƒä¹Ÿæœ‰ä¸€å®šä¾èµ–ï¼Œç±»åˆ«åˆ†å¸ƒä¸å‡è¡¡æˆ–è¾¹ç•Œå¤æ‚æ—¶å®¹æ˜“äº§ç”Ÿåå·®ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œç ”ç©¶è€…æå‡ºäº†å¤šç§æ”¹è¿›æ–¹æ³•ï¼Œä¾‹å¦‚åŠ¨æ€è°ƒæ•´ç½®ä¿¡åº¦é˜ˆå€¼ä»¥å‡å°‘é”™è¯¯ä¼ æ’­ï¼Œä½¿ç”¨å¤šä¸ªæ¨¡å‹äº’ç›¸ç”Ÿæˆä¼ªæ ‡ç­¾ä»¥é™ä½åå·®ï¼Œæˆ–è€…ç»“åˆæ·±åº¦å­¦ä¹ ä¸­çš„ä¸€è‡´æ€§æ­£åˆ™åŒ–ã€ç”Ÿæˆå¯¹æŠ—ç½‘ç»œç­‰æ–¹æ³•ï¼Œä»¥å¢å¼ºå¯¹å¤æ‚ä»»åŠ¡çš„é€‚åº”èƒ½åŠ›ã€‚è¿™äº›æ”¹è¿›ä½¿å¾—è‡ªè®­ç»ƒåœ¨å®é™…åº”ç”¨ä¸­æ›´ä¸ºç¨³å¥å’Œé«˜æ•ˆã€‚</p>
<p>ç›®å‰ï¼Œè‡ªè®­ç»ƒå·²ç»åœ¨å¤šä¸ªé¢†åŸŸå¾—åˆ°åº”ç”¨ã€‚åœ¨æ–‡æœ¬åˆ†ç±»ä¸­ï¼Œå®ƒèƒ½åˆ©ç”¨å°‘é‡äººå·¥æ ‡æ³¨çš„è¯­æ–™æ‰©å±•åˆ°å¤§è§„æ¨¡æœªæ ‡æ³¨æ–‡æœ¬ï¼›åœ¨å›¾åƒè¯†åˆ«ä¸­ï¼Œå°¤å…¶æ˜¯åŒ»å­¦å½±åƒå’Œé¥æ„Ÿç­‰æ ‡æ³¨æˆæœ¬é«˜çš„ä»»åŠ¡ä¸­ï¼Œè‡ªè®­ç»ƒèƒ½å¤Ÿæ˜¾è‘—å‡è½»æ ‡æ³¨è´Ÿæ‹…ï¼›åœ¨è¯­éŸ³è¯†åˆ«ä¸­ï¼Œå®ƒä¹Ÿèƒ½å€ŸåŠ©æœªæ ‡æ³¨è¯­éŸ³æ•°æ®æå‡è¯†åˆ«å‡†ç¡®ç‡ã€‚å‡­å€Ÿç®€å•æ€§å’Œçµæ´»æ€§ï¼Œè‡ªè®­ç»ƒä¸ä»…æ˜¯åŠç›‘ç£å­¦ä¹ çš„é‡è¦åŸºçŸ³ï¼Œè¿˜å¸¸ä½œä¸ºæ›´å¤æ‚æ–¹æ³•çš„ç»„æˆéƒ¨åˆ†ï¼Œåœ¨ç°ä»£æœºå™¨å­¦ä¹ ä¸­ä¾ç„¶å‘æŒ¥ç€é‡è¦ä½œç”¨ã€‚</p>
<h2 data-id="heading-1">ååŒè®­ç»ƒ</h2>
<p>ååŒè®­ç»ƒï¼ˆCo-trainingï¼‰æ˜¯åŠç›‘ç£å­¦ä¹ ä¸­ä¸€ç§ç»å…¸ä¸”æœ‰æ•ˆçš„æ–¹æ³•ï¼Œç”± Blum å’Œ Mitchell åœ¨ 1998 å¹´æå‡ºã€‚ä¸è‡ªè®­ç»ƒä¸åŒï¼ŒååŒè®­ç»ƒä¾èµ–äºæ•°æ®å…·æœ‰ ä¸¤ç§æˆ–å¤šç§äº’è¡¥çš„ç‰¹å¾è§†å›¾ï¼ˆviewsï¼‰ï¼Œæ¯ä¸ªè§†å›¾éƒ½èƒ½å¤Ÿå•ç‹¬å®Œæˆåˆ†ç±»ä»»åŠ¡ã€‚</p>
<p>å…¶æ ¸å¿ƒæ€æƒ³æ˜¯è®­ç»ƒä¸¤ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰åˆ†ç±»å™¨ï¼Œåˆ†åˆ«åˆ©ç”¨ä¸åŒè§†å›¾çš„æ ‡æ³¨æ•°æ®è¿›è¡Œåˆå§‹è®­ç»ƒï¼Œç„¶åè®©å®ƒä»¬äº’ç›¸ä¸ºå¯¹æ–¹æä¾›é«˜ç½®ä¿¡åº¦çš„æœªæ ‡æ³¨æ ·æœ¬ä½œä¸ºä¼ªæ ‡ç­¾ï¼Œä»è€Œæ‰©å……è®­ç»ƒé›†ã€‚é€šè¿‡è¿™ç§äº’åŠ©å¼å­¦ä¹ ï¼ŒååŒè®­ç»ƒèƒ½å¤Ÿå……åˆ†åˆ©ç”¨æœªæ ‡æ³¨æ•°æ®æå‡æ¨¡å‹æ€§èƒ½ã€‚</p>
<p>ååŒè®­ç»ƒçš„ä¸€èˆ¬æ­¥éª¤å¯ä»¥æ¦‚æ‹¬å¦‚ä¸‹ï¼š</p>
<ol>
<li>æ•°æ®è§†å›¾åˆ’åˆ†ï¼šå°†åŸå§‹ç‰¹å¾é›†åˆ’åˆ†ä¸ºä¸¤ä¸ªæˆ–å¤šä¸ªäº’è¡¥è§†å›¾ï¼Œä¾‹å¦‚æ–‡æœ¬æ•°æ®å¯ä»¥åˆ†ä¸ºæ ‡é¢˜å’Œæ­£æ–‡ä¸¤éƒ¨åˆ†ï¼›å›¾åƒæ•°æ®å¯ä»¥ä½¿ç”¨ä¸åŒç‰¹å¾æå–æ–¹æ³•ç”Ÿæˆä¸¤ä¸ªè§†å›¾ã€‚</li>
<li>åˆå§‹è®­ç»ƒï¼šä½¿ç”¨å°‘é‡å¸¦æ ‡ç­¾æ ·æœ¬è®­ç»ƒæ¯ä¸ªè§†å›¾å¯¹åº”çš„åˆ†ç±»å™¨ã€‚</li>
<li>äº’åŠ©ä¼ªæ ‡ç­¾ï¼šæ¯ä¸ªåˆ†ç±»å™¨åœ¨æœªæ ‡æ³¨æ•°æ®ä¸Šè¿›è¡Œé¢„æµ‹ï¼Œå¹¶é€‰æ‹©ç½®ä¿¡åº¦è¾ƒé«˜çš„æ ·æœ¬ï¼Œå°†å…¶ä¼ªæ ‡ç­¾æä¾›ç»™å¦ä¸€ä¸ªåˆ†ç±»å™¨ã€‚</li>
<li>è®­ç»ƒé›†æ‰©å……ï¼šå°†ä¼ªæ ‡ç­¾æ ·æœ¬åŠ å…¥è®­ç»ƒé›†ï¼Œé‡æ–°è®­ç»ƒä¸¤ä¸ªåˆ†ç±»å™¨ã€‚</li>
<li>è¿­ä»£æ›´æ–°ï¼šé‡å¤äº’åŠ©ä¼ªæ ‡ç­¾å’Œè®­ç»ƒé›†æ‰©å……çš„è¿‡ç¨‹ï¼Œç›´åˆ°æ¨¡å‹æ”¶æ•›æˆ–è¾¾åˆ°é¢„è®¾è¿­ä»£æ¬¡æ•°ã€‚</li>
</ol>
<p>ä»¥æ–‡æœ¬åˆ†ç±»ä¸ºä¾‹ï¼Œå‡è®¾æˆ‘ä»¬æœ‰æ–°é—»æ–‡ç« æ•°æ®ï¼Œæ¯ç¯‡æ–‡ç« åŒ…å«æ ‡é¢˜å’Œæ­£æ–‡ä¸¤éƒ¨åˆ†ï¼š</p>
<ul>
<li>è§†å›¾ 1ï¼ˆæ ‡é¢˜ï¼‰è®­ç»ƒåˆ†ç±»å™¨ Aï¼›è§†å›¾ 2ï¼ˆæ­£æ–‡ï¼‰è®­ç»ƒåˆ†ç±»å™¨ Bã€‚</li>
<li>åˆ†ç±»å™¨ A é¢„æµ‹æœªæ ‡æ³¨æ ·æœ¬çš„ç±»åˆ«ï¼Œå¹¶å°†é«˜ç½®ä¿¡åº¦æ ·æœ¬æä¾›ç»™ Bï¼›B åŒæ ·å°†é«˜ç½®ä¿¡åº¦æ ·æœ¬æä¾›ç»™ Aã€‚</li>
<li>æ¯æ¬¡è¿­ä»£ï¼Œä¸¤ä¸ªåˆ†ç±»å™¨çš„è®­ç»ƒé›†ä¸æ–­æ‰©å……ï¼Œåˆ©ç”¨æœªæ ‡æ³¨æ•°æ®äº’ç›¸æ”¹è¿›æ€§èƒ½ã€‚</li>
</ul>
<p>è¿™ç§æ–¹æ³•çš„ç‰¹ç‚¹æ˜¯å……åˆ†åˆ©ç”¨ å¤šè§†å›¾ä¹‹é—´çš„äº’è¡¥æ€§ï¼Œåœ¨æ¯ä¸ªè§†å›¾ä¸Šå•ç‹¬è®­ç»ƒå¯èƒ½æ•ˆæœä¸€èˆ¬ï¼Œä½†äº’ç›¸è¾…åŠ©åå¯ä»¥æ˜¾è‘—æå‡æ•´ä½“æ€§èƒ½ã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨é¸¢å°¾èŠ±æ•°æ®é›†ï¼ŒæŠŠå‰ä¸¤ä¸ªç‰¹å¾å’Œåä¸¤ä¸ªç‰¹å¾åˆ†åˆ«ä½œä¸ºä¸¤ä¸ªè§†å›¾ï¼Œç”¨ ä¸¤ä¸ªé€»è¾‘å›å½’æ¨¡å‹ äº’ç›¸ç”Ÿæˆä¼ªæ ‡ç­¾ï¼Œè¿­ä»£æ›´æ–°è®­ç»ƒé›†ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> load_iris
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LogisticRegression
<span class="hljs-keyword">from</span> sklearn.decomposition <span class="hljs-keyword">import</span> PCA
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split

<span class="hljs-comment"># 1. æ•°æ®</span>
X, y = load_iris(return_X_y=<span class="hljs-literal">True</span>)
X_labeled, X_unlabeled, y_labeled, y_unlabeled_true = train_test_split(
    X, y, train_size=<span class="hljs-number">30</span>, stratify=y, random_state=<span class="hljs-number">42</span>
)

<span class="hljs-comment"># 2. PCA å¯è§†åŒ–</span>
pca = PCA(n_components=<span class="hljs-number">2</span>)
X_2d = pca.fit_transform(X)
X_labeled_2d = pca.transform(X_labeled)
X_unlabeled_2d = pca.transform(X_unlabeled)

<span class="hljs-comment"># 3. åˆ’åˆ†è§†å›¾</span>
X_labeled_view1 = X_labeled[:, :<span class="hljs-number">2</span>]
X_labeled_view2 = X_labeled[:, <span class="hljs-number">2</span>:]
X_unlabeled_view1 = X_unlabeled[:, :<span class="hljs-number">2</span>]
X_unlabeled_view2 = X_unlabeled[:, <span class="hljs-number">2</span>:]

<span class="hljs-comment"># 4. åˆ†ç±»å™¨</span>
clf1 = LogisticRegression(max_iter=<span class="hljs-number">200</span>)
clf2 = LogisticRegression(max_iter=<span class="hljs-number">200</span>)
clf1.fit(X_labeled_view1, y_labeled)
clf2.fit(X_labeled_view2, y_labeled)

history = [(X_labeled_2d.copy(), y_labeled.copy(), X_unlabeled_2d.copy())]

<span class="hljs-comment"># 5. ååŒè®­ç»ƒå¾ªç¯</span>
<span class="hljs-keyword">for</span> step <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):
    probs1 = clf1.predict_proba(X_unlabeled_view1)
    pseudo_labels1 = probs1.argmax(axis=<span class="hljs-number">1</span>)
    confidences1 = probs1.<span class="hljs-built_in">max</span>(axis=<span class="hljs-number">1</span>)

    probs2 = clf2.predict_proba(X_unlabeled_view2)
    pseudo_labels2 = probs2.argmax(axis=<span class="hljs-number">1</span>)
    confidences2 = probs2.<span class="hljs-built_in">max</span>(axis=<span class="hljs-number">1</span>)

    <span class="hljs-comment"># é«˜ç½®ä¿¡åº¦æ ·æœ¬</span>
    mask1 = confidences1 &gt; <span class="hljs-number">0.9</span>
    mask2 = confidences2 &gt; <span class="hljs-number">0.9</span>

    <span class="hljs-comment"># æ–°å¢æ ·æœ¬ï¼šç¡®ä¿ä¸ä¼šé‡å¤</span>
    new_mask = mask1 | mask2
    <span class="hljs-keyword">if</span> new_mask.<span class="hljs-built_in">sum</span>() == <span class="hljs-number">0</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Step <span class="hljs-subst">{step+<span class="hljs-number">1</span>}</span>: no confident samples, stop."</span>)
        <span class="hljs-keyword">break</span>

    <span class="hljs-comment"># ç”Ÿæˆä¼ªæ ‡ç­¾</span>
    pseudo_labels = np.where(mask1, pseudo_labels1, pseudo_labels2)
    
    <span class="hljs-comment"># æ›´æ–°è®­ç»ƒé›†</span>
    X_labeled_view1 = np.vstack([X_labeled_view1, X_unlabeled_view1[new_mask]])
    X_labeled_view2 = np.vstack([X_labeled_view2, X_unlabeled_view2[new_mask]])
    X_labeled_2d = np.vstack([X_labeled_2d, X_unlabeled_2d[new_mask]])
    y_labeled = np.concatenate([y_labeled, pseudo_labels[new_mask]])

    <span class="hljs-comment"># ç§»é™¤å·²åŠ å…¥çš„æœªæ ‡æ³¨æ ·æœ¬</span>
    X_unlabeled_view1 = X_unlabeled_view1[~new_mask]
    X_unlabeled_view2 = X_unlabeled_view2[~new_mask]
    X_unlabeled_2d = X_unlabeled_2d[~new_mask]

    <span class="hljs-comment"># é‡æ–°è®­ç»ƒ</span>
    clf1.fit(X_labeled_view1, y_labeled)
    clf2.fit(X_labeled_view2, y_labeled)

    <span class="hljs-comment"># ä¿å­˜çŠ¶æ€</span>
    history.append((X_labeled_2d.copy(), y_labeled.copy(), X_unlabeled_2d.copy()))

<span class="hljs-comment"># 6. ç»˜å›¾ 2x2 ç½‘æ ¼</span>
fig, axes = plt.subplots(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, figsize=(<span class="hljs-number">18</span>, <span class="hljs-number">12</span>))
axes = axes.flatten()

<span class="hljs-keyword">for</span> i, (X_l, y_l, X_u) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(history):
    ax = axes[i]
    ax.scatter(X_u[:, <span class="hljs-number">0</span>], X_u[:, <span class="hljs-number">1</span>], c=<span class="hljs-string">'gray'</span>, label=<span class="hljs-string">'Unlabeled'</span>, alpha=<span class="hljs-number">0.5</span>)
    ax.scatter(X_l[:, <span class="hljs-number">0</span>], X_l[:, <span class="hljs-number">1</span>], c=y_l, cmap=<span class="hljs-string">'Set1'</span>, edgecolor=<span class="hljs-string">'k'</span>, label=<span class="hljs-string">'Labeled'</span>)
    ax.set_title(<span class="hljs-string">f"Iteration <span class="hljs-subst">{i}</span>"</span>)
    ax.legend()

<span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(history), <span class="hljs-number">4</span>):
    axes[j].axis(<span class="hljs-string">'off'</span>)

plt.tight_layout()
plt.show()
</code></pre>
<p>å…¶ä¸­çš„æ­¥éª¤å¤§æ¦‚ä¸º</p>
<ol>
<li>è§†å›¾åˆ’åˆ†ï¼šè¿™é‡ŒæŠŠå‰ä¸¤ä¸ªç‰¹å¾ä½œä¸ºè§†å›¾ 1ï¼Œåä¸¤ä¸ªç‰¹å¾ä½œä¸ºè§†å›¾ 2ã€‚</li>
<li>äº’åŠ©ä¼ªæ ‡ç­¾ï¼šæ¯ä¸ªåˆ†ç±»å™¨å°†é«˜ç½®ä¿¡åº¦çš„é¢„æµ‹ç»“æœåŠ å…¥å¦ä¸€ä¸ªåˆ†ç±»å™¨çš„è®­ç»ƒé›†ã€‚</li>
<li>è¿­ä»£æ›´æ–°ï¼šå¾ªç¯å‡ æ­¥ï¼Œè®­ç»ƒé›†ä¸æ–­æ‰©å……ï¼Œæ¨¡å‹æ€§èƒ½æå‡ã€‚</li>
<li>é«˜ç½®ä¿¡åº¦é˜ˆå€¼ï¼šè¿™é‡Œç”¨ 0.9ï¼Œä¿è¯åŠ å…¥è®­ç»ƒé›†çš„ä¼ªæ ‡ç­¾å¯é æ€§ã€‚</li>
</ol>
<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œå…¶ä¸­æ˜¾ç¤ºååŒè®­ç»ƒèƒ½å¤Ÿåœ¨å°‘é‡åˆå§‹æ ‡ç­¾çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡ä¸¤ä¸ªä¸åŒè§†å›¾çš„åˆ†ç±»å™¨äº’ç›¸æä¾›é«˜ç½®ä¿¡åº¦ä¼ªæ ‡ç­¾ï¼Œé€æ­¥å°†æœªæ ‡æ³¨æ ·æœ¬åŠ å…¥è®­ç»ƒé›†ï¼Œä½¿è®­ç»ƒé›†è§„æ¨¡ä¸æ–­æ‰©å¤§ï¼Œå½©è‰²ç‚¹é€æ¸è¦†ç›–ç°è‰²æœªæ ‡æ³¨æ ·æœ¬ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87375c9b56604fce8becc58bb5adc4cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769529196&amp;x-signature=hzxee7I3tYlw9HayZzUG3kDss9Q%3D" alt="" loading="lazy"/></p>
<p>ååŒè®­ç»ƒçš„ä¼˜ç‚¹åœ¨äºèƒ½å¤Ÿå……åˆ†åˆ©ç”¨æœªæ ‡æ³¨æ•°æ®ï¼Œç‰¹åˆ«é€‚åˆ å¤šè§†å›¾ä¿¡æ¯ä¸°å¯Œ çš„ä»»åŠ¡ï¼Œå¦‚ç½‘é¡µåˆ†ç±»ï¼ˆæ ‡é¢˜ä¸æ­£æ–‡ï¼‰ã€å¤šæ¨¡æ€æ•°æ®ï¼ˆå›¾åƒä¸æ–‡æœ¬ç‰¹å¾ï¼‰ã€éŸ³è§†é¢‘åˆ†æç­‰ã€‚ç›¸æ¯”è‡ªè®­ç»ƒï¼ŒååŒè®­ç»ƒæ›´ç¨³å¥ï¼Œå› ä¸ºä¸¤ä¸ªåˆ†ç±»å™¨äº’ç›¸ç›‘ç£ï¼Œå•ä¸€æ¨¡å‹çš„é”™è¯¯ä¸å®¹æ˜“ä¼ æ’­ã€‚</p>
<p>ç„¶è€Œï¼ŒååŒè®­ç»ƒä¹Ÿå­˜åœ¨å±€é™æ€§ã€‚é¦–å…ˆï¼Œå®ƒä¾èµ–äºç‰¹å¾è§†å›¾çš„å……åˆ†äº’è¡¥æ€§ï¼Œå¦‚æœä¸¤ä¸ªè§†å›¾é«˜åº¦ç›¸å…³æˆ–æŸä¸ªè§†å›¾ä¿¡æ¯ä¸è¶³ï¼Œæ•ˆæœå¯èƒ½ä¸ä½³ã€‚å…¶æ¬¡ï¼Œä¼ªæ ‡ç­¾çš„è´¨é‡ä»ç„¶ä¼šå½±å“è¿­ä»£è¿‡ç¨‹ï¼Œå¦‚æœä¸¤ä¸ªåˆ†ç±»å™¨éƒ½äº§ç”Ÿå¤§é‡é”™è¯¯ä¼ªæ ‡ç­¾ï¼Œæ¨¡å‹æ€§èƒ½å¯èƒ½ä¸‹é™ã€‚ä¸ºäº†æ”¹è¿›ï¼Œç ”ç©¶è€…æå‡ºäº†æ–¹æ³•ï¼Œä¾‹å¦‚åŠ¨æ€é€‰æ‹©æœ€å¯é çš„ä¼ªæ ‡ç­¾ã€å¼•å…¥ä¸€è‡´æ€§çº¦æŸæˆ–ç»“åˆæ·±åº¦ç‰¹å¾å­¦ä¹ ï¼Œä»¥å¢å¼ºåœ¨å¤æ‚ä»»åŠ¡ä¸­çš„é€‚åº”æ€§ã€‚</p>
<p>ååŒè®­ç»ƒåœ¨å®é™…åº”ç”¨ä¸­å·²ç»è¢«å¹¿æ³›ä½¿ç”¨ã€‚åœ¨æ–‡æœ¬åˆ†ç±»ä¸­ï¼Œå¯ä»¥åˆ©ç”¨æ ‡é¢˜ä¸æ­£æ–‡ä¸¤ä¸ªè§†å›¾äº’ç›¸æä¾›ä¿¡æ¯ï¼Œå‡å°‘äººå·¥æ ‡æ³¨æˆæœ¬ï¼›åœ¨å›¾åƒè¯†åˆ«å’Œå¤šæ¨¡æ€ä»»åŠ¡ä¸­ï¼Œä¸åŒç‰¹å¾æå–æ–¹å¼å¯ä»¥å½¢æˆäº’è¡¥è§†å›¾ï¼Œæå‡åˆ†ç±»å‡†ç¡®ç‡ï¼›åœ¨ç½‘é¡µæ¨èæˆ–ç¤¾äº¤ç½‘ç»œåˆ†æä¸­ï¼Œç”¨æˆ·è¡Œä¸ºå’Œå†…å®¹ç‰¹å¾ä¹Ÿå¯ä½œä¸ºä¸¤ç§è§†å›¾è¿›è¡ŒååŒè®­ç»ƒã€‚</p>
<h2 data-id="heading-2">å›¾åŠç›‘ç£å­¦ä¹ </h2>
<p>å›¾åŠç›‘ç£å­¦ä¹ æ˜¯ä¸€ç±»åˆ©ç”¨å›¾ç»“æ„è¡¨ç¤ºæ•°æ®å…³ç³»ï¼Œå¹¶åœ¨å°‘é‡æ ‡æ³¨æ ·æœ¬æŒ‡å¯¼ä¸‹è¿›è¡Œé¢„æµ‹çš„æœºå™¨å­¦ä¹ æ–¹æ³•ã€‚ä¸ä¼ ç»ŸåŠç›‘ç£å­¦ä¹ ä¸åŒï¼Œå›¾åŠç›‘ç£å­¦ä¹ ä¸ä»…è€ƒè™‘å•ä¸ªæ ·æœ¬ç‰¹å¾ï¼Œè¿˜å°†æ ·æœ¬ä¹‹é—´çš„ç›¸ä¼¼æ€§æˆ–é‚»æ¥å…³ç³»ç¼–ç ä¸ºå›¾ç»“æ„ï¼Œé€šè¿‡å›¾çš„ä¼ æ’­æœºåˆ¶å°†æ ‡æ³¨ä¿¡æ¯æ‰©æ•£åˆ°æœªæ ‡æ³¨èŠ‚ç‚¹ä¸Šï¼Œä»è€Œå®ç°å…¨å±€ä¸€è‡´æ€§çš„å­¦ä¹ ã€‚è¯¥æ–¹æ³•ç‰¹åˆ«é€‚ç”¨äºæ•°æ®å¤©ç„¶å…·æœ‰ç½‘ç»œç»“æ„çš„åœºæ™¯ï¼Œå¦‚ç¤¾äº¤ç½‘ç»œã€çŸ¥è¯†å›¾è°±ã€åˆ†å­ç»“æ„å’Œæ¨èç³»ç»Ÿç­‰ã€‚</p>
<p>åœ¨å›¾åŠç›‘ç£å­¦ä¹ ä¸­ï¼Œé¦–å…ˆå°†æ•°æ®æ„å»ºä¸ºå›¾ ï¼Œå…¶ä¸­èŠ‚ç‚¹ è¡¨ç¤ºæ ·æœ¬ï¼Œè¾¹ è¡¨ç¤ºæ ·æœ¬ä¹‹é—´çš„ç›¸ä¼¼æ€§æˆ–å…³è”ã€‚é€šå¸¸ï¼Œè¾¹çš„æƒé‡ é€šè¿‡æ ·æœ¬é—´ç‰¹å¾è·ç¦»æˆ–ç›¸ä¼¼æ€§åº¦ é‡ï¼ˆå¦‚é«˜æ–¯æ ¸ï¼‰è®¡ç®—å¾—åˆ°ã€‚</p>
<p>å›¾åŠç›‘ç£å­¦ä¹ çš„æ ¸å¿ƒæ€æƒ³æ˜¯â€œæ ‡ç­¾å¹³æ»‘å‡è®¾ï¼ˆlabel smoothness assumptionï¼‰â€ï¼Œå³ç›¸è¿çš„èŠ‚ç‚¹å€¾å‘äºå…·æœ‰ç›¸åŒæ ‡ç­¾ã€‚åŸºäºè¿™ä¸€å‡è®¾ï¼Œå¯ä»¥é€šè¿‡ä¼˜åŒ–ç›®æ ‡æˆ–ä¼ æ’­ç®—æ³•ï¼Œå°†å°‘é‡æ ‡æ³¨ä¿¡æ¯ä¼ æ’­åˆ°æ•´ä¸ªå›¾ä¸­ï¼Œä»è€Œå¯¹æœªæ ‡æ³¨èŠ‚ç‚¹è¿›è¡Œé¢„æµ‹ã€‚</p>
<h3 data-id="heading-3">å…¸å‹æ–¹æ³•</h3>
<ol>
<li>æ ‡ç­¾ä¼ æ’­ï¼ˆLabel Propagation, LPï¼‰</li>
</ol>
<p>æ ‡ç­¾ä¼ æ’­æ–¹æ³•åˆ©ç”¨å›¾çš„é‚»æ¥çŸ©é˜µå’Œå½’ä¸€åŒ–æƒé‡ï¼Œé€šè¿‡è¿­ä»£æ›´æ–°æœªæ ‡æ³¨èŠ‚ç‚¹çš„æ ‡ç­¾åˆ†å¸ƒï¼Œç›´åˆ°æ”¶æ•›ã€‚æ¯è½®è¿­ä»£ä¸­ï¼ŒèŠ‚ç‚¹çš„æ ‡ç­¾ä¿¡æ¯æ ¹æ®é‚»å±…èŠ‚ç‚¹çš„æ ‡ç­¾åŠ æƒå¹³å‡æ›´æ–°ï¼Œä»è€Œå®ç°æ ‡ç­¾çš„å¹³æ»‘æ‰©æ•£ã€‚</p>
<ol start="2">
<li>å›¾æ­£åˆ™åŒ–æ–¹æ³•ï¼ˆGraph Regularizationï¼‰</li>
</ol>
<p>å›¾æ­£åˆ™åŒ–æ–¹æ³•å°†å›¾ç»“æ„å¼•å…¥æŸå¤±å‡½æ•°ï¼Œé€šè¿‡å¢åŠ æ­£åˆ™åŒ–é¡¹é¼“åŠ±ç›¸è¿èŠ‚ç‚¹çš„é¢„æµ‹ç»“æœç›¸ä¼¼ã€‚å…¸å‹å½¢å¼æ˜¯æœ€å°åŒ–ä»¥ä¸‹ç›®æ ‡å‡½æ•°ï¼š</p>
<p>å…¶ä¸­ç¬¬ä¸€é¡¹æ˜¯æ ‡æ³¨èŠ‚ç‚¹çš„ç›‘ç£æŸå¤±ï¼Œç¬¬äºŒé¡¹æ˜¯å›¾å¹³æ»‘æ­£åˆ™åŒ–é¡¹ï¼ŒÎ» æ§åˆ¶å¹³æ»‘ç¨‹åº¦ã€‚</p>
<p>3.å›¾ç¥ç»ç½‘ç»œï¼ˆGraph Neural Networks, GNNsï¼‰</p>
<p>éšç€æ·±åº¦å­¦ä¹ çš„å‘å±•ï¼Œå›¾ç¥ç»ç½‘ç»œæˆä¸ºå›¾åŠç›‘ç£å­¦ä¹ çš„ä¸»æµæ–¹æ³•ã€‚GNNé€šè¿‡èŠ‚ç‚¹ç‰¹å¾çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶ï¼Œå°†é‚»å±…èŠ‚ç‚¹ä¿¡æ¯æ•´åˆåˆ°ç›®æ ‡èŠ‚ç‚¹è¡¨ç¤ºä¸­ï¼Œæ—¢èƒ½æ•æ‰å±€éƒ¨ç»“æ„ï¼Œåˆèƒ½åˆ©ç”¨æ ‡æ³¨ä¿¡æ¯è¿›è¡Œç«¯åˆ°ç«¯è®­ç»ƒã€‚å¸¸è§æ¨¡å‹åŒ…æ‹¬ GCNï¼ˆGraph Convolutional Networkï¼‰ã€GraphSAGEã€GATï¼ˆGraph Attention Networkï¼‰ç­‰ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨ sklearn çš„ LabelPropagation æ¥æ¼”ç¤ºå›¾åŠç›‘ç£å­¦ä¹ ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> load_iris
<span class="hljs-keyword">from</span> sklearn.semi_supervised <span class="hljs-keyword">import</span> LabelPropagation
<span class="hljs-keyword">from</span> sklearn.decomposition <span class="hljs-keyword">import</span> PCA
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split

<span class="hljs-comment"># 1. åŠ è½½æ•°æ®</span>
X, y = load_iris(return_X_y=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># 2. éšæœºæŒ‘é€‰å¸¦æ ‡ç­¾æ ·æœ¬</span>
rng = np.random.RandomState(<span class="hljs-number">42</span>)
n_total = X.shape[<span class="hljs-number">0</span>]
n_labeled = <span class="hljs-number">15</span>  <span class="hljs-comment"># åªæ ‡æ³¨éƒ¨åˆ†æ ·æœ¬</span>
indices = np.arange(n_total)
rng.shuffle(indices)

y_semi = -np.ones(n_total)  <span class="hljs-comment"># æœªæ ‡æ³¨æ ·æœ¬ç”¨ -1 è¡¨ç¤º</span>
y_semi[indices[:n_labeled]] = y[indices[:n_labeled]]

<span class="hljs-comment"># 3. PCA é™ç»´ä¾¿äºå¯è§†åŒ–</span>
pca = PCA(n_components=<span class="hljs-number">2</span>)
X_2d = pca.fit_transform(X)

<span class="hljs-comment"># 4. æ„å»º LabelPropagation æ¨¡å‹</span>
label_prop_model = LabelPropagation(kernel=<span class="hljs-string">'rbf'</span>, gamma=<span class="hljs-number">20</span>)
label_prop_model.fit(X, y_semi)

<span class="hljs-comment"># 5. é¢„æµ‹æ‰€æœ‰æ ·æœ¬</span>
y_pred = label_prop_model.transduction_

<span class="hljs-comment"># 6. å¯è§†åŒ–ç»“æœ</span>
plt.figure(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">5</span>))

<span class="hljs-comment"># åŸå§‹å¸¦æ ‡ç­¾æ ·æœ¬</span>
plt.subplot(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>)
plt.scatter(X_2d[:, <span class="hljs-number">0</span>], X_2d[:, <span class="hljs-number">1</span>], c=<span class="hljs-string">'gray'</span>, alpha=<span class="hljs-number">0.5</span>, label=<span class="hljs-string">'Unlabeled'</span>)
plt.scatter(X_2d[indices[:n_labeled], <span class="hljs-number">0</span>], X_2d[indices[:n_labeled], <span class="hljs-number">1</span>], c=y[indices[:n_labeled]], cmap=<span class="hljs-string">'Set1'</span>, edgecolor=<span class="hljs-string">'k'</span>, s=<span class="hljs-number">80</span>)
plt.title(<span class="hljs-string">"Initial Labeled Samples"</span>)
plt.legend()

<span class="hljs-comment"># Label Propagation é¢„æµ‹ç»“æœ</span>
plt.subplot(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>)
plt.scatter(X_2d[:, <span class="hljs-number">0</span>], X_2d[:, <span class="hljs-number">1</span>], c=y_pred, cmap=<span class="hljs-string">'Set1'</span>, edgecolor=<span class="hljs-string">'k'</span>, s=<span class="hljs-number">80</span>)
plt.title(<span class="hljs-string">"Label Propagation Prediction"</span>)
plt.show()
</code></pre>
<p>è¿è¡Œç»“æœä¸‹å›¾æ‰€ç¤ºï¼Œ</p>
<ol>
<li>å·¦å›¾ï¼šåˆå§‹å¸¦æ ‡ç­¾æ ·æœ¬å¾ˆå°‘ï¼ˆ15 ä¸ªï¼‰ï¼Œå¤§éƒ¨åˆ†æ ·æœ¬ä¸ºç°è‰²æœªæ ‡æ³¨ã€‚</li>
<li>å³å›¾ï¼šLabel Propagation åˆ©ç”¨å›¾ç»“æ„ï¼ˆRBF æ ¸æ„å»ºç›¸ä¼¼æ€§ï¼‰å°†æ ‡ç­¾ä»å°‘é‡æ ‡æ³¨æ ·æœ¬ä¼ æ’­åˆ°æ•´ä¸ªæ•°æ®é›†ï¼Œå‡ ä¹æ‰€æœ‰æœªæ ‡æ³¨æ ·æœ¬éƒ½è¢«æ­£ç¡®åˆ†ç±»ã€‚</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f950d992edf469bb861fe296817e5db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769529196&amp;x-signature=a%2F5ArtAPcgHSGXZO50aiYy0Xn4M%3D" alt="" loading="lazy"/></p>
<p>å›¾åŠç›‘ç£æ­£æ˜¯å­¦ä¹ å¦‚ä½•åˆ©ç”¨æ ·æœ¬é—´ç›¸ä¼¼æ€§ï¼Œå°†æ ‡æ³¨ä¿¡æ¯æ‰©æ•£åˆ°æœªæ ‡æ³¨æ ·æœ¬ï¼Œä»è€Œå®ç°é«˜æ•ˆé¢„æµ‹ã€‚</p>
<p>å›¾åŠç›‘ç£å­¦ä¹ åœ¨ç¤¾äº¤ç½‘ç»œä¸­ï¼Œå¯ä»¥åˆ©ç”¨éƒ¨åˆ†ç”¨æˆ·çš„å…´è¶£æ ‡ç­¾é¢„æµ‹å…¶ä»–ç”¨æˆ·çš„å…´è¶£åå¥½ï¼›åœ¨çŸ¥è¯†å›¾è°±ä¸­ï¼Œå¯ä»¥æ¨æ–­æœªæ ‡æ³¨å®ä½“çš„ç±»åˆ«æˆ–å…³ç³»ï¼›åœ¨åŒ–å­¦åˆ†å­æ•°æ®ä¸­ï¼Œå¯ä»¥æ ¹æ®å°‘é‡æ ‡æ³¨åˆ†å­æ€§è´¨é¢„æµ‹å…¶ä»–åˆ†å­çš„æ€§è´¨ï¼›åœ¨æ¨èç³»ç»Ÿä¸­ï¼Œé€šè¿‡ç”¨æˆ·æˆ–ç‰©å“ä¹‹é—´çš„å…³è”å›¾ï¼Œå®ç°å¯¹å†·å¯åŠ¨ç”¨æˆ·æˆ–ç‰©å“çš„é¢„æµ‹ã€‚</p>
<p>æ€»ç»“ä¸€ä¸‹ï¼Œå›¾åŠç›‘ç£å­¦ä¹ å……åˆ†åˆ©ç”¨æ•°æ®é—´çš„å…³ç³»ç»“æ„ï¼Œåœ¨æ ‡æ³¨æ ·æœ¬æœ‰é™çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡æ ‡ç­¾ä¼ æ’­ã€å›¾æ­£åˆ™åŒ–æˆ–å›¾ç¥ç»ç½‘ç»œç­‰æ–¹æ³•ï¼Œå®ç°å¯¹æœªæ ‡æ³¨æ•°æ®çš„é«˜æ•ˆé¢„æµ‹ã€‚</p>
<p>ğŸ“š æ¨èé˜…è¯»</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485782%26idx%3D1%26sn%3D060c8222b47cbf903fbfded1f0421bcf%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485782&amp;idx=1&amp;sn=060c8222b47cbf903fbfded1f0421bcf&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¹‹æ•°æ®é¢„å¤„ç†ç¯‡ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485800%26idx%3D1%26sn%3Da52107c9dc7071d8530a24563861fa46%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485800&amp;idx=1&amp;sn=a52107c9dc7071d8530a24563861fa46&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ç‰¹å¾å·¥ç¨‹ä¸­çš„ç‰¹å¾é€‰æ‹©</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485808%26idx%3D1%26sn%3D2c57081d4b12433f6b8919209e2e52ed%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485808&amp;idx=1&amp;sn=2c57081d4b12433f6b8919209e2e52ed&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¸­çš„ç‰¹å¾æ„é€ </a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485820%26idx%3D1%26sn%3Dadcb41fd14347f2f1431709323fa253f%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485820&amp;idx=1&amp;sn=adcb41fd14347f2f1431709323fa253f&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¹‹ç‰¹å¾é™ç»´</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485941%26idx%3D1%26sn%3Dcb53a98bacd1cfbd3255bbeeab6a24ec%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485941&amp;idx=1&amp;sn=cb53a98bacd1cfbd3255bbeeab6a24ec&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚å±‚æ¬¡èšç±»å’Œå¯†åº¦èšç±»æ–¹æ³•ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485946%26idx%3D1%26sn%3Da5cf50a4a3bda9785fb0c7baae3a6bb2%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485946&amp;idx=1&amp;sn=a5cf50a4a3bda9785fb0c7baae3a6bb2&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚æœºå™¨å­¦ä¹ ä¸­çš„PCAä¸»æˆåˆ†åˆ†æï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485952%26idx%3D1%26sn%3Dffe1fca4cb75b2f99ace92593554837c%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485952&amp;idx=1&amp;sn=ffe1fca4cb75b2f99ace92593554837c&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¸­ç‹¬ç«‹æˆåˆ†åˆ†æICAå’Œä¸»æˆåˆ†åˆ†æPCAæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485960%26idx%3D1%26sn%3D05cf98957ea11dcd6ae165588b4c91c7%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485960&amp;idx=1&amp;sn=05cf98957ea11dcd6ae165588b4c91c7&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚t-SNEå’ŒUMAPé™ç»´æ–¹æ³•ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485972%26idx%3D1%26sn%3De106fcda9b02b7e8a6fb31495bb28dae%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485972&amp;idx=1&amp;sn=e106fcda9b02b7e8a6fb31495bb28dae&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸‡å­—é•¿æ–‡ï¼ææ‡‚æœºå™¨å­¦ä¹ ä¸­çš„æ¦‚ç‡å›¾æ¨¡å‹</a></p>
<p>æœ€æ–°çš„æ–‡ç« éƒ½åœ¨å…¬ä¼—å·aicotingæ›´æ–°ï¼Œåˆ«å¿˜è®°å…³æ³¨å“¦ï¼ï¼ï¼</p>
<p>ä½œè€…ï¼šaicoting</p>
<p>åˆ†äº«æ˜¯ä¸€ç§ä¿¡ä»°ï¼Œè¿æ¥è®©æˆé•¿æ›´æœ‰æ¸©åº¦ã€‚</p>
<p>æˆ‘ä»¬ä¸‹æ¬¡ä¸è§ä¸æ•£ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Polyfillæ–¹å¼è§£å†³å‰ç«¯å…¼å®¹æ€§é—®é¢˜ï¼šcore-jsåŒ…ç»“æ„ä¸å„ç§é…ç½®ç­–ç•¥]]></title>    <link>https://juejin.cn/post/7597258378590846986</link>    <guid>https://juejin.cn/post/7597258378590846986</guid>    <pubDate>2026-01-20T15:57:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597258378590846986" data-draft-id="7597317683051429897" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Polyfillæ–¹å¼è§£å†³å‰ç«¯å…¼å®¹æ€§é—®é¢˜ï¼šcore-jsåŒ…ç»“æ„ä¸å„ç§é…ç½®ç­–ç•¥"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Node.js"/> <meta itemprop="datePublished" content="2026-01-20T15:57:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¼‚æµç“¶jz"/> <meta itemprop="url" content="https://juejin.cn/user/3694779980078877"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Polyfillæ–¹å¼è§£å†³å‰ç«¯å…¼å®¹æ€§é—®é¢˜ï¼šcore-jsåŒ…ç»“æ„ä¸å„ç§é…ç½®ç­–ç•¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3694779980078877/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¼‚æµç“¶jz
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T15:57:09.000Z" title="Tue Jan 20 2026 15:57:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç®€ä»‹</h2>
<p>åœ¨ä¹‹å‰æˆ‘ä»‹ç»è¿‡Babelï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjzplp.github.io%2F2025%2Fbabel-intro.html" target="_blank" title="https://jzplp.github.io/2025/babel-intro.html" ref="nofollow noopener noreferrer">è§£é”Babelæ ¸å¿ƒåŠŸèƒ½ï¼šä»è½¬ä¹‰è¯­æ³•åˆ°æ’ä»¶å¼€å‘</a>ï¼ŒBabelæ˜¯ä¸€ä¸ªä½¿ç”¨ASTè½¬ä¹‰JavaScriptè¯­æ³•ï¼Œæé«˜ä»£ç åœ¨æµè§ˆå™¨å…¼å®¹æ€§çš„å·¥å…·ã€‚ä½†æœ‰äº›ECMAScriptå¹¶ä¸æ˜¯æ–°çš„è¯­æ³•ï¼Œè€Œæ˜¯ä¸€äº›æ–°å¯¹è±¡ï¼Œæ–°æ–¹æ³•ç­‰ç­‰ï¼Œè¿™äº›å¹¶ä¸èƒ½ä½¿ç”¨ASTæŠ½è±¡è¯­æ³•æ ‘æ¥è½¬ä¹‰ã€‚å› æ­¤Babelåˆ©ç”¨core-jså®ç°è¿™äº›ä»£ç çš„å…¼å®¹æ€§ã€‚</p>
<p>core-jsæ˜¯ä¸€ä¸ªçŸ¥åçš„å‰ç«¯å·¥å…·åº“ï¼Œé‡Œé¢åŒ…å«äº†ECMAScriptæ ‡å‡†ä¸­æä¾›çš„æ–°å¯¹è±¡/æ–°æ–¹æ³•ç­‰ï¼Œè€Œä¸”æ˜¯ä½¿ç”¨æ—§ç‰ˆæœ¬æ”¯æŒçš„è¯­æ³•æ¥å®ç°è¿™äº›æ–°çš„APIã€‚è¿™æ ·å³ä½¿æµè§ˆå™¨æ²¡æœ‰å®ç°æ ‡å‡†ä¸­çš„æ–°APIï¼Œä¹Ÿèƒ½é€šè¿‡æ³¨å…¥core-jsä»£ç æ¥æä¾›å¯¹åº”çš„åŠŸèƒ½ã€‚</p>
<p>åƒè¿™ç§é€šè¿‡æ³¨å…¥ä»£ç å®ç°æµè§ˆå™¨æ²¡æœ‰æä¾›çš„APIç‰¹æ€§ï¼Œå«åšPolyfillã€‚è¿™ä¸ªå•è¯çš„æœ¬æ„æ˜¯å¡«å……ææ–™ï¼Œåœ¨JavaScripté¢†åŸŸä¸­ï¼Œè¿™äº›æ³¨å…¥çš„ä»£ç å°±ç±»ä¼¼â€œå¡«å……ææ–™â€ä¸€æ ·ï¼Œå¸®åŠ©æˆ‘ä»¬æé«˜ä»£ç çš„å…¼å®¹æ€§ã€‚å¦å¤–core-jsè¿˜æä¾›äº†ä¸€äº›è¿˜åœ¨æè®®ä¸­çš„APIçš„å®ç°ã€‚</p>
<h2 data-id="heading-1">core-jsä½¿ç”¨æ–¹å¼</h2>
<h3 data-id="heading-2">ä½¿ç”¨å‰åå¯¹æ¯”</h3>
<p>è¦æƒ³çœ‹åˆ°core-jsä½¿ç”¨å‰åçš„æ•ˆæœå¯¹æ¯”ï¼Œé¦–å…ˆéœ€è¦ç¡®å®šæŸä¸ªç‰¹æ€§å’Œå¯¹åº”çš„æ‰§è¡Œç¯å¢ƒï¼Œåœ¨è¿™ä¸ªç¯å¢ƒä¸­å¯¹åº”çš„ç‰¹æ€§ä¸å­˜åœ¨ã€‚æˆ‘æœ¬åœ°æ˜¯Node.js v18.19.1ç‰ˆæœ¬ï¼Œè¿™ä¸ªç‰ˆæœ¬å¹¶æ²¡æœ‰å®ç°Promise.tryè¿™ä¸ªæ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬å°±ç”¨è¿™ä¸ªæ–¹æ³•è¿›è¡Œå®éªŒã€‚é¦–å…ˆæ˜¯æ²¡æœ‰å¼•å…¥core-jsçš„åœºæ™¯ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'jzplp!'</span>)
})

<span class="hljs-comment">/* æ‰§è¡Œç»“æœ
Promise.try(() =&gt; {
           ^
TypeError: Promise.try is not a function
*/</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°æ²¡æœ‰å¼•å…¥core-jsï¼Œç›´æ¥ä½¿ç”¨Promise.tryæ—¶ï¼Œä¼šå› ä¸ºæ²¡æœ‰è¯¥æ–¹æ³•è€ŒæŠ¥é”™ã€‚ç„¶åå†è¯•è¯•å¼•å…¥core-jsçš„æ•ˆæœï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js'</span>)
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'jzplp!'</span>)
})

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
jzplp!
*/</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°å¼•å…¥core-jsåï¼ŒåŸæœ¬ä¸å­˜åœ¨çš„APIè¢«å¡«å……äº†ï¼Œæˆ‘ä»¬çš„ä»£ç å¯ä»¥æ­£å¸¸æ‰§è¡Œå¹¶æ‹¿åˆ°ç»“æœäº†ã€‚è¿™å°±æ˜¯core-jsæé«˜å…¼å®¹æ€§çš„æ•ˆæœã€‚</p>
<h3 data-id="heading-3">å•ä¸ªAPIå¼•å…¥</h3>
<p>core-jsä¸ä»…å¯ä»¥ç›´æ¥å¼•å…¥å…¨éƒ¨è¯­æ³•ï¼Œè¿˜å¯ä»¥ä»…å¼•å…¥å•ä¸ªAPIï¼Œæ¯”å¦‚æŸä¸ªå¯¹è±¡æˆ–æŸä¸ªæ–¹æ³•ã€‚é¦–å…ˆçœ‹ä¸‹åªå¼•å…¥Promiseå¯¹è±¡ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// require('core-js/full') ç­‰äº require('core-js')</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js/full/promise'</span>)
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'jzplp!'</span>)
})

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
jzplp!
*/</span>
</code></pre>
<p>ç„¶åå†çœ‹ä¸‹ç›´æ¥å¼•å…¥å¯¹è±¡ä¸­çš„æŸä¸ªæ–¹æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js/full/promise/try'</span>)
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'jzplp!'</span>)
})

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
jzplp!
*/</span>
</code></pre>
<h3 data-id="heading-4">ä¸æ³¨å…¥å…¨å±€å¯¹è±¡</h3>
<p>å‰é¢å±•ç¤ºçš„åœºæ™¯ï¼Œcore-jséƒ½æ˜¯å°†APIç›´æ¥æ³¨å…¥åˆ°å…¨å±€ï¼Œè¿™æ ·ä½¿ç”¨è¿™äº›APIå°±å¦‚ç¯å¢ƒæœ¬èº«æ”¯æŒä¸€æ ·ï¼ŒåŸºæœ¬æ„Ÿå—ä¸åˆ°åŒºåˆ«ã€‚ä½†å¦‚æœæˆ‘ä»¬ä¸å¸Œæœ›ç›´æ¥æ³¨å…¥åˆ°å…¨å±€æ—¶ï¼Œcore-jsä¹Ÿæä¾›äº†ä½¿ç”¨æ–¹å¼ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> promise = <span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js-pure/full/promise'</span>);
promise.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'jzplp!'</span>)
})
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'jzplp!2'</span>)
})
<span class="hljs-comment">/* è¾“å‡ºç»“æœ
jzplp!
Promise.try(() =&gt; {
           ^
TypeError: Promise.try is not a function
*/</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨core-js-pureè¿™ä¸ªåŒ…ä¹‹åï¼Œå¯ä»¥ç›´æ¥å¯¼å‡ºæˆ‘ä»¬å¸Œæœ›è¦çš„APIï¼Œè€Œä¸ç›´æ¥æ³¨å…¥åˆ°å…¨å±€ã€‚æ­¤æ—¶ç›´æ¥ä½¿ç”¨å…¨å±€å¯¹è±¡æ–¹æ³•ä¾ç„¶æŠ¥é”™ã€‚è€Œcore-jsè¿™ä¸ªåŒ…è™½ç„¶ä¹Ÿèƒ½å¯¼å‡ºï¼Œä½†å®ƒè¿˜æ˜¯ä¼šç›´æ¥æ³¨å…¥å…¨å±€ï¼Œæˆ‘ä»¬çœ‹ä¸‹ä¾‹å­ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> promise = <span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js/full/promise'</span>);
promise.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'jzplp!'</span>)
})
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'jzplp!2'</span>)
})

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
jzplp!
jzplp!2
*/</span>
</code></pre>
<p>å› æ­¤ï¼Œå¦‚æœå¸Œæœ›ä»…ä½¿ç”¨å¯¼å‡ºå¯¹è±¡ï¼Œè¿˜æ˜¯éœ€è¦ä½¿ç”¨core-js-pureè¿™ä¸ªåŒ…ã€‚core-js-pureä¹Ÿå¯ä»¥ä»…å¯¼å‡ºå¯¹è±¡æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> try2 = <span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js-pure/full/promise/try"</span>);
<span class="hljs-title class_">Promise</span>.<span class="hljs-property">try</span> = try2;
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"jzplp!"</span>);
});

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
jzplp!
*/</span>
</code></pre>
<p>å› ä¸ºå¯¼å‡ºçš„å¯¹è±¡æ–¹æ³•ä¸èƒ½ç‹¬ç«‹ä½¿ç”¨ï¼Œå› æ­¤åœ¨ä¾‹å­ä¸­æˆ‘ä»¬è¿˜æ˜¯å°†å…¶æ³¨å…¥åˆ°Promiseå¯¹è±¡åä½¿ç”¨ã€‚</p>
<h3 data-id="heading-5">ç‰¹æ€§åˆ†ç±»å¼•å…¥</h3>
<p>core-jsä¸­åŒ…å«éå¸¸å¤šAPIç‰¹æ€§çš„å…¼å®¹ä»£ç ï¼Œæœ‰äº›æ˜¯å·²ç»ç¨³å®šçš„ç‰¹æ€§ï¼Œæœ‰äº›æ˜¯è¿˜å¤„åœ¨æè®®é˜¶æ®µçš„ï¼Œä¸ç¨³å®šçš„ç‰¹æ€§ã€‚æˆ‘ä»¬ç›´æ¥å¼•å…¥core-jsä¼šæŠŠè¿™äº›ç‰¹æ€§å…¨éƒ¨å¼•å…¥ï¼Œä½†å¦‚æœä¸éœ€è¦é‚£äº›ä¸ç¨³å®šç‰¹æ€§ï¼Œcore-jsä¹Ÿæä¾›äº†å¤šç§å¼•å…¥æ–¹å¼ï¼š</p>
<ul>
<li>core-js å¼•å…¥æ‰€æœ‰ç‰¹æ€§ï¼ŒåŒ…æ‹¬æ—©æœŸçš„æè®®</li>
<li>core-js/full ç­‰äºå¼•å…¥core-js</li>
<li>core-js/actual åŒ…å«ç¨³å®šçš„ESå’ŒWebæ ‡å‡†ç‰¹æ€§ï¼Œä»¥åŠstage3çš„ç‰¹æ€§</li>
<li>core-js/stable åŒ…å«ç¨³å®šçš„ESå’ŒWebæ ‡å‡†ç‰¹æ€§</li>
<li>core-js/es åŒ…å«ç¨³å®šçš„ESç‰¹æ€§</li>
</ul>
<p>è¿™é‡Œæˆ‘ä»¬ä¸¾ä¸¤ä¸ªä¾‹å­å°è¯•ä¸‹ã€‚é¦–å…ˆç”±äºECMAScriptæ ‡å‡†ä¸€ç›´åœ¨æ›´æ–°ä¸­ï¼Œæœ‰äº›ç‰¹æ€§ç°åœ¨æ˜¯æè®®ï¼Œæœªæ¥å¯èƒ½å°±å·²ç»è¢«åˆ—å…¥æ­£å¼ç‰¹æ€§äº†ã€‚å› æ­¤è¿™é‡Œçš„ä¾‹å­éœ€è¦æ˜ç¡®ç¯å¢ƒå’Œcore-jsç‰ˆæœ¬ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨Node.js v18.19.1å’Œcore-js@3.47.0ç‰ˆæœ¬ï¼Œä»¥å†™è¿™ç¯‡æ–‡ç« çš„æ—¶é—´ä¸ºå‡†ã€‚</p>
<p>é¦–å…ˆç¬¬ä¸€ä¸ªç‰¹æ€§æ˜¯ï¼šæ•°ç»„çš„lastIndexå±æ€§ï¼Œè¿™æ˜¯ä¸€ä¸ªstage1é˜¶æ®µçš„APIï¼Œè¿™é‡Œé’ˆå¯¹ä¸åŒçš„å¼•å…¥æ–¹å¼è¿›è¡Œå°è¯•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¸å¼•å…¥core-jså°è¯•</span>
<span class="hljs-keyword">const</span> arr = [<span class="hljs-string">"jz"</span>, <span class="hljs-string">"plp"</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-property">lastIndex</span>);
<span class="hljs-comment">/* è¾“å‡ºç»“æœ
undefined
*/</span>

<span class="hljs-comment">// å¼•å…¥core-js/full</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/full"</span>);
<span class="hljs-keyword">const</span> arr = [<span class="hljs-string">"jz"</span>, <span class="hljs-string">"plp"</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-property">lastIndex</span>);
<span class="hljs-comment">/* è¾“å‡ºç»“æœ
1
*/</span>

<span class="hljs-comment">// å¼•å…¥core-js/actual</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/actual"</span>);
<span class="hljs-keyword">const</span> arr = [<span class="hljs-string">"jz"</span>, <span class="hljs-string">"plp"</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-property">lastIndex</span>);

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
undefined
*/</span>
</code></pre>
<p>é¦–å…ˆå½“ä¸å¼•å…¥core-jsæ—¶ï¼Œå› ä¸ºä¸æ”¯æŒè¿™ä¸ªAPIï¼Œæ‰€ä»¥è¾“å‡ºundefinedã€‚core-js/fullæ”¯æŒstage1é˜¶æ®µçš„APIï¼Œå¯ä»¥æ­£ç¡®è¾“å‡ºç»“æœã€‚ä½†core-js/actualä»…æ”¯æŒstage3é˜¶æ®µçš„APIï¼Œå› æ­¤è¿˜æ˜¯ä¸æ”¯æŒè¿™ä¸ªAPIã€‚</p>
<p>ç„¶åæˆ‘ä»¬å†çœ‹ä¸‹å¦å¤–ä¸€ä¸ªAPIï¼Œæ•°ç»„çš„groupByæ–¹æ³•ã€‚è¿™æ˜¯ä¸€ä¸ªstage3é˜¶æ®µçš„APIï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¸å¼•å…¥core-jså°è¯•</span>
<span class="hljs-keyword">const</span> arr = [
  { <span class="hljs-attr">group</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"jz"</span> },
  { <span class="hljs-attr">group</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"jz2"</span> },
  { <span class="hljs-attr">group</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"plp"</span> },
];
<span class="hljs-keyword">const</span> arrNew = arr.<span class="hljs-title function_">groupBy</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">group</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew)
<span class="hljs-comment">/* è¾“å‡ºç»“æœ
const arrNew = arr.groupBy(item =&gt; item.group);
                   ^
TypeError: arr.groupBy is not a function
*/</span>

<span class="hljs-comment">// å¼•å…¥core-js/actual</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/actual"</span>);
<span class="hljs-keyword">const</span> arr = [
  { <span class="hljs-attr">group</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"jz"</span> },
  { <span class="hljs-attr">group</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"jz2"</span> },
  { <span class="hljs-attr">group</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"plp"</span> },
];
<span class="hljs-keyword">const</span> arrNew = arr.<span class="hljs-title function_">groupBy</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">group</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew)
<span class="hljs-comment">/* è¾“å‡ºç»“æœ
[Object: null prototype] {
  '1': [ { group: 1, value: 'jz' }, { group: 1, value: 'plp' } ],
  '2': [ { group: 2, value: 'jz2' } ]
}
*/</span>

<span class="hljs-comment">// å¼•å…¥core-js/stable</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/stable"</span>);
<span class="hljs-keyword">const</span> arr = [
  { <span class="hljs-attr">group</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"jz"</span> },
  { <span class="hljs-attr">group</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"jz2"</span> },
  { <span class="hljs-attr">group</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"plp"</span> },
];
<span class="hljs-keyword">const</span> arrNew = arr.<span class="hljs-title function_">groupBy</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">group</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew)
<span class="hljs-comment">/* è¾“å‡ºç»“æœ
const arrNew = arr.groupBy(item =&gt; item.group);
                   ^
TypeError: arr.groupBy is not a function
*/</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œä¸å¼•å…¥core-jsæ—¶ä¸æ”¯æŒï¼Œå¼•å…¥äº†core-js/actualï¼ˆåŒ…å«stage3é˜¶æ®µçš„APIï¼‰åæ”¯æŒå¹¶èƒ½è¾“å‡ºæ­£ç¡®çš„ç»“æœã€‚core-js/stableä¸­ä¸æ”¯æŒåˆæŠ¥é”™äº†ã€‚</p>
<h2 data-id="heading-6">core-jsæºç ç»“æ„</h2>
<p>å‰é¢æè¿°äº†å¾ˆå¤šcore-jsçš„å¼•å…¥æ–¹å¼ï¼Œè¿™é‡Œæˆ‘ä»¬çœ‹ä¸€ä¸‹æºç ç»“æ„ï¼Œçœ‹çœ‹core-jså†…éƒ¨æ˜¯å¦‚ä½•ç»„ç»‡çš„ã€‚</p>
<h3 data-id="heading-7">core-jsæºç ç›®å½•</h3>
<pre><code class="hljs language-erlang" lang="erlang">core-js
â”œâ”€actual
â”‚   â”œâ”€array
â”‚   â”‚  â”œâ”€at.js
â”‚   â”‚  â”œâ”€concat.js
â”‚   â”‚  â””â”€...
â”‚   â”œâ”€set
â”‚   â”‚  â””â”€...
â”‚   â””â”€...
â”œâ”€es
â”‚   â””â”€...
â”œâ”€features
â”‚   â””â”€...
â”œâ”€index.js
â””â”€...
</code></pre>
<p>é¦–å…ˆåˆ—å‡ºcore-jsæºç ç›®å½•çš„ç¤ºæ„å›¾ï¼Œå¯ä»¥çœ‹åˆ°core-jså†…éƒ¨æœ‰å¾ˆå¤šç›®å½•ï¼Œå¯¹åº”å‰é¢çš„å„ç§å¼•å…¥æ–¹å¼ã€‚è¿™é‡Œæˆ‘ä»¬åˆ—å‡ºæ¯ä¸ªç›®å½•çš„å†…å®¹ï¼š</p>
<ul>
<li>actual åŒ…å«ç¨³å®šçš„ESå’ŒWebæ ‡å‡†ç‰¹æ€§ï¼Œä»¥åŠstage3çš„ç‰¹æ€§</li>
<li>es åŒ…å«ç¨³å®šçš„ESç‰¹æ€§</li>
<li>features æ²¡æœ‰è¯´æ˜ï¼ŒçŒœæµ‹å’Œfullç±»ä¼¼</li>
<li>full æ‰€ä»¥ç‰¹æ€§åŒ…æ‹¬æ—©æœŸæè®®</li>
<li>internals åŒ…å†…éƒ¨ä½¿ç”¨çš„é€»è¾‘</li>
<li>modules å®é™…ç‰¹æ€§çš„ä»£ç å®ç°</li>
<li>proposals åŒ…å«æè®®çš„ç‰¹æ€§</li>
<li>stable åŒ…å«ç¨³å®šçš„ESå’ŒWebæ ‡å‡†ç‰¹æ€§</li>
<li>stage æŒ‰ç…§stageé˜¶æ®µåˆ—å‡ºæè®®ç‰¹æ€§</li>
<li>web åŒ…å«Webæ ‡å‡†ç‰¹æ€§</li>
<li>configurator.js æ˜¯å¦å¼ºåˆ¶å¼•å…¥é€»è¾‘ï¼Œåé¢ä¼šæè¿°</li>
<li>index.js å†…å®¹ä¸ºå¯¼å‡ºfullç›®å½•ï¼Œå› æ­¤å¯¼å…¥core-jsç­‰äºå¯¼å…¥core-js/full</li>
</ul>
<h3 data-id="heading-8">å±‚å±‚å¼•ç”¨</h3>
<p>åœ¨ç›®å½•ä¸­actual, es, full, stable, esæ˜¯æˆ‘ä»¬å·²ç»ä»‹ç»è¿‡çš„ã€‚å¦å¤–è¿˜æœ‰webç›®å½•ä»…åŒ…å«webæ ‡å‡†çš„ç‰¹æ€§ï¼Œfeatureså’Œfullç±»ä¼¼ï¼ˆindex.jsä¸­ç›´æ¥å¯¼å‡ºfullç›®å½•ï¼‰ã€‚</p>
<p>proposalsç›®å½•åŒ…å«æè®®çš„ç‰¹æ€§ï¼Œä»¥ç‰¹æ€§åæ¥å‘½åæ–‡ä»¶åã€‚è€Œstageç›®å½•ä¸­åŒ…å«0.js, 1.js, 2.jsç­‰ç­‰ï¼Œæ˜¯æ ¹æ®stageé˜¶æ®µæ¥æ•´ç†çš„ï¼Œæ–¹ä¾¿æ•´ç†å’Œå¼•å…¥å¯¹åº”é˜¶æ®µçš„ç‰¹æ€§ã€‚</p>
<p>è¿™æ ·æ•´ç†ç›®å½•è™½ç„¶æ¸…æ™°ï¼Œä½†è¿™äº›ç›®å½•ä¸­çš„ç‰¹æ€§éƒ½æ˜¯é‡å¤çš„ï¼Œä¸å¯èƒ½åœ¨æ¯ä¸ªç›®å½•ä¸­æŠŠç‰¹æ€§éƒ½å®ç°ä¸€éã€‚å› æ­¤ä¸Šé¢è¿™äº›ç›®å½•çš„æ–‡ä»¶ä¸­ï¼Œå­˜æ”¾çš„éƒ½æ˜¯å®ç°çš„å¼•ç”¨ï¼Œå¹¶ä¸æ˜¯ç‰¹æ€§ä»£ç å®ç°æœ¬èº«ã€‚çœŸæ­£çš„å®ç°åœ¨modulesç›®å½•ä¸­ã€‚modulesç›®å½•ä¸­æ˜¯ä»¥ç‰¹æ€§åä½œä¸ºå‘½åçš„æ–‡ä»¶ï¼Œæ–‡ä»¶æœ‰å›ºå®šçš„å‰ç¼€åï¼šes.è¡¨ç¤ºESæ ‡å‡†ï¼›esnext.è¡¨ç¤ºæè®®ä¸­çš„æ ‡å‡†ï¼›web.è¡¨ç¤ºwebæ ‡å‡†ã€‚</p>
<p>è¿™é‡Œä»¥æˆ‘ä»¬ä¸Šé¢æåˆ°è¿‡çš„ä¸¤ä¸ªç‰¹æ€§ä¸ºä¾‹ï¼Œçœ‹çœ‹å¼•ç”¨è·¯å¾„ï¼Œé¦–å…ˆæ˜¯Promise.tryï¼š</p>
<ul>
<li>ä½¿ç”¨è€…å¼•å…¥ core-js/full/promise/try.js</li>
<li>å¼•å…¥ actual/promise/try.js</li>
<li>å¼•å…¥ actual/promise/try.js</li>
<li>å¼•å…¥ stable/promise/try.js</li>
<li>å¼•å…¥ es/promise/try.js</li>
<li>æœ€ç»ˆå¼•å…¥ modules/es.promise.try.js</li>
</ul>
<p>ç„¶åæ˜¯groupByæ–¹æ³•ï¼š</p>
<ul>
<li>ä½¿ç”¨è€…å¼•å…¥ core-js/actual/array/group-by.js</li>
<li>æœ€ç»ˆå¼•å…¥ modules/esnext.array.group-by.js</li>
</ul>
<p>å¯ä»¥çœ‹åˆ°ï¼Œcore-jså†…éƒ¨çš„ç‰¹æ€§æ˜¯ç»è¿‡å±‚å±‚å¼•å…¥ï¼Œæœ€ç»ˆå¼•å…¥å…·ä½“çš„å®ç°ä»£ç çš„ã€‚</p>
<h3 data-id="heading-9">core-js-pureä¸core-js-bundle</h3>
<p>é™¤äº†core-jsä¹‹å¤–ï¼Œcore-js-pureä¸core-js-bundleè¿™ä¸¤ä¸ªåŒ…ä¹Ÿæä¾›äº†å…¼å®¹æ€§ã€‚core-js-pureå†…éƒ¨çš„ç›®å½•ç»“æ„ä¸core-jsä¸€è‡´ï¼Œåªä¸è¿‡core-js-pureä¸å°†ç‰¹æ€§æ³¨å…¥åˆ°å…¨å±€ã€‚core-js-bundleæ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒæ˜¯å°†core-jsä»£ç ç»è¿‡æ‰“åŒ…åå†æä¾›ï¼Œå®ƒçš„ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">core-js-bundle
â”œâ”€index.js
â”œâ”€minified.js
â”œâ”€minified.js.map
â””â”€...
</code></pre>
<p>å…¶ä¸­index.jsæ˜¯æ‰“åŒ…è¿‡åçš„ç‰¹æ€§é›†åˆä»£ç ï¼Œminified.jsæ˜¯ç»è¿‡å‹ç¼©æ··æ·†åçš„ä»£ç ã€‚core-js-bundleåªèƒ½å…¨éƒ¨å¼•å…¥å¹¶æ³¨å…¥åˆ°å…¨å±€ï¼Œä¸èƒ½å¼•å…¥éƒ¨åˆ†ç›®å½•æˆ–è€…å¯¼å‡ºæŸä¸ªå±æ€§ã€‚</p>
<h2 data-id="heading-10">æ‰“åŒ…å’Œæµè§ˆå™¨æ•ˆæœ</h2>
<h3 data-id="heading-11">åˆ›å»ºWebpackç¤ºä¾‹</h3>
<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªWebapcké¡¹ç›®ï¼Œæ–¹ä¾¿åç»­æ‰“åŒ…æŸ¥çœ‹æ•ˆæœã€‚é¦–å…ˆæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºé¡¹ç›®</span>
npm init -y
<span class="hljs-comment"># å®‰è£…webpackä¾èµ–</span>
npm add webpack webpack-cli html-webpack-plugin
<span class="hljs-comment"># å®‰è£…core-jsä¾èµ–</span>
npm add core-js core-js-pure core-js-bundle
</code></pre>
<p>åˆ›å»ºsrc/index.jsï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = [<span class="hljs-string">"jz"</span>, <span class="hljs-string">"plp"</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-property">lastIndex</span>);
</code></pre>
<p>åœ¨package.jsonæ–‡ä»¶çš„scriptsä¸­å¢åŠ å‘½ä»¤ï¼š"build": "webpack"ã€‚æœ€åæ˜¯Webpacké…ç½®æ–‡ä»¶webpack.config.js:</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">HtmlWebpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'html-webpack-plugin'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'production'</span>, <span class="hljs-comment">// ç”Ÿäº§æ¨¡å¼</span>
  <span class="hljs-attr">entry</span>: <span class="hljs-string">'./src/index.js'</span>, <span class="hljs-comment">// æºç å…¥å£</span>
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">HtmlWebpackPlugin</span>({ <span class="hljs-comment">// ç”ŸæˆHTMLé¡µé¢å…¥å£</span>
      <span class="hljs-attr">title</span>: <span class="hljs-string">'jzplpçš„core-jså®éªŒ'</span>, <span class="hljs-comment">// é¡µé¢æ ‡é¢˜</span>
    }),
  ],
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">filename</span>: <span class="hljs-string">'main.js'</span>, <span class="hljs-comment">// ç”Ÿæˆæ–‡ä»¶å</span>
    <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'dist'</span>),  <span class="hljs-comment">// ç”Ÿæˆæ–‡ä»¶ç›®å½•</span>
    <span class="hljs-attr">clean</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// ç”Ÿæˆå‰åˆ é™¤distç›®å½•å†…å®¹</span>
  },
};
</code></pre>
<p>å‘½ä»¤è¡Œè¿è¡Œnpm run buildï¼Œå³å¯ä½¿ç”¨Webpackæ‰“åŒ…ã€‚åœ¨distç›®å½•ä¸­ç”Ÿæˆäº†ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯main.jsï¼Œé‡Œé¢æ˜¯æ‰“åŒ…åçš„jsä»£ç ï¼›index.htmlå¯ä»¥è®©æˆ‘ä»¬åœ¨æµè§ˆå™¨æŸ¥çœ‹æ•ˆæœã€‚ç”±äºæˆ‘ä»¬æ²¡æœ‰å¼•å…¥core-jsï¼Œæµè§ˆå™¨æ²¡æœ‰é¢„ç½®lastIndexè¿™ä¸ªæè®®ä¸­çš„ç‰¹æ€§ï¼Œå› æ­¤è¾“å‡ºundefinedã€‚</p>
<h3 data-id="heading-12">core-jsæ‰“åŒ…</h3>
<p>è¿™é‡Œå¼•å…¥core-jsï¼Œç„¶åæ‰“åŒ…æŸ¥çœ‹æ•ˆæœã€‚é¦–å…ˆæ˜¯å…¨é‡å¼•å…¥ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js"</span>);
<span class="hljs-keyword">const</span> arr = [<span class="hljs-string">"jz"</span>, <span class="hljs-string">"plp"</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-property">lastIndex</span>);
</code></pre>
<p>æ­¤æ—¶æµè§ˆå™¨è¾“å‡º1ï¼Œè¡¨ç¤ºcore-jsæ³¨å…¥æˆåŠŸï¼ŒlastIndexç‰¹æ€§ç”Ÿæ•ˆäº†ã€‚ä½†æ˜¯æˆ‘ä»¬æŸ¥çœ‹main.jsï¼Œå‘ç°å±…ç„¶æœ‰267KBã€‚è¿™æ˜¯å› ä¸ºå®ƒæŠŠæ‰€æœ‰ç‰¹æ€§éƒ½å¼•å…¥äº†ã€‚</p>
<p>å¦‚æœå¼•å…¥<code>require("core-js/full/array")</code>ï¼Œæ­¤æ—¶æ–°ç‰¹æ€§ä¹Ÿå¯ä»¥ç”Ÿæ•ˆã€‚å› ä¸ºåªå¼•å…¥äº†æ•°ç»„ç›¸å…³ç‰¹æ€§ï¼Œå› æ­¤main.jsçš„å¤§å°ä¸º59.3KBï¼Œæ¯”å…¨é‡å¼•å…¥å°å¾ˆå¤šã€‚</p>
<p>å¦‚æœå¼•å…¥<code>require("core-js/full/array/last-index")</code>ï¼Œæ­¤æ—¶æ–°ç‰¹æ€§ä¹Ÿå¯ä»¥ç”Ÿæ•ˆã€‚å› ä¸ºåªå¼•å…¥äº†è¿™ä¸€ä¸ªç‰¹æ€§ï¼Œå› æ­¤main.jsçš„å¤§å°ä¸º12.2KBã€‚</p>
<h2 data-id="heading-13">Babelä¸core-js</h2>
<p>ä»å‰é¢æ‰“åŒ…çš„ä¾‹å­ä¸­å¯ä»¥çœ‹åˆ°ï¼Œcore-jsæ•´ä¸ªæ‰“åŒ…è¿›é¡¹ç›®ä¸­æ˜¯éå¸¸å·¨å¤§çš„ï¼Œå¯èƒ½æ¯”ä½ æ­£å¸¸é¡¹ç›®çš„å¤§å°è¿˜è¦æ›´å¤§ã€‚è¿™æ ·æ˜æ˜¾ä¼šé€ æˆå ç”¨èµ„æºæ›´å¤šï¼Œé¡µé¢åŠ è½½æ—¶é—´å˜æ…¢ç­‰é—®é¢˜ã€‚ä¸€ä¸ªè§£å†³åŠæ³•æ˜¯ï¼Œåªå¼•å…¥æˆ‘ä»¬ä»£ç ä¸­ä½¿ç”¨åˆ°çš„ç‰¹æ€§ï¼Œä»¥åŠæˆ‘ä»¬è¦é€‚é…çš„æµè§ˆå™¨ç‰ˆæœ¬ä¸­ä¸å…¼å®¹çš„ç‰¹æ€§ï¼Œç”¨ä¸åˆ°çš„ç‰¹æ€§ä¸æ‰“åŒ…è¿›ä»£ç ä¸­ã€‚Babelå°±æä¾›äº†è¿™æ ·çš„åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-14">åˆ›å»ºBabelç¤ºä¾‹</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºé¡¹ç›®</span>
npm init -y
<span class="hljs-comment"># å®‰è£…webpackä¾èµ–</span>
npm add @babel/core @babel/cli @babel/preset-env
<span class="hljs-comment"># å®‰è£…core-jsä¾èµ–</span>
npm add core-js core-js-pure core-js-bundle
</code></pre>
<p>åˆ›å»ºsrc/index.jsï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js'</span>);
<span class="hljs-keyword">const</span> jzplp = <span class="hljs-number">1</span>;
</code></pre>
<p>åœ¨package.jsonæ–‡ä»¶çš„scriptsä¸­å¢åŠ å‘½ä»¤ï¼š"babel": "babel src --out-dir lib"ã€‚æœ€åæ˜¯Babelé…ç½®æ–‡ä»¶babel.config.json:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"presets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"@babel/preset-env"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"targets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"chrome"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"100"</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>targetsä¸­è¡¨ç¤ºæˆ‘ä»¬éœ€è¦å…¼å®¹çš„æµè§ˆå™¨ç‰ˆæœ¬ã€‚æ‰§è¡Œnpm run babelï¼Œç”Ÿæˆç»“æœå†lib/index.jsä¸­ï¼Œå†…å®¹å¦‚ä¸‹ã€‚å¯ä»¥çœ‹åˆ°æœªå¯¹core-jsåšä»»ä½•å¤„ç†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-meta">"use strict"</span>;

<span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js'</span>);
<span class="hljs-keyword">const</span> jzplp = <span class="hljs-number">1</span>;
</code></pre>
<h3 data-id="heading-15">preset-envé…ç½®entry</h3>
<p>@babel/preset-envæ˜¯ä¸€ä¸ªBabelé¢„è®¾ï¼Œå¯ä»¥æ ¹æ®é…ç½®ä¸ºä»£ç å¢åŠ å…¼å®¹æ€§å¤„ç†ã€‚å‰é¢åˆ›å»ºBabelç¤ºä¾‹æ—¶å·²ç»å¢åŠ äº†è¿™ä¸ªé¢„è®¾ï¼Œä½†æ˜¯æ²¡æœ‰å¢åŠ core-jsé…ç½®ã€‚è¿™é‡Œæˆ‘ä»¬åŠ ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"presets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"@babel/preset-env"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"targets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"chrome"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"100"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"useBuiltIns"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"entry"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"corejs"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"3.47.0"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™é‡Œå¢åŠ äº†corejsç‰ˆæœ¬å’ŒuseBuiltInsé…ç½®ï¼Œå€¼ä¸ºentryã€‚é…ç½®è¿™ä¸ªå€¼ï¼Œä¼šä½¿å¾—@babel/preset-envæ ¹æ®é…ç½®çš„æµè§ˆå™¨ç‰ˆæœ¬å…¼å®¹æ€§ï¼Œé€‰æ‹©å¼•å…¥å“ªäº›core-jsä¸­çš„ç‰¹æ€§ã€‚è¿™é‡Œå†æ‰§è¡Œå‘½ä»¤è¡Œï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-meta">"use strict"</span>;

<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.symbol.async-dispose.js"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.symbol.dispose.js"</span>);
<span class="hljs-comment">// ... æ›´å¤šesç‰¹æ€§çœç•¥</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/esnext.array.filter-out.js"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/esnext.array.filter-reject.js"</span>);
<span class="hljs-comment">// ... æ›´å¤šesnextç‰¹æ€§çœç•¥</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/web.dom-exception.stack.js"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/web.immediate.js"</span>);
<span class="hljs-comment">// ... æ›´å¤šwebç‰¹æ€§çœç•¥</span>
<span class="hljs-keyword">const</span> jzplp = <span class="hljs-number">1</span>;
</code></pre>
<p>å¯ä»¥çœ‹åˆ°core-jsè¢«æ‹†å¼€ï¼Œç›´æ¥å¼•å…¥äº†ç‰¹æ€§æœ¬èº«ã€‚åœ¨é…ç½®chrome: 100ç‰ˆæœ¬æ—¶ï¼Œå¼•å…¥çš„ç‰¹æ€§ä¸º215ä¸ªã€‚æˆ‘ä»¬ä¿®æ”¹é…ç½®chrome: 140ç‰ˆæœ¬æ—¶ï¼Œå†é‡æ–°ç”Ÿæˆä»£ç ï¼Œæ­¤æ—¶å¼•å…¥çš„ç‰¹æ€§ä¸º150ä¸ªã€‚å¯ä»¥çœ‹åˆ°ç¡®å®æ—¶æ ¹æ®æµè§ˆå™¨ç‰ˆæœ¬é€‰æ‹©ä¸åŒçš„ç‰¹æ€§å¼•å…¥ã€‚è¿™å¯¹äºå…¶å®ƒcore-jsçš„å¼•å…¥æ–¹å¼ä¹Ÿç”Ÿæ•ˆï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æºä»£ç </span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js/stable'</span>);
<span class="hljs-keyword">const</span> jzplp = <span class="hljs-number">1</span>;

<span class="hljs-comment">// ç”Ÿæˆä»£ç </span>
<span class="hljs-meta">"use strict"</span>;

<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.symbol.async-dispose.js"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.symbol.dispose.js"</span>);
<span class="hljs-comment">// ... æ›´å¤šesç‰¹æ€§çœç•¥</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/web.dom-exception.stack.js"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/web.immediate.js"</span>);
<span class="hljs-comment">// ... æ›´å¤šwebç‰¹æ€§çœç•¥</span>
<span class="hljs-keyword">const</span> jzplp = <span class="hljs-number">1</span>;
</code></pre>
<p>æˆ‘ä»¬å¼•å…¥core-js/stableï¼Œå¯ä»¥çœ‹åˆ°ç”Ÿæˆä»£ç ä¸­ä¸å¼•å…¥esnextç‰¹æ€§äº†ã€‚åœ¨é…ç½®chrome: 100ç‰ˆæœ¬æ—¶ï¼Œå¼•å…¥çš„ç‰¹æ€§ä¸º71ä¸ªï¼Œé…ç½®chrome: 100ç‰ˆæœ¬æ—¶ï¼Œå¼•å…¥çš„ç‰¹æ€§ä¸º6ä¸ªã€‚åŒæ ·çš„ï¼Œå¦‚æœå¼•å…¥æ¢æˆcore-js/full/arrayï¼Œå°±ä¼šåªå¼•å…¥æ•°ç»„ç›¸å…³ç‰¹æ€§ï¼Œè€Œä¸”ä¹Ÿæ˜¯æ ¹æ®æµè§ˆå™¨å…¼å®¹ç‰ˆæœ¬å¼•å…¥ã€‚</p>
<h3 data-id="heading-16">preset-envé…ç½®usage</h3>
<p>@babel/preset-envçš„useBuiltInsé…ç½®å€¼ä¸ºusageæ—¶ï¼ŒBabelä¸ä»…ä¼šè·Ÿæ ¹æ®é…ç½®çš„æµè§ˆå™¨ç‰ˆæœ¬å…¼å®¹æ€§ï¼Œè¿˜ä¼šæ ¹æ®ä»£ç ä¸­å®é™…ä½¿ç”¨çš„ç‰¹æ€§æ¥é€‰æ‹©å¼•å…¥å“ªäº›core-jsä¸­çš„ç‰¹æ€§ã€‚é¦–å…ˆæ˜¯Babelé…ç½®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"presets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"@babel/preset-env"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"targets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"chrome"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"100"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"useBuiltIns"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"usage"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"corejs"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"3.47.0"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ç„¶åæ˜¯è¦å¤„ç†çš„ä»£ç ï¼Œæ³¨æ„é…ç½®usageæ—¶æ˜¯ä¸éœ€è¦æ‰‹åŠ¨å¼•å…¥core-jsçš„ã€‚æˆ‘ä»¬é…ç½®ä¸åŒçš„Chromeæµè§ˆå™¨ç‰ˆæœ¬ï¼Œçœ‹çœ‹è¾“å‡ºç»“æœå¦‚ä½•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æºä»£ç </span>
<span class="hljs-keyword">const</span> jzplp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>();
<span class="hljs-keyword">const</span> b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();

<span class="hljs-comment">// chrome 50 ç”Ÿæˆä»£ç  </span>
<span class="hljs-meta">"use strict"</span>;

<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.array.iterator.js"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.map.js"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.promise.js"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/web.dom-collections.iterator.js"</span>);
<span class="hljs-keyword">const</span> jzplp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>();
<span class="hljs-keyword">const</span> b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();

<span class="hljs-comment">// chrome 100 ç”Ÿæˆä»£ç  </span>
<span class="hljs-meta">"use strict"</span>;

<span class="hljs-keyword">const</span> jzplp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>();
<span class="hljs-keyword">const</span> b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
</code></pre>
<p>é¦–å…ˆå¯ä»¥çœ‹åˆ°ï¼Œå¼•å…¥core-jsä¸­çš„ç‰¹æ€§æ•°é‡å˜å¾—éå¸¸å°‘äº†ï¼Œä»£ç ä¸­æ²¡æœ‰ç”¨åˆ°çš„ç‰¹æ€§ä¸å†å¼•å…¥ã€‚å…¶æ¬¡ä¸åŒçš„æµè§ˆå™¨ç‰ˆæœ¬å¼•å…¥çš„ç‰¹æ€§ä¸ä¸€æ ·ï¼Œå› æ­¤è¿˜æ˜¯ä¼šæ ¹æ®æµè§ˆå™¨å…¼å®¹æ€§å¼•å…¥ç‰¹æ€§ã€‚æˆ‘ä»¬å†ä¿®æ”¹ä¸€ä¸‹æºä»£ç è¯•è¯•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æºä»£ç </span>
<span class="hljs-keyword">const</span> jzplp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>();
<span class="hljs-keyword">const</span> b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span>{});

<span class="hljs-comment">// chrome 50 ç”Ÿæˆä»£ç  </span>
<span class="hljs-meta">"use strict"</span>;

<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.array.iterator.js"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.map.js"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.promise.js"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.promise.try.js"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/web.dom-collections.iterator.js"</span>);
<span class="hljs-keyword">const</span> jzplp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>();
<span class="hljs-keyword">const</span> b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {});

<span class="hljs-comment">// chrome 100 ç”Ÿæˆä»£ç  </span>
<span class="hljs-meta">"use strict"</span>;

<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.promise.try.js"</span>);
<span class="hljs-keyword">const</span> jzplp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>();
<span class="hljs-keyword">const</span> b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {});
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæºä»£ç ä¸­å¢åŠ äº†Promise.tryï¼Œå¼•å…¥çš„ç‰¹æ€§ä¹Ÿéšä¹‹å¢åŠ äº†å¯¹åº”çš„core-jsç‰¹æ€§å¼•å…¥ã€‚å› æ­¤ï¼Œä½¿ç”¨@babel/preset-envçš„usageé…ç½®ï¼Œå¯ä»¥ä¿è¯å…¼å®¹æ€§çš„åŒæ—¶ï¼Œæœ€å°åŒ–å¼•å…¥core-jsç‰¹æ€§ã€‚å¦å¤–è¿™ä¸ªé…ç½®å¹¶ä¸ä¼šè‡ªåŠ¨å¼•å…¥æè®®ç‰¹æ€§ï¼Œå¦‚æœéœ€è¦åˆ™é¢å¤–é…ç½®proposalsä¸ºtrueã€‚</p>
<h3 data-id="heading-17">@babel/polyfill</h3>
<p>@babel/polyfillæ˜¯ä¸€ä¸ªå·²ç»è¢«å¼ƒç”¨çš„åŒ…ï¼Œæ¨èç›´æ¥ä½¿ç”¨core-js/stableã€‚æŸ¥çœ‹@babel/polyfillæºç ï¼Œå‘ç°ä»–å°±æ˜¯å¼•å…¥äº†core-jsç‰¹æ€§ä¸regenerator-runtimeè¿™ä¸ªåŒ…ã€‚regenerator-runtimeä¹Ÿæ˜¯ä¸€ä¸ªå…¼å®¹æ€§ç›¸å…³çš„åŒ…ï¼Œå¯ä»¥å¸®åŠ©æ·»åŠ generatoreå’Œasync/awaitç›¸å…³è¯­æ³•ã€‚ä½œä¸ºæ›¿ä»£å¯ä»¥è¿™æ ·å¼•å…¥ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-string">'core-js/stable'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'regenerator-runtime/runtime'</span>;
</code></pre>
<h3 data-id="heading-18">@babel/runtime</h3>
<p>@babel/runtimeå°±åƒè‡ªåŠ¨å¼•å…¥ç‰ˆçš„core-js-pureã€‚å®ƒè¿˜æ˜¯æ ¹æ®ä»£ç å®é™…ä½¿ç”¨çš„ç‰¹æ€§æ¥æ³¨å…¥core-jsç‰¹æ€§ï¼Œä½†å®ƒä¸æ³¨å…¥åˆ°å…¨å±€ï¼Œè€Œæ˜¯å¼•å…¥è¿™äº›APIå†è°ƒç”¨ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨@babel/plugin-transform-runtimeæ’ä»¶ï¼Œé‡Œé¢åŒ…å«äº†@babel/runtimeç›¸å…³é€»è¾‘ã€‚é¦–å…ˆçœ‹ä¸‹Babelé…ç½®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"plugins"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">[</span><span class="hljs-string">"@babel/plugin-transform-runtime"</span><span class="hljs-punctuation">,</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"corejs"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å†è½¬ä¹‰ä¸Šä¸€èŠ‚ä¸­çš„ä»£ç ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æºä»£ç </span>
<span class="hljs-keyword">const</span> jzplp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>();
<span class="hljs-keyword">const</span> b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span>{});

<span class="hljs-comment">// ç”Ÿæˆä»£ç </span>
<span class="hljs-keyword">import</span> _Promise <span class="hljs-keyword">from</span> <span class="hljs-string">"@babel/runtime-corejs3/core-js-stable/promise"</span>;
<span class="hljs-keyword">import</span> _Map <span class="hljs-keyword">from</span> <span class="hljs-string">"@babel/runtime-corejs3/core-js-stable/map"</span>;
<span class="hljs-keyword">const</span> jzplp = <span class="hljs-keyword">new</span> <span class="hljs-title function_">_Promise</span>();
<span class="hljs-keyword">const</span> b = <span class="hljs-keyword">new</span> <span class="hljs-title function_">_Map</span>();
_Promise.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {});
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶æ²¡æœ‰ç›´æ¥å¼•å…¥core-js-pureï¼Œä½†æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚æ‰“å¼€@babel/runtime-corejs3è¿™ä¸ªåŒ…æŸ¥çœ‹ï¼Œé‡Œé¢å®é™…ä¸Šå°±æ˜¯å¯¼å‡ºäº†core-js-pureä¸­çš„ç‰¹æ€§ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// @babel/runtime-corejs3/core-js-stable/map.js æ–‡ä»¶å†…å®¹</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js-pure/stable/map"</span>);
</code></pre>
<h2 data-id="heading-19">core-js/configuratorå¼ºåˆ¶æ§åˆ¶</h2>
<p>å¦‚æœå¸Œæœ›åœ¨æ­£å¸¸å¼•å…¥core-jsæ—¶ï¼Œå¯¹äºéƒ¨åˆ†ç‰¹æ®Šå±æ€§è¿›è¡Œå¼•å…¥æˆ–è€…ä¸å¼•å…¥çš„æ§åˆ¶ï¼Œå°±éœ€è¦ç”¨åˆ°core-js/configuratorã€‚è¿™ä¸ªå·¥å…·å¯ä»¥é…ç½®ä¸‰ç§é€‰é¡¹ï¼š</p>
<ul>
<li>useNative: å½“ç¯å¢ƒä¸­æœ‰è¿™ä¸ªç‰¹æ€§æ—¶ä¸å¼•å…¥ï¼Œå½“ç¡®å®šæ²¡æœ‰æ—¶æ‰å¼•å…¥</li>
<li>usePolyfill: æ˜ç¡®å¼•å…¥è¿™ä¸ªç‰¹æ€§</li>
<li>useFeatureDetection: é»˜è®¤è¡Œä¸ºï¼Œå’Œä¸ä½¿ç”¨core-js/configuratorä¸€è‡´</li>
</ul>
<h3 data-id="heading-20">useNativeä¸å¼•å…¥</h3>
<p>é¦–å…ˆè¯•è¯•ä¸å¼•å…¥ç‰¹æ€§ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨Promiseè¿™ä¸ªç‰¹æ€§ä¸ºä¾‹ã€‚é¦–å…ˆæ˜¯ä¸å¼•å…¥core-jsçš„æ•ˆæœï¼Œå¯ä»¥çœ‹åˆ°å…¨å±€Promiseå¯¹è±¡è¢«æˆ‘ä»¬æ”¹æ‰äº†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> jzplp = {};
<span class="hljs-title class_">Promise</span> = jzplp;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Promise</span>, <span class="hljs-title class_">Promise</span> === jzplp);

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
{} true
*/</span>
</code></pre>
<p>ç„¶ååœ¨ä¸­é—´å¼•å…¥core-jsè¯•è¯•ã€‚å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ”¹æ‰çš„Promiseï¼Œè¢«core-jsç»™æ”¹å›å»äº†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> jzplp = {};
<span class="hljs-title class_">Promise</span> = jzplp;
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/actual"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Promise</span>, <span class="hljs-title class_">Promise</span> === jzplp);

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
[Function: Promise] false
*/</span>
</code></pre>
<p>è¿™æ—¶å€™ï¼Œå¦‚æœä¸å¸Œæœ›core-jsæ”¹æ‰æˆ‘ä»¬è‡ªå®šä¹‰çš„Promiseï¼Œå¯ä»¥åˆ©ç”¨useNativeé…ç½®ï¼Œå¼ºåˆ¶core-jsä¸å¼•å…¥è¿™ä¸ªç‰¹æ€§ã€‚çœ‹ç»“æœcore-jså¼•å…¥ä¹‹åï¼Œæˆ‘ä»¬è‡ªå®šä¹‰çš„Promiseä¾ç„¶å­˜åœ¨ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> configurator = <span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/configurator"</span>);
<span class="hljs-title function_">configurator</span>({
  <span class="hljs-attr">useNative</span>: [<span class="hljs-string">"Promise"</span>],
});
<span class="hljs-keyword">const</span> jzplp = {};
<span class="hljs-title class_">Promise</span> = jzplp;
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/actual"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Promise</span>, <span class="hljs-title class_">Promise</span> === jzplp);

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
{} true
*/</span>
</code></pre>
<h3 data-id="heading-21">usePolyfillå¼ºåˆ¶å¼•å…¥</h3>
<p>æƒ³è¦éªŒè¯usePolyfillçš„æ•ˆæœï¼Œéœ€è¦æ‰¾ä¸€ä¸ªç¯å¢ƒä¸­æœ¬æ¥å­˜åœ¨çš„ç‰¹æ€§ï¼Œcore-jså³ä½¿å¼•å…¥ä¹Ÿä¸ä¼šä¿®æ”¹çš„ç‰¹æ€§ã€‚Promiseä¸è¡Œï¼Œå› ä¸ºcore-jså¼•å…¥æ—¶ä¼šå¯¹è¿™ä¸ªPromiseå¢åŠ å­ç‰¹æ€§ã€‚Promise.tryä¹Ÿä¸è¡Œï¼Œå› ä¸ºåŸæ¥ç¯å¢ƒä¸­ä¸å­˜åœ¨ã€‚è¿™é‡Œè¯•ä¸€ä¸‹Promise.anyï¼Œè¿™æ˜¯ç¯å¢ƒä¸­æœ¬æ¥å°±å­˜åœ¨çš„ç‰¹æ€§ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Promise</span>.<span class="hljs-property">any</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title function_">jzplp</span> = (<span class="hljs-params"/>) =&gt; {};
<span class="hljs-title class_">Promise</span>.<span class="hljs-property">any</span> = jzplp;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Promise</span>.<span class="hljs-property">any</span>, <span class="hljs-title class_">Promise</span>.<span class="hljs-property">any</span> === jzplp);

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
[Function: any]
[Function: jzplp] true
*/</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒPromise.anyåŸæ¥å°±å­˜åœ¨ï¼Œä½†æ˜¯è¢«æˆ‘ä»¬ä¿®æ”¹æˆäº†æ–°å‡½æ•°ã€‚å†å¼•å…¥core-jsè¯•è¯•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Promise</span>.<span class="hljs-property">any</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title function_">jzplp</span> = (<span class="hljs-params"/>) =&gt; {};
<span class="hljs-title class_">Promise</span>.<span class="hljs-property">any</span> = jzplp;
<span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Promise</span>.<span class="hljs-property">any</span>, <span class="hljs-title class_">Promise</span>.<span class="hljs-property">any</span> === jzplp);

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
[Function: any]
[Function: jzplp] true
*/</span>
</code></pre>
<p>å¼•å…¥äº†core-jsä¹‹åï¼Œç»“æœæ²¡æœ‰å˜åŒ–ã€‚è¿™è¯´æ˜core-jså¹¶ä¸ä¼šä¿®æ”¹æˆ‘ä»¬è‡ªå®šä¹‰çš„å‡½æ•°ã€‚è¿™æ—¶å€™å°±å¯ä»¥è¯•ä¸€ä¸‹usePolyfillçš„æ•ˆæœäº†ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> configurator = <span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/configurator"</span>);
<span class="hljs-title function_">configurator</span>({
  <span class="hljs-attr">usePolyfill</span>: [<span class="hljs-string">"Promise.any"</span>],
});
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Promise</span>.<span class="hljs-property">any</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title function_">jzplp</span> = (<span class="hljs-params"/>) =&gt; {};
<span class="hljs-title class_">Promise</span>.<span class="hljs-property">any</span> = jzplp;
<span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Promise</span>.<span class="hljs-property">any</span>, <span class="hljs-title class_">Promise</span>.<span class="hljs-property">any</span> === jzplp);

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
[Function: any]
[Function: any] false
*/</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒPromise.anyåˆè¢«æ”¹ä¸ºäº†çœŸæ­£èµ·æ•ˆæœçš„å‡½æ•°ï¼Œè¿™è¯´æ˜usePolyfillçš„å¼ºåˆ¶å¼•å…¥ç‰¹æ€§æ˜¯æœ‰æ•ˆçš„ã€‚</p>
<h2 data-id="heading-22">core-jsä¸­çš„ç‰¹æ€§é€‰æ‹©</h2>
<p>å‰é¢æˆ‘ä»¬ä½“éªŒäº†Babelæ ¹æ®æµè§ˆå™¨å…¼å®¹æ€§ï¼Œé€‰æ‹©ä¸åŒçš„core-jsç‰¹æ€§å¼•å…¥ï¼Œé‚£ä¹ˆä¸åŒæµè§ˆå™¨å…¼å®¹å“ªäº›ç‰¹æ€§çš„æ•°æ®æ˜¯ä»å“ªé‡Œè·å–å‘¢ï¼Ÿcore-jsæœ¬èº«å°±æä¾›äº†è¿™ä¸ªåŠŸèƒ½ã€‚</p>
<h3 data-id="heading-23">core-js-compat</h3>
<p>core-js-compatæä¾›äº†ä¸åŒæµè§ˆå™¨å¯¹åº”ç‰¹æ€§çš„å…¼å®¹æ€§æ•°æ®ã€‚å®ƒæœ‰å¥½å‡ ä¸ªå‚æ•°ï¼Œè¿™é‡Œå…ˆåˆ—ä¸¾ä¸€ä¸‹å«ä¹‰ï¼š</p>
<ul>
<li>targets: Browserslistæ ¼å¼çš„æµè§ˆå™¨å…¼å®¹é…ç½®</li>
<li>modules: éœ€è¦è®¾ç½®å…¼å®¹æ€§é…ç½®çš„æ¨¡å—ï¼Œå¯ä»¥æ˜¯core-js/fullï¼Œä¹Ÿå¯ä»¥æ˜¯æŸä¸ªç‰¹æ€§ï¼Œç”šè‡³æ˜¯æ­£åˆ™</li>
<li>exclude: éœ€è¦æ’é™¤çš„æ¨¡å—</li>
<li>version: ä½¿ç”¨çš„core-jsç‰ˆæœ¬</li>
<li>inverse: åå‘è¾“å‡ºï¼Œå³è¾“å‡ºä¸éœ€è¦å…¼å®¹çš„ç‰¹æ€§åˆ—è¡¨</li>
</ul>
<p>è¿™é‡Œä¸¾å‡ ä¸ªä¾‹å­è¯•ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> compat = <span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js-compat"</span>);
<span class="hljs-keyword">const</span> data = <span class="hljs-title function_">compat</span>({
  <span class="hljs-attr">targets</span>: <span class="hljs-string">"&gt; 10%"</span>,
  <span class="hljs-attr">modules</span>: [<span class="hljs-string">"core-js/actual"</span>],
  <span class="hljs-attr">version</span>: <span class="hljs-string">"3.47"</span>,
});
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
{
  list: [
    'es.iterator.concat',
    'es.math.sum-precise',
    'es.async-iterator.async-dispose',
    'esnext.array.group',
    'esnext.array.group-by',
    ...å…¶å®ƒç‰¹æ€§
  ],
  targets: {
    'es.iterator.concat': { 'chrome-android': '143' },
    'es.math.sum-precise': { 'chrome-android': '143' },
    'es.async-iterator.async-dispose': { 'chrome-android': '143' },
    'esnext.array.group': { 'chrome-android': '143' },
    'esnext.array.group-by': { 'chrome-android': '143' },
    ...å…¶å®ƒç‰¹æ€§
  }
}
*/</span>
</code></pre>
<p>compatä¼šæ ¹æ®æˆ‘ä»¬è®¾ç½®çš„æµè§ˆå™¨å…¼å®¹æ€§é…ç½®ï¼Œè¾“å‡ºç‰¹æ€§åˆ—è¡¨ï¼ŒåŒ…å«ä¸¤ä¸ªå­—æ®µï¼šlistæ˜¯ä¸€ä¸ªç‰¹æ€§åç§°åˆ—è¡¨ï¼›targetsæ˜¯ä¸€ä¸ªMapç»“æ„ï¼Œkeyä¸ºç‰¹æ€§åï¼Œå€¼ä¸ºå¯ä»¥å…¼å®¹çš„æµè§ˆå™¨ã€‚å‡è®¾æˆ‘ä»¬æŠŠä¸Šé¢çš„ targetsæ”¹æˆ &gt; 50%ï¼Œæ­¤æ—¶ä¼šè¾“å‡ºç©ºå€¼ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> compat = <span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js-compat"</span>);
<span class="hljs-keyword">const</span> data = <span class="hljs-title function_">compat</span>({
  <span class="hljs-attr">targets</span>: <span class="hljs-string">"&gt; 50%"</span>,
  <span class="hljs-attr">modules</span>: [<span class="hljs-string">"core-js/actual"</span>],
  <span class="hljs-attr">version</span>: <span class="hljs-string">"3.47"</span>,
});
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
{ list: [], targets: {} }
*/</span>
</code></pre>
<p>æˆ‘ä»¬å¢åŠ excludeï¼Œæ’é™¤éƒ¨åˆ†å±æ€§ï¼Œå¯ä»¥çœ‹åˆ°ç‰¹æ€§æ•°é‡å¤§å¤§å‡å°‘ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> compat = <span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js-compat"</span>);
<span class="hljs-keyword">const</span> data = <span class="hljs-title function_">compat</span>({
  <span class="hljs-attr">targets</span>: <span class="hljs-string">"&gt; 10%"</span>,
  <span class="hljs-attr">modules</span>: [<span class="hljs-string">"core-js/actual"</span>],
  <span class="hljs-attr">exclude</span>: [<span class="hljs-string">"esnext"</span>],
  <span class="hljs-attr">version</span>: <span class="hljs-string">"3.47"</span>,
});
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
{
  list: [
    'es.iterator.concat',
    'es.math.sum-precise',
    'es.async-iterator.async-dispose',
    'web.dom-exception.stack',
    'web.immediate',
    'web.structured-clone'
  ],
  targets: {
    'es.iterator.concat': { 'chrome-android': '143' },
    'es.math.sum-precise': { 'chrome-android': '143' },
    'es.async-iterator.async-dispose': { 'chrome-android': '143' },
    'web.dom-exception.stack': { 'chrome-android': '143' },
    'web.immediate': { 'chrome-android': '143' },
    'web.structured-clone': { 'chrome-android': '143' }
  }
}
*/</span>
</code></pre>
<p>å†è¯•ä¸€ä¸‹inverseçš„æ•ˆæœï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> compat = <span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js-compat"</span>);
<span class="hljs-keyword">const</span> data = <span class="hljs-title function_">compat</span>({
  <span class="hljs-attr">targets</span>: <span class="hljs-string">"&gt; 10%"</span>,
  <span class="hljs-attr">modules</span>: [<span class="hljs-string">"core-js/actual"</span>],
  <span class="hljs-attr">version</span>: <span class="hljs-string">"3.47"</span>,
  <span class="hljs-attr">inverse</span>: <span class="hljs-literal">true</span>
});
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
{
  list: [
    'es.symbol',
    'es.symbol.description',
    ...å…¶å®ƒç‰¹æ€§
  ],
  targets: {
    'es.symbol': {},
    'es.symbol.description': {},
    ...å…¶å®ƒç‰¹æ€§
  }
}
*/</span>
</code></pre>
<p>å› ä¸ºè¾“å‡ºçš„æ˜¯ä¸éœ€è¦å¼•å…¥core-jså…¼å®¹çš„ç‰¹æ€§ï¼Œæ‰€ä»¥ç‰¹æ€§æ•°é‡éå¸¸å¤šï¼Œè€Œä¸”targetsä¸­æ²¡æœ‰åˆ—å‡ºæ”¯æŒçš„æµè§ˆå™¨ç‰ˆæœ¬ã€‚</p>
<h3 data-id="heading-24">core-js-builder</h3>
<p>å‰é¢ä»‹ç»çš„core-js-compatæ˜¯æ¥æ”¶å‚æ•°ä¹‹åï¼Œè¾“å‡ºcore-jsçš„ç‰¹æ€§åˆ—è¡¨æ•°ç»„ã€‚è€Œcore-js-builderæ¥æ”¶ç±»ä¼¼çš„å‚æ•°ï¼Œç›´æ¥è¾“å‡ºå¼•ç”¨core-jsçš„ä»£ç ã€‚æˆ‘ä»¬é¦–å…ˆåˆ—ä¸¾ä¸€ä¸‹å‚æ•°ï¼š</p>
<ul>
<li>targets: Browserslistæ ¼å¼çš„æµè§ˆå™¨å…¼å®¹é…ç½®</li>
<li>modules: éœ€è¦è®¾ç½®å…¼å®¹æ€§é…ç½®çš„æ¨¡å—ï¼Œå¯ä»¥æ˜¯core-js/fullï¼Œä¹Ÿå¯ä»¥æ˜¯æŸä¸ªç‰¹æ€§ï¼Œç”šè‡³æ˜¯æ­£åˆ™</li>
<li>exclude: éœ€è¦æ’é™¤çš„æ¨¡å—</li>
<li>format: 'bundle'è¾“å‡ºæ‰“åŒ…åçš„æºç ï¼›'cjs'å’Œ'esm'è¾“å‡ºå¯¹åº”æ ¼å¼çš„å¼•ç”¨ä»£ç </li>
<li>filename: è¾“å‡ºçš„æ–‡ä»¶å</li>
</ul>
<p>æˆ‘ä»¬å…ˆè¯•ä¸€ä¸‹ä¾‹å­ã€‚é¦–å…ˆæ˜¯formatæ ¼å¼çš„ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> builder = <span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js-builder"</span>);
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">funJzplp</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">builder</span>({
    <span class="hljs-attr">targets</span>: <span class="hljs-string">"&gt; 30%"</span>,
    <span class="hljs-attr">modules</span>: [<span class="hljs-string">"core-js/actual"</span>],
    <span class="hljs-attr">format</span>: <span class="hljs-string">'bundle'</span>,
  });
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);
}
<span class="hljs-title function_">funJzplp</span>();

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
...ä»£ç å¾ˆé•¿ï¼Œè¿™é‡ŒèŠ‚é€‰éƒ¨åˆ†
 (function(module, exports, __webpack_require__) {
"use strict";
var NATIVE_BIND = __webpack_require__(8);
var FunctionPrototype = Function.prototype;
*/</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œbuilderå‡½æ•°è¾“å‡ºäº†éå¸¸é•¿çš„ä»£ç ï¼Œå†…å®¹å®é™…ä¸ºè¾“å‡ºçš„ç‰¹æ€§ç»è¿‡æ‰“åŒ…ä¹‹åçš„ç»“æœä»£ç ã€‚å†è¯•ä¸€ä¸‹'cjs'å’Œ'esm'ï¼Œè¾“å‡ºçš„æ˜¯å¯¹åº”æœ¨å—çš„å¼•ç”¨ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// format: 'cjs' è¾“å‡ºç»“æœ</span>
...ä»£ç å¾ˆé•¿ï¼Œè¿™é‡ŒèŠ‚é€‰éƒ¨åˆ†
<span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js/modules/es.iterator.concat'</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js/modules/es.math.sum-precise'</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js/modules/es.async-iterator.async-dispose'</span>);
*/

<span class="hljs-comment">// format: 'esm' è¾“å‡ºç»“æœ</span>
...ä»£ç å¾ˆé•¿ï¼Œè¿™é‡ŒèŠ‚é€‰éƒ¨åˆ†
<span class="hljs-keyword">import</span> <span class="hljs-string">'core-js/modules/es.iterator.concat.js'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'core-js/modules/es.math.sum-precise.js'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'core-js/modules/es.async-iterator.async-dispose.js'</span>;
*/
</code></pre>
<p>å¦‚æœè®¾ç½®äº†filenameï¼Œcore-js-builderä¼šåˆ›å»ºè¯¥åç§°çš„æ–‡ä»¶ï¼Œå¹¶å°†ä»£ç å†™å…¥åˆ°æ–‡ä»¶ä¸­ã€‚</p>
<h2 data-id="heading-25">æ€»ç»“</h2>
<p>è¿™ç¯‡æ–‡ç« æè¿°äº†core-jsç›¸å…³åŒ…çš„ä»£ç å†…å®¹å’Œä½¿ç”¨æ–¹å¼ã€‚core-jså®é™…ä¸Šå°±æ˜¯æä¾›äº†JavaScriptä¸­ä¸€äº›APIç‰¹æ€§çš„å…¼å®¹å®ç°æ–¹å¼ã€‚å®ƒä¸å®ç°è¯­æ³•å…¼å®¹çš„Babelä¸€èµ·ï¼Œå¯ä»¥åšåˆ°å¤§éƒ¨åˆ†JavaScriptçš„å…¼å®¹æ€§ã€‚å½“ç„¶core-jså’ŒBabelä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ï¼Œå®ƒä»¬éƒ½æœ‰å„è‡ªæ— æ³•è½¬ä¹‰å’Œå…¼å®¹çš„è¯­æ³•å’Œç‰¹æ€§ã€‚</p>
<p>core-jsè¿™ä¸ªåŒ…åå­—èµ·çš„éå¸¸å¥½ï¼Œä¸€å¬å°±æ˜¯JavaScriptçš„â€œæ ¸å¿ƒâ€åŒ…ã€‚ç”±äºå®ƒå®ç°äº†å¾ˆå¤šAPIç‰¹æ€§ï¼Œè€Œä¸”å¼•ç”¨æ•°é‡éå¸¸éå¸¸å¤§ï¼Œå› æ­¤å«â€œæ ¸å¿ƒâ€ä¹Ÿä¸ä¸ºè¿‡ã€‚è™½ç„¶è¿™ä¸ªåŒ…å¼•ç”¨é‡å¾ˆå¤§ï¼Œä½†ä¸å¦‚React/Vueæˆ–è€…ä¸€äº›å…¶å®ƒåŒ…å‡ºåã€‚å› ä¸ºè¿™ä¸ªåŒ…æ˜¯å¤„ç†çš„æ›´åº•å±‚çš„å…¼å®¹æ€§æœ‰é—®é¢˜ï¼Œå› æ­¤ç”¨æˆ·æ„ŸçŸ¥ä¸å¼ºã€‚core-jsåŒ…çš„ä½œè€…è¿˜å› ä¸ºæ²¡æœ‰é’±è€Œé‡åˆ°å¾ˆå¤šé—®é¢˜ï¼Œè¿™ä¸ªåŒ…å¹¶æ²¡æœ‰è®©ä»–å˜çš„å¯Œæœ‰ã€‚</p>
<h2 data-id="heading-26">å‚è€ƒ</h2>
<ul>
<li>core-js æ–‡æ¡£<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fcore-js.io%2F" target="_blank" title="https://core-js.io/" ref="nofollow noopener noreferrer">core-js.io/</a></li>
<li>Github core-js<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzloirock%2Fcore-js" target="_blank" title="https://github.com/zloirock/core-js" ref="nofollow noopener noreferrer">github.com/zloirock/coâ€¦</a></li>
<li>è§£é”Babelæ ¸å¿ƒåŠŸèƒ½ï¼šä»è½¬ä¹‰è¯­æ³•åˆ°æ’ä»¶å¼€å‘<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fjzplp.github.io%2F2025%2Fbabel-intro.html" target="_blank" title="https://jzplp.github.io/2025/babel-intro.html" ref="nofollow noopener noreferrer">jzplp.github.io/2025/babel-â€¦</a></li>
<li>@babel/preset-env æ–‡æ¡£<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fbabeljs.io%2Fdocs%2Fbabel-preset-env" target="_blank" title="https://babeljs.io/docs/babel-preset-env" ref="nofollow noopener noreferrer">babeljs.io/docs/babel-â€¦</a></li>
<li>@babel/polyfill æ–‡æ¡£<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fbabeljs.io%2Fdocs%2Fbabel-polyfill" target="_blank" title="https://babeljs.io/docs/babel-polyfill" ref="nofollow noopener noreferrer">babeljs.io/docs/babel-â€¦</a></li>
<li>@babel/runtime æ–‡æ¡£<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fbabeljs.io%2Fdocs%2Fbabel-runtime" target="_blank" title="https://babeljs.io/docs/babel-runtime" ref="nofollow noopener noreferrer">babeljs.io/docs/babel-â€¦</a></li>
<li>Github regenerator-runtime<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffacebook%2Fregenerator%2Ftree%2Fmain%2Fpackages%2Fruntime" target="_blank" title="https://github.com/facebook/regenerator/tree/main/packages/runtime" ref="nofollow noopener noreferrer">github.com/facebook/reâ€¦</a></li>
<li>Github core-js-compat<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzloirock%2Fcore-js%2Fblob%2Fmaster%2Fpackages%2Fcore-js-compat" target="_blank" title="https://github.com/zloirock/core-js/blob/master/packages/core-js-compat" ref="nofollow noopener noreferrer">github.com/zloirock/coâ€¦</a></li>
<li>Github core-js-builder<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzloirock%2Fcore-js%2Ftree%2Fmaster%2Fpackages%2Fcore-js-builder" target="_blank" title="https://github.com/zloirock/core-js/tree/master/packages/core-js-builder" ref="nofollow noopener noreferrer">github.com/zloirock/coâ€¦</a></li>
<li>So, what's next?<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzloirock%2Fcore-js%2Fblob%2Fmaster%2Fdocs%2F2023-02-14-so-whats-next.md" target="_blank" title="https://github.com/zloirock/core-js/blob/master/docs/2023-02-14-so-whats-next.md" ref="nofollow noopener noreferrer">github.com/zloirock/coâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸‡å­—é•¿æ–‡ï¼ææ‡‚å¼ºåŒ–å­¦ä¹ çš„åŸºç¡€çŸ¥è¯†ï¼]]></title>    <link>https://juejin.cn/post/7597058147750150154</link>    <guid>https://juejin.cn/post/7597058147750150154</guid>    <pubDate>2026-01-20T16:00:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597058147750150154" data-draft-id="7597058147750117386" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸‡å­—é•¿æ–‡ï¼ææ‡‚å¼ºåŒ–å­¦ä¹ çš„åŸºç¡€çŸ¥è¯†ï¼"/> <meta itemprop="keywords" content="é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-20T16:00:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aicoting"/> <meta itemprop="url" content="https://juejin.cn/user/933911964427818"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸‡å­—é•¿æ–‡ï¼ææ‡‚å¼ºåŒ–å­¦ä¹ çš„åŸºç¡€çŸ¥è¯†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/933911964427818/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aicoting
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T16:00:15.000Z" title="Tue Jan 20 2026 16:00:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ¨èç›´æ¥ç½‘ç«™åœ¨çº¿é˜…è¯»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Faicoting.cn%2F" target="_blank" title="https://aicoting.cn/" ref="nofollow noopener noreferrer">aicoting.cn</a></p>
<h3 data-id="heading-0">å¼ºåŒ–å­¦ä¹ æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>å¼ºåŒ–å­¦ä¹ ï¼ˆReinforcement Learning, RLï¼‰æ˜¯ä¸€ç±»é€šè¿‡ä¸ç¯å¢ƒäº¤äº’æ¥å­¦ä¹ æœ€ä¼˜å†³ç­–ç­–ç•¥çš„æœºå™¨å­¦ä¹ æ–¹æ³•ã€‚ä¸ç›‘ç£å­¦ä¹ ä¸åŒï¼Œå¼ºåŒ–å­¦ä¹ æ²¡æœ‰ç›´æ¥æä¾›çš„â€œæ­£ç¡®ç­”æ¡ˆâ€ï¼Œè€Œæ˜¯é€šè¿‡å¥–åŠ±ä¿¡å·ï¼ˆrewardï¼‰æ¥è¯„ä¼°è¡Œä¸ºçš„å¥½åã€‚æ™ºèƒ½ä½“ï¼ˆagentï¼‰åœ¨ç¯å¢ƒï¼ˆenvironmentï¼‰ä¸­æ‰§è¡ŒåŠ¨ä½œï¼ˆactionï¼‰ï¼Œæ ¹æ®ç¯å¢ƒåé¦ˆè·å¾—å¥–åŠ±ï¼Œå¹¶è§‚å¯ŸçŠ¶æ€ï¼ˆstateï¼‰å˜åŒ–ã€‚</p>
<p>å¼ºåŒ–å­¦ä¹ çš„ç›®æ ‡æ˜¯å­¦ä¹ ä¸€ä¸ªç­–ç•¥ï¼Œä½¿å¾—æ™ºèƒ½ä½“åœ¨é•¿æœŸäº¤äº’ä¸­è·å¾—ç´¯è®¡å¥–åŠ±æœ€å¤§åŒ–ã€‚å…¸å‹æ–¹æ³•åŒ…æ‹¬åŸºäºå€¼å‡½æ•°çš„ç­–ç•¥ï¼ˆå¦‚ Q-learningã€SARSAï¼‰ã€åŸºäºç­–ç•¥ä¼˜åŒ–çš„æ–¹æ³•ï¼ˆå¦‚ Policy Gradientï¼‰ã€ä»¥åŠç»“åˆæ·±åº¦ç¥ç»ç½‘ç»œçš„æ·±åº¦å¼ºåŒ–å­¦ä¹ ï¼ˆDeep RLï¼‰ã€‚å¦‚ä»Šï¼Œå¼ºåŒ–å­¦ä¹ å·²ç»åœ¨æœºå™¨äººæ§åˆ¶ã€æ¸¸æˆæ™ºèƒ½ã€èµ„æºè°ƒåº¦å’Œè‡ªåŠ¨é©¾é©¶ç­‰é¢†åŸŸé€æ­¥é“ºå¼€ã€‚</p>
<h3 data-id="heading-1">é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹</h3>
<p>é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼ˆMDPï¼‰æ˜¯å¼ºåŒ–å­¦ä¹ å’Œå†³ç­–ç†è®ºä¸­çš„æ ¸å¿ƒæ•°å­¦æ¡†æ¶ï¼Œç”¨äºæè¿°å…·æœ‰éšæœºæ€§å’Œåºåˆ—å†³ç­–ç‰¹å¾çš„ç¯å¢ƒã€‚MDP å‡è®¾ç¯å¢ƒçš„çŠ¶æ€éšæ—¶é—´å˜åŒ–ï¼Œå¹¶ä¸”æœªæ¥çŠ¶æ€çš„è½¬ç§»åªä¾èµ–äºå½“å‰çŠ¶æ€å’Œæ™ºèƒ½ä½“çš„è¡Œä¸ºï¼Œè€Œä¸è¿‡å»çŠ¶æ€æ— å…³ï¼Œè¿™å°±æ˜¯ç»å…¸çš„â€œé©¬å°”å¯å¤«æ€§â€å‡è®¾ã€‚</p>
<p>é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼ˆMDPï¼‰æ˜¯ä¸€ä¸ªå››å…ƒç»„<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>S</mi><mo separator="true">,</mo><mi>A</mi><mo separator="true">,</mo><mi>P</mi><mo separator="true">,</mo><mi>R</mi><mo separator="true">,</mo><mi>Î³</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(S,A,P,R,Î³)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mclose">)</span></span></span></span></span>ï¼Œå…¶ä¸­ï¼š</p>
<ol>
<li>çŠ¶æ€ç©ºé—´ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span></span>ï¼šè¡¨ç¤ºç¯å¢ƒå¯èƒ½å¤„äºçš„æ‰€æœ‰çŠ¶æ€é›†åˆï¼Œæ¯ä¸ªçŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo>âˆˆ</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">sâˆˆS</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"/><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span></span> æè¿°äº†ç¯å¢ƒåœ¨æŸä¸€æ—¶åˆ»çš„æƒ…å†µã€‚</li>
<li>åŠ¨ä½œç©ºé—´ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">A</span></span></span></span></span>ï¼šè¡¨ç¤ºæ™ºèƒ½ä½“åœ¨æ¯ä¸ªçŠ¶æ€ä¸‹å¯é€‰æ‹©çš„æ‰€æœ‰åŠ¨ä½œé›†åˆï¼ŒåŠ¨ä½œå†³å®šæ™ºèƒ½ä½“å¯¹ç¯å¢ƒçš„å¹²é¢„ã€‚</li>
<li>çŠ¶æ€è½¬ç§»æ¦‚ç‡ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>s</mi><mtext>â€²</mtext><mi mathvariant="normal">âˆ£</mi><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(sâ€²|s,a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mord">â€²âˆ£</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span></span>ï¼šæè¿°åœ¨çŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">s</span></span></span></span></span>é‡‡å–åŠ¨ä½œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">a</span></span></span></span></span>åè½¬ç§»åˆ°çŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mtext>â€²</mtext></mrow><annotation encoding="application/x-tex">sâ€²</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5556em;"/><span class="mord mathnormal">s</span><span class="mord">â€²</span></span></span></span></span>çš„æ¦‚ç‡åˆ†å¸ƒï¼Œç”¨äºå»ºæ¨¡ç¯å¢ƒçš„éšæœºæ€§ã€‚</li>
<li>å¥–åŠ±å‡½æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo separator="true">,</mo><mi>s</mi><mtext>â€²</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(s,a,sâ€²)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">s</span><span class="mord">â€²</span><span class="mclose">)</span></span></span></span></span>ï¼šè¡¨ç¤ºæ™ºèƒ½ä½“åœ¨çŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">s</span></span></span></span></span>æ‰§è¡ŒåŠ¨ä½œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">a</span></span></span></span></span>å¹¶è½¬ç§»åˆ°çŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mtext>â€²</mtext></mrow><annotation encoding="application/x-tex">sâ€²</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5556em;"/><span class="mord mathnormal">s</span><span class="mord">â€²</span></span></span></span></span>æ—¶è·å¾—çš„å³æ—¶åé¦ˆï¼ŒæŒ‡å¯¼æ™ºèƒ½ä½“é€‰æ‹©æ›´ä¼˜ç­–ç•¥ã€‚</li>
<li>æŠ˜æ‰£å› å­ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î³</mi><mo>âˆˆ</mo><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">Î³âˆˆ[0,1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">1</span><span class="mclose">]</span></span></span></span></span>ï¼šç”¨äºè®¡ç®—ç´¯è®¡å¥–åŠ±çš„æŠ˜æ‰£ï¼Œä½¿å¾—æ™ºèƒ½ä½“åœ¨åšå†³ç­–æ—¶å¹³è¡¡çŸ­æœŸå¥–åŠ±å’Œé•¿æœŸæ”¶ç›Šã€‚</li>
</ol>
<p>MDP çš„æ ¸å¿ƒé—®é¢˜æ˜¯æ‰¾åˆ°ä¸€ä¸ªæœ€ä¼˜ç­–ç•¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Ï€</mi><mo>âˆ—</mo></msup></mrow><annotation encoding="application/x-tex">\pi^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6887em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span></span></span></span></span>ï¼Œä½¿æ™ºèƒ½ä½“åœ¨ç¯å¢ƒä¸­é‡‡å–ç­–ç•¥åè·å¾—çš„ æœŸæœ›ç´¯è®¡å¥–åŠ±æœ€å¤§åŒ–ã€‚ç­–ç•¥<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï€</mi><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex"> Ï€(s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span>å®šä¹‰äº†åœ¨æ¯ä¸ªçŠ¶æ€ä¸‹é€‰æ‹©åŠ¨ä½œçš„è§„åˆ™ã€‚</p>
<p>è§£å†³ MDP çš„å¸¸ç”¨æ–¹æ³•åŒ…æ‹¬ï¼š</p>
<ol>
<li>åŠ¨æ€è§„åˆ’ï¼ˆDynamic Programming, DPï¼‰</li>
</ol>
<p>é€šè¿‡è´å°”æ›¼æ–¹ç¨‹ï¼ˆBellman Equationï¼‰è¿­ä»£æ±‚è§£çŠ¶æ€å€¼å‡½æ•° V(s) æˆ–åŠ¨ä½œå€¼å‡½æ•° Q(s,a)ï¼Œé€æ­¥æ›´æ–°ç­–ç•¥ï¼Œç›´è‡³æ”¶æ•›åˆ°æœ€ä¼˜ç­–ç•¥ã€‚</p>
<ol start="2">
<li>å€¼è¿­ä»£ï¼ˆValue Iterationï¼‰ä¸ç­–ç•¥è¿­ä»£ï¼ˆPolicy Iterationï¼‰</li>
</ol>
<ul>
<li>å€¼è¿­ä»£ç›´æ¥è¿­ä»£æ›´æ–°å€¼å‡½æ•°ï¼Œæœ€ç»ˆæ ¹æ®å€¼å‡½æ•°å¯¼å‡ºæœ€ä¼˜ç­–ç•¥ã€‚</li>
<li>ç­–ç•¥è¿­ä»£äº¤æ›¿è¿›è¡Œç­–ç•¥è¯„ä¼°å’Œç­–ç•¥æ”¹è¿›ï¼Œç›´åˆ°ç­–ç•¥ä¸å†æ”¹å˜ï¼Œå¾—åˆ°æœ€ä¼˜ç­–ç•¥ã€‚</li>
</ul>
<ol start="3">
<li>å¼ºåŒ–å­¦ä¹ æ–¹æ³•</li>
</ol>
<p>å½“ç¯å¢ƒçš„çŠ¶æ€è½¬ç§»æ¦‚ç‡å’Œå¥–åŠ±å‡½æ•°æœªçŸ¥æ—¶ï¼Œå¯é€šè¿‡äº¤äº’å¼å­¦ä¹ æ–¹æ³•ï¼ˆå¦‚ Q-learningã€SARSAï¼‰ä¼°è®¡å€¼å‡½æ•°ï¼Œé€æ­¥é€¼è¿‘æœ€ä¼˜ç­–ç•¥ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä»£ç æ¼”ç¤ºå¦‚ä½•åœ¨ä¸€ä¸ªå°å‹ MDP ä¸Šä½¿ç”¨ å€¼è¿­ä»£ï¼ˆValue Iterationï¼‰ æ±‚è§£æœ€ä¼˜ç­–ç•¥ï¼Œä¸ºäº†ç›´è§‚å±•ç¤ºï¼Œæˆ‘ç”¨ä¸€ä¸ªç®€å•çš„ç½‘æ ¼ä¸–ç•Œï¼ˆGrid Worldï¼‰ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import numpy as np
import matplotlib.pyplot as plt

<span class="hljs-comment"># 1. ç½‘æ ¼ä¸–ç•Œå‚æ•°</span>
n_rows, <span class="hljs-attr">n_cols</span> = <span class="hljs-number">4</span>, <span class="hljs-number">4</span>
<span class="hljs-attr">n_states</span> = n_rows * n_cols
<span class="hljs-attr">n_actions</span> = <span class="hljs-number">4</span>  <span class="hljs-comment"># ä¸Š,ä¸‹,å·¦,å³</span>

<span class="hljs-attr">action_offsets</span> = [(-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>),(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>),(<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>),(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)]
<span class="hljs-attr">action_symbols</span> = [<span class="hljs-string">'â†‘'</span>,<span class="hljs-string">'â†“'</span>,<span class="hljs-string">'â†'</span>,<span class="hljs-string">'â†’'</span>]

<span class="hljs-attr">start_state</span> = <span class="hljs-number">0</span>       <span class="hljs-comment"># å·¦ä¸Šè§’ S</span>
<span class="hljs-attr">terminal_state</span> = n_states - <span class="hljs-number">1</span>  <span class="hljs-comment"># å³ä¸‹è§’ T</span>
<span class="hljs-attr">reward_step</span> = -<span class="hljs-number">1</span>
<span class="hljs-attr">reward_terminal</span> = <span class="hljs-number">0</span>

<span class="hljs-comment"># çŠ¶æ€è½¬ç§»å‡½æ•°</span>
def next_state_reward(s, a):
    row, <span class="hljs-attr">col</span> = divmod(s, n_cols)
    if <span class="hljs-attr">s</span> == terminal_state:
        return s, reward_terminal
    dr, <span class="hljs-attr">dc</span> = action_<span class="hljs-literal">off</span>sets[a]
    <span class="hljs-attr">new_row</span> = min(max(row+dr,<span class="hljs-number">0</span>), n_rows-<span class="hljs-number">1</span>)
    <span class="hljs-attr">new_col</span> = min(max(col+dc,<span class="hljs-number">0</span>), n_cols-<span class="hljs-number">1</span>)
    <span class="hljs-attr">s_next</span> = new_row * n_cols + new_col
    return s_next, reward_step

<span class="hljs-comment"># 2. å€¼è¿­ä»£</span>
<span class="hljs-attr">gamma</span> = <span class="hljs-number">0.9</span>
<span class="hljs-attr">theta</span> = <span class="hljs-number">1</span>e-<span class="hljs-number">4</span>
<span class="hljs-attr">V</span> = np.zeros(n_states)

while True:
    <span class="hljs-attr">delta</span> = <span class="hljs-number">0</span>
    for s in range(n_states):
        if <span class="hljs-attr">s</span> == terminal_state:
            continue
        <span class="hljs-attr">v</span> = V[s]
        V<span class="hljs-section">[s]</span> = max(<span class="hljs-section">[next_state_reward(s,a)[1]</span> + gamma*V<span class="hljs-section">[next_state_reward(s,a)[0]]</span> for a in range(n_actions)])
        <span class="hljs-attr">delta</span> = max(delta, abs(v-V[s]))
    if delta &lt; theta:
        break

<span class="hljs-comment"># 3. æ±‚æœ€ä¼˜ç­–ç•¥</span>
<span class="hljs-attr">policy</span> = np.full(n_states,<span class="hljs-string">''</span>,dtype=object)
for s in range(n_states):
    if <span class="hljs-attr">s</span> == start_state:
        policy<span class="hljs-section">[s]</span> = 'S'
    elif <span class="hljs-attr">s</span> == terminal_state:
        policy<span class="hljs-section">[s]</span> = 'T'
    else:
        <span class="hljs-attr">q_values</span> = [next_state_reward(s,a)[<span class="hljs-number">1</span>] + gamma*V[next_state_reward(s,a)[<span class="hljs-number">0</span>]] for a in range(n_actions)]
        policy<span class="hljs-section">[s]</span> = action_symbols<span class="hljs-section">[np.argmax(q_values)]</span>

<span class="hljs-attr">grid_policy</span> = policy.reshape(n_rows, n_cols)
print("æœ€ä¼˜ç­–ç•¥ï¼š")
print(grid_policy)

<span class="hljs-comment"># 4. å¯è§†åŒ–å€¼å‡½æ•°å’Œç­–ç•¥</span>
plt.figure(<span class="hljs-attr">figsize</span>=(<span class="hljs-number">6</span>,<span class="hljs-number">6</span>))
plt.imshow(V.reshape(n_rows, n_cols), <span class="hljs-attr">cmap</span>=<span class="hljs-string">'cool'</span>, interpolation=<span class="hljs-string">'nearest'</span>)
for i in range(n_rows):
    for j in range(n_cols):
        plt.text(j,i,f"{V<span class="hljs-section">[i*n_cols+j]</span>:.1f}\n{grid_policy<span class="hljs-section">[i,j]</span>}",<span class="hljs-attr">ha</span>=<span class="hljs-string">'center'</span>,va=<span class="hljs-string">'center'</span>,color=<span class="hljs-string">'black'</span>)
plt.title("Grid World: State Values and Optimal Policy")
plt.colorbar(<span class="hljs-attr">label</span>=<span class="hljs-string">"Value"</span>)
plt.show()
</code></pre>
<p>è¿è¡Œç»“æœå¦‚ä¸‹å›¾ï¼Œå…¶ä¸­è¾“å‡ºç½‘æ ¼ä¸­æ¯ä¸ªçŠ¶æ€å¯¹åº”çš„æœ€ä¼˜åŠ¨ä½œï¼ˆâ†‘â†“â†â†’ï¼‰ï¼Œç»ˆç‚¹ç”¨ T æ ‡è®°ã€‚é¢œè‰²è¶Šæ·±è¡¨ç¤ºçŠ¶æ€ä»·å€¼è¶Šé«˜ï¼Œå›¾ä¸ŠåŒæ—¶æ ‡å‡ºæœ€ä¼˜ç­–ç•¥ï¼Œå¯ä»¥ç›´è§‚çœ‹åˆ°æ™ºèƒ½ä½“å¦‚ä½•ä»å·¦ä¸Šè§’èµ°å‘å³ä¸‹è§’ç»ˆç‚¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ef8804690d849acbce83460ab7310b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769529615&amp;x-signature=TjYy9nXiry42OCg4hAwRBa43Ajo%3D" alt="" loading="lazy"/></p>
<p>MDP åœ¨å¼ºåŒ–å­¦ä¹ å’Œå†³ç­–é—®é¢˜ä¸­åº”ç”¨å¹¿æ³›ã€‚ä¾‹å¦‚ï¼Œæœºå™¨äººæ§åˆ¶ä»»åŠ¡ä¸­ï¼ŒçŠ¶æ€è¡¨ç¤ºæœºå™¨äººçš„ä½ç½®å’Œå§¿æ€ï¼ŒåŠ¨ä½œè¡¨ç¤ºå¯æ‰§è¡Œçš„æ§åˆ¶å‘½ä»¤ï¼›åœ¨èµ„æºè°ƒåº¦é—®é¢˜ä¸­ï¼ŒçŠ¶æ€è¡¨ç¤ºç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µï¼ŒåŠ¨ä½œè¡¨ç¤ºä»»åŠ¡åˆ†é…ç­–ç•¥ï¼›åœ¨æ¸¸æˆ AI ä¸­ï¼ŒçŠ¶æ€è¡¨ç¤ºæ¸¸æˆæ£‹ç›˜æˆ–åœºæ™¯ä¿¡æ¯ï¼ŒåŠ¨ä½œè¡¨ç¤ºç©å®¶å¯èƒ½é‡‡å–çš„æ“ä½œã€‚é€šè¿‡å°†è¿™äº›é—®é¢˜å»ºæ¨¡ä¸º MDPï¼Œå¯ä»¥ç³»ç»Ÿæ€§åœ°æ±‚è§£æœ€ä¼˜ç­–ç•¥ï¼Œå®ç°æ™ºèƒ½ä½“è‡ªä¸»å†³ç­–å’Œé•¿æœŸæ”¶ç›Šæœ€å¤§åŒ–ã€‚</p>
<p>é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹æä¾›äº†ä¸€ä¸ªç»“æ„åŒ–çš„æ•°å­¦æ¡†æ¶ï¼Œå°†åºåˆ—å†³ç­–é—®é¢˜å½¢å¼åŒ–ä¸ºçŠ¶æ€ã€åŠ¨ä½œã€å¥–åŠ±å’Œè½¬ç§»æ¦‚ç‡çš„ç»„åˆã€‚é€šè¿‡åŠ¨æ€è§„åˆ’ã€å€¼è¿­ä»£ã€ç­–ç•¥è¿­ä»£ä»¥åŠå¼ºåŒ–å­¦ä¹ æ–¹æ³•ï¼ŒMDP å¯ä»¥å¸®åŠ©æ™ºèƒ½ä½“åœ¨ä¸ç¡®å®šç¯å¢ƒä¸­å­¦ä¹ æœ€ä¼˜ç­–ç•¥ã€‚ä½œä¸ºå¼ºåŒ–å­¦ä¹ çš„ç†è®ºåŸºç¡€ï¼ŒMDP ä¸ä»…åœ¨å­¦æœ¯ç ”ç©¶ä¸­å…·æœ‰é‡è¦æ„ä¹‰ï¼Œä¹Ÿåœ¨æœºå™¨äººã€æ¸¸æˆã€è°ƒåº¦å’Œè‡ªåŠ¨é©¾é©¶ç­‰å®é™…åº”ç”¨ä¸­å±•ç°å‡ºå¼ºå¤§çš„ä»·å€¼ã€‚</p>
<h3 data-id="heading-2">åŠ¨æ€è§„åˆ’ä¸å€¼è¿­ä»£</h3>
<p>åœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼ŒåŠ¨æ€è§„åˆ’ï¼ˆDynamic Programming, DPï¼‰ æ˜¯æ±‚è§£å†³ç­–é—®é¢˜çš„ä¸€ç§ç»å…¸æ–¹æ³•ï¼Œå®ƒå‡è®¾ç¯å¢ƒçš„çŠ¶æ€è½¬ç§»æ¦‚ç‡å’Œå¥–åŠ±å‡½æ•°å·²çŸ¥ï¼Œé€šè¿‡ç³»ç»Ÿåœ°åˆ†è§£é—®é¢˜ã€åˆ©ç”¨æœ€ä¼˜å­ç»“æ„ç‰¹æ€§æ±‚è§£æœ€ä¼˜ç­–ç•¥ã€‚</p>
<p>å€¼è¿­ä»£ï¼ˆValue Iterationï¼‰æ˜¯åŠ¨æ€è§„åˆ’ä¸­æœ€å¸¸ç”¨çš„ä¸€ç§ç®—æ³•ï¼Œèƒ½å¤Ÿé«˜æ•ˆåœ°è®¡ç®—é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼ˆMDPï¼‰ä¸­çš„æœ€ä¼˜çŠ¶æ€ä»·å€¼å‡½æ•°ï¼Œä»è€Œå¯¼å‡ºæœ€ä¼˜ç­–ç•¥ã€‚</p>
<p>åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒæ€æƒ³æ˜¯ å°†å¤æ‚çš„å†³ç­–é—®é¢˜æ‹†è§£æˆå­é—®é¢˜ï¼Œå¹¶é€šè¿‡å·²è§£å†³çš„å­é—®é¢˜ç»“æœæ¥æ±‚è§£æ•´ä½“é—®é¢˜ã€‚å¯¹äºå¼ºåŒ–å­¦ä¹ ä¸­çš„ MDPï¼ˆMarkov Decision Processï¼‰ï¼ŒåŠ¨æ€è§„åˆ’çš„ç›®æ ‡æ˜¯è®¡ç®—æ¯ä¸ªçŠ¶æ€çš„æœ€ä¼˜ä»·å€¼å‡½æ•°<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>V</mi><mo>âˆ—</mo></msup><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">V^*(s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span>ã€‚</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>V</mi><mo>âˆ—</mo></msup><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mrow><mi>max</mi><mo>â¡</mo></mrow><mi>a</mi></msub><msub><mo>âˆ‘</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></msub><mi>P</mi><mo stretchy="false">(</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mi mathvariant="normal">âˆ£</mi><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo fence="false" stretchy="true" minsize="1.2em" maxsize="1.2em">[</mo><mi>R</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo separator="true">,</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo stretchy="false">)</mo><mo>+</mo><mi>Î³</mi><msup><mi>V</mi><mo>âˆ—</mo></msup><mo stretchy="false">(</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo stretchy="false">)</mo><mo fence="false" stretchy="true" minsize="1.2em" maxsize="1.2em">]</mo></mrow><annotation encoding="application/x-tex">V^*(s) = \max_a \sum_{s'} P(s'|s,a) \big[ R(s,a,s') + \gamma V^*(s') \big]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.2em;vertical-align:-0.35em;"/><span class="mop"><span class="mop">max</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1783em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mord"><span class="delimsizing size1">[</span></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.2em;vertical-align:-0.35em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="delimsizing size1">]</span></span></span></span></span></span></p>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">s</span></span></span></span></span>è¡¨ç¤ºå½“å‰çŠ¶æ€</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">a</span></span></span></span></span>è¡¨ç¤ºåŠ¨ä½œ</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mtext>â€²</mtext></mrow><annotation encoding="application/x-tex">sâ€²</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5556em;"/><span class="mord mathnormal">s</span><span class="mord">â€²</span></span></span></span></span>è¡¨ç¤ºä¸‹ä¸€çŠ¶æ€</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>s</mi><mtext>â€²</mtext><mo>âˆ£</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(sâ€²âˆ£s,a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mord">â€²</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ£</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span></span>ä¸ºçŠ¶æ€è½¬ç§»æ¦‚ç‡</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo separator="true">,</mo><mi>s</mi><mtext>â€²</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(s,a,sâ€²)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">s</span><span class="mord">â€²</span><span class="mclose">)</span></span></span></span></span>ä¸ºå¥–åŠ±å‡½æ•°</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î³</mi></mrow><annotation encoding="application/x-tex">Î³</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span></span></span></span></span>ä¸ºæŠ˜æ‰£å› å­ï¼Œæ§åˆ¶æœªæ¥å¥–åŠ±çš„é‡è¦æ€§</li>
</ul>
<p>ä¸€æ—¦æ±‚å¾—æœ€ä¼˜çŠ¶æ€ä»·å€¼å‡½æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>V</mi><mo>âˆ—</mo></msup><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">V^*(s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span>ï¼Œæœ€ä¼˜ç­–ç•¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Ï€</mi><mo>âˆ—</mo></msup><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Ï€^âˆ—(s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span>å¯ä»¥é€šè¿‡é€‰æ‹©åœ¨å½“å‰çŠ¶æ€ä¸‹èƒ½è·å¾—æœ€å¤§æœŸæœ›æ”¶ç›Šçš„åŠ¨ä½œå¾—åˆ°ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Ï€</mi><mo>âˆ—</mo></msup><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo><mo>=</mo><mi>arg</mi><mo>â¡</mo><msub><mrow><mi>max</mi><mo>â¡</mo></mrow><mi>a</mi></msub><msub><mo>âˆ‘</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></msub><mi>P</mi><mo stretchy="false">(</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mi mathvariant="normal">âˆ£</mi><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo fence="false" stretchy="true" minsize="1.2em" maxsize="1.2em">[</mo><mi>R</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo separator="true">,</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo stretchy="false">)</mo><mo>+</mo><mi>Î³</mi><msup><mi>V</mi><mo>âˆ—</mo></msup><mo stretchy="false">(</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo stretchy="false">)</mo><mo fence="false" stretchy="true" minsize="1.2em" maxsize="1.2em">]</mo></mrow><annotation encoding="application/x-tex">\pi^*(s) = \arg\max_a \sum_{s'} P(s'|s,a) \big[ R(s,a,s') + \gamma V^*(s') \big]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.2em;vertical-align:-0.35em;"/><span class="mop">ar<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop"><span class="mop">max</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1783em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mord"><span class="delimsizing size1">[</span></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.2em;vertical-align:-0.35em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="delimsizing size1">]</span></span></span></span></span></span></p>
<p>å€¼è¿­ä»£ï¼ˆValue Iterationï¼‰ æ˜¯ä¸€ç§åŸºäºåŠ¨æ€è§„åˆ’çš„è¿­ä»£æ–¹æ³•ï¼Œç”¨äºæ±‚è§£ MDP çš„æœ€ä¼˜çŠ¶æ€ä»·å€¼å‡½æ•°å’Œç­–ç•¥ã€‚å®ƒçš„ä¸»è¦æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>åˆå§‹åŒ–ï¼šå°†æ¯ä¸ªçŠ¶æ€çš„ä»·å€¼å‡½æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">V(s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span>åˆå§‹åŒ–ä¸º 0 æˆ–ä»»æ„å€¼ã€‚</li>
<li>è¿­ä»£æ›´æ–°ï¼šå¯¹äºæ¯ä¸ªçŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">s</span></span></span></span></span>ï¼Œæ›´æ–°å…¶ä»·å€¼ï¼š <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo><mo>â†</mo><msub><mrow><mi>max</mi><mo>â¡</mo></mrow><mi>a</mi></msub><msub><mo>âˆ‘</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></msub><mi>P</mi><mo stretchy="false">(</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mi mathvariant="normal">âˆ£</mi><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo fence="false" stretchy="true" minsize="1.2em" maxsize="1.2em">[</mo><mi>R</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo separator="true">,</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo stretchy="false">)</mo><mo>+</mo><mi>Î³</mi><mi>V</mi><mo stretchy="false">(</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo stretchy="false">)</mo><mo fence="false" stretchy="true" minsize="1.2em" maxsize="1.2em">]</mo></mrow><annotation encoding="application/x-tex">V(s) \leftarrow \max_a \sum_{s'} P(s'|s,a) \big[ R(s,a,s') + \gamma V(s') \big]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.2em;vertical-align:-0.35em;"/><span class="mop"><span class="mop">max</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1783em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mord"><span class="delimsizing size1">[</span></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.2em;vertical-align:-0.35em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">Î³V</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="delimsizing size1">]</span></span></span></span></span></span></li>
<li>æ”¶æ•›åˆ¤å®šï¼šå½“æ‰€æœ‰çŠ¶æ€ä»·å€¼æ›´æ–°å˜åŒ–é‡ Î”å°äºé˜ˆå€¼ Î¸æ—¶ï¼Œè¿­ä»£åœæ­¢ã€‚</li>
<li>å¯¼å‡ºæœ€ä¼˜ç­–ç•¥ï¼šæ ¹æ®æ”¶æ•›åçš„ä»·å€¼å‡½æ•°ï¼Œé€‰æ‹©ä½¿æœŸæœ›æ”¶ç›Šæœ€å¤§çš„åŠ¨ä½œä½œä¸ºæœ€ä¼˜ç­–ç•¥ã€‚</li>
</ol>
<p>ç›¸æ¯”ç­–ç•¥è¿­ä»£ï¼Œå€¼è¿­ä»£æ¯ä¸€æ­¥åªæ›´æ–°ä»·å€¼å‡½æ•°ï¼Œä¸éœ€è¦æ˜¾å¼åœ°ä¿å­˜å’Œæ›´æ–°ç­–ç•¥ï¼Œå› æ­¤å®ç°æ›´ç®€å•ä¸”è®¡ç®—æ•ˆç‡é«˜ã€‚</p>
<p>ä¸‹é¢é€šè¿‡ä¸€ä¸ª 4Ã—4 ç½‘æ ¼ä¸–ç•Œç¤ºä¾‹å±•ç¤ºå€¼è¿­ä»£çš„å®ç°ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import numpy as np
import matplotlib.pyplot as plt

<span class="hljs-comment"># ç½‘æ ¼ä¸–ç•Œå‚æ•°</span>
n_rows, <span class="hljs-attr">n_cols</span> = <span class="hljs-number">4</span>, <span class="hljs-number">4</span>
<span class="hljs-attr">n_states</span> = n_rows * n_cols
<span class="hljs-attr">n_actions</span> = <span class="hljs-number">4</span>  <span class="hljs-comment"># ä¸Š,ä¸‹,å·¦,å³</span>
<span class="hljs-attr">action_offsets</span> = [(-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>),(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>),(<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>),(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)]
<span class="hljs-attr">action_symbols</span> = [<span class="hljs-string">'â†‘'</span>,<span class="hljs-string">'â†“'</span>,<span class="hljs-string">'â†'</span>,<span class="hljs-string">'â†’'</span>]

<span class="hljs-attr">start_state</span> = <span class="hljs-number">0</span>
<span class="hljs-attr">terminal_state</span> = n_states-<span class="hljs-number">1</span>
<span class="hljs-attr">reward_step</span> = -<span class="hljs-number">1</span>
<span class="hljs-attr">reward_terminal</span> = <span class="hljs-number">0</span>
<span class="hljs-attr">gamma</span> = <span class="hljs-number">0.9</span>
<span class="hljs-attr">theta</span> = <span class="hljs-number">1</span>e-<span class="hljs-number">4</span>

def next_state_reward(s,a):
    row,<span class="hljs-attr">col</span> = divmod(s,n_cols)
    if <span class="hljs-attr">s</span>==terminal_state:
        return s, reward_terminal
    dr,<span class="hljs-attr">dc</span> = action_<span class="hljs-literal">off</span>sets[a]
    <span class="hljs-attr">new_row</span> = min(max(row+dr,<span class="hljs-number">0</span>),n_rows-<span class="hljs-number">1</span>)
    <span class="hljs-attr">new_col</span> = min(max(col+dc,<span class="hljs-number">0</span>),n_cols-<span class="hljs-number">1</span>)
    <span class="hljs-attr">s_next</span> = new_row*n_cols+new_col
    return s_next, reward_step

<span class="hljs-comment"># å€¼è¿­ä»£</span>
<span class="hljs-attr">V</span> = np.zeros(n_states)
while True:
    <span class="hljs-attr">delta</span> = <span class="hljs-number">0</span>
    for s in range(n_states):
        if <span class="hljs-attr">s</span>==terminal_state:
            continue
        <span class="hljs-attr">v</span> = V[s]
        V<span class="hljs-section">[s]</span> = max(<span class="hljs-section">[next_state_reward(s,a)[1]</span>+gamma*V<span class="hljs-section">[next_state_reward(s,a)[0]]</span> for a in range(n_actions)])
        <span class="hljs-attr">delta</span> = max(delta, abs(v-V[s]))
    if delta&lt;theta:
        break

<span class="hljs-comment"># å¯¼å‡ºæœ€ä¼˜ç­–ç•¥</span>
<span class="hljs-attr">policy</span> = np.full(n_states,<span class="hljs-string">''</span>,dtype=object)
for s in range(n_states):
    if <span class="hljs-attr">s</span>==start_state:
        policy<span class="hljs-section">[s]</span>='S'
    elif <span class="hljs-attr">s</span>==terminal_state:
        policy<span class="hljs-section">[s]</span>='T'
    else:
        <span class="hljs-attr">q_values</span> = [next_state_reward(s,a)[<span class="hljs-number">1</span>]+gamma*V[next_state_reward(s,a)[<span class="hljs-number">0</span>]] for a in range(n_actions)]
        policy<span class="hljs-section">[s]</span>=action_symbols<span class="hljs-section">[np.argmax(q_values)]</span>

<span class="hljs-attr">grid_policy</span> = policy.reshape(n_rows,n_cols)
print("æœ€ä¼˜ç­–ç•¥ï¼š")
print(grid_policy)

<span class="hljs-comment"># å¯è§†åŒ–å€¼å‡½æ•°å’Œç­–ç•¥</span>
plt.figure(<span class="hljs-attr">figsize</span>=(<span class="hljs-number">6</span>,<span class="hljs-number">6</span>))
plt.imshow(V.reshape(n_rows,n_cols), <span class="hljs-attr">cmap</span>=<span class="hljs-string">'cool'</span>, interpolation=<span class="hljs-string">'nearest'</span>)
for i in range(n_rows):
    for j in range(n_cols):
        plt.text(j,i,f"{V<span class="hljs-section">[i*n_cols+j]</span>:.1f}\n{grid_policy<span class="hljs-section">[i,j]</span>}",<span class="hljs-attr">ha</span>=<span class="hljs-string">'center'</span>,va=<span class="hljs-string">'center'</span>,color=<span class="hljs-string">'black'</span>)
plt.title("Grid World: State Values and Optimal Policy")
plt.colorbar(<span class="hljs-attr">label</span>=<span class="hljs-string">"Value"</span>)
plt.show()
</code></pre>
<p>ç»“æœå¦‚ä¸‹ï¼Œå·¦ä¸Šè§’ä¸ºèµ·ç‚¹ Sï¼Œå³ä¸‹è§’ä¸ºç»ˆç‚¹ Tã€‚æ¯ä¸ªæ ¼å­æ˜¾ç¤ºå¯¹åº”çš„æœ€ä¼˜åŠ¨ä½œæ–¹å‘ï¼ˆâ†‘â†“â†â†’ï¼‰ï¼Œæ™ºèƒ½ä½“èƒ½å¤Ÿé¡ºåˆ©ä»èµ·ç‚¹åˆ°è¾¾ç»ˆç‚¹ï¼Œé¢œè‰²è¶Šæ·±è¡¨ç¤ºçŠ¶æ€ä»·å€¼è¶Šé«˜ï¼Œæ˜¾ç¤ºçŠ¶æ€è¶Šæ¥è¿‘ç»ˆç‚¹çš„ç´¯è®¡æ”¶ç›Šè¶Šå¤§ã€‚å€¼è¿­ä»£é€šè¿‡è¿­ä»£æ›´æ–°çŠ¶æ€ä»·å€¼å‡½æ•°ï¼Œæœ€ç»ˆæ”¶æ•›åˆ°æœ€ä¼˜å€¼å‡½æ•°ï¼Œä»è€Œå¯¼å‡ºå…¨å±€æœ€ä¼˜ç­–ç•¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/410cfb5217a4435c84711fb3694312e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769529615&amp;x-signature=iZ8T70ifKZMk%2FixW9Y9gPoKxNFU%3D" alt="" loading="lazy"/></p>
<p>æ€»ç»“ä¸€ä¸‹å°±æ˜¯åŠ¨æ€è§„åˆ’æä¾›äº†æ±‚è§£é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹çš„ä¸€èˆ¬æ¡†æ¶ï¼Œè€Œå€¼è¿­ä»£åˆ™æ˜¯æœ€å¸¸ç”¨çš„å®ç°æ–¹å¼ä¹‹ä¸€ã€‚é€šè¿‡è¿­ä»£æ›´æ–°çŠ¶æ€ä»·å€¼å‡½æ•°ï¼Œå€¼è¿­ä»£èƒ½å¤Ÿé«˜æ•ˆæ±‚å¾—æœ€ä¼˜ç­–ç•¥ã€‚</p>
<h3 data-id="heading-3">Q-learning</h3>
<p>Q-Learning æ˜¯å¼ºåŒ–å­¦ä¹ ä¸­æœ€ç»å…¸çš„åŸºäºå€¼å‡½æ•°çš„æ— æ¨¡å‹æ–¹æ³•ï¼ˆmodel-free methodï¼‰ä¹‹ä¸€ï¼Œç”¨äºæ±‚è§£é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼ˆMDPï¼‰ä¸­çš„æœ€ä¼˜ç­–ç•¥ã€‚å®ƒä¸ä¾èµ–äºå·²çŸ¥çš„ç¯å¢ƒçŠ¶æ€è½¬ç§»æ¦‚ç‡ï¼Œåªéœ€é€šè¿‡æ™ºèƒ½ä½“ä¸ç¯å¢ƒçš„äº¤äº’ç»éªŒå°±èƒ½å­¦ä¹ æœ€ä¼˜ç­–ç•¥ï¼Œå› æ­¤åœ¨å®é™…å¼ºåŒ–å­¦ä¹ ä»»åŠ¡ä¸­åº”ç”¨å¹¿æ³›ã€‚</p>
<p>Q-Learning çš„æ ¸å¿ƒæ˜¯å­¦ä¹ æ¯ä¸ªçŠ¶æ€-åŠ¨ä½œå¯¹çš„ä»·å€¼å‡½æ•°ï¼ˆQ å‡½æ•°ï¼‰ï¼š</p>
<p>åœ¨çŠ¶æ€ä¸‹é€‰æ‹©åŠ¨ä½œçš„æœŸæœ›ç´¯ç§¯å›æŠ¥<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><mtext>åœ¨çŠ¶æ€Â </mtext><mi>s</mi><mtext>ä¸‹é€‰æ‹©åŠ¨ä½œÂ </mtext><mi>a</mi><mtext>çš„æœŸæœ›ç´¯ç§¯å›æŠ¥</mtext></mrow><annotation encoding="application/x-tex">Q(s,a)=åœ¨çŠ¶æ€Â sä¸‹é€‰æ‹©åŠ¨ä½œÂ açš„æœŸæœ›ç´¯ç§¯å›æŠ¥</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">Q</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord cjk_fallback">åœ¨çŠ¶æ€</span><span class="mord">Â </span><span class="mord mathnormal">s</span><span class="mord cjk_fallback">ä¸‹é€‰æ‹©åŠ¨ä½œ</span><span class="mord">Â </span><span class="mord mathnormal">a</span><span class="mord cjk_fallback">çš„æœŸæœ›ç´¯ç§¯å›æŠ¥</span></span></span></span></span></p>
<p>æœ€ä¼˜ Q å‡½æ•°æ»¡è¶³è´å°”æ›¼æœ€ä¼˜æ–¹ç¨‹ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Q</mi><mo>âˆ—</mo></msup><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="double-struck">E</mi><mo fence="false" stretchy="true" minsize="1.2em" maxsize="1.2em">[</mo><msub><mi>R</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>+</mo><mi>Î³</mi><msub><mrow><mi>max</mi><mo>â¡</mo></mrow><msup><mi>a</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></msub><msup><mi>Q</mi><mo>âˆ—</mo></msup><mo stretchy="false">(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msup><mi>a</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo stretchy="false">)</mo><mtext>â€‰</mtext><mi mathvariant="normal">âˆ£</mi><mtext>â€‰</mtext><msub><mi>s</mi><mi>t</mi></msub><mo>=</mo><mi>s</mi><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>=</mo><mi>a</mi><mo fence="false" stretchy="true" minsize="1.2em" maxsize="1.2em">]</mo></mrow><annotation encoding="application/x-tex">Q^*(s,a) = \mathbb{E}\big[ R_{t+1} + \gamma \max_{a'} Q^*(s_{t+1},a') \,|\, s_t=s, a_t=a \big]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.2em;vertical-align:-0.35em;"/><span class="mord mathbb">E</span><span class="mord"><span class="delimsizing size1">[</span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0019em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop"><span class="mop">max</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">âˆ£</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.2em;vertical-align:-0.35em;"/><span class="mord mathnormal">a</span><span class="mord"><span class="delimsizing size1">]</span></span></span></span></span></span></p>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">s</span></span></span></span></span>ä¸ºå½“å‰çŠ¶æ€</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">a</span></span></span></span></span>ä¸ºå½“å‰åŠ¨ä½œ</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mtext>â€²</mtext></mrow><annotation encoding="application/x-tex">sâ€²</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5556em;"/><span class="mord mathnormal">s</span><span class="mord">â€²</span></span></span></span></span>ä¸ºä¸‹ä¸€ä¸ªçŠ¶æ€</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">R_{t+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8917em;vertical-align:-0.2083em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span></span></span></span></span>ä¸ºå³æ—¶å¥–åŠ±</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î³</mi></mrow><annotation encoding="application/x-tex">Î³</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span></span></span></span></span>ä¸ºæŠ˜æ‰£å› å­</li>
</ul>
<p>é€šè¿‡ä¸æ–­æ›´æ–° Q å€¼ï¼ŒQ-Learning èƒ½æ”¶æ•›åˆ°æœ€ä¼˜ Q å‡½æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Q</mi><mo>âˆ—</mo></msup></mrow><annotation encoding="application/x-tex">Q^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8831em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span></span></span></span></span>ï¼Œä»è€Œå¯¼å‡ºæœ€ä¼˜ç­–ç•¥ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Ï€</mi><mo>âˆ—</mo></msup><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo><mo>=</mo><mi>arg</mi><mo>â¡</mo><msub><mrow><mi>max</mi><mo>â¡</mo></mrow><mi>a</mi></msub><msup><mi>Q</mi><mo>âˆ—</mo></msup><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi^*(s) = \arg\max_a Q^*(s,a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mop">ar<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop"><span class="mop">max</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span></span></p>
<p>Q-Learning ç®—æ³•çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>åˆå§‹åŒ–ï¼šå¯¹æ¯ä¸ªçŠ¶æ€-åŠ¨ä½œå¯¹<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Q(s,a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">Q</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span></span>åˆå§‹åŒ–ä¸º 0 æˆ–å°éšæœºæ•°ã€‚</li>
<li>äº¤äº’å­¦ä¹ ï¼šåœ¨æ¯ä¸ªæ—¶é—´æ­¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"/><span class="mord mathnormal">t</span></span></span></span></span>ï¼Œæ™ºèƒ½ä½“ä»çŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">s</span></span></span></span></span> é€‰æ‹©åŠ¨ä½œ aï¼ˆé€šå¸¸é‡‡ç”¨ Ïµ-è´ªå¿ƒç­–ç•¥ï¼‰ã€‚</li>
<li>æ‰§è¡ŒåŠ¨ä½œï¼šæ™ºèƒ½ä½“æ‰§è¡ŒåŠ¨ä½œ aï¼Œè§‚å¯Ÿå¥–åŠ±Rt+1 å’Œä¸‹ä¸€ä¸ªçŠ¶æ€ sâ€™ã€‚</li>
<li>æ›´æ–° Q å€¼ï¼š Q(s,a)â†Q(s,a)+Î±[Rt+1+Î³maxaâ€²Q(sâ€²,aâ€²)âˆ’Q(s,a)]å…¶ä¸­ Î±ä¸ºå­¦ä¹ ç‡ã€‚</li>
<li>è¿­ä»£ç›´åˆ°æ”¶æ•›ï¼šé‡å¤æ­¥éª¤ 2-4ï¼Œç›´è‡³ Q å€¼æ”¶æ•›æˆ–è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°ã€‚</li>
</ol>
<p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ 4Ã—4 ç½‘æ ¼ä¸–ç•Œæ¼”ç¤º Q-Learning å­¦ä¹ æœ€ä¼˜ç­–ç•¥ï¼Œ</p>
<pre><code class="hljs language-ini" lang="ini">import numpy as np
import matplotlib.pyplot as plt

<span class="hljs-comment"># ç½‘æ ¼ä¸–ç•Œå‚æ•°</span>
n_rows, <span class="hljs-attr">n_cols</span> = <span class="hljs-number">4</span>, <span class="hljs-number">4</span>
<span class="hljs-attr">n_states</span> = n_rows * n_cols
<span class="hljs-attr">n_actions</span> = <span class="hljs-number">4</span>  <span class="hljs-comment"># ä¸Š,ä¸‹,å·¦,å³</span>
<span class="hljs-attr">action_offsets</span> = [(-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>),(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>),(<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>),(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)]
<span class="hljs-attr">action_symbols</span> = [<span class="hljs-string">'â†‘'</span>,<span class="hljs-string">'â†“'</span>,<span class="hljs-string">'â†'</span>,<span class="hljs-string">'â†’'</span>]

<span class="hljs-attr">start_state</span> = <span class="hljs-number">0</span>
<span class="hljs-attr">terminal_state</span> = n_states-<span class="hljs-number">1</span>
<span class="hljs-attr">reward_step</span> = -<span class="hljs-number">1</span>
<span class="hljs-attr">reward_terminal</span> = <span class="hljs-number">0</span>

<span class="hljs-attr">gamma</span> = <span class="hljs-number">0.9</span>
<span class="hljs-attr">alpha</span> = <span class="hljs-number">0.1</span>
<span class="hljs-attr">epsilon</span> = <span class="hljs-number">0.1</span>
<span class="hljs-attr">n_episodes</span> = <span class="hljs-number">5000</span>

<span class="hljs-comment"># çŠ¶æ€è½¬ç§»</span>
def next_state_reward(s,a):
    row,<span class="hljs-attr">col</span> = divmod(s,n_cols)
    if <span class="hljs-attr">s</span>==terminal_state:
        return s,reward_terminal
    dr,<span class="hljs-attr">dc</span> = action_<span class="hljs-literal">off</span>sets[a]
    <span class="hljs-attr">new_row</span> = min(max(row+dr,<span class="hljs-number">0</span>),n_rows-<span class="hljs-number">1</span>)
    <span class="hljs-attr">new_col</span> = min(max(col+dc,<span class="hljs-number">0</span>),n_cols-<span class="hljs-number">1</span>)
    <span class="hljs-attr">s_next</span> = new_row*n_cols+new_col
    return s_next,reward_step

<span class="hljs-comment"># åˆå§‹åŒ– Q è¡¨</span>
<span class="hljs-attr">Q</span> = np.zeros((n_states,n_actions))

<span class="hljs-comment"># Q-Learning ä¸»å¾ªç¯</span>
for episode in range(n_episodes):
    <span class="hljs-attr">s</span> = start_state
    while s != terminal_state:
        <span class="hljs-comment"># epsilon-greedy é€‰æ‹©åŠ¨ä½œ</span>
        if np.random.rand() &lt; epsilon:
            <span class="hljs-attr">a</span> = np.random.randint(n_actions)
        else:
            <span class="hljs-attr">a</span> = np.argmax(Q[s])
        s_next, <span class="hljs-attr">r</span> = next_state_reward(s,a)
        Q<span class="hljs-section">[s,a]</span> += alpha*(r + gamma*np.max(Q<span class="hljs-section">[s_next]</span>) - Q<span class="hljs-section">[s]</span>)
        <span class="hljs-attr">s</span> = s_next

<span class="hljs-comment"># å¯¼å‡ºæœ€ä¼˜ç­–ç•¥</span>
<span class="hljs-attr">policy</span> = np.full(n_states,<span class="hljs-string">''</span>,dtype=object)
for s in range(n_states):
    if <span class="hljs-attr">s</span>==start_state:
        policy<span class="hljs-section">[s]</span>='S'
    elif <span class="hljs-attr">s</span>==terminal_state:
        policy<span class="hljs-section">[s]</span>='T'
    else:
        policy<span class="hljs-section">[s]</span> = action_symbols<span class="hljs-section">[np.argmax(Q[s]</span>)]

<span class="hljs-attr">grid_policy</span> = policy.reshape(n_rows,n_cols)
print("æœ€ä¼˜ç­–ç•¥ï¼š")
print(grid_policy)

<span class="hljs-comment"># å¯è§†åŒ–</span>
plt.figure(<span class="hljs-attr">figsize</span>=(<span class="hljs-number">6</span>,<span class="hljs-number">6</span>))
plt.imshow(np.max(Q,<span class="hljs-attr">axis</span>=<span class="hljs-number">1</span>).reshape(n_rows,n_cols), cmap=<span class="hljs-string">'cool'</span>, interpolation=<span class="hljs-string">'nearest'</span>)
for i in range(n_rows):
    for j in range(n_cols):
        plt.text(j,i,f"{grid_policy<span class="hljs-section">[i*n_cols+j]</span>}",<span class="hljs-attr">ha</span>=<span class="hljs-string">'center'</span>,va=<span class="hljs-string">'center'</span>,color=<span class="hljs-string">'black'</span>)
plt.title("Grid World: Optimal Policy via Q-Learning")
plt.colorbar(<span class="hljs-attr">label</span>=<span class="hljs-string">"Max Q-Value"</span>)
plt.show()
</code></pre>
<p>ç»“æœå¦‚ä¸‹å›¾ï¼ŒåŒæ ·ï¼Œèµ·ç‚¹ S åˆ°ç»ˆç‚¹ T çš„è·¯å¾„ç”±ç­–ç•¥æŒ‡ç¤ºï¼Œæ–¹å‘ç®­å¤´æŒ‡æ˜æ™ºèƒ½ä½“åº”è¯¥é‡‡å–çš„åŠ¨ä½œï¼Œé¢œè‰²æ·±è¡¨ç¤ºè¯¥çŠ¶æ€ä¸‹æœ€å¤§ Q å€¼è¾ƒé«˜ï¼Œè¯´æ˜é è¿‘ç»ˆç‚¹æˆ–é€šå¾€ç»ˆç‚¹çš„åŠ¨ä½œæ›´ä¼˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c83f93ead29a4d9b855fedd264ffa756~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769529615&amp;x-signature=hCGl0yc4lLPO%2BIANO%2FPTb4qTUXk%3D" alt="" loading="lazy"/></p>
<p>æ·»åŠ å›¾ç‰‡æ³¨é‡Šï¼Œä¸è¶…è¿‡ 140 å­—ï¼ˆå¯é€‰ï¼‰</p>
<p>ç®€å•æ€»ç»“ä¸€ä¸‹ï¼ŒQ-Learning æ˜¯å¼ºåŒ–å­¦ä¹ ä¸­åŸºç¡€è€Œé‡è¦çš„ç®—æ³•ï¼Œé€šè¿‡ä¸æ–­æ›´æ–°çŠ¶æ€-åŠ¨ä½œä»·å€¼å‡½æ•°ï¼Œæ™ºèƒ½ä½“å¯ä»¥åœ¨æœªçŸ¥ç¯å¢ƒä¸­å­¦ä¹ æœ€ä¼˜ç­–ç•¥ã€‚å…¶ä¼˜ç‚¹æ˜¯æ— æ¨¡å‹ã€ç®€å•æ˜“å®ç°ã€æ”¶æ•›æ€§è‰¯å¥½ï¼Œç¼ºç‚¹æ˜¯çŠ¶æ€ç©ºé—´å’ŒåŠ¨ä½œç©ºé—´è¿‡å¤§æ—¶éœ€è¦é‡‡ç”¨å‡½æ•°é€¼è¿‘ï¼ˆå¦‚æ·±åº¦ Q ç½‘ç»œï¼‰ã€‚</p>
<p>æœ€æ–°çš„æ–‡ç« éƒ½åœ¨å…¬ä¼—å·aicotingæ›´æ–°ï¼Œåˆ«å¿˜è®°å…³æ³¨å“¦ï¼ï¼ï¼</p>
<p>ğŸ“š æ¨èé˜…è¯»</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485782%26idx%3D1%26sn%3D060c8222b47cbf903fbfded1f0421bcf%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485782&amp;idx=1&amp;sn=060c8222b47cbf903fbfded1f0421bcf&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¹‹æ•°æ®é¢„å¤„ç†ç¯‡ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485800%26idx%3D1%26sn%3Da52107c9dc7071d8530a24563861fa46%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485800&amp;idx=1&amp;sn=a52107c9dc7071d8530a24563861fa46&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ç‰¹å¾å·¥ç¨‹ä¸­çš„ç‰¹å¾é€‰æ‹©</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485808%26idx%3D1%26sn%3D2c57081d4b12433f6b8919209e2e52ed%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485808&amp;idx=1&amp;sn=2c57081d4b12433f6b8919209e2e52ed&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¸­çš„ç‰¹å¾æ„é€ </a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485820%26idx%3D1%26sn%3Dadcb41fd14347f2f1431709323fa253f%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485820&amp;idx=1&amp;sn=adcb41fd14347f2f1431709323fa253f&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¹‹ç‰¹å¾é™ç»´</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485941%26idx%3D1%26sn%3Dcb53a98bacd1cfbd3255bbeeab6a24ec%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485941&amp;idx=1&amp;sn=cb53a98bacd1cfbd3255bbeeab6a24ec&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚å±‚æ¬¡èšç±»å’Œå¯†åº¦èšç±»æ–¹æ³•ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485946%26idx%3D1%26sn%3Da5cf50a4a3bda9785fb0c7baae3a6bb2%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485946&amp;idx=1&amp;sn=a5cf50a4a3bda9785fb0c7baae3a6bb2&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚æœºå™¨å­¦ä¹ ä¸­çš„PCAä¸»æˆåˆ†åˆ†æï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485952%26idx%3D1%26sn%3Dffe1fca4cb75b2f99ace92593554837c%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485952&amp;idx=1&amp;sn=ffe1fca4cb75b2f99ace92593554837c&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¸­ç‹¬ç«‹æˆåˆ†åˆ†æICAå’Œä¸»æˆåˆ†åˆ†æPCAæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485960%26idx%3D1%26sn%3D05cf98957ea11dcd6ae165588b4c91c7%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485960&amp;idx=1&amp;sn=05cf98957ea11dcd6ae165588b4c91c7&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚t-SNEå’ŒUMAPé™ç»´æ–¹æ³•ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485972%26idx%3D1%26sn%3De106fcda9b02b7e8a6fb31495bb28dae%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485972&amp;idx=1&amp;sn=e106fcda9b02b7e8a6fb31495bb28dae&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸‡å­—é•¿æ–‡ï¼ææ‡‚æœºå™¨å­¦ä¹ ä¸­çš„æ¦‚ç‡å›¾æ¨¡å‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485986%26idx%3D1%26sn%3D9057c13995012cc7220eae20f6cfb4c2%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485986&amp;idx=1&amp;sn=9057c13995012cc7220eae20f6cfb4c2&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸‡å­—é•¿æ–‡ï¼ææ‡‚æœºå™¨å­¦ä¹ ä¸­åŠç›‘ç£å­¦ä¹ çš„ç»å…¸æ–¹æ³•ï¼</a></p>
<p>ä½œè€…ï¼šaicoting</p>
<p>åˆ†äº«æ˜¯ä¸€ç§ä¿¡ä»°ï¼Œè¿æ¥è®©æˆé•¿æ›´æœ‰æ¸©åº¦ã€‚</p>
<p>æˆ‘ä»¬ä¸‹æ¬¡ä¸è§ä¸æ•£ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flinkæºç é˜…è¯»ï¼šKafka Connector]]></title>    <link>https://juejin.cn/post/7597125475602317339</link>    <guid>https://juejin.cn/post/7597125475602317339</guid>    <pubDate>2026-01-20T14:05:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597125475602317339" data-draft-id="7597125475602300955" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flinkæºç é˜…è¯»ï¼šKafka Connector"/> <meta itemprop="keywords" content="Flink,å¤§æ•°æ®"/> <meta itemprop="datePublished" content="2026-01-20T14:05:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¢å‘Googleç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1063982986695374"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flinkæºç é˜…è¯»ï¼šKafka Connector
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1063982986695374/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¢å‘Googleç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T14:05:03.000Z" title="Tue Jan 20 2026 14:05:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡æˆ‘ä»¬æ¥æ¢³ç† Kafka Connector ç›¸å…³çš„æºç ã€‚</p>
<h3 data-id="heading-0">è‡ªå®šä¹‰ Source å’Œ Sink</h3>
<p>åœ¨ä»‹ç» Kafka Connector ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹åœ¨ Flink ä¸­æ˜¯å¦‚ä½•æ”¯æŒè‡ªå®šä¹‰ Source å’Œ Sink çš„ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€å¼  Flink å®˜æ–¹æ–‡æ¡£æä¾›çš„å›¾ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57a5bc84c82248efa87969d645ce9eec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2i5ZCRR29vZ2xl57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769522703&amp;x-signature=SzbKOFFgntjWtzjgc91KnxTtjkc%3D" alt="table-connector" loading="lazy"/></p>
<p>è¿™å¼ å›¾å±•ç¤ºäº† Connector çš„åŸºæœ¬ä½“ç³»ç»“æ„ï¼Œä¸‰å±‚æ¶æ„ä¹Ÿéå¸¸æ¸…æ™°ã€‚</p>
<h4 data-id="heading-1">Metadata</h4>
<p>é¦–å…ˆæ˜¯æœ€ä¸Šå±‚çš„ MetaDataï¼ŒCREATE TABLE ä¼šæ›´æ–° Catalogï¼Œç„¶åè¢«è½¬æ¢ä¸º TableAPI çš„ CatalogTableï¼ŒCatalogTable å®ä¾‹ç”¨äºè¡¨ç¤ºåŠ¨æ€è¡¨ï¼ˆSource æˆ– Sink è¡¨ï¼‰çš„å…ƒä¿¡æ¯ã€‚</p>
<h4 data-id="heading-2">Planning</h4>
<p>åœ¨è§£æå’Œä¼˜åŒ–ç¨‹åºæ—¶ï¼Œä¼šå°† CatalogTable è½¬æ¢ä¸º DynamicTableSource å’Œ DynamicTableSinkï¼Œåˆ†åˆ«ç”¨äºæŸ¥è¯¢å’Œæ’å…¥æ•°æ®ï¼Œè¿™ä¸¤ä¸ªå®ä¾‹çš„åˆ›å»ºéƒ½éœ€è¦å¯¹åº”çš„å·¥å‚ç±»ï¼Œå·¥å‚ç±»çš„å®Œæ•´è·¯å¾„éœ€è¦æ”¾åˆ°è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">META-INF/services/org.apache.flink.table.factories.Factory
</code></pre>
<p>å¦‚æœæœ‰éœ€è¦çš„è¯ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨è§£æè¿‡ç¨‹ä¸­é…ç½®ç¼–ç å’Œè§£ç æ–¹æ³•ã€‚</p>
<p>åœ¨ Source ç«¯ï¼Œé€šè¿‡ä¸‰ä¸ªæ¥å£æ”¯æŒä¸åŒçš„æŸ¥è¯¢èƒ½åŠ›ã€‚</p>
<ul>
<li>
<p>ScanTableSourceï¼šç”¨äºæ¶ˆè´¹ changelog æµï¼Œæ‰«æçš„æ•°æ®æ”¯æŒ insertã€updataã€delete ä¸‰ç§ç±»å‹ã€‚ScanTableSource è¿˜æ”¯æŒå¾ˆå¤šå…¶ä»–çš„åŠŸèƒ½ï¼Œ éƒ½æ˜¯é€šè¿‡æ¥å£æä¾›çš„ã€‚å…·ä½“å¯ä»¥çœ‹å‚è€ƒè¿™ä¸ªè¿æ¥</p>
<pre><code class="hljs language-bash" lang="bash">https://nightlies.apache.org/flink/flink-docs-release-2.2/docs/dev/table/sourcessinks/<span class="hljs-comment">#source-abilities</span>
</code></pre>
</li>
<li>
<p>LookupTableSourceï¼šLookupTableSource ä¸ä¼šå…¨é‡è¯»å–è¡¨çš„æ•°æ®ï¼Œå®ƒåœ¨éœ€è¦æ—¶ä¼šå‘é€è¯·æ±‚ï¼Œæ‡’åŠ è½½æ•°æ®ã€‚ç›®å‰åªæ”¯æŒ insert-only å˜æ›´æ¨¡å¼ã€‚</p>
</li>
<li>
<p>VectorSearchTableSourceï¼šä½¿ç”¨ä¸€ä¸ªè¾“å…¥å‘é‡æ¥æœç´¢æ•°æ®ï¼Œå¹¶è¿”å›æœ€ç›¸ä¼¼çš„ Top-K è¡Œæ•°æ®ã€‚</p>
</li>
</ul>
<p>åœ¨ Sink ç«¯ï¼Œé€šè¿‡ DynamicTableSink æ¥å®ç°å…·ä½“çš„å†™å…¥é€»è¾‘ï¼Œè¿™é‡Œä¹Ÿæä¾›äº†ä¸€äº›ç”¨äºæ‰©å±•èƒ½åŠ›çš„æ¥å£ã€‚å…·ä½“å‚è€ƒ</p>
<pre><code class="hljs language-bash" lang="bash">https://nightlies.apache.org/flink/flink-docs-release-2.2/docs/dev/table/sourcessinks/<span class="hljs-comment">#sink-abilities</span>
</code></pre>
<h4 data-id="heading-3">Runtime</h4>
<p>é€»è¾‘è§£æå®Œæˆåï¼Œä¼šåˆ° Runtime å±‚ã€‚è¿™é‡Œå°±æ˜¯å®šä¹‰å‡ ä¸ª Providerï¼Œåœ¨ Provider ä¸­å®ç°å’Œè¿æ¥å™¨å…·ä½“çš„äº¤äº’é€»è¾‘ã€‚</p>
<h4 data-id="heading-4">å°ç»“</h4>
<p>å½“æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ Source å’Œ Sink æ—¶ï¼Œå°±å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®ç°ã€‚</p>
<ol>
<li>
<p>å®šä¹‰ Flink SQL çš„ DDLï¼Œéœ€è¦å®šä¹‰ç›¸åº”çš„ Optionsã€‚</p>
</li>
<li>
<p>å®ç° DynamicTableSourceFactory å’Œ DynamicTableSinkFactoryï¼Œå¹¶æŠŠå®ç°ç±»çš„å…·ä½“è·¯å¾„å†™åˆ°é…ç½®æ–‡ä»¶ä¸­ã€‚</p>
</li>
<li>
<p>å®ç° DynamicTableSource å’Œ DynamicTableSinkï¼Œè¿™é‡Œéœ€è¦å¤„ç† SQL å±‚çš„å…ƒæ•°æ®ã€‚</p>
</li>
<li>
<p>æä¾› Providerï¼Œå°†é€»è¾‘å±‚ä¸åº•å±‚ DataStream å…³è”èµ·æ¥ã€‚</p>
</li>
<li>
<p>ç¼–å†™åº•å±‚ç®—å­ï¼Œå®ç° Source å’Œ Sink æ¥å£ã€‚</p>
</li>
</ol>
<h3 data-id="heading-5">Kafka Connector çš„å®ç°</h3>
<p>å¸¦ç€è¿™äº›çŸ¥è¯†ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸‹ Kafka Connector ç›¸å…³çš„æºç ã€‚</p>
<p>Kafka Connector ä»£ç ç›®å‰å·²ç»æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„é¡¹ç›®äº†ã€‚é¡¹ç›®åœ°å€æ˜¯</p>
<pre><code class="hljs language-bash" lang="bash">https://github.com/apache/flink-connector-kafka
</code></pre>
<h4 data-id="heading-6">Factory</h4>
<p>æˆ‘ä»¬é¦–å…ˆæ‰¾åˆ°å®šä¹‰çš„å·¥å‚ç±»</p>
<pre><code class="hljs language-java" lang="java">org.apache.flink.streaming.connectors.kafka.table.KafkaDynamicTableFactory
org.apache.flink.streaming.connectors.kafka.table.UpsertKafkaDynamicTableFactory
</code></pre>
<p>ä»¥ KafkaDynamicTableFactory ä¸ºä¾‹ï¼Œå®ƒåŒæ—¶å®ç°äº† DynamicTableSourceFactory å’Œ DynamicTableSinkFactory ä¸¤ä¸ªæ¥å£ã€‚</p>
<p>KafkaDynamicTableFactory åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44ee5eb786cb48809ce55e6043c3b56e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2i5ZCRR29vZ2xl57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769522703&amp;x-signature=qlEjjkldPHyzq1cTHUvag7yrLg0%3D" alt="KafkaDynamicTableFactory" loading="lazy"/></p>
<ul>
<li>
<p>factoryIdentifierï¼šè¿”å›ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå¯¹åº” Flink SQL ä¸­ connector='xxx' è¿™ä¸ªé…ç½®ã€‚</p>
</li>
<li>
<p>requiredOptionsï¼šå¿…å¡«é…ç½®é›†åˆã€‚</p>
</li>
<li>
<p>optionalOptionsï¼šé€‰å¡«é…ç½®é›†åˆã€‚</p>
</li>
<li>
<p>forwardOptionsï¼šç›´æ¥ä¼ é€’åˆ° Runtime å±‚çš„é…ç½®é›†åˆã€‚</p>
</li>
<li>
<p>createDynamicTableSourceï¼šåˆ›å»º DynamicTableSourceã€‚</p>
</li>
<li>
<p>createDynamicTableSinkï¼šåˆ›å»º DynamicTableSinkã€‚</p>
</li>
</ul>
<h4 data-id="heading-7">Source ç«¯</h4>
<p>å·¥å‚ç±»çš„ createDynamicTableSource æ–¹æ³•åˆ›å»ºäº† DynamicTableSourceï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹åˆ›å»ºçš„é€»è¾‘ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> DynamicTableSource <span class="hljs-title function_">createDynamicTableSource</span><span class="hljs-params">(Context context)</span> {
    <span class="hljs-keyword">final</span> <span class="hljs-type">TableFactoryHelper</span> <span class="hljs-variable">helper</span> <span class="hljs-operator">=</span> FactoryUtil.createTableFactoryHelper(<span class="hljs-built_in">this</span>, context);

    <span class="hljs-keyword">final</span> Optional&lt;DecodingFormat&lt;DeserializationSchema&lt;RowData&gt;&gt;&gt; keyDecodingFormat =
            getKeyDecodingFormat(helper);

    <span class="hljs-keyword">final</span> DecodingFormat&lt;DeserializationSchema&lt;RowData&gt;&gt; valueDecodingFormat =
            getValueDecodingFormat(helper);

    helper.validateExcept(PROPERTIES_PREFIX);

    <span class="hljs-keyword">final</span> <span class="hljs-type">ReadableConfig</span> <span class="hljs-variable">tableOptions</span> <span class="hljs-operator">=</span> helper.getOptions();

    validateTableSourceOptions(tableOptions);

    validatePKConstraints(
            context.getObjectIdentifier(),
            context.getPrimaryKeyIndexes(),
            context.getCatalogTable().getOptions(),
            valueDecodingFormat);

    <span class="hljs-keyword">final</span> <span class="hljs-type">StartupOptions</span> <span class="hljs-variable">startupOptions</span> <span class="hljs-operator">=</span> getStartupOptions(tableOptions);

    <span class="hljs-keyword">final</span> <span class="hljs-type">BoundedOptions</span> <span class="hljs-variable">boundedOptions</span> <span class="hljs-operator">=</span> getBoundedOptions(tableOptions);

    <span class="hljs-keyword">final</span> <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> getKafkaProperties(context.getCatalogTable().getOptions());

    <span class="hljs-comment">// add topic-partition discovery</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">Duration</span> <span class="hljs-variable">partitionDiscoveryInterval</span> <span class="hljs-operator">=</span>
            tableOptions.get(SCAN_TOPIC_PARTITION_DISCOVERY);
    properties.setProperty(
            KafkaSourceOptions.PARTITION_DISCOVERY_INTERVAL_MS.key(),
            Long.toString(partitionDiscoveryInterval.toMillis()));

    <span class="hljs-keyword">final</span> <span class="hljs-type">DataType</span> <span class="hljs-variable">physicalDataType</span> <span class="hljs-operator">=</span> context.getPhysicalRowDataType();

    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span>[] keyProjection = createKeyFormatProjection(tableOptions, physicalDataType);

    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span>[] valueProjection = createValueFormatProjection(tableOptions, physicalDataType);

    <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">keyPrefix</span> <span class="hljs-operator">=</span> tableOptions.getOptional(KEY_FIELDS_PREFIX).orElse(<span class="hljs-literal">null</span>);

    <span class="hljs-keyword">final</span> <span class="hljs-type">Integer</span> <span class="hljs-variable">parallelism</span> <span class="hljs-operator">=</span> tableOptions.getOptional(SCAN_PARALLELISM).orElse(<span class="hljs-literal">null</span>);

    <span class="hljs-keyword">return</span> createKafkaTableSource(
            physicalDataType,
            keyDecodingFormat.orElse(<span class="hljs-literal">null</span>),
            valueDecodingFormat,
            keyProjection,
            valueProjection,
            keyPrefix,
            getTopics(tableOptions),
            getTopicPattern(tableOptions),
            properties,
            startupOptions.startupMode,
            startupOptions.specificOffsets,
            startupOptions.startupTimestampMillis,
            boundedOptions.boundedMode,
            boundedOptions.specificOffsets,
            boundedOptions.boundedTimestampMillis,
            context.getObjectIdentifier().asSummaryString(),
            parallelism);
}
</code></pre>
<p>åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œé¦–å…ˆè¦è·å–åˆ° key å’Œ value çš„è§£ç æ ¼å¼ã€‚æ¥ç€æ˜¯å„ç§å‚æ•°æ ¡éªŒå’Œè·å–å¿…è¦çš„å±æ€§ã€‚æœ€ååˆ›å»º KafkaDynamicSource å®ä¾‹ã€‚</p>
<p>è·å–è§£ç æ ¼å¼éœ€è¦ç”¨åˆ° DeserializationFormatFactory å·¥å‚ï¼ŒDeserializationFormatFactory æœ‰å¤šä¸ªå®ç°ç±»ï¼Œå¯¹åº”äº†å¤šç§æ ¼å¼çš„ååºåˆ—åŒ–æ–¹æ³•ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ba6cb71d8984c6195c812c249511d1b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2i5ZCRR29vZ2xl57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769522703&amp;x-signature=LgsUYXYpM0bSTFcTWOqm%2FRjz9sA%3D" alt="DeserializationFormatFactory" loading="lazy"/></p>
<p>æˆ‘ä»¬æ¥çœ‹æ¯”è¾ƒå¸¸è§çš„ Json æ ¼å¼çš„å·¥å‚ JsonFormatFactoryã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> DecodingFormat&lt;DeserializationSchema&lt;RowData&gt;&gt; <span class="hljs-title function_">createDecodingFormat</span><span class="hljs-params">(
        DynamicTableFactory.Context context, ReadableConfig formatOptions)</span> {
    FactoryUtil.validateFactoryOptions(<span class="hljs-built_in">this</span>, formatOptions);
    JsonFormatOptionsUtil.validateDecodingFormatOptions(formatOptions);

    <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">failOnMissingField</span> <span class="hljs-operator">=</span> formatOptions.get(FAIL_ON_MISSING_FIELD);
    <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">ignoreParseErrors</span> <span class="hljs-operator">=</span> formatOptions.get(IGNORE_PARSE_ERRORS);
    <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">jsonParserEnabled</span> <span class="hljs-operator">=</span> formatOptions.get(DECODE_JSON_PARSER_ENABLED);
    <span class="hljs-type">TimestampFormat</span> <span class="hljs-variable">timestampOption</span> <span class="hljs-operator">=</span> JsonFormatOptionsUtil.getTimestampFormat(formatOptions);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProjectableDecodingFormat</span>&lt;DeserializationSchema&lt;RowData&gt;&gt;() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> DeserializationSchema&lt;RowData&gt; <span class="hljs-title function_">createRuntimeDecoder</span><span class="hljs-params">(
                DynamicTableSource.Context context,
                DataType physicalDataType,
                <span class="hljs-type">int</span>[][] projections)</span> {
            <span class="hljs-keyword">final</span> <span class="hljs-type">DataType</span> <span class="hljs-variable">producedDataType</span> <span class="hljs-operator">=</span>
                    Projection.of(projections).project(physicalDataType);
            <span class="hljs-keyword">final</span> <span class="hljs-type">RowType</span> <span class="hljs-variable">rowType</span> <span class="hljs-operator">=</span> (RowType) producedDataType.getLogicalType();
            <span class="hljs-keyword">final</span> TypeInformation&lt;RowData&gt; rowDataTypeInfo =
                    context.createTypeInformation(producedDataType);
            <span class="hljs-keyword">if</span> (jsonParserEnabled) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonParserRowDataDeserializationSchema</span>(
                        rowType,
                        rowDataTypeInfo,
                        failOnMissingField,
                        ignoreParseErrors,
                        timestampOption,
                        toProjectedNames(
                                (RowType) physicalDataType.getLogicalType(), projections));
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonRowDataDeserializationSchema</span>(
                        rowType,
                        rowDataTypeInfo,
                        failOnMissingField,
                        ignoreParseErrors,
                        timestampOption);
            }
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> ChangelogMode <span class="hljs-title function_">getChangelogMode</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> ChangelogMode.insertOnly();
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">supportsNestedProjection</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> jsonParserEnabled;
        }
    };
}
</code></pre>
<p>åœ¨åˆ›å»ºè§£ç æ ¼å¼æ—¶ï¼Œæœ€é‡è¦çš„æ˜¯åˆ›å»ºè¿è¡Œæ—¶çš„è§£ç å™¨ï¼Œä¹Ÿå°±æ˜¯ DeserializationSchemaï¼Œåœ¨ JsonFormatFactory ä¸­ï¼Œæœ‰ JsonParserRowDataDeserializationSchema å’Œ JsonRowDataDeserializationSchema ä¸¤ç§å®ç°ï¼Œåˆ†åˆ«æ˜¯ç”¨äºå°† JsonParser å’Œ JsonNode è½¬æ¢æˆä¸º RowDataï¼Œå…·ä½“çš„é€»è¾‘éƒ½åœ¨ createNotNullConverter æ–¹æ³•ä¸­ã€‚</p>
<p>äº†è§£å®Œè§£ç æ ¼å¼åï¼Œæˆ‘ä»¬æŠŠè§†è§’æ‹‰å›åˆ° KafkaDynamicSourceï¼Œå®ƒå®ç°äº†ä¸‰ä¸ªæ¥å£ ScanTableSourceã€SupportsReadingMetadataã€SupportsWatermarkPushDownã€‚åˆ†åˆ«ç”¨äºæ¶ˆè´¹æ•°æ®ï¼Œè¯»å–å…ƒæ•°æ®å’Œç”Ÿæˆæ°´å°ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> ScanRuntimeProvider <span class="hljs-title function_">getScanRuntimeProvider</span><span class="hljs-params">(ScanContext context)</span> {
    <span class="hljs-keyword">final</span> DeserializationSchema&lt;RowData&gt; keyDeserialization =
            createDeserialization(context, keyDecodingFormat, keyProjection, keyPrefix);

    <span class="hljs-keyword">final</span> DeserializationSchema&lt;RowData&gt; valueDeserialization =
            createDeserialization(context, valueDecodingFormat, valueProjection, <span class="hljs-literal">null</span>);

    <span class="hljs-keyword">final</span> TypeInformation&lt;RowData&gt; producedTypeInfo =
            context.createTypeInformation(producedDataType);

    <span class="hljs-keyword">final</span> KafkaSource&lt;RowData&gt; kafkaSource =
            createKafkaSource(keyDeserialization, valueDeserialization, producedTypeInfo);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataStreamScanProvider</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> DataStream&lt;RowData&gt; <span class="hljs-title function_">produceDataStream</span><span class="hljs-params">(
                ProviderContext providerContext, StreamExecutionEnvironment execEnv)</span> {
            <span class="hljs-keyword">if</span> (watermarkStrategy == <span class="hljs-literal">null</span>) {
                watermarkStrategy = WatermarkStrategy.noWatermarks();
            }
            DataStreamSource&lt;RowData&gt; sourceStream =
                    execEnv.fromSource(
                            kafkaSource, watermarkStrategy, <span class="hljs-string">"KafkaSource-"</span> + tableIdentifier);
            providerContext.generateUid(KAFKA_TRANSFORMATION).ifPresent(sourceStream::uid);
            <span class="hljs-keyword">return</span> sourceStream;
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isBounded</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> kafkaSource.getBoundedness() == Boundedness.BOUNDED;
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> Optional&lt;Integer&gt; <span class="hljs-title function_">getParallelism</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> Optional.ofNullable(parallelism);
        }
    };
}
</code></pre>
<p>åœ¨ ScanRuntimeProvider çš„é€»è¾‘ä¸­ï¼Œå…ˆè·å–åˆ°ååºåˆ—åŒ–å™¨ï¼Œä¹Ÿå°±æ˜¯åˆšåˆšæˆ‘ä»¬æåˆ°çš„ DeserializationSchemaã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fda648b380364e92baebee5c64ba586d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2i5ZCRR29vZ2xl57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769522703&amp;x-signature=rrIxhHnz6i3ip8ywXqcedhIZNis%3D" alt="KafkaSource" loading="lazy"/></p>
<p>ç„¶åå¼€å§‹åˆ›å»º KafkaSource å®ä¾‹ï¼Œå®ƒæ˜¯ Source çš„å®ç°ç±»ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œå¼•æ“å±‚äº†ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šä¾æ¬¡åˆ›å»ºå›¾ä¸­è¿™äº›ç±»ã€‚</p>
<p>KafkaSource ä¸­ä¸»è¦æ˜¯åˆ›å»º KafkaSourceReader å’Œ KafkaSourceEnumeratorï¼ŒKafkaSourceEnumerator æ˜¯è´Ÿè´£å’Œåˆ†ç‰‡ç›¸å…³çš„é€»è¾‘ï¼ŒåŒ…æ‹¬åˆ†ç‰‡åˆ†é…å’Œåˆ†ç‰‡å‘ç°ç­‰ã€‚</p>
<p>KafkaSourceReader ä¸­ä¸»è¦æ˜¯å’Œ State ç›¸å…³çš„é€»è¾‘ï¼ŒåŒ…æ‹¬è§¦å‘å¿«ç…§å’Œå®Œæˆ Checkpoint é€šçŸ¥çš„æ–¹æ³•ã€‚å½“åš Snapshot æ—¶ï¼Œä¼šè®°å½•æ´»è·ƒ split çš„ offsetï¼ŒåŒæ—¶å°† split ä½œä¸ºçŠ¶æ€æäº¤ã€‚å½“ Checkpoint å®Œæˆæ—¶ï¼Œä¼šè°ƒç”¨ <code>KafkaSourceFetcherManager.commitOffsets</code> æäº¤ offsetã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> List&lt;KafkaPartitionSplit&gt; <span class="hljs-title function_">snapshotState</span><span class="hljs-params">(<span class="hljs-type">long</span> checkpointId)</span> {
    List&lt;KafkaPartitionSplit&gt; splits = <span class="hljs-built_in">super</span>.snapshotState(checkpointId);
    <span class="hljs-keyword">if</span> (!commitOffsetsOnCheckpoint) {
        <span class="hljs-keyword">return</span> splits;
    }

    <span class="hljs-keyword">if</span> (splits.isEmpty() &amp;&amp; offsetsOfFinishedSplits.isEmpty()) {
        offsetsToCommit.put(checkpointId, Collections.emptyMap());
    } <span class="hljs-keyword">else</span> {
        Map&lt;TopicPartition, OffsetAndMetadata&gt; offsetsMap =
                offsetsToCommit.computeIfAbsent(checkpointId, id -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;());
        <span class="hljs-comment">// Put the offsets of the active splits.</span>
        <span class="hljs-keyword">for</span> (KafkaPartitionSplit split : splits) {
            <span class="hljs-comment">// If the checkpoint is triggered before the partition starting offsets</span>
            <span class="hljs-comment">// is retrieved, do not commit the offsets for those partitions.</span>
            <span class="hljs-keyword">if</span> (split.getStartingOffset() &gt;= <span class="hljs-number">0</span>) {
                offsetsMap.put(
                        split.getTopicPartition(),
                        <span class="hljs-keyword">new</span> <span class="hljs-title class_">OffsetAndMetadata</span>(split.getStartingOffset()));
            }
        }
        <span class="hljs-comment">// Put offsets of all the finished splits.</span>
        offsetsMap.putAll(offsetsOfFinishedSplits);
    }
    <span class="hljs-keyword">return</span> splits;
}


<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">notifyCheckpointComplete</span><span class="hljs-params">(<span class="hljs-type">long</span> checkpointId)</span> <span class="hljs-keyword">throws</span> Exception {
    LOG.debug(<span class="hljs-string">"Committing offsets for checkpoint {}"</span>, checkpointId);
    ...

    ((KafkaSourceFetcherManager) splitFetcherManager)
            .commitOffsets(
                    committedPartitions,
                    (ignored, e) -&gt; {...});
}
</code></pre>
<p>KafkaSourceFetcherManager è´Ÿè´£ç®¡ç† fetcher çº¿ç¨‹ï¼Œæäº¤ Offsetã€‚</p>
<p>KafkaPartitionSplitReader çš„ fetch æ–¹æ³•ç”¨æ¥æ¶ˆè´¹ Kafka çš„æ•°æ®ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> RecordsWithSplitIds&lt;ConsumerRecord&lt;<span class="hljs-type">byte</span>[], <span class="hljs-type">byte</span>[]&gt;&gt; fetch() <span class="hljs-keyword">throws</span> IOException {
    ConsumerRecords&lt;<span class="hljs-type">byte</span>[], <span class="hljs-type">byte</span>[]&gt; consumerRecords;
    <span class="hljs-keyword">try</span> {
        consumerRecords = consumer.poll(Duration.ofMillis(POLL_TIMEOUT));
    } <span class="hljs-keyword">catch</span> (WakeupException | IllegalStateException e) {
        <span class="hljs-comment">// IllegalStateException will be thrown if the consumer is not assigned any partitions.</span>
        <span class="hljs-comment">// This happens if all assigned partitions are invalid or empty (starting offset &gt;=</span>
        <span class="hljs-comment">// stopping offset). We just mark empty partitions as finished and return an empty</span>
        <span class="hljs-comment">// record container, and this consumer will be closed by SplitFetcherManager.</span>
        <span class="hljs-type">KafkaPartitionSplitRecords</span> <span class="hljs-variable">recordsBySplits</span> <span class="hljs-operator">=</span>
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">KafkaPartitionSplitRecords</span>(
                        ConsumerRecords.empty(), kafkaSourceReaderMetrics);
        markEmptySplitsAsFinished(recordsBySplits);
        <span class="hljs-keyword">return</span> recordsBySplits;
    }
    <span class="hljs-type">KafkaPartitionSplitRecords</span> <span class="hljs-variable">recordsBySplits</span> <span class="hljs-operator">=</span>
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">KafkaPartitionSplitRecords</span>(consumerRecords, kafkaSourceReaderMetrics);
    List&lt;TopicPartition&gt; finishedPartitions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    <span class="hljs-keyword">for</span> (TopicPartition tp : consumer.assignment()) {
        <span class="hljs-type">long</span> <span class="hljs-variable">stoppingOffset</span> <span class="hljs-operator">=</span> getStoppingOffset(tp);
        <span class="hljs-type">long</span> <span class="hljs-variable">consumerPosition</span> <span class="hljs-operator">=</span> getConsumerPosition(tp, <span class="hljs-string">"retrieving consumer position"</span>);
        <span class="hljs-comment">// Stop fetching when the consumer's position reaches the stoppingOffset.</span>
        <span class="hljs-comment">// Control messages may follow the last record; therefore, using the last record's</span>
        <span class="hljs-comment">// offset as a stopping condition could result in indefinite blocking.</span>
        <span class="hljs-keyword">if</span> (consumerPosition &gt;= stoppingOffset) {
            LOG.debug(
                    <span class="hljs-string">"Position of {}: {}, has reached stopping offset: {}"</span>,
                    tp,
                    consumerPosition,
                    stoppingOffset);
            recordsBySplits.setPartitionStoppingOffset(tp, stoppingOffset);
            finishSplitAtRecord(
                    tp, stoppingOffset, consumerPosition, finishedPartitions, recordsBySplits);
        }
    }

    <span class="hljs-comment">// Only track non-empty partition's record lag if it never appears before</span>
    consumerRecords
            .partitions()
            .forEach(
                    trackTp -&gt; {
                        kafkaSourceReaderMetrics.maybeAddRecordsLagMetric(consumer, trackTp);
                    });

    markEmptySplitsAsFinished(recordsBySplits);

    <span class="hljs-comment">// Unassign the partitions that has finished.</span>
    <span class="hljs-keyword">if</span> (!finishedPartitions.isEmpty()) {
        finishedPartitions.forEach(kafkaSourceReaderMetrics::removeRecordsLagMetric);
        unassignPartitions(finishedPartitions);
    }

    <span class="hljs-comment">// Update numBytesIn</span>
    kafkaSourceReaderMetrics.updateNumBytesInCounter();

    <span class="hljs-keyword">return</span> recordsBySplits;
}
</code></pre>
<p>è‡³æ­¤ï¼ŒSource ç«¯ç›¸å…³çš„æºç æˆ‘ä»¬å°±æ¢³ç†å®Œäº†ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å†çœ‹ Sink ç«¯çš„ä»£ç ã€‚</p>
<h4 data-id="heading-8">Sink ç«¯</h4>
<p>æˆ‘ä»¬ä»å·¥å‚ç±»ä¸­çš„ createDynamicTableSink æ–¹æ³•å¼€å§‹ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> DynamicTableSink <span class="hljs-title function_">createDynamicTableSink</span><span class="hljs-params">(Context context)</span> {
    <span class="hljs-keyword">final</span> <span class="hljs-type">TableFactoryHelper</span> <span class="hljs-variable">helper</span> <span class="hljs-operator">=</span>
            FactoryUtil.createTableFactoryHelper(
                    <span class="hljs-built_in">this</span>, autoCompleteSchemaRegistrySubject(context));

    <span class="hljs-keyword">final</span> Optional&lt;EncodingFormat&lt;SerializationSchema&lt;RowData&gt;&gt;&gt; keyEncodingFormat =
            getKeyEncodingFormat(helper);

    <span class="hljs-keyword">final</span> EncodingFormat&lt;SerializationSchema&lt;RowData&gt;&gt; valueEncodingFormat =
            getValueEncodingFormat(helper);

    helper.validateExcept(PROPERTIES_PREFIX);

    <span class="hljs-keyword">final</span> <span class="hljs-type">ReadableConfig</span> <span class="hljs-variable">tableOptions</span> <span class="hljs-operator">=</span> helper.getOptions();

    <span class="hljs-keyword">final</span> <span class="hljs-type">DeliveryGuarantee</span> <span class="hljs-variable">deliveryGuarantee</span> <span class="hljs-operator">=</span> validateDeprecatedSemantic(tableOptions);
    validateTableSinkOptions(tableOptions);

    KafkaConnectorOptionsUtil.validateDeliveryGuarantee(tableOptions);

    validatePKConstraints(
            context.getObjectIdentifier(),
            context.getPrimaryKeyIndexes(),
            context.getCatalogTable().getOptions(),
            valueEncodingFormat);

    <span class="hljs-keyword">final</span> <span class="hljs-type">DataType</span> <span class="hljs-variable">physicalDataType</span> <span class="hljs-operator">=</span> context.getPhysicalRowDataType();

    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span>[] keyProjection = createKeyFormatProjection(tableOptions, physicalDataType);

    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span>[] valueProjection = createValueFormatProjection(tableOptions, physicalDataType);

    <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">keyPrefix</span> <span class="hljs-operator">=</span> tableOptions.getOptional(KEY_FIELDS_PREFIX).orElse(<span class="hljs-literal">null</span>);

    <span class="hljs-keyword">final</span> <span class="hljs-type">Integer</span> <span class="hljs-variable">parallelism</span> <span class="hljs-operator">=</span> tableOptions.getOptional(SINK_PARALLELISM).orElse(<span class="hljs-literal">null</span>);

    <span class="hljs-keyword">return</span> createKafkaTableSink(
            physicalDataType,
            keyEncodingFormat.orElse(<span class="hljs-literal">null</span>),
            valueEncodingFormat,
            keyProjection,
            valueProjection,
            keyPrefix,
            getTopics(tableOptions),
            getTopicPattern(tableOptions),
            getKafkaProperties(context.getCatalogTable().getOptions()),
            getFlinkKafkaPartitioner(tableOptions, context.getClassLoader()).orElse(<span class="hljs-literal">null</span>),
            deliveryGuarantee,
            parallelism,
            tableOptions.get(TRANSACTIONAL_ID_PREFIX),
            tableOptions.get(TRANSACTION_NAMING_STRATEGY));
}
</code></pre>
<p>å’Œ Source çš„æµç¨‹å¾ˆç›¸ä¼¼ï¼Œè¿™é‡Œé¦–å…ˆæ˜¯è·å– key å’Œ value çš„ç¼–ç æ ¼å¼ï¼Œç„¶ååšäº†å¾ˆå¤šæ ¡éªŒï¼Œæœ€åæ˜¯åˆ›å»º KafkaDynamicSink å®ä¾‹ã€‚</p>
<p>è·å–ç¼–ç æ ¼å¼ç”¨åˆ°çš„å·¥å‚ç±»æ˜¯ SerializationFormatFactoryï¼Œæˆ‘ä»¬å‰é¢ä»‹ç»çš„ JsonFormatFactory ä¹Ÿå®ç°äº† SerializationFormatFactoryï¼Œå› æ­¤å®ƒæ—¢æä¾›äº†è§£ç æ ¼å¼ï¼Œåˆæä¾›äº†ç¼–ç æ ¼å¼ã€‚ç¼–ç æ ¼å¼ç”¨åˆ°çš„ç¼–ç å™¨æ˜¯ JsonRowDataSerializationSchemaï¼Œé€šè¿‡ RowDataToJsonConverters å°† RowData è½¬æ¢æˆ JsonNodeã€‚</p>
<p>åœ¨ KafkaDynamicSink çš„ getSinkRuntimeProvider æ–¹æ³•ä¸­ï¼Œä¸»è¦å°±æ˜¯åˆ›å»º KafkaSink å®ä¾‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/854b4c2fdee4487994510627457e8c5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2i5ZCRR29vZ2xl57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769522703&amp;x-signature=WYK4ar2fAKGW1M8Hpkh%2BmUxLcB4%3D" alt="KafkaSink" loading="lazy"/></p>
<p>KafkaSink ç±»å®ç°äº† TwoPhaseCommittingStatefulSink æ¥å£ï¼Œå³æ”¯æŒä¸¤é˜¶æ®µæäº¤ã€‚å®ƒåˆ›å»ºäº† KafkaWrter å’Œ KafkaCommiterã€‚</p>
<p>åˆ›å»º KafkaWriter æ—¶ï¼Œå¦‚æœé…ç½®çš„æ˜¯ ExactlyOnce æ¨¡å¼ï¼Œåˆ™ä¼šåˆ›å»ºå‡º ExactlyOnceKafkaWriterï¼Œå¦åˆ™åˆ›å»º KafkaWriterã€‚Writer çœŸæ­£å®ç°ä¸¤é˜¶æ®µæäº¤çš„æ˜¯ ExactlyOnceKafkaWriterã€‚å®ƒåœ¨å¯åŠ¨æ—¶ï¼Œä¼šè°ƒç”¨ <code>producer.beginTransaction</code> å¼€å¯ä¸€ä¸ªäº‹åŠ¡ã€‚æ•°æ®å†™å…¥æ—¶ä¼šè°ƒç”¨ <code>KafkaWriter.write</code> æ–¹æ³•ï¼Œæ­¤æ“ä½œä¼šè¢«æ ‡è®°ä¸ºäº‹åŠ¡å†…çš„æ“ä½œã€‚å½“ Sink æ”¶åˆ° Barrier æ—¶ï¼Œä¼šå…ˆè°ƒç”¨ flush æ–¹æ³•ï¼Œå°†ç¼“å†²åŒºçš„æ•°æ®éƒ½å‘é€åˆ° Kafka Brokerï¼Œç„¶åè°ƒç”¨ prepareCommit æ–¹æ³•é¢„æäº¤ã€‚é¢„æäº¤æ–¹æ³•ä¸­è®°å½• epoch å’Œ transactionalId è¿”å›ç»™æ¡†æ¶å±‚ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> Collection&lt;KafkaCommittable&gt; <span class="hljs-title function_">prepareCommit</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// only return a KafkaCommittable if the current transaction has been written some data</span>
    <span class="hljs-keyword">if</span> (currentProducer.hasRecordsInTransaction()) {
        <span class="hljs-type">KafkaCommittable</span> <span class="hljs-variable">committable</span> <span class="hljs-operator">=</span> KafkaCommittable.of(currentProducer);
        LOG.debug(<span class="hljs-string">"Prepare {}."</span>, committable);
        currentProducer.precommitTransaction();
        <span class="hljs-keyword">return</span> Collections.singletonList(committable);
    }

    <span class="hljs-comment">// otherwise, we recycle the producer (the pool will reset the transaction state)</span>
    producerPool.recycle(currentProducer);
    <span class="hljs-keyword">return</span> Collections.emptyList();
}
</code></pre>
<p>çŠ¶æ€ä¿å­˜æ—¶ï¼Œä¼šå°†é¢„æäº¤çš„ transactionalId å­˜åˆ°çŠ¶æ€ä¸­ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> List&lt;KafkaWriterState&gt; <span class="hljs-title function_">snapshotState</span><span class="hljs-params">(<span class="hljs-type">long</span> checkpointId)</span> <span class="hljs-keyword">throws</span> IOException {
    <span class="hljs-comment">// recycle committed producers</span>
    TransactionFinished finishedTransaction;
    <span class="hljs-keyword">while</span> ((finishedTransaction = backchannel.poll()) != <span class="hljs-literal">null</span>) {
        producerPool.recycleByTransactionId(
                finishedTransaction.getTransactionId(), finishedTransaction.isSuccess());
    }
    <span class="hljs-comment">// persist the ongoing transactions into the state; these will not be aborted on restart</span>
    Collection&lt;CheckpointTransaction&gt; ongoingTransactions =
            producerPool.getOngoingTransactions();
    currentProducer = startTransaction(checkpointId + <span class="hljs-number">1</span>);
    <span class="hljs-keyword">return</span> createSnapshots(ongoingTransactions);
}

<span class="hljs-keyword">private</span> List&lt;KafkaWriterState&gt; <span class="hljs-title function_">createSnapshots</span><span class="hljs-params">(
        Collection&lt;CheckpointTransaction&gt; ongoingTransactions)</span> {
    List&lt;KafkaWriterState&gt; states = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    <span class="hljs-type">int</span>[] subtaskIds = <span class="hljs-built_in">this</span>.ownedSubtaskIds;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; index &lt; subtaskIds.length; index++) {
        <span class="hljs-type">int</span> <span class="hljs-variable">ownedSubtask</span> <span class="hljs-operator">=</span> subtaskIds[index];
        states.add(
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">KafkaWriterState</span>(
                        transactionalIdPrefix,
                        ownedSubtask,
                        totalNumberOfOwnedSubtasks,
                        transactionNamingStrategy.getOwnership(),
                        <span class="hljs-comment">// new transactions are only created with the first owned subtask id</span>
                        index == <span class="hljs-number">0</span> ? ongoingTransactions : List.of()));
    }
    LOG.debug(<span class="hljs-string">"Snapshotting state {}"</span>, states);
    <span class="hljs-keyword">return</span> states;
}
</code></pre>
<p>å½“ Checkpoint å®Œæˆæ—¶ï¼Œä¼šè°ƒç”¨ <code>KafkaCommitter.commit</code> æ–¹æ³•ã€‚åœ¨ commit æ–¹æ³•ä¸­ä¼šè°ƒç”¨ <code>producer.commitTransaction</code> æ­£å¼æäº¤äº‹åŠ¡ã€‚</p>
<p>FlinkKafkaInternalProducer æ˜¯ Flink å†…éƒ¨å°è£…çš„ä¸ Kafka ç”Ÿäº§è€…çš„äº¤äº’ç±»ï¼Œæ‰€æœ‰ä¸ Kafka ç”Ÿäº§è€…çš„äº¤äº’éƒ½é€šè¿‡å®ƒæ‰§è¡Œã€‚</p>
<p>å…³äº Kafka Connector çš„ Sink ç«¯çš„æºç æˆ‘ä»¬å°±æ¢³ç†åˆ°è¿™é‡Œã€‚</p>
<h3 data-id="heading-9">æ€»ç»“</h3>
<p>æœ€åè¿˜æ˜¯æ€»ç»“ä¸€ä¸‹ã€‚æœ¬æ–‡æˆ‘ä»¬å…ˆäº†è§£äº† Flink ä¸­è‡ªå®šä¹‰ Source å’Œ Sink çš„æµç¨‹ã€‚æŒ‰ç…§è¿™ä¸ªæµç¨‹ï¼Œæˆ‘ä»¬æ¢³ç†äº† Kafka Connector çš„æºç ã€‚åœ¨ Source ç«¯ï¼ŒFlink Kafka å°è£…äº†å¯¹æ¶ˆè´¹è€… Offset çš„æäº¤é€»è¾‘ã€‚åœ¨ Sink ç«¯ç»“åˆäº† Kafka æä¾›çš„äº‹åŠ¡æ”¯æŒå®ç°äº†ä¸¤é˜¶æ®µæäº¤çš„é€»è¾‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026 å¹´ï¼Œå€¼å¾—å‰ç«¯å…¨æ ˆå°è¯•çš„ NestJS æŠ€æœ¯æ ˆç»„åˆ ğŸ˜ğŸ˜ğŸ˜]]></title>    <link>https://juejin.cn/post/7597278451029639178</link>    <guid>https://juejin.cn/post/7597278451029639178</guid>    <pubDate>2026-01-20T14:08:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597278451029639178" data-draft-id="7597251197426368538" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" 2026 å¹´ï¼Œå€¼å¾—å‰ç«¯å…¨æ ˆå°è¯•çš„ NestJS æŠ€æœ¯æ ˆç»„åˆ ğŸ˜ğŸ˜ğŸ˜"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,Node.js"/> <meta itemprop="datePublished" content="2026-01-20T14:08:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Moment"/> <meta itemprop="url" content="https://juejin.cn/user/3782764966460398"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             2026 å¹´ï¼Œå€¼å¾—å‰ç«¯å…¨æ ˆå°è¯•çš„ NestJS æŠ€æœ¯æ ˆç»„åˆ ğŸ˜ğŸ˜ğŸ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3782764966460398/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Moment
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T14:08:27.000Z" title="Tue Jan 20 2026 14:08:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><blockquote>
<p>æˆ‘æ­£åœ¨å¼€å‘ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxun082%2FDocFlow" target="_blank" title="https://github.com/xun082/DocFlow" ref="nofollow noopener noreferrer">DocFlow</a>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®Œæ•´çš„ AI å…¨æ ˆååŒæ–‡æ¡£å¹³å°ã€‚è¯¥é¡¹ç›®èåˆäº†å¤šä¸ªæŠ€æœ¯æ ˆï¼ŒåŒ…æ‹¬åŸºäº <code>Tiptap</code> çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€<code>NestJs</code> åç«¯æœåŠ¡ã€<code>AI</code> é›†æˆåŠŸèƒ½å’Œå®æ—¶åä½œã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ç§¯ç´¯äº†ä¸°å¯Œçš„å®æˆ˜ç»éªŒï¼Œæ¶µç›–äº† <code>Tiptap</code> çš„æ·±åº¦å®šåˆ¶ã€æ€§èƒ½ä¼˜åŒ–å’Œåä½œåŠŸèƒ½çš„å®ç°ç­‰æ ¸å¿ƒéš¾ç‚¹ã€‚</p>
</blockquote>
<p>å¦‚æœä½ å¯¹ AI å…¨æ ˆå¼€å‘ã€Tiptap å¯Œæ–‡æœ¬ç¼–è¾‘å™¨å®šåˆ¶æˆ– DocFlow é¡¹ç›®çš„å®Œæ•´æŠ€æœ¯æ–¹æ¡ˆæ„Ÿå…´è¶£ï¼Œæ¬¢è¿åŠ æˆ‘å¾®ä¿¡ <code>yunmz777</code> è¿›è¡Œç§èŠå’¨è¯¢ï¼Œè·å–è¯¦ç»†çš„æŠ€æœ¯åˆ†äº«å’Œæœ€ä½³å®è·µã€‚</p>
<p>å¯¹å¾ˆå¤šæƒ³ä»å‰ç«¯è½¬å‘å…¨æ ˆçš„åŒå­¦æ¥è¯´ï¼Œ<code>NestJS</code> æ˜¯ä¸€ä¸ªéå¸¸å‹å¥½çš„é€‰æ‹©ï¼šè¯­æ³•é£æ ¼æ¥è¿‘å‰ç«¯ç†Ÿæ‚‰çš„ <code>TypeScript</code>ï¼Œåˆå€Ÿé‰´äº†åç«¯å¸¸è§çš„æ¨¡å—åŒ–ä¸ä¾èµ–æ³¨å…¥æ¨¡å¼ï¼Œå¯ä»¥åœ¨ä¿ç•™å‰ç«¯å¼€å‘èˆ’é€‚åº¦çš„åŒæ—¶ï¼Œæ¯”è¾ƒè½»æ¾åœ°æ­èµ·ä¸€å¥—â€œåƒæ ·çš„åç«¯æœåŠ¡â€ã€‚</p>
<p>å¦‚æœç›®æ ‡ä¸ä»…æ˜¯å†™å‡ ä¸ªç®€å•æ¥å£ï¼Œè€Œæ˜¯è¦æ‰›èµ·é‰´æƒã€å®æ—¶ååŒã€AI èƒ½åŠ›ï¼Œè¿˜è¦è‡ªå·±æ­å»ºå’Œç»´æŠ¤æ•°æ®åº“ã€ç¼“å­˜ã€æœç´¢ã€å¯¹è±¡å­˜å‚¨ã€ç›‘æ§è¿™äº›åŸºç¡€è®¾æ–½ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€å¥—åâ€œè‡ªæ‰˜ç®¡ã€è‡ªè¿ç»´â€çš„ <code>NestJS</code> æŠ€æœ¯æ ˆç»„åˆã€‚</p>
<p>è¿™é‡Œæ¨èçš„æŠ€æœ¯æ ˆé€‰æ‹©æ ‡å‡†ä¸»è¦æœ‰ä¸‰ç‚¹ï¼š</p>
<ol>
<li>å’Œ <code>NestJS</code> ç”Ÿæ€é«˜åº¦å¥‘åˆï¼Œæœ‰æˆç†Ÿçš„å®˜æ–¹æˆ–ç¤¾åŒºé›†æˆï¼›</li>
<li>èƒ½å¤Ÿæ”¯æ’‘ä¸­å¤§å‹æ–‡æ¡£ã€çŸ¥è¯†ç±»åº”ç”¨çš„æ€§èƒ½å’Œå¤æ‚åº¦ï¼Œæ¯”å¦‚ååŒç¼–è¾‘ã€å…¨æ–‡æ£€ç´¢ã€RAGã€ä»»åŠ¡é˜Ÿåˆ—ç­‰ï¼›</li>
<li>ä¸ªäººæˆ–å°å›¢é˜Ÿä¹Ÿèƒ½åœ¨åˆç†æˆæœ¬å†…è‡ªè¡Œéƒ¨ç½²å’Œç»´æŠ¤ï¼Œæ¯”å¦‚ä½¿ç”¨ <code>Prisma</code> + <code>MySql</code>ã€<code>Redis</code>ã€<code>Elasticsearch</code>ã€<code>MinIO</code> è¿™ç±»å¼€æºç»„ä»¶ã€‚</li>
</ol>
<p>æ¥ä¸‹æ¥å°±æŒ‰ç…§ä»æ¡†æ¶ã€è¿è¡Œæ—¶åˆ°æ•°æ®å±‚ã€æœç´¢ã€é˜Ÿåˆ—ã€AI çš„é¡ºåºï¼Œåˆ†äº«ä¸€å¥—é€‚åˆå‰ç«¯è½¬å…¨æ ˆä½¿ç”¨çš„ <code>NestJS</code> æ ¸å¿ƒæŠ€æœ¯æ ˆï¼Œä»£ç ä¹Ÿå°½é‡è´´è¿‘å®æˆ˜ï¼Œæ–¹ä¾¿ç›´æ¥æ”¹é€ å¤ç”¨ã€‚</p>
<h2 data-id="heading-0"><code>NestJS</code> å’Œ <code>TypeScript</code></h2>
<p><code>NestJS</code> æ˜¯æ•´ä¸ªåç«¯çš„â€œæ¡†æ¶å£³å­â€ï¼Œè´Ÿè´£æ¨¡å—åˆ’åˆ†ã€ä¾èµ–æ³¨å…¥ã€è£…é¥°å™¨ç­‰åŸºç¡€èƒ½åŠ›ï¼›<code>TypeScript</code> åˆ™æ˜¯åœ°åŸºï¼ŒæŠŠå¾ˆå¤šåŸæœ¬è¦é ç»éªŒé¿å…çš„é”™è¯¯æå‰åˆ°ç¼–è¯‘æœŸå‘ç°ï¼Œä¾‹å¦‚ Controller å…¥å‚ã€Service è¿”å›å€¼ã€é…ç½®å¯¹è±¡ç­‰ã€‚</p>
<p>å®é™…é¡¹ç›®ä¸­ï¼Œä¸€èˆ¬ä¼šå¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼Œå†ç»“åˆå…¨å±€çš„ <code>ValidationPipe</code> å’Œ <code>class-transformer</code>ï¼ŒæŠŠè¯·æ±‚é‡Œçš„åŸå§‹ JSON è‡ªåŠ¨è½¬æ¢æˆå¸¦ç±»å‹çš„ DTO å®ä¾‹ï¼Œä»è€Œå‡å°‘ <code>any</code> çš„ä½¿ç”¨ã€é¿å…è„æ•°æ®æµå…¥ä¸šåŠ¡å±‚ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// main.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NestFactory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/core'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.module'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ValidationPipe</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">await</span> <span class="hljs-title class_">NestFactory</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">AppModule</span>);
  app.<span class="hljs-title function_">useGlobalPipes</span>(
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">ValidationPipe</span>({
      <span class="hljs-attr">whitelist</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">transform</span>: <span class="hljs-literal">true</span>,
    }),
  );
  <span class="hljs-keyword">await</span> app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>);
}

<span class="hljs-title function_">bootstrap</span>();
</code></pre>
<h2 data-id="heading-1"><code>Fastify</code> å’Œ <code>@nestjs/platform-fastify</code></h2>
<p><code>Fastify</code> æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ HTTP å¼•æ“ï¼Œç›¸æ¯” <code>Express</code> æ›´è½»é‡ã€æ›´é€‚åˆé«˜å¹¶å‘åœºæ™¯ï¼›<code>@nestjs/platform-fastify</code> è´Ÿè´£æŠŠ Fastify æ¥è¿› Nestï¼Œè®©ä½ åœ¨ä¸šåŠ¡å±‚ä¾ç„¶åªå†™æ ‡å‡†çš„ Controllerã€Guardã€Interceptor ç­‰ã€‚</p>
<p>æ­é… <code>@fastify/helmet</code>ã€<code>@fastify/rate-limit</code>ã€<code>@fastify/cookie</code>ã€<code>@fastify/secure-session</code>ã€<code>@fastify/multipart</code>ã€<code>@fastify/static</code>ï¼Œå¯ä»¥åœ¨ç»Ÿä¸€æ¡†æ¶é‡Œå®Œæˆå®‰å…¨å¤´ã€é™æµã€ä¼šè¯ã€ä¸Šä¼ å’Œé™æ€èµ„æºæ‰˜ç®¡ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// main.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NestFactory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/core'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.module'</span>;
<span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">FastifyAdapter</span>,
  <span class="hljs-title class_">NestFastifyApplication</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/platform-fastify'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">await</span> <span class="hljs-title class_">NestFactory</span>.<span class="hljs-property">create</span>&lt;<span class="hljs-title class_">NestFastifyApplication</span>&gt;(
    <span class="hljs-title class_">AppModule</span>,
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">FastifyAdapter</span>(),
  );
  <span class="hljs-keyword">await</span> app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-string">'0.0.0.0'</span>);
}

<span class="hljs-title function_">bootstrap</span>();
</code></pre>
<h2 data-id="heading-2"><code>@nestjs/config</code></h2>
<p><code>@nestjs/config</code> æ˜¯ Nest å®˜æ–¹çš„é…ç½®æ¨¡å—ï¼Œç”¨æ¥ç»Ÿä¸€ç®¡ç†å¤šç¯å¢ƒé…ç½®ã€‚æ€è·¯å¾ˆç®€å•ï¼šæ‰€æœ‰æ•°æ®åº“åœ°å€ã€ç¬¬ä¸‰æ–¹ç§˜é’¥ã€å¼€å…³é…ç½®ç­‰ï¼Œéƒ½é€šè¿‡ <code>ConfigService</code> è¯»å–ï¼Œè€Œä¸æ˜¯åœ¨ä»£ç é‡Œåˆ°å¤„æ•£è½ <code>process.env</code>ã€‚</p>
<p>æ¨èçš„åšæ³•æ˜¯ä¸ºä¸åŒé¢†åŸŸå†™ç‹¬ç«‹çš„é…ç½®å·¥å‚ï¼Œç„¶ååœ¨å¯¹åº”æ¨¡å—ä¸­æ³¨å…¥ä½¿ç”¨ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// app.module.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ConfigModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/config'</span>;

<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title class_">ConfigModule</span>.<span class="hljs-title function_">forRoot</span>({
      <span class="hljs-attr">isGlobal</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">envFilePath</span>: <span class="hljs-string">'.env'</span>,
    }),
  ],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> {}
</code></pre>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// some.service.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ConfigService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/config'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SomeService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> configService: ConfigService</span>) {}

  <span class="hljs-title function_">getDbUrl</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">configService</span>.<span class="hljs-property">get</span>&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">'DATABASE_URL'</span>);
  }
}
</code></pre>
<h2 data-id="heading-3"><code>Passport</code> å’Œ <code>JWT</code></h2>
<p><code>@nestjs/passport</code> å’Œ <code>@nestjs/jwt</code> æä¾›äº†ä¸€æ•´å¥—è®¤è¯åŸºç¡€è®¾æ–½ï¼š<code>Passport</code> ç»Ÿä¸€ç®¡ç†å„ç§è®¤è¯ç­–ç•¥ï¼ˆæœ¬åœ°ã€JWTã€OAuth ç­‰ï¼‰ï¼Œ<code>JWT</code> æä¾›æ— çŠ¶æ€ä»¤ç‰Œï¼Œè®©å‰åç«¯åˆ†ç¦»ã€å¤šç«¯è®¿é—®æ›´å®¹æ˜“ç®¡ç†ã€‚</p>
<p>å¸¸è§æµç¨‹æ˜¯ï¼šé€šè¿‡æœ¬åœ°ç­–ç•¥éªŒè¯ç”¨æˆ·åå¯†ç ï¼Œç™»å½•æˆåŠŸåç­¾å‘ <code>JWT</code>ï¼Œåç»­è¯·æ±‚é€šè¿‡ <code>AuthGuard('jwt')</code> éªŒè¯ï¼›æ¥å…¥ç¬¬ä¸‰æ–¹ç™»å½•ï¼ˆå¦‚ GitHubï¼‰æ—¶ï¼Œä»…éœ€å¢åŠ æ–°çš„ Passport ç­–ç•¥ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// auth.module.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">JwtModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/jwt'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PassportModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/passport'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">JwtStrategy</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./jwt.strategy'</span>;

<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title class_">PassportModule</span>.<span class="hljs-title function_">register</span>({ <span class="hljs-attr">defaultStrategy</span>: <span class="hljs-string">'jwt'</span> }),
    <span class="hljs-title class_">JwtModule</span>.<span class="hljs-title function_">register</span>({
      <span class="hljs-attr">secret</span>: <span class="hljs-string">'secret'</span>, <span class="hljs-comment">// å®é™…é¡¹ç›®è¯·ä» ConfigService è¯»å–</span>
    }),
  ],
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">JwtStrategy</span>],
  <span class="hljs-attr">exports</span>: [<span class="hljs-title class_">PassportModule</span>, <span class="hljs-title class_">JwtModule</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthModule</span> {}
</code></pre>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// some.controller.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Get</span>, <span class="hljs-title class_">UseGuards</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AuthGuard</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/passport'</span>;

<span class="hljs-meta">@Controller</span>(<span class="hljs-string">'profile'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProfileController</span> {
  <span class="hljs-meta">@UseGuards</span>(<span class="hljs-title class_">AuthGuard</span>(<span class="hljs-string">'jwt'</span>))
  <span class="hljs-meta">@Get</span>()
  <span class="hljs-title function_">getProfile</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">ok</span>: <span class="hljs-literal">true</span> };
  }
}
</code></pre>
<h2 data-id="heading-4"><code>WebSocket</code> å’Œ <code>Socket.IO</code></h2>
<p>å½“ç³»ç»Ÿéœ€è¦å³æ—¶é€šçŸ¥ã€åœ¨çº¿çŠ¶æ€ã€ååŒç¼–è¾‘æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>@nestjs/websockets</code> æ­é… <code>@nestjs/platform-socket.io</code> å’Œ <code>socket.io</code>ã€‚<code>Gateway</code> å……å½“â€œé•¿è¿æ¥å…¥å£â€ï¼Œè´Ÿè´£ç®¡ç†è¿æ¥ã€æˆ¿é—´å’Œäº‹ä»¶ã€‚</p>
<p>æ›´é«˜çº§çš„ååŒåœºæ™¯ä¸­ï¼Œè¿˜å¯ä»¥å¼•å…¥ <code>hocuspocus</code>ã€<code>yjs</code>ã€<code>y-prosemirror</code> æ¥è´Ÿè´£æ–‡æ¡£ååŒç®—æ³•ï¼ŒNest åªéœ€è¦è´Ÿè´£è¿æ¥ç®¡ç†å’Œæƒé™æ ¡éªŒã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// chat.gateway.ts</span>
<span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">WebSocketGateway</span>,
  <span class="hljs-title class_">WebSocketServer</span>,
  <span class="hljs-title class_">SubscribeMessage</span>,
  <span class="hljs-title class_">MessageBody</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/websockets'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Server</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'socket.io'</span>;

<span class="hljs-meta">@WebSocketGateway</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatGateway</span> {
  <span class="hljs-meta">@WebSocketServer</span>()
  <span class="hljs-attr">server</span>: <span class="hljs-title class_">Server</span>;

  <span class="hljs-meta">@SubscribeMessage</span>(<span class="hljs-string">'message'</span>)
  <span class="hljs-title function_">handleMessage</span>(<span class="hljs-params"><span class="hljs-meta">@MessageBody</span>() data: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">server</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'message'</span>, data);
  }
}
</code></pre>
<h2 data-id="heading-5"><code>Prisma</code></h2>
<p><code>Prisma</code> é€šè¿‡ç‹¬ç«‹çš„ <code>schema.prisma</code> æ–‡ä»¶å®šä¹‰æ¨¡å‹ï¼Œå¹¶ç”Ÿæˆå¼ºç±»å‹çš„ <code>PrismaClient</code>ï¼Œéå¸¸é€‚åˆåœ¨ Nest çš„ Service å±‚ä¸­ä½¿ç”¨ã€‚å®ƒæŠŠæ•°æ®åº“è¿ç§»ã€æ•°æ®å»ºæ¨¡ã€ç±»å‹å®‰å…¨ç»‘åœ¨ä¸€èµ·ï¼Œèƒ½æ˜æ˜¾é™ä½ SQL é”™è¯¯å’Œå­—æ®µæ‹¼å†™é”™è¯¯çš„æ¦‚ç‡ã€‚</p>
<p>åœ¨ Service ä¸­ï¼Œç›´æ¥æ³¨å…¥å°è£…å¥½çš„ <code>PrismaService</code>ï¼Œå°±å¯ä»¥ç”¨ç±»å‹å®‰å…¨çš„æ–¹å¼è¿›è¡Œå¢åˆ æ”¹æŸ¥ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// user.service.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PrismaService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/common/prisma/prisma.service'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> prisma: PrismaService</span>) {}

  <span class="hljs-title function_">findAll</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">prisma</span>.<span class="hljs-property">user</span>.<span class="hljs-title function_">findMany</span>();
  }
}
</code></pre>
<h2 data-id="heading-6"><code>Redis</code> å’Œ <code>ioredis</code></h2>
<p><code>Redis</code> æ˜¯å¸¸è§çš„ç¼“å­˜ä¸ä¸­é—´å±‚ï¼Œè€Œ <code>ioredis</code> æ˜¯ç¨³å®šå¥½ç”¨çš„ Node å®¢æˆ·ç«¯ç»„åˆã€‚å®ƒé€šå¸¸ç”¨äºä¸‰ä¸ªæ–¹å‘ï¼šç¼“å­˜ï¼ˆåŠ é€Ÿè¯»å–ï¼‰ã€åˆ†å¸ƒå¼åè°ƒï¼ˆé”ã€é™æµã€é˜²é‡å¤ï¼‰ã€çŸ­æœŸæ•°æ®å­˜å‚¨ï¼ˆä¼šè¯ã€ä»»åŠ¡çŠ¶æ€ç­‰ï¼‰ã€‚</p>
<p>åœ¨ Nest ä¸­ä¸€èˆ¬ä¼šå°è£…ä¸€ä¸ª <code>RedisService</code>ï¼Œå¯¹å¤–æš´éœ² <code>get</code>ã€<code>set</code>ã€<code>incr</code> ç­‰æ–¹æ³•ï¼Œé¿å…ç›´æ¥åœ¨ä¸šåŠ¡é‡Œä½¿ç”¨åº•å±‚å®¢æˆ·ç«¯ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// redis.service.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span>, <span class="hljs-title class_">OnModuleInit</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Redis</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'ioredis'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisService</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">OnModuleInit</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">client</span>: <span class="hljs-title class_">Redis</span>;

  <span class="hljs-title function_">onModuleInit</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Redis</span>(<span class="hljs-string">'redis://localhost:6379'</span>);
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span>.<span class="hljs-title function_">get</span>(key);
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">set</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span>, value: <span class="hljs-built_in">string</span>, ttlSeconds?: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-keyword">if</span> (ttlSeconds) {
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span>.<span class="hljs-title function_">set</span>(key, value, <span class="hljs-string">'EX'</span>, ttlSeconds);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span>.<span class="hljs-title function_">set</span>(key, value);
    }
  }
}
</code></pre>
<h2 data-id="heading-7"><code>BullMQ</code></h2>
<p><code>BullMQ</code> æ˜¯åŸºäº <code>Redis</code> çš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œ<code>@nestjs/bullmq</code> è®©ä½ å¯ä»¥ç”¨è£…é¥°å™¨æ–¹å¼å®šä¹‰é˜Ÿåˆ—å’Œæ¶ˆè´¹è€…ã€‚å®ƒé€‚åˆæ‰¿è½½å„ç§è€—æ—¶ä»»åŠ¡ï¼Œä¾‹å¦‚å¤§æ–‡ä»¶è§£æã€æ‰¹é‡å¯¼å…¥å¯¼å‡ºã€è°ƒç”¨å¤–éƒ¨ AI æ¥å£ç­‰ã€‚</p>
<p>è¿™æ ·å¯ä»¥æŠŠé‡ä»»åŠ¡ä» HTTP è¯·æ±‚ä¸­å‰¥ç¦»ï¼Œé¿å…æ¥å£è¶…æ—¶ï¼Œç”¨æˆ·åªéœ€æ‹¿åˆ°ä¸€ä¸ªâ€œä»»åŠ¡å·²å—ç†â€çš„ IDã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<p>æ¶ˆè´¹è€…ï¼ˆå¤„ç†ä»»åŠ¡ï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// task.processor.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Processor</span>, <span class="hljs-title class_">WorkerHost</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/bullmq'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Job</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'bullmq'</span>;

<span class="hljs-meta">@Processor</span>(<span class="hljs-string">'tasks'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TaskProcessor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">WorkerHost</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">process</span>(<span class="hljs-params">job: Job</span>) {
    <span class="hljs-comment">// è¿™é‡Œå¤„ç†è€—æ—¶ä»»åŠ¡</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'processing job'</span>, job.<span class="hljs-property">id</span>, job.<span class="hljs-property">data</span>);
  }
}
</code></pre>
<p>ç”Ÿäº§è€…ï¼ˆæŠ•é€’ä»»åŠ¡ï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// task.service.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">InjectQueue</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/bullmq'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Queue</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'bullmq'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TaskService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-meta">@InjectQueue</span>(<span class="hljs-string">'tasks'</span>) <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> queue: Queue</span>) {}

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">createTask</span>(<span class="hljs-params">payload: <span class="hljs-built_in">any</span></span>) {
    <span class="hljs-keyword">const</span> job = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'process'</span>, payload);
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">jobId</span>: job.<span class="hljs-property">id</span> };
  }
}
</code></pre>
<h2 data-id="heading-8"><code>Elasticsearch</code></h2>
<p><code>Elasticsearch</code> åœ¨æ–‡æ¡£å’ŒçŸ¥è¯†ç±»ç³»ç»Ÿä¸­é€šå¸¸ç”¨ä½œç»“æ„åŒ–æœç´¢ä¸æ—¥å¿—ç´¢å¼•å¼•æ“ã€‚é€šè¿‡ <code>@elastic/elasticsearch</code> å®¢æˆ·ç«¯å¯ä»¥åœ¨ Nest çš„ Service é‡Œå°è£…æœç´¢æ¥å£ï¼Œå¯¹å¤–ç»Ÿä¸€æš´éœ²â€œæœç´¢æ–‡æ¡£â€â€œæœç´¢æ—¥å¿—â€ç­‰èƒ½åŠ›ã€‚</p>
<p>ç›¸å¯¹æ•°æ®åº“åŸç”ŸæŸ¥è¯¢ï¼Œ<code>Elasticsearch</code> æ›´æ“…é•¿å¤æ‚æŸ¥è¯¢ã€èšåˆç»Ÿè®¡ã€æ¨¡ç³Šæœç´¢ä¸æœç´¢ç»“æœæ’åºï¼Œæ˜¯æå‡æœç´¢ä½“éªŒçš„å…³é”®ç»„ä»¶ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<p>å°è£…æœç´¢ Serviceï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// search.service.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Client</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@elastic/elasticsearch'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SearchService</span> {
  <span class="hljs-keyword">private</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Client</span>({ <span class="hljs-attr">node</span>: <span class="hljs-string">'http://localhost:9200'</span> });

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">searchDocs</span>(<span class="hljs-params">keyword: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span>.<span class="hljs-title function_">search</span>({
      <span class="hljs-attr">index</span>: <span class="hljs-string">'documents'</span>,
      <span class="hljs-attr">query</span>: {
        <span class="hljs-attr">multi_match</span>: {
          <span class="hljs-attr">query</span>: keyword,
          <span class="hljs-attr">fields</span>: [<span class="hljs-string">'title'</span>, <span class="hljs-string">'content'</span>],
        },
      },
    });
    <span class="hljs-keyword">return</span> res.<span class="hljs-property">hits</span>.<span class="hljs-property">hits</span>;
  }
}
</code></pre>
<h2 data-id="heading-9">å¯¹è±¡å­˜å‚¨ï¼ˆ<code>MinIO</code>ï¼‰</h2>
<p>å½“ç³»ç»Ÿæœ‰å¤§é‡æ–‡ä»¶ï¼ˆå¦‚ <code>PDF</code>ã€<code>Word</code>ã€å›¾ç‰‡ã€éŸ³é¢‘ï¼‰æ—¶ï¼Œæœ¬åœ°ç£ç›˜å¾ˆå¿«å°±ä¼šåƒä¸æ¶ˆï¼Œè¿™æ—¶å¯ä»¥ç”¨è‡ªå»ºçš„ <code>MinIO</code> é›†ç¾¤æ¥åšå¯¹è±¡å­˜å‚¨ã€‚å®ƒè´Ÿè´£é•¿æœŸä¿å­˜å¤§æ–‡ä»¶ï¼Œåç«¯åªéœ€è¦å…³å¿ƒå¯¹è±¡åå’Œè®¿é—®åœ°å€ï¼Œä¸å¿…å†ç›´æ¥ç®¡ç†ç£ç›˜ã€‚</p>
<p>åœ¨ Nest ä¸­é€šå¸¸ä¼šå°è£…ä¸€ä¸ªå­˜å‚¨ Serviceï¼Œå¯¹ä¸Šå±‚æš´éœ²â€œä¸Šä¼ æ–‡ä»¶â€â€œç”Ÿæˆä¸‹è½½åœ°å€â€ç­‰æ–¹æ³•ï¼›åŒæ—¶é…åˆ <code>imagekit</code>ã€<code>sharp</code>ã€<code>exiftool-vendored</code>ã€<code>pdf-parse</code>ã€<code>mammoth</code> ç­‰ï¼Œå¯¹æ–‡ä»¶åšå‹ç¼©ã€é¢„è§ˆã€å…ƒä¿¡æ¯ä¸æ–‡æœ¬æå–ç­‰å¤„ç†ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// storage.service.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Client</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'minio'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StorageService</span> {
  <span class="hljs-keyword">private</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Client</span>({
    <span class="hljs-attr">endPoint</span>: <span class="hljs-string">'localhost'</span>,
    <span class="hljs-attr">port</span>: <span class="hljs-number">9000</span>,
    <span class="hljs-attr">useSSL</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">accessKey</span>: <span class="hljs-string">'minio'</span>,
    <span class="hljs-attr">secretKey</span>: <span class="hljs-string">'minio123'</span>,
  });

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">upload</span>(<span class="hljs-params">bucket: <span class="hljs-built_in">string</span>, objectName: <span class="hljs-built_in">string</span>, buffer: Buffer</span>) {
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span>.<span class="hljs-title function_">putObject</span>(bucket, objectName, buffer);
    <span class="hljs-keyword">return</span> { bucket, objectName };
  }
}
</code></pre>
<h2 data-id="heading-10"><code>@nestjs/swagger</code></h2>
<p><code>@nestjs/swagger</code> è´Ÿè´£ä» Controller å’Œ DTO çš„è£…é¥°å™¨ä¸­ç”Ÿæˆ OpenAPI æ–‡æ¡£ï¼Œè®©æ¥å£å®šä¹‰å’Œä»£ç å®ç°ä¿æŒåŒæ­¥ï¼Œä¸å†éœ€è¦å•ç‹¬ç»´æŠ¤ä¸€ä»½å®¹æ˜“è¿‡æœŸçš„æ¥å£æ–‡æ¡£ã€‚</p>
<p>åœ¨å‰åç«¯åˆ†ç¦»é¡¹ç›®ä¸­ï¼ŒSwagger æ–‡æ¡£å¯ä»¥åŒæ—¶æœåŠ¡å‰ç«¯ã€æµ‹è¯•ä¸äº§å“ï¼šå‰ç«¯å¯¹é½è¯·æ±‚å’Œå“åº”ç»“æ„ï¼Œæµ‹è¯•åšæ¥å£éªŒè¯ï¼Œäº§å“äº†è§£åç«¯å·²æœ‰èƒ½åŠ›ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// main.ts ç‰‡æ®µ</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SwaggerModule</span>, <span class="hljs-title class_">DocumentBuilder</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/swagger'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">await</span> <span class="hljs-title class_">NestFactory</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">AppModule</span>);

  <span class="hljs-keyword">const</span> config = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DocumentBuilder</span>()
    .<span class="hljs-title function_">setTitle</span>(<span class="hljs-string">'API æ–‡æ¡£'</span>)
    .<span class="hljs-title function_">setDescription</span>(<span class="hljs-string">'æœåŠ¡æ¥å£è¯´æ˜'</span>)
    .<span class="hljs-title function_">setVersion</span>(<span class="hljs-string">'1.0'</span>)
    .<span class="hljs-title function_">build</span>();

  <span class="hljs-keyword">const</span> <span class="hljs-variable language_">document</span> = <span class="hljs-title class_">SwaggerModule</span>.<span class="hljs-title function_">createDocument</span>(app, config);
  <span class="hljs-title class_">SwaggerModule</span>.<span class="hljs-title function_">setup</span>(<span class="hljs-string">'docs'</span>, app, <span class="hljs-variable language_">document</span>);

  <span class="hljs-keyword">await</span> app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>);
}
</code></pre>
<h2 data-id="heading-11"><code>class-validator</code> å’Œ <code>class-transformer</code></h2>
<p><code>class-validator</code> é€šè¿‡åœ¨ DTO ç±»å±æ€§ä¸Šæ·»åŠ è£…é¥°å™¨ï¼ˆå¦‚ <code>IsString</code>ã€<code>IsInt</code>ã€<code>IsOptional</code> ç­‰ï¼‰å®šä¹‰å­—æ®µçš„åˆæ³•è§„åˆ™ï¼Œ<code>class-transformer</code> è´Ÿè´£æŠŠåŸå§‹è¯·æ±‚ JSON è½¬æ¢æˆ DTO å®ä¾‹ã€‚é…åˆå…¨å±€ <code>ValidationPipe</code>ï¼Œå¯ä»¥ä¿è¯è¿›å…¥ Controller çš„æ•°æ®å·²ç»è¿‡æ ¡éªŒå’Œè½¬æ¢ã€‚</p>
<p>è¿™ä¸€ä½“ç³»å¤§å¤§å‡å°‘äº†æ‰‹å†™ if æ ¡éªŒçš„é‡å¤åŠ³åŠ¨ï¼ŒåŒæ—¶ç¡®ä¿é”™è¯¯è¯·æ±‚åœ¨ç»Ÿä¸€å…¥å£è¢«æ‹¦æˆªå¹¶æŠ›å‡ºåˆé€‚çš„ HTTP å¼‚å¸¸ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// create-user.dto.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">IsEmail</span>, <span class="hljs-title class_">IsString</span>, <span class="hljs-title class_">MinLength</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'class-validator'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CreateUserDto</span> {
  <span class="hljs-meta">@IsEmail</span>()
  <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>;

  <span class="hljs-meta">@IsString</span>()
  <span class="hljs-meta">@MinLength</span>(<span class="hljs-number">6</span>)
  <span class="hljs-attr">password</span>: <span class="hljs-built_in">string</span>;
}
</code></pre>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// user.controller.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Body</span>, <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Post</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CreateUserDto</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./dto/create-user.dto'</span>;

<span class="hljs-meta">@Controller</span>(<span class="hljs-string">'users'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
  <span class="hljs-meta">@Post</span>()
  <span class="hljs-title function_">create</span>(<span class="hljs-params"><span class="hljs-meta">@Body</span>() dto: CreateUserDto</span>) {
    <span class="hljs-keyword">return</span> dto;
  }
}
</code></pre>
<h2 data-id="heading-12"><code>Prometheus</code> å’Œ <code>Terminus</code></h2>
<p><code>@willsoto/nestjs-prometheus</code> æ­é… <code>prom-client</code> å¯ä»¥æ–¹ä¾¿åœ°æš´éœ²å„ç§æŒ‡æ ‡ç«¯ç‚¹ï¼Œä¾‹å¦‚ HTTP å»¶è¿Ÿã€é”™è¯¯ç‡ã€é˜Ÿåˆ—å †ç§¯æƒ…å†µç­‰ï¼›<code>@nestjs/terminus</code> åˆ™ä¸“æ³¨äºå¥åº·æ£€æŸ¥ï¼Œé€šè¿‡å¤šç§ <code>HealthIndicator</code> æ£€æŸ¥æ•°æ®åº“ã€<code>Redis</code>ã€<code>Elasticsearch</code>ã€<code>Qdrant</code> ç­‰ä¾èµ–æœåŠ¡æ˜¯å¦å¯ç”¨ã€‚</p>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œè¿™ä¸¤è€…ä¸ºâ€œå¯è§‚æµ‹æ€§â€æ‰“åŸºç¡€ï¼Œä½¿è¿ç»´å’Œå¼€å‘å¯ä»¥å¿«é€Ÿæ„ŸçŸ¥å’Œå®šä½é—®é¢˜ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// health.controller.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Get</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">HealthCheck</span>,
  <span class="hljs-title class_">HealthCheckService</span>,
  <span class="hljs-title class_">TypeOrmHealthIndicator</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/terminus'</span>;

<span class="hljs-meta">@Controller</span>(<span class="hljs-string">'health'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HealthController</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">
    <span class="hljs-keyword">private</span> health: HealthCheckService,
    <span class="hljs-keyword">private</span> db: TypeOrmHealthIndicator,
  </span>) {}

  <span class="hljs-meta">@Get</span>()
  <span class="hljs-meta">@HealthCheck</span>()
  <span class="hljs-title function_">check</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">health</span>.<span class="hljs-title function_">check</span>([
      <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>.<span class="hljs-title function_">pingCheck</span>(<span class="hljs-string">'database'</span>),
    ]);
  }
}
</code></pre>
<h2 data-id="heading-13"><code>OpenAI</code> å’Œ <code>LangChain</code></h2>
<p><code>openai</code> æä¾›ä¸å¤§æ¨¡å‹äº¤äº’çš„åŸºç¡€æ¥å£ï¼Œè€Œ <code>langchain</code>ã€<code>@langchain/core</code>ã€<code>@langchain/community</code>ã€<code>@langchain/openai</code>ã€<code>@langchain/textsplitters</code> åˆ™æŠŠæ¨¡å‹è°ƒç”¨ã€æç¤ºæ¨¡æ¿ã€å·¥å…·è°ƒç”¨ã€é•¿æ–‡æ¡£åˆ‡ç‰‡ç­‰å¤æ‚é€»è¾‘æŠ½è±¡æˆå¯ç»„åˆçš„æ¨¡å—ã€‚å¯¹äºæ–‡æ¡£å·¥ä½œæµç±»é¡¹ç›®ï¼Œè¿™ä¸€å±‚å°±æ˜¯ä»â€œæ™®é€šæ–‡æ¡£ç³»ç»Ÿâ€å‡çº§ä¸ºâ€œæ™ºèƒ½æ–‡æ¡£ç³»ç»Ÿâ€çš„å…³é”®ã€‚</p>
<p>åœ¨ Nest ä¸­ï¼Œé€šå¸¸ä¼šæ‹†å‡ºä¸€ä¸ª AI æ¨¡å—ï¼ŒæŠŠâ€œå‘é‡æ£€ç´¢ + RAG + æ¨¡å‹è°ƒç”¨â€å°è£…åœ¨ Service é‡Œï¼Œå†é€šè¿‡å°‘é‡ HTTP æ¥å£æš´éœ²å‡ºé—®ç­”ã€æ€»ç»“ã€æ¶¦è‰²ç­‰èƒ½åŠ›ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// ai.service.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">OpenAI</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'openai'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AiService</span> {
  <span class="hljs-keyword">private</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OpenAI</span>({ <span class="hljs-attr">apiKey</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">OPENAI_API_KEY</span> });

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">chat</span>(<span class="hljs-params">prompt: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span>.<span class="hljs-property">chat</span>.<span class="hljs-property">completions</span>.<span class="hljs-title function_">create</span>({
      <span class="hljs-attr">model</span>: <span class="hljs-string">'gpt-4.1-mini'</span>,
      <span class="hljs-attr">messages</span>: [{ <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: prompt }],
    });
    <span class="hljs-keyword">return</span> res.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>]?.<span class="hljs-property">message</span>?.<span class="hljs-property">content</span> ?? <span class="hljs-string">''</span>;
  }
}
</code></pre>
<h2 data-id="heading-14">æ€»ç»“</h2>
<p>å¦‚æœåªæ˜¯æƒ³æŠŠæ¥å£â€œè·‘èµ·æ¥â€ï¼Œä¹Ÿè®¸åªè¦ <code>NestJS</code> åŠ ä¸Šä¸€ä¸¤ä¸ªåº“å°±å¤Ÿç”¨ï¼›ä½†ä¸€æ—¦è¦æ‰›èµ·é‰´æƒã€å®æ—¶ååŒã€AIã€æ–‡ä»¶ä¸æœç´¢è¿™äº›å®Œæ•´èƒ½åŠ›ï¼Œå°±å¾ˆå®¹æ˜“æ¼”å˜æˆè¿™ç¯‡æ–‡ç« å‰é¢åˆ—å‡ºæ¥çš„è¿™ä¸€æ•´å¥—æŠ€æœ¯æ ˆï¼š<code>NestJS</code> + <code>TypeScript</code> æ‰“åŸºç¡€ï¼Œ<code>Fastify</code> æä¾›é«˜æ€§èƒ½ HTTP å…¥å£ï¼Œ<code>Prisma</code> + <code>MySql</code> ç®¡æ•°æ®ï¼Œ<code>Redis</code> + <code>BullMQ</code> ç®¡ç¼“å­˜å’Œé˜Ÿåˆ—ï¼Œ<code>Elasticsearch</code> ç®¡æœç´¢ï¼Œ<code>MinIO</code> ç®¡æ–‡ä»¶ï¼Œå†åŠ ä¸Š <code>@nestjs/swagger</code>ã€<code>class-validator</code>ã€<code>Prometheus</code>ã€<code>Terminus</code> å’Œ <code>OpenAI</code>ã€<code>LangChain</code> è¿™äº›å‘¨è¾¹ï¼Œè®©é¡¹ç›®ä»â€œèƒ½è·‘â€å˜æˆâ€œå¥½ç”¨ã€å¯ç»´æŠ¤ã€å¯æ‰©å±•â€ã€‚</p>
<p>å¯¹å‰ç«¯è½¬å…¨æ ˆæ¥è¯´ï¼Œè¿™å¥—ç»„åˆæœ‰ä¸¤ä¸ªç°å®çš„å¥½å¤„ï¼šä¸€æ˜¯è¯­æ³•å’Œæ€è·¯éƒ½å›´ç»• <code>TypeScript</code> å±•å¼€ï¼Œä¸Šæ‰‹æˆæœ¬å¯æ§ï¼›äºŒæ˜¯æ¯ä¸€ä¸ªç¯èŠ‚éƒ½æœ‰æˆç†Ÿçš„ Nest é›†æˆï¼ˆæ¨¡å—ã€è£…é¥°å™¨ã€ç¤ºä¾‹ä»£ç ï¼‰ï¼Œå¯ä»¥æŒ‰éœ€é€æ­¥å¼•å…¥ï¼Œè€Œä¸å¿…ä¸€å£æ°”åƒä¸‹å…¨éƒ¨ã€‚ä½ å¯ä»¥å…ˆç”¨ <code>NestJS</code> + <code>Prisma</code> + <code>Redis</code> èµ·ä¸€ä¸ªç®€å•é¡¹ç›®ï¼Œå†æ…¢æ…¢æŠŠé˜Ÿåˆ—ã€æœç´¢ã€å¯¹è±¡å­˜å‚¨å’Œ AI èƒ½åŠ›è¡¥ä¸Šï¼Œæœ€ç»ˆæ­å‡ºä¸€å¥—é€‚åˆè‡ªå·±é•¿æœŸç»´æŠ¤çš„åç«¯è„šæ‰‹æ¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RocketMQä»å®æˆ˜åˆ°æºç ï¼šå®¢æˆ·ç«¯æ¶ˆæ¯æœºåˆ¶ï¼ˆä¸‡å­—ç¯‡å¹…ï¼‰]]></title>    <link>https://juejin.cn/post/7597283981185122356</link>    <guid>https://juejin.cn/post/7597283981185122356</guid>    <pubDate>2026-01-20T14:12:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597283981185122356" data-draft-id="7597243334177374248" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RocketMQä»å®æˆ˜åˆ°æºç ï¼šå®¢æˆ·ç«¯æ¶ˆæ¯æœºåˆ¶ï¼ˆä¸‡å­—ç¯‡å¹…ï¼‰"/> <meta itemprop="keywords" content="åç«¯,RocketMQ,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-20T14:12:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ€’æ”¾å§å¾·å¾·"/> <meta itemprop="url" content="https://juejin.cn/user/2502950820787672"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RocketMQä»å®æˆ˜åˆ°æºç ï¼šå®¢æˆ·ç«¯æ¶ˆæ¯æœºåˆ¶ï¼ˆä¸‡å­—ç¯‡å¹…ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2502950820787672/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ€’æ”¾å§å¾·å¾·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T14:12:51.000Z" title="Tue Jan 20 2026 14:12:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»29åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">RocketMQä»å®æˆ˜åˆ°æºç ï¼šå®¢æˆ·ç«¯æ¶ˆæ¯æœºåˆ¶</h2>
<blockquote>
<p>ğŸ˜„ç”Ÿå‘½ä¸æ¯ï¼Œå†™ä½œä¸æ­¢</p>
<p>ğŸ”¥ ç»§ç»­è¸ä¸Šå­¦ä¹ ä¹‹è·¯ï¼Œå­¦ä¹‹åˆ†äº«ç¬”è®°</p>
<p>ğŸ‘Š æ€»æœ‰ä¸€å¤©æˆ‘ä¹Ÿèƒ½åƒå„ä½å¤§ä½¬ä¸€æ ·</p>
<p>ğŸ† <a href="https://juejin.cn/user/2502950820787672" target="_blank" title="https://juejin.cn/user/2502950820787672">åšå®¢é¦–é¡µ</a> Â Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Flyd-code%2F" target="_blank" title="https://www.cnblogs.com/lyd-code/" ref="nofollow noopener noreferrer">@æ€’æ”¾å§å¾·å¾·</a>Â Â <a href="https://link.juejin.cn?target=https%3A%2F%2Flydandtry.github.io%2F" target="_blank" title="https://lydandtry.github.io/" ref="nofollow noopener noreferrer">Toè®°å½•é¢†åœ°</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fqq_43843951%3Ftype%3Dblog" target="_blank" title="https://blog.csdn.net/qq_43843951?type=blog" ref="nofollow noopener noreferrer">@ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº</a></p>
<p>ğŸŒåˆ†äº«å­¦ä¹ å¿ƒå¾—ï¼Œæ¬¢è¿æŒ‡æ­£ï¼Œå¤§å®¶ä¸€èµ·å­¦ä¹ æˆé•¿ï¼</p>
</blockquote>
<p><em>è½¬å‘è¯·æºå¸¦ä½œè€…ä¿¡æ¯</em>Â  <strong>@æ€’æ”¾å§å¾·å¾·(æ˜é‡‘) @ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº(CSDN)</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c33ed4ee428469db4621f0d3f673b67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oCS5pS-5ZCn5b635b63:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523170&amp;x-signature=ZyU9aRoqKl3hAsUfbYsLVPSurBU%3D" alt="rocketmqå°é¢.png" loading="lazy"/></p>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>å‰é¢ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ç®€å•å­¦ä¹ äº† RockerMQ çš„å®‰è£…ä»¥åŠç®€å• demoï¼Œç°åœ¨æˆ‘ä»¬å°±è¿›ä¸€æ­¥å­¦ä¹  RockerMQ çš„æ¶ˆæ¯æœºåˆ¶ã€‚æœ¬ç¯‡ç¯‡å¹…è¾ƒå¤§ï¼Œå†…å®¹è¾ƒå¤šï¼Œåç»­ä¼šå°†æ¯ä¸ªæ¶ˆæ¯æœºåˆ¶è¿›è¡ŒæŠ½å–ã€‚</p>
<h3 data-id="heading-2">1 åŸºç¡€ä½¿ç”¨</h3>
<p>é€šè¿‡ rocket çš„ä»£ç ä¸­çš„ example æ¡ˆä¾‹ï¼Œé‡Œé¢æœ‰ç®€å•çš„ä¾‹å­ã€‚ï¼ˆåŒ…ï¼šorg.apache.rocketmq.example.quickstartï¼‰</p>
<p>ç”Ÿäº§è€…ä»£ç ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">public class Producer {

    /**
     * The number of produced messages.
     */
    public static final int MESSAGE_COUNT = 1000;
    public static final String PRODUCER_GROUP = "Study1";
    public static final String DEFAULT_NAMESRVADDR = "192.168.109.134:9876";
    public static final String TOPIC = "TopicTest";
    public static final String TAG = "TagA";

    public static void main(String[] args) throws MQClientException, InterruptedException {

        // åˆ›å»ºç”Ÿäº§è€…ï¼ŒæŒ‡å®šç”Ÿäº§ç»„
        DefaultMQProducer producer = new DefaultMQProducer(PRODUCER_GROUP);

        // è®¾ç½®Nameserveråœ°å€
        producer.setNamesrvAddr(DEFAULT_NAMESRVADDR);

        // å¯åŠ¨ç”Ÿäº§è€…
        producer.start();

        for (int i = 0; i &lt; MESSAGE_COUNT; i++) {
            try {
                // åˆ›å»ºæ¶ˆæ¯ä½“ï¼šè®¢é˜…ä¸»é¢˜ã€Tagã€æ¶ˆæ¯ä½“
                Message msg = new Message(TOPIC,
                        TAG,
                        ("Hello RocketMQ " + i).getBytes(RemotingHelper.DEFAULT_CHARSET)
                );

                // å‘é€æ¶ˆæ¯
                SendResult sendResult = producer.send(msg, 20 * 1000);
                System.out.printf("%s%n", sendResult);
            } catch (Exception e) {
                e.printStackTrace();
                Thread.sleep(1000);
            }
        }
        // å…³é—­ç”Ÿäº§è€…ï¼Œé‡Šæ”¾èµ„æº
        producer.shutdown();
    }
}
</code></pre>
<p>æ¶ˆè´¹è¿™ä»£ç ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">public class Consumer {

    public static final String CONSUMER_GROUP = "Study1";
    public static final String DEFAULT_NAMESRVADDR = "192.168.109.134:9876";
    public static final String TOPIC = "TopicTest";

    public static void main(String[] args) throws MQClientException {

        // åˆ›å»ºæ¶ˆè´¹è€…ï¼ŒæŒ‡å®šæ¶ˆè´¹ç»„
        DefaultMQPushConsumer consumer = new DefaultMQPushConsumer(CONSUMER_GROUP);

        // è®¾ç½®Nameserveråœ°å€
        consumer.setNamesrvAddr(DEFAULT_NAMESRVADDR);

        // å¦‚æœç‰¹å®šçš„æ¶ˆè´¹ç¾¤ä½“æ˜¯å…¨æ–°çš„ï¼Œè¯·æŒ‡å®šä»å“ªé‡Œå¼€å§‹
        consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_FIRST_OFFSET);

        // é…ç½®è®¢é˜…ä¸»é¢˜Topicã€Tag
        consumer.subscribe(TOPIC, "*");

        // è®¾ç½®å›è°ƒå‡½æ•°ï¼Œå¤„ç†æ¶ˆæ¯
        consumer.registerMessageListener((MessageListenerConcurrently) (msg, context) -&gt; {
            System.out.printf("%s Receive New Messages: %s %n", Thread.currentThread().getName(), msg);
            return ConsumeConcurrentlyStatus.CONSUME_SUCCESS;
        });

        // å¯åŠ¨æ¶ˆè´¹è€…ï¼Œå¯åŠ¨åä¼šä¸€ç›´æŒ‚ç€ï¼ŒæŒç»­å¤„ç†æ¶ˆæ¯
        consumer.start();

        System.out.printf("Consumer Started.%n");
    }
}
</code></pre>
<p>å®¢æˆ·ç«¯ç¼–ç¨‹é€»è¾‘é¡ºåºæ¯”è¾ƒå›ºå®šã€‚</p>
<p>â‘  ç”Ÿäº§è€…å›ºå®šæ­¥éª¤</p>
<ul>
<li>åˆ›å»ºç”Ÿäº§è€…ï¼ŒæŒ‡å®šç”Ÿäº§ç»„</li>
<li>è®¾ç½®Nameserveråœ°å€</li>
<li>å¯åŠ¨ç”Ÿäº§è€…</li>
<li>åˆ›å»ºæ¶ˆæ¯ä½“ï¼šè®¢é˜…ä¸»é¢˜ã€Tagã€æ¶ˆæ¯ä½“</li>
<li>å‘é€æ¶ˆæ¯</li>
<li>å…³é—­ç”Ÿäº§è€…ï¼Œé‡Šæ”¾èµ„æº</li>
</ul>
<p>â‘¡ æ¶ˆè´¹è€…å›ºå®šæ­¥éª¤</p>
<ul>
<li>åˆ›å»ºæ¶ˆè´¹è€…ï¼ŒæŒ‡å®šæ¶ˆè´¹ç»„</li>
<li>è®¾ç½®Nameserveråœ°å€</li>
<li>å¦‚æœç‰¹å®šçš„æ¶ˆè´¹ç¾¤ä½“æ˜¯å…¨æ–°çš„ï¼Œè¯·æŒ‡å®šä»å“ªé‡Œå¼€å§‹</li>
<li>é…ç½®è®¢é˜…ä¸»é¢˜Topicã€Tag</li>
<li>è®¾ç½®å›è°ƒå‡½æ•°ï¼Œå¤„ç†æ¶ˆæ¯</li>
<li>å¯åŠ¨æ¶ˆè´¹è€…ï¼Œå¯åŠ¨åä¼šä¸€ç›´æŒ‚ç€ï¼ŒæŒç»­å¤„ç†æ¶ˆæ¯</li>
</ul>
<h3 data-id="heading-3">2 ç¡®è®¤æ¶ˆæ¯æœºåˆ¶</h3>
<p>æ¶ˆæ¯æ˜¯å¿…å…ˆè¦ä¿è¯å®‰å…¨æ€§ï¼Œè€Œè¿™åŒ…å«äº†ä¸¤ç§ï¼Œä¸€æ˜¯è¦ç¡®ä¿æ¶ˆæ¯å‘é€åˆ° Broker ä¸Šï¼ŒäºŒæ˜¯è¦ç¡®ä¿æ¶ˆè´¹è€…èƒ½å¤Ÿæ­£å¸¸ä» Broker æ¶ˆè´¹ã€‚RocketMQ æä¾›äº†å®Œå–„çš„æ¶ˆæ¯ç¡®è®¤æœºåˆ¶ï¼Œç¡®ä¿æ¶ˆæ¯çš„å¯é ä¼ é€’ã€‚ä¸»è¦åˆ†ä¸ºç”Ÿäº§è€…å‘é€ç¡®è®¤å’Œæ¶ˆè´¹è€…æ¶ˆè´¹ç¡®è®¤ä¸¤å¤§éƒ¨åˆ†ã€‚</p>
<h4 data-id="heading-4">2.1 ç”Ÿäº§è€…ç«¯</h4>
<p>ç”Ÿäº§è€…é€šè¿‡å¤šæ¬¡é‡è¯•çš„æœºåˆ¶ä¿è¯æ¶ˆæ¯æ­£å¸¸å‘é€åˆ° Brokerã€‚ç”Ÿäº§è€…å‘é€æ¶ˆæ¯åï¼Œéœ€è¦ç¡®è®¤ Broker æ˜¯å¦æˆåŠŸæ¥æ”¶å¹¶æŒä¹…åŒ–æ¶ˆæ¯ï¼Œæ ¸å¿ƒä¾èµ– Broker çš„å“åº”ç»“æœï¼Œä¸åŒå‘é€æ¨¡å¼çš„ç¡®è®¤æ–¹å¼ä¸åŒã€‚æ¶ˆæ¯ç”Ÿäº§è€…çš„ 3 ç§æ¶ˆæ¯å‘é€æ–¹æ³•ï¼šåŒæ­¥å‘é€ã€å¼‚æ­¥å‘é€ã€å•å‘å‘é€ï¼ˆ3 ç§ç®€å•ä»£ç ä¸Šæ–‡å‡æœ‰æåŠï¼‰ã€‚</p>
<h5 data-id="heading-5">2.1.1 å‘é€æ¨¡å¼ä¸ç¡®è®¤é€»è¾‘</h5>

























<table><thead><tr><th align="center">æ–¹å¼</th><th>ç¡®è®¤æ–¹å¼</th><th>åœºæ™¯</th></tr></thead><tbody><tr><td align="center">åŒæ­¥å‘é€</td><td>ç”Ÿäº§è€…é˜»å¡ç­‰å¾… Broker è¿”å›<code>SendResult</code>ï¼Œé€šè¿‡<code>SendStatus.SEND_OK</code>åˆ¤æ–­æ˜¯å¦æˆåŠŸ</td><td>æ ¸å¿ƒä¸šåŠ¡ï¼ˆå¦‚äº¤æ˜“ã€æ”¯ä»˜ï¼‰ï¼Œå¿…é¡»ç¡®ä¿æ¶ˆæ¯æŠ•é€’æˆåŠŸ</td></tr><tr><td align="center">å¼‚æ­¥å‘é€</td><td>é€šè¿‡<code>SendCallback</code>å›è°ƒå‡½æ•°æ¥æ”¶ç»“æœï¼š<code>onSuccess</code>è¡¨ç¤ºæˆåŠŸï¼Œ<code>onException</code>è¡¨ç¤ºå¤±è´¥</td><td>é«˜å¹¶å‘åœºæ™¯ï¼Œæ— éœ€é˜»å¡ç­‰å¾…ç»“æœ</td></tr><tr><td align="center">å•å‘å‘é€</td><td>åªå‘é€æ¶ˆæ¯ï¼Œä¸ç­‰å¾… Broker å“åº”ï¼Œæ— ç¡®è®¤æœºåˆ¶</td><td>éæ ¸å¿ƒä¸šåŠ¡ï¼ˆå¦‚æ—¥å¿—é‡‡é›†ï¼‰ï¼Œå…è®¸å°‘é‡ä¸¢å¤±</td></tr></tbody></table>
<p>Broker ç«¯çš„åˆ·ç›˜ / å¤åˆ¶ç­–ç•¥ä¼šå½±å“ç¡®è®¤çš„å¯é æ€§ï¼š</p>
<ul>
<li><strong>åˆ·ç›˜ç­–ç•¥</strong>ï¼šåŒæ­¥åˆ·ç›˜ï¼ˆæ¶ˆæ¯å†™å…¥åç«‹å³åˆ·ç£ç›˜ï¼Œç¡®è®¤æ…¢ä½†å¯é ï¼‰ã€å¼‚æ­¥åˆ·ç›˜ï¼ˆé»˜è®¤ï¼Œå†™å…¥å†…å­˜åç«‹å³è¿”å›ç¡®è®¤ï¼Œæ€§èƒ½é«˜ï¼‰ï¼›</li>
<li><strong>ä¸»ä»å¤åˆ¶</strong>ï¼šåŒæ­¥å¤åˆ¶ï¼ˆä¸» Broker éœ€ç­‰å¾…ä» Broker åŒæ­¥å®Œæˆå†ç¡®è®¤ï¼‰ã€å¼‚æ­¥å¤åˆ¶ï¼ˆé»˜è®¤ï¼Œä¸» Broker å†™å…¥åç›´æ¥ç¡®è®¤ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-6">2.1.2 å•å‘å‘é€</h5>
<p>å•å‘å‘é€çš„æƒ…å†µä¸‹ï¼Œç”Ÿäº§è€…åªç®¡å¾€ Broker å‘é€æ¶ˆæ¯ï¼Œå¹¶ä¸å…³å¿ƒ Broker ç«¯æ˜¯å¦æœ‰æ¥æ”¶åˆ°ã€‚</p>
<pre><code class="hljs language-shell" lang="shell">// å•å‘å‘é€ï¼ˆæ— ç¡®è®¤ï¼‰
producer.sendOneway(message);
</code></pre>
<p><code>sendOneway</code>æ–¹å¼å‘é€æ¶ˆæ¯æœ‰ä¸ªå¥½å¤„å°±æ˜¯æ•ˆç‡é«˜ï¼Œä½†æ˜¯å¦‚æœ Broker æ²¡æ”¶åˆ°çš„æ—¶å€™æ˜¯æ— æ³•è¡¥æ•‘çš„ï¼Œé€‚ç”¨æ—¥å¿—é‡‡é›†è¿™ç§å½¢å¼ã€‚</p>
<h5 data-id="heading-7">2.1.3 åŒæ­¥å‘é€</h5>
<p>åŒæ­¥å‘é€ä¹‹åä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œç­‰å¾… Broker å“åº”ï¼Œç›´åˆ°å¾—åˆ°å“åº”ï¼Œå¼€å‘å¯ä»¥é€šè¿‡è·å–çš„ç»“æœå»åšå…¶ä»–å¤„ç†ï¼Œå¦‚æœå‘é€å¤±è´¥å¯ä»¥è¿›è¡Œè¡¥æ•‘ï¼Œæ¯”å¦‚é‡å‘æˆ–è€…å‘Šè­¦ä¹‹ç±»ã€‚</p>
<pre><code class="hljs language-shell" lang="shell">// åŒæ­¥å‘é€ï¼ˆæœ‰ç¡®è®¤ï¼‰
SendResult sendResult = producer.send(message);
System.out.println("å‘é€çŠ¶æ€ï¼š" + sendResult.getSendStatus()); // SEND_OK
</code></pre>
<p>SendResult æ˜¯ Broker è¿”å›çš„ä¿¡æ¯ï¼Œå¯ä»¥æŸ¥çœ‹çŠ¶æ€æ˜¯å¦æˆåŠŸã€‚é‡Œé¢æœ‰ <code>SendStatus</code>ï¼Œç”¨æ¥è¡¨ç¤ºå‘é€çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">SendStatus</span> {
    SEND_OK,
    FLUSH_DISK_TIMEOUT,
    FLUSH_SLAVE_TIMEOUT,
    SLAVE_NOT_AVAILABLE;

    <span class="hljs-keyword">private</span> <span class="hljs-title function_">SendStatus</span><span class="hljs-params">()</span> {
    }
}
</code></pre>
<p>è¿™ä¸ªæšä¸¾çš„è¯´æ˜å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>SEND_OK</strong>: å‘é€æˆåŠŸï¼Œæ¶ˆæ¯å·²æŒä¹…åŒ–åˆ°Broker</li>
<li><strong>FLUSH_DISK_TIMEOUT</strong>: åˆ·ç›˜è¶…æ—¶ï¼ˆåŒæ­¥åˆ·ç›˜æ¨¡å¼ï¼‰</li>
<li><strong>FLUSH_SLAVE_TIMEOUT</strong>: åŒæ­¥åˆ°Slaveè¶…æ—¶ï¼ˆä¸»ä»æ¨¡å¼ï¼‰</li>
<li><strong>SLAVE_NOT_AVAILABLE</strong>: Slaveä¸å¯ç”¨</li>
</ul>
<blockquote>
<p>ä½†æ˜¯æ­¤æ—¶è¦æ³¨æ„ï¼Œå¦‚æœBrokerç«¯è¿”å›çš„SendStatusä¸æ˜¯SEND_OKï¼Œä¹Ÿå¹¶ä¸è¡¨ç¤ºæ¶ˆæ¯å°±â¼€å®šä¸ä¼šæ¨é€ç»™ä¸‹æ¸¸çš„æ¶ˆè´¹è€…ã€‚ä»…ä»…åªæ˜¯è¡¨ç¤ºBrokerç«¯å¹¶æ²¡æœ‰å®Œå…¨æ­£ç¡®çš„å¤„ç†è¿™äº›æ¶ˆæ¯ã€‚å› æ­¤ï¼Œå¦‚æœè¦é‡æ–°å‘é€æ¶ˆæ¯ï¼Œæœ€å¥½è¦å¸¦ä¸Šå”¯â¼€çš„ç³»ç»Ÿæ ‡è¯†ï¼Œè¿™æ ·åœ¨æ¶ˆè´¹è€…ç«¯ï¼Œæ‰èƒ½â¾ƒâ¾åšå¹‚ç­‰åˆ¤æ–­ã€‚ä¹Ÿå°±æ˜¯â½¤å…·æœ‰ä¸šåŠ¡å«ä¹‰çš„OrderIDè¿™æ ·çš„å­—æ®µæ¥åˆ¤æ–­æ¶ˆæ¯æœ‰æ²¡æœ‰è¢«é‡å¤å¤„ç†ã€‚</p>
</blockquote>
<p>åŒæ­¥çš„å¯èƒ½ä¼šå¯¼è‡´å‘é€è€—æ—¶æ¯”è¾ƒé•¿ï¼Œå½±å“åç»­é€»è¾‘ã€‚</p>
<h5 data-id="heading-8">2.1.4 å¼‚æ­¥å‘é€</h5>
<p>å¼‚æ­¥å‘é€æœºåˆ¶ä¸‹ï¼Œâ½£äº§è€…åœ¨å‘Brokerå‘é€æ¶ˆæ¯æ—¶ï¼Œä¼šåŒæ—¶æ³¨å†Œâ¼€ä¸ªå›è°ƒå‡½æ•°ã€‚æ¥ä¸‹æ¥â½£äº§è€…å¹¶ä¸ç­‰å¾…Brokerçš„å“åº”ã€‚å½“Brokerç«¯æœ‰å“åº”æ•°æ®è¿‡æ¥æ—¶ï¼Œâ¾ƒåŠ¨è§¦å‘å›è°ƒå‡½æ•°è¿›â¾å¯¹åº”çš„å¤„ç†ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//  å¼‚æ­¥å‘é€ï¼ˆå›è°ƒç¡®è®¤ï¼‰</span>
producer.send(message, <span class="hljs-keyword">new</span> <span class="hljs-title class_">SendCallback</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(SendResult sendResult)</span> {
        <span class="hljs-comment">// å‘é€æˆåŠŸå›è°ƒ</span>
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onException</span><span class="hljs-params">(Throwable e)</span> {
        <span class="hljs-comment">// å‘é€å¤±è´¥å›è°ƒ</span>
    }
});
</code></pre>
<p>è¿™ä¸ªå›è°ƒå‡½æ•°æ˜¯ç”¨æ¥å¤„ç†æˆåŠŸä¸å¤±è´¥çš„é€»è¾‘ï¼Œå¦‚æœå¤±è´¥äº†ï¼Œå°±ä¼šæ‰§è¡Œ <code>onException</code>ä»£ç é€»è¾‘ï¼Œå¯ä»¥åœ¨è¿™é‡Œå®šä¹‰å¯¹åº”çš„è¡¥æ•‘æªæ–½ã€‚</p>
<blockquote>
<p>æ³¨ï¼šè§¦å‘äº†SendCallbackçš„onExceptionâ½…æ³•åŒæ ·å¹¶ä¸â¼€å®šå°±è¡¨ç¤ºæ¶ˆæ¯ä¸ä¼šå‘æ¶ˆè´¹è€…æ¨</p>
<p>é€ã€‚å¦‚æœBrokerç«¯è¿”å›å“åº”ä¿¡æ¯å¤ªæ…¢ï¼Œè¶…è¿‡äº†è¶…æ—¶æ—¶é—´ï¼Œä¹Ÿä¼šè§¦å‘ <strong>onException</strong> æ–¹æ³•ã€‚</p>
<p>è¶…æ—¶é»˜è®¤æ˜¯ 3 ç§’ï¼Œé€šè¿‡ <strong>producer.setSendMsgTimeout</strong> å¯ä»¥ä¿®æ”¹ã€‚</p>
</blockquote>
<h4 data-id="heading-9">2.2 æ¶ˆè´¹è€…ç«¯çŠ¶æ€ç¡®è®¤æœºåˆ¶</h4>
<p>æ¶ˆè´¹è€…ç«¯é‡‡ç”¨çŠ¶æ€ç¡®è®¤æœºåˆ¶ä¿è¯æ¶ˆè´¹è€…â¼€å®šèƒ½æ­£å¸¸å¤„ç†å¯¹åº”çš„æ¶ˆæ¯ã€‚æ¶ˆè´¹è€…çš„ç¡®è®¤æœºåˆ¶æ ¸å¿ƒæ˜¯ <strong>æ¶ˆè´¹åç§»é‡ï¼ˆOffsetï¼‰çš„æäº¤</strong> â€”â€”Offset è¡¨ç¤ºæ¶ˆè´¹è€…æ¶ˆè´¹åˆ°é˜Ÿåˆ—çš„å“ªä¸ªä½ç½®ï¼ŒBroker é€šè¿‡ Offset åˆ¤æ–­æ¶ˆæ¯æ˜¯å¦å·²è¢«æ¶ˆè´¹ã€‚ä¹Ÿå°±æ˜¯æ¶ˆè´¹è€…ä¼šè¿”å›ç»“æœç»™ Brokerï¼ŒBrokerç­‰å¾…æ¶ˆè´¹è€…è¿”å›æ¶ˆæ¯å¤„ç†çŠ¶æ€ã€‚</p>
<h5 data-id="heading-10">2.2.1 è‡ªåŠ¨ç¡®è®¤</h5>
<p>åŸç†ï¼šæ¶ˆè´¹çº¿ç¨‹å¤„ç†æ¶ˆæ¯æ—¶å¦‚æœ<strong>æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸</strong>ï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨å‘ Broker æäº¤ Offsetï¼ŒBroker æ ‡è®°æ¶ˆæ¯å·²æ¶ˆè´¹ï¼›å¦‚æœæŠ›å‡ºå¼‚å¸¸ï¼Œä¸æäº¤ Offsetï¼ŒBroker ä¼šé‡è¯•è¯¥æ¶ˆæ¯ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šæ‰¹é‡æ¶ˆè´¹æ—¶ï¼Œåªè¦æœ‰ä¸€æ¡æ¶ˆæ¯æ¶ˆè´¹å¤±è´¥ï¼Œæ•´ä¸ªæ‰¹æ¬¡çš„ Offset éƒ½ä¸ä¼šæäº¤ï¼Œä¼šé‡è¯•æ•´ä¸ªæ‰¹æ¬¡ã€‚</p>
</blockquote>
<p>ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// PushConsumer - è‡ªåŠ¨ç¡®è®¤ï¼ˆé»˜è®¤ï¼‰</span>
<span class="hljs-type">DefaultMQPushConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultMQPushConsumer</span>(<span class="hljs-string">"group"</span>);
consumer.registerMessageListener((MessageListenerConcurrently) (msgs, context) -&gt; {
    <span class="hljs-comment">// ä¸šåŠ¡å¤„ç†</span>
    <span class="hljs-keyword">for</span> (MessageExt msg : msgs) {
        System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(msg.getBody()));
    }
    <span class="hljs-comment">// è‡ªåŠ¨è¿”å›CONSUME_SUCCESS</span>
    <span class="hljs-keyword">return</span> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;
});
</code></pre>
<h5 data-id="heading-11">2.2.2 æ‰‹åŠ¨ç¡®è®¤</h5>
<p>é€‚ç”¨äºéœ€è¦ç²¾å‡†æ§åˆ¶ç¡®è®¤æ—¶æœºçš„åœºæ™¯ï¼ˆå¦‚æ¶ˆæ¯æ¶ˆè´¹åéœ€å†™å…¥æ•°æ®åº“ï¼Œéœ€ç¡®ä¿æ•°æ®åº“å†™å…¥æˆåŠŸå†ç¡®è®¤ï¼‰ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ‰‹åŠ¨ç¡®è®¤ç¤ºä¾‹</span>
consumer.registerMessageListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageListenerConcurrently</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ConsumeConcurrentlyStatus <span class="hljs-title function_">consumeMessage</span><span class="hljs-params">(
        List&lt;MessageExt&gt; msgs, 
        ConsumeConcurrentlyContext context
    )</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä¸šåŠ¡å¤„ç†</span>
            processMessages(msgs);
            <span class="hljs-comment">// æ‰‹åŠ¨ç¡®è®¤æˆåŠŸ</span>
            <span class="hljs-keyword">return</span> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// è¿”å›å¤±è´¥ï¼Œç¨åé‡è¯•</span>
            <span class="hljs-keyword">return</span> ConsumeConcurrentlyStatus.RECONSUME_LATER;
        }
    }
});
</code></pre>
<h5 data-id="heading-12">2.2.3 ç¡®è®¤æ¶ˆæ¯çš„å…³é”®</h5>
<p>è¿™ä¸ªè¿”å›å€¼æ˜¯â¼€ä¸ªæšä¸¾å€¼ï¼Œæœ‰ä¸¤ä¸ªé€‰é¡¹ CONSUME_SUCCESS å’Œ RECONSUME_LATERã€‚å¦‚æœæ¶ˆè´¹è€…è¿”å› CONSUME_SUCCESSï¼Œé‚£ä¹ˆæ¶ˆæ¯è‡ªç„¶å°±å¤„ç†ç»“æŸäº†ã€‚ä½†æ˜¯å¦‚æœæ¶ˆè´¹è€…æ²¡æœ‰å¤„ç†æˆåŠŸï¼Œè¿”å›çš„æ˜¯ RECONSUME_LATERï¼ŒBroker å°±ä¼šè¿‡â¼€æ®µæ—¶é—´å†å‘èµ·æ¶ˆæ¯é‡è¯•ã€‚</p>
<p>æ¶ˆè´¹çŠ¶æ€å¦‚ä¸‹ï¼š</p>
<ul>
<li>CONSUME_SUCCESS: æ¶ˆè´¹æˆåŠŸï¼Œæ¶ˆæ¯å°†è¢«åˆ é™¤</li>
<li>RECONSUME_LATER: æ¶ˆè´¹å¤±è´¥ï¼Œç¨åé‡è¯•</li>
</ul>
<p>æ€»çš„æ¥è¯´å°±æ˜¯å¦‚ä¸‹å‡ ç‚¹</p>
<ul>
<li><strong>é‡è¯•æœºåˆ¶</strong>ï¼šæœªç¡®è®¤çš„æ¶ˆæ¯ä¼šè¿›å…¥é‡è¯•é˜Ÿåˆ—ï¼ˆ<code>%RETRY%+æ¶ˆè´¹ç»„å</code>ï¼‰ï¼Œé»˜è®¤é‡è¯• 16 æ¬¡ï¼Œè¶…è¿‡æ¬¡æ•°è¿›å…¥æ­»ä¿¡é˜Ÿåˆ—ï¼ˆ<code>%DLQ%+æ¶ˆè´¹ç»„å</code>ï¼‰ï¼›</li>
<li><strong>Offset å­˜å‚¨</strong>ï¼šBroker å°†æ¶ˆè´¹ç»„ - é˜Ÿåˆ—çš„ Offset å­˜å‚¨åœ¨å†…ç½®ä¸»é¢˜<code>consumerOffse</code>ä¸­ï¼Œå³ä½¿æ¶ˆè´¹è€…é‡å¯ä¹Ÿèƒ½æ¢å¤æ¶ˆè´¹è¿›åº¦ï¼›</li>
<li><strong>é¡ºåºæ¶ˆè´¹ç¡®è®¤</strong>ï¼šé¡ºåºæ¶ˆè´¹é»˜è®¤æ˜¯ â€œæ‰‹åŠ¨ç¡®è®¤å˜ç§â€ï¼Œé€šè¿‡åŠ é”æœºåˆ¶ä¿è¯æ¶ˆè´¹é¡ºåºï¼Œåªæœ‰å½“å‰æ¶ˆæ¯ç¡®è®¤åæ‰ä¼šæ¶ˆè´¹ä¸‹ä¸€æ¡ã€‚</li>
</ul>
<h4 data-id="heading-13">2.3 æ¶ˆè´¹è€…ç«¯è‡ªè¡ŒæŒ‡å®šæ¶ˆè´¹ç‚¹</h4>
<p>Broker ç«¯é€šè¿‡ Consumer è¿”å›çš„çŠ¶æ€æ¥æ¨è¿›æ‰€å±æ¶ˆè´¹è€…ç»„å¯¹åº”çš„ Offsetã€‚RocketMQ å¯ä»¥è®©æ¶ˆè´¹è€…è‡ªè¡Œå®šä¹‰ï¼Œé€šè¿‡è®¾ç½® ConsumeFromWhere ä¸ ConsumeTimestamp æ¥è®¾ç½®æ¶ˆè´¹èµ·å§‹ä½ç½®ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">DefaultMQPushConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultMQPushConsumer</span>(<span class="hljs-string">"group"</span>);

<span class="hljs-comment">// æ–¹æ³•1ï¼šä»æŒ‡å®šæ—¶é—´ç‚¹å¼€å§‹æ¶ˆè´¹</span>
consumer.setConsumeTimestamp(<span class="hljs-string">"20260101000000"</span>); <span class="hljs-comment">// æ ¼å¼ï¼šyyyyMMddHHmmss</span>

<span class="hljs-comment">// æ–¹æ³•2ï¼šæŒ‡å®šæ¶ˆè´¹èµ·å§‹ä½ç½®ç­–ç•¥</span>
consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_FIRST_OFFSET); <span class="hljs-comment">// ä»æœ€æ—©å¼€å§‹</span>
consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_LAST_OFFSET);   <span class="hljs-comment">// ä»æœ€æ–°å¼€å§‹</span>
consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_TIMESTAMP);    <span class="hljs-comment">// ä»æŒ‡å®šæ—¶é—´å¼€å§‹</span>
</code></pre>
<p>ConsumeFromWhereï¼šæ¶ˆè´¹ä½ç½®ç­–ç•¥æšä¸¾</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">ConsumeFromWhere</span> {
    CONSUME_FROM_LAST_OFFSET,      <span class="hljs-comment">// ä»é˜Ÿåˆ—çš„ç¬¬â¼€æ¡æ¶ˆæ¯å¼€å§‹é‡æ–°æ¶ˆè´¹</span>
    CONSUME_FROM_FIRST_OFFSET,     <span class="hljs-comment">// ä»ä¸Šæ¬¡æ¶ˆè´¹åˆ°çš„åœ°â½…å¼€å§‹ç»§ç»­æ¶ˆè´¹</span>
    CONSUME_FROM_TIMESTAMP         <span class="hljs-comment">// ä»æŸâ¼€ä¸ªæ—¶é—´ç‚¹å¼€å§‹é‡æ–°æ¶ˆè´¹</span>
}
</code></pre>
<p>å¦‚æœé€šè¿‡æ—¶é—´ç‚¹æ¥æŒ‡å®šæ¶ˆè´¹ï¼Œéœ€è¦æŒ‡å®šæ—¶é—´ç‚¹ï¼Œè¿™ä¸ªæ—¶é—´ç‚¹çš„æ ¼å¼ï¼š<code>yyyyMMddHHmmss</code>ã€‚</p>
<h3 data-id="heading-14">3 å¹¿æ’­æ¶ˆæ¯</h3>
<p>åœ¨ rocketmq ä¸­ï¼Œä¸»è¦æœ‰ä¸¤ç§æ¶ˆæ¯çš„æ¶ˆè´¹æ¨¡å¼ï¼Œä¸€ç§æ˜¯é›†ç¾¤æ¶ˆè´¹ï¼Œå¦ä¸€ç§æ˜¯å¹¿æ’­æ¶ˆè´¹ã€‚</p>
<ol>
<li><strong>é›†ç¾¤æ¶ˆè´¹ï¼ˆClusteringï¼‰</strong>ï¼šé»˜è®¤æ¨¡å¼ã€‚åŒä¸€æ¡æ¶ˆæ¯åªä¼šè¢«<strong>åŒä¸€ä¸ªæ¶ˆè´¹è€…ç»„ï¼ˆConsumer Groupï¼‰</strong> ä¸­çš„<strong>ä¸€ä¸ª</strong>æ¶ˆè´¹è€…æ¶ˆè´¹ã€‚å…¶è®¾è®¡ç›®æ ‡æ˜¯å®ç°è´Ÿè½½å‡è¡¡å’Œé«˜å¯ç”¨ï¼Œå¤šä¸ªæ¶ˆè´¹è€…å…±åŒåˆ†æ‹…æ¶ˆæ¯å¤„ç†ä»»åŠ¡ã€‚</li>
<li><strong>å¹¿æ’­æ¶ˆè´¹ï¼ˆBroadcastingï¼‰</strong>ï¼šåŒä¸€æ¡æ¶ˆæ¯ä¼šè¢«<strong>åŒä¸€ä¸ªæ¶ˆè´¹è€…ç»„ä¸­çš„æ¯ä¸€ä¸ª</strong>æ¶ˆè´¹è€…æ¶ˆè´¹ä¸€æ¬¡ã€‚å…¶è®¾è®¡ç›®æ ‡æ˜¯è®©å¤šä¸ªè®¢é˜…è€…éƒ½æ¥æ”¶åˆ°å®Œæ•´çš„æ¶ˆæ¯æµã€‚</li>
</ol>
<p>é›†ç¾¤æ¨¡å¼ä¸‹ï¼Œâ¼€ä¸ªæ¶ˆæ¯ï¼Œåªä¼šè¢«â¼€ä¸ªæ¶ˆè´¹è€…ç»„ä¸­çš„å¤šä¸ªæ¶ˆè´¹è€…å®ä¾‹å…±åŒå¤„ç†â¼€æ¬¡ã€‚â¼´æ’­æ¨¡å¼ä¸‹ï¼Œâ¼€ä¸ªæ¶ˆæ¯ï¼Œåˆ™ä¼šæ¨é€ç»™æ‰€æœ‰æ¶ˆè´¹è€…å®ä¾‹å¤„ç†ï¼Œä¸å†å…³â¼¼æ¶ˆè´¹è€…ç»„ã€‚</p>
<h4 data-id="heading-15">3.1 ç®€å•ä»£ç </h4>
<p>JavaAPI ä»£ç </p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ï¼ï¼ï¼å…³é”®è®¾ç½®ï¼šå°†æ¶ˆè´¹æ¨¡å¼è®¾ç½®ä¸ºå¹¿æ’­æ¨¡å¼ ï¼ï¼ï¼</span>
consumer.setMessageModel(MessageModel.BROADCASTING);
</code></pre>
<p>æ¶ˆæ¯æ¨¡å‹æšä¸¾æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯é›†ç¾¤å’Œå¹¿æ’­</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">MessageModel</span> {
    BROADCASTING(<span class="hljs-string">"BROADCASTING"</span>),
    CLUSTERING(<span class="hljs-string">"CLUSTERING"</span>);
    <span class="hljs-comment">// ....</span>
}
</code></pre>
<blockquote>
<p><strong>å®ç°æ€è·¯</strong></p>
<p>é»˜è®¤æ¨¡å¼(ä¹Ÿå°±æ˜¯é›†ç¾¤æ¨¡å¼)ä¸‹ï¼ŒBrokerç«¯ä¼šç»™æ¯ä¸ªConsumerGroupç»´æŠ¤â¼€ä¸ªç»Ÿâ¼€çš„Offsetï¼Œè¿™æ ·ï¼Œå½“Consumeræ¥æ‹‰å–æ¶ˆæ¯æ—¶ï¼Œå°±å¯ä»¥é€šè¿‡Offsetä¿è¯â¼€ä¸ªæ¶ˆæ¯ï¼Œåœ¨åŒâ¼€ä¸ªConsumerGroupå†…åªä¼šè¢«æ¶ˆè´¹â¼€æ¬¡ã€‚â½½â¼´æ’­æ¨¡å¼çš„æœ¬è´¨ï¼Œæ˜¯å°†Offsetè½¬ç§»åˆ°Consumerç«¯â¾ƒâ¾ä¿ç®¡ï¼ŒåŒ…æ‹¬Offsetçš„è®°å½•ä»¥åŠæ›´æ–°ï¼Œå…¨éƒ½æ”¾åˆ°å®¢æˆ·ç«¯ã€‚è¿™æ ·Brokeræ¨é€æ¶ˆæ¯æ—¶ï¼Œå°±ä¸å†ç®¡ConsumerGroupï¼Œåªè¦Consumeræ¥æ‹‰å–æ¶ˆæ¯ï¼Œå°±è¿”å›å¯¹åº”çš„æ¶ˆæ¯ã€‚</p>
</blockquote>
<h4 data-id="heading-16">3.2 å·¥ä½œåŸç†</h4>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ªæ¶ˆè´¹è€…ç»„ <code>MyConsumerGroup</code>ï¼Œå®ƒä¸‹é¢æœ‰ä¸‰ä¸ªæ¶ˆè´¹è€…å®ä¾‹ <code>C1</code>ï¼Œ <code>C2</code>ï¼Œ <code>C3</code>ï¼Œå®ƒä»¬éƒ½è®¢é˜…äº†ä¸»é¢˜ <code>MyTopic</code>ã€‚</p>
<ul>
<li><strong>åœ¨é›†ç¾¤æ¨¡å¼ä¸‹</strong>ï¼šä¸»é¢˜ <code>MyTopic</code> ä¸‹çš„10æ¡æ¶ˆæ¯ä¼šä»¥è´Ÿè½½å‡è¡¡çš„æ–¹å¼ï¼ˆé»˜è®¤ä¸ºè½®è¯¢ï¼‰å¹³å‡åˆ†é…ç»™ <code>C1</code>ï¼Œ <code>C2</code>ï¼Œ <code>C3</code> æ¶ˆè´¹ã€‚æ¯ä¸ªæ¶ˆæ¯åªä¼šè¢«å…¶ä¸­ä¸€ä¸ªå®ä¾‹æ¶ˆè´¹ã€‚</li>
<li><strong>åœ¨å¹¿æ’­æ¨¡å¼ä¸‹</strong>ï¼šä¸»é¢˜ <code>MyTopic</code> ä¸‹çš„æ¯ä¸€æ¡æ¶ˆæ¯ï¼Œéƒ½ä¼šå®Œæ•´åœ°å‘é€ç»™ <code>C1</code>ï¼Œ <code>C2</code>ï¼Œ <code>C3</code> <strong>å„ä¸€ä»½</strong>ã€‚æ¯ä¸ªæ¶ˆè´¹è€…å®ä¾‹éƒ½ä¼šç‹¬ç«‹æ¶ˆè´¹è¿™10æ¡æ¶ˆæ¯ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java">é›†ç¾¤æ¨¡å¼ (è´Ÿè½½å‡è¡¡)        å¹¿æ’­æ¨¡å¼ (å…¨é‡å¤åˆ¶)
  Msg1 -&gt; [C1]                Msg1 -&gt; [C1]
  Msg2 -&gt; [C2]                Msg2 -&gt; [C1]
  Msg3 -&gt; [C3]      VS        Msg3 -&gt; [C1]
  Msg4 -&gt; [C1]                ... (ä»¥æ­¤ç±»æ¨ï¼Œæ¯æ¡æ¶ˆæ¯)
                              Msg1 -&gt; [C2]
                              Msg2 -&gt; [C2]
                              ...
                              Msg1 -&gt; [C3]
                              Msg2 -&gt; [C3]
                              ...
</code></pre>
<h4 data-id="heading-17">3.3 æ³¨æ„äº‹é¡¹</h4>
<ol>
<li><strong>æ¶ˆè´¹è¿›åº¦ï¼ˆOffsetï¼‰ç®¡ç†</strong>ï¼š
<ul>
<li><strong>é›†ç¾¤æ¨¡å¼</strong>ï¼šæ¶ˆè´¹è¿›åº¦ç”±Brokerç«¯é›†ä¸­å­˜å‚¨å’Œç®¡ç†ï¼ˆæ–°ç‰ˆï¼‰ï¼Œæ‰€æœ‰æ¶ˆè´¹è€…å®ä¾‹å…±äº«åŒä¸€ä»½è¿›åº¦ã€‚å¦‚æœ <code>C1</code> æ¶ˆè´¹äº† <code>Msg1</code>ï¼Œæ•´ä¸ªç»„å°±è®¤ä¸º <code>Msg1</code> å·²è¢«æ¶ˆè´¹ã€‚</li>
<li><strong>å¹¿æ’­æ¨¡å¼</strong>ï¼š<strong>æ¶ˆè´¹è¿›åº¦å­˜å‚¨åœ¨æ¶ˆè´¹è€…å®ä¾‹æœ¬åœ°</strong>ï¼ˆä¾‹å¦‚æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼‰ã€‚æ¯ä¸ªå®ä¾‹ç‹¬ç«‹ç»´æŠ¤è‡ªå·±çš„æ¶ˆè´¹è¿›åº¦ï¼Œäº’ä¸å½±å“ã€‚<code>C1</code> æ¶ˆè´¹åˆ°å“ªé‡Œï¼Œä¸ <code>C2</code>ã€<code>C3</code> å®Œå…¨æ— å…³ã€‚è¿™æ„å‘³ç€å¦‚æœ <code>C1</code> å®ä¾‹é‡å¯ï¼Œå®ƒä¼šä»è‡ªå·±æœ¬åœ°çš„è®°å½•å¼€å§‹æ¶ˆè´¹ï¼Œè€Œä¸ä¼šä»å…¶ä»–å®ä¾‹çš„è¿›åº¦ç»§ç»­ã€‚</li>
</ul>
</li>
<li><strong>èµ„æºæ¶ˆè€—ä¸æ€§èƒ½</strong>ï¼š
<ul>
<li>å¹¿æ’­æ¨¡å¼ä¸‹ï¼Œç½‘ç»œæµé‡å’ŒBrokerçš„è´Ÿè½½ä¼šæˆå€å¢åŠ ï¼ˆä¸æ¶ˆè´¹è€…å®ä¾‹æ•°é‡æˆæ­£æ¯”ï¼‰ã€‚å‡è®¾æœ‰Nä¸ªå®ä¾‹ï¼Œæ¯æ¡æ¶ˆæ¯ç†è®ºä¸Šä¼šè¢«ä¼ è¾“Næ¬¡ã€‚</li>
<li>æ¯ä¸ªæ¶ˆè´¹è€…å®ä¾‹éƒ½è¦å¤„ç†å…¨é‡æ¶ˆæ¯ï¼Œå¯¹ä¸‹æ¸¸ä¸šåŠ¡ç³»ç»Ÿï¼ˆå¦‚æ•°æ®åº“ï¼‰å¯èƒ½é€ æˆé‡å¤å†™å…¥å‹åŠ›ï¼Œéœ€è¦ä¸šåŠ¡æ–¹è‡ªå·±å¤„ç†å¹‚ç­‰æ€§ã€‚</li>
</ul>
</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š
<ul>
<li><strong>ç¼“å­˜åˆ·æ–°/åŒæ­¥</strong>ï¼šå¤šä¸ªåº”ç”¨æœåŠ¡å™¨å®ä¾‹éœ€è¦åŒæ—¶åˆ·æ–°æœ¬åœ°ç¼“å­˜ï¼ˆå¦‚å•†å“ä¿¡æ¯å˜æ›´ã€é…ç½®æ›´æ–°ï¼‰ã€‚</li>
<li><strong>äº‹ä»¶é€šçŸ¥</strong>ï¼šä¸€ä¸ªäº‹ä»¶éœ€è¦è§¦å‘æ‰€æœ‰å¾®æœåŠ¡å®ä¾‹çš„æŸä¸ªåŠ¨ä½œï¼ˆå¦‚æ—¥å¿—æ¸…ç†ã€è¿æ¥é‡ç½®ï¼‰ã€‚</li>
<li><strong>æ•°æ®é•œåƒ</strong>ï¼šå¤šä¸ªå¼‚åœ°ç³»ç»Ÿéœ€è¦ç»´æŠ¤ä¸€ä»½ç›¸åŒçš„æ•°æ®å‰¯æœ¬ã€‚</li>
</ul>
</li>
<li><strong>ä¸é€‚ç”¨åœºæ™¯</strong>ï¼š
<ul>
<li><strong>éœ€è¦è´Ÿè½½åˆ†æ‹…å¤„ç†å¤§é‡æ¶ˆæ¯</strong>çš„åœºæ™¯ï¼ˆå¦‚è®¢å•å¤„ç†ã€æ—¥å¿—æ”¶é›†ï¼‰ã€‚æ­¤æ—¶åº”ä½¿ç”¨é›†ç¾¤æ¨¡å¼ã€‚</li>
<li>å¯¹æ¶ˆæ¯å¤„ç†æœ‰ä¸¥æ ¼çš„â€œåªå¤„ç†ä¸€æ¬¡â€è¦æ±‚ï¼Œä¸”ä¸å¸Œæœ›ä¸šåŠ¡å±‚åšå¤æ‚å¹‚ç­‰å¤„ç†çš„åœºæ™¯ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-18">4 è¿‡æ»¤æ¶ˆæ¯</h3>
<p>RocketMQ çš„è¿‡æ»¤æ¶ˆæ¯åŠŸèƒ½å…è®¸æ¶ˆè´¹è€…åªæ¥æ”¶å…¶æ„Ÿå…´è¶£çš„æ¶ˆæ¯ï¼Œè€Œä¸æ˜¯è®¢é˜…ä¸»é¢˜ä¸‹çš„æ‰€æœ‰æ¶ˆæ¯ã€‚è¿™åœ¨å¤šç§æ¶ˆè´¹è€…å¯¹åŒä¸€ä¸»é¢˜æœ‰ä¸åŒå…³æ³¨ç‚¹çš„åœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ã€‚</p>
<blockquote>
<p>å½“æˆ‘ä»¬ç›¸åŒçš„æ¨¡å—çš„æ¶ˆæ¯éƒ½æ”¾åˆ°åŒä¸€ä¸ª Topic ä¸­ï¼Œä½†æ˜¯ä¸åŒçš„ä¸šåŠ¡éœ€è¦æ ¹æ®ä¸åŒçš„éœ€æ±‚å»è·å–ä¸åŒçš„æ¶ˆæ¯ã€‚ä¾‹å¦‚ä»“å‚¨ç³»ç»Ÿï¼Œå…¥åº“å‡ºåº“æ¶ˆæ¯éƒ½æ˜¯åœ¨ä»“å‚¨çš„ Topic ä¸­ï¼Œä»“å‚¨ç³»ç»Ÿéœ€è¦è®°è´¦ï¼Œå°±æ ¹æ®æ‰€éœ€çš„æ¶ˆæ¯å»åšè¿›è´¦ä¸å‡ºè´¦ä¸šåŠ¡ã€‚</p>
</blockquote>
<p>RocketMQ çš„æ¶ˆæ¯è¿‡æ»¤æ˜¯åœ¨ Broker ç«¯æ‰§è¡Œçš„æ ¸å¿ƒæœºåˆ¶ï¼Œæ ¸å¿ƒæ˜¯é€šè¿‡Tag æ ‡ç­¾è¿‡æ»¤å’ŒSQL92 å±æ€§è¿‡æ»¤ä¸¤ç§æ–¹å¼ï¼Œè®©æ¶ˆè´¹è€…åªæ¥æ”¶ç¬¦åˆæ¡ä»¶çš„æ¶ˆæ¯ï¼Œå‡å°‘æ— æ•ˆç½‘ç»œä¼ è¾“ä¸æ¶ˆè´¹ç«¯å‹åŠ›ï¼Œè¿‡æ»¤åœ¨æœåŠ¡ç«¯å®Œæˆï¼Œéµå¾ª â€œåŒ¹é…å³æŠ•é€’â€ åŸåˆ™ã€‚</p>
<h4 data-id="heading-19">4.1 Tag è¿‡æ»¤</h4>
<p>åŸºäºæ¶ˆæ¯çš„ Tag æ ‡ç­¾è¿›è¡Œè¿‡æ»¤ï¼ŒTag æ˜¯æ¶ˆæ¯çš„å­åˆ†ç±»æ ‡è¯†ï¼Œæ¯ä¸ªæ¶ˆæ¯åªèƒ½æœ‰ä¸€ä¸ª Tagã€‚</p>
<p><strong>è¯­æ³•è§„åˆ™</strong></p>
<ul>
<li>å• Tag åŒ¹é…ï¼šå¦‚ "CREATE"ï¼Œåªæ¥æ”¶æ ‡ç­¾ä¸º CREATE çš„æ¶ˆæ¯ã€‚</li>
<li>å¤š Tag åŒ¹é…ï¼šå¤šä¸ª Tag é—´ç”¨ <code>||</code> åˆ†éš”ï¼ˆé€»è¾‘æˆ–ï¼‰ï¼Œå¦‚ "CREATE||PAY||CANCEL"ã€‚ï¼ˆä¸æ”¯æŒæ¨¡ç³ŠåŒ¹é…ï¼‰</li>
<li>å…¨åŒ¹é…ï¼šç”¨ <code>*</code> è¡¨ç¤ºæ¥æ”¶è¯¥ä¸»é¢˜ä¸‹æ‰€æœ‰æ¶ˆæ¯ã€‚</li>
</ul>
<p><strong>å®ç°åŸç†</strong></p>
<ol>
<li>ç”Ÿäº§è€…å‘é€æ¶ˆæ¯æ—¶ï¼ŒTag ä¼šè¢«è®¡ç®—å“ˆå¸Œå€¼å­˜å…¥ ConsumeQueueï¼ˆæ¶ˆæ¯æ¶ˆè´¹é€»è¾‘é˜Ÿåˆ—ï¼‰ã€‚</li>
<li>Broker è¿‡æ»¤æ—¶å…ˆé€šè¿‡ ConsumeQueue ä¸­çš„ Tag å“ˆå¸Œå€¼å¿«é€ŸåŒ¹é…ï¼Œå‘½ä¸­åå†æ ¡éªŒæ¶ˆæ¯åŸå§‹ Tag å­—ç¬¦ä¸²ï¼Œé¿å…å“ˆå¸Œå†²çªå¯¼è‡´è¯¯åŒ¹é…ã€‚</li>
<li>æ¶ˆè´¹ç«¯æ‹‰å–åˆ°æ¶ˆæ¯åï¼Œä¹Ÿä¼šäºŒæ¬¡æ ¡éªŒ Tag åŸå§‹å€¼ï¼Œç¡®ä¿è¿‡æ»¤å‡†ç¡®æ€§ã€‚</li>
</ol>
<p><strong>ä»£ç æ¡ˆä¾‹</strong></p>
<p>ç”Ÿäº§è€…ï¼Œå‘ Topic æ˜¯ <code>TopicTest</code> å‘é€ TagAã€TagBã€TagC ä¸‰ç§æ ‡ç­¾çš„æ¶ˆæ¯ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TagFilterProducer</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MESSAGE_COUNT</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">PRODUCER_GROUP</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Study1"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DEFAULT_NAMESRVADDR</span> <span class="hljs-operator">=</span> <span class="hljs-string">"192.168.109.134:9876"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TOPIC</span> <span class="hljs-operator">=</span> <span class="hljs-string">"TopicTest"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> List&lt;String&gt; TAGS = List.of(<span class="hljs-string">"TagA"</span>, <span class="hljs-string">"TagB"</span>, <span class="hljs-string">"TagC"</span>);

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> MQClientException, InterruptedException {
        <span class="hljs-comment">// åˆ›å»ºæ¶ˆè´¹è€…ï¼ŒæŒ‡å®šæ¶ˆè´¹ç»„</span>
        <span class="hljs-type">DefaultMQProducer</span> <span class="hljs-variable">producer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultMQProducer</span>(PRODUCER_GROUP);
        <span class="hljs-comment">// è®¾ç½®Nameserveråœ°å€</span>
        producer.setNamesrvAddr(DEFAULT_NAMESRVADDR);
        <span class="hljs-comment">// å¯åŠ¨ç”Ÿäº§è€…</span>
        producer.start();
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; MESSAGE_COUNT; i++) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// åˆ›å»ºæ¶ˆæ¯ä½“ï¼šè®¢é˜…ä¸»é¢˜ã€Tagã€æ¶ˆæ¯ä½“</span>
                <span class="hljs-type">Message</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Message</span>(TOPIC,
                        TAGS.get(i % TAGS.size()),
                        (<span class="hljs-string">"Hello RocketMQ "</span> + i).getBytes(RemotingHelper.DEFAULT_CHARSET)
                );
                <span class="hljs-comment">// å‘é€æ¶ˆæ¯</span>
                <span class="hljs-type">SendResult</span> <span class="hljs-variable">sendResult</span> <span class="hljs-operator">=</span> producer.send(msg, <span class="hljs-number">20</span> * <span class="hljs-number">1000</span>);
                System.out.printf(<span class="hljs-string">"%s%n"</span>, sendResult);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                e.printStackTrace();
                Thread.sleep(<span class="hljs-number">1000</span>);
            }
        }
        <span class="hljs-comment">// å…³é—­ç”Ÿäº§è€…ï¼Œé‡Šæ”¾èµ„æº</span>
        producer.shutdown();
    }
}
</code></pre>
<p><strong>è¿‡æ»¤æ¶ˆè´¹è€…</strong></p>
<p>é€šè¿‡æŒ‡å®š Tag è§„åˆ™è¿›è¡Œè¿‡æ»¤ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TagFilterConsumer</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">CONSUMER_GROUP</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Study1"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DEFAULT_NAMESRVADDR</span> <span class="hljs-operator">=</span> <span class="hljs-string">"192.168.109.134:9876"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TOPIC</span> <span class="hljs-operator">=</span> <span class="hljs-string">"TopicTest"</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> MQClientException {
        <span class="hljs-comment">// åˆ›å»ºæ¶ˆè´¹è€…ï¼ŒæŒ‡å®šæ¶ˆè´¹ç»„</span>
        <span class="hljs-type">DefaultMQPushConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultMQPushConsumer</span>(CONSUMER_GROUP);
        <span class="hljs-comment">// è®¾ç½®Nameserveråœ°å€</span>
        consumer.setNamesrvAddr(DEFAULT_NAMESRVADDR);
        <span class="hljs-comment">// å¦‚æœç‰¹å®šçš„æ¶ˆè´¹ç¾¤ä½“æ˜¯å…¨æ–°çš„ï¼Œè¯·æŒ‡å®šä»å“ªé‡Œå¼€å§‹</span>
        consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_FIRST_OFFSET);
        <span class="hljs-comment">// é…ç½®è®¢é˜…ä¸»é¢˜Topicã€Tag</span>
<span class="hljs-comment">//        consumer.subscribe(TOPIC, "*");</span>
<span class="hljs-comment">//        consumer.subscribe(TOPIC, "TagA");</span>
        consumer.subscribe(TOPIC, <span class="hljs-string">"TagA || TagB"</span>);
        <span class="hljs-comment">// è®¾ç½®å›è°ƒå‡½æ•°ï¼Œå¤„ç†æ¶ˆæ¯</span>
        consumer.registerMessageListener((MessageListenerConcurrently) (msg, context) -&gt; {
            System.out.printf(<span class="hljs-string">"%s Receive New Messages: %s %n"</span>, Thread.currentThread().getName(), msg);
            <span class="hljs-keyword">return</span> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;
        });
        <span class="hljs-comment">// å¯åŠ¨æ¶ˆè´¹è€…ï¼Œå¯åŠ¨åä¼šä¸€ç›´æŒ‚ç€ï¼ŒæŒç»­å¤„ç†æ¶ˆæ¯</span>
        consumer.start();
        System.out.printf(<span class="hljs-string">"Consumer Started.%n"</span>);
    }
}
</code></pre>
<p>è¿‡æ»¤å¯ä»¥è·å–å…¨éƒ¨çš„æ¶ˆæ¯ã€æŒ‡å®šå•ä¸ªçš„ Tag æˆ–è€…æŒ‡å®šå¤šä¸ª Tagã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é€šé…</span>
consumer.subscribe(TOPIC, <span class="hljs-string">"*"</span>);
<span class="hljs-comment">// å•ä¸ª</span>
consumer.subscribe(TOPIC, <span class="hljs-string">"TagA"</span>);
<span class="hljs-comment">// å¤šä¸ª</span>
consumer.subscribe(TOPIC, <span class="hljs-string">"TagA || TagB"</span>);
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šç®€å•çš„æ¶ˆæ¯åˆ†ç±»è¿‡æ»¤ï¼Œå¦‚è®¢å•åˆ›å»ºã€æ”¯ä»˜ã€å–æ¶ˆç­‰ä¸åŒç±»å‹æ¶ˆæ¯çš„åˆ†ç¦»ï¼Œé€‚åˆé«˜ååé‡åœºæ™¯ï¼Œæ€§èƒ½æŸè€—ä½ã€‚</p>
<h4 data-id="heading-20">4.2 SQL è¿‡æ»¤</h4>
<p>SQL è¿‡æ»¤æ˜¯åŸºäºæ¶ˆæ¯çš„è‡ªå®šä¹‰å±æ€§ï¼ˆkey-valueï¼‰è¿›è¡Œè¿‡æ»¤ï¼Œæ”¯æŒ SQL92 è¯­æ³•çš„å­é›†ï¼Œå¯å®ç°å¤æ‚æ¡ä»¶åŒ¹é…ï¼Œæ¯ä¸ªæ¶ˆæ¯å¯è®¾ç½®å¤šä¸ªå±æ€§<strong/>ã€‚</p>
<p><strong>æ”¯æŒè¯­æ³•å…ƒç´ </strong></p>
<ul>
<li>æ¯”è¾ƒè¿ç®—ç¬¦ï¼š<code>=</code>ã€<code>&lt;&gt;</code>ã€<code>&gt;</code>ã€<code>&gt;=</code>ã€<code>&lt;</code>ã€<code>&lt;=</code>ã€‚</li>
<li>é€»è¾‘è¿ç®—ç¬¦ï¼š<code>AND</code>ã€<code>OR</code>ã€<code>NOT</code>ã€‚</li>
<li>å¸¸é‡ï¼šå­—ç¬¦ä¸²ï¼ˆç”¨å•å¼•å·ï¼‰ã€æ•°å­—ã€<code>NULL</code>ã€‚</li>
<li>å‡½æ•°ï¼š<code>IN</code>ã€<code>LIKE</code>ã€<code>BETWEEN</code> ç­‰ã€‚</li>
<li>æ¨¡ç³ŠåŒ¹é…ï¼š<code>%</code> åŒ¹é…ä»»æ„ 0 ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ï¼Œ <code>_</code> åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦  ã€‚</li>
</ul>
<p><strong>å®ç°åŸç†</strong>ï¼šä¾èµ– rocketmq-filter æ¨¡å—æ„å»ºå¹¶æ‰§è¡Œ SQL è¡¨è¾¾å¼ï¼Œè¿‡æ»¤æ—¶éœ€è¯»å–æ¶ˆæ¯çš„å®Œæ•´å±æ€§è¿›è¡Œè®¡ç®—ï¼Œæ€§èƒ½ç•¥ä½äº Tag è¿‡æ»¤ï¼Œä½†çµæ´»æ€§æ›´é«˜ã€‚</p>
<p>æ¡ˆä¾‹ä»£ç </p>
<p>ç”Ÿäº§è€…è¿˜æ˜¯æŒ‡å®šæ ‡ç­¾ ABCï¼Œå¹¶ä¸”å¯ä»¥è‡ªå®šä¹‰å†™å…¥å±æ€§ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SQLFilterProducer</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MESSAGE_COUNT</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">PRODUCER_GROUP</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Study1"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DEFAULT_NAMESRVADDR</span> <span class="hljs-operator">=</span> <span class="hljs-string">"192.168.109.134:9876"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TOPIC</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SQLTopic"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> List&lt;String&gt; TAGS = List.of(<span class="hljs-string">"TagA"</span>, <span class="hljs-string">"TagB"</span>, <span class="hljs-string">"TagC"</span>);

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> MQClientException, InterruptedException {
        <span class="hljs-comment">// åˆ›å»ºæ¶ˆè´¹è€…ï¼ŒæŒ‡å®šæ¶ˆè´¹ç»„</span>
        <span class="hljs-type">DefaultMQProducer</span> <span class="hljs-variable">producer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultMQProducer</span>(PRODUCER_GROUP);
        <span class="hljs-comment">// è®¾ç½®Nameserveråœ°å€</span>
        producer.setNamesrvAddr(DEFAULT_NAMESRVADDR);
        <span class="hljs-comment">// å¯åŠ¨ç”Ÿäº§è€…</span>
        producer.start();
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; MESSAGE_COUNT; i++) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// åˆ›å»ºæ¶ˆæ¯ä½“ï¼šè®¢é˜…ä¸»é¢˜ã€Tagã€æ¶ˆæ¯ä½“</span>
                <span class="hljs-type">Message</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Message</span>(TOPIC,
                        TAGS.get(i % TAGS.size()),
                        (<span class="hljs-string">"Hello RocketMQ "</span> + i).getBytes(RemotingHelper.DEFAULT_CHARSET)
                );
                <span class="hljs-comment">// ç”Ÿäº§è€…å‘é€å¸¦è‡ªå®šä¹‰å±æ€§çš„æ¶ˆæ¯</span>
                msg.putUserProperty(<span class="hljs-string">"orderId"</span>, <span class="hljs-string">"123456"</span>);
                msg.putUserProperty(<span class="hljs-string">"qty"</span>, String.valueOf(<span class="hljs-number">10</span> + i));
                <span class="hljs-comment">// å‘é€æ¶ˆæ¯</span>
                <span class="hljs-type">SendResult</span> <span class="hljs-variable">sendResult</span> <span class="hljs-operator">=</span> producer.send(msg, <span class="hljs-number">20</span> * <span class="hljs-number">1000</span>);
                System.out.printf(<span class="hljs-string">"%s%n"</span>, sendResult);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                e.printStackTrace();
                Thread.sleep(<span class="hljs-number">1000</span>);
            }
        }
        <span class="hljs-comment">// å…³é—­ç”Ÿäº§è€…ï¼Œé‡Šæ”¾èµ„æº</span>
        producer.shutdown();
    }
}
</code></pre>
<p>æ¶ˆè´¹è€…é€šè¿‡ SQL è¿›è¡Œè¿‡æ»¤</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SQLFilterConsumer</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">CONSUMER_GROUP</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Study1"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DEFAULT_NAMESRVADDR</span> <span class="hljs-operator">=</span> <span class="hljs-string">"192.168.109.134:9876"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TOPIC</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SQLTopic"</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> MQClientException {
        <span class="hljs-comment">// åˆ›å»ºæ¶ˆè´¹è€…ï¼ŒæŒ‡å®šæ¶ˆè´¹ç»„</span>
        <span class="hljs-type">DefaultMQPushConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultMQPushConsumer</span>(CONSUMER_GROUP);
        <span class="hljs-comment">// è®¾ç½®Nameserveråœ°å€</span>
        consumer.setNamesrvAddr(DEFAULT_NAMESRVADDR);
        <span class="hljs-comment">// å¦‚æœç‰¹å®šçš„æ¶ˆè´¹ç¾¤ä½“æ˜¯å…¨æ–°çš„ï¼Œè¯·æŒ‡å®šä»å“ªé‡Œå¼€å§‹</span>
        consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_FIRST_OFFSET);
        <span class="hljs-comment">// é…ç½®è®¢é˜…ä¸»é¢˜Topicã€SQL</span>
        consumer.subscribe(TOPIC,
                MessageSelector.bySql(<span class="hljs-string">"(TAGS IS NOT NULL AND TAGS IN ('TagA', 'TagB)) "</span> +
                        <span class="hljs-string">"AND (orderId IS NOT NULL AND qty &gt; 15)"</span>));
        <span class="hljs-comment">// è®¾ç½®å›è°ƒå‡½æ•°ï¼Œå¤„ç†æ¶ˆæ¯</span>
        consumer.registerMessageListener((MessageListenerConcurrently) (msg, context) -&gt; {
            System.out.printf(<span class="hljs-string">"%s Receive New Messages: %s %n"</span>, Thread.currentThread().getName(), msg);
            <span class="hljs-keyword">return</span> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;
        });
        <span class="hljs-comment">// å¯åŠ¨æ¶ˆè´¹è€…ï¼Œå¯åŠ¨åä¼šä¸€ç›´æŒ‚ç€ï¼ŒæŒç»­å¤„ç†æ¶ˆæ¯</span>
        consumer.start();
        System.out.printf(<span class="hljs-string">"Consumer Started.%n"</span>);
    }
}
</code></pre>
<p>è¿‡æ»¤å‡ºæ ‡ç­¾æ˜¯ TagA å’Œ TagB ä»¥åŠ qty å¤§äº 15 å¹¶ä¸” orderId ä¸èƒ½ä¸ºç©ºã€‚</p>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¤æ‚ä¸šåŠ¡è¿‡æ»¤ï¼Œå¦‚æ ¹æ®è®¢å•é‡‘é¢ã€æ—¶é—´èŒƒå›´ã€ç”¨æˆ·ç­‰çº§ç­‰å¤šç»´åº¦ç­›é€‰æ¶ˆæ¯ã€‚</p>
<blockquote>
<p>æ³¨ï¼šé€šè¿‡ TAGS è¿‡æ»¤æ˜¯ä¸ç”¨æ‹…å¿ƒæ€§èƒ½é—®é¢˜ï¼Œä½†æ˜¯é€šè¿‡è‡ªå®šä¹‰å±æ€§å°±ä¼šé€ æˆæ€§èƒ½é—®é¢˜ã€‚ RocketMQ ä¸­è¢«è¿‡æ»¤æ‰çš„æ¶ˆæ¯ä¸ä¼šæ¶ˆå¤±ï¼Œè¿‡æ»¤åªæ˜¯é™åˆ¶è¿™äº›æ¶ˆæ¯æŠ•é€’ç»™å½“å‰åŒ¹é…è¿‡æ»¤æ¡ä»¶çš„æ¶ˆè´¹è€…ï¼Œæ¶ˆæ¯æœ¬èº«çš„ç”Ÿå‘½å‘¨æœŸå®Œå…¨ç”± Broker çš„å­˜å‚¨ç­–ç•¥å†³å®šï¼Œå’Œæ˜¯å¦è¢«è¿‡æ»¤æ²¡æœ‰å…³ç³»ã€‚</p>
<p>ç”±äºæ¨¡ç³ŠåŒ¹é…ï¼ˆç‰¹åˆ«æ˜¯ %xxx è¿™ç§å‰ç½®é€šé…ç¬¦ï¼‰ä¼šå¯¼è‡´ Broker æ— æ³•åˆ©ç”¨ç´¢å¼•ï¼Œå¿…é¡»é€æ¡æ‰«ææ¶ˆæ¯å±æ€§ï¼Œåœ¨æ¶ˆæ¯é‡å·¨å¤§æ—¶ä¼šä¸¥é‡å½±å“æ€§èƒ½ã€‚å¦‚æœå¯èƒ½ï¼Œå»ºè®®åœ¨å‘é€æ¶ˆæ¯æ—¶å°†éœ€è¦æ¨¡ç³ŠåŒ¹é…çš„ç»´åº¦æ‹†åˆ†ä¸ºç‹¬ç«‹çš„æ¶ˆæ¯å±æ€§ï¼ˆä¾‹å¦‚å°† orderType æ‹†åˆ†ä¸º prefix å’Œ suffix ä¸¤ä¸ªå±æ€§ï¼‰ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨ Tag è¿›è¡Œç²—ç²’åº¦è¿‡æ»¤ï¼Œå†åœ¨æ¶ˆè´¹ç«¯è¿›è¡Œç»†ç²’åº¦çš„æ¨¡ç³ŠåŒ¹é…ã€‚</p>
</blockquote>
<h3 data-id="heading-21">5 é¡ºåºæ¶ˆæ¯</h3>
<p>RocketMQ çš„é¡ºåºæ¶ˆæ¯ï¼ˆFIFO æ¶ˆæ¯ï¼‰æ˜¯ä¸€ç§**é«˜çº§æ¶ˆæ¯ç±»å‹<strong>ï¼Œæ”¯æŒæ¶ˆè´¹è€…æŒ‰ç…§å‘é€æ¶ˆæ¯çš„å…ˆåé¡ºåºè·å–æ¶ˆæ¯ï¼Œä»è€Œå®ç°ä¸šåŠ¡åœºæ™¯ä¸­çš„é¡ºåºå¤„ç†ã€‚å®ƒé€šè¿‡</strong>æ¶ˆæ¯ç»„ (MessageGroup)** æœºåˆ¶ä¿è¯<strong>å±€éƒ¨é¡ºåº</strong>ï¼Œåœ¨æ»¡è¶³ä¸šåŠ¡é¡ºåºéœ€æ±‚çš„åŒæ—¶å…¼é¡¾ç³»ç»Ÿååèƒ½åŠ›ã€‚</p>
<h4 data-id="heading-22">ç”Ÿäº§ç«¯ï¼šä¿è¯å‘é€é¡ºåº</h4>
<ul>
<li><strong>é˜Ÿåˆ—é€‰æ‹©å™¨</strong>ï¼šé€šè¿‡<code>MessageQueueSelector</code>å°†åŒä¸€ä¸šåŠ¡æ ‡è¯†ï¼ˆå¦‚è®¢å• IDï¼‰çš„æ¶ˆæ¯è·¯ç”±åˆ°<strong>åŒä¸€ä¸ªé˜Ÿåˆ—</strong>ï¼Œé¿å…è·¨é˜Ÿåˆ—ä¹±åº</li>
<li><strong>åŒæ­¥å‘é€</strong>ï¼šå¿…é¡»ä½¿ç”¨<strong>åŒæ­¥å‘é€</strong>ï¼ˆ<code>send()</code>ï¼‰ï¼Œç¦æ­¢å¼‚æ­¥å‘é€ï¼Œç¡®ä¿æ¶ˆæ¯å‘é€æˆåŠŸåå†å‘é€ä¸‹ä¸€æ¡</li>
<li><strong>æ¶ˆæ¯ç»„æœºåˆ¶</strong>ï¼šæ–°ç‰ˆ RocketMQ é€šè¿‡<code>MessageGroup</code>å±æ€§æ ‡è®°æ¶ˆæ¯å½’å±ï¼ŒæœåŠ¡ç«¯è‡ªåŠ¨è·¯ç”±åˆ°å¯¹åº”é˜Ÿåˆ—ã€‚</li>
</ul>
<blockquote>
<p>â½£äº§è€…åªæœ‰å°†â¼€æ‰¹æœ‰é¡ºåºè¦æ±‚çš„æ¶ˆæ¯ï¼Œæ”¾åˆ°åŒâ¼€ä¸ªMesasgeQueueä¸Šï¼Œé€šè¿‡MessageQueueçš„FIFOç‰¹æ€§ä¿è¯è¿™â¼€æ‰¹æ¶ˆæ¯çš„é¡ºåºã€‚å¦‚æœä¸æŒ‡å®šMessageSelectorå¯¹è±¡ï¼Œé‚£ä¹ˆâ½£äº§è€…ä¼šé‡‡â½¤è½®è¯¢çš„â½…å¼å°†å¤šæ¡æ¶ˆæ¯ä¾æ¬¡å‘é€åˆ°ä¸åŒçš„MessageQueueä¸Šã€‚</p>
</blockquote>
<p>ç”Ÿäº§è€…æ¡ˆä¾‹ä»£ç </p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç”Ÿäº§è€…å‘é€é¡ºåºæ¶ˆæ¯</span>
producer.send(message, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageQueueSelector</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> MessageQueue <span class="hljs-title function_">select</span><span class="hljs-params">(List&lt;MessageQueue&gt; mqs, Message msg, Object arg)</span> {
        <span class="hljs-comment">// æŒ‰è®¢å•IDå“ˆå¸Œé€‰æ‹©é˜Ÿåˆ—ï¼Œç¡®ä¿åŒä¸€è®¢å•æ¶ˆæ¯è¿›å…¥åŒä¸€é˜Ÿåˆ—</span>
        <span class="hljs-type">Integer</span> <span class="hljs-variable">orderId</span> <span class="hljs-operator">=</span> (Integer) arg;
        <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> orderId % mqs.size();
        <span class="hljs-keyword">return</span> mqs.get(index);
    }
}, orderId); <span class="hljs-comment">// ä¼ é€’è®¢å•IDä½œä¸ºè·¯ç”±å‚æ•°</span>
</code></pre>
<h4 data-id="heading-23">æ¶ˆè´¹ç«¯ï¼šä¿è¯å¤„ç†é¡ºåº</h4>
<ul>
<li><strong>é¡ºåºæ¶ˆè´¹æ¨¡å¼</strong>ï¼šä½¿ç”¨<code>MessageListenerOrderly</code>ï¼ˆè€Œéå¹¶å‘æ¨¡å¼<code>MessageListenerConcurrently</code>ï¼‰</li>
<li><strong>é˜Ÿåˆ—ç‹¬å </strong>ï¼šåŒä¸€é˜Ÿåˆ—åŒä¸€æ—¶é—´ä»…åˆ†é…ç»™<strong>ä¸€ä¸ªæ¶ˆè´¹çº¿ç¨‹</strong>ï¼Œçº¿ç¨‹æŒ‰æ¶ˆæ¯é¡ºåºä¸²è¡Œå¤„ç†</li>
<li><strong>é˜Ÿåˆ—é”æœºåˆ¶</strong>ï¼šæ¶ˆè´¹ç«¯é€šè¿‡<code>ConsumeOrderlyContext</code>è‡ªåŠ¨åŠ é”ï¼Œé˜²æ­¢åŒä¸€é˜Ÿåˆ—è¢«å¤šçº¿ç¨‹å¹¶å‘æ¶ˆè´¹ã€‚</li>
</ul>
<blockquote>
<p>æ¶ˆè´¹è€…éœ€è¦å®ç°MessageListenerOrderlyæ¥â¼ï¼Œå®é™…ä¸Šåœ¨æœåŠ¡ç«¯ï¼Œå¤„ç†MessageListenerOrderlyæ—¶ï¼Œä¼šç»™â¼€ä¸ªMessageQueueåŠ é”ï¼Œæ‹¿åˆ° MessageQueueä¸Šæ‰€æœ‰çš„æ¶ˆæ¯ï¼Œç„¶åå†å»è¯»å–ä¸‹â¼€ä¸ªMessageQueueçš„æ¶ˆæ¯ã€‚</p>
</blockquote>
<p>æ¶ˆè´¹è€…æ¡ˆä¾‹ä»£ç </p>
<pre><code class="hljs language-java" lang="java">consumer.registerMessageListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageListenerOrderly</span>() {
    <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">consumeTimes</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>);
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ConsumeOrderlyStatus <span class="hljs-title function_">consumeMessage</span><span class="hljs-params">(List&lt;MessageExt&gt; msgs, ConsumeOrderlyContext context)</span> {
        context.setAutoCommit(<span class="hljs-literal">true</span>);
        System.out.printf(<span class="hljs-string">"%s Receive New Messages: %s %n"</span>, Thread.currentThread().getName(), msgs);
        <span class="hljs-built_in">this</span>.consumeTimes.incrementAndGet();
        <span class="hljs-keyword">if</span> ((<span class="hljs-built_in">this</span>.consumeTimes.get() % <span class="hljs-number">2</span>) == <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> ConsumeOrderlyStatus.SUCCESS;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((<span class="hljs-built_in">this</span>.consumeTimes.get() % <span class="hljs-number">5</span>) == <span class="hljs-number">0</span>) {
            context.setSuspendCurrentQueueTimeMillis(<span class="hljs-number">3000</span>);
            <span class="hljs-keyword">return</span> ConsumeOrderlyStatus.SUSPEND_CURRENT_QUEUE_A_MOMENT;
        }

        <span class="hljs-keyword">return</span> ConsumeOrderlyStatus.SUCCESS;
    }
});
</code></pre>
<p>åŸç†å°±æ˜¯å°†æ¶ˆæ¯éƒ½å‘åˆ°åŒä¸€ä¸ªMessageQueueã€‚å…·ä½“å¯ä»¥çœ‹å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Frocketmq.apache.org%2Fzh%2Fdocs%2FfeatureBehavior%2F03fifomessage%2F" target="_blank" title="https://rocketmq.apache.org/zh/docs/featureBehavior/03fifomessage/" ref="nofollow noopener noreferrer">é¡ºåºæ¶ˆæ¯ | RocketMQ</a></p>
<blockquote>
<p>æ³¨ï¼š</p>
<p>1ã€ä¸€èˆ¬åœºæ™¯ä¸‹æ˜¯å±€éƒ¨æœ‰åºï¼Œå¦‚æœéœ€è¦å…¨å±€æœ‰åºï¼Œé‚£å°±å°†æ¶ˆæ¯ç»Ÿä¸€æ”¾åˆ°ä¸€ä¸ª MessageQueue ã€‚</p>
<p>2ã€â½£äº§è€…ç«¯å°½å¯èƒ½å°†åŒä¸€ç»„æœ‰åºæ¶ˆæ¯æ‰“æ•£åˆ°ä¸åŒçš„ MessageQueue ä¸Šï¼Œé¿å…è¿‡äºé›†ä¸­å¯¼è‡´æ•°æ®çƒ­ç‚¹ç«äº‰ã€‚</p>
<p>3ã€æ¶ˆè´¹è€…ç«¯åªè¿›â¾æœ‰é™æ¬¡æ•°çš„é‡è¯•ã€‚å¦‚æœâ¼€æ¡æ¶ˆæ¯å¤„ç†å¤±è´¥ï¼ŒRocketMQä¼šå°†åç»­æ¶ˆæ¯é˜»å¡ä½ï¼Œè®©æ¶ˆè´¹è€…è¿›â¾é‡è¯•ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ¶ˆè´¹è€…â¼€ç›´å¤„ç†å¤±è´¥ï¼Œè¶…è¿‡æœ€â¼¤é‡è¯•æ¬¡æ•°ï¼Œé‚£ä¹ˆRocketMQå°±ä¼šè·³è¿‡è¿™â¼€æ¡æ¶ˆæ¯ï¼Œå¤„ç†åâ¾¯çš„æ¶ˆæ¯ï¼Œè¿™ä¼šé€ æˆæ¶ˆæ¯ä¹±åºã€‚</p>
<p>4ã€æ¶ˆè´¹è€…ç«¯å¦‚æœç¡®å®å¤„ç†é€»è¾‘ä¸­å‡ºç°é—®é¢˜ï¼Œä¸å»ºè®®æŠ›å‡ºå¼‚å¸¸ï¼Œå¯ä»¥è¿”å› <code>ConsumeOrderlyStatus.SUSPEND_CURRENT_QUEUE_A_MOMENT</code>ä½œä¸ºæ›¿ä»£ã€‚</p>
</blockquote>
<h3 data-id="heading-24">6 å»¶è¿Ÿæ¶ˆæ¯</h3>
<p>RocketMQ çš„å»¶è¿Ÿæ¶ˆæ¯æ˜¯ä¸€ç§é«˜çº§æ¶ˆæ¯ç‰¹æ€§ï¼ŒæŒ‡æ¶ˆæ¯å‘é€åˆ° Broker åï¼Œä¸ä¼šç«‹å³è¢«æ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œè€Œæ˜¯åœ¨æŒ‡å®šæ—¶é—´ï¼ˆæˆ–å»¶è¿Ÿçº§åˆ«å¯¹åº”çš„æ—¶é—´ï¼‰åæ‰æŠ•é€’åˆ°ç›®æ ‡ Topic ä¾›æ¶ˆè´¹è€…å¤„ç†ã€‚è¯¥æœºåˆ¶å¹¿æ³›åº”ç”¨äºè®¢å•è¶…æ—¶å¤„ç†ã€å®šæ—¶ä»»åŠ¡è°ƒåº¦ã€é€šçŸ¥æé†’ç­‰åœºæ™¯ã€‚</p>
<h4 data-id="heading-25">6.1 åŸç†</h4>
<p>æ¶ˆæ¯å‘é€åï¼Œåœ¨å›ºå®šçš„æ—¶é—´åæ‰è¢«æ¶ˆè´¹ï¼Œå®˜æ–¹æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œä¸¤è€…æœ¬è´¨ç›¸åŒï¼Œå‡é€šè¿‡æœåŠ¡ç«¯å®šæ—¶è°ƒåº¦å®ç°ï¼Œ5.x ç‰ˆæœ¬ç»Ÿä¸€ç§°ä¸ºå®šæ—¶æ¶ˆæ¯ã€‚</p>
<ul>
<li>RocketMQ 4.x é»˜è®¤æ”¯æŒ18 ä¸ªå›ºå®šå»¶è¿Ÿçº§åˆ«ï¼Œä¸æ”¯æŒä»»æ„æ—¶é—´å»¶è¿Ÿã€‚</li>
</ul>
<p>Broker é…ç½®å¯è‡ªå®šä¹‰å»¶è¿Ÿçº§åˆ«ï¼š<code>messageDelayLevel=1s 5s 10s 30s 1m ... 1h 2h</code></p>
<ul>
<li>RocketMQ 5.x å¼•å…¥<strong>ç²¾ç¡®å®šæ—¶æ¶ˆæ¯</strong>ï¼Œæ”¯æŒæ¯«ç§’çº§ä»»æ„æ—¶é—´å»¶è¿Ÿï¼Œé€šè¿‡è®¾ç½®ç»å¯¹æ—¶é—´æˆ³å®ç°ã€‚</li>
</ul>
<h4 data-id="heading-26">6.2 ä»£ç æ¡ˆä¾‹</h4>
<p>ç”Ÿäº§è€…çš„æ ¸å¿ƒä»£ç </p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Message</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Message</span>(TOPIC, (<span class="hljs-string">"Hello scheduled message "</span> + i).getBytes(StandardCharsets.UTF_8));
<span class="hljs-comment">// This message will be delivered to consumer 10 seconds later.</span>
message.setDelayTimeLevel(<span class="hljs-number">3</span>);
<span class="hljs-comment">// Send the message</span>
<span class="hljs-type">SendResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> producer.send(message);
System.out.print(result);
</code></pre>
<p>é€šè¿‡è®¾ç½®å»¶è¿Ÿæ—¶é—´çº§åˆ« <code>message.setDelayTimeLevel(3)</code>ä»£è¡¨ 10 ç§’åå‘é€ã€‚Broker æ¥æ”¶æ¶ˆæ¯åï¼Œåˆ¤æ–­ä¸ºå»¶è¿Ÿæ¶ˆæ¯ï¼Œå°†å…¶æš‚å­˜åˆ°å†…éƒ¨ä¸»é¢˜ <code>SCHEDULE_TOPIC_XXXX</code>ã€‚Broker å¯åŠ¨å®šæ—¶ä»»åŠ¡çº¿ç¨‹æ± ï¼Œæ¯ä¸ªå»¶è¿Ÿçº§åˆ«å¯¹åº”ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œå®šæ—¶ä»»åŠ¡å‘¨æœŸæ€§æ‰«æå¯¹åº”é˜Ÿåˆ—ï¼Œåˆ¤æ–­æ¶ˆæ¯æ˜¯å¦åˆ°æœŸï¼ˆå­˜å‚¨æ—¶é—´ + å»¶è¿Ÿæ—¶é—´â‰¤å½“å‰æ—¶é—´ï¼‰ï¼Œåˆ°æœŸæ¶ˆæ¯è¢«é‡æ–°æŠ•é€’åˆ°åŸå§‹ç›®æ ‡ Topic çš„å¯¹åº”é˜Ÿåˆ—ï¼Œæ¶ˆè´¹è€…æ­¤æ—¶å¯æ­£å¸¸æ¶ˆè´¹è¯¥æ¶ˆæ¯ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Message</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Message</span>(TOPIC, (<span class="hljs-string">"Hello scheduled message "</span> + i).getBytes(StandardCharsets.UTF_8));
<span class="hljs-comment">// This message will be delivered to consumer 10 seconds later.</span>
<span class="hljs-comment">//message.setDelayTimeSec(10);</span>
<span class="hljs-comment">// The effect is the same as the above</span>
<span class="hljs-comment">// message.setDelayTimeMs(10_000L);</span>
<span class="hljs-comment">// Set the specific delivery time, and the effect is the same as the above</span>
<span class="hljs-comment">// long deliverTime = LocalDateTime.of(2026, 1, 20, 10, 0, 0)</span>
<span class="hljs-comment">//     .atZone(ZoneId.systemDefault())</span>
<span class="hljs-comment">//     .toInstant()</span>
<span class="hljs-comment">//     .toEpochMilli();</span>
<span class="hljs-comment">// message.setDeliverTimeMs(deliverTime);</span>
message.setDeliverTimeMs(System.currentTimeMillis() + <span class="hljs-number">10_000L</span>);
<span class="hljs-comment">// Send the message</span>
<span class="hljs-type">SendResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> producer.send(message);
System.out.printf(result + <span class="hljs-string">"\n"</span>);
</code></pre>
<p>æ—¶é—´è½®å°†æ—¶é—´åˆ’åˆ†ä¸ºå›ºå®šæ§½ä½ï¼Œæ¯ä¸ªæ§½ä½å¯¹åº”ä¸€ä¸ªæ—¶é—´é—´éš”ã€‚æ¶ˆæ¯æ ¹æ®åˆ°æœŸæ—¶é—´æ”¾å…¥å¯¹åº”æ§½ä½ï¼Œé€šè¿‡æŒ‡é’ˆå¾ªç¯æ‰«æå¤„ç†åˆ°æœŸæ¶ˆæ¯ã€‚å…·ä½“å¯ä»¥çœ‹å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Frocketmq.apache.org%2Fzh%2Fdocs%2F4.x%2Fproducer%2F04message3%2F" target="_blank" title="https://rocketmq.apache.org/zh/docs/4.x/producer/04message3/" ref="nofollow noopener noreferrer">å»¶è¿Ÿæ¶ˆæ¯å‘é€ | RocketMQ</a></p>
<h3 data-id="heading-27">7 æ‰¹é‡æ¶ˆæ¯</h3>
<p>åœ¨å¯¹ååç‡æœ‰ä¸€å®šè¦æ±‚çš„æƒ…å†µä¸‹ï¼ŒApache RocketMQå¯ä»¥å°†ä¸€äº›æ¶ˆæ¯èšæˆä¸€æ‰¹ä»¥åè¿›è¡Œå‘é€ï¼Œå¯ä»¥å¢åŠ ååç‡ï¼Œå¹¶å‡å°‘APIå’Œç½‘ç»œè°ƒç”¨æ¬¡æ•°ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/754201307eb444768f601d7063b74053~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oCS5pS-5ZCn5b635b63:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523170&amp;x-signature=BLwYES%2FKE8GZk329Xnh5dRyoEPQ%3D" alt="" loading="lazy"/></p>
<p>æ¡ˆä¾‹ä»£ç </p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ·»åŠ æ‰¹é‡æ¶ˆæ¯</span>
List&lt;Message&gt; messages = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(MESSAGE_COUNT);
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; MESSAGE_COUNT; i++) {
    messages.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Message</span>(TOPIC, TAG, <span class="hljs-string">"OrderID"</span> + i, (<span class="hljs-string">"Hello world "</span> + i).getBytes(StandardCharsets.UTF_8)));
}

<span class="hljs-comment">// æ¶ˆæ¯è¿‡å¤šéœ€è¦åˆ†ç‰‡</span>
<span class="hljs-type">ListSplitter</span> <span class="hljs-variable">splitter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListSplitter</span>(messages);
<span class="hljs-keyword">while</span> (splitter.hasNext()) {
    List&lt;Message&gt; listItem = splitter.next();
    <span class="hljs-type">SendResult</span> <span class="hljs-variable">sendResult</span> <span class="hljs-operator">=</span> producer.send(listItem);
    System.out.printf(<span class="hljs-string">"%s"</span>, sendResult);
}
</code></pre>
<blockquote>
<p>æ³¨ï¼š</p>
<p>æ‰¹é‡æ¶ˆæ¯çš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œä½†æ˜¯è¦æ³¨æ„RocketMQåšäº†é™åˆ¶ã€‚åŒä¸€æ‰¹æ¶ˆæ¯çš„Topicå¿…é¡»ç›¸åŒï¼Œå¦å¤–ï¼Œä¸æ”¯æŒå»¶è¿Ÿæ¶ˆæ¯ã€‚</p>
<p>è¿˜æœ‰æ‰¹é‡æ¶ˆæ¯çš„å¤§å°ä¸è¦è¶…è¿‡1Mï¼Œå¦‚æœå¤ªå¤§å°±éœ€è¦è‡ªè¡Œåˆ†å‰²ã€‚</p>
</blockquote>
<h3 data-id="heading-28">8 äº‹åŠ¡æ¶ˆæ¯</h3>
<p>äº‹åŠ¡æ¶ˆæ¯ä¸º Apache RocketMQ ä¸­çš„é«˜çº§ç‰¹æ€§æ¶ˆæ¯ï¼Œæœ¬æ–‡ä¸ºæ‚¨ä»‹ç»äº‹åŠ¡æ¶ˆæ¯çš„åº”ç”¨åœºæ™¯ã€åŠŸèƒ½åŸç†ã€ä½¿ç”¨é™åˆ¶ã€ä½¿ç”¨æ–¹æ³•å’Œä½¿ç”¨å»ºè®®ã€‚</p>
<blockquote>
<p>äº‹åŠ¡æ¶ˆæ¯æ˜¯ Apache RocketMQ æä¾›çš„ä¸€ç§é«˜çº§æ¶ˆæ¯ç±»å‹ï¼Œæ”¯æŒåœ¨åˆ†å¸ƒå¼åœºæ™¯ä¸‹ä¿éšœæ¶ˆæ¯ç”Ÿäº§å’Œæœ¬åœ°äº‹åŠ¡çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚</p>
</blockquote>
<h4 data-id="heading-29">8.1 å·¥ä½œæµç¨‹</h4>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6185b6c4e9440eb88353f74cb0a1205~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oCS5pS-5ZCn5b635b63:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523170&amp;x-signature=axdr%2BJADgeahEhd%2BWsZlGnoAnto%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>ç®€å•çš„æè¿°ä»¥ä¸Šå†…å®¹ï¼ˆåç»­ä¼šæœ‰æ–‡ç« æ¥å•ç‹¬ä»‹ç»ï¼Œå…·ä½“å†…å®¹è¯·çœ‹åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Frocketmq.apache.org%2Fzh%2Fdocs%2FfeatureBehavior%2F04transactionmessage%2F%3Ff_link_type%3Df_linkinlinenote%26flow_extra%3DeyJpbmxpbmVfZGlzcGxheV9wb3NpdGlvbiI6MCwiZG9jX3Bvc2l0aW9uIjowLCJkb2NfaWQiOiI0OTViMWYyMzhjNTQ3NzQwLTYwYTNhMTQ0MDNlMTA1YjUifQ%253D%253D" target="_blank" title="https://rocketmq.apache.org/zh/docs/featureBehavior/04transactionmessage/?f_link_type=f_linkinlinenote&amp;flow_extra=eyJpbmxpbmVfZGlzcGxheV9wb3NpdGlvbiI6MCwiZG9jX3Bvc2l0aW9uIjowLCJkb2NfaWQiOiI0OTViMWYyMzhjNTQ3NzQwLTYwYTNhMTQ0MDNlMTA1YjUifQ%3D%3D" ref="nofollow noopener noreferrer">äº‹åŠ¡æ¶ˆæ¯ | RocketMQ</a>ï¼‰</p>
<p><strong>é¦–å…ˆ</strong>ï¼Œç”Ÿäº§è€…å°†æ¶ˆæ¯å‘é€è‡³Apache RocketMQæœåŠ¡ç«¯ï¼Œå®é™…ä¸Šæ˜¯å‘ Brokerï¼ˆServerï¼‰å‘é€ä¸€æ¡ â€œåŠæ¶ˆæ¯â€ï¼ˆHalf Messageï¼‰ï¼ŒBroker ç¡®è®¤æ¥æ”¶æˆåŠŸåï¼Œè¿™æ¡æ¶ˆæ¯æš‚æ—¶ä¸ä¼šæŠ•é€’ç»™æ¶ˆè´¹è€…ã€‚<strong>ç„¶å</strong>ç”Ÿäº§è€…å¼€å§‹æ‰§è¡Œæœ¬åœ°ä¸šåŠ¡äº‹åŠ¡ï¼ˆæ¯”å¦‚æ•°æ®åº“æ“ä½œï¼‰ï¼Œç¡®ä¿ä¸šåŠ¡é€»è¾‘å’Œæ¶ˆæ¯å‘é€çš„ä¸€è‡´æ€§ã€‚<strong>æ¥ç€</strong>æœ¬åœ°äº‹åŠ¡æ‰§è¡Œå®Œæˆåï¼Œç”Ÿäº§è€…å‘ Broker å‘é€ Commitï¼ˆäº‹åŠ¡æˆåŠŸï¼‰æˆ– Rollbackï¼ˆäº‹åŠ¡å¤±è´¥ï¼‰æŒ‡ä»¤ï¼Œå‘ŠçŸ¥ Broker æœ€ç»ˆå¤„ç†ç»“æœã€‚äº‹åŠ¡çŠ¶æ€å›æŸ¥æœ‰è¡¥å¿æœºåˆ¶ï¼Œå¦‚æœ Broker é•¿æ—¶é—´æœªæ”¶åˆ°ç”Ÿäº§è€…çš„æŒ‡ä»¤ï¼Œä¼šä¸»åŠ¨è§¦å‘äº‹åŠ¡å›æŸ¥ï¼Œå‘ç”Ÿäº§è€…è¯¢é—®æœ¬åœ°äº‹åŠ¡çš„æœ€ç»ˆçŠ¶æ€ï¼›ç”Ÿäº§è€…é‡æ–°æ£€æŸ¥æœ¬åœ°äº‹åŠ¡å¹¶åé¦ˆç»“æœã€‚<strong>æœ€å</strong> Broker æ”¶åˆ° Commit æŒ‡ä»¤æ—¶ï¼Œä¼šå°†åŠæ¶ˆæ¯æ­£å¼æŠ•é€’ç»™æ¶ˆè´¹è€…ï¼ˆSubscriberï¼‰ï¼›æ”¶åˆ° Rollback æŒ‡ä»¤æ—¶ï¼Œåˆ™ç›´æ¥ä¸¢å¼ƒåŠæ¶ˆæ¯ï¼Œä¸è¿›è¡ŒæŠ•é€’ã€‚</p>
</blockquote>
<h4 data-id="heading-30">8.2 ç”Ÿå‘½å‘¨æœŸ</h4>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95a4613d1ba6427ba226dca41bee43a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oCS5pS-5ZCn5b635b63:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523170&amp;x-signature=pS%2BjqErIaer6goD3KOZxKMUKN3Q%3D" alt="" loading="lazy"/></p>
<ul>
<li>åˆå§‹åŒ–ï¼šåŠäº‹åŠ¡æ¶ˆæ¯è¢«ç”Ÿäº§è€…æ„å»ºå¹¶å®Œæˆåˆå§‹åŒ–ï¼Œå¾…å‘é€åˆ°æœåŠ¡ç«¯çš„çŠ¶æ€ã€‚</li>
<li>äº‹åŠ¡å¾…æäº¤ï¼šåŠäº‹åŠ¡æ¶ˆæ¯è¢«å‘é€åˆ°æœåŠ¡ç«¯ï¼Œå’Œæ™®é€šæ¶ˆæ¯ä¸åŒï¼Œå¹¶ä¸ä¼šç›´æ¥è¢«æœåŠ¡ç«¯æŒä¹…åŒ–ï¼Œè€Œæ˜¯ä¼šè¢«å•ç‹¬å­˜å‚¨åˆ°äº‹åŠ¡å­˜å‚¨ç³»ç»Ÿä¸­ï¼Œç­‰å¾…ç¬¬äºŒé˜¶æ®µæœ¬åœ°äº‹åŠ¡è¿”å›æ‰§è¡Œç»“æœåå†æäº¤ã€‚æ­¤æ—¶æ¶ˆæ¯å¯¹ä¸‹æ¸¸æ¶ˆè´¹è€…ä¸å¯è§ã€‚</li>
<li>æ¶ˆæ¯å›æ»šï¼šç¬¬äºŒé˜¶æ®µå¦‚æœäº‹åŠ¡æ‰§è¡Œç»“æœæ˜ç¡®ä¸ºå›æ»šï¼ŒæœåŠ¡ç«¯ä¼šå°†åŠäº‹åŠ¡æ¶ˆæ¯å›æ»šï¼Œè¯¥äº‹åŠ¡æ¶ˆæ¯æµç¨‹ç»ˆæ­¢ã€‚</li>
<li>æäº¤å¾…æ¶ˆè´¹ï¼šç¬¬äºŒé˜¶æ®µå¦‚æœäº‹åŠ¡æ‰§è¡Œç»“æœæ˜ç¡®ä¸ºæäº¤ï¼ŒæœåŠ¡ç«¯ä¼šå°†åŠäº‹åŠ¡æ¶ˆæ¯é‡æ–°å­˜å‚¨åˆ°æ™®é€šå­˜å‚¨ç³»ç»Ÿä¸­ï¼Œæ­¤æ—¶æ¶ˆæ¯å¯¹ä¸‹æ¸¸æ¶ˆè´¹è€…å¯è§ï¼Œç­‰å¾…è¢«æ¶ˆè´¹è€…è·å–å¹¶æ¶ˆè´¹ã€‚</li>
<li>æ¶ˆè´¹ä¸­ï¼šæ¶ˆæ¯è¢«æ¶ˆè´¹è€…è·å–ï¼Œå¹¶æŒ‰ç…§æ¶ˆè´¹è€…æœ¬åœ°çš„ä¸šåŠ¡é€»è¾‘è¿›è¡Œå¤„ç†çš„è¿‡ç¨‹ã€‚ æ­¤æ—¶æœåŠ¡ç«¯ä¼šç­‰å¾…æ¶ˆè´¹è€…å®Œæˆæ¶ˆè´¹å¹¶æäº¤æ¶ˆè´¹ç»“æœï¼Œå¦‚æœä¸€å®šæ—¶é—´åæ²¡æœ‰æ”¶åˆ°æ¶ˆè´¹è€…çš„å“åº”ï¼ŒApache RocketMQä¼šå¯¹æ¶ˆæ¯è¿›è¡Œé‡è¯•å¤„ç†ã€‚å…·ä½“ä¿¡æ¯ã€‚</li>
<li>æ¶ˆè´¹æäº¤ï¼šæ¶ˆè´¹è€…å®Œæˆæ¶ˆè´¹å¤„ç†ï¼Œå¹¶å‘æœåŠ¡ç«¯æäº¤æ¶ˆè´¹ç»“æœï¼ŒæœåŠ¡ç«¯æ ‡è®°å½“å‰æ¶ˆæ¯å·²ç»è¢«å¤„ç†ï¼ˆåŒ…æ‹¬æ¶ˆè´¹æˆåŠŸå’Œå¤±è´¥ï¼‰ã€‚ Apache RocketMQé»˜è®¤æ”¯æŒä¿ç•™æ‰€æœ‰æ¶ˆæ¯ï¼Œæ­¤æ—¶æ¶ˆæ¯æ•°æ®å¹¶ä¸ä¼šç«‹å³è¢«åˆ é™¤ï¼Œåªæ˜¯é€»è¾‘æ ‡è®°å·²æ¶ˆè´¹ã€‚æ¶ˆæ¯åœ¨ä¿å­˜æ—¶é—´åˆ°æœŸæˆ–å­˜å‚¨ç©ºé—´ä¸è¶³è¢«åˆ é™¤å‰ï¼Œæ¶ˆè´¹è€…ä»ç„¶å¯ä»¥å›æº¯æ¶ˆæ¯é‡æ–°æ¶ˆè´¹ã€‚</li>
<li>æ¶ˆæ¯åˆ é™¤ï¼šApache RocketMQæŒ‰ç…§æ¶ˆæ¯ä¿å­˜æœºåˆ¶æ»šåŠ¨æ¸…ç†æœ€æ—©çš„æ¶ˆæ¯æ•°æ®ï¼Œå°†æ¶ˆæ¯ä»ç‰©ç†æ–‡ä»¶ä¸­åˆ é™¤ã€‚</li>
</ul>
<h4 data-id="heading-31">8.3 å®˜æ–¹å®ä¾‹ä»£ç </h4>
<p>â‘  å®ç° TransactionListener æ¥å£</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionListenerImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">TransactionListener</span> {
    <span class="hljs-comment">// åŸå­æ•´å‹ï¼šç”Ÿæˆè‡ªå¢æ•°å€¼ï¼Œæ¨¡æ‹Ÿä¸åŒçš„æœ¬åœ°äº‹åŠ¡ç»“æœï¼ˆçº¿ç¨‹å®‰å…¨ï¼Œé€‚é…å¤šçº¿ç¨‹å‘é€åœºæ™¯ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">transactionIndex</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">0</span>);
    <span class="hljs-comment">// å¹¶å‘å“ˆå¸Œè¡¨ï¼šå­˜å‚¨ã€Œäº‹åŠ¡æ¶ˆæ¯ID-äº‹åŠ¡çŠ¶æ€ã€çš„æ˜ å°„ï¼Œä¾›å›æŸ¥æ—¶ä½¿ç”¨ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</span>
    <span class="hljs-keyword">private</span> ConcurrentHashMap&lt;String, Integer&gt; localTrans = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();

    <span class="hljs-comment">// æ‰§è¡Œæœ¬åœ°äº‹åŠ¡</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> LocalTransactionState <span class="hljs-title function_">executeLocalTransaction</span><span class="hljs-params">(Message msg, Object arg)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> transactionIndex.getAndIncrement();
        <span class="hljs-type">int</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> value % <span class="hljs-number">3</span>;
        localTrans.put(msg.getTransactionId(), status);
        <span class="hljs-keyword">return</span> LocalTransactionState.UNKNOW;
    }

    <span class="hljs-comment">// å›æŸ¥äº‹åŠ¡çŠ¶æ€</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> LocalTransactionState <span class="hljs-title function_">checkLocalTransaction</span><span class="hljs-params">(MessageExt msg)</span> {
        <span class="hljs-type">Integer</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> localTrans.get(msg.getTransactionId());
        <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> != status) {
            <span class="hljs-keyword">switch</span> (status) {
                <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
                    <span class="hljs-keyword">return</span> LocalTransactionState.UNKNOW;
                <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                    <span class="hljs-keyword">return</span> LocalTransactionState.COMMIT_MESSAGE;
                <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
                    <span class="hljs-keyword">return</span> LocalTransactionState.ROLLBACK_MESSAGE;
                <span class="hljs-keyword">default</span>:
                    <span class="hljs-keyword">return</span> LocalTransactionState.COMMIT_MESSAGE;
            }
        }
        <span class="hljs-keyword">return</span> LocalTransactionState.COMMIT_MESSAGE;
    }
}
</code></pre>
<p>â‘¡ ç”Ÿäº§è€…</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionProducer</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">PRODUCER_GROUP</span> <span class="hljs-operator">=</span> <span class="hljs-string">"please_rename_unique_group_name"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DEFAULT_NAMESRVADDR</span> <span class="hljs-operator">=</span> <span class="hljs-string">"127.0.0.1:9876"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TOPIC</span> <span class="hljs-operator">=</span> <span class="hljs-string">"TopicTest1234"</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MESSAGE_COUNT</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> MQClientException, InterruptedException {
        <span class="hljs-type">TransactionListener</span> <span class="hljs-variable">transactionListener</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransactionListenerImpl</span>();
        <span class="hljs-type">TransactionMQProducer</span> <span class="hljs-variable">producer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransactionMQProducer</span>(PRODUCER_GROUP);

        producer.setNamesrvAddr(DEFAULT_NAMESRVADDR);
        <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executorService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(<span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">100</span>, TimeUnit.SECONDS, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="hljs-number">2000</span>), r -&gt; {
            <span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(r);
            thread.setName(<span class="hljs-string">"client-transaction-msg-check-thread"</span>);
            <span class="hljs-keyword">return</span> thread;
        });

        producer.setExecutorService(executorService);
        producer.setTransactionListener(transactionListener);
        producer.start();

        String[] tags = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[] {<span class="hljs-string">"TagA"</span>, <span class="hljs-string">"TagB"</span>, <span class="hljs-string">"TagC"</span>, <span class="hljs-string">"TagD"</span>, <span class="hljs-string">"TagE"</span>};
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; MESSAGE_COUNT; i++) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">Message</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span>
                    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Message</span>(TOPIC, tags[i % tags.length], <span class="hljs-string">"KEY"</span> + i,
                        (<span class="hljs-string">"Hello RocketMQ "</span> + i).getBytes(RemotingHelper.DEFAULT_CHARSET));
                <span class="hljs-type">SendResult</span> <span class="hljs-variable">sendResult</span> <span class="hljs-operator">=</span> producer.sendMessageInTransaction(msg, <span class="hljs-literal">null</span>);
                System.out.printf(<span class="hljs-string">"%s%n"</span>, sendResult);

                Thread.sleep(<span class="hljs-number">10</span>);
            } <span class="hljs-keyword">catch</span> (MQClientException | UnsupportedEncodingException e) {
                e.printStackTrace();
            }
        }

        <span class="hljs-comment">// ä¿æŒç¨‹åºè¿è¡Œï¼ˆå…³é”®ï¼å¦åˆ™ç”Ÿäº§è€…å…³é—­åæ— æ³•æ¥æ”¶å›æŸ¥å›è°ƒï¼‰</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100000</span>; i++) {
            Thread.sleep(<span class="hljs-number">1000</span>);
        }
        producer.shutdown();
    }
}
</code></pre>
<p>è¿™ä¸¤æ®µä»£ç ï¼Œå…¶ä¸­ <code>TransactionListenerImpl</code> æ˜¯äº‹åŠ¡ç›‘å¬å™¨çš„å®ç°ç±»ï¼ˆè´Ÿè´£å¤„ç†æœ¬åœ°äº‹åŠ¡å’Œäº‹åŠ¡å›æŸ¥ï¼‰ï¼Œ<code>TransactionProducer</code> æ˜¯äº‹åŠ¡æ¶ˆæ¯ç”Ÿäº§è€…ï¼ˆè´Ÿè´£å‘é€äº‹åŠ¡æ¶ˆæ¯å¹¶é©±åŠ¨æ•´ä¸ªæµç¨‹ï¼‰ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">LocalTransactionState</span> {
    COMMIT_MESSAGE, <span class="hljs-comment">// â€œæäº¤â€ï¼Œæ¶ˆæ¯å¯¹æ¶ˆè´¹è€…å¯è§ï¼›</span>
    ROLLBACK_MESSAGE, <span class="hljs-comment">// â€œå›æ»šâ€ï¼Œæ¶ˆæ¯è¢«ä¸¢å¼ƒï¼›</span>
    UNKNOW; <span class="hljs-comment">//  â€œæœªçŸ¥â€ï¼ŒRocketMQ ä¼šç»§ç»­å›æŸ¥ï¼ˆç›´åˆ°è¶…æ—¶ï¼‰ï¼›</span>
}
</code></pre>
<p>å½“ <code>executeLocalTransaction</code> è¿”å› <code>UNKNOW</code>ï¼Œæˆ–ç”Ÿäº§è€…ä¸ <code>RocketMQ</code> é€šä¿¡å¼‚å¸¸æ—¶ï¼Œ<code>RocketMQ</code>ä¼šå®šæ—¶å›è°ƒè¯¥æ–¹æ³•ï¼Œç¡®è®¤æœ¬åœ°äº‹åŠ¡æœ€ç»ˆçŠ¶æ€ï¼›</p>
<p>å¿…é¡»ä½¿ç”¨ <code>TransactionMQProducer</code>æ¥å‘é€æ¶ˆæ¯ã€‚</p>
<h3 data-id="heading-32">9 ACL æƒé™æ§åˆ¶æœºåˆ¶</h3>
<p>è®¿é—®æ§åˆ¶ 2.0ï¼ˆACL 2.0ï¼‰æ˜¯Apache RocketMQçš„è®¿é—®æ§åˆ¶åˆ—è¡¨(Access Control List)å‡çº§ç‰ˆæœ¬ï¼Œæä¾›äº†å®Œå–„çš„èº«ä»½è®¤è¯(Authentication)å’Œæƒé™æˆæƒ(Authorization)æœºåˆ¶ï¼Œç”¨äºä¿æŠ¤RocketMQé›†ç¾¤çš„æ•°æ®å®‰å…¨ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨æ§åˆ¶ç•Œé¢ç»™ topic è®¾ç½®æƒé™</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/366e84d27fff4c1fb7ca6ccd56d2bf74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oCS5pS-5ZCn5b635b63:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523170&amp;x-signature=WFe8OwyXH6tJdcwCbyyZQnd6Lxo%3D" alt="" loading="lazy"/></p>
<p>å¦‚å›¾ä¸­çš„ perm è¡¨ç¤º topic çš„æƒé™ï¼Œæœ‰ä¸‰ä¸ªå¯é€‰é¡¹ã€‚ 2ï¼šç¦å†™ç¦è®¢é˜…ï¼Œ4ï¼šå¯è®¢é˜…ï¼Œä¸èƒ½å†™ï¼Œ6ï¼šå¯å†™å¯è®¢é˜…ã€‚</p>
<blockquote>
<p>åœ¨Brokerç«¯è¿˜æä¾›äº†æ›´è¯¦ç»†çš„æƒé™æ§åˆ¶æœºåˆ¶ã€‚ä¸»è¦æ˜¯åœ¨broker.confä¸­æ‰“å¼€aclçš„æ ‡å¿—ï¼šaclEnable=trueã€‚å°±å¯ä»¥ç”¨plain_acl.ymlæ¥è¿›â¾æƒé™é…ç½®äº†ï¼Œå¹¶ä¸”æ˜¯çƒ­åŠ è½½ï¼Œæ— éœ€é‡å¯ã€‚</p>
<p><strong>ä½†æ˜¯æˆ‘è¿™ä¸ªæ˜¯ 2.0ï¼Œåœ¨ ACL2.0 è¿™ç§æ–¹æ³•å·²ç»è¢«ç§»é™¤äº†ï¼ˆåç»­æ–‡ç« å°†è¯¦ç»†æå†™ï¼‰ã€‚</strong></p>
</blockquote>
<p>ACL 2.0 å¯ä»¥é€šè¿‡é…ç½® broker.conf æ¥è®¾ç½®è®¤è¯æˆæƒç­‰ã€‚</p>
<h3 data-id="heading-33">æ€»ç»“</h3>
<p>RocketMQ å®¢æˆ·ç«¯æ¶ˆæ¯æœºåˆ¶å…·å¤‡æ¸…æ™°çš„ä½¿ç”¨é€»è¾‘ä¸å®Œå–„çš„å¯é æ€§ä¿éšœï¼šç”Ÿäº§è€…ã€æ¶ˆè´¹è€…å‡æœ‰å›ºå®šç¼–ç¨‹æ­¥éª¤ï¼›æ¶ˆæ¯ç¡®è®¤æœºåˆ¶åˆ†ç”Ÿäº§ç«¯ï¼ˆåŒæ­¥ / å¼‚æ­¥ / å•å‘å‘é€çš„å·®å¼‚åŒ–ç¡®è®¤ï¼Œå…³è” Broker åˆ·ç›˜ / å¤åˆ¶ç­–ç•¥ï¼‰å’Œæ¶ˆè´¹ç«¯ï¼ˆåŸºäº Offset çš„è‡ªåŠ¨ / æ‰‹åŠ¨ç¡®è®¤ï¼Œå«é‡è¯•ã€æ­»ä¿¡é˜Ÿåˆ—ç­‰å…œåº•ï¼‰ï¼›æ¶ˆè´¹æ¨¡å¼æ”¯æŒé›†ç¾¤ï¼ˆè´Ÿè½½å‡è¡¡ï¼ŒBroker ç®¡ç† Offsetï¼‰ä¸å¹¿æ’­ï¼ˆå…¨é‡æ¶ˆè´¹ï¼Œæœ¬åœ°ç»´æŠ¤ Offsetï¼‰ï¼›æ¶ˆæ¯è¿‡æ»¤å¯é€šè¿‡ Tagï¼ˆç®€å•é«˜æ•ˆï¼‰æˆ– SQL92ï¼ˆå¤æ‚çµæ´»ï¼‰åœ¨ Broker ç«¯å®ç°ï¼Œå‡å°‘æ— æ•ˆä¼ è¾“ã€‚</p>
<hr/>
<p><em>è½¬å‘è¯·æºå¸¦ä½œè€…ä¿¡æ¯</em>Â  <strong>@æ€’æ”¾å§å¾·å¾· @ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº</strong><br/>
æŒç»­åˆ›ä½œå¾ˆä¸å®¹æ˜“ï¼Œä½œè€…å°†ä»¥å°½å¯èƒ½çš„è¯¦ç»†æŠŠæ‰€å­¦çŸ¥è¯†åˆ†äº«å„ä½å¼€å‘è€…ï¼Œä¸€èµ·è¿›æ­¥ä¸€èµ·å­¦ä¹ ã€‚<strong>è½¬è½½è¯·æºå¸¦é“¾æ¥ï¼Œè½¬è½½åˆ°å¾®ä¿¡å…¬ä¼—å·è¯·å‹¿é€‰æ‹©åŸåˆ›ï¼Œè°¢è°¢ï¼</strong><br/>
ğŸ‘åˆ›ä½œä¸æ˜“ï¼Œå¦‚æœ‰é”™è¯¯è¯·æŒ‡æ­£ï¼Œæ„Ÿè°¢è§‚çœ‹ï¼è®°å¾—ç‚¹èµå“¦ï¼ğŸ‘<br/>
è°¢è°¢æ”¯æŒï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ seekdb + PowerMem æ„å»ºå¤šæ¨¡æ€æ™ºèƒ½è®°å¿†ç³»ç»Ÿ MemBox]]></title>    <link>https://juejin.cn/post/7597243334177456168</link>    <guid>https://juejin.cn/post/7597243334177456168</guid>    <pubDate>2026-01-20T14:16:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597243334177456168" data-draft-id="7597326073671483407" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ seekdb + PowerMem æ„å»ºå¤šæ¨¡æ€æ™ºèƒ½è®°å¿†ç³»ç»Ÿ MemBox"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-20T14:16:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Se7en258"/> <meta itemprop="url" content="https://juejin.cn/user/1028798616450734"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ seekdb + PowerMem æ„å»ºå¤šæ¨¡æ€æ™ºèƒ½è®°å¿†ç³»ç»Ÿ MemBox
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1028798616450734/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Se7en258
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T14:16:00.000Z" title="Tue Jan 20 2026 14:16:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¸ AI åº”ç”¨äº¤äº’æ—¶ï¼Œä½ æœ‰æ²¡æœ‰ç»å†è¿‡è¿™æ ·çš„åœºæ™¯ï¼šæ¯æ¬¡æ–°ä¼šè¯éƒ½è¦é‡æ–°ä»‹ç»è‡ªå·±æ˜¯è°ã€åœ¨åšä»€ä¹ˆé¡¹ç›®ï¼Œåˆšæ‰èŠè¿‡çš„åå¥½è½¬çœ¼å°±è¢«å¿˜å¾—ä¸€å¹²äºŒå‡€ï¼Ÿè¿™æ˜¯å› ä¸ºå¤§å¤šæ•°å¤§è¯­è¨€æ¨¡å‹æœ¬è´¨ä¸Šæ˜¯<strong>æ— çŠ¶æ€</strong>çš„â€”â€”æ¯ä¸€æ¬¡å¯¹è¯éƒ½æ˜¯ä»é›¶å¼€å§‹ï¼Œä¸Šä¸‹æ–‡çª—å£æœ‰é™ä¸”æ— æ³•æŒä¹…åŒ–ã€‚</p>
<p>å¦‚æœèƒ½è®© AI "è®°ä½"ç”¨æˆ·â€”â€”ä¸ä»…è®°ä½å½“å‰å¯¹è¯ï¼Œè¿˜èƒ½è®°ä½å†å²äº¤äº’ã€ä¸ªäººåå¥½å’Œç”¨æˆ·ç”»åƒâ€”â€”å®ƒå°±èƒ½æˆä¸ºçœŸæ­£æœ‰"æˆé•¿æ€§"çš„æ™ºèƒ½åŠ©æ‰‹ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ OceanBase æ¨å‡ºçš„ <strong>SeekDB</strong>ï¼ˆAI åŸç”Ÿæ··åˆæœç´¢æ•°æ®åº“ï¼‰å’Œ <strong>PowerMem</strong>ï¼ˆæ™ºèƒ½è®°å¿†ç®¡ç†åº“ï¼‰æ„å»ºä¸€ä¸ªå¤šæ¨¡æ€æ™ºèƒ½è®°å¿†ç³»ç»Ÿ MemBoxï¼Œå®ç°ç”¨æˆ·è®°å¿†æŒä¹…åŒ–ã€è¯­ä¹‰æ£€ç´¢å’Œä¸ªæ€§åŒ–å›å¤ï¼Œè®© AI æ‹¥æœ‰è·¨ä¼šè¯çš„"é•¿æœŸè®°å¿†"ã€‚</p>
<h2 data-id="heading-0">1. SeekDB ä»‹ç»</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Foceanbase%2Fseekdb" target="_blank" title="https://github.com/oceanbase/seekdb" ref="nofollow noopener noreferrer">seekdb</a> æ˜¯ OceanBase æ¨å‡ºçš„ AI åŸç”Ÿæ··åˆæœç´¢æ•°æ®åº“ï¼Œåœ¨ä¸€ä¸ªæ•°æ®åº“ä¸­èåˆå‘é‡ã€æ–‡æœ¬ã€ç»“æ„åŒ–ä¸åŠç»“æ„åŒ–æ•°æ®èƒ½åŠ›ï¼Œå¹¶é€šè¿‡å†…ç½® AI Functions æ”¯æŒå¤šæ¨¡æ··åˆæœç´¢ä¸æ™ºèƒ½æ¨ç†ã€‚</p>
<p>SeekDB çš„æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ul>
<li><strong>çµæ´»éƒ¨ç½²</strong>ï¼šæ”¯æŒåµŒå…¥å¼å’ŒæœåŠ¡å™¨ä¸¤ç§éƒ¨ç½²æ¨¡å¼ã€‚åµŒå…¥å¼æ¨¡å¼ä¸‹å¯å°† seekdb ç›´æ¥é›†æˆè¿› Python åº”ç”¨ï¼Œä¾¿äºè¿›è¡Œä¸ªäººå¼€å‘ã€‚</li>
<li><strong>æ··åˆæœç´¢</strong>ï¼šå‘é‡ã€å…¨æ–‡ä¸æ ‡é‡è¿‡æ»¤åœ¨ä¸€æ¬¡æŸ¥è¯¢ä¸­å®Œæˆï¼Œæ”¯æŒç²—æ’ + ç²¾æ’çš„å¤šé˜¶æ®µæœç´¢é“¾è·¯ã€‚</li>
<li><strong>å¤šæ¨¡æ•°æ®ä¸ç´¢å¼•</strong>ï¼šæ”¯æŒå‘é‡ã€æ–‡æœ¬ã€JSONã€GIS ç­‰å¤šæ¨¡æ•°æ®ï¼Œæä¾› HNSW/IVF å‘é‡ç´¢å¼•ã€BM25 å…¨æ–‡ç´¢å¼•ç­‰ã€‚</li>
<li><strong>AI å†…ç½®</strong>ï¼šåœ¨æ•°æ®åº“å†…å®Œæˆå‘é‡åµŒå…¥ã€æ¨ç†ã€æç¤ºè¯ç®¡ç†ä¸é‡æ’ï¼Œæ”¯æŒ document-in/data-out çš„å®Œæ•´ RAG æµç¨‹ã€‚</li>
<li><strong>SQL åŸç”Ÿ</strong>ï¼šæºäºæˆç†Ÿçš„ OceanBase å¼•æ“ï¼Œæ”¯æŒå®æ—¶å†™å…¥ã€å®æ—¶å¯æŸ¥ï¼ŒACID äº‹åŠ¡ä¿è¯ï¼Œå…¼å®¹ MySQL ç”Ÿæ€ã€‚</li>
<li><strong>ç»Ÿä¸€åº”ç”¨æ¥å£</strong>ï¼šé€‚é… LangChainã€LlamaIndexã€Dify ç­‰è¿‘ 30 ç§ AI æ¡†æ¶ï¼Œæä¾› MCP Serverã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d3372e88e3944c5a6b23c2ec8ca74ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2U3ZW4yNTg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523361&amp;x-signature=V%2B9K4%2BexQnejUiI%2BfvaI5xxA7E4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">2. PowerMem ä»‹ç»</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Foceanbase%2Fpowermem" target="_blank" title="https://github.com/oceanbase/powermem" ref="nofollow noopener noreferrer">PowerMem</a> æ˜¯ä¸€ä¸ªæ™ºèƒ½è®°å¿†ç®¡ç†åº“ã€‚åœ¨ AI åº”ç”¨å¼€å‘ä¸­ï¼Œå¦‚ä½•è®©å¤§è¯­è¨€æ¨¡å‹æŒä¹…åŒ–åœ°"è®°ä½"å†å²å¯¹è¯ã€ç”¨æˆ·åå¥½å’Œä¸Šä¸‹æ–‡ä¿¡æ¯æ˜¯ä¸€ä¸ªæ ¸å¿ƒæŒ‘æˆ˜ã€‚PowerMem èåˆå‘é‡æ£€ç´¢ã€å…¨æ–‡æ£€ç´¢å’Œå›¾æ•°æ®åº“çš„æ··åˆå­˜å‚¨æ¶æ„ï¼Œä¸º AI åº”ç”¨æ„å»ºäº†å¼ºå¤§çš„è®°å¿†åŸºç¡€è®¾æ–½ã€‚</p>
<p>PowerMem çš„æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ul>
<li><strong>è½»é‡çº§æ¥å…¥</strong>ï¼šæä¾›ç®€æ´çš„ Python SDKï¼Œè¿˜æ”¯æŒ MCP Server å’Œ HTTP API Server æ¥å…¥ã€‚</li>
<li><strong>æ™ºèƒ½è®°å¿†æå–</strong>ï¼šé€šè¿‡ LLM è‡ªåŠ¨ä»å¯¹è¯ä¸­æå–å…³é”®äº‹å®ï¼Œæ™ºèƒ½æ£€æµ‹é‡å¤ã€æ›´æ–°å†²çªä¿¡æ¯å¹¶åˆå¹¶ç›¸å…³è®°å¿†ã€‚</li>
<li><strong>ç”¨æˆ·ç”»åƒ</strong>ï¼šè‡ªåŠ¨æ„å»ºå’Œæ›´æ–°ç”¨æˆ·ç”»åƒï¼Œè®© AI æ›´å¥½åœ°ç†è§£æ¯ä¸ªç”¨æˆ·ã€‚</li>
<li><strong>å¤šç”¨æˆ·/å¤šæ™ºèƒ½ä½“éš”ç¦»</strong>ï¼šä¸ºæ¯ä¸ªç”¨æˆ·æˆ–æ™ºèƒ½ä½“æä¾›ç‹¬ç«‹çš„è®°å¿†ç©ºé—´ï¼Œæ”¯æŒè·¨æ™ºèƒ½ä½“åä½œã€‚</li>
<li><strong>å¤šæ¨¡æ€æ”¯æŒ</strong>ï¼šæ”¯æŒæ–‡æœ¬ã€å›¾åƒã€è¯­éŸ³ç­‰å¤šæ¨¡æ€å†…å®¹çš„è®°å¿†å’Œæ£€ç´¢ã€‚</li>
<li><strong>æ··åˆæ£€ç´¢</strong>ï¼šèåˆå‘é‡æ£€ç´¢ã€å…¨æ–‡æœç´¢å’Œå›¾æ£€ç´¢çš„å¤šè·¯å¬å›èƒ½åŠ›ã€‚</li>
</ul>
<h2 data-id="heading-2">3. é¡¹ç›®æ•ˆæœé¢„è§ˆ</h2>
<p>æœ¬æ–‡å°†å¸¦ä½ ä½¿ç”¨ <strong>seekdb</strong> + <strong>PowerMem</strong> ä»é›¶æ„å»ºä¸€ä¸ªå¤šæ¨¡æ€æ™ºèƒ½è®°å¿†ç³»ç»Ÿ MemBoxã€‚MemBox å¯ä»¥è‡ªåŠ¨ä»å¯¹è¯ä¸­æå–å…³é”®ä¿¡æ¯ã€æ„å»ºç”¨æˆ·ç”»åƒã€ç†è§£å›¾ç‰‡å†…å®¹ï¼Œå¹¶åœ¨åç»­å¯¹è¯ä¸­æ™ºèƒ½æ£€ç´¢ç›¸å…³è®°å¿†ï¼Œæä¾›ä¸ªæ€§åŒ–å›ç­”ã€‚å…ˆæ¥çœ‹çœ‹æœ€ç»ˆæ•ˆæœï¼š</p>
<p/>
<h2 data-id="heading-3">4. å‡†å¤‡å·¥ä½œ</h2>
<h3 data-id="heading-4">4.1 ç¯å¢ƒè¦æ±‚</h3>
<ul>
<li>Docker å’Œ Docker Composeï¼ˆè¿è¡Œ seekdbï¼‰</li>
<li>Node.js 20+ï¼ˆå‰ç«¯ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpnpm.io%2F" target="_blank" title="https://pnpm.io/" ref="nofollow noopener noreferrer">pnpm</a>ï¼ˆå‰ç«¯åŒ…ç®¡ç†ï¼‰</li>
<li>Python 3.11+ï¼ˆåç«¯ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.astral.sh%2Fuv%2F" target="_blank" title="https://docs.astral.sh/uv/" ref="nofollow noopener noreferrer">uv</a>ï¼ˆPython åŒ…ç®¡ç†ï¼‰</li>
</ul>
<h3 data-id="heading-5">4.2 è·å– API Key</h3>
<p>æœ¬é¡¹ç›®ä½¿ç”¨é˜¿é‡Œäº‘é€šä¹‰åƒé—®æ¨¡å‹ï¼Œéœ€è¦è·å–é˜¿é‡Œäº‘ç™¾ç‚¼çš„ API Keyï¼š</p>
<ol>
<li>è®¿é—®<a href="https://link.juejin.cn?target=https%3A%2F%2Fbailian.console.aliyun.com%2Fcn-beijing%2F%3FapiKey%3D1%23%2Fapi-key" target="_blank" title="https://bailian.console.aliyun.com/cn-beijing/?apiKey=1#/api-key" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘ç™¾ç‚¼æ§åˆ¶å°</a>ã€‚</li>
<li>å¼€é€šæœåŠ¡å¹¶åˆ›å»º API Keyã€‚</li>
</ol>
<h3 data-id="heading-6">4.3 å¯åŠ¨ SeekDB</h3>
<p>ä½¿ç”¨ Docker å¿«é€Ÿå¯åŠ¨ seekdbï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker run -d \
  --name seekdb \
  -p 2881:2881 \
  -v seekdb_data:/var/lib/oceanbase \
  oceanbase/seekdb:1.0.1.0-100000392025122619
</code></pre>
<h3 data-id="heading-7">4.4 ç¯å¢ƒå˜é‡è®¾ç½®</h3>
<p>æœ¬é¡¹ç›®éœ€è¦é…ç½®ç¯å¢ƒå˜é‡ï¼Œå¯å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcr7258%2Fmembox%2Fblob%2Fmain%2F.env.example" target="_blank" title="https://github.com/cr7258/membox/blob/main/.env.example" ref="nofollow noopener noreferrer">.env.example</a> æ–‡ä»¶ï¼Œå°†å…¶å¤åˆ¶ä¸º <code>.env</code> å¹¶å¡«å…¥ç›¸åº”å€¼ã€‚å…¶ä¸­åªéœ€é…ç½® <code>DASHSCOPE_API_KEY</code> ç”¨äºè°ƒç”¨åƒé—®å¤§æ¨¡å‹ï¼Œå…¶ä»–å˜é‡å¯ä¿æŒé»˜è®¤ã€‚</p>
<h2 data-id="heading-8">5. æ•´ä½“æ¶æ„</h2>
<p>å½“ç”¨æˆ·ä¸ MemBox å¯¹è¯æ—¶ï¼Œå®Œæ•´çš„è¯·æ±‚æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>ç”¨æˆ·è¾“å…¥</strong>ï¼šç”¨æˆ·åœ¨å‰ç«¯å‘é€æ¶ˆæ¯ï¼ˆå¯åŒ…å«æ–‡å­—å’Œå›¾ç‰‡ï¼‰ã€‚</li>
<li><strong>è®°å¿†æ£€ç´¢</strong>ï¼šå‰ç«¯è°ƒç”¨åç«¯æœç´¢ç›¸å…³è®°å¿†ã€‚</li>
<li><strong>å‘é‡æœç´¢</strong>ï¼šåç«¯ä½¿ç”¨ PowerMem å°†æŸ¥è¯¢é€šè¿‡ text-embedding-v4 æ¨¡å‹è½¬æ¢ä¸ºå‘é‡ï¼Œåœ¨ seekdb ä¸­è¿›è¡Œç›¸ä¼¼åº¦æœç´¢ã€‚</li>
<li><strong>è¿”å›ç»“æœ</strong>ï¼šseekdb è¿”å›ç›¸å…³è®°å¿†å’Œç”¨æˆ·ç”»åƒã€‚</li>
<li><strong>ä¸Šä¸‹æ–‡æ³¨å…¥</strong>ï¼šå‰ç«¯å°†è®°å¿†ä¸Šä¸‹æ–‡æ³¨å…¥ LLM çš„ System Promptã€‚</li>
<li><strong>ç”Ÿæˆå›ç­”</strong>ï¼šå‰ç«¯è°ƒç”¨ qwen-plus æ¨¡å‹ç”Ÿæˆå›ç­”ï¼Œå¦‚æœ‰å›¾ç‰‡åˆ™ä½¿ç”¨å¤šæ¨¡æ€æ¨¡å‹ qwen-vl-plus æ¨¡å‹ç†è§£å›¾ç‰‡å†…å®¹ã€‚</li>
<li><strong>è¿”å›å“åº”</strong>ï¼šLLM å°†å›ç­”è¿”å›ç»™ç”¨æˆ·ã€‚</li>
<li><strong>è®°å¿†å­˜å‚¨</strong>ï¼šå¯¹è¯ç»“æŸåï¼ŒPowerMem æå–æ–°çš„äº‹å®ä¿¡æ¯ï¼Œé€šè¿‡ text-embedding-v4 å‘é‡åŒ–åå­˜å…¥ seekdbã€‚</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42eee5b732d74a14a4ecae6ef8d66c48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2U3ZW4yNTg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523361&amp;x-signature=Fsx5cMijoiFIEUF5lF4fFbPNwNw%3D" alt="" loading="lazy"/></p>
<p>æœ¬æ–‡çš„å®Œæ•´ä»£ç å¯ä»¥åœ¨ Github ä¸Šæ‰¾åˆ°ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcr7258%2Fmembox" target="_blank" title="https://github.com/cr7258/membox" ref="nofollow noopener noreferrer">github.com/cr7258/membâ€¦</a></p>
<h2 data-id="heading-9">6. æ­å»ºåç«¯ï¼ˆFastAPI + PowerMemï¼‰</h2>
<h3 data-id="heading-10">6.1 é…ç½® PowerMem</h3>
<p>PowerMem æ”¯æŒä¸¤ç§é…ç½®æ–¹å¼ï¼š</p>
<ol>
<li><strong>ç¯å¢ƒå˜é‡ï¼ˆ<code>.env</code> æ–‡ä»¶ï¼‰</strong>ï¼šé€‚åˆå¤§å¤šæ•°åœºæ™¯ï¼ŒPowerMem ä¼šè‡ªåŠ¨åŠ è½½ã€‚</li>
<li><strong>JSON/ Python å­—å…¸é…ç½®</strong>ï¼šé€‚åˆåœ¨ä»£ç ä¸­çµæ´»ç®¡ç†é…ç½®çš„åœºæ™¯ã€‚</li>
</ol>
<p>æœ¬é¡¹ç›®ä½¿ç”¨ JSON/Python å­—å…¸é…ç½®æ–¹å¼ï¼Œ<code>config.py</code> é…ç½®å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python">config = {
    <span class="hljs-comment"># LLM é…ç½® - ç”¨äºæ™ºèƒ½è®°å¿†æå–å’Œç”¨æˆ·ç”»åƒ</span>
    <span class="hljs-string">"llm"</span>: {
        <span class="hljs-string">"provider"</span>: <span class="hljs-string">"qwen"</span>,
        <span class="hljs-string">"config"</span>: {
            <span class="hljs-string">"model"</span>: os.getenv(<span class="hljs-string">"LLM_MODEL"</span>, <span class="hljs-string">"qwen-plus"</span>),
            <span class="hljs-string">"api_key"</span>: os.getenv(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>),
        }
    },
    
    <span class="hljs-comment"># Embedding é…ç½® - ç”¨äºå‘é‡åŒ–</span>
    <span class="hljs-string">"embedder"</span>: {
        <span class="hljs-string">"provider"</span>: <span class="hljs-string">"qwen"</span>,
        <span class="hljs-string">"config"</span>: {
            <span class="hljs-string">"model"</span>: os.getenv(<span class="hljs-string">"EMBEDDING_MODEL"</span>, <span class="hljs-string">"text-embedding-v4"</span>),
            <span class="hljs-string">"embedding_dims"</span>: <span class="hljs-built_in">int</span>(os.getenv(<span class="hljs-string">"EMBEDDING_DIMS"</span>, <span class="hljs-string">"1536"</span>)),
            <span class="hljs-string">"api_key"</span>: os.getenv(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>),
        }
    },
    
    <span class="hljs-comment"># å‘é‡å­˜å‚¨é…ç½® - SeekDB (OceanBase)</span>
    <span class="hljs-string">"vector_store"</span>: {
        <span class="hljs-string">"provider"</span>: <span class="hljs-string">"oceanbase"</span>,
        <span class="hljs-string">"config"</span>: {
            <span class="hljs-string">"collection_name"</span>: <span class="hljs-string">"memories"</span>,
            <span class="hljs-string">"embedding_model_dims"</span>: <span class="hljs-built_in">int</span>(os.getenv(<span class="hljs-string">"EMBEDDING_DIMS"</span>, <span class="hljs-string">"1536"</span>)),
            <span class="hljs-string">"host"</span>: os.getenv(<span class="hljs-string">"OCEANBASE_HOST"</span>, <span class="hljs-string">"127.0.0.1"</span>),
            <span class="hljs-string">"port"</span>: <span class="hljs-built_in">int</span>(os.getenv(<span class="hljs-string">"OCEANBASE_PORT"</span>, <span class="hljs-string">"2881"</span>)),
            <span class="hljs-string">"user"</span>: os.getenv(<span class="hljs-string">"OCEANBASE_USER"</span>, <span class="hljs-string">"root@sys"</span>),
            <span class="hljs-string">"password"</span>: os.getenv(<span class="hljs-string">"OCEANBASE_PASSWORD"</span>, <span class="hljs-string">""</span>),
            <span class="hljs-string">"db_name"</span>: os.getenv(<span class="hljs-string">"OCEANBASE_DATABASE"</span>, <span class="hljs-string">"membox"</span>),
        }
    },
}
</code></pre>
<h3 data-id="heading-11">6.2 è®°å¿†ç®¡ç†</h3>
<p><code>memory_manager.py</code> å°è£…äº† PowerMem çš„æ ¸å¿ƒæ“ä½œï¼Œä¸»è¦åŒ…å«ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li><strong>add_memory</strong>ï¼šä»å¯¹è¯ä¸­æå–å¹¶ä¿å­˜è®°å¿†ã€‚é€šè¿‡ <code>infer=True</code> å¯ç”¨æ™ºèƒ½æå–ï¼ŒPowerMem ä¼šè‡ªåŠ¨ä»å¯¹è¯ä¸­æå–äº‹å®ä¿¡æ¯ã€å»é‡ã€æ›´æ–°å†²çªå†…å®¹å¹¶æ•´åˆç›¸å…³è®°å¿†ã€‚é€šè¿‡ <code>user_id</code> å®ç°ç”¨æˆ·éš”ç¦»ï¼Œæ¯ä¸ªç”¨æˆ·çš„è®°å¿†ç‹¬ç«‹å­˜å‚¨ã€‚</li>
<li><strong>search_memory</strong>ï¼šæœç´¢ä¸æŸ¥è¯¢ç›¸å…³çš„è®°å¿†ã€‚é€šè¿‡ <code>add_profile=True</code> åœ¨è¿”å›ç»“æœä¸­åŒ…å«ç”¨æˆ·ç”»åƒï¼Œå¸®åŠ© LLM ç”Ÿæˆæ›´ä¸ªæ€§åŒ–çš„å›å¤ã€‚æœç´¢æ—¶ä¼šæ ¹æ® <code>user_id</code> è¿‡æ»¤ï¼Œåªè¿”å›å½“å‰ç”¨æˆ·çš„è®°å¿†ã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> powermem <span class="hljs-keyword">import</span> UserMemory
<span class="hljs-keyword">from</span> .config <span class="hljs-keyword">import</span> config

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryManager</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.memory = UserMemory(config=config)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add_memory</span>(<span class="hljs-params">self, messages: <span class="hljs-built_in">list</span>, user_id: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">dict</span>:
        <span class="hljs-string">"""ä»å¯¹è¯ä¸­æå–å¹¶ä¿å­˜è®°å¿†"""</span>
        result = self.memory.add(
            messages=messages,
            user_id=user_id,
            infer=<span class="hljs-literal">True</span>  <span class="hljs-comment"># å¯ç”¨æ™ºèƒ½æå–</span>
        )
        <span class="hljs-keyword">return</span> result
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">search_memory</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, user_id: <span class="hljs-built_in">str</span>, limit: <span class="hljs-built_in">int</span> = <span class="hljs-number">5</span></span>) -&gt; <span class="hljs-built_in">dict</span>:
        <span class="hljs-string">"""æœç´¢ç›¸å…³è®°å¿†"""</span>
        results = self.memory.search(
            query=query,
            user_id=user_id,
            limit=limit,
            add_profile=<span class="hljs-literal">True</span>  <span class="hljs-comment"># åŒæ—¶è¿”å›ç”¨æˆ·ç”»åƒ</span>
        )
        <span class="hljs-keyword">return</span> results
</code></pre>
<h3 data-id="heading-12">6.3 å®ç° API è·¯ç”±</h3>
<p><code>routes/memory.py</code> æä¾›è®°å¿†ç›¸å…³çš„ RESTful APIï¼Œä¾›å‰ç«¯è°ƒç”¨ï¼š</p>
<ul>
<li><strong>POST /api/memory/add</strong>ï¼šå‰ç«¯åœ¨å¯¹è¯ç»“æŸåè°ƒç”¨ï¼Œå°†ç”¨æˆ·å’Œ AI çš„å¯¹è¯å†…å®¹å‘é€åˆ°åç«¯è¿›è¡Œè®°å¿†æå–å’Œå­˜å‚¨ã€‚</li>
<li><strong>POST /api/memory/search</strong>ï¼šå‰ç«¯åœ¨ç”¨æˆ·å‘é€æ–°æ¶ˆæ¯å‰è°ƒç”¨ï¼Œæœç´¢ç›¸å…³è®°å¿†å’Œç”¨æˆ·ç”»åƒï¼Œæ³¨å…¥åˆ° LLM çš„ç³»ç»Ÿæç¤ºè¯ä¸­ã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> APIRouter, HTTPException
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel
<span class="hljs-keyword">from</span> ..memory_manager <span class="hljs-keyword">import</span> get_memory_manager

router = APIRouter()

<span class="hljs-keyword">class</span> <span class="hljs-title class_">AddMemoryRequest</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    messages: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">str</span>]]
    user_id: <span class="hljs-built_in">str</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SearchMemoryRequest</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    query: <span class="hljs-built_in">str</span>
    user_id: <span class="hljs-built_in">str</span>
    limit: <span class="hljs-built_in">int</span> = <span class="hljs-number">5</span>

<span class="hljs-meta">@router.post(<span class="hljs-params"><span class="hljs-string">"/add"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">add_memory</span>(<span class="hljs-params">request: AddMemoryRequest</span>):
    <span class="hljs-string">"""æ·»åŠ è®°å¿†"""</span>
    mm = get_memory_manager()
    result = mm.add_memory(
        messages=request.messages,
        user_id=request.user_id
    )
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"success"</span>: <span class="hljs-literal">True</span>, <span class="hljs-string">"result"</span>: result}

<span class="hljs-meta">@router.post(<span class="hljs-params"><span class="hljs-string">"/search"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">search_memory</span>(<span class="hljs-params">request: SearchMemoryRequest</span>):
    <span class="hljs-string">"""æœç´¢è®°å¿†"""</span>
    mm = get_memory_manager()
    results = mm.search_memory(
        query=request.query,
        user_id=request.user_id,
        limit=request.limit
    )
    <span class="hljs-keyword">return</span> results
</code></pre>
<h2 data-id="heading-13">7. æ·»åŠ å¤šæ¨¡æ€æ”¯æŒ</h2>
<p>MemBox æ”¯æŒå›¾ç‰‡ç†è§£åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥ä¸Šä¼ å›¾ç‰‡å¹¶æé—®ã€‚æ•´ä½“æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>å›¾ç‰‡ä¸Šä¼ </strong>ï¼šç”¨æˆ·é€‰æ‹©å›¾ç‰‡ï¼Œå‰ç«¯ä¸Šä¼ åˆ°åç«¯è·å– URLï¼Œç”¨äºåœ¨èŠå¤©å†å²è®°å½•ä¸­æ˜¾ç¤ºå›¾ç‰‡é¢„è§ˆã€‚</li>
<li><strong>å›¾ç‰‡ç†è§£</strong>ï¼šå‰ç«¯å°†å›¾ç‰‡ URL ä¼ ç»™ Vercel AI SDKï¼ŒSDK è‡ªåŠ¨ä¸‹è½½å›¾ç‰‡å¹¶è½¬æˆ base64 å‘é€ç»™ qwen-vl-plusã€‚</li>
<li><strong>è®°å¿†ä¿å­˜</strong>ï¼šLLM çš„å›å¤ï¼ˆåŒ…å«å¯¹å›¾ç‰‡çš„ç†è§£æè¿°ï¼‰ä½œä¸ºæ–‡æœ¬ä¿å­˜åˆ° PowerMem ä¸­ã€‚</li>
</ol>
<p>è¿™æ ·åšçš„å¥½å¤„æ˜¯åç«¯åªéœ€æä¾›ç®€å•çš„å›¾ç‰‡å­˜å‚¨æœåŠ¡ï¼Œå¤šæ¨¡æ€ç†è§£ç”± Vercel AI SDK å’Œå‰ç«¯ç»Ÿä¸€å¤„ç†ã€‚</p>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šPowerMem ä¹ŸåŸç”Ÿæ”¯æŒå¤šæ¨¡æ€è®°å¿†ï¼Œå¯ä»¥åœ¨é…ç½®ä¸­è®¾ç½® <code>enable_vision: True</code> å’Œ <code>vision_details: "auto"</code> å¹¶é…ç½®ç›¸åº”çš„å¤šæ¨¡æ€æ¨¡å‹ï¼ˆå¦‚ qwen-vl-plusï¼‰ï¼Œè®©åç«¯ç›´æ¥ç†è§£å›¾ç‰‡å†…å®¹å¹¶å­˜å‚¨ä¸ºè®°å¿†ã€‚å…·ä½“å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Foceanbase%2Fpowermem%2Fblob%2Fmain%2Fdocs%2Fexamples%2Fscenario_7_multimodal.md" target="_blank" title="https://github.com/oceanbase/powermem/blob/main/docs/examples/scenario_7_multimodal.md" ref="nofollow noopener noreferrer">PowerMem å¤šæ¨¡æ€ç¤ºä¾‹</a>ã€‚</p>
</blockquote>
<h3 data-id="heading-14">7.1 å›¾ç‰‡ä¸Šä¼  API</h3>
<p>åç«¯ <code>routes/upload.py</code> æä¾›å›¾ç‰‡ä¸Šä¼ æ¥å£ï¼Œå°†å›¾ç‰‡ä¿å­˜åˆ°æœ¬åœ°å¹¶è¿”å›è®¿é—® URLï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@router.post(<span class="hljs-params"><span class="hljs-string">"/images"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">upload_images</span>(<span class="hljs-params">
    files: <span class="hljs-type">List</span>[UploadFile] = File(<span class="hljs-params">...</span>),
    user_id: <span class="hljs-built_in">str</span> = Form(<span class="hljs-params">...</span>)
</span>):
    <span class="hljs-keyword">try</span>:
        uploaded_urls = []
        uploaded_filenames = []
        
        <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> files:
            <span class="hljs-comment"># Check file type</span>
            ext = get_file_extension(file.filename)
            <span class="hljs-keyword">if</span> ext <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> ALLOWED_EXTENSIONS:
                <span class="hljs-keyword">raise</span> HTTPException(...)
            
            <span class="hljs-comment"># Generate filename and save</span>
            filename = generate_filename(file.filename)
            filepath = os.path.join(UPLOAD_DIR, filename)
            
            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filepath, <span class="hljs-string">"wb"</span>) <span class="hljs-keyword">as</span> f:
                content = <span class="hljs-keyword">await</span> file.read()
                f.write(content)
            
            <span class="hljs-comment"># Generate image URL</span>
            base_url = os.getenv(<span class="hljs-string">"BASE_URL"</span>, <span class="hljs-string">"http://localhost:8000"</span>)
            image_url = <span class="hljs-string">f"<span class="hljs-subst">{base_url}</span>/uploads/<span class="hljs-subst">{filename}</span>"</span>
            
            uploaded_urls.append(image_url)
            uploaded_filenames.append(filename)
        
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"success"</span>: <span class="hljs-literal">True</span>,
            <span class="hljs-string">"count"</span>: <span class="hljs-built_in">len</span>(uploaded_urls),
            <span class="hljs-string">"filenames"</span>: uploaded_filenames,
            <span class="hljs-string">"urls"</span>: uploaded_urls
        }
    
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-comment"># ... error handling</span>
        <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">500</span>, detail=<span class="hljs-built_in">str</span>(e))
</code></pre>
<h3 data-id="heading-15">7.2 å¯åŠ¨åç«¯</h3>
<p>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨åç«¯æœåŠ¡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> backend
uv run membox
</code></pre>
<h2 data-id="heading-16">8. æ­å»ºå‰ç«¯ï¼ˆNext.js + Vercel AI SDKï¼‰</h2>
<p>å‰ç«¯åŸºäº Next.js æ„å»ºï¼Œä¸»è¦ä½¿ç”¨ä»¥ä¸‹æŠ€æœ¯æ ˆï¼š</p>
<ul>
<li>Vercel AI SDK</li>
<li>AI Elements</li>
<li>ui-ux-pro-max-skill</li>
</ul>
<h3 data-id="heading-17">8.1 Vercel AI SDK</h3>
<p>å°†å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰é›†æˆåˆ°åº”ç”¨ä¸­æ˜¯ä¸€ä»¶å¤æ‚çš„äº‹æƒ…ï¼Œè€Œä¸”é«˜åº¦ä¾èµ–äºä½ ä½¿ç”¨çš„æ¨¡å‹æä¾›å•†ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fai-sdk.dev%2F" target="_blank" title="https://ai-sdk.dev/" ref="nofollow noopener noreferrer">Vercel AI SDK</a> æ ‡å‡†åŒ–äº†è·¨ä¸åŒæä¾›å•†çš„ AI æ¨¡å‹é›†æˆæ–¹å¼ï¼Œè®©å¼€å‘è€…å¯ä»¥ä¸“æ³¨äºæ„å»ºä¼˜ç§€çš„ AI åº”ç”¨ï¼Œè€Œä¸æ˜¯åœ¨æŠ€æœ¯ç»†èŠ‚ä¸Šæµªè´¹æ—¶é—´ã€‚</p>
<p>AI SDK åŒ…å«ä¸¤ä¸ªä¸»è¦æ¨¡å—ï¼š</p>
<ul>
<li><strong>AI SDK Core</strong>ï¼šæä¾›ç»Ÿä¸€çš„ APIï¼Œç”¨äºç”Ÿæˆæ–‡æœ¬ã€ç»“æ„åŒ–å¯¹è±¡ã€å·¥å…·è°ƒç”¨ä»¥åŠä½¿ç”¨ LLM æ„å»º Agentã€‚</li>
<li><strong>AI SDK UI</strong>ï¼šæä¾›ä¸€ç»„ä¸æ¡†æ¶æ— å…³çš„ hooksï¼Œç”¨äºå¿«é€Ÿæ„å»ºèŠå¤©ç•Œé¢å’Œç”Ÿæˆå¼ UIã€‚</li>
</ul>
<h3 data-id="heading-18">8.2 AI Elements</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fai-elements.dev%2F" target="_blank" title="https://ai-elements.dev/" ref="nofollow noopener noreferrer">AI Elements</a> æ˜¯åŸºäº shadcn/ui æ„å»ºçš„ç»„ä»¶åº“ï¼Œå¸®åŠ©å¼€å‘è€…æ›´å¿«åœ°æ„å»º AI åŸç”Ÿåº”ç”¨ã€‚å®ƒæä¾›äº†é¢„æ„å»ºçš„ç»„ä»¶ï¼Œå¦‚å¯¹è¯æ¡†ã€æ¶ˆæ¯æ°”æ³¡ç­‰ï¼Œå¯ä»¥é€šè¿‡ CLI å‘½ä»¤å¿«é€Ÿå®‰è£…ï¼š</p>
<h3 data-id="heading-19">8.3 UI/UX è®¾è®¡</h3>
<p>æœ¬é¡¹ç›®ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnextlevelbuilder%2Fui-ux-pro-max-skill" target="_blank" title="https://github.com/nextlevelbuilder/ui-ux-pro-max-skill" ref="nofollow noopener noreferrer">ui-ux-pro-max-skill</a> è¾…åŠ©è®¾è®¡é¡µé¢é£æ ¼å’Œæ ·å¼ã€‚è¿™æ˜¯ä¸€ä¸ª AI Skillï¼Œèƒ½å¤Ÿä¸ºå¤šå¹³å°æä¾›ä¸“ä¸šçš„ UI/UX è®¾è®¡æ™ºèƒ½ï¼Œè‡ªåŠ¨ç”Ÿæˆè®¾è®¡ç³»ç»Ÿå¹¶æ¨èæœ€ä½³çš„é¢œè‰²ã€å­—ä½“å’Œé—´è·æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-20">8.4 èŠå¤©çŠ¶æ€ç®¡ç†</h3>
<p><code>app/page.tsx</code> æ˜¯å‰ç«¯çš„æ ¸å¿ƒé¡µé¢ï¼Œä½¿ç”¨å¤šä¸ª hooks ç®¡ç†çŠ¶æ€ï¼š</p>
<ul>
<li><strong>useUser</strong>ï¼šç®¡ç†ç”¨æˆ·ç™»å½•ã€åˆ‡æ¢ã€ç™»å‡ºã€‚</li>
<li><strong>useChatSessions</strong>ï¼šç®¡ç†èŠå¤©ä¼šè¯çš„åˆ›å»ºã€åˆ‡æ¢ã€åˆ é™¤ï¼ŒæŒ‰ç”¨æˆ·éš”ç¦»ã€‚</li>
<li><strong>useChat</strong>ï¼šVercel AI SDK æä¾›çš„ hookï¼Œç®¡ç†æ¶ˆæ¯å‘é€å’Œæ¥æ”¶ã€‚</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { useChat } <span class="hljs-keyword">from</span> <span class="hljs-string">"@ai-sdk/react"</span>;
<span class="hljs-keyword">import</span> { useChatSessions } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/hooks/use-chat-sessions"</span>;
<span class="hljs-keyword">import</span> { useUser } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/hooks/use-user"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [pendingImages, setPendingImages] = useState&lt;<span class="hljs-built_in">string</span>[]&gt;([]);
  
  <span class="hljs-comment">// ç”¨æˆ·ç®¡ç†</span>
  <span class="hljs-keyword">const</span> { currentUser, login, switchUser, logout } = <span class="hljs-title function_">useUser</span>();

  <span class="hljs-comment">// èŠå¤©ä¼šè¯ç®¡ç†ï¼ˆæŒ‰ç”¨æˆ·è¿‡æ»¤ï¼‰</span>
  <span class="hljs-keyword">const</span> {
    sessions,
    currentSession,
    currentSessionId,
    createSession,
    updateSessionMessages,
    deleteSession,
    selectSession,
    newChat,
  } = <span class="hljs-title function_">useChatSessions</span>(currentUser?.<span class="hljs-property">id</span> ?? <span class="hljs-literal">null</span>);

  <span class="hljs-comment">// èŠå¤© hook</span>
  <span class="hljs-keyword">const</span> { messages, sendMessage, status, setMessages, stop } = <span class="hljs-title function_">useChat</span>({
    <span class="hljs-attr">id</span>: currentSessionId || <span class="hljs-literal">undefined</span>,
  });

  <span class="hljs-comment">// å½“æ¶ˆæ¯å˜åŒ–æ—¶ï¼ŒåŒæ­¥åˆ°ä¼šè¯</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (currentSessionId &amp;&amp; messages.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-title function_">updateSessionMessages</span>(currentSessionId, messages);
    }
  }, [messages, currentSessionId, updateSessionMessages]);

  <span class="hljs-comment">// åˆ‡æ¢ä¼šè¯æ—¶ï¼ŒåŠ è½½å¯¹åº”çš„æ¶ˆæ¯</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (currentSession) {
      <span class="hljs-title function_">setMessages</span>(currentSession.<span class="hljs-property">messages</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">setMessages</span>([]);
    }
  }, [currentSessionId, setMessages]);
  
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<h3 data-id="heading-21">8.5 å‘é€å¤šæ¨¡æ€æ¶ˆæ¯</h3>
<p>æ„å»ºåŒ…å«æ–‡æœ¬å’Œå›¾ç‰‡çš„å¤šæ¨¡æ€æ¶ˆæ¯ï¼ˆ<code>app/page.tsx</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> handleSubmit = <span class="hljs-title function_">useCallback</span>(
  <span class="hljs-keyword">async</span> (<span class="hljs-attr">message</span>: { <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span> }) =&gt; {
    <span class="hljs-keyword">if</span> (!message.<span class="hljs-property">text</span>.<span class="hljs-title function_">trim</span>() &amp;&amp; pendingImages.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// å°† userId å­˜å…¥ cookieï¼Œä¾› API Route è¯»å–</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span> = <span class="hljs-string">`membox_user_id=<span class="hljs-subst">${userId}</span>; path=/; max-age=86400`</span>;

    <span class="hljs-comment">// æ„å»ºåŒ…å«å›¾ç‰‡å’Œæ–‡æœ¬çš„ parts æ•°ç»„</span>
    <span class="hljs-keyword">const</span> <span class="hljs-attr">parts</span>: <span class="hljs-title class_">Array</span>&lt;
      { <span class="hljs-attr">type</span>: <span class="hljs-string">'text'</span>; <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span> } | 
      { <span class="hljs-attr">type</span>: <span class="hljs-string">'file'</span>; <span class="hljs-attr">mediaType</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span> }
    &gt; = [];
    
    <span class="hljs-comment">// å…ˆæ·»åŠ å›¾ç‰‡</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> url <span class="hljs-keyword">of</span> pendingImages) {
      parts.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">'file'</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
        <span class="hljs-attr">mediaType</span>: <span class="hljs-string">'image/png'</span>,
        <span class="hljs-attr">url</span>: url,
      });
    }
    
    <span class="hljs-comment">// å†æ·»åŠ æ–‡æœ¬</span>
    parts.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">type</span>: <span class="hljs-string">'text'</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
      <span class="hljs-attr">text</span>: message.<span class="hljs-property">text</span> || <span class="hljs-string">'Please describe these images'</span>,
    });

    <span class="hljs-comment">// æ¸…ç©ºå¾…å‘é€çš„å›¾ç‰‡</span>
    <span class="hljs-title function_">setPendingImages</span>([]);

    <span class="hljs-comment">// å‘é€æ¶ˆæ¯åˆ° /api/chatï¼Œç”± API Route è°ƒç”¨ LLM</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">sendMessage</span>({ parts });
  },
  [sendMessage, userId, pendingImages]
);
</code></pre>
<h3 data-id="heading-22">8.6 è°ƒç”¨ LLM ç”Ÿæˆå›å¤</h3>
<p><code>app/api/chat/route.ts</code> æ˜¯å‰ç«¯çš„æ ¸å¿ƒ API Routeï¼Œè´Ÿè´£ï¼š</p>
<ol>
<li><strong>æœç´¢è®°å¿†</strong>ï¼šè°ƒç”¨åç«¯ <code>/api/memory/search</code> è·å–ç›¸å…³è®°å¿†å’Œç”¨æˆ·ç”»åƒã€‚</li>
<li><strong>è°ƒç”¨ LLM</strong>ï¼šå°†è®°å¿†ä¸Šä¸‹æ–‡æ³¨å…¥ System Promptï¼Œè°ƒç”¨åƒé—®æ¨¡å‹ç”Ÿæˆå›å¤ã€‚</li>
<li><strong>ä¿å­˜è®°å¿†</strong>ï¼šåœ¨ LLM å›å¤å®Œæˆåï¼Œè°ƒç”¨åç«¯ <code>/api/memory/add</code> ä¿å­˜è®°å¿†ã€‚</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { convertToModelMessages, streamText, consumeStream, <span class="hljs-title class_">UIMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'ai'</span>;
<span class="hljs-keyword">import</span> { createOpenAICompatible } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ai-sdk/openai-compatible'</span>;

<span class="hljs-comment">// åˆ›å»º Qwen å®¢æˆ·ç«¯ï¼ˆå…¼å®¹ OpenAI åè®®ï¼‰</span>
<span class="hljs-keyword">const</span> qwen = <span class="hljs-title function_">createOpenAICompatible</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'qwen'</span>,
  <span class="hljs-attr">apiKey</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">DASHSCOPE_API_KEY</span>,
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'https://dashscope.aliyuncs.com/compatible-mode/v1'</span>,
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params">req: Request</span>) {
  <span class="hljs-comment">// æ¥æ”¶å‰ç«¯å‘é€çš„å¯¹è¯å†å²ï¼ˆåŒ…å« parts æ ¼å¼çš„å¤šæ¨¡æ€æ¶ˆæ¯ï¼‰</span>
  <span class="hljs-keyword">const</span> { messages }: { <span class="hljs-attr">messages</span>: <span class="hljs-title class_">UIMessage</span>[] } = <span class="hljs-keyword">await</span> req.<span class="hljs-title function_">json</span>();

  <span class="hljs-comment">// ä» cookie è·å–ç”¨æˆ· ID</span>
  <span class="hljs-keyword">const</span> cookies = req.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'cookie'</span>) || <span class="hljs-string">''</span>;
  <span class="hljs-keyword">const</span> userIdMatch = cookies.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/membox_user_id=([^;]+)/</span>);
  <span class="hljs-keyword">const</span> userId = userIdMatch?.[<span class="hljs-number">1</span>] ?? <span class="hljs-string">'default_user'</span>;

  <span class="hljs-comment">// è·å–æœ€åä¸€æ¡ç”¨æˆ·æ¶ˆæ¯çš„æ–‡æœ¬</span>
  <span class="hljs-keyword">const</span> lastMessage = messages.<span class="hljs-title function_">at</span>(-<span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> lastMessageText = lastMessage?.<span class="hljs-property">parts</span>?.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">p</span>) =&gt;</span> p.<span class="hljs-property">type</span> === <span class="hljs-string">'text'</span>)?.<span class="hljs-property">text</span> ?? <span class="hljs-string">''</span>;

  <span class="hljs-comment">// æ£€æµ‹æ˜¯å¦æœ‰å›¾ç‰‡ï¼Œé€‰æ‹©å¯¹åº”æ¨¡å‹</span>
  <span class="hljs-keyword">const</span> hasImages = messages.<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">m</span>) =&gt;</span> m.<span class="hljs-property">parts</span>?.<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">p</span>) =&gt;</span> p.<span class="hljs-property">type</span> === <span class="hljs-string">'file'</span>));
  <span class="hljs-keyword">const</span> modelName = hasImages ? <span class="hljs-string">'qwen-vl-plus'</span> : <span class="hljs-string">'qwen-plus'</span>;

  <span class="hljs-comment">// 1. æœç´¢ç›¸å…³è®°å¿†</span>
  <span class="hljs-keyword">const</span> backendUrl = process.<span class="hljs-property">env</span>.<span class="hljs-property">NEXT_PUBLIC_BACKEND_URL</span> ?? <span class="hljs-string">'http://localhost:8000'</span>;
  <span class="hljs-keyword">let</span> memoryContext = <span class="hljs-string">''</span>;
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> searchRes = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">${backendUrl}</span>/api/memory/search`</span>, {
      <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
      <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> },
      <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
        <span class="hljs-attr">query</span>: lastMessageText,
        <span class="hljs-attr">user_id</span>: userId,
        <span class="hljs-attr">limit</span>: <span class="hljs-number">5</span>,
      }),
    });

    <span class="hljs-keyword">if</span> (searchRes.<span class="hljs-property">ok</span>) {
      <span class="hljs-keyword">const</span> searchData = <span class="hljs-keyword">await</span> searchRes.<span class="hljs-title function_">json</span>();
      <span class="hljs-comment">// ç”¨æˆ·ç”»åƒ</span>
      <span class="hljs-keyword">if</span> (searchData.<span class="hljs-property">profile_content</span>) {
        memoryContext += <span class="hljs-string">`\nUser Profile: <span class="hljs-subst">${searchData.profile_content}</span>`</span>;
      }
      <span class="hljs-comment">// ç›¸å…³è®°å¿†</span>
      <span class="hljs-keyword">if</span> (searchData.<span class="hljs-property">results</span>?.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
        memoryContext += <span class="hljs-string">'\n\nRelated Memories:'</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> mem <span class="hljs-keyword">of</span> searchData.<span class="hljs-property">results</span>) {
          memoryContext += <span class="hljs-string">`\n- <span class="hljs-subst">${mem.memory}</span>`</span>;
        }
      }
    }
  } <span class="hljs-keyword">catch</span> {
    <span class="hljs-comment">// å¿½ç•¥è®°å¿†æœç´¢é”™è¯¯</span>
  }

  <span class="hljs-comment">// 2. æ„å»º System Promptï¼Œæ³¨å…¥è®°å¿†ä¸Šä¸‹æ–‡</span>
  <span class="hljs-keyword">const</span> systemPrompt = <span class="hljs-string">`You are MemBox, an intelligent memory assistant...
<span class="hljs-subst">${memoryContext ? <span class="hljs-string">`Here is background information:<span class="hljs-subst">${memoryContext}</span>`</span> : <span class="hljs-string">''</span>}</span>`</span>;

  <span class="hljs-comment">// 3. è°ƒç”¨ LLM</span>
  <span class="hljs-keyword">const</span> modelMessages = <span class="hljs-keyword">await</span> <span class="hljs-title function_">convertToModelMessages</span>(messages);
  <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">streamText</span>({
    <span class="hljs-attr">model</span>: qwen.<span class="hljs-title function_">chatModel</span>(modelName),
    <span class="hljs-attr">system</span>: systemPrompt,
    <span class="hljs-attr">messages</span>: modelMessages,
    <span class="hljs-comment">// 4. LLM å›å¤å®Œæˆåä¿å­˜è®°å¿†</span>
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">onFinish</span>(<span class="hljs-params">{ text }</span>) {
      <span class="hljs-keyword">const</span> conversationToSave = [
        { <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: lastMessageText || <span class="hljs-string">'User shared images'</span> },
        { <span class="hljs-attr">role</span>: <span class="hljs-string">'assistant'</span>, <span class="hljs-attr">content</span>: text },
      ];
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">${backendUrl}</span>/api/memory/add`</span>, {
          <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
          <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> },
          <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
            <span class="hljs-attr">messages</span>: conversationToSave,
            <span class="hljs-attr">user_id</span>: userId,
          }),
        });
      } <span class="hljs-keyword">catch</span> {
        <span class="hljs-comment">// å¿½ç•¥ä¿å­˜é”™è¯¯</span>
      }
    },
  });

  <span class="hljs-keyword">return</span> result.<span class="hljs-title function_">toUIMessageStreamResponse</span>({ <span class="hljs-attr">consumeSseStream</span>: consumeStream });
}
</code></pre>
<h3 data-id="heading-23">8.7 å¯åŠ¨å‰ç«¯</h3>
<p>å®‰è£…ä¾èµ–å¹¶å¯åŠ¨å‰ç«¯æœåŠ¡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> frontend
pnpm install
pnpm dev
</code></pre>
<p>è®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3000" target="_blank" title="http://localhost:3000" ref="nofollow noopener noreferrer">http://localhost:3000</a> è®¿é—®é¡µé¢ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6dddedc8eb84b8394c0f74465d34c83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2U3ZW4yNTg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523361&amp;x-signature=NLn7qo%2FkX4TLPqxYtjipCGkSgRM%3D" alt="" loading="lazy"/></p>
<p>è¾“å…¥ç”¨æˆ·ååå³å¯å¼€å§‹èŠå¤©å¯¹è¯ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41a30cfef99a42778eaa65e35d47697d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2U3ZW4yNTg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523361&amp;x-signature=UnNB10H4AynljOSCBaagMEG8CXs%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-24">9. æ•ˆæœæ¼”ç¤º</h2>
<h3 data-id="heading-25">9.1 æ™ºèƒ½è®°å¿†</h3>
<p>é¦–å…ˆçœ‹çœ‹ PowerMem çš„ <strong>Intelligent Memoryï¼ˆæ™ºèƒ½è®°å¿†ï¼‰</strong> åŠŸèƒ½ï¼š</p>
<blockquote>
<p>ğŸ‘¤ Sevenï¼šæˆ‘æ˜¯ Sevenï¼Œåœ¨ä¸Šæµ·å·¥ä½œï¼Œå–œæ¬¢è¸¢è¶³çƒ</p>
<p>ğŸ¤– MemBoxï¼šå—¨ Sevenï¼ä¸Šæµ·çš„è¶³çƒæ°›å›´æŒºä¸é”™çš„ï¼Œé»„æµ¦åŒºå’Œå¾æ±‡åŒºéƒ½æœ‰å¾ˆå¤šçƒåœºï¼Œå‘¨æœ«ç»å¸¸èƒ½çœ‹åˆ°ä¸šä½™è”èµ›ã€‚ä½ å¹³æ—¶éƒ½åœ¨å“ªä¸ªåŒºåŸŸè¸¢çƒå‘€ï¼Ÿè¦æ˜¯ä½ å–œæ¬¢çš„è¯ï¼Œæˆ‘è¿˜å¯ä»¥æ¨èå‡ ä¸ªä¸é”™çš„è¶³çƒç¤¾ç¾¤ç»™ä½ ~</p>
</blockquote>
<p>PowerMem ä¼šå°†è¿™äº›ä¿¡æ¯æŒä¹…åŒ–å­˜å‚¨åˆ° SeekDB ä¸­ï¼Œå³ä½¿ä¼šè¯ç»“æŸä¹Ÿä¸ä¼šä¸¢å¤±ï¼Œéšæ—¶å¯ä»¥åœ¨åç»­å¯¹è¯ä¸­è¢«æ™ºèƒ½æ£€ç´¢å’Œä½¿ç”¨ã€‚</p>
<h3 data-id="heading-26">9.2 è®°å¿†æ£€ç´¢</h3>
<p>å½“ç”¨æˆ·å‘èµ·æ–°å¯¹è¯æ—¶ï¼ŒMemBox ä¼š<strong>è‡ªåŠ¨æ ¹æ®å½“å‰é—®é¢˜æ£€ç´¢ç›¸å…³è®°å¿†</strong>ã€‚è¿™æ˜¯é€šè¿‡ SeekDB çš„å‘é‡ç›¸ä¼¼åº¦æœç´¢å®ç°çš„â€”â€”å°†ç”¨æˆ·é—®é¢˜è½¬æ¢ä¸ºå‘é‡ï¼Œåœ¨è®°å¿†åº“ä¸­æ‰¾åˆ°è¯­ä¹‰æœ€ç›¸è¿‘çš„å†…å®¹ã€‚</p>
<p>ä¸‹æ¬¡å¯¹è¯æ—¶ï¼Œå³ä½¿ç”¨æˆ·æ²¡æœ‰æ˜ç¡®æåŠä¹‹å‰è¯´è¿‡çš„å†…å®¹ï¼ŒMemBox ä¹Ÿèƒ½æ™ºèƒ½å…³è”ï¼š</p>
<blockquote>
<p>ğŸ‘¤ Sevenï¼šå‘¨æœ«æœ‰ä»€ä¹ˆæ´»åŠ¨æ¨èï¼Ÿ</p>
<p>ğŸ¤– MemBoxï¼šHey Sevenï¼æ—¢ç„¶ä½ åœ¨ä¸Šæµ·è€Œä¸”å–œæ¬¢è¸¢è¶³çƒï¼Œå‘¨æœªä¸å¦‚æ¥åœºé…£ç•…æ·‹æ¼“çš„çƒå±€å§ï¼......</p>
</blockquote>
<p>æ³¨æ„ï¼ŒSeven å¹¶æ²¡æœ‰å†æ¬¡æåˆ°"è¶³çƒ"ï¼Œä½† MemBox è‡ªåŠ¨æ£€ç´¢åˆ°äº†ä¹‹å‰è®°å¿†çš„å…´è¶£çˆ±å¥½ï¼Œå¹¶æ®æ­¤ç»™å‡ºä¸ªæ€§åŒ–æ¨èã€‚</p>
<h3 data-id="heading-27">9.3 å¤šæ¨¡æ€è®°å¿†</h3>
<p>MemBox ä¸ä»…èƒ½è®°ä½æ–‡å­—ï¼Œè¿˜èƒ½<strong>ç†è§£å’Œè®°å¿†å›¾ç‰‡å†…å®¹</strong>ã€‚å½“ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡æ—¶ï¼Œå‰ç«¯ä¼šè°ƒç”¨å¤šæ¨¡æ€ LLMï¼ˆqwen-vl-plusï¼‰æ¥ç†è§£å›¾ç‰‡ï¼Œç„¶åå°†ç†è§£ç»“æœä½œä¸ºè®°å¿†å­˜å‚¨ï¼š</p>
<blockquote>
<p>ğŸ‘¤ Sevenï¼š[ä¸Šä¼ ä¸€å¼ çŒ«çš„ç…§ç‰‡] è¿™æ˜¯æˆ‘çš„çŒ«å’ªå°è“</p>
<p>ğŸ¤– MemBoxï¼šå“‡ï¼Œå°è“çœ‹èµ·æ¥å¥½å¯çˆ±ï¼è¿™åªç°ç™½ç›¸é—´çš„çŒ«å’ªè¶´åœ¨æŸ”è½¯çš„æ¯¯å­ä¸Šï¼Œé˜³å…‰æ´’åœ¨å®ƒèº«ä¸Šï¼ŒçœŸæ˜¯æ²»æ„ˆç³»çš„ç”»é¢ã€‚ä½ ä¸€å®šå¾ˆçˆ±å®ƒå§ï¼ŸçŒ«å’ªæ€»æ˜¯èƒ½å¸¦æ¥æ¸©æš–å’Œæ”¾æ¾çš„æ„Ÿè§‰ï¼Œçœ‹ç€å®ƒå®‰é™çš„æ ·å­ï¼Œå¿ƒæƒ…éƒ½ä¼šå˜å¥½å‘¢ï½</p>
</blockquote>
<p>LLM ä¸ä»…è¯†åˆ«å‡ºäº†çŒ«çš„å“ç§ï¼ˆè‹±çŸ­è“çŒ«ï¼‰ï¼Œè¿˜å°†è¿™äº›ä¿¡æ¯ä¸ç”¨æˆ·å…³è”å­˜å‚¨ã€‚ä¹‹åå†é—®èµ·æ—¶ï¼ŒMemBox èƒ½å‡†ç¡®å›å¿†ï¼š</p>
<blockquote>
<p>ğŸ‘¤ Sevenï¼šæˆ‘çš„å® ç‰©å«ä»€ä¹ˆåå­—ï¼Ÿ</p>
<p>ğŸ¤– MemBoxï¼šä½ çš„å® ç‰©å«å°è“ï¼Œæ˜¯ä¸€åªç°ç™½ç›¸é—´çš„çŒ«å’ªï¼Œç‰¹åˆ«å–œæ¬¢è¶´åœ¨æŸ”è½¯çš„æ¯¯å­ä¸Šä¼‘æ¯ã€‚</p>
</blockquote>
<h3 data-id="heading-28">9.4 ç”¨æˆ·ç”»åƒ</h3>
<p>PowerMem æœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€æ˜¯<strong>è‡ªåŠ¨æ„å»ºç”¨æˆ·ç”»åƒ</strong>ã€‚æ¯æ¬¡å¯¹è¯åï¼Œç³»ç»Ÿä¼šï¼š</p>
<ol>
<li>è·å–è¯¥ç”¨æˆ·ç°æœ‰çš„ç”»åƒï¼ˆå¦‚æœæœ‰ï¼‰ã€‚</li>
<li>åˆ†ææ–°å¯¹è¯ï¼Œæå–æ–°çš„ç”¨æˆ·ä¿¡æ¯ã€‚</li>
<li>è°ƒç”¨ LLM å°†æ–°æ—§ä¿¡æ¯æ™ºèƒ½åˆå¹¶ã€‚</li>
<li>æ›´æ–°ç”¨æˆ·ç”»åƒã€‚</li>
</ol>
<p>éšç€å¯¹è¯ç§¯ç´¯ï¼Œç”»åƒè¶Šæ¥è¶Šä¸°å¯Œï¼š</p>
<pre><code class="hljs language-diff" lang="diff">ğŸ‘¤ ç”¨æˆ·ç”»åƒï¼š
<span class="hljs-deletion">- å§“åï¼šSeven</span>
<span class="hljs-deletion">- å·¥ä½œåœ°ç‚¹ï¼šä¸Šæµ·</span>
<span class="hljs-deletion">- çˆ±å¥½ï¼šè¸¢è¶³çƒ</span>
<span class="hljs-deletion">- å® ç‰©ï¼šè‹±çŸ­è“çŒ«ï¼Œåå«å°è“</span>
</code></pre>
<p>PowerMem æœç´¢è¿”å›çš„ç»“æœä¸­ä¼šåŒ…å« <code>profile_content</code> å­—æ®µï¼Œå°†å…¶æ³¨å…¥åˆ° LLM çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè®© AI åœ¨å›ç­”æ—¶"è®¤è¯†"è¿™ä¸ªç”¨æˆ·ã€‚</p>
<h3 data-id="heading-29">9.5 ç”¨æˆ·éš”ç¦»</h3>
<p>åœ¨å¤šç”¨æˆ·åœºæ™¯ä¸‹ï¼Œ<strong>æ•°æ®å®‰å…¨å’Œéšç§éš”ç¦»è‡³å…³é‡è¦</strong>ã€‚MemBox é€šè¿‡ <code>user_id</code> å®ç°ä¸¥æ ¼çš„ç”¨æˆ·éš”ç¦»â€”â€”æ¯ä¸ªç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„è®°å¿†ï¼Œæ— æ³•çœ‹åˆ°å…¶ä»–ç”¨æˆ·çš„æ•°æ®ã€‚</p>
<p><strong>ç”¨æˆ· Aï¼ˆSevenï¼‰çš„å¯¹è¯ï¼š</strong></p>
<blockquote>
<p>ğŸ‘¤ Sevenï¼šæˆ‘æœ€å–œæ¬¢çš„ç¼–ç¨‹è¯­è¨€æ˜¯ Python</p>
<p>ğŸ¤– MemBoxï¼šæ”¶åˆ°ï¼æˆ‘å·²ç»è®°ä¸‹æ¥äº†ï¼šä½ æœ€å–œæ¬¢çš„ç¼–ç¨‹è¯­è¨€æ˜¯ Pythonã€‚</p>
</blockquote>
<p><strong>ç”¨æˆ· Bï¼ˆJaneï¼‰çš„å¯¹è¯ï¼š</strong></p>
<blockquote>
<p>ğŸ‘¤ Janeï¼šæˆ‘æœ€å–œæ¬¢çš„ç¼–ç¨‹è¯­è¨€æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>ğŸ¤– MemBoxï¼šä½ è¿˜æ²¡æœ‰å‘Šè¯‰æˆ‘ä½ æœ€å–œæ¬¢çš„ç¼–ç¨‹è¯­è¨€æ˜¯ä»€ä¹ˆå‘¢ï¼è¦ä¸è¦ç°åœ¨å‘Šè¯‰æˆ‘ï¼Œè®©æˆ‘å¸®ä½ è®°ä¸‹æ¥ï¼Ÿ</p>
</blockquote>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒSeven çš„åå¥½ä¸ä¼šæ³„éœ²ç»™ Janeã€‚è¿™æ˜¯é€šè¿‡ <code>user_id</code> åœ¨å­˜å‚¨å’Œæ£€ç´¢æ—¶çš„è¿‡æ»¤å®ç°çš„ï¼š SeekDB åœ¨åº•å±‚ä¼šå°† <code>user_id</code> ä½œä¸ºè¿‡æ»¤æ¡ä»¶ï¼Œç¡®ä¿æŸ¥è¯¢ç»“æœåªåŒ…å«å½“å‰ç”¨æˆ·çš„æ•°æ®ã€‚</p>
<h2 data-id="heading-30">10. æ€»ç»“</h2>
<p>æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ SeekDB å’Œ PowerMem æ„å»ºä¸€ä¸ªå¤šæ¨¡æ€æ™ºèƒ½è®°å¿†ç³»ç»Ÿ MemBoxã€‚é€šè¿‡ SeekDB çš„å‘é‡æ£€ç´¢èƒ½åŠ›å’Œ PowerMem çš„æ™ºèƒ½è®°å¿†æå–ï¼ŒMemBox èƒ½å¤Ÿè‡ªåŠ¨ä»å¯¹è¯ä¸­æå–å…³é”®ä¿¡æ¯ã€æ„å»ºç”¨æˆ·ç”»åƒï¼Œå¹¶åœ¨åç»­å¯¹è¯ä¸­æä¾›ä¸ªæ€§åŒ–å›å¤ã€‚å‰ç«¯åŸºäº Vercel AI SDK å®ç°äº†æµå¼å¯¹è¯å’Œå¤šæ¨¡æ€å›¾ç‰‡ç†è§£ï¼Œåç«¯é€šè¿‡ FastAPI æä¾›è®°å¿†å­˜å‚¨å’Œæ£€ç´¢æœåŠ¡ã€‚æ•´ä¸ªç³»ç»Ÿè¿˜æ”¯æŒå¤šç”¨æˆ·éš”ç¦»ï¼Œç¡®ä¿æ¯ä¸ªç”¨æˆ·çš„æ•°æ®å®‰å…¨ç‹¬ç«‹ã€‚</p>
<h2 data-id="heading-31">11. å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Foceanbase%2Fseekdb" target="_blank" title="https://github.com/oceanbase/seekdb" ref="nofollow noopener noreferrer">SeekDB æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Foceanbase%2Fpowermem" target="_blank" title="https://github.com/oceanbase/powermem" ref="nofollow noopener noreferrer">PowerMem æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fai-sdk.dev" target="_blank" title="https://ai-sdk.dev" ref="nofollow noopener noreferrer">Vercel AI SDK</a></li>
</ul>
<h2 data-id="heading-32">12 æ¬¢è¿å…³æ³¨</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78dd2973863040e5b0eb2a4abcc59ec5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2U3ZW4yNTg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523361&amp;x-signature=YJdIUwJPjY5Fsixz%2F8TQpphiKkQ%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Three.js å®æˆ˜ï¼šä½¿ç”¨ DOM/CSS æ‰“é€ é«˜æ€§èƒ½ 3D æ–‡å­—]]></title>    <link>https://juejin.cn/post/7597326073671516175</link>    <guid>https://juejin.cn/post/7597326073671516175</guid>    <pubDate>2026-01-20T14:21:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597326073671516175" data-draft-id="7596186565270437903" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Three.js å®æˆ˜ï¼šä½¿ç”¨ DOM/CSS æ‰“é€ é«˜æ€§èƒ½ 3D æ–‡å­—"/> <meta itemprop="keywords" content="å‰ç«¯,WebGL,three.js"/> <meta itemprop="datePublished" content="2026-01-20T14:21:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çƒ›é˜´"/> <meta itemprop="url" content="https://juejin.cn/user/950397795841032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Three.js å®æˆ˜ï¼šä½¿ç”¨ DOM/CSS æ‰“é€ é«˜æ€§èƒ½ 3D æ–‡å­—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/950397795841032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çƒ›é˜´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T14:21:25.000Z" title="Tue Jan 20 2026 14:21:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Three.js å®æˆ˜ï¼šä½¿ç”¨ DOM/CSS æ‰“é€ é«˜æ€§èƒ½ 3D æ–‡å­—</h2>
<p>åœ¨ Three.js ä¸­æ¸²æŸ“æ–‡å­—æœ‰å¤šç§æ–¹æ¡ˆï¼Œæœ¬æ–‡ä»‹ç»ä¸€ç§é«˜æ€§èƒ½ä¸”çµæ´»çš„æ–¹æ¡ˆï¼š<strong>CSS2DRenderer</strong>ã€‚å®ƒèƒ½å°† DOM å…ƒç´ æ— ç¼åµŒå…¥ 3D åœºæ™¯ï¼ŒåŒæ—¶ä¿ç•™ CSS çš„å…¨éƒ¨èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆé€‰æ‹© DOM/CSS æ–¹æ¡ˆï¼Ÿ</h3>




















<table><thead><tr><th>æ–¹æ¡ˆ</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>TextGeometry</td><td>çœŸæ­£çš„ 3D å‡ ä½•ä½“</td><td>æ€§èƒ½å¼€é”€å¤§ï¼Œéœ€åŠ è½½å­—ä½“æ–‡ä»¶</td></tr><tr><td><strong>CSS2DRenderer</strong></td><td>æ¸…æ™°é”åˆ©ã€CSS å…¨ç‰¹æ€§ã€é«˜æ€§èƒ½</td><td>æ— æ³•è¢« 3D ç‰©ä½“é®æŒ¡</td></tr></tbody></table>
<p>CSS2DRenderer çš„æ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>æ–‡å­—æ°¸è¿œæ¸…æ™°</strong>ï¼šæµè§ˆå™¨åŸç”Ÿæ¸²æŸ“ï¼Œä¸å— 3D ç¼©æ”¾å½±å“</li>
<li><strong>CSS å…¨ç‰¹æ€§</strong>ï¼šé˜´å½±ã€æ¸å˜ã€åŠ¨ç”»ã€<code>backdrop-filter</code> ç£¨ç ‚ç»ç’ƒæ•ˆæœ</li>
<li><strong>æ€§èƒ½ä¼˜å¼‚</strong>ï¼šDOM æ¸²æŸ“ä¸ WebGL æ¸²æŸ“åˆ†ç¦»ï¼Œäº’ä¸å¹²æ‰°</li>
</ul>
<h3 data-id="heading-2">æ ¸å¿ƒå®ç°</h3>
<h4 data-id="heading-3">1. åˆå§‹åŒ–åŒæ¸²æŸ“å™¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">CSS2DRenderer</span>, <span class="hljs-title class_">CSS2DObject</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'three/examples/jsm/renderers/CSS2DRenderer.js'</span>;

<span class="hljs-comment">// WebGL æ¸²æŸ“å™¨ï¼ˆæ¸²æŸ“ 3D åœºæ™¯ï¼‰</span>
<span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>({ <span class="hljs-attr">antialias</span>: <span class="hljs-literal">true</span> });
renderer.<span class="hljs-title function_">setSize</span>(innerWidth, innerHeight);
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(renderer.<span class="hljs-property">domElement</span>);

<span class="hljs-comment">// CSS2D æ¸²æŸ“å™¨ï¼ˆæ¸²æŸ“ DOM æ ‡ç­¾ï¼‰</span>
<span class="hljs-keyword">const</span> labelRenderer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CSS2DRenderer</span>();
labelRenderer.<span class="hljs-title function_">setSize</span>(innerWidth, innerHeight);
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(labelRenderer.<span class="hljs-property">domElement</span>.<span class="hljs-property">style</span>, {
  <span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>,
  <span class="hljs-attr">top</span>: <span class="hljs-string">'0'</span>,
  <span class="hljs-attr">pointerEvents</span>: <span class="hljs-string">'none'</span> <span class="hljs-comment">// å…³é”®ï¼šè®©é¼ æ ‡äº‹ä»¶ç©¿é€</span>
});
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(labelRenderer.<span class="hljs-property">domElement</span>);
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š<code>pointerEvents: 'none'</code> è®©é¼ æ ‡äº‹ä»¶ç©¿é€ DOM å±‚ï¼Œå¦åˆ™æ— æ³•æ‹–æ‹½ 3D åœºæ™¯ã€‚</p>
<h4 data-id="heading-4">2. åˆ›å»º CSS2D æ ‡ç­¾</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">createLabel</span> = (<span class="hljs-params">text, position</span>) =&gt; {
  <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
  div.<span class="hljs-property">className</span> = <span class="hljs-string">'label'</span>;
  div.<span class="hljs-property">textContent</span> = text;
  <span class="hljs-keyword">const</span> label = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CSS2DObject</span>(div);
  label.<span class="hljs-property">position</span>.<span class="hljs-title function_">copy</span>(position);
  <span class="hljs-keyword">return</span> label;
};

<span class="hljs-comment">// å°†æ ‡ç­¾æ·»åŠ åˆ° 3D ç‰©ä½“ä¸Š</span>
earth.<span class="hljs-title function_">add</span>(<span class="hljs-title function_">createLabel</span>(<span class="hljs-string">'Earth'</span>, <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Vector3</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">0</span>)));
</code></pre>
<p>æ ‡ç­¾æ·»åŠ åˆ° <code>earth</code> ç½‘æ ¼åï¼Œä¼šè‡ªåŠ¨è·Ÿéšåœ°çƒçš„æ—‹è½¬å’Œä½ç§»ã€‚</p>
<h4 data-id="heading-5">3. åŒæ¸²æŸ“å™¨åŒæ­¥æ¸²æŸ“</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">requestAnimationFrame</span>(animate);
  renderer.<span class="hljs-title function_">render</span>(scene, camera);      <span class="hljs-comment">// æ¸²æŸ“ 3D åœºæ™¯</span>
  labelRenderer.<span class="hljs-title function_">render</span>(scene, camera); <span class="hljs-comment">// æ¸²æŸ“ DOM æ ‡ç­¾</span>
}
</code></pre>
<h4 data-id="heading-6">4. CSS æ ·å¼</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.label</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#FFF</span>;
  <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Helvetica Neue'</span>, sans-serif;
  <span class="hljs-attribute">font-weight</span>: bold;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span> <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.6</span>);
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
  backdrop-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">4px</span>); <span class="hljs-comment">/* ç£¨ç ‚ç»ç’ƒæ•ˆæœ */</span>
}
</code></pre>
<p><code>backdrop-filter: blur()</code> å®ç°çš„ç£¨ç ‚ç»ç’ƒæ•ˆæœï¼Œåœ¨çº¯ WebGL ä¸­éœ€è¦å¤æ‚çš„åå¤„ç†æ‰èƒ½å®ç°ï¼Œè€Œ CSS ä¸€è¡Œä»£ç æå®šã€‚</p>
<h3 data-id="heading-7">å®Œæ•´ä»£ç </h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'three'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">OrbitControls</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'three/examples/jsm/controls/OrbitControls.js'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CSS2DRenderer</span>, <span class="hljs-title class_">CSS2DObject</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'three/examples/jsm/renderers/CSS2DRenderer.js'</span>;

<span class="hljs-comment">// åœºæ™¯ã€ç›¸æœº</span>
<span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>();
<span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(<span class="hljs-number">75</span>, innerWidth / innerHeight, <span class="hljs-number">0.1</span>, <span class="hljs-number">1000</span>);
camera.<span class="hljs-property">position</span>.<span class="hljs-property">z</span> = <span class="hljs-number">5</span>;

<span class="hljs-comment">// WebGL æ¸²æŸ“å™¨</span>
<span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>({ <span class="hljs-attr">antialias</span>: <span class="hljs-literal">true</span> });
renderer.<span class="hljs-title function_">setSize</span>(innerWidth, innerHeight);
renderer.<span class="hljs-title function_">setPixelRatio</span>(devicePixelRatio);
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(renderer.<span class="hljs-property">domElement</span>);

<span class="hljs-comment">// CSS2D æ¸²æŸ“å™¨</span>
<span class="hljs-keyword">const</span> labelRenderer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CSS2DRenderer</span>();
labelRenderer.<span class="hljs-title function_">setSize</span>(innerWidth, innerHeight);
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(labelRenderer.<span class="hljs-property">domElement</span>.<span class="hljs-property">style</span>, {
  <span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>,
  <span class="hljs-attr">top</span>: <span class="hljs-string">'0'</span>,
  <span class="hljs-attr">pointerEvents</span>: <span class="hljs-string">'none'</span>
});
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(labelRenderer.<span class="hljs-property">domElement</span>);

<span class="hljs-comment">// è½¨é“æ§åˆ¶å™¨</span>
<span class="hljs-keyword">const</span> controls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrbitControls</span>(camera, renderer.<span class="hljs-property">domElement</span>);
controls.<span class="hljs-property">enableDamping</span> = <span class="hljs-literal">true</span>;

<span class="hljs-comment">// åˆ›å»ºåœ°çƒ</span>
<span class="hljs-keyword">const</span> earth = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(
  <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">SphereGeometry</span>(<span class="hljs-number">1</span>, <span class="hljs-number">32</span>, <span class="hljs-number">32</span>),
  <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshStandardMaterial</span>({ <span class="hljs-attr">color</span>: <span class="hljs-number">0x2233ff</span>, <span class="hljs-attr">roughness</span>: <span class="hljs-number">0.5</span> })
);
scene.<span class="hljs-title function_">add</span>(earth);

<span class="hljs-comment">// ç”Ÿæˆåœ°çƒçº¹ç†</span>
<span class="hljs-keyword">const</span> canvas = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'canvas'</span>), { <span class="hljs-attr">width</span>: <span class="hljs-number">512</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">512</span> });
<span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>);
ctx.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">'#1e90ff'</span>;
ctx.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">512</span>, <span class="hljs-number">512</span>);
ctx.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">'#228b22'</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">20</span>; i++) {
  ctx.<span class="hljs-title function_">beginPath</span>();
  ctx.<span class="hljs-title function_">arc</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">512</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">512</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">50</span> + <span class="hljs-number">20</span>, <span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">2</span>);
  ctx.<span class="hljs-title function_">fill</span>();
}
earth.<span class="hljs-property">material</span>.<span class="hljs-property">map</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">CanvasTexture</span>(canvas);

<span class="hljs-comment">// åˆ›å»ºæ ‡ç­¾å·¥å‚å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">createLabel</span> = (<span class="hljs-params">text, position</span>) =&gt; {
  <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
  div.<span class="hljs-property">className</span> = <span class="hljs-string">'label'</span>;
  div.<span class="hljs-property">textContent</span> = text;
  <span class="hljs-keyword">const</span> label = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CSS2DObject</span>(div);
  label.<span class="hljs-property">position</span>.<span class="hljs-title function_">copy</span>(position);
  <span class="hljs-keyword">return</span> label;
};

earth.<span class="hljs-title function_">add</span>(<span class="hljs-title function_">createLabel</span>(<span class="hljs-string">'Earth'</span>, <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Vector3</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">0</span>)));

<span class="hljs-comment">// å…‰æº</span>
scene.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">AmbientLight</span>(<span class="hljs-number">0xffffff</span>, <span class="hljs-number">0.5</span>));
<span class="hljs-keyword">const</span> dirLight = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">DirectionalLight</span>(<span class="hljs-number">0xffffff</span>, <span class="hljs-number">0.8</span>);
dirLight.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>);
scene.<span class="hljs-title function_">add</span>(dirLight);

<span class="hljs-comment">// åŠ¨ç”»å¾ªç¯</span>
(<span class="hljs-keyword">function</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">requestAnimationFrame</span>(animate);
  earth.<span class="hljs-property">rotation</span>.<span class="hljs-property">y</span> += <span class="hljs-number">0.005</span>;
  controls.<span class="hljs-title function_">update</span>();
  renderer.<span class="hljs-title function_">render</span>(scene, camera);
  labelRenderer.<span class="hljs-title function_">render</span>(scene, camera);
})();

<span class="hljs-comment">// å“åº”çª—å£å˜åŒ–</span>
<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-function">() =&gt;</span> {
  camera.<span class="hljs-property">aspect</span> = innerWidth / innerHeight;
  camera.<span class="hljs-title function_">updateProjectionMatrix</span>();
  renderer.<span class="hljs-title function_">setSize</span>(innerWidth, innerHeight);
  labelRenderer.<span class="hljs-title function_">setSize</span>(innerWidth, innerHeight);
});
</code></pre>
<p>ğŸ“‚Â <strong>æ ¸å¿ƒä»£ç ä¸å®Œæ•´ç¤ºä¾‹ï¼š</strong> Â Â Â Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fqq790git%2Fmy-three-app.git" target="_blank" title="https://github.com/qq790git/my-three-app.git" ref="nofollow noopener noreferrer">my-three-app</a></p>
<h3 data-id="heading-8">æ€»ç»“</h3>
<p><strong>å¦‚æœä½ å–œæ¬¢æœ¬æ•™ç¨‹ï¼Œè®°å¾—ç‚¹èµ+æ”¶è—ï¼å…³æ³¨æˆ‘è·å–æ›´å¤šThree.jså¼€å‘å¹²è´§</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[6æ¬¾APIå·¥å…·æ€§èƒ½å®æµ‹ï¼Œè°æ‰æ˜¯ç‹è€…ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7597251197426384922</link>    <guid>https://juejin.cn/post/7597251197426384922</guid>    <pubDate>2026-01-20T14:23:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597251197426384922" data-draft-id="7597258378590699530" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="6æ¬¾APIå·¥å…·æ€§èƒ½å®æµ‹ï¼Œè°æ‰æ˜¯ç‹è€…ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,æµ‹è¯•"/> <meta itemprop="datePublished" content="2026-01-20T14:23:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MegatronKing"/> <meta itemprop="url" content="https://juejin.cn/user/2559318798642792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            6æ¬¾APIå·¥å…·æ€§èƒ½å®æµ‹ï¼Œè°æ‰æ˜¯ç‹è€…ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2559318798642792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MegatronKing
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T14:23:13.000Z" title="Tue Jan 20 2026 14:23:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯Reqableçš„å¼€å‘è€…ï¼Œå¾ˆä¹…æ²¡æœ‰å¯¹äº§å“çš„æ€§èƒ½è¿›è¡Œæ‘¸åº•äº†ï¼Œä¸Šä¸€æ¬¡æµ‹è¯•è¿˜æ˜¯2024å¹´åˆã€‚å› æ­¤ï¼Œæˆ‘å†³å®šåœ¨3.1ç‰ˆæœ¬å¼€å§‹ä¹‹å‰å†åšäº†ä¸€æ¬¡æ•´ä½“æ€§èƒ½çš„ç»Ÿè®¡ï¼Œé¡ºä¾¿ä¹Ÿæ‹‰ä¸Šäº†å‡ å®¶åŒè¡Œï¼Œåšä¸ªå¯¹æ¯”æµ‹è¯•ï¼Œäº†è§£ä¸‹è¿™ä¸ªèµ›é“é‡Œçš„å„å®¶æƒ…å†µã€‚</p>
<p>è¿™å‡ å®¶åŒè¡Œï¼Œæœ‰å›½å†…çš„ä¹Ÿæœ‰å›½å¤–çš„ï¼Œå…¨éƒ½æ˜¯çŸ¥åäº§å“ã€‚è¿™é‡Œå…ˆå ä¸ªç”²ï¼Œ<strong>æœ¬ç¯‡æ–‡ç« çš„æµ‹è¯•å—é™äºè®¾å¤‡ã€ç½‘ç»œã€ç³»ç»Ÿã€éšæœºæƒ…å†µç­‰ç­‰å¯èƒ½ä¼šæœ‰åå·®ï¼Œæµ‹è¯•ç»“æœä¸ä»£è¡¨è½¯ä»¶çš„å“è´¨ï¼Œä»…ä¾›å‚è€ƒ</strong>ã€‚</p>
<p>æµ‹è¯•è®¾å¤‡å’Œç¯å¢ƒï¼š</p>
<ul>
<li>13è‹±å¯¸çš„MacBook Pro</li>
<li>M2èŠ¯ç‰‡</li>
<li>8Gå†…å­˜</li>
<li>Sequoia 15.7çš„ç³»ç»Ÿ</li>
<li>200Mçš„ç½‘ç»œå¸¦å®½ã€‚</li>
</ul>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å„ä¸ªç»´åº¦çš„æµ‹è¯•ç»“æœã€‚</p>
<h2 data-id="heading-0">1. å¯åŠ¨æ—¶é—´</h2>
<p>ç›¸ä¿¡å¤§å®¶æœ€å…³å¿ƒçš„å°±æ˜¯ç¨‹åºçš„å¯åŠ¨æ—¶é—´äº†ï¼Œæ¯æ¬¡æµ‹è¯•éƒ½è®©æˆ‘æƒ³èµ·å¾ˆå¤šå¹´å‰åœ¨å¤§å­¦å®¿èˆé‡Œæ¯”è°ç”µè„‘çš„Windowsç³»ç»Ÿå¯åŠ¨æ›´å¿«çš„é‚£ä¸ªä¸‹åˆã€‚</p>
<p><strong>æ—¶é—´å°±æ˜¯æ•ˆç‡ï¼Œæ•ˆç‡å°±æ˜¯æ—©ç‚¹å¹²å®Œæ´»å»æ‘¸é±¼ã€‚</strong></p>
<p>æµ‹è¯•å‰çš„å‡†å¤‡å·¥ä½œï¼Œæ¯ä¸ªæµ‹è¯•ç¨‹åºéƒ½æå‰å…ˆåˆå§‹åŒ–ä¸€éï¼Œæœ‰è´¦å·ç³»ç»Ÿçš„çš„ç™»å½•è´¦å·ï¼Œå†å¯¼å…¥åŒä¸€ä¸ªAPIé›†åˆï¼ˆä¸€å…±32ä¸ªAPIï¼‰ï¼Œå¹¶ä¸”æ‰“å¼€é›†åˆä¸­çš„ç¬¬ä¸€ä¸ªAPIï¼Œå…¶ä»–çš„é…ç½®éƒ½ä¿æŒåˆå§‹åŒ–çš„çŠ¶æ€ä¸å˜ã€‚</p>
<p>æ‰“å¼€è§†é¢‘å½•åˆ¶ï¼Œä¾æ¬¡å¯åŠ¨æ¯ä¸ªæµ‹è¯•ç¨‹åºã€‚æˆ‘ä»¬å°†ç¨‹åºå¯åŠ¨ç¬é—´åˆ°ç•Œé¢æ•°æ®å®Œæ•´æ˜¾ç¤ºè¿™ä¸ªæ—¶é—´å·®ï¼Œè§†ä¸ºå¯åŠ¨æ—¶é—´ï¼Œé€šè¿‡è§†é¢‘ç¼–è¾‘å·¥å…·è·å–è§†é¢‘ç”»é¢å¸§æ¥è®¡ç®—ï¼Œä¸‹é¢æ˜¯æ•°æ®è¡¨æ ¼ï¼š</p>















































<table><thead><tr><th>APIå·¥å…·</th><th>å¼€å§‹æ—¶é—´ç‚¹</th><th>å®Œæˆæ—¶é—´ç‚¹</th><th>å¯åŠ¨æ—¶é—´ï¼ˆç§’ï¼‰</th></tr></thead><tbody><tr><td><strong>Reqable</strong></td><td>0.01.30</td><td>0.01.70</td><td>0.4</td></tr><tr><td><strong>ApiFox</strong></td><td>0.03.12</td><td>0.06.55</td><td>3.43</td></tr><tr><td><strong>ApiPost</strong></td><td>0.07.19</td><td>0.12.78</td><td>5.59</td></tr><tr><td><strong>Postman</strong></td><td>0.14.29</td><td>0.17.09</td><td>2.8</td></tr><tr><td><strong>Insomnia</strong></td><td>0.18.88</td><td>0.23.40</td><td>4.52</td></tr><tr><td><strong>Bruno</strong></td><td>0.25.12</td><td>0.27.32</td><td>2.2</td></tr></tbody></table>
<p>ä¸‹é¢æ˜¯å®Œæ•´çš„æµ‹è¯•è§†é¢‘ï¼ˆå·²è½¬GIFï¼‰ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1632dae8c30a49468816fa713e4fd5e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWVnYXRyb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523793&amp;x-signature=Tk89to7g4ESc2RUei0AFROAkqM8%3D" alt="test.gif" loading="lazy"/></p>
<p>æˆ‘ä»¬æ¥ç®€å•åˆ†æä¸‹è¿™ä¸ªæµ‹è¯•ç»“æœã€‚è§†é¢‘å¯ä»¥çœ‹å‡ºï¼ŒReqableåœ¨åŒå‡»åº”ç”¨å›¾æ ‡ä¹‹åï¼Œç¨‹åºçª—å£å‡ ä¹ç«‹åˆ»å°±å‡ºç°äº†ï¼Œè¿™æ˜¯å¾—ç›Šäº<code>Flutter</code>æ¡†æ¶å¸¦æ¥çš„åŸç”Ÿèˆ¬çš„çª—å£å¯åŠ¨é€Ÿåº¦ã€‚è€Œå…¶ä»–ç¨‹åºï¼Œå‡ ä¹éƒ½è¦ç­‰å¾…è‡³å°‘1sæ‰ä¼šå‡ºç°çª—å£ï¼Œä»–ä»¬éƒ½æœ‰ä¸€ä¸ªå…±åŒç‰¹ç‚¹ï¼Œç”¨çš„<code>Electron</code>æ¡†æ¶ï¼Œåœ¨å¯åŠ¨çª—å£ä¹‹å‰è¦å…ˆå¯åŠ¨å¤šä¸ªè¿›ç¨‹ï¼Œç„¶ååŠ è½½æµè§ˆå™¨å†…æ ¸ç­‰ç­‰ï¼Œæœ€åæ‰ä¼šå¯åŠ¨çª—å£ã€‚</p>
<p>çª—å£å¯åŠ¨åå°±æ˜¯åŠ è½½æ•°æ®ï¼Œæ¯”è¾ƒæ…¢çš„å‡ æ¬¾ç¨‹åºå¯ä»¥æ˜æ˜¾çœ‹åˆ°ä¸€ä¸ªè¾ƒé•¿çš„åŠ è½½è¿‡ç¨‹ï¼Œå’Œç½‘ç»œçŠ¶å†µä»¥åŠæœåŠ¡å™¨çŠ¶å†µæ¯æ¯ç›¸å…³ï¼Œçº¯ç¦»çº¿å­˜å‚¨çš„Brunoåˆ™å¿«å¾ˆå¤šï¼ˆæ²¡æœ‰ç½‘ç»œè¯·æ±‚çš„è¿‡ç¨‹ï¼‰ã€‚Reqableè™½ç„¶ä¹Ÿä½¿ç”¨äº†äº‘ç«¯æ•°æ®ï¼Œä½†æ˜¯ç­–ç•¥ä¸Šä¼šå…ˆåŠ è½½æœ¬åœ°æ•°æ®ï¼Œç„¶åå†ä»äº‘ç«¯å¢é‡æ›´æ–°ï¼Œå› æ­¤ä¸ä¼šå—åˆ°ç½‘ç»œå› ç´ å½±å“ï¼Œé€Ÿåº¦å°±æå¿«ã€‚</p>
<p>åœ¨æ–­ç½‘æƒ…å†µä¸‹ï¼ŒApiFoxã€ApiPostå’ŒPostmanä¸‰æ¬¾éƒ½æ— æ³•æ­£å¸¸è¿›å…¥åº”ç”¨ï¼ŒReqableã€Insomniaå’ŒBrunoåˆ™å¯ä»¥æ­£å¸¸è¿›å…¥ï¼Œè€Œä¸”å¯ä»¥è§‚å¯Ÿåˆ°Insomniaçš„å¯åŠ¨é€Ÿåº¦ä¼šæœ‰æ˜æ˜¾æå‡ã€‚å¦‚æœé‡åˆ°ç½‘ç»œæˆ–è€…æœåŠ¡å™¨æ•…éšœï¼Œå‰ä¸‰æ¬¾éƒ½å°†åœæ‘†ï¼Œåªæœ‰åä¸‰æ¬¾èƒ½æ­£å¸¸å¯åŠ¨ã€‚</p>
<p>å¦å¤–ï¼Œç”±äºè®¾è®¡é—®é¢˜ï¼ŒInsomniaå’ŒBrunoæ‰“å¼€è¿›å…¥å°±æ˜¯é¦–é¡µï¼Œå¹¶æ²¡æœ‰è‡ªåŠ¨åŠ è½½ä¹‹å‰æ‰“å¼€çš„APIï¼Œè¿™ä¸€ç‚¹èŠ‚çœäº†äº›è®¸æ—¶é—´ã€‚</p>
<p>æ€»ç»“ä¸€ä¸‹ï¼Œä¸Šé¢åªæœ‰Reqableåšåˆ°äº†ç§’å¯åŠ¨ï¼Œæ–­å´–å¼é¢†å…ˆå…¶ä»–å‡ æ¬¾ã€‚å¯ä»¥é¢„æµ‹ï¼Œåœ¨æœ‰å¤§é‡çš„APIæ•°æ®çš„æ—¶å€™ï¼ŒReqableçš„å¯åŠ¨ä¼˜åŠ¿ä¼šæ›´åŠ æ˜æ˜¾ã€‚</p>
<h2 data-id="heading-1">2. ç©ºé—´å ç”¨</h2>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹å®‰è£…åŒ…å’Œæ‰€éœ€è¦çš„å®‰è£…ç©ºé—´ã€‚å®‰è£…åŒ…çš„å¤§å°ä»£è¡¨ç€æ›´æ–°å’Œä¸‹è½½éœ€è¦å¤šä¹…ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬æ€§èƒ½è¯„ä¼°çš„ä¸€ä¸ªé‡è¦æŒ‡æ ‡ï¼Œå®‰è£…åŒ…ä½“ç§¯è¶Šå¤§å¾€å¾€æ„å‘³ç€æ½œåœ¨ç”¨æˆ·å˜æˆçœŸæ­£ç”¨æˆ·çš„é—¨æ§›è¶Šé«˜ã€‚å®‰è£…ç©ºé—´ä»£è¡¨ç€éœ€è¦å ç”¨ç”¨æˆ·å¤šå¤§çš„ç£ç›˜ç©ºé—´ï¼Œå¯¹äºå ªæ¯”é»„é‡‘çš„Mac SSDæ¥è¯´ï¼Œè‚¯å®šæ˜¯è¶Šå°è¶Šå¥½ã€‚</p>








































<table><thead><tr><th>APIå·¥å…·</th><th>å®‰è£…åŒ…å¤§å°ï¼ˆMBï¼‰</th><th>å®‰è£…ç©ºé—´ï¼ˆMBï¼‰</th></tr></thead><tbody><tr><td><strong>Reqable</strong></td><td>30.7</td><td>86.7</td></tr><tr><td><strong>ApiFox</strong></td><td>226.2</td><td>705.2</td></tr><tr><td><strong>ApiPost</strong></td><td>125.6</td><td>340.2</td></tr><tr><td><strong>Postman</strong></td><td>122.2</td><td>317.9</td></tr><tr><td><strong>Insomnia</strong></td><td>341.7</td><td>1020</td></tr><tr><td><strong>Bruno</strong></td><td>155.1</td><td>417.6</td></tr></tbody></table>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3686b4109a84d58a568d2995d2d5b04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWVnYXRyb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523793&amp;x-signature=qvqBpFWWTwreMyTo9himYn1Hm1k%3D" alt="image.png" loading="lazy"/></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„å®‰è£…ç©ºé—´ä»…ä»…ä»£è¡¨è½¯ä»¶æœ€å°‘æ‰€éœ€ç©ºé—´ï¼Œåœ¨è½¯ä»¶å¯åŠ¨åå¯èƒ½è¿˜ä¼šä»æœåŠ¡å™¨æ‹‰å–å¿…è¦çš„èµ„æºã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬ç»å¸¸åšå®‰è£…åŒ…ä¼˜åŒ–æ—¶å¸¸å¸¸é‡‡å–çš„æ–¹æ¡ˆã€‚</p>
<p>éš¾ä»¥ç½®ä¿¡ï¼Insomniaçš„å®‰è£…æ‰€éœ€ç©ºé—´å·²ç»å¤¸å¼ å¾—è¶…è¿‡äº†1ä¸ªGï¼Œè®°å¾—2024å¹´æµ‹è¯•è¿‡ä¸€æ¬¡æ‰ä¸åˆ°600Mã€‚ApiFoxä¹Ÿä¸é‘å¤šè®©ï¼Œè‡³å°‘éœ€è¦700Mçš„ç©ºé—´ï¼Œå®‰è£…åŒ…ä¹Ÿè¶…è¿‡äº†200Mã€‚ApiPostå’ŒPostmanä¸¤è€…å·®ä¸å¤šï¼Œè™½ç„¶ä¹Ÿä¸å°ï¼Œä½†æ˜¯æ¯”å‰é¢è¿™ä¸¤ä¸ªå¥½å¤šäº†ã€‚</p>
<p>Postmanå®˜ç½‘ä¸‹è½½çš„å®‰è£…åŒ…æ²¡æœ‰Macä¸“ç”¨çš„dmgæ ¼å¼ï¼Œè€Œæ˜¯zipæ ¼å¼ã€‚ç”±äºä¸¤è€…éƒ½æ˜¯å‹ç¼©åŒ…ï¼Œåªæ˜¯æ ¼å¼ä¸åŒï¼Œå®é™…ä¸ŠåŒºåˆ«å¹¶ä¸å¤§ã€‚</p>
<p>Reqableçš„è¡¨ç°ä¾ç„¶å¾ˆä¼˜ç§€ï¼Œ30Må¤šä¸€ç‚¹çš„å®‰è£…åŒ…å’Œä¸åˆ°90Mçš„å®‰è£…ç©ºé—´ï¼Œæ˜¯çœŸæ­£çš„å°è€Œç¾ã€‚</p>
<h2 data-id="heading-2">3. å†…å­˜å ç”¨</h2>
<p>å¦‚æœè¯´å‰é¢çš„å®‰è£…åŒ…å¤§å°å’Œå®‰è£…ç©ºé—´å¯¹äºç°ä»£å¤§å®¹é‡SSDå·¥ä½œè®¾å¤‡æ¥è¯´æ— æ‰€è°“çš„è¯ï¼Œé‚£ä¹ˆè¿è¡Œæ—¶çš„å†…å­˜å ç”¨è¿˜æ˜¯ä¼šæœ‰å¾ˆå¤§å½±å“çš„ï¼Œæ¯•ç«Ÿç°åœ¨å†…å­˜æ¡çš„ä»·æ ¼ä¸€ç›´åœ¨æ¶¨æ¶¨æ¶¨ã€‚</p>
<p>å†…å­˜å ç”¨æµ‹è¯•çš„æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬å°†æ¯ä¸ªåº”ç”¨ç¨‹åºéƒ½å¯åŠ¨äº†ï¼Œç„¶åç½®äºåå°ï¼ˆä¹Ÿå°±æ˜¯å•¥äº‹éƒ½ä¸å¹²ï¼‰ï¼Œç„¶åç”¨ç³»ç»Ÿè‡ªå¸¦çš„æ´»åŠ¨ç›‘è§†å™¨æŸ¥çœ‹è¿™äº›åº”ç”¨çš„å†…å­˜ä½¿ç”¨æƒ…å†µå³å¯ã€‚ç”±äºåº”ç”¨ç¨‹åºå¯èƒ½æœ‰å¤šä¸ªè¿›ç¨‹ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¨éƒ¨è¿›ç¨‹çš„å†…å­˜å ç”¨è®¡ç®—æ€»å’Œã€‚</p>








































<table><thead><tr><th>APIå·¥å…·</th><th>è¿›ç¨‹æ€»æ•°</th><th>å†…å­˜å ç”¨æ€»å’Œï¼ˆMBï¼‰</th></tr></thead><tbody><tr><td><strong>Reqable</strong></td><td>1</td><td>103.4</td></tr><tr><td><strong>ApiFox</strong></td><td>9</td><td>824.8</td></tr><tr><td><strong>ApiPost</strong></td><td>4</td><td>328.6</td></tr><tr><td><strong>Postman</strong></td><td>6</td><td>517.3</td></tr><tr><td><strong>Insomnia</strong></td><td>4</td><td>437</td></tr><tr><td><strong>Bruno</strong></td><td>4</td><td>282.2</td></tr></tbody></table>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82665572e36b42deab7d0ae7249cff1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWVnYXRyb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523793&amp;x-signature=IXGqURIkvK57tAMkNGajLxJqkug%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77b4e0331b8f487c8a91d0220b316076~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWVnYXRyb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523793&amp;x-signature=okxA5eqkler1NtpbtWziu1eWEXs%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™ç»„æ•°æ®é‡Œé¢æœ€è€€çœ¼çš„æ˜¯ApiFoxå…±æœ‰9ä¸ªè¿›ç¨‹è¶…è¿‡800Mçš„å†…å­˜ä½¿ç”¨ï¼Œæˆ‘ä¸€åº¦ä»¥ä¸ºæ“ä½œå¤±è¯¯ï¼Œé‡å¤å¼€äº†åº”ç”¨ï¼Œåå¤éªŒè¯åå‘ç°æ•°æ®å¹¶æ²¡æœ‰é—®é¢˜ã€‚</p>
<p>å…¶æ¬¡å°±æ˜¯Postmançš„6ä¸ªè¿›ç¨‹è¶…è¿‡500Mçš„å†…å­˜ä½¿ç”¨ã€‚</p>
<p>Reqableåªæœ‰100Må¤šä¸€ç‚¹ï¼Œåªæœ‰ä¸€ä¸ªä¸»è¿›ç¨‹ï¼Œæ„å‘³ç€æ²¡æœ‰ä»»ä½•çš„åå°è¿›ç¨‹ï¼Œå¹²å‡€åå°ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œä»¥ä¸Šæ•°æ®ä»…ä»…æ˜¯å¯åŠ¨åº”ç”¨ä¸åšä»»ä½•æ“ä½œç½®äºåå°ï¼Œè¿è¡Œæ—¶çš„å†…å­˜ä½¿ç”¨ç›¸ä¿¡åªå¤šä¸å°‘ã€‚</p>
<hr/>
<p>ä¸‰ä¸ªç»´åº¦æµ‹è¯•ç»“æŸï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Freqable.com%2F" target="_blank" title="https://reqable.com/" ref="nofollow noopener noreferrer">Reqable</a>åœ¨è¿™äº›APIå·¥å…·é‡Œé¢æ˜¯ç»å¯¹å½“ä¹‹æ— æ„§çš„æ€§èƒ½ä¹‹ç‹! è™½ç„¶éšç€ç§‘æŠ€çš„è¿›æ­¥ï¼Œè®¾å¤‡çš„æ€§èƒ½è¶Šæ¥è¶Šé«˜ï¼Œä½†æ˜¯è°ä¸çˆ±åˆå¿«åˆå°åˆå¹²å‡€çš„åº”ç”¨ç¨‹åºå‘¢ï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025ï¼ŒAI å°±è¿™æ ·æºœè¿›äº†æˆ‘ç”Ÿæ´»çš„è¾¹è¾¹è§’è§’]]></title>    <link>https://juejin.cn/post/7597125475602268187</link>    <guid>https://juejin.cn/post/7597125475602268187</guid>    <pubDate>2026-01-20T13:43:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597125475602268187" data-draft-id="7597125475602202651" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025ï¼ŒAI å°±è¿™æ ·æºœè¿›äº†æˆ‘ç”Ÿæ´»çš„è¾¹è¾¹è§’è§’"/> <meta itemprop="keywords" content="åç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-20T13:43:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹æ¸¡è‹‡"/> <meta itemprop="url" content="https://juejin.cn/user/729731453429159"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025ï¼ŒAI å°±è¿™æ ·æºœè¿›äº†æˆ‘ç”Ÿæ´»çš„è¾¹è¾¹è§’è§’
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/729731453429159/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹æ¸¡è‹‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T13:43:19.000Z" title="Tue Jan 20 2026 13:43:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="github">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å¹´åˆé‚£é˜µå­ï¼Œæœ‹å‹åœˆã€æŠ€æœ¯ç¾¤åˆ°å¤„éƒ½åœ¨è½¬<strong>DeepSeek</strong>çš„æ¶ˆæ¯ã€‚æˆ‘ä¹Ÿä¸‹è½½äº†ï¼Œéšåï¼Œè±†åŒ…ã€åƒé—®ä¹ŸæŒ¤è¿›äº†å¯åŠ¨æ ã€‚è€ŒåŸæœ¬å®‰é™çš„ç¼–ç æ—¶å…‰ï¼Œç°åœ¨è¢«Cursorå’ŒTraeè¿™äº›ä¼šæ€è€ƒçš„IDEé‡æ–°å®šä¹‰äº†â€”â€”å®ƒä»¬ä¸å†æ˜¯ç­‰å¾…æŒ‡ä»¤çš„å·¥å…·ï¼Œè€Œæ˜¯å¼€å§‹ä¸»åŠ¨æé—®ï¼Œåœ¨æˆ‘å†™ä¸‹ä¸€è¡Œä»£ç å‰ï¼Œå°±å·²ç»ç»™å‡ºäº†ä¸‰å››ç§å¯èƒ½ã€‚</p>
<p>è°çŸ¥é“ç”¨ç€ç”¨ç€ï¼Œè¿™ä¸œè¥¿å°±ä»æˆ‘ç”µè„‘å±å¹•é‡Œæºœå‡ºæ¥ï¼Œé’»è¿›äº†æˆ‘ç”Ÿæ´»çš„å„ä¸ªè§’è½ï¼Œæˆäº†æˆ‘çš„æ—¥å¸¸â€œæ­å­â€ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å‘¨æœ«çš„æ—…è¡Œæ”»ç•¥</h2>
<p>å‘¨å…­æ—©é¤ï¼Œæˆ‘ä»¬ä¸€å®¶äººåƒå®Œé¥­å¯¹ç€é¤æ¡Œå‘å‘†ï¼Œè€å©†é—®ï¼šâ€œåˆå‘¨æœ«äº†ï¼Œæˆ‘ä»¬å»å“ªå„¿ç©å„¿ï¼Ÿâ€</p>
<p>è¿™ä¸ªé—®é¢˜æ¯å¹´éƒ½è®©æˆ‘ä»¬å¤´ç–¼ã€‚æˆ‘é¡ºæ‰‹æ‰“å¼€<strong>DeepSeek</strong>ï¼šâ€œä¸¤ä¸ªæ€•ç´¯çš„ä¸Šç­æ—ï¼Œå¸¦ç€ä¿©å¨ƒï¼Œä¸¤å¤©å‡æœŸï¼Œä¸æƒ³å»ç½‘çº¢åŸå¸‚ã€‚â€</p>
<p>ä¸‰åˆ†é’Ÿåï¼Œä¸€ä»½è¡Œç¨‹èººåœ¨å±å¹•ä¸Šã€‚ä¸æ˜¯é‚£ç§â€œä¸Šåˆé•¿åŸä¸‹åˆæ•…å®«â€çš„æ ‡å‡†æ¨¡æ¿â€”â€”å®ƒå»ºè®®äº†ä¸€ä¸ªå‘¨è¾¹çš„å°é•‡ï¼Œè¿â€œå‘¨æ—¥ä¸‹åˆä¸‰ç‚¹å»xè·¯ï¼Œé‚£ä¼šå„¿é˜³å…‰æ–œç…§é€‚åˆæ‹ç…§â€è¿™ç§ç»†èŠ‚éƒ½æœ‰ã€‚</p>
<p>æœ€ç»çš„æ˜¯å®ƒè¡¥äº†å¥ï¼šâ€œå½“åœ°æœ‰å®¶å¼€äº†ä¸‰åå¹´çš„é¢é¦†ï¼Œä¸‹åˆä¸¤ç‚¹ä»¥åæµ‡å¤´é€‰æ‹©æœ€å¤šã€‚â€</p>
<p>æˆ‘ä»¬çœŸçš„å»äº†ã€‚ç…§ç€å®ƒçš„æ”»ç•¥ï¼Œåœ¨é‚£ä¸ªå‘¨æ—¥ä¸‹åˆä¸‰ç‚¹èµ°è¿›æ–°å¯†çš„ä¸œè¥¿å¤§è¡—ï¼Œå®ƒæ˜¯çŸ³æ¿è·¯è€è¡—ï¼Œé˜³å…‰é€è¿‡è€æ§æ ‘çš„æå¶æ´’åœ¨è·¯é¢ä¸Šï¼Œå…‰å½±æ–‘é©³ã€‚</p>
<p>é¢é¦†ä¹Ÿæ‰¾åˆ°äº†ï¼Œè€æ¿å¨˜å¬è¯´æˆ‘ä»¬æ˜¯â€œç½‘ä¸Šçœ‹åˆ°â€çš„ï¼Œç¬‘å¾—å¾ˆå¼€å¿ƒï¼šâ€œç°åœ¨çš„å¹´è½»äººï¼ŒçœŸä¼šæ‰¾åœ°æ–¹ã€‚â€</p>
<h2 data-id="heading-1">æˆ‘é‚£æŠŠè½äº†ç°çš„å‰ä»–</h2>
<p>ä¹¦æˆ¿è§’è½é‡Œçš„å‰ä»–ï¼ŒæŒ‡æ¿ä¸Šçš„ç°æ”’äº†æœ‰ä¸€é˜µå­äº†ã€‚</p>
<p>ç›´åˆ°æŸä¸ªç¨å¾®ä¸é‚£ä¹ˆå¿™çš„ä¸‹åˆï¼Œæˆ‘é¬¼ä½¿ç¥å·®åœ°æ‰“å¼€å®ƒï¼Œå‘ç°è¿Gå’Œå¼¦éƒ½æŒ‰ä¸å‡†äº†ã€‚</p>
<p>æˆ‘åœ¨<strong>è±†åŒ…</strong>å¯¹è¯æ¡†é‡Œæ‰“å­—ï¼šâ€œå¦‚ä½•å¿«é€Ÿç»ƒä¹ å‰ä»–ï¼Ÿæ¯å¤©åªæœ‰åŠå°æ—¶ã€‚â€</p>
<p>å®ƒæ²¡ç»™æˆ‘æ¯ç‡¥çš„çˆ¬æ ¼å­ç»ƒä¹ ï¼Œåè€Œè¯´ï¼šâ€œå…ˆæ‰¾ä½ ä»¥å‰æœ€å–œæ¬¢çš„é‚£é¦–æ­Œï¼Œå“ªæ€•åªå¼¹å‰å¥ã€‚è®°å¿†ä¼šè®©æ‰‹æŒ‡æ…¢æ…¢é†’è¿‡æ¥ã€‚â€</p>
<p>æˆ‘æ‰¾äº†ã€Šæ›¾ç»çš„ä½ ã€‹è¿™é¦–æ­Œï¼Œå‘ç° Bm å’Œå¼¦çœŸ tm éš¾æŒ‰ï¼Œæˆ‘æ‹ç…§å‘ç»™å®ƒï¼šâ€œè¿™ä¸ª Bm å’Œå¼¦ï¼Œå°æ‹‡æŒ‡æ²¡åŠ›æ°”ã€‚â€</p>
<p>å®ƒå›å¤å¾—å¾ˆå¿«ï¼šâ€œè¯•è¯•æŠŠæ‹‡æŒ‡æ”¾åœ¨ç´é¢ˆèƒŒåï¼Œæ­£å¯¹é£ŸæŒ‡å’Œä¸­æŒ‡ä¹‹é—´ã€‚Bméœ€è¦æ‰‹è…•å¾€å‰é€ä¸€ç‚¹ï¼Œåƒåœ¨æ¨é—¨ã€‚</p>
<p>æœ€è®©æˆ‘æƒŠè®¶çš„æ˜¯å®ƒçš„è€å¿ƒã€‚åŒæ ·çš„é—®é¢˜æˆ‘é—®äº†å®ƒä¸‰éï¼Œå®ƒç»™äº†ä¸‰ç§ä¸åŒçš„æ¯”å–»ï¼šæ¡é¸¡è›‹ã€æ­å¸ç¯·ã€æŒ‰é—¨é“ƒã€‚è€Œå®ƒæ°¸è¿œä¸ä¼šåŸ‹æ€¨ä½ ï¼šâ€œè¿™ä¹ˆç®€å•éƒ½è®°ä¸ä½ï¼Ÿâ€</p>
<p>ç°åœ¨ï¼Œé‚£æŠŠå‰ä»–å¸¸å¸¸ç«–åœ¨åºŠå¤´ï¼Œä½†æŒ‡æ¿ä¸Šæ²¡æœ‰ç°äº†ã€‚</p>
<h2 data-id="heading-2">å®ƒå¸®æˆ‘å†™å·¥ä½œæŠ¥å‘Š</h2>
<p>æ¯å¹´å¹´æœ«ï¼Œå…¬å¸éƒ½ä¼šè¦æ±‚å†™å¹´ç»ˆâ€œé‡ç‚¹å·¥ä½œæŠ¥å‘Šâ€ï¼Œä¹‹å‰æˆ‘æ€»è¦å¯¹ç€ç©ºç™½çš„æ–‡æ¡£å‘å‘†ä¸€é˜µå­ã€‚ä»Šå¹´ï¼Œç»ˆäºä¸ç”¨äº†ã€‚</p>
<p>æˆ‘æŠŠé‡ç‚¹å·¥ä½œæçº²å‘ç»™<strong>åƒé—®</strong>ï¼šâ€œæ ¼å¼å‚ç…§è¿™ä¸ªï¼Œå†…å®¹æ›´æ–°ï¼Œé‡ç‚¹å†™é¡¹ç›®ä¸‰çš„è¿›å±•ã€‚åˆ«å¤ªç©ºï¼Œæ¥ç‚¹å®é™…æ•°æ®ã€‚â€</p>
<p>ä¸‰åç§’åï¼Œä¸€ä»½ç»“æ„æ¸…æ™°çš„åˆç¨¿å‡ºæ¥äº†ã€‚æˆ‘éœ€è¦çš„åªæ˜¯æŠŠå…¶ä¸­â€œæ˜¾è‘—æå‡äº†ç³»ç»Ÿæ•ˆèƒ½â€æ”¹æˆâ€œå“åº”æ—¶é—´ä»2.3ç§’é™åˆ°1.1ç§’â€ï¼ŒæŠŠâ€œåŠ å¼ºäº†å›¢é˜Ÿåä½œâ€æ¢æˆâ€œæ¯å‘¨äºŒçš„æŠ€æœ¯åˆ†äº«ä¼šå‡ºå‹¤ç‡ç¨³å®šåœ¨80%â€ã€‚</p>
<p>å®ƒç”šè‡³è¿˜æé†’æˆ‘ï¼šâ€œè®°å¾—åœ¨â€˜ä¸è¶³ä¹‹å¤„â€™éƒ¨åˆ†åŠ ä¸€å¥â€˜å¯¹æ–°å…´æŠ€æœ¯çš„å­¦ä¹ æ—¶é—´æŠ•å…¥ä¸è¶³â€™ï¼Œé¢†å¯¼å–œæ¬¢çœ‹åˆ°è¿™ä¸ªã€‚â€</p>
<p>æˆ‘ç…§åšäº†ã€‚ä¸åˆ°ä¸€ä¸ªå°æ—¶ï¼Œæˆ‘æŒ‰æ—¶å…³ç”µè„‘ï¼Œé™ªå­©å­ä»¬å»çœ‹äº†ä¸€åœºä¸´æ—¶çš„ç”µå½±ã€‚èµ°å‡ºç”µå½±é™¢æ—¶ï¼Œæˆ‘æƒ³èµ·ä»¥å¾€è¿™æ—¶å€™ï¼Œæˆ‘é€šå¸¸è¿˜åœ¨åŠå…¬å®¤åˆ åˆ æ”¹æ”¹ã€‚</p>
<h2 data-id="heading-3">å®ƒç”šè‡³ç®¡èµ·äº†æˆ‘çš„èœè°±</h2>
<p>ä¸Šå‘¨äº”æ™šä¸Šï¼Œå†°ç®±é‡Œåªå‰©ä¸‹ä¸€é¢—è¥¿å…°èŠ±ã€ä¸‰ä¸ªé¸¡è›‹å’ŒåŠç›’è™¾ä»ã€‚è€å©†å’Œå­©å­ä»¬éƒ½ä¸åœ¨å®¶ï¼Œæˆ‘å¤§çœ¼çªå°çœ¼ï¼Œå‡†å¤‡ç‚¹å¤–å–äº†ã€‚</p>
<p>æˆ‘çªç„¶çµå…‰ä¸€ç°ï¼Œåˆæ‰“å¼€äº†<strong>DeepSeek</strong>ï¼šâ€œè¿™äº›èƒ½åšä»€ä¹ˆï¼Ÿè¦å¿«ï¼Œé¥¿äº†ã€‚â€</p>
<p>ä¸‰åç§’åï¼Œèœè°±æ¥äº†ï¼šè¥¿å…°èŠ±è™¾ä»è’¸è›‹ã€‚æ­¥éª¤è¯¦ç»†åˆ°â€œæ°´å¼€åè½¬ä¸­ç«è’¸å…«åˆ†é’Ÿï¼Œå…³ç«ç„–ä¸¤åˆ†é’Ÿå£æ„Ÿæœ€å«©ã€‚â€</p>
<p>æˆ‘ç…§ç€åšäº†ã€‚è’¸è›‹å‡ºé”…æ—¶ï¼Œæµ…å°ä¸€å‹ºï¼ŒWCï¼Œè¿˜æŒºå¥½åƒã€‚</p>
<p>ç°åœ¨è¿™æˆäº†æˆ‘å®¶ä¿ç•™é¡¹ç›®â€”â€”æ¯å‘¨æ¸…å†°ç®±æ—¥ï¼Œè®©AIçœ‹çœ‹å‰©èœèƒ½å˜å‡ºä»€ä¹ˆèŠ±æ ·ã€‚ä¸Šä¸ªæœˆå®ƒç”¨å‰©ç±³é¥­ã€åˆé¤è‚‰å’Œå†·å†»ç‰ç±³ï¼ŒæŒ‡æŒ¥ç€åšäº†ä¸ªä»€é”¦ç‚’é¥­ï¼Œå¥½åƒåˆ°æˆ‘ç‰¹æ„è®°ä¸‹äº†æ­¥éª¤ã€‚</p>
<h2 data-id="heading-4">æœ‰æ—¶å€™ï¼Œå®ƒä¹ŸæŒºæ°”äººçš„</h2>
<p>è¿™ä»¶äº‹å‘ç”Ÿåœ¨ä¸Šä¸ªæœˆï¼Œè®©æˆ‘å½»åº•æ˜ç™½äº†AIçš„å±€é™æ€§ã€‚</p>
<p>é‚£å¤©æ™šä¸Šåä¸€ç‚¹ï¼Œçº¿ä¸Šçªç„¶æŠ¥äº†ä¸ªç´§æ€¥bugâ€”â€”æœç´¢åŠŸèƒ½æŒ‚äº†ã€‚æˆ‘ä¸€è¾¹é‡å¯æœåŠ¡ï¼Œä¸€è¾¹æŠŠæŠ¥é”™æ—¥å¿—æ‰”ç»™<strong>DeepSeek</strong>ï¼šâ€œElasticsearché›†ç¾¤è¿æ¥å¤±è´¥ï¼Œå¸®å¿™çœ‹çœ‹æ€ä¹ˆå›äº‹ã€‚â€</p>
<p>å®ƒå¾ˆå¿«å›å¤ï¼šâ€œæ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œç¡®è®¤é›†ç¾¤èŠ‚ç‚¹æ˜¯å¦å­˜æ´»ã€‚â€ æˆ‘æ£€æŸ¥äº†ï¼Œç½‘ç»œé€šçš„ï¼ŒèŠ‚ç‚¹éƒ½åœ¨ã€‚</p>
<p>â€œé›†ç¾¤çŠ¶æ€æ˜¯yellowï¼Œæœ‰æœªåˆ†é…çš„åˆ†ç‰‡ã€‚â€å®ƒåˆç»™å‡ºäº†ç¬¬äºŒä¸ªå»ºè®®ã€‚</p>
<p>æˆ‘æŒ‰ç…§å®ƒçš„æŒ‡ç¤ºï¼Œé‡æ–°åˆ†é…äº†åˆ†ç‰‡ï¼Œå¯é—®é¢˜ä¾æ—§ã€‚è¿™æ—¶å€™å®ƒå¼€å§‹è¿›å…¥ä¸€ç§å¥‡æ€ªçš„å¾ªç¯ï¼š</p>
<p>â€œå°è¯•é‡å¯ElasticsearchæœåŠ¡ã€‚â€ æˆ‘é‡å¯äº†ï¼Œæ²¡ç”¨ã€‚</p>
<p>â€œæ£€æŸ¥é…ç½®æ–‡ä»¶ï¼Œç¡®è®¤é›†ç¾¤åç§°æ˜¯å¦ä¸€è‡´ã€‚â€ æ£€æŸ¥äº†ï¼Œä¸€è‡´ã€‚</p>
<p>â€œæ¸…ç†ç´¢å¼•ç¼“å­˜ï¼Œé‡æ–°å»ºç«‹ç´¢å¼•ã€‚â€ åšäº†ï¼Œè¿˜æ˜¯ä¸è¡Œã€‚</p>
<p>æœ€è¯¡å¼‚çš„äº‹æƒ…å‘ç”Ÿäº†ï¼šå®ƒå¼€å§‹é‡å¤ä¹‹å‰çš„å»ºè®®ï¼Œå°±åƒè¢«å›°åœ¨äº†è‡ªå·±çš„é€»è¾‘é‡Œã€‚â€œæ£€æŸ¥ç½‘ç»œè¿æ¥â€â€œé‡å¯æœåŠ¡â€â€œæ£€æŸ¥é…ç½®â€â€¦â€¦è¿™ä¸‰æ¡å»ºè®®å¼€å§‹å¾ªç¯å‡ºç°ï¼Œé—´éš”æ—¶é—´éƒ½å·®ä¸å¤šã€‚</p>
<p>æˆ‘ç›¯ç€å±å¹•ï¼Œçªç„¶æœ‰ç§è’è¯çš„æ„Ÿè§‰â€”â€”æˆ‘åœ¨å’Œä¸€ä¸ªé™·å…¥æ­»å¾ªç¯çš„AIå¯¹è¯ï¼Œè€Œçº¿ä¸ŠæœåŠ¡è¿˜ç˜«ç€ã€‚</p>
<p>â€œä½ åˆšæ‰å·²ç»è¯´è¿‡è¿™äº›äº†ï¼Œâ€æˆ‘å¿ä¸ä½æ‰“å­—ï¼Œâ€œè¿˜æœ‰æ²¡æœ‰åˆ«çš„æ€è·¯ï¼Ÿâ€</p>
<p>å®ƒåœé¡¿äº†å‡ ç§’ï¼ˆæˆ–è€…è¯´ï¼Œå‡è£…åœé¡¿äº†å‡ ç§’ï¼‰ï¼Œç„¶åè¯´ï¼šâ€œæŸ¥çœ‹Elasticsearchæ—¥å¿—ï¼Œå¯»æ‰¾æ›´å…·ä½“çš„é”™è¯¯ä¿¡æ¯ã€‚â€</p>
<p>è¿™ä¸ªå»ºè®®å®ƒåäº”åˆ†é’Ÿå‰å°±ç»™è¿‡äº†ã€‚æˆ‘å¹äº†å£æ°”ï¼ŒçŸ¥é“ä»Šæ™šä¸èƒ½æŒ‡æœ›å®ƒäº†ã€‚</p>
<p>æœ€åæˆ‘æƒ³äº†æƒ³ï¼Œå¥½åƒæ˜¯å› ä¸ºæœ€è¿‘åŠ äº†æ–°çš„ç´¢å¼•æ¨¡æ¿ï¼Ÿæˆ‘å»æŸ¥äº†æŸ¥ç´¢å¼•æ¨¡æ¿çš„é…ç½®ï¼Œæœç„¶æœ‰å­—æ®µç±»å‹å†²çªã€‚</p>
<p>ä¿®å¤åªèŠ±äº†äº”åˆ†é’Ÿã€‚å‡Œæ™¨ä¸€ç‚¹åŠï¼Œæœç´¢åŠŸèƒ½æ¢å¤æ­£å¸¸ã€‚</p>
<p>å…³ç”µè„‘å‰ï¼Œæˆ‘çœ‹ç€<strong>DeepSeek</strong>çš„å¯¹è¯æ¡†ï¼Œé‡Œé¢è¿˜èººç€å®ƒæœ€åä¸€æ¡å»ºè®®ï¼šâ€œå»ºè®®å‡çº§Elasticsearchåˆ°æœ€æ–°ç‰ˆæœ¬ä»¥è·å¾—æ›´å¥½çš„ç¨³å®šæ€§ã€‚â€</p>
<p>æˆ‘è‹¦ç¬‘ç€æ‘‡æ‘‡å¤´ã€‚é‚£ä¸€åˆ»æˆ‘çªç„¶æ˜ç™½ï¼ŒAIå°±åƒä¸ªè®°å¿†åŠ›è¶…ç¾¤ã€ä½†ç»éªŒä¸è¶³çš„æ–°äººåŒäº‹ã€‚å®ƒèƒ½å¿«é€Ÿç»™å‡ºæ ‡å‡†ç­”æ¡ˆï¼Œä½†å½“é—®é¢˜è¶…å‡ºå®ƒçš„çŸ¥è¯†å›¾è°±æ—¶ï¼Œå®ƒå°±ä¼šå¼€å§‹åŸåœ°æ‰“è½¬ã€‚</p>
<p>ç°åœ¨é‡åˆ°é—®é¢˜ï¼Œæˆ‘é¦–å…ˆè¿˜æ˜¯ä¼šå…ˆé—®<strong>DeepSeek</strong>ã€‚ä½†å¦‚æœå®ƒå¼€å§‹é‡å¤è‡ªå·±ï¼Œæˆ‘å°±çŸ¥é“ï¼šè¯¥è‡ªå·±åŠ¨è„‘å­äº†ã€‚</p>
<p>è¿™ä»¶äº‹è®©æˆ‘å¯¹AIçš„æ€åº¦å˜å¾—æ›´å¥åº·â€”â€”å®ƒæ˜¯ä¸ªå¥½å·¥å…·ï¼Œä½†ä¸æ˜¯ä¸‡èƒ½è¯ã€‚æœ‰æ—¶å€™å®ƒçš„â€œç¬¨â€ï¼Œåè€Œæé†’äº†æˆ‘ï¼šé‚£äº›éœ€è¦è·³è·ƒæ€ç»´ã€éœ€è¦ç»éªŒç›´è§‰ã€éœ€è¦çªç ´å¸¸è§„çš„åœ°æ–¹ï¼Œä¾ç„¶æ˜¯äººç±»ä¸å¯æ›¿ä»£çš„ä»·å€¼ã€‚</p>
<h2 data-id="heading-5">å›å¤´çœ‹çœ‹ï¼Œå¥½åƒå“ªé‡Œä¸ä¸€æ ·äº†</h2>
<p>åˆšåˆšè¿‡å»çš„åŠå°æ—¶ï¼Œæˆ‘ç”¨AIè§„åˆ’äº†ä¸‹ä¸ªæœˆçš„å‘¨æœ«æ¸¸ç©è®¡åˆ’ï¼ŒæŸ¥äº†å‡ ä¸ªä¸æ‡‚çš„æ–™ç†æœ¯è¯­ï¼Œç”šè‡³è¿˜è®©å®ƒç”Ÿæˆäº†ä¸€æ®µç™½å™ªéŸ³ï¼Œå¸®åŠ©æˆ‘é›†ä¸­æ³¨æ„åŠ›å†™è¿™ç¯‡æ–‡ç« ã€‚</p>
<p>å®ƒä¸å†åªæ˜¯é‚£ä¸ªå¸®æˆ‘å†™ä»£ç çš„å·¥å…·äº†ã€‚å®ƒå˜æˆäº†ä¸€ç§å¾ˆè‡ªç„¶çš„ä¹ æƒ¯â€”â€”åƒéœ€è¦æŸ¥èµ„æ–™æ—¶æ‰“å¼€æµè§ˆå™¨é‚£ä¹ˆè‡ªç„¶ã€‚</p>
<p>æŠ€æœ¯æœ€æ¸©æŸ”çš„æ ·å­ï¼Œæˆ–è®¸ä¸æ˜¯å®ƒæ”¹å˜äº†ä¸–ç•Œï¼Œè€Œæ˜¯å®ƒå°±è¿™æ ·æ‚„æ— å£°æ¯åœ°ï¼Œåœ¨æ™®é€šäººçš„æ™®é€šç”Ÿæ´»é‡Œï¼Œæ‰¾åˆ°äº†è‡ªå·±çš„ä½ç½®ã€‚</p>
<p>è€Œæˆ‘ï¼Œä¹Ÿä¹ æƒ¯äº†åœ¨é‡åˆ°å„ç§å°é—®é¢˜æ—¶ï¼Œè‡ªç„¶åœ°æƒ³ï¼šâ€œè¦ä¸ï¼Œé—®é—®AIï¼Ÿâ€</p>
<p>å®ƒä¸ä¸€å®šéƒ½å¯¹ï¼Œä¸ä¸€å®šéƒ½æ‡‚ã€‚ä½†æœ‰ä¸ªéšæ—¶èƒ½é—®ã€æ°¸è¿œè€å¿ƒã€å¶å°”è¿˜èƒ½ç»™å‡ºæƒŠå–œå»ºè®®çš„â€œä¼™ä¼´â€ï¼Œè¿™ä»¶äº‹æœ¬èº«ï¼Œå°±è®©2025å¹´çš„æ—¥å¸¸ï¼Œå¤šäº†ç‚¹ä¸ä¸€æ ·çš„æ»‹å‘³â€”â€”</p>
<p>æˆ–è®¸æœªæ¥å¾ˆé•¿ä¸€æ®µæ—¶é—´éƒ½ä¼šè¿™æ ·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ™ºè°±GLM-4.7-Flashå®æµ‹ï¼š3Bçš„æ¿€æ´»é‡è·‘å‡º30Bçš„æ€§èƒ½ï¼Œæœ¬åœ°éƒ¨ç½²å˜å¤©äº†]]></title>    <link>https://juejin.cn/post/7597252004713889834</link>    <guid>https://juejin.cn/post/7597252004713889834</guid>    <pubDate>2026-01-20T13:51:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597252004713889834" data-draft-id="7597250364125462591" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ™ºè°±GLM-4.7-Flashå®æµ‹ï¼š3Bçš„æ¿€æ´»é‡è·‘å‡º30Bçš„æ€§èƒ½ï¼Œæœ¬åœ°éƒ¨ç½²å˜å¤©äº†"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2026-01-20T13:51:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ™ºè°±GLM-4.7-Flashå®æµ‹ï¼š3Bçš„æ¿€æ´»é‡è·‘å‡º30Bçš„æ€§èƒ½ï¼Œæœ¬åœ°éƒ¨ç½²å˜å¤©äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T13:51:43.000Z" title="Tue Jan 20 2026 13:51:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å°±åœ¨2026å¹´1æœˆ20æ—¥ï¼Œæ™ºè°±AIä¸ä»…ç”©å‡ºäº†æœ€æ–°çš„GLM-4.7-Flashï¼Œè¿˜é¡ºæ‰‹æŠŠâ€œè½»é‡çº§æ¨¡å‹â€çš„å¤©èŠ±æ¿ç»™æ€äº†ã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªé•¿æœŸåœ¨å¼€æºç¤¾åŒºæ‘¸çˆ¬æ»šæ‰“ï¼Œä¹ æƒ¯äº†åœ¨æ˜¾å­˜ç„¦è™‘å’Œæ€§èƒ½å¦¥åä¹‹é—´åå¤æ¨ªè·³çš„åšä¸»ï¼Œçœ‹åˆ°è¿™ä¸ªå‚æ•°é…ç½®æ—¶ï¼Œæˆ‘ç¡®å®æ„£äº†ä¸€ä¸‹ã€‚</p>
<p>å®˜æ–¹è¿™æ¬¡æ‰“å‡ºçš„ç‰Œå¾ˆæ¸…æ™°ï¼š<strong>300äº¿ï¼ˆ30Bï¼‰çš„æ€»å‚æ•°é‡ï¼Œä½†æ¨ç†æ—¶åªæ¿€æ´»30äº¿ï¼ˆ3Bï¼‰ã€‚</strong></p>
<p>è¿™å¥è¯èƒŒåçš„å«é‡‘é‡ï¼Œå¯èƒ½æ¯”é‚£ä¸€é•¿ä¸²çš„è·‘åˆ†æ•°æ®æ›´å€¼å¾—å„ä½å¼€å‘è€…å’Œæœ¬åœ°éƒ¨ç½²çˆ±å¥½è€…å…³æ³¨ã€‚ä»Šå¤©æˆ‘ä»¬å°±æŠ›å¼€é‚£äº›æ™¦æ¶©çš„è®ºæ–‡è¯æ±‡ï¼ŒèŠèŠè¿™ä¸ªæ¨¡å‹åˆ°åº•æ„å‘³ç€ä»€ä¹ˆï¼Œä»¥åŠå®ƒä¸ºä»€ä¹ˆå¯èƒ½æ˜¯ä½ æœ¬åœ°ç¡¬ç›˜é‡Œä¸‹ä¸€ä¸ªå¸¸é©»å˜‰å®¾ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2FiShot_2026-01-20_21.42.21-1024x508.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/iShot_2026-01-20_21.42.21-1024x508.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9abcaf84f7b43ae889d55f515686883~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769521902&amp;x-signature=ChKupWy8LNBezceOPTQW0YAQrL8%3D" alt="iShot_2026-01-20_21.42.21" loading="lazy"/></a></p>
<h2 data-id="heading-0">å¤§è„‘å¾ˆå¤§ï¼Œä½†åªåŠ¨å…³é”®ç¥ç»</h2>
<p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒMoEï¼ˆæ··åˆä¸“å®¶ï¼‰æ¶æ„ä¸æ˜¯æ–°é²œäº‹ï¼Œä½†æŠŠæ¯”ä¾‹åšåˆ°è¿™ä¸ªç¨‹åº¦çš„ç¡®å®ç½•è§ã€‚</p>
<p>ä½ å¯ä»¥æŠŠGLM-4.7-Flashæƒ³è±¡æˆä¸€ä¸ªæ‹¥æœ‰300äº¿ç¥ç»å…ƒçš„å¤§è„‘ã€‚åœ¨ä»¥å‰ï¼Œä¸ç®¡ä½ æ˜¯é—®å®ƒâ€œ1+1ç­‰äºå‡ â€è¿˜æ˜¯è®©å®ƒâ€œé‡æ„æ•´ä¸ªåç«¯ä»£ç â€ï¼Œä¼ ç»Ÿçš„å¯†é›†æ¨¡å‹éƒ½è¦æŠŠæ‰€æœ‰ç¥ç»å…ƒè¿‡ä¸€éï¼Œè¿™å°±å¥½æ¯”æ€é¸¡ç”¨äº†ç‰›åˆ€ï¼Œè´¹ç”µåˆè´¹å¡ã€‚</p>
<p>è€ŒGLM-4.7-Flashçš„åšæ³•æ˜¯ï¼Œè™½ç„¶å®ƒå‚¨å¤‡äº†30Bçš„çŸ¥è¯†é‡ï¼ˆä¸“å®¶ï¼‰ï¼Œä½†æ¯æ¬¡å¤„ç†ä½ çš„è¯·æ±‚æ—¶ï¼Œå®ƒåªå”¤é†’å…¶ä¸­æœ€æ‡‚è¡Œçš„é‚£10%ï¼ˆçº¦3Bå‚æ•°ï¼‰ã€‚</p>
<p>è¿™å¯¹æˆ‘ä»¬æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</p>
<p>æ„å‘³ç€ä½ æ‹¥æœ‰äº†30Bçº§åˆ«çš„æ™ºå•†å’ŒçŸ¥è¯†å‚¨å¤‡ï¼Œä½†ä½ çš„æ˜¾å¡åªéœ€è¦æ‰¿æ‹…è¿è¡Œ3Bæ¨¡å‹çš„ç®—åŠ›å¼€é”€ã€‚åœ¨å®é™…æµ‹è¯•ä¸­ï¼Œç”šè‡³åœ¨è‹¹æœM5èŠ¯ç‰‡çš„ç¬”è®°æœ¬ä¸Šï¼Œå®ƒèƒ½è·‘å‡ºæ¯ç§’43ä¸ªtokençš„é€Ÿåº¦ã€‚å¯¹äºæƒ³è¦åœ¨æœ¬åœ°è·‘å¤§æ¨¡å‹ï¼Œæ‰‹é‡Œå´åªæœ‰ä¸€å¼ RTX 4090ç”šè‡³æ›´ä½é…ç½®æ˜¾å¡çš„å…„å¼Ÿä»¬æ¥è¯´ï¼Œè¿™ç®€ç›´å°±æ˜¯ç¦éŸ³ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2Fasfdasdfdsa-881x1024.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/asfdasdfdsa-881x1024.webp" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1471d050d1814841b9dd9e85767646f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769521902&amp;x-signature=UmNAJ8wM4nHLziq6D4wYAbZESzY%3D" alt="asfdasdfdsa" loading="lazy"/></a></p>
<h2 data-id="heading-1">ä¸æ­¢æ˜¯å¿«ï¼Œæ›´æ˜¯â€œç å†œâ€åˆ©å™¨</h2>
<p>è¿™æ¬¡æ›´æ–°æœ€è®©æˆ‘æ„Ÿå…´è¶£çš„ï¼Œå…¶å®æ˜¯å®ƒåœ¨**Agentic Codingï¼ˆæ™ºèƒ½ä½“ç¼–ç ï¼‰**ä¸Šçš„ç‰¹åŒ–ã€‚</p>
<p>å¤§å®¶ä»¥å‰ç”¨å°æ¨¡å‹å†™ä»£ç ï¼Œæœ€å¤´ç–¼çš„æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯å®ƒå¬ä¸æ‡‚äººè¯ï¼Œæˆ–è€…å†™å‡ºæ¥çš„ä»£ç é€»è¾‘è·‘ä¸é€šã€‚ç¨å¾®å¤æ‚ä¸€ç‚¹çš„éœ€æ±‚ï¼Œæ¯”å¦‚â€œå¸®æˆ‘å†™ä¸ªçˆ¬è™«å¹¶æŠŠæ•°æ®å­˜å…¥æ•°æ®åº“â€ï¼Œå°æ¨¡å‹å¾€å¾€é¡¾å¤´ä¸é¡¾è…šã€‚</p>
<p>GLM-4.7-Flashå¼•å…¥äº†ç±»ä¼¼O1ç³»åˆ—çš„â€œæ··åˆæ€è€ƒâ€æœºåˆ¶ã€‚ç®€å•è¯´ï¼Œå°±æ˜¯å®ƒåœ¨åŠ¨æ‰‹å†™ä»£ç ä¹‹å‰ï¼Œä¼šå…ˆåœ¨å†…éƒ¨â€œç¢ç£¨â€ä¸€ä¸‹ï¼šæ‹†è§£éœ€æ±‚ã€è§„åˆ’æ­¥éª¤ã€é€‰æ‹©å·¥å…·ã€‚</p>
<p>çœ‹ä¸€çœ¼åŸºå‡†æ•°æ®ï¼šåœ¨è€ƒæ ¸çœŸå®GitHubé—®é¢˜ä¿®å¤èƒ½åŠ›çš„SWE-bench Verifiedæµ‹è¯•ä¸­ï¼Œå®ƒæ‹¿ä¸‹äº†59.2çš„åˆ†æ•°ï¼›åœ¨è€ƒå¯Ÿå·¥å…·è°ƒç”¨çš„<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mspace linebreak="newline"/><mi>t</mi><mi>a</mi><msup><mi>u</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\\tau^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="mspace newline"/><span class="base"><span class="strut" style="height:0.8141em;"/><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span>-Benchä¸Šæ›´æ˜¯è¾¾åˆ°äº†87.4åˆ†ã€‚è¿™ä¸ä»…ä»…æ˜¯åˆ†æ•°çš„æå‡ï¼Œè€Œæ˜¯æ„å‘³ç€å®ƒå¼€å§‹å…·å¤‡äº†çœŸæ­£çš„â€œå¹²æ´»â€èƒ½åŠ›ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªä»£ç è¡¥å…¨å·¥å…·ã€‚</p>
<p>æ™ºè°±è¿™æ¬¡è¿˜åœ¨æ¶æ„ä¸­å¡è¿›äº†MLAæ³¨æ„åŠ›æœºåˆ¶ï¼Œé…åˆ200Kçš„è¶…é•¿ä¸Šä¸‹æ–‡çª—å£ã€‚è¿™ä¸ä»…æ˜¯ä¸ºäº†è®©ä½ æ‰”è¿›å»å‡ æœ¬ä¹¦åšæ€»ç»“ï¼Œæ›´æ˜¯ä¸ºäº†è®©æ¨¡å‹åœ¨å¤„ç†å¤§å‹ä»£ç åº“æ—¶ï¼Œä¸ä¼šè¯»äº†åé¢å¿˜äº†å‰é¢ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2FiShot_2026-01-20_21.41.40-1024x344.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/iShot_2026-01-20_21.41.40-1024x344.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c526f189ab543f49a4e7eff49fcf11b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769521902&amp;x-signature=OHYcH35P6rPKcgHIfiBYskt67c4%3D" alt="iShot_2026-01-20_21.41.40" loading="lazy"/></a></p>
<h2 data-id="heading-2">æœ¬åœ°å…šå’ŒAPIå…šçš„åŒé‡ç‹‚æ¬¢</h2>
<p>å¯¹äºè¿˜åœ¨ç”¨GLM-4.5-Flashçš„æœ‹å‹ï¼Œè¿™é‡Œæœ‰ä¸ªæé†’ï¼šè€ç‰ˆæœ¬å°†åœ¨1æœˆåº•ä¸‹çº¿ï¼Œæµé‡ä¼šè‡ªåŠ¨åˆ‡åˆ°4.7ã€‚è¿™æ³¢å‡çº§æ˜¯æ— ç¼ä¸”å…è´¹çš„ã€‚</p>
<p>è€Œå¯¹äºæƒ³ç©ç§æœ‰åŒ–çš„æœ‹å‹ï¼Œè¿™æ¬¡å¼€æºéå¸¸å½»åº•ã€‚</p>
<p>å¦‚æœä½ æƒ³åœ¨æœ¬åœ°éƒ¨ç½²ï¼Œé—¨æ§›çœŸçš„ä¸é«˜ï¼š</p>
<ul>
<li><strong>4-bité‡åŒ–ç‰ˆæœ¬</strong>ï¼šä¸€å¼ 16GBæ˜¾å­˜çš„æ˜¾å¡ï¼ˆæ¯”å¦‚4080ï¼‰å°±èƒ½è·‘èµ·æ¥ã€‚</li>
<li><strong>å…¨ç²¾åº¦ç‰ˆæœ¬</strong>ï¼šä¸¤å¼ 3090æˆ–è€…ä¸€å¼ A6000ä¹Ÿèƒ½æå®šã€‚</li>
</ul>
<p>å®ƒç›®å‰å·²ç»è·å¾—äº†vLLMã€Ollamaç­‰ä¸»æµæ¨ç†æ¡†æ¶çš„æ”¯æŒã€‚ä¹Ÿå°±æ˜¯å–æ¯å’–å•¡çš„åŠŸå¤«ï¼Œä½ å°±èƒ½åœ¨è‡ªå·±çš„ç»ˆç«¯é‡Œæ‹‰èµ·ä¸€ä¸ªæ€§èƒ½å¯¹æ ‡GPT-OSS-20Bï¼Œç”šè‡³åœ¨ç¼–ç¨‹èƒ½åŠ›ä¸Šè¿˜è¦æ›´å¼ºçš„ç§æœ‰æ¨¡å‹ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2FiShot_2026-01-20_21.41.58-1024x820.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/iShot_2026-01-20_21.41.58-1024x820.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3b89681eb2c4a17968eda5705fd1821~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769521902&amp;x-signature=Cwy0%2FsgDnJjvjUNqQY8f9I1nTAo%3D" alt="iShot_2026-01-20_21.41.58" loading="lazy"/></a></p>
<h2 data-id="heading-3">æ€»ç»“ï¼šæ•ˆèƒ½ä¼˜å…ˆçš„æ–°æ—¶ä»£</h2>
<p>GLM-4.7-Flashçš„å‡ºç°ï¼Œæ ‡å¿—ç€å¤§æ¨¡å‹ä¹‹æˆ˜è¿›å…¥äº†ä¸€ä¸ªæ–°é˜¶æ®µã€‚æˆ‘ä»¬ä¸å†å•çº¯æ¯”æ‹¼è°çš„æ¨¡å‹å‚æ•°æ›´å¤§ã€è°çƒ§çš„æ˜¾å¡æ›´å¤šï¼Œè€Œæ˜¯å¼€å§‹æ¯”æ‹¼è°èƒ½åœ¨æœ‰é™çš„èµ„æºä¸‹ï¼ŒæŠŠæ¨¡å‹å‹æ¦¨å‡ºæ›´é«˜çš„æ™ºèƒ½æ°´å¹³ã€‚</p>
<p>å¯¹äºä¼ä¸šæ¥è¯´ï¼Œè¿™æ˜¯ä¸€å¼ é™ä½æ¨ç†æˆæœ¬çš„å¥½ç‰Œï¼›å¯¹äºå¼€å‘è€…ä¸ªäººæ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªèƒ½å¡è¿›ç¬”è®°æœ¬é‡Œçš„å¼ºåŠ›ç¼–ç¨‹åŠ©æ‰‹ã€‚</p>
<p>æ™ºè°±è¿™æ¬¡å¹¶æ²¡æœ‰é‡æ–°å‘æ˜è½®å­ï¼Œä½†å®ƒæŠŠè½®å­æ‰“ç£¨å¾—æ›´è½»ã€æ›´é¡ºæ»‘äº†ã€‚å¦‚æœä½ æ‰‹å¤´æ­£å¥½æœ‰é—²ç½®çš„ç®—åŠ›ï¼Œæˆ–è€…æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªé«˜æ€§ä»·æ¯”çš„APIæ›¿ä»£æ–¹æ¡ˆï¼Œå»Hugging Faceä¸‹è½½æƒé‡ï¼Œæˆ–è€…å»å¼€æ”¾å¹³å°è¯•ä¸€è¯•ï¼Œå¤§æ¦‚ç‡ä¸ä¼šè®©ä½ å¤±æœ›ã€‚</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®© AI å­¦ä¼š"é—®ä¸€å˜´"ï¼šassistant-ui å‰ç«¯å·¥å…·çš„äººæœºäº¤äº’å®è·µ]]></title>    <link>https://juejin.cn/post/7597276695403626537</link>    <guid>https://juejin.cn/post/7597276695403626537</guid>    <pubDate>2026-01-20T14:02:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597276695403626537" data-draft-id="7597253913248841769" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®© AI å­¦ä¼š&quot;é—®ä¸€å˜´&quot;ï¼šassistant-ui å‰ç«¯å·¥å…·çš„äººæœºäº¤äº’å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,Rust,OpenAI"/> <meta itemprop="datePublished" content="2026-01-20T14:02:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çº¢å°˜æ•£ä»™"/> <meta itemprop="url" content="https://juejin.cn/user/334694205359901"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®© AI å­¦ä¼š"é—®ä¸€å˜´"ï¼šassistant-ui å‰ç«¯å·¥å…·çš„äººæœºäº¤äº’å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/334694205359901/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çº¢å°˜æ•£ä»™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T14:02:05.000Z" title="Tue Jan 20 2026 14:02:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è®© AI å­¦ä¼š"é—®ä¸€å˜´"ï¼šassistant-ui å‰ç«¯å·¥å…·çš„äººæœºäº¤äº’å®è·µ</h2>
<blockquote>
<p>ğŸ¤– å½“ AI åŠ©æ‰‹è¦å¸®ç”¨æˆ·æ‰§è¡Œæ•æ„Ÿæ“ä½œæ—¶ï¼Œæ€»ä¸èƒ½é—·å¤´å°±å¹²å§ï¼Ÿå¾—å…ˆé—®é—®äººå®¶ç¡®ä¸ç¡®è®¤å•Šï¼</p>
</blockquote>
<h3 data-id="heading-1">èƒŒæ™¯ï¼šä¸€ä¸ª"è½æ’"çš„ AI åŠ©æ‰‹</h3>
<p>æˆ‘åœ¨åšä¸€ä¸ªå·¥å•ç®¡ç†ç³»ç»Ÿï¼Œé‡Œé¢æœ‰ä¸ª AI åŠ©æ‰‹åŠŸèƒ½ã€‚ç”¨æˆ·å¯ä»¥è¯´"å¸®æˆ‘åˆ›å»ºä¸€ä¸ªå·¥å•ï¼Œæ•°é‡ 50"ï¼ŒAI å°±ä¼šè°ƒç”¨å·¥å…·åˆ›å»ºè®°å½•ã€‚</p>
<p>å¬èµ·æ¥å¾ˆç¾å¥½ï¼Œä½†é—®é¢˜æ¥äº†ï¼š</p>
<p><strong>AI å¤ª"è‡ªä¿¡"äº†ã€‚</strong></p>
<p>å®ƒæ”¶åˆ°æŒ‡ä»¤å°±ç›´æ¥æ‰§è¡Œï¼Œä¸‡ä¸€ç”¨æˆ·è¯´é”™äº†å‘¢ï¼Ÿä¸‡ä¸€ AI ç†è§£é”™äº†å‘¢ï¼Ÿ50 å˜æˆ 500ï¼Œé‚£å¯å°±éº»çƒ¦äº†ã€‚</p>
<p>æ‰€ä»¥æˆ‘éœ€è¦ä¸€ä¸ªæœºåˆ¶ï¼š<strong>AI è°ƒç”¨å·¥å…·å‰ï¼Œå…ˆè®©ç”¨æˆ·ç¡®è®¤ä¸€ä¸‹ã€‚</strong></p>
<pre><code class="hljs language-less" lang="less">ç”¨æˆ·: å¸®æˆ‘åˆ›å»ºä¸€ä¸ªå·¥å•ï¼Œæ•°é‡ <span class="hljs-number">50</span>

<span class="hljs-selector-tag">AI</span>: å¥½çš„ï¼Œæˆ‘æ¥å¸®ä½ åˆ›å»ºè®°å½•
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ç¡®è®¤åˆ›å»ºè®°å½•             â”‚
    â”‚ åç§°: <span class="hljs-selector-tag">A</span> æ¬¾               â”‚
    â”‚ æ•°é‡: <span class="hljs-number">50</span>                 â”‚
    â”‚ <span class="hljs-selector-attr">[ç¡®è®¤]</span>  <span class="hljs-selector-attr">[å–æ¶ˆ]</span>           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç”¨æˆ·: *ç‚¹å‡»ç¡®è®¤*

<span class="hljs-selector-tag">AI</span>: âœ… å·²åˆ›å»ºè®°å½•ï¼š<span class="hljs-selector-tag">A</span> æ¬¾ <span class="hljs-selector-tag">x</span> <span class="hljs-number">50</span>
</code></pre>
<p>è¿™å°±æ˜¯æ‰€è°“çš„ <strong>Human-in-the-Loop</strong>ï¼ˆäººæœºåä½œï¼‰æ¨¡å¼ã€‚</p>
<h3 data-id="heading-2">æŠ€æœ¯é€‰å‹</h3>
<ul>
<li>å‰ç«¯ï¼šReact + <code>@assistant-ui/react</code></li>
<li>åç«¯ï¼šRust + Axum + Rigï¼ˆAI æ¡†æ¶ï¼‰</li>
<li>AIï¼šOpenAI GPT-4</li>
</ul>
<p><code>assistant-ui</code> æ˜¯ä¸€ä¸ªä¸“é—¨ä¸º AI èŠå¤©ç•Œé¢è®¾è®¡çš„ React ç»„ä»¶åº“ï¼Œå®ƒæœ‰ä¸ªå¾ˆæ£’çš„ç‰¹æ€§ï¼š<strong>å‰ç«¯å·¥å…·ï¼ˆFrontend Toolsï¼‰</strong>ã€‚</p>
<h3 data-id="heading-3">æ¶æ„æ¦‚è§ˆ</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TB
    subgraph Frontend["å‰ç«¯ (React)"]
        Runtime[useChatRuntime]
        Tool[CreateRecordTool&lt;br/&gt;å‰ç«¯å·¥å…·]
        UI[ç¡®è®¤ UI]
        Runtime --&gt; Tool --&gt; UI
        UI --&gt;|resume| Tool
        Tool --&gt;|sendAutomatically| Runtime
    end

    subgraph Backend["åç«¯ (Rust)"]
        Handler[Chat Handler]
        FTool[FrontendTool&lt;br/&gt;å·¥å…·å®šä¹‰è½¬å‘]
        AI[AI Model]
        Handler --&gt; FTool --&gt; AI
    end

    Runtime &lt;--&gt;|HTTP| Handler
</code></pre>
<h3 data-id="heading-4">æ ¸å¿ƒæ¦‚å¿µï¼šå‰ç«¯å·¥å…· vs åç«¯å·¥å…·</h3>

























<table><thead><tr><th/><th>å‰ç«¯å·¥å…·</th><th>åç«¯å·¥å…·</th></tr></thead><tbody><tr><td>æ‰§è¡Œä½ç½®</td><td>æµè§ˆå™¨</td><td>æœåŠ¡å™¨</td></tr><tr><td>èƒ½å¦ä¸ç”¨æˆ·äº¤äº’</td><td>âœ… å¯ä»¥</td><td>âŒ ä¸è¡Œ</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>éœ€è¦ç¡®è®¤çš„æ“ä½œ</td><td>æŸ¥è¯¢ã€è®¡ç®—</td></tr></tbody></table>
<p>å‰ç«¯å·¥å…·çš„ç²¾é«“åœ¨äºï¼š<strong>å·¥å…·å®šä¹‰å‘ç»™ AIï¼Œä½†æ‰§è¡Œåœ¨å‰ç«¯</strong>ã€‚</p>
<p>AI çŸ¥é“æœ‰è¿™ä¸ªå·¥å…·å¯ä»¥ç”¨ï¼Œå½“å®ƒå†³å®šè°ƒç”¨æ—¶ï¼Œå‰ç«¯æ‹¦æˆªæ‰§è¡Œï¼Œå¯ä»¥å¼¹ä¸ªç¡®è®¤æ¡†ã€è®©ç”¨æˆ·å¡«ä¸ªè¡¨å•ï¼Œç”¨æˆ·æ“ä½œå®Œå†æŠŠç»“æœå‘Šè¯‰ AIã€‚</p>
<h3 data-id="heading-5">å®ç°æ­¥éª¤</h3>
<h4 data-id="heading-6">1. å®šä¹‰å·¥å…·å‚æ•°</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// schema.ts</span>
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">"zod"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">CreateRecordSchema</span> = z.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">name</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"åç§°"</span>),
  <span class="hljs-attr">amount</span>: z.<span class="hljs-title function_">number</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"æ•°é‡"</span>),
});
</code></pre>
<h4 data-id="heading-7">2. åˆ›å»ºå‰ç«¯å·¥å…·</h4>
<p>è¿™æ˜¯æœ€å…³é”®çš„éƒ¨åˆ†ï¼Œä½¿ç”¨ <code>makeAssistantTool</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { makeAssistantTool } <span class="hljs-keyword">from</span> <span class="hljs-string">"@assistant-ui/react"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">CreateRecordTool</span> = <span class="hljs-title function_">makeAssistantTool</span>({
  <span class="hljs-attr">toolName</span>: <span class="hljs-string">"create-record"</span>,
  <span class="hljs-attr">type</span>: <span class="hljs-string">"frontend"</span>,  <span class="hljs-comment">// ğŸ”‘ å…³é”®ï¼šæ ‡è®°ä¸ºå‰ç«¯å·¥å…·</span>
  <span class="hljs-attr">parameters</span>: <span class="hljs-title class_">CreateRecordSchema</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"åˆ›å»ºè®°å½•"</span>,

  <span class="hljs-comment">// execute åœ¨å‰ç«¯æ‰§è¡Œ</span>
  <span class="hljs-attr">execute</span>: <span class="hljs-keyword">async</span> (args, ctx) =&gt; {
    <span class="hljs-keyword">const</span> { human } = ctx;

    <span class="hljs-comment">// human() ä¼šæš‚åœæ‰§è¡Œï¼Œç­‰å¾…ç”¨æˆ·ç¡®è®¤</span>
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">human</span>(<span class="hljs-string">"è¯·ç¡®è®¤åˆ›å»ºè®°å½•"</span>);

    <span class="hljs-keyword">if</span> (response === <span class="hljs-string">"confirmed"</span>) {
      <span class="hljs-comment">// è°ƒç”¨å®é™… API</span>
      <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">createRecord</span>(args);
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span> };
    }
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span> };
  },

  <span class="hljs-comment">// render æ¸²æŸ“ç¡®è®¤ UI</span>
  <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ args, status, result, resume }</span>) =&gt;</span> {
    <span class="hljs-comment">// ç­‰å¾…ç¡®è®¤çŠ¶æ€</span>
    <span class="hljs-keyword">if</span> (status.<span class="hljs-property">type</span> === <span class="hljs-string">"requires-action"</span>) {
      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"rounded-lg border p-4"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ç¡®è®¤åˆ›å»ºè®°å½•<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åç§°: {args.name} | æ•°é‡: {args.amount}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> resume("confirmed")}&gt;ç¡®è®¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> resume("cancelled")}&gt;å–æ¶ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
      );
    }

    <span class="hljs-comment">// å®ŒæˆçŠ¶æ€</span>
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{result?.success ? "âœ…" : "âŒ"} å·²å¤„ç†<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  },
});
</code></pre>
<p><strong>æ ¸å¿ƒ API è§£é‡Šï¼š</strong></p>
<ul>
<li><code>human(message)</code>: æš‚åœæ‰§è¡Œï¼Œç­‰å¾…ç”¨æˆ·æ“ä½œ</li>
<li><code>resume(value)</code>: ç”¨æˆ·æ“ä½œåæ¢å¤æ‰§è¡Œï¼Œvalue ä¼šä½œä¸º <code>human()</code> çš„è¿”å›å€¼</li>
</ul>
<h4 data-id="heading-8">3. æ³¨å†Œå·¥å…·</h4>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ChatPage</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> processedToolCalls = <span class="hljs-title function_">useRef</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>&lt;<span class="hljs-built_in">string</span>&gt;());

  <span class="hljs-keyword">const</span> runtime = <span class="hljs-title function_">useChatRuntime</span>({
    <span class="hljs-attr">transport</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">AssistantChatTransport</span>({
      <span class="hljs-attr">api</span>: <span class="hljs-string">"/api/chat"</span>,
    }),
    <span class="hljs-comment">// å·¥å…·å®Œæˆåè‡ªåŠ¨å‘é€ç»“æœç»™åç«¯</span>
    <span class="hljs-attr">sendAutomaticallyWhen</span>: <span class="hljs-function">(<span class="hljs-params">options</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">lastAssistantMessageIsCompleteWithToolCalls</span>(options)) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }
      <span class="hljs-keyword">const</span> lastMsg = options.<span class="hljs-property">messages</span>.<span class="hljs-title function_">at</span>(-<span class="hljs-number">1</span>);
      <span class="hljs-keyword">const</span> toolPart = lastMsg?.<span class="hljs-property">parts</span>.<span class="hljs-title function_">find</span>(
        <span class="hljs-function">(<span class="hljs-params">p</span>) =&gt;</span> p.<span class="hljs-property">type</span> === <span class="hljs-string">"tool-create-record"</span> &amp;&amp; p.<span class="hljs-property">state</span> === <span class="hljs-string">"output-available"</span>
      ) <span class="hljs-keyword">as</span> { <span class="hljs-attr">toolCallId</span>: <span class="hljs-built_in">string</span> } | <span class="hljs-literal">undefined</span>;

      <span class="hljs-keyword">if</span> (toolPart &amp;&amp; !processedToolCalls.<span class="hljs-property">current</span>.<span class="hljs-title function_">has</span>(toolPart.<span class="hljs-property">toolCallId</span>)) {
        processedToolCalls.<span class="hljs-property">current</span>.<span class="hljs-title function_">add</span>(toolPart.<span class="hljs-property">toolCallId</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },
  });

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AssistantRuntimeProvider</span> <span class="hljs-attr">runtime</span>=<span class="hljs-string">{runtime}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Thread</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">CreateRecordTool</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">AssistantRuntimeProvider</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-9">4. åç«¯æ¥æ”¶å·¥å…·å®šä¹‰</h4>
<p>å‰ç«¯ä¼šæŠŠå·¥å…·å®šä¹‰å‘ç»™åç«¯ï¼Œåç«¯éœ€è¦è½¬å‘ç»™ AIï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// Rust åç«¯</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">FrontendTool</span> {
    <span class="hljs-keyword">pub</span> name: <span class="hljs-type">String</span>,
    <span class="hljs-keyword">pub</span> description: <span class="hljs-type">String</span>,
    <span class="hljs-keyword">pub</span> parameters: Value,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">ToolDyn</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">FrontendTool</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">name</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> { <span class="hljs-keyword">self</span>.name.<span class="hljs-title function_ invoke__">clone</span>() }

    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">definition</span>(&amp;<span class="hljs-keyword">self</span>, _: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> ToolDefinition {
        ToolDefinition {
            name: <span class="hljs-keyword">self</span>.name.<span class="hljs-title function_ invoke__">clone</span>(),
            description: <span class="hljs-keyword">self</span>.description.<span class="hljs-title function_ invoke__">clone</span>(),
            parameters: <span class="hljs-keyword">self</span>.parameters.<span class="hljs-title function_ invoke__">clone</span>(),
        }
    }

    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">call</span>(&amp;<span class="hljs-keyword">self</span>, _: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>, ToolError&gt; {
        <span class="hljs-comment">// å‰ç«¯å·¥å…·ä¸åœ¨åç«¯æ‰§è¡Œï¼</span>
        <span class="hljs-title function_ invoke__">Err</span>(ToolError::<span class="hljs-title function_ invoke__">ToolCallError</span>(<span class="hljs-string">"Frontend tool"</span>.<span class="hljs-title function_ invoke__">into</span>()))
    }
}
</code></pre>
<h3 data-id="heading-10">å®Œæ•´æµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant ç”¨æˆ·
    participant å‰ç«¯
    participant åç«¯
    participant AI

    ç”¨æˆ·-&gt;&gt;å‰ç«¯: "åˆ›å»ºå·¥å•ï¼Œæ•°é‡ 50"
    å‰ç«¯-&gt;&gt;åç«¯: å‘é€æ¶ˆæ¯ + å·¥å…·å®šä¹‰
    åç«¯-&gt;&gt;AI: è½¬å‘
    AI-&gt;&gt;åç«¯: è°ƒç”¨ create-record
    åç«¯--&gt;&gt;å‰ç«¯: è¿”å›å·¥å…·è°ƒç”¨
    å‰ç«¯-&gt;&gt;å‰ç«¯: execute() â†’ human()
    å‰ç«¯-&gt;&gt;ç”¨æˆ·: æ˜¾ç¤ºç¡®è®¤æ¡†
    ç”¨æˆ·-&gt;&gt;å‰ç«¯: ç‚¹å‡»ç¡®è®¤
    å‰ç«¯-&gt;&gt;å‰ç«¯: resume("confirmed")
    å‰ç«¯-&gt;&gt;åç«¯: å‘é€å·¥å…·ç»“æœ
    åç«¯-&gt;&gt;AI: è½¬å‘ç»“æœ
    AI-&gt;&gt;åç«¯: "å¥½çš„ï¼Œå·²è®°å½•"
    åç«¯--&gt;&gt;å‰ç«¯: è¿”å›å›å¤
    å‰ç«¯-&gt;&gt;ç”¨æˆ·: æ˜¾ç¤ºå®Œæˆ
</code></pre>
<h3 data-id="heading-11">è¸©å‘è®°å½•</h3>
<h4 data-id="heading-12">å‘ 1ï¼š<code>Tool call is not waiting for human input</code></h4>
<p><strong>åŸå› </strong>ï¼šæ²¡åœ¨ <code>execute</code> é‡Œè°ƒç”¨ <code>human()</code>ï¼Œæˆ–è€…åœ¨é”™è¯¯çŠ¶æ€ä¸‹è°ƒç”¨äº† <code>resume()</code></p>
<p><strong>è§£å†³</strong>ï¼šç¡®ä¿ <code>execute</code> é‡Œæœ‰ <code>await human()</code>ï¼Œä¸”åªåœ¨ <code>status.type === "requires-action"</code> æ—¶è°ƒç”¨ <code>resume()</code></p>
<h4 data-id="heading-13">å‘ 2ï¼šå·¥å…·å®Œæˆåæ¶ˆæ¯æ— é™å‘é€</h4>
<p><strong>åŸå› </strong>ï¼š<code>sendAutomaticallyWhen</code> å¯¹åŒä¸€ä¸ªå·¥å…·è°ƒç”¨é‡å¤è¿”å› <code>true</code></p>
<p><strong>è§£å†³</strong>ï¼šç”¨ <code>useRef</code> è®°å½•å·²å¤„ç†çš„ <code>toolCallId</code></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> processedToolCalls = <span class="hljs-title function_">useRef</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>&lt;<span class="hljs-built_in">string</span>&gt;());

<span class="hljs-attr">sendAutomaticallyWhen</span>: <span class="hljs-function">(<span class="hljs-params">options</span>) =&gt;</span> {
  <span class="hljs-comment">// ... æ‰¾åˆ°å®Œæˆçš„å·¥å…·è°ƒç”¨</span>
  <span class="hljs-keyword">if</span> (!processedToolCalls.<span class="hljs-property">current</span>.<span class="hljs-title function_">has</span>(toolCallId)) {
    processedToolCalls.<span class="hljs-property">current</span>.<span class="hljs-title function_">add</span>(toolCallId);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
</code></pre>
<h4 data-id="heading-14">å‘ 3ï¼šç”¨é”™äº† <code>makeAssistantToolUI</code></h4>
<p><code>makeAssistantToolUI</code> åªæ¸²æŸ“ UIï¼Œä¸ä¼šæŠŠå·¥å…·å®šä¹‰å‘ç»™åç«¯ã€‚å¦‚æœéœ€è¦ AI èƒ½è°ƒç”¨ï¼Œå¿…é¡»ç”¨ <code>makeAssistantTool</code>ã€‚</p>
<h3 data-id="heading-15">æ€»ç»“</h3>
<p>é€šè¿‡ <code>assistant-ui</code> çš„å‰ç«¯å·¥å…·æœºåˆ¶ï¼Œæˆ‘ä»¬å®ç°äº†ï¼š</p>
<ol>
<li><strong>AI èƒ½åŠ›ä¸æ‰“æŠ˜</strong>ï¼šAI ä»ç„¶å¯ä»¥å†³å®šä½•æ—¶è°ƒç”¨å·¥å…·</li>
<li><strong>ç”¨æˆ·æœ‰æ§åˆ¶æƒ</strong>ï¼šæ•æ„Ÿæ“ä½œå¿…é¡»ç»è¿‡ç”¨æˆ·ç¡®è®¤</li>
<li><strong>ä½“éªŒå¾ˆè‡ªç„¶</strong>ï¼šç¡®è®¤æ¡†åµŒå…¥åœ¨å¯¹è¯æµä¸­ï¼Œä¸çªå…€</li>
</ol>
<p>è¿™å¥—æ–¹æ¡ˆå·²ç»åœ¨ç”Ÿäº§ç¯å¢ƒç¨³å®šè¿è¡Œï¼Œç”¨æˆ·å†ä¹Ÿä¸ç”¨æ‹…å¿ƒ AI "æ‰‹æ»‘"äº† ğŸ˜„</p>
<hr/>
<p><strong>æŠ€æœ¯æ ˆ</strong>ï¼šReact + Rust + Tauri + assistant-ui</p>
<p>å¦‚æœä½ ä¹Ÿåœ¨åš AI åº”ç”¨ï¼Œéœ€è¦äººæœºåä½œçš„åœºæ™¯ï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼</p>
<p>æ¬¢è¿è¯„è®ºåŒºäº¤æµ ğŸ‘‡</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Google Agentè¿›åŒ–è®ºï¼šä» L0 åˆ° L4]]></title>    <link>https://juejin.cn/post/7597276695403102249</link>    <guid>https://juejin.cn/post/7597276695403102249</guid>    <pubDate>2026-01-20T12:09:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597276695403102249" data-draft-id="7597276695403085865" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Google Agentè¿›åŒ–è®ºï¼šä» L0 åˆ° L4"/> <meta itemprop="keywords" content="Agent,Google,AIGC"/> <meta itemprop="datePublished" content="2026-01-20T12:09:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¥‡èˆç²¾é€‰"/> <meta itemprop="url" content="https://juejin.cn/user/4388906147515367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Google Agentè¿›åŒ–è®ºï¼šä» L0 åˆ° L4
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4388906147515367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¥‡èˆç²¾é€‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T12:09:01.000Z" title="Tue Jan 20 2026 12:09:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨äººå·¥æ™ºèƒ½çš„æ¼”è¿›å†ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ­£ç»å†ä»â€œé¢„æµ‹å‹ AIâ€å‘ <strong>â€œè‡ªä¸» Agentï¼ˆAutonomous Agentsï¼‰â€</strong> çš„å†å²æ€§è·¨è¶Šã€‚è¿‡å»çš„ AI æ›´åƒæ˜¯è¢«åŠ¨çš„å“åº”è€…ï¼Œå±€é™äºå›ç­”é—®é¢˜æˆ–ç”Ÿæˆå†…å®¹ï¼›è€Œç°åœ¨çš„ Agent åˆ™æ˜¯ä¸€ä¸ªæ‹¥æœ‰æ„ŸçŸ¥ã€å†³ç­–ä¸æ‰§è¡Œèƒ½åŠ›çš„å®Œæ•´ç³»ç»Ÿï¼Œèƒ½å¤Ÿä¸»åŠ¨æ€è€ƒã€è°ƒç”¨å·¥å…·å¹¶é—­ç¯å®Œæˆå¤æ‚ä»»åŠ¡ã€‚</p>
<p>ä¸ºäº†å¸®åŠ©å¼€å‘è€…å’Œäº§å“å†³ç­–è€…å˜æ¸…è¿™ä¸€æ–°ç‰©ç§çš„æŠ€æœ¯è·¯å¾„ï¼ŒGoogle å›¢é˜Ÿå‘å¸ƒäº†æƒå¨æŒ‡å— <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.google.com%2Fresources%2Fcontent%2Fai-agent-handbook" target="_blank" title="https://cloud.google.com/resources/content/ai-agent-handbook" ref="nofollow noopener noreferrer">Introduction to Agents</a></strong>ï¼Œå°† Agent çš„èƒ½åŠ›åˆ’åˆ†ä¸º L0 è‡³ L4 äº”ä¸ªå±‚çº§ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ Agent çš„è§£å‰–å­¦æ¶æ„ï¼šæ¨¡å‹ã€å·¥å…·ä¸ç¼–æ’</h2>
<pre><code class="hljs language-markdown" lang="markdown">è¦ç†è§£ Agent çš„èƒ½åŠ›åˆ†çº§ï¼Œé¦–å…ˆéœ€è¦æ‹†è§£å…¶æ ¸å¿ƒæ¶æ„ã€‚Google å°†ä¸€ä¸ªæ ‡å‡†çš„ Agent ç³»ç»Ÿå®šä¹‰ä¸ºå››ä¸ªæ ¸å¿ƒç»„ä»¶çš„æœ‰æœºç»“åˆï¼š

<span class="hljs-bullet">1.</span>  <span class="hljs-strong">**å¤§è„‘ (The Model)ï¼š**</span> æ ¸å¿ƒæ¨ç†å¼•æ“ã€‚å®ƒè´Ÿè´£ä¿¡æ¯å¤„ç†ã€é€‰é¡¹è¯„ä¼°åŠæœ€ç»ˆå†³ç­–ã€‚æ¨¡å‹çš„æ¨ç†èƒ½åŠ›ç›´æ¥å†³å®šäº† Agent çš„æ™ºå•†ä¸Šé™ã€‚
<span class="hljs-bullet">2.</span>  <span class="hljs-strong">**åŒæ‰‹ (The Tools)ï¼š**</span> è¿æ¥æ•°å­—ä¸ç‰©ç†ä¸–ç•Œçš„æ¡¥æ¢ã€‚é€šè¿‡å·¥å…·ï¼ŒAgent å¯ä»¥è®¿é—®æ—¥å†ã€å‘é€é‚®ä»¶ã€æ£€ç´¢æ•°æ®åº“æˆ–æ‰§è¡Œä»£ç ã€‚æ²¡æœ‰å·¥å…·ï¼ŒAgent ä»…ä»…æ˜¯ä¸€ä¸ªä¸ä¸–éš”ç»çš„èŠå¤©æœºå™¨äººã€‚
<span class="hljs-bullet">3.</span>  <span class="hljs-strong">**ç¥ç»ç³»ç»Ÿ (The Orchestration)ï¼š**</span> ç¼–æ’å±‚ï¼Œå³ Agent çš„â€œç®¡å®¶â€ã€‚å®ƒè´Ÿè´£ç®¡ç† <span class="hljs-strong">**æ€ç»´é“¾ (Chain of Thought)**</span>ã€ç»´æŠ¤ <span class="hljs-strong">**çŠ¶æ€è®°å¿† (State)**</span>ï¼Œå¹¶å†³å®šä½•æ—¶è°ƒç”¨ä½•ç§å·¥å…·ã€‚å®ƒèµ‹äºˆäº† AI è¿è´¯çš„é€»è¾‘ä¸â€œçŸ­æœŸè®°å¿†â€èƒ½åŠ›ã€‚
<span class="hljs-bullet">4.</span>  <span class="hljs-strong">**èº¯ä½“ (Deployment)ï¼š**</span> éƒ¨ç½²ç¯å¢ƒã€‚è¿™ä¸ä»…æŒ‡æœåŠ¡å™¨åŸºç¡€è®¾æ–½ï¼Œè¿˜åŒ…å«è®© Agent èƒ½è¢«ç”¨æˆ·äº¤äº’ã€æˆ–è¢«å…¶ä»– Agent è°ƒç”¨çš„è¿è¡Œæ—¶æ¥å£ã€‚
</code></pre>
<h2 data-id="heading-1">äºŒã€ Agent çš„å·¥ä½œæœºåˆ¶ï¼šè®¤çŸ¥-è¡ŒåŠ¨é—­ç¯</h2>
<p>Agent è§£å†³é—®é¢˜çš„è¿‡ç¨‹å¹¶éå•æ¬¡æ¨ç†ï¼Œè€Œæ˜¯ä¸€ä¸ªåŒ…å«â€œè§‚å¯Ÿ-æ€è€ƒ-ä¿®æ­£â€çš„é€’å½’é—­ç¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8be402dbabb74cd9b64d053d59173e2f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769515740&amp;x-signature=WiqU2Uz0jbG1sNYI67naTvSnS3E%3D" alt="image-20260105171602090" loading="lazy"/></p>
<p><strong>å›¾ 1ï¼šæ™ºèƒ½ä½“è§£å†³é—®é¢˜çš„æ¼æ–—æ¨¡å‹</strong></p>
<p>è¿™ä¸€å¾ªç¯é€šå¸¸åŒ…å«äº”ä¸ªå…³é”®æ­¥éª¤ï¼š</p>
<ol>
<li><strong>æ¥æ”¶ä½¿å‘½ (Get the Mission)ï¼š</strong> æ¥æ”¶é«˜å±‚çº§çš„æ¨¡ç³Šç›®æ ‡ï¼Œä¾‹å¦‚ï¼šâ€œå¸®æˆ‘å®‰æ’å›¢é˜Ÿä¸‹å‘¨çš„å‚ä¼šè¡Œç¨‹â€ã€‚</li>
<li><strong>æ‰«æç¯å¢ƒ (Scan the Scene)ï¼š</strong> è·å–ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚Agent ä¼šæ£€ç´¢è®°å¿†ï¼ˆâ€œç”¨æˆ·ä¹‹å‰çš„åå¥½æ˜¯ä»€ä¹ˆï¼Ÿâ€ï¼‰å¹¶æ£€æŸ¥å¯ç”¨èµ„æºï¼ˆâ€œæˆ‘æœ‰å·®æ—…ç³»ç»Ÿçš„æƒé™å—ï¼Ÿâ€ï¼‰ã€‚</li>
<li><strong>æ·±åº¦è§„åˆ’ (Think It Through)ï¼š</strong> åˆ¶å®šå¤šæ­¥éª¤æ‰§è¡Œè®¡åˆ’ã€‚ä¾‹å¦‚ï¼šå…ˆæå–å‚ä¼šåå• -&gt; å†æ ¸å¯¹æ—¥å†ç©ºæ¡£ -&gt; æœ€åæ ¹æ®é¢„ç®—é™åˆ¶é¢„è®¢æœºç¥¨ã€‚</li>
<li><strong>é‡‡å–è¡ŒåŠ¨ (Take Action)ï¼š</strong> æ‰§è¡Œå…·ä½“æ“ä½œã€‚è°ƒç”¨ API æŸ¥è¯¢æ•°æ®åº“ã€è¯»å–æ–‡æ¡£æˆ–å‘é€ç¡®è®¤é‚®ä»¶ã€‚</li>
<li><strong>è§‚å¯Ÿä¸è¿­ä»£ (Observe and Iterate)ï¼š</strong> éªŒè¯æ‰§è¡Œç»“æœã€‚å¦‚æœè®¢ç¥¨å¤±è´¥ï¼ŒAgent ä¼šåˆ†æé”™è¯¯æ—¥å¿—ï¼Œä¿®æ­£å‚æ•°å¹¶é‡æ–°ç”Ÿæˆè®¡åˆ’ï¼Œç›´åˆ°é—­ç¯å®Œæˆã€‚</li>
</ol>
<h2 data-id="heading-2">ä¸‰ã€ Agent èƒ½åŠ›åˆ†çº§ï¼šä»å­¤å²›åˆ°è‡ªè¿›åŒ–</h2>
<p>åŸºäºè‡ªä¸»æƒï¼ˆAutonomyï¼‰ä¸åä½œèƒ½åŠ›ï¼ˆCollaborationï¼‰çš„å¼ºå¼±ï¼ŒGoogle å°† Agent çš„è¿›åŒ–è·¯å¾„åˆ’åˆ†ä¸ºäº”å±‚é‡‘å­—å¡”ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a929d3f9fef44a5baf68ff67edb5d04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769515740&amp;x-signature=5yEAlf3tAPiqNr6iM96R2rmYj64%3D" alt="image-20260105171647579" loading="lazy"/></p>
<p><strong>å›¾ 2ï¼šæ™ºèƒ½ä½“è§£å†³é—®é¢˜çš„æ¼æ–—æ¨¡å‹</strong></p>
<h4 data-id="heading-3">Level 0ï¼šæ ¸å¿ƒæ¨ç†ç³»ç»Ÿ (Core Reasoning System)</h4>
<p>è¿™æ˜¯ Agent çš„é›å½¢ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ— å¤–æ¥èƒ½åŠ›çš„â€œè£¸æ¨¡å‹â€ã€‚</p>
<ul>
<li><strong>ç‰¹ç‚¹ï¼š</strong> ä»…ä¾èµ–é¢„è®­ç»ƒæ•°æ®ï¼ˆPre-trained Knowledgeï¼‰è¿›è¡Œé—®ç­”ï¼Œæ— å¤–éƒ¨å·¥å…·è¿æ¥ï¼Œæ— é•¿æœŸçŠ¶æ€è®°å¿†ã€‚</li>
<li><strong>å±€é™ï¼š</strong> å¤„äºâ€œç›²ç›®â€çŠ¶æ€ã€‚å®ƒå¯ä»¥èƒŒè¯µæ£’çƒè§„åˆ™ï¼Œä½†å¦‚æœä½ é—®â€œæ˜¨æ™šæ´‹åŸºé˜Ÿçš„æ¯”åˆ†æ˜¯å¤šå°‘ï¼Ÿâ€ï¼Œå®ƒä¼šå› æ— æ³•è”ç½‘è€Œäº§ç”Ÿå¹»è§‰æˆ–è¡¨ç¤ºæ— èƒ½ä¸ºåŠ›ã€‚</li>
</ul>
<h4 data-id="heading-4">Level 1ï¼šäº’è”å‹é—®é¢˜è§£å†³è€… (Connected Problem-Solver)</h4>
<p>å½“â€œå¤§è„‘â€æ¥é©³äº†â€œåŒæ‰‹â€ï¼ŒçœŸæ­£çš„ Agent è¯ç”Ÿäº†ã€‚</p>
<ul>
<li><strong>ç‰¹ç‚¹ï¼š</strong> å…·å¤‡ <strong>å·¥å…·è°ƒç”¨ (Tool Use)</strong> èƒ½åŠ›ã€‚</li>
<li><strong>è¡¨ç°ï¼š</strong> é¢å¯¹æ¯”åˆ†æŸ¥è¯¢ï¼Œå®ƒä¼šåˆ¤æ–­â€œéœ€è¦æ£€ç´¢å®æ—¶ä¿¡æ¯â€ï¼Œéšå³è°ƒç”¨ Google Search APIï¼Œè·å–ç»“æœå¹¶æ•´åˆæˆç­”æ¡ˆã€‚å®ƒèƒ½è¯»å–å®æ—¶æ–‡æ¡£ã€æŸ¥è¯¢æ•°æ®åº“ï¼Œæ‰“ç ´äº†è®­ç»ƒæ•°æ®çš„æ—¶ç©ºé™åˆ¶ã€‚</li>
</ul>
<h4 data-id="heading-5">Level 2ï¼šç­–ç•¥å‹é—®é¢˜è§£å†³è€… (Strategic Problem-Solver)</h4>
<p>L2 å®ç°äº†ä»â€œè¢«åŠ¨æ‰§è¡Œâ€åˆ°â€œä¸»åŠ¨è§„åˆ’â€çš„è´¨å˜ã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒèƒ½åŠ›ï¼š</strong> å…·å¤‡ <strong>ä¸Šä¸‹æ–‡å·¥ç¨‹ (Context Engineering)</strong> ä¸æ¨ç†è§„åˆ’èƒ½åŠ›ã€‚å®ƒèƒ½ç®¡ç†æ³¨æ„åŠ›ç„¦ç‚¹ï¼Œå¤„ç†å¤æ‚çš„å¤šæ­¥éª¤ä»»åŠ¡ã€‚</li>
<li><strong>åœºæ™¯ï¼š</strong> â€œåœ¨å…¬å¸å’Œå®¢æˆ·åŠäº‹å¤„ä¹‹é—´æ‰¾ä¸€å®¶ 4 æ˜Ÿä»¥ä¸Šçš„å’–å•¡é¦†â€ã€‚Agent ä¼šè‡ªåŠ¨æ‹†è§£ä»»åŠ¡ï¼šè®¡ç®—åœ°ç†ä¸­ç‚¹ï¼ˆè°ƒç”¨åœ°å›¾ï¼‰-&gt; æœç´¢å‘¨è¾¹åº—é“ºï¼ˆè°ƒç”¨æœ¬åœ°æœç´¢ï¼‰-&gt; ç­›é€‰è¯„åˆ† -&gt; è¾“å‡ºå»ºè®®ã€‚</li>
</ul>
<h4 data-id="heading-6">Level 3ï¼šåä½œå¼å¤š Agent ç³»ç»Ÿ (Collaborative Multi-Agent)</h4>
<p>æ­¤æ—¶ï¼ŒAgent ä¸å†å•æ‰“ç‹¬æ–—ï¼Œè€Œæ˜¯æ¼”åŒ–ä¸ºâ€œä¸“å®¶å›¢é˜Ÿâ€ã€‚</p>
<ul>
<li><strong>ç‰¹ç‚¹ï¼š</strong> Agent å°†å…¶ä»– Agent è§†ä¸ºå·¥å…·è¿›è¡Œè°ƒåº¦ã€‚</li>
<li><strong>æ¶æ„ï¼š</strong> ç±»ä¼¼ä¼ä¸šç»„ç»‡æ¶æ„ã€‚ä¸€ä¸ªâ€œé¡¹ç›®ç»ç† Agentâ€æ¥æ”¶ä»»åŠ¡ï¼Œå°†å…¶æ‹†è§£å¹¶åˆ†å‘ç»™â€œå¸‚åœºä¸“å®¶ Agentâ€ã€â€œæ–‡æ¡ˆ Agentâ€å’Œâ€œå‰ç«¯å¼€å‘ Agentâ€ã€‚ä¾‹å¦‚æ–°å“å‘å¸ƒä»»åŠ¡ï¼Œå„å­ Agent åˆ†åˆ«è´Ÿè´£è°ƒç ”ã€æ’°ç¨¿å’Œé¡µé¢æ­å»ºï¼Œæœ€åç”±ä¸» Agent éªŒæ”¶æ•´åˆã€‚</li>
</ul>
<h4 data-id="heading-7">Level 4ï¼šè‡ªæˆ‘è¿›åŒ–ç³»ç»Ÿ (Self-Evolving System)</h4>
<p>è¿™æ˜¯ç›®å‰ Agent è¿›åŒ–çš„å·…å³°ï¼šå…·å¤‡ <strong>å…ƒè®¤çŸ¥ (Metacognition)</strong> ä¸è‡ªæˆ‘æ„å»ºèƒ½åŠ›ã€‚</p>
<ul>
<li><strong>ç‰¹ç‚¹ï¼š</strong> å½“ç°æœ‰å·¥å…·æˆ–å›¢é˜Ÿæ— æ³•æ»¡è¶³éœ€æ±‚æ—¶ï¼Œå®ƒèƒ½è‡ªä¸»æ„å»ºæ–°çš„å·¥å…·æˆ– Agentã€‚</li>
<li><strong>è¡¨ç°ï¼š</strong> é¡¹ç›®ç»ç† Agent å‘ç°ç¼ºä¹æƒ…æ„Ÿåˆ†æèƒ½åŠ›ï¼Œå®ƒä¼šè°ƒç”¨â€œAgent Creatorâ€å·¥å…·ï¼Œç°åœºç¼–å†™æç¤ºè¯ä¸é€»è¾‘ï¼Œç”Ÿæˆä¸€ä¸ªâ€œèˆ†æƒ…åˆ†æä¸“å®¶ Agentâ€ï¼Œç»è¿‡è‡ªåŠ¨åŒ–æµ‹è¯•éªŒè¯åï¼Œå°†å…¶çº³å…¥å›¢é˜ŸæŠ•å…¥ç”Ÿäº§ã€‚</li>
</ul>
<h2 data-id="heading-8">å››ã€ å¼€å‘èŒƒå¼è½¬ç§»ï¼šä»â€œæ¬ç –å·¥â€åˆ°â€œå¯¼æ¼”â€</h2>
<p>åœ¨ Agent æ—¶ä»£ï¼Œå¼€å‘è€…çš„è§’è‰²å‘ç”Ÿäº†æ ¹æœ¬æ€§è½¬å˜ã€‚è¿‡å»ï¼Œå¼€å‘è€…æ˜¯â€œæ¬ç –å·¥ï¼ˆBricklayerï¼‰â€ï¼Œéœ€è¦ç¡¬ç¼–ç æ¯ä¸€è¡Œé€»è¾‘ï¼›ç°åœ¨ï¼Œå¼€å‘è€…æ›´åƒæ˜¯ <strong>â€œå¯¼æ¼”ï¼ˆDirectorï¼‰â€</strong>ã€‚</p>
<p><strong>å¯¼æ¼”çš„æ ¸å¿ƒèŒè´£ï¼š</strong></p>
<ul>
<li><strong>è®¾å®šå‰§æœ¬ï¼š</strong> ç¼–å†™æ ¸å¿ƒç³»ç»Ÿæç¤ºè¯ï¼ˆSystem Promptï¼‰å’Œè¡Œä¸ºå®ªæ³•ã€‚</li>
<li><strong>é€‰è§’ï¼š</strong> ä¸º Agent é…ç½®æœ€åˆé€‚çš„å·¥å…·é›†ï¼ˆToolsï¼‰å’Œ API æƒé™ã€‚</li>
<li><strong>èƒŒæ™¯è®¾å®šï¼š</strong> æ³¨å…¥å¿…è¦çš„é¢†åŸŸçŸ¥è¯†åº“ï¼ˆKnowledge Baseï¼‰ã€‚ å‰©ä¸‹çš„æ¼”ç»ï¼Œå°†äº¤ç”±è¿™ä¸ªå…·å¤‡è‡ªä¸»æ€§çš„â€œæ¼”å‘˜â€å»åŠ¨æ€å®Œæˆã€‚</li>
</ul>
<h2 data-id="heading-9">äº”ã€ AgentOpsï¼šæ„å»ºå¯ä¿¡èµ–çš„æ™ºèƒ½ç³»ç»Ÿ</h2>
<p>ä¸ºäº†è®© Agent åœ¨ä¼ä¸šç¯å¢ƒä¸­ç¨³å®šè¿è¡Œï¼Œæˆ‘ä»¬éœ€è¦ä¸€å¥—ç±»ä¼¼äº DevOps çš„è¿ç»´ä½“ç³»ï¼Œç§°ä¸º <strong>AgentOps</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a92bda61c0e0478d8205d9ebc5a585ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769515740&amp;x-signature=ETOuJUPk%2F1JWjJu2%2FQJlwd%2FK1ZU%3D" alt="image-20260105171900245" loading="lazy"/></p>
<p><strong>å›¾ 3ï¼šDevOpsã€MLOps ä¸ GenAIOps çš„å…³ç³»</strong></p>
<p>ä»¥ä¸‹æ˜¯åŸºäºæ¥æºå¯¹ AgentOps æ ¸å¿ƒç»„æˆéƒ¨åˆ†çš„æ·±åº¦è§£æï¼š</p>
<ul>
<li>
<ol>
<li>ä»â€œé€šè¿‡/å¤±è´¥â€åˆ°â€œè´¨é‡è¯„ä¼°ï¼ˆLM Judgeï¼‰â€</li>
</ol>
<p>åœ¨ä¼ ç»Ÿè½¯ä»¶ä¸­ï¼Œæµ‹è¯•å¾ˆç®€å•ï¼šè¾“å‡ºè¦ä¹ˆç­‰äºé¢„æœŸï¼Œè¦ä¹ˆä¸ç­‰äºã€‚ä½†åœ¨æ™ºèƒ½ä½“é¢†åŸŸï¼Œè¯­è¨€æ˜¯å¤æ‚çš„ï¼Œç­”æ¡ˆå¾€å¾€æ²¡æœ‰å”¯ä¸€æ ‡å‡†ã€‚</p>
<p>â€¢ <strong>LM è¯„å§” (LM Judge)ï¼š</strong> å¼€å‘è€…ä¸å†ä½¿ç”¨ç®€å•çš„å•å…ƒæµ‹è¯•ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€ä¸ªåŠŸèƒ½æ›´å¼ºå¤§çš„æ¨¡å‹ï¼ˆå¦‚ Gemini 2.5 Proï¼‰ä½œä¸ºâ€œè¯„å§”â€ï¼ŒæŒ‰ç…§é¢„å®šä¹‰çš„å‡†åˆ™ï¼ˆå¦‚ï¼šäº‹å®å‡†ç¡®æ€§ã€è¯­æ°”æ˜¯å¦å¾—ä½“ã€æ˜¯å¦éµå¾ªæŒ‡ä»¤ï¼‰å¯¹æ™ºèƒ½ä½“çš„è¾“å‡ºè¿›è¡Œæ‰“åˆ†ã€‚</p>
<p>â€¢ <strong>é»„é‡‘æ•°æ®é›† (Golden Dataset)ï¼š</strong> ä¸ºäº†ç¡®ä¿è¯„ä¼°çš„è¿è´¯æ€§ï¼Œéœ€è¦æ„å»ºåŒ…å«ç†æƒ³é—®é¢˜ä¸ç­”æ¡ˆçš„â€œé»„é‡‘æ•°æ®é›†â€ï¼Œå¹¶ç”±é¢†åŸŸä¸“å®¶è¿›è¡Œå®¡æ ¸ã€‚</p>
</li>
<li>
<ol start="2">
<li>æŒ‡æ ‡é©±åŠ¨å¼€å‘ï¼ˆæŒ‡æ ‡é©±åŠ¨å¼€å‘ï¼‰</li>
</ol>
<p>AgentOps å¼ºè°ƒ<strong>è¡¡é‡çœŸæ­£é‡è¦çš„ä¸šåŠ¡æŒ‡æ ‡</strong>ï¼Œè€Œä¸ä»…ä»…æ˜¯æŠ€æœ¯æŒ‡æ ‡ã€‚</p>
<p>â€¢ <strong>KPI ä½“ç³»ï¼š</strong> è¯„ä¼°ä¸ä»…çœ‹å›å¤æ˜¯å¦æ­£ç¡®ï¼Œè¿˜çœ‹ä»»åŠ¡å®Œæˆç‡ã€ç”¨æˆ·æ»¡æ„åº¦ã€å•æ¬¡äº¤äº’æˆæœ¬ä»¥åŠå¯¹ä¸šåŠ¡ç›®æ ‡ï¼ˆå¦‚æ”¶å…¥æˆ–ç•™å­˜ç‡ï¼‰çš„å®é™…è´¡çŒ®ã€‚</p>
<p>â€¢ <strong>éƒ¨ç½²å†³ç­– (Go/No-Go)ï¼š</strong> åœ¨å‘å¸ƒæ–°ç‰ˆæœ¬å‰ï¼Œé€šè¿‡åœ¨æ•´ä¸ªè¯„ä¼°æ•°æ®é›†ä¸Šè¿è¡Œæµ‹è¯•ï¼Œå°†æ–°æ—§ç‰ˆæœ¬çš„å¾—åˆ†è¿›è¡Œç›´æ¥å¯¹æ¯”ï¼Œä»è€Œæ¶ˆé™¤çŒœæµ‹ï¼Œç¡®ä¿æ¯ä¸€æ¬¡è¿­ä»£éƒ½æ˜¯è¿›æ­¥çš„ã€‚</p>
</li>
<li>
<ol start="3">
<li>ä½¿ç”¨ OpenTelemetry è¿›è¡Œæ·±åº¦è°ƒè¯•</li>
</ol>
<p>å½“æ™ºèƒ½ä½“è¡¨ç°å¼‚å¸¸æ—¶ï¼Œå¼€å‘è€…éœ€è¦å›ç­”â€œä¸ºä»€ä¹ˆâ€ã€‚</p>
<p>â€¢ <strong>è¿½è¸ª (Traces)ï¼š</strong> AgentOps åˆ©ç”¨ OpenTelemetry æ ‡å‡†è®°å½•æ™ºèƒ½ä½“çš„**â€œæ€ç»´è½¨è¿¹ï¼ˆTrajectoryï¼‰â€**ã€‚</p>
<p>â€¢ <strong>å…¨è¿‡ç¨‹é€æ˜åŒ–ï¼š</strong> é€šè¿‡ Traceï¼Œä½ å¯ä»¥çœ‹åˆ°å‘é€ç»™æ¨¡å‹çš„ç²¾ç¡®æç¤ºè¯ã€æ¨¡å‹å†…éƒ¨çš„æ¨ç†è¿‡ç¨‹ã€å®ƒé€‰æ‹©è°ƒç”¨çš„å·¥å…·ã€ç”Ÿæˆçš„å‚æ•°ä»¥åŠè§‚å¯Ÿåˆ°çš„åŸå§‹è¿”å›æ•°æ®ã€‚è¿™è®©è°ƒè¯•ä¸å†æ˜¯å¼€â€œé»‘ç›’â€ï¼Œè€Œæ˜¯åƒæŸ¥çœ‹ä»£ç è¿è¡Œæ—¥å¿—ä¸€æ ·æ¸…æ™°ã€‚</p>
</li>
<li>
<ol start="4">
<li>é—­ç¯çš„äººç±»åé¦ˆ (Human Feedback)</li>
</ol>
<p>AgentOps å°†äººç±»åé¦ˆè§†ä¸ºæœ€å®è´µçš„èµ„æºï¼Œè€Œéå¹²æ‰°ã€‚</p>
<p>â€¢ <strong>ç–«è‹—æ•ˆåº”ï¼š</strong> å½“ç”¨æˆ·ç‚¹å‡»â€œè¸©â€æˆ–æäº¤é”™è¯¯æŠ¥å‘Šæ—¶ï¼ŒAgentOps æµç¨‹ä¼šæ•è·è¿™ä¸ªçœŸå®çš„è¾¹ç¼˜æ¡ˆä¾‹ï¼Œå°†å…¶è½¬åŒ–ä¸ºè¯„ä¼°æ•°æ®é›†ä¸­çš„ä¸€ä¸ª<strong>æ°¸ä¹…æµ‹è¯•ç”¨ä¾‹</strong>ã€‚è¿™æ ·åšä¸ä»…ä¿®å¤äº†å½“å‰çš„é”™è¯¯ï¼Œè¿˜â€œæ¥ç§äº†ç–«è‹—â€ï¼Œç¡®ä¿ç³»ç»Ÿä»¥åå†ä¹Ÿä¸ä¼šçŠ¯åŒç±»é”™è¯¯ã€‚</p>
</li>
<li>
<ol start="5">
<li>æŒç»­è¿›åŒ–çš„æ“ä½œæ¡†æ¶</li>
</ol>
<p>æ™ºèƒ½ä½“çš„å¼€å‘æ›´åƒæ˜¯åœ¨â€œå¯¼æ¼”â€ä¸€åœºæˆï¼Œè€Œä¸æ˜¯â€œæ¬ç –â€ç›–æˆ¿ã€‚</p>
<p>â€¢ <strong>æ¨¡å‹è·¯ç”±ä¸å‡çº§ï¼š</strong> AgentOps å»ºç«‹äº†ä¸€å¥—çµæ´»çš„æ¡†æ¶ï¼Œå¯ä»¥æ ¹æ®ä»»åŠ¡å¤æ‚åº¦è‡ªåŠ¨è·¯ç”±åˆ°ä¸åŒçš„æ¨¡å‹ï¼ˆå¦‚å¤æ‚çš„ä»»åŠ¡ç»™ Proï¼Œç®€å•çš„ç»™ Flashï¼‰ï¼Œå¹¶èƒ½åœ¨æ–°æ¨¡å‹å‡ºç°æ—¶å¿«é€Ÿè¿›è¡Œè¯„æµ‹å’Œæ— ç¼æ›¿æ¢ï¼Œè€Œæ— éœ€é‡æ„æ•´ä¸ªç³»ç»Ÿæ¶æ„ã€‚</p>
<p>â€¢ <strong>ç¯å¢ƒæ²»ç†ï¼š</strong> åœ¨ä¼ä¸šçº§åº”ç”¨ä¸­ï¼ŒAgentOps è¿˜è´Ÿè´£ç®¡ç†æ™ºèƒ½ä½“çš„èº«ä»½ï¼ˆAgent Identityï¼‰ã€æƒé™æ§åˆ¶ä»¥åŠé˜²æ­¢â€œæ™ºèƒ½ä½“ä¹±è±¡ï¼ˆAgent Sprawlï¼‰â€çš„ä¸­å¿ƒåŒ–æ²»ç†ã€‚</p>
</li>
<li>
<ol start="6">
<li>
<p>AgentOpså°ç»“</p>
<p><strong>ä¸ºäº†è®©ä½ æ›´ç›´è§‚åœ°ç†è§£ AgentOpsï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ªæ¯”å–»ï¼š<strong>å¦‚æœå¼€å‘</strong>ä¼ ç»Ÿè½¯ä»¶</strong>åƒæ˜¯åœ¨<strong>ç¼–å†™ä¸€ä¸ªè®¡ç®—å™¨</strong>ï¼Œä½ åªéœ€è¦é€šè¿‡ç‚¹å‡»æŒ‰é’®æµ‹è¯• <code>1+1</code> æ˜¯å¦ç­‰äº <code>2</code>ï¼›é‚£ä¹ˆ <strong>AgentOps</strong> å°±åƒæ˜¯åœ¨<strong>æ‰§æ•™ä¸€æ”¯è¶³çƒé˜Ÿ</strong>ã€‚ä½ æ— æ³•ç²¾å‡†é¢„åˆ¤çƒå‘˜åœ¨åœºä¸Šçš„æ¯ä¸€ä¸ªåŠ¨ä½œï¼Œä½†ä½ å¯ä»¥é€šè¿‡åˆ¶å®šæˆ˜æœ¯æ‰‹å†Œï¼ˆæç¤ºè¯å·¥ç¨‹ï¼‰ã€æä¾›ä¸“ä¸šè£…å¤‡ï¼ˆå·¥å…·é›†æˆï¼‰ã€å½•åƒå›æ”¾åˆ†æï¼ˆTrace è¿½è¸ªï¼‰ä»¥åŠæ ¹æ®æ¯”èµ›ç»“æœè°ƒæ•´è®­ç»ƒè®¡åˆ’ï¼ˆåé¦ˆé—­ç¯ï¼‰ï¼Œæ¥ç¡®ä¿çƒé˜Ÿæœ€ç»ˆèƒ½èµ¢å¾—æ¯”èµ›ã€‚</p>
</li>
</ol>
</li>
</ul>
<h2 data-id="heading-10">å…­ã€ L4 æœ‰å¤šå¼ºï¼Ÿå‰æ²¿æ¡ˆä¾‹ï¼šç®—æ³•è¿›åŒ–è®º</h2>
<h3 data-id="heading-11"><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeepmind.google%2Fblog%2Falphaevolve-a-gemini-powered-coding-agent-for-designing-advanced-algorithms%2F" target="_blank" title="https://deepmind.google/blog/alphaevolve-a-gemini-powered-coding-agent-for-designing-advanced-algorithms/" ref="nofollow noopener noreferrer">AlphaEvolve (ç®—æ³•è¿›åŒ– Agent)</a></h3>
<p>æ–°ç‰ˆæœ¬è¡¥å……äº†å…¶ <strong>â€œåŒè„‘åä½œâ€æœºåˆ¶</strong>ï¼ˆGemini Flash + Proï¼‰ã€<strong>â€œæ•°å­—è¾¾å°”æ–‡â€è¿›åŒ–é€»è¾‘</strong>ä»¥åŠå…·ä½“çš„<strong>é‡åŒ–æˆå°±</strong>ï¼ˆå¦‚æ‰“ç ´ 56 å¹´æ•°å­¦è®°å½•ã€èŠ‚çœ 0.7% å…¨çƒç®—åŠ›ç­‰ï¼‰ï¼Œä½¿å…¶æ›´èƒ½ä½“ç° L4 çº§ Agent çš„â€œè‡ªæˆ‘è¿›åŒ–â€ä¸â€œç§‘å­¦å‘ç°â€èƒ½åŠ›ã€‚</p>
<p>è¿™æ˜¯ L4 çº§â€œè‡ªæˆ‘è¿›åŒ–â€èƒ½åŠ›çš„å·…å³°ä½“ç°ã€‚AlphaEvolve ä¸ä»…ä»…æ˜¯å†™ä»£ç ï¼Œå®ƒæ˜¯åœ¨è¿›è¡Œ<strong>è‡ªä¸»ç§‘å­¦å‘ç°ï¼ˆAgentic Discoveryï¼‰</strong>ã€‚å®ƒå°†å¤§æ¨¡å‹çš„åˆ›é€ åŠ›ä¸è¿›åŒ–ç®—æ³•çš„ç­›é€‰æœºåˆ¶ç›¸ç»“åˆï¼Œè§£å†³è¿äººç±»ä¸“å®¶éƒ½æŸæ‰‹æ— ç­–çš„ç®—æ³•éš¾é¢˜ã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒæœºåˆ¶ï¼šåŒè„‘é©±åŠ¨çš„â€œæ•°å­—è¾¾å°”æ–‡ä¸»ä¹‰â€</strong> AlphaEvolve çš„å·¥ä½œæ–¹å¼æ¨¡ä»¿äº†ç”Ÿç‰©è¿›åŒ–è®ºï¼Œç”±ä¸¤æ¬¾ä¸åŒç‰¹æ€§çš„ Gemini æ¨¡å‹ååŒé©±åŠ¨ï¼š
<ul>
<li><strong>å‘æ•£ï¼ˆVariationï¼‰ï¼š</strong> ä½¿ç”¨é€Ÿåº¦æå¿«çš„ <strong>Gemini Flash</strong> ä½œä¸ºâ€œå˜å¼‚å¼•æ“â€ï¼Œå¿«é€Ÿç”Ÿæˆå¤§é‡ä»£ç å˜ä½“ï¼Œæ¢ç´¢å¹¿æ³›çš„å¯èƒ½æ€§ç©ºé—´ã€‚</li>
<li><strong>æ·±æ€ï¼ˆRefinementï¼‰ï¼š</strong> ä½¿ç”¨æ¨ç†èƒ½åŠ›æ›´å¼ºçš„ <strong>Gemini Pro</strong> ä½œä¸ºâ€œä¼˜åŒ–å¼•æ“â€ï¼Œå¯¹æœ‰æ½œåŠ›çš„æ–¹æ¡ˆè¿›è¡Œæ·±åº¦ä¿®æ”¹å’Œé€»è¾‘å®Œå–„ã€‚</li>
<li><strong>è‡ªç„¶é€‰æ‹©ï¼ˆSelectionï¼‰ï¼š</strong> æ‰€æœ‰ç”Ÿæˆçš„ç®—æ³•éƒ½ä¼šè¢«æŠ•å…¥ä¸€ä¸ªä¸¥è‹›çš„è‡ªåŠ¨åŒ–è¯„ä¼°ç¯å¢ƒï¼ˆEvaluatorï¼‰ï¼Œåªæœ‰è¡¨ç°è¶…è¶Šä¸Šä¸€ä»£çš„ä»£ç æ‰èƒ½â€œå­˜æ´»â€ä¸‹æ¥ï¼Œæˆä¸ºä¸‹ä¸€ä»£è¿›åŒ–çš„çˆ¶æœ¬ã€‚</li>
</ul>
</li>
<li><strong>éœ‡æ’¼ä¸šç•Œçš„æˆå°±ï¼š</strong>
<ul>
<li><strong>æ‰“ç ´ 56 å¹´æ•°å­¦è®°å½•ï¼š</strong> åœ¨çŸ©é˜µä¹˜æ³•é¢†åŸŸï¼Œå®ƒè‡ªä¸»å‘ç°äº†ä¸€ç§é’ˆå¯¹ 4x4 çŸ©é˜µçš„æ–°ç®—æ³•ï¼Œä»…éœ€ 48 æ¬¡ä¹˜æ³•è¿ç®—ï¼ˆæ­¤å‰äººç±»ä¿æŒäº† 56 å¹´çš„è®°å½•æ˜¯ 49 æ¬¡ï¼‰ï¼Œç›´æ¥æ”¹å†™äº†åŸºç¡€æ•°å­¦æ•™ç§‘ä¹¦ã€‚</li>
<li><strong>ä¼˜åŒ–å…¨çƒåŸºç¡€è®¾æ–½ï¼š</strong> å®ƒé‡å†™äº† Google æ•°æ®ä¸­å¿ƒï¼ˆBorgï¼‰çš„ä»»åŠ¡è°ƒåº¦ç®—æ³•ã€‚è¿™ä¸ªç”± AI å‘æ˜çš„ç®€çŸ­å¯å‘å¼ç®—æ³•ï¼Œä¸º Google <strong>èŠ‚çœäº† 0.7% çš„å…¨çƒè®¡ç®—èµ„æº</strong>â€”â€”åœ¨å¤§è§„æ¨¡ç®—åŠ›æ—¶ä»£ï¼Œè¿™ç¬”èŠ‚çœæ˜¯å¤©æ–‡æ•°å­—ã€‚</li>
<li><strong>åå“º AI è‡ªèº«ï¼š</strong> å®ƒç”šè‡³ä¼˜åŒ–äº† TPU èŠ¯ç‰‡çš„åº•å±‚ Verilog ç”µè·¯è®¾è®¡ï¼Œå¹¶å°† Transformer æ¨¡å‹ä¸­çš„ FlashAttention å†…æ ¸é€Ÿåº¦æå‡äº† <strong>32.5%</strong>ï¼Œä»è€Œè®©ä¸‹ä¸€ä»£ AI çš„è®­ç»ƒé€Ÿåº¦æ›´å¿«ã€‚</li>
</ul>
</li>
</ul>
<p><strong>æœ¬è´¨åŒºåˆ«ï¼š</strong> ä¼ ç»Ÿçš„ Copilot æ˜¯å¸®ä½ å†™å‡º<strong>å·²çŸ¥</strong>çš„ç®—æ³•ï¼Œè€Œ AlphaEvolve æ˜¯å¸®ä½ å‘ç°<strong>æœªçŸ¥</strong>çš„ç®—æ³•ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/467042423c1f42e5a972d7a745e24260~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769515740&amp;x-signature=PYyHXsYKfVNsgwKel1o0kk74LbQ%3D" alt="unnamed" loading="lazy"/></p>
<p><strong>AlphaEvolve è¿›åŒ–15 æ¬¡çªå˜</strong></p>
<p>AlphaEvolve ä¸ºå‘ç°æ›´å¿«çŸ©é˜µä¹˜æ³•ç®—æ³•æå‡ºçš„å˜æ›´åˆ—è¡¨ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼ŒAlphaEvolve æå‡ºäº†å¯¹å¤šä¸ªç»„ä»¶è¿›è¡Œå¤§è§„æ¨¡å˜æ›´ï¼ŒåŒ…æ‹¬ä¼˜åŒ–å™¨å’Œæƒé‡åˆå§‹åŒ–ã€æŸå¤±å‡½æ•°ä»¥åŠè¶…å‚æ•°æ‰«æã€‚è¿™äº›å˜åŒ–éå¸¸ä¸ç®€å•ï¼Œè¿›åŒ–è¿‡ç¨‹ä¸­éœ€è¦ 15 æ¬¡çªå˜ã€‚</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9fadc6c28b01401aaaf4efe6e0f8e200~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769515740&amp;x-signature=gEzFxG%2FyUAAKISahAjCFCv5in3I%3D" alt="image-20260105175145749" loading="lazy"/>
<h2 data-id="heading-12">ä¸ƒã€ æ€»ç»“ï¼šä½ çš„æ–°é˜Ÿå‘˜å·²å°±ä½</h2>
<p>Agentä¸å†åªæ˜¯è½¯ä»¶ï¼Œå®ƒä»¬æ­£åœ¨æˆä¸ºæˆ‘ä»¬å›¢é˜Ÿä¸­**â€œçµæ´»ã€åšå­¦ä¸”ä¸çŸ¥ç–²å€¦çš„æ–°æˆå‘˜â€**ã€‚</p>
<p>é€šè¿‡ Google çš„è¿™å¥—åˆ†çº§ä½“ç³»ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ° AI æ˜¯å¦‚ä½•ä¸€æ­¥æ­¥ä»â€œä¹¦å‘†å­â€å˜æˆâ€œå…¨èƒ½ç®¡å®¶â€çš„ã€‚æœªæ¥çš„æˆåŠŸä¸åœ¨äºä½ å†™äº†å¤šé•¿çš„ Promptï¼Œè€Œåœ¨äºä½ å¦‚ä½•æ„å»ºè¿™ä¸€å¥—ä¸¥è°¨çš„æ¶æ„ã€‚</p>
<p><strong>æœ€åé€å¤§å®¶ä¸€ä¸ªæ¯”å–»ï¼š</strong> å¦‚æœä¼ ç»Ÿçš„è½¯ä»¶æ˜¯ä¸€ä¸ª<strong>å¿…é¡»æŒ‰è½¨é“è¡Œé©¶çš„ç«è½¦</strong>ï¼Œé‚£ä¹ˆæ™ºèƒ½ä½“å°±åƒæ˜¯<strong>ä¸€è¾†é…å¤‡äº†é¡¶çº§å¯¼èˆªå‘˜çš„è‡ªåŠ¨é©¾é©¶èµ›è½¦</strong>ã€‚ä½ åªéœ€è¦å‘Šè¯‰å®ƒç»ˆç‚¹åœ¨å“ªé‡Œï¼ˆä½¿å‘½ï¼‰ï¼Œå®ƒä¼šè‡ªå·±è§‚å¯Ÿå¤©æ°”ï¼ˆæ‰«æç¯å¢ƒï¼‰ã€è§„åˆ’æœ€ä½³è·¯çº¿ï¼ˆæ·±åº¦æ€è€ƒï¼‰ã€æ§åˆ¶æ²¹é—¨è½¬å‘ï¼ˆé‡‡å–è¡ŒåŠ¨ï¼‰ï¼Œå¹¶åœ¨é‡åˆ°å°è·¯æˆ–æ„å¤–æ—¶ï¼Œçµæ´»åœ°ç»•è¡Œæˆ–è°ƒæ•´æ–¹æ¡ˆï¼ˆè§‚å¯Ÿè¿­ä»£ï¼‰ï¼Œç›´åˆ°æŠŠä½ å®‰å…¨é€åˆ°ç›®çš„åœ°ã€‚</p>
<h2 data-id="heading-13">å¼•ç”¨</h2>
<ol>
<li>Julia Wiesinger, Patrick Marlow, et al. 2024 â€œAgentsâ€.</li>
</ol>
<p>Available at: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.kaggle.com%2Fwhitepaper-agents" target="_blank" title="https://www.kaggle.com/whitepaper-agents" ref="nofollow noopener noreferrer">www.kaggle.com/whitepaper-â€¦</a>.</p>
<ol start="2">
<li>Antonio Gulli, Lavi Nigam, et al. 2025 â€œAgents Companionâ€.</li>
</ol>
<p>Available at: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.kaggle.com%2Fwhitepaper-agent-companion" target="_blank" title="https://www.kaggle.com/whitepaper-agent-companion" ref="nofollow noopener noreferrer">www.kaggle.com/whitepaper-â€¦</a>.</p>
<ol start="3">
<li>Shunyu Yao, Y. et al., 2022, 'ReAct: Synergizing Reasoning and Acting in Language Models'.</li>
</ol>
<p>Available at: <a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2210.03629" target="_blank" title="https://arxiv.org/abs/2210.03629" ref="nofollow noopener noreferrer">arxiv.org/abs/2210.03â€¦</a>.</p>
<ol start="4">
<li>Wei, J., Wang, X. et al., 2023, 'Chain-of-Thought Prompting Elicits Reasoning in Large Language Models'.</li>
</ol>
<p>Available at: <a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fpdf%2F2201.11903.pdf" target="_blank" title="https://arxiv.org/pdf/2201.11903.pdf" ref="nofollow noopener noreferrer">arxiv.org/pdf/2201.11â€¦</a>.</p>
<ol start="5">
<li>Shunyu Yao, Y. et al., 2022, 'ReAct: Synergizing Reasoning and Acting in Language Models'.</li>
</ol>
<p>Available at: <a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2210.03629" target="_blank" title="https://arxiv.org/abs/2210.03629" ref="nofollow noopener noreferrer">arxiv.org/abs/2210.03â€¦</a>.</p>
<ol start="6">
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.amazon.com%2FAgentic-Design-Patterns-Hands-Intelligent%2Fdp%2F3032014018" target="_blank" title="https://www.amazon.com/Agentic-Design-Patterns-Hands-Intelligent/dp/3032014018" ref="nofollow noopener noreferrer">www.amazon.com/Agentic-Desâ€¦</a></p>
</li>
<li>
<p>Shunyu Yao, et. al., 2024, â€˜Ï„-bench: A Benchmark for Tool-Agent-User Interaction in Real-World Domainsâ€™,</p>
</li>
</ol>
<p>Available at: <a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2406.12045" target="_blank" title="https://arxiv.org/abs/2406.12045" ref="nofollow noopener noreferrer">arxiv.org/abs/2406.12â€¦</a>.</p>
<ol start="8">
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fartificialanalysis.ai%2Fguide" target="_blank" title="https://artificialanalysis.ai/guide" ref="nofollow noopener noreferrer">artificialanalysis.ai/guide</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.google.com%2Fvertex-ai%2Fgenerative-ai%2Fdocs%2Fmodel-reference%2Fvertex-ai-model-optimizer" target="_blank" title="https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/vertex-ai-model-optimizer" ref="nofollow noopener noreferrer">cloud.google.com/vertex-ai/gâ€¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgemini.google%2Foverview%2Fgemini-live%2F" target="_blank" title="https://gemini.google/overview/gemini-live/" ref="nofollow noopener noreferrer">gemini.google/overview/geâ€¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.google.com%2Fvision%3Fe%3D48754805%26hl%3Den" target="_blank" title="https://cloud.google.com/vision?e=48754805&amp;hl=en" ref="nofollow noopener noreferrer">cloud.google.com/vision?e=48â€¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.google.com%2Fspeech-to-text%3Fe%3D48754805%26hl%3Den" target="_blank" title="https://cloud.google.com/speech-to-text?e=48754805&amp;hl=en" ref="nofollow noopener noreferrer">cloud.google.com/speech-to-tâ€¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmedium.com%2Fgoogle-cloud%2Fgenaiops-operationalize-generative-ai-apractical-guide-d5bedaa59d78" target="_blank" title="https://medium.com/google-cloud/genaiops-operationalize-generative-ai-apractical-guide-d5bedaa59d78" ref="nofollow noopener noreferrer">medium.com/google-clouâ€¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.google.com%2Fvertex-ai%2Fgenerative-ai%2Fdocs%2Fagent-engine%2Fcode-execution%2Foverview" target="_blank" title="https://cloud.google.com/vertex-ai/generative-ai/docs/agent-engine/code-execution/overview" ref="nofollow noopener noreferrer">cloud.google.com/vertex-ai/gâ€¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fai.google.dev%2Fgemini-api%2Fdocs%2Ffunction-calling" target="_blank" title="https://ai.google.dev/gemini-api/docs/function-calling" ref="nofollow noopener noreferrer">ai.google.dev/gemini-api/â€¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmodelcontextprotocol%2F" target="_blank" title="https://github.com/modelcontextprotocol/" ref="nofollow noopener noreferrer">github.com/modelcontexâ€¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fai.google.dev%2Fgemini-api%2Fdocs%2Fgoogle-search" target="_blank" title="https://ai.google.dev/gemini-api/docs/google-search" ref="nofollow noopener noreferrer">ai.google.dev/gemini-api/â€¦</a></p>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>