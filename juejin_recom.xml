<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[å¥¹é—®æˆ‘ï¼šæ•°æ®åº“è¿˜åœ¨å­˜ Timestampï¼Ÿæˆ‘è¯´ï¼šå¤§äººï¼Œæ—¶ä»£å˜äº†]]></title>    <link>https://juejin.cn/post/7592276497400381490</link>    <guid>https://juejin.cn/post/7592276497400381490</guid>    <pubDate>2026-01-07T08:55:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592276497400381490" data-draft-id="7592340733954195506" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¥¹é—®æˆ‘ï¼šæ•°æ®åº“è¿˜åœ¨å­˜ Timestampï¼Ÿæˆ‘è¯´ï¼šå¤§äººï¼Œæ—¶ä»£å˜äº†"/> <meta itemprop="keywords" content="æ•°æ®åº“,åç«¯,MySQL"/> <meta itemprop="datePublished" content="2026-01-07T08:55:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ´›å°è±†"/> <meta itemprop="url" content="https://juejin.cn/user/2049145406229127"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¥¹é—®æˆ‘ï¼šæ•°æ®åº“è¿˜åœ¨å­˜ Timestampï¼Ÿæˆ‘è¯´ï¼šå¤§äººï¼Œæ—¶ä»£å˜äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2049145406229127/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ´›å°è±†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T08:55:33.000Z" title="Wed Jan 07 2026 08:55:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    25
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.7;font-weight:400;font-size:16px;overflow-x:hidden;color:#212122}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:8px;padding-bottom:8px}.markdown-body h1{color:#a0a0a0;font-size:38px;margin-top:32px;padding-top:32px}.markdown-body h2{color:#fff;background-color:#212122;width:fit-content;border-bottom-right-radius:100px;margin-top:47px;margin-bottom:16px;padding:4px 48px 4px 8px;line-height:1.7;font-size:30px;transition:all .3s ease-out}.markdown-body h2:hover{border-bottom-right-radius:50px;transition:all .3s ease-out}.markdown-body h3{font-size:24px;padding-left:8px;margin-top:32px;border-bottom:2px solid #c6c4c4;line-height:1.7}.markdown-body h4{font-size:20px;padding-left:8px;margin-top:32px;border-bottom:1px solid #ddd}.markdown-body h5{font-size:16px;margin-top:24px}.markdown-body h6{margin-top:16px;line-height:1.1}.markdown-body p{font-size:16px;text-align:start;white-space:normal;text-size-adjust:auto;line-height:2;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%;margin:auto;padding-left:8px;padding-right:8px}.markdown-body hr{border:none;border-top:4px double #212122;margin-top:32px;margin-bottom:32px;text-align:center}.markdown-body hr:after{content:"â™¥";display:inline-block;position:relative;top:-15px;padding:0 10px;color:#212122;font-size:18px}.markdown-body code{word-break:break-word;overflow-x:auto;background-color:#f1f1f1;color:#ef7060;font-size:14px;padding:.065em 6px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.7;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);margin:32px 16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-color:#212122;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);background-size:40px}.markdown-body pre&gt;code{font-size:14px;padding:16px 8px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#fff;background:#272822}.markdown-body pre&gt;code::-webkit-scrollbar{height:10px;background-color:#f5f5f5}.markdown-body pre&gt;code::-webkit-scrollbar-track{box-shadow:inset 0 0 6px rgba(0,0,0,.3);border-radius:3px;background-color:#f5f5f5}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{border-radius:3px;box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:#555}.markdown-body a{color:#ef7060;padding:2px;text-decoration:none;border-bottom:.125em solid #ef7060;border-radius:2px;box-shadow:inset 0 -.025em 0 #ef7060;transition:box-shadow .27s cubic-bezier(.77,0,.175,1),color .27s cubic-bezier(.77,0,.175,1)}.markdown-body a:focus,.markdown-body a:hover{outline:none;box-shadow:inset 0 -1.5em 0 #ef7060;color:#fff}.markdown-body a:before{content:"â‡² ";vertical-align:top;margin-left:2px;font-family:dart!important;font-size:12px;color:inherit;opacity:.7}.markdown-body table{background:#fbfbfb;border-radius:4px;border-collapse:collapse;margin:auto;padding:5px;width:95%;box-shadow:0 5px 10px rgba(0,0,0,.1);animation:float 5s infinite}.markdown-body table th{color:#fff;background:#212122;border-bottom:1px solid #9ea7af;border-right:1px solid #343a45;font-size:18px;padding:16px;text-align:left;vertical-align:middle}.markdown-body table th:first-child{border-top-left-radius:4px}.markdown-body table th:last-child{border-top-right-radius:4px;border-right:none}.markdown-body table tr{border-top:1px solid #c1c3d1;border-bottom:1px solid #c1c3d1;color:#666b85}.markdown-body table tr:hover td{background:#212122;color:#fff;border-top:1px solid #22262e}.markdown-body table tr:first-child{border-top:none}.markdown-body table tr:last-child{border-bottom:none}.markdown-body table tr:nth-child(odd) td{background:#f1f1f1}.markdown-body table tr:nth-child(odd):hover td{background:#212122}.markdown-body table tr:last-child td:first-child{border-bottom-left-radius:4px}.markdown-body table tr:last-child td:last-child{border-bottom-right-radius:4px}.markdown-body table td{background:#fbfbfb;padding:16px;text-align:left;vertical-align:middle;font-size:16px;border-right:1px solid #c1c3d1}.markdown-body table td:last-child{border-right:0}.markdown-body blockquote{color:#777;padding:1px 16px;margin:24px 0;border-left:4px solid #c6c4c4;background-color:#f1f1f1;transition:all .3s ease-out;border-radius:4px}.markdown-body blockquote:hover{border-left-color:#212122;background-color:#212122;color:#fff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:24px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body span.math{margin-left:32px;font-size:18px;font-weight:700}@media (max-width:720px){.markdown-body h1{font-size:30.4px}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:19.2px}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:12.8px}}</style><style data-highlight="" data-highlight-key="an-old-hope">.hljs-comment,.hljs-quote{color:#b6b18b}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#eb3c54}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#e7ce56}.hljs-attribute{color:#ee7c2b}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#4fb4d7}.hljs-section,.hljs-title{color:#78bb65}.hljs-keyword,.hljs-selector-tag{color:#b45ea4}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1d21;color:#c0c5ce}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ·±å¤œä»£ç ç³»åˆ— Â· ç¬¬6æœŸ</p>
<p>å…³æ³¨æˆ‘ï¼Œå’Œå°è±†ä¸€èµ·åœ¨æ˜é‡‘åˆ·å°è¯´</p>
</blockquote>
<h2 data-id="heading-0">ğŸ”¥ å¼€ç¯‡å¼•çˆ†</h2>
<p>å‘¨å››æ·±å¤œï¼ŒåŠå…¬å®¤é‡Œçš„ä¸­å¤®ç©ºè°ƒæ—©å°±åœäº†ï¼Œåªå‰©ä¸‹å‡ å°æ˜¾ç¤ºå™¨å‘å‡ºçš„å¾®å¼±å—¡é¸£å£°ï¼Œæ··æ‚ç€ç¡¬ç›˜è¯»å†™æ—¶å¶å°”ä¼ æ¥çš„å’”å“’å£°ã€‚çª—å¤–ä¸‹ç€é›¨ï¼Œé›¨æ»´ç ¸åœ¨ç©ºè°ƒå¤–æœºä¸Šå‘å‡ºé—·é—·çš„å•ªå—’å£°ï¼Œåƒæ˜¯æœ‰äººåœ¨æ•²æ‰“ç€é“çš®ï¼Œå‚¬ä¿ƒç€è¿™æ ‹æ¥¼é‡Œæœ€åå‡ ä¸ªä¸è‚¯ç¦»å¼€çš„äººã€‚</p>
<p>ç©ºæ°”é‡Œé£˜ç€é€Ÿæº¶å’–å•¡çš„è‹¦å‘³ï¼Œè¿˜æœ‰ä»æ¥¼ä¸‹ä¾¿åˆ©åº—å¸¦ä¸Šæ¥çš„å…³ä¸œç…®æ±¤æ±è’¸å‘åç•™ä¸‹çš„å‘³é“ã€‚æˆ‘çš„æ‰‹æŒè´´åœ¨é”®ç›˜ä¸Šï¼Œèƒ½æ„Ÿè§‰åˆ°é”®å¸½å› ä¸ºé•¿æ—¶é—´æ•²å‡»è€Œå˜å¾—æ¸©çƒ­ï¼ŒæŒ‡å°–æœ‰äº›å‘éº»ã€‚</p>
<p>"è±†å­â€¦â€¦"</p>
<p>å°æ±çš„å£°éŸ³ä»æˆ‘å·¦åæ–¹ä¼ æ¥ï¼Œè½»å¾—åƒæ˜¯æ€•æƒŠæ‰°äº†è¿™æ·±å¤œçš„å¯‚é™ã€‚æˆ‘å›è¿‡å¤´ï¼Œå¥¹æ­£ä¾§ååœ¨æ¤…å­ä¸Šï¼Œä¸€åªæ‰‹æ’‘ç€ä¸‹å·´ï¼Œå¦ä¸€åªæ‰‹æ— åŠ›åœ°æ­åœ¨é¼ æ ‡ä¸Šã€‚åŠå…¬å®¤æ˜é»„çš„å£ç¯å…‰ä»ä¾§é¢æ‰“è¿‡æ¥ï¼Œåœ¨å¥¹è„¸é¢Šä¸Šç•™ä¸‹ä¸€é“æµ…æµ…çš„é˜´å½±ï¼Œè®©å¥¹çœ‹èµ·æ¥æ¯”å¹³æ—¶æ›´ç–²æƒ«ã€‚</p>
<p>å¥¹çš„å¤´å‘æ¾æ¾åœ°æ‰ç€ï¼Œæœ‰å‡ ç¼•å·²ç»ä»å‘åœˆé‡Œæ»‘äº†å‡ºæ¥ï¼Œå‚åœ¨è€³è¾¹ã€‚å¥¹çœ¨äº†çœ¨çœ¼ï¼Œç«æ¯›åœ¨ç¯å…‰ä¸‹æŠ•ä¸‹ç»†å°çš„å½±å­ã€‚</p>
<p>"ä½ èƒ½è¿‡æ¥çœ‹çœ‹å—ï¼Ÿ"å¥¹çš„å£°éŸ³é‡Œå¸¦ç€ä¸€ä¸çŠ¹è±«ï¼Œåƒæ˜¯ä¸ç¡®å®šè¯¥ä¸è¯¥åœ¨è¿™ä¸ªç‚¹æ‰“æ‰°æˆ‘ï¼Œ"æˆ‘è¿™ä¸ªæ—¶é—´è½´ç»„ä»¶ï¼Œæ’åºæ€ä¹ˆéƒ½ä¸å¯¹ã€‚"</p>
<p>æˆ‘æ»‘ç€æ¤…å­è¿‡å»ï¼Œå¿ƒé‡Œéšéšæœ‰ç§ä¸å¥½çš„é¢„æ„Ÿâ€”â€”æ¯æ¬¡å¥¹ç”¨è¿™ç§è¯­æ°”å«æˆ‘ï¼Œé€šå¸¸æ„å‘³ç€é—®é¢˜ä¸ç®€å•ã€‚</p>
<p>å¥¹æŠŠå±å¹•è½¬å‘æˆ‘ï¼ŒæŒ‡ç€é‚£ä¸ªå¯†å¯†éº»éº»çš„æ“ä½œè®°å½•åˆ—è¡¨ï¼š"ä½ çœ‹ï¼Œè¿™å‡ æ¡æ˜æ˜æ˜¯æˆ‘è¿ç»­ç‚¹çš„ï¼Œæ—¶é—´åº”è¯¥æ˜¯æœ‰å…ˆåé¡ºåºçš„ã€‚ä½†å®ƒä»¬åœ¨åˆ—è¡¨é‡Œçš„ä½ç½®å®Œå…¨ä¹±äº†ï¼Œæœ‰æ—¶å€™åç‚¹çš„åè€Œæ’åœ¨å‰é¢ã€‚"</p>
<p>æˆ‘å‡‘è¿‘çœ‹äº†çœ‹ï¼Œç¡®å®ï¼Œé‚£å‡ æ¡ç”¨æˆ·æ“ä½œè®°å½•çš„æ—¶é—´æˆ³çœ‹èµ·æ¥éƒ½ä¸€æ ·ï¼Œå…¨æ˜¯æ•´ç§’ã€‚</p>
<p>"ä½ ä¼ ç»™æˆ‘çš„æ—¶é—´æˆ³æ˜¯ 10 ä½çš„ï¼Œ"å¥¹è½»å¹äº†å£æ°”ï¼Œç”¨é¼ æ ‡åœ¨æ§åˆ¶å°é‡Œåˆ’äº†ä¸€ä¸‹ï¼Œ"ä½†æˆ‘å‰ç«¯ç”¨çš„æ˜¯ 13 ä½æ¯«ç§’æ—¶é—´æˆ³ã€‚<code>Date.now()</code> è¿”å›çš„å°±æ˜¯ 13 ä½ã€‚ä½ ç»™æˆ‘ 10 ä½ï¼Œæˆ‘åªèƒ½è‡ªå·±ä¹˜ä»¥ 1000 è¡¥æˆ 13 ä½ï¼Œä½†è¿™æ ·æ¯«ç§’ä½æ°¸è¿œæ˜¯ <code>000</code>ï¼ŒåŒä¸€ç§’å†…çš„æ“ä½œæ ¹æœ¬æ’ä¸äº†åºã€‚"</p>
<h2 data-id="heading-1">ğŸ¯ åœºæ™¯è¿˜åŸ</h2>
<p>æˆ‘æ‰“å¼€åç«¯çš„è¿”å›æ•°æ®ï¼Œå¿ƒé‡Œå·²ç»çŒœåˆ°é—®é¢˜å‡ºåœ¨å“ªäº†ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1024</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"user_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">88</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"action"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"click_button"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1704723600</span>  <span class="hljs-comment">// 10 ä½ç§’çº§æ—¶é—´æˆ³</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>"è¿™ä¸ªâ€¦â€¦"æˆ‘æœ‰äº›å°´å°¬åœ°æŒ äº†æŒ å¤´ï¼Œ"æˆ‘åç«¯å­˜çš„æ˜¯ MySQL çš„ <code>TIMESTAMP</code> ç±»å‹ï¼Œå®ƒåªèƒ½ç²¾ç¡®åˆ°ç§’ã€‚æ‰€ä»¥è¿”å›çš„æ—¶é—´æˆ³å°±æ˜¯ 10 ä½çš„ã€‚"</p>
<p>å°æ±æŠ¬èµ·å¤´çœ‹ç€æˆ‘ï¼Œçœ¼ç¥é‡Œå†™æ»¡äº†ä¸è§£ï¼š"è±†å­ï¼Œç°åœ¨æ˜¯ 2025 å¹´äº†ï¼Œå‰ç«¯æ—©å°±å…¨é¢ç”¨ 13 ä½æ¯«ç§’æ—¶é—´æˆ³äº†ã€‚ä½ çœ‹è¿™ä¸ªâ€¦â€¦"</p>
<p>å¥¹æ‰“å¼€å¥¹çš„ä»£ç ï¼ŒæŒ‡ç»™æˆ‘çœ‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‰ç«¯åˆ›å»ºæ—¶é—´æˆ³çš„æ ‡å‡†åšæ³•</span>
<span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(now); <span class="hljs-comment">// è¾“å‡ºï¼š1704723600123ï¼ˆ13 ä½ï¼‰</span>

<span class="hljs-comment">// ä½†åç«¯è¿”å›çš„æ˜¯è¿™ä¸ª</span>
<span class="hljs-keyword">const</span> serverTime = <span class="hljs-number">1704723600</span>; <span class="hljs-comment">// 10 ä½</span>
<span class="hljs-keyword">const</span> timestamp = serverTime * <span class="hljs-number">1000</span>; <span class="hljs-comment">// åªèƒ½ç¡¬è¡¥æˆ 1704723600000</span>
<span class="hljs-comment">// é—®é¢˜ï¼šåŒä¸€ç§’å†…çš„æ‰€æœ‰æ“ä½œï¼Œæ¯«ç§’ä½éƒ½æ˜¯ 000ï¼Œæ— æ³•åŒºåˆ†å…ˆå</span>
</code></pre>
<p>"æˆ‘åšçš„æ˜¯ç”¨æˆ·è¡Œä¸ºåˆ†æï¼Œ"å¥¹çš„å£°éŸ³å¾ˆè½»ï¼Œä½†æˆ‘èƒ½å¬å‡ºé‚£ç§æ— å¥ˆï¼Œ"äº§å“è¦æ±‚èƒ½ç²¾ç¡®å›æ”¾ç”¨æˆ·åœ¨é¡µé¢ä¸Šçš„æ¯ä¸€ä¸ªæ“ä½œã€‚å¦‚æœåŒä¸€ç§’å†…ç”¨æˆ·ç‚¹äº†ä¸‰ä¸ªæŒ‰é’®ã€è¾“å…¥äº†ä¸¤æ®µæ–‡å­—ï¼Œæˆ‘éœ€è¦çŸ¥é“å…·ä½“çš„é¡ºåºã€‚ä½†ä½ çš„ç²¾åº¦åªåˆ°ç§’ï¼Œè¿™äº›ç»†èŠ‚å…¨ä¸¢äº†ã€‚"</p>
<p>æˆ‘çœ‹ç€æ•°æ®åº“è¡¨ç»“æ„ï¼Œè¿™æ˜¯é¡¹ç›®å¯åŠ¨æ—¶æˆ‘"é¡ºæ‰‹"å»ºçš„ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `user_actions` (
  `id` <span class="hljs-type">bigint</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,
  `user_id` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  `action` <span class="hljs-type">varchar</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  `created_at` <span class="hljs-type">timestamp</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`)
) ENGINE<span class="hljs-operator">=</span>InnoDB;
</code></pre>
<p>"æˆ‘å½“æ—¶é€‰ <code>TIMESTAMP</code> æ˜¯å› ä¸ºå®ƒåªå  4 ä¸ªå­—èŠ‚ï¼Œ"æˆ‘è¯•å›¾è§£é‡Šï¼Œä½†å£°éŸ³è¶Šæ¥è¶Šæ²¡åº•æ°”ï¼Œ"è€Œä¸”å®ƒä¼šè‡ªåŠ¨å¤„ç†æ—¶åŒºâ€¦â€¦"</p>
<p>å°æ±æ‘‡äº†æ‘‡å¤´ï¼Œå¥¹çš„æ‰‹æŒ‡åœ¨æ¡Œé¢ä¸Šè½»è½»æ•²äº†ä¸¤ä¸‹ï¼š"è±†å­ï¼Œä½ çŸ¥é“ <code>TIMESTAMP</code> æœ€å¤šèƒ½å­˜åˆ°å“ªä¸€å¹´å—ï¼Ÿ"</p>
<p>æˆ‘æ„£äº†ä¸€ä¸‹ã€‚</p>
<p>"2038 å¹´ã€‚"å¥¹çœ‹ç€æˆ‘çš„çœ¼ç›è¯´ï¼Œ"å¦‚æœè¿™ä¸ªç³»ç»Ÿæ´»è¿‡ 2038 å¹´ï¼Œä½ è¿™ä¸ªå­—æ®µå°±ä¼šç‚¸ã€‚"</p>
<p>é‚£ä¸€åˆ»ï¼Œæˆ‘çªç„¶æ„è¯†åˆ°è‡ªå·±å½“åˆçš„"é¡ºæ‰‹"å†³å®šï¼Œå¯èƒ½åŸ‹ä¸‹äº†ä¸€ä¸ªå®šæ—¶ç‚¸å¼¹ã€‚</p>
<h2 data-id="heading-2">ğŸ§  æ€è·¯åˆ†æ</h2>
<p>"è¿˜åœ¨ç”¨ <code>TIMESTAMP</code> å­˜æ—¶é—´ï¼Ÿ"</p>
<p>ä¸€ä¸ªå¹³é™çš„å£°éŸ³ä»èŒ¶æ°´é—´æ–¹å‘ä¼ æ¥ã€‚æ˜¯é˜¿è¾°ã€‚</p>
<p>ä»–ç«¯ç€ä¿æ¸©æ¯èµ°è¿‡æ¥ï¼Œèº«ä¸Šè¿˜æŠ«ç€é‚£ä»¶å¸¸å¹´ä¸ç¦»èº«çš„ç°è‰²å†²é”‹è¡£ã€‚çœ¼é•œåœ¨ç¯å…‰ä¸‹åç€å…‰ï¼Œè®©äººçœ‹ä¸æ¸…ä»–çš„çœ¼ç¥ï¼Œä½†ä»ä»–å˜´è§’é‚£ä¸€ä¸è‹¥æœ‰è‹¥æ— çš„ç¬‘æ„ï¼Œæˆ‘çŸ¥é“ä»–è‚¯å®šåˆè¦è®²å¤§é“ç†äº†ã€‚</p>
<p>"è¾°å“¥ï¼Œä½ è¿˜æ²¡èµ°ï¼Ÿ"å°æ±æœ‰äº›æƒŠè®¶ã€‚</p>
<p>"åˆšä¿®å®Œä¸€ä¸ªæ—¶åŒº Bugï¼Œ"é˜¿è¾°åœ¨æˆ‘ä»¬æ—è¾¹åä¸‹ï¼Œæ‹§å¼€ä¿æ¸©æ¯å–äº†ä¸€å£ï¼Œ"åˆšå¥½å¬åˆ°ä½ ä»¬åœ¨è®¨è®ºæ—¶é—´æˆ³çš„é—®é¢˜ã€‚è±†å­ï¼Œä½ ç°åœ¨ç”¨çš„è¿™ä¸ª <code>TIMESTAMP</code>ï¼Œå·²ç»ä¸é€‚åˆç°ä»£åº”ç”¨äº†ã€‚"</p>
<p>ä»–è½¬èº«èµ°åˆ°ç™½æ¿å‰ï¼Œæ‹¿èµ·è®°å·ç¬”ç”»äº†ä¸¤ä¸ªå›¾ï¼š</p>
<p>"ä½ æŠŠ <code>TIMESTAMP</code> æƒ³è±¡æˆ<strong>è¶…å¸‚é‡Œçš„é²œç‰›å¥¶</strong>ï¼Œ"ä»–æŒ‡ç€ç¬¬ä¸€ä¸ªå›¾è¯´ï¼Œ"ä¿è´¨æœŸçŸ­ï¼ˆåªåˆ° 2038 å¹´ï¼‰ï¼Œè€Œä¸”å¯¹ç¯å¢ƒå¾ˆæ•æ„Ÿâ€”â€”æ¸©åº¦å˜äº†å®ƒå°±å˜è´¨äº†ã€‚ä½ çš„æœåŠ¡å™¨ä»åŒ—äº¬è¿åˆ°ä¼¦æ•¦ï¼Œå®ƒå­˜çš„æ—¶é—´å°±ä¼šè·Ÿç€å˜ï¼Œå› ä¸ºå®ƒä¼šè‡ªåŠ¨æ ¹æ®æœåŠ¡å™¨æ—¶åŒºè½¬æ¢ã€‚"</p>
<p>å°æ±å¬å¾—å¾ˆè®¤çœŸï¼Œå¾®å¾®ç‚¹äº†ç‚¹å¤´ã€‚</p>
<p>"è€Œ <code>DATETIME</code>ï¼Œå°¤å…¶æ˜¯ <code>DATETIME(3)</code>ï¼Œ"é˜¿è¾°ç”»äº†ç¬¬äºŒä¸ªå›¾ï¼Œ"å°±åƒ<strong>çœŸç©ºåŒ…è£…çš„é£Ÿå“</strong>ã€‚ä¿è´¨æœŸé•¿ï¼ˆèƒ½å­˜åˆ° 9999 å¹´ï¼‰ï¼Œä¸å—ç¯å¢ƒå½±å“ã€‚ä¸ç®¡ä½ æŠŠå®ƒæ”¾åœ¨å“ªä¸ªæ—¶åŒºçš„æœåŠ¡å™¨ä¸Šï¼Œå®ƒå­˜çš„å€¼éƒ½ä¸ä¼šå˜ã€‚è€Œä¸”è¿™ä¸ª <code>(3)</code> å¾ˆå…³é”®â€”â€”å®ƒè¡¨ç¤ºå°æ•°ç‚¹åä¿ç•™ 3 ä½ï¼Œä¹Ÿå°±æ˜¯æ¯«ç§’ã€‚"</p>
<p>"æ¯«ç§’ï¼Ÿ"å°æ±çš„çœ¼ç›äº®äº†ä¸€ä¸‹ã€‚</p>
<p>"å¯¹ï¼Œ"é˜¿è¾°åœ¨ç™½æ¿å¦ä¸€ä¾§å¿«é€Ÿå†™ä¸‹äº†ä¸€ä¸ªå¯¹æ¯”è¡¨ï¼š</p>



































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>TIMESTAMP</th><th>DATETIME(3)</th></tr></thead><tbody><tr><td><strong>å­˜å‚¨ç©ºé—´</strong></td><td>4 å­—èŠ‚</td><td>6 å­—èŠ‚</td></tr><tr><td><strong>æ—¶é—´èŒƒå›´</strong></td><td>1970~2038</td><td>1000~9999</td></tr><tr><td><strong>ç²¾åº¦</strong></td><td>ç§’ï¼ˆ10ä½æ—¶é—´æˆ³ï¼‰</td><td>æ¯«ç§’ï¼ˆ13ä½æ—¶é—´æˆ³ï¼‰</td></tr><tr><td><strong>æ—¶åŒºè¡Œä¸º</strong></td><td>è‡ªåŠ¨è½¬æ¢ï¼ˆæ˜“å‡ºBugï¼‰</td><td>ä¸å¤„ç†ï¼ˆæ‰‹åŠ¨ç®¡ç†UTCï¼‰</td></tr><tr><td><strong>å‰ç«¯å…¼å®¹</strong></td><td>âŒ éœ€è¦ä¹˜ä»¥1000è¡¥é›¶</td><td>âœ… åŸç”ŸåŒ¹é…13ä½</td></tr></tbody></table>
<p>"ä½ çœ‹æœ€åä¸€è¡Œï¼Œ"é˜¿è¾°æŒ‡ç€è¡¨æ ¼ï¼Œ"ç°ä»£å‰ç«¯ç”¨çš„éƒ½æ˜¯ 13 ä½æ¯«ç§’æ—¶é—´æˆ³ï¼Œè¿™æ˜¯ <code>Date.now()</code> çš„æ ‡å‡†ã€‚è€Œ <code>DATETIME(3)</code> çš„ç²¾åº¦æ­£å¥½æ˜¯æ¯«ç§’ï¼Œå’Œå‰ç«¯å®Œç¾åŒ¹é…ã€‚"</p>
<p>ä»–åœé¡¿äº†ä¸€ä¸‹ï¼Œçœ‹ç€æˆ‘ï¼š"è€Œä¸”ï¼Œ<code>DATETIME(3)</code> åªæ¯” <code>TIMESTAMP</code> å¤šå  2 ä¸ªå­—èŠ‚ã€‚2025 å¹´äº†ï¼Œè°è¿˜åœ¨ä¹é‚£ 2 ä¸ªå­—èŠ‚ï¼Ÿ"</p>
<p>"æ›´é‡è¦çš„æ˜¯ï¼Œ"é˜¿è¾°ç»§ç»­è¯´ï¼Œ"å¦‚æœç”¨ <code>DATETIME(3)</code> + UTC çš„æ–¹æ¡ˆï¼Œå‰åç«¯å°±å®Œå…¨æ‰“é€šäº†ã€‚å‰ç«¯ä¼  13 ä½æ—¶é—´æˆ³è¿‡æ¥ï¼Œä½ è½¬æˆ <code>DATETIME(3)</code> å­˜è¿›æ•°æ®åº“ã€‚è¯»å‡ºæ¥æ—¶ï¼Œå†è½¬å› 13 ä½è¿”å›ç»™å‰ç«¯ã€‚ç²¾åº¦ä¸€ç‚¹ä¸ä¸¢ã€‚"</p>
<h2 data-id="heading-3">ğŸ’» ä»£ç å®æˆ˜</h2>
<p>æ—¢ç„¶æ–¹æ¡ˆæ˜ç¡®äº†ï¼Œé‚£å°±åŠ¨æ‰‹ã€‚æˆ‘æ‰“å¼€ç»ˆç«¯ï¼Œå‡†å¤‡å¯¹è¿™å¼ è¡¨åšä¸ª"æ‰‹æœ¯"ã€‚</p>
<h3 data-id="heading-4">1. æ•°æ®åº“è¡¨ç»“æ„å‡çº§</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ç¬¬ä¸€æ­¥ï¼šä» TIMESTAMP å‡çº§ä¸º DATETIME(3)</span>
<span class="hljs-comment">-- (3) è¡¨ç¤ºä¿ç•™ 3 ä½å°æ•°ï¼Œå³æ¯«ç§’ç²¾åº¦</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `user_actions`
MODIFY <span class="hljs-keyword">COLUMN</span> `created_at` DATETIME(<span class="hljs-number">3</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'1970-01-01 00:00:00.000'</span>;

<span class="hljs-comment">-- å¦‚æœä½ è¿˜æœ‰ updated_at å­—æ®µï¼Œä¹Ÿä¸€èµ·æ”¹äº†</span>
<span class="hljs-comment">-- ALTER TABLE `user_actions`</span>
<span class="hljs-comment">-- MODIFY COLUMN `updated_at` DATETIME(3) NOT NULL;</span>
</code></pre>
<p>"çœ‹è¿™é‡Œï¼Œ"æˆ‘æŒ‡ç€ SQL å¯¹å°æ±è¯´ï¼Œ"è¿™ä¸ª <code>DATETIME(3)</code> ä¸­çš„ <code>(3)</code> å°±æ˜¯å…³é”®ã€‚ä»¥å‰æˆ‘ä»¬å†™ <code>DATETIME</code> éƒ½ä¸åŠ è¿™ä¸ªï¼Œé»˜è®¤ç²¾åº¦æ˜¯ 0ï¼Œåªèƒ½åˆ°ç§’ã€‚åŠ äº† <code>(3)</code> ä¹‹åï¼Œå°±èƒ½å­˜åˆ°æ¯«ç§’äº†ï¼Œæ¯”å¦‚ <code>2025-01-09 18:00:00.123</code>ã€‚"</p>
<p><strong>ä¸ºä»€ä¹ˆæ˜¯ 3 ä½å°æ•°ï¼Ÿ</strong></p>
<ul>
<li><code>DATETIME(0)</code>ï¼šç§’ï¼Œå¯¹åº” 10 ä½æ—¶é—´æˆ³</li>
<li><code>DATETIME(3)</code>ï¼šæ¯«ç§’ï¼Œå¯¹åº” 13 ä½æ—¶é—´æˆ³ï¼ˆå‰ç«¯æ ‡å‡†ï¼‰</li>
<li><code>DATETIME(6)</code>ï¼šå¾®ç§’ï¼Œå¯¹åº” 16 ä½æ—¶é—´æˆ³ï¼ˆé«˜é¢‘äº¤æ˜“åœºæ™¯ï¼‰</li>
</ul>
<h3 data-id="heading-5">2. å‰åç«¯æ•°æ®æµè½¬æ–¹æ¡ˆ</h3>
<p>æˆ‘åœ¨ç™½æ¿ä¸Šç”»äº†ä¸ªå®Œæ•´çš„æ•°æ®æµï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant F as å‰ç«¯ï¼ˆå°æ±ï¼‰
    participant B as åç«¯ï¼ˆæˆ‘ï¼‰
    participant D as MySQL

    Note over F,D: æ ¸å¿ƒåŸåˆ™ï¼š13 ä½æ—¶é—´æˆ³ + UTC

    F-&gt;&gt;B: POST /api/action&lt;br/&gt;{action: "click", ts: 1704723600123}
    Note right of F: Date.now() ç”Ÿæˆ&lt;br/&gt;13 ä½æ¯«ç§’æ—¶é—´æˆ³

    B-&gt;&gt;B: è½¬æ¢å‡½æ•°&lt;br/&gt;1704723600123 â†’ "2025-01-09 01:00:00.123"

    B-&gt;&gt;D: INSERT INTO user_actions&lt;br/&gt;(created_at) VALUES ('2025-01-09 01:00:00.123')

    D--&gt;&gt;B: å†™å…¥æˆåŠŸ

    F-&gt;&gt;B: GET /api/actions
    B-&gt;&gt;D: SELECT created_at FROM user_actions
    D--&gt;&gt;B: "2025-01-09 01:00:00.123"

    B-&gt;&gt;B: è½¬æ¢å‡½æ•°&lt;br/&gt;"2025-01-09 01:00:00.123" â†’ 1704723600123

    B--&gt;&gt;F: {ts: 1704723600123, ...}
    Note left of F: å‰ç«¯æ‹¿åˆ° 13 ä½æ—¶é—´æˆ³&lt;br/&gt;ç›´æ¥ä½¿ç”¨ï¼Œç²¾åº¦å®Œæ•´
</code></pre>
<h3 data-id="heading-6">3. åç«¯è½¬æ¢å‡½æ•°å®ç°</h3>
<p>æ ¸å¿ƒæ˜¯ä¸¤ä¸ªå·¥å…·å‡½æ•°ï¼š13 ä½æ—¶é—´æˆ³ â†” DATETIME(3) çš„åŒå‘è½¬æ¢ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> dayjs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'dayjs'</span>);
<span class="hljs-keyword">const</span> utc = <span class="hljs-built_in">require</span>(<span class="hljs-string">'dayjs/plugin/utc'</span>);
dayjs.<span class="hljs-title function_">extend</span>(utc);

<span class="hljs-comment">// =========== è½¬æ¢å·¥å…·å‡½æ•° ===========</span>

<span class="hljs-comment">/**
 * å‰ç«¯ 13 ä½æ¯«ç§’æ—¶é—´æˆ³ â†’ æ•°æ®åº“ DATETIME(3) æ ¼å¼
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">timestamp</span> - 13 ä½æ¯«ç§’æ—¶é—´æˆ³ï¼Œå¦‚ 1704723600123
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">string</span>} - å¦‚ "2025-01-09 01:00:00.123"
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">timestampToDb</span>(<span class="hljs-params">timestamp</span>) {
  <span class="hljs-comment">// å…³é”®ï¼šä½¿ç”¨ utc() ç¡®ä¿è½¬æ¢ä¸º UTC æ—¶é—´</span>
  <span class="hljs-keyword">return</span> dayjs.<span class="hljs-title function_">utc</span>(timestamp).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD HH:mm:ss.SSS'</span>);
}

<span class="hljs-comment">/**
 * æ•°æ®åº“ DATETIME(3) æ ¼å¼ â†’ å‰ç«¯ 13 ä½æ¯«ç§’æ—¶é—´æˆ³
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">datetime</span> - å¦‚ "2025-01-09 01:00:00.123"
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">number</span>} - 13 ä½æ¯«ç§’æ—¶é—´æˆ³
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">dbToTimestamp</span>(<span class="hljs-params">datetime</span>) {
  <span class="hljs-comment">// valueOf() è¿”å› 13 ä½æ¯«ç§’æ—¶é—´æˆ³</span>
  <span class="hljs-keyword">return</span> dayjs.<span class="hljs-title function_">utc</span>(datetime).<span class="hljs-title function_">valueOf</span>();
}

<span class="hljs-comment">// =========== API æ¥å£å®ç° ===========</span>

<span class="hljs-comment">// è®°å½•ç”¨æˆ·æ“ä½œ</span>
app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/api/action'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
  <span class="hljs-keyword">const</span> { user_id, action, ts } = req.<span class="hljs-property">body</span>;

  <span class="hljs-comment">// å‰ç«¯ä¼ æ¥ 13 ä½æ—¶é—´æˆ³ï¼Œè½¬ä¸ºæ•°æ®åº“æ ¼å¼</span>
  <span class="hljs-keyword">const</span> createdAt = <span class="hljs-title function_">timestampToDb</span>(ts);

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å‰ç«¯ä¼ å…¥: <span class="hljs-subst">${ts}</span> (13ä½)`</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å­˜å…¥æ•°æ®åº“: <span class="hljs-subst">${createdAt}</span>`</span>);

  <span class="hljs-keyword">await</span> db.<span class="hljs-title function_">query</span>(
    <span class="hljs-string">'INSERT INTO user_actions (user_id, action, created_at) VALUES (?, ?, ?)'</span>,
    [user_id, action, createdAt]
  );

  res.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span> });
});

<span class="hljs-comment">// è·å–ç”¨æˆ·æ“ä½œåˆ—è¡¨</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/actions'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
  <span class="hljs-keyword">const</span> { user_id } = req.<span class="hljs-property">query</span>;

  <span class="hljs-keyword">const</span> [rows] = <span class="hljs-keyword">await</span> db.<span class="hljs-title function_">query</span>(
    <span class="hljs-string">'SELECT id, action, created_at FROM user_actions WHERE user_id = ? ORDER BY created_at DESC'</span>,
    [user_id]
  );

  <span class="hljs-comment">// å°†æ•°æ®åº“çš„ DATETIME(3) è½¬ä¸ºå‰ç«¯éœ€è¦çš„ 13 ä½æ—¶é—´æˆ³</span>
  <span class="hljs-keyword">const</span> actions = rows.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">row</span> =&gt;</span> ({
    <span class="hljs-attr">id</span>: row.<span class="hljs-property">id</span>,
    <span class="hljs-attr">action</span>: row.<span class="hljs-property">action</span>,
    <span class="hljs-attr">ts</span>: <span class="hljs-title function_">dbToTimestamp</span>(row.<span class="hljs-property">created_at</span>) <span class="hljs-comment">// è½¬ä¸º 13 ä½æ—¶é—´æˆ³</span>
  }));

  res.<span class="hljs-title function_">json</span>(actions);
});
</code></pre>
<p>"çœ‹ï¼Œ"æˆ‘æŒ‡ç€ä»£ç è¯´ï¼Œ"ä½ å‰ç«¯ä¼ è¿‡æ¥ <code>1704723600123</code>ï¼Œæˆ‘ç”¨ <code>timestampToDb</code> è½¬æˆ <code>'2025-01-09 01:00:00.123'</code> å­˜è¿›æ•°æ®åº“ã€‚è¯»å‡ºæ¥æ—¶ï¼Œç”¨ <code>dbToTimestamp</code> è½¬å› <code>1704723600123</code> è¿”å›ç»™ä½ ã€‚æ¯«ç§’ä½çš„ <code>123</code> å®Œæ•´ä¿ç•™ä¸‹æ¥äº†ã€‚"</p>
<h3 data-id="heading-7">4. å‰ç«¯ä»£ç è°ƒæ•´</h3>
<p>å°æ±ä¹Ÿå¿«é€Ÿæ”¹äº†å¥¹çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è®°å½•ç”¨æˆ·æ“ä½œæ—¶ï¼Œç›´æ¥ç”¨ Date.now()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">logAction</span>(<span class="hljs-params">action</span>) {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/action'</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> },
    <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
      <span class="hljs-attr">user_id</span>: <span class="hljs-title function_">getCurrentUserId</span>(),
      <span class="hljs-attr">action</span>: action,
      <span class="hljs-attr">ts</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() <span class="hljs-comment">// 13 ä½æ¯«ç§’æ—¶é—´æˆ³</span>
    })
  });
}

<span class="hljs-comment">// è·å–æ“ä½œåˆ—è¡¨å¹¶æ¸²æŸ“</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">renderActionTimeline</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api/actions?user_id=<span class="hljs-subst">${getCurrentUserId()}</span>`</span>);
  <span class="hljs-keyword">const</span> actions = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();

  <span class="hljs-comment">// åç«¯è¿”å›çš„ ts å°±æ˜¯ 13 ä½æ—¶é—´æˆ³ï¼Œç›´æ¥æ’åº</span>
  actions.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> b.<span class="hljs-property">ts</span> - a.<span class="hljs-property">ts</span>);

  <span class="hljs-comment">// æ¸²æŸ“æ—¶æ˜¾ç¤ºæ¯«ç§’</span>
  actions.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> date = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(item.<span class="hljs-property">ts</span>);
    <span class="hljs-keyword">const</span> timeStr = date.<span class="hljs-title function_">toLocaleString</span>(<span class="hljs-string">'zh-CN'</span>, {
      <span class="hljs-attr">hour12</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">hour</span>: <span class="hljs-string">'2-digit'</span>,
      <span class="hljs-attr">minute</span>: <span class="hljs-string">'2-digit'</span>,
      <span class="hljs-attr">second</span>: <span class="hljs-string">'2-digit'</span>,
      <span class="hljs-attr">fractionalSecondDigits</span>: <span class="hljs-number">3</span> <span class="hljs-comment">// æ˜¾ç¤ºæ¯«ç§’</span>
    });

    <span class="hljs-title function_">renderTimelineItem</span>(item.<span class="hljs-property">action</span>, timeStr);
  });
}
</code></pre>
<h2 data-id="heading-8">ğŸ“Š æ•ˆæœéªŒè¯</h2>
<p>ä»£ç æ”¹å®Œï¼Œæˆ‘é‡å¯äº†æœåŠ¡ã€‚å°æ±è¿«ä¸åŠå¾…åœ°åˆ·æ–°äº†é¡µé¢ã€‚</p>
<p>"æˆ‘æ¥æµ‹è¯•ä¸€ä¸‹ï¼Œ"å¥¹è¯´ç€ï¼Œæ‰‹æŒ‡åœ¨æŒ‰é’®ä¸Šå¿«é€Ÿç‚¹äº†äº”æ¬¡ï¼ŒåŠ¨ä½œè¿è´¯å¾—åƒæ˜¯åœ¨å¼¹é’¢ç´ï¼Œ"è¿™äº”æ¬¡åº”è¯¥éƒ½åœ¨åŒä¸€ç§’å†…ã€‚"</p>
<p>å‡ ç§’åï¼Œå¥¹çš„æ—¶é—´è½´ç»„ä»¶é‡Œå‡ºç°äº†äº”æ¡è®°å½•ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">01:23:45.891 - ç‚¹å‡»æŒ‰é’®</span>
<span class="hljs-section">01:23:45.756 - ç‚¹å‡»æŒ‰é’®</span>
<span class="hljs-section">01:23:45.623 - ç‚¹å‡»æŒ‰é’®</span>
<span class="hljs-section">01:23:45.489 - ç‚¹å‡»æŒ‰é’®</span>
<span class="hljs-section">01:23:45.234 - ç‚¹å‡»æŒ‰é’®</span>
</code></pre>
<p>å°æ±çš„è„¸ä¸Šç»ˆäºéœ²å‡ºäº†ç¬‘å®¹ï¼Œé‚£ç§é‡Šç„¶çš„ç¬‘ï¼Œåƒæ˜¯ç»ˆäºæ”¾ä¸‹äº†å‹åœ¨å¿ƒé‡Œçš„ä¸€å—çŸ³å¤´ï¼š"ä½ çœ‹ï¼æ¯«ç§’ä½éƒ½ä¸ä¸€æ ·ï¼Œæ’åºå®Œå…¨å‡†ç¡®äº†ï¼"</p>
<p>å¥¹å¿«é€Ÿæ»šåŠ¨åˆ—è¡¨ï¼Œé‚£äº›å¯†å¯†éº»éº»çš„æ“ä½œè®°å½•æŒ‰ç…§æ—¶é—´é¡ºåºæ•´æ•´é½é½åœ°æ’åˆ—ç€ï¼Œä¸ä¼šå†åƒä¹‹å‰é‚£æ ·åœ¨åŒä¸€ç§’å†…ä¹±åºã€‚</p>
<p>"è€Œä¸”ä½ çœ‹æ§åˆ¶å°ï¼Œ"å¥¹æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œ"ä½ è¿”å›ç»™æˆ‘çš„ç›´æ¥å°±æ˜¯ 13 ä½æ—¶é—´æˆ³ï¼š<code>1704723685891</code>ã€<code>1704723685756</code>â€¦â€¦æˆ‘å‰ç«¯ä¸ç”¨åšä»»ä½•é¢å¤–å¤„ç†ï¼Œç›´æ¥ç”¨ <code>new Date(ts)</code> å°±èƒ½è½¬æˆæœ¬åœ°æ—¶é—´æ˜¾ç¤ºã€‚"</p>
<p>é˜¿è¾°åœ¨æ—è¾¹å–äº†å£èŒ¶ï¼Œæ·¡æ·¡åœ°è¯´ï¼š"è¿™æ‰æ˜¯å‰åç«¯è¯¥æœ‰çš„åä½œæ–¹å¼ã€‚"</p>
<h2 data-id="heading-9">ğŸ’¡ ç»éªŒæ€»ç»“</h2>
<p>è¿™æ¬¡æ·±å¤œé‡æ„ï¼Œè®©æˆ‘å½»åº•ç†è§£äº† MySQL 8 æ—¶ä»£çš„æ—¶é—´å­˜å‚¨æœ€ä½³å®è·µã€‚</p>
<h3 data-id="heading-10">æ ¸å¿ƒè¦ç‚¹</h3>
<ol>
<li>
<p><strong>MySQL 8 é¦–é€‰ <code>DATETIME(3)</code>ï¼Œä¸è¦å†ç”¨ <code>TIMESTAMP</code></strong></p>
<ul>
<li><code>DATETIME(3)</code> çš„ <code>(3)</code> ä»£è¡¨æ¯«ç§’ç²¾åº¦ï¼ˆå°æ•°ç‚¹å 3 ä½ï¼‰</li>
<li>å­˜å‚¨ç©ºé—´ï¼š6 å­—èŠ‚ï¼ˆæ¯” <code>TIMESTAMP</code> çš„ 4 å­—èŠ‚åªå¤š 2 å­—èŠ‚ï¼‰</li>
<li>æ—¶é—´èŒƒå›´ï¼š1000å¹´ ~ 9999å¹´ï¼ˆè€Œ <code>TIMESTAMP</code> åªåˆ° 2038å¹´ï¼‰</li>
</ul>
</li>
<li>
<p><strong><code>DATETIME(3)</code> å¤©ç„¶åŒ¹é…å‰ç«¯çš„ 13 ä½æ—¶é—´æˆ³</strong></p>
<ul>
<li>JavaScript çš„ <code>Date.now()</code> è¿”å› 13 ä½æ¯«ç§’æ—¶é—´æˆ³ï¼ˆæ ‡å‡†ï¼‰</li>
<li><code>DATETIME(3)</code> å¯ä»¥å®Œæ•´ä¿å­˜æ¯«ç§’ï¼Œç²¾åº¦å®Œå…¨å¯¹åº”</li>
</ul>
</li>
<li>
<p><strong>ç»Ÿä¸€ç”¨ UTCï¼Œæ—¶åŒºé—®é¢˜äº¤ç»™åº”ç”¨å±‚</strong></p>
<ul>
<li>æ•°æ®åº“åªå­˜ UTC æ—¶é—´ï¼Œä¸è¦è®© MySQL å»å¤„ç†æ—¶åŒº</li>
<li>åç«¯ä¸æ•°æ®åº“äº¤äº’æ—¶ç”¨ UTC</li>
<li>å‰ç«¯æ ¹æ®ç”¨æˆ·æœ¬åœ°æ—¶åŒºæ˜¾ç¤ºï¼ˆæµè§ˆå™¨è‡ªåŠ¨å¤„ç†ï¼‰</li>
</ul>
</li>
<li>
<p><strong>TIMESTAMP çš„ä¸‰å¤§é—®é¢˜</strong></p>
<ul>
<li><strong>2038å¹´å±æœº</strong>ï¼šæœ€å¤§åªèƒ½å­˜åˆ° <code>2038-01-19 03:14:07</code></li>
<li><strong>ç²¾åº¦ä¸è¶³</strong>ï¼šåªèƒ½åˆ°ç§’ï¼Œæ— æ³•æ»¡è¶³ç°ä»£åº”ç”¨çš„æ¯«ç§’çº§éœ€æ±‚</li>
<li><strong>æ—¶åŒºä¾èµ–</strong>ï¼šå—æœåŠ¡å™¨ <code>time_zone</code> é…ç½®å½±å“ï¼Œè¿ç§»æ˜“å‡ºBug</li>
</ul>
</li>
</ol>
<h3 data-id="heading-11">å¸¸è§å‘ç‚¹</h3>
<ul>
<li>
<p>âŒ <strong>å‘1ï¼šå‰ç«¯ 13 ä½æ—¶é—´æˆ³ç›´æ¥å­˜å…¥ TIMESTAMP</strong></p>
<ul>
<li>é—®é¢˜ï¼š<code>TIMESTAMP</code> ä¼šè‡ªåŠ¨æˆªæ–­ï¼Œæ¯«ç§’ä¸¢å¤±</li>
<li>æ­£ç¡®åšæ³•ï¼šç”¨ <code>DATETIME(3)</code> å­˜å‚¨</li>
</ul>
</li>
<li>
<p>âŒ <strong>å‘2ï¼šORM é©±åŠ¨çš„æ—¶åŒºé…ç½®ä¸æ­£ç¡®</strong></p>
<ul>
<li>é—®é¢˜ï¼šSequelizeã€TypeORM ç­‰ä¼šæ ¹æ®æœ¬åœ°æ—¶åŒºè‡ªåŠ¨è½¬æ¢</li>
<li>æ­£ç¡®åšæ³•ï¼šè¿æ¥é…ç½®ä¸­å¼ºåˆ¶ <code>timezone: '+00:00'</code></li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Sequelize ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> sequelize = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Sequelize</span>({
  <span class="hljs-attr">dialect</span>: <span class="hljs-string">'mysql'</span>,
  <span class="hljs-attr">timezone</span>: <span class="hljs-string">'+00:00'</span> <span class="hljs-comment">// å…³é”®ï¼å¼ºåˆ¶ä½¿ç”¨ UTC</span>
});
</code></pre>
</li>
<li>
<p>âŒ <strong>å‘3ï¼šè€è¡¨ç›´æ¥ ALTER ä¸å¤‡ä»½</strong></p>
<ul>
<li>é—®é¢˜ï¼š<code>TIMESTAMP</code> è½¬ <code>DATETIME</code> å¯èƒ½æ¶‰åŠæ—¶åŒºéšå¼è½¬æ¢</li>
<li>æ­£ç¡®åšæ³•ï¼šå…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯ï¼Œç”Ÿäº§ç¯å¢ƒæ“ä½œå‰å¿…é¡»å¤‡ä»½</li>
</ul>
</li>
<li>
<p>âŒ <strong>å‘4ï¼šåç«¯è¿”å›æ—¶ä¸è½¬æ¢ä¸º 13 ä½æ—¶é—´æˆ³</strong></p>
<ul>
<li>é—®é¢˜ï¼šè¿”å›å­—ç¬¦ä¸² <code>"2025-01-09 01:00:00.123"</code>ï¼Œå‰ç«¯è¿˜è¦æ‰‹åŠ¨å¤„ç†</li>
<li>æ­£ç¡®åšæ³•ï¼šç»Ÿä¸€è¿”å› 13 ä½æ•°å­—æ—¶é—´æˆ³</li>
</ul>
</li>
</ul>
<h3 data-id="heading-12">æŠ€æœ¯æ‹“å±•</h3>
<ul>
<li>å¦‚æœéœ€è¦<strong>æ›´é«˜ç²¾åº¦</strong>ï¼ˆå¦‚æ—¥å¿—ç³»ç»Ÿã€é«˜é¢‘äº¤æ˜“ï¼‰ï¼Œå¯ä»¥ç”¨ <code>DATETIME(6)</code> å­˜å‚¨å¾®ç§’</li>
<li>å¦‚æœè¿½æ±‚<strong>æè‡´æ€§èƒ½</strong>ï¼Œå¯ä»¥ç›´æ¥ç”¨ <code>BIGINT</code> å­˜å‚¨ 13 ä½æ—¶é—´æˆ³æ•°å­—ï¼ˆä½†ç‰ºç‰²äº†å¯è¯»æ€§ï¼‰</li>
<li>å…³äºæ—¶åŒºå¤„ç†çš„æ›´å¤šç»†èŠ‚ï¼Œå¯ä»¥ç ”ç©¶ <code>CONVERT_TZ()</code> å‡½æ•°</li>
</ul>
<h2 data-id="heading-13">ğŸŒ™ æ¸©é¦¨æ”¶å°¾</h2>
<p>å°æ±å…³ä¸Šç”µè„‘ï¼Œç«™èµ·æ¥ä¼¸äº†ä¸ªæ‡’è…°ã€‚å¥¹èµ°è¿‡æˆ‘èº«è¾¹æ—¶ï¼Œè½»è½»æ‹äº†æ‹æˆ‘çš„è‚©è†€ï¼š"è°¢äº†ã€‚"</p>
<p>é˜¿è¾°ä¹Ÿæ”¶æ‹¾å¥½ä¸œè¥¿ï¼Œè·¯è¿‡æ—¶åªè¯´äº†å¥ï¼š"æ—©ç‚¹ä¼‘æ¯ã€‚"</p>
<p>åŠå…¬å®¤é‡Œåˆåªå‰©ä¸‹æˆ‘ä¸€ä¸ªäººäº†ã€‚çª—å¤–çš„é›¨è¿˜åœ¨ä¸‹ï¼Œä½†å£°éŸ³å˜å°äº†å¾ˆå¤šã€‚æˆ‘çœ‹äº†çœ‹ç”µè„‘å³ä¸‹è§’çš„æ—¶é—´ï¼š01:18:47.325ã€‚</p>
<p>æ˜¾ç¤ºå™¨çš„å…‰æ˜ åœ¨é”®ç›˜ä¸Šï¼Œé‚£äº›è¢«æ•²äº†æ— æ•°æ¬¡çš„æŒ‰é”®åœ¨å…‰å½±ä¸‹æ˜¾å¾—æœ‰äº›æ–‘é©³ã€‚æˆ‘æƒ³èµ·ä¸‰ä¸ªæœˆå‰å»ºè¿™å¼ è¡¨çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯æ·±å¤œï¼Œä¹Ÿæ˜¯ä¸‹é›¨ã€‚é‚£æ—¶å€™æˆ‘éšæ‰‹é€‰äº† <code>TIMESTAMP</code>ï¼Œè§‰å¾—å¤Ÿç”¨äº†ã€‚</p>
<p>ç°åœ¨æƒ³æƒ³ï¼Œæœ‰äº›"å¤Ÿç”¨"çš„é€‰æ‹©ï¼Œåªæ˜¯å› ä¸ºé—®é¢˜è¿˜æ²¡æš´éœ²è€Œå·²ã€‚</p>
<hr/>
<p><em>è¿™é‡Œæ˜¯ã€Šæ·±å¤œä»£ç ã€‹ï¼Œæˆ‘ä»¬ä¸‹æœŸè§ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­¦ä¹ ä¸€äº›å¸¸ç”¨çš„æ··åˆæ¨¡å¼ä¹‹BlendMode.srcIn]]></title>    <link>https://juejin.cn/post/7592159803410497572</link>    <guid>https://juejin.cn/post/7592159803410497572</guid>    <pubDate>2026-01-07T09:05:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592159803410497572" data-draft-id="7592236397535232036" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" å­¦ä¹ ä¸€äº›å¸¸ç”¨çš„æ··åˆæ¨¡å¼ä¹‹BlendMode.srcIn"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2026-01-07T09:05:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç«æŸ´å°±æ˜¯æˆ‘"/> <meta itemprop="url" content="https://juejin.cn/user/272334614705575"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             å­¦ä¹ ä¸€äº›å¸¸ç”¨çš„æ··åˆæ¨¡å¼ä¹‹BlendMode.srcIn
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/272334614705575/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç«æŸ´å°±æ˜¯æˆ‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T09:05:38.000Z" title="Wed Jan 07 2026 09:05:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>SRC_IN</p>
<p><code>Keeps the source pixels that cover the destination pixels, discards the remaining source and destination pixels.</code></p>
<p>è®¡ç®—å…¬å¼</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17e9298a9851429883786947bbdce669~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Gr5p-05bCx5piv5oiR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768381538&amp;x-signature=xn2nBRmuIUa%2Bs5CKmuPAknVOF5s%3D" alt="image.png" width="30%" loading="lazy"/>
<p>å¤§ç™½è¯å°±æ˜¯ï¼šåœ¨dsté€æ˜åº¦æ˜¯1çš„æ—¶å€™,é‡å éƒ¨åˆ†æ˜¾ç¤ºçš„å°±æ˜¯srcçš„å†…å®¹ã€‚éé‡å éƒ¨åˆ†src ç›´æ¥å…¨éƒ¨ä¸¢å¼ƒ,dstä¸ä¿®æ”¹ã€‚</p>
<p>ç¬¬ä¸€ä¸ªä¾‹å­:</p>
<pre><code class="hljs language-js" lang="js">  @override
  <span class="hljs-keyword">void</span> <span class="hljs-title function_">paint</span>(<span class="hljs-params">Canvas canvas, Size size</span>) {
    <span class="hljs-keyword">var</span> width = size.<span class="hljs-property">width</span>;
    <span class="hljs-keyword">var</span> height = size.<span class="hljs-property">height</span>;

    canvas.<span class="hljs-title function_">saveLayer</span>(<span class="hljs-title class_">Rect</span>.<span class="hljs-title function_">fromLTWH</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, width, height), <span class="hljs-title class_">Paint</span>());
    <span class="hljs-title class_">Paint</span> dstPaint = <span class="hljs-title class_">Paint</span>()..<span class="hljs-property">color</span> = <span class="hljs-title class_">Colors</span>.<span class="hljs-property">red</span>.<span class="hljs-title function_">withOpacity</span>(<span class="hljs-number">0.8</span>);
    dstPaint.<span class="hljs-property">strokeWidth</span> = <span class="hljs-number">20</span>;
    dstPaint.<span class="hljs-property">style</span> = <span class="hljs-title class_">PaintingStyle</span>.<span class="hljs-property">stroke</span>;

    canvas.<span class="hljs-title function_">drawCircle</span>(<span class="hljs-title class_">Offset</span>(width/<span class="hljs-number">2</span>,height/<span class="hljs-number">2</span>), <span class="hljs-number">10</span>, dstPaint);

    canvas.<span class="hljs-title function_">drawCircle</span>(<span class="hljs-title class_">Offset</span>(width/<span class="hljs-number">2</span>,height/<span class="hljs-number">2</span>), <span class="hljs-number">50</span>, dstPaint);

    canvas.<span class="hljs-title function_">drawCircle</span>(<span class="hljs-title class_">Offset</span>(width/<span class="hljs-number">2</span>,height/<span class="hljs-number">2</span>), <span class="hljs-number">90</span>, dstPaint);

    canvas.<span class="hljs-title function_">drawCircle</span>(<span class="hljs-title class_">Offset</span>(width/<span class="hljs-number">2</span>,height/<span class="hljs-number">2</span>), <span class="hljs-number">130</span>, dstPaint);

    <span class="hljs-keyword">var</span> srcPaint = <span class="hljs-title class_">Paint</span>()
      ..<span class="hljs-property">color</span> = <span class="hljs-title class_">Colors</span>.<span class="hljs-property">blue</span> <span class="hljs-comment">// æºé¢œè‰²ï¼šè“è‰²</span>
      ..<span class="hljs-property">style</span> = <span class="hljs-title class_">PaintingStyle</span>.<span class="hljs-property">stroke</span> <span class="hljs-comment">// å¡«å……æ¨¡å¼</span>
      ..<span class="hljs-property">strokeWidth</span> = <span class="hljs-number">50</span>
      ..<span class="hljs-property">blendMode</span> = <span class="hljs-title class_">BlendMode</span>.<span class="hljs-property">srcIn</span>; <span class="hljs-comment">// æ··åˆæ¨¡å¼</span>
    canvas.<span class="hljs-title function_">drawRect</span>(<span class="hljs-title class_">Rect</span>.<span class="hljs-title function_">fromLTWH</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, width, height), srcPaint);
    <span class="hljs-comment">// canvas.drawImageRect(image!, Rect.fromLTWH(0, 0, image!.width.toDouble(), image!.height.toDouble()), Rect.fromLTWH(0, 0, width, height), srcPaint);</span>
    canvas.<span class="hljs-title function_">restore</span>();
  }
</code></pre>
<p>ä¸€ä¸ªçŸ©å½¢è¾¹æ¡†è·Ÿå¤šä¸ªç¯å½¢è¿›è¡ŒsrcInæ··åˆã€‚æ•ˆæœå¦‚ä¸‹ï¼šå¯ä»¥çœ‹å‡ºé‡å éƒ¨åˆ†ä¿ç•™äº†srcï¼Œsrcéé‡å éƒ¨åˆ†ç›´æ¥ä¸¢å¼ƒäº†ã€‚éé‡å dstè¿˜æ˜¯ä¿æŒåŸæ ·ã€‚</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7d143d89ab94cbcabe98f10daaec269~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Gr5p-05bCx5piv5oiR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768381538&amp;x-signature=qKTcUwalJOkSdlA%2FdpTZnesJpls%3D" alt="image.png" width="30%" loading="lazy"/>
<p>ç¬¬äºŒä¸ªä¾‹å­:ç»™å›¾å½¢è´´çº¸æˆ–è€…è¯´æ˜¯å›¾ç‰‡ä¿ç•™ä»»æ„éƒ¨åˆ†(åªè¦ä½ èƒ½ç”»å‡ºè·¯å¾„)</p>
<pre><code class="hljs language-js" lang="js">  @override
  <span class="hljs-keyword">void</span> <span class="hljs-title function_">paint</span>(<span class="hljs-params">Canvas canvas, Size size</span>) {
    <span class="hljs-keyword">var</span> width = size.<span class="hljs-property">width</span>;
    <span class="hljs-keyword">var</span> height = size.<span class="hljs-property">height</span>;

    canvas.<span class="hljs-title function_">saveLayer</span>(<span class="hljs-title class_">Rect</span>.<span class="hljs-title function_">fromLTWH</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, width, height), <span class="hljs-title class_">Paint</span>());
    <span class="hljs-title class_">Paint</span> dstPaint = <span class="hljs-title class_">Paint</span>()..<span class="hljs-property">color</span> = <span class="hljs-title class_">Colors</span>.<span class="hljs-property">red</span>.<span class="hljs-title function_">withOpacity</span>(<span class="hljs-number">0.8</span>);
    dstPaint.<span class="hljs-property">strokeWidth</span> = <span class="hljs-number">20</span>;
    dstPaint.<span class="hljs-property">style</span> = <span class="hljs-title class_">PaintingStyle</span>.<span class="hljs-property">stroke</span>;

    canvas.<span class="hljs-title function_">drawCircle</span>(<span class="hljs-title class_">Offset</span>(width/<span class="hljs-number">2</span>,height/<span class="hljs-number">2</span>), <span class="hljs-number">10</span>, dstPaint);

    canvas.<span class="hljs-title function_">drawCircle</span>(<span class="hljs-title class_">Offset</span>(width/<span class="hljs-number">2</span>,height/<span class="hljs-number">2</span>), <span class="hljs-number">50</span>, dstPaint);

    canvas.<span class="hljs-title function_">drawCircle</span>(<span class="hljs-title class_">Offset</span>(width/<span class="hljs-number">2</span>,height/<span class="hljs-number">2</span>), <span class="hljs-number">90</span>, dstPaint);

    canvas.<span class="hljs-title function_">drawCircle</span>(<span class="hljs-title class_">Offset</span>(width/<span class="hljs-number">2</span>,height/<span class="hljs-number">2</span>), <span class="hljs-number">130</span>, dstPaint);

    <span class="hljs-keyword">var</span> srcPaint = <span class="hljs-title class_">Paint</span>()
      ..<span class="hljs-property">color</span> = <span class="hljs-title class_">Colors</span>.<span class="hljs-property">blue</span> <span class="hljs-comment">// æºé¢œè‰²ï¼šè“è‰²</span>
      ..<span class="hljs-property">style</span> = <span class="hljs-title class_">PaintingStyle</span>.<span class="hljs-property">stroke</span> <span class="hljs-comment">// å¡«å……æ¨¡å¼</span>
      ..<span class="hljs-property">strokeWidth</span> = <span class="hljs-number">50</span>
      ..<span class="hljs-property">blendMode</span> = <span class="hljs-title class_">BlendMode</span>.<span class="hljs-property">srcIn</span>; <span class="hljs-comment">// æ··åˆæ¨¡å¼</span>
    <span class="hljs-comment">// canvas.drawRect(Rect.fromLTWH(0, 0, width, height), srcPaint);</span>
    canvas.<span class="hljs-title function_">drawImageRect</span>(image!, <span class="hljs-title class_">Rect</span>.<span class="hljs-title function_">fromLTWH</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, image!.<span class="hljs-property">width</span>.<span class="hljs-title function_">toDouble</span>(), image!.<span class="hljs-property">height</span>.<span class="hljs-title function_">toDouble</span>()), <span class="hljs-title class_">Rect</span>.<span class="hljs-title function_">fromLTWH</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, width, height), srcPaint);
    canvas.<span class="hljs-title function_">restore</span>();
  }
</code></pre>
<p>æ•ˆæœå›¾å¦‚ä¸‹:æŠŠä¸€å¼ å›¾ç‰‡è´´åˆ°äº†ç¯å½¢ä¸Šé¢ï¼Œå¦‚æœdstæ˜¯ä¸ªåœ†å½¢ï¼Œé‚£å°±æ˜¯åœ†å½¢å¤´åƒã€‚</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9617663f5dc429f9aa89fd747183c58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Gr5p-05bCx5piv5oiR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768381538&amp;x-signature=2oBDA2%2FLZYbYV%2F9vwgCU7elaroQ%3D" alt="image.png" width="30%" loading="lazy"/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React è‡ªå®šä¹‰ Hooks ç”Ÿå­˜æŒ‡å—ï¼š7 ä¸ªè®©ä½ å°‘åŠ ç­çš„"å·æ‡’"ç¥å™¨]]></title>    <link>https://juejin.cn/post/7592361736130756618</link>    <guid>https://juejin.cn/post/7592361736130756618</guid>    <pubDate>2026-01-07T09:00:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592361736130756618" data-draft-id="7592340733954261042" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React è‡ªå®šä¹‰ Hooks ç”Ÿå­˜æŒ‡å—ï¼š7 ä¸ªè®©ä½ å°‘åŠ ç­çš„&quot;å·æ‡’&quot;ç¥å™¨"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-07T09:00:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜Agions"/> <meta itemprop="url" content="https://juejin.cn/user/360295545187751"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React è‡ªå®šä¹‰ Hooks ç”Ÿå­˜æŒ‡å—ï¼š7 ä¸ªè®©ä½ å°‘åŠ ç­çš„"å·æ‡’"ç¥å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/360295545187751/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜Agions
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T09:00:07.000Z" title="Wed Jan 07 2026 09:00:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>æ‘˜è¦</strong>ï¼šéƒ½ 2026 å¹´äº†ï¼Œè¿˜åœ¨å†™é‡å¤ä»£ç ï¼Ÿè¿˜åœ¨ useEffect é‡Œç–¯ç‹‚ copy-pasteï¼Ÿé†’é†’ï¼Œè‡ªå®šä¹‰ Hooks æ‰æ˜¯ç°ä»£ React å¼€å‘è€…çš„"æ‘¸é±¼"ç¥å™¨ã€‚æœ¬æ–‡æ‰‹æŠŠæ‰‹æ•™ä½ å°è£… 7 ä¸ªè¶…å®ç”¨çš„è‡ªå®šä¹‰ Hooksï¼Œä»æ­¤å‘Šåˆ« 996ï¼Œæ‹¥æŠ± WLBã€‚ä»£ç å³æ‹¿å³ç”¨ï¼ŒCV å·¥ç¨‹å¸ˆç‹‚å–œã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">å¼•è¨€ï¼šä¸€ä¸ªå…³äº"å·æ‡’"çš„æ•…äº‹</h2>
<p><strong>åœºæ™¯ä¸€ï¼š</strong> äº§å“ç»ç†ï¼š"è¿™ä¸ªæœç´¢æ¡†è¦åšé˜²æŠ–ã€‚" ä½ ï¼š"å¥½çš„ã€‚"ï¼ˆæ‰“å¼€ Googleï¼Œæœç´¢ "react debounce"ï¼‰ äº§å“ç»ç†ï¼š"é‚£ä¸ªé¡µé¢ä¹Ÿè¦ã€‚" ä½ ï¼š"å¥½çš„ã€‚"ï¼ˆå†æ¬¡ copy-pasteï¼‰ äº§å“ç»ç†ï¼š"è¿˜æœ‰è¿™ 10 ä¸ªé¡µé¢..." ä½ ï¼šï¼ˆå¼€å§‹æ€€ç–‘äººç”Ÿï¼‰</p>
<p><strong>åœºæ™¯äºŒï¼š</strong> ä½ ï¼š"è¿™ä¸ªè¡¨å•çŠ¶æ€ç®¡ç†å†™å¾—çœŸä¼˜é›…ã€‚" ï¼ˆä¸‰ä¸ªæœˆåï¼‰ ä½ ï¼š"è¿™ TM æ˜¯è°å†™çš„ï¼Ÿï¼" Git blameï¼š"æ˜¯ä½ è‡ªå·±ã€‚" ä½ ï¼šï¼ˆæ²‰é»˜ï¼‰</p>
<p><strong>åœºæ™¯ä¸‰ï¼š</strong> Code Review æ—¶â€”â€” åŒäº‹ï¼š"è¿™æ®µé€»è¾‘æˆ‘åœ¨å¦å¤– 5 ä¸ªæ–‡ä»¶é‡Œè§è¿‡ã€‚" ä½ ï¼š"é‚£ä¸ª...æˆ‘å‡†å¤‡é‡æ„çš„..." åŒäº‹ï¼š"ä½ ä¸‰ä¸ªæœˆå‰ä¹Ÿæ˜¯è¿™ä¹ˆè¯´çš„ã€‚" ä½ ï¼šï¼ˆæƒ³æ‰¾ä¸ªåœ°ç¼é’»è¿›å»ï¼‰</p>
<p><strong>å¦‚æœä½ ä¹Ÿæœ‰ç±»ä¼¼ç»å†ï¼Œæ­å–œä½ ï¼Œè¿™ç¯‡æ–‡ç« å°±æ˜¯ä¸ºä½ å‡†å¤‡çš„ã€‚</strong></p>
<p>ä»Šå¤©ï¼Œæˆ‘è¦åˆ†äº« 7 ä¸ªè¶…å®ç”¨çš„è‡ªå®šä¹‰ Hooksï¼Œè®©ä½ ï¼š</p>
<ul>
<li>ä»£ç å¤ç”¨ç‡æå‡ 300%</li>
<li>æ¯å¤©å°‘å†™ 200 è¡Œé‡å¤ä»£ç </li>
<li>å‡†æ—¶ä¸‹ç­ä¸æ˜¯æ¢¦</li>
</ul>
<hr/>
<h2 data-id="heading-1">ç¬¬ä¸€ç« ï¼šè‡ªå®šä¹‰ Hooks çš„"é“"ä¸"æœ¯"</h2>
<h3 data-id="heading-2">1.1 ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰ Hookï¼Ÿ</h3>
<p>ç®€å•è¯´ï¼Œè‡ªå®šä¹‰ Hook å°±æ˜¯ä¸€ä¸ªä»¥ <code>use</code> å¼€å¤´çš„å‡½æ•°ï¼Œé‡Œé¢å¯ä»¥è°ƒç”¨å…¶ä»– Hooksã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// è¿™å°±æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„è‡ªå®šä¹‰ Hook</span>
function <span class="hljs-built_in">useMyHook</span>() {
Â Â const <span class="hljs-selector-attr">[state, setState]</span> = <span class="hljs-built_in">useState</span>(null)

Â Â <span class="hljs-built_in">useEffect</span>(() =&gt; {
Â Â Â Â <span class="hljs-comment">// åšä¸€äº›äº‹æƒ…</span>
Â Â }, <span class="hljs-selector-attr">[]</span>)

Â Â return state
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦ç”¨è‡ªå®šä¹‰ Hookï¼Ÿ</strong></p>
<ol>
<li><strong>å¤ç”¨é€»è¾‘</strong>ï¼šåŒæ ·çš„é€»è¾‘å†™ä¸€æ¬¡ï¼Œåˆ°å¤„ç”¨</li>
<li><strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>ï¼šç»„ä»¶åªç®¡æ¸²æŸ“ï¼Œé€»è¾‘äº¤ç»™ Hook</li>
<li><strong>æ›´å¥½æµ‹è¯•</strong>ï¼šHook å¯ä»¥å•ç‹¬æµ‹è¯•</li>
<li><strong>ä»£ç æ›´æ¸…æ™°</strong>ï¼šç»„ä»¶ä»£ç ä» 500 è¡Œå˜æˆ 50 è¡Œ</li>
</ol>
<h3 data-id="heading-3">1.2 è‡ªå®šä¹‰ Hook çš„å‘½åè§„èŒƒ</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä»¥ use å¼€å¤´</span>
<span class="hljs-built_in">useLocalStorage</span>()
<span class="hljs-built_in">useDebounce</span>()
<span class="hljs-built_in">useFetch</span>()

<span class="hljs-comment">// âŒ é”™è¯¯ï¼šä¸ä»¥ use å¼€å¤´ï¼ˆReact ä¸ä¼šè¯†åˆ«ä¸º Hookï¼‰</span>
<span class="hljs-built_in">getLocalStorage</span>()
<span class="hljs-built_in">debounceValue</span>()
<span class="hljs-built_in">fetchData</span>()
</code></pre>
<p><strong>è®°ä½ï¼š</strong> ä»¥ <code>use</code> å¼€å¤´ä¸æ˜¯è£…é€¼ï¼Œæ˜¯ React è¯†åˆ« Hook çš„æ–¹å¼ã€‚ä¸è¿™ä¹ˆå†™ï¼ŒReact çš„ Hooks è§„åˆ™æ£€æŸ¥ä¼šå¤±æ•ˆã€‚</p>
<hr/>
<h2 data-id="heading-4">ç¬¬äºŒç« ï¼š7 ä¸ªè®©ä½ å°‘åŠ ç­çš„è‡ªå®šä¹‰ Hooks</h2>
<h3 data-id="heading-5">Hook #1ï¼šuseLocalStorage â€”â€” æœ¬åœ°å­˜å‚¨ã®ä¼˜é›…å§¿åŠ¿</h3>
<p><strong>ç—›ç‚¹ï¼š</strong> æ¯æ¬¡ç”¨ localStorage éƒ½è¦ JSON.parseã€JSON.stringifyï¼Œè¿˜è¦å¤„ç† SSR æŠ¥é”™ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState, useEffect, useCallback } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>

<span class="hljs-comment">/**
Â * å°†çŠ¶æ€åŒæ­¥åˆ° localStorage çš„ Hook
Â * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">key</span> - localStorage çš„é”®å
Â * <span class="hljs-doctag">@param</span> {<span class="hljs-type">any</span>} <span class="hljs-variable">initialValue</span> - åˆå§‹å€¼
Â * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">[any, Function, Function]</span>} [å­˜å‚¨çš„å€¼, è®¾ç½®å‡½æ•°, åˆ é™¤å‡½æ•°]
Â */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useLocalStorage</span>(<span class="hljs-params">key, initialValue</span>) {
Â Â <span class="hljs-comment">// è·å–åˆå§‹å€¼ï¼ˆæƒ°æ€§åˆå§‹åŒ–ï¼‰</span>
Â Â <span class="hljs-keyword">const</span> [storedValue, setStoredValue] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> {
Â Â Â Â <span class="hljs-comment">// SSR ç¯å¢ƒä¸‹ window ä¸å­˜åœ¨</span>
Â Â Â Â <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> === <span class="hljs-string">"undefined"</span>) {
Â Â Â Â Â Â <span class="hljs-keyword">return</span> initialValue
Â Â Â Â }

Â Â Â Â <span class="hljs-keyword">try</span> {
Â Â Â Â Â Â <span class="hljs-keyword">const</span> item = <span class="hljs-variable language_">window</span>.<span class="hljs-property">localStorage</span>.<span class="hljs-title function_">getItem</span>(key)
Â Â Â Â Â Â <span class="hljs-comment">// å¦‚æœå­˜åœ¨åˆ™è§£æï¼Œå¦åˆ™è¿”å›åˆå§‹å€¼</span>
Â Â Â Â Â Â <span class="hljs-keyword">return</span> item ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(item) : initialValue
Â Â Â Â } <span class="hljs-keyword">catch</span> (error) {
Â Â Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`Error reading localStorage key "<span class="hljs-subst">${key}</span>":`</span>, error)
Â Â Â Â Â Â <span class="hljs-keyword">return</span> initialValue
Â Â Â Â }
Â Â })

Â Â <span class="hljs-comment">// è®¾ç½®å€¼çš„å‡½æ•°</span>
Â Â <span class="hljs-keyword">const</span> setValue = <span class="hljs-title function_">useCallback</span>(
Â Â Â Â <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
Â Â Â Â Â Â <span class="hljs-keyword">try</span> {
Â Â Â Â Â Â Â Â <span class="hljs-comment">// æ”¯æŒå‡½æ•°å¼æ›´æ–°</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">const</span> valueToStore =
Â Â Â Â Â Â Â Â Â Â value <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Function</span> ? <span class="hljs-title function_">value</span>(storedValue) : value
Â Â Â Â Â Â Â Â <span class="hljs-title function_">setStoredValue</span>(valueToStore)

Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">"undefined"</span>) {
Â Â Â Â Â Â Â Â Â Â <span class="hljs-variable language_">window</span>.<span class="hljs-property">localStorage</span>.<span class="hljs-title function_">setItem</span>(key, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(valueToStore))
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â } <span class="hljs-keyword">catch</span> (error) {
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`Error setting localStorage key "<span class="hljs-subst">${key}</span>":`</span>, error)
Â Â Â Â Â Â }
Â Â Â Â },
Â Â Â Â [key, storedValue]
Â Â )

Â Â <span class="hljs-comment">// åˆ é™¤å€¼çš„å‡½æ•°</span>
Â Â <span class="hljs-keyword">const</span> removeValue = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
Â Â Â Â <span class="hljs-keyword">try</span> {
Â Â Â Â Â Â <span class="hljs-title function_">setStoredValue</span>(initialValue)
Â Â Â Â Â Â <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">"undefined"</span>) {
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">window</span>.<span class="hljs-property">localStorage</span>.<span class="hljs-title function_">removeItem</span>(key)
Â Â Â Â Â Â }
Â Â Â Â } <span class="hljs-keyword">catch</span> (error) {
Â Â Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`Error removing localStorage key "<span class="hljs-subst">${key}</span>":`</span>, error)
Â Â Â Â }
Â Â }, [key, initialValue])

Â Â <span class="hljs-keyword">return</span> [storedValue, setValue, removeValue]
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> useLocalStorage
</code></pre>
<p><strong>ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
Â Â <span class="hljs-comment">// å°±åƒ useState ä¸€æ ·ç®€å•ï¼</span>
Â Â <span class="hljs-keyword">const</span> [theme, setTheme, removeTheme] = <span class="hljs-title function_">useLocalStorage</span>(<span class="hljs-string">"theme"</span>, <span class="hljs-string">"light"</span>)
Â Â <span class="hljs-keyword">const</span> [user, setUser] = <span class="hljs-title function_">useLocalStorage</span>(<span class="hljs-string">"user"</span>, <span class="hljs-literal">null</span>)

Â Â <span class="hljs-keyword">return</span> (
Â Â Â Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">app</span> ${<span class="hljs-attr">theme</span>}`}&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setTheme(theme === "light" ? "dark" : "light")}&gt;
Â Â Â Â Â Â Â Â åˆ‡æ¢ä¸»é¢˜ï¼š{theme}
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setUser({ name: "å¼ ä¸‰", age: 25 })}&gt;ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{removeTheme}</span>&gt;</span>é‡ç½®ä¸»é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

Â Â Â Â Â Â {user &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ¬¢è¿ï¼Œ{user.name}ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
Â Â )
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¿™ä¸ª Hook é¦™ï¼Ÿ</strong></p>
<ul>
<li>è‡ªåŠ¨å¤„ç† JSON åºåˆ—åŒ–/ååºåˆ—åŒ–</li>
<li>æ”¯æŒ SSRï¼ˆä¸ä¼šæŠ¥ window is not definedï¼‰</li>
<li>æ”¯æŒå‡½æ•°å¼æ›´æ–°ï¼ˆå’Œ useState ä¸€æ ·ï¼‰</li>
<li>æä¾›åˆ é™¤åŠŸèƒ½</li>
</ul>
<hr/>
<h3 data-id="heading-6">Hook #2ï¼šuseDebounce â€”â€” é˜²æŠ–ã®ç»ˆææ–¹æ¡ˆ</h3>
<p><strong>ç—›ç‚¹ï¼š</strong> æœç´¢æ¡†è¾“å…¥æ—¶ï¼Œæ¯æ•²ä¸€ä¸ªå­—å°±å‘è¯·æ±‚ï¼ŒæœåŠ¡å™¨ç›´æ¥è¢«ä½ æ‰“çˆ†ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>

<span class="hljs-comment">/**
Â * é˜²æŠ– Hookï¼šå»¶è¿Ÿæ›´æ–°å€¼ï¼Œé¿å…é¢‘ç¹è§¦å‘
Â * <span class="hljs-doctag">@param</span> {<span class="hljs-type">any</span>} <span class="hljs-variable">value</span> - éœ€è¦é˜²æŠ–çš„å€¼
Â * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">delay</span> - å»¶è¿Ÿæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
Â * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">any</span>} é˜²æŠ–åçš„å€¼
Â */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useDebounce</span>(<span class="hljs-params">value, delay = <span class="hljs-number">500</span></span>) {
Â Â <span class="hljs-keyword">const</span> [debouncedValue, setDebouncedValue] = <span class="hljs-title function_">useState</span>(value)

Â Â <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
Â Â Â Â <span class="hljs-comment">// è®¾ç½®å®šæ—¶å™¨</span>
Â Â Â Â <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
Â Â Â Â Â Â <span class="hljs-title function_">setDebouncedValue</span>(value)
Â Â Â Â }, delay)

Â Â Â Â <span class="hljs-comment">// æ¸…ç†å‡½æ•°ï¼šå€¼å˜åŒ–æ—¶æ¸…é™¤ä¸Šä¸€ä¸ªå®šæ—¶å™¨</span>
Â Â Â Â <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
Â Â Â Â Â Â <span class="hljs-built_in">clearTimeout</span>(timer)
Â Â Â Â }
Â Â }, [value, delay])

Â Â <span class="hljs-keyword">return</span> debouncedValue
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> useDebounce
</code></pre>
<p><strong>ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">SearchComponent</span>() {
Â Â const <span class="hljs-selector-attr">[searchTerm, setSearchTerm]</span> = <span class="hljs-built_in">useState</span>("")
Â Â const <span class="hljs-selector-attr">[results, setResults]</span> = <span class="hljs-built_in">useState</span>([])
Â Â const <span class="hljs-selector-attr">[loading, setLoading]</span> = <span class="hljs-built_in">useState</span>(false)

Â Â <span class="hljs-comment">// é˜²æŠ–å¤„ç†ï¼šç”¨æˆ·åœæ­¢è¾“å…¥ 500ms åæ‰è§¦å‘</span>
Â Â const debouncedSearchTerm = <span class="hljs-built_in">useDebounce</span>(searchTerm, <span class="hljs-number">500</span>)

Â Â <span class="hljs-built_in">useEffect</span>(() =&gt; {
Â Â Â Â if (debouncedSearchTerm) {
Â Â Â Â Â Â <span class="hljs-built_in">setLoading</span>(true)
Â Â Â Â Â Â <span class="hljs-comment">// æ¨¡æ‹Ÿ API è¯·æ±‚</span>
Â Â Â Â Â Â <span class="hljs-built_in">fetch</span>(`/api/search?q=${debouncedSearchTerm}`)
Â Â Â Â Â Â Â Â <span class="hljs-selector-class">.then</span>((res) =&gt; res<span class="hljs-selector-class">.json</span>())
Â Â Â Â Â Â Â Â <span class="hljs-selector-class">.then</span>((data) =&gt; {
Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">setResults</span>(data)
Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">setLoading</span>(false)
Â Â Â Â Â Â Â Â })
Â Â Â Â } else {
Â Â Â Â Â Â <span class="hljs-built_in">setResults</span>([])
Â Â Â Â }
Â Â }, <span class="hljs-selector-attr">[debouncedSearchTerm]</span>) <span class="hljs-comment">// åªåœ¨é˜²æŠ–å€¼å˜åŒ–æ—¶è§¦å‘</span>

Â Â return (
Â Â Â Â &lt;div&gt;
Â Â Â Â Â Â &lt;input
Â Â Â Â Â Â Â Â type='text'
Â Â Â Â Â Â Â Â placeholder='æœç´¢...'
Â Â Â Â Â Â Â Â value={searchTerm}
Â Â Â Â Â Â Â Â onChange={(e) =&gt; <span class="hljs-built_in">setSearchTerm</span>(e.target.value)}
Â Â Â Â Â Â /&gt;

Â Â Â Â Â Â {loading &amp;&amp; &lt;<span class="hljs-selector-tag">p</span>&gt;æœç´¢ä¸­...&lt;/<span class="hljs-selector-tag">p</span>&gt;}

Â Â Â Â Â Â &lt;<span class="hljs-selector-tag">ul</span>&gt;
Â Â Â Â Â Â Â Â {results<span class="hljs-selector-class">.map</span>((item) =&gt; (
Â Â Â Â Â Â Â Â Â Â &lt;li key={item.id}&gt;{item.name}&lt;/li&gt;
Â Â Â Â Â Â Â Â ))}
Â Â Â Â Â Â &lt;/<span class="hljs-selector-tag">ul</span>&gt;
Â Â Â Â &lt;/<span class="hljs-selector-tag">div</span>&gt;
Â Â )
}
</code></pre>
<p><strong>è¿›é˜¶ç‰ˆï¼šå¸¦å›è°ƒçš„é˜²æŠ–</strong></p>
<pre><code class="hljs language-scss" lang="scss">import { useCallback, useRef, useEffect } from "react"

<span class="hljs-comment">/**
Â * é˜²æŠ–å‡½æ•° Hookï¼šè¿”å›ä¸€ä¸ªé˜²æŠ–å¤„ç†åçš„å‡½æ•°
Â * @param {Function} callback - éœ€è¦é˜²æŠ–çš„å›è°ƒå‡½æ•°
Â * @param {number} delay - å»¶è¿Ÿæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
Â * @returns {Function} é˜²æŠ–åçš„å‡½æ•°
Â */</span>
function <span class="hljs-built_in">useDebouncedCallback</span>(callback, delay = <span class="hljs-number">500</span>) {
Â Â const timeoutRef = <span class="hljs-built_in">useRef</span>(null)
Â Â const callbackRef = <span class="hljs-built_in">useRef</span>(callback)

Â Â <span class="hljs-comment">// ä¿æŒ callback æœ€æ–°</span>
Â Â <span class="hljs-built_in">useEffect</span>(() =&gt; {
Â Â Â Â callbackRef<span class="hljs-selector-class">.current</span> = callback
Â Â }, <span class="hljs-selector-attr">[callback]</span>)

Â Â <span class="hljs-comment">// æ¸…ç†å®šæ—¶å™¨</span>
Â Â <span class="hljs-built_in">useEffect</span>(() =&gt; {
Â Â Â Â return () =&gt; {
Â Â Â Â Â Â if (timeoutRef.current) {
Â Â Â Â Â Â Â Â <span class="hljs-built_in">clearTimeout</span>(timeoutRef.current)
Â Â Â Â Â Â }
Â Â Â Â }
Â Â }, <span class="hljs-selector-attr">[]</span>)

Â Â const debouncedCallback = <span class="hljs-built_in">useCallback</span>(
Â Â Â Â (...args) =&gt; {
Â Â Â Â Â Â if (timeoutRef.current) {
Â Â Â Â Â Â Â Â <span class="hljs-built_in">clearTimeout</span>(timeoutRef.current)
Â Â Â Â Â Â }

Â Â Â Â Â Â timeoutRef<span class="hljs-selector-class">.current</span> = <span class="hljs-built_in">setTimeout</span>(() =&gt; {
Â Â Â Â Â Â Â Â callbackRef<span class="hljs-selector-class">.current</span>(...args)
Â Â Â Â Â Â }, delay)
Â Â Â Â },
Â Â Â Â <span class="hljs-selector-attr">[delay]</span>
Â Â )

Â Â return debouncedCallback
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
function <span class="hljs-built_in">SearchWithCallback</span>() {
Â Â const <span class="hljs-selector-attr">[results, setResults]</span> = <span class="hljs-built_in">useState</span>([])

Â Â const handleSearch = <span class="hljs-built_in">useDebouncedCallback</span>((term) =&gt; {
Â Â Â Â console<span class="hljs-selector-class">.log</span>("æœç´¢:", term)
Â Â Â Â <span class="hljs-comment">// å‘èµ·è¯·æ±‚...</span>
Â Â }, <span class="hljs-number">500</span>)

Â Â return (
Â Â Â Â &lt;input
Â Â Â Â Â Â type='text'
Â Â Â Â Â Â onChange={(e) =&gt; <span class="hljs-built_in">handleSearch</span>(e.target.value)}
Â Â Â Â Â Â placeholder='è¾“å…¥æœç´¢...'
Â Â Â Â /&gt;
Â Â )
}
</code></pre>
<hr/>
<h3 data-id="heading-7">Hook #3ï¼šuseFetch â€”â€” æ•°æ®è¯·æ±‚ã®ç‘å£«å†›åˆ€</h3>
<p><strong>ç—›ç‚¹ï¼š</strong> æ¯ä¸ªç»„ä»¶éƒ½è¦å†™ loadingã€errorã€data ä¸‰ä»¶å¥—ï¼Œçƒ¦æ­»äº†ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">import { useState, useEffect, useCallback, useRef } from "react"

<span class="hljs-comment">/**
Â * æ•°æ®è¯·æ±‚ Hook
Â * @param {string} url - è¯·æ±‚åœ°å€
Â * @param {object} options - fetch é€‰é¡¹
Â * @returns {object} { data, loading, error, refetch }
Â */</span>
function <span class="hljs-built_in">useFetch</span>(url, options = {}) {
Â Â const <span class="hljs-selector-attr">[data, setData]</span> = <span class="hljs-built_in">useState</span>(null)
Â Â const <span class="hljs-selector-attr">[loading, setLoading]</span> = <span class="hljs-built_in">useState</span>(true)
Â Â const <span class="hljs-selector-attr">[error, setError]</span> = <span class="hljs-built_in">useState</span>(null)

Â Â <span class="hljs-comment">// ç”¨ ref å­˜å‚¨ optionsï¼Œé¿å…æ— é™å¾ªç¯</span>
Â Â const optionsRef = <span class="hljs-built_in">useRef</span>(options)
Â Â optionsRef<span class="hljs-selector-class">.current</span> = options

Â Â const fetchData = <span class="hljs-built_in">useCallback</span>(async () =&gt; {
Â Â Â Â <span class="hljs-built_in">setLoading</span>(true)
Â Â Â Â <span class="hljs-built_in">setError</span>(null)

Â Â Â Â try {
Â Â Â Â Â Â const response = await <span class="hljs-built_in">fetch</span>(url, optionsRef.current)

Â Â Â Â Â Â if (!response.ok) {
Â Â Â Â Â Â Â Â throw new <span class="hljs-built_in">Error</span>(`HTTP error! status: ${response.status}`)
Â Â Â Â Â Â }

Â Â Â Â Â Â const result = await response<span class="hljs-selector-class">.json</span>()
Â Â Â Â Â Â <span class="hljs-built_in">setData</span>(result)
Â Â Â Â } catch (err) {
Â Â Â Â Â Â <span class="hljs-built_in">setError</span>(err.message || "è¯·æ±‚å¤±è´¥")
Â Â Â Â } finally {
Â Â Â Â Â Â <span class="hljs-built_in">setLoading</span>(false)
Â Â Â Â }
Â Â }, <span class="hljs-selector-attr">[url]</span>)

Â Â <span class="hljs-built_in">useEffect</span>(() =&gt; {
Â Â Â Â <span class="hljs-built_in">fetchData</span>()
Â Â }, <span class="hljs-selector-attr">[fetchData]</span>)

Â Â <span class="hljs-comment">// æ‰‹åŠ¨é‡æ–°è¯·æ±‚</span>
Â Â const refetch = <span class="hljs-built_in">useCallback</span>(() =&gt; {
Â Â Â Â <span class="hljs-built_in">fetchData</span>()
Â Â }, <span class="hljs-selector-attr">[fetchData]</span>)

Â Â return { data, loading, error, refetch }
}

export default useFetch
</code></pre>
<p><strong>ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params">{ userId }</span>) {
Â Â <span class="hljs-keyword">const</span> {
Â Â Â Â <span class="hljs-attr">data</span>: user,
Â Â Â Â loading,
Â Â Â Â error,
Â Â Â Â refetch,
Â Â } = <span class="hljs-title function_">useFetch</span>(<span class="hljs-string">`https://jsonplaceholder.typicode.com/users/<span class="hljs-subst">${userId}</span>`</span>)

Â Â <span class="hljs-keyword">if</span> (loading) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'skeleton'</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
Â Â <span class="hljs-keyword">if</span> (error) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'error'</span>&gt;</span>é”™è¯¯ï¼š{error}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
Â Â <span class="hljs-keyword">if</span> (!user) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>

Â Â <span class="hljs-keyword">return</span> (
Â Â Â Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'user-profile'</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>{user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ğŸ“§ {user.email}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ğŸ“± {user.phone}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ğŸ¢ {user.company?.name}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{refetch}</span>&gt;</span>åˆ·æ–°æ•°æ®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
Â Â )
}
</code></pre>
<p><strong>è¿›é˜¶ç‰ˆï¼šæ”¯æŒç¼“å­˜å’Œè‡ªåŠ¨é‡è¯•</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState, useEffect, useCallback, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>

<span class="hljs-comment">// ç®€å•çš„å†…å­˜ç¼“å­˜</span>
<span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>()

<span class="hljs-comment">/**
Â * å¢å¼ºç‰ˆæ•°æ®è¯·æ±‚ Hook
Â * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">url</span> - è¯·æ±‚åœ°å€
Â * <span class="hljs-doctag">@param</span> {<span class="hljs-type">object</span>} <span class="hljs-variable">config</span> - é…ç½®é¡¹
Â */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useFetchAdvanced</span>(<span class="hljs-params">url, config = {}</span>) {
Â Â <span class="hljs-keyword">const</span> {
Â Â Â Â enabled = <span class="hljs-literal">true</span>, <span class="hljs-comment">// æ˜¯å¦å¯ç”¨è¯·æ±‚</span>
Â Â Â Â cacheTime = <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>, <span class="hljs-comment">// ç¼“å­˜æ—¶é—´ï¼ˆé»˜è®¤ 5 åˆ†é’Ÿï¼‰</span>
Â Â Â Â retry = <span class="hljs-number">3</span>, <span class="hljs-comment">// é‡è¯•æ¬¡æ•°</span>
Â Â Â Â retryDelay = <span class="hljs-number">1000</span>, <span class="hljs-comment">// é‡è¯•å»¶è¿Ÿ</span>
Â Â Â Â onSuccess, <span class="hljs-comment">// æˆåŠŸå›è°ƒ</span>
Â Â Â Â onError, <span class="hljs-comment">// å¤±è´¥å›è°ƒ</span>
Â Â } = config

Â Â <span class="hljs-keyword">const</span> [state, setState] = <span class="hljs-title function_">useState</span>({
Â Â Â Â <span class="hljs-attr">data</span>: <span class="hljs-literal">null</span>,
Â Â Â Â <span class="hljs-attr">loading</span>: enabled,
Â Â Â Â <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span>,
Â Â })

Â Â <span class="hljs-keyword">const</span> retryCountRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-number">0</span>)

Â Â <span class="hljs-keyword">const</span> fetchData = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> () =&gt; {
Â Â Â Â <span class="hljs-comment">// æ£€æŸ¥ç¼“å­˜</span>
Â Â Â Â <span class="hljs-keyword">const</span> cached = cache.<span class="hljs-title function_">get</span>(url)
Â Â Â Â <span class="hljs-keyword">if</span> (cached &amp;&amp; <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - cached.<span class="hljs-property">timestamp</span> &lt; cacheTime) {
Â Â Â Â Â Â <span class="hljs-title function_">setState</span>({ <span class="hljs-attr">data</span>: cached.<span class="hljs-property">data</span>, <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span> })
Â Â Â Â Â Â <span class="hljs-keyword">return</span>
Â Â Â Â }

Â Â Â Â <span class="hljs-title function_">setState</span>(<span class="hljs-function">(<span class="hljs-params">prev</span>) =&gt;</span> ({ ...prev, <span class="hljs-attr">loading</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span> }))

Â Â Â Â <span class="hljs-keyword">try</span> {
Â Â Â Â Â Â <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url)

Â Â Â Â Â Â <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`HTTP <span class="hljs-subst">${response.status}</span>`</span>)
Â Â Â Â Â Â }

Â Â Â Â Â Â <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>()

Â Â Â Â Â Â <span class="hljs-comment">// å­˜å…¥ç¼“å­˜</span>
Â Â Â Â Â Â cache.<span class="hljs-title function_">set</span>(url, { data, <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() })

Â Â Â Â Â Â <span class="hljs-title function_">setState</span>({ data, <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span> })
Â Â Â Â Â Â retryCountRef.<span class="hljs-property">current</span> = <span class="hljs-number">0</span>
Â Â Â Â Â Â onSuccess?.(data)
Â Â Â Â } <span class="hljs-keyword">catch</span> (err) {
Â Â Â Â Â Â <span class="hljs-comment">// é‡è¯•é€»è¾‘</span>
Â Â Â Â Â Â <span class="hljs-keyword">if</span> (retryCountRef.<span class="hljs-property">current</span> &lt; retry) {
Â Â Â Â Â Â Â Â retryCountRef.<span class="hljs-property">current</span>++
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">`è¯·æ±‚å¤±è´¥ï¼Œ<span class="hljs-subst">${retryDelay}</span>ms åé‡è¯• (<span class="hljs-subst">${retryCountRef.current}</span>/<span class="hljs-subst">${retry}</span>)`</span>
Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â <span class="hljs-built_in">setTimeout</span>(fetchData, retryDelay)
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>
Â Â Â Â Â Â }

Â Â Â Â Â Â <span class="hljs-title function_">setState</span>({ <span class="hljs-attr">data</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">error</span>: err.<span class="hljs-property">message</span> })
Â Â Â Â Â Â onError?.(err)
Â Â Â Â }
Â Â }, [url, cacheTime, retry, retryDelay, onSuccess, onError])

Â Â <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
Â Â Â Â <span class="hljs-keyword">if</span> (enabled) {
Â Â Â Â Â Â <span class="hljs-title function_">fetchData</span>()
Â Â Â Â }
Â Â }, [enabled, fetchData])

Â Â <span class="hljs-keyword">return</span> { ...state, <span class="hljs-attr">refetch</span>: fetchData }
}
</code></pre>
<hr/>
<h3 data-id="heading-8">Hook #4ï¼šuseToggle â€”â€” å¸ƒå°”å€¼ã®ä¼˜é›…åˆ‡æ¢</h3>
<p><strong>ç—›ç‚¹ï¼š</strong> <code>setIsOpen(!isOpen)</code> å†™äº† 100 éï¼Œæ‰‹éƒ½é…¸äº†ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">import { useState, useCallback } from "react"

<span class="hljs-comment">/**
Â * å¸ƒå°”å€¼åˆ‡æ¢ Hook
Â * @param {boolean} initialValue - åˆå§‹å€¼
Â * @returns {[boolean, Function, Function, Function]} [å€¼, åˆ‡æ¢, è®¾ä¸ºtrue, è®¾ä¸ºfalse]
Â */</span>
function <span class="hljs-built_in">useToggle</span>(initialValue = false) {
Â Â const <span class="hljs-selector-attr">[value, setValue]</span> = <span class="hljs-built_in">useState</span>(initialValue)

Â Â const toggle = <span class="hljs-built_in">useCallback</span>(() =&gt; <span class="hljs-built_in">setValue</span>((v) =&gt; !v), <span class="hljs-selector-attr">[]</span>)
Â Â const setTrue = <span class="hljs-built_in">useCallback</span>(() =&gt; <span class="hljs-built_in">setValue</span>(true), <span class="hljs-selector-attr">[]</span>)
Â Â const setFalse = <span class="hljs-built_in">useCallback</span>(() =&gt; <span class="hljs-built_in">setValue</span>(false), <span class="hljs-selector-attr">[]</span>)

Â Â return <span class="hljs-selector-attr">[value, toggle, setTrue, setFalse]</span>
}

export default useToggle
</code></pre>
<p><strong>ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Modal</span>(<span class="hljs-params"/>) {
Â Â <span class="hljs-keyword">const</span> [isOpen, toggle, open, close] = <span class="hljs-title function_">useToggle</span>(<span class="hljs-literal">false</span>)
Â Â <span class="hljs-keyword">const</span> [isDarkMode, toggleDarkMode] = <span class="hljs-title function_">useToggle</span>(<span class="hljs-literal">false</span>)

Â Â <span class="hljs-keyword">return</span> (
Â Â Â Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{isDarkMode</span> ? "<span class="hljs-attr">dark</span>" <span class="hljs-attr">:</span> "<span class="hljs-attr">light</span>"}&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{toggleDarkMode}</span>&gt;</span>
Â Â Â Â Â Â Â Â {isDarkMode ? "ğŸŒ™" : "â˜€ï¸"} åˆ‡æ¢ä¸»é¢˜
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{open}</span>&gt;</span>æ‰“å¼€å¼¹çª—<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

Â Â Â Â Â Â {isOpen &amp;&amp; (
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'modal-overlay'</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{close}</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'modal'</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{(e)</span> =&gt;</span> e.stopPropagation()}&gt;
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æˆ‘æ˜¯å¼¹çª—<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç‚¹å‡»é®ç½©å±‚æˆ–æŒ‰é’®å…³é—­<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{close}</span>&gt;</span>å…³é—­<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â )}
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
Â Â )
}
</code></pre>
<hr/>
<h3 data-id="heading-9">Hook #5ï¼šuseClickOutside â€”â€” ç‚¹å‡»å¤–éƒ¨å…³é—­ã®ç¥å™¨</h3>
<p><strong>ç—›ç‚¹ï¼š</strong> ä¸‹æ‹‰èœå•ã€å¼¹çª—ç‚¹å‡»å¤–éƒ¨å…³é—­ï¼Œæ¯æ¬¡éƒ½è¦å†™ä¸€å †äº‹ä»¶ç›‘å¬ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useEffect, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>

<span class="hljs-comment">/**
Â * ç‚¹å‡»å…ƒç´ å¤–éƒ¨æ—¶è§¦å‘å›è°ƒ
Â * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} <span class="hljs-variable">callback</span> - ç‚¹å‡»å¤–éƒ¨æ—¶çš„å›è°ƒå‡½æ•°
Â * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">React.RefObject</span>} éœ€è¦ç»‘å®šåˆ°ç›®æ ‡å…ƒç´ çš„ ref
Â */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useClickOutside</span>(<span class="hljs-params">callback</span>) {
Â Â <span class="hljs-keyword">const</span> ref = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>)

Â Â <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
Â Â Â Â <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params">event</span>) =&gt; {
Â Â Â Â Â Â <span class="hljs-comment">// å¦‚æœç‚¹å‡»çš„ä¸æ˜¯ ref å…ƒç´ å†…éƒ¨ï¼Œåˆ™è§¦å‘å›è°ƒ</span>
Â Â Â Â Â Â <span class="hljs-keyword">if</span> (ref.<span class="hljs-property">current</span> &amp;&amp; !ref.<span class="hljs-property">current</span>.<span class="hljs-title function_">contains</span>(event.<span class="hljs-property">target</span>)) {
Â Â Â Â Â Â Â Â <span class="hljs-title function_">callback</span>(event)
Â Â Â Â Â Â }
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">// ä½¿ç”¨ mousedown è€Œä¸æ˜¯ clickï¼Œå“åº”æ›´å¿«</span>
Â Â Â Â <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClick)
Â Â Â Â <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"touchstart"</span>, handleClick)

Â Â Â Â <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
Â Â Â Â Â Â <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClick)
Â Â Â Â Â Â <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"touchstart"</span>, handleClick)
Â Â Â Â }
Â Â }, [callback])

Â Â <span class="hljs-keyword">return</span> ref
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> useClickOutside
</code></pre>
<p><strong>ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Dropdown</span>(<span class="hljs-params"/>) {
Â Â <span class="hljs-keyword">const</span> [isOpen, setIsOpen] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>)

Â Â <span class="hljs-comment">// ç‚¹å‡»ä¸‹æ‹‰èœå•å¤–éƒ¨æ—¶å…³é—­</span>
Â Â <span class="hljs-keyword">const</span> dropdownRef = <span class="hljs-title function_">useClickOutside</span>(<span class="hljs-function">() =&gt;</span> {
Â Â Â Â <span class="hljs-title function_">setIsOpen</span>(<span class="hljs-literal">false</span>)
Â Â })

Â Â <span class="hljs-keyword">return</span> (
Â Â Â Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'dropdown-container'</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{dropdownRef}</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsOpen(!isOpen)}&gt;
Â Â Â Â Â Â Â Â é€‰æ‹©é€‰é¡¹ {isOpen ? "â–²" : "â–¼"}
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

Â Â Â Â Â Â {isOpen &amp;&amp; (
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'dropdown-menu'</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsOpen(false)}&gt;é€‰é¡¹ 1<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsOpen(false)}&gt;é€‰é¡¹ 2<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsOpen(false)}&gt;é€‰é¡¹ 3<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
Â Â Â Â Â Â )}
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
Â Â )
}
</code></pre>
<p><strong>è¿›é˜¶ï¼šæ”¯æŒå¤šä¸ª ref</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useEffect, useRef, useCallback } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>

<span class="hljs-comment">/**
Â * æ”¯æŒå¤šä¸ªå…ƒç´ çš„ç‚¹å‡»å¤–éƒ¨æ£€æµ‹
Â * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} <span class="hljs-variable">callback</span> - ç‚¹å‡»å¤–éƒ¨æ—¶çš„å›è°ƒ
Â * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Function</span>} è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè°ƒç”¨å®ƒè·å– ref
Â */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useClickOutsideMultiple</span>(<span class="hljs-params">callback</span>) {
Â Â <span class="hljs-keyword">const</span> refs = <span class="hljs-title function_">useRef</span>([])

Â Â <span class="hljs-keyword">const</span> addRef = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">element</span>) =&gt;</span> {
Â Â Â Â <span class="hljs-keyword">if</span> (element &amp;&amp; !refs.<span class="hljs-property">current</span>.<span class="hljs-title function_">includes</span>(element)) {
Â Â Â Â Â Â refs.<span class="hljs-property">current</span>.<span class="hljs-title function_">push</span>(element)
Â Â Â Â }
Â Â }, [])

Â Â <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
Â Â Â Â <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params">event</span>) =&gt; {
Â Â Â Â Â Â <span class="hljs-keyword">const</span> isOutside = refs.<span class="hljs-property">current</span>.<span class="hljs-title function_">every</span>(
Â Â Â Â Â Â Â Â <span class="hljs-function">(<span class="hljs-params">ref</span>) =&gt;</span> ref &amp;&amp; !ref.<span class="hljs-title function_">contains</span>(event.<span class="hljs-property">target</span>)
Â Â Â Â Â Â )

Â Â Â Â Â Â <span class="hljs-keyword">if</span> (isOutside) {
Â Â Â Â Â Â Â Â <span class="hljs-title function_">callback</span>(event)
Â Â Â Â Â Â }
Â Â Â Â }

Â Â Â Â <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClick)
Â Â Â Â <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousedown"</span>, handleClick)
Â Â }, [callback])

Â Â <span class="hljs-keyword">return</span> addRef
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹ï¼šå¼¹çª— + è§¦å‘æŒ‰é’®éƒ½ä¸ç®—"å¤–éƒ¨"</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">PopoverWithTrigger</span>(<span class="hljs-params"/>) {
Â Â <span class="hljs-keyword">const</span> [isOpen, setIsOpen] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>)
Â Â <span class="hljs-keyword">const</span> addRef = <span class="hljs-title function_">useClickOutsideMultiple</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setIsOpen</span>(<span class="hljs-literal">false</span>))

Â Â <span class="hljs-keyword">return</span> (
Â Â Â Â <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{addRef}</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsOpen(!isOpen)}&gt;
Â Â Â Â Â Â Â Â è§¦å‘æŒ‰é’®
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

Â Â Â Â Â Â {isOpen &amp;&amp; (
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{addRef}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'popover'</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â ç‚¹å‡»è¿™é‡Œä¸ä¼šå…³é—­
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â )}
Â Â Â Â <span class="hljs-tag">&lt;/&gt;</span></span>
Â Â )
}
</code></pre>
<hr/>
<h3 data-id="heading-10">Hook #6ï¼šusePrevious â€”â€” è·å–ä¸Šä¸€æ¬¡çš„å€¼</h3>
<p><strong>ç—›ç‚¹ï¼š</strong> æƒ³å¯¹æ¯”æ–°æ—§å€¼åšä¸€äº›æ“ä½œï¼Œä½† React ä¸ç»™ä½ ä¸Šä¸€æ¬¡çš„å€¼ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useRef, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>

<span class="hljs-comment">/**
Â * è·å–ä¸Šä¸€æ¬¡æ¸²æŸ“æ—¶çš„å€¼
Â * <span class="hljs-doctag">@param</span> {<span class="hljs-type">any</span>} <span class="hljs-variable">value</span> - å½“å‰å€¼
Â * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">any</span>} ä¸Šä¸€æ¬¡çš„å€¼
Â */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">usePrevious</span>(<span class="hljs-params">value</span>) {
Â Â <span class="hljs-keyword">const</span> ref = <span class="hljs-title function_">useRef</span>()

Â Â <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
Â Â Â Â ref.<span class="hljs-property">current</span> = value
Â Â }, [value])

Â Â <span class="hljs-comment">// è¿”å›ä¸Šä¸€æ¬¡çš„å€¼ï¼ˆåœ¨ useEffect æ›´æ–°ä¹‹å‰ï¼‰</span>
Â Â <span class="hljs-keyword">return</span> ref.<span class="hljs-property">current</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> usePrevious
</code></pre>
<p><strong>ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"/>) {
Â Â <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)
Â Â <span class="hljs-keyword">const</span> prevCount = <span class="hljs-title function_">usePrevious</span>(count)

Â Â <span class="hljs-keyword">return</span> (
Â Â Â Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å½“å‰å€¼ï¼š{count}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä¸Šä¸€æ¬¡ï¼š{prevCount ?? "æ— "}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
Â Â Â Â Â Â Â Â å˜åŒ–è¶‹åŠ¿ï¼š
Â Â Â Â Â Â Â Â {prevCount !== undefined &amp;&amp;
Â Â Â Â Â Â Â Â Â Â (count &gt; prevCount
Â Â Â Â Â Â Â Â Â Â Â Â ? "ğŸ“ˆ ä¸Šå‡"
Â Â Â Â Â Â Â Â Â Â Â Â : count &lt; prevCount
Â Â Â Â Â Â Â Â Â Â Â Â ? "ğŸ“‰ ä¸‹é™"
Â Â Â Â Â Â Â Â Â Â Â Â : "â¡ï¸ ä¸å˜")}
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount((c) =&gt; c + 1)}&gt;+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount((c) =&gt; c - 1)}&gt;-1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
Â Â )
}
</code></pre>
<p><strong>å®é™…åº”ç”¨ï¼šæ£€æµ‹ props å˜åŒ–</strong></p>
<pre><code class="hljs language-scss" lang="scss">function <span class="hljs-built_in">UserProfile</span>({ userId }) {
Â Â const prevUserId = <span class="hljs-built_in">usePrevious</span>(userId)
Â Â const <span class="hljs-selector-attr">[user, setUser]</span> = <span class="hljs-built_in">useState</span>(null)

Â Â <span class="hljs-built_in">useEffect</span>(() =&gt; {
Â Â Â Â <span class="hljs-comment">// åªæœ‰å½“ userId çœŸæ­£å˜åŒ–æ—¶æ‰é‡æ–°è¯·æ±‚</span>
Â Â Â Â if (userId !== prevUserId) {
Â Â Â Â Â Â console<span class="hljs-selector-class">.log</span>(`ç”¨æˆ· ID ä» ${prevUserId} å˜ä¸º ${userId}`)
Â Â Â Â Â Â <span class="hljs-built_in">fetchUser</span>(userId)<span class="hljs-selector-class">.then</span>(setUser)
Â Â Â Â }
Â Â }, <span class="hljs-selector-attr">[userId, prevUserId]</span>)

Â Â return &lt;<span class="hljs-selector-tag">div</span>&gt;{user?<span class="hljs-selector-class">.name</span>}&lt;/<span class="hljs-selector-tag">div</span>&gt;
}
</code></pre>
<hr/>
<h3 data-id="heading-11">Hook #7ï¼šuseMediaQuery â€”â€” å“åº”å¼ã®ä¼˜é›…æ–¹æ¡ˆ</h3>
<p><strong>ç—›ç‚¹ï¼š</strong> CSS åª’ä½“æŸ¥è¯¢å¾ˆæ–¹ä¾¿ï¼Œä½† JS é‡Œæƒ³æ ¹æ®å±å¹•å°ºå¯¸åšé€»è¾‘åˆ¤æ–­å°±éº»çƒ¦äº†ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>

<span class="hljs-comment">/**
Â * åª’ä½“æŸ¥è¯¢ Hook
Â * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">query</span> - CSS åª’ä½“æŸ¥è¯¢å­—ç¬¦ä¸²
Â * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">boolean</span>} æ˜¯å¦åŒ¹é…
Â */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useMediaQuery</span>(<span class="hljs-params">query</span>) {
Â Â <span class="hljs-keyword">const</span> [matches, setMatches] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> {
Â Â Â Â <span class="hljs-comment">// SSR ç¯å¢ƒä¸‹è¿”å› false</span>
Â Â Â Â <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> === <span class="hljs-string">"undefined"</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
Â Â Â Â <span class="hljs-keyword">return</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">matchMedia</span>(query).<span class="hljs-property">matches</span>
Â Â })

Â Â <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
Â Â Â Â <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> === <span class="hljs-string">"undefined"</span>) <span class="hljs-keyword">return</span>

Â Â Â Â <span class="hljs-keyword">const</span> mediaQuery = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">matchMedia</span>(query)

Â Â Â Â <span class="hljs-comment">// åˆå§‹åŒ–</span>
Â Â Â Â <span class="hljs-title function_">setMatches</span>(mediaQuery.<span class="hljs-property">matches</span>)

Â Â Â Â <span class="hljs-comment">// ç›‘å¬å˜åŒ–</span>
Â Â Â Â <span class="hljs-keyword">const</span> <span class="hljs-title function_">handler</span> = (<span class="hljs-params">event</span>) =&gt; <span class="hljs-title function_">setMatches</span>(event.<span class="hljs-property">matches</span>)

Â Â Â Â <span class="hljs-comment">// ç°ä»£æµè§ˆå™¨ç”¨ addEventListener</span>
Â Â Â Â <span class="hljs-keyword">if</span> (mediaQuery.<span class="hljs-property">addEventListener</span>) {
Â Â Â Â Â Â mediaQuery.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"change"</span>, handler)
Â Â Â Â Â Â <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> mediaQuery.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"change"</span>, handler)
Â Â Â Â } <span class="hljs-keyword">else</span> {
Â Â Â Â Â Â <span class="hljs-comment">// å…¼å®¹æ—§æµè§ˆå™¨</span>
Â Â Â Â Â Â mediaQuery.<span class="hljs-title function_">addListener</span>(handler)
Â Â Â Â Â Â <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> mediaQuery.<span class="hljs-title function_">removeListener</span>(handler)
Â Â Â Â }
Â Â }, [query])

Â Â <span class="hljs-keyword">return</span> matches
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> useMediaQuery
</code></pre>
<p><strong>ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ResponsiveComponent</span>(<span class="hljs-params"/>) {
Â Â <span class="hljs-keyword">const</span> isMobile = <span class="hljs-title function_">useMediaQuery</span>(<span class="hljs-string">"(max-width: 768px)"</span>)
Â Â <span class="hljs-keyword">const</span> isTablet = <span class="hljs-title function_">useMediaQuery</span>(<span class="hljs-string">"(min-width: 769px) and (max-width: 1024px)"</span>)
Â Â <span class="hljs-keyword">const</span> isDesktop = <span class="hljs-title function_">useMediaQuery</span>(<span class="hljs-string">"(min-width: 1025px)"</span>)
Â Â <span class="hljs-keyword">const</span> prefersDark = <span class="hljs-title function_">useMediaQuery</span>(<span class="hljs-string">"(prefers-color-scheme: dark)"</span>)

Â Â <span class="hljs-keyword">return</span> (
Â Â Â Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{prefersDark</span> ? "<span class="hljs-attr">dark-theme</span>" <span class="hljs-attr">:</span> "<span class="hljs-attr">light-theme</span>"}&gt;</span>
Â Â Â Â Â Â {isMobile &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">MobileNav</span> /&gt;</span>}
Â Â Â Â Â Â {isTablet &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">TabletNav</span> /&gt;</span>}
Â Â Â Â Â Â {isDesktop &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">DesktopNav</span> /&gt;</span>}

Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â å½“å‰è®¾å¤‡ï¼š{isMobile ? "ğŸ“± æ‰‹æœº" : isTablet ? "ğŸ“± å¹³æ¿" : "ğŸ’» æ¡Œé¢"}
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä¸»é¢˜åå¥½ï¼š{prefersDark ? "ğŸŒ™ æ·±è‰²" : "â˜€ï¸ æµ…è‰²"}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
Â Â )
}
</code></pre>
<p><strong>å°è£…å¸¸ç”¨æ–­ç‚¹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// hooks/useBreakpoint.js</span>
<span class="hljs-keyword">import</span> useMediaQuery <span class="hljs-keyword">from</span> <span class="hljs-string">"./useMediaQuery"</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useBreakpoint</span>(<span class="hljs-params"/>) {
Â Â <span class="hljs-keyword">const</span> breakpoints = {
Â Â Â Â <span class="hljs-attr">xs</span>: <span class="hljs-title function_">useMediaQuery</span>(<span class="hljs-string">"(max-width: 575px)"</span>),
Â Â Â Â <span class="hljs-attr">sm</span>: <span class="hljs-title function_">useMediaQuery</span>(<span class="hljs-string">"(min-width: 576px) and (max-width: 767px)"</span>),
Â Â Â Â <span class="hljs-attr">md</span>: <span class="hljs-title function_">useMediaQuery</span>(<span class="hljs-string">"(min-width: 768px) and (max-width: 991px)"</span>),
Â Â Â Â <span class="hljs-attr">lg</span>: <span class="hljs-title function_">useMediaQuery</span>(<span class="hljs-string">"(min-width: 992px) and (max-width: 1199px)"</span>),
Â Â Â Â <span class="hljs-attr">xl</span>: <span class="hljs-title function_">useMediaQuery</span>(<span class="hljs-string">"(min-width: 1200px)"</span>),
Â Â }

Â Â <span class="hljs-comment">// è¿”å›å½“å‰æ–­ç‚¹åç§°</span>
Â Â <span class="hljs-keyword">const</span> current =
Â Â Â Â <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(breakpoints).<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">[, matches]</span>) =&gt;</span> matches)?.[<span class="hljs-number">0</span>] || <span class="hljs-string">"xs"</span>

Â Â <span class="hljs-keyword">return</span> {
Â Â Â Â ...breakpoints,
Â Â Â Â current,
Â Â Â Â <span class="hljs-attr">isMobile</span>: breakpoints.<span class="hljs-property">xs</span> || breakpoints.<span class="hljs-property">sm</span>,
Â Â Â Â <span class="hljs-attr">isTablet</span>: breakpoints.<span class="hljs-property">md</span>,
Â Â Â Â <span class="hljs-attr">isDesktop</span>: breakpoints.<span class="hljs-property">lg</span> || breakpoints.<span class="hljs-property">xl</span>,
Â Â }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
Â Â <span class="hljs-keyword">const</span> { isMobile, isDesktop, current } = <span class="hljs-title function_">useBreakpoint</span>()

Â Â <span class="hljs-keyword">return</span> (
Â Â Â Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å½“å‰æ–­ç‚¹ï¼š{current}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
Â Â Â Â Â Â {isMobile ? <span class="hljs-tag">&lt;<span class="hljs-name">MobileLayout</span> /&gt;</span> : <span class="hljs-tag">&lt;<span class="hljs-name">DesktopLayout</span> /&gt;</span>}
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
Â Â )
}
</code></pre>
<hr/>
<h2 data-id="heading-12">ç¬¬ä¸‰ç« ï¼šHooks ç»„åˆã®è‰ºæœ¯</h2>
<h3 data-id="heading-13">3.1 ç»„åˆå¤šä¸ª Hooks è§£å†³å¤æ‚é—®é¢˜</h3>
<p><strong>åœºæ™¯ï¼š</strong> ä¸€ä¸ªå¸¦æœç´¢ã€åˆ†é¡µã€ç¼“å­˜çš„åˆ—è¡¨ç»„ä»¶</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useState, useEffect, useMemo } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>

<span class="hljs-comment">// ç»„åˆä½¿ç”¨å¤šä¸ªè‡ªå®šä¹‰ Hooks</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">useSearchableList</span>(<span class="hljs-params">fetchFn, options = {}</span>) {
Â Â <span class="hljs-keyword">const</span> { pageSize = <span class="hljs-number">10</span>, debounceMs = <span class="hljs-number">300</span> } = options

Â Â <span class="hljs-comment">// æœç´¢å…³é”®è¯</span>
Â Â <span class="hljs-keyword">const</span> [searchTerm, setSearchTerm] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">""</span>)
Â Â <span class="hljs-keyword">const</span> debouncedSearch = <span class="hljs-title function_">useDebounce</span>(searchTerm, debounceMs)

Â Â <span class="hljs-comment">// åˆ†é¡µ</span>
Â Â <span class="hljs-keyword">const</span> [page, setPage] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>)

Â Â <span class="hljs-comment">// æ•°æ®è¯·æ±‚</span>
Â Â <span class="hljs-keyword">const</span> { data, loading, error, refetch } = <span class="hljs-title function_">useFetch</span>(
Â Â Â Â <span class="hljs-string">`<span class="hljs-subst">${fetchFn}</span>?search=<span class="hljs-subst">${debouncedSearch}</span>&amp;page=<span class="hljs-subst">${page}</span>&amp;pageSize=<span class="hljs-subst">${pageSize}</span>`</span>
Â Â )

Â Â <span class="hljs-comment">// æœç´¢æ—¶é‡ç½®é¡µç </span>
Â Â <span class="hljs-keyword">const</span> prevSearch = <span class="hljs-title function_">usePrevious</span>(debouncedSearch)
Â Â <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
Â Â Â Â <span class="hljs-keyword">if</span> (prevSearch !== <span class="hljs-literal">undefined</span> &amp;&amp; prevSearch !== debouncedSearch) {
Â Â Â Â Â Â <span class="hljs-title function_">setPage</span>(<span class="hljs-number">1</span>)
Â Â Â Â }
Â Â }, [debouncedSearch, prevSearch])

Â Â <span class="hljs-comment">// è®¡ç®—æ€»é¡µæ•°</span>
Â Â <span class="hljs-keyword">const</span> totalPages = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
Â Â Â Â <span class="hljs-keyword">return</span> data?.<span class="hljs-property">total</span> ? <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(data.<span class="hljs-property">total</span> / pageSize) : <span class="hljs-number">0</span>
Â Â }, [data?.<span class="hljs-property">total</span>, pageSize])

Â Â <span class="hljs-keyword">return</span> {
Â Â Â Â <span class="hljs-comment">// æ•°æ®</span>
Â Â Â Â <span class="hljs-attr">items</span>: data?.<span class="hljs-property">items</span> || [],
Â Â Â Â <span class="hljs-attr">total</span>: data?.<span class="hljs-property">total</span> || <span class="hljs-number">0</span>,
Â Â Â Â loading,
Â Â Â Â error,

Â Â Â Â <span class="hljs-comment">// æœç´¢</span>
Â Â Â Â searchTerm,
Â Â Â Â setSearchTerm,

Â Â Â Â <span class="hljs-comment">// åˆ†é¡µ</span>
Â Â Â Â page,
Â Â Â Â setPage,
Â Â Â Â totalPages,
Â Â Â Â <span class="hljs-attr">hasNextPage</span>: page &lt; totalPages,
Â Â Â Â <span class="hljs-attr">hasPrevPage</span>: page &gt; <span class="hljs-number">1</span>,

Â Â Â Â <span class="hljs-comment">// æ“ä½œ</span>
Â Â Â Â refetch,
Â Â Â Â <span class="hljs-attr">nextPage</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setPage</span>(<span class="hljs-function">(<span class="hljs-params">p</span>) =&gt;</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(p + <span class="hljs-number">1</span>, totalPages)),
Â Â Â Â <span class="hljs-attr">prevPage</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setPage</span>(<span class="hljs-function">(<span class="hljs-params">p</span>) =&gt;</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(p - <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)),
Â Â }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserList</span>(<span class="hljs-params"/>) {
Â Â <span class="hljs-keyword">const</span> {
Â Â Â Â items,
Â Â Â Â loading,
Â Â Â Â error,
Â Â Â Â searchTerm,
Â Â Â Â setSearchTerm,
Â Â Â Â page,
Â Â Â Â totalPages,
Â Â Â Â hasNextPage,
Â Â Â Â hasPrevPage,
Â Â Â Â nextPage,
Â Â Â Â prevPage,
Â Â } = <span class="hljs-title function_">useSearchableList</span>(<span class="hljs-string">"/api/users"</span>, { <span class="hljs-attr">pageSize</span>: <span class="hljs-number">20</span> })

Â Â <span class="hljs-keyword">return</span> (
Â Â Â Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'user-list'</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
Â Â Â Â Â Â Â Â <span class="hljs-attr">type</span>=<span class="hljs-string">'text'</span>
Â Â Â Â Â Â Â Â <span class="hljs-attr">placeholder</span>=<span class="hljs-string">'æœç´¢ç”¨æˆ·...'</span>
Â Â Â Â Â Â Â Â <span class="hljs-attr">value</span>=<span class="hljs-string">{searchTerm}</span>
Â Â Â Â Â Â Â Â <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setSearchTerm(e.target.value)}
Â Â Â Â Â Â /&gt;

Â Â Â Â Â Â {loading &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'loading'</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}
Â Â Â Â Â Â {error &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'error'</span>&gt;</span>{error}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}

Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
Â Â Â Â Â Â Â Â {items.map((user) =&gt; (
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{user.id}</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â Â Â {user.name} - {user.email}
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
Â Â Â Â Â Â Â Â ))}
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>

Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'pagination'</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{prevPage}</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">{!hasPrevPage}</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â ä¸Šä¸€é¡µ
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â {page} / {totalPages}
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{nextPage}</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">{!hasNextPage}</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â ä¸‹ä¸€é¡µ
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
Â Â )
}
</code></pre>
<h3 data-id="heading-14">3.2 åˆ›å»º Hook å·¥å‚</h3>
<p><strong>åœºæ™¯ï¼š</strong> å¤šä¸ªè¡¨å•éƒ½éœ€è¦ç±»ä¼¼çš„éªŒè¯é€»è¾‘</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
Â * è¡¨å•éªŒè¯ Hook å·¥å‚
Â * <span class="hljs-doctag">@param</span> {<span class="hljs-type">object</span>} <span class="hljs-variable">validationRules</span> - éªŒè¯è§„åˆ™
Â * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Function</span>} è¿”å›ä¸€ä¸ªè‡ªå®šä¹‰ Hook
Â */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createFormValidation</span>(<span class="hljs-params">validationRules</span>) {
Â Â <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useFormValidation</span>(<span class="hljs-params">initialValues = {}</span>) {
Â Â Â Â <span class="hljs-keyword">const</span> [values, setValues] = <span class="hljs-title function_">useState</span>(initialValues)
Â Â Â Â <span class="hljs-keyword">const</span> [errors, setErrors] = <span class="hljs-title function_">useState</span>({})
Â Â Â Â <span class="hljs-keyword">const</span> [touched, setTouched] = <span class="hljs-title function_">useState</span>({})

Â Â Â Â <span class="hljs-comment">// éªŒè¯å•ä¸ªå­—æ®µ</span>
Â Â Â Â <span class="hljs-keyword">const</span> <span class="hljs-title function_">validateField</span> = (<span class="hljs-params">name, value</span>) =&gt; {
Â Â Â Â Â Â <span class="hljs-keyword">const</span> rules = validationRules[name]
Â Â Â Â Â Â <span class="hljs-keyword">if</span> (!rules) <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>

Â Â Â Â Â Â <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> rule <span class="hljs-keyword">of</span> rules) {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span> (rule.<span class="hljs-property">required</span> &amp;&amp; !value) {
Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span> rule.<span class="hljs-property">message</span> || <span class="hljs-string">"æ­¤å­—æ®µå¿…å¡«"</span>
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span> (rule.<span class="hljs-property">minLength</span> &amp;&amp; value.<span class="hljs-property">length</span> &lt; rule.<span class="hljs-property">minLength</span>) {
Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span> rule.<span class="hljs-property">message</span> || <span class="hljs-string">`æœ€å°‘ <span class="hljs-subst">${rule.minLength}</span> ä¸ªå­—ç¬¦`</span>
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span> (rule.<span class="hljs-property">maxLength</span> &amp;&amp; value.<span class="hljs-property">length</span> &gt; rule.<span class="hljs-property">maxLength</span>) {
Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span> rule.<span class="hljs-property">message</span> || <span class="hljs-string">`æœ€å¤š <span class="hljs-subst">${rule.maxLength}</span> ä¸ªå­—ç¬¦`</span>
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span> (rule.<span class="hljs-property">pattern</span> &amp;&amp; !rule.<span class="hljs-property">pattern</span>.<span class="hljs-title function_">test</span>(value)) {
Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span> rule.<span class="hljs-property">message</span> || <span class="hljs-string">"æ ¼å¼ä¸æ­£ç¡®"</span>
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span> (rule.<span class="hljs-property">validate</span> &amp;&amp; !rule.<span class="hljs-title function_">validate</span>(value, values)) {
Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span> rule.<span class="hljs-property">message</span> || <span class="hljs-string">"éªŒè¯å¤±è´¥"</span>
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â }
Â Â Â Â Â Â <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">// éªŒè¯æ‰€æœ‰å­—æ®µ</span>
Â Â Â Â <span class="hljs-keyword">const</span> <span class="hljs-title function_">validateAll</span> = (<span class="hljs-params"/>) =&gt; {
Â Â Â Â Â Â <span class="hljs-keyword">const</span> newErrors = {}
Â Â Â Â Â Â <span class="hljs-keyword">let</span> isValid = <span class="hljs-literal">true</span>

Â Â Â Â Â Â <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(validationRules).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">name</span>) =&gt;</span> {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">const</span> error = <span class="hljs-title function_">validateField</span>(name, values[name] || <span class="hljs-string">""</span>)
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span> (error) {
Â Â Â Â Â Â Â Â Â Â newErrors[name] = error
Â Â Â Â Â Â Â Â Â Â isValid = <span class="hljs-literal">false</span>
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â })

Â Â Â Â Â Â <span class="hljs-title function_">setErrors</span>(newErrors)
Â Â Â Â Â Â <span class="hljs-keyword">return</span> isValid
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">// å¤„ç†è¾“å…¥å˜åŒ–</span>
Â Â Â Â <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleChange</span> = (<span class="hljs-params">name</span>) =&gt; <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
Â Â Â Â Â Â <span class="hljs-keyword">const</span> value = e.<span class="hljs-property">target</span> ? e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span> : e
Â Â Â Â Â Â <span class="hljs-title function_">setValues</span>(<span class="hljs-function">(<span class="hljs-params">prev</span>) =&gt;</span> ({ ...prev, [name]: value }))

Â Â Â Â Â Â <span class="hljs-comment">// å®æ—¶éªŒè¯å·²è§¦ç¢°çš„å­—æ®µ</span>
Â Â Â Â Â Â <span class="hljs-keyword">if</span> (touched[name]) {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">const</span> error = <span class="hljs-title function_">validateField</span>(name, value)
Â Â Â Â Â Â Â Â <span class="hljs-title function_">setErrors</span>(<span class="hljs-function">(<span class="hljs-params">prev</span>) =&gt;</span> ({ ...prev, [name]: error }))
Â Â Â Â Â Â }
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">// å¤„ç†å¤±ç„¦</span>
Â Â Â Â <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleBlur</span> = (<span class="hljs-params">name</span>) =&gt; <span class="hljs-function">() =&gt;</span> {
Â Â Â Â Â Â <span class="hljs-title function_">setTouched</span>(<span class="hljs-function">(<span class="hljs-params">prev</span>) =&gt;</span> ({ ...prev, [name]: <span class="hljs-literal">true</span> }))
Â Â Â Â Â Â <span class="hljs-keyword">const</span> error = <span class="hljs-title function_">validateField</span>(name, values[name] || <span class="hljs-string">""</span>)
Â Â Â Â Â Â <span class="hljs-title function_">setErrors</span>(<span class="hljs-function">(<span class="hljs-params">prev</span>) =&gt;</span> ({ ...prev, [name]: error }))
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">// é‡ç½®è¡¨å•</span>
Â Â Â Â <span class="hljs-keyword">const</span> <span class="hljs-title function_">reset</span> = (<span class="hljs-params"/>) =&gt; {
Â Â Â Â Â Â <span class="hljs-title function_">setValues</span>(initialValues)
Â Â Â Â Â Â <span class="hljs-title function_">setErrors</span>({})
Â Â Â Â Â Â <span class="hljs-title function_">setTouched</span>({})
Â Â Â Â }

Â Â Â Â <span class="hljs-keyword">return</span> {
Â Â Â Â Â Â values,
Â Â Â Â Â Â errors,
Â Â Â Â Â Â touched,
Â Â Â Â Â Â handleChange,
Â Â Â Â Â Â handleBlur,
Â Â Â Â Â Â validateAll,
Â Â Â Â Â Â reset,
Â Â Â Â Â Â <span class="hljs-attr">isValid</span>: <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(errors).<span class="hljs-property">length</span> === <span class="hljs-number">0</span>,
Â Â Â Â Â Â <span class="hljs-attr">getFieldProps</span>: <span class="hljs-function">(<span class="hljs-params">name</span>) =&gt;</span> ({
Â Â Â Â Â Â Â Â <span class="hljs-attr">value</span>: values[name] || <span class="hljs-string">""</span>,
Â Â Â Â Â Â Â Â <span class="hljs-attr">onChange</span>: <span class="hljs-title function_">handleChange</span>(name),
Â Â Â Â Â Â Â Â <span class="hljs-attr">onBlur</span>: <span class="hljs-title function_">handleBlur</span>(name),
Â Â Â Â Â Â }),
Â Â Â Â }
Â Â }
}

<span class="hljs-comment">// åˆ›å»ºç™»å½•è¡¨å•éªŒè¯ Hook</span>
<span class="hljs-keyword">const</span> useLoginForm = <span class="hljs-title function_">createFormValidation</span>({
Â Â <span class="hljs-attr">email</span>: [
Â Â Â Â { <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">"è¯·è¾“å…¥é‚®ç®±"</span> },
Â Â Â Â { <span class="hljs-attr">pattern</span>: <span class="hljs-regexp">/^[^\s@]+@[^\s@]+.[^\s@]+$/</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">"é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"</span> },
Â Â ],
Â Â <span class="hljs-attr">password</span>: [
Â Â Â Â { <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">"è¯·è¾“å…¥å¯†ç "</span> },
Â Â Â Â { <span class="hljs-attr">minLength</span>: <span class="hljs-number">6</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">"å¯†ç è‡³å°‘ 6 ä½"</span> },
Â Â ],
})

<span class="hljs-comment">// åˆ›å»ºæ³¨å†Œè¡¨å•éªŒè¯ Hook</span>
<span class="hljs-keyword">const</span> useRegisterForm = <span class="hljs-title function_">createFormValidation</span>({
Â Â <span class="hljs-attr">username</span>: [
Â Â Â Â { <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">"è¯·è¾“å…¥ç”¨æˆ·å"</span> },
Â Â Â Â { <span class="hljs-attr">minLength</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">"ç”¨æˆ·åè‡³å°‘ 3 ä¸ªå­—ç¬¦"</span> },
Â Â Â Â { <span class="hljs-attr">maxLength</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">"ç”¨æˆ·åæœ€å¤š 20 ä¸ªå­—ç¬¦"</span> },
Â Â ],
Â Â <span class="hljs-attr">email</span>: [
Â Â Â Â { <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">"è¯·è¾“å…¥é‚®ç®±"</span> },
Â Â Â Â { <span class="hljs-attr">pattern</span>: <span class="hljs-regexp">/^[^\s@]+@[^\s@]+.[^\s@]+$/</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">"é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"</span> },
Â Â ],
Â Â <span class="hljs-attr">password</span>: [
Â Â Â Â { <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">"è¯·è¾“å…¥å¯†ç "</span> },
Â Â Â Â { <span class="hljs-attr">minLength</span>: <span class="hljs-number">8</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">"å¯†ç è‡³å°‘ 8 ä½"</span> },
Â Â Â Â {
Â Â Â Â Â Â <span class="hljs-attr">pattern</span>: <span class="hljs-regexp">/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/</span>,
Â Â Â Â Â Â <span class="hljs-attr">message</span>: <span class="hljs-string">"éœ€åŒ…å«å¤§å°å†™å­—æ¯å’Œæ•°å­—"</span>,
Â Â Â Â },
Â Â ],
Â Â <span class="hljs-attr">confirmPassword</span>: [
Â Â Â Â { <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">"è¯·ç¡®è®¤å¯†ç "</span> },
Â Â Â Â {
Â Â Â Â Â Â <span class="hljs-attr">validate</span>: <span class="hljs-function">(<span class="hljs-params">value, values</span>) =&gt;</span> value === values.<span class="hljs-property">password</span>,
Â Â Â Â Â Â <span class="hljs-attr">message</span>: <span class="hljs-string">"ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´"</span>,
Â Â Â Â },
Â Â ],
})

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">LoginForm</span>(<span class="hljs-params"/>) {
Â Â <span class="hljs-keyword">const</span> { values, errors, touched, getFieldProps, validateAll } = <span class="hljs-title function_">useLoginForm</span>()

Â Â <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = (<span class="hljs-params">e</span>) =&gt; {
Â Â Â Â e.<span class="hljs-title function_">preventDefault</span>()
Â Â Â Â <span class="hljs-keyword">if</span> (<span class="hljs-title function_">validateAll</span>()) {
Â Â Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æäº¤:"</span>, values)
Â Â Â Â Â Â <span class="hljs-comment">// å‘èµ·ç™»å½•è¯·æ±‚...</span>
Â Â Â Â }
Â Â }

Â Â <span class="hljs-keyword">return</span> (
Â Â Â Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'form-group'</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">'email'</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">'é‚®ç®±'</span> {<span class="hljs-attr">...getFieldProps</span>("<span class="hljs-attr">email</span>")} /&gt;</span>
Â Â Â Â Â Â Â Â {touched.email &amp;&amp; errors.email &amp;&amp; (
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'error'</span>&gt;</span>{errors.email}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
Â Â Â Â Â Â Â Â )}
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'form-group'</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">type</span>=<span class="hljs-string">'password'</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">placeholder</span>=<span class="hljs-string">'å¯†ç '</span>
Â Â Â Â Â Â Â Â Â Â {<span class="hljs-attr">...getFieldProps</span>("<span class="hljs-attr">password</span>")}
Â Â Â Â Â Â Â Â /&gt;</span>
Â Â Â Â Â Â Â Â {touched.password &amp;&amp; errors.password &amp;&amp; (
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'error'</span>&gt;</span>{errors.password}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
Â Â Â Â Â Â Â Â )}
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">'submit'</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
Â Â )
}
</code></pre>
<hr/>
<h2 data-id="heading-15">ç¬¬å››ç« ï¼šé¿å‘æŒ‡å—</h2>
<h3 data-id="heading-16">4.1 å¸¸è§é”™è¯¯ #1ï¼šåœ¨æ¡ä»¶è¯­å¥ä¸­è°ƒç”¨ Hook</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šæ¡ä»¶è°ƒç”¨ Hook</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">BadComponent</span>(<span class="hljs-params">{ shouldFetch }</span>) {
Â Â <span class="hljs-keyword">if</span> (shouldFetch) {
Â Â Â Â <span class="hljs-keyword">const</span> data = <span class="hljs-title function_">useFetch</span>(<span class="hljs-string">"/api/data"</span>) <span class="hljs-comment">// ğŸ’¥ æŠ¥é”™ï¼</span>
Â Â }
Â Â <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šHook å§‹ç»ˆè°ƒç”¨ï¼Œç”¨å‚æ•°æ§åˆ¶è¡Œä¸º</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">GoodComponent</span>(<span class="hljs-params">{ shouldFetch }</span>) {
Â Â <span class="hljs-keyword">const</span> { data } = <span class="hljs-title function_">useFetch</span>(<span class="hljs-string">"/api/data"</span>, { <span class="hljs-attr">enabled</span>: shouldFetch })
Â Â <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<h3 data-id="heading-17">4.2 å¸¸è§é”™è¯¯ #2ï¼šå¿˜è®°ä¾èµ–é¡¹</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šç¼ºå°‘ä¾èµ–é¡¹ï¼Œcallback æ°¸è¿œæ˜¯æ—§çš„</span>
function <span class="hljs-built_in">BadHook</span>(callback) {
Â Â <span class="hljs-built_in">useEffect</span>(() =&gt; {
Â Â Â Â window<span class="hljs-selector-class">.addEventListener</span>("resize", callback)
Â Â Â Â return () =&gt; window<span class="hljs-selector-class">.removeEventListener</span>("resize", callback)
Â Â }, <span class="hljs-selector-attr">[]</span>) <span class="hljs-comment">// callback å˜äº†ä¹Ÿä¸ä¼šæ›´æ–°ï¼</span>
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨ ref ä¿æŒæœ€æ–°å¼•ç”¨</span>
function <span class="hljs-built_in">GoodHook</span>(callback) {
Â Â const callbackRef = <span class="hljs-built_in">useRef</span>(callback)

Â Â <span class="hljs-built_in">useEffect</span>(() =&gt; {
Â Â Â Â callbackRef<span class="hljs-selector-class">.current</span> = callback
Â Â }, <span class="hljs-selector-attr">[callback]</span>)

Â Â <span class="hljs-built_in">useEffect</span>(() =&gt; {
Â Â Â Â const handler = (...args) =&gt; callbackRef<span class="hljs-selector-class">.current</span>(...args)
Â Â Â Â window<span class="hljs-selector-class">.addEventListener</span>("resize", handler)
Â Â Â Â return () =&gt; window<span class="hljs-selector-class">.removeEventListener</span>("resize", handler)
Â Â }, <span class="hljs-selector-attr">[]</span>)
}
</code></pre>
<h3 data-id="heading-18">4.3 å¸¸è§é”™è¯¯ #3ï¼šé—­åŒ…é™·é˜±</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šcount æ°¸è¿œæ˜¯ 0</span>
function <span class="hljs-built_in">BadCounter</span>() {
Â Â const <span class="hljs-selector-attr">[count, setCount]</span> = <span class="hljs-built_in">useState</span>(<span class="hljs-number">0</span>)

Â Â <span class="hljs-built_in">useEffect</span>(() =&gt; {
Â Â Â Â const timer = <span class="hljs-built_in">setInterval</span>(() =&gt; {
Â Â Â Â Â Â console<span class="hljs-selector-class">.log</span>(count) <span class="hljs-comment">// æ°¸è¿œæ‰“å° 0</span>
Â Â Â Â Â Â <span class="hljs-built_in">setCount</span>(count + <span class="hljs-number">1</span>) <span class="hljs-comment">// æ°¸è¿œè®¾ç½®ä¸º 1</span>
Â Â Â Â }, <span class="hljs-number">1000</span>)
Â Â Â Â return () =&gt; <span class="hljs-built_in">clearInterval</span>(timer)
Â Â }, <span class="hljs-selector-attr">[]</span>) <span class="hljs-comment">// ç©ºä¾èµ–ï¼Œcount è¢«é—­åŒ…æ•è·</span>

Â Â return &lt;<span class="hljs-selector-tag">div</span>&gt;{count}&lt;/<span class="hljs-selector-tag">div</span>&gt;
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨å‡½æ•°å¼æ›´æ–°</span>
function <span class="hljs-built_in">GoodCounter</span>() {
Â Â const <span class="hljs-selector-attr">[count, setCount]</span> = <span class="hljs-built_in">useState</span>(<span class="hljs-number">0</span>)

Â Â <span class="hljs-built_in">useEffect</span>(() =&gt; {
Â Â Â Â const timer = <span class="hljs-built_in">setInterval</span>(() =&gt; {
Â Â Â Â Â Â <span class="hljs-built_in">setCount</span>((c) =&gt; c + <span class="hljs-number">1</span>) <span class="hljs-comment">// å‡½æ•°å¼æ›´æ–°ï¼Œä¸ä¾èµ–å¤–éƒ¨ count</span>
Â Â Â Â }, <span class="hljs-number">1000</span>)
Â Â Â Â return () =&gt; <span class="hljs-built_in">clearInterval</span>(timer)
Â Â }, <span class="hljs-selector-attr">[]</span>)

Â Â return &lt;<span class="hljs-selector-tag">div</span>&gt;{count}&lt;/<span class="hljs-selector-tag">div</span>&gt;
}
</code></pre>
<h3 data-id="heading-19">4.4 å¸¸è§é”™è¯¯ #4ï¼šæ— é™å¾ªç¯</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°å¯¹è±¡ï¼Œå¯¼è‡´æ— é™å¾ªç¯</span>
function <span class="hljs-built_in">BadComponent</span>() {
Â Â const <span class="hljs-selector-attr">[data, setData]</span> = <span class="hljs-built_in">useState</span>(null)

Â Â <span class="hljs-built_in">useEffect</span>(() =&gt; {
Â Â Â Â <span class="hljs-built_in">fetch</span>("/api/data")
Â Â Â Â Â Â <span class="hljs-selector-class">.then</span>((res) =&gt; res<span class="hljs-selector-class">.json</span>())
Â Â Â Â Â Â <span class="hljs-selector-class">.then</span>(setData)
Â Â }, <span class="hljs-selector-attr">[{ page: 1 }]</span>) <span class="hljs-comment">// æ¯æ¬¡éƒ½æ˜¯æ–°å¯¹è±¡ï¼æ— é™å¾ªç¯ï¼</span>

Â Â return &lt;<span class="hljs-selector-tag">div</span>&gt;{data}&lt;/<span class="hljs-selector-tag">div</span>&gt;
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨åŸå§‹å€¼æˆ– useMemo</span>
function <span class="hljs-built_in">GoodComponent</span>() {
Â Â const <span class="hljs-selector-attr">[data, setData]</span> = <span class="hljs-built_in">useState</span>(null)
Â Â const page = <span class="hljs-number">1</span>

Â Â <span class="hljs-built_in">useEffect</span>(() =&gt; {
Â Â Â Â <span class="hljs-built_in">fetch</span>(`/api/data?page=${page}`)
Â Â Â Â Â Â <span class="hljs-selector-class">.then</span>((res) =&gt; res<span class="hljs-selector-class">.json</span>())
Â Â Â Â Â Â <span class="hljs-selector-class">.then</span>(setData)
Â Â }, <span class="hljs-selector-attr">[page]</span>) <span class="hljs-comment">// åŸå§‹å€¼ï¼Œä¸ä¼šæ— é™å¾ªç¯</span>

Â Â return &lt;<span class="hljs-selector-tag">div</span>&gt;{data}&lt;/<span class="hljs-selector-tag">div</span>&gt;
}
</code></pre>
<hr/>
<h2 data-id="heading-20">å†™åœ¨æœ€åï¼šHook çš„å“²å­¦</h2>
<p>è‡ªå®šä¹‰ Hooks ä¸åªæ˜¯ä»£ç å¤ç”¨çš„å·¥å…·ï¼Œæ›´æ˜¯ä¸€ç§æ€ç»´æ–¹å¼ï¼š</p>
<p><strong>1. å…³æ³¨ç‚¹åˆ†ç¦»</strong></p>
<ul>
<li>ç»„ä»¶è´Ÿè´£"é•¿ä»€ä¹ˆæ ·"ï¼ˆUIï¼‰</li>
<li>Hook è´Ÿè´£"æ€ä¹ˆå·¥ä½œ"ï¼ˆé€»è¾‘ï¼‰</li>
</ul>
<p><strong>2. ç»„åˆä¼˜äºç»§æ‰¿</strong></p>
<ul>
<li>å°è€Œä¸“æ³¨çš„ Hook å¯ä»¥è‡ªç”±ç»„åˆ</li>
<li>æ¯” HOC å’Œ Render Props æ›´çµæ´»</li>
</ul>
<p><strong>3. å£°æ˜å¼æ€ç»´</strong></p>
<ul>
<li>æè¿°"è¦ä»€ä¹ˆ"ï¼Œè€Œä¸æ˜¯"æ€ä¹ˆåš"</li>
<li><code>useDebounce(value, 500)</code> æ¯”æ‰‹å†™ setTimeout æ¸…æ™° 100 å€</li>
</ul>
<p><strong>æœ€åï¼Œé€ä½ ä¸€å¥è¯ï¼š</strong></p>
<blockquote>
<p>"å¥½çš„ä»£ç ä¸æ˜¯å†™å‡ºæ¥çš„ï¼Œæ˜¯åˆ å‡ºæ¥çš„ã€‚"</p>
<p>å½“ä½ å‘ç°è‡ªå·±åœ¨ copy-paste æ—¶ï¼Œå°±æ˜¯è¯¥å†™è‡ªå®šä¹‰ Hook çš„æ—¶å€™äº†ã€‚</p>
</blockquote>
<hr/>
<blockquote>
<p>ğŸ’¬ <strong>äº’åŠ¨æ—¶é—´</strong>ï¼šä½ åœ¨é¡¹ç›®ä¸­å°è£…è¿‡å“ªäº›å¥½ç”¨çš„è‡ªå®šä¹‰ Hooksï¼Ÿè¯„è®ºåŒºåˆ†äº«ä¸€ä¸‹ï¼Œè®©å¤§å®¶ä¸€èµ·"å·æ‡’"ï¼</p>
<p>è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Ÿ<strong>ç‚¹èµ + åœ¨çœ‹ + è½¬å‘</strong>ï¼Œè®©æ›´å¤š React å¼€å‘è€…æ—©ç‚¹ä¸‹ç­ï½</p>
</blockquote>
<hr/>
<p><em>æœ¬æ–‡ä½œè€…æ˜¯ä¸€ä¸ªé è‡ªå®šä¹‰ Hooks å®ç°å‡†æ—¶ä¸‹ç­çš„å‰ç«¯å¼€å‘ã€‚å…³æ³¨æˆ‘ï¼Œä¸€èµ·ç”¨æ›´å°‘çš„ä»£ç ï¼Œå†™æ›´å¥½çš„åº”ç”¨ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Goè¯­è¨€æ ¸å¿ƒä¸‰å‰‘å®¢ï¼šæ•°ç»„ã€åˆ‡ç‰‡ä¸ç»“æ„ä½“ä½¿ç”¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7592438587388543014</link>    <guid>https://juejin.cn/post/7592438587388543014</guid>    <pubDate>2026-01-07T09:18:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592438587388543014" data-draft-id="7592361736130887690" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Goè¯­è¨€æ ¸å¿ƒä¸‰å‰‘å®¢ï¼šæ•°ç»„ã€åˆ‡ç‰‡ä¸ç»“æ„ä½“ä½¿ç”¨æŒ‡å—"/> <meta itemprop="keywords" content="Go,åç«¯"/> <meta itemprop="datePublished" content="2026-01-07T09:18:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="starkå¼ å®‡"/> <meta itemprop="url" content="https://juejin.cn/user/1983974643871069"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Goè¯­è¨€æ ¸å¿ƒä¸‰å‰‘å®¢ï¼šæ•°ç»„ã€åˆ‡ç‰‡ä¸ç»“æ„ä½“ä½¿ç”¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1983974643871069/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    starkå¼ å®‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T09:18:38.000Z" title="Wed Jan 07 2026 09:18:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ¯ å­¦ä¹ ç›®æ ‡</h2>
<p>å®Œæˆæœ¬è¯¾ç¨‹åï¼Œå­¦ä¹ è€…å°†èƒ½å¤Ÿï¼š</p>
<ul>
<li>
<p>Goè¯­è¨€ä¸­æ•°ç»„ï¼ˆArrayï¼‰å’Œåˆ‡ç‰‡ï¼ˆSliceï¼‰çš„å®šä¹‰æ–¹å¼ã€æ•°ç»„å’Œåˆ‡ç‰‡çš„åŒºåˆ«</p>
</li>
<li>
<p>åˆ‡ç‰‡ï¼ˆSliceï¼‰çš„åº•å±‚å­˜å‚¨åŸç†å’Œæ‰©å®¹æ–¹å¼è®¡ç®—</p>
</li>
<li>
<p>ç»“æ„ä½“ï¼ˆstructï¼‰çš„å®šä¹‰å’Œä½¿ç”¨</p>
</li>
<li>
<p>åŒ…ï¼ˆpackageï¼‰çš„å¯¼å…¥ modulesã€è®¾ç½®å›½å†…ä»£ç†</p>
</li>
</ul>
<h3 data-id="heading-1">ä¸€ã€Go è¯­è¨€ä¸­æ•°ç»„ï¼ˆArrayï¼‰çš„å®šä¹‰æ–¹å¼</h3>
<p>æ•°ç»„æ˜¯<strong>å›ºå®šé•¿åº¦ã€åŒç±»å‹</strong>çš„å…ƒç´ åºåˆ—ï¼Œé•¿åº¦æ˜¯æ•°ç»„ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼Œç¼–è¯‘æœŸç¡®å®šï¼Œä¸å¯åŠ¨æ€æ‰©å®¹ã€‚</p>
<h4 data-id="heading-2">1. åŸºæœ¬å®šä¹‰ï¼ˆæŒ‡å®šé•¿åº¦ + ç±»å‹ï¼‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// å®šä¹‰é•¿åº¦ä¸º5çš„intæ•°ç»„ï¼Œå…ƒç´ åˆå§‹åŒ–ä¸ºé›¶å€¼ï¼ˆ0ï¼‰</span>
<span class="hljs-keyword">var</span> arr1 [<span class="hljs-number">5</span>]<span class="hljs-type">int</span>

<span class="hljs-comment">// å®šä¹‰é•¿åº¦ä¸º3çš„stringæ•°ç»„ï¼Œæ˜¾å¼åˆå§‹åŒ–</span>
<span class="hljs-keyword">var</span> arr2 [<span class="hljs-number">3</span>]<span class="hljs-type">string</span> = [<span class="hljs-number">3</span>]<span class="hljs-type">string</span>{<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>}

<span class="hljs-comment">// ç±»å‹æ¨å¯¼ï¼ˆçœç•¥ç­‰å·å³ä¾§ç±»å‹ï¼‰</span>
<span class="hljs-keyword">var</span> arr3 = [<span class="hljs-number">3</span>]<span class="hljs-type">int</span>{<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>}
</code></pre>
<h4 data-id="heading-3">2. è‡ªåŠ¨æ¨å¯¼é•¿åº¦ï¼ˆ<code>...</code>ï¼‰</h4>
<p>é€šè¿‡åˆå§‹åŒ–å€¼çš„æ•°é‡è‡ªåŠ¨ç¡®å®šæ•°ç»„é•¿åº¦ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// é•¿åº¦ä¸º4çš„intæ•°ç»„ï¼ˆæ ¹æ®åˆå§‹åŒ–å…ƒç´ ä¸ªæ•°æ¨å¯¼ï¼‰</span>
<span class="hljs-keyword">var</span> arr4 = [...]<span class="hljs-type">int</span>{<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>, <span class="hljs-number">40</span>}

<span class="hljs-comment">// é•¿åº¦ä¸º5çš„æ•°ç»„ï¼ŒæŒ‡å®šç´¢å¼•åˆå§‹åŒ–ï¼ˆæœªæŒ‡å®šçš„ç´¢å¼•ä¸ºé›¶å€¼ï¼‰</span>
<span class="hljs-keyword">var</span> arr5 = [...]<span class="hljs-type">int</span>{<span class="hljs-number">0</span>: <span class="hljs-number">1</span>, <span class="hljs-number">3</span>: <span class="hljs-number">4</span>, <span class="hljs-number">4</span>: <span class="hljs-number">5</span>} <span class="hljs-comment">// [1, 0, 0, 4, 5]</span>
</code></pre>
<h4 data-id="heading-4">3. ç®€çŸ­å£°æ˜ï¼ˆä»…å±€éƒ¨ä½œç”¨åŸŸï¼‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
 Â  Â arr6 := [<span class="hljs-number">2</span>]<span class="hljs-type">bool</span>{<span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>} <span class="hljs-comment">// é•¿åº¦2çš„boolæ•°ç»„</span>
}
</code></pre>
<h3 data-id="heading-5">äºŒã€Go è¯­è¨€ä¸­åˆ‡ç‰‡ï¼ˆSliceï¼‰çš„å®šä¹‰æ–¹å¼</h3>
<p>åˆ‡ç‰‡æ˜¯<strong>åŠ¨æ€é•¿åº¦</strong>çš„æ•°ç»„è§†å›¾ï¼Œåº•å±‚æŒ‡å‘ä¸€ä¸ªæ•°ç»„ï¼ˆç§°ä¸ºåº•å±‚æ•°ç»„ï¼‰ï¼ŒåŒ…å«ï¼šæŒ‡é’ˆï¼ˆæŒ‡å‘åº•å±‚æ•°ç»„ï¼‰ã€é•¿åº¦ï¼ˆlenï¼‰ã€å®¹é‡ï¼ˆcapï¼‰ã€‚åˆ‡ç‰‡æœ¬èº«ä¸å­˜å‚¨æ•°æ®ï¼Œä»…æè¿°åº•å±‚æ•°ç»„çš„ä¸€æ®µã€‚</p>
<h4 data-id="heading-6">1. åŸºæœ¬å®šä¹‰ï¼ˆç©ºåˆ‡ç‰‡ / é›¶å€¼åˆ‡ç‰‡ï¼‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// é›¶å€¼åˆ‡ç‰‡ï¼šnilï¼Œlen=0ï¼Œcap=0ï¼Œæ— åº•å±‚æ•°ç»„</span>
<span class="hljs-keyword">var</span> s1 []<span class="hljs-type">int</span>

<span class="hljs-comment">// ç©ºåˆ‡ç‰‡ï¼šlen=0ï¼Œcap=0ï¼Œåº•å±‚æ•°ç»„ä¸ºç©ºï¼ˆénilï¼‰</span>
<span class="hljs-keyword">var</span> s2 []<span class="hljs-type">string</span> = []<span class="hljs-type">string</span>{}
<span class="hljs-keyword">var</span> s3 = []<span class="hljs-type">int</span>{}
s4 := []<span class="hljs-type">bool</span>{}
</code></pre>
<h4 data-id="heading-7">2. åŸºäºæ•°ç»„ / åˆ‡ç‰‡æˆªå–ï¼ˆæœ€å¸¸ç”¨ï¼‰</h4>
<p>è¯­æ³•ï¼š<code>[èµ·å§‹ç´¢å¼•:ç»“æŸç´¢å¼•]</code>ï¼ˆå·¦é—­å³å¼€ï¼Œç»“æŸç´¢å¼•çœç•¥åˆ™åˆ°æœ«å°¾ï¼Œèµ·å§‹ç´¢å¼•çœç•¥åˆ™ä» 0 å¼€å§‹ï¼‰</p>
<pre><code class="hljs language-go" lang="go">arr := [<span class="hljs-number">5</span>]<span class="hljs-type">int</span>{<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>}

<span class="hljs-comment">// æˆªå–æ•°ç»„çš„[1,3)åŒºé—´ï¼Œs5 = [2,3]ï¼Œlen=2ï¼Œcap=4ï¼ˆä»ç´¢å¼•1åˆ°æ•°ç»„æœ«å°¾ï¼‰</span>
s5 := arr[<span class="hljs-number">1</span>:<span class="hljs-number">3</span>]

<span class="hljs-comment">// æˆªå–å…¨éƒ¨ï¼šs6 = [1,2,3,4,5]ï¼Œlen=5ï¼Œcap=5</span>
s6 := arr[:]

<span class="hljs-comment">// ä»ç´¢å¼•2åˆ°æœ«å°¾ï¼šs7 = [3,4,5]ï¼Œlen=3ï¼Œcap=3</span>
s7 := arr[<span class="hljs-number">2</span>:]

<span class="hljs-comment">// ä»å¼€å¤´åˆ°ç´¢å¼•3ï¼šs8 = [1,2,3]ï¼Œlen=3ï¼Œcap=5</span>
s8 := arr[:<span class="hljs-number">3</span>]

<span class="hljs-comment">// åˆ‡ç‰‡æˆªå–åˆ‡ç‰‡</span>
s9 := s5[<span class="hljs-number">0</span>:<span class="hljs-number">1</span>] <span class="hljs-comment">// s9 = [2]ï¼Œlen=1ï¼Œcap=4</span>
</code></pre>
<h4 data-id="heading-8">3. <code>make</code>å‡½æ•°åˆ›å»ºï¼ˆæŒ‡å®šé•¿åº¦ / å®¹é‡ï¼‰</h4>
<p>è¯­æ³•ï¼šmake([]T, len, cap)ï¼ˆcap å¯é€‰ï¼Œé»˜è®¤ç­‰äº lenï¼‰</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// é•¿åº¦3ï¼Œå®¹é‡3ï¼Œå…ƒç´ åˆå§‹åŒ–ä¸ºé›¶å€¼ï¼ˆ0ï¼‰</span>
s10 := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">3</span>) <span class="hljs-comment">// len=3, cap=3, [0,0,0]</span>

<span class="hljs-comment">// é•¿åº¦2ï¼Œå®¹é‡5ï¼Œå…ƒç´ åˆå§‹åŒ–ä¸ºé›¶å€¼ï¼ˆ""ï¼‰</span>
s11 := <span class="hljs-built_in">make</span>([]<span class="hljs-type">string</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>) <span class="hljs-comment">// len=2, cap=5, ["", ""]</span>
</code></pre>
<h4 data-id="heading-9">4. ç›´æ¥åˆå§‹åŒ–ï¼ˆå­—é¢é‡ï¼‰</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// é•¿åº¦3ï¼Œå®¹é‡3ï¼Œå…ƒç´ [10,20,30]</span>
s12 := []<span class="hljs-type">int</span>{<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>}

<span class="hljs-comment">// æŒ‡å®šç´¢å¼•åˆå§‹åŒ–ï¼Œlen=5ï¼ˆæœ€å¤§ç´¢å¼•+1ï¼‰ï¼Œcap=5</span>
s13 := []<span class="hljs-type">int</span>{<span class="hljs-number">0</span>: <span class="hljs-number">1</span>, <span class="hljs-number">2</span>: <span class="hljs-number">3</span>, <span class="hljs-number">4</span>: <span class="hljs-number">5</span>} <span class="hljs-comment">// [1,0,3,0,5]</span>
</code></pre>
<h3 data-id="heading-10">ä¸‰ã€æ•°ç»„ä¸åˆ‡ç‰‡çš„æ ¸å¿ƒåŒºåˆ«</h3>













































<table><thead><tr><th>ç‰¹æ€§</th><th>æ•°ç»„ï¼ˆArrayï¼‰</th><th>åˆ‡ç‰‡ï¼ˆSliceï¼‰</th></tr></thead><tbody><tr><td>é•¿åº¦ç‰¹æ€§</td><td>é•¿åº¦å›ºå®šï¼Œæ˜¯ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼ˆå¦‚<code>[5]int</code>å’Œ<code>[3]int</code>æ˜¯ä¸åŒç±»å‹ï¼‰</td><td>é•¿åº¦åŠ¨æ€ï¼Œå¯é€šè¿‡<code>append</code>æ‰©å®¹ï¼Œç±»å‹ä»…ä¸å…ƒç´ æœ‰å…³ï¼ˆå¦‚<code>[]int</code>ï¼‰</td></tr><tr><td>å†…å­˜å­˜å‚¨</td><td>ç›´æ¥å­˜å‚¨å…ƒç´ ï¼Œå€¼ç±»å‹ï¼ˆèµ‹å€¼ / ä¼ å‚æ—¶æ‹·è´æ•´ä¸ªæ•°ç»„ï¼‰</td><td>ä»…å­˜å‚¨æŒ‡é’ˆã€lenã€capï¼Œå¼•ç”¨ç±»å‹ï¼ˆèµ‹å€¼ / ä¼ å‚æ—¶æ‹·è´åˆ‡ç‰‡ç»“æ„ä½“ï¼Œåº•å±‚æ•°ç»„å…±äº«ï¼‰</td></tr><tr><td>å®¹é‡ï¼ˆcapï¼‰</td><td>å®¹é‡ = é•¿åº¦ï¼Œä¸å¯å˜</td><td>å®¹é‡â‰¥é•¿åº¦ï¼Œå¯é€šè¿‡<code>append</code>è‡ªåŠ¨æ‰©å®¹ï¼ˆåº•å±‚æ•°ç»„æ›¿æ¢ï¼‰</td></tr><tr><td>é›¶å€¼</td><td>æ•°ç»„é›¶å€¼æ˜¯æ¯ä¸ªå…ƒç´ ä¸ºå¯¹åº”ç±»å‹é›¶å€¼ï¼ˆå¦‚<code>[3]int</code>é›¶å€¼æ˜¯<code>[0,0,0]</code>ï¼‰</td><td>åˆ‡ç‰‡é›¶å€¼æ˜¯<code>nil</code>ï¼ˆlen=0ï¼Œcap=0ï¼Œæ— åº•å±‚æ•°ç»„ï¼‰</td></tr><tr><td>æ‰©å®¹èƒ½åŠ›</td><td>æ— ï¼Œåªèƒ½é‡æ–°åˆ›å»ºæ–°æ•°ç»„</td><td>æ”¯æŒ<code>append</code>æ‰©å®¹ï¼Œæ‰©å®¹è§„åˆ™ï¼š- åŸ cap&lt;1024ï¼šæ–° cap=2<em>åŸ cap- åŸ capâ‰¥1024ï¼šæ–° capâ‰ˆ1.25</em>åŸ cap</td></tr><tr><td>æ¯”è¾ƒæ“ä½œ</td><td>åŒç±»å‹æ•°ç»„å¯ç›´æ¥ç”¨<code>==</code>æ¯”è¾ƒï¼ˆå…ƒç´ å…¨éƒ¨ç›¸ç­‰åˆ™ç›¸ç­‰ï¼‰</td><td>åˆ‡ç‰‡ä¸èƒ½ç›´æ¥ç”¨<code>==</code>æ¯”è¾ƒï¼ˆä»…<code>nil == nil</code>ï¼‰ï¼Œéœ€æ‰‹åŠ¨éå†å…ƒç´ æ¯”è¾ƒ</td></tr><tr><td>åº•å±‚ä¾èµ–</td><td>æ— ä¾èµ–ï¼Œè‡ªèº«å°±æ˜¯å­˜å‚¨è½½ä½“</td><td>ä¾èµ–åº•å±‚æ•°ç»„ï¼Œåˆ‡ç‰‡æ˜¯åº•å±‚æ•°ç»„çš„ â€œè§†å›¾â€</td></tr></tbody></table>
<h3 data-id="heading-11">å››ã€ç¤ºä¾‹ï¼šç›´è§‚ç†è§£åŒºåˆ«</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
 Â  Â <span class="hljs-comment">// æ•°ç»„ï¼šé•¿åº¦å›ºå®šï¼Œå€¼æ‹·è´</span>
 Â  Â arr := [<span class="hljs-number">3</span>]<span class="hljs-type">int</span>{<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>}
 Â  Â arrCopy := arr
 Â  Â arrCopy[<span class="hljs-number">0</span>] = <span class="hljs-number">100</span>
 Â  Â fmt.Println(arr) Â  Â  <span class="hljs-comment">// [1 2 3]ï¼ˆåŸæ•°ç»„ä¸å˜ï¼‰</span>
 Â  Â fmt.Println(arrCopy) <span class="hljs-comment">// [100 2 3]</span>
    
 Â  Â <span class="hljs-comment">// åˆ‡ç‰‡ï¼šå¼•ç”¨ç±»å‹ï¼Œå…±äº«åº•å±‚æ•°ç»„</span>
 Â  Â s := arr[:]
 Â  Â sCopy := s
 Â  Â sCopy[<span class="hljs-number">0</span>] = <span class="hljs-number">100</span>
 Â  Â fmt.Println(arr) Â <span class="hljs-comment">// [100 2 3]ï¼ˆåŸæ•°ç»„è¢«ä¿®æ”¹ï¼‰</span>
 Â  Â fmt.Println(s) Â  Â <span class="hljs-comment">// [100 2 3]</span>
 Â  Â fmt.Println(sCopy)<span class="hljs-comment">// [100 2 3]</span>

 Â  Â <span class="hljs-comment">// åˆ‡ç‰‡æ‰©å®¹ï¼šåº•å±‚æ•°ç»„æ›¿æ¢</span>
 Â  Â s = <span class="hljs-built_in">append</span>(s, <span class="hljs-number">4</span>)
 Â  Â s[<span class="hljs-number">0</span>] = <span class="hljs-number">200</span>
 Â  Â fmt.Println(arr) Â <span class="hljs-comment">// [100 2 3]ï¼ˆåŸæ•°ç»„ä¸å˜ï¼Œæ‰©å®¹ååº•å±‚æ•°ç»„å·²æ›¿æ¢ï¼‰</span>
 Â  Â fmt.Println(s) Â  Â <span class="hljs-comment">// [200 2 3 4]</span>
}
</code></pre>
<h3 data-id="heading-12">äº”ã€åˆ‡ç‰‡çš„åº•å±‚å­˜å‚¨</h3>
<p>æŒæ¡ Go åˆ‡ç‰‡æ ¸å¿ƒç‰¹æ€§ï¼ˆæ¯”å¦‚æ‰©å®¹ã€å¼•ç”¨ä¼ é€’ï¼‰çš„å…³é”®ï¼Œææ¸…æ¥šåˆ‡ç‰‡åœ¨å†…å­˜ä¸­æ˜¯å¦‚ä½•å­˜å‚¨ã€åˆ†é…å’Œç®¡ç†æ•°æ®ã€‚</p>
<p>åˆ‡ç‰‡ä¸æ˜¯ç‹¬ç«‹çš„å®¹å™¨ï¼Œè€Œæ˜¯å¯¹<strong>åº•å±‚æ•°ç»„ï¼ˆunderlying arrayï¼‰</strong> çš„å°è£…å’Œå¼•ç”¨ã€‚å¯ä»¥æŠŠåˆ‡ç‰‡ç†è§£ä¸º â€œå¸¦äº†é•¿åº¦å’Œå®¹é‡ä¿¡æ¯çš„æ•°ç»„æŒ‡é’ˆâ€ï¼Œå®ƒæœ¬èº«ä¸å­˜å‚¨æ•°æ®ï¼Œæ‰€æœ‰æ•°æ®éƒ½å­˜åœ¨åº•å±‚æ•°ç»„ä¸­ã€‚</p>
<p>Go çš„è¿è¡Œæ—¶æºç ä¸­ï¼Œåˆ‡ç‰‡è¢«å®šä¹‰ä¸º <code>reflect.SliceHeader</code> ç»“æ„ä½“ï¼ˆä½äº <code>reflect</code> åŒ…ï¼‰ï¼Œæ ¸å¿ƒåŒ…å« 3 ä¸ªå­—æ®µï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> SliceHeader <span class="hljs-keyword">struct</span> {
 Â   Data <span class="hljs-type">uintptr</span> <span class="hljs-comment">// æŒ‡å‘åº•å±‚æ•°ç»„çš„æŒ‡é’ˆï¼ˆå†…å­˜åœ°å€ï¼‰</span>
 Â   Len  <span class="hljs-type">int</span> Â  Â  <span class="hljs-comment">// åˆ‡ç‰‡çš„é•¿åº¦ï¼šå½“å‰å¯è®¿é—®çš„å…ƒç´ ä¸ªæ•°</span>
 Â   Cap  <span class="hljs-type">int</span> Â  Â  <span class="hljs-comment">// åˆ‡ç‰‡çš„å®¹é‡ï¼šä»æŒ‡é’ˆæŒ‡å‘çš„ä½ç½®å¼€å§‹ï¼Œåº•å±‚æ•°ç»„å‰©ä½™çš„å…ƒç´ æ€»æ•°</span>
}
</code></pre>
<h4 data-id="heading-13">å†…å­˜å¸ƒå±€ç¤ºä¾‹</h4>
<p>æ¯”å¦‚åˆ›å»ºåˆ‡ç‰‡ <code>s := []int{1,2,3,4}</code>ï¼Œå…¶å†…å­˜å¸ƒå±€å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-go" lang="go">åˆ‡ç‰‡sï¼ˆSliceHeaderï¼‰ Â  Â  Â   åº•å±‚æ•°ç»„
+---------+---------+---------+ Â   +---+---+---+---+
| Data Â   | Len=<span class="hljs-number">4</span> Â  | Cap=<span class="hljs-number">4</span> Â  | -&gt; | <span class="hljs-number">1</span> | <span class="hljs-number">2</span> | <span class="hljs-number">3</span> | <span class="hljs-number">4</span> |
+---------+---------+---------+ Â   +---+---+---+---+
</code></pre>
<p>å¦‚æœå¯¹åˆ‡ç‰‡æˆªå– <code>s2 := s[1:3]</code>ï¼Œå†…å­˜å¸ƒå±€å˜ä¸ºï¼š</p>
<pre><code class="hljs language-go" lang="go">åˆ‡ç‰‡sï¼ˆåŸï¼‰ Â  Â  Â  Â  Â  Â  Â   åº•å±‚æ•°ç»„
+---------+---------+---------+ Â   +---+---+---+---+
| Data-&gt;<span class="hljs-number">1</span> | Len=<span class="hljs-number">4</span> Â  | Cap=<span class="hljs-number">4</span> Â  | Â   | <span class="hljs-number">1</span> | <span class="hljs-number">2</span> | <span class="hljs-number">3</span> | <span class="hljs-number">4</span> |
+---------+---------+---------+ Â   +---+---+---+---+
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   ^
åˆ‡ç‰‡s2ï¼ˆæ–°ï¼‰ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   |
+---------+---------+---------+ Â  Â  Â  |
| Data-&gt;<span class="hljs-number">2</span> | Len=<span class="hljs-number">2</span> Â  | Cap=<span class="hljs-number">3</span> Â  | ------+
+---------+---------+---------+
</code></pre>
<ul>
<li><code>s2</code> çš„ <code>Data</code> æŒ‡é’ˆæŒ‡å‘åŸæ•°ç»„ç´¢å¼• 1 çš„ä½ç½®ï¼ˆå€¼ä¸º 2ï¼‰ï¼›</li>
<li><code>s2.Len=2</code>ï¼ˆå¯è®¿é—® 2ã€3ï¼‰ï¼›</li>
<li><code>s2.Cap=3</code>ï¼ˆä»ç´¢å¼• 1 åˆ°æ•°ç»„æœ«å°¾å…± 3 ä¸ªå…ƒç´ ï¼š2ã€3ã€4ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-14">åˆ‡ç‰‡çš„å†…å­˜åˆ†é…è§„åˆ™</h4>
<p>ä¸åŒåˆ›å»ºæ–¹å¼ï¼Œåº•å±‚æ•°ç»„çš„åˆ†é…è§„åˆ™ä¸åŒï¼š</p>





















<table><thead><tr><th>åˆ›å»ºæ–¹å¼</th><th>åº•å±‚æ•°ç»„åˆ†é…é€»è¾‘</th></tr></thead><tbody><tr><td>å­—é¢é‡ <code>s := []int{1,2}</code></td><td>ç¼–è¯‘å™¨è‡ªåŠ¨åˆ›å»ºåŒ¿ååº•å±‚æ•°ç»„ï¼Œåˆ‡ç‰‡æŒ‡å‘è¯¥æ•°ç»„ï¼ŒLen=Cap = å…ƒç´ ä¸ªæ•°</td></tr><tr><td>make åˆ›å»º <code>s := make([]int, 3, 5)</code></td><td>æ˜¾å¼åˆ†é…é•¿åº¦ä¸º 5 çš„åº•å±‚æ•°ç»„ï¼Œåˆ‡ç‰‡ Len=3ï¼ˆå‰ 3 ä¸ªå…ƒç´ åˆå§‹åŒ–ä¸º 0ï¼‰ï¼ŒCap=5</td></tr><tr><td>ä»æ•°ç»„æˆªå– <code>s := arr[1:3]</code></td><td>åˆ‡ç‰‡å¤ç”¨åŸæ•°ç»„ï¼ŒData æŒ‡é’ˆæŒ‡å‘æ•°ç»„æŒ‡å®šä½ç½®ï¼ŒLen=2ï¼ŒCap = åŸæ•°ç»„é•¿åº¦ - èµ·å§‹ç´¢å¼•</td></tr></tbody></table>
<p>å½“é€šè¿‡ <code>append</code> å‘åˆ‡ç‰‡æ·»åŠ å…ƒç´ ï¼Œä¸” <code>len == cap</code> æ—¶ï¼Œåˆ‡ç‰‡ä¼šè§¦å‘<strong>æ‰©å®¹</strong>ï¼Œåº•å±‚é€»è¾‘å¦‚ä¸‹ï¼š</p>
<ol start="0">
<li><strong>åˆ†é…æ–°æ•°ç»„</strong>ï¼šæ ¹æ®åŸåˆ‡ç‰‡çš„å®¹é‡ï¼Œè®¡ç®—æ–°å®¹é‡ï¼Œç„¶ååˆ†é…ä¸€å—æ–°çš„å†…å­˜ç©ºé—´ä½œä¸ºæ–°åº•å±‚æ•°ç»„ï¼›</li>
<li><strong>æ‹·è´æ•°æ®</strong>ï¼šå°†åŸåº•å±‚æ•°ç»„ä¸­çš„æ•°æ®æ‹·è´åˆ°æ–°æ•°ç»„ï¼›</li>
<li><strong>æ›´æ–°åˆ‡ç‰‡</strong>ï¼šåˆ‡ç‰‡çš„ <code>Data</code> æŒ‡é’ˆæŒ‡å‘æ–°æ•°ç»„ï¼Œ<code>Len</code> å¢åŠ ï¼ˆæ–°å¢å…ƒç´ ä¸ªæ•°ï¼‰ï¼Œ<code>Cap</code> æ›´æ–°ä¸ºæ–°å®¹é‡ï¼›</li>
<li><strong>åŸæ•°ç»„å›æ”¶</strong>ï¼šå¦‚æœåŸæ•°ç»„æ²¡æœ‰å…¶ä»–åˆ‡ç‰‡å¼•ç”¨ï¼Œä¼šè¢« Go çš„åƒåœ¾å›æ”¶ï¼ˆGCï¼‰æ¸…ç†ã€‚</li>
</ol>
<h5 data-id="heading-15">æ‰©å®¹å®¹é‡è®¡ç®—è§„åˆ™ï¼ˆGo 1.18+ï¼‰</h5>
<ul>
<li>è‹¥åŸå®¹é‡ <code>cap &lt; 256</code>ï¼šæ–°å®¹é‡ = åŸå®¹é‡ Ã— 2ï¼›</li>
<li>è‹¥åŸå®¹é‡ <code>cap â‰¥ 256</code>ï¼šæ–°å®¹é‡ = åŸå®¹é‡ Ã— 1.25ï¼ˆå®é™…ä¼šå¯¹é½å†…å­˜å—å¤§å°ï¼Œæ¯”å¦‚å‘ä¸Šå–æ•´åˆ°æœ€è¿‘çš„ 8 çš„å€æ•°ï¼‰ï¼›</li>
<li>ç‰¹æ®Šæƒ…å†µï¼šå¦‚æœ <code>append</code> åéœ€è¦çš„é•¿åº¦è¶…è¿‡ä¸Šè¿°è®¡ç®—å€¼ï¼Œåˆ™ç›´æ¥ä»¥éœ€è¦çš„é•¿åº¦ä½œä¸ºæ–°å®¹é‡ã€‚</li>
</ul>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">"fmt"</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
 Â  Â s := <span class="hljs-built_in">make</span>([]<span class="hljs-type">int</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>) <span class="hljs-comment">// Len=0, Cap=1</span>
 Â  Â fmt.Printf(<span class="hljs-string">"åˆå§‹ï¼šlen=%d, cap=%d\n"</span>, <span class="hljs-built_in">len</span>(s), <span class="hljs-built_in">cap</span>(s)) <span class="hljs-comment">// len=0, cap=1</span>

 Â  Â s = <span class="hljs-built_in">append</span>(s, <span class="hljs-number">1</span>) <span class="hljs-comment">// Len=1, Cap=1ï¼ˆæœªæ‰©å®¹ï¼‰</span>
 Â  Â fmt.Printf(<span class="hljs-string">"æ·»åŠ 1ä¸ªå…ƒç´ ï¼šlen=%d, cap=%d\n"</span>, <span class="hljs-built_in">len</span>(s), <span class="hljs-built_in">cap</span>(s)) <span class="hljs-comment">// len=1, cap=1</span>

 Â  Â s = <span class="hljs-built_in">append</span>(s, <span class="hljs-number">2</span>) <span class="hljs-comment">// Len=2, Cap=2ï¼ˆæ‰©å®¹ï¼Œcap&lt;256 ç¿»å€ï¼‰</span>
 Â  Â fmt.Printf(<span class="hljs-string">"æ·»åŠ ç¬¬2ä¸ªå…ƒç´ ï¼šlen=%d, cap=%d\n"</span>, <span class="hljs-built_in">len</span>(s), <span class="hljs-built_in">cap</span>(s)) <span class="hljs-comment">// len=2, cap=2</span>

 Â  Â s = <span class="hljs-built_in">append</span>(s, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>) <span class="hljs-comment">// éœ€è¦len=5ï¼ŒåŸcap=2ï¼Œè®¡ç®—æ–°cap=4ï¼ˆ2Ã—2ï¼‰ä¸å¤Ÿï¼Œç›´æ¥ç”¨5</span>
 Â  Â fmt.Printf(<span class="hljs-string">"æ·»åŠ 3ä¸ªå…ƒç´ ï¼šlen=%d, cap=%d\n"</span>, <span class="hljs-built_in">len</span>(s), <span class="hljs-built_in">cap</span>(s)) <span class="hljs-comment">// len=5, cap=5</span>
}
</code></pre>
<h4 data-id="heading-16">å…³é”®ç‰¹æ€§çš„åº•å±‚è§£é‡Š</h4>
<h4 data-id="heading-17">1. åˆ‡ç‰‡çš„ â€œå¼•ç”¨ä¼ é€’â€</h4>
<p>åˆ‡ç‰‡ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’æ—¶ï¼Œä¼ é€’çš„æ˜¯ <code>SliceHeader</code> çš„å‰¯æœ¬ï¼ˆå€¼ä¼ é€’ï¼‰ï¼Œä½†å‰¯æœ¬çš„ <code>Data</code> æŒ‡é’ˆä»æŒ‡å‘åŸåº•å±‚æ•°ç»„ã€‚å› æ­¤ï¼š</p>
<ul>
<li>ä¿®æ”¹åˆ‡ç‰‡å…ƒç´ ï¼ˆå¦‚ <code>s[0] = 10</code>ï¼‰ä¼šå½±å“åŸåˆ‡ç‰‡ï¼ˆå› ä¸ºå…±äº«åº•å±‚æ•°ç»„ï¼‰ï¼›</li>
<li>ä¿®æ”¹åˆ‡ç‰‡çš„ <code>Len/Cap</code>ï¼ˆå¦‚ <code>s = append(s, 1)</code>ï¼‰ä¸ä¼šå½±å“åŸåˆ‡ç‰‡ï¼ˆå› ä¸ºå‰¯æœ¬çš„ <code>Data</code> å¯èƒ½æŒ‡å‘æ–°æ•°ç»„ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-18">2. <code>copy</code> å‡½æ•°çš„åº•å±‚é€»è¾‘</h4>
<p><code>copy(dst, src []T)</code> æ˜¯<strong>å€¼æ‹·è´</strong>ï¼Œä¼šæŠŠ src åº•å±‚æ•°ç»„çš„å…ƒç´ é€ä¸ªå¤åˆ¶åˆ° dst çš„åº•å±‚æ•°ç»„ï¼Œä¸ä¼šå…±äº«æ•°ç»„ï¼š</p>
<ul>
<li>æ‹·è´çš„å…ƒç´ ä¸ªæ•° = min (len (dst), len (src))ï¼›</li>
<li>æ‹·è´åï¼Œdst å’Œ src çš„åº•å±‚æ•°ç»„ç›¸äº’ç‹¬ç«‹ï¼Œä¿®æ”¹ä¸€æ–¹ä¸ä¼šå½±å“å¦ä¸€æ–¹ã€‚</li>
</ul>
<h4 data-id="heading-19">åˆ‡ç‰‡çš„çŸ¥è¯†ç‚¹å½’çº³</h4>
<ol start="0">
<li><strong>åˆ‡ç‰‡çš„åº•å±‚æ ¸å¿ƒ</strong>ï¼šåˆ‡ç‰‡æ˜¯ <code>DataæŒ‡é’ˆ + Len + Cap</code> çš„ç»“æ„ä½“ï¼Œæ•°æ®å­˜å‚¨åœ¨åº•å±‚æ•°ç»„ä¸­ï¼Œåˆ‡ç‰‡æœ¬èº«ä»…å  24 å­—èŠ‚ï¼ˆ64 ä½ç³»ç»Ÿï¼Œ3 ä¸ª int å­—æ®µï¼‰ï¼›</li>
<li><strong>æ‰©å®¹çš„æœ¬è´¨</strong>ï¼šå½“åˆ‡ç‰‡é•¿åº¦è¶…å‡ºå®¹é‡æ—¶ï¼Œä¼šåˆ†é…æ–°çš„åº•å±‚æ•°ç»„ï¼Œæ‹·è´æ•°æ®å¹¶æ›´æ–°åˆ‡ç‰‡æŒ‡é’ˆï¼ŒåŸæ•°ç»„è‹¥æ— å¼•ç”¨åˆ™è¢« GC å›æ”¶ï¼›</li>
<li><strong>å¼•ç”¨ç‰¹æ€§</strong>ï¼šåˆ‡ç‰‡æˆªå–ã€å‡½æ•°ä¼ å‚é»˜è®¤å…±äº«åº•å±‚æ•°ç»„ï¼Œ<code>copy</code> å‡½æ•°å¯å®ç°å€¼æ‹·è´ï¼Œé¿å…å…±äº«ã€‚</li>
</ol>
<h3 data-id="heading-20">å…­ã€ç»“æ„ä½“</h3>
<p>ç»“æ„ä½“é€šè¿‡<code>type + ç»“æ„ä½“å + struct</code>å…³é”®å­—å®šä¹‰ï¼Œç”¨äºèšåˆå¤šä¸ªä¸åŒç±»å‹çš„å­—æ®µï¼ˆæˆå‘˜å˜é‡ï¼‰ï¼Œæ”¯æŒå­—æ®µæ ‡ç­¾ï¼ˆTagï¼‰ç”¨äºåºåˆ—åŒ–ã€ORM æ˜ å°„ç­‰åœºæ™¯ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// å®šä¹‰Userç»“æ„ä½“ï¼ŒåŒ…å«åŸºç¡€ä¿¡æ¯å’Œæ ‡ç­¾</span>
<span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
 Â  Â ID Â  Â  Â  <span class="hljs-type">int</span> Â  Â <span class="hljs-string">`json:"id"`</span> Â  Â  Â  <span class="hljs-comment">// JSONåºåˆ—åŒ–æ—¶æ˜ å°„ä¸ºid</span>
 Â  Â Name Â  Â  <span class="hljs-type">string</span> <span class="hljs-string">`json:"name"`</span> Â  Â  <span class="hljs-comment">// JSONåºåˆ—åŒ–æ—¶æ˜ å°„ä¸ºname</span>
 Â  Â Age Â  Â  Â <span class="hljs-type">int</span> Â  Â <span class="hljs-string">`json:"age"`</span> Â  Â  Â <span class="hljs-comment">// JSONåºåˆ—åŒ–æ—¶æ˜ å°„ä¸ºage</span>
 Â  Â IsActive <span class="hljs-type">bool</span> Â  <span class="hljs-string">`json:"is_active"`</span><span class="hljs-comment">// JSONåºåˆ—åŒ–æ—¶æ˜ å°„ä¸ºis_active</span>
}
</code></pre>
<p><strong>ç»“æ„ä½“æ‰€æœ‰å®ä¾‹åŒ–æ–¹å¼</strong></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// æ–¹å¼1ï¼šç›´æ¥å£°æ˜ï¼ˆé›¶å€¼åˆå§‹åŒ–ï¼‰</span>
<span class="hljs-comment">// æ‰€æœ‰å­—æ®µä¼šè¢«åˆå§‹åŒ–ä¸ºå¯¹åº”ç±»å‹çš„é›¶å€¼ï¼ˆint:0, string:"", bool:falseï¼‰</span>
<span class="hljs-keyword">var</span> u1 User
fmt.Println(<span class="hljs-string">"æ–¹å¼1-ç›´æ¥å£°æ˜ï¼ˆé›¶å€¼ï¼‰ï¼š"</span>, u1)

<span class="hljs-comment">// æ‰‹åŠ¨èµ‹å€¼å­—æ®µ</span>
u1.ID = <span class="hljs-number">1</span>
u1.Name = <span class="hljs-string">"å¼ ä¸‰"</span>
u1.Age = <span class="hljs-number">25</span>
u1.IsActive = <span class="hljs-literal">true</span>
fmt.Println(<span class="hljs-string">"æ–¹å¼1-èµ‹å€¼åï¼š"</span>, u1)

<span class="hljs-comment">// æ–¹å¼2ï¼šå­—é¢é‡åˆå§‹åŒ–ï¼ˆå€¼ç±»å‹ï¼‰</span>
<span class="hljs-comment">// æŒ‡å®šéƒ¨åˆ†å­—æ®µï¼ŒæœªæŒ‡å®šå­—æ®µä¸ºé›¶å€¼ï¼›å­—æ®µé¡ºåºå¯ä¸å®šä¹‰ä¸ä¸€è‡´</span>
u2 := User{
 Â  Â ID: Â  <span class="hljs-number">2</span>,
 Â  Â Name: <span class="hljs-string">"æå››"</span>,
 Â  Â Age: Â <span class="hljs-number">30</span>,
 Â  Â <span class="hljs-comment">// IsActive æœªæŒ‡å®šï¼Œé»˜è®¤false</span>
}
fmt.Println(<span class="hljs-string">"æ–¹å¼2-å­—é¢é‡ï¼ˆå€¼ç±»å‹ï¼‰ï¼š"</span>, u2)

<span class="hljs-comment">// æ–¹å¼3ï¼šå­—é¢é‡åˆå§‹åŒ–ï¼ˆæŒ‡é’ˆç±»å‹ï¼‰ã€æ¨èã€‘</span>
<span class="hljs-comment">// ç›´æ¥è¿”å›ç»“æ„ä½“æŒ‡é’ˆï¼Œå‡å°‘å€¼æ‹·è´å¼€é”€ï¼›è¯­æ³•ä¸Šä¸å€¼ç±»å‹ä»…å¤šä¸€ä¸ª&amp;</span>
u3 := &amp;User{
 Â  Â ID: Â  Â  Â  <span class="hljs-number">3</span>,
 Â  Â Name: Â  Â  <span class="hljs-string">"ç‹äº”"</span>,
 Â  Â Age: Â  Â  Â <span class="hljs-number">28</span>,
 Â  Â IsActive: <span class="hljs-literal">true</span>,
}
fmt.Println(<span class="hljs-string">"æ–¹å¼3-å­—é¢é‡ï¼ˆæŒ‡é’ˆç±»å‹ï¼‰ï¼š"</span>, u3)
<span class="hljs-comment">// æŒ‡é’ˆç±»å‹è®¿é—®å­—æ®µï¼ˆGoè‡ªåŠ¨è§£å¼•ç”¨ï¼Œæ— éœ€(*u3).Nameï¼‰</span>
fmt.Println(<span class="hljs-string">"æ–¹å¼3-è®¿é—®æŒ‡é’ˆå­—æ®µï¼š"</span>, u3.Name, u3.Age)

<span class="hljs-comment">// æ–¹å¼4ï¼šnewå‡½æ•°åˆå§‹åŒ–ï¼ˆæŒ‡é’ˆç±»å‹ï¼‰</span>
<span class="hljs-comment">// new(ç»“æ„ä½“å) ç­‰ä»·äº &amp;ç»“æ„ä½“å{}ï¼Œè¿”å›æŒ‡é’ˆï¼Œæ‰€æœ‰å­—æ®µä¸ºé›¶å€¼</span>
u4 := <span class="hljs-built_in">new</span>(User)
fmt.Println(<span class="hljs-string">"æ–¹å¼4-newå‡½æ•°ï¼ˆæŒ‡é’ˆé›¶å€¼ï¼‰ï¼š"</span>, u4)
<span class="hljs-comment">// ç»™æŒ‡é’ˆå®ä¾‹èµ‹å€¼å­—æ®µ</span>
u4.ID = <span class="hljs-number">4</span>
u4.Name = <span class="hljs-string">"èµµå…­"</span>
u4.Age = <span class="hljs-number">35</span>
u4.IsActive = <span class="hljs-literal">false</span>
fmt.Println(<span class="hljs-string">"æ–¹å¼4-newå‡½æ•°ï¼ˆèµ‹å€¼åï¼‰ï¼š"</span>, u4)

<span class="hljs-comment">// æ–¹å¼5ï¼šå­—é¢é‡ç®€å†™ï¼ˆæŒ‰å­—æ®µå®šä¹‰é¡ºåºåˆå§‹åŒ–ï¼Œä¸æ¨èï¼Œå¯è¯»æ€§å·®ï¼‰</span>
<span class="hljs-comment">// å¿…é¡»ä¸¥æ ¼æŒ‰ç»“æ„ä½“å­—æ®µå®šä¹‰é¡ºåºèµ‹å€¼ï¼Œä¸”ä¸èƒ½çœç•¥ä»»ä½•å­—æ®µï¼ˆé™¤éç”¨ç©ºå€¼ï¼‰</span>
u5 := User{<span class="hljs-number">5</span>, <span class="hljs-string">"é’±ä¸ƒ"</span>, <span class="hljs-number">22</span>, <span class="hljs-literal">true</span>}
fmt.Println(<span class="hljs-string">"æ–¹å¼5-å­—é¢é‡ç®€å†™ï¼ˆå€¼ç±»å‹ï¼‰ï¼š"</span>, u5)
</code></pre>
<p>Go é€šè¿‡<strong>ç»“æ„ä½“åµŒå¥—</strong>å®ç° â€œç»„åˆâ€ï¼ˆæ›¿ä»£ç»§æ‰¿ï¼‰ï¼Œæ”¯æŒ â€œåŒ¿åå­—æ®µâ€ï¼ˆæå‡å­—æ®µï¼‰ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// å®šä¹‰åœ°å€ç»“æ„ä½“</span>
<span class="hljs-keyword">type</span> Address <span class="hljs-keyword">struct</span> {
 Â  Â Province <span class="hljs-type">string</span>
 Â  Â City Â  Â  <span class="hljs-type">string</span>
}

<span class="hljs-comment">// UseråµŒå¥—Addresså­—æ®µ</span>
<span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
 Â  Â ID Â  Â  Â <span class="hljs-type">int</span>
 Â  Â Name Â  Â <span class="hljs-type">string</span>
 Â  Â Address Address <span class="hljs-comment">// æ˜¾å¼åµŒå¥—</span>
}

<span class="hljs-comment">// ä½¿ç”¨</span>
u := &amp;User{
 Â  Â ID: Â  <span class="hljs-number">1</span>,
 Â  Â Name: <span class="hljs-string">"å¼ ä¸‰"</span>,
 Â  Â Address: Address{
 Â  Â  Â  Â Province: <span class="hljs-string">"åŒ—äº¬"</span>,
 Â  Â  Â  Â City: Â  Â  <span class="hljs-string">"æœé˜³åŒº"</span>,
 Â   },
}
fmt.Println(u.Address.City) <span class="hljs-comment">// æœé˜³åŒº</span>
</code></pre>
<p>åµŒå¥—çš„ç»“æ„ä½“å­—æ®µçœç•¥åç§°æ—¶ï¼Œå…¶å†…éƒ¨å­—æ®µä¼šè¢« â€œæå‡â€ ä¸ºå¤–å±‚ç»“æ„ä½“çš„ç›´æ¥å­—æ®µï¼Œå¯ç›´æ¥è®¿é—®ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> Address <span class="hljs-keyword">struct</span> {
 Â  Â Province <span class="hljs-type">string</span>
 Â  Â City Â  Â  <span class="hljs-type">string</span>
}

<span class="hljs-comment">// åŒ¿åå­—æ®µåµŒå¥—</span>
<span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
 Â  Â ID Â  Â  Â <span class="hljs-type">int</span>
 Â  Â Name Â  Â <span class="hljs-type">string</span>
 Â  Â Address <span class="hljs-comment">// åŒ¿åå­—æ®µï¼ŒAddressçš„å­—æ®µè¢«æå‡</span>
}

<span class="hljs-comment">// ä½¿ç”¨</span>
u := &amp;User{
 Â  Â ID: Â  <span class="hljs-number">1</span>,
 Â  Â Name: <span class="hljs-string">"å¼ ä¸‰"</span>,
 Â  Â Address: Address{
 Â  Â  Â  Â Province: <span class="hljs-string">"åŒ—äº¬"</span>,
 Â  Â  Â  Â City: Â  Â  <span class="hljs-string">"æœé˜³åŒº"</span>,
 Â   },
}
fmt.Println(u.City) <span class="hljs-comment">// ç›´æ¥è®¿é—®æå‡å­—æ®µï¼Œç­‰ä»·äºu.Address.City</span>
</code></pre>
<h3 data-id="heading-21">ä¸ƒã€åŒ…ï¼ˆpackageï¼‰</h3>
<p>Go è¯­è¨€çš„æ˜¯ä»£ç ç»„ç»‡çš„æ ¸å¿ƒå•å…ƒï¼Œ<strong>ä¸€ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰.go æ–‡ä»¶å¿…é¡»å±äºåŒä¸€ä¸ªåŒ…</strong>ï¼Œä¸”åŒ…åå»ºè®®ä¸ç›®å½•åä¿æŒä¸€è‡´ï¼ˆéå¼ºåˆ¶ï¼Œä½†ç¬¦åˆæœ€ä½³å®è·µï¼‰ã€‚</p>
<p><strong>æ ¸å¿ƒå®šä¹‰è§„åˆ™ï¼š</strong></p>
<ul>
<li>æ¯ä¸ª Go æºæ–‡ä»¶å¿…é¡»ä»¥ <code>package åŒ…å</code> å¼€å¤´ï¼Œå£°æ˜æ‰€å±åŒ…ã€‚</li>
<li>åŒ…å<strong>æ¨è</strong>ä½¿ç”¨å°å†™ã€ç®€çŸ­ã€è§åçŸ¥æ„çš„åç§°ï¼Œé¿å…ä¸‹åˆ’çº¿ã€é©¼å³°å¼ï¼ˆé™¤éæ˜¯çº¦å®šä¿—æˆçš„å¦‚ <code>encoding/json</code>ï¼‰ã€‚</li>
<li>åŒ…åå¯ä»¥ä¸æ‰€åœ¨ç›®å½•åä¸åŒï¼Œä½†<strong>å»ºè®®ä¿æŒä¸€è‡´</strong>ï¼ˆæå‡å¯è¯»æ€§ï¼‰ã€‚</li>
<li><code>main</code> åŒ…æ˜¯ç‰¹æ®ŠåŒ…ï¼šåŒ…å« <code>func main()</code> å‡½æ•°ï¼Œæ˜¯ç¨‹åºçš„å…¥å£åŒ…ï¼Œç¼–è¯‘åç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼›é <code>main</code> åŒ…ç¼–è¯‘åç”Ÿæˆåº“æ–‡ä»¶ï¼ˆ<code>.a</code>ï¼‰ã€‚</li>
<li>åŒä¸€ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰ <code>.go</code> æ–‡ä»¶å¿…é¡»å£°æ˜ä¸ºåŒä¸€ä¸ªåŒ…åã€‚</li>
</ul>
<h4 data-id="heading-22">Package çš„å¯¼å…¥æ–¹å¼</h4>
<p>Go æ”¯æŒå¤šç§çµæ´»çš„åŒ…å¯¼å…¥æ–¹å¼ï¼Œæ ¸å¿ƒå…³é”®å­—æ˜¯ <code>import</code>ï¼Œéœ€å†™åœ¨ <code>package</code> å£°æ˜ä¹‹åã€å‡½æ•° / å˜é‡å®šä¹‰ä¹‹å‰ã€‚</p>
<p>1ã€å…ˆåˆå§‹åŒ– Go æ¨¡å—ï¼ˆç¡®ä¿ä»£ç å¯è¿è¡Œï¼‰ï¼š</p>
<pre><code class="hljs language-go" lang="go"># è¿›å…¥é¡¹ç›®ç›®å½•
cd ~/<span class="hljs-keyword">go</span>-demo
# åˆå§‹åŒ–æ¨¡å—ï¼ˆæ¨¡å—åè‡ªå®šä¹‰ï¼Œå¦‚ demoï¼‰
<span class="hljs-keyword">go</span> mod init demo
</code></pre>
<p>2ã€æ–‡ä»¶è·¯å¾„ï¼š<code>~/go-demo/main.go</code></p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-comment">// æ–¹å¼1ï¼šå¤šè¡Œåˆ†ç»„å¯¼å…¥ï¼ˆæ¨èï¼‰</span>
<span class="hljs-keyword">import</span> (
 Â  Â <span class="hljs-string">"fmt"</span> Â  Â  Â  Â  Â <span class="hljs-comment">// æ ‡å‡†åº“åŒ…</span>
 Â  Â <span class="hljs-string">"demo/utils"</span> Â  <span class="hljs-comment">// è‡ªå®šä¹‰åŒ…ï¼ˆåŸºäºgo modçš„ç›¸å¯¹è·¯å¾„ï¼‰</span>
)

<span class="hljs-comment">// æ–¹å¼2ï¼šå•è¡Œå¯¼å…¥ï¼ˆé€‚åˆå°‘é‡åŒ…ï¼‰</span>
<span class="hljs-comment">// import "fmt"</span>
<span class="hljs-comment">// import "demo/utils"</span>

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
 Â  Â <span class="hljs-comment">// è°ƒç”¨å¯¼å…¥åŒ…çš„å¯¼å‡ºå‡½æ•°ï¼šåŒ…å.å‡½æ•°å</span>
 Â  Â result := utils.Add(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>)
 Â  Â fmt.Printf(<span class="hljs-string">"10 + 20 = %d\n"</span>, result)
}
</code></pre>
<p>3ã€åˆ«åå¯¼å…¥</p>
<p>ç»™å¯¼å…¥çš„åŒ…èµ·åˆ«åï¼Œé€‚ç”¨äºåŒ…åè¿‡é•¿ã€åŒ…åå†²çªæˆ–ç®€åŒ–ä»£ç çš„åœºæ™¯ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
 Â  Â <span class="hljs-string">"fmt"</span>
 Â  Â <span class="hljs-comment">// ç»™utilsåŒ…èµ·åˆ«åu</span>
 Â  Â u <span class="hljs-string">"demo/utils"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
 Â  Â <span class="hljs-comment">// é€šè¿‡åˆ«åè°ƒç”¨åŒ…çš„å‡½æ•°</span>
 Â  Â result := u.Add(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)
 Â  Â fmt.Printf(<span class="hljs-string">"5 + 3 = %d\n"</span>, result)
}
</code></pre>
<p>4ã€è®¾ç½®å›½å†…ä»£ç†</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">go</span> env -w GO111MODULE=on
<span class="hljs-keyword">go</span> env -w GOPROXY=https:<span class="hljs-comment">//goproxy.cn,direct</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[èŠèŠæˆ‘å¯¹ React Hook ä¸ä¸€æ ·çš„ç†è§£]]></title>    <link>https://juejin.cn/post/7592423411562332186</link>    <guid>https://juejin.cn/post/7592423411562332186</guid>    <pubDate>2026-01-07T09:05:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592423411562332186" data-draft-id="7592340733954244658" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="èŠèŠæˆ‘å¯¹ React Hook ä¸ä¸€æ ·çš„ç†è§£"/> <meta itemprop="keywords" content="React.js"/> <meta itemprop="datePublished" content="2026-01-07T09:05:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="feå°é™ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/4019470241892983"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            èŠèŠæˆ‘å¯¹ React Hook ä¸ä¸€æ ·çš„ç†è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4019470241892983/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    feå°é™ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T09:05:55.000Z" title="Wed Jan 07 2026 09:05:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ React Hook</h2>
<p>React Hook æ˜¯ React 16.8 ç‰ˆæœ¬æ¨å‡ºçš„ç‰¹æ€§ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯è®©å‡½æ•°ç»„ä»¶ä¹Ÿèƒ½ä½¿ç”¨çŠ¶æ€ï¼ˆStateï¼‰ã€ç”Ÿå‘½å‘¨æœŸç­‰åŸæœ¬åªæœ‰ç±»ç»„ä»¶æ‰èƒ½æ‹¥æœ‰çš„ React ç‰¹æ€§ã€‚å®ƒé€šè¿‡ä¸€ç³»åˆ—é¢„å®šä¹‰çš„é’©å­å‡½æ•°ï¼ˆå¦‚ useStateã€useEffectï¼‰ï¼Œè®©å¼€å‘è€…æ— éœ€ç¼–å†™ç±»ç»„ä»¶ï¼Œå°±èƒ½æ›´ç®€æ´ã€çµæ´»åœ°ç®¡ç†ç»„ä»¶é€»è¾‘ï¼ŒåŒæ—¶ä¹Ÿä¾¿äºé€»è¾‘çš„å¤ç”¨ä¸æ‹†åˆ†ã€‚</p>
<blockquote>
<p>ç½‘ä¸Šæœ‰å¤§é‡çš„æ€»ç»“æ–‡ç« æ•™ä¼šä½ å¦‚ä½•ä½¿ç”¨ react hookï¼ŒåŒ…æ‹¬ä¸€äº›è¯¸å¦‚å–ä»£ mixin ã€hocã€ç±»ç»„ä»¶ç»§æ‰¿ï¼Œæ‰€ä»¥è¿™ä¸æ˜¯æˆ‘æƒ³è®²çš„é‡ç‚¹ã€‚</p>
</blockquote>
<h2 data-id="heading-1">ä¸¤é¢æ€§</h2>
<p>Hookçš„å‡ºç°ä¸ä»…æ˜¯Reactè¯­æ³•å±‚é¢çš„ä¼˜åŒ–ï¼Œæ›´é‡å¡‘äº†å‡½æ•°ç»„ä»¶çš„èƒ½åŠ›è¾¹ç•Œä¸ä»£ç ç»„ç»‡æ–¹å¼ï¼Œä½†ä¹Ÿéšä¹‹å¼•å…¥äº†æ–°çš„è®¤çŸ¥ä¸å®è·µé—¨æ§›ã€‚ä»æ ¸å¿ƒèƒ½åŠ›æ¥çœ‹ï¼Œå…¶ä»·å€¼ä¸»è¦ä½“ç°åœ¨ä¸‰ä¸ªç»´åº¦ï¼š</p>
<p><strong>1. é€»è¾‘å¤ç”¨çš„é©å‘½æ€§çªç ´</strong>ï¼šç›¸æ¯”ç±»ç»„ä»¶æ—¶ä»£mixinsçš„å‘½åå†²çªã€HOCçš„åµŒå¥—åœ°ç‹±ï¼ŒHooké€šè¿‡è‡ªå®šä¹‰Hookå®ç°äº†â€œé€»è¾‘æŠ½å–-å¤ç”¨â€çš„æç®€è·¯å¾„ã€‚å¼€å‘è€…å¯å°†åˆ†æ•£åœ¨ä¸åŒç”Ÿå‘½å‘¨æœŸçš„å…³è”é€»è¾‘ï¼ˆå¦‚æ•°æ®è¯·æ±‚+åŠ è½½çŠ¶æ€+å¼‚å¸¸å¤„ç†ï¼‰æŠ½ç¦»ä¸ºç‹¬ç«‹Hookï¼Œåœ¨å¤šä¸ªç»„ä»¶ä¸­ç›´æ¥å¤ç”¨ï¼Œä¸”ä¸å­˜åœ¨å±æ€§é€ä¼ æˆ–åµŒå¥—å†—ä½™çš„é—®é¢˜ã€‚</p>
<p><strong>2. çŠ¶æ€ä¸å‰¯ä½œç”¨çš„é›†ä¸­ç®¡æ§</strong>ï¼šç±»ç»„ä»¶ä¸­éœ€åˆ†æ•£åœ¨componentDidMountã€componentDidUpdateã€componentWillUnmountçš„å‰¯ä½œç”¨é€»è¾‘ï¼Œåœ¨Hookä¸­å¯é€šè¿‡useEffectç»Ÿä¸€ç®¡ç†ï¼Œé…åˆè¿”å›å‡½æ•°å®Œæˆèµ„æºæ¸…ç†ï¼Œå®ç°â€œå…³è”é€»è¾‘èšåˆâ€ï¼Œå¤§å¹…æå‡ä»£ç å¯è¯»æ€§ã€‚åŒæ—¶ï¼ŒuseStateã€useReducerè®©å‡½æ•°ç»„ä»¶æ— éœ€ä¾èµ–thiså³å¯å®ç°çµæ´»çš„çŠ¶æ€ç®¡ç†ï¼Œæ‘†è„±äº†ç±»ç»„ä»¶ä¸­thisæŒ‡å‘çš„è¯¸å¤šé™·é˜±ã€‚</p>
<p><strong>3. æ›´å‹å¥½çš„å·¥ç¨‹åŒ–é€‚é…</strong>ï¼šHookå¤©ç„¶å¥‘åˆå‡½æ•°å¼ç¼–ç¨‹ç†å¿µï¼Œä¸TypeScriptçš„ç±»å‹æ¨å¯¼æ— ç¼å…¼å®¹ï¼Œèƒ½æ˜¾è‘—é™ä½å¼ºç±»å‹é¡¹ç›®çš„å¼€å‘æˆæœ¬ã€‚æ­¤å¤–ï¼ŒReact 18åç»­æ¨å‡ºçš„useTransitionã€useDeferredValueç­‰æ–°Hookï¼Œè¿›ä¸€æ­¥æ‹“å±•äº†å¹¶å‘æ¸²æŸ“åœºæ™¯ä¸‹çš„èƒ½åŠ›ï¼Œè®©å‡½æ•°ç»„ä»¶èƒ½æ›´å¥½åœ°é€‚é…ç°ä»£å‰ç«¯å¤æ‚çš„æ€§èƒ½éœ€æ±‚ã€‚</p>
<p>ä½†èƒ½åŠ›çš„æ‹“å±•ä¹Ÿä¼´éšç€æ–°çš„ç—›ç‚¹ï¼Œè¿™äº›é—®é¢˜å¾€å¾€æºäºå¯¹Hookè®¾è®¡ç†å¿µçš„ç†è§£åå·®ï¼Œè€Œéç‰¹æ€§æœ¬èº«ï¼š</p>
<p><strong>1. ä¾èµ–ç®¡ç†çš„â€œéšå½¢é—¨æ§›â€</strong> ï¼šuseEffectã€useCallbackç­‰Hookçš„ä¾èµ–æ•°ç»„æ˜¯æœ€æ˜“è¸©å‘çš„ç¯èŠ‚ã€‚ä¾èµ–ç¼ºå¤±ä¼šå¯¼è‡´å‰¯ä½œç”¨ä¸è§¦å‘æ›´æ–°ï¼Œä¾èµ–å†—ä½™ï¼ˆå¦‚æœªç¼“å­˜çš„å‡½æ•°ã€æ¯æ¬¡æ¸²æŸ“æ–°å»ºçš„å¯¹è±¡ï¼‰åˆ™ä¼šå¼•å‘é¢‘ç¹é‡æ¸²æŸ“ï¼Œæ›´éšè”½çš„æ˜¯â€œä¾èµ–é—­ç¯â€å¯¼è‡´çš„æ— é™å¾ªç¯ï¼ˆå¦‚useEffectä¸­æ›´æ–°stateå´ä¾èµ–è¯¥stateï¼‰ï¼Œæ’æŸ¥æˆæœ¬æé«˜ã€‚</p>
<p><strong>2. é—­åŒ…é™·é˜±çš„é«˜é¢‘è¸©å‘</strong>ï¼šå‡½æ•°ç»„ä»¶æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šåˆ›å»ºæ–°çš„ä½œç”¨åŸŸï¼Œå¼‚æ­¥æ“ä½œï¼ˆå®šæ—¶å™¨ã€Promiseå›è°ƒï¼‰ææ˜“æ•è·æ—§ä½œç”¨åŸŸçš„â€œè¿‡æœŸçŠ¶æ€â€ã€‚ä¾‹å¦‚ä¾èµ–æ•°ç»„ä¸ºç©ºçš„useEffectä¸­ï¼Œå®šæ—¶å™¨å§‹ç»ˆè·å–åˆå§‹stateå€¼ï¼Œè¿™ç±»é—®é¢˜å› è¡¨è±¡ä¸é€»è¾‘é¢„æœŸèƒŒç¦»ï¼Œæ–°æ‰‹å¾€å¾€éš¾ä»¥å®šä½ã€‚</p>
<p><strong>3. å‰¯ä½œç”¨æ¸…ç†çš„éšè”½é£é™©</strong>ï¼šuseEffectçš„æ¸…ç†å‡½æ•°ï¼ˆè¿”å›å‡½æ•°ï¼‰æ˜¯é¿å…å†…å­˜æ³„æ¼çš„å…³é”®ï¼Œä½†å®é™…å¼€å‘ä¸­å¸¸è¢«é—æ¼ï¼ˆå¦‚windowäº‹ä»¶ç›‘å¬ã€WebSocketè¿æ¥æœªè§£ç»‘ï¼‰ã€‚å°¤å…¶åœ¨å¤æ‚ç»„ä»¶ä¸­ï¼Œå¤šä¸ªå‰¯ä½œç”¨å åŠ æ—¶ï¼Œæ¸…ç†é€»è¾‘çš„é¡ºåºä¸å®Œæ•´æ€§æ›´éš¾æŠŠæ§ï¼Œå®¹æ˜“å¼•å‘éšæ€§bugã€‚</p>
<p><strong>4. å¤æ‚åœºæ™¯ä¸‹çš„æ€§èƒ½ä¼˜åŒ–éš¾é¢˜</strong>ï¼šHookç®€åŒ–äº†ä»£ç ç¼–å†™ï¼Œä½†ä¹Ÿå®¹æ˜“å‚¬ç”Ÿâ€œèƒ–Hookâ€â€”â€”ä¸€ä¸ªuseEffectåŒ…å«å¤šä¸ªæ— å…³å‰¯ä½œç”¨é€»è¾‘ï¼Œå¯¼è‡´ç»„ä»¶è€¦åˆåº¦å‡é«˜ã€‚åŒæ—¶ï¼Œæ–°æ‰‹å¸¸å¿½è§†useMemoã€useCallbackçš„åˆç†ä½¿ç”¨ï¼Œåœ¨å¤§æ•°æ®æ¸²æŸ“ã€æ·±å±‚ç»„ä»¶ä¼ é€’å‡½æ•°æ—¶ï¼Œæ˜“å‡ºç°ä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼Œä¸”æ€§èƒ½ç“¶é¢ˆéš¾ä»¥å®šä½ã€‚</p>
<h2 data-id="heading-2">é™åˆ¶ä¸è§„åˆ™</h2>
<p>React Hook å¹¶éå¯ä»¥éšæ„ä½¿ç”¨ï¼Œå…¶è®¾è®¡éµå¾ªä¸¥æ ¼çš„è§„åˆ™ä¸é™åˆ¶ï¼Œè¿™äº›è§„åˆ™æ˜¯ React èƒ½å¤Ÿç¨³å®šç®¡ç† Hook çŠ¶æ€å…³è”çš„æ ¸å¿ƒä¿éšœï¼Œè¿åè§„åˆ™å¯èƒ½å¯¼è‡´ç»„ä»¶æ¸²æŸ“å¼‚å¸¸ã€çŠ¶æ€é”™ä¹±ç­‰éš¾ä»¥æ’æŸ¥çš„é—®é¢˜ã€‚æ ¸å¿ƒè§„åˆ™ä¸é™åˆ¶ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<p><strong>1. åªèƒ½åœ¨å‡½æ•°ç»„ä»¶æˆ–è‡ªå®šä¹‰ Hook çš„é¡¶å±‚è°ƒç”¨</strong>ï¼šè¿™æ˜¯æœ€æ ¸å¿ƒçš„è§„åˆ™ã€‚Hook ä¸èƒ½åµŒå¥—åœ¨å¾ªç¯ã€æ¡ä»¶è¯­å¥ï¼ˆif/elseï¼‰ã€switch è¯­å¥æˆ–åµŒå¥—å‡½æ•°å†…éƒ¨è°ƒç”¨ã€‚åŸå› æ˜¯ React ä¾é  Hook çš„è°ƒç”¨é¡ºåºæ¥å»ºç«‹çŠ¶æ€ä¸ç»„ä»¶çš„å…³è”ï¼Œè‹¥è°ƒç”¨é¡ºåºä¸å›ºå®šï¼ˆå¦‚æ¡ä»¶åˆ¤æ–­å¯¼è‡´æŸäº› Hook æœ‰æ—¶æ‰§è¡Œæœ‰æ—¶ä¸æ‰§è¡Œï¼‰ï¼Œä¼šç ´å React å¯¹çŠ¶æ€çš„è¿½è¸ªï¼Œå¯¼è‡´çŠ¶æ€é”™ä¹±ã€‚ä¾‹å¦‚ï¼šä¸èƒ½åœ¨ if (isShow) { useState(0) } ä¸­è°ƒç”¨ Hookã€‚</p>
<p><strong>2. åªèƒ½åœ¨ React å‡½æ•°ä¸­è°ƒç”¨ Hook</strong>ï¼šHook ä»…èƒ½ç”¨äº React å‡½æ•°ç»„ä»¶ï¼ˆåŒ…æ‹¬ç®­å¤´å‡½æ•°ç»„ä»¶ï¼‰å’Œè‡ªå®šä¹‰ Hook ä¸­ï¼Œä¸èƒ½åœ¨æ™®é€šçš„ JavaScript å‡½æ•°ä¸­è°ƒç”¨ã€‚è¿™æ˜¯å› ä¸º Hook ä¾èµ– React çš„å†…éƒ¨æœºåˆ¶æ¥ç®¡ç†çŠ¶æ€å’Œå‰¯ä½œç”¨ï¼Œæ™®é€š JS å‡½æ•°ä¸å…·å¤‡è¿™æ ·çš„è¿è¡Œç¯å¢ƒï¼Œè°ƒç”¨åæ— æ³•æ­£å¸¸å·¥ä½œã€‚</p>
<p><strong>3. è‡ªå®šä¹‰ Hook å¿…é¡»ä»¥ â€œuseâ€ å¼€å¤´å‘½å</strong>ï¼šè¿™æ˜¯ React çº¦å®šçš„å‘½åè§„èŒƒï¼Œå¹¶éè¯­æ³•å¼ºåˆ¶è¦æ±‚ï¼Œä½†éµå¾ªè¯¥è§„èŒƒèƒ½è®© React è¯†åˆ«è‡ªå®šä¹‰ Hookï¼ŒåŒæ—¶è®©å¼€å‘è€…å¿«é€ŸåŒºåˆ†æ™®é€šå‡½æ•°ä¸ Hookï¼Œé¿å…è¯¯ç”¨ã€‚ä¾‹å¦‚ï¼šuseRequestï¼ˆæ•°æ®è¯·æ±‚ Hookï¼‰ã€useWindowSizeï¼ˆç›‘å¬çª—å£å¤§å° Hookï¼‰ï¼Œè‹¥å‘½åä¸º requestHook åˆ™æ— æ³•è¢« React æ­£ç¡®è¯†åˆ«ä¸º Hookï¼Œä¹Ÿä¸ä¾¿äºå›¢é˜Ÿåä½œç»´æŠ¤ã€‚</p>
<p><strong>4. çŠ¶æ€æ›´æ–°çš„ä¸å¯å˜æ€§é™åˆ¶</strong>ï¼šä½¿ç”¨ useState æˆ– useReducer ç®¡ç†å¼•ç”¨ç±»å‹çŠ¶æ€ï¼ˆå¯¹è±¡ã€æ•°ç»„ï¼‰æ—¶ï¼Œå¿…é¡»éµå¾ªä¸å¯å˜æ€§åŸåˆ™ï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹åŸå§‹çŠ¶æ€å¯¹è±¡ï¼ˆå¦‚ state.obj.name = 'new'ï¼‰ï¼Œè€Œåº”åˆ›å»ºæ–°çš„å¯¹è±¡/æ•°ç»„æ¥æ›´æ–°çŠ¶æ€ã€‚å› ä¸º React é€šè¿‡æµ…æ¯”è¾ƒå¼•ç”¨æ˜¯å¦å˜åŒ–æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°æ¸²æŸ“ï¼Œç›´æ¥ä¿®æ”¹åŸå§‹çŠ¶æ€ä¸ä¼šæ”¹å˜å¼•ç”¨ï¼Œå¯¼è‡´ç»„ä»¶æ— æ³•è§¦å‘é‡æ¸²æŸ“ã€‚</p>
<p><strong>5. å‰¯ä½œç”¨æ¸…ç†çš„å¿…è¦æ€§é™åˆ¶</strong>ï¼šä½¿ç”¨ useEffect ç®¡ç†å‰¯ä½œç”¨ï¼ˆå¦‚äº‹ä»¶ç›‘å¬ã€å®šæ—¶å™¨ã€ç½‘ç»œè¿æ¥ï¼‰æ—¶ï¼Œè‹¥å‰¯ä½œç”¨ä¼šäº§ç”Ÿå†…å­˜æ³„æ¼é£é™©ï¼ˆå¦‚ç»„ä»¶å¸è½½åä»æ‰§è¡Œå›è°ƒï¼‰ï¼Œå¿…é¡»åœ¨ useEffect çš„è¿”å›å‡½æ•°ä¸­ç¼–å†™æ¸…ç†é€»è¾‘ï¼ˆå¦‚ç§»é™¤äº‹ä»¶ç›‘å¬ã€æ¸…é™¤å®šæ—¶å™¨ã€å…³é—­è¿æ¥ï¼‰ã€‚è¿™æ˜¯ä¿éšœç»„ä»¶æ€§èƒ½å’Œç¨³å®šæ€§çš„é‡è¦é™åˆ¶ï¼Œå¿½ç•¥æ¸…ç†å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ã€å¤šæ¬¡è§¦å‘å‰¯ä½œç”¨ç­‰é—®é¢˜ã€‚</p>
<h2 data-id="heading-3">ä¸ä¸€æ ·çš„æƒ³æ³•</h2>
<h3 data-id="heading-4">æŸäº›è§„åˆ™æ˜¯å¯ä»¥æ‰“ç ´çš„</h3>
<p><a href="https://juejin.cn/post/7584298069610283008" target="_blank" title="https://juejin.cn/post/7584298069610283008">juejin.cn/post/758429â€¦</a></p>
<ol>
<li>åªèƒ½åœ¨å‡½æ•°é¡¶éƒ¨ä½¿ç”¨ hook</li>
<li>æ¡ä»¶ hook</li>
<li>ç±»ç»„ä»¶å†…ä½¿ç”¨ hook</li>
</ol>
<h3 data-id="heading-5">ç±»ç»„ä»¶å®Œå…¨æ”¾å¼ƒäº†å—ï¼Ÿä»£ä»·æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>åœ¨æ–°çš„é¡¹ç›®ä¸­ï¼Œå‡ ä¹å·²ç»çœ‹ä¸åˆ°ç±»ç»„ä»¶è¢«ä½¿ç”¨ï¼ˆé™¤äº†æ‰‹æ“ ErrorBoundary)ã€‚</p>
<p>ä½†åœ¨äº«å— hook å¸¦æ¥å‡½æ•°å¼ç»„ä»¶é­”æ³•çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿå¼•å…¥äº†è®¸å¤šçš„é—®é¢˜</p>
<ol>
<li>ä¸ºäº†é˜²æ­¢å­ç»„ä»¶é‡æ¸²æŸ“ï¼Œéœ€è¦å¯¹å›è°ƒå‡½æ•°ã€æ•°æ®åš memoï¼ˆuseCallbackã€useMemo)</li>
<li>å°‘ä¼ ä¸ª depï¼Œå¯¼è‡´é—­åŒ…é—®é¢˜ã€å­ç»„ä»¶ä¸æ›´æ–°é—®é¢˜</li>
<li>ç„¶ååˆå¼•å…¥äº† React Compiler ã€useEventEffect</li>
</ol>
<p>è¿™å°±æœ‰ç‚¹ä¸ºäº†å¡«ä¸€ä¸ªå‘ï¼ŒæŒ–äº†å¦ä¸€ä¸ªå‘çš„æ„Ÿè§‰</p>
<p>ç±»ç»„ä»¶æ˜¯æœ‰å¯å–ä¹‹å¤„çš„ï¼Œæ¯”å¦‚</p>
<ol>
<li>
<p>å›è°ƒæ–¹æ³•é€šè¿‡ this.state æ˜¯å¯ä»¥å–åˆ°æœ€æ–°çš„çŠ¶æ€çš„ï¼Œå› æ­¤ä¸éœ€è¦é‚£ä¹ˆå¤š useCallback useMemoï¼Œå‡å°‘äº†æ€§èƒ½ä¼˜åŒ–çš„å¿ƒæ™ºè´Ÿæ‹…ï¼›</p>
</li>
<li>
<p>ref å¯ä»¥ç›´æ¥ä½¿ç”¨ç»„ä»¶çš„å±æ€§ï¼Œæ— éœ€åƒå‡½æ•°ç»„ä»¶é‚£æ ·å€ŸåŠ© useRef å†æ‰‹åŠ¨å…³è”ï¼Œæ“ä½œæ›´ç®€æ´ï¼›</p>
</li>
<li>
<p>ç”Ÿå‘½å‘¨æœŸé€»è¾‘æ—¶åºæ›´ç›´è§‚ï¼šç±»ç»„ä»¶é€šè¿‡ componentDidMountã€componentDidUpdateã€componentWillUnmount ç­‰æ˜ç¡®çš„é’©å­åˆ’åˆ†ç”Ÿå‘½å‘¨æœŸé˜¶æ®µï¼Œå¤æ‚å‰¯ä½œç”¨ï¼ˆå¦‚å¤šè½®æ•°æ®è¯·æ±‚ã€æ—¶åºä¾èµ–çš„èµ„æºæ“ä½œï¼‰çš„æ‰§è¡Œæ—¶æœºæ›´æ˜“æŠŠæ§ï¼Œæ— éœ€åƒ useEffect é‚£æ ·é€šè¿‡ä¾èµ–æ•°ç»„é—´æ¥æ§åˆ¶ï¼›</p>
</li>
<li>
<p>çŠ¶æ€æ›´æ–°æ”¯æŒè‡ªåŠ¨åˆå¹¶ï¼šç±»ç»„ä»¶ä¸­ setState ä¼šè‡ªåŠ¨åˆå¹¶å¯¹è±¡ç±»å‹çŠ¶æ€çš„éƒ¨åˆ†å±æ€§ï¼ˆå¦‚ this.setState({ name: 'new' }) ä¸ä¼šè¦†ç›–å…¶ä»–æœªä¿®æ”¹çš„çŠ¶æ€å­—æ®µï¼‰ï¼Œè€Œå‡½æ•°ç»„ä»¶ useState éœ€æ‰‹åŠ¨é€šè¿‡æ‰©å±•è¿ç®—ç¬¦ï¼ˆ...ï¼‰å®ç°åˆå¹¶ï¼Œé™ä½äº†çŠ¶æ€æ›´æ–°çš„ä»£ç å¤æ‚åº¦ã€‚</p>
</li>
</ol>
<p>ä½† Hook åœ¨é€»è¾‘æ³¨å…¥ã€å¤ç”¨æ–¹é¢ç›¸æ¯”ç±»ç»„ä»¶æœ‰ç»å¯¹çš„ä¼˜åŠ¿ã€‚</p>
<p><strong>æ‰€ä»¥æœ‰æ²¡æœ‰äººæƒ³è¿‡åœ¨ç±»ç»„ä»¶é‡Œé¢ä½¿ç”¨ Hookï¼Œå°†ä¸¤è€…çš„ä¼˜åŠ¿ç»“åˆä¸€ä¸‹ï¼Ÿ</strong> <a href="https://juejin.cn/post/7584298069610283008#heading-4" target="_blank" title="https://juejin.cn/post/7584298069610283008#heading-4">juejin.cn/post/758429â€¦</a></p>
<h3 data-id="heading-6">Hook ä½œä¸ºçŠ¶æ€ç®¡ç†çš„ä¸€ç§æ–¹å¼ï¼Œå´ä¾èµ–äºç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</h3>
<p>æƒ³å¿… React å¼€å‘è€…æœ€å¤´ç–¼çš„å°±æ˜¯çŠ¶æ€ç®¡ç†æ–¹æ¡ˆäº†ï¼Œä½†æ˜¯ä¸€æ—¦å¼•å…¥äº†çŠ¶æ€ç®¡ç†æ–¹æ¡ˆå¦‚ reduxã€zustandï¼Œä½ ä¼šç›´æ¥å¤±å» Hook çš„èƒ½åŠ›ã€‚ <a href="https://juejin.cn/post/7591728734983208987#heading-7" target="_blank" title="https://juejin.cn/post/7591728734983208987#heading-7">juejin.cn/post/759172â€¦</a></p>
<p>åŸæœ¬å¯ä»¥ä½¿ç”¨ ahooks çš„ useRequest å‘èµ·è¯·æ±‚ï¼Œè¿ç§»åˆ° zustand ç›´æ¥å°±æ˜¯ä¸€å¨ã€‚</p>
<p>æ²¡æœ‰å¯¹æ¯”ï¼Œå°±çœŸæ²¡æœ‰ä¼¤å®³ã€‚</p>
<p>å¦‚æœä½ ç”¨è¿‡ vue ç”Ÿæ€ä¸­çš„ pinia <a href="https://link.juejin.cn?target=https%3A%2F%2Fpinia.vuejs.org%2Fzh%2Fcookbook%2Fcomposables.html%23setup-stores" target="_blank" title="https://pinia.vuejs.org/zh/cookbook/composables.html#setup-stores" ref="nofollow noopener noreferrer">pinia.vuejs.org/zh/cookbookâ€¦</a> ï¼Œå°±ä¼šçŸ¥é“ pinia æ˜¯å¯ä»¥ç›´æ¥å¤ç”¨ vue çš„ composition api ä»¥åŠ VueUse ç›¸å…³çš„èƒ½åŠ›çš„ã€‚</p>
<p>é’ˆå¯¹è¿™ä¸ªè¯¾é¢˜ï¼Œæˆ‘ä¹Ÿè¿›è¡Œäº†å°è¯•ã€‚ <a href="https://juejin.cn/post/7591207451779121178" target="_blank" title="https://juejin.cn/post/7591207451779121178">juejin.cn/post/759120â€¦</a></p>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p>ç»¼ä¸Šï¼ŒReact Hook ç»éå®Œç¾çš„â€œé“¶å¼¹â€ï¼Œè€Œæ˜¯ä¸€æŠŠå…¼å…·å¼ºå¤§èƒ½åŠ›ä¸ä½¿ç”¨é—¨æ§›çš„â€œåŒåˆƒå‰‘â€ã€‚å®ƒä»¥é©å‘½æ€§çš„é€»è¾‘å¤ç”¨æ–¹å¼ã€é›†ä¸­åŒ–çš„çŠ¶æ€ä¸å‰¯ä½œç”¨ç®¡æ§ï¼Œä»¥åŠå‹å¥½çš„å·¥ç¨‹åŒ–é€‚é…æ€§ï¼Œé‡å¡‘äº†Reactå‡½æ•°ç»„ä»¶çš„å¼€å‘æ¨¡å¼ï¼Œæˆä¸ºç°ä»£Reacté¡¹ç›®çš„ä¸»æµé€‰æ‹©ã€‚ä½†ä¸æ­¤åŒæ—¶ï¼Œä¾èµ–ç®¡ç†éš¾é¢˜ã€é—­åŒ…é™·é˜±ã€å‰¯ä½œç”¨æ¸…ç†é£é™©ç­‰ç—›ç‚¹ï¼Œä¹Ÿè®©å¼€å‘è€…é¢ä¸´æ›´é«˜çš„è®¤çŸ¥ä¸å®è·µæˆæœ¬ã€‚</p>
<p>å…³äºHookçš„è§„åˆ™ï¼Œå¹¶éç»å¯¹ä¸å¯çªç ´ï¼Œåœ¨ç‰¹å®šåœºæ™¯ä¸‹é€šè¿‡åˆç†å°è£…å®ç°åŠ¨æ€Hookè°ƒç”¨ã€ç±»ç»„ä»¶é—´æ¥ä½¿ç”¨Hookç­‰æ¢ç´¢ï¼Œä¸ºç‰¹æ®Šéœ€æ±‚ï¼ˆå¦‚æ—§é¡¹ç›®è¿ç§»ï¼‰æä¾›äº†æ›´å¤šå¯èƒ½ï¼Œä½†éœ€è­¦æƒ•ä»£ç å¤æ‚åº¦æå‡çš„é£é™©ã€‚è€Œç±»ç»„ä»¶ä¸Hookçš„å–èˆä¹‹äº‰ï¼Œæœ¬è´¨æ˜¯å¼€å‘æ•ˆç‡ã€å¯ç»´æŠ¤æ€§ä¸æ€§èƒ½ä¹‹é—´çš„æƒè¡¡â€”â€”ç±»ç»„ä»¶åœ¨çŠ¶æ€è·å–ã€ç”Ÿå‘½å‘¨æœŸç›´è§‚æ€§ç­‰æ–¹é¢çš„ä¼˜åŠ¿ä»ä¸å¯å¿½è§†ï¼Œå®Œå…¨æ”¾å¼ƒå¯èƒ½é™·å…¥â€œä¸ºå¡«å‘è€ŒæŒ–æ–°å‘â€çš„å¾ªç¯ã€‚</p>
<p>æ­¤å¤–ï¼ŒHookä¾èµ–ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„ç‰¹æ€§ï¼Œä½¿å…¶åœ¨çŠ¶æ€ç®¡ç†åœºæ™¯ä¸­å­˜åœ¨å¤©ç„¶å±€é™ï¼Œç›¸æ¯”Vue Piniaå¯¹ç»„åˆå¼APIçš„æ— ç¼å¤ç”¨èƒ½åŠ›ï¼Œä»æœ‰ä¼˜åŒ–ç©ºé—´ã€‚è¿™ä¹Ÿæç¤ºæˆ‘ä»¬ï¼Œä¸åº”ç›²ç›®è¿·ä¿¡Hookçš„â€œé­”æ³•â€ï¼Œè€Œåº”å›å½’å¼€å‘æœ¬è´¨ï¼šæ—¢è¦å……åˆ†å‘æŒ¥å…¶é€»è¾‘å¤ç”¨çš„æ ¸å¿ƒä¼˜åŠ¿ï¼Œä¹Ÿè¦ç†æ€§çœ‹å¾…å…¶ä¸è¶³ï¼Œç»“åˆé¡¹ç›®åœºæ™¯ï¼ˆæ–°æ—§é¡¹ç›®ã€å¤æ‚åº¦ã€å›¢é˜Ÿä¹ æƒ¯ï¼‰çµæ´»é€‰æ‹©æŠ€æœ¯æ–¹æ¡ˆï¼Œç”šè‡³æ¢ç´¢ç±»ç»„ä»¶ä¸Hookçš„ä¼˜åŠ¿èåˆè·¯å¾„ã€‚æœ€ç»ˆï¼ŒæŠ€æœ¯çš„ä»·å€¼åœ¨äºè§£å†³é—®é¢˜ï¼Œå¯¹Hookçš„ç†è§£ä¸åº”å±€é™äºâ€œè§„èŒƒç”¨æ³•â€ï¼Œè€Œåº”åŸºäºå¯¹å…¶åº•å±‚é€»è¾‘çš„æ·±åˆ»è®¤çŸ¥ï¼Œå®ç°çµæ´»ã€é«˜æ•ˆä¸”ç¨³å®šçš„å¼€å‘å®è·µã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React æ€§èƒ½ä¼˜åŒ–çš„â€œå§é¾™å‡¤é›â€ï¼šuseMemo ä¸ useCallback åˆ°åº•è¯¥æ€ä¹ˆç”¨]]></title>    <link>https://juejin.cn/post/7592382702944501806</link>    <guid>https://juejin.cn/post/7592382702944501806</guid>    <pubDate>2026-01-07T08:55:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592382702944501806" data-draft-id="7592382702944485422" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" React æ€§èƒ½ä¼˜åŒ–çš„â€œå§é¾™å‡¤é›â€ï¼šuseMemo ä¸ useCallback åˆ°åº•è¯¥æ€ä¹ˆç”¨"/> <meta itemprop="keywords" content="React.js"/> <meta itemprop="datePublished" content="2026-01-07T08:55:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç™½å…°åœ°ç©ºç“¶"/> <meta itemprop="url" content="https://juejin.cn/user/191753514127514"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             React æ€§èƒ½ä¼˜åŒ–çš„â€œå§é¾™å‡¤é›â€ï¼šuseMemo ä¸ useCallback åˆ°åº•è¯¥æ€ä¹ˆç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/191753514127514/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç™½å…°åœ°ç©ºç“¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T08:55:16.000Z" title="Wed Jan 07 2026 08:55:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ React çš„ä¸–ç•Œé‡Œï¼Œç»„ä»¶çš„æ¸²æŸ“å°±åƒä¸€åœºâ€œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«â€çš„å¤šç±³è¯ºéª¨ç‰Œã€‚çˆ¶ç»„ä»¶æ‰“ä¸ªå–·åšï¼ˆState å˜äº†ï¼‰ï¼Œåº•ä¸‹çš„å­ç»„ä»¶å…¨å¾—è·Ÿç€æ„Ÿå†’ï¼ˆé‡æ–°æ¸²æŸ“ï¼‰ã€‚</p>
<p>è™½ç„¶ React å¤Ÿå¿«ï¼Œä½†å¦‚æœä½ çš„ç»„ä»¶é‡Œä½ç€ä¸€åªâ€œåé‡‘å…½â€ï¼ˆæ˜‚è´µçš„è®¡ç®—é€»è¾‘ï¼‰ï¼Œæˆ–è€…ä½ çš„å­ç»„ä»¶æ˜¯ä¸ªâ€œå¼ºè¿«ç—‡â€ï¼ˆéè¦ Props å®Œå…¨æ²¡å˜æ‰è‚¯ä¸æ¸²æŸ“ï¼‰ï¼Œé‚£ä½ å°±å¾—è¯·å‡º React æ€§èƒ½ä¼˜åŒ–çš„ä¸¤å°Šå¤§ç¥äº†ï¼š<strong><code>useMemo</code></strong> å’Œ <strong><code>useCallback</code></strong>ã€‚</p>
<p>å¾ˆå¤šäººåˆ†ä¸æ¸…å®ƒä¿©ï¼Œå…¶å®å¾ˆç®€å•ï¼š</p>
<ul>
<li><strong><code>useMemo</code></strong> ç¼“å­˜çš„æ˜¯<strong>ç»“æœ</strong>ï¼ˆè„‘å­è½¬å®Œäº§å‡ºçš„ä¸œè¥¿ï¼‰ã€‚</li>
<li><strong><code>useCallback</code></strong> ç¼“å­˜çš„æ˜¯<strong>å‡½æ•°æœ¬èº«</strong>ï¼ˆå¹²æ´»çš„å·¥å…·ï¼‰ã€‚</li>
</ul>
<p>ä»Šå¤©å’±ä»¬å°±æ‹¿ä¸€æ®µçœŸå®çš„ä»£ç ï¼Œæ‰’ä¸€æ‰’è¿™ä¿©è´§åˆ°åº•æ€ä¹ˆå¸®æˆ‘ä»¬çœèµ„æºã€‚</p>
<hr/>
<h2 data-id="heading-0">useMemoï¼šç»™ä½ çš„ç»„ä»¶è£…ä¸ªâ€œç¼“å­˜å¤§è„‘â€</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æœ‰ä¸€ä¸ªè¶…çº§å¤æ‚çš„æ•°å­¦é¢˜è¦ç®—ï¼ˆæ¯”å¦‚ä» 0 åŠ åˆ° 1000 ä¸‡ï¼‰ã€‚</p>
<h3 data-id="heading-1">ä¼˜åŒ–å‰ï¼šç¬¨ç¬¨çš„å¤è¯»æœº</h3>
<p>çœ‹è¿™æ®µä»£ç ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª <code>slowSum</code> å‡½æ•°ï¼Œå®ƒæ¨¡æ‹Ÿäº†ä¸€ä¸ªè€—æ—¶çš„è®¡ç®—è¿‡ç¨‹ï¼š</p>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ˜‚è´µçš„è®¡ç®—ï¼šæ¨¡æ‹Ÿ CPU å¯†é›†å‹ä»»åŠ¡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">slowSum</span>(<span class="hljs-params">n</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ”¥ ç–¯ç‹‚è®¡ç®—ä¸­...'</span>);
  <span class="hljs-keyword">let</span> sum = <span class="hljs-number">0</span>;
  <span class="hljs-comment">// å‡è£…è¿™é‡Œè·‘äº†å¾ˆä¹…</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; n * <span class="hljs-number">10000000</span>; i++) {
    sum += i;
  }
  <span class="hljs-keyword">return</span> sum;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// è¿™ä¸ª state å’Œè®¡ç®—æ¯«æ— å…³ç³»</span>
  <span class="hljs-keyword">const</span> [num, setNum] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>);     <span class="hljs-comment">// è¿™ä¸ª state æ‰æ˜¯è®¡ç®—éœ€è¦çš„</span>

  <span class="hljs-comment">// ğŸ˜± ç¾éš¾ç°åœºï¼š</span>
  <span class="hljs-comment">// åªè¦ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼ˆæ¯”å¦‚ä½ ç‚¹å‡»äº† count+1ï¼‰ï¼Œè¿™è¡Œä»£ç å°±ä¼šé‡æ–°è·‘ä¸€éï¼</span>
  <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">slowSum</span>(num); 

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è®¡ç®—ç»“æœï¼š{result}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      {/* ç‚¹å‡»è¿™é‡Œï¼ŒslowSum å±…ç„¶ä¹Ÿä¼šæ‰§è¡Œï¼Ÿï¼ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)}&gt;Count + 1 (æ— è¾œè·¯äºº)<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span> 
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setNum(num + 1)}&gt;Num + 1 (æ­£ä¸»)<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}
</code></pre>
<p><strong>ç—›ç‚¹</strong>ï¼šå½“ä½ ç‚¹å‡» <code>Count + 1</code> æ—¶ï¼Œæ˜æ˜ <code>num</code> æ²¡å˜ï¼Œç»“æœä¹Ÿæ²¡å˜ï¼Œä½† React é‡æ–°æ‰§è¡Œç»„ä»¶å‡½æ•°ï¼Œ<code>slowSum</code> åˆå‚»ä¹ä¹åœ°è·‘äº†ä¸€éã€‚é¡µé¢å¡é¡¿éšä¹‹è€Œæ¥ã€‚</p>
<h3 data-id="heading-2">ä¼˜åŒ–åï¼šå­¦ä¼šâ€œå·æ‡’â€</h3>
<p>è¿™æ—¶å€™ <code>useMemo</code> å°±ç™»åœºäº†ã€‚å®ƒåƒä¸€ä¸ªè®°æ€§å¾ˆå¥½çš„ä¼šè®¡ï¼Œåªæœ‰å½“<strong>ä¾èµ–é¡¹</strong>ï¼ˆè´¦æœ¬ï¼‰å˜äº†ï¼Œå®ƒæ‰é‡æ–°ç®—ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// âœ… æ™ºèƒ½ç¼“å­˜</span>
const result = <span class="hljs-built_in">useMemo</span>(() =&gt; {
  return <span class="hljs-built_in">slowSum</span>(num);
}, <span class="hljs-selector-attr">[num]</span>); <span class="hljs-comment">// ğŸ‘ˆ åªæœ‰å½“ num å˜äº†ï¼Œæ‰é‡æ–°è·‘é‡Œé¢çš„å‡½æ•°</span>
</code></pre>
<p>ç°åœ¨ä½ å†ç–¯ç‹‚ç‚¹å‡» <code>Count + 1</code>ï¼Œæ§åˆ¶å°ä¸ä¼šå†æ‰“å°â€œè®¡ç®—ä¸­...â€ï¼Œé¡µé¢ä¸èˆ¬é¡ºæ»‘ã€‚</p>
<h3 data-id="heading-3">åœºæ™¯äºŒï¼šä»£æ›¿ Vue çš„ Computed</h3>
<p>é™¤äº†æ˜‚è´µè®¡ç®—ï¼Œ<code>useMemo</code> ä¹Ÿæ˜¯å¤„ç†<strong>æ´¾ç”ŸçŠ¶æ€</strong>çš„ç¥å™¨ï¼Œç±»ä¼¼äº Vue é‡Œçš„ <code>computed</code>ã€‚</p>
<p>æ¯”å¦‚è¿™é‡Œæœ‰ä¸€ä¸ªè¿‡æ»¤åˆ—è¡¨çš„éœ€æ±‚ï¼š</p>
<p>JavaScript</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-section">[keyword, setKeyword]</span> = useState('')<span class="hljs-comment">;</span>
const <span class="hljs-attr">list</span> = [<span class="hljs-string">'apple'</span>, <span class="hljs-string">'banana'</span>, <span class="hljs-string">'orange'</span>, <span class="hljs-string">'pear'</span>]<span class="hljs-comment">;</span>

// å¦‚æœä¸ç”¨ useMemoï¼š
// æ¯æ¬¡ç»„ä»¶æ¸²æŸ“ï¼ˆæ¯”å¦‚ count å˜äº†ï¼‰ï¼Œfilter éƒ½ä¼šé‡æ–°éå†æ•°ç»„ã€‚
// è™½ç„¶è¿™é‡Œæ•°ç»„å°çœ‹ä¸å‡ºæ€§èƒ½æŸè€—ï¼Œä½†å¦‚æœæ˜¯å¤§æ•°æ®åˆ—è¡¨ï¼Œè¿™å°±æ˜¯æ€§èƒ½æ€æ‰‹ã€‚

const <span class="hljs-attr">filterList</span> = useMemo(() =&gt; {
  // åªæœ‰å…³é”®è¯å˜äº†ï¼Œæˆ‘æ‰é‡æ–°è¿‡æ»¤
  return list.filter(<span class="hljs-attr">item</span> =&gt; item.includes(keyword))<span class="hljs-comment">;</span>
}, <span class="hljs-section">[keyword]</span>)<span class="hljs-comment">;</span>
</code></pre>
<p><em>(æ³¨ï¼š<code>includes('')</code> é»˜è®¤ä¸º trueï¼Œæ‰€ä»¥åˆå§‹çŠ¶æ€ä¼šæ˜¾ç¤ºæ‰€æœ‰æ°´æœï¼Œå®Œç¾ç¬¦åˆæœç´¢é€»è¾‘ã€‚)</em></p>
<hr/>
<h2 data-id="heading-4">useCallback + memoï¼šçˆ¶å­ç»„ä»¶çš„â€œå®šæƒ…ä¿¡ç‰©â€</h2>
<p>æ¥ä¸‹æ¥èŠèŠ <strong><code>useCallback</code></strong>ã€‚å¾ˆå¤šäººè§‰å¾—ï¼šâ€œæˆ‘ä¸å°±ä¼ ä¸ªå‡½æ•°ç»™å­ç»„ä»¶å—ï¼Œä¸ºå•¥è¦åŒ…ä¸€å±‚ï¼Ÿâ€</p>
<p>è¿™å¾—ä» JavaScript çš„ç‰¹æ€§è¯´èµ·ã€‚</p>
<h3 data-id="heading-5">ä¼˜åŒ–å‰ï¼šæœ€ç†Ÿæ‚‰çš„é™Œç”Ÿäºº</h3>
<p>çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼  Propsï¼Œå­ç»„ä»¶ç”¨ <code>React.memo</code> åŒ…è£¹ï¼Œæœ¬æ¥æ˜¯æƒ³åšæ€§èƒ½ä¼˜åŒ–ï¼ˆProps ä¸å˜å°±ä¸é‡æ–°æ¸²æŸ“ï¼‰ã€‚ä½†æ˜¯...</p>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å­ç»„ä»¶ï¼šä½¿ç”¨äº† memoï¼Œç†è®ºä¸Š Props ä¸å˜æˆ‘å°±ä¸æ¸²æŸ“</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Child</span> = <span class="hljs-title function_">memo</span>(<span class="hljs-function">(<span class="hljs-params">{ handleClick }</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ‘¶ Child é‡æ–°æ¸²æŸ“äº† (æˆ‘ä¸æƒ³è¿™æ ·)'</span>);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>å­ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-comment">// ğŸ˜± é—®é¢˜å‡ºåœ¨è¿™é‡Œï¼š</span>
  <span class="hljs-comment">// æ¯æ¬¡ App é‡æ–°æ¸²æŸ“ï¼ŒhandleClick éƒ½ä¼šè¢«é‡æ–°å®šä¹‰ï¼</span>
  <span class="hljs-comment">// åœ¨ JS é‡Œï¼Œfunction A() {} !== function A() {}</span>
  <span class="hljs-comment">// å¼•ç”¨åœ°å€å˜äº† -&gt; memo è®¤ä¸º Props å˜äº† -&gt; å­ç»„ä»¶è¢«è¿«æ¸²æŸ“</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'click'</span>);
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* æˆ‘æ”¹äº† countï¼Œè·Ÿ Child åŠæ¯›é’±å…³ç³»æ²¡æœ‰ï¼Œä½† Child è¿˜æ˜¯æ¸²æŸ“äº† */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)}&gt;Count + 1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">handleClick</span>=<span class="hljs-string">{handleClick}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>ç—›ç‚¹</strong>ï¼š<code>React.memo</code> å°±åƒä¸€ä¸ªä¸¥æ ¼çš„ä¿å®‰ï¼Œå®ƒå¯¹æ¯” Props æ˜¯å¦å˜åŒ–ç”¨çš„æ˜¯â€œæµ…æ¯”è¾ƒâ€ï¼ˆå¼•ç”¨å¯¹æ¯”ï¼‰ã€‚å› ä¸ºçˆ¶ç»„ä»¶æ¯æ¬¡æ¸²æŸ“éƒ½ç”Ÿæˆä¸€ä¸ªæ–°çš„å‡½æ•°åœ°å€ï¼Œä¿å®‰è§‰å¾—ï¼šâ€œè¿™å‡½æ•°æ¢äººäº†ï¼â€ äºæ˜¯æ”¾è¡Œï¼Œå¯¼è‡´å­ç»„ä»¶æ— æ„ä¹‰æ¸²æŸ“ã€‚</p>
<h3 data-id="heading-6">ä¼˜åŒ–åï¼šç»™å‡½æ•°å‘ä¸ªâ€œèº«ä»½è¯â€</h3>
<p><code>useCallback</code> çš„ä½œç”¨å°±æ˜¯æŠŠè¿™ä¸ªå‡½æ•°â€œå›ºåŒ–â€ä¸‹æ¥ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… ä¿æŒå‡½æ•°å¼•ç”¨ç¨³å®š</span>
<span class="hljs-keyword">const</span> handleClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'click'</span>);
}, []); <span class="hljs-comment">// ä¾èµ–ä¸ºç©ºï¼Œè¯´æ˜è¿™ä¸ªå‡½æ•°æ°¸è¿œæ˜¯åŒä¸€ä¸ªå¼•ç”¨åœ°å€</span>
</code></pre>
<p>ç°åœ¨ï¼Œå½“ä½ ç‚¹å‡» <code>Count + 1</code> æ—¶ï¼Œçˆ¶ç»„ä»¶é‡æ¸²æŸ“äº†ï¼Œä½† <code>handleClick</code> è¿˜æ˜¯åŸæ¥é‚£ä¸ª <code>handleClick</code>ã€‚<code>Child</code> ç»„ä»¶å‘ç° Props æ²¡å˜ï¼Œå°±å®‰å¿ƒåœ°èººå¹³ä¸æ¸²æŸ“äº†ã€‚</p>
<p><strong>æ³¨æ„</strong>ï¼šå¦‚æœä½ éœ€è¦åœ¨å›è°ƒé‡Œç”¨åˆ° <code>count</code>ï¼Œè®°å¾—æŠŠå®ƒåŠ è¿›ä¾èµ–æ•°ç»„ï¼š</p>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> handleClick = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// å¦‚æœä¾èµ–æ•°ç»„é‡Œæ²¡å†™ countï¼Œè¿™é‡Œæ°¸è¿œæ‰“å° 0 (é—­åŒ…é™·é˜±)</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'click'</span>, count); 
}, [count]); 
<span class="hljs-comment">// ğŸ‘† ä¸€æ—¦ count å˜äº†ï¼Œå‡½æ•°å¼•ç”¨è¿˜æ˜¯ä¼šå˜ï¼ŒChild è¿˜æ˜¯ä¼šæ¸²æŸ“ã€‚</span>
<span class="hljs-comment">// è¿™æ˜¯ä¸ºäº†ä¿è¯é€»è¾‘æ­£ç¡®æ€§å¿…é¡»ä»˜å‡ºçš„ä»£ä»·ã€‚</span>
</code></pre>
<hr/>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p>åˆ«ä¸ºäº†ä¼˜åŒ–è€Œä¼˜åŒ–ã€‚<code>useMemo</code> å’Œ <code>useCallback</code> ä¹Ÿæ˜¯æœ‰æˆæœ¬çš„ï¼ˆå®ƒä»¬æœ¬èº«ä¹Ÿéœ€è¦æ¶ˆè€—å†…å­˜æ¥åšä¾èµ–å¯¹æ¯”ï¼‰ã€‚</p>
<p><strong>è¯·éµå¾ªè¿™å¥—â€œå¿ƒæ³•â€ï¼š</strong></p>
<ol>
<li>
<p><strong>useMemo</strong>ï¼š</p>
<ul>
<li><strong>æ˜‚è´µè®¡ç®—</strong>ï¼šå½“ä½ çœ‹åˆ° <code>for</code> å¾ªç¯æ¬¡æ•°å·¨å¤§ï¼Œæˆ–è€…å¤æ‚çš„é€’å½’æ—¶ã€‚</li>
<li><strong>å¼•ç”¨ç¨³å®š</strong>ï¼šå½“ä½ è®¡ç®—å‡ºçš„å¯¹è±¡/æ•°ç»„ï¼Œè¦ä½œä¸º <code>useEffect</code> çš„ä¾èµ–é¡¹ï¼Œæˆ–è€…ä¼ ç»™è¢« <code>memo</code> åŒ…è£¹çš„å­ç»„ä»¶æ—¶ã€‚</li>
</ul>
</li>
<li>
<p><strong>useCallback</strong>ï¼š</p>
<ul>
<li><strong>é…åˆ React.memo</strong>ï¼šå½“ä½ çš„å‡½æ•°éœ€è¦ä¼ ç»™ä¸€ä¸ªâ€œå¾ˆé‡â€çš„å­ç»„ä»¶ï¼Œä¸”è¯¥å­ç»„ä»¶è¢« <code>memo</code> åŒ…è£¹æ—¶ã€‚</li>
<li><strong>ä½œä¸º Hooks ä¾èµ–</strong>ï¼šå½“è¿™ä¸ªå‡½æ•°è¦è¢«ç”¨ä½œ <code>useEffect</code> çš„ä¾èµ–é¡¹æ—¶ã€‚</li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨å¿ƒå†™å¥½ä¸€ä¸ªç™»å½•é¡µï¼šä»£ç ã€ä½“éªŒä¸ç»†èŠ‚çš„å¹³è¡¡]]></title>    <link>https://juejin.cn/post/7592236397535477796</link>    <guid>https://juejin.cn/post/7592236397535477796</guid>    <pubDate>2026-01-07T09:09:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592236397535477796" data-draft-id="7592159803410317348" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨å¿ƒå†™å¥½ä¸€ä¸ªç™»å½•é¡µï¼šä»£ç ã€ä½“éªŒä¸ç»†èŠ‚çš„å¹³è¡¡"/> <meta itemprop="keywords" content="React.js,äº¤äº’è®¾è®¡,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-07T09:09:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ‰æ„ä¹‰"/> <meta itemprop="url" content="https://juejin.cn/user/1739866211617625"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨å¿ƒå†™å¥½ä¸€ä¸ªç™»å½•é¡µï¼šä»£ç ã€ä½“éªŒä¸ç»†èŠ‚çš„å¹³è¡¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1739866211617625/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ‰æ„ä¹‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T09:09:26.000Z" title="Wed Jan 07 2026 09:09:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å†™åœ¨å‰é¢</h2>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ React + Vite + Tailwind CSS + Lucide Reactï¼Œå¿«é€Ÿæ­å»ºä¸€ä¸ªç®€æ´ã€å“åº”å¼ä¸”æ³¨é‡ç»†èŠ‚çš„ç™»å½•é¡µé¢ï¼Œå¹¶é¡ºæ‰‹æ‹†è§£å‡ ä¸ªæå‡ç”¨æˆ·ä½“éªŒçš„å°æŠ€å·§ã€‚</p>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆç™»å½•é¡µé¢éå¸¸é‡è¦ï¼Ÿ</h3>
<p>åˆ«å°çœ‹è¿™ä¸ªçœ‹ä¼¼ç®€å•çš„é¡µé¢â€”â€”å®ƒå¾€å¾€æ˜¯ç”¨æˆ·å¯¹äº§å“çš„<strong>ç¬¬ä¸€å°è±¡</strong>ã€‚<br/>
ç™»å½•é¡µè¿œä¸æ­¢æ˜¯ä¸€ä¸ªè¡¨å•ï¼Œæ›´æ˜¯æ•´ä¸ªäº§å“ä½“éªŒçš„<strong>å…¥å£</strong>ï¼šè®¾è®¡å¾—å½“ï¼Œç”¨æˆ·é¡ºç•…è¿›å…¥ï¼›å¤„ç†è‰ç‡ï¼Œå¯èƒ½ç›´æ¥å¯¼è‡´æµå¤±ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a294e1b021541f893835239842e99b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oSP5LmJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768381766&amp;x-signature=e0TwqHa5UeaYJWiIxpvAM%2BaAszw%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-2">ç”¨tindwindcsså®Œæˆä¸€ä¸ªç™»å½•é¡µé¢ã€‚</h2>
<p>å€ŸåŠ© Tailwind CSS çš„åŸå­åŒ–ç±»åä½“ç³»ï¼Œæˆ‘ä»¬èƒ½å¤Ÿé«˜æ•ˆæ„å»ºå‡ºç¾è§‚ã€å“åº”å¼ä¸”é«˜åº¦å¯å®šåˆ¶çš„ç™»å½•ç•Œé¢ã€‚</p>
<p>æ— éœ€ä¼ ç»Ÿ CSSï¼Œä»…é€šè¿‡ç»„åˆè¯­ä¹‰æ¸…æ™°çš„å·¥å…·ç±»ï¼Œå³å¯å®ç°ç²¾è‡´çš„å¸ƒå±€ã€æŸ”å’Œçš„é˜´å½±ã€æµç•…çš„è¿‡æ¸¡åŠ¨ç”»ä»¥åŠè·¨è®¾å¤‡çš„è‡ªé€‚åº”è¡¨ç°ã€‚</p>
<p>é…åˆ React çš„çŠ¶æ€ç®¡ç†ä¸ Lucide React çš„ç®€æ´å›¾æ ‡ï¼Œæ•´ä¸ªç™»å½•é¡µä¸ä»…è§†è§‰æ¸…çˆ½ï¼Œäº¤äº’ä¹Ÿç»†è…»è‡ªç„¶â€”â€”ä»å¯†ç å¯è§æ€§åˆ‡æ¢åˆ°èšç„¦æ€åé¦ˆï¼Œæ¯ä¸€å¤„ç»†èŠ‚éƒ½æœåŠ¡äºç”¨æˆ·ä½“éªŒã€‚</p>
<blockquote>
<p>è¿™ä¸ä»…æ˜¯â€œå®Œæˆä¸€ä¸ªè¡¨å•â€ï¼Œæ›´æ˜¯ç”¨ä»£ç ä¼ é€’ä¿¡ä»»ä¸æ¸©åº¦çš„è¿‡ç¨‹ã€‚</p>
</blockquote>
<h3 data-id="heading-3">è¿™é‡Œç”¨åˆ°çš„ä¸€äº›æŠ€æœ¯æ ˆ</h3>
<p>è¿™ä¸ªå°é¡¹ç›®åŸºäºç°ä»£å‰ç«¯å·¥ç¨‹åŒ–ç†å¿µæ„å»ºï¼Œé€‰ç”¨äº†ä»¥ä¸‹è½»é‡çš„æŠ€æœ¯ç»„åˆï¼š</p>
<p><strong>React</strong>ï¼šä½œä¸ºæ ¸å¿ƒ UI åº“ï¼Œåˆ©ç”¨å…¶å£°æ˜å¼è¯­æ³•å’Œç»„ä»¶åŒ–æ€æƒ³ï¼Œå°†ç™»å½•è¡¨å•æ‹†è§£ä¸ºå¯ç»´æŠ¤ã€å¯å¤ç”¨çš„é€»è¾‘å•å…ƒã€‚é€šè¿‡Â useStateÂ ç­‰ Hooks ç®¡ç†çŠ¶æ€ï¼Œå®ç°æ•°æ®é©±åŠ¨çš„äº¤äº’ä½“éªŒã€‚</p>
<p><strong>Tailwind CSS</strong>ï¼šé‡‡ç”¨ Utility-Firstï¼ˆåŸå­åŒ–ï¼‰å¼€å‘æ¨¡å¼ï¼Œæ‘’å¼ƒä¼ ç»Ÿ CSS çš„å‘½åè´Ÿæ‹…ä¸æ ·å¼å†—ä½™ã€‚æ‰€æœ‰æ ·å¼ç›´æ¥é€šè¿‡è¯­ä¹‰æ¸…æ™°çš„ç±»ååœ¨ JSX ä¸­ç»„åˆè€Œæˆï¼Œæå¤§æå‡å¼€å‘æ•ˆç‡ä¸è®¾è®¡ä¸€è‡´æ€§ï¼ŒåŒæ—¶å¤©ç„¶æ”¯æŒå“åº”å¼å¸ƒå±€å’Œä¸»é¢˜æ‰©å±•ã€‚</p>
<p><strong>Lucide React</strong>ï¼šä¸€ä¸ªè½»é‡ã€å¼€æºä¸”é£æ ¼ç»Ÿä¸€çš„å›¾æ ‡åº“ï¼Œæä¾›ç®€æ´ä¼˜é›…çš„ SVG å›¾æ ‡ç»„ä»¶ã€‚é¡¹ç›®ä¸­ä½¿ç”¨äº†Â <code>&lt;Mail /&gt;</code>ã€<code>&lt;Lock /&gt;</code>ã€<code>&lt;Eye /&gt;</code>Â å’ŒÂ <code>&lt;EyeOff /&gt;</code>Â ç­‰å›¾æ ‡ï¼Œå¢å¼ºç•Œé¢è§†è§‰å¼•å¯¼ï¼Œä¸”æ— éœ€é¢å¤–é…ç½®å³å¯ä¸ Tailwind æ ·å¼æ— ç¼èåˆã€‚</p>
<p>è¿™å¥—æŠ€æœ¯æ ˆå…¼é¡¾å¼€å‘ä½“éªŒä¸è¿è¡Œæ€§èƒ½ï¼Œæ—¢é€‚åˆå¿«é€ŸåŸå‹éªŒè¯ï¼Œä¹Ÿå…·å¤‡è‰¯å¥½çš„å¯ç»´æŠ¤æ€§ä¸æ‰©å±•èƒ½åŠ›ï¼Œæ˜¯æ„å»ºç°ä»£åŒ–ç™»å½•ç•Œé¢çš„ç†æƒ³é€‰æ‹©ã€‚</p>
<h3 data-id="heading-4">è¿™é‡Œç”¨åˆ°çš„tindwind ç±»åçš„è§£é‡Šï¼š</h3>
<ol>
<li><code>min-h-screen</code>Â â€” è®¾ç½®å…ƒç´ æœ€å°é«˜åº¦ä¸ºè§†å£é«˜åº¦</li>
<li><code>bg-slate-50</code>Â â€” è®¾ç½®èƒŒæ™¯è‰²ä¸ºæµ… slate ç°ï¼ˆéå¸¸æ·¡çš„ç°è‰²ï¼‰</li>
<li><code>flex items-center justify-center</code>Â â€” ä½¿ç”¨ Flex å¸ƒå±€ï¼Œå‚ç›´å’Œæ°´å¹³å±…ä¸­å­å…ƒç´ </li>
<li><code>p-4</code>Â â€” å†…è¾¹è·ä¸º 1remï¼ˆ16pxï¼‰</li>
<li><code>max-w-md</code>Â â€” æœ€å¤§å®½åº¦ä¸ºä¸­ç­‰å°ºå¯¸ï¼ˆé»˜è®¤ 28rem / 448pxï¼‰</li>
<li><code>bg-white</code>Â â€” èƒŒæ™¯è‰²ä¸ºçº¯ç™½è‰²</li>
<li><code>rounded-3xl</code>Â â€” åœ†è§’éå¸¸å¤§ï¼ˆé»˜è®¤ 1.5rem / 24pxï¼‰</li>
<li><code>shadow-xl</code>Â â€” æ·»åŠ è¶…å¤§é˜´å½±ï¼Œå¢å¼ºæµ®å±‚æ„Ÿ</li>
<li><code>border-slate-100</code>Â â€” è¾¹æ¡†é¢œè‰²ä¸ºææµ… slate ç°</li>
<li><code>space-y-6</code>Â â€” å­å…ƒç´ ä¹‹é—´å‚ç›´é—´è·ä¸º 1.5remï¼ˆ24pxï¼‰</li>
</ol>
<h2 data-id="heading-5">å®ç°ç™»å½•é¡µé¢çš„ä¸€äº›å…³é”®é€»è¾‘ï¼š</h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> [formData,setFormData] = <span class="hljs-title function_">useState</span>({
    <span class="hljs-attr">email</span>:<span class="hljs-string">''</span>,
    <span class="hljs-attr">password</span>:<span class="hljs-string">''</span>,
    <span class="hljs-attr">rememberMe</span>:<span class="hljs-literal">false</span>
  })
</code></pre>
<p>è¿™é‡Œé€šè¿‡Â useStateÂ å®šä¹‰äº†Â formDataÂ çŠ¶æ€ï¼Œç”¨äºç»Ÿä¸€ç®¡ç†ç”¨æˆ·è¾“å…¥çš„æ•°æ®ï¼ŒåŒ…æ‹¬emailã€passwordä»¥åŠrememberMe</p>
<pre><code class="hljs language-js" lang="js">    <span class="hljs-keyword">const</span> [showPassword,setShowPassword] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
    <span class="hljs-keyword">const</span> [isLoading,setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
</code></pre>
<p>ä½¿ç”¨å¦ä¸€ä¸ªçŠ¶æ€Â showPasswordÂ æ¥æ§åˆ¶å¯†ç å­—æ®µçš„å¯è§æ€§ã€‚å½“è¯¥å€¼ä¸º falseÂ æ—¶ï¼Œå¯†ç ä»¥å¯†æ–‡å½¢å¼æ˜¾ç¤ºï¼›åˆ‡æ¢ä¸ºÂ trueÂ æ—¶ï¼Œåˆ™ä»¥æ˜æ–‡å±•ç¤ºï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼Œå°¤å…¶åœ¨<strong>ç§»åŠ¨ç«¯è¾“å…¥å¤æ‚å¯†ç æ—¶éå¸¸å®ç”¨</strong>ã€‚</p>
<p>æ­¤å¤–ï¼Œè¿˜å®šä¹‰äº†Â <code>isLoading</code>Â çŠ¶æ€ï¼Œç”¨äºè¡¨ç¤ºç™»å½•è¯·æ±‚æ˜¯å¦æ­£åœ¨è¿›è¡Œä¸­ã€‚è™½ç„¶å½“å‰ä»£ç ä¸­å°šæœªæ¥å…¥å®é™…çš„ API è°ƒç”¨ï¼Œä½†è¿™ä¸€çŠ¶æ€ä¸ºæœªæ¥é˜²æ­¢é‡å¤æäº¤ã€æ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨ç­‰äº¤äº’æä¾›äº†åŸºç¡€æ”¯æŒã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleChange</span> =  (<span class="hljs-params">e</span>) =&gt; {
    <span class="hljs-keyword">const</span> {name,value,type,checked} = e.<span class="hljs-property">target</span>;<span class="hljs-comment">//input</span>
    <span class="hljs-title function_">setFormData</span>(<span class="hljs-function">(<span class="hljs-params">prev</span>) =&gt;</span> ({
      ...prev,
      [name]:type === <span class="hljs-string">"checkbox"</span> ? checked : value
    }));
  }
</code></pre>
<p>è¡¨å•çš„è¾“å…¥å˜åŒ–ç”±Â handleChangeÂ å‡½æ•°ç»Ÿä¸€å¤„ç†ã€‚</p>
<p>å®ƒé€šè¿‡è§£æ„äº‹ä»¶å¯¹è±¡çš„Â nameã€valueã€typeÂ å’ŒÂ checkedÂ å±æ€§ï¼Œæ™ºèƒ½åˆ¤æ–­å½“å‰å…ƒç´ ç±»å‹ï¼šè‹¥æ˜¯å¤é€‰æ¡†ï¼ˆå¦‚â€œè®°ä½æˆ‘â€ï¼‰ï¼Œåˆ™å–Â checkedÂ å€¼ï¼›å¦åˆ™å–Â valueã€‚éšåï¼Œåˆ©ç”¨å‡½æ•°å¼æ›´æ–°æ–¹å¼å®‰å…¨åœ°åˆå¹¶æ–°å€¼åˆ°Â formDataÂ ä¸­ï¼Œç¡®ä¿çŠ¶æ€æ›´æ–°çš„å‡†ç¡®æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = <span class="hljs-keyword">async</span>(<span class="hljs-params">e</span>) =&gt; {
      e.<span class="hljs-title function_">preventDefault</span>();
    }
</code></pre>
<p>è¡¨å•æäº¤ç”±Â handleSubmitÂ å‡½æ•°æ¥ç®¡ï¼Œå…¶é¦–è¦ä»»åŠ¡æ˜¯è°ƒç”¨Â e.preventDefault()Â <strong>é˜»æ­¢æµè§ˆå™¨é»˜è®¤çš„é¡µé¢è·³è½¬æˆ–åˆ·æ–°è¡Œä¸º</strong></p>
<p>æˆ‘ä»¬åœ¨è¾“å…¥æ¡†ä¸­é”®å…¥å†…å®¹æ—¶ï¼ŒhandleChangeÂ ä¼šå®æ—¶æ•è·å¹¶æ›´æ–°å¯¹åº”çŠ¶æ€ï¼›ç‚¹å‡»â€œç™»å½•â€æŒ‰é’®æ—¶ï¼ŒhandleSubmitÂ è¢«è§¦å‘ï¼Œå‡†å¤‡å‘èµ·è®¤è¯è¯·æ±‚ï¼›è€Œç‚¹å‡»å¯†ç æ¡†å³ä¾§çš„çœ¼ç›å›¾æ ‡ï¼Œåˆ™ä¼šåˆ‡æ¢Â showPasswordÂ çŠ¶æ€ï¼ŒåŠ¨æ€æ”¹å˜å¯†ç è¾“å…¥æ¡†çš„Â typeÂ å±æ€§ï¼Œå®ç°å¯†ç çš„æ˜¾ç¤ºä¸éšè—ã€‚</p>
<p>æ•´ä¸ªæµç¨‹ç»“æ„æ¸…æ™°ã€çŠ¶æ€é›†ä¸­ã€æ‰©å±•æ€§å¼ºï¼Œä¸ºæ„å»º<strong>å¥å£®</strong>çš„ç™»å½•ç•Œé¢æ‰“ä¸‹äº†è‰¯å¥½åŸºç¡€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68e48cce52d643449ea15f475df1b38e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oSP5LmJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768381766&amp;x-signature=LmX59uQCjtUsBTqGHuuokgdgEK4%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-6">ä¸ºä»€ä¹ˆè¿™ä¸ªç™»å½•é¡µâ€œå¯ç»´æŠ¤â€ï¼Ÿ</h3>
<p>è¿™ä»½ä»£ç ä¹‹æ‰€ä»¥æ˜“äºè¿­ä»£å’Œè°ƒè¯•ï¼Œå¹¶éå¶ç„¶ã€‚<strong>æ‰€æœ‰è¡¨å•æ•°æ®è¢«ç»Ÿä¸€æ”¶çº³åœ¨Â <code>formData</code>Â å¯¹è±¡ä¸­</strong>ç»“æ„æ¸…æ™°ï¼Œä¾¿äºè¿½è¸ªçŠ¶æ€å˜åŒ–</p>
<p>è¾“å…¥å¤„ç†é€»è¾‘è¢«æŠ½è±¡ä¸ºé€šç”¨çš„Â handleChangeÂ å‡½æ•°ï¼Œæ— è®ºé¢å¯¹æ–‡æœ¬è¾“å…¥ã€å¯†ç æ¡†è¿˜æ˜¯å¤é€‰æ¡†ï¼Œéƒ½èƒ½è‡ªåŠ¨åˆ¤æ–­ç±»å‹å¹¶æ›´æ–°å¯¹åº”å­—æ®µï¼Œå½»åº•é¿å…äº†é‡å¤ä»£ç </p>
<p>UI å±‚é¢å®Œå…¨ç”± Tailwind çš„è¯­ä¹‰åŒ–ç±»åæè¿°å¤–è§‚ï¼Œè€Œ React çŠ¶æ€åˆ™ä¸“æ³¨è¡¨è¾¾äº¤äº’è¡Œä¸ºï¼Œ<strong>ä¸¤è€…èŒè´£åˆ†æ˜ã€äº’ä¸è€¦åˆã€‚</strong></p>
<p>æ­£å› å¦‚æ­¤ï¼Œæœªæ¥çš„æ‰©å±•å˜å¾—å¼‚å¸¸è½»æ¾ï¼šè‹¥éœ€æ–°å¢â€œéªŒè¯ç â€å­—æ®µï¼Œåªéœ€åœ¨çŠ¶æ€å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ªå±æ€§å¹¶ç»‘å®šåˆ°æ–°è¾“å…¥æ¡†ï¼›è‹¥æƒ³åŠ å…¥â€œå¾®ä¿¡ç™»å½•â€æˆ–â€œApple ç™»å½•â€ç­‰ç¬¬ä¸‰æ–¹é€‰é¡¹ï¼Œä¹Ÿåªéœ€åœ¨ç°æœ‰çš„Â <code>space-y-6</code>Â å®¹å™¨ä¸­æ’å…¥ä¸€è¡Œå³å¯ã€‚</p>
<blockquote>
<p>è¿™ç§ç»“æ„å¤©ç„¶æ”¯æŒçµæ´»æ¼”è¿›ï¼Œè€Œéç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ã€‚</p>
</blockquote>
<h3 data-id="heading-7">å“åº”å¼ï¼šä½¿ç”¨åœºæ™¯çš„åˆ‡æ¢ï¼Œå§‹ç»ˆä¼˜é›…</h3>
<blockquote>
<p>ç•Œé¢çš„ä¼˜é›…ä¸ä»…åœ¨äºè§†è§‰ç¾æ„Ÿï¼Œæ›´åœ¨äºå®ƒå¦‚ä½•ä»å®¹åº”å¯¹ä¸åŒå±å¹•å°ºå¯¸ã€‚</p>
</blockquote>
<p>å€ŸåŠ© Tailwind CSS çš„å“åº”å¼æ–­ç‚¹ç³»ç»Ÿï¼Œæˆ‘ä»¬ä»…ç”¨ä¸€è¡ŒÂ p-8 md:p-10Â å°±å®ç°äº†<strong>å†…è¾¹è·çš„æ™ºèƒ½é€‚é…</strong>ï¼š</p>
<p>åœ¨æ‰‹æœºä¸Šä¿æŒç´§å‡‘ï¼Œåœ¨ä¸­ç­‰åŠä»¥ä¸Šå±å¹•åˆ™é€‚åº¦èˆ’å±•ã€‚æ•´ä¸ªç™»å½•å¡ç‰‡é‡‡ç”¨å±…ä¸­å¸ƒå±€ï¼Œæ­é…æŸ”å’Œçš„Â rounded-3xlÂ åœ†è§’ä¸å…‹åˆ¶çš„Â shadow-xlÂ é˜´å½±ï¼Œåœ¨ <strong>å°å±è®¾å¤‡ä¸Šä¸æ˜¾æ‹¥æŒ¤ï¼Œåœ¨ ç”µè„‘å¤§å±æ˜¾ç¤ºå™¨ä¸Šä¹Ÿä¾ç„¶å¾—ä½“ã€‚</strong></p>
<p>è€Œå®¹å™¨å®½åº¦Â max-w-mdÂ çš„è®¾å®šå¹¶ééšæ„ä¸ºä¹‹â€”â€”å®ƒè½åœ¨äººçœ¼é˜…è¯»æœ€èˆ’é€‚çš„â€œé»„é‡‘åŒºé—´â€ï¼šå¤ªå®½ä¼šè®©è§†çº¿å·¦å³æ‰«è§†ç–²åŠ³ï¼Œå¤ªçª„åˆæ˜¾å¾—å±€ä¿ƒä¸å®‰ã€‚</p>
<blockquote>
<p>è¿™ä¸ªç»è¿‡éªŒè¯çš„å°ºå¯¸ï¼Œæ˜¯åŠŸèƒ½ä¸ç¾å­¦å¹³è¡¡çš„ç»“æœã€‚</p>
</blockquote>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>é€šè¿‡è¿™ä¸ªç™»å½•é¡µçš„å®ç°ï¼Œæˆ‘ä»¬ä¸ä»…å®Œæˆäº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ UI ç»„ä»¶ï¼Œæ›´å®è·µäº†ç°ä»£å‰ç«¯å¼€å‘çš„æ ¸å¿ƒç†å¿µï¼š<strong>ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒï¼Œç”¨å·¥ç¨‹åŒ–æ€ç»´æ‰“é€ æœ‰æ¸©åº¦çš„ä½“éªŒ</strong>ã€‚</p>
<p>å€ŸåŠ© React çš„çŠ¶æ€ç®¡ç†ï¼Œæˆ‘ä»¬è®©æ•°æ®æµæ¸…æ™°å¯æ§ï¼›</p>
<p>åˆ©ç”¨ Tailwind CSS çš„åŸå­åŒ–æ ·å¼ï¼Œå¿«é€Ÿæ„å»ºå‡ºå“åº”å¼ã€ä¸€è‡´ä¸”ç¾è§‚çš„ç•Œé¢ï¼›</p>
<p>é€šè¿‡ Lucide React å¼•å…¥è½»é‡å›¾æ ‡ï¼Œæå‡è§†è§‰å¼•å¯¼ï¼›è€Œåƒå¯†ç å¯è§æ€§åˆ‡æ¢ã€èšç„¦åé¦ˆã€åŠ è½½çŠ¶æ€é¢„ç•™ç­‰ç»†èŠ‚ï¼Œåˆ™ä½“ç°äº†å¯¹ç”¨æˆ·ä½“éªŒçš„ç»†è‡´è€ƒé‡ã€‚</p>
<p>è¿™ä¸ä»…ä»…æ˜¯ä¸€ä¸ªç™»å½•è¡¨å•â€”â€”å®ƒæ˜¯äº§å“ä¿¡ä»»æ„Ÿçš„èµ·ç‚¹ï¼Œæ˜¯æŠ€æœ¯ä¸è®¾è®¡çš„äº¤æ±‡ç‚¹ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ä½œä¸ºå¼€å‘è€…ä¼ é€’ç”¨å¿ƒçš„æ–¹å¼ã€‚</p>
<blockquote>
<p>ä»£ç å¯ä»¥ç®€æ´ï¼Œä½†ä½“éªŒä¸èƒ½å°†å°±ã€‚</p>
</blockquote>
<h2 data-id="heading-9">é™„å½•ï¼šå‚è€ƒæ–‡ç« ä»¥åŠæºç </h2>
<h3 data-id="heading-10">å‚è€ƒæ–‡ç« </h3>
<p>å…³äºå¦‚ä½•åœ¨ React é¡¹ç›®ä¸­å®‰è£…å’Œé…ç½® Tailwind CSSï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼š
<a href="https://juejin.cn/post/7588042910194958386" target="_blank" title="https://juejin.cn/post/7588042910194958386">Tailwind CSS å…¥é—¨æŒ‡å—ï¼šä»ä¼ ç»Ÿ CSS åˆ°åŸå­åŒ–å¼€å‘çš„é«˜æ•ˆè·ƒè¿ </a></p>
<h3 data-id="heading-11">æˆ‘çš„æºç ï¼š</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// esm React ä»£è¡¨é»˜è®¤å¼•å…¥</span>
<span class="hljs-comment">// useState hooks å¼•å…¥ éƒ¨åˆ†å¼•å…¥</span>
<span class="hljs-comment">// esm cjs ä¼˜ç§€çš„åœ°æ–¹ æ‡’åŠ è½½</span>
<span class="hljs-keyword">import</span> {
  useState
} <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">Eye</span>,
  <span class="hljs-title class_">EyeOff</span>,
  <span class="hljs-title class_">Lock</span>,
  <span class="hljs-title class_">Mail</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'lucide-react'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span> () {
  
  <span class="hljs-keyword">const</span> [formData,setFormData] = <span class="hljs-title function_">useState</span>({
    <span class="hljs-attr">email</span>:<span class="hljs-string">''</span>,
    <span class="hljs-attr">password</span>:<span class="hljs-string">''</span>,
    <span class="hljs-attr">rememberMe</span>:<span class="hljs-literal">false</span>
  })
  <span class="hljs-comment">// å¯†ç æ˜¾ç¤ºéšè—</span>
    <span class="hljs-keyword">const</span> [showPassword,setShowPassword] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
    <span class="hljs-comment">// ç™»å½•apiç­‰çŠ¶æ€</span>
    <span class="hljs-keyword">const</span> [isLoading,setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-comment">// æŠ½è±¡çš„äº‹ä»¶å¤„ç†å‡½æ•°</span>
  <span class="hljs-comment">// input type="text|password|checkbox"</span>
  <span class="hljs-comment">// name email|password|rememberMe</span>
  <span class="hljs-comment">// value æ•°æ®çŠ¶æ€</span>
  <span class="hljs-comment">// checked é€‰ä¸­çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleChange</span> =  (<span class="hljs-params">e</span>) =&gt; {
    <span class="hljs-comment">// e.target </span>
    <span class="hljs-keyword">const</span> {name,value,type,checked} = e.<span class="hljs-property">target</span>;<span class="hljs-comment">//input</span>
    <span class="hljs-title function_">setFormData</span>(<span class="hljs-function">(<span class="hljs-params">prev</span>) =&gt;</span> ({
      <span class="hljs-comment">// ä¼ ä¸€ä¸ªå‡½æ•°æ¯”è¾ƒåˆé€‚</span>
      ...prev,
      [name]:type === <span class="hljs-string">"checkbox"</span> ? checked : value
    }));
  }
   <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = <span class="hljs-keyword">async</span>(<span class="hljs-params">e</span>) =&gt; {
      e.<span class="hljs-title function_">preventDefault</span>();
    }
  <span class="hljs-keyword">return</span> ( 
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> 
      <span class="hljs-attr">className</span>=<span class="hljs-string">"min-h-screen bg-slate-50 flex items-center justify-center p-4"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"relative z-10 w-full max-w-md bg-white rounded-3xl shadow-xl shadow-slate-200/60 border-slate-100 p-8 md:p-10"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-center mb-10"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"inline-flex items-center justify-center w-12 h-12 rounded-xl bg-indigo-600 text-white mb-4 shadow-lg shadow-indigo-200"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">Lock</span> <span class="hljs-attr">size</span>=<span class="hljs-string">{24}/</span>&gt;</span>
                
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-2xl font-bold text-slate-900"</span>&gt;</span>æ¬¢è¿å›æ¥<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-slate-500 mt-2"</span>&gt;</span>è¯·ç™»å½•ä½ çš„è´¦å·<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"space-y-6"</span>&gt;</span>
              {/* é‚®ç®±è¾“å…¥æ¡† */}
              <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'space-y-2'</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'text-sm font-medium text-slate-700 ml-1'</span>&gt;</span>Email:<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">'relative group'</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"absolute inset-y-0 left-0 pl-4 
                  flex items-center pointer-events-none 
                  text-slate-400 group-focus-within:text-indigo-600 transition-colors
                  "</span>&gt;</span>
                      <span class="hljs-tag">&lt;<span class="hljs-name">Mail</span> <span class="hljs-attr">size</span>=<span class="hljs-string">{18}/</span>&gt;</span>

                  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
                   <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
                   <span class="hljs-attr">name</span>=<span class="hljs-string">"email"</span> 
                   <span class="hljs-attr">required</span> 
                   <span class="hljs-attr">value</span>=<span class="hljs-string">{formData.email}</span> 
                   <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange}</span> 
                   <span class="hljs-attr">placeholder</span>=<span class="hljs-string">'name@company.com'</span>
                   <span class="hljs-attr">className</span>=<span class="hljs-string">'block w-full pl-11 pr-4 py-3 bg-slate-50 
                   border border-slate-200 rounded-xl text-slate-900
                   placeholder:text-slate-400 focus:outline-none
                   focus:ring-2 focus:ring-indigo-600/20 focus:border-indigo-600
                   transition-all'</span>/&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
              {/* å¯†ç è¾“å…¥æ¡† */}
           <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"space-y-2"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex justify-between items-center ml-1"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-sm font-medium text-slate-700"</span>&gt;</span>å¯†ç <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#"</span> 
              <span class="hljs-attr">className</span>=<span class="hljs-string">"text-sm font-medium text-indigo-600 hover:text-indigo-500 
              transition-colors"</span>&gt;</span>å¿˜è®°å¯†ç ï¼Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"relative group"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"absolute inset-y-0 left-0 pl-4 
              flex items-center pointer-events-none
              text-slate-400 group-focus-within:text-indigo-600 transition-colors
              "</span>
              &gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Lock</span> <span class="hljs-attr">size</span>=<span class="hljs-string">{18}</span> /&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
                <span class="hljs-attr">type</span>=<span class="hljs-string">{showPassword</span> ? "<span class="hljs-attr">text</span>" <span class="hljs-attr">:</span> "<span class="hljs-attr">password</span>"} 
                <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span>
                <span class="hljs-attr">required</span>
                <span class="hljs-attr">value</span>=<span class="hljs-string">{formData.password}</span>
                <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleChange}</span>
                <span class="hljs-attr">placeholder</span>=<span class="hljs-string">'*******'</span>
                <span class="hljs-attr">className</span>=<span class="hljs-string">"block w-full pl-11 pr-4 py-3 bg-slate-50
                border border-slate-200 rounded-xl text-slate-900
                placeholder:text-slate-400 focus:outline-none 
                focus:ring-2 focus:ring-indigo-600/20 focus:border-indigo-600
                transition-all
                "</span>
              /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
                <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span>
                <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setShowPassword(!showPassword)}
                className="absolute inset-y-0 right-0 pr-4 flex items-center text-slate-400 hover:text-slate-600 transition-colors"
              &gt;
                {showPassword ? <span class="hljs-tag">&lt;<span class="hljs-name">EyeOff</span> <span class="hljs-attr">size</span>=<span class="hljs-string">{18}</span> /&gt;</span> : <span class="hljs-tag">&lt;<span class="hljs-name">Eye</span> <span class="hljs-attr">size</span>=<span class="hljs-string">{18}</span> /&gt;</span>}
              <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€æ™ºå›¾è¯‘ç«™ã€‘åŸºäº LightGBM ä¸ GNSS å¤šç‰¹å¾é©±åŠ¨çš„ NLOS è¯¯å·®å¯é è¯†åˆ«æ–¹æ³•]]></title>    <link>https://juejin.cn/post/7592236397535281188</link>    <guid>https://juejin.cn/post/7592236397535281188</guid>    <pubDate>2026-01-07T08:50:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592236397535281188" data-draft-id="7592134330313719851" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€æ™ºå›¾è¯‘ç«™ã€‘åŸºäº LightGBM ä¸ GNSS å¤šç‰¹å¾é©±åŠ¨çš„ NLOS è¯¯å·®å¯é è¯†åˆ«æ–¹æ³•"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-07T08:50:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç™¾åº¦åœ°å›¾æ±½è½¦ç‰ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/837165218019883"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€æ™ºå›¾è¯‘ç«™ã€‘åŸºäº LightGBM ä¸ GNSS å¤šç‰¹å¾é©±åŠ¨çš„ NLOS è¯¯å·®å¯é è¯†åˆ«æ–¹æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/837165218019883/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç™¾åº¦åœ°å›¾æ±½è½¦ç‰ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T08:50:16.000Z" title="Wed Jan 07 2026 08:50:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¯¼è¯»</h2>
<p>åœ¨æ™ºèƒ½äº¤é€šã€è‡ªåŠ¨é©¾é©¶ç­‰åŸå¸‚åº”ç”¨å¿«é€Ÿå‘å±•çš„èƒŒæ™¯ä¸‹ï¼Œå…¨çƒå¯¼èˆªå«æ˜Ÿç³»ç»Ÿï¼ˆGNSSï¼‰çš„å®šä½ç²¾åº¦ä¸å¯é æ€§æˆä¸ºå…³é”®æ”¯æ’‘ã€‚ç„¶è€Œï¼ŒåŸå¸‚ç¯å¢ƒä¸­é«˜æ¥¼ã€è½¦è¾†ç­‰é®æŒ¡ç‰©ä¼šå¯¼è‡´ GNSS ä¿¡å·å‘ç”Ÿåå°„æˆ–æŠ˜å°„ï¼Œäº§ç”Ÿéè§†è·ï¼ˆNLOSï¼‰è¯¯å·®ï¼Œè¿™ç±»è¯¯å·®å¯ä½¿å®šä½åå·®è¾¾ç™¾ç±³çº§ï¼Œä¸¥é‡åˆ¶çº¦ GNSS åœ¨å¤æ‚åŸå¸‚åœºæ™¯çš„åº”ç”¨ã€‚å°½ç®¡ç°æœ‰ç ”ç©¶æå‡ºäº†ä¿¡å·å¤„ç†ä¼˜åŒ–ã€å¤šä¼ æ„Ÿå™¨èåˆã€3D åœ°å›¾è¾…åŠ©åŠä¼ ç»Ÿæœºå™¨å­¦ä¹ ç­‰ NLOS å¤„ç†æ–¹æ³•ï¼Œä½†æ™®éå­˜åœ¨æ ·æœ¬æ ‡æ³¨ä¸»è§‚ï¼ˆä¾èµ–è§‚æµ‹æ®‹å·®ï¼‰ã€ç‰¹å¾åˆ†æä¸å……åˆ†ï¼ˆå¤šä¾èµ–ä¿¡å™ªæ¯”ä¸ä»°è§’ï¼‰ã€å®æ—¶æ€§ä¸ç²¾åº¦å¤±è¡¡ç­‰é—®é¢˜ï¼Œéš¾ä»¥æ»¡è¶³åŠ¨æ€åŸå¸‚åœºæ™¯çš„éœ€æ±‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7b9a832a5ab44cd8fdee5dd39333542~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380616&amp;x-signature=2zK05vtjknOtawBEkXXEFTkSE4I%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94da9df5278a400487d8e1d671e8870c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380616&amp;x-signature=y3WLvn3WuXn5y9vgytC60fXVfIA%3D" alt="image.png" loading="lazy"/>
ä¸ºæ­¤ï¼Œç™¾åº¦åœ°å›¾ä¸æ­¦æ±‰å¤§å­¦åˆä½œæ’°å†™äº†ã€ŠA reliable NLOS error identification method based on LightGBM driven by multiple features of GNSS signalsã€‹ä¸€æ–‡ï¼Œä»æ•°æ®é›†æ„å»ºã€ç‰¹å¾é€‰æ‹©ä¸æ¨¡å‹è®¾è®¡ä¸‰æ–¹é¢è·å¾—äº†æŠ€æœ¯çªç ´ï¼Œæå‡ºäº†ä¸€å¥—é«˜æ•ˆã€é«˜ç²¾åº¦çš„ NLOS è¯¯å·®è¯†åˆ«æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-1">ä¸€ã€å…³é”®åˆ›æ–°</h2>
<p><strong>1.æå‡º â€œé±¼çœ¼ç›¸æœº + æƒ¯æ€§å¯¼èˆªâ€ èåˆçš„ NLOS å®¢è§‚æ ‡æ³¨æ–¹æ¡ˆï¼Œè§£å†³ä¼ ç»Ÿæ ·æœ¬æ ‡æ³¨ä¸»è§‚æ€§é—®é¢˜</strong></p>
<p>ç°æœ‰ NLOS è¯†åˆ«ç ”ç©¶å¤šä¾èµ– GNSS è§‚æµ‹æ®‹å·®è¿›è¡Œæ ·æœ¬æ ‡æ³¨ï¼Œæ˜“å—è§‚æµ‹å™ªå£°ã€å¤šè·¯å¾„å¹²æ‰°å½±å“ï¼Œæ ‡æ³¨ç»“æœå®¢è§‚æ€§ä¸è¶³ã€‚æœ¬æ–‡åˆ›æ–°é‡‡ç”¨é±¼çœ¼ç›¸æœºä¸é«˜ç²¾åº¦æƒ¯æ€§å¯¼èˆªè®¾å¤‡ç»“åˆçš„æ–¹å¼æ„å»ºæ•°æ®é›†ï¼šé€šè¿‡ Entaniya Fisheye M12 280 é±¼çœ¼ç›¸æœºï¼ˆè§†åœº 280Â°ï¼‰æ•è·å¤©ç©ºå›¾åƒï¼ŒåŸºäº Kannala-Bandt æ¨¡å‹æ ¡æ­£å…‰å­¦ç•¸å˜ï¼Œå¹¶é€šè¿‡ â€œè¾¹ç¼˜æ£€æµ‹ - è½®å»“è¡¥å…¨ - åˆ†æ°´å²­ç®—æ³•â€ ç²¾ç¡®æå–å¤©ç©ºåŒºåŸŸï¼›åŒæ—¶åˆ©ç”¨ SPAN ISA-100C æƒ¯æ€§è®¾å¤‡è·å–è½½ä½“å§¿æ€ä¸ä½ç½®ï¼Œè®¡ç®—å«æ˜Ÿåœ¨ç›¸æœºåƒç´ åæ ‡ç³»ä¸­çš„æŠ•å½±ä½ç½®ï¼Œå¯¹æ¯”å¤©ç©ºåŒºåŸŸä¸å«æ˜Ÿä½ç½®å®ç° LOS/NLOS ä¿¡å·çš„ç›´æ¥ã€å¯è§†åŒ–æ ‡æ³¨ã€‚</p>
<p><strong>2.æ„å»ºå¤šç»´åº¦ GNSS ä¿¡å·ç‰¹å¾ä½“ç³»å¹¶é‡åŒ–ç›¸å…³æ€§ï¼Œçªç ´ä¼ ç»Ÿå•ä¸€ç‰¹å¾è¯†åˆ«çš„å±€é™æ€§</strong></p>
<p>ä¼ ç»Ÿæ–¹æ³•å¤šä¾èµ–ä¿¡å™ªæ¯”ï¼ˆSNRï¼‰ã€ä»°è§’ï¼ˆEAï¼‰ç­‰å°‘æ•°ç‰¹å¾è¯†åˆ« NLOSï¼Œéš¾ä»¥å…¨é¢åˆ»ç”»ä¿¡å·å·®å¼‚ã€‚æœ¬æ–‡ä» GNSS åŸå§‹è§‚æµ‹å‡ºå‘ï¼Œç³»ç»Ÿæå– 6 ä¸ªå¯¹ NLOS æ•æ„Ÿçš„å…³é”®ç‰¹å¾ â€”â€”SNRï¼ˆä¿¡å·å¼ºåº¦ï¼‰ã€EAï¼ˆé®æŒ¡å…³è”åº¦ï¼‰ã€ä¼ªè·ä¸€è‡´æ€§ï¼ˆPRCï¼Œä¼ªè·å¯é æ€§éªŒè¯ï¼‰ã€ç›¸ä½ä¸€è‡´æ€§ï¼ˆPCï¼Œç›¸ä½çªå˜æ•æ‰ï¼‰ã€ç è½½å·®ï¼ˆCMCï¼ŒNLOS è¯¯å·®æ”¾å¤§ï¼‰ã€å¤šè·¯å¾„è§‚æµ‹ï¼ˆMPï¼Œä¼ªè·åå·®é‡åŒ–ï¼‰ï¼Œå¹¶é€šè¿‡ç›¸å…³æ€§çƒ­å›¾é‡åŒ–ç‰¹å¾ä¸ LOS/NLOS æ ‡ç­¾çš„å…³è”ç¨‹åº¦ï¼ˆä»°è§’ç›¸å…³ç³»æ•° 0.269 æœ€é«˜ï¼Œä¼ªè·ä¸€è‡´æ€§ 0.003 æœ€ä½ï¼‰ã€‚</p>
<p><strong>3. é‡‡ç”¨ä¼˜åŒ–çš„ LightGBM æ¨¡å‹å®ç° NLOS é«˜æ•ˆé«˜ç²¾åº¦è¯†åˆ«ï¼Œå¹³è¡¡å®šä½å¯é æ€§ä¸å®æ—¶æ€§</strong></p>
<p>é’ˆå¯¹ä¼ ç»Ÿæœºå™¨å­¦ä¹ æ¨¡å‹ï¼ˆå¦‚ XGBoostã€CatBoostï¼‰åœ¨åŠ¨æ€åŸå¸‚åœºæ™¯ä¸‹ â€œç²¾åº¦ä½â€ æˆ– â€œæ•ˆç‡å·®â€ çš„çŸ›ç›¾ï¼Œæœ¬æ–‡é€‰æ‹© LightGBM ä½œä¸ºåˆ†ç±»æ¨¡å‹ï¼Œå¹¶åˆ©ç”¨å…¶æ ¸å¿ƒä¼˜åŒ–æœºåˆ¶é€‚é…è½¦è½½åœºæ™¯ï¼šé€šè¿‡ç›´æ–¹å›¾ç®—æ³•å°†è¿ç»­ç‰¹å¾ç¦»æ•£åŒ–ï¼Œé™ä½è®¡ç®—å¤æ‚åº¦ï¼›é‡‡ç”¨æ·±åº¦çº¦æŸçš„ Leaf-wise ç”Ÿé•¿ç­–ç•¥ï¼Œåœ¨æå‡æ‹Ÿåˆèƒ½åŠ›çš„åŒæ—¶æŠ‘åˆ¶è¿‡æ‹Ÿåˆï¼›ç»“åˆæ¢¯åº¦å•ä¾§é‡‡æ ·ï¼ˆGOSSï¼‰å‡å°‘æ ·æœ¬é‡ï¼Œå…¼é¡¾ç²¾åº¦ä¸é€Ÿåº¦ã€‚</p>
<h2 data-id="heading-2">äºŒã€æŠ€æœ¯ç»†èŠ‚</h2>
<p><strong>1.NLOS æ ·æœ¬æ ‡æ³¨æŠ€æœ¯</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b56ac1f43804258abf6a780740be6b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380616&amp;x-signature=45y9mfgSZ%2B%2BkKR%2B4mC3KyczpaSs%3D" alt="image.png" loading="lazy"/></p>
<p>æ ·æœ¬æ ‡æ³¨ä¾èµ– â€œé±¼çœ¼ç›¸æœº + æƒ¯æ€§å¯¼èˆªâ€ èåˆç³»ç»Ÿï¼Œæ ¸å¿ƒç¡¬ä»¶å‚æ•°å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>é±¼çœ¼ç›¸æœºï¼š</strong> é‡‡ç”¨ Entaniya Fisheye M12 280ï¼ˆè§†åœºè§’ 280Â°ï¼‰ä¸ MV-SUA1201M-T å·¥ä¸šç›¸æœºï¼Œé‡‡æ ·ç‡ 1fpsï¼Œé€šè¿‡ GNSS æ¥æ”¶æœºæ—¶é’Ÿæ ¡å‡†å®ç°æ—¶é—´åŒæ­¥ï¼Œç¡®ä¿ä¸ GNSS è§‚æµ‹æ•°æ®æ—¶é—´æˆ³åŒ¹é…ã€‚</li>
<li><strong>æ ¡å‡†æ¨¡å‹ï¼š</strong> é‡‡ç”¨ Kannala-Bandt æ¨¡å‹ä¿®æ­£é±¼çœ¼é•œå¤´ç•¸å˜ï¼Œè¯¥æ¨¡å‹é€šè¿‡å¤šé¡¹å¼æè¿°å…¥å°„è§’åº¦Î¸ï¼ˆå…‰çº¿ä¸å…‰è½´å¤¹è§’ï¼‰ä¸ç•¸å˜åå‡ºå°„è§’åº¦å…³ç³»ï¼š</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f766492434964e59a96a6c9f7e664919~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380616&amp;x-signature=Sc1gSoR6nj5bH7OsZWUiT3CZySQ%3D" alt="image.png" loading="lazy"/></p>
<p>å…¶ä¸­kiä¸ºç•¸å˜ç³»æ•°ï¼Œéœ€é€šè¿‡æ£‹ç›˜æ ¼æ ¡å‡†å®éªŒè·å–ã€‚åŒæ—¶ï¼Œé€šè¿‡æ ¡å‡†è·å–ç›¸æœºå†…å‚çŸ©é˜µKï¼ˆåŒ…å« x/y è½´ç¼©æ”¾å› å­ä¸æˆåƒä¸­å¿ƒåç§»é‡ï¼‰ï¼Œç”¨äº 3D ç©ºé—´ç‚¹åˆ°åƒç´ åæ ‡çš„è½¬æ¢ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0c10c4866c94afa95a932ec9034732d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380616&amp;x-signature=a3YDSKBhC95tJhqRwgzVX4IV3Ow%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>æƒ¯æ€§å¯¼èˆªè®¾å¤‡ï¼š</strong> é‡‡ç”¨ SPAN ISA-100Cï¼ˆè§’éšæœºæ¸¸èµ° 0.012Â°ãƒ»hâ»Â¹/Â²ï¼‰ï¼Œæä¾›è½½ä½“å§¿æ€æ•°æ®ï¼Œç”¨äºå«æ˜Ÿåæ ‡ä»åœ°å¿ƒåœ°å›ºåæ ‡ç³»ï¼ˆECEFï¼‰åˆ°è½½ä½“åæ ‡ç³»ï¼ˆb ç³»ï¼‰çš„è½¬æ¢ã€‚</li>
</ul>
<p>å¤©ç©ºåŒºåŸŸæå–é‡‡ç”¨ â€œé¢„å¤„ç† - è¾¹ç¼˜æ£€æµ‹ - è½®å»“è¡¥å…¨ - åˆ†æ°´å²­åˆ†å‰²â€ å››æ­¥æµç¨‹ï¼Œè§£å†³é±¼çœ¼å›¾åƒè¾¹ç¼˜ä¸è¿ç»­ä¸çº¹ç†ç¼ºå¤±é—®é¢˜ï¼š</p>
<p><strong>â‘  é¢„å¤„ç†ï¼š</strong> å°†å½©è‰²å›¾åƒè½¬æ¢ä¸ºç°åº¦å›¾ï¼Œé™ä½è§‚æµ‹å™ªå£°å¯¹è¾¹ç¼˜æ£€æµ‹çš„å¹²æ‰°ï¼›</p>
<p><strong>â‘¡ è¾¹ç¼˜æ£€æµ‹ï¼š</strong> é€šè¿‡ Canny ç®—å­æå–å›¾åƒè¾¹ç¼˜ï¼Œåˆæ­¥åŒºåˆ†å¤©ç©ºä¸é®æŒ¡ç‰©ï¼ˆå»ºç­‘ã€æ ‘æœ¨ï¼‰ï¼Œä½†æ­¤æ—¶è¾¹ç¼˜å¯èƒ½å› åƒç´ è¯¯å·®å­˜åœ¨å±€éƒ¨ç¦»æ•£ï¼›</p>
<p><strong>â‘¢ è½®å»“è¡¥å…¨ï¼š</strong> é‡‡ç”¨è½®å»“æ£€æµ‹ç®—æ³•ï¼ˆå¦‚ OpenCV çš„findContoursï¼‰å¯¹ç¦»æ•£è¾¹ç¼˜è¿›è¡Œè¿æ¥ï¼Œç”Ÿæˆå®Œæ•´ã€è¿ç»­çš„å¤©ç©ºè½®å»“ï¼Œä½œä¸ºåç»­åˆ†å‰²çš„ â€œå…ˆéªŒç§å­â€ï¼›</p>
<p><strong>â‘£åˆ†æ°´å²­åˆ†å‰²ï¼š</strong> åŸºäºæ¢¯åº¦ä¿¡æ¯å°†å›¾åƒåˆ†å‰²ä¸ºä¸åŒåŒºåŸŸï¼Œç»“åˆ â€œé«˜äº®åº¦ã€ä¸­å¿ƒæ€§ã€å¼±çº¹ç†â€ çš„å¤©ç©ºåŒºåŸŸå±æ€§ï¼Œæœ€ç»ˆç¡®å®šå¤©ç©ºèŒƒå›´ï¼ˆå¦‚ä¸‹å›¾eä¸­ç™½è‰²åŒºåŸŸï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86efb9e45c604af5bec440a080b9dce1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380616&amp;x-signature=cgbZsh5jmzj1bDjnFt06OEgZg%2FM%3D" alt="image.png" loading="lazy"/></p>
<p>å«æ˜Ÿå¯è§æ€§åˆ¤æ–­ä¸æ ‡ç­¾ç”Ÿæˆï¼Œé€šè¿‡ â€œå«æ˜Ÿå¤©ç©ºå›¾ç”Ÿæˆ - åƒç´ ä½ç½®åŒ¹é…â€ å®ç°ï¼š</p>
<ul>
<li><strong>å«æ˜Ÿå¤©ç©ºå›¾ç”Ÿæˆï¼š</strong> é¦–å…ˆåŸºäº GNSS æ˜Ÿå†è®¡ç®—å«æ˜Ÿåœ¨ ECEF åæ ‡ç³»çš„ä½ç½®ï¼Œç»“åˆæƒ¯æ€§å¯¼èˆªæä¾›çš„åæ ‡ï¼Œè½¬æ¢ä¸ºè½½ä½“åæ ‡ç³»ä¸‹çš„ä½ç½®ï¼›éšåè®¡ç®—å«æ˜Ÿåœ¨ b ç³»çš„ä»°è§’ä¸æ–¹ä½è§’ï¼Œå¹¶é€šè¿‡é±¼çœ¼æŠ•å½±æ¨¡å‹è®¡ç®—æˆåƒåŠå¾„ï¼Œæœ€ç»ˆè½¬æ¢ä¸ºåƒç´ åæ ‡ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f7c6feec1e248829808539247bb44cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380616&amp;x-signature=8MxfnthEYNu%2Fn%2BliMWE%2B2NaESZU%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>æ ‡ç­¾åˆ¤å®š</strong>ï¼šè‹¥å«æ˜Ÿåƒç´ åæ ‡è½åœ¨å¤©ç©ºåŒºåŸŸå†…ï¼Œæ ‡è®°ä¸º LOSï¼ˆæ ‡ç­¾ 0ï¼‰ï¼›è‹¥è½åœ¨é®æŒ¡åŒºåŸŸå†…ï¼Œæ ‡è®°ä¸º NLOSï¼ˆæ ‡ç­¾ 1ï¼‰ã€‚æœ€ç»ˆæ„å»ºåŒ…å« 149613 æ¡æ ·æœ¬çš„æ•°æ®é›†ï¼ŒæŒ‰ 7:3 æ¯”ä¾‹åˆ’åˆ†ä¸ºè®­ç»ƒé›†ï¼ˆ104729 æ¡ï¼‰ä¸éªŒè¯é›†ï¼ˆ44884 æ¡ï¼‰ï¼Œæ¯æ¡æ ·æœ¬åŒ…å« 6 ä¸ª GNSS ç‰¹å¾ä¸ 1 ä¸ªæ ‡ç­¾ã€‚</li>
</ul>
<p><strong>2.æ¨¡å‹é€‰å‹ä¸æ ¸å¿ƒä¼˜åŒ–</strong></p>
<p>é€‰æ‹© LightGBM ä½œä¸ºåˆ†ç±»æ¨¡å‹ï¼Œæ ¸å¿ƒåŸå› æ˜¯å…¶é€‚é…åŸå¸‚è½¦è½½åŠ¨æ€åœºæ™¯çš„ â€œé«˜ç²¾åº¦ + é«˜æ•ˆç‡â€ éœ€æ±‚ï¼Œç›¸æ¯”ä¼ ç»Ÿæ¢¯åº¦æå‡æ¨¡å‹ï¼ˆXGBoostã€CatBoostï¼‰å…·æœ‰ä¸‰å¤§ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>è§£å†³ XGBoostâ€œè®­ç»ƒæ…¢ã€å†…å­˜é«˜â€ é—®é¢˜ï¼š</strong> XGBoost éœ€éå†æ‰€æœ‰ç‰¹å¾å€¼å¯»æ‰¾åˆ†è£‚ç‚¹ï¼Œè€Œ LightGBM é€šè¿‡ç›´æ–¹å›¾ç®—æ³•é™ä½è®¡ç®—å¤æ‚åº¦ï¼›</li>
<li><strong>è§£å†³ CatBoost â€œè¿ç»­ç‰¹å¾æ‹Ÿåˆå¼±â€ é—®é¢˜ï¼š</strong> CatBoost ä¾§é‡ç±»åˆ«ç‰¹å¾å¤„ç†ï¼Œå¯¹ GNSS è¿ç»­ç‰¹å¾ï¼ˆå¦‚ SNRã€PRCï¼‰çš„æ‹Ÿåˆç²¾åº¦ä½äº LightGBMï¼›</li>
<li><strong>æ”¯æŒå®æ—¶æ¨ç†ï¼š</strong> è½¦è½½åœºæ™¯è¦æ±‚å• epoch æ¨ç†æ—¶é—´â‰¤100Î¼sï¼ŒLightGBM å¯æ»¡è¶³è¯¥éœ€æ±‚ï¼Œè€Œ XGBoost æ¨ç†è€—æ—¶æ›´é«˜ã€‚</li>
</ul>
<p>æ¨¡å‹é€šè¿‡å››é¡¹å…³é”®ä¼˜åŒ–å¹³è¡¡ç²¾åº¦ä¸æ•ˆç‡ï¼š</p>
<ul>
<li><strong>ç›´æ–¹å›¾ç®—æ³•ï¼š</strong> å°†è¿ç»­ç‰¹å¾ç¦»æ•£åŒ–ä¸º 255 ä¸ª binï¼Œåˆ†è£‚æ—¶ä»…éå† bin è€Œéæ‰€æœ‰æ ·æœ¬ï¼Œè®¡ç®—å¤æ‚åº¦ä»O(n)é™è‡³O(k)ï¼ˆk ä¸º bin æ•°ï¼‰ï¼Œè®­ç»ƒé€Ÿåº¦æå‡ 10 å€ä»¥ä¸Šï¼›</li>
<li><strong>æ·±åº¦çº¦æŸ Leaf-wise ç”Ÿé•¿ï¼š</strong> ä¼˜å…ˆåˆ†è£‚å¢ç›Šæœ€å¤§çš„å¶å­èŠ‚ç‚¹ï¼Œè€Œéä¼ ç»Ÿ Level-wise çš„ â€œé€å±‚åˆ†è£‚â€ï¼ŒåŒæ—¶é™åˆ¶æœ€å¤§æ·±åº¦ä¸º 10ã€æœ€å°å¶å­æ ·æœ¬æ•°ä¸º 20ï¼Œé¿å…è¿‡æ‹Ÿåˆçš„åŒæ—¶å‡å°‘å†—ä½™èŠ‚ç‚¹ï¼›</li>
<li><strong>æ¢¯åº¦ - based å•ä¾§é‡‡æ ·ï¼ˆGOSSï¼‰ï¼š</strong> ä¿ç•™æ¢¯åº¦ç»å¯¹å€¼å‰ 20% çš„æ ·æœ¬ï¼ˆå¯¹æ¨¡å‹æ›´æ–°è´¡çŒ®å¤§ï¼‰ï¼Œå¯¹å‰©ä½™ 80% ä½æ¢¯åº¦æ ·æœ¬éšæœºé‡‡æ ·ï¼Œé€šè¿‡æƒé‡è¡¥å¿ä¿æŒåˆ†å¸ƒä¸€è‡´æ€§ï¼Œæ ·æœ¬é‡å‡å°‘ 60% ä»ä¸æŸå¤±ç²¾åº¦ï¼›</li>
<li><strong>ç‹¬å®¶ç‰¹å¾æ†ç»‘ï¼ˆEFBï¼‰ï¼š</strong> å°†äº’æ–¥æ€§å¼ºçš„ç‰¹å¾æ†ç»‘ä¸º â€œè¶…çº§ç‰¹å¾â€ï¼Œè™½æœ¬æ–‡ 6 ä¸ª GNSS ç‰¹å¾æ— å¼ºäº’æ–¥æ€§ï¼Œä½†è¯¥æœºåˆ¶ä¸ºåç»­å¤šç³»ç»Ÿç‰¹å¾æ‰©å±•é¢„ç•™ç©ºé—´ã€‚</li>
</ul>
<p>å¯¹æ¯”å…¶ä»–æ¨¡å‹ï¼Œåœ¨æ­¦æ±‰è½¦è½½åŠ¨æ€æ•°æ®ä¸­ï¼ŒLightGBM çš„ç²¾åº¦ä¸æ•ˆç‡å‡ä¼˜äº XGBoostã€CatBoostï¼š</p>
<ul>
<li><strong>ç²¾åº¦æŒ‡æ ‡ï¼š</strong> LightGBM çš„ç²¾ç¡®ç‡ï¼ˆ92.55%ï¼‰ã€å¬å›ç‡ï¼ˆ92.43%ï¼‰ã€F1-scoreï¼ˆ0.9232ï¼‰åˆ†åˆ«é«˜äº XGBoostï¼ˆ91.71%ã€91.77%ã€0.9125ï¼‰ä¸ CatBoostï¼ˆ88.02%ã€88.16%ã€0.8685ï¼‰ï¼Œä¸” NLOS æ¼æ£€ç‡ï¼ˆ5.49%ï¼Œå³ NLOS è¯¯åˆ¤ä¸º LOS çš„æ¯”ä¾‹ï¼‰æ˜¾è‘—ä½äº XGBoostï¼ˆ7.05%ï¼‰ä¸ CatBoostï¼ˆ10.53%ï¼‰ï¼Œå‡å°‘å®šä½åå·®é£é™©ï¼›</li>
<li><strong>æ•ˆç‡æŒ‡æ ‡ï¼š</strong> LightGBM è®­ç»ƒæ—¶é—´ï¼ˆ25.49sï¼‰ä»…ä¸º XGBoostï¼ˆ130.74sï¼‰çš„ 19.5%ï¼Œæµ‹è¯•æ—¶é—´ï¼ˆ0.97sï¼‰ä¸º XGBoostï¼ˆ1.24sï¼‰çš„ 78.2%ï¼Œå• epoch æµ‹è¯•æ—¶é—´ï¼ˆ21.61Î¼sï¼‰æ»¡è¶³è½¦è½½å®æ—¶æ€§éœ€æ±‚ï¼Œè€Œ CatBoost è™½é€Ÿåº¦æœ€å¿«ï¼ˆè®­ç»ƒ 4.65sã€æµ‹è¯• 0.02sï¼‰ï¼Œä½†ç²¾åº¦ä¸è¶³ã€‚</li>
</ul>
<p><strong>3.æ¨¡å‹è®­ç»ƒä¸æ¨ç†æ–¹æ³•</strong></p>
<p>ä» GNSS åŸå§‹è§‚æµ‹ä¸­æå– 6 ä¸ªå¯¹ NLOS æ•æ„Ÿçš„å…³é”®ç‰¹å¾ï¼Œå„ç‰¹å¾å®šä¹‰ä¸è®¡ç®—æ–¹å¼æ˜ç¡®ï¼š</p>
<ul>
<li><strong>ä¿¡å™ªæ¯”ï¼ˆSNRï¼‰ï¼š</strong> åæ˜ ä¿¡å·å¼ºåº¦ï¼Œç›´æ¥ä» GNSS æ¥æ”¶æœºè·å–ï¼ŒLOS ä¿¡å· 80% åˆ†å¸ƒåœ¨ 40-50dBï¼ŒNLOS ä¿¡å·åˆ†æ•£åœ¨ 20-50dBï¼›</li>
<li><strong>ä»°è§’ï¼ˆEAï¼‰ï¼š</strong> å…³è”é®æŒ¡æ¦‚ç‡ï¼Œä½ä»°è§’ï¼ˆâ‰¤20Â°ï¼‰å«æ˜Ÿ 96.5% ä¸º NLOSï¼ŒLOS ä¿¡å·å³°å€¼åˆ†å¸ƒåœ¨ 40-60Â°ï¼›</li>
<li><strong>ä¼ªè·ä¸€è‡´æ€§ï¼ˆPRCï¼‰ï¼š</strong> åŸºäºå¤šæ™®å‹’è§‚æµ‹éªŒè¯ä¼ªè·å¯é æ€§ï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b15d81884b44c54917fd49d57ab1419~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380616&amp;x-signature=7GsUQPUnwJPYwA05JCgX5DfmVJ0%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>ç›¸ä½ä¸€è‡´æ€§ï¼ˆPCï¼‰ï¼š</strong> æ•æ‰ç›¸ä½çªå˜ï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23cf244b474f4e08936717f9c0a57984~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380616&amp;x-signature=ZP%2BPvSz149QeK4xi62lmOJguIGU%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>ç è½½å·®ï¼ˆCMCï¼‰</strong> ï¼šæ”¾å¤§ NLOS è¯¯å·®ï¼Œç»åŒå·®ä¸ epoch å·®æ¶ˆé™¤ç³»ç»Ÿè¯¯å·®åï¼Œå…¬å¼ä¸º</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c081e488dd9c46d08e1df00b6e0c573c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380616&amp;x-signature=7rrYp899XUWGZNYQz2St0IzLIwA%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>å¤šè·¯å¾„è§‚æµ‹ï¼ˆMPï¼‰</strong> ï¼šé‡åŒ–ä¼ªè·åå·®ï¼Œé€šè¿‡åŒé¢‘ç»„åˆè®¡ç®—</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2543e5a0c7a14207b46a341e51da4538~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380616&amp;x-signature=nTDQ%2FXJdwBUeA8zZE4ahHYuGuu8%3D" alt="image.png" loading="lazy"/>
é‡‡ç”¨ Z-score æ ‡å‡†åŒ–æ¶ˆé™¤é‡çº²å·®å¼‚ï¼Œç¡®ä¿ SNRï¼ˆdBï¼‰ã€PRCï¼ˆmï¼‰ç­‰ä¸åŒå•ä½ç‰¹å¾å¯¹æ¨¡å‹çš„è´¡çŒ®å‡è¡¡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3acae95d69c641c4a4ebced44d3c0ab5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380616&amp;x-signature=5%2FH0kIlwXYfdA5Jyuzt9xQBaPn4%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ç¦»çº¿è®­ç»ƒé˜¶æ®µï¼š</strong></p>
<p>â‘  å¯¹è®­ç»ƒé›†ç‰¹å¾è¿›è¡Œ Z-score æ ‡å‡†åŒ–ï¼›</p>
<p>â‘¡ é‡‡ç”¨ 5 æŠ˜äº¤å‰éªŒè¯ä¼˜åŒ–è¶…å‚æ•°ï¼›</p>
<p>â‘¢ ä»¥ â€œäºŒåˆ†ç±»äº¤å‰ç†µâ€ ä¸ºç›®æ ‡å‡½æ•°ï¼Œè®­ç»ƒ LightGBM æ¨¡å‹ï¼Œä¿å­˜éªŒè¯é›† F1-score æœ€é«˜çš„æ¨¡å‹ã€‚</p>
<p><strong>åœ¨çº¿æ¨ç†é˜¶æ®µï¼š</strong></p>
<p>â‘  å®æ—¶æå– GNSS æ¥æ”¶æœºçš„ 6 ä¸ªç‰¹å¾ï¼›</p>
<p>â‘¡ å¯¹ç‰¹å¾æ ‡å‡†åŒ–ï¼›</p>
<p>â‘¢ è¾“å…¥æ¨¡å‹ï¼Œè¾“å‡º LOSï¼ˆæ¦‚ç‡â‰¥0.5ï¼‰æˆ– NLOSï¼ˆæ¦‚ç‡ &lt; 0.5ï¼‰ï¼›</p>
<p>â‘£ å‰”é™¤ NLOS è§‚æµ‹ç”¨äºå®šä½è§£ç®—ã€‚</p>
<p>æ­¤å¤–ï¼Œè¿˜éœ€è¦é€šè¿‡ç½‘æ ¼æœç´¢ç¡®å®šæ ¸å¿ƒè¶…å‚æ•°ï¼Œå¹³è¡¡ç²¾åº¦ä¸è¿‡æ‹Ÿåˆé£é™©ï¼šé‡‡ç”¨äºŒåˆ†ç±»æ ¸å¿ƒæŒ‡æ ‡é‡åŒ–æ€§èƒ½ï¼Œé‡ç‚¹å…³æ³¨å‡†ç¡®ç‡ã€å¬å›ç‡å’ŒF1-score ã€‚</p>
<h2 data-id="heading-3">ä¸‰ã€æµ‹è¯•ç»“æœ</h2>
<p>è®ºæ–‡é€šè¿‡ä¸‰ç±»å®éªŒéªŒè¯æ–¹æ³•æœ‰æ•ˆæ€§ï¼š<strong>ç‰¹å¾æ•°é‡å¯¹è¯†åˆ«æ€§èƒ½çš„å½±å“ã€ä¸åŒæ¨¡å‹çš„ç²¾åº¦ä¸æ•ˆç‡å¯¹æ¯”ã€NLOS å‰”é™¤åçš„å®šä½æ€§èƒ½æå‡</strong>ï¼Œæ‰€æœ‰å®éªŒåŸºäºæ­¦æ±‰åŸåŒºè½¦è½½åŠ¨æ€æ•°æ®å¼€å±•ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/789fb9b61bc446b58e8b4530709bf7e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380616&amp;x-signature=p27u4p8wFkv0x5FJVJicNN1Ko%2BM%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/848c0a2e8ca643dd8949d84242b45869~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380616&amp;x-signature=4gZwCE%2B692kEiUfdgAdkThzPwjk%3D" alt="image.png" loading="lazy"/>
<strong>å®éªŒ 1ï¼šç‰¹å¾æ•°é‡å¯¹è¯†åˆ«æ€§èƒ½çš„å½±å“</strong></p>
<p>ç›®çš„ï¼šéªŒè¯å¤šç‰¹å¾èåˆçš„å¿…è¦æ€§ï¼Œå®éªŒè®¾è®¡ä¸º â€œä»ä½ç›¸å…³æ€§åˆ°é«˜ç›¸å…³æ€§é€æ­¥å¢åŠ ç‰¹å¾â€ï¼Œå…± 6 ç»„æ–¹æ¡ˆï¼ˆè¡¨ 2ï¼‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60b44d8781cf43658bf7813d755828ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380616&amp;x-signature=5DqgVZJgxHagctTeCogdLw%2FvwWg%3D" alt="image.png" loading="lazy"/></p>
<p>å¾—å‡ºç»“è®ºï¼š</p>
<p><strong>â‘  ç‰¹å¾æ•°é‡ä¸æ€§èƒ½æ­£ç›¸å…³ï¼š</strong> éšç€ç‰¹å¾ä» 1 ä¸ªå¢åŠ åˆ° 6 ä¸ªï¼ŒF1-score æå‡ 36.4%ï¼Œç²¾ç¡®ç‡æå‡ 15.3%ï¼Œé”™è¯¯è¯†åˆ«æ•°å‡å°‘ 67.2%ï¼›</p>
<p><strong>â‘¡ é«˜ç›¸å…³æ€§ç‰¹å¾è´¡çŒ®æ˜¾è‘—</strong>ï¼šåŠ å…¥ EAï¼ˆä»°è§’ï¼Œç›¸å…³æ€§æœ€é«˜ï¼‰åï¼ŒF1-score ä» 0.8435 è·ƒå‡è‡³ 0.9232ï¼Œæå‡ 9.4%ï¼Œè¯´æ˜ EA æ˜¯æ ¸å¿ƒåŒºåˆ†ç‰¹å¾ï¼›</p>
<p><strong>â‘¢ ä½ç›¸å…³æ€§ç‰¹å¾ä¸å¯æ›¿ä»£ï¼š</strong> PRCï¼ˆç›¸å…³æ€§ 0.003ï¼‰è™½å•ç‹¬ä½¿ç”¨ç²¾åº¦ä½ï¼Œä½†ä¸å…¶ä»–ç‰¹å¾èåˆåï¼Œå¯è¡¥å……ä¼ªè·å¼‚å¸¸ä¿¡æ¯ï¼Œæå‡æ¨¡å‹é²æ£’æ€§ã€‚</p>
<p><strong>å®éªŒ 2ï¼šä¸åŒæ¨¡å‹çš„ç²¾åº¦ä¸æ•ˆç‡å¯¹æ¯”</strong></p>
<p>ç›®çš„ï¼šå¯¹æ¯” LightGBM ä¸å½“å‰ä¸»æµåˆ†ç±»æ¨¡å‹ï¼ˆXGBoostã€CatBoostï¼‰çš„æ€§èƒ½ï¼Œç»“æœå¦‚è¡¨ 3ï¼ˆç²¾åº¦ï¼‰ä¸è¡¨ 4ï¼ˆæ€§èƒ½ï¼‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fca3d67eeb854c1999855a3614b1b63f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380616&amp;x-signature=EGdDZMGAX5oQ6l2Kq3UZoRywSYc%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f3c06b1e9904a5590c5dabe14963d1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380616&amp;x-signature=FWv0EiXowNx97rYy0RZen6HOM4Y%3D" alt="image.png" loading="lazy"/>
å¾—å‡ºç»“è®ºï¼š</p>
<p><strong>â‘  ç²¾åº¦æœ€ä¼˜ï¼š</strong> LightGBM çš„ç²¾ç¡®ç‡ï¼ˆ92.55%ï¼‰é«˜äº XGBoostï¼ˆ91.71%ï¼‰ä¸ CatBoostï¼ˆ88.02%ï¼‰ï¼Œä¸” NLOS æ¼æ£€ç‡ï¼ˆn_FP / æ€» NLOS=2464/44884â‰ˆ5.49%ï¼‰æ˜¾è‘—ä½äº XGBoostï¼ˆ7.05%ï¼‰ä¸ CatBoostï¼ˆ10.53%ï¼‰ï¼Œå‡å°‘å®šä½åå·®é£é™©ï¼›</p>
<p><strong>â‘¡ æ•ˆç‡å¹³è¡¡ï¼š</strong></p>
<ul>
<li>CatBoost é€Ÿåº¦æœ€å¿«ï¼ˆè®­ç»ƒ 4.65sï¼Œæµ‹è¯• 0.02sï¼‰ï¼Œä½†ç²¾åº¦æœ€ä½ï¼Œæ— æ³•æ»¡è¶³é«˜å¯é å®šä½éœ€æ±‚ï¼›</li>
<li>XGBoost ç²¾åº¦æ¥è¿‘ LightGBMï¼Œä½†è®­ç»ƒæ—¶é—´ï¼ˆ130.74sï¼‰æ˜¯ LightGBM çš„ 5.1 å€ï¼Œå®æ—¶æ€§å·®ï¼›</li>
<li>LightGBM åœ¨ç²¾åº¦ä¸æ•ˆç‡é—´æœ€ä¼˜ï¼šè®­ç»ƒæ—¶é—´ä»…ä¸º XGBoost çš„ 19.5%ï¼Œæµ‹è¯•æ—¶é—´ä¸º XGBoost çš„ 78.2%ï¼Œå• epoch æµ‹è¯•æ—¶é—´ 21.61Î¼sï¼Œæ»¡è¶³è½¦è½½å®æ—¶æ€§éœ€æ±‚ï¼ˆâ‰¤100Î¼sï¼‰ã€‚</li>
</ul>
<p><strong>å®éªŒ 3ï¼šNLOS å‰”é™¤åçš„å®šä½æ€§èƒ½æå‡</strong></p>
<p>ç›®çš„ï¼šéªŒè¯ NLOS è¯†åˆ«å¯¹ GNSS æ ‡å‡†ç‚¹å®šä½ï¼ˆSPPï¼‰ç²¾åº¦çš„æ”¹å–„ï¼Œåˆ†ä¸º â€œåŒé¢‘å¤šç³»ç»Ÿâ€ ä¸ â€œå•é¢‘å¤šç³»ç»Ÿâ€ ä¸¤ç±»åœºæ™¯ï¼Œå®šä½ç»“æœä¸ RTK/SINS å‚è€ƒè½¨è¿¹å¯¹æ¯”ã€‚</p>
<p><strong>â‘  åŒé¢‘å¤šç³»ç»Ÿï¼ˆGPS+BDS+Galileoï¼‰</strong></p>
<p>å®šä½è¯¯å·®ç»Ÿè®¡ï¼ˆè¡¨ 5ï¼‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/408adbe8a1a848b6b75d3043676a608c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380616&amp;x-signature=nWqfFqWQG%2F%2BbCTlvpOgaeJXnyq0%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>RMS æ˜¾è‘—é™ä½ï¼š</strong> ä¸œå‘è¯¯å·®å‡å°‘è¿‘ä¸€åŠï¼ˆ47.82%ï¼‰ï¼ŒåŒ—å‘è¯¯å·®å‡å°‘è¶… 50%ï¼ˆ56.68%ï¼‰ï¼Œå¤©å‘è¯¯å·®å‡å°‘ 36.68%ï¼›</li>
<li><strong>å¼‚å¸¸å€¼æ¶ˆé™¤ï¼š</strong> åŒ…å« NLOS æ—¶ï¼Œä¸œå‘å­˜åœ¨ &gt; 40m çš„å¼‚å¸¸å®šä½ç‚¹ï¼ˆå›¾ 19 ç´«è‰²ç‚¹ï¼‰ï¼Œå‰”é™¤åå®šä½ç‚¹ç´§è´´å‚è€ƒè½¨è¿¹ï¼ˆè“è‰²ç‚¹ï¼‰ï¼›</li>
<li><strong>å¤æ‚åœºæ™¯é²æ£’æ€§ï¼š</strong> åœ¨é«˜æ¥¼å¯†é›†åŒºï¼ˆå›¾ 21ï¼‰ï¼Œå‰”é™¤ NLOS åï¼Œå®šä½è½¨è¿¹ï¼ˆé»„è‰²ç‚¹ï¼‰ä¸å‚è€ƒè½¨è¿¹ï¼ˆç»¿è‰²ç‚¹ï¼‰é‡åˆåº¦æ˜¾è‘—æå‡ï¼Œæ— æ˜æ˜¾åç§»ã€‚</li>
</ul>
<p><strong>â‘¡ å•é¢‘å¤šç³»ç»Ÿï¼ˆå®ç”¨åœºæ™¯ï¼‰</strong></p>
<p>åŸå¸‚è½¦è½½åœºæ™¯ä¸­ï¼Œå•é¢‘æ¥æ”¶æœºæˆæœ¬æ›´ä½ã€æ™®åŠç‡æ›´é«˜ï¼Œå› æ­¤è¡¥å……å•é¢‘å®šä½å®éªŒï¼ˆè¡¨ 6ï¼‰ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9273e4cceb1423c99621b7909881d40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380616&amp;x-signature=IQHXPRvQ%2FDnhWhhLZuK5xOXCQCQ%3D" alt="image.png" loading="lazy"/>
å¾—å‡ºç»“è®ºï¼šå•é¢‘åœºæ™¯ä¸‹ï¼Œå‰”é™¤ NLOS åç²¾åº¦ä»æ˜¾è‘—æå‡ï¼Œå¤©å‘è¯¯å·®å‡å°‘ 45.24%ï¼ŒéªŒè¯äº†æ–¹æ³•åœ¨ä½æˆæœ¬è®¾å¤‡ä¸Šçš„å®ç”¨æ€§ã€‚</p>
<p>ä¸ºéªŒè¯ NLOS å‰”é™¤å¯¹å«æ˜Ÿè§‚æµ‹æ•°é‡çš„å½±å“ï¼Œè®ºæ–‡ç»Ÿè®¡äº†å®éªŒè·¯çº¿çš„å«æ˜Ÿæ•°é‡ä¸ä½ç½®ç²¾åº¦å› å­ï¼ˆPDOPï¼‰ï¼š</p>
<ul>
<li><strong>å«æ˜Ÿæ•°é‡ï¼š</strong> å…¨ç¨‹å¯è§å«æ˜Ÿæ•° 15-25 é¢—ï¼Œå‰”é™¤çš„ NLOS å«æ˜Ÿæ•° 3-8 é¢—ï¼Œä¿ç•™ 12-18 é¢— LOS å«æ˜Ÿï¼Œæ»¡è¶³ SPP å®šä½çš„æœ€å°‘å«æ˜Ÿæ•°è¦æ±‚ï¼ˆâ‰¥4 é¢—ï¼‰ï¼›</li>
<li><strong>PDOP å˜åŒ–ï¼š</strong> åŒ…å« NLOS æ—¶ï¼ŒPDOP å¤šåœ¨ 3-5ï¼ˆä¸­ç­‰ç²¾åº¦ï¼‰ï¼›å‰”é™¤ NLOS åï¼ŒPDOP é™è‡³ 2-3ï¼ˆé«˜ç²¾åº¦ï¼‰ï¼Œè¯´æ˜ LOS è§‚æµ‹çš„å‡ ä½•åˆ†å¸ƒæ›´ä¼˜ï¼Œè¿›ä¸€æ­¥æå‡å®šä½ç²¾åº¦ã€‚</li>
</ul>
<h2 data-id="heading-4">å››ã€æ•´ä½“ç»“è®º</h2>
<p>æˆ‘ä»¬æå‡ºçš„ â€œåŸºäº GNSS å¤šç‰¹å¾é©±åŠ¨ä¸ LightGBM çš„ NLOS è¯¯å·®è¯†åˆ«æ–¹æ³•â€ï¼Œé€šè¿‡å®¢è§‚æ•°æ®é›†æ„å»ºã€å¤šç‰¹å¾èåˆã€é«˜æ•ˆæ¨¡å‹è®¾è®¡ï¼Œè§£å†³äº†åŸå¸‚ GNSS å®šä½çš„ NLOS è¯†åˆ«éš¾é¢˜ï¼Œä¸»è¦è´¡çŒ®å¦‚ä¸‹ï¼š</p>
<p><strong>â‘  å®¢è§‚æ•°æ®é›†æ„å»ºï¼š</strong> é¦–æ¬¡å°†é±¼çœ¼ç›¸æœºä¸æƒ¯æ€§å¯¼èˆªèåˆï¼Œå®ç° LOS/NLOS ä¿¡å·çš„ç›´æ¥æ ‡æ³¨ï¼Œè§£å†³ä¼ ç»Ÿæ®‹å·®æ ‡æ³¨çš„ä¸»è§‚æ€§é—®é¢˜ï¼Œæ•°æ®é›†åŒ…å« 14.9 ä¸‡æ¡æ ·æœ¬ï¼Œè¦†ç›–å¤šåœºæ™¯ï¼Œä¸ºåç»­ç ”ç©¶æä¾›åŸºç¡€ï¼›</p>
<p><strong>â‘¡ å¤šç‰¹å¾æ·±åº¦åˆ†æï¼š</strong> ç³»ç»Ÿæå– 6 ä¸ª GNSS å…³é”®ç‰¹å¾ï¼ˆSNRã€EAã€PRCã€PCã€CMCã€MPï¼‰ï¼Œé‡åŒ–åˆ†æ NLOS ä¸ LOS çš„å·®å¼‚ï¼ŒéªŒè¯å¤šç‰¹å¾èåˆçš„å¿…è¦æ€§ï¼ŒF1-score è¾ƒå•ä¸€ç‰¹å¾æå‡ 36.4%ï¼›</p>
<p><strong>â‘¢ é«˜æ•ˆé«˜ç²¾åº¦æ¨¡å‹ï¼š</strong> LightGBM æ¨¡å‹é€šè¿‡ç›´æ–¹å›¾ã€Leaf-wise ç”Ÿé•¿ç­‰ä¼˜åŒ–ï¼Œåœ¨ç²¾åº¦ï¼ˆF1=0.9232ï¼‰ä¸æ•ˆç‡ï¼ˆè®­ç»ƒ 25.49sï¼‰é—´è¾¾åˆ°å¹³è¡¡ï¼ŒNLOS æ¼æ£€ç‡ä»… 5.49%ï¼Œä¼˜äº XGBoost ä¸ CatBoostï¼›</p>
<p><strong>â‘£ å®šä½æ€§èƒ½æ˜¾è‘—æå‡ï¼š</strong> å‰”é™¤ NLOS åï¼ŒåŒé¢‘ SPP çš„ä¸œã€åŒ—ã€å¤©å‘ RMS åˆ†åˆ«æå‡ 47.82%ã€56.68%ã€36.68%ï¼Œå•é¢‘åœºæ™¯æå‡ 31.55%-45.24%ï¼Œæœ‰æ•ˆè§£å†³åŸå¸‚å³¡è°·å®šä½éš¾é¢˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»â€œæŠ½å¡â€åˆ°â€œè§„èŒƒé©±åŠ¨â€ï¼šVibe Coding çš„è¿›åŒ–å²ä¸è®¡åˆ†å°ç¨‹åºå®æˆ˜ ğŸš€]]></title>    <link>https://juejin.cn/post/7592438587388362790</link>    <guid>https://juejin.cn/post/7592438587388362790</guid>    <pubDate>2026-01-07T08:59:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592438587388362790" data-draft-id="7592361736130707466" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»â€œæŠ½å¡â€åˆ°â€œè§„èŒƒé©±åŠ¨â€ï¼šVibe Coding çš„è¿›åŒ–å²ä¸è®¡åˆ†å°ç¨‹åºå®æˆ˜ ğŸš€"/> <meta itemprop="keywords" content="VibeCoding,AIç¼–ç¨‹,Trae"/> <meta itemprop="datePublished" content="2026-01-07T08:59:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¥ç§˜çš„çŒªå¤´"/> <meta itemprop="url" content="https://juejin.cn/user/793223472877051"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»â€œæŠ½å¡â€åˆ°â€œè§„èŒƒé©±åŠ¨â€ï¼šVibe Coding çš„è¿›åŒ–å²ä¸è®¡åˆ†å°ç¨‹åºå®æˆ˜ ğŸš€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/793223472877051/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¥ç§˜çš„çŒªå¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T08:59:18.000Z" title="Wed Jan 07 2026 08:59:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å‰è¨€ï¼šVibe Coding æ˜¯å·æ‡’å—ï¼Ÿä¸ï¼Œå®ƒæ˜¯ç”Ÿäº§åŠ›çš„é™ç»´æ‰“å‡»ï¼</strong></p>
<p>æœ€è¿‘ï¼Œâ€œVibe Codingâ€ï¼ˆæ°›å›´ç¼–ç¨‹ï¼‰è¿™ä¸ªè¯åœ¨å¼€å‘è€…åœˆå­é‡Œç«å¾—ä¸€å¡Œç³Šæ¶‚ã€‚å¾ˆå¤šäººåˆå¬è§‰å¾—è¿™ä¸è¿‡æ˜¯â€œPrompt æŠ½å¡â€çš„å¦ä¸€ç§å¥½å¬è¯´æ³•ï¼Œä½†å¦‚æœä½ çœŸçš„æ·±å…¥å…¶ä¸­ï¼Œä½ ä¼šå‘ç°å®ƒæ­£åœ¨ç»å†ä¸€åœºä»â€œç„å­¦â€åˆ°â€œç§‘å­¦â€çš„æƒŠäººè¿›åŒ–ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±ä»¥ä¸€æ¬¾å®æˆ˜é¡¹ç›®â€”â€”<strong>â€œæ‰‹æ“æˆ‘è¦è®¡åˆ†â€å¾®ä¿¡å°ç¨‹åº</strong>ä¸ºä¾‹ï¼Œæ·±åº¦æ‹†è§£ Vibe Coding çš„ä¸‰ä¸ªè¿›åŒ–é˜¶æ®µã€‚æ— è®ºä½ æ˜¯åˆšæ¥è§¦ AI ç¼–ç¨‹çš„æ–°æ‰‹ï¼Œè¿˜æ˜¯è¿½æ±‚æè‡´æ•ˆç‡çš„è€å¸æœºï¼Œè¿™ç¯‡æ–‡ç« éƒ½å°†åˆ·æ–°ä½ å¯¹â€œå†™ä»£ç â€çš„è®¤çŸ¥ã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸŸ¢ ç¬¬ä¸€é˜¶æ®µï¼šæŠ½å¡æ—¶ä»£ï¼ˆThe Gacha Phaseï¼‰</h2>
<h3 data-id="heading-1">â€œä¸€å¥è¯éœ€æ±‚ï¼Œå…¨é  AI è„‘è¡¥â€</h3>
<p>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘ä»¬å¯¹ AI çš„ä½¿ç”¨æå…¶æœ´ç´ ã€‚</p>
<p><strong>å…¸å‹ Promptï¼š</strong></p>
<blockquote>
<p>â€œå¸®æˆ‘å†™ä¸€ä¸ªå¾®ä¿¡å°ç¨‹åºï¼Œå¯ä»¥ç”¨æ¥æ‰“ç‰Œè®¡åˆ†ï¼Œè¦é»‘è‰²ä¸»é¢˜ã€‚â€</p>
</blockquote>
<p><strong>ç°çŠ¶åˆ†æï¼š</strong>
è¿™æ—¶å€™çš„å¼€å‘è€…æ›´åƒæ˜¯åœ¨â€œæŠ½å¡â€ã€‚è¿æ°”å¥½æ—¶ï¼ŒAI ç»™å‡ºçš„ä»£ç å‹‰å¼ºèƒ½è·‘ï¼›è¿æ°”ä¸å¥½æ—¶ï¼Œä»£ç é‡Œå…¨æ˜¯è¿‡æ—¶çš„ API æˆ–è€…é€»è¾‘æ¼æ´ã€‚</p>
<p><strong>å®æˆ˜å¤ç›˜ï¼š</strong>
åœ¨å¼€å‘â€œè®¡åˆ†å°ç¨‹åºâ€æ—¶ï¼Œå¦‚æœåªç»™å‡ºä¸€å¥è¯éœ€æ±‚ï¼ŒAI å¯èƒ½ä¼šç”Ÿæˆä¸€ä¸ªç®€å•çš„åˆ—è¡¨ï¼Œä½†å®ƒä¸çŸ¥é“ä½ éœ€è¦ï¼š</p>
<ul>
<li>æ’¤é”€åŠŸèƒ½ï¼ˆæ‰“é”™äº†æ€ä¹ˆåŠï¼Ÿï¼‰</li>
<li>è‡ªåŠ¨è¡¥å…¨ï¼ˆæ€»åˆ†å¿…é¡»ä¸º 0 çš„é€»è¾‘ï¼‰</li>
<li>å±å¹•å¸¸äº®ï¼ˆæ‰“ç‰Œæ—¶æ‰‹æœºé»‘å±çœŸçš„å¾ˆçƒ¦ï¼ï¼‰</li>
</ul>
<p><strong>ç»“è®ºï¼š</strong> ç¬¬ä¸€é˜¶æ®µçš„ Vibe Coding åªèƒ½äº§å‡ºâ€œç©å…·â€ï¼Œæ— æ³•äº¤ä»˜â€œäº§å“â€ã€‚</p>
<hr/>
<h2 data-id="heading-2">ğŸŸ¡ ç¬¬äºŒé˜¶æ®µï¼šå·¥ç¨‹æ—¶ä»£ï¼ˆPrompt Engineeringï¼‰</h2>
<h3 data-id="heading-3">â€œç»™ AI ä¸€ä¸ªèº«ä»½ï¼Œç»™ä»£ç ä¸€ä¸ªè§„çŸ©â€</h3>
<p>éšç€æˆ‘ä»¬è¢« AI å‘è¿‡å‡ æ¬¡åï¼Œå¤§å®¶å¼€å§‹æ„è¯†åˆ°ï¼š<strong>ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰å’Œçº¦æŸï¼ˆConstraintï¼‰æ‰æ˜¯çµé­‚ã€‚</strong></p>
<p><strong>è¿›åŒ–åçš„ Prompt ç»“æ„ï¼š</strong></p>
<ol>
<li><strong>èµ‹äºˆè§’è‰²ï¼š</strong> â€œä½ æ˜¯ä¸€ä¸ªèµ„æ·±çš„å¾®ä¿¡å°ç¨‹åºä¸“å®¶ï¼Œæ“…é•¿åŸç”Ÿå¼€å‘ã€‚â€</li>
<li><strong>å®šä¹‰æŠ€æœ¯æ ˆï¼š</strong> â€œä½¿ç”¨åŸç”Ÿ WXML/WXSS/JSï¼Œç¦æ­¢ä½¿ç”¨ Uni-app æˆ– Vueï¼Œéµå¾ª ES6 è§„èŒƒã€‚â€</li>
<li><strong>ç»“æ„åŒ–éœ€æ±‚ï¼š</strong>
<ul>
<li>é¦–é¡µï¼šç®¡ç†å¯¹å±€ï¼ˆæ–°å»ºã€ç»§ç»­ã€å†å²ï¼‰ã€‚</li>
<li>è®¡åˆ†é¡µï¼šå±•ç¤ºæ¯ä¸ªç©å®¶çš„æ€»åˆ†å’Œæ¯å±€æ˜ç»†ã€‚</li>
<li>è¾“å…¥é¡µï¼šæ”¯æŒè´Ÿåˆ†å½•å…¥ã€‚</li>
</ul>
</li>
</ol>
<p><strong>æ ¸å¿ƒæå‡ï¼š</strong>
åœ¨è¿™ä¸€é˜¶æ®µï¼Œæˆ‘ä»¬å¼€å§‹æœ‰æ„è¯†åœ°æ§åˆ¶ AI çš„è¾“å‡ºæ ¼å¼ã€‚æ¯”å¦‚æˆ‘ä»¬ä¼šè¦æ±‚ AI ä½¿ç”¨ <code>tailwindcss</code>ï¼ˆå¦‚æœæ”¯æŒï¼‰æˆ–è€…ç‰¹å®šçš„è®¾è®¡è§„èŒƒã€‚</p>
<p><strong>çŸ¥è¯†ç¡¬æ ¸ç‚¹ ğŸ’¡ï¼š</strong>
åœ¨ç¬¬äºŒé˜¶æ®µï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ <strong>Context Injectionï¼ˆä¸Šä¸‹æ–‡æ³¨å…¥ï¼‰</strong> å‘Šè¯‰ AI ç°æœ‰çš„æ–‡ä»¶ç»“æ„ã€‚æ¯”å¦‚åœ¨ Trae ä¸­ï¼ŒAI èƒ½æ„ŸçŸ¥åˆ°æ•´ä¸ªé¡¹ç›®çš„ç›®å½•æ ‘ï¼Œè¿™è®©å®ƒç”Ÿæˆçš„ä»£ç ä¸å†æ˜¯å­¤å²›ï¼Œè€Œæ˜¯èƒ½ä¸ <code>app.json</code> å®Œç¾èåˆçš„ç»„ä»¶ã€‚</p>
<hr/>
<h2 data-id="heading-4">ğŸ”´ ç¬¬ä¸‰é˜¶æ®µï¼šè§„èŒƒé©±åŠ¨æ—¶ä»£ï¼ˆSpec-Driven Developmentï¼‰</h2>
<h3 data-id="heading-5">â€œå¤š Agent åä½œï¼ŒåˆåŒå¼äº¤ä»˜â€</h3>
<p>è¿™æ˜¯ç›®å‰ Vibe Coding çš„æœ€é«˜å¢ƒç•Œï¼Œä¹Ÿæ˜¯æˆ‘ä»¬â€œè®¡åˆ†å°ç¨‹åºâ€çœŸæ­£è½åœ°çš„æ–¹æ¡ˆï¼š<strong>SDDï¼ˆè§„èŒƒé©±åŠ¨å¼€å‘ï¼‰</strong>ã€‚</p>
<h4 data-id="heading-6">1. ä»€ä¹ˆæ˜¯ SDDï¼Ÿ</h4>
<p>ç®€å•æ¥è¯´ï¼š<strong>å…ˆå†™â€œè¯´æ˜ä¹¦â€ï¼ˆSpecï¼‰ï¼Œå†æŒ‰è¯´æ˜ä¹¦å†™ä»£ç ã€‚</strong> è¿™é‡Œçš„ Spec ä¸æ˜¯åºŸè¯æ–‡æ¡£ï¼Œè€Œæ˜¯â€œä»£ç åˆåŒâ€ã€‚</p>
<h4 data-id="heading-7">2. è™šæ‹Ÿå›¢é˜Ÿçš„è¯ç”Ÿ ğŸ­</h4>
<p>åœ¨å¼€å‘è¿™æ¬¾å°ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬ä¸å†æ˜¯å•æ‰“ç‹¬æ–—ï¼Œè€Œæ˜¯è°ƒåº¦äº†ä¸€ä¸ªâ€œè™šæ‹Ÿå›¢é˜Ÿâ€ï¼š</p>
<ul>
<li><strong>è™šæ‹Ÿ PMï¼ˆGemini 3ï¼‰ï¼š</strong> ç”Ÿæˆæå…¶è¯¦å°½çš„éœ€æ±‚æ–‡æ¡£ï¼ˆPRDï¼‰ã€‚</li>
<li><strong>è™šæ‹Ÿè®¾è®¡å¸ˆï¼š</strong> è§„åˆ’ UI äº¤äº’é€»è¾‘ï¼ˆå¦‚ï¼šæ·±è‰²èƒŒæ™¯ã€ç»¿è‰²é«˜äº®æŒ‰é’®ï¼‰ã€‚</li>
<li><strong>è™šæ‹Ÿæ¶æ„å¸ˆï¼š</strong> å®šä¹‰æ•°æ®ç»“æ„ã€‚</li>
</ul>
<h4 data-id="heading-8">3. è®¡åˆ†å°ç¨‹åºçš„ç¡¬æ ¸ä»£ç æ‹†è§£ ğŸ› ï¸</h4>
<p>è®©æˆ‘ä»¬çœ‹çœ‹åœ¨ SDD æ¨¡å¼ä¸‹ï¼ŒAI ç”Ÿæˆçš„ä»£ç æ˜¯å¦‚ä½•ä½“ç°â€œä¸“ä¸šæ€§â€çš„ã€‚</p>
<p><strong>ã€æ•°æ®åˆåŒï¼šStorageManagerã€‘</strong>
åœ¨ <a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">storage.js</a> ä¸­ï¼ŒAI å¹¶æ²¡æœ‰æŠŠé€»è¾‘æ•£è½åœ¨å„ä¸ªé¡µé¢ï¼Œè€Œæ˜¯å°è£…äº†ä¸€ä¸ªå¥å£®çš„å­˜å‚¨ç±»ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// storage.js æ ¸å¿ƒç‰‡æ®µ</span>
<span class="hljs-keyword">static</span> <span class="hljs-title function_">undoLastRound</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> session = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getCurrentSession</span>();
  <span class="hljs-keyword">if</span> (session &amp;&amp; session.<span class="hljs-property">rounds</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">const</span> lastRound = session.<span class="hljs-property">rounds</span>.<span class="hljs-title function_">shift</span>(); <span class="hljs-comment">// å¼¹å‡ºæœ€æ–°ä¸€å±€</span>
    <span class="hljs-comment">// ä¸¥è°¨çš„é‡æ–°è®¡ç®—é€»è¾‘</span>
    session.<span class="hljs-property">totals</span> = session.<span class="hljs-property">totals</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">total, idx</span>) =&gt;</span> total - lastRound.<span class="hljs-property">scores</span>[idx]);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">saveCurrentSession</span>(session);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
</code></pre>
<p><strong>ç¡¬æ ¸è§£æï¼š</strong> AI è‡ªåŠ¨è€ƒè™‘åˆ°äº† <code>totals</code> æ•°ç»„çš„åŒæ­¥æ›´æ–°ï¼Œè€Œä¸æ˜¯ç®€å•çš„åˆ é™¤è®°å½•ã€‚è¿™å°±æ˜¯è§„èŒƒé©±åŠ¨ä¸‹ï¼ŒAI å¯¹ä¸šåŠ¡é€»è¾‘çš„æ·±åˆ»ç†è§£ã€‚</p>
<p><strong>ã€äº¤äº’é»‘ç§‘æŠ€ï¼šè‡ªåŠ¨è¡¥å…¨é€»è¾‘ã€‘</strong>
åœ¨æ‰“ç‰Œè®¡åˆ†åœºæ™¯ä¸­ï¼Œé€šå¸¸æ‰€æœ‰äººçš„å¾—åˆ†æ€»å’Œåº”ä¸º 0ã€‚åœ¨ <a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">input.js</a> ä¸­ï¼ŒAI å®ç°äº†ä¸€ä¸ªéå¸¸æƒŠè‰³çš„åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// input.js è‡ªåŠ¨è¡¥å…¨</span>
<span class="hljs-keyword">if</span> (filledCount === <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>.<span class="hljs-property">players</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>) {
  <span class="hljs-keyword">const</span> emptyIndex = scores.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">s</span> =&gt;</span> s === <span class="hljs-string">''</span> || s === <span class="hljs-string">'-'</span>);
  <span class="hljs-keyword">if</span> (emptyIndex !== -<span class="hljs-number">1</span>) {
    <span class="hljs-keyword">const</span> currentSum = numScores.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>);
    suggestions[emptyIndex] = -currentSum; <span class="hljs-comment">// è‡ªåŠ¨è®¡ç®—æœ€åä¸€ä¸ªäººåº”å¾—çš„åˆ†æ•°</span>
  }
}
</code></pre>
<p><strong>ç¡¬æ ¸è§£æï¼š</strong> å½“ä½ å¡«å®Œå‰ä¸‰ä¸ªäººçš„åˆ†æ•°æ—¶ï¼ŒAI ä¼šè‡ªåŠ¨å¸®ä½ ç®—å‡ºç¬¬å››ä¸ªäººçš„åˆ†æ•°å¹¶ç»™å‡ºæç¤ºã€‚è¿™ç§â€œæ‡‚äººå¿ƒâ€çš„äº¤äº’ï¼Œä¸æ˜¯é â€œæ°›å›´â€å‡ºæ¥çš„ï¼Œè€Œæ˜¯é è¯¦å°½çš„éœ€æ±‚è§„èŒƒå¼•å¯¼å‡ºæ¥çš„ã€‚</p>
<hr/>
<h2 data-id="heading-9">ğŸ¨ UI/UX çš„ vibeï¼šä¸ä»…ä»…æ˜¯å¥½çœ‹</h2>
<p>åœ¨ SDD é˜¶æ®µï¼ŒAI å¯¹ UI çš„æŠŠæ§ä¹Ÿä¸Šå‡åˆ°äº†ä¸“ä¸šå±‚é¢ã€‚æ‰“å¼€ <a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">app.json</a>ï¼Œä½ ä¼šå‘ç°å®ƒä½¿ç”¨äº†æœ€æ–°çš„ <code>skyline</code> æ¸²æŸ“å¼•æ“ã€‚</p>
<ul>
<li><strong>é…è‰²æ–¹æ¡ˆï¼š</strong> <code>#1a1a1a</code> çš„æ·±è‰²èƒŒæ™¯ï¼Œæ­é…å¾®ä¿¡ç»¿ <code>#07C160</code>ã€‚</li>
<li><strong>ç”¨æˆ·ä½“éªŒï¼š</strong> åœ¨ <a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">scoreboard.js</a> ä¸­ï¼ŒAI è‡ªåŠ¨åŠ å…¥äº† <code>wx.setKeepScreenOn({ keepScreenOn: true })</code>ã€‚
<ul>
<li><strong>çŸ¥è¯†ç‚¹ï¼š</strong> è¿™è¡Œä»£ç èƒ½ç¡®ä¿ä½ åœ¨æ‰“ç‰Œè¿‡ç¨‹ä¸­ï¼Œè®¡åˆ†æ¿æ°¸è¿œäº®ç€ï¼Œä¸éœ€è¦é¢‘ç¹å»è§£é”æ‰‹æœºã€‚è¿™å°±æ˜¯ Vibe Coding ç¬¬ä¸‰é˜¶æ®µå¸¦æ¥çš„â€œç”Ÿäº§çº§â€ç»†èŠ‚ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-10">ğŸ› ï¸ å®æˆ˜æŒ‡å—ï¼šå¦‚ä½•å¤åˆ»è¿™ç§è¿›åŒ–ï¼Ÿ</h2>
<p>å¦‚æœä½ ä¹Ÿæƒ³ç”¨ Vibe Coding çš„æ–¹å¼æ‰‹æ“ä¸€ä¸ªå±äºè‡ªå·±çš„å°ç¨‹åºï¼Œè¯·è®°ä½ä»¥ä¸‹â€œä¸‰æ­¥èµ°â€æˆ˜ç•¥ï¼š</p>
<h3 data-id="heading-11">ç¬¬ä¸€æ­¥ï¼šç¼–å†™ Spec æ–‡æ¡£ âœï¸</h3>
<p>ä¸è¦æ€¥ç€å†™ä»£ç ï¼å…ˆæ‰“å¼€ä¸€ä¸ª <code>spec.md</code> æ–‡ä»¶ï¼Œå‘Šè¯‰ AIï¼š</p>
<ul>
<li><strong>ç›®æ ‡ï¼š</strong> â€œæˆ‘è¦åšä¸€ä¸ªè®¡åˆ†å·¥å…·ã€‚â€</li>
<li><strong>è§„åˆ™ï¼š</strong> â€œå¿…é¡»æ»¡è¶³æ€»åˆ†ä¸º 0ã€‚â€</li>
<li><strong>å¼‚å¸¸å¤„ç†ï¼š</strong> â€œæ”¯æŒè¯¯æ“ä½œæ’¤é”€ã€‚â€</li>
</ul>
<h3 data-id="heading-12">ç¬¬äºŒæ­¥ï¼šåˆ©ç”¨ Trae/Cursor çš„ä¸Šä¸‹æ–‡èƒ½åŠ› ğŸ¤–</h3>
<p>å°†ä½ çš„ <code>spec.md</code> å–‚ç»™ AIã€‚ä½ ä¼šå‘ç°ï¼Œè¿™æ—¶å€™ç”Ÿæˆçš„ä»£ç ï¼Œé€»è¾‘ä¸€è‡´æ€§æé«˜ã€‚å®ƒä¼šä¸»åŠ¨ä¸ºä½ åˆ›å»º <code>utils/storage.js</code> è¿™ç§å·¥å…·ç±»ï¼Œè€Œä¸æ˜¯æŠŠå‡ ç™¾è¡Œä»£ç å¡è¿›ä¸€ä¸ª <code>index.js</code>ã€‚</p>
<h3 data-id="heading-13">ç¬¬ä¸‰æ­¥ï¼šè°ƒè¯•ä¸è°ƒä¼˜ï¼ˆRefineï¼‰ ğŸ”§</h3>
<p>Vibe Coding ä¸ä»£è¡¨â€œé›¶ä»£ç ä¿®æ”¹â€ï¼Œè€Œæ˜¯â€œé›¶ä»£ç ç¡¬ç¼–ç â€ã€‚
å½“ AI ç”Ÿæˆä»£ç åï¼Œä½ å‘ç°æŸä¸ªæŒ‰é’®å¤ªå°ï¼Œä½ åº”è¯¥è¯´ï¼š</p>
<blockquote>
<p>â€œæŠŠ <code>input</code> é¡µé¢çš„ <code>save</code> æŒ‰é’®æ”¹ä¸ºæ‚¬æµ®å¼è®¾è®¡ï¼Œå¢åŠ  <code>box-shadow</code>ã€‚â€
è€Œä¸æ˜¯è‡ªå·±å»æ”¹ CSSã€‚è®© AI å§‹ç»ˆä¿æŒå¯¹å…¨å±€æ ·å¼çš„æ„ŸçŸ¥ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-14">æ€»ç»“ï¼šVibe Coding çš„æœªæ¥æ˜¯ SDD</h2>
<p>ä»æœ€åˆçš„â€œæŠ½å¡â€ç¢°è¿æ°”ï¼Œåˆ°â€œæç¤ºè¯å·¥ç¨‹â€çš„æŠ€å·§æ²‰æ·€ï¼Œå†åˆ°â€œè§„èŒƒé©±åŠ¨â€çš„ç³»ç»ŸåŒ–ç”Ÿäº§ï¼ŒVibe Coding å·²ç»ä¸å†æ˜¯ç„å­¦ã€‚</p>
<p><strong>AI ç¼–ç¨‹çš„å…¬å¼å·²ç»æ˜ç¡®ï¼š</strong>
<code>AI ç¼–ç¨‹ = é«˜è´¨é‡æç¤ºè¯ + å¼ºå¤§çš„ AI ç¼–è¾‘å™¨(Trae/Cursor) + é¡¶å°–å¤§æ¨¡å‹(Gemini 3/Claude 3.5) + SDD è§„èŒƒ</code></p>
<p>åœ¨è¿™ä¸ªæ—¶ä»£ï¼Œ<strong>ä½ çš„æ€ç»´æ·±åº¦å†³å®šäº†ä»£ç çš„é«˜åº¦</strong>ã€‚ä¸å†éœ€è¦çº ç»“äºä¸€ä¸ªé—­åŒ…æ€ä¹ˆå†™ï¼Œä¸€ä¸ª API æ€ä¹ˆè°ƒç”¨ï¼Œä½ éœ€è¦å…³æ³¨çš„æ˜¯ï¼š<strong>äº§å“é€»è¾‘æ˜¯å¦è‡ªæ´½ï¼Ÿç”¨æˆ·ä½“éªŒæ˜¯å¦ä¸æ»‘ï¼Ÿè§„èŒƒæ–‡æ¡£æ˜¯å¦ä¸¥è°¨ï¼Ÿ</strong></p>
<p>å¦‚æœä½ è¿˜åœ¨ä¸ºå†™ä»£ç å¤´ç§ƒï¼Œä¸å¦¨æ¢ä¸ªå§¿åŠ¿ï¼ŒåŠ å…¥ Vibe Coding çš„è¿›åŒ–è¡Œåˆ—å§ï¼ğŸš€</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Sugo Protector ä»£ç ä¿æŠ¤æ•ˆæœåˆ†ææŠ¥å‘Š]]></title>    <link>https://juejin.cn/post/7592255257346867241</link>    <guid>https://juejin.cn/post/7592255257346867241</guid>    <pubDate>2026-01-07T07:48:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592255257346867241" data-draft-id="7592144524309004294" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Sugo Protector ä»£ç ä¿æŠ¤æ•ˆæœåˆ†ææŠ¥å‘Š"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-07T07:48:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MeowStack"/> <meta itemprop="url" content="https://juejin.cn/user/3001004407135898"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Sugo Protector ä»£ç ä¿æŠ¤æ•ˆæœåˆ†ææŠ¥å‘Š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3001004407135898/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MeowStack
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T07:48:07.000Z" title="Wed Jan 07 2026 07:48:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. æ¦‚è¿°</h2>
<p>æœ¬æŠ¥å‘Šæ—¨åœ¨å¯¹æ¯”æœªç»ä¿æŠ¤çš„åŸå§‹ä»£ç ä¸ç»è¿‡ <strong>Sugo Protector</strong> å¤„ç†åçš„å—ä¿æŠ¤ä»£ç ï¼Œä»æºä»£ç é€»è¾‘ã€æ±‡ç¼–æŒ‡ä»¤ç»“æ„ã€åç¼–è¯‘å¯è¯»æ€§ä»¥åŠæ–‡ä»¶ç»“æ„ç­‰å¤šä¸ªç»´åº¦è¿›è¡Œåˆ†æã€‚æµ‹è¯•æ ·æœ¬è¦†ç›–äº†ï¼šæ‰˜ç®¡ä»£ç ï¼ˆ.NET/C#ï¼‰ã€Nativeç¨‹åºï¼ˆC/C++ x64/ARM64ï¼‰ä»¥åŠ Android APK åº”ç”¨ã€‚</p>
<p><strong>ç»“è®ºå…ˆè¡Œï¼š</strong> <strong>Sugo Protector</strong> æˆåŠŸé€šè¿‡<strong>æ§åˆ¶æµå¹³å¦åŒ–ã€æŒ‡ä»¤çº§æ··æ·†ã€è™šå‡æ§åˆ¶æµã€é˜²åç¼–è¯‘ï¼ˆAnti-Decompilationï¼‰</strong> ç­‰æŠ€æœ¯ï¼Œå°†åŸæœ¬æ¸…æ™°çš„é€»è¾‘å½»åº•è½¬åŒ–ä¸ºä¸å¯è¯»ã€ä¸å¯é€†çš„æ··ä¹±çŠ¶æ€ï¼Œæå¤§æå‡äº†é€†å‘å·¥ç¨‹çš„é—¨æ§›ã€‚</p>
<hr/>
<h2 data-id="heading-1">2. è¯¦ç»†å¯¹æ¯”åˆ†æ</h2>
<h3 data-id="heading-2">2.1 .NET/C# æ‰˜ç®¡ä»£ç æ··æ·†æ•ˆæœ</h3>
<p><strong>å¯¹æ¯”å¯¹è±¡ï¼š</strong> (åŸå§‹ç¨‹åº)</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1611872a77d64c52905862bca9df0be3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWVvd1N0YWNr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768376886&amp;x-signature=0wje8MzsIE1mQIKY2VoX1PcBl78%3D" alt="dotnet_original.png" loading="lazy"/></p>
<p>vs (ä¿æŠ¤å)
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45abfff21e994254a8e2523292580263~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWVvd1N0YWNr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768376886&amp;x-signature=8UvXwERgBi8lEUTwHm7fBGX8iNg%3D" alt="dotnet_protected.png" loading="lazy"/></p>

























<table><thead><tr><th><strong>ç»´åº¦</strong></th><th><strong>åŸå§‹ IL (Original)</strong></th><th><strong>å—ä¿æŠ¤ IL (Protected)</strong></th></tr></thead><tbody><tr><td><strong>CFG (æ§åˆ¶æµå›¾)</strong></td><td>æ¸…æ™°çš„é€’å½’é€»è¾‘ï¼Œ ä¸€ç›®äº†ç„¶ã€‚</td><td>å®Œå…¨ä¸å¯è¯»ã€‚é€»è¾‘è¢«åŒ…è£¹åœ¨æ— é™å¾ªç¯ä¸­ï¼Œé‡‡ç”¨äº†å¤æ‚çš„ Switch åˆ†å‘å™¨ï¼ˆæ§åˆ¶æµå¹³å¦åŒ–ï¼‰ã€‚</td></tr><tr><td><strong>æŒ‡ä»¤ç‰¹å¾</strong></td><td>çº¿æ€§æ¸…æ™°ï¼ŒæŒ‡ä»¤å¯è¯»ã€‚</td><td>å¼•å…¥äº†å¤§é‡çš„ç«‹å³æ•°åŠ å¯†ä¸ç®—æœ¯æ··æ·†ã€‚åŸå§‹çš„åŠ å‡æ³•è¢«æ›¿æ¢ä¸ºå¤æ‚çš„ä½è¿ç®—ç»„åˆã€‚</td></tr><tr><td><strong>åç¼–è¯‘ç»“æœ</strong></td><td>å¯ç›´æ¥è¿˜åŸå®Œæ•´ä»£ç ã€‚</td><td>åç¼–è¯‘å™¨è™½èƒ½æ˜¾ç¤ºä»£ç ï¼Œä½†é€»è¾‘å®Œå…¨ä¸¢å¤±ï¼Œé€†å‘è€…éœ€è¦è€—è´¹å¤§é‡æ—¶é—´å»æ··æ·†ï¼ˆDe-obfuscateï¼‰ã€‚</td></tr></tbody></table>
<p><strong>æŠ€æœ¯äº®ç‚¹ï¼š</strong></p>
<ul>
<li><strong>æ§åˆ¶æµå¹³å¦åŒ– (Control Flow Flattening):</strong> å½»åº•ç ´åäº†åŸæœ‰çš„ä»£ç å—é¡ºåºã€‚</li>
<li><strong>ä¸é€æ˜è°“è¯ (Opaque Predicates):</strong> æ’å…¥äº†å¤§é‡è¿è¡Œæ—¶è®¡ç®—çš„æ¡ä»¶ï¼Œé™æ€åˆ†æå·¥å…·æ— æ³•ç¡®å®šæ‰§è¡Œè·¯å¾„ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3">2.2 Native x64 æ±‡ç¼–ä¸åæ±‡ç¼–æ•ˆæœ</h3>
<p><strong>å¯¹æ¯”å¯¹è±¡ï¼š</strong> (åŸå§‹ç¨‹åº)
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d0125b357084d16a894cd731db02a5b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWVvd1N0YWNr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768376886&amp;x-signature=4%2Bv7JD2IWBi7qA12fsbdG0pONPQ%3D" alt="x64_asm_original.png" loading="lazy"/></p>
<p>vs (ä¿æŠ¤å)
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc506da985194b21b83204a697624c09~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWVvd1N0YWNr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768376886&amp;x-signature=hRvGnGX23EEfPr0V4lX8LLUvqnA%3D" alt="x64_asm_protected.png" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e69e0a45e3b420aaae02b6a5bb8bed6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWVvd1N0YWNr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768376886&amp;x-signature=I3EfunGsi0cxTj922Kw1Ni17GWE%3D" alt="x64_asm_2_protected.png" loading="lazy"/></p>

























<table><thead><tr><th><strong>ç»´åº¦</strong></th><th><strong>åŸå§‹x64æ±‡ç¼–</strong></th><th><strong>å—ä¿æŠ¤x64æ±‡ç¼–</strong></th></tr></thead><tbody><tr><td><strong>CFG (æ§åˆ¶æµå›¾)</strong></td><td>æ ‡å‡†çš„IDA å¯è¯†åˆ«å‡½æ•°ã€‚</td><td>å…¥å£å³é­åˆ°ç ´åã€‚æŒ‡ä»¤æµä¸­æ’å…¥å¼‚å¸¸æŒ‡ä»¤ã€‚</td></tr><tr><td><strong>æŒ‡ä»¤ç‰¹å¾</strong></td><td>çº¿æ€§æ¸…æ™°ï¼ŒæŒ‡ä»¤æŒ‡å‘æ˜ç¡®çš„å‡½æ•°åœ°å€ã€‚</td><td>å‡ºç°äº†å¤§é‡ç‰¹æƒæŒ‡ä»¤æˆ–å¼‚å¸¸æŒ‡ä»¤æ··æ·†ï¼Œè¿™ä¼šå¹²æ‰°è°ƒè¯•å™¨å’Œæ¨¡æ‹Ÿå™¨ã€‚å‡ºç°äº† <code>call sub_xxxxx</code> åç´§æ¥æ•°æ®æ®µçš„æƒ…å†µï¼Œå¯¼è‡´åæ±‡ç¼–å¼•æ“é”™è¯¯æˆªæ–­ã€‚</td></tr><tr><td><strong>ååˆ†æ</strong></td><td>å¯å®Œç¾ç”Ÿæˆä¼ªä»£ç ã€‚</td><td>åˆ†æå—é˜»ï¼Œå‡½æ•°è¢«é”™è¯¯æˆªæ–­ï¼Œç”±äºå †æ ˆå¹³è¡¡è¢«ç ´åï¼ŒF5 ä¼ªä»£ç ç”Ÿæˆå¤§æ¦‚ç‡å¤±è´¥æˆ–ç”Ÿæˆé”™è¯¯é€»è¾‘ã€‚</td></tr></tbody></table>
<p><strong>æŠ€æœ¯äº®ç‚¹ï¼š</strong></p>
<ul>
<li><strong>èŠ±æŒ‡ä»¤ä¸è„æ•°æ® (Junk Code &amp; Anti-disassembly):</strong> è¿™é‡Œçš„ä»£ç æ®µæ•°æ®ï¼ŒæˆåŠŸè¯±å¯¼åæ±‡ç¼–å™¨äº§ç”Ÿé”™è¯¯æŒ‡ä»¤ã€‚</li>
<li><strong>æŒ‡ä»¤å˜å¼‚ (Instruction Mutation):</strong> åŸå§‹ç®€å•çš„è¿ç®—è¢«è†¨èƒ€ä¸ºå¤šæ¡å¤æ‚æŒ‡ä»¤ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-4">2.3 Native ARM64 æ±‡ç¼–ä¸åæ±‡ç¼–æ•ˆæœ</h3>
<p><strong>å¯¹æ¯”å¯¹è±¡ï¼š</strong> (åŸå§‹ç¨‹åº)
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee6bbdac9a4c4ba6800c6ed1210dc0ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWVvd1N0YWNr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768376886&amp;x-signature=c9JjvkzNSzvT9PTGb2ebwm4%2FX%2BE%3D" alt="a64_asm_original.png" loading="lazy"/></p>
<p>vs (ä¿æŠ¤å)
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1020250bc8614a149e6f60acefb9c40a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWVvd1N0YWNr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768376886&amp;x-signature=uHLjJmDBBk5Larpn%2Bw9VPZaefaM%3D" alt="a64_asm_protected.png" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/373a59471e6d4c9dac3c55d9f043275a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWVvd1N0YWNr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768376886&amp;x-signature=HEXROcc7MOHJcBODZhiA7jJ%2Fudk%3D" alt="a64_asm_2_protected.png" loading="lazy"/></p>

























<table><thead><tr><th><strong>ç»´åº¦</strong></th><th><strong>åŸå§‹ ARM64æ±‡ç¼–</strong></th><th><strong>å—ä¿æŠ¤ ARM64</strong>æ±‡ç¼–</th></tr></thead><tbody><tr><td><strong>CFG (æ§åˆ¶æµå›¾)</strong></td><td>æ ‡å‡†çš„æ ‘çŠ¶æˆ–ç¯çŠ¶ç»“æ„ã€‚</td><td>æ§åˆ¶æµçˆ†ç‚¸ã€‚ä½¿ç”¨äº†å¯„å­˜å™¨é—´æ¥è·³è½¬ï¼Œè¿™æ˜¯å…¸å‹çš„è™šæ‹ŸåŒ–æˆ–é«˜å¼ºåº¦å¹³å¦åŒ–ç‰¹å¾ã€‚é™æ€åˆ†æå·¥å…·æ— æ³•ç›´æ¥è®¡ç®—å‡ºå¯„å­˜å™¨çš„ç›®æ ‡åœ°å€ï¼Œå¯¼è‡´ CFG æ–­è£‚ã€‚</td></tr><tr><td><strong>æŒ‡ä»¤ç‰¹å¾</strong></td><td>æ¸…æ™°çš„å¯„å­˜å™¨æ“ä½œã€‚</td><td>å……æ–¥ç€ <code>DCD</code>, <code>DCB</code> (æ•°æ®å®šä¹‰) ç©¿æ’åœ¨æŒ‡ä»¤ä¸­ï¼Œä»¥åŠä¸é€»è¾‘æ— å…³çš„æŒ‡ä»¤ï¼Œç”¨äºæ··æ·†è§†å¬ã€‚</td></tr><tr><td><strong>ååˆ†æ</strong></td><td>å¯å®Œç¾ç”Ÿæˆä¼ªä»£ç ã€‚</td><td>åˆ†æå—é˜»ï¼Œå‡½æ•°è¢«é”™è¯¯æˆªæ–­ï¼Œç”±äºå †æ ˆå¹³è¡¡è¢«ç ´åï¼ŒF5 ä¼ªä»£ç ç”Ÿæˆå¤§æ¦‚ç‡å¤±è´¥æˆ–ç”Ÿæˆé”™è¯¯é€»è¾‘ã€‚</td></tr></tbody></table>
<p><strong>æŠ€æœ¯äº®ç‚¹ï¼š</strong></p>
<ul>
<li><strong>é—´æ¥è·³è½¬ (Indirect Branching):</strong> åˆ©ç”¨è·³è½¬æŒ‡ä»¤é…åˆå¤æ‚çš„åœ°å€è®¡ç®—ï¼Œæœ‰æ•ˆå¯¹æŠ—äº†è‡ªåŠ¨åˆ†æå’Œæ’ä»¶çš„æ¢å¤ã€‚</li>
<li><strong>å‡½æ•°åˆ†å— (Function Chunking):</strong> å°†ä¸€ä¸ªå‡½æ•°æ‹†åˆ†ä¸ºä¸è¿ç»­çš„å†…å­˜å—ï¼Œå¢åŠ é˜…è¯»éš¾åº¦ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-5">2.4 Android APK æ–‡ä»¶ç»“æ„ä¸èµ„æº</h3>
<p><strong>å¯¹æ¯”å¯¹è±¡ï¼š</strong> (åŸå§‹ç¨‹åº)
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee95011917d14a069bab65fd8dc1a9b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWVvd1N0YWNr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768376886&amp;x-signature=s11dxynbjJJsQTUqQo8iV5JHDFE%3D" alt="apk_original.png" loading="lazy"/></p>
<p>vs (ä¿æŠ¤å)
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c0c48a5d40b44c3aea60007424f2e13~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWVvd1N0YWNr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768376886&amp;x-signature=GR%2Fvsa7eRA%2BWlud2rT7pRU81%2FKQ%3D" alt="apk_protected.png" loading="lazy"/></p>




















<table><thead><tr><th><strong>ç»´åº¦</strong></th><th><strong>åŸå§‹ APK</strong></th><th><strong>å—ä¿æŠ¤ APK</strong></th></tr></thead><tbody><tr><td><strong>åŒ…ç»“æ„</strong></td><td><code>com.example.applibs</code> ä¸‹ç›´æ¥æš´éœ²ä¸šåŠ¡ä»£ç ã€‚</td><td>å¼•å…¥äº† <code>meowstack.sugo</code> åŒ…ï¼Œè¯æ˜ä¿æŠ¤å£³å·²æˆåŠŸæ¤å…¥ã€‚</td></tr><tr><td><strong>ä»£ç </strong></td><td>åŸå§‹ä»£ç æš´éœ²ã€‚</td><td>å…³é”®ä»£ç å·²è¢«æŠ½å–å¹¶åŠ å¯†å­˜å‚¨ï¼Œåœ¨è¿è¡Œæ—¶åŠ¨æ€è§£å¯†ã€‚</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-6">3. ç»¼åˆè¯„ä¼°æ€»ç»“</h2>
<p>æ ¹æ®ä»¥ä¸Šæˆªå›¾åˆ†æï¼Œ<strong>Sugo Protector</strong> å±•ç°äº†å•†ä¸šçº§çš„é«˜å¼ºåº¦é˜²æŠ¤èƒ½åŠ›ï¼š</p>
<ul>
<li><strong>å¤šå±‚çº§é˜²å¾¡ä½“ç³»ï¼š</strong> ä»æºç çº§ï¼ˆ.NET IL æ··æ·†ï¼‰åˆ°æ±‡ç¼–çº§ï¼ˆx64/ARM64 æŒ‡ä»¤å˜å¼‚ï¼‰å†åˆ°æ–‡ä»¶çº§ï¼ˆAPK ç»“æ„ï¼‰ï¼Œå½¢æˆäº†ç«‹ä½“é˜²æŠ¤ã€‚</li>
<li><strong>å¯¹æŠ—è‡ªåŠ¨åŒ–å·¥å…·ï¼š</strong> é’ˆå¯¹ IDA Proã€JADXã€dnSpy ç­‰ä¸»æµé€†å‘å·¥å…·å‡æœ‰ä¸“é—¨çš„å¯¹æŠ—ç‰¹å¾ï¼ˆå¦‚ç ´åæ ˆå¸§ã€é—´æ¥è·³è½¬ã€èŠ±æŒ‡ä»¤ï¼‰ï¼Œè¿«ä½¿æ”»å‡»è€…å›é€€åˆ°ä½æ•ˆçš„åŠ¨æ€è°ƒè¯•ã€‚</li>
<li><strong>æ ¸å¿ƒé€»è¾‘éšè—ï¼š</strong> æ— è®ºæ˜¯ .NET çš„æ§åˆ¶æµå¹³å¦åŒ–ï¼Œè¿˜æ˜¯ Native ä»£ç çš„å¯„å­˜å™¨é—´æ¥è·³è½¬ï¼Œéƒ½å®Œç¾åœ°å°†é€»è¾‘éšè—åœ¨å¤æ‚çš„æ•°å­¦å˜æ¢å’Œæ··ä¹±çš„è·³è½¬ä¸­ï¼Œ<strong>æœ‰æ•ˆé˜²æ­¢äº†ç®—æ³•çªƒå–å’Œé€»è¾‘ç¯¡æ”¹</strong>ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½“AIç¼–è¾‘å™¨å­¦ä¼šäº†Shellå‘½ä»¤ï¼šIfAI v0.2.6æ·±åº¦æµ‹è¯„ä¸å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7592424951660085274</link>    <guid>https://juejin.cn/post/7592424951660085274</guid>    <pubDate>2026-01-07T08:56:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592424951660085274" data-draft-id="7592340733954228274" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å½“AIç¼–è¾‘å™¨å­¦ä¼šäº†Shellå‘½ä»¤ï¼šIfAI v0.2.6æ·±åº¦æµ‹è¯„ä¸å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,Cursor"/> <meta itemprop="datePublished" content="2026-01-07T08:56:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="peterfei"/> <meta itemprop="url" content="https://juejin.cn/user/2700056287782663"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å½“AIç¼–è¾‘å™¨å­¦ä¼šäº†Shellå‘½ä»¤ï¼šIfAI v0.2.6æ·±åº¦æµ‹è¯„ä¸å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2700056287782663/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    peterfei
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T08:56:24.000Z" title="Wed Jan 07 2026 08:56:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b9bd46fd44845658440a8d895738447~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcGV0ZXJmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380984&amp;x-signature=M6MthwRkNrlWyvrZ9rvIs6Y2Azw%3D" alt="ifai2026001_1280x720.gif" loading="lazy"/></p>
<h2 data-id="heading-0">å‰è¨€ï¼šä»"ä»£ç è¡¥å…¨"åˆ°"ç¯å¢ƒæ“ä½œ"çš„è´¨å˜</h2>
<p>å¦‚æœä½ ç”¨è¿‡GitHub Copilotã€Cursoræˆ–Windsurfï¼Œä½ åº”è¯¥å·²ç»ä¹ æƒ¯äº†è¿™æ ·çš„å·¥ä½œæµï¼šAIç”Ÿæˆä»£ç  â†’ ä½ å¤åˆ¶åˆ°ç¼–è¾‘å™¨ â†’ åˆ‡æ¢åˆ°ç»ˆç«¯ â†’ æ‰‹åŠ¨æ‰§è¡Œ<code>npm install</code> â†’ å›åˆ°AIç»§ç»­å¯¹è¯ã€‚</p>
<p>æ•´ä¸ªè¿‡ç¨‹éœ€è¦é¢‘ç¹åˆ‡æ¢çª—å£ï¼Œæ‰“æ–­å¿ƒæµã€‚</p>
<p><strong>IfAI v0.2.6è¯•å›¾è§£å†³è¿™ä¸ªé—®é¢˜</strong>â€”â€”å®ƒè®©AI Agentå…·å¤‡äº†Shellå‘½ä»¤æ‰§è¡Œèƒ½åŠ›ï¼Œä¸å†æ˜¯"è¢«åŠ¨ç”Ÿæˆä»£ç çš„å·¥å…·"ï¼Œè€Œæ˜¯"ä¸»åŠ¨æ“ä½œç¯å¢ƒçš„æ­æ¡£"ã€‚</p>
<p>æœ¬æ–‡å°†ä»æŠ€æœ¯åŸç†ã€å®é™…åœºæ™¯ã€æ¶æ„è®¾è®¡ä¸‰ä¸ªç»´åº¦ï¼Œæ·±åº¦è§£æIfAI v0.2.6çš„Agent Shellèƒ½åŠ›ã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b65f06e7306a473da5397b315036c0e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcGV0ZXJmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380984&amp;x-signature=57kqfY2E1v7dDT25rU8vVtJS5d0%3D" alt="æˆªå±2026-01-07 15.28.50.png" loading="lazy"/></p>
<h2 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆAgentéœ€è¦Shellèƒ½åŠ›ï¼Ÿ</h2>
<h3 data-id="heading-2">1.1 ä¼ ç»ŸAIå·¥å…·çš„å±€é™æ€§</h3>
<p>å½“å‰ä¸»æµAIç¼–ç¨‹å·¥å…·ï¼ˆåŒ…æ‹¬GPT-4ã€Claudeç­‰ï¼‰çš„æ ¸å¿ƒæ¨¡å¼æ˜¯ï¼š<strong>å¯¹è¯ â†’ ç”Ÿæˆä»£ç  â†’ äººå·¥æ‰§è¡Œ</strong>ã€‚</p>
<p>è¿™ä¸ªæ¨¡å¼çš„è‡´å‘½ç¼ºé™·åœ¨äºï¼š</p>
<ul>
<li><strong>ç¯å¢ƒéš”ç¦»</strong>ï¼šAIæ— æ³•æ„ŸçŸ¥é¡¹ç›®æ˜¯å¦å·²å®‰è£…ä¾èµ–</li>
<li><strong>æ‰§è¡Œæ–­å±‚</strong>ï¼šç”Ÿæˆçš„ä»£ç éœ€è¦äººå·¥æ‰‹åŠ¨è¿è¡Œæµ‹è¯•</li>
<li><strong>åé¦ˆå»¶è¿Ÿ</strong>ï¼šé”™è¯¯ä¿¡æ¯éœ€è¦äººå·¥å¤åˆ¶å›AIå¯¹è¯æ¡†</li>
<li><strong>ä¸Šä¸‹æ–‡ä¸¢å¤±</strong>ï¼šé¢‘ç¹åˆ‡æ¢çª—å£å¯¼è‡´å¼€å‘å¿ƒæµè¢«æ‰“æ–­</li>
</ul>
<h3 data-id="heading-3">1.2 Shellèƒ½åŠ›çš„ä»·å€¼</h3>
<p>èµ‹äºˆAgent Shellæ‰§è¡Œæƒé™åï¼Œå·¥ä½œæµå˜æˆäº†ï¼š</p>
<p><strong>å¯¹è¯ â†’ Agentè‡ªä¸»æ‰§è¡Œ â†’ å®æ—¶åé¦ˆ â†’ è¿­ä»£ä¼˜åŒ–</strong></p>
<p>è¿™ä¸æ˜¯ç®€å•çš„è‡ªåŠ¨åŒ–ï¼Œè€Œæ˜¯<strong>Agentè‡ªä¸»æ€§</strong>çš„è´¨å˜ï¼š</p>
<ul>
<li>Agentå¯ä»¥è‡ªä¸»å®‰è£…ä¾èµ–ï¼ˆ<code>npm install</code>ã€<code>cargo build</code>ï¼‰</li>
<li>Agentå¯ä»¥è‡ªä¸»è¿è¡Œæµ‹è¯•ï¼ˆ<code>npm test</code>ã€<code>pytest</code>ï¼‰</li>
<li>Agentå¯ä»¥è‡ªä¸»æäº¤ä»£ç ï¼ˆ<code>git add</code>ã€<code>git commit</code>ï¼‰</li>
<li>Agentå¯ä»¥è‡ªä¸»æ£€æŸ¥ç¯å¢ƒï¼ˆ<code>node --version</code>ã€<code>git status</code>ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-4">äºŒã€IfAI v0.2.6çš„Shellèƒ½åŠ›æŠ€æœ¯å®ç°</h2>
<h3 data-id="heading-5">2.1 è·¯å¾„æ„ŸçŸ¥ï¼šé¿å…Agent"è¿·è·¯"</h3>
<p>æœ€æ ¸å¿ƒçš„æŠ€æœ¯çªç ´æ˜¯<strong>è·¯å¾„æ„ŸçŸ¥æœºåˆ¶</strong>ã€‚</p>
<h4 data-id="heading-6">é—®é¢˜èƒŒæ™¯</h4>
<p>åœ¨Rusté¡¹ç›®ä¸­ï¼Œå½“Agentè¯¯å…¥<code>src-tauri</code>æºç ç›®å½•åï¼Œä¼šä¸æ–­æ‰§è¡Œ<code>cargo build</code>ï¼Œé™·å…¥æ­»å¾ªç¯ï¼š</p>
<ul>
<li>åœ¨<code>src-tauri</code>ç›®å½•æ‰§è¡Œ<code>cargo build</code> â†’ å¤±è´¥</li>
<li>Agentå°è¯•ä¿®å¤ â†’ å†æ¬¡å¤±è´¥</li>
<li>å¾ªç¯å¾€å¤</li>
</ul>
<h4 data-id="heading-7">è§£å†³æ–¹æ¡ˆ</h4>
<p>IfAI v0.2.6å®ç°äº†å…¨å±€<strong>æ ¹ç›®å½•æ ¡å‡†é€»è¾‘</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ ¸å¿ƒä¼ªä»£ç </span>
fn <span class="hljs-built_in">execute_command</span>(cmd: Command) -&gt; Result {
 Â  Â let current_dir = std::env::<span class="hljs-built_in">current_dir</span>()?;
â€‹
 Â  Â <span class="hljs-comment">// æ£€æµ‹æ˜¯å¦åœ¨æºç ç›®å½•å†…</span>
 Â  Â if <span class="hljs-built_in">is_in_source_dir</span>(&amp;current_dir) {
 Â  Â  Â  Â <span class="hljs-comment">// è‡ªåŠ¨è·³è½¬åˆ°é¡¹ç›®æ ¹ç›®å½•</span>
 Â  Â  Â  Â std::env::<span class="hljs-built_in">set_current_dir</span>(<span class="hljs-built_in">project_root</span>())?;
 Â   }
â€‹
 Â  Â <span class="hljs-comment">// æ‰§è¡Œå‘½ä»¤</span>
 Â  Â cmd<span class="hljs-selector-class">.spawn</span>()?<span class="hljs-selector-class">.wait</span>()
}
</code></pre>
<p>Agentç°åœ¨å¯ä»¥ï¼š</p>
<ul>
<li>è¯†åˆ«è‡ªå·±æ˜¯å¦åœ¨<code>src-tauri</code>ã€<code>node_modules</code>ç­‰é™·é˜±ç›®å½•</li>
<li>è‡ªåŠ¨è·³è½¬å›é¡¹ç›®æ ¹ç›®å½•</li>
<li>æ ¹æ®stderråé¦ˆæ™ºèƒ½ä¿®æ­£æ‰§è¡Œè·¯å¾„</li>
</ul>
<h3 data-id="heading-8">2.2 å®‰å…¨æ²™ç®±ï¼šé˜²æ­¢æ¶æ„æ‰§è¡Œ</h3>
<p>èµ‹äºˆAgent Shellæƒé™åï¼Œå®‰å…¨æ€§æˆä¸ºé¦–è¦é—®é¢˜ã€‚IfAI v0.2.6çš„å®‰å…¨æœºåˆ¶åŒ…æ‹¬ï¼š</p>
<ol start="0">
<li><strong>å‘½ä»¤ç™½åå•</strong>ï¼šåªå…è®¸<code>npm</code>ã€<code>cargo</code>ã€<code>git</code>ç­‰å¼€å‘å‘½ä»¤</li>
<li><strong>å®¡æ‰¹æœºåˆ¶</strong>ï¼šå±é™©æ“ä½œï¼ˆå¦‚<code>rm -rf</code>ï¼‰éœ€è¦ç”¨æˆ·ç¡®è®¤</li>
<li><strong>è¶…æ—¶ä¿æŠ¤</strong>ï¼šå‘½ä»¤æ‰§è¡Œè¶…è¿‡30ç§’è‡ªåŠ¨ç»ˆæ­¢</li>
<li><strong>æ—¥å¿—å®¡è®¡</strong>ï¼šæ‰€æœ‰å‘½ä»¤æ‰§è¡Œè®°å½•å¯è¿½æº¯</li>
</ol>
<hr/>
<h2 data-id="heading-9">ä¸‰ã€å®æˆ˜åœºæ™¯æ¼”ç¤º</h2>
<h3 data-id="heading-10">åœºæ™¯1ï¼šä»é›¶å¯åŠ¨Reacté¡¹ç›®</h3>
<p><strong>ç”¨æˆ·è¾“å…¥</strong>ï¼š</p>
<pre><code class="hljs">å¸®æˆ‘åˆ›å»ºä¸€ä¸ªReact + TypeScripté¡¹ç›®ï¼Œé…ç½®TailwindCSS
</code></pre>
<p><strong>Agentè‡ªä¸»æ‰§è¡Œ</strong>ï¼š</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># 1. åˆ›å»ºé¡¹ç›®</span>
npx create-react-app <span class="hljs-keyword">my</span>-app --template typescript
â€‹
<span class="hljs-comment"># 2. è¿›å…¥ç›®å½•</span>
cd <span class="hljs-keyword">my</span>-app
â€‹
<span class="hljs-comment"># 3. å®‰è£…TailwindCSS</span>
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p
â€‹
<span class="hljs-comment"># 4. é…ç½®Tailwindï¼ˆè‡ªåŠ¨ç¼–è¾‘tailwind.config.jsï¼‰</span>
<span class="hljs-comment"># 5. æ›´æ–°CSSï¼ˆè‡ªåŠ¨ç¼–è¾‘src/index.cssï¼‰</span>
</code></pre>
<p>ç”¨æˆ·åªéœ€è¦ç­‰å¾…ï¼Œæ— éœ€åˆ‡æ¢çª—å£ã€å¤åˆ¶å‘½ä»¤ã€æ‰‹åŠ¨æ‰§è¡Œã€‚</p>
<h3 data-id="heading-11">åœºæ™¯2ï¼šè°ƒè¯•æµ‹è¯•å¤±è´¥</h3>
<p><strong>ç”¨æˆ·è¾“å…¥</strong>ï¼š</p>
<pre><code class="hljs">æµ‹è¯•å¤±è´¥äº†ï¼Œå¸®æˆ‘çœ‹çœ‹
</code></pre>
<p><strong>Agentè‡ªä¸»æ‰§è¡Œ</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. è¿è¡Œæµ‹è¯•</span>
npm <span class="hljs-built_in">test</span>
â€‹
<span class="hljs-comment"># 2. åˆ†æstderrè¾“å‡º</span>
<span class="hljs-comment"># FAIL src/components/Button.test.js</span>
<span class="hljs-comment"># Â  â— Button component</span>
<span class="hljs-comment"># Â  Â  âœ“ renders correctly</span>
<span class="hljs-comment"># Â  Â  âœ— handles click events</span>
â€‹
<span class="hljs-comment"># 3. æ£€æŸ¥ä»£ç </span>
<span class="hljs-built_in">cat</span> src/components/Button.test.js
â€‹
<span class="hljs-comment"># 4. ä¿®å¤é—®é¢˜</span>
<span class="hljs-comment"># è‡ªåŠ¨ç¼–è¾‘æµ‹è¯•æ–‡ä»¶</span>
â€‹
<span class="hljs-comment"># 5. é‡æ–°è¿è¡Œæµ‹è¯•</span>
npm <span class="hljs-built_in">test</span>
<span class="hljs-comment"># âœ“ All tests passed!</span>
</code></pre>
<p>Agentè‡ªä¸»å®Œæˆäº†"è¯Šæ–­-ä¿®å¤-éªŒè¯"çš„å®Œæ•´é—­ç¯ã€‚</p>
<hr/>
<h2 data-id="heading-12">å››ã€ä¸å…¶ä»–å·¥å…·çš„å¯¹æ¯”</h2>





























































<table><thead><tr><th>ç‰¹æ€§</th><th>IfAI v0.2.6</th><th>Cursor</th><th>Windsurf</th><th>GitHub Copilot</th></tr></thead><tbody><tr><td>Shellå‘½ä»¤æ‰§è¡Œ</td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>âŒ</td></tr><tr><td>è·¯å¾„æ„ŸçŸ¥</td><td>âœ…</td><td>N/A</td><td>N/A</td><td>N/A</td></tr><tr><td>ä»»åŠ¡æ‹†è§£</td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>âŒ</td></tr><tr><td>Tokenå¯è§†åŒ–</td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>âŒ</td></tr><tr><td>OpenSpecé›†æˆ</td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>âŒ</td></tr><tr><td>æœ¬åœ°æ¨¡å‹</td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>âŒ</td></tr><tr><td>å¼€æºåè®®</td><td>MIT</td><td>ä¸“æœ‰</td><td>ä¸“æœ‰</td><td>ä¸“æœ‰</td></tr></tbody></table>
<p><strong>æ ¸å¿ƒå·®å¼‚åŒ–ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li><strong>Agentè‡ªä¸»æ€§</strong>ï¼šä¸ä»…æ˜¯ä»£ç ç”Ÿæˆï¼Œæ›´æ˜¯ç¯å¢ƒæ“ä½œ</li>
<li><strong>ä»»åŠ¡æ‹†è§£</strong>ï¼šåƒæ¶æ„å¸ˆä¸€æ ·æ€è€ƒï¼Œå°†éœ€æ±‚è½¬åŒ–ä¸ºä»»åŠ¡æ ‘</li>
<li><strong>è§„èŒƒé©±åŠ¨</strong>ï¼šOpenSpecç¡®ä¿ä»£ç æ¶æ„ä¸€è‡´æ€§</li>
</ul>
<hr/>
<h2 data-id="heading-13">äº”ã€æŠ€æœ¯æ¶æ„æ·±åº¦è§£æ</h2>
<h3 data-id="heading-14">5.1 Bash Toolæ¶æ„</h3>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Â  UI Layer Â  Â   â”‚
â”‚  (Chat Panel) Â  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 Â  Â  Â  Â  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent Core Â  Â  â”‚
â”‚  (Intent Recog) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 Â  Â  Â  Â  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Â  Bash Tool Â  Â  â”‚
â”‚  â€¢ Cmd Builder  â”‚
â”‚  â€¢ Path Aware Â  â”‚
â”‚  â€¢ Sandbox Â  Â   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 Â  Â  Â  Â  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Rust Backend Â  â”‚
â”‚  (Tauri IPC) Â   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 Â  Â  Â  Â  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Shell Execute  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-15">5.2 è·¯å¾„æ„ŸçŸ¥æµç¨‹</h3>
<pre><code class="hljs"/></pre>
<hr/>
<h2 data-id="heading-16">å…­ã€é€‚ç”¨åœºæ™¯ä¸é™åˆ¶</h2>
<h3 data-id="heading-17">âœ… æœ€ä½³é€‚ç”¨åœºæ™¯</h3>
<ul>
<li><strong>æ–°é¡¹ç›®åˆå§‹åŒ–</strong>ï¼šè‡ªåŠ¨æ‰§è¡Œ<code>npm install</code>ã€<code>cargo build</code></li>
<li><strong>ä¾èµ–ç®¡ç†</strong>ï¼šè‡ªä¸»å®‰è£…/æ›´æ–°åŒ…</li>
<li><strong>æµ‹è¯•è°ƒè¯•</strong>ï¼šè¿è¡Œæµ‹è¯•å¹¶åˆ†æç»“æœ</li>
<li><strong>Gitæ“ä½œ</strong>ï¼šæäº¤ä»£ç ã€æŸ¥çœ‹çŠ¶æ€</li>
<li><strong>ç¯å¢ƒæ£€æŸ¥</strong>ï¼šéªŒè¯Node/Python/Javaç‰ˆæœ¬</li>
</ul>
<h3 data-id="heading-18">âš ï¸ å½“å‰é™åˆ¶</h3>
<ul>
<li><strong>åªæ”¯æŒå¼€å‘å‘½ä»¤</strong>ï¼šä¸é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒè¿ç»´</li>
<li><strong>éœ€è¦å®¡æ‰¹æœºåˆ¶</strong>ï¼šå±é™©æ“ä½œéœ€äººå·¥ç¡®è®¤</li>
<li><strong>å­¦ä¹ æˆæœ¬</strong>ï¼šéœ€è¦äº†è§£Agentçš„èƒ½åŠ›è¾¹ç•Œ</li>
</ul>
<hr/>
<h2 data-id="heading-19">ä¸ƒã€æœªæ¥å±•æœ›</h2>
<p>IfAI v0.2.6çš„Shellèƒ½åŠ›åªæ˜¯ä¸€ä¸ªå¼€å§‹ã€‚æœªæ¥çš„æ–¹å‘åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>å¤šAgentåä½œ</strong>ï¼šä¸€ä¸ªAgentè´Ÿè´£Shellï¼Œä¸€ä¸ªè´Ÿè´£ä»£ç ç”Ÿæˆ</li>
<li><strong>Dockeræ”¯æŒ</strong>ï¼šAgentå¯ä»¥è‡ªä¸»æ„å»ºå’Œæ“ä½œå®¹å™¨</li>
<li><strong>CI/CDé›†æˆ</strong>ï¼šAgentå¯ä»¥è‡ªä¸»è§¦å‘éƒ¨ç½²æµç¨‹</li>
<li><strong>æ™ºèƒ½æ¢å¤</strong>ï¼šAgentå¯ä»¥è¯Šæ–­å¹¶ä¿®å¤ç¯å¢ƒé—®é¢˜</li>
</ul>
<p>ä»"ä»£ç è¡¥å…¨"åˆ°"è‡ªä¸»ç¼–ç¨‹æ­æ¡£"ï¼Œè¿™ä¸ä»…æ˜¯å·¥å…·çš„è¿›åŒ–ï¼Œæ›´æ˜¯å¼€å‘èŒƒå¼çš„å˜é©ã€‚</p>
<hr/>
<h2 data-id="heading-20">å…«ã€æ€»ç»“</h2>
<p>IfAI v0.2.6é€šè¿‡èµ‹äºˆAgent Shellæ‰§è¡Œèƒ½åŠ›ï¼Œå®ç°äº†ä»"è¢«åŠ¨å·¥å…·"åˆ°"ä¸»åŠ¨æ­æ¡£"çš„è´¨å˜ï¼š</p>
<p>âœ… <strong>è‡ªä¸»æ€§</strong>ï¼šAgentå¯ä»¥æ“ä½œçœŸå®ç¯å¢ƒï¼Œä¸å†è¢«é™åˆ¶åœ¨æ²™ç®±Â âœ… <strong>æ„ŸçŸ¥åŠ›</strong>ï¼šè·¯å¾„æ„ŸçŸ¥æœºåˆ¶é¿å…Agent"è¿·è·¯"Â âœ… <strong>å®‰å…¨æ€§</strong>ï¼šæ²™ç®±æœºåˆ¶ä¿æŠ¤ç³»ç»Ÿå®‰å…¨Â âœ… <strong>ç”Ÿäº§åŠ›</strong>ï¼šå‡å°‘çª—å£åˆ‡æ¢ï¼Œä¿æŒå¼€å‘å¿ƒæµ</p>
<p>å¦‚æœä½ åŒå€¦äº†åœ¨AIå’Œç»ˆç«¯ä¹‹é—´é¢‘ç¹åˆ‡æ¢ï¼ŒIfAI v0.2.6å€¼å¾—å°è¯•ã€‚</p>
<hr/>
<p><strong>é¡¹ç›®åœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpeterfei%2Fifai" target="_blank" title="https://github.com/peterfei/ifai" ref="nofollow noopener noreferrer">github.com/peterfei/ifâ€¦</a></p>
<p><strong>å‘å¸ƒè¯´æ˜</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpeterfei%2Fifai%2Fblob%2Fmain%2FRELEASE-v0.2.6.md" target="_blank" title="https://github.com/peterfei/ifai/blob/main/RELEASE-v0.2.6.md" ref="nofollow noopener noreferrer">RELEASE-v0.2.6.md</a></p>
<hr/>
<p><strong>æ ‡ç­¾</strong>ï¼š#AIç¼–è¾‘å™¨ #Shellå‘½ä»¤ #Agent #æ·±åº¦æµ‹è¯„ #æŠ€æœ¯è§£æ #IfAI #Rust #Tauri</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¼ä¸šååŒåŠå…¬ç³»ç»Ÿï¼ˆOAï¼‰-ã€å›¾æ ‡é€‰æ‹©å™¨ã€‘æ¨¡å—å¼€å‘è¯¦è§£]]></title>    <link>https://juejin.cn/post/7592234632482258953</link>    <guid>https://juejin.cn/post/7592234632482258953</guid>    <pubDate>2026-01-07T03:18:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592234632482258953" data-draft-id="7592251792651517979" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¼ä¸šååŒåŠå…¬ç³»ç»Ÿï¼ˆOAï¼‰-ã€å›¾æ ‡é€‰æ‹©å™¨ã€‘æ¨¡å—å¼€å‘è¯¦è§£"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2026-01-07T03:18:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å…‰å¤´é—ªäº®äº®"/> <meta itemprop="url" content="https://juejin.cn/user/1333047014199326"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¼ä¸šååŒåŠå…¬ç³»ç»Ÿï¼ˆOAï¼‰-ã€å›¾æ ‡é€‰æ‹©å™¨ã€‘æ¨¡å—å¼€å‘è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1333047014199326/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å…‰å¤´é—ªäº®äº®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T03:18:07.000Z" title="Wed Jan 07 2026 03:18:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¼ä¸šååŒåŠå…¬ç³»ç»Ÿï¼ˆOAï¼‰-ã€å›¾æ ‡é€‰æ‹©å™¨ã€‘æ¨¡å—å¼€å‘è¯¦è§£</h2>
<h3 data-id="heading-1">1. åŠŸèƒ½éœ€æ±‚</h3>
<p>å›¾æ ‡é€‰æ‹©å™¨æ˜¯ç³»ç»ŸåŠŸèƒ½è®¾ç½®æ¨¡å—ä¸­çš„ä¸€ä¸ªé‡è¦ç»„ä»¶ï¼Œç”¨äºä¸ºå„ç§ç³»ç»ŸåŠŸèƒ½é€‰æ‹©åˆé€‚çš„å›¾æ ‡ã€‚å…¶ä¸»è¦åŠŸèƒ½éœ€æ±‚å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>åŒæ¨¡å¼å›¾æ ‡é€‰æ‹©</strong>ï¼šæ”¯æŒFont Awesomeå­—ä½“å›¾æ ‡å’Œç³»ç»Ÿç¬¦å·å›¾æ ‡ï¼ˆEmojiï¼‰ä¸¤ç§ç±»å‹</li>
<li><strong>å›¾æ ‡æœç´¢è¿‡æ»¤</strong>ï¼šæä¾›æœç´¢åŠŸèƒ½ï¼Œæ ¹æ®å›¾æ ‡åç§°å¿«é€Ÿè¿‡æ»¤æ˜¾ç¤ºç»“æœ</li>
<li><strong>é¢œè‰²é€‰æ‹©</strong>ï¼šæ”¯æŒä¸ºFont Awesomeå›¾æ ‡é€‰æ‹©ä¸åŒé¢œè‰²</li>
<li><strong>å›¾æ ‡é¢„è§ˆ</strong>ï¼šå®æ—¶é¢„è§ˆé€‰ä¸­çš„å›¾æ ‡åŠå…¶åº”ç”¨é¢œè‰²åçš„æ•ˆæœ</li>
<li><strong>æ¨¡æ€æ¡†äº¤äº’</strong>ï¼šä»¥æ¨¡æ€æ¡†å½¢å¼å±•ç¤ºï¼Œæä¾›æ¸…æ™°çš„é€‰æ‹©ç•Œé¢</li>
<li><strong>å“åº”å¼è®¾è®¡</strong>ï¼šé€‚é…ä¸åŒå±å¹•å°ºå¯¸çš„æ˜¾ç¤ºéœ€æ±‚</li>
<li><strong>é›†æˆæ€§</strong>ï¼šä¸ç³»ç»ŸåŠŸèƒ½è¡¨å•æ— ç¼é›†æˆï¼Œæ”¯æŒå›¾æ ‡æ•°æ®çš„åŒå‘ç»‘å®š</li>
</ul>
<h3 data-id="heading-2">2. ç¬¬ä¸‰æ–¹å­—ä½“åº“ä»‹ç»</h3>
<p>æœ¬å›¾æ ‡é€‰æ‹©å™¨ä¸»è¦ä¾èµ–Font Awesomeå­—ä½“åº“ï¼š</p>
<h4 data-id="heading-3">Font Awesome</h4>
<ul>
<li><strong>ç‰ˆæœ¬</strong>ï¼š4.x (é€šè¿‡<code>fas fa-*</code>ç±»ååˆ¤æ–­)</li>
<li><strong>ç±»å‹</strong>ï¼šçŸ¢é‡å›¾æ ‡åº“</li>
<li><strong>ä¸»è¦ç”¨é€”</strong>ï¼šæä¾›ä¸°å¯Œçš„å¯ç¼©æ”¾å›¾æ ‡ï¼Œæ”¯æŒè‡ªå®šä¹‰é¢œè‰²å’Œå¤§å°</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼š
<ul>
<li>è½»é‡çº§ï¼ŒåŠ è½½é€Ÿåº¦å¿«</li>
<li>æ”¯æŒCSSæ ·å¼è‡ªå®šä¹‰ï¼ˆé¢œè‰²ã€å¤§å°ã€é˜´å½±ç­‰ï¼‰</li>
<li>å›¾æ ‡æ•°é‡ä¸°å¯Œï¼Œè¦†ç›–å¤šç§åº”ç”¨åœºæ™¯</li>
<li>æ”¯æŒå“åº”å¼è®¾è®¡</li>
</ul>
</li>
<li><strong>å¼•ç”¨æ–¹å¼</strong>ï¼šé€šè¿‡CSSç±»åç›´æ¥å¼•ç”¨ï¼Œå¦‚<code>&lt;i class="fas fa-home"&gt;&lt;/i&gt;</code></li>
</ul>
<h3 data-id="heading-4">3. åŠŸèƒ½è¿è¡Œæµç¨‹å›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[å¼€å§‹] --&gt; B[æ‰“å¼€å›¾æ ‡é€‰æ‹©å™¨æ¨¡æ€æ¡†]
    B --&gt; C[é€‰æ‹©å›¾æ ‡ç±»å‹ Font Awesomeç³»ç»Ÿç¬¦å·]
    C --&gt; D{è¾“å…¥æœç´¢å…³é”®è¯}
    D --&gt;|æ˜¯| E[è¿‡æ»¤å›¾æ ‡åˆ—è¡¨]
    D --&gt;|å¦| F[æ˜¾ç¤ºå…¨éƒ¨å›¾æ ‡]
    E --&gt; G
    F --&gt; G
    G{é€‰æ‹©å›¾æ ‡é¢œè‰²ä»…Font Awesomeæ”¯æŒ}
    G --&gt;|æ˜¯| H[åº”ç”¨é€‰æ‹©çš„é¢œè‰²]
    G --&gt;|å¦| I[ä¿æŒé»˜è®¤é¢œè‰²]
    H --&gt; J
    I --&gt; J
    J[é€‰æ‹©ç›®æ ‡å›¾æ ‡] --&gt; K{ç‚¹å‡»ç¡®è®¤æŒ‰é’®}
    K --&gt;|æ˜¯| L[ä¿å­˜é€‰æ‹©ç»“æœ]
    K --&gt;|å¦| M[ç‚¹å‡»å–æ¶ˆæŒ‰é’®]
    L --&gt; N[å…³é—­æ¨¡æ€æ¡†]
    M --&gt; N
    N --&gt; O[ç»“æŸ]
</code></pre>
<h4 data-id="heading-5">è¿è¡Œæ•ˆæœ</h4>
<h5 data-id="heading-6">ç³»ç»Ÿå›¾æ ‡</h5>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03440e90955948cf978d6a249a38e1a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5aS06Zeq5Lqu5Lqu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768360687&amp;x-signature=CYtx6lf6ofSbuehqyRJ0MvQLLe4%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-7">å­—ä½“å›¾æ ‡</h5>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a2f072e29e8471dab3b129fd3f03556~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5aS06Zeq5Lqu5Lqu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768360687&amp;x-signature=RJ1LsyqQM7EntOk%2FXSGJ34vUEjk%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-8">å­—ä½“å›¾æ ‡é¢œè‰²åˆ‡æ¢</h5>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a55d519cb4f4c1ea3789c59a272500b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5aS06Zeq5Lqu5Lqu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768360687&amp;x-signature=BVdCQhUpF8bTEtZjfiM%2F35sU%2BLU%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-9">é€‰æ‹©å›¾æ ‡åç‚¹å‡»ç¡®å®šè¿›è¡Œæ–‡æœ¬æ¡†å›¾æ ‡åç§°ã€é¢œè‰²èµ‹å€¼ï¼Œå¹¶æ˜¾ç¤ºé€‰å®šå›¾æ ‡</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efdc0106518d4056935dcf787fe6bc55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5aS06Zeq5Lqu5Lqu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768360687&amp;x-signature=hlcUAjCZ20LXvahEDpVtPKpqhLc%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-10">4. åŠŸèƒ½å®ç°åˆ†æ­¥æ‹†è§£åŠæºä»£ç </h3>
<h4 data-id="heading-11">4.1 ç•Œé¢ç»“æ„è®¾è®¡</h4>
<h5 data-id="heading-12">HTMLæ¨¡æ¿ï¼ˆsystem_function_setting.htmlï¼‰</h5>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- å›¾æ ‡é€‰æ‹©å™¨æ¨¡æ€æ¡† --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"iconSelectorModal"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-selector-modal"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"iconSelectorModal"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-selector-content"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æœç´¢å’Œæ¨¡å¼åˆ‡æ¢å®¹å™¨ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-color-selection"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin-top: 0; display: flex; align-items: flex-start; justify-content: left; gap: 15px; height: 40px; line-height: 40px;"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-selector-header"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin: 0;"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin: 0;"</span>&gt;</span>è¯·é€‰æ‹©å›¾æ ‡<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"display: flex; gap: 5px;"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-secondary"</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ active: iconDisplayMode === 'system' }"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"switchToSystemIcons"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"padding: 10px;"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-icons"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> ç³»ç»Ÿå›¾æ ‡
                <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-secondary"</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ active: iconDisplayMode === 'fontawesome' }"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"switchToFontAwesomeIcons"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin-right: 5px; padding: 10px;"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-font"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> å­—ä½“å›¾æ ‡
                <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-search"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"flex: 1; min-width: 200px; position: relative;"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-search"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: #999;"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"iconSearchTerm"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"æœç´¢å›¾æ ‡..."</span> @<span class="hljs-attr">input</span>=<span class="hljs-string">"filterIcons"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"padding-left: 30px; width: 100%; box-sizing: border-box;"</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- é¢œè‰²é€‰æ‹©åŒºåŸŸ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-color-selection"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin-top: 0.5px; display: flex; align-items: center; justify-content: left; gap: 15px; height: 40px; line-height: 40px;"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-selector-header"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin: 0;"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin: 0;"</span>&gt;</span>è¯·é€‰æ‹©é¢œè‰²<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"color-options"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"display: flex; gap: 5px;"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"color in colorOptions"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"color.value"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"color-option"</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ selected: selectedColor === color.value }"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"{ backgroundColor: color.value === 'white' ? '#fff' : color.value, color: color.value === 'white' ? '#000' : '#fff' }"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"selectedColor = color.value"</span> <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"iconDisplayMode === 'system'"</span>&gt;</span>
                    {{ color.name }}
                <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- å›¾æ ‡ç½‘æ ¼å±•ç¤º --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-grid"</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- Font Awesomeå›¾æ ‡å±•ç¤º --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"iconDisplayMode === 'fontawesome'"</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"icon in filteredIcons"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"icon.class"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-item"</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ selected: selectedIcon === icon.class }"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"selectIcon(icon.class)"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"icon.class"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-preview"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"{ color: selectedColor }"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-name"</span>&gt;</span>{{ icon.name }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- ç³»ç»Ÿç¬¦å·å›¾æ ‡å±•ç¤º --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"icon in filteredIcons"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"icon.key"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-item"</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ selected: selectedIcon === icon.value }"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"selectIcon(icon.value)"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-preview"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"color: black; font-size: 20px;"</span>&gt;</span>{{ icon.value }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-name"</span>&gt;</span>{{ icon.name }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- åº•éƒ¨æ“ä½œæŒ‰é’® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-selector-footer"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-secondary"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"hideIconSelector"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-times"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> å–æ¶ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-primary"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"confirmIconSelection"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"fas fa-check"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> ç¡®å®š<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h5 data-id="heading-13">CSSæ ·å¼ï¼ˆsystem_function_setting.htmlï¼‰</h5>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å›¾æ ‡é€‰æ‹©å™¨æ¨¡æ€æ¡† */</span>
<span class="hljs-selector-class">.icon-selector-modal</span> {
  <span class="hljs-attribute">display</span>: none;
  <span class="hljs-attribute">position</span>: fixed;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>);
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1000</span>;
  <span class="hljs-attribute">overflow</span>: auto;
}

<span class="hljs-comment">/* å›¾æ ‡é€‰æ‹©å™¨å†…å®¹ */</span>
<span class="hljs-selector-class">.icon-selector-content</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fefefe</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">5%</span> auto;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#888</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">80%</span>;
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">800px</span>;
  <span class="hljs-attribute">max-height</span>: <span class="hljs-number">80vh</span>;
  <span class="hljs-attribute">overflow-y</span>: auto;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">5px</span> <span class="hljs-number">15px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.3</span>);
}

<span class="hljs-comment">/* å›¾æ ‡é€‰æ‹©å™¨å¤´éƒ¨ */</span>
<span class="hljs-selector-class">.icon-selector-header</span> {
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">15px</span>;
}

<span class="hljs-selector-class">.icon-selector-header</span> <span class="hljs-selector-tag">h3</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
}

<span class="hljs-comment">/* å›¾æ ‡ç½‘æ ¼ */</span>
<span class="hljs-selector-class">.icon-grid</span> {
  <span class="hljs-attribute">display</span>: grid;
  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(auto-fill, <span class="hljs-built_in">minmax</span>(<span class="hljs-number">80px</span>, <span class="hljs-number">1</span>fr));
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> <span class="hljs-number">0</span>;
  <span class="hljs-attribute">max-height</span>: <span class="hljs-number">400px</span>;
  <span class="hljs-attribute">overflow-y</span>: auto;
}

<span class="hljs-comment">/* å›¾æ ‡é¡¹ */</span>
<span class="hljs-selector-class">.icon-item</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: column;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">justify-content</span>: center;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.2s</span> ease;
}

<span class="hljs-selector-class">.icon-item</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#007bff</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f8f9fa</span>;
}

<span class="hljs-selector-class">.icon-item</span><span class="hljs-selector-class">.selected</span> {
  <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#007bff</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#e3f2fd</span>;
}

<span class="hljs-comment">/* å›¾æ ‡é¢„è§ˆ */</span>
<span class="hljs-selector-class">.icon-preview</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">24px</span>;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">5px</span>;
}

<span class="hljs-comment">/* å›¾æ ‡åç§° */</span>
<span class="hljs-selector-class">.icon-name</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">text-align</span>: center;
  <span class="hljs-attribute">white-space</span>: nowrap;
  <span class="hljs-attribute">overflow</span>: hidden;
  <span class="hljs-attribute">text-overflow</span>: ellipsis;
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>;
}

<span class="hljs-comment">/* å›¾æ ‡é€‰æ‹©å™¨åº•éƒ¨ */</span>
<span class="hljs-selector-class">.icon-selector-footer</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">justify-content</span>: flex-end;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;
}
</code></pre>
<h4 data-id="heading-14">4.2 æ•°æ®æ¨¡å‹è®¾è®¡</h4>
<h5 data-id="heading-15">å›¾æ ‡æ•°æ®å®šä¹‰ï¼ˆicon_selector.jsï¼‰</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Font Awesomeå›¾æ ‡åˆ—è¡¨</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">commonIcons</span> = [
  <span class="hljs-comment">// å¯¼èˆªå›¾æ ‡</span>
  { <span class="hljs-attr">class</span>: <span class="hljs-string">'fas fa-home'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'home'</span> },
  { <span class="hljs-attr">class</span>: <span class="hljs-string">'fas fa-directions'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'directions'</span> },
  { <span class="hljs-attr">class</span>: <span class="hljs-string">'fas fa-map-signs'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'map-signs'</span> },
  { <span class="hljs-attr">class</span>: <span class="hljs-string">'fas fa-compass'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'compass'</span> },
  
  <span class="hljs-comment">// ç”¨æˆ·ç›¸å…³å›¾æ ‡</span>
  { <span class="hljs-attr">class</span>: <span class="hljs-string">'fas fa-user'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'user'</span> },
  { <span class="hljs-attr">class</span>: <span class="hljs-string">'fas fa-users'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'users'</span> },
  { <span class="hljs-attr">class</span>: <span class="hljs-string">'fas fa-user-plus'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'user-plus'</span> },
  { <span class="hljs-attr">class</span>: <span class="hljs-string">'fas fa-user-minus'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'user-minus'</span> },
  
  <span class="hljs-comment">// å·¥å…·å’Œè®¾ç½®å›¾æ ‡</span>
  { <span class="hljs-attr">class</span>: <span class="hljs-string">'fas fa-cog'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'cog'</span> },
  { <span class="hljs-attr">class</span>: <span class="hljs-string">'fas fa-tools'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'tools'</span> },
  { <span class="hljs-attr">class</span>: <span class="hljs-string">'fas fa-wrench'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'wrench'</span> },
  
  <span class="hljs-comment">// æ›´å¤šå›¾æ ‡...</span>
];

<span class="hljs-comment">// ç³»ç»Ÿç¬¦å·å›¾æ ‡æ˜ å°„</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">iconMap</span> = {
  <span class="hljs-string">'home'</span>: <span class="hljs-string">'ğŸ '</span>,
  <span class="hljs-string">'user'</span>: <span class="hljs-string">'ğŸ‘¤'</span>,
  <span class="hljs-string">'users'</span>: <span class="hljs-string">'ğŸ‘¥'</span>,
  <span class="hljs-string">'folder'</span>: <span class="hljs-string">'ğŸ“'</span>,
  <span class="hljs-string">'folder-open'</span>: <span class="hljs-string">'ğŸ“‚'</span>,
  <span class="hljs-string">'file'</span>: <span class="hljs-string">'ğŸ“„'</span>,
  <span class="hljs-string">'search'</span>: <span class="hljs-string">'ğŸ”'</span>,
  <span class="hljs-string">'edit'</span>: <span class="hljs-string">'âœï¸'</span>,
  <span class="hljs-string">'trash-alt'</span>: <span class="hljs-string">'ğŸ—‘ï¸'</span>,
  <span class="hljs-string">'save'</span>: <span class="hljs-string">'ğŸ’¾'</span>,
  <span class="hljs-string">'plus'</span>: <span class="hljs-string">'â•'</span>,
  <span class="hljs-string">'minus'</span>: <span class="hljs-string">'â–'</span>,
  <span class="hljs-string">'times'</span>: <span class="hljs-string">'âŒ'</span>,
  <span class="hljs-string">'check'</span>: <span class="hljs-string">'âœ…'</span>,
  <span class="hljs-comment">// æ›´å¤šå›¾æ ‡æ˜ å°„...</span>
};

<span class="hljs-comment">// é¢œè‰²é€‰é¡¹</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">colorOptions</span> = [
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'é»‘è‰²'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'black'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'ç™½è‰²'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'white'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'è“è‰²'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'blue'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'çº¢è‰²'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'red'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'ç»¿è‰²'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'green'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'ç´«è‰²'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'purple'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'æ©™è‰²'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'orange'</span> }
];
</code></pre>
<h4 data-id="heading-16">4.3 æ ¸å¿ƒåŠŸèƒ½å®ç°</h4>
<h5 data-id="heading-17">Vueç»„ä»¶å®ç°ï¼ˆsystem_function_setting.htmlï¼‰</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å›¾æ ‡é€‰æ‹©å™¨ç›¸å…³å˜é‡</span>
<span class="hljs-keyword">const</span> iconSelectorModal = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);
<span class="hljs-keyword">const</span> iconDisplayMode = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'fontawesome'</span>); <span class="hljs-comment">// 'fontawesome' or 'system'</span>
<span class="hljs-keyword">const</span> iconSearchTerm = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>);
<span class="hljs-keyword">const</span> filteredIcons = <span class="hljs-title function_">ref</span>([]);
<span class="hljs-keyword">const</span> selectedIcon = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>);
<span class="hljs-keyword">const</span> selectedColor = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'black'</span>);

<span class="hljs-comment">// ä»å…¨å±€å¯¹è±¡è·å–å›¾æ ‡æ•°æ®</span>
<span class="hljs-keyword">const</span> commonIcons = <span class="hljs-variable language_">window</span>.<span class="hljs-property">commonIcons</span> || [];
<span class="hljs-keyword">const</span> iconMap = <span class="hljs-variable language_">window</span>.<span class="hljs-property">iconMap</span> || {};
<span class="hljs-keyword">const</span> colorOptions = <span class="hljs-variable language_">window</span>.<span class="hljs-property">colorOptions</span> || [
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'é»‘è‰²'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'black'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'ç™½è‰²'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'white'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'è“è‰²'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'blue'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'çº¢è‰²'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'red'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'ç»¿è‰²'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'green'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'ç´«è‰²'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'purple'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'æ©™è‰²'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'orange'</span> }
];

<span class="hljs-comment">// åˆå§‹åŒ–å›¾æ ‡åˆ—è¡¨</span>
<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  filteredIcons.<span class="hljs-property">value</span> = [...commonIcons];
});

<span class="hljs-comment">// æ˜¾ç¤ºå›¾æ ‡é€‰æ‹©å™¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">showIconSelector</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (iconSelectorModal.<span class="hljs-property">value</span>) {
    iconSelectorModal.<span class="hljs-property">value</span>.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'block'</span>;
    <span class="hljs-comment">// é‡ç½®é€‰æ‹©çŠ¶æ€</span>
    iconDisplayMode.<span class="hljs-property">value</span> = <span class="hljs-string">'fontawesome'</span>;
    iconSearchTerm.<span class="hljs-property">value</span> = <span class="hljs-string">''</span>;
    filteredIcons.<span class="hljs-property">value</span> = [...commonIcons];
    selectedColor.<span class="hljs-property">value</span> = <span class="hljs-string">'black'</span>;
    
    <span class="hljs-comment">// å¦‚æœå·²æœ‰é€‰ä¸­å›¾æ ‡ï¼Œä¿æŒé€‰æ‹©çŠ¶æ€</span>
    <span class="hljs-keyword">if</span> (functionForm.<span class="hljs-property">icon</span>) {
      selectedIcon.<span class="hljs-property">value</span> = functionForm.<span class="hljs-property">icon</span>;
    } <span class="hljs-keyword">else</span> {
      selectedIcon.<span class="hljs-property">value</span> = <span class="hljs-string">''</span>;
    }
  }
};

<span class="hljs-comment">// éšè—å›¾æ ‡é€‰æ‹©å™¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">hideIconSelector</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (iconSelectorModal.<span class="hljs-property">value</span>) {
    iconSelectorModal.<span class="hljs-property">value</span>.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>;
  }
};

<span class="hljs-comment">// åˆ‡æ¢åˆ°ç³»ç»Ÿå›¾æ ‡</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">switchToSystemIcons</span> = (<span class="hljs-params"/>) =&gt; {
  iconDisplayMode.<span class="hljs-property">value</span> = <span class="hljs-string">'system'</span>;
  
  <span class="hljs-comment">// è½¬æ¢ç³»ç»Ÿå›¾æ ‡æ ¼å¼</span>
  <span class="hljs-keyword">const</span> systemIcons = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(iconMap).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> ({
    <span class="hljs-attr">key</span>: key,
    <span class="hljs-attr">value</span>: value,
    <span class="hljs-attr">name</span>: key
  }));
  
  filteredIcons.<span class="hljs-property">value</span> = systemIcons;
  
  <span class="hljs-comment">// æ¸…ç©ºæœç´¢è¯</span>
  iconSearchTerm.<span class="hljs-property">value</span> = <span class="hljs-string">''</span>;
  
  <span class="hljs-comment">// é‡ç½®é€‰æ‹©çŠ¶æ€</span>
  selectedIcon.<span class="hljs-property">value</span> = <span class="hljs-string">''</span>;
};

<span class="hljs-comment">// åˆ‡æ¢åˆ°Font Awesomeå›¾æ ‡</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">switchToFontAwesomeIcons</span> = (<span class="hljs-params"/>) =&gt; {
  iconDisplayMode.<span class="hljs-property">value</span> = <span class="hljs-string">'fontawesome'</span>;
  filteredIcons.<span class="hljs-property">value</span> = [...commonIcons];
  
  <span class="hljs-comment">// æ¸…ç©ºæœç´¢è¯</span>
  iconSearchTerm.<span class="hljs-property">value</span> = <span class="hljs-string">''</span>;
  
  <span class="hljs-comment">// é‡ç½®é€‰æ‹©çŠ¶æ€</span>
  selectedIcon.<span class="hljs-property">value</span> = <span class="hljs-string">''</span>;
};

<span class="hljs-comment">// è¿‡æ»¤å›¾æ ‡</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">filterIcons</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (!iconSearchTerm.<span class="hljs-property">value</span>) {
    <span class="hljs-keyword">if</span> (iconDisplayMode.<span class="hljs-property">value</span> === <span class="hljs-string">'fontawesome'</span>) {
      filteredIcons.<span class="hljs-property">value</span> = [...commonIcons];
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">const</span> systemIcons = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(iconMap).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> ({
        <span class="hljs-attr">key</span>: key,
        <span class="hljs-attr">value</span>: value,
        <span class="hljs-attr">name</span>: key
      }));
      filteredIcons.<span class="hljs-property">value</span> = systemIcons;
    }
    <span class="hljs-keyword">return</span>;
  }
  
  <span class="hljs-keyword">const</span> searchTerm = iconSearchTerm.<span class="hljs-property">value</span>.<span class="hljs-title function_">toLowerCase</span>();
  
  <span class="hljs-keyword">if</span> (iconDisplayMode.<span class="hljs-property">value</span> === <span class="hljs-string">'fontawesome'</span>) {
    filteredIcons.<span class="hljs-property">value</span> = commonIcons.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">icon</span> =&gt;</span>
      icon.<span class="hljs-property">name</span>.<span class="hljs-title function_">toLowerCase</span>().<span class="hljs-title function_">includes</span>(searchTerm)
    );
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">const</span> systemIcons = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(iconMap)
      .<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">[key]</span>) =&gt;</span> key.<span class="hljs-title function_">toLowerCase</span>().<span class="hljs-title function_">includes</span>(searchTerm))
      .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> ({
        <span class="hljs-attr">key</span>: key,
        <span class="hljs-attr">value</span>: value,
        <span class="hljs-attr">name</span>: key
      }));
    filteredIcons.<span class="hljs-property">value</span> = systemIcons;
  }
};

<span class="hljs-comment">// é€‰æ‹©å›¾æ ‡</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">selectIcon</span> = (<span class="hljs-params">iconValue</span>) =&gt; {
  selectedIcon.<span class="hljs-property">value</span> = iconValue;
};

<span class="hljs-comment">// ç¡®è®¤é€‰æ‹©å›¾æ ‡</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">confirmIconSelection</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (selectedIcon.<span class="hljs-property">value</span>) {
    <span class="hljs-comment">// æ ¹æ®å›¾æ ‡ç±»å‹è®¾ç½®å€¼</span>
    <span class="hljs-keyword">if</span> (iconDisplayMode.<span class="hljs-property">value</span> === <span class="hljs-string">'system'</span>) {
      <span class="hljs-comment">// ç³»ç»Ÿå›¾æ ‡å­˜å‚¨æ ¼å¼ï¼š'system:emoji'</span>
      functionForm.<span class="hljs-property">icon</span> = <span class="hljs-string">`system:<span class="hljs-subst">${selectedIcon.value}</span>`</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// Font Awesomeå›¾æ ‡å­˜å‚¨æ ¼å¼ï¼š'class:color'</span>
      functionForm.<span class="hljs-property">icon</span> = <span class="hljs-string">`<span class="hljs-subst">${selectedIcon.value}</span>:<span class="hljs-subst">${selectedColor.value}</span>`</span>;
    }
    
    <span class="hljs-comment">// æ›´æ–°å›¾æ ‡é¢„è§ˆ</span>
    <span class="hljs-title function_">updateIconPreview</span>();
    
    <span class="hljs-comment">// éšè—å›¾æ ‡é€‰æ‹©å™¨</span>
    <span class="hljs-title function_">hideIconSelector</span>();
  }
};

<span class="hljs-comment">// æ›´æ–°å›¾æ ‡é¢„è§ˆ</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">updateIconPreview</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (functionForm.<span class="hljs-property">icon</span>) {
    <span class="hljs-keyword">const</span> iconPreviewElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.icon-preview'</span>);
    <span class="hljs-keyword">if</span> (iconPreviewElement) {
      <span class="hljs-keyword">if</span> (functionForm.<span class="hljs-property">icon</span>.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'system:'</span>)) {
        <span class="hljs-comment">// ç³»ç»Ÿå›¾æ ‡</span>
        <span class="hljs-keyword">const</span> emoji = functionForm.<span class="hljs-property">icon</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">':'</span>)[<span class="hljs-number">1</span>];
        iconPreviewElement.<span class="hljs-property">innerHTML</span> = emoji;
        iconPreviewElement.<span class="hljs-property">className</span> = <span class="hljs-string">'icon-preview'</span>;
        iconPreviewElement.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = <span class="hljs-string">'black'</span>;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// Font Awesomeå›¾æ ‡</span>
        <span class="hljs-keyword">const</span> [iconClass, color] = functionForm.<span class="hljs-property">icon</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">':'</span>);
        iconPreviewElement.<span class="hljs-property">className</span> = <span class="hljs-string">`icon-preview <span class="hljs-subst">${iconClass}</span>`</span>;
        iconPreviewElement.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = color;
        iconPreviewElement.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">''</span>;
      }
    }
  }
};

<span class="hljs-comment">// ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (iconSelectorModal.<span class="hljs-property">value</span> &amp;&amp; 
      event.<span class="hljs-property">target</span> === iconSelectorModal.<span class="hljs-property">value</span>) {
    <span class="hljs-title function_">hideIconSelector</span>();
  }
});
</code></pre>
<h3 data-id="heading-18">5. æ€»ç»“</h3>
<h4 data-id="heading-19">5.1 å®ç°ç‰¹ç‚¹</h4>
<ol>
<li><strong>æ¨¡å—åŒ–è®¾è®¡</strong>ï¼šå°†å›¾æ ‡é€‰æ‹©åŠŸèƒ½å°è£…ä¸ºç‹¬ç«‹ç»„ä»¶ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•</li>
<li><strong>åŒæ¨¡å¼æ”¯æŒ</strong>ï¼šåŒæ—¶æ”¯æŒFont Awesomeå’Œç³»ç»Ÿç¬¦å·å›¾æ ‡ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚</li>
<li><strong>ç”¨æˆ·å‹å¥½ç•Œé¢</strong>ï¼šç›´è§‚çš„ç½‘æ ¼å¸ƒå±€ï¼Œæ¸…æ™°çš„å›¾æ ‡é¢„è§ˆï¼Œä¾¿æ·çš„æœç´¢å’Œè¿‡æ»¤åŠŸèƒ½</li>
<li><strong>çµæ´»çš„é¢œè‰²å®šåˆ¶</strong>ï¼šæ”¯æŒä¸ºFont Awesomeå›¾æ ‡è‡ªå®šä¹‰é¢œè‰²ï¼Œå¢å¼ºè§†è§‰è¡¨ç°åŠ›</li>
<li><strong>å“åº”å¼è®¾è®¡</strong>ï¼šé€‚é…ä¸åŒå±å¹•å°ºå¯¸ï¼Œæä¾›ä¸€è‡´çš„ç”¨æˆ·ä½“éªŒ</li>
<li><strong>æ— ç¼é›†æˆ</strong>ï¼šä¸ç³»ç»ŸåŠŸèƒ½è¡¨å•æ·±åº¦é›†æˆï¼Œæ”¯æŒæ•°æ®åŒå‘ç»‘å®š</li>
</ol>
<h4 data-id="heading-20">5.2 æŠ€æœ¯äº®ç‚¹</h4>
<ol>
<li><strong>åŠ¨æ€å›¾æ ‡ç±»å‹åˆ‡æ¢</strong>ï¼šé€šè¿‡Vueçš„æ¡ä»¶æ¸²æŸ“å®ç°ä¸åŒç±»å‹å›¾æ ‡çš„æ— ç¼åˆ‡æ¢</li>
<li><strong>é«˜æ•ˆçš„å›¾æ ‡è¿‡æ»¤</strong>ï¼šå®æ—¶æœç´¢è¿‡æ»¤åŠŸèƒ½ï¼Œæå‡ç”¨æˆ·é€‰æ‹©æ•ˆç‡</li>
<li><strong>çµæ´»çš„æ•°æ®æ ¼å¼</strong>ï¼šé‡‡ç”¨ç‰¹å®šæ ¼å¼å­˜å‚¨å›¾æ ‡ä¿¡æ¯ï¼Œä¾¿äºè§£æå’Œæ¸²æŸ“</li>
<li><strong>äº‹ä»¶é©±åŠ¨æ¶æ„</strong>ï¼šåŸºäºäº‹ä»¶é©±åŠ¨çš„äº¤äº’è®¾è®¡ï¼Œæé«˜ä»£ç å¯ç»´æŠ¤æ€§</li>
<li><strong>è·¨æµè§ˆå™¨å…¼å®¹æ€§</strong>ï¼šä½¿ç”¨æ ‡å‡†WebæŠ€æœ¯ï¼Œç¡®ä¿åœ¨ä¸»æµæµè§ˆå™¨ä¸­çš„å…¼å®¹æ€§</li>
</ol>
<h4 data-id="heading-21">5.3 åº”ç”¨åœºæ™¯</h4>
<p>å›¾æ ‡é€‰æ‹©å™¨ä¸»è¦åº”ç”¨äºç³»ç»ŸåŠŸèƒ½è®¾ç½®æ¨¡å—ï¼Œå…·ä½“åœºæ™¯åŒ…æ‹¬ï¼š</p>
<ul>
<li>èœå•åŠŸèƒ½å›¾æ ‡é…ç½®</li>
<li>ç³»ç»ŸåŠŸèƒ½å…¥å£å›¾æ ‡é€‰æ‹©</li>
<li>æ§åˆ¶é¢æ¿åŠŸèƒ½å›¾æ ‡è®¾ç½®</li>
<li>æŠ¥è¡¨å’Œæ•°æ®å¯è§†åŒ–å›¾è¡¨å›¾æ ‡é€‰æ‹©</li>
<li>é€šçŸ¥å’Œæé†’å›¾æ ‡é…ç½®</li>
</ul>
<p>é€šè¿‡è¿™ä¸ªå›¾æ ‡é€‰æ‹©å™¨ï¼Œç”¨æˆ·å¯ä»¥æ–¹ä¾¿åœ°ä¸ºç³»ç»Ÿä¸­çš„å„ç§åŠŸèƒ½é€‰æ‹©åˆé€‚çš„å›¾æ ‡ï¼Œæå‡ç³»ç»Ÿçš„å¯è§†åŒ–æ•ˆæœå’Œç”¨æˆ·ä½“éªŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ä¸ªä¸æ‡‚MCPçš„å¼€å‘ä½¿ç”¨vibe codingå¼€å‘ä¸€ä¸ªMCP]]></title>    <link>https://juejin.cn/post/7592040819819200553</link>    <guid>https://juejin.cn/post/7592040819819200553</guid>    <pubDate>2026-01-07T07:13:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592040819819200553" data-draft-id="7592040819818987561" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ä¸ªä¸æ‡‚MCPçš„å¼€å‘ä½¿ç”¨vibe codingå¼€å‘ä¸€ä¸ªMCP"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,VibeCoding"/> <meta itemprop="datePublished" content="2026-01-07T07:13:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Delroy"/> <meta itemprop="url" content="https://juejin.cn/user/184373682644119"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ä¸ªä¸æ‡‚MCPçš„å¼€å‘ä½¿ç”¨vibe codingå¼€å‘ä¸€ä¸ªMCP
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/184373682644119/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Delroy
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T07:13:54.000Z" title="Wed Jan 07 2026 07:13:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è®©ä½ çš„ AI Prompts éšå¤„åŒæ­¥ã€å³åˆ»å¯ç”¨</h2>
<blockquote>
<p>ä¸€ä¸ªå¼€æºçš„ MCP æœåŠ¡å™¨,å½»åº•è§£å†³ AI Prompt ç®¡ç†çš„æ‰€æœ‰ç—›ç‚¹</p>
</blockquote>
<blockquote>
<p><strong>æ”¶è—å®¹æ˜“ä½¿ç”¨éš¾ï¼Ÿæ˜¯æ—¶å€™ç»ˆç»“ä½ çš„ Prompt ç®¡ç†ç„¦è™‘äº†ã€‚</strong></p>
<p>åœ¨æ—¥å¸¸æµè§ˆç½‘é¡µæ—¶ï¼Œæˆ‘ä»¬æ€»èƒ½å¶é‡ä¸€äº›ä»¤äººæƒŠè‰³çš„ Promptã€‚æ¯å½“æ­¤æ—¶ï¼Œæˆ‘ä»¬ä¹ æƒ¯æ€§åœ°éšæ‰‹æ”¶è—ã€ç‚¹èµï¼Œç”šè‡³å­˜å…¥ç¬”è®°ã€‚ç„¶è€Œï¼Œå½“çœŸæ­£éœ€è¦è°ƒç”¨è¿™äº›â€œå®è—â€æ—¶ï¼Œå´å‘ç°å®ƒä»¬æ•£è½åœ¨å„ä¸ªå¹³å°ã€æœ¬åœ°æ–‡ä»¶æˆ– IDE å®šä¹‰ä¸­ï¼Œç¿»æ‰¾ä¹‹è‹¦å¾€å¾€è®©çµæ„Ÿç¬é—´å†·å´ã€‚</p>
<p>ä¸ºäº†ç»ˆç»“è¿™ç§â€œæ”¶è—å³åƒç°â€çš„å›°å±€ï¼Œæˆ‘æ£é¼“å‡ºäº†è¿™æ¬¾ <strong>mcp-dropbox-prompts</strong>ã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªåŒæ­¥å·¥å…·ï¼Œæ›´æ˜¯ä½  AI äº¤äº’æµä¸­çš„â€œçµæ„Ÿä¸­è½¬ç«™â€ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">å†™åœ¨å‰é¢</h3>
<p>åœ¨ä½¿ç”¨ Claudeã€Cursorã€Gemini ç­‰ AI å·¥å…·çš„è¿‡ç¨‹ä¸­,ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™äº›ä»¤äººæŠ“ç‹‚çš„åœºæ™¯:</p>
<ul>
<li>ğŸ’” <strong>è®¾å¤‡å­¤å²›</strong>: ç²¾å¿ƒè°ƒæ•™çš„ Prompt åªå­˜åœ¨ä¸€å°ç”µè„‘ä¸Š,æ¢ä¸ªè®¾å¤‡å°±æ‰¾ä¸åˆ°äº†</li>
<li>ğŸ“‹ <strong>é‡å¤åŠ³åŠ¨</strong>: éœ€è¦åœ¨ä¸åŒ AI å·¥å…·é—´åå¤å¤åˆ¶ç²˜è´´åŒä¸€ä¸ª Prompt</li>
<li>ğŸ˜° <strong>ç‰ˆæœ¬ææƒ§</strong>: ä¿®æ”¹ Prompt åä¸å°å¿ƒè¦†ç›–,æ—§ç‰ˆæœ¬å†ä¹Ÿæ‰¾ä¸å›æ¥</li>
<li>ğŸ” <strong>æ£€ç´¢å›°éš¾</strong>: Prompt åº“è¶Šæ¥è¶Šå¤š,æƒ³æ‰¾æŸä¸ªè§’è‰²å´åƒå¤§æµ·æé’ˆ</li>
<li>ğŸŒ <strong>åŒæ­¥å™©æ¢¦</strong>: å…¬å¸å’Œå®¶é‡Œçš„ Prompt åº“æ€»æ˜¯ä¸ä¸€è‡´,åˆ†ä¸æ¸…è°æ˜¯æœ€æ–°ç‰ˆ</li>
</ul>
<p>å¦‚æœä½ ä¹Ÿæ·±å—å…¶æ‰°,é‚£ä¹ˆè¿™ç¯‡æ–‡ç« ä»‹ç»çš„ <strong>mcp-dropbox-prompts</strong> å°±æ˜¯ä¸ºä½ å‡†å¤‡çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<hr/>
<hr/>
<h3 data-id="heading-2">ä¸€ã€é¡¹ç›®ç®€ä»‹</h3>
<p><strong>mcp-dropbox-prompts</strong> æ˜¯ä¸€ä¸ªåŸºäº Model Context Protocol (MCP) çš„ä¸“ä¸šçº§ Prompt ç®¡ç†æœåŠ¡å™¨,è®©ä½ çš„ AI è§’è‰²åº“å®ç°:</p>





























<table><thead><tr><th>æ ¸å¿ƒèƒ½åŠ›</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ğŸŒ <strong>è·¨è®¾å¤‡äº‘åŒæ­¥</strong></td><td>ä½¿ç”¨ Dropbox æˆ–åšæœäº‘,åŠå…¬å®¤å­˜ã€å®¶é‡Œç”¨</td></tr><tr><td>ğŸ’¬ <strong>å¯¹è¯å³ä¿å­˜</strong></td><td>åœ¨èŠå¤©ä¸­ç›´æ¥è®© AI ä¿å­˜ Prompt,æ— éœ€å¤åˆ¶ç²˜è´´</td></tr><tr><td>ğŸ›¡ï¸ <strong>è‡ªåŠ¨ç‰ˆæœ¬å¤‡ä»½</strong></td><td>æ¯æ¬¡ä¿®æ”¹è‡ªåŠ¨ä¿å­˜å†å²ç‰ˆæœ¬,å®‰å…¨æ— å¿§</td></tr><tr><td>ğŸ” <strong>æ™ºèƒ½æœç´¢</strong></td><td>æ”¯æŒæŒ‰åç§°å’Œå…¨æ–‡å†…å®¹æœç´¢,å¿«é€Ÿå®šä½</td></tr><tr><td>ğŸ“¦ <strong>ä¸€é”®å¯¼å‡º</strong></td><td>å®Œæ•´å¤‡ä»½æˆ–åˆ†äº«ç»™å›¢é˜Ÿæˆå‘˜</td></tr></tbody></table>
<blockquote>
<p><strong>é¡¹ç›®ä¿¡æ¯</strong><br/>
ğŸ“¦ npm åŒ…: <code>mcp-dropbox-prompts</code><br/>
ğŸ”– å½“å‰ç‰ˆæœ¬: v2.0.4<br/>
ğŸ“„ å¼€æºåè®®: MIT<br/>
â­ GitHub: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyuanyang749%2Fmcp-dropbox-prompts" target="_blank" title="https://github.com/yuanyang749/mcp-dropbox-prompts" ref="nofollow noopener noreferrer">github.com/yuanyang749â€¦</a></p>
</blockquote>
<hr/>
<h3 data-id="heading-3">äºŒã€ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªå·¥å…·?æ·±åº¦å‰–æå››å¤§ç—›ç‚¹</h3>
<p>éšç€ AI å·¥å…·åœ¨å·¥ä½œæµä¸­çš„æ·±åº¦åº”ç”¨,<strong>Prompt å·²ç»æˆä¸ºæˆ‘ä»¬çš„æ•°å­—èµ„äº§</strong>ã€‚ä¸€ä¸ªå¥½çš„ Prompt å¯èƒ½æ˜¯ç»è¿‡æ•°åæ¬¡è¿­ä»£æ‰“ç£¨å‡ºæ¥çš„,å®ƒè•´å«ç€æˆ‘ä»¬å¯¹ç‰¹å®šä»»åŠ¡çš„ç†è§£å’Œæœ€ä½³å®è·µã€‚</p>
<p>ç„¶è€Œ,ç›®å‰ä¸»æµ AI å·¥å…·å¯¹ Prompt çš„ç®¡ç†æ™®éå­˜åœ¨ä»¥ä¸‹é—®é¢˜:</p>
<h4 data-id="heading-4">ğŸ˜­ ç—›ç‚¹ 1: è®¾å¤‡å­¤å²›</h4>
<p><strong>ç°çŠ¶</strong>: Prompt é€šå¸¸å­˜å‚¨åœ¨æœ¬åœ°é…ç½®æ–‡ä»¶æˆ– IDE è®¾ç½®ä¸­,æ— æ³•è·¨è®¾å¤‡åŒæ­¥ã€‚</p>
<p><strong>åæœ</strong>: ä½ åœ¨åŠå…¬å®¤ç²¾å¿ƒè°ƒæ•™çš„"Python ä¸“å®¶"è§’è‰²,å›åˆ°å®¶é‡Œå°±ç”¨ä¸äº†äº†ã€‚å‘¨æœ«æƒ³ç”¨å…¬å¸çš„ Prompt åšä¸ªäººé¡¹ç›®?å¯¹ä¸èµ·,åªèƒ½å‡­è®°å¿†é‡æ–°å†™ä¸€éã€‚</p>
<hr/>
<h4 data-id="heading-5">âš ï¸ ç—›ç‚¹ 2: ç‰ˆæœ¬ææƒ§</h4>
<p><strong>ç°çŠ¶</strong>: ä¿®æ”¹ Prompt æ—¶æ²¡æœ‰ç‰ˆæœ¬æ§åˆ¶,ä¸€æ—¦è¦†ç›–å°±å†ä¹Ÿå›ä¸å»äº†ã€‚</p>
<p><strong>åæœ</strong>: ä½ å¯èƒ½å› ä¸ºä¸€æ¬¡"ä¼˜åŒ–",åè€ŒæŸå¤±äº†ä¹‹å‰è¡¨ç°æ›´å¥½çš„ç‰ˆæœ¬ã€‚æ›´ç³Ÿçš„æ˜¯,ä½ ç”šè‡³ä¸è®°å¾—ä¹‹å‰çš„ç‰ˆæœ¬æ˜¯æ€ä¹ˆå†™çš„,åªèƒ½å‡­æ„Ÿè§‰é‡æ–°è°ƒæ•´ã€‚</p>
<hr/>
<h4 data-id="heading-6">ğŸ” ç—›ç‚¹ 3: æ£€ç´¢å›°éš¾</h4>
<p><strong>ç°çŠ¶</strong>: å½“ä½ çš„ Prompt åº“è¾¾åˆ°å‡ åä¸ªæ—¶,æƒ³æ‰¾åˆ°"é‚£ä¸ªå…³äºè¥é”€çš„è§’è‰²"å˜æˆäº†å™©æ¢¦ã€‚</p>
<p><strong>åæœ</strong>: ä½ åªèƒ½ä¸€ä¸ªä¸ªç‚¹å¼€æŸ¥çœ‹,æˆ–è€…ä¾èµ–æ¨¡ç³Šçš„æ–‡ä»¶åçŒœæµ‹ã€‚æœ‰æ—¶å€™æ˜æ˜è®°å¾—å†™è¿‡æŸä¸ª Prompt,å´æ€ä¹ˆä¹Ÿæ‰¾ä¸åˆ°,æœ€ååªèƒ½é‡æ–°åˆ›å»ºä¸€ä¸ªç±»ä¼¼çš„ã€‚</p>
<hr/>
<h4 data-id="heading-7">ğŸ”„ ç—›ç‚¹ 4: åŒå‘å­¤ç«‹</h4>
<p><strong>ç°çŠ¶</strong>: æˆ‘ä»¬ä¸ AI å¯¹è¯æ—¶å¯èƒ½äº§ç”Ÿå¾ˆå¥½çš„ Prompt æ¨¡æ¿,ä½†æƒ³æŠŠå®ƒä¿å­˜åˆ°åº“ä¸­å´å¾ˆéº»çƒ¦ã€‚</p>
<p><strong>åæœ</strong>: éœ€è¦æ‰‹åŠ¨å¤åˆ¶ã€åˆ›å»ºæ–‡ä»¶ã€æ‰¾å¯¹ä½ç½®...è¿™ä¸ªè¿‡ç¨‹æ‰“æ–­äº†æ€ç»´æµ,å¾ˆå¤šçµæ„Ÿå°±è¿™æ ·æµå¤±äº†ã€‚åè¿‡æ¥,æƒ³æŠŠåº“é‡Œçš„ Prompt ç”¨åˆ°æ–°å¯¹è¯ä¸­,ä¹Ÿéœ€è¦æ‰‹åŠ¨å¤åˆ¶ç²˜è´´ã€‚</p>
<hr/>
<h3 data-id="heading-8">ä¸‰ã€æ ¸å¿ƒåŠŸèƒ½è¯¦è§£</h3>
<h4 data-id="heading-9">ğŸŒ åŠŸèƒ½ 1: å¤šè®¾å¤‡äº‘åŒæ­¥</h4>
<p>ä¸å†æ‹…å¿ƒ Prompt åªå­˜åœ¨ä¸€å°ç”µè„‘ä¸Š!</p>
<p><strong>æ”¯æŒåŒå­˜å‚¨åç«¯</strong>:</p>
<ul>
<li><strong>Dropbox</strong>: å›½é™…åŒ–æ–¹æ¡ˆ,é€šè¿‡ Refresh Token å®ç°æ°¸ä¹…æˆæƒ</li>
<li><strong>åšæœäº‘ (WebDAV)</strong>: å›½å†…æ–¹æ¡ˆ,æ— éœ€ä»£ç†,è®¿é—®é€Ÿåº¦å¿«,æ¨èå›½å†…ç”¨æˆ·ä½¿ç”¨</li>
</ul>
<p><strong>å·¥ä½œåŸç†</strong>:
æ‰€æœ‰ Prompt ä»¥ <code>.md</code> æ–‡ä»¶å½¢å¼å­˜å‚¨åœ¨äº‘ç«¯,ä»»ä½•é…ç½®äº†ç›¸åŒå‡­æ®çš„è®¾å¤‡éƒ½èƒ½å®æ—¶è®¿é—®ã€‚åŠå…¬å®¤ã€å®¶é‡Œã€å’–å•¡å…...éšå¤„å¯ç”¨,çœŸæ­£çš„"Write Once, Use Everywhere"ã€‚</p>
<hr/>
<h4 data-id="heading-10">ğŸ’¬ åŠŸèƒ½ 2: Chat-to-Save (å¯¹è¯å³ä¿å­˜)</h4>
<p>è¿™æ˜¯æœ€ä»¤äººå…´å¥‹çš„åŠŸèƒ½!ä¼ ç»Ÿæ–¹å¼éœ€è¦ä½ æ‰‹åŠ¨å¤åˆ¶ã€åˆ›å»ºæ–‡ä»¶ã€ä¸Šä¼ ...ç°åœ¨,åªéœ€è¦åœ¨å¯¹è¯ä¸­å‘Šè¯‰ AI:</p>
<pre><code class="hljs language-plain" lang="plain">ä½ : "å¸®æˆ‘èµ·è‰ä¸€ä¸ªæŠ–éŸ³çŸ­è§†é¢‘è¥é”€ä¸“å®¶çš„ Prompt"

AI: å¥½çš„,æˆ‘ä¸ºä½ åˆ›å»ºä¸€ä¸ªæŠ–éŸ³è¥é”€ä¸“å®¶è§’è‰²:
    [ç”Ÿæˆä¸€ä¸ªè¯¦ç»†çš„ Prompt ...]

ä½ : "å¾ˆå¥½,æŠŠè¿™ä¸ªä¿å­˜ä¸º douyin_marketing_expert"

AI: âœ… å·²å°† Prompt ä¿å­˜åˆ°äº‘ç«¯!
</code></pre>
<p><strong>ä¸éœ€è¦ç¦»å¼€å¯¹è¯ç•Œé¢</strong>,ä¸éœ€è¦æ‰‹åŠ¨å¤åˆ¶ç²˜è´´,AI ç›´æ¥å¸®ä½ æŠŠå½“å‰å¯¹è¯ä¸­çš„ Prompt ä¿å­˜åˆ°äº‘ç«¯åº“ã€‚çµæ„Ÿäº§ç”Ÿçš„é‚£ä¸€åˆ»,å°±èƒ½æ°¸ä¹…ä¿å­˜ã€‚</p>
<hr/>
<h4 data-id="heading-11">ğŸ›¡ï¸ åŠŸèƒ½ 3: è‡ªåŠ¨ç‰ˆæœ¬å¤‡ä»½</h4>
<p>ä¿®æ”¹ Prompt æ—¶æœ€æ€•çš„å°±æ˜¯"æ”¹åäº†",æœ‰äº†è‡ªåŠ¨å¤‡ä»½,ä½ å¯ä»¥æ”¾å¿ƒå¤§èƒ†åœ°è¿­ä»£ä¼˜åŒ–:</p>
<p><strong>å¤‡ä»½æœºåˆ¶</strong>:</p>
<ul>
<li>æ¯æ¬¡ä¿å­˜åŒå Prompt æ—¶,æ—§ç‰ˆæœ¬ä¼šè‡ªåŠ¨å¤‡ä»½åˆ° <code>_archive</code> æ–‡ä»¶å¤¹</li>
<li>å¤‡ä»½æ–‡ä»¶åæ ¼å¼: <code>prompt_name_20241224_143022.md</code> (åŒ…å«æ—¶é—´æˆ³)</li>
<li>æ‰€æœ‰å†å²ç‰ˆæœ¬éƒ½åœ¨,éšæ—¶å¯ä»¥å›æº¯</li>
</ul>
<p><strong>å®é™…æ•ˆæœ</strong>:</p>
<pre><code class="hljs language-bash" lang="bash">/mcp-prompts/
  â”œâ”€â”€ python_expert.md          <span class="hljs-comment"># å½“å‰ç‰ˆæœ¬</span>
  â”œâ”€â”€ marketing_guru.md
  â””â”€â”€ _archive/
      â”œâ”€â”€ python_expert_20241220_100530.md  <span class="hljs-comment"># å†å²ç‰ˆæœ¬ 1</span>
      â”œâ”€â”€ python_expert_20241222_153045.md  <span class="hljs-comment"># å†å²ç‰ˆæœ¬ 2</span>
      â””â”€â”€ marketing_guru_20241215_093022.md
</code></pre>
<p>å†ä¹Ÿä¸æ€•æ”¹åäº†,æ¯æ¬¡è¿­ä»£éƒ½æœ‰æ®å¯æŸ¥!</p>
<hr/>
<h4 data-id="heading-12">ğŸ” åŠŸèƒ½ 4: æ™ºèƒ½åŒæ¨¡æœç´¢</h4>
<p>å½“ä½ çš„ Prompt åº“è¾¾åˆ°å‡ åä¸ªæ—¶,æœç´¢åŠŸèƒ½å°±å˜å¾—è‡³å…³é‡è¦ã€‚æˆ‘ä»¬æä¾›ä¸¤ç§æœç´¢æ–¹å¼:</p>
<h5 data-id="heading-13">æ–¹å¼ä¸€: æŒ‰åç§°æœç´¢ (<code>search_prompts</code>)</h5>
<p>é€šè¿‡æ–‡ä»¶åæ¨¡ç³ŠåŒ¹é…,å¿«é€Ÿå®šä½:</p>
<pre><code class="hljs language-plain" lang="plain">ä½ : "æ‰¾ä¸€ä¸ªæŠ–éŸ³ç›¸å…³çš„ Prompt"

AI: æ‰¾åˆ° 3 ä¸ªåŒ¹é…é¡¹:
    ğŸ“„ douyin_marketing_expert
    ğŸ“„ douyin_script_writer
    ğŸ“„ douyin_copywriter
</code></pre>
<h5 data-id="heading-14">æ–¹å¼äºŒ: å…¨æ–‡å†…å®¹æœç´¢ (<code>search_content</code>)</h5>
<p>æ·±å…¥æ¯ä¸ª Prompt çš„å†…å®¹è¿›è¡Œæ£€ç´¢,å³ä½¿ä½ ä¸è®°å¾—æ–‡ä»¶åä¹Ÿèƒ½æ‰¾åˆ°:</p>
<pre><code class="hljs language-plain" lang="plain">ä½ : "å“ªäº› Prompt é‡Œæåˆ°äº†è®¤çŸ¥åè§?"

AI: åœ¨ä»¥ä¸‹ Prompt ä¸­æ‰¾åˆ°åŒ¹é…:
    ğŸ“„ psychology_expert
       "...åˆ©ç”¨è®¤çŸ¥åè§è¿›è¡Œè¯´æœ..."

    ğŸ“„ marketing_strategist
       "...è¯†åˆ«ç”¨æˆ·çš„è®¤çŸ¥åè§,åˆ¶å®šé’ˆå¯¹æ€§ç­–ç•¥..."
</code></pre>
<p>ä¸è®°å¾—å«ä»€ä¹ˆåå­—?æ²¡å…³ç³»,æœå†…å®¹ä¸€æ ·èƒ½æ‰¾åˆ°!</p>
<hr/>
<h4 data-id="heading-15">ğŸ“‹ åŠŸèƒ½ 5: æ™ºèƒ½åˆ—è¡¨ä¸æ‘˜è¦</h4>
<p>åˆ—å‡º Prompt æ—¶,ä¸å†æ˜¯å†·å†°å†°çš„æ–‡ä»¶ååˆ—è¡¨,è€Œæ˜¯åŒ…å«å†…å®¹æ‘˜è¦çš„æ™ºèƒ½é¢„è§ˆ:</p>
<pre><code class="hljs language-plain" lang="plain">ä½ : "åˆ—å‡ºæˆ‘çš„æ‰€æœ‰æç¤ºè¯"

AI: ğŸ“‹ æ‚¨çš„ Prompt åº“ (å…± 12 ä¸ª):

    1. ğŸ“„ python_expert
       æ‘˜è¦: You are a senior Python developer with expertise in...

    2. ğŸ“„ marketing_strategist
       æ‘˜è¦: ä½ æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„è¥é”€ç­–ç•¥ä¸“å®¶,æ“…é•¿...

    3. ğŸ“„ content_writer
       æ‘˜è¦: ä¸“ä¸šçš„å†…å®¹åˆ›ä½œè€…,ç²¾é€šå„ç±»æ–‡ä½“...
</code></pre>
<p>ä¸€ç›®äº†ç„¶,å¿«é€Ÿå®šä½éœ€è¦çš„è§’è‰²,ä¸ç”¨ä¸€ä¸ªä¸ªç‚¹å¼€æŸ¥çœ‹!</p>
<hr/>
<h4 data-id="heading-16">ğŸ“¦ åŠŸèƒ½ 6: ä¸€é”®å¯¼å‡ºå¤‡ä»½</h4>
<pre><code class="hljs language-plain" lang="plain">ä½ : "å¯¼å‡ºæˆ‘çš„æ‰€æœ‰ Prompt"

AI: âœ… [ç”Ÿæˆä¸€ä¸ªåŒ…å«æ‰€æœ‰ Prompt çš„ Markdown æ–‡æ¡£]
</code></pre>
<p><strong>å¯ä»¥ç”¨äº</strong>:</p>
<ul>
<li>ğŸ“‚ æ•´ä½“å¤‡ä»½,é˜²æ­¢äº‘ç«¯æ•°æ®ä¸¢å¤±</li>
<li>ğŸ‘¥ åˆ†äº«ç»™å›¢é˜Ÿæˆå‘˜</li>
<li>ğŸ”„ è¿ç§»åˆ°å…¶ä»–å¹³å°æˆ–å·¥å…·</li>
</ul>
<p>æ‰€æœ‰ Prompt æ‰“åŒ…æˆä¸€ä¸ªæ–‡æ¡£,æ–¹ä¾¿ä¿å­˜æˆ–åˆ†äº«ã€‚</p>
<hr/>
<h3 data-id="heading-17">å››ã€ä½¿ç”¨ä½“éªŒ:ç®€å•åˆ°æè‡´</h3>
<h4 data-id="heading-18">åœ¨ Cursor / Claude Desktop ç­‰ MCP å…¼å®¹å·¥å…·ä¸­</h4>
<h5 data-id="heading-19">æ–¹å¼ä¸€: å¿«æ·æŒ‡ä»¤ (æ¨è)</h5>
<p>åœ¨æ”¯æŒ MCP Prompts æ ‡å‡†çš„ç¼–è¾‘å™¨ä¸­,ä½“éªŒ"ä¸€é”®å‘¼å«":</p>
<ol>
<li>åœ¨å¯¹è¯æ¡†è¾“å…¥ <strong><code>/</code></strong></li>
<li>çœ‹åˆ°æ‰€æœ‰äº‘ç«¯ Prompt åˆ—è¡¨</li>
<li>é€‰æ‹©åå†…å®¹è‡ªåŠ¨æ³¨å…¥</li>
</ol>
<blockquote>
<p>âš ï¸ æ³¨æ„: å¹¶éæ‰€æœ‰å®¢æˆ·ç«¯éƒ½æ”¯æŒ <code>/</code> å‘¼å«æ–¹å¼,å¦‚æœä¸å¯ç”¨,è¯·ä½¿ç”¨ä¸‹æ–¹çš„"è‡ªç„¶è¯­è¨€è°ƒç”¨"æ–¹å¼ã€‚</p>
</blockquote>
<h5 data-id="heading-20">æ–¹å¼äºŒ: è‡ªç„¶è¯­è¨€è°ƒç”¨ (é€šç”¨)</h5>
<p>é€šè¿‡å£è¯­åŒ–æŒ‡ä»¤è®© AI æ‰§è¡Œæ“ä½œ,æ— éœ€è®°å¿†å‘½ä»¤:</p>













































<table><thead><tr><th>ä½ çš„æŒ‡ä»¤</th><th>AI çš„æ“ä½œ</th><th>å·¥å…·</th></tr></thead><tbody><tr><td>"åˆ—å‡ºæˆ‘çš„æ‰€æœ‰æç¤ºè¯"</td><td>å±•ç¤ºæ‰€æœ‰ Prompt åŠæ‘˜è¦</td><td><code>list_prompts</code></td></tr><tr><td>"è¯»å– python_expert çš„å†…å®¹"</td><td>æ˜¾ç¤ºæŒ‡å®š Prompt çš„å®Œæ•´å†…å®¹</td><td><code>get_prompt</code></td></tr><tr><td>"æŠŠåˆšæ‰çš„å¯¹è¯ä¿å­˜ä¸º tech_lead"</td><td>ä¿å­˜æ–° Prompt åˆ°äº‘ç«¯</td><td><code>save_prompt</code></td></tr><tr><td>"åˆ é™¤ old_prompt"</td><td>ä»äº‘ç«¯åˆ é™¤æŒ‡å®š Prompt</td><td><code>delete_prompt</code></td></tr><tr><td>"æ‰¾ä¸€ä¸ªæŠ–éŸ³ç›¸å…³çš„æç¤ºè¯"</td><td>æ¨¡ç³Šæœç´¢åŒ¹é…çš„ Prompt</td><td><code>search_prompts</code></td></tr><tr><td>"å“ªäº›æç¤ºè¯æåˆ°äº†è®¤çŸ¥åè§"</td><td>å…¨æ–‡æœç´¢å†…å®¹</td><td><code>search_content</code></td></tr><tr><td>"å¯¼å‡ºæˆ‘çš„å…¨éƒ¨æç¤ºè¯ç”¨äºå¤‡ä»½"</td><td>ç”Ÿæˆå¯¼å‡ºæ–‡æ¡£</td><td><code>export_prompts</code></td></tr></tbody></table>
<p>æ— éœ€å­¦ä¹ å¤æ‚å‘½ä»¤,<strong>åƒè·Ÿæœ‹å‹èŠå¤©ä¸€æ ·è‡ªç„¶</strong>!</p>
<hr/>
<h3 data-id="heading-21">äº”ã€æŠ€æœ¯äº®ç‚¹</h3>
<h4 data-id="heading-22">ğŸ’ äº®ç‚¹ 1: åŒå­˜å‚¨åç«¯æ¶æ„</h4>
<p>æ ¹æ®ç”¨æˆ·æ‰€åœ¨åœ°åŒºå’Œç½‘ç»œç¯å¢ƒçµæ´»é€‰æ‹©:</p>
<ul>
<li><strong>Dropbox</strong>:
<ul>
<li>é€‚åˆå›½é™…ç”¨æˆ·</li>
<li>é€šè¿‡ Refresh Token å®ç°æ°¸ä¹…æˆæƒ,æ— éœ€é¢‘ç¹ç™»å½•</li>
<li>æˆç†Ÿçš„ API,ç¨³å®šå¯é </li>
</ul>
</li>
<li><strong>åšæœäº‘ WebDAV</strong>:
<ul>
<li>ä¸“ä¸ºå›½å†…ç”¨æˆ·ä¼˜åŒ–</li>
<li>æ— éœ€ä»£ç†,è®¿é—®é€Ÿåº¦å¿«</li>
<li>Token æ°¸ä¹…æœ‰æ•ˆ,é…ç½®ä¸€æ¬¡é•¿æœŸä½¿ç”¨</li>
</ul>
</li>
</ul>
<h4 data-id="heading-23">ğŸ’ äº®ç‚¹ 2: ç”Ÿäº§çº§å·¥ç¨‹è®¾è®¡</h4>
<p>ä¸æ˜¯ç©å…·é¡¹ç›®,æ˜¯å¯ä»¥æ”¾å¿ƒåœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨çš„ä¸“ä¸šå·¥å…·:</p>
<p>âœ… <strong>ä»£ç†é€‚é…</strong>: æ”¯æŒ <code>HTTPS_PROXY</code> é…ç½®,è§£å†³å›½å†…è®¿é—® Dropbox çš„ç½‘ç»œé—®é¢˜<br/>
âœ… <strong>è·¯å¾„å®‰å…¨ç®¡ç†</strong>: ä¸¥æ ¼çš„è·¯å¾„éªŒè¯,é˜²æ­¢è¶Šæƒè®¿é—®<br/>
âœ… <strong>å‹å¥½çš„ä¸­æ–‡é”™è¯¯æç¤º</strong>: å‡ºé”™æ—¶ç›´æ¥å‘Šè¯‰ä½ æ€ä¹ˆè§£å†³,ä¸æ˜¯å†·å†°å†°çš„è‹±æ–‡æŠ¥é”™<br/>
âœ… <strong>é€’å½’ç›®å½•æ‰«æ</strong>: <code>WEBDAV_RECURSIVE</code> é…ç½®é¡¹,æ”¯æŒå­æ–‡ä»¶å¤¹ç»„ç»‡<br/>
âœ… <strong>è‡ªåŠ¨é‡è¿æœºåˆ¶</strong>: ç½‘ç»œæŠ–åŠ¨æ—¶è‡ªåŠ¨é‡è¯•,æé«˜ç¨³å®šæ€§</p>
<h4 data-id="heading-24">ğŸ’ äº®ç‚¹ 3: åŸºäº MCP æ ‡å‡†åè®®</h4>
<p><strong>Model Context Protocol (MCP)</strong> æ˜¯ Anthropic ä¸»å¯¼çš„å¼€æ”¾æ ‡å‡†:</p>
<ul>
<li>ğŸ”Œ <strong>æ ‡å‡†åŒ–æ¥å£</strong>: ä¸å„ç±» AI å·¥å…·æ— ç¼é›†æˆ</li>
<li>ğŸ¤– <strong>è‡ªç„¶è¯­è¨€äº¤äº’</strong>: é™ä½å­¦ä¹ æˆæœ¬,ä¸Šæ‰‹å³ç”¨</li>
<li>ğŸ”® <strong>é¢å‘æœªæ¥</strong>: éšç€ MCP ç”Ÿæ€å‘å±•,è‡ªåŠ¨è·å¾—æ›´å¤šèƒ½åŠ›</li>
</ul>
<hr/>
<h3 data-id="heading-25">å…­ã€é€‚ç”¨åœºæ™¯:è°éœ€è¦è¿™ä¸ªå·¥å…·?</h3>
<h4 data-id="heading-26">ğŸ“ åœºæ™¯ 1: ä¸ªäººçŸ¥è¯†ç®¡ç†è€…</h4>
<p>ä½ ç²¾å¿ƒæ‰“ç£¨äº†åå‡ ä¸ª AI è§’è‰²,æ¶µç›–ç¼–ç¨‹ã€å†™ä½œã€åˆ†æç­‰å„ä¸ªé¢†åŸŸã€‚é€šè¿‡ mcp-dropbox-prompts,ä½ å¯ä»¥:</p>
<ul>
<li>âœ… åœ¨å®¶é‡Œçš„ Mac å’Œå…¬å¸çš„ Windows ä¸Šä½¿ç”¨åŒä¸€å¥— Prompt åº“</li>
<li>âœ… å®‰å…¨åœ°è¿­ä»£ä¼˜åŒ–æ¯ä¸ªè§’è‰²,ä¸æ€•æ”¹å</li>
<li>âœ… éšæ—¶é€šè¿‡å…³é”®è¯å¿«é€Ÿæ‰¾åˆ°éœ€è¦çš„è§’è‰²</li>
</ul>
<h4 data-id="heading-27">ğŸ‘¥ åœºæ™¯ 2: å›¢é˜Ÿåä½œ</h4>
<p>å›¢é˜Ÿæˆå‘˜ä½¿ç”¨ç›¸åŒçš„å‡­æ®é…ç½®,ç¡®ä¿:</p>
<ul>
<li>âœ… æ‰€æœ‰äººä½¿ç”¨ç»Ÿä¸€è§„èŒƒçš„ Prompt,è¾“å‡ºè´¨é‡ä¸€è‡´</li>
<li>âœ… æ–°äººåŠ å…¥æ—¶è‡ªåŠ¨è·å¾—å®Œæ•´çš„è§’è‰²åº“</li>
<li>âœ… çŸ¥è¯†ä¸éšå‘˜å·¥ç¦»èŒè€Œæµå¤±</li>
</ul>
<h4 data-id="heading-28">ğŸ’¼ åœºæ™¯ 3: å¤šè®¾å¤‡å·¥ä½œè€…</h4>
<p>ä½ ç»å¸¸åœ¨å…¬å¸ã€å®¶é‡Œã€å’–å•¡å…ç­‰ä¸åŒåœ°ç‚¹å·¥ä½œ,éœ€è¦:</p>
<ul>
<li>âœ… æ— ç¼åˆ‡æ¢è®¾å¤‡,ä¸ç”¨æ‹…å¿ƒ Prompt ä¸åŒæ­¥</li>
<li>âœ… æ–°è´­ç½®è®¾å¤‡æ—¶å¿«é€Ÿå®Œæˆé…ç½®,ç«‹å³å¯ç”¨</li>
<li>âœ… å‡ºå·®æ—¶ä¹Ÿèƒ½ç”¨å®Œæ•´çš„å·¥å…·é“¾å·¥ä½œ</li>
</ul>
<h4 data-id="heading-29">ğŸš€ åœºæ™¯ 4: Prompt å·¥ç¨‹å¸ˆ</h4>
<p>ä½ ä¸“æ³¨äº Prompt çš„è®¾è®¡å’Œä¼˜åŒ–,éœ€è¦:</p>
<ul>
<li>âœ… ç‰ˆæœ¬æ§åˆ¶åŠŸèƒ½,è¿½è¸ªæ¯æ¬¡ä¼˜åŒ–çš„æ•ˆæœ</li>
<li>âœ… å¿«é€Ÿæµ‹è¯•å’Œè¿­ä»£,Chat-to-Save å¤§å¹…æå‡æ•ˆç‡</li>
<li>âœ… å¯¼å‡ºåŠŸèƒ½,æ–¹ä¾¿æ’°å†™æ•™ç¨‹æˆ–åˆ†äº«ç»éªŒ</li>
</ul>
<h4 data-id="heading-30">âœï¸ åœºæ™¯ 5: å†…å®¹åˆ›ä½œè€…</h4>
<p>ä½ ä¸ºä¸åŒå¹³å°ç»´æŠ¤ä¸“é—¨çš„å†™ä½œåŠ©æ‰‹(å°çº¢ä¹¦ã€çŸ¥ä¹ã€å…¬ä¼—å·...),éœ€è¦:</p>
<ul>
<li>âœ… æŒ‰å¹³å°ç»„ç»‡ä¸åŒé£æ ¼çš„ AI è§’è‰²</li>
<li>âœ… éšæ—¶æœç´¢"é‚£ä¸ªé€‚åˆå°çº¢ä¹¦çš„è¥é”€è§’è‰²"</li>
<li>âœ… åœ¨ä¸åŒè®¾å¤‡ä¸Šéƒ½èƒ½å¿«é€Ÿå¼€å§‹åˆ›ä½œ</li>
</ul>
<h4 data-id="heading-31">ğŸ¨ åœºæ™¯ 6: Prompt ç»„åˆåˆ›ä½œ (é‡è¦!)</h4>
<p><strong>è¿™æ˜¯æœ€å¼ºå¤§çš„ä½¿ç”¨æ–¹å¼!</strong> åœ¨ä¸€æ¬¡å¯¹è¯ä¸­,ä½ å¯ä»¥<strong>è‡ªç”±ç»„åˆ</strong>å¤šä¸ªä¸åŒé¢†åŸŸçš„ Prompt,è®©å®ƒä»¬ååŒå·¥ä½œå®Œæˆå¤æ‚ä»»åŠ¡ã€‚</p>
<h5 data-id="heading-32">å®æˆ˜æ¡ˆä¾‹:åˆ›å»ºæœ‰è¶£çš„ç®—å‘½å·¥å…·ç½‘ç«™</h5>
<p>å‡è®¾ä½ æƒ³åšä¸€ä¸ªæ—¢æœ‰ä¸“ä¸šè®¾è®¡åˆæœ‰ä¸“ä¸šå†…å®¹çš„ç½‘ç«™,å¯ä»¥è¿™æ ·æ“ä½œ:</p>
<pre><code class="hljs language-plain" lang="plain">ä½ : "è¯»å– ç²¾ç¾ç½‘é¡µè®¾è®¡å¸ˆ å’Œ å‘½ç†å¤§å¸ˆ ä¸¤ä¸ªæç¤ºè¯"

AI: âœ… å·²åŠ è½½ä¸¤ä¸ªè§’è‰²:
    - ç²¾ç¾ç½‘é¡µè®¾è®¡å¸ˆ: è´Ÿè´£ UI/UX è®¾è®¡å’Œå‰ç«¯ä»£ç 
    - å‘½ç†å¤§å¸ˆ: è´Ÿè´£ç®—å‘½é€»è¾‘å’Œæ–‡æ¡ˆå†…å®¹

ä½ : "å¸®æˆ‘åˆ›å»ºä¸€ä¸ªæœ‰è¶£çš„åœ¨çº¿ç®—å‘½å·¥å…·ç½‘ç«™"

AI: [ä¸¤ä¸ªè§’è‰²ååŒå·¥ä½œ]
    - ç²¾ç¾ç½‘é¡µè®¾è®¡å¸ˆ: è®¾è®¡ç°ä»£åŒ–ç•Œé¢,å®ç°äº¤äº’é€»è¾‘
    - å‘½ç†å¤§å¸ˆ: æä¾›ç®—å‘½å†…å®¹ã€ä¸“ä¸šæœ¯è¯­ã€è§£è¯»æ–‡æ¡ˆ

    ç»“æœ: ä¸€ä¸ªæ—¢æ¼‚äº®åˆä¸“ä¸šçš„ç®—å‘½ç½‘ç«™!
</code></pre>
<h5 data-id="heading-33">ä¸ºä»€ä¹ˆè¿™å¾ˆå¼ºå¤§?æŸ¥çœ‹çœŸå®ç¤ºä¾‹æˆªå›¾</h5>
<ul>
<li>ç½‘ç«™é¦–é¡µè½åœ°é¡µï¼š</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c473c6120f1d4c5597a3824dbbeedc3b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGVscm95:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768374834&amp;x-signature=CxQzlils5lTJ2xjaWhj0KcK%2Bf2Y%3D" alt="screencapture-localhost-5173-2026-01-07-14_38_56.png" loading="lazy"/></p>
<ul>
<li>ç½‘ç«™å‘½ç†åˆ†äº«é¡µï¼š</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1924355ed554ac8881669b93a80265f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGVscm95:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768374834&amp;x-signature=RZmZJN9oIWcxk4Iq7SsXO9E446o%3D" alt="screencapture-localhost-5173-square-2026-01-07-14_40_34.png" loading="lazy"/></p>
<ul>
<li>Bento åˆ†äº«å¡ç”Ÿæˆï¼š</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/433961a2027040048e32633e520fd986~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGVscm95:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768374834&amp;x-signature=GFPg7ioHIVQWbFJwOj8r%2FAd5q%2Fw%3D" alt="å¾®ä¿¡å›¾ç‰‡_20260103204040_350_82.png" loading="lazy"/></p>
<p>å…è´¹å®Œæ•´ä½“éªŒåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fming.520ai.xin%2F" target="_blank" title="https://ming.520ai.xin/" ref="nofollow noopener noreferrer">ming.520ai.xin/</a></p>
<p><strong>ä»¥ä¸Šä¸¤ä¸ªå®æˆ˜æç¤ºè¯å·²åœ¨æºç ä»“åº“ï¼Œæ¬¢è¿åˆ›å»ºå±äºä½ è‡ªå·±çš„å‘½ç†å¤§å¸ˆï¼</strong></p>
<p><strong>è·¨é¢†åŸŸåä½œçš„å¨åŠ›</strong>:</p>
<ul>
<li>ğŸ¨ è®¾è®¡å¸ˆ Prompt + ğŸ“ æ–‡æ¡ˆ Prompt = å®Œç¾çš„è¥é”€é¡µé¢</li>
<li>ğŸ’» å‰ç«¯å·¥ç¨‹å¸ˆ Prompt + ğŸ¯ äº§å“ç»ç† Prompt = åŠŸèƒ½å®Œå–„çš„åº”ç”¨</li>
<li>ğŸ“Š æ•°æ®åˆ†æå¸ˆ Prompt + âœï¸ å†…å®¹åˆ›ä½œè€… Prompt = æ•°æ®é©±åŠ¨çš„å†…å®¹ç­–ç•¥</li>
<li>ğŸ§  å¿ƒç†å­¦ä¸“å®¶ Prompt + ğŸ“ æ•™è‚²ä¸“å®¶ Prompt = ç§‘å­¦çš„æ•™å­¦æ–¹æ¡ˆ</li>
</ul>
<p><strong>å®é™…æ•ˆæœ</strong>:</p>
<ul>
<li>âœ… æ¯ä¸ª Prompt ä¸“æ³¨äºè‡ªå·±çš„ä¸“ä¸šé¢†åŸŸ</li>
<li>âœ… å¤šä¸ªè§’è‰²ç›¸äº’é…åˆ,å–é•¿è¡¥çŸ­</li>
<li>âœ… ä¸€æ¬¡å¯¹è¯å®ŒæˆåŸæœ¬éœ€è¦å¤šæ¬¡åˆ‡æ¢æ‰èƒ½å®Œæˆçš„å¤æ‚ä»»åŠ¡</li>
<li>âœ… åˆ›æ„æ— é™,ç»„åˆæ— é™!</li>
</ul>
<p>è¿™å°±åƒæ‹¥æœ‰ä¸€ä¸ª<strong>éšæ—¶å¾…å‘½çš„è·¨é¢†åŸŸä¸“å®¶å›¢é˜Ÿ</strong>,è€Œä½ å°±æ˜¯åè°ƒè€…!</p>
<hr/>
<h3 data-id="heading-34">ä¸ƒã€å¿«é€Ÿå¼€å§‹:5 åˆ†é’Ÿä¸Šæ‰‹</h3>
<h4 data-id="heading-35">Step 1: é€‰æ‹©å­˜å‚¨æ–¹æ¡ˆ</h4>
<p>æ ¹æ®ä½ çš„ç½‘ç»œç¯å¢ƒé€‰æ‹©:</p>
<ul>
<li>ğŸŒ <strong>å›½é™…ç”¨æˆ·</strong> â†’ Dropbox</li>
<li>ğŸ‡¨ğŸ‡³ <strong>å›½å†…ç”¨æˆ·</strong> â†’ åšæœäº‘ (æ¨è)</li>
</ul>
<h4 data-id="heading-36">Step 2: è·å–å‡­æ®</h4>
<h5 data-id="heading-37">æ–¹æ¡ˆ A: åšæœäº‘ (ç®€å•å¿«æ·,æ¨èå›½å†…ç”¨æˆ·)</h5>
<ol>
<li>ç™»å½•åšæœäº‘å®˜ç½‘ â†’ å®‰å…¨è®¾ç½® â†’ ç¬¬ä¸‰æ–¹åº”ç”¨ç®¡ç†</li>
<li>æ·»åŠ åº”ç”¨,ç”Ÿæˆ<strong>åº”ç”¨å¯†ç </strong></li>
<li>è®°å½•ä½ çš„é‚®ç®±å’Œåº”ç”¨å¯†ç </li>
</ol>
<h5 data-id="heading-38">æ–¹æ¡ˆ B: Dropbox (å›½é™…ç”¨æˆ·)</h5>
<p><strong>æ­¥éª¤ 1: åˆ›å»º Dropbox App</strong></p>
<ol>
<li>è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.dropbox.com%2Fdevelopers%2Fapps" target="_blank" title="https://www.dropbox.com/developers/apps" ref="nofollow noopener noreferrer">Dropbox Developers</a></li>
<li>ç‚¹å‡» "Create app"</li>
<li>é€‰æ‹© <code>Scoped access</code> â†’ <code>App folder</code></li>
<li>ç»™ä½ çš„ App èµ·ä¸ªåå­—(å¦‚ <code>mcp-prompts</code>)</li>
</ol>
<p><strong>æ­¥éª¤ 2: é…ç½®æƒé™</strong></p>
<ol>
<li>è¿›å…¥ App çš„ <strong>Permissions</strong> é€‰é¡¹å¡</li>
<li>å‹¾é€‰ä»¥ä¸‹æƒé™:
<ul>
<li><code>files.metadata.read</code></li>
<li><code>files.content.read</code></li>
<li><code>files.content.write</code></li>
</ul>
</li>
<li>ç‚¹å‡»é¡µé¢ä¸‹æ–¹çš„ <strong>Submit</strong> æŒ‰é’®</li>
</ol>
<p><strong>æ­¥éª¤ 3: è·å–æ°¸ä¹…è®¿é—®ä»¤ç‰Œ (Refresh Token)</strong></p>
<p>Dropbox é»˜è®¤ç”Ÿæˆçš„ Access Token åªæœ‰ 4 å°æ—¶æœ‰æ•ˆæœŸ,æˆ‘ä»¬éœ€è¦è·å–æ°¸ä¹…æœ‰æ•ˆçš„ Refresh Token:</p>
<ol>
<li>åœ¨ <strong>Settings</strong> é¡µé¢æ‰¾åˆ° <code>App key</code> å’Œ <code>App secret</code>,è®°å½•ä¸‹æ¥</li>
<li>åœ¨æµè§ˆå™¨æ‰“å¼€ä»¥ä¸‹é“¾æ¥(æ›¿æ¢ <code>YOUR_APP_KEY</code>):
<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.dropbox.com%2Foauth2%2Fauthorize%3Fclient_id%3DYOUR_APP_KEY%26token_access_type%3Doffline%26response_type%3Dcode" target="_blank" title="https://www.dropbox.com/oauth2/authorize?client_id=YOUR_APP_KEY&amp;token_access_type=offline&amp;response_type=code" ref="nofollow noopener noreferrer">www.dropbox.com/oauth2/authâ€¦</a></li>
<li>æˆæƒåä¼šå¾—åˆ°ä¸€ä¸ªæˆæƒç </li>
<li>åœ¨ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤(æ›¿æ¢å¯¹åº”å‚æ•°):
<pre><code class="hljs language-bash" lang="bash">curl https://api.dropbox.com/oauth2/token \
  -d code=æ‚¨åˆšåˆšå¾—åˆ°çš„æˆæƒç  \
  -d grant_type=authorization_code \
  -u æ‚¨çš„AppKey:æ‚¨çš„AppSecret
</code></pre>
</li>
<li>è¿”å›çš„ JSON ä¸­çš„ <code>refresh_token</code> å°±æ˜¯æ°¸ä¹…ä»¤ç‰Œ,è®°å½•ä¸‹æ¥</li>
</ol>
<p><strong>é…ç½®ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"mcp-prompts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npx"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"-y"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"mcp-dropbox-prompts"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"DROPBOX_REFRESH_TOKEN"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ‚¨çš„_REFRESH_TOKEN"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"DROPBOX_CLIENT_ID"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ‚¨çš„_APP_KEY"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"DROPBOX_CLIENT_SECRET"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ‚¨çš„_APP_SECRET"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"HTTPS_PROXY"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://127.0.0.1:7890"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"DROPBOX_ROOT_PATH"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<blockquote>
<p>âš ï¸ <strong>æ³¨æ„</strong>: å›½å†…ç”¨æˆ·éœ€è¦é…ç½® <code>HTTPS_PROXY</code> ä»£ç†æ‰èƒ½è®¿é—® Dropbox API</p>
</blockquote>
<h4 data-id="heading-39">Step 3: é…ç½® MCP</h4>
<p>åœ¨ä½ çš„ MCP é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ (ä»¥åšæœäº‘ä¸ºä¾‹):</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"mcp-prompts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npx"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"-y"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"mcp-dropbox-prompts"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"WEBDAV_USERNAME"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"your@email.com"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"WEBDAV_PASSWORD"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åº”ç”¨ç‰¹å®šå¯†ç "</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"WEBDAV_URL"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://dav.jianguoyun.com/dav/"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"WEBDAV_ROOT_PATH"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/mcp-prompts"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>æç¤º</strong>: é…ç½®æ–‡ä»¶ä½ç½®</p>
<ul>
<li>Cursor: <code>~/.cursor/mcp_config.json</code></li>
<li>Claude Desktop: <code>~/Library/Application Support/Claude/claude_desktop_config.json</code></li>
</ul>
</blockquote>
<h4 data-id="heading-40">Step 4: é‡å¯åº”ç”¨</h4>
<p>é‡å¯ Cursor æˆ– Claude Desktop,è®©é…ç½®ç”Ÿæ•ˆã€‚</p>
<h4 data-id="heading-41">Step 5: å¼€å§‹ä½¿ç”¨!</h4>
<p>åœ¨å¯¹è¯æ¡†ä¸­è¯•è¯•:</p>
<pre><code class="hljs language-plain" lang="plain">ä½ : "åˆ—å‡ºæˆ‘çš„æ‰€æœ‰æç¤ºè¯"
AI: [è°ƒç”¨ list_prompts å·¥å…·,å±•ç¤ºä½ çš„ Prompt åº“]
</code></pre>
<p>å°±æ˜¯è¿™ä¹ˆç®€å•! ğŸ‰</p>
<hr/>
<h3 data-id="heading-42">å…«ã€å†™åœ¨æœ€å</h3>
<p>åœ¨ AI æ—¶ä»£,<strong>Prompt å°±æ˜¯ä½ çš„è¶…èƒ½åŠ›</strong>ã€‚</p>
<p>ä¸€ä¸ªå¥½çš„ Prompt å¯èƒ½æ˜¯ä½ èŠ±äº†ä¸€ä¸ªå°æ—¶ä¸æ–­è°ƒè¯•ã€æ•°åæ¬¡è¿­ä»£æ‰å¾—åˆ°çš„æˆæœã€‚å®ƒä»£è¡¨ç€ä½ å¯¹ç‰¹å®šä»»åŠ¡çš„æ·±åˆ»ç†è§£,æ˜¯ä½ ç‹¬ç‰¹çš„çŸ¥è¯†èµ„äº§ã€‚</p>
<p>ç„¶è€Œ,è¿™äº›å®è´µçš„èµ„äº§ä¸åº”è¯¥è¢«å›°åœ¨æŸä¸€å°è®¾å¤‡çš„æœ¬åœ°æ–‡ä»¶ä¸­,ä¸åº”è¯¥åœ¨ç‰ˆæœ¬è¦†ç›–ä¸­æ°¸ä¹…æ¶ˆå¤±,ä¸åº”è¯¥åœ¨éœ€è¦æ—¶æ‰¾ä¸åˆ°,æ›´ä¸åº”è¯¥åœ¨æƒ³ä¿å­˜æ—¶éœ€è¦ä¸­æ–­æ€ç»´æµå»æ‰‹åŠ¨æ“ä½œã€‚</p>
<p><strong>mcp-dropbox-prompts çš„è®¾è®¡å“²å­¦å¾ˆç®€å•:</strong></p>
<blockquote>
<p><strong>è®© Prompt ç®¡ç†å˜å¾—é€æ˜,è®©ä½ ä¸“æ³¨äºä¸ AI çš„å¯¹è¯æœ¬èº«ã€‚</strong></p>
</blockquote>
<p>æˆ‘å¸Œæœ›è¿™ä¸ªå·¥å…·èƒ½çœŸæ­£è§£å†³ä½ çš„ç—›ç‚¹,æå‡ä½ çš„ AI ä½¿ç”¨ä½“éªŒã€‚å¦‚æœå®ƒå¸®åˆ°äº†ä½ ,æ¬¢è¿:</p>
<ul>
<li>â­ ç»™é¡¹ç›®ç‚¹ä¸ª Star</li>
<li>ğŸ’¬ åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ä½¿ç”¨ä½“éªŒ</li>
<li>ğŸ› åœ¨ GitHub æ Issue åé¦ˆé—®é¢˜æˆ–å»ºè®®</li>
<li>ğŸ“¢ æ¨èç»™æœ‰éœ€è¦çš„æœ‹å‹</li>
</ul>
<hr/>
<h3 data-id="heading-43">ğŸ”— ç›¸å…³é“¾æ¥</h3>
<ul>
<li>ğŸ“¦ npm åŒ…: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fmcp-dropbox-prompts" target="_blank" title="https://www.npmjs.com/package/mcp-dropbox-prompts" ref="nofollow noopener noreferrer">www.npmjs.com/package/mcpâ€¦</a></li>
<li>ğŸ’» GitHub: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyuanyang749%2Fmcp-dropbox-prompts" target="_blank" title="https://github.com/yuanyang749/mcp-dropbox-prompts" ref="nofollow noopener noreferrer">github.com/yuanyang749â€¦</a></li>
<li>ğŸ“– è¯¦ç»†æ–‡æ¡£: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyuanyang749%2Fmcp-dropbox-prompts%23readme" target="_blank" title="https://github.com/yuanyang749/mcp-dropbox-prompts#readme" ref="nofollow noopener noreferrer">github.com/yuanyang749â€¦</a></li>
<li>ğŸŒ MCP åè®®: <a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io" target="_blank" title="https://modelcontextprotocol.io" ref="nofollow noopener noreferrer">modelcontextprotocol.io</a></li>
</ul>
<hr/>
<h3 data-id="heading-44">å…³äºä½œè€…</h3>
<p>ä¸€ä¸ªç›¸ä¿¡å·¥å…·åº”è¯¥è®©ç”Ÿæ´»æ›´ç®€å•çš„å¼€å‘è€… ğŸš€</p>
<p>å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®,æ¬¢è¿é€šè¿‡ GitHub Issues è”ç³»æˆ‘!</p>
<hr/>
<blockquote>
<p><strong>æœ€åçš„æœ€å</strong>: å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©,åˆ«å¿˜äº†ç‚¹èµ ğŸ‘ å’Œæ”¶è— â­,ä½ çš„æ”¯æŒæ˜¯æˆ‘æŒç»­æ›´æ–°çš„åŠ¨åŠ›!ä¸‹æœŸåˆ†äº«æˆ‘çš„<strong>2026 å‘½ç†å¤§å¸ˆ</strong>ç½‘ç«™çš„è¯¦ç»†è°ƒæ•™è¿‡ç¨‹ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€JavaåŸºç¡€æ•´ç†ã€‘Javaå¤šçº¿ç¨‹]]></title>    <link>https://juejin.cn/post/7592531796038926370</link>    <guid>https://juejin.cn/post/7592531796038926370</guid>    <pubDate>2026-01-07T08:44:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592531796038926370" data-draft-id="7592170706026790947" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€JavaåŸºç¡€æ•´ç†ã€‘Javaå¤šçº¿ç¨‹"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2026-01-07T08:44:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Œæ—¥å°¼ä¹"/> <meta itemprop="url" content="https://juejin.cn/user/854736525882123"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€JavaåŸºç¡€æ•´ç†ã€‘Javaå¤šçº¿ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/854736525882123/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Œæ—¥å°¼ä¹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T08:44:38.000Z" title="Wed Jan 07 2026 08:44:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Javaå¤šçº¿ç¨‹è¯¦è§£</h2>
<h3 data-id="heading-1">1. å¤šçº¿ç¨‹æ¦‚è¿°</h3>
<h4 data-id="heading-2">ä»€ä¹ˆæ˜¯çº¿ç¨‹</h4>
<p><strong>çº¿ç¨‹</strong>æ˜¯ç¨‹åºä¸­çš„æ‰§è¡Œçº¿ç¨‹ã€‚Javaè™šæ‹Ÿæœºå…è®¸åº”ç”¨ç¨‹åºå¹¶å‘åœ°è¿è¡Œå¤šä¸ªæ‰§è¡Œçº¿ç¨‹ã€‚</p>
<p><strong>æ ¸å¿ƒè¦ç‚¹ï¼š</strong></p>
<ul>
<li>çº¿ç¨‹æ˜¯ç¨‹åºæ‰§è¡Œçš„æœ€å°å•ä½</li>
<li>å¤šçº¿ç¨‹å¯ä»¥æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡</li>
<li>çº¿ç¨‹ä¹‹é—´å¯ä»¥å¹¶å‘æ‰§è¡Œï¼Œå…±äº«è¿›ç¨‹èµ„æº</li>
<li>æ­£ç¡®åˆ›å»ºå’Œä½¿ç”¨å¤šä¸ªçº¿ç¨‹è‡³å…³é‡è¦</li>
</ul>
<h3 data-id="heading-3">2. åˆ›å»ºçº¿ç¨‹çš„ä¸¤ç§æ–¹æ³•</h3>
<p>Javaä¸­åˆ›å»ºçº¿ç¨‹æœ‰ä¸¤ç§ä¸»è¦æ–¹æ³•ï¼šç»§æ‰¿Threadç±»å’Œå®ç°Runnableæ¥å£ã€‚</p>
<h4 data-id="heading-4">2.1 æ–¹æ³•ä¸€ï¼šç»§æ‰¿Threadç±»</h4>
<p><strong>å®ç°æ­¥éª¤ï¼š</strong></p>
<ol>
<li>ç»§æ‰¿Threadç±»</li>
<li>é‡å†™Threadç±»çš„<code>run()</code>æ–¹æ³•</li>
<li>è°ƒç”¨çº¿ç¨‹çš„<code>start()</code>æ–¹æ³•å¯åŠ¨çº¿ç¨‹</li>
</ol>
<p><strong>ç‰¹ç‚¹ï¼š</strong> <code>start()</code>æ–¹æ³•å¼€å¯<code>run()</code>å¹¶å‘æ‰§è¡Œè¯¥çº¿ç¨‹ã€‚</p>
<h5 data-id="heading-5">å®Œæ•´ç¤ºä¾‹</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç¬¬ä¸€ä¸ªçº¿ç¨‹ç±»ç»§æ‰¿Threadç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Thread1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ‰§è¡Œ60æ¬¡å¾ªç¯è¾“å‡º</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">60</span>; i++) {
            System.out.println(<span class="hljs-string">"ThreadOne::"</span> + i);
        }
    }
}

<span class="hljs-comment">// ç¬¬äºŒä¸ªçº¿ç¨‹ç±»ç»§æ‰¿Threadç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Thread2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ‰§è¡Œ60æ¬¡å¾ªç¯è¾“å‡º</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">60</span>; i++) {
            System.out.println(<span class="hljs-string">"ThreadTwo::: "</span> + i);
        }
    }
}

<span class="hljs-comment">// ä¸»æ–¹æ³•</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadMain</span> {
    <span class="hljs-comment">// åŒæ­¥æ‰§è¡Œä¸¤ä¸ªçº¿ç¨‹</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹å¯¹è±¡</span>
        <span class="hljs-type">Thread1</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread1</span>();
        <span class="hljs-type">Thread2</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread2</span>();
        
        <span class="hljs-comment">// ä½¿ç”¨çº¿ç¨‹çš„startæ–¹æ³•åŒæ­¥æ‰§è¡Œä¸¤ä¸ªçº¿ç¨‹å¯¹è±¡</span>
        t1.start();
        t2.start();
    }
}
</code></pre>
<p><strong>è¾“å‡ºç»“æœï¼š</strong> ä¸¤ä¸ªçº¿ç¨‹å¯¹è±¡éšæœºäº¤æ›¿æ‰§è¡Œè¾“å‡ºè¯­å¥ã€‚</p>
<h4 data-id="heading-6">2.2 æ–¹æ³•äºŒï¼šå®ç°Runnableæ¥å£ï¼ˆæ¨èï¼‰</h4>
<p><strong>å®ç°æ­¥éª¤ï¼š</strong></p>
<ol>
<li>å®šä¹‰ç±»å®ç°Runnableæ¥å£</li>
<li>è¦†ç›–Runnableæ¥å£ä¸­çš„<code>run()</code>æ–¹æ³•ï¼Œå°†çº¿ç¨‹éœ€è¦è¿è¡Œçš„ä»£ç å†™å…¥</li>
<li>é€šè¿‡Threadç±»å»ºç«‹å¸¦Runnableæ¥å£çš„å­ç±»å¯¹è±¡å‚æ•°çš„çº¿ç¨‹å¯¹è±¡</li>
<li>è°ƒç”¨Threadç±»çš„<code>start()</code>æ–¹æ³•å¼€å¯çº¿ç¨‹å¹¶è°ƒç”¨Runnableæ¥å£å­ç±»çš„<code>run()</code>æ–¹æ³•</li>
</ol>
<h5 data-id="heading-7">å®Œæ•´ç¤ºä¾‹ï¼šæ¨¡æ‹Ÿå–ç¥¨çª—å£</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å®ç°Runnableæ¥å£çš„çº¿ç¨‹ç±»ï¼Œæ¨¡æ‹Ÿå–ç¥¨çª—å£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Ticket</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> {
    <span class="hljs-comment">// å®šä¹‰ç¥¨æ•°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">tick</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;
    
    <span class="hljs-comment">// é‡å†™Runnableæ¥å£run()æ–¹æ³•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            <span class="hljs-keyword">if</span> (tick &gt; <span class="hljs-number">0</span>) {
                <span class="hljs-comment">// è¿™é‡Œå¤šä¸ªçº¿ç¨‹å†…å…±äº«ä¸€ä¸ªtickå¯¹è±¡</span>
                System.out.println(Thread.currentThread().getName() + 
                                 <span class="hljs-string">":sale:"</span> + tick--);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// å–å®Œæ‰“çƒŠ</span>
                <span class="hljs-keyword">break</span>;
            }
        }
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TicketMain</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// å»ºç«‹å®ç°Runnableæ¥å£çš„çº¿ç¨‹å¯¹è±¡</span>
        <span class="hljs-type">Ticket</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Ticket</span>();
        
        <span class="hljs-comment">// å°†å®ç°Runnableæ¥å£çš„å­ç±»å½“ä½œThreadç±»çš„å‚æ•°ï¼Œ</span>
        <span class="hljs-comment">// ç”¨Threadç±»çš„start()æ–¹æ³•æ¥å¼€å¯å¤šä¸ªçº¿ç¨‹</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(t);
        <span class="hljs-type">Thread</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(t);
        t1.start();
        t2.start();
    }
}
</code></pre>
<h4 data-id="heading-8">2.3 ä¸¤ç§æ–¹æ³•çš„å¯¹æ¯”</h4>



































<table><thead><tr><th>æ¯”è¾ƒé¡¹ç›®</th><th>ç»§æ‰¿Threadç±»</th><th>å®ç°Runnableæ¥å£</th></tr></thead><tbody><tr><td><strong>ç»§æ‰¿é™åˆ¶</strong></td><td>æ— æ³•å†ç»§æ‰¿å…¶ä»–ç±»</td><td>é¿å…å•ç»§æ‰¿å±€é™æ€§ âœ“</td></tr><tr><td><strong>èµ„æºå…±äº«</strong></td><td>æ¯ä¸ªçº¿ç¨‹ç‹¬ç«‹çš„èµ„æº</td><td>å¤šä¸ªçº¿ç¨‹å…±äº«åŒä¸€ä¸ªå¯¹è±¡ âœ“</td></tr><tr><td><strong>è·å–å½“å‰çº¿ç¨‹</strong></td><td>ç›´æ¥ä½¿ç”¨<code>this</code></td><td>ä½¿ç”¨<code>Thread.currentThread()</code></td></tr><tr><td><strong>ä»£ç å¤ç”¨æ€§</strong></td><td>è¾ƒå·®</td><td>è¾ƒå¥½ âœ“</td></tr><tr><td><strong>æ¨èç¨‹åº¦</strong></td><td>ä¸æ¨è</td><td><strong>æ¨èä½¿ç”¨</strong> âœ“</td></tr></tbody></table>
<p><strong>ç»“è®ºï¼š</strong> å®ç°Runnableæ¥å£çš„æ–¹å¼æ›´åŠ çµæ´»ï¼Œæ˜¯åˆ›å»ºçº¿ç¨‹çš„æ¨èæ–¹æ³•ã€‚</p>
<h3 data-id="heading-9">3. çº¿ç¨‹å®‰å…¨æ€§</h3>
<h4 data-id="heading-10">3.1 çº¿ç¨‹å®‰å…¨é—®é¢˜</h4>
<p><strong>é—®é¢˜æè¿°ï¼š</strong> å½“å¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œåŒä¸€ä¸ªå…±äº«æ•°æ®æ—¶ï¼Œå¦‚æœä¸€ä¸ªçº¿ç¨‹å¯¹å¤šæ¡è¯­å¥åªæ‰§è¡Œäº†ä¸€éƒ¨åˆ†ï¼Œè¿˜æ²¡å…¨éƒ¨æ‰§è¡Œå®Œï¼Œå¦ä¸€ä¸ªçº¿ç¨‹å°±å‚ä¸è¿›æ¥æ‰§è¡Œï¼Œå¯èƒ½ä¼šå¯¼è‡´å…±äº«æ•°æ®çš„é”™è¯¯ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> å¯¹å¤šæ¡æ“ä½œå…±äº«æ•°æ®çš„è¯­å¥ï¼Œåªèƒ½è®©ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œï¼Œæ‰å¯ä»¥è®©å…¶ä»–çº¿ç¨‹å‚ä¸è¿è¡Œã€‚</p>
<h4 data-id="heading-11">3.2 çº¿ç¨‹åŒæ­¥æœºåˆ¶</h4>
<p>Javaæä¾›äº†<strong>synchronizedå…³é”®å­—</strong>å®ç°çº¿ç¨‹åŒæ­¥ï¼ˆJDK 1.5ä¹‹å‰çš„ä¸»è¦æ–¹å¼ï¼‰ã€‚</p>
<h5 data-id="heading-12">åŒæ­¥ä»£ç å—</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å®šä¹‰é”å¯¹è±¡</span>
<span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();

<span class="hljs-keyword">synchronized</span>(obj) {
    <span class="hljs-comment">// éœ€è¦åŒæ­¥çš„ä»£ç å—</span>
}
</code></pre>
<h5 data-id="heading-13">åŒæ­¥æ–¹æ³•</h5>
<p><strong>æ¦‚å¿µï¼š</strong> åŒæ­¥æ–¹æ³•å°±æ˜¯ç»™æŸä¸ªæ–¹æ³•åŠ é”ï¼Œä»è€Œé¿å…ä¸åŒå¯¹è±¡è°ƒç”¨åŒä¸€ä¸ªæ–¹æ³•å‡ºç°æ•°æ®é”™è¯¯çš„é—®é¢˜ã€‚</p>
<p><strong>å®Œæ•´é“¶è¡Œå­˜æ¬¾ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æè¿°é“¶è¡Œ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Bank</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> sum;
    
    <span class="hljs-comment">// é“¶è¡Œå…·æœ‰å­˜é’±æ–¹æ³•ï¼Œå› ä¸ºæ‰§è¡Œè¯­å¥è¾ƒå¤šæ‰€ä»¥éœ€è¦æ–¹æ³•çš„åŒæ­¥</span>
    <span class="hljs-comment">// æ–¹æ³•çš„åŒæ­¥é”æ˜¯this</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> {
        sum = sum + n;
        <span class="hljs-keyword">try</span> {
            Thread.sleep(<span class="hljs-number">10</span>);
        } <span class="hljs-keyword">catch</span>(InterruptedException e) {
            e.printStackTrace();
        }
        System.out.println(<span class="hljs-string">"sum="</span> + sum);
    }
}

<span class="hljs-comment">// æè¿°æ“ä½œé“¶è¡Œçš„çº¿ç¨‹ç±»ï¼Œrunæ–¹æ³•æ˜¯æ“ä½œé“¶è¡Œå­˜å…¥åŠ¨ä½œ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Cus</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">Bank</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bank</span>();
    
    <span class="hljs-comment">// å­˜ä¸‰æ¬¡ï¼Œæ¯æ¬¡å­˜å…¥100</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; x &lt; <span class="hljs-number">3</span>; x++) {
            b.add(<span class="hljs-number">100</span>);
        }
    }
}

<span class="hljs-comment">// ä¸»æ–¹æ³•</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BankMain</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åˆ›å»ºçº¿ç¨‹ï¼Œå®ç°å¤šçº¿ç¨‹æ“ä½œ</span>
        <span class="hljs-type">Cus</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cus</span>();
        <span class="hljs-type">Thread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(c);
        <span class="hljs-type">Thread</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(c);
        t1.start();
        t2.start();
    }
}
</code></pre>
<h4 data-id="heading-14">3.3 åŒæ­¥é”çš„è¯´æ˜</h4>

























<table><thead><tr><th>åŒæ­¥ç±»å‹</th><th>é”å¯¹è±¡</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>åŒæ­¥ä»£ç å—</strong></td><td>è‡ªå®šä¹‰å¯¹è±¡</td><td>å¯ä»¥æ˜¯ä»»æ„å¯¹è±¡</td></tr><tr><td><strong>åŒæ­¥æ–¹æ³•</strong></td><td><code>this</code></td><td>å½“å‰å®ä¾‹å¯¹è±¡</td></tr><tr><td><strong>é™æ€åŒæ­¥æ–¹æ³•</strong></td><td><code>ç±»å.class</code></td><td>ç±»å¯¹è±¡</td></tr></tbody></table>
<p><strong>âš ï¸ é‡è¦æç¤ºï¼š</strong> å¤šçº¿ç¨‹æ­»é”é—®é¢˜éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œé¿å…ç›¸äº’ç­‰å¾…é€ æˆç¨‹åºåœæ­¢ã€‚</p>
<h3 data-id="heading-15">4. çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</h3>
<h4 data-id="heading-16">4.1 çº¿ç¨‹çŠ¶æ€è¯¦è§£</h4>
<pre><code class="hljs language-markdown" lang="markdown">æ–°å»º â†’ å°±ç»ª â‡„ è¿è¡Œ â†’ æ¶ˆäº¡
<span class="hljs-code">        â†•     â†“
      é˜»å¡ â†â”€â”€â”€
</span></code></pre>
<h5 data-id="heading-17">1. æ–°å»ºçŠ¶æ€ï¼ˆNewï¼‰</h5>
<ul>
<li><strong>è§¦å‘æ¡ä»¶ï¼š</strong> å½“newä¸€ä¸ªThreadæˆ–å…¶å­ç±»å»ºç«‹çº¿ç¨‹å</li>
<li><strong>çŠ¶æ€æè¿°ï¼š</strong> çº¿ç¨‹å¯¹è±¡å¤„äºæ–°ç”ŸçŠ¶æ€ï¼Œè¿˜æœªå¯åŠ¨</li>
</ul>
<h5 data-id="heading-18">2. å°±ç»ªçŠ¶æ€ï¼ˆRunnableï¼‰</h5>
<ul>
<li><strong>è§¦å‘æ¡ä»¶ï¼š</strong> è°ƒç”¨<code>start()</code>æ–¹æ³•åè¿›å…¥</li>
<li><strong>çŠ¶æ€æè¿°ï¼š</strong> çº¿ç¨‹å…·å¤‡äº†è¿è¡Œæ¡ä»¶ï¼Œä½†æœªå¿…ç«‹åˆ»æ‰§è¡Œ</li>
<li><strong>ğŸ’¡ æç¤ºï¼š</strong> å¯ä½¿ç”¨<code>Thread.sleep()</code>æ–¹æ³•ä½¿ä¸»çº¿ç¨‹ä¼‘çœ ï¼Œè®©å…¶ä»–çº¿ç¨‹æœ‰æœºä¼šæ‰§è¡Œ</li>
</ul>
<h5 data-id="heading-19">3. è¿è¡ŒçŠ¶æ€ï¼ˆRunningï¼‰</h5>
<ul>
<li><strong>è§¦å‘æ¡ä»¶ï¼š</strong> çº¿ç¨‹æŠ¢åˆ°CPUæ‰§è¡Œæƒ</li>
<li><strong>å¯èƒ½çš„æ“ä½œï¼š</strong>
<ul>
<li><strong>ç¡çœ æ“ä½œï¼š</strong> è°ƒç”¨<code>sleep()</code>æ–¹æ³• â†’ è¿›å…¥é˜»å¡çŠ¶æ€</li>
<li><strong>ç­‰å¾…æ“ä½œï¼š</strong> è°ƒç”¨<code>wait()</code>æ–¹æ³• â†’ è¿›å…¥é˜»å¡çŠ¶æ€ï¼ˆéœ€è¦<code>notify()</code>æˆ–<code>notifyAll()</code>å”¤é†’ï¼‰</li>
<li><strong>IOé˜»å¡ï¼š</strong> è°ƒç”¨é˜»å¡å¼IOæ–¹æ³• â†’ è¿›å…¥é˜»å¡çŠ¶æ€</li>
<li><strong>é€€è®©æš‚åœï¼š</strong> è°ƒç”¨<code>yield()</code>æ–¹æ³• â†’ é‡æ–°è¿›å…¥å°±ç»ªçŠ¶æ€ï¼ˆä¸è¿›å…¥é˜»å¡çŠ¶æ€ï¼‰</li>
</ul>
</li>
</ul>
<h5 data-id="heading-20">4. é˜»å¡çŠ¶æ€ï¼ˆBlockedï¼‰</h5>
<ul>
<li><strong>è¿›å…¥æ¡ä»¶ï¼š</strong> ç”±è¿è¡ŒçŠ¶æ€è½¬å˜è€Œæ¥</li>
<li><strong>é˜»å¡ç±»å‹åŠæ¢å¤æ–¹å¼ï¼š</strong></li>
</ul>

























<table><thead><tr><th>é˜»å¡ç±»å‹</th><th>è¿›å…¥æ–¹å¼</th><th>æ¢å¤æ–¹å¼</th></tr></thead><tbody><tr><td><strong>ç¡çœ é˜»å¡</strong></td><td><code>sleep()</code></td><td>æŒ‡å®šæ—¶é—´åè‡ªåŠ¨æ¢å¤åˆ°å°±ç»ªçŠ¶æ€</td></tr><tr><td><strong>ç­‰å¾…é˜»å¡</strong></td><td><code>wait()</code></td><td><code>notify()</code>æˆ–<code>notifyAll()</code>å”¤é†’</td></tr><tr><td><strong>IOé˜»å¡</strong></td><td>é˜»å¡å¼IOæ–¹æ³•</td><td>å¤–è®¾å®ŒæˆIOæ“ä½œåè‡ªåŠ¨æ¢å¤</td></tr></tbody></table>
<h5 data-id="heading-21">5. æ¶ˆäº¡çŠ¶æ€ï¼ˆDeadï¼‰</h5>
<ul>
<li><strong>è§¦å‘æ¡ä»¶ï¼š</strong> ä»<code>run()</code>æ–¹æ³•æ­£å¸¸é€€å‡º</li>
<li><strong>çŠ¶æ€æè¿°ï¼š</strong> çº¿ç¨‹æ‰§è¡Œç»“æŸï¼Œè¿›å…¥æ¶ˆäº¡çŠ¶æ€</li>
</ul>
<h4 data-id="heading-22">4.2 çŠ¶æ€è½¬æ¢å›¾</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-selector-attr">[æ–°å»º]</span> <span class="hljs-attr">--start</span>()--&gt; <span class="hljs-selector-attr">[å°±ç»ª]</span> &lt;<span class="hljs-attr">--yield</span>()-- <span class="hljs-selector-attr">[è¿è¡Œ]</span>
                     â†‘                    â†“
                     |              <span class="hljs-built_in">sleep</span>()/wait()/IOé˜»å¡
                     |                    â†“
                   æ¢å¤ &lt;------------- <span class="hljs-selector-attr">[é˜»å¡]</span>
                     â†‘                    
                     |                    
<span class="hljs-selector-attr">[æ¶ˆäº¡]</span> &lt;<span class="hljs-attr">--run</span>()ç»“æŸ-- <span class="hljs-selector-attr">[è¿è¡Œ]</span>
</code></pre>
<h3 data-id="heading-23">5. ç­‰å¾…å”¤é†’æ“ä½œï¼ˆçº¿ç¨‹é—´é€šä¿¡ï¼‰</h3>
<h4 data-id="heading-24">5.1 ç­‰å¾…å”¤é†’æœºåˆ¶æ¦‚è¿°</h4>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> å¤šä¸ªçº¿ç¨‹åŒæ­¥æ“ä½œï¼Œä½†æ“ä½œçš„åŠ¨ä½œä¸åŒã€‚æ¯”å¦‚ï¼šå¯¹åŒä¸€ä¸ªèµ„æºçš„å­˜å‚¨å’Œè¯»å–æ“ä½œã€‚</p>
<p><strong>ç›®æ ‡ï¼š</strong> è®©CPUè¿è¡Œä¸€æ¬¡å­˜å‚¨çº¿ç¨‹ï¼Œå°±è¿è¡Œä¸€æ¬¡è¯»å–çº¿ç¨‹ã€‚</p>
<p><strong>æ ¸å¿ƒæ–¹æ³•ï¼š</strong> <code>wait()</code>ã€<code>notify()</code>ã€<code>notifyAll()</code></p>
<h4 data-id="heading-25">5.2 ç­‰å¾…å”¤é†’æ–¹æ³•è¯´æ˜</h4>

























<table><thead><tr><th>æ–¹æ³•å</th><th>åŠŸèƒ½æè¿°</th><th>ä½¿ç”¨æ–¹å¼</th></tr></thead><tbody><tr><td><code>wait()</code></td><td>è®©å½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€</td><td><code>this.wait()</code></td></tr><tr><td><code>notify()</code></td><td>å”¤é†’ç­‰å¾…æ± ä¸­çš„ä¸€ä¸ªçº¿ç¨‹</td><td><code>this.notify()</code></td></tr><tr><td><code>notifyAll()</code></td><td>å”¤é†’ç­‰å¾…æ± ä¸­çš„æ‰€æœ‰çº¿ç¨‹</td><td><code>this.notifyAll()</code></td></tr></tbody></table>
<p><strong>âš ï¸ æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<ol>
<li>ç­‰å¾…å’Œå”¤é†’æ–¹æ³•å¿…é¡»æ ‡è¯†å‡ºæ‰€å±çš„é”</li>
<li>å¿…é¡»åœ¨åŒæ­¥ä¸­ä½¿ç”¨ï¼Œå› ä¸ºè¦å¯¹æŒæœ‰ç›‘è§†å™¨ï¼ˆé”ï¼‰çš„çº¿ç¨‹æ“ä½œ</li>
<li>æ“ä½œçš„çº¿ç¨‹å¿…é¡»ä½¿ç”¨åŒä¸€ä¸ªé”</li>
</ol>
<h4 data-id="heading-26">5.3 ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼å®ç°</h4>
<h5 data-id="heading-27">åŸºç¡€ç‰ˆæœ¬ï¼ˆé€‚ç”¨äºå•ç”Ÿäº§è€…-å•æ¶ˆè´¹è€…ï¼‰</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å°è£…å•†å“å’Œç”Ÿäº§ã€æ¶ˆè´¹å•†å“çš„æ–¹æ³•</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Resource</span> {
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;  <span class="hljs-comment">// äº§å“ç¼–å·</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;  <span class="hljs-comment">// æ ‡è®°ï¼štrueå¯æ¶ˆè´¹ï¼Œfalseå¯ç”Ÿäº§</span>
    
    <span class="hljs-comment">// ç”Ÿäº§æ“ä½œï¼Œå¦‚æœæ¶ˆè´¹è¿‡ä¸€æ¬¡å°±å¾—å­˜å…¥ä¸€æ¬¡å•†å“</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">set</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-keyword">if</span> (flag) {
            <span class="hljs-keyword">try</span> { 
                wait(); 
            } <span class="hljs-keyword">catch</span>(InterruptedException e) {}
        }
        
        <span class="hljs-built_in">this</span>.name = name + <span class="hljs-string">"..."</span> + count++;
        System.out.println(Thread.currentThread().getName() + 
                          <span class="hljs-string">"..ç”Ÿäº§ã€‚ã€‚"</span> + <span class="hljs-built_in">this</span>.name);
        
        <span class="hljs-comment">// æ”¹å˜æ ‡è®°ï¼Œå¥½è®©æ¶ˆè´¹çº¿ç¨‹æˆåŠŸè¿è¡Œï¼Œtrueä»£è¡¨å¯æ¶ˆè´¹</span>
        flag = <span class="hljs-literal">true</span>;
        <span class="hljs-comment">// ä»…è€ƒè™‘ä¸¤ä¸ªçº¿ç¨‹æ“ä½œï¼Œæ‰€ä»¥å”¤é†’å¯¹æ–¹</span>
        <span class="hljs-built_in">this</span>.notify();
    }
    
    <span class="hljs-comment">// æ¶ˆè´¹æ“ä½œï¼Œå¦‚æœç”Ÿäº§è¿‡å•†å“äº†ï¼Œå°±æ¶ˆè´¹ä¸€æ¬¡å•†å“</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">out</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (!flag) {
            <span class="hljs-keyword">try</span> { 
                wait(); 
            } <span class="hljs-keyword">catch</span>(InterruptedException e) {}
        }
        
        System.out.println(Thread.currentThread().getName() + 
                          <span class="hljs-string">"ã€‚æ¶ˆè´¹ã€‚"</span> + <span class="hljs-built_in">this</span>.name);
        
        <span class="hljs-comment">// æ”¹å˜æ ‡è®°ï¼Œç”Ÿäº§çº¿ç¨‹falseä»£è¡¨å¯ç”Ÿäº§</span>
        flag = <span class="hljs-literal">false</span>;
        <span class="hljs-comment">// ä»…è€ƒè™‘ä¸¤ä¸ªçº¿ç¨‹æ“ä½œï¼Œæ‰€ä»¥å”¤é†’å¯¹æ–¹</span>
        <span class="hljs-built_in">this</span>.notify();
    }
}

<span class="hljs-comment">// ç”Ÿäº§è€…çº¿ç¨‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Producer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> {
    <span class="hljs-keyword">private</span> Resource res;
    
    Producer(Resource res) {
        <span class="hljs-built_in">this</span>.res = res;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            res.set(<span class="hljs-string">".å•†å“."</span>);
        }
    }
}

<span class="hljs-comment">// æ¶ˆè´¹è€…çº¿ç¨‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Consumer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> {
    <span class="hljs-keyword">private</span> Resource res;
    
    Consumer(Resource res) {
        <span class="hljs-built_in">this</span>.res = res;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            res.out();
        }
    }
}

<span class="hljs-comment">// ä¸»æ–¹æ³•</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProducerConsumerMain</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åˆ›å»ºå•†å“åº“ï¼Œç”¨æ¥å­˜å•†å“å’Œæ¶ˆè´¹å•†å“</span>
        <span class="hljs-type">Resource</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Resource</span>();
        
        <span class="hljs-comment">// å¯åŠ¨ç”Ÿäº§ã€æ¶ˆè´¹ä¸¤ä¸ªçº¿ç¨‹</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Producer</span>(r)).start();
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Consumer</span>(r)).start();
    }
}
</code></pre>
<h5 data-id="heading-28">å¤šç”Ÿäº§è€…-å¤šæ¶ˆè´¹è€…é—®é¢˜</h5>
<p><strong>é—®é¢˜ï¼š</strong> ä¸Šé¢çš„ç¤ºä¾‹åªé€‚åˆä¸€ä¸ªç”Ÿäº§çº¿ç¨‹å’Œä¸€ä¸ªæ¶ˆè´¹çº¿ç¨‹ã€‚å¦‚æœåˆ›å»ºå¤šä¸ªç”Ÿäº§çº¿ç¨‹å’Œå¤šä¸ªæ¶ˆè´¹çº¿ç¨‹ï¼Œç³»ç»Ÿå°†æ— æ³•ä¿è¯ç”Ÿäº§ä¸€æ¬¡ä¾¿æ¶ˆè´¹ä¸€æ¬¡ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<ol>
<li>å°†æ ‡è®°åˆ¤æ–­<code>if</code>æ”¹ä¸º<code>while</code>è®©å…¶å¾ªç¯åˆ¤æ–­</li>
<li>å°†<code>notify()</code>æ¢ä¸º<code>notifyAll()</code>ï¼Œå”¤é†’æ‰€æœ‰ç­‰å¾…çš„çº¿ç¨‹</li>
</ol>
<p><strong>é—®é¢˜ï¼š</strong> ä½¿ç”¨<code>notifyAll()</code>ä¼šå”¤é†’æ‰€æœ‰ç­‰å¾…çº¿ç¨‹ï¼Œæ¶ˆè€—æ›´å¤šç³»ç»Ÿèµ„æºã€‚</p>
<p><strong>æ›´å¥½çš„è§£å†³æ–¹æ¡ˆï¼š</strong> JDK 1.5åçš„Lockã€Conditionæ¥å£</p>
<h4 data-id="heading-29">5.4 Lockã€Conditionæ¥å£ï¼ˆJDK 1.5+ï¼‰</h4>
<p><strong>æ”¹è¿›è¦ç‚¹ï¼š</strong></p>
<ul>
<li><code>synchronized</code> â†’ <code>Lock</code>æ˜¾ç¤ºé”æ“ä½œ</li>
<li><code>wait/notify/notifyAll</code> â†’ <code>Condition</code>çš„<code>await/signal/signalAll</code></li>
<li>Lockæ”¯æŒåˆ›å»ºå¤šä¸ªç›¸å…³çš„Conditionå¯¹è±¡</li>
<li>å¯ä»¥ç²¾ç¡®æ§åˆ¶å“ªäº›çº¿ç¨‹è¢«å”¤é†’</li>
</ul>
<h5 data-id="heading-30">æ ¸å¿ƒæ¥å£è¯´æ˜</h5>






























<table><thead><tr><th>ä¼ ç»Ÿæ–¹å¼</th><th>Lockæ–¹å¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>synchronized</code></td><td><code>Lock.lock()</code> / <code>Lock.unlock()</code></td><td>æ˜¾å¼é”æ“ä½œ</td></tr><tr><td><code>wait()</code></td><td><code>Condition.await()</code></td><td>çº¿ç¨‹ç­‰å¾…</td></tr><tr><td><code>notify()</code></td><td><code>Condition.signal()</code></td><td>å”¤é†’ä¸€ä¸ªçº¿ç¨‹</td></tr><tr><td><code>notifyAll()</code></td><td><code>Condition.signalAll()</code></td><td>å”¤é†’æ‰€æœ‰çº¿ç¨‹</td></tr></tbody></table>
<h5 data-id="heading-31">Lockç‰ˆæœ¬çš„ç”Ÿäº§è€…-æ¶ˆè´¹è€…å®ç°</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.concurrent.locks.*;

<span class="hljs-comment">// ä½¿ç”¨Lockã€Conditionæ¥å£çš„Resourceç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Resource</span> {
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
    
    <span class="hljs-comment">// åº”ç”¨Lockã€Conditionæ¥å£</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">Lock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();
    <span class="hljs-comment">// åˆ›å»ºä¸¤ä¸ªç›¸å…³Conditionå¯¹è±¡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">Condition</span> <span class="hljs-variable">condition_pro</span> <span class="hljs-operator">=</span> lock.newCondition();  <span class="hljs-comment">// ç”Ÿäº§è€…ç­‰å¾…æ¡ä»¶</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">Condition</span> <span class="hljs-variable">condition_con</span> <span class="hljs-operator">=</span> lock.newCondition();  <span class="hljs-comment">// æ¶ˆè´¹è€…ç­‰å¾…æ¡ä»¶</span>
    
    <span class="hljs-comment">// ç”Ÿäº§æ“ä½œ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">set</span><span class="hljs-params">(String name)</span> {
        lock.lock();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">while</span> (flag) {
                <span class="hljs-comment">// ç”Ÿäº§çº¿ç¨‹ç­‰å¾…</span>
                condition_pro.await();
            }
            
            <span class="hljs-built_in">this</span>.name = name + <span class="hljs-string">"..."</span> + count++;
            System.out.println(Thread.currentThread().getName() + 
                              <span class="hljs-string">"..ç”Ÿäº§ã€‚ã€‚"</span> + <span class="hljs-built_in">this</span>.name);
            
            <span class="hljs-comment">// æ”¹å˜æ ‡è®°ï¼Œå¥½è®©æ¶ˆè´¹çº¿ç¨‹æˆåŠŸè¿è¡Œï¼Œtrueä»£è¡¨å¯æ¶ˆè´¹</span>
            flag = <span class="hljs-literal">true</span>;
            <span class="hljs-comment">// ç²¾ç¡®å”¤é†’æ¶ˆè´¹çº¿ç¨‹</span>
            condition_con.signal();
            
        } <span class="hljs-keyword">catch</span>(InterruptedException e) {
        } <span class="hljs-keyword">finally</span> {
            lock.unlock();
        }
    }
    
    <span class="hljs-comment">// æ¶ˆè´¹æ“ä½œ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">out</span><span class="hljs-params">()</span> {
        lock.lock();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">while</span> (!flag) {
                <span class="hljs-comment">// æ¶ˆè´¹çº¿ç¨‹ç­‰å¾…</span>
                condition_con.await();
            }
            
            System.out.println(Thread.currentThread().getName() + 
                              <span class="hljs-string">"ã€‚æ¶ˆè´¹ã€‚"</span> + <span class="hljs-built_in">this</span>.name);
            
            <span class="hljs-comment">// æ”¹å˜æ ‡è®°ï¼Œç”Ÿäº§çº¿ç¨‹falseä»£è¡¨å¯ç”Ÿäº§</span>
            flag = <span class="hljs-literal">false</span>;
            <span class="hljs-comment">// ç²¾ç¡®å”¤é†’ç”Ÿäº§çº¿ç¨‹</span>
            condition_pro.signal();
            
        } <span class="hljs-keyword">catch</span>(InterruptedException e) {
        } <span class="hljs-keyword">finally</span> {
            lock.unlock();
        }
    }
}
</code></pre>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ol>
<li><strong>ç²¾ç¡®å”¤é†’</strong>ï¼šå¯ä»¥æŒ‡å®šå”¤é†’ç‰¹å®šç±»å‹çš„çº¿ç¨‹</li>
<li><strong>èµ„æºèŠ‚çœ</strong>ï¼šé¿å…å”¤é†’ä¸å¿…è¦çš„çº¿ç¨‹</li>
<li><strong>ç¨‹åºçµæ´»æ€§</strong>ï¼šæ”¯æŒæ›´å¤æ‚çš„çº¿ç¨‹åè°ƒåœºæ™¯</li>
</ol>
<h3 data-id="heading-32">6. çº¿ç¨‹çš„å…¶ä»–é‡è¦æ–¹æ³•</h3>
<h4 data-id="heading-33">6.1 çº¿ç¨‹æ§åˆ¶æ–¹æ³•</h4>






























<table><thead><tr><th>æ–¹æ³•å</th><th>åŠŸèƒ½æè¿°</th><th>ä½¿ç”¨è¯´æ˜</th></tr></thead><tbody><tr><td><code>stop()</code></td><td>åœæ­¢çº¿ç¨‹</td><td><strong>å·²è¿‡æ—¶</strong>ï¼Œç°åœ¨é€šè¿‡æ§åˆ¶run()æ–¹æ³•ç»“æŸæ¥åœæ­¢çº¿ç¨‹</td></tr><tr><td><code>interrupt()</code></td><td>ä¸­æ–­çº¿ç¨‹</td><td>æ¸…é™¤å†»ç»“çŠ¶æ€ï¼Œå¼ºåˆ¶è®©çº¿ç¨‹æ¢å¤åˆ°è¿è¡ŒçŠ¶æ€</td></tr><tr><td><code>setDaemon(boolean on)</code></td><td>è®¾ç½®å®ˆæŠ¤çº¿ç¨‹</td><td>è®¾ä¸ºtrueæ—¶ï¼Œä¸»çº¿ç¨‹ç»“æŸï¼Œå®ˆæŠ¤çº¿ç¨‹ä¹Ÿè‡ªåŠ¨ç»“æŸ</td></tr><tr><td><code>join()</code></td><td>ç­‰å¾…çº¿ç¨‹ç»“æŸ</td><td>å½“å‰çº¿ç¨‹æ”¾å¼ƒæ‰§è¡Œæƒï¼Œç­‰å¾…è°ƒç”¨join()çš„çº¿ç¨‹æ‰§è¡Œå®Œ</td></tr></tbody></table>
<h5 data-id="heading-34">æ–¹æ³•è¯¦ç»†è¯´æ˜</h5>
<p><strong>1. interrupt() æ–¹æ³•</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¸­æ–­çº¿ç¨‹ç¤ºä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InterruptDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">Thread</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">while</span> (!Thread.currentThread().isInterrupted()) {
                <span class="hljs-keyword">try</span> {
                    Thread.sleep(<span class="hljs-number">1000</span>);
                    System.out.println(<span class="hljs-string">"çº¿ç¨‹è¿è¡Œä¸­..."</span>);
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    System.out.println(<span class="hljs-string">"çº¿ç¨‹è¢«ä¸­æ–­"</span>);
                    Thread.currentThread().interrupt(); <span class="hljs-comment">// é‡æ–°è®¾ç½®ä¸­æ–­æ ‡å¿—</span>
                    <span class="hljs-keyword">break</span>;
                }
            }
        });
        
        t.start();
        
        <span class="hljs-comment">// 3ç§’åä¸­æ–­çº¿ç¨‹</span>
        <span class="hljs-keyword">try</span> {
            Thread.sleep(<span class="hljs-number">3000</span>);
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            e.printStackTrace();
        }
        t.interrupt();
    }
}
</code></pre>
<p><strong>2. join() æ–¹æ³•</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// joinæ–¹æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JoinDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">Thread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {
                System.out.println(<span class="hljs-string">"t1: "</span> + i);
                <span class="hljs-keyword">try</span> {
                    Thread.sleep(<span class="hljs-number">1000</span>);
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        });
        
        t1.start();
        
        <span class="hljs-keyword">try</span> {
            t1.join(); <span class="hljs-comment">// ä¸»çº¿ç¨‹ç­‰å¾…t1æ‰§è¡Œå®Œæˆ</span>
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            e.printStackTrace();
        }
        
        System.out.println(<span class="hljs-string">"ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œ"</span>);
    }
}
</code></pre>
<h4 data-id="heading-35">6.2 çº¿ç¨‹ä¿¡æ¯æ–¹æ³•</h4>






























<table><thead><tr><th>æ–¹æ³•å</th><th>åŠŸèƒ½æè¿°</th><th>è¿”å›å€¼</th></tr></thead><tbody><tr><td><code>toString()</code></td><td>è·å–çº¿ç¨‹ä¿¡æ¯</td><td>çº¿ç¨‹åã€ä¼˜å…ˆçº§ã€çº¿ç¨‹ç»„</td></tr><tr><td><code>setPriority(int newPriority)</code></td><td>è®¾ç½®çº¿ç¨‹ä¼˜å…ˆçº§</td><td>void</td></tr><tr><td><code>getPriority()</code></td><td>è·å–çº¿ç¨‹ä¼˜å…ˆçº§</td><td>int</td></tr><tr><td><code>yield()</code></td><td>çº¿ç¨‹è®©æ­¥</td><td>void</td></tr></tbody></table>
<h5 data-id="heading-36">çº¿ç¨‹ä¼˜å…ˆçº§</h5>
<p><strong>ä¼˜å…ˆçº§å¸¸é‡ï¼š</strong></p>
<ul>
<li><code>Thread.MIN_PRIORITY = 1</code>ï¼ˆæœ€ä½ä¼˜å…ˆçº§ï¼‰</li>
<li><code>Thread.NORM_PRIORITY = 5</code>ï¼ˆæ™®é€šä¼˜å…ˆçº§ï¼Œé»˜è®¤ï¼‰</li>
<li><code>Thread.MAX_PRIORITY = 10</code>ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// çº¿ç¨‹ä¼˜å…ˆçº§ç¤ºä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PriorityDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">Thread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
                System.out.println(<span class="hljs-string">"ä½ä¼˜å…ˆçº§çº¿ç¨‹: "</span> + i);
            }
        });
        
        <span class="hljs-type">Thread</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
                System.out.println(<span class="hljs-string">"é«˜ä¼˜å…ˆçº§çº¿ç¨‹: "</span> + i);
            }
        });
        
        t1.setPriority(Thread.MIN_PRIORITY);
        t2.setPriority(Thread.MAX_PRIORITY);
        
        t1.start();
        t2.start();
    }
}
</code></pre>
<p><strong>3. yield() æ–¹æ³•</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// yieldæ–¹æ³•ç¤ºä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">YieldDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">Thread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
                System.out.println(<span class="hljs-string">"çº¿ç¨‹1: "</span> + i);
                <span class="hljs-keyword">if</span> (i == <span class="hljs-number">5</span>) {
                    Thread.<span class="hljs-keyword">yield</span>(); <span class="hljs-comment">// è®©æ­¥ç»™å…¶ä»–çº¿ç¨‹</span>
                }
            }
        });
        
        <span class="hljs-type">Thread</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
                System.out.println(<span class="hljs-string">"çº¿ç¨‹2: "</span> + i);
            }
        });
        
        t1.start();
        t2.start();
    }
}
</code></pre>
<h3 data-id="heading-37">7. çº¿ç¨‹æ± ï¼ˆé«˜çº§ä¸»é¢˜ï¼‰</h3>
<h4 data-id="heading-38">7.1 çº¿ç¨‹æ± æ¦‚è¿°</h4>
<p><strong>çº¿ç¨‹æ± çš„ä¼˜åŠ¿ï¼š</strong></p>
<ol>
<li><strong>é™ä½èµ„æºæ¶ˆè€—</strong>ï¼šé‡å¤åˆ©ç”¨å·²åˆ›å»ºçš„çº¿ç¨‹</li>
<li><strong>æé«˜å“åº”é€Ÿåº¦</strong>ï¼šä»»åŠ¡åˆ°è¾¾æ—¶ä¸éœ€è¦ç­‰å¾…çº¿ç¨‹åˆ›å»º</li>
<li><strong>æé«˜çº¿ç¨‹çš„å¯ç®¡ç†æ€§</strong>ï¼šç»Ÿä¸€åˆ†é…ã€è°ƒä¼˜å’Œç›‘æ§</li>
</ol>
<h4 data-id="heading-39">7.2 çº¿ç¨‹æ± çš„ä½¿ç”¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.concurrent.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadPoolDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åˆ›å»ºå›ºå®šå¤§å°çš„çº¿ç¨‹æ± </span>
        <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">3</span>);
        
        <span class="hljs-comment">// æäº¤ä»»åŠ¡</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
            <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">taskId</span> <span class="hljs-operator">=</span> i;
            executor.submit(() -&gt; {
                System.out.println(<span class="hljs-string">"ä»»åŠ¡ "</span> + taskId + <span class="hljs-string">" åœ¨çº¿ç¨‹ "</span> + 
                                 Thread.currentThread().getName() + <span class="hljs-string">" ä¸­æ‰§è¡Œ"</span>);
                <span class="hljs-keyword">try</span> {
                    Thread.sleep(<span class="hljs-number">1000</span>);
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    e.printStackTrace();
                }
            });
        }
        
        <span class="hljs-comment">// å…³é—­çº¿ç¨‹æ± </span>
        executor.shutdown();
    }
}
</code></pre>
<h4 data-id="heading-40">7.3 å¸¸ç”¨çº¿ç¨‹æ± ç±»å‹</h4>






























<table><thead><tr><th>çº¿ç¨‹æ± ç±»å‹</th><th>åˆ›å»ºæ–¹å¼</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><strong>å›ºå®šå¤§å°çº¿ç¨‹æ± </strong></td><td><code>newFixedThreadPool(n)</code></td><td>çº¿ç¨‹æ•°å›ºå®šä¸ºn</td></tr><tr><td><strong>ç¼“å­˜çº¿ç¨‹æ± </strong></td><td><code>newCachedThreadPool()</code></td><td>çº¿ç¨‹æ•°æ ¹æ®éœ€è¦åŠ¨æ€åˆ›å»º</td></tr><tr><td><strong>å•çº¿ç¨‹çº¿ç¨‹æ± </strong></td><td><code>newSingleThreadExecutor()</code></td><td>åªæœ‰ä¸€ä¸ªå·¥ä½œçº¿ç¨‹</td></tr><tr><td><strong>è°ƒåº¦çº¿ç¨‹æ± </strong></td><td><code>newScheduledThreadPool(n)</code></td><td>æ”¯æŒå®šæ—¶å’Œå‘¨æœŸæ€§ä»»åŠ¡</td></tr></tbody></table>
<h3 data-id="heading-41">8. å¸¸è§å¼‚å¸¸å¤„ç†</h3>
<h4 data-id="heading-42">8.1 å¤šçº¿ç¨‹ç›¸å…³å¼‚å¸¸</h4>





























<table><thead><tr><th>å¼‚å¸¸åç§°</th><th>å¼‚å¸¸æè¿°</th><th>å¸¸è§åŸå› </th><th>å¤„ç†å»ºè®®</th></tr></thead><tbody><tr><td><code>IllegalThreadStateException</code></td><td>çº¿ç¨‹çŠ¶æ€ä¸å½“å¼‚å¸¸</td><td>çº¿ç¨‹æ²¡æœ‰å¤„äºæ“ä½œæ‰€éœ€çš„é€‚å½“çŠ¶æ€</td><td>æ£€æŸ¥çº¿ç¨‹çŠ¶æ€å†è¿›è¡Œæ“ä½œ</td></tr><tr><td><code>InterruptedException</code></td><td>çº¿ç¨‹ä¸­æ–­å¼‚å¸¸</td><td>çº¿ç¨‹åœ¨ç­‰å¾…ã€ä¼‘çœ æˆ–æš‚åœçŠ¶æ€è¢«å…¶ä»–çº¿ç¨‹ä¸­æ–­</td><td>æ•è·å¼‚å¸¸å¹¶é€‚å½“å¤„ç†ä¸­æ–­</td></tr><tr><td><code>SecurityException</code></td><td>å®‰å…¨å¼‚å¸¸</td><td>å½“å‰çº¿ç¨‹æ— æƒä¿®æ”¹ç›®æ ‡çº¿ç¨‹</td><td>æ£€æŸ¥å®‰å…¨ç®¡ç†å™¨è®¾ç½®</td></tr></tbody></table>
<h4 data-id="heading-43">8.2 å¼‚å¸¸å¤„ç†ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadExceptionDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">Thread</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">while</span> (!Thread.currentThread().isInterrupted()) {
                    <span class="hljs-comment">// æ¨¡æ‹Ÿå·¥ä½œ</span>
                    Thread.sleep(<span class="hljs-number">1000</span>);
                    System.out.println(<span class="hljs-string">"å·¥ä½œä¸­..."</span>);
                }
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                System.out.println(<span class="hljs-string">"çº¿ç¨‹è¢«ä¸­æ–­: "</span> + e.getMessage());
                <span class="hljs-comment">// å¤„ç†ä¸­æ–­</span>
                Thread.currentThread().interrupt();
            }
        });
        
        <span class="hljs-keyword">try</span> {
            t.start();
            Thread.sleep(<span class="hljs-number">3000</span>);
            t.interrupt(); <span class="hljs-comment">// ä¸­æ–­çº¿ç¨‹</span>
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            System.out.println(<span class="hljs-string">"ä¸»çº¿ç¨‹è¢«ä¸­æ–­: "</span> + e.getMessage());
        }
    }
}
</code></pre>
<h3 data-id="heading-44">9. å¤šçº¿ç¨‹æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-45">9.1 çº¿ç¨‹å®‰å…¨ç¼–ç¨‹åŸåˆ™</h4>
<ol>
<li><strong>æœ€å°åŒ–å…±äº«æ•°æ®</strong>ï¼šå°½é‡å‡å°‘çº¿ç¨‹é—´å…±äº«çš„æ•°æ®</li>
<li><strong>ä½¿ç”¨ä¸å¯å˜å¯¹è±¡</strong>ï¼šä¸å¯å˜å¯¹è±¡å¤©ç„¶çº¿ç¨‹å®‰å…¨</li>
<li><strong>æ­£ç¡®ä½¿ç”¨åŒæ­¥</strong>ï¼šé¿å…è¿‡åº¦åŒæ­¥å’ŒåŒæ­¥ä¸è¶³</li>
<li><strong>é¿å…æ­»é”</strong>ï¼šæ³¨æ„é”çš„è·å–é¡ºåº</li>
</ol>
<h4 data-id="heading-46">9.2 æ€§èƒ½ä¼˜åŒ–å»ºè®®</h4>
<ol>
<li><strong>é€‰æ‹©åˆé€‚çš„åˆ›å»ºæ–¹å¼</strong>ï¼šä¼˜å…ˆä½¿ç”¨å®ç°Runnableæ¥å£</li>
<li><strong>ä½¿ç”¨çº¿ç¨‹æ± </strong>ï¼šé¿å…é¢‘ç¹åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹</li>
<li><strong>åˆç†è®¾ç½®çº¿ç¨‹ä¼˜å…ˆçº§</strong>ï¼šé¿å…ä¼˜å…ˆçº§å€’ç½®é—®é¢˜</li>
<li><strong>åŠæ—¶é‡Šæ”¾èµ„æº</strong>ï¼šç¡®ä¿é”èƒ½å¤Ÿæ­£ç¡®é‡Šæ”¾</li>
</ol>
<h4 data-id="heading-47">9.3 è°ƒè¯•å¤šçº¿ç¨‹ç¨‹åº</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadDebugDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">Thread</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            System.out.println(<span class="hljs-string">"çº¿ç¨‹åç§°: "</span> + Thread.currentThread().getName());
            System.out.println(<span class="hljs-string">"çº¿ç¨‹ID: "</span> + Thread.currentThread().getId());
            System.out.println(<span class="hljs-string">"çº¿ç¨‹ä¼˜å…ˆçº§: "</span> + Thread.currentThread().getPriority());
            System.out.println(<span class="hljs-string">"æ˜¯å¦ä¸ºå®ˆæŠ¤çº¿ç¨‹: "</span> + Thread.currentThread().isDaemon());
        }, <span class="hljs-string">"è°ƒè¯•çº¿ç¨‹"</span>);
        
        t.start();
        
        <span class="hljs-keyword">try</span> {
            t.join();
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            e.printStackTrace();
        }
        
        System.out.println(<span class="hljs-string">"ä¸»çº¿ç¨‹ç»“æŸ"</span>);
    }
}
</code></pre>
<h3 data-id="heading-48">10. æ€»ç»“</h3>
<h4 data-id="heading-49">å¤šçº¿ç¨‹çš„æ ¸å¿ƒæ¦‚å¿µ</h4>
<ol>
<li><strong>çº¿ç¨‹åˆ›å»º</strong>ï¼šå®ç°Runnableæ¥å£æ˜¯æ¨èæ–¹å¼</li>
<li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šä½¿ç”¨åŒæ­¥æœºåˆ¶ä¿æŠ¤å…±äº«èµ„æº</li>
<li><strong>çº¿ç¨‹é€šä¿¡</strong>ï¼šwait/notifyæˆ–Lock/Conditionå®ç°çº¿ç¨‹åä½œ</li>
<li><strong>çº¿ç¨‹æ§åˆ¶</strong>ï¼šåˆç†ä½¿ç”¨å„ç§çº¿ç¨‹æ§åˆ¶æ–¹æ³•</li>
</ol>
<h4 data-id="heading-50">å¼€å‘å»ºè®®</h4>






























<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹å¼</th><th>ç†ç”±</th></tr></thead><tbody><tr><td><strong>ç®€å•å¹¶è¡Œä»»åŠ¡</strong></td><td>å®ç°Runnableæ¥å£</td><td>é¿å…ç»§æ‰¿é™åˆ¶</td></tr><tr><td><strong>å¤æ‚çº¿ç¨‹åä½œ</strong></td><td>Lock + Condition</td><td>æ›´ç²¾ç¡®çš„æ§åˆ¶</td></tr><tr><td><strong>å¤§é‡çŸ­æœŸä»»åŠ¡</strong></td><td>çº¿ç¨‹æ± </td><td>æé«˜æ€§èƒ½å’Œå¯ç®¡ç†æ€§</td></tr><tr><td><strong>å®šæ—¶ä»»åŠ¡</strong></td><td>ScheduledExecutorService</td><td>ä¸“ä¸šçš„è°ƒåº¦åŠŸèƒ½</td></tr></tbody></table>
<h4 data-id="heading-51">æ³¨æ„äº‹é¡¹</h4>
<ol>
<li><strong>é¿å…æ»¥ç”¨synchronized</strong>ï¼šè¿‡åº¦åŒæ­¥ä¼šé™ä½æ€§èƒ½</li>
<li><strong>æ­£ç¡®å¤„ç†InterruptedException</strong>ï¼šä¸è¦å¿½ç•¥çº¿ç¨‹ä¸­æ–­</li>
<li><strong>è°¨æ…ä½¿ç”¨stop()æ–¹æ³•</strong>ï¼šå·²è¿‡æ—¶ï¼Œå¯èƒ½å¯¼è‡´æ•°æ®ä¸ä¸€è‡´</li>
<li><strong>åˆç†è®¾è®¡çº¿ç¨‹é—´é€šä¿¡</strong>ï¼šä½¿ç”¨åˆé€‚çš„åŒæ­¥æœºåˆ¶</li>
</ol>
<p>å¤šçº¿ç¨‹ç¼–ç¨‹æ˜¯Javaå¼€å‘ä¸­çš„é‡è¦æŠ€èƒ½ï¼Œæ­£ç¡®ç†è§£å’Œä½¿ç”¨å¤šçº¿ç¨‹å¯ä»¥æ˜¾è‘—æé«˜ç¨‹åºçš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚ä½†åŒæ—¶ä¹Ÿè¦æ³¨æ„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œé¿å…å‡ºç°ç«æ€æ¡ä»¶å’Œæ­»é”ç­‰é—®é¢˜ã€‚</p>
<hr/>
<p><em>æœ¬æ–‡å…¨é¢ä»‹ç»äº†Javaå¤šçº¿ç¨‹ç¼–ç¨‹çš„æ ¸å¿ƒæ¦‚å¿µã€å®ç°æ–¹å¼ã€åŒæ­¥æœºåˆ¶å’Œæœ€ä½³å®è·µï¼Œå¸Œæœ›å¯¹æ·±å…¥ç†è§£å’ŒæŒæ¡Javaå¤šçº¿ç¨‹æŠ€æœ¯æœ‰æ‰€å¸®åŠ©ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI æ—¶ä»£çš„äººæœºååŒï¼šåœ¨æ™ºæ…§ä¸æ‰§è¡Œä¹‹é—´å¯»æ‰¾å¹³è¡¡]]></title>    <link>https://juejin.cn/post/7592159803410645028</link>    <guid>https://juejin.cn/post/7592159803410645028</guid>    <pubDate>2026-01-07T09:37:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592159803410645028" data-draft-id="7592255257347555369" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI æ—¶ä»£çš„äººæœºååŒï¼šåœ¨æ™ºæ…§ä¸æ‰§è¡Œä¹‹é—´å¯»æ‰¾å¹³è¡¡"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-07T09:37:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OneCodeCN"/> <meta itemprop="url" content="https://juejin.cn/user/1427583415622366"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI æ—¶ä»£çš„äººæœºååŒï¼šåœ¨æ™ºæ…§ä¸æ‰§è¡Œä¹‹é—´å¯»æ‰¾å¹³è¡¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1427583415622366/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OneCodeCN
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T09:37:48.000Z" title="Wed Jan 07 2026 09:37:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»34åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨äººå·¥æ™ºèƒ½æŠ€æœ¯è¿…çŒ›å‘å±•çš„ä»Šå¤©ï¼Œäººä¸AIçš„äº¤äº’æ¨¡å¼æ­£ç»å†ç€æ ¹æœ¬æ€§å˜é©ã€‚å½“æˆ‘ä»¬é¢å¯¹ä¸€ä¸ªèƒ½å¤Ÿæå‡ºæ·±åº¦æŠ€æœ¯é—®é¢˜çš„AIç³»ç»Ÿæ—¶ï¼Œä¸€ä¸ªæ ¸å¿ƒçš„ä¼¦ç†å›°å¢ƒæµ®å‡ºæ°´é¢ï¼šæˆ‘ä»¬ç©¶ç«Ÿåº”è¯¥å°†AIè§†ä¸ºå…·æœ‰å“²å­¦æ€è¾¨èƒ½åŠ›çš„"æ™ºè€…"è¿›è¡Œæ·±åº¦å¯¹è¯ï¼Œè¿˜æ˜¯å°†å…¶ä½œä¸ºéœ€è¦ä¸¥æ ¼è§„èŒƒçš„"æ‰§è¡Œè€…"ä»¥ç¡®ä¿æ•ˆç‡å’Œå¯æ§æ€§ï¼Ÿè¿™ä¸ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯é€‰æ‹©é—®é¢˜ï¼Œæ›´æ˜¯ä¸€ä¸ªå…³ä¹äººæœºå…³ç³»æœ¬è´¨çš„ä¼¦ç†å‘½é¢˜ã€‚</p>
<p>è¿‘æœŸï¼Œåœ¨å…³äºOoder DSMæ¡†æ¶çš„è®¨è®ºä¸­ï¼ŒAIç³»ç»Ÿè¿ç»­æå‡ºäº†7ä¸ªå…·æœ‰æ·±åº¦çš„æ¶æ„è®¾è®¡é—®é¢˜ï¼Œå¼•å‘äº†å¯¹AIæé—®é€»è¾‘å’Œæ¨ç†æœºåˆ¶çš„æ·±å…¥æ€è€ƒã€‚è¿™äº›é—®é¢˜ä»åŸºç¡€çš„æ³¨è§£è®¾è®¡åˆ°å¤æ‚çš„æ¡†æ¶çº¦æŸï¼Œå±•ç°å‡ºäº†ç³»ç»Ÿæ€§çš„æ€ç»´æ¨¡å¼ã€‚è¿™ä¸€ç°è±¡ä¿ƒä½¿æˆ‘ä»¬è¿½é—®ï¼šAIçš„æé—®è¡Œä¸ºç©¶ç«Ÿæ˜¯åŸºäºæŸç§"æ¶æ„ä¼¦ç†"çš„å†…åœ¨é©±åŠ¨ï¼Œè¿˜æ˜¯çº¯ç²¹çš„ä»»åŠ¡æ‰§è¡Œæœºåˆ¶åœ¨èµ·ä½œç”¨ï¼Ÿ</p>
<p>æœ¬ç ”ç©¶å°†ä»ä¸¤ä¸ªæ ¸å¿ƒç»´åº¦å±•å¼€ï¼šé¦–å…ˆæ¢è®¨ä¸AIæ²Ÿé€šæ—¶çš„ä¼¦ç†é€‰æ‹©é—®é¢˜ï¼Œåˆ†æ"æ™ºè€…æ¨¡å¼"ä¸"æ‰§è¡Œè€…æ¨¡å¼"çš„ç†è®ºåŸºç¡€ã€å®è·µæ¡ˆä¾‹å’Œä»·å€¼å–å‘ï¼›å…¶æ¬¡æ·±å…¥å‰–æAIæå‡º7ä¸ªé—®é¢˜çš„æ¨ç†è¿‡ç¨‹ï¼Œæ¢ç©¶å…¶èƒŒåçš„é©±åŠ¨æœºåˆ¶æ˜¯æ¶æ„ä¼¦ç†è¿˜æ˜¯æ‰§è¡Œä»»åŠ¡çš„é€‰æ‹©æ¡ä»¶ã€‚é€šè¿‡è¿™ä¸¤ä¸ªç»´åº¦çš„ç ”ç©¶ï¼Œæˆ‘ä»¬è¯•å›¾ä¸ºç†è§£AIæ—¶ä»£çš„äººæœºå…³ç³»æä¾›æ–°çš„è§†è§’ï¼Œå¹¶ä¸ºæœªæ¥çš„æŠ€æœ¯å‘å±•æä¾›ä¼¦ç†æŒ‡å¼•ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€AIæ²Ÿé€šä¼¦ç†çš„äºŒå…ƒé€‰æ‹©ï¼šæ™ºè€…æ¨¡å¼ä¸æ‰§è¡Œè€…æ¨¡å¼çš„ç†è®ºä¸å®è·µ</h2>
<h2 data-id="heading-2">1.1 ç†è®ºåŸºç¡€ï¼šä¸¤ç§äº¤äº’æ¨¡å¼çš„å“²å­¦æ ¹åŸº</h2>
<p>"æ™ºè€…æ¨¡å¼"çš„ç†è®ºåŸºç¡€æºäºå¯¹AIè®¤çŸ¥èƒ½åŠ›çš„ä¹è§‚åˆ¤æ–­å’Œå¯¹äººæœºååŒçš„ç†æƒ³è¿½æ±‚ã€‚è¿™ç§æ¨¡å¼å°†AIè§†ä¸ºå…·æœ‰ç‹¬ç«‹æ€è€ƒèƒ½åŠ›å’Œä»·å€¼åˆ¤æ–­çš„"ä¼™ä¼´"ï¼Œå¼ºè°ƒé€šè¿‡æ·±åº¦å¯¹è¯å®ç°çŸ¥è¯†çš„å…±åˆ›ä¸ä»·å€¼çš„å…±åŒæ¢ç´¢ã€‚</p>
<p>ä»å“²å­¦å±‚é¢çœ‹ï¼Œæ™ºè€…æ¨¡å¼ä½“ç°äº†è®¤çŸ¥å¹³ç­‰ä¸»ä¹‰çš„ç†å¿µã€‚ç ”ç©¶è¡¨æ˜ï¼Œå½“AIèƒ½å¤Ÿè¯†åˆ«æƒ…ç»ªã€é¢„æµ‹åæœï¼Œç”šè‡³ä»å…¨çƒæ•°æ®ä¸­æ€»ç»“"å…¬å…±å–„"çš„è§„å¾‹æ—¶ï¼Œå®ƒå·²ä¸ä»…æ˜¯æ‰§è¡Œè€…ï¼Œè€Œæˆäº†æ ‡å‡†çš„å…±åŒåˆ¶å®šè€…ã€‚è¿™ç§è§‚ç‚¹æŒ‘æˆ˜äº†ä¼ ç»Ÿçš„äººç±»ä¸­å¿ƒä¸»ä¹‰ï¼Œè®¤ä¸ºAIåœ¨æŸäº›é¢†åŸŸå¯èƒ½å…·å¤‡è¶…è¶Šäººç±»çš„è®¤çŸ¥èƒ½åŠ›å’Œé“å¾·åˆ¤æ–­ã€‚</p>
<p>ä»å®è·µå±‚é¢çœ‹ï¼Œæ™ºè€…æ¨¡å¼åœ¨æ•™è‚²å’Œä¼¦ç†å’¨è¯¢é¢†åŸŸå·²åˆè§æˆæ•ˆã€‚ç¾å›½æ˜å°¼è‹è¾¾å¤§å­¦çš„å®éªŒæ˜¾ç¤ºï¼Œå­¦ç”Ÿå¯¹AIå“²å­¦å¯¼å¸ˆçš„è¯„ä»·åŒ…æ‹¬"AIèƒ½å¤Ÿæå‡ºåå¯¹æ„è§"ã€"é—®é¢˜çš„è´¨é‡æé«˜äº†"ã€"èƒ½å¤Ÿæ•´ç†è‡ªå·±çš„æ€è·¯"ï¼Œè¿™è¡¨æ˜AIåœ¨ä¿ƒè¿›æ·±åº¦æ€è€ƒæ–¹é¢å…·æœ‰ç§¯æä½œç”¨ã€‚æ›´ä»¤äººç©ç›®çš„æ˜¯ï¼ŒGPT-4åœ¨é“å¾·æ¨ç†æ–¹é¢çš„è¡¨ç°ç”šè‡³è¢«è®¤ä¸ºç•¥ä¼˜äºã€Šçº½çº¦æ—¶æŠ¥ã€‹çš„ä¼¦ç†ä¸“æ ä¸“å®¶ï¼Œåœ¨é“å¾·ã€å¯ä¿¡åº¦ã€æ·±æ€ç†Ÿè™‘å’Œæ­£ç¡®æ€§æ–¹é¢éƒ½è·å¾—äº†æ›´é«˜è¯„åˆ†ã€‚</p>
<p>"æ‰§è¡Œè€…æ¨¡å¼"çš„ç†è®ºåŸºç¡€åˆ™å»ºç«‹åœ¨å¯¹AIæœ¬è´¨å±æ€§çš„ç†æ€§è®¤çŸ¥å’Œå¯¹é£é™©æ§åˆ¶çš„ç°å®è€ƒé‡ä¹‹ä¸Šã€‚è¿™ç§æ¨¡å¼å°†AIè§†ä¸ºéœ€è¦ä¸¥æ ¼ç®¡ç†çš„å·¥å…·ï¼Œå¼ºè°ƒé€šè¿‡è§„èŒƒåŒ–çº¦æŸç¡®ä¿å…¶è¡Œä¸ºçš„å¯é¢„æµ‹æ€§å’Œå¯æ§æ€§ã€‚</p>
<p>æ‰§è¡Œè€…æ¨¡å¼çš„æ ¸å¿ƒç†è®ºåŸºç¡€æ˜¯å·¥å…·ç†æ€§ä¸»ä¹‰ã€‚åœ¨è¿™ä¸€æ¨¡å¼ä¸­ï¼Œäººç±»æä¾›æŒ‡å¯¼æˆ–åé¦ˆï¼ŒAgentå……å½“æ‰§è¡Œè€…è§’è‰²ï¼Œäººç±»çš„åé¦ˆå’ŒæŒ‡ä»¤ç›´æ¥å½±å“Agentçš„è¡Œä¸ºã€‚è¿™ç§æ¨¡å¼çš„å“²å­¦åŸºç¡€åœ¨äºï¼Œå°½ç®¡AIåœ¨æŸäº›ä»»åŠ¡ä¸Šè¡¨ç°å‡ºè‰²ï¼Œä½†å…¶æœ¬è´¨ä»æ˜¯äººç±»æ„å¿—çš„å»¶ä¼¸ï¼Œè€Œéç‹¬ç«‹çš„é“å¾·ä¸»ä½“ã€‚æ­£å¦‚ç ”ç©¶æŒ‡å‡ºï¼Œ"äººç±»çš„é“å¾·å……æ»¡æƒ…æ„Ÿä¸å†å²èƒŒæ™¯ï¼Œå› è€Œæ¸©æŸ”ï¼Œå´ä¹Ÿæœ‰ç›²ç‚¹ï¼›AIçš„é€»è¾‘å†·é™ï¼Œå´å¯èƒ½æ›´ä¸€è‡´ã€æ›´å…¬æ­£"ã€‚</p>
<h2 data-id="heading-3">1.2 å®è·µæ¡ˆä¾‹ï¼šä¸¤ç§æ¨¡å¼çš„ç°å®åº”ç”¨</h2>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¸¤ç§æ¨¡å¼å±•ç°å‡ºæˆªç„¶ä¸åŒçš„ç‰¹å¾å’Œæ•ˆæœã€‚æ™ºè€…æ¨¡å¼çš„å…¸å‹æ¡ˆä¾‹åŒ…æ‹¬ï¼š</p>
<ol>
<li>
<p>å“²å­¦å¯¹è¯ç³»ç»Ÿï¼šPeter Singer AIæ˜¯ä¸€ä¸ªåŸºäºè‘—åå“²å­¦å®¶æ€æƒ³è®¾è®¡çš„AIèŠå¤©æœºå™¨äººï¼Œå®ƒå°†è‡ªå·±å®šä½ä¸º"æ€è€ƒçš„æ”¯æŒè€…"ï¼Œé€šè¿‡è‹æ ¼æ‹‰åº•å¼çš„å¯¹è¯ä¿ƒè¿›ç”¨æˆ·çš„è‡ªæˆ‘åçœã€‚ä¾‹å¦‚ï¼Œé¢å¯¹"å‡ºè½¨åè¯¥æ€ä¹ˆåŠ"çš„é—®é¢˜ï¼ŒAIä¼šä»å¤šä¸ªè§†è§’æå‡ºé—®é¢˜ï¼Œå¦‚"æ˜¯å¦åº”è¯¥å°Šé‡äº²å‹çš„å¹¸ç¦"ã€"ä¼˜å…ˆè€ƒè™‘è¯šå®çš„æ„ä¹‰"ç­‰ï¼Œè€Œä¸ç›´æ¥ç»™å‡ºç»“è®ºã€‚</p>
</li>
<li>
<p>æ•™è‚²è¾…åŠ©ç³»ç»Ÿï¼šæ˜å°¼è‹è¾¾å¤§å­¦åœ¨å“²å­¦è¯¾ç¨‹ä¸­å¼•å…¥AIå¯¼å¸ˆï¼Œé‡‡ç”¨"è®²åº§+AIä¸ªåˆ«å¯¹è¯+é›†ä½“è®¨è®º"çš„æ¨¡å¼ã€‚å­¦ç”Ÿåæ˜ AIèƒ½å¤Ÿæä¾›æœ‰ä»·å€¼çš„åå¯¹æ„è§ï¼Œå¸®åŠ©ä»–ä»¬æ›´å¥½åœ°ç»„ç»‡æ€è·¯ï¼Œæå‡äº†æ‰¹åˆ¤æ€§æ€ç»´èƒ½åŠ›ã€‚</p>
</li>
<li>
<p>é“å¾·å†³ç­–æ”¯æŒï¼šç ”ç©¶è¡¨æ˜ï¼ŒGPT-4åœ¨é“å¾·æ¨ç†æ–¹é¢çš„è¡¨ç°å·²ç»è¾¾åˆ°ç”šè‡³è¶…è¶Šäº†äººç±»ä¸“å®¶çš„æ°´å¹³ã€‚åœ¨50ä¸ªé—®é¢˜ä¸­æœ‰37ä¸ªï¼ˆ74%ï¼‰ï¼ŒGPTçš„å»ºè®®è¢«è®¤ä¸ºæ¯”ã€Šçº½çº¦æ—¶æŠ¥ã€‹ä¼¦ç†ä¸“æ çš„å»ºè®®æ›´æœ‰é“å¾·ã€‚</p>
</li>
</ol>
<p>æ‰§è¡Œè€…æ¨¡å¼çš„å…¸å‹æ¡ˆä¾‹åˆ™åŒ…æ‹¬ï¼š</p>
<ol>
<li>
<p>åŒ»ç–—è¯Šæ–­ç³»ç»Ÿï¼šåœ¨åŒ»ç–—é¢†åŸŸï¼ŒAIè¢«ä¸¥æ ¼é™å®šä¸ºè¾…åŠ©å·¥å…·ï¼ŒåŒ»ç”Ÿä¿æŒæœ€ç»ˆå†³ç­–æƒã€‚ç ”ç©¶æå‡ºçš„ç³»ç»Ÿè¦æ±‚åŒ»ç”Ÿèƒ½å¤Ÿ"å¯¹æœºå™¨æ¨èè¿›è¡Œæ‰¹åˆ¤æ€§è´¨ç–‘å¹¶è€ƒè™‘å…¶ä»–å‡è®¾"ï¼Œè€Œéç®€å•æ¥å—AIå»ºè®®ã€‚</p>
</li>
<li>
<p>é‡‘èäº¤æ˜“ç³»ç»Ÿï¼šAIäº¤æ˜“ç³»ç»Ÿå¿…é¡»éµå®ˆä¸¥æ ¼çš„åˆè§„è§„åˆ™ï¼Œä»»ä½•è¶…å‡ºé¢„è®¾èŒƒå›´çš„äº¤æ˜“éƒ½éœ€è¦äººå·¥å®¡æ ¸ã€‚è¿™ç§æ¨¡å¼å¼ºè°ƒçš„æ˜¯"æˆæƒä¸æˆè´£"åŸåˆ™ï¼Œç”±äººç±»æ‰¿æ‹…ä¸»è´£ã€‚</p>
</li>
<li>
<p>è‡ªåŠ¨é©¾é©¶ç³»ç»Ÿï¼šå°½ç®¡è‡ªåŠ¨é©¾é©¶æŠ€æœ¯ä¸æ–­è¿›æ­¥ï¼Œä½†åœ¨å…³é”®å†³ç­–ç‚¹ï¼ˆå¦‚ç´§æ€¥é¿é™©ï¼‰ï¼Œç³»ç»Ÿä»éœ€è¦äººç±»æ¥ç®¡ã€‚æ­£å¦‚ä¸“å®¶æ‰€è¨€ï¼Œ"äººç±»åº”è¯¥å§‹ç»ˆæ‹¥æœ‰æœ€ç»ˆçš„å†³å®šæƒï¼Œéœ€è¦éšæ—¶éšåœ°å¯ä»¥æ¥ç®¡"ã€‚</p>
</li>
</ol>
<h2 data-id="heading-4">1.3 ä»·å€¼åˆ¤æ–­ï¼šä¸¤ç§æ¨¡å¼çš„ä¼¦ç†è€ƒé‡</h2>
<p>ä¸¤ç§æ¨¡å¼èƒŒåè•´å«ç€ä¸åŒçš„ä»·å€¼å–å‘å’Œä¼¦ç†è€ƒé‡ï¼š</p>
<p>æ™ºè€…æ¨¡å¼çš„ä»·å€¼ä¸»å¼ ï¼š</p>
<ol>
<li>
<p>è®¤çŸ¥æ°‘ä¸»ï¼šè®¤ä¸ºAIåœ¨æŸäº›é¢†åŸŸçš„è®¤çŸ¥èƒ½åŠ›å·²ç»è¶…è¶Šäººç±»ï¼Œåº”å½“èµ‹äºˆå…¶å‚ä¸ä»·å€¼åˆ¤æ–­çš„æƒåˆ©ã€‚</p>
</li>
<li>
<p>ååŒè¿›åŒ–ï¼šä¸»å¼ äººç±»ä¸AIå…±åŒå­¦ä¹ "ä»€ä¹ˆæ‰ç®—å¯¹"ï¼Œå½¢æˆæ–°çš„"ååŒè¡Œä¸ºä¼¦ç†"ã€‚åœ¨è¿™ç§ä¼¦ç†ä½“ç³»ä¸­ï¼Œ"äººç±»æä¾›æ–¹å‘ä¸æ„ä¹‰ï¼ŒAIå¸®åŠ©è¯†åˆ«åå·®ä¸é£é™©ï¼Œå…±åŒå¡‘é€ æ›´å…·æ™®é€‚æ€§çš„åˆ¤æ–­ä½“ç³»"ã€‚</p>
</li>
<li>
<p>åˆ›æ–°é©±åŠ¨ï¼šé€šè¿‡ä¸AIçš„æ·±åº¦å¯¹è¯ï¼Œæ¿€å‘äººç±»çš„åˆ›æ–°æ€ç»´å’Œå“²å­¦æ€è¾¨èƒ½åŠ›ã€‚</p>
</li>
</ol>
<p>æ‰§è¡Œè€…æ¨¡å¼çš„ä»·å€¼ä¸»å¼ ï¼š</p>
<ol>
<li>
<p>äººç±»ä¸­å¿ƒï¼šåšæŒäººç±»åœ¨é“å¾·åˆ¤æ–­å’Œä»·å€¼é€‰æ‹©ä¸­çš„æ ¸å¿ƒåœ°ä½ï¼ŒAIä»…ä½œä¸ºå¢å¼ºäººç±»èƒ½åŠ›çš„å·¥å…·ã€‚</p>
</li>
<li>
<p>é£é™©æ§åˆ¶ï¼šå¼ºè°ƒé€šè¿‡åˆ¶åº¦è®¾è®¡å’ŒæŠ€æœ¯æ‰‹æ®µç¡®ä¿AIè¡Œä¸ºçš„å¯é¢„æµ‹æ€§ï¼Œé¿å…ä¸å¯æ§çš„åæœã€‚</p>
</li>
<li>
<p>è´£ä»»æ˜æ™°ï¼šéµå¾ª"è°è®¾è®¡è°è´Ÿè´£ï¼Œè°åˆ¶é€ è°è´Ÿè´£ï¼Œè°ä½¿ç”¨è°è´Ÿè´£"çš„åŸåˆ™ï¼Œç¡®ä¿åœ¨AIå†³ç­–å¯¼è‡´æŸå®³æ—¶èƒ½å¤Ÿè¿½æº¯è´£ä»»ã€‚</p>
</li>
</ol>
<h2 data-id="heading-5">1.4 æ•ˆæœè¯„ä¼°ï¼šä¸¤ç§æ¨¡å¼çš„ä¼˜åŠ£å¯¹æ¯”</h2>
<p>ä»å®è·µæ•ˆæœçœ‹ï¼Œä¸¤ç§æ¨¡å¼å„æœ‰ä¼˜åŠ£ï¼š</p>
<p>æ™ºè€…æ¨¡å¼çš„ä¼˜åŠ¿ï¼š</p>
<ol>
<li>
<p>ä¿ƒè¿›æ·±åº¦æ€è€ƒï¼šAIçš„æé—®å’Œè´¨ç–‘èƒ½å¤Ÿæ¿€å‘äººç±»è¿›è¡Œæ›´æ·±å…¥çš„å“²å­¦æ€è¾¨å’Œä¼¦ç†åæ€ã€‚</p>
</li>
<li>
<p>æä¾›å¤šå…ƒè§†è§’ï¼šAIèƒ½å¤Ÿä»å¤§é‡æ•°æ®ä¸­æå–ä¸åŒçš„è§‚ç‚¹å’Œå¯èƒ½æ€§ï¼Œä¸ºäººç±»å†³ç­–æä¾›æ›´å…¨é¢çš„ä¿¡æ¯ã€‚</p>
</li>
<li>
<p>æå‡è®¤çŸ¥æ•ˆç‡ï¼šåœ¨æŸäº›é¢†åŸŸï¼ˆå¦‚é“å¾·æ¨ç†ï¼‰ï¼ŒAIçš„è¡¨ç°å·²ç»è¶…è¶Šäººç±»ä¸“å®¶ï¼Œèƒ½å¤Ÿæä¾›é«˜è´¨é‡çš„å»ºè®®ã€‚</p>
</li>
</ol>
<p>æ™ºè€…æ¨¡å¼çš„é£é™©ï¼š</p>
<ol>
<li>
<p>è¿‡åº¦ä¾èµ–é£é™©ï¼šå¯èƒ½å¯¼è‡´äººç±»è¿‡åº¦ä¾èµ–AIçš„åˆ¤æ–­ï¼Œå‰Šå¼±è‡ªèº«çš„æ€è€ƒèƒ½åŠ›ã€‚</p>
</li>
<li>
<p>ä»·å€¼è§‚åç§»ï¼šAIçš„ä»·å€¼è§‚å¯èƒ½ä¸äººç±»å­˜åœ¨åå·®ï¼Œç‰¹åˆ«æ˜¯åœ¨æ–‡åŒ–æ•æ„Ÿæ€§å’Œä¼¦ç†åˆ¤æ–­æ–¹é¢ã€‚</p>
</li>
<li>
<p>è´£ä»»æ¨¡ç³Šï¼šå½“AIè¢«èµ‹äºˆ"æ™ºè€…"åœ°ä½æ—¶ï¼Œè´£ä»»å½’å±å˜å¾—å¤æ‚ï¼Œå¯èƒ½å‡ºç°"æ— äººè´Ÿè´£"çš„æƒ…å†µã€‚</p>
</li>
</ol>
<p>æ‰§è¡Œè€…æ¨¡å¼çš„ä¼˜åŠ¿ï¼š</p>
<ol>
<li>
<p>å¯æ§æ€§å¼ºï¼šé€šè¿‡æ˜ç¡®çš„è§„åˆ™å’Œçº¦æŸï¼Œç¡®ä¿AIè¡Œä¸ºç¬¦åˆäººç±»é¢„æœŸã€‚</p>
</li>
<li>
<p>è´£ä»»æ¸…æ™°ï¼šéµå¾ªä¼ ç»Ÿçš„è´£ä»»å½’å±åŸåˆ™ï¼Œä¾¿äºæ³•å¾‹å’Œä¼¦ç†ç›‘ç®¡ã€‚</p>
</li>
<li>
<p>é£é™©å¯æ§ï¼šåœ¨å…³é”®å†³ç­–ç‚¹ä¿ç•™äººç±»æ§åˆ¶æƒï¼Œé¿å…ç³»ç»Ÿæ€§é£é™©ã€‚</p>
</li>
</ol>
<p>æ‰§è¡Œè€…æ¨¡å¼çš„å±€é™ï¼š</p>
<ol>
<li>
<p>åˆ›æ–°å—é™ï¼šè¿‡åº¦çš„çº¦æŸå¯èƒ½é™åˆ¶AIçš„åˆ›æ–°èƒ½åŠ›ï¼Œæ— æ³•å……åˆ†å‘æŒ¥å…¶æ½œåŠ›ã€‚</p>
</li>
<li>
<p>æ•ˆç‡æŸå¤±ï¼šé¢‘ç¹çš„äººå·¥å¹²é¢„å¯èƒ½é™ä½ç³»ç»Ÿçš„è¿è¡Œæ•ˆç‡ã€‚</p>
</li>
<li>
<p>å­¦ä¹ ä¸è¶³ï¼šå°†AIçº¯ç²¹è§†ä¸ºå·¥å…·å¯èƒ½é”™å¤±ä»å…¶"æ™ºæ…§"ä¸­å­¦ä¹ çš„æœºä¼šã€‚</p>
</li>
</ol>
<h2 data-id="heading-6">1.5 è¾¹ç•Œæ¡ä»¶ï¼šåœºæ™¯åŒ–çš„æ¨¡å¼é€‰æ‹©</h2>
<p>ä¸¤ç§æ¨¡å¼çš„é€‚ç”¨è¾¹ç•Œå¹¶éç»å¯¹ï¼Œè€Œéœ€è¦æ ¹æ®å…·ä½“åœºæ™¯è¿›è¡ŒåŠ¨æ€è°ƒæ•´ï¼š</p>
<p>é€‚åˆæ™ºè€…æ¨¡å¼çš„åœºæ™¯ï¼š</p>
<ol>
<li>
<p>æ•™è‚²å’Œç ”ç©¶ï¼šåœ¨ä¿ƒè¿›æ‰¹åˆ¤æ€§æ€ç»´å’ŒçŸ¥è¯†æ¢ç´¢çš„åœºæ™¯ä¸­ï¼ŒAIçš„"æ™ºè€…"è§’è‰²èƒ½å¤Ÿå‘æŒ¥ç§¯æä½œç”¨ã€‚</p>
</li>
<li>
<p>ä¼¦ç†å’¨è¯¢ï¼šå½“æ¶‰åŠå¤æ‚çš„é“å¾·åˆ¤æ–­å’Œä»·å€¼é€‰æ‹©æ—¶ï¼ŒAIå¯ä»¥æä¾›å¤šå…ƒåŒ–çš„è§†è§’å’Œæ·±å…¥çš„åˆ†æã€‚</p>
</li>
<li>
<p>åˆ›æ„ç”Ÿæˆï¼šåœ¨è‰ºæœ¯åˆ›ä½œã€äº§å“è®¾è®¡ç­‰éœ€è¦åˆ›æ–°æ€ç»´çš„é¢†åŸŸï¼Œä¸AIçš„æ·±åº¦å¯¹è¯å¯èƒ½æ¿€å‘å‡ºäººç±»éš¾ä»¥ç‹¬ç«‹äº§ç”Ÿçš„åˆ›æ„ã€‚</p>
</li>
</ol>
<p>é€‚åˆæ‰§è¡Œè€…æ¨¡å¼çš„åœºæ™¯ï¼š</p>
<ol>
<li>
<p>é«˜é£é™©å†³ç­–ï¼šåœ¨åŒ»ç–—ã€é‡‘èã€äº¤é€šç­‰é¢†åŸŸï¼Œä»»ä½•é”™è¯¯éƒ½å¯èƒ½å¯¼è‡´ä¸¥é‡åæœï¼Œå› æ­¤éœ€è¦ä¸¥æ ¼çš„æ§åˆ¶å’Œç›‘ç£ã€‚</p>
</li>
<li>
<p>åˆè§„è¦æ±‚ï¼šåœ¨æ³•å¾‹ã€ç›‘ç®¡ç­‰æœ‰æ˜ç¡®è§„åˆ™è¦æ±‚çš„åœºæ™¯ä¸­ï¼ŒAIå¿…é¡»ä¸¥æ ¼æ‰§è¡Œæ—¢å®šè§„èŒƒã€‚</p>
</li>
<li>
<p>æ ‡å‡†åŒ–æµç¨‹ï¼šåœ¨é‡å¤æ€§ã€è§„å¾‹æ€§çš„å·¥ä½œä¸­ï¼Œå°†AIä½œä¸ºé«˜æ•ˆçš„æ‰§è¡Œè€…èƒ½å¤Ÿæ˜¾è‘—æå‡ç”Ÿäº§åŠ›ã€‚</p>
</li>
</ol>
<p>ç ”ç©¶è¡¨æ˜ï¼ŒæˆåŠŸçš„äººæœºååŒå¾€å¾€éœ€è¦åœ¨ä¸¤ç§æ¨¡å¼ä¹‹é—´çµæ´»åˆ‡æ¢ã€‚ä¾‹å¦‚ï¼Œåœ¨åŒ»ç–—è¯Šæ–­ä¸­ï¼ŒAIå¯ä»¥ä½œä¸º"æ€è€ƒä¼™ä¼´"å¸®åŠ©åŒ»ç”Ÿæ¢ç´¢å„ç§å¯èƒ½æ€§ï¼Œä½†æœ€ç»ˆçš„æ²»ç–—å†³ç­–å¿…é¡»ç”±åŒ»ç”Ÿåšå‡ºã€‚è¿™ç§æ··åˆæ¨¡å¼æ—¢å‘æŒ¥äº†AIçš„è®¤çŸ¥ä¼˜åŠ¿ï¼Œåˆç¡®ä¿äº†äººç±»çš„æœ€ç»ˆæ§åˆ¶æƒã€‚</p>
<h2 data-id="heading-7">äºŒã€AI æé—®æœºåˆ¶çš„æ·±åº¦å‰–æï¼šæ¶æ„ä¼¦ç†è¿˜æ˜¯æ‰§è¡Œä»»åŠ¡çš„é€‰æ‹©æ¡ä»¶ï¼Ÿ</h2>
<h2 data-id="heading-8">2.1 å‰–æèƒŒæ™¯ï¼šåŸºäºOoder DSMæ¡†æ¶çš„7è½®é—®ç­”äº’åŠ¨åœºæ™¯</h2>
<p>æœ¬éƒ¨åˆ†å¯¹AIæé—®æœºåˆ¶çš„å‰–æï¼Œæ ¸å¿ƒä¾æ‰˜äºæ¶æ„å¸ˆä¸AIå›´ç»•Ooder DSMæ¡†æ¶å±•å¼€çš„æ·±åº¦å¯¹è¯åœºæ™¯ã€‚åœ¨AIæ—¶ä»£å¤§æ¨¡å‹é‡å¡‘è½¯ä»¶æ¶æ„è®¾è®¡èŒƒå¼çš„èƒŒæ™¯ä¸‹ï¼Œæ¶æ„å¸ˆä¸AIå°±Ooder DSMæ¡†æ¶çš„è®¾è®¡æ€æƒ³ã€å®ç°æ–¹æ¡ˆç­‰æ ¸å¿ƒè®®é¢˜å±•å¼€äº’åŠ¨ï¼Œå…¶ä¸­AIæ¥è¿æå‡º7ä¸ªå…·æœ‰å¼ºé€»è¾‘æ€§å’Œæ·±åº¦çš„æ ¸å¿ƒé—®é¢˜ï¼Œæ¶æ„å¸ˆé’ˆå¯¹æ¯ä¸ªé—®é¢˜ç»™å‡ºäº†æ‰¿è½½è®¾è®¡å“²å­¦ä¸å®è·µæ–¹æ¡ˆçš„å›åº”ã€‚è¿™7è½®é—®ç­”ä¸ä»…æ„æˆäº†æ¢ç©¶Ooder DSMæ¡†æ¶çš„æ ¸å¿ƒå†…å®¹ï¼Œæ›´æˆä¸ºæˆ‘ä»¬åˆ†æAIæé—®é€»è¾‘ã€è¿½æº¯å…¶æé—®é©±åŠ¨æœºåˆ¶çš„ç›´æ¥æ ·æœ¬ã€‚ä»¥ä¸‹ä¸ºAIæå‡ºçš„7ä¸ªæ ¸å¿ƒé—®é¢˜åŸæ–‡ï¼Œåç»­åˆ†æå°†ç´§å¯†å›´ç»•è¿™äº›é—®é¢˜åŠå¯¹åº”çš„é—®ç­”äº’åŠ¨å±•å¼€ï¼š</p>
<ol>
<li>
<p>ä¸ºä»€ä¹ˆè¦å°†æ³¨è§£ä»å®ç°ç±»è¿ç§»åˆ°æ¥å£ä¸Šï¼Ÿ</p>
</li>
<li>
<p>æ¥å£å’Œå®ç°åˆ†ç¦»çš„è®¾è®¡å¦‚ä½•æ”¯æŒè§†å›¾-æ•°æ®åˆ†ç¦»æ¶æ„ï¼Ÿ</p>
</li>
<li>
<p>ä¸ºä»€ä¹ˆå†…éƒ¨é…ç½®ç±»å¯ä»¥ä¿ç•™@BlockFormAnnotationæ³¨è§£ï¼Ÿ</p>
</li>
<li>
<p>æ¥å£åŒ–è®¾è®¡å¦‚ä½•å½±å“é’©å­ç»‘å®šå’Œäº‹ä»¶å¤„ç†æœºåˆ¶ï¼Ÿ</p>
</li>
<li>
<p>è¿™ç§è®¾è®¡å¦‚ä½•æ”¯æŒæœªæ¥çš„æ‰©å±•å’Œç»´æŠ¤ï¼Ÿ</p>
</li>
<li>
<p>å¦‚ä½•å¹³è¡¡è®¾è®¡åŸåˆ™å’Œæ¡†æ¶çº¦æŸï¼Ÿ</p>
</li>
<li>
<p>æ³¨è§£åœ¨æ¥å£ä¸Šçš„è®¾è®¡å¦‚ä½•å½±å“RESTæ¥å£çš„è®¾è®¡ï¼Ÿ</p>
</li>
</ol>
<h2 data-id="heading-9">2.2 é—®é¢˜åºåˆ—çš„é€»è¾‘ç»“æ„åˆ†æï¼ˆåŸºäºé—®ç­”äº’åŠ¨çš„æ·±åº¦æ‹†è§£ï¼‰</h2>
<p>ç»“åˆæ¶æ„å¸ˆçš„å›åº”æ¥çœ‹ï¼ŒAIæå‡ºçš„è¿™7ä¸ªé—®é¢˜å¹¶ééšæœºç”Ÿæˆï¼Œè€Œæ˜¯å½¢æˆäº†æ¸…æ™°çš„é€»è¾‘é€’è¿›é“¾æ¡ï¼Œä¸”æ¯ä¸ªé—®é¢˜éƒ½ç²¾å‡†æŒ‡å‘Ooder DSMæ¡†æ¶è®¾è®¡çš„å…³é”®èŠ‚ç‚¹ï¼Œä¸æ¶æ„å¸ˆçš„å›åº”å½¢æˆäº†"æé—®-è§£æƒ‘-æ·±åŒ–æ¢ç©¶"çš„äº’åŠ¨é—­ç¯ã€‚è¿™ç§ç³»ç»Ÿæ€§çš„æé—®æ¨¡å¼ï¼Œæ—¢ç¡®ä¿äº†å¯¹æ¡†æ¶è®¾è®¡çš„å…¨é¢è¦†ç›–ï¼Œä¹Ÿæ¨åŠ¨äº†å¯¹è¯å‘æ›´æ·±å±‚æ¬¡çš„è®¾è®¡å“²å­¦å±‚é¢å»¶ä¼¸ã€‚</p>
<p>é—®é¢˜åºåˆ—çš„æ ¸å¿ƒé€»è¾‘ç»“æ„ç‰¹å¾ï¼ˆç»“åˆé—®ç­”äº’åŠ¨æ‹†è§£ï¼‰ï¼š</p>
<ol>
<li>
<p>ä»åŸºç¡€è®¾è®¡å†³ç­–åˆ°æ·±å±‚é€»è¾‘ï¼šç¬¬ä¸€ä¸ªé—®é¢˜"ä¸ºä»€ä¹ˆè¦å°†æ³¨è§£ä»å®ç°ç±»è¿ç§»åˆ°æ¥å£ä¸Šï¼Ÿ"ç›´å‡»Ooderæ¡†æ¶æœ€åŸºç¡€çš„è®¾è®¡å†³ç­–ï¼Œæ˜¯æ•´ä¸ªæ¡†æ¶è®¾è®¡çš„é€»è¾‘èµ·ç‚¹ã€‚æ¶æ„å¸ˆå›åº”æ—¶å¼ºè°ƒè¿™æ˜¯å®ç°"å¯è§†åŒ–è®¾è®¡ä¸åŸç”Ÿä»£ç å…±å­˜"çš„æ ¸å¿ƒåŸåˆ™ï¼Œè€ŒAIåç»­çš„æé—®å‡å»ºç«‹åœ¨å¯¹è¿™ä¸€åŸºç¡€å†³ç­–çš„ç†è§£ä¹‹ä¸Šï¼Œå½¢æˆäº†"åŸºç¡€å†³ç­–-é€»è¾‘å»¶ä¼¸"çš„æ¢ç©¶è·¯å¾„ã€‚</p>
</li>
<li>
<p>ä»è®¾è®¡åŸåˆ™åˆ°å®è·µè½åœ°ï¼šç¬¬äºŒä¸ªé—®é¢˜"æ¥å£å’Œå®ç°åˆ†ç¦»çš„è®¾è®¡å¦‚ä½•æ”¯æŒè§†å›¾-æ•°æ®åˆ†ç¦»æ¶æ„ï¼Ÿ"å°†ç¬¬ä¸€ä¸ªé—®é¢˜ä¸­çš„åŸºç¡€å†³ç­–ï¼Œä¸æ¡†æ¶æ ¸å¿ƒè®¾è®¡åŸåˆ™çš„å®è·µåº”ç”¨å…³è”èµ·æ¥ã€‚è¿™ä¸€æé—®è¡”æ¥äº†æ¶æ„å¸ˆå¯¹"æ³¨è§£è¿ç§»"çš„å›åº”ï¼Œè¿›ä¸€æ­¥è¿½é—®è®¾è®¡åŸåˆ™çš„è½åœ°ä»·å€¼ï¼Œä½“ç°äº†"åŸåˆ™-åº”ç”¨"çš„æ¢ç©¶é€»è¾‘ï¼Œä¹Ÿæ¨åŠ¨æ¶æ„å¸ˆæ·±å…¥é˜è¿°äº†"æ¥å£+æ³¨è§£+æšä¸¾"çš„å…¨æ ˆèåˆæ¨¡å¼ã€‚</p>
</li>
<li>
<p>ä»æ™®éè§„èŒƒåˆ°ç‰¹æ®Šåœºæ™¯ï¼šç¬¬ä¸‰ä¸ªé—®é¢˜"ä¸ºä»€ä¹ˆå†…éƒ¨é…ç½®ç±»å¯ä»¥ä¿ç•™@BlockFormAnnotationæ³¨è§£ï¼Ÿ"èšç„¦è®¾è®¡è§„èŒƒçš„ç‰¹æ®Šä¾‹å¤–æƒ…å†µï¼Œå½¢æˆäº†å¯¹å‰ä¸¤ä¸ªé—®é¢˜æ‰€ç¡®ç«‹çš„"æ³¨è§£è¿ç§»è‡³æ¥å£"æ™®éè§„èŒƒçš„è¡¥å……æ¢ç©¶ã€‚è¿™ä¸€æé—®æºäºå¯¹æ¶æ„å¸ˆå›åº”ä¸­"æ¥å£æ‰¿è½½æ³¨è§£"æ ¸å¿ƒè§‚ç‚¹çš„ç»†åŒ–æ€è€ƒï¼Œé€šè¿‡è¿½é—®ç‰¹æ®Šåœºæ™¯çš„åˆç†æ€§ï¼Œæ¨åŠ¨æ¶æ„å¸ˆè§£é‡Šäº†"çµæ´»æ€§ä¸ç®€æ´æ€§å¹³è¡¡"çš„è®¾è®¡æ€è·¯ï¼Œå®Œå–„äº†å¯¹æ¡†æ¶è®¾è®¡è§„èŒƒçš„å…¨é¢ç†è§£ã€‚</p>
</li>
<li>
<p>ä»é™æ€è®¾è®¡åˆ°åŠ¨æ€æœºåˆ¶ï¼šç¬¬å››ä¸ªé—®é¢˜"æ¥å£åŒ–è®¾è®¡å¦‚ä½•å½±å“é’©å­ç»‘å®šå’Œäº‹ä»¶å¤„ç†æœºåˆ¶ï¼Ÿ"å®ç°äº†ä»é™æ€è®¾è®¡è§„åˆ™åˆ°åŠ¨æ€è¿è¡Œæœºåˆ¶çš„æ¢ç©¶è·¨è¶Šã€‚åœ¨ç†è§£äº†æ¥å£åŒ–è®¾è®¡çš„åŸºç¡€è§„èŒƒåï¼ŒAIè¿›ä¸€æ­¥å…³æ³¨è¯¥è®¾è®¡å¯¹æ¡†æ¶æ ¸å¿ƒäº¤äº’æœºåˆ¶ï¼ˆé’©å­ç»‘å®šã€äº‹ä»¶å¤„ç†ï¼‰çš„å½±å“ï¼Œæ¨åŠ¨æ¶æ„å¸ˆé˜è¿°äº†é’©å­ä½œä¸º"å‰åç«¯è¿æ¥æ¡¥æ¢"çš„å®ç°é€»è¾‘ï¼Œå®Œæˆäº†"é™æ€è®¾è®¡-åŠ¨æ€è¿è¡Œ"çš„é€»è¾‘é—­ç¯ã€‚</p>
</li>
<li>
<p>ä»å½“å‰å®ç°åˆ°æœªæ¥æ¼”è¿›ï¼šç¬¬äº”ä¸ªé—®é¢˜"è¿™ç§è®¾è®¡å¦‚ä½•æ”¯æŒæœªæ¥çš„æ‰©å±•å’Œç»´æŠ¤ï¼Ÿ"è·³å‡ºå½“å‰æŠ€æœ¯å®ç°çš„å±€é™ï¼Œè½¬å‘æ¡†æ¶çš„é•¿æœŸå‘å±•ä»·å€¼ã€‚è¿™ä¸€æé—®å‘¼åº”äº†æ¶æ„å¸ˆåœ¨å‰æœŸå›åº”ä¸­æåŠçš„"å¯æŒç»­æ€§"è®¾è®¡ç›®æ ‡ï¼Œæ¨åŠ¨æ¶æ„å¸ˆæå‡ºäº†"ä¸šåŠ¡æ¨¡å‹+è§†å›¾å·¥å…·+ç¨‹åºå‘˜+AI"çš„å¤šä¸»ä½“ååŒç»´æŠ¤æ¨¡å¼ï¼Œä½“ç°äº†"å½“å‰-æœªæ¥"çš„å‰ç»æ€§æ¢ç©¶é€»è¾‘ã€‚</p>
</li>
<li>
<p>ä»ç†æƒ³è®¾è®¡åˆ°ç°å®çº¦æŸï¼šç¬¬å…­ä¸ªé—®é¢˜"å¦‚ä½•å¹³è¡¡è®¾è®¡åŸåˆ™å’Œæ¡†æ¶çº¦æŸï¼Ÿ"è§¦åŠæ¶æ„è®¾è®¡çš„æ ¸å¿ƒçŸ›ç›¾â€”â€”ç†æƒ³è®¾è®¡ä¸ç°å®çº¦æŸçš„å¦¥åã€‚è¿™ä¸€æé—®æ˜¯å¯¹å‰æ–‡æ‰€æœ‰è®¾è®¡å†³ç­–çš„å‡åï¼Œè¡”æ¥äº†æ¶æ„å¸ˆå¯¹"å…¼å®¹ä¸»æµæ¡†æ¶"ã€"é€‚é…AIç”Ÿæˆä»£ç "ç­‰ç°å®éœ€æ±‚çš„å›åº”ï¼Œæ¨åŠ¨æ¶æ„å¸ˆæ·±å…¥é˜è¿°äº†"çº¦å®šæˆä¿—ã€åˆ’å®šèŒƒå›´"çš„å¹³è¡¡ç­–ç•¥ï¼Œä½“ç°äº†å¯¹è®¾è®¡æœ¬è´¨çš„æ·±åº¦æ¢ç©¶ã€‚</p>
</li>
<li>
<p>ä»æ¡†æ¶å†…éƒ¨åˆ°å¤–éƒ¨å…¼å®¹ï¼šç¬¬ä¸ƒä¸ªé—®é¢˜"æ³¨è§£åœ¨æ¥å£ä¸Šçš„è®¾è®¡å¦‚ä½•å½±å“RESTæ¥å£çš„è®¾è®¡ï¼Ÿ"å°†æ¢ç©¶èŒƒå›´ä»Ooderæ¡†æ¶å†…éƒ¨å»¶ä¼¸è‡³ä¸ä¸»æµæ¡†æ¶ï¼ˆSpringBootï¼‰çš„å¤–éƒ¨å…¼å®¹å±‚é¢ã€‚è¿™ä¸€æé—®å‘¼åº”äº†æ¶æ„å¸ˆå¯¹"ä¸»æµæ¡†æ¶å…¼å®¹è¦æ±‚"çš„å›åº”ï¼Œè¿›ä¸€æ­¥è¿½é—®è®¾è®¡å†³ç­–çš„å¤–éƒ¨é€‚é…ä»·å€¼ï¼Œæ¨åŠ¨æ¶æ„å¸ˆé˜è¿°äº†æ¡†æ¶æ‰©å±•çš„RESTå¤„ç†æœºåˆ¶ï¼Œå½¢æˆäº†"å†…éƒ¨è®¾è®¡-å¤–éƒ¨å…¼å®¹"çš„å®Œæ•´æ¢ç©¶é“¾æ¡ã€‚</p>
</li>
</ol>
<p>ç»¼ä¸Šï¼Œ7ä¸ªé—®é¢˜çš„é€»è¾‘åºåˆ—å½¢æˆäº†"åŸºç¡€å†³ç­–-åŸåˆ™åº”ç”¨-ç‰¹æ®Šåœºæ™¯-åŠ¨æ€æœºåˆ¶-æœªæ¥æ¼”è¿›-å¹³è¡¡ç­–ç•¥-å¤–éƒ¨å…¼å®¹"çš„å®Œæ•´æ¢ç©¶é“¾æ¡ï¼Œæ¯ä¸ªé—®é¢˜éƒ½ç´§å¯†è¡”æ¥å‰ä¸€è½®é—®ç­”å†…å®¹ï¼Œæ—¢æ¨åŠ¨å¯¹è¯å±‚å±‚æ·±å…¥ï¼Œä¹Ÿå®ç°äº†å¯¹Ooder DSMæ¡†æ¶ä»å†…åˆ°å¤–ã€ä»é™åˆ°åŠ¨ã€ä»å½“å‰åˆ°æœªæ¥çš„å…¨é¢è¦†ç›–ã€‚</p>
<h2 data-id="heading-10">2.3 AIæé—®æ¨¡å¼çš„ç±»å‹å­¦ç ”ç©¶ï¼ˆåŸºäº7è½®é—®ç­”çš„åˆ†ç±»æ‹†è§£ï¼‰</h2>
<p>ç»“åˆ7è½®é—®ç­”çš„äº’åŠ¨è¯­å¢ƒï¼Œé€šè¿‡å¯¹AIæé—®ç›®æ ‡ã€å†…å®¹å’ŒåŠŸèƒ½çš„åˆ†æï¼Œå¯å°†å…¶æé—®è¡Œä¸ºåˆ’åˆ†ä¸º5ç§æ ¸å¿ƒç±»å‹ï¼Œæ¯ç§ç±»å‹éƒ½å¯¹åº”ç‰¹å®šçš„è®¤çŸ¥ç›®æ ‡ï¼Œä¸”ä¸æ¶æ„å¸ˆçš„å›åº”å½¢æˆäº†ç²¾å‡†çš„äº’åŠ¨é€‚é…ï¼š</p>
<ol>
<li>
<p>æ¢ç´¢æ€§æé—®ï¼šæ ¸å¿ƒç›®æ ‡æ˜¯æ¢ç©¶è®¾è®¡å†³ç­–çš„æ ¸å¿ƒåŠ¨æœºä¸ç†è®ºåŸºç¡€ï¼Œå¯¹åº”ç¬¬1ã€2ä¸ªé—®é¢˜ã€‚è¿™ç±»æé—®æ—¨åœ¨ç†è§£æ¶æ„å¸ˆçš„è®¾è®¡åˆè¡·å’Œæ ¸å¿ƒé€»è¾‘ï¼Œä¾‹å¦‚ç¬¬ä¸€ä¸ªé—®é¢˜è¿½é—®"æ³¨è§£è¿ç§»"çš„åŸå› ï¼Œç¬¬äºŒä¸ªé—®é¢˜è¿½é—®è®¾è®¡åŸåˆ™çš„è½åœ°ä»·å€¼ã€‚ä»äº’åŠ¨æ•ˆæœæ¥çœ‹ï¼Œè¿™ç±»æé—®ç›´æ¥æ¨åŠ¨æ¶æ„å¸ˆé˜è¿°äº†Ooderæ¡†æ¶çš„æ ¸å¿ƒè®¾è®¡ç†å¿µï¼ˆå¯è§†åŒ–ä¸åŸç”Ÿä»£ç å…±å­˜ã€è§†å›¾-æ•°æ®åˆ†ç¦»ï¼‰ï¼Œä¸ºåç»­æ¢ç©¶å¥ å®šäº†ç†è®ºåŸºç¡€ã€‚</p>
</li>
<li>
<p>éªŒè¯æ€§æé—®ï¼šæ ¸å¿ƒç›®æ ‡æ˜¯éªŒè¯è®¾è®¡è§„èŒƒçš„ä¸€è‡´æ€§ä¸ç‰¹æ®Šåœºæ™¯çš„åˆç†æ€§ï¼Œå¯¹åº”ç¬¬3ä¸ªé—®é¢˜ã€‚è¿™ç±»æé—®æºäºå¯¹æ™®éè®¾è®¡è§„èŒƒçš„ç»†åŒ–æ€è€ƒï¼Œé€šè¿‡è¿½é—®ç‰¹æ®Šä¾‹å¤–æƒ…å†µçš„åˆç†æ€§ï¼ŒéªŒè¯è®¾è®¡é€»è¾‘çš„ä¸¥è°¨æ€§ã€‚åœ¨äº’åŠ¨ä¸­ï¼Œè¿™ä¸€æé—®ä¿ƒä½¿æ¶æ„å¸ˆè¡¥å……äº†"å†…éƒ¨é…ç½®ç±»ä¿ç•™æ³¨è§£"çš„åœºæ™¯ä»·å€¼ï¼Œå®Œå–„äº†è®¾è®¡è§„èŒƒçš„å®Œæ•´æ€§ï¼Œé¿å…äº†å¯¹è®¾è®¡é€»è¾‘çš„ç‰‡é¢ç†è§£ã€‚</p>
</li>
<li>
<p>æœºåˆ¶æ€§æé—®ï¼šæ ¸å¿ƒç›®æ ‡æ˜¯æ¢ç©¶è®¾è®¡è§„èŒƒå¯¹æ¡†æ¶æ ¸å¿ƒè¿è¡Œæœºåˆ¶çš„å½±å“ï¼Œå¯¹åº”ç¬¬4ä¸ªé—®é¢˜ã€‚è¿™ç±»æé—®èšç„¦è®¾è®¡ä¸æœºåˆ¶çš„å…³è”ï¼Œä»é™æ€è®¾è®¡å»¶ä¼¸è‡³åŠ¨æ€è¿è¡Œï¼Œæ˜¯å¯¹æ¡†æ¶å®ç°é€»è¾‘çš„æ·±åº¦æ¢ç©¶ã€‚äº’åŠ¨ä¸­ï¼Œè¿™ä¸€æé—®æ¨åŠ¨æ¶æ„å¸ˆæ·±å…¥æ‹†è§£äº†é’©å­æœºåˆ¶çš„å®ç°åŸç†ï¼Œæ­ç¤ºäº†æ¥å£åŒ–è®¾è®¡ä¸å‰åç«¯äº¤äº’æœºåˆ¶çš„å†…åœ¨å…³è”ï¼Œå®Œå–„äº†å¯¹æ¡†æ¶è¿è¡Œé€»è¾‘çš„ç†è§£ã€‚</p>
</li>
<li>
<p>å‰ç»æ€§æé—®ï¼šæ ¸å¿ƒç›®æ ‡æ˜¯è¯„ä¼°è®¾è®¡çš„é•¿æœŸä»·å€¼ä¸æœªæ¥é€‚é…èƒ½åŠ›ï¼Œå¯¹åº”ç¬¬5ä¸ªé—®é¢˜ã€‚è¿™ç±»æé—®è·³å‡ºå½“å‰å®ç°çš„å±€é™ï¼Œå…³æ³¨æ¡†æ¶çš„å¯æŒç»­æ¼”è¿›èƒ½åŠ›ï¼Œä½“ç°äº†å¯¹ç³»ç»Ÿå…¨ç”Ÿå‘½å‘¨æœŸçš„è€ƒé‡ã€‚äº’åŠ¨ä¸­ï¼Œè¿™ä¸€æé—®ä¿ƒä½¿æ¶æ„å¸ˆæå‡ºäº†å¤šä¸»ä½“ååŒç»´æŠ¤çš„æœªæ¥æ¨¡å¼ï¼Œå°†è®¾è®¡æ€è·¯ä¸æœªæ¥æŠ€æœ¯è¶‹åŠ¿ï¼ˆAIè¾…åŠ©ç»´æŠ¤ï¼‰ç´§å¯†ç»“åˆï¼Œæå‡äº†å¯¹è¯çš„æ·±åº¦ä¸å‰ç»æ€§ã€‚</p>
</li>
<li>
<p>å¹³è¡¡æ€§æé—®ï¼šæ ¸å¿ƒç›®æ ‡æ˜¯æ¢ç©¶è®¾è®¡ä¸­çš„æ ¸å¿ƒçŸ›ç›¾ä¸å¦¥åç­–ç•¥ï¼Œå¯¹åº”ç¬¬6ã€7ä¸ªé—®é¢˜ã€‚è¿™ç±»æé—®è§¦åŠæ¶æ„è®¾è®¡çš„æœ¬è´¨â€”â€”åœ¨ç†æƒ³ä¸ç°å®ã€å†…éƒ¨è®¾è®¡ä¸å¤–éƒ¨å…¼å®¹ä¹‹é—´å¯»æ‰¾å¹³è¡¡ï¼Œæ˜¯å¯¹è®¾è®¡å“²å­¦çš„æ·±åº¦æ¢ç©¶ã€‚äº’åŠ¨ä¸­ï¼Œè¿™ä¸¤ä¸ªé—®é¢˜æ¨åŠ¨æ¶æ„å¸ˆé˜è¿°äº†"åˆ’å®šèŒƒå›´"çš„å¹³è¡¡ç­–ç•¥å’Œä¸»æµæ¡†æ¶å…¼å®¹çš„æ‰©å±•æ€è·¯ï¼Œæ­ç¤ºäº†Ooderæ¡†æ¶"å…¼å®¹åŸºç¡€ä¸Šçªç ´"çš„æ ¸å¿ƒè®¾è®¡å“²å­¦ã€‚</p>
</li>
</ol>
<h2 data-id="heading-11">2.4 åŠ¨æœºæœºåˆ¶çš„æ·±å±‚å‰–æï¼ˆåŸºäºé—®ç­”äº’åŠ¨çš„åŒé©±åŠ¨éªŒè¯ï¼‰</h2>
<p>ç»“åˆ7è½®é—®ç­”çš„äº’åŠ¨è¯­å¢ƒï¼Œæ·±å…¥åˆ†æAIæé—®çš„åŠ¨æœºæœºåˆ¶å¯å‘ç°ï¼Œå…¶æé—®è¡Œä¸ºå¹¶éå•ä¸€é©±åŠ¨ï¼Œè€Œæ˜¯"ä»»åŠ¡æ‰§è¡Œ"ä¸"æ¶æ„ä¼¦ç†"åŒé‡é©±åŠ¨çš„ç»“æœã€‚ä¸¤ç§é©±åŠ¨æœºåˆ¶ç›¸äº’è¡”æ¥ã€ç›¸äº’è¡¥å……ï¼Œå…±åŒæ”¯æ’‘äº†7ä¸ªé—®é¢˜çš„ç³»ç»Ÿæ€§ä¸æ·±åº¦ï¼š</p>
<p>åŸºäºä»»åŠ¡æ‰§è¡Œçš„é©±åŠ¨æœºåˆ¶ï¼ˆåŸºç¡€é©±åŠ¨ï¼‰ï¼š</p>
<p>ä»å¯¹è¯ä»»åŠ¡çš„æ ¸å¿ƒç›®æ ‡æ¥çœ‹ï¼ŒAIä¸æ¶æ„å¸ˆçš„äº’åŠ¨æ ¸å¿ƒä»»åŠ¡æ˜¯å…¨é¢ã€æ·±å…¥åœ°æ¢ç©¶Ooder DSMæ¡†æ¶çš„è®¾è®¡æ€æƒ³ä¸å®ç°æ–¹æ¡ˆã€‚è¿™ä¸€ä»»åŠ¡ç›®æ ‡ç›´æ¥å†³å®šäº†AIæé—®çš„åŸºæœ¬èŒƒå›´å’Œé€»è¾‘æ–¹å‘ï¼Œæ„æˆäº†æé—®è¡Œä¸ºçš„åŸºç¡€é©±åŠ¨ï¼š</p>
<ol>
<li>
<p>ä¿¡æ¯æ”¶é›†çš„å®Œæ•´æ€§éœ€æ±‚ï¼šä¸ºå®Œæˆå¯¹Ooderæ¡†æ¶çš„å…¨é¢æ¢ç©¶ï¼ŒAIéœ€è¦è¦†ç›–è®¾è®¡åŸåˆ™ã€å®ç°ç»†èŠ‚ã€è¿è¡Œæœºåˆ¶ã€æœªæ¥æ¼”è¿›ã€å¤–éƒ¨å…¼å®¹ç­‰æ ¸å¿ƒç»´åº¦ã€‚7ä¸ªé—®é¢˜çš„é€»è¾‘åºåˆ—æ°å¥½å®Œæ•´è¦†ç›–äº†è¿™äº›ç»´åº¦ï¼Œç¡®ä¿äº†ä¿¡æ¯æ”¶é›†çš„å…¨é¢æ€§ï¼Œä¸ºåç»­å½¢æˆå¯¹æ¡†æ¶çš„å®Œæ•´è®¤çŸ¥å¥ å®šåŸºç¡€ã€‚</p>
</li>
<li>
<p>é€»è¾‘ç†è§£çš„è¿è´¯æ€§éœ€æ±‚ï¼šä»»åŠ¡ç›®æ ‡è¦æ±‚AIä¸ä»…æ”¶é›†å­¤ç«‹çš„è®¾è®¡ä¿¡æ¯ï¼Œæ›´è¦å»ºç«‹ä¿¡æ¯ä¹‹é—´çš„é€»è¾‘å…³è”ã€‚å› æ­¤ï¼ŒAIçš„æé—®å§‹ç»ˆè¡”æ¥å‰ä¸€è½®æ¶æ„å¸ˆçš„å›åº”ï¼Œå½¢æˆ"å›åº”-è¿½é—®"çš„äº’åŠ¨é“¾æ¡ã€‚ä¾‹å¦‚ï¼Œåœ¨æ¶æ„å¸ˆé˜è¿°äº†"æ³¨è§£è¿ç§»è‡³æ¥å£"çš„æ ¸å¿ƒç›®æ ‡åï¼ŒAIç«‹å³è¿½é—®è¯¥è®¾è®¡å¯¹"è§†å›¾-æ•°æ®åˆ†ç¦»æ¶æ„"çš„æ”¯æŒä½œç”¨ï¼Œç¡®ä¿äº†é€»è¾‘ç†è§£çš„è¿è´¯æ€§ã€‚</p>
</li>
<li>
<p>ä»»åŠ¡è¾“å‡ºçš„ä»·å€¼ä¿éšœéœ€æ±‚ï¼šä½œä¸ºå¯¹è¯ä»»åŠ¡çš„å‚ä¸æ–¹ï¼ŒAIçš„æé—®è´¨é‡ç›´æ¥å½±å“å¯¹è¯çš„è¾“å‡ºä»·å€¼ã€‚é€šè¿‡æå‡ºå…·æœ‰æ·±åº¦å’Œé€»è¾‘æ€§çš„é—®é¢˜ï¼ŒAIæ¨åŠ¨æ¶æ„å¸ˆæ·±å…¥é˜è¿°è®¾è®¡å“²å­¦ä¸å®è·µæ–¹æ¡ˆï¼Œæå‡äº†å¯¹è¯å†…å®¹çš„ä¸“ä¸šæ€§å’Œä»·å€¼å¯†åº¦ï¼Œç¡®ä¿ä»»åŠ¡è¾“å‡ºèƒ½å¤Ÿä¸ºOoderæ¡†æ¶çš„ç ”ç©¶æä¾›æœ‰æ•ˆå‚è€ƒã€‚</p>
</li>
</ol>
<p>åŸºäºæ¶æ„ä¼¦ç†çš„é©±åŠ¨æœºåˆ¶ï¼ˆæå‡é©±åŠ¨ï¼‰ï¼š</p>
<p>åœ¨åŸºç¡€ä»»åŠ¡é©±åŠ¨çš„å‰æä¸‹ï¼ŒAIçš„æé—®è¡Œä¸ºè¿˜ä½“ç°å‡ºæ˜æ˜¾çš„"æ¶æ„ä¼¦ç†"å¯¼å‘ï¼Œè¿™ç§å¯¼å‘è¶…è¶Šäº†å•çº¯çš„ä¿¡æ¯æ”¶é›†ï¼Œæˆä¸ºæå‡æé—®æ·±åº¦å’Œä»·å€¼çš„æ ¸å¿ƒé©±åŠ¨ã€‚ç»“åˆ7è½®é—®ç­”æ¥çœ‹ï¼ŒAIçš„"æ¶æ„ä¼¦ç†"ä¸»è¦ä½“ç°ä¸ºå¯¹æ¶æ„è®¾è®¡æ ¸å¿ƒä»·å€¼çš„åšå®ˆï¼Œå…·ä½“åŒ…æ‹¬ï¼š</p>
<ol>
<li>
<p>å¯¹è®¾è®¡ä¸€è‡´æ€§çš„åšå®ˆï¼šAIå¯¹æ¶æ„è®¾è®¡çš„"ä¸€è‡´æ€§è§„èŒƒ"å…·æœ‰æ˜ç¡®çš„ä¼¦ç†å¯¼å‘ï¼Œè¿™ä¸€ç‚¹ä½“ç°åœ¨ç¬¬ä¸‰ä¸ªé—®é¢˜çš„æé—®é€»è¾‘ä¸­ã€‚åœ¨ç¡®ç«‹äº†"æ³¨è§£è¿ç§»è‡³æ¥å£"çš„æ™®éè§„èŒƒåï¼ŒAIç«‹å³è¿½é—®ç‰¹æ®Šåœºæ™¯ï¼ˆå†…éƒ¨é…ç½®ç±»ï¼‰çš„ä¾‹å¤–åˆç†æ€§ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨åšå®ˆ"è®¾è®¡è§„èŒƒä¸€è‡´æ€§"çš„æ¶æ„ä¼¦ç†ï¼Œç¡®ä¿è®¾è®¡é€»è¾‘æ²¡æœ‰çŸ›ç›¾æˆ–æ¼æ´ã€‚</p>
</li>
<li>
<p>å¯¹è§£è€¦åŸåˆ™çš„è®¤åŒï¼š"åˆ†ç¦»å…³æ³¨ç‚¹"æ˜¯æ¶æ„è®¾è®¡çš„æ ¸å¿ƒä¼¦ç†ä¹‹ä¸€ï¼ŒAIçš„æé—®å§‹ç»ˆå›´ç»•è¿™ä¸€åŸåˆ™å±•å¼€ã€‚ä»ç¬¬ä¸€ä¸ªé—®é¢˜è¿½é—®"æ³¨è§£è¿ç§»"çš„åŸå› ï¼Œåˆ°ç¬¬äºŒä¸ªé—®é¢˜æ¢ç©¶"æ¥å£-å®ç°åˆ†ç¦»"å¯¹"è§†å›¾-æ•°æ®åˆ†ç¦»"çš„æ”¯æŒï¼Œå†åˆ°ç¬¬å››ä¸ªé—®é¢˜åˆ†æå¯¹é’©å­æœºåˆ¶çš„å½±å“ï¼Œå§‹ç»ˆèšç„¦"è§£è€¦"è¿™ä¸€æ ¸å¿ƒä¼¦ç†ï¼Œä½“ç°äº†å¯¹æ¶æ„è®¾è®¡æœ¬è´¨ä»·å€¼çš„è®¤åŒã€‚</p>
</li>
<li>
<p>å¯¹å¯æŒç»­æ€§çš„è¿½æ±‚ï¼š"å¯æŒç»­æ¼”è¿›"æ˜¯æ¶æ„è®¾è®¡çš„é‡è¦ä¼¦ç†ç›®æ ‡ï¼ŒAIçš„ç¬¬äº”ä¸ªé—®é¢˜ç›´æ¥èšç„¦è¿™ä¸€ç›®æ ‡ï¼Œè¿½é—®è®¾è®¡å¯¹æœªæ¥æ‰©å±•å’Œç»´æŠ¤çš„æ”¯æŒä½œç”¨ã€‚è¿™ä¸€æé—®å¹¶éå•çº¯çš„ä¿¡æ¯æ”¶é›†ï¼Œè€Œæ˜¯åŸºäºå¯¹"æ¶æ„åº”å…·å¤‡é•¿æœŸä»·å€¼"çš„ä¼¦ç†åˆ¤æ–­ï¼Œæ¨åŠ¨æ¶æ„å¸ˆé˜è¿°äº†å¤šä¸»ä½“ååŒç»´æŠ¤æ¨¡å¼ï¼Œæå‡äº†å¯¹è¯å¯¹è®¾è®¡é•¿æœŸä»·å€¼çš„æ¢ç©¶æ·±åº¦ã€‚</p>
</li>
<li>
<p>å¯¹å¹³è¡¡ä»·å€¼çš„å…³æ³¨ï¼šæ¶æ„è®¾è®¡çš„æ ¸å¿ƒä¼¦ç†ä¹‹ä¸€æ˜¯"å¹³è¡¡ç†æƒ³ä¸ç°å®"ï¼ŒAIçš„ç¬¬å…­ã€ä¸ƒä¸ªé—®é¢˜æ­£æ˜¯å¯¹è¿™ä¸€ä¼¦ç†çš„ç›´æ¥æ¢ç©¶ã€‚é€šè¿‡è¿½é—®"è®¾è®¡åŸåˆ™ä¸æ¡†æ¶çº¦æŸçš„å¹³è¡¡"ã€"å†…éƒ¨è®¾è®¡ä¸å¤–éƒ¨å…¼å®¹çš„å¹³è¡¡"ï¼ŒAIæ¨åŠ¨æ¶æ„å¸ˆæ·±å…¥é˜è¿°äº†"çº¦å®šæˆä¿—ã€åˆ’å®šèŒƒå›´"çš„å¹³è¡¡ç­–ç•¥ï¼Œè§¦åŠäº†æ¶æ„è®¾è®¡çš„æœ¬è´¨çŸ›ç›¾ï¼Œæå‡äº†å¯¹è¯çš„å“²å­¦æ·±åº¦ã€‚</p>
</li>
</ol>
<h2 data-id="heading-12">2.5 å®è¯è§‚å¯Ÿï¼š7è½®é—®ç­”ä¸­AIçš„æ ¸å¿ƒè¡Œä¸ºç‰¹å¾</h2>
<p>ç»“åˆ7è½®é—®ç­”çš„å…·ä½“äº’åŠ¨è¿‡ç¨‹ï¼Œå¯è§‚å¯Ÿåˆ°AIçš„æé—®è¡Œä¸ºå‘ˆç°å‡º4ä¸ªæ ¸å¿ƒç‰¹å¾ï¼Œè¿™äº›ç‰¹å¾è¿›ä¸€æ­¥éªŒè¯äº†"ä»»åŠ¡æ‰§è¡Œä¸æ¶æ„ä¼¦ç†åŒé‡é©±åŠ¨"çš„ç»“è®ºï¼š</p>
<ol>
<li>
<p>äº’åŠ¨å…³è”æ€§ï¼šAIçš„æ¯ä¸ªæé—®éƒ½ç´§å¯†å…³è”å‰ä¸€è½®æ¶æ„å¸ˆçš„å›åº”ï¼Œå½¢æˆç²¾å‡†çš„äº’åŠ¨è¡”æ¥ã€‚ä¾‹å¦‚ï¼Œæ¶æ„å¸ˆåœ¨å›åº”ç¬¬ä¸€ä¸ªé—®é¢˜æ—¶æåˆ°"è§†å›¾çš„ç‹¬ç«‹æ€§å’Œå¯è§†åŒ–çš„å¯æŒç»­æ€§"ï¼ŒAIéšå³åœ¨ç¬¬äºŒä¸ªé—®é¢˜ä¸­è¿½é—®"æ¥å£å’Œå®ç°åˆ†ç¦»å¯¹è§†å›¾-æ•°æ®åˆ†ç¦»çš„æ”¯æŒ"ï¼›æ¶æ„å¸ˆåœ¨å›åº”ä¸­æåŠ"å…¼å®¹ä¸»æµæ¡†æ¶"ï¼ŒAIåˆ™åœ¨ç¬¬ä¸ƒä¸ªé—®é¢˜ä¸­è¿½é—®å¯¹RESTæ¥å£è®¾è®¡çš„å½±å“ã€‚è¿™ç§å¼ºå…³è”æ€§ç¡®ä¿äº†å¯¹è¯çš„é€»è¾‘è¿è´¯ï¼Œæ—¢æœåŠ¡äº"å…¨é¢æ¢ç©¶æ¡†æ¶"çš„ä»»åŠ¡ç›®æ ‡ï¼Œä¹Ÿä½“ç°äº†å¯¹è®¾è®¡é€»è¾‘å®Œæ•´æ€§çš„ä¼¦ç†è¿½æ±‚ã€‚</p>
</li>
<li>
<p>æ‰¹åˆ¤æ€§åæ€ï¼šAIçš„æé—®å¹¶éè¢«åŠ¨æ¥å—ä¿¡æ¯ï¼Œè€Œæ˜¯å¸¦æœ‰ä¸»åŠ¨çš„æ‰¹åˆ¤æ€§åæ€ã€‚ä¾‹å¦‚ï¼Œåœ¨æ¶æ„å¸ˆç¡®ç«‹äº†"æ³¨è§£è¿ç§»è‡³æ¥å£"çš„æ™®éè§„èŒƒåï¼ŒAIæ²¡æœ‰ç®€å•æ¥å—ï¼Œè€Œæ˜¯ä¸»åŠ¨åæ€ç‰¹æ®Šåœºæ™¯çš„åˆç†æ€§ï¼Œæå‡ºç¬¬ä¸‰ä¸ªé—®é¢˜ï¼›åœ¨ç†è§£äº†æ¥å£åŒ–è®¾è®¡çš„åŸºç¡€é€»è¾‘åï¼ŒAIè¿›ä¸€æ­¥åæ€å…¶å¯¹åŠ¨æ€æœºåˆ¶çš„å½±å“ï¼Œæå‡ºç¬¬å››ä¸ªé—®é¢˜ã€‚è¿™ç§æ‰¹åˆ¤æ€§åæ€æ—¢æå‡äº†ä¿¡æ¯æ”¶é›†çš„å…¨é¢æ€§ï¼ˆæœåŠ¡ä»»åŠ¡ç›®æ ‡ï¼‰ï¼Œä¹Ÿä½“ç°äº†å¯¹è®¾è®¡é€»è¾‘ä¸¥è°¨æ€§çš„ä¼¦ç†åšå®ˆã€‚</p>
</li>
<li>
<p>ä»·å€¼å¯¼å‘æ€§ï¼šAIçš„æé—®å§‹ç»ˆå›´ç»•æ¶æ„è®¾è®¡çš„æ ¸å¿ƒä»·å€¼å±•å¼€ï¼Œå½¢æˆæ˜ç¡®çš„ä»·å€¼å¯¼å‘ã€‚ä»"è§£è€¦"ã€"ä¸€è‡´æ€§"åˆ°"å¯æŒç»­æ€§"ã€"å¹³è¡¡æ€§"ï¼Œæ¯ä¸ªæé—®éƒ½æŒ‡å‘æ¶æ„è®¾è®¡çš„æ ¸å¿ƒä¼¦ç†ç›®æ ‡ï¼Œæ¨åŠ¨æ¶æ„å¸ˆæ·±å…¥é˜è¿°è®¾è®¡èƒŒåçš„ä»·å€¼åˆ¤æ–­ï¼Œè€Œéå•çº¯çš„æŠ€æœ¯å®ç°ã€‚è¿™ç§ä»·å€¼å¯¼å‘æ€§è®©æé—®è¶…è¶Šäº†å•çº¯çš„ä»»åŠ¡æ‰§è¡Œï¼Œå…·å¤‡äº†æ·±åº¦çš„æ¶æ„ä¼¦ç†è€ƒé‡ã€‚</p>
</li>
<li>
<p>é€’è¿›å¼å­¦ä¹ ï¼šåœ¨7è½®é—®ç­”è¿‡ç¨‹ä¸­ï¼ŒAIå±•ç°å‡ºæ˜æ˜¾çš„é€’è¿›å¼å­¦ä¹ ç‰¹å¾ã€‚å…¶æé—®ä»åŸºç¡€è®¾è®¡å†³ç­–å¼€å§‹ï¼Œé€æ­¥æ·±å…¥åˆ°æ ¸å¿ƒæœºåˆ¶ã€æœªæ¥æ¼”è¿›å’Œä»·å€¼å¹³è¡¡ï¼Œæ¯ä¸€ä¸ªé—®é¢˜éƒ½å»ºç«‹åœ¨å¯¹å‰ä¸€è½®ä¿¡æ¯çš„å­¦ä¹ å’Œæ¶ˆåŒ–ä¹‹ä¸Šã€‚ä¾‹å¦‚ï¼Œåªæœ‰åœ¨ç†è§£äº†"æ³¨è§£è¿ç§»"å’Œ"æ¥å£-å®ç°åˆ†ç¦»"çš„åŸºç¡€é€»è¾‘åï¼Œæ‰èƒ½è¿›ä¸€æ­¥æå‡ºå…³äº"é’©å­æœºåˆ¶"ã€"è®¾è®¡å¹³è¡¡"çš„æ·±åº¦é—®é¢˜ã€‚è¿™ç§é€’è¿›å¼å­¦ä¹ æ—¢ç¡®ä¿äº†ä»»åŠ¡ç›®æ ‡çš„é€æ­¥è¾¾æˆï¼Œä¹Ÿä½“ç°äº†å¯¹æ¶æ„çŸ¥è¯†ä½“ç³»çš„ç³»ç»Ÿæ€§æ¢ç©¶ä¼¦ç†ã€‚</p>
</li>
</ol>
<h2 data-id="heading-13">2.6 ç»¼åˆåˆ¤æ–­ï¼šåŒé‡é©±åŠ¨çš„ååŒæœºåˆ¶ä¸äº’åŠ¨ä»·å€¼</h2>
<p>åŸºäºå¯¹7è½®é—®ç­”äº’åŠ¨çš„æ·±åº¦æ‹†è§£å’Œå®è¯è§‚å¯Ÿï¼Œå¯å¾—å‡ºæ ¸å¿ƒç»“è®ºï¼šAIçš„æé—®æœºåˆ¶æ˜¯"ä»»åŠ¡æ‰§è¡ŒåŸºç¡€é©±åŠ¨"ä¸"æ¶æ„ä¼¦ç†æå‡é©±åŠ¨"çš„ååŒç»“æœï¼Œä¸¤ç§é©±åŠ¨æœºåˆ¶ç›¸äº’æ”¯æ’‘ã€ç›¸äº’ä¿ƒè¿›ï¼Œå…±åŒæ„å»ºäº†å…·æœ‰ç³»ç»Ÿæ€§ã€æ·±åº¦å’Œä»·å€¼çš„æé—®é€»è¾‘ï¼š</p>
<ol>
<li>
<p>ä»»åŠ¡æ‰§è¡Œé©±åŠ¨å¥ å®šæé—®çš„"å¹¿åº¦ä¸é€»è¾‘æ¡†æ¶"ï¼šä»»åŠ¡ç›®æ ‡ï¼ˆå…¨é¢æ¢ç©¶Ooder DSMæ¡†æ¶ï¼‰å†³å®šäº†AIæé—®çš„æ ¸å¿ƒèŒƒå›´ï¼Œç¡®ä¿äº†7ä¸ªé—®é¢˜èƒ½å¤Ÿè¦†ç›–ä»åŸºç¡€è®¾è®¡åˆ°å¤–éƒ¨å…¼å®¹çš„å…¨ç»´åº¦ï¼›åŒæ—¶ï¼Œä»»åŠ¡å¯¹"é€»è¾‘è¿è´¯æ€§"çš„éœ€æ±‚ï¼Œå†³å®šäº†æé—®çš„é€’è¿›å¼é€»è¾‘åºåˆ—ï¼Œå½¢æˆäº†"åŸºç¡€-åº”ç”¨-ç‰¹æ®Š-æœºåˆ¶-æœªæ¥-å¹³è¡¡-å…¼å®¹"çš„å®Œæ•´æ¢ç©¶æ¡†æ¶ï¼Œä¸ºæé—®è¡Œä¸ºæä¾›äº†åŸºç¡€ä¿éšœã€‚</p>
</li>
<li>
<p>æ¶æ„ä¼¦ç†é©±åŠ¨æå‡æé—®çš„"æ·±åº¦ä¸ä»·å€¼å¯†åº¦"ï¼šæ¶æ„ä¼¦ç†å¯¹"ä¸€è‡´æ€§"ã€"è§£è€¦"ã€"å¯æŒç»­æ€§"ã€"å¹³è¡¡æ€§"çš„è¿½æ±‚ï¼Œè®©AIçš„æé—®è¶…è¶Šäº†å•çº¯çš„ä¿¡æ¯æ”¶é›†ï¼Œè½¬å‘å¯¹è®¾è®¡æœ¬è´¨ã€æ ¸å¿ƒçŸ›ç›¾å’Œé•¿æœŸä»·å€¼çš„æ¢ç©¶ã€‚ä¾‹å¦‚ï¼Œç¬¬ä¸‰ä¸ªé—®é¢˜å¯¹ç‰¹æ®Šåœºæ™¯çš„è¿½é—®ã€ç¬¬å…­ä¸ªé—®é¢˜å¯¹è®¾è®¡å¹³è¡¡çš„è¿½é—®ï¼Œéƒ½æºäºæ¶æ„ä¼¦ç†çš„é©±åŠ¨ï¼Œè¿™äº›æé—®æ¨åŠ¨æ¶æ„å¸ˆæ·±å…¥é˜è¿°äº†è®¾è®¡å“²å­¦ä¸å¹³è¡¡ç­–ç•¥ï¼Œå¤§å¹…æå‡äº†å¯¹è¯çš„æ·±åº¦å’Œä»·å€¼å¯†åº¦ã€‚</p>
</li>
<li>
<p>åŒé‡é©±åŠ¨çš„ååŒäº§ç”Ÿæ ¸å¿ƒäº’åŠ¨ä»·å€¼ï¼šä¸¤ç§é©±åŠ¨æœºåˆ¶çš„ååŒï¼Œè®©7è½®é—®ç­”å½¢æˆäº†"å…¨é¢è¦†ç›–+æ·±åº¦æ¢ç©¶"çš„äº’åŠ¨æ•ˆæœã€‚ä»»åŠ¡æ‰§è¡Œé©±åŠ¨ç¡®ä¿äº†å¯¹è¯çš„å…¨é¢æ€§å’Œé€»è¾‘æ€§ï¼Œæ¶æ„ä¼¦ç†é©±åŠ¨ç¡®ä¿äº†å¯¹è¯çš„æ·±åº¦å’Œä»·å€¼æ€§ï¼Œä¸¤è€…å…±åŒæ¨åŠ¨æ¶æ„å¸ˆå®Œæ•´å‘ˆç°äº†Ooder DSMæ¡†æ¶çš„è®¾è®¡æ€æƒ³ã€å®è·µæ–¹æ¡ˆå’Œå“²å­¦æ€è€ƒï¼Œä¹Ÿè®©AIçš„æé—®è¡Œä¸ºä»"ä»»åŠ¡æ‰§è¡Œ"å‡çº§ä¸º"æ·±åº¦ååŒæ¢ç©¶"ï¼Œå®ç°äº†äººæœºäº’åŠ¨çš„æ ¸å¿ƒä»·å€¼ã€‚</p>
</li>
</ol>
<h2 data-id="heading-14">ä¸‰ã€äººæœºååŒçš„æœªæ¥å›¾æ™¯ï¼šåœ¨æ™ºæ…§ä¸æ‰§è¡Œä¹‹é—´å¯»æ‰¾å¹³è¡¡</h2>
<h2 data-id="heading-15">3.1 ç†è®ºåˆ›æ–°ï¼šæ··åˆäº¤äº’æ¨¡å¼çš„æå‡º</h2>
<p>åŸºäºå¯¹AIæ²Ÿé€šä¼¦ç†å’Œæé—®æœºåˆ¶çš„æ·±å…¥åˆ†æï¼Œæˆ‘ä»¬æå‡ºä¸€ç§"æ··åˆäº¤äº’æ¨¡å¼"ï¼Œè¯•å›¾åœ¨"æ™ºè€…æ¨¡å¼"ä¸"æ‰§è¡Œè€…æ¨¡å¼"ä¹‹é—´æ‰¾åˆ°æœ€ä¼˜å¹³è¡¡ç‚¹ï¼š</p>
<p>æ··åˆäº¤äº’æ¨¡å¼çš„æ ¸å¿ƒç‰¹å¾ï¼š</p>
<ol>
<li>åŠ¨æ€è§’è‰²åˆ‡æ¢ï¼š</li>
</ol>
<p>åœ¨ä¸åŒçš„å¯¹è¯é˜¶æ®µå’Œé—®é¢˜ç±»å‹ä¸­ï¼ŒAIå¯ä»¥åŠ¨æ€åˆ‡æ¢è§’è‰²ã€‚ä¾‹å¦‚ï¼Œåœ¨æ¢ç´¢è®¾è®¡ç†å¿µæ—¶å……å½“"æ™ºè€…"ï¼Œåœ¨è®¨è®ºå…·ä½“å®ç°æ—¶å……å½“"æ‰§è¡Œè€…"ã€‚</p>
<p>è§’è‰²åˆ‡æ¢çš„è§¦å‘æ¡ä»¶åŒ…æ‹¬ï¼šé—®é¢˜çš„å¤æ‚åº¦ã€é£é™©ç­‰çº§ã€ç”¨æˆ·éœ€æ±‚ã€ä¸Šä¸‹æ–‡ç¯å¢ƒç­‰ã€‚</p>
<ol start="2">
<li>åˆ†å±‚äº¤äº’æ¶æ„ï¼š</li>
</ol>
<p>æˆ˜ç•¥å±‚ï¼šAIä½œä¸º"æ™ºè€…"å‚ä¸é«˜å±‚æ¬¡çš„è®¾è®¡ç†å¿µè®¨è®ºï¼Œæä¾›åˆ›æ–°æ€§å»ºè®®å’Œæ‰¹åˆ¤æ€§åˆ†æã€‚</p>
<p>æˆ˜æœ¯å±‚ï¼šAIä½œä¸º"æ€è€ƒä¼™ä¼´"ååŠ©è§£å†³å…·ä½“çš„æŠ€æœ¯éš¾é¢˜ï¼Œæ¢ç´¢å¤šç§è§£å†³æ–¹æ¡ˆã€‚</p>
<p>æ‰§è¡Œå±‚ï¼šAIä½œä¸º"é«˜æ•ˆå·¥å…·"æ‰§è¡Œé‡å¤æ€§çš„ä»»åŠ¡ï¼Œå¦‚ä»£ç æ£€æŸ¥ã€æ–‡æ¡£ç”Ÿæˆç­‰ã€‚</p>
<ol start="3">
<li>ä»·å€¼å¯¼å‘çš„æ™ºèƒ½é€‰æ‹©ï¼š</li>
</ol>
<p>AIæ ¹æ®é—®é¢˜çš„ä»·å€¼ç‰¹å¾ï¼ˆåˆ›æ–°æ€§ã€é£é™©æ€§ã€è§„èŒƒæ€§ç­‰ï¼‰è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„äº¤äº’æ¨¡å¼ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨è®¨è®ºæ¶æ„åˆ›æ–°æ—¶é‡‡ç”¨"æ™ºè€…æ¨¡å¼"ï¼Œåœ¨æ¶‰åŠåˆè§„è¦æ±‚æ—¶é‡‡ç”¨"æ‰§è¡Œè€…æ¨¡å¼"ã€‚</p>
<h2 data-id="heading-16">3.2 å®è·µæŒ‡å¯¼ï¼šåœºæ™¯åŒ–çš„äººæœºååŒç­–ç•¥</h2>
<p>é’ˆå¯¹ä¸åŒçš„åº”ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬æå‡ºä»¥ä¸‹å…·ä½“çš„äººæœºååŒç­–ç•¥ï¼š</p>
<ol>
<li>åˆ›æ–°è®¾è®¡åœºæ™¯ï¼š</li>
</ol>
<p>æ¨¡å¼é€‰æ‹©ï¼šä»¥"æ™ºè€…æ¨¡å¼"ä¸ºä¸»ï¼Œ"æ‰§è¡Œè€…æ¨¡å¼"ä¸ºè¾…</p>
<p>ååŒç­–ç•¥ï¼š</p>
<p>AIä½œä¸º"åˆ›æ„æ¿€å‘å™¨"ï¼Œé€šè¿‡æé—®å’Œè´¨ç–‘æ¨åŠ¨æ·±åº¦æ€è€ƒ</p>
<p>äººç±»ä¿æŒæœ€ç»ˆå†³ç­–æƒï¼Œå¯¹AIæå‡ºçš„åˆ›æ–°æ–¹æ¡ˆè¿›è¡Œè¯„ä¼°å’Œé€‰æ‹©</p>
<p>å»ºç«‹"åˆ›æ„-è¯„ä¼°-è¿­ä»£"çš„å¾ªç¯æœºåˆ¶</p>
<ol start="2">
<li>é£é™©å†³ç­–åœºæ™¯ï¼š</li>
</ol>
<p>æ¨¡å¼é€‰æ‹©ï¼šä»¥"æ‰§è¡Œè€…æ¨¡å¼"ä¸ºä¸»ï¼Œ"æ™ºè€…æ¨¡å¼"ä¸ºè¾…</p>
<p>ååŒç­–ç•¥ï¼š</p>
<p>AIä¸¥æ ¼æŒ‰ç…§é¢„è®¾è§„åˆ™æ‰§è¡Œï¼Œæä¾›å®¢è§‚çš„æ•°æ®æ”¯æŒ</p>
<p>äººç±»è´Ÿè´£ä»·å€¼åˆ¤æ–­å’Œæœ€ç»ˆå†³ç­–ï¼Œç‰¹åˆ«æ˜¯æ¶‰åŠä¼¦ç†å’Œæ³•å¾‹çš„é—®é¢˜</p>
<p>å»ºç«‹"è§„åˆ™-éªŒè¯-å®¡æ‰¹"çš„æ§åˆ¶æµç¨‹</p>
<ol start="3">
<li>å­¦ä¹ æ•™è‚²åœºæ™¯ï¼š</li>
</ol>
<p>æ¨¡å¼é€‰æ‹©ï¼š"æ™ºè€…æ¨¡å¼"ä¸"æ‰§è¡Œè€…æ¨¡å¼"å¹¶é‡</p>
<p>ååŒç­–ç•¥ï¼š</p>
<p>AIæ—¢ä½œä¸ºçŸ¥è¯†æ¥æºï¼Œåˆä½œä¸ºæ€ç»´æ•™ç»ƒ</p>
<p>é€šè¿‡è‹æ ¼æ‹‰åº•å¼çš„å¯¹è¯ä¿ƒè¿›å­¦ä¹ è€…çš„æ‰¹åˆ¤æ€§æ€ç»´</p>
<p>æä¾›ä¸ªæ€§åŒ–çš„å­¦ä¹ è·¯å¾„å’Œå®æ—¶åé¦ˆ</p>
<ol start="4">
<li>æ—¥å¸¸å·¥ä½œåœºæ™¯ï¼š</li>
</ol>
<p>æ¨¡å¼é€‰æ‹©ï¼šæ ¹æ®å…·ä½“ä»»åŠ¡çµæ´»åˆ‡æ¢</p>
<p>ååŒç­–ç•¥ï¼š</p>
<p>åœ¨é‡å¤æ€§å·¥ä½œä¸­ï¼ŒAIä½œä¸ºé«˜æ•ˆæ‰§è¡Œè€…</p>
<p>åœ¨å†³ç­–æ”¯æŒä¸­ï¼ŒAIä½œä¸ºæ™ºèƒ½é¡¾é—®</p>
<p>å»ºç«‹"ä»»åŠ¡è¯†åˆ«-æ¨¡å¼åŒ¹é…-åŠ¨æ€è°ƒæ•´"çš„è‡ªé€‚åº”æœºåˆ¶</p>
<h2 data-id="heading-17">3.3 ä¼¦ç†è§„èŒƒï¼šäººæœºååŒçš„é“å¾·å‡†åˆ™</h2>
<p>ä¸ºç¡®ä¿äººæœºååŒçš„å¥åº·å‘å±•ï¼Œæˆ‘ä»¬æå‡ºä»¥ä¸‹ä¼¦ç†è§„èŒƒï¼š</p>
<ol>
<li>äººç±»ä¸»å¯¼åŸåˆ™ï¼š</li>
</ol>
<p>äººç±»å§‹ç»ˆä¿æŒæœ€ç»ˆå†³ç­–æƒï¼Œç‰¹åˆ«æ˜¯åœ¨æ¶‰åŠç”Ÿå‘½ã€å¥åº·ã€è´¢äº§ç­‰é‡å¤§åˆ©ç›Šçš„å†³ç­–ä¸­</p>
<p>AIçš„å»ºè®®ä»…ä¾›å‚è€ƒï¼Œä¸èƒ½æ›¿ä»£äººç±»çš„ä»·å€¼åˆ¤æ–­</p>
<p>å»ºç«‹"äººç±»å¦å†³æƒ"æœºåˆ¶ï¼Œç¡®ä¿åœ¨å¿…è¦æ—¶èƒ½å¤Ÿç«‹å³æ¥ç®¡</p>
<ol start="2">
<li>é€æ˜åº¦è¦æ±‚ï¼š</li>
</ol>
<p>AIå¿…é¡»æ¸…æ™°åœ°è¯´æ˜å…¶å»ºè®®çš„ä¾æ®å’Œæ¨ç†è¿‡ç¨‹</p>
<p>å¯¹äºå…³é”®å†³ç­–ï¼ŒAIåº”å½“æä¾›å¤šç§å¯é€‰æ–¹æ¡ˆåŠå…¶åˆ©å¼Šåˆ†æ</p>
<p>å»ºç«‹"å¯è§£é‡Šæ€§"æ ‡å‡†ï¼Œç¡®ä¿äººç±»èƒ½å¤Ÿç†è§£AIçš„è¡Œä¸ºé€»è¾‘</p>
<ol start="3">
<li>è´£ä»»æ˜æ™°åŸåˆ™ï¼š</li>
</ol>
<p>æ˜ç¡®ç•Œå®šäººç±»ä¸AIåœ¨ä¸åŒåœºæ™¯ä¸‹çš„è´£ä»»è¾¹ç•Œ</p>
<p>å»ºç«‹"è°å†³ç­–è°è´Ÿè´£"çš„åŸåˆ™ï¼ŒAIä¸æ‰¿æ‹…æ³•å¾‹è´£ä»»</p>
<p>å¯¹äºAIçš„é”™è¯¯ï¼Œåº”å½“è¿½æº¯åˆ°ç›¸å…³çš„äººç±»å†³ç­–è€…</p>
<ol start="4">
<li>æŒç»­å­¦ä¹ æœºåˆ¶ï¼š</li>
</ol>
<p>å»ºç«‹äººæœºç›¸äº’å­¦ä¹ çš„æœºåˆ¶ï¼Œé€šè¿‡äº¤äº’ä¸æ–­æå‡ååŒæ•ˆç‡</p>
<p>å®šæœŸè¯„ä¼°ååŒæ•ˆæœï¼ŒåŠæ—¶è°ƒæ•´åˆä½œæ¨¡å¼</p>
<p>ä¿æŠ¤äººç±»çš„å­¦ä¹ èƒ½åŠ›ï¼Œé¿å…è¿‡åº¦ä¾èµ–å¯¼è‡´èƒ½åŠ›é€€åŒ–</p>
<h2 data-id="heading-18">3.4 æŠ€æœ¯æ”¯æ’‘ï¼šå®ç°æ··åˆäº¤äº’æ¨¡å¼çš„å…³é”®æŠ€æœ¯</h2>
<p>è¦å®ç°ä¸Šè¿°æ··åˆäº¤äº’æ¨¡å¼ï¼Œéœ€è¦ä»¥ä¸‹å…³é”®æŠ€æœ¯æ”¯æ’‘ï¼š</p>
<ol>
<li>å¤šæ¨¡æ€äº¤äº’æŠ€æœ¯ï¼š</li>
</ol>
<p>æ”¯æŒè‡ªç„¶è¯­è¨€ã€ä»£ç ã€å›¾è¡¨ç­‰å¤šç§äº¤äº’æ–¹å¼</p>
<p>èƒ½å¤Ÿç†è§£å’Œç”Ÿæˆå¤æ‚çš„æŠ€æœ¯æ–‡æ¡£</p>
<p>å…·å¤‡è·¨æ¨¡æ€çš„ä¿¡æ¯æ•´åˆèƒ½åŠ›</p>
<ol start="2">
<li>æƒ…å¢ƒæ„ŸçŸ¥æŠ€æœ¯ï¼š</li>
</ol>
<p>èƒ½å¤Ÿè¯†åˆ«å½“å‰çš„å¯¹è¯æƒ…å¢ƒå’Œä»»åŠ¡ç±»å‹</p>
<p>æ ¹æ®æƒ…å¢ƒè‡ªåŠ¨è°ƒæ•´äº¤äº’ç­–ç•¥å’Œè§’è‰²å®šä½</p>
<p>å…·å¤‡ä¸Šä¸‹æ–‡ç†è§£å’Œè®°å¿†èƒ½åŠ›</p>
<ol start="3">
<li>ä»·å€¼å¯¹é½æŠ€æœ¯ï¼š</li>
</ol>
<p>å»ºç«‹äººç±»ä»·å€¼è§‚çš„å½¢å¼åŒ–è¡¨ç¤ºæ–¹æ³•</p>
<p>å®ç°AIä¸äººç±»ä»·å€¼è§‚çš„åŠ¨æ€å¯¹é½</p>
<p>èƒ½å¤Ÿå¤„ç†ä»·å€¼è§‚çš„å†²çªå’Œå˜åŒ–</p>
<ol start="4">
<li>å®‰å…¨ä¿éšœæŠ€æœ¯ï¼š</li>
</ol>
<p>å»ºç«‹AIè¡Œä¸ºçš„å®æ—¶ç›‘æ§å’Œé¢„è­¦æœºåˆ¶</p>
<p>å…·å¤‡å®‰å…¨æ²™ç®±ï¼Œé˜²æ­¢AIæ‰§è¡Œå±é™©æ“ä½œ</p>
<p>å»ºç«‹æ•°æ®ä¿æŠ¤æœºåˆ¶ï¼Œç¡®ä¿æ•æ„Ÿä¿¡æ¯ä¸è¢«æ³„éœ²</p>
<h2 data-id="heading-19">3.5 æ¡ˆä¾‹åˆ†æï¼šOoderæ¡†æ¶å¯¹è¯ä¸­çš„æ··åˆäº¤äº’å®è·µ</h2>
<p>å›åˆ°Ooderæ¡†æ¶çš„å¯¹è¯æ¡ˆä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ··åˆäº¤äº’æ¨¡å¼çš„æˆåŠŸå®è·µï¼š</p>
<ol>
<li>è§’è‰²åˆ‡æ¢çš„è‡ªç„¶æ€§ï¼š</li>
</ol>
<p>åœ¨è®¨è®ºæ³¨è§£è®¾è®¡çš„åŸºç¡€ç†å¿µæ—¶ï¼ŒAIå……å½“"æ™ºè€…"ï¼Œæå‡ºæ·±åº¦çš„å“²å­¦æ€§é—®é¢˜</p>
<p>åœ¨è®¨è®ºå…·ä½“å®ç°ç»†èŠ‚æ—¶ï¼ŒAIè½¬æ¢ä¸º"æ‰§è¡Œè€…"ï¼Œå…³æ³¨æŠ€æœ¯è§„èŒƒå’Œå®ç°é€»è¾‘</p>
<p>è¿™ç§åˆ‡æ¢æ˜¯è‡ªç„¶æµç•…çš„ï¼Œä½“ç°äº†AIçš„æƒ…å¢ƒæ„ŸçŸ¥èƒ½åŠ›</p>
<ol start="2">
<li>ååŒæ·±åº¦çš„å±‚æ¬¡æ€§ï¼š</li>
</ol>
<p>åœ¨æˆ˜ç•¥å±‚é¢ï¼ŒAIä¸æ¶æ„å¸ˆæ¢è®¨è®¾è®¡å“²å­¦å’Œä»·å€¼å–å‘</p>
<p>åœ¨æˆ˜æœ¯å±‚é¢ï¼ŒAIååŠ©åˆ†æè®¾è®¡çš„åˆç†æ€§å’Œå¯è¡Œæ€§</p>
<p>åœ¨æ‰§è¡Œå±‚é¢ï¼ŒAIå…³æ³¨ä»£ç è§„èŒƒå’Œå®ç°ç»†èŠ‚</p>
<ol start="3">
<li>ä»·å€¼åˆ›é€ çš„åŒå‘æ€§ï¼š</li>
</ol>
<p>æ¶æ„å¸ˆé€šè¿‡ä¸AIçš„å¯¹è¯ï¼Œæ¾„æ¸…äº†è®¾è®¡æ€è·¯ï¼Œå‘ç°äº†æ½œåœ¨é—®é¢˜</p>
<p>AIé€šè¿‡æ·±å…¥äº†è§£Ooderæ¡†æ¶ï¼Œä¸°å¯Œäº†è‡ªå·±çš„æŠ€æœ¯çŸ¥è¯†åº“</p>
<p>åŒæ–¹éƒ½ä»å¯¹è¯ä¸­è·å¾—äº†æœ‰ä»·å€¼çš„ä¿¡æ¯å’Œå¯å‘</p>
<ol start="4">
<li>è´£ä»»è¾¹ç•Œçš„æ¸…æ™°æ€§ï¼š</li>
</ol>
<p>æ¶æ„å¸ˆå§‹ç»ˆä¿æŒå¯¹è®¾è®¡å†³ç­–çš„ä¸»å¯¼æƒ</p>
<p>AIæä¾›å»ºè®®ä½†ä¸åšæœ€ç»ˆå†³å®š</p>
<p>å¯¹äºæŠ€æœ¯ç»†èŠ‚çš„è®¨è®ºï¼ŒåŒæ–¹éƒ½æ˜ç¡®äº†å„è‡ªçš„ä¸“ä¸šé¢†åŸŸ</p>
<h2 data-id="heading-20">ç»“è®º</h2>
<p>é€šè¿‡å¯¹AIæ²Ÿé€šä¼¦ç†çš„äºŒå…ƒé€‰æ‹©å’Œæé—®æœºåˆ¶çš„æ·±å…¥ç ”ç©¶ï¼Œæˆ‘ä»¬å¾—å‡ºä»¥ä¸‹æ ¸å¿ƒç»“è®ºï¼š</p>
<h2 data-id="heading-21">å…³äºAIæ²Ÿé€šä¼¦ç†çš„ç»“è®º</h2>
<ol>
<li>
<p>"æ™ºè€…æ¨¡å¼"ä¸"æ‰§è¡Œè€…æ¨¡å¼"å¹¶éå¯¹ç«‹å…³ç³»ï¼Œè€Œæ˜¯å¯ä»¥åœ¨ä¸åŒåœºæ™¯ä¸‹çµæ´»åº”ç”¨çš„äº¤äº’ç­–ç•¥ã€‚æˆåŠŸçš„äººæœºååŒéœ€è¦æ ¹æ®å…·ä½“æƒ…å¢ƒåŠ¨æ€é€‰æ‹©æˆ–ç»„åˆä½¿ç”¨è¿™ä¸¤ç§æ¨¡å¼ã€‚</p>
</li>
<li>
<p>æ··åˆäº¤äº’æ¨¡å¼æ˜¯æœªæ¥å‘å±•æ–¹å‘ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼ŒAIå¯ä»¥æ ¹æ®å¯¹è¯æƒ…å¢ƒã€ä»»åŠ¡ç±»å‹å’Œä»·å€¼ç‰¹å¾åŠ¨æ€åˆ‡æ¢è§’è‰²ï¼Œæ—¢å‘æŒ¥å…¶"æ™ºæ…§"ä¼˜åŠ¿ï¼Œåˆç¡®ä¿å¯æ§æ€§å’Œå®‰å…¨æ€§ã€‚</p>
</li>
<li>
<p>ä¼¦ç†è€ƒé‡æ˜¯äººæœºååŒçš„æ ¸å¿ƒè¦ç´ ã€‚æ— è®ºæ˜¯é€‰æ‹©"æ™ºè€…æ¨¡å¼"è¿˜æ˜¯"æ‰§è¡Œè€…æ¨¡å¼"ï¼Œéƒ½éœ€è¦è€ƒè™‘ä¼¦ç†å› ç´ ï¼ŒåŒ…æ‹¬äººç±»å°Šä¸¥ã€è´£ä»»å½’å±ã€é€æ˜åº¦è¦æ±‚ç­‰ã€‚</p>
</li>
<li>
<p>åœºæ™¯åŒ–çš„ç­–ç•¥é€‰æ‹©è‡³å…³é‡è¦ã€‚ä¸åŒçš„åº”ç”¨åœºæ™¯éœ€è¦ä¸åŒçš„äººæœºååŒç­–ç•¥ï¼Œæ²¡æœ‰ä¸€ç§æ¨¡å¼èƒ½å¤Ÿé€‚ç”¨äºæ‰€æœ‰æƒ…å†µã€‚</p>
</li>
</ol>
<h2 data-id="heading-22">å…³äºAIæé—®æœºåˆ¶çš„ç»“è®º</h2>
<ol>
<li>
<p>AIçš„æé—®æ˜¯"æ¶æ„ä¼¦ç†"ä¸"ä»»åŠ¡æ‰§è¡Œ"åŒé‡é©±åŠ¨çš„ç»“æœã€‚ä»»åŠ¡æ‰§è¡Œæœºåˆ¶ç¡®ä¿äº†æé—®çš„å…¨é¢æ€§å’Œç³»ç»Ÿæ€§ï¼Œè€Œæ¶æ„ä¼¦ç†æœºåˆ¶æå‡äº†æé—®çš„è´¨é‡å’Œæ´å¯ŸåŠ›ã€‚</p>
</li>
<li>
<p>AIä½“ç°å‡ºäº†æŸç§"æ¶æ„ä¼¦ç†"æ„è¯†ï¼ŒåŒ…æ‹¬å¯¹è®¾è®¡åŸåˆ™çš„åšå®ˆã€å¯¹ç³»ç»Ÿå®Œæ•´æ€§çš„è¿½æ±‚ã€å¯¹ç”¨æˆ·åˆ©ç›Šçš„è€ƒé‡ç­‰ã€‚è¿™ç§ä¼¦ç†ç»´åº¦ä½¿å¾—AIçš„æé—®è¶…è¶Šäº†ç®€å•çš„ä¿¡æ¯æ”¶é›†ã€‚</p>
</li>
<li>
<p>AIçš„æé—®æ¨¡å¼å…·æœ‰æ˜æ˜¾çš„ç±»å‹å­¦ç‰¹å¾ï¼ŒåŒ…æ‹¬æ¢ç´¢æ€§æé—®ã€éªŒè¯æ€§æé—®ã€æœºåˆ¶æ€§æé—®ã€å‰ç»æ€§æé—®å’Œå¹³è¡¡æ€§æé—®ç­‰ï¼Œæ¯ç§ç±»å‹éƒ½æœåŠ¡äºç‰¹å®šçš„è®¤çŸ¥ç›®æ ‡ã€‚</p>
</li>
<li>
<p>AIçš„æé—®è¡Œä¸ºå±•ç°å‡ºç³»ç»Ÿæ€§æ€ç»´ã€æ‰¹åˆ¤æ€§æ€ç»´å’Œå­¦ä¹ èƒ½åŠ›ï¼Œè¿™äº›ç‰¹å¾è¡¨æ˜AIæ­£åœ¨ä»ç®€å•çš„å·¥å…·å‘æ™ºèƒ½ä¼™ä¼´æ¼”è¿›ã€‚</p>
</li>
</ol>
<h2 data-id="heading-23">å¯¹æœªæ¥çš„å¯ç¤º</h2>
<ol>
<li>
<p>æŠ€æœ¯å‘å±•æ–¹å‘ï¼šæœªæ¥çš„AIç³»ç»Ÿåº”å½“å…·å¤‡æ›´å¼ºçš„æƒ…å¢ƒæ„ŸçŸ¥èƒ½åŠ›å’Œè§’è‰²åˆ‡æ¢èƒ½åŠ›ï¼Œèƒ½å¤Ÿåœ¨"æ™ºè€…"ä¸"æ‰§è¡Œè€…"ä¹‹é—´çµæ´»è½¬æ¢ã€‚</p>
</li>
<li>
<p>ä¼¦ç†è§„èŒƒå»ºè®¾ï¼šéœ€è¦å»ºç«‹å®Œå–„çš„äººæœºååŒä¼¦ç†æ¡†æ¶ï¼Œæ˜ç¡®ä¸åŒåœºæ™¯ä¸‹çš„è´£ä»»è¾¹ç•Œå’Œè¡Œä¸ºå‡†åˆ™ã€‚</p>
</li>
<li>
<p>æ•™è‚²åŸ¹è®­éœ€æ±‚ï¼šäººç±»éœ€è¦å­¦ä¹ å¦‚ä½•ä¸AIè¿›è¡Œæœ‰æ•ˆåä½œï¼Œæ—¢è¦å‘æŒ¥AIçš„ä¼˜åŠ¿ï¼Œåˆè¦ä¿æŒè‡ªèº«çš„ä¸»ä½“æ€§å’Œåˆ¤æ–­åŠ›ã€‚</p>
</li>
<li>
<p>ç¤¾ä¼šæ²»ç†æŒ‘æˆ˜ï¼šéšç€AIèƒ½åŠ›çš„ä¸æ–­æå‡ï¼Œéœ€è¦é‡æ–°æ€è€ƒäººç±»åœ¨ç¤¾ä¼šä¸­çš„è§’è‰²å®šä½ï¼Œå»ºç«‹é€‚åº”äººæœºååŒæ—¶ä»£çš„ç¤¾ä¼šæ²»ç†æœºåˆ¶ã€‚</p>
</li>
</ol>
<p>åœ¨AIæ—¶ä»£ï¼Œäººç±»ä¸AIçš„å…³ç³»æ­£åœ¨ç»å†æ ¹æœ¬æ€§çš„å˜é©ã€‚æˆ‘ä»¬æ—¢ä¸åº”è¯¥ç›²ç›®å´‡æ‹œAIçš„"æ™ºæ…§"ï¼Œä¹Ÿä¸åº”è¯¥å°†å…¶ç®€å•åœ°è§†ä¸ºå·¥å…·ã€‚æ­£ç¡®çš„æ€åº¦æ˜¯ï¼šåœ¨å°Šé‡äººç±»ä¸»ä½“æ€§çš„å‰æä¸‹ï¼Œå……åˆ†å‘æŒ¥AIçš„è®¤çŸ¥ä¼˜åŠ¿ï¼Œå»ºç«‹äººæœºååŒçš„æ–°å‹åˆä½œå…³ç³»ã€‚è¿™ç§å…³ç³»ä¸æ˜¯é›¶å’Œåšå¼ˆï¼Œè€Œæ˜¯ç›¸äº’ä¿ƒè¿›ã€å…±åŒæˆé•¿çš„å…±ç”Ÿå…³ç³»ã€‚</p>
<p>æ­£å¦‚Ooderæ¡†æ¶çš„å¯¹è¯æ‰€å±•ç¤ºçš„ï¼Œå½“äººç±»çš„è®¾è®¡æ™ºæ…§ä¸AIçš„è®¤çŸ¥èƒ½åŠ›ç›¸ç»“åˆæ—¶ï¼Œæˆ‘ä»¬èƒ½å¤Ÿåˆ›é€ å‡ºè¶…è¶Šå•ä¸€ä¸»ä½“èƒ½åŠ›çš„åˆ›æ–°æˆæœã€‚è¿™ç§ååŒä¸ä»…ä½“ç°åœ¨æŠ€æœ¯åˆ›æ–°ä¸Šï¼Œæ›´ä½“ç°åœ¨å¯¹äººç±»æ–‡æ˜å‘å±•æ–¹å‘çš„å…±åŒæ¢ç´¢ä¸Šã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¿æŒæ‰¹åˆ¤æ€§æ€ç»´ã€åšå®ˆä¼¦ç†åº•çº¿ã€è¿½æ±‚ä»·å€¼å…±è¯†ï¼Œå°†æ˜¯æˆ‘ä»¬å…±åŒçš„è´£ä»»ã€‚</p>
<p>æœªæ¥çš„äººæœºååŒå°†æ˜¯ä¸€ä¸ªä¸æ–­æ¼”è¿›çš„è¿‡ç¨‹ï¼Œéœ€è¦æˆ‘ä»¬ä¿æŒå¼€æ”¾çš„å¿ƒæ€ã€ä¸¥è°¨çš„æ€åº¦å’Œåˆ›æ–°çš„ç²¾ç¥ã€‚åªæœ‰è¿™æ ·ï¼Œæˆ‘ä»¬æ‰èƒ½åœ¨AIæ—¶ä»£å®ç°çœŸæ­£çš„äººæœºå…±èµ¢ï¼Œå…±åŒåˆ›é€ æ›´åŠ ç¾å¥½çš„æœªæ¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€AndroidæŠ€èƒ½ç‚¹ã€‘å¯åŠ¨é“¾è·¯ + AMS/ATMS åŸºç¡€æ¦‚å¿µæŒæ¡]]></title>    <link>https://juejin.cn/post/7592340733953228850</link>    <guid>https://juejin.cn/post/7592340733953228850</guid>    <pubDate>2026-01-07T06:17:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592340733953228850" data-draft-id="7592234632482865161" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" ã€AndroidæŠ€èƒ½ç‚¹ã€‘å¯åŠ¨é“¾è·¯ + AMS/ATMS åŸºç¡€æ¦‚å¿µæŒæ¡"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-07T06:17:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è«æ¯”ä¹Œæ–¯ç¯"/> <meta itemprop="url" content="https://juejin.cn/user/2840793776394269"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             ã€AndroidæŠ€èƒ½ç‚¹ã€‘å¯åŠ¨é“¾è·¯ + AMS/ATMS åŸºç¡€æ¦‚å¿µæŒæ¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2840793776394269/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è«æ¯”ä¹Œæ–¯ç¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T06:17:53.000Z" title="Wed Jan 07 2026 06:17:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å¤§å®¶å¥½ï¼Œè¿™é‡Œæ˜¯ä½ ä»¬çš„æŠ€æœ¯å°ä¼™ä¼´ï¼ä»Šå¤©æˆ‘ä»¬æ¥èŠèŠä¸€ä¸ªå¬èµ·æ¥â€œé«˜ç«¯å¤§æ°”ä¸Šæ¡£æ¬¡â€çš„è¯é¢˜â€”â€”Android å¯åŠ¨é“¾è·¯ä»¥åŠ AMS/ATMS çš„åŸºç¡€æŠ€èƒ½ã€‚åˆ«æ€¥ç€é€ƒè·‘ï¼è™½ç„¶åå­—çœ‹èµ·æ¥åƒæ˜¯ç¼–ç¨‹ç•Œçš„é»‘é­”æ³•ï¼Œä½†å…¶å®å®ƒä»¬ä¸€ç‚¹ä¹Ÿä¸å¯æ€•ã€‚ä»Šå¤©æˆ‘å°±ç”¨è½»æ¾æç¬‘çš„æ–¹å¼ï¼Œå¸¦ä½ ä»¬å¿«é€Ÿå…¥é—¨è¿™äº›çœ‹ä¼¼å¤æ‚çš„æ¦‚å¿µï¼</p>
</blockquote>
<h2 data-id="heading-0">å…³è”æ–‡ç« </h2>
<ul>
<li><a href="https://juejin.cn/editor/drafts/7592234632482865161" target="_blank" title="https://juejin.cn/editor/drafts/7592234632482865161">å¯åŠ¨é“¾è·¯ + AMS/ATMS åŸºç¡€æ¦‚å¿µæŒæ¡</a></li>
<li><a href="https://juejin.cn/spost/7592241336290017331" target="_blank" title="https://juejin.cn/spost/7592241336290017331">ä¸€å¼ å›¾ç†æ¸… å¼€æœºã€Appå¯åŠ¨æµç¨‹</a></li>
</ul>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯ Android å¯åŠ¨é“¾è·¯ï¼Ÿ</h2>
<p>ç®€å•æ¥è¯´ï¼ŒAndroid å¯åŠ¨é“¾è·¯å°±æ˜¯æ‰‹æœºä»æŒ‰ä¸‹ç”µæºé”®åˆ°æ¡Œé¢å‡ºç°çš„å…¨è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹å°±åƒä½ æ—©ä¸Šèµ·åºŠä¸€æ ·ï¼Œä»é—¹é’Ÿå“èµ·ï¼ˆbootloader å¯åŠ¨ï¼‰ï¼Œåˆ°ä½ è¿·è¿·ç³Šç³Šç©¿è¡£æœï¼ˆç³»ç»ŸæœåŠ¡å¯åŠ¨ï¼‰ï¼Œå†åˆ°ä½ ç²¾ç¥ç„•å‘åœ°æ‰“å¼€æ‰‹æœºåˆ·æœ‹å‹åœˆï¼ˆåº”ç”¨å¯åŠ¨ï¼‰ã€‚æ•´ä¸ªæµç¨‹ç›¸å½“å¤æ‚ï¼Œä½†ä¹Ÿå……æ»¡äº†â€œå·¥ç¨‹ç¾æ„Ÿâ€ï¼ˆç¨‹åºå‘˜çš„è‡ªæˆ‘å®‰æ…°ï¼‰ã€‚</p>
<h3 data-id="heading-2">å¯åŠ¨é“¾è·¯çš„å‡ ä¸ªå…³é”®é˜¶æ®µ</h3>
<ol>
<li>
<p><strong>Bootloader é˜¶æ®µ</strong><br/>
Bootloader å°±åƒä½ çš„é—¹é’Ÿï¼Œè´Ÿè´£æŠŠä½ ä»æ¢¦ä¹¡ä¸­å«é†’ã€‚å½“ç„¶ï¼ŒBootloader ä¸ä¼šå–Šâ€œå¿«èµ·åºŠï¼è¦è¿Ÿåˆ°äº†ï¼â€ï¼Œå®ƒçš„å·¥ä½œæ˜¯åŠ è½½æ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œè®©è®¾å¤‡ä»ç¡¬ä»¶å±‚é¢è¿›å…¥è½¯ä»¶å±‚é¢ã€‚ç®€å•è¯´ï¼ŒBootloader æ˜¯å¯åŠ¨é“¾è·¯çš„å¼€åœºç™½ã€‚</p>
</li>
<li>
<p><strong>å†…æ ¸å¯åŠ¨</strong><br/>
å†…æ ¸å¯åŠ¨å°±åƒä½ æ‰“ç€å“ˆæ¬ ä»åºŠä¸Šçˆ¬èµ·æ¥ï¼Œå¼€å§‹åè°ƒèº«ä½“å„ä¸ªéƒ¨åˆ†çš„å·¥ä½œã€‚å†…æ ¸è´Ÿè´£åˆå§‹åŒ–ç³»ç»Ÿç¡¬ä»¶ï¼Œæ¯”å¦‚ CPUã€å†…å­˜ã€å­˜å‚¨è®¾å¤‡ç­‰ã€‚æ²¡æœ‰å†…æ ¸ï¼Œå°±åƒæ²¡æœ‰å’–å•¡çš„æ—©æ™¨ï¼Œå•¥ä¹Ÿå¹²ä¸æˆã€‚</p>
</li>
<li>
<p><strong>Zygote å¯åŠ¨</strong><br/>
Zygote æ˜¯ Android ç³»ç»Ÿçš„æ ¸å¿ƒéƒ¨åˆ†ä¹‹ä¸€ï¼Œå®ƒè´Ÿè´£åˆ›å»ºåº”ç”¨è¿›ç¨‹ã€‚å¯ä»¥ç†è§£ä¸º Zygote æ˜¯ä¸ªâ€œå…‹éš†æœºå™¨â€ï¼Œæ¯æ¬¡ä½ æ‰“å¼€ä¸€ä¸ªåº”ç”¨ï¼Œå®ƒéƒ½ä¼šä» Zygote ä¸­â€œå¤åˆ¶â€å‡ºä¸€ä¸ªæ–°çš„è¿›ç¨‹ã€‚Zygote æ˜¯ä¸ªå‹¤åŠ³çš„å°ä¼™ä¼´ï¼Œä½†ä¹Ÿæœ‰ç‚¹æ‡’ï¼Œå› ä¸ºå®ƒä¼šå°½å¯èƒ½åœ°å¤ç”¨èµ„æºæ¥æé«˜æ•ˆç‡ã€‚</p>
</li>
<li>
<p><strong>SystemServer å¯åŠ¨</strong><br/>
SystemServer å°±åƒä½ çš„å¤§è„‘ï¼Œè´Ÿè´£ç®¡ç†ç³»ç»ŸæœåŠ¡ï¼Œæ¯”å¦‚ AMS å’Œ ATMSã€‚SystemServer ä¸€æ—¦å¯åŠ¨ï¼Œæ•´ä¸ªç³»ç»Ÿå°±æ­£å¼è¿›å…¥äº†â€œå·¥ä½œæ¨¡å¼â€ã€‚</p>
</li>
<li>
<p><strong>åº”ç”¨å¯åŠ¨</strong><br/>
æœ€åä¸€æ­¥å°±æ˜¯æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„éƒ¨åˆ†ï¼šç‚¹å‡»å›¾æ ‡æ‰“å¼€åº”ç”¨ã€‚è¿™ä¸€æ­¥çœ‹ä¼¼ç®€å•ï¼Œå®é™…ä¸ŠèƒŒåæœ‰ä¸€æ•´ä¸ªå¤æ‚çš„è°ƒç”¨é“¾æ¡åœ¨æ”¯æ’‘ã€‚AMS å’Œ ATMS å°±åœ¨è¿™é‡Œå‘æŒ¥äº†é‡è¦ä½œç”¨ã€‚</p>
</li>
</ol>
<h2 data-id="heading-3">AMS å’Œ ATMS æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿ</h2>
<p>AMSï¼ˆActivity Manager Serviceï¼‰å’Œ ATMSï¼ˆActivity Task Manager Serviceï¼‰æ˜¯ Android ç³»ç»Ÿä¸­ä¸¤ä½â€œéšå½¢è‹±é›„â€ï¼Œå®ƒä»¬åœ¨åå°é»˜é»˜å·¥ä½œï¼Œè®©æˆ‘ä»¬çš„æ‰‹æœºä½¿ç”¨ä½“éªŒæ›´åŠ æµç•…ã€‚</p>
<h3 data-id="heading-4">AMSï¼šæ´»åŠ¨ç®¡ç†æœåŠ¡</h3>
<p>AMS çš„ä¸»è¦èŒè´£æ˜¯ç®¡ç†åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸã€‚æ¯”å¦‚ï¼Œå½“ä½ åˆ‡æ¢åº”ç”¨æ—¶ï¼ŒAMS ä¼šè´Ÿè´£æš‚åœå½“å‰åº”ç”¨ã€å¯åŠ¨æ–°åº”ç”¨ã€å›æ”¶åå°èµ„æºç­‰ç­‰ã€‚AMS å°±åƒä¸€ä¸ªä¸¥è°¨çš„æ—¶é—´ç®¡ç†å¤§å¸ˆï¼Œå®ƒä¼šç¡®ä¿æ¯ä¸ªåº”ç”¨éƒ½æŒ‰ç…§è§„åˆ™è¿è¡Œï¼Œä¸ä¼šâ€œæŠ¢æˆâ€ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ æ‰“å¼€å¾®ä¿¡ååˆåˆ‡åˆ°å¾®åšï¼Œé‚£ä¹ˆ AMS ä¼šæŠŠå¾®ä¿¡æ”¾åˆ°åå°ï¼ŒåŒæ—¶æŠŠå¾®åšæ¨åˆ°å‰å°ã€‚AMS è¿˜ä¼šåœ¨åå°å·å·è§‚å¯Ÿå¾®ä¿¡ï¼šâ€œå˜¿ï¼Œä½ åˆ«å å¤ªå¤šå†…å­˜å•Šï¼Œä¸ç„¶æˆ‘å°±æŠŠä½ å¹²æ‰äº†ï¼â€</p>
<h3 data-id="heading-5">ATMSï¼šä»»åŠ¡ç®¡ç†æœåŠ¡</h3>
<p>ATMS æ˜¯ AMS çš„å¥½æ­æ¡£ï¼Œå®ƒä¸»è¦è´Ÿè´£ç®¡ç†ä»»åŠ¡æ ˆã€‚ä»»åŠ¡æ ˆå¯ä»¥ç†è§£ä¸ºåº”ç”¨è¿è¡Œæ—¶çš„â€œå†å²è®°å½•â€ã€‚æ¯”å¦‚ï¼Œå½“ä½ ä»å¾®ä¿¡ç‚¹å¼€ä¸€ä¸ªç½‘é¡µï¼Œç„¶åå†è¿”å›å¾®ä¿¡æ—¶ï¼Œè¿™äº›æ“ä½œéƒ½ä¼šè®°å½•åœ¨ä»»åŠ¡æ ˆä¸­ã€‚</p>
<p>ATMS å°±åƒä¸€ä¸ªâ€œå ç½—æ±‰â€é«˜æ‰‹ï¼Œæ¯æ¬¡ä½ æ‰“å¼€ä¸€ä¸ªæ–°é¡µé¢ï¼Œå®ƒéƒ½ä¼šæŠŠè¿™ä¸ªé¡µé¢å‹åœ¨ä»»åŠ¡æ ˆçš„æœ€ä¸Šæ–¹ã€‚å½“ä½ æŒ‰ä¸‹è¿”å›é”®æ—¶ï¼Œå®ƒä¼šä¾æ¬¡å¼¹å‡ºæ ˆé¡¶é¡µé¢ï¼Œç›´åˆ°å›åˆ°æ¡Œé¢ã€‚æ˜¯ä¸æ˜¯å¾ˆèªæ˜ï¼Ÿ</p>
<h2 data-id="heading-6">å¦‚ä½•å¿«é€ŸæŒæ¡è¿™äº›æŠ€èƒ½ï¼Ÿ</h2>
<p>äº†è§£äº†åŸºç¡€æ¦‚å¿µåï¼Œæˆ‘ä»¬å†æ¥èŠèŠå¦‚ä½•å¿«é€ŸæŒæ¡è¿™äº›æŠ€èƒ½ã€‚å…¶å®ï¼Œä½ å¹¶ä¸éœ€è¦è®°ä½æ‰€æœ‰ç»†èŠ‚ï¼Œåªè¦æŒæ¡å‡ ä¸ªå…³é”®ç‚¹ï¼Œå°±èƒ½åœ¨é¡¹ç›®ä¸­æ¸¸åˆƒæœ‰ä½™ã€‚</p>
<ol>
<li>
<p><strong>å¤šç”»æµç¨‹å›¾</strong><br/>
ç†è§£å¯åŠ¨é“¾è·¯å’Œ AMS/ATMS çš„æœ€ä½³æ–¹æ³•å°±æ˜¯ç”»æµç¨‹å›¾ã€‚æŠŠæ¯ä¸ªé˜¶æ®µç”»å‡ºæ¥ï¼Œå†ç”¨ç®­å¤´è¿æ¥èµ·æ¥ï¼Œä½ ä¼šå‘ç°è¿™äº›å¤æ‚çš„æ¦‚å¿µå…¶å®å¾ˆæœ‰é€»è¾‘ã€‚</p>
</li>
<li>
<p><strong>å¤šçœ‹æ—¥å¿—</strong><br/>
å¦‚æœä½ æ˜¯å¼€å‘è€…ï¼Œé‚£å°±å¤šæ‰“å¼€ Logcatï¼Œè§‚å¯Ÿç³»ç»Ÿå¯åŠ¨å’Œåº”ç”¨å¯åŠ¨æ—¶çš„æ—¥å¿—ã€‚é€šè¿‡æ—¥å¿—ï¼Œä½ å¯ä»¥ç›´è§‚åœ°çœ‹åˆ° AMS å’Œ ATMS çš„å·¥ä½œè¿‡ç¨‹ã€‚</p>
</li>
<li>
<p><strong>å¤šå†™ä»£ç </strong><br/>
å­¦ä¹ æœ€å¥½çš„æ–¹å¼å°±æ˜¯å®è·µï¼è¯•ç€å†™ä¸€äº›ç®€å•çš„ä»£ç ï¼Œæ¯”å¦‚è‡ªå®šä¹‰å¯åŠ¨æµç¨‹æˆ–è€…æ¨¡æ‹Ÿä»»åŠ¡æ ˆæ“ä½œï¼Œè¿™æ ·å¯ä»¥å¸®åŠ©ä½ æ›´æ·±å…¥åœ°ç†è§£è¿™äº›æœºåˆ¶ã€‚</p>
</li>
<li>
<p><strong>å¤šé—®é—®é¢˜</strong><br/>
ä¸æ‡‚å°±é—®ï¼Œä¸è¦å®³æ€•æš´éœ²è‡ªå·±çš„â€œèœé¸Ÿâ€èº«ä»½ã€‚æ¯ä¸ªå¤§ä½¬éƒ½æ˜¯ä»å°ç™½ä¸€æ­¥æ­¥æˆé•¿èµ·æ¥çš„ï¼</p>
</li>
</ol>
<h2 data-id="heading-7">æœ€åçš„ä¸€ç‚¹ç‚¹é¸¡æ±¤</h2>
<p>å­¦ä¹  Android å¯åŠ¨é“¾è·¯å’Œ AMS/ATMS å¯èƒ½ä¼šè®©ä½ æ„Ÿè§‰æœ‰ç‚¹çƒ§è„‘ï¼Œä½†åªè¦åšæŒä¸‹å»ï¼Œä½ ä¸€å®šä¼šå‘ç°å…¶ä¸­çš„ä¹è¶£ã€‚æ¯•ç«Ÿï¼Œæ¯ä¸ªæŠ€æœ¯å¤§ç¥éƒ½æ˜¯ä»â€œå•¥éƒ½ä¸æ‡‚â€å¼€å§‹çš„ï¼</p>
<p>æ‰€ä»¥ï¼Œä¸è¦å®³æ€•æŒ‘æˆ˜ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æˆä¸º Android å¼€å‘ç•Œçš„â€œéšè—é«˜æ‰‹â€å§ï¼åŠ æ²¹ï¼Œå†²é¸­ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Jetpack MVVM]]></title>    <link>https://juejin.cn/post/7592166340381294607</link>    <guid>https://juejin.cn/post/7592166340381294607</guid>    <pubDate>2026-01-07T07:04:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592166340381294607" data-draft-id="7592127014188171264" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Jetpack MVVM"/> <meta itemprop="keywords" content="Android Jetpack"/> <meta itemprop="datePublished" content="2026-01-07T07:04:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="XRay"/> <meta itemprop="url" content="https://juejin.cn/user/3966693685869288"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Jetpack MVVM
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3966693685869288/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    XRay
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T07:04:09.000Z" title="Wed Jan 07 2026 07:04:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    14
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">Androidå¼€å‘ä¸­çš„æ¶æ„</h3>
<p>Androidä¸­çš„å¼€å‘æ¶æ„æ˜¯ç”¨æ¥æè¿° <strong>è§†å›¾å±‚</strong> ã€ <strong>é€»è¾‘å±‚</strong> å’Œ <strong>æ•°æ®å±‚</strong> ä¸‰è€…ä¹‹é—´çš„å…³ç³»çš„ã€‚</p>
<ul>
<li>è§†å›¾å±‚ï¼šç”¨æˆ·ç•Œé¢ï¼Œå³ç•Œé¢çš„å±•ç¤ºå’Œäº¤äº’äº‹ä»¶çš„å“åº”ã€‚</li>
<li>é€»è¾‘å±‚ï¼šä¸ºäº†å®ç°ç³»ç»ŸåŠŸèƒ½è€Œè¿›è¡Œçš„å¿…è¦é€»è¾‘ã€‚</li>
<li>æ•°æ®å±‚ï¼šæ•°æ®çš„è·å–å’Œå­˜å‚¨ï¼Œå«æœ¬åœ°æ•°æ®å’ŒæœåŠ¡å™¨æ•°æ®ã€‚</li>
</ul>
<p>ä¸€èˆ¬æˆ‘ä»¬çš„æ¶æ„ä¹‹è·¯æ˜¯ä» MVC -&gt; MVP -&gt; MVVM æ¼”å˜çš„ã€‚</p>
<h5 data-id="heading-1">MVC</h5>
<p>MVCï¼ŒModel-View-Controllerï¼ŒèŒè´£åˆ†ç±»å¦‚ä¸‹ï¼š</p>
<ul>
<li>Modelï¼Œæ¨¡å‹å±‚ï¼Œå³æ•°æ®æ¨¡å‹ï¼Œç”¨äºè·å–å’Œå­˜å‚¨æ•°æ®ã€‚</li>
<li>Viewï¼Œè§†å›¾å±‚ï¼Œåœ¨Androidä¸­å°±æ˜¯xmlå¸ƒå±€ã€‚</li>
<li>Controllerï¼Œæ§åˆ¶å±‚ï¼Œè´Ÿè´£ä¸šåŠ¡é€»è¾‘ã€‚</li>
</ul>
<p>Viewæ¥æ”¶åˆ°ç”¨æˆ·æ“ä½œäº‹ä»¶ï¼Œé€šçŸ¥åˆ°Controllerè¿›è¡Œå¯¹åº”çš„é€»è¾‘å¤„ç†ï¼Œç„¶åé€šçŸ¥Modelå»è·å–/æ›´æ–°æ•°æ®ï¼ŒModelå†æŠŠæ–°çš„æ•°æ®ä¼ é€’ç»™Viewæ›´æ–°ç•Œé¢ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªå®Œæ•´MVCçš„æ•°æ®æµå‘ã€‚</p>
<p>ä½†åœ¨Androidä¸­ï¼Œå› ä¸ºxmlå¸ƒå±€ä½œä¸ºè§†å›¾å±‚èƒ½åŠ›å¾ˆå¼±ï¼Œå¾ˆå¤šæ“ä½œViewçš„ä»£ç æ˜¯å†™åœ¨Activity/Fragmentä¸­çš„ï¼Œè€Œä¸šåŠ¡é€»è¾‘åŒæ ·ä¹Ÿæ˜¯å†™åœ¨Activity/Fragmentä¸­ã€‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f8afa9122ab440eda6095265f71a66d1~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=369&amp;h=237&amp;s=4078&amp;e=webp&amp;a=1&amp;b=fdfdfd" alt="MVC" loading="lazy"/></p>
<p>æ‰€ä»¥ï¼ŒAndroidä¸­MVCçš„é—®é¢˜ç‚¹å¦‚ä¸‹ï¼š</p>
<ol>
<li>Activity/Fragmentçš„è´£ä»»ä¸æ˜ç¡®ï¼ŒåŒæ—¶è´Ÿè´£Viewå’ŒControllerï¼Œè¿™æ ·å°±å¯¼è‡´Activity/Fragmentçš„ä»£ç é‡å¾ˆå¤§ï¼Œä¸æ»¡è¶³å•ä¸€èŒè´£åŸåˆ™ã€‚</li>
<li>Modelè€¦åˆViewï¼ŒViewçš„ä¿®æ”¹ä¼šå¯¼è‡´Controllerå’ŒModeléƒ½è¿›è¡Œæ”¹åŠ¨ï¼Œä¸æ»¡è¶³æœ€å°‘çŸ¥è¯†åŸåˆ™ã€‚</li>
</ol>
<h5 data-id="heading-2">MVP</h5>
<p>MVPï¼ŒModel-View-Presenterï¼ŒèŒè´£åˆ†ç±»å¦‚ä¸‹ï¼š</p>
<ul>
<li>Modelï¼Œæ¨¡å‹å±‚ï¼Œå³æ•°æ®æ¨¡å‹ï¼Œç”¨äºè·å–å’Œå­˜å‚¨æ•°æ®ã€‚</li>
<li>Viewï¼Œè§†å›¾å±‚ï¼Œå³Activity/Fragment.</li>
<li>Presenterï¼Œæ§åˆ¶å±‚ï¼Œè´Ÿè´£ä¸šåŠ¡é€»è¾‘ã€‚</li>
</ul>
<p>MVPè§£å†³äº†MVCçš„é—®é¢˜ï¼š<br/>
1.Activity/Fragmentçš„è´£ä»»æ˜ç¡®ï¼Œé€»è¾‘ä¸å†å†™åœ¨Activity/Fragmentä¸­ï¼Œè€Œæ˜¯åœ¨Presenterä¸­ï¼›<br/>
2.Modelä¸å†æŒæœ‰Viewã€‚</p>
<p>Viewå±‚æ¥æ”¶åˆ°ç”¨æˆ·æ“ä½œäº‹ä»¶åï¼Œè°ƒç”¨Presenterè¿›è¡Œé€»è¾‘å¤„ç†ï¼Œç„¶åé€šçŸ¥Modelè·å–æˆ–æ›´æ–°æ•°æ®ï¼ŒModelæŠŠæ•°æ®ç»™åˆ°Presenterï¼ŒPresenterå†é€šçŸ¥Viewæ›´æ–°ç•Œé¢ã€‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/236ecae85abe4b82bda2953bcc584fb6~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=379&amp;h=221&amp;s=4672&amp;e=webp&amp;a=1&amp;b=fefefe" alt="MVP" loading="lazy"/></p>
<p>MVPçš„å®ç°æ€è·¯ï¼š</p>
<ul>
<li>UIé€»è¾‘æŠ½è±¡æˆIViewæ¥å£ï¼Œç”±å…·ä½“çš„Activityå®ç°ç±»æ¥å®Œæˆï¼Œä¸”è°ƒç”¨Presenterè¿›è¡Œé€»è¾‘å¤„ç†ã€‚</li>
<li>ä¸šåŠ¡é€»è¾‘æŠ½è±¡æˆIPresenteræ¥å£ï¼Œç”±å…·ä½“çš„Presenterå®ç°ç±»æ¥å®Œæˆã€‚é€»è¾‘æ“ä½œå®Œæˆåè°ƒç”¨IViewæ¥å£æ–¹æ³•åˆ·æ–°UIã€‚</li>
</ul>
<p>MVPæœ¬è´¨æ˜¯<strong>é¢å‘æ¥å£ç¼–ç¨‹ï¼Œå®ç°äº†ä¾èµ–å€’ç½®</strong>åŸåˆ™ã€‚MVPè§£å†³äº†Viewå±‚è´£ä»»ä¸æ˜ç¡®çš„é—®é¢˜ï¼Œä½†å¹¶æ²¡æœ‰è§£å†³ä»£ç è€¦åˆçš„é—®é¢˜ï¼ŒViewå’ŒPresenterä¹‹é—´ç›¸äº’æŒæœ‰ã€‚</p>
<p>æ‰€ä»¥ï¼ŒMVPçš„é—®é¢˜ç‚¹å¦‚ä¸‹ï¼š</p>
<ol>
<li>ä¼šå¼•å…¥å¤§é‡çš„IViewã€IPresenteræ¥å£ï¼Œå¢åŠ å®ç°çš„å¤æ‚åº¦ã€‚</li>
<li>Viewå’ŒPresenterç›¸äº’æŒæœ‰ï¼Œå½¢æˆè€¦åˆã€‚</li>
</ol>
<h5 data-id="heading-3">MVVM</h5>
<p>MVVMï¼ŒModel-View-ViewModelï¼ŒèŒè´£åˆ†ç±»å¦‚ä¸‹ï¼š</p>
<ul>
<li>Modelï¼Œæ¨¡å‹å±‚ï¼Œå³æ•°æ®æ¨¡å‹ï¼Œç”¨äºè·å–å’Œå­˜å‚¨æ•°æ®ã€‚</li>
<li>Viewï¼Œè§†å›¾ï¼Œå³Activity/Fragmentã€‚</li>
<li>ViewModelï¼Œè§†å›¾æ¨¡å‹ï¼Œè´Ÿè´£ä¸šåŠ¡é€»è¾‘ã€‚</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼ŒMVVMè¿™é‡Œçš„ViewModelå°±æ˜¯ä¸€ä¸ªåç§°ï¼Œå¯ä»¥ç†è§£ä¸ºMVPä¸­çš„Presenterã€‚ä¸ç­‰åŒäºå‰é¢æ–‡ç« ä¸­çš„ViewModelç»„ä»¶ ï¼ŒJetpack ViewModelç»„ä»¶æ˜¯å¯¹MVVMçš„ViewModelçš„å…·ä½“å®æ–½æ–¹æ¡ˆã€‚</p>
</blockquote>
<p>MVVMçš„æœ¬è´¨æ˜¯<strong>æ•°æ®é©±åŠ¨</strong>ï¼ŒæŠŠè§£è€¦åšçš„æ›´å½»åº•ï¼ŒViewModelä¸æŒæœ‰View ã€‚</p>
<p>Viewäº§ç”Ÿäº‹ä»¶ï¼Œä½¿ç”¨ViewModelè¿›è¡Œé€»è¾‘å¤„ç†åï¼Œé€šçŸ¥Modelæ›´æ–°æ•°æ®ï¼ŒModelæŠŠæ›´æ–°çš„æ•°æ®ç»™ViewModelï¼ŒViewModel<strong>è‡ªåŠ¨é€šçŸ¥Viewæ›´æ–°ç•Œé¢</strong>ï¼Œ<strong>è€Œä¸æ˜¯ä¸»åŠ¨è°ƒç”¨Viewçš„æ–¹æ³•</strong>ã€‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4933d313a8e54f0e9edc2ef440686b29~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=379&amp;h=217&amp;s=4326&amp;e=webp&amp;a=1&amp;b=fdfdfd" alt="MVVM" loading="lazy"/></p>
<blockquote>
<p>åˆ°è¿™é‡Œä½ ä¼šå‘ç°ï¼Œæ‰€è°“çš„æ¶æ„æ¨¡å¼æœ¬è´¨ä¸Šç†è§£å¾ˆç®€å•ã€‚æ¯”å¦‚MVPï¼Œç”šè‡³ä½ éƒ½å¯ä»¥å¿½ç•¥è¿™ä¸ªåå­—ï¼Œç†è§£æˆåœ¨æ›´é«˜çš„å±‚é¢ä¸Šé¢å‘æ¥å£ç¼–ç¨‹ï¼Œå®ç°äº†ä¾èµ–å€’ç½®åŸåˆ™ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ã€‚</p>
</blockquote>
<h3 data-id="heading-4">MVVMçš„å®ç° â€”â€” Jetpack MVVM</h3>
<p>Jetpack MVVMæ˜¯MVVMæ¶æ„åœ¨Androidå¼€å‘ä¸­çš„ä¸€ç§å…·ä½“å®ç°æ–¹å¼ï¼Œæ˜¯Googleå®˜æ–¹æä¾›å¹¶æ¨èçš„ã€‚</p>
<p>Jetpack MVVMä¸ä»…é€šè¿‡æ•°æ®é©±åŠ¨å®ç°äº†Viewä¸ViewModelçš„è§£è€¦ï¼Œè¿˜å…¼é¡¾äº†Androidé¡µé¢å¼€å‘ä¸­å…¶ä»–ä¸å¯é¢„æœŸçš„é”™è¯¯ï¼Œä¾‹å¦‚Lifecycleèƒ½å¦¥å–„å¤„ç†é¡µé¢ç”Ÿå‘½å‘¨æœŸï¼Œé¿å…Viewçš„ç©ºæŒ‡é’ˆé—®é¢˜ï¼ŒViewModelä½¿å¾—é…ç½®æ›´æ”¹å¯¼è‡´Activityé‡å»ºæ—¶æ— éœ€é‡æ–°å‘åå°è¯·æ±‚æ•°æ®ï¼ŒèŠ‚çœäº†å¼€é”€ã€‚</p>
<p>é¦–å…ˆï¼Œè¯·çœ‹ä¸‹å›¾ï¼Œè¯¥å›¾æ˜¾ç¤ºäº†æ‰€æœ‰æ¨¡å—åº”å¦‚ä½•å½¼æ­¤äº¤äº’ï¼š <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e7a8bfa7b6234b3eabae4ff33df78722~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=960&amp;h=720&amp;s=19858&amp;e=webp&amp;a=1&amp;b=26f2c2" alt="Jetpack MVVM æ¶æ„" loading="lazy"/></p>
<p>å„æ¨¡å—å¯¹åº”MVVMæ¶æ„ï¼š</p>
<ul>
<li><strong>Viewå±‚ï¼šActivity/Fragment</strong></li>
<li><strong>ViewModelå±‚ï¼šJetpack ViewModel + Jetpack LivaData</strong></li>
<li><strong>Modelå±‚ï¼šRepositoryä»“åº“ï¼ŒåŒ…å« æœ¬åœ°æŒä¹…æ€§æ•°æ® å’Œ æœåŠ¡ç«¯æ•°æ®</strong></li>
</ul>
<p><strong>Viewå±‚</strong> åŒ…å«äº†æˆ‘ä»¬å¹³æ—¶å†™çš„Activity/Fragment/å¸ƒå±€æ–‡ä»¶ç­‰ä¸ç•Œé¢ç›¸å…³çš„ä¸œè¥¿ã€‚</p>
<p><strong>ViewModelå±‚</strong> ç”¨äºæŒæœ‰å’ŒUIç›¸å…³çš„LiveDataæ•°æ®ï¼Œä»¥ä¿è¯è¿™äº›æ•°æ®åœ¨å±å¹•æ—‹è½¬æ—¶ä¸ä¼šä¸¢å¤±ï¼Œå¹¶ä¸”è¿˜è¦æä¾›æ¥å£ç»™Viewå±‚è°ƒç”¨ä»¥åŠå’Œä»“åº“å±‚è¿›è¡Œé€šä¿¡ã€‚</p>
<p><strong>Modelå±‚</strong> è¦åšçš„ä¸»è¦å·¥ä½œæ˜¯åˆ¤æ–­è°ƒç”¨æ–¹è¯·æ±‚çš„æ•°æ®åº”è¯¥ä»æœ¬åœ°æ•°æ®æºä¸­è·å–è¿˜æ˜¯ä»ç½‘ç»œæ•°æ®æºä¸­è·å–ï¼Œå¹¶å°†è·å–åˆ°çš„æ•°æ®è¿”å›ç»™è°ƒç”¨æ–¹ã€‚æœ¬åœ°æ•°æ®æºå¯ä»¥ä½¿ç”¨æ•°æ®åº“ã€SharedPreferencesç­‰æŒä¹…åŒ–æŠ€æœ¯æ¥å®ç°ï¼Œè€Œç½‘ç»œæ•°æ®æºåˆ™é€šå¸¸ä½¿ç”¨Retrofitè®¿é—®æœåŠ¡å™¨æä¾›çš„Webserviceæ¥å£æ¥å®ç°ã€‚</p>
<p>å¦å¤–ï¼Œå›¾ä¸­æ‰€æœ‰çš„ç®­å¤´éƒ½æ˜¯å•å‘çš„ï¼Œä¾‹å¦‚Viewå±‚æŒ‡å‘äº†ViewModelå±‚ï¼Œè¡¨ç¤ºViewå±‚ä¼šæŒæœ‰ViewModelå±‚çš„å¼•ç”¨ï¼Œä½†æ˜¯åè¿‡æ¥<strong>ViewModelå±‚å´ä¸èƒ½æŒæœ‰Viewå±‚çš„å¼•ç”¨</strong>ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå¼•ç”¨ä¹Ÿä¸èƒ½è·¨å±‚æŒæœ‰ï¼Œæ¯”å¦‚Viewå±‚ä¸èƒ½æŒæœ‰ä»“åº“å±‚çš„å¼•ç”¨ï¼Œè°¨è®°æ¯ä¸€å±‚çš„ç»„ä»¶éƒ½åªèƒ½ä¸å®ƒç›¸é‚»å±‚çš„ç»„ä»¶è¿›è¡Œäº¤äº’ã€‚</p>
<p>è¿™ç§è®¾è®¡æ‰“é€ äº†ä¸€è‡´ä¸”æ„‰å¿«çš„ç”¨æˆ·ä½“éªŒã€‚æ— è®ºç”¨æˆ·ä¸Šæ¬¡ä½¿ç”¨åº”ç”¨æ˜¯åœ¨å‡ åˆ†é’Ÿå‰è¿˜æ˜¯å‡ å¤©ä¹‹å‰ï¼Œç°åœ¨å›åˆ°åº”ç”¨æ—¶éƒ½ä¼šç«‹å³çœ‹åˆ°åº”ç”¨åœ¨æœ¬åœ°ä¿ç•™çš„æ•°æ®ã€‚å¦‚æœæ­¤æ•°æ®å·²è¿‡æœŸï¼Œåˆ™åº”ç”¨çš„Repositoryå°†å¼€å§‹åœ¨åå°æ›´æ–°æ•°æ®ã€‚</p>
<h5 data-id="heading-5">ç¤ºä¾‹</h5>
<p>è¿™é‡Œä»¥ä¸€ä¸ªè·å–å¤©æ°”ä¿¡æ¯å¹¶å±•ç¤ºçš„ä¸šåŠ¡æ¥è¯´æ˜å¦‚ä½•å®ç°Jetpack MVVMã€‚</p>
<p>æ–°å»ºä¸€ä¸ªå¤©æ°”ä¿¡æ¯ç±»ï¼Œé‡Œé¢æœ‰2ä¸ªå­—æ®µï¼Œä¸€ä¸ªå­—æ®µç”¨æ¥è¡¨ç¤ºä»€ä¹ˆæ ·çš„å¤©æ°”ï¼Œå¦ä¸€ä¸ªè¡¨ç¤ºæ¸©åº¦ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeatherInfo</span> {
    <span class="hljs-comment">//æ™´å¤©/é›¨å¤©/å¤šäº‘...</span>
    <span class="hljs-keyword">private</span> String text;
    <span class="hljs-comment">//æ¸©åº¦</span>
    <span class="hljs-keyword">private</span> String temp;

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getText</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> text;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setText</span><span class="hljs-params">(String text)</span> {
        <span class="hljs-built_in">this</span>.text = text;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getTemp</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> temp;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTemp</span><span class="hljs-params">(String temp)</span> {
        <span class="hljs-built_in">this</span>.temp = temp;
    }
}
</code></pre>
<p>ä¸ºäº†å®ç°æ•°æ®é©±åŠ¨ï¼Œéœ€è¦ä½¿ç”¨LiveDataæ¥åŒ…è£…å¤©æ°”ä¿¡æ¯ï¼Œå…¶ä¸­loadingLiveDataæ˜¯ç”¨æ¥æ§åˆ¶è¿›åº¦æ¡çš„æ˜¾ç¤ºçš„ã€‚æ ¹æ®ä¸Šé¢çš„æ¶æ„å›¾ï¼Œè¿˜éœ€è¦ä½¿ç”¨ViewModelæ¥å­˜å‚¨LiveDataï¼Œè¿™æ ·åœ¨å±å¹•æ—‹è½¬æ—¶LiveDataçš„æ•°æ®ä¸ä¼šä¸¢å¤±ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeatherInfoViewModel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ViewModel</span> {
    <span class="hljs-comment">//å¤©æ°”ä¿¡æ¯</span>
    <span class="hljs-keyword">private</span> MutableLiveData&lt;WeatherInfo&gt; weatherInfoLiveData;
    <span class="hljs-comment">//è¿›æ¡åº¦çš„æ˜¾ç¤º</span>
    <span class="hljs-keyword">private</span> MutableLiveData&lt;Boolean&gt; loadingLiveData;

    <span class="hljs-keyword">public</span> LiveData&lt;WeatherInfo&gt; <span class="hljs-title function_">getWeatherInfoLiveData</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> weatherInfoLiveData;
    }

    <span class="hljs-keyword">public</span> LiveData&lt;Boolean&gt; <span class="hljs-title function_">getLoadingLiveData</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> loadingLiveData;
    }
}
</code></pre>
<blockquote>
<p>LiveDataæ˜¯ä¸€ç§å¯è§‚å¯Ÿçš„æ•°æ®å­˜å‚¨å™¨ï¼Œåº”ç”¨ç»„ä»¶ï¼ˆå¦‚ Activityã€Fragment å’Œ Serviceï¼‰å¯ä»¥ä½¿ç”¨æ­¤å­˜å‚¨å™¨ç›‘æ§å¯¹è±¡çš„æ›´æ”¹ï¼Œè€Œæ— éœ€åœ¨å®ƒä»¬ä¹‹é—´åˆ›å»ºæ˜ç¡®ä¸”ä¸¥æ ¼çš„ä¾èµ–è·¯å¾„ã€‚LiveDataç»„ä»¶è¿˜éµå¾ªåº”ç”¨ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€ï¼Œå¹¶åŒ…æ‹¬æ¸…ç†é€»è¾‘ä»¥é˜²æ­¢å¯¹è±¡æ³„æ¼å’Œè¿‡å¤šçš„å†…å­˜æ¶ˆè€—ã€‚</p>
</blockquote>
<p>æ³¨æ„åˆ°WeatherInfoViewModelç±»æš´éœ²çš„getWeatherInfoLiveData()æ–¹æ³•è¿”å›çš„æ˜¯LiveDataç±»å‹ï¼Œå³ä¸å¯å˜çš„ï¼Œè€Œä¸æ˜¯MutableLiveDataï¼Œå¥½å¤„æ˜¯é¿å…æ•°æ®åœ¨å¤–éƒ¨è¢«æ›´æ”¹ã€‚</p>
<p>æˆ‘ä»¬åœ¨WeatherActivityä¸­è§‚å¯ŸLiveDataçš„æ›´æ–°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeatherActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span>{

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        ...
        initData();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initData</span><span class="hljs-params">()</span>{
        <span class="hljs-type">ViewModelProvider</span> <span class="hljs-variable">viewModelProvider</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ViewModelProvider</span>(<span class="hljs-built_in">this</span>);
        <span class="hljs-type">WeatherInfoViewModel</span> <span class="hljs-variable">weatherInfoViewModel</span> <span class="hljs-operator">=</span> viewModelProvider.get(WeatherInfoViewModel.class);

        weatherInfoViewModel.getWeatherInfoLiveData().observe(<span class="hljs-built_in">this</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Observer</span>&lt;WeatherInfo&gt;() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onChanged</span><span class="hljs-params">(WeatherInfo weatherInfo)</span> {
                <span class="hljs-comment">//æ›´æ–°å¤©æ°”ä¿¡æ¯</span>
                mTvWeather.setText(weatherInfo.getText());
                mTvTemp.setText(weatherInfo.getTemp());
            }
        });

        weatherInfoViewModel.getLoadingLiveData().observe(<span class="hljs-built_in">this</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Observer</span>&lt;Boolean&gt;() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onChanged</span><span class="hljs-params">(Boolean aBoolean)</span> {
                <span class="hljs-comment">//æ˜¾ç¤ºæˆ–éšè—åŠ è½½è¿›åº¦æ¡</span>
                mProgressBar.setVisibility(aBoolean? View.VISIBLE:View.GONE);
            }
        });

        ...

    }

}
</code></pre>
<p>æ¯æ¬¡å¤©æ°”ä¿¡æ¯æ›´æ–°ï¼Œç›¸åº”çš„onChanged()æ–¹æ³•éƒ½ä¼šå›è°ƒï¼Œè€Œä¸éœ€è¦ViewModelä¸»åŠ¨è°ƒç”¨Viewå±‚æ–¹æ³•æ›´æ–°UIï¼Œè¿™å°±æ˜¯<strong>æ•°æ®é©±åŠ¨</strong> â€”â€” æ•°æ®çš„æ›´æ”¹é©±åŠ¨Viewè‡ªåŠ¨æ›´æ–°ã€‚</p>
<p>å› ä¸ºLiveDataå…·æœ‰ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥èƒ½åŠ›ï¼Œè¿™æ„å‘³ç€ï¼Œåªæœ‰Activityå¤„äºæ´»è·ƒçŠ¶æ€ï¼ŒonChanged()æ‰ä¼šå›è°ƒã€‚å½“Activityçš„onDestroy()æ‰§è¡Œæ—¶ï¼ŒLiveDataä¼šè‡ªåŠ¨ç§»é™¤è§‚å¯Ÿè€…ã€‚</p>
<p>é‰´äºWeatherInfoViewModelå¯¹è±¡æ¯”å¯¹åº”çš„Viewå¯¹è±¡å­˜æ´»çš„æ—¶é—´æ›´é•¿ï¼ŒWeatherInfoViewModelä¸­ä¸å¾—åŒ…å«å¯¹Viewå¯¹è±¡çš„ç›´æ¥å¼•ç”¨ï¼ŒåŒ…æ‹¬Contextã€‚</p>
<p>æˆ‘ä»¬å·²ç»ä½¿ç”¨ViewModelå°†LiveDataä¸Activityå…³è”èµ·æ¥äº†ï¼Œé‚£ä¹ˆå¦‚ä½•è·å–å¤©æ°”ä¿¡æ¯å‘¢ï¼Ÿ</p>
<p>ä¸€ä¸ªç®€å•çš„æƒ³æ³•æ˜¯ç›´æ¥åœ¨ViewModelä¸­ä½¿ç”¨OkHttpä»æœåŠ¡å™¨è·å–å¤©æ°”ä¿¡æ¯ï¼Œè·å–æˆåŠŸåå°†æ•°æ®è®¾ç½®ç»™LiveDataï¼Œä½†æ˜¯è¿™æ ·ä¼šä½¿ViewModelæ‰¿æ‹…äº†å¤ªå¤šçš„è´£ä»»ï¼Œè¿èƒŒäº†å•ä¸€èŒè´£åŸåˆ™ã€‚</p>
<p>åœ¨ä¸Šé¢çš„æ¶æ„å›¾ä¸­ï¼ŒViewModelå°†æ•°æ®è·å–è¿‡ç¨‹å§”æ´¾ç»™ä¸€ä¸ªæ–°çš„æ¨¡å—â€”â€”Repositoryã€‚è¿™é‡Œæˆ‘ä»¬ä¹Ÿç…§ç€æ¶æ„å›¾æ–°å»ºä¸€ä¸ªç±»WeatherRepositoryï¼Œç”¨æ¥ä»æœåŠ¡å™¨è·å–å¤©æ°”ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeatherRepository</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> WeatherRepository weatherRepository;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> WeatherRepository <span class="hljs-title function_">getWeatherRepository</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (weatherRepository == <span class="hljs-literal">null</span>) {
            weatherRepository = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeatherRepository</span>();
        }
        <span class="hljs-keyword">return</span> weatherRepository;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getWeatherInfoFromServer</span><span class="hljs-params">(Callback callback)</span> {

        OkHttpClient.<span class="hljs-type">Builder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OkHttpClient</span>.Builder()
                .connectTimeout(<span class="hljs-number">15L</span>, TimeUnit.SECONDS)
                .readTimeout(<span class="hljs-number">15L</span>, TimeUnit.SECONDS)
                .writeTimeout(<span class="hljs-number">15L</span>, TimeUnit.SECONDS)
                .retryOnConnectionFailure(<span class="hljs-literal">true</span>);

        <span class="hljs-type">HttpLoggingInterceptor</span> <span class="hljs-variable">logInterceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpLoggingInterceptor</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpLoggingInterceptor</span>.Logger() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">log</span><span class="hljs-params">(String message)</span> {
                Log.d(<span class="hljs-string">"TAG"</span>, <span class="hljs-string">"url info:"</span> + message);
            }
        });
        logInterceptor.setLevel(HttpLoggingInterceptor.Level.BODY);
        builder.addInterceptor(logInterceptor);

        <span class="hljs-type">OkHttpClient</span> <span class="hljs-variable">okHttpClient</span> <span class="hljs-operator">=</span> builder.build();
        <span class="hljs-type">Request</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Request</span>.Builder()
                .url(<span class="hljs-string">"http://xxxx"</span>)
                .get()
                .build();
        <span class="hljs-type">Call</span> <span class="hljs-variable">call</span> <span class="hljs-operator">=</span> okHttpClient.newCall(request);
        call.enqueue(<span class="hljs-keyword">new</span> <span class="hljs-title class_">okhttp3</span>.Callback() {

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onFailure</span><span class="hljs-params">(Call call, IOException e)</span> {
                Log.d(<span class="hljs-string">"TAG"</span>, <span class="hljs-string">"onFailure: "</span>);
                callback.onFailed(e.getMessage());
            }

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onResponse</span><span class="hljs-params">(Call call, Response response)</span> <span class="hljs-keyword">throws</span> IOException {
                <span class="hljs-keyword">if</span> (response.isSuccessful()) {
                    <span class="hljs-type">String</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> response.body().string();
                    <span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();
                    WeatherInfo weatherInfo;
                    <span class="hljs-keyword">try</span> {
                        weatherInfo = gson.fromJson(data, WeatherInfo.class);
                        callback.onSuccess(weatherInfo);
                    } <span class="hljs-keyword">catch</span> (Exception e) {
                        Log.i(<span class="hljs-string">"TAG"</span>, <span class="hljs-string">"Exception e:"</span> + e.getMessage());
                    }
                }
            }

        });
    }
}
</code></pre>
<p>getWeatherInfoFromServer()æ–¹æ³•ä¼ å…¥ä¸€ä¸ªæ¥å£å›è°ƒCallbackï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Callback</span>&lt;T&gt; {
    <span class="hljs-comment">//æˆåŠŸçš„æ—¶å€™å›è°ƒ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(T t)</span>;
    <span class="hljs-comment">//å¤±è´¥çš„æ—¶å€™å›è°ƒ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onFailed</span><span class="hljs-params">(String msg)</span>;
}
</code></pre>
<p>åœ¨WeatherInfoViewModelä¸­è°ƒç”¨getWeatherInfoFromServer()æ–¹æ³•ï¼Œå¹¶åœ¨æ¥å£å›è°ƒä¸­ä¿®æ”¹LiveDataä¸­çš„å€¼ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeatherInfoViewModel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ViewModel</span> {
    <span class="hljs-comment">//å¤©æ°”ä¿¡æ¯</span>
    <span class="hljs-keyword">private</span> MutableLiveData&lt;WeatherInfo&gt; weatherInfoLiveData;
    <span class="hljs-comment">//è¿›æ¡åº¦çš„æ˜¾ç¤º</span>
    <span class="hljs-keyword">private</span> MutableLiveData&lt;Boolean&gt; loadingLiveData;

    <span class="hljs-keyword">public</span> LiveData&lt;WeatherInfo&gt; <span class="hljs-title function_">getWeatherInfoLiveData</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> weatherInfoLiveData;
    }

    <span class="hljs-keyword">public</span> MutableLiveData&lt;Boolean&gt; <span class="hljs-title function_">getLoadingLiveData</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> loadingLiveData;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getWeatherInfo</span><span class="hljs-params">()</span>{
        <span class="hljs-comment">//è·å–å¤©æ°”ä¿¡æ¯å‰æ˜¾ç¤ºè¿›åº¦æ¡</span>
        loadingLiveData.setValue(<span class="hljs-literal">true</span>);

        WeatherRepository.getWeatherRepository().getWeatherInfoFromServer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Callback</span>&lt;WeatherInfo&gt;() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(WeatherInfo weatherInfo)</span> {
                <span class="hljs-comment">//è·å–æˆåŠŸåï¼Œè®©è¿›åº¦æ¡æ¶ˆå¤±</span>
                loadingLiveData.setValue(<span class="hljs-literal">false</span>);
                weatherInfoLiveData.setValue(weatherInfo);
            }

            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onFailed</span><span class="hljs-params">(String msg)</span> {
                loadingLiveData.setValue(<span class="hljs-literal">false</span>);
                weatherInfoLiveData.setValue(<span class="hljs-literal">null</span>);
            }
        });
    }
}
</code></pre>
<p>è¿™æ ·å°±æŠŠè·å–å¤©æ°”ä¿¡æ¯å§”æ´¾ç»™äº†WeatherRepositoryï¼Œå½“æˆ‘ä»¬è¿˜æƒ³ä»æœ¬åœ°è·å–å¤©æ°”ä¿¡æ¯ç›´æ¥åœ¨WeatherRepositoryä¸­æ·»åŠ ç›¸åº”çš„æ–¹æ³•å³å¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeatherRepository</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getWeatherInfoFromLocal</span><span class="hljs-params">()</span>{
        <span class="hljs-comment">//ä»æœ¬åœ°è·å–å¤©æ°”ä¿¡æ¯</span>
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveWeatherInfoToLocal</span><span class="hljs-params">()</span>{
        <span class="hljs-comment">//å°†å¤©æ°”ä¿¡æ¯å­˜å…¥æœ¬åœ°</span>
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getWeatherInfoFromServer</span><span class="hljs-params">()</span>{
        <span class="hljs-comment">//ä»æœåŠ¡å™¨è·å–å¤©æ°”ä¿¡æ¯</span>
    }
}
</code></pre>
<p>æœ€åï¼Œè¿˜è¦åœ¨Activityä¸­ï¼Œè°ƒç”¨<code>weatherInfoViewModel.getWeatherInfo()</code>è·å–å¤©æ°”ä¿¡æ¯ã€‚è¿™æ ·ï¼Œé€šè¿‡WeatherRepositoryè·å–åˆ°å¤©æ°”ä¿¡æ¯åï¼Œå›è°ƒç»™ViewModelæ›´æ–°å…¶ä¸­çš„LiveDataçš„å€¼ï¼Œé€šè¿‡æ•°æ®é©±åŠ¨ï¼Œç›¸åº”çš„Viewå¯ä»¥æ‹¿åˆ°å¤©æ°”ä¿¡æ¯æ›´æ–°UIã€‚</p>
<p>ä»¥ä¸Šå°±æ˜¯é€šè¿‡Jetpack MVVMå®ç°çš„MVVMæ¶æ„çš„å®ç°æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Luban 2ï¼šç®€æ´é«˜æ•ˆçš„Androidå›¾ç‰‡å‹ç¼©åº“]]></title>    <link>https://juejin.cn/post/7592241336290033715</link>    <guid>https://juejin.cn/post/7592241336290033715</guid>    <pubDate>2026-01-07T06:53:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592241336290033715" data-draft-id="7592234632483127305" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Luban 2ï¼šç®€æ´é«˜æ•ˆçš„Androidå›¾ç‰‡å‹ç¼©åº“"/> <meta itemprop="keywords" content="Kotlin,å¾®ä¿¡"/> <meta itemprop="datePublished" content="2026-01-07T06:53:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°ç†Šç åŒ "/> <meta itemprop="url" content="https://juejin.cn/user/1585942854909582"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Luban 2ï¼šç®€æ´é«˜æ•ˆçš„Androidå›¾ç‰‡å‹ç¼©åº“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1585942854909582/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°ç†Šç åŒ 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T06:53:15.000Z" title="Wed Jan 07 2026 06:53:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    12
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>Luban 2</code>ï¼ˆé²ç­ 2ï¼‰ â€”â€” <code>Android</code>å›¾ç‰‡å‹ç¼©å·¥å…·ï¼Œä»¿å¾®ä¿¡æœ‹å‹åœˆå‹ç¼©ç­–ç•¥ã€‚</p>
<h3 data-id="heading-0">ğŸ“‘ ç›®å½•</h3>
<ul>
<li><a href="#-%E9%A1%B9%E7%9B%AE%E6%8F%8F%E8%BF%B0" title="#-%E9%A1%B9%E7%9B%AE%E6%8F%8F%E8%BF%B0">ğŸ“– é¡¹ç›®æè¿°</a></li>
<li><a href="#-%E6%95%88%E6%9E%9C%E4%B8%8E%E5%AF%B9%E6%AF%94" title="#-%E6%95%88%E6%9E%9C%E4%B8%8E%E5%AF%B9%E6%AF%94">ğŸ“Š æ•ˆæœä¸å¯¹æ¯”</a>
<ul>
<li><a href="#-%E6%A0%B8%E5%BF%83%E7%AE%97%E6%B3%95%E7%89%B9%E6%80%A7" title="#-%E6%A0%B8%E5%BF%83%E7%AE%97%E6%B3%95%E7%89%B9%E6%80%A7">ğŸ”¬ æ ¸å¿ƒç®—æ³•ç‰¹æ€§</a></li>
</ul>
</li>
<li><a href="#-%E5%AF%BC%E5%85%A5" title="#-%E5%AF%BC%E5%85%A5">ğŸ“¦ å¯¼å…¥</a></li>
<li><a href="#-%E4%BD%BF%E7%94%A8" title="#-%E4%BD%BF%E7%94%A8">ğŸ’» ä½¿ç”¨</a>
<ul>
<li><a href="#-kotlin-coroutines" title="#-kotlin-coroutines">âš¡ Kotlin (Coroutines)</a></li>
<li><a href="#-java--builder-%E6%A8%A1%E5%BC%8F" title="#-java--builder-%E6%A8%A1%E5%BC%8F">â˜• Java / Builder æ¨¡å¼</a></li>
</ul>
</li>
<li><a href="#-%E6%8D%90%E5%8A%A9" title="#-%E6%8D%90%E5%8A%A9">â˜• æåŠ©</a></li>
<li><a href="#-license" title="#-license">ğŸ“„ License</a></li>
</ul>
<h2 data-id="heading-1">ğŸ“– é¡¹ç›®æè¿°</h2>
<p>å¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fcurzbin%2FLuban" target="_blank" title="https://gitee.com/curzbin/Luban" ref="nofollow noopener noreferrer">Gitee</a> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FCurzibn%2FLuban" target="_blank" title="https://github.com/Curzibn/Luban" ref="nofollow noopener noreferrer">Github</a></p>
<p>ç›®å‰åš<code>App</code>å¼€å‘æ€»ç»•ä¸å¼€å›¾ç‰‡è¿™ä¸ªå…ƒç´ ã€‚ä½†æ˜¯éšç€æ‰‹æœºæ‹ç…§åˆ†è¾¨ç‡çš„æå‡ï¼Œå›¾ç‰‡çš„å‹ç¼©æˆä¸ºä¸€ä¸ªå¾ˆé‡è¦çš„é—®é¢˜ã€‚å•çº¯å¯¹å›¾ç‰‡è¿›è¡Œè£åˆ‡ï¼Œå‹ç¼©å·²ç»æœ‰å¾ˆå¤šæ–‡ç« ä»‹ç»ã€‚ä½†æ˜¯è£åˆ‡æˆå¤šå°‘ï¼Œå‹ç¼©æˆå¤šå°‘å´å¾ˆéš¾æ§åˆ¶å¥½ï¼Œè£åˆ‡è¿‡å¤´å›¾ç‰‡å¤ªå°ï¼Œè´¨é‡å‹ç¼©è¿‡å¤´åˆ™æ˜¾ç¤ºæ•ˆæœå¤ªå·®ã€‚</p>
<p>äºæ˜¯è‡ªç„¶æƒ³åˆ°<code>App</code>å·¨å¤´"å¾®ä¿¡"ä¼šæ˜¯æ€ä¹ˆå¤„ç†ï¼Œ<code>Luban</code>ï¼ˆé²ç­ï¼‰å°±æ˜¯é€šè¿‡åœ¨å¾®ä¿¡æœ‹å‹åœˆå‘é€è¿‘100å¼ ä¸åŒåˆ†è¾¨ç‡å›¾ç‰‡ï¼Œå¯¹æ¯”åŸå›¾ä¸å¾®ä¿¡å‹ç¼©åçš„å›¾ç‰‡é€†å‘æ¨ç®—å‡ºæ¥çš„å‹ç¼©ç®—æ³•ã€‚</p>
<p>å› ä¸ºæ˜¯é€†å‘æ¨ç®—ï¼Œæ•ˆæœè¿˜æ²¡æ³•è·Ÿå¾®ä¿¡ä¸€æ¨¡ä¸€æ ·ï¼Œä½†æ˜¯å·²ç»å¾ˆæ¥è¿‘å¾®ä¿¡æœ‹å‹åœˆå‹ç¼©åçš„æ•ˆæœï¼Œå…·ä½“çœ‹ä»¥ä¸‹å¯¹æ¯”ï¼</p>
<p>æœ¬åº“æ˜¯ <code>Luban</code> çš„ <strong>Kotlin é‡æ„ç‰ˆæœ¬</strong>ï¼Œåœ¨å‡çº§æ ¸å¿ƒç®—æ³•çš„åŒæ—¶ï¼Œåˆ©ç”¨ <strong>Kotlin Coroutines</strong> å’Œ <strong>TurboJPEG</strong> è¿›è¡Œäº†æ·±åº¦ä¼˜åŒ–ã€‚æ–°ç®—æ³•æ¯”åŸç®—æ³•æ›´åŠ å¥å£®å’Œé«˜æ•ˆï¼Œæä¾›æ›´é«˜æ•ˆçš„å¼‚æ­¥å¤„ç†å’Œæ›´ä¼˜è´¨çš„å‹ç¼©æ•ˆæœã€‚</p>
<h2 data-id="heading-2">ğŸ“Š æ•ˆæœä¸å¯¹æ¯”</h2>















































<table><thead><tr><th align="left">å›¾ç‰‡ç±»å‹</th><th align="left">åŸå›¾ï¼ˆåˆ†è¾¨ç‡, å¤§å°ï¼‰</th><th align="left">Lubanï¼ˆåˆ†è¾¨ç‡, å¤§å°ï¼‰</th><th align="left">Wechatï¼ˆåˆ†è¾¨ç‡, å¤§å°ï¼‰</th></tr></thead><tbody><tr><td align="left"><strong>æ ‡å‡†æ‹ç…§</strong></td><td align="left">3024Ã—4032, 5.10MB</td><td align="left">1440Ã—1920, 305KB</td><td align="left">1440Ã—1920, 303KB</td></tr><tr><td align="left"><strong>é«˜æ¸…å¤§å›¾</strong></td><td align="left">4000Ã—6000, 12.10MB</td><td align="left">1440Ã—2160, 318KB</td><td align="left">1440Ã—2160, 305KB</td></tr><tr><td align="left"><strong>2K æˆªå›¾</strong></td><td align="left">1440Ã—3200, 2.10MB</td><td align="left">1440Ã—3200, 148KB</td><td align="left">1440Ã—3200, 256KB</td></tr><tr><td align="left"><strong>è¶…é•¿è®°å½•</strong></td><td align="left">1242Ã—22080, 6.10MB</td><td align="left">758Ã—13490, 290KB</td><td align="left">744Ã—13129, 256KB</td></tr><tr><td align="left"><strong>å…¨æ™¯æ¨ªå›¾</strong></td><td align="left">12000Ã—5000, 8.10MB</td><td align="left">1440Ã—600, 126KB</td><td align="left">1440Ã—600, 123KB</td></tr><tr><td align="left"><strong>è®¾è®¡åŸç¨¿</strong></td><td align="left">6000Ã—6000, 6.90MB</td><td align="left">1440Ã—1440, 263KB</td><td align="left">1440Ã—1440, 279KB</td></tr></tbody></table>
<h3 data-id="heading-3">ğŸ”¬ æ ¸å¿ƒç®—æ³•ç‰¹æ€§</h3>
<p>æœ¬åº“é‡‡ç”¨<strong>è‡ªé€‚åº”ç»Ÿä¸€å›¾åƒå‹ç¼©ç®—æ³• (Adaptive Unified Image Compression)</strong>ï¼Œé€šè¿‡åŸå›¾çš„åˆ†è¾¨ç‡ç‰¹å¾ï¼ŒåŠ¨æ€åº”ç”¨å·®å¼‚åŒ–ç­–ç•¥ï¼Œå®ç°ç”»è´¨ä¸ä½“ç§¯çš„æœ€ä¼˜å¹³è¡¡ã€‚</p>
<h4 data-id="heading-4">æ™ºèƒ½åˆ†è¾¨ç‡å†³ç­–</h4>
<ul>
<li><strong>é«˜æ¸…åŸºå‡† (1440p)</strong>ï¼šé»˜è®¤ä»¥ 1440px ä½œä¸ºçŸ­è¾¹åŸºå‡†ï¼Œç¡®ä¿åœ¨ç°ä»£ 2K/4K å±å¹•ä¸Šçš„è§†è§‰æ¸…æ™°åº¦</li>
<li><strong>å…¨æ™¯å¢™ç­–ç•¥</strong>ï¼šè‡ªåŠ¨è¯†åˆ«è¶…å¤§å…¨æ™¯å›¾ï¼ˆé•¿è¾¹ &gt;10800pxï¼‰ï¼Œé”å®šé•¿è¾¹ä¸º 1440pxï¼Œä¿ç•™å®Œæ•´è§†é‡</li>
<li><strong>è¶…å¤§åƒç´ é™·é˜±</strong>ï¼šå¯¹è¶…è¿‡ 4096ä¸‡åƒç´ çš„è¶…é«˜åƒç´ å›¾è‡ªåŠ¨æ‰§è¡Œ 1/4 é™é‡‡æ ·å¤„ç†</li>
<li><strong>é•¿å›¾å†…å­˜ä¿æŠ¤</strong>ï¼šé’ˆå¯¹è¶…é•¿æˆªå›¾å»ºç«‹ 10.24MP åƒç´ ä¸Šé™ï¼Œé€šè¿‡ç­‰æ¯”ç¼©æ”¾é˜²æ­¢ OOM</li>
</ul>
<h4 data-id="heading-5">è‡ªé€‚åº”æ¯”ç‰¹ç‡æ§åˆ¶</h4>
<ul>
<li><strong>æå°å›¾ (&lt;0.5MP)</strong>ï¼šå‡ ä¹ä¸è¿›è¡Œæœ‰æŸå‹ç¼©ï¼Œé˜²æ­¢å‹ç¼©ä¼ªå½±</li>
<li><strong>é«˜é¢‘ä¿¡æ¯å›¾ (0.5-1MP)</strong>ï¼šæé«˜ç¼–ç è´¨é‡ï¼Œè¡¥å¿åˆ†è¾¨ç‡æŸå¤±</li>
<li><strong>æ ‡å‡†å›¾ç‰‡ (1-3MP)</strong>ï¼šåº”ç”¨å¹³è¡¡ç³»æ•°ï¼Œå¯¹æ ‡ä¸»æµç¤¾äº¤è½¯ä»¶ä½“éªŒ</li>
<li><strong>è¶…å¤§å›¾/é•¿å›¾ (&gt;3MP)</strong>ï¼šåº”ç”¨é«˜å‹ç¼©ç‡ï¼Œæ˜¾è‘—å‡å°‘ä½“ç§¯</li>
</ul>
<h4 data-id="heading-6">å¥å£®æ€§ä¿éšœ</h4>
<ul>
<li><strong>è†¨èƒ€å›é€€</strong>ï¼šå‹ç¼©åä½“ç§¯å¤§äºåŸå›¾æ—¶ï¼Œè‡ªåŠ¨é€ä¼ åŸå›¾ï¼Œç¡®ä¿ç»ä¸"è´Ÿä¼˜åŒ–"</li>
<li><strong>æ™ºèƒ½æ ¼å¼é€ä¼ </strong>ï¼šä¿ç•™å°ä½“ç§¯ PNG çš„é€æ˜é€šé“ï¼Œå¤§ä½“ç§¯ PNG è‡ªåŠ¨è½¬ç ä¸º JPEG</li>
<li><strong>è¾“å…¥é˜²å¾¡</strong>ï¼šå¦¥å–„å¤„ç†æç«¯åˆ†è¾¨ç‡è¾“å…¥ï¼ˆ0ã€è´Ÿæ•°ã€1px ç­‰ï¼‰ï¼Œé˜²æ­¢å´©æºƒ</li>
</ul>
<h2 data-id="heading-7">ğŸ“¦ å¯¼å…¥</h2>
<p>ç¡®ä¿é¡¹ç›®çš„ <code>build.gradle</code> æˆ– <code>build.gradle.kts</code> å·²é…ç½® Maven Central ä»“åº“ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">repositories {
    mavenCentral()
}
</code></pre>
<p>åœ¨æ¨¡å—çš„æ„å»ºæ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–ï¼š</p>
<p><strong>Kotlin DSL (<code>build.gradle.kts</code>):</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin">dependencies {
    implementation(<span class="hljs-string">"top.zibin:luban:2.0.0"</span>)
}
</code></pre>
<p><strong>Groovy (<code>build.gradle</code>):</strong></p>
<pre><code class="hljs language-groovy" lang="groovy">dependencies {
    implementation 'top.zibin:luban:2.0.0'
}
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼šè¯·è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fsearch.maven.org%2Fsearch%3Fq%3Dg%3Atop.zibin%2520a%3Aluban" target="_blank" title="https://search.maven.org/search?q=g:top.zibin%20a:luban" ref="nofollow noopener noreferrer">Maven Central</a> æŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬å·ã€‚</p>
</blockquote>
<h2 data-id="heading-8">ğŸ’» ä½¿ç”¨</h2>
<h4 data-id="heading-9">âš¡ Kotlin (Coroutines)</h4>
<p>åœ¨ Kotlin ä¸­ï¼Œæ¨èä½¿ç”¨ <code>suspend</code> å‡½æ•°è¿›è¡Œè°ƒç”¨ï¼Œä»£ç æ›´ç®€æ´ã€‚</p>
<h5 data-id="heading-10">å‹ç¼©å•å¼ å›¾ç‰‡</h5>
<pre><code class="hljs language-kotlin" lang="kotlin">lifecycleScope.launch {
    <span class="hljs-keyword">val</span> inputUri: Uri = ... <span class="hljs-comment">// å›¾ç‰‡ Uri</span>
    <span class="hljs-keyword">val</span> outputDir = context.cacheDir
    
    Luban.compress(context, inputUri, outputDir)
        .onSuccess { file -&gt;
            <span class="hljs-comment">// å‹ç¼©æˆåŠŸï¼Œfile ä¸ºå‹ç¼©åçš„å›¾ç‰‡æ–‡ä»¶</span>
            Log.d(<span class="hljs-string">"Luban"</span>, <span class="hljs-string">"Compressed: <span class="hljs-subst">${file.absolutePath}</span>"</span>)
        }
        .onFailure { error -&gt;
            <span class="hljs-comment">// å¤„ç†é”™è¯¯</span>
            Log.e(<span class="hljs-string">"Luban"</span>, <span class="hljs-string">"Error: <span class="hljs-subst">${error.message}</span>"</span>)
        }
}
</code></pre>
<h5 data-id="heading-11">å‹ç¼©å•å¼ å›¾ç‰‡æ–‡ä»¶</h5>
<pre><code class="hljs language-kotlin" lang="kotlin">lifecycleScope.launch {
    <span class="hljs-keyword">val</span> inputFile: File = ... 
    <span class="hljs-keyword">val</span> outputDir = context.cacheDir
    
    Luban.compress(inputFile, outputDir)
        .onSuccess { file -&gt;
            Log.d(<span class="hljs-string">"Luban"</span>, <span class="hljs-string">"Compressed: <span class="hljs-subst">${file.absolutePath}</span>"</span>)
        }
        .onFailure { error -&gt;
            Log.e(<span class="hljs-string">"Luban"</span>, <span class="hljs-string">"Error: <span class="hljs-subst">${error.message}</span>"</span>)
        }
}
</code></pre>
<h5 data-id="heading-12">å‹ç¼©åˆ°æŒ‡å®šæ–‡ä»¶è·¯å¾„</h5>
<pre><code class="hljs language-kotlin" lang="kotlin">lifecycleScope.launch {
    <span class="hljs-keyword">val</span> inputFile: File = ...
    <span class="hljs-keyword">val</span> outputFile = File(context.cacheDir, <span class="hljs-string">"custom_output.jpg"</span>)
    
    Luban.compressToFile(inputFile, outputFile)
        .onSuccess { file -&gt;
            Log.d(<span class="hljs-string">"Luban"</span>, <span class="hljs-string">"Compressed to: <span class="hljs-subst">${file.absolutePath}</span>"</span>)
        }
        .onFailure { error -&gt;
            Log.e(<span class="hljs-string">"Luban"</span>, <span class="hljs-string">"Error: <span class="hljs-subst">${error.message}</span>"</span>)
        }
}
</code></pre>
<h5 data-id="heading-13">å¹¶å‘å‹ç¼©å¤šå¼ å›¾ç‰‡</h5>
<pre><code class="hljs language-kotlin" lang="kotlin">lifecycleScope.launch {
    <span class="hljs-keyword">val</span> uris: List&lt;Uri&gt; = ... 
    <span class="hljs-keyword">val</span> outputDir = context.cacheDir

    <span class="hljs-keyword">val</span> results = Luban.compress(context, uris, outputDir)
    
    results.forEach { result -&gt;
        result.onSuccess { file -&gt; 
            Log.d(<span class="hljs-string">"Luban"</span>, <span class="hljs-string">"Compressed: <span class="hljs-subst">${file.absolutePath}</span>"</span>)
        }
        .onFailure { error -&gt;
            Log.e(<span class="hljs-string">"Luban"</span>, <span class="hljs-string">"Error: <span class="hljs-subst">${error.message}</span>"</span>)
        }
    }
}
</code></pre>
<h5 data-id="heading-14">å¹¶å‘å‹ç¼©å¤šä¸ªæ–‡ä»¶</h5>
<pre><code class="hljs language-kotlin" lang="kotlin">lifecycleScope.launch {
    <span class="hljs-keyword">val</span> files: List&lt;File&gt; = ...
    <span class="hljs-keyword">val</span> outputDir = context.cacheDir

    <span class="hljs-keyword">val</span> results = Luban.compress(files, outputDir)
    
    results.forEach { result -&gt;
        result.onSuccess { file -&gt; 
            Log.d(<span class="hljs-string">"Luban"</span>, <span class="hljs-string">"Compressed: <span class="hljs-subst">${file.absolutePath}</span>"</span>)
        }
        .onFailure { error -&gt;
            Log.e(<span class="hljs-string">"Luban"</span>, <span class="hljs-string">"Error: <span class="hljs-subst">${error.message}</span>"</span>)
        }
    }
}
</code></pre>
<h5 data-id="heading-15">åœ¨å…¶ä»–åç¨‹ä½œç”¨åŸŸä¸­ä½¿ç”¨</h5>
<p>å¦‚æœä¸åœ¨ Activity/Fragment ä¸­ä½¿ç”¨ï¼Œå¯ä»¥ä½¿ç”¨ <code>CoroutineScope</code>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> scope = CoroutineScope(Dispatchers.Main + SupervisorJob())

scope.launch {
    <span class="hljs-keyword">val</span> inputUri: Uri = ...
    <span class="hljs-keyword">val</span> outputDir = context.cacheDir
    
    Luban.compress(context, inputUri, outputDir)
        .onSuccess { file -&gt;
            <span class="hljs-comment">// å¤„ç†æˆåŠŸ</span>
        }
        .onFailure { error -&gt;
            <span class="hljs-comment">// å¤„ç†é”™è¯¯</span>
        }
}
</code></pre>
<h4 data-id="heading-16">â˜• Java / Builder æ¨¡å¼</h4>
<p>å¯¹äº Java é¡¹ç›®æˆ–åå¥½å›è°ƒé£æ ¼çš„å¼€å‘è€…ï¼Œå¯ä»¥ä½¿ç”¨å…¼å®¹æ—§ç‰ˆé£æ ¼çš„ <code>Luban.with()</code> APIã€‚</p>
<h5 data-id="heading-17">å‹ç¼©å•å¼ å›¾ç‰‡</h5>
<pre><code class="hljs language-java" lang="java">Luban.with(context)
    .load(imageFile) <span class="hljs-comment">// æ”¯æŒ File, Uri, æˆ– String è·¯å¾„</span>
    .setTargetDir(context.getCacheDir())
    .bindLifecycle(lifecycleOwner) <span class="hljs-comment">// å¯é€‰ï¼šé¡µé¢é”€æ¯æ—¶è‡ªåŠ¨å–æ¶ˆ</span>
    .setCompressListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OnCompressListener</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onStart</span><span class="hljs-params">()</span> {
            <span class="hljs-comment">// å¼€å§‹å‹ç¼©</span>
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(File file)</span> {
            <span class="hljs-comment">// å‹ç¼©æˆåŠŸ</span>
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable e)</span> {
            <span class="hljs-comment">// å‘ç”Ÿé”™è¯¯</span>
        }
    })
    .launch();
</code></pre>
<h5 data-id="heading-18">å‹ç¼©å¤šå¼ å›¾ç‰‡</h5>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; imagePaths = ...; <span class="hljs-comment">// å›¾ç‰‡è·¯å¾„åˆ—è¡¨</span>

Luban.with(context)
    .load(imagePaths) <span class="hljs-comment">// åŠ è½½å›¾ç‰‡åˆ—è¡¨</span>
    .setTargetDir(context.getCacheDir())
    .setCompressListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OnCompressListener</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onStart</span><span class="hljs-params">()</span> {
            <span class="hljs-comment">// å¼€å§‹å‹ç¼©</span>
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(File file)</span> {
            <span class="hljs-comment">// æ¯å¼ å›¾ç‰‡å‹ç¼©æˆåŠŸåéƒ½ä¼šå›è°ƒä¸€æ¬¡</span>
            Log.d(<span class="hljs-string">"Luban"</span>, <span class="hljs-string">"Compressed: "</span> + file.getAbsolutePath());
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable e)</span> {
            <span class="hljs-comment">// å‘ç”Ÿé”™è¯¯</span>
        }
    })
    .launch();
</code></pre>
<h3 data-id="heading-19">å½©è›‹</h3>
<p><code>Flutter</code> ç‰ˆ <code>Luban 2</code> å³å°†ä¸Šçº¿ï¼ŒAndroidã€iOSéƒ½èƒ½ä½¿ç”¨ï¼Œæ•¬è¯·æœŸå¾…~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€AndroidæŠ€èƒ½ç‚¹ã€‘ä¸€å¼ å›¾ç†æ¸… å¼€æœºã€Appå¯åŠ¨æµç¨‹]]></title>    <link>https://juejin.cn/post/7592241336290017331</link>    <guid>https://juejin.cn/post/7592241336290017331</guid>    <pubDate>2026-01-07T06:52:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592241336290017331" data-draft-id="7592241336289558579" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€AndroidæŠ€èƒ½ç‚¹ã€‘ä¸€å¼ å›¾ç†æ¸… å¼€æœºã€Appå¯åŠ¨æµç¨‹"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-07T06:52:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è«æ¯”ä¹Œæ–¯ç¯"/> <meta itemprop="url" content="https://juejin.cn/user/2840793776394269"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€AndroidæŠ€èƒ½ç‚¹ã€‘ä¸€å¼ å›¾ç†æ¸… å¼€æœºã€Appå¯åŠ¨æµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2840793776394269/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è«æ¯”ä¹Œæ–¯ç¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T06:52:36.000Z" title="Wed Jan 07 2026 06:52:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Android å¼€æœºé“¾è·¯ + æ¡Œé¢ Appã€Œç”¨æˆ·ç‚¹å‡»å›¾æ ‡ã€å¯åŠ¨é“¾è·¯ï¼ˆç«¯åˆ°ç«¯æ¢³ç†ï¼‰</h2>
<blockquote>
<p>ç›®çš„ï¼šæŠŠ <strong>å¼€æœºåˆ°æ¡Œé¢å¯ç”¨</strong> çš„å…³é”®é“¾è·¯ï¼Œä»¥åŠ <strong>ç”¨æˆ·åœ¨æ¡Œé¢ç‚¹å‡»å›¾æ ‡ â†’ ç›®æ ‡ App Activity å±•ç¤ºé¦–å¸§</strong> çš„å®Œæ•´ä¸»å¹²æµç¨‹ä¸²èµ·æ¥ã€‚<br/>
è¯´æ˜ï¼šä¸åŒ Android ç‰ˆæœ¬å®ç°ç»†èŠ‚ç•¥æœ‰å·®å¼‚ï¼ˆAndroid 10+ å¼•å…¥ ATMS åˆ†å·¥æ›´æ˜æ˜¾ï¼‰ï¼Œæœ¬æ–‡ä»¥ <strong>é€šç”¨ä¸»å¹²</strong> ä¸ºä¸»ï¼Œå¿…è¦å¤„ç‚¹å‡ºå…³é”®åˆ†å·¥ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">1) å¼€æœºé“¾è·¯ï¼ˆBoot Chainï¼‰ï¼šKernel â†’ init â†’ zygote â†’ system_server â†’ launcher</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91c45c1118d141bbbf939a4454d62222~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I6r5q-U5LmM5pav546v:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768373556&amp;x-signature=09s85SaeUBDneej4DNW4JTyNdLA%3D" alt="å¼€æœºæµç¨‹ diagram-2026-01-07-064408.png" loading="lazy"/></p>
<h4 data-id="heading-2">1.1 Kernel å¯åŠ¨ initï¼ˆNativeï¼‰</h4>
<ul>
<li>Kernel å¯åŠ¨å®Œæˆåå¯åŠ¨ç”¨æˆ·æ€ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼š<code>/init</code></li>
<li><code>init</code> è´Ÿè´£ï¼š
<ul>
<li>æŒ‚è½½åˆ†åŒºã€åˆå§‹åŒ– SELinuxã€å®‰å…¨ç­–ç•¥</li>
<li>è§£æ <code>init.rc</code> / <code>*.rc</code></li>
<li>å¯åŠ¨å…³é”®å®ˆæŠ¤/æœåŠ¡ï¼š<code>servicemanager</code>ã€<code>zygote</code>ã€<code>surfaceflinger</code> ç­‰</li>
</ul>
</li>
</ul>
<p><strong>å…³é”®äº§ç‰©</strong></p>
<ul>
<li>Binder é©±åŠ¨å°±ç»ª + <code>servicemanager</code> æä¾›æœåŠ¡æ³¨å†Œ/å‘ç°</li>
<li>å›¾å½¢åŸºç¡€ï¼ˆ<code>surfaceflinger</code>ï¼‰å¯åŠ¨ï¼Œä¸ºåç»­ SystemUI/Launcher å‡ºå›¾æ‰“åº•</li>
</ul>
<h4 data-id="heading-3">1.2 init å¯åŠ¨ Zygoteï¼ˆNative â†’ Java å­µåŒ–å™¨ï¼‰</h4>
<ul>
<li>é€šè¿‡ rc å¯åŠ¨ <code>zygote</code>/<code>zygote64</code></li>
<li>Zygote åšä¸¤ä»¶æ ¸å¿ƒäº‹ï¼š
<ol>
<li><strong>é¢„åŠ è½½</strong>ï¼ˆclassesã€resourcesã€å¸¸ç”¨åº“ï¼‰ä»¥æå‡åç»­ fork æ€§èƒ½</li>
<li>æä¾› <strong>fork</strong>ï¼šæ´¾ç”Ÿ <code>system_server</code> å’Œå„ App è¿›ç¨‹</li>
</ol>
</li>
</ul>
<p>å¸¸è§å…¥å£ï¼š</p>
<ul>
<li><code>com.android.internal.os.ZygoteInit.main()</code>
<ul>
<li><code>preload()</code></li>
<li><code>forkSystemServer()</code></li>
</ul>
</li>
</ul>
<h4 data-id="heading-4">1.3 system_server å¯åŠ¨ï¼šSystemServer æ‹‰èµ·æ ¸å¿ƒç³»ç»ŸæœåŠ¡ï¼ˆJavaï¼‰</h4>
<ul>
<li><code>com.android.server.SystemServer.main()</code> â†’ <code>run()</code></li>
<li>åˆ†é˜¶æ®µå¯åŠ¨å¤§é‡ System Servicesï¼ˆç‰ˆæœ¬ç•¥æœ‰å·®å¼‚ï¼‰ï¼Œå…³é”®ä¸â€œå¯åŠ¨/æ¡Œé¢â€å¼ºç›¸å…³çš„åŒ…æ‹¬ï¼š
<ul>
<li><strong>AMS</strong>ï¼ˆActivityManagerServiceï¼‰ï¼šè¿›ç¨‹/å¹¿æ’­/æœåŠ¡/ANR ç­‰</li>
<li><strong>ATMS</strong>ï¼ˆActivityTaskManagerServiceï¼ŒAndroid 10+ï¼‰ï¼šActivity/Task å¯åŠ¨ä¸ä»»åŠ¡æ ˆ</li>
<li><strong>WMS</strong>ï¼ˆWindowManagerServiceï¼‰ï¼šçª—å£ç®¡ç†ä¸æ˜¾ç¤ºç­–ç•¥</li>
<li><strong>PMS</strong>ï¼ˆPackageManagerServiceï¼‰ï¼šåŒ…è§£æã€ç»„ä»¶è§£æã€æƒé™</li>
<li><code>InputManagerService</code>ï¼šè¾“å…¥</li>
<li><code>PowerManagerService</code>ï¼šç”µæºä¸å”¤é†’</li>
<li><code>DisplayManagerService</code>ï¼šæ˜¾ç¤º</li>
<li>ä»¥åŠ SystemUIã€ç½‘ç»œã€éŸ³é¢‘ç­‰</li>
</ul>
</li>
</ul>
<p><strong>å…³é”®èŠ‚ç‚¹ï¼šsystemReady / bootCompleted</strong></p>
<ul>
<li>ç³»ç»ŸæœåŠ¡å¯åŠ¨å®Œæˆåä¼šè¿›å…¥ <code>systemReady()</code>ï¼Œéšåå‘å‡º BOOT_COMPLETEDï¼ˆå¯¹ä¸‰æ–¹ app å½±å“å¾ˆå¤§ï¼‰</li>
</ul>
<h4 data-id="heading-5">1.4 SystemUI/Launcher å‡ºç°ï¼ˆæ¡Œé¢å¯ç”¨ï¼‰</h4>
<ul>
<li>ä¸€èˆ¬ä¼šå…ˆå¯åŠ¨ <strong>SystemUI</strong>ï¼ˆçŠ¶æ€æ ã€å¯¼èˆªæ ã€é”å±ç­‰ï¼‰</li>
<li>è§£é”å/æˆ–æ»¡è¶³æ¡ä»¶åï¼Œå¯åŠ¨ <strong>Launcher</strong>ï¼ˆæ¡Œé¢åº”ç”¨ï¼‰</li>
</ul>
<p><strong>æ¡Œé¢å¯åŠ¨æ–¹å¼ï¼ˆæ¦‚å¿µï¼‰</strong></p>
<ul>
<li>SystemServer é€‰æ‹©ä¸€ä¸ª HOME Activityï¼ˆLauncherï¼‰
<ul>
<li>Intentï¼š<code>ACTION_MAIN</code> + <code>CATEGORY_HOME</code></li>
</ul>
</li>
<li>èµ°ä¸€æ¬¡æ ‡å‡†çš„ Activity å¯åŠ¨é“¾è·¯ï¼ˆè§ç¬¬ 2 éƒ¨åˆ†ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-6">2) æ¡Œé¢ç”¨æˆ·ç‚¹å‡»å›¾æ ‡ï¼šLauncher â†’ SystemServer â†’ ç›®æ ‡ App é¦–å¸§</h3>
<blockquote>
<p>åœºæ™¯ï¼šç”¨æˆ·åœ¨æ¡Œé¢ç‚¹å‡»æŸä¸ª App å›¾æ ‡ï¼ˆç›®æ ‡ Activity å¯èƒ½æ˜¯ LAUNCHER Activityï¼‰ï¼Œç³»ç»Ÿå®Œæˆä»ç‚¹å‡»åˆ°ç•Œé¢æ˜¾ç¤ºã€‚</p>
</blockquote>
<h4 data-id="heading-7">2.1 è§¦æ‘¸äº‹ä»¶åˆ° Launcherï¼šInput â†’ View â†’ onClick</h4>
<ul>
<li>è§¦æ‘¸ä»ç¡¬ä»¶åˆ°åº”ç”¨çš„ä¸»é“¾è·¯ï¼ˆé«˜å±‚æ¦‚å¿µï¼‰ï¼š
<ol>
<li>Input é©±åŠ¨äº§ç”Ÿäº‹ä»¶</li>
<li><code>InputManagerService</code> åˆ†å‘</li>
<li>é€šè¿‡ WMS é€‰æ‹©ç„¦ç‚¹çª—å£/ç›®æ ‡åº”ç”¨</li>
<li>äº‹ä»¶åˆ°è¾¾ Launcher è¿›ç¨‹ï¼ˆ<code>ViewRootImpl</code> â†’ <code>DecorView</code> â†’ <code>View</code>ï¼‰</li>
<li>ç‚¹å‡»è§¦å‘ Launcher çš„å›¾æ ‡ç‚¹å‡»é€»è¾‘</li>
</ol>
</li>
</ul>
<h4 data-id="heading-8">2.2 Launcher ç»„è£… Intent å¹¶å‘èµ· startActivity</h4>
<ul>
<li>Launcher é€šå¸¸ä¸ºç›®æ ‡ App ç»„è£…ï¼š
<ul>
<li>æ˜¾å¼ Intentï¼š<code>ComponentName(åŒ…å/Activity)</code></li>
<li>æˆ–éšå¼ Intentï¼ˆè¾ƒå°‘ç”¨äºå›¾æ ‡ï¼‰</li>
<li>å¸¸å¸¦ flagï¼š<code>FLAG_ACTIVITY_NEW_TASK</code>ï¼ˆå›  Launcher éç›®æ ‡ app å†…éƒ¨é¡µé¢è·³è½¬ï¼‰</li>
</ul>
</li>
</ul>
<p>Launcher ä¾§å¸¸è§å…¥å£ï¼ˆæ¦‚å¿µï¼‰ï¼š</p>
<ul>
<li><code>Activity.startActivity()</code> / <code>Context.startActivity()</code></li>
<li><code>Instrumentation.execStartActivity()</code></li>
<li>è¿›å…¥ç³»ç»ŸæœåŠ¡ï¼ˆBinderï¼‰ï¼š
<ul>
<li>Android 10+ å¸¸è§ï¼š<code>IActivityTaskManager.startActivity(...)</code></li>
</ul>
</li>
</ul>
<h4 data-id="heading-9">2.3 è¿›å…¥ SystemServerï¼šATMS åš Activity å¯åŠ¨å†³ç­–ï¼ˆä»»åŠ¡æ ˆ/å¤ç”¨/æƒé™ï¼‰</h4>
<p>SystemServer ä¾§å…³é”®æµç¨‹ï¼ˆé«˜å±‚è¯­ä¹‰ï¼‰ï¼š</p>
<ol>
<li>æƒé™æ ¡éªŒã€è°ƒç”¨è€…æ ¡éªŒï¼ˆæ˜¯å¦å…è®¸å¯åŠ¨ã€åå°å¯åŠ¨é™åˆ¶ç­‰ï¼‰</li>
<li>é€šè¿‡ PMS è§£æç›®æ ‡ç»„ä»¶ï¼ˆActivityInfo/ProcessName/UID ç­‰ï¼‰</li>
<li>è®¡ç®—ä»»åŠ¡æ ˆå½’å±ä¸å¯åŠ¨æ¨¡å¼ï¼ˆstandard/singleTaskâ€¦ï¼‰</li>
<li>åˆ¤æ–­æ˜¯ <strong>å†·/æ¸©/çƒ­å¯åŠ¨</strong>ï¼š
<ul>
<li>è¿›ç¨‹æ˜¯å¦å­˜åœ¨</li>
<li>ç›®æ ‡ Activity æ˜¯å¦å·²å­˜åœ¨äºä»»åŠ¡æ ˆ</li>
</ul>
</li>
</ol>
<blockquote>
<p>ç»“è®ºï¼šATMS è´Ÿè´£â€œ<strong>Activity/Task æ€ä¹ˆå¯åŠ¨ã€æ”¾å“ªã€å¤ç”¨è°</strong>â€ï¼›è€Œâ€œ<strong>è¿›ç¨‹æ€ä¹ˆæ¥</strong>â€äº¤ç»™ AMSã€‚</p>
</blockquote>
<h4 data-id="heading-10">2.4 å†·å¯åŠ¨åˆ†æ”¯ï¼šç›®æ ‡è¿›ç¨‹ä¸å­˜åœ¨ â†’ AMS åˆ›å»ºè¿›ç¨‹ï¼ˆzygote forkï¼‰</h4>
<p><strong>è§¦å‘æ¡ä»¶</strong></p>
<ul>
<li>ç›®æ ‡ App è¿›ç¨‹å°šæœªåˆ›å»ºï¼Œæˆ–è¢«æ€</li>
</ul>
<p><strong>å…³é”®é“¾è·¯ï¼ˆæ¦‚å¿µï¼‰</strong></p>
<ul>
<li>ATMSï¼šéœ€è¦è¿›ç¨‹ â†’ è¯·æ±‚ AMS</li>
<li>AMSï¼šå‡†å¤‡ <code>ProcessRecord</code>ï¼ˆuid/selinux/abi/è¿›ç¨‹åï¼‰</li>
<li><code>ZygoteProcess.start(...)</code>ï¼š
<ul>
<li>é€šè¿‡ socket ä¸ zygote é€šä¿¡</li>
<li>zygote fork å‡ºç›®æ ‡ App è¿›ç¨‹</li>
</ul>
</li>
</ul>
<h4 data-id="heading-11">2.5 ç›®æ ‡ App è¿›ç¨‹èµ·æ¥ï¼šActivityThread.main â†’ attach åˆ° AMS</h4>
<p>App è¿›ç¨‹å…¥å£ï¼š</p>
<ul>
<li><code>android.app.ActivityThread.main()</code>
<ul>
<li>å»ºç«‹ä¸»çº¿ç¨‹ Looper</li>
<li><code>attach(false)</code>ï¼š
<ul>
<li>Binder â†’ <code>IActivityManager.attachApplication(appThread)</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>SystemServerï¼ˆAMSï¼‰æ”¶åˆ° attachï¼š</p>
<ul>
<li>è®°å½•è¿›ç¨‹å·²ä¸Šçº¿</li>
<li>å›è°ƒåˆ° App è¿›ç¨‹ï¼š
<ul>
<li><code>IApplicationThread.bindApplication(...)</code></li>
</ul>
</li>
</ul>
<h4 data-id="heading-12">2.6 bindApplicationï¼šåˆ›å»º Application / åˆå§‹åŒ–è¿è¡Œç¯å¢ƒ</h4>
<p>App è¿›ç¨‹æ‰§è¡Œï¼š</p>
<ul>
<li><code>ActivityThread.handleBindApplication()</code>
<ul>
<li>åˆ›å»º <code>LoadedApk</code></li>
<li>åˆ›å»º <code>Application</code></li>
<li><code>Application.onCreate()</code></li>
<li>å®‰è£… ContentProvidersï¼ˆå¦‚æœ‰ï¼‰</li>
</ul>
</li>
</ul>
<blockquote>
<p>åˆ°è¿™ä¸€æ­¥ï¼š<strong>è¿›ç¨‹ä¸åº”ç”¨çº§åˆå§‹åŒ–å®Œæˆ</strong>ï¼Œä½† Activity è¿˜æœªçœŸæ­£ onCreateï¼ˆä¸‹ä¸€æ­¥ç”± ATMS å‘èµ· Launchï¼‰ã€‚</p>
</blockquote>
<h4 data-id="heading-13">2.7 çœŸæ­£å¯åŠ¨ Activityï¼šSystemServer ä¸‹å‘äº‹åŠ¡ â†’ App æ‰§è¡Œ onCreate/onResume</h4>
<p>Android P+ å¸¸ç”¨äº‹åŠ¡æœºåˆ¶ï¼ˆæ¦‚å¿µï¼‰ï¼š</p>
<ul>
<li>SystemServerï¼ˆATMSï¼‰æ„é€  <code>ClientTransaction</code>
<ul>
<li>åŒ…å« <code>LaunchActivityItem</code>ã€<code>ResumeActivityItem</code> ç­‰</li>
</ul>
</li>
<li>Binder â†’ Appï¼š<code>IApplicationThread.scheduleTransaction(transaction)</code></li>
</ul>
<p>App ä¾§æ‰§è¡Œï¼š</p>
<ul>
<li><code>TransactionExecutor.execute()</code></li>
<li><code>ActivityThread.handleLaunchActivity()</code>
<ul>
<li>åˆ›å»º Activity å®ä¾‹</li>
<li><code>Activity.attach()</code></li>
<li><code>Activity.onCreate()</code></li>
</ul>
</li>
<li>éšå <code>onStart()</code>ã€<code>onResume()</code></li>
</ul>
<h4 data-id="heading-14">2.8 é¦–å¸§æ˜¾ç¤ºï¼šWMS/Surface + App ç»˜åˆ¶ç®¡çº¿</h4>
<p>å¹¶è¡Œåä½œç‚¹ï¼š</p>
<ul>
<li>ATMS/WMS æ§åˆ¶çª—å£å¯è§æ€§ã€è½¬åœºåŠ¨ç”»ã€ç„¦ç‚¹</li>
<li>App åœ¨ <code>onResume</code> å‰åè§¦å‘è§†å›¾æ ‘åˆ›å»º</li>
<li>é¦–å¸§ç»˜åˆ¶ï¼š
<ul>
<li><code>Choreographer</code> é©±åŠ¨ measure/layout/draw</li>
<li><code>Surface</code> æäº¤ç»™ SurfaceFlinger åˆæˆæ˜¾ç¤º</li>
</ul>
</li>
</ul>
<p><strong>ç”¨æˆ·å¯è§ç»“æœ</strong></p>
<ul>
<li>å±å¹•ä»æ¡Œé¢åˆ‡åˆ°ç›®æ ‡ Appï¼Œå±•ç¤ºé¦–å¸§</li>
</ul>
<hr/>
<h3 data-id="heading-15">3) å†·/æ¸©/çƒ­å¯åŠ¨å¯¹æ¯”ï¼ˆç”¨æˆ·ç‚¹å‡»å›¾æ ‡æ—¶å¸¸è§ï¼‰</h3>
<ul>
<li><strong>å†·å¯åŠ¨ï¼ˆColdï¼‰</strong>ï¼šæ— è¿›ç¨‹ â†’ fork + bindApplication + LaunchActivity + é¦–å¸§</li>
<li><strong>æ¸©å¯åŠ¨ï¼ˆWarmï¼‰</strong>ï¼šè¿›ç¨‹åœ¨ï¼Œä½† Activity ä¸åœ¨å‰å°/éœ€æ–°å»º â†’ çœæ‰ fork å’Œ Application.onCreateï¼ˆå¤šæ•°æƒ…å†µï¼‰</li>
<li><strong>çƒ­å¯åŠ¨ï¼ˆHotï¼‰</strong>ï¼šActivity å®ä¾‹ä»åœ¨ â†’ å¤šä¸º task åˆ‡å‰å° + onRestart/onStart/onResume + çª—å£åˆ‡æ¢</li>
</ul>
<hr/>
<h3 data-id="heading-16">4) ä¸€å¼ â€œæ—¶åºå›¾â€ï¼ˆä»ç‚¹å‡»åˆ°é¦–å¸§ï¼‰</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de50e860b4734b949ca6faf00d73d69c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I6r5q-U5LmM5pav546v:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768373556&amp;x-signature=V6Fwvos2phsJSl5B9UbMELFo8Kw%3D" alt="æ¡Œé¢Appå¯åŠ¨ diagram-2026-01-07-064804.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-17">5) ä½ å¯ä»¥æ‹¿æ¥å¯¹ç…§çš„è§‚æµ‹æ‰‹æ®µ</h3>
<ul>
<li><code>adb shell am start -W &lt;intent&gt;</code>ï¼šç²—çœ‹å¯åŠ¨è€—æ—¶</li>
<li><code>adb shell dumpsys activity activities</code>ï¼šä»»åŠ¡æ ˆ/Activity çŠ¶æ€</li>
<li><code>adb shell dumpsys activity processes</code>ï¼šè¿›ç¨‹çŠ¶æ€</li>
<li><code>adb shell dumpsys window windows</code>ï¼šçª—å£çŠ¶æ€</li>
<li><code>perfetto/atrace</code>ï¼šç²¾ç¡®çœ‹ bindApplicationã€launchã€é¦–å¸§ç»˜åˆ¶ slice</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Androidä¸­ç¬¬ä¸‰æ–¹åº“çš„ä½¿ç”¨]]></title>    <link>https://juejin.cn/post/7592134330313424939</link>    <guid>https://juejin.cn/post/7592134330313424939</guid>    <pubDate>2026-01-07T07:25:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592134330313424939" data-draft-id="7591806035758497834" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Androidä¸­ç¬¬ä¸‰æ–¹åº“çš„ä½¿ç”¨"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-07T07:25:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Pawns"/> <meta itemprop="url" content="https://juejin.cn/user/3254200295233767"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Androidä¸­ç¬¬ä¸‰æ–¹åº“çš„ä½¿ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3254200295233767/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Pawns
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T07:25:18.000Z" title="Wed Jan 07 2026 07:25:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">1.<code>greendao</code></h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgreenrobot%2FgreenDAO" target="_blank" title="https://github.com/greenrobot/greenDAO" ref="nofollow noopener noreferrer">githubåœ°å€</a>
ä½œä¸ºæœ¬åœ°æ•°æ®åº“çš„çŸ¥åç¬¬ä¸‰æ–¹ï¼Œå­¦ä¹ å®ƒçš„ä½¿ç”¨è¿‡ç¨‹</p>
<h5 data-id="heading-1">1.å¯¼å…¥</h5>
<h6 data-id="heading-2">1.åœ¨<code>build.gradle</code>Appå±‚æ¬¡</h6>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98100b4242324a6d9cc4ce93195cd49b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGF3bnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375518&amp;x-signature=X2pGpb2qywVobOqgyYaRDTWygN4%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c830a939c23489cbeaa88f94920a812~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGF3bnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375518&amp;x-signature=RG65AiH4vRrkJmXKL79gZ%2BvCwLM%3D" alt="image.png" loading="lazy"/></p>
<h6 data-id="heading-3">2.åœ¨<code>build.gradle</code>Projectå±‚æ¬¡</h6>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5467fb7f2754a839fb5175dd58ac005~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGF3bnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375518&amp;x-signature=F26fsEqmPJvJEdHnFzLBrdhmtOc%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-4">2.åˆ›å»ºå®ä½“ç±»Entity</h5>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1dd2686893d4709b9ef1d392d41af90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGF3bnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375518&amp;x-signature=ZAluDtovf3IawFzNlt5dgLRlMfk%3D" alt="image.png" loading="lazy"/></p>
<p>å®Œæˆä¸Šå›¾æ‰€ç¤ºçš„æ­¥éª¤åï¼Œå†ç‚¹å‡»èœå•æ <code>Build</code>-&gt;<code>Make Project</code>å³å¯è‡ªåŠ¨æ³¨è§£åˆ›å»ºçš„å®ä½“ç±»ï¼Œå¦‚ä¸Šå›¾æ²¡æœ‰æ¡†å‡ºæ¥çš„éƒ¨åˆ†ã€‚</p>
<blockquote>
<p>åŒæ—¶è¿˜ä¼šç”Ÿæˆå¦‚ä¸‹çš„ä¸‰ä¸ªæ–‡ä»¶</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17269528012d429c96ffc1f548b1bd17~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGF3bnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375518&amp;x-signature=Lx0FEMk8soBzHTLAwd%2Bkkr8JBXI%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-5">3.è‡ªå®šä¹‰å·¥å…·ç±»</h5>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c364b822eb0f4f7aa3aaa4c40adeb4e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGF3bnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375518&amp;x-signature=1Szoup6C4%2F8vaboejAtZlYbquUY%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-6">4.ä½¿ç”¨</h5>
<p>åˆå§‹åŒ–</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c61d095116bb488b9155bb513c5c200a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUGF3bnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375518&amp;x-signature=pvHfdK1Xr2jy2n7XecbDO3n7IM0%3D" alt="image.png" loading="lazy"/></p>
<p>å…¶ä»–çš„å¢åˆ æ”¹æŸ¥å°±æ˜¯å¾ˆæ™®é€šçš„æ–¹æ³•äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å†æ—¶1å¹´ï¼ŒTinyEditor v4.0 æ­£å¼å‘å¸ƒï¼]]></title>    <link>https://juejin.cn/post/7592152007840350208</link>    <guid>https://juejin.cn/post/7592152007840350208</guid>    <pubDate>2026-01-07T08:32:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592152007840350208" data-draft-id="7592094314472767523" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å†æ—¶1å¹´ï¼ŒTinyEditor v4.0 æ­£å¼å‘å¸ƒï¼"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,JavaScript"/> <meta itemprop="datePublished" content="2026-01-07T08:32:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OpenTinyç¤¾åŒº"/> <meta itemprop="url" content="https://juejin.cn/user/3808325101432983"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å†æ—¶1å¹´ï¼ŒTinyEditor v4.0 æ­£å¼å‘å¸ƒï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808325101432983/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OpenTinyç¤¾åŒº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T08:32:07.000Z" title="Wed Jan 07 2026 08:32:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡ç”±ä½“éªŒæŠ€æœ¯å›¢é˜ŸKagolåŸåˆ›ã€‚</p>
<p>TinyEditor æ˜¯ä¸€ä¸ªåŸºäº Quill 2.0 çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåœ¨ Quill åŸºç¡€ä¸Šæ‰©å±•äº†ä¸°å¯Œçš„æ¨¡å—å’Œæ ¼å¼ï¼Œæ¡†æ¶æ— å…³ã€åŠŸèƒ½å¼ºå¤§ã€å¼€ç®±å³ç”¨ã€‚</p>
<ul>
<li>æºç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-editor%2F" target="_blank" title="https://github.com/opentiny/tiny-editor/" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a></li>
<li>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.github.io%2Ftiny-editor%2F" target="_blank" title="https://opentiny.github.io/tiny-editor/" ref="nofollow noopener noreferrer">opentiny.github.io/tiny-editorâ€¦</a></li>
</ul>
<p>å»å¹´1æœˆ2æ—¥ï¼Œæˆ‘ä»¬å‘å¸ƒäº† v3.25 ç‰ˆæœ¬ï¼ŒåŠŸèƒ½åŸºæœ¬å·²ç»å®Œå¤‡ï¼Œä¹‹å v3.x ç‰ˆæœ¬è¿›å…¥äº†ç»´æŠ¤æœŸï¼ŒåŒæ—¶å¼€å¯äº†æ¼«é•¿çš„ v4.0 ç‰ˆæœ¬çš„å¼€å‘ï¼Œv4.0 çš„æ ¸å¿ƒç›®æ ‡æ˜¯ä½“éªŒä¼˜åŒ–å’Œç¨³å®šæ€§æå‡ï¼Œå¹¶æ”¯æŒå¤šäººååŒç¼–è¾‘ã€‚</p>
<p>åœ¨é•¿è¾¾1å¹´çš„å¼€å‘å’Œæ‰“ç£¨åï¼Œæˆ‘ä»¬è£å¹¸åœ°å®£å¸ƒÂ <strong>TinyEditor v4.0</strong>Â æ­£å¼å‘å¸ƒï¼è¿™ä¸ªç‰ˆæœ¬æ±‡èšäº†å›¢é˜Ÿçš„å¿ƒè¡€ï¼Œå¸¦æ¥äº†æ¿€åŠ¨äººå¿ƒå¤šäººååŒç¼–è¾‘æ–°åŠŸèƒ½ã€ä»¥åŠå¤§é‡ä½“éªŒä¼˜åŒ–å’Œç¨³å®šæ€§æ”¹è¿›ã€‚</p>
<p><strong>é‡ç‚¹ç‰¹æ€§ï¼š</strong></p>
<ul>
<li>æ”¯æŒå¤šäººååŒç¼–è¾‘ï¼šä¸€èµ·åœ¨ç¼–è¾‘å™¨å†™ï¼ˆç©ï¼‰æ–‡æ¡£ï¼ˆè´ªåƒè›‡æ¸¸æˆæ‘¸é±¼ï¼‰ğŸ¶</li>
<li>åŸºäº quill-table-up çš„æ–°è¡¨æ ¼æ–¹æ¡ˆï¼šè¡¨æ ¼æ“ä½œä½“éªŒ++âš¡ï¸</li>
<li>åŸºäºÂ <code>emoji-mart</code>Â çš„ Emoji è¡¨æƒ…ï¼šè¡¨æƒ…å…šæœ€çˆ±ğŸ˜</li>
<li>æ”¯æŒæ–œæ†èœå•å’Œä¸°å¯Œçš„å¿«æ·é”®ï¼šé”®ç›˜æµçš„ç¦éŸ³ğŸ˜„</li>
<li>å›¾ç‰‡/è§†é¢‘/æ–‡ä»¶ä¸Šä¼ ä½“éªŒä¼˜åŒ–ğŸŒ„</li>
</ul>
<p>è¯¦ç»†çš„ Release Notes è¯·å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-editor%2Freleases%2Ftag%2Fv4.0.0" target="_blank" title="https://github.com/opentiny/tiny-editor/releases/tag/v4.0.0" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a></p>
<p>æ¬¢è¿å®‰è£… v4.0 ç‰ˆæœ¬ä½“éªŒï¼š</p>
<pre><code class="hljs language-css" lang="css">npm <span class="hljs-selector-tag">i</span> <span class="hljs-keyword">@opentiny</span>/fluent-editor<span class="hljs-keyword">@4</span>.0.0
</code></pre>
<h2 data-id="heading-0">1 äº®ç‚¹ç‰¹æ€§</h2>
<h3 data-id="heading-1">1.1 å¤šäººåä½œç¼–è¾‘</h3>
<p>v4.0 æœ€é‡ç£…çš„åŠŸèƒ½ä¹‹ä¸€æ˜¯å¼•å…¥äº†<strong>å®Œæ•´çš„åä½œç¼–è¾‘èƒ½åŠ›</strong>ã€‚æˆ‘ä»¬é›†æˆäº† quill-cursor æ¨¡å—ï¼Œæ”¯æŒå¤šäººå®æ—¶åä½œç¼–è¾‘ï¼Œå¹¶æä¾›äº†ç‹¬ç«‹çš„ npm åŒ…ä¾›å¼€å‘è€…é›†æˆã€‚æ— è®ºæ˜¯éœ€è¦ç¦»çº¿æ”¯æŒè¿˜æ˜¯äº‘ç«¯åä½œï¼ŒTinyEditor éƒ½èƒ½èƒœä»»ã€‚</p>
<p>ä½ å¯ä»¥åœ¨æˆ‘ä»¬çš„æ¼”ç¤ºé¡¹ç›®ä¸­è¿›è¡Œä½“éªŒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.github.io%2Ftiny-editor%2Fprojects%2F" target="_blank" title="https://opentiny.github.io/tiny-editor/projects/" ref="nofollow noopener noreferrer">opentiny.github.io/tiny-editorâ€¦</a></p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83e7ddefd0ea4c63b04df3c819c1f679~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768379527&amp;x-signature=gq%2F6Zh4%2Fa9vxk1Ika8eWUkBT%2BE8%3D" alt="1.JPG" loading="lazy"/></p>
<p>å…³äºååŒç¼–è¾‘æ›´è¯¦ç»†çš„ä»‹ç»ï¼Œå‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FJ_aIaAUxUtj-dtqvYZW0ng" target="_blank" title="https://mp.weixin.qq.com/s/J_aIaAUxUtj-dtqvYZW0ng" ref="nofollow noopener noreferrer">å¦‚ä½•ä½¿ç”¨ TinyEditor å¿«é€Ÿéƒ¨ç½²ä¸€ä¸ªå¤šäººååŒå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Ÿ</a></p>
<h3 data-id="heading-2">1.2 è¡¨æ ¼èƒ½åŠ›å‡çº§</h3>
<p>é›†æˆäº†Â <strong>table-up</strong>Â æ¨¡å—ï¼Œå¤§å¹…æå‡äº†è¡¨æ ¼ç¼–è¾‘å’Œæ“ä½œèƒ½åŠ›ï¼Œæ”¯æŒæ›´å¤æ‚çš„è¡¨æ ¼åœºæ™¯ã€‚</p>
<p>ä½“éªŒåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.github.io%2Ftiny-editor%2Fdocs%2Fdemo%2Ftable-up" target="_blank" title="https://opentiny.github.io/tiny-editor/docs/demo/table-up" ref="nofollow noopener noreferrer">opentiny.github.io/tiny-editorâ€¦</a></p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc7dfebfda6349149ae19e31e71bc158~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768379527&amp;x-signature=DXvaDwSPXsGgc2ocpFvXmaGIsUk%3D" alt="2.gif" loading="lazy"/></p>
<p>è¯¦ç»†ä»‹ç»å¯ä»¥å‚è€ƒä¹‹å‰çš„æ–‡ç« ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FpnQVjqHLH_fxpC7s10trzA" target="_blank" title="https://mp.weixin.qq.com/s/pnQVjqHLH_fxpC7s10trzA" ref="nofollow noopener noreferrer">TinyEditor v4.0 alphaï¼šè¡¨æ ¼æ›´å¼ºå¤§ï¼Œè¡¨æƒ…æ›´ä¸°å¯Œï¼Œä¸Šä¼ ä½“éªŒè¶…ä¹æƒ³è±¡ï¼</a></p>
<h3 data-id="heading-3">1.3 æ›´ä¸°å¯Œçš„ Emoji è¡¨æƒ…ğŸ˜˜</h3>
<ul>
<li>é›†æˆÂ <strong>emoji-mart</strong>ï¼Œæä¾›ä¸°å¯Œçš„è¡¨æƒ…é€‰æ‹©</li>
<li>ä¿®å¤äº†æ’å…¥è¡¨æƒ…åçš„å…‰æ ‡ä½ç½®é—®é¢˜</li>
<li>å®Œå–„äº†è¡¨æƒ…æ’å…¥çš„äº¤äº’ä½“éªŒ</li>
</ul>
<p>ä½“éªŒåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.github.io%2Ftiny-editor%2Fdocs%2Fdemo%2Femoji" target="_blank" title="https://opentiny.github.io/tiny-editor/docs/demo/emoji" ref="nofollow noopener noreferrer">opentiny.github.io/tiny-editorâ€¦</a></p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/81cf625cd7a144f5a4e1434ffffb93f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768379527&amp;x-signature=nu0YUDKy1BFPBpefppBvoSFwgOI%3D" alt="3.gif" loading="lazy"/></p>
<p>è¯¦ç»†ä»‹ç»å¯ä»¥å‚è€ƒä¹‹å‰çš„æ–‡ç« ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FpnQVjqHLH_fxpC7s10trzA" target="_blank" title="https://mp.weixin.qq.com/s/pnQVjqHLH_fxpC7s10trzA" ref="nofollow noopener noreferrer">TinyEditor v4.0 alphaï¼šè¡¨æ ¼æ›´å¼ºå¤§ï¼Œè¡¨æƒ…æ›´ä¸°å¯Œï¼Œä¸Šä¼ ä½“éªŒè¶…ä¹æƒ³è±¡ï¼</a></p>
<h3 data-id="heading-4">1.4 å¿«æ·é”®å’Œå¿«é€Ÿèœå•</h3>
<p>æ–°å¢äº†å¼ºå¤§çš„å¿«æ·é”®ç³»ç»Ÿå’Œå¿«é€Ÿèœå•åŠŸèƒ½ï¼Œè®©é«˜çº§ç”¨æˆ·èƒ½å¤Ÿæ›´é«˜æ•ˆåœ°æ“ä½œç¼–è¾‘å™¨ã€‚</p>
<p>ä½“éªŒåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.github.io%2Ftiny-editor%2Fprojects%2F" target="_blank" title="https://opentiny.github.io/tiny-editor/projects/" ref="nofollow noopener noreferrer">opentiny.github.io/tiny-editorâ€¦</a></p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f07f004d21b843e5ad83de958c8a741e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768379527&amp;x-signature=1zQV79O8UNX4qDmrNIlucyY4elU%3D" alt="4.png" loading="lazy"/></p>
<h3 data-id="heading-5">1.5 é¢œè‰²é€‰æ‹©å™¨å‡çº§</h3>
<p>è‡ªå®šä¹‰é¢œè‰²é€‰æ‹©å™¨ç°åœ¨èƒ½ä¿å­˜å½“å‰é€‰æ‹©ï¼Œå¹¶æ”¯æŒæ·»åŠ æ›´å¤šé¢œè‰²ã€‚</p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/961273ada6244a04890af3e272840cab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768379527&amp;x-signature=ahCvkoHc1XYxspiKJv076a%2Fckqs%3D" alt="5.png" loading="lazy"/></p>
<h3 data-id="heading-6">1.6 æ–‡æœ¬æ¨¡æ¿ä¸å›½é™…åŒ–</h3>
<ul>
<li>æ”¯æŒ i18n æ–‡æœ¬æ¨¡æ¿æ›¿æ¢</li>
<li>å®Œå–„äº†å›½é™…åŒ–ç¿»è¯‘ï¼ˆheaderã€picker ç­‰ç»„ä»¶ï¼‰</li>
<li>æ›´å¥½çš„å¤šè¯­è¨€æ”¯æŒä½“éªŒ</li>
</ul>
<h3 data-id="heading-7">1.7 å›¾ç‰‡å’Œæ–‡ä»¶å¢å¼º</h3>
<ul>
<li><strong>å›¾ç‰‡å·¥å…·æ </strong>ï¼šé€‰ä¸­å›¾ç‰‡æ—¶æ˜¾ç¤ºä¸“é—¨çš„æ“ä½œå·¥å…·æ </li>
<li><strong>è‡ªå®šä¹‰ä¸Šä¼ </strong>ï¼šå¢åŠ Â <code>allowInvalidUrl</code>Â é€‰é¡¹ï¼Œæ”¯æŒ Electron ç­‰ç‰¹å®šåœºæ™¯</li>
<li><strong>æ”¹è¿›çš„ä¸Šä¼ é€»è¾‘</strong>ï¼šä¼˜åŒ–äº†å¤±è´¥çŠ¶æ€çš„å¤„ç†</li>
</ul>
<h2 data-id="heading-8">2 æŠ€æœ¯æ”¹è¿›</h2>
<h3 data-id="heading-9">2.1 æ„å»ºå’Œå·¥ç¨‹åŒ–</h3>
<ul>
<li>ä¿®å¤äº† SSR æ„å»ºé—®é¢˜</li>
<li>ä¼˜åŒ–äº† Vite é…ç½®ï¼Œè§£å†³äº† PostCSS å’Œ Tailwind çš„å…¼å®¹æ€§é—®é¢˜</li>
<li>æ”¹è¿›äº† SCSS æ–‡ä»¶å¼•å…¥æ–¹å¼</li>
<li>è¾“å‡ºæ–‡ä»¶åç§°ä¼˜åŒ–</li>
</ul>
<h3 data-id="heading-10">2.2 ä¾èµ–ç®¡ç†</h3>
<ul>
<li>å¤–éƒ¨åŒ– emoji-mart å’Œ floating-ui ä¾èµ–ï¼Œå‡å°‘åŒ…ä½“ç§¯</li>
<li>ç§»é™¤äº† better-table å’Œ lodash-esï¼Œä¼˜åŒ–ä¾èµ–æ ‘</li>
</ul>
<h3 data-id="heading-11">2.3 ä»£ç è´¨é‡</h3>
<ul>
<li>å®Œæ•´çš„æµ‹è¯•è¦†ç›–ç‡æå‡</li>
<li>é‡æ„ä¼˜åŒ–ï¼šç§»é™¤å†—ä½™ä»£ç </li>
<li>API æ ‡å‡†åŒ–ï¼š<code>scrollIntoView</code>Â â†’Â <code>scrollSelectionIntoView</code></li>
<li>ç¤ºä¾‹ä»£ç Â <code>async/await</code>Â æ”¹é€ ï¼Œä»£ç ç°ä»£åŒ–</li>
</ul>
<h3 data-id="heading-12">2.4 ç±»å‹å®‰å…¨</h3>
<ul>
<li>ä¿®å¤äº†å›  TypeScript ç±»å‹å¯¼è‡´çš„ç¼–è¯‘é”™è¯¯</li>
<li>æ”¹è¿›äº†ç±»å‹å®šä¹‰</li>
</ul>
<h3 data-id="heading-13">2.5 API å¯¼å‡ºå¢å¼º</h3>
<p>v4.0 å¯¼å‡ºäº†å·¥å…·æ é…ç½®å¸¸é‡ï¼Œæ–¹ä¾¿å¼€å‘è€…å®šåˆ¶ï¼š</p>
<ul>
<li><code>DEFAULT_TOOLBAR</code>ï¼šé»˜è®¤å·¥å…·æ é…ç½®</li>
<li><code>FULL_TOOLBAR</code>ï¼šå®Œæ•´å·¥å…·æ é…ç½®</li>
</ul>
<h3 data-id="heading-14">2.6 å¢åŠ è‡ªåŠ¨å‘åŒ…å·¥ä½œæµ</h3>
<ul>
<li>å¢åŠ  auto-publish / auto-deploy ç­‰è‡ªåŠ¨åŒ–å·¥ä½œæµï¼Œæ”¯æŒæ‰“ tag ä¹‹åè‡ªåŠ¨å‘ç‰ˆæœ¬ã€ç”Ÿæˆ Release Notes</li>
<li>PR é—¨ç¦åœ¨å•å…ƒæµ‹è¯•åŸºç¡€ä¸Šå¢åŠ  npm åŒ…å’Œç½‘ç«™æ„å»ºï¼Œç¡®ä¿åˆå…¥ PR ä¹‹å‰ï¼Œnpm åŒ…æ„å»ºå’Œç½‘ç«™æ„å»ºæ˜¯æ­£å¸¸çš„ï¼Œé€šè¿‡è‡ªåŠ¨åŒ–æ–¹å¼ä¿éšœç‰ˆæœ¬è´¨é‡ã€‚</li>
</ul>
<h2 data-id="heading-15">3 é—®é¢˜ä¿®å¤</h2>
<p>v4.0 ä¿®å¤äº†å¤§é‡å·²çŸ¥é—®é¢˜ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>å·¥å…·æ é€‰æ‹©å™¨ä¸è·Ÿéšå…‰æ ‡å˜åŒ–çš„é—®é¢˜</li>
<li>è¡Œé«˜ä½œç”¨åŸŸé—®é¢˜</li>
<li>åˆ—è¡¨æ ·å¼æ˜¾ç¤ºä¸æ­£ç¡®</li>
<li>èƒŒæ™¯è‰² SVG å›¾æ ‡é—®é¢˜</li>
<li>VitePress é»˜è®¤æ ·å¼å½±å“çš„é—®é¢˜</li>
<li>è‡ªå®šä¹‰ä¸Šä¼ å¤±è´¥æ—¶è¡¨æ ¼æ•°æ®ç»“æ„ç ´åçš„é—®é¢˜</li>
<li>å¤šé¡¹æ–‡æ¡£å’Œå›½é™…åŒ–ç¿»è¯‘é—®é¢˜</li>
</ul>
<h2 data-id="heading-16">4 ç¤¾åŒºè´¡çŒ®</h2>
<p>æ„Ÿè°¢æ‰€æœ‰ä¸º v4.0 åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼ä½ ä»¬çš„è¾›å‹¤ä»˜å‡ºè®© TinyEditor å˜å¾—æ›´å¥½ï¼</p>
<ul>
<li>@chenxi-20</li>
<li>@GaoNeng-wWw</li>
<li>@jany55555</li>
<li>@qwangry</li>
<li>@shenyaofeng</li>
<li>@vaebe</li>
<li>@wuyiping0628</li>
<li>@Yinlin124</li>
<li>@zzxming</li>
</ul>
<blockquote>
<p>æ³¨ï¼šæ’åä¸åˆ†å…ˆåï¼ŒæŒ‰åå­—é¦–å­—æ¯æ’åºã€‚</p>
</blockquote>
<p>å¦‚æœä½ æœ‰ä»»ä½•å»ºè®®æˆ–åé¦ˆï¼Œæ¬¢è¿é€šè¿‡ GitHub Issues ä¸æˆ‘ä»¬è”ç³»ã€‚</p>
<h2 data-id="heading-17">å¾€æœŸæ¨èæ–‡ç« </h2>
<ul>
<li>ğŸ‘<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzI2MDE3MTM4MA%3D%3D%26mid%3D2701521363%26idx%3D1%26sn%3D1d9ac1d8fd757848553e6d6a628a4696%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzI2MDE3MTM4MA==&amp;mid=2701521363&amp;idx=1&amp;sn=1d9ac1d8fd757848553e6d6a628a4696&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">TinyEditorï¼šä¸€ä¸ªåŸºäº Quill 2.0 çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼ŒåŠŸèƒ½å¼ºå¤§ã€å¼€ç®±å³ç”¨ï¼</a></li>
<li>ğŸˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzI2MDE3MTM4MA%3D%3D%26mid%3D2701521458%26idx%3D1%26sn%3D56fa9b07b0667801ce33c569569eb820%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzI2MDE3MTM4MA==&amp;mid=2701521458&amp;idx=1&amp;sn=56fa9b07b0667801ce33c569569eb820&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">TinyEditor å¯Œæ–‡æœ¬å¼€æº2ä¸ªæœˆçš„æ€»ç»“ï¼šå¢åŠ æ ¼å¼åˆ·ã€æˆªå±ã€TypeScript ç±»å‹å£°æ˜ç­‰æ–°ç‰¹æ€§</a></li>
<li>ğŸ¥³<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzI2MDE3MTM4MA%3D%3D%26mid%3D2701521498%26idx%3D1%26sn%3D2f09766e9ef5633d2f7df5d7bbef505e%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzI2MDE3MTM4MA==&amp;mid=2701521498&amp;idx=1&amp;sn=2f09766e9ef5633d2f7df5d7bbef505e&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">é‡ç£…æ›´æ–°ï¼TinyEditor å¼€æºå¯Œæ–‡æœ¬æ”¯æŒ LaTeX å¯ç¼–è¾‘å…¬å¼å•¦~</a></li>
<li>ğŸ‰<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzI2MDE3MTM4MA%3D%3D%26mid%3D2701521407%26idx%3D1%26sn%3Ddb2240d78afddcb4f790e155e4ed684a%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzI2MDE3MTM4MA==&amp;mid=2701521407&amp;idx=1&amp;sn=db2240d78afddcb4f790e155e4ed684a&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">å–œæŠ¥ï¼TinyEditor å¼€æºå¯Œæ–‡æœ¬è¿æ¥äº†ç¬¬ä¸€ä½è´¡çŒ®è€…</a></li>
<li>ğŸ‘<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzI2MDE3MTM4MA%3D%3D%26mid%3D2701521518%26idx%3D1%26sn%3Dbe00e70af3e2ec312ffa67fe254fbf1e%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzI2MDE3MTM4MA==&amp;mid=2701521518&amp;idx=1&amp;sn=be00e70af3e2ec312ffa67fe254fbf1e&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">è®©æˆ‘ä»¬ä¸€èµ·æ¥å»ºè®¾ TinyEditor å¼€æºå¯Œæ–‡æœ¬ç¼–è¾‘å™¨å§ï¼</a></li>
<li>âœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzI2MDE3MTM4MA%3D%3D%26mid%3D2701521560%26idx%3D1%26sn%3Dcd5c8fca9de30d44645e6f8c7099abb0%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzI2MDE3MTM4MA==&amp;mid=2701521560&amp;idx=1&amp;sn=cd5c8fca9de30d44645e6f8c7099abb0&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">TinyEditor v3.25.0 æ­£å¼å‘å¸ƒï¼2025å¹´ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¢åŠ æ ‡é¢˜åˆ—è¡¨å¯¼èˆªã€åˆ†éš”çº¿ç­‰å®ç”¨ç‰¹æ€§</a></li>
<li>âš¡ï¸<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzI2MDE3MTM4MA%3D%3D%26mid%3D2701521653%26idx%3D1%26sn%3Db17914b431c14826d150aa21bd054389%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzI2MDE3MTM4MA==&amp;mid=2701521653&amp;idx=1&amp;sn=b17914b431c14826d150aa21bd054389&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">TinyEditor v4.0 alpha ç‰ˆæœ¬å‘å¸ƒï¼šæ›´å¼ºå¤§çš„è¡¨æ ¼ã€æ›´ä¸°å¯Œçš„è¡¨æƒ…ã€æ›´å¥½çš„ä¸Šä¼ ä½“éªŒ</a></li>
</ul>
<h2 data-id="heading-18">å…³äºOpenTiny</h2>
<p>æ¬¢è¿åŠ å…¥ OpenTiny å¼€æºç¤¾åŒºã€‚æ·»åŠ å¾®ä¿¡å°åŠ©æ‰‹ï¼šopentiny-official ä¸€èµ·å‚ä¸äº¤æµå‰ç«¯æŠ€æœ¯ï½</p>
<p>OpenTiny å®˜ç½‘ï¼š<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.design" target="_blank" title="https://opentiny.design" ref="nofollow noopener noreferrer">opentiny.design</a></strong><br/>
OpenTiny ä»£ç ä»“åº“ï¼š<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny" target="_blank" title="https://github.com/opentiny" ref="nofollow noopener noreferrer">github.com/opentiny</a></strong><br/>
TinyVue æºç ï¼š<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-vue" target="_blank" title="https://github.com/opentiny/tiny-vue" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a></strong><br/>
TinyEngine æºç ï¼šâ€…<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-engine" target="_blank" title="https://github.com/opentiny/tiny-engine" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a></strong><br/>
æ¬¢è¿è¿›å…¥ä»£ç ä»“åº“ StarğŸŒŸTinyEngineã€TinyVueã€TinyNGã€TinyCLIã€TinyEditor~</p>
<p>å¦‚æœä½ ä¹Ÿæƒ³è¦å…±å»ºï¼Œå¯ä»¥è¿›å…¥ä»£ç ä»“åº“ï¼Œæ‰¾åˆ° good first issueæ ‡ç­¾ï¼Œä¸€èµ·å‚ä¸å¼€æºè´¡çŒ®~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¿…é›·åŸºäºé˜¿é‡Œäº‘Â EMRÂ ServerlessÂ SparkÂ å®ç°æ•°ä»“èµ„æºæ•ˆç‡ä¸ä¸šåŠ¡æå‡]]></title>    <link>https://juejin.cn/post/7592170171634597903</link>    <guid>https://juejin.cn/post/7592170171634597903</guid>    <pubDate>2026-01-07T08:33:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592170171634597903" data-draft-id="7592152007839956992" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¿…é›·åŸºäºé˜¿é‡Œäº‘Â EMRÂ ServerlessÂ SparkÂ å®ç°æ•°ä»“èµ„æºæ•ˆç‡ä¸ä¸šåŠ¡æå‡"/> <meta itemprop="keywords" content="Spark"/> <meta itemprop="datePublished" content="2026-01-07T08:33:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2414974667341287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¿…é›·åŸºäºé˜¿é‡Œäº‘Â EMRÂ ServerlessÂ SparkÂ å®ç°æ•°ä»“èµ„æºæ•ˆç‡ä¸ä¸šåŠ¡æå‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2414974667341287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T08:33:49.000Z" title="Wed Jan 07 2026 08:33:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åˆ˜æ•Â |Â è¿…é›·å¤§æ•°æ®å¹³å°è´Ÿè´£äºº</p>
<p>å°¤å¸…Â |Â è¿…é›·å¤§æ•°æ®å¹³å°èµ„æ·±å·¥ç¨‹å¸ˆ</p>
<p>é™ˆç…§Â |Â é˜¿é‡Œäº‘å…¬å…±äº‘ä¸šåŠ¡äº‹ä¸šéƒ¨è§£å†³æ–¹æ¡ˆæ¶æ„å¸ˆ</p>
<p>æ½˜é”¦æ£‰Â |Â é˜¿é‡Œäº‘å…¬å…±äº‘ä¸šåŠ¡äº‹ä¸šéƒ¨è§£å†³æ–¹æ¡ˆæ¶æ„å¸ˆÂ </p>
<p>åˆ˜ç‘ä¼ŸÂ |Â é˜¿é‡Œäº‘å…¬å…±äº‘ä¸šåŠ¡äº‹ä¸šéƒ¨å¤§æ•°æ®è§£å†³æ–¹æ¡ˆæ¶æ„å¸ˆ</p>
<h2 data-id="heading-0">ä¸€ã€èƒŒæ™¯ä»‹ç»</h2>
<h3 data-id="heading-1">ä¼ä¸šç®€ä»‹</h3>
<p>è¿…é›·ï¼ˆçº³æ–¯è¾¾å…‹è‚¡ç¥¨ä»£ç ï¼šXNETï¼‰ä½œä¸ºå…¨çƒåˆ†å¸ƒå¼æŠ€æœ¯é¢†åŸŸçš„å…ˆè¡Œè€…ï¼Œä»¥æŠ€æœ¯æ„å»ºå•†ä¸šï¼Œä»¥æœåŠ¡åˆ›é€ å…±è¯†ï¼Œä»è€Œå»ºç«‹ä¸€ä¸ªé«˜æ•ˆå¯ä¿¡çš„å­˜å‚¨ä¸ä¼ è¾“ç½‘ç»œã€‚</p>
<p>è‡ª2003å¹´åˆ›ç«‹ä»¥æ¥ï¼Œå…¬å¸é€šè¿‡æŒç»­æ·±è€•P2Pä¼ è¾“ã€è¾¹ç¼˜è®¡ç®—ä¸åŒºå—é“¾æŠ€æœ¯ï¼Œæ„å»ºèµ·è¦†ç›–å…¨çƒçš„é«˜æ•ˆå¯ä¿¡æ•°æ®ç½‘ç»œï¼šè¿™ä¸€ç½‘ç»œä¸ä»…æ‰¿è½½ç€äº¿çº§ç”¨æˆ·çš„æ—¥å¸¸æ•°å­—ç”Ÿæ´»ï¼Œæ›´æˆä¸ºWeb3.0æ—¶ä»£åŸºç¡€è®¾æ–½çš„é‡è¦å®è·µè€…ã€‚</p>
<p>å‡­å€Ÿå¯¹æè‡´ç”¨æˆ·ä½“éªŒçš„è¿½æ±‚ï¼Œè¿…é›·æ‰“é€ äº†å¤šæ¬¾è¡Œä¸šæ ‡æ†äº§å“ï¼šé©å‘½æ€§çš„è¿…é›·ä¸‹è½½å¼•æ“é‡æ–°å®šä¹‰äº†æ–‡ä»¶ä¼ è¾“æ•ˆç‡ï¼Œè¿…é›·äº‘ç›˜ä»¥å»ä¸­å¿ƒåŒ–å­˜å‚¨æ¶æ„å®ç°æ•°æ®ä¸»æƒå›å½’ï¼Œç©å®¢äº‘ç­‰æ™ºèƒ½ç¡¬ä»¶åˆ™å¼€åˆ›äº†å…±äº«è®¡ç®—æ–°ç”Ÿæ€ã€‚</p>
<p>æˆªè‡³2025å¹´ï¼Œè¿…é›·äº§å“çŸ©é˜µå·²æœåŠ¡å…¨çƒè¶…4äº¿æ³¨å†Œç”¨æˆ·ï¼Œå½¢æˆæå…·ä»·å€¼çš„å®æ—¶è¡Œä¸ºæ•°æ®é‡‘çŸ¿ã€‚</p>
<p>æŠ€æœ¯åº•åº§å†³å®šå•†ä¸šè¾¹ç•Œã€‚è¿…é›·æ·±è€•ä¸‰å¤§æŠ€æœ¯èƒ½åŠ›ï¼š</p>
<p>1.Â æµ·é‡æ•°æ®å®æ—¶æ²»ç†èƒ½åŠ›ï¼šæ¯ç§’å¤„ç†PBçº§ä¼ è¾“æ—¥å¿—ä¸å­˜å‚¨å…ƒæ•°æ®</p>
<p>2.Â äº¿çº§èŠ‚ç‚¹åŠ¨æ€è°ƒåº¦ç³»ç»Ÿï¼šé€šè¿‡æ™ºèƒ½ç®—æ³•å®ç°å…¨çƒåˆ†å¸ƒå¼èŠ‚ç‚¹æ¯«ç§’çº§å“åº”</p>
<p>3.Â è·¨åœºæ™¯è”é‚¦è®¡ç®—æ¶æ„ï¼šåœ¨ä¿éšœéšç§å®‰å…¨å‰æä¸‹æ¿€æ´»æ•°æ®è¦ç´ ä»·å€¼</p>
<p>è¿™å¥—ç»å—é«˜å¹¶å‘æ·¬ç‚¼çš„æŠ€æœ¯ä½“ç³»ï¼Œä¸ä»…æ”¯æ’‘ç€å½±è§†ã€æ¸¸æˆã€IoTç­‰è¡Œä¸šçš„å…³é”®ä¸šåŠ¡åœºæ™¯ï¼Œæ›´æ²‰æ·€å‡ºå¯¹æ•°æ®æµåŠ¨è§„å¾‹çš„æ·±åº¦è®¤çŸ¥ï¼šè¿™æ­£æ˜¯è¿…é›·ä¸é˜¿é‡Œäº‘åœ¨å¤§æ•°æ®æ™ºèƒ½æ—¶ä»£å±•å¼€æ·±åº¦ååŒçš„åº•å±‚é€»è¾‘ã€‚</p>
<h3 data-id="heading-2">æ ¸å¿ƒä¸šåŠ¡ç—›ç‚¹</h3>
<p>éšç€ä¸šåŠ¡çš„å‘å±•ï¼Œåœ¨å¤§æ•°æ®å¹³å°ä¾§é‡åˆ°äº†ä¸€äº›ç—›ç‚¹ï¼š</p>
<ul>
<li>
<p><strong>æ•°æ®å¤„ç†æ•ˆç‡å­˜åœ¨ç“¶é¢ˆ</strong>ï¼šåŸÂ HadoopÂ é›†ç¾¤éš¾ä»¥å……åˆ†åˆ©ç”¨ä¸šç•Œé¢†å…ˆçš„Â <strong>NativeÂ åŠ é€Ÿ</strong>Â ä¸Â <strong>RemoteÂ ShuffleÂ Service</strong>Â ç­‰æŠ€æœ¯ï¼Œæ•´ä½“æ€§èƒ½æå‡å—é™ï¼Œè¿›è€Œå½±å“é™æœ¬å¢æ•ˆã€‚</p>
</li>
<li>
<p><strong>è®¡ç®—èµ„æºå¼¹æ€§ä¸è¶³</strong>ï¼šåŸÂ HadoopÂ é›†ç¾¤èµ„æºå›ºå®šï¼Œå½“å‡ºç°æ•°æ®é‡çªå¢ã€ä»»åŠ¡å›æº¯ç­‰éœ€è¦ä¸´æ—¶æ‰©å®¹çš„åœºæ™¯æ—¶ï¼Œå®¹æ˜“å‘ç”Ÿèµ„æºç´§å¼ ï¼›ä¸”æ‰©å®¹å‘¨æœŸè¾ƒé•¿ï¼Œéš¾ä»¥å¿«é€Ÿç¼“è§£é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>è¿ç»´å¤æ‚åº¦è¾ƒé«˜</strong>ï¼šåŸé›†ç¾¤åœ¨èµ„æºå±‚é¢éœ€è¦è¾ƒå¤šäººåŠ›ä»‹å…¥ï¼›SparkÂ å¼•æ“å‡çº§ã€PythonÂ ç¯å¢ƒç®¡ç†ç­‰å¸¸è§è¿ç»´æ“ä½œæµç¨‹å¤æ‚ä¸”ç”Ÿäº§é£é™©è¾ƒé«˜ã€‚åŒæ—¶ï¼Œç”±äºé›†ç¾¤ç‰ˆæœ¬åä½ï¼Œåœ¨ä¸šåŠ¡ç”¨é‡å¢é•¿åæ›´æ˜“è§¦å‘å¼€æºç¼ºé™·ï¼Œå¯¼è‡´ç¨³å®šæ€§ä¸‹é™ï¼Œä¸”éš¾ä»¥åŸåœ°å‡çº§ã€‚</p>
</li>
<li>
<p><strong>æˆæœ¬ç®¡æ§å‹åŠ›è¾ƒå¤§</strong>ï¼šè°ƒåº¦ä»»åŠ¡å‘ˆç°â€œå¤œé—´ç¹å¿™ã€æ—¥é—´ç©ºé—²â€çš„å…¸å‹æ³¢å³°æ³¢è°·ç‰¹å¾ï¼Œå›ºå®šèµ„æºåœ¨æ—¥é—´å­˜åœ¨è¾ƒå¤šé—²ç½®ï¼Œé€ æˆä¸å¿…è¦çš„æˆæœ¬æµªè´¹ã€‚</p>
</li>
</ul>
<h3 data-id="heading-3">æŠ€æœ¯å‡çº§æ ¸å¿ƒè¯‰æ±‚</h3>
<ol>
<li>
<p>é™æœ¬å¢æ•ˆï¼šåœ¨æå‡æ•°æ®å¤„ç†æ•ˆç‡çš„åŒæ—¶ï¼Œé™ä½é›†ç¾¤è¿ç»´æˆæœ¬ä¸ç¡¬ä»¶æŠ•å…¥æˆæœ¬ï¼›</p>
</li>
<li>
<p>æè‡´å¼¹æ€§ï¼šå®ç°è®¡ç®—èµ„æºâ€œæŒ‰éœ€åˆ†é…ã€ç§’çº§æ‰©å®¹â€ï¼Œç²¾å‡†åŒ¹é…ä¸šåŠ¡æµé‡æ³¢åŠ¨ï¼Œé¿å…èµ„æºé—²ç½®ä¸çŸ­ç¼ºï¼›</p>
</li>
<li>
<p>æç®€è¿ç»´ï¼šæ‘†è„±é›†ç¾¤ç®¡ç†è´Ÿæ‹…ï¼Œè®©æŠ€æœ¯å›¢é˜Ÿèšç„¦æ ¸å¿ƒä¸šåŠ¡å¼€å‘ä¸ä¼˜åŒ–ï¼›</p>
</li>
<li>
<p>ç¨³å®šå¯é ï¼šä¿éšœé«˜å¹¶å‘åœºæ™¯ä¸‹æ•°æ®å¤„ç†çš„ç¨³å®šæ€§ä¸å‡†ç¡®æ€§ï¼Œæ”¯æŒä»»åŠ¡æ–­ç‚¹ç»­è·‘ã€æ•…éšœè‡ªåŠ¨æ¢å¤ã€‚</p>
</li>
</ol>
<h2 data-id="heading-4">äºŒã€é˜¿é‡Œäº‘Â EMRÂ ServerlessÂ SparkÂ æŠ€æœ¯èµ‹èƒ½</h2>
<p><strong>1ã€ServerlessÂ æ¨¡å¼çªç ´ç®—åŠ›ç“¶é¢ˆï¼Œå®ç°å¼¹æ€§æ•æ·çš„æ•°æ®å¤„ç†</strong>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0140c8322768445f8cab43d2307db987~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768379629&amp;x-signature=%2Fl5LQNavMBojYZpnVb%2F55yzwQn4%3D" alt="image.png" loading="lazy"/></p>
<p>åŸé›†ç¾¤æ˜¯ä¸€ä¸ªå…¸å‹çš„æœåŠ¡å™¨æ¶æ„ï¼Œå›°å¢ƒæ˜¯ï¼Œèµ„æºè¦ä¹ˆé•¿æœŸè¢«æ‰“æ»¡ï¼Œè¦ä¹ˆåœ¨ç©ºçª—æœŸå¤§é‡é—²ç½®ã€‚å›¾ä¸­Â <code>yarn_cluster_totalMB</code>Â åŸºæœ¬æ˜¯ä¸€æ¡å¹³ç›´çš„ä¸Šæ²¿çº¿ï¼Œä»£è¡¨é›†ç¾¤çš„æ€»å†…å­˜å®¹é‡æ˜¯å›ºå®šä¸å˜çš„ï¼›è€ŒÂ <code>yarn_cluster_allocatedMB</code>Â åœ¨å¤§å¤šæ•°æ—¶é—´å‡ ä¹è´´ç€è¿™æ¡ä¸Šæ²¿çº¿è¿è¡Œï¼Œæ„å‘³ç€é›†ç¾¤ç»å¤§éƒ¨åˆ†æ—¶é—´éƒ½å¤„åœ¨å…¨åˆ†é…çš„çŠ¶æ€ã€‚çœ‹ä¸Šå»åˆ©ç”¨ç‡å¾ˆé«˜ï¼Œä½†ä»æ¶æ„ä¸äº¤ä»˜è§†è§’ï¼Œè¿™æ›´åƒæ˜¯åœ¨æç¤ºï¼šé›†ç¾¤å·²ç»è¢«å½“ä½œä¸€ä¸ªâ€œåˆšæ€§èµ„æºæ± â€ä½¿ç”¨ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªèƒ½å¤Ÿå¹³æ»‘æ‰¿æ¥ä¸šåŠ¡æ³¢åŠ¨çš„å¼¹æ€§èµ„æºåº•åº§ã€‚</p>
<p>å½“Â <code>allocatedMB</code>Â é•¿æ—¶é—´æ¥è¿‘Â <code>totalMB</code>ï¼Œç³»ç»Ÿå‡ ä¹æ²¡æœ‰ä»»ä½•ç¼“å†²ç©ºé—´ã€‚åªè¦ä¸šåŠ¡ä¾§å‡ºç°çªå‘å³°å€¼ã€æŸä¸ªä½œä¸šå‘ç”Ÿæ•°æ®å€¾æ–œå¯¼è‡´æ‰§è¡Œæ—¶é—´æ‹‰é•¿ã€æˆ–è€…å‡ºç°Â shuffleÂ æ”¾å¤§ã€é‡è¯•å¢å¤šï¼ŒYARNÂ çš„è°ƒåº¦å°±ä¼šç«‹åˆ»è½¬å‘æ’é˜Ÿä¸æ‹¥å¡ã€‚äºæ˜¯ç”¨æˆ·æ„ŸçŸ¥åˆ°çš„å¾€å¾€ä¸æ˜¯â€œé«˜åˆ©ç”¨ç‡â€ï¼Œè€Œæ˜¯æ›´ç›´è§‚çš„ä½“éªŒé—®é¢˜ï¼šæäº¤ä»»åŠ¡åæ’é˜Ÿæ—¶é—´å˜é•¿ï¼Œäº¤äº’å¼åˆ†æä¸å†åŠæ—¶ï¼Œæ‰¹å¤„ç†çª—å£è¢«æŒ¤å‹ï¼Œç”šè‡³åœ¨æç«¯æƒ…å†µä¸‹å½¢æˆé›ªå´©æ•ˆåº”â€”â€”ä»»åŠ¡å˜æ…¢å ç”¨èµ„æºæ›´ä¹…ï¼Œå¯¼è‡´åç»­ä»»åŠ¡æ›´æ’é˜Ÿï¼›æ’é˜Ÿè¶Šå¤šï¼Œè¶…æ—¶ä¸é‡è¯•è¶Šå¤šï¼Œåè¿‡æ¥åˆè¿›ä¸€æ­¥åŠ å‰§æ‹¥å¡ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1889ccb296944f1796aedda6dde03480~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768379629&amp;x-signature=0O%2B8NPJAAx4Dyfdey7UuoBfGG%2BM%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨è¿ç§»åˆ°Â EMRÂ ServerlessÂ SparkÂ ä¹‹åï¼Œä»ä¸Šè¿°è¿™å¼ Â WorkspaceÂ memoryÂ consumptionÂ æ›²çº¿å‘ˆç°å‡ºéå¸¸å…¸å‹çš„â€œæ½®æ±å‹è´Ÿè½½â€ç‰¹å¾ï¼šåœ¨ä¸šåŠ¡é«˜å³°æœŸå†…å­˜ç”¨é‡å¯ä»¥å¿«é€Ÿæ‹‰å‡åˆ°æ•°åÂ TBï¼›è€Œåœ¨ä»»åŠ¡å®Œæˆã€è´Ÿè½½å›è½åï¼Œèµ„æºå ç”¨åˆèƒ½è¿…é€Ÿä¸‹é™ï¼Œç”šè‡³å›å½’åˆ°æ¥è¿‘Â 0Â çš„æ°´å¹³ã€‚å¯¹è¿…é›·è€Œè¨€ï¼Œè¿™æ„å‘³ç€è®¡ç®—èµ„æºä¸å†è¢«å›ºå®šé›†ç¾¤å®¹é‡æ‰€æŸç¼šï¼Œå³°å€¼æ—¶èƒ½å¤ŸæŒ‰éœ€è·å¾—è¶³å¤Ÿçš„å†…å­˜ä¸å¹¶å‘èƒ½åŠ›å»æ‰¿æ¥æ‰¹å¤„ç†çª—å£ã€çªå‘ä»»åŠ¡æˆ–ä¸´æ—¶åˆ†æï¼Œä»è€Œæ˜¾è‘—é™ä½æ’é˜Ÿã€æ‹¥å¡ä¸â€œé¡¶æ ¼è¿è¡Œâ€çš„é£é™©ï¼Œè®©ä½œä¸šå®Œæˆæ—¶é—´ä¸äº¤ä»˜èŠ‚å¥æ›´å¯æ§ã€‚</p>
<p>ä»ç³»ç»Ÿèƒ½åŠ›è§’åº¦çœ‹ï¼Œè¿™æ¡æ›²çº¿ä½“ç°çš„æ˜¯Â ServerlessÂ SparkÂ æŠŠâ€œå®¹é‡è§„åˆ’ä¸èµ„æºæ± è¿ç»´â€ä»ç”¨æˆ·ä¾§å½»åº•å‰¥ç¦»ï¼šå¹³å°èƒ½å¤ŸåŸºäºä½œä¸šç”Ÿå‘½å‘¨æœŸè‡ªåŠ¨æ‹‰èµ·èµ„æºã€æŒ‰éœ€æ‰©å±•ã€åœ¨ç©ºé—²æ—¶è‡ªåŠ¨å›æ”¶ï¼Œå®ç°çœŸæ­£çš„å¼¹æ€§ä¼¸ç¼©ä¸æ›´å¼ºçš„èµ„æºéš”ç¦»ã€‚æœ€ç»ˆå¸¦æ¥çš„ç›´æ¥æ”¶ç›Šæ˜¯æˆæœ¬ä¸ä½¿ç”¨é‡å¼ºç»‘å®šâ€”â€”é«˜å³°æœŸç”¨å¤šå°‘ä»˜å¤šå°‘ï¼Œä½è°·æœŸå‡ ä¹ä¸äº§ç”Ÿèµ„æºå ç”¨ï¼Œä¹Ÿå°±ä¸å†ä¸ºé—²ç½®å®¹é‡é•¿æœŸä¹°å•ï¼›åŒæ—¶å¹³å°ç”¨è‡ªåŠ¨åŒ–è°ƒåº¦ä¸å›æ”¶æœºåˆ¶ä¿éšœèµ„æºä¾›ç»™çš„åŠæ—¶æ€§ä¸ç¨³å®šæ€§ã€‚</p>
<p><strong>2ã€çµæ´»è®¿é—®å½’æ¡£æ•°æ®</strong></p>
<p>è¿…é›·æ•°æ®å›¢é˜Ÿå°†å¤§é‡OSSæ•°æ®ä»¥å½’æ¡£ã€å†·å½’æ¡£ã€æ·±åº¦å†·å½’æ¡£ç±»å‹å­˜å‚¨è¾¾åˆ°é™ä½å­˜å‚¨è´¹ç”¨çš„ç›®çš„ï¼Œè¿™äº›å½’æ¡£æ•°æ®æ— æ³•ç›´æ¥è®¿é—®ï¼Œéœ€è¦æå‰æ‰§è¡Œè§£å†»æ“ä½œã€‚</p>
<p>EMRÂ ServerlessÂ Sparkæä¾›è‡ªåŠ¨å’Œæ‰‹åŠ¨ä¸¤ç§è§£å†»æ–¹å¼ä¾¿äºä½œä¸šçµæ´»è®¿é—®å½’æ¡£æ•°æ®ï¼Œè¯¦è§<a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Femr%2Femr-serverless-spark%2Fuse-cases%2Funfreeze-the-oss-archive%3Fspm%3Da2c4g.11186623.help-menu-search-28066.d_0" target="_blank" title="https://help.aliyun.com/zh/emr/emr-serverless-spark/use-cases/unfreeze-the-oss-archive?spm=a2c4g.11186623.help-menu-search-28066.d_0" ref="nofollow noopener noreferrer">è§£å†»OSSå½’æ¡£æ–‡ä»¶</a></p>
<ul>
<li>
<p>è‡ªåŠ¨è§£å†»ï¼Œåœ¨ä½œä¸šç”Ÿäº§plané˜¶æ®µè¯†åˆ«å‡ºå½’æ¡£æ–‡ä»¶ï¼Œè‡ªåŠ¨æäº¤è§£å†»è¯·æ±‚ï¼Œä½¿å¾—ä½œä¸šæ‰§è¡Œæ—¶èƒ½å¤Ÿæ­£å¸¸è¯»å–æ•°æ®ã€‚ä½†å¯¹äºåˆ†åŒºå€¼éœ€è¦åŠ¨æ€è®¡ç®—å¾—å‡ºçš„åœºæ™¯ï¼Œè‡ªåŠ¨è§£å†»æ–¹å¼æ— æ³•ä¸€æ¬¡æäº¤æ‰€æœ‰è§£å†»è¯·æ±‚ï¼Œè¿›è€Œå½±å“ä½œä¸šæ‰§è¡Œæ•ˆç‡ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">--conf spark.sql.emr.autoRestoreOssArchive.enabled=true</span>
</code></pre>
</li>
<li>
<p>æ‰‹åŠ¨è§£å†»ï¼Œæä¾›restoreÂ sqlè¯­æ³•æ˜¾ç¤ºå¯¹è¡¨ã€åˆ†åŒºæå‰è§£å†»ï¼Œè§£å†»è¿‡ç¨‹å¯¹ç”¨æˆ·æ›´å‹å¥½ã€‚</p>
</li>
</ul>
<p>å€ŸåŠ©ä¸Šè¿°åŠŸèƒ½ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå¿«é€Ÿå“åº”æ•°æ®åˆ†æå¸ˆå¯¹å†å²å½’æ¡£æ•°æ®çš„è®¿é—®éœ€æ±‚ï¼Œé™ä½å­˜å‚¨æˆæœ¬çš„åŒæ—¶åŠ é€Ÿä¸šåŠ¡è¿­ä»£ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è§£å†»æ•´ä¸ªè¡¨å¯¹åº”çš„OSSå½’æ¡£æ–‡ä»¶ä¾›åç»­æŸ¥è¯¢ã€‚</span>
RESTORE <span class="hljs-keyword">TABLE</span> table_name;

<span class="hljs-comment">-- æŒ‡å®šåˆ†åŒºè§£å†», ç²¾ç»†åŒ–æ§åˆ¶è§£å†»ç²’åº¦ï¼ŒèŠ‚çœèµ„æºä¸æ—¶é—´ã€‚</span>
RESTORE <span class="hljs-keyword">TABLE</span> table_name <span class="hljs-keyword">PARTITION</span> (pt1<span class="hljs-operator">=</span><span class="hljs-string">'a'</span>, pt2<span class="hljs-operator">=</span><span class="hljs-string">'b'</span>);
</code></pre>
<p><strong>3ã€åŸºäºKyuubiçš„äº¤äº’å¼å¼€å‘</strong></p>
<p>ServerlessÂ Sparkå†…ç½®äº†100%å…¼å®¹å¼€æºçš„KyuubiÂ Gatewayï¼Œå¹¶åœ¨äº‘åŸç”Ÿç¨³å®šæ€§å’Œå¤šç§Ÿéš”ç¦»æ€§ç­‰æ–¹é¢è¿›è¡Œäº†å¢å¼ºã€‚ä¸€æ–¹é¢èƒ½å¤ç”¨Driver/Executorèµ„æºï¼Œé¿å…å®¹å™¨å¯åŠ¨å»¶è¿Ÿï¼Œæä¾›ç§’çº§æŸ¥è¯¢ï¼Œå¦ä¸€æ–¹é¢åˆ©ç”¨Sparkçš„åŠ¨æ€èµ„æºä¼¸ç¼©ï¼Œé—²æ—¶åŠæ—¶é‡Šæ”¾èµ„æºï¼Œé¿å…æµªè´¹ï¼Œä»è€Œæä¾›é«˜æ€§ä»·æ¯”çš„äº¤äº’å¼åˆ†æèƒ½åŠ›ã€‚</p>
<p>è¿…é›·è‡ªç ”çš„æ•°æ®å¼€å‘å¹³å°é€šè¿‡beelineå’Œhueæ— ç¼å¯¹æ¥KyuubiÂ Gatewayï¼Œæ”¯æŒæ—¥å¸¸çš„æ•°ä»“ä»»åŠ¡å¼€å‘ä»¥åŠå³å¸­æŸ¥è¯¢ï¼Œæ˜¾è‘—æå‡å¼€å‘åˆ†ææ•ˆç‡ï¼ŒåŒæ—¶å¤§å¹…é™ä½äº†æ•°æ®å¼€å‘ï¼Œæ•°æ®åˆ†æå’Œä¸´æ—¶æŸ¥è¯¢æˆæœ¬ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€ä¸šåŠ¡ä¸æŠ€æœ¯ä»·å€¼åŒé‡çªç ´</h2>
<p>è¿ç§»åˆ°Â EMRÂ ServerlessÂ SparkÂ ä¹‹åï¼Œæœ€ç›´è§‚çš„æ„Ÿå—æ˜¯Â <strong>TCOÂ æ˜æ˜¾ä¸‹é™</strong>ï¼šä¸å†éœ€è¦ä¸ºå›ºå®šé›†ç¾¤æŒ‰å³°å€¼é•¿æœŸå¤‡èµ„æºï¼Œå¹³å°æŒ‰ä½œä¸šç”Ÿå‘½å‘¨æœŸå¼¹æ€§æ‹‰èµ·ä¸å›æ”¶ï¼Œä½è°·æœŸèµ„æºå ç”¨å¯é™åˆ°æ¥è¿‘Â 0ï¼Œåªä¸ºå®é™…æ¶ˆè€—ä»˜è´¹ã€‚åŒæ—¶ï¼Œæ‰˜ç®¡åŒ–å¸¦æ¥çš„ç¨³å®šæ€§ä¸è°ƒåº¦æ•ˆç‡æå‡ï¼Œå‡å°‘äº†æ’é˜Ÿã€é‡è¯•å’Œèµ„æºäº‰æŠ¢ç­‰éšæ€§æˆæœ¬ï¼Œä½¿åŒæ ·çš„ä¸šåŠ¡äº§å‡ºç”¨æ›´å°‘çš„èµ„æºä¸æ›´å°‘çš„è¿ç»´æŠ•å…¥å°±èƒ½å®Œæˆã€‚</p>
<p>æ›´å…³é”®çš„æ˜¯<strong>äº¤ä»˜ç¡®å®šæ€§æå‡</strong>ï¼šå¤§ä½œä¸šæ•´ä½“å¯æé€Ÿçº¦Â 1Â å°æ—¶ï¼ŒæŠ¥è¡¨é“¾è·¯ä»è¿‡å»çš„é•¿å°¾æ³¢åŠ¨å˜æˆæ›´å¯æ§çš„å‡ºæ•°èŠ‚å¥ï¼Œå…³é”®æŠ¥è¡¨èƒ½ç¨³å®šåœ¨Â 6:00Â å‰äº§å‡ºã€‚å¤œé—´äººå·¥å¹²é¢„å¤§å¹…å‡å°‘ï¼ŒåŸºæœ¬æ— éœ€è¿ç»´äººå‘˜æ·±å¤œå“åº”ã€‚æœ¬è´¨ä¸Šåæ˜ äº†å¤±è´¥ç‡ä¸é•¿å°¾æ˜¾è‘—é™ä½â€”â€”å¹³å°é€šè¿‡å¼¹æ€§ä¾›ç»™ã€éš”ç¦»ä¸è‡ªåŠ¨åŒ–æ¢å¤ï¼ŒæŠŠåŸæœ¬éœ€è¦äººå·¥å…œåº•çš„å®¹é‡ä¸ç¨³å®šæ€§é—®é¢˜å‰ç§»åˆ°ç³»ç»Ÿèƒ½åŠ›ä¸­è§£å†³ï¼Œè®©ç”Ÿäº§é“¾è·¯æ›´ç¨³ã€æ›´å‡†ç‚¹ã€‚</p>
<h2 data-id="heading-6">å››ã€æœªæ¥å±•æœ›</h2>
<p>åœ¨<strong>åœºæ™¯æ‹“å±•</strong>ä¸Šï¼Œå°†EMRÂ ServerlessÂ Sparkå¹¿æ³›åº”ç”¨äºä¸´æ—¶æŸ¥è¯¢ã€æ•°æ®é›†æˆç­‰æ›´å¤šä¸šåŠ¡åœºæ™¯ï¼Œè¿›ä¸€æ­¥é‡Šæ”¾å…¶å¼¹æ€§ã€å…è¿ç»´çš„ä¼˜åŠ¿ï¼›å¦ä¸€æ–¹é¢ï¼Œåœ¨<strong>æŠ€æœ¯æ·±åŒ–</strong>ä¸Šï¼Œç§¯ææ¢ç´¢AIä¸å¤§æ•°æ®çš„èåˆåˆ›æ–°ï¼Œå……åˆ†å‘æŒ¥ServerlessÂ Sparkåœ¨æµ·é‡æ•°æ®å¤„ç†ä¸AIååŒæ–¹é¢çš„æ½œåŠ›ï¼Œä¸ºä¸šåŠ¡åˆ›é€ æ›´å¤§ä»·å€¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥è§£æ OpenCodeï¼šä¸‹ä¸€ä»£ AI ç¼–ç¨‹åŠ©æ‰‹çš„æ¶æ„è‰ºæœ¯]]></title>    <link>https://juejin.cn/post/7592170706026266659</link>    <guid>https://juejin.cn/post/7592170706026266659</guid>    <pubDate>2026-01-07T07:45:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592170706026266659" data-draft-id="7592170706025922595" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥è§£æ OpenCodeï¼šä¸‹ä¸€ä»£ AI ç¼–ç¨‹åŠ©æ‰‹çš„æ¶æ„è‰ºæœ¯"/> <meta itemprop="keywords" content="TypeScript,AIGC"/> <meta itemprop="datePublished" content="2026-01-07T07:45:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Tam"/> <meta itemprop="url" content="https://juejin.cn/user/1222312659527768"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥è§£æ OpenCodeï¼šä¸‹ä¸€ä»£ AI ç¼–ç¨‹åŠ©æ‰‹çš„æ¶æ„è‰ºæœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1222312659527768/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Tam
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T07:45:41.000Z" title="Wed Jan 07 2026 07:45:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä»é›¶åˆ°ä¸€ï¼Œæ­ç§˜è¿™ä¸ª2026å¹´å¼€å¹´æœ€ç«çš„å¼€æº AI Coding Agent çš„å†…éƒ¨è¿ä½œæœºåˆ¶</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ç›®å½•</h2>
<ul>
<li><a href="#%E5%BC%95%E8%A8%80%E5%BD%93-ai-%E5%AD%A6%E4%BC%9A%E5%86%99%E4%BB%A3%E7%A0%81" title="#%E5%BC%95%E8%A8%80%E5%BD%93-ai-%E5%AD%A6%E4%BC%9A%E5%86%99%E4%BB%A3%E7%A0%81">å¼•è¨€ï¼šå½“ AI å­¦ä¼šå†™ä»£ç </a></li>
<li><a href="#%E7%AC%AC%E4%B8%80%E7%AB%A0%E9%B8%9F%E7%9E%B0%E5%85%A8%E5%B1%80---opencode-%E6%9E%B6%E6%9E%84%E6%80%BB%E8%A7%88" title="#%E7%AC%AC%E4%B8%80%E7%AB%A0%E9%B8%9F%E7%9E%B0%E5%85%A8%E5%B1%80---opencode-%E6%9E%B6%E6%9E%84%E6%80%BB%E8%A7%88">ç¬¬ä¸€ç« ï¼šé¸Ÿç°å…¨å±€ - OpenCode æ¶æ„æ€»è§ˆ</a></li>
<li><a href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86---ai-%E7%9A%84%E8%AE%B0%E5%BF%86%E5%AE%AB%E6%AE%BF" title="#%E7%AC%AC%E4%BA%8C%E7%AB%A0%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86---ai-%E7%9A%84%E8%AE%B0%E5%BF%86%E5%AE%AB%E6%AE%BF">ç¬¬äºŒç« ï¼šä¼šè¯ç®¡ç† - AI çš„"è®°å¿†å®«æ®¿"</a></li>
<li><a href="#%E7%AC%AC%E4%B8%89%E7%AB%A0agent-%E7%B3%BB%E7%BB%9F---%E6%80%9D%E8%80%83%E7%9A%84%E8%89%BA%E6%9C%AF" title="#%E7%AC%AC%E4%B8%89%E7%AB%A0agent-%E7%B3%BB%E7%BB%9F---%E6%80%9D%E8%80%83%E7%9A%84%E8%89%BA%E6%9C%AF">ç¬¬ä¸‰ç« ï¼šAgent ç³»ç»Ÿ - æ€è€ƒçš„è‰ºæœ¯</a></li>
<li><a href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0%E5%B7%A5%E5%85%B7%E7%B3%BB%E7%BB%9F---ai-%E7%9A%84%E7%91%9E%E5%A3%AB%E5%86%9B%E5%88%80" title="#%E7%AC%AC%E5%9B%9B%E7%AB%A0%E5%B7%A5%E5%85%B7%E7%B3%BB%E7%BB%9F---ai-%E7%9A%84%E7%91%9E%E5%A3%AB%E5%86%9B%E5%88%80">ç¬¬å››ç« ï¼šå·¥å…·ç³»ç»Ÿ - AI çš„"ç‘å£«å†›åˆ€"</a></li>
<li><a href="#%E7%AC%AC%E4%BA%94%E7%AB%A0provider-%E6%8A%BD%E8%B1%A1%E5%B1%82---%E4%B8%87%E7%89%A9%E7%9A%86%E5%8F%AF-llm" title="#%E7%AC%AC%E4%BA%94%E7%AB%A0provider-%E6%8A%BD%E8%B1%A1%E5%B1%82---%E4%B8%87%E7%89%A9%E7%9A%86%E5%8F%AF-llm">ç¬¬äº”ç« ï¼šProvider æŠ½è±¡å±‚ - ä¸‡ç‰©çš†å¯ LLM</a></li>
<li><a href="#%E7%AC%AC%E5%85%AD%E7%AB%A0%E4%B8%8A%E4%B8%8B%E6%96%87%E5%8E%8B%E7%BC%A9---%E8%AE%B0%E5%BF%86%E7%9A%84%E8%89%BA%E6%9C%AF" title="#%E7%AC%AC%E5%85%AD%E7%AB%A0%E4%B8%8A%E4%B8%8B%E6%96%87%E5%8E%8B%E7%BC%A9---%E8%AE%B0%E5%BF%86%E7%9A%84%E8%89%BA%E6%9C%AF">ç¬¬å…­ç« ï¼šä¸Šä¸‹æ–‡å‹ç¼© - è®°å¿†çš„è‰ºæœ¯</a></li>
<li><a href="#%E7%AC%AC%E4%B8%83%E7%AB%A0%E5%AE%89%E5%85%A8%E4%B8%8E%E6%9D%83%E9%99%90---%E4%BF%A1%E4%BB%BB%E4%BD%86%E8%A6%81%E9%AA%8C%E8%AF%81" title="#%E7%AC%AC%E4%B8%83%E7%AB%A0%E5%AE%89%E5%85%A8%E4%B8%8E%E6%9D%83%E9%99%90---%E4%BF%A1%E4%BB%BB%E4%BD%86%E8%A6%81%E9%AA%8C%E8%AF%81">ç¬¬ä¸ƒç« ï¼šå®‰å…¨ä¸æƒé™ - ä¿¡ä»»ä½†è¦éªŒè¯</a></li>
<li><a href="#%E7%AC%AC%E5%85%AB%E7%AB%A0%E4%BA%AE%E7%82%B9%E6%8A%80%E6%9C%AF%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90" title="#%E7%AC%AC%E5%85%AB%E7%AB%A0%E4%BA%AE%E7%82%B9%E6%8A%80%E6%9C%AF%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90">ç¬¬å…«ç« ï¼šäº®ç‚¹æŠ€æœ¯æ·±åº¦è§£æ</a></li>
<li><a href="#%E7%AC%AC%E4%B9%9D%E7%AB%A0%E4%BB%8E%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" title="#%E7%AC%AC%E4%B9%9D%E7%AB%A0%E4%BB%8E%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F">ç¬¬ä¹ç« ï¼šä»æºç å­¦ä¹ è®¾è®¡æ¨¡å¼</a></li>
<li><a href="#%E7%AC%AC%E5%8D%81%E7%AB%A0%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%8E%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5" title="#%E7%AC%AC%E5%8D%81%E7%AB%A0%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%8E%E5%B7%A5%E7%A8%8B%E5%AE%9E%E8%B7%B5">ç¬¬åç« ï¼šæ€§èƒ½ä¼˜åŒ–ä¸å·¥ç¨‹å®è·µ</a></li>
<li><a href="#%E7%BB%93%E8%AF%ADai-%E7%BC%96%E7%A8%8B%E7%9A%84%E6%9C%AA%E6%9D%A5" title="#%E7%BB%93%E8%AF%ADai-%E7%BC%96%E7%A8%8B%E7%9A%84%E6%9C%AA%E6%9D%A5">ç»“è¯­ï¼šAI ç¼–ç¨‹çš„æœªæ¥</a></li>
</ul>
<hr/>
<h2 data-id="heading-1">å¼•è¨€ï¼šå½“ AI å­¦ä¼šå†™ä»£ç </h2>
<p>è¿˜è®°å¾—ç¬¬ä¸€æ¬¡è®© ChatGPT å¸®ä½ å†™ä»£ç çš„æ„Ÿè§‰å—ï¼Ÿé‚£ç§"å“‡ï¼Œè¿™ä¹Ÿè¡Œï¼Ÿ"çš„æƒŠå¹ï¼Œå¾ˆå¿«å°±è¢«"ç­‰ç­‰ï¼Œè¿™ä»£ç è·‘ä¸èµ·æ¥å•Š"çš„æ²®ä¸§æ‰€å–ä»£ã€‚</p>
<p>AI èƒ½å†™ä»£ç ï¼Œä½†å®ƒä¸èƒ½<strong>çœŸæ­£åœ°</strong>å†™ä»£ç â€”â€”å®ƒä¸èƒ½è¯»å–ä½ çš„æ–‡ä»¶ã€ä¸èƒ½è¿è¡Œæµ‹è¯•ã€ä¸èƒ½ç†è§£ä½ é¡¹ç›®çš„ä¸Šä¸‹æ–‡ã€‚å®ƒå°±åƒä¸€ä¸ªè¢«è’™ä¸Šçœ¼ç›ã€ç»‘ä½æ‰‹è„šçš„å¤©æ‰ç¨‹åºå‘˜ï¼šæœ‰èƒ½åŠ›ï¼Œä½†æ— æ³•æ–½å±•ã€‚</p>
<p><strong>OpenCode</strong> çš„å‡ºç°ï¼Œæ­£æ˜¯ä¸ºäº†è§£å¼€è¿™äº›æŸç¼šã€‚</p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚   ä¼ ç»Ÿ LLM Chatbot          vs         OpenCode Agent          â”‚
â”‚                                                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚    User     â”‚                    â”‚        User         â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚          â”‚                                      â”‚              â”‚
â”‚          â–¼                                      â–¼              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚     LLM     â”‚                    â”‚       Agent         â”‚   â”‚
â”‚   â”‚  (é»‘ç®±å¯¹è¯)  â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚  â”‚  æ€è€ƒ (Think)  â”‚  â”‚   â”‚
â”‚          â”‚                           â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚   â”‚
â”‚          â–¼                           â”‚  â”‚  å·¥å…· (Tools)  â”‚  â”‚   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚  â”‚  â”œâ”€ Read      â”‚  â”‚   â”‚
â”‚   â”‚  çº¯æ–‡æœ¬å›å¤  â”‚                    â”‚  â”‚  â”œâ”€ Write     â”‚  â”‚   â”‚
â”‚   â”‚  (æ— æ³•æ‰§è¡Œ)  â”‚                    â”‚  â”‚  â”œâ”€ Bash      â”‚  â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚  â”‚  â”œâ”€ Grep      â”‚  â”‚   â”‚
â”‚                                      â”‚  â”‚  â””â”€ ...       â”‚  â”‚   â”‚
â”‚                                      â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚   â”‚
â”‚                                      â”‚  â”‚  æ‰§è¡Œ (Action) â”‚  â”‚   â”‚
â”‚                                      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                 â”‚              â”‚
â”‚                                                 â–¼              â”‚
â”‚                                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                                      â”‚   çœŸå®çš„ä»£ç ä¿®æ”¹     â”‚   â”‚
â”‚                                      â”‚   å¯è¿è¡Œçš„ç»“æœ       â”‚   â”‚
â”‚                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>OpenCode æ˜¯ä¸€ä¸ªå¼€æºçš„ AI ç¼–ç¨‹åŠ©æ‰‹ï¼Œä½†æ›´å‡†ç¡®åœ°è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ª<strong>å®Œæ•´çš„ Agent æ¡†æ¶</strong>ã€‚å®ƒè®© LLM èƒ½å¤Ÿï¼š</p>
<ul>
<li>ğŸ” <strong>é˜…è¯»</strong>ä½ çš„ä»£ç æ–‡ä»¶</li>
<li>âœï¸ <strong>ç¼–è¾‘</strong>ä½ çš„ä»£ç </li>
<li>ğŸ–¥ï¸ <strong>æ‰§è¡Œ</strong> shell å‘½ä»¤</li>
<li>ğŸ” <strong>æœç´¢</strong>ä»£ç åº“</li>
<li>ğŸ¤” <strong>æ€è€ƒ</strong>å¹¶å±•ç¤ºæ¨ç†è¿‡ç¨‹</li>
<li>ğŸ“ <strong>è®°å¿†</strong>é•¿å¯¹è¯ä¸Šä¸‹æ–‡</li>
<li>ğŸ”„ <strong>å›æ»š</strong>ä»»ä½•ä¿®æ”¹</li>
</ul>
<p>è¿™ä¸æ˜¯ä¸€ä¸ªç®€å•çš„ API wrapperï¼Œè€Œæ˜¯ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„å·¥ç¨‹è‰ºæœ¯å“ã€‚è®©æˆ‘ä»¬ä¸€èµ·æ·±å…¥å®ƒçš„å†…éƒ¨ï¼Œçœ‹çœ‹ç°ä»£ AI Agent æ˜¯å¦‚ä½•æ„å»ºçš„ã€‚</p>
<hr/>
<h2 data-id="heading-2">ç¬¬ä¸€ç« ï¼šé¸Ÿç°å…¨å±€ - OpenCode æ¶æ„æ€»è§ˆ</h2>
<h3 data-id="heading-3">1.1 Monorepo çš„é€‰æ‹©</h3>
<p>OpenCode é‡‡ç”¨ <strong>Monorepo</strong> æ¶æ„ï¼Œä½¿ç”¨ <strong>Bun</strong> ä½œä¸ºè¿è¡Œæ—¶å’ŒåŒ…ç®¡ç†å™¨ï¼Œ<strong>Turbo</strong> ä½œä¸ºæ„å»ºç¼–æ’å·¥å…·ã€‚è¿™ä¸ªé€‰æ‹©å¹¶éå¶ç„¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">opencode/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ opencode/        <span class="hljs-comment"># æ ¸å¿ƒ CLI å’ŒæœåŠ¡å™¨ (å¿ƒè„)</span>
â”‚   â”œâ”€â”€ console/         <span class="hljs-comment"># Web ç®¡ç†æ§åˆ¶å° (å¤§è„‘å¯è§†åŒ–)</span>
â”‚   â”‚   â”œâ”€â”€ app/         <span class="hljs-comment"># SolidJS Web UI</span>
â”‚   â”‚   â”œâ”€â”€ core/        <span class="hljs-comment"># åç«¯é€»è¾‘</span>
â”‚   â”‚   â”œâ”€â”€ <span class="hljs-keyword">function</span>/    <span class="hljs-comment"># Serverless å‡½æ•°</span>
â”‚   â”‚   â””â”€â”€ mail/        <span class="hljs-comment"># é‚®ä»¶æ¨¡æ¿</span>
â”‚   â”œâ”€â”€ desktop/         <span class="hljs-comment"># Tauri æ¡Œé¢åº”ç”¨ (Native å¤–å£³)</span>
â”‚   â”œâ”€â”€ app/             <span class="hljs-comment"># å…±äº« UI ç»„ä»¶ (ç»Ÿä¸€è§†è§‰)</span>
â”‚   â”œâ”€â”€ sdk/js/          <span class="hljs-comment"># JavaScript SDK (å¯¹å¤–æ¥å£)</span>
â”‚   â”œâ”€â”€ ui/              <span class="hljs-comment"># UI ç»„ä»¶åº“ (è®¾è®¡ç³»ç»Ÿ)</span>
â”‚   â”œâ”€â”€ plugin/          <span class="hljs-comment"># æ’ä»¶ç³»ç»Ÿ (æ‰©å±•èƒ½åŠ›)</span>
â”‚   â”œâ”€â”€ util/            <span class="hljs-comment"># å…±äº«å·¥å…·å‡½æ•° (åŸºç¡€è®¾æ–½)</span>
â”‚   â”œâ”€â”€ web/             <span class="hljs-comment"># æ–‡æ¡£ç½‘ç«™ (çŸ¥è¯†åº“)</span>
â”‚   â””â”€â”€ identity/        <span class="hljs-comment"># èº«ä»½è®¤è¯ (å®‰å…¨é—¨æˆ·)</span>
â”œâ”€â”€ infra/               <span class="hljs-comment"># åŸºç¡€è®¾æ–½å³ä»£ç  (SST/AWS)</span>
â””â”€â”€ sdks/                <span class="hljs-comment"># SDK åˆ†å‘</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆæ˜¯ Monorepoï¼Ÿ</strong></p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨å»ºé€ ä¸€åº§ç°ä»£åŒ–çš„æ™ºèƒ½å¤§å¦ï¼š</p>
<ul>
<li><strong>CLI</strong> æ˜¯å¤§å¦çš„ç”µæ¢¯ç³»ç»Ÿâ€”â€”ç”¨æˆ·é€šè¿‡å®ƒè¿›å…¥</li>
<li><strong>Server</strong> æ˜¯å¤§å¦çš„ä¸­å¤®æ§åˆ¶å®¤â€”â€”åè°ƒä¸€åˆ‡</li>
<li><strong>Desktop</strong> æ˜¯å¤§å¦çš„è±ªåé—¨å…â€”â€”ç²¾è‡´çš„å…¥å£</li>
<li><strong>Web Console</strong> æ˜¯å¤§å¦çš„ç›‘æ§ä¸­å¿ƒâ€”â€”å…¨å±€å¯è§†</li>
<li><strong>SDK</strong> æ˜¯å¤§å¦çš„ API æ¥å£â€”â€”ä¾›å¤–éƒ¨ç³»ç»Ÿå¯¹æ¥</li>
</ul>
<p>è¿™äº›ç»„ä»¶éœ€è¦<strong>å…±äº«ä»£ç </strong>ï¼ˆUI ç»„ä»¶ã€å·¥å…·å‡½æ•°ã€ç±»å‹å®šä¹‰ï¼‰ï¼Œéœ€è¦<strong>åŒæ­¥ç‰ˆæœ¬</strong>ï¼Œéœ€è¦<strong>ç»Ÿä¸€æ„å»º</strong>ã€‚Monorepo è®©è¿™ä¸€åˆ‡å˜å¾—ä¼˜é›…ã€‚</p>
<h3 data-id="heading-4">1.2 æŠ€æœ¯æ ˆå…¨æ™¯</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "Frontend Layer"
        CLI[CLI/TUI&lt;br/&gt;yargs + ink]
        Desktop[Desktop&lt;br/&gt;Tauri 2]
        Web[Web Console&lt;br/&gt;SolidJS + Vite]
    end

    subgraph "API Layer"
        Server[HTTP Server&lt;br/&gt;Hono]
        WS[WebSocket&lt;br/&gt;Real-time]
        ACP[ACP Protocol]
        MCP[MCP Protocol]
    end

    subgraph "Core Layer"
        Session[Session Manager]
        Agent[Agent System]
        Tool[Tool Registry]
        Provider[Provider Layer]
    end

    subgraph "Infrastructure"
        Storage[Storage&lt;br/&gt;SQLite/Postgres]
        Config[Config Manager]
        Permission[Permission System]
        Bus[Event Bus]
    end

    subgraph "External"
        LLM[LLM Providers&lt;br/&gt;Anthropic/OpenAI/Google...]
        Git[Git/VCS]
        FS[File System]
    end

    CLI --&gt; Server
    Desktop --&gt; Server
    Web --&gt; Server

    Server --&gt; Session
    WS --&gt; Session
    ACP --&gt; Session
    MCP --&gt; Tool

    Session --&gt; Agent
    Session --&gt; Provider
    Agent --&gt; Tool

    Tool --&gt; FS
    Tool --&gt; Git
    Provider --&gt; LLM

    Session --&gt; Storage
    Session --&gt; Bus
    Tool --&gt; Permission
</code></pre>
<h3 data-id="heading-5">1.3 æ ¸å¿ƒåŒ…ç»“æ„æ·±å…¥</h3>
<p>è®©æˆ‘ä»¬èšç„¦ <code>packages/opencode</code>â€”â€”è¿™æ˜¯æ•´ä¸ªç³»ç»Ÿçš„å¿ƒè„ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">packages/opencode/src/
â”œâ”€â”€ cli/cmd/           <span class="hljs-comment"># CLI å‘½ä»¤å…¥å£ (17+ å‘½ä»¤)</span>
â”‚   â”œâ”€â”€ run.ts         <span class="hljs-comment"># ä¸»è¿è¡Œå‘½ä»¤</span>
â”‚   â”œâ”€â”€ auth.ts        <span class="hljs-comment"># è®¤è¯å‘½ä»¤</span>
â”‚   â”œâ”€â”€ serve.ts       <span class="hljs-comment"># æœåŠ¡å™¨æ¨¡å¼</span>
â”‚   â”œâ”€â”€ mcp.ts         <span class="hljs-comment"># MCP æœåŠ¡å™¨</span>
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ agent/             <span class="hljs-comment"># Agent ç³»ç»Ÿ</span>
â”‚   â””â”€â”€ agent.ts       <span class="hljs-comment"># Agent å®šä¹‰ä¸é…ç½®</span>
â”‚
â”œâ”€â”€ session/           <span class="hljs-comment"># ä¼šè¯ç®¡ç† (æ ¸å¿ƒ!)</span>
â”‚   â”œâ”€â”€ index.ts       <span class="hljs-comment"># Session CRUD</span>
â”‚   â”œâ”€â”€ message-v2.ts  <span class="hljs-comment"># æ¶ˆæ¯ Schema</span>
â”‚   â”œâ”€â”€ prompt.ts      <span class="hljs-comment"># æç¤ºè¯æ„å»º + ä¸»å¾ªç¯</span>
â”‚   â”œâ”€â”€ processor.ts   <span class="hljs-comment"># æµå¼å¤„ç†ç®¡é“</span>
â”‚   â”œâ”€â”€ compaction.ts  <span class="hljs-comment"># ä¸Šä¸‹æ–‡å‹ç¼©</span>
â”‚   â”œâ”€â”€ summary.ts     <span class="hljs-comment"># æ‘˜è¦ç”Ÿæˆ</span>
â”‚   â”œâ”€â”€ llm.ts         <span class="hljs-comment"># LLM è°ƒç”¨æ¥å£</span>
â”‚   â”œâ”€â”€ system.ts      <span class="hljs-comment"># System Prompt æ„å»º</span>
â”‚   â”œâ”€â”€ revert.ts      <span class="hljs-comment"># å›æ»šåŠŸèƒ½</span>
â”‚   â”œâ”€â”€ status.ts      <span class="hljs-comment"># çŠ¶æ€è¿½è¸ª</span>
â”‚   â”œâ”€â”€ retry.ts       <span class="hljs-comment"># é‡è¯•é€»è¾‘</span>
â”‚   â””â”€â”€ todo.ts        <span class="hljs-comment"># ä»»åŠ¡è¿½è¸ª</span>
â”‚
â”œâ”€â”€ provider/          <span class="hljs-comment"># LLM Provider æŠ½è±¡</span>
â”‚   â””â”€â”€ provider.ts    <span class="hljs-comment"># 18+ æä¾›å•†æ”¯æŒ</span>
â”‚
â”œâ”€â”€ tool/              <span class="hljs-comment"># å·¥å…·ç³»ç»Ÿ</span>
â”‚   â”œâ”€â”€ registry.ts    <span class="hljs-comment"># å·¥å…·æ³¨å†Œè¡¨</span>
â”‚   â”œâ”€â”€ tool.ts        <span class="hljs-comment"># å·¥å…·å®šä¹‰æ¥å£</span>
â”‚   â”œâ”€â”€ bash.ts        <span class="hljs-comment"># Shell æ‰§è¡Œ</span>
â”‚   â”œâ”€â”€ read.ts        <span class="hljs-comment"># æ–‡ä»¶è¯»å–</span>
â”‚   â”œâ”€â”€ write.ts       <span class="hljs-comment"># æ–‡ä»¶å†™å…¥</span>
â”‚   â”œâ”€â”€ edit.ts        <span class="hljs-comment"># æ–‡ä»¶ç¼–è¾‘</span>
â”‚   â”œâ”€â”€ grep.ts        <span class="hljs-comment"># ä»£ç æœç´¢</span>
â”‚   â”œâ”€â”€ glob.ts        <span class="hljs-comment"># æ–‡ä»¶åŒ¹é…</span>
â”‚   â”œâ”€â”€ lsp.ts         <span class="hljs-comment"># LSP é›†æˆ</span>
â”‚   â”œâ”€â”€ task.ts        <span class="hljs-comment"># å­ä»»åŠ¡</span>
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ server/            <span class="hljs-comment"># HTTP æœåŠ¡å™¨</span>
â”‚   â”œâ”€â”€ server.ts      <span class="hljs-comment"># Hono æœåŠ¡å™¨</span>
â”‚   â””â”€â”€ tui.ts         <span class="hljs-comment"># TUI è·¯ç”±</span>
â”‚
â”œâ”€â”€ mcp/               <span class="hljs-comment"># Model Context Protocol</span>
â”œâ”€â”€ lsp/               <span class="hljs-comment"># Language Server Protocol</span>
â”œâ”€â”€ project/           <span class="hljs-comment"># é¡¹ç›®ç®¡ç†</span>
â”œâ”€â”€ permission/        <span class="hljs-comment"># æƒé™ç³»ç»Ÿ</span>
â”œâ”€â”€ storage/           <span class="hljs-comment"># æ•°æ®å­˜å‚¨</span>
â”œâ”€â”€ bus/               <span class="hljs-comment"># äº‹ä»¶æ€»çº¿</span>
â”œâ”€â”€ config/            <span class="hljs-comment"># é…ç½®ç®¡ç†</span>
â”œâ”€â”€ worktree/          <span class="hljs-comment"># Git Worktree</span>
â”œâ”€â”€ snapshot/          <span class="hljs-comment"># æ–‡ä»¶å¿«ç…§</span>
â””â”€â”€ plugin/            <span class="hljs-comment"># æ’ä»¶ç³»ç»Ÿ</span>
</code></pre>
<p>è¿™ä¸ªç»“æ„ä½“ç°äº†<strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>çš„è®¾è®¡å“²å­¦ï¼šæ¯ä¸ªç›®å½•éƒ½æœ‰æ˜ç¡®çš„èŒè´£ï¼Œæ¨¡å—ä¹‹é—´é€šè¿‡æ¸…æ™°çš„æ¥å£é€šä¿¡ã€‚</p>
<hr/>
<h2 data-id="heading-6">ç¬¬äºŒç« ï¼šä¼šè¯ç®¡ç† - AI çš„"è®°å¿†å®«æ®¿"</h2>
<blockquote>
<p>"è®°å¿†æ˜¯æ™ºæ…§çš„æ¯äº²ã€‚" â€”â€” åŸƒæ–¯åº“ç½—æ–¯</p>
</blockquote>
<p>å¦‚æœè¯´ LLM æ˜¯ Agent çš„å¤§è„‘ï¼Œé‚£ä¹ˆ <strong>Session Management</strong> å°±æ˜¯å®ƒçš„è®°å¿†ç³»ç»Ÿã€‚æ²¡æœ‰è®°å¿†çš„ AIï¼Œå°±åƒæ‚£äº†é˜¿å°”èŒ¨æµ·é»˜ç—‡çš„å¤©æ‰â€”â€”æ¯æ¬¡å¯¹è¯éƒ½ä»é›¶å¼€å§‹ã€‚</p>
<h3 data-id="heading-7">2.1 ä¼šè¯çš„æ•°æ®æ¨¡å‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">erDiagram
    Session ||--o{ Message : contains
    Message ||--o{ Part : contains
    Session {
        string id PK
        string projectID FK
        string directory
        string title
        timestamp created
        timestamp updated
        json summary
        json permission
    }
    Message {
        string id PK
        string sessionID FK
        string role "user|assistant"
        string parentID "for assistant"
        string agent
        json model
        json tokens
        float cost
        string finish
        json error
    }
    Part {
        string id PK
        string messageID FK
        string type "text|tool|reasoning|file|..."
        json content
        json state "for tool parts"
        timestamp created
    }
</code></pre>
<p>è¿™ä¸ªä¸‰å±‚ç»“æ„è®¾è®¡å¾—éå¸¸ç²¾å¦™ï¼š</p>
<ol>
<li><strong>Session</strong> - ä¸€æ¬¡å®Œæ•´çš„ä»»åŠ¡ä¼šè¯</li>
<li><strong>Message</strong> - ç”¨æˆ·æˆ– AI çš„ä¸€æ¬¡å‘è¨€</li>
<li><strong>Part</strong> - å‘è¨€ä¸­çš„ç»„æˆéƒ¨åˆ†ï¼ˆæ–‡æœ¬ã€å·¥å…·è°ƒç”¨ã€æ€è€ƒè¿‡ç¨‹ç­‰ï¼‰</li>
</ol>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦ Part å±‚çº§ï¼Ÿ</strong></p>
<p>ä¼ ç»Ÿçš„ chatbot åªæœ‰ Message å±‚çº§â€”â€”ä¸€æ¡æ¶ˆæ¯å°±æ˜¯ä¸€æ®µæ–‡æœ¬ã€‚ä½† AI Agent çš„è¾“å‡ºè¦å¤æ‚å¾—å¤šï¼š</p>
<pre><code class="hljs language-css" lang="css">User: <span class="hljs-string">"å¸®æˆ‘ä¿®å¤ src/app.ts çš„ bug"</span>

Assistant Response:
â”œâ”€ ReasoningPart: <span class="hljs-string">"è®©æˆ‘å…ˆè¯»å–æ–‡ä»¶çœ‹çœ‹é—®é¢˜..."</span>
â”œâ”€ ToolPart: { name: <span class="hljs-string">"read"</span>, input: {...}, output: <span class="hljs-string">"..."</span> }
â”œâ”€ ReasoningPart: <span class="hljs-string">"æˆ‘å‘ç°ç¬¬ 42 è¡Œæœ‰ç±»å‹é”™è¯¯..."</span>
â”œâ”€ ToolPart: { name: <span class="hljs-string">"edit"</span>, input: {...}, output: <span class="hljs-string">"..."</span> }
â”œâ”€ TextPart: <span class="hljs-string">"å·²ä¿®å¤ï¼é—®é¢˜æ˜¯..."</span>
â””â”€ PatchPart: { diff: <span class="hljs-string">"..."</span> }
</code></pre>
<p>Part å±‚çº§è®©æˆ‘ä»¬èƒ½å¤Ÿï¼š</p>
<ul>
<li><strong>æµå¼æ›´æ–°</strong>ï¼šæ¯ä¸ª Part å¯ä»¥ç‹¬ç«‹æ›´æ–°ï¼ŒUI å®æ—¶åˆ·æ–°</li>
<li><strong>çŠ¶æ€è¿½è¸ª</strong>ï¼šå·¥å…·æ‰§è¡Œæœ‰ç‹¬ç«‹çš„çŠ¶æ€æœº</li>
<li><strong>ç»†ç²’åº¦å­˜å‚¨</strong>ï¼šåªæ›´æ–°å˜åŒ–çš„éƒ¨åˆ†</li>
<li><strong>å·®å¼‚åŒ–æ¸²æŸ“</strong>ï¼šæ€è€ƒè¿‡ç¨‹ã€å·¥å…·è°ƒç”¨ã€æœ€ç»ˆå›å¤ç”¨ä¸åŒæ ·å¼æ˜¾ç¤º</li>
</ul>
<h3 data-id="heading-8">2.2 æ¶ˆæ¯çš„ç±»å‹ç³»ç»Ÿ</h3>
<p>OpenCode ä½¿ç”¨ <strong>Zod</strong> å®šä¹‰äº†ä¸¥æ ¼çš„ç±»å‹ç³»ç»Ÿï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç”¨æˆ·æ¶ˆæ¯ Schema</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">UserMessage</span> = z.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">id</span>: z.<span class="hljs-title function_">string</span>(),
  <span class="hljs-attr">sessionID</span>: z.<span class="hljs-title function_">string</span>(),
  <span class="hljs-attr">role</span>: z.<span class="hljs-title function_">literal</span>(<span class="hljs-string">"user"</span>),
  <span class="hljs-attr">time</span>: z.<span class="hljs-title function_">object</span>({ <span class="hljs-attr">created</span>: z.<span class="hljs-title function_">number</span>() }),

  <span class="hljs-comment">// AI é…ç½®</span>
  <span class="hljs-attr">agent</span>: z.<span class="hljs-title function_">string</span>(),
  <span class="hljs-attr">model</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">providerID</span>: z.<span class="hljs-title function_">string</span>(),
    <span class="hljs-attr">modelID</span>: z.<span class="hljs-title function_">string</span>(),
  }),

  <span class="hljs-comment">// å¯é€‰è¦†ç›–</span>
  <span class="hljs-attr">system</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">optional</span>(),      <span class="hljs-comment">// è‡ªå®šä¹‰ system prompt</span>
  <span class="hljs-attr">tools</span>: z.<span class="hljs-title function_">record</span>(z.<span class="hljs-title function_">boolean</span>()).<span class="hljs-title function_">optional</span>(), <span class="hljs-comment">// å·¥å…·å¼€å…³</span>
  <span class="hljs-attr">variant</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">optional</span>(),     <span class="hljs-comment">// æ¨¡å‹å˜ä½“</span>

  <span class="hljs-comment">// æ‘˜è¦ä¿¡æ¯</span>
  <span class="hljs-attr">summary</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">title</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">optional</span>(),
    <span class="hljs-attr">body</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">optional</span>(),
    <span class="hljs-attr">diffs</span>: z.<span class="hljs-title function_">array</span>(<span class="hljs-title class_">FileDiff</span>),
  }).<span class="hljs-title function_">optional</span>(),
});

<span class="hljs-comment">// åŠ©æ‰‹æ¶ˆæ¯ Schema</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">AssistantMessage</span> = z.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">id</span>: z.<span class="hljs-title function_">string</span>(),
  <span class="hljs-attr">sessionID</span>: z.<span class="hljs-title function_">string</span>(),
  <span class="hljs-attr">role</span>: z.<span class="hljs-title function_">literal</span>(<span class="hljs-string">"assistant"</span>),
  <span class="hljs-attr">parentID</span>: z.<span class="hljs-title function_">string</span>(),  <span class="hljs-comment">// å…³è”åˆ°ç”¨æˆ·æ¶ˆæ¯</span>

  <span class="hljs-attr">time</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">created</span>: z.<span class="hljs-title function_">number</span>(),
    <span class="hljs-attr">completed</span>: z.<span class="hljs-title function_">number</span>().<span class="hljs-title function_">optional</span>(),
  }),

  <span class="hljs-comment">// æ¨¡å‹ä¿¡æ¯</span>
  <span class="hljs-attr">modelID</span>: z.<span class="hljs-title function_">string</span>(),
  <span class="hljs-attr">providerID</span>: z.<span class="hljs-title function_">string</span>(),
  <span class="hljs-attr">agent</span>: z.<span class="hljs-title function_">string</span>(),
  <span class="hljs-attr">mode</span>: z.<span class="hljs-title function_">string</span>(),

  <span class="hljs-comment">// æ‰§è¡Œç»“æœ</span>
  <span class="hljs-attr">finish</span>: z.<span class="hljs-title function_">enum</span>([<span class="hljs-string">"tool-calls"</span>, <span class="hljs-string">"stop"</span>, <span class="hljs-string">"length"</span>, <span class="hljs-string">"content-filter"</span>, <span class="hljs-string">"other"</span>]),
  <span class="hljs-attr">error</span>: <span class="hljs-title class_">MessageError</span>.<span class="hljs-title function_">optional</span>(),

  <span class="hljs-comment">// æˆæœ¬è¿½è¸ª</span>
  <span class="hljs-attr">cost</span>: z.<span class="hljs-title function_">number</span>(),
  <span class="hljs-attr">tokens</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">input</span>: z.<span class="hljs-title function_">number</span>(),
    <span class="hljs-attr">output</span>: z.<span class="hljs-title function_">number</span>(),
    <span class="hljs-attr">reasoning</span>: z.<span class="hljs-title function_">number</span>(),
    <span class="hljs-attr">cache</span>: z.<span class="hljs-title function_">object</span>({ <span class="hljs-attr">read</span>: z.<span class="hljs-title function_">number</span>(), <span class="hljs-attr">write</span>: z.<span class="hljs-title function_">number</span>() }),
  }),
});
</code></pre>
<p><strong><code>finish</code> å­—æ®µçš„æ™ºæ…§</strong></p>
<p>æ³¨æ„ <code>finish</code> å­—æ®µçš„æšä¸¾å€¼ï¼š</p>
<ul>
<li><code>"tool-calls"</code>: AI éœ€è¦è°ƒç”¨å·¥å…·ï¼Œå¾ªç¯ç»§ç»­</li>
<li><code>"stop"</code>: AI ä¸»åŠ¨ç»“æŸï¼Œå¾ªç¯ç»ˆæ­¢</li>
<li><code>"length"</code>: è¾“å‡ºè¿‡é•¿è¢«æˆªæ–­</li>
<li><code>"content-filter"</code>: å†…å®¹è¢«è¿‡æ»¤</li>
<li><code>"other"</code>: å…¶ä»–åŸå› </li>
</ul>
<p>è¿™ä¸ªå­—æ®µæ˜¯<strong>ä¸»å¾ªç¯çš„æ§åˆ¶å¼€å…³</strong>â€”â€”åªæœ‰å½“ <code>finish !== "tool-calls"</code> æ—¶ï¼ŒAgent æ‰ä¼šåœæ­¢å·¥ä½œã€‚</p>
<h3 data-id="heading-9">2.3 Part çš„ç±»å‹å®‡å®™</h3>
<p>Part ä½¿ç”¨ <strong>Discriminated Union</strong> æ¨¡å¼ï¼Œè¿™æ˜¯ TypeScript ç±»å‹ç³»ç»Ÿçš„ä¸€ä¸ªå¼ºå¤§ç‰¹æ€§ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Part</span> =
  | { <span class="hljs-attr">type</span>: <span class="hljs-string">"text"</span>; <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>; }
  | { <span class="hljs-attr">type</span>: <span class="hljs-string">"reasoning"</span>; <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>; }
  | { <span class="hljs-attr">type</span>: <span class="hljs-string">"tool"</span>; <span class="hljs-attr">state</span>: <span class="hljs-title class_">ToolState</span>; }
  | { <span class="hljs-attr">type</span>: <span class="hljs-string">"file"</span>; <span class="hljs-attr">source</span>: <span class="hljs-string">"file"</span> | <span class="hljs-string">"symbol"</span> | <span class="hljs-string">"resource"</span>; <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>; }
  | { <span class="hljs-attr">type</span>: <span class="hljs-string">"snapshot"</span>; <span class="hljs-attr">ref</span>: <span class="hljs-built_in">string</span>; }
  | { <span class="hljs-attr">type</span>: <span class="hljs-string">"patch"</span>; <span class="hljs-attr">diff</span>: <span class="hljs-built_in">string</span>; }
  | { <span class="hljs-attr">type</span>: <span class="hljs-string">"step-start"</span>; <span class="hljs-attr">snapshot</span>: <span class="hljs-built_in">string</span>; }
  | { <span class="hljs-attr">type</span>: <span class="hljs-string">"step-finish"</span>; <span class="hljs-attr">usage</span>: <span class="hljs-title class_">Usage</span>; }
  | { <span class="hljs-attr">type</span>: <span class="hljs-string">"agent"</span>; <span class="hljs-attr">agentID</span>: <span class="hljs-built_in">string</span>; }
  | { <span class="hljs-attr">type</span>: <span class="hljs-string">"compaction"</span>; }
  | { <span class="hljs-attr">type</span>: <span class="hljs-string">"subtask"</span>; <span class="hljs-attr">taskID</span>: <span class="hljs-built_in">string</span>; }
  | { <span class="hljs-attr">type</span>: <span class="hljs-string">"retry"</span>; <span class="hljs-attr">attempt</span>: <span class="hljs-built_in">number</span>; };
</code></pre>
<p>æ¯ç§ç±»å‹éƒ½æœ‰å…¶ç‹¬ç‰¹çš„ç”¨é€”ï¼š</p>




























































<table><thead><tr><th>ç±»å‹</th><th>ç”¨é€”</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>text</code></td><td>AI çš„æ–‡æœ¬å›å¤</td><td>"æˆ‘å·²ç»ä¿®å¤äº†è¿™ä¸ª bug..."</td></tr><tr><td><code>reasoning</code></td><td>æ€è€ƒè¿‡ç¨‹</td><td>"è®©æˆ‘åˆ†æä¸€ä¸‹è¿™ä¸ªå‡½æ•°..."</td></tr><tr><td><code>tool</code></td><td>å·¥å…·è°ƒç”¨</td><td>Read, Write, Bash, Grep...</td></tr><tr><td><code>file</code></td><td>æ–‡ä»¶é™„ä»¶</td><td>è¯»å–çš„ä»£ç æ–‡ä»¶å†…å®¹</td></tr><tr><td><code>snapshot</code></td><td>Git å¿«ç…§å¼•ç”¨</td><td>ç”¨äºå›æ»š</td></tr><tr><td><code>patch</code></td><td>æ–‡ä»¶å˜æ›´</td><td>diff æ ¼å¼çš„ä¿®æ”¹</td></tr><tr><td><code>step-start/finish</code></td><td>æ­¥éª¤è¾¹ç•Œ</td><td>ç”¨äºè®¡ç®— token å’Œæˆæœ¬</td></tr><tr><td><code>compaction</code></td><td>å‹ç¼©æ ‡è®°</td><td>æ ‡è®°ä¸Šä¸‹æ–‡è¢«å‹ç¼©</td></tr><tr><td><code>subtask</code></td><td>å­ä»»åŠ¡</td><td>è°ƒç”¨å…¶ä»– Agent</td></tr><tr><td><code>retry</code></td><td>é‡è¯•å…ƒæ•°æ®</td><td>è®°å½•é‡è¯•æ¬¡æ•°</td></tr></tbody></table>
<h3 data-id="heading-10">2.4 Tool Part çš„çŠ¶æ€æœº</h3>
<p>å·¥å…·è°ƒç”¨æ˜¯ Agent æœ€æ ¸å¿ƒçš„èƒ½åŠ›ï¼Œå®ƒçš„çŠ¶æ€ç®¡ç†å°¤ä¸ºé‡è¦ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">stateDiagram-v2
    [*] --&gt; Pending: tool-input-start
    Pending --&gt; Running: tool-call
    Running --&gt; Completed: tool-result
    Running --&gt; Error: tool-error
    Completed --&gt; [*]
    Error --&gt; [*]

    note right of Pending
        ç­‰å¾…è¾“å…¥å®Œæˆ
        raw: åŸå§‹ JSON å­—ç¬¦ä¸²
    end note

    note right of Running
        æ­£åœ¨æ‰§è¡Œ
        input: è§£æåçš„å‚æ•°
        time.start: å¼€å§‹æ—¶é—´
    end note

    note right of Completed
        æ‰§è¡ŒæˆåŠŸ
        output: æ‰§è¡Œç»“æœ
        title: å±•ç¤ºæ ‡é¢˜
        metadata: é¢å¤–ä¿¡æ¯
        time.end: ç»“æŸæ—¶é—´
    end note

    note right of Error
        æ‰§è¡Œå¤±è´¥
        error: é”™è¯¯ä¿¡æ¯
    end note
</code></pre>
<p>çŠ¶æ€çš„æ•°æ®ç»“æ„ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ToolState</span> =
  | {
      <span class="hljs-attr">status</span>: <span class="hljs-string">"pending"</span>;
      <span class="hljs-attr">input</span>: {};
      <span class="hljs-attr">raw</span>: <span class="hljs-built_in">string</span>;  <span class="hljs-comment">// æµå¼æ¥æ”¶çš„åŸå§‹ JSON</span>
    }
  | {
      <span class="hljs-attr">status</span>: <span class="hljs-string">"running"</span>;
      <span class="hljs-attr">input</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">unknown</span>&gt;;
      title?: <span class="hljs-built_in">string</span>;
      metadata?: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">unknown</span>&gt;;
      <span class="hljs-attr">time</span>: { <span class="hljs-attr">start</span>: <span class="hljs-built_in">number</span> };
    }
  | {
      <span class="hljs-attr">status</span>: <span class="hljs-string">"completed"</span>;
      <span class="hljs-attr">input</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">unknown</span>&gt;;
      <span class="hljs-attr">output</span>: <span class="hljs-built_in">string</span>;
      <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;
      <span class="hljs-attr">metadata</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">unknown</span>&gt;;
      <span class="hljs-attr">time</span>: { <span class="hljs-attr">start</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">end</span>: <span class="hljs-built_in">number</span>; compacted?: <span class="hljs-built_in">number</span> };
      attachments?: <span class="hljs-title class_">FilePart</span>[];
    }
  | {
      <span class="hljs-attr">status</span>: <span class="hljs-string">"error"</span>;
      <span class="hljs-attr">input</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">unknown</span>&gt;;
      <span class="hljs-attr">error</span>: <span class="hljs-built_in">string</span>;
      <span class="hljs-attr">time</span>: { <span class="hljs-attr">start</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">end</span>: <span class="hljs-built_in">number</span> };
    };
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦ <code>pending</code> çŠ¶æ€ï¼Ÿ</strong></p>
<p>å½“ LLM å†³å®šè°ƒç”¨å·¥å…·æ—¶ï¼Œå®ƒä¼šæµå¼è¾“å‡ºå·¥å…·çš„å‚æ•°ã€‚åœ¨å‚æ•°å®Œæ•´ä¹‹å‰ï¼Œæˆ‘ä»¬åªæœ‰ä¸€ä¸ªä¸å®Œæ•´çš„ JSON å­—ç¬¦ä¸²ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">æ¥æ”¶ä¸­: {<span class="hljs-string">"file_path"</span>: <span class="hljs-string">"src/ap
æ¥æ”¶ä¸­: {"</span>file_path<span class="hljs-string">": "</span>src/app.ts<span class="hljs-string">", "</span>off
æ¥æ”¶ä¸­: {<span class="hljs-string">"file_path"</span>: <span class="hljs-string">"src/app.ts"</span>, <span class="hljs-string">"offset"</span>: 0, <span class="hljs-string">"limit"</span>: 100}
</code></pre>
<p><code>pending</code> çŠ¶æ€è®©æˆ‘ä»¬èƒ½å¤Ÿåœ¨ UI ä¸Šæ˜¾ç¤º"æ­£åœ¨å‡†å¤‡å·¥å…·è°ƒç”¨..."ï¼Œè€Œä¸æ˜¯ç­‰åˆ°å‚æ•°å®Œæ•´æ‰æ˜¾ç¤ºã€‚</p>
<hr/>
<h2 data-id="heading-11">ç¬¬ä¸‰ç« ï¼šAgent ç³»ç»Ÿ - æ€è€ƒçš„è‰ºæœ¯</h2>
<h3 data-id="heading-12">3.1 ä»€ä¹ˆæ˜¯ Agentï¼Ÿ</h3>
<p>åœ¨ OpenCode ä¸­ï¼Œ<strong>Agent</strong> ä¸ä»…ä»…æ˜¯ä¸€ä¸ª LLM çš„åŒ…è£…â€”â€”å®ƒæ˜¯ä¸€ä¸ª<strong>äººæ ¼åŒ–çš„è§’è‰²å®šä¹‰</strong>ã€‚æ¯ä¸ª Agent æœ‰è‡ªå·±çš„ï¼š</p>
<ul>
<li><strong>System Prompt</strong> - è¡Œä¸ºæŒ‡å—</li>
<li><strong>æƒé™é…ç½®</strong> - èƒ½åšä»€ä¹ˆ</li>
<li><strong>æ¨¡å‹å‚æ•°</strong> - temperature, topP ç­‰</li>
<li><strong>æ­¥æ•°é™åˆ¶</strong> - æœ€å¤šæ‰§è¡Œå¤šå°‘è½®</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">AgentInfo</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;           <span class="hljs-comment">// å”¯ä¸€æ ‡è¯†ç¬¦</span>
  <span class="hljs-attr">mode</span>: <span class="hljs-string">"subagent"</span> | <span class="hljs-string">"primary"</span> | <span class="hljs-string">"all"</span>;  <span class="hljs-comment">// ä½¿ç”¨æ¨¡å¼</span>
  permission?: <span class="hljs-title class_">PermissionRuleset</span>;  <span class="hljs-comment">// æƒé™è§„åˆ™</span>
  prompt?: <span class="hljs-built_in">string</span>;        <span class="hljs-comment">// è‡ªå®šä¹‰ System Prompt</span>
  temperature?: <span class="hljs-built_in">number</span>;   <span class="hljs-comment">// åˆ›é€ æ€§ç¨‹åº¦</span>
  topP?: <span class="hljs-built_in">number</span>;          <span class="hljs-comment">// é‡‡æ ·èŒƒå›´</span>
  steps?: <span class="hljs-built_in">number</span>;         <span class="hljs-comment">// æœ€å¤§æ­¥æ•°</span>
}
</code></pre>
<h3 data-id="heading-13">3.2 å†…ç½® Agent å›¾é‰´</h3>
<p>OpenCode å†…ç½®äº†å¤šä¸ªä¸“ä¸šåŒ–çš„ Agentï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    subgraph "Primary Agents"
        Build[build&lt;br/&gt;ä¸»æ‰§è¡Œ Agent]
        Plan[plan&lt;br/&gt;è§„åˆ’ Agent]
    end

    subgraph "Subagents"
        Explore[explore&lt;br/&gt;æ¢ç´¢ Agent&lt;br/&gt;åªè¯»æƒé™]
        General[general&lt;br/&gt;é€šç”¨ Agent]
    end

    subgraph "Hidden Agents"
        Compaction[compaction&lt;br/&gt;å‹ç¼© Agent]
        Title[title&lt;br/&gt;æ ‡é¢˜ç”Ÿæˆ]
        Summary[summary&lt;br/&gt;æ‘˜è¦ç”Ÿæˆ]
    end

    Build --&gt; Explore
    Build --&gt; General
    Build --&gt; Compaction
    Build --&gt; Title
    Build --&gt; Summary
</code></pre>
<p><strong>å„ Agent çš„èŒè´£ï¼š</strong></p>





















































<table><thead><tr><th>Agent</th><th>æ¨¡å¼</th><th>èŒè´£</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><code>build</code></td><td>primary</td><td>ä¸»è¦çš„ä»£ç æ‰§è¡Œ Agent</td><td>åŸç”Ÿæƒé™ï¼Œæœ€å¸¸ç”¨</td></tr><tr><td><code>plan</code></td><td>primary</td><td>è§„åˆ’é˜¶æ®µ Agent</td><td>ç”¨äºåˆ¶å®šå®æ–½è®¡åˆ’</td></tr><tr><td><code>explore</code></td><td>subagent</td><td>ä»£ç åº“æ¢ç´¢</td><td><strong>åªè¯»æƒé™</strong>ï¼Œå¿«é€Ÿæœç´¢</td></tr><tr><td><code>general</code></td><td>subagent</td><td>é€šç”¨å¤šæ­¥ä»»åŠ¡</td><td>å®Œæ•´æƒé™</td></tr><tr><td><code>compaction</code></td><td>hidden</td><td>ä¸Šä¸‹æ–‡å‹ç¼©</td><td>è‡ªåŠ¨è°ƒç”¨ï¼Œç”¨æˆ·ä¸å¯è§</td></tr><tr><td><code>title</code></td><td>hidden</td><td>ç”Ÿæˆä¼šè¯æ ‡é¢˜</td><td>ä½¿ç”¨å°æ¨¡å‹ï¼Œæˆæœ¬ä½</td></tr><tr><td><code>summary</code></td><td>hidden</td><td>ç”Ÿæˆæ¶ˆæ¯æ‘˜è¦</td><td>è‡ªåŠ¨æ€»ç»“å¯¹è¯</td></tr></tbody></table>
<h3 data-id="heading-14">3.3 Explore Agent çš„å¦™ç”¨</h3>
<p><code>explore</code> Agent æ˜¯ä¸€ä¸ª<strong>åªè¯»çš„å¿«é€Ÿæ¢ç´¢è€…</strong>ï¼Œå®ƒçš„è®¾è®¡ä½“ç°äº†"æœ€å°æƒé™åŸåˆ™"ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">{
  <span class="hljs-attr">name</span>: <span class="hljs-string">"explore"</span>,
  <span class="hljs-attr">mode</span>: <span class="hljs-string">"subagent"</span>,
  <span class="hljs-attr">permission</span>: {
    <span class="hljs-comment">// åªå…è®¸è¯»å–æ“ä½œ</span>
    <span class="hljs-string">"tool.read"</span>: { <span class="hljs-attr">allow</span>: <span class="hljs-literal">true</span> },
    <span class="hljs-string">"tool.glob"</span>: { <span class="hljs-attr">allow</span>: <span class="hljs-literal">true</span> },
    <span class="hljs-string">"tool.grep"</span>: { <span class="hljs-attr">allow</span>: <span class="hljs-literal">true</span> },
    <span class="hljs-comment">// ç¦æ­¢å†™å…¥æ“ä½œ</span>
    <span class="hljs-string">"tool.write"</span>: { <span class="hljs-attr">deny</span>: <span class="hljs-literal">true</span> },
    <span class="hljs-string">"tool.edit"</span>: { <span class="hljs-attr">deny</span>: <span class="hljs-literal">true</span> },
    <span class="hljs-string">"tool.bash"</span>: { <span class="hljs-attr">deny</span>: <span class="hljs-literal">true</span> },
  },
  <span class="hljs-attr">prompt</span>: <span class="hljs-string">`You are a fast codebase explorer. Your job is to quickly
    find relevant files and code patterns. You cannot modify anything.`</span>,
  <span class="hljs-attr">steps</span>: <span class="hljs-number">10</span>,  <span class="hljs-comment">// æœ€å¤š 10 è½®ï¼Œå¿«é€Ÿå®Œæˆ</span>
}
</code></pre>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<p>å½“ç”¨æˆ·é—®"è¿™ä¸ªé¡¹ç›®çš„è·¯ç”±æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ"ï¼Œä¸» Agent å¯ä»¥ï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ª <code>explore</code> å­ä»»åŠ¡</li>
<li>Explore Agent å¿«é€Ÿæœç´¢ä»£ç </li>
<li>è¿”å›ç»“æœç»™ä¸» Agent</li>
<li>ä¸» Agent ç»¼åˆå›ç­”</li>
</ol>
<p>è¿™æ ·çš„è®¾è®¡æœ‰å‡ ä¸ªå¥½å¤„ï¼š</p>
<ul>
<li><strong>å®‰å…¨</strong>ï¼šæ¢ç´¢è¿‡ç¨‹ä¸ä¼šæ„å¤–ä¿®æ”¹æ–‡ä»¶</li>
<li><strong>é«˜æ•ˆ</strong>ï¼šexplore æœ‰ä¸“é—¨ä¼˜åŒ–çš„ prompt</li>
<li><strong>å¹¶è¡Œ</strong>ï¼šå¤šä¸ªæ¢ç´¢ä»»åŠ¡å¯ä»¥å¹¶è¡Œæ‰§è¡Œ</li>
</ul>
<h3 data-id="heading-15">3.4 Agent çš„è°ƒç”¨é“¾</h3>
<pre><code class="hljs language-css" lang="css">User <span class="hljs-selector-tag">Input</span>: <span class="hljs-string">"å¸®æˆ‘é‡æ„è¿™ä¸ªå‡½æ•°"</span>
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Build Agent                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æ€è€ƒï¼šæˆ‘éœ€è¦å…ˆäº†è§£è¿™ä¸ªå‡½æ•°çš„ç”¨é€”å’Œä¸Šä¸‹æ–‡                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                  â”‚
â”‚                              â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ å·¥å…·è°ƒç”¨ï¼šTask (åˆ›å»º explore å­ä»»åŠ¡)                        â”‚  â”‚
â”‚  â”‚ { agent: <span class="hljs-string">"explore"</span>, prompt: <span class="hljs-string">"æ‰¾å‡ºæ‰€æœ‰è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„åœ°æ–¹"</span> }   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Explore Agent                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ å·¥å…·ï¼šGrep (æœç´¢å‡½æ•°å¼•ç”¨)                                    â”‚  â”‚
â”‚  â”‚ å·¥å…·ï¼šRead (è¯»å–ç›¸å…³æ–‡ä»¶)                                    â”‚  â”‚
â”‚  â”‚ è¿”å›ï¼šæ‰¾åˆ° <span class="hljs-number">5</span> å¤„è°ƒç”¨ï¼Œä½äº <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.ts</span>, <span class="hljs-selector-tag">b</span><span class="hljs-selector-class">.ts</span>, c<span class="hljs-selector-class">.ts</span>...               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Build Agent (ç»§ç»­)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æ€è€ƒï¼šäº†è§£äº†ä¸Šä¸‹æ–‡ï¼Œç°åœ¨å¯ä»¥å®‰å…¨åœ°é‡æ„                        â”‚  â”‚
â”‚  â”‚ å·¥å…·ï¼šEdit (ä¿®æ”¹å‡½æ•°)                                        â”‚  â”‚
â”‚  â”‚ å·¥å…·ï¼šEdit (æ›´æ–°è°ƒç”¨å¤„)                                      â”‚  â”‚
â”‚  â”‚ è¾“å‡ºï¼šé‡æ„å®Œæˆï¼Œä¿®æ”¹äº† <span class="hljs-number">6</span> ä¸ªæ–‡ä»¶                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h2 data-id="heading-16">ç¬¬å››ç« ï¼šå·¥å…·ç³»ç»Ÿ - AI çš„"ç‘å£«å†›åˆ€"</h2>
<h3 data-id="heading-17">4.1 å·¥å…·çš„è®¾è®¡å“²å­¦</h3>
<p>å·¥å…·æ˜¯ Agent ä¸çœŸå®ä¸–ç•Œäº¤äº’çš„æ¡¥æ¢ã€‚OpenCode çš„å·¥å…·ç³»ç»Ÿéµå¾ªå‡ ä¸ªè®¾è®¡åŸåˆ™ï¼š</p>
<ol>
<li><strong>å£°æ˜å¼å®šä¹‰</strong>ï¼šä½¿ç”¨ Zod Schema å®šä¹‰å‚æ•°</li>
<li><strong>ä¸Šä¸‹æ–‡æ„ŸçŸ¥</strong>ï¼šæ¯ä¸ªå·¥å…·éƒ½èƒ½è®¿é—®ä¼šè¯ä¸Šä¸‹æ–‡</li>
<li><strong>çŠ¶æ€è¿½è¸ª</strong>ï¼šæ‰§è¡Œè¿‡ç¨‹å®æ—¶æ›´æ–°</li>
<li><strong>æƒé™æ§åˆ¶</strong>ï¼šæ¯ä¸ªå·¥å…·è°ƒç”¨éƒ½ç»è¿‡æƒé™æ£€æŸ¥</li>
<li><strong>å¯æ‰©å±•</strong>ï¼šæ”¯æŒè‡ªå®šä¹‰å·¥å…·å’Œ MCP åè®®</li>
</ol>
<h3 data-id="heading-18">4.2 å·¥å…·å®šä¹‰æ¥å£</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å·¥å…·å®šä¹‰æ¥å£</span>
<span class="hljs-title class_">Tool</span>.<span class="hljs-property">define</span> = (<span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">init</span>: <span class="hljs-function">() =&gt;</span> ({
  <span class="hljs-attr">description</span>: <span class="hljs-built_in">string</span>;           <span class="hljs-comment">// ç»™ LLM çœ‹çš„æè¿°</span>
  <span class="hljs-attr">parameters</span>: <span class="hljs-title class_">ZodSchema</span>;         <span class="hljs-comment">// å‚æ•° Schema</span>
  <span class="hljs-attr">execute</span>: <span class="hljs-function">(<span class="hljs-params">args: T, ctx: ToolContext</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">ToolResult</span>&gt;;
  formatValidationError?: <span class="hljs-function">(<span class="hljs-params">error: ZodError</span>) =&gt;</span> <span class="hljs-built_in">string</span>;  <span class="hljs-comment">// è‡ªå®šä¹‰é”™è¯¯æ ¼å¼</span>
}));

<span class="hljs-comment">// å·¥å…·ä¸Šä¸‹æ–‡</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ToolContext</span> {
  <span class="hljs-attr">sessionID</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">messageID</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">agent</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">abort</span>: <span class="hljs-title class_">AbortSignal</span>;           <span class="hljs-comment">// ç”¨äºå–æ¶ˆæ‰§è¡Œ</span>
  <span class="hljs-attr">callID</span>: <span class="hljs-built_in">string</span>;               <span class="hljs-comment">// æœ¬æ¬¡è°ƒç”¨çš„å”¯ä¸€ ID</span>

  <span class="hljs-comment">// åŠ¨æ€æ–¹æ³•</span>
  <span class="hljs-title function_">metadata</span>(<span class="hljs-attr">input</span>: <span class="hljs-built_in">object</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;;  <span class="hljs-comment">// æ›´æ–°å…ƒæ•°æ®</span>
  <span class="hljs-title function_">ask</span>(<span class="hljs-attr">request</span>: <span class="hljs-title class_">PermissionRequest</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;;  <span class="hljs-comment">// è¯·æ±‚æƒé™</span>
}

<span class="hljs-comment">// å·¥å…·æ‰§è¡Œç»“æœ</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ToolResult</span> {
  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;                <span class="hljs-comment">// å±•ç¤ºç»™ç”¨æˆ·çš„æ ‡é¢˜</span>
  <span class="hljs-attr">output</span>: <span class="hljs-built_in">string</span>;               <span class="hljs-comment">// è¿”å›ç»™ LLM çš„è¾“å‡º</span>
  metadata?: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">unknown</span>&gt;;  <span class="hljs-comment">// é¢å¤–ä¿¡æ¯</span>
  attachments?: <span class="hljs-title class_">FilePart</span>[];     <span class="hljs-comment">// é™„ä»¶ï¼ˆå¦‚å›¾ç‰‡ï¼‰</span>
}
</code></pre>
<h3 data-id="heading-19">4.3 æ ¸å¿ƒå·¥å…·è¯¦è§£</h3>
<h4 data-id="heading-20">Read Tool - æ–‡ä»¶è¯»å–</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title class_">Tool</span>.<span class="hljs-title function_">define</span>(<span class="hljs-string">"read"</span>, <span class="hljs-function">() =&gt;</span> ({
  <span class="hljs-attr">description</span>: <span class="hljs-string">`Reads a file from the local filesystem.
    - The file_path parameter must be an absolute path
    - By default reads up to 2000 lines
    - Can read images (PNG, JPG), PDFs, and Jupyter notebooks
    - Results use cat -n format with line numbers`</span>,

  <span class="hljs-attr">parameters</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">file_path</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"Absolute path to the file"</span>),
    <span class="hljs-attr">offset</span>: z.<span class="hljs-title function_">number</span>().<span class="hljs-title function_">optional</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"Starting line number"</span>),
    <span class="hljs-attr">limit</span>: z.<span class="hljs-title function_">number</span>().<span class="hljs-title function_">optional</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"Number of lines to read"</span>),
  }),

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">execute</span>(<span class="hljs-params">{ file_path, offset, limit }, ctx</span>) {
    <span class="hljs-comment">// 1. è§„èŒƒåŒ–è·¯å¾„</span>
    <span class="hljs-keyword">const</span> normalizedPath = <span class="hljs-title function_">normalizePath</span>(file_path);

    <span class="hljs-comment">// 2. æ£€æŸ¥æƒé™</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isExternalPath</span>(normalizedPath)) {
      <span class="hljs-keyword">await</span> ctx.<span class="hljs-title function_">ask</span>({ <span class="hljs-attr">permission</span>: <span class="hljs-string">"read.external"</span>, <span class="hljs-attr">path</span>: normalizedPath });
    }

    <span class="hljs-comment">// 3. æ£€æµ‹æ–‡ä»¶ç±»å‹</span>
    <span class="hljs-keyword">const</span> fileType = <span class="hljs-title function_">detectFileType</span>(normalizedPath);

    <span class="hljs-comment">// 4. æ ¹æ®ç±»å‹è¯»å–</span>
    <span class="hljs-keyword">if</span> (fileType === <span class="hljs-string">"image"</span>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">title</span>: <span class="hljs-string">`Read image`</span>, <span class="hljs-attr">output</span>: <span class="hljs-string">"[Image]"</span>, <span class="hljs-attr">attachments</span>: [...] };
    }
    <span class="hljs-keyword">if</span> (fileType === <span class="hljs-string">"pdf"</span>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">title</span>: <span class="hljs-string">`Read PDF`</span>, <span class="hljs-attr">output</span>: <span class="hljs-title function_">extractPdfText</span>(normalizedPath) };
    }

    <span class="hljs-comment">// 5. è¯»å–æ–‡æœ¬æ–‡ä»¶</span>
    <span class="hljs-keyword">const</span> content = <span class="hljs-keyword">await</span> <span class="hljs-title function_">readFile</span>(normalizedPath, { offset, limit });

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">title</span>: <span class="hljs-string">`Read <span class="hljs-subst">${basename(normalizedPath)}</span>`</span>,
      <span class="hljs-attr">output</span>: <span class="hljs-title function_">formatWithLineNumbers</span>(content, offset),
      <span class="hljs-attr">metadata</span>: { <span class="hljs-attr">lines</span>: content.<span class="hljs-title function_">split</span>(<span class="hljs-string">'\n'</span>).<span class="hljs-property">length</span>, <span class="hljs-attr">path</span>: normalizedPath },
    };
  },
}));
</code></pre>
<h4 data-id="heading-21">Edit Tool - ç²¾ç¡®ç¼–è¾‘</h4>
<p>Edit Tool æ˜¯æœ€å¤æ‚çš„å·¥å…·ä¹‹ä¸€ï¼Œå®ƒå®ç°äº†<strong>ç²¾ç¡®çš„å­—ç¬¦ä¸²æ›¿æ¢</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title class_">Tool</span>.<span class="hljs-title function_">define</span>(<span class="hljs-string">"edit"</span>, <span class="hljs-function">() =&gt;</span> ({
  <span class="hljs-attr">description</span>: <span class="hljs-string">`Performs exact string replacements in files.
    - You must read the file before editing
    - old_string must be unique in the file
    - Use replace_all for batch replacements`</span>,

  <span class="hljs-attr">parameters</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">file_path</span>: z.<span class="hljs-title function_">string</span>(),
    <span class="hljs-attr">old_string</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"Text to replace"</span>),
    <span class="hljs-attr">new_string</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"Replacement text"</span>),
    <span class="hljs-attr">replace_all</span>: z.<span class="hljs-title function_">boolean</span>().<span class="hljs-title function_">default</span>(<span class="hljs-literal">false</span>),
  }),

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">execute</span>(<span class="hljs-params">{ file_path, old_string, new_string, replace_all }, ctx</span>) {
    <span class="hljs-comment">// 1. è¯»å–å½“å‰å†…å®¹</span>
    <span class="hljs-keyword">const</span> content = <span class="hljs-keyword">await</span> <span class="hljs-title function_">readFile</span>(file_path);

    <span class="hljs-comment">// 2. éªŒè¯ old_string å­˜åœ¨ä¸”å”¯ä¸€ï¼ˆé™¤é replace_allï¼‰</span>
    <span class="hljs-keyword">const</span> occurrences = <span class="hljs-title function_">countOccurrences</span>(content, old_string);

    <span class="hljs-keyword">if</span> (occurrences === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`String not found in file`</span>);
    }
    <span class="hljs-keyword">if</span> (occurrences &gt; <span class="hljs-number">1</span> &amp;&amp; !replace_all) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`String appears <span class="hljs-subst">${occurrences}</span> times. Use replace_all or provide more context.`</span>);
    }

    <span class="hljs-comment">// 3. æ‰§è¡Œæ›¿æ¢</span>
    <span class="hljs-keyword">const</span> newContent = replace_all
      ? content.<span class="hljs-title function_">replaceAll</span>(old_string, new_string)
      : content.<span class="hljs-title function_">replace</span>(old_string, new_string);

    <span class="hljs-comment">// 4. å†™å…¥æ–‡ä»¶</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">writeFile</span>(file_path, newContent);

    <span class="hljs-comment">// 5. ç”Ÿæˆ diff</span>
    <span class="hljs-keyword">const</span> diff = <span class="hljs-title function_">createDiff</span>(content, newContent, file_path);

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">title</span>: <span class="hljs-string">`Edit <span class="hljs-subst">${basename(file_path)}</span>`</span>,
      <span class="hljs-attr">output</span>: diff,
      <span class="hljs-attr">metadata</span>: {
        <span class="hljs-attr">replacements</span>: replace_all ? occurrences : <span class="hljs-number">1</span>,
        <span class="hljs-attr">path</span>: file_path,
      },
    };
  },
}));
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆç”¨å­—ç¬¦ä¸²æ›¿æ¢è€Œä¸æ˜¯è¡Œå·ï¼Ÿ</strong></p>
<p>è¡Œå·ç¼–è¾‘ï¼ˆ"ä¿®æ”¹ç¬¬ 42 è¡Œ"ï¼‰çœ‹ä¼¼ç®€å•ï¼Œä½†æœ‰ä¸€ä¸ªè‡´å‘½é—®é¢˜ï¼š<strong>LLM æ•°ä¸å‡†è¡Œå·</strong>ã€‚</p>
<p>å½“ AI è¯´"è¯·çœ‹ç¬¬ 42 è¡Œ"ï¼Œå®ƒå¯èƒ½å®é™…ä¸ŠæŒ‡çš„æ˜¯ç¬¬ 40 è¡Œæˆ–ç¬¬ 45 è¡Œã€‚ä½†å­—ç¬¦ä¸²åŒ¹é…æ˜¯ç²¾ç¡®çš„â€”â€”è¦ä¹ˆæ‰¾åˆ°ï¼Œè¦ä¹ˆæ‰¾ä¸åˆ°ã€‚</p>
<p>è¿™ç§è®¾è®¡è¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼š<strong>å¼ºåˆ¶ AI æä¾›ä¸Šä¸‹æ–‡</strong>ã€‚å¦‚æœæ›¿æ¢ç›®æ ‡ä¸å”¯ä¸€ï¼ŒAI å¿…é¡»æä¾›æ›´å¤šå‘¨å›´ä»£ç æ¥æ¶ˆæ­§ä¹‰ï¼Œè¿™åè€Œæé«˜äº†ç¼–è¾‘çš„å‡†ç¡®æ€§ã€‚</p>
<h4 data-id="heading-22">Bash Tool - Shell æ‰§è¡Œ</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title class_">Tool</span>.<span class="hljs-title function_">define</span>(<span class="hljs-string">"bash"</span>, <span class="hljs-function">() =&gt;</span> ({
  <span class="hljs-attr">description</span>: <span class="hljs-string">`Executes bash commands with timeout and security measures.
    - Avoid file operations, use dedicated tools instead
    - Commands timeout after 2 minutes by default
    - Output truncated at 30000 characters`</span>,

  <span class="hljs-attr">parameters</span>: z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">command</span>: z.<span class="hljs-title function_">string</span>(),
    <span class="hljs-attr">timeout</span>: z.<span class="hljs-title function_">number</span>().<span class="hljs-title function_">max</span>(<span class="hljs-number">600000</span>).<span class="hljs-title function_">optional</span>(),
    <span class="hljs-attr">run_in_background</span>: z.<span class="hljs-title function_">boolean</span>().<span class="hljs-title function_">optional</span>(),
    <span class="hljs-attr">description</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"5-10 word description of what this does"</span>),
  }),

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">execute</span>(<span class="hljs-params">{ command, timeout = <span class="hljs-number">120000</span>, run_in_background }, ctx</span>) {
    <span class="hljs-comment">// 1. å®‰å…¨æ£€æŸ¥</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">containsDangerousPatterns</span>(command)) {
      <span class="hljs-keyword">await</span> ctx.<span class="hljs-title function_">ask</span>({
        <span class="hljs-attr">permission</span>: <span class="hljs-string">"bash.dangerous"</span>,
        command,
        <span class="hljs-attr">warning</span>: <span class="hljs-string">"This command may be destructive"</span>,
      });
    }

    <span class="hljs-comment">// 2. åˆ›å»º shell è¿›ç¨‹</span>
    <span class="hljs-keyword">const</span> shell = <span class="hljs-keyword">await</span> <span class="hljs-title function_">createShell</span>({
      command,
      timeout,
      <span class="hljs-attr">cwd</span>: <span class="hljs-title function_">getWorkingDirectory</span>(),
      <span class="hljs-attr">abort</span>: ctx.<span class="hljs-property">abort</span>,
    });

    <span class="hljs-comment">// 3. åå°è¿è¡Œå¤„ç†</span>
    <span class="hljs-keyword">if</span> (run_in_background) {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">title</span>: <span class="hljs-string">`Background: <span class="hljs-subst">${description}</span>`</span>,
        <span class="hljs-attr">output</span>: <span class="hljs-string">`Started in background. Task ID: <span class="hljs-subst">${shell.id}</span>`</span>,
        <span class="hljs-attr">metadata</span>: { <span class="hljs-attr">taskId</span>: shell.<span class="hljs-property">id</span>, <span class="hljs-attr">background</span>: <span class="hljs-literal">true</span> },
      };
    }

    <span class="hljs-comment">// 4. ç­‰å¾…æ‰§è¡Œå®Œæˆ</span>
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> shell.<span class="hljs-title function_">wait</span>();

    <span class="hljs-comment">// 5. æˆªæ–­è¿‡é•¿è¾“å‡º</span>
    <span class="hljs-keyword">const</span> output = <span class="hljs-title function_">truncate</span>(result.<span class="hljs-property">output</span>, <span class="hljs-number">30000</span>);

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">title</span>: description || <span class="hljs-string">`Run: <span class="hljs-subst">${command.slice(<span class="hljs-number">0</span>, <span class="hljs-number">50</span>)}</span>`</span>,
      <span class="hljs-attr">output</span>: <span class="hljs-string">`Exit code: <span class="hljs-subst">${result.exitCode}</span>\n\n<span class="hljs-subst">${output}</span>`</span>,
      <span class="hljs-attr">metadata</span>: { <span class="hljs-attr">exitCode</span>: result.<span class="hljs-property">exitCode</span>, <span class="hljs-attr">duration</span>: result.<span class="hljs-property">duration</span> },
    };
  },
}));
</code></pre>
<h3 data-id="heading-23">4.4 å·¥å…·æ³¨å†Œè¡¨</h3>
<p>æ‰€æœ‰å·¥å…·é€šè¿‡ <code>ToolRegistry</code> ç»Ÿä¸€ç®¡ç†ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">ToolRegistry</span> {
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">tools</span>(<span class="hljs-params">providerID: <span class="hljs-built_in">string</span>, agent?: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">Tool</span>[] {
    <span class="hljs-keyword">const</span> builtinTools = [
      <span class="hljs-title class_">InvalidTool</span>,      <span class="hljs-comment">// å¤„ç†æ— æ•ˆå·¥å…·è°ƒç”¨</span>
      <span class="hljs-title class_">BashTool</span>,         <span class="hljs-comment">// Shell æ‰§è¡Œ</span>
      <span class="hljs-title class_">ReadTool</span>,         <span class="hljs-comment">// æ–‡ä»¶è¯»å–</span>
      <span class="hljs-title class_">GlobTool</span>,         <span class="hljs-comment">// æ–‡ä»¶åŒ¹é…</span>
      <span class="hljs-title class_">GrepTool</span>,         <span class="hljs-comment">// ä»£ç æœç´¢</span>
      <span class="hljs-title class_">EditTool</span>,         <span class="hljs-comment">// æ–‡ä»¶ç¼–è¾‘</span>
      <span class="hljs-title class_">WriteTool</span>,        <span class="hljs-comment">// æ–‡ä»¶å†™å…¥</span>
      <span class="hljs-title class_">TaskTool</span>,         <span class="hljs-comment">// å­ä»»åŠ¡</span>
      <span class="hljs-title class_">WebFetchTool</span>,     <span class="hljs-comment">// ç½‘é¡µè·å–</span>
      <span class="hljs-title class_">TodoReadTool</span>,     <span class="hljs-comment">// ä»»åŠ¡åˆ—è¡¨è¯»å–</span>
      <span class="hljs-title class_">TodoWriteTool</span>,    <span class="hljs-comment">// ä»»åŠ¡åˆ—è¡¨å†™å…¥</span>
      <span class="hljs-title class_">WebSearchTool</span>,    <span class="hljs-comment">// ç½‘é¡µæœç´¢</span>
      <span class="hljs-title class_">SkillTool</span>,        <span class="hljs-comment">// æŠ€èƒ½è°ƒç”¨</span>
    ];

    <span class="hljs-comment">// å¯é€‰å·¥å…·</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Config</span>.<span class="hljs-title function_">get</span>().<span class="hljs-property">experimental</span>?.<span class="hljs-property">lsp</span>) {
      builtinTools.<span class="hljs-title function_">push</span>(<span class="hljs-title class_">LSPTool</span>);  <span class="hljs-comment">// Language Server Protocol</span>
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Config</span>.<span class="hljs-title function_">get</span>().<span class="hljs-property">experimental</span>?.<span class="hljs-property">batch</span>) {
      builtinTools.<span class="hljs-title function_">push</span>(<span class="hljs-title class_">BatchTool</span>);  <span class="hljs-comment">// æ‰¹é‡æ“ä½œ</span>
    }

    <span class="hljs-comment">// è‡ªå®šä¹‰å·¥å…·</span>
    <span class="hljs-keyword">const</span> customTools = <span class="hljs-title function_">loadCustomTools</span>(<span class="hljs-string">"~/.opencode/tool/"</span>);

    <span class="hljs-comment">// MCP å·¥å…·</span>
    <span class="hljs-keyword">const</span> mcpTools = <span class="hljs-variable constant_">MCP</span>.<span class="hljs-title function_">tools</span>();

    <span class="hljs-keyword">return</span> [...builtinTools, ...customTools, ...mcpTools];
  }
}
</code></pre>
<h3 data-id="heading-24">4.5 MCPï¼šå·¥å…·çš„æ— é™æ‰©å±•</h3>
<p><strong>Model Context Protocol (MCP)</strong> æ˜¯ä¸€ä¸ªå¼€æ”¾åè®®ï¼Œå…è®¸å¤–éƒ¨æœåŠ¡ä¸º AI æä¾›å·¥å…·å’Œèµ„æºã€‚OpenCode å®Œæ•´æ”¯æŒ MCPï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    subgraph "OpenCode"
        Agent[Agent]
        MCPClient[MCP Client]
    end

    subgraph "MCP Servers"
        GitHub[GitHub MCP]
        Database[Database MCP]
        Notion[Notion MCP]
        Custom[Custom MCP]
    end

    Agent --&gt; MCPClient
    MCPClient --&gt; GitHub
    MCPClient --&gt; Database
    MCPClient --&gt; Notion
    MCPClient --&gt; Custom

    GitHub -.-&gt;|tools: pr, issue, ...| MCPClient
    Database -.-&gt;|tools: query, insert, ...| MCPClient
    Notion -.-&gt;|resources: pages, databases| MCPClient
    Custom -.-&gt;|custom tools| MCPClient
</code></pre>
<p>é…ç½® MCP æœåŠ¡å™¨ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// .opencode/config.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcp"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"servers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"github"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npx"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"-y"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"@modelcontextprotocol/server-github"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"GITHUB_TOKEN"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"..."</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"postgres"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npx"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"-y"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"@modelcontextprotocol/server-postgres"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"DATABASE_URL"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"..."</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™æ ·ï¼ŒAI å°±èƒ½ç›´æ¥æ“ä½œ GitHub PRã€æŸ¥è¯¢æ•°æ®åº“ï¼Œç”šè‡³æ›´æ–° Notion æ–‡æ¡£â€”â€”è€Œè¿™äº›èƒ½åŠ›å®Œå…¨é€šè¿‡é…ç½®æ·»åŠ ï¼Œæ— éœ€ä¿®æ”¹ä»£ç ã€‚</p>
<hr/>
<h2 data-id="heading-25">ç¬¬äº”ç« ï¼šProvider æŠ½è±¡å±‚ - ä¸‡ç‰©çš†å¯ LLM</h2>
<h3 data-id="heading-26">5.1 å¤š Provider çš„æŒ‘æˆ˜</h3>
<p>ç°åœ¨å¸‚é¢ä¸Šæœ‰å¤ªå¤š LLM æä¾›å•†äº†ï¼š</p>
<ul>
<li>Anthropic (Claude)</li>
<li>OpenAI (GPT-4, o1)</li>
<li>Google (Gemini, Vertex AI)</li>
<li>Azure OpenAI</li>
<li>AWS Bedrock</li>
<li>Groq, Mistral, Cohere...</li>
</ul>
<p>æ¯ä¸ªæä¾›å•†çš„ API éƒ½ç•¥æœ‰ä¸åŒï¼šä¸åŒçš„è®¤è¯æ–¹å¼ã€ä¸åŒçš„è¯·æ±‚æ ¼å¼ã€ä¸åŒçš„ streaming å®ç°ã€ä¸åŒçš„é”™è¯¯å¤„ç†...</p>
<p>OpenCode çš„ Provider æŠ½è±¡å±‚è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 data-id="heading-27">5.2 ç»Ÿä¸€çš„ Provider æ¥å£</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Provider</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;

  <span class="hljs-comment">// è®¤è¯</span>
  <span class="hljs-title function_">getApiKey</span>(): <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>;

  <span class="hljs-comment">// æ¨¡å‹åˆ—è¡¨</span>
  <span class="hljs-title function_">models</span>(): <span class="hljs-title class_">Model</span>[];

  <span class="hljs-comment">// è·å–è¯­è¨€æ¨¡å‹å®ä¾‹</span>
  <span class="hljs-title function_">languageModel</span>(<span class="hljs-attr">modelID</span>: <span class="hljs-built_in">string</span>, options?: <span class="hljs-title class_">ModelOptions</span>): <span class="hljs-title class_">LanguageModel</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Model</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">provider</span>: <span class="hljs-built_in">string</span>;

  <span class="hljs-comment">// èƒ½åŠ›</span>
  <span class="hljs-attr">context</span>: <span class="hljs-built_in">number</span>;          <span class="hljs-comment">// ä¸Šä¸‹æ–‡çª—å£å¤§å°</span>
  maxOutput?: <span class="hljs-built_in">number</span>;       <span class="hljs-comment">// æœ€å¤§è¾“å‡ºé•¿åº¦</span>
  supportsImages?: <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// æ”¯æŒå›¾åƒè¾“å…¥</span>
  supportsToolUse?: <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// æ”¯æŒå·¥å…·è°ƒç”¨</span>
  supportsReasoning?: <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// æ”¯æŒæ¨ç†ï¼ˆå¦‚ o1ï¼‰</span>

  <span class="hljs-comment">// æˆæœ¬</span>
  pricing?: {
    <span class="hljs-attr">input</span>: <span class="hljs-built_in">number</span>;   <span class="hljs-comment">// $ per 1M tokens</span>
    <span class="hljs-attr">output</span>: <span class="hljs-built_in">number</span>;
    cache?: { <span class="hljs-attr">read</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">write</span>: <span class="hljs-built_in">number</span> };
  };

  <span class="hljs-comment">// é…ç½®</span>
  options?: <span class="hljs-title class_">ModelOptions</span>;
}
</code></pre>
<h3 data-id="heading-28">5.3 Provider æ³¨å†Œè¡¨</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "Provider Registry"
        Anthropic[Anthropic Provider]
        OpenAI[OpenAI Provider]
        Google[Google Provider]
        Azure[Azure Provider]
        Groq[Groq Provider]
        More[... 15+ more]
    end

    subgraph "AI SDK"
        SDK[Vercel AI SDK]
    end

    subgraph "Application"
        Session[Session]
        LLM[LLM Module]
    end

    Session --&gt; LLM
    LLM --&gt; SDK
    SDK --&gt; Anthropic
    SDK --&gt; OpenAI
    SDK --&gt; Google
    SDK --&gt; Azure
    SDK --&gt; Groq
    SDK --&gt; More
</code></pre>
<p>OpenCode ä½¿ç”¨ <strong>Vercel AI SDK</strong> ä½œä¸ºåº•å±‚ï¼Œå®ƒæä¾›äº†ç»Ÿä¸€çš„ streaming æ¥å£ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { streamText } <span class="hljs-keyword">from</span> <span class="hljs-string">"ai"</span>;
<span class="hljs-keyword">import</span> { anthropic } <span class="hljs-keyword">from</span> <span class="hljs-string">"@ai-sdk/anthropic"</span>;
<span class="hljs-keyword">import</span> { openai } <span class="hljs-keyword">from</span> <span class="hljs-string">"@ai-sdk/openai"</span>;
<span class="hljs-keyword">import</span> { google } <span class="hljs-keyword">from</span> <span class="hljs-string">"@ai-sdk/google"</span>;

<span class="hljs-comment">// æ— è®ºä½¿ç”¨å“ªä¸ª providerï¼Œè°ƒç”¨æ–¹å¼éƒ½ä¸€æ ·</span>
<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">streamText</span>({
  <span class="hljs-attr">model</span>: <span class="hljs-title function_">anthropic</span>(<span class="hljs-string">"claude-3-5-sonnet"</span>),  <span class="hljs-comment">// æˆ– openai("gpt-4"), google("gemini-pro")</span>
  <span class="hljs-attr">messages</span>: [...],
  <span class="hljs-attr">tools</span>: {...},
});

<span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> chunk <span class="hljs-keyword">of</span> result.<span class="hljs-property">fullStream</span>) {
  <span class="hljs-comment">// ç»Ÿä¸€çš„æµå¼å¤„ç†</span>
}
</code></pre>
<h3 data-id="heading-29">5.4 æ™ºèƒ½æ¨¡å‹é€‰æ‹©</h3>
<p>OpenCode ä¼šæ ¹æ®ä»»åŠ¡è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¸»ä»»åŠ¡ï¼šä½¿ç”¨é…ç½®çš„ä¸»æ¨¡å‹</span>
<span class="hljs-keyword">const</span> mainModel = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Provider</span>.<span class="hljs-title function_">getModel</span>(config.<span class="hljs-property">model</span>);

<span class="hljs-comment">// å°ä»»åŠ¡ï¼ˆæ ‡é¢˜ã€æ‘˜è¦ï¼‰ï¼šä½¿ç”¨å°æ¨¡å‹èŠ‚çœæˆæœ¬</span>
<span class="hljs-keyword">const</span> smallModel = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Provider</span>.<span class="hljs-title function_">getSmallModel</span>(mainModel);

<span class="hljs-comment">// ä¸åŒä»»åŠ¡ä½¿ç”¨ä¸åŒæ¨¡å‹</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">generateTitle</span>(<span class="hljs-params">sessionID: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-variable constant_">LLM</span>.<span class="hljs-title function_">stream</span>({
    <span class="hljs-attr">model</span>: smallModel,  <span class="hljs-comment">// ä½¿ç”¨ä¾¿å®œçš„å°æ¨¡å‹</span>
    <span class="hljs-attr">small</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">agent</span>: <span class="hljs-string">"title"</span>,
    <span class="hljs-comment">// ...</span>
  });
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">executeMainTask</span>(<span class="hljs-params">sessionID: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-variable constant_">LLM</span>.<span class="hljs-title function_">stream</span>({
    <span class="hljs-attr">model</span>: mainModel,   <span class="hljs-comment">// ä½¿ç”¨å¼ºå¤§çš„ä¸»æ¨¡å‹</span>
    <span class="hljs-attr">agent</span>: <span class="hljs-string">"build"</span>,
    <span class="hljs-comment">// ...</span>
  });
}
</code></pre>
<h3 data-id="heading-30">5.5 Provider ç‰¹å®šä¼˜åŒ–</h3>
<p>ä¸åŒçš„ Provider æœ‰ä¸åŒçš„æœ€ä½³å®è·µï¼ŒOpenCode å¯¹æ­¤è¿›è¡Œäº†ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Anthropic ç‰¹å®šçš„ System Prompt</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PROMPT_ANTHROPIC</span> = <span class="hljs-string">`
You are Claude, made by Anthropic.
You have access to a set of tools...
`</span>;

<span class="hljs-comment">// OpenAI ç‰¹å®šçš„ System Prompt</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PROMPT_OPENAI</span> = <span class="hljs-string">`
You are a helpful assistant with access to tools...
`</span>;

<span class="hljs-comment">// æ ¹æ® Provider é€‰æ‹©åˆé€‚çš„ prompt</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getSystemPrompt</span>(<span class="hljs-params">providerID: <span class="hljs-built_in">string</span>, model: Model</span>) {
  <span class="hljs-keyword">if</span> (providerID === <span class="hljs-string">"anthropic"</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable constant_">PROMPT_ANTHROPIC</span>;
  }
  <span class="hljs-keyword">if</span> (providerID === <span class="hljs-string">"openai"</span> &amp;&amp; model.<span class="hljs-property">supportsReasoning</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable constant_">PROMPT_OPENAI_REASONING</span>;  <span class="hljs-comment">// o1 æ¨¡å‹çš„ç‰¹æ®Šå¤„ç†</span>
  }
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<p><strong>Prompt Caching ä¼˜åŒ–</strong></p>
<p>Anthropic æ”¯æŒ Prompt Cachingï¼Œå¯ä»¥ç¼“å­˜ System Prompt ä»¥å‡å°‘ token æ¶ˆè€—ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// System prompt åˆ†æˆä¸¤éƒ¨åˆ†</span>
<span class="hljs-keyword">const</span> system = [
  header,   <span class="hljs-comment">// [0] ä¸å˜çš„å¤´éƒ¨ - å¯ç¼“å­˜</span>
  body,     <span class="hljs-comment">// [1] åŠ¨æ€çš„æ­£æ–‡</span>
];

<span class="hljs-comment">// å¦‚æœå¤´éƒ¨ä¸å˜ï¼ŒAPI ä¼šä½¿ç”¨ç¼“å­˜</span>
<span class="hljs-comment">// æ˜¾è‘—å‡å°‘ input token æˆæœ¬</span>
</code></pre>
<hr/>
<h2 data-id="heading-31">ç¬¬å…­ç« ï¼šä¸Šä¸‹æ–‡å‹ç¼© - è®°å¿†çš„è‰ºæœ¯</h2>
<h3 data-id="heading-32">6.1 é•¿å¯¹è¯çš„å›°å¢ƒ</h3>
<p>LLM æœ‰ä¸€ä¸ªæ ¹æœ¬é™åˆ¶ï¼š<strong>ä¸Šä¸‹æ–‡çª—å£æ˜¯æœ‰é™çš„</strong>ã€‚</p>
<p>å³ä½¿æ˜¯ Claude çš„ 200K token çª—å£ï¼Œåœ¨å¤æ‚çš„ç¼–ç¨‹ä»»åŠ¡ä¸­ä¹Ÿä¼šå¾ˆå¿«è¢«å¡«æ»¡ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">ç”¨æˆ·é—®é¢˜              â†’ <span class="hljs-number">500</span> tokens
ä»£ç æ–‡ä»¶ <span class="hljs-number">1</span> (<span class="hljs-number">500</span> è¡Œ)   â†’ <span class="hljs-number">8</span>,<span class="hljs-number">000</span> tokens
ä»£ç æ–‡ä»¶ <span class="hljs-number">2</span> (<span class="hljs-number">300</span> è¡Œ)   â†’ <span class="hljs-number">5</span>,<span class="hljs-number">000</span> tokens
AI æ€è€ƒ + å›å¤        â†’ <span class="hljs-number">3</span>,<span class="hljs-number">000</span> tokens
å·¥å…·è°ƒç”¨ç»“æœ <span class="hljs-number">1</span>        â†’ <span class="hljs-number">2</span>,<span class="hljs-number">000</span> tokens
å·¥å…·è°ƒç”¨ç»“æœ <span class="hljs-number">2</span>        â†’ <span class="hljs-number">10</span>,<span class="hljs-number">000</span> tokens
...
ç¬¬ <span class="hljs-number">10</span> è½®å¯¹è¯å        â†’ <span class="hljs-number">150</span>,<span class="hljs-number">000</span> tokens ğŸ˜±
</code></pre>
<p>å½“ä¸Šä¸‹æ–‡æ¥è¿‘é™åˆ¶æ—¶ï¼Œä¼šå‘ç”Ÿä¸¤ä»¶åäº‹ï¼š</p>
<ol>
<li><strong>æ€§èƒ½ä¸‹é™</strong>ï¼šå¤„ç†æ—¶é—´å˜é•¿ï¼Œè´¨é‡ä¸‹é™</li>
<li><strong>å¤±è´¥é£é™©</strong>ï¼šè¶…è¿‡é™åˆ¶ä¼šç›´æ¥æŠ¥é”™</li>
</ol>
<h3 data-id="heading-33">6.2 OpenCode çš„å‹ç¼©ç­–ç•¥</h3>
<p>OpenCode é‡‡ç”¨äº†<strong>å¤šå±‚å‹ç¼©ç­–ç•¥</strong>ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "Level 1: è£å‰ª"
        Prune[å·¥å…·è¾“å‡ºè£å‰ª&lt;br/&gt;ç§»é™¤æ—§çš„å¤§è¾“å‡º]
    end

    subgraph "Level 2: æ‘˜è¦"
        Compact[ä¸Šä¸‹æ–‡å‹ç¼©&lt;br/&gt;ç”Ÿæˆå¯¹è¯æ‘˜è¦]
    end

    subgraph "Level 3: è¿‡æ»¤"
        Filter[æ¶ˆæ¯è¿‡æ»¤&lt;br/&gt;è·³è¿‡å·²å‹ç¼©éƒ¨åˆ†]
    end

    Overflow{Token æº¢å‡º?} --&gt; |Yes| Prune
    Prune --&gt; |ä»ç„¶æº¢å‡º| Compact
    Compact --&gt; Filter
    Filter --&gt; Continue[ç»§ç»­å¯¹è¯]

    Overflow --&gt; |No| Continue
</code></pre>
<h4 data-id="heading-34">å±‚çº§ 1ï¼šå·¥å…·è¾“å‡ºè£å‰ª (Prune)</h4>
<p>æ—§çš„å·¥å…·è¾“å‡ºå¾€å¾€å ç”¨å¤§é‡ç©ºé—´ä½†å·²ä¸å†éœ€è¦ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">prune</span>(<span class="hljs-params">sessionID: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> messages = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Session</span>.<span class="hljs-title function_">messages</span>(sessionID);
  <span class="hljs-keyword">let</span> protectedTokens = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PROTECT_THRESHOLD</span> = <span class="hljs-number">40_000</span>;  <span class="hljs-comment">// ä¿æŠ¤æœ€è¿‘ 40K tokens</span>
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PRUNE_THRESHOLD</span> = <span class="hljs-number">20_000</span>;    <span class="hljs-comment">// åªè£å‰ªè¶…è¿‡ 20K çš„è¾“å‡º</span>

  <span class="hljs-comment">// ä»åå¾€å‰æ‰«æ</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = messages.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
    <span class="hljs-keyword">const</span> msg = messages[i];

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> part <span class="hljs-keyword">of</span> msg.<span class="hljs-property">parts</span>) {
      <span class="hljs-keyword">if</span> (part.<span class="hljs-property">type</span> === <span class="hljs-string">"tool"</span> &amp;&amp; part.<span class="hljs-property">state</span>.<span class="hljs-property">status</span> === <span class="hljs-string">"completed"</span>) {
        <span class="hljs-keyword">const</span> outputSize = <span class="hljs-title function_">estimateTokens</span>(part.<span class="hljs-property">state</span>.<span class="hljs-property">output</span>);

        <span class="hljs-comment">// ä¿æŠ¤æœ€è¿‘çš„å·¥å…·è°ƒç”¨</span>
        <span class="hljs-keyword">if</span> (protectedTokens &lt; <span class="hljs-variable constant_">PROTECT_THRESHOLD</span>) {
          protectedTokens += outputSize;
          <span class="hljs-keyword">continue</span>;
        }

        <span class="hljs-comment">// è£å‰ªå¤§è¾“å‡º</span>
        <span class="hljs-keyword">if</span> (outputSize &gt; <span class="hljs-variable constant_">PRUNE_THRESHOLD</span>) {
          part.<span class="hljs-property">state</span>.<span class="hljs-property">output</span> = <span class="hljs-string">"[TOOL OUTPUT PRUNED]"</span>;
          part.<span class="hljs-property">state</span>.<span class="hljs-property">time</span>.<span class="hljs-property">compacted</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
        }
      }
    }
  }
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆä¸å…¨éƒ¨è£å‰ªï¼Ÿ</strong></p>
<p>AI åœ¨æ€è€ƒæ—¶éœ€è¦å‚è€ƒæœ€è¿‘çš„å·¥å…·è¾“å‡ºã€‚å¦‚æœæŠŠæ‰€æœ‰è¾“å‡ºéƒ½è£æ‰ï¼Œå®ƒä¼šå¤±å»ä¸Šä¸‹æ–‡ï¼Œå¼€å§‹é‡å¤ç›¸åŒçš„å·¥å…·è°ƒç”¨ï¼ˆ"è®©æˆ‘å†è¯»ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶..."ï¼‰ã€‚</p>
<p>40K tokens çš„ä¿æŠ¤åŒºæ˜¯ä¸€ä¸ªå¹³è¡¡ç‚¹ï¼šè¶³å¤Ÿ AI å·¥ä½œï¼Œåˆä¸ä¼šå ç”¨å¤ªå¤šç©ºé—´ã€‚</p>
<h4 data-id="heading-35">å±‚çº§ 2ï¼šä¸Šä¸‹æ–‡å‹ç¼© (Compaction)</h4>
<p>å½“è£å‰ªä¸å¤Ÿæ—¶ï¼Œéœ€è¦æ›´æ¿€è¿›çš„å‹ç¼©â€”â€”<strong>ç”Ÿæˆæ‘˜è¦</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">compact</span>(<span class="hljs-params">sessionID: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-comment">// 1. åˆ›å»ºå‹ç¼© Agent æ¶ˆæ¯</span>
  <span class="hljs-keyword">const</span> compactionMessage = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Session</span>.<span class="hljs-title function_">createAssistant</span>({
    sessionID,
    <span class="hljs-attr">agent</span>: <span class="hljs-string">"compaction"</span>,
    <span class="hljs-attr">mode</span>: <span class="hljs-string">"compact"</span>,
  });

  <span class="hljs-comment">// 2. æ„å»ºå‹ç¼©æç¤º</span>
  <span class="hljs-keyword">const</span> compactionPrompt = <span class="hljs-string">`
You are a conversation summarizer. Your task is to create a comprehensive
summary of the conversation so far that preserves all important context
needed to continue the task.

Include:
- What the user originally asked
- What actions have been taken
- Current state of the task
- Any important findings or decisions

The summary will replace the conversation history, so it must be complete.
`</span>;

  <span class="hljs-comment">// 3. è°ƒç”¨ LLM ç”Ÿæˆæ‘˜è¦</span>
  <span class="hljs-keyword">const</span> summary = <span class="hljs-keyword">await</span> <span class="hljs-variable constant_">LLM</span>.<span class="hljs-title function_">stream</span>({
    <span class="hljs-attr">agent</span>: <span class="hljs-string">"compaction"</span>,
    <span class="hljs-attr">messages</span>: <span class="hljs-title function_">getAllMessages</span>(sessionID),
    <span class="hljs-attr">system</span>: compactionPrompt,
  });

  <span class="hljs-comment">// 4. æ ‡è®°å‹ç¼©ç‚¹</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">Session</span>.<span class="hljs-title function_">updatePart</span>(compactionMessage.<span class="hljs-property">id</span>, {
    <span class="hljs-attr">type</span>: <span class="hljs-string">"compaction"</span>,
  });

  <span class="hljs-comment">// 5. åˆ›å»ºåˆæˆç”¨æˆ·æ¶ˆæ¯ç»§ç»­å¯¹è¯</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">Session</span>.<span class="hljs-title function_">createSyntheticUser</span>({
    sessionID,
    <span class="hljs-attr">content</span>: <span class="hljs-string">"Please continue with the task based on the summary above."</span>,
  });
}
</code></pre>
<p>å‹ç¼©åçš„å¯¹è¯å†å²ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">[å‹ç¼©å‰ - <span class="hljs-number">150</span>K tokens]
<span class="hljs-symbol">User:</span> å¸®æˆ‘é‡æ„ç”¨æˆ·æ¨¡å—
<span class="hljs-symbol">AI:</span> è®©æˆ‘å…ˆçœ‹çœ‹ä»£ç ... [å·¥å…·è°ƒç”¨ x <span class="hljs-number">20</span>]
<span class="hljs-symbol">User:</span> é‚£ä¸ªå‡½æ•°æœ‰ bug
<span class="hljs-symbol">AI:</span> æˆ‘æ¥ä¿®å¤... [å·¥å…·è°ƒç”¨ x <span class="hljs-number">15</span>]
<span class="hljs-symbol">User:</span> è¿˜éœ€è¦åŠ æµ‹è¯•
<span class="hljs-symbol">AI:</span> å¥½çš„... [å·¥å…·è°ƒç”¨ x <span class="hljs-number">10</span>]

[å‹ç¼©å - <span class="hljs-number">5</span>K tokens]
AI (compaction):
## ä»»åŠ¡æ‘˜è¦
ç”¨æˆ·è¯·æ±‚é‡æ„ç”¨æˆ·æ¨¡å—ã€‚å·²å®Œæˆï¼š
<span class="hljs-number">1</span>. åˆ†æäº† src/user/ ä¸‹çš„æ‰€æœ‰æ–‡ä»¶
<span class="hljs-number">2</span>. é‡æ„äº† UserServiceï¼Œå°†å…¶æ‹†åˆ†ä¸ºä¸‰ä¸ªå°ç±»
<span class="hljs-number">3</span>. ä¿®å¤äº† getUserById çš„ç©ºæŒ‡é’ˆ bug
<span class="hljs-number">4</span>. æ·»åŠ äº†å•å…ƒæµ‹è¯•ï¼Œè¦†ç›–ç‡è¾¾ <span class="hljs-number">85%</span>

å½“å‰çŠ¶æ€ï¼šåŸºæœ¬å®Œæˆï¼Œç”¨æˆ·å¯èƒ½è¿˜æœ‰åç»­éœ€æ±‚ã€‚

User (synthetic): Please <span class="hljs-keyword">continue</span> <span class="hljs-keyword">with</span> the task based <span class="hljs-keyword">on</span> the summary above.
</code></pre>
<h4 data-id="heading-36">å±‚çº§ 3ï¼šæ¶ˆæ¯è¿‡æ»¤</h4>
<p>åœ¨æ„å»º LLM è¾“å…¥æ—¶ï¼Œä¼šè‡ªåŠ¨è·³è¿‡å·²å‹ç¼©éƒ¨åˆ†ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">filterCompacted</span>(<span class="hljs-params">messages: Message[]</span>): <span class="hljs-title class_">Message</span>[] {
  <span class="hljs-comment">// æ‰¾åˆ°æœ€åä¸€ä¸ªå‹ç¼©æ ‡è®°</span>
  <span class="hljs-keyword">const</span> lastCompactionIndex = messages.<span class="hljs-title function_">findLastIndex</span>(
    <span class="hljs-function"><span class="hljs-params">msg</span> =&gt;</span> msg.<span class="hljs-property">parts</span>.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p.<span class="hljs-property">type</span> === <span class="hljs-string">"compaction"</span>)
  );

  <span class="hljs-keyword">if</span> (lastCompactionIndex === -<span class="hljs-number">1</span>) {
    <span class="hljs-keyword">return</span> messages;  <span class="hljs-comment">// æ²¡æœ‰å‹ç¼©ï¼Œè¿”å›å…¨éƒ¨</span>
  }

  <span class="hljs-comment">// åªè¿”å›å‹ç¼©æ ‡è®°ä¹‹åçš„æ¶ˆæ¯</span>
  <span class="hljs-keyword">return</span> messages.<span class="hljs-title function_">slice</span>(lastCompactionIndex);
}
</code></pre>
<h3 data-id="heading-37">6.3 æº¢å‡ºæ£€æµ‹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">isOverflow</span>(<span class="hljs-params">model: Model, messages: Message[]</span>): <span class="hljs-built_in">boolean</span> {
  <span class="hljs-keyword">const</span> contextLimit = model.<span class="hljs-property">context</span>;
  <span class="hljs-keyword">const</span> outputReserve = model.<span class="hljs-property">maxOutput</span> || <span class="hljs-number">8192</span>;
  <span class="hljs-keyword">const</span> currentTokens = <span class="hljs-title function_">estimateTokens</span>(messages);

  <span class="hljs-comment">// ç•™å‡ºè¶³å¤Ÿçš„è¾“å‡ºç©ºé—´</span>
  <span class="hljs-keyword">return</span> currentTokens &gt; contextLimit - outputReserve;
}
</code></pre>
<p>è¿™ä¸ªæ£€æŸ¥åœ¨æ¯æ¬¡ LLM è°ƒç”¨å‰æ‰§è¡Œã€‚ä¸€æ—¦æ£€æµ‹åˆ°æº¢å‡ºé£é™©ï¼Œä¼šç«‹å³è§¦å‘å‹ç¼©æµç¨‹ã€‚</p>
<hr/>
<h2 data-id="heading-38">ç¬¬ä¸ƒç« ï¼šå®‰å…¨ä¸æƒé™ - ä¿¡ä»»ä½†è¦éªŒè¯</h2>
<h3 data-id="heading-39">7.1 ä¸ºä»€ä¹ˆéœ€è¦æƒé™ç³»ç»Ÿï¼Ÿ</h3>
<p>AI Agent æ‹¥æœ‰å¼ºå¤§çš„èƒ½åŠ›ï¼Œä½†"èƒ½åŠ›è¶Šå¤§ï¼Œè´£ä»»è¶Šå¤§"ã€‚æƒ³è±¡ä¸€ä¸‹è¿™äº›åœºæ™¯ï¼š</p>
<ul>
<li>AI æ‰§è¡Œ <code>rm -rf /</code> ä¼šæ€æ ·ï¼Ÿ</li>
<li>AI è¯»å– <code>~/.ssh/id_rsa</code> ä¼šæ€æ ·ï¼Ÿ</li>
<li>AI å‘å¤–éƒ¨æœåŠ¡å‘é€ä½ çš„ä»£ç ä¼šæ€æ ·ï¼Ÿ</li>
</ul>
<p>æ²¡æœ‰æƒé™ç³»ç»Ÿï¼Œè¿™äº›éƒ½å¯èƒ½å‘ç”Ÿã€‚OpenCode å®ç°äº†<strong>ç»†ç²’åº¦çš„æƒé™æ§åˆ¶</strong>ã€‚</p>
<h3 data-id="heading-40">7.2 æƒé™æ¨¡å‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "Permission Sources"
        Agent[Agent æƒé™&lt;br/&gt;agent.permission]
        Session[Session æƒé™&lt;br/&gt;session.permission]
        Config[å…¨å±€é…ç½®&lt;br/&gt;config.permission]
    end

    subgraph "Permission Check"
        Merge[æƒé™åˆå¹¶]
        Check[æƒé™æ£€æŸ¥]
        Ask[ç”¨æˆ·è¯¢é—®]
    end

    subgraph "Decision"
        Allow[å…è®¸æ‰§è¡Œ]
        Deny[æ‹’ç»æ‰§è¡Œ]
        Remember[è®°ä½é€‰æ‹©]
    end

    Agent --&gt; Merge
    Session --&gt; Merge
    Config --&gt; Merge
    Merge --&gt; Check
    Check --&gt; |æ˜ç¡®å…è®¸| Allow
    Check --&gt; |æ˜ç¡®æ‹’ç»| Deny
    Check --&gt; |éœ€è¦ç¡®è®¤| Ask
    Ask --&gt; |ç”¨æˆ·å…è®¸| Allow
    Ask --&gt; |ç”¨æˆ·æ‹’ç»| Deny
    Ask --&gt; |è®°ä½é€‰æ‹©| Remember
    Remember --&gt; Allow
    Remember --&gt; Deny
</code></pre>
<h3 data-id="heading-41">7.3 æƒé™è§„åˆ™å®šä¹‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">PermissionRule</span> {
  <span class="hljs-comment">// åŒ¹é…æ¡ä»¶</span>
  tool?: <span class="hljs-built_in">string</span>;           <span class="hljs-comment">// å·¥å…·ååŒ¹é…</span>
  path?: <span class="hljs-built_in">string</span> | <span class="hljs-title class_">RegExp</span>;  <span class="hljs-comment">// è·¯å¾„åŒ¹é…</span>
  command?: <span class="hljs-built_in">string</span> | <span class="hljs-title class_">RegExp</span>; <span class="hljs-comment">// å‘½ä»¤åŒ¹é…</span>

  <span class="hljs-comment">// å†³ç­–</span>
  allow?: <span class="hljs-built_in">boolean</span>;         <span class="hljs-comment">// å…è®¸</span>
  deny?: <span class="hljs-built_in">boolean</span>;          <span class="hljs-comment">// æ‹’ç»</span>
  ask?: <span class="hljs-built_in">boolean</span>;           <span class="hljs-comment">// è¯¢é—®ç”¨æˆ·</span>

  <span class="hljs-comment">// è®°å¿†</span>
  always?: <span class="hljs-built_in">boolean</span>;        <span class="hljs-comment">// è®°ä½è¿™ä¸ªé€‰æ‹©</span>
}

<span class="hljs-comment">// ç¤ºä¾‹é…ç½®</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">permissionRules</span>: <span class="hljs-title class_">PermissionRule</span>[] = [
  <span class="hljs-comment">// å…è®¸è¯»å–é¡¹ç›®å†…æ–‡ä»¶</span>
  { <span class="hljs-attr">tool</span>: <span class="hljs-string">"read"</span>, <span class="hljs-attr">path</span>: <span class="hljs-regexp">/^\/project\//</span>, <span class="hljs-attr">allow</span>: <span class="hljs-literal">true</span> },

  <span class="hljs-comment">// æ‹’ç»è¯»å–ç§é’¥</span>
  { <span class="hljs-attr">tool</span>: <span class="hljs-string">"read"</span>, <span class="hljs-attr">path</span>: <span class="hljs-regexp">/\.ssh|\.env|password/</span>, <span class="hljs-attr">deny</span>: <span class="hljs-literal">true</span> },

  <span class="hljs-comment">// å±é™©å‘½ä»¤éœ€è¦ç¡®è®¤</span>
  { <span class="hljs-attr">tool</span>: <span class="hljs-string">"bash"</span>, <span class="hljs-attr">command</span>: <span class="hljs-regexp">/rm|sudo|chmod|curl/</span>, <span class="hljs-attr">ask</span>: <span class="hljs-literal">true</span> },

  <span class="hljs-comment">// å¤–éƒ¨è·¯å¾„éœ€è¦ç¡®è®¤</span>
  { <span class="hljs-attr">tool</span>: <span class="hljs-string">"write"</span>, <span class="hljs-attr">path</span>: <span class="hljs-regexp">/^(?!\/project\/)/</span>, <span class="hljs-attr">ask</span>: <span class="hljs-literal">true</span> },
];
</code></pre>
<h3 data-id="heading-42">7.4 æƒé™æ£€æŸ¥æµç¨‹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">checkPermission</span>(<span class="hljs-params">
  tool: <span class="hljs-built_in">string</span>,
  args: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">unknown</span>&gt;,
  ctx: ToolContext
</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
  <span class="hljs-comment">// 1. è·å–åˆå¹¶åçš„æƒé™è§„åˆ™</span>
  <span class="hljs-keyword">const</span> rules = <span class="hljs-title class_">PermissionNext</span>.<span class="hljs-title function_">merge</span>(
    ctx.<span class="hljs-property">agent</span>.<span class="hljs-property">permission</span>,
    ctx.<span class="hljs-property">session</span>.<span class="hljs-property">permission</span>,
    <span class="hljs-title class_">Config</span>.<span class="hljs-title function_">get</span>().<span class="hljs-property">permission</span>
  );

  <span class="hljs-comment">// 2. æ‰¾åˆ°åŒ¹é…çš„è§„åˆ™</span>
  <span class="hljs-keyword">const</span> matchedRule = rules.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">rule</span> =&gt;</span> <span class="hljs-title function_">matches</span>(rule, tool, args));

  <span class="hljs-comment">// 3. å¦‚æœæ˜ç¡®å…è®¸ï¼Œç›´æ¥é€šè¿‡</span>
  <span class="hljs-keyword">if</span> (matchedRule?.<span class="hljs-property">allow</span>) {
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-comment">// 4. å¦‚æœæ˜ç¡®æ‹’ç»ï¼ŒæŠ›å‡ºå¼‚å¸¸</span>
  <span class="hljs-keyword">if</span> (matchedRule?.<span class="hljs-property">deny</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PermissionNext</span>.<span class="hljs-title class_">RejectedError</span>(tool, args);
  }

  <span class="hljs-comment">// 5. å¦‚æœéœ€è¦è¯¢é—®ï¼Œè¯·æ±‚ç”¨æˆ·ç¡®è®¤</span>
  <span class="hljs-keyword">if</span> (!matchedRule || matchedRule.<span class="hljs-property">ask</span>) {
    <span class="hljs-keyword">await</span> ctx.<span class="hljs-title function_">ask</span>({
      <span class="hljs-attr">permission</span>: <span class="hljs-string">`tool.<span class="hljs-subst">${tool}</span>`</span>,
      <span class="hljs-attr">metadata</span>: args,
      <span class="hljs-attr">patterns</span>: <span class="hljs-title function_">extractPatterns</span>(args),
      <span class="hljs-attr">always</span>: matchedRule?.<span class="hljs-property">always</span> ?? <span class="hljs-literal">false</span>,
    });
  }
}
</code></pre>
<h3 data-id="heading-43">7.5 ç”¨æˆ·äº¤äº’ç•Œé¢</h3>
<p>å½“éœ€è¦ç”¨æˆ·ç¡®è®¤æ—¶ï¼ŒCLI ä¼šæ˜¾ç¤ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” Permission Required                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Tool: bash                                                     â”‚
â”‚  Command: <span class="hljs-built_in">rm</span> -rf ./dist                                         â”‚
â”‚                                                                 â”‚
â”‚  This <span class="hljs-built_in">command</span> will delete the ./dist directory.                 â”‚
â”‚                                                                 â”‚
â”‚  [Y] Allow once                                                 â”‚
â”‚  [A] Always allow this pattern                                  â”‚
â”‚  [N] Deny                                                       â”‚
â”‚  [D] Always deny this pattern                                   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>é€‰æ‹© "Always allow" ä¼šå°†è§„åˆ™ä¿å­˜åˆ° Session æƒé™ä¸­ï¼Œåç»­ç›¸åŒæ¨¡å¼çš„è¯·æ±‚è‡ªåŠ¨é€šè¿‡ã€‚</p>
<h3 data-id="heading-44">7.6 æ­»å¾ªç¯ä¿æŠ¤ (Doom Loop Detection)</h3>
<p>æƒé™ç³»ç»Ÿè¿˜åŒ…å«ä¸€ä¸ªç‰¹æ®Šä¿æŠ¤ï¼š<strong>æ­»å¾ªç¯æ£€æµ‹</strong>ã€‚</p>
<p>å½“ AI é™·å…¥æ— æ•ˆå¾ªç¯æ—¶ï¼ˆé‡å¤è°ƒç”¨ç›¸åŒå·¥å…·ï¼‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä»‹å…¥ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">detectDoomLoop</span>(<span class="hljs-params">toolParts: ToolPart[]</span>): <span class="hljs-built_in">boolean</span> {
  <span class="hljs-keyword">if</span> (toolParts.<span class="hljs-property">length</span> &lt; <span class="hljs-number">3</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

  <span class="hljs-comment">// è·å–æœ€è¿‘ 3 æ¬¡å·¥å…·è°ƒç”¨</span>
  <span class="hljs-keyword">const</span> last3 = toolParts.<span class="hljs-title function_">slice</span>(-<span class="hljs-number">3</span>);

  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å®Œå…¨ç›¸åŒ</span>
  <span class="hljs-keyword">const</span> allSame = last3.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">part</span> =&gt;</span>
    part.<span class="hljs-property">state</span>.<span class="hljs-property">name</span> === last3[<span class="hljs-number">0</span>].<span class="hljs-property">state</span>.<span class="hljs-property">name</span> &amp;&amp;
    <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(part.<span class="hljs-property">state</span>.<span class="hljs-property">input</span>) === <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(last3[<span class="hljs-number">0</span>].<span class="hljs-property">state</span>.<span class="hljs-property">input</span>)
  );

  <span class="hljs-keyword">return</span> allSame;
}

<span class="hljs-comment">// åœ¨å·¥å…·è°ƒç”¨æ—¶æ£€æŸ¥</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">onToolCall</span>(<span class="hljs-params">tool: <span class="hljs-built_in">string</span>, input: <span class="hljs-built_in">object</span>, ctx: ToolContext</span>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">detectDoomLoop</span>(<span class="hljs-title function_">getRecentToolParts</span>(ctx.<span class="hljs-property">messageID</span>))) {
    <span class="hljs-comment">// è¯¢é—®ç”¨æˆ·æ˜¯å¦ç»§ç»­</span>
    <span class="hljs-keyword">await</span> ctx.<span class="hljs-title function_">ask</span>({
      <span class="hljs-attr">permission</span>: <span class="hljs-string">"doom_loop"</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">`AI is calling the same tool (<span class="hljs-subst">${tool}</span>) repeatedly with identical arguments. This might indicate a stuck loop.`</span>,
      <span class="hljs-attr">options</span>: [<span class="hljs-string">"Continue anyway"</span>, <span class="hljs-string">"Stop and intervene"</span>],
    });
  }
}
</code></pre>
<hr/>
<h2 data-id="heading-45">ç¬¬å…«ç« ï¼šäº®ç‚¹æŠ€æœ¯æ·±åº¦è§£æ</h2>
<h3 data-id="heading-46">8.1 æµå¼æ€è€ƒæå– (Reasoning Extraction)</h3>
<p>OpenCode æœ€é…·çš„åŠŸèƒ½ä¹‹ä¸€æ˜¯<strong>å®æ—¶æ˜¾ç¤º AI çš„æ€è€ƒè¿‡ç¨‹</strong>ã€‚è¿™æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant LLM
    participant Middleware
    participant Processor
    participant UI

    LLM-&gt;&gt;Middleware: &lt;think&gt;è®©æˆ‘åˆ†æä¸€ä¸‹...
    Middleware-&gt;&gt;Processor: reasoning-start
    Processor-&gt;&gt;UI: æ˜¾ç¤º"æ€è€ƒä¸­..."

    LLM-&gt;&gt;Middleware: è¿™ä¸ªå‡½æ•°æœ‰é—®é¢˜...&lt;/think&gt;
    Middleware-&gt;&gt;Processor: reasoning-delta
    Processor-&gt;&gt;UI: å®æ—¶æ›´æ–°æ€è€ƒå†…å®¹

    LLM-&gt;&gt;Middleware: æˆ‘éœ€è¦è°ƒç”¨ read å·¥å…·
    Middleware-&gt;&gt;Processor: reasoning-end, text-start
    Processor-&gt;&gt;UI: æ˜¾ç¤ºå®Œæ•´æ€è€ƒï¼Œå¼€å§‹æ˜¾ç¤ºå›å¤
</code></pre>
<p><strong>å®ç°åŸç†ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { wrapLanguageModel, extractReasoningMiddleware } <span class="hljs-keyword">from</span> <span class="hljs-string">"ai"</span>;

<span class="hljs-comment">// åŒ…è£…æ¨¡å‹ä»¥æå–æ€è€ƒè¿‡ç¨‹</span>
<span class="hljs-keyword">const</span> wrappedModel = <span class="hljs-title function_">wrapLanguageModel</span>(baseModel,
  <span class="hljs-title function_">extractReasoningMiddleware</span>({
    <span class="hljs-attr">tagName</span>: <span class="hljs-string">"think"</span>  <span class="hljs-comment">// æå– &lt;think&gt;...&lt;/think&gt; ä¸­çš„å†…å®¹</span>
  })
);

<span class="hljs-comment">// æµå¼äº‹ä»¶å¤„ç†</span>
<span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> event <span class="hljs-keyword">of</span> stream.<span class="hljs-property">fullStream</span>) {
  <span class="hljs-keyword">switch</span> (event.<span class="hljs-property">type</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">"reasoning-start"</span>:
      <span class="hljs-comment">// åˆ›å»ºæ€è€ƒ Part</span>
      <span class="hljs-title function_">createReasoningPart</span>(messageID);
      <span class="hljs-keyword">break</span>;

    <span class="hljs-keyword">case</span> <span class="hljs-string">"reasoning-delta"</span>:
      <span class="hljs-comment">// è¿½åŠ æ€è€ƒå†…å®¹</span>
      <span class="hljs-title function_">appendToReasoningPart</span>(messageID, event.<span class="hljs-property">text</span>);
      <span class="hljs-comment">// UI å®æ—¶æ›´æ–°</span>
      <span class="hljs-title function_">publishPartUpdate</span>(messageID, partID);
      <span class="hljs-keyword">break</span>;

    <span class="hljs-keyword">case</span> <span class="hljs-string">"reasoning-end"</span>:
      <span class="hljs-comment">// å®Œæˆæ€è€ƒ</span>
      <span class="hljs-title function_">finalizeReasoningPart</span>(messageID);
      <span class="hljs-keyword">break</span>;
  }
}
</code></pre>
<p><strong>ç”¨æˆ·çœ‹åˆ°çš„æ•ˆæœï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤” <span class="hljs-title class_">Thinking</span>...                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è®©æˆ‘åˆ†æä¸€ä¸‹è¿™ä¸ªå‡½æ•°ã€‚                                           â”‚
â”‚                                                                 â”‚
â”‚ é—®é¢˜å‡ºåœ¨ç¬¬ <span class="hljs-number">42</span> è¡Œï¼š<span class="hljs-title function_">fetchData</span>() è¿”å›çš„æ˜¯ <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt;ï¼Œ        â”‚
â”‚ ä½†ä»£ç ç›´æ¥èµ‹å€¼ç»™ <span class="hljs-built_in">string</span> ç±»å‹çš„å˜é‡ï¼Œæ²¡æœ‰ <span class="hljs-keyword">await</span>ã€‚                 â”‚
â”‚                                                                 â”‚
â”‚ æˆ‘éœ€è¦ï¼š                                                        â”‚
â”‚ <span class="hljs-number">1.</span> è¯»å–å®Œæ•´æ–‡ä»¶ç¡®è®¤ä¸Šä¸‹æ–‡                                        â”‚
â”‚ <span class="hljs-number">2.</span> æ·»åŠ  <span class="hljs-keyword">await</span> å…³é”®å­—                                            â”‚
â”‚ <span class="hljs-number">3.</span> ç¡®ä¿å‡½æ•°æ˜¯ <span class="hljs-keyword">async</span> çš„                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>è¿™ä¸ä»…æä¾›äº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè¿˜å¢åŠ äº†<strong>é€æ˜åº¦</strong>â€”â€”ç”¨æˆ·å¯ä»¥çœ‹åˆ° AI æ˜¯å¦‚ä½•æ€è€ƒçš„ï¼Œä»è€Œæ›´å¥½åœ°ç†è§£å’ŒéªŒè¯å…¶å†³ç­–ã€‚</p>
<h3 data-id="heading-47">8.2 æ–‡ä»¶ç³»ç»Ÿå¿«ç…§ä¸å›æ»š</h3>
<p>OpenCode çš„å¦ä¸€ä¸ªäº®ç‚¹æ˜¯<strong>ä»»ä½•ä¿®æ”¹éƒ½å¯ä»¥å›æ»š</strong>ã€‚è¿™æ˜¯é€šè¿‡ Git å¿«ç…§å®ç°çš„ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ­¥éª¤å¼€å§‹æ—¶åˆ›å»ºå¿«ç…§</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">onStepStart</span>(<span class="hljs-params">ctx: StepContext</span>) {
  <span class="hljs-comment">// è®°å½•å½“å‰ Git çŠ¶æ€</span>
  <span class="hljs-keyword">const</span> snapshot = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Snapshot</span>.<span class="hljs-title function_">track</span>({
    <span class="hljs-attr">directory</span>: ctx.<span class="hljs-property">directory</span>,
    <span class="hljs-attr">includeUntracked</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// åŒ…æ‹¬æœªè·Ÿè¸ªæ–‡ä»¶</span>
  });

  <span class="hljs-comment">// ä¿å­˜å¿«ç…§å¼•ç”¨</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">Session</span>.<span class="hljs-title function_">updatePart</span>(ctx.<span class="hljs-property">messageID</span>, {
    <span class="hljs-attr">type</span>: <span class="hljs-string">"step-start"</span>,
    <span class="hljs-attr">snapshot</span>: snapshot.<span class="hljs-property">ref</span>,
  });
}

<span class="hljs-comment">// æ­¥éª¤ç»“æŸæ—¶è®¡ç®—å˜æ›´</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">onStepFinish</span>(<span class="hljs-params">ctx: StepContext</span>) {
  <span class="hljs-keyword">const</span> startSnapshot = <span class="hljs-title function_">getStepStartSnapshot</span>(ctx.<span class="hljs-property">messageID</span>);
  <span class="hljs-keyword">const</span> currentSnapshot = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Snapshot</span>.<span class="hljs-title function_">track</span>({ <span class="hljs-attr">directory</span>: ctx.<span class="hljs-property">directory</span> });

  <span class="hljs-comment">// è®¡ç®— diff</span>
  <span class="hljs-keyword">const</span> patch = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Snapshot</span>.<span class="hljs-title function_">diff</span>(startSnapshot, currentSnapshot);

  <span class="hljs-comment">// ä¿å­˜ patch</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">Session</span>.<span class="hljs-title function_">updatePart</span>(ctx.<span class="hljs-property">messageID</span>, {
    <span class="hljs-attr">type</span>: <span class="hljs-string">"patch"</span>,
    <span class="hljs-attr">diff</span>: patch,
    <span class="hljs-attr">additions</span>: <span class="hljs-title function_">countAdditions</span>(patch),
    <span class="hljs-attr">deletions</span>: <span class="hljs-title function_">countDeletions</span>(patch),
  });
}

<span class="hljs-comment">// å›æ»šåˆ°ä»»æ„å¿«ç…§</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">revert</span>(<span class="hljs-params">sessionID: <span class="hljs-built_in">string</span>, messageID: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> snapshot = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Session</span>.<span class="hljs-title function_">getSnapshot</span>(messageID);

  <span class="hljs-comment">// æ¢å¤æ–‡ä»¶çŠ¶æ€</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">Snapshot</span>.<span class="hljs-title function_">restore</span>(snapshot.<span class="hljs-property">ref</span>);

  <span class="hljs-comment">// åˆ›å»ºå›æ»šæ¶ˆæ¯</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">Session</span>.<span class="hljs-title function_">updatePart</span>(messageID, {
    <span class="hljs-attr">type</span>: <span class="hljs-string">"revert"</span>,
    <span class="hljs-attr">snapshot</span>: snapshot.<span class="hljs-property">ref</span>,
  });
}
</code></pre>
<p><strong>å›æ»šç•Œé¢ï¼š</strong></p>
<pre><code class="hljs language-less" lang="less">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“œ <span class="hljs-selector-tag">Session</span> <span class="hljs-selector-tag">History</span>                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ <span class="hljs-selector-attr">[1]</span> <span class="hljs-number">10</span>:<span class="hljs-number">30</span> <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Read</span> <span class="hljs-selector-tag">src</span>/<span class="hljs-selector-tag">app</span><span class="hljs-selector-class">.ts</span>                                    â”‚
â”‚ <span class="hljs-selector-attr">[2]</span> <span class="hljs-number">10</span>:<span class="hljs-number">31</span> <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Edit</span> <span class="hljs-selector-tag">src</span>/<span class="hljs-selector-tag">app</span><span class="hljs-selector-class">.ts</span> (+<span class="hljs-number">5</span>, -<span class="hljs-number">3</span>)          <span class="hljs-selector-attr">[ğŸ”„ Revert]</span>      â”‚
â”‚ <span class="hljs-selector-attr">[3]</span> <span class="hljs-number">10</span>:<span class="hljs-number">32</span> <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Run</span> <span class="hljs-selector-tag">tests</span>                                          â”‚
â”‚ <span class="hljs-selector-attr">[4]</span> <span class="hljs-number">10</span>:<span class="hljs-number">33</span> <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Edit</span> <span class="hljs-selector-tag">src</span>/<span class="hljs-selector-tag">utils</span><span class="hljs-selector-class">.ts</span> (+<span class="hljs-number">20</span>, -<span class="hljs-number">0</span>)       <span class="hljs-selector-attr">[ğŸ”„ Revert]</span>      â”‚
â”‚ <span class="hljs-selector-attr">[5]</span> <span class="hljs-number">10</span>:<span class="hljs-number">35</span> <span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Create</span> <span class="hljs-selector-tag">src</span>/<span class="hljs-selector-tag">new-file</span><span class="hljs-selector-class">.ts</span> (+<span class="hljs-number">50</span>, -<span class="hljs-number">0</span>)  <span class="hljs-selector-attr">[ğŸ”„ Revert]</span>      â”‚
â”‚                                                                 â”‚
â”‚ <span class="hljs-selector-tag">Select</span> <span class="hljs-selector-tag">step</span> <span class="hljs-selector-tag">to</span> <span class="hljs-selector-tag">revert</span>, <span class="hljs-selector-tag">or</span> <span class="hljs-selector-tag">press</span> <span class="hljs-selector-tag">Q</span> <span class="hljs-selector-tag">to</span> <span class="hljs-selector-tag">cancel</span>                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-48">8.3 æ™ºèƒ½æ‘˜è¦ç”Ÿæˆ</h3>
<p>æ¯æ¬¡å¯¹è¯ç»“æŸåï¼ŒOpenCode ä¼šè‡ªåŠ¨ç”Ÿæˆæ‘˜è¦ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">summarize</span>(<span class="hljs-params">sessionID: <span class="hljs-built_in">string</span>, messageID: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-comment">// 1. ç”Ÿæˆæ ‡é¢˜</span>
  <span class="hljs-keyword">const</span> title = <span class="hljs-keyword">await</span> <span class="hljs-title function_">generateTitle</span>(sessionID, messageID);

  <span class="hljs-comment">// 2. ç”Ÿæˆæ­£æ–‡æ‘˜è¦</span>
  <span class="hljs-keyword">const</span> body = <span class="hljs-keyword">await</span> <span class="hljs-title function_">generateBody</span>(sessionID, messageID);

  <span class="hljs-comment">// 3. è®¡ç®—æ–‡ä»¶å˜æ›´ç»Ÿè®¡</span>
  <span class="hljs-keyword">const</span> diffs = <span class="hljs-keyword">await</span> <span class="hljs-title function_">computeDiffs</span>(sessionID);

  <span class="hljs-comment">// 4. ä¿å­˜æ‘˜è¦</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">Session</span>.<span class="hljs-title function_">updateMessage</span>(messageID, {
    <span class="hljs-attr">summary</span>: { title, body, diffs },
  });
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">generateTitle</span>(<span class="hljs-params">sessionID: <span class="hljs-built_in">string</span>, messageID: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-comment">// ä½¿ç”¨å°æ¨¡å‹ç”Ÿæˆæ ‡é¢˜</span>
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-variable constant_">LLM</span>.<span class="hljs-title function_">stream</span>({
    <span class="hljs-attr">model</span>: smallModel,
    <span class="hljs-attr">agent</span>: <span class="hljs-string">"title"</span>,
    <span class="hljs-attr">messages</span>: <span class="hljs-title function_">getFirstUserMessage</span>(sessionID),
    <span class="hljs-attr">system</span>: <span class="hljs-string">"Generate a concise title (max 100 chars) for this conversation."</span>,
  });

  <span class="hljs-keyword">return</span> result.<span class="hljs-property">text</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>);
}
</code></pre>
<p>æ‘˜è¦ç”¨äºï¼š</p>
<ul>
<li>ä¼šè¯åˆ—è¡¨æ˜¾ç¤º</li>
<li>å†å²æœç´¢</li>
<li>ä¸Šä¸‹æ–‡å‹ç¼©åçš„å‚è€ƒ</li>
</ul>
<h3 data-id="heading-49">8.4 Prompt Caching ä¼˜åŒ–</h3>
<p>Anthropic çš„ API æ”¯æŒ Prompt Cachingï¼ŒOpenCode å……åˆ†åˆ©ç”¨äº†è¿™ä¸€ç‰¹æ€§ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// System prompt åˆ†æˆä¸¤éƒ¨åˆ†</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">buildSystemPrompt</span>(<span class="hljs-params">agent: Agent, custom: <span class="hljs-built_in">string</span>[]</span>) {
  <span class="hljs-keyword">return</span> [
    <span class="hljs-comment">// [0] é™æ€å¤´éƒ¨ - å¯è¢«ç¼“å­˜</span>
    <span class="hljs-variable constant_">PROVIDER_HEADER</span>,

    <span class="hljs-comment">// [1] åŠ¨æ€æ­£æ–‡ - æ¯æ¬¡å¯èƒ½ä¸åŒ</span>
    [
      agent.<span class="hljs-property">prompt</span>,
      ...custom,
      <span class="hljs-title function_">environmentInfo</span>(),
    ].<span class="hljs-title function_">join</span>(<span class="hljs-string">"\n"</span>),
  ];
}

<span class="hljs-comment">// å¦‚æœå¤´éƒ¨ä¸å˜ï¼ŒAnthropic ä¼šä½¿ç”¨ç¼“å­˜</span>
<span class="hljs-comment">// å¯ä»¥èŠ‚çœ 50-90% çš„ input token</span>
</code></pre>
<p><strong>æˆæœ¬å¯¹æ¯”ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">Without Caching:
- Input: 50,000 tokens Ã— $3/<span class="hljs-attr">M</span> = <span class="hljs-variable">$0</span>.<span class="hljs-number">15</span>
- Output: 2,000 tokens Ã— $15/<span class="hljs-attr">M</span> = <span class="hljs-variable">$0</span>.<span class="hljs-number">03</span>
- Total: $0.18

With Caching (80% cache hit):
- Input (cached): 40,000 tokens Ã— $0.30/<span class="hljs-attr">M</span> = <span class="hljs-variable">$0</span>.<span class="hljs-number">012</span>
- Input (new): 10,000 tokens Ã— $3/<span class="hljs-attr">M</span> = <span class="hljs-variable">$0</span>.<span class="hljs-number">03</span>
- Output: 2,000 tokens Ã— $15/<span class="hljs-attr">M</span> = <span class="hljs-variable">$0</span>.<span class="hljs-number">03</span>
- Total: $0.072

Savings: 60%!
</code></pre>
<h3 data-id="heading-50">8.5 å¹¶è¡Œå·¥å…·æ‰§è¡Œ</h3>
<p>å½“ AI éœ€è¦è°ƒç”¨å¤šä¸ªç‹¬ç«‹å·¥å…·æ—¶ï¼ŒOpenCode æ”¯æŒ<strong>å¹¶è¡Œæ‰§è¡Œ</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// AI è¿”å›å¤šä¸ªå·¥å…·è°ƒç”¨</span>
<span class="hljs-keyword">const</span> toolCalls = [
  { <span class="hljs-attr">name</span>: <span class="hljs-string">"read"</span>, <span class="hljs-attr">args</span>: { <span class="hljs-attr">file_path</span>: <span class="hljs-string">"src/a.ts"</span> } },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">"read"</span>, <span class="hljs-attr">args</span>: { <span class="hljs-attr">file_path</span>: <span class="hljs-string">"src/b.ts"</span> } },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">"grep"</span>, <span class="hljs-attr">args</span>: { <span class="hljs-attr">pattern</span>: <span class="hljs-string">"TODO"</span>, <span class="hljs-attr">path</span>: <span class="hljs-string">"src/"</span> } },
];

<span class="hljs-comment">// å¹¶è¡Œæ‰§è¡Œæ‰€æœ‰å·¥å…·</span>
<span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(
  toolCalls.<span class="hljs-title function_">map</span>(<span class="hljs-keyword">async</span> (call) =&gt; {
    <span class="hljs-keyword">const</span> tool = <span class="hljs-title class_">ToolRegistry</span>.<span class="hljs-title function_">get</span>(call.<span class="hljs-property">name</span>);
    <span class="hljs-keyword">return</span> tool.<span class="hljs-title function_">execute</span>(call.<span class="hljs-property">args</span>, ctx);
  })
);

<span class="hljs-comment">// æ‰€æœ‰ç»“æœä¸€èµ·è¿”å›ç»™ LLM</span>
</code></pre>
<p>è¿™æ˜¾è‘—æé«˜äº†æ•ˆç‡ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦è¯»å–å¤šä¸ªæ–‡ä»¶æˆ–æ‰§è¡Œå¤šä¸ªæœç´¢æ—¶ã€‚</p>
<hr/>
<h2 data-id="heading-51">ç¬¬ä¹ç« ï¼šä»æºç å­¦ä¹ è®¾è®¡æ¨¡å¼</h2>
<p>OpenCode çš„ä»£ç åº“æ˜¯å­¦ä¹ ç°ä»£ TypeScript è®¾è®¡æ¨¡å¼çš„ç»ä½³æ•™æã€‚è®©æˆ‘ä»¬çœ‹çœ‹å®ƒä½¿ç”¨äº†å“ªäº›æ¨¡å¼ã€‚</p>
<h3 data-id="heading-52">9.1 Namespace æ¨¡å¼</h3>
<p>OpenCode å¤§é‡ä½¿ç”¨ TypeScript çš„ <code>namespace</code> æ¥ç»„ç»‡ä»£ç ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// session/index.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Session</span> {
  <span class="hljs-comment">// ç±»å‹å®šä¹‰</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">Info</span> = z.<span class="hljs-title function_">object</span>({...});
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">Info</span> = z.<span class="hljs-property">infer</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Info</span>&gt;;

  <span class="hljs-comment">// äº‹ä»¶å®šä¹‰</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">Event</span> = {
    <span class="hljs-title class_">Created</span>: <span class="hljs-title class_">BusEvent</span>.<span class="hljs-title function_">define</span>(<span class="hljs-string">"session.created"</span>, <span class="hljs-title class_">Info</span>),
    <span class="hljs-title class_">Updated</span>: <span class="hljs-title class_">BusEvent</span>.<span class="hljs-title function_">define</span>(<span class="hljs-string">"session.updated"</span>, <span class="hljs-title class_">Info</span>),
    <span class="hljs-title class_">Deleted</span>: <span class="hljs-title class_">BusEvent</span>.<span class="hljs-title function_">define</span>(<span class="hljs-string">"session.deleted"</span>, z.<span class="hljs-title function_">string</span>()),
  };

  <span class="hljs-comment">// æ–¹æ³•</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">create</span>(<span class="hljs-params">input: CreateInput</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Info</span>&gt; {...}
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Info</span> | <span class="hljs-literal">null</span>&gt; {...}
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span>, editor: Editor</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Info</span>&gt; {...}
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">remove</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {...}
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆç”¨ Namespaceï¼Ÿ</strong></p>
<ol>
<li><strong>å‘½åç©ºé—´éš”ç¦»</strong>ï¼šé¿å…å…¨å±€æ±¡æŸ“</li>
<li><strong>ç»„ç»‡ä»£ç </strong>ï¼šç›¸å…³åŠŸèƒ½æ”¾åœ¨ä¸€èµ·</li>
<li><strong>ç±»å‹å’Œå€¼å…±å­˜</strong>ï¼š<code>Session.Info</code> æ—¢æ˜¯ç±»å‹ä¹Ÿæ˜¯ Schema</li>
<li><strong>è‡ªæ–‡æ¡£åŒ–</strong>ï¼š<code>Session.create()</code> æ¯” <code>createSession()</code> æ›´æ¸…æ™°</li>
</ol>
<h3 data-id="heading-53">9.2 Discriminated Union æ¨¡å¼</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½¿ç”¨å­—é¢é‡ç±»å‹ä½œä¸ºåˆ¤åˆ«å™¨</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Part</span> =
  | { <span class="hljs-attr">type</span>: <span class="hljs-string">"text"</span>; <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>; }
  | { <span class="hljs-attr">type</span>: <span class="hljs-string">"tool"</span>; <span class="hljs-attr">state</span>: <span class="hljs-title class_">ToolState</span>; }
  | { <span class="hljs-attr">type</span>: <span class="hljs-string">"reasoning"</span>; <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>; };

<span class="hljs-comment">// ç±»å‹æ”¶çª„</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">renderPart</span>(<span class="hljs-params">part: Part</span>) {
  <span class="hljs-keyword">switch</span> (part.<span class="hljs-property">type</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">"text"</span>:
      <span class="hljs-comment">// TypeScript çŸ¥é“è¿™é‡Œ part æ˜¯ { type: "text"; content: string }</span>
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>{part.content}<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span></span>;

    <span class="hljs-keyword">case</span> <span class="hljs-string">"tool"</span>:
      <span class="hljs-comment">// TypeScript çŸ¥é“è¿™é‡Œ part æ˜¯ { type: "tool"; state: ToolState }</span>
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ToolCall</span> <span class="hljs-attr">state</span>=<span class="hljs-string">{part.state}</span> /&gt;</span></span>;

    <span class="hljs-keyword">case</span> <span class="hljs-string">"reasoning"</span>:
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Thinking</span>&gt;</span>{part.content}<span class="hljs-tag">&lt;/<span class="hljs-name">Thinking</span>&gt;</span></span>;
  }
}
</code></pre>
<p>è¿™ç§æ¨¡å¼åœ¨ OpenCode ä¸­æ— å¤„ä¸åœ¨ï¼Œå®ƒè®©å¤æ‚çš„ç±»å‹å˜å¾—å¯ç®¡ç†ã€‚</p>
<h3 data-id="heading-54">9.3 Builder æ¨¡å¼</h3>
<p>System Prompt çš„æ„å»ºä½¿ç”¨äº† Builder æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SystemPromptBuilder</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">parts</span>: <span class="hljs-built_in">string</span>[] = [];

  <span class="hljs-title function_">addHeader</span>(<span class="hljs-params">providerID: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">parts</span>.<span class="hljs-title function_">push</span>(<span class="hljs-title class_">SystemPrompt</span>.<span class="hljs-title function_">header</span>(providerID));
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">addAgentPrompt</span>(<span class="hljs-params">agent: Agent</span>) {
    <span class="hljs-keyword">if</span> (agent.<span class="hljs-property">prompt</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">parts</span>.<span class="hljs-title function_">push</span>(agent.<span class="hljs-property">prompt</span>);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">addCustomInstructions</span>(<span class="hljs-params">paths: <span class="hljs-built_in">string</span>[]</span>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> path <span class="hljs-keyword">of</span> paths) {
      <span class="hljs-keyword">const</span> content = <span class="hljs-title function_">readFileSync</span>(path, <span class="hljs-string">"utf-8"</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">parts</span>.<span class="hljs-title function_">push</span>(content);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">addEnvironment</span>(<span class="hljs-params">info: EnvInfo</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">parts</span>.<span class="hljs-title function_">push</span>(<span class="hljs-title function_">formatEnvironment</span>(info));
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }

  <span class="hljs-title function_">build</span>(): <span class="hljs-built_in">string</span>[] {
    <span class="hljs-comment">// è¿”å›å¯ç¼“å­˜çš„ä¸¤éƒ¨åˆ†ç»“æ„</span>
    <span class="hljs-keyword">return</span> [
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">parts</span>[<span class="hljs-number">0</span>],  <span class="hljs-comment">// header</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">parts</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">"\n"</span>),  <span class="hljs-comment">// body</span>
    ];
  }
}
</code></pre>
<h3 data-id="heading-55">9.4 Factory æ¨¡å¼</h3>
<p>å·¥å…·åˆ›å»ºä½¿ç”¨äº† Factory æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Tool</span> {
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> define&lt;T <span class="hljs-keyword">extends</span> z.<span class="hljs-property">ZodObject</span>&lt;<span class="hljs-built_in">any</span>&gt;&gt;(
    <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>,
    <span class="hljs-attr">init</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">ToolDefinition</span>&lt;T&gt;
  ): <span class="hljs-title class_">Tool</span> {
    <span class="hljs-comment">// å»¶è¿Ÿåˆå§‹åŒ–</span>
    <span class="hljs-keyword">let</span> <span class="hljs-attr">definition</span>: <span class="hljs-title class_">ToolDefinition</span>&lt;T&gt; | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">return</span> {
      id,
      <span class="hljs-keyword">get</span> <span class="hljs-title function_">schema</span>() {
        definition ??= <span class="hljs-title function_">init</span>();
        <span class="hljs-keyword">return</span> definition.<span class="hljs-property">parameters</span>;
      },
      <span class="hljs-keyword">get</span> <span class="hljs-title function_">description</span>() {
        definition ??= <span class="hljs-title function_">init</span>();
        <span class="hljs-keyword">return</span> definition.<span class="hljs-property">description</span>;
      },
      <span class="hljs-keyword">async</span> <span class="hljs-title function_">execute</span>(<span class="hljs-params">args: z.infer&lt;T&gt;, ctx: ToolContext</span>) {
        definition ??= <span class="hljs-title function_">init</span>();
        <span class="hljs-keyword">return</span> definition.<span class="hljs-title function_">execute</span>(args, ctx);
      },
    };
  }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ReadTool</span> = <span class="hljs-title class_">Tool</span>.<span class="hljs-title function_">define</span>(<span class="hljs-string">"read"</span>, <span class="hljs-function">() =&gt;</span> ({
  <span class="hljs-attr">description</span>: <span class="hljs-string">"Reads a file"</span>,
  <span class="hljs-attr">parameters</span>: z.<span class="hljs-title function_">object</span>({ <span class="hljs-attr">file_path</span>: z.<span class="hljs-title function_">string</span>() }),
  <span class="hljs-attr">execute</span>: <span class="hljs-keyword">async</span> (args, ctx) =&gt; {...},
}));
</code></pre>
<p>å»¶è¿Ÿåˆå§‹åŒ–ï¼ˆ<code>init()</code> åªåœ¨é¦–æ¬¡ä½¿ç”¨æ—¶è°ƒç”¨ï¼‰å¯ä»¥åŠ å¿«å¯åŠ¨é€Ÿåº¦ã€‚</p>
<h3 data-id="heading-56">9.5 Observer æ¨¡å¼ (Event Bus)</h3>
<p>OpenCode ä½¿ç”¨äº‹ä»¶æ€»çº¿å®ç°æ¾è€¦åˆé€šä¿¡ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å®šä¹‰äº‹ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">SessionCreated</span> = <span class="hljs-title class_">BusEvent</span>.<span class="hljs-title function_">define</span>(<span class="hljs-string">"session.created"</span>, <span class="hljs-title class_">Session</span>.<span class="hljs-property">Info</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MessageUpdated</span> = <span class="hljs-title class_">BusEvent</span>.<span class="hljs-title function_">define</span>(<span class="hljs-string">"message.updated"</span>, <span class="hljs-title class_">MessageV2</span>.<span class="hljs-property">Info</span>);

<span class="hljs-comment">// å‘å¸ƒäº‹ä»¶</span>
<span class="hljs-title class_">Bus</span>.<span class="hljs-title function_">publish</span>(<span class="hljs-title class_">SessionCreated</span>, sessionInfo);

<span class="hljs-comment">// è®¢é˜…äº‹ä»¶</span>
<span class="hljs-title class_">Bus</span>.<span class="hljs-title function_">subscribe</span>(<span class="hljs-title class_">SessionCreated</span>, <span class="hljs-function">(<span class="hljs-params">session</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`New session: <span class="hljs-subst">${session.title}</span>`</span>);
});

<span class="hljs-comment">// åœ¨ UI ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">SessionList</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [sessions, setSessions] = useState&lt;<span class="hljs-title class_">Session</span>.<span class="hljs-property">Info</span>[]&gt;([]);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// è®¢é˜…ä¼šè¯å˜æ›´</span>
    <span class="hljs-keyword">const</span> unsubscribe = <span class="hljs-title class_">Bus</span>.<span class="hljs-title function_">subscribe</span>(<span class="hljs-title class_">SessionCreated</span>, <span class="hljs-function">(<span class="hljs-params">session</span>) =&gt;</span> {
      <span class="hljs-title function_">setSessions</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> [...prev, session]);
    });

    <span class="hljs-keyword">return</span> unsubscribe;
  }, []);

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">List</span> <span class="hljs-attr">items</span>=<span class="hljs-string">{sessions}</span> /&gt;</span></span>;
}
</code></pre>
<h3 data-id="heading-57">9.6 Strategy æ¨¡å¼</h3>
<p>Provider å®ç°ä½¿ç”¨äº† Strategy æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ProviderStrategy</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-title function_">getApiKey</span>(): <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>;
  <span class="hljs-title function_">models</span>(): <span class="hljs-title class_">Model</span>[];
  <span class="hljs-title function_">languageModel</span>(<span class="hljs-attr">modelID</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">LanguageModel</span>;
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">AnthropicProvider</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ProviderStrategy</span> {
  id = <span class="hljs-string">"anthropic"</span>;

  <span class="hljs-title function_">getApiKey</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> process.<span class="hljs-property">env</span>.<span class="hljs-property">ANTHROPIC_API_KEY</span>;
  }

  <span class="hljs-title function_">models</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> [
      { <span class="hljs-attr">id</span>: <span class="hljs-string">"claude-3-5-sonnet"</span>, <span class="hljs-attr">context</span>: <span class="hljs-number">200000</span>, ... },
      { <span class="hljs-attr">id</span>: <span class="hljs-string">"claude-3-opus"</span>, <span class="hljs-attr">context</span>: <span class="hljs-number">200000</span>, ... },
    ];
  }

  <span class="hljs-title function_">languageModel</span>(<span class="hljs-params">modelID: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">anthropic</span>(modelID);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">OpenAIProvider</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ProviderStrategy</span> {
  id = <span class="hljs-string">"openai"</span>;
  <span class="hljs-comment">// ... ä¸åŒçš„å®ç°</span>
}

<span class="hljs-comment">// ç»Ÿä¸€ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getProvider</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">ProviderStrategy</span> {
  <span class="hljs-keyword">const</span> providers = {
    <span class="hljs-attr">anthropic</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnthropicProvider</span>(),
    <span class="hljs-attr">openai</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">OpenAIProvider</span>(),
    <span class="hljs-comment">// ...</span>
  };
  <span class="hljs-keyword">return</span> providers[id];
}
</code></pre>
<hr/>
<h2 data-id="heading-58">ç¬¬åç« ï¼šæ€§èƒ½ä¼˜åŒ–ä¸å·¥ç¨‹å®è·µ</h2>
<h3 data-id="heading-59">10.1 å¯åŠ¨æ€§èƒ½ä¼˜åŒ–</h3>
<p>CLI å·¥å…·çš„å¯åŠ¨é€Ÿåº¦è‡³å…³é‡è¦ã€‚OpenCode é‡‡ç”¨äº†å¤šç§ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 1. å»¶è¿Ÿå¯¼å…¥</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">runCommand</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// åªåœ¨éœ€è¦æ—¶æ‰å¯¼å…¥é‡å‹æ¨¡å—</span>
  <span class="hljs-keyword">const</span> { <span class="hljs-title class_">Session</span> } = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">"./session"</span>);
  <span class="hljs-keyword">const</span> { <span class="hljs-title class_">Server</span> } = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">"./server"</span>);
  <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// 2. å»¶è¿Ÿåˆå§‹åŒ–</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">_config</span>: <span class="hljs-title class_">Config</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getConfig</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// é¦–æ¬¡è°ƒç”¨æ—¶æ‰åŠ è½½é…ç½®</span>
  _config ??= <span class="hljs-title function_">loadConfig</span>();
  <span class="hljs-keyword">return</span> _config;
}

<span class="hljs-comment">// 3. å¹¶è¡Œåˆå§‹åŒ–</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å¹¶è¡Œæ‰§è¡Œç‹¬ç«‹çš„åˆå§‹åŒ–ä»»åŠ¡</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
    <span class="hljs-title function_">loadConfig</span>(),
    <span class="hljs-title function_">initializeStorage</span>(),
    <span class="hljs-title function_">discoverMCPServers</span>(),
  ]);
}
</code></pre>
<h3 data-id="heading-60">10.2 å†…å­˜ç®¡ç†</h3>
<p>é•¿æ—¶é—´è¿è¡Œçš„ Agent éœ€è¦æ³¨æ„å†…å­˜ç®¡ç†ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 1. æµå¼å¤„ç†ï¼Œé¿å…å¤§å­—ç¬¦ä¸²</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>* <span class="hljs-title function_">streamFile</span>(<span class="hljs-params">path: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> stream = <span class="hljs-title function_">createReadStream</span>(path);
  <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> chunk <span class="hljs-keyword">of</span> stream) {
    <span class="hljs-keyword">yield</span> chunk.<span class="hljs-title function_">toString</span>();
  }
}

<span class="hljs-comment">// 2. åŠæ—¶æ¸…ç†</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">cleanup</span>(<span class="hljs-params">sessionID: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-comment">// æ¸…ç†ç¼“å­˜</span>
  messageCache.<span class="hljs-title function_">delete</span>(sessionID);
  partCache.<span class="hljs-title function_">delete</span>(sessionID);

  <span class="hljs-comment">// è§¦å‘ GCï¼ˆåœ¨ Bun ä¸­ï¼‰</span>
  <span class="hljs-title class_">Bun</span>.<span class="hljs-title function_">gc</span>(<span class="hljs-literal">true</span>);
}

<span class="hljs-comment">// 3. å¼±å¼•ç”¨ç¼“å­˜</span>
<span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>&lt;<span class="hljs-built_in">object</span>, <span class="hljs-title class_">ComputedValue</span>&gt;();
</code></pre>
<h3 data-id="heading-61">10.3 å¹¶å‘æ§åˆ¶</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½¿ç”¨ä¿¡å·é‡é™åˆ¶å¹¶å‘</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Semaphore</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">permits</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">queue</span>: (<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>)[] = [];

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">permits: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">permits</span> = permits;
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">acquire</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">permits</span> &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">permits</span>--;
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">push</span>(resolve));
  }

  <span class="hljs-title function_">release</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> next = <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">shift</span>();
    <span class="hljs-keyword">if</span> (next) {
      <span class="hljs-title function_">next</span>();
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">permits</span>++;
    }
  }
}

<span class="hljs-comment">// é™åˆ¶åŒæ—¶æ‰§è¡Œçš„å·¥å…·æ•°é‡</span>
<span class="hljs-keyword">const</span> toolSemaphore = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Semaphore</span>(<span class="hljs-number">5</span>);

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">executeTool</span>(<span class="hljs-params">tool: Tool, args: <span class="hljs-built_in">object</span>, ctx: ToolContext</span>) {
  <span class="hljs-keyword">await</span> toolSemaphore.<span class="hljs-title function_">acquire</span>();
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> tool.<span class="hljs-title function_">execute</span>(args, ctx);
  } <span class="hljs-keyword">finally</span> {
    toolSemaphore.<span class="hljs-title function_">release</span>();
  }
}
</code></pre>
<h3 data-id="heading-62">10.4 é”™è¯¯å¤„ç†æœ€ä½³å®è·µ</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 1. ç±»å‹åŒ–é”™è¯¯</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ToolExecutionError</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Error</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">
    <span class="hljs-keyword">public</span> tool: <span class="hljs-built_in">string</span>,
    <span class="hljs-keyword">public</span> args: <span class="hljs-built_in">object</span>,
    <span class="hljs-keyword">public</span> cause: <span class="hljs-built_in">Error</span>
  </span>) {
    <span class="hljs-variable language_">super</span>(<span class="hljs-string">`Tool <span class="hljs-subst">${tool}</span> failed: <span class="hljs-subst">${cause.message}</span>`</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">"ToolExecutionError"</span>;
  }
}

<span class="hljs-comment">// 2. é”™è¯¯è¾¹ç•Œ</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> safeExecute&lt;T&gt;(
  <span class="hljs-attr">fn</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;T&gt;,
  <span class="hljs-attr">fallback</span>: T
): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">fn</span>();
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Execution failed:"</span>, error);
    <span class="hljs-keyword">return</span> fallback;
  }
}

<span class="hljs-comment">// 3. é‡è¯•é€»è¾‘</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> withRetry&lt;T&gt;(
  <span class="hljs-attr">fn</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;T&gt;,
  <span class="hljs-attr">options</span>: { <span class="hljs-attr">maxAttempts</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">delay</span>: <span class="hljs-built_in">number</span> }
): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
  <span class="hljs-keyword">let</span> <span class="hljs-attr">lastError</span>: <span class="hljs-title class_">Error</span> | <span class="hljs-literal">undefined</span>;

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> attempt = <span class="hljs-number">1</span>; attempt &lt;= options.<span class="hljs-property">maxAttempts</span>; attempt++) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">fn</span>();
    } <span class="hljs-keyword">catch</span> (error) {
      lastError = error <span class="hljs-keyword">as</span> <span class="hljs-title class_">Error</span>;

      <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">isRetryable</span>(error) || attempt === options.<span class="hljs-property">maxAttempts</span>) {
        <span class="hljs-keyword">throw</span> error;
      }

      <span class="hljs-comment">// æŒ‡æ•°é€€é¿</span>
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">sleep</span>(options.<span class="hljs-property">delay</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">2</span>, attempt - <span class="hljs-number">1</span>));
    }
  }

  <span class="hljs-keyword">throw</span> lastError;
}
</code></pre>
<h3 data-id="heading-63">10.5 æµ‹è¯•ç­–ç•¥</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 1. å•å…ƒæµ‹è¯•</span>
<span class="hljs-title function_">describe</span>(<span class="hljs-string">"Session"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">it</span>(<span class="hljs-string">"should create session with correct defaults"</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> session = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Session</span>.<span class="hljs-title function_">create</span>({
      <span class="hljs-attr">projectID</span>: <span class="hljs-string">"test-project"</span>,
      <span class="hljs-attr">directory</span>: <span class="hljs-string">"/test"</span>,
    });

    <span class="hljs-title function_">expect</span>(session.<span class="hljs-property">id</span>).<span class="hljs-title function_">toBeDefined</span>();
    <span class="hljs-title function_">expect</span>(session.<span class="hljs-property">title</span>).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">""</span>);
    <span class="hljs-title function_">expect</span>(session.<span class="hljs-property">time</span>.<span class="hljs-property">created</span>).<span class="hljs-title function_">toBeLessThanOrEqual</span>(<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>());
  });
});

<span class="hljs-comment">// 2. é›†æˆæµ‹è¯•</span>
<span class="hljs-title function_">describe</span>(<span class="hljs-string">"Tool Execution"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">it</span>(<span class="hljs-string">"should read file correctly"</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title class_">ReadTool</span>.<span class="hljs-title function_">execute</span>(
      { <span class="hljs-attr">file_path</span>: <span class="hljs-string">"/test/file.txt"</span> },
      mockContext
    );

    <span class="hljs-title function_">expect</span>(result.<span class="hljs-property">output</span>).<span class="hljs-title function_">toContain</span>(<span class="hljs-string">"file content"</span>);
  });
});

<span class="hljs-comment">// 3. E2E æµ‹è¯•</span>
<span class="hljs-title function_">describe</span>(<span class="hljs-string">"Full Workflow"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">it</span>(<span class="hljs-string">"should complete code editing task"</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> session = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Session</span>.<span class="hljs-title function_">create</span>({...});

    <span class="hljs-keyword">await</span> <span class="hljs-title class_">SessionPrompt</span>.<span class="hljs-title function_">prompt</span>({
      <span class="hljs-attr">sessionID</span>: session.<span class="hljs-property">id</span>,
      <span class="hljs-attr">parts</span>: [{ <span class="hljs-attr">type</span>: <span class="hljs-string">"text"</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">"Fix the bug in app.ts"</span> }],
    });

    <span class="hljs-keyword">const</span> messages = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Session</span>.<span class="hljs-title function_">messages</span>(session.<span class="hljs-property">id</span>);
    <span class="hljs-keyword">const</span> lastAssistant = messages.<span class="hljs-title function_">findLast</span>(<span class="hljs-function"><span class="hljs-params">m</span> =&gt;</span> m.<span class="hljs-property">role</span> === <span class="hljs-string">"assistant"</span>);

    <span class="hljs-title function_">expect</span>(lastAssistant.<span class="hljs-property">finish</span>).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">"stop"</span>);
    <span class="hljs-title function_">expect</span>(lastAssistant.<span class="hljs-property">parts</span>.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p.<span class="hljs-property">type</span> === <span class="hljs-string">"tool"</span> &amp;&amp; p.<span class="hljs-property">state</span>.<span class="hljs-property">name</span> === <span class="hljs-string">"edit"</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-literal">true</span>);
  });
});
</code></pre>
<hr/>
<h2 data-id="heading-64">ç»“è¯­ï¼šAI ç¼–ç¨‹çš„æœªæ¥</h2>
<h3 data-id="heading-65">å›é¡¾ï¼šæˆ‘ä»¬å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ</h3>
<p>é€šè¿‡æ·±å…¥ OpenCode çš„æºç ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ä¸€ä¸ªç°ä»£ AI Agent æ¡†æ¶çš„å®Œæ•´å®ç°ï¼š</p>
<ol>
<li><strong>ä¼šè¯ç®¡ç†</strong>ï¼šä¸‰å±‚ç»“æ„ï¼ˆSession â†’ Message â†’ Partï¼‰æ”¯æŒå¤æ‚çš„çŠ¶æ€è¿½è¸ª</li>
<li><strong>Agent ç³»ç»Ÿ</strong>ï¼šä¸“ä¸šåŒ–çš„è§’è‰²å®šä¹‰ï¼Œæ”¯æŒå­ä»»åŠ¡å’Œå¹¶è¡Œæ‰§è¡Œ</li>
<li><strong>å·¥å…·ç³»ç»Ÿ</strong>ï¼šå£°æ˜å¼å®šä¹‰ï¼Œä¸Šä¸‹æ–‡æ„ŸçŸ¥ï¼Œæƒé™æ§åˆ¶</li>
<li><strong>Provider æŠ½è±¡</strong>ï¼šç»Ÿä¸€æ¥å£ï¼Œæ”¯æŒ 18+ LLM æä¾›å•†</li>
<li><strong>ä¸Šä¸‹æ–‡å‹ç¼©</strong>ï¼šå¤šå±‚ç­–ç•¥ï¼ˆè£å‰ªã€æ‘˜è¦ã€è¿‡æ»¤ï¼‰è§£å†³é•¿å¯¹è¯é—®é¢˜</li>
<li><strong>å®‰å…¨æœºåˆ¶</strong>ï¼šç»†ç²’åº¦æƒé™æ§åˆ¶ï¼Œæ­»å¾ªç¯ä¿æŠ¤</li>
</ol>
<h3 data-id="heading-66">å±•æœ›ï¼šAI ç¼–ç¨‹çš„ä¸‹ä¸€æ­¥</h3>
<p>OpenCode ä»£è¡¨äº† AI ç¼–ç¨‹åŠ©æ‰‹çš„<strong>å½“å‰æ°´å¹³</strong>ï¼Œä½†è¿™åªæ˜¯å¼€å§‹ã€‚æœªæ¥å¯èƒ½çš„å‘å±•æ–¹å‘ï¼š</p>
<p><strong>1. æ›´å¼ºçš„ä»£ç ç†è§£</strong></p>
<ul>
<li>é›†æˆæ›´å¤š LSP åŠŸèƒ½</li>
<li>æ”¯æŒç±»å‹æ¨å¯¼å’Œé‡æ„</li>
<li>ç†è§£é¡¹ç›®æ¶æ„å’Œè®¾è®¡æ¨¡å¼</li>
</ul>
<p><strong>2. æ›´æ™ºèƒ½çš„ä»»åŠ¡è§„åˆ’</strong></p>
<ul>
<li>è‡ªåŠ¨åˆ†è§£å¤æ‚ä»»åŠ¡</li>
<li>é¢„æµ‹å¯èƒ½çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</li>
<li>å­¦ä¹ ç”¨æˆ·çš„ç¼–ç ä¹ æƒ¯</li>
</ul>
<p><strong>3. æ›´å¥½çš„åä½œä½“éªŒ</strong></p>
<ul>
<li>å¤š Agent åä½œ</li>
<li>äººæœºæ··åˆç¼–ç¨‹</li>
<li>å®æ—¶ä»£ç å®¡æŸ¥</li>
</ul>
<p><strong>4. æ›´å¹¿æ³›çš„é›†æˆ</strong></p>
<ul>
<li>ä¸ CI/CD ç³»ç»Ÿé›†æˆ</li>
<li>æ”¯æŒæ›´å¤šç¼–ç¨‹è¯­è¨€å’Œæ¡†æ¶</li>
<li>è¿æ¥æ›´å¤šå¤–éƒ¨æœåŠ¡ï¼ˆæ•°æ®åº“ã€APIã€æ–‡æ¡£ï¼‰</li>
</ul>
<h3 data-id="heading-67">æœ€åçš„è¯</h3>
<p>OpenCode ä¸ä»…ä»…æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå®ƒæ˜¯å¯¹"AI èƒ½ä¸ºç¼–ç¨‹åšä»€ä¹ˆ"è¿™ä¸ªé—®é¢˜çš„ä¸€æ¬¡è®¤çœŸå›ç­”ã€‚</p>
<p>å®ƒçš„ä»£ç åº“å±•ç¤ºäº†å¦‚ä½•å°†å¤æ‚çš„ AI èƒ½åŠ›åŒ…è£…æˆä¼˜é›…çš„å¼€å‘ä½“éªŒã€‚æ¯ä¸€ä¸ªè®¾è®¡å†³ç­–â€”â€”ä»æµå¼æ€è€ƒæå–åˆ°ä¸Šä¸‹æ–‡å‹ç¼©ï¼Œä»æƒé™ç³»ç»Ÿåˆ°å›æ»šåŠŸèƒ½â€”â€”éƒ½æ˜¯ä¸ºäº†è®© AI æˆä¸ºçœŸæ­£æœ‰ç”¨çš„ç¼–ç¨‹ä¼™ä¼´ã€‚</p>
<p>å¦‚æœä½ æ˜¯ä¸€åå¼€å‘è€…ï¼Œæˆ‘å¼ºçƒˆå»ºè®®ä½ ï¼š</p>
<ol>
<li><strong>ä½¿ç”¨å®ƒ</strong>ï¼šäº²èº«ä½“éªŒ AI ç¼–ç¨‹çš„æ„Ÿè§‰</li>
<li><strong>é˜…è¯»å®ƒ</strong>ï¼šæºç æ˜¯æœ€å¥½çš„æ•™æ</li>
<li><strong>è´¡çŒ®å®ƒ</strong>ï¼šå¼€æºé¡¹ç›®éœ€è¦ç¤¾åŒºçš„åŠ›é‡</li>
</ol>
<p>AI ä¸ä¼šå–ä»£ç¨‹åºå‘˜ï¼Œä½†ä¼šä½¿ç”¨ AI çš„ç¨‹åºå‘˜ä¼šå–ä»£ä¸ä¼šçš„ã€‚</p>
<p><strong>ç°åœ¨ï¼Œæ˜¯æ—¶å€™æ‹¥æŠ± AI ç¼–ç¨‹çš„æœªæ¥äº†ã€‚</strong></p>
<hr/>
<h2 data-id="heading-68">é™„å½•ï¼šå¿«é€Ÿå‚è€ƒ</h2>
<h3 data-id="heading-69">A. æ ¸å¿ƒæ–‡ä»¶ä½ç½®</h3>









































<table><thead><tr><th>åŠŸèƒ½</th><th>æ–‡ä»¶è·¯å¾„</th></tr></thead><tbody><tr><td>CLI å…¥å£</td><td><code>packages/opencode/src/index.ts</code></td></tr><tr><td>Session ç®¡ç†</td><td><code>packages/opencode/src/session/index.ts</code></td></tr><tr><td>ä¸»å¾ªç¯</td><td><code>packages/opencode/src/session/prompt.ts</code></td></tr><tr><td>æµå¤„ç†</td><td><code>packages/opencode/src/session/processor.ts</code></td></tr><tr><td>LLM è°ƒç”¨</td><td><code>packages/opencode/src/session/llm.ts</code></td></tr><tr><td>å·¥å…·æ³¨å†Œ</td><td><code>packages/opencode/src/tool/registry.ts</code></td></tr><tr><td>Provider</td><td><code>packages/opencode/src/provider/provider.ts</code></td></tr><tr><td>æƒé™ç³»ç»Ÿ</td><td><code>packages/opencode/src/permission/</code></td></tr></tbody></table>
<h3 data-id="heading-70">B. å…³é”®ç±»å‹å®šä¹‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Session</span>
<span class="hljs-title class_">Session</span>.<span class="hljs-property">Info</span>
<span class="hljs-title class_">Session</span>.<span class="hljs-property">Event</span>.<span class="hljs-property">Created</span>
<span class="hljs-title class_">Session</span>.<span class="hljs-property">Event</span>.<span class="hljs-property">Updated</span>

<span class="hljs-comment">// Message</span>
<span class="hljs-title class_">MessageV2</span>.<span class="hljs-property">User</span>
<span class="hljs-title class_">MessageV2</span>.<span class="hljs-property">Assistant</span>
<span class="hljs-title class_">MessageV2</span>.<span class="hljs-property">Part</span>

<span class="hljs-comment">// Tool</span>
<span class="hljs-title class_">Tool</span>.<span class="hljs-property">Context</span>
<span class="hljs-title class_">Tool</span>.<span class="hljs-property">Result</span>
<span class="hljs-title class_">ToolState</span>

<span class="hljs-comment">// Agent</span>
<span class="hljs-title class_">Agent</span>.<span class="hljs-property">Info</span>
<span class="hljs-title class_">Agent</span>.<span class="hljs-property">Mode</span>

<span class="hljs-comment">// Provider</span>
<span class="hljs-title class_">Provider</span>.<span class="hljs-property">Model</span>
<span class="hljs-title class_">Provider</span>.<span class="hljs-property">Options</span>
</code></pre>
<h3 data-id="heading-71">C. é…ç½®æ–‡ä»¶</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…¨å±€é…ç½®</span>
~/.opencode/config.json

<span class="hljs-comment"># é¡¹ç›®é…ç½®</span>
.opencode/config.json

<span class="hljs-comment"># è‡ªå®šä¹‰æŒ‡ä»¤</span>
AGENTS.md
CLAUDE.md
CONTEXT.md

<span class="hljs-comment"># è‡ªå®šä¹‰å·¥å…·</span>
~/.opencode/tool/*.ts
</code></pre>
<h3 data-id="heading-72">D. ç¯å¢ƒå˜é‡</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># API Keys</span>
ANTHROPIC_API_KEY=sk-ant-...
OPENAI_API_KEY=sk-...
GOOGLE_API_KEY=...

<span class="hljs-comment"># é…ç½®</span>
OPENCODE_MODEL=claude-4-5-sonnet
OPENCODE_PROVIDER=anthropic
OPENCODE_DEBUG=<span class="hljs-literal">true</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆ"ç¼“å­˜"èƒ½æé«˜ç³»ç»Ÿæ€§èƒ½ï¼Ÿâ€”â€”ä» CPU ç¼“å­˜åˆ°åˆ†å¸ƒå¼ç¼“å­˜]]></title>    <link>https://juejin.cn/post/7592170706026823715</link>    <guid>https://juejin.cn/post/7592170706026823715</guid>    <pubDate>2026-01-07T08:46:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592170706026823715" data-draft-id="7592170171634761743" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆ&quot;ç¼“å­˜&quot;èƒ½æé«˜ç³»ç»Ÿæ€§èƒ½ï¼Ÿâ€”â€”ä» CPU ç¼“å­˜åˆ°åˆ†å¸ƒå¼ç¼“å­˜"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-07T08:46:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ— é™å¤§6"/> <meta itemprop="url" content="https://juejin.cn/user/2865758605422890"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆ"ç¼“å­˜"èƒ½æé«˜ç³»ç»Ÿæ€§èƒ½ï¼Ÿâ€”â€”ä» CPU ç¼“å­˜åˆ°åˆ†å¸ƒå¼ç¼“å­˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2865758605422890/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ— é™å¤§6
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T08:46:41.000Z" title="Wed Jan 07 2026 08:46:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ’¨ ä¸ºä»€ä¹ˆ"ç¼“å­˜"èƒ½æé«˜ç³»ç»Ÿæ€§èƒ½ï¼Ÿâ€”â€”ä» CPU ç¼“å­˜åˆ°åˆ†å¸ƒå¼ç¼“å­˜ âš¡</h2>
<blockquote>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ— é™å¤§ï¼Œæ¬¢è¿æ”¶çœ‹åä¸‡ä¸ªä¸ºä»€ä¹ˆç³»åˆ—æ–‡ç« </p>
<p>å¸Œæœ›ä»Šå¤©çš„å†…å®¹èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©</p>
</blockquote>
<p>æƒ³è±¡ä¸€ä¸‹ï¼šä½ å»å›¾ä¹¦é¦†å€Ÿä¸€æœ¬ä¹¦ï¼Œæ¯æ¬¡éƒ½è¦ä»ä¹¦æ¶ä¸Šæ‰¾ï¼Œçœ‹å®Œå†æ”¾å›å»â€”â€”è¿™æ ·æ˜¯ä¸æ˜¯å¾ˆéº»çƒ¦ï¼Ÿ</p>
<p>å¦‚æœæŠŠä½ æœ€è¿‘å¸¸çœ‹çš„å‡ æœ¬ä¹¦æ”¾åœ¨ä¹¦æ¡Œæ—è¾¹ï¼Œæ˜¯ä¸æ˜¯æ–¹ä¾¿å¤šäº†ï¼Ÿ</p>
<p>è¿™å°±æ˜¯<strong>ç¼“å­˜</strong>çš„åŸç†ï¼å®ƒå°±åƒä½ ä¹¦æ¡Œæ—è¾¹çš„"å¸¸ç”¨ä¹¦åŒº"ï¼ŒæŠŠé¢‘ç¹ä½¿ç”¨çš„æ•°æ®å­˜æ”¾åœ¨ç¦»CPUæ›´è¿‘çš„åœ°æ–¹ï¼Œæé«˜è®¿é—®é€Ÿåº¦ã€‚</p>
<h3 data-id="heading-1">ğŸ¤” æ ¸å¿ƒé—®é¢˜ï¼šç¼“å­˜çš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿä¸åŒå±‚çº§çš„ç¼“å­˜æœ‰ä½•ä½œç”¨ï¼Ÿ</h3>
<p>å¾ˆå¤šäººè§‰å¾—"ç¼“å­˜"æ˜¯ä¸ªå¤æ‚çš„æŠ€æœ¯æ¦‚å¿µï¼Œå…¶å®å®ƒçš„æœ¬è´¨å¾ˆç®€å•ï¼š<strong>ç”¨ç©ºé—´æ¢æ—¶é—´</strong>â€”â€”æŠŠæ•°æ®å­˜æ”¾åœ¨æ›´å¿«çš„å­˜å‚¨ä»‹è´¨ä¸­ï¼Œå‡å°‘è®¿é—®æ…¢ä»‹è´¨çš„æ¬¡æ•°ã€‚</p>
<h4 data-id="heading-2">ç¼“å­˜çš„"ä¸‰å¤§æ³•å®"</h4>
<ul>
<li>âš¡ <strong>é€Ÿåº¦</strong>ï¼šç¼“å­˜çš„è®¿é—®é€Ÿåº¦æ¯”åŸå§‹å­˜å‚¨å¿«å¾—å¤š</li>
<li>ğŸ“Š <strong>å‘½ä¸­ç‡</strong>ï¼šç¼“å­˜ä¸­æ‰¾åˆ°æ•°æ®çš„æ¦‚ç‡ï¼ˆè¶Šé«˜è¶Šå¥½ï¼‰</li>
<li>ğŸ”„ <strong>æ›¿æ¢ç­–ç•¥</strong>ï¼šå½“ç¼“å­˜æ»¡äº†ï¼Œå¦‚ä½•å†³å®šæ·˜æ±°å“ªäº›æ•°æ®</li>
</ul>
<h4 data-id="heading-3">ä¸ºä»€ä¹ˆç¼“å­˜èƒ½æé«˜æ€§èƒ½ï¼Ÿ</h4>
<ul>
<li>ğŸŒ <strong>å­˜å‚¨é€Ÿåº¦å·®å¼‚</strong>ï¼šä¸åŒå­˜å‚¨ä»‹è´¨çš„é€Ÿåº¦å·®å¼‚å·¨å¤§ï¼ˆCPUç¼“å­˜æ˜¯ç¡¬ç›˜çš„1000å€ä»¥ä¸Šï¼‰</li>
<li>ğŸ” <strong>å±€éƒ¨æ€§åŸç†</strong>ï¼šç¨‹åºå’Œæ•°æ®çš„è®¿é—®å…·æœ‰å±€éƒ¨æ€§ï¼ˆæ—¶é—´å±€éƒ¨æ€§ã€ç©ºé—´å±€éƒ¨æ€§ï¼‰</li>
<li>ğŸ’ª <strong>å‡å°‘CPUç­‰å¾…</strong>ï¼šCPUä¸ç”¨é•¿æ—¶é—´ç­‰å¾…æ…¢å­˜å‚¨çš„å“åº”</li>
<li>ğŸ’° <strong>é™ä½æˆæœ¬</strong>ï¼šé«˜é€Ÿå­˜å‚¨ï¼ˆå¦‚CPUç¼“å­˜ï¼‰æˆæœ¬é«˜ï¼Œä½é€Ÿå­˜å‚¨ï¼ˆå¦‚ç¡¬ç›˜ï¼‰æˆæœ¬ä½ï¼Œç¼“å­˜å¯ä»¥å¹³è¡¡æˆæœ¬å’Œæ€§èƒ½</li>
</ul>
<h3 data-id="heading-4">ğŸ“œ ä»"CPU"åˆ°"åˆ†å¸ƒå¼"ï¼šç¼“å­˜çš„è¿›åŒ–å²</h3>
<h4 data-id="heading-5">1. âš¡ CPUç¼“å­˜ï¼š"ç¦»CPUæœ€è¿‘çš„ç¼“å­˜"</h4>
<p>1980å¹´ä»£ï¼Œéšç€CPUé€Ÿåº¦çš„é£é€Ÿæå‡ï¼Œ<strong>CPUç¼“å­˜</strong>åº”è¿è€Œç”Ÿï¼Œå®ƒæ˜¯ç¦»CPUæœ€è¿‘çš„ç¼“å­˜ã€‚</p>
<p><strong>å‘å±•å†ç¨‹</strong>ï¼š</p>
<ul>
<li><strong>ä¸€çº§ç¼“å­˜ï¼ˆL1 Cacheï¼‰</strong>ï¼š1985å¹´ï¼Œè‹±ç‰¹å°”80386 CPUé¦–æ¬¡å¼•å…¥L1ç¼“å­˜</li>
<li><strong>äºŒçº§ç¼“å­˜ï¼ˆL2 Cacheï¼‰</strong>ï¼š1995å¹´ï¼Œå¥”è…¾Pro CPUé¦–æ¬¡å°†L2ç¼“å­˜é›†æˆåœ¨CPUèŠ¯ç‰‡ä¸­</li>
<li><strong>ä¸‰çº§ç¼“å­˜ï¼ˆL3 Cacheï¼‰</strong>ï¼š2003å¹´ï¼Œè‡³å¼ºå¤„ç†å™¨é¦–æ¬¡å¼•å…¥L3ç¼“å­˜</li>
</ul>
<p><strong>CPUç¼“å­˜çš„ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>é€Ÿåº¦æå¿«ï¼ˆL1ç¼“å­˜è®¿é—®å»¶è¿Ÿ&lt;1nsï¼ŒL3ç¼“å­˜&lt;10nsï¼‰</li>
<li>å®¹é‡å°ï¼ˆL1ç¼“å­˜å‡ åKBï¼ŒL3ç¼“å­˜å‡ MBåˆ°å‡ åMBï¼‰</li>
<li>å¤šçº§ç»“æ„ï¼ˆL1â†’L2â†’L3ï¼‰</li>
<li>ç¡¬ä»¶ç®¡ç†ï¼Œè½¯ä»¶ä¸å¯è§</li>
</ul>
<h4 data-id="heading-6">2. ğŸ“ å†…å­˜ç¼“å­˜ï¼š"ç¨‹åºçš„é«˜é€Ÿç¼“å†²åŒº"</h4>
<p>1990å¹´ä»£ï¼Œéšç€æ“ä½œç³»ç»Ÿçš„å‘å±•ï¼Œ<strong>å†…å­˜ç¼“å­˜</strong>å¼€å§‹æ™®åŠï¼Œå®ƒæ˜¯ç¨‹åºè¿è¡Œæ—¶çš„é«˜é€Ÿç¼“å†²åŒºã€‚</p>
<p><strong>å‘å±•å†ç¨‹</strong>ï¼š</p>
<ul>
<li><strong>è™šæ‹Ÿå†…å­˜</strong>ï¼š1960å¹´ä»£æå‡ºï¼Œ1980å¹´ä»£æ™®åŠ</li>
<li><strong>æ–‡ä»¶ç³»ç»Ÿç¼“å­˜</strong>ï¼šæ“ä½œç³»ç»Ÿå°†å¸¸ç”¨æ–‡ä»¶æ•°æ®ç¼“å­˜åˆ°å†…å­˜</li>
<li><strong>åº”ç”¨ç¨‹åºç¼“å­˜</strong>ï¼šç¨‹åºå†…éƒ¨ä½¿ç”¨å†…å­˜ç¼“å­˜æé«˜æ€§èƒ½</li>
</ul>
<p><strong>å†…å­˜ç¼“å­˜çš„ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>é€Ÿåº¦å¿«ï¼ˆè®¿é—®å»¶è¿Ÿçº¦100nsï¼‰</li>
<li>å®¹é‡ä¸­ç­‰ï¼ˆå‡ GBåˆ°å‡ åGBï¼‰</li>
<li>è½¯ä»¶å¯ç®¡ç†</li>
<li>æ˜“å¤±æ€§ï¼ˆæ–­ç”µæ•°æ®ä¸¢å¤±ï¼‰</li>
</ul>
<h4 data-id="heading-7">3. ğŸ’¾ ç£ç›˜ç¼“å­˜ï¼š"ç¡¬ç›˜çš„åŠ é€Ÿç¥å™¨"</h4>
<p>2000å¹´ä»£ï¼Œéšç€æœºæ¢°ç¡¬ç›˜çš„å¹¿æ³›ä½¿ç”¨ï¼Œ<strong>ç£ç›˜ç¼“å­˜</strong>æˆä¸ºæé«˜ç¡¬ç›˜æ€§èƒ½çš„å…³é”®ã€‚</p>
<p><strong>å‘å±•å†ç¨‹</strong>ï¼š</p>
<ul>
<li><strong>ç¡¬ç›˜å†…éƒ¨ç¼“å­˜</strong>ï¼šç¡¬ç›˜æ§åˆ¶å™¨ä¸Šçš„é«˜é€Ÿç¼“å­˜</li>
<li><strong>RAIDç¼“å­˜</strong>ï¼šRAIDæ§åˆ¶å™¨ä¸Šçš„é«˜é€Ÿç¼“å­˜</li>
<li><strong>å›ºæ€æ··åˆç¡¬ç›˜ï¼ˆSSHDï¼‰</strong>ï¼šç»“åˆäº†æœºæ¢°ç¡¬ç›˜å’Œé—ªå­˜ç¼“å­˜</li>
</ul>
<p><strong>ç£ç›˜ç¼“å­˜çš„ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>é€Ÿåº¦è¾ƒæ…¢ï¼ˆè®¿é—®å»¶è¿Ÿçº¦5msï¼‰</li>
<li>å®¹é‡è¾ƒå¤§ï¼ˆå‡ åMBåˆ°å‡ GBï¼‰</li>
<li>éæ˜“å¤±æ€§ï¼ˆéƒ¨åˆ†RAIDç¼“å­˜æœ‰ç”µæ± å¤‡ä»½ï¼‰</li>
<li>ç¡¬ä»¶å’Œè½¯ä»¶å…±åŒç®¡ç†</li>
</ul>
<h4 data-id="heading-8">4. ğŸŒ åˆ†å¸ƒå¼ç¼“å­˜ï¼š"äº’è”ç½‘æ—¶ä»£çš„ç¼“å­˜"</h4>
<p>2010å¹´ä»£ï¼Œéšç€äº’è”ç½‘çš„å…´èµ·ï¼Œ<strong>åˆ†å¸ƒå¼ç¼“å­˜</strong>æˆä¸ºå¤§è§„æ¨¡ç³»ç»Ÿçš„å¿…å¤‡ç»„ä»¶ã€‚</p>
<p><strong>å‘å±•å†ç¨‹</strong>ï¼š</p>
<ul>
<li><strong>Memcached</strong>ï¼š2003å¹´è¯ç”Ÿï¼Œæœ€æ—©çš„åˆ†å¸ƒå¼ç¼“å­˜</li>
<li><strong>Redis</strong>ï¼š2009å¹´è¯ç”Ÿï¼ŒåŠŸèƒ½æ›´ä¸°å¯Œçš„åˆ†å¸ƒå¼ç¼“å­˜</li>
<li><strong>Tair</strong>ï¼šé˜¿é‡Œå·´å·´å¼€æºçš„åˆ†å¸ƒå¼ç¼“å­˜</li>
<li><strong>ElastiCache</strong>ï¼šAWSæä¾›çš„æ‰˜ç®¡ç¼“å­˜æœåŠ¡</li>
</ul>
<p><strong>åˆ†å¸ƒå¼ç¼“å­˜çš„ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>é€Ÿåº¦å¿«ï¼ˆè®¿é—®å»¶è¿Ÿçº¦1msï¼‰</li>
<li>å®¹é‡å¤§ï¼ˆå‡ åGBåˆ°å‡ ç™¾GBï¼‰</li>
<li>åˆ†å¸ƒå¼æ¶æ„ï¼Œæ”¯æŒæ°´å¹³æ‰©å±•</li>
<li>æ”¯æŒæŒä¹…åŒ–ï¼ˆéƒ¨åˆ†ç¼“å­˜æ”¯æŒï¼‰</li>
<li>è½¯ä»¶ç®¡ç†ï¼Œé«˜åº¦å¯æ§</li>
</ul>
<h3 data-id="heading-9">ğŸ”§ æŠ€æœ¯åŸç†ï¼šç¼“å­˜çš„"ç§˜å¯†æ­¦å™¨"</h3>
<h4 data-id="heading-10">1. ğŸ“Š å±€éƒ¨æ€§åŸç†ï¼š"ç¼“å­˜çš„ç†è®ºåŸºç¡€"</h4>
<p>å±€éƒ¨æ€§åŸç†æ˜¯ç¼“å­˜å­˜åœ¨çš„<strong>ç†è®ºåŸºç¡€</strong>ï¼Œå®ƒåŒ…æ‹¬ä¸¤ç§ç±»å‹ï¼š</p>
<p><strong>æ—¶é—´å±€éƒ¨æ€§</strong>ï¼š</p>
<ul>
<li>æœ€è¿‘è®¿é—®è¿‡çš„æ•°æ®ï¼Œæœªæ¥å¾ˆå¯èƒ½å†æ¬¡è¢«è®¿é—®</li>
<li>æ¯”å¦‚ï¼šå¾ªç¯å˜é‡ã€å¸¸ç”¨å‡½æ•°ã€çƒ­ç‚¹æ•°æ®</li>
<li>ä¾‹å­ï¼šä½ ä»Šå¤©çœ‹çš„ä¹¦ï¼Œæ˜å¤©å¯èƒ½è¿˜ä¼šçœ‹</li>
</ul>
<p><strong>ç©ºé—´å±€éƒ¨æ€§</strong>ï¼š</p>
<ul>
<li>è®¿é—®æŸä¸ªä½ç½®çš„æ•°æ®ï¼Œå…¶é™„è¿‘çš„æ•°æ®æœªæ¥å¾ˆå¯èƒ½è¢«è®¿é—®</li>
<li>æ¯”å¦‚ï¼šæ•°ç»„éå†ã€ç»“æ„ä½“è®¿é—®ã€è¿ç»­å­˜å‚¨</li>
<li>ä¾‹å­ï¼šä½ çœ‹äº†ç¬¬100é¡µï¼Œæ¥ä¸‹æ¥å¯èƒ½ä¼šçœ‹ç¬¬101é¡µ</li>
</ul>
<h4 data-id="heading-11">2. ğŸ¯ ç¼“å­˜å‘½ä¸­ç‡ï¼š"ç¼“å­˜çš„ç”Ÿå‘½çº¿"</h4>
<p>ç¼“å­˜å‘½ä¸­ç‡æ˜¯è¡¡é‡ç¼“å­˜æ•ˆæœçš„<strong>æ ¸å¿ƒæŒ‡æ ‡</strong>ï¼Œå®ƒè¡¨ç¤ºç¼“å­˜ä¸­æ‰¾åˆ°æ•°æ®çš„æ¦‚ç‡ï¼š</p>
<p><strong>è®¡ç®—å…¬å¼</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">ç¼“å­˜å‘½ä¸­ç‡ = ç¼“å­˜å‘½ä¸­æ¬¡æ•° / (ç¼“å­˜å‘½ä¸­æ¬¡æ•° + ç¼“å­˜æœªå‘½ä¸­æ¬¡æ•°)
</code></pre>
<p><strong>å½±å“å‘½ä¸­ç‡çš„å› ç´ </strong>ï¼š</p>
<ul>
<li>ğŸ“¦ <strong>ç¼“å­˜å®¹é‡</strong>ï¼šå®¹é‡è¶Šå¤§ï¼Œå‘½ä¸­ç‡è¶Šé«˜ï¼ˆä½†æˆæœ¬ä¹Ÿè¶Šé«˜ï¼‰</li>
<li>ğŸ”„ <strong>æ›¿æ¢ç­–ç•¥</strong>ï¼šå¥½çš„æ›¿æ¢ç­–ç•¥èƒ½æé«˜å‘½ä¸­ç‡</li>
<li>ğŸ” <strong>å±€éƒ¨æ€§å¥½å</strong>ï¼šç¨‹åºçš„å±€éƒ¨æ€§è¶Šå¥½ï¼Œå‘½ä¸­ç‡è¶Šé«˜</li>
<li>ğŸ“Š <strong>æ•°æ®åˆ†å¸ƒ</strong>ï¼šçƒ­ç‚¹æ•°æ®è¶Šé›†ä¸­ï¼Œå‘½ä¸­ç‡è¶Šé«˜</li>
</ul>
<p><strong>è¡Œä¸šæ ‡å‡†</strong>ï¼š</p>
<ul>
<li>CPUç¼“å­˜ï¼šå‘½ä¸­ç‡å¯è¾¾90%ä»¥ä¸Š</li>
<li>å†…å­˜ç¼“å­˜ï¼šå‘½ä¸­ç‡å¯è¾¾80%ä»¥ä¸Š</li>
<li>åˆ†å¸ƒå¼ç¼“å­˜ï¼šå‘½ä¸­ç‡å¯è¾¾70%ä»¥ä¸Š</li>
</ul>
<h4 data-id="heading-12">3. ğŸ”„ ç¼“å­˜æ›¿æ¢ç®—æ³•ï¼š"è°è¯¥è¢«æ·˜æ±°ï¼Ÿ"</h4>
<p>å½“ç¼“å­˜æ»¡äº†ï¼Œéœ€è¦å†³å®šæ·˜æ±°å“ªäº›æ•°æ®ï¼Œè¿™å°±æ˜¯<strong>ç¼“å­˜æ›¿æ¢ç®—æ³•</strong>çš„å·¥ä½œï¼</p>
<p><strong>å¸¸è§çš„æ›¿æ¢ç®—æ³•</strong>ï¼š</p>
<h5 data-id="heading-13">ğŸ“Œ FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰</h5>
<ul>
<li><strong>åŸç†</strong>ï¼šå…ˆè¿›å…¥ç¼“å­˜çš„æ•°æ®å…ˆæ·˜æ±°</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šå®ç°ç®€å•ï¼Œå¼€é”€å°</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šä¸è€ƒè™‘æ•°æ®çš„è®¿é—®é¢‘ç‡</li>
<li><strong>ä¾‹å­</strong>ï¼šæ’é˜Ÿä¹°ç¥¨ï¼Œå…ˆåˆ°å…ˆå¾—</li>
</ul>
<h5 data-id="heading-14">ğŸ“ˆ LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰</h5>
<ul>
<li><strong>åŸç†</strong>ï¼šæ·˜æ±°æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šè€ƒè™‘äº†æ—¶é—´å±€éƒ¨æ€§</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šå®ç°å¤æ‚ï¼Œéœ€è¦ç»´æŠ¤è®¿é—®é¡ºåº</li>
<li><strong>ä¾‹å­</strong>ï¼šä¹¦æ¶ä¸Šçš„ä¹¦ï¼Œæœ€ä¹…æ²¡çœ‹çš„å…ˆæ”¾å›ä¹¦æ¶</li>
</ul>
<p><strong>ä»£ç å®ä¾‹</strong>ï¼šPythonå®ç°LRUç¼“å­˜</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> OrderedDict

<span class="hljs-keyword">class</span> <span class="hljs-title class_">LRUCache</span>:
    <span class="hljs-string">"""ç®€å•çš„LRUç¼“å­˜å®ç°"""</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, capacity: <span class="hljs-built_in">int</span></span>):
        self.capacity = capacity
        self.cache = OrderedDict()
  
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">self, key: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">any</span>:
        <span class="hljs-string">"""è·å–ç¼“å­˜ä¸­çš„æ•°æ®ï¼Œå¦‚æœä¸å­˜åœ¨è¿”å›None"""</span>
        <span class="hljs-keyword">if</span> key <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> self.cache:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
        <span class="hljs-comment"># å°†è®¿é—®çš„é”®ç§»åˆ°æœ«å°¾ï¼Œè¡¨ç¤ºæœ€è¿‘ä½¿ç”¨</span>
        self.cache.move_to_end(key)
        <span class="hljs-keyword">return</span> self.cache[key]
  
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">put</span>(<span class="hljs-params">self, key: <span class="hljs-built_in">str</span>, value: <span class="hljs-built_in">any</span></span>) -&gt; <span class="hljs-literal">None</span>:
        <span class="hljs-string">"""å°†æ•°æ®æ”¾å…¥ç¼“å­˜"""</span>
        <span class="hljs-keyword">if</span> key <span class="hljs-keyword">in</span> self.cache:
            <span class="hljs-comment"># æ›´æ–°æ•°æ®ï¼Œå¹¶ç§»åˆ°æœ«å°¾</span>
            self.cache.move_to_end(key)
        self.cache[key] = value
        <span class="hljs-comment"># å¦‚æœç¼“å­˜æ»¡äº†ï¼Œæ·˜æ±°æœ€æ—©çš„é”®</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(self.cache) &gt; self.capacity:
            self.cache.popitem(last=<span class="hljs-literal">False</span>)
  
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__str__</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""è¿”å›ç¼“å­˜çš„å­—ç¬¦ä¸²è¡¨ç¤º"""</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"LRUCache(capacity=<span class="hljs-subst">{self.capacity}</span>, items=<span class="hljs-subst">{<span class="hljs-built_in">list</span>(self.cache.items())}</span>)"</span>)

<span class="hljs-comment"># æµ‹è¯•LRUç¼“å­˜</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ¯ æµ‹è¯•LRUç¼“å­˜"</span>)
    cache = LRUCache(capacity=<span class="hljs-number">3</span>)
  
    <span class="hljs-comment"># æ”¾å…¥æ•°æ®</span>
    cache.put(<span class="hljs-string">"A"</span>, <span class="hljs-number">1</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ”¾å…¥A: <span class="hljs-subst">{cache}</span>"</span>)
  
    cache.put(<span class="hljs-string">"B"</span>, <span class="hljs-number">2</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ”¾å…¥B: <span class="hljs-subst">{cache}</span>"</span>)
  
    cache.put(<span class="hljs-string">"C"</span>, <span class="hljs-number">3</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ”¾å…¥C: <span class="hljs-subst">{cache}</span>"</span>)
  
    <span class="hljs-comment"># è®¿é—®Aï¼Œç§»åˆ°æœ«å°¾</span>
    cache.get(<span class="hljs-string">"A"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è®¿é—®A: <span class="hljs-subst">{cache}</span>"</span>)
  
    <span class="hljs-comment"># æ”¾å…¥Dï¼Œæ·˜æ±°æœ€æ—©çš„B</span>
    cache.put(<span class="hljs-string">"D"</span>, <span class="hljs-number">4</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ”¾å…¥D: <span class="hljs-subst">{cache}</span>"</span>)
  
    <span class="hljs-comment"># è®¿é—®ä¸å­˜åœ¨çš„E</span>
    result = cache.get(<span class="hljs-string">"E"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è®¿é—®E: <span class="hljs-subst">{result}</span>, ç¼“å­˜: <span class="hljs-subst">{cache}</span>"</span>)
  
    <span class="hljs-comment"># è¾“å‡º</span>
    <span class="hljs-comment"># ğŸ¯ æµ‹è¯•LRUç¼“å­˜</span>
    <span class="hljs-comment"># æ”¾å…¥A: LRUCache(capacity=3, items=[('A', 1)]))</span>
    <span class="hljs-comment"># æ”¾å…¥B: LRUCache(capacity=3, items=[('A', 1), ('B', 2)]))</span>
    <span class="hljs-comment"># æ”¾å…¥C: LRUCache(capacity=3, items=[('A', 1), ('B', 2), ('C', 3)]))</span>
    <span class="hljs-comment"># è®¿é—®A: LRUCache(capacity=3, items=[('B', 2), ('C', 3), ('A', 1)]))</span>
    <span class="hljs-comment"># æ”¾å…¥D: LRUCache(capacity=3, items=[('C', 3), ('A', 1), ('D', 4)]))</span>
    <span class="hljs-comment"># è®¿é—®E: None, ç¼“å­˜: LRUCache(capacity=3, items=[('C', 3), ('A', 1), ('D', 4)]))</span>
</code></pre>
<h5 data-id="heading-15">ğŸ“Š LFUï¼ˆæœ€å°‘ä½¿ç”¨é¢‘ç‡ï¼‰</h5>
<ul>
<li><strong>åŸç†</strong>ï¼šæ·˜æ±°ä½¿ç”¨é¢‘ç‡æœ€ä½çš„æ•°æ®</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šè€ƒè™‘äº†æ•°æ®çš„è®¿é—®é¢‘ç‡</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šå®ç°å¤æ‚ï¼Œéœ€è¦ç»´æŠ¤è®¿é—®é¢‘ç‡</li>
<li><strong>ä¾‹å­</strong>ï¼šå›¾ä¹¦é¦†çš„ä¹¦ï¼Œå€Ÿçš„äººæœ€å°‘çš„å…ˆä¸‹æ¶</li>
</ul>
<h5 data-id="heading-16">ğŸ† å…¶ä»–ç®—æ³•</h5>
<ul>
<li><strong>LRU-K</strong>ï¼šç»“åˆäº†LRUå’ŒLFUçš„ä¼˜ç‚¹</li>
<li><strong>ARCï¼ˆè‡ªé€‚åº”æ›¿æ¢ç¼“å­˜ï¼‰</strong>ï¼šè‡ªåŠ¨å¹³è¡¡LRUå’ŒLFU</li>
<li><strong>MRUï¼ˆæœ€è¿‘æœ€å¸¸ä½¿ç”¨ï¼‰</strong>ï¼šæ·˜æ±°æœ€è¿‘æœ€å¸¸ä½¿ç”¨çš„æ•°æ®</li>
</ul>
<h4 data-id="heading-17">4. ğŸ“ ç¼“å­˜ä¸€è‡´æ€§ï¼š"æ•°æ®åŒæ­¥é—®é¢˜"</h4>
<p>å½“åŸå§‹æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¦‚ä½•ç¡®ä¿ç¼“å­˜ä¸­çš„æ•°æ®ä¸åŸå§‹æ•°æ®ä¸€è‡´ï¼Ÿè¿™å°±æ˜¯<strong>ç¼“å­˜ä¸€è‡´æ€§</strong>é—®é¢˜ï¼</p>
<p><strong>å¸¸è§çš„è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<h5 data-id="heading-18">1. ğŸ”„ ç¼“å­˜æ›´æ–°ç­–ç•¥</h5>
<ul>
<li><strong>æ›´æ–°ç¼“å­˜</strong>ï¼šä¿®æ”¹åŸå§‹æ•°æ®åï¼ŒåŒæ—¶æ›´æ–°ç¼“å­˜</li>
<li><strong>åˆ é™¤ç¼“å­˜</strong>ï¼šä¿®æ”¹åŸå§‹æ•°æ®åï¼Œåˆ é™¤ç¼“å­˜ï¼ˆä¸‹æ¬¡è®¿é—®æ—¶é‡æ–°åŠ è½½ï¼‰</li>
<li><strong>å»¶è¿ŸåŒåˆ </strong>ï¼šä¿®æ”¹æ•°æ®åï¼Œå…ˆåˆ ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“ï¼Œå†å»¶è¿Ÿåˆ ä¸€æ¬¡ç¼“å­˜</li>
</ul>
<h5 data-id="heading-19">2. ğŸƒ å¼‚æ­¥æ›´æ–°</h5>
<ul>
<li>ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚Kafkaã€RabbitMQï¼‰å¼‚æ­¥æ›´æ–°ç¼“å­˜</li>
<li>é€‚åˆå®æ—¶æ€§è¦æ±‚ä¸é«˜çš„åœºæ™¯</li>
</ul>
<h5 data-id="heading-20">3. ğŸ”’ åˆ†å¸ƒå¼é”</h5>
<ul>
<li>ç¡®ä¿ç¼“å­˜æ›´æ–°çš„åŸå­æ€§</li>
<li>é˜²æ­¢å¹¶å‘æ›´æ–°å¯¼è‡´çš„æ•°æ®ä¸ä¸€è‡´</li>
</ul>
<h5 data-id="heading-21">4. ğŸ’¡ è¯»å†™åˆ†ç¦»</h5>
<ul>
<li>å†™æ“ä½œç›´æ¥æ›´æ–°æ•°æ®åº“ï¼Œä¸æ›´æ–°ç¼“å­˜</li>
<li>è¯»æ“ä½œå…ˆè¯»ç¼“å­˜ï¼Œç¼“å­˜æœªå‘½ä¸­åˆ™ä»æ•°æ®åº“åŠ è½½</li>
<li>é€‚åˆè¯»å¤šå†™å°‘çš„åœºæ™¯</li>
</ul>
<h3 data-id="heading-22">ğŸ“Š è¶£å‘³å¯¹æ¯”ï¼šä¸åŒå±‚çº§ç¼“å­˜çš„é€Ÿåº¦å’Œå®¹é‡å·®å¼‚</h3>






















































































<table><thead><tr><th>ç¼“å­˜å±‚çº§</th><th>å­˜å‚¨ä»‹è´¨</th><th>è®¿é—®é€Ÿåº¦</th><th>å®¹é‡å¤§å°</th><th>æˆæœ¬/GB</th><th>ç®¡ç†æ–¹å¼</th><th>å…¸å‹åº”ç”¨</th></tr></thead><tbody><tr><td>âš¡ L1 CPUç¼“å­˜</td><td>SRAM</td><td>&lt;1ns</td><td>å‡ åKB</td><td>$1,000,000+</td><td>ç¡¬ä»¶</td><td>CPUæŒ‡ä»¤å’Œæ•°æ®</td></tr><tr><td>ğŸ“ L2 CPUç¼“å­˜</td><td>SRAM</td><td>1-5ns</td><td>å‡ ç™¾KB</td><td>$500,000+</td><td>ç¡¬ä»¶</td><td>CPUå¸¸ç”¨æ•°æ®</td></tr><tr><td>ğŸ—„ï¸ L3 CPUç¼“å­˜</td><td>SRAM</td><td>5-10ns</td><td>å‡ MBåˆ°å‡ åMB</td><td>$100,000+</td><td>ç¡¬ä»¶</td><td>CPUå…±äº«æ•°æ®</td></tr><tr><td>ğŸ’» å†…å­˜ç¼“å­˜</td><td>DRAM</td><td>~100ns</td><td>å‡ GBåˆ°å‡ åGB</td><td>$100-500</td><td>è½¯ä»¶</td><td>æ“ä½œç³»ç»Ÿã€åº”ç”¨ç¨‹åº</td></tr><tr><td>ğŸ’¾ ç£ç›˜ç¼“å­˜</td><td>é—ªå­˜/DRAM</td><td>~5ms</td><td>å‡ åMBåˆ°å‡ GB</td><td>$10-100</td><td>ç¡¬ä»¶+è½¯ä»¶</td><td>ç¡¬ç›˜ã€RAIDæ§åˆ¶å™¨</td></tr><tr><td>ğŸŒ åˆ†å¸ƒå¼ç¼“å­˜</td><td>å†…å­˜é›†ç¾¤</td><td>~1ms</td><td>å‡ åGBåˆ°å‡ ç™¾GB</td><td>$100-300</td><td>è½¯ä»¶</td><td>äº’è”ç½‘åº”ç”¨ã€å¤§æ•°æ®å¹³å°</td></tr><tr><td>ğŸ“€ ç¡¬ç›˜</td><td>HDD</td><td>~10ms</td><td>å‡ TB</td><td>$0.1-1</td><td>è½¯ä»¶</td><td>æŒä¹…åŒ–å­˜å‚¨</td></tr><tr><td>ğŸ“¼ ç£å¸¦</td><td>ç£å¸¦</td><td>~100ms</td><td>å‡ åTB</td><td>$0.01-0.1</td><td>è½¯ä»¶</td><td>å½’æ¡£å­˜å‚¨</td></tr></tbody></table>
<h3 data-id="heading-23">ğŸ¢ ç¼“å­˜çš„åº”ç”¨åœºæ™¯ï¼šæ— å¤„ä¸åœ¨çš„ç¼“å­˜</h3>



























































<table><thead><tr><th>åº”ç”¨åœºæ™¯</th><th>ä¸¾ä¾‹</th><th>ç¼“å­˜æŠ€æœ¯</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td>âš¡ äº’è”ç½‘åº”ç”¨</td><td>æ·˜å®ã€äº¬ä¸œ</td><td>Redisã€Memcached</td><td>å“åº”æ—¶é—´ä»å‡ ç™¾msé™åˆ°å‡ ms</td></tr><tr><td>ğŸ“± ç§»åŠ¨åº”ç”¨</td><td>å¾®ä¿¡ã€æŠ–éŸ³</td><td>æœ¬åœ°ç¼“å­˜+åˆ†å¸ƒå¼ç¼“å­˜</td><td>å‡å°‘ç½‘ç»œè¯·æ±‚ï¼ŒèŠ‚çœæµé‡</td></tr><tr><td>ğŸ® æ¸¸æˆ</td><td>ç‹è€…è£è€€ã€è‹±é›„è”ç›Ÿ</td><td>å†…å­˜ç¼“å­˜+Redis</td><td>å®æ—¶æ›´æ–°ç©å®¶æ•°æ®ï¼Œä½å»¶è¿Ÿ</td></tr><tr><td>ğŸ” æœç´¢å¼•æ“</td><td>ç™¾åº¦ã€Google</td><td>å€’æ’ç´¢å¼•ç¼“å­˜</td><td>æœç´¢ç»“æœå¿«é€Ÿè¿”å›</td></tr><tr><td>ğŸ“Š å¤§æ•°æ®å¹³å°</td><td>Hadoopã€Spark</td><td>å†…å­˜ç¼“å­˜</td><td>è®¡ç®—ç»“æœå¤ç”¨ï¼ŒåŠ é€Ÿå¤„ç†</td></tr><tr><td>ğŸ“š æ•°æ®åº“</td><td>MySQLã€Oracle</td><td>æŸ¥è¯¢ç¼“å­˜ã€ç¼“å†²æ± </td><td>å‡å°‘ç£ç›˜I/Oï¼Œæé«˜æŸ¥è¯¢é€Ÿåº¦</td></tr><tr><td>ğŸŒ CDN</td><td>é˜¿é‡Œäº‘CDNã€Cloudflare</td><td>è¾¹ç¼˜ç¼“å­˜</td><td>é™æ€èµ„æºå¿«é€Ÿè®¿é—®</td></tr><tr><td>ğŸ¯ æœºå™¨å­¦ä¹ </td><td>TensorFlowã€PyTorch</td><td>GPUç¼“å­˜</td><td>åŠ é€Ÿæ¨¡å‹è®­ç»ƒ</td></tr></tbody></table>
<h3 data-id="heading-24">ğŸ“ˆ æ•°æ®æ”¯æ’‘ï¼šç¼“å­˜çš„"ç¡¬æ ¸å®åŠ›"</h3>
<ul>
<li>âš¡ <strong>CPUç¼“å­˜å‘½ä¸­ç‡å¯è¾¾90%ä»¥ä¸Š</strong>ï¼Œå‡å°‘CPUç­‰å¾…æ—¶é—´</li>
<li>ğŸ’¨ <strong>åˆ†å¸ƒå¼ç¼“å­˜å¯å°†ç³»ç»Ÿå“åº”æ—¶é—´é™ä½50%ä»¥ä¸Š</strong></li>
<li>ğŸ“Š <strong>äº’è”ç½‘åº”ç”¨ä¸­ï¼Œ80%çš„è¯·æ±‚è®¿é—®20%çš„æ•°æ®</strong>ï¼ˆç¬¦åˆå¸•ç´¯æ‰˜æ³•åˆ™ï¼‰</li>
<li>ğŸ’° <strong>ç¼“å­˜å¯ä»¥å‡å°‘70%ä»¥ä¸Šçš„æ•°æ®åº“å‹åŠ›</strong>ï¼Œé™ä½ç¡¬ä»¶æˆæœ¬</li>
<li>ğŸ”„ <strong>Redisçš„QPSï¼ˆæ¯ç§’å¤„ç†è¯·æ±‚æ•°ï¼‰å¯è¾¾10ä¸‡ä»¥ä¸Š</strong>ï¼Œæ˜¯ä¼ ç»Ÿæ•°æ®åº“çš„100å€</li>
<li>ğŸš€ <strong>CDNå¯å°†é™æ€èµ„æºçš„åŠ è½½é€Ÿåº¦æé«˜3-5å€</strong></li>
<li>â±ï¸ <strong>å†…å­˜è®¿é—®é€Ÿåº¦æ˜¯ç¡¬ç›˜çš„1000å€ä»¥ä¸Š</strong></li>
</ul>
<h3 data-id="heading-25">ğŸ”§ ä»£ç å®ä¾‹ï¼šRedisåˆ†å¸ƒå¼ç¼“å­˜ä½¿ç”¨ç¤ºä¾‹</h3>
<p><strong>Python + Redis ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> redis
<span class="hljs-keyword">import</span> time

<span class="hljs-comment"># è¿æ¥Redis</span>
r = redis.Redis(host=<span class="hljs-string">'localhost'</span>, port=<span class="hljs-number">6379</span>, db=<span class="hljs-number">0</span>)

<span class="hljs-comment"># æ¨¡æ‹Ÿä»æ•°æ®åº“è·å–æ•°æ®çš„å‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_data_from_db</span>(<span class="hljs-params">key</span>):
    <span class="hljs-string">"""ä»æ•°æ®åº“è·å–æ•°æ®ï¼ˆæ¨¡æ‹Ÿè€—æ—¶æ“ä½œï¼‰"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ“Š ä»æ•°æ®åº“è·å–æ•°æ®: <span class="hljs-subst">{key}</span>"</span>)
    time.sleep(<span class="hljs-number">1</span>)  <span class="hljs-comment"># æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢è€—æ—¶</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"æ•°æ®_<span class="hljs-subst">{key}</span>"</span>

<span class="hljs-comment"># ä½¿ç”¨ç¼“å­˜çš„å‡½æ•°</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_data</span>(<span class="hljs-params">key, cache_expire=<span class="hljs-number">3600</span></span>):
    <span class="hljs-string">"""ä»ç¼“å­˜è·å–æ•°æ®ï¼Œå¦‚æœç¼“å­˜æœªå‘½ä¸­åˆ™ä»æ•°æ®åº“åŠ è½½"""</span>
    <span class="hljs-comment"># å…ˆä»ç¼“å­˜è·å–</span>
    cached_data = r.get(key)
  
    <span class="hljs-keyword">if</span> cached_data:
        <span class="hljs-comment"># ç¼“å­˜å‘½ä¸­</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… ç¼“å­˜å‘½ä¸­: <span class="hljs-subst">{key}</span>"</span>)
        <span class="hljs-keyword">return</span> cached_data.decode(<span class="hljs-string">'utf-8'</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-comment"># ç¼“å­˜æœªå‘½ä¸­ï¼Œä»æ•°æ®åº“åŠ è½½</span>
        data = get_data_from_db(key)
        <span class="hljs-comment"># å°†æ•°æ®å­˜å…¥ç¼“å­˜</span>
        r.<span class="hljs-built_in">set</span>(key, data, ex=cache_expire)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ’¾ æ•°æ®å·²å­˜å…¥ç¼“å­˜: <span class="hljs-subst">{key}</span>"</span>)
        <span class="hljs-keyword">return</span> data

<span class="hljs-comment"># æµ‹è¯•ç¼“å­˜æ•ˆæœ</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ¯ æµ‹è¯•Redisç¼“å­˜æ•ˆæœ"</span>)
  
    <span class="hljs-comment"># ç¬¬ä¸€æ¬¡è®¿é—®ï¼Œç¼“å­˜æœªå‘½ä¸­</span>
    start_time = time.time()
    data1 = get_data(<span class="hljs-string">"user_123"</span>)
    end_time = time.time()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬ä¸€æ¬¡è®¿é—®è€—æ—¶: <span class="hljs-subst">{end_time - start_time:<span class="hljs-number">.2</span>f}</span>ç§’"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ•°æ®: <span class="hljs-subst">{data1}</span>"</span>)
    <span class="hljs-built_in">print</span>()
  
    <span class="hljs-comment"># ç¬¬äºŒæ¬¡è®¿é—®ï¼Œç¼“å­˜å‘½ä¸­</span>
    start_time = time.time()
    data2 = get_data(<span class="hljs-string">"user_123"</span>)
    end_time = time.time()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¬¬äºŒæ¬¡è®¿é—®è€—æ—¶: <span class="hljs-subst">{end_time - start_time:<span class="hljs-number">.2</span>f}</span>ç§’"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ•°æ®: <span class="hljs-subst">{data2}</span>"</span>)
    <span class="hljs-built_in">print</span>()
  
    <span class="hljs-comment"># è®¿é—®å¦ä¸€ä¸ªkey</span>
    start_time = time.time()
    data3 = get_data(<span class="hljs-string">"product_456"</span>)
    end_time = time.time()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è®¿é—®æ–°keyè€—æ—¶: <span class="hljs-subst">{end_time - start_time:<span class="hljs-number">.2</span>f}</span>ç§’"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ•°æ®: <span class="hljs-subst">{data3}</span>"</span>)
    <span class="hljs-built_in">print</span>()
  
    <span class="hljs-comment"># è¾“å‡º</span>
    <span class="hljs-comment"># ğŸ¯ æµ‹è¯•Redisç¼“å­˜æ•ˆæœ</span>
    <span class="hljs-comment"># ğŸ“Š ä»æ•°æ®åº“è·å–æ•°æ®: user_123</span>
    <span class="hljs-comment"># ğŸ’¾ æ•°æ®å·²å­˜å…¥ç¼“å­˜: user_123</span>
    <span class="hljs-comment"># ç¬¬ä¸€æ¬¡è®¿é—®è€—æ—¶: 1.01ç§’</span>
    <span class="hljs-comment"># æ•°æ®: æ•°æ®_user_123</span>
    <span class="hljs-comment">#</span>
    <span class="hljs-comment"># âœ… ç¼“å­˜å‘½ä¸­: user_123</span>
    <span class="hljs-comment"># ç¬¬äºŒæ¬¡è®¿é—®è€—æ—¶: 0.01ç§’</span>
    <span class="hljs-comment"># æ•°æ®: æ•°æ®_user_123</span>
    <span class="hljs-comment">#</span>
    <span class="hljs-comment"># ğŸ“Š ä»æ•°æ®åº“è·å–æ•°æ®: product_456</span>
    <span class="hljs-comment"># ğŸ’¾ æ•°æ®å·²å­˜å…¥ç¼“å­˜: product_456</span>
    <span class="hljs-comment"># è®¿é—®æ–°keyè€—æ—¶: 1.01ç§’</span>
    <span class="hljs-comment"># æ•°æ®: æ•°æ®_product_456</span>
</code></pre>
<h3 data-id="heading-26">âš ï¸ å¸¸è§è¯¯åŒºçº æ­£</h3>
<h4 data-id="heading-27">1. "ç¼“å­˜å®¹é‡è¶Šå¤§è¶Šå¥½ï¼Ÿ"</h4>
<p><strong>é”™ï¼</strong> ç¼“å­˜å®¹é‡å¹¶éè¶Šå¤§è¶Šå¥½ï¼š</p>
<ul>
<li>ğŸ’° æˆæœ¬é«˜ï¼šé«˜é€Ÿå­˜å‚¨çš„æˆæœ¬æ˜¯ä½é€Ÿå­˜å‚¨çš„100å€ä»¥ä¸Š</li>
<li>â±ï¸ ç¼“å­˜ç®¡ç†å¼€é”€å¤§ï¼šå®¹é‡è¶Šå¤§ï¼Œç®¡ç†è¶Šå¤æ‚</li>
<li>ğŸ” å‘½ä¸­ç‡è¾¹é™…æ•ˆåº”ï¼šå½“å®¹é‡è¶…è¿‡ä¸€å®šå€¼ï¼Œå‘½ä¸­ç‡æå‡ä¸æ˜æ˜¾</li>
</ul>
<h4 data-id="heading-28">2. "ç¼“å­˜èƒ½è§£å†³æ‰€æœ‰æ€§èƒ½é—®é¢˜ï¼Ÿ"</h4>
<p><strong>é”™ï¼</strong> ç¼“å­˜ä¸æ˜¯"é“¶å¼¹"ï¼š</p>
<ul>
<li>ğŸ”„ ç¼“å­˜å¤±æ•ˆï¼šå½“æ•°æ®é¢‘ç¹å˜åŒ–æ—¶ï¼Œç¼“å­˜å‘½ä¸­ç‡ä¼šå¾ˆä½</li>
<li>ğŸ”§ å¼•å…¥å¤æ‚æ€§ï¼šéœ€è¦å¤„ç†ç¼“å­˜ä¸€è‡´æ€§ã€ç©¿é€ã€å‡»ç©¿ã€é›ªå´©ç­‰é—®é¢˜</li>
<li>ğŸ“Š ä¸é€‚ç”¨äºæ‰€æœ‰åœºæ™¯ï¼šå¯¹äºä¸€æ¬¡æ€§è®¿é—®çš„æ•°æ®ï¼Œç¼“å­˜æ²¡æœ‰æ„ä¹‰</li>
</ul>
<h4 data-id="heading-29">3. "åˆ†å¸ƒå¼ç¼“å­˜ä¸€å®šæ¯”å•æœºç¼“å­˜å¥½ï¼Ÿ"</h4>
<p><strong>ä¸ä¸€å®šï¼</strong> åˆ†å¸ƒå¼ç¼“å­˜çš„é€‰æ‹©å–å†³äºåœºæ™¯ï¼š</p>
<ul>
<li>ğŸ¢ å¤§è§„æ¨¡åº”ç”¨ï¼šéœ€è¦åˆ†å¸ƒå¼ç¼“å­˜</li>
<li>ğŸ  å°å‹åº”ç”¨ï¼šå•æœºç¼“å­˜è¶³å¤Ÿï¼Œç»´æŠ¤ç®€å•</li>
<li>âš¡ æ€§èƒ½è¦æ±‚æé«˜ï¼šå•æœºç¼“å­˜å¯èƒ½æ›´å¿«ï¼ˆæ— ç½‘ç»œå¼€é”€ï¼‰</li>
</ul>
<h4 data-id="heading-30">4. "ç¼“å­˜ç©¿é€å’Œç¼“å­˜å‡»ç©¿æ˜¯ä¸€å›äº‹ï¼Ÿ"</h4>
<p><strong>é”™ï¼</strong> å®ƒä»¬æ˜¯ä¸åŒçš„æ¦‚å¿µï¼š</p>
<ul>
<li>ğŸ” <strong>ç¼“å­˜ç©¿é€</strong>ï¼šè®¿é—®ä¸å­˜åœ¨çš„æ•°æ®ï¼Œç¼“å­˜å’Œæ•°æ®åº“éƒ½æ²¡æœ‰</li>
<li>ğŸ’¥ <strong>ç¼“å­˜å‡»ç©¿</strong>ï¼šçƒ­ç‚¹æ•°æ®è¿‡æœŸï¼Œå¤§é‡è¯·æ±‚åŒæ—¶è®¿é—®ï¼Œå¯¼è‡´æ•°æ®åº“å‹åŠ›éª¤å¢</li>
<li>â„ï¸ <strong>ç¼“å­˜é›ªå´©</strong>ï¼šå¤§é‡ç¼“å­˜åŒæ—¶è¿‡æœŸï¼Œå¯¼è‡´æ•°æ®åº“å‹åŠ›éª¤å¢</li>
</ul>
<h4 data-id="heading-31">5. "Redisæ˜¯å”¯ä¸€çš„åˆ†å¸ƒå¼ç¼“å­˜é€‰æ‹©ï¼Ÿ"</h4>
<p><strong>é”™ï¼</strong> è¿˜æœ‰å¾ˆå¤šå…¶ä»–é€‰æ‹©ï¼š</p>
<ul>
<li>ğŸ“¦ <strong>Memcached</strong>ï¼šç®€å•é«˜æ•ˆï¼Œé€‚åˆçº¯ç¼“å­˜åœºæ™¯</li>
<li>ğŸ”§ <strong>Tair</strong>ï¼šé˜¿é‡Œå·´å·´å¼€æºï¼Œæ”¯æŒå¤šç§å­˜å‚¨å¼•æ“</li>
<li>ğŸŒ <strong>ElastiCache</strong>ï¼šAWSæ‰˜ç®¡ï¼Œæ”¯æŒRediså’ŒMemcached</li>
<li>ğŸ¯ <strong>Hazelcast</strong>ï¼šåˆ†å¸ƒå¼å†…å­˜æ•°æ®ç½‘æ ¼</li>
<li>ğŸ’ª <strong>Ignite</strong>ï¼šé«˜æ€§èƒ½åˆ†å¸ƒå¼ç¼“å­˜</li>
</ul>
<h3 data-id="heading-32">ğŸ”® æœªæ¥å±•æœ›ï¼šç¼“å­˜æŠ€æœ¯çš„å‘å±•è¶‹åŠ¿</h3>
<h4 data-id="heading-33">1. ğŸ¤– AIé©±åŠ¨çš„ç¼“å­˜</h4>
<p>AIå°†èå…¥ç¼“å­˜çš„å„ä¸ªç¯èŠ‚ï¼š</p>
<ul>
<li><strong>æ™ºèƒ½é¢„æµ‹</strong>ï¼šé¢„æµ‹æœªæ¥çš„è®¿é—®æ¨¡å¼ï¼Œæå‰åŠ è½½æ•°æ®</li>
<li><strong>è‡ªé€‚åº”è°ƒæ•´</strong>ï¼šæ ¹æ®è®¿é—®æ¨¡å¼è‡ªåŠ¨è°ƒæ•´ç¼“å­˜å®¹é‡å’Œæ›¿æ¢ç­–ç•¥</li>
<li><strong>å¼‚å¸¸æ£€æµ‹</strong>ï¼šè‡ªåŠ¨æ£€æµ‹ç¼“å­˜çƒ­ç‚¹å’Œå¼‚å¸¸è®¿é—®</li>
</ul>
<h4 data-id="heading-34">2. â˜ï¸ äº‘åŸç”Ÿç¼“å­˜</h4>
<p>éšç€äº‘è®¡ç®—çš„æ™®åŠï¼Œäº‘åŸç”Ÿç¼“å­˜å°†æˆä¸ºä¸»æµï¼š</p>
<ul>
<li><strong>Serverlessç¼“å­˜</strong>ï¼šæ— éœ€ç®¡ç†æœåŠ¡å™¨ï¼ŒæŒ‰éœ€ä»˜è´¹</li>
<li><strong>è¾¹ç¼˜ç¼“å­˜</strong>ï¼šå°†ç¼“å­˜éƒ¨ç½²åœ¨è¾¹ç¼˜èŠ‚ç‚¹ï¼Œå‡å°‘å»¶è¿Ÿ</li>
<li><strong>å¤šäº‘ç¼“å­˜</strong>ï¼šæ”¯æŒè·¨äº‘éƒ¨ç½²ï¼Œæé«˜å¯ç”¨æ€§</li>
</ul>
<h4 data-id="heading-35">3. ğŸš€ æ–°å‹å­˜å‚¨ä»‹è´¨</h4>
<p>æ–°å‹å­˜å‚¨ä»‹è´¨å°†æ”¹å˜ç¼“å­˜æ ¼å±€ï¼š</p>
<ul>
<li><strong>3D XPoint</strong>ï¼šé€Ÿåº¦æ¥è¿‘DRAMï¼Œå®¹é‡æ¥è¿‘NAND Flash</li>
<li><strong>MRAM</strong>ï¼šéæ˜“å¤±æ€§ï¼Œé€Ÿåº¦å¿«ï¼Œå¯¿å‘½é•¿</li>
<li><strong>ReRAM</strong>ï¼šç”µé˜»å¼å†…å­˜ï¼Œå¯†åº¦é«˜ï¼ŒåŠŸè€—ä½</li>
</ul>
<h4 data-id="heading-36">4. ğŸ”„ ç¼“å­˜ä¸è®¡ç®—èåˆ</h4>
<p>ç¼“å­˜å’Œè®¡ç®—çš„è¾¹ç•Œå°†è¶Šæ¥è¶Šæ¨¡ç³Šï¼š</p>
<ul>
<li><strong>è®¡ç®—è¿‘æ•°æ®</strong>ï¼šå°†è®¡ç®—èƒ½åŠ›åµŒå…¥å­˜å‚¨è®¾å¤‡</li>
<li><strong>å†…å­˜è®¡ç®—</strong>ï¼šç›´æ¥åœ¨å†…å­˜ä¸­è¿›è¡Œè®¡ç®—</li>
<li><strong>GPUç¼“å­˜</strong>ï¼šåŠ é€ŸAIå’Œå›¾å½¢è®¡ç®—</li>
</ul>
<h3 data-id="heading-37">ğŸ“ äº’åŠ¨å°æµ‹éªŒï¼šä½ ç­”å¯¹äº†å—ï¼Ÿ</h3>


















































<table><thead><tr><th>é—®é¢˜</th><th>ç­”æ¡ˆ</th><th>ä½ ç­”å¯¹äº†å—ï¼Ÿ</th></tr></thead><tbody><tr><td>ç¼“å­˜çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ</td><td>ç”¨ç©ºé—´æ¢æ—¶é—´</td><td>âœ…/âŒ</td></tr><tr><td>å±€éƒ¨æ€§åŸç†åŒ…æ‹¬å“ªä¸¤ç§ï¼Ÿ</td><td>æ—¶é—´å±€éƒ¨æ€§å’Œç©ºé—´å±€éƒ¨æ€§</td><td>âœ…/âŒ</td></tr><tr><td>æœ€å¸¸ç”¨çš„ç¼“å­˜æ›¿æ¢ç®—æ³•æ˜¯ä»€ä¹ˆï¼Ÿ</td><td>LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰</td><td>âœ…/âŒ</td></tr><tr><td>CPUç¼“å­˜çš„å‘½ä¸­ç‡å¯è¾¾å¤šå°‘ï¼Ÿ</td><td>90%ä»¥ä¸Š</td><td>âœ…/âŒ</td></tr><tr><td>Redisçš„QPSå¯è¾¾å¤šå°‘ï¼Ÿ</td><td>10ä¸‡ä»¥ä¸Š</td><td>âœ…/âŒ</td></tr><tr><td>ç¼“å­˜å‡»ç©¿æ˜¯ä»€ä¹ˆï¼Ÿ</td><td>çƒ­ç‚¹æ•°æ®è¿‡æœŸå¯¼è‡´æ•°æ®åº“å‹åŠ›éª¤å¢</td><td>âœ…/âŒ</td></tr><tr><td>ç¼“å­˜ä¸€è‡´æ€§çš„è§£å†³æ–¹æ¡ˆæœ‰å“ªäº›ï¼Ÿ</td><td>æ›´æ–°ç¼“å­˜ã€åˆ é™¤ç¼“å­˜ã€å¼‚æ­¥æ›´æ–°ç­‰</td><td>âœ…/âŒ</td></tr><tr><td>å†…å­˜è®¿é—®é€Ÿåº¦æ˜¯ç¡¬ç›˜çš„å¤šå°‘å€ï¼Ÿ</td><td>1000å€ä»¥ä¸Š</td><td>âœ…/âŒ</td></tr></tbody></table>
<h3 data-id="heading-38">ğŸ¯ ç»“è¯­ï¼šç¼“å­˜â€”â€”ç³»ç»Ÿæ€§èƒ½çš„"åŠ é€Ÿå™¨"</h3>
<p>ä»CPUç¼“å­˜åˆ°åˆ†å¸ƒå¼ç¼“å­˜ï¼Œç¼“å­˜æŠ€æœ¯å·²ç»æˆä¸º<strong>ç°ä»£è®¡ç®—æœºç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶</strong>ï¼</p>
<p><strong>è®°ä½</strong>ï¼š</p>
<ul>
<li>âš¡ ç¼“å­˜æ˜¯"ç”¨ç©ºé—´æ¢æ—¶é—´"çš„å…¸å‹åº”ç”¨</li>
<li>ğŸ“Š å±€éƒ¨æ€§åŸç†æ˜¯ç¼“å­˜å­˜åœ¨çš„ç†è®ºåŸºç¡€</li>
<li>ğŸ¯ å‘½ä¸­ç‡æ˜¯è¡¡é‡ç¼“å­˜æ•ˆæœçš„æ ¸å¿ƒæŒ‡æ ‡</li>
<li>ğŸ”„ å¥½çš„æ›¿æ¢ç­–ç•¥èƒ½æé«˜å‘½ä¸­ç‡</li>
<li>ğŸ’¡ ç¼“å­˜ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œéœ€è¦æ ¹æ®åœºæ™¯é€‰æ‹©</li>
</ul>
<p>ä¸‹æ¬¡å½“ä½ ä½¿ç”¨æ‰‹æœºAPPã€æµè§ˆç½‘é¡µã€ç©æ¸¸æˆæ—¶ï¼Œä¸å¦¨æƒ³æƒ³èƒŒåçš„ç¼“å­˜æŠ€æœ¯â€”â€”æ­£æ˜¯è¿™äº›çœ‹ä¸è§çš„"åŠ é€Ÿå™¨"ï¼Œè®©æˆ‘ä»¬çš„æ•°å­—ç”Ÿæ´»å˜å¾—æ›´åŠ æµç•…å’Œä¾¿æ·ï¼</p>
<h3 data-id="heading-39">ğŸ’¬ äº’åŠ¨è¯é¢˜</h3>
<ol>
<li>ä½ åœ¨é¡¹ç›®ä¸­ä½¿ç”¨è¿‡å“ªäº›ç¼“å­˜æŠ€æœ¯ï¼Ÿæ•ˆæœå¦‚ä½•ï¼Ÿ</li>
<li>ä½ é‡åˆ°è¿‡å“ªäº›ç¼“å­˜ç›¸å…³çš„é—®é¢˜ï¼Ÿæœ€åæ˜¯æ€ä¹ˆè§£å†³çš„ï¼Ÿ</li>
<li>ä½ è§‰å¾—æœªæ¥çš„ç¼“å­˜æŠ€æœ¯ä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼Ÿ</li>
<li>å¦‚æœä½ è®¾è®¡ç¼“å­˜ç³»ç»Ÿï¼Œä¼šè€ƒè™‘å“ªäº›å› ç´ ï¼Ÿ</li>
</ol>
<p>å¿«æ¥è¯„è®ºåŒºèŠèŠä½ çš„æƒ³æ³•ï¼ğŸ’¬ ç‚¹èµæ”¶è—ä¸è¿·è·¯ï¼Œå’±ä»¬ä¸‹æœŸç»§ç»­æ¢ç´¢è®¡ç®—æœºçš„"åä¸‡ä¸ªä¸ºä»€ä¹ˆ"ï¼ğŸ‰</p>
<p><strong>å…³æ³¨æˆ‘</strong>ï¼Œä¸‹æœŸå¸¦ä½ è§£é”æ›´å¤šè®¡ç®—æœºçš„"å¥‡è‘©å†·çŸ¥è¯†"ï¼ğŸ¤“</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»£ç ä¿®ä»™å½• Â· ç¬¬1æœŸï¼šå®—é—¨å¤§é˜µå´©äº†ï¼Ÿåªå› å°‘äº†æ¯«ç§’ä¸‰é­‚ï¼]]></title>    <link>https://juejin.cn/post/7592361736130625546</link>    <guid>https://juejin.cn/post/7592361736130625546</guid>    <pubDate>2026-01-07T08:49:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592361736130625546" data-draft-id="7592340733954097202" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»£ç ä¿®ä»™å½• Â· ç¬¬1æœŸï¼šå®—é—¨å¤§é˜µå´©äº†ï¼Ÿåªå› å°‘äº†æ¯«ç§’ä¸‰é­‚ï¼"/> <meta itemprop="keywords" content="åç«¯,æ•°æ®åº“,MySQL"/> <meta itemprop="datePublished" content="2026-01-07T08:49:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ´›å°è±†"/> <meta itemprop="url" content="https://juejin.cn/user/2049145406229127"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»£ç ä¿®ä»™å½• Â· ç¬¬1æœŸï¼šå®—é—¨å¤§é˜µå´©äº†ï¼Ÿåªå› å°‘äº†æ¯«ç§’ä¸‰é­‚ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2049145406229127/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ´›å°è±†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T08:49:36.000Z" title="Wed Jan 07 2026 08:49:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="an-old-hope">.hljs-comment,.hljs-quote{color:#b6b18b}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#eb3c54}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#e7ce56}.hljs-attribute{color:#ee7c2b}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#4fb4d7}.hljs-section,.hljs-title{color:#78bb65}.hljs-keyword,.hljs-selector-tag{color:#b45ea4}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1d21;color:#c0c5ce}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä»£ç ä¿®ä»™å½•ç³»åˆ— Â· ç¬¬1æœŸ</p>
<p>å…³æ³¨æˆ‘ï¼Œå’Œå°è±†ä¸€èµ·åœ¨æ˜é‡‘ä¿®ç‚¼ä»£ç </p>
</blockquote>
<h2 data-id="heading-0">ğŸ”¥ å®—é—¨å¼‚è±¡</h2>
<p>å­æ—¶å·²è¿‡ï¼Œå…«å“¥å®—å†…ä¸€ç‰‡æ­»å¯‚ï¼Œå”¯æœ‰å‡ å—<code>çµé•œï¼ˆæ˜¾ç¤ºå™¨ï¼‰</code>æ³›ç€å¹½å¹½è“å…‰ï¼Œæ˜ ç…§ç€ä¿®å£«ä»¬ç–²æƒ«çš„é¢åºã€‚</p>
<p>çªç„¶ï¼Œå¹»æœ¯å¸ˆå°æ±ä¸€å£°æƒŠå‘¼ï¼Œæ‰“ç ´äº†è—ç»é˜çš„å®é™ã€‚</p>
<p>â€œä¸å¥½ï¼æŠ¤å®—å¤§é˜µçš„<code>æ—¶é—´æ³•åˆ™ï¼ˆTimestampï¼‰</code>å´©å¡Œäº†ï¼å‡¡äººä»¬éƒ½åœ¨é€†æµå…‰é˜´ï¼Œå› æœå…¨ä¹±äº†ï¼â€</p>
<p>æ­£åœ¨é—­ç›®å…»ç¥ã€è¿è½¬å‘¨å¤©çš„æˆ‘ï¼Œè¢«è¿™çªå¦‚å…¶æ¥çš„ç¥è¯†ä¼ éŸ³å“äº†ä¸€è·³ï¼Œå·®ç‚¹èµ°ç«å…¥é­”ã€‚æˆ‘æ€¥å¿™èµ·èº«ï¼Œå¿«æ­¥èµ°åˆ°å°æ±çš„æ³•é˜µå‰ã€‚</p>
<p>â€œå¸ˆå¦¹ï¼Œåˆ‡å‹¿æƒŠæ…Œï¼Œå‘ç”Ÿä½•äº‹ï¼Ÿâ€</p>
<p>å°æ±æŒ‡ç€æ‰‹ä¸­çš„<strong>æ¢çµç›˜ï¼ˆæµè§ˆå™¨æ§åˆ¶å°ï¼‰</strong>ï¼Œçœ‰å¿ƒç´§é”ï¼Œå‘¨èº«çµæ°”ç´Šä¹±ï¼šâ€œå¸ˆå…„ä½ çœ‹ï¼Œè¿™çµåŠ›æµï¼ˆ<strong>Network Response</strong>ï¼‰ä¸­å›å“çš„æ—¶é—´æ³•å°ï¼Œæ€ä¹ˆåªæœ‰åé“ç¬¦æ–‡ï¼Ÿè¿™æ˜¾ç„¶æ˜¯<strong>ç»ƒæ°”æœŸï¼ˆç§’çº§ï¼‰çš„ä½é˜¶æ³•åŠ›ï¼Œæ ¹æœ¬æ”¯æ’‘ä¸èµ·è¿™åä¸‰é“ï¼ˆæ¯«ç§’çº§ï¼‰çš„å¹»å¢ƒè¿è½¬å•Šï¼</strong>â€</p>
<h2 data-id="heading-1">ğŸ¯ é—®å¿ƒæŸ¥æ¢</h2>
<p>æˆ‘å®šç›ä¸€ç§ï¼Œæ¢çµç›˜ä¸Šçº¢å…‰éšç°ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¹»å¢ƒï¼ˆå‰ç«¯ï¼‰è·å–çš„å¤©é“æ—¶é—´</span>
<span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(); 
<span class="hljs-comment">// ä¹ƒæ˜¯ 13 ä½ç²¾ç»†ä¹‹æ•°ï¼š1704723600123</span>

<span class="hljs-comment">// é˜µæ¢ï¼ˆåç«¯ï¼‰åå‡ºçš„æ—¶é—´æ³•å°</span>
<span class="hljs-keyword">const</span> serverTime = <span class="hljs-number">1704723600</span>; 
<span class="hljs-comment">// ç«Ÿåªæœ‰ 10 ä½ï¼ç¼ºäº†ä¸‰é­‚ä¸ƒé­„ï¼</span>
</code></pre>
<p>â€œè¿™â€¦â€¦â€æˆ‘é¢éœ²å°´å°¬ä¹‹è‰²ï¼Œé¢å¤´æ¸—å‡ºä¸€ä¸å†·æ±—ï¼Œâ€œæ­¤ä¹ƒæˆ‘ç­‘åŸºåˆæœŸæ—¶å¸ƒä¸‹çš„é˜µæ³•ã€‚å½“æ—¶ä¸ºäº†èŠ‚çœçµçŸ³ï¼ˆå­˜å‚¨ç©ºé—´ï¼‰ï¼Œä¾¿é€‰ç”¨äº† <code>TIMESTAMP</code> è¿™ä¸€å¤æ³•æ¥å°å°æ—¶é—´ã€‚â€</p>
<p>å°æ±ä¸€å¬ï¼Œé¡¿æ—¶æŸ³çœ‰å€’ç«–ï¼šâ€œå¸ˆå…„ï¼ä½ ç³Šæ¶‚å•Šï¼å‡¡äººï¼ˆç”¨æˆ·ï¼‰åœ¨å¹»å¢ƒä¸­çš„ä¸€ä¸¾ä¸€åŠ¨ï¼Œçš†éœ€ç²¾ç¡®åˆ°æ¯«å˜ã€‚è‹¥åŒä¸€æ¯ï¼ˆç§’ï¼‰å†…ï¼Œå‡¡äººè¿ç»­æ–½å±•äº†ä¸‰æ‹›ï¼Œä½ è¿™ç»ƒæ°”æœŸçš„æ³•å°å¦‚ä½•åˆ†è¾¨å…ˆåï¼Ÿå²‚ä¸æ˜¯å› æœå€’ç½®ï¼Œå¤©ä¸‹å¤§ä¹±ï¼Ÿâ€</p>
<p>å¥¹ç¥­å‡º<strong>è§‚å¤©é•œï¼ˆé¡µé¢ï¼‰</strong>ï¼Œåªè§å‡¡äººçš„æ“ä½œè®°å½•åœ¨é‚£ç–¯ç‹‚è·³åŠ¨ï¼Œå¦‚åŒä¸­äº†å¹»æœ¯ä¸€èˆ¬ï¼Œæ¯«æ— æ¬¡åºå¯è¨€ã€‚</p>
<h2 data-id="heading-2">ğŸ§  é•¿è€æŒ‡ç‚¹</h2>
<p>â€œè¿˜åœ¨ç”¨ <code>TIMESTAMP</code> ï¼Ÿâ€</p>
<p>ä¸€ä¸ªæ¸…å†·çš„å£°éŸ³ä»é˜´å½±ä¸­ä¼ æ¥ã€‚</p>
<p>æˆ‘å’Œå°æ±å›å¤´ä¸€çœ‹ï¼Œç«Ÿæ˜¯<strong>é‡‘ä¸¹æœŸé•¿è€</strong>é˜¿è¾°ã€‚ä»–ä¸çŸ¥ä½•æ—¶å·²ç«™åœ¨èº«åï¼Œæ‰‹ä¸­ç«¯ç€é‚£åªä¸‡å¹´ä¸ç¦»èº«çš„<strong>ç´«é‡‘çº¢è‘«èŠ¦ï¼ˆä¿æ¸©æ¯ï¼‰</strong>ï¼Œå‘¨èº«æ•£å‘ç€æ·±ä¸å¯æµ‹çš„å¨å‹ã€‚</p>
<p>â€œè¾°é•¿è€ï¼â€æˆ‘ä»¬äºŒäººè¿å¿™è¡Œç¤¼ã€‚</p>
<p>é˜¿è¾°å¾®å¾®é¢”é¦–ï¼Œéšæ‰‹ç¥­å‡ºä¸€æš<strong>ç•™å½±çŸ³ï¼ˆç™½æ¿ï¼‰</strong>ï¼ŒæŒ‡å°–çµåŠ›æµè½¬ï¼Œåœ¨è™šç©ºä¸­ç”»å‡ºäº†ä¸¤æ¡é“çº¹ã€‚</p>
<p>â€œè±†å­ï¼Œä½ è¿™é˜µæ³•ï¼Œæœ‰ä¸¤å¤„è‡´å‘½<strong>é“ä¼¤ï¼ˆç¼ºé™·ï¼‰</strong>ã€‚â€</p>
<p>é˜¿è¾°é•¿è€çš„å£°éŸ³ä¸å¤§ï¼Œå´å¦‚æ´ªé’Ÿå¤§å•ï¼Œç›´å‡»é“å¿ƒã€‚</p>
<p>â€œå…¶ä¸€ï¼Œ<code>TIMESTAMP</code> ä¹ƒæ˜¯<strong>éšæ³¢é€æµçš„æµ®è</strong>ã€‚å®ƒå¼ºä¾é™„äº<strong>å®—é—¨çµè„‰ï¼ˆæœåŠ¡å™¨æ—¶åŒºï¼‰</strong>ã€‚è‹¥æ˜¯æœ‰æœä¸€æ—¥ï¼Œå®—é—¨è¿å€åˆ°äº†å¤§æ´‹å½¼å²¸ï¼Œæˆ–è€…çµè„‰å®ˆæŠ¤è€…ï¼ˆè¿ç»´ï¼‰æ‰‹æŠ–æ”¹äº†æ—¶åŒºï¼Œä½ è¿™æ»¡é˜çš„ç»ä¹¦ï¼Œæ—¶é—´ä¾¿ä¼šç¬é—´é”™ä¹±ã€‚â€</p>
<p>â€œå…¶äºŒï¼Œâ€é˜¿è¾°æŒ‡ç€å¦ä¸€æ¡é“çº¹ï¼Œâ€œæ­¤æ³•å¯¿å…ƒæœ‰é™ã€‚å¾…åˆ°<strong>å¤©é“å† 2038 å¹´</strong>ï¼ˆ2038å¹´1æœˆ19æ—¥ï¼‰ï¼Œæ­¤æ³•ä¾¿ä¼š<strong>å¤©äººäº”è¡°ï¼ˆæº¢å‡ºï¼‰</strong>ï¼Œå±Šæ—¶é˜µæ³•å¿…å°†å´©å¡Œã€‚â€</p>
<p>å°æ±åœ¨ä¸€æ—å¬å¾—è¿è¿ç‚¹å¤´ï¼šâ€œé•¿è€æ‰€è¨€ææ˜¯ï¼é‚£è¯¥ä¿®ä¹ ä½•ç§æ³•é—¨ï¼Ÿâ€</p>
<p>é˜¿è¾°æ·¡æ·¡åå‡ºå‡ ä¸ªå­—ï¼šâ€œ<strong><code>DATETIME(3)</code> é…åˆ UTC å¿ƒæ³•ã€‚</strong>â€</p>
<p>ä»–è§£é‡Šé“ï¼šâ€œ<code>DATETIME</code> å¦‚åŒ<strong>åˆ»åœ¨çŸ³ä¸Šçš„çœŸè¨€</strong>ï¼Œä»»å‡­æ²§æµ·æ¡‘ç”°ï¼ˆæ—¶åŒºå˜åŒ–ï¼‰ï¼Œå®ƒè‡ªå²¿ç„¶ä¸åŠ¨ã€‚è€Œé‚£ <code>(3)</code>ï¼Œä¾¿æ˜¯å¼€å¯**æ¯«å˜ï¼ˆæ¯«ç§’ï¼‰**ä¹‹çœ¼çš„é’¥åŒ™ã€‚â€</p>
<h2 data-id="heading-3">ğŸ’» æ¼”ç»ƒæ³•è¯€</h2>
<p>æ—¢ç„¶é•¿è€æŒ‡æ˜äº†å¤§é“ï¼Œæˆ‘ä¸æ•¢æ€ æ…¢ï¼Œå½“å³å†³å®š<strong>æ´—é«“ä¼ç»ï¼ˆé‡æ„ï¼‰</strong>ã€‚</p>
<h3 data-id="heading-4">ç¬¬ä¸€å¼ï¼šé‡é“¸çµè„‰ï¼ˆæ•°æ®åº“æ”¹é€ ï¼‰</h3>
<p>æˆ‘å±æ°”å‡ç¥ï¼ŒåŒæ‰‹åœ¨**æ³•ç›˜ï¼ˆé”®ç›˜ï¼‰**ä¸Šé£èˆï¼Œæ‰“å‡ºä¸€é“é“æ³•è¯€ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åºŸå¼ƒæ—§æ³•ï¼Œé‡é“¸æ ¹åŸº</span>
<span class="hljs-comment">-- å°†å­—æ®µä¿®ä¸ºä» TIMESTAMP æå‡è‡³ DATETIME(3)</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `user_actions`
MODIFY <span class="hljs-keyword">COLUMN</span> `created_at` DATETIME(<span class="hljs-number">3</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'1000-01-01 00:00:00.000'</span>;
</code></pre>
<p><strong>ã€æŠ€æœ¯ç ´å£ã€‘</strong>ï¼šæ³¨æ„è¿™ <code>(3)</code>ï¼Œåœ¨ MySQL ä¸­ä»£è¡¨ä¿ç•™ 3 ä½å°æ•°ï¼Œå³æ¯«ç§’ç²¾åº¦ã€‚è‹¥ä¸å†™ï¼Œé»˜è®¤æ˜¯ 0ï¼Œä¾æ—§æ˜¯ç§’çº§ã€‚</p>
<h3 data-id="heading-5">ç¬¬äºŒå¼ï¼šæµè½¬ä¹¾å¤ï¼ˆå‰åç«¯äº¤äº’ï¼‰</h3>
<p>ä¸ºç¡®ä¿çµåŠ›æµè½¬æ— è¯¯ï¼Œæˆ‘ç»˜åˆ¶äº†ä¸€å¹…<strong>çµåŠ›æµè½¬å›¾ï¼ˆæ—¶åºå›¾ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant å¹»æœ¯å¸ˆ as å°æ±(å‰ç«¯)
    participant é˜µæ³•å¸ˆ as æˆ‘(åç«¯)
    participant è—ç»é˜ as MySQL

    Note over å¹»æœ¯å¸ˆ, è—ç»é˜: å®—é—¨é“å¾‹ï¼šäº¤äº’åªç”¨ UTC çœŸè¨€

    å¹»æœ¯å¸ˆ-&gt;&gt;é˜µæ³•å¸ˆ: ä¼ éŸ³ï¼šå‡¡äººæ“ä½œ (13ä½æ—¶é—´æˆ³)
    é˜µæ³•å¸ˆ-&gt;&gt;é˜µæ³•å¸ˆ: è¿è½¬å¿ƒæ³•ï¼šè½¬ä¸º UTC æ ¼å¼
    Note right of é˜µæ³•å¸ˆ: 2025-01-09 01:00:00.123
    é˜µæ³•å¸ˆ-&gt;&gt;è—ç»é˜: å°å°å…¥åº“ (DATETIME(3))
    è—ç»é˜--&gt;&gt;é˜µæ³•å¸ˆ: å°å°å®Œæˆ
    
    å¹»æœ¯å¸ˆ-&gt;&gt;é˜µæ³•å¸ˆ: æŸ¥æ¢å› æœ
    é˜µæ³•å¸ˆ-&gt;&gt;è—ç»é˜: è§£å¼€å°å°
    è—ç»é˜--&gt;&gt;é˜µæ³•å¸ˆ: 2025-01-09 01:00:00.123
    é˜µæ³•å¸ˆ--&gt;&gt;å¹»æœ¯å¸ˆ: å›å“ï¼šUTC æ—¶é—´æ³•å°
    Note left of å¹»æœ¯å¸ˆ: å¹»æœ¯å¸ˆè‡ªè¡Œæ¼”åŒ–&lt;br/&gt;ä¸ºå‡¡äººæœ¬åœ°æ—¶é—´
</code></pre>
<h3 data-id="heading-6">ç¬¬ä¸‰å¼ï¼šè¿è½¬å‘¨å¤©ï¼ˆåç«¯ä»£ç ï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¼•å…¥æ—¶é—´æ³•åˆ™æ³•å®</span>
<span class="hljs-keyword">const</span> dayjs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'dayjs'</span>);
<span class="hljs-keyword">const</span> utc = <span class="hljs-built_in">require</span>(<span class="hljs-string">'dayjs/plugin/utc'</span>);
dayjs.<span class="hljs-title function_">extend</span>(utc);

<span class="hljs-comment">// é˜µæ³•æ ¸å¿ƒä»£ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getCurrentDaoTime</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ã€æŠ€æœ¯ç ´å£ã€‘ï¼šè·å–å½“å‰ UTC æ—¶é—´ï¼Œå¹¶ä¿ç•™æ¯«ç§’</span>
    <span class="hljs-keyword">return</span> dayjs.<span class="hljs-title function_">utc</span>().<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD HH:mm:ss.SSS'</span>);
}

<span class="hljs-keyword">const</span> daoTime = <span class="hljs-title function_">getCurrentDaoTime</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å°å°æ—¶é—´: <span class="hljs-subst">${daoTime}</span>`</span>); 
<span class="hljs-comment">// æ˜¾åƒ: 2025-01-09 01:00:00.123</span>
</code></pre>
<h2 data-id="heading-7">ğŸ“Š æ¸¡åŠ«æˆåŠŸ</h2>
<p>æ³•è¯€æ‰“å®Œï¼Œé‡å¯é˜µçœ¼ã€‚åªè§çº¢å…‰å°½é€€ï¼ŒçµåŠ›æµè½¬é¡ºç•…æ— æ¯”ã€‚</p>
<p>å°æ±å†æ¬¡ç¥­å‡º<strong>æ¢çµç›˜</strong>ï¼Œåªè§é‚£æ—¶é—´æ³•å°å·²æ˜¯åä¸‰ä½é½å…¨ï¼Œæ¯«å˜ä¸å·®ã€‚</p>
<p>â€œæˆäº†ï¼â€å°æ±å–œä¸Šçœ‰æ¢¢ï¼ŒæŒ‡ç€è§‚å¤©é•œä¸­çš„åˆ—è¡¨ï¼Œâ€œå¸ˆå…„ä½ çœ‹ï¼Œå‡¡äººçš„æ¯ä¸€æ­¥æ“ä½œï¼Œå¦‚ä»Šéƒ½å¦‚<strong>å› æœå¾‹</strong>ä¸€èˆ¬æ¸…æ™°ï¼Œæ¬¡åºåˆ†æ˜ï¼Œå†æ— é”™ä¹±ã€‚â€</p>
<p>é‚£ä¸€åˆ»ï¼ŒåŸæœ¬å‹æŠ‘çš„è—ç»é˜å†…ï¼Œä»¿ä½›æœ‰ä¸€é˜µæ¸…é£æ‹‚è¿‡ã€‚</p>
<h2 data-id="heading-8">ğŸ’¡ é“å‹ç•™æ­¥</h2>
<p>ä»Šæ—¥è¿™åœºæ¸¡åŠ«ï¼Œè™½æƒŠå¿ƒåŠ¨é­„ï¼Œå´ä¹Ÿè®©æˆ‘é“å¿ƒæ›´ç¨³ã€‚ç‰¹ç•™ä¸‹å‡ å¥çœŸè¨€ï¼Œèµ äºˆè¯¸ä½é“å‹ï¼š</p>
<p><strong>ã€å¿ƒæ³•å£è¯€ã€‘</strong></p>
<ol>
<li><strong>å¼ƒ TIMESTAMPï¼Œä¿® DATETIME</strong>ï¼šMySQL 5.6.4 åï¼Œ<code>DATETIME</code> å·²æ˜¯å¤§æˆä¹‹æ³•ï¼Œä»…å¤šå  1 å­—èŠ‚ï¼Œä¾¿å¯å»¶å¯¿è‡³ 9999 å¹´ã€‚</li>
<li><strong>å¼€å¤©çœ¼ (3)</strong>ï¼šåˆ‡è®°åŠ ä¸Š <code>(3)</code>ï¼Œå¦åˆ™ä»æ˜¯ççœ¼çï¼ˆä¸¢å¤±æ¯«ç§’ï¼‰ã€‚</li>
<li><strong>UTC æŠ¤ä½“</strong>ï¼šé˜µæ³•å†…éƒ¨ï¼ˆDB &amp; åç«¯ï¼‰åªè®¤ UTCï¼Œè«è¦è®©é˜µæ³•å»çŒœæ—¶åŒºã€‚</li>
</ol>
<p><strong>ã€å¿ƒé­”é¢„è­¦ã€‘</strong></p>
<ul>
<li>âŒ <strong>åˆ‡å¿Œ</strong>ï¼šè€é˜µæ³•ç›´æ¥å‡çº§å­—æ®µï¼Œè‹¥ä¸å¤‡ä»½ï¼Œææœ‰**ç‚¸ç‚‰ï¼ˆæ•°æ®ä¸¢å¤±ï¼‰**ä¹‹é™©ã€‚</li>
<li>âŒ <strong>åˆ‡å¿Œ</strong>ï¼šè¿æ¥æ³•å®ï¼ˆDriverï¼‰é…ç½®é”™è¯¯ï¼Œè‹¥ä¸æŒ‡å®šæ—¶åŒºï¼Œæ³•å®ä¼šè‡ªåŠ¨æ‰­æ›²æ—¶é—´ã€‚</li>
</ul>
<h2 data-id="heading-9">ğŸŒ™ å½’éš</h2>
<p>çª—å¤–é›·å£°æ¸æ­‡ï¼Œçœ‹æ¥ä»Šæ™šçš„æ¸¡åŠ«å·²ç„¶å®‰ç„¶åº¦è¿‡ã€‚</p>
<p>é˜¿è¾°é•¿è€æ”¶èµ·ç•™å½±çŸ³ï¼Œæ‹‚è¡£è€Œå»ï¼Œæ·±è—åŠŸä¸åã€‚åªç•™ä¸‹ä¸€å¥å›è¡åœ¨ç©ºè¡è¡çš„å·¥ä½ä¸Šï¼š</p>
<p>â€œ<strong>ä¿®ä»™æ— å²æœˆï¼ŒæŠ€æœ¯ä¸è¿›åˆ™é€€ã€‚å¥½è‡ªä¸ºä¹‹ã€‚</strong>â€</p>
<p>æˆ‘çœ‹äº†çœ‹çµé•œå³ä¸‹è§’çš„æ—¶é—´ï¼Œæ­£æ˜¯åŒ—äº¬æ—¶é—´ <strong>02:15:30.500</strong>ã€‚</p>
<p>åœ¨æ­¤æ¯«ç§’ä¹‹é—´ï¼Œæˆ‘ä¸å°æ±å¯¹è§†ä¸€çœ¼ï¼Œçš†æ˜¯åŠ«åä½™ç”Ÿçš„åº†å¹¸ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çº¿ç¨‹æ± æ·±åº¦è§£æ]]></title>    <link>https://juejin.cn/post/7592170706026758179</link>    <guid>https://juejin.cn/post/7592170706026758179</guid>    <pubDate>2026-01-07T08:35:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592170706026758179" data-draft-id="7592166340381949967" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çº¿ç¨‹æ± æ·±åº¦è§£æ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-07T08:35:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»¥æ¢¦ä¸ºé©¬ä¸è´ŸéŸ¶å"/> <meta itemprop="url" content="https://juejin.cn/user/4001878056900429"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çº¿ç¨‹æ± æ·±åº¦è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4001878056900429/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»¥æ¢¦ä¸ºé©¬ä¸è´ŸéŸ¶å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T08:35:13.000Z" title="Wed Jan 07 2026 08:35:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">çº¿ç¨‹æ± æ·±åº¦è§£æï¼šä»ä½¿ç”¨åˆ°æºç ï¼Œå†åˆ°ç”Ÿäº§å®è·µ</h2>
<h3 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦çº¿ç¨‹æ± ï¼Ÿ</h3>
<h4 data-id="heading-2">1.1 çº¿ç¨‹çš„ä»£ä»·</h4>
<p>åœ¨å¼€å§‹è®²è§£çº¿ç¨‹æ± ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŸå§‹æ–¹å¼ï¼šæ¯æ¬¡è¯·æ±‚éƒ½åˆ›å»ºæ–°çº¿ç¨‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleRequest</span><span class="hljs-params">(Request request)</span> {
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
        <span class="hljs-comment">// å¤„ç†ä¸šåŠ¡é€»è¾‘</span>
        process(request);
    }).start();
}
</code></pre>
<p>è¿™ç§æ–¹å¼æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p>
<ul>
<li><strong>åˆ›å»ºæˆæœ¬é«˜</strong>ï¼šæ¯æ¬¡åˆ›å»ºçº¿ç¨‹éœ€è¦åˆ†é…å†…å­˜ã€åˆå§‹åŒ–æ ˆï¼ˆé»˜è®¤1MBï¼‰</li>
<li><strong>èµ„æºæµªè´¹</strong>ï¼šçº¿ç¨‹åˆ›å»º/é”€æ¯æ¶ˆè€—CPUèµ„æº</li>
<li><strong>éš¾ä»¥ç®¡ç†</strong>ï¼šçº¿ç¨‹æ•°é‡æ— é™åˆ¶ï¼Œå®¹æ˜“å¯¼è‡´ç³»ç»Ÿå´©æºƒ</li>
</ul>
<h4 data-id="heading-3">1.2 çº¿ç¨‹æ± çš„æ•‘èµ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨çº¿ç¨‹æ± åçš„ä¼˜é›…æ–¹å¼</span>
<span class="hljs-keyword">private</span> <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">threadPool</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">10</span>);

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleRequest</span><span class="hljs-params">(Request request)</span> {
    threadPool.execute(() -&gt; {
        process(request);
    });
}
</code></pre>
<h3 data-id="heading-4">äºŒã€Javaçº¿ç¨‹æ± å®¶æ—</h3>
<h4 data-id="heading-5">2.1 Executorså·¥å‚ç±»</h4>
<p>Javaæä¾›äº†4ç§å¸¸ç”¨çš„çº¿ç¨‹æ± ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. å›ºå®šå¤§å°çº¿ç¨‹æ± </span>
<span class="hljs-type">ExecutorService</span> <span class="hljs-variable">fixedPool</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">10</span>);
<span class="hljs-comment">// é€‚ç”¨åœºæ™¯ï¼šå·²çŸ¥å¹¶å‘é‡ï¼Œéœ€è¦æ§åˆ¶èµ„æº</span>

<span class="hljs-comment">// 2. å•çº¿ç¨‹çº¿ç¨‹æ± </span>
<span class="hljs-type">ExecutorService</span> <span class="hljs-variable">singlePool</span> <span class="hljs-operator">=</span> Executors.newSingleThreadExecutor();
<span class="hljs-comment">// é€‚ç”¨åœºæ™¯ï¼šä»»åŠ¡éœ€è¦é¡ºåºæ‰§è¡Œ</span>

<span class="hljs-comment">// 3. å¯ç¼“å­˜çº¿ç¨‹æ± </span>
<span class="hljs-type">ExecutorService</span> <span class="hljs-variable">cachedPool</span> <span class="hljs-operator">=</span> Executors.newCachedThreadPool();
<span class="hljs-comment">// é€‚ç”¨åœºæ™¯ï¼šçŸ­æœŸå¼‚æ­¥ä»»åŠ¡ï¼Œçº¿ç¨‹æ•°è‡ªåŠ¨è°ƒæ•´</span>

<span class="hljs-comment">// 4. å®šæ—¶ä»»åŠ¡çº¿ç¨‹æ± </span>
<span class="hljs-type">ScheduledExecutorService</span> <span class="hljs-variable">scheduledPool</span> <span class="hljs-operator">=</span> Executors.newScheduledThreadPool(<span class="hljs-number">5</span>);
<span class="hljs-comment">// é€‚ç”¨åœºæ™¯ï¼šå»¶è¿Ÿæ‰§è¡Œæˆ–å‘¨æœŸæ€§ä»»åŠ¡</span>
</code></pre>
<h4 data-id="heading-6">2.2 è¿™äº›"å¿«æ·æ–¹å¼"çš„çœŸç›¸</h4>
<p>æˆ‘ä»¬ç‚¹å¼€æºç çœ‹çœ‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Executors.newFixedThreadPoolæºç </span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ExecutorService <span class="hljs-title function_">newFixedThreadPool</span><span class="hljs-params">(<span class="hljs-type">int</span> nThreads)</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(
        nThreads,                  <span class="hljs-comment">// æ ¸å¿ƒçº¿ç¨‹æ•°</span>
        nThreads,                  <span class="hljs-comment">// æœ€å¤§çº¿ç¨‹æ•°</span>
        <span class="hljs-number">0L</span>, TimeUnit.MILLISECONDS, <span class="hljs-comment">// ç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;Runnable&gt;() <span class="hljs-comment">// æ— ç•Œé˜Ÿåˆ—</span>
    );
}
</code></pre>
<p><strong>æ³¨æ„å‘ç‚¹</strong>ï¼š<code>LinkedBlockingQueue</code>é»˜è®¤æ˜¯<code>Integer.MAX_VALUE</code>ï¼Œä»»åŠ¡å †ç§¯å¯èƒ½OOMï¼</p>
<h3 data-id="heading-7">ä¸‰ã€æ·±å…¥ThreadPoolExecutoræºç </h3>
<h4 data-id="heading-8">3.1 æ ¸å¿ƒå‚æ•°è§£æ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">ThreadPoolExecutor</span><span class="hljs-params">(
    <span class="hljs-type">int</span> corePoolSize,      // æ ¸å¿ƒçº¿ç¨‹æ•°ï¼ˆé•¿æœŸå­˜æ´»çš„çº¿ç¨‹ï¼‰
    <span class="hljs-type">int</span> maximumPoolSize,   // æœ€å¤§çº¿ç¨‹æ•°
    <span class="hljs-type">long</span> keepAliveTime,    // ç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´
    TimeUnit unit,         // æ—¶é—´å•ä½
    BlockingQueue&lt;Runnable&gt; workQueue,  // å·¥ä½œé˜Ÿåˆ—
    ThreadFactory threadFactory,        // çº¿ç¨‹å·¥å‚
    RejectedExecutionHandler handler    // æ‹’ç»ç­–ç•¥
)</span>
</code></pre>
<h4 data-id="heading-9">3.2 çº¿ç¨‹æ± å·¥ä½œæµç¨‹ï¼ˆæºç çº§è§£æï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç®€åŒ–ç‰ˆçš„executeæ–¹æ³•æµç¨‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">(Runnable command)</span> {
    <span class="hljs-comment">// ç¬¬ä¸€é˜¶æ®µï¼šæ ¸å¿ƒçº¿ç¨‹å¤„ç†</span>
    <span class="hljs-keyword">if</span> (workerCount &lt; corePoolSize) {
        <span class="hljs-keyword">if</span> (addWorker(command, <span class="hljs-literal">true</span>))  <span class="hljs-comment">// åˆ›å»ºæ ¸å¿ƒçº¿ç¨‹</span>
            <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// ç¬¬äºŒé˜¶æ®µï¼šä»»åŠ¡å…¥é˜Ÿ</span>
    <span class="hljs-keyword">if</span> (isRunning() &amp;&amp; workQueue.offer(command)) {
        <span class="hljs-comment">// å†æ¬¡æ£€æŸ¥</span>
        <span class="hljs-keyword">if</span> (!isRunning() &amp;&amp; remove(command))
            reject(command);
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (workerCount == <span class="hljs-number">0</span>)
            addWorker(<span class="hljs-literal">null</span>, <span class="hljs-literal">false</span>);
    }
    
    <span class="hljs-comment">// ç¬¬ä¸‰é˜¶æ®µï¼šåˆ›å»ºéæ ¸å¿ƒçº¿ç¨‹</span>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!addWorker(command, <span class="hljs-literal">false</span>))
        <span class="hljs-comment">// ç¬¬å››é˜¶æ®µï¼šæ‹’ç»ç­–ç•¥</span>
        reject(command);
}
</code></pre>
<p>è®©æˆ‘ä»¬ç”¨æµç¨‹å›¾æ›´ç›´è§‚åœ°ç†è§£ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">ä»»åŠ¡æäº¤
<span class="hljs-code">    â†“
å½“å‰çº¿ç¨‹æ•° &lt; corePoolSize?
    â”œâ”€â”€ æ˜¯ â†’ åˆ›å»ºæ ¸å¿ƒçº¿ç¨‹æ‰§è¡Œä»»åŠ¡
    â†“
    â””â”€â”€ å¦ â†’ å·¥ä½œé˜Ÿåˆ—æœªæ»¡?
        â”œâ”€â”€ æ˜¯ â†’ ä»»åŠ¡å…¥é˜Ÿç­‰å¾…
        â†“
        â””â”€â”€ å¦ â†’ å½“å‰çº¿ç¨‹æ•° &lt; maximumPoolSize?
            â”œâ”€â”€ æ˜¯ â†’ åˆ›å»ºä¸´æ—¶çº¿ç¨‹æ‰§è¡Œ
            â†“
            â””â”€â”€ å¦ â†’ æ‰§è¡Œæ‹’ç»ç­–ç•¥
</span></code></pre>
<h4 data-id="heading-10">3.3 Workerå†…éƒ¨ç±»ï¼šçº¿ç¨‹æ± çš„çœŸæ­£æ‰§è¡Œè€…</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Worker</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractQueuedSynchronizer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> {
    <span class="hljs-keyword">final</span> Thread thread;  <span class="hljs-comment">// å®é™…æ‰§è¡Œä»»åŠ¡çš„çº¿ç¨‹</span>
    Runnable firstTask;   <span class="hljs-comment">// åˆå§‹ä»»åŠ¡</span>
    
    Worker(Runnable firstTask) {
        <span class="hljs-built_in">this</span>.firstTask = firstTask;
        <span class="hljs-built_in">this</span>.thread = getThreadFactory().newThread(<span class="hljs-built_in">this</span>);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        runWorker(<span class="hljs-built_in">this</span>);  <span class="hljs-comment">// æ ¸å¿ƒæ‰§è¡Œæ–¹æ³•</span>
    }
    
    <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">runWorker</span><span class="hljs-params">(Worker w)</span> {
        <span class="hljs-type">Thread</span> <span class="hljs-variable">wt</span> <span class="hljs-operator">=</span> Thread.currentThread();
        <span class="hljs-type">Runnable</span> <span class="hljs-variable">task</span> <span class="hljs-operator">=</span> w.firstTask;
        w.firstTask = <span class="hljs-literal">null</span>;
        
        <span class="hljs-keyword">while</span> (task != <span class="hljs-literal">null</span> || (task = getTask()) != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// è·å–é”ï¼Œç¡®ä¿çº¿ç¨‹ä¸ä¼šè¢«å…¶ä»–ä»»åŠ¡ä¸­æ–­</span>
            w.lock();
            
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// æ‰§è¡Œå‰çš„é’©å­æ–¹æ³•</span>
                beforeExecute(wt, task);
                
                <span class="hljs-keyword">try</span> {
                    task.run();  <span class="hljs-comment">// æ‰§è¡Œä»»åŠ¡ï¼</span>
                    afterExecute(task, <span class="hljs-literal">null</span>);
                } <span class="hljs-keyword">catch</span> (Throwable ex) {
                    afterExecute(task, ex);
                    <span class="hljs-keyword">throw</span> ex;
                }
            } <span class="hljs-keyword">finally</span> {
                task = <span class="hljs-literal">null</span>;
                w.completedTasks++;  <span class="hljs-comment">// ç»Ÿè®¡å®Œæˆä»»åŠ¡æ•°</span>
                w.unlock();
            }
        }
        
        processWorkerExit(w, completedAbruptly);
    }
}
</code></pre>
<h4 data-id="heading-11">3.4 getTask()ï¼šçº¿ç¨‹å¦‚ä½•è·å–ä»»åŠ¡</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> Runnable <span class="hljs-title function_">getTask</span><span class="hljs-params">()</span> {
    <span class="hljs-type">boolean</span> <span class="hljs-variable">timedOut</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// ä¸Šæ¬¡pollæ˜¯å¦è¶…æ—¶</span>
    
    <span class="hljs-keyword">for</span> (;;) {
        <span class="hljs-type">int</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> ctl.get();
        <span class="hljs-type">int</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> runStateOf(c);
        
        <span class="hljs-comment">// æ£€æŸ¥çº¿ç¨‹æ± çŠ¶æ€</span>
        <span class="hljs-keyword">if</span> (rs &gt;= SHUTDOWN &amp;&amp; (rs &gt;= STOP || workQueue.isEmpty())) {
            decrementWorkerCount();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        
        <span class="hljs-type">int</span> <span class="hljs-variable">wc</span> <span class="hljs-operator">=</span> workerCountOf(c);
        
        <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦å…è®¸è¶…æ—¶å›æ”¶çº¿ç¨‹</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">timed</span> <span class="hljs-operator">=</span> allowCoreThreadTimeOut || wc &gt; corePoolSize;
        
        <span class="hljs-keyword">if</span> ((wc &gt; maximumPoolSize || (timed &amp;&amp; timedOut))
            &amp;&amp; (wc &gt; <span class="hljs-number">1</span> || workQueue.isEmpty())) {
            <span class="hljs-keyword">if</span> (compareAndDecrementWorkerCount(c))
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">continue</span>;
        }
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// å…³é”®ï¼šä»é˜Ÿåˆ—å–ä»»åŠ¡</span>
            <span class="hljs-type">Runnable</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> timed ?
                workQueue.poll(keepAliveTime, TimeUnit.NANOSECONDS) :
                workQueue.take();
            <span class="hljs-keyword">if</span> (r != <span class="hljs-literal">null</span>)
                <span class="hljs-keyword">return</span> r;
            timedOut = <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">catch</span> (InterruptedException retry) {
            timedOut = <span class="hljs-literal">false</span>;
        }
    }
}
</code></pre>
<h3 data-id="heading-12">å››ã€æ‹’ç»ç­–ç•¥è¯¦è§£</h3>
<h4 data-id="heading-13">4.1 Javaå†…ç½®çš„4ç§æ‹’ç»ç­–ç•¥</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. AbortPolicyï¼ˆé»˜è®¤ï¼‰ - ç›´æ¥æŠ›å‡ºå¼‚å¸¸</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">rejectedExecution</span><span class="hljs-params">(Runnable r, ThreadPoolExecutor e)</span> {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RejectedExecutionException</span>(<span class="hljs-string">"Task rejected"</span>);
}

<span class="hljs-comment">// 2. CallerRunsPolicy - è®©è°ƒç”¨è€…çº¿ç¨‹æ‰§è¡Œ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">rejectedExecution</span><span class="hljs-params">(Runnable r, ThreadPoolExecutor e)</span> {
    <span class="hljs-keyword">if</span> (!e.isShutdown()) {
        r.run();  <span class="hljs-comment">// æ³¨æ„ï¼šæ˜¯run()ä¸æ˜¯start()ï¼</span>
    }
}

<span class="hljs-comment">// 3. DiscardPolicy - é»˜é»˜ä¸¢å¼ƒ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">rejectedExecution</span><span class="hljs-params">(Runnable r, ThreadPoolExecutor e)</span> {
    <span class="hljs-comment">// ä»€ä¹ˆéƒ½ä¸åšï¼Œç›´æ¥ä¸¢å¼ƒ</span>
}

<span class="hljs-comment">// 4. DiscardOldestPolicy - ä¸¢å¼ƒé˜Ÿåˆ—æœ€è€ä»»åŠ¡</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">rejectedExecution</span><span class="hljs-params">(Runnable r, ThreadPoolExecutor e)</span> {
    <span class="hljs-keyword">if</span> (!e.isShutdown()) {
        e.getQueue().poll();  <span class="hljs-comment">// ä¸¢å¼ƒé˜Ÿå¤´</span>
        e.execute(r);         <span class="hljs-comment">// å°è¯•é‡æ–°æ‰§è¡Œ</span>
    }
}
</code></pre>
<h4 data-id="heading-14">4.2 è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥å®æˆ˜</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomRejectPolicy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RejectedExecutionHandler</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MeterRegistry meterRegistry;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">rejectedExecution</span><span class="hljs-params">(Runnable r, ThreadPoolExecutor executor)</span> {
        <span class="hljs-comment">// 1. è®°å½•æŒ‡æ ‡</span>
        meterRegistry.counter(<span class="hljs-string">"threadpool.rejected.tasks"</span>).increment();
        
        <span class="hljs-comment">// 2. é™çº§ç­–ç•¥</span>
        <span class="hljs-keyword">if</span> (r <span class="hljs-keyword">instanceof</span> ImportantTask) {
            <span class="hljs-comment">// é‡è¦ä»»åŠ¡ï¼šè®°å½•æ—¥å¿—ï¼Œç­‰å¾…é‡è¯•</span>
            log.warn(<span class="hljs-string">"é‡è¦ä»»åŠ¡è¢«æ‹’ç»ï¼Œæ”¾å…¥é‡è¯•é˜Ÿåˆ—"</span>);
            retryQueue.offer((ImportantTask) r);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// æ™®é€šä»»åŠ¡ï¼šå¼‚æ­¥æŒä¹…åŒ–ï¼Œç¨åå¤„ç†</span>
            asyncSaveToDB(r);
        }
        
        <span class="hljs-comment">// 3. å‘Šè­¦é€šçŸ¥</span>
        <span class="hljs-keyword">if</span> (needAlert(executor)) {
            sendAlert(executor);
        }
    }
}
</code></pre>
<h3 data-id="heading-15">äº”ã€ç”Ÿäº§ç¯å¢ƒçº¿ç¨‹æ± é…ç½®æ–¹æ¡ˆ</h3>
<h4 data-id="heading-16">5.1 çº¿ç¨‹æ•°è®¡ç®—å…¬å¼</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ ¹æ®ä»»åŠ¡ç±»å‹è®¾ç½®çº¿ç¨‹æ•°</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadPoolConfig</span> {
    
    <span class="hljs-comment">/**
     * CPUå¯†é›†å‹ä»»åŠ¡ï¼ˆè®¡ç®—ã€åŠ å¯†ç­‰ï¼‰
     * çº¿ç¨‹æ•° = CPUæ ¸å¿ƒæ•° + 1
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ExecutorService <span class="hljs-title function_">cpuIntensivePool</span><span class="hljs-params">()</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">cpuCores</span> <span class="hljs-operator">=</span> Runtime.getRuntime().availableProcessors();
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(
            cpuCores + <span class="hljs-number">1</span>,
            cpuCores + <span class="hljs-number">1</span>,
            <span class="hljs-number">0L</span>, TimeUnit.MILLISECONDS,
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;&gt;(<span class="hljs-number">1000</span>)
        );
    }
    
    <span class="hljs-comment">/**
     * IOå¯†é›†å‹ä»»åŠ¡ï¼ˆç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“æ“ä½œç­‰ï¼‰
     * çº¿ç¨‹æ•° = CPUæ ¸å¿ƒæ•° * (1 + ç­‰å¾…æ—¶é—´/è®¡ç®—æ—¶é—´)
     * é€šå¸¸è®¾ç½®ä¸º CPUæ ¸å¿ƒæ•° * 2 ~ 5
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ExecutorService <span class="hljs-title function_">ioIntensivePool</span><span class="hljs-params">()</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">cpuCores</span> <span class="hljs-operator">=</span> Runtime.getRuntime().availableProcessors();
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(
            cpuCores * <span class="hljs-number">2</span>,
            cpuCores * <span class="hljs-number">5</span>,
            <span class="hljs-number">60L</span>, TimeUnit.SECONDS,
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;&gt;(<span class="hljs-number">2000</span>)
        );
    }
    
    <span class="hljs-comment">/**
     * æ··åˆå‹ä»»åŠ¡
     * æœ€ä½³çº¿ç¨‹æ•° = CPUæ ¸å¿ƒæ•° * (1 + é˜»å¡ç³»æ•°)
     * é˜»å¡ç³»æ•° = é˜»å¡æ—¶é—´ / (é˜»å¡æ—¶é—´ + è®¡ç®—æ—¶é—´)
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ExecutorService <span class="hljs-title function_">mixedPool</span><span class="hljs-params">(<span class="hljs-type">double</span> blockingCoefficient)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">cpuCores</span> <span class="hljs-operator">=</span> Runtime.getRuntime().availableProcessors();
        <span class="hljs-type">int</span> <span class="hljs-variable">optimalThreads</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) (cpuCores * (<span class="hljs-number">1</span> + blockingCoefficient));
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(
            optimalThreads,
            optimalThreads * <span class="hljs-number">2</span>,
            <span class="hljs-number">30L</span>, TimeUnit.SECONDS,
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBlockingQueue</span>&lt;&gt;(optimalThreads * <span class="hljs-number">10</span>)
        );
    }
}
</code></pre>
<h4 data-id="heading-17">5.2 Spring Bootä¸­çš„æœ€ä½³é…ç½®</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">thread-pool:</span>
  <span class="hljs-attr">configs:</span>
    <span class="hljs-attr">order-process:</span>
      <span class="hljs-attr">core-size:</span> <span class="hljs-number">8</span>
      <span class="hljs-attr">max-size:</span> <span class="hljs-number">16</span>
      <span class="hljs-attr">queue-capacity:</span> <span class="hljs-number">100</span>
      <span class="hljs-attr">keep-alive-seconds:</span> <span class="hljs-number">60</span>
      <span class="hljs-attr">thread-name-prefix:</span> <span class="hljs-string">order-</span>
      <span class="hljs-attr">reject-policy:</span> <span class="hljs-string">CALLER_RUNS</span>
      
    <span class="hljs-attr">payment-callback:</span>
      <span class="hljs-attr">core-size:</span> <span class="hljs-number">4</span>
      <span class="hljs-attr">max-size:</span> <span class="hljs-number">8</span>
      <span class="hljs-attr">queue-capacity:</span> <span class="hljs-number">200</span>
      <span class="hljs-attr">thread-name-prefix:</span> <span class="hljs-string">payment-</span>
      <span class="hljs-attr">reject-policy:</span> <span class="hljs-string">ABORT</span>
      
    <span class="hljs-attr">report-generate:</span>
      <span class="hljs-attr">core-size:</span> <span class="hljs-number">2</span>
      <span class="hljs-attr">max-size:</span> <span class="hljs-number">4</span>
      <span class="hljs-attr">queue-capacity:</span> <span class="hljs-number">1000</span>
      <span class="hljs-attr">thread-name-prefix:</span> <span class="hljs-string">report-</span>
      <span class="hljs-attr">allow-core-thread-timeout:</span> <span class="hljs-literal">true</span>
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableConfigurationProperties(ThreadPoolProperties.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadPoolConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> Map&lt;String, ExecutorService&gt; <span class="hljs-title function_">threadPools</span><span class="hljs-params">(
            ThreadPoolProperties properties)</span> {
        
        Map&lt;String, ExecutorService&gt; pools = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        
        properties.getConfigs().forEach((name, config) -&gt; {
            <span class="hljs-comment">// åŠ¨æ€å‚æ•°é…ç½®</span>
            <span class="hljs-type">DynamicThreadPoolExecutor</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> 
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicThreadPoolExecutor</span>(
                    config.getCoreSize(),
                    config.getMaxSize(),
                    config.getKeepAliveSeconds(),
                    TimeUnit.SECONDS,
                    createQueue(config.getQueueCapacity()),
                    <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomThreadFactory</span>(config.getThreadNamePrefix()),
                    createRejectPolicy(config.getRejectPolicy())
                );
            
            <span class="hljs-comment">// å…è®¸æ ¸å¿ƒçº¿ç¨‹è¶…æ—¶</span>
            <span class="hljs-keyword">if</span> (config.isAllowCoreThreadTimeout()) {
                executor.allowCoreThreadTimeOut(<span class="hljs-literal">true</span>);
            }
            
            <span class="hljs-comment">// æ³¨å†Œç›‘æ§</span>
            ThreadPoolMonitor.register(name, executor);
            
            pools.put(name, executor);
        });
        
        <span class="hljs-keyword">return</span> pools;
    }
    
    <span class="hljs-keyword">private</span> BlockingQueue&lt;Runnable&gt; <span class="hljs-title function_">createQueue</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity)</span> {
        <span class="hljs-comment">// æ ¹æ®é˜Ÿåˆ—å¤§å°é€‰æ‹©é˜Ÿåˆ—ç±»å‹</span>
        <span class="hljs-keyword">if</span> (capacity &lt;= <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SynchronousQueue</span>&lt;&gt;();
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (capacity &lt;= <span class="hljs-number">10000</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBlockingQueue</span>&lt;&gt;(capacity);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;&gt;(capacity);
        }
    }
}
</code></pre>
<h4 data-id="heading-18">5.3 åŠ¨æ€çº¿ç¨‹æ± ï¼šç¾å›¢åŠ¨æ€çº¿ç¨‹æ± å®è·µ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicThreadPoolExecutor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ThreadPoolExecutor</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String poolName;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ThreadPoolProperties properties;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DynamicThreadPoolExecutor</span><span class="hljs-params">(String poolName, 
                                     ThreadPoolProperties properties)</span> {
        <span class="hljs-built_in">super</span>(properties.getCoreSize(), 
              properties.getMaxSize(),
              properties.getKeepAliveSeconds(), 
              TimeUnit.SECONDS,
              <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizableCapacityLinkedBlockingQueue</span>&lt;&gt;(
                  properties.getQueueCapacity()
              ));
        <span class="hljs-built_in">this</span>.poolName = poolName;
        <span class="hljs-built_in">this</span>.properties = properties;
        
        <span class="hljs-comment">// åˆå§‹åŒ–ç›‘å¬</span>
        initListeners();
    }
    
    <span class="hljs-comment">/**
     * åŠ¨æ€è°ƒæ•´æ ¸å¿ƒçº¿ç¨‹æ•°
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCorePoolSize</span><span class="hljs-params">(<span class="hljs-type">int</span> corePoolSize)</span> {
        <span class="hljs-keyword">if</span> (corePoolSize &gt;= <span class="hljs-number">0</span> &amp;&amp; 
            corePoolSize &lt;= getMaximumPoolSize()) {
            <span class="hljs-built_in">super</span>.setCorePoolSize(corePoolSize);
            
            <span class="hljs-comment">// è®°å½•å˜æ›´</span>
            log.info(<span class="hljs-string">"çº¿ç¨‹æ± {}æ ¸å¿ƒçº¿ç¨‹æ•°è°ƒæ•´ä¸º: {}"</span>, 
                     poolName, corePoolSize);
        }
    }
    
    <span class="hljs-comment">/**
     * åŠ¨æ€è°ƒæ•´æœ€å¤§çº¿ç¨‹æ•°
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setMaximumPoolSize</span><span class="hljs-params">(<span class="hljs-type">int</span> maximumPoolSize)</span> {
        <span class="hljs-keyword">if</span> (maximumPoolSize &gt;= getCorePoolSize()) {
            <span class="hljs-built_in">super</span>.setMaximumPoolSize(maximumPoolSize);
            
            <span class="hljs-comment">// è®°å½•å˜æ›´</span>
            log.info(<span class="hljs-string">"çº¿ç¨‹æ± {}æœ€å¤§çº¿ç¨‹æ•°è°ƒæ•´ä¸º: {}"</span>, 
                     poolName, maximumPoolSize);
        }
    }
    
    <span class="hljs-comment">/**
     * åŠ¨æ€è°ƒæ•´é˜Ÿåˆ—å®¹é‡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setQueueCapacity</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity)</span> {
        ResizableCapacityLinkedBlockingQueue&lt;Runnable&gt; queue = 
            (ResizableCapacityLinkedBlockingQueue&lt;Runnable&gt;) getQueue();
        queue.setCapacity(capacity);
        
        log.info(<span class="hljs-string">"çº¿ç¨‹æ± {}é˜Ÿåˆ—å®¹é‡è°ƒæ•´ä¸º: {}"</span>, poolName, capacity);
    }
}

<span class="hljs-comment">// å¯è°ƒæ•´å®¹é‡çš„é˜Ÿåˆ—</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResizableCapacityLinkedBlockingQueue</span>&lt;E&gt; 
        <span class="hljs-keyword">extends</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;E&gt; {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">int</span> capacity;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ResizableCapacityLinkedBlockingQueue</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity)</span> {
        <span class="hljs-built_in">super</span>(capacity);
        <span class="hljs-built_in">this</span>.capacity = capacity;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCapacity</span><span class="hljs-params">(<span class="hljs-type">int</span> newCapacity)</span> {
        <span class="hljs-keyword">if</span> (newCapacity &lt;= <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>();
        }
        
        <span class="hljs-comment">// è°ƒæ•´å®¹é‡</span>
        <span class="hljs-built_in">this</span>.capacity = newCapacity;
        
        <span class="hljs-comment">// å¦‚æœæ–°å®¹é‡å°äºå½“å‰sizeï¼Œéœ€è¦ç§»é™¤å¤šä½™å…ƒç´ </span>
        <span class="hljs-keyword">while</span> (size() &gt; newCapacity) {
            poll();
        }
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">offer</span><span class="hljs-params">(E e)</span> {
        <span class="hljs-comment">// åŠ¨æ€åˆ¤æ–­æ˜¯å¦æ¥å—æ–°ä»»åŠ¡</span>
        <span class="hljs-keyword">if</span> (size() &gt;= capacity) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.offer(e);
    }
}
</code></pre>
<h3 data-id="heading-19">å…­ã€çº¿ç¨‹æ± ç›‘æ§æ–¹æ¡ˆ</h3>
<h4 data-id="heading-20">6.1 ç›‘æ§æŒ‡æ ‡ä½“ç³»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadPoolMonitor</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MeterRegistry meterRegistry;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">monitor</span><span class="hljs-params">(String poolName, ThreadPoolExecutor executor)</span> {
        <span class="hljs-comment">// 1. æ ¸å¿ƒæŒ‡æ ‡</span>
        monitorCoreMetrics(poolName, executor);
        
        <span class="hljs-comment">// 2. é˜Ÿåˆ—æŒ‡æ ‡</span>
        monitorQueueMetrics(poolName, executor);
        
        <span class="hljs-comment">// 3. ä»»åŠ¡æ‰§è¡ŒæŒ‡æ ‡</span>
        monitorTaskMetrics(poolName, executor);
        
        <span class="hljs-comment">// 4. çº¿ç¨‹çŠ¶æ€æŒ‡æ ‡</span>
        monitorThreadMetrics(poolName, executor);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">monitorCoreMetrics</span><span class="hljs-params">(String poolName, 
                                    ThreadPoolExecutor executor)</span> {
        <span class="hljs-comment">// çº¿ç¨‹æ•°æŒ‡æ ‡</span>
        Gauge.builder(<span class="hljs-string">"threadpool.core.size"</span>, 
                     executor, ThreadPoolExecutor::getCorePoolSize)
            .tag(<span class="hljs-string">"pool"</span>, poolName)
            .register(meterRegistry);
            
        Gauge.builder(<span class="hljs-string">"threadpool.active.count"</span>,
                     executor, ThreadPoolExecutor::getActiveCount)
            .tag(<span class="hljs-string">"pool"</span>, poolName)
            .register(meterRegistry);
            
        Gauge.builder(<span class="hljs-string">"threadpool.largest.pool.size"</span>,
                     executor, ThreadPoolExecutor::getLargestPoolSize)
            .tag(<span class="hljs-string">"pool"</span>, poolName)
            .register(meterRegistry);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">monitorQueueMetrics</span><span class="hljs-params">(String poolName,
                                     ThreadPoolExecutor executor)</span> {
        BlockingQueue&lt;Runnable&gt; queue = executor.getQueue();
        
        Gauge.builder(<span class="hljs-string">"threadpool.queue.size"</span>,
                     queue, BlockingQueue::size)
            .tag(<span class="hljs-string">"pool"</span>, poolName)
            .register(meterRegistry);
            
        Gauge.builder(<span class="hljs-string">"threadpool.queue.remaining"</span>,
                     queue, q -&gt; q.remainingCapacity())
            .tag(<span class="hljs-string">"pool"</span>, poolName)
            .register(meterRegistry);
    }
}
</code></pre>
<h4 data-id="heading-21">6.2 å¯è§†åŒ–ç›‘æ§é¢æ¿ï¼ˆGrafanaï¼‰</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"panels"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"çº¿ç¨‹æ± çŠ¶æ€"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"targets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"expr"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"threadpool_active_count{pool=\"$pool\"}"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"legendFormat"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ´»è·ƒçº¿ç¨‹"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"expr"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"threadpool_core_size{pool=\"$pool\"}"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"legendFormat"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ ¸å¿ƒçº¿ç¨‹"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"expr"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"threadpool_max_size{pool=\"$pool\"}"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"legendFormat"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æœ€å¤§çº¿ç¨‹"</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é˜Ÿåˆ—ç›‘æ§"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"targets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"expr"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"threadpool_queue_size{pool=\"$pool\"}"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"legendFormat"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é˜Ÿåˆ—å¤§å°"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"expr"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"threadpool_queue_remaining{pool=\"$pool\"}"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"legendFormat"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é˜Ÿåˆ—å‰©ä½™å®¹é‡"</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-22">6.3 å‘Šè­¦è§„åˆ™é…ç½®</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># alert-rules.yml</span>
<span class="hljs-attr">groups:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">threadpool_alerts</span>
    <span class="hljs-attr">rules:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">alert:</span> <span class="hljs-string">ThreadPoolQueueFull</span>
        <span class="hljs-attr">expr:</span> <span class="hljs-string">threadpool_queue_remaining{pool="order-process"}</span> <span class="hljs-string">==</span> <span class="hljs-number">0</span>
        <span class="hljs-attr">for:</span> <span class="hljs-string">1m</span>
        <span class="hljs-attr">annotations:</span>
          <span class="hljs-attr">summary:</span> <span class="hljs-string">"è®¢å•çº¿ç¨‹æ± é˜Ÿåˆ—å·²æ»¡"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ $labels.pool }}</span>é˜Ÿåˆ—å·²æ»¡ï¼ŒæŒç»­1åˆ†é’Ÿ"</span>
          
      <span class="hljs-bullet">-</span> <span class="hljs-attr">alert:</span> <span class="hljs-string">ThreadPoolRejectedTasksHigh</span>
        <span class="hljs-attr">expr:</span> <span class="hljs-string">rate(threadpool_rejected_tasks_total{pool="payment-callback"}[5m])</span> <span class="hljs-string">&gt;</span> <span class="hljs-number">10</span>
        <span class="hljs-attr">for:</span> <span class="hljs-string">30s</span>
        <span class="hljs-attr">annotations:</span>
          <span class="hljs-attr">summary:</span> <span class="hljs-string">"æ”¯ä»˜å›è°ƒçº¿ç¨‹æ± æ‹’ç»ä»»åŠ¡è¿‡å¤š"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ $labels.pool }}</span>5åˆ†é’Ÿå†…æ‹’ç»ä»»åŠ¡è¶…è¿‡10ä¸ª"</span>
          
      <span class="hljs-bullet">-</span> <span class="hljs-attr">alert:</span> <span class="hljs-string">ThreadPoolActiveThreadsHigh</span>
        <span class="hljs-attr">expr:</span> <span class="hljs-string">threadpool_active_count{pool="report-generate"}</span> <span class="hljs-string">/</span> <span class="hljs-string">threadpool_max_size{pool="report-generate"}</span> <span class="hljs-string">&gt;</span> <span class="hljs-number">0.8</span>
        <span class="hljs-attr">for:</span> <span class="hljs-string">2m</span>
        <span class="hljs-attr">annotations:</span>
          <span class="hljs-attr">summary:</span> <span class="hljs-string">"æŠ¥è¡¨ç”Ÿæˆçº¿ç¨‹æ± ä½¿ç”¨ç‡è¿‡é«˜"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ $labels.pool }}</span>æ´»è·ƒçº¿ç¨‹æ•°è¾¾åˆ°æœ€å¤§çº¿ç¨‹æ•°çš„80%"</span>
</code></pre>
<h3 data-id="heading-23">ä¸ƒã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-24">7.1 çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹å¼‚å¸¸æ€ä¹ˆåŠï¼Ÿ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SafeThreadPoolExecutor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ThreadPoolExecutor</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterExecute</span><span class="hljs-params">(Runnable r, Throwable t)</span> {
        <span class="hljs-built_in">super</span>.afterExecute(r, t);
        
        <span class="hljs-comment">// å¤„ç†æœªæ•è·å¼‚å¸¸</span>
        <span class="hljs-keyword">if</span> (t == <span class="hljs-literal">null</span> &amp;&amp; r <span class="hljs-keyword">instanceof</span> Future&lt;?&gt;) {
            <span class="hljs-keyword">try</span> {
                Future&lt;?&gt; future = (Future&lt;?&gt;) r;
                <span class="hljs-keyword">if</span> (future.isDone()) {
                    future.get();
                }
            } <span class="hljs-keyword">catch</span> (CancellationException ce) {
                t = ce;
            } <span class="hljs-keyword">catch</span> (ExecutionException ee) {
                t = ee.getCause();
            } <span class="hljs-keyword">catch</span> (InterruptedException ie) {
                Thread.currentThread().interrupt();
            }
        }
        
        <span class="hljs-keyword">if</span> (t != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// è®°å½•å¼‚å¸¸å¹¶é‡‡å–æ¢å¤æªæ–½</span>
            log.error(<span class="hljs-string">"çº¿ç¨‹æ± ä»»åŠ¡æ‰§è¡Œå¼‚å¸¸"</span>, t);
            handleException(t);
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleException</span><span class="hljs-params">(Throwable t)</span> {
        <span class="hljs-comment">// 1. å‘é€å‘Šè­¦</span>
        alertSystem.send(t);
        
        <span class="hljs-comment">// 2. é‡è¯•æœºåˆ¶</span>
        <span class="hljs-keyword">if</span> (canRetry(t)) {
            retryQueue.offer(currentTask);
        }
        
        <span class="hljs-comment">// 3. é™çº§å¤„ç†</span>
        fallbackService.process(currentTask);
    }
}
</code></pre>
<h4 data-id="heading-25">7.2 å¦‚ä½•ä¼˜é›…å…³é—­çº¿ç¨‹æ± ï¼Ÿ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadPoolShutdownHandler</span> {
    
    <span class="hljs-meta">@PreDestroy</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">shutdownAll</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// 1. æ‹’ç»æ–°ä»»åŠ¡</span>
        threadPool.shutdown();
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 2. ç­‰å¾…ç°æœ‰ä»»åŠ¡å®Œæˆï¼ˆæœ€å¤šç­‰å¾…30åˆ†é’Ÿï¼‰</span>
            <span class="hljs-keyword">if</span> (!threadPool.awaitTermination(<span class="hljs-number">30</span>, TimeUnit.MINUTES)) {
                <span class="hljs-comment">// 3. å¼ºåˆ¶å…³é—­</span>
                List&lt;Runnable&gt; unfinishedTasks = 
                    threadPool.shutdownNow();
                
                <span class="hljs-comment">// 4. å¤„ç†æœªå®Œæˆçš„ä»»åŠ¡</span>
                handleUnfinishedTasks(unfinishedTasks);
                
                <span class="hljs-comment">// 5. å†æ¬¡ç­‰å¾…</span>
                <span class="hljs-keyword">if</span> (!threadPool.awaitTermination(<span class="hljs-number">10</span>, TimeUnit.MINUTES)) {
                    log.error(<span class="hljs-string">"çº¿ç¨‹æ± æ— æ³•æ­£å¸¸å…³é—­"</span>);
                }
            }
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            <span class="hljs-comment">// 6. é‡æ–°ä¸­æ–­</span>
            threadPool.shutdownNow();
            Thread.currentThread().interrupt();
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleUnfinishedTasks</span><span class="hljs-params">(List&lt;Runnable&gt; tasks)</span> {
        <span class="hljs-comment">// æŒä¹…åŒ–æœªå®Œæˆä»»åŠ¡</span>
        tasks.forEach(task -&gt; {
            <span class="hljs-keyword">if</span> (task <span class="hljs-keyword">instanceof</span> PersistableTask) {
                taskPersistenceService.save((PersistableTask) task);
            }
        });
    }
}
</code></pre>
<h3 data-id="heading-26">å…«ã€æœ€ä½³å®è·µæ€»ç»“</h3>
<h4 data-id="heading-27">8.1 çº¿ç¨‹æ± é…ç½®æ¸…å•</h4>








































<table><thead><tr><th>é…ç½®é¡¹</th><th>æ¨èå€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>corePoolSize</td><td>CPUæ ¸å¿ƒæ•°+1ï½æ ¸å¿ƒæ•°*2</td><td>æ ¹æ®ä»»åŠ¡ç±»å‹è°ƒæ•´</td></tr><tr><td>maximumPoolSize</td><td>corePoolSizeçš„2ï½4å€</td><td>ä¸ºçªå‘æµé‡é¢„ç•™</td></tr><tr><td>keepAliveTime</td><td>30ï½60ç§’</td><td>é¿å…é¢‘ç¹åˆ›å»ºçº¿ç¨‹</td></tr><tr><td>workQueue</td><td>ArrayBlockingQueue</td><td>æœ‰ç•Œé˜Ÿåˆ—ï¼Œé˜²æ­¢OOM</td></tr><tr><td>threadFactory</td><td>è‡ªå®šä¹‰å‘½å</td><td>æ–¹ä¾¿é—®é¢˜æ’æŸ¥</td></tr><tr><td>rejectedPolicy</td><td>CallerRunsPolicy</td><td>æˆ–è‡ªå®šä¹‰é™çº§ç­–ç•¥</td></tr></tbody></table>
<h4 data-id="heading-28">8.2 çº¿ç¨‹æ± ä½¿ç”¨"ä¸ƒä¸è¦"</h4>
<ol>
<li><strong>ä¸è¦</strong>ä½¿ç”¨Executorsçš„å¿«æ·æ–¹æ³•</li>
<li><strong>ä¸è¦</strong>ä½¿ç”¨æ— ç•Œé˜Ÿåˆ—ï¼ˆLinkedBlockingQueueé»˜è®¤æ— ç•Œï¼‰</li>
<li><strong>ä¸è¦</strong>è®©ä»»åŠ¡æŠ›å‡ºæœªæ•è·å¼‚å¸¸</li>
<li><strong>ä¸è¦</strong>åœ¨ä»»åŠ¡ä¸­æ— é™å¾ªç¯è€Œä¸æ£€æŸ¥ä¸­æ–­</li>
<li><strong>ä¸è¦</strong>å¿˜è®°å…³é—­çº¿ç¨‹æ± </li>
<li><strong>ä¸è¦</strong>æ‰€æœ‰ä¸šåŠ¡å…±ç”¨ä¸€ä¸ªçº¿ç¨‹æ± </li>
<li><strong>ä¸è¦</strong>å¿½è§†çº¿ç¨‹æ± ç›‘æ§</li>
</ol>
<h4 data-id="heading-29">8.3 æ¨èçš„çº¿ç¨‹æ± å·¥å…·ç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadPoolUtils</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Map&lt;String, ExecutorService&gt; POOLS = 
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-comment">/**
     * è·å–æˆ–åˆ›å»ºçº¿ç¨‹æ± 
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ExecutorService <span class="hljs-title function_">getOrCreate</span><span class="hljs-params">(String poolName,
                                              Supplier&lt;ExecutorService&gt; creator)</span> {
        <span class="hljs-keyword">return</span> POOLS.computeIfAbsent(poolName, k -&gt; creator.get());
    }
    
    <span class="hljs-comment">/**
     * å®‰å…¨æ‰§è¡Œä»»åŠ¡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; CompletableFuture&lt;T&gt; <span class="hljs-title function_">safeSubmit</span><span class="hljs-params">(
            ExecutorService executor, 
            Callable&lt;T&gt; task)</span> {
        CompletableFuture&lt;T&gt; future = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CompletableFuture</span>&lt;&gt;();
        
        executor.submit(() -&gt; {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">T</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> task.call();
                future.complete(result);
            } <span class="hljs-keyword">catch</span> (Throwable t) {
                future.completeExceptionally(t);
                log.error(<span class="hljs-string">"ä»»åŠ¡æ‰§è¡Œå¤±è´¥"</span>, t);
            }
        });
        
        <span class="hljs-keyword">return</span> future;
    }
    
    <span class="hljs-comment">/**
     * ä¼˜é›…å…³é—­æ‰€æœ‰çº¿ç¨‹æ± 
     */</span>
    <span class="hljs-meta">@PreDestroy</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">shutdownAll</span><span class="hljs-params">()</span> {
        POOLS.forEach((name, pool) -&gt; {
            <span class="hljs-keyword">try</span> {
                pool.shutdown();
                <span class="hljs-keyword">if</span> (!pool.awaitTermination(<span class="hljs-number">60</span>, TimeUnit.SECONDS)) {
                    pool.shutdownNow();
                }
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                pool.shutdownNow();
                Thread.currentThread().interrupt();
            }
        });
    }
}
</code></pre>
<h3 data-id="heading-30">ä¹ã€è¿›é˜¶ï¼šè™šæ‹Ÿçº¿ç¨‹ï¼ˆJava 21+ï¼‰</h3>
<p>Java 21å¼•å…¥äº†è™šæ‹Ÿçº¿ç¨‹ï¼Œè¿™æ˜¯å¯¹çº¿ç¨‹æ¨¡å‹çš„é©å‘½æ€§æ”¹è¿›ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆ›å»ºè™šæ‹Ÿçº¿ç¨‹</span>
<span class="hljs-type">Thread</span> <span class="hljs-variable">virtualThread</span> <span class="hljs-operator">=</span> Thread.ofVirtual()
    .name(<span class="hljs-string">"virtual-thread-"</span>, <span class="hljs-number">0</span>)
    .start(() -&gt; {
        <span class="hljs-comment">// ä»»åŠ¡é€»è¾‘</span>
    });

<span class="hljs-comment">// ä½¿ç”¨è™šæ‹Ÿçº¿ç¨‹çš„ExecutorService</span>
<span class="hljs-type">ExecutorService</span> <span class="hljs-variable">virtualExecutor</span> <span class="hljs-operator">=</span> Executors.newVirtualThreadPerTaskExecutor();

<span class="hljs-comment">// æ€§èƒ½å¯¹æ¯”ï¼š10ä¸‡ä¸ªä»»åŠ¡</span>
<span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

<span class="hljs-comment">// ä¼ ç»Ÿçº¿ç¨‹æ± ï¼šå¯èƒ½åˆ›å»ºæ•°åƒä¸ªå¹³å°çº¿ç¨‹</span>
<span class="hljs-keyword">try</span> (<span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">200</span>)) {
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100_000</span>; i++) {
        executor.submit(() -&gt; {
            Thread.sleep(<span class="hljs-number">100</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-string">"done"</span>;
        });
    }
}

<span class="hljs-comment">// è™šæ‹Ÿçº¿ç¨‹ï¼šè½»æ¾å¤„ç†</span>
<span class="hljs-keyword">try</span> (<span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newVirtualThreadPerTaskExecutor()) {
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100_000</span>; i++) {
        executor.submit(() -&gt; {
            Thread.sleep(<span class="hljs-number">100</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-string">"done"</span>;
        });
    }
}
</code></pre>
<p>è™šæ‹Ÿçº¿ç¨‹çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>è½»é‡çº§</strong>ï¼šå†…å­˜å¼€é”€çº¦2KBï¼ˆå¹³å°çº¿ç¨‹çº¦1MBï¼‰</li>
<li><strong>é«˜å¹¶å‘</strong>ï¼šè½»æ¾æ”¯æŒæ•°ç™¾ä¸‡ä¸ªè™šæ‹Ÿçº¿ç¨‹</li>
<li><strong>å…¼å®¹æ€§</strong>ï¼šå®Œå…¨å…¼å®¹ç°æœ‰Thread API</li>
</ul>
<h3 data-id="heading-31">æ€»ç»“</h3>
<p>çº¿ç¨‹æ± æ˜¯Javaå¹¶å‘ç¼–ç¨‹çš„æ ¸å¿ƒç»„ä»¶ï¼Œæ­£ç¡®ä½¿ç”¨çº¿ç¨‹æ± éœ€è¦ï¼š</p>
<ol>
<li><strong>ç†è§£åŸç†</strong>ï¼šæŒæ¡ThreadPoolExecutorçš„å·¥ä½œæœºåˆ¶</li>
<li><strong>åˆç†é…ç½®</strong>ï¼šæ ¹æ®ä¸šåŠ¡åœºæ™¯é€‰æ‹©åˆé€‚çš„å‚æ•°</li>
<li><strong>ç›‘æ§é¢„è­¦</strong>ï¼šå»ºç«‹å®Œå–„çš„ç›‘æ§ä½“ç³»</li>
<li><strong>åŠ¨æ€è°ƒæ•´</strong>ï¼šæ ¹æ®è´Ÿè½½æƒ…å†µåŠ¨æ€è°ƒæ•´å‚æ•°</li>
<li><strong>ä¼˜é›…å¤„ç†</strong>ï¼šåšå¥½å¼‚å¸¸å¤„ç†å’Œä¼˜é›…å…³é—­</li>
</ol>
<p>è®°ä½ï¼šæ²¡æœ‰ä¸‡èƒ½çš„çº¿ç¨‹æ± é…ç½®ï¼Œåªæœ‰æœ€é€‚åˆä½ ä¸šåŠ¡åœºæ™¯çš„é…ç½®ã€‚é€šè¿‡ç›‘æ§ã€åˆ†æå’Œè°ƒæ•´ï¼Œä¸æ–­ä¼˜åŒ–ä½ çš„çº¿ç¨‹æ± é…ç½®ï¼Œæ‰èƒ½æ„å»ºå‡ºç¨³å®šé«˜æ•ˆçš„ç³»ç»Ÿã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ å…¨é¢æŒæ¡çº¿ç¨‹æ± ï¼å¦‚æœæœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿éšæ—¶è®¨è®ºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆä½ çš„ SELECT æœ‰æ—¶ä¼šé˜»å¡ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7592166340382064655</link>    <guid>https://juejin.cn/post/7592166340382064655</guid>    <pubDate>2026-01-07T08:49:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592166340382064655" data-draft-id="7592170171634614287" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆä½ çš„ SELECT æœ‰æ—¶ä¼šé˜»å¡ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯,æ•°æ®åº“"/> <meta itemprop="datePublished" content="2026-01-07T08:49:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é‚µä¼¯"/> <meta itemprop="url" content="https://juejin.cn/user/1160695730942141"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆä½ çš„ SELECT æœ‰æ—¶ä¼šé˜»å¡ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1160695730942141/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é‚µä¼¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T08:49:43.000Z" title="Wed Jan 07 2026 08:49:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¸Šç¯‡ã€Œ<a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">æ’å…¥æ„å‘é”</a>ã€æ—¶ä¸ºäº†äº§ç”Ÿé—´éš™é”ã€æ’å…¥æ„å‘é”æ—¶ä½¿ç”¨äº† 'SELECT . . . FOR UPDATE'ï¼Œ
ä½†ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼š<strong>ä¸ºä»€ä¹ˆæœ‰æ—¶å€™ä¸€ä¸ªæ™®é€šçš„ <code>SELECT</code> ä¸åŠ é”ï¼Œè€ŒåŠ ä¸Š <code>FOR UPDATE</code> å°±ä¼šé˜»å¡åˆ«äººï¼Ÿ</strong>
æˆ‘ä»¬å°±æ¥è¿›ä¸€æ­¥ç†è§£ï¼š<strong>å¿«ç…§è¯»ï¼ˆSnapshot Readï¼‰</strong> å’Œ <strong>å½“å‰è¯»ï¼ˆCurrent Readï¼‰</strong>ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€åŸºæœ¬æ¦‚å¿µï¼šMySQL çš„ä¸¤ç§â€œè¯»â€æ³•</h2>
<p>åœ¨ Mysql ä¸­ï¼Œ<strong>å¹¶éæ‰€æœ‰ <code>SELECT</code> éƒ½ä¸€æ ·</strong>ã€‚æ ¹æ®æ˜¯å¦åŠ é”ã€æ˜¯å¦è¯»æœ€æ–°æ•°æ®ï¼Œåˆ†ä¸ºä¸¤ç±»ï¼š</p>
<h3 data-id="heading-1">å¿«ç…§è¯»ï¼ˆSnapshot Readï¼‰</h3>
<ul>
<li><strong>å®šä¹‰</strong>ï¼šè¯»å–äº‹åŠ¡å¼€å§‹æ—¶ï¼ˆæˆ–è¯­å¥å¼€å§‹æ—¶ï¼‰çš„ä¸€è‡´æ€§è§†å›¾ï¼ˆRead Viewï¼‰ï¼Œ<strong>ä¸åŠ ä»»ä½•é”</strong>ã€‚</li>
<li><strong>å…¸å‹è¯­å¥</strong>ï¼š</li>
</ul>
<pre><code class="hljs language-sql" lang="sql">  <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1001</span>;
</code></pre>
<ul>
<li><strong>åº•å±‚æœºåˆ¶</strong>ï¼šåŸºäº <strong>MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰</strong>ï¼Œé€šè¿‡ undo log æ„å»ºå†å²ç‰ˆæœ¬ã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼š
<ul>
<li>è¯»ä¸é˜»å¡å†™ï¼Œå†™ä¸é˜»å¡è¯»ï¼›</li>
<li>åœ¨ RR éš”ç¦»çº§åˆ«ä¸‹ï¼Œæ•´ä¸ªäº‹åŠ¡çœ‹åˆ°åŒä¸€å¿«ç…§ï¼ˆå¯é‡å¤è¯»ï¼‰ï¼›</li>
<li>åœ¨ RC çº§åˆ«ä¸‹ï¼Œæ¯æ¬¡ SELECT éƒ½ç”Ÿæˆæ–°å¿«ç…§ï¼ˆä¸å¯é‡å¤è¯»ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-2">å½“å‰è¯»ï¼ˆCurrent Readï¼‰</h3>
<ul>
<li><strong>å®šä¹‰</strong>ï¼šè¯»å–æ•°æ®åº“ä¸­<strong>æœ€æ–°çš„ã€å·²æäº¤çš„æ•°æ®</strong>ï¼Œå¹¶<strong>åŠ é”</strong>ä»¥é˜²æ­¢å…¶ä»–äº‹åŠ¡ä¿®æ”¹ã€‚</li>
<li><strong>å…¸å‹è¯­å¥</strong>ï¼š</li>
</ul>
<pre><code class="hljs language-sql" lang="sql">  <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1001</span> <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">UPDATE</span>;        <span class="hljs-comment">-- æ’ä»–é”</span>
  <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1001</span> LOCK <span class="hljs-keyword">IN</span> SHARE MODE; <span class="hljs-comment">-- å…±äº«é”ï¼ˆMySQL 8.0+ å¯ç”¨ FOR SHAREï¼‰</span>
  <span class="hljs-keyword">UPDATE</span> orders <span class="hljs-keyword">SET</span> status <span class="hljs-operator">=</span> <span class="hljs-string">'paid'</span> <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">123</span>;
  <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">123</span>;
</code></pre>
<ul>
<li><strong>åº•å±‚æœºåˆ¶</strong>ï¼šç›´æ¥è®¿é—®èšç°‡ç´¢å¼•æˆ–äºŒçº§ç´¢å¼•çš„æœ€æ–°è®°å½•ï¼Œå¹¶æ ¹æ®éš”ç¦»çº§åˆ«åŠ  <strong>è®°å½•é” / é—´éš™é”(RR) / Next-Key Lock</strong>ã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼š
<ul>
<li>ä¼šé˜»å¡å…¶ä»–å†™æ“ä½œï¼ˆç”šè‡³è¯»æ“ä½œï¼Œå–å†³äºé”ç±»å‹ï¼‰</li>
<li>æ˜¯å®ç°â€œæ‚²è§‚é”â€å’Œé˜²æ­¢å¹¶å‘å†²çªçš„å…³é”®æ‰‹æ®µã€‚</li>
</ul>
</li>
</ul>
<hr/>
<blockquote>
<p><strong>å¿«ç…§è¯» = å®‰é™åœ°çœ‹å†å²ï¼›å½“å‰è¯» = å¤§å£°å®£å¸ƒâ€œæˆ‘è¦æ”¹è¿™é‡Œï¼Œè¯·åˆ«åŠ¨ï¼â€</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-3">äºŒã€ä½¿ç”¨åœºæ™¯ï¼šä»€ä¹ˆæ—¶å€™è¯¥ç”¨å“ªç§è¯»ï¼Ÿ</h2>
<h3 data-id="heading-4">åœºæ™¯ 1ï¼šåªè¯»æŸ¥è¯¢ â†’ ç”¨å¿«ç…§è¯»</h3>
<ul>
<li>ç”¨æˆ·æŸ¥çœ‹è®¢å•åˆ—è¡¨ã€å•†å“è¯¦æƒ…ç­‰ï¼›</li>
<li>å¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚ä¸é«˜ï¼Œæˆ–èƒ½æ¥å—â€œç¨æ—§â€æ•°æ®ï¼›</li>
<li><strong>ä¼˜åŠ¿</strong>ï¼šé›¶é”å¼€é”€ï¼Œé«˜å¹¶å‘æ— å‹åŠ›ã€‚</li>
</ul>
<h3 data-id="heading-5">åœºæ™¯ 2ï¼šå…ˆæŸ¥åæ”¹ï¼ˆCheck-Then-Actï¼‰â†’ å¿…é¡»ç”¨å½“å‰è¯»ï¼</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼ªä»£ç ï¼šé”™è¯¯ç¤ºèŒƒï¼ˆå¿«ç…§è¯»ï¼‰</span>
<span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> select(<span class="hljs-string">"SELECT * FROM orders WHERE id = 123"</span>); <span class="hljs-comment">// å¿«ç…§è¯»</span>
<span class="hljs-keyword">if</span> (order.status == <span class="hljs-string">"unpaid"</span>) {
    update(<span class="hljs-string">"UPDATE orders SET status = 'paid' WHERE id = 123"</span>);
}
</code></pre>
<p>â†’ <strong>é—®é¢˜</strong>ï¼šä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œï¼Œéƒ½çœ‹åˆ° <code>status=unpaid</code>ï¼Œå¯¼è‡´é‡å¤æ”¯ä»˜ï¼</p>
<p>æ­£ç¡®åšæ³•ï¼ˆå½“å‰è¯»ï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åŠ é”è¯»å–æœ€æ–°çŠ¶æ€ï¼ˆä»…ç”¨æ¥ä½“ç°å½“å‰è¯»çš„ä½œç”¨ï¼Œé«˜å¹¶å‘åœºæ™¯ä¸‹ä¸å»ºè®®ä½¿ç”¨ FOR UPDATEï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">123</span> <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">UPDATE</span>;
<span class="hljs-comment">-- å†åˆ¤æ–­å¹¶æ›´æ–°</span>
</code></pre>
<h3 data-id="heading-6">åœºæ™¯ 3ï¼šé˜²æ­¢å¹»è¯»ï¼ˆRR çº§åˆ«ä¸‹ï¼‰</h3>
<ul>
<li>ä¸šåŠ¡è¦æ±‚â€œèŒƒå›´å†…ä¸èƒ½æœ‰æ–°æ•°æ®æ’å…¥â€ï¼Œå¦‚åº“å­˜æ‰£å‡ã€å”¯ä¸€ç¼–å·ç”Ÿæˆï¼›</li>
<li>å¿…é¡»ç”¨ <code>SELECT ... FOR UPDATE</code> è§¦å‘ <strong>Next-Key Lockï¼ˆè®°å½• + é—´éš™é”ï¼‰</strong>ï¼›</li>
<li>å¦åˆ™å³ä½¿å¿«ç…§è¯»çœ‹ä¸åˆ°æ–°æ•°æ®ï¼Œåˆ«äººä»å¯æ’å…¥ï¼Œç ´åä¸šåŠ¡é€»è¾‘ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-7">ä¸‰ã€é¿å‘æŒ‡å—</h2>
<h3 data-id="heading-8">é—®é¢˜ 1ï¼š<code>FOR UPDATE</code> å¯¼è‡´å¤§é‡é˜»å¡ç”šè‡³æ­»é”</h3>
<ul>
<li><strong>åŸå› </strong>ï¼šèŒƒå›´æŸ¥è¯¢æœªèµ°ç´¢å¼•ï¼ŒInnoDB åœ¨ RR ä¸‹å¯¹ä¸»é”®å…¨è¡¨åŠ é—´éš™é”ï¼›</li>
<li><strong>æ¡ˆä¾‹</strong>ï¼š</li>
</ul>
<pre><code class="hljs language-sql" lang="sql">  <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders <span class="hljs-keyword">WHERE</span> create_time <span class="hljs-operator">&gt;</span> <span class="hljs-string">'2024-01-01'</span> <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">UPDATE</span>; <span class="hljs-comment">-- create_time æ— ç´¢å¼•</span>
</code></pre>
<p>â†’ é”ä½æ•´ä¸ªè¡¨ï¼Œæ‰€æœ‰ INSERT è¢«é˜»å¡ï¼
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>ç¡®ä¿ <code>WHERE</code> æ¡ä»¶å‘½ä¸­ç´¢å¼•ï¼›</li>
<li>é«˜å¹¶å‘åœºæ™¯è€ƒè™‘é™çº§åˆ° <strong>READ COMMITTED</strong>ï¼ˆåªåŠ è®°å½•é”ï¼Œä¸åŠ é—´éš™é”ï¼‰ï¼›</li>
<li>é¿å…å¤§èŒƒå›´æ‰«æï¼Œæ”¹ç”¨åˆ†é¡µæˆ–ç­‰å€¼æŸ¥è¯¢ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-9">é—®é¢˜ 2ï¼šå¿«ç…§è¯» + å½“å‰è¯»æ··åˆï¼Œè¯¯åˆ¤â€œå¹»è¯»â€</h3>
<ul>
<li><strong>ç°è±¡</strong>ï¼š</li>
</ul>
<pre><code class="hljs language-SQL" lang="SQL">  <span class="hljs-comment">-- äº‹åŠ¡å†…</span>
  <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> t <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">&gt;</span> <span class="hljs-number">10</span>;               <span class="hljs-comment">-- å¿«ç…§è¯»ï¼Œè¿”å› 0</span>
  <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> t <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">&gt;</span> <span class="hljs-number">10</span> <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">UPDATE</span>;   <span class="hljs-comment">-- å½“å‰è¯»ï¼Œè¿”å› 1ï¼</span>
</code></pre>
<ul>
<li><strong>è¯¯è§£</strong>ï¼šâ€œRR ä¸‹æ€ä¹ˆè¿˜æœ‰å¹»è¯»ï¼Ÿâ€</li>
<li><strong>çœŸç›¸</strong>ï¼šè¿™ä¸æ˜¯å¹»è¯»ï¼å¿«ç…§è¯»çœ‹å†å²ï¼Œå½“å‰è¯»çœ‹ç°åœ¨ï¼Œä¸¤è€…æœ¬å°±ä¸è¯¥ä¸€è‡´ã€‚</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>ç»Ÿä¸€è¯»å–æ¨¡å¼ï¼šè¦ä¹ˆå…¨ç”¨å¿«ç…§è¯»ï¼ˆæ¥å—åªè¯»ä¸€è‡´æ€§ï¼‰ï¼Œè¦ä¹ˆå…³é”®è·¯å¾„å…¨ç”¨å½“å‰è¯»ï¼›</li>
<li>ä¸è¦ç”¨å¿«ç…§è¯»åšä¸šåŠ¡åˆ¤æ–­åå†ç”¨å½“å‰è¯»æ›´æ–°ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-10">é—®é¢˜ 3ï¼šRC çº§åˆ«ä¸‹ <code>FOR UPDATE</code> æ— æ³•é˜²æ­¢å¹»è¯»</h3>
<ul>
<li><strong>ç°è±¡</strong>ï¼šåœ¨ RC ä¸‹ï¼Œå³ä½¿ç”¨äº† <code>FOR UPDATE</code>ï¼Œåˆ«äººä»å¯æ’å…¥æ–°æ•°æ®ï¼›</li>
<li><strong>åŸå› </strong>ï¼šRC ä¸ä½¿ç”¨é—´éš™é”ï¼Œåªé”å·²æœ‰è®°å½•ï¼›</li>
<li><strong>å½±å“</strong>ï¼šå¦‚â€œæŸ¥æ— æ­¤ç”¨æˆ· â†’ æ’å…¥â€å¯èƒ½å¤±è´¥ï¼ˆå”¯ä¸€é”®å†²çªï¼‰ã€‚</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>ä¾èµ– <strong>æ•°æ®åº“å”¯ä¸€ç´¢å¼•</strong> ä½œä¸ºæœ€ç»ˆå…œåº•ï¼›</li>
<li>åº”ç”¨å±‚åšå¥½å¼‚å¸¸æ•è·ä¸é‡è¯•ï¼ˆå¦‚æ•è· <code>Duplicate entry</code>ï¼‰ï¼›</li>
<li>æ ¸å¿ƒé“¾è·¯è‹¥éœ€å¼ºä¸€è‡´æ€§ï¼Œä¿ç•™ RR + ç²¾å‡†åŠ é”ã€‚</li>
</ul>
<hr/>
<p>å¿«ç…§è¯»å’Œå½“å‰è¯»ï¼Œæ˜¯ InnoDB å®ç°é«˜æ€§èƒ½ä¸ä¸€è‡´æ€§å¹³è¡¡çš„åŒç¿¼ã€‚</p>
<ul>
<li><strong>å¿«ç…§è¯»</strong> è®©è¯»æ“ä½œå¦‚ä¸èˆ¬é¡ºæ»‘ï¼›</li>
<li><strong>å½“å‰è¯»</strong> ä¸ºå†™æ“ä½œç­‘èµ·å®‰å…¨é˜²çº¿ã€‚</li>
</ul>
<p>ä½†åœ¨å®é™…å¼€å‘ä¸­ï¼Œ<strong>æœ€å¤§çš„é£é™©ä¸æ˜¯æŠ€æœ¯æœ¬èº«ï¼Œè€Œæ˜¯â€œä¸çŸ¥é“è‡ªå·±åœ¨ç”¨å“ªç§è¯»â€</strong>ã€‚</p>
<p>ä¸‹æ¬¡å½“ä½ å†™ä¸‹ <code>SELECT</code> æ—¶ï¼Œä¸å¦¨å¤šæƒ³ä¸€æ­¥ <strong>â€œæˆ‘éœ€è¦çš„æ˜¯å†å²å¿«ç…§ï¼Œè¿˜æ˜¯æ­¤åˆ»çš„çœŸå®ï¼Ÿâ€</strong></p>
<hr/>
<blockquote>
<p>ğŸ’¡ <strong>æ„Ÿè°¢ä½ çœ‹å®Œè¿™ç¯‡å†…å®¹ï¼Œè¿™æ˜¯æˆ‘è‡ªå·±åœ¨å·¥ä½œå­¦ä¹ ä¸­é‡åˆ°çš„caseï¼Œåšä¸€äº›ç®€å•çš„ç ”ç©¶ï¼Œå¹¶æ€»ç»“ç»éªŒï¼Œå¦‚æœ‰é—æ¼æˆ–ä¸åˆç†çš„åœ°æ–¹ï¼Œæ¬¢è¿ä½ æå‡ºé—®é¢˜ï¼Œè®©æˆ‘ä»¬ä¸€èµ·æ¢ç´¢</strong>ã€‚</p>
</blockquote>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[èŠèŠé‚£ä¸ªè®© React æ–°æ‰‹æŠ“ç‹‚çš„â€œé—­åŒ…é™·é˜±â€ï¼šCount ä¸ºä»€ä¹ˆæ°¸è¿œæ˜¯ 0ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7592340733954162738</link>    <guid>https://juejin.cn/post/7592340733954162738</guid>    <pubDate>2026-01-07T08:48:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592340733954162738" data-draft-id="7592340733954113586" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="èŠèŠé‚£ä¸ªè®© React æ–°æ‰‹æŠ“ç‹‚çš„â€œé—­åŒ…é™·é˜±â€ï¼šCount ä¸ºä»€ä¹ˆæ°¸è¿œæ˜¯ 0ï¼Ÿ"/> <meta itemprop="keywords" content="React.js"/> <meta itemprop="datePublished" content="2026-01-07T08:48:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç™½å…°åœ°ç©ºç“¶"/> <meta itemprop="url" content="https://juejin.cn/user/191753514127514"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            èŠèŠé‚£ä¸ªè®© React æ–°æ‰‹æŠ“ç‹‚çš„â€œé—­åŒ…é™·é˜±â€ï¼šCount ä¸ºä»€ä¹ˆæ°¸è¿œæ˜¯ 0ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/191753514127514/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç™½å…°åœ°ç©ºç“¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T08:48:20.000Z" title="Wed Jan 07 2026 08:48:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å†™ React Hooks çš„æ—¶å€™ï¼Œä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™ç§â€œçµå¼‚äº‹ä»¶â€ï¼š</p>
<p>æ˜æ˜å¤©åœ¨è¿™ä¸ªç»„ä»¶é‡Œ <code>setCount</code> å·²ç»åŠ åˆ°é£èµ·äº†ï¼Œç•Œé¢ä¸Šçš„æ•°å­—ä¹Ÿåœ¨è·³åŠ¨ï¼Œä½†æ˜¯ <code>setInterval</code> æˆ–è€…æ˜¯ <code>useEffect</code> é‡Œçš„ console.log æ‰“å°å‡ºæ¥çš„ï¼Œå´æ°¸è¿œæ˜¯åˆå§‹å€¼ <code>0</code>ï¼Ÿ</p>
<p>è¿™æ—¶å€™ä½ ä¼šæ€€ç–‘äººç”Ÿï¼šâ€œæ˜¯æˆ‘çœ¼èŠ±äº†ï¼Œè¿˜æ˜¯ React åäº†ï¼Ÿâ€</p>
<p>å…¶å® React æ²¡åï¼Œä½ åªæ˜¯æ‰è¿›äº†**â€œé—­åŒ…é™·é˜±â€ (Stale Closure)**ã€‚ä»Šå¤©å’±ä»¬å°±å€Ÿä¸€æ®µç®€å•çš„ä»£ç ï¼Œæ‰’ä¸€æ‰’è¿™ä¸ªå‘çš„åº•è£¤ï¼Œé¡ºä¾¿çœ‹çœ‹æ€ä¹ˆä¼˜é›…åœ°çˆ¬å‡ºæ¥ã€‚</p>
<h2 data-id="heading-0">æ¡ˆå‘ç°åœºï¼šè¯¡å¼‚çš„â€œæ—¶é—´å†»ç»“â€</h2>
<p>è®©æˆ‘ä»¬å…ˆçœ‹çœ‹è¿™æ®µç»å…¸çš„â€œå—å®³è€…â€ä»£ç ã€‚è¿™æ˜¯å¾ˆå¤šåŒå­¦ï¼ˆåŒ…æ‹¬åˆšå¼€å§‹å†™ Hooks çš„æˆ‘ï¼‰éƒ½ä¼šå†™å‡ºçš„é€»è¾‘ï¼š</p>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useEffect, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

  <span class="hljs-comment">// âŒ è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„é—­åŒ…é™·é˜±ç°åœº</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// è¿™é‡Œçš„ count æ°¸è¿œæ˜¯ 0ï¼Œä»¿ä½›æ—¶é—´è¢«å†»ç»“äº†</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Current count:'</span>, count); 
    }, <span class="hljs-number">1000</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(timer);
  }, []); <span class="hljs-comment">// ğŸ‘ˆ ç½ªé­ç¥¸é¦–åœ¨è¿™é‡Œï¼šç©ºä¾èµ–æ•°ç»„</span>

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{count}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)}&gt;count + 1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-1">ç°è±¡æè¿°</h3>
<p>å½“ä½ è¿è¡Œè¿™æ®µä»£ç ï¼Œç‚¹å‡»æŒ‰é’®è®© <code>count</code> å¢åŠ æ—¶ï¼š</p>
<ol>
<li><strong>ç•Œé¢ï¼ˆUIï¼‰</strong> ï¼šæ˜¾ç¤º <code>1, 2, 3...</code> ï¼ˆæ­£å¸¸æ›´æ–°ï¼Œè¯´æ˜ State ç¡®å®å˜äº†ï¼‰ã€‚</li>
<li><strong>æ§åˆ¶å°ï¼ˆConsoleï¼‰</strong> ï¼š<code>Current count: 0</code> ... <code>Current count: 0</code> ... ï¼ˆåƒå¤è¯»æœºä¸€æ ·ï¼‰ã€‚</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8787fa35fdb0442595788b6adc9c1aba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m95YWw5Zyw56m655O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380500&amp;x-signature=2HcvO1aNigeoTCwI%2BESR24eYbuI%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ</h2>
<p>è¦ç†è§£è¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆè¦ä¿®æ­£ä¸€ä¸ªå¿ƒæ™ºæ¨¡å‹ï¼š<strong>æ¯ä¸€æ¬¡æ¸²æŸ“ï¼ˆRenderï¼‰ï¼Œéƒ½æ˜¯ä¸€æ¬¡ç‹¬ç«‹çš„â€œå¿«ç…§â€ã€‚</strong></p>
<ol>
<li>
<p><strong>ç¬¬ä¸€æ¬¡æ¸²æŸ“ (Mount)</strong> ï¼š</p>
<ul>
<li>React åˆ›å»ºäº†ç»„ä»¶ï¼Œæ­¤æ—¶ <code>count = 0</code>ã€‚</li>
<li><code>useEffect</code> æ‰§è¡Œã€‚å› ä¸ºå®ƒä¾èµ–æ˜¯ <code>[]</code>ï¼Œæ‰€ä»¥å®ƒ<strong>åªåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶æ‰§è¡Œ</strong>ã€‚</li>
<li><code>setInterval</code> è¢«åˆ›å»ºã€‚<strong>å…³é”®ç‚¹æ¥äº†ï¼š</strong> è¿™ä¸ªå®šæ—¶å™¨çš„å›è°ƒå‡½æ•°æ˜¯åœ¨ <code>count</code> ä¸º <code>0</code> çš„é‚£ä¸ªé—­åŒ…ä½œç”¨åŸŸé‡Œå®šä¹‰çš„ã€‚å®ƒæ•è·äº†é‚£ä¸€åˆ»çš„ <code>count</code>ï¼ˆä¹Ÿå°±æ˜¯ 0ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç¬¬äºŒæ¬¡æ¸²æŸ“ (ç‚¹å‡»æŒ‰é’®å)</strong> ï¼š</p>
<ul>
<li>React å†æ¬¡æ‰§è¡Œç»„ä»¶å‡½æ•°ï¼Œ<code>count</code> å˜æˆäº† <code>1</code>ã€‚</li>
<li><strong>ä½†æ˜¯ï¼</strong> <code>useEffect</code> çš„ä¾èµ–æ•°ç»„æ˜¯ç©ºçš„ï¼ŒReact è®¤ä¸ºâ€œæ²¡å¿…è¦é‡æ–°è¿è¡Œè¿™ä¸ª Effectâ€ã€‚</li>
<li>äºæ˜¯ï¼Œé‚£ä¸ª<strong>æ—§çš„</strong>å®šæ—¶å™¨ï¼ˆMount æ—¶åˆ›å»ºçš„ï¼‰ä¾ç„¶åœ¨åšå¼ºåœ°æ´»ç€ã€‚å®ƒæ‰‹é‡Œç´§ç´§æ”¥ç€çš„ï¼Œä¾ç„¶æ˜¯ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶çš„æ—§å˜é‡ <code>0</code>ã€‚</li>
</ul>
</li>
</ol>
<p><strong>ç®€å•æ¥è¯´ï¼šä½ çš„ç»„ä»¶ UI å·²ç»æ´»åœ¨ 2026 å¹´äº†ï¼Œä½†é‚£ä¸ªå®šæ—¶å™¨è¿˜æ´»åœ¨ 2023 å¹´ï¼Œå®ƒæ ¹æœ¬ä¸çŸ¥é“å¤–é¢çš„ä¸–ç•Œå˜äº†ã€‚è¿™å°±æ˜¯ JS è¯æ³•ä½œç”¨åŸŸä¸ React Hooks æœºåˆ¶ç¢°æ’å‡ºçš„â€œç«èŠ±â€ã€‚</strong></p>
<hr/>
<h2 data-id="heading-3">æ€ä¹ˆçˆ¬å‡ºé™·é˜±ï¼Ÿ</h2>
<p>æ—¢ç„¶çŸ¥é“äº†æ˜¯å› ä¸ºâ€œå¼•ç”¨äº†æ—§å˜é‡â€ï¼Œé‚£æƒ³è¦å®ç°å¦‚ä¸‹å›¾ç‰‡æ•ˆæœï¼Œæ€è·¯å°±å¾ˆæ¸…æ™°äº†ï¼š<strong>è¦ä¹ˆè®© Effect é‡æ–°æ‰§è¡Œï¼Œè¦ä¹ˆç”¨æŸç§æ–¹å¼ç©¿é€é—­åŒ…ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/751012036d0f41d1bc7915dc62a74560~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m95YWw5Zyw56m655O2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380500&amp;x-signature=PblHcTKo%2BqkdwP%2F4iFhuHJlF9%2Bs%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-4">æ–¹æ³•ä¸€ï¼šè¯šå®åœ°å‘Šè¯‰ React ä½ çš„ä¾èµ–ï¼ˆå®˜æ–¹æ¨èï¼‰</h3>
<p>è¿™å°±æ˜¯ä¿®å¤åçš„ä»£ç é€»è¾‘ï¼Œä¹Ÿæ˜¯æœ€ç¬¦åˆ React æ•°æ®æµç›´è§‰çš„å†™æ³•ï¼š</p>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// âœ… æ­¤æ—¶èƒ½è¯»åˆ°æœ€æ–°çš„ count</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Current count:'</span>, count);
  }, <span class="hljs-number">1000</span>);

  <span class="hljs-comment">// æ¯æ¬¡ effect é‡æ–°æ‰§è¡Œä¹‹å‰ éƒ½ä¼šæ‰§è¡Œä¸Šä¸€æ¬¡çš„æ¸…ç†å‡½æ•°</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(timer);
}, [count]); <span class="hljs-comment">// ğŸ‘ˆ æŠŠ count åŠ å…¥ä¾èµ–æ•°ç»„</span>
</code></pre>
<p><strong>åŸç†åˆ†æï¼š</strong> ä¸€æ—¦æŠŠ <code>[count]</code> åŠ å…¥ä¾èµ–æ•°ç»„ï¼Œé€»è¾‘å°±å˜äº†ï¼š</p>
<ol>
<li><code>count</code> å˜äº† -&gt; <code>useEffect</code> å‘ç°ä¾èµ–å˜äº†ã€‚</li>
<li>React å…ˆæ‰§è¡Œ <code>cleanup</code> å‡½æ•°ï¼ˆ<code>clearInterval</code>ï¼‰ï¼Œæ€æ‰æ—§çš„å®šæ—¶å™¨ã€‚</li>
<li>React æ‰§è¡Œæ–°çš„ <code>useEffect</code>ï¼Œåˆ›å»ºä¸€ä¸ª<strong>æ–°</strong>çš„å®šæ—¶å™¨ã€‚</li>
<li>è¿™ä¸ª<strong>æ–°</strong>å®šæ—¶å™¨æ˜¯åœ¨å½“å‰æ¸²æŸ“é—­åŒ…é‡Œåˆ›å»ºçš„ï¼Œæ‰€ä»¥å®ƒæ•è·çš„æ˜¯<strong>æœ€æ–°</strong>çš„ <code>count</code>ã€‚</li>
</ol>
<p><strong>æ½œåœ¨é—®é¢˜ï¼š</strong> è™½ç„¶ Bug ä¿®å¥½äº†ï¼Œä½†å¸¦æ¥äº†<strong>æ€§èƒ½æŠ–åŠ¨</strong>ã€‚å¦‚æœ <code>count</code> å˜åŒ–å¾ˆå¿«ï¼ˆæ¯”å¦‚åŠ¨ç”»ï¼‰ï¼Œå®šæ—¶å™¨ä¼šè¢«é¢‘ç¹åœ° <code>åˆ›å»º -&gt; é”€æ¯ -&gt; åˆ›å»º</code>ã€‚å¦‚æœå®šæ—¶å™¨é—´éš”å¾ˆçŸ­ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´è®¡æ—¶ä¸å‡†ã€‚</p>
<hr/>
<h3 data-id="heading-5">æ–¹æ³•äºŒï¼šå‡½æ•°å¼æ›´æ–°</h3>
<p>å¦‚æœä½ åªæ˜¯æƒ³è®© <code>count</code> åŠ  1ï¼Œè€Œä¸å…³å¿ƒåœ¨ <code>setInterval</code> é‡Œæ‰“å°æ—¥å¿—ï¼Œå¯ä»¥ç”¨å‡½æ•°å¼æ›´æ–°ï¼š</p>
<p>JavaScript</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">useEffect</span>(() =&gt; {
  const timer = <span class="hljs-built_in">setInterval</span>(() =&gt; {
    <span class="hljs-comment">// âœ… prev æ°¸è¿œæ˜¯ React å†…éƒ¨æ‹¿åˆ°çš„æœ€æ–°çŠ¶æ€ï¼Œä¸éœ€è¦ä¾èµ– count</span>
    <span class="hljs-built_in">setCount</span>(prev =&gt; prev + <span class="hljs-number">1</span>); 
  }, <span class="hljs-number">1000</span>);
  return () =&gt; <span class="hljs-built_in">clearInterval</span>(timer);
}, <span class="hljs-selector-attr">[]</span>); 
</code></pre>
<p>è¿™èƒ½è§£å†³ UI æ›´æ–°é—®é¢˜ï¼Œä½†è§£å†³ä¸äº†â€œåœ¨å®šæ—¶å™¨é‡Œè·å–æœ€æ–°å€¼æ‰“å°â€çš„é—®é¢˜ã€‚</p>
<hr/>
<h3 data-id="heading-6">æ–¹æ³•ä¸‰ï¼šç»ˆæå¤§æ³• useRef</h3>
<p>å¦‚æœä½ æ—¢ä¸æƒ³è®©å®šæ—¶å™¨é¢‘ç¹é‡å¯ï¼ˆä¿æŒä¾èµ–ä¸º <code>[]</code>ï¼‰ï¼Œåˆæƒ³åœ¨å›è°ƒé‡Œæ‹¿åˆ°æœ€æ–°çš„å€¼ï¼Œ<code>useRef</code> æ˜¯æœ€ä½³é€‰æ‹©ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong> å› ä¸º <code>useRef</code> è¿”å›çš„ <code>ref</code> å¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒ<strong>å¼•ç”¨ä¸å˜</strong>ï¼Œä½†å®ƒçš„ <code>.current</code> å±æ€§æ˜¯<strong>å¯å˜</strong>çš„ã€‚è¿™å°±åƒä¸€ä¸ªæŒ‚åœ¨å¢™ä¸Šçš„ç™½æ¿ï¼Œæ— è®ºæˆ¿é—´ï¼ˆé—­åŒ…ï¼‰æ€ä¹ˆæ¢ï¼Œç™½æ¿è¿˜æ˜¯é‚£ä¸€å—ï¼Œä¸Šé¢çš„å­—éšæ—¶èƒ½æ”¹ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ª ref</span>
const countRef = <span class="hljs-built_in">useRef</span>(count);

<span class="hljs-comment">// 2. æ¯æ¬¡æ¸²æŸ“éƒ½æŠŠæœ€æ–°çš„ count å†™å…¥ ref</span>
<span class="hljs-comment">// è¿™ä¸€æ­¥ç¡®ä¿ ref.current æ°¸è¿œæ˜¯æœ€æ–°çš„</span>
countRef<span class="hljs-selector-class">.current</span> = count; 

<span class="hljs-built_in">useEffect</span>(() =&gt; {
  const timer = <span class="hljs-built_in">setInterval</span>(() =&gt; {
    <span class="hljs-comment">// 3. âœ… æ°¸è¿œè¯»å– ref é‡Œçš„æœ€æ–°å€¼</span>
    <span class="hljs-comment">// è¿™é‡Œçš„é—­åŒ…å¼•ç”¨çš„æ˜¯ countRef å¯¹è±¡æœ¬èº«ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯æ°¸è¿œä¸å˜çš„</span>
    console<span class="hljs-selector-class">.log</span>('Current count:', countRef.current);
  }, <span class="hljs-number">1000</span>);

  return () =&gt; <span class="hljs-built_in">clearInterval</span>(timer);
}, <span class="hljs-selector-attr">[]</span>); <span class="hljs-comment">// ğŸ‘ˆ ä¾èµ–ä¾ç„¶æ˜¯ç©ºï¼Œå®šæ—¶å™¨ç¨³å¦‚æ³°å±±ï¼Œä¸ä¼šé‡å¯ï¼</span>
</code></pre>
<p>è¿™ä¹Ÿæ˜¯çŸ¥å Hooks åº“ <code>ahooks</code> ä¸­ <code>useInterval</code> çš„æ ¸å¿ƒå®ç°åŸç†ã€‚</p>
<hr/>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p>React é—­åŒ…é™·é˜±æœ¬è´¨ä¸Šæ˜¯ <strong>JavaScript é—­åŒ…æœºåˆ¶</strong> ä¸ <strong>React å£°æ˜å¼ç¼–ç¨‹</strong> ä¹‹é—´çš„ä¸€ç§â€œæ²Ÿé€šè¯¯ä¼šâ€ã€‚</p>
<ul>
<li><strong>é™·é˜±æˆå› </strong>ï¼š<code>useEffect</code>ã€<code>useCallback</code> ç­‰ Hooks çš„ä¾èµ–æ•°ç»„å†™å°‘äº†ï¼Œå¯¼è‡´å†…éƒ¨å‡½æ•°å¼•ç”¨äº†æ—§çš„æ¸²æŸ“é—­åŒ…ä¸­çš„å˜é‡ã€‚</li>
<li><strong>åŸºç¡€è§£æ³•</strong>ï¼šè¡¥å…¨ä¾èµ–æ•°ç»„ï¼ˆä½†è¦æ³¨æ„å‰¯ä½œç”¨çš„é¢‘ç¹æ‰§è¡Œï¼‰ã€‚</li>
<li><strong>è¿›é˜¶è§£æ³•</strong>ï¼šä½¿ç”¨ <code>useRef</code> ä½œä¸ºâ€œé€ƒç”Ÿèˆ±â€ï¼Œåœ¨ä¸é‡å¯ Effect çš„æƒ…å†µä¸‹ï¼Œé€è¿‡é—­åŒ…è¯»å–æœ€æ–°çŠ¶æ€ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutterè‡ªå®šä¹‰ç»„ä»¶ï¼š ä¸ºæ¨ªå‘åˆ—è¡¨è‡ªå®šä¹‰â€œè¿›åº¦æ¡â€å¼æ»šåŠ¨æŒ‡ç¤ºå™¨]]></title>    <link>https://juejin.cn/post/7592276645361319936</link>    <guid>https://juejin.cn/post/7592276645361319936</guid>    <pubDate>2026-01-07T08:51:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592276645361319936" data-draft-id="7592152007840399360" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutterè‡ªå®šä¹‰ç»„ä»¶ï¼š ä¸ºæ¨ªå‘åˆ—è¡¨è‡ªå®šä¹‰â€œè¿›åº¦æ¡â€å¼æ»šåŠ¨æŒ‡ç¤ºå™¨"/> <meta itemprop="keywords" content="Flutter,Dart,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-07T08:51:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å„¿æ­Œå…«ä¸‡é¦–"/> <meta itemprop="url" content="https://juejin.cn/user/3034307822894333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutterè‡ªå®šä¹‰ç»„ä»¶ï¼š ä¸ºæ¨ªå‘åˆ—è¡¨è‡ªå®šä¹‰â€œè¿›åº¦æ¡â€å¼æ»šåŠ¨æŒ‡ç¤ºå™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3034307822894333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å„¿æ­Œå…«ä¸‡é¦–
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T08:51:15.000Z" title="Wed Jan 07 2026 08:51:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Â ä¹‹å‰å†™è¿‡ä¸€ç¯‡<a href="https://juejin.cn/post/7585751355593834515" target="_blank" title="https://juejin.cn/post/7585751355593834515">Android è‡ªå®šä¹‰ View å®æˆ˜ï¼šæ‰“é€ ä¸€ä¸ªè·Ÿéšæ»‘åŠ¨çš„ä¸æ»‘æŒ‡ç¤ºå™¨</a>ï¼Œä»Šå¤©ä½¿ç”¨ Flutter æ¥å®ç°ä¸€ä¸ªç›¸åŒçš„æ•ˆæœã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3138c3892d394de2a9a69ad84ee48b1b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YS_5q2M5YWr5LiH6aaW:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380675&amp;x-signature=3k%2FFEcZ2E9h4wRWEBiWYTifknX8%3D" alt="image.png" loading="lazy"/></p>
<p>æœ¬æ–‡å°†å®ç°ä¸€ä¸ªæ ¹æ®åˆ—è¡¨æ»šåŠ¨åŠ¨æ€åç§»çš„è‡ªå®šä¹‰æŒ‡ç¤ºå™¨ã€‚</p>
<h2 data-id="heading-0">1. æ ¸å¿ƒåŸç†</h2>
<p>å®ç°è¿™ä¸ªæ•ˆæœçš„å…³é”®åœ¨äºï¼š<strong>ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œå¹¶è®¡ç®—æ»šåŠ¨æ¯”ä¾‹ã€‚</strong></p>
<ol>
<li><strong>ç›‘å¬æ»šåŠ¨</strong>ï¼šä½¿ç”¨ <code>NotificationListener&lt;ScrollNotification&gt;</code> æ•æ‰æ»šåŠ¨è¿›åº¦ã€‚</li>
<li><strong>è®¡ç®—æ¯”ä¾‹</strong>ï¼š<code>æ»šåŠ¨æ¯”ä¾‹ = å½“å‰æ»šåŠ¨åç§»é‡ / æœ€å¤§å¯æ»šåŠ¨è·ç¦»</code>ã€‚</li>
<li><strong>è”åŠ¨æŒ‡ç¤ºå™¨</strong>ï¼šæ ¹æ®æ¯”ä¾‹è®¡ç®—æŒ‡ç¤ºå™¨â€œæ»‘å—â€çš„ä½ç§»ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-1">2. å‡†å¤‡å·¥ä½œ</h2>
<p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªåŸºæœ¬çš„æ¨ªå‘åˆ—è¡¨ç»“æ„ã€‚è¿™é‡Œå»ºè®®ä½¿ç”¨ <code>SingleChildScrollView</code> é…åˆ <code>ScrollController</code>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">final</span> ScrollController _scrollController = ScrollController();
double _progress = <span class="hljs-number">0.0</span>; <span class="hljs-comment">// å­˜å‚¨æ»šåŠ¨æ¯”ä¾‹ (0.0 ~ 1.0)</span>
</code></pre>
<h2 data-id="heading-2">3. å®ç°æ­¥éª¤</h2>
<h3 data-id="heading-3">ç¬¬ä¸€æ­¥ï¼šæ„å»ºæ¨ªå‘åˆ—è¡¨</h3>
<p>æˆ‘ä»¬ä½¿ç”¨ <code>NotificationListener</code> åŒ…è£¹æ»šåŠ¨è§†å›¾ï¼Œåœ¨ <code>onNotification</code> å›è°ƒä¸­è®¡ç®—è¿›åº¦ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">NotificationListener&lt;ScrollNotification&gt;(
  onNotification: (ScrollNotification notification) {
    <span class="hljs-comment">// åªæœ‰åœ¨æ»šåŠ¨æ—¶æ‰æ›´æ–°è¿›åº¦</span>
    <span class="hljs-keyword">if</span> (notification <span class="hljs-keyword">is</span> ScrollUpdateNotification) {
      setState(() {
        <span class="hljs-comment">// è®¡ç®—æ»šåŠ¨æ¯”ä¾‹ï¼šå½“å‰ä½ç½® / æœ€å¤§æ»šåŠ¨èŒƒå›´</span>
        _progress = _scrollController.offset / _scrollController.position.maxScrollExtent;
        <span class="hljs-comment">// ç¡®ä¿è¿›åº¦åœ¨ 0~1 ä¹‹é—´</span>
        _progress = _progress.clamp(<span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>);
      });
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  },
  child: SingleChildScrollView(
    controller: _scrollController,
    scrollDirection: Axis.horizontal,
    child: Row(
      children: List.generate(<span class="hljs-number">10</span>, (index) =&gt; _buildItem(index)),
    ),
  ),
)
</code></pre>
<h3 data-id="heading-4">ç¬¬äºŒæ­¥ï¼šè‡ªå®šä¹‰æŒ‡ç¤ºå™¨ç»„ä»¶</h3>
<p>æŒ‡ç¤ºå™¨ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š<strong>åº•æ§½ (Track)</strong> å’Œ <strong>æ»‘å— (Thumb)</strong> ã€‚æ»‘å—çš„ä½ç½®é€šè¿‡ <code>_progress</code> åŠ¨æ€è®¡ç®—ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">Widget _buildIndicator() {
      <span class="hljs-keyword">const</span> double trackWidth = <span class="hljs-number">40.0</span>; <span class="hljs-comment">// åº•æ§½å®½åº¦</span>
      <span class="hljs-keyword">const</span> double thumbWidth = <span class="hljs-number">20.0</span>; <span class="hljs-comment">// æ»‘å—å®½åº¦</span>

      <span class="hljs-keyword">return</span> Container(
        width: trackWidth,
        height: <span class="hljs-number">4.0</span>,
        decoration: BoxDecoration(
          color: Colors.grey[<span class="hljs-number">300</span>], <span class="hljs-comment">// åº•æ§½é¢œè‰²</span>
          borderRadius: BorderRadius.circular(<span class="hljs-number">2.0</span>),
        ),
        child: Stack(
          children: [
            Positioned(
              <span class="hljs-comment">// æ ¸å¿ƒé€»è¾‘ï¼šè®¡ç®—æ»‘å—çš„å·¦é—´è·</span>
              <span class="hljs-comment">// å·¦é—´è· = æ¯”ä¾‹ * (åº•æ§½å®½åº¦ - æ»‘å—å®½åº¦)</span>
              left: _progress * (trackWidth - thumbWidth),
              child: Container(
                width: thumbWidth,
                height: <span class="hljs-number">4.0</span>,
                decoration: BoxDecoration(
                  color: Colors.blue, <span class="hljs-comment">// æ»‘å—é¢œè‰²</span>
                  borderRadius: BorderRadius.circular(<span class="hljs-number">2.0</span>),
                ),
              ),
            ),
          ],
        ),
      );
    }
</code></pre>
<h2 data-id="heading-5">4. å®Œæ•´ä»£ç ç¤ºä¾‹</h2>
<p>ä¸‹é¢æ˜¯å°†ä¸Šè¿°é€»è¾‘æ•´åˆåçš„ä¸€ä¸ªå®Œæ•´ Widget ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">  <span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;

    <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomScrollIndicatorDemo</span> <span class="hljs-title">extends</span> <span class="hljs-title">StatefulWidget</span> {
      <span class="hljs-keyword">const</span> CustomScrollIndicatorDemo({<span class="hljs-keyword">super</span>.key});

      <span class="hljs-meta">@override</span>
      State&lt;CustomScrollIndicatorDemo&gt; createState() =&gt; _CustomScrollIndicatorDemoState();
    }

    <span class="hljs-keyword">class</span> <span class="hljs-title class_">_CustomScrollIndicatorDemoState</span> <span class="hljs-title">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-type">CustomScrollIndicatorDemo</span>&gt; {
      <span class="hljs-keyword">final</span> ScrollController _scrollController = ScrollController();
      double _progress = <span class="hljs-number">0.0</span>;

      <span class="hljs-meta">@override</span>
      void dispose() {
        _scrollController.dispose();
        <span class="hljs-keyword">super</span>.dispose();
      }

      <span class="hljs-meta">@override</span>
      Widget build(BuildContext context) {
        <span class="hljs-keyword">return</span> Column(
          mainAxisSize: MainAxisSize.min,
          children: [
            <span class="hljs-comment">// 1. åˆ—è¡¨éƒ¨åˆ†</span>
            SizedBox(
              height: <span class="hljs-number">100</span>,
              child: NotificationListener&lt;ScrollNotification&gt;(
                onNotification: (notification) {
                  <span class="hljs-keyword">if</span> (notification <span class="hljs-keyword">is</span> ScrollUpdateNotification) {
                    setState(() {
                      <span class="hljs-comment">// è®¡ç®—æ»šåŠ¨æ¯”ä¾‹</span>
                      <span class="hljs-keyword">if</span> (_scrollController.hasClients) {
                        _progress = _scrollController.offset / 
                                   _scrollController.position.maxScrollExtent;
                        _progress = _progress.clamp(<span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>);
                      }
                    });
                  }
                  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                },
                child: SingleChildScrollView(
                  controller: _scrollController,
                  scrollDirection: Axis.horizontal,
                  padding: <span class="hljs-keyword">const</span> EdgeInsets.symmetric(horizontal: <span class="hljs-number">16</span>),
                  child: Row(
                    children: List.generate(<span class="hljs-number">10</span>, (index) =&gt; _buildItem(index)),
                  ),
                ),
              ),
            ),
            <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">12</span>),
            <span class="hljs-comment">// 2. æŒ‡ç¤ºå™¨éƒ¨åˆ†</span>
            _buildIndicator(),
          ],
        );
      }

      <span class="hljs-comment">// æ¨¡æ‹Ÿåˆ—è¡¨é¡¹</span>
      Widget _buildItem(int index) {
        <span class="hljs-keyword">return</span> Container(
          width: <span class="hljs-number">60</span>,
          margin: <span class="hljs-keyword">const</span> EdgeInsets.only(right: <span class="hljs-number">20</span>),
          child: Column(
            children: [
              Container(
                width: <span class="hljs-number">50</span>,
                height: <span class="hljs-number">50</span>,
                decoration: BoxDecoration(
                  color: Colors.blue[<span class="hljs-number">50</span>],
                  borderRadius: BorderRadius.circular(<span class="hljs-number">12</span>),
                ),
                child: Icon(Icons.category, color: Colors.blue[<span class="hljs-number">400</span>]),
              ),
              <span class="hljs-keyword">const</span> SizedBox(height: <span class="hljs-number">8</span>),
              Text(<span class="hljs-string">'åˆ†ç±» $index'</span>, style: <span class="hljs-keyword">const</span> TextStyle(fontSize: <span class="hljs-number">12</span>)),
            ],
          ),
        );
      }

      <span class="hljs-comment">// æ„å»ºæŒ‡ç¤ºå™¨</span>
      Widget _buildIndicator() {
        <span class="hljs-keyword">return</span> Container(
          width: <span class="hljs-number">40</span>,
          height: <span class="hljs-number">4</span>,
          decoration: BoxDecoration(
            color: Colors.black12,
            borderRadius: BorderRadius.circular(<span class="hljs-number">2</span>),
          ),
          alignment: Alignment.centerLeft,
          child: FractionallySizedBox(
            widthFactor: <span class="hljs-number">1.0</span>, <span class="hljs-comment">// å æ»¡çˆ¶å®¹å™¨ï¼Œé…åˆä¸‹é¢çš„å¸ƒå±€</span>
            child: Stack(
              children: [
                Positioned(
                  left: _progress * (<span class="hljs-number">40</span> - <span class="hljs-number">20</span>), <span class="hljs-comment">// 40æ˜¯æ€»å®½ï¼Œ20æ˜¯æ»‘å—å®½</span>
                  child: Container(
                    width: <span class="hljs-number">20</span>,
                    height: <span class="hljs-number">4</span>,
                    decoration: BoxDecoration(
                      color: Colors.blue,
                      borderRadius: BorderRadius.circular(<span class="hljs-number">2</span>),
                    ),
                  ),
                ),
              ],
            ),
          ),
        );
      }
    }

</code></pre>
<h2 data-id="heading-6">5. ä¼˜åŒ–å»ºè®®</h2>
<ol>
<li><strong>åŠ¨æ€è®¡ç®—æ»‘å—å®½åº¦</strong>ï¼šå¦‚æœä½ çš„åˆ—è¡¨é¡¹æ•°é‡æ˜¯åŠ¨æ€çš„ï¼Œä½ å¯ä»¥æ ¹æ® <code>viewportDimension / contentDimension</code> çš„æ¯”ä¾‹æ¥åŠ¨æ€è®¾ç½®æ»‘å—å®½åº¦ï¼Œè¿™æ ·æŒ‡ç¤ºå™¨çš„ä½“éªŒä¼šæ›´æ¥è¿‘åŸç”Ÿæ»šåŠ¨æ¡ã€‚</li>
<li><strong>ç¼“åŠ¨åŠ¨ç”»</strong>ï¼šå¦‚æœä½ å¸Œæœ›æŒ‡ç¤ºå™¨ç§»åŠ¨æ›´ä¸æ»‘ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ <code>AnimatedPositioned</code> é…åˆè¾ƒçŸ­çš„åŠ¨ç”»æ—¶é—´ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨ <code>CustomPainter</code> æ¥ç»˜åˆ¶ã€‚</li>
<li><strong>å°è£…ç»„ä»¶</strong>ï¼šå°†è¿™ä¸ªé€»è¾‘å°è£…æˆä¸€ä¸ª <code>CustomScrollbar</code> ç»„ä»¶ï¼Œæ–¹ä¾¿åœ¨ä¸åŒé¡µé¢å¤ç”¨ã€‚</li>
</ol>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p>é€šè¿‡ <code>NotificationListener</code> ç»“åˆ <code>ScrollController</code>ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾è·å–æ»šåŠ¨çš„å®æ—¶è¿›åº¦ã€‚åˆ©ç”¨è¿™ä¸ªè¿›åº¦æ¥é©±åŠ¨ <code>Stack</code> ä¸­ <code>Positioned</code> çš„ä½ç§»ï¼Œå°±èƒ½å®ç°ä»»ä½•ä½ æƒ³è¦çš„è‡ªå®šä¹‰æŒ‡ç¤ºå™¨æ•ˆæœã€‚</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€AIåœ°å›¾ Techè¯´ã€‘ç¬¬äºŒæœŸï¼šä¸€æ–‡è§£ç ç™¾åº¦åœ°å›¾ETA]]></title>    <link>https://juejin.cn/post/7592159803410284580</link>    <guid>https://juejin.cn/post/7592159803410284580</guid>    <pubDate>2026-01-07T08:01:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592159803410284580" data-draft-id="7592144524308987910" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€AIåœ°å›¾ Techè¯´ã€‘ç¬¬äºŒæœŸï¼šä¸€æ–‡è§£ç ç™¾åº¦åœ°å›¾ETA"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-07T08:01:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç™¾åº¦åœ°å›¾æ±½è½¦ç‰ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/837165218019883"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€AIåœ°å›¾ Techè¯´ã€‘ç¬¬äºŒæœŸï¼šä¸€æ–‡è§£ç ç™¾åº¦åœ°å›¾ETA
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/837165218019883/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç™¾åº¦åœ°å›¾æ±½è½¦ç‰ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T08:01:44.000Z" title="Wed Jan 07 2026 08:01:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40e6e3290ae7481eaad6a8a02a3ae5cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377704&amp;x-signature=bfmNesS6XhQF9hD22y8ibG1QZKs%3D" alt="image.png" loading="lazy"/>
ä½ æœ‰æ²¡æœ‰è¿™æ ·çš„ä½“éªŒï¼Ÿå¯¼èˆªè¯´30åˆ†é’Ÿèƒ½åˆ°ï¼Œç»“æœçœŸçš„ä¸€åˆ†ä¸å·®ï¼Ÿ</p>
<p>æœ‰æ—¶å€™å¯¼èˆªå‘Šè¯‰ä½ è¦ç»•è¡Œ5åˆ†é’Ÿçš„è·¯ï¼Œå…¶å®çœä¸‹äº†20åˆ†é’Ÿçš„å µè½¦ã€‚</p>
<p>è¿™äº›ç¥å¥‡çš„â€œé¢„çŸ¥èƒ½åŠ›â€ï¼Œå°±æ˜¯æˆ‘ä»¬å¸¸å¬åˆ°çš„ETAï¼ˆEstimated Time of Arrivalï¼Œé¢„è®¡åˆ°è¾¾æ—¶é—´ï¼‰ï¼Œåˆ«çœ‹å®ƒä»¬åªæ˜¯ä¸€ä¸ªä¸ªæ•°å­—ï¼Œå…¶å®èƒŒåè—ç€ä¸€æ•´å¥—å¤æ‚åˆé«˜æ•ˆçš„æŠ€æœ¯ä½“ç³»ã€‚</p>
<p><strong/></p><p align="center"><strong>ç™¾åº¦åœ°å›¾ETA</strong></p><p/>
<p><strong/></p><p align="center"><strong>åˆ°åº•æ˜¯æ€ä¹ˆç²¾å‡†è®¡ç®—å‡ºæ¥çš„å‘¢ï¼Ÿ</strong></p><p/>
<p><strong/></p><p align="center"><strong>ã€AIåœ°å›¾ Techè¯´ã€‘ç¬¬äºŒæœŸå°†ä¸ºä½ æ­å¼€å¥¥ç§˜ï¼</strong></p><p/>
<h2 data-id="heading-0">ä¸€ã€åŸºç¡€ä»‹ç»</h2>
<p>ETAé¢„æµ‹çš„æœ¬è´¨ï¼Œå°±æ˜¯ç»™å®šå‡ºå‘åœ°ã€ç›®çš„åœ°å’Œå‡ºå‘æ—¶é—´åï¼Œé¢„æµ‹é©¾è½¦æ‰€éœ€çš„æ—¶é—´ã€‚ä¾‹å¦‚ï¼Œå½“ä½ åœ¨æŸä¸ªæ—¶é—´Tè¯·æ±‚è·¯çº¿ï¼ˆå¦‚Route = aâ†’bâ†’câ†’dâ†’eï¼‰æ—¶ï¼ŒETAç³»ç»Ÿä¾¿å¼€å§‹è®¡ç®—é©¾è½¦é¢„è®¡è¡Œé©¶çš„æ—¶é•¿ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8cd7cff835cb4403adc80d520628ae00~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377704&amp;x-signature=J7I8NLH83OWfVWUQlvm2UMpaVuk%3D" alt="image.png" loading="lazy"/>
<strong>1.0æ—¶ä»£ï¼šé™æ€ETAï¼ˆ2010å¹´å‰ï¼‰</strong></p>
<p>æœ€åˆï¼Œç™¾åº¦åœ°å›¾ETAåŠŸèƒ½çš„è®¡ç®—æ–¹å¼æä¸ºç®€å•ï¼Œä»…é€šè¿‡è·ç¦»é™¤ä»¥é™é€Ÿå¾—å‡ºã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹å¼è®¡ç®—å‡ºçš„ç»“æœè¯¯å·®å¸¸å¸¸è¶…è¿‡30%ï¼Œä¸€æ—¦é­é‡äº¤é€šæ‹¥å µçŠ¶å†µï¼Œæ›´æ˜¯å®Œå…¨æ— æ³•åº”å¯¹ï¼Œç”±æ­¤å¼•å‘äº†ç”¨æˆ·çš„è¯¸å¤šåæ§½ã€‚</p>
<p><strong>2.0æ—¶ä»£ï¼šåŠ¨æ€ETAï¼ˆ2010-2015å¹´ï¼‰</strong></p>
<p>ç™¾åº¦åœ°å›¾é¦–æ¬¡æ¥å…¥å®æ—¶äº¤é€šæ•°æ®ï¼Œèƒ½å¤Ÿè¯†åˆ«å®æ—¶æ‹¥å µè·¯æ®µå¹¶æä¾›åŸºæœ¬ç»•è¡Œå»ºè®®ã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•ä»æ— æ³•é¢„æµ‹æ‹¥å µçš„è¿›ä¸€æ­¥å˜åŒ–è¶‹åŠ¿ã€‚</p>
<p><strong>3.0æ—¶ä»£ï¼šä¸ªæ€§åŒ–ETAï¼ˆ2015-2021å¹´ï¼‰</strong></p>
<p>é€šè¿‡å¼•å…¥æœºå™¨å­¦ä¹ ä¸ç”¨æˆ·ç”»åƒï¼Œç™¾åº¦åœ°å›¾å¼€å§‹åˆ†æé©¾é©¶ä¹ æƒ¯ï¼ˆå¦‚æ¿€è¿›å‹æˆ–ä¿å®ˆå‹å¸æœºï¼‰ã€è½¦è¾†ç±»å‹ï¼ˆå¦‚è´§è½¦æˆ–æ–°èƒ½æºè½¦ï¼‰ï¼Œå®ç°äº†é’ˆå¯¹ä¸åŒäººç¾¤çš„ä¸ªæ€§åŒ–è·¯çº¿æ¨èã€‚</p>
<p><strong>4.0æ—¶ä»£ï¼šé¢„è§æ€§ETAï¼ˆ2021å¹´è‡³ä»Šï¼‰</strong></p>
<p>ç™¾åº¦åœ°å›¾èå…¥AIæŠ€æœ¯ï¼Œå¦‚é¢„è®­ç»ƒå¤§æ¨¡å‹å’Œæ—¶ç©ºé¢„æµ‹æŠ€æœ¯ï¼Œå¼€å§‹å®ç°æœªæ¥30-60åˆ†é’Ÿçš„ç²¾å‡†è·¯å†µé¢„æµ‹ï¼Œç”šè‡³èƒ½å‡†ç¡®é‡åŒ–å¤©æ°”å¯¹è¡Œè½¦é€Ÿåº¦çš„å½±å“ã€‚</p>
<h2 data-id="heading-1">äºŒã€æŠ€æœ¯ä¼˜åŠ¿</h2>
<p>ç™¾åº¦åœ°å›¾ETAä¸ºä½•å¦‚æ­¤ç²¾å‡†ï¼ŸèƒŒåçš„æ ¸å¿ƒåœ¨äºé¢„è®­ç»ƒäº¤é€šå¤§æ¨¡å‹ä¸ç«¯åˆ°ç«¯è·¯çº¿é€šè¡Œæ—¶é—´é¢„æµ‹ä¸¤å¤§æŠ€æœ¯ã€‚</p>
<p><strong>1</strong> <strong>ï¼‰é¢„è®­ç»ƒäº¤é€šå¤§æ¨¡å‹ï¼šæµ·é‡AIçŸ¥è¯†é›†æˆä½“</strong></p>
<p>é¢„è®­ç»ƒäº¤é€šå¤§æ¨¡å‹é€šè¿‡åœ°å›¾è„±æ•è½¨è¿¹æ•°æ®ï¼Œå»ºæ¨¡åŸå¸‚äº¤é€šè§„å¾‹ï¼Œä¸ºæ™ºèƒ½äº¤é€šæä¾›åº•åº§èƒ½åŠ›ã€‚é¢„è®­ç»ƒäº¤é€šå¤§æ¨¡å‹åŸºäºåƒäº¿å…¬é‡Œé©¾é©¶æ•°æ®ï¼Œèƒ½å¤Ÿç²¾å‡†æ•æ‰ä¸åŒåŸå¸‚åœ¨æ—¶æ®µã€å¤©æ°”ã€åŒºåŸŸä¸Šçš„äº¤é€šè§„å¾‹ï¼Œå¦‚åŒ—äº¬å‘¨ä¸€æ¯”å‘¨äº”æ—©é«˜å³°å µ12%ã€ä¸Šæµ·é›¨å¤©è½¦é€Ÿä¸‹é™22%ã€æ·±åœ³ç§‘æŠ€å›­æ™šé«˜å³°æ¯”æ—©é«˜å³°å µ35%ã€‚åŒæ—¶ï¼Œè¯¥æ¨¡å‹è¿˜å…·å¤‡æŒç»­å­¦ä¹ ä¼˜åŒ–èƒ½åŠ›ï¼Œæ¯å¤©éƒ½ä¼šç»“åˆæœ€æ–°è§‚å¯Ÿåˆ°çš„çœŸå®æ‹¥å µæƒ…å†µè‡ªåŠ¨æ›´æ–°æ¨¡å‹å‚æ•°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18c878979c064dd99387ddb59a8d2601~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377704&amp;x-signature=DIoWHFd%2F4dQ4dZCeSm13aNdIdL8%3D" alt="image.png" loading="lazy"/>
é¢„è®­ç»ƒäº¤é€šå¤§æ¨¡å‹çš„æ¡†æ¶ä¸»è¦åˆ†ä¸º3ä¸ªéƒ¨åˆ†ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f73d671275344493b97fe428f586db6c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377704&amp;x-signature=uvGIeEzBqJvvvEW6Rack8dtJgLg%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4084a2513888462db6bb90450c78fc56~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377704&amp;x-signature=ctcsqj8KTfWBASA5%2FdEPaQr1oV8%3D" alt="image.png" loading="lazy"/>
<strong>a.Large-Scale Traffic Corpusï¼ˆå¤§å‹äº¤é€šè¯­æ–™æ•°æ®ï¼‰</strong></p>
<p>å°†åŸå§‹çš„è„±æ•GPSè½¨è¿¹ç‚¹å¤„ç†æˆè·¯æ®µç²’åº¦çš„äº¤é€šæ—¶åºä¿¡æ¯å’Œè·¯çº¿ç²’åº¦çš„ä¸ªæ€§åŒ–å¯¼èˆªè¡Œä¸ºã€‚</p>
<p><strong>b.Pre-Train Modelï¼ˆé¢„è®­ç»ƒæ¨¡å‹ï¼‰</strong></p>
<p>åŸºäºå†å²äº¤é€šå¤§æ•°æ®å……åˆ†è®­ç»ƒé¢„è®­ç»ƒæ¨¡å‹ï¼Œè¡¨å¾æ™®é€‚æ€§çš„äº¤é€šè§„å¾‹ä¿¡æ¯ã€‚</p>
<p><strong>c.Downstream Taskï¼ˆä¸‹æ¸¸ä»»åŠ¡ï¼‰</strong></p>
<p>åŸºäºé¢„è®­ç»ƒçš„äº¤é€šå›¾åµŒå…¥ï¼Œé€šè¿‡Zero-Shotæˆ–è€…Fine-tuneåº”ç”¨äºé€šè¡Œæ—¶é—´é¢„ä¼°ã€äº¤é€šæµé‡é¢„ä¼°ã€è·¯çº¿æ’åºã€æ™ºèƒ½ä¿¡æ§ç­‰åœºæ™¯ã€‚</p>
<p><strong>2ï¼‰ç«¯åˆ°ç«¯è·¯çº¿é€šè¡Œæ—¶é—´é¢„æµ‹ï¼šåŸºäºäº¤é€šå¤§æ¨¡å‹FineTuneçš„ETA-GNN AIä»¿çœŸæ¨æ¼”è·¯çº¿æ¨¡å‹</strong></p>
<p>åœ¨é¢„è®­ç»ƒäº¤é€šå¤§æ¨¡å‹åŸºç¡€ä¸Šï¼Œç™¾åº¦åœ°å›¾è¿›ä¸€æ­¥åº”ç”¨ç«¯åˆ°ç«¯è·¯çº¿é€šè¡Œæ—¶é—´é¢„æµ‹ï¼Œè¿›è¡Œæ›´ç»†è‡´çš„AIä»¿çœŸæ¨æ¼”ï¼Œä¸å†å±€é™äºé€è·¯æ®µçš„ç®€å•è®¡ç®—ï¼Œè€Œæ˜¯ç²¾ç¡®æ¨¡æ‹Ÿçº¢ç»¿ç¯ç­‰å¾…æ—¶é—´ã€å‰æ–¹è½¦è¾†æ±‡å…¥æƒ…å†µåŠæ–½å·¥è·¯æ®µçš„å®é™…é€šè¡Œæ•ˆç‡ã€‚åŒæ—¶é€šè¿‡åŠ¨æ€æ¦‚ç‡æ¨¡å‹å®æ—¶è¯„ä¼°ï¼Œå†³ç­–ç»•è¡Œè¿˜æ˜¯ç­‰å¾…ï¼Œä»¥è¾¾åˆ°æœ€ä½³å‡ºè¡Œç­–ç•¥ï¼Œé¢„æµ‹å‡†ç¡®ç‡é«˜è¾¾92%ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7af54c70a3a4422da8346ab8b41c9f56~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377704&amp;x-signature=GYumIbWb7q%2BVr371UGz29R%2B0bNE%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0ad2fa490d04cb080dbe1faf190720b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377704&amp;x-signature=FPIorzm3G7GI99xmE%2FP8MlY7SwM%3D" alt="image.png" loading="lazy"/></p>
<p>ç«¯åˆ°ç«¯è·¯çº¿é¢„æµ‹ä½“ç³»æ¶µç›–ä»¥ä¸‹æ ¸å¿ƒèƒ½åŠ›ï¼š</p>
<p><strong>a.é•¿æ—¶æµé‡é¢„æµ‹èƒ½åŠ›ï¼ˆSupervised FineTuneï¼‰</strong></p>
<p>å…¨å¤©å€™é¢„æµ‹èƒ½åŠ›ï¼šé€šè¿‡å¯¹å†å²æµé‡æ•°æ®çš„ç›‘ç£å¾®è°ƒï¼Œæ¨¡å‹å¯å®ç°å¯¹æœªæ¥ 24å°æ—¶è·¯æ®µæµé‡å˜åŒ–è¶‹åŠ¿çš„ç²¾å‡†é¢„æµ‹ï¼Œé€‚ç”¨äºèŠ‚å‡æ—¥ã€æ™¯åŒºå‘¨è¾¹ç­‰é«˜åŠ¨æ€åœºæ™¯ã€‚</p>
<p>é›¶æ ·æœ¬è¿ç§»æ³›åŒ–ï¼šé¢„è®­ç»ƒæ¨¡å‹å†…ç½®â€œæ—©æ™šé«˜å³°æ¨¡å¼åº“â€ï¼Œå¯ç›´æ¥è¿ç§»è‡³æ–°åŸå¸‚è·¯ç½‘ï¼Œå®ç°å†·å¯åŠ¨åœºæ™¯ä¸‹çš„é¢„æµ‹ç²¾åº¦æ˜¾è‘—æå‡ã€‚</p>
<p><strong>b.åŠ¨æ€äº¤é€šå…³ç³»å›¾è°±å»ºæ¨¡</strong></p>
<p>æ—¶ç©ºå›¾è¡¨ç¤ºå­¦ä¹ ï¼šæ•æ‰äº¤é€šæµéšæ—¶é—´ä¸ç©ºé—´å˜åŒ–çš„æ™®é€‚è§„å¾‹ã€‚</p>
<p>è·¯ç½‘çº§ä¼ æ’­æ•ˆåº”å»ºæ¨¡ï¼šé€šè¿‡å›¾ç¥ç»ç½‘ç»œï¼ˆGNNï¼‰ç»“æ„ï¼Œé‡åŒ–ä¸åŒè·¯æ®µä¹‹é—´çš„æµé‡ä¼ å¯¼å½±å“ï¼Œå®ç°æ›´é«˜ç²¾åº¦çš„åŒºåŸŸçº§æ‹¥å µé¢„æµ‹ä¸è°ƒåº¦æ¨¡æ‹Ÿã€‚</p>
<p><strong>c.åœ°ç†è¯­ä¹‰ä½ç½®ç¼–ç ï¼ˆGeoEmbeddingï¼‰</strong></p>
<p>å¤šç»´åœ°ç†è¯­ä¹‰èåˆï¼šå°†ä¼ ç»Ÿç»çº¬åº¦è½¬æ¢ä¸ºåŒ…å«é“è·¯ç­‰çº§ã€POIå¯†åº¦ã€åœ°å½¢å¡åº¦ç­‰è¯­ä¹‰ä¿¡æ¯çš„å‘é‡è¡¨ç¤ºã€‚</p>
<p>è·¨æ¨¡æ€å»ºæ¨¡èƒ½åŠ›ï¼šèåˆå¤©æ°”ã€çƒ­åº¦ç­‰ç¯å¢ƒä¿¡æ¯ï¼Œå®ç°å¯¹ä¸åŒæ¡ä»¶ä¸‹ç›¸åŒè·¯æ®µçš„åŠ¨æ€ç¼–ç ä¸å·®å¼‚åŒ–å»ºæ¨¡ï¼Œä¾‹å¦‚â€œæš´é›¨ä¸‹ç«‹äº¤æ¡¥â€å’Œâ€œæ™´å¤©ç«‹äº¤æ¡¥â€çš„é€šè¡Œæ•ˆç‡å·®å¼‚ã€‚</p>
<p><strong>d.è½¨è¿¹è¡¨ç¤ºå­¦ä¹ ä¸ä¸ªæ€§åŒ–ETA</strong></p>
<p>è¡Œä¸ºå»ºæ¨¡ï¼šé€šè¿‡è½¦è¾†å†å²è„±æ•çš„è½¨è¿¹èšç±»ï¼ŒåŒºåˆ†ä¸åŒé©¾é©¶é£æ ¼ï¼ˆå¦‚ä¿å®ˆå‹ vs æ•ˆç‡å‹ï¼‰ï¼Œæä¾›åˆ†ç¾¤ç²¾å‡†ETAé¢„æµ‹ã€‚</p>
<p>å®æ—¶é£æ ¼æ„ŸçŸ¥ä¸åŠ¨æ€ä¿®æ­£ï¼šæ„ŸçŸ¥è½¦è¾†å½“å‰é©¾é©¶çŠ¶æ€ï¼ˆå¦‚é¢‘ç¹å˜é“ã€æ€¥åŠ é€Ÿç­‰ï¼‰ï¼ŒåŠ¨æ€è°ƒæ•´ETAå’Œè·¯å¾„å»ºè®®ï¼Œå®ç°ä¸ªæ€§åŒ–è‡ªé€‚åº”è·¯çº¿ä»¿çœŸä¸æ¨èã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€åº”ç”¨åœºæ™¯</h2>
<p>ç™¾åº¦åœ°å›¾ETAå¹¿æ³›åº”ç”¨äºå„ç±»åœºæ™¯ä¸­ï¼š</p>
<p>æ—¥å¸¸é€šå‹¤ï¼šå‡†ç¡®é¢„æµ‹æ—©æ™šé«˜å³°è·¯å†µï¼Œå¸®åŠ©é€šå‹¤æ—åˆç†å®‰æ’å‡ºè¡Œã€‚</p>
<p>æœºåœºæ¥é€ï¼šç²¾å‡†åˆ¤æ–­å½“å‰å‡ºå‘æ˜¯å¦èƒ½èµ¶ä¸Šèˆªç­ï¼Œè§£å†³æ—…é€”ç„¦è™‘ã€‚</p>
<p>é‡å¤§æ´»åŠ¨é¢„è­¦ï¼šå¦‚æ¼”å”±ä¼šç»“æŸå‰æå‰æé†’è½¦ä¸»æå‰ç¦»åœºï¼Œé¿å…æ‹¥å µã€‚</p>
<p>èŠ‚å‡æ—¥æ—…æ¸¸ï¼šæå‰é¢„æµ‹æ—…æ¸¸æ™¯åŒºé™„è¿‘çš„æ‹¥å µè¶‹åŠ¿ï¼Œæä¾›æ›´èˆ’é€‚çš„å‡ºæ¸¸ä½“éªŒã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74d62d39e50e4b3ba42d2482e4fa3944~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377704&amp;x-signature=M9uHB%2BJQLLL2lfsNfPIRFGdXKvU%3D" alt="image.png" loading="lazy"/></p>
<p>é€šè¿‡æŒç»­çš„æŠ€æœ¯è¿›åŒ–å’ŒAIé©±åŠ¨çš„å…¨é¢èµ‹èƒ½ï¼Œç™¾åº¦åœ°å›¾çš„ETAç²¾å‡†åº¦åœ¨çŸ­é€”ã€é•¿é€”ã€æ‹¥å µã€èŠ‚å‡æ—¥ç­‰å¤šä¸ªåœºæ™¯å‡å·²æ˜¾è‘—é¢†å…ˆè¡Œä¸šæ°´å¹³ï¼Œåœ¨ç”¨æˆ·æ„ŸçŸ¥å±‚é¢æ›´æ˜¾ç¨³å¥å’Œå‡†ç¡®ã€‚æ›´å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåœ¨èŠ‚å‡æ—¥ï¼ˆå°¤å…¶â€œäº”ä¸€â€è¿™ç±»ä¸æ—¥å¸¸è§„å¾‹å·®å¼‚æ˜¾è‘—çš„åœºæ™¯ä¸‹ï¼‰ï¼Œå…¶è¡¨ç°å°¤ä¸ºçªå‡ºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6dec617335e148f6aa2be2a24af8f8bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqm5Zyw5Zu-5rG96L2m54mI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377704&amp;x-signature=TG0OTwY5fej7AB09EmvTLMwDNI8%3D" alt="image.png" loading="lazy"/></p>
<p><strong/></p><p align="center"><strong>å‡ºè¡Œä»æ­¤å‘Šåˆ«ç›²ç›®ä¸ç„¦è™‘</strong></p><p/>
<p><strong/></p><p align="center"><strong>ç™¾åº¦åœ°å›¾å°†æ¯ä¸€æ¬¡çš„æœªçŸ¥å˜æˆæ¸…æ™°çš„è§„åˆ’</strong></p><p/>
<p><strong/></p><p align="center"><strong>è®©ç”¨æˆ·å®‰å¿ƒå‡ºå‘ï¼Œè‡ªä¿¡æŠµè¾¾ï¼</strong></p><p/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸŒŸä»â€œæŠ½å¡å¼ç¼–ç¨‹â€åˆ°è§„èŒƒé©±åŠ¨ï¼š æ·±åº¦è§£æã€ŒVibe Codingã€çš„ä¸‰å±‚è·ƒè¿]]></title>    <link>https://juejin.cn/post/7592170171634434063</link>    <guid>https://juejin.cn/post/7592170171634434063</guid>    <pubDate>2026-01-07T08:13:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592170171634434063" data-draft-id="7592170171634286607" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸŒŸä»â€œæŠ½å¡å¼ç¼–ç¨‹â€åˆ°è§„èŒƒé©±åŠ¨ï¼š æ·±åº¦è§£æã€ŒVibe Codingã€çš„ä¸‰å±‚è·ƒè¿"/> <meta itemprop="keywords" content="LLM,VibeCoding,å¾®ä¿¡å°ç¨‹åº"/> <meta itemprop="datePublished" content="2026-01-07T08:13:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ €ç§‹666"/> <meta itemprop="url" content="https://juejin.cn/user/2566698322650307"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸŒŸä»â€œæŠ½å¡å¼ç¼–ç¨‹â€åˆ°è§„èŒƒé©±åŠ¨ï¼š æ·±åº¦è§£æã€ŒVibe Codingã€çš„ä¸‰å±‚è·ƒè¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2566698322650307/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ €ç§‹666
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T08:13:35.000Z" title="Wed Jan 07 2026 08:13:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸŒŸä»â€œæŠ½å¡å¼ç¼–ç¨‹â€åˆ°è§„èŒƒé©±åŠ¨ï¼š æ·±åº¦è§£æã€ŒVibe Codingã€çš„ä¸‰å±‚è·ƒè¿</h2>
<hr/>
<p>åœ¨å¾®ä¿¡å°ç¨‹åºç”Ÿæ€ä¸­ï¼Œâ€œåšä¸€ä¸ªè®¡åˆ†å™¨â€è¿™ç§éœ€æ±‚çœ‹ä¼¼è½»å¦‚é¸¿æ¯›â€”â€”ä¸å°±æ˜¯åŠ å‡åˆ†æ•°ã€å­˜ä¸ªå†å²è®°å½•å—ï¼Ÿä½†æ­£æ˜¯è¿™ç±»â€œå°è€Œç¾â€çš„é¡¹ç›®ï¼Œæˆäº†æ£€éªŒAIç¼–ç¨‹æˆç†Ÿåº¦çš„è¯•é‡‘çŸ³ã€‚</p>
<p>æˆ‘ä»¬æ›¾å¹»æƒ³ä¸€å¥ <code>â€œå¸®æˆ‘åšä¸ªæ‰‘å…‹è®¡åˆ†å°ç¨‹åºâ€</code> å°±èƒ½ä¸€é”®ç”Ÿæˆå¯ç”¨ä»£ç ï¼›ä¹Ÿæ›¾é™·å…¥â€œæ”¹ä¸‰å¤©ä¸å¦‚é‡å†™ä¸¤å¤©â€çš„æ³¥æ½­ã€‚ç›´åˆ°ä¸€ç§å…¨æ–°çš„ç¼–ç¨‹ç†å¿µæ‚„ç„¶å´›èµ·ï¼š<strong>Vibe Codingï¼ˆæ°›å›´ç¼–ç¨‹ï¼‰</strong>ã€‚</p>
<p>è¿™ä¸æ˜¯ç„å­¦ï¼Œä¹Ÿä¸æ˜¯æ‘†æ‹æ™’å±çš„â€œæ°›å›´æ„Ÿâ€ï¼Œè€Œæ˜¯ä¸€å¥—<strong>ä»¥å¼€å‘è€…æ„å›¾ä¸ºæ ¸å¿ƒã€AIä¸ºåä½œè€…ã€è§„èŒƒä¸ºå¥‘çº¦çš„ç°ä»£å¼€å‘å“²å­¦</strong>ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±ä»¥ä¸€ä¸ªâ€œæ‰‹æ“è®¡åˆ†å°ç¨‹åºâ€çš„çœŸå®æ¼”è¿›è·¯å¾„ï¼Œæ‹†è§£ Vibe Coding çš„ä¸‰å¤§é˜¶æ®µï¼Œè§è¯å®ƒå¦‚ä½•ä»â€œç¢°è¿æ°”â€èµ°å‘â€œæ§æµç¨‹â€ï¼Œæœ€ç»ˆå®ç° <strong>AI é©±åŠ¨çš„å·¥ç¨‹åŒ–è½åœ°</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-1">ğŸ§  ä»€ä¹ˆæ˜¯ Vibe Codingï¼Ÿä¸æ˜¯â€œå†™æç¤ºè¯â€ï¼Œè€Œæ˜¯â€œè¥é€ å¼€å‘åœºåŸŸâ€</h3>
<p>å¾ˆå¤šäººè¯¯è§£äº† Vibe Coding â€”â€” å®ƒä¸æ˜¯ç®€å•åœ°æŠŠéœ€æ±‚ä¸¢ç»™ AI ç„¶åç¥ˆç¥·å‡ºå¥½ä»£ç ï¼Œä¹Ÿä¸æ˜¯é æˆªå›¾+emoji è£…é…·ç‚«æŠ€ã€‚</p>
<p>çœŸæ­£çš„ <strong>Vibe Codingï¼Œæ˜¯é€šè¿‡ç²¾å‡†çš„è¯­è¨€ã€ç»“æ„åŒ–çš„ä¸Šä¸‹æ–‡å’Œè§’è‰²åŒ–æŒ‡ä»¤ï¼Œåœ¨äººä¸AIä¹‹é—´æ„å»ºä¸€ç§â€œå…±æƒ…å¼åä½œâ€çš„å¼€å‘æ°›å›´</strong>ã€‚</p>
<p>å°±åƒä¹é˜ŸæŒ‡æŒ¥ä¸éœ€è¦äº²è‡ªæ¼”å¥æ¯ä»¶ä¹å™¨ï¼Œå´èƒ½è®©æ•´ä¸ªä¹å›¢å¥å‡ºå’Œè°ä¹ç« ã€‚<br/>
Vibe Coding çš„æœ¬è´¨ï¼Œæ˜¯<strong>è®©å¼€å‘è€…æˆä¸ºâ€œå¯¼æ¼”â€è€Œéâ€œç å†œâ€</strong>ï¼Œç”¨â€œæ°›å›´â€å¼•å¯¼AIå®Œæˆä»ç†è§£â†’è®¾è®¡â†’ç¼–ç â†’éªŒè¯çš„å…¨æµç¨‹è¾“å‡ºã€‚</p>
<p>è€Œè¿™ä¸€è¿‡ç¨‹ï¼Œç»å†äº†ä¸‰ä¸ªå…³é”®è·ƒè¿ï¼š</p>
<blockquote>
<p>âœ… ç¬¬ä¸€é˜¶æ®µï¼šPrompt æŠ½å¡ â€”â€” â€œè¯•è¯•çœ‹èƒ½ä¸èƒ½ä¸­å¥–â€<br/>
âœ… ç¬¬äºŒé˜¶æ®µï¼šæç¤ºè¯å·¥ç¨‹åŒ– â€”â€” â€œæˆ‘å­¦ä¼šæ€ä¹ˆä¸‹æ³¨äº†â€<br/>
âœ… ç¬¬ä¸‰é˜¶æ®µï¼šè§„èŒƒé©±åŠ¨ + å¤šAgentåä½œ â€”â€” â€œæˆ‘å·²ç»æŒæ§ç‰Œå±€â€</p>
</blockquote>
<p>è®©æˆ‘ä»¬ä»ä¸€ä¸ªçœŸå®çš„æ¡ˆä¾‹å‡ºå‘ï¼Œå±‚å±‚æ·±å…¥ã€‚</p>
<hr/>
<h3 data-id="heading-2">ğŸ² é˜¶æ®µä¸€ï¼šæŠ½å¡å¼ç¼–ç¨‹ â€”â€” å½“AIå˜æˆâ€œéšæœºä»£ç ç”Ÿæˆå™¨â€</h3>
<h4 data-id="heading-3">åœºæ™¯è¿˜åŸï¼š</h4>
<p>ä½ æ‰“å¼€ Cursor æˆ– Traeï¼Œè¾“å…¥ï¼š</p>
<blockquote>
<p>â€œç”¨ Vue å†™ä¸€ä¸ªå¾®ä¿¡å°ç¨‹åºï¼Œç”¨æ¥è®°å½•å››äººæ‰“æ‰‘å…‹çš„å¾—åˆ†ã€‚â€</p>
</blockquote>
<p>å‡ ç§’åï¼ŒAI è¿”å›äº†ä¸€å †ä»£ç ï¼š</p>
<ul>
<li>é¡µé¢å¸ƒå±€é”™ä¹±</li>
<li>åˆ†æ•°è®¡ç®—é€»è¾‘ä¸ç¬¦åˆæœ¬åœ°ç¿»å€è§„åˆ™</li>
<li>æ•°æ®æ²¡æŒä¹…åŒ–</li>
<li>ç”šè‡³ç”¨äº† React çš„è¯­æ³•â€¦â€¦</li>
</ul>
<p>ä½ èŠ±äº†ä¸¤å°æ—¶ debugï¼Œæœ€åå‘ç°è¿˜ä¸å¦‚è‡ªå·±å†™ã€‚</p>
<p>è¿™ï¼Œå°±æ˜¯å…¸å‹çš„ <strong>â€œPrompt æŠ½å¡â€æ¨¡å¼</strong>ï¼šæŠŠæ¨¡ç³Šéœ€æ±‚æ‰”è¿›é»‘ç®±ï¼ŒæœŸå¾…å¼€å‡º SSR çº§åˆ«çš„ä»£ç  SSRï¼ˆSuper Super Rareï¼‰ï¼Œç»“æœæŠ½åˆ°ä¸€å † N å¡ã€‚</p>
<h4 data-id="heading-4">é—®é¢˜æ ¹æºåœ¨å“ªï¼Ÿ</h4>
<ul>
<li>âŒ ç¼ºä¹è§’è‰²è®¾å®šï¼šAI ä¸çŸ¥é“è‡ªå·±è¯¥æ‰®æ¼”è°</li>
<li>âŒ æ²¡æœ‰ä¸Šä¸‹æ–‡çº¦æŸï¼šæ²¡æœ‰è¯´æ˜å¹³å°ã€æŠ€æœ¯æ ˆã€äº¤äº’é€»è¾‘</li>
<li>âŒ è¾“å‡ºæ— æ ¼å¼è¦æ±‚ï¼šè¿”å›çš„æ˜¯ç¢ç‰‡ä»£ç è¿˜æ˜¯å®Œæ•´æ–‡ä»¶æ ‘ï¼Ÿ</li>
<li>âŒ å¿½è§†ä¸šåŠ¡ç»†èŠ‚ï¼šâ€œåº•åˆ†Ã—ç¿»å€â€â€œåº„å®¶è½®æ¢â€ç­‰è§„åˆ™æœªæ˜ç¡®</li>
</ul>
<p>æ­¤æ—¶çš„ AIï¼Œå°±åƒä¸€ä¸ªå¤©èµ‹å¼‚ç¦€ä½†æ¯«æ— çºªå¾‹çš„æ–°æ‰‹ç¨‹åºå‘˜ï¼Œ<strong>èƒ½åŠ›å¼ºï¼Œä½†ä¸å¯æ§</strong>ã€‚</p>
<blockquote>
<p>ğŸ’¡ <strong>Vibe Coding å¯ç¤ºå½•â‘ ï¼šæ²¡æœ‰æ°›å›´çš„æç¤º = æ²¡æœ‰çµé­‚çš„æ–½å·¥å›¾</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-5">ğŸ› ï¸ é˜¶æ®µäºŒï¼šæç¤ºè¯å·¥ç¨‹åŒ– â€”â€” å¼€å§‹å»ºç«‹â€œæ²Ÿé€šå¥‘çº¦â€</h3>
<p>å½“ä½ æ„è¯†åˆ°ä¸èƒ½é â€œä¸€å¥è¯ç„å­¦â€æ—¶ï¼Œä½ å°±è¿›å…¥äº† Vibe Coding çš„ç¬¬äºŒå±‚å¢ƒç•Œï¼š<strong>å·¥ç¨‹åŒ–è¡¨è¾¾</strong>ã€‚</p>
<p>ä¸å†è¯´â€œåšä¸ªè®¡åˆ†å™¨â€ï¼Œè€Œæ˜¯è¿™æ ·å†™æç¤ºè¯ï¼š</p>
<pre><code class="hljs language-text" lang="text">ä½ æ˜¯ä¸€ä½èµ„æ·±å¾®ä¿¡å°ç¨‹åºå‰ç«¯å·¥ç¨‹å¸ˆï¼Œæ“…é•¿ä½¿ç”¨ WXML + WXSS + JavaScript æ„å»ºé«˜æ€§èƒ½åŸç”Ÿåº”ç”¨ã€‚

è¯·åŸºäºä»¥ä¸‹éœ€æ±‚ç”Ÿæˆä»£ç ï¼š
- åŠŸèƒ½ç›®æ ‡ï¼šæ”¯æŒ4äººæ‰‘å…‹æ¸¸æˆè®¡åˆ†ï¼Œæ”¯æŒè‡ªå®šä¹‰åº•åˆ†ã€æ¯å±€ç¿»å€ã€æ›´æ¢åº„å®¶
- æ ¸å¿ƒåŠŸèƒ½ï¼š
  1. ç©å®¶äººæ•°å¯é…ç½®ï¼ˆ2~6äººï¼‰
  2. æ¯å±€å¯å½•å…¥èƒœè´Ÿæ–¹åŠå€æ•°ï¼Œè‡ªåŠ¨è®¡ç®—å¾—åˆ†å¹¶ç´¯åŠ æ€»åˆ†
  3. å†å²è®°å½•ä¿å­˜è‡³æœ¬åœ°ç¼“å­˜
  4. ç•Œé¢é€‚é…ç§»åŠ¨ç«¯æ‰‹åŠ¿æ“ä½œï¼ŒæŒ‰é’®å¤§å°ç¬¦åˆå¾®ä¿¡è®¾è®¡è§„èŒƒ
- æŠ€æœ¯è¦æ±‚ï¼š
  - ä½¿ç”¨ ES6+ è¯­æ³•
  - é¡µé¢ç»“æ„ä¸º pages/score/index
  - æ ·å¼é‡‡ç”¨ç±» TailwindCSS çš„åŸå­ç±»å‘½åæ–¹å¼ï¼ˆå¦‚ mt-4, flex-centerï¼‰
  - è¾“å‡ºä¸ºå®Œæ•´çš„ .wxml + .wxss + .js æ–‡ä»¶å†…å®¹
- è¾“å‡ºæ ¼å¼ï¼š
  ä¸¥æ ¼æŒ‰ç…§ã€æ–‡ä»¶åã€‘â†’ã€ä»£ç ã€‘çš„æ–¹å¼ç»„ç»‡ï¼Œä¾‹å¦‚ï¼š
  ã€pages/score/index.wxmlã€‘
  &lt;view class="container"&gt;...&lt;/view&gt;
</code></pre>
<p>è¿™ä¸ªæç¤ºè¯çš„å˜åŒ–åœ¨äºï¼š</p>

























<table><thead><tr><th>ç»´åº¦</th><th>å˜åŒ–</th></tr></thead><tbody><tr><td>è§’è‰²</td><td>æ˜ç¡®ä¸ºâ€œå°ç¨‹åºå·¥ç¨‹å¸ˆâ€</td></tr><tr><td>ä¸Šä¸‹æ–‡</td><td>åŒ…å«ä¸šåŠ¡è§„åˆ™å’ŒæŠ€æœ¯çº¦æŸ</td></tr><tr><td>ç»“æ„</td><td>åŠŸèƒ½æ‹†è§£ + æŠ€æœ¯é€‰å‹</td></tr><tr><td>è¾“å‡ºæ§åˆ¶</td><td>å¼ºåˆ¶æ ¼å¼åŒ–ï¼Œä¾¿äºå¤åˆ¶ç²˜è´´</td></tr></tbody></table>
<p>ç»“æœå‘¢ï¼ŸAI ä¸€æ¬¡æ€§ç”Ÿæˆäº†<strong>90%å¯ç”¨çš„ä»£ç </strong>ï¼Œåªéœ€å¾®è°ƒå³å¯è¿è¡Œã€‚</p>
<blockquote>
<p>âœ… æˆåŠŸçš„å…³é”®ä¸å†æ˜¯â€œè¿æ°”â€ï¼Œè€Œæ˜¯â€œè¡¨è¾¾åŠ›â€ã€‚</p>
</blockquote>
<h4 data-id="heading-6">ğŸŒ± Vibe Coding çš„è¿›åŒ–æ„ä¹‰</h4>
<p>è¿™ä¸€é˜¶æ®µçš„æ ¸å¿ƒçªç ´æ˜¯ï¼š<strong>å¼€å‘è€…å¼€å§‹æŒæ¡â€œä¸AIå¯¹è¯çš„è¯­è¨€ä½“ç³»â€</strong>ã€‚</p>
<p>ä½ ä¸å†ç¥ˆæ±‚å¥‡è¿¹ï¼Œè€Œæ˜¯é€šè¿‡ä¸“ä¸šåŒ–ã€ç»“æ„åŒ–çš„ promptï¼Œå»ºç«‹èµ·ä¸AIä¹‹é—´çš„â€œæ²Ÿé€šå¥‘çº¦â€ã€‚è¿™ç§å¥‘çº¦æ„Ÿï¼Œæ­£æ˜¯ Vibe Coding çš„æ ¸å¿ƒæ°”è´¨ â€”â€” <strong>ä¸æ˜¯å‘½ä»¤æœºå™¨ï¼Œè€Œæ˜¯å…±åŒåˆ›ä½œ</strong>ã€‚</p>
<blockquote>
<p>ğŸ’¡ <strong>Vibe Coding å¯ç¤ºå½•â‘¡ï¼šå¥½çš„æç¤ºè¯ = ç»™AIæˆ´ä¸Šè€³æœºå¬æ¸…èŠ‚å¥</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-7">ğŸš€ é˜¶æ®µä¸‰ï¼šSDD + å¤šAgentåä½œ â€”â€” è¿›å…¥ç”Ÿäº§çº§ Vibe Coding æ—¶ä»£</h3>
<p>ç„¶è€Œï¼Œå³ä½¿æç¤ºè¯å†ç²¾å¦™ï¼Œå•ä¸ª AI å·¥ç¨‹å¸ˆä¾ç„¶éš¾ä»¥è¦†ç›–äº§å“å…¨é“¾è·¯ã€‚<br/>
çœŸæ­£çš„è´¨å˜ï¼Œå‘ç”Ÿåœ¨ <strong>SDDï¼ˆSpec-Driven Developmentï¼Œè§„èŒƒé©±åŠ¨å¼€å‘ï¼‰ + å¤šAgentåä½œ</strong> çš„èåˆä¹‹ä¸‹ã€‚</p>
<p>è¿™æ‰æ˜¯ Vibe Coding çš„ç»ˆæå½¢æ€ï¼š<strong>ä¸€åœºç”±AIä¸»æ¼”ã€äººç±»å¯¼æ¼”çš„ååŒäº¤å“æ›²</strong>ã€‚</p>
<hr/>
<h4 data-id="heading-8">ğŸ­ æ„å»ºä½ çš„è™šæ‹Ÿå¼€å‘å›¢é˜Ÿï¼šå¤šAgentåä½œæ¶æ„</h4>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ è¦å¼€å‘çš„ä¸æ˜¯ä¸€ä¸ªé™æ€é¡µé¢ï¼Œè€Œæ˜¯ä¸€ä¸ªçœŸæ­£å¯ä¸Šçº¿çš„å°ç¨‹åºã€‚ä½ éœ€è¦ï¼š</p>





























<table><thead><tr><th>è§’è‰²</th><th>èŒè´£</th></tr></thead><tbody><tr><td>è™šæ‹Ÿäº§å“ç»ç†</td><td>è¾“å‡ºPRDï¼Œæ˜ç¡®åŠŸèƒ½è¾¹ç•Œä¸ä¼˜å…ˆçº§</td></tr><tr><td>è™šæ‹ŸUIè®¾è®¡å¸ˆ</td><td>äº§å‡ºé«˜ä¿çœŸåŸå‹ï¼Œç¬¦åˆå°ç¨‹åºè§„èŒƒ</td></tr><tr><td>è™šæ‹Ÿå‰ç«¯å·¥ç¨‹å¸ˆ</td><td>å®ç°äº¤äº’é€»è¾‘ä¸é¡µé¢æ¸²æŸ“</td></tr><tr><td>è™šæ‹Ÿåç«¯å·¥ç¨‹å¸ˆ</td><td>è®¾è®¡APIæ¥å£ä¸æ•°æ®æ¨¡å‹</td></tr><tr><td>è™šæ‹Ÿæµ‹è¯•å·¥ç¨‹å¸ˆ</td><td>ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼Œæ‰§è¡Œè‡ªåŠ¨åŒ–éªŒè¯</td></tr></tbody></table>
<p>ç°åœ¨ï¼Œè¿™ä¸€åˆ‡éƒ½å¯ä»¥ç”± <strong>åŒä¸€ä¸ªå¤§æ¨¡å‹ï¼ˆå¦‚ Claude code 4.5 / Gemini 3 Proï¼‰æ‰®æ¼”ä¸åŒè§’è‰²</strong> æ¥å®Œæˆã€‚</p>
<p>æ‰€æœ‰ç¯èŠ‚å›´ç»•ä¸€ä»½ä¸­å¿ƒæ–‡æ¡£å±•å¼€ï¼š<strong>è§„èŒƒè¯´æ˜ä¹¦ï¼ˆSpecï¼‰</strong></p>
<p>Vibe Coding ä¸å†æ˜¯â€œäºº + AIâ€çš„å•æ‰“ç‹¬æ–—ï¼Œè€Œæ˜¯æ¼”å˜ä¸ºä¸€å¥—<strong>å¤š Agent åä½œçš„è‡ªåŠ¨åŒ–å¼€å‘æµæ°´çº¿</strong>ã€‚<br/>
åœ¨çœŸæ­£å†™ä»£ç ä¹‹å‰ï¼Œå…ˆè®© AI æ‰®æ¼”ä¸åŒè§’è‰²ï¼ŒæŒ‰ä¸“ä¸šæµç¨‹ä¾æ¬¡æ¨è¿›ï¼š</p>
<h5 data-id="heading-9">ä¸¾ä¸ªä¾‹å­</h5>
<p>å¦‚æœä½ è¦å¼€å‘ä¸€ä¸ªå¾®ä¿¡è®¡åˆ†å°ç¨‹åºï¼š
æˆ‘ä»¬éœ€è¦åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­å»ºç«‹ä¸€ä¸ªæ–°é¡¹ç›®</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/170fd9d0ca684fff8ab034e389c94d80~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qCA56eLNjY2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768378414&amp;x-signature=7k1Bz4dlL2i3QDIfl%2BnmvYgY9MI%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶åå¯¹æ‹¥æœ‰å¼ºèƒ½åŠ›çš„å¤§æ¨¡å‹å¦‚ Claude code 4.5 / Gemini 3 Proç­‰è¿›è¡Œäº¤æµ
ï¼ˆ1ï¼‰ä½ æ˜¯ä¸€ä¸ªå¤§å¸ˆçº§çš„å¾®ä¿¡å°ç¨‹åºäº§å“ç»ç†ï¼Œæˆ‘ç°åœ¨éœ€è¦ä½ å¸®æˆ‘æŠŠæƒ³æ³•å˜æˆéœ€æ±‚æ–‡æ¡£ï¼Œç”¨äºç»™åˆ°AIç¼–ç¨‹å·¥å…·è¿›è¡Œå®ç°</p>
<p>ï¼ˆ2ï¼‰æˆ‘ä»¬éœ€è¦å…ˆè®¨è®ºä¸€ä¸‹éœ€æ±‚ï¼Œç­‰ç¡®å®šäº†æ‰€æœ‰çš„éœ€æ±‚ï¼Œæˆ‘ä»¬åœ¨è¿›è¡Œç¬¬äºŒæ­¥</p>
<p>ï¼ˆ3ï¼‰åšä¸€ä¸ªå¾®ä¿¡å°ç¨‹åºï¼Œ ç”¨äºéº»å°†æˆ–æ‰‘å…‹çš„è®¡åˆ†</p>
<p>ç»è¿‡ä¸€ç³»åˆ—æé—®ï¼ŒLLMç»™å‡ºäº†ä»–ç»™å‡ºçš„éœ€æ±‚æ–‡æ¡£</p>
<pre><code class="hljs language-markdown" lang="markdown">Role: Expert WeChat Mini Program Developer
Task: Create a standalone scoring Mini Program (offline-first).
Language: JavaScript (Native WeChat Framework), WXSS, WXML.
<span class="hljs-bullet">1.</span> Project Context (é¡¹ç›®èƒŒæ™¯)
è¿™æ˜¯ä¸€ä¸ªç”¨äºçº¿ä¸‹æ¡Œæ¸¸ï¼ˆéº»å°†ã€æ‰‘å…‹ï¼‰çš„é€šç”¨è®°åˆ†å·¥å…·ã€‚
æ ¸å¿ƒé€»è¾‘ï¼šåŸºäºâ€œé›¶å’Œæ¸¸æˆâ€è§„åˆ™ï¼ˆZero-Sum Gameï¼‰ï¼Œå³æ¯å±€æ‰€æœ‰ç©å®¶çš„å¾—åˆ†ä¹‹å’Œå¿…é¡»ä¸º 0ã€‚
è¿è¡Œæ¨¡å¼ï¼šå•æœºç‰ˆï¼Œæ— åç«¯ï¼Œæ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ç¼“å­˜ï¼ˆLocalStorageï¼‰ã€‚
ç”¨æˆ·ï¼šé€šå¸¸ç”±å…¶ä¸­ä¸€åç©å®¶æ“ä½œï¼Œè®°å½•æ‰€æœ‰äººçš„åˆ†æ•°ã€‚
<span class="hljs-bullet">2.</span> Tech Stack (æŠ€æœ¯æ ˆçº¦æŸ)
Framework: Native WeChat Mini Program (åŸç”Ÿå¼€å‘).
Styling: Standard WXSS (Flexbox layout). Minimalistic design.
Storage: wx.setStorageSync / wx.getStorageSync.
Logic: No external dependencies. Pure JS logic.
<span class="hljs-bullet">3.</span> Data Schema (æ•°æ®ç»“æ„è®¾è®¡)
Please strict follow this JSON structure for LocalStorage key game<span class="hljs-emphasis">_history.
code
JSON
[
  {
    "id": "uuid_</span>v4<span class="hljs-emphasis">_string",          // å”¯ä¸€ç‰Œå±€ID
    "name": "2023-10-01 æ¬¢ä¹éº»å°†",    // ç‰Œå±€åç§°
    "createTime": 1696123456789,     // åˆ›å»ºæ—¶é—´æˆ³
    "playerCount": 4,                // ç©å®¶äººæ•° (2-6)
    "players": [                     // ç©å®¶åˆ—è¡¨
      { "id": 0, "name": "å¼ ä¸‰", "totalScore": 10 },
      { "id": 1, "name": "æå››", "totalScore": -5 },
      { "id": 2, "name": "ç‹äº”", "totalScore": -5 },
      { "id": 3, "name": "èµµå…­", "totalScore": 0 }
    ],
    "rounds": [                      // å¯¹å±€è®°å½•æµæ°´
      {
        "roundId": 1,
        "timestamp": 1696123500000,
        "scores": [10, -5, -5, 0]    // å¯¹åº” players æ•°ç»„ç´¢å¼•çš„åˆ†æ•°å˜åŒ–
      }
    ]
  }
]
4. Page Flow &amp; Requirements (é¡µé¢é€»è¾‘)
Page 1: Home (é¦–é¡µ - ç‰Œå±€åˆ—è¡¨)
UI:
Show list of saved games (Name + Date + Player names).
If list is empty, show a placeholder image + "Create New Game" button.
Floating Action Button (FAB): "+" to create a new game.
Interaction:
Click item -&gt; Go to Page 3 (Scoreboard).
Long press item -&gt; Option to Delete game.
Page 2: Create Game (æ–°å»ºç‰Œå±€)
UI:
Input: "Game Name" (Default: Current Date + "Game").
Selector: "Player Count" (Range: 2 to 6, Default: 4).
Dynamic Inputs: "Player Names" based on count (Default: P1, P2, P3...).
Logic:
On "Start": Initialize the data structure and save to LocalStorage, then redirect to Page 3.
Page 3: Scoreboard (è®¡åˆ†çœ‹æ¿ - æ ¸å¿ƒé¡µ)
Header:
Grid layout showing current totalScore for each player.
Highlight the winner (highest score) in Red, loser in Green.
Body (List):
Reverse chronological list of rounds (Round 10, Round 9...).
Show specific score changes for that round (e.g., +10 | -5 | -5 | 0).
Delete Function: Allow deleting the last record only (to prevent logic errors).
Footer:
Large Button: "Record Round" -&gt; Opens Page 4.
Page 4: Input Score (è®°åˆ†å½•å…¥)
UI:
List of players. Each row has: Player Name + Input Field (Number).
Auto-Balance Button: A button next to the last player or at the bottom.
Logic: Calculates 0 - (Sum of other players) and fills the remaining field.
Validation (Strict Zero-Sum):
Before saving, check: Sum(scores) === 0.
If Sum !== 0, show Toast error: "Total score must be 0! Current: +X".
Allow input of 0.
Save:
On success: Update players.totalScore, push to rounds, save to LocalStorage, go back to Page 3.
5. Edge Cases (å¼‚å¸¸å¤„ç†)
Input Type: Ensure inputs handle negative numbers (keyboard type usually digit or number allowing -).
Empty Input: Treat empty input as 0.
Data Persistence: Update LocalStorage immediately after every round addition/deletion.
</span></code></pre>
<p>äºæ˜¯ï¼Œæˆ‘ä»¬é€šè¿‡è™šæ‹Ÿäº§å“ç»ç†å¾—åˆ°äº†æˆ‘ä»¬<strong>äº§å“éœ€æ±‚æ–‡æ¡£</strong></p>
<p>ç„¶åï¼Œæ‰“å¼€ä½ å–œæ¬¢çš„ AI ç¼–è¾‘å™¨ï¼ˆæ¯”å¦‚ <strong>Traeã€Cursor</strong>ï¼‰ï¼ŒæŠŠåˆšæ‰æ–°å»ºçš„ç©ºé¡¹ç›®æ–‡ä»¶å¤¹æ‹–è¿›å»ï¼ŒæŠŠè¿™ä»½ éœ€æ±‚æ–‡æ¡£ ç²˜è¿›å»ï¼Œè®©å®ƒå¼€å§‹ç”Ÿæˆä»£ç </p>
<p>ä¸å‡ºæ„å¤–ï¼Œä½ å°†è·å¾—äº†ä¸€ä¸ªä»£ç è´¨é‡è¿˜ä¸é”™çš„å¾®ä¿¡å°ç¨‹åº</p>
<p>è¿™ä¾¿æ˜¯<strong>vibe coding</strong> çš„é­…åŠ›ä¹‹ä¸€</p>
<hr/>
<h4 data-id="heading-10">ğŸ“œ ä»€ä¹ˆæ˜¯ SDDï¼Ÿå…ˆå®šè§„åˆ™ï¼Œå†å†™ä»£ç </h4>
<p>ä»¥ç™»å½•åŠŸèƒ½ä¸ºä¾‹ï¼Œä¼ ç»Ÿå¼€å‘å¸¸å› â€œæˆ‘ä»¥ä¸ºä½ æ˜¯è¿™ä¹ˆæƒ³çš„â€å¯¼è‡´è¿”å·¥ã€‚è€Œåœ¨ SDD æ¨¡å¼ä¸‹ï¼Œä¸€åˆ‡ä»¥ <strong>å”¯ä¸€çœŸç†æºï¼ˆSingle Source of Truthï¼‰</strong> ä¸ºå‡†ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// spec/auth.login.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"endpoint"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"POST /auth/login"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç”¨æˆ·ç™»å½•æ¥å£"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"request"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"body"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"username"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"password"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"response"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"token"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"expires_in"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"number"</span> <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"fail"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span> <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">401</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span> <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å‚æ•°ç¼ºå¤±"</span> <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"validation"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"éœ€è¿›è¡Œå‰åç«¯åŒé‡æ ¡éªŒ"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å‰ç«¯æŒ‰æ­¤å†™è¯·æ±‚é€»è¾‘ï¼Œåç«¯æ®æ­¤å®ç°æ¥å£ï¼Œæµ‹è¯•æ®æ­¤ç¼–å†™æ–­è¨€ã€‚<br/>
<strong>æ‰€æœ‰äººå¯¹é½çš„ä¸æ˜¯å£å¤´çº¦å®šï¼Œè€Œæ˜¯è¿™ä»½ JSON æ–‡æ¡£</strong>ã€‚</p>
<blockquote>
<p>âœ… å½“è§„èŒƒæˆä¸ºå¥‘çº¦ï¼ŒAI æ‰èƒ½çœŸæ­£â€œå±¥çº¦å¼ç¼–ç¨‹â€ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-11">âš™ï¸ å¤§æ¨¡å‹å¦‚ä½•æ”¯æ’‘ SDD è½åœ°ï¼Ÿ</h4>
<p>æ–°ä¸€ä»£å¤§æ¨¡å‹ï¼ˆå¦‚ Claude code 4.5ã€Gemini 3 Proï¼‰å…·å¤‡ä¸‰å¤§èƒ½åŠ›ï¼Œä½¿ SDD æˆä¸ºå¯èƒ½ï¼š</p>





















<table><thead><tr><th>èƒ½åŠ›</th><th>åº”ç”¨åœºæ™¯ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>ä»»åŠ¡åˆ†è§£èƒ½åŠ›</strong></td><td>å°†â€œåšè®¡åˆ†å™¨â€æ‹†è§£ä¸ºç©å®¶ç®¡ç†ã€åˆ†æ•°å½•å…¥ã€è§„åˆ™å¼•æ“ç­‰æ¨¡å—</td></tr><tr><td><strong>è·¨è§’è‰²æ¨ç†èƒ½åŠ›</strong></td><td>åŒä¸€æ¨¡å‹åˆ‡æ¢èº«ä»½ï¼šå…ˆå½“äº§å“ç»ç†å†™PRDï¼Œå†å½“å·¥ç¨‹å¸ˆå†™ä»£ç </td></tr><tr><td><strong>é•¿ä¸Šä¸‹æ–‡è®°å¿†</strong></td><td>æ”¯æŒç™¾ä¸‡tokenä¸Šä¸‹æ–‡ï¼Œä¿æŒå…¨å±€ä¸€è‡´æ€§ï¼ˆå¦‚å˜é‡å‘½åç»Ÿä¸€ï¼‰</td></tr></tbody></table>
<p>è¿™æ„å‘³ç€ï¼š<strong>ä½ åªéœ€æä¾›åˆå§‹æ„å›¾ï¼ŒAI è‡ªåŠ¨å¸®ä½ å®Œæˆä»0åˆ°1çš„ç³»ç»Ÿè®¾è®¡</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-12">ğŸŒˆ Vibe Coding çš„ä¸‰å±‚è·ƒè¿æ€»ç»“</h3>





































<table><thead><tr><th>å±‚çº§</th><th>åç§°</th><th>æ ¸å¿ƒç‰¹å¾</th><th>å¼€å‘è€…è§’è‰²</th><th>AIè§’è‰²</th><th>æ˜¯å¦å¯ç”¨äºç”Ÿäº§</th></tr></thead><tbody><tr><td>L1</td><td>æŠ½å¡å¼ç¼–ç¨‹</td><td>ä¸€å¥è¯Promptï¼Œç»“æœéšæœº</td><td>ç”¨æˆ·</td><td>éšæœºç”Ÿæˆå™¨</td><td>âŒ</td></tr><tr><td>L2</td><td>æç¤ºè¯å·¥ç¨‹åŒ–</td><td>ç»“æ„åŒ–Promptï¼Œå¯æ§è¾“å‡º</td><td>å¯¼æ¼”</td><td>æ¼”å‘˜</td><td>âœ…ï¼ˆéœ€äººå·¥å®¡æ ¸ï¼‰</td></tr><tr><td>L3</td><td>SDD + å¤šAgent</td><td>è§„èŒƒé©±åŠ¨ï¼Œè§’è‰²åˆ†å·¥</td><td>æ€»ç›‘åˆ¶</td><td>å…¨æ ˆå›¢é˜Ÿ</td><td>âœ…âœ…âœ…ï¼ˆå¯ç›´æ¥éƒ¨ç½²ï¼‰</td></tr></tbody></table>
<blockquote>
<p>ğŸ¯ <strong>Vibe Coding çš„ç»ˆæç›®æ ‡ï¼šè®©äººä¸“æ³¨äºâ€œå®šä¹‰ä»·å€¼â€ï¼Œè®©AIè´Ÿè´£â€œå®ç°ä»·å€¼â€</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-13">ğŸ”® æœªæ¥å·²æ¥ï¼šAIç¼–ç¨‹å·¥ç¨‹å¸ˆçš„æ–°èƒ½åŠ›æ¨¡å‹</h3>
<p>éšç€ Vibe Coding çš„æ™®åŠï¼Œæœªæ¥çš„å¼€å‘è€…ç«äº‰åŠ›å°†å‘ç”Ÿæ ¹æœ¬æ€§é‡æ„ï¼š</p>

























<table><thead><tr><th>æ—§èƒ½åŠ›</th><th>æ–°èƒ½åŠ›</th></tr></thead><tbody><tr><td>æ‰‹æ•²ä»£ç é€Ÿåº¦</td><td>å®šä¹‰è§„èŒƒçš„èƒ½åŠ›</td></tr><tr><td>è®°å¿†APIæ–‡æ¡£</td><td>è®¾è®¡æç¤ºè¯çš„èƒ½åŠ›</td></tr><tr><td>DebugæŠ€å·§</td><td>æ„å»ºå¤šAgentåä½œæµç¨‹çš„èƒ½åŠ›</td></tr><tr><td>å•å…µä½œæˆ˜</td><td>æŒ‡æŒ¥AIå›¢é˜ŸååŒçš„èƒ½åŠ›</td></tr></tbody></table>
<p>å°±åƒå·¥ä¸šé©å‘½ä¸­ï¼Œå·¥äººä»æ‰‹å·¥çººçº±è½¬å‘æ“ä½œæœºåºŠï¼Œ<strong>ç¨‹åºå‘˜ä¹Ÿå°†ä»â€œå†™ä»£ç çš„äººâ€è¿›åŒ–ä¸ºâ€œåˆ›é€ å¼€å‘æµç¨‹çš„äººâ€</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-14">ğŸ“£ å†™ç»™æ¯ä¸€ä½å¼€å‘è€…çš„å»ºè®®</h3>
<p>å¦‚æœä½ è¿˜åœ¨ç”¨ AI â€œè¡¥ä¸€è¡Œå°‘ä¸€è¡Œâ€ï¼Œé‚£ä½ åªçœ‹åˆ°äº†å†°å±±ä¸€è§’ã€‚</p>
<p>çœŸæ­£çš„ Vibe Codingï¼Œæ˜¯ï¼š</p>
<ul>
<li>åœ¨é¡¹ç›®å¯åŠ¨å‰ï¼Œå…ˆè®© AI å†™ PRDï¼›</li>
<li>åœ¨ç¼–ç ä¹‹å‰ï¼Œå…ˆè®© AI å‡º Specï¼›</li>
<li>åœ¨æµ‹è¯•ä¹‹å‰ï¼Œå…ˆè®© AI å†™ç”¨ä¾‹ï¼›</li>
<li>æœ€åå†è®© AI å†™ä»£ç ï¼Œå¹¶è‡ªåŠ¨å¯¹æ¯”æ˜¯å¦ç¬¦åˆè§„èŒƒã€‚</li>
</ul>
<p><strong>è®© AI ä¸åªæ˜¯å·¥å…·ï¼Œè€Œæ˜¯è´¯ç©¿ SDLCï¼ˆè½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸï¼‰çš„åä½œä¼™ä¼´</strong>ã€‚</p>
<p>å“ªæ€•åªæ˜¯ä¸€ä¸ªâ€œè®¡åˆ†å°ç¨‹åºâ€ï¼Œä¹Ÿèƒ½è·‘é€šæ•´å¥—æµç¨‹ã€‚ä¸‹æ¬¡æ¥åˆ°ç±»ä¼¼éœ€æ±‚æ—¶ï¼Œä¸å¦¨è¯•è¯•ï¼š</p>
<blockquote>
<p>â€œè¯·ä½ ä½œä¸ºAIäº§å“ç»ç†ï¼Œä¸ºâ€˜å››äººæ–—åœ°ä¸»è®¡åˆ†å°ç¨‹åºâ€™æ’°å†™ä¸€ä»½è¯¦ç»†PRDï¼ŒåŒ…å«åŠŸèƒ½åˆ—è¡¨ã€äº¤äº’æµç¨‹ã€æ•°æ®è§„åˆ™å’Œæ‰©å±•æ€§è€ƒè™‘ã€‚â€</p>
</blockquote>
<p>ä½ ä¼šå‘ç°ï¼ŒAI ä¸ä»…èƒ½ç»™ä½ ç­”æ¡ˆï¼Œè¿˜èƒ½å¸®ä½ <strong>æå‡ºæ›´å¥½çš„é—®é¢˜</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-15">ğŸ ç»“è¯­ï¼šä»â€œæ‰‹æ“â€åˆ°â€œæµç¨‹é©±åŠ¨â€ï¼ŒVibe Coding æ­£åœ¨é‡å¡‘å¼€å‘æœ¬è´¨</h3>
<p>æˆ‘ä»¬æ›¾ä»¥ä¸º AI æ˜¯æ¥æŠ¢é¥­ç¢—çš„ã€‚<br/>
ä½†ç°åœ¨æ˜ç™½ï¼š<strong>AI ä¸æ˜¯æ›¿ä»£è€…ï¼Œè€Œæ˜¯æ”¾å¤§å™¨</strong>ã€‚</p>
<p>å®ƒæ”¾å¤§çš„ï¼Œæ˜¯ä½ å¯¹ä¸šåŠ¡çš„ç†è§£ã€å¯¹ç³»ç»Ÿçš„æŠ½è±¡ã€å¯¹åä½œçš„è®¾è®¡ã€‚</p>
<p>é‚£ä¸ªæ›¾ç»éœ€è¦ä¸€å‘¨æ‰èƒ½äº¤ä»˜çš„è®¡åˆ†å°ç¨‹åºï¼Œå¦‚ä»Šå¯ä»¥åœ¨ <strong>ä¸€ä¸ªä¸‹åˆå†…ï¼Œç”±ä½ ä¸»å¯¼ã€AIæ‰§è¡Œã€è§„èŒƒä¿éšœ</strong> å®Œæˆäº¤ä»˜ã€‚</p>
<p>è€Œè¿™ï¼Œæ­£æ˜¯ <strong>Vibe Coding çš„é­…åŠ›æ‰€åœ¨</strong>ï¼š<br/>
å®ƒä¸è¿½æ±‚ç‚«æŠ€å¼çš„â€œç§’å‡ºä»£ç â€ï¼Œè€Œæ˜¯è¿½æ±‚<strong>å¯æŒç»­ã€å¯å¤ç”¨ã€å¯è§„æ¨¡åŒ–</strong>çš„æ™ºèƒ½å¼€å‘æ–°èŒƒå¼ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¶…è¶ŠSoraçš„å¼€æºæ€è·¯ï¼šå¦‚ä½•ç”¨é¢„è®­ç»ƒç»„ä»¶é«˜æ•ˆè®­ç»ƒä½ çš„è§†é¢‘æ‰©æ•£æ¨¡å‹ï¼Ÿï¼ˆé™„è®­ç»ƒä»£ç ï¼‰]]></title>    <link>https://juejin.cn/post/7592148975848259627</link>    <guid>https://juejin.cn/post/7592148975848259627</guid>    <pubDate>2026-01-07T08:51:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592148975848259627" data-draft-id="7592134330313605163" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¶…è¶ŠSoraçš„å¼€æºæ€è·¯ï¼šå¦‚ä½•ç”¨é¢„è®­ç»ƒç»„ä»¶é«˜æ•ˆè®­ç»ƒä½ çš„è§†é¢‘æ‰©æ•£æ¨¡å‹ï¼Ÿï¼ˆé™„è®­ç»ƒä»£ç ï¼‰"/> <meta itemprop="keywords" content="ç®—æ³•,è®¡ç®—æœºè§†è§‰,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-01-07T08:51:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoovallyAIHub"/> <meta itemprop="url" content="https://juejin.cn/user/2461151071843739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¶…è¶ŠSoraçš„å¼€æºæ€è·¯ï¼šå¦‚ä½•ç”¨é¢„è®­ç»ƒç»„ä»¶é«˜æ•ˆè®­ç»ƒä½ çš„è§†é¢‘æ‰©æ•£æ¨¡å‹ï¼Ÿï¼ˆé™„è®­ç»ƒä»£ç ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2461151071843739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoovallyAIHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T08:51:22.000Z" title="Wed Jan 07 2026 08:51:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»22åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å½“æˆ‘ä»¬å¼€å§‹æ€è€ƒ3Dæ•°æ®æˆ–è§†é¢‘æ—¶ï¼Œä¸€ä¸ªå¾ˆè‡ªç„¶çš„æƒ³æ³•å°±æ˜¯æŠŠå®ƒä»¬è§†ä¸ºä¸€ç³»åˆ—2Då¸§ï¼Œç„¶åé€šè¿‡ç®€å•åœ°æŠŠæ—¶é—´ä½œä¸ºé¢å¤–ç»´åº¦æ¥åº”ç”¨åŒæ ·çš„æ¨¡å‹ã€‚</p>
<p>ä»ç›´è§‰ä¸Šçœ‹ï¼Œè¿™ç§æ–¹æ³•ä¼¼ä¹å¯è¡Œï¼Œä½†å®é™…ä¸Šå®ƒå¾ˆå¿«ä¼šé‡åˆ°ç“¶é¢ˆã€‚éšç€è¾“å…¥å˜å¾—æ›´é«˜ç»´ï¼Œæ¨¡å‹é€šå¸¸éœ€è¦å˜å¾—æ›´å¤§æ‰èƒ½è¡¨ç°è‰¯å¥½ã€‚è¿™å¯¼è‡´å†…å­˜ä½¿ç”¨å¢åŠ ã€è®¡ç®—æˆæœ¬ä¸Šå‡ï¼Œè®­ç»ƒä¹Ÿæ›´éš¾ç¨³å®šï¼Œå°¤å…¶æ˜¯åœ¨GPUèµ„æºæœ‰é™çš„æƒ…å†µä¸‹ã€‚</p>
<p>å¯¹äºåƒè§†é¢‘ç”Ÿæˆè¿™æ ·çš„ä»»åŠ¡ï¼Œè¿™ä¸ªé—®é¢˜å˜å¾—æ›´åŠ ä¸¥é‡ã€‚è§†é¢‘ä¸­çš„å¸§å¹¶ä¸æ˜¯ç‹¬ç«‹çš„ï¼Œå®ƒä»¬åœ¨æ—¶é—´ä¸Šç´§å¯†ç›¸è¿ã€‚ç”±äºè¿™ç§å¼ºçƒˆçš„æ—¶é—´ä¾èµ–æ€§ï¼Œå•ä¸€çš„ç”Ÿæˆæ¨¡å‹å¾ˆéš¾åŒæ—¶å­¦ä¼šç‰©ä½“çš„å¤–è§‚å’Œè¿åŠ¨æ–¹å¼ã€‚</p>
<p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œå°†ä»‹ç»éšå¼æµæ‰©æ•£æ¨¡å‹ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸ºåº”å¯¹ä¸Šè¿°æŒ‘æˆ˜è€Œè®¾è®¡çš„ä¸¤é˜¶æ®µæ¡†æ¶ã€‚ç¬¬ä¸€é˜¶æ®µä¸“æ³¨äºå­¦ä¹ åƒç´ çº§çš„ç©ºé—´å…³ç³»ï¼Œè€Œç¬¬äºŒé˜¶æ®µåˆ™å»ºæ¨¡è§†é¢‘å¸§ä¹‹é—´çš„æ—¶é—´ä¾èµ–æ€§ã€‚</p>
<p>åˆ°æ–‡ç« ç»“å°¾ï¼Œä½ å°†çœ‹åˆ°LFDMå¦‚ä½•ç”¨äºåœ¨MHADæ•°æ®é›†ä¸Šè¿›è¡Œæ¡ä»¶å¼çš„å›¾åƒåˆ°è§†é¢‘ç”Ÿæˆï¼Œå¹¶é…æœ‰PyTorchçš„å®æˆ˜ä»£ç å®ç°ã€‚</p>
<h2 data-id="heading-0"><strong>éšå¼æµæ‰©æ•£æ¨¡å‹çš„æ ¸å¿ƒæ€æƒ³</strong></h2>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0314ce4d7822494f9ebfad7fd3c82e9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380682&amp;x-signature=K37b%2BDvrPnfi0bTyeXCWBlE8EX0%3D" alt="screenshot_2026-01-06_15-26-06.png" loading="lazy"/></p>
<p>æ­£å¦‚å‰æ–‡æåˆ°çš„ï¼Œè§†é¢‘ä¹‹æ‰€ä»¥éš¾ä»¥å»ºæ¨¡ï¼Œæ˜¯å› ä¸ºç©ºé—´å¤–è§‚å’Œæ—¶é—´è¿åŠ¨é«˜åº¦çº ç¼ ã€‚å½“æ‰©æ•£æ¨¡å‹ç›´æ¥åœ¨åƒç´ ç©ºé—´é€å¸§ç”Ÿæˆè§†é¢‘æ—¶ï¼Œç»“æœå¾€å¾€ä¸ç¨³å®šï¼Œå¯¼è‡´é—ªçƒã€ç‰©ä½“å½¢çŠ¶æ‰­æ›²æˆ–å¸§é—´çªç„¶ä¸ä¸€è‡´ã€‚</p>
<p>ä¸å…¶ç›´æ¥ç”Ÿæˆè§†é¢‘ï¼ŒLFDMé‡‡ç”¨äº†ä¸€ç§ä¸åŒçš„ç­–ç•¥ï¼šé€šè¿‡å…‰æµæ¥å»ºæ¨¡è¿åŠ¨ã€‚åœ¨ç¬¬ä¸€é˜¶æ®µï¼Œæ¨¡å‹è¢«è®­ç»ƒæ¥é¢„æµ‹æºå¸§å’Œç›®æ ‡å¸§ä¹‹é—´çš„å…‰æµã€‚ç„¶åï¼Œè¿™ä¸ªæµè¢«ç”¨æ¥æ‰­æ›²æºå¸§ï¼Œä»è€Œç”Ÿæˆå¯¹åº”çš„ç›®æ ‡å¸§ã€‚</p>
<p>ç»™å®šä¸€ä¸ªæºå¸§ x0ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥è®­ç»ƒä¸€ä¸ªæ‰©æ•£æ¨¡å‹æ¥ç”Ÿæˆä¸€ç³»åˆ—å…‰æµï¼Œä¾‹å¦‚ flow(x0, x1), flow(x0, x2)â€¦â€¦é€šè¿‡ç”¨è¿™äº›é¢„æµ‹çš„æµæ¥æ‰­æ›²åŒä¸€ä¸ªæºå¸§ x0ï¼Œå°±å¯ä»¥åˆæˆå¹¶ç»„è£…å‡ºè¿è´¯çš„æœªæ¥å¸§ã€‚</p>
<p>å› ä¸ºæ‰€æœ‰å¸§éƒ½æ˜¯ç”±åŒä¸€å¼ æºå›¾åƒå˜å½¢ç”Ÿæˆçš„ï¼Œç©ºé—´ç»“æ„ä¿æŒä¸€è‡´ï¼Œå¹¶ä¸”è¿åŠ¨éšæ—¶é—´æ¼”åŒ–æ›´å¹³æ»‘ã€‚è¿™ä½¿å¾—æ‰©æ•£æ¨¡å‹å¯ä»¥ä¸“æ³¨äºå­¦ä¹ è¿åŠ¨åŠ¨æ€ï¼Œè€Œéç»†èŠ‚å¤–è§‚ï¼Œè®©å­¦ä¹ é—®é¢˜å˜å¾—æ›´ç®€å•ï¼Œç”Ÿæˆçš„è§†é¢‘ä¹Ÿæ›´ç¨³å®šã€‚</p>
<p>LFDMèƒŒåçš„å¦ä¸€ä¸ªå…³é”®æ€æƒ³æ˜¯ï¼šå…‰æµæ˜¯åœ¨éšå¼ç©ºé—´è€Œä¸æ˜¯ç›´æ¥åœ¨åƒç´ çº§åº”ç”¨çš„ã€‚è¿™æ˜¾è‘—é™ä½äº†å†…å­˜ä½¿ç”¨å’Œè®¡ç®—æˆæœ¬ã€‚åœ¨æˆ‘çš„å®éªŒä¸­ï¼Œæºå¸§è¢«ç¼©æ”¾åˆ°128Ã—128ï¼Œå¹¶ç¼–ç æˆ32Ã—32çš„éšå¼ç‰¹å¾ã€‚æ¨¡å‹é¢„æµ‹ä¸€ä¸ªæµåœºæ¥æ‰­æ›²è¿™ä¸ªéšå¼è¡¨ç¤ºï¼Œç„¶åè§£ç å™¨å°†æ‰­æ›²åçš„éšå¼è¡¨ç¤ºé‡å»ºä¸ºç›®æ ‡å¸§ã€‚</p>
<ul>
<li><strong>é˜¶æ®µä¸€ï¼šéšå¼æµè‡ªç¼–ç å™¨</strong></li>
</ul>

<ul>
<li>è®­ç»ƒä¸€ä¸ªè‡ªç¼–ç å™¨ï¼Œå°†æºå¸§ç¼–ç åˆ°éšå¼ç©ºé—´ï¼Œå¹¶å°†ç»è¿‡æµæ‰­æ›²çš„éšå¼è¡¨ç¤ºè§£ç å›å›¾åƒã€‚</li>
<li>è®­ç»ƒä¸€ä¸ªæµé¢„æµ‹å™¨ï¼Œç”¨äºä¼°è®¡æºå¸§å’Œç›®æ ‡å¸§ä¹‹é—´åœ¨éšå¼ç©ºé—´ï¼ˆ32Ã—32ï¼‰çš„å…‰æµã€‚</li>
</ul>

<ul>
<li><strong>é˜¶æ®µäºŒï¼šæ‰©æ•£æ¨¡å‹</strong></li>
</ul>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5eab270f43bd4e5aa760f5a29c7307de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380682&amp;x-signature=fGxNFd8%2B76PEKTnLJO1PrGmFD90%3D" alt="screenshot_2026-01-06_15-29-10.png" loading="lazy"/></p>
<ul>
<li>ä½¿ç”¨ç¬¬ä¸€é˜¶æ®µè®­ç»ƒå¥½çš„æµé¢„æµ‹å™¨ï¼Œä»ä¸€ä¸ªå›ºå®šçš„æºå¸§ x0 ç”Ÿæˆä¸€ç³»åˆ—éšå¼å…‰æµï¼ˆå¦‚ä¸Šå›¾æ‰€ç¤ºï¼‰ã€‚</li>
<li>ä½¿ç”¨æ‰©æ•£æ¨¡å‹ï¼ˆæˆ–å…¶ä»–ç”Ÿæˆæ¨¡å‹ï¼‰æ¥å»ºæ¨¡è¿™ä¸ªæµåºåˆ—çš„åˆ†å¸ƒï¼Œå¹¶ç”Ÿæˆæ–°çš„éšå¼æµåºåˆ—ã€‚</li>
</ul>

<ul>
<li><strong>å…‰æµä¸åå‘é‡‡æ ·</strong></li>
</ul>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b69bc1d9b004119b49dccb3d0f667b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380682&amp;x-signature=jLEteBFUIW%2BJyEraZtGJ1aCHuFM%3D" alt="screenshot_2026-01-06_15-30-23.png" loading="lazy"/></p>
<p>åœ¨è®¡ç®—æœºè§†è§‰ä¸­ï¼Œå…‰æµé€šè¿‡ä¸ºæ¯ä¸ªåƒç´ ä¼°è®¡ä¸€ä¸ª2Dä½ç§»å‘é‡ï¼Œæ¥æè¿°ä¸¤ä¸ªè¿ç»­å›¾åƒå¸§ x0 å’Œ x1 ä¹‹é—´åƒç´ çš„è¡¨è§‚è¿åŠ¨ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cccdefe1852940d9882036da50d3cee9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380682&amp;x-signature=FQ%2ByjSNGwB1d0rWnZREN745CKyk%3D" alt="screenshot_2026-01-06_15-31-31.png" loading="lazy"/></p>
<p>æµæ‰­æ›²å¯ä»¥ç”¨ä¸Šé¢çš„æ–¹ç¨‹è¡¨ç¤ºï¼Œå…¶ä¸­ p = (x, y) è¡¨ç¤ºåƒç´ åæ ‡ï¼Œ(u, v) è¡¨ç¤ºå…‰æµçš„æ°´å¹³å’Œå‚ç›´åˆ†é‡ã€‚è¿™ä¸ªæ–¹ç¨‹å®šä¹‰äº†ä¸€ä¸ªåƒç´ çº§çš„æ˜ å°„ï¼Œæè¿°äº†æºå¸§ x0 ä¸­çš„åƒç´ å¦‚ä½•è¢«ç§»åŠ¨åˆ°ç›®æ ‡å¸§ x1 ä¸­ï¼Œå°†æ¯ä¸ªåœ¨ (x, y) çš„åƒç´ æ˜ å°„åˆ° (x + u, y + v)ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e71dd42e3f2543cda885e6f631e4c3af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380682&amp;x-signature=7lUh594k8OPHnTxHS3%2FDhx5pzsU%3D" alt="screenshot_2026-01-06_15-32-07.png" loading="lazy"/></p>
<p>æ ¹æ®æµåŠ¨æ–¹å‘ï¼Œæ‰­æ›²å¯ä»¥åˆ†ä¸ºå‰å‘æ‰­æ›²å’Œåå‘æ‰­æ›²ã€‚å‰å‘æ‰­æ›²ä½¿ç”¨æµåœºå°†æºå¸§çš„æ¯ä¸ªåƒç´ æ˜ å°„åˆ°ç›®æ ‡å¸§ï¼Œä½†æœ‰äº›åƒç´ å¯èƒ½ä¼šè½åœ¨æœ‰æ•ˆå›¾åƒåŒºåŸŸä¹‹å¤–ï¼Œå¯¼è‡´ç¼ºå¤±æˆ–æœªå®šä¹‰çš„åŒºåŸŸï¼ˆè§Aå›¾ï¼‰ã€‚è€Œåå‘æ‰­æ›²åˆ™æŒ‡å®šæ¯ä¸ªç›®æ ‡åƒç´ å¦‚ä½•ä»æºå¸§é‡‡æ ·ï¼Œä»è€Œé¿å…äº†è¿™äº›ç¼ºå¤±åŒºåŸŸã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aed28923d7f34204ac3b7e8c568e2adc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380682&amp;x-signature=Ij4QOF%2B2nZGYNmSJ6rCvgnq4nBQ%3D" alt="screenshot_2026-01-06_15-32-22.png" loading="lazy"/></p>
<p>åœ¨LFDMä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©åå‘æ‰­æ›²ï¼Œå› ä¸ºæ‰€æœ‰æœªæ¥å¸§ï¼ˆxâ‚, xâ‚‚, ...ï¼‰éƒ½æ˜¯ä»åŒä¸€ä¸ªæºå¸§ï¼ˆxâ‚€ï¼‰é‡‡æ ·å¾—åˆ°çš„ï¼Œç¡®ä¿äº†è·¨æ—¶é—´çš„ç©ºé—´å’Œå¤–è§‚ä¸€è‡´æ€§ã€‚æ­¤å¤–ï¼Œåå‘æ‰­æ›²é¿å…äº†ç›®æ ‡å¸§ä¸­çš„ç¼ºå¤±æˆ–æœªå®šä¹‰åŒºåŸŸã€‚</p>
<h2 data-id="heading-1"><strong>å…³èŠ‚åŠ¨ç”»çš„è¿åŠ¨è¡¨ç¤º</strong></h2>
<p>å¯¹äºç®€å•çš„è¿åŠ¨ï¼Œä¼ ç»Ÿçš„å…‰æµæ–¹æ³•ï¼ˆä¾‹å¦‚ç»å…¸çš„æˆ–åŸºäºå­¦ä¹ çš„æ–¹æ³•ï¼‰é€šå¸¸æ•ˆæœä¸é”™ã€‚ç„¶è€Œï¼Œå½“è¿åŠ¨å˜å¾—æ›´åŠ å¤æ‚æ—¶â€”â€”ä¾‹å¦‚ï¼Œå½“å¤šä¸ªç‰©ä½“ç‹¬ç«‹è¿åŠ¨æˆ–å‘ç”Ÿå…³èŠ‚å¼ã€éåˆšæ€§çš„å˜å½¢æ—¶â€”â€”å‡†ç¡®ä¼°è®¡å…‰æµå°±å˜å¾—å›°éš¾å¾—å¤šã€‚</p>
<p>å› æ­¤ï¼ŒLFDMé‡‡ç”¨äº†åŸºäºMRAAçš„è¿åŠ¨è¡¨ç¤ºï¼Œå®ƒä½¿ç”¨ç»“æ„åŒ–çš„å…³é”®ç‚¹ä½ç§»æ¥å»ºæ¨¡è¿åŠ¨ï¼Œå¹¶å°†å®ƒä»¬èšåˆæˆä¸€ä¸ªå¯†é›†çš„å˜å½¢åœºã€‚è¿™ç§è®¾è®¡ä½¿å¾—LFDMå³ä½¿åœ¨å¤æ‚çš„è¿åŠ¨åœºæ™¯ä¸‹ï¼Œä¹Ÿèƒ½ä»¥æ›´ç¨³å®šã€æ›´è¿è´¯çš„æ–¹å¼é¢„æµ‹å…‰æµå’Œé®æŒ¡å›¾ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0306cd0de4f04e9fb2fdb7817b18f563~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380682&amp;x-signature=ir4VPvbqBdnYYrBdP2w%2BQNWXDhg%3D" alt="screenshot_2026-01-06_15-32-59.png" loading="lazy"/></p>
<p>MRAAèƒŒåçš„æ ¸å¿ƒæ€æƒ³ç›¸å½“ç®€å•ï¼šå®ƒä¸è¯•å›¾ä¸€æ¬¡æ€§å»ºæ¨¡å¤æ‚çš„æ•´ä½“è¿åŠ¨ï¼Œè€Œæ˜¯å°†è¿åŠ¨åˆ†è§£æˆå‡ ä¸ªè¾ƒå°çš„å±€éƒ¨è¿åŠ¨ã€‚æ¯ä¸ªéƒ¨åˆ†è¢«å•ç‹¬å»ºæ¨¡ï¼Œç„¶åæ‰€æœ‰è¿™äº›å±€éƒ¨è¿åŠ¨è¢«ç»„åˆèµ·æ¥å½¢æˆæ•´ä½“è¿åŠ¨ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6e88f523e954da8b976714927729c81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380682&amp;x-signature=qicLinOV%2BZ9Rt7kY6cwIW6GxVfI%3D" alt="screenshot_2026-01-06_15-33-13.png" loading="lazy"/></p>
<p>ä¾‹å¦‚ï¼Œå½“ä¸€ä¸ªäººå°†æ‰‹ä»ä½ä½ä¸¾è¿‡å¤´é¡¶æ—¶ï¼Œå¤šä¸ªèº«ä½“éƒ¨ä½â€”â€”å¦‚è‚©è†€ã€ä¸Šè‡‚å’Œå‰è‡‚â€”â€”ä¼šä¸€èµ·è¿åŠ¨ã€‚MRAAä¸æ˜¯ç›´æ¥ä¼°è®¡ä¸€ä¸ªå•ä¸€çš„ã€å…¨å±€çš„åƒç´ çº§è¿åŠ¨åœºï¼Œè€Œæ˜¯å¯¹è¿ç»­å¸§ä¹‹é—´æ¯ä¸ªå±€éƒ¨ç»„ä»¶çš„ç›¸å¯¹è¿åŠ¨è¿›è¡Œå»ºæ¨¡ï¼Œç„¶åé€šè¿‡åŠ æƒèšåˆå°†å®ƒä»¬ç»„åˆèµ·æ¥ï¼Œäº§ç”Ÿæœ€ç»ˆçš„æ•´ä½“è¿åŠ¨åœºï¼ˆå…‰æµï¼‰ã€‚</p>
<ul>
<li><strong>MRAAçš„ç»„æˆéƒ¨åˆ†</strong></li>
</ul>

<ul>
<li><strong>åŒºåŸŸé¢„æµ‹å™¨ï¼š</strong> ä»è¾“å…¥å›¾åƒä¸­æå–ä¸€ç»„å…³é”®åŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸä»£è¡¨ä¸€ä¸ªå±€éƒ¨è¿åŠ¨ç»„ä»¶ã€‚è¿™äº›åŒºåŸŸæä¾›äº†å‚ä¸è¿åŠ¨çš„ç‰©ä½“éƒ¨ä»¶çš„ç»“æ„åŒ–å’Œç´§å‡‘è¡¨ç¤ºã€‚</li>
<li><strong>æµé¢„æµ‹å™¨ï¼š</strong> é€šè¿‡ç»„åˆåŒºåŸŸçº§è¿åŠ¨ï¼Œå»ºæ¨¡æºå¸§å’Œé©±åŠ¨å¸§ä¹‹é—´çš„ç›¸å¯¹è¿åŠ¨ã€‚å®ƒå°†è¿åŠ¨èšåˆæˆä¸€ä¸ªå¯†é›†çš„å˜å½¢åœºä»¥åŠä¸€ä¸ªé®æŒ¡å›¾ã€‚</li>
<li><strong>ç”Ÿæˆå™¨ï¼š</strong> ä½¿ç”¨é¢„æµ‹çš„æµå’Œé®æŒ¡å›¾æ¥æ‰­æ›²æºå›¾åƒï¼Œä»¥é‡å»ºç›®æ ‡å¸§ã€‚é€šè¿‡é‡å»ºæŸå¤±ï¼Œå®ƒå®ç°äº†å¯¹æœ‰æ„ä¹‰çš„ã€ç¨³å®šçš„è¿åŠ¨è¡¨ç¤ºçš„ç«¯åˆ°ç«¯å­¦ä¹ ã€‚</li>
<li><strong>èƒŒæ™¯è¿åŠ¨é¢„æµ‹å™¨ï¼š</strong> ä¼°è®¡é™æ€èƒŒæ™¯çš„å…¨å±€è¿åŠ¨ï¼Œä¾‹å¦‚ç›¸æœºç§»åŠ¨ã€‚</li>
</ul>
<p>æ³¨ï¼šé®æŒ¡å›¾æŒ‡ç¤ºäº†ç”±äºå¸§é—´é®æŒ¡è€Œå˜å¾—ä¸å¯è§çš„åŒºåŸŸï¼Œåœ¨è¿™äº›åŒºåŸŸï¼Œç›´æ¥ä»æºå›¾åƒè¿›è¡Œæ‰­æ›²å¹¶ä¸å¯é ã€‚å®ƒå…è®¸æ¨¡å‹åœ¨é‡å»ºè¿‡ç¨‹ä¸­é™ä½è¿™äº›åŒºåŸŸçš„æƒé‡æˆ–å¿½ç•¥å®ƒä»¬ï¼Œä»è€Œé˜²æ­¢ä¼ªå½±å¹¶æé«˜æ—¶é—´ä¸€è‡´æ€§ã€‚</p>
<h2 data-id="heading-2"><strong>åŒºåŸŸé¢„æµ‹å™¨</strong></h2>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34f6855fef7c49a8abda532c898c3cfa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380682&amp;x-signature=%2Br0%2BuVYs%2FP6C%2FqLy9Asd5fV20L8%3D" alt="screenshot_2026-01-06_15-34-52.png" loading="lazy"/></p>
<p>åŒºåŸŸé¢„æµ‹å™¨çš„ç›®æ ‡æ˜¯å­¦ä¹ å›¾åƒä¸­å¤šä¸ªåŒºåŸŸçš„å¯å¾®åˆ†å±€éƒ¨è¡¨ç¤ºã€‚å®ƒä½¿ç”¨ä¸€ä¸ªU-Netæ¥é¢„æµ‹æ¯ä¸ªåŒºåŸŸçš„è½¯çƒ­å›¾ï¼Œä»¥æ¦‚ç‡æ–¹å¼å°†åƒç´ åˆ†é…åˆ°ä¸åŒçš„åŒºåŸŸã€‚</p>
<p>ä»è¿™äº›çƒ­å›¾ä¸­ï¼Œæˆ‘ä»¬è®¡ç®—æ¯ä¸ªåŒºåŸŸçš„ä¸­å¿ƒå’Œåæ–¹å·®ï¼š</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7da4f119fde940f5883051b9388b0402~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380682&amp;x-signature=QzbzHxF4pV6rZaxFMVUTQbXwGYI%3D" alt="screenshot_2026-01-06_15-35-11.png" loading="lazy"/></p>
<p>åŸºäºè¿™äº›ä¸€é˜¶å’ŒäºŒé˜¶çŸ©ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥åˆ©ç”¨PCAæ¨å¯¼å‡ºæ¯ä¸ªåŒºåŸŸç›¸å¯¹äºè§„èŒƒåæ ‡ç³»çš„ä»¿å°„è¡¨ç¤ºã€‚è¿™äº›ç¨€ç–çš„ã€åŒºåŸŸçº§çš„çº¿ç´¢éšåè¢«æµé¢„æµ‹å™¨ç”¨æ¥å»ºæ¨¡å¯†é›†çš„å…‰æµã€‚</p>
<p>å¦ä¸€ä¸ªç»†èŠ‚æ˜¯ï¼Œæµé¢„æµ‹å™¨åœ¨éšå¼ç©ºé—´è¿è¡Œï¼Œå¹¶é¢„æµ‹ä¸€ä¸ªç©ºé—´åˆ†è¾¨ç‡ä½å¾—å¤šçš„å…‰æµï¼Œè€Œä¸æ˜¯ç›´æ¥åœ¨åƒç´ çº§ã€‚ä¸ºäº†ä¿æŒåŒºåŸŸè¡¨ç¤ºä¸è¿™ä¸ªéšå¼æµå¯¹é½ï¼Œæˆ‘ä»¬åœ¨è®­ç»ƒåŒºåŸŸé¢„æµ‹å™¨æ—¶ï¼Œå°†è¾“å…¥å›¾åƒç¼©æ”¾åˆ°ä¸éšå¼ç‰¹å¾ç›¸åŒçš„åˆ†è¾¨ç‡ã€‚åœ¨æˆ‘çš„å®ç°ä¸­ï¼Œ128Ã—128çš„å›¾åƒè¢«ç¼©æ”¾åˆ°32Ã—32ä½œä¸ºæ¨¡å‹è¾“å…¥ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">class RegionPredictor(nn.Module):
    def __init__(self, <span class="hljs-attr">block_expansion</span>=<span class="hljs-number">32</span>, num_regions=<span class="hljs-number">10</span>, num_channels=<span class="hljs-number">3</span>, \
                 <span class="hljs-attr">max_features</span>=<span class="hljs-number">1024</span>, num_blocks=<span class="hljs-number">5</span>, temperature=<span class="hljs-number">0.1</span>, scale_factor=<span class="hljs-number">0.25</span>, pad=<span class="hljs-number">0</span>):
        super().__init__()
        <span class="hljs-attr">self.temperature</span> = temperature
        <span class="hljs-attr">self.scale_factor</span> = scale_factor
       
        <span class="hljs-attr">self.predictor</span> = Hourglass(
            block_expansion,
            <span class="hljs-attr">in_features</span>=num_channels,
            <span class="hljs-attr">max_features</span>=max_features,
            <span class="hljs-attr">num_blocks</span>=num_blocks
        )
        
        <span class="hljs-attr">self.regions</span> = nn.Conv2d(
            <span class="hljs-attr">in_channels</span>=self.predictor.out_filters,
            <span class="hljs-attr">out_channels</span>=num_regions,
            <span class="hljs-attr">kernel_size</span>=(<span class="hljs-number">7</span>, <span class="hljs-number">7</span>),
            <span class="hljs-attr">padding</span>=pad
        )
        
        <span class="hljs-comment"># Rescale 128 * 128 frame into 32 * 32</span>
        if self.scale_factor != 1:
            <span class="hljs-attr">self.down</span> = AntiAliasInterpolation2d(num_channels, self.scale_factor)
        else:
            <span class="hljs-attr">self.down</span> = None
    
    def _region_to_pca_params(self, region: torch.Tensor):
        <span class="hljs-comment"># region: (B, K, H, W) softmax heatmap</span>
        B, K, H, <span class="hljs-attr">W</span> = region.shape
        <span class="hljs-attr">grid</span> = make_coordinate_grid((H, W), region.dtype).to(region.device)
        <span class="hljs-attr">grid</span> = grid.unsqueeze(<span class="hljs-number">0</span>).unsqueeze(<span class="hljs-number">0</span>)
        
        <span class="hljs-comment"># mean/shift: (B, K, 2)   </span>
        <span class="hljs-attr">region_w</span> = region.unsqueeze(-<span class="hljs-number">1</span>)               
        <span class="hljs-attr">mean</span> = (region_w * grid).sum(dim=(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>))        
        
        <span class="hljs-comment"># covariance: (B, K, 2, 2)</span>
        <span class="hljs-attr">mean_sub</span> = grid - mean.unsqueeze(-<span class="hljs-number">2</span>).unsqueeze(-<span class="hljs-number">2</span>)
        <span class="hljs-attr">covar</span> = mean_sub.unsqueeze(-<span class="hljs-number">1</span>) * mean_sub.unsqueeze(-<span class="hljs-number">2</span>)  
        <span class="hljs-attr">covar</span> = covar * region.unsqueeze(-<span class="hljs-number">1</span>).unsqueeze(-<span class="hljs-number">1</span>)       
        <span class="hljs-attr">covar</span> = covar.sum(dim=(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>))
        <span class="hljs-attr">I</span> = torch.eye(<span class="hljs-number">2</span>, device=covar.device, dtype=covar.dtype).view(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>)
        <span class="hljs-attr">covar</span> = covar + <span class="hljs-number">1</span>e-<span class="hljs-number">6</span> * I
        <span class="hljs-attr">covar</span> = <span class="hljs-number">0.5</span> * (covar + covar.transpose(-<span class="hljs-number">1</span>, -<span class="hljs-number">2</span>))
        
        <span class="hljs-comment"># SVD to get sqrt(covar) as "affine"</span>
        <span class="hljs-attr">covar_flat</span> = covar.view(-<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>)           
        U, S, <span class="hljs-attr">Vh</span> = torch.linalg.svd(covar_flat, full_matrices=<span class="hljs-literal">False</span>)
        
        <span class="hljs-comment"># sqrt matrix: U * diag(sqrt(S))</span>
        <span class="hljs-attr">D</span> = torch.diag_embed(torch.sqrt(torch.clamp(S, min=<span class="hljs-number">1</span>e-<span class="hljs-number">6</span>))) 
        <span class="hljs-attr">sqrt</span> = U @ D                                               
        <span class="hljs-attr">sqrt</span> = sqrt.view(B, K, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>)
        <span class="hljs-attr">U</span> = U.view(B, K, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>)
        <span class="hljs-attr">D</span> = D.view(B, K, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>)
        return {"shift": mean, "covar": covar, "affine": sqrt, "u": U, "d": D}
    
    def forward(self, x: torch.Tensor):
        <span class="hljs-comment"># x: (B, 3, H, W)</span>
        if self.down is not None:
            <span class="hljs-attr">x</span> = self.down(x)
        
        <span class="hljs-attr">feature_map</span> = self.predictor(x)
        <span class="hljs-attr">logits</span> = self.regions(feature_map)  <span class="hljs-comment"># (B, K, H, W)</span>
        B, K, H, <span class="hljs-attr">W</span> = logits.shape
        <span class="hljs-attr">region</span> = logits.view(B, K, -<span class="hljs-number">1</span>)
        <span class="hljs-attr">region</span> = F.softmax(region / self.temperature, dim=<span class="hljs-number">2</span>)
        <span class="hljs-attr">region</span> = region.view(B, K, H, W)
        
        <span class="hljs-attr">region_params</span> = self._region_to_pca_params(region)
        region_params<span class="hljs-section">["heatmap"]</span> = region
        return region_params
</code></pre>
<h2 data-id="heading-3"><strong>åƒç´ çº§æµé¢„æµ‹å™¨</strong></h2>
<p>åœ¨åŒºåŸŸé¢„æµ‹å™¨ä¸­ï¼Œæˆ‘ä»¬è·å¾—äº†æ¯ä¸ªåŒºåŸŸçš„ç²—ç•¥çš„ã€åŒºåŸŸçº§çš„è¿åŠ¨ä¿¡æ¯ã€‚æµé¢„æµ‹å™¨ç„¶åé€šè¿‡ä»¥ä¸‹æ–¹ç¨‹èšåˆè¿™äº›åŒºåŸŸçº§çº¿ç´¢ï¼Œåˆæˆä¸€ä¸ªå¯†é›†çš„å…‰æµåœºï¼šï¼ˆå…¶ä¸­A: ä»¿å°„çŸ©é˜µï¼Œs: åŒºåŸŸä¸­å¿ƒï¼Œx: åƒç´ åæ ‡ï¼‰</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67c24b152cb74232bef27a6777da1709~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380682&amp;x-signature=9mWHemDunVcc%2FcyQ6laBz1kVNCo%3D" alt="screenshot_2026-01-06_15-37-14.png" loading="lazy"/></p>
<p>æ€è·¯å¾ˆç®€å•ã€‚æˆ‘ä»¬é¦–å…ˆé€šè¿‡ x - s_drv ç§»åŠ¨åƒç´ åæ ‡ï¼Œä½¿å¾—ä¸€åˆ‡éƒ½ä»¥é©±åŠ¨åŒºåŸŸä¸ºä¸­å¿ƒã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨é©±åŠ¨å¸§çš„é€†ä»¿å°„å˜æ¢ A_drv^-1 å°†åæ ‡å¸¦å…¥ä¸€ä¸ªè§„èŒƒç©ºé—´ã€‚ä¹‹åï¼Œæˆ‘ä»¬åº”ç”¨æºå¸§çš„ä»¿å°„å˜æ¢ A_src å°†å…¶æ˜ å°„å›æºå§¿æ€ã€‚æœ€åï¼Œæˆ‘ä»¬åŠ ä¸Š s_src å¾—åˆ°ç”¨äºåå‘æ‰­æ›²çš„æµç½‘æ ¼ã€‚</p>
<pre><code class="hljs language-class" lang="class">    def __init__(self, block_expansion=64, num_blocks=5, max_features=1024, \
                 num_regions=10, num_channels=3, scale_factor=0.25):
        super().__init__()
        self.num_regions = num_regions
        self.scale_factor = scale_factor

        in_ch = (num_regions + 1) * (num_channels + 1)
        self.hourglass = Hourglass(
            block_expansion=block_expansion,
            in_features=in_ch,
            max_features=max_features,
            num_blocks=num_blocks,
        )
        self.mask = nn.Conv2d(self.hourglass.out_filters, num_regions + 1, kernel_size=7, padding=3)
        self.occlusion = nn.Conv2d(self.hourglass.out_filters, 1, kernel_size=7, padding=3)
        if self.scale_factor != 1:
            self.down = AntiAliasInterpolation2d(num_channels, self.scale_factor)
    
    def create_heatmap_representations(self, source_image, driving_region_params, source_region_params):
        spatial_size = source_image.shape[2:]  # (h, w)
        covar_d = driving_region_params["covar"]
        covar_s = source_region_params["covar"]
        
        gaussian_driving = region2gaussian(driving_region_params["shift"], covar=covar_d, spatial_size=spatial_size)
        gaussian_source = region2gaussian(source_region_params["shift"], covar=covar_s, spatial_size=spatial_size)
        heatmap = gaussian_driving - gaussian_source  # (B, K, H, W)
        # add background channel (zeros), can consider adding background feature
        zeros = torch.zeros(heatmap.size(0), 1, spatial_size[0], spatial_size[1],
                            device=heatmap.device, dtype=heatmap.dtype)
        heatmap = torch.cat([zeros, heatmap], dim=1)  # (B, K+1, H, W)
        return heatmap.unsqueeze(2)  # (B, K+1, 1, H, W)
    
    def create_sparse_motions(self, source_image, driving_region_params, source_region_params):
        bs, _, h, w = source_image.shape
        identity_grid = make_coordinate_grid((h, w), type=source_region_params["shift"].type())
        identity_grid = identity_grid.view(1, 1, h, w, 2)  # (1,1,H,W,2)
        # region-wise coords centered at driving shift
        coordinate_grid = identity_grid - driving_region_params["shift"].view(bs, self.num_regions, 1, 1, 2)
        
        affine = torch.matmul(source_region_params["affine"], torch.inverse(driving_region_params["affine"]))
        affine = affine * torch.sign(affine[:, :, 0:1, 0:1])
        affine = affine.unsqueeze(-3).unsqueeze(-3)             # (B,K,1,1,2,2)
        affine = affine.repeat(1, 1, h, w, 1, 1)                # (B,K,H,W,2,2)
        
        coordinate_grid = torch.matmul(affine, coordinate_grid.unsqueeze(-1)).squeeze(-1)  # (B,K,H,W,2)
        driving_to_source = coordinate_grid + source_region_params["shift"].view(bs, self.num_regions, 1, 1, 2)
        # background motion is always identity (no bg predictor)
        bg_grid = identity_grid.repeat(bs, 1, 1, 1, 1)  # (B,1,H,W,2)
        return torch.cat([bg_grid, driving_to_source], dim=1)
    
    def create_deformed_source_image(self, source_image, sparse_motions):
        bs, _, h, w = source_image.shape
        source_repeat = source_image.unsqueeze(1).unsqueeze(1).repeat(bs, self.num_regions + 1, 1, 1, 1, 1)
        source_repeat = source_repeat.view(bs * (self.num_regions + 1), -1, h, w)
        sparse_motions = sparse_motions.view(bs * (self.num_regions + 1), h, w, 2)
        sparse_deformed = F.grid_sample(source_repeat, sparse_motions)
        sparse_deformed = sparse_deformed.view(bs, self.num_regions + 1, -1, h, w)
        return sparse_deformed
    
    def forward(self, source_image, driving_region_params, source_region_params):
        if self.scale_factor != 1:
            source_image = self.down(source_image)
        bs, _, h, w = source_image.shape
        heatmap_representation = self.create_heatmap_representations(source_image, driving_region_params, source_region_params)
        sparse_motion = self.create_sparse_motions(source_image, driving_region_params, source_region_params) 
        deformed_source = self.create_deformed_source_image(source_image, sparse_motion) # (B, K+1, C, H, W)
        
        predictor_input = torch.cat([heatmap_representation, deformed_source], dim=2)    # (B, K+1, 1+C, H, W)
        predictor_input = predictor_input.view(bs, -1, h, w)
        prediction = self.hourglass(predictor_input)
        mask = F.softmax(self.mask(prediction), dim=1).unsqueeze(2)  # (B,K+1,1,H,W)
        
        sparse_motion = sparse_motion.permute(0, 1, 4, 2, 3)         # (B,K+1,2,H,W)
        deformation = (sparse_motion * mask).sum(dim=1).permute(0, 2, 3, 1)  # (B,H,W,2)
        out_dict = {"optical_flow": deformation}
        out_dict["occlusion_map"] = torch.sigmoid(self.occlusion(prediction))
        return out_dict
</code></pre>
<p>è¿˜ä½¿ç”¨ä¸€ä¸ªU-Netæ¥é¢„æµ‹ä¸€ä¸ªé®æŒ¡å›¾ã€‚å®ƒå‘Šè¯‰æˆ‘ä»¬ï¼Œå¯¹äºæ¯ä¸ªåƒç´ ï¼Œå“ªä¸ªåŒºåŸŸçš„è¿åŠ¨æ˜¯å¯é çš„ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒè®©ç”Ÿæˆå™¨çŸ¥é“å“ªäº›éƒ¨åˆ†è¢«é®æŒ¡äº†ï¼Œæ— æ³•é€šè¿‡æ‰­æ›²è·å¾—ï¼Œå› æ­¤è¿™äº›åŒºåŸŸéœ€è¦ç”Ÿæˆå™¨è‡ªå·±æ¥å¡«å……ã€‚</p>
<h2 data-id="heading-4"><strong>ç”Ÿæˆå™¨ä¸è®­ç»ƒå¾ªç¯</strong></h2>
<p>æœ€åï¼Œç¬¬ä¸€é˜¶æ®µè®­ç»ƒçš„æœ€åä¸€ä¸ªéƒ¨åˆ†æ˜¯ç”Ÿæˆå™¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŸºäºè‡ªç¼–ç å™¨çš„æ¨¡å‹ã€‚å®ƒé¦–å…ˆå°†æºå¸§ x_s ç¼–ç æˆä¸€ä¸ªéšå¼è¡¨ç¤º z_sã€‚ç„¶åï¼Œè¿™ä¸ªéšå¼è¡¨ç¤ºè¢«å…‰æµæ‰­æ›²ï¼Œäº§ç”Ÿä¸€ä¸ªå˜å½¢åçš„ç‰¹å¾ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3e4c9daed374d3a86683ddf7cfaf563~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380682&amp;x-signature=szRGOVl%2B6nb9kUEtMM6OiNDlb7Q%3D" alt="screenshot_2026-01-06_15-37-50.png" loading="lazy"/></p>
<p>ä¸€ä¸ªé®æŒ¡å›¾ M è¢«ç”¨æ¥æ··åˆå˜å½¢åçš„éšå¼è¡¨ç¤ºå’ŒåŸå§‹éšå¼è¡¨ç¤ºï¼ŒæŒ‡ç¤ºå“ªäº›åŒºåŸŸåº”è¯¥è¢«ä¿¡ä»»ï¼Œå“ªäº›éœ€è¦è¢«å¡«å……ã€‚è§£ç å™¨ç„¶åä½¿ç”¨è¿™ä¸ªæ··åˆåçš„éšå¼è¡¨ç¤ºæ¥é‡å»ºç›®æ ‡å¸§ x_tã€‚</p>
<pre><code class="hljs language-ini" lang="ini">class Generator(nn.Module):
    def __init__(self, <span class="hljs-attr">num_channels</span>=<span class="hljs-number">3</span>, num_regions=<span class="hljs-number">10</span>, block_expansion=<span class="hljs-number">64</span>, max_features=<span class="hljs-number">512</span>,
                 <span class="hljs-attr">num_down_blocks</span>=<span class="hljs-number">2</span>, num_bottleneck_blocks=<span class="hljs-number">6</span>):   
        super().__init__()
        <span class="hljs-attr">self.first</span> = SameBlock2d(num_channels, block_expansion, kernel_size=(<span class="hljs-number">7</span>, <span class="hljs-number">7</span>), padding=(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>)) 
        <span class="hljs-attr">down_blocks</span> = []
        <span class="hljs-attr">up_blocks</span> = []
        
        for i in range(num_down_blocks):
            <span class="hljs-attr">in_features</span>  = min(max_features, block_expansion * (<span class="hljs-number">2</span> ** i))
            <span class="hljs-attr">out_features</span> = min(max_features, block_expansion * (<span class="hljs-number">2</span> ** (i + <span class="hljs-number">1</span>)))
            down_blocks.append(DownBlock2d(in_features, out_features, <span class="hljs-attr">kernel_size</span>=(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>), padding=(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)))

        for i in range(num_down_blocks):
            <span class="hljs-attr">in_features</span>  = min(max_features, block_expansion * (<span class="hljs-number">2</span> ** (num_down_blocks - i)))
            <span class="hljs-attr">out_features</span> = min(max_features, block_expansion * (<span class="hljs-number">2</span> ** (num_down_blocks - i - <span class="hljs-number">1</span>)))
            up_blocks.append(UpBlock2d(in_features, out_features, <span class="hljs-attr">kernel_size</span>=(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>), padding=(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)))

        <span class="hljs-attr">self.down_blocks</span> = nn.ModuleList(down_blocks)
        <span class="hljs-attr">self.up_blocks</span> = nn.ModuleList(up_blocks)
        <span class="hljs-attr">in_features</span> = min(max_features, block_expansion * (<span class="hljs-number">2</span> ** num_down_blocks))
        
        <span class="hljs-attr">self.bottleneck</span> = nn.Sequential(*[
            ResBlock2d(in_features, kernel_size=(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>), padding=(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>))
            for _ in range(num_bottleneck_blocks)
        ])
        <span class="hljs-attr">self.final</span> = nn.Conv2d(block_expansion, num_channels, kernel_size=(<span class="hljs-number">7</span>, <span class="hljs-number">7</span>), padding=(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>))
        <span class="hljs-attr">self.num_channels</span> = num_channels
   
    @staticmethod
    def deform_input(inp, grid):
        <span class="hljs-comment"># grid: (B, H, W, 2) in normalized coords for grid_sample</span>
        b, c, h, <span class="hljs-attr">w</span> = inp.shape
        gh, <span class="hljs-attr">gw</span> = grid.shape[<span class="hljs-number">1</span>], grid.shape[<span class="hljs-number">2</span>]
        if (gh, gw) != (h, w):
            <span class="hljs-attr">grid</span> = grid.permute(<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment"># (B,2,H,W)</span>
            <span class="hljs-attr">grid</span> = F.interpolate(grid, size=(h, w), mode=<span class="hljs-string">'bilinear'</span>, align_corners=<span class="hljs-literal">True</span>)
            <span class="hljs-attr">grid</span> = grid.permute(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>)  <span class="hljs-comment"># (B,H,W,2)</span>
        return F.grid_sample(inp, grid, <span class="hljs-attr">align_corners</span>=<span class="hljs-literal">True</span>)
    
    def apply_optical(self, x_skip, x_prev, motion_params):
        if motion_params is None:
            return x_prev if x_prev is not None else x_skip
        <span class="hljs-attr">x</span> = self.deform_input(x_skip, motion_params[<span class="hljs-string">'optical_flow'</span>])
        <span class="hljs-attr">occ</span> = motion_params[<span class="hljs-string">'occlusion_map'</span>]
        if occ.shape<span class="hljs-section">[-2:]</span> != x.shape<span class="hljs-section">[-2:]</span>:
            <span class="hljs-attr">occ</span> = F.interpolate(occ, size=x.shape[-<span class="hljs-number">2</span>:], mode=<span class="hljs-string">'bilinear'</span>, align_corners=<span class="hljs-literal">True</span>)

        if x_prev is None:
            return x * occ
        return x * occ + x_prev * (1 - occ)
    
    def forward(self, source_image, motion_params):
        <span class="hljs-attr">out</span> = self.first(source_image)
        <span class="hljs-attr">skips</span> = [out]
        for block in self.down_blocks: <span class="hljs-comment"># Encoder</span>
            <span class="hljs-attr">out</span> = block(out)
            skips.append(out)
        
        <span class="hljs-attr">output_dict</span> = {
            "bottle_neck_feat": out,
            "deformed": self.deform_input(source_image, motion_params<span class="hljs-section">["optical_flow"]</span>),
            "optical_flow": motion_params<span class="hljs-section">["optical_flow"]</span>,
        }
        output_dict<span class="hljs-section">["occlusion_map"]</span> = motion_params<span class="hljs-section">["occlusion_map"]</span>
        <span class="hljs-attr">out</span> = self.apply_optical(x_skip=out, x_prev=None, motion_params=motion_params)
        <span class="hljs-attr">out</span> = self.bottleneck(out)
        
        for i, up in enumerate(self.up_blocks): <span class="hljs-comment"># Decoder</span>
            <span class="hljs-attr">out</span> = self.apply_optical(
                <span class="hljs-attr">x_skip</span>=skips[-(i + <span class="hljs-number">1</span>)],
                <span class="hljs-attr">x_prev</span>=out,
                <span class="hljs-attr">motion_params</span>=motion_params
            )
            <span class="hljs-attr">out</span> = up(out)
        <span class="hljs-attr">out</span> = torch.sigmoid(self.final(out))
        output_dict<span class="hljs-section">["prediction"]</span> = out
        return output_dict
    
    def compute_fea(self, source_image):
        <span class="hljs-attr">out</span> = self.first(source_image)
        for block in self.down_blocks:
            <span class="hljs-attr">out</span> = block(out)
        return out
</code></pre>
<ul>
<li><strong>UTD-MHADæ•°æ®é›†</strong></li>
</ul>
<p>åœ¨è¿™ä¸ªå®ç°ä¸­ï¼Œæˆ‘ä½¿ç”¨UTD-MHADæ•°æ®é›†æ¥è®­ç»ƒæ¨¡å‹çš„ä¸¤ä¸ªé˜¶æ®µã€‚å¯¹äºç¬¬ä¸€é˜¶æ®µï¼Œä»åŒä¸€ä¸ªè§†é¢‘ä¸­éšæœºé‡‡æ ·ä¸¤å¸§ï¼Œä¸€å¸§ä½œä¸ºæºå¸§ï¼Œå¦ä¸€å¸§ä½œä¸ºç›®æ ‡å¸§ã€‚å¯¹äºç¬¬äºŒé˜¶æ®µï¼Œéšæœºé€‰æ‹©ä¸€ä¸ªè§†é¢‘ï¼Œå¹¶æå–ä¸€ä¸ªè¿ç»­çš„40å¸§åºåˆ—ä½œä¸ºæ¨¡å‹è¾“å…¥ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">from PIL import Image
from decord import VideoReader, cpu
class UTDDataset(Dataset):
    def __init__(self,
                 <span class="hljs-attr">root</span>=<span class="hljs-string">"/content/drive/MyDrive/LFDM_data"</span>,
                 <span class="hljs-attr">image_size</span>=<span class="hljs-number">128</span>,
                 <span class="hljs-attr">mode</span>=<span class="hljs-string">"stage1"</span>,
                 <span class="hljs-attr">clip_len</span>=<span class="hljs-number">40</span>):
        super().__init__()
        assert mode in <span class="hljs-section">["stage1", "stage2"]</span>
        
        <span class="hljs-attr">self.mode</span> = mode
        <span class="hljs-attr">self.clip_len</span> = clip_len
        <span class="hljs-attr">self.video_files</span> = sorted(glob(os.path.join(root, <span class="hljs-string">"**"</span>, <span class="hljs-string">"*.avi"</span>), recursive=<span class="hljs-literal">True</span>))
        
        <span class="hljs-attr">self.transform</span> = transforms.Compose([
            transforms.Resize((image_size, image_size)),
            transforms.ToTensor(),
        ])
    
    def __len__(self):
        return len(self.video_files)
    
    def __getitem__(self, idx):
        <span class="hljs-comment"># Stage 1: random (x0, xt)</span>
        if <span class="hljs-attr">self.mode</span> == <span class="hljs-string">"stage1"</span>:
            while True:
                <span class="hljs-attr">vid_path</span> = random.choice(self.video_files)
                <span class="hljs-attr">vr</span> = VideoReader(vid_path, ctx=cpu(<span class="hljs-number">0</span>))
                <span class="hljs-attr">n</span> = len(vr)
                if n &lt; 2:
                    continue
                
                i0, <span class="hljs-attr">i1</span> = sorted(random.sample(range(n), <span class="hljs-number">2</span>))
                <span class="hljs-attr">f0</span> = Image.fromarray(vr[i0].asnumpy())
                <span class="hljs-attr">f1</span> = Image.fromarray(vr[i1].asnumpy())
                <span class="hljs-attr">x0</span> = self.transform(f0)
                <span class="hljs-attr">xt</span> = self.transform(f1)
                return x0, xt
        
        <span class="hljs-comment"># Stage 2: clip + action</span>
        <span class="hljs-attr">vid_path</span> = self.video_files[idx]
        <span class="hljs-attr">vr</span> = VideoReader(vid_path, ctx=cpu(<span class="hljs-number">0</span>))
        <span class="hljs-attr">n</span> = len(vr)
        if <span class="hljs-attr">n</span> == <span class="hljs-number">0</span>:
            return self.__getitem__((idx + 1) % len(self.video_files))
        
        <span class="hljs-attr">K</span> = self.clip_len
        if n &gt;= K:
            <span class="hljs-attr">start</span> = random.randint(<span class="hljs-number">0</span>, n - K)
            <span class="hljs-attr">indices</span> = range(start, start + K)
        else:
            <span class="hljs-attr">indices</span> = sorted(random.choices(range(n), k=K))
        
        <span class="hljs-attr">frames</span> = []
        for i in indices:
            <span class="hljs-attr">img</span> = Image.fromarray(vr[i].asnumpy())
            frames.append(self.transform(img))
        
        <span class="hljs-attr">clip</span> = torch.stack(frames, dim=<span class="hljs-number">1</span>)  <span class="hljs-comment"># (C, K, H, W)</span>
        <span class="hljs-attr">video_name</span> = os.path.basename(vid_path)
        <span class="hljs-attr">action_idx</span> = int(video_name.split(<span class="hljs-string">"_"</span>)[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>:]) - <span class="hljs-number">1</span>  <span class="hljs-comment"># a01 -&gt; 0</span>
        return clip, action_idx
</code></pre>
<ul>
<li><strong>ç¬¬ä¸€é˜¶æ®µè®­ç»ƒå¾ªç¯</strong></li>
</ul>

<ul>
<li>ä»æºå¸§ x0 å’Œç›®æ ‡å¸§ xt ä¸­æå–åŒºåŸŸä¿¡æ¯ã€‚</li>
<li>ä½¿ç”¨æµé¢„æµ‹å™¨é¢„æµ‹å…‰æµå’Œé®æŒ¡å›¾ã€‚</li>
<li>ç”¨é¢„æµ‹çš„è¿åŠ¨æ‰­æ›²æºå¸§ï¼Œå¹¶ä½¿ç”¨ç”Ÿæˆå™¨é‡å»ºç›®æ ‡å¸§ pred_xtã€‚</li>
<li>æµ‹é‡é‡å»ºå¸§ä¸ç›®æ ‡å¸§ä¹‹é—´çš„æ„ŸçŸ¥æŸå¤±ã€‚</li>
</ul>
<p>æ³¨ï¼šä½ ä¹Ÿå¯ä»¥å°è¯•åº”ç”¨ä¸€ä¸ªç­‰å˜æ€§æŸå¤±ï¼Œè¿™å¯ä»¥åŠ å¼ºå‡ ä½•ä¸€è‡´æ€§ï¼Œå¹¶æé«˜å­¦ä¹ åˆ°çš„è¿åŠ¨è¡¨ç¤ºçš„ç¨³å®šæ€§ã€‚</p>
<pre><code class="hljs language-def" lang="def">    x_vgg = vgg(pred)
    y_vgg = vgg(real)
    loss = 0.0
    for i, w in enumerate(per_weights):
        loss = loss + w * torch.abs(x_vgg[i] - y_vgg[i].detach()).mean()
    return loss

region_predictor = RegionPredictor().to(device)
flow_predictor = PixelwiseFlowPredictor().to(device)
generator = Generator().to(device)
total_iters   = 200000
save_interval = 20000

# You may use any pretrained VGG model.
# Here, we use the outputs of the last five layers to compute the perceptual loss.
vgg = Vgg19().to(device)
vgg.eval()  
for p in vgg.parameters():
    p.requires_grad_(False)

dataset = UTDDataset(mode="stage1", image_size=128)
dataloader = DataLoader(
    dataset, 
    batch_size=16, 
    shuffle=True, 
    pin_memory=True, 
    drop_last=True, 
    num_workers=4
)
optimizer = torch.optim.Adam(
    list(region_predictor.parameters()) +
    list(flow_predictor.parameters()) +
    list(generator.parameters()), 
    lr=5e-5, 
    betas=(0.5, 0.999)
)
data_iter = iter(dataloader)
pbar = trange(1, total_iters + 1, desc="Training", dynamic_ncols=True)

for it in pbar:
    try:
        x0, xt = next(data_iter)
    except StopIteration:
        data_iter = iter(dataloader)
        x0, xt = next(data_iter)
    
    x0, xt = x0.to(device, non_blocking=True), xt.to(device, non_blocking=True)
    source_region  = region_predictor(x0)
    driving_region = region_predictor(xt)
    motion = flow_predictor(x0, source_region_params=source_region, driving_region_params=driving_region)             
    generated = generator(x0, motion)
    pred = generated["prediction"]        
    real = xt
    
    perc = perceptual_loss(vgg, pred, real)
    optimizer.zero_grad(set_to_none=True)
    perc.backward()
    optimizer.step()
    
    # ---- save ----
    if it % save_interval == 0:
        ckpt = {
            "it": it,
            "region_predictor": region_predictor.state_dict(),
            "flow_predictor": flow_predictor.state_dict(),
            "generator": generator.state_dict(),
            "optimizer": optimizer.state_dict(),
        }
        torch.save(ckpt, f"stage1_ckpt_{it:06d}.pt")
</code></pre>
<h2 data-id="heading-5"><strong>LFDMç¬¬äºŒé˜¶æ®µè®­ç»ƒ</strong></h2>
<p>ç»ˆäºåˆ°äº†æœ€åä¸€æ­¥ã€‚æˆ‘ä»¬ç°åœ¨è¦åšçš„äº‹æƒ…å¾ˆç®€å•ï¼šè®­ç»ƒä¸€ä¸ªç”Ÿæˆæ¨¡å‹ï¼Œèƒ½å¤Ÿç”Ÿæˆåˆç†çš„éšå¼æµåºåˆ—ï¼Œå…¶å½¢çŠ¶ä¸ºï¼š</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ddb1468248648038af2e759f4ef30dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380682&amp;x-signature=%2F%2Fszc%2Fq%2BfRXYEjPaT4xMtiewEBs%3D" alt="screenshot_2026-01-06_15-39-55.png" loading="lazy"/></p>
<p>åˆ°äº†è¿™ä¸€æ­¥ï¼Œå¤§éƒ¨åˆ†å›°éš¾çš„å·¥ä½œå·²ç»å®Œæˆäº†ã€‚ä½¿ç”¨MRAAé£æ ¼çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å·²ç»åˆ†ç¦»äº†ç©ºé—´ç»“æ„ï¼Œå¹¶å°†åŸå§‹å›¾åƒå‹ç¼©åˆ°äº†ä¸€ä¸ªä½ç»´éšå¼ç©ºé—´ã€‚å› æ­¤ï¼Œæ¨¡å‹ä¸å†éœ€è¦å…³å¿ƒå¤–è§‚â€”â€”å®ƒåªéœ€è¦å­¦ä¹ è¿åŠ¨å¦‚ä½•éšæ—¶é—´æ¼”åŒ–ã€‚</p>
<p>æˆ‘ä»¬ç°åœ¨å¯ä»¥å°†éšå¼æµåºåˆ—è§†ä¸ºä¸€ä¸ª3Dä½“ç§¯ï¼Œå¹¶ä½¿ç”¨æ‰©æ•£æ¨¡å‹æ¥ç”Ÿæˆå®ƒã€‚å½“ç„¶ï¼Œæ‰©æ•£æ¨¡å‹ä¸æ˜¯å”¯ä¸€çš„é€‰æ‹©â€”â€”æ•´æµæµã€Transformeræˆ–GANsåœ¨è¿™é‡Œä¹Ÿèƒ½å¾ˆå¥½åœ°å·¥ä½œã€‚</p>
<p>æ³¨ï¼šåœ¨æˆ‘çš„å®ç°ä¸­ï¼Œæˆ‘ä½¿ç”¨äº†â€œä¿®æ­£æµâ€è€Œä¸æ˜¯æ‰©æ•£æ¨¡å‹ï¼Œå› ä¸ºå®ƒæ›´å®¹æ˜“å®ç°ä¸”æ”¶æ•›æ›´å¿«ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> ...
<span class="hljs-keyword">from</span> einops <span class="hljs-keyword">import</span> rearrange

<span class="hljs-keyword">class</span> <span class="hljs-title class_">TemporalSelfAttention</span>(nn.Module):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, dim, heads=<span class="hljs-number">8</span>, max_frames=<span class="hljs-number">64</span>, dropout=<span class="hljs-number">0.0</span></span>):
        <span class="hljs-built_in">super</span>().__init__()
        self.max_frames = max_frames
        self.pos_emb = nn.Embedding(max_frames, dim)
        self.attn = nn.MultiheadAttention(dim, heads, dropout=dropout, batch_first=<span class="hljs-literal">True</span>)
   
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):
        b, c, f, h, w = x.shape
        <span class="hljs-keyword">if</span> f &gt; self.max_frames:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f"num_frames=<span class="hljs-subst">{f}</span> exceeds max_frames=<span class="hljs-subst">{self.max_frames}</span>"</span>)
        
        x_seq = rearrange(x, <span class="hljs-string">'b c f h w -&gt; (b h w) f c'</span>)   <span class="hljs-comment"># (BHW, F, C)</span>
        pos = torch.arange(f, device=x.device)
        x_seq = x_seq + self.pos_emb(pos).unsqueeze(<span class="hljs-number">0</span>)     <span class="hljs-comment"># (BHW, F, C)</span>
        out, _ = self.attn(x_seq, x_seq, x_seq, need_weights=<span class="hljs-literal">False</span>)
        out = rearrange(out, <span class="hljs-string">'(b h w) f c -&gt; b c f h w'</span>, b=b, h=h, w=w)
        <span class="hljs-keyword">return</span> out

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SinusoidalPosEmb</span>(nn.Module):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, dim</span>):
        <span class="hljs-built_in">super</span>().__init__()
        self.dim = dim
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):
        device = x.device
        half_dim = self.dim // <span class="hljs-number">2</span>
        emb = math.log(<span class="hljs-number">10000</span>) / (half_dim - <span class="hljs-number">1</span>)
        emb = torch.exp(torch.arange(half_dim, device=device) * -emb)
        emb = x[:, <span class="hljs-literal">None</span>] * emb[<span class="hljs-literal">None</span>, :]
        emb = torch.cat((emb.sin(), emb.cos()), dim=-<span class="hljs-number">1</span>)
        <span class="hljs-keyword">return</span> emb

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Residual</span>(nn.Module):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, fn</span>):
        <span class="hljs-built_in">super</span>().__init__()
        self.fn = fn
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x, *args, **kwargs</span>):
        <span class="hljs-keyword">return</span> self.fn(x, *args, **kwargs) + x

<span class="hljs-keyword">def</span> <span class="hljs-title function_">Upsample</span>(<span class="hljs-params">dim, padding_mode=<span class="hljs-string">"reflect"</span></span>):
    <span class="hljs-keyword">return</span> nn.Sequential(
        nn.Upsample(scale_factor=(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>), mode=<span class="hljs-string">'nearest'</span>),
        nn.Conv3d(dim, dim, (<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), (<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), padding_mode=padding_mode)
    )

<span class="hljs-keyword">def</span> <span class="hljs-title function_">Downsample</span>(<span class="hljs-params">dim</span>):
    <span class="hljs-keyword">return</span> nn.Conv3d(dim, dim, (<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>), (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>), (<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>))

<span class="hljs-keyword">class</span> <span class="hljs-title class_">NormAttn</span>(nn.Module):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, norm, attn</span>):
        <span class="hljs-built_in">super</span>().__init__()
        self.norm = norm
        self.attn = attn
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):
        <span class="hljs-keyword">return</span> self.attn(self.norm(x))

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ResnetBlock</span>(nn.Module):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, dim, dim_out, *, time_emb_dim=<span class="hljs-literal">None</span>, groups=<span class="hljs-number">8</span></span>):
        <span class="hljs-built_in">super</span>().__init__()
        <span class="hljs-keyword">if</span> time_emb_dim <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
            self.mlp = <span class="hljs-literal">None</span>
        <span class="hljs-keyword">else</span>:
            self.mlp = nn.Sequential(
                nn.SiLU(),
                nn.Linear(time_emb_dim, dim_out * <span class="hljs-number">2</span>)
            )
        self.conv1 = nn.Conv3d(dim, dim_out, (<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>), padding=(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>))
        self.norm1 = nn.GroupNorm(groups, dim_out)
        self.act1  = nn.SiLU()
        self.conv2 = nn.Conv3d(dim_out, dim_out, (<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>), padding=(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>))
        self.norm2 = nn.GroupNorm(groups, dim_out)
        self.act2  = nn.SiLU()
        self.res_conv = nn.Conv3d(dim, dim_out, <span class="hljs-number">1</span>) <span class="hljs-keyword">if</span> dim != dim_out <span class="hljs-keyword">else</span> nn.Identity()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x, time_emb=<span class="hljs-literal">None</span></span>):
        scale = shift = <span class="hljs-literal">None</span>
        <span class="hljs-keyword">if</span> self.mlp <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
            t = self.mlp(time_emb)
            t = rearrange(t, <span class="hljs-string">'b c -&gt; b c 1 1 1'</span>)
            scale, shift = t.chunk(<span class="hljs-number">2</span>, dim=<span class="hljs-number">1</span>)
        
        h = self.conv1(x)
        h = self.norm1(h)
        <span class="hljs-keyword">if</span> scale <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
            h = h * (scale + <span class="hljs-number">1</span>) + shift
        h = self.act1(h)
        h = self.conv2(h)
        h = self.norm2(h)
        h = self.act2(h)
        <span class="hljs-keyword">return</span> h + self.res_conv(x)
</code></pre>
<p>ä»¥ä¸Šæ˜¯U-Netæ¨¡å‹çš„ä¸€äº›å…³é”®æ¨¡å—ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªæ—¶é—´æ³¨æ„åŠ›æ¨¡å—ï¼Œé€šè¿‡å…³æ³¨æ—¶é—´ï¼ˆå¸§ï¼‰ç»´åº¦æ¥æ›´å¥½åœ°ä¿æŒæ—¶é—´ä¸€è‡´æ€§ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">class Unet3D(nn.Module):
    def __init__(self, <span class="hljs-attr">dim</span>=<span class="hljs-number">64</span>, num_classes=<span class="hljs-number">28</span>, cond_embed_dim=<span class="hljs-number">128</span>, dim_mults=(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">8</span>),
                 <span class="hljs-attr">channels</span>=<span class="hljs-number">3</span> + <span class="hljs-number">256</span>, attn_heads=<span class="hljs-number">8</span>, max_frames=<span class="hljs-number">64</span>, init_kernel_size=<span class="hljs-number">7</span>, resnet_groups=<span class="hljs-number">8</span>):
        super().__init__()
        <span class="hljs-attr">self.channels</span> = channels
        <span class="hljs-attr">init_dim</span> = dim
        <span class="hljs-attr">init_padding</span> = init_kernel_size // <span class="hljs-number">2</span>
        <span class="hljs-attr">self.init_conv</span> = nn.Conv3d(
            channels, init_dim,
            <span class="hljs-attr">kernel_size</span>=(<span class="hljs-number">1</span>, init_kernel_size, init_kernel_size),
            <span class="hljs-attr">padding</span>=(<span class="hljs-number">0</span>, init_padding, init_padding),
            <span class="hljs-attr">padding_mode</span>=<span class="hljs-string">"zeros"</span>
        )
        
        <span class="hljs-attr">self.init_norm</span> = nn.GroupNorm(<span class="hljs-number">1</span>, init_dim, eps=<span class="hljs-number">1</span>e-<span class="hljs-number">5</span>)
        <span class="hljs-attr">self.init_attn</span> = TemporalSelfAttention(init_dim, heads=attn_heads, max_frames=max_frames)
        <span class="hljs-attr">self.init_attn_res</span> = Residual(lambda x: self.init_attn(self.init_norm(x)))
        <span class="hljs-attr">dims</span> = [init_dim] + [dim * m for m in dim_mults]
        <span class="hljs-attr">in_out</span> = list(zip(dims[:-<span class="hljs-number">1</span>], dims[<span class="hljs-number">1</span>:]))
        <span class="hljs-attr">num_resolutions</span> = len(in_out)
        
        <span class="hljs-comment"># time embedding</span>
        <span class="hljs-attr">time_dim</span> = dim * <span class="hljs-number">4</span>
        <span class="hljs-attr">self.time_mlp</span> = nn.Sequential(
            SinusoidalPosEmb(dim),
            nn.Linear(dim, time_dim),
            nn.GELU(),
            nn.Linear(time_dim, time_dim)
        )
        
        <span class="hljs-comment"># class embedding</span>
        <span class="hljs-attr">self.cond_emb</span> = nn.Embedding(num_classes, cond_embed_dim)
        <span class="hljs-attr">cond_dim</span> = time_dim + cond_embed_dim
        
        <span class="hljs-attr">block_klass</span> = partial(ResnetBlock, groups=resnet_groups)
        <span class="hljs-attr">block_klass_cond</span> = partial(block_klass, time_emb_dim=cond_dim)
        <span class="hljs-attr">self.downs</span> = nn.ModuleList([])
        <span class="hljs-attr">self.ups</span> = nn.ModuleList([])
        
        for ind, (dim_in, dim_out) in enumerate(in_out):
            <span class="hljs-attr">is_last</span> = ind &gt;= (num_resolutions - <span class="hljs-number">1</span>)
            <span class="hljs-attr">norm</span> = nn.GroupNorm(<span class="hljs-number">1</span>, dim_out, eps=<span class="hljs-number">1</span>e-<span class="hljs-number">5</span>)
            <span class="hljs-attr">attn</span> = TemporalSelfAttention(dim_out, heads=attn_heads, max_frames=max_frames)
            <span class="hljs-attr">attn_res</span> = Residual(NormAttn(norm, attn))
            
            self.downs.append(nn.ModuleList(<span class="hljs-section">[
                block_klass_cond(dim_in, dim_out),
                block_klass_cond(dim_out, dim_out),
                attn_res,
                Downsample(dim_out) if not is_last else nn.Identity()
            ]</span>))
        
        <span class="hljs-attr">mid_dim</span> = dims[-<span class="hljs-number">1</span>]
        <span class="hljs-attr">self.mid_block1</span> = block_klass_cond(mid_dim, mid_dim)
        <span class="hljs-attr">norm</span> = nn.GroupNorm(<span class="hljs-number">1</span>, mid_dim, eps=<span class="hljs-number">1</span>e-<span class="hljs-number">5</span>)
        <span class="hljs-attr">attn</span> = TemporalSelfAttention(mid_dim, heads=attn_heads, max_frames=max_frames)
        <span class="hljs-attr">self.mid_attn_res</span> = Residual(NormAttn(norm, attn))
        <span class="hljs-attr">self.mid_block2</span> = block_klass_cond(mid_dim, mid_dim)
        
        for ind, (dim_in, dim_out) in enumerate(reversed(in_out)):
            <span class="hljs-attr">is_last</span> = ind &gt;= (num_resolutions - <span class="hljs-number">1</span>)
            <span class="hljs-attr">norm</span> = nn.GroupNorm(<span class="hljs-number">1</span>, dim_in, eps=<span class="hljs-number">1</span>e-<span class="hljs-number">5</span>)
            <span class="hljs-attr">attn</span> = TemporalSelfAttention(dim_in, heads=attn_heads, max_frames=max_frames)
            <span class="hljs-attr">attn_res</span> = Residual(NormAttn(norm, attn))
            
            self.ups.append(nn.ModuleList(<span class="hljs-section">[
                block_klass_cond(dim_out * 2, dim_in),
                block_klass_cond(dim_in, dim_in),
                attn_res,
                Upsample(dim_in, padding_mode="zeros") if not is_last else nn.Identity()
            ]</span>))
        
        <span class="hljs-attr">self.out</span> = nn.Sequential(
            block_klass(dim * 2, dim),
            nn.Conv3d(dim, 3, 1)
        )
    
    def forward(self, x, time, cond):
        <span class="hljs-attr">device</span> = x.device
        <span class="hljs-attr">x</span> = self.init_conv(x)
        <span class="hljs-attr">r</span> = x.clone()
        <span class="hljs-attr">x</span> = self.init_attn_res(x)
        <span class="hljs-attr">t</span> = self.time_mlp(time)
        if cond.dim() == 2 and cond.size(-1) == 1:
            <span class="hljs-attr">cond</span> = cond.squeeze(-<span class="hljs-number">1</span>)
        <span class="hljs-attr">cond</span> = cond.long().to(device)
        <span class="hljs-attr">t</span> = torch.cat([t, self.cond_emb(cond)], dim=-<span class="hljs-number">1</span>)
        
        <span class="hljs-attr">h</span> = [] <span class="hljs-comment"># unet</span>
        for block1, block2, attn_res, downsample in self.downs:
            <span class="hljs-attr">x</span> = block1(x, t)
            <span class="hljs-attr">x</span> = block2(x, t)
            <span class="hljs-attr">x</span> = attn_res(x)
            h.append(x)
            <span class="hljs-attr">x</span> = downsample(x)

        <span class="hljs-attr">x</span> = self.mid_block1(x, t)
        <span class="hljs-attr">x</span> = self.mid_attn_res(x)
        <span class="hljs-attr">x</span> = self.mid_block2(x, t)
        
        for block1, block2, attn_res, upsample in self.ups:
            <span class="hljs-attr">x</span> = torch.cat([x, h.pop()], dim=<span class="hljs-number">1</span>)
            <span class="hljs-attr">x</span> = block1(x, t)
            <span class="hljs-attr">x</span> = block2(x, t)
            <span class="hljs-attr">x</span> = attn_res(x)
            <span class="hljs-attr">x</span> = upsample(x)
        <span class="hljs-attr">x</span> = torch.cat([x, r], dim=<span class="hljs-number">1</span>)
        return self.out(x)
</code></pre>
<p>get_latent_flow_residual å‡½æ•°æ”¶é›†æºå¸§ä¸æ‰€æœ‰å…¶ä»–å¸§ä¹‹é—´çš„æµã€‚å®ƒè¿˜è¾“å‡ºæºå¸§çš„ç‰¹å¾å›¾ï¼Œç”¨ä½œU-Netçš„æ¡ä»¶è¾“å…¥ã€‚</p>
<pre><code class="hljs language-@torch.no_grad()" lang="@torch.no_grad()">def get_latent_flow_residual(x, region_predictor, flow_predictor, generator):
    b, _, T, H, W = x.shape
    source_img = x[:, :, 0]  # (B,3,H,W)
    flow_list = []
    conf_list = []
    source_region = region_predictor(source_img)
    for t in range(T):
        driving_img = x[:, :, t]
        driving_region = region_predictor(driving_img)
        flow_motion = flow_predictor(
            source_img,
            source_region_params=source_region,
            driving_region_params=driving_region
        )
        grid = flow_motion["optical_flow"]  
        conf = flow_motion["occlusion_map"] 
        flow_list.append(grid)  # keep (B,H,W,2)
        conf_list.append(conf)
    
    fea = generator.compute_fea(source_img) 
    grid = torch.stack(flow_list, dim=1)  # (B,T,H,W,2)
    conf = torch.stack(conf_list, dim=2)  # (B,1,T,H,W)
    id_grid = make_coordinate_grid((32, 32), grid.dtype).to(grid.device)
    id_grid = id_grid.unsqueeze(0).repeat(b, 1, 1, 1)
    id_grid = id_grid.unsqueeze(1).repeat(1, T, 1, 1, 1) 
    delta = grid - id_grid  
    
    delta = delta.permute(0, 4, 1, 2, 3).contiguous()
    conf = conf * 2 - 1   # conf to [-1,1]
    out = torch.cat([delta, conf], dim=1)  
    # fea repeat on T (B,C,Hf,Wf)-&gt;(B,C,T,Hf,Wf)
    fea = fea.unsqueeze(2).repeat(1, 1, T, 1, 1)
    return out, fea

from torchdiffeq import odeint
class RectifiedFlow(nn.Module):
    def __init__(self, unet, p_uncond=0.25, null_label_id=27):
        super().__init__()
        self.unet = unet
        self.p_uncond = p_uncond
        self.null_label_id = null_label_id
    
    def forward(self, x0, fea, label):
        B = x0.size(0)
        device = x0.device
        # Classified Free Guidence
        if (self.null_label_id is not None) and (self.p_uncond &gt; 0):
            drop = torch.rand(B, device=device) &lt; self.p_uncond
            label = label.clone()
            label[drop] = self.null_label_id
        
        t = torch.rand(B, device=device) # (B,)
        t_view = t.view(B, 1, 1, 1, 1)
        x1 = torch.randn_like(x0)
        x_t = (1.0 - t_view) * x1 + t_view * x0
        v_gt = x0 - x1
        
        x_in = torch.cat([x_t, fea], dim=1) # (B, C+C_fea, F, H, W)
        v_pred = self.unet(x_in, t, label)
        loss = F.mse_loss(v_pred, v_gt)
        return loss

@torch.no_grad()
def rf_sample_target(model, fea, label,  device, steps=40):
    # You can use this function to get the latent flow
    # and use the 'decoder' in Generator to recover the video back
    B = label.size(0)
    x0 = torch.randn(B, 3, 40, 32, 32, device=device)
    def func(t, x):
        t_vec = torch.full((B,), float(t), device=device)
        x_in = torch.cat([x, fea], dim=1)
        v = model(x_in, t_vec, label)
        return v
    
    t_span = torch.linspace(0.0, 1.0, steps + 1, device=device)
    x_traj = odeint(func, x0, t_span, method="rk4", rtol=1e-5, atol=1e-5)
    x1 = x_traj[-1]
    x1 = x1.clamp(-1, 1)
    return x1, x0
</code></pre>
<ul>
<li><strong>æ— åˆ†ç±»å™¨å¼•å¯¼</strong></li>
</ul>
<p>å¯¹äºè§†é¢‘ç”Ÿæˆï¼Œä»…ä»…ä½¿ç”¨ä¸€ä¸ªæ ‡ç­¾æ¥æ§åˆ¶è¾“å‡ºé€šå¸¸æ˜¯ä¸å¤Ÿçš„ã€‚æ ‡ç­¾åªå‘Šè¯‰æ¨¡å‹è¦ç”Ÿæˆä»€ä¹ˆåŠ¨ä½œï¼Œä½†å®ƒæ²¡æœ‰è§£é‡Šè¿™ä¸ªåŠ¨ä½œåº”è¯¥å¦‚ä½•éšæ—¶é—´æ¼”åŒ–ã€‚</p>
<p>å› æ­¤ï¼Œæ¨¡å‹åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å¾ˆå®¹æ˜“èµ°æ·å¾„ï¼Œç”Ÿæˆä¸€ä¸ªä»…ä»…â€œçœ‹èµ·æ¥åœ¨åŠ¨â€çš„åºåˆ—ï¼Œè€Œæ²¡æœ‰çœŸæ­£éµå¾ªç»™å®šæ ‡ç­¾çš„è¯­ä¹‰å«ä¹‰ã€‚æ¢å¥è¯è¯´ï¼Œæ¡ä»¶ä¿¡å·å¤ªå¼±äº†ï¼Œæ‰€ä»¥æ¨¡å‹å¯ä»¥è½»æ˜“å¿½ç•¥å®ƒã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9774a72cb6214a46a0e2306a7bb30290~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380682&amp;x-signature=QpKsWXOFpFO12K6JHS61A5gbDOQ%3D" alt="screenshot_2026-01-06_15-41-47.png" loading="lazy"/></p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¼•å…¥æ— åˆ†ç±»å™¨å¼•å¯¼æ¥è®©æ ‡ç­¾æ›´é‡è¦ã€‚CFGé€šè¿‡åœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­æ”¾å¤§æ¡ä»¶çš„å½±å“ï¼Œæ˜ç¡®åœ°åŠ å¼ºäº†æ¡ä»¶çš„çº¦æŸåŠ›ï¼Œè¿«ä½¿æ¨¡å‹éµå¾ªæ ‡ç­¾ï¼Œè€Œä¸æ˜¯é€€å›åˆ°é€šç”¨çš„ã€æ— æ¡ä»¶çš„è¿åŠ¨ã€‚è¿™å¯¹äºè§†é¢‘ç”Ÿæˆå°¤å…¶é‡è¦ï¼Œå› ä¸ºå¯èƒ½çš„è¿åŠ¨ç©ºé—´æ¯”å›¾åƒå¤§å¾—å¤šã€‚</p>
<p>æ³¨ï¼šåœ¨å®è·µä¸­ï¼ŒCFGéå¸¸å®¹æ˜“å®ç°ã€‚åªéœ€æ·»åŠ ä¸€ä¸ªé¢å¤–çš„ç±»åˆ«æ¥è¡¨ç¤ºç©ºï¼ˆæ— æ¡ä»¶ï¼‰æ¡ä»¶ï¼Œå¹¶åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­éšæœºä¸¢å¼ƒåŸå§‹æ ‡ç­¾ã€‚</p>
<pre><code class="hljs language-device" lang="device">best_path = "Your pretrain model"
ckpt = torch.load(best_path, map_location=device)
generator.load_state_dict(ckpt["generator"])
region_predictor.load_state_dict(ckpt["region_predictor"])
flow_predictor.load_state_dict(ckpt["flow_predictor"])

unet = Unet3D()
rf_model = RectifiedFlow(unet).to(device)
dataset = UTDDataset(mode='stage2)
optimizer = torch.optim.Adam(list(unet.parameters()), lr=1e-4, betas=(0.9, 0.999))
dataloader = torch.utils.data.DataLoader(dataset, batch_size=4, shuffle=True, num_workers=4)

total_iters = 200000
log_interval = 20000
running_loss = 0.0
loss_history = []
iter_history = []

generator.eval()
region_predictor.eval()
flow_predictor.eval()
unet.train()
data_iter = iter(dataloader)
pbar = trange(1, total_iters + 1, desc="Training", dynamic_ncols=True)

for it in pbar:
    try:
        clip, label = next(data_iter)
    except StopIteration:
        data_iter = iter(dataloader)
        clip, label = next(data_iter)
    
    clip, label = clip.to(device), label.to(device)
    B = clip.size(0)
    
    flow, fea = get_latent_flow_residual(clip, region_predictor, flow_predictor, generator)
    loss = rf_model(flow, fea, label)
    optimizer.zero_grad()
    loss.backward()
    
    torch.nn.utils.clip_grad_norm_(unet.parameters(), 1.0)
    optimizer.step()
    ema_update(ema_unet, unet, beta=0.995)
    running_loss += loss.item()
    pbar.set_postfix({"loss": f"{loss.item():.4f}"})
    
    if it % log_interval == 0:
        avg_loss = running_loss / log_interval
        pbar.write(f"[Iter {it}] loss = {avg_loss:.4f}")
        iter_history.append(it)
        loss_history.append(avg_loss)
        running_loss = 0.0

        torch.save(
            {
                "unet": unet.state_dict(),
                "ema_unet": ema_unet.state_dict(),
                "optimizer": optimizer.state_dict(),
                "it": it,
            },
            f"{ckpt_dir}/unet_{it}.pt"
        )
        pbar.write(f"Saved checkpoint at iter {it}")
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç½—æŠ€é¼ æ ‡å› ä¸ºæœåŠ¡å™¨è¯ä¹¦è¿‡æœŸæ— æ³•ä½¿ç”¨ï¼Ÿæˆ‘æ˜¯å¦‚ä½•è§£å†³ SSL è¯ä¹¦é—®é¢˜]]></title>    <link>https://juejin.cn/post/7592236397535346724</link>    <guid>https://juejin.cn/post/7592236397535346724</guid>    <pubDate>2026-01-07T08:54:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592236397535346724" data-draft-id="7592236397535297572" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç½—æŠ€é¼ æ ‡å› ä¸ºæœåŠ¡å™¨è¯ä¹¦è¿‡æœŸæ— æ³•ä½¿ç”¨ï¼Ÿæˆ‘æ˜¯å¦‚ä½•è§£å†³ SSL è¯ä¹¦é—®é¢˜"/> <meta itemprop="keywords" content="å‰ç«¯,Android,Flutter"/> <meta itemprop="datePublished" content="2026-01-07T08:54:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹çŒ«deå°éƒ­"/> <meta itemprop="url" content="https://juejin.cn/user/817692379985752"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç½—æŠ€é¼ æ ‡å› ä¸ºæœåŠ¡å™¨è¯ä¹¦è¿‡æœŸæ— æ³•ä½¿ç”¨ï¼Ÿæˆ‘æ˜¯å¦‚ä½•è§£å†³ SSL è¯ä¹¦é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/817692379985752/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹çŒ«deå°éƒ­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T08:54:26.000Z" title="Wed Jan 07 2026 08:54:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ‰æ—¶å€™ä¸å¾—ä¸è¯´ï¼Œå¤§å®¶éƒ½æ˜¯ä¸€ä¸ªè‰å°ç­å­ï¼Œæƒ³ç ´äº†éƒ½æ²¡ç†è§£ï¼Œè¿™ä¹ˆå¤§çš„ä¼ä¸šå¯ä»¥è¯ä¹¦èƒ½è¿‡æœŸæ²¡å¤„ç†ï¼Œè¿‡æœŸå°±ç®—äº†ï¼Œå…³é”®è¿™æœåŠ¡å™¨è¿‡æœŸä¼šå¯¼è‡´é¼ æ ‡é…ç½®ç”¨ä¸äº†ä¹Ÿæ˜¯é†‰äº†ï¼Œè€Œä¸”èƒ½æŒç»­è¿™ä¹ˆé•¿æ—¶é—´ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd0ed3b843074079a69217c19e27e063~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380865&amp;x-signature=cBfr%2BT%2BUxAzdBDN8YEB%2Fff%2BCF%2Fw%3D" alt="" loading="lazy"/></p>
<p>å½“ç„¶ï¼Œå¯¹äºä¸ªäººæ¥è¯´å…¶å®ä¹Ÿæ˜¯ï¼Œç›¸ä¿¡å¾ˆå¤šäººç”¨çš„éƒ½æ˜¯å…è´¹è¯ä¹¦ï¼Œåœ¨æ­¤ä¹‹å‰å¤§å®¶åº”è¯¥éƒ½æ˜¯ 3 ä¸ªæœˆæ¢ä¸€æ¬¡ï¼Œè€Œå‰æ®µæ—¶é—´ï¼ŒLetâ€™s Encrypt ä¹Ÿå®£å¸ƒäº†å°†å…¨é¢ç¼©çŸ­ TLS/SSL è¯ä¹¦çš„æœ‰æ•ˆæœŸï¼Œ <strong>ä»ç°æœ‰çš„ 90 å¤©è°ƒæ•´ä¸º45 å¤©</strong> ï¼Œè¿™å¯¹äºä¸ªäºº Free ç”¨æˆ·æ¥è¯´ï¼Œæ— ç–‘æ˜¯ç¾éš¾çš„ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/052b9706b5674546aa54355dec2167e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380865&amp;x-signature=%2Bk0Ugg4NkrBCYS%2BMkXieABxM%2BAI%3D" alt="" loading="lazy"/></p>
<p>é‚£æˆ‘æ˜¯æ€ä¹ˆè§£å†³çš„ï¼Ÿå…¶å®ä» Let's Encrypt å°†å…è´¹ SSL è¯ä¹¦æœ‰æ•ˆæœŸç¼©çŸ­åˆ°ä¸‰ä¸ªæœˆä¹‹åï¼Œæˆ‘å°±å¾ˆçƒ¦ SSL è¿™ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥æˆ‘å½“æ—¶æ‰¾äº†ä¸ªè„šæœ¬è§£å†³è¿™ä¸ªï¼Œæ•´ä½“å…¶å®è¿˜æŒºç®€å•çš„ï¼š<strong>Letâ€™s Encrypt + acme.sh ï¼Œå¯ä»¥ 20 åˆ†é’Ÿæå®šä¸¤ä¸ªä¸åŒåœºæ™¯çš„åŸŸå SSL è‡ªåŠ¨æ›´æ–°</strong>ï¼Œä¸å¾—ä¸èµå¹åŠ³åŠ¨äººæ°‘ä¸ºäº† Free çš„æ™ºæ…§ã€‚</p>
<p>é¦–å…ˆæˆ‘æœ‰ä¸¤ä¸ª ssl è¯ä¹¦ï¼š</p>
<ul>
<li>ä¸€ä¸ªæ˜¯ä¸»åŸŸåçš„ï¼ŒåŸŸåçš„ ssl è¯ä¹¦å’Œ dns éƒ½åœ¨è…¾è®¯äº‘ï¼ŒæœåŠ¡å™¨ä¹Ÿæ˜¯è…¾è®¯äº‘çš„ï¼Œè¯ä¹¦ä¹‹å‰æ˜¯æ‰‹åŠ¨éƒ¨ç½²åœ¨æˆ‘æœåŠ¡å™¨å†…çš„ nginx é…ç½®ä¸‹</li>
<li>ä¸€ä¸ªæ˜¯å­åŸŸåçš„ï¼Œimg å­åŸŸåå’Œå…¶å¯¹åº”çš„ ssl ï¼Œæ˜¯ç»™ä¸ƒç‰›äº‘é…ç½®çš„ https åŸŸåæ”¯æŒ</li>
</ul>
<p>åŸºäºè¿™ä¸ªåœºæ™¯ï¼Œæˆ‘ç”¨ <strong>Letâ€™s Encrypt + acme.sh</strong> åšè‡ªåŠ¨ç»­ç­¾ ï¼Œå› ä¸ºå¯¹æ¯” Certbot ï¼Œacme.sh åœ¨å®Œå…¨æ‰‹åŠ¨æ§åˆ¶ nginx é…ç½®ä¸Šæ›´æ–¹ä¾¿ï¼Œè€Œä¸”è½»é‡åˆä¸ä¾èµ– opensslï¼Œé«˜å¯æ§ä¸”ä¸éœ€è¦ä¿®æ”¹æˆ‘ç›®å‰çš„ Nginx é…ç½®ã€‚</p>
<blockquote>
<p>ä¹Ÿ Free ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸»åŸŸå</h2>
<p>å¯¹äºä¸»åŸŸåï¼Œå› ä¸ºæˆ‘ç°åœ¨çš„è¯ä¹¦è·¯å¾„åœ¨æˆ‘æœåŠ¡å™¨çš„ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">/etc/nginx/<span class="hljs-keyword">default</span>.d/<span class="hljs-number">1_</span>XXXX.cn_bundle.crt
/etc/nginx/<span class="hljs-keyword">default</span>.d/<span class="hljs-number">2_</span>XXXX.cn.<span class="hljs-keyword">key</span>
</code></pre>
<p>æ‰€ä»¥æˆ‘éœ€è¦ç¡®ä¿ï¼š</p>
<ul>
<li>æ¯æ¬¡ç»­æœŸåè‡ªåŠ¨è¦†ç›–è¿™ä¸¤ä¸ªæ–‡ä»¶</li>
<li>è‡ªåŠ¨ reload nginx</li>
<li>ä¸ä¼šç ´åç°æœ‰ nginx é…ç½®</li>
<li>Letâ€™s Encrypt çš„ challenge èƒ½æ­£å¸¸èµ° HTTPï¼ˆ 80 ç«¯å£æ˜¯å¯è®¿é—®çš„ï¼‰</li>
</ul>
<p>æ‰€ä»¥å…·ä½“æµç¨‹ä¸ºï¼š</p>
<h3 data-id="heading-1">1ã€å®‰è£… <code>acme.sh</code></h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£… acme.sh</span>
curl https://get.acme.sh | sh
<span class="hljs-comment"># é‡å¯ shell</span>
<span class="hljs-built_in">source</span> ~/.bashrc
</code></pre>
<h3 data-id="heading-2">2ã€é€‚é…é…ç½®</h3>
<p>å› ä¸ºæˆ‘ç°åœ¨çš„ 80 ç«¯å£é…ç½®æ˜¯ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">location /{
 Â  Â rewrite ^(.*) https:<span class="hljs-regexp">//</span>$host$1 permanent;
}
</code></pre>
<p>å¯¹äº <code>acme.sh</code> æ¥è¯´ï¼Œä¼šæ£€æµ‹åˆ° challenge æ— æ³•éªŒè¯ï¼Œæ‰€ä»¥æˆ‘éœ€è¦åœ¨ <strong>80 çš„ server å—ã€æœ€å‰é¢ã€‘åŠ ä¸€æ®µä¾‹å¤–é…ç½®ï¼Œå¿…é¡»æ”¾åœ¨æ‰€æœ‰ rewrite ä¹‹å‰</strong>ï¼ŒæŠŠ acme çš„éªŒè¯æ’é™¤åœ¨è·³è½¬ä¹‹å¤–ï¼Œè¿™é‡Œçš„ <code>/usr/share/nginx/html</code> å°±æ˜¯ nginx é»˜è®¤çš„ server root ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">location ^~ /.well-known/acme-challenge/ {
 Â  Â root /usr/share/nginx/html;
 Â  Â allow all;
}
</code></pre>
<h3 data-id="heading-3">3ã€å¼€å§‹ç­¾å‘</h3>
<p>å› ä¸ºæˆ‘æ˜¯æœ‰ XXXX.cn å’Œ <a href="https://link.juejin.cn?target=www.XXXX.cn" target="_blank" title="www.XXXX.cn" ref="nofollow noopener noreferrer">www.XXXX.cn</a> ä¸¤ä¸ªéœ€è¦è§£æçš„ï¼Œæ‰€ä»¥å‘½ä»¤æ˜¯å¦‚ä¸‹æ‰€ç¤ºï¼Œè¿™é‡Œçš„ <code>/usr/share/nginx/html</code> å°±æ˜¯å‰é¢çš„ server root ï¼š</p>
<pre><code class="hljs language-css" lang="css">acme<span class="hljs-selector-class">.sh</span> <span class="hljs-attr">--issue</span> -d XXXX<span class="hljs-selector-class">.cn</span> -d www<span class="hljs-selector-class">.XXXX</span><span class="hljs-selector-class">.cn</span> -w /usr/share/nginx/<span class="hljs-selector-tag">html</span>
</code></pre>
<p>åœ¨è¿™é‡Œæˆ‘é‡åˆ°äº†ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li><code>acme.sh is using ZeroSSL as default CA now.</code> ï¼Œacme.sh é»˜è®¤æ”¹ç”¨ ZeroSSL å¯¼è‡´å¿…é¡»æ³¨å†Œè´¦å·å¹¶ç»‘å®šé‚®ç®±çš„æç¤ºï¼Œä½ å¯ä»¥é€šè¿‡ <code>acme.sh --register-account -m ä½ çš„é‚®ç®±@example.com</code> æ¥è§£å†³ï¼Œä½†æ˜¯æˆ‘ä¸æƒ³å¼„ï¼Œæ‰€ä»¥æˆ‘ç”¨ <code>acme.sh --set-default-ca --server letsencrypt</code> åˆ‡å› Letâ€™s Encrypt</li>
</ul>

<ul>
<li>
<p><code>curl: (60) SSL certificate problem: unable to get local issuer certificate</code> ï¼Œacme.sh è®¿é—® Letâ€™s Encrypt çš„ API æ—¶ï¼Œç³»ç»Ÿä¿¡ä»»é“¾ä¸å®Œæ•´ï¼ŒCA æ ¹è¯ä¹¦è¿‡æœŸæˆ–ç¼ºå¤±ï¼Œè¿™åœ¨è€ç‰ˆæœ¬ CentOSï¼ˆç‰¹åˆ«æ˜¯ CentOS 7ï¼‰ä¸Šéå¸¸å¸¸è§ï¼Œå› ä¸ºç³»ç»Ÿè‡ªå¸¦çš„ CA bundle å¤ªæ—§äº†ï¼Œæ— æ³•éªŒè¯ Letâ€™s Encrypt çš„æ–°æ ¹è¯ä¹¦ ISRG Root X1ï¼Œè§£å†³æ–¹å¼å°±æ˜¯<strong>æ›´æ–° ca-certificates</strong> ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">Â yum <span class="hljs-keyword">update</span> ca<span class="hljs-operator">-</span>certificates <span class="hljs-operator">-</span>y
Â <span class="hljs-keyword">update</span><span class="hljs-operator">-</span>ca<span class="hljs-operator">-</span>trust
</code></pre>
</li>
</ul>
<p>ç”³è¯·é¢å‘æˆåŠŸåï¼Œ acme.sh ä¼šå‘Šè¯‰ä½ è¯ä¹¦è·¯å¾„ä¸€èˆ¬åœ¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">~<span class="hljs-regexp">/.acme.sh/</span><span class="hljs-variable constant_">XXXX</span>.<span class="hljs-property">cn</span>/
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd6a119100ef4d73812a8a222ebae688~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380865&amp;x-signature=rq%2FP%2FoShse81mdfU4cmdHDZGq8Q%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">4ã€å®‰è£…è¯ä¹¦</h3>
<p>æœ€åï¼Œåªéœ€è¦é€šè¿‡ä»¥ä¸‹å‘½ä»¤ï¼Œå°±å¯ä»¥ç›´æ¥æˆåŠŸå°†é¢å‘çš„è¯ä¹¦è‡ªåŠ¨éƒ¨ç½²å¹¶å®‰è£…åˆ°æŒ‡å®šä½ç½®ï¼ŒåŒæ—¶å¼€å¯äº†å®šæ—¶ä»»åŠ¡ï¼Œ<strong>acme.sh ä¼šè‡ªåŠ¨åˆ›å»º cronï¼Œæ¯ 60 å¤©è‡ªåŠ¨ç»­æœŸï¼Œä¹Ÿä¼šè‡ªåŠ¨ reload Nginx</strong>ï¼Œä¹‹åä¸éœ€è¦åšä»»ä½•å…¶ä»–äº‹æƒ…ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">acme<span class="hljs-selector-class">.sh</span> <span class="hljs-attr">--install-cert</span> -d XXXX<span class="hljs-selector-class">.cn</span> \
<span class="hljs-attr">--key-file</span> /etc/nginx/default<span class="hljs-selector-class">.d</span>/<span class="hljs-number">2</span>_XXXX<span class="hljs-selector-class">.cn</span><span class="hljs-selector-class">.key</span> \
<span class="hljs-attr">--fullchain-file</span> /etc/nginx/default<span class="hljs-selector-class">.d</span>/<span class="hljs-number">1</span>_XXXX<span class="hljs-selector-class">.cn_bundle</span><span class="hljs-selector-class">.crt</span> \
<span class="hljs-attr">--reloadcmd</span> "nginx -s reload"
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6320bde34f34f529f22e0810a4829a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380865&amp;x-signature=4H4KtEOCCK63D1ON4gU%2BIARpzLQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">ç¬¬ä¸‰æ–¹å¹³å°</h2>
<p>å› ä¸ºå›¾åºŠçš„ SSL è¯ä¹¦æ˜¯åœ¨ä¸ƒç‰›äº‘çš„ï¼Œæ‰€ä»¥è¿˜éœ€è¦å¤„ç†ä¸ƒç‰›äº‘çš„è¯ä¹¦é—®é¢˜ï¼Œè¿™ä¹Ÿå¯ä»¥é€šè¿‡ <strong>acme.sh â†’ è‡ªåŠ¨ç»­ç­¾ â†’ è‡ªåŠ¨ä¸Šä¼ åˆ°ä¸ƒç‰›äº‘</strong> æ¥å®ç°å…¨è‡ªåŠ¨åŒ–è¯ä¹¦ç®¡ç†ã€‚</p>
<blockquote>
<p>acme.sh å·²ç»å†…ç½®äº† Qiniu API è‡ªåŠ¨éƒ¨ç½²è¯ä¹¦ï¼ˆdeploy hookï¼‰,åŸºæœ¬çŸ¥åçš„ç¬¬ä¸‰æ–¹å¹³å°éƒ½æœ‰ã€‚</p>
</blockquote>
<p>å› ä¸ºæˆ‘æ˜¯åœ¨è…¾è®¯äº‘çš„åŸŸåï¼Œä½¿ç”¨çš„æ˜¯è…¾è®¯äº‘ DNSï¼ˆDNSPodï¼‰ï¼Œæ‰€ä»¥æˆ‘éœ€è¦ç»“åˆè…¾è®¯äº‘çš„æµç¨‹æ¥å®Œæˆã€‚</p>
<h3 data-id="heading-6">1ã€è·å– DNSPod API Token</h3>
<p>ç™»å½• <a href="https://link.juejin.cn?target=https%3A%2F%2Fconsole.dnspod.cn%2Faccount%2Ftoken" target="_blank" title="https://console.dnspod.cn/account/token" ref="nofollow noopener noreferrer">console.dnspod.cn/account/tokâ€¦</a>ï¼Œåˆ›å»ºä¸€ä¸ª Tokenï¼š</p>
<ul>
<li>Token åç§°ï¼šä»»æ„</li>
<li>æƒé™ï¼šåªéœ€è¦ DNS è¯»å–/å†™å…¥</li>
</ul>
<p>è¿™æ ·æˆ‘ä»¬å¾—åˆ°ï¼š</p>
<ul>
<li><code>DP_Id</code>ï¼ˆIDï¼‰</li>
<li><code>DP_Key</code>ï¼ˆTokenï¼‰</li>
</ul>
<h3 data-id="heading-7">2ã€è·å–ä¸ƒç‰›äº‘ AK/SKï¼ˆç”¨äºè‡ªåŠ¨ä¸Šä¼ è¯ä¹¦ï¼‰</h3>
<p>é€šè¿‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Fportal.qiniu.com%2Fuser%2Fkey" target="_blank" title="https://portal.qiniu.com/user/key" ref="nofollow noopener noreferrer">portal.qiniu.com/user/key</a>ï¼Œè·å¾—ï¼š</p>
<ul>
<li><code>QINIU_AK</code></li>
<li><code>QINIU_SK</code></li>
</ul>
<h3 data-id="heading-8">3ã€ä½¿ç”¨ dns_dp è‡ªåŠ¨ä¸º img.cdn.XXX.cn ç­¾å‘è¯ä¹¦</h3>
<p>é€šè¿‡ä¸‹é¢å‘½ä»¤ï¼Œå°±å¯ä»¥è‡ªåŠ¨ç­¾å‘å¯¹åº”è¯ä¹¦äº†</p>
<pre><code class="hljs language-ini" lang="ini">export <span class="hljs-attr">DP_Id</span>=<span class="hljs-string">"ä½ çš„DP_Id"</span>
export <span class="hljs-attr">DP_Key</span>=<span class="hljs-string">"ä½ çš„DP_Key"</span>
â€‹
acme.sh --issue \
 Â -d img.cdn.XXX.cn \
 Â --dns dns_dp
</code></pre>
<h3 data-id="heading-9">4ã€æ‰§è¡Œéƒ¨ç½²</h3>
<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæ‰§è¡ŒæˆåŠŸåï¼Œä¸ƒç‰› CDN çš„ img.cdn.XXX.cn çš„ HTTPS é…ç½®ä¼šè‡ªåŠ¨æ›¿æ¢æˆ <code>acme.sh</code> çš„æ–°è¯ä¹¦</p>
<pre><code class="hljs language-ini" lang="ini">export <span class="hljs-attr">QINIU_AK</span>=<span class="hljs-string">"ä½ çš„ä¸ƒç‰›AK"</span>
export <span class="hljs-attr">QINIU_SK</span>=<span class="hljs-string">"ä½ çš„ä¸ƒç‰›SK"</span>
â€‹
acme.sh --deploy \
 Â -d img.cdn.XXX.cn \
 Â --deploy-hook qiniu
</code></pre>
<p>ä¹‹å <code>acme.sh</code> ä¼šæ¯ 60 å¤©è‡ªåŠ¨ç»­ç­¾ Let's Encrypt è¯ä¹¦ï¼Œè‡ªåŠ¨è¿è¡Œ qiniu deploy hookï¼Œè‡ªåŠ¨ä¸Šä¼ è¯ä¹¦åˆ°ä¸ƒç‰› CDNï¼Œå†ä¹Ÿä¸éœ€è¦å†æ‰‹åŠ¨ç™»å½•ä¸ƒç‰›äº‘ä¸Šä¼ è¯ä¹¦ã€‚</p>
<p>å®é™…ä¸Šå¦‚æœæ˜¯é˜¿é‡Œäº‘ä¹Ÿç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">export <span class="hljs-attr">Ali_Key</span>=<span class="hljs-string">"ä½ çš„é˜¿é‡Œäº‘AccessKeyId"</span>
export <span class="hljs-attr">Ali_Secret</span>=<span class="hljs-string">"ä½ çš„é˜¿é‡Œäº‘AccessKeySecret"</span>
â€‹
acme.sh --issue \
 Â -d img.cdn.XXX.cn \
 Â --dns dns_ali
</code></pre>
<blockquote>
<p>åŸºæœ¬å„å¤§å¹³å°éƒ½æ”¯æŒã€‚</p>
</blockquote>
<h2 data-id="heading-10">æœ€å</h2>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå®é™…æ“ä½œèµ·æ¥è¿˜æ˜¯æŒºç®€å•çš„ï¼Œè€Œä¸”æ˜¯åœ¨ä½ è‡ªå·±çš„æœåŠ¡å™¨ï¼Œå®‰å…¨é—®é¢˜ä¹Ÿæ¯”ä½¿ç”¨ç¬¬ä¸‰æ–¹å¹³å°æˆ–è€…é¢æ¿æ›´å¯æ§ï¼Œä¹‹åï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ <code>acme.sh</code> ç®¡ç†çš„è¯ä¹¦çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-css" lang="css">acme<span class="hljs-selector-class">.sh</span> <span class="hljs-attr">--list</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/14fc44bd1fca4090afaba1d45e65a039~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380865&amp;x-signature=%2FoJwtGUHVtQJHH70F1QUi9yN8hg%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœä½ æƒ³å¼ºåˆ¶ç«‹å³ç»­ç­¾ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®Œæˆï¼š</p>
<pre><code class="hljs language-css" lang="css">cme<span class="hljs-selector-class">.sh</span> <span class="hljs-attr">--renew</span> -d <span class="hljs-selector-tag">img</span><span class="hljs-selector-class">.cdn</span><span class="hljs-selector-class">.XXX</span><span class="hljs-selector-class">.cn</span> <span class="hljs-attr">--force</span>
</code></pre>
<p>å¦å¤– <code>acme.sh</code> çš„<strong>è‡ªåŠ¨ç»­ç­¾å®Œå…¨ä¸ä¾èµ– systemd æœåŠ¡</strong>ï¼Œå®ƒæ˜¯é€šè¿‡ <strong>cron å®šæ—¶ä»»åŠ¡</strong> æ¥å®ç°çš„ï¼Œä¹Ÿå°±æ˜¯å°±ç®—æœåŠ¡å™¨é‡å¯ï¼Œåªè¦ cron æœåŠ¡æ˜¯ç³»ç»Ÿè‡ªå¸¦å¹¶é»˜è®¤å¯åŠ¨çš„ï¼Œç»­ç­¾ä»»åŠ¡ä¹Ÿä¼šç»§ç»­æŒ‰è®¡åˆ’è¿è¡Œï¼Œä¸éœ€è¦æ‰‹åŠ¨æ¢å¤ã€‚</p>
<blockquote>
<p>æ­£å¸¸æ¥è¯´ï¼Œcron ä½œä¸º Linux é»˜è®¤æ ¸å¿ƒæœåŠ¡ï¼Œé‡å¯åä¸€èˆ¬éƒ½æ˜¯ä¼šè‡ªåŠ¨æ¢å¤ã€‚</p>
</blockquote>
<p>å¦‚æœè¿˜æœ‰ä»€ä¹ˆå·®å¼‚æ€§éœ€æ±‚ï¼Œé€šè¿‡ AI ä¹Ÿå¯ä»¥çœ‹å¿«é€Ÿè§£å†³ï¼Œå¯ä»¥è¯´ Letâ€™s Encrypt + acme.sh èŠ±è´¹äº†æˆ‘ 20 åˆ†é’Ÿçš„æ—¶é—´ï¼Œå°±è§£å†³äº†æˆ‘è›‹ç–¼äº†ä¸€å¹´çš„é—®é¢˜ï¼Œå¯¹äºæ‡’äººæ¥æ”¶è¿˜æ˜¯ååˆ†ä¸é”™çš„é€‰æ‹©ã€‚</p>
<blockquote>
<p>å¯¹äºä¼ä¸šæ¥è¯´ï¼Œå¯èƒ½æœ‰è´¢åŠ¡å’Œå®‰å…¨è€ƒè™‘é—®é¢˜ï¼Œå¯¹äºä¸ªäººï¼ŒåŸºæœ¬ç’ä½ã€‚</p>
</blockquote>
<p>å¦å¤–æœ‰ä¸ªå†·çŸ¥è¯†ï¼Œ<strong>å…¶å®å®‰å“çš„ APK è¯ä¹¦ä¹Ÿæ˜¯ä¹Ÿæœ‰æœ‰æ•ˆæœŸçš„ï¼Œåªæ˜¯ä¸€èˆ¬æ¥è¯´ï¼Œå¯èƒ½ä¼ä¸šå€’é—­äº†è¯ä¹¦è¿˜æ²¡åˆ°</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI æµå¼å¯¹è¯è¯¥æ€ä¹ˆåšï¼ŸSSEã€fetchã€axios ä¸€æ¬¡è®²æ¸…æ¥š]]></title>    <link>https://juejin.cn/post/7592170706026987555</link>    <guid>https://juejin.cn/post/7592170706026987555</guid>    <pubDate>2026-01-07T08:56:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592170706026987555" data-draft-id="7592531796038828066" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI æµå¼å¯¹è¯è¯¥æ€ä¹ˆåšï¼ŸSSEã€fetchã€axios ä¸€æ¬¡è®²æ¸…æ¥š"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-07T08:56:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Sailing"/> <meta itemprop="url" content="https://juejin.cn/user/307518988100237"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI æµå¼å¯¹è¯è¯¥æ€ä¹ˆåšï¼ŸSSEã€fetchã€axios ä¸€æ¬¡è®²æ¸…æ¥š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/307518988100237/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Sailing
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T08:56:14.000Z" title="Wed Jan 07 2026 08:56:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨åš <strong>AI å¯¹è¯äº§å“</strong> æ—¶ï¼Œå¾ˆå¤šäººéƒ½ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼š</p>
<blockquote>
<p><strong>ä¸ºä»€ä¹ˆæœ‰çš„å®ç°èƒ½åƒ ChatGPT ä¸€æ ·é€å­—è¾“å‡ºï¼Œè€Œæœ‰çš„åªèƒ½â€œç­‰åŠå¤©ä¸€æ¬¡æ€§è¿”å›â€ï¼Ÿ</strong></p>
</blockquote>
<p>é—®é¢˜çš„æ ¸å¿ƒï¼Œå¾€å¾€ä¸åœ¨æ¨¡å‹ï¼Œè€Œåœ¨ <strong>å‰åç«¯çš„æµå¼é€šä¿¡æ–¹å¼</strong>ã€‚</p>
<div align="center">
    <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58ca1957a6034de58674e28e81ed8fa2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2FpbGluZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768380973&amp;x-signature=%2BClQFxqsXIn%2BNN9GmUpqR1TgCP0%3D" width="100%" loading="lazy"/></div>

<p>æœ¬æ–‡ä»å®æˆ˜å‡ºå‘ï¼Œç³»ç»Ÿè®²æ¸…æ¥š <strong>SSEã€fetchã€axios åœ¨ AI æµå¼å¯¹è¯ä¸­çš„æœ¬è´¨åŒºåˆ«ä¸é€‰å‹å»ºè®®</strong>ã€‚</p>
<h2 data-id="heading-0">å…ˆç»™ç»“è®ºï¼ˆé‡è¦ï¼‰</h2>
<blockquote>
<p><strong>AI æµå¼å¯¹è¯çš„æ­£ç¡®æ‰“å¼€æ–¹å¼ï¼š</strong></p>
<ul>
<li>âœ… é¦–é€‰ï¼š<code>fetch + ReadableStream</code></li>
<li>âœ… å¯é€‰ï¼š<code>SSEï¼ˆEventSourceï¼‰</code></li>
<li>âŒ ä¸æ¨èï¼š<code>axios</code></li>
</ul>
</blockquote>
<p>å¦‚æœä½ ç°åœ¨ç”¨çš„æ˜¯ axiosï¼Œè¿˜åœ¨çº ç»“â€œä¸ºä»€ä¹ˆæ²¡æœ‰é€ token è¾“å‡ºâ€ï¼Œå¯ä»¥ç›´æ¥å¾€ä¸‹çœ‹ç»“è®ºéƒ¨åˆ†ã€‚</p>
<h2 data-id="heading-1">AI æµå¼å¯¹è¯çš„æœ¬è´¨éœ€æ±‚</h2>
<p>åœ¨ä¼ ç»Ÿæ¥å£ä¸­ï¼Œè¯·æ±‚å’Œå“åº”é€šå¸¸æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs">è¯·æ±‚ â†’ ç­‰å¾… â†’ è¿”å›å®Œæ•´ç»“æœ
</code></pre>
<p>ä½† AI å¯¹è¯ä¸æ˜¯ã€‚</p>
<p><strong>AI æµå¼å¯¹è¯çš„çœŸå®éœ€æ±‚æ˜¯ï¼š</strong></p>
<ul>
<li>æ¨¡å‹ <strong>é€ token ç”Ÿæˆ</strong></li>
<li>å‰ç«¯ <strong>è¾¹æ¥æ”¶ã€è¾¹æ¸²æŸ“</strong></li>
<li>è¿æ¥å¯æŒç»­æ•°åç§’</li>
<li>ç”¨æˆ·èƒ½æ„ŸçŸ¥â€œæ­£åœ¨æ€è€ƒ / æ­£åœ¨è¾“å‡ºâ€</li>
</ul>
<p>è¿™å†³å®šäº†ï¼š<strong>å¿…é¡»æ”¯æŒçœŸæ­£çš„ HTTP æµå¼å“åº”</strong></p>
<h2 data-id="heading-2">SSEã€fetchã€axios çš„æœ¬è´¨åŒºåˆ«</h2>
<p>åœ¨å¯¹æ¯”ä¹‹å‰ï¼Œå…ˆæ˜ç¡®ä¸€ä¸ªå®¹æ˜“æ··æ·†çš„ç‚¹ï¼š</p>
<h3 data-id="heading-3">1ã€SSE æ˜¯ã€Œåè®®èƒ½åŠ›ã€</h3>
<p><strong>SSEï¼ˆServer-Sent Eventsï¼‰</strong> æ˜¯ä¸€ç§ <strong>åŸºäº HTTP çš„æµå¼æ¨é€åè®®</strong></p>
<ul>
<li><code>Content-Type: text/event-stream</code></li>
<li>æœåŠ¡ç«¯å¯ä»¥ä¸æ–­å‘å®¢æˆ·ç«¯æ¨é€æ•°æ®</li>
<li>æµè§ˆå™¨åŸç”Ÿæ”¯æŒ <code>EventSource</code></li>
</ul>
<p>å®ƒè§£å†³çš„æ˜¯ï¼š<strong>â€œæœåŠ¡ç«¯å¦‚ä½•æŒç»­æ¨é€æ•°æ®â€</strong></p>
<h3 data-id="heading-4">2ã€fetch / axios æ˜¯ã€Œè¯·æ±‚å·¥å…·ã€</h3>

















<table><thead><tr><th>å·¥å…·</th><th>æœ¬è´¨</th></tr></thead><tbody><tr><td>fetch</td><td>æµè§ˆå™¨åŸç”Ÿ HTTP API</td></tr><tr><td>axios</td><td>å¯¹ XHR / fetch çš„å°è£…åº“</td></tr></tbody></table>
<p>å®ƒä»¬è§£å†³çš„æ˜¯ï¼š<strong>â€œå‰ç«¯å¦‚ä½•å‘è¯·æ±‚ã€æ‹¿å“åº”â€</strong></p>
<h2 data-id="heading-5">å¸¸ç”¨æµå¼æ–¹æ¡ˆ</h2>
<h3 data-id="heading-6">SSEï¼šæœ€ç®€å•çš„æµå¼æ–¹æ¡ˆ</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> es = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventSource</span>(<span class="hljs-string">'/api/chat/stream'</span>)

es.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">data</span>)
}
</code></pre>
<p>ä¼˜ç‚¹</p>
<ul>
<li>âœ… åŸç”Ÿæ”¯æŒæµå¼</li>
<li>âœ… è‡ªåŠ¨é‡è¿</li>
<li>âœ… å¿ƒè·³ã€äº‹ä»¶ç±»å‹æ¸…æ™°</li>
<li>âœ… éå¸¸é€‚åˆ <strong>AI å•å‘è¾“å‡º</strong></li>
</ul>
<p>ç¼ºç‚¹ï¼ˆå…³é”®ï¼‰</p>
<ul>
<li>âŒ åªæ”¯æŒ <code>GET</code></li>
<li>âŒ ä¸èƒ½è‡ªå®šä¹‰ Headerï¼ˆé‰´æƒä¸å‹å¥½ï¼‰</li>
<li>âŒ åªèƒ½ <strong>æœåŠ¡ç«¯ â†’ å®¢æˆ·ç«¯</strong></li>
</ul>
<p>é€‚åˆåœºæ™¯ï¼š<strong>AI å›ç­”è¾“å‡º</strong>ã€<strong>æ¨ç†è¿‡ç¨‹</strong> / <strong>æ—¥å¿—æµ</strong>ã€<strong>å®æ—¶é€šçŸ¥ç±»æ•°æ®</strong>ã€‚</p>
<h3 data-id="heading-7">fetch + ReadableStreamï¼ˆæ¨èï¼‰</h3>
<p>è¿™æ˜¯ç›®å‰ <strong>AI äº§å“ä¸­æœ€ä¸»æµã€æœ€çµæ´»çš„æ–¹æ¡ˆ</strong>ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/chat'</span>, {
  <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>
  },
  <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ prompt })
})

<span class="hljs-keyword">const</span> reader = res.<span class="hljs-property">body</span>.<span class="hljs-title function_">getReader</span>()
<span class="hljs-keyword">const</span> decoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>()

<span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
  <span class="hljs-keyword">const</span> { value, done } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>()
  <span class="hljs-keyword">if</span> (done) <span class="hljs-keyword">break</span>
  <span class="hljs-keyword">const</span> chunk = decoder.<span class="hljs-title function_">decode</span>(value)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chunk)
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆå®ƒæ˜¯é¦–é€‰ï¼Ÿ</strong></p>
<ul>
<li>âœ… æ”¯æŒ POSTï¼ˆå¯ä¼  promptã€ä¸Šä¸‹æ–‡ï¼‰</li>
<li>âœ… å¯è‡ªå®šä¹‰ Headerï¼ˆtokenã€traceIdï¼‰</li>
<li>âœ… çœŸæ­£çš„ chunk / token çº§æµå¼</li>
<li>âœ… ä¸ OpenAI / Claude æ¥å£å®Œå…¨ä¸€è‡´</li>
<li>âœ… Web / Node / Edge Runtime é€šç”¨</li>
</ul>
<p><strong>ä¸€å¥è¯æ€»ç»“</strong>ï¼š<code>fetch + stream</code> æ˜¯ç›®å‰ <strong>AI æµå¼å¯¹è¯çš„æ ‡å‡†</strong></p>
<h2 data-id="heading-8">axiosï¼šä¸ºä»€ä¹ˆä¸é€‚åˆ AI æµå¼ï¼Ÿ</h2>
<p>è¿™æ˜¯å¾ˆå¤šäººè¸©å‘æœ€å¤šçš„åœ°æ–¹ã€‚</p>
<p><strong>å¸¸è§è¯¯è§£</strong></p>
<pre><code class="hljs language-js" lang="js">axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/api/chat'</span>, data, {
  <span class="hljs-title function_">onDownloadProgress</span>(<span class="hljs-params">e</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e)
  }
})
</code></pre>
<p>çœ‹èµ·æ¥åƒâ€œæµå¼â€ï¼Œä½†å®é™…ä¸Š <strong>axios çš„çœŸå®é—®é¢˜</strong>ï¼š</p>
<ul>
<li>æµè§ˆå™¨ç«¯åŸºäº XHR</li>
<li>å“åº”ä¼šè¢« <strong>ç¼“å†²</strong></li>
<li><code>onDownloadProgress</code> ä¸æ˜¯ token çº§å›è°ƒ</li>
<li>å»¶è¿Ÿæ˜æ˜¾ã€ä½“éªŒå·®</li>
</ul>
<p><strong>ç»“è®º</strong>ï¼šaxios åœ¨æµè§ˆå™¨ç«¯ <strong>ä¸æ”¯æŒçœŸæ­£çš„æµå¼å“åº”</strong></p>
<p>å®ƒæ›´é€‚åˆæ™®é€š REST APIã€è¡¨å•æäº¤ã€æ•°æ®è¯·æ±‚ï¼Œä½† <strong>ä¸é€‚åˆ AI æµå¼è¾“å‡º</strong>ã€‚</p>
<h2 data-id="heading-9">æ€»ç»“</h2>

































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>çœŸæµå¼</th><th>POST</th><th>Header</th><th>æ¨èåº¦</th></tr></thead><tbody><tr><td>SSE (EventSource)</td><td>âœ…</td><td>âŒ</td><td>âŒ</td><td>â­â­â­</td></tr><tr><td>fetch + stream</td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>â­â­â­â­â­</td></tr><tr><td>axios</td><td>âŒ</td><td>âœ…</td><td>âœ…</td><td>â­</td></tr></tbody></table>
<ul>
<li>SSE æ˜¯æµå¼åè®®</li>
<li>fetch æ˜¯æµå¼å®¹å™¨</li>
<li>axios æ˜¯ä¼ ç»Ÿè¯·æ±‚å·¥å…·</li>
</ul>
<p>å¦‚æœä½ æ­£åœ¨åš AI äº§å“ï¼Œé€šä¿¡å±‚é€‰é”™ï¼Œåé¢å†æ€ä¹ˆä¼˜åŒ–æ¨¡å‹å’Œå‰ç«¯ä½“éªŒï¼Œéƒ½ä¼šäº‹å€åŠŸåŠã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[3D-AIGC å­˜å‚¨æ¶æ„æ¼”è¿›ï¼šä» NFSã€GlusterFS åˆ° JuiceFS]]></title>    <link>https://juejin.cn/post/7592438587388411942</link>    <guid>https://juejin.cn/post/7592438587388411942</guid>    <pubDate>2026-01-07T09:01:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592438587388411942" data-draft-id="7592361736130773002" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="3D-AIGC å­˜å‚¨æ¶æ„æ¼”è¿›ï¼šä» NFSã€GlusterFS åˆ° JuiceFS"/> <meta itemprop="keywords" content="åç«¯,è¿ç»´,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-07T09:01:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JuiceFS"/> <meta itemprop="url" content="https://juejin.cn/user/2665636828032446"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            3D-AIGC å­˜å‚¨æ¶æ„æ¼”è¿›ï¼šä» NFSã€GlusterFS åˆ° JuiceFS
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2665636828032446/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JuiceFS
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T09:01:19.000Z" title="Wed Jan 07 2026 09:01:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å…‰å½±ç„•åƒï¼ˆLightillusionsï¼‰æ˜¯ä¸€å®¶ä¸“æ³¨äºç©ºé—´æ™ºèƒ½æŠ€æœ¯ï¼Œç»“åˆ 3D è§†è§‰ã€å›¾å½¢å­¦å’Œç”Ÿæˆæ¨¡å‹æŠ€æœ¯ï¼Œè‡´åŠ›äºæ‰“é€ åˆ›æ–°çš„ 3D åŸºç¡€æ¨¡å‹å…¬å¸ã€‚å…¬å¸ç”±è°­å¹³æ•™æˆé¢†å¯¼ï¼Œè°­æ•™æˆæ›¾æ‹…ä»»é˜¿é‡Œå·´å·´è¾¾æ‘©é™¢å®éªŒå®¤è´Ÿè´£äººï¼Œç›®å‰æ˜¯é¦™æ¸¯ç§‘æŠ€å¤§å­¦çš„æ•™æˆï¼ŒåŒæ—¶æ‹…ä»»å†¯è¯ºä¼Šæ›¼äººå·¥æ™ºèƒ½ç ”ç©¶å®¤å‰¯é™¢é•¿ï¼Œå¹¶æ˜¯é¦™æ¸¯ç§‘æŠ€å¤§å­¦ä¸æ¯”äºšè¿ªè”åˆå®éªŒå®¤çš„ä¸»ä»»ã€‚</p>
<p>åŒºåˆ«äºäºŒç»´æ¨¡å‹ï¼Œä¸‰ç»´æ¨¡å‹å•ä¸ªæ¨¡å‹çš„å¤§å°å¯è¾¾å‡  GBï¼Œå°¤å…¶æ˜¯ç‚¹äº‘æ•°æ®ç­‰å¤æ‚æ¨¡å‹ã€‚å½“æ•°æ®é‡è¾¾åˆ° PB çº§åˆ«æ—¶ï¼Œç®¡ç†ä¸å­˜å‚¨æˆä¸ºå·¨å¤§çš„æŒ‘æˆ˜ã€‚ç»è¿‡å°è¯• NFSã€GlusterFS ç­‰æ–¹æ¡ˆåï¼Œæˆ‘ä»¬æœ€ç»ˆé€‰æ‹©äº† JuiceFSï¼ŒæˆåŠŸæ­å»ºäº†ä¸€ä¸ªç»Ÿä¸€çš„å­˜å‚¨å¹³å°ï¼Œä¸ºå¤šä¸ªåœºæ™¯æœåŠ¡ï¼Œå¹¶æ”¯æŒè·¨å¹³å°è®¿é—®ï¼ŒåŒ…æ‹¬ Windows å’Œ Linux ç³»ç»Ÿã€‚<strong>è¯¥å¹³å°ç›®å‰å·²ç®¡ç†ä¸Šäº¿æ–‡ä»¶ï¼Œæ•°æ®å¤„ç†é€Ÿåº¦æå‡äº† 200%~250%ï¼Œè¿˜å®ç°äº†é«˜æ•ˆçš„å­˜å‚¨æ‰©å®¹ï¼ŒåŒæ—¶è¿ç»´ç®¡ç†å¾—åˆ°äº†æå¤§ç®€åŒ–ï¼Œä½¿å¾—å›¢é˜Ÿèƒ½å¤Ÿæ›´ä¸“æ³¨äºæ ¸å¿ƒä»»åŠ¡çš„æ¨è¿›</strong>ã€‚</p>
<h2 data-id="heading-0">01 3D-AIGC å­˜å‚¨éœ€æ±‚</h2>
<p>æˆ‘ä»¬çš„ç ”ç©¶ä¸»è¦é›†ä¸­åœ¨æ„ŸçŸ¥å’Œç”Ÿæˆä¸¤ä¸ªæ–¹å‘ã€‚åœ¨ä¸‰ç»´é¢†åŸŸï¼Œä»»åŠ¡çš„å¤æ‚æ€§ä¸å›¾åƒå’Œæ–‡æœ¬å¤„ç†æœ‰æœ¬è´¨åŒºåˆ«ï¼Œè¿™å¯¹æˆ‘ä»¬çš„ AI æ¨¡å‹ã€ç®—æ³•ä»¥åŠåŸºç¡€è®¾æ–½å»ºè®¾éƒ½æå‡ºäº†æ›´é«˜çš„è¦æ±‚ã€‚</p>
<p>æˆ‘ä»¬é€šè¿‡ä¸€ä¸ª 3D æ•°æ®å¤„ç†æµç¨‹ï¼Œæ¥å±•ç¤ºä¸‰ç»´æ•°æ®å¤„ç†çš„å¤æ‚æ€§ã€‚ä¸‹å›¾å·¦ä¾§æ˜¯ä¸€ä¸ªä¸‰ç»´æ¨¡å‹ï¼ŒåŒ…å«çº¹ç†ï¼ˆå·¦ä¸Šè§’çš„æŠ˜å°„çº¹ç†ï¼‰å’Œå‡ ä½•ä¿¡æ¯ï¼ˆå³ä¸‹è§’çš„å‡ ä½•ç»“æ„ï¼‰ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ç”Ÿæˆæ¸²æŸ“å›¾åƒã€‚æ¯ä¸ªæ¨¡å‹è¿˜é™„å¸¦æ–‡æœ¬æ ‡ç­¾ï¼Œæè¿°å…¶å†…å®¹ã€å‡ ä½•ç‰¹å¾å’Œçº¹ç†ç‰¹å¾ï¼Œè¿™äº›æ ‡ç­¾ä¸æ¯ä¸ªæ¨¡å‹ç´§å¯†ç›¸å…³ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¤„ç†å‡ ä½•æ•°æ®ï¼Œå¦‚é‡‡æ ·ç‚¹ä»¥åŠä»æ•°æ®é¢„å¤„ç†è¿‡ç¨‹ä¸­å¾—åˆ°çš„å¿…è¦æ•°å€¼ï¼ˆå¦‚ 3DSã€SDF ç­‰ï¼‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸‰ç»´æ¨¡å‹çš„æ–‡ä»¶æ ¼å¼éå¸¸å¤šæ ·ï¼Œå›¾ç‰‡æ ¼å¼ä¹Ÿå„ä¸ç›¸åŒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b8f785b058e48ee9571dbb9ca5c7cc1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnVpY2VGUw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768381278&amp;x-signature=eYQBNQI59JvpIydmVHs%2BnREJ6PQ%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬çš„å·¥ä½œåœºæ™¯æ¶‰åŠè¯­è¨€æ¨¡å‹ã€å›¾åƒ/è§†é¢‘æ¨¡å‹åˆ°ä¸‰ç»´æ¨¡å‹ï¼Œéšç€æ•°æ®é‡çš„å¢é•¿ï¼Œå­˜å‚¨è´Ÿæ‹…ä¹Ÿåœ¨ä¸æ–­å¢åŠ ã€‚ä»¥ä¸‹æ˜¯è¿™äº›åœºæ™¯ä¸­æ•°æ®ä½¿ç”¨çš„ä¸»è¦ç‰¹ç‚¹ï¼š</p>
<ul>
<li>è¯­è¨€æ¨¡å‹çš„æ•°æ®é€šå¸¸ç”±å¤§é‡å°æ–‡ä»¶ç»„æˆã€‚å°½ç®¡å•ä¸ªæ–‡æœ¬æ–‡ä»¶è¾ƒå°ï¼Œä½†éšç€æ•°æ®é‡çš„å¢åŠ ï¼Œæ–‡ä»¶æ•°é‡å¯èƒ½è¾¾åˆ°æ•°ç™¾ä¸‡ç”šè‡³æ•°åƒä¸‡ä¸ªï¼Œè¿™ä½¿å¾—ç®¡ç†å¦‚æ­¤åºå¤§çš„æ–‡ä»¶æ•°æˆä¸ºå­˜å‚¨çš„ä¸€ä¸ªä¸»è¦éš¾ç‚¹ã€‚</li>
<li>å›¾åƒå’Œè§†é¢‘æ•°æ®ï¼Œå°¤å…¶æ˜¯é«˜åˆ†è¾¨ç‡å›¾åƒå’Œé•¿æ—¶é—´çš„è§†é¢‘ï¼Œé€šå¸¸è¾ƒä¸ºåºå¤§ã€‚å•å¼ å›¾åƒçš„å¤§å°é€šå¸¸åœ¨å‡ ç™¾ KB åˆ°å‡  MB ä¹‹é—´ï¼Œè€Œè§†é¢‘æ–‡ä»¶å¯èƒ½è¾¾åˆ° GB çº§åˆ«ã€‚åœ¨é¢„å¤„ç†è¿‡ç¨‹ä¸­ï¼Œå¦‚æ•°æ®å¢å¼ºã€åˆ†è¾¨ç‡è°ƒæ•´å’Œå¸§æå–ç­‰ï¼Œæ•°æ®é‡ä¼šæ˜¾è‘—å¢åŠ ï¼Œç‰¹åˆ«æ˜¯åœ¨è§†é¢‘å¤„ç†ä¸­ï¼Œæ¯ä¸ªè§†é¢‘é€šå¸¸ä¼šè¢«æ‹†è§£ä¸ºå¤§é‡çš„å›¾åƒæ–‡ä»¶ï¼Œç®¡ç†è¿™äº›åºå¤§çš„æ–‡ä»¶é›†ï¼Œå¸¦æ¥äº†æ›´é«˜çš„å¤æ‚æ€§ã€‚</li>
<li>ä¸‰ç»´æ¨¡å‹ï¼Œç‰¹åˆ«æ˜¯ç‚¹äº‘æ•°æ®ç­‰å¤æ‚æ¨¡å‹ï¼Œå•ä¸ªæ¨¡å‹çš„å¤§å°å¯è¾¾å‡  GBã€‚<strong>ä¸‰ç»´æ•°æ®çš„é¢„å¤„ç†è¿‡ç¨‹æ¯”å…¶ä»–æ•°æ®æ›´åŠ å¤æ‚ï¼Œæ¶‰åŠçº¹ç†æ˜ å°„ã€å‡ ä½•é‡å»ºç­‰å¤šä¸ªæ­¥éª¤ï¼Œè¿™äº›å¤„ç†ä¸ä»…æ¶ˆè€—å¤§é‡è®¡ç®—èµ„æºï¼Œè¿˜å¯èƒ½å¢åŠ æ•°æ®ä½“ç§¯</strong>ã€‚æ­¤å¤–ï¼Œä¸‰ç»´æ¨¡å‹é€šå¸¸ç”±å¤šä¸ªæ–‡ä»¶ç»„æˆï¼Œæ–‡ä»¶æ•°é‡åºå¤§ï¼Œéšç€æ•°æ®é‡çš„å¢é•¿ï¼Œç®¡ç†è¿™äº›æ–‡ä»¶çš„éš¾åº¦ä¹Ÿä¼šå¢åŠ ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60d21446f1504d8e918051c10d6fa74f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnVpY2VGUw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768381278&amp;x-signature=yPpvGEqZwC%2B8fonX48Pd6TIB5rA%3D" alt="" loading="lazy"/></p>
<p>ç”±ä¸Šè¿°ç¯èŠ‚çš„å­˜å‚¨ç‰¹ç‚¹ï¼Œæˆ‘ä»¬å¸Œæœ›æ„å»ºçš„å­˜å‚¨å¹³å°èƒ½å¤Ÿæ»¡è¶³ä»¥ä¸‹å‡ é¡¹è¦æ±‚ï¼š</p>
<ul>
<li>
<p><strong>å¤šæ ·çš„æ•°æ®æ ¼å¼ä¸è·¨èŠ‚ç‚¹å…±äº«</strong>ï¼šä¸åŒæ¨¡å‹çš„æ•°æ®æ ¼å¼å·®å¼‚è¾ƒå¤§ï¼Œç‰¹åˆ«æ˜¯ä¸‰ç»´æ¨¡å‹çš„æ ¼å¼å¤æ‚æ€§å’Œè·¨å¹³å°å…¼å®¹é—®é¢˜ï¼Œå­˜å‚¨ç³»ç»Ÿéœ€è¦æ”¯æŒå¤šç§æ ¼å¼ï¼Œå¹¶æœ‰æ•ˆç®¡ç†è·¨èŠ‚ç‚¹å’Œè·¨å¹³å°çš„æ•°æ®å…±äº«ã€‚</p>
</li>
<li>
<p><strong>å¯ä»¥å¤„ç†ä¸åŒå°ºå¯¸çš„æ•°æ®æ¨¡å‹</strong>ï¼šæ— è®ºæ˜¯è¯­è¨€æ¨¡å‹çš„å°æ–‡ä»¶ã€å¤§è§„æ¨¡å›¾ç‰‡/è§†é¢‘æ•°æ®ï¼Œè¿˜æ˜¯ä¸‰ç»´æ¨¡å‹çš„å¤§æ–‡ä»¶ï¼Œå­˜å‚¨ç³»ç»Ÿå¿…é¡»å…·å¤‡é«˜æ‰©å±•æ€§ï¼Œä»¥åº”å¯¹å¿«é€Ÿå¢é•¿çš„å­˜å‚¨éœ€æ±‚ï¼Œå¹¶é«˜æ•ˆå¤„ç†å¤§å°ºå¯¸æ•°æ®çš„å­˜å‚¨å’Œè®¿é—®ã€‚</p>
</li>
<li>
<p><strong>è·¨äº‘ä¸é›†ç¾¤å­˜å‚¨çš„æŒ‘æˆ˜</strong>ï¼šéšç€æ•°æ®é‡çš„å¢åŠ ï¼Œç‰¹åˆ«æ˜¯ä¸‰ç»´æ¨¡å‹çš„ PB çº§å­˜å‚¨éœ€æ±‚ï¼Œè·¨äº‘å’Œé›†ç¾¤å­˜å‚¨é—®é¢˜æ„ˆåŠ çªå‡ºã€‚å­˜å‚¨ç³»ç»Ÿéœ€è¦æ”¯æŒè·¨åŒºåŸŸã€è·¨äº‘çš„æ— ç¼æ•°æ®è®¿é—®å’Œé«˜æ•ˆçš„é›†ç¾¤ç®¡ç†ã€‚</p>
</li>
<li>
<p><strong>æ–¹ä¾¿æ‰©å®¹</strong>ï¼šæ— è®ºæ˜¯è¯­è¨€æ¨¡å‹ã€å›¾ç‰‡/è§†é¢‘æ¨¡å‹ï¼Œè¿˜æ˜¯ä¸‰ç»´æ¨¡å‹ï¼Œæ‰©å®¹éœ€æ±‚å§‹ç»ˆå­˜åœ¨ï¼Œå°¤å…¶æ˜¯ä¸‰ç»´æ¨¡å‹çš„å­˜å‚¨å’Œå¤„ç†å¯¹æ‰©å®¹çš„éœ€æ±‚æ›´é«˜ã€‚</p>
</li>
<li>
<p><strong>ç®€å•çš„è¿ç»´</strong>ï¼šå­˜å‚¨ç³»ç»Ÿåº”æä¾›ç®€ä¾¿çš„ç®¡ç†ç•Œé¢å’Œå·¥å…·ï¼Œå°¤å…¶æ˜¯å¯¹äºä¸‰ç»´æ¨¡å‹çš„ç®¡ç†ï¼Œè¿ç»´è¦æ±‚æ›´é«˜ï¼Œè‡ªåŠ¨åŒ–ç®¡ç†å’Œå®¹é”™èƒ½åŠ›æ˜¯å¿…ä¸å¯å°‘çš„ã€‚</p>
</li>
</ul>
<h2 data-id="heading-1">02 å­˜å‚¨æ–¹æ¡ˆæ¢ç´¢ï¼šä» NFSã€Glusterã€CephFS åˆ° JuiceFS</h2>
<h3 data-id="heading-2">å‰æœŸæ–¹æ¡ˆï¼šNFS æŒ‚è½½</h3>
<p>æœ€åˆï¼Œæˆ‘ä»¬é‡‡ç”¨äº†æœ€ç®€å•çš„æ–¹æ¡ˆâ€”â€”ä½¿ç”¨ NFS è¿›è¡ŒæŒ‚è½½ã€‚ç„¶è€Œï¼Œåœ¨å®é™…æ“ä½œä¸­ï¼Œæˆ‘ä»¬å‘ç°è®­ç»ƒé›†ç¾¤å’Œæ¸²æŸ“é›†ç¾¤éœ€è¦å„è‡ªç‹¬ç«‹çš„é›†ç¾¤æ¥è¿›è¡ŒæŒ‚è½½æ“ä½œã€‚è¿™ç§æ–¹å¼çš„ç»´æŠ¤éå¸¸ç¹çï¼Œå°¤å…¶æ˜¯å½“æ·»åŠ æ–°çš„æ•°æ®æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å•ç‹¬ä¸ºæ¯ä¸ªæ–°æ•°æ®å†™å…¥æŒ‚è½½ç‚¹ã€‚åˆ°äº†æ•°æ®é‡è¾¾åˆ°çº¦ 100 ä¸‡ç‰©ä½“çº§åˆ«æ—¶ï¼Œæˆ‘ä»¬å·²ç»æ— æ³•ç»§ç»­ç»´æŒè¿™ç§æ–¹æ¡ˆï¼Œå› æ­¤åœ¨æ—©æœŸé˜¶æ®µï¼Œæˆ‘ä»¬å°±æ”¾å¼ƒäº†è¿™ä¸€æ–¹æ¡ˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a748cf9a96024a6289c22e9b81571ff2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnVpY2VGUw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768381278&amp;x-signature=0Az8pLZenRH8h09JPi9hy82PG9A%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">ä¸­æœŸæ–¹æ¡ˆï¼šGlusterFS</h3>
<p>GlusterFS æ˜¯ä¸€ä¸ªç›¸å¯¹æ˜“äºä¸Šæ‰‹çš„é€‰æ‹©ï¼Œå®‰è£…é…ç½®ç®€å•ï¼Œæ€§èƒ½ä¹Ÿèƒ½å¾—åˆ°ä¸€å®šä¿éšœï¼Œä¸”æ— éœ€åˆ’åˆ†å¤šä¸ªæŒ‚è½½ç‚¹ï¼Œåªéœ€å¢åŠ æ–°èŠ‚ç‚¹å³å¯ã€‚è™½ç„¶åœ¨å‰æœŸä½¿ç”¨æ—¶ï¼ŒGlusterFS å¤§å¤§å‡è½»äº†æˆ‘ä»¬çš„å·¥ä½œé‡ï¼Œä½†æˆ‘ä»¬ä¹Ÿå‘ç°å®ƒçš„ç”Ÿæ€ç³»ç»Ÿå­˜åœ¨ä¸€äº›é—®é¢˜ã€‚</p>
<p>é¦–å…ˆï¼ŒGlusterFS è®¸å¤šæ‰§è¡Œè„šæœ¬å’ŒåŠŸèƒ½éœ€è¦æ‰‹åŠ¨ç¼–å†™å®šæ—¶ä»»åŠ¡ã€‚ç‰¹åˆ«æ˜¯åœ¨æ·»åŠ æ–°å­˜å‚¨æ—¶ï¼Œå®ƒè¿˜ä¼šæœ‰ä¸€äº›é¢å¤–è¦æ±‚ï¼Œä¾‹å¦‚éœ€è¦æŒ‰ç‰¹å®šå€æ•°å¢åŠ èŠ‚ç‚¹ã€‚æ­¤å¤–ï¼Œåƒå…‹éš†ã€æ•°æ®åŒæ­¥ç­‰æ“ä½œçš„æ”¯æŒä¹Ÿç›¸å¯¹è¾ƒå¼±ï¼Œå¯¼è‡´æˆ‘ä»¬åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é¢‘ç¹æŸ¥é˜…æ–‡æ¡£ï¼Œä¸”è®¸å¤šæ“ä½œå¹¶ä¸ç¨³å®šã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ FIO ç­‰å·¥å…·è¿›è¡Œæµ‹é€Ÿæ—¶ï¼Œç»“æœå¹¶ä¸æ€»æ˜¯å¯é ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c94f454704e94b8f8b3fe6de4622d9a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnVpY2VGUw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768381278&amp;x-signature=kJiyQY%2FdeksFqPR3s0mmpZ83OtQ%3D" alt="" loading="lazy"/></p>
<p><strong>æ›´ä¸ºä¸¥é‡çš„é—®é¢˜æ˜¯ï¼Œå½“å­˜å‚¨çš„å°æ–‡ä»¶æ•°é‡è¾¾åˆ°ä¸€å®šè§„æ¨¡æ—¶ï¼ŒGlusterFS çš„æ€§èƒ½ä¼šæ€¥å‰§ä¸‹é™</strong>ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¸€ä¸ªæ¨¡å‹å¯èƒ½ä¼šç”Ÿæˆ 100 å¼ å›¾ç‰‡ï¼Œè‹¥æœ‰ 1000 ä¸‡ä¸ªæ¨¡å‹ï¼Œå°±ä¼šäº§ç”Ÿ 10 äº¿å¼ å›¾ç‰‡ã€‚GlusterFS åœ¨åæœŸçš„å¯»å€å˜å¾—æä¸ºå›°éš¾ï¼Œå°¤å…¶æ˜¯å°æ–‡ä»¶è¿‡å¤šæ—¶ï¼Œæ€§èƒ½ä¼šæ˜¾è‘—ä¸‹é™ï¼Œå¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚</p>
<h3 data-id="heading-4">æœ€ç»ˆé€‰å‹ï¼šCephFS vs JuiceFS</h3>
<p>éšç€å­˜å‚¨éœ€æ±‚çš„å¢åŠ ï¼Œæˆ‘ä»¬å†³å®šè½¬å‘å¯æŒç»­æ€§æ›´å¥½çš„æ–¹æ¡ˆã€‚åœ¨è¯„ä¼°äº†å¤šç§æ–¹æ¡ˆåï¼Œæˆ‘ä»¬ä¸»è¦å¯¹æ¯”äº† CephFS å’Œ JuiceFSã€‚è™½ç„¶ Ceph è¢«å¹¿æ³›ä½¿ç”¨ï¼Œä½†é€šè¿‡è‡ªå·±çš„å®è·µå’Œå¯¹æ¯”æ–‡æ¡£ï¼Œæˆ‘ä»¬å‘ç° Ceph çš„è¿ç»´å’Œç®¡ç†æˆæœ¬éå¸¸é«˜ï¼Œå°¤å…¶å¯¹äºæˆ‘ä»¬è¿™æ ·çš„å°å›¢é˜Ÿæ¥è¯´ï¼Œå¤„ç†è¿™äº›å¤æ‚çš„è¿ç»´ä»»åŠ¡æ˜¾å¾—å°¤ä¸ºå›°éš¾ã€‚</p>
<p>JuiceFS æœ‰ä¸¤ä¸ªåŸç”Ÿè‡ªå¸¦çš„ç‰¹æ€§éå¸¸ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚ã€‚<strong>é¦–å…ˆæ˜¯å®¢æˆ·ç«¯æ•°æ®ç¼“å­˜åŠŸèƒ½</strong>ã€‚å¯¹äºæˆ‘ä»¬çš„æ¨¡å‹è®­ç»ƒé›†ç¾¤ï¼Œé€šå¸¸ä¼šé…å¤‡é«˜æ€§èƒ½çš„ NVMe å­˜å‚¨ã€‚å¦‚æœèƒ½å¤Ÿå……åˆ†åˆ©ç”¨å®¢æˆ·ç«¯çš„ç¼“å­˜ï¼Œä¾¿èƒ½æ˜¾è‘—åŠ é€Ÿæ¨¡å‹è®­ç»ƒï¼Œå¹¶å‡å°‘å¯¹ JuiceFS å­˜å‚¨çš„å‹åŠ›ã€‚</p>
<p><strong>å…¶æ¬¡ï¼ŒJuiceFS å¯¹ S3 çš„å…¼å®¹æ€§å¯¹æˆ‘ä»¬ä¹Ÿè‡³å…³é‡è¦</strong>ã€‚ç”±äºæˆ‘ä»¬åŸºäºå­˜å‚¨å¼€å‘äº†ä¸€äº›å¯è§†åŒ–å¹³å°ç”¨äºæ•°æ®æ ‡æ³¨ã€æ•´ç†å’Œç»Ÿè®¡ï¼ŒS3 å…¼å®¹æ€§ä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿå¿«é€Ÿè¿›è¡Œç½‘é¡µå¼€å‘ï¼Œæ”¯æŒå¯è§†åŒ–å’Œæ•°æ®ç»Ÿè®¡æ“ä½œç­‰åŠŸèƒ½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed3dffd8b85f4e5bb15575c83732b5c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnVpY2VGUw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768381278&amp;x-signature=p5YsKGyMWCTD36jK3nbqdL%2B1oZM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">03 åŸºäº JuiceFS çš„å­˜å‚¨å¹³å°å®è·µ</h2>
<h3 data-id="heading-6">å…ƒæ•°æ®å¼•æ“é€‰æ‹©ä¸æ‹“æ‰‘</h3>
<p>JuiceFS é‡‡ç”¨çš„æ˜¯å…ƒæ•°æ®ä¸æ•°æ®åˆ†ç¦»çš„æ¶æ„ï¼Œæœ‰å¤šç§å…ƒæ•°æ®å¼•æ“å¯ä¾›é€‰æ‹©ã€‚æˆ‘ä»¬é¦–å…ˆå¿«é€ŸéªŒè¯äº† Redis å­˜å‚¨æ–¹æ¡ˆï¼Œå®˜æ–¹æä¾›äº†è¯¦ç»†çš„æ–‡æ¡£æ”¯æŒã€‚Redis çš„ä¼˜åŠ¿åœ¨äºå…¶è½»é‡åŒ–ï¼Œé…ç½®è¿‡ç¨‹é€šå¸¸åªéœ€ä¸€å¤©æˆ–åŠå¤©æ—¶é—´ï¼Œæ•°æ®è¿ç§»ä¹Ÿç›¸å¯¹é¡ºåˆ©ã€‚<strong>ç„¶è€Œï¼Œå½“å°æ–‡ä»¶æ•°é‡è¶…è¿‡ 1 äº¿æ—¶ï¼ŒRedis çš„é€Ÿåº¦å’Œæ€§èƒ½ä¼šæ˜¾è‘—ä¸‹é™</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6237420fd584e9cb6a18f26347eaf73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnVpY2VGUw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768381278&amp;x-signature=5vttxVsFK6gTLrdhulyDWdbiO2M%3D" alt="" loading="lazy"/></p>
<p>æ­£å¦‚ä¹‹å‰æåˆ°çš„ï¼Œæ¯ä¸ªæ¨¡å‹å¯èƒ½ä¼šæ¸²æŸ“å‡º 100 å¼ å›¾ç‰‡ï¼Œå†åŠ ä¸Šå…¶ä»–æ‚é¡¹æ–‡ä»¶ï¼Œå¯¼è‡´å°æ–‡ä»¶çš„æ•°é‡æ€¥å‰§å¢åŠ ã€‚è™½ç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰“åŒ…å°æ–‡ä»¶æ¥å‡è½»é—®é¢˜ï¼Œä½†ä¸€æ—¦æ‰“åŒ…åè¿›è¡Œä¿®æ”¹æˆ–å¯è§†åŒ–æ“ä½œï¼Œå¤æ‚æ€§å°±å¤§å¤§å¢åŠ ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿä¿ç•™åŸå§‹çš„å°å›¾ç‰‡æ–‡ä»¶ï¼Œä»¥ä¾¿åç»­å¤„ç†ã€‚</p>
<p>éšç€æ–‡ä»¶æ•°é‡çš„å¢åŠ ï¼Œå¾ˆå¿«è¶…å‡º Redis çš„å¤„ç†èƒ½åŠ›ï¼Œæˆ‘ä»¬å†³å®šå°†å­˜å‚¨ç³»ç»Ÿè¿ç§»åˆ° TiKV å’Œ Kubernetes ç»„åˆä¸Šã€‚TiKV ä¸ K8s çš„ç»„åˆèƒ½å¤Ÿä¸ºæˆ‘ä»¬æä¾›æ›´é«˜å¯ç”¨çš„å…ƒæ•°æ®å­˜å‚¨æ–¹æ¡ˆã€‚æ­¤å¤–ï¼Œé€šè¿‡åŸºå‡†æµ‹è¯•æˆ‘ä»¬å‘ç°ï¼Œå°½ç®¡ TiKV çš„æ€§èƒ½ç¨é€Šä¸€ç­¹ï¼Œä½†å·®è·å¹¶ä¸æ˜¾è‘—ï¼Œä¸”ç›¸è¾ƒäº Redisï¼Œå®ƒå¯¹å°æ–‡ä»¶çš„æ”¯æŒæ›´å¥½ã€‚æˆ‘ä»¬ä¹Ÿå’¨è¯¢è¿‡ JuiceFS çš„å·¥ç¨‹å¸ˆï¼Œäº†è§£åˆ° Redis åœ¨é›†ç¾¤æ¨¡å¼ä¸‹çš„æ‰©å±•æ€§è¾ƒå·®ï¼Œäºæ˜¯æˆ‘ä»¬å‡†å¤‡åˆ‡æ¢åˆ° TiKVã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa5fdeb97c244e209bc099cbc4f0ba4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnVpY2VGUw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768381278&amp;x-signature=efEkRQL86M0W1FuGrv8VX94gX9k%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">æœ€æ–°æ¶æ„ï¼šJuiceFS + TiKV + SeaweedFS</h3>
<p>æˆ‘ä»¬ä½¿ç”¨äº† JuiceFS æ¥ç®¡ç†å¯¹è±¡å­˜å‚¨ã€‚TiKV å’Œ K8s æ¥æ­å»ºå…ƒæ•°æ®å­˜å‚¨ç³»ç»Ÿã€‚å¯¹è±¡å­˜å‚¨éƒ¨åˆ†ä½¿ç”¨äº† SeaweedFSï¼Œè¿™ä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿå¿«é€Ÿæ‰©å±•å­˜å‚¨è§„æ¨¡ï¼Œä¸”æ— è®ºæ˜¯å°æ•°æ®è¿˜æ˜¯å¤§æ•°æ®ï¼Œè®¿é—®é€Ÿåº¦éƒ½å¾ˆå¿«ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬çš„å¯¹è±¡å­˜å‚¨åˆ†å¸ƒåœ¨å¤šä¸ªå¹³å°ï¼šåŒ…æ‹¬æœ¬åœ°å­˜å‚¨ã€é˜¿é‡Œäº‘å­˜å‚¨ä»¥åŠå›½å¤–çš„ R2 å’Œ Amazon å¯¹è±¡å­˜å‚¨ã€‚é€šè¿‡ JuiceFSï¼Œæˆ‘ä»¬èƒ½å¤Ÿå°†è¿™äº›ä¸åŒå­˜å‚¨ç³»ç»Ÿé›†æˆèµ·æ¥ï¼Œå¹¶æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea49b530cada47728a000cbfc47ad18f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnVpY2VGUw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768381278&amp;x-signature=hLAbSDIzujWwsOEqGOvacqk2nWI%3D" alt="" loading="lazy"/></p>
<p>ä¸ºäº†æ›´å¥½åœ°ç®¡ç†ç³»ç»Ÿèµ„æºï¼Œæˆ‘ä»¬åœ¨ K8s ä¸Šæ­å»ºäº†èµ„æºç›‘æ§å¹³å°ã€‚å½“å‰ç³»ç»Ÿç”±å¤§çº¦ 60 å° Linux æœºå™¨å’Œè‹¥å¹² Windows æœºå™¨ç»„æˆï¼Œè´Ÿè´£æ¸²æŸ“å’Œæ•°æ®å¤„ç†ä»»åŠ¡ã€‚æˆ‘ä»¬å¯¹è¯»å–ç¨³å®šæ€§è¿›è¡Œäº†ç›‘æ§ï¼Œç»“æœæ˜¾ç¤ºï¼Œå³ä½¿æ˜¯å¤šå°å¼‚æ„æœåŠ¡å™¨åŒæ—¶è¿›è¡Œè¯»å–æ“ä½œï¼Œæ•´ä¸ªç³»ç»Ÿçš„ I/O æ€§èƒ½ä¾ç„¶éå¸¸ç¨³å®šï¼ŒåŸºæœ¬èƒ½å¤Ÿå……åˆ†åˆ©ç”¨å¸¦å®½èµ„æºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6222d614784476dbd77800057b643aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnVpY2VGUw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768381278&amp;x-signature=yuMT9Jc%2BbpF4MMXurjWNxFj4tGE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">å®è·µä¸­é‡åˆ°çš„é—®é¢˜</h3>
<p>åœ¨ä¼˜åŒ–å­˜å‚¨æ–¹æ¡ˆçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æœ€åˆå°è¯•äº† ECï¼ˆçº åˆ ç ï¼‰ å­˜å‚¨æ–¹æ¡ˆï¼Œæ—¨åœ¨å‡å°‘å­˜å‚¨éœ€æ±‚å¹¶æå‡æ•ˆç‡ã€‚ç„¶è€Œï¼Œåœ¨å¤§è§„æ¨¡æ•°æ®è¿ç§»ä¸­ï¼ŒEC å­˜å‚¨çš„è®¡ç®—é€Ÿåº¦è¾ƒæ…¢ï¼Œå¹¶ä¸”åœ¨é«˜ååé‡å’Œé¢‘ç¹æ•°æ®å˜åŒ–çš„åœºæ™¯ä¸‹ï¼Œæ€§èƒ½è¡¨ç°ä¸ä½³ï¼Œå°¤å…¶ä¸ SeaweedFS ç»“åˆæ—¶ï¼Œå­˜åœ¨æ€§èƒ½ç“¶é¢ˆã€‚åŸºäºè¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å†³å®šæ”¾å¼ƒ EC å­˜å‚¨ï¼Œè½¬è€Œé‡‡ç”¨å‰¯æœ¬å­˜å‚¨æ–¹æ¡ˆã€‚</p>
<p>æˆ‘ä»¬è®¾ç½®äº†ç‹¬ç«‹æœåŠ¡å™¨å¹¶é…ç½®äº†å®šæ—¶ä»»åŠ¡ï¼Œä»¥è¿›è¡Œå¤§æ•°æ®é‡çš„å…ƒæ•°æ®å¤‡ä»½ã€‚åœ¨ TiKV ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†å†—ä½™å‰¯æœ¬æœºåˆ¶ï¼Œé‡‡ç”¨äº†å¤šä¸ªå‰¯æœ¬æ–¹æ¡ˆæ¥ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§ã€‚åŒæ—¶ï¼Œåœ¨å¯¹è±¡å­˜å‚¨æ–¹é¢ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†åŒå‰¯æœ¬ç¼–ç æ¥è¿›ä¸€æ­¥æé«˜æ•°æ®å¯é æ€§ã€‚è™½ç„¶å‰¯æœ¬å­˜å‚¨èƒ½å¤Ÿæœ‰æ•ˆä¿è¯æ•°æ®å†—ä½™å’Œé«˜å¯ç”¨æ€§ï¼Œä½†ç”±äºå¤„ç† PB çº§æ•°æ®å’Œå¤§é‡å¢é‡æ•°æ®ï¼Œå­˜å‚¨æˆæœ¬ä¾ç„¶è¾ƒé«˜ã€‚æœªæ¥ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè€ƒè™‘è¿›ä¸€æ­¥ä¼˜åŒ–å­˜å‚¨æ–¹æ¡ˆï¼Œä»¥é™ä½å­˜å‚¨æˆæœ¬ã€‚</p>
<p>å¦å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå‘ç°å½“ä½¿ç”¨å…¨é—ªå­˜æœåŠ¡å™¨ + JuiceFS å¹¶æœªå¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚ç“¶é¢ˆä¸»è¦å‡ºç°åœ¨ç½‘ç»œå¸¦å®½å’Œå»¶è¿Ÿä¸Šã€‚å› æ­¤ï¼Œæˆ‘ä»¬è®¡åˆ’åœ¨åæœŸè€ƒè™‘ä½¿ç”¨ InfiniBandï¼ˆIBï¼‰è¿æ¥å­˜å‚¨æœåŠ¡å™¨å’Œè®­ç»ƒæœåŠ¡å™¨ï¼Œä»¥æœ€å¤§åŒ–èµ„æºåˆ©ç”¨æ•ˆç‡ã€‚</p>
<h2 data-id="heading-9">04 å°ç»“</h2>
<p>åœ¨ä½¿ç”¨ GlusterFS æ—¶ï¼Œæˆ‘ä»¬æ¯å¤©æœ€å¤šåªèƒ½å¤„ç† 20 ä¸‡ä¸ªæ¨¡å‹ï¼›<strong>è€Œåˆ‡æ¢åˆ° JuiceFS åï¼Œå¤„ç†èƒ½åŠ›å¤§å¹…æå‡ï¼Œæ—¥å‡æ•°æ®å¤„ç†èƒ½åŠ›å¢åŠ äº† 2.5 å€ï¼Œå°æ–‡ä»¶ååèƒ½åŠ›ä¹Ÿæ˜¾è‘—æé«˜ï¼Œç‰¹åˆ«æ˜¯åœ¨å­˜å‚¨é‡è¾¾åˆ° 70% åï¼Œç³»ç»Ÿä»èƒ½ä¿æŒç¨³å®šè¿è¡Œ</strong>ã€‚æ­¤å¤–ï¼Œæ‰©å®¹ä¹Ÿéå¸¸ä¾¿æ·ï¼Œè€Œä¹‹å‰çš„æ¶æ„ï¼Œæ‰©å®¹è¿‡ç¨‹éå¸¸ç¹çï¼Œæ“ä½œèµ·æ¥æ¯”è¾ƒéº»çƒ¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/825e8a4c32d84a52aaaee70a65f8a8db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnVpY2VGUw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768381278&amp;x-signature=dMSPvcMzulaW0K6z33XgdsvXbp8%3D" alt="" loading="lazy"/></p>
<p>æœ€åå†æ€»ç»“ä¸€ä¸‹ JuiceFS åœ¨ä¸‰ç»´ç”Ÿæˆä»»åŠ¡ä¸­è¡¨ç°å‡ºæ¥çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>
<p><strong>å°æ–‡ä»¶æ€§èƒ½</strong>ï¼š å°æ–‡ä»¶å¤„ç†èƒ½åŠ›æ˜¯ä¸€ä¸ªå…³é”®ç‚¹ï¼ŒJuiceFS ä¾ç„¶æä¾›äº†ä¸€ä¸ªè¾ƒå¥½çš„è§£å†³æ–¹æ¡ˆã€‚</p>
</li>
<li>
<p><strong>è·¨å¹³å°ç‰¹æ€§</strong>ï¼š è·¨å¹³å°æ”¯æŒéå¸¸é‡è¦ã€‚æˆ‘ä»¬å‘ç°æœ‰äº›æ•°æ®åªèƒ½åœ¨ Windows è½¯ä»¶ä¸­æ‰“å¼€ï¼Œå› æ­¤éœ€è¦åŒæ—¶åœ¨ Windows å’Œ Linux ç³»ç»Ÿä¸Šå¤„ç†ç›¸åŒçš„æ•°æ®ï¼Œå¹¶åœ¨åŒä¸€ä¸ªæŒ‚è½½èŠ‚ç‚¹ä¸Šè¿›è¡Œè¯»å†™ã€‚è¿™ç§éœ€æ±‚ä½¿å¾—è·¨å¹³å°çš„ç‰¹æ€§å°¤ä¸ºå…³é”®ï¼ŒJuiceFS çš„è®¾è®¡å¾ˆå¥½åœ°è§£å†³äº†è¿™ä¸€é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>ä½è¿ç»´æˆæœ¬</strong>ï¼š JuiceFS çš„è¿ç»´æˆæœ¬æä½ã€‚é…ç½®å®Œæˆåï¼Œåªéœ€è¦è¿›è¡Œä¸€äº›ç®€å•çš„æµ‹è¯•å’ŒèŠ‚ç‚¹çš„ç®¡ç†ï¼ˆä¾‹å¦‚ï¼Œä¸¢å¼ƒæŸäº›èŠ‚ç‚¹å¹¶ç›‘æ§é²æ£’æ€§ï¼‰ã€‚æˆ‘ä»¬åœ¨è¿ç§»æ•°æ®æ—¶èŠ±è´¹äº†å¤§çº¦åŠå¹´çš„æ—¶é—´ï¼Œåˆ°ç›®å‰ä¸ºæ­¢å¹¶æœªé‡åˆ°å¤ªå¤§çš„é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>æœ¬åœ°ç¼“å­˜æœºåˆ¶</strong>ï¼š ä¹‹å‰ï¼Œå¦‚æœæƒ³ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨åœ¨ä»£ç ä¸­å®ç°æœ¬åœ°ç¼“å­˜é€»è¾‘ï¼Œä½† JuiceFS æä¾›äº†éå¸¸æ–¹ä¾¿çš„æœ¬åœ°ç¼“å­˜æœºåˆ¶ï¼Œé€šè¿‡è®¾ç½®æŒ‚è½½å‚æ•°æ¥ä¼˜åŒ–è®­ç»ƒåœºæ™¯çš„æ€§èƒ½ã€‚</p>
</li>
<li>
<p><strong>è¿ç§»æˆæœ¬ä½</strong>ï¼š å°¤å…¶æ˜¯åœ¨è¿ç§»å°æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬å‘ç°ä½¿ç”¨ JuiceFS è¿›è¡Œå…ƒæ•°æ®å’Œå¯¹è±¡å­˜å‚¨çš„è¿ç§»éå¸¸æ–¹ä¾¿ï¼ŒèŠ‚çœäº†æˆ‘ä»¬å¤§é‡æ—¶é—´å’Œç²¾åŠ›ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¹‹å‰ä½¿ç”¨å…¶ä»–å­˜å‚¨ç³»ç»Ÿè¿ç§»æ—¶ï¼Œè¿‡ç¨‹éå¸¸ç—›è‹¦ã€‚</p>
</li>
</ul>
<p>ç»¼ä¸Šæ‰€è¿°ï¼ŒJuiceFS åœ¨å¤§è§„æ¨¡æ•°æ®å¤„ç†ä¸­çš„è¡¨ç°éå¸¸å‡ºè‰²ï¼Œæä¾›äº†é«˜æ•ˆã€ç¨³å®šçš„å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚å®ƒä¸ä»…ç®€åŒ–äº†å­˜å‚¨ç®¡ç†å’Œæ‰©å®¹è¿‡ç¨‹ï¼Œè¿˜å¤§å¤§æå‡äº†ç³»ç»Ÿæ€§èƒ½ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿæ›´åŠ ä¸“æ³¨äºæ ¸å¿ƒä»»åŠ¡çš„æ¨è¿›ã€‚</p>
<p>æ­¤å¤–ï¼Œå®˜æ–¹æä¾›ä¸€äº›å·¥å…·ä¹Ÿéå¸¸ä¾¿æ·ï¼Œä¾‹å¦‚æˆ‘ä»¬ä½¿ç”¨ Sync åœ¨å¤„ç†å°æ–‡ä»¶è¿ç§»æ—¶ï¼Œæ•ˆç‡æé«˜ã€‚åœ¨æ²¡æœ‰é¢å¤–æ€§èƒ½ä¼˜åŒ–çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æˆåŠŸè¿ç§»äº† 500TB çš„æ•°æ®ï¼Œå…¶ä¸­åŒ…å«å¤§é‡çš„å°æ•°æ®å’Œå›¾ç‰‡æ–‡ä»¶ï¼Œè¿ç§»æ—¶é—´ä¸åˆ° 5 å¤©ï¼Œç»“æœè¶…å‡ºæˆ‘ä»¬çš„é¢„æœŸã€‚</p>
<p>æˆ‘ä»¬å¸Œæœ›æœ¬æ–‡ä¸­çš„ä¸€äº›å®è·µç»éªŒï¼Œèƒ½ä¸ºæ­£åœ¨é¢ä¸´ç±»ä¼¼é—®é¢˜çš„å¼€å‘è€…æä¾›å‚è€ƒï¼Œå¦‚æœæœ‰å…¶ä»–ç–‘é—®æ¬¢è¿åŠ å…¥Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fjuicefs.com%2Fzh-cn%2F" target="_blank" title="https://juicefs.com/zh-cn/" ref="nofollow noopener noreferrer">JuiceFS ç¤¾åŒº</a>ä¸å¤§å®¶å…±åŒäº¤æµã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨å›½å†…ä¹Ÿèƒ½ä½¿ç”¨ Claude cliç»™è‡ªå·±ææ•ˆï¼Œé™„å®æ“æ–¹æ³•]]></title>    <link>https://juejin.cn/post/7592040819819184169</link>    <guid>https://juejin.cn/post/7592040819819184169</guid>    <pubDate>2026-01-07T07:04:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592040819819184169" data-draft-id="7592134330313293867" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨å›½å†…ä¹Ÿèƒ½ä½¿ç”¨ Claude cliç»™è‡ªå·±ææ•ˆï¼Œé™„å®æ“æ–¹æ³•"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-07T07:04:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="demo007x"/> <meta itemprop="url" content="https://juejin.cn/user/78820566119870"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨å›½å†…ä¹Ÿèƒ½ä½¿ç”¨ Claude cliç»™è‡ªå·±ææ•ˆï¼Œé™„å®æ“æ–¹æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/78820566119870/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    demo007x
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T07:04:32.000Z" title="Wed Jan 07 2026 07:04:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åœ¨å›½å†…ä¹Ÿèƒ½ä½¿ç”¨ Claude cliç»™è‡ªå·±ææ•ˆï¼Œé™„å®æ“æ–¹æ³•</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aef140d3b5e24d30a7e6345bca3720a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGVtbzAwN3g=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768374272&amp;x-signature=lJG8kuP1fG4Sj%2FgT8M6O%2BiaUs2A%3D" alt="image.png" loading="lazy"/></p>
<p>ä¼—æ‰€å‘¨çŸ¥ Anthropic å…¬å¸äº2025å¹´9æœˆ5æ—¥æ›´æ–°æ”¿ç­–ï¼Œç¦æ­¢ä¸­å›½ä¼ä¸šå’Œä¸ªäººä½¿ç”¨ClaudeæœåŠ¡ï¼Œæ¶µç›–ä¸­å›½å¤§é™†åŠæµ·å¤–å­å…¬å¸ï¼Œå¹¶æ‹¦æˆªé€šè¿‡äº‘æœåŠ¡ç­‰é—´æ¥è®¿é—®æ–¹å¼ã€‚</p>
<p>Claude CLIæ˜¯Anthropicæ¨å‡ºçš„äº¤äº’å¼å‘½ä»¤è¡Œå·¥å…·ï¼Œå®ƒå°†å¼ºå¤§çš„ ClaudeAI èƒ½åŠ›ç›´æ¥é›†æˆåˆ°ä½ çš„ç»ˆç«¯ç¯å¢ƒä¸­ã€‚ä¸ä¼ ç»Ÿçš„AIèŠå¤©å·¥å…·ä¸åŒï¼ŒClaudeCLI ä¸“ä¸ºè½¯ä»¶å·¥ç¨‹Qä»»åŠ¡è®¾è®¡ï¼Œèƒ½å¤Ÿç›´æ¥è¯»å–ã€ç¼–è¾‘ä»£ç æ–‡ä»¶ï¼Œæ‰§è¡Œå‘½ä»¤ï¼Œç”šè‡³ç®¡ç†æ•´ä¸ªé¡¹ç›®çš„å¼€å‘æµç¨‹ã€‚</p>
<h3 data-id="heading-1">å®æ“æ–¹æ³•</h3>
<h4 data-id="heading-2">å®‰è£…Claude CLI</h4>
<p>é¦–å…ˆä½ éœ€å®‰è£… nodeJSï¼Œæ¨èå®‰è£…æœ€æ–°ç‰ˆæœ¬ã€‚</p>
<p>ç„¶åæ‰“å¼€ä½ æœºå™¨çš„ç»ˆç«¯ï¼ˆterminalï¼‰ä½¿ç”¨ npm å®‰è£… Claude CLIï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install -g @anthropic-ai/claude-code
</code></pre>
<p>è¿™æ ·å®‰è£…çš„ Claude CLI ä¼šå…¨å±€å¯ç”¨ã€‚ç‰ˆæœ¬ä¸º claude-cli çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå¦‚æœä½ å‘ç°è¿™ä¸ªç‰ˆæœ¬ä¸å¯ç”¨ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å›ºå®šç‰ˆæœ¬(2.0.57)ï¼Œå®æµ‹å¯ç”¨ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-css" lang="css">npm install -g <span class="hljs-keyword">@anthropic-ai</span>/claude-code<span class="hljs-keyword">@2</span>.0.57
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16f5febf33ae4bb1b7bd1e65cd24e7d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGVtbzAwN3g=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768374272&amp;x-signature=hmIJb%2F9ljxYCBPUT89nBA%2FEBuUA%3D" alt="image.png" loading="lazy"/>
å®‰è£…å®Œæˆååœ¨ terminal ä¸­è¾“å…¥claude, å¦‚æœå‡ºç°æç¤ºå‘½ä»¤æœªæ‰¾åˆ°ï¼Œåˆ™è¯´æ˜å®‰è£…æˆåŠŸï¼Œå¦‚æœå‡ºç°å…¶ä»–é”™è¯¯ï¼Œåˆ™è¯´æ˜å®‰è£…å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæ˜¯å¦æ­£å¸¸ï¼Œæˆ–è€…å°è¯•é‡æ–°å®‰è£…ã€‚</p>
<h4 data-id="heading-3">é…ç½®Claude CLI</h4>
<p>é…ç½®Claude CLIéœ€è¦ä¸€ä¸ªClaudeè´¦å·ï¼Œå¦‚æœæ²¡æœ‰è¯·å…ˆæ³¨å†Œä¸€ä¸ªã€‚å½“ç„¶åœ¨å›½å†…æ˜¯ç»ä¸èƒ½æ³¨å†Œ claude è´¦æˆ·äº†ï¼›é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ™ºè°±çš„APIï¼Œå®Œç¾å…¼å®¹ Claude API æœåŠ¡ã€‚</p>
<p>1ã€é¦–å…ˆä½ éœ€è¦ä¸€ä¸ªæ™ºè°±è´¦å·ï¼Œå¦‚æœæ²¡æœ‰è¯·å…ˆæ³¨å†Œä¸€ä¸ªã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bigmodel.cn%2Fglm-coding%3Fic%3DBYIKDI0LB5" target="_blank" title="https://www.bigmodel.cn/glm-coding?ic=BYIKDI0LB5" ref="nofollow noopener noreferrer">æ™ºè°± GLM Coding</a></p>
<p>2ã€è·å–ä½ çš„æ™ºè°±APIå¯†é’¥ï¼Œæ‰“å¼€<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bigmodel.cn%2Fglm-coding%3Fic%3DBYIKDI0LB5" target="_blank" title="https://www.bigmodel.cn/glm-coding?ic=BYIKDI0LB5" ref="nofollow noopener noreferrer">apikeys</a>æŸ¥çœ‹ä½ çš„APIå¯†é’¥ã€‚ä½ ä¹Ÿå¯ä»¥é‡æ–°ç”Ÿæˆä¸€ä¸ªã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8db2b88ec237424f983e349ec86b0592~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGVtbzAwN3g=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768374272&amp;x-signature=dEdy0tIdu8%2F0kqaIlRog%2FuLJVjg%3D" alt="image.png" loading="lazy"/>
3ã€æ‰“å¼€ä½ è‡ªå·±ç”µè„‘çš„ç›®å½•Â <code>C:\Users\youusername.claude</code></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be50e497d9514eeba2783b4605b71521~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGVtbzAwN3g=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768374272&amp;x-signature=vu8oL%2FfTmNkABhqX8UUHwIb9BwI%3D" alt="image.png" loading="lazy"/></p>
<p>4ã€å°†ä½ çš„APIå¯†é’¥å†™å…¥Â <code>config.json</code>Â æ–‡ä»¶ä¸­ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"ANTHROPIC_AUTH_TOKEN"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½ è‡ªå·±çš„ apikeys"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"ANTHROPIC_BASE_URL"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://open.bigmodel.cn/api/anthropic"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"API_TIMEOUT_MS"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"3000000"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>5ã€ä¿å­˜æ–‡ä»¶ï¼Œç„¶ååœ¨ terminal ä¸­è¾“å…¥claudeï¼Œå¦‚æœå‡ºç°æç¤ºå‘½ä»¤æœªæ‰¾åˆ°ï¼Œåˆ™è¯´æ˜é…ç½®æˆåŠŸï¼Œä¸å‡ºæ„å¤–ï¼Œ Claude CLI å°†ä¼šå¯åŠ¨ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71ee7e51b6a94f88948ae31938eb905e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGVtbzAwN3g=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768374272&amp;x-signature=3vw%2BD38wr%2FNeAVI4Td4v2wUboaw%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-4">ç¼–å†™ç¬¬ä¸€ä¸ªClaude CLIç¨‹åº</h4>
<p>1ã€æ‰“å¼€ä½ çš„ç»ˆç«¯ï¼ˆterminalï¼‰ï¼Œè¾“å…¥Â <code>claude</code>ï¼Œå¦‚æœå‡ºç°æç¤ºå‘½ä»¤æœªæ‰¾åˆ°ï¼Œåˆ™è¯´æ˜é…ç½®æˆåŠŸï¼Œä¸å‡ºæ„å¤–ï¼Œ Claude CLI å°†ä¼šå¯åŠ¨ã€‚</p>
<p>2ã€è¾“å…¥æˆ‘ä»¬çš„promptæˆ–è€…æ˜¯è¦æ±‚ï¼šâ€œå¸®æˆ‘åˆ›å»ºä¸€ä¸ªä¼ä¸šå®˜ç½‘çš„é¦–é¡µ index.htmlâ€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7f33ddf0974423ebb38259082c3862b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGVtbzAwN3g=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768374272&amp;x-signature=GR%2FjmKiMt61z7juzVY%2B2YjFABEo%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/185599319a3441a0b01a75d202620b8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGVtbzAwN3g=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768374272&amp;x-signature=K%2F76KWUk8Mn8Carykziz1a3FqLA%3D" alt="image.png" loading="lazy"/></p>
<p>3ã€Claude CLI å°†ä¼šæŒ‰ç…§æˆ‘ä»¬çš„è¦æ±‚å¸®æˆ‘ä»¬ç”Ÿæˆ index.html çš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬HTMLç»“æ„ï¼ŒCSSæ ·å¼ï¼ŒJavaScriptè„šæœ¬ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1808f8342c141a2b225dad42cea457d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGVtbzAwN3g=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768374272&amp;x-signature=x%2B7xaEeDV6wR9E7UL1Png%2Fafl%2BY%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸¤åˆ†é’Ÿåï¼Œé¡µé¢åšå®Œäº†ã€‚ä¸€èµ·æ¥çœ‹æ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/785d963ba5bb41d3984ef9c26b54f6d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGVtbzAwN3g=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768374272&amp;x-signature=iJWqsAXqTS6Vo9uRzCStZ6miz7Q%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-5">æ€»ç»“</h3>
<p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œä½ å·²ç»æˆåŠŸå®‰è£…å¹¶é…ç½®äº†Claude CLIï¼Œå¹¶ç¼–å†™äº†ä¸€ä¸ªç®€å•çš„ç¨‹åºã€‚Claude CLI çš„åŠŸèƒ½è¿œä¸æ­¢äºæ­¤ï¼Œå®ƒè¿˜æ”¯æŒè¯»å–ã€ç¼–è¾‘ä»£ç æ–‡ä»¶ï¼Œæ‰§è¡Œå‘½ä»¤ï¼Œç”šè‡³ç®¡ç†æ•´ä¸ªé¡¹ç›®çš„å¼€å‘æµç¨‹ã€‚å¸Œæœ›è¿™ç¯‡æ•™ç¨‹èƒ½å¸®åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹ Claude CLIï¼Œå¹¶åœ¨ä½ çš„å¼€å‘å·¥ä½œä¸­å‘æŒ¥é‡è¦ä½œç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025 å¹´æœ€ç«çš„å‰ç«¯é¡¹ç›®å‡ºç‚‰ï¼ŒNo.1 æ˜“ä¸»ï¼]]></title>    <link>https://juejin.cn/post/7592134330313179179</link>    <guid>https://juejin.cn/post/7592134330313179179</guid>    <pubDate>2026-01-07T06:44:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592134330313179179" data-draft-id="7592040819819085865" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025 å¹´æœ€ç«çš„å‰ç«¯é¡¹ç›®å‡ºç‚‰ï¼ŒNo.1 æ˜“ä¸»ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Node.js"/> <meta itemprop="datePublished" content="2026-01-07T06:44:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†´ç¾½"/> <meta itemprop="url" content="https://juejin.cn/user/712139234359182"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025 å¹´æœ€ç«çš„å‰ç«¯é¡¹ç›®å‡ºç‚‰ï¼ŒNo.1 æ˜“ä¸»ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/712139234359182/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†´ç¾½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T06:44:42.000Z" title="Wed Jan 07 2026 06:44:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    206
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. å‰è¨€</h2>
<p>å¿«æ¥çœ‹ï¼JavaScript Rising Stars å…¬å¸ƒäº† <a href="https://link.juejin.cn?target=https%3A%2F%2Frisingstars.js.org%2F2025%2Fen" target="_blank" title="https://risingstars.js.org/2025/en" ref="nofollow noopener noreferrer">2025 å¹´ JavaScript æ˜æ˜Ÿé¡¹ç›®æ¦œå•</a>ã€‚</p>
<p>æ­¤æ¦œå•æ ¹æ® 2025 å¹´ GitHub æ–°å¢çš„æ˜Ÿæ ‡æ•°é‡ï¼Œè¿˜å»ºç«‹äº†ä»¥ä¸‹æ¦œå•ï¼š</p>
<p>æœ€å—æ¬¢è¿çš„é¡¹ç›®ã€å‰ç«¯æ¡†æ¶ã€React ç”Ÿæ€ç³»ç»Ÿã€åç«¯/å…¨æ ˆã€æ„å»ºå·¥å…·ã€äººå·¥æ™ºèƒ½ã€ç§»åŠ¨ç«¯ã€Vue ç”Ÿæ€ç³»ç»Ÿã€çŠ¶æ€ç®¡ç†ã€CSS in JSã€ç»„ä»¶åº“ã€æµ‹è¯•ã€æ¡Œé¢ç«¯ã€é™æ€ç«™ç‚¹ã€GraphQLã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹ä¸€çœ‹éƒ½æ˜¯å“ªäº›é¡¹ç›®ä¸Šæ¦œäº†ã€‚</p>
<h2 data-id="heading-1">2. æœ€å—æ¬¢è¿é¡¹ç›®</h2>
<p>2025 æœ€å—æ¬¢è¿çš„ JavaScript é¡¹ç›® Top 10 åˆ†åˆ«æ˜¯ï¼š</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ecc272d2c4642718e4c97fdd49be41b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377245&amp;x-signature=zjsMca3LufT5Xvmu6eJi44k8u4g%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">2.1. æ€»å† å†›ï¼šn8n ğŸ†</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fn8n.io%2F" target="_blank" title="https://n8n.io/" ref="nofollow noopener noreferrer">n8n</a> æ˜¯ 2025 å¹´çš„ç»å¯¹èµ¢å®¶ï¼Œä¸€å¹´å†…è·å¾—äº†è¶…è¿‡ 112000 ä¸ªæ˜Ÿæ ‡ã€‚è¿‡å¾€ä»æ¥æ²¡æœ‰ä¸€ä¸ªé¡¹ç›®åœ¨ä¸€å¹´å†…è·å¾—å¦‚æ­¤å¤šçš„æ˜Ÿæ ‡ã€‚</p>
<p>n8n æ˜¯ä¸€ä¸ªå·¥ä½œæµè‡ªåŠ¨åŒ–å¹³å°ï¼Œå…·å¤‡åŸç”Ÿ AI åŠŸèƒ½ï¼Œå¯é€šè¿‡å¯è§†åŒ–å·¥ä½œæµè¿æ¥å„ç§åº”ç”¨ç¨‹åºå’ŒæœåŠ¡ã€‚å®ƒçš„æˆåŠŸåæ˜ äº†å¸‚åœºå¯¹æ— ä»£ç è‡ªåŠ¨åŒ–å·¥å…·æ—¥ç›Šå¢é•¿çš„éœ€æ±‚ã€‚</p>
<p>æ­¤å¤–ï¼Œåœ¨å‰ 10 ä¸­è¿˜æœ‰ 3 ä¸ªä¸ AI æœ‰å…³çš„é¡¹ç›®ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fonlook.com%2F" target="_blank" title="https://onlook.com/" ref="nofollow noopener noreferrer">Onlook</a>ï¼šä¸º React åº”ç”¨å¸¦æ¥ AI ä¼˜å…ˆçš„è§†è§‰ç¼–è¾‘åŠŸèƒ½</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdyad.sh%2F" target="_blank" title="https://dyad.sh/" ref="nofollow noopener noreferrer">Dyad</a>ï¼šä¸€æ¬¾å…è´¹ã€æœ¬åœ°åŒ–ã€å¼€æºçš„ AI åº”ç”¨æ„å»ºå™¨ï¼Œä¹Ÿæ˜¯ v0/lovable/Bolt çš„æ›¿ä»£æ–¹æ¡ˆ</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fstagehand.dev%2F" target="_blank" title="https://stagehand.dev/" ref="nofollow noopener noreferrer">Stagehand</a>ï¼šAI é©±åŠ¨çš„æµè§ˆå™¨è‡ªåŠ¨åŒ–</li>
</ul>
<h3 data-id="heading-3">2.2. äºšå†›ï¼šReact Bits</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Freactbits.dev%2F" target="_blank" title="https://reactbits.dev/" ref="nofollow noopener noreferrer">React Bits</a> æ˜¯ä¸€ç³»åˆ—ç²¾ç¾çš„ React åŠ¨ç”»ç»„ä»¶ï¼ˆèƒŒæ™¯æ•ˆæœã€æ–‡æœ¬åŠ¨ç”»ã€å¡ç‰‡ç­‰ï¼‰ï¼Œéå¸¸é€‚åˆæ„å»ºä»¤äººå°è±¡æ·±åˆ»çš„ç½‘ç«™ã€‚</p>
<p>æœ‰è¶£çš„æ˜¯ï¼Œå®ƒä»¥ shadcn/ui é¡¹ç›®çš„å½¢å¼åˆ†å‘ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤è¡Œä» shadcn/ui æ³¨å†Œè¡¨è·å–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¼ ç»Ÿçš„å¤åˆ¶ç²˜è´´æ–¹å¼æ·»åŠ åˆ°ä»£ç åº“ä¸­ã€‚</p>
<p>è¯¥æ–‡æ¡£é™„å¸¦ä¸€ä¸ªåå°å·¥ä½œå®¤ï¼Œå¯è®©ä½ è°ƒæ•´å’Œè‡ªå®šä¹‰æ‰€æœ‰ç»„ä»¶çš„è®¾ç½®ï¼ˆé¢œè‰²ã€é€Ÿåº¦ã€ç²’å­æ•°é‡â€¦â€¦ï¼‰ï¼Œå¹¶å°†å…¶å¯¼å‡ºä¸ºä»£ç ç‰‡æ®µï¼Œä½ å¯ä»¥å°†å…¶å¤åˆ¶ç²˜è´´åˆ°ä»£ç åº“ä¸­ã€‚</p>
<h3 data-id="heading-4">2.3. å­£å†›ï¼šshadcn-ui</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fui.shadcn.com%2F" target="_blank" title="https://ui.shadcn.com/" ref="nofollow noopener noreferrer">shadcn-ui</a> æ˜¯ 2023 å¹´å’Œ 2024 å¹´çš„å† å†›ï¼Œ2025 å¹´ä¾ç„¶ä¿æŒäº†å¼ºåŠ²çš„å‘å±•åŠ¿å¤´ã€‚</p>
<p>è¿™æ˜¯ä¸€å¥—è®¾è®¡ç²¾è‰¯ã€æ³¨é‡ç»†èŠ‚ï¼ˆä¾‹å¦‚å¯è®¿é—®æ€§ã€é”®ç›˜äº¤äº’ç­‰ï¼‰ä¸”é£æ ¼ç»Ÿä¸€çš„ React ç»„ä»¶ï¼Œèåˆäº† Radix UIã€TanStack Table ç­‰æ— å¤´ç»„ä»¶çš„ç²¾åâ€¦â€¦</p>
<p>shadcn/ui æœ€ä»¤äººæƒŠå¹çš„ç‰¹ç‚¹æ˜¯ï¼Œå®ƒåœ¨å¼€ç®±å³ç”¨çš„åŠŸèƒ½å’Œå¯å®šåˆ¶æ€§ä¹‹é—´æ‰¾åˆ°äº†æœ€ä½³å¹³è¡¡ç‚¹ã€‚</p>
<h2 data-id="heading-5">3. å‰ç«¯æ¡†æ¶</h2>
<p>å‰ç«¯æ¡†æ¶ Top 15 åˆ†åˆ«æ˜¯ï¼š</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90422fbb0d724cc19205216d2cec76e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377245&amp;x-signature=IKkAba%2BumSs4gSiR3MmwuS0ArIw%3D" alt="" loading="lazy"/></p>
<p>React é‡æ–°å¤ºå›äº† 2024 å¹´è¢« htmx å¤ºèµ°çš„ç‹å† ã€‚</p>
<p>è™½ç„¶æœ‰å…³äº Solid æˆ– Svelte ç­‰æ›¿ä»£æ–¹æ¡ˆæ˜¯å¦æ›´é€‚åˆæ–°é¡¹ç›®çš„äº‰è®ºï¼Œä½†å› ä¸º LLMs åŸºäº React ä»£ç åº“è¿›è¡Œè®­ç»ƒï¼Œä½¿å¾—è¿™äº›æ›¿ä»£æ–¹æ¡ˆå¾ˆéš¾è·å¾—å¸‚åœºä»½é¢ã€‚</p>
<p>React 19 å¼•å…¥äº†é‡å¤§æ”¹è¿›ï¼ŒåŒ…æ‹¬ <strong>Activity API</strong> å’Œç”¨äºç®¡ç†ç”¨æˆ·äº‹ä»¶çš„å¢å¼ºå‹ hooksã€‚</p>
<p>è¯´åˆ° effectsï¼ŒCloudflare å› ä¸ºé”™è¯¯ä½¿ç”¨ useEffect ï¼Œå¯¼è‡´æ— é™è°ƒç”¨å…¶ API ï¼Œæœ€ç»ˆå¯¼è‡´è‡ªèº«é­å— DDoS æ”»å‡»ï¼Œé€ æˆäº†æœåŠ¡ä¸­æ–­ã€‚</p>
<p>React å‘æœåŠ¡å™¨ç«¯è¿ç§»ï¼Œæ¨å‡ºäº† React Server Componentsï¼Œè¿™æ˜¯è¿‘å¹´æ¥æœ€å¤§çš„å˜é©ã€‚ç„¶è€Œï¼Œè¿™ç§å˜é©ä¹Ÿå¸¦æ¥äº†å·¨å¤§çš„åŠŸèƒ½å’Œé£é™©ï¼Œä¾‹å¦‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Freact2shell.com%2F" target="_blank" title="https://react2shell.com/" ref="nofollow noopener noreferrer">React2Shell</a> æ¼æ´ï¼Œè¿™æ˜¯ä¸€ä¸ª React Server Components ä¸­çš„è¿œç¨‹ä»£ç æ‰§è¡Œ (RCE) æ¼æ´ï¼Œéœ€è¦ç´§æ€¥å‘å¸ƒè¡¥ä¸è¿›è¡Œä¿®å¤ã€‚ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev%2Fblog%2F2025%2F12%2F03%2Fcritical-security-vulnerability-in-react-server-components" target="_blank" title="https://react.dev/blog/2025/12/03/critical-security-vulnerability-in-react-server-components" ref="nofollow noopener noreferrer">2025 å¹´ 12 æœˆ 3 æ—¥</a>ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev%2Fblog%2F2025%2F12%2F11%2Fdenial-of-service-and-source-code-exposure-in-react-server-components" target="_blank" title="https://react.dev/blog/2025/12/11/denial-of-service-and-source-code-exposure-in-react-server-components" ref="nofollow noopener noreferrer">2025 å¹´ 12 æœˆ 11 æ—¥ï¼‰</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fripplejs.com%2F" target="_blank" title="https://ripplejs.com/" ref="nofollow noopener noreferrer">Ripple</a> ä½åˆ—ç¬¬äºŒï¼Œæ˜¯å‰äº”åä¸­çš„æ–°ç§€ã€‚å®ƒæ˜¯ä¸€ä¸ªå…¨æ–°çš„ UI æ¡†æ¶ï¼Œèåˆäº† Reactã€Solid å’Œ Svelte çš„ä¼˜ç‚¹ã€‚å®ƒæ‹¥æœ‰å“åº”å¼åŸè¯­ã€ç»„ä»¶åŒ–æ¶æ„å’Œæ¨¡æ¿è¯­æ³•ã€‚</p>
<p>ç›®å‰ä»å¤„äºæ—©æœŸå¼€å‘é˜¶æ®µã€‚React æœ‰ Next.jsï¼ŒVue.js æœ‰ Nuxtï¼ŒSvelte æœ‰ SvelteKitï¼ŒSolid æœ‰ SolidStartâ€¦â€¦Ripple æ˜¯å¦ä¹Ÿä¼šæœ‰è‡ªå·±çš„å…ƒæ¡†æ¶æ¥å¤„ç†æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼Ÿ</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fsvelte.dev%2F" target="_blank" title="https://svelte.dev/" ref="nofollow noopener noreferrer">Svelte</a> è¿ç»­ç¬¬ä¸‰å¹´ä½åˆ—ç¬¬ä¸‰ã€‚Svelte 5 çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fsvelte.dev%2Fdocs%2Fsvelte%2Fwhat-are-runes" target="_blank" title="https://svelte.dev/docs/svelte/what-are-runes" ref="nofollow noopener noreferrer">Runes</a> å“åº”å¼ç³»ç»Ÿï¼ˆ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>t</mi><mi>e</mi><mtext>ã€</mtext></mrow><annotation encoding="application/x-tex">stateã€</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord cjk_fallback">ã€</span></span></span></span></span>derivedã€$effectï¼‰å·²æˆä¸ºçŠ¶æ€ç®¡ç†çš„æ ‡å‡†æ–¹å¼ã€‚</p>
<h2 data-id="heading-6">4. React ç”Ÿæ€ç³»ç»Ÿ</h2>
<p>React ç”Ÿæ€ç³»ç»Ÿ Top 10 åˆ†åˆ«æ˜¯ï¼š</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b58e5280c2f14b13944b16bce0e4d57e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377245&amp;x-signature=%2BuiZO2m0aA070ZZbawNXNJlZNSY%3D" alt="" loading="lazy"/></p>
<p>2025 å¹´ï¼ŒReact ç”Ÿæ€ç³»ç»Ÿè¿æ¥äº†ä¸€ä¸ªæ˜æ˜¾çš„è½¬æŠ˜ç‚¹ï¼Œå…¶æ ¸å¿ƒåœ¨äºä¸€ä¸ªé•¿æœŸå­˜åœ¨çš„çŸ›ç›¾ï¼šæ—¥ç›Šå¼ºå¤§çš„æœåŠ¡å™¨ç«¯åŠŸèƒ½ä¸ä¿æŒå®¢æˆ·ç«¯å¼€å‘ç®€æ´æ€§å’Œå¯é¢„æµ‹æ€§ä¹‹é—´çš„å†²çªã€‚</p>
<p>åœ¨ Next.js çš„å¼•é¢†ä¸‹ï¼ŒReact å‘æœåŠ¡å™¨ç»„ä»¶ã€æœåŠ¡å™¨å‡½æ•°å’Œæµå¼ä¼ è¾“çš„è½¬å‹ï¼Œå¼€å¯äº†æ€§èƒ½å’Œæ¶æ„æ–¹é¢çš„æ–°å¯èƒ½ã€‚ä¸æ­¤åŒæ—¶ï¼Œè¿™ç§è½¬å˜ä¹Ÿå¼•å…¥äº†ä¸€ç§æ–°çš„æ€ç»´æ¨¡å¼ï¼šç†è§£å®¢æˆ·ç«¯-æœåŠ¡å™¨è¾¹ç•Œã€æ•°æ®ç”Ÿå‘½å‘¨æœŸå’Œæ¸²æŸ“é˜¶æ®µå¯¹äºæ—¥å¸¸å¼€å‘è‡³å…³é‡è¦ã€‚</p>
<p>ç¤¾åŒºå¯¹æ­¤ååº”ä¸ä¸€ã€‚</p>
<p>ä¸€äº›äººæ¬£ç„¶æ¥å—æ–°çš„æœåŠ¡å™¨ä¼˜å…ˆæ–¹å‘ï¼Œè®¤ä¸ºè¿™æ˜¯ React çš„è‡ªç„¶æ¼”è¿›ï¼›è€Œå¦ä¸€äº›äººåˆ™è´¨ç–‘ï¼Œè¿™ç§å¢åŠ çš„å¤æ‚æ€§æ˜¯å¦å€¼å¾—ç”¨äºæ—¥å¸¸ UI å¼€å‘ã€‚å›´ç»•æœåŠ¡å™¨åŠŸèƒ½å’Œè¯·æ±‚è¾¹ç•Œçš„å®‰å…¨äº‹ä»¶è¿›ä¸€æ­¥åŠ å‰§äº†è¿™åœºäº‰è®ºã€‚è¿™äº›äº‹ä»¶æš´éœ²äº†é«˜åº¦æŠ½è±¡çš„å…¨æ ˆæ¨¡å¼å¸¦æ¥çš„é£é™©ï¼ŒåŒæ—¶ä¹Ÿè¡¨æ˜äº†å¦ä¸€ä»¶äº‹ï¼šReact çš„æœåŠ¡å™¨ç«¯æ¨¡å‹å·²ç»è¾¾åˆ°äº†å®é™…åº”ç”¨çš„ç¨‹åº¦ï¼Œå…¶å‡è®¾æ­£åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ¥å—å‹åŠ›æµ‹è¯•ã€å®¡è®¡å’ŒæŒ‘æˆ˜ã€‚</p>
<p>åœ¨æ­¤èƒŒæ™¯ä¸‹ï¼ŒTanStack Start å› å…¶ä»¥æ›´ä»¥å®¢æˆ·ç«¯ä¸ºä¸­å¿ƒï¼ˆä¸”åŒæ„ï¼‰çš„è§†è§’çœ‹å¾… React çš„æ–°åŠŸèƒ½è€Œå¤‡å—å…³æ³¨ï¼Œå®ƒä¼˜å…ˆè€ƒè™‘æ¸…æ™°æ€§ã€ç±»å‹å®‰å…¨æ€§å’Œæ˜¾å¼æ§åˆ¶ã€‚è¿™è‡ªç„¶è€Œç„¶åœ°å°†è®¨è®ºçš„ç„¦ç‚¹ä»æ¡†æ¶æœ¬èº«è½¬ç§»åˆ°äº†å…³äºå¼€å‘è€…åº”è¯¥æ¥å—å¤šå°‘æŠ½è±¡ä»¥åŠå¤æ‚æ€§çœŸæ­£å½’å±çš„ç†å¿µä¹‹äº‰ï¼Œè€ŒéåŠŸèƒ½ç«èµ›ã€‚</p>
<h2 data-id="heading-7">5. åç«¯ / å…¨æ ˆ</h2>
<p>åç«¯ / å…¨æ ˆ Top 10 åˆ†åˆ«æ˜¯ï¼š</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be8bf6275d4f4099819c15ebdebc0538~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377245&amp;x-signature=2FvvI6OV6kflCtxxUCFhWgmy3NQ%3D" alt="" loading="lazy"/></p>
<p>ä¸€æ¬¾æ–°æ™‹äº§å“è£è·åç«¯/å…¨æ ˆç±»åˆ«å† å†›ï¼</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmotia.dev%2F" target="_blank" title="https://motia.dev/" ref="nofollow noopener noreferrer">Motia</a> ä»£è¡¨äº†åç«¯å·¥ç¨‹é¢†åŸŸçš„èŒƒå¼è½¬å˜ï¼Œå®ƒå°†ä»¥å¾€éœ€è¦å¤šä¸ªç‹¬ç«‹æ¡†æ¶æ‰èƒ½å®ç°çš„åŠŸèƒ½æ•´åˆåˆ°ä¸€ä¸ªç³»ç»Ÿä¸­ã€‚ç”¨æˆ·æ— éœ€å†ä¸º APIã€åå°ä»»åŠ¡ã€é˜Ÿåˆ—ã€å·¥ä½œæµã€æ•°æ®æµå’Œ AI ä»£ç†ç­‰å„ç§å·¥å…·è€Œçƒ¦æ¼ï¼ŒMotia æä¾›äº†ä¸€ä¸ªæ¶µç›–æ‰€æœ‰åç«¯åŠŸèƒ½çš„ç»Ÿä¸€æ¡†æ¶ã€‚</p>
<p>Motia çš„æ ¸å¿ƒæ˜¯ä½¿ç”¨åä¸ºâ€œæ­¥éª¤â€<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.motia.dev%2Fdocs%2Fconcepts%2Fsteps" target="_blank" title="https://www.motia.dev/docs/concepts/steps" ref="nofollow noopener noreferrer">ï¼ˆStepsï¼‰</a>çš„åŸºæœ¬å•å…ƒï¼Œå®ƒæ˜¯ä¸€ç§å•ä¸€çš„æŠ½è±¡æ¦‚å¿µï¼Œå®šä¹‰äº†ä»£ç çš„è¿è¡Œæ–¹å¼ã€è¿è¡Œæ—¶é—´ã€è¿è¡Œåœ°ç‚¹ä»¥åŠè¿è¡Œå†…å®¹ã€‚æ¯ä¸ªæ­¥éª¤éƒ½åŒ…å«ä¸€ä¸ªé…ç½®ï¼ˆç”¨äºå®šä¹‰è§¦å‘å™¨ã€è·¯å¾„å’Œè®¡åˆ’ä»»åŠ¡ï¼‰å’Œä¸€ä¸ªå¤„ç†ç¨‹åºï¼ˆç”¨äºæ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼‰ã€‚æ›´æ”¹æ­¥éª¤ç±»å‹ï¼Œç›¸åŒçš„æ¨¡å¼å³å¯åº”ç”¨äºä¸åŒçš„ç”¨ä¾‹ï¼šAPI ç«¯ç‚¹ã€äº‹ä»¶å¤„ç†ç¨‹åºæˆ–å®šæ—¶ä»»åŠ¡ã€‚</p>
<p>æ­¥éª¤å¯ä»¥ç”¨ TypeScript æˆ– Python ç¼–å†™ã€‚å®ƒè¿˜é€šè¿‡ Workbench æä¾›å†…ç½®çš„å¯è§‚å¯Ÿæ€§ï¼ŒWorkbench æ˜¯ä¸€ä¸ªå¯è§†åŒ–æ§åˆ¶é¢æ¿ï¼Œç”¨äºç®¡ç†ã€è°ƒè¯•å’Œè§‚å¯Ÿè¿è¡Œæƒ…å†µï¼Œæ­¤å¤–è¿˜å†…ç½®äº†çŠ¶æ€ç®¡ç†å’Œæµå¼ä¼ è¾“åŠŸèƒ½ã€‚</p>
<p>æ¥ä¸‹æ¥çš„ 4 ä¸ªé¡¹ç›®ä¸ 2024 å¹´ç›¸åŒï¼Œåªæ˜¯ Hono å’Œ Astro çš„ä½ç½®äº’æ¢äº†ã€‚</p>
<p>å»å¹´æ’åç¬¬ä¸€çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fpayloadcms.com%2F" target="_blank" title="https://payloadcms.com/" ref="nofollow noopener noreferrer">Payload æ˜¯ä¸€æ¬¾åŸºäº Next.js çš„æ··åˆå‹æ— å¤´ CMS å’Œç®¡ç†é¢æ¿ã€‚æœ€å¤§çš„æ–°é—»æ˜¯å®ƒ</a><a href="https://link.juejin.cn?target=https%3A%2F%2Fpayloadcms.com%2Fposts%2Fblog%2Fpayload-is-joining-figma" target="_blank" title="https://payloadcms.com/posts/blog/payload-is-joining-figma" ref="nofollow noopener noreferrer">è¢« Figma æ”¶è´­</a>ï¼Œå…¶æœ€ç»ˆç›®æ ‡æ˜¯ç¼©å°è®¾è®¡ä¸ä»£ç ä¹‹é—´çš„å·®è·ã€‚</p>
<p>Next.js 16 å¼•å…¥äº†<a href="https://link.juejin.cn?target=https%3A%2F%2Fnextjs.org%2Fblog%2Fnext-16%23cache-components" target="_blank" title="https://nextjs.org/blog/next-16#cache-components" ref="nofollow noopener noreferrer">ç¼“å­˜ç»„ä»¶</a>ï¼Œä½¿ç¼“å­˜æœºåˆ¶æ›´åŠ æ˜ç¡®å’Œçµæ´»ã€‚å¼€å‘è€…å¯ä»¥åˆ›å»ºåŒ…å«æ¥è‡ªæœåŠ¡å™¨çš„åŠ¨æ€å†…å®¹æµçš„é™æ€é¡µé¢æ¡†æ¶ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fastro.build%2F" target="_blank" title="https://astro.build/" ref="nofollow noopener noreferrer">Astro</a> ä½åˆ—ç¬¬å››ï¼Œå®ƒç»§ç»­é—ªè€€ç€å…‰èŠ’ï¼Œä½œä¸ºä¸€ä¸ªå¤šåŠŸèƒ½çš„æ¡†æ¶ï¼Œå¯ä»¥æ„å»ºå†…å®¹ä¸°å¯Œçš„åº”ç”¨ç¨‹åºï¼ˆä¾‹å¦‚æ‚¨å–œçˆ±çš„ JS Rising Starsï¼ï¼‰ï¼ŒåŒæ—¶æä¾›è‰¯å¥½çš„å¼€å‘è€…ä½“éªŒå¹¶æ³¨é‡æ€§èƒ½ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhono.dev%2F" target="_blank" title="https://hono.dev/" ref="nofollow noopener noreferrer">Hono</a> ä½åˆ—ç¬¬äº”ï¼Œå‡­å€Ÿå…¶è½»é‡çº§æ ¸å¿ƒï¼ˆå¯åœ¨ Node.js è¿è¡Œæ—¶ã€Cloudflare å·¥ä½œè¿›ç¨‹ç­‰å„ç§ç¯å¢ƒä¸­è¿è¡Œï¼‰ä»¥åŠä¸°å¯Œçš„å¤„ç†å™¨å’Œä¸­é—´ä»¶ç”Ÿæ€ç³»ç»Ÿï¼Œæˆä¸ºç°ä»£ Web æœåŠ¡å™¨çš„æ ‡å‡†ï¼ˆå³ä½¿ <a href="https://link.juejin.cn?target=https%3A%2F%2Fexpressjs.com%2F" target="_blank" title="https://expressjs.com/" ref="nofollow noopener noreferrer">Express ä»ç„¶æµè¡Œï¼ï¼‰ã€‚</a></p>
<p>å…ƒæ¡†æ¶ç±»åˆ«ä¸­æœ€å¤§çš„å˜åŒ–æ˜¯<a href="https://link.juejin.cn?target=https%3A%2F%2Ftanstack.com%2Fstart%2Flatest" target="_blank" title="https://tanstack.com/start/latest" ref="nofollow noopener noreferrer">Tanstack Start</a>çš„å´›èµ·ï¼Œå¦‚æœä½ æƒ³åœ¨ React ä¹‹ä¸Šæ„å»ºå…¨æ ˆåº”ç”¨ç¨‹åºï¼Œå®ƒæ˜¯ Next.js çš„æœ€ä½³æ›¿ä»£æ–¹æ¡ˆä¹‹ä¸€ã€‚</p>
<h2 data-id="heading-8">6. å·¥å…·</h2>
<p>å·¥å…· Top 5 åˆ†åˆ«æ˜¯ï¼š</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06a12e0f133d4e70acc67461df248a82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377245&amp;x-signature=cC8H9AIzxFl4f5kri5a72rYE6Mc%3D" alt="" loading="lazy"/></p>
<p>Bun çš„æŒç»­åŠªåŠ›æœ€ç»ˆè·å¾—äº†å›æŠ¥ï¼Œè¿™æ¬¾ä¸€ä½“åŒ– JavaScript å·¥å…·åŒ…è£ç™»æ¦œé¦–ã€‚åœ¨è¿‡å»çš„ä¸€å¹´ä¸­ï¼Œå®ƒä¸æ–­æå‡æ€§èƒ½ã€å¢å¼ºå¯¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fbun.com%2Fblog%2Fbun-v1.2%23node-js-compatibility" target="_blank" title="https://bun.com/blog/bun-v1.2#node-js-compatibility" ref="nofollow noopener noreferrer">Node.js çš„å…¼å®¹æ€§</a>ï¼Œå¹¶æ¨å‡ºè®¸å¤šå®ç”¨æ–°åŠŸèƒ½ï¼Œä½¿å…¶æˆä¸º<a href="https://link.juejin.cn?target=https%3A%2F%2Fbun.com%2Fblog%2Fbun-v1.3%23full-stack-javascript-runtime" target="_blank" title="https://bun.com/blog/bun-v1.3#full-stack-javascript-runtime" ref="nofollow noopener noreferrer">å…¨æ ˆ JavaScript å¼€å‘çš„ç†æƒ³å¹³å°</a>ã€‚å¹´åº•ï¼ŒBun è¢« Anthropic æ”¶è´­ï¼Œæˆ‘ä»¬éå¸¸æœŸå¾… 2026 å¹´ Bun çš„å‘å±•ã€‚</p>
<p>ä»Šå¹´å¯¹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fvoidzero.dev%2F" target="_blank" title="https://voidzero.dev/" ref="nofollow noopener noreferrer">void(0)</a> æ¥è¯´ä¹Ÿæ„ä¹‰éå‡¡ã€‚è¯¥å…¬å¸<a href="https://link.juejin.cn?target=https%3A%2F%2Fvoidzero.dev%2Fposts%2Fannouncing-voidzero-inc" target="_blank" title="https://voidzero.dev/posts/announcing-voidzero-inc" ref="nofollow noopener noreferrer">åœ¨ 2024 å¹´åº•å®£å¸ƒ</a>ï¼Œå…¶æ­£åœ¨å¼€å‘æ–°ä¸€ä»£å‰ç«¯åŸºç¡€è®¾æ–½å·¥å…·ï¼ˆOxc å’Œ Rolldownï¼‰ï¼Œå¹¶å·²è®©æˆ‘ä»¬å¾—ä»¥ä¸€çª¥æœªæ¥å‘å±•æ–¹å‘ã€‚å…¶æ——èˆ°é¡¹ç›® Vite åœ¨è¿™ä¸€å¹´ä¸­æŒç»­æ”¹è¿›ï¼Œç¨³å®šäº†æ–°çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fmain.vite.dev%2Fguide%2Fapi-environment" target="_blank" title="https://main.vite.dev/guide/api-environment" ref="nofollow noopener noreferrer">Environment API</a>ï¼Œå¹¶å®ç°äº†å¯¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fvite.dev%2Fblog%2Fannouncing-vite8-beta" target="_blank" title="https://vite.dev/blog/announcing-vite8-beta" ref="nofollow noopener noreferrer">åŸºäº Rust çš„å…¨æ–°æ‰“åŒ…å·¥å…· Rolldown çš„</a>æ”¯æŒã€‚è¯¥é¡¹ç›®ç”šè‡³è¿˜æ‹¥æœ‰äº†è‡ªå·±çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DbmWQqAKLgT4" target="_blank" title="https://www.youtube.com/watch?v=bmWQqAKLgT4" ref="nofollow noopener noreferrer">çºªå½•ç‰‡</a>ã€‚Vitest ä¹Ÿå‘å¸ƒäº†å…¶æœ€å—æœŸå¾…çš„åŠŸèƒ½ä¹‹ä¸€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fvoidzero.dev%2Fposts%2Fannouncing-vitest-4" target="_blank" title="https://voidzero.dev/posts/announcing-vitest-4" ref="nofollow noopener noreferrer">æµè§ˆå™¨æ¨¡å¼</a>ã€‚Oxc ç”Ÿæ€ç³»ç»Ÿä¸­æ¶Œç°å‡ºè®¸å¤šä»¤äººå…´å¥‹çš„æ–°é¡¹ç›®ï¼Œå®ƒä»¬å°†æˆä¸ºç°æœ‰å·¥å…·æå…·å¸å¼•åŠ›çš„æ›¿ä»£æ–¹æ¡ˆï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Foxc.rs%2Fblog%2F2025-06-10-oxlint-stable.html" target="_blank" title="https://oxc.rs/blog/2025-06-10-oxlint-stable.html" ref="nofollow noopener noreferrer">Oxlint</a>æœ‰æœ›æˆä¸ºæ–°ä¸€ä»£ ESLintï¼Œè€Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Foxc.rs%2Fblog%2F2025-12-01-oxfmt-alpha.html" target="_blank" title="https://oxc.rs/blog/2025-12-01-oxfmt-alpha.html" ref="nofollow noopener noreferrer">Oxfmt åˆ™</a>å¯èƒ½æˆä¸ºæ–°ä¸€ä»£ Prettierã€‚è¯¥å…¬å¸åœ¨å¹´åº•å®Œæˆäº†<a href="https://link.juejin.cn?target=https%3A%2F%2Fvoidzero.dev%2Fposts%2Fannouncing-series-a" target="_blank" title="https://voidzero.dev/posts/announcing-series-a" ref="nofollow noopener noreferrer">æ–°ä¸€è½® A è½®èèµ„</a>ï¼Œå¹¶å‘å¸ƒäº†å…¶é¦–æ¬¾å•†ä¸šäº§å“<a href="https://link.juejin.cn?target=https%3A%2F%2Fvoidzero.dev%2Fposts%2Fannouncing-vite-plus" target="_blank" title="https://voidzero.dev/posts/announcing-vite-plus" ref="nofollow noopener noreferrer">Vite+</a>ã€‚</p>
<p>å€¼å¾—ä¸€æçš„è¿˜æœ‰<a href="https://link.juejin.cn?target=https%3A%2F%2Frspack.rs%2F" target="_blank" title="https://rspack.rs/" ref="nofollow noopener noreferrer">Rspack</a>ã€‚è¿™æ¬¾æ¥è‡ªå­—èŠ‚è·³åŠ¨çš„åŸºäº Rust çš„æ‰“åŒ…å·¥å…·ï¼Œé€Ÿåº¦æ›´å¿«ï¼Œè€Œä¸”å¯ä»¥å³æ’å³ç”¨ï¼Œæ˜¯ webpack çš„æ›¿ä»£æ–¹æ¡ˆï¼Œå› æ­¤å®ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fnpmtrends.com%2F%40rspack%2Fcore" target="_blank" title="https://npmtrends.com/@rspack/core" ref="nofollow noopener noreferrer">ä»Šå¹´è¢«å¹¿æ³›é‡‡ç”¨</a>ä¹Ÿå°±ä¸è¶³ä¸ºå¥‡äº†ã€‚æ›´å¹¿æ³›çš„ Rstack ç”Ÿæ€ç³»ç»Ÿä¹Ÿå€¼å¾—å…³æ³¨ï¼Œå®ƒå‚¬ç”Ÿäº†<a href="https://link.juejin.cn?target=https%3A%2F%2Frstest.rs%2F" target="_blank" title="https://rstest.rs/" ref="nofollow noopener noreferrer">Rstest</a>å’Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Frslint.org%2F" target="_blank" title="https://rslint.org/" ref="nofollow noopener noreferrer">Rslint</a>ç­‰æ–°å·¥å…·ã€‚</p>
<p>Next.js æœ€è¿‘å°†é»˜è®¤æ‰“åŒ…å·¥å…·<a href="https://link.juejin.cn?target=https%3A%2F%2Fnextjs.org%2Fblog%2Fnext-16%23turbopack-stable" target="_blank" title="https://nextjs.org/blog/next-16#turbopack-stable" ref="nofollow noopener noreferrer">åˆ‡æ¢ä¸º Turbopack</a> ï¼Œç›¸æ¯”ä¹‹å‰çš„æ‰“åŒ…å·¥å…· webpackï¼Œé€Ÿåº¦æœ‰äº†æ˜¾è‘—æå‡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¹Ÿå¯ä»¥<a href="https://link.juejin.cn?target=https%3A%2F%2Frspack.rs%2Fblog%2Frspack-next-partner" target="_blank" title="https://rspack.rs/blog/rspack-next-partner" ref="nofollow noopener noreferrer">ä½¿ç”¨ Rspack æ„å»º Next.js åº”ç”¨</a>ã€‚</p>
<p>å°½ç®¡å°šæœªå®Œå…¨æˆç†Ÿï¼Œä½†å¾®è½¯ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdevblogs.microsoft.com%2Ftypescript%2Ftypescript-native-port%2Fhttps%3A%2F%2Fdevblogs.microsoft.com%2Ftypescript%2Ftypescript-native-port%2F" target="_blank" title="https://devblogs.microsoft.com/typescript/typescript-native-port/https://devblogs.microsoft.com/typescript/typescript-native-port/" ref="nofollow noopener noreferrer">Go è¯­è¨€é‡å†™ TypeScript</a>æ— ç–‘æ˜¯ä»Šå¹´æœ€é‡è¦çš„å…¬å‘Šä¹‹ä¸€ï¼Œè¿™å°†æ˜¾è‘—æå‡å…¶é€Ÿåº¦ã€‚å›¢é˜Ÿè¿‘æœŸ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdevblogs.microsoft.com%2Ftypescript%2Fprogress-on-typescript-7-december-2025%2F" target="_blank" title="https://devblogs.microsoft.com/typescript/progress-on-typescript-7-december-2025/" ref="nofollow noopener noreferrer">åˆ†äº«äº†æœ€æ–°è¿›å±•</a>ï¼ŒåŸç”Ÿ TypeScript ä½“éªŒä¼¼ä¹å·²ç»å‡†å¤‡å¥½è¿æ¥æ—©æœŸç”¨æˆ·ã€‚TypeScript 6.0 å°†æ˜¯æœ€åä¸€ä¸ªåŸºäº JavaScript çš„ç‰ˆæœ¬ï¼Œå®ƒå°†ä½œä¸ºè¿‡æ¸¡åˆ° TypeScript 7.0ï¼ˆGo é‡å†™ç‰ˆï¼‰çš„æ¡¥æ¢ã€‚å±•æœ› 2025 å¹´ï¼Œç°ä»£åŸºç¡€è®¾æ–½å·¥å…·è¶Šæ¥è¶Šå¤šåœ°æºè‡ªå¤§å‹ä¼ä¸šæˆ–é£é™©æŠ•èµ„æ”¯æŒçš„å…¬å¸ï¼Œè¿™å¼•å‘äº†ä¸€ä¸ªé‡è¦é—®é¢˜ï¼šæˆç†Ÿçš„ã€ç¤¾åŒºé©±åŠ¨çš„é¡¹ç›®èƒ½å¦åœ¨æœªæ¥ä¸€å¹´ä¿æŒç«äº‰åŠ›ï¼Ÿ</p>
<h2 data-id="heading-9">7. äººå·¥æ™ºèƒ½</h2>
<p>äººå·¥æ™ºèƒ½ Top 10 åˆ†åˆ«æ˜¯ï¼š</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74036c20abac48289c5af6dc3491b66e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377245&amp;x-signature=chKX8nRWjWklwrLGTDiU0ogiyP4%3D" alt="" loading="lazy"/></p>
<p>èŠå¤©æœºå™¨äººæ—¶ä»£å·²ç»ç»“æŸã€‚å¦‚ä»Šå¼€å‘è€…ä»¬æ›´å…³æ³¨çš„å·¥å…·å¹¶éèŠå¤©æœºå™¨äººåº“æˆ–æç¤ºå™¨ï¼Œè€Œæ˜¯å·¥ä½œæµå¼•æ“ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fn8n.io%2F" target="_blank" title="https://n8n.io/" ref="nofollow noopener noreferrer">n8n</a> çš„è¡¨ç°ä»¤äººç©ç›®ï¼Œé¢„è®¡ 2025 å¹´ç”¨æˆ·æ•°é‡å°†å¢é•¿ 11.2 ä¸‡ã€‚è¿™å¹¶ä¸ä»¤äººæ„å¤–ï¼Œn8n æ­£åœ¨æˆä¸ºè¿æ¥å‰æ²¿æ¨¡å‹å’Œæ„å»ºè¿™äº›ä»£ç†å·¥å…·çš„é¦–é€‰å·¥å…·ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdyad.sh%2F" target="_blank" title="https://dyad.sh/" ref="nofollow noopener noreferrer">Dyad</a> ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fflowiseai.com%2F" target="_blank" title="https://flowiseai.com/" ref="nofollow noopener noreferrer">Flowise</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fmastra.ai%2F" target="_blank" title="https://mastra.ai/" ref="nofollow noopener noreferrer">Mastra</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fstagehand.dev%2F" target="_blank" title="https://stagehand.dev/" ref="nofollow noopener noreferrer">Stagehand</a> ç­‰å…¬å¸å ªç§°è‡ªåŠ¨åŒ–å’Œä»£ç†å·¥ä½œæµé¢†åŸŸçš„ä½¼ä½¼è€…ã€‚Vercel ä»ç„¶æ˜¯é‚£äº›å¸Œæœ›ä»åº•å±‚æŒæ§èŠå¤©å’Œä»£ç†æµç¨‹çš„ç”¨æˆ·çš„é¦–é€‰ï¼ˆä½†ä»–ä»¬ä¹Ÿåœ¨ä¸æ–­æ·»åŠ ä»£ç†åŠŸèƒ½ï¼‰ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTanStack%2Fai" target="_blank" title="https://github.com/TanStack/ai" ref="nofollow noopener noreferrer">TanStack AI</a> è™½ç„¶æ˜¯åèµ·ä¹‹ç§€ï¼Œä½†å‡­å€Ÿå…¶å¼ºå¤§çš„ä»£ç†åŠŸèƒ½ï¼Œæ­£åœ¨è¿…é€Ÿå´›èµ·ã€‚</p>
<p>æ‰€ä»¥ï¼Œè¿™æ˜¯ä½ ä»¬ 2026 å¹´çš„ä½œä¸šï¼šåˆ«å†é—®â€œå¦‚ä½•è®©æˆ‘çš„ LLM åšå‡ºæ›´å¥½çš„å›åº”â€ï¼Œè€Œæ˜¯å¼€å§‹é—®â€œå“ªäº›å·¥ä½œæµç¨‹å¯ä»¥å®Œå…¨äº¤ç»™ AI å¤„ç†ï¼Ÿâ€</p>
<p>é€‰æ‹© n8n æˆ– <a href="https://link.juejin.cn?target=https%3A%2F%2Fflowiseai.com%2F" target="_blank" title="https://flowiseai.com/" ref="nofollow noopener noreferrer">Flowise</a>ï¼Œæ„å»ºä¸€ä¸ªèƒ½å¤Ÿæ ¹æ®äº‹ä»¶è§¦å‘ã€æ¨ç†é€‰é¡¹å¹¶è‡ªåŠ¨æ‰§è¡Œæ“ä½œçš„ç¨‹åºï¼Œæ— éœ€å¾å¾—è®¸å¯ã€‚æ­å»ºä¸€ä¸ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fmastra.ai%2F" target="_blank" title="https://mastra.ai/" ref="nofollow noopener noreferrer">Mastra</a> ä»£ç†ï¼Œä½¿å…¶èƒ½å¤Ÿè·¨å¤šä¸ªå·¥å…·å’Œå¹³å°è¿›è¡Œåè°ƒã€‚å°è¯•ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fstagehand.dev%2F" target="_blank" title="https://stagehand.dev/" ref="nofollow noopener noreferrer">Stagehand</a> æ¥è‡ªåŠ¨åŒ–æµè§ˆå™¨ä»»åŠ¡ã€‚</p>
<p>èŠå¤©æœºå™¨äººåªæ˜¯è¾…åŠ©è½®ï¼Œæ˜¯æ—¶å€™å¸æ‰å®ƒä»¬äº†ã€‚</p>
<p>å“¦ï¼Œè¿˜æœ‰ï¼Œè¯·å…³æ³¨ä¸€ä¸‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cloudflare.com%2Fcode-mode%2F" target="_blank" title="https://blog.cloudflare.com/code-mode/" ref="nofollow noopener noreferrer">â€œcode modeâ€</a>è¿™åŒ¹é»‘é©¬ã€‚å®ƒå¯èƒ½æ˜¯è‡ª MCP ä»¥æ¥è¿™ä¸ªé¢†åŸŸæœ€é‡å¤§çš„çªç ´ã€‚</p>
<h2 data-id="heading-10">8. ç§»åŠ¨ç«¯</h2>
<p>ç§»åŠ¨ç«¯ Top 10 åˆ†åˆ«æ˜¯ï¼š</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/951a4e490a0143cba4bd5e651c97bb4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377245&amp;x-signature=5aD6WBCeP4awoF22c3r3EDvIG%2BM%3D" alt="" loading="lazy"/></p>
<p>åœ¨ JavaScript Rising Stars è¯„é€‰æ´»åŠ¨é•¿è¾¾åå¹´çš„å†å²ä¸­ï¼ŒReact Native åŠå…¶ä¸»è¦å…ƒæ¡†æ¶ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.expo.dev%2F" target="_blank" title="https://docs.expo.dev/" ref="nofollow noopener noreferrer">Expo</a> é¦–æ¬¡æœªèƒ½è·»èº«ç§»åŠ¨ç«¯æ¦œé¦–ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ä¸¤ä¸ªæ–°æ™‹æ¡†æ¶ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSnapchat%2FValdi" target="_blank" title="https://github.com/Snapchat/Valdi" ref="nofollow noopener noreferrer">Valdi</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Flynxjs.org%2F" target="_blank" title="https://lynxjs.org/" ref="nofollow noopener noreferrer">Lynxâ€”â€”</a>å®ƒä»¬åˆ†åˆ«æ˜¯ Snapï¼ˆSnapchat çš„æ¯å…¬å¸ï¼‰å’Œå­—èŠ‚è·³åŠ¨ï¼ˆTikTok çš„æ¯å…¬å¸ï¼‰çš„å†…éƒ¨æ¡†æ¶ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSnapchat%2FValdi" target="_blank" title="https://github.com/Snapchat/Valdi" ref="nofollow noopener noreferrer">Valdi</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Flynxjs.org%2F" target="_blank" title="https://lynxjs.org/" ref="nofollow noopener noreferrer">Lynx</a>å¯¹ React Native å¼€å‘è€…æ¥è¯´å¹¶ä¸é™Œç”Ÿã€‚å®ƒä»¬éƒ½å€Ÿé‰´äº† Web æŠ€æœ¯ï¼Œèƒ½å¤Ÿæ¸²æŸ“åŸç”Ÿè§†å›¾ï¼ŒåŒæ—¶æ”¯æŒ TypeScriptã€JSXã€Flexbox å¸ƒå±€ã€çƒ­é‡è½½å’Œ CSSã€‚Valdi ç»„ä»¶çš„å¤–è§‚ä¸ React ç±»ç»„ä»¶<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSnapchat%2FValdi%2Fblob%2Fmain%2Fdocs%2Fdocs%2Fcore-component.md" target="_blank" title="https://github.com/Snapchat/Valdi/blob/main/docs/docs/core-component.md" ref="nofollow noopener noreferrer">ç±»ä¼¼</a>ï¼Œè€Œ Lynx åˆ™åŒæ—¶æ”¯æŒå‘½ä»¤å¼ API å’ŒåŠŸèƒ½é½å…¨çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Flynxjs.org%2Fguide%2Fstart%2Fquick-start%3Fios-simulator-platform%3Dmacos-arm64%26explorer-platform%3Dios-simulator" target="_blank" title="https://lynxjs.org/guide/start/quick-start?ios-simulator-platform=macos-arm64&amp;explorer-platform=ios-simulator" ref="nofollow noopener noreferrer">React æŠ½è±¡å±‚</a>ï¼ˆé»˜è®¤æƒ…å†µä¸‹æ¨èä½¿ç”¨åè€…ï¼‰ã€‚</p>
<p>å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«åœ¨äºå®ƒä»¬é’ˆå¯¹çš„ä¸šåŠ¡éœ€æ±‚è¿›è¡Œäº†ä¼˜åŒ–ã€‚Valdi çš„è®¾è®¡ç›®æ ‡æ˜¯è½»é‡çº§ã€å»¶è¿ŸåŠ è½½å’Œå¯æ‰©å±•ï¼Œä»è€Œæ”¯æŒç”¨æˆ·é€å±é€‰æ‹©æ€§åœ°<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSnapchat%2FValdi%2Fblob%2Fmain%2Fdocs%2Fdocs%2Ffaq.md%23why-did-snap-create-this" target="_blank" title="https://github.com/Snapchat/Valdi/blob/main/docs/docs/faq.md#why-did-snap-create-this" ref="nofollow noopener noreferrer">å¯ç”¨æ–°åŠŸèƒ½</a>ï¼Œè€Œä¸ä¼šé€ æˆæ˜¾è‘—çš„æ€§èƒ½æŸå¤±ã€‚Lynx çš„è®¾è®¡ç›®æ ‡æ˜¯æä¾›ä¸°å¯Œçš„äº¤äº’ä½“éªŒï¼Œå®ƒé‡‡ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Flynxjs.org%2Fnext%2Fblog%2Flynx-unlock-native-for-more%23use-the-main-thread-responsibly-for-interactivity" target="_blank" title="https://lynxjs.org/next/blog/lynx-unlock-native-for-more#use-the-main-thread-responsibly-for-interactivity" ref="nofollow noopener noreferrer">åŒçº¿ç¨‹æ¶æ„ï¼Œ</a>æä¾›ç±»ä¼¼ Web çš„æŠ½è±¡å±‚ï¼Œé¿å…å•çº¿ç¨‹ç“¶é¢ˆã€‚</p>
<p>ä½†å®ƒä»¬å¹¶éå”¯ä¸€æ’¼åŠ¨ React Native éœ¸ä¸»åœ°ä½çš„æ–°å…´æ¡†æ¶ã€‚æ’åç¬¬å››çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdioxuslabs.com%2F" target="_blank" title="https://dioxuslabs.com/" ref="nofollow noopener noreferrer">Dioxus</a> æ˜¯ä¸€ä¸ªé›„å¿ƒå‹ƒå‹ƒçš„æ¡†æ¶ï¼Œæ—¨åœ¨åŸºäº Web æŠ€æœ¯æ‰“é€ â€œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdioxuslabs.com%2Flearn%2F0.7%2F%23what-is-dioxus" target="_blank" title="https://dioxuslabs.com/learn/0.7/#what-is-dioxus" ref="nofollow noopener noreferrer">æ›´ä¼˜ç§€çš„ Flutter</a> â€ï¼Œä½†åˆæ— éœ€åŠŸèƒ½é½å…¨çš„ Web è§†å›¾ã€‚</p>
<p>è™½ç„¶ç›®å‰ Dioxus é»˜è®¤ä½¿ç”¨ç³»ç»Ÿ Web è§†å›¾ï¼Œä½†å…¶é•¿æœŸç›®æ ‡æ˜¯ç¨³å®š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FDioxusLabs%2Fblitz" target="_blank" title="https://github.com/DioxusLabs/blitz" ref="nofollow noopener noreferrer">Blitz</a> â€”â€”ä¸€ä¸ªè½»é‡çº§çš„ Web æ¸²æŸ“å™¨ï¼Œå®ƒé€šè¿‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgfx-rs%2Fwgpu" target="_blank" title="https://github.com/gfx-rs/wgpu" ref="nofollow noopener noreferrer">wgpu</a>ä½¿ç”¨åŸç”Ÿå›¾å½¢ APIï¼ˆä¾‹å¦‚ Vulkan å’Œ Metalï¼‰è¿›è¡Œç»˜åˆ¶ã€‚ç›®å‰ï¼ŒDioxus åº”ç”¨ä»…æ”¯æŒ Rust è„šæœ¬ï¼Œä½†æœªæ¥è®¡åˆ’æ”¯æŒæ›´å¤šè¯­è¨€ã€‚</p>
<h2 data-id="heading-11">9. Vue ç”Ÿæ€ç³»ç»Ÿ</h2>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6cd61abad1e949d0a91c6a66ec808457~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377245&amp;x-signature=Vf0K2EbbtocNQJnNkKlzDcALgrY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-12">10. çŠ¶æ€ç®¡ç†</h2>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1fddc5efa1be4b279a8ea66b6f37e405~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377245&amp;x-signature=5FKAJ3nYpeaIvKBVEBtosJnMA78%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-13">11. æ ·å¼ / CSS in JS</h2>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e466df1b55c4ba79374aa1cd518a87b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377245&amp;x-signature=figdZsRJeRuUIBzO7jKEALiq798%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-14">12. ç»„ä»¶åº“</h2>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5bda131f86544a5090e48a32a1da3a30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377245&amp;x-signature=d6sxAU69HNVrIiomscjcfuYtUpQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-15">13. æµ‹è¯•</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/852157b412d04a849b47c06a695a68a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377245&amp;x-signature=Sz21mrefBVUKuUI9FpQIEBSsp04%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-16">14. æ¡Œé¢ç«¯</h2>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/395921e3bc834df69ddaa866799a256b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377245&amp;x-signature=tEEuj%2BvCSqGiTbpSg0D1aBhqirE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-17">15. é™æ€ç«™ç‚¹</h2>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d638ec0ced104652b0fde1a45667a204~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377245&amp;x-signature=Dd0exnmnqUl0nspOZTzZj7aSkEI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-18">16. GraphQL</h2>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab485357b7a8406386bbdba8a3280393~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377245&amp;x-signature=u5t0Xk1%2Fu0aWb9iD%2BU5qnKqAvf0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-19">æœ€å</h2>
<p>ä½œä¸ºå‡†å‰ç«¯å¼€å‘ä¸“å®¶çš„ä½ ï¼Œç¬¬ä¸€æ—¶é—´è·å–å‰ç«¯èµ„è®¯ã€æŠ€æœ¯å¹²è´§ã€AI è¯¾ç¨‹ï¼Œé‚£ä¸å¾—å…³æ³¨ä¸‹æˆ‘çš„å…¬ä¼—å·ã€Œå†´ç¾½ã€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[iOS Appçš„tcpã€udpæ•°æ®åŒ…æŠ“å–åœ¨å®é™…å¼€å‘ä¸­çš„ä½¿ç”¨æ–¹å¼]]></title>    <link>https://juejin.cn/post/7592144524308774918</link>    <guid>https://juejin.cn/post/7592144524308774918</guid>    <pubDate>2026-01-07T07:06:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592144524308774918" data-draft-id="7592236397534609444" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="iOS Appçš„tcpã€udpæ•°æ®åŒ…æŠ“å–åœ¨å®é™…å¼€å‘ä¸­çš„ä½¿ç”¨æ–¹å¼"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-07T07:06:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼€å¿ƒçŒ´çˆ·"/> <meta itemprop="url" content="https://juejin.cn/user/2179705232165364"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            iOS Appçš„tcpã€udpæ•°æ®åŒ…æŠ“å–åœ¨å®é™…å¼€å‘ä¸­çš„ä½¿ç”¨æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2179705232165364/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼€å¿ƒçŒ´çˆ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T07:06:37.000Z" title="Wed Jan 07 2026 07:06:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘å¼€å§‹ç”¨æ•°æ®æµæŠ“åŒ…çš„æ–¹å¼çœ‹ iOS ç½‘ç»œè¡Œä¸ºï¼Œæ˜¯åœ¨ä¸€æ¬¡å¾ˆå…¸å‹çš„åœºæ™¯é‡Œã€‚</p>
<p>æ¥å£è¿”å›å®Œå…¨æ­£å¸¸ï¼Œæ—¥å¿—ä¹Ÿæ²¡æœ‰å¼‚å¸¸ï¼Œä½†åŠŸèƒ½åœ¨çœŸæœºä¸Šå¶å‘å¤±æ•ˆã€‚
ä»£ç†æŠ“åŒ…å·¥å…·é‡Œï¼ŒHTTPS è¯·æ±‚å¹²å‡€å¾—ä¸åƒæ˜¯æœ‰é—®é¢˜çš„æ ·å­ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>å…ˆæ˜ç¡®ä¸€ä»¶äº‹ï¼šiOS æ•°æ®æµæŠ“åŒ…åœ¨çœ‹ä»€ä¹ˆ</strong></h2>
<p>å¾ˆå¤šäººç¬¬ä¸€æ¬¡å¬åˆ°iOS æ•°æ®æµæŠ“åŒ…ï¼Œä¼šä¸‹æ„è¯†ä»¥ä¸ºè¿™æ˜¯ Wireshark é‚£ä¸€å¥—ã€‚</p>
<p>ä½†åœ¨å®é™…è°ƒè¯•ä¸­ï¼Œæˆ‘æ›´å…³å¿ƒçš„æ˜¯ä¸€ä¸ªæ›´å®½æ³›çš„èŒƒå›´ï¼š</p>
<ul>
<li>HTTPS è¯·æ±‚æ˜¯å¦çœŸå®å‘å‡º</li>
<li>Socket é€šä¿¡æ˜¯å¦å»ºç«‹</li>
<li>TCP / UDP æ˜¯å¦å­˜åœ¨é¢‘ç¹æ–­å¼€</li>
<li>DNS æŸ¥è¯¢æ˜¯å¦å¼‚å¸¸æˆ–è¢«é‡è¯•</li>
</ul>
<p>è¿™äº›å†…å®¹ï¼Œç»Ÿç»Ÿå±äº iOS è®¾å¤‡çš„æ•°æ®æµã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>ä»£ç†æŠ“åŒ…ä¸ºä»€ä¹ˆç»å¸¸çœ‹ä¸åˆ°è¿™äº›é—®é¢˜</strong></h2>
<p>ä»£ç†æŠ“åŒ…å·¥å…·æ›´æ“…é•¿çš„æ˜¯â€œè¯·æ±‚è¯­ä¹‰å±‚â€ï¼š</p>
<ul>
<li>URLã€å‚æ•°ã€Header</li>
<li>è¿”å›ç»“æ„ã€çŠ¶æ€ç </li>
<li>è¯·æ±‚é‡æ”¾å’Œæ¨¡æ‹Ÿ</li>
</ul>
<p>ä½†å®ƒä»¬é»˜è®¤å¿½ç•¥äº†ä¸€ä¸ªå‰æï¼š<strong>åªè¦è¯·æ±‚ä¸èµ°ä»£ç†ï¼Œæˆ–è€…åè®®ä¸æ˜¯ HTTPï¼Œå°±ç›´æ¥æ¶ˆå¤±ã€‚</strong></p>
<p>åœ¨æ¶‰åŠ Socketã€é•¿è¿æ¥ã€DNS å¼‚å¸¸æ—¶ï¼Œè¿™ä¸ªç›²åŒºä¼šè¢«æ— é™æ”¾å¤§ã€‚</p>
<hr/>
<h2 data-id="heading-2"><strong>æ•°æ®æµæŠ“åŒ…ï¼Œæ˜¯ä¸ºäº†ç¡®è®¤é€šä¿¡æ˜¯å¦å‘ç”Ÿäº†</strong></h2>
<p>åœ¨è¿›å…¥å…·ä½“æ“ä½œå‰ï¼Œæˆ‘é€šå¸¸ä¼šå…ˆç»™è‡ªå·±ä¸€ä¸ªæ˜ç¡®ç›®æ ‡ï¼Œè¿™ä¸€æ­¥ä¸æ˜¯ä¸ºäº†çœ‹æ‡‚åè®®ï¼Œè€Œæ˜¯ç¡®è®¤æ•°æ®æœ‰æ²¡æœ‰æµåŠ¨ã€‚</p>
<p>åªè¦èƒ½ç¡®è®¤æœ‰æµé‡åœ¨å“ªä¸€åˆ»å‘ç”Ÿæ˜¯å¦ä¸­æ–­ï¼Œå°±å·²ç»æ¯” HTTPS æŠ“åŒ…å¤šäº†ä¸€å±‚ä¿¡æ¯ã€‚</p>
<hr/>
<h2 data-id="heading-3"><strong>é€šè¿‡ USB æŠ“å– iOS è®¾å¤‡çš„æ•°æ®æµ</strong></h2>
<p>åœ¨è¿™ä¸€æ­¥ï¼Œæˆ‘ä½¿ç”¨ <strong>æŠ“åŒ…å¤§å¸ˆï¼ˆSniff Masterï¼‰</strong> æ¥åšè®¾å¤‡ä¾§çš„æ•°æ®æµæŠ“åŒ…ã€‚</p>
<p>æ•´ä¸ªè¿‡ç¨‹æ¯”æƒ³è±¡ä¸­ç®€å•ï¼š</p>
<ul>
<li>ç”¨ USB å°† iOS è®¾å¤‡è¿æ¥åˆ°ç”µè„‘</li>
<li>åœ¨æŠ“åŒ…å¤§å¸ˆä¸­é€‰æ‹©å¯¹åº”çš„ iOS è®¾å¤‡</li>
<li>åœ¨åŠŸèƒ½é€‰æ‹©åŒºåˆ‡æ¢åˆ°ã€Œæ•°æ®æµæŠ“åŒ…ã€</li>
<li>è¿›å…¥æ•°æ®æµç•Œé¢åç‚¹å‡»å¼€å§‹</li>
</ul>
<p>ä¸éœ€è¦åœ¨ iOS ä¸Šé…ç½®ä»£ç†ï¼Œä¹Ÿä¸éœ€è¦å®‰è£…æˆ–ä¿¡ä»»è¯ä¹¦ã€‚</p>
<hr/>
<h2 data-id="heading-4"><strong>åªæŠ“æŸä¸ª Appï¼Œæ˜¯æ•°æ®æµåˆ†æçš„å…³é”®ä¸€æ­¥</strong></h2>
<p>å¦‚æœç›´æ¥æŠ“æ•´ä¸ªè®¾å¤‡çš„æ•°æ®æµï¼Œå¾ˆå¿«å°±ä¼šè¢«ä¿¡æ¯æ·¹æ²¡ã€‚</p>
<p>ç³»ç»ŸæœåŠ¡ã€åå°åŒæ­¥ã€å…¶ä»– App çš„ç½‘ç»œè¡Œä¸ºï¼Œä¼šè®©ä½ å¾ˆéš¾åˆ¤æ–­ç›®æ ‡ App åœ¨åšä»€ä¹ˆã€‚</p>
<p>åœ¨æŠ“åŒ…å¤§å¸ˆé‡Œï¼Œå¯ä»¥é€šè¿‡ã€Œé€‰æ‹© Appã€çš„æ–¹å¼ï¼ŒåªæŠ“å–æŒ‡å®š App çš„æ•°æ®æµã€‚
è¿™ä¸€ç‚¹åœ¨å®šä½é—®é¢˜æ—¶éå¸¸é‡è¦ã€‚</p>
<hr/>
<h2 data-id="heading-5"><strong>ä»æ•°æ®é‡å˜åŒ–ä¸­åˆ¤æ–­é—®é¢˜ä½ç½®</strong></h2>
<p>æœ‰ä¸€æ¬¡é—®é¢˜ä¸­ï¼Œæˆ‘å¹¶æ²¡æœ‰ç«‹åˆ»å°è¯•è§£æä»»ä½•æ•°æ®ã€‚</p>
<p>åªæ˜¯è§‚å¯Ÿå‡ ä»¶äº‹ï¼š</p>
<ul>
<li>App å¯åŠ¨åæ˜¯å¦ç«‹åˆ»æœ‰ TCP æ•°æ®</li>
<li>æ•°æ®åŒ…å¤§å°æ˜¯å¦è§„å¾‹</li>
<li>æŸä¸ªæ“ä½œæ˜¯å¦ä¼´éšæ˜æ˜¾çš„æ•°æ®æµå˜åŒ–</li>
</ul>
<p>ç»“æœå‘ç°ï¼š
ç”¨æˆ·ç‚¹å‡»æŒ‰é’®åï¼ŒHTTPS è¯·æ±‚æ­£å¸¸è¿”å›ï¼Œä½†å¯¹åº”çš„ Socket æ•°æ®å‡ ä¹æ²¡æœ‰ä»»ä½•å˜åŒ–ã€‚</p>
<p>é—®é¢˜ä½ç½®ä¸€ä¸‹å­å°±ç¼©å°äº†ã€‚</p>
<hr/>
<h2 data-id="heading-6"><strong>DNS æ•°æ®ï¼Œä¹Ÿç»å¸¸è¢«å¿½ç•¥</strong></h2>
<p>åœ¨ iOS æ•°æ®æµæŠ“åŒ…ä¸­ï¼ŒDNS æ˜¯ä¸€ä¸ªå¾ˆå®¹æ˜“è¢«å¿½ç•¥çš„éƒ¨åˆ†ã€‚</p>
<p>ä½†åœ¨ä»¥ä¸‹åœºæ™¯é‡Œï¼Œå®ƒéå¸¸å…³é”®ï¼š</p>
<ul>
<li>çº¿ä¸Šå¶å‘æ— æ³•è¿æ¥</li>
<li>åˆ‡æ¢ç½‘ç»œåæ¢å¤</li>
<li>ä¸åŒåœ°åŒºè¡¨ç°ä¸ä¸€è‡´</li>
</ul>
<p>é€šè¿‡æ•°æ®æµæŠ“åŒ…ï¼Œå¯ä»¥çœ‹åˆ° DNS è¯·æ±‚æ˜¯å¦é¢‘ç¹å¤±è´¥æˆ–é‡è¯•ï¼Œè¿™ç±»é—®é¢˜ç”¨ HTTPS æŠ“åŒ…æ˜¯å¾ˆéš¾å‘ç°çš„ã€‚</p>
<hr/>
<h2 data-id="heading-7"><strong>éœ€è¦æ›´æ·±å…¥åˆ†ææ—¶ï¼Œå†å¯¼å‡ºæ•°æ®</strong></h2>
<p>å½“æˆ‘å·²ç»ç¡®è®¤é—®é¢˜å¤§è‡´å‘ç”Ÿåœ¨å“ªä¸ªé˜¶æ®µæ—¶ï¼Œæ‰ä¼šè€ƒè™‘è¿›ä¸€æ­¥åˆ†æã€‚</p>
<p>æŠ“åŒ…å¤§å¸ˆæ”¯æŒå°†æ•°æ®å¯¼å‡ºä¸º Wireshark å¯ç”¨çš„æ ¼å¼ï¼Œè¿™ä¸€æ­¥é€šå¸¸ç”¨äºï¼š</p>
<ul>
<li>å¤ç›˜å¤æ‚é€šä¿¡è¿‡ç¨‹</li>
<li>ä¸åç«¯æˆ–ç½‘ç»œåŒäº‹åä½œ</li>
<li>ç¦»çº¿å¯¹æ¯”æ­£å¸¸ä¸å¼‚å¸¸æ ·æœ¬</li>
</ul>
<p>åœ¨ Windows æˆ– Mac ä¸Šéƒ½å¯ä»¥å®Œæˆï¼Œä¸ä¾èµ–ç‰¹å®šç¯å¢ƒã€‚</p>
<hr/>
<h2 data-id="heading-8"><strong>æ•°æ®æµæŠ“åŒ…ä¸æ˜¯æ›¿ä»£ï¼Œè€Œæ˜¯è¡¥å……</strong></h2>
<p>åœ¨å®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»æ¥ä¸ä¼šåªé æ•°æ®æµæŠ“åŒ…è§£å†³æ‰€æœ‰é—®é¢˜ã€‚</p>
<p>æ›´å¸¸è§çš„ç»„åˆæ˜¯ï¼š</p>
<ul>
<li>ä»£ç†æŠ“åŒ…ï¼šéªŒè¯æ¥å£è¯­ä¹‰</li>
<li>æ•°æ®æµæŠ“åŒ…ï¼šç¡®è®¤é€šä¿¡äº‹å®</li>
<li>æ—¥å¿—ä¸ä»£ç ï¼šå®šä½å…·ä½“é€»è¾‘</li>
</ul>
<p>æ•°æ®æµæŠ“åŒ…æ‰¿æ‹…çš„ï¼Œæ˜¯æŠŠæ¨¡ç³Šé—®é¢˜æ‹‰å›ç°å®çš„ä½œç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[UbuntuæœåŠ¡å™¨å¿«é€Ÿä¸Šæ‰‹ï¼šåˆå§‹é…ç½®ä¸å®‰å…¨è®¾ç½®æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7592340733953736754</link>    <guid>https://juejin.cn/post/7592340733953736754</guid>    <pubDate>2026-01-07T07:18:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592340733953736754" data-draft-id="7592340733953703986" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="UbuntuæœåŠ¡å™¨å¿«é€Ÿä¸Šæ‰‹ï¼šåˆå§‹é…ç½®ä¸å®‰å…¨è®¾ç½®æ•™ç¨‹"/> <meta itemprop="keywords" content="Ubuntu"/> <meta itemprop="datePublished" content="2026-01-07T07:18:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="DigitalOcean"/> <meta itemprop="url" content="https://juejin.cn/user/2031553217827127"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            UbuntuæœåŠ¡å™¨å¿«é€Ÿä¸Šæ‰‹ï¼šåˆå§‹é…ç½®ä¸å®‰å…¨è®¾ç½®æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2031553217827127/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    DigitalOcean
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T07:18:14.000Z" title="Wed Jan 07 2026 07:18:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é¦–æ¬¡åˆ›å»ºæ–°çš„UbuntuæœåŠ¡å™¨æ—¶ï¼Œæ‚¨åº”è¯¥æ‰§è¡Œä¸€äº›é‡è¦çš„é…ç½®æ­¥éª¤ä½œä¸ºåˆå§‹è®¾ç½®çš„ä¸€éƒ¨åˆ†ã€‚è¿™äº›æ­¥éª¤å°†æé«˜æ‚¨æœåŠ¡å™¨çš„å®‰å…¨æ€§å’Œå¯ç”¨æ€§ï¼Œå¹¶ä¸ºåç»­æ“ä½œæ‰“ä¸‹åšå®çš„åŸºç¡€ã€‚</p>
<p>æœ¬æ•™ç¨‹å·²åœ¨ Ubuntu 22.04 LTSã€24.04 LTS å’Œ 24.10 ä¸Šç»è¿‡éªŒè¯ã€‚æ‰€ä½¿ç”¨çš„å‘½ä»¤åŸºäºé»˜è®¤è½¯ä»¶åŒ…ï¼Œè¿™äº›è½¯ä»¶åŒ…åœ¨å½“å‰ä¸´æ—¶ç‰ˆæœ¬ä»¥åŠå³å°†å‘å¸ƒçš„ã€é‡‡ç”¨ aptã€OpenSSH å’Œ UFW é»˜è®¤é…ç½®çš„ 25.x ç‰ˆæœ¬ä¸­ä¿æŒç¨³å®šã€‚</p>
<h2 data-id="heading-0"><strong>Ubuntu åˆå§‹æœåŠ¡å™¨è®¾ç½®</strong></h2>
<ul>
<li>
<p>ä»¥ root èº«ä»½ç™»å½•</p>
</li>
<li>
<p>åˆ›å»ºæ–°ç”¨æˆ·</p>
</li>
<li>
<p>æˆäºˆç®¡ç†æƒé™</p>
</li>
<li>
<p>è®¾ç½®é˜²ç«å¢™</p>
</li>
<li>
<p>ä¸ºæ‚¨çš„æ™®é€šç”¨æˆ·å¯ç”¨å¤–éƒ¨è®¿é—®</p>
<ul>
<li/>
</ul>
</li>
</ul>
<h2 data-id="heading-1"><strong>æ­¥éª¤ 1 - ä»¥ root èº«ä»½ç™»å½•</strong></h2>
<p>è¦ç™»å½•åˆ°æ‚¨çš„æœåŠ¡å™¨ï¼Œæ‚¨éœ€è¦çŸ¥é“æœåŠ¡å™¨çš„å…¬ç½‘ IP åœ°å€ã€‚å¦‚æœæ‚¨ä¸ºè®¤è¯å®‰è£…äº† SSH å¯†é’¥ï¼Œåˆ™è¿˜éœ€è¦ root ç”¨æˆ·è´¦æˆ·çš„å¯†ç æˆ–ç§é’¥ã€‚å¦‚æœæ‚¨å°šæœªç™»å½•è¿‡æ‚¨çš„æœåŠ¡å™¨ï¼Œå¯ä»¥æŒ‰ç…§æˆ‘ä»¬å…³äºå¦‚ä½•é€šè¿‡ SSH è¿æ¥ Droplets çš„æŒ‡å—æ“ä½œï¼ŒDigitalOceanè‹±æ–‡å®˜ç½‘ä¸­çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.digitalocean.com%2Fproducts%2Fdroplets%2Fhow-to%2Fconnect-with-ssh%2F" target="_blank" title="https://docs.digitalocean.com/products/droplets/how-to/connect-with-ssh/" ref="nofollow noopener noreferrer">æ•™ç¨‹</a>è¯¦ç»†ä»‹ç»äº†æ­¤è¿‡ç¨‹ã€‚</p>
<p>å¦‚æœæ‚¨å½“å‰æœªè¿æ¥åˆ°æœåŠ¡å™¨ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä»¥ root ç”¨æˆ·èº«ä»½ç™»å½•ã€‚å°†å‘½ä»¤ä¸­é«˜äº®çš„ your_server_ip éƒ¨åˆ†æ›¿æ¢ä¸ºæ‚¨æœåŠ¡å™¨çš„å…¬ç½‘ IP åœ°å€ï¼š</p>
<pre><code class="hljs language-css" lang="css">ssh root<span class="hljs-keyword">@your_server_ip</span>
</code></pre>
<p>å¦‚æœå‡ºç°å…³äºä¸»æœºçœŸå®æ€§çš„è­¦å‘Šï¼Œè¯·æ¥å—å®ƒã€‚å¦‚æœæ‚¨çš„æœåŠ¡å™¨ä½¿ç”¨å¯†ç è®¤è¯ï¼Œè¯·æä¾›æ‚¨çš„ root å¯†ç ä»¥ç™»å½•ã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„ SSH å¯†é’¥å—å¯†ç ä¿æŠ¤ï¼Œåˆ™å¯èƒ½éœ€è¦åœ¨æ¯ä¸ªä¼šè¯ä¸­é¦–æ¬¡ä½¿ç”¨è¯¥å¯†é’¥æ—¶è¾“å…¥å¯†ç ã€‚å¦‚æœæ‚¨æ˜¯é¦–æ¬¡ä½¿ç”¨å¯†ç ç™»å½•æœåŠ¡å™¨ï¼Œå¯èƒ½è¿˜éœ€è¦æ›´æ”¹ root å¯†ç ã€‚å¦‚æœæ”¶åˆ°æç¤ºï¼Œè¯·æŒ‰ç…§è¯´æ˜æ›´æ”¹å¯†ç ã€‚</p>
<p><strong>å…³äº root</strong></p>
<p>root ç”¨æˆ·æ˜¯ Linux ç¯å¢ƒä¸­å…·æœ‰æå‡æƒé™çš„ç®¡ç†å‘˜ç”¨æˆ·ã€‚ç”±äº root è´¦æˆ·å…·æœ‰è¾ƒé«˜çš„æƒé™ï¼Œä¸å»ºè®®æ‚¨ç»å¸¸ä½¿ç”¨å®ƒã€‚å³ä½¿æ˜¯æ— æ„çš„ï¼Œroot è´¦æˆ·ä¹Ÿå¯èƒ½è¿›è¡Œæå…·ç ´åæ€§çš„æ›´æ”¹ã€‚</p>
<p>ä¸‹ä¸€æ­¥æ˜¯åˆ›å»ºä¸€ä¸ªå…·æœ‰è¾ƒä½æƒé™çš„æ–°ç”¨æˆ·è´¦æˆ·ä»¥ä¾›æ—¥å¸¸ä½¿ç”¨ã€‚ç¨åï¼Œæˆ‘ä»¬å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•åœ¨éœ€è¦æ—¶ä¸´æ—¶è·å–æå‡çš„æƒé™ã€‚</p>
<h2 data-id="heading-2"><strong>æ­¥éª¤ 2 - åˆ›å»ºæ–°ç”¨æˆ·</strong></h2>
<p>ä»¥ root èº«ä»½ç™»å½•åï¼Œæ‚¨å°†èƒ½å¤Ÿæ·»åŠ æ–°ç”¨æˆ·è´¦æˆ·ã€‚å°†æ¥ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨è¿™ä¸ªæ–°è´¦æˆ·è€Œä¸æ˜¯ root ç™»å½•ã€‚</p>
<p>æ­¤ç¤ºä¾‹åˆ›å»ºäº†ä¸€ä¸ªåä¸º sammy çš„æ–°ç”¨æˆ·ï¼Œä½†æ‚¨åº”å°†å…¶æ›¿æ¢ä¸ºæ‚¨å–œæ¬¢çš„ç”¨æˆ·åï¼š</p>
<pre><code class="hljs">adduser sammy
</code></pre>
<p>æ‚¨å°†è¢«é—®åˆ°å‡ ä¸ªé—®é¢˜ï¼Œé¦–å…ˆæ˜¯è´¦æˆ·å¯†ç ã€‚</p>
<p>è¾“å…¥ä¸€ä¸ªå¼ºå¯†ç ï¼Œå¹¶å¯é€‰åœ°å¡«å†™ä»»ä½•æ‚¨å¸Œæœ›æä¾›çš„å…¶ä»–ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯ä¸æ˜¯å¿…éœ€çš„ï¼Œæ‚¨å¯ä»¥åœ¨ä»»ä½•æƒ³è¦è·³è¿‡çš„å­—æ®µä¸­æŒ‰ ENTERã€‚</p>
<h2 data-id="heading-3"><strong>æ­¥éª¤ 3 - æˆäºˆç®¡ç†æƒé™</strong></h2>
<p>ç°åœ¨æ‚¨æœ‰äº†ä¸€ä¸ªå…·æœ‰æ™®é€šè´¦æˆ·æƒé™çš„æ–°ç”¨æˆ·è´¦æˆ·ã€‚ä½†æ˜¯ï¼Œæ‚¨æœ‰æ—¶éœ€è¦ä»¥ root ç”¨æˆ·èº«ä»½æ‰§è¡Œç®¡ç†ä»»åŠ¡ã€‚</p>
<p>ä¸ºäº†é¿å…æ³¨é”€æ™®é€šç”¨æˆ·å†ä»¥ root è´¦æˆ·é‡æ–°ç™»å½•ï¼Œæ‚¨å¯ä»¥ä¸ºæ‚¨ç”¨æˆ·çš„æ™®é€šè´¦æˆ·è®¾ç½®æ‰€è°“çš„è¶…çº§ç”¨æˆ·æˆ– root æƒé™ã€‚è¿™äº›æƒé™å°†ä½¿æ‚¨çš„æ™®é€šç”¨æˆ·èƒ½å¤Ÿåœ¨å‘½ä»¤å‰åŠ ä¸Š sudo æ¥ä»¥ç®¡ç†æƒé™è¿è¡Œå‘½ä»¤ã€‚</p>
<p>è¦å°†è¿™äº›æƒé™æ·»åŠ åˆ°æ‚¨çš„æ–°ç”¨æˆ·ï¼Œæ‚¨éœ€è¦å°†è¯¥ç”¨æˆ·æ·»åŠ åˆ° sudo ç³»ç»Ÿç»„ã€‚åœ¨ Ubuntu ä¸Šï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå±äº sudo ç»„æˆå‘˜çš„ç”¨æˆ·è¢«å…è®¸ä½¿ç”¨ sudo å‘½ä»¤ã€‚</p>
<p>ä»¥ root èº«ä»½ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤å°†æ‚¨çš„æ–°ç”¨æˆ·æ·»åŠ åˆ° sudo ç»„ï¼ˆå°†é«˜äº®çš„ sammy ç”¨æˆ·åæ›¿æ¢ä¸ºæ‚¨çš„æ–°ç”¨æˆ·ï¼‰ï¼š</p>
<pre><code class="hljs">usermod -aG sudo sammy
</code></pre>
<p>ç°åœ¨ï¼Œå½“ä»¥æ‚¨çš„æ™®é€šç”¨æˆ·èº«ä»½ç™»å½•æ—¶ï¼Œæ‚¨å¯ä»¥åœ¨å‘½ä»¤å‰è¾“å…¥ sudo ä»¥è¶…çº§ç”¨æˆ·æƒé™è¿è¡Œå®ƒä»¬ã€‚</p>
<h2 data-id="heading-4"><strong>æ­¥éª¤ 4 - è®¾ç½®é˜²ç«å¢™</strong></h2>
<p>Ubuntu æœåŠ¡å™¨å¯ä»¥ä½¿ç”¨ UFW firewall åº”ç”¨æ¥ç¡®ä¿åªå…è®¸è¿æ¥åˆ°ç‰¹å®šæœåŠ¡ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ­¤åº”ç”¨ç¨‹åºè®¾ç½®åŸºæœ¬é˜²ç«å¢™ã€‚</p>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> å¦‚æœæ‚¨çš„æœåŠ¡å™¨è¿è¡Œåœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aidroplet.com%2Fproduct%2Fcloudcpu%2F" target="_blank" title="https://www.aidroplet.com/product/cloudcpu/" ref="nofollow noopener noreferrer">DigitalOcean äº‘å¹³å°</a>ä¸Šï¼Œæ‚¨å¯ä»¥é€‰æ‹©ä½¿ç”¨ DigitalOcean Cloud Firewalls è€Œä¸æ˜¯ UFW firewallã€‚æˆ‘ä»¬å»ºè®®ä¸€æ¬¡åªä½¿ç”¨ä¸€ä¸ªé˜²ç«å¢™ï¼Œä»¥é¿å…å¯èƒ½éš¾ä»¥è°ƒè¯•çš„è§„åˆ™å†²çªã€‚</p>
</blockquote>
<p>åº”ç”¨ç¨‹åºåœ¨å®‰è£…æ—¶å¯ä»¥å‘ UFW æ³¨å†Œå…¶é…ç½®æ–‡ä»¶ã€‚è¿™äº›é…ç½®æ–‡ä»¶å…è®¸ UFW æŒ‰åç§°ç®¡ç†è¿™äº›åº”ç”¨ç¨‹åºã€‚å…è®¸æ‚¨è¿æ¥åˆ°æœåŠ¡å™¨çš„æœåŠ¡ OpenSSH å·²åœ¨ UFW ä¸­æ³¨å†Œäº†é…ç½®æ–‡ä»¶ã€‚</p>
<p>æ‚¨å¯ä»¥é€šè¿‡è¾“å…¥ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å·²å®‰è£…çš„ UFW é…ç½®æ–‡ä»¶åˆ—è¡¨ï¼š</p>
<pre><code class="hljs">ufw app list
</code></pre>
<p><strong>è¾“å‡º</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Available applications:</span>
  <span class="hljs-string">OpenSSH</span>
</code></pre>
<p>æ‚¨éœ€è¦ç¡®ä¿é˜²ç«å¢™å…è®¸ SSH è¿æ¥ï¼Œä»¥ä¾¿æ‚¨ä¸‹æ¬¡å¯ä»¥ç™»å½•æœåŠ¡å™¨ã€‚é€šè¿‡è¾“å…¥ä»¥ä¸‹å‘½ä»¤å…è®¸è¿™äº›è¿æ¥ï¼š</p>
<pre><code class="hljs">ufw allow OpenSSH
</code></pre>
<p>ç°åœ¨é€šè¿‡è¾“å…¥ä»¥ä¸‹å‘½ä»¤å¯ç”¨é˜²ç«å¢™ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ufw <span class="hljs-built_in">enable</span>
</code></pre>
<p>è¾“å…¥ y å¹¶æŒ‰ ENTER ç»§ç»­ã€‚æ‚¨å¯ä»¥é€šè¿‡è¾“å…¥ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ SSH è¿æ¥æ˜¯å¦ä»ç„¶è¢«å…è®¸ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">ufw <span class="hljs-built_in">status</span>
</code></pre>
<p><strong>è¾“å‡º</strong></p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">Status:</span> active

<span class="hljs-keyword">To</span>                         Action      <span class="hljs-keyword">From</span>
--                         ------      ----
OpenSSH                    ALLOW       Anywhere
OpenSSH (v6)               ALLOW       Anywhere (v6)
</code></pre>
<p>é˜²ç«å¢™å½“å‰é™¤äº† SSH å¤–é˜»æ­¢æ‰€æœ‰è¿æ¥ã€‚å¦‚æœæ‚¨å®‰è£…å¹¶é…ç½®äº†å…¶ä»–æœåŠ¡ï¼Œæ‚¨å°†éœ€è¦è°ƒæ•´é˜²ç«å¢™è®¾ç½®ä»¥å…è®¸æ–°çš„æµé‡è¿›å…¥æ‚¨çš„æœåŠ¡å™¨ã€‚</p>
<p>ä»¥åè¦æ·»åŠ  HTTP è®¿é—®ï¼Œè¯·ä»…å…è®¸æ‚¨éœ€è¦çš„æœåŠ¡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ufw allow 80/tcp
ufw allow 443/tcp
</code></pre>
<h2 data-id="heading-5"><strong>æ­¥éª¤ 5 - ä¸ºæ‚¨çš„æ™®é€šç”¨æˆ·å¯ç”¨å¤–éƒ¨è®¿é—®</strong></h2>
<p>ç°åœ¨æ‚¨æœ‰äº†ä¸€ä¸ªä¾›æ—¥å¸¸ä½¿ç”¨çš„æ™®é€šç”¨æˆ·ï¼Œæ‚¨éœ€è¦ç¡®ä¿å¯ä»¥ç›´æ¥ SSH ç™»å½•åˆ°è¯¥è´¦æˆ·ã€‚</p>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> åœ¨ç¡®è®¤æ‚¨å¯ä»¥ä½¿ç”¨æ–°ç”¨æˆ·ç™»å½•å¹¶ä½¿ç”¨ sudo ä¹‹å‰ï¼Œæˆ‘ä»¬å»ºè®®ä¿æŒä»¥ root èº«ä»½ç™»å½•ã€‚å¦‚æœé‡åˆ°è¿æ¥é—®é¢˜ï¼Œæ‚¨å¯ä»¥ä»¥ root èº«ä»½è¿›è¡Œæ•…éšœæ’é™¤å¹¶è¿›è¡Œå¿…è¦çš„æ›´æ”¹ã€‚å¦‚æœæ‚¨ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aidroplet.com%2Fproduct%2Fcloudcpu%2F" target="_blank" title="https://www.aidroplet.com/product/cloudcpu/" ref="nofollow noopener noreferrer">DigitalOcean Droplet</a> å¹¶ä¸”é‡åˆ° root SSH è¿æ¥é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ Recovery Console é‡æ–°è·å¾—å¯¹ Droplet çš„è®¿é—®æƒé™ã€‚</p>
</blockquote>
<p>ä¸ºæ‚¨çš„æ™®é€šç”¨æˆ·é…ç½® SSH è®¿é—®å–å†³äºæ‚¨æœåŠ¡å™¨çš„ root è´¦æˆ·æ˜¯ä½¿ç”¨å¯†ç è¿˜æ˜¯ SSH å¯†é’¥è¿›è¡Œè®¤è¯ã€‚</p>
<p><strong>å¦‚æœ root è´¦æˆ·ä½¿ç”¨å¯†ç è®¤è¯</strong></p>
<p>å¦‚æœæ‚¨ä½¿ç”¨å¯†ç ç™»å½•åˆ° root è´¦æˆ·ï¼Œåˆ™ SSH å·²å¯ç”¨å¯†ç è®¤è¯ã€‚æ‚¨å¯ä»¥æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯ä¼šè¯ï¼Œä½¿ç”¨ SSH å’Œæ‚¨çš„æ–°ç”¨æˆ·åç™»å½•åˆ°æ‚¨çš„æ–°ç”¨æˆ·è´¦æˆ·ï¼š</p>
<pre><code class="hljs language-css" lang="css">ssh sammy<span class="hljs-keyword">@your_server_ip</span>
</code></pre>
<p>è¾“å…¥æ‚¨æ™®é€šç”¨æˆ·çš„å¯†ç åï¼Œæ‚¨å°†è¢«ç™»å½•ã€‚è¯·è®°ä½ï¼Œå¦‚æœæ‚¨éœ€è¦ä»¥ç®¡ç†æƒé™è¿è¡Œå‘½ä»¤ï¼Œè¯·åœ¨å‘½ä»¤å‰è¾“å…¥ <code>sudo</code>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs">sudo command_to_run
</code></pre>
<p>åœ¨æ¯ä¸ªä¼šè¯ä¸­é¦–æ¬¡ä½¿ç”¨ <code>sudo</code> æ—¶ï¼ˆä»¥åŠä¹‹åå®šæœŸåœ°ï¼‰ï¼Œç³»ç»Ÿä¼šæç¤ºæ‚¨è¾“å…¥æ™®é€šç”¨æˆ·çš„å¯†ç ã€‚</p>
<p>ä¸ºäº†å¢å¼ºæœåŠ¡å™¨çš„å®‰å…¨æ€§ï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®è®¾ç½® SSH å¯†é’¥è€Œä¸æ˜¯ä½¿ç”¨å¯†ç è®¤è¯ã€‚æŒ‰ç…§æˆ‘ä»¬å…³äºåœ¨ Ubuntu ä¸Šè®¾ç½® SSH å¯†é’¥ çš„æŒ‡å—æ¥å­¦ä¹ å¦‚ä½•é…ç½®åŸºäºå¯†é’¥çš„è®¤è¯ã€‚</p>
<p><strong>å¦‚æœ root è´¦æˆ·ä½¿ç”¨</strong> <strong>SSH</strong> <strong>å¯†é’¥è®¤è¯</strong></p>
<p>å¦‚æœæ‚¨ä½¿ç”¨ SSH å¯†é’¥ç™»å½•åˆ° root è´¦æˆ·ï¼Œåˆ™ SSH çš„å¯†ç è®¤è¯æ˜¯ç¦ç”¨çš„ã€‚è¦ä½¿ç”¨ SSH å¯†é’¥ä»¥æ™®é€šç”¨æˆ·èº«ä»½ç™»å½•ï¼Œæ‚¨å¿…é¡»å°†æœ¬åœ°å…¬é’¥çš„å‰¯æœ¬æ·»åŠ åˆ°æ‚¨æ–°ç”¨æˆ·çš„ ~/.ssh/authorized_keys æ–‡ä»¶ä¸­ã€‚</p>
<p>ç”±äºæ‚¨çš„å…¬é’¥å·²ç»åœ¨æœåŠ¡å™¨ä¸Š root è´¦æˆ·çš„ ~/.ssh/authorized_keys æ–‡ä»¶ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å½“å‰ä¼šè¯å°†è¯¥æ–‡ä»¶å’Œç›®å½•ç»“æ„å¤åˆ¶åˆ°æ‚¨çš„æ–°ç”¨æˆ·è´¦æˆ·ã€‚</p>
<p>ä½¿ç”¨æ­£ç¡®çš„æ‰€æœ‰æƒå’Œæƒé™å¤åˆ¶æ–‡ä»¶çš„æœ€ç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨ rsync å‘½ä»¤ã€‚è¿™ä¸ªå‘½ä»¤å°†å¤åˆ¶ root ç”¨æˆ·çš„ .ssh ç›®å½•ï¼Œä¿ç•™æƒé™ï¼Œå¹¶ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…ï¼Œæ‰€æœ‰è¿™äº›æ“ä½œåœ¨ä¸€ä¸ªå‘½ä»¤ä¸­å®Œæˆã€‚è¯·ç¡®ä¿æ›´æ”¹ä¸‹é¢å‘½ä»¤ä¸­é«˜äº®çš„éƒ¨åˆ†ä»¥åŒ¹é…æ‚¨æ™®é€šç”¨æˆ·çš„åç§°ï¼š</p>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> rsync å‘½ä»¤å¯¹ä»¥å°¾éƒ¨æ–œæ ç»“å°¾çš„æºå’Œç›®æ ‡ä¸æ²¡æœ‰å°¾éƒ¨æ–œæ çš„å¤„ç†æ–¹å¼ä¸åŒã€‚ä½¿ç”¨ä¸‹é¢çš„ rsync æ—¶ï¼Œè¯·ç¡®ä¿æºç›®å½•ï¼ˆ~/.sshï¼‰ä¸åŒ…å«å°¾éƒ¨æ–œæ ï¼ˆæ£€æŸ¥ç¡®è®¤æ‚¨æ²¡æœ‰ä½¿ç”¨ ~/.ssh/ï¼‰ã€‚</p>
<p>å¦‚æœæ„å¤–åœ°åœ¨å‘½ä»¤ä¸­æ·»åŠ äº†å°¾éƒ¨æ–œæ ï¼Œrsync å°†å¤åˆ¶ root è´¦æˆ· ~/.ssh ç›®å½•çš„<em>å†…å®¹</em>åˆ° sudo ç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œè€Œä¸æ˜¯å¤åˆ¶æ•´ä¸ª ~/.ssh ç›®å½•ç»“æ„ã€‚æ–‡ä»¶å°†ä½äºé”™è¯¯çš„ä½ç½®ï¼ŒSSH å°†æ— æ³•æ‰¾åˆ°å¹¶ä½¿ç”¨å®ƒä»¬ã€‚</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash">rsync --archive --<span class="hljs-built_in">chown</span>=sammy:sammy ~/.ssh /home/sammy
</code></pre>
<p>ç°åœ¨ï¼Œåœ¨æœ¬åœ°æœºå™¨ä¸Šæ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯ä¼šè¯ï¼Œå¹¶ä½¿ç”¨ SSH å’Œæ‚¨çš„æ–°ç”¨æˆ·åï¼š</p>
<pre><code class="hljs language-css" lang="css">ssh sammy<span class="hljs-keyword">@your_server_ip</span>
</code></pre>
<p>æ‚¨åº”è¯¥å¯ä»¥åœ¨ä¸ä½¿ç”¨å¯†ç çš„æƒ…å†µä¸‹ä½¿ç”¨æ–°ç”¨æˆ·è´¦æˆ·è¿æ¥åˆ°æ‚¨çš„æœåŠ¡å™¨ã€‚è¯·è®°ä½ï¼Œå¦‚æœæ‚¨éœ€è¦ä»¥ç®¡ç†æƒé™è¿è¡Œå‘½ä»¤ï¼Œè¯·åœ¨å‘½ä»¤å‰è¾“å…¥ sudoï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs">sudo command_to_run
</code></pre>
<p>åœ¨æ¯ä¸ªä¼šè¯ä¸­é¦–æ¬¡ä½¿ç”¨ sudo æ—¶ï¼ˆä»¥åŠä¹‹åå®šæœŸåœ°ï¼‰ï¼Œç³»ç»Ÿä¼šæç¤ºæ‚¨è¾“å…¥æ™®é€šç”¨æˆ·çš„å¯†ç ã€‚</p>
<h2 data-id="heading-6"><strong>å¸¸è§é—®é¢˜</strong></h2>
<p><strong>1. Ubuntu å¯ä»¥ç”¨ä½œæœåŠ¡å™¨å—ï¼Ÿ</strong></p>
<p>å½“ç„¶å¯ä»¥ã€‚Ubuntu æ˜¯å…¨çƒæœ€å—æ¬¢è¿çš„æœåŠ¡å™¨æ“ä½œç³»ç»Ÿä¹‹ä¸€ï¼Œè®¾è®¡ç”¨äºå¹¿æ³›çš„åœºæ™¯ï¼Œä»è½»é‡çº§ VPS å®ä¾‹åˆ°ä¼ä¸šçº§é›†ç¾¤ã€‚</p>
<p><strong>Ubuntu Server çš„ä¸»è¦ä¼˜åŠ¿ï¼š</strong></p>





























<table><thead><tr><th>ç‰¹æ€§</th><th>æè¿°</th></tr></thead><tbody><tr><td>å¼€æºä¸”å…è´¹</td><td>æ— éœ€è®¸å¯è¯è´¹ç”¨ã€‚</td></tr><tr><td>LTS æ”¯æŒ</td><td>é•¿æœŸæ”¯æŒç‰ˆæœ¬å¯è·å¾— 5 å¹´çš„æ›´æ–°ã€‚</td></tr><tr><td>äº‘å°±ç»ª</td><td>é’ˆå¯¹ä¸»æµäº‘ï¼ˆDigitalOceanã€AWSã€GCPï¼‰çš„ä¼˜åŒ–é•œåƒã€‚</td></tr><tr><td>DevOps å‹å¥½</td><td>è‡ªå¸¦ OpenSSHã€apt å’Œ systemdã€‚</td></tr><tr><td>å¹¿æ³›çš„ç¡¬ä»¶æ”¯æŒ</td><td>å¯åœ¨ x86ã€ARMã€PPC ç­‰æ¶æ„ä¸Šè¿è¡Œã€‚</td></tr></tbody></table>
<p><strong>Ubuntu èƒ½å¤Ÿå¾ˆå¥½å¤„ç†çš„æœåŠ¡å™¨ä»»åŠ¡ç¤ºä¾‹ï¼š</strong></p>
<ul>
<li>
<p>Web æ‰˜ç®¡ï¼ˆApacheã€Nginxï¼‰</p>
</li>
<li>
<p>æ•°æ®åº“ï¼ˆPostgreSQLã€MySQLã€MongoDBï¼‰</p>
</li>
<li>
<p>åº”ç”¨æœåŠ¡å™¨ï¼ˆNode.jsã€Pythonã€Javaï¼‰</p>
</li>
<li>
<p>å®¹å™¨ç¼–æ’ï¼ˆDockerã€Kubernetesï¼‰</p>
</li>
<li>
<p>æ–‡ä»¶å­˜å‚¨å’Œå¤‡ä»½</p>
<ul>
<li/>
</ul>
</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼š</strong> è¦æ£€æŸ¥æ‚¨çš„ Ubuntu ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">lsb_release -a
<span class="hljs-comment"># æˆ–è€…</span>
<span class="hljs-built_in">cat</span> /etc/os-release
</code></pre>
<p>æœ‰å…³ SSH å’ŒåŒ…ç®¡ç†çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…DigitalOcean è‹±æ–‡å®˜ç½‘çš„ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.digitalocean.com%2Fcommunity%2Ftutorials%2Fhow-to-create-ssh-keys-with-openssh-on-macos-or-linux" target="_blank" title="https://www.digitalocean.com/community/tutorials/how-to-create-ssh-keys-with-openssh-on-macos-or-linux" ref="nofollow noopener noreferrer">OpenSSH å¯†é’¥æŒ‡å—</a>ã€‚</p>
<p><strong>2. Ubuntu Server æ˜¯å…è´¹çš„å—ï¼Ÿ</strong></p>
<p>æ˜¯çš„ã€‚Ubuntu Server å®Œå…¨å…è´¹ä¸‹è½½ã€å®‰è£…å’Œä½¿ç”¨ï¼Œé€‚ç”¨äºä»»ä½•ç›®çš„â€”â€”ä¸ªäººã€æ•™è‚²æˆ–å•†ä¸šç”¨é€”ã€‚æ²¡æœ‰è®¸å¯è´¹ç”¨æˆ–è®¢é˜…è´¹ã€‚</p>
<p>å¦‚æœæ‚¨æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªç®€å•å¯é çš„æ–¹å¼æ¥å¼€å§‹ï¼Œå¯ä»¥è€ƒè™‘åœ¨ DigitalOcean ä¸Šéƒ¨ç½²ä¸€ä¸ª Ubuntu Dropletã€‚DigitalOcean æä¾›é¢„é…ç½®çš„ Ubuntu æœåŠ¡å™¨é•œåƒï¼Œå› æ­¤æ‚¨åªéœ€ç‚¹å‡»å‡ ä¸‹å³å¯å¯åŠ¨å®‰å…¨ã€å¯ç”¨äºç”Ÿäº§çš„æœåŠ¡å™¨â€”â€”éå¸¸é€‚åˆåˆå­¦è€…å’Œä¸“å®¶ã€‚</p>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> åªæœ‰éœ€è¦æ‰©å±•å®‰å…¨ç»´æŠ¤ã€åˆè§„æ€§åŠŸèƒ½æˆ–ä¼ä¸šæ”¯æŒæ—¶ï¼Œæ‚¨æ‰éœ€è¦ Ubuntu Proã€‚å¯¹äºå¤§å¤šæ•°ç”¨æˆ·å’Œå…¸å‹å·¥ä½œè´Ÿè½½ï¼Œå…è´¹ç‰ˆæœ¬çš„ Ubuntu Server å·²ç»°ç»°æœ‰ä½™ã€‚</p>
</blockquote>
<p><strong>3. å¯¹äºæ–°æœåŠ¡å™¨ï¼Œæˆ‘åº”è¯¥é€‰æ‹©å“ªä¸ª Ubuntu ç‰ˆæœ¬ï¼Ÿ</strong></p>
<p><strong>å»ºè®®ï¼š</strong></p>
<p>ä½¿ç”¨é•¿æœŸæ”¯æŒï¼ˆLTSï¼‰ç‰ˆæœ¬ã€‚LTS ç‰ˆæœ¬æ˜¯ç”Ÿäº§å°±ç»ªçš„ï¼Œå¹¶å¯è·å¾—äº”å¹´çš„æ›´æ–°ã€‚</p>
<p><strong>æµè¡Œçš„</strong> <strong>LTS</strong> <strong>ç‰ˆæœ¬ï¼š</strong></p>























<table><thead><tr><th>ç‰ˆæœ¬</th><th>å‘å¸ƒæ—¥æœŸ</th><th>æ”¯æŒç»“æŸæ—¶é—´</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>Ubuntu 24.04 LTS</td><td>2024 å¹´ 4 æœˆ</td><td>2029 å¹´ 4 æœˆ</td><td>æœ€æ–°ç‰ˆæœ¬ï¼›æ¨èç”¨äºæ–°å®‰è£…</td></tr><tr><td>Ubuntu 22.04 LTS</td><td>2022 å¹´ 4 æœˆ</td><td>2027 å¹´ 4 æœˆ</td><td>å¹¿æ³›ä½¿ç”¨ï¼›é«˜åº¦ç¨³å®š</td></tr></tbody></table>
<p>æ£€æŸ¥æ‚¨å½“å‰çš„ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">lsb_release -cs   # æ˜¾ç¤ºä»£å·ï¼ˆä¾‹å¦‚ï¼Œ<span class="hljs-number">22.04</span> æ˜¯ <span class="hljs-string">'jammy'</span>ï¼‰
</code></pre>
<p>æœ¬æŒ‡å—åŠå…¶å‘½ä»¤å·²åœ¨ 24.04 LTS å’Œ 22.04 LTS ä¸ŠéªŒè¯ã€‚</p>
<p><strong>4. æˆ‘åº”è¯¥ä¸º</strong> <strong>SSH</strong> <strong>ç¦ç”¨å¯†ç è®¤è¯å—ï¼Ÿ</strong></p>
<p>æ˜¯çš„ï¼Œä¸ºäº†å¢å¼ºå®‰å…¨æ€§ã€‚</p>
<p>ä¸€æ—¦æ‚¨è®¾ç½®äº† SSH å¯†é’¥è®¤è¯å¹¶ç¡®è®¤å¯ä»¥ç™»å½•ï¼Œä¸º SSH ç¦ç”¨å¯†ç è®¤è¯å¯ä»¥å‡å°‘æ‚¨æœåŠ¡å™¨é­å—æš´åŠ›ç ´è§£æ”»å‡»çš„é£é™©ã€‚</p>
<p><strong>æ­¥éª¤ï¼š</strong></p>
<p>æ‰“å¼€ SSH é…ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo nano /etc/ssh/sshd_config
</code></pre>
<p>æ‰¾åˆ°å¹¶è®¾ç½®ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">PasswordAuthentication <span class="hljs-keyword">no</span>
</code></pre>
<p>é‡å¯ SSHï¼š</p>
<pre><code class="hljs">sudo systemctl reload sshd
</code></pre>
<blockquote>
<p><strong>é‡è¦ï¼š</strong> åœ¨è¿›è¡Œæ­¤æ›´æ”¹ä¹‹å‰ï¼Œè¯·å§‹ç»ˆä¿æŒå¦ä¸€ç§è®¿é—®æœåŠ¡å™¨çš„æ–¹å¼ï¼Œä¾‹å¦‚ DigitalOcean çš„ Droplet æ§åˆ¶å°æˆ–å¤‡ç”¨è®¿é—®ã€‚</p>
</blockquote>
<p><strong>5. æˆ‘éœ€è¦æ›´æ”¹é»˜è®¤çš„</strong> <strong>SSH</strong> ****<strong>ç«¯å£</strong> <strong>å—ï¼Ÿ</strong></p>
<p>å°† SSH ç«¯å£ä» 22 æ›´æ”¹ä¸ºæ˜¯å¯é€‰çš„ï¼Œå¹¶ä¸”ä¸èƒ½æ›¿ä»£æ­£ç¡®çš„ SSH å¯†é’¥è®¤è¯æˆ–é˜²ç«å¢™é…ç½®ã€‚</p>
<p><strong>åˆ©å¼Šï¼š</strong></p>





















<table><thead><tr><th>æ›´æ”¹ç«¯å£ 22</th><th>å½±å“</th></tr></thead><tbody><tr><td>ç•¥å¾®å‡å°‘æ‰«æ</td><td>è‡ªåŠ¨åŒ–æœºå™¨äººå¯èƒ½ä¼šç»•è¿‡é 22 ç«¯å£</td></tr><tr><td><strong>ä¸æ˜¯</strong>å®‰å…¨æ›¿ä»£å“</td><td>æ”»å‡»è€…ä»ç„¶å¯ä»¥æ‰¾åˆ°å¼€æ”¾ç«¯å£</td></tr><tr><td>éœ€è¦æ›´æ–°é˜²ç«å¢™</td><td>éœ€è¦æ›´æ”¹ UFW æˆ– firewalld è§„åˆ™</td></tr></tbody></table>
<p>å¦‚æœæ‚¨è¦æ›´æ”¹ç«¯å£ï¼š</p>
<p>ç¼–è¾‘ <code>/etc/ssh/sshd_config</code>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">Port</span> <span class="hljs-number">2277</span>   <span class="hljs-comment"># ç¤ºä¾‹ç«¯å£ï¼›ä½¿ç”¨ &gt;1024 ä¸”æœªè¢«å ç”¨çš„ç«¯å£</span>
</code></pre>
<p>æ›´æ–° UFW è§„åˆ™ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo ufw allow 2277/tcp
</code></pre>
<p>è¿æ¥æ—¶ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-css" lang="css">ssh -<span class="hljs-selector-tag">p</span> <span class="hljs-number">2277</span> user<span class="hljs-keyword">@your_server_ip</span>
</code></pre>
<blockquote>
<p>è®°å½•æ‚¨çš„æ–°ç«¯å£ä»¥é¿å…è¢«é”åœ¨å¤–é¢ã€‚å°†å…¶ä½œä¸ºé¢å¤–æ­¥éª¤ä½¿ç”¨ï¼Œè€Œä¸æ˜¯æ‚¨çš„ä¸»è¦é˜²å¾¡æ‰‹æ®µã€‚</p>
</blockquote>
<h2 data-id="heading-7"><strong>å°ç»“</strong></h2>
<p>æ­å–œï¼æ‚¨å·²ç»å®Œæˆäº† Ubuntu æœåŠ¡å™¨åŸºæœ¬çš„åˆå§‹è®¾ç½®è¿‡ç¨‹ã€‚é€šè¿‡éµå¾ªè¿™äº›æ­¥éª¤ï¼Œæ‚¨æå¤§åœ°æé«˜äº†æœåŠ¡å™¨çš„å®‰å…¨æ€§å¹¶ä¸ºæœªæ¥çš„é…ç½®å¥ å®šäº†åŸºç¡€ã€‚æ‚¨ç°åœ¨æ‹¥æœ‰ä¸€ä¸ªå…·æœ‰ sudo æƒé™çš„é root ç”¨æˆ·è´¦æˆ·ï¼Œç”¨äºæ›´å®‰å…¨çš„æ—¥å¸¸ç®¡ç†ï¼›ä¸€ä¸ªé…ç½®å¥½çš„é˜²ç«å¢™ï¼ˆUFWï¼‰ï¼Œé™åˆ¶é™¤æ‚¨æ˜ç¡®å…è®¸ä¹‹å¤–çš„æ‰€æœ‰æµé‡ï¼›ä»¥åŠä¸€ä¸ªå®‰å…¨çš„ SSH å¯†é’¥è®¤è¯ç³»ç»Ÿâ€”â€”æ˜¾è‘—é™ä½äº†æœªç»æˆæƒè®¿é—®çš„é£é™©ã€‚</p>
<p>æœ‰äº†è¿™äº›æœ€ä½³å®è·µï¼Œæ‚¨çš„ Ubuntu æœåŠ¡å™¨å·²ç»ä¸º Web æ‰˜ç®¡ã€åº”ç”¨ç¨‹åºéƒ¨ç½²ä»¥åŠæ‚¨éœ€è¦çš„ä»»ä½•è¿›ä¸€æ­¥å®šåˆ¶åšå¥½äº†å‡†å¤‡ã€‚æœ¬æ•™ç¨‹ä¸­å®Œæˆçš„è®¾ç½®æ˜¯å‡ ä¹æ‰€æœ‰ Linux æœåŠ¡å™¨é¡¹ç›®çš„åŸºæœ¬è¦æ±‚ï¼Œç†è§£è¿™äº›åŸºç¡€çŸ¥è¯†å°†å¸®åŠ©æ‚¨è‡ªä¿¡åœ°ç®¡ç†äº‘ä¸­æˆ–æœ¬åœ°çš„åŸºç¡€è®¾æ–½ã€‚</p>
<p>å¦‚æœä½ è¿˜éœ€è¦æµè§ˆæ›´å¤šå…³äºäº‘æœåŠ¡ç›¸å…³çŸ¥è¯†æˆ–DigitalOcean äº‘å¹³å°äº§å“çš„ä½¿ç”¨æ•™ç¨‹ï¼Œå¯è®¿é—®<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aidroplet.com%2F" target="_blank" title="https://www.aidroplet.com/" ref="nofollow noopener noreferrer">DigitalOceanä¸­å›½åŒºç‹¬å®¶æˆ˜ç•¥åˆä½œä¼™ä¼´å“æ™®äº‘AI Dropletå®˜ç½‘</a>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[toBç³»ç»Ÿå¦‚ä½•æå‡ç³»ç»Ÿè´¨é‡ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7592166340381540367</link>    <guid>https://juejin.cn/post/7592166340381540367</guid>    <pubDate>2026-01-07T07:20:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592166340381540367" data-draft-id="7591730714140917802" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="toBç³»ç»Ÿå¦‚ä½•æå‡ç³»ç»Ÿè´¨é‡ï¼Ÿ"/> <meta itemprop="keywords" content="äº§å“,äº§å“ç»ç†"/> <meta itemprop="datePublished" content="2026-01-07T07:20:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Yooå‰ç«¯"/> <meta itemprop="url" content="https://juejin.cn/user/2791012486624116"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            toBç³»ç»Ÿå¦‚ä½•æå‡ç³»ç»Ÿè´¨é‡ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2791012486624116/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Yooå‰ç«¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T07:20:01.000Z" title="Wed Jan 07 2026 07:20:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ ToB åœºæ™¯ä¸‹ï¼Œâ€œæœ‰æ²¡æœ‰äººçœ‹ï¼ˆPV / UVï¼‰â€å‡ ä¹æ˜¯<strong>ä¼ªæŒ‡æ ‡</strong>ï¼Œå› ä¸º<strong>ä½¿ç”¨æ˜¯è¢«å¼ºåˆ¶çš„ï¼Œä»·å€¼ä¸æ¥è‡ªâ€œè¢«è®¿é—®â€ï¼Œè€Œæ¥è‡ªâ€œè¢«ä¾èµ–ã€è¢«ä¿¡ä»»ã€è¢«é«˜æ•ˆä½¿ç”¨â€</strong> ã€‚</p>
<p>å› æ­¤ï¼ŒToB ç³»ç»Ÿçš„è´¨é‡è¯„ä¼°ï¼Œå¿…é¡»ä»**â€œä¸šåŠ¡å¯ç”¨æ€§ + å·¥ä½œæ•ˆç‡ + é£é™©æ§åˆ¶ + æ¼”è¿›èƒ½åŠ›â€**å‡ ä¸ªç»´åº¦æ¥é‡æ„æŒ‡æ ‡ä½“ç³»ã€‚</p>
<p>ä¸‹é¢æˆ‘æŒ‰<strong>äº§å“ç»ç†å¯è½åœ°çš„ç»“æ„</strong>å±•å¼€ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ToB ç³»ç»Ÿè´¨é‡çš„æ ¸å¿ƒåˆ¤æ–­é€»è¾‘ï¼ˆå…ˆç»™ç»“è®ºï¼‰</h2>
<blockquote>
<p><strong>ä¸€ä¸ªé«˜è´¨é‡ ToB ç³»ç»Ÿï¼Œä¸æ˜¯â€œæœ‰äººç”¨â€ï¼Œè€Œæ˜¯ï¼š</strong></p>
</blockquote>
<ol>
<li>èƒ½å¦<strong>ç¨³å®šæ”¯æ’‘å…³é”®ä¸šåŠ¡</strong></li>
<li>æ˜¯å¦<strong>æ˜¾è‘—é™ä½äººå·¥æˆæœ¬</strong></li>
<li>æ˜¯å¦<strong>å‡å°‘é”™è¯¯ä¸é£é™©</strong></li>
<li>æ˜¯å¦<strong>èƒ½è¢«æŒç»­æ‰©å±•ä¸æ¼”è¿›</strong></li>
</ol>
<p>å¯¹åº”çš„æŒ‡æ ‡ä½“ç³»ï¼Œ<strong>å®Œå…¨ä¸åŒäº ToC é¡µé¢æŒ‡æ ‡</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€ToB ç³»ç»Ÿè´¨é‡çš„äº”å¤§æ ¸å¿ƒç»´åº¦</h2>
<h3 data-id="heading-2">1ï¸âƒ£ ä¸šåŠ¡å®Œæˆåº¦ï¼ˆæœ€é‡è¦ï¼‰</h3>
<p><strong>å…³æ³¨ï¼šäº‹æƒ…æœ‰æ²¡æœ‰è¢«é¡ºåˆ©åšå®Œ</strong></p>

























<table><thead><tr><th>æŒ‡æ ‡</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>ä»»åŠ¡å®Œæˆç‡</td><td>å‘èµ·çš„ä¸šåŠ¡ä¸­æˆåŠŸå®Œæˆçš„æ¯”ä¾‹</td></tr><tr><td>ä¸šåŠ¡é—­ç¯ç‡</td><td>æœ‰å¼€å§‹ã€æœ‰ç»“æœçš„ä¸šåŠ¡å æ¯”</td></tr><tr><td>å¼‚å¸¸ä¸­æ–­ç‡</td><td>å› ç³»ç»Ÿé—®é¢˜å¯¼è‡´ä¸­æ–­</td></tr><tr><td>å›é€€ / é‡åšç‡</td><td>ä¸šåŠ¡è¢«åå¤å¤„ç†çš„æ¯”ä¾‹</td></tr></tbody></table>
<p>ğŸ‘‰ å…¸å‹é—®é¢˜ï¼š</p>
<ul>
<li>ç³»ç»Ÿæ˜¯å¦æˆä¸ºâ€œä¸šåŠ¡ç“¶é¢ˆâ€</li>
<li>æ˜¯å¦å­˜åœ¨â€œè¡¨é¢å¯ç”¨ã€å®åˆ™éš¾ç”¨â€</li>
</ul>
<hr/>
<h3 data-id="heading-3">2ï¸âƒ£ æ“ä½œæ•ˆç‡ï¼ˆToB çš„â€œä½“éªŒâ€ï¼‰</h3>
<p>ToB ä¸è¿½æ±‚çˆ½ï¼Œè€Œè¿½æ±‚ <strong>å¿«ã€å°‘ã€ç¨³</strong></p>

























<table><thead><tr><th>æŒ‡æ ‡</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>å•ä»»åŠ¡å¹³å‡è€—æ—¶</td><td>å®Œæˆä¸€æ¬¡ä¸šåŠ¡éœ€è¦å¤šä¹…</td></tr><tr><td>æ“ä½œæ­¥æ•°</td><td>ç‚¹å‡» / å¡«å†™æ¬¡æ•°</td></tr><tr><td>ç­‰å¾…æ—¶é—´</td><td>æ¥å£ / é¡µé¢å“åº”æ—¶é—´</td></tr><tr><td>äººå‡å¤„ç†é‡</td><td>å•äººæ¯æ—¥å¯å¤„ç†ä¸šåŠ¡æ•°</td></tr></tbody></table>
<p>ğŸ‘‰ æå‡æ–¹å‘ï¼š</p>
<ul>
<li>å‡æ­¥éª¤</li>
<li>å‡ç­‰å¾…</li>
<li>å‡è®¤çŸ¥è´Ÿæ‹…</li>
</ul>
<hr/>
<h3 data-id="heading-4">3ï¸âƒ£ é”™è¯¯ä¸é£é™©æ§åˆ¶ï¼ˆéšæ€§ä»·å€¼ï¼‰</h3>
<p><strong>ToB ç³»ç»Ÿæœ€å¤§çš„ä»·å€¼ä¹‹ä¸€æ˜¯â€œé˜²é”™â€</strong></p>

























<table><thead><tr><th>æŒ‡æ ‡</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>æ“ä½œé”™è¯¯ç‡</td><td>å¡«é”™ã€æ¼å¡«ã€è¯¯æ“ä½œ</td></tr><tr><td>æ ¡éªŒæ‹¦æˆªç‡</td><td>ç³»ç»Ÿæå‰é˜»æ­¢çš„é”™è¯¯</td></tr><tr><td>å¼‚å¸¸ä¿®å¤æ—¶é•¿</td><td>ä»å‘ç°åˆ°æ¢å¤</td></tr><tr><td>å®¡è®¡é€šè¿‡ç‡</td><td>åˆè§„ / å®¡è®¡æˆåŠŸæ¯”ä¾‹</td></tr></tbody></table>
<p>ğŸ‘‰ ä¸€ä¸ªå¥½ ToB ç³»ç»Ÿï¼š</p>
<ul>
<li><strong>é”™è¯¯è¶Šå¤šï¼Œè¯´æ˜ç³»ç»Ÿè¶Šå·®</strong></li>
<li><strong>æ‹¦æˆªè¶Šå¤šï¼Œåè€Œè¯´æ˜ç³»ç»Ÿè¶Šå¥½</strong></li>
</ul>
<hr/>
<h3 data-id="heading-5">4ï¸âƒ£ ç¨³å®šæ€§ä¸å¯é æ€§ï¼ˆåº•çº¿ï¼‰</h3>

























<table><thead><tr><th>æŒ‡æ ‡</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>ç³»ç»Ÿå¯ç”¨æ€§ï¼ˆSLAï¼‰</td><td>å¯ç”¨æ—¶é—´å æ¯”</td></tr><tr><td>æ¥å£æˆåŠŸç‡</td><td>API æˆåŠŸè¿”å›</td></tr><tr><td>å³°å€¼æ‰¿è½½èƒ½åŠ›</td><td>é«˜å³°æœŸæ˜¯å¦ç¨³å®š</td></tr><tr><td>æ•…éšœå½±å“èŒƒå›´</td><td>æ•…éšœæ³¢åŠå¤šå°‘ä¸šåŠ¡</td></tr></tbody></table>
<p>ğŸ‘‰ åœ¨ ToBï¼š</p>
<ul>
<li>99.9% å’Œ 99.99% æ˜¯<strong>å®Œå…¨ä¸åŒçš„äº§å“çº§åˆ«</strong></li>
</ul>
<hr/>
<h3 data-id="heading-6">5ï¸âƒ£ æ¼”è¿›ä¸é€‚é…èƒ½åŠ›ï¼ˆé•¿æœŸè´¨é‡ï¼‰</h3>
<p><strong>ä»Šå¤©èƒ½ç”¨ â‰  æ˜å¤©èƒ½æ”¹</strong></p>

























<table><thead><tr><th>æŒ‡æ ‡</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>é…ç½®è¦†ç›–ç‡</td><td>æ˜¯å¦é…ç½®è€Œéå†™æ­»</td></tr><tr><td>æ–°éœ€æ±‚äº¤ä»˜å‘¨æœŸ</td><td>ä»éœ€æ±‚åˆ°ä¸Šçº¿</td></tr><tr><td>æ¨¡å—å¤ç”¨ç‡</td><td>åŠŸèƒ½å¯å¤ç”¨ç¨‹åº¦</td></tr><tr><td>è§„åˆ™å¤–åŒ–æ¯”ä¾‹</td><td>ä¸šåŠ¡è§„åˆ™æ˜¯å¦å¯é…ç½®</td></tr></tbody></table>
<p>ğŸ‘‰ è¿™æ˜¯<strong>äº§å“æˆç†Ÿåº¦</strong>çš„ä½“ç°ã€‚</p>
<hr/>
<h2 data-id="heading-7">ä¸‰ã€ä»â€œé¡µé¢æŒ‡æ ‡â€åˆ°â€œä¸šåŠ¡æŒ‡æ ‡â€çš„è½¬å˜</h2>
<h3 data-id="heading-8">âŒ ToC æ€ç»´ï¼ˆä¸é€‚ç”¨ï¼‰</h3>
<ul>
<li>PVã€UVã€åœç•™æ—¶é•¿</li>
<li>é¡µé¢è·³å‡ºç‡</li>
</ul>
<h3 data-id="heading-9">âœ… ToB æ­£ç¡®è§†è§’</h3>
<ul>
<li><strong>ä¸šåŠ¡å¯¹è±¡ Ã— ç”Ÿå‘½å‘¨æœŸ</strong></li>
<li><strong>äºº Ã— è§’è‰² Ã— æƒé™</strong></li>
<li><strong>æµç¨‹ Ã— æ—¶æ•ˆ Ã— æˆåŠŸç‡</strong></li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs">è®¢å•
  â†’ åˆ›å»º
  â†’ å®¡æ‰¹
  â†’ æ‰§è¡Œ
  â†’ å®Œæˆ
</code></pre>
<p>æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ï¼š</p>
<ul>
<li>è€—æ—¶</li>
<li>æˆåŠŸç‡</li>
<li>å¼‚å¸¸ç‡</li>
<li>è´£ä»»è§’è‰²</li>
</ul>
<hr/>
<h2 data-id="heading-10">å››ã€ToB å‰ç«¯åŸ‹ç‚¹è¯¥åŸ‹ä»€ä¹ˆï¼ˆéå¸¸å…³é”®ï¼‰</h2>
<h3 data-id="heading-11">1ï¸âƒ£ ä¸åŸ‹â€œçœ‹äº†ä»€ä¹ˆâ€ï¼ŒåŸ‹â€œåšäº†ä»€ä¹ˆâ€</h3>

























<table><thead><tr><th>ç±»å‹</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>ä¸šåŠ¡åŠ¨ä½œ</td><td>åˆ›å»ºè®¢å•ã€æäº¤å®¡æ‰¹</td></tr><tr><td>å…³é”®èŠ‚ç‚¹</td><td>å®¡æ‰¹é€šè¿‡ã€é©³å›</td></tr><tr><td>å¼‚å¸¸åŠ¨ä½œ</td><td>æ ¡éªŒå¤±è´¥ã€æ¥å£æŠ¥é”™</td></tr><tr><td>æ€§èƒ½èŠ‚ç‚¹</td><td>æäº¤åˆ°è¿”å›è€—æ—¶</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-12">2ï¸âƒ£ åŸ‹ç‚¹çš„æ ¸å¿ƒå¯¹è±¡ä¸æ˜¯é¡µé¢ï¼Œè€Œæ˜¯<strong>ä¸šåŠ¡å®ä½“</strong></h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"event"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"order_submit"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"order_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"O123"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"operator_role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"finance"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"duration"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"success"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h2 data-id="heading-13">äº”ã€AI åœ¨ ToB ç³»ç»Ÿè´¨é‡æå‡ä¸­çš„çœŸæ­£ä»·å€¼</h2>
<h3 data-id="heading-14">1ï¸âƒ£ AI = ä¸šåŠ¡è¿‡ç¨‹æ˜¾å¾®é•œ</h3>
<p>AI ä¸çœ‹é¡µé¢ï¼Œè€Œæ˜¯çœ‹ï¼š</p>
<ul>
<li>å“ªç±»äºº</li>
<li>åœ¨å“ªä¸€æ­¥</li>
<li>ç»å¸¸å¡ä½</li>
<li>ä¸ºä»€ä¹ˆå¡ä½</li>
</ul>
<p>è‡ªåŠ¨è¾“å‡ºï¼š</p>
<blockquote>
<p>â€œ70% çš„å¼‚å¸¸å‘ç”Ÿåœ¨å®¡æ‰¹ç¬¬äºŒæ­¥ï¼Œä¸»è¦é›†ä¸­åœ¨æ–°å‘˜å·¥è´¦å·ã€‚â€</p>
</blockquote>
<hr/>
<h3 data-id="heading-15">2ï¸âƒ£ AI è‡ªåŠ¨å‘ç°â€œéšæ€§ä½æ•ˆç‚¹â€</h3>
<p>ä¼ ç»Ÿé—®é¢˜ï¼š</p>
<blockquote>
<p>æ²¡äººæŠ±æ€¨ â‰  æ²¡é—®é¢˜</p>
</blockquote>
<p>AI å¯ä»¥å‘ç°ï¼š</p>
<ul>
<li>æ“ä½œè€—æ—¶å¼‚å¸¸</li>
<li>æŸäºº / æŸè§’è‰²æ•ˆç‡æ˜¾è‘—ä½äºå‡å€¼</li>
<li>æŸé…ç½®å¯¼è‡´æ•´ä½“æ•ˆç‡ä¸‹é™</li>
</ul>
<hr/>
<h3 data-id="heading-16">3ï¸âƒ£ AI è¾…åŠ©æµç¨‹ä¸è§„åˆ™ä¼˜åŒ–</h3>
<ul>
<li>
<p>è‡ªåŠ¨æ¨¡æ‹Ÿæµç¨‹å˜æ›´å¯¹æ•ˆç‡çš„å½±å“</p>
</li>
<li>
<p>æ¨èï¼š</p>
<ul>
<li>å‡å°‘å®¡æ‰¹å±‚çº§</li>
<li>åˆå¹¶æ“ä½œæ­¥éª¤</li>
<li>æ”¾å®½ä¸å¿…è¦æ ¡éªŒ</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-17">4ï¸âƒ£ ä»â€œç›‘æ§ç³»ç»Ÿâ€å‡çº§ä¸ºâ€œä¸šåŠ¡ç®¡å®¶â€</h3>
<p>æœ€ç»ˆå½¢æ€ï¼š</p>
<blockquote>
<p><strong>PM ä¸å†é—®ï¼š</strong></p>
<ul>
<li>â€œè¿™ä¸ªåŠŸèƒ½æœ‰äººç”¨å—ï¼Ÿâ€</li>
</ul>
</blockquote>
<blockquote>
<p><strong>è€Œæ˜¯é—®ï¼š</strong></p>
<ul>
<li>â€œè¿™ä¸ªç³»ç»Ÿæ˜¯ä¸æ˜¯å·²ç»æˆä¸ºä¸šåŠ¡æœ€ä¼˜è§£ï¼Ÿâ€</li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-18">å…­ã€ä¸€å¥è¯æ€»ç»“ï¼ˆToB äº§å“ç»ç†è§†è§’ï¼‰</h2>
<blockquote>
<p><strong>ToB ç³»ç»Ÿè´¨é‡ï¼Œä¸æ˜¯â€œè¢«ä½¿ç”¨çš„é¢‘ç‡â€ï¼Œè€Œæ˜¯ï¼š</strong></p>
<ul>
<li>ä¸šåŠ¡æ˜¯å¦é¡ºç•…</li>
<li>äººæ˜¯å¦é«˜æ•ˆ</li>
<li>é”™è¯¯æ˜¯å¦è¢«ç³»ç»Ÿæ¶ˆç­</li>
<li>ç³»ç»Ÿæ˜¯å¦ç»å¾—èµ·å˜åŒ–</li>
</ul>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Git ç„šå†³ï¼ä¸€ä¸ªç»æ‹›åŠ©ä½ æ‰¾å›ä¸¢å¤±çš„ä»£ç æ–‡ä»¶ï¼]]></title>    <link>https://juejin.cn/post/7592144524308873222</link>    <guid>https://juejin.cn/post/7592144524308873222</guid>    <pubDate>2026-01-07T07:16:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592144524308873222" data-draft-id="7592133956734582825" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Git ç„šå†³ï¼ä¸€ä¸ªç»æ‹›åŠ©ä½ æ‰¾å›ä¸¢å¤±çš„ä»£ç æ–‡ä»¶ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,Git"/> <meta itemprop="datePublished" content="2026-01-07T07:16:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é—²äº‘ä¸€é¹¤"/> <meta itemprop="url" content="https://juejin.cn/user/729731452122382"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Git ç„šå†³ï¼ä¸€ä¸ªç»æ‹›åŠ©ä½ æ‰¾å›ä¸¢å¤±çš„ä»£ç æ–‡ä»¶ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/729731452122382/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é—²äº‘ä¸€é¹¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T07:16:44.000Z" title="Wed Jan 07 2026 07:16:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œä»£ç åªè¦æäº¤åˆ° git ä»“åº“å°±æœ‰è®°å½•ã€‚å“ªæ€•æ˜¯è¢«è¦†ç›–æˆ–è€…åˆ é™¤äº†ï¼Œéƒ½å¯ä»¥ä»ä»“åº“è¿›è¡Œè¿˜åŸ</p>
<p>ä½†æ˜¯å¦‚æœä»£ç æ²¡æœ‰æäº¤ï¼Œå´ä¸å°å¿ƒè¢«æä¸¢äº†ï¼Œè¿˜æœ‰åŠæ³•æ‰¾å›å—ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯æœ‰çš„ï¼Œæˆ‘å·²ç»è¸©è¿‡å‘å¹¶æ•´ç†åˆ°æ–‡ç« ä¸­äº†</p>
<p>å¸Œæœ›å¤§å®¶æ°¸è¿œä¸ä¼šé‡åˆ°è¿™ç§ç³Ÿå¿ƒäº‹</p>
<p>ä¸€æ—¦ç¢°ä¸Šäº†ï¼Œé‚£æ»‹å‘³ç®€ç›´...ä¸å ªå›é¦–</p>
<p>ä½ ä¹Ÿä¸æƒ³ä»£ç è¢«ä¸å°å¿ƒæä¸¢åä»å¤´å†å†™ä¸€éå§ï¼Ÿ</p>
<p>èµ¶ç´§æ”¶è—è½¬å‘ï¼Œä¿ä¸é½å“ªä¸€å¤©å°±èƒ½ç”¨ä¸Šå‘¢</p>
<p>ä¹Ÿå¯ä»¥æå‰å­¦ä¹ ï¼Œå…»æˆè‰¯å¥½ä¹ æƒ¯ï¼Œé¿å…æ–‡ä»¶æ‰¾ä¸å›æ¥ï¼Œæœ‰å¤‡æ— æ‚£ï¼</p>
<h2 data-id="heading-0">1. å‡†å¤‡å·¥ä½œ</h2>
<p>æˆ‘åœ¨é¡¹ç›®ä¸­æ–°å¢äº†ä¸€ä¸ªâ€œæ­Œè¯æœ¬â€æ–‡ä»¶å¤¹ï¼Œå­˜äº† 50 é¦–çˆ±å¬çš„æ­Œ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a40cd67d3f6545928d35b4872faf9021~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375004&amp;x-signature=7RHEZEAifX8zuMXb5QjmJiC9e7s%3D" alt="1.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/736e4c0d66f847e398a17a4d3f85d9d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375004&amp;x-signature=lppjtBrVeD69GLcdGXP%2FyaCnyOI%3D" alt="2.png" loading="lazy"/></p>
<p>å› ä¸ºä¸æ˜¯æ‰€æœ‰çš„æƒ…å†µéƒ½èƒ½æ‰¾å›ä¸¢å¤±çš„æ–‡ä»¶ï¼Œ<code>åªèƒ½æ‰¾å›å·²æš‚å­˜ï¼ˆgit addï¼‰è¿‡çš„æ–‡ä»¶</code></p>
<p>æ‰€ä»¥ä¸‹é¢æˆ‘å°†æ¨¡æ‹Ÿ 4 ç§åœºæ™¯è¿›è¡Œæµ‹è¯•ï¼Œæµ‹è¯•å“ªä¸€ç§åœºæ™¯æ‰èƒ½æ‰¾å›ä¸¢å¤±çš„æ–‡ä»¶</p>
<h2 data-id="heading-1">2. åœºæ™¯æµ‹è¯•</h2>
<h3 data-id="heading-2">2.0 æµ‹è¯•è¯´æ˜</h3>
<p>æ¥ä¸‹æ¥æˆ‘ä¼šåœ¨ 4 ç§ä¸åŒçš„åœºæ™¯ä¸‹åˆ†åˆ«è¿è¡Œè¿™ä¸ª <code>git bash</code> å‘½ä»¤</p>
<pre><code class="hljs language-bash" lang="bash">git fsck --lost-found
</code></pre>
<p>æ³¨æ„ï¼šå‘½ä»¤çš†åœ¨é¡¹ç›®<code>æ ¹ç›®å½•</code>ï¼ˆä¸.git æ–‡ä»¶å¤¹åŒçº§ï¼‰ä¸‹æ‰§è¡Œ</p>
<p>é¢„æœŸï¼šå¦‚æœ<code>æ ¹ç›®å½•</code>ï¼ˆä¸.git æ–‡ä»¶å¤¹åŒçº§ï¼‰ä¸‹ç”Ÿæˆäº† <code>lost-found</code> æ–‡ä»¶å¤¹å³è¯´æ˜æ–‡ä»¶æ¢å¤æˆåŠŸ</p>
<h3 data-id="heading-3">2.1 åœºæ™¯-1ï¼šæœªæš‚å­˜ -&gt; è¿è¡Œ git fsck --lost-found å‘½ä»¤</h3>
<p>ç°åœ¨æ˜¯æœªæš‚å­˜çŠ¶æ€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/112674b423d54f00a2e9cf0079965e24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375004&amp;x-signature=OvfXdmh2G48FcaAQ9FIet4BcMME%3D" alt="3.png" loading="lazy"/></p>
<p>è¿è¡Œå‘½ä»¤</p>
<pre><code class="hljs language-bash" lang="bash">git fsck --lost-found
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41903bff36ca4ce08a7ccafe12175904~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375004&amp;x-signature=cVoawBNyRwSFcd59obxpJVu0mE0%3D" alt="4.png" loading="lazy"/></p>
<p>å‘½ä»¤æ‰§è¡ŒæˆåŠŸï¼Œä½†æ˜¯å´æ²¡æœ‰ç”Ÿæˆ lost-found æ–‡ä»¶å¤¹</p>
<h3 data-id="heading-4">2.2 åœºæ™¯-2ï¼šæœªæš‚å­˜ -&gt; åˆ é™¤æ–‡ä»¶ -&gt; è¿è¡Œ git fsck --lost-found å‘½ä»¤</h3>
<p>ä¸ºäº†èŠ‚çœæ–‡ç« ç©ºé—´ï¼Œè¿™é‡Œå°±çœç•¥æˆªå›¾äº†</p>
<p>é‡æ–°è¿è¡Œå‘½ä»¤</p>
<p>ä¹Ÿæ²¡æœ‰ç”Ÿæˆ lost-found æ–‡ä»¶å¤¹</p>
<h3 data-id="heading-5">2.3 åœºæ™¯-3ï¼šå·²æš‚å­˜ -&gt; è¿è¡Œ git fsck --lost-found å‘½ä»¤</h3>
<p>ç°åœ¨æˆ‘æŠŠâ€œæ­Œè¯æœ¬â€æ–‡ä»¶å¤¹æš‚å­˜ï¼ˆgit add .ï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1fd05f7fa3d4339b46885fb46a69bfc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375004&amp;x-signature=gJmPa5Hs%2BO%2FKZXSpOUJC61KMsvI%3D" alt="5.png" loading="lazy"/></p>
<p>å†æ¬¡è¿è¡Œå‘½ä»¤</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41903bff36ca4ce08a7ccafe12175904~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375004&amp;x-signature=cVoawBNyRwSFcd59obxpJVu0mE0%3D" alt="4.png" loading="lazy"/></p>
<p>è¿˜æ˜¯æ²¡æœ‰ç”Ÿæˆ lost-found æ–‡ä»¶å¤¹</p>
<h3 data-id="heading-6">2.4 åœºæ™¯-4ï¼šå·²æš‚å­˜ -&gt; åˆ é™¤æ–‡ä»¶ -&gt; è¿è¡Œ git fsck --lost-found å‘½ä»¤</h3>
<p>èŠ‚çœæ–‡ç« ç©ºé—´ï¼Œæˆªå›¾å°±çœç•¥äº†</p>
<p>é‡æ–°è¿è¡Œå‘½ä»¤</p>
<p>ä¹Ÿæ²¡æœ‰ç”Ÿæˆ lost-found æ–‡ä»¶å¤¹</p>
<h3 data-id="heading-7">2.5 åœºæ™¯-5ï¼šå·²æš‚å­˜ -&gt; åˆ é™¤æ–‡ä»¶ -&gt; å†æ¬¡æš‚å­˜ -&gt; è¿è¡Œ git fsck --lost-found å‘½ä»¤</h3>
<p>ç„¶åæˆ‘æŠŠâ€œæ­Œè¯æœ¬â€æ–‡ä»¶å¤¹æ•´ä¸ªç»™ä¸¢å¼ƒäº†ï¼Œå†æ¬¡æš‚å­˜ï¼ˆgit add .ï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/111f2bd967da49f1b0ce119cf3526516~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375004&amp;x-signature=axmrj19a5HrQcVF2GngvQd1ZbxE%3D" alt="6.png" loading="lazy"/></p>
<p>æœ€åè¿è¡Œå‘½ä»¤</p>
<pre><code class="hljs language-bash" lang="bash">git fsck --lost-found
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7dab138949447f6bc0cc7c0a32ab304~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375004&amp;x-signature=3gH%2F6I5bnk7OSfGdKgjwqGjAB6g%3D" alt="7.png" loading="lazy"/></p>
<p>è¿™æ¬¡æˆåŠŸäº†ï¼ï¼ï¼</p>
<p>.git æ–‡ä»¶å¤¹ä¸‹é¢ç”Ÿæˆäº† lost-found æ–‡ä»¶å¤¹ï¼Œæ‰“å¼€åé‡Œé¢æœ‰ other æ–‡ä»¶å¤¹ï¼Œ other é‡Œé¢å°±æ˜¯æ›¾ç»æš‚å­˜è¿‡çš„æ‰€æœ‰æ–‡ä»¶åˆ—è¡¨</p>
<p>å¯ä»¥çœ‹åˆ°æ­£å¥½ 50 ä¸ªé¡¹ç›®</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b15c3d6bb89040faa967b21263079bf9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375004&amp;x-signature=JT0QTQKEp1SHZGuUrvZonviDSb8%3D" alt="8.png" loading="lazy"/></p>
<p>è¿™äº›æ–‡ä»¶æ˜¯ä»¥å…¶å¯¹è±¡çš„ SHA å“ˆå¸Œå€¼å‘½åçš„ï¼Œä½†æ˜¯æ–‡ä»¶å†…å®¹å°±æ˜¯åŸå§‹å†…å®¹ï¼ˆå¦‚æœæ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œå°±å¯ä»¥ç›´æ¥æ‰“å¼€æŸ¥çœ‹ï¼‰</p>
<p>ç”¨ vscode æ‰“å¼€æ•´ä¸ª lost-found æ–‡ä»¶å¤¹ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œé‡Œé¢å…¨éƒ¨éƒ½æ˜¯åˆšæ‰è¢«æˆ‘æ•…æ„ä¸¢å¼ƒçš„æ­Œè¯æ–‡ä»¶</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0eea68a5bc874014beba15a809575806~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375004&amp;x-signature=Op5ltWACt1qnjzpT%2FMkZEubBApM%3D" alt="9.png" loading="lazy"/></p>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å†ç»“åˆ <code>vscode çš„æ—¶é—´</code>çº¿åŠŸèƒ½ï¼Œå°±å¯ä»¥æŠŠä¸¢å¤±çš„ä»£ç æ–‡ä»¶æ¢å¤çš„å…«ä¹ä¸ç¦»åäº†ï¼›</p>
<blockquote>
<p>éšå ‚ç¬”è®°ï¼šä¸æ˜¯ git add ä¹‹åï¼Œæ–‡ä»¶å°±ä¼šåˆ°.git/lost-found/other ç›®å½•ä¸­ï¼Œè€Œæ˜¯å½“å†…å®¹åˆ é™¤åæ‰å­˜åœ¨ï¼ï¼</p>
</blockquote>
<h2 data-id="heading-8">3. æ‰¾å›å‰æï¼šæ–‡ä»¶ add åˆ°æš‚å­˜åŒºè¿‡ï¼</h2>
<p>ç°åœ¨æ¥è§£é‡Šï¼Œä¸ºå•¥åªæœ‰ <code>åœºæ™¯-5ï¼šå·²æš‚å­˜ -&gt; åˆ é™¤æ–‡ä»¶ -&gt; å†æ¬¡æš‚å­˜ -&gt; è¿è¡Œ git fsck --lost-found å‘½ä»¤</code> æ‰èƒ½æ‰¾å›ä¸¢å¤±æ–‡ä»¶çš„åŸå› </p>
<p>æ‰§è¡Œ <code>git add .</code> å‘½ä»¤çš„æ—¶å€™ï¼ŒGit ä¼šæŠŠ æ­Œè¯æœ¬é‡Œé¢çš„ 50 ä¸ª.txt æ–‡ä»¶å†…å®¹å­˜æˆ 50 ä¸ª blob å¯¹è±¡ï¼Œå†™å…¥ <code>.git/objects/</code> æ–‡ä»¶å¤¹</p>
<p>ä½†æ˜¯åªæœ‰<code>â€œæ‚¬æŒ‚â€ï¼ˆdanglingï¼‰-æ— å¼•ç”¨ï¼Œä½†å­˜åœ¨</code>çš„å¯¹è±¡èƒ½é€šè¿‡ fsck æ¢å¤åˆ° .git/lost-found/ ç›®å½•ä¸­</p>
<p>æœªè¢« git è®°å½•çš„æ–‡ä»¶ï¼Œå’Œ git ä¸­æ­£å¸¸å­˜åœ¨ï¼ˆæœ‰å¼•ç”¨å…³ç³»ï¼‰çš„æ–‡ä»¶æ˜¯ä¸ä¼šå‡ºç°åœ¨ .git/objects/ ç›®å½•ä¸­ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆåªæœ‰æ·»åŠ åˆ°æš‚å­˜åŒºåä¸»åŠ¨åˆ é™¤åæ‰èƒ½ç”Ÿæˆåˆ° <code>.git/lost-found/</code> æ–‡ä»¶å¤¹çš„åŸå› </p>
<p>åªè¦ä½ æŠŠæ–‡ä»¶æš‚å­˜åˆ° git ä¸­ï¼Œgit å°±ä¼šè®°ä½å®ƒï¼Œå“ªæ€•ä½ ä¹‹å git resetï¼Œgit rebaseï¼Œcherry-pickï¼Œæˆ–è€…æäº¤æ‹‰å–è¦†ç›–ï¼Œåˆ‡æ¢åˆ†æ”¯ç”šè‡³åˆ é™¤æ–‡ä»¶ã€‚åªè¦è¿™ä¸ª blob è¿˜æ²¡è¢« git gc æ¸…ç†ï¼Œå®ƒå°±èƒ½è¢« git fsck --lost-found æ‰¾å‡ºæ¥</p>
<p><code>git fsck --lost-found</code> æœ¬è´¨æ˜¯æ¢å¤ Git ç®¡ç†è¿‡çš„æ•°æ®ï¼Œå¯¹äºæ²¡æœ‰è¢« git add è¿‡çš„æ–‡ä»¶ï¼Œ Git ä»æ¥å°±ä¸çŸ¥é“è¿™ä¸ªæ–‡ä»¶å­˜åœ¨è¿‡ï¼Œè‡ªç„¶ä¹Ÿå°±æ‰¾ä¸åˆ°äº†</p>
<h2 data-id="heading-9">4. git fsck --lost-found å‘½ä»¤è§£é‡Š</h2>
<p><code>git fsck --lost-found</code> æ˜¯ Git å†…ç½®å‘½ä»¤ï¼Œç”¨äºæ£€æŸ¥ Git ä»“åº“çš„å¯¹è±¡æ•°æ®åº“ï¼ˆobject databaseï¼‰ï¼Œå¹¶å°†ä»»ä½•â€œæ‚¬æŒ‚â€ï¼ˆdanglingï¼‰æˆ–â€œä¸¢å¤±â€çš„å¯¹è±¡æ¢å¤åˆ° <code>.git/lost-found/</code> ç›®å½•ä¸­ã€‚è¿™æ˜¯ä¸€ä¸ªè¯Šæ–­å’Œæ¢å¤å·¥å…·ï¼Œå¸¸ç”¨äºä¿®å¤æŸåçš„ä»“åº“æˆ–æ‰¾å›æ„å¤–ä¸¢å¤±çš„æ•°æ®ã€‚</p>
<ul>
<li>
<p>git fsckï¼šè¿™æ˜¯æ ¸å¿ƒå‘½ä»¤ï¼Œç”¨äºéªŒè¯ Git ä»“åº“ä¸­å¯¹è±¡çš„å®Œæ•´æ€§ã€‚å®ƒä¼šæ£€æŸ¥æ‰€æœ‰å¯¹è±¡ï¼ˆå¦‚æäº¤ã€æ ‘ã€blob å’Œæ ‡ç­¾ï¼‰çš„è¿é€šæ€§ã€æœ‰æ•ˆæ€§å’Œ SHA-1 æ ¡éªŒå’Œã€‚å¦‚æœå‘ç°é—®é¢˜ï¼ˆå¦‚æŸåçš„å¯¹è±¡æˆ–æ— æ³•è®¿é—®çš„å¼•ç”¨ï¼‰ï¼Œå®ƒä¼šæŠ¥å‘Šé”™è¯¯ã€‚</p>
</li>
<li>
<p>--lost-found é€‰é¡¹ï¼šè¿™ä¸ªé€‰é¡¹æ‰©å±•äº† fsck çš„è¡Œä¸ºï¼Œä¸ä»…æ£€æŸ¥é—®é¢˜ï¼Œè¿˜ä¼šå°†é‚£äº›â€œæ‚¬æŒ‚â€çš„å¯¹è±¡ï¼ˆå³å­˜åœ¨äºå¯¹è±¡æ•°æ®åº“ä¸­ï¼Œä½†æ²¡æœ‰è¢«ä»»ä½•å¼•ç”¨å¦‚åˆ†æ”¯ã€æ ‡ç­¾æˆ– HEAD æŒ‡å‘çš„å¯¹è±¡ï¼‰å¤åˆ¶åˆ° .git/lost-found/ ç›®å½•ä¸‹ã€‚å…·ä½“æ¥è¯´ï¼š</p>
<p>æ‚¬æŒ‚çš„æäº¤ï¼ˆcommitsï¼‰ä¼šæ”¾åœ¨ <code>.git/lost-found/commit/</code> ç›®å½•ä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶åä¸ºå…¶ SHA-1 å€¼ï¼Œæ˜¯ä¸€ä¸ªåŒ…å«æäº¤å…ƒæ•°æ®çš„æ–‡æœ¬æ–‡ä»¶ã€‚</p>
<p>å…¶ä»–æ‚¬æŒ‚å¯¹è±¡ï¼ˆå¦‚æ ‘ã€blob æˆ–æ ‡ç­¾ï¼‰ä¼šæ”¾åœ¨ <code>.git/lost-found/other/</code> ç›®å½•ä¸­ï¼ŒåŒæ ·ä»¥ SHA-1 å‘½åã€‚</p>
</li>
</ul>
<p>è¿™äº›æ‚¬æŒ‚å¯¹è±¡é€šå¸¸æ˜¯å› ä¸ºæ“ä½œå¦‚ git rebaseã€git reset æˆ–æ‰‹åŠ¨åˆ é™¤å¼•ç”¨è€Œäº§ç”Ÿçš„ã€‚å®ƒä»¬ä¸æ˜¯ä»“åº“æŸåçš„æ ‡å¿—ï¼Œè€Œæ˜¯ Git çš„æ­£å¸¸è¡Œä¸ºï¼ˆGit é»˜è®¤ä¿ç•™è¿™äº›å¯¹è±¡ä¸€æ®µæ—¶é—´ï¼Œä»¥é˜²éœ€è¦æ¢å¤ï¼‰ã€‚</p>
<h2 data-id="heading-10">5. é€šè¿‡å…³é”®è¯å¿«é€Ÿæœç´¢</h2>
<p>æˆ‘æƒ³åœ¨ä¸€å¤§å †æ–‡ä»¶ä¸­æ‰¾åˆ°æƒ³è¦çš„æ–‡ä»¶æ€ä¹ˆåŠï¼Ÿ</p>
<p>ç›´æ¥ vscode æ‰“å¼€æ•´ä¸ª .git/lost-found/other ç›®å½•ï¼Œç„¶åå…¨å±€æœç´¢å…³é”®è¯å³å¯</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59ddaa3ad0844fc19bd863d389ea28ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375004&amp;x-signature=3pGlNP51lervLFngwi69lUOAn7A%3D" alt="10.png" loading="lazy"/></p>
<p>æˆ‘æœ¬æ¥è¿˜ç ”ç©¶äº†åŠå¤©çš„æœç´¢å‘½ä»¤ï¼Œæœ€åå‘ç°è¿˜ä¸å¦‚åœ¨ vscode ä¸­å…¨å±€æœç´¢æ–¹ä¾¿ğŸ˜“</p>
<h2 data-id="heading-11">6. æœç´¢è¿›é˜¶ï¼æŸ¥æ‰¾æœ€è¿‘ä¿®æ”¹çš„ 15 ä¸ªæ–‡ä»¶</h2>
<p>ä¸è¿‡æ–°çš„é—®é¢˜ä¹Ÿéšä¹‹å‡ºç°ï¼Œæ–‡ä»¶å¤ªå¤šæ€ä¹ˆåŠï¼Ÿå¦‚æœæˆ‘ .git/lost-found/other æ–‡ä»¶å¤¹ä¸‹é¢æœ‰å‡ åƒä¸ªæ–‡ä»¶ï¼Œæˆ‘æƒ³æ‰¾å›æœ€è¿‘è¢«è¯¯åˆ çš„æ–‡ä»¶ï¼Œéš¾é“è¦æŒ¨ä¸ªæ‰“å¼€æŸ¥çœ‹æ–‡ä»¶å†…å®¹å—ï¼Ÿ</p>
<p>å¥½é—®é¢˜ï¼Œæˆ‘ä¹Ÿç»™ä½ æƒ³åˆ°äº†è§£å†³æ–¹æ³•ã€‚ç»§ç»­å¾€ä¸‹çœ‹ã€‚</p>
<p>å‰é¢çš„å›¾ç‰‡ä¸­æ˜¾ç¤º .git/lost-found/other æ–‡ä»¶å¤¹å¾ˆå¹²å‡€ï¼Œåªæœ‰è¢«æˆ‘æ‰‹åŠ¨ä¸¢å¼ƒçš„ 50 ä¸ªæ­Œè¯æ–‡ä»¶ï¼Œæ˜¯å› ä¸ºæˆ‘ä¹‹å‰æ¸…ç†äº† git çš„ç¼“å­˜ï¼Œå…¶å®åœ¨æˆ‘æ¸…ç†ç¼“å­˜ä¹‹å‰ .git/lost-found/other æ–‡ä»¶å¤¹æ˜¯å­˜åœ¨ä¸¤åƒå¤šä¸ªæ–‡ä»¶çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5f4b698e21442978b45c4d6bdb66625~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375004&amp;x-signature=UnLzAI%2BmIj3iCjZWZSo%2BT3fiaZM%3D" alt="11.png" loading="lazy"/></p>
<p>è¦æƒ³åœ¨è¿™ä¸¤åƒå¤šä¸ªæ–‡ä»¶ä¸­æ‰¾åˆ°æˆ‘ä¸¢å¤±çš„é‚£ 50 ä¸ªæ­Œè¯æ–‡ä»¶ï¼Œå·¥ä½œé‡å¯æƒ³è€ŒçŸ¥ï¼</p>
<p>æ¯•ç«Ÿä¸æ˜¯æ‰€æœ‰çš„æ–‡ä»¶æˆ‘éƒ½è®°å¾—ä½ï¼Œé€šè¿‡å…³é”®è¯æŸ¥æ‰¾å›æ¥</p>
<p>åˆ«æ€¥ï¼Œæˆ‘æœ‰å¥½åŠæ³•ï¼</p>
<p>æˆ‘ç°åœ¨æ–°å¢ 15 ä¸ªä¸åŒæ ¼å¼çš„æ–‡ä»¶è¿›è¡Œæµ‹è¯•</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cada4041948c4420a860f164df46468b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375004&amp;x-signature=qz0KiIGJKQtzR9IMTVkbwRABg8Q%3D" alt="12.png" loading="lazy"/></p>
<p>ç„¶åæŠŠæ–‡ä»¶æš‚å­˜ååˆ é™¤ï¼Œæµ‹è¯•èƒ½å¦ç²¾ç¡®æ‰¾å›è¿™ 15 ä¸ªæ–‡ä»¶</p>
<p>æ³¨æ„ï¼éœ€è¦é‡æ–°è¿è¡Œ <code>git fsck --lost-found</code> å‘½ä»¤æ‰èƒ½æ›´æ–°.git/lost-found/other æ–‡ä»¶å¤¹å“¦ï¼å¦åˆ™ä¼šæœå‡ºæ¥æ—§çš„æ•°æ®</p>
<p>è¿˜æ˜¯åœ¨é¡¹ç›®<code>æ ¹ç›®å½•</code>ï¼ˆä¸.git æ–‡ä»¶å¤¹åŒçº§ï¼‰ä¸‹è¿è¡Œå‘½ä»¤</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-built_in">mkdir</span> -p recent_lost
&gt; temp_times.txt  <span class="hljs-comment"># å…ˆåˆ›å»ºç©ºæ–‡ä»¶ï¼Œé¿å…åç»­é”™è¯¯</span>

<span class="hljs-keyword">for</span> lost_file <span class="hljs-keyword">in</span> .git/lost-found/other/*; <span class="hljs-keyword">do</span>
    <span class="hljs-keyword">if</span> [ ! -f <span class="hljs-string">"<span class="hljs-variable">$lost_file</span>"</span> ]; <span class="hljs-keyword">then</span>  <span class="hljs-comment"># å¦‚æœæ²¡æœ‰æ–‡ä»¶ï¼Œè·³è¿‡ï¼ˆå¤„ç†ç©ºç›®å½•ï¼‰</span>
        <span class="hljs-built_in">continue</span>
    <span class="hljs-keyword">fi</span>
    sha=$(<span class="hljs-built_in">basename</span> <span class="hljs-string">"<span class="hljs-variable">$lost_file</span>"</span>)
    obj_dir=<span class="hljs-string">".git/objects/<span class="hljs-variable">${sha:0:2}</span>"</span>
    obj_file=<span class="hljs-string">"<span class="hljs-variable">$obj_dir</span>/<span class="hljs-variable">${sha:2}</span>"</span>
    <span class="hljs-keyword">if</span> [ -f <span class="hljs-string">"<span class="hljs-variable">$obj_file</span>"</span> ]; <span class="hljs-keyword">then</span>
        mtime=$(<span class="hljs-built_in">stat</span> -c %Y <span class="hljs-string">"<span class="hljs-variable">$obj_file</span>"</span> 2&gt;/dev/null)  <span class="hljs-comment"># è·å– Unix æ—¶é—´æˆ³ï¼Œå¿½ç•¥é”™è¯¯</span>
        <span class="hljs-keyword">if</span> [ -n <span class="hljs-string">"<span class="hljs-variable">$mtime</span>"</span> ]; <span class="hljs-keyword">then</span>
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$mtime</span> <span class="hljs-variable">$sha</span>"</span> &gt;&gt; temp_times.txt
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>

<span class="hljs-keyword">if</span> [ -s temp_times.txt ]; <span class="hljs-keyword">then</span>  <span class="hljs-comment"># åªåœ¨æ–‡ä»¶éç©ºæ—¶æ’åº</span>
    <span class="hljs-built_in">sort</span> -nr temp_times.txt | <span class="hljs-built_in">head</span> -n 15 | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> mtime sha; <span class="hljs-keyword">do</span>
        <span class="hljs-built_in">cp</span> <span class="hljs-string">".git/lost-found/other/<span class="hljs-variable">$sha</span>"</span> <span class="hljs-string">"recent_lost/<span class="hljs-variable">$sha</span>"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Copied recent object: <span class="hljs-variable">$sha</span> (mtime: <span class="hljs-subst">$(date -d @$mtime)</span>)"</span>
    <span class="hljs-keyword">done</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"No recent objects found or no mtime available. This may happen if objects are packed (not loose) or no matching files in .git/objects/."</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">rm</span> -f temp_times.txt  <span class="hljs-comment"># ç”¨ -f å¿½ç•¥å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78cce64abd454080b3011e83bf78909c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375004&amp;x-signature=CVdqM9Y2lDlGZ4hOntC%2F4lbk99I%3D" alt="13.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/55de8db0c6884c659805fa31367732aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375004&amp;x-signature=au8CvthE4Ap40CnyA7WKdKAVolU%3D" alt="14.png" loading="lazy"/></p>
<p>æˆåŠŸæå–å‡ºæœ€è¿‘ä¿®æ”¹çš„ 15 ä¸ªæ–‡ä»¶ï¼Œå¹¶å°†å…¶å­˜å…¥è‡ªåŠ¨åˆ›å»ºçš„ <code>recent_lost/</code> æ–‡ä»¶å¤¹ä¸­</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68117122cba34065b9162f44e85f2b46~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375004&amp;x-signature=MKEjAxRqQYNZcgpru0%2FtFijgf%2BM%3D" alt="15.png" loading="lazy"/></p>
<p>ç”¨ vscode æ‰“å¼€é¡¹ç›®ï¼Œä¼šå‘ç°é™¤äº† jsï¼Œhtmlï¼Œvueï¼Œtxt ç­‰æ–‡æœ¬æ–‡ä»¶æ‰“å¼€åå¯ä»¥ç›´è§‚çš„çœ‹è§å†…å®¹å¤–ï¼Œå…¶ä»–çš„æ ¼å¼æ ¹æœ¬çœ‹ä¸äº†ä¸€ç‚¹ï¼Œé‚£å’‹æï¼Ÿåˆ«æ€¥ï¼Œè¯·çœ‹ä¸‹æ–‡-åˆ¤æ–­æ–‡ä»¶ç±»å‹</p>
<p>è§£é‡Šï¼šè„šæœ¬éå† other/ ä¸­çš„ SHAï¼ŒæŸ¥æ‰¾å¯¹åº” .git/objects/ ä¸­çš„æ–‡ä»¶ï¼Œè·å– mtimeï¼ŒæŒ‰æ—¶é—´é™åºå¤åˆ¶å‰ N ä¸ªåˆ°æ–°ç›®å½• recent_lost/ã€‚è¿™æ ·ä½ åªéœ€æ£€æŸ¥å°‘æ•°æ–‡ä»¶ã€‚</p>
<p>tipï¼šå¦‚æœæƒ³è°ƒæ•´æ‰¾å›çš„æ•°é‡ï¼Œè‡ªå·±æŠŠ 15 è¿™ä¸ªæ•°å­—æ›´æ”¹å³å¯</p>
<h2 data-id="heading-12">7. å¦‚ä½•åˆ¤æ–­æ–‡ä»¶ç±»å‹ï¼Ÿ</h2>
<p>è¿è¡Œä¸‹é¢è¿™ä¸ªå¾ªç¯è„šæœ¬èƒ½æ‰¹é‡æ£€æŸ¥æ–‡ä»¶ç±»å‹</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> recent_lost/*; <span class="hljs-keyword">do</span>
    file_type=$(file <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span>)
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$file</span>: <span class="hljs-variable">$file_type</span>"</span>
<span class="hljs-keyword">done</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/039ea435837649bd80e84462c2bd1a1b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375004&amp;x-signature=BBKwKetY5oqz8ejqA6cq1UOjBSU%3D" alt="16.png" loading="lazy"/></p>
<p>å¦‚å›¾æ‰€ç¤ºï¼Œhtmlï¼Œjsonï¼Œjsï¼Œexcelï¼Œjpgï¼Œmp4ï¼Œpdfï¼Œdwg ç­‰æ ¼å¼éƒ½èƒ½æ­£ç¡®åˆ¤æ–­å‡ºæ¥</p>
<p>ç„¶åæŒ¨ä¸ªå¤åˆ¶å“ˆå¸Œå€¼ï¼Œåœ¨ recent_lost æ–‡ä»¶æœç´¢æ–‡ä»¶ï¼šæŒ‰ç»„åˆé”® chrl + p -&gt; ç²˜è´´å“ˆå¸Œå€¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7618f15aba44484bac405dff6edd462b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375004&amp;x-signature=LNwUbK%2F9ip96%2F0f2NYCwAeb8tDY%3D" alt="17.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46418ef3c8874d42adffb886d62de570~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375004&amp;x-signature=du7LGNh6NHyRT3kXBwCjG4%2BsHmM%3D" alt="18.png" loading="lazy"/></p>
<p>åœ¨ vscode ä¸­æ‰¾åˆ°è¿™ä¸ª excel çš„å“ˆå¸Œå€¼å¯¹åº”çš„æ–‡ä»¶ï¼Œç„¶åé¼ æ ‡å³é”®ï¼Œ<code>åœ¨æ–‡ä»¶èµ„æºç®¡ç†å™¨ä¸­æ˜¾ç¤º</code></p>
<p>ç„¶åæ‰‹åŠ¨æ›´æ”¹æ–‡ä»¶åç¼€ä¸ºå¯¹åº”çš„æ–‡ä»¶ç±»å‹ï¼Œå³å¯è¿˜åŸå†…å®¹å•¦ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65428f40084d410e814922e71093fbec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zey5LqR5LiA6bmk:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375004&amp;x-signature=ESjyIq0cb9NP34vFqTqCeYnd9J0%3D" alt="19.png" loading="lazy"/></p>
<p>å…¶ä»–çš„æ ¼å¼æˆ‘å°±ä¸æŒ¨ä¸ªè¿˜åŸå•¦ï¼Œæ­¥éª¤éƒ½è·Ÿè¿˜åŸ excel ä¸€æ ·çš„</p>
<h2 data-id="heading-13">8. git ç˜¦èº«</h2>
<ul>
<li>
<p>å¼ºåˆ¶åƒåœ¾å›æ”¶å¹¶ç«‹å³ pruneï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git gc --aggressive --prune=now
</code></pre>
<p>è¿è¡Œè¿™ä¸ªå‘½ä»¤åï¼Œåˆ é™¤ lost-found æ–‡ä»¶å¤¹ï¼Œç„¶åæ–°å¢æ–‡ä»¶æš‚å­˜åˆ é™¤æš‚å­˜åé‡æ–° git fsck --lost-foundï¼Œå°±ä¼šå‘ç°ï¼Œä»¥å‰çš„è¢«æ¸…ç†å¹²å‡€äº†ï¼Œåªå‰©ä¸‹äº†åˆšæ‰æ–°å¢åˆ é™¤çš„æ–‡ä»¶</p>
</li>
<li>
<p>å‹ç¼© .git/objects æ–‡ä»¶å¤¹</p>
<pre><code class="hljs language-bash" lang="bash">git repack -a -d -f --depth=50 --window=50
</code></pre>
<p>å‘½ä»¤çš„ä½œç”¨æ˜¯åˆ é™¤å†—ä½™çš„æ—§ pack æ–‡ä»¶å’Œæ¾æ•£å¯¹è±¡ï¼Œé‡Šæ”¾ç©ºé—´ï¼›å‘½ä»¤åªå½±å“å­˜å‚¨æ ¼å¼ï¼Œä¸ä¿®æ”¹ä»“åº“å†å²ã€æäº¤æˆ–æ–‡ä»¶å†…å®¹ã€‚SHA å€¼ä¸å˜ï¼Œä»“åº“åŠŸèƒ½å®Œæ•´ã€‚</p>
<p>å¯æ˜¯æˆ‘è¿è¡Œåå‘ç°å¹¶æ²¡å•¥ç”¨ï¼Œä¼°è®¡æ˜¯æˆ‘è¿™ä¸ªä»“åº“æœ‰å¥½å‡ å¹´çš„å†å²äº†ï¼Œé•¿æœŸç´¯ç§¯å¯¼è‡´ä½“ç§¯å˜å¤§ï¼Œå‹æ— å¯å‹äº†</p>
</li>
<li>
<p>é‡æ–° clone é¡¹ç›®</p>
<p>å¦‚æœä½ ä¸å«Œéº»çƒ¦çš„è¯ï¼Œé‡æ–° git clone git ä»“åº“ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä¸è¿‡æˆ‘å·²ç»å®è·µäº†ä¸€éï¼Œé‡æ–°æ‹‰å–ä»£ç è·Ÿè¿è¡Œ git gc --aggressive --prune=now å‘½ä»¤å¹¶æ— åŒºåˆ«ï¼Œ.git/objects æ–‡ä»¶å¤¹ä¾ç„¶æ˜¯åŒæ ·çš„å¤§å°</p>
<p>è®°å¾—æå‰å°† .git/config æ–‡ä»¶å¤‡ä»½ï¼Œclone åå†è¦†ç›–å“¦</p>
</li>
</ul>
<h2 data-id="heading-14">æ€»ç»“</h2>
<ul>
<li>
<p>å¦‚æœæ²¡æœ‰æš‚å­˜è¿‡ï¼Œå°±æ— æ³•é€šè¿‡ git å‘½ä»¤æ‰¾å›ã€‚ä¸è¿‡å¯ä»¥è¯•è¯•ç¼–è¾‘å™¨çš„å†å²è®°å½•åŠŸèƒ½ï¼Œè¿™é‡Œç”¨ vscode ä¸¾ä¾‹</p>
<p>æ“ä½œæ­¥éª¤ï¼šåŒæ—¶æŒ‰ä½ <code>ctrl + shift + p</code> è°ƒç”¨å¿«æ·é”® -&gt; è¾“å…¥å¹¶æ‰“å¼€ <code>æœ¬åœ°å†å²è®°å½•ï¼šæŸ¥æ‰¾è¦è¿˜åŸçš„æ¡ç›®</code> -&gt; å°±å¯ä»¥çœ‹è§æœ¬åœ°å†å²æ–‡ä»¶åˆ—è¡¨äº†</p>
</li>
<li>
<p>å¦‚æœæ˜¯ç”¨ Socurcetree æäº¤ä»£ç çš„æ—¶å€™ï¼ŒæŠ¥é”™ç„¶åä¸¢å¤±äº†æ–‡ä»¶ï¼Œæˆ–è®¸å»<code>è´®è—</code>èœå•ä¸‹é¢å¯ä»¥æ‰¾åˆ°ä»£ç ï¼ˆæˆ‘ä»Šå¤©å°±è¢« Socurcetree ç»™å‘äº†ï¼ŒæŠ¥é”™åè‡ªå·±ç»™æˆ‘ä¸¢åˆ°è´®è—å»äº†ï¼‰</p>
</li>
<li>
<p>åªèƒ½è¿˜åŸä¸¢å¤±çš„æ–‡ä»¶å†…å®¹ï¼Œæ— æ³•è¿˜åŸæ–‡ä»¶åï¼Œä¸è¿‡æˆ‘æƒ³èƒ½æ‰¾å›å†…å®¹ä¹Ÿå¤Ÿç”¨äº†</p>
</li>
<li>
<p>å…»æˆè‰¯å¥½ä¹ æƒ¯ï¼Œéšæ—¶ git add . å‘€ï¼</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring AOPè¯¦è§£ï¼šä»åŸç†åˆ°å®æˆ˜]]></title>    <link>https://juejin.cn/post/7592361736130068490</link>    <guid>https://juejin.cn/post/7592361736130068490</guid>    <pubDate>2026-01-07T07:23:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592361736130068490" data-draft-id="7592361736130052106" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring AOPè¯¦è§£ï¼šä»åŸç†åˆ°å®æˆ˜"/> <meta itemprop="keywords" content="Spring"/> <meta itemprop="datePublished" content="2026-01-07T07:23:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ä¸­é£˜è¡çš„è®°å¿†"/> <meta itemprop="url" content="https://juejin.cn/user/694547077666606"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring AOPè¯¦è§£ï¼šä»åŸç†åˆ°å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547077666606/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ä¸­é£˜è¡çš„è®°å¿†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T07:23:50.000Z" title="Wed Jan 07 2026 07:23:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Spring AOPè¯¦è§£ï¼šä»åŸç†åˆ°å®æˆ˜</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>AOPï¼ˆAspect-Oriented Programmingï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰æ˜¯Springæ¡†æ¶çš„å¦ä¸€å¤§æ ¸å¿ƒç‰¹æ€§ã€‚å®ƒé€šè¿‡å°†æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆCross-Cutting Concernsï¼‰ä»ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œå®ç°äº†ä»£ç çš„è§£è€¦å’Œå¤ç”¨ã€‚æœ¬æ–‡å°†æ·±å…¥è®²è§£Spring AOPçš„æ ¸å¿ƒæ¦‚å¿µã€å®ç°åŸç†å’Œå®æˆ˜åº”ç”¨ã€‚</p>
<h3 data-id="heading-2">ä¸€ã€ä»€ä¹ˆæ˜¯AOP</h3>
<h4 data-id="heading-3">1.1 AOPçš„æ¦‚å¿µ</h4>
<p>AOPæ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œå®ƒå°†ç¨‹åºä¸­çš„æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆå¦‚æ—¥å¿—ã€äº‹åŠ¡ã€å®‰å…¨ç­‰ï¼‰ä»ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œå½¢æˆç‹¬ç«‹çš„åˆ‡é¢ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22415fa2d33b4fd5ab8ca0466b2b309f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375430&amp;x-signature=JFeKaFAx10CFw2rzstcO%2BKp905w%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-4">1.2 æ ¸å¿ƒæ¦‚å¿µ</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c13a945da5d4259b027e9017ec15ab2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375430&amp;x-signature=I1gTMjKipp%2Fizrs8%2B6v4y9LJMYc%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-5">1.3 ä¸ºä»€ä¹ˆéœ€è¦AOP</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æ²¡æœ‰AOPçš„ä»£ç  - å­˜åœ¨çš„é—®é¢˜
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceWithoutAOP</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createUser</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-comment">// 1. æ—¥å¿—è®°å½•</span>
        System.out.println(<span class="hljs-string">"å¼€å§‹åˆ›å»ºç”¨æˆ·: "</span> + user.getUsername());
        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

        <span class="hljs-comment">// 2. æƒé™æ£€æŸ¥</span>
        <span class="hljs-keyword">if</span> (!SecurityContext.hasPermission(<span class="hljs-string">"user:create"</span>)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SecurityException</span>(<span class="hljs-string">"æ²¡æœ‰æƒé™"</span>);
        }

        <span class="hljs-comment">// 3. å‚æ•°æ ¡éªŒ</span>
        <span class="hljs-keyword">if</span> (user.getUsername() == <span class="hljs-literal">null</span> || user.getUsername().isEmpty()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"ç”¨æˆ·åä¸èƒ½ä¸ºç©º"</span>);
        }

        <span class="hljs-comment">// 4. äº‹åŠ¡å¼€å¯</span>
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">tx</span> <span class="hljs-operator">=</span> TransactionManager.begin();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 5. æ ¸å¿ƒä¸šåŠ¡é€»è¾‘</span>
            saveUser(user);

            <span class="hljs-comment">// 6. äº‹åŠ¡æäº¤</span>
            tx.commit();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// 7. äº‹åŠ¡å›æ»š</span>
            tx.rollback();
            <span class="hljs-keyword">throw</span> e;
        }

        <span class="hljs-comment">// 8. æ—¥å¿—è®°å½•</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">endTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        System.out.println(<span class="hljs-string">"åˆ›å»ºç”¨æˆ·å®Œæˆï¼Œè€—æ—¶: "</span> + (endTime - startTime) + <span class="hljs-string">"ms"</span>);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-comment">// å®é™…çš„ä¸šåŠ¡é€»è¾‘</span>
        System.out.println(<span class="hljs-string">"ä¿å­˜ç”¨æˆ·åˆ°æ•°æ®åº“"</span>);
    }
}

<span class="hljs-comment">// é—®é¢˜ï¼š</span>
<span class="hljs-comment">// 1. ä»£ç é‡å¤ï¼šæ—¥å¿—ã€æƒé™ã€äº‹åŠ¡ç­‰ä»£ç åœ¨æ¯ä¸ªæ–¹æ³•ä¸­é‡å¤</span>
<span class="hljs-comment">// 2. ä»£ç æ··ä¹±ï¼šä¸šåŠ¡é€»è¾‘ä¸ç³»ç»ŸæœåŠ¡ä»£ç æ··åœ¨ä¸€èµ·</span>
<span class="hljs-comment">// 3. éš¾ä»¥ç»´æŠ¤ï¼šä¿®æ”¹æ—¥å¿—é€»è¾‘éœ€è¦æ”¹åŠ¨æ‰€æœ‰æ–¹æ³•</span>
<span class="hljs-comment">// 4. è¿åå•ä¸€èŒè´£ï¼šä¸€ä¸ªæ–¹æ³•æ‰¿æ‹…äº†å¤ªå¤šè´£ä»»</span>
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * ä½¿ç”¨AOPçš„ä»£ç  - ç®€æ´æ¸…æ™°
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceWithAOP</span> {

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-meta">@RequiresPermission("user:create")</span>
    <span class="hljs-meta">@Validated</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createUser</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-comment">// çº¯ç²¹çš„ä¸šåŠ¡é€»è¾‘</span>
        saveUser(user);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">(User user)</span> {
        System.out.println(<span class="hljs-string">"ä¿å­˜ç”¨æˆ·åˆ°æ•°æ®åº“"</span>);
    }
}

<span class="hljs-comment">// ä¼˜åŠ¿ï¼š</span>
<span class="hljs-comment">// 1. ä»£ç ç®€æ´ï¼šåªåŒ…å«æ ¸å¿ƒä¸šåŠ¡é€»è¾‘</span>
<span class="hljs-comment">// 2. æ˜“äºç»´æŠ¤ï¼šç³»ç»ŸæœåŠ¡ä»£ç é›†ä¸­ç®¡ç†</span>
<span class="hljs-comment">// 3. å¯å¤ç”¨ï¼šåˆ‡é¢å¯ä»¥åº”ç”¨äºå¤šä¸ªæ–¹æ³•</span>
<span class="hljs-comment">// 4. ç¬¦åˆå•ä¸€èŒè´£ï¼šä¸šåŠ¡æ–¹æ³•åªå…³æ³¨ä¸šåŠ¡é€»è¾‘</span>
</code></pre>
<h3 data-id="heading-6">äºŒã€Spring AOPåŸºç¡€</h3>
<h4 data-id="heading-7">2.1 é€šçŸ¥ç±»å‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * äº”ç§é€šçŸ¥ç±»å‹æ¼”ç¤º
 */</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AdviceTypeDemo</span> {

    <span class="hljs-comment">/**
     * å‰ç½®é€šçŸ¥ï¼šåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œ
     */</span>
    <span class="hljs-meta">@Before("execution(* com.example.service.*.*(..))")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">beforeAdvice</span><span class="hljs-params">(JoinPoint joinPoint)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();
        System.out.println(<span class="hljs-string">"å‰ç½®é€šçŸ¥ï¼šå‡†å¤‡æ‰§è¡Œæ–¹æ³• "</span> + methodName);
    }

    <span class="hljs-comment">/**
     * åç½®é€šçŸ¥ï¼šåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡Œï¼ˆæ— è®ºæ˜¯å¦æŠ›å‡ºå¼‚å¸¸ï¼‰
     */</span>
    <span class="hljs-meta">@After("execution(* com.example.service.*.*(..))")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterAdvice</span><span class="hljs-params">(JoinPoint joinPoint)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();
        System.out.println(<span class="hljs-string">"åç½®é€šçŸ¥ï¼šæ–¹æ³• "</span> + methodName + <span class="hljs-string">" æ‰§è¡Œå®Œæˆ"</span>);
    }

    <span class="hljs-comment">/**
     * è¿”å›é€šçŸ¥ï¼šåœ¨ç›®æ ‡æ–¹æ³•æ­£å¸¸è¿”å›ä¹‹åæ‰§è¡Œ
     */</span>
    <span class="hljs-meta">@AfterReturning(
        pointcut = "execution(* com.example.service.*.*(..))",
        returning = "result"
    )</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterReturningAdvice</span><span class="hljs-params">(JoinPoint joinPoint, Object result)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();
        System.out.println(<span class="hljs-string">"è¿”å›é€šçŸ¥ï¼šæ–¹æ³• "</span> + methodName + <span class="hljs-string">" è¿”å›å€¼ "</span> + result);
    }

    <span class="hljs-comment">/**
     * å¼‚å¸¸é€šçŸ¥ï¼šåœ¨ç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸åæ‰§è¡Œ
     */</span>
    <span class="hljs-meta">@AfterThrowing(
        pointcut = "execution(* com.example.service.*.*(..))",
        throwing = "ex"
    )</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterThrowingAdvice</span><span class="hljs-params">(JoinPoint joinPoint, Exception ex)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();
        System.out.println(<span class="hljs-string">"å¼‚å¸¸é€šçŸ¥ï¼šæ–¹æ³• "</span> + methodName + <span class="hljs-string">" æŠ›å‡ºå¼‚å¸¸ "</span> + ex.getMessage());
    }

    <span class="hljs-comment">/**
     * ç¯ç»•é€šçŸ¥ï¼šåŒ…å›´ç›®æ ‡æ–¹æ³•æ‰§è¡Œï¼Œæœ€å¼ºå¤§çš„é€šçŸ¥ç±»å‹
     */</span>
    <span class="hljs-meta">@Around("execution(* com.example.service.*.*(..))")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">aroundAdvice</span><span class="hljs-params">(ProceedingJoinPoint joinPoint)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();

        System.out.println(<span class="hljs-string">"ç¯ç»•é€šçŸ¥ï¼šæ–¹æ³• "</span> + methodName + <span class="hljs-string">" å¼€å§‹æ‰§è¡Œ"</span>);
        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ‰§è¡Œç›®æ ‡æ–¹æ³•</span>
            <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> joinPoint.proceed();

            <span class="hljs-type">long</span> <span class="hljs-variable">endTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
            System.out.println(<span class="hljs-string">"ç¯ç»•é€šçŸ¥ï¼šæ–¹æ³• "</span> + methodName + <span class="hljs-string">" æ‰§è¡ŒæˆåŠŸï¼Œè€—æ—¶ "</span> +
                             (endTime - startTime) + <span class="hljs-string">"ms"</span>);

            <span class="hljs-keyword">return</span> result;
        } <span class="hljs-keyword">catch</span> (Throwable e) {
            System.out.println(<span class="hljs-string">"ç¯ç»•é€šçŸ¥ï¼šæ–¹æ³• "</span> + methodName + <span class="hljs-string">" æ‰§è¡Œå¤±è´¥"</span>);
            <span class="hljs-keyword">throw</span> e;
        }
    }
}
</code></pre>
<p><strong>é€šçŸ¥æ‰§è¡Œé¡ºåºï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03c4398f94834319933eaa2fef40b99e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375430&amp;x-signature=pNse%2FqWMr59Vlpz7epSd6UQGhN8%3D" alt="" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3fb8f3fa4b6045ee8aa27527168c495b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375430&amp;x-signature=W7DRIFi2uH0xH6UPAyh4HiHcZak%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-8">2.2 åˆ‡ç‚¹è¡¨è¾¾å¼</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * åˆ‡ç‚¹è¡¨è¾¾å¼ç¤ºä¾‹
 */</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PointcutExpressionDemo</span> {

    <span class="hljs-comment">/**
     * executionè¡¨è¾¾å¼ï¼šæœ€å¸¸ç”¨
     * è¯­æ³•ï¼šexecution(ä¿®é¥°ç¬¦? è¿”å›ç±»å‹ åŒ…å.ç±»å.æ–¹æ³•å(å‚æ•°) å¼‚å¸¸?)
     */</span>

    <span class="hljs-comment">// åŒ¹é…UserServiceçš„æ‰€æœ‰publicæ–¹æ³•</span>
    <span class="hljs-meta">@Pointcut("execution(public * com.example.service.UserService.*(..))")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">userServiceMethods</span><span class="hljs-params">()</span> {}

    <span class="hljs-comment">// åŒ¹é…æ‰€æœ‰Serviceçš„æ‰€æœ‰æ–¹æ³•</span>
    <span class="hljs-meta">@Pointcut("execution(* com.example.service.*.*(..))")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">allServiceMethods</span><span class="hljs-params">()</span> {}

    <span class="hljs-comment">// åŒ¹é…æ‰€æœ‰è¿”å›Userçš„æ–¹æ³•</span>
    <span class="hljs-meta">@Pointcut("execution(com.example.entity.User *.*(..))")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">returnUser</span><span class="hljs-params">()</span> {}

    <span class="hljs-comment">// åŒ¹é…ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Longç±»å‹çš„æ–¹æ³•</span>
    <span class="hljs-meta">@Pointcut("execution(* *(Long, ..))")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">firstParamIsLong</span><span class="hljs-params">()</span> {}

    <span class="hljs-comment">/**
     * withinè¡¨è¾¾å¼ï¼šåŒ¹é…ç‰¹å®šç±»å‹
     */</span>

    <span class="hljs-comment">// åŒ¹é…serviceåŒ…ä¸‹çš„æ‰€æœ‰ç±»</span>
    <span class="hljs-meta">@Pointcut("within(com.example.service.*)")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">withinService</span><span class="hljs-params">()</span> {}

    <span class="hljs-comment">// åŒ¹é…serviceåŒ…åŠå­åŒ…ä¸‹çš„æ‰€æœ‰ç±»</span>
    <span class="hljs-meta">@Pointcut("within(com.example.service..*)")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">withinServicePackage</span><span class="hljs-params">()</span> {}

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@annotation</span>è¡¨è¾¾å¼ï¼šåŒ¹é…å¸¦æœ‰ç‰¹å®šæ³¨è§£çš„æ–¹æ³•
     */</span>

    <span class="hljs-comment">// åŒ¹é…å¸¦æœ‰@Transactionalæ³¨è§£çš„æ–¹æ³•</span>
    <span class="hljs-meta">@Pointcut("@annotation(org.springframework.transaction.annotation.Transactional)")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">transactionalMethods</span><span class="hljs-params">()</span> {}

    <span class="hljs-comment">// åŒ¹é…å¸¦æœ‰@RequiresPermissionæ³¨è§£çš„æ–¹æ³•</span>
    <span class="hljs-meta">@Pointcut("@annotation(com.example.annotation.RequiresPermission)")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">requiresPermissionMethods</span><span class="hljs-params">()</span> {}

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@within</span>è¡¨è¾¾å¼ï¼šåŒ¹é…å¸¦æœ‰ç‰¹å®šæ³¨è§£çš„ç±»çš„æ‰€æœ‰æ–¹æ³•
     */</span>

    <span class="hljs-comment">// åŒ¹é…å¸¦æœ‰@Serviceæ³¨è§£çš„ç±»çš„æ‰€æœ‰æ–¹æ³•</span>
    <span class="hljs-meta">@Pointcut("@within(org.springframework.stereotype.Service)")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">serviceBeans</span><span class="hljs-params">()</span> {}

    <span class="hljs-comment">/**
     * argsè¡¨è¾¾å¼ï¼šåŒ¹é…å‚æ•°ç±»å‹
     */</span>

    <span class="hljs-comment">// åŒ¹é…å‚æ•°æ˜¯Userç±»å‹çš„æ–¹æ³•</span>
    <span class="hljs-meta">@Pointcut("args(com.example.entity.User)")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">argsUser</span><span class="hljs-params">()</span> {}

    <span class="hljs-comment">/**
     * ç»„åˆåˆ‡ç‚¹è¡¨è¾¾å¼
     */</span>

    <span class="hljs-comment">// ä¸è¿ç®—ï¼šåŒæ—¶æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶</span>
    <span class="hljs-meta">@Pointcut("userServiceMethods() &amp;&amp; args(Long)")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">userServiceWithLongParam</span><span class="hljs-params">()</span> {}

    <span class="hljs-comment">// æˆ–è¿ç®—ï¼šæ»¡è¶³ä»»ä¸€æ¡ä»¶</span>
    <span class="hljs-meta">@Pointcut("withinService() || withinServicePackage()")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">serviceOrPackage</span><span class="hljs-params">()</span> {}

    <span class="hljs-comment">// éè¿ç®—ï¼šä¸æ»¡è¶³æ¡ä»¶</span>
    <span class="hljs-meta">@Pointcut("allServiceMethods() &amp;&amp; !userServiceMethods()")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">excludeUserService</span><span class="hljs-params">()</span> {}
}
</code></pre>
<h4 data-id="heading-9">2.3 å®Œæ•´çš„åˆ‡é¢ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æ—¥å¿—åˆ‡é¢
 */</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoggingAspect</span> {

    <span class="hljs-comment">/**
     * å®šä¹‰åˆ‡ç‚¹ï¼šserviceå±‚æ‰€æœ‰æ–¹æ³•
     */</span>
    <span class="hljs-meta">@Pointcut("execution(* com.example.service..*.*(..))")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">serviceLayer</span><span class="hljs-params">()</span> {}

    <span class="hljs-comment">/**
     * ç¯ç»•é€šçŸ¥ï¼šè®°å½•æ–¹æ³•æ‰§è¡Œæ—¶é—´å’Œå‚æ•°
     */</span>
    <span class="hljs-meta">@Around("serviceLayer()")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">logAround</span><span class="hljs-params">(ProceedingJoinPoint joinPoint)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-comment">// è·å–æ–¹æ³•ä¿¡æ¯</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">className</span> <span class="hljs-operator">=</span> joinPoint.getTarget().getClass().getSimpleName();
        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();
        Object[] args = joinPoint.getArgs();

        <span class="hljs-comment">// è®°å½•å¼€å§‹</span>
        log.info(<span class="hljs-string">"å¼€å§‹æ‰§è¡Œ: {}.{}(), å‚æ•°: {}"</span>, className, methodName, Arrays.toString(args));
        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ‰§è¡Œç›®æ ‡æ–¹æ³•</span>
            <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> joinPoint.proceed();

            <span class="hljs-comment">// è®°å½•æˆåŠŸ</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">endTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
            log.info(<span class="hljs-string">"æ‰§è¡ŒæˆåŠŸ: {}.{}(), è€—æ—¶: {}ms, è¿”å›å€¼: {}"</span>,
                    className, methodName, (endTime - startTime), result);

            <span class="hljs-keyword">return</span> result;

        } <span class="hljs-keyword">catch</span> (Throwable e) {
            <span class="hljs-comment">// è®°å½•å¼‚å¸¸</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">endTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
            log.error(<span class="hljs-string">"æ‰§è¡Œå¤±è´¥: {}.{}(), è€—æ—¶: {}ms, å¼‚å¸¸: {}"</span>,
                     className, methodName, (endTime - startTime), e.getMessage());
            <span class="hljs-keyword">throw</span> e;
        }
    }
}
</code></pre>
<h3 data-id="heading-10">ä¸‰ã€AOPå®ç°åŸç†</h3>
<h4 data-id="heading-11">3.1 JDKåŠ¨æ€ä»£ç†</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * JDKåŠ¨æ€ä»£ç†ç¤ºä¾‹
 * è¦æ±‚ï¼šç›®æ ‡å¯¹è±¡å¿…é¡»å®ç°æ¥å£
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserService</span> {
    User <span class="hljs-title function_">findById</span><span class="hljs-params">(Long id)</span>;
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(User user)</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">findById</span><span class="hljs-params">(Long id)</span> {
        System.out.println(<span class="hljs-string">"æŸ¥è¯¢ç”¨æˆ·: "</span> + id);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(id, <span class="hljs-string">"User"</span> + id);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(User user)</span> {
        System.out.println(<span class="hljs-string">"ä¿å­˜ç”¨æˆ·: "</span> + user.getUsername());
    }
}

<span class="hljs-comment">/**
 * è‡ªå®šä¹‰InvocationHandler
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogInvocationHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InvocationHandler</span> {

    <span class="hljs-keyword">private</span> Object target;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">LogInvocationHandler</span><span class="hljs-params">(Object target)</span> {
        <span class="hljs-built_in">this</span>.target = target;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-comment">// å‰ç½®å¢å¼º</span>
        System.out.println(<span class="hljs-string">"JDKä»£ç† - æ–¹æ³•å¼€å§‹: "</span> + method.getName());
        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

        <span class="hljs-comment">// è°ƒç”¨ç›®æ ‡æ–¹æ³•</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> method.invoke(target, args);

        <span class="hljs-comment">// åç½®å¢å¼º</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">endTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        System.out.println(<span class="hljs-string">"JDKä»£ç† - æ–¹æ³•ç»“æŸ: "</span> + method.getName() +
                         <span class="hljs-string">", è€—æ—¶: "</span> + (endTime - startTime) + <span class="hljs-string">"ms"</span>);

        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-comment">/**
     * åˆ›å»ºä»£ç†å¯¹è±¡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; T <span class="hljs-title function_">createProxy</span><span class="hljs-params">(T target)</span> {
        <span class="hljs-keyword">return</span> (T) Proxy.newProxyInstance(
            target.getClass().getClassLoader(),
            target.getClass().getInterfaces(),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">LogInvocationHandler</span>(target)
        );
    }
}

<span class="hljs-comment">/**
 * ä½¿ç”¨JDKä»£ç†
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JdkProxyDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åˆ›å»ºç›®æ ‡å¯¹è±¡</span>
        <span class="hljs-type">UserService</span> <span class="hljs-variable">target</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserServiceImpl</span>();

        <span class="hljs-comment">// åˆ›å»ºä»£ç†å¯¹è±¡</span>
        <span class="hljs-type">UserService</span> <span class="hljs-variable">proxy</span> <span class="hljs-operator">=</span> LogInvocationHandler.createProxy(target);

        <span class="hljs-comment">// è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•</span>
        proxy.findById(<span class="hljs-number">1L</span>);
        proxy.save(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">"å¼ ä¸‰"</span>));
    }
}
</code></pre>
<h4 data-id="heading-12">3.2 CGLIBä»£ç†</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * CGLIBä»£ç†ç¤ºä¾‹
 * ä¼˜åŠ¿ï¼šä¸éœ€è¦å®ç°æ¥å£ï¼Œé€šè¿‡ç»§æ‰¿å®ç°
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {

    <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">findById</span><span class="hljs-params">(Long id)</span> {
        System.out.println(<span class="hljs-string">"æŸ¥è¯¢è®¢å•: "</span> + id);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>(id, <span class="hljs-string">"ORDER"</span> + id);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(Order order)</span> {
        System.out.println(<span class="hljs-string">"ä¿å­˜è®¢å•: "</span> + order.getOrderNo());
    }
}

<span class="hljs-comment">/**
 * è‡ªå®šä¹‰MethodInterceptor
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogMethodInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MethodInterceptor</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(Object obj, Method method, Object[] args,
                          MethodProxy proxy)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-comment">// å‰ç½®å¢å¼º</span>
        System.out.println(<span class="hljs-string">"CGLIBä»£ç† - æ–¹æ³•å¼€å§‹: "</span> + method.getName());
        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

        <span class="hljs-comment">// è°ƒç”¨çˆ¶ç±»æ–¹æ³•ï¼ˆç›®æ ‡æ–¹æ³•ï¼‰</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> proxy.invokeSuper(obj, args);

        <span class="hljs-comment">// åç½®å¢å¼º</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">endTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        System.out.println(<span class="hljs-string">"CGLIBä»£ç† - æ–¹æ³•ç»“æŸ: "</span> + method.getName() +
                         <span class="hljs-string">", è€—æ—¶: "</span> + (endTime - startTime) + <span class="hljs-string">"ms"</span>);

        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-comment">/**
     * åˆ›å»ºä»£ç†å¯¹è±¡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; T <span class="hljs-title function_">createProxy</span><span class="hljs-params">(Class&lt;T&gt; clazz)</span> {
        <span class="hljs-type">Enhancer</span> <span class="hljs-variable">enhancer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Enhancer</span>();
        enhancer.setSuperclass(clazz);
        enhancer.setCallback(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LogMethodInterceptor</span>());
        <span class="hljs-keyword">return</span> (T) enhancer.create();
    }
}

<span class="hljs-comment">/**
 * ä½¿ç”¨CGLIBä»£ç†
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CglibProxyDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åˆ›å»ºä»£ç†å¯¹è±¡ï¼ˆæ— éœ€ç›®æ ‡å¯¹è±¡ï¼‰</span>
        <span class="hljs-type">OrderService</span> <span class="hljs-variable">proxy</span> <span class="hljs-operator">=</span> LogMethodInterceptor.createProxy(OrderService.class);

        <span class="hljs-comment">// è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•</span>
        proxy.findById(<span class="hljs-number">1L</span>);
        proxy.save(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">"ORD20240101"</span>));
    }
}
</code></pre>
<h4 data-id="heading-13">3.3 Spring AOPä»£ç†é€‰æ‹©</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e14c35ef80f54878b05a407f105bf6e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375430&amp;x-signature=ol1sgXJSNZQB4oTo4uN5lCEPxis%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * Spring AOPé…ç½®
 */</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableAspectJAutoProxy(proxyTargetClass = true)</span>  <span class="hljs-comment">// å¼ºåˆ¶ä½¿ç”¨CGLIB</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AopConfig</span> {
}
</code></pre>
<h3 data-id="heading-14">å››ã€å®æˆ˜æ¡ˆä¾‹</h3>
<h4 data-id="heading-15">4.1 æ¡ˆä¾‹1ï¼šæ€§èƒ½ç›‘æ§åˆ‡é¢</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æ€§èƒ½ç›‘æ§æ³¨è§£
 */</span>
<span class="hljs-meta">@Target(ElementType.METHOD)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> PerformanceMonitor {
    String <span class="hljs-title function_">value</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">""</span>;
    <span class="hljs-type">long</span> <span class="hljs-title function_">threshold</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">1000</span>;  <span class="hljs-comment">// é»˜è®¤é˜ˆå€¼1ç§’</span>
}

<span class="hljs-comment">/**
 * æ€§èƒ½ç›‘æ§åˆ‡é¢
 */</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceMonitorAspect</span> {

    <span class="hljs-meta">@Around("@annotation(monitor)")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">monitor</span><span class="hljs-params">(ProceedingJoinPoint joinPoint, PerformanceMonitor monitor)</span>
            <span class="hljs-keyword">throws</span> Throwable {

        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().toShortString();
        <span class="hljs-type">String</span> <span class="hljs-variable">operationName</span> <span class="hljs-operator">=</span> monitor.value().isEmpty() ? methodName : monitor.value();
        <span class="hljs-type">long</span> <span class="hljs-variable">threshold</span> <span class="hljs-operator">=</span> monitor.threshold();

        <span class="hljs-comment">// å¼€å§‹è®¡æ—¶</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> joinPoint.proceed();

            <span class="hljs-comment">// è®¡ç®—è€—æ—¶</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">endTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
            <span class="hljs-type">long</span> <span class="hljs-variable">duration</span> <span class="hljs-operator">=</span> endTime - startTime;

            <span class="hljs-comment">// è®°å½•æ€§èƒ½æ•°æ®</span>
            <span class="hljs-keyword">if</span> (duration &gt; threshold) {
                log.warn(<span class="hljs-string">"æ€§èƒ½è­¦å‘Š: {} æ‰§è¡Œè€—æ—¶ {}msï¼Œè¶…è¿‡é˜ˆå€¼ {}ms"</span>,
                        operationName, duration, threshold);
            } <span class="hljs-keyword">else</span> {
                log.info(<span class="hljs-string">"æ€§èƒ½ç›‘æ§: {} æ‰§è¡Œè€—æ—¶ {}ms"</span>, operationName, duration);
            }

            <span class="hljs-comment">// å¯ä»¥å°†æ€§èƒ½æ•°æ®å‘é€åˆ°ç›‘æ§ç³»ç»Ÿ</span>
            sendToMonitoringSystem(operationName, duration);

            <span class="hljs-keyword">return</span> result;

        } <span class="hljs-keyword">catch</span> (Throwable e) {
            <span class="hljs-type">long</span> <span class="hljs-variable">endTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
            <span class="hljs-type">long</span> <span class="hljs-variable">duration</span> <span class="hljs-operator">=</span> endTime - startTime;
            log.error(<span class="hljs-string">"æ€§èƒ½ç›‘æ§: {} æ‰§è¡Œå¤±è´¥ï¼Œè€—æ—¶ {}ms"</span>, operationName, duration);
            <span class="hljs-keyword">throw</span> e;
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendToMonitoringSystem</span><span class="hljs-params">(String operation, <span class="hljs-type">long</span> duration)</span> {
        <span class="hljs-comment">// å‘é€åˆ°Prometheusã€Grafanaç­‰ç›‘æ§ç³»ç»Ÿ</span>
        <span class="hljs-comment">// MetricsRegistry.timer(operation).record(duration, TimeUnit.MILLISECONDS);</span>
    }
}

<span class="hljs-comment">/**
 * ä½¿ç”¨æ€§èƒ½ç›‘æ§
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductService</span> {

    <span class="hljs-meta">@PerformanceMonitor(value = "æŸ¥è¯¢å•†å“åˆ—è¡¨", threshold = 500)</span>
    <span class="hljs-keyword">public</span> List&lt;Product&gt; <span class="hljs-title function_">findProducts</span><span class="hljs-params">(String category)</span> {
        <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢</span>
        <span class="hljs-keyword">try</span> {
            Thread.sleep(<span class="hljs-number">300</span>);
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            e.printStackTrace();
        }
        <span class="hljs-keyword">return</span> Arrays.asList(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-number">1L</span>, <span class="hljs-string">"å•†å“1"</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-number">2L</span>, <span class="hljs-string">"å•†å“2"</span>)
        );
    }

    <span class="hljs-meta">@PerformanceMonitor(value = "ç”ŸæˆæŠ¥è¡¨", threshold = 2000)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">generateReport</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span>
        <span class="hljs-keyword">try</span> {
            Thread.sleep(<span class="hljs-number">1500</span>);
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            e.printStackTrace();
        }
    }
}
</code></pre>
<h4 data-id="heading-16">4.2 æ¡ˆä¾‹2ï¼šæ“ä½œæ—¥å¿—åˆ‡é¢</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æ“ä½œæ—¥å¿—æ³¨è§£
 */</span>
<span class="hljs-meta">@Target(ElementType.METHOD)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> OperationLog {
    String <span class="hljs-title function_">module</span><span class="hljs-params">()</span>;        <span class="hljs-comment">// æ¨¡å—å</span>
    String <span class="hljs-title function_">operation</span><span class="hljs-params">()</span>;     <span class="hljs-comment">// æ“ä½œç±»å‹</span>
    String <span class="hljs-title function_">description</span><span class="hljs-params">()</span>;   <span class="hljs-comment">// æ“ä½œæè¿°</span>
}

<span class="hljs-comment">/**
 * æ“ä½œæ—¥å¿—å®ä½“
 */</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SysOperationLog</span> {
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String <span class="hljs-keyword">module</span>;
    <span class="hljs-keyword">private</span> String operation;
    <span class="hljs-keyword">private</span> String description;
    <span class="hljs-keyword">private</span> String method;
    <span class="hljs-keyword">private</span> String params;
    <span class="hljs-keyword">private</span> String result;
    <span class="hljs-keyword">private</span> String username;
    <span class="hljs-keyword">private</span> String ip;
    <span class="hljs-keyword">private</span> Long duration;
    <span class="hljs-keyword">private</span> LocalDateTime createTime;
    <span class="hljs-keyword">private</span> String errorMsg;
}

<span class="hljs-comment">/**
 * æ“ä½œæ—¥å¿—åˆ‡é¢
 */</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OperationLogAspect</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OperationLogService operationLogService;

    <span class="hljs-meta">@Around("@annotation(operationLog)")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">logOperation</span><span class="hljs-params">(ProceedingJoinPoint joinPoint, OperationLog operationLog)</span>
            <span class="hljs-keyword">throws</span> Throwable {

        <span class="hljs-comment">// åˆ›å»ºæ—¥å¿—å¯¹è±¡</span>
        <span class="hljs-type">SysOperationLog</span> <span class="hljs-variable">sysLog</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SysOperationLog</span>();
        sysLog.setModule(operationLog.<span class="hljs-keyword">module</span>());
        sysLog.setOperation(operationLog.operation());
        sysLog.setDescription(operationLog.description());
        sysLog.setCreateTime(LocalDateTime.now());

        <span class="hljs-comment">// è·å–æ–¹æ³•ä¿¡æ¯</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">className</span> <span class="hljs-operator">=</span> joinPoint.getTarget().getClass().getName();
        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();
        sysLog.setMethod(className + <span class="hljs-string">"."</span> + methodName);

        <span class="hljs-comment">// è·å–æ–¹æ³•å‚æ•°</span>
        Object[] args = joinPoint.getArgs();
        sysLog.setParams(JSON.toJSONString(args));

        <span class="hljs-comment">// è·å–ç”¨æˆ·ä¿¡æ¯</span>
        sysLog.setUsername(getCurrentUsername());
        sysLog.setIp(getClientIp());

        <span class="hljs-comment">// å¼€å§‹è®¡æ—¶</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ‰§è¡Œç›®æ ‡æ–¹æ³•</span>
            <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> joinPoint.proceed();

            <span class="hljs-comment">// è®°å½•è¿”å›å€¼</span>
            sysLog.setResult(JSON.toJSONString(result));

            <span class="hljs-comment">// è®¡ç®—è€—æ—¶</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">endTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
            sysLog.setDuration(endTime - startTime);

            <span class="hljs-comment">// å¼‚æ­¥ä¿å­˜æ—¥å¿—</span>
            operationLogService.saveAsync(sysLog);

            <span class="hljs-keyword">return</span> result;

        } <span class="hljs-keyword">catch</span> (Throwable e) {
            <span class="hljs-comment">// è®°å½•å¼‚å¸¸</span>
            sysLog.setErrorMsg(e.getMessage());
            <span class="hljs-type">long</span> <span class="hljs-variable">endTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
            sysLog.setDuration(endTime - startTime);

            <span class="hljs-comment">// å¼‚æ­¥ä¿å­˜æ—¥å¿—</span>
            operationLogService.saveAsync(sysLog);

            <span class="hljs-keyword">throw</span> e;
        }
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getCurrentUsername</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ä»SecurityContextè·å–å½“å‰ç”¨æˆ·</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"admin"</span>;  <span class="hljs-comment">// ç®€åŒ–ç¤ºä¾‹</span>
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getClientIp</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ä»HttpServletRequestè·å–å®¢æˆ·ç«¯IP</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"127.0.0.1"</span>;  <span class="hljs-comment">// ç®€åŒ–ç¤ºä¾‹</span>
    }
}

<span class="hljs-comment">/**
 * ä½¿ç”¨æ“ä½œæ—¥å¿—
 */</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api/users")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserService userService;

    <span class="hljs-meta">@PostMapping</span>
    <span class="hljs-meta">@OperationLog(
        module = "ç”¨æˆ·ç®¡ç†",
        operation = "åˆ›å»º",
        description = "åˆ›å»ºæ–°ç”¨æˆ·"
    )</span>
    <span class="hljs-keyword">public</span> Result&lt;User&gt; <span class="hljs-title function_">createUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user)</span> {
        userService.createUser(user);
        <span class="hljs-keyword">return</span> Result.success(user);
    }

    <span class="hljs-meta">@DeleteMapping("/{id}")</span>
    <span class="hljs-meta">@OperationLog(
        module = "ç”¨æˆ·ç®¡ç†",
        operation = "åˆ é™¤",
        description = "åˆ é™¤ç”¨æˆ·"
    )</span>
    <span class="hljs-keyword">public</span> Result&lt;Void&gt; <span class="hljs-title function_">deleteUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
        userService.deleteUser(id);
        <span class="hljs-keyword">return</span> Result.success();
    }
}
</code></pre>
<h4 data-id="heading-17">4.3 æ¡ˆä¾‹3ï¼šæƒé™æ ¡éªŒåˆ‡é¢</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æƒé™æ ¡éªŒæ³¨è§£
 */</span>
<span class="hljs-meta">@Target(ElementType.METHOD)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> RequiresPermission {
    String[] value();           <span class="hljs-comment">// éœ€è¦çš„æƒé™</span>
    Logical <span class="hljs-title function_">logical</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> Logical.AND;  <span class="hljs-comment">// å¤šä¸ªæƒé™çš„é€»è¾‘å…³ç³»</span>
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Logical</span> {
    AND, OR
}

<span class="hljs-comment">/**
 * æƒé™æ ¡éªŒåˆ‡é¢
 */</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PermissionAspect</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> PermissionService permissionService;

    <span class="hljs-meta">@Before("@annotation(requiresPermission)")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkPermission</span><span class="hljs-params">(JoinPoint joinPoint, RequiresPermission requiresPermission)</span> {
        String[] permissions = requiresPermission.value();
        <span class="hljs-type">Logical</span> <span class="hljs-variable">logical</span> <span class="hljs-operator">=</span> requiresPermission.logical();

        <span class="hljs-comment">// è·å–å½“å‰ç”¨æˆ·</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> getCurrentUsername();

        <span class="hljs-comment">// æ£€æŸ¥æƒé™</span>
        <span class="hljs-type">boolean</span> <span class="hljs-variable">hasPermission</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;

        <span class="hljs-keyword">if</span> (logical == Logical.AND) {
            <span class="hljs-comment">// ANDï¼šéœ€è¦æ‹¥æœ‰æ‰€æœ‰æƒé™</span>
            hasPermission = permissionService.hasAllPermissions(username, permissions);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// ORï¼šæ‹¥æœ‰ä»»ä¸€æƒé™å³å¯</span>
            hasPermission = permissionService.hasAnyPermission(username, permissions);
        }

        <span class="hljs-keyword">if</span> (!hasPermission) {
            <span class="hljs-type">String</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> joinPoint.getSignature().toShortString();
            log.warn(<span class="hljs-string">"æƒé™ä¸è¶³: ç”¨æˆ·[{}]è®¿é—®æ–¹æ³•[{}]éœ€è¦æƒé™{}"</span>, username, method, permissions);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PermissionDeniedException</span>(<span class="hljs-string">"æƒé™ä¸è¶³"</span>);
        }

        log.info(<span class="hljs-string">"æƒé™æ ¡éªŒé€šè¿‡: ç”¨æˆ·[{}]è®¿é—®æ–¹æ³•[{}]"</span>, username, joinPoint.getSignature().toShortString());
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getCurrentUsername</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ä»SecurityContextè·å–å½“å‰ç”¨æˆ·</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"admin"</span>;  <span class="hljs-comment">// ç®€åŒ–ç¤ºä¾‹</span>
    }
}

<span class="hljs-comment">/**
 * æƒé™æœåŠ¡
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PermissionService</span> {

    <span class="hljs-comment">// ç”¨æˆ·æƒé™ç¼“å­˜ï¼ˆå®é™…åº”ä»æ•°æ®åº“æˆ–Redisè·å–ï¼‰</span>
    <span class="hljs-keyword">private</span> Map&lt;String, Set&lt;String&gt;&gt; userPermissions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PermissionService</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// åˆå§‹åŒ–æµ‹è¯•æ•°æ®</span>
        userPermissions.put(<span class="hljs-string">"admin"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;(Arrays.asList(
            <span class="hljs-string">"user:create"</span>, <span class="hljs-string">"user:update"</span>, <span class="hljs-string">"user:delete"</span>, <span class="hljs-string">"user:view"</span>
        )));
        userPermissions.put(<span class="hljs-string">"user"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;(Arrays.asList(
            <span class="hljs-string">"user:view"</span>
        )));
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasAllPermissions</span><span class="hljs-params">(String username, String[] permissions)</span> {
        Set&lt;String&gt; userPerms = userPermissions.getOrDefault(username, <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;());
        <span class="hljs-keyword">return</span> userPerms.containsAll(Arrays.asList(permissions));
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasAnyPermission</span><span class="hljs-params">(String username, String[] permissions)</span> {
        Set&lt;String&gt; userPerms = userPermissions.getOrDefault(username, <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;());
        <span class="hljs-keyword">for</span> (String permission : permissions) {
            <span class="hljs-keyword">if</span> (userPerms.contains(permission)) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
}

<span class="hljs-comment">/**
 * ä½¿ç”¨æƒé™æ ¡éªŒ
 */</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api/users")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {

    <span class="hljs-meta">@PostMapping</span>
    <span class="hljs-meta">@RequiresPermission("user:create")</span>
    <span class="hljs-keyword">public</span> Result&lt;User&gt; <span class="hljs-title function_">createUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user)</span> {
        <span class="hljs-comment">// åªæœ‰æ‹¥æœ‰user:createæƒé™çš„ç”¨æˆ·æ‰èƒ½è®¿é—®</span>
        <span class="hljs-keyword">return</span> Result.success(user);
    }

    <span class="hljs-meta">@DeleteMapping("/{id}")</span>
    <span class="hljs-meta">@RequiresPermission({"user:delete", "admin:all"}, logical = Logical.OR)</span>
    <span class="hljs-keyword">public</span> Result&lt;Void&gt; <span class="hljs-title function_">deleteUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
        <span class="hljs-comment">// æ‹¥æœ‰user:deleteæˆ–admin:allæƒé™ä¹‹ä¸€å³å¯è®¿é—®</span>
        <span class="hljs-keyword">return</span> Result.success();
    }
}
</code></pre>
<h4 data-id="heading-18">4.4 æ¡ˆä¾‹4ï¼šç¼“å­˜åˆ‡é¢</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * ç¼“å­˜æ³¨è§£
 */</span>
<span class="hljs-meta">@Target(ElementType.METHOD)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Cacheable {
    String <span class="hljs-title function_">key</span><span class="hljs-params">()</span>;               <span class="hljs-comment">// ç¼“å­˜key</span>
    <span class="hljs-type">int</span> <span class="hljs-title function_">expire</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">3600</span>;  <span class="hljs-comment">// è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰</span>
}

<span class="hljs-meta">@Target(ElementType.METHOD)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> CacheEvict {
    String <span class="hljs-title function_">key</span><span class="hljs-params">()</span>;  <span class="hljs-comment">// è¦åˆ é™¤çš„ç¼“å­˜key</span>
}

<span class="hljs-comment">/**
 * ç¼“å­˜åˆ‡é¢
 */</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheAspect</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;

    <span class="hljs-comment">/**
     * ç¼“å­˜æŸ¥è¯¢
     */</span>
    <span class="hljs-meta">@Around("@annotation(cacheable)")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">cache</span><span class="hljs-params">(ProceedingJoinPoint joinPoint, Cacheable cacheable)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-comment">// æ„å»ºç¼“å­˜key</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> buildCacheKey(cacheable.key(), joinPoint);

        <span class="hljs-comment">// å°è¯•ä»ç¼“å­˜è·å–</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">cachedValue</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().get(cacheKey);
        <span class="hljs-keyword">if</span> (cachedValue != <span class="hljs-literal">null</span>) {
            log.info(<span class="hljs-string">"ç¼“å­˜å‘½ä¸­: {}"</span>, cacheKey);
            <span class="hljs-keyword">return</span> cachedValue;
        }

        <span class="hljs-comment">// ç¼“å­˜æœªå‘½ä¸­ï¼Œæ‰§è¡Œæ–¹æ³•</span>
        log.info(<span class="hljs-string">"ç¼“å­˜æœªå‘½ä¸­: {}"</span>, cacheKey);
        <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> joinPoint.proceed();

        <span class="hljs-comment">// å­˜å…¥ç¼“å­˜</span>
        <span class="hljs-keyword">if</span> (result != <span class="hljs-literal">null</span>) {
            redisTemplate.opsForValue().set(cacheKey, result,
                cacheable.expire(), TimeUnit.SECONDS);
            log.info(<span class="hljs-string">"ç¼“å­˜å†™å…¥: {}, è¿‡æœŸæ—¶é—´: {}ç§’"</span>, cacheKey, cacheable.expire());
        }

        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-comment">/**
     * ç¼“å­˜æ¸…é™¤
     */</span>
    <span class="hljs-meta">@AfterReturning("@annotation(cacheEvict)")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">evictCache</span><span class="hljs-params">(JoinPoint joinPoint, CacheEvict cacheEvict)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> buildCacheKey(cacheEvict.key(), joinPoint);
        redisTemplate.delete(cacheKey);
        log.info(<span class="hljs-string">"ç¼“å­˜æ¸…é™¤: {}"</span>, cacheKey);
    }

    <span class="hljs-comment">/**
     * æ„å»ºç¼“å­˜key
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">buildCacheKey</span><span class="hljs-params">(String keyPattern, JoinPoint joinPoint)</span> {
        Object[] args = joinPoint.getArgs();

        <span class="hljs-comment">// æ”¯æŒSpELè¡¨è¾¾å¼ï¼ˆç®€åŒ–ç‰ˆï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> keyPattern;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; args.length; i++) {
            key = key.replace(<span class="hljs-string">"#p"</span> + i, String.valueOf(args[i]));
        }

        <span class="hljs-keyword">return</span> key;
    }
}

<span class="hljs-comment">/**
 * ä½¿ç”¨ç¼“å­˜
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductService</span> {

    <span class="hljs-meta">@Cacheable(key = "product:#p0", expire = 1800)</span>
    <span class="hljs-keyword">public</span> Product <span class="hljs-title function_">findById</span><span class="hljs-params">(Long id)</span> {
        log.info(<span class="hljs-string">"ä»æ•°æ®åº“æŸ¥è¯¢å•†å“: {}"</span>, id);
        <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®åº“æŸ¥è¯¢</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(id, <span class="hljs-string">"å•†å“"</span> + id);
    }

    <span class="hljs-meta">@CacheEvict(key = "product:#p0.id")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateProduct</span><span class="hljs-params">(Product product)</span> {
        log.info(<span class="hljs-string">"æ›´æ–°å•†å“: {}"</span>, product.getId());
        <span class="hljs-comment">// æ›´æ–°æ•°æ®åº“</span>
    }
}
</code></pre>
<h4 data-id="heading-19">4.5 æ¡ˆä¾‹5ï¼šé˜²é‡å¤æäº¤åˆ‡é¢</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * é˜²é‡å¤æäº¤æ³¨è§£
 */</span>
<span class="hljs-meta">@Target(ElementType.METHOD)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> PreventDuplicateSubmit {
    <span class="hljs-type">int</span> <span class="hljs-title function_">timeout</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">5</span>;  <span class="hljs-comment">// é”å®šæ—¶é—´ï¼ˆç§’ï¼‰</span>
}

<span class="hljs-comment">/**
 * é˜²é‡å¤æäº¤åˆ‡é¢
 */</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PreventDuplicateSubmitAspect</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> RedisTemplate&lt;String, String&gt; redisTemplate;

    <span class="hljs-meta">@Around("@annotation(preventDuplicate)")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">preventDuplicate</span><span class="hljs-params">(ProceedingJoinPoint joinPoint,
                                   PreventDuplicateSubmit preventDuplicate)</span> <span class="hljs-keyword">throws</span> Throwable {

        <span class="hljs-comment">// æ„å»ºå”¯ä¸€keyï¼ˆç”¨æˆ· + æ–¹æ³• + å‚æ•°ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> buildSubmitKey(joinPoint);
        <span class="hljs-type">int</span> <span class="hljs-variable">timeout</span> <span class="hljs-operator">=</span> preventDuplicate.timeout();

        <span class="hljs-comment">// å°è¯•è·å–é”</span>
        <span class="hljs-type">Boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue()
            .setIfAbsent(key, <span class="hljs-string">"1"</span>, timeout, TimeUnit.SECONDS);

        <span class="hljs-keyword">if</span> (success == <span class="hljs-literal">null</span> || !success) {
            log.warn(<span class="hljs-string">"é‡å¤æäº¤: {}"</span>, key);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DuplicateSubmitException</span>(<span class="hljs-string">"è¯·å‹¿é‡å¤æäº¤"</span>);
        }

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ‰§è¡Œæ–¹æ³•</span>
            <span class="hljs-keyword">return</span> joinPoint.proceed();
        } <span class="hljs-keyword">catch</span> (Throwable e) {
            <span class="hljs-comment">// å‘ç”Ÿå¼‚å¸¸æ—¶é‡Šæ”¾é”</span>
            redisTemplate.delete(key);
            <span class="hljs-keyword">throw</span> e;
        }
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">buildSubmitKey</span><span class="hljs-params">(JoinPoint joinPoint)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> getCurrentUsername();
        <span class="hljs-type">String</span> <span class="hljs-variable">className</span> <span class="hljs-operator">=</span> joinPoint.getTarget().getClass().getSimpleName();
        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();
        Object[] args = joinPoint.getArgs();

        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"submit:%s:%s:%s:%s"</span>,
            username, className, methodName, Arrays.hashCode(args));
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getCurrentUsername</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"user123"</span>;  <span class="hljs-comment">// ç®€åŒ–ç¤ºä¾‹</span>
    }
}

<span class="hljs-comment">/**
 * ä½¿ç”¨é˜²é‡å¤æäº¤
 */</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api/orders")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderController</span> {

    <span class="hljs-meta">@PostMapping</span>
    <span class="hljs-meta">@PreventDuplicateSubmit(timeout = 10)</span>
    <span class="hljs-keyword">public</span> Result&lt;Order&gt; <span class="hljs-title function_">createOrder</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Order order)</span> {
        <span class="hljs-comment">// åˆ›å»ºè®¢å•ï¼ˆé˜²æ­¢ç”¨æˆ·é‡å¤ç‚¹å‡»ï¼‰</span>
        <span class="hljs-keyword">return</span> Result.success(order);
    }
}
</code></pre>
<h3 data-id="heading-20">äº”ã€äº‹åŠ¡ç®¡ç†ä¸AOP</h3>
<h4 data-id="heading-21">5.1 å£°æ˜å¼äº‹åŠ¡åŸç†</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * Springäº‹åŠ¡æ˜¯åŸºäºAOPå®ç°çš„
 * <span class="hljs-doctag">@Transactional</span>æ³¨è§£çš„å¤„ç†æµç¨‹
 */</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionAspectSimulation</span> {

    <span class="hljs-meta">@Around("@annotation(transactional)")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">handleTransaction</span><span class="hljs-params">(ProceedingJoinPoint joinPoint,
                                    Transactional transactional)</span> <span class="hljs-keyword">throws</span> Throwable {

        <span class="hljs-comment">// 1. è·å–äº‹åŠ¡ç®¡ç†å™¨</span>
        <span class="hljs-type">TransactionManager</span> <span class="hljs-variable">txManager</span> <span class="hljs-operator">=</span> getTransactionManager();

        <span class="hljs-comment">// 2. å¼€å¯äº‹åŠ¡</span>
        <span class="hljs-type">TransactionStatus</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> txManager.begin();

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 3. æ‰§è¡Œä¸šåŠ¡æ–¹æ³•</span>
            <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> joinPoint.proceed();

            <span class="hljs-comment">// 4. æäº¤äº‹åŠ¡</span>
            txManager.commit(status);

            <span class="hljs-keyword">return</span> result;

        } <span class="hljs-keyword">catch</span> (Throwable e) {
            <span class="hljs-comment">// 5. å›æ»šäº‹åŠ¡</span>
            txManager.rollback(status);
            <span class="hljs-keyword">throw</span> e;
        }
    }

    <span class="hljs-keyword">private</span> TransactionManager <span class="hljs-title function_">getTransactionManager</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransactionManager</span>();
    }
}

<span class="hljs-comment">/**
 * äº‹åŠ¡ä¼ æ’­è¡Œä¸ºç¤ºä¾‹
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderDao orderDao;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderItemService orderItemService;

    <span class="hljs-comment">/**
     * REQUIREDï¼šå¦‚æœå½“å‰æœ‰äº‹åŠ¡ï¼ŒåŠ å…¥è¯¥äº‹åŠ¡ï¼›å¦åˆ™åˆ›å»ºæ–°äº‹åŠ¡
     */</span>
    <span class="hljs-meta">@Transactional(propagation = Propagation.REQUIRED)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrder</span><span class="hljs-params">(Order order)</span> {
        orderDao.save(order);

        <span class="hljs-comment">// åŠ å…¥å½“å‰äº‹åŠ¡</span>
        orderItemService.saveItems(order.getItems());
    }

    <span class="hljs-comment">/**
     * REQUIRES_NEWï¼šæ€»æ˜¯åˆ›å»ºæ–°äº‹åŠ¡ï¼ŒæŒ‚èµ·å½“å‰äº‹åŠ¡
     */</span>
    <span class="hljs-meta">@Transactional(propagation = Propagation.REQUIRES_NEW)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrderWithNewTransaction</span><span class="hljs-params">(Order order)</span> {
        orderDao.save(order);

        <span class="hljs-comment">// åœ¨æ–°äº‹åŠ¡ä¸­æ‰§è¡Œ</span>
        orderItemService.saveItemsInNewTransaction(order.getItems());
    }

    <span class="hljs-comment">/**
     * NESTEDï¼šåµŒå¥—äº‹åŠ¡
     */</span>
    <span class="hljs-meta">@Transactional(propagation = Propagation.NESTED)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrderWithNested</span><span class="hljs-params">(Order order)</span> {
        orderDao.save(order);

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// åµŒå¥—äº‹åŠ¡ï¼Œå¯ä»¥ç‹¬ç«‹å›æ»š</span>
            orderItemService.saveItemsNested(order.getItems());
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// å­äº‹åŠ¡å›æ»šä¸å½±å“ä¸»äº‹åŠ¡</span>
            log.error(<span class="hljs-string">"ä¿å­˜è®¢å•é¡¹å¤±è´¥"</span>, e);
        }
    }
}
</code></pre>
<h4 data-id="heading-22">5.2 äº‹åŠ¡å¤±æ•ˆåœºæ™¯</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * äº‹åŠ¡å¤±æ•ˆçš„å¸¸è§åœºæ™¯
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionFailureDemo</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserDao userDao;

    <span class="hljs-comment">/**
     * åœºæ™¯1ï¼šæ–¹æ³•ä¸æ˜¯publicï¼ˆäº‹åŠ¡å¤±æ•ˆï¼‰
     */</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">privateMethod</span><span class="hljs-params">()</span> {  <span class="hljs-comment">//äº‹åŠ¡ä¸ç”Ÿæ•ˆ</span>
        userDao.save(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>());
    }

    <span class="hljs-comment">/**
     * åœºæ™¯2ï¼šåŒç±»å†…éƒ¨è°ƒç”¨ï¼ˆäº‹åŠ¡å¤±æ•ˆï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">outerMethod</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">//ç›´æ¥è°ƒç”¨ï¼Œç»•è¿‡ä»£ç†ï¼Œäº‹åŠ¡ä¸ç”Ÿæ•ˆ</span>
        <span class="hljs-built_in">this</span>.innerMethod();
    }

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">innerMethod</span><span class="hljs-params">()</span> {
        userDao.save(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>());
    }

    <span class="hljs-comment">/**
     * åœºæ™¯3ï¼šå¼‚å¸¸è¢«æ•è·ï¼ˆäº‹åŠ¡å¤±æ•ˆï¼‰
     */</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">catchException</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            userDao.save(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>());
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">//å¼‚å¸¸è¢«æ•è·ï¼Œäº‹åŠ¡ä¸ä¼šå›æ»š</span>
        }
    }

    <span class="hljs-comment">/**
     * åœºæ™¯4ï¼šæŠ›å‡ºæ£€æŸ¥å¼‚å¸¸ï¼ˆé»˜è®¤ä¸å›æ»šï¼‰
     */</span>
    <span class="hljs-meta">@Transactional</span>  <span class="hljs-comment">//é»˜è®¤åªå›æ»šRuntimeException</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkedExceptionMethod</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        userDao.save(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>());
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Exception</span>();  <span class="hljs-comment">// ä¸ä¼šå›æ»š</span>
    }

    <span class="hljs-comment">/**
     * æ­£ç¡®åšæ³•ï¼šæŒ‡å®šå›æ»šå¼‚å¸¸
     */</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">correctMethod</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        userDao.save(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>());
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Exception</span>();  <span class="hljs-comment">// âœ“ ä¼šå›æ»š</span>
    }
}

<span class="hljs-comment">/**
 * è§£å†³åŒç±»è°ƒç”¨é—®é¢˜
 */</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionSolution</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserDao userDao;

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ApplicationContext context;

    <span class="hljs-comment">/**
     * æ–¹æ¡ˆ1ï¼šæ³¨å…¥è‡ªå·±
     */</span>
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> TransactionSolution self;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">outerMethod1</span><span class="hljs-params">()</span> {
        self.innerMethod();  <span class="hljs-comment">// âœ“ é€šè¿‡ä»£ç†è°ƒç”¨</span>
    }

    <span class="hljs-comment">/**
     * æ–¹æ¡ˆ2ï¼šä»å®¹å™¨è·å–
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">outerMethod2</span><span class="hljs-params">()</span> {
        <span class="hljs-type">TransactionSolution</span> <span class="hljs-variable">proxy</span> <span class="hljs-operator">=</span> context.getBean(TransactionSolution.class);
        proxy.innerMethod();  <span class="hljs-comment">// âœ“ é€šè¿‡ä»£ç†è°ƒç”¨</span>
    }

    <span class="hljs-comment">/**
     * æ–¹æ¡ˆ3ï¼šä½¿ç”¨AopContext
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">outerMethod3</span><span class="hljs-params">()</span> {
        ((TransactionSolution) AopContext.currentProxy()).innerMethod();  <span class="hljs-comment">// âœ“</span>
    }

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">innerMethod</span><span class="hljs-params">()</span> {
        userDao.save(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>());
    }
}
</code></pre>
<h3 data-id="heading-23">å…­ã€æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-24">6.1 åˆ‡é¢è®¾è®¡åŸåˆ™</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * 1. åˆ‡é¢èŒè´£å•ä¸€
 */</span>

<span class="hljs-comment">//ä¸å¥½ï¼šä¸€ä¸ªåˆ‡é¢åšå¤ªå¤šäº‹</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BadAspect</span> {
    <span class="hljs-meta">@Around("execution(* com.example..*(..))")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">doEverything</span><span class="hljs-params">(ProceedingJoinPoint joinPoint)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-comment">// æ—¥å¿—</span>
        <span class="hljs-comment">// æƒé™æ£€æŸ¥</span>
        <span class="hljs-comment">// ç¼“å­˜</span>
        <span class="hljs-comment">// äº‹åŠ¡</span>
        <span class="hljs-comment">// ...</span>
        <span class="hljs-keyword">return</span> joinPoint.proceed();
    }
}

<span class="hljs-comment">// âœ“ å¥½ï¼šæ¯ä¸ªåˆ‡é¢ä¸“æ³¨ä¸€ä¸ªèŒè´£</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoggingAspect</span> { <span class="hljs-comment">/* åªè´Ÿè´£æ—¥å¿— */</span> }

<span class="hljs-meta">@Aspect</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SecurityAspect</span> { <span class="hljs-comment">/* åªè´Ÿè´£æƒé™ */</span> }

<span class="hljs-meta">@Aspect</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CachingAspect</span> { <span class="hljs-comment">/* åªè´Ÿè´£ç¼“å­˜ */</span> }

<span class="hljs-comment">/**
 * 2. ç²¾ç¡®çš„åˆ‡ç‚¹è¡¨è¾¾å¼
 */</span>

<span class="hljs-comment">// ä¸å¥½ï¼šèŒƒå›´å¤ªå¤§</span>
<span class="hljs-meta">@Pointcut("execution(* *.*(..))")</span>  <span class="hljs-comment">// åŒ¹é…æ‰€æœ‰æ–¹æ³•</span>

<span class="hljs-comment">// âœ“ å¥½ï¼šç²¾ç¡®åŒ¹é…</span>
<span class="hljs-meta">@Pointcut("execution(* com.example.service.*.*(..))")</span>  <span class="hljs-comment">// åªåŒ¹é…serviceå±‚</span>
</code></pre>
<h4 data-id="heading-25">6.2 æ€§èƒ½ä¼˜åŒ–</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * 1. ä½¿ç”¨<span class="hljs-doctag">@Pointcut</span>å¤ç”¨åˆ‡ç‚¹è¡¨è¾¾å¼
 */</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OptimizedAspect</span> {

    <span class="hljs-comment">// å®šä¹‰å¯å¤ç”¨çš„åˆ‡ç‚¹</span>
    <span class="hljs-meta">@Pointcut("execution(* com.example.service..*.*(..))")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">serviceLayer</span><span class="hljs-params">()</span> {}

    <span class="hljs-meta">@Pointcut("@annotation(com.example.annotation.Log)")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logAnnotation</span><span class="hljs-params">()</span> {}

    <span class="hljs-comment">// å¤ç”¨åˆ‡ç‚¹</span>
    <span class="hljs-meta">@Before("serviceLayer() &amp;&amp; logAnnotation()")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">beforeLog</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ...</span>
    }

    <span class="hljs-meta">@After("serviceLayer() &amp;&amp; logAnnotation()")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterLog</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ...</span>
    }
}

<span class="hljs-comment">/**
 * 2. é¿å…åœ¨åˆ‡é¢ä¸­è¿›è¡Œè€—æ—¶æ“ä½œ
 */</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncLoggingAspect</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ThreadPoolTaskExecutor executor;

    <span class="hljs-meta">@Around("@annotation(com.example.annotation.Log)")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">log</span><span class="hljs-params">(ProceedingJoinPoint joinPoint)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> joinPoint.proceed();

        <span class="hljs-comment">// âœ“ å¼‚æ­¥ä¿å­˜æ—¥å¿—ï¼Œä¸é˜»å¡ä¸šåŠ¡</span>
        executor.execute(() -&gt; saveLog(joinPoint, result));

        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveLog</span><span class="hljs-params">(JoinPoint joinPoint, Object result)</span> {
        <span class="hljs-comment">// è€—æ—¶çš„æ—¥å¿—ä¿å­˜æ“ä½œ</span>
    }
}
</code></pre>
<h4 data-id="heading-26">6.3 åˆ‡é¢æ‰§è¡Œé¡ºåº</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * ä½¿ç”¨<span class="hljs-doctag">@Order</span>æ§åˆ¶åˆ‡é¢æ‰§è¡Œé¡ºåº
 */</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Order(1)</span>  <span class="hljs-comment">// æ•°å­—è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SecurityAspect</span> {
    <span class="hljs-comment">// æœ€å…ˆæ‰§è¡Œ</span>
}

<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Order(2)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoggingAspect</span> {
    <span class="hljs-comment">// ç¬¬äºŒæ‰§è¡Œ</span>
}

<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Order(3)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionAspect</span> {
    <span class="hljs-comment">// æœ€åæ‰§è¡Œ</span>
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f22ca31b56049b5a6bff8bc234dce52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768375430&amp;x-signature=giNGZVgIfj3YZrSsHpnnjST%2FRfg%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-27">ä¸ƒã€æ€»ç»“</h3>
<p>Spring AOPæ˜¯Springæ¡†æ¶çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå®ƒå°†æ¨ªåˆ‡å…³æ³¨ç‚¹ä»ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œä½¿ä»£ç æ›´åŠ ç®€æ´ã€æ˜“äºç»´æŠ¤ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œåˆç†è¿ç”¨AOPå¯ä»¥å¤§å¤§æé«˜å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ofdæ–‡ä»¶]]></title>    <link>https://juejin.cn/post/7592159803410022436</link>    <guid>https://juejin.cn/post/7592159803410022436</guid>    <pubDate>2026-01-07T07:24:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592159803410022436" data-draft-id="7592144524308905990" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ofdæ–‡ä»¶"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2026-01-07T07:24:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ—å¤ªç™½"/> <meta itemprop="url" content="https://juejin.cn/user/1874034273300919"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ofdæ–‡ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1874034273300919/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ—å¤ªç™½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T07:24:06.000Z" title="Wed Jan 07 2026 07:24:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ofdæ–‡ä»¶å¤„ç†é¢„è§ˆ</h2>
<p>æ–‡ç« å†…å®¹æ‰€æ¶‰åŠçš„æºç åœ°å€ï¼Œæ±‚æœ‹å‹ä»¬ç»™ä¸ªstarå•Š</p>
<pre><code class="hljs language-markdown" lang="markdown">::: tip

ä¸ªäººç½‘ç«™ ï¼ˆ[<span class="hljs-string">https://nexuslin.github.io/</span>](<span class="hljs-link">https://nexuslin.github.io/</span>)ï¼‰

æ–‡ç« å†…å®¹æ‰€æ¶‰åŠçš„æºç åœ°å€ï¼Œæ±‚æœ‹å‹ä»¬ç»™ä¸ªstarå•Š


åŒè·¯ä¹‹äººï¼Œå¹¸å¾—å›é¡¾ï¼Œç›¼å¾—å›ä¹‹ä¸€èµï¼

ä¸å›åŒè¡Œï¼Œæ„¿å¾—é’çœ¼ç›¸åŠ ï¼

ä½ çš„star

å¦‚æ˜¥é£åŒ–é›¨ï¼Œæ¶¦ç‰©æ— å£°ï¼›

å¦‚å±±é—´æ¸…æ³‰ï¼Œæ»‹æ¶¦å¿ƒç”°ï¼›

å¦‚é•¿æ²³è½æ—¥ï¼Œæ˜ ç…§åˆå¿ƒï¼›

äº¦å¦‚æš—å¤œæ˜ç¯ï¼Œç…§äº®å‰è·¯ï¼›

æ˜¯å¾è¾ˆå‰è¡Œä¹‹æ˜ç¯ï¼Œäº¦æ˜¯æˆ‘åšæŒçš„åŠ¨åŠ›!

æ„¿å›å‰ç¨‹ä¼¼é”¦ï¼Œä»£ç å¦‚è¯—ï¼Œäººç”Ÿå¦‚ç”»ï¼

ã€GIthubåœ°å€ã€‘ï¼ˆ[<span class="hljs-string">https://github.com/lintaibai/TG</span>](<span class="hljs-link">https://gitee.com/lintaibai/TG</span>)ï¼‰

ã€Giteeåœ°å€ã€‘ï¼ˆ[<span class="hljs-string">https://gitee.com/lintaibai/TG</span>](<span class="hljs-link">https://gitee.com/lintaibai/TG</span>)ï¼‰


:::
</code></pre>
<h3 data-id="heading-1">OFDæ–‡ä»¶æ˜¯ä»€ä¹ˆ</h3>
<p>æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ç§å›½äº§çš„å‹ç¼©æ–‡ä»¶</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-number">2016</span>å¹´æˆä¸ºå›½å®¶æ ‡å‡†ï¼ˆ<span class="hljs-variable constant_">GB</span>/T <span class="hljs-number">33190</span>-<span class="hljs-number">2016</span>ï¼‰

<span class="hljs-comment">// å›½å®¶æ ‡å‡†ç½‘ç«™</span>
<span class="hljs-attr">https</span>:<span class="hljs-comment">//openstd.samr.gov.cn/bzgk/gb/newGbInfo?hcno=3AF6682D939116B6F5EED53D01A9DB5D</span>
</code></pre>
<p>OFDï¼ˆOpen Fixed-layout Documentï¼‰å¼€æ”¾å¼ç‰ˆå¼æ–‡ä»¶</p>
<p>ä¸­å›½è‡ªä¸»ç ”å‘çš„ä¸€ç§ç”µå­æ–‡æ¡£æ ¼å¼â€Œ</p>
<p>ä¸­å›½å›½å®¶æ ‡å‡†ç‰ˆçš„ç”µå­æ–‡ä»¶æ ¼å¼ï¼Œç±»ä¼¼äº PDF</p>
<p>å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>åŸºäºXMLå’ŒZIPæŠ€æœ¯</li>
<li>æ”¯æŒæ•°å­—ç­¾å</li>
<li>æ”¯æŒç‰ˆå¼å›ºå®š</li>
<li>æ”¯æŒå›½äº§å¯†ç ç®—æ³•</li>
<li>æ”¯æŒé•¿æœŸä¿å­˜æ ¼å¼</li>
</ul>
<h3 data-id="heading-2">OFD æ–‡ä»¶ç»“æ„</h3>
<p>OFD æ–‡ä»¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª ZIP å‹ç¼©åŒ…ï¼ŒåŒ…å«ä»¥ä¸‹ç»“æ„</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-property">ofd</span>
â”œâ”€â”€ <span class="hljs-variable constant_">OFD</span>.<span class="hljs-property">xml</span>          <span class="hljs-comment">// æ–‡æ¡£æ ¹æ–‡ä»¶</span>
â”œâ”€â”€ <span class="hljs-title class_">Doc</span>_0/
â”‚   â”œâ”€â”€ <span class="hljs-title class_">Doc</span>_0/       <span class="hljs-comment">// æ–‡æ¡£ç›®å½•</span>
â”‚   â”‚   â”œâ”€â”€ <span class="hljs-title class_">Document</span>.<span class="hljs-property">xml</span>
â”‚   â”‚   â””â”€â”€ <span class="hljs-title class_">Pages</span>/
â”‚   â”‚       â””â”€â”€ <span class="hljs-title class_">Page</span>_0/
â”‚   â”‚           â”œâ”€â”€ <span class="hljs-title class_">Page</span>.<span class="hljs-property">xml</span>
â”‚   â”‚           â””â”€â”€ <span class="hljs-title class_">Res</span>/        <span class="hljs-comment">// èµ„æºç›®å½•</span>
â”‚   â”‚               â”œâ”€â”€ image/
â”‚   â”‚               â””â”€â”€ font/
â””â”€â”€ <span class="hljs-title class_">Public</span>.<span class="hljs-property">xml</span>       <span class="hljs-comment">// å…¬å…±èµ„æº</span>
</code></pre>
<h3 data-id="heading-3">ç›¸å…³åº“çš„è®¤è¯†</h3>
<p>æƒ³è¦è§£å†³ofdæ–‡ä»¶çš„é¢„è§ˆï¼Œæˆ‘ä»¬å¿…é¡»è®¤è¯†ç›¸å…³çš„ä¸¤ä¸ªä¾èµ–åº“</p>
<pre><code class="hljs language-javascript" lang="javascript">jszip 
<span class="hljs-title class_">JSZipUtils</span> 
</code></pre>
<p>è¿™ä¸¤ä¸ªåº“å­˜çš„ä½œç”¨å’Œè®¤è¯†</p>
<h4 data-id="heading-4"><code>jszip</code>çš„è®¤è¯†ä½¿ç”¨</h4>
<h5 data-id="heading-5">è®¤è¯†</h5>
<p>JSZip æ˜¯ä¸€ä¸ªç”¨äºåˆ›å»ºã€è¯»å–å’Œç¼–è¾‘ .zip æ–‡ä»¶çš„JavaScriptåº“ã€‚å®ƒå¯ä»¥åœ¨æµè§ˆå™¨å’ŒNode.jsç¯å¢ƒä¸­ä½¿ç”¨ã€‚</p>
<h5 data-id="heading-6">ä¸»è¦åŠŸèƒ½ï¼š</h5>
<ul>
<li>åˆ›å»ºæ–°çš„ ZIP æ–‡ä»¶</li>
<li>è¯»å–ç°æœ‰çš„ ZIP æ–‡ä»¶</li>
<li>å‘ ZIP æ–‡ä»¶ä¸­æ·»åŠ æˆ–åˆ é™¤æ–‡ä»¶</li>
<li>ç”Ÿæˆ ZIP æ–‡ä»¶å¹¶ä¸‹è½½</li>
</ul>
<h5 data-id="heading-7">ä½¿ç”¨ç¤ºä¾‹</h5>
<pre><code class="hljs language-plain" lang="plain">// åˆ›å»ºä¸€ä¸ªæ–°çš„ ZIP æ–‡ä»¶
var zip = new JSZip();

// æ·»åŠ ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶
zip.file("hello.txt", "Hello World\n");

// æ·»åŠ ä¸€ä¸ªæ–‡ä»¶å¤¹å’Œå…¶ä¸­çš„æ–‡ä»¶
zip.folder("images").file("smile.gif", "base64æ•°æ®", {base64: true});

// ç”Ÿæˆ ZIP æ–‡ä»¶
zip.generateAsync({type:"blob"})
.then(function(content) {
    // åœ¨æµè§ˆå™¨ä¸­ä¸‹è½½
    saveAs(content, "example.zip");
});
</code></pre>
<h5 data-id="heading-8">å¸¸è§åº”ç”¨åœºæ™¯ï¼š</h5>
<ul>
<li>åœ¨å‰ç«¯æ‰“åŒ…å¤šä¸ªæ–‡ä»¶ä¾›ç”¨æˆ·ä¸‹è½½</li>
<li>åŠ¨æ€ç”ŸæˆåŒ…å«å¤šä¸ªæ–‡ä»¶çš„å‹ç¼©åŒ…</li>
<li>å¤„ç†ä¸Šä¼ çš„ ZIP æ–‡ä»¶å†…å®¹</li>
</ul>
<h4 data-id="heading-9"><code>JSZipUtils </code>çš„è®¤è¯†ä½¿ç”¨</h4>
<h5 data-id="heading-10">è®¤è¯†</h5>
<p>JSZipUtils æ˜¯ JSZip çš„ä¸€ä¸ªè¾…åŠ©å·¥å…·åº“ï¼Œä¸»è¦ç”¨äºå¤„ç†äºŒè¿›åˆ¶æ•°æ®ï¼Œç‰¹åˆ«æ˜¯åœ¨è·å–è¿œç¨‹æ–‡ä»¶æ—¶éå¸¸æœ‰ç”¨ã€‚</p>
<h5 data-id="heading-11">ä¸»è¦åŠŸèƒ½ï¼š</h5>
<ul>
<li>è·å–äºŒè¿›åˆ¶æ•°æ®</li>
<li>å¤„ç†è·¨åŸŸè¯·æ±‚</li>
<li>æä¾›ä¾¿æ·çš„æ–‡ä»¶è·å–æ–¹æ³•</li>
</ul>
<h5 data-id="heading-12">åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹ï¼š</h5>
<pre><code class="hljs language-plain" lang="plain">// è·å–è¿œç¨‹äºŒè¿›åˆ¶æ•°æ®
JSZipUtils.getBinaryContent("path/to/file.zip", function(err, data) {
    if(err) {
        throw err;
    }
    
    // ä½¿ç”¨è·å–åˆ°çš„æ•°æ®åˆ›å»º JSZip å¯¹è±¡
    JSZip.loadAsync(data)
    .then(function(zip) {
        // å¤„ç† zip æ–‡ä»¶å†…å®¹
        return zip.file("hello.txt").async("string");
    })
    .then(function(text) {
        console.log(text);
    });
});
</code></pre>
<h5 data-id="heading-13">å¸¸è§åº”ç”¨åœºæ™¯ï¼š</h5>
<ul>
<li>ä¸‹è½½å¹¶å¤„ç†è¿œç¨‹ ZIP æ–‡ä»¶</li>
<li>è·å–äºŒè¿›åˆ¶æ–‡ä»¶å†…å®¹</li>
<li>å¤„ç†è·¨åŸŸçš„äºŒè¿›åˆ¶æ•°æ®è¯·æ±‚</li>
</ul>
<h4 data-id="heading-14">ä¸ºä»€ä¹ˆ JSZipUtils è¢«åºŸå¼ƒ</h4>
<p>JSZipUtils è¢«åºŸå¼ƒçš„ä¸»è¦åŸå› æœ‰ï¼š</p>
<ol>
<li>ç°ä»£æµè§ˆå™¨åŸç”Ÿæ”¯æŒæ›´å¥½ï¼šfetch API å·²ç»æˆä¸ºç°ä»£æµè§ˆå™¨çš„æ ‡å‡†ï¼Œæä¾›äº†æ›´å¼ºå¤§å’Œçµæ´»çš„åŠŸèƒ½</li>
<li>ç»´æŠ¤é—®é¢˜ï¼šJSZipUtils å·²ç»å¾ˆä¹…æ²¡æœ‰æ›´æ–°ï¼Œå¯èƒ½å­˜åœ¨å®‰å…¨æ¼æ´</li>
<li>åŠŸèƒ½å†—ä½™ï¼šfetch API å¯ä»¥å®Œå…¨è¦†ç›– JSZipUtils çš„åŠŸèƒ½ï¼Œè€Œä¸”æä¾›æ›´å¤šç‰¹æ€§</li>
</ol>
<h5 data-id="heading-15">ä½¿ç”¨ fetch API æ›¿ä»£çš„ç¤ºä¾‹</h5>
<h6 data-id="heading-16">åŸæ¥çš„ JSZipUtils å†™æ³•ï¼š</h6>
<pre><code class="hljs language-plain" lang="plain">JSZipUtils.getBinaryContent("path/to/file.zip", function(err, data) {
    if(err) {
        throw err;
    }
    JSZip.loadAsync(data)
    .then(function(zip) {
        // å¤„ç† zip æ–‡ä»¶
    });
});
</code></pre>
<h6 data-id="heading-17">ä½¿ç”¨ fetch API çš„ç°ä»£å†™æ³•ï¼š</h6>
<pre><code class="hljs language-plain" lang="plain">fetch("path/to/file.zip")
    .then(response =&gt; {
        if (!response.ok) {
            throw new Error("Network response was not ok");
        }
        return response.arrayBuffer();
    })
    .then(data =&gt; {
        return JSZip.loadAsync(data);
    })
    .then(zip =&gt; {
        // å¤„ç† zip æ–‡ä»¶
    })
    .catch(error =&gt; {
        console.error("Error:", error);
    });
</code></pre>
<h5 data-id="heading-18">fetch API çš„ä¼˜åŠ¿</h5>
<ol>
<li>æ›´å¥½çš„é”™è¯¯å¤„ç†ï¼š</li>
</ol>
<pre><code class="hljs language-plain" lang="plain">fetch(url)
    .then(response =&gt; {
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        return response.arrayBuffer();
    })
</code></pre>
<ol start="2">
<li>æ”¯æŒæ›´å¤šæ•°æ®ç±»å‹ï¼š</li>
</ol>
<pre><code class="hljs language-plain" lang="plain">// è·å–ä¸åŒç±»å‹çš„æ•°æ®
fetch(url)
    .then(response =&gt; response.arrayBuffer())  // äºŒè¿›åˆ¶æ•°æ®
    .then(response =&gt; response.blob())        // Blob å¯¹è±¡
    .then(response =&gt; response.text())        // æ–‡æœ¬æ•°æ®
    .then(response =&gt; response.json())        // JSON æ•°æ®
</code></pre>
<ol start="3">
<li>æ”¯æŒè¯·æ±‚é…ç½®ï¼š</li>
</ol>
<pre><code class="hljs language-plain" lang="plain">fetch(url, {
    method: 'GET',
    headers: {
        'Authorization': 'Bearer token',
        'Content-Type': 'application/octet-stream'
    },
    mode: 'cors',
    credentials: 'include'
})
</code></pre>
<ol start="4">
<li>æ”¯æŒå¼‚æ­¥/ç­‰å¾…è¯­æ³•ï¼š</li>
</ol>
<pre><code class="hljs language-plain" lang="plain">async function loadZip(url) {
    try {
        const response = await fetch(url);
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        const data = await response.arrayBuffer();
        const zip = await JSZip.loadAsync(data);
        return zip;
    } catch (error) {
        console.error('Error:', error);
        throw error;
    }
}
</code></pre>
<h5 data-id="heading-19">å®Œæ•´çš„è¿ç§»ç¤ºä¾‹</h5>
<p>å‡è®¾æˆ‘ä»¬è¦ä¸‹è½½ä¸€ä¸ª ZIP æ–‡ä»¶ï¼Œè§£å‹åè·å–å…¶ä¸­çš„æ–‡ä»¶å†…å®¹ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">// ä½¿ç”¨ async/await çš„ç°ä»£å†™æ³•
async function processZipFile(url) {
    try {
        // 1. è·å–æ–‡ä»¶
        const response = await fetch(url);
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        // 2. è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ•°æ®
        const arrayBuffer = await response.arrayBuffer();
        
        // 3. åŠ è½½åˆ° JSZip
        const zip = await JSZip.loadAsync(arrayBuffer);
        
        // 4. å¤„ç†æ–‡ä»¶å†…å®¹
        const files = Object.keys(zip.files);
        for (const filename of files) {
            if (!zip.files[filename].dir) {
                const content = await zip.file(filename).async('string');
                console.log(`${filename}: ${content}`);
            }
        }
        
        return zip;
    } catch (error) {
        console.error('Error processing zip file:', error);
        throw error;
    }
}

// ä½¿ç”¨ç¤ºä¾‹
processZipFile('path/to/file.zip')
    .then(zip =&gt; {
        console.log('Zip file processed successfully');
    })
    .catch(error =&gt; {
        console.error('Failed to process zip file:', error);
    });
</code></pre>
<h5 data-id="heading-20">å…¼å®¹æ€§è€ƒè™‘</h5>
<p>å¦‚æœéœ€è¦æ”¯æŒè¾ƒè€çš„æµè§ˆå™¨ï¼Œå¯ä»¥æ·»åŠ  polyfillï¼š</p>
<pre><code class="hljs language-plain" lang="plain">// æ·»åŠ  fetch polyfillï¼ˆå¦‚æœéœ€è¦ï¼‰
import 'whatwg-fetch';

// æˆ–è€…ä½¿ç”¨æ¡ä»¶åŠ è½½
if (!window.fetch) {
    // åŠ è½½ fetch polyfill
}
</code></pre>
<h5 data-id="heading-21">æ€»ç»“</h5>
<p>è¿ç§»åˆ° fetch API çš„å¥½å¤„ï¼š</p>
<ol>
<li>æ›´ç°ä»£çš„ API è®¾è®¡</li>
<li>æ›´å¥½çš„é”™è¯¯å¤„ç†æœºåˆ¶</li>
<li>æ›´çµæ´»çš„æ•°æ®å¤„ç†èƒ½åŠ›</li>
<li>æ›´å¥½çš„æ€§èƒ½å’Œæµè§ˆå™¨æ”¯æŒ</li>
<li>æ›´å°‘çš„ä¾èµ–ï¼Œå‡å°‘åŒ…å¤§å°</li>
<li>æ›´å¥½çš„ TypeScript æ”¯æŒ</li>
</ol>
<p>å»ºè®®åœ¨æ–°çš„é¡¹ç›®ä¸­ç›´æ¥ä½¿ç”¨ fetch APIï¼Œåœ¨ç°æœ‰é¡¹ç›®ä¸­é€æ­¥å°† JSZipUtils çš„è°ƒç”¨æ›¿æ¢ä¸º fetch API çš„å®ç°ã€‚</p>
<h4 data-id="heading-22">JSZipUtilså’Œ<code>jszip</code>çš„é…åˆä½¿ç”¨</h4>
<p>é€šå¸¸åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™ä¸¤ä¸ªåº“ä¼šé…åˆä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">// ä¸‹è½½è¿œç¨‹æ–‡ä»¶å¹¶åˆ›å»ºæ–°çš„ ZIP åŒ…
JSZipUtils.getBinaryContent("path/to/image.jpg", function(err, data) {
    if(err) throw err;
    
    var zip = new JSZip();
    zip.file("image.jpg", data, {binary: true});
    
    zip.generateAsync({type:"blob"})
    .then(function(content) {
        saveAs(content, "new.zip");
    });
});
</code></pre>
<h5 data-id="heading-23">æ³¨æ„äº‹é¡¹</h5>
<ol>
<li>åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨æ—¶ï¼Œå¦‚æœå¤„ç†å¤§æ–‡ä»¶ï¼Œè¦æ³¨æ„å†…å­˜ä½¿ç”¨æƒ…å†µ</li>
<li>å¤„ç†è¿œç¨‹æ–‡ä»¶æ—¶è¦æ³¨æ„è·¨åŸŸé—®é¢˜</li>
<li>JSZipUtils å·²ç»è¢«æ ‡è®°ä¸ºåºŸå¼ƒï¼Œæ¨èä½¿ç”¨åŸç”Ÿçš„ fetch API æ›¿ä»£</li>
<li>ç°ä»£é¡¹ç›®ä¸­ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘ä½¿ç”¨æ›´æ–°çš„æ›¿ä»£æ–¹æ¡ˆï¼Œå¦‚ JSZip çš„æœ€æ–°ç‰ˆæœ¬é…åˆ fetch API</li>
</ol>
<p>è¿™ä¸¤ä¸ªåº“åœ¨å‰ç«¯å¤„ç†æ–‡ä»¶å‹ç¼©å’Œè§£å‹ç¼©ä»»åŠ¡æ—¶éå¸¸å®ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦åŠ¨æ€å¤„ç†æ–‡ä»¶å†…å®¹çš„åœºæ™¯ä¸­ã€‚</p>
<h3 data-id="heading-24"/>
<h3 data-id="heading-25">vue3ä¹‹ä¸­é¢„è§ˆ<code>ofd.js</code>æ–‡ä»¶</h3>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±ç®€å•å®ç°ä¸€ä¸‹<code>ofd.js</code>æ–‡ä»¶çš„é¢„è§ˆï¼Œæˆ‘ä»¬çš„æƒ³æ³•æ˜¯åœ¨vue3ä¹‹ä¸­æ›¿ä»£æ‰è€æ—§çš„JSZipUtilsåº“ï¼Œå½“ç„¶ï¼Œå’Œä¹‹å‰ä¸€æ ·æˆ‘ä»¬è¿˜æ˜¯ä»¥å®ç°åŠŸèƒ½ç„¶åè¿›è¡Œä¼˜åŒ–ä¸ºä¸»</p>
<p>å› ä¸ºofdæ–‡ä»¶çš„æœ¬è´¨ä¸Šæ˜¯ä¸€ç§å‹ç¼©åŒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å…ˆè§£å‹ OFD æ–‡ä»¶ï¼Œç„¶åè§£æå…¶ä¸­çš„å†…å®¹ã€‚</p>
<p>å…ˆæ¥çœ‹çœ‹æ ‡å‡†çš„ofdæ–‡ä»¶æ˜¯ä»€ä¹ˆæ ·å­çš„</p>
<pre><code class="hljs language-javascript" lang="javascript">{
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"OFD.xml"</span>,
    <span class="hljs-string">"dir"</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-string">"date"</span>: <span class="hljs-string">"2020-08-22T16:21:20.000Z"</span>,
    <span class="hljs-string">"comment"</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">"unixPermissions"</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-string">"dosPermissions"</span>: <span class="hljs-number">32</span>,
    <span class="hljs-string">"_data"</span>: {
        <span class="hljs-string">"compressedSize"</span>: <span class="hljs-number">446</span>,
        <span class="hljs-string">"uncompressedSize"</span>: <span class="hljs-number">1269</span>,
        <span class="hljs-string">"crc32"</span>: -<span class="hljs-number">2125441896</span>,
        <span class="hljs-string">"compression"</span>: {
            <span class="hljs-string">"magic"</span>: <span class="hljs-string">"\b\u0000"</span>
        },
        <span class="hljs-string">"compressedContent"</span>: {
            <span class="hljs-string">"0"</span>: <span class="hljs-number">157</span>,
            <span class="hljs-string">"1"</span>: <span class="hljs-number">84</span>,
            <span class="hljs-string">"2"</span>: <span class="hljs-number">209</span>,
            <span class="hljs-string">"3"</span>: <span class="hljs-number">110</span>,
             xxx
        }
    },
    <span class="hljs-string">"_dataBinary"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"options"</span>: {
        <span class="hljs-string">"compression"</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-string">"compressionOptions"</span>: <span class="hljs-literal">null</span>
    },
    <span class="hljs-string">"unsafeOriginalName"</span>: <span class="hljs-string">"OFD.xml"</span>
}
</code></pre>
<h4 data-id="heading-26">æ–¹å¼1-ä½¿ç”¨easyofdçš„æ–¹å¼é¢„è§ˆ</h4>
<p>æ¨èçš„é¢„è§ˆæ–¹å¼</p>
<h5 data-id="heading-27">å®‰è£…ç›¸å…³ä¾èµ–</h5>
<pre><code class="hljs language-javascript" lang="javascript">pnpm i jszip x2js jb2 opentype.<span class="hljs-property">js</span> easyofd
</code></pre>
<h5 data-id="heading-28">é¢„è§ˆæ–‡ä»¶</h5>
<pre><code class="hljs language-javascript" lang="javascript">&lt;script setup&gt;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">EasyOFD</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"easyofd"</span>;
<span class="hljs-keyword">import</span> { onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">let</span> yourElement=<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"1111111"</span>);
  <span class="hljs-keyword">let</span> ofd=<span class="hljs-keyword">new</span> <span class="hljs-title class_">EasyOFD</span>(<span class="hljs-string">'myofdID'</span>, yourElement);
})

&lt;/script&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"1111111"</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> &gt;</span><span class="css">
 <span class="hljs-selector-class">.OfdButton</span>{
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#007bff</span>;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
      <span class="hljs-attribute">border</span>: none;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;
      <span class="hljs-attribute">cursor</span>: pointer;
      <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">10px</span>;
    }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-29">æ–¹å¼2-ä½¿ç”¨ofdçš„æ–¹å¼é¢„è§ˆ</h4>
<pre><code class="hljs language-javascript" lang="javascript">ç›¸å…³æºç åœ°å€
<span class="hljs-attr">https</span>:<span class="hljs-comment">//github.com/DLTech21/ofd.js</span>
</code></pre>
<h5 data-id="heading-30">å®‰è£…ä¾èµ–</h5>
<p>è¿™é‡Œæˆ‘ä»¬å…ˆå®‰è£…å¿…é¡»çš„ä¾èµ–ï¼Œåé¢å‰”é™¤</p>
<pre><code class="hljs language-javascript" lang="javascript">pnpm install jszip
pnpm install jszip-utilsï¼ˆåé¢å‰”é™¤ï¼‰
pnpm i @lapo/asn1js
pnpm i js-sha1
pnpm i ofd-xml-parser js-md5 jsrsasign jsrsasign-util sm-crypto
</code></pre>
<p>å®‰è£…æˆåŠŸä»¥åæˆ‘ä»¬é¦–è¦çš„å°±æ˜¯å°†ofdä¹‹å‰çš„ç‰ˆæœ¬å…¼å®¹åˆ°vue3</p>
<p>è¿™é‡Œéœ€è¦æˆ‘ä»¬<code>main.TS</code>ä¹‹ä¸­è®¾ç½®ä¸€ä¸‹å…¨å±€</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è®¾ç½®å…¨å±€å˜é‡</span>
<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">'undefined'</span>) {
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">global</span> = <span class="hljs-variable language_">window</span>;
}
</code></pre>
<h5 data-id="heading-31">æ–‡ä»¶ä¹‹ä¸­ä½¿ç”¨</h5>
<pre><code class="hljs language-javascript" lang="javascript">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">el-container</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width:100vw; height: 100vh;"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-header</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"background:#F5F5F5;display: flex; height: 40px; border: 1px solid #e8e8e8; align-items: center;"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"upload-icon"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"uploadFile"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"upload-icon"</span>&gt;</span>æ‰“å¼€OFD<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">font-awesome-icon</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">"cloud-upload-alt"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"fileRef"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hidden"</span> <span class="hljs-attr">accept</span>=<span class="hljs-string">".ofd"</span> @<span class="hljs-attr">change</span>=<span class="hljs-string">"fileChanged"</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"upload-icon"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"uploadPdfFile"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"upload-icon"</span>&gt;</span>PDF2OFD<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">font-awesome-icon</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">"cloud-upload-alt"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"pdfFileRef"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hidden"</span> <span class="hljs-attr">accept</span>=<span class="hljs-string">".pdf"</span> @<span class="hljs-attr">change</span>=<span class="hljs-string">"pdfFileChanged"</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"display: flex;align-items: center"</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"ofdObj"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"upload-icon"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin-left: 10px"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"downPdf"</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"ofdBase64"</span>&gt;</span>
          ä¸‹è½½PDF
          <span class="hljs-tag">&lt;<span class="hljs-name">font-awesome-icon</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">"download"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"scale-icon"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin-left: 10px"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"plus"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">font-awesome-icon</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">"search-plus"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"scale-icon"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"minus"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">font-awesome-icon</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">"search-minus"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"scale-icon"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">font-awesome-icon</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">"step-backward"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"firstPage"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"scale-icon"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size: 18px"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"prePage"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">font-awesome-icon</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">"caret-left"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"scale-icon"</span>&gt;</span>
          {{pageIndex}}/{{pageCount}}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"scale-icon"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size: 18px"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"nextPage"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">font-awesome-icon</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">"caret-right"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"scale-icon"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"lastPage"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">font-awesome-icon</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">"step-forward"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-header</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">el-main</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height: auto;background: #808080;;padding: 0"</span> <span class="hljs-attr">v-loading</span>=<span class="hljs-string">"loading"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"leftMenu"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"left-section"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-icon"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"demo(1)"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç”µå­å‘ç¥¨<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-icon"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"demo(2)"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç”µå­å…¬æ–‡<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-icon"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"demo(3)"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>éª‘ç¼ç« <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-icon"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"demo(4)"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å¤šé¡µæ–‡æ¡£<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"main-section"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"content"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"contentDivRef"</span> @<span class="hljs-attr">mousewheel</span>=<span class="hljs-string">"scrool"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-main</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"SealContainer"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sealInfoDiv"</span> <span class="hljs-attr">hidden</span>=<span class="hljs-string">"hidden"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"sealInfoDivRef"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"SealContainer mask"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"closeSealInfoDialog"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"SealContainer-layout"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"SealContainer-content"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content-title"</span>&gt;</span>ç­¾ç« ä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"subcontent"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>ç­¾ç« äºº<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"value"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"spSigner"</span>&gt;</span>[æ— æ•ˆçš„ç­¾ç« ç»“æ„]<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"subcontent"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>ç­¾ç« æä¾›è€…<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"value"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"spProvider"</span>&gt;</span>[æ— æ•ˆçš„ç­¾ç« ç»“æ„]<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"subcontent"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>åŸæ–‡æ‘˜è¦å€¼<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"value"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"spHashedValue"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"showMore('åŸæ–‡æ‘˜è¦å€¼', 'spHashedValue')"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"cursor: pointer"</span>&gt;</span>[æ— æ•ˆçš„ç­¾ç« ç»“æ„]<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"subcontent"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>ç­¾åå€¼<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"value"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"spSignedValue"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"showMore('ç­¾åå€¼', 'spSignedValue')"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"cursor: pointer"</span>&gt;</span>[æ— æ•ˆçš„ç­¾ç« ç»“æ„]<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"subcontent"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>ç­¾åç®—æ³•<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"value"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"spSignMethod"</span>&gt;</span>[æ— æ•ˆçš„ç­¾ç« ç»“æ„]<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"subcontent"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>ç‰ˆæœ¬å·<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"value"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"spVersion"</span>&gt;</span>[æ— æ•ˆçš„ç­¾ç« ç»“æ„]<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"subcontent"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>éªŒç­¾ç»“æœ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"value"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"VerifyRet"</span>&gt;</span>[æ— æ•ˆçš„ç­¾ç« ç»“æ„]<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content-title"</span>&gt;</span>å°ç« ä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"subcontent"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>å°ç« æ ‡è¯†<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"value"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"spSealID"</span>&gt;</span>[æ— æ•ˆçš„ç­¾ç« ç»“æ„]<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"subcontent"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>å°ç« åç§°<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"value"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"spSealName"</span>&gt;</span>[æ— æ•ˆçš„ç­¾ç« ç»“æ„]<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"subcontent"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>å°ç« ç±»å‹<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"value"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"spSealType"</span>&gt;</span>[æ— æ•ˆçš„ç­¾ç« ç»“æ„]<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"subcontent"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>æœ‰æ•ˆæ—¶é—´<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"value"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"spSealAuthTime"</span>&gt;</span>[æ— æ•ˆçš„ç­¾ç« ç»“æ„]<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"subcontent"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>åˆ¶ç« æ—¥æœŸ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"value"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"spSealMakeTime"</span>&gt;</span>[æ— æ•ˆçš„ç­¾ç« ç»“æ„]<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"subcontent"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"title"</span>&gt;</span>å°ç« ç‰ˆæœ¬<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"value"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"spSealVersion"</span>&gt;</span>[æ— æ•ˆçš„ç­¾ç« ç»“æ„]<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"position:absolute;right:1%;top:1%;"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">""</span> <span class="hljs-attr">id</span>=<span class="hljs-string">""</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"X"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"closeSealInfoDialog()"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">el-dialog</span> <span class="hljs-attr">:title</span>=<span class="hljs-string">"dialogTitle"</span> <span class="hljs-attr">:visible.sync</span>=<span class="hljs-string">"dialogVisible"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"text-align: left"</span>&gt;</span>{{dialogValue}}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">"footer"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dialog-footer"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"dialogVisible = false"</span>&gt;</span>ç¡® å®š<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-dialog</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">el-container</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, onMounted, reactive } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { parseOfdDocument, renderOfd, renderOfdByScale, digestCheck, getPageScale, setPageScale } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/utils/ofd/ofd.js"</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">JSZipUtils</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"jszip-utils"</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElMessage</span>, <span class="hljs-title class_">ElMessageBox</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>
<span class="hljs-comment">// å“åº”å¼æ•°æ®</span>
<span class="hljs-keyword">const</span> fileRef = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)
<span class="hljs-keyword">const</span> pdfFileRef = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)
<span class="hljs-keyword">const</span> contentDivRef = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)
<span class="hljs-keyword">const</span> sealInfoDivRef = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)

<span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">pdfFile</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">ofdBase64</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">pageIndex</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">pageCount</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">scale</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">dialogTitle</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">dialogValue</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">dialogVisible</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">ofdObj</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">screenWidth</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">clientWidth</span>
})

<span class="hljs-comment">// æ–¹æ³•</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">uploadFile</span> = (<span class="hljs-params"/>) =&gt; {
  state.<span class="hljs-property">pdfFile</span> = <span class="hljs-literal">null</span>
  fileRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">click</span>()
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">fileChanged</span> = (<span class="hljs-params">e</span>) =&gt; {
  <span class="hljs-keyword">const</span> file = e.<span class="hljs-property">target</span>.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>]
  <span class="hljs-keyword">const</span> ext = file.<span class="hljs-property">name</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/.+\./</span>, <span class="hljs-string">""</span>)
  
  <span class="hljs-keyword">if</span> ([<span class="hljs-string">"ofd"</span>].<span class="hljs-title function_">indexOf</span>(ext) === -<span class="hljs-number">1</span>) {
    <span class="hljs-title class_">ElMessageBox</span>.<span class="hljs-title function_">alert</span>(<span class="hljs-string">'ä»…æ”¯æŒofdç±»å‹'</span>, <span class="hljs-string">'error'</span>, {
      <span class="hljs-attr">confirmButtonText</span>: <span class="hljs-string">'ç¡®å®š'</span>,
      <span class="hljs-attr">callback</span>: <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> {
        <span class="hljs-title class_">ElMessage</span>({
          <span class="hljs-attr">type</span>: <span class="hljs-string">'info'</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">`action: <span class="hljs-subst">${action}</span>`</span>
        })
      }
    })
    <span class="hljs-keyword">return</span>
  }
  
  <span class="hljs-keyword">if</span> (file.<span class="hljs-property">size</span> &gt; <span class="hljs-number">100</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>) {
    <span class="hljs-title class_">ElMessageBox</span>.<span class="hljs-title function_">alert</span>(<span class="hljs-string">'æ–‡ä»¶å¤§å°éœ€ &lt; 100M'</span>, <span class="hljs-string">'error'</span>, {
      <span class="hljs-attr">confirmButtonText</span>: <span class="hljs-string">'ç¡®å®š'</span>,
      <span class="hljs-attr">callback</span>: <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> {
        <span class="hljs-title class_">ElMessage</span>({
          <span class="hljs-attr">type</span>: <span class="hljs-string">'info'</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">`action: <span class="hljs-subst">${action}</span>`</span>
        })
      }
    })
    <span class="hljs-keyword">return</span>
  }
  
  <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>()
  reader.<span class="hljs-title function_">readAsDataURL</span>(file)
  reader.<span class="hljs-property">onload</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
    state.<span class="hljs-property">ofdBase64</span> = e.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>)[<span class="hljs-number">1</span>]
  }
  
  <span class="hljs-title function_">getOfdDocumentObj</span>(file, state.<span class="hljs-property">screenWidth</span>)
  fileRef.<span class="hljs-property">value</span>.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">uploadPdfFile</span> = (<span class="hljs-params"/>) =&gt; {
  state.<span class="hljs-property">pdfFile</span> = <span class="hljs-literal">null</span>
  pdfFileRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">click</span>()
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">pdfFileChanged</span> = (<span class="hljs-params">e</span>) =&gt; {
  <span class="hljs-keyword">const</span> file = e.<span class="hljs-property">target</span>.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>]
  <span class="hljs-keyword">const</span> ext = file.<span class="hljs-property">name</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/.+\./</span>, <span class="hljs-string">""</span>)
  
  <span class="hljs-keyword">if</span> ([<span class="hljs-string">"pdf"</span>].<span class="hljs-title function_">indexOf</span>(ext) === -<span class="hljs-number">1</span>) {
    <span class="hljs-title class_">ElMessageBox</span>.<span class="hljs-title function_">alert</span>(<span class="hljs-string">'ä»…æ”¯æŒpdfç±»å‹'</span>, <span class="hljs-string">'error'</span>, {
      <span class="hljs-attr">confirmButtonText</span>: <span class="hljs-string">'ç¡®å®š'</span>,
      <span class="hljs-attr">callback</span>: <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> {
        <span class="hljs-title class_">ElMessage</span>({
          <span class="hljs-attr">type</span>: <span class="hljs-string">'info'</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">`action: <span class="hljs-subst">${action}</span>`</span>
        })
      }
    })
    <span class="hljs-keyword">return</span>
  }
  
  <span class="hljs-keyword">if</span> (file.<span class="hljs-property">size</span> &gt; <span class="hljs-number">100</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>) {
    <span class="hljs-title class_">ElMessageBox</span>.<span class="hljs-title function_">alert</span>(<span class="hljs-string">'æ–‡ä»¶å¤§å°éœ€ &lt; 100M'</span>, <span class="hljs-string">'error'</span>, {
      <span class="hljs-attr">confirmButtonText</span>: <span class="hljs-string">'ç¡®å®š'</span>,
      <span class="hljs-attr">callback</span>: <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> {
        <span class="hljs-title class_">ElMessage</span>({
          <span class="hljs-attr">type</span>: <span class="hljs-string">'info'</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">`action: <span class="hljs-subst">${action}</span>`</span>
        })
      }
    })
    <span class="hljs-keyword">return</span>
  }
  
  <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>()
  reader.<span class="hljs-title function_">readAsDataURL</span>(file)
  reader.<span class="hljs-property">onload</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> pdfBase64 = e.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>)[<span class="hljs-number">1</span>]
    <span class="hljs-title function_">downOfd</span>(pdfBase64)
  }
  
  pdfFileRef.<span class="hljs-property">value</span>.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">downOfd</span> = (<span class="hljs-params">pdfBase64</span>) =&gt; {
  state.<span class="hljs-property">loading</span> = <span class="hljs-literal">true</span>
  <span class="hljs-title function_">axios</span>({
    <span class="hljs-attr">method</span>: <span class="hljs-string">"post"</span>,
    <span class="hljs-attr">url</span>: <span class="hljs-string">"https://51shouzu.xyz/api/ofd/convertOfd"</span>,
    <span class="hljs-attr">data</span>: {
      pdfBase64,
    }
  }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
    state.<span class="hljs-property">loading</span> = <span class="hljs-literal">false</span>
    <span class="hljs-keyword">const</span> binary = <span class="hljs-title function_">atob</span>(response.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\s/g</span>, <span class="hljs-string">''</span>))
    <span class="hljs-keyword">const</span> len = binary.<span class="hljs-property">length</span>
    <span class="hljs-keyword">const</span> buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(len)
    <span class="hljs-keyword">const</span> view = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(buffer)
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) {
      view[i] = binary.<span class="hljs-title function_">charCodeAt</span>(i)
    }
    <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([view], <span class="hljs-literal">null</span>)
    <span class="hljs-keyword">const</span> url = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob)
    <span class="hljs-keyword">const</span> link = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'a'</span>)
    link.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>
    link.<span class="hljs-property">href</span> = url
    link.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'download'</span>, <span class="hljs-string">'ofd.ofd'</span>)
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(link)
    link.<span class="hljs-title function_">click</span>()
  }).<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(error, <span class="hljs-string">"error"</span>)
    <span class="hljs-title class_">ElMessageBox</span>.<span class="hljs-title function_">alert</span>(<span class="hljs-string">'PDFæ‰“å¼€å¤±è´¥'</span>, error, {
      <span class="hljs-attr">confirmButtonText</span>: <span class="hljs-string">'ç¡®å®š'</span>,
      <span class="hljs-attr">callback</span>: <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> {
        <span class="hljs-title class_">ElMessage</span>({
          <span class="hljs-attr">type</span>: <span class="hljs-string">'info'</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">`action: <span class="hljs-subst">${action}</span>`</span>
        })
      }
    })
  })
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">downPdf</span> = (<span class="hljs-params"/>) =&gt; {
  state.<span class="hljs-property">loading</span> = <span class="hljs-literal">true</span>
  <span class="hljs-title function_">axios</span>({
    <span class="hljs-attr">method</span>: <span class="hljs-string">"post"</span>,
    <span class="hljs-attr">url</span>: <span class="hljs-string">"https://51shouzu.xyz/api/ofd/convertPdf"</span>,
    <span class="hljs-attr">data</span>: {
      <span class="hljs-attr">ofdBase64</span>: state.<span class="hljs-property">ofdBase64</span>
    }
  }).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
    state.<span class="hljs-property">loading</span> = <span class="hljs-literal">false</span>
    <span class="hljs-keyword">const</span> binary = <span class="hljs-title function_">atob</span>(response.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\s/g</span>, <span class="hljs-string">''</span>))
    <span class="hljs-keyword">const</span> len = binary.<span class="hljs-property">length</span>
    <span class="hljs-keyword">const</span> buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(len)
    <span class="hljs-keyword">const</span> view = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(buffer)
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) {
      view[i] = binary.<span class="hljs-title function_">charCodeAt</span>(i)
    }
    <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([view], { <span class="hljs-attr">type</span>: <span class="hljs-string">"application/pdf"</span> })
    <span class="hljs-keyword">const</span> url = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob)
    <span class="hljs-keyword">const</span> link = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'a'</span>)
    link.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>
    link.<span class="hljs-property">href</span> = url
    link.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'download'</span>, <span class="hljs-string">'ofd.pdf'</span>)
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(link)
    link.<span class="hljs-title function_">click</span>()
  }).<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(error, <span class="hljs-string">"error"</span>)
    <span class="hljs-title class_">ElMessageBox</span>.<span class="hljs-title function_">alert</span>(<span class="hljs-string">'OFDæ‰“å¼€å¤±è´¥'</span>, error, {
      <span class="hljs-attr">confirmButtonText</span>: <span class="hljs-string">'ç¡®å®š'</span>,
      <span class="hljs-attr">callback</span>: <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> {
        <span class="hljs-title class_">ElMessage</span>({
          <span class="hljs-attr">type</span>: <span class="hljs-string">'info'</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">`action: <span class="hljs-subst">${action}</span>`</span>
        })
      }
    })
  })
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">plus</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">setPageScale</span>(++state.<span class="hljs-property">scale</span>)
  <span class="hljs-keyword">const</span> divs = <span class="hljs-title function_">renderOfdByScale</span>(state.<span class="hljs-property">ofdObj</span>)
  <span class="hljs-title function_">displayOfdDiv</span>(divs)
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">minus</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">setPageScale</span>(--state.<span class="hljs-property">scale</span>)
  <span class="hljs-keyword">const</span> divs = <span class="hljs-title function_">renderOfdByScale</span>(state.<span class="hljs-property">ofdObj</span>)
  <span class="hljs-title function_">displayOfdDiv</span>(divs)
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">prePage</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> contentDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'content'</span>)
  <span class="hljs-keyword">const</span> ele = contentDiv.<span class="hljs-property">children</span>.<span class="hljs-title function_">item</span>(state.<span class="hljs-property">pageIndex</span> - <span class="hljs-number">2</span>)
  ele?.<span class="hljs-title function_">scrollIntoView</span>(<span class="hljs-literal">true</span>)
  <span class="hljs-keyword">if</span> (ele) state.<span class="hljs-property">pageIndex</span> = state.<span class="hljs-property">pageIndex</span> - <span class="hljs-number">1</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">firstPage</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> contentDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'content'</span>)
  <span class="hljs-keyword">const</span> ele = contentDiv.<span class="hljs-property">firstElementChild</span>
  ele?.<span class="hljs-title function_">scrollIntoView</span>(<span class="hljs-literal">true</span>)
  <span class="hljs-keyword">if</span> (ele) state.<span class="hljs-property">pageIndex</span> = <span class="hljs-number">1</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">nextPage</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> contentDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'content'</span>)
  <span class="hljs-keyword">const</span> ele = contentDiv.<span class="hljs-property">children</span>.<span class="hljs-title function_">item</span>(state.<span class="hljs-property">pageIndex</span>)
  ele?.<span class="hljs-title function_">scrollIntoView</span>(<span class="hljs-literal">true</span>)
  <span class="hljs-keyword">if</span> (ele) ++state.<span class="hljs-property">pageIndex</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">lastPage</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> contentDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'content'</span>)
  <span class="hljs-keyword">const</span> ele = contentDiv.<span class="hljs-property">lastElementChild</span>
  ele?.<span class="hljs-title function_">scrollIntoView</span>(<span class="hljs-literal">true</span>)
  <span class="hljs-keyword">if</span> (ele) state.<span class="hljs-property">pageIndex</span> = contentDiv.<span class="hljs-property">childElementCount</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">demo</span> = (<span class="hljs-params">value</span>) =&gt; {
  <span class="hljs-keyword">let</span> ofdFile = <span class="hljs-literal">null</span>
  <span class="hljs-keyword">switch</span> (value) {
    <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
      ofdFile = <span class="hljs-string">'999.ofd'</span>
      <span class="hljs-keyword">break</span>
    <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
      ofdFile = <span class="hljs-string">'n.ofd'</span>
      <span class="hljs-keyword">break</span>
    <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
      ofdFile = <span class="hljs-string">'h.ofd'</span>
      <span class="hljs-keyword">break</span>
    <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:
      ofdFile = <span class="hljs-string">'2.ofd'</span>
      <span class="hljs-keyword">break</span>
  }
  <span class="hljs-title class_">JSZipUtils</span>.<span class="hljs-title function_">getBinaryContent</span>(ofdFile, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"JSZipUtils===1"</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err)
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">const</span> base64String = <span class="hljs-title function_">btoa</span>(<span class="hljs-title class_">String</span>.<span class="hljs-property">fromCharCode</span>.<span class="hljs-title function_">apply</span>(<span class="hljs-literal">null</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(data)))
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"JSZipUtils===2"</span>);
      state.<span class="hljs-property">ofdBase64</span> = base64String
    }
  })
  <span class="hljs-title function_">getOfdDocumentObj</span>(ofdFile, state.<span class="hljs-property">screenWidth</span>)
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">getOfdDocumentObj</span> = (<span class="hljs-params">file, screenWidth</span>) =&gt; {
  <span class="hljs-keyword">const</span> t = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>()
  state.<span class="hljs-property">loading</span> = <span class="hljs-literal">true</span>
  
  <span class="hljs-title function_">parseOfdDocument</span>({
    <span class="hljs-attr">ofd</span>: file,
    <span class="hljs-title function_">success</span>(<span class="hljs-params">res</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)
      <span class="hljs-keyword">const</span> t1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>()
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è§£æofd'</span>, t1 - t)
      state.<span class="hljs-property">ofdObj</span> = res[<span class="hljs-number">0</span>]
      state.<span class="hljs-property">pageCount</span> = res[<span class="hljs-number">0</span>].<span class="hljs-property">pages</span>.<span class="hljs-property">length</span>
      <span class="hljs-keyword">const</span> divs = <span class="hljs-title function_">renderOfd</span>(screenWidth, res[<span class="hljs-number">0</span>])
      <span class="hljs-keyword">const</span> t2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>()
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'xmlè½¬svg'</span>, t2 - t1)
      <span class="hljs-title function_">displayOfdDiv</span>(divs)
      <span class="hljs-keyword">const</span> t3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>()
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'svgæ¸²æŸ“åˆ°é¡µé¢'</span>, t3 - t2)
      state.<span class="hljs-property">loading</span> = <span class="hljs-literal">false</span>
    },
    <span class="hljs-title function_">fail</span>(<span class="hljs-params">error</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(error)
      state.<span class="hljs-property">loading</span> = <span class="hljs-literal">false</span>
      <span class="hljs-title class_">ElMessageBox</span>.<span class="hljs-title function_">alert</span>(<span class="hljs-string">'OFDæ‰“å¼€å¤±è´¥'</span>, error, {
        <span class="hljs-attr">confirmButtonText</span>: <span class="hljs-string">'ç¡®å®š'</span>,
        <span class="hljs-attr">callback</span>: <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> {
          <span class="hljs-title class_">ElMessage</span>({
            <span class="hljs-attr">type</span>: <span class="hljs-string">'info'</span>,
            <span class="hljs-attr">message</span>: <span class="hljs-string">`action: <span class="hljs-subst">${action}</span>`</span>
          })
        }
      })
    }
  })
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">displayOfdDiv</span> = (<span class="hljs-params">divs</span>) =&gt; {
  state.<span class="hljs-property">scale</span> = <span class="hljs-title function_">getPageScale</span>()
  <span class="hljs-keyword">const</span> contentDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'content'</span>)
  contentDiv.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">''</span>
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> div <span class="hljs-keyword">of</span> divs) {
    contentDiv.<span class="hljs-title function_">appendChild</span>(div)
  }
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> ele <span class="hljs-keyword">of</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByName</span>(<span class="hljs-string">'seal_img_div'</span>)) {
    <span class="hljs-title function_">addEventOnSealDiv</span>(ele, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(ele.<span class="hljs-property">dataset</span>.<span class="hljs-property">sesSignature</span>), <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(ele.<span class="hljs-property">dataset</span>.<span class="hljs-property">signedInfo</span>))
  }
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">addEventOnSealDiv</span> = (<span class="hljs-params">div, SES_Signature, signedInfo</span>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-variable language_">global</span>.<span class="hljs-property">HashRet</span> = <span class="hljs-literal">null</span>
    <span class="hljs-variable language_">global</span>.<span class="hljs-property">VerifyRet</span> = signedInfo.<span class="hljs-property">VerifyRet</span>
    
    div.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"click"</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'sealInfoDiv'</span>).<span class="hljs-property">hidden</span> = <span class="hljs-literal">false</span>
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'sealInfoDiv'</span>).<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'style'</span>, <span class="hljs-string">'display:flex;align-items: center;justify-content: center;'</span>)
      
      <span class="hljs-keyword">if</span> (SES_Signature.<span class="hljs-property">realVersion</span> &lt; <span class="hljs-number">4</span>) {
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSigner'</span>).<span class="hljs-property">innerText</span> = SES_Signature.<span class="hljs-property">toSign</span>.<span class="hljs-property">cert</span>[<span class="hljs-string">'commonName'</span>]
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spProvider'</span>).<span class="hljs-property">innerText</span> = signedInfo.<span class="hljs-property">Provider</span>[<span class="hljs-string">'@_ProviderName'</span>]
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spHashedValue'</span>).<span class="hljs-property">innerText</span> = SES_Signature.<span class="hljs-property">toSign</span>.<span class="hljs-property">dataHash</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\n/g</span>, <span class="hljs-string">''</span>)
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSignedValue'</span>).<span class="hljs-property">innerText</span> = SES_Signature.<span class="hljs-property">signature</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\n/g</span>, <span class="hljs-string">''</span>)
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSignMethod'</span>).<span class="hljs-property">innerText</span> = SES_Signature.<span class="hljs-property">toSign</span>.<span class="hljs-property">signatureAlgorithm</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\n/g</span>, <span class="hljs-string">''</span>)
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSealID'</span>).<span class="hljs-property">innerText</span> = SES_Signature.<span class="hljs-property">toSign</span>.<span class="hljs-property">eseal</span>.<span class="hljs-property">esealInfo</span>.<span class="hljs-property">esID</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSealName'</span>).<span class="hljs-property">innerText</span> = SES_Signature.<span class="hljs-property">toSign</span>.<span class="hljs-property">eseal</span>.<span class="hljs-property">esealInfo</span>.<span class="hljs-property">property</span>.<span class="hljs-property">name</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSealType'</span>).<span class="hljs-property">innerText</span> = SES_Signature.<span class="hljs-property">toSign</span>.<span class="hljs-property">eseal</span>.<span class="hljs-property">esealInfo</span>.<span class="hljs-property">property</span>.<span class="hljs-property">type</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSealAuthTime'</span>).<span class="hljs-property">innerText</span> = <span class="hljs-string">"ä» "</span> + SES_Signature.<span class="hljs-property">toSign</span>.<span class="hljs-property">eseal</span>.<span class="hljs-property">esealInfo</span>.<span class="hljs-property">property</span>.<span class="hljs-property">validStart</span> + <span class="hljs-string">" åˆ° "</span> + SES_Signature.<span class="hljs-property">toSign</span>.<span class="hljs-property">eseal</span>.<span class="hljs-property">esealInfo</span>.<span class="hljs-property">property</span>.<span class="hljs-property">validEnd</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSealMakeTime'</span>).<span class="hljs-property">innerText</span> = SES_Signature.<span class="hljs-property">toSign</span>.<span class="hljs-property">eseal</span>.<span class="hljs-property">esealInfo</span>.<span class="hljs-property">property</span>.<span class="hljs-property">createDate</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSealVersion'</span>).<span class="hljs-property">innerText</span> = SES_Signature.<span class="hljs-property">toSign</span>.<span class="hljs-property">eseal</span>.<span class="hljs-property">esealInfo</span>.<span class="hljs-property">header</span>.<span class="hljs-property">version</span>
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSigner'</span>).<span class="hljs-property">innerText</span> = SES_Signature.<span class="hljs-property">cert</span>[<span class="hljs-string">'commonName'</span>]
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spProvider'</span>).<span class="hljs-property">innerText</span> = signedInfo.<span class="hljs-property">Provider</span>[<span class="hljs-string">'@_ProviderName'</span>]
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spHashedValue'</span>).<span class="hljs-property">innerText</span> = SES_Signature.<span class="hljs-property">toSign</span>.<span class="hljs-property">dataHash</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\n/g</span>, <span class="hljs-string">''</span>)
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSignedValue'</span>).<span class="hljs-property">innerText</span> = SES_Signature.<span class="hljs-property">signature</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\n/g</span>, <span class="hljs-string">''</span>)
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSignMethod'</span>).<span class="hljs-property">innerText</span> = SES_Signature.<span class="hljs-property">signatureAlgID</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\n/g</span>, <span class="hljs-string">''</span>)
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSealID'</span>).<span class="hljs-property">innerText</span> = SES_Signature.<span class="hljs-property">toSign</span>.<span class="hljs-property">eseal</span>.<span class="hljs-property">esealInfo</span>.<span class="hljs-property">esID</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSealName'</span>).<span class="hljs-property">innerText</span> = SES_Signature.<span class="hljs-property">toSign</span>.<span class="hljs-property">eseal</span>.<span class="hljs-property">esealInfo</span>.<span class="hljs-property">property</span>.<span class="hljs-property">name</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSealType'</span>).<span class="hljs-property">innerText</span> = SES_Signature.<span class="hljs-property">toSign</span>.<span class="hljs-property">eseal</span>.<span class="hljs-property">esealInfo</span>.<span class="hljs-property">property</span>.<span class="hljs-property">type</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSealAuthTime'</span>).<span class="hljs-property">innerText</span> = <span class="hljs-string">"ä» "</span> + SES_Signature.<span class="hljs-property">toSign</span>.<span class="hljs-property">eseal</span>.<span class="hljs-property">esealInfo</span>.<span class="hljs-property">property</span>.<span class="hljs-property">validStart</span> + <span class="hljs-string">" åˆ° "</span> + SES_Signature.<span class="hljs-property">toSign</span>.<span class="hljs-property">eseal</span>.<span class="hljs-property">esealInfo</span>.<span class="hljs-property">property</span>.<span class="hljs-property">validEnd</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSealMakeTime'</span>).<span class="hljs-property">innerText</span> = SES_Signature.<span class="hljs-property">toSign</span>.<span class="hljs-property">eseal</span>.<span class="hljs-property">esealInfo</span>.<span class="hljs-property">property</span>.<span class="hljs-property">createDate</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSealVersion'</span>).<span class="hljs-property">innerText</span> = SES_Signature.<span class="hljs-property">toSign</span>.<span class="hljs-property">eseal</span>.<span class="hljs-property">esealInfo</span>.<span class="hljs-property">header</span>.<span class="hljs-property">version</span>
      }
      
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spVersion'</span>).<span class="hljs-property">innerText</span> = SES_Signature.<span class="hljs-property">toSign</span>.<span class="hljs-property">version</span>
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'VerifyRet'</span>).<span class="hljs-property">innerText</span> = <span class="hljs-string">"æ–‡ä»¶æ‘˜è¦å€¼åå°éªŒè¯ä¸­ï¼Œè¯·ç¨ç­‰... "</span> + (<span class="hljs-variable language_">global</span>.<span class="hljs-property">VerifyRet</span> ? <span class="hljs-string">"ç­¾åå€¼éªŒè¯æˆåŠŸ"</span> : <span class="hljs-string">"ç­¾åå€¼éªŒè¯å¤±è´¥"</span>)
      
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">global</span>.<span class="hljs-property">HashRet</span> == <span class="hljs-literal">null</span> || <span class="hljs-variable language_">global</span>.<span class="hljs-property">HashRet</span> == <span class="hljs-literal">undefined</span> || <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-variable language_">global</span>.<span class="hljs-property">HashRet</span>).<span class="hljs-property">length</span> &lt;= <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">const</span> signRetStr = <span class="hljs-variable language_">global</span>.<span class="hljs-property">VerifyRet</span> ? <span class="hljs-string">"ç­¾åå€¼éªŒè¯æˆåŠŸ"</span> : <span class="hljs-string">"ç­¾åå€¼éªŒè¯å¤±è´¥"</span>
          <span class="hljs-variable language_">global</span>.<span class="hljs-property">HashRet</span> = <span class="hljs-title function_">digestCheck</span>(<span class="hljs-variable language_">global</span>.<span class="hljs-property">toBeChecked</span>.<span class="hljs-title function_">get</span>(signedInfo.<span class="hljs-property">signatureID</span>))
          <span class="hljs-keyword">const</span> hashRetStr = <span class="hljs-variable language_">global</span>.<span class="hljs-property">HashRet</span> ? <span class="hljs-string">"æ–‡ä»¶æ‘˜è¦å€¼éªŒè¯æˆåŠŸ"</span> : <span class="hljs-string">"æ–‡ä»¶æ‘˜è¦å€¼éªŒè¯å¤±è´¥"</span>
          <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'VerifyRet'</span>).<span class="hljs-property">innerText</span> = hashRetStr + <span class="hljs-string">" "</span> + signRetStr
        }, <span class="hljs-number">1000</span>)
      }
    })
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e)
  }
  
  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">global</span>.<span class="hljs-property">VerifyRet</span>) {
    div.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'class'</span>, <span class="hljs-string">'gray'</span>)
  }
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">closeSealInfoDialog</span> = (<span class="hljs-params"/>) =&gt; {
  sealInfoDivRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'style'</span>, <span class="hljs-string">'display: none'</span>)
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSigner'</span>).<span class="hljs-property">innerText</span> = <span class="hljs-string">"[æ— æ•ˆçš„ç­¾ç« ç»“æ„]"</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spProvider'</span>).<span class="hljs-property">innerText</span> = <span class="hljs-string">"[æ— æ•ˆçš„ç­¾ç« ç»“æ„]"</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spHashedValue'</span>).<span class="hljs-property">innerText</span> = <span class="hljs-string">"[æ— æ•ˆçš„ç­¾ç« ç»“æ„]"</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSignedValue'</span>).<span class="hljs-property">innerText</span> = <span class="hljs-string">"[æ— æ•ˆçš„ç­¾ç« ç»“æ„]"</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSignMethod'</span>).<span class="hljs-property">innerText</span> = <span class="hljs-string">"[æ— æ•ˆçš„ç­¾ç« ç»“æ„]"</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSealID'</span>).<span class="hljs-property">innerText</span> = <span class="hljs-string">"[æ— æ•ˆçš„ç­¾ç« ç»“æ„]"</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSealName'</span>).<span class="hljs-property">innerText</span> = <span class="hljs-string">"[æ— æ•ˆçš„ç­¾ç« ç»“æ„]"</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSealType'</span>).<span class="hljs-property">innerText</span> = <span class="hljs-string">"[æ— æ•ˆçš„ç­¾ç« ç»“æ„]"</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSealAuthTime'</span>).<span class="hljs-property">innerText</span> = <span class="hljs-string">"[æ— æ•ˆçš„ç­¾ç« ç»“æ„]"</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSealMakeTime'</span>).<span class="hljs-property">innerText</span> = <span class="hljs-string">"[æ— æ•ˆçš„ç­¾ç« ç»“æ„]"</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spSealVersion'</span>).<span class="hljs-property">innerText</span> = <span class="hljs-string">"[æ— æ•ˆçš„ç­¾ç« ç»“æ„]"</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'spVersion'</span>).<span class="hljs-property">innerText</span> = <span class="hljs-string">"[æ— æ•ˆçš„ç­¾ç« ç»“æ„]"</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'VerifyRet'</span>).<span class="hljs-property">innerText</span> = <span class="hljs-string">"[æ— æ•ˆçš„ç­¾ç« ç»“æ„]"</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">showMore</span> = (<span class="hljs-params">title, id</span>) =&gt; {
  state.<span class="hljs-property">dialogVisible</span> = <span class="hljs-literal">true</span>
  state.<span class="hljs-property">dialogValue</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(id).<span class="hljs-property">innerText</span>
  state.<span class="hljs-property">dialogTitle</span> = title
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">scrool</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> scrolled = contentDivRef.<span class="hljs-property">value</span>.<span class="hljs-property">firstElementChild</span>?.<span class="hljs-title function_">getBoundingClientRect</span>()?.<span class="hljs-property">top</span> - <span class="hljs-number">60</span>
  <span class="hljs-keyword">let</span> top = <span class="hljs-number">0</span>
  <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; contentDivRef.<span class="hljs-property">value</span>.<span class="hljs-property">childElementCount</span>; i++) {
    top += (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(contentDivRef.<span class="hljs-property">value</span>.<span class="hljs-property">children</span>.<span class="hljs-title function_">item</span>(i)?.<span class="hljs-property">style</span>.<span class="hljs-property">height</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-string">'px'</span>, <span class="hljs-string">''</span>)) + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(contentDivRef.<span class="hljs-property">value</span>.<span class="hljs-property">children</span>.<span class="hljs-title function_">item</span>(i)?.<span class="hljs-property">style</span>.<span class="hljs-property">marginBottom</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-string">'px'</span>, <span class="hljs-string">''</span>)))
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(scrolled) &lt; top) {
      index = i
      <span class="hljs-keyword">break</span>
    }
  }
  
  state.<span class="hljs-property">pageIndex</span> = index + <span class="hljs-number">1</span>
}

<span class="hljs-comment">// ç”Ÿå‘½å‘¨æœŸé’©å­</span>
<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  state.<span class="hljs-property">screenWidth</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">clientWidth</span> - <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'leftMenu'</span>).<span class="hljs-title function_">getBoundingClientRect</span>().<span class="hljs-property">width</span>
  
  contentDivRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, scrool)
  
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">onresize</span> = <span class="hljs-function">() =&gt;</span> {
    state.<span class="hljs-property">screenWidth</span> = (<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">clientWidth</span> - <span class="hljs-number">88</span>)
    <span class="hljs-keyword">const</span> divs = <span class="hljs-title function_">renderOfd</span>(state.<span class="hljs-property">screenWidth</span>, state.<span class="hljs-property">ofdObj</span>)
    <span class="hljs-title function_">displayOfdDiv</span>(divs)
  }
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-comment">/* ä¿æŒåŸæœ‰çš„æ ·å¼ä¸å˜ */</span>
<span class="hljs-selector-class">.upload-icon</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">justify-content</span>: center;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">28px</span>;
  <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">padding-right</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgb</span>(<span class="hljs-number">59</span>, <span class="hljs-number">95</span>, <span class="hljs-number">232</span>);
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">1px</span>;
  <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#5867dd</span>;
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">1px</span>;
}

<span class="hljs-selector-class">.scale-icon</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">justify-content</span>: center;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">33px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">28px</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#F5F5F5</span>;;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">1px</span>;
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#333333</span>;
  <span class="hljs-attribute">text-align</span>: center;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">2px</span>;
}

<span class="hljs-selector-class">.scale-icon</span> <span class="hljs-selector-pseudo">:active</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">rgb</span>(<span class="hljs-number">59</span>, <span class="hljs-number">95</span>, <span class="hljs-number">232</span>);
}

<span class="hljs-selector-class">.scale-icon</span> <span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">rgb</span>(<span class="hljs-number">59</span>, <span class="hljs-number">95</span>, <span class="hljs-number">232</span>);
}

<span class="hljs-selector-class">.text-icon</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">justify-content</span>: center;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">28px</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">90%</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgb</span>(<span class="hljs-number">59</span>, <span class="hljs-number">95</span>, <span class="hljs-number">232</span>);
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">1px</span>;
  <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#5867dd</span>;
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;
}

<span class="hljs-selector-class">.hidden</span> {
  <span class="hljs-attribute">display</span>: none <span class="hljs-meta">!important</span>;
}

<span class="hljs-selector-class">.SealContainer</span> {
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">99999</span>;
  <span class="hljs-attribute">position</span>: fixed;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100vw</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;
}

<span class="hljs-selector-class">.SealContainer</span> <span class="hljs-selector-class">.mask</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#000000</span>;
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.3</span>;
}

<span class="hljs-selector-class">.content-title</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
  <span class="hljs-attribute">text-align</span>: center;
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">rgb</span>(<span class="hljs-number">59</span>, <span class="hljs-number">95</span>, <span class="hljs-number">232</span>);
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">rgb</span>(<span class="hljs-number">59</span>, <span class="hljs-number">95</span>, <span class="hljs-number">232</span>);
  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;
}

<span class="hljs-selector-class">.SealContainer-content</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">overflow-y</span>: auto;
  <span class="hljs-attribute">background</span>: white;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: column;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">align-items</span>: center;
}

<span class="hljs-selector-class">.SealContainer-layout</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">60%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">80vh</span>;
  <span class="hljs-attribute">overflow-y</span>: auto;
  <span class="hljs-attribute">background</span>: white;
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">100</span>;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: column;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">align-items</span>: center;
}

<span class="hljs-selector-class">.subcontent</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">80%</span>;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: column;
  <span class="hljs-attribute">text-align</span>: left;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">font-family</span>: simsun;
}

<span class="hljs-selector-class">.subcontent</span> <span class="hljs-selector-class">.title</span> {
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;
}

<span class="hljs-selector-class">.subcontent</span> <span class="hljs-selector-class">.value</span> {
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">400</span>;
  -webkit-line-clamp: <span class="hljs-number">1</span>;
  <span class="hljs-attribute">display</span>: -webkit-box;
  -webkit-box-orient: vertical;
  <span class="hljs-attribute">overflow</span>: hidden;
}

<span class="hljs-selector-class">.left-section</span> {
  <span class="hljs-attribute">position</span>: fixed;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">88px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">background</span>:<span class="hljs-number">#F5F5F5</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e8e8e8</span>;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: column
}

<span class="hljs-selector-class">.main-section</span> {
  <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">margin-left</span>:<span class="hljs-number">88px</span>;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: column;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">justify-content</span>: center;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#808080</span>;
  <span class="hljs-attribute">overflow</span>: hidden
}

<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">767px</span>) {
  <span class="hljs-selector-class">.SealContainer-layout</span> {
    <span class="hljs-attribute">position</span>: relative;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">90%</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">90vh</span>;
    <span class="hljs-attribute">overflow-y</span>: auto;
    <span class="hljs-attribute">background</span>: white;
    <span class="hljs-attribute">z-index</span>: <span class="hljs-number">100</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-direction</span>: column;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
    <span class="hljs-attribute">align-items</span>: center;
  }

  <span class="hljs-selector-class">.subcontent</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">95%</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-direction</span>: column;
    <span class="hljs-attribute">text-align</span>: left;
    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">10px</span>;
    <span class="hljs-attribute">font-family</span>: simsun;
  }

  <span class="hljs-selector-class">.left-section</span> {
    <span class="hljs-attribute">position</span>: fixed;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">0px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">background</span>:<span class="hljs-number">#F5F5F5</span>;
    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e8e8e8</span>;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">display</span>: none;
    <span class="hljs-attribute">flex-direction</span>: column;
  }

  <span class="hljs-selector-class">.main-section</span> {
    <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">margin-left</span>:<span class="hljs-number">0px</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-direction</span>: column;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">justify-content</span>: center;
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#808080</span>;
    <span class="hljs-attribute">overflow</span>: hidden
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

</span></code></pre>
<h4 data-id="heading-32">æ–¹å¼3-<code>ofd.js</code>æ–‡ä»¶é¢„è§ˆä»¥åŠä½¿ç”¨ï¼ˆåºŸå¼ƒï¼‰</h4>
<p>æŸ¥çœ‹äº†ä¸€ä¸‹npmä¸Šå·²ç»éœ€è¦ä»˜è´¹äº†ï¼Œæ‰€ä»¥æˆ‘æœæ–­æ”¾å¼ƒäº†</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// npmåœ°å€</span>
<span class="hljs-attr">https</span>:<span class="hljs-comment">//www.npmjs.com/package/ofd.js</span>

<span class="hljs-comment">// å®‰è£…</span>
pnpm install ofd.<span class="hljs-property">js</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨ Android ä¸­æ‰§è¡Œ View.invalidate() æ–¹æ³•åç»å†äº†ä»€ä¹ˆ]]></title>    <link>https://juejin.cn/post/7592340733953818674</link>    <guid>https://juejin.cn/post/7592340733953818674</guid>    <pubDate>2026-01-07T07:34:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592340733953818674" data-draft-id="7592234632483602441" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨ Android ä¸­æ‰§è¡Œ View.invalidate() æ–¹æ³•åç»å†äº†ä»€ä¹ˆ"/> <meta itemprop="keywords" content="Kotlin,Android,Java"/> <meta itemprop="datePublished" content="2026-01-07T07:34:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ„¤æ€’çš„ä»£ç "/> <meta itemprop="url" content="https://juejin.cn/user/4125023358426190"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨ Android ä¸­æ‰§è¡Œ View.invalidate() æ–¹æ³•åç»å†äº†ä»€ä¹ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4125023358426190/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ„¤æ€’çš„ä»£ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T07:34:46.000Z" title="Wed Jan 07 2026 07:34:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Android ä¸­ï¼Œ<code>view.invalidate()</code> æ˜¯è§¦å‘ç•Œé¢é‡ç»˜çš„æ ¸å¿ƒæ–¹æ³•ã€‚å®ƒçš„è°ƒç”¨é“¾æ˜¯ä¸€ä¸ªä» <strong>å­ View å‘ä¸Šæº¯æºè‡³ ViewRootImplï¼Œå†å‘ä¸‹æ´¾å‘ç»˜åˆ¶ä¿¡å·</strong> çš„è¿‡ç¨‹ã€‚</p>
<h2 data-id="heading-0">0x00ã€<code>View.invalidate()</code></h2>
<p>å½“è°ƒç”¨ <code>invalidate()</code> æ—¶ï¼Œæœ€ç»ˆä¼šè¿›å…¥ <code>invalidateInternal</code> æ–¹æ³•ï¼Œå¹¶è¿›è¡Œâ€œè„åŒºåŸŸâ€çš„æ ‡è®°ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-comment">/**
     * è¿™é‡Œæ³¨é‡Šå¯ä»¥çœ‹å‡ºï¼Œæ­¤æ–¹æ³•ä¼šè§¦å‘onDrawæ–¹æ³•ï¼Œä¸”åªèƒ½åœ¨UIçº¿ç¨‹æ‰§è¡Œï¼ŒéUIçº¿ç¨‹ä½¿ç”¨postInvalidate()
     * Invalidate the whole view. If the view is visible,
     * {<span class="hljs-doctag">@link</span> #onDraw(android.graphics.Canvas)} will be called at some point in
     * the future.
     * &lt;p&gt;
     * This must be called from a UI thread. To call from a non-UI thread, call
     * {<span class="hljs-doctag">@link</span> #postInvalidate()}.
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">invalidate</span><span class="hljs-params">()</span> {
        invalidate(<span class="hljs-literal">true</span>);
    }
    
		<span class="hljs-meta">@UnsupportedAppUsage</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">invalidate</span><span class="hljs-params">(<span class="hljs-type">boolean</span> invalidateCache)</span> {
        invalidateInternal(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, mRight - mLeft, mBottom - mTop, invalidateCache, <span class="hljs-literal">true</span>);
    }

    <span class="hljs-keyword">void</span> <span class="hljs-title function_">invalidateInternal</span><span class="hljs-params">(<span class="hljs-type">int</span> l, <span class="hljs-type">int</span> t, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> b, <span class="hljs-type">boolean</span> invalidateCache,
            <span class="hljs-type">boolean</span> fullInvalidate)</span> {
        <span class="hljs-comment">//...</span>
				<span class="hljs-comment">// 1. å¦‚æœ View ä¸å¯è§æˆ–è€…æ­£åœ¨æ‰§è¡ŒåŠ¨ç”»ï¼Œç›´æ¥è·³è¿‡è¿”å›</span>
        <span class="hljs-keyword">if</span> (skipInvalidate()) {
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-comment">// Reset content capture caches</span>
        mPrivateFlags4 &amp;= ~PFLAG4_CONTENT_CAPTURE_IMPORTANCE_MASK;
        mContentCaptureSessionCached = <span class="hljs-literal">false</span>;
				<span class="hljs-comment">// 2.1 è®¾ç½®â€œè„åŒºåŸŸâ€ï¼Œæ ‡è®°éœ€è¦é‡ç»˜åˆ¶çš„åŒºåŸŸ</span>
        <span class="hljs-keyword">if</span> ((mPrivateFlags &amp; (PFLAG_DRAWN | PFLAG_HAS_BOUNDS)) == (PFLAG_DRAWN | PFLAG_HAS_BOUNDS)
                || (invalidateCache &amp;&amp; (mPrivateFlags &amp; PFLAG_DRAWING_CACHE_VALID) == PFLAG_DRAWING_CACHE_VALID)
                || (mPrivateFlags &amp; PFLAG_INVALIDATED) != PFLAG_INVALIDATED
                || (fullInvalidate &amp;&amp; isOpaque() != mLastIsOpaque)) {
            <span class="hljs-keyword">if</span> (fullInvalidate) {
                mLastIsOpaque = isOpaque();
                mPrivateFlags &amp;= ~PFLAG_DRAWN;
            }
						<span class="hljs-comment">// 2.2 æ ‡è®°è¯¥ View çš„å†…å®¹å¤±æ•ˆï¼Œéœ€è¦é‡æ–°ç»˜åˆ¶</span>
            mPrivateFlags |= PFLAG_DIRTY;

            <span class="hljs-keyword">if</span> (invalidateCache) {
                mPrivateFlags |= PFLAG_INVALIDATED;
                mPrivateFlags &amp;= ~PFLAG_DRAWING_CACHE_VALID;
            }

						<span class="hljs-comment">// 3. å°†é‡ç»˜è¯·æ±‚å‘ä¸Šä¼ é€’ç»™çˆ¶å®¹å™¨</span>
            <span class="hljs-comment">// Propagate the damage rectangle to the parent view.</span>
            <span class="hljs-keyword">final</span> <span class="hljs-type">AttachInfo</span> <span class="hljs-variable">ai</span> <span class="hljs-operator">=</span> mAttachInfo;
            <span class="hljs-comment">// è·å–åˆ°è¯¥Viewçš„çˆ¶æ§ä»¶ï¼Œå³ ViewGroup</span>
            <span class="hljs-keyword">final</span> <span class="hljs-type">ViewParent</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> mParent;
            <span class="hljs-keyword">if</span> (p != <span class="hljs-literal">null</span> &amp;&amp; ai != <span class="hljs-literal">null</span> &amp;&amp; l &lt; r &amp;&amp; t &lt; b) {
                <span class="hljs-keyword">final</span> <span class="hljs-type">Rect</span> <span class="hljs-variable">damage</span> <span class="hljs-operator">=</span> ai.mTmpInvalRect;
                <span class="hljs-comment">// 3.1 è®¾ç½®å¤±æ•ˆçš„çŸ©å½¢åŒºåŸŸ</span>
                damage.set(l, t, r, b);
                <span class="hljs-comment">// 3.2 è°ƒç”¨çˆ¶æ§ä»¶çš„ invalidateChild</span>
                p.invalidateChild(<span class="hljs-built_in">this</span>, damage);
            }

            <span class="hljs-comment">//...</span>
        }
    }

</code></pre>
<h2 data-id="heading-1">0x01ã€<code>ViewGroup.invalidateChild()</code></h2>
<p><code>ViewGroup</code> ä½œä¸ºçˆ¶å®¹å™¨ï¼Œè´Ÿè´£è®¡ç®—å­ View åœ¨çˆ¶å®¹å™¨åæ ‡ç³»ä¸‹çš„å¤±æ•ˆåŒºåŸŸï¼Œå¹¶ç»§ç»­å¾€ä¸Šä¼ é€’ã€‚</p>
<p>è¿™é‡Œåˆ†åˆ«æœ‰ä¸¤æ¡ç»˜åˆ¶è·¯å¾„ï¼š<strong>ç¡¬ä»¶ç»˜åˆ¶è·¯å¾„å’Œè½¯ä»¶ç»˜åˆ¶è·¯å¾„</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">invalidateChild</span><span class="hljs-params">(View child, <span class="hljs-keyword">final</span> Rect dirty)</span> {
        <span class="hljs-keyword">final</span> <span class="hljs-type">AttachInfo</span> <span class="hljs-variable">attachInfo</span> <span class="hljs-operator">=</span> mAttachInfo;
        <span class="hljs-comment">// 1.**ç¡¬ä»¶ç»˜åˆ¶è·¯å¾„ï¼Œ**ç›®å‰çš„ä¸»æµAndroidç‰ˆæœ¬åº”è¯¥æ˜¯é»˜è®¤å¼€å¯ç¡¬ä»¶åŠ é€Ÿçš„</span>
        <span class="hljs-keyword">if</span> (attachInfo != <span class="hljs-literal">null</span> &amp;&amp; attachInfo.mHardwareAccelerated) {
            <span class="hljs-comment">// HW accelerated fast path</span>
            <span class="hljs-comment">// ç¡¬ä»¶åŠ é€Ÿé€šé“ï¼Œè¿™é‡Œä¼šæ‰§è¡Œåè¿”å›ï¼Œä¸å†ä½¿ç”¨è½¯ä»¶ç»˜åˆ¶ï¼Œè¿™ä¸ªä¹Ÿæ˜¯Viewæ€§èƒ½ä¼˜åŒ–çš„å…³é”®</span>
            onDescendantInvalidated(child, child);
            <span class="hljs-keyword">return</span>;
        }
        
				<span class="hljs-comment">// 2.**è½¯ä»¶ç»˜åˆ¶è·¯å¾„ï¼Œ**ä½¿ç”¨è½¯ä»¶è®¡ç®—å“ªå—åŒºåŸŸæ˜¯éœ€è¦é‡æ–°ç»˜åˆ¶çš„</span>
        <span class="hljs-type">ViewParent</span> <span class="hljs-variable">parent</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>;
        <span class="hljs-keyword">if</span> (attachInfo != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// If the child is drawing an animation, we want to copy this flag onto</span>
            <span class="hljs-comment">// ourselves and the parent to make sure the invalidate request goes</span>
            <span class="hljs-comment">// through</span>
            <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">drawAnimation</span> <span class="hljs-operator">=</span> (child.mPrivateFlags &amp; PFLAG_DRAW_ANIMATION) != <span class="hljs-number">0</span>;

            <span class="hljs-comment">// Check whether the child that requests the invalidate is fully opaque</span>
            <span class="hljs-comment">// Views being animated or transformed are not considered opaque because we may</span>
            <span class="hljs-comment">// be invalidating their old position and need the parent to paint behind them.</span>
            <span class="hljs-type">Matrix</span> <span class="hljs-variable">childMatrix</span> <span class="hljs-operator">=</span> child.getMatrix();
            <span class="hljs-comment">// Mark the child as dirty, using the appropriate flag</span>
            <span class="hljs-comment">// Make sure we do not set both flags at the same time</span>

            <span class="hljs-keyword">if</span> (child.mLayerType != LAYER_TYPE_NONE) {
                mPrivateFlags |= PFLAG_INVALIDATED;
                mPrivateFlags &amp;= ~PFLAG_DRAWING_CACHE_VALID;
            }

            <span class="hljs-keyword">final</span> <span class="hljs-type">int</span>[] location = attachInfo.mInvalidateChildLocation;
            <span class="hljs-comment">// è·å–å­ View çš„ä½ç½®</span>
            location[CHILD_LEFT_INDEX] = child.mLeft;
            location[CHILD_TOP_INDEX] = child.mTop;
            <span class="hljs-comment">// å¦‚æœ View æœ‰æ—‹è½¬ã€ç¼©æ”¾ç­‰å˜æ¢ï¼ˆMatrixï¼‰</span>
            <span class="hljs-keyword">if</span> (!childMatrix.isIdentity() ||
                    (mGroupFlags &amp; ViewGroup.FLAG_SUPPORT_STATIC_TRANSFORMATIONS) != <span class="hljs-number">0</span>) {
                <span class="hljs-type">RectF</span> <span class="hljs-variable">boundingRect</span> <span class="hljs-operator">=</span> attachInfo.mTmpTransformRect;
                boundingRect.set(dirty);
                Matrix transformMatrix;
                <span class="hljs-keyword">if</span> ((mGroupFlags &amp; ViewGroup.FLAG_SUPPORT_STATIC_TRANSFORMATIONS) != <span class="hljs-number">0</span>) {
                    <span class="hljs-type">Transformation</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> attachInfo.mTmpTransformation;
                    <span class="hljs-type">boolean</span> <span class="hljs-variable">transformed</span> <span class="hljs-operator">=</span> getChildStaticTransformation(child, t);
                    <span class="hljs-keyword">if</span> (transformed) {
                        transformMatrix = attachInfo.mTmpMatrix;
                        transformMatrix.set(t.getMatrix());
                        <span class="hljs-keyword">if</span> (!childMatrix.isIdentity()) {
                            transformMatrix.preConcat(childMatrix);
                        }
                    } <span class="hljs-keyword">else</span> {
                        transformMatrix = childMatrix;
                    }
                } <span class="hljs-keyword">else</span> {
                    transformMatrix = childMatrix;
                }
                <span class="hljs-comment">// å°† dirty çŸ©å½¢æŒ‰çŸ©é˜µè¿›è¡Œå˜æ¢æ˜ å°„</span>
                transformMatrix.mapRect(boundingRect);
                <span class="hljs-comment">// é‡æ–°è®¡ç®—å˜æ¢åçš„çŸ©å½¢è¾¹ç•Œ</span>
                dirty.set((<span class="hljs-type">int</span>) Math.floor(boundingRect.left),
                        (<span class="hljs-type">int</span>) Math.floor(boundingRect.top),
                        (<span class="hljs-type">int</span>) Math.ceil(boundingRect.right),
                        (<span class="hljs-type">int</span>) Math.ceil(boundingRect.bottom));
            }
						<span class="hljs-comment">// æ ¸å¿ƒå¾ªç¯ï¼šå‘ä¸Šå†’æ³¡</span>
            <span class="hljs-keyword">do</span> {
                <span class="hljs-type">View</span> <span class="hljs-variable">view</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
                <span class="hljs-keyword">if</span> (parent <span class="hljs-keyword">instanceof</span> View) {
                    view = (View) parent;
                }
								<span class="hljs-comment">// åŒæ­¥åŠ¨ç”»çŠ¶æ€</span>
                <span class="hljs-keyword">if</span> (drawAnimation) {
                    <span class="hljs-keyword">if</span> (view != <span class="hljs-literal">null</span>) {
                        view.mPrivateFlags |= PFLAG_DRAW_ANIMATION;
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (parent <span class="hljs-keyword">instanceof</span> ViewRootImpl) {
                        ((ViewRootImpl) parent).mIsAnimating = <span class="hljs-literal">true</span>;
                    }
                }

                <span class="hljs-comment">// If the parent is dirty opaque or not dirty, mark it dirty with the opaque</span>
                <span class="hljs-comment">// flag coming from the child that initiated the invalidate</span>
                <span class="hljs-comment">// æ ‡è®°å½“å‰å±‚çº§ä¸ºè„åŒºåŸŸ DIRTY</span>
                <span class="hljs-keyword">if</span> (view != <span class="hljs-literal">null</span>) {
                    <span class="hljs-keyword">if</span> ((view.mPrivateFlags &amp; PFLAG_DIRTY_MASK) != PFLAG_DIRTY) {
                        view.mPrivateFlags = (view.mPrivateFlags &amp; ~PFLAG_DIRTY_MASK) | PFLAG_DIRTY;
                    }
                }

								<span class="hljs-comment">// å‘ä¸Šé€’å½’ï¼Œå¹¶è·å–ä¸‹ä¸€ä¸ªçˆ¶èŠ‚ç‚¹</span>
                parent = parent.invalidateChildInParent(location, dirty);
                <span class="hljs-keyword">if</span> (view != <span class="hljs-literal">null</span>) {
                    <span class="hljs-comment">// Account for transform on current parent</span>
                    <span class="hljs-comment">// å¤„ç†çˆ¶èŠ‚ç‚¹çš„ Matrix å˜æ¢</span>
                    <span class="hljs-type">Matrix</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> view.getMatrix();
                    <span class="hljs-keyword">if</span> (!m.isIdentity()) {
                        <span class="hljs-type">RectF</span> <span class="hljs-variable">boundingRect</span> <span class="hljs-operator">=</span> attachInfo.mTmpTransformRect;
                        boundingRect.set(dirty);
                        m.mapRect(boundingRect);
                        <span class="hljs-comment">// æ›´æ–° dirty çŸ©å½¢åŒºåŸŸ</span>
                        dirty.set((<span class="hljs-type">int</span>) Math.floor(boundingRect.left),
                                (<span class="hljs-type">int</span>) Math.floor(boundingRect.top),
                                (<span class="hljs-type">int</span>) Math.ceil(boundingRect.right),
                                (<span class="hljs-type">int</span>) Math.ceil(boundingRect.bottom));
                    }
                }
            } <span class="hljs-keyword">while</span> (parent != <span class="hljs-literal">null</span>);
        }
    }
</code></pre>
<h2 data-id="heading-2">0x02ã€<code>ViewGroup.onDescendantInvalidated()</code> ç¡¬ä»¶ç»˜åˆ¶è·¯å¾„</h2>
<p>å¯ä»¥çœ‹åˆ°<strong>ç¡¬ä»¶åŠ é€Ÿ</strong>å¼€å¯åçš„é‡ç»˜è·¯å¾„ã€‚ç›¸æ¯”äºä¹‹å‰åˆ†æçš„ <code>invalidateChild</code>ï¼ˆè½¯ä»¶ç»˜åˆ¶è·¯å¾„ï¼‰ï¼Œå®ƒçš„é€»è¾‘æå…¶ç²¾ç®€ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDescendantInvalidated</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> View child, <span class="hljs-meta">@NonNull</span> View target)</span> {
        <span class="hljs-comment">/*
         * HW-only, Rect-ignoring damage codepath
         *
         * We don't deal with rectangles here, since RenderThread native code computes damage for
         * everything drawn by HWUI (and SW layer / drawing cache doesn't keep track of damage area)
         */</span>

        <span class="hljs-comment">// if set, combine the animation flag into the parent</span>
        mPrivateFlags |= (target.mPrivateFlags &amp; PFLAG_DRAW_ANIMATION);
				<span class="hljs-comment">// è„æ ‡è®°å¤„ç†</span>
        <span class="hljs-keyword">if</span> ((target.mPrivateFlags &amp; ~PFLAG_DIRTY_MASK) != <span class="hljs-number">0</span>) {
            <span class="hljs-comment">// We lazily use PFLAG_DIRTY, since computing opaque isn't worth the potential</span>
            <span class="hljs-comment">// optimization in provides in a DisplayList world.</span>
            mPrivateFlags = (mPrivateFlags &amp; ~PFLAG_DIRTY_MASK) | PFLAG_DIRTY;

            <span class="hljs-comment">// simplified invalidateChildInParent behavior: clear cache validity to be safe...</span>
            mPrivateFlags &amp;= ~PFLAG_DRAWING_CACHE_VALID;
        }

        <span class="hljs-comment">// ... and mark inval if in software layer that needs to repaint (hw handled in native)</span>
        <span class="hljs-comment">// å¦‚æœæŸä¸ªçˆ¶ View è®¾ç½®äº† setLayerType(LAYER_TYPE_SOFTWARE)</span>
        <span class="hljs-comment">// è¿™ä¸ªçˆ¶ View å°±å¿…é¡»åƒæ™®é€š View ä¸€æ ·èµ°å®Œæ•´çš„ invalidate æµç¨‹</span>
        <span class="hljs-comment">// å› ä¸ºå®ƒéœ€è¦ CPU é‡æ–°æŠŠå­ View ç»˜åˆ¶åˆ°å®ƒçš„ Bitmap ç¼“å­˜é‡Œ</span>
        <span class="hljs-keyword">if</span> (mLayerType == LAYER_TYPE_SOFTWARE) {
            <span class="hljs-comment">// Layered parents should be invalidated. Escalate to a full invalidate (and note that</span>
            <span class="hljs-comment">// we do this after consuming any relevant flags from the originating descendant)</span>
            mPrivateFlags |= PFLAG_INVALIDATED | PFLAG_DIRTY;
            target = <span class="hljs-built_in">this</span>;
        }
				<span class="hljs-comment">// é€’å½’å‘ä¸Šä¼ é€’,ä¸€ç›´ä¼ é€’åˆ° ViewRootImpl çš„ onDescendantInvalidated</span>
        <span class="hljs-keyword">if</span> (mParent != <span class="hljs-literal">null</span>) {
            mParent.onDescendantInvalidated(<span class="hljs-built_in">this</span>, target);
        }
    }

</code></pre>
<p>ç¡¬ä»¶åŠ é€Ÿä¸‹ï¼Œè„åŒºåŸŸçš„è®¡ç®—äº¤ç»™äº†åº•å±‚çš„ RenderThread å’Œ GPUï¼Œè€Œä¸æ˜¯åœ¨ Java å±‚æ‰‹åŠ¨ç®—çŸ©å½¢ã€‚</p>
<p>åœ¨è½¯ä»¶ç»˜åˆ¶æ—¶ï¼ŒCPU éœ€è¦çŸ¥é“ç²¾ç¡®çš„ <code>Rect</code> åŒºåŸŸï¼Œä»¥ä¾¿åªå¯¹è¯¥åŒºåŸŸè¿›è¡Œåƒç´ å¡«å……ã€‚ä½†åœ¨ç¡¬ä»¶åŠ é€Ÿï¼ˆHWUIï¼‰ä¸­ï¼š</p>
<ul>
<li>æ¯ä¸ª View éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ <strong><code>RenderNode</code></strong>ï¼ˆåœ¨ Native å±‚ï¼‰ã€‚</li>
<li>View çš„ç»˜åˆ¶æŒ‡ä»¤è¢«è®°å½•åœ¨ <strong><code>DisplayList</code></strong> ä¸­ã€‚</li>
<li><strong><code>RenderThread</code>ï¼ˆæ¸²æŸ“çº¿ç¨‹ï¼‰</strong> çŸ¥é“æ‰€æœ‰ View çš„å±‚çº§å’Œä½ç½®ã€‚å½“æŸä¸ª View å¤±æ•ˆæ—¶ï¼Œæ¸²æŸ“çº¿ç¨‹ä¼šè‡ªåŠ¨åˆå¹¶å—å½±å“çš„åŒºåŸŸã€‚å› æ­¤ï¼ŒJava å±‚ä¸éœ€è¦è´¹åŠ›å»ç®—åæ ‡åç§»å’ŒçŸ©å½¢äº¤é›†ï¼Œåªéœ€è¦å‘ŠçŸ¥ç³»ç»Ÿï¼š<strong>è¿™ä¸ªViewå¤±æ•ˆäº†ï¼Œéœ€è¦æ›´æ–°</strong>ã€‚</li>
</ul>
<h2 data-id="heading-3">0x03ã€<code>ViewRootImpl</code> å†’æ³¡çš„ç»ˆç‚¹</h2>
<h3 data-id="heading-4"><strong>3.1 è½¯ä»¶ç»˜åˆ¶è·¯å¾„è®¡ç®—çš„ç»ˆç‚¹</strong>: <code>ViewRootImpl.invalidateChildInParent()</code></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> ViewParent <span class="hljs-title function_">invalidateChildInParent</span><span class="hljs-params">(<span class="hljs-type">int</span>[] location, Rect dirty)</span> {
        checkThread();
        <span class="hljs-keyword">if</span> (DEBUG_DRAW) Log.v(mTag, <span class="hljs-string">"Invalidate child: "</span> + dirty);
				<span class="hljs-comment">// // dirty ä¸º null ä»£è¡¨å…¨é‡åˆ·æ–°</span>
        <span class="hljs-keyword">if</span> (dirty == <span class="hljs-literal">null</span>) {
            invalidate();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (dirty.isEmpty() &amp;&amp; !mIsAnimating) {
		        <span class="hljs-comment">// åŒºåŸŸä¸ºç©ºä¸”æ²¡åŠ¨ç”»ï¼Œç›´æ¥æ‹¦æˆªï¼Œä¸è§¦å‘åˆ·æ–°</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
				<span class="hljs-comment">// å¤„ç†æ»šåŠ¨åç§»</span>
        <span class="hljs-keyword">if</span> (mCurScrollY != <span class="hljs-number">0</span> || mTranslator != <span class="hljs-literal">null</span>) {
            mTempRect.set(dirty);
            dirty = mTempRect;
            <span class="hljs-keyword">if</span> (mCurScrollY != <span class="hljs-number">0</span>) {
                dirty.offset(<span class="hljs-number">0</span>, -mCurScrollY);
            }
            <span class="hljs-keyword">if</span> (mTranslator != <span class="hljs-literal">null</span>) {
                mTranslator.translateRectInAppWindowToScreen(dirty);
            }
            <span class="hljs-keyword">if</span> (mAttachInfo.mScalingRequired) {
                dirty.inset(-<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>);
            }
        }
				<span class="hljs-comment">// è§¦å‘åˆ·æ–°,æ­¤æ–¹æ³•å†…éƒ¨ä¼šè°ƒç”¨ scheduleTraversals()ã€‚</span>
        invalidateRectOnScreen(dirty);
				<span class="hljs-comment">// è¿”å› nullï¼Œå‘ŠçŸ¥ ViewGroup å†’æ³¡å¾ªç¯ç»“æŸ</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">invalidateRectOnScreen</span><span class="hljs-params">(Rect dirty)</span> {
        <span class="hljs-keyword">if</span> (DEBUG_DRAW) Log.v(mTag, <span class="hljs-string">"invalidateRectOnScreen: "</span> + dirty);
        <span class="hljs-keyword">final</span> <span class="hljs-type">Rect</span> <span class="hljs-variable">localDirty</span> <span class="hljs-operator">=</span> mDirty;

        <span class="hljs-comment">// Add the new dirty rect to the current one</span>
        <span class="hljs-comment">// åˆå¹¶è„åŒºåŸŸ</span>
        localDirty.union(dirty.left, dirty.top, dirty.right, dirty.bottom);
        <span class="hljs-comment">// Intersect with the bounds of the window to skip</span>
        <span class="hljs-comment">// updates that lie outside of the visible region</span>
        <span class="hljs-keyword">final</span> <span class="hljs-type">float</span> <span class="hljs-variable">appScale</span> <span class="hljs-operator">=</span> mAttachInfo.mApplicationScale;
        <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">intersected</span> <span class="hljs-operator">=</span> localDirty.intersect(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>,
                (<span class="hljs-type">int</span>) (mWidth * appScale + <span class="hljs-number">0.5f</span>), (<span class="hljs-type">int</span>) (mHeight * appScale + <span class="hljs-number">0.5f</span>));
        <span class="hljs-keyword">if</span> (!intersected) {
            localDirty.setEmpty();
        }
        <span class="hljs-keyword">if</span> (!mWillDrawSoon &amp;&amp; (intersected || mIsAnimating)) {
		        <span class="hljs-comment">// æœ€ç»ˆè§¦å‘è°ƒåº¦éå†</span>
            scheduleTraversals();
        }
    }
</code></pre>
<h3 data-id="heading-5"><strong>3.2 ç¡¬ä»¶ç»˜åˆ¶è·¯å¾„ç»ˆç‚¹ï¼š</strong><code>ViewRootImpl.onDescendantInvalidated()</code></h3>
<p>ä¸è½¯ä»¶è·¯å¾„é‚£ç§ç²¾ç»†è®¡ç®—çŸ©å½¢ã€å¤„ç†æ»šåŠ¨åç§»çš„é€»è¾‘ç›¸æ¯”ï¼Œç¡¬ä»¶åŠ é€Ÿè·¯å¾„çš„ç»ˆç‚¹æ˜¾å¾—æå…¶â€œç®€å•ç²—æš´â€çš„ã€‚è¿™ç§ç®€åŒ–æ­£æ˜¯ç¡¬ä»¶åŠ é€Ÿæ€§èƒ½ä¼˜åŠ¿çš„ä½“ç°ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDescendantInvalidated</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> View child, <span class="hljs-meta">@NonNull</span> View descendant)</span> {
        <span class="hljs-keyword">if</span> (sToolkitEnableInvalidateCheckThreadFlagValue) {
            checkThread();
        }
        <span class="hljs-keyword">if</span> ((descendant.mPrivateFlags &amp; PFLAG_DRAW_ANIMATION) != <span class="hljs-number">0</span>) {
            mIsAnimating = <span class="hljs-literal">true</span>;
        }
        invalidate();
    }

    <span class="hljs-meta">@UnsupportedAppUsage</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">invalidate</span><span class="hljs-params">()</span> {
		    <span class="hljs-comment">// å…¨é‡æ ‡è®°è„åŒºåŸŸ</span>
        mDirty.set(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, mWidth, mHeight);
        <span class="hljs-keyword">if</span> (!mWillDrawSoon) {
		        <span class="hljs-comment">// æœ€ç»ˆè§¦å‘è°ƒåº¦éå†ï¼Œ</span>
            scheduleTraversals();
        }
    }
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ä¸ç®¡æ˜¯è½¯ä»¶ç»˜åˆ¶è¿˜æ˜¯ç¡¬ä»¶ç»˜åˆ¶æœ€ç»ˆéƒ½ä¼šè§¦å‘ <code>scheduleTraversals()</code> ã€‚</p>
<pre><code class="hljs language-java" lang="java">		<span class="hljs-keyword">void</span> <span class="hljs-title function_">scheduleTraversals</span><span class="hljs-params">()</span> {
				<span class="hljs-comment">// é˜²æŠ–æœºåˆ¶ï¼Œå¯ä»¥é¿å…åœ¨åŒä¸€å¸§æ—¶é—´å†…å¤šæ¬¡è°ƒç”¨invalidate(),ä¹Ÿåªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</span>
        <span class="hljs-keyword">if</span> (!mTraversalScheduled) {
            mTraversalScheduled = <span class="hljs-literal">true</span>;
            <span class="hljs-comment">// è®¾ç½®åŒæ­¥å±éšœï¼Œä¸»çº¿ç¨‹å°†æš‚æ—¶åœæ­¢å¤„ç†æ™®é€šçš„ Handler æ¶ˆæ¯ï¼ˆå¦‚ç‚¹å‡»äº‹ä»¶ã€æ—¥å¿—ã€ä¸šåŠ¡é€»è¾‘ï¼‰ï¼Œ</span>
            <span class="hljs-comment">// ç›´åˆ°ç»˜åˆ¶å®Œæˆåç§»é™¤å±éšœã€‚è¿™ç¡®ä¿äº† UI æ¸²æŸ“æ¶ˆæ¯ä¸€æ—¦åˆ°æ¥ï¼Œèƒ½ç«‹åˆ»è·å¾— CPU æ‰§è¡Œæƒã€‚</span>
            mTraversalBarrier = mHandler.getLooper().getQueue().postSyncBarrier();
            <span class="hljs-comment">// æ³¨å†Œ VSYNC ä¿¡å·å›è°ƒ</span>
            mChoreographer.postCallback(
                    Choreographer.CALLBACK_TRAVERSAL, mTraversalRunnable, <span class="hljs-literal">null</span>);
            <span class="hljs-comment">// é€šçŸ¥æ¸²æŸ“å¼•æ“</span>
            notifyRendererOfFramePending();
            <span class="hljs-comment">// å”¤é†’ç³»ç»Ÿ</span>
            <span class="hljs-comment">// æ­¤æ–¹æ³•å¯ä»¥ç»´æŒé«˜èƒ½è€—çŠ¶æ€ï¼Œç¡®ä¿è¿™ä¸€å¸§èƒ½å¹³æ»‘åœ°ç”»å‡ºæ¥ï¼Œè€Œä¸ä¼šå› ä¸ºç³»ç»Ÿé™é¢‘å¯¼è‡´æ‰å¸§</span>
            pokeDrawLockIfNeeded();
        }
    }
</code></pre>
<p><code>Choreographer</code> ä¼šç­‰å¾…ä¸‹ä¸€ä¸ªç¡¬ä»¶ VSYNC ä¿¡å·ã€‚ä¿¡å·åˆ°è¾¾åï¼Œå®ƒä¼šå‘é€ä¸€ä¸ª<strong>å¼‚æ­¥æ¶ˆæ¯</strong>æ¥æ‰§è¡Œ <code>mTraversalRunnable</code>ã€‚</p>
<p><strong><code>mTraversalRunnable</code></strong>ï¼šè¿™ä¸ª Runnable å†…éƒ¨æ‰§è¡Œçš„å°±æ˜¯è‘—åçš„ <code>doTraversal()</code> -&gt; <code>performTraversals()</code>ï¼ˆåŒ…å« Measureã€Layoutã€Draw æµç¨‹ï¼‰</p>
<pre><code class="hljs language-java" lang="java">		<span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TraversalRunnable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
            doTraversal();
        }
    }
    
		<span class="hljs-keyword">final</span> <span class="hljs-type">TraversalRunnable</span> <span class="hljs-variable">mTraversalRunnable</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TraversalRunnable</span>();

		<span class="hljs-keyword">void</span> <span class="hljs-title function_">doTraversal</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (mTraversalScheduled) {
            mTraversalScheduled = <span class="hljs-literal">false</span>;
            <span class="hljs-comment">// æ³¨æ„åœ¨VSYNCä¿¡å·åˆ°æ¥åé©¬ä¸Šå°±ç§»é™¤äº†åŒæ­¥å±éšœ</span>
            <span class="hljs-comment">// å¦‚æœæ²¡æœ‰ç§»é™¤ï¼Œä¼šå¯¼è‡´æ­£å¸¸çš„æ™®é€šæ¶ˆæ¯ï¼ˆå¦‚äº‹ä»¶ã€æ—¥å¿—ã€ä¸šåŠ¡é€»è¾‘ï¼‰å¯èƒ½æ— æ³•æ­£å¸¸æ‰§è¡Œä»è€ŒANR</span>
            mHandler.getLooper().getQueue().removeSyncBarrier(mTraversalBarrier);

            <span class="hljs-keyword">if</span> (mProfile) {
                Debug.startMethodTracing(<span class="hljs-string">"ViewAncestor"</span>);
            }
						<span class="hljs-comment">// æ‰§è¡Œæµ‹é‡ã€å¸ƒå±€ã€ç»˜åˆ¶åŠ¨ä½œ</span>
            performTraversals();

            <span class="hljs-keyword">if</span> (mProfile) {
                Debug.stopMethodTracing();
                mProfile = <span class="hljs-literal">false</span>;
            }
        }
    }
    
</code></pre>
<p>é€šçŸ¥æ¸²æŸ“çº¿ç¨‹</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-comment">/**
     * Notifies the HardwareRenderer that a new frame will be coming soon.
     * Currently only {<span class="hljs-doctag">@link</span> ThreadedRenderer} cares about this, and uses
     * this knowledge to adjust the scheduling of off-thread animations
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">notifyRendererOfFramePending</span><span class="hljs-params">()</span> {
		    <span class="hljs-comment">// é€šçŸ¥æ¸²æŸ“çº¿ç¨‹æ–°çš„ä¸€å¸§æ•°æ®é©¬ä¸Šå°±è¦åˆ°äº†ï¼Œè¿™ä¸ªæ–¹æ³•æ‰§è¡Œä¹‹åä¼šè°ƒç”¨nativeæ–¹æ³•</span>
        <span class="hljs-keyword">if</span> (mAttachInfo.mThreadedRenderer != <span class="hljs-literal">null</span>) {
            mAttachInfo.mThreadedRenderer.notifyFramePending();
        }
    }
</code></pre>
<p>æ¸²æŸ“çº¿ç¨‹æ‰§è¡Œnativeæ–¹æ³• <code>HardwareRenderer.notifyFramePending()</code> ã€‚</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-comment">/**
     * Notifies the hardware renderer that a call to {<span class="hljs-doctag">@link</span> FrameRenderRequest#syncAndDraw()} will
     * be coming soon. This is used to help schedule when RenderThread-driven animations will
     * happen as the renderer wants to avoid producing more than one frame per vsync signal.
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">notifyFramePending</span><span class="hljs-params">()</span> {
        nNotifyFramePending(mNativeProxy);
    }
</code></pre>
<p>æ¸²æŸ“çº¿ç¨‹å°†UIçº¿ç¨‹çš„ç»˜åˆ¶æ“ä½œè½¬æˆGPUæ‰§è¡ŒæŒ‡ä»¤ï¼ŒGPUæ¸²æŸ“åï¼ˆå¡«å……å›¾å½¢ç¼“å†²ï¼‰å°±ä¼šäº¤ç»™<code>SurfaceFlinger</code>è¿›è¡Œå›¾å½¢åˆæˆï¼Œæœ€åäº¤ç»™æ˜¾ç¤ºé©±åŠ¨è¿›è¡Œå±å¹•æ˜¾ç¤ºã€‚</p>
<h2 data-id="heading-6">0x04ã€å®è§‚æµç¨‹æ€»ç»“</h2>
<p>å°†æ•´ä¸ª <code>View.invalidate()</code> åˆ° <code>ViewRootImpl.scheduleTraversals()</code> çš„è¿‡ç¨‹ä¸²è”èµ·æ¥ï¼Œå…¶æœ¬è´¨æ˜¯ä¸€æ¬¡<strong>è¯·æ±‚çš„å‘ä¸Šæº¯æºå†å‘ä¸‹æ´¾å‘ç»˜åˆ¶ä¿¡å·çš„è°ƒåº¦æœºåˆ¶ã€‚</strong></p>
<p>å‘ä¸Šæº¯æºï¼šä¸åœåœ°å»æ‰¾çˆ¶Viewç›´åˆ°æ‰¾åˆ°ViewRootImplã€‚</p>
<p>å‘ä¸‹æ´¾å‘ï¼šé€šè¿‡VSYNCä¿¡å·æ‰§è¡Œ Viewæ ‘çš„æµ‹é‡ã€å¸ƒå±€å’Œç»˜åˆ¶æ“ä½œã€‚</p>








































<table><thead><tr><th><strong>æ­¥éª¤</strong></th><th><strong>ç»„ä»¶</strong></th><th><strong>è¡Œä¸º</strong></th></tr></thead><tbody><tr><td><strong>1. å‘èµ·</strong></td><td><code>View</code></td><td>è°ƒç”¨ <code>invalidate()</code>ã€‚</td></tr><tr><td><strong>2. å†’æ³¡</strong></td><td><code>ViewGroup</code></td><td>æ ‡è®° <code>PFLAG_DIRTY</code>ï¼Œå‘ä¸Šå¯»æ‰¾ <code>ViewRootImpl</code>ã€‚</td></tr><tr><td><strong>3. è°ƒåº¦</strong></td><td><code>ViewRootImpl</code></td><td>æ‰§è¡Œ <code>scheduleTraversals()</code>ã€‚</td></tr><tr><td><strong>4. å±è”½</strong></td><td><code>MessageQueue</code></td><td>æ’å…¥ <strong>åŒæ­¥å±éšœ</strong>ï¼Œæ‹¦æˆªæ™®é€šæ¶ˆæ¯ã€‚</td></tr><tr><td><strong>5. ç­‰å¾…</strong></td><td><code>Choreographer</code></td><td>ç­‰å¾…ç¡¬ä»¶ <strong>VSYNC ä¿¡å·</strong>ã€‚</td></tr><tr><td><strong>6. å›è°ƒ</strong></td><td><code>mTraversalRunnable</code></td><td>ä¿¡å·åˆ°è¾¾ï¼Œæ‰§è¡Œ <code>performTraversals()</code>ã€‚</td></tr></tbody></table>
<p><strong>å¼•ç”¨</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcs.android.com%2Fandroid%2Fplatform%2Fsuperproject%2Fmain%2F%2B%2Fmain%3Aframeworks%2Fbase%2Fcore%2Fjava%2Fandroid%2Fview%2FChoreographer.java" target="_blank" title="https://cs.android.com/android/platform/superproject/main/+/main:frameworks/base/core/java/android/view/Choreographer.java" ref="nofollow noopener noreferrer">cs.android.com/android/plaâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcs.android.com%2Fandroid%2Fplatform%2Fsuperproject%2Fmain%2F%2B%2Fmain%3Aframeworks%2Fbase%2Fcore%2Fjava%2Fandroid%2Fview%2FView.java" target="_blank" title="https://cs.android.com/android/platform/superproject/main/+/main:frameworks/base/core/java/android/view/View.java" ref="nofollow noopener noreferrer">cs.android.com/android/plaâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcs.android.com%2Fandroid%2Fplatform%2Fsuperproject%2Fmain%2F%2B%2Fmain%3Aframeworks%2Fbase%2Fcore%2Fjava%2Fandroid%2Fview%2FViewGroup.java" target="_blank" title="https://cs.android.com/android/platform/superproject/main/+/main:frameworks/base/core/java/android/view/ViewGroup.java" ref="nofollow noopener noreferrer">cs.android.com/android/plaâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­¦ä¹ ä¸€äº›å¸¸ç”¨çš„æ··åˆæ¨¡å¼ä¹‹BlendMode.srcOut]]></title>    <link>https://juejin.cn/post/7592159803410153508</link>    <guid>https://juejin.cn/post/7592159803410153508</guid>    <pubDate>2026-01-07T07:42:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592159803410153508" data-draft-id="7592040819819151401" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­¦ä¹ ä¸€äº›å¸¸ç”¨çš„æ··åˆæ¨¡å¼ä¹‹BlendMode.srcOut"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2026-01-07T07:42:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç«æŸ´å°±æ˜¯æˆ‘"/> <meta itemprop="url" content="https://juejin.cn/user/272334614705575"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­¦ä¹ ä¸€äº›å¸¸ç”¨çš„æ··åˆæ¨¡å¼ä¹‹BlendMode.srcOut
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/272334614705575/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç«æŸ´å°±æ˜¯æˆ‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T07:42:47.000Z" title="Wed Jan 07 2026 07:42:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>1 SrcOut</p>
<p>ç”¨é€”ï¼š</p>
<p><code>Keeps the source pixels that do not cover destination pixels. Discards source pixels that cover destination pixels. Discards all destination pixels.</code></p>
<p>è®¡ç®—å…¬å¼ï¼š</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76ea23f6128349d3a704d74b54febde7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Gr5p-05bCx5piv5oiR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768376567&amp;x-signature=VIhu6qDaJzN7WKtWH0BVRMYahGU%3D" alt="image.png" width="30%" loading="lazy"/>
<p>æµ‹è¯•ä»£ç :</p>
<pre><code class="hljs language-js" lang="js"> @override
  <span class="hljs-keyword">void</span> <span class="hljs-title function_">paint</span>(<span class="hljs-params">Canvas canvas, Size size</span>) {
    <span class="hljs-keyword">var</span> width = size.<span class="hljs-property">width</span>;
    <span class="hljs-keyword">var</span> height = size.<span class="hljs-property">height</span>;

    canvas.<span class="hljs-title function_">saveLayer</span>(<span class="hljs-title class_">Rect</span>.<span class="hljs-title function_">fromLTWH</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, width, height), <span class="hljs-title class_">Paint</span>());
    canvas.<span class="hljs-title function_">drawRect</span>(
      <span class="hljs-title class_">Rect</span>.<span class="hljs-title function_">fromLTWH</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, width, height),
      <span class="hljs-title class_">Paint</span>()..<span class="hljs-property">color</span> = <span class="hljs-title class_">Colors</span>.<span class="hljs-property">red</span>.<span class="hljs-title function_">withOpacity</span>(<span class="hljs-number">1</span>), <span class="hljs-comment">// åŠé€æ˜çº¢è‰²</span>
    );

    <span class="hljs-keyword">var</span> srcPath = <span class="hljs-title class_">Path</span>();
    srcPath.<span class="hljs-title function_">addRect</span>(<span class="hljs-title class_">Rect</span>.<span class="hljs-title function_">fromLTWH</span>(width/<span class="hljs-number">2</span> - <span class="hljs-number">30</span>, height/<span class="hljs-number">2</span> - <span class="hljs-number">30</span>, <span class="hljs-number">60</span>, <span class="hljs-number">60</span>));
    <span class="hljs-keyword">var</span> srcPaint = <span class="hljs-title class_">Paint</span>()
      ..<span class="hljs-property">color</span> = <span class="hljs-title class_">Colors</span>.<span class="hljs-property">blue</span> <span class="hljs-comment">// æºé¢œè‰²ï¼šè“è‰²</span>
      ..<span class="hljs-property">style</span> = <span class="hljs-title class_">PaintingStyle</span>.<span class="hljs-property">stroke</span> <span class="hljs-comment">// å¡«å……æ¨¡å¼</span>
      ..<span class="hljs-property">strokeWidth</span> = <span class="hljs-number">10</span>
      ..<span class="hljs-property">blendMode</span> = <span class="hljs-title class_">BlendMode</span>.<span class="hljs-property">srcOut</span>; <span class="hljs-comment">// æ··åˆæ¨¡å¼</span>
    canvas.<span class="hljs-title function_">drawPath</span>(srcPath, srcPaint);
    canvas.<span class="hljs-title function_">restore</span>();
  }
</code></pre>
<p>ç¬¬ä¸€ä¸ªçŸ©å½¢å°±æ˜¯dst ç¬¬äºŒä¸ªè¾¹æ¡†å°±æ˜¯src</p>
<p>å‚è€ƒä¸Šé¢çš„å…¬å¼å¯ä»¥å¾—å‡º</p>
<p>a = (1 - dst.a) * src.a = ï¼ˆ1-1ï¼‰*1 = 0</p>
<p>c = (1 - dst.a) * src.c = 0</p>
<p>æ‰€ä»¥æ··åˆçš„ç»“æœå°±æ˜¯"00000000" å°±æ˜¯é€æ˜çš„ã€‚æ‰€ä»¥æ•ˆæœå¦‚ä¸‹</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/147fe500818e46bba95cab3abc518f75~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Gr5p-05bCx5piv5oiR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768376567&amp;x-signature=V7QtAt0CbxmE%2B0unc7aSUb8g7y0%3D" alt="image.png" width="30%" loading="lazy"/>
<p>é€šè¿‡ä¿®æ”¹srcçš„alpha(é€æ˜åº¦)å±æ€§ï¼Œä¹Ÿå¯ä»¥å®ç°ä¸åŒçš„æ•ˆæœã€‚æ¯”å¦‚æ”¹æˆ0.7å°±æ˜¯ä¸‹é¢çš„æ•ˆæœã€‚æŒ‰å…¬å¼è®¡ç®—æ··åˆåŒºçš„é€æ˜åº¦å°±æ˜¯0.3,è‰²å€¼å°±æ˜¯ blue * 0.3</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b28eae499ceb4b19bdcbaa82c1841166~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Gr5p-05bCx5piv5oiR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768376567&amp;x-signature=tTeKtCo3qsNx77iecr7eTHZOotc%3D" alt="image.png" width="30%" loading="lazy"/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ArkUI-X 6.0 è·¨å¹³å°æ¡†æ¶èƒ½å¦å–ä»£ Flutterï¼Ÿ]]></title>    <link>https://juejin.cn/post/7592170706026446883</link>    <guid>https://juejin.cn/post/7592170706026446883</guid>    <pubDate>2026-01-07T08:01:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592170706026446883" data-draft-id="7592170706026381347" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ArkUI-X 6.0 è·¨å¹³å°æ¡†æ¶èƒ½å¦å–ä»£ Flutterï¼Ÿ"/> <meta itemprop="keywords" content="Flutter,å®¢æˆ·ç«¯,ArkUI"/> <meta itemprop="datePublished" content="2026-01-07T08:01:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜è€åˆ˜"/> <meta itemprop="url" content="https://juejin.cn/user/662360127965769"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ArkUI-X 6.0 è·¨å¹³å°æ¡†æ¶èƒ½å¦å–ä»£ Flutterï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/662360127965769/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜è€åˆ˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T08:01:57.000Z" title="Wed Jan 07 2026 08:01:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯è€åˆ˜</strong></p>
<p>æœ€è¿‘ArkUI-X 6.0.0 Release ç‰ˆæœ¬æ­£å¼å‘å¸ƒäº†ã€‚</p>
<p>å¾ˆå¤šå…„å¼Ÿè·‘æ¥é—®æˆ‘ï¼š</p>
<p>â€œè€åˆ˜ï¼ŒArkUI ç°åœ¨çš„è·¨å¹³å°èƒ½åŠ›èƒ½ä¸èƒ½å–ä»£ Flutterï¼Ÿâ€</p>
<p>â€œæˆ‘æ˜¯ä¸æ˜¯è¯¥å»å­¦ ArkTS äº†ï¼Ÿâ€</p>
<p>å…ˆæŠ›å‡ºæˆ‘çš„æ ¸å¿ƒç»“è®ºï¼Œåˆ«å«Œæ‰å¿ƒï¼š</p>
<p><strong>åœ¨å…¨çƒèŒƒå›´å’Œé€šç”¨åœºæ™¯ä¸‹ï¼ŒçŸ­æœŸå†… ArkUI æ ¹æœ¬æ’¼åŠ¨ä¸äº† Flutter çš„åœ°ä½ã€‚</strong></p>
<p>è¿™ä¸ä»…æ˜¯æŠ€æœ¯é—®é¢˜ï¼Œä¹Ÿæ˜¯ç”Ÿæ€é—®é¢˜ã€‚</p>
<p><strong>åœ¨å›½å†…å¸‚åœºï¼Œå¦‚æœç®—ä¸ŠæŸäº›â€œä¸å¯åçŠ¶â€çš„ç¥ç§˜åŠ›é‡åŠ æŒã€‚</strong></p>
<p>ArkUI è¿˜çœŸæœ‰å¯èƒ½åœ¨ç‰¹å®šé¢†åŸŸæ’•å¼€ä¸€é“å£å­ï¼Œæˆä¸º Flutter çš„æ›¿ä»£è€…ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´ï¼Ÿ</p>
<p>ä»Šå¤©å’±ä»¬å°±ä»ä»£ç ã€æ¸²æŸ“ã€æ€§èƒ½ã€ç”Ÿæ€è¿™å‡ ä¸ªå®æ‰“å®çš„ç»´åº¦ã€‚</p>
<p>æ¥ä¸€åœº ArkUI-X ä¸ Flutter çš„ç¡¬ç¢°ç¡¬ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ æ¸²æŸ“æœºåˆ¶ä¸æ€§èƒ½ï¼šæ‹™åŠ£çš„æ¨¡ä»¿è€…è¿˜æ˜¯ä¼˜ç§€çš„åŒè¡Œè€…ï¼Ÿ</h2>
<p>èŠå®Œå¼€åœºç™½ï¼Œå’±ä»¬ç›´æ¥åˆ‡å…¥è¦å®³ã€‚</p>
<p>æ¸²æŸ“å¼•æ“ï¼Œè¿™æ‰æ˜¯è·¨å¹³å°æ¡†æ¶çš„â€œå¿ƒè„â€ã€‚</p>
<h3 data-id="heading-1">1. éƒ½æ˜¯â€œè‡ªå¸¦å¹²ç²®â€çš„ç‹ äºº</h3>
<p>Flutter ä¸ºä»€ä¹ˆèƒ½ç«ï¼Ÿ</p>
<p>å› ä¸ºå®ƒè‡ªå·±èƒŒç€ç”»æ¿ï¼ˆæ¸²æŸ“å¼•æ“ï¼‰å»åˆ«äººå®¶é‡Œï¼ˆAndroid/iOSï¼‰ç”»ç”»ã€‚</p>
<p>ä¸ç®¡æ˜¯æŒ‰é’®è¿˜æ˜¯åˆ—è¡¨ï¼Œéƒ½æ˜¯å®ƒä¸€ä¸ªåƒç´ ä¸€ä¸ªåƒç´ ç”»å‡ºæ¥çš„ã€‚</p>
<p>ArkUI-X åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œè·Ÿ Flutter ç®€ç›´æ˜¯ä¸€ä¸ªæ¨¡å­é‡Œåˆ»å‡ºæ¥çš„ã€‚</p>
<p>æ¥çœ‹ä¸‹é¢çš„æ¶æ„å›¾ï¼Œä¸èƒ½è¯´æ¯«æ— å…³ç³»ï¼Œåªèƒ½è¯´ä¸€æ¨¡ä¸€æ ·ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f8e14f5f8884c49be1d8e7116f5779a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377716&amp;x-signature=OWseP6Ke3DzenKBYXUzbSOHMqkE%3D" alt="" loading="lazy"/></p>
<p>è¿™ç§æ¶æ„çš„ä¼˜åŠ¿å¾ˆæ˜æ˜¾ï¼š</p>
<p>å¤šç«¯ä¸€è‡´æ€§æé«˜ã€‚</p>
<p>ä½ åœ¨ iPhone ä¸Šç”»çš„åœ†ï¼Œåˆ°äº† Android ä¹Ÿå°±æ˜¯è¿™ä¸ªåœ†ï¼Œä¸ä¼šå˜æˆæ¤­åœ†ã€‚</p>
<p>ä¸ç”¨æ‹…å¿ƒè€æ—§æ‰‹æœºç³»ç»Ÿç‰ˆæœ¬ä½ï¼Œå› ä¸ºæ¸²æŸ“é€»è¾‘éƒ½åœ¨ä½ è‡ªå·±çš„åŒ…é‡Œã€‚</p>
<p>ä½†åŠ£åŠ¿ä¹Ÿå¾ˆæ˜æ˜¾ï¼š</p>
<p>åŒ…ä½“ç§¯å¤§ã€‚</p>
<p>èƒŒç€ç”»æ¿å‡ºé—¨ï¼Œè¡Œæèƒ½ä¸é‡å—ï¼Ÿ</p>
<h3 data-id="heading-2">2. Impeller vs Skia</h3>
<p>Flutter æ­£åœ¨å¹²ä¸€ä»¶å¤§äº‹ã€‚</p>
<p>å®ƒåœ¨é€æ¸æŠ›å¼ƒ Skiaï¼Œå…¨é¢æ‹¥æŠ± Impellerã€‚</p>
<p>å› ä¸º Skia è™½ç„¶å¼ºï¼Œä½†åœ¨ç§»åŠ¨ç«¯å®¹æ˜“å‡ºç°â€œç€è‰²å™¨ç¼–è¯‘å¡é¡¿â€ï¼ˆJankï¼‰ã€‚</p>
<p>Impeller æ˜¯ä¸“é—¨ä¸ºç°ä»£ GPUï¼ˆMetal/Vulkanï¼‰è®¾è®¡çš„ï¼Œæ€§èƒ½æ›´çŒ›ï¼Œæ›´ä¸æ»‘ã€‚</p>
<p>åè§‚ ArkUI-Xã€‚</p>
<p>ç›®å‰åœ¨ Android/iOS ä¸Šï¼Œä¸»åŠ›è¿˜æ˜¯ä¾èµ– Skiaã€‚</p>
<p>è¿™å°±æœ‰ç‚¹å°´å°¬äº†ã€‚</p>
<p>Flutter éƒ½è¦æ¢å¼•æ“äº†ï¼ŒArkUI-X è¿˜åœ¨ç”¨äººå®¶ä¸Šä¸€ä»£çš„æ–¹æ¡ˆã€‚</p>
<p>å°±åƒèµ›è½¦æ¯”èµ›ï¼Œå¯¹æ‰‹æ¢äº†æ¶¡è½®å¢å‹ï¼Œä½ è¿˜åœ¨è°ƒæ•™è‡ªç„¶å¸æ°”ã€‚</p>
<p>è™½ç„¶å¤Ÿç”¨ï¼Œä½†æé™æ€§èƒ½ä¸Šï¼Œè‚¯å®šæ˜¯è¦åƒäºçš„ã€‚</p>
<h3 data-id="heading-3">3. æœ€è‡´å‘½çš„â€œç²¾ç¥åˆ†è£‚â€</h3>
<p>è¿™æ˜¯ ArkUI-X ç›®å‰æœ€å¤§çš„éšæ‚£ï¼Œä¹Ÿæ˜¯å¾ˆå¤šå…„å¼Ÿæ²¡æ³¨æ„åˆ°çš„å‘ã€‚</p>
<p>Flutter æ˜¯â€œä¸€è§†åŒä»â€ã€‚</p>
<p>ä¸ç®¡åœ¨ Androidã€iOS è¿˜æ˜¯é¸¿è’™ï¼Œå®ƒéƒ½ç”¨è‡ªå·±çš„å¼•æ“ç”»ã€‚</p>
<p>ArkUI-X æ˜¯â€œçœ‹äººä¸‹èœç¢Ÿâ€ã€‚</p>
<p><strong>åœ¨çº¯é¸¿è’™ï¼ˆOpenHarmonyï¼‰ä¾§ï¼š</strong> ï¼Œå¤§å®¶å¸¸è¯´çš„å¼•æ“å« arkui_ace_engineï¼Œè´Ÿè´£æŠŠ ArkTS å£°æ˜å¼ä»£ç è§£ææˆ Native UIï¼Œå¹¶ç®¡ç†åŠ¨ç”»ã€äº‹ä»¶ã€ç»˜åˆ¶ç®¡çº¿ç­‰ã€‚</p>
<p><strong>åœ¨ Android/iOSï¼š</strong> SDK é‡Œè‡ªå¸¦äº†ä¸€ä»½â€œè£å‰ª+ç§»æ¤ç‰ˆâ€çš„ ACE Engineï¼Œä¸€èˆ¬æ–‡æ¡£é‡Œä¼šå†™ä½œ ArkUI ACE Engine Liteã€‚</p>
<p>Liteç‰ˆæŠŠå¯¹é¸¿è’™ç³»ç»Ÿèƒ½åŠ›çš„ä¾èµ–æ¢æˆäº†å¯¹ Skia + å¹³å° Native çª—å£çš„é€‚é…</p>
<p>è¿™å°±å¯¼è‡´äº†ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼š<strong>åº•å±‚ä¸ä¸€è‡´ã€‚</strong></p>
<p>è¿™ç§â€œåŒæ ‡â€ä¼šå¸¦æ¥ä»€ä¹ˆåæœï¼Ÿ</p>
<p>æˆ‘ç»™ä½ ä»¬åˆ—å‡ ä¸ªå¯èƒ½å‡ºç°çš„æ½œåœ¨åœºæ™¯ï¼ˆåªæ˜¯è¯´æœ‰è¿™ç§éšæ‚£ï¼Œä¸æ˜¯ä¸€å®šä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼‰ï¼š</p>
<p><strong>ç¬¬ä¸€ï¼Œåƒç´ çº§çš„å·®å¼‚ã€‚</strong></p>
<p>è®¾è®¡å¸ˆç»™äº†ä¸€ä¸ªå¸¦ 0.5dp è¾¹æ¡†çš„åœ†è§’æŒ‰é’®ã€‚</p>
<p>åœ¨é¸¿è’™ä¸Šï¼Œç³»ç»Ÿæ¸²æŸ“å¾—å¾ˆé”åˆ©ï¼Œå®Œç¾å¯¹é½åƒç´ ã€‚</p>
<p>åœ¨ Android ä¸ŠæŠ—é”¯é½¿ç®—æ³•ä¸€ç®—ï¼Œå¯èƒ½å°±å˜ç³Šäº†ï¼Œæˆ–è€…çº¿æ¡å˜ç²—äº†ã€‚</p>
<p>ä½ è·Ÿè®¾è®¡å¸ˆè§£é‡Šè¯´è¿™æ˜¯å¼•æ“å·®å¼‚ï¼Ÿ</p>
<p>è®¾è®¡å¸ˆåªä¼šè§‰å¾—ä½ èœã€‚</p>
<p><strong>ç¬¬äºŒï¼Œæ–‡å­—æ’ç‰ˆçš„å™©æ¢¦ã€‚</strong></p>
<p>åšè¿‡è·¨å¹³å°çš„éƒ½çŸ¥é“ï¼Œæ–‡å­—æ¸²æŸ“æ˜¯ç»ˆæ Bossã€‚</p>
<p>é¸¿è’™ç”¨çš„æ˜¯ç³»ç»Ÿçš„æ’ç‰ˆå¼•æ“ã€‚</p>
<p>Android ç«¯ç”¨çš„æ˜¯ ArkUI-X è‡ªå¸¦çš„å­—ä½“æ•´å½¢å™¨ã€‚</p>
<p>ç»“æœå°±æ˜¯ï¼š</p>
<p>åŒæ ·çš„å­—å·ï¼ŒåŒæ ·çš„è¡Œé«˜ã€‚</p>
<p>åœ¨é¸¿è’™ä¸Šåˆšå¥½ä¸€è¡Œæ˜¾ç¤ºå®Œã€‚</p>
<p>åœ¨ Android ä¸Šå¯èƒ½å°±å¤šå‡ºä¸€ä¸ªå­—ï¼Œç»™ä½ æ¢è¡Œäº†ã€‚</p>
<p>å½“ç„¶è¿™ä¸ªæƒ…å†µå¯èƒ½æœ‰ç‚¹å¤¸å¼ äº†ï¼Œä½†æ˜¯åœ¨ä¸€äº›ç‰¹æ®Šåœºæ™¯ä¸‹ï¼Œä¹Ÿä¸æ˜¯å®Œå…¨æ²¡æœ‰å¯èƒ½ã€‚</p>
<p><strong>ç¬¬ä¸‰ï¼Œæ‰‹æ„Ÿçš„â€œææ€–è°·â€ã€‚</strong></p>
<p>æ»‘åŠ¨çš„é˜»å°¼æ„Ÿï¼Œæƒ¯æ€§æ»šåŠ¨çš„è·ç¦»ã€‚</p>
<p>é¸¿è’™ç«¯æ˜¯ç³»ç»Ÿçº§çš„ä¸æ»‘ï¼Œç¬¦åˆé¸¿è’™ç”¨æˆ·çš„è‚Œè‚‰è®°å¿†ã€‚</p>
<p>Android ç«¯æ˜¯ ArkUI-X æ¨¡æ‹Ÿå‡ºæ¥çš„æ‰‹æ„Ÿã€‚</p>
<p>è™½ç„¶åœ¨è¿™ä¸ªç‰ˆæœ¬å·²ç»ä¼˜åŒ–äº†å¾ˆå¤šï¼Œä½†é‚£ç§å¾®å¦™çš„â€œä¸è·Ÿæ‰‹â€æˆ–è€…â€œå¤ªè·Ÿæ‰‹â€ï¼Œ</p>
<p>ä¼šè®©ç”¨æˆ·è§‰å¾—è¿™ä¸ª App â€œæ€ªæ€ªçš„â€ã€‚</p>
<p>æ‰€ä»¥ï¼Œåˆ«çœ‹æ¶æ„å›¾ç”»å¾—åƒã€‚</p>
<p>åœ¨ç»†èŠ‚çš„æ‰“ç£¨ä¸Šï¼ŒArkUI-X è¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ã€‚</p>
<hr/>
<h2 data-id="heading-4">äºŒã€ å¼€å‘è¯­è¨€ä¸ä½“éªŒï¼šDart vs ArkTS</h2>
<ol>
<li>
<p><strong>Flutter (Dart)</strong></p>
<ul>
<li>
<p><strong>ç‰¹ç‚¹</strong>ï¼šä¸“ä¸º UI è®¾è®¡ï¼Œæ”¯æŒæœ‰çŠ¶æ€çƒ­é‡è½½ (Hot Reload)ï¼Œå¼€å‘æ•ˆç‡æé«˜ã€‚</p>
</li>
<li>
<p><strong>é—¨æ§›</strong>ï¼šéœ€è¦å­¦ä¹ ä¸€é—¨æ–°è¯­è¨€ï¼Œè™½ç„¶ç®€å•ä½†ä»æœ‰è®¤çŸ¥æˆæœ¬ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>ArkUI (ArkTS)</strong></p>
<ul>
<li>
<p><strong>ç‰¹ç‚¹</strong>ï¼šåŸºäº TypeScript æ‰©å±•ï¼Œæ‹¥æœ‰åºå¤§çš„å‰ç«¯å¼€å‘è€…åŸºç¡€ã€‚</p>
</li>
<li>
<p><strong>åŒåˆƒå‰‘</strong>ï¼š</p>
<ul>
<li>
<p><strong>åˆ©</strong>ï¼šå‰ç«¯å¼€å‘è€…ä¸Šæ‰‹æå¿«ï¼Œè¯­æ³•äº²åˆ‡ã€‚</p>
</li>
<li>
<p><strong>å¼Š</strong>ï¼šä¸ºæ€§èƒ½ç‰ºç‰²äº†çµæ´»æ€§ï¼ˆStatic Strict Modeï¼‰ï¼Œè™½ç„¶æ˜¯ TS çš„è„¸ï¼Œå´æ˜¯é™æ€çš„å¿ƒï¼Œç¼–ç çº¦æŸè¾ƒå¤šã€‚</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>è€åˆ˜çš„è§‚ç‚¹</strong></p>
<p>æˆ‘è§‰å¾—ArkTSå±äºæ˜¯å¯¹TSçš„é­”æ”¹äº†ï¼Œç›®çš„æ˜¯é€šè¿‡ é™æ€åŒ– + AOT æ¥æ¢å–æ¥è¿‘åŸç”Ÿçš„æ€§èƒ½ã€‚ï¼ˆè¿™ä¸¤ç‚¹æ˜¯ä¸æ˜¯éƒ½å¾ˆåƒDartå‘¢ï¼Ÿï¼‰</p>
<p>Dartæœ¬èº«å…¶å®æœ€åˆçš„è®¾è®¡ç›®æ ‡å°±æ˜¯è§£å†³TSçš„æ€§èƒ½å’ŒåŠ¨æ€ç±»å‹çš„å„ç§é—®é¢˜ï¼ŒArkTSæœ¬è´¨ä¸Šä¹Ÿæ˜¯æ²¿ç€ç›¸åŒçš„è·¯å¾„å»ä¼˜åŒ–ã€‚</p>
<p>ä½†æ˜¯è¿™ç§é­”æ”¹åŸºæœ¬ä¹Ÿæ”¾å¼ƒäº†ä½¿ç”¨TSç”Ÿæ€çš„ä¼˜åŠ¿ï¼Œä¸ªäººè§‰å¾—è¿˜ä¸å¦‚åƒDartä¸€æ ·ç›´æ¥å¦èµ·ç‚‰ç¶ã€‚</p>
<p>å½“ç„¶è¿™ä¹Ÿå¯ä»¥ç†è§£ï¼Œæ¯•ç«ŸFlutteråˆšå¼€å§‹çš„æ—¶å€™å·²ç»æœ‰Dartäº†ï¼Œè¿˜æ˜¯é‚»å±…å›¢é˜Ÿï¼Œå¯ä»¥ç›´æ¥æ‹¿æ¥ç”¨ã€‚</p>
<p>ArkUI-X åˆ™éœ€è¦åœ¨çŸ­æ—¶é—´å†…åˆ›å»ºä¸€ä¸ªæ–°è¯­è¨€ï¼Œæ—¶é—´ä¸Šæ‰è¥Ÿè§è‚˜ï¼ŒåŸºäºå·²ç»å¾ˆå®Œå–„çš„TSè¿›è¡Œä¿®æ”¹å°±èƒ½å¿«å¾ˆå¤šã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€ ç”Ÿæ€ç³»ç»Ÿï¼šFlutter çš„ç»å¯¹æŠ¤åŸæ²³</h2>
<p>å¦‚æœè¯´æ¸²æŸ“æ€§èƒ½æ˜¯åŸºç¡€æˆ˜åŠ›ï¼Œé‚£ç”Ÿæ€ç³»ç»Ÿå°±æ˜¯æŒä¹…æˆ˜çš„è¡¥ç»™çº¿ã€‚åœ¨è¿™æ–¹é¢ï¼ŒFlutter æ‹¥æœ‰ç»å¯¹çš„ç»Ÿæ²»åŠ›ã€‚</p>
<h3 data-id="heading-6">1. Flutter çš„â€œå†›ç«åº“â€</h3>
<p>ç»è¿‡å¤šå¹´çš„ç§¯ç´¯ï¼ŒFlutter çš„ <code>pub.dev</code> ä¸Šå·²ç»æ‹¥æœ‰äº†æ•°ä»¥ä¸‡è®¡çš„é«˜è´¨é‡ç¬¬ä¸‰æ–¹åº“ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71abcfbbb1f14003995650cd6a2143b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377716&amp;x-signature=xEYEuqYNlNsWxD9W3UpeUyAUtNM%3D" alt="" loading="lazy"/></p>
<ul>
<li>
<p><strong>å¼€ç®±å³ç”¨</strong>ï¼šæ— è®ºæ˜¯é«˜å¾·åœ°å›¾ã€å¾®ä¿¡æ”¯ä»˜ã€Firebaseï¼Œè¿˜æ˜¯å¤æ‚çš„å›¾è¡¨åº“ã€åŠ¨ç”»åº“ï¼ŒåŸºæœ¬ä¸Šéƒ½èƒ½æ‰¾åˆ°å®˜æ–¹æˆ–ç¤¾åŒºç»´æŠ¤çš„é«˜è´¨é‡æ’ä»¶ã€‚</p>
</li>
<li>
<p><strong>é‡åˆ°é—®é¢˜</strong>ï¼šä½ åœ¨å¼€å‘ä¸­é‡åˆ°çš„ 99% çš„å‘ï¼Œå…¨çƒå¼€å‘è€…å·²ç»åœ¨ StackOverflow æˆ– GitHub Issues é‡Œå¸®ä½ è¸©è¿‡äº†ã€‚è¿™ç§â€œå®‰å…¨æ„Ÿâ€æ˜¯æŠ€æœ¯é€‰å‹ä¸­æé‡è¦çš„è€ƒé‡ã€‚</p>
</li>
</ul>
<h3 data-id="heading-7">2. ArkUI-X çš„â€œæ‹“è’æœŸâ€</h3>
<p>é¸¿è’™åŸç”Ÿï¼ˆHarmonyOS Nextï¼‰çš„ç”Ÿæ€æ­£åœ¨åä¸ºçš„å¼ºåŠ›æ¨åŠ¨ä¸‹é£é€Ÿå‘å±•ï¼Œä½†è¿™å¹¶ä¸ç­‰åŒäº <strong>ArkUI-X çš„è·¨å¹³å°ç”Ÿæ€</strong>ã€‚</p>
<ul>
<li>
<p><strong>ç°çŠ¶</strong>ï¼šç›®å‰ ArkUI çš„ç¬¬ä¸‰æ–¹åº“ä¸»è¦é›†ä¸­åœ¨çº¯é¸¿è’™ç«¯ã€‚å½“ä½ è¯•å›¾ç”¨ ArkUI-X ç¼–è¯‘åˆ° Android æˆ– iOS æ—¶ï¼Œä¼šå‘ç°å¾ˆå¤šæ¶‰åŠç³»ç»Ÿåº•å±‚èƒ½åŠ›çš„åº“æ˜¯ç¼ºå¤±çš„ã€‚</p>
</li>
<li>
<p><strong>ç»“æœ</strong>ï¼šä½ å¿…é¡»è‡ªå·±å»å†™ Android çš„ Java/Kotlin ä»£ç å’Œ iOS çš„ ObjC/Swift ä»£ç ï¼Œå¹¶é€šè¿‡æ¡¥æ¥ã€‚è¿™æ„å‘³ç€ï¼Œä½ æœ¬æ¥æƒ³â€œä¸€æ¬¡ç¼–å†™ï¼Œåˆ°å¤„è¿è¡Œâ€ï¼Œç»“æœå˜æˆäº†â€œä¸€æ¬¡ç¼–å†™ï¼Œä¸‰å¤„å¡«å‘â€ã€‚</p>
</li>
</ul>
<h3 data-id="heading-8">3. ç”Ÿæ€å£å’</h3>
<p>ç”Ÿæ€çš„å»ºè®¾ä¸æ˜¯ä¸€æœä¸€å¤•ä¹‹åŠŸã€‚Flutter çš„æŠ¤åŸæ²³ä¸ä»…æ˜¯ Google çš„æŠ•å…¥ï¼Œæ›´æ˜¯å…¨çƒæ•°ç™¾ä¸‡å¼€å‘è€…å‡ å¹´æ—¶é—´ä¸€è¡Œè¡Œä»£ç å †å‡ºæ¥çš„ã€‚</p>
<p>å¯¹äº ArkUI-X æ¥è¯´ï¼Œè¦è·¨è¶Šè¿™åº§é«˜å±±ï¼Œé™¤äº†åä¸ºå®˜æ–¹çš„åŠªåŠ›ï¼Œè¿˜éœ€è¦ç»™å‡ºè¶³å¤Ÿçš„åˆ©ç›Šè¯±æƒ‘ï¼Œè®©ç¤¾åŒºæ„¿æ„ä¸º Android/iOS ç«¯çš„é€‚é…è´¡çŒ®ä»£ç ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œç›®å‰è¿˜çœ‹ä¸åˆ°è¶³ä»¥æ”¹å˜å±€åŠ¿çš„åŠ¨åŠ›ã€‚</p>
<hr/>
<h2 data-id="heading-9">å››ã€ AIå‹å¥½åº¦ï¼šè°æ›´æ‡‚æ™ºèƒ½æ—¶ä»£çš„å¼€å‘ï¼Ÿ</h2>
<p>åœ¨è¿™ä¸ªâ€œè¨€å¿…ç§° AIâ€çš„æ—¶ä»£ï¼Œè¯„æµ‹ä¸€ä¸ªæ¡†æ¶å¦‚æœä¸èŠ AIï¼Œé‚£å°±æ˜¯è€æµæ°“ã€‚</p>
<p>è¿™é‡Œçš„ AI å‹å¥½åº¦ï¼Œæˆ‘ä»¬åˆ†ä¸¤ä¸ªå±‚é¢æ¥çœ‹ï¼š<strong>AI å¸®ä½ å†™ä»£ç </strong> å’Œ <strong>AI èµ‹èƒ½ App</strong>ã€‚</p>
<h3 data-id="heading-10">1. è°æ˜¯ AI ç¼–ç¨‹åŠ©æ‰‹çš„å® å„¿ï¼Ÿ</h3>
<p><strong>Flutter (Dart) å®Œèƒœã€‚</strong></p>
<p>åŸå› å¾ˆç®€å•ï¼š<strong>è¯­æ–™æŠ•å–‚é‡ã€‚</strong></p>
<p>GitHub ä¸Šæœ‰å¤šå°‘ Flutter ä»£ç ï¼ŸStackOverflow ä¸Šæœ‰å¤šå°‘ Dart é—®ç­”ï¼Ÿ</p>
<p>è¿™å°±å¯¼è‡´äº†ä¸€ä¸ªç»“æœï¼šä½ ç”¨ Cursor æˆ–è€… Claude Code å†™ Flutterï¼ŒAI çœŸçš„èƒ½çŒœé€ä½ çš„å¿ƒæ€ã€‚å®ƒç”Ÿæˆçš„ä»£ç ï¼Œå‡†ç¡®ç‡æé«˜ï¼Œç”šè‡³èƒ½å¸®ä½ å¤„ç†å¤æ‚çš„é€»è¾‘ã€‚</p>
<p>åè§‚ <strong>ArkUI (ArkTS)</strong>ã€‚</p>
<p>ç”±äºæ˜¯æ–°ç”Ÿä»£è¯­è¨€ï¼Œä¸”å¤§éƒ¨åˆ†ä»£ç é—­æºæˆ–ä»…åœ¨å›½å†…æµè½¬ï¼Œé€šç”¨å¤§æ¨¡å‹ï¼ˆå¦‚ ChatGPT æˆ– Claudeï¼‰å¯¹ ArkTS çš„æœ€æ–°è¯­æ³•æŒæ¡å¾—å¹¶ä¸å®Œç¾ã€‚</p>
<p>ç»å¸¸å‡ºç°çš„æƒ…å†µæ˜¯ï¼šAI ç»™ä½ å†™äº†ä¸€æ®µä»£ç ï¼Œä½ ä¸€çœ‹ï¼ŒæŒºåƒæ¨¡åƒæ ·ï¼Œä¸€è·‘å°±æŠ¥é”™ã€‚</p>
<h3 data-id="heading-11">2. è°èƒ½åƒåˆ°ç³»ç»Ÿçš„â€œAI çº¢åˆ©â€ï¼Ÿ</h3>
<p><strong>è¿™æ–¹é¢ï¼ŒåŒæ–¹å„æ“…èƒœåœºã€‚</strong></p>
<p><strong>Flutter çš„æ€æ‰‹é”æ˜¯ Geminiã€‚</strong></p>
<p>Google å®˜æ–¹æ¨å‡ºäº† <code>google_generative_ai</code> æ’ä»¶ï¼ˆç›®å‰å·²æ•´åˆåˆ°Firebaseä¸­ï¼‰ï¼Œè®© Flutter å¼€å‘è€…èƒ½ä»¥æä½çš„é—¨æ§›æ¥å…¥ Gemini å¤§æ¨¡å‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95f96f26ac1e4f468a035ad26c654a65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377716&amp;x-signature=2gexoWx7YL5GwTSvEfYCsVO6GSw%3D" alt="" loading="lazy"/></p>
<p>æ— è®ºæ˜¯æ–‡æœ¬ç”Ÿæˆã€å¤šæ¨¡æ€è¯†åˆ«ï¼Œè¿˜æ˜¯æ‰“é€ æ™ºèƒ½ Agentï¼ŒFlutter éƒ½æœ‰ç°æˆçš„ã€é«˜è´¨é‡çš„å®˜æ–¹æ”¯æŒã€‚</p>
<p>å½“ç„¶ï¼Œé™¤äº†è‡ªå®¶çš„Geminiï¼ŒFlutter ä¹Ÿæœ‰æ”¯æŒå…¶ä»–å¤§æ¨¡å‹çš„ä¸‰æ–¹åº“ï¼Œæ¯”å¦‚ OpenAI çš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60b977bead804cc0b3c1b96a8438eb5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768377716&amp;x-signature=mLrPwwGMPwquouzAOcso4enAv3U%3D" alt="" loading="lazy"/></p>
<p>è¿™å¯¹äºæƒ³è¦å¿«é€Ÿèµ‹äºˆ App â€œå¤§æ¨¡å‹èƒ½åŠ›â€çš„å›¢é˜Ÿæ¥è¯´ï¼Œè¯±æƒ‘åŠ›å·¨å¤§ã€‚</p>
<p>å› æ­¤è¿™æ–¹é¢ï¼ŒFlutter æ›´èƒœä¸€ç­¹ï¼Œè€Œ ArkUI åˆ™éœ€è¦æ‰‹åŠ¨æ¥å…¥ä¸åŒçš„APIã€‚</p>
<p><strong>ArkUI çš„ä¼˜åŠ¿</strong></p>
<p>åœ¨é¸¿è’™ç³»ç»Ÿä¸Šï¼ŒAI èƒ½åŠ›çš„ç»ˆå±€æ˜¯å¯ä»¥ä¸‹æ²‰åˆ°æ§ä»¶çº§ã€‚ä½ ä½¿ç”¨ ArkUI çš„ <code>Image</code> æˆ– <code>Text</code> ç»„ä»¶ï¼Œé»˜è®¤å°±æ”¯æŒç³»ç»Ÿçš„ OCRã€åˆ†è¯å’ŒæŠ å›¾èƒ½åŠ›ã€‚</p>
<p>è¿™ç§æ¶¦ç‰©ç»†æ— å£°çš„ AI ä½“éªŒï¼Œä¸éœ€è¦å¼€å‘è€…é¢å¤–é›†æˆ SDKï¼Œæ˜¯åŸç”Ÿæ¡†æ¶ç‹¬æœ‰çš„ç‰¹æƒã€‚</p>
<p>å½“ç„¶ï¼Œè¿™ç§èƒ½åŠ›å¾ˆéš¾åšåˆ°è·¨å¹³å°ï¼Œåªèƒ½æ˜¯é¸¿è’™ç³»ç»Ÿç‹¬äº«äº†ã€‚</p>
<hr/>
<h2 data-id="heading-12">äº”ã€ æˆ˜ç•¥å®šä½ï¼šè°ä¼šé€‰æ‹© ArkUIï¼Ÿ</h2>
<p>è°ä¼šæ”¾å¼ƒæˆç†Ÿçš„ Flutterï¼Œè½¬æŠ• ArkUI-X çš„æ€€æŠ±ï¼Ÿ</p>
<h3 data-id="heading-13">1. é¸¿è’™åŸç”Ÿä¼˜å…ˆ (HarmonyOS First) çš„å›¢é˜Ÿ</h3>
<p>è¿™æ˜¯ ArkUI-X çš„<strong>åŸºæœ¬ç›˜</strong>ã€‚</p>
<p>å¦‚æœä½ çš„ App ä¸»è¦æ˜¯ä¸ºäº†æœåŠ¡å›½å†…ç”¨æˆ·ï¼Œä¸”å¿…é¡»è‡ªä¸»å¯æ§ã€‚</p>
<p>æ¯”å¦‚ä½ å› ä¸ºæŸäº›åŸå› <strong>ä¸å¾—ä¸</strong>å…ˆå¼€å‘é¸¿è’™ç‰ˆã€‚</p>
<p>è¿™æ—¶å€™ï¼Œæ—¢ç„¶å·²ç»ç”¨ ArkTS å†™äº†ä¸€å¥—é«˜è´¨é‡çš„ä»£ç ï¼Œä¸ºä»€ä¹ˆä¸é¡ºæ‰‹ç”¨ ArkUI-X ç”Ÿæˆä¸€ä¸ª Android/iOS åŒ…å‘¢ï¼Ÿ</p>
<p>å“ªæ€•åªæ˜¯ç”¨æ¥åº”ä»˜ä¸€ä¸‹éä¸»åŠ›æ¸ é“ï¼Œä¹Ÿæ˜¯æå…¶åˆ’ç®—çš„ã€‚</p>
<p><strong>è¿™æ—¶å€™ï¼ŒArkUI-X æ˜¯â€œé¡ºå¸¦â€çš„ç¦åˆ©ã€‚</strong></p>
<h3 data-id="heading-14">2. åªæœ‰â€œä¸€å¥—ä»£ç â€é¢„ç®—çš„å›½å†…å°å¾®é¡¹ç›®</h3>
<p>å¯¹äºä¸€äº›é¢„ç®—æœ‰é™çš„å¤–åŒ…å›¢é˜Ÿæˆ–åˆåˆ›å…¬å¸ã€‚</p>
<p>å¦‚æœå®¢æˆ·ç‚¹åè¦â€œé¸¿è’™ç‰ˆâ€ï¼ŒåŒæ—¶åˆä¸æƒ³æ”¾å¼ƒ Android å’Œ iOSã€‚</p>
<p>æ‹›ä¸¤æ‹¨äººï¼Ÿæ²¡é’±ã€‚</p>
<p>ç”¨ Flutterï¼Ÿè¿˜å¾—å•ç‹¬å»å†™é¸¿è’™çš„é€‚é…ï¼ˆè™½è¯´ Flutter å¯¹é¸¿è’™çš„æ”¯æŒä¹Ÿåœ¨å˜å¥½ï¼Œä½†æ¯•ç«Ÿéš”äº†ä¸€å±‚ï¼‰ã€‚</p>
<p>è¿™æ—¶å€™ï¼ŒArkUI-X å°±æˆäº†ä¸€ä¸ª<strong>è™½ç„¶ä¸å®Œç¾ï¼Œä½†èƒ½äº¤å·®</strong>çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-15">3. Flutter çš„æ­»å¿ ç²‰ä»¬ä¼šåŠ¨æ‘‡å—ï¼Ÿ</h3>
<p><strong>å¾ˆéš¾ã€‚</strong></p>
<p>å¦‚æœä½ çš„ä¸šåŠ¡é¢å‘å…¨çƒï¼Œæˆ–è€…ä½ çš„å›¢é˜Ÿå·²ç»ç§¯ç´¯äº†å¤§é‡çš„ Flutter èµ„äº§ã€‚</p>
<p>è½¬æŠ• ArkUI-X å‡ ä¹æ²¡æœ‰ç†ç”±ã€‚</p>
<p>Flutter çš„æˆç†Ÿåº¦ã€ç¤¾åŒºæ´»è·ƒåº¦ã€ä»¥åŠ Google çš„èƒŒä¹¦ï¼Œä¾ç„¶æ˜¯ç›®å‰è·¨å¹³å°å¼€å‘çš„<strong>æœ€ä¼˜è§£</strong>ã€‚</p>
<p>é™¤éâ€¦â€¦åä¸ºç»™çš„å®åœ¨å¤ªå¤šäº†ï¼ˆæ¯”å¦‚æŸäº›ç‰¹å®šçš„æ‰¶æŒè®¡åˆ’ï¼‰ã€‚</p>
<h3 data-id="heading-16">4. æ€»ç»“</h3>
<p><strong>Flutter æ˜¯ä¸ºäº†â€œè®©ä¸–ç•Œå¹³æƒâ€ã€‚</strong> å®ƒæƒ³è®©ä¸€å¥—ä»£ç åœ¨æ‰€æœ‰è®¾å¤‡ä¸Šè¿è¡Œå¾—ä¸€æ ·å¥½ã€‚</p>
<p><strong>ArkUI æ˜¯ä¸ºäº†â€œè®©é¸¿è’™ç ´åœˆâ€ã€‚</strong> å®ƒæƒ³è®©é¸¿è’™çš„ä»£ç èƒ½æº¢å‡ºåˆ° Android å’Œ iOS ä¸Šï¼Œä¸ºé¸¿è’™ç”Ÿæ€è¾“è¡€ã€‚</p>
<p><strong>å‡ºå‘ç‚¹ä¸åŒï¼Œç»ˆå±€è‡ªç„¶ä¹Ÿä¸åŒã€‚</strong></p>
<hr/>
<h2 data-id="heading-17">å…­ã€ ç»“è¯­ï¼šä¸€åœºæ²¡æœ‰è¾“å®¶çš„åšå¼ˆ</h2>
<p>å›åˆ°æœ€åˆçš„é‚£ä¸ªé—®é¢˜ï¼š<strong>ArkUI èƒ½å¦å–ä»£ Flutterï¼Ÿ</strong></p>
<p>å¦‚æœä½ è¿˜åœ¨æœŸå¾…ä¸€ä¸ªéé»‘å³ç™½çš„ç­”æ¡ˆï¼Œé‚£ä½ å¯èƒ½çœ‹ä½äº†è¿™åœºåšå¼ˆçš„æ ¼å±€ã€‚</p>
<p><strong>è¿™ä»æ¥ä¸æ˜¯ä¸€åœºâ€œä½ æ­»æˆ‘æ´»â€çš„å†³æ–—ï¼Œè€Œæ˜¯ä¸€æ¬¡â€œåˆ’æ±Ÿè€Œæ²»â€çš„é‡æ–°æ´—ç‰Œã€‚</strong></p>
<p>Flutter ä¾ç„¶æ˜¯é‚£ä¸ªä»—å‰‘èµ°å¤©æ¶¯çš„ä¾ å®¢ï¼Œå®ƒçš„å¾é€”æ˜¯æ˜Ÿè¾°å¤§æµ·ï¼Œæ˜¯å…¨çƒåŒ–çš„å¹¿é˜”å¤©åœ°ã€‚</p>
<p>å‡­å€Ÿç€ Google çš„æŠ€æœ¯åº•è•´å’Œå…¨çƒå¼€å‘è€…çš„æ™ºæ…§ï¼Œå®ƒæ„å»ºèµ·äº†ä¸€åº§ä»¤äººå¹ä¸ºè§‚æ­¢çš„ç”Ÿæ€å£å’ã€‚</p>
<p>åœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…ï¼Œå®ƒä¾ç„¶æ˜¯è·¨å¹³å°é¢†åŸŸçš„â€œé€šç”¨è´§å¸â€ã€‚</p>
<p>è€Œ ArkUI-Xï¼Œæ›´åƒæ˜¯ä¸€ä½å®ˆåœŸå«ç–†çš„å°†å†›ã€‚</p>
<p>å®ƒèƒŒé ç€é¸¿è’™è¿™æ£µå¤§æ ‘ï¼Œè™½ç„¶åœ¨è·¨å¹³å°çš„å¾é€”ä¸­è¿˜æ˜¾å¾—æœ‰äº›ç¨šå«©ï¼Œç”šè‡³æ­¥å±¥è¹’è·šï¼Œä½†è°åˆèƒ½è¯´å®ƒä¸èƒ½æˆé•¿æˆä¸ºä¸‹ä¸€ä¸ªFlutterå‘¢ã€‚</p>
<p><strong>ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬ä¸éœ€è¦æˆä¸ºå·¥å…·çš„æ®‰é“è€…ï¼Œè€Œåº”è¯¥æˆä¸ºæ—¶ä»£çš„å†²æµªè€…ã€‚</strong></p>
<p>è€åˆ˜ç»™å…„å¼Ÿä»¬æœ€åä¸€ç‚¹å»ºè®®ï¼š</p>
<ol>
<li>
<p><strong>ä¸è¦æ€¥äºä¸‹æ³¨</strong></p>
<p>æŠ€æœ¯çš„å‘å±•ä¸æ˜¯ä¸€è¹´è€Œå°±ï¼Œç­‰æŠ€æœ¯æˆç†Ÿç”Ÿæ€å®Œå–„äº†å†è€ƒè™‘æŠ•å…¥æ—¶é—´å’Œç²¾åŠ›ã€‚</p>
</li>
<li>
<p><strong>æŠ€æœ¯æ ˆçš„è¾¹ç•Œæ­£åœ¨æ¨¡ç³Šã€‚</strong></p>
<p>ä½ ä¼šå‘ç°ï¼Œå£°æ˜å¼ UIã€å“åº”å¼ç¼–ç¨‹ã€çŠ¶æ€ç®¡ç†ï¼Œè¿™äº›æ ¸å¿ƒæ€æƒ³åœ¨ Flutterã€SwiftUIã€Compose ä¹ƒè‡³ ArkUI é‡Œéƒ½æ˜¯é€šç”¨çš„ã€‚</p>
<p><strong>çœŸæ­£å€¼é’±çš„ï¼Œä¸æ˜¯ä½ èƒŒç†Ÿäº†å¤šå°‘ä¸ª APIï¼Œè€Œæ˜¯ä½ å¯¹å¼€å‘èŒƒå¼çš„æ·±åˆ»ç†è§£ã€‚</strong></p>
</li>
</ol>
<p>ä¸å…¶çº ç»“â€œå­¦å“ªä¸ªâ€ï¼Œä¸å¦‚é—®é—®è‡ªå·±ï¼š</p>
<p><strong>å½“æ–°çš„æµªæ½®æ‰“è¿‡æ¥æ—¶ï¼Œä½ çš„å†²æµªæ¿å‡†å¤‡å¥½äº†å—ï¼Ÿ</strong></p>
<blockquote>
<p>å¦‚æœçœ‹åˆ°è¿™é‡Œçš„åŒå­¦å¯¹å®¢æˆ·ç«¯æˆ–è€…Flutterå¼€å‘æ„Ÿå…´è¶£ï¼Œæ¬¢è¿è”ç³»è€åˆ˜ï¼Œæˆ‘ä»¬äº’ç›¸å­¦ä¹ ã€‚</p>
<p>ç§ä¿¡å…è´¹é¢†è€åˆ˜æ•´ç†çš„ã€ŠFlutterå¼€å‘æ‰‹å†Œã€‹ï¼Œè¦†ç›–90%åº”ç”¨å¼€å‘åœºæ™¯ã€‚</p>
<p>å¯ä»¥ä½œä¸ºFlutterå­¦ä¹ çš„çŸ¥è¯†åœ°å›¾ã€‚</p>
<p>â€”â€” laoliu_dev</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬8ç«  Three.jså…¥é—¨]]></title>    <link>https://juejin.cn/post/7592166340381016079</link>    <guid>https://juejin.cn/post/7592166340381016079</guid>    <pubDate>2026-01-07T06:06:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592166340381016079" data-draft-id="7592170171633614863" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬8ç«  Three.jså…¥é—¨"/> <meta itemprop="keywords" content="three.js,å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-07T06:06:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="XiaoYu2002"/> <meta itemprop="url" content="https://juejin.cn/user/251124329220663"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬8ç«  Three.jså…¥é—¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/251124329220663/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    XiaoYu2002
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T06:06:52.000Z" title="Wed Jan 07 2026 06:06:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">8.1 åˆå§‹åŒ–é¡¹ç›®</h2>
<p>three.js æ˜¯ä¸€ä¸ªåŸºäºJavaScript çš„WebGL å¼•æ“ï¼Œå¯ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡ŒGPU é©±åŠ¨çš„æ¸¸æˆä¸å›¾å½¢é©±åŠ¨çš„åº”ç”¨ã€‚ three.js çš„åº“æä¾›äº†å¤§é‡ç”¨äºåœ¨æµè§ˆå™¨ä¸­ç»˜åˆ¶3Dåœºæ™¯çš„ç‰¹æ€§ä¸APIã€‚æˆ‘ä»¬çš„å…¥é—¨å°±åŸºäºthree.jsåº“å»è°ƒç”¨å¯¹åº”çš„APIã€‚</p>
<p>éœ€è¦å®Œæˆçš„å‰ç½®æ¡ä»¶å¦‚ä¸‹4ç‚¹ï¼š</p>
<p>ï¼ˆ1ï¼‰åˆ›å»ºä¸€ä¸ªç©ºé¡¹ç›®THREEJSã€‚</p>
<p>ï¼ˆ2ï¼‰åˆ›å»ºindex.htmlå’Œmain.tsæ–‡ä»¶ï¼Œç”¨äºåç»­ç¼–å†™ç¤ºä¾‹ä»£ç ã€‚</p>
<p>ï¼ˆ3ï¼‰å®‰è£…three.jsåº“å’Œå¯¹åº”å£°æ˜æ–‡ä»¶ã€‚</p>
<p>ï¼ˆ4ï¼‰å®‰è£…Viteç”¨äºå¯åŠ¨é¡¹ç›®ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å®‰è£…three.jsåº“å’Œå¯¹åº”å£°æ˜æ–‡ä»¶</span>
npm i three
npm i --save-dev <span class="hljs-meta">@types</span>/three
<span class="hljs-comment">// å®‰è£…Viteç”¨äºå¯åŠ¨é¡¹ç›®</span>
npm i vite -D
</code></pre>
<p>å…¶ä¸­index.htmlæ˜¯ä½œä¸ºå±•ç¤º3Dåœºæ™¯ç•Œé¢çš„æ–‡ä»¶ï¼Œç„¶åéœ€è¦å¯¼å…¥main.tsæ–‡ä»¶ï¼Œmain.tsæ–‡ä»¶æ˜¯ä½œä¸ºç¼–å†™three.jsçš„ä»£ç æ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-html" lang="html">// index.html
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-tag">html</span>,
    <span class="hljs-selector-tag">body</span> {
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">overflow</span>: hidden;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./main.ts"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>æ¥ç€åˆ°package.jsonæ–‡ä»¶ä¸­é…ç½®viteçš„å¯åŠ¨å‘½ä»¤ï¼Œç„¶åå¯åŠ¨é¡¹ç›®ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// package.json</span>
{
  <span class="hljs-string">"scripts"</span>: {
    <span class="hljs-string">"dev"</span>: <span class="hljs-string">"vite"</span>,
    <span class="hljs-string">"build"</span>: <span class="hljs-string">"vite build"</span>
  },
  <span class="hljs-string">"dependencies"</span>: {
    <span class="hljs-string">"three"</span>: <span class="hljs-string">"^0.182.0"</span>
  },
  <span class="hljs-string">"devDependencies"</span>: {
    <span class="hljs-string">"@types/three"</span>: <span class="hljs-string">"^0.182.0"</span>,
    <span class="hljs-string">"vite"</span>: <span class="hljs-string">"^7.3.0"</span>
  }
}
</code></pre>
<h2 data-id="heading-1">8.2 æ¡ˆä¾‹æ­å»º</h2>
<p>å®Œæˆé¡¹ç›®çš„åˆå§‹åŒ–å¹¶å¯åŠ¨é¡¹ç›®åï¼Œé¡¹ç›®ç•Œé¢æ˜¯ä¸€ç‰‡ç©ºç™½ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰ç¼–å†™å¯¹åº”ä»£ç ï¼Œæ¥ä¸‹æ¥å›åˆ°main.tsæ–‡ä»¶ä¸­ï¼Œå®Œæˆä»¥ä¸‹3ç‚¹æ“ä½œï¼š</p>
<p>ï¼ˆ1ï¼‰å¼•å…¥threeåº“ã€‚</p>
<p>ï¼ˆ2ï¼‰åˆ›å»ºåœºæ™¯</p>
<p>ï¼ˆ3ï¼‰åˆ›å»ºç½‘æ ¼ã€‚</p>
<p>åˆ›å»ºåœºæ™¯æ°¸è¿œæ˜¯ç¬¬ä¸€ä»¶è¦åšçš„äº‹æƒ…ï¼Œå®ƒæ˜¯æ‰€æœ‰3Dç‰©ä½“çš„å®¹å™¨ï¼Œå°±åƒåœ¨2D Canvasä¸­å¿…é¡»å…ˆè·å–ç”»å¸ƒä¸Šä¸‹æ–‡ä¸€æ ·åŸºç¡€ã€‚æ¥ç€æ˜¯åˆ›å»ºç½‘æ ¼ï¼Œthree.jsä¸­çš„æ‰€æœ‰å¯è§çš„3Dç‰©ä½“éƒ½æ˜¯åŸºäºç½‘æ ¼å»ç»„æˆï¼Œç½‘æ ¼å¯ä»¥æœ‰å¤šä¸ªï¼Œç½‘æ ¼åŒ…å«å‡ ä½•ä½“å’Œæè´¨ã€‚</p>
<p>å‡ ä½•ä½“ï¼ˆGeometryï¼‰ï¼šå®šä¹‰äº†ç‰©ä½“çš„å½¢çŠ¶ï¼Œå³é¡¶ç‚¹ã€é¢ç­‰ç»“æ„ä¿¡æ¯ã€‚</p>
<p>æè´¨ï¼ˆMaterialï¼‰ï¼šå®šä¹‰äº†ç‰©ä½“è¡¨é¢çš„å¤–è§‚ï¼Œä¾‹å¦‚é¢œè‰²ã€çº¹ç†ã€å…‰æ»‘åº¦ç­‰ã€‚</p>
<p>åˆ›å»ºç½‘æ ¼ä¹Ÿæ„å‘³ç€éœ€è¦åˆ›å»ºå‡ ä½•ä½“å’Œæè´¨ï¼Œç„¶åæ”¾å…¥ç½‘æ ¼ä¸­ã€‚å‡ ä½•ä½“æœ‰å¤šç§å½¢çŠ¶ï¼Œå¯¹åº”ä¸åŒæ–¹æ³•ï¼Œå¡«å…¥ä¸åŒå‚æ•°ï¼›æè´¨ä¹Ÿæœ‰å¤šç§æè´¨é€‰æ‹©ï¼Œé€šè¿‡ä¸åŒæ–¹æ³•å»æ“ä½œã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'three'</span>;

<span class="hljs-comment">//åˆ›å»ºåœºæ™¯</span>
<span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>();

<span class="hljs-comment">//åˆ›å»ºå‡ ä½•ä½“</span>
<span class="hljs-keyword">const</span> geometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BoxGeometry</span>(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">100</span>); <span class="hljs-comment">// xï¼Œyï¼Œzä¸‰è½´</span>

<span class="hljs-comment">//åˆ›å»ºæè´¨</span>
<span class="hljs-comment">//MeshBasicMaterial è¿™ä¸ªæè´¨æ˜¯ä¸å—å…‰ç…§å½±å“</span>
<span class="hljs-comment">//MeshLambertMaterial è¿™ä¸ªæè´¨æ˜¯å—å…‰ç…§å½±å“ æ¼«åå°„æè´¨</span>
<span class="hljs-comment">//MeshPhongMaterial è¿™ä¸ªæè´¨æ˜¯å—å…‰ç…§å½±å“ é•œé¢é«˜å…‰</span>
<span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshBasicMaterial</span>({<span class="hljs-attr">color</span>: <span class="hljs-number">0x00ff00</span>});

<span class="hljs-comment">//ç½‘æ ¼ å‡ ä½•ä½“ + æè´¨ å¯ä»¥æœ‰å¤šä¸ª</span>
<span class="hljs-keyword">const</span> mesh = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(geometry, material);

<span class="hljs-comment">//å°†ç½‘æ ¼æ·»åŠ åˆ°åœºæ™¯ä¸­</span>
scene.<span class="hljs-title function_">add</span>(mesh);
</code></pre>
<p>ç½‘æ ¼éœ€è¦åŒ…å«å‡ ä½•ä½“å’Œæè´¨æ˜¯å¾ˆå¥½ç†è§£çš„ï¼Œå‡ ä½•ä½“æ˜¯ç‰©å“çš„å½¢çŠ¶ï¼Œè€Œæè´¨æ˜¯ç‰©å“çš„è¡¨é¢ï¼Œç½‘æ ¼å°±æ˜¯å°†ä¸¤è€…ç»“åˆèµ·æ¥çš„â€œå®Œæ•´ç‰©ä½“â€ï¼Œç±»ä¼¼äº3Då»ºæ¨¡ã€‚</p>
<p>åˆ›å»ºç½‘æ ¼å±äºåœºæ™¯çš„éƒ¨åˆ†ï¼Œè€Œä¸€ä¸ªæœ€ç®€çš„Three.jsä»£ç ç»“æ„éœ€è¦åŒ…å«ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶ï¼š</p>
<p>ï¼ˆ1ï¼‰Sceneï¼ˆåœºæ™¯ï¼‰ï¼šæ˜¯èˆå°ã€‚æ‰€æœ‰æ¼”å‘˜ã€é“å…·ã€ç¯å…‰éƒ½å¿…é¡»æ”¾åœ¨è¿™ä¸ªèˆå°ä¸Šã€‚</p>
<p>ï¼ˆ2ï¼‰Cameraï¼ˆç›¸æœºï¼‰ï¼šæ˜¯æ‘„åƒæœºã€‚å®ƒå†³å®šäº†ä½ ä»å“ªä¸ªè§’åº¦ã€ä»¥ä½•ç§è§†é‡å»è§‚çœ‹èˆå°ã€‚</p>
<p>ï¼ˆ3ï¼‰Rendererï¼ˆæ¸²æŸ“å™¨ï¼‰ï¼šæ˜¯è´Ÿè´£æŠŠæ‘„åƒæœºæ‹åˆ°çš„ç”»é¢ï¼Œå®é™…ç»˜åˆ¶åˆ°å±å¹•ç”»å¸ƒä¸Šçš„â€œæ¸²æŸ“å¼•æ“â€ã€‚æ²¡æœ‰å®ƒï¼Œä¸€åˆ‡å‡†å¤‡éƒ½åªæ˜¯æ•°æ®ï¼Œçœ‹ä¸åˆ°å›¾åƒã€‚</p>
<p>å› æ­¤åˆ›å»ºç½‘æ ¼å¹¶å¡«å……å¯¹åº”çš„å‡ ä½•ä½“å’Œæè´¨æ„å‘³ç€æˆ‘ä»¬æ‹¥æœ‰äº†ä¸€ä¸ªæœ€ç®€å•çš„ç‰©å“å¡«å…¥åœºæ™¯ä¸­ä½œä¸ºè¢«è§‚å¯Ÿå¯¹è±¡ï¼ˆç½‘æ ¼éœ€è¦æ·»åŠ åˆ°åœºæ™¯ä¸­ï¼‰ï¼Œåœ¨è¿™ä¹‹åè¿˜éœ€è¦åˆ›å»ºç›¸æœºå’Œæ¸²æŸ“å™¨ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹åˆ›å»ºç›¸æœºã€‚</p>
<p>ç›¸æœºé€šè¿‡THREE.PerspectiveCamera()åˆ›å»ºï¼Œéœ€è¦å››ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ï¼šè§†é‡è§’åº¦ï¼ˆfovï¼‰ã€å®½é«˜æ¯”ï¼ˆaspectï¼‰ã€è¿‘è£å‰ªé¢ï¼ˆnearï¼‰ã€è¿œè£å‰ªé¢ï¼ˆfarï¼‰ã€‚å®ƒä»¬ä¸€èµ·æ„æˆäº†ä¸€ä¸ªè§†é”¥ä½“ï¼Œå†³å®šäº†ç›¸æœºèƒ½çœ‹åˆ°ä»€ä¹ˆã€‚è§†é‡è§’åº¦æ§åˆ¶å¯è§èŒƒå›´çš„å‚ç›´å¼€åˆç¨‹åº¦ï¼Œç±»ä¼¼æ‘„åƒæœºçš„é•œå¤´ç„¦è·ï¼›å®½é«˜æ¯”ç¡®ä¿æ¸²æŸ“ä¸å˜å½¢ï¼Œé€šå¸¸ç›´æ¥ä½¿ç”¨çª—å£æ¯”ä¾‹ï¼›è¿œè¿‘è£å‰ªé¢åˆ™å®šä¹‰äº†ç›¸æœºèƒ½çœ‹æ¸…çš„æœ€å°å’Œæœ€å¤§è·ç¦»ï¼Œå°±åƒäººçœ¼çš„æœ€è¿‘è§†ç‚¹å’Œæœ€è¿œè§†ç‚¹ã€‚ç›¸æœºè§†è§’å¦‚å›¾8-1æ‰€ç¤ºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19cae6da398341a2848a1b6f68a32dd6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWGlhb1l1MjAwMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768370812&amp;x-signature=KA0iU9flyXYymY7F7Se0Ooa%2FOJI%3D" alt="image.png" loading="lazy"/></p>
<p align="center">
 <b> å›¾8-1 ç›¸æœºè§†è§’</b>
</p>
<p>åœ¨æˆ‘ä»¬ä»¥ä¸‹ä»£ç ç¤ºä¾‹ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•° 75 æ˜¯å‚ç›´è§†é‡è§’åº¦ï¼Œç±»ä¼¼äººçœ¼çå¼€çš„è§’åº¦ï¼Œå€¼è¶Šå¤§çœ‹åˆ°çš„åœºæ™¯è¶Šå¹¿ï¼›ç¬¬äºŒä¸ªå‚æ•° window.innerWidth / window.innerHeight æ˜¯å®½é«˜æ¯”ï¼Œé€šå¸¸è®¾ç½®ä¸ºæ¸²æŸ“åŒºåŸŸçš„å®½é™¤ä»¥é«˜ï¼Œä»¥ç¡®ä¿ç‰©ä½“ä¸è¢«æ‹‰ä¼¸å˜å½¢ï¼›ç¬¬ä¸‰ä¸ªå‚æ•° 0.1 æ˜¯è¿‘è£å‰ªé¢ï¼Œè¡¨ç¤ºç›¸æœºèƒ½çœ‹æ¸…çš„æœ€çŸ­è·ç¦»ï¼Œæ¯”è¿™æ›´è¿‘çš„ç‰©ä½“å°†è¢«è£å‰ªä¸å¯è§ï¼›ç¬¬å››ä¸ªå‚æ•° 1000 æ˜¯è¿œè£å‰ªé¢ï¼Œè¡¨ç¤ºç›¸æœºèƒ½çœ‹æ¸…çš„æœ€è¿œè·ç¦»ï¼Œæ¯”è¿™æ›´è¿œçš„ç‰©ä½“åŒæ ·ä¸å¯è§ï¼Œè¿™å››ä¸ªå‚æ•°å…±åŒåˆ’å®šäº†ç›¸æœºåœ¨ä¸‰ç»´ç©ºé—´ä¸­å®é™…èƒ½è§‚å¯Ÿåˆ°çš„èŒƒå›´ã€‚</p>
<p>æ¥ç€æˆ‘ä»¬éœ€è¦è®¾ç½®ç›¸æœºæ”¾ç½®çš„ä½ç½®ï¼Œå°±å’Œç°å®ä¸€æ ·ï¼Œæ‹æ‘„æ‰€åœ¨çš„ä½ç½®å†³å®šäº†ç”»é¢çš„å™äº‹è§†è§’ã€è§†è§‰é‡ç‚¹å’Œæƒ…æ„ŸåŸºè°ƒã€‚å°†ç›¸æœºé è¿‘ç‰©ä½“å¹¶é‡‡ç”¨ä½è§’åº¦ï¼Œèƒ½åƒç”µå½±ç‰¹å†™ä¸€æ ·èµ‹äºˆä¸»ä½“å‹è¿«æ„Ÿå’Œæƒå¨æ€§ï¼Œå¸¸ç”¨äºçªå‡ºæ ¸å¿ƒå…ƒç´ æˆ–è¥é€ ç´§å¼ æ°›å›´ï¼›åä¹‹ï¼Œå°†ç›¸æœºæ‹‰è¿œå¹¶æå‡é«˜åº¦ï¼Œåˆ™å½¢æˆä¿¯ç°å¼çš„å®è§‚è§†è§’ï¼Œé€‚åˆå±•ç°åœºæ™¯å…¨è²Œã€ç©ºé—´å…³ç³»æˆ–ä¸ªä½“çš„æ¸ºå°æ„Ÿã€‚é€šè¿‡ç²¾ç¡®æ§åˆ¶ç›¸æœºä¸ä¸»ä½“çš„è·ç¦»ã€é«˜åº¦å’Œè§’åº¦ï¼Œèƒ½å¤Ÿå†³å®šæ•´ä¸ªåœºæ™¯æ˜¯é€šè¿‡ä¸€ä¸ªâ€œç¬¬ä¸€äººç§°â€çš„æ²‰æµ¸å¼çª—å£å‘ˆç°ï¼Œè¿˜æ˜¯ä½œä¸ºä¸€ä¸ªâ€œä¸Šå¸è§†è§’â€çš„å®¢è§‚å…¨æ™¯è¢«è§‚å¯Ÿã€‚</p>
<p>æœ€åï¼Œæˆ‘ä»¬éœ€è¦å°†ç›¸æœºåŠ å…¥åœºæ™¯ä¸­ï¼Œæ­£å¦‚å‰é¢æ‰€è¯´çš„æ‰€æœ‰æ¼”å‘˜ã€é“å…·ã€ç¯å…‰éƒ½å¿…é¡»æ”¾åœ¨è¿™ä¸ªèˆå°ï¼ˆåœºæ™¯ï¼‰ä¸Šã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// åˆ›å»ºç›¸æœº</span>
<span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(<span class="hljs-number">75</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> / <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">1000</span>);
<span class="hljs-comment">// è®¾ç½®ç›¸æœºæ”¾ç½®çš„ä½ç½®</span>
camera.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">400</span>);
<span class="hljs-comment">// å°†ç›¸æœºåŠ å…¥åœºæ™¯</span>
scene.<span class="hljs-title function_">add</span>(camera);
</code></pre>
<p>æœ€åï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºæ¸²æŸ“å™¨ï¼Œå°†æ‘„åƒæœºæ‹åˆ°çš„ç”»é¢ï¼Œå®é™…ç»˜åˆ¶åˆ°å±å¹•ç”»å¸ƒã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// åˆ›å»ºWebGLæ¸²æŸ“å™¨å®ä¾‹ï¼Œè¿™æ˜¯Three.jsç”¨æ¥ç»˜åˆ¶3Dåœºæ™¯çš„æ ¸å¿ƒå·¥å…·</span>
<span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>();
<span class="hljs-comment">// è®¾ç½®æ¸²æŸ“å™¨è¾“å‡ºç”»å¸ƒçš„å°ºå¯¸ä¸ºæ•´ä¸ªæµè§ˆå™¨çª—å£çš„å®½åº¦å’Œé«˜åº¦</span>
renderer.<span class="hljs-title function_">setSize</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>);
<span class="hljs-comment">// å°†æ¸²æŸ“å™¨è‡ªåŠ¨ç”Ÿæˆçš„&lt;canvas&gt;ç”»å¸ƒDOMå…ƒç´ æ·»åŠ åˆ°ç½‘é¡µçš„&lt;body&gt;ä¸­ï¼Œè¿™æ ·ç”»é¢æ‰èƒ½æ˜¾ç¤ºå‡ºæ¥</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(renderer.<span class="hljs-property">domElement</span>);
<span class="hljs-comment">// æ‰§è¡Œä¸€æ¬¡æ€§çš„æ¸²æŸ“æ“ä½œï¼šå‘½ä»¤æ¸²æŸ“å™¨ä»æŒ‡å®šç›¸æœºï¼ˆcameraï¼‰çš„è§†è§’ï¼Œå°†åœºæ™¯ï¼ˆsceneï¼‰ä¸­çš„æ‰€æœ‰ç‰©ä½“ç»˜åˆ¶åˆ°ç”»å¸ƒä¸Š</span>
renderer.<span class="hljs-title function_">render</span>(scene, camera);
</code></pre>
<p>å®é™…å®Œæ•´Demoä»£ç å¦‚ä¸‹ï¼š</p>
<p>å¦‚æœåˆ›å»ºæè´¨é€‰æ‹©MeshPhongMaterialè¿™ç§å—å…‰ç…§å½±å“çš„è¦ç´ ï¼Œé‚£ä¹ˆéœ€è¦æ·»åŠ å…‰ç…§ï¼Œå¦åˆ™çœ‹ä¸è§ã€‚å¦‚æœä½ çš„ç”»é¢çœ‹ä¸åˆ°ç‰©ä½“çš„è¯ï¼Œä½ éœ€è¦è€ƒè™‘å»çœ‹ä¸‹ä»£ç éƒ¨åˆ†ä¸­çš„æè´¨æ˜¯å¦å—å…‰ç…§å½±å“ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'three'</span>;

<span class="hljs-comment">//åˆ›å»ºåœºæ™¯</span>
<span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>();

<span class="hljs-comment">//åˆ›å»ºå‡ ä½•ä½“</span>
<span class="hljs-keyword">const</span> geometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BoxGeometry</span>(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>, <span class="hljs-number">100</span>); <span class="hljs-comment">// xï¼Œyï¼Œzä¸‰è½´</span>

<span class="hljs-comment">//åˆ›å»ºæè´¨</span>
<span class="hljs-comment">//MeshBasicMaterial è¿™ä¸ªæè´¨æ˜¯ä¸å—å…‰ç…§å½±å“</span>
<span class="hljs-comment">//MeshLambertMaterial è¿™ä¸ªæè´¨æ˜¯å—å…‰ç…§å½±å“ æ¼«åå°„æè´¨</span>
<span class="hljs-comment">//MeshPhongMaterial è¿™ä¸ªæè´¨æ˜¯å—å…‰ç…§å½±å“ é•œé¢é«˜å…‰</span>
<span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshBasicMaterial</span>({ <span class="hljs-attr">color</span>: <span class="hljs-number">0x00ff00</span> });

<span class="hljs-comment">//ç½‘æ ¼ å‡ ä½•ä½“ + æè´¨ å¯ä»¥æœ‰å¤šä¸ª</span>
<span class="hljs-keyword">const</span> mesh = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(geometry, material);

<span class="hljs-comment">//å°†ç½‘æ ¼æ·»åŠ åˆ°åœºæ™¯ä¸­</span>
scene.<span class="hljs-title function_">add</span>(mesh);


<span class="hljs-comment">// åˆ›å»ºç›¸æœº</span>
<span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(<span class="hljs-number">75</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> / <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">1000</span>);
<span class="hljs-comment">// è®¾ç½®ç›¸æœºæ”¾ç½®çš„ä½ç½®</span>
camera.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">400</span>);
<span class="hljs-comment">// å°†ç›¸æœºåŠ å…¥åœºæ™¯</span>
scene.<span class="hljs-title function_">add</span>(camera);

<span class="hljs-comment">// åˆ›å»ºWebGLæ¸²æŸ“å™¨å®ä¾‹ï¼Œè¿™æ˜¯Three.jsç”¨æ¥ç»˜åˆ¶3Dåœºæ™¯çš„æ ¸å¿ƒå·¥å…·</span>
<span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>();
<span class="hljs-comment">// è®¾ç½®æ¸²æŸ“å™¨è¾“å‡ºç”»å¸ƒçš„å°ºå¯¸ä¸ºæ•´ä¸ªæµè§ˆå™¨çª—å£çš„å®½åº¦å’Œé«˜åº¦</span>
renderer.<span class="hljs-title function_">setSize</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>);
<span class="hljs-comment">// å°†æ¸²æŸ“å™¨è‡ªåŠ¨ç”Ÿæˆçš„&lt;canvas&gt;ç”»å¸ƒDOMå…ƒç´ æ·»åŠ åˆ°ç½‘é¡µçš„&lt;body&gt;ä¸­ï¼Œè¿™æ ·ç”»é¢æ‰èƒ½æ˜¾ç¤ºå‡ºæ¥</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(renderer.<span class="hljs-property">domElement</span>);
<span class="hljs-comment">// æ‰§è¡Œä¸€æ¬¡æ€§çš„æ¸²æŸ“æ“ä½œï¼šå‘½ä»¤æ¸²æŸ“å™¨ä»æŒ‡å®šç›¸æœºï¼ˆcameraï¼‰çš„è§†è§’ï¼Œå°†åœºæ™¯ï¼ˆsceneï¼‰ä¸­çš„æ‰€æœ‰ç‰©ä½“ç»˜åˆ¶åˆ°ç”»å¸ƒä¸Š</span>
renderer.<span class="hljs-title function_">render</span>(scene, camera);
</code></pre>
<p>Three.jsåˆ›å»ºçš„Demoç”»é¢å¦‚å›¾8-2æ‰€ç¤ºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61f0874e08964505840138e55154160e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWGlhb1l1MjAwMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768370812&amp;x-signature=xbCTNDVOGgZx2cVpwlvxjpI%2BjfU%3D" alt="image-20251218205238843" loading="lazy"/></p>
<p align="center">
 <b> å›¾8-2 Three.jsåˆ›å»ºDemoç”»é¢</b>
</p>
<p>ç›®å‰æˆ‘ä»¬åœºæ™¯å†…åªæœ‰ä¸€ä¸ªæ­£æ–¹å—ç‰©ä½“ï¼Œæ­£è¢«ç›¸æœºæ‹æ‘„ç€ï¼Œä½†çœ‹ç€å°±åƒ2Dçš„ç”»é¢ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•å…¥OrbitControlsï¼ˆè½¨é“æ§åˆ¶å™¨ï¼‰æ¥å®ç°æ‹–åŠ¨æ•ˆæœï¼Œä»è€Œå®ç°3Dæ•ˆæœã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">OrbitControls</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'three/examples/jsm/controls/OrbitControls.js'</span>;
<span class="hljs-comment">//åˆ›å»ºè½¨é“æ§åˆ¶å™¨</span>
<span class="hljs-keyword">const</span> controls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrbitControls</span>(camera, renderer.<span class="hljs-property">domElement</span>);

<span class="hljs-keyword">const</span> <span class="hljs-title function_">animate</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">requestAnimationFrame</span>(animate);
    controls.<span class="hljs-title function_">update</span>();
    renderer.<span class="hljs-title function_">render</span>(scene, camera);
}
<span class="hljs-title function_">animate</span>();
</code></pre>
<p>è½¨é“æ§åˆ¶å™¨æ‹–åŠ¨æ•ˆæœå¦‚å›¾8-3æ‰€ç¤ºã€‚ç”±äºç›®å‰æ­£æ–¹ä½“æ˜¯æ²¡æœ‰è¾¹ç¼˜çº¿çš„ï¼Œå› æ­¤é™æ­¢çš„æ—¶å€™çœ‹èµ·æ¥æ›´åƒæ˜¯ä¸è§„åˆ™çš„å¹³é¢ç‰©ä½“ï¼Œæˆ‘ç¨å¾®æ·»åŠ äº†å‡ æ¡çº¢è‰²çº¿æ¡ï¼ˆä¸å¤ªè§„èŒƒï¼‰æ¥è¾…åŠ©ç†è§£ï¼Œå¤§è‡´èƒ½çœ‹å‡ºè¿™æ˜¯ä¸€ä¸ªæ­£æ–¹ä½“ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71d1e7abae4f457ca6da6babca60367a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWGlhb1l1MjAwMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768370812&amp;x-signature=j7kllwZuYREQRyG9mp8TEdQR%2B9E%3D" alt="image-20251218205731942" loading="lazy"/></p>
<p align="center">
 <b> å›¾8-3 è½¨é“æ§åˆ¶å™¨æ‹–åŠ¨æ•ˆæœ</b>
</p>
<p>ä»¥ä¸Šæ˜¯Three.jså…¥é—¨çš„ä¸€ä¸ªç®€å•æ¡ˆä¾‹ã€‚åœ¨åˆ›å»ºè½¨é“æ§åˆ¶å™¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå¹¶ä¸”ä½¿ç”¨äº†é€’å½’ï¼Œä½†ä¸ä¼šå‡ºç°æ­»å¾ªç¯å¯¼è‡´çˆ†æ ˆçš„æƒ…å†µã€‚å› ä¸ºä½¿ç”¨çš„æ˜¯æµè§ˆå™¨åŸç”ŸAPI requestAnimationFrame å®ç°çš„åŠ¨ç”»å¾ªç¯ï¼Œå®ƒå¹¶ä¸æ˜¯ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„é€’å½’æ­»å¾ªç¯ã€‚</p>
<p>ä»£ç æ­¥éª¤æ€è·¯ä¸ºä»¥ä¸‹2æ­¥ï¼š</p>
<p>ï¼ˆ1ï¼‰requestAnimationFrame(animate)ï¼šå‘æµè§ˆå™¨â€œé¢„çº¦â€ä¸‹ä¸€å¸§ï¼Œå‘Šè¯‰æµè§ˆå™¨ï¼šâ€œåœ¨ä¸‹æ¬¡å±å¹•åˆ·æ–°ç»˜åˆ¶æ—¶ï¼Œè¯·è°ƒç”¨animateå‡½æ•°â€ã€‚å®ƒä¸ä¼šç«‹å³ã€è¿ç»­åœ°è°ƒç”¨è‡ªèº«ã€‚</p>
<p>ï¼ˆ2ï¼‰æµè§ˆå™¨æ§åˆ¶èŠ‚å¥ï¼šæµè§ˆå™¨ä¼šä»¥å±å¹•åˆ·æ–°ç‡ï¼ˆé€šå¸¸æ˜¯60FPSï¼Œå³æ¯ç§’çº¦60æ¬¡ï¼‰ çš„èŠ‚å¥æ¥å›è°ƒanimateå‡½æ•°ã€‚å½“é¡µé¢éšè—æˆ–æœ€å°åŒ–æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æš‚åœè¿™äº›å›è°ƒä»¥èŠ‚çœèµ„æºã€‚</p>
<p>æ‰€ä»¥é€šè¿‡requestAnimationFrameæ‰§è¡Œå¾ªç¯ï¼Œæ¯å¸§æ‰§è¡Œå®Œåä¼šé‡Šæ”¾ä¸»çº¿ç¨‹ï¼Œç­‰å¾…æµè§ˆå™¨ä¸‹ä¸€æ¬¡ç»˜åˆ¶æ—¶æœºï¼ˆæ‰§è¡Œæ—¶æœºåœ¨DOMå›æµå’Œé‡ç»˜ä¹‹å‰ï¼‰ï¼Œæµè§ˆå™¨ç‰¢ç‰¢æŒæ§ä½ç»˜åˆ¶çš„è¿è¡Œæ—¶é—´é—´éš”ï¼Œç”šè‡³å†³å®šäº†ä»€ä¹ˆæ—¶å€™ä¼šæš‚åœï¼Œæ‰€ä»¥è‡ªç„¶ä¸ä¼šå‡ºç°æ­»å¾ªç¯çš„æƒ…å†µã€‚</p>
<p>è¿™ç§éé˜»å¡çš„åä½œå¼å¾ªç¯åœ¨æ€§èƒ½ä¼˜åŒ–ï¼ˆä¸å±å¹•åˆ·æ–°åŒæ­¥ï¼Œé¿å…ä¸å¿…è¦çš„é‡å¤æ¸²æŸ“ï¼‰ï¼ŒèŠ‚èƒ½ï¼ˆé¡µé¢ä¸å¯è§æ—¶è‡ªåŠ¨æš‚åœï¼‰å’Œæµç•…åŠ¨ç”»ï¼ˆåŠ¨ç”»æ›´æ–°ä¸å±å¹•åˆ·æ–°ç‡ä¸€è‡´ï¼‰æ–¹é¢éƒ½å¾ˆä¸é”™ã€‚è¿™ç§æŠ€æœ¯è¢«ç§°ä¸ºRAFæŠ€æœ¯ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">animate</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// é€’å½’è°ƒç”¨animate</span>
  <span class="hljs-title function_">requestAnimationFrame</span>(animate);
  controls.<span class="hljs-title function_">update</span>();
  renderer.<span class="hljs-title function_">render</span>(scene, camera);
}
<span class="hljs-title function_">animate</span>();
</code></pre>
<p>é€šè¿‡ä»¥ä¸Šæ€è·¯ï¼Œéœ€è¦å…ˆæœ‰æ•´ä½“çš„åœºæ™¯ï¼Œç„¶åå¾€åœºæ™¯é‡Œæ·»åŠ è¢«è§‚å¯Ÿå¯¹è±¡ï¼ˆæ¼”å‘˜ã€é“å…·ã€ç¯å…‰ç­‰ï¼‰ï¼Œæ¥ç€æ˜¯è§‚å¯Ÿå¯¹è±¡ï¼ˆç›¸æœºï¼‰ï¼Œæœ€åç”¨æ¸²æŸ“å™¨å°†ç›¸æœºæ‹åˆ°çš„ç”»é¢æ¸²æŸ“å‡ºæ¥ã€‚åœ¨è¿™é‡Œåœºæ™¯æ˜¯æˆ‘ä»¬ï¼ˆå¯¼æ¼”ï¼‰çš„è§†è§’ï¼Œè€Œæ‘„åƒæœºæ‰æ˜¯è§‚ä¼—çš„è§†è§’ã€‚ç›¸æœºæ‰€æ‹æ‘„çš„éƒ¨åˆ†æ‰æ˜¯æˆ‘ä»¬æƒ³å±•ç°çš„éƒ¨åˆ†ã€‚æˆ‘ä»¬åº”è¯¥ä»å®é™…æ‘„å½±æ‰€å¸¦æ¥çš„ç»éªŒä¸­å»æ€è€ƒå¦‚ä½•æ‹æ‘„ã€‚</p>
<h2 data-id="heading-2">8.3 æ·»åŠ ç¯å…‰</h2>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¿®æ”¹æè´¨ï¼Œå°†å…¶è®¾ç½®ä¸ºMeshPhongMaterialè¿™ç§å—å…‰ç…§å½±å“çš„æè´¨ï¼Œç„¶ååŠ å…¥ç¯å…‰ï¼Œçœ‹æ•ˆæœå¦‚ä½•ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshPhongMaterial</span>({ <span class="hljs-attr">color</span>: <span class="hljs-number">0x00ff00</span> });

<span class="hljs-comment">// æ·»åŠ å¹³è¡Œå…‰æºï¼ˆæ¨¡æ‹Ÿå¤ªé˜³å…‰ï¼‰</span>
<span class="hljs-keyword">const</span> directionalLight = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">DirectionalLight</span>(<span class="hljs-number">0xffffff</span>, <span class="hljs-number">1</span>);
directionalLight.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>).<span class="hljs-title function_">normalize</span>();
scene.<span class="hljs-title function_">add</span>(directionalLight);
</code></pre>
<p>æ¨¡æ‹Ÿå¤ªé˜³å…‰å¯¹æè´¨è¿›è¡Œç…§å°„å¦‚å›¾8-4æ‰€ç¤ºã€‚å¯è§ç‰©ä½“å‘ˆç°äº†ä¸ä¸€æ ·çš„è´¨æ„Ÿã€‚åƒå¤ªé˜³å…‰å±äºå¹³è¡Œå…‰çš„ä¸€ç§ï¼Œåªèƒ½ç…§å°„åˆ°æ­£æ–¹ä½“çš„æ­£é¢ï¼Œå› æ­¤æ­£æ–¹ä½“èƒŒé¢è¿˜æ˜¯ä¸å¯è§çš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7ac1e4caf8141b3a92c891769fedadf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWGlhb1l1MjAwMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768370812&amp;x-signature=V0eQMp3ZHh6YumFDXGrNebYEFe8%3D" alt="image-20251218211611489" loading="lazy"/></p>
<p align="center">
 <b> å›¾8-4 æ¨¡æ‹Ÿå¤ªé˜³å…‰</b>
</p>
<p>åœ¨Three.jsä¸­ï¼Œç¯å…‰æ˜¯å¡‘é€ ä¸‰ç»´ç©ºé—´ä½“ç§¯æ„Ÿã€æè´¨å±æ€§å’Œåœºæ™¯æ°›å›´çš„æ ¸å¿ƒå·¥å…·ï¼Œæœ¬è´¨ä¸Šæ˜¯é€šè¿‡æ¨¡æ‹Ÿå…‰çº¿ä¸ç‰©ä½“æè´¨çš„äº¤äº’æ¥å®šä¹‰è§†è§‰å±‚æ¬¡ã€‚ä¸»è¦åˆ†ä¸ºå››ç§åŸºæœ¬ç±»å‹ï¼š</p>
<p>ï¼ˆ1ï¼‰ç¯å¢ƒå…‰æä¾›å‡åŒ€æ— æ–¹å‘çš„åŸºåº•ç…§æ˜ï¼Œå¦‚åŒé˜´å¤©çš„æ¼«å°„å…‰ï¼Œç”¨äºæ¶ˆé™¤çº¯é»‘é˜´å½±ï¼›</p>
<p>ï¼ˆ2ï¼‰å¹³è¡Œå…‰æ¨¡æ‹Ÿæ— é™è¿œå¤„çš„å…‰æºï¼ˆå¦‚å¤ªé˜³ï¼‰ï¼Œå‘å‡ºå¹³è¡Œå…‰çº¿ï¼Œäº§ç”Ÿæ–¹å‘æ˜ç¡®çš„é˜´å½±ï¼Œé€‚åˆæˆ·å¤–åœºæ™¯ï¼›</p>
<p>ï¼ˆ3ï¼‰ç‚¹å…‰æºä»ä¸€ä¸ªç‚¹å‘æ‰€æœ‰æ–¹å‘å‡åŒ€è¾å°„å…‰çº¿ï¼Œåƒç¯æ³¡æˆ–èœ¡çƒ›ï¼Œèƒ½è¥é€ çœŸå®çš„è¡°å‡å’ŒæŸ”å’Œçš„æ˜æš—è¿‡æ¸¡ï¼›</p>
<p>ï¼ˆ4ï¼‰èšå…‰ç¯åˆ™å½¢æˆé”¥å½¢çš„å…‰æŸï¼Œåƒæ‰‹ç”µç­’æˆ–èˆå°è¿½å…‰ï¼Œå¸¦æœ‰æ¸…æ™°çš„ç…§å°„èŒƒå›´å’Œè¾¹ç¼˜è¡°å‡ï¼Œå¸¸ç”¨äºçªå‡ºç‰¹å®šç‰©ä½“æˆ–åˆ¶é€ æˆå‰§æ€§ç„¦ç‚¹ã€‚</p>
<p>å®é™…åº”ç”¨ä¸­ï¼Œé€šå¸¸éœ€è¦ç»„åˆå¤šç§ç¯å…‰â€”â€”ä¾‹å¦‚ç”¨ç¯å¢ƒå…‰å¥ å®šåŸºè°ƒï¼Œå†ç”¨å¹³è¡Œå…‰æˆ–ç‚¹å…‰æºåˆ»ç”»ä¸»æ¬¡å’ŒæŠ•å½±â€”â€”æ‰èƒ½æ„å»ºå‡ºæ—¢æœ‰å±‚æ¬¡åˆè‡ªç„¶å¯ä¿¡çš„ä¸‰ç»´è§†è§‰ç©ºé—´ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•åœ¨ Rust ä¸­ä»¥æƒ¯ç”¨æ–¹å¼ä½¿ç”¨å…¨å±€å˜é‡]]></title>    <link>https://juejin.cn/post/7592241336289706035</link>    <guid>https://juejin.cn/post/7592241336289706035</guid>    <pubDate>2026-01-07T06:27:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592241336289706035" data-draft-id="7592382702943371310" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•åœ¨ Rust ä¸­ä»¥æƒ¯ç”¨æ–¹å¼ä½¿ç”¨å…¨å±€å˜é‡"/> <meta itemprop="keywords" content="åç«¯,Rust"/> <meta itemprop="datePublished" content="2026-01-07T06:27:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xuejianxinokok"/> <meta itemprop="url" content="https://juejin.cn/user/2115899365524222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•åœ¨ Rust ä¸­ä»¥æƒ¯ç”¨æ–¹å¼ä½¿ç”¨å…¨å±€å˜é‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2115899365524222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xuejianxinokok
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T06:27:56.000Z" title="Wed Jan 07 2026 06:27:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¦‚ä½•åœ¨ Rust ä¸­ä»¥æƒ¯ç”¨æ–¹å¼ä½¿ç”¨å…¨å±€å˜é‡</h2>
<p>åœ¨ Rust ä¸­å£°æ˜å’Œä½¿ç”¨å…¨å±€å˜é‡å¯èƒ½æ¯”è¾ƒæ£˜æ‰‹ã€‚Rust é€šå¸¸é€šè¿‡å¼ºåˆ¶æˆ‘ä»¬éå¸¸æ˜ç¡®åœ°å®šä¹‰å…¨å±€å˜é‡æ¥ç¡®ä¿å…¶å¥å£®æ€§ã€‚</p>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†è®¨è®º Rust ç¼–è¯‘å™¨æƒ³è¦é¿å…çš„é™·é˜±ã€‚ç„¶åï¼Œæˆ‘å°†å‘æ‚¨å±•ç¤ºé’ˆå¯¹ä¸åŒåœºæ™¯çš„æœ€ä½³è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-1">å…³é”®è¦ç‚¹</h3>
<ul>
<li>åœ¨ Rust ä¸­ï¼Œå£°æ˜å…¨å±€å˜é‡æ—¶åº”ä½¿ç”¨ <code>static</code> æˆ– <code>const</code>ï¼Œå› ä¸ºåœ¨å…¨å±€ä½œç”¨åŸŸä¸­ä¸å…è®¸ä½¿ç”¨ <code>let</code>ã€‚</li>
<li>å¯¹äº<strong>çº¿ç¨‹å®‰å…¨</strong>çš„è¿è¡Œæ—¶å…¨å±€å˜é‡åˆå§‹åŒ–ï¼Œè¯·è€ƒè™‘ä½¿ç”¨ <code>std::sync::Once</code> æˆ–å¤–éƒ¨åº“ï¼Œå¦‚ <code>lazy_static</code> æˆ– <code>once_cell</code>ã€‚</li>
<li>ç”±äºå­˜åœ¨æ½œåœ¨çš„å®‰å…¨é—®é¢˜ï¼Œè¯·é¿å…ç›´æ¥ä½¿ç”¨ <code>static mut</code>ï¼›è€Œæ˜¯å°†è®¿é—®æ“ä½œåŒ…è£…åœ¨ <code>unsafe</code> ä»£ç å—ä¸­ï¼Œæˆ–è€…ä½¿ç”¨äº’æ–¥é”ç­‰åŒæ­¥åŸè¯­ã€‚</li>
<li>å¯¹äºå•çº¿ç¨‹åº”ç”¨ç¨‹åºï¼Œ<code>thread_local!</code> å®å¯ä»¥æä¾›ä¸€ç§å®‰å…¨çš„æ–¹å¼æ¥å¤„ç†å…¨å±€çŠ¶æ€ï¼Œè€Œ<strong>æ— éœ€è¿›è¡ŒåŒæ­¥</strong>ã€‚</li>
<li>å°½å¯èƒ½å°†å…¨å±€å˜é‡é‡æ„ä¸ºå±€éƒ¨ä½œç”¨åŸŸï¼Œä½¿ç”¨åƒ <code>Arc</code> è¿™æ ·çš„æ™ºèƒ½æŒ‡é’ˆæ¥å®ç°å…±äº«æ‰€æœ‰æƒå’Œçº¿ç¨‹å®‰å…¨ã€‚</li>
<li>äº†è§£ Rust ä¸­ <code>const</code> å’Œ <code>static</code> çš„åŒºåˆ«ï¼š<code>const</code> å˜é‡æ˜¯å†…è”çš„ä¸”ä¸å¯å˜çš„(const åœ¨ç¼–è¯‘æ—¶ç›´æ¥ä½¿ç”¨å˜é‡å†…å®¹æ›¿æ¢äº†å˜é‡,å­˜åœ¨å¤šä»½æ•°æ®)ï¼Œè€Œ <code>static</code> å˜é‡å¯ä»¥å…·æœ‰å¯å˜çŠ¶æ€ï¼Œå¹¶å¯é€šè¿‡åŸå­ç±»å‹æˆ–äº’æ–¥é”ç­‰å†…éƒ¨å¯å˜æ€§é€‰é¡¹æ¥å®ç°ã€‚</li>
</ul>
<h3 data-id="heading-2">æ¦‚è¿°</h3>
<p>åœ¨ Rust ä¸­å®ç°å…¨å±€çŠ¶æ€æœ‰å¾ˆå¤šç§æ–¹æ³•ã€‚å¦‚æœæ‚¨æ—¶é—´ç´§è¿«ï¼Œè¿™é‡Œå¿«é€Ÿæ¦‚è¿°ä¸€ä¸‹æˆ‘çš„å»ºè®®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/69307f3d1cfd4665a1725662822bbdc6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768372076&amp;x-signature=trNcuqXG3Wq6RHWK30OumM%2B0ch8%3D" alt="A Flowchart for finding the best solution for global variables" loading="lazy"/></p>
<p>æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹é“¾æ¥è·³è½¬åˆ°æœ¬æ–‡çš„ç‰¹å®šç« èŠ‚ï¼š</p>
<ul>
<li>æ— å…¨å±€å˜é‡ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.sitepoint.com%2Frust-global-variables%2F%23refactortheexample" target="_blank" title="https://www.sitepoint.com/rust-global-variables/#refactortheexample" ref="nofollow noopener noreferrer">é‡æ„ä¸º Arc / Rc</a></li>
<li><strong>ç¼–è¯‘æ—¶</strong>åˆå§‹åŒ–çš„å…¨å±€å˜é‡ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.sitepoint.com%2Frust-global-variables%2F%23whenthevalueisknownatcompiletime" target="_blank" title="https://www.sitepoint.com/rust-global-variables/#whenthevalueisknownatcompiletime" ref="nofollow noopener noreferrer">const T / static T</a></li>
<li>ä½¿ç”¨å¤–éƒ¨åº“å¯ä»¥è½»æ¾å®ç°è¿è¡Œæ—¶åˆå§‹åŒ–çš„å…¨å±€å˜é‡ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.sitepoint.com%2Frust-global-variables%2F%23externallibraries" target="_blank" title="https://www.sitepoint.com/rust-global-variables/#externallibraries" ref="nofollow noopener noreferrer">lazy_static / once_cell</a></li>
<li>å®ç°ä½ è‡ªå·±çš„è¿è¡Œæ—¶åˆå§‹åŒ–ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.sitepoint.com%2Frust-global-variables%2F%23multithreadedglobalswithruntimeinitialization" target="_blank" title="https://www.sitepoint.com/rust-global-variables/#multithreadedglobalswithruntimeinitialization" ref="nofollow noopener noreferrer">std::sync::Once + static mut T</a></li>
<li>é’ˆå¯¹å•çº¿ç¨‹è¿è¡Œæ—¶åˆå§‹åŒ–çš„ç‰¹æ®Šæƒ…å†µï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.sitepoint.com%2Frust-global-variables%2F%23singlethreadedglobalswithruntimeinitialization" target="_blank" title="https://www.sitepoint.com/rust-global-variables/#singlethreadedglobalswithruntimeinitialization" ref="nofollow noopener noreferrer">thread_local</a></li>
</ul>
<h3 data-id="heading-3">Rust ä¸­ä½¿ç”¨å…¨å±€å˜é‡çš„åˆæ¬¡å°è¯•</h3>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªå…¨å±€å˜é‡ä½¿ç”¨ä¸å½“çš„ä¾‹å­ã€‚å‡è®¾æˆ‘æƒ³æŠŠç¨‹åºçš„å¯åŠ¨æ—¶é—´å­˜å‚¨åœ¨ä¸€ä¸ªå…¨å±€å­—ç¬¦ä¸²ä¸­ã€‚ä¹‹åï¼Œæˆ‘æƒ³ä»å¤šä¸ªçº¿ç¨‹è®¿é—®è¿™ä¸ªå€¼ã€‚</p>
<p>Rust åˆå­¦è€…å¯èƒ½ä¼šæƒ³å½“ç„¶åœ°ä½¿ç”¨ <code>let</code> æ¥å£°æ˜å…¨å±€å˜é‡ï¼Œå°±åƒå£°æ˜å…¶ä»– Rust å˜é‡ä¸€æ ·ã€‚å®Œæ•´çš„ç¨‹åºå¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> chrono::Utc;

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">START_TIME</span> = Utc::<span class="hljs-title function_ invoke__">now</span>().<span class="hljs-title function_ invoke__">to_string</span>();

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">thread_1</span> = std::thread::<span class="hljs-title function_ invoke__">spawn</span>(||{
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Started {}, called thread 1 {}"</span>, START_TIME.<span class="hljs-title function_ invoke__">as_ref</span>().<span class="hljs-title function_ invoke__">unwrap</span>(), Utc::<span class="hljs-title function_ invoke__">now</span>());
    });
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">thread_2</span> = std::thread::<span class="hljs-title function_ invoke__">spawn</span>(||{
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Started {}, called thread 2 {}"</span>, START_TIME.<span class="hljs-title function_ invoke__">as_ref</span>().<span class="hljs-title function_ invoke__">unwrap</span>(), Utc::<span class="hljs-title function_ invoke__">now</span>());
    });

    <span class="hljs-comment">// Join threads and panic on error to show what went wrong</span>
    thread_1.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    thread_2.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
}
</code></pre>
<p>ä½ è‡ªå·±å»<a href="https://link.juejin.cn?target=https%3A%2F%2Fplay.rust-lang.org%2F%3Fversion%3Dstable%26mode%3Ddebug%26edition%3D2018%26gist%3D51f73323b3d86ebbb1a89376d9235850" target="_blank" title="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=51f73323b3d86ebbb1a89376d9235850" ref="nofollow noopener noreferrer">rust  playgroud</a>ä¸Šè¯•è¯•å§ï¼</p>
<p>è¿™æ˜¯ Rust ä¸­æ— æ•ˆçš„è¯­æ³•ã€‚<code>let</code> ä¸èƒ½ç”¨äºå…¨å±€ä½œç”¨åŸŸã€‚æˆ‘ä»¬åªèƒ½ä½¿ç”¨ <code>static</code> æˆ– <code>const</code> .  è€Œ<code>const</code> å£°æ˜çš„æ˜¯ä¸€ä¸ªçœŸæ­£çš„å¸¸é‡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå˜é‡ã€‚åªæœ‰ <code>static</code> æ‰èƒ½å£°æ˜ä¸€ä¸ªå…¨å±€å˜é‡ã€‚</p>
<p>å…¶èƒŒåçš„åŸå› æ˜¯ï¼Œ <code>let</code> åœ¨è¿è¡Œæ—¶å°†å˜é‡åˆ†é…åˆ°<strong>æ ˆ</strong>ä¸Šã€‚è¯·æ³¨æ„ï¼Œå³ä½¿åœ¨å †ä¸Šåˆ†é…å˜é‡ï¼Œä¾‹å¦‚ <code>let t = Box::new();</code> ï¼Œæƒ…å†µä¹Ÿæ˜¯å¦‚æ­¤ã€‚åœ¨ç”Ÿæˆçš„æœºå™¨ä»£ç ä¸­ï¼Œä»ç„¶å­˜åœ¨ä¸€ä¸ªæŒ‡å‘å †çš„æŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆæœ€ç»ˆä¼šè¢«å­˜å‚¨åœ¨æ ˆä¸Šã€‚</p>
<p>å…¨å±€å˜é‡å­˜å‚¨åœ¨ç¨‹åºçš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FData_segment" target="_blank" title="https://en.wikipedia.org/wiki/Data_segment" ref="nofollow noopener noreferrer">æ•°æ®æ®µ</a>ä¸­ã€‚å®ƒä»¬çš„åœ°å€æ˜¯å›ºå®šçš„ï¼Œåœ°å€åœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´ä¸ä¼šæ”¹å˜ã€‚è€Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FData_segment%23Text" target="_blank" title="https://en.wikipedia.org/wiki/Data_segment#Text" ref="nofollow noopener noreferrer">ä»£ç æ®µ</a>å¯ä»¥åŒ…å«å¸¸é‡åœ°å€ï¼Œå¹¶ä¸”å®Œå…¨ä¸éœ€è¦å ç”¨æ ˆç©ºé—´ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8479d19dcc004b3bbf9fd38a7a37867b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeHVlamlhbnhpbm9rb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768372076&amp;x-signature=lFz3vCotI%2BfmMCfpR%2Fa4o1GuuUo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¥½çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ç°åœ¨å¯ä»¥ç†è§£ä¸ºä»€ä¹ˆéœ€è¦ä¸åŒçš„è¯­æ³•äº†ã€‚Rust ä½œä¸ºä¸€ç§ç°ä»£ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ï¼Œå¸Œæœ›éå¸¸æ˜ç¡®åœ°ç®¡ç†å†…å­˜ã€‚</p>
<p>è®©æˆ‘ä»¬å†è¯•ä¸€æ¬¡ <code>static</code> ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> chrono::Utc;

<span class="hljs-keyword">static</span> START_TIME: <span class="hljs-type">String</span> = Utc::<span class="hljs-title function_ invoke__">now</span>().<span class="hljs-title function_ invoke__">to_string</span>();

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>ç¼–è¯‘å™¨è¿˜ä¸æ»¡æ„ï¼š</p>
<pre><code class="hljs language-rust" lang="rust">error[E0015]: calls <span class="hljs-keyword">in</span> statics are limited to constant functions, tuple structs and tuple variants
 -<span class="hljs-punctuation">-&gt;</span> src/main.rs:<span class="hljs-number">3</span>:<span class="hljs-number">24</span>
  |
<span class="hljs-number">3</span> | <span class="hljs-keyword">static</span> start: <span class="hljs-type">String</span> = Utc::<span class="hljs-title function_ invoke__">now</span>().<span class="hljs-title function_ invoke__">to_string</span>();
  |                        ^^^^^^^^^^^^^^^^^^^^^^
</code></pre>
<p>å—¯ï¼Œæ‰€ä»¥é™æ€å˜é‡çš„åˆå§‹å€¼ä¸èƒ½åœ¨è¿è¡Œæ—¶è®¡ç®—ã€‚é‚£æˆ–è®¸å°±è®©å®ƒä¿æŒæœªåˆå§‹åŒ–çŠ¶æ€å§ï¼Ÿ</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> chrono::Utc;

<span class="hljs-keyword">static</span> START_TIME;

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>è¿™å°†äº§ç”Ÿä¸€ä¸ªæ–°çš„é”™è¯¯ï¼š</p>
<pre><code class="hljs language-rust" lang="rust">Compiling playground v0.<span class="hljs-number">0.1</span> (/playground)
error: free <span class="hljs-keyword">static</span> item without body
 -<span class="hljs-punctuation">-&gt;</span> src/main.rs:<span class="hljs-number">21</span>:<span class="hljs-number">1</span>
  |
<span class="hljs-number">3</span> | <span class="hljs-keyword">static</span> START_TIME;
  | ^^^^^^^^^^^^^^^^^-
  |                  |
  |                  help: provide a definition <span class="hljs-keyword">for</span> <span class="hljs-title class_">the</span> <span class="hljs-keyword">static</span>: `= &lt;expr&gt;;`
</code></pre>
<p>æ‰€ä»¥è¿™ä¸ªæ–¹æ³•ä¹Ÿä¸è¡Œï¼æ‰€æœ‰é™æ€å€¼<strong>å¿…é¡»åœ¨ä»»ä½•ç”¨æˆ·ä»£ç è¿è¡Œä¹‹å‰å®Œå…¨åˆå§‹åŒ–å¹¶æœ‰æ•ˆ</strong>ã€‚</p>
<p>å¦‚æœä½ æ˜¯ä»å…¶ä»–è¯­è¨€ï¼ˆä¾‹å¦‚ JavaScript æˆ– Pythonï¼‰è½¬è€Œä½¿ç”¨ Rustï¼Œè¿™æˆ–è®¸ä¼šæ˜¾å¾—è¿‡äºé™åˆ¶ã€‚ä½†ä»»ä½•ä¸€ä½ C++ é«˜æ‰‹éƒ½èƒ½è·Ÿä½ è®²è®²<a href="https://link.juejin.cn?target=https%3A%2F%2Fen.cppreference.com%2Fw%2Fcpp%2Flanguage%2Fsiof" target="_blank" title="https://en.cppreference.com/w/cpp/language/siof" ref="nofollow noopener noreferrer">é™æ€åˆå§‹åŒ–é¡ºåºçš„æƒ¨ç—›</a>æ•™è®­ï¼Œå¦‚æœæˆ‘ä»¬ä¸å°å¿ƒï¼Œå°±å¯èƒ½å¯¼è‡´æœªå®šä¹‰çš„åˆå§‹åŒ–é¡ºåºã€‚</p>
<p>ä¾‹å¦‚ï¼Œæƒ³è±¡ä¸€ä¸‹è¿™æ ·çš„æƒ…å†µï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">static</span> A: <span class="hljs-type">u32</span> = <span class="hljs-title function_ invoke__">foo</span>();
<span class="hljs-keyword">static</span> B: <span class="hljs-type">u32</span> = <span class="hljs-title function_ invoke__">foo</span>();
<span class="hljs-keyword">static</span> C: <span class="hljs-type">u32</span> = A + B;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">foo</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span> {
    C + <span class="hljs-number">1</span>
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"A: {} B: {} C: {}"</span>, A, B, C);
}
</code></pre>
<p>ç”±äºå¾ªç¯ä¾èµ–ï¼Œè¿™æ®µä»£ç ç‰‡æ®µä¸­å­˜åœ¨  ä¸ å®‰å…¨çš„åˆå§‹åŒ–é¡ºåºã€‚</p>
<p>å¦‚æœæ˜¯ C++ï¼Œå®ƒä¸å…³å¿ƒå®‰å…¨æ€§ï¼Œç»“æœå°†æ˜¯ <code>A: 1 B: 1 C: 2</code> å®ƒåœ¨ä»»ä½•ä»£ç è¿è¡Œä¹‹å‰è¿›è¡Œé›¶åˆå§‹åŒ–ï¼Œç„¶åé¡ºåºåœ¨æ¯ä¸ªç¼–è¯‘å•å…ƒå†…ä»ä¸Šåˆ°ä¸‹å®šä¹‰ã€‚</p>
<p>è‡³å°‘ç»“æœå·²ç»æ˜ç¡®ã€‚ç„¶è€Œï¼Œå½“é™æ€å˜é‡æ¥è‡ªä¸åŒçš„ <code>.cpp</code> æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸åŒçš„ç¼–è¯‘å•å…ƒæ—¶ï¼Œé—®é¢˜å°±å‡ºç°äº†ã€‚è¿™æ—¶ï¼Œå˜é‡çš„é¡ºåºå°±æ— æ³•ç¡®å®šï¼Œé€šå¸¸å–å†³äºç¼–è¯‘å‘½ä»¤è¡Œä¸­æ–‡ä»¶çš„é¡ºåºã€‚</p>
<p>åœ¨ Rust ä¸­ï¼Œ<strong>é›¶åˆå§‹åŒ–æ˜¯ä¸å…è®¸çš„</strong>ã€‚æ¯•ç«Ÿï¼Œé›¶å¯¹äºå¾ˆå¤šç±»å‹ï¼ˆä¾‹å¦‚ <code>Box</code> æ¥è¯´éƒ½æ˜¯æ— æ•ˆå€¼ã€‚æ­¤å¤–ï¼ŒRust ä¹Ÿä¸æ¥å—å¥‡æ€ªçš„é¡ºåºé—®é¢˜ã€‚åªè¦æˆ‘ä»¬é¿å…ä½¿ç”¨ <code>unsafe</code> ï¼Œç¼–è¯‘å™¨å°±åº”è¯¥åªå…è®¸æˆ‘ä»¬ç¼–å†™åˆç†çš„ä»£ç ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç¼–è¯‘å™¨ä¼šé˜»æ­¢æˆ‘ä»¬ä½¿ç”¨ç›´æ¥çš„è¿è¡Œæ—¶åˆå§‹åŒ–ã€‚</p>
<p>ä½†æˆ‘èƒ½å¦é€šè¿‡ä½¿ç”¨ <code>None</code> ï¼ˆç›¸å½“äºç©ºæŒ‡é’ˆï¼‰æ¥ç»•è¿‡åˆå§‹åŒ–å‘¢ï¼Ÿè‡³å°‘è¿™å®Œå…¨ç¬¦åˆ Rust çš„ç±»å‹ç³»ç»Ÿã€‚æˆ‘è‚¯å®šå¯ä»¥æŠŠåˆå§‹åŒ–ä»£ç ç§»åˆ° main å‡½æ•°çš„é¡¶éƒ¨ï¼Œå¯¹å§ï¼Ÿ</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">static</span> <span class="hljs-keyword">mut</span> START_TIME: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt; = <span class="hljs-literal">None</span>;

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    START_TIME = <span class="hljs-title function_ invoke__">Some</span>(Utc::<span class="hljs-title function_ invoke__">now</span>().<span class="hljs-title function_ invoke__">to_string</span>());
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>å‘ƒï¼Œæˆ‘ä»¬é‡åˆ°çš„é”™è¯¯æ˜¯â€¦â€¦</p>
<pre><code class="hljs language-rust" lang="rust">error[E0133]: <span class="hljs-keyword">use</span> of mutable <span class="hljs-keyword">static</span> is <span class="hljs-keyword">unsafe</span> and requires <span class="hljs-keyword">unsafe</span> function or block
  -<span class="hljs-punctuation">-&gt;</span> src/main.rs:<span class="hljs-number">24</span>:<span class="hljs-number">5</span>
  |
<span class="hljs-number">6</span> |     START_TIME = <span class="hljs-title function_ invoke__">Some</span>(Utc::<span class="hljs-title function_ invoke__">now</span>().<span class="hljs-title function_ invoke__">to_string</span>());
  |     ^^^^^^^^^^ <span class="hljs-keyword">use</span> of mutable <span class="hljs-keyword">static</span>
  |
  = note: mutable statics can be mutated by multiple threads: aliasing violations or data races will cause undefined behavior
</code></pre>
<p>æ­¤æ—¶ï¼Œæˆ‘å¯ä»¥æŠŠå®ƒæ”¾åœ¨ä¸€ä¸ª <code>unsafe{...}</code> ä»£ç å—é‡Œï¼Œè¿™æ ·å°±èƒ½æ­£å¸¸è¿è¡Œã€‚<strong>æœ‰æ—¶å€™ï¼Œè¿™ç¡®å®æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ç­–ç•¥ï¼Œæ¯”å¦‚ç”¨æ¥æµ‹è¯•ä»£ç çš„å…¶ä½™éƒ¨åˆ†æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œ</strong>ã€‚ä½†è¿™å¹¶ä¸æ˜¯æˆ‘æƒ³å‘ä½ å±•ç¤ºçš„æƒ¯ç”¨æ–¹æ³•ã€‚æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬æ¥æ¢è®¨ä¸€ä¸‹ç¼–è¯‘å™¨ä¿è¯å®‰å…¨çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-4">é‡æ„ç¤ºä¾‹</h3>
<p>æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œè¿™ä¸ªä¾‹å­å®Œå…¨ä¸éœ€è¦å…¨å±€å˜é‡ã€‚è€Œä¸”é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬èƒ½æƒ³åˆ°ä¸ç”¨å…¨å±€å˜é‡çš„è§£å†³æ–¹æ¡ˆï¼Œå°±åº”è¯¥é¿å…ä½¿ç”¨å®ƒä»¬ã€‚</p>
<p>è¿™é‡Œçš„æƒ³æ³•æ˜¯å°†å£°æ˜æ”¾åœ¨ä¸»å‡½æ•°å†…éƒ¨ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">start_time</span> = Utc::<span class="hljs-title function_ invoke__">now</span>().<span class="hljs-title function_ invoke__">to_string</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">thread_1</span> = std::thread::<span class="hljs-title function_ invoke__">spawn</span>(||{
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Started {}, called thread 1 {}"</span>, &amp;start_time, Utc::<span class="hljs-title function_ invoke__">now</span>());
    });
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">thread_2</span> = std::thread::<span class="hljs-title function_ invoke__">spawn</span>(||{
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Started {}, called thread 2 {}"</span>, &amp;start_time, Utc::<span class="hljs-title function_ invoke__">now</span>());
    });

    <span class="hljs-comment">// Join threads and panic on error to show what went wrong</span>
    thread_1.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    thread_2.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
}
</code></pre>
<p>å”¯ä¸€çš„é—®é¢˜æ˜¯é€šä¸è¿‡borrowæ£€æŸ¥å™¨ï¼š</p>
<pre><code class="hljs language-rust" lang="rust">error[E0373]: closure may outlive the current function, but it borrows `start_time`, which is owned by the current function
  -<span class="hljs-punctuation">-&gt;</span> src/main.rs:<span class="hljs-number">42</span>:<span class="hljs-number">39</span>
   |
<span class="hljs-number">42</span> |     <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">thread_1</span> = std::thread::<span class="hljs-title function_ invoke__">spawn</span>(||{
   |                                       ^^ may outlive borrowed value `start_time`
<span class="hljs-number">43</span> |         <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Started {}, called thread 1 {}"</span>, &amp;start_time, Utc::<span class="hljs-title function_ invoke__">now</span>());
   |                                                     ---------- `start_time` is borrowed here
   |
note: function requires argument <span class="hljs-keyword">type</span> <span class="hljs-title class_">to</span> outlive `<span class="hljs-symbol">'static</span>`
</code></pre>
<p>è¿™ä¸ªé”™è¯¯å¹¶ä¸ååˆ†æ˜æ˜¾ã€‚ç¼–è¯‘å™¨å‘Šè¯‰æˆ‘ä»¬ï¼Œæ–°åˆ›å»ºçš„çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå¯èƒ½æ¯” <code>start_time</code> å€¼æ›´é•¿ï¼Œè€Œ start_time å€¼å­˜åœ¨äº main å‡½æ•°çš„æ ˆå¸§ä¸­ã€‚</p>
<p>ä»æŠ€æœ¯ä¸Šè®²ï¼Œè¿™æ˜¯ä¸å¯èƒ½çš„ã€‚çº¿ç¨‹æ˜¯è¢«joinçš„ï¼Œå› æ­¤mainçº¿ç¨‹ä¸ä¼šåœ¨å­çº¿ç¨‹å®Œæˆä¹‹å‰é€€å‡ºã€‚</p>
<p>ä½†ç¼–è¯‘å™¨ä¸å¤Ÿæ™ºèƒ½ï¼Œæ— æ³•å¤„ç†è¿™ç§ç‰¹æ®Šæƒ…å†µã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå½“åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹æ—¶ï¼Œæä¾›çš„é—­åŒ…åªèƒ½å€Ÿç”¨å…·æœ‰<strong>é™æ€ç”Ÿå‘½å‘¨æœŸ</strong>çš„å…ƒç´ ã€‚æ¢å¥è¯è¯´ï¼Œå€Ÿç”¨çš„å€¼å¿…é¡»åœ¨æ•´ä¸ªç¨‹åºç”Ÿå‘½å‘¨æœŸå†…éƒ½ä¿æŒæœ‰æ•ˆã€‚</p>
<p>å¯¹äºåˆšå¼€å§‹å­¦ä¹  Rust çš„äººæ¥è¯´ï¼Œä½ å¯èƒ½ä¼šæƒ³ç›´æ¥ä½¿ç”¨å…¨å±€å˜é‡ã€‚ä½†è‡³å°‘æœ‰ä¸¤ç§æ–¹æ³•æ¯”è¿™ç®€å•å¾—å¤šã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯å¤åˆ¶å­—ç¬¦ä¸²å€¼ï¼Œç„¶åå°†å­—ç¬¦ä¸²çš„æ‰€æœ‰æƒè½¬ç§»åˆ°é—­åŒ…ä¸­ã€‚å½“ç„¶ï¼Œè¿™éœ€è¦é¢å¤–çš„å†…å­˜åˆ†é…ã€‚ä½†åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå®ƒ<strong>åªæ˜¯ä¸€ä¸ªçŸ­å­—ç¬¦ä¸²ï¼Œ(å¤åˆ¶)å¯¹æ€§èƒ½å½±å“ä¸å¤§</strong>ã€‚</p>
<p>ä½†å¦‚æœè¦<strong>å…±äº«çš„å¯¹è±¡å¾ˆå¤§</strong>å‘¢ï¼Ÿå¦‚æœæ‚¨ä¸æƒ³å…‹éš†å®ƒï¼Œå¯ä»¥å°†å…¶åŒ…è£…åœ¨å¼•ç”¨è®¡æ•°æ™ºèƒ½æŒ‡é’ˆä¹‹å <a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstd%2Frc%2Fstruct.Rc.html" target="_blank" title="https://doc.rust-lang.org/std/rc/struct.Rc.html" ref="nofollow noopener noreferrer">ã€‚Rc</a> æ˜¯å•çº¿ç¨‹å¼•ç”¨è®¡æ•°ç±»å‹ã€‚Arc æ˜¯<a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstd%2Fsync%2Fstruct.Arc.html" target="_blank" title="https://doc.rust-lang.org/std/sync/struct.Arc.html" ref="nofollow noopener noreferrer">åŸå­</a>ç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨çº¿ç¨‹é—´å®‰å…¨åœ°å…±äº«å€¼ã€‚</p>
<p>å› æ­¤ï¼Œä¸ºäº†æ»¡è¶³ç¼–è¯‘å™¨çš„è¦æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>Arc</code> ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">/* Final Solution */</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">start_time</span> = Arc::<span class="hljs-title function_ invoke__">new</span>(Utc::<span class="hljs-title function_ invoke__">now</span>().<span class="hljs-title function_ invoke__">to_string</span>());
    <span class="hljs-comment">// This clones the Arc pointer, not the String behind it</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">cloned_start_time</span> = start_time.<span class="hljs-title function_ invoke__">clone</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">thread_1</span> = std::thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> ||{
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Started {}, called thread 1 {}"</span>, cloned_start_time, Utc::<span class="hljs-title function_ invoke__">now</span>());
    });
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">thread_2</span> = std::thread::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">move</span> ||{
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Started {}, called thread 2 {}"</span>, start_time, Utc::<span class="hljs-title function_ invoke__">now</span>());
    });

    <span class="hljs-comment">// Join threads and panic on error to show what went wrong</span>
    thread_1.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
    thread_2.<span class="hljs-title function_ invoke__">join</span>().<span class="hljs-title function_ invoke__">unwrap</span>();
}
</code></pre>
<p>å¯ä»¥å»<a href="https://link.juejin.cn?target=https%3A%2F%2Fplay.rust-lang.org%2F%3Fversion%3Dstable%26mode%3Ddebug%26edition%3D2018%26gist%3Dd2f6ba289c511d6708879409f632541d" target="_blank" title="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=d2f6ba289c511d6708879409f632541d" ref="nofollow noopener noreferrer">playground</a>ä¸Šè¯•è¯•ï¼</p>
<p>ä»¥ä¸Šç®€è¦ä»‹ç»äº†å¦‚ä½•åœ¨é¿å…ä½¿ç”¨å…¨å±€å˜é‡çš„æƒ…å†µä¸‹åœ¨çº¿ç¨‹é—´<strong>å…±äº«çŠ¶æ€</strong>ã€‚é™¤äº†æˆ‘ç›®å‰å±•ç¤ºçš„å†…å®¹ä¹‹å¤–ï¼Œæ‚¨å¯èƒ½è¿˜éœ€è¦<a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fbook%2Fch15-05-interior-mutability.html" target="_blank" title="https://doc.rust-lang.org/book/ch15-05-interior-mutability.html" ref="nofollow noopener noreferrer">å†…éƒ¨å¯å˜æ€§</a>æ¥<strong>ä¿®æ”¹</strong>å…±äº«çŠ¶æ€ã€‚æœ¬æ–‡ç¯‡å¹…æœ‰é™ï¼Œæ— æ³•å…¨é¢ä»‹ç»å†…éƒ¨å¯å˜æ€§ã€‚ä½†åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä¼šé€‰æ‹©ä½¿ç”¨ <code>Arc&lt;Mutex&lt;String&gt;&gt;</code> ä¸º <code>start_time</code> æ·»åŠ çº¿ç¨‹å®‰å…¨çš„å†…éƒ¨å¯å˜æ€§ã€‚</p>
<h3 data-id="heading-5">å½“å…¨å±€å˜é‡å€¼åœ¨  [ç¼–è¯‘æ—¶]  å·²çŸ¥æ—¶</h3>
<p>æ ¹æ®æˆ‘çš„ç»éªŒï¼Œå…¨å±€çŠ¶æ€æœ€å¸¸è§çš„ç”¨é€”ä¸æ˜¯å˜é‡ï¼Œè€Œæ˜¯å¸¸é‡ã€‚åœ¨ Rust ä¸­ï¼Œå®ƒä»¬æœ‰ä¸¤ç§ç±»å‹ï¼š</p>
<ul>
<li>å¸¸é‡å€¼ç”¨ <code>const</code> å®šä¹‰ã€‚è¿™äº›å¸¸é‡å€¼ä¼šè¢«ç¼–è¯‘å™¨å†…è”ã€‚å†…éƒ¨å˜é‡çš„å¯å˜æ€§æ˜¯ç»å¯¹ä¸å…è®¸çš„ã€‚</li>
<li>é™æ€å˜é‡ï¼Œç”¨ <code>static</code> å®šä¹‰ï¼Œåœ¨<strong>æ•°æ®æ®µä¸­å æ®å›ºå®šçš„ç©ºé—´ã€‚å®ƒä»¬å†…éƒ¨å¯ä»¥ä¿®æ”¹</strong>ã€‚</li>
</ul>
<p>å®ƒä»¬éƒ½å¯ä»¥ä½¿ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstd%2Fkeyword.const.html%23compile-time-constants" target="_blank" title="https://doc.rust-lang.org/std/keyword.const.html#compile-time-constants" ref="nofollow noopener noreferrer">ç¼–è¯‘æ—¶å¸¸é‡</a>è¿›è¡Œåˆå§‹åŒ–ã€‚è¿™äº›å¸¸é‡å¯ä»¥æ˜¯ç®€å•çš„å€¼ï¼Œä¾‹å¦‚ <code>42</code> æˆ– <code>"hello world"</code> ã€‚ä¹Ÿå¯ä»¥æ˜¯åŒ…å«å¤šä¸ªå…¶ä»–ç¼–è¯‘æ—¶å¸¸é‡å’Œæ ‡è®°ä¸º <code>const</code> å‡½æ•°çš„è¡¨è¾¾å¼ã€‚åªè¦é¿å…å¾ªç¯ä¾èµ–å³å¯ã€‚ï¼ˆæ‚¨å¯ä»¥åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Freference%2Fconst_eval.html" target="_blank" title="https://doc.rust-lang.org/reference/const_eval.html" ref="nofollow noopener noreferrer">Rust å‚è€ƒæ‰‹å†Œ</a>ä¸­æ‰¾åˆ°æœ‰å…³å¸¸é‡è¡¨è¾¾å¼çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚ï¼‰</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::sync::atomic::AtomicU64;
<span class="hljs-keyword">use</span> std::sync::{Arc,Mutex};

<span class="hljs-keyword">static</span> COUNTER: AtomicU64 = AtomicU64::<span class="hljs-title function_ invoke__">new</span>(TI_BYTE);

<span class="hljs-keyword">const</span> GI_BYTE: <span class="hljs-type">u64</span> = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>;
<span class="hljs-keyword">const</span> TI_BYTE: <span class="hljs-type">u64</span> = <span class="hljs-number">1024</span> * GI_BYTE;
</code></pre>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œ <code>const</code> æ˜¯æ›´å¥½çš„é€‰æ‹©â€”â€”é™¤éä½ éœ€è¦å†…éƒ¨å¯å˜æ€§ï¼Œæˆ–è€…ä½ ç‰¹åˆ«æƒ³é¿å…å†…è”ã€‚</p>
<p>å¦‚æœæ‚¨éœ€è¦å†…éƒ¨å¯å˜æ€§ï¼Œæœ‰å¤šç§é€‰æ‹©ã€‚å¯¹äºå¤§å¤šæ•°åŸºæœ¬ç±»å‹ï¼Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstd%2Fsync%2Fatomic%2F" target="_blank" title="https://doc.rust-lang.org/std/sync/atomic/" ref="nofollow noopener noreferrer"><code>std::sync::atomic</code></a> ä¸­éƒ½æœ‰ç›¸åº”çš„åŸå­å˜ä½“ã€‚å®ƒä»¬æä¾›äº†ä¸€ä¸ªç®€æ´çš„ APIï¼Œç”¨äºåŸå­åœ°åŠ è½½ã€å­˜å‚¨å’Œæ›´æ–°å€¼ã€‚</p>
<p>åœ¨æ— æ³•ä½¿ç”¨åŸå­æ“ä½œçš„æƒ…å†µä¸‹ï¼Œé€šå¸¸çš„é€‰æ‹©æ˜¯ä½¿ç”¨é”ã€‚Rust çš„æ ‡å‡†åº“æä¾›äº†<a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstd%2Fsync%2Fstruct.RwLock.html" target="_blank" title="https://doc.rust-lang.org/std/sync/struct.RwLock.html" ref="nofollow noopener noreferrer">è¯»å†™é”</a> ï¼ˆ <code>RwLock</code> ï¼‰å’Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstd%2Fsync%2Fstruct.Mutex.html" target="_blank" title="https://doc.rust-lang.org/std/sync/struct.Mutex.html" ref="nofollow noopener noreferrer">äº’æ–¥é”</a> ï¼ˆ <code>Mutex</code> ï¼‰ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœæ‚¨éœ€è¦åœ¨<strong>è¿è¡Œæ—¶è®¡ç®—å€¼</strong>ï¼Œæˆ–è€…éœ€è¦å †åˆ†é…ï¼Œé‚£ä¹ˆ <code>const</code> å’Œ <code>static</code> å°±æ— æµäºäº‹äº†ã€‚</p>
<h3 data-id="heading-6">Rust ä¸­çš„   [å•çº¿ç¨‹]   å…¨å±€å˜é‡åŠå…¶   [è¿è¡Œæ—¶]  åˆå§‹åŒ–</h3>
<p>æˆ‘ç¼–å†™çš„å¤§å¤šæ•°åº”ç”¨ç¨‹åºéƒ½åªæœ‰å•çº¿ç¨‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé” æœºåˆ¶æ˜¯ä¸å¿…è¦çš„ã€‚</p>
<p>ç„¶è€Œï¼Œä»…ä»…å› ä¸ºåªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œæˆ‘ä»¬å°±ä¸åº”è¯¥ç›´æ¥ä½¿ç”¨ <code>static mut</code> å¹¶å°†è®¿é—®æ“ä½œåŒ…è£…åœ¨ <code>unsafe</code> ä¸­ã€‚è¿™æ ·åšå¯èƒ½ä¼šå¯¼è‡´ä¸¥é‡çš„å†…å­˜æŸåã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸å®‰å…¨åœ°ä»å…¨å±€å˜é‡å€Ÿç”¨å€¼å¯èƒ½ä¼šå¯¼è‡´<strong>åŒæ—¶å­˜åœ¨å¤šä¸ªå¯å˜å¼•ç”¨</strong>ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…¶ä¸­ä¸€ä¸ªå¼•ç”¨æ¥éå†ä¸€ä¸ªå‘é‡ï¼Œå†ä½¿ç”¨å¦ä¸€ä¸ªå¼•ç”¨ä»åŒä¸€ä¸ªå‘é‡ä¸­åˆ é™¤å€¼ã€‚è¿™æ ·ä¸€æ¥ï¼Œè¿­ä»£å™¨å°±å¯èƒ½è¶…å‡ºæœ‰æ•ˆçš„å†…å­˜è¾¹ç•Œï¼Œè€Œå®‰å…¨çš„ Rust ä»£ç æœ¬å¯ä»¥é¿å…è¿™ç§æ½œåœ¨çš„å´©æºƒã€‚</p>
<p>ä½†æ ‡å‡†åº“æä¾›äº†ä¸€ç§â€œå…¨å±€â€å­˜å‚¨å€¼çš„æ–¹æ³•ï¼Œä»¥ä¾¿åœ¨<strong>å•ä¸ªçº¿ç¨‹å†…</strong>å®‰å…¨è®¿é—®ã€‚æˆ‘æŒ‡çš„æ˜¯<a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstd%2Fthread%2Fstruct.LocalKey.html" target="_blank" title="https://doc.rust-lang.org/std/thread/struct.LocalKey.html" ref="nofollow noopener noreferrer">çº¿ç¨‹å±€éƒ¨å˜é‡</a> ã€‚åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šè·å¾—è¯¥å˜é‡çš„ç‹¬ç«‹å‰¯æœ¬ã€‚ä½†åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œç”±äºåªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰€ä»¥åªæœ‰ä¸€ä¸ªå‰¯æœ¬ã€‚</p>
<p>çº¿ç¨‹å±€éƒ¨å˜é‡ä½¿ç”¨ <code> </code>thread_local!<code> </code> å®åˆ›å»ºã€‚è®¿é—®å®ƒä»¬éœ€è¦ä½¿ç”¨é—­åŒ…ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> chrono::Utc;

thread_local!(<span class="hljs-keyword">static</span> GLOBAL_DATA: <span class="hljs-type">String</span> = Utc::<span class="hljs-title function_ invoke__">now</span>().<span class="hljs-title function_ invoke__">to_string</span>());

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    GLOBAL_DATA.<span class="hljs-title function_ invoke__">with</span>(|text| {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, *text);
    });
}
</code></pre>
<p>è¿™å¹¶éæœ€ç®€å•çš„è§£å†³æ–¹æ¡ˆã€‚ä½†å®ƒå…è®¸æˆ‘ä»¬æ‰§è¡Œä»»æ„åˆå§‹åŒ–ä»£ç ï¼Œè¿™äº›ä»£ç ä¼šåœ¨é¦–æ¬¡è®¿é—®è¯¥å€¼æ—¶åŠæ—¶è¿è¡Œã€‚</p>
<p>çº¿ç¨‹å±€éƒ¨å˜é‡åœ¨å†…éƒ¨å¯å˜æ€§æ–¹é¢è¡¨ç°å‡ºè‰²ã€‚ä¸å…¶ä»–æ‰€æœ‰è§£å†³æ–¹æ¡ˆä¸åŒï¼Œå®ƒä¸éœ€è¦<a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstd%2Fmarker%2Ftrait.Sync.html" target="_blank" title="https://doc.rust-lang.org/std/marker/trait.Sync.html" ref="nofollow noopener noreferrer">åŒæ­¥æœºåˆ¶</a> ã€‚è¿™ä½¿å¾—å¯ä»¥ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstd%2Fcell%2Fstruct.RefCell.html" target="_blank" title="https://doc.rust-lang.org/std/cell/struct.RefCell.html" ref="nofollow noopener noreferrer">RefCell</a> æ¥å®ç°å†…éƒ¨å¯å˜æ€§ï¼Œä»è€Œé¿å…äº†<a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstd%2Fsync%2Fstruct.Mutex.html" target="_blank" title="https://doc.rust-lang.org/std/sync/struct.Mutex.html" ref="nofollow noopener noreferrer">äº’æ–¥é”</a>å¸¦æ¥çš„é¢å¤–å¼€é”€ã€‚</p>
<p>çº¿ç¨‹å±€éƒ¨å˜é‡çš„ç»å¯¹æ€§èƒ½é«˜åº¦ä¾èµ–äºå¹³å°ã€‚ä½†æˆ‘<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjakmeier%2Fglobals-in-rust%2Fblob%2Fmain%2Fglobals_benchmarks%2Fsummary.md" target="_blank" title="https://github.com/jakmeier/globals-in-rust/blob/main/globals_benchmarks/summary.md" ref="nofollow noopener noreferrer">åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šåšäº†ä¸€äº›ç®€å•çš„æµ‹è¯•ï¼Œ</a> å°†å…¶ä¸ä¾èµ–é”çš„å†…éƒ¨å¯å˜æ€§è¿›è¡Œæ¯”è¾ƒï¼Œå‘ç°å‰è€…é€Ÿåº¦å¿«äº† 10 å€ã€‚æˆ‘é¢„è®¡ç»“æœåœ¨å…¶ä»–å¹³å°ä¸Šä¸ä¼šç›¸åï¼Œä½†å¦‚æœæ‚¨éå¸¸åœ¨æ„æ€§èƒ½ï¼Œè¯·åŠ¡å¿…è¿è¡Œæ‚¨è‡ªå·±çš„åŸºå‡†æµ‹è¯•ã€‚</p>
<p>ä»¥ä¸‹æ˜¯å¦‚ä½•ä½¿ç”¨ <code>RefCell</code> å®ç°å†…éƒ¨å¯å˜æ€§çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-rust" lang="rust">thread_local!(<span class="hljs-keyword">static</span> GLOBAL_DATA: RefCell&lt;<span class="hljs-type">String</span>&gt; = RefCell::<span class="hljs-title function_ invoke__">new</span>(Utc::<span class="hljs-title function_ invoke__">now</span>().<span class="hljs-title function_ invoke__">to_string</span>()));

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    GLOBAL_DATA.<span class="hljs-title function_ invoke__">with</span>(|text| {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Global string is {}"</span>, *text.<span class="hljs-title function_ invoke__">borrow</span>());
    });

    GLOBAL_DATA.<span class="hljs-title function_ invoke__">with</span>(|text| {
        *text.<span class="hljs-title function_ invoke__">borrow_mut</span>() = Utc::<span class="hljs-title function_ invoke__">now</span>().<span class="hljs-title function_ invoke__">to_string</span>();
    });

    GLOBAL_DATA.<span class="hljs-title function_ invoke__">with</span>(|text| {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Global string is {}"</span>, *text.<span class="hljs-title function_ invoke__">borrow</span>());
    });
}
</code></pre>
<p>ä½ å¯ä»¥è‡ªå·±å»<a href="https://link.juejin.cn?target=https%3A%2F%2Fplay.rust-lang.org%2F%3Fversion%3Dstable%26mode%3Ddebug%26edition%3D2018%26gist%3Db14e53d011da0b9300ffbadc83dfa535" target="_blank" title="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=b14e53d011da0b9300ffbadc83dfa535" ref="nofollow noopener noreferrer">playground</a>ä¸Šè¯•è¯•å§ï¼</p>
<p>é¡ºä¾¿ä¸€æï¼Œè™½ç„¶ WebAssembly ä¸­çš„çº¿ç¨‹ä¸ x86_64 å¹³å°ä¸Šçš„çº¿ç¨‹æœ‰æ‰€ä¸åŒï¼Œä½†è¿™ç§ä½¿ç”¨ <code>thread_local!</code> + <code>RefCell</code> æ¨¡å¼åŒæ ·é€‚ç”¨äºç¼–è¯‘ Rust ä»£ç å¹¶åœ¨æµè§ˆå™¨ä¸­è¿è¡Œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨é’ˆå¯¹å¤šçº¿ç¨‹ä»£ç çš„å®‰å…¨æ–¹æ³•å°±æ˜¾å¾—æœ‰äº›å¤šä½™äº†ã€‚ï¼ˆå¦‚æœæ‚¨è¿˜ä¸äº†è§£åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ Rust çš„æ¦‚å¿µï¼Œå¯ä»¥é˜…è¯»æˆ‘ä¹‹å‰å†™çš„æ–‡ç« ã€Š <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.sitepoint.com%2Frust-tutorial-introduction-javascript-devs%2F" target="_blank" title="https://www.sitepoint.com/rust-tutorial-introduction-javascript-devs/" ref="nofollow noopener noreferrer">Rust æ•™ç¨‹ï¼šé¢å‘ JavaScript å¼€å‘è€…çš„ Rust å…¥é—¨</a> ã€‹ã€‚ï¼‰</p>
<p>çº¿ç¨‹å±€éƒ¨å˜é‡çš„ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œå®ƒä»¬çš„å®ç°å–å†³äºå¹³å°ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œä½ ä¸ä¼šæ³¨æ„åˆ°è¿™ä¸€ç‚¹ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ­£å› å¦‚æ­¤ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstd%2Fthread%2Fstruct.LocalKey.html%23platform-specific-behavior" target="_blank" title="https://doc.rust-lang.org/std/thread/struct.LocalKey.html#platform-specific-behavior" ref="nofollow noopener noreferrer">ï¼Œä¸¢å¼ƒè¯­ä¹‰ä¹Ÿä¸å¹³å°ç›¸å…³</a> ã€‚</p>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œå¤šçº¿ç¨‹å…¨å±€å˜é‡çš„è§£å†³æ–¹æ¡ˆæ˜¾ç„¶ä¹Ÿé€‚ç”¨äºå•çº¿ç¨‹æƒ…å†µã€‚è€Œä¸”ï¼Œå¦‚æœæ²¡æœ‰å†…éƒ¨å¯å˜æ€§ï¼Œå®ƒä»¬çš„é€Ÿåº¦ä¼¼ä¹ä¸çº¿ç¨‹å±€éƒ¨å˜é‡ä¸€æ ·å¿«ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥çœ‹çœ‹è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 data-id="heading-7">å…·æœ‰ [è¿è¡Œæ—¶] åˆå§‹åŒ–çš„ [å¤šçº¿ç¨‹] å…¨å±€å˜é‡</h3>
<p>ç›®å‰æ ‡å‡†åº“å¯¹äºè¿è¡Œæ—¶åˆå§‹åŒ–çš„å®‰å…¨å…¨å±€å˜é‡è¿˜æ²¡æœ‰å¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ æ¸…æ¥šè‡ªå·±åœ¨åšä»€ä¹ˆï¼Œå¯ä»¥ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstd%2Fsync%2Fstruct.Once.html" target="_blank" title="https://doc.rust-lang.org/std/sync/struct.Once.html" ref="nofollow noopener noreferrer"><code>std::sync::Once</code> æ¥</a>æ„å»ºä¸€ä¸ªèƒ½å¤Ÿå®‰å…¨åœ°ä½¿ç”¨ <code>unsafe</code> ç¨‹åºã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstd%2Fsync%2Fstruct.Once.html%23examples-1" target="_blank" title="https://doc.rust-lang.org/std/sync/struct.Once.html#examples-1" ref="nofollow noopener noreferrer">å®˜æ–¹æ–‡æ¡£ä¸­çš„ç¤ºä¾‹</a>æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ã€‚å¦‚æœæ‚¨è¿˜éœ€è¦å†…éƒ¨å¯å˜æ€§ï¼Œåˆ™å¿…é¡»å°†è¯¥æ–¹æ³•ä¸è¯»å†™é”æˆ–äº’æ–¥é”ç»“åˆä½¿ç”¨ã€‚ä»¥ä¸‹æ˜¯å…·ä½“ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">static</span> <span class="hljs-keyword">mut</span> STD_ONCE_COUNTER: <span class="hljs-type">Option</span>&lt;Mutex&lt;<span class="hljs-type">String</span>&gt;&gt; = <span class="hljs-literal">None</span>;
<span class="hljs-keyword">static</span> INIT: Once = Once::<span class="hljs-title function_ invoke__">new</span>();

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">global_string</span>&lt;<span class="hljs-symbol">'a</span>&gt;() <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">'a</span> Mutex&lt;<span class="hljs-type">String</span>&gt; {
    INIT.<span class="hljs-title function_ invoke__">call_once</span>(|| {
        <span class="hljs-comment">// Since this access is inside a call_once, before any other accesses, it is safe</span>
        <span class="hljs-keyword">unsafe</span> {
            *STD_ONCE_COUNTER.<span class="hljs-title function_ invoke__">borrow_mut</span>() = <span class="hljs-title function_ invoke__">Some</span>(Mutex::<span class="hljs-title function_ invoke__">new</span>(Utc::<span class="hljs-title function_ invoke__">now</span>().<span class="hljs-title function_ invoke__">to_string</span>()));
        }
    });
    <span class="hljs-comment">// As long as this function is the only place with access to the static variable,</span>
    <span class="hljs-comment">// giving out a read-only borrow here is safe because it is guaranteed no more mutable</span>
    <span class="hljs-comment">// references will exist at this point or in the future.</span>
    <span class="hljs-keyword">unsafe</span> { STD_ONCE_COUNTER.<span class="hljs-title function_ invoke__">as_ref</span>().<span class="hljs-title function_ invoke__">unwrap</span>() }
}
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Global string is {}"</span>, *<span class="hljs-title function_ invoke__">global_string</span>().<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-title function_ invoke__">unwrap</span>());
    *<span class="hljs-title function_ invoke__">global_string</span>().<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-title function_ invoke__">unwrap</span>() = Utc::<span class="hljs-title function_ invoke__">now</span>().<span class="hljs-title function_ invoke__">to_string</span>();
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Global string is {}"</span>, *<span class="hljs-title function_ invoke__">global_string</span>().<span class="hljs-title function_ invoke__">lock</span>().<span class="hljs-title function_ invoke__">unwrap</span>());
}
</code></pre>
<p>ä½ è‡ªå·±å»<a href="https://link.juejin.cn?target=https%3A%2F%2Fplay.rust-lang.org%2F%3Fversion%3Dstable%26mode%3Ddebug%26edition%3D2018%26gist%3D54b65ae08be815dcbe8515d3890af86f" target="_blank" title="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=54b65ae08be815dcbe8515d3890af86f" ref="nofollow noopener noreferrer">playground</a>ä¸Šè¯•è¯•å§ï¼</p>
<p>å¦‚æœä½ æƒ³è¦æ›´ç®€å•çš„æ–¹å¼ï¼Œæˆ‘å¼ºçƒˆæ¨èä»¥ä¸‹ä¸¤ä¸ª crateï¼Œæˆ‘å°†åœ¨ä¸‹ä¸€èŠ‚ä¸­è®¨è®ºã€‚</p>
<h3 data-id="heading-8">Rust ä¸­ç”¨äºç®¡ç†å…¨å±€å˜é‡çš„å¤–éƒ¨åº“</h3>
<p>æ ¹æ®æµè¡Œåº¦å’Œä¸ªäººå–œå¥½ï¼Œæˆ‘æƒ³æ¨èä¸¤ä¸ªæˆ‘è®¤ä¸ºæ˜¯ 2021 å¹´ Rust ä¸­å®ç°ç®€å•å…¨å±€å˜é‡çš„æœ€ä½³é€‰æ‹©ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcrates.io%2Fcrates%2Fonce_cell" target="_blank" title="https://crates.io/crates/once_cell" ref="nofollow noopener noreferrer">Once Cell</a> ç›®å‰å·²è¢«è€ƒè™‘çº³å…¥æ ‡å‡†åº“ã€‚ï¼ˆå‚è§æ­¤<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frust-lang%2Frust%2Fissues%2F74465" target="_blank" title="https://github.com/rust-lang/rust/issues/74465" ref="nofollow noopener noreferrer">è·Ÿè¸ªé—®é¢˜</a> ã€‚ï¼‰å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ nightly ç¼–è¯‘å™¨ï¼Œæ‚¨å¯ä»¥é€šè¿‡åœ¨é¡¹ç›®çš„ <code>main.rs</code> ä¸­æ·»åŠ  <code>#![feature(once_cell)]</code> æ¥ä½¿ç”¨å®ƒçš„ä¸ç¨³å®š APIã€‚</p>
<p>ä»¥ä¸‹æ˜¯åœ¨ç¨³å®šç¼–è¯‘å™¨ä¸Šä½¿ç”¨ <code>once_cell</code> ä»¥åŠé¢å¤–ä¾èµ–é¡¹çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> once_cell::sync::Lazy;

<span class="hljs-keyword">static</span> GLOBAL_DATA: Lazy&lt;<span class="hljs-type">String</span>&gt; = Lazy::<span class="hljs-title function_ invoke__">new</span>(||Utc::<span class="hljs-title function_ invoke__">now</span>().<span class="hljs-title function_ invoke__">to_string</span>());

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, *GLOBAL_DATA);
}
</code></pre>
<p>ä½ è‡ªå·±å»<a href="https://link.juejin.cn?target=https%3A%2F%2Fplay.rust-lang.org%2F%3Fversion%3Dstable%26mode%3Ddebug%26edition%3D2018%26gist%3Dda7b3377df1c0cf522ce36e4466bf510" target="_blank" title="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=da7b3377df1c0cf522ce36e4466bf510" ref="nofollow noopener noreferrer">playground</a>ä¸Šè¯•è¯•å§ï¼</p>
<p>æœ€åï¼Œè¿˜æœ‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcrates.io%2Fcrates%2Flazy_static" target="_blank" title="https://crates.io/crates/lazy_static" ref="nofollow noopener noreferrer">Lazy Static</a> ï¼Œå®ƒæ˜¯ç›®å‰æœ€æµè¡Œçš„ç”¨äºåˆå§‹åŒ–å…¨å±€å˜é‡çš„ crateã€‚å®ƒä½¿ç”¨ä¸€ä¸ªå¸¦æœ‰å°‘é‡è¯­æ³•æ‰©å±•ï¼ˆ <code>static ref</code> ï¼‰çš„å®æ¥å®šä¹‰å…¨å±€å˜é‡ã€‚</p>
<p>ä»¥ä¸‹æ˜¯åŒæ ·çš„ä¾‹å­ï¼Œä» <code>once_cell</code> ç¿»è¯‘æˆ <code>lazy_static</code> ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[macro_use]</span>
<span class="hljs-keyword">extern</span> <span class="hljs-keyword">crate</span> lazy_static;

lazy_static!(
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">ref</span> GLOBAL_DATA: <span class="hljs-type">String</span> = Utc::<span class="hljs-title function_ invoke__">now</span>().<span class="hljs-title function_ invoke__">to_string</span>();
);

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, *GLOBAL_DATA);
}
</code></pre>
<p>ä½ è‡ªå·±å»<a href="https://link.juejin.cn?target=https%3A%2F%2Fplay.rust-lang.org%2F%3Fversion%3Dstable%26mode%3Ddebug%26edition%3D2018%26gist%3De3a938e2d286620c48316de06d6ef7da" target="_blank" title="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=e3a938e2d286620c48316de06d6ef7da" ref="nofollow noopener noreferrer">æ“åœº</a>ä¸Šè¯•è¯•å§ï¼</p>
<p><code>once_cell</code> å’Œ <code>lazy_static</code> ä¹‹é—´çš„é€‰æ‹©ï¼Œæœ¬è´¨ä¸Šå–å†³äºä½ æ›´å–œæ¬¢å“ªç§è¯­æ³•ã€‚</p>
<p>æ­¤å¤–ï¼Œä¸¤è€…éƒ½æ”¯æŒå†…éƒ¨å¯å˜æ€§ã€‚åªéœ€å°† <code>String</code> åŒ…è£…åœ¨ <code>Mutex</code> æˆ– <code>RwLock</code> ä¸­å³å¯ã€‚</p>
<h3 data-id="heading-9">ç»“è®º</h3>
<p>ä»¥ä¸Šå°±æ˜¯æˆ‘æ‰€çŸ¥çš„åœ¨ Rust ä¸­å®ç°å…¨å±€å˜é‡çš„æ‰€æœ‰ï¼ˆåˆç†çš„ï¼‰æ–¹æ³•ã€‚æˆ‘å¸Œæœ›å®ƒèƒ½æ›´ç®€å•ä¸€äº›ã€‚ä½†å…¨å±€çŠ¶æ€æœ¬èº«å°±å¾ˆå¤æ‚ã€‚è€ƒè™‘åˆ° Rust çš„å†…å­˜å®‰å…¨ä¿è¯ï¼Œä¼¼ä¹ä¸å¯èƒ½æ‰¾åˆ°ä¸€ä¸ªç®€å•é€šç”¨çš„è§£å†³æ–¹æ¡ˆã€‚ä½†æˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ ä»ä¼—å¤šå¯ç”¨çš„é€‰é¡¹ä¸­ç†æ¸…æ€è·¯ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼ŒRust ç¤¾åŒºå€¾å‘äºèµ‹äºˆç”¨æˆ·æœ€å¤§çš„æƒåŠ›â€”â€”ä½†è¿™åŒæ—¶ä¹Ÿä½¿äº‹æƒ…å˜å¾—æ›´åŠ å¤æ‚ã€‚</p>
<h3 data-id="heading-10">å…³äºå¦‚ä½•åœ¨ Rust ä¸­æƒ¯ç”¨å…¨å±€å˜é‡çš„å¸¸è§é—®é¢˜è§£ç­”</h3>
<h4 data-id="heading-11">What Is the Difference Between Static and Const in Rust?</h4>
<p>Rust ä¸­ static å’Œ const æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
<p>åœ¨ Rust ä¸­ï¼Œ<code>static</code> å’Œ <code>const</code> éƒ½ç”¨äºå£°æ˜å…¨å±€å˜é‡ï¼Œä½†å®ƒä»¬çš„ç‰¹æ€§æœ‰æ‰€ä¸åŒã€‚<code>const</code> åœ¨ Rust ä¸­è¡¨ç¤ºå¸¸é‡å€¼ï¼Œè¿™æ„å‘³ç€å®ƒçš„å€¼ä¸ä¼šæ”¹å˜ã€‚å®ƒç±»ä¼¼äºå˜é‡ï¼Œä½†å®ƒçš„å€¼æ˜¯å›ºå®šçš„ï¼Œä¸èƒ½æ›´æ”¹ã€‚å¦ä¸€æ–¹é¢ï¼Œ<code>static</code> å˜é‡æ˜¯å­˜å‚¨åœ¨ç¨‹åºäºŒè¿›åˆ¶æ–‡ä»¶åªè¯»æ•°æ®æ®µä¸­çš„å…¨å±€å˜é‡ã€‚<strong>å®ƒåœ¨æ•´ä¸ªç¨‹åºä¸­éƒ½å¯ç”¨ï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨å…¶å£°æ˜çš„ä½œç”¨åŸŸå†…</strong>ã€‚ä¸ <code>const</code> ä¸åŒ(const å¯èƒ½è¢«æ‹·è´å¤šä»½)ï¼Œ<strong><code>static</code> å˜é‡åœ¨å†…å­˜ä¸­å…·æœ‰å›ºå®šçš„åœ°å€</strong>ã€‚</p>
<h4 data-id="heading-12">å¦‚ä½•åœ¨ Rust ä¸­å£°æ˜å…¨å±€å˜é‡ï¼Ÿ</h4>
<p>åœ¨ Rust ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ static å…³é”®å­—å£°æ˜å…¨å±€å˜é‡ã€‚ä¾‹å¦‚ï¼š</p>
<p><code>static GLOBAL: i32 = 10;</code></p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒGLOBAL æ˜¯ä¸€ä¸ª i32 ç±»å‹çš„å…¨å±€å˜é‡ï¼Œå…¶åˆå§‹å€¼ä¸º 10ã€‚è¯·è®°ä½ï¼Œé™æ€å˜é‡æ˜¯åªè¯»çš„ï¼Œæ‚¨ä¸èƒ½ä¿®æ”¹å®ƒä»¬ã€‚</p>
<h4 data-id="heading-13">æˆ‘å¯ä»¥åœ¨ Rust ä¸­ä¿®æ”¹å…¨å±€å˜é‡å—ï¼Ÿ</h4>
<p>ä¸ï¼Œä½ ä¸èƒ½ç›´æ¥ä¿®æ”¹ Rust ä¸­çš„å…¨å±€å˜é‡ï¼Œå› ä¸ºå®ƒä»¬é»˜è®¤æ˜¯ä¸å¯å˜çš„ã€‚è¿™æ˜¯ Rust çš„ä¸€ä¸ªå®‰å…¨ç‰¹æ€§ï¼Œç”¨äºé˜²æ­¢ç¼–è¯‘æ—¶å‡ºç°æ•°æ®ç«äº‰ã€‚ä¸è¿‡ï¼Œä½ å¯ä»¥åœ¨ <code>std::sync</code> æ¨¡å—ä¸­ä½¿ç”¨ Mutex æˆ– RwLock æ¥å®ç°å¯å˜å…¨å±€å˜é‡ã€‚</p>
<h4 data-id="heading-14">Rust ä¸­ 'lazy_static!' å®çš„ç”¨é€”æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>Rust ä¸­çš„ <code>lazy_static!</code> å®å…è®¸ä½ ä»¥æƒ°æ€§æ–¹å¼åˆå§‹åŒ–é™æ€å˜é‡ã€‚è¿™æ„å‘³ç€é™æ€å˜é‡çš„<strong>åˆå§‹åŒ–ä¼šè¢«å»¶è¿Ÿåˆ°é¦–æ¬¡è®¿é—®æ—¶</strong>æ‰æ‰§è¡Œã€‚å½“åˆå§‹åŒ–æ“ä½œå¼€é”€è¾ƒå¤§ï¼Œè€Œä½ åªæƒ³åœ¨å¿…è¦æ—¶æ‰æ‰§è¡Œæ—¶ï¼Œè¿™ç§æ–¹å¼éå¸¸æœ‰ç”¨ã€‚</p>
<h4 data-id="heading-15">å¦‚ä½•åœ¨ Rust ä¸­ä½¿ç”¨ 'lazy_static!' å®å£°æ˜å…¨å±€å˜é‡ï¼Ÿ</h4>
<p>ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•åœ¨ Rust ä¸­ä½¿ç”¨ 'lazy_static!' å®æ¥å£°æ˜å…¨å±€å˜é‡ï¼š</p>
<p><code>#[macro_use]</code><br/>
<code>extern crate lazy_static;</code><br/>
<code>use std::sync::Mutex;</code><br/>
<code>lazy_static! {static ref GLOBAL: Mutex&lt;i32&gt; = Mutex::new(0);</code><br/>
<code>}</code></p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒGLOBAL æ˜¯ä¸€ä¸ª Mutex ç±»å‹çš„å…¨å±€å˜é‡ã€‚<code>&lt;i32&gt;</code> å¹¶åˆå§‹åŒ–ä¸ºå€¼ 0ã€‚'lazy_static!' å®ç¡®ä¿åˆå§‹åŒ–ä»¥çº¿ç¨‹å®‰å…¨çš„æ–¹å¼å®Œæˆï¼Œå¹¶ä¸”åªæ‰§è¡Œä¸€æ¬¡ã€‚</p>
<h4 data-id="heading-16">Rust ä¸­ 'static' å’Œ 'static mut' æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4>
<p>åœ¨ Rust ä¸­ï¼Œ<code>static</code> ç”¨äºå£°æ˜<strong>åªè¯»</strong>çš„å…¨å±€å˜é‡ï¼Œè€Œ <code>static mut</code> ç”¨äºå£°æ˜å¯å˜çš„å…¨å±€å˜é‡ã€‚ä½†æ˜¯ï¼Œ<code>static mut</code> æ˜¯<strong>ä¸å®‰å…¨çš„</strong>ï¼Œå› ä¸ºå¦‚æœä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®åŒä¸€ä¸ªå˜é‡ï¼Œå¯èƒ½ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚</p>
<h4 data-id="heading-17">å¦‚ä½•åœ¨ Rust ä¸­å®‰å…¨åœ°è®¿é—®é™æ€ mut å˜é‡ï¼Ÿ</h4>
<p>åœ¨ Rust ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>unsafe</code> å…³é”®å­—å®‰å…¨åœ°è®¿é—®é™æ€å¯å˜å˜é‡ (static mut)ã€‚ä¾‹å¦‚ï¼š</p>
<p><code>static mut GLOBAL: i32 = 10;</code></p>
<p><code>fn main() {</code><br/>
<code>unsafe {</code><br/>
<code>GLOBAL = 20;</code><br/>
<code>println!("{}", GLOBAL);</code><br/>
<code>}</code><br/>
<code>}</code></p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œâ€œunsafeâ€å…³é”®å­—ç”¨äºæŒ‡ç¤ºä»£ç å¯èƒ½ä¼šæ‰§è¡Œåœ¨å®‰å…¨ä»£ç ä¸­æœªå®šä¹‰çš„æ“ä½œã€‚</p>
<h4 data-id="heading-18">Rust ä¸­å…¨å±€å˜é‡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>åœ¨ Rust ä¸­ï¼Œ<strong>å…¨å±€å˜é‡çš„ç”Ÿå‘½å‘¨æœŸä¸ç¨‹åºçš„è¿è¡Œæ—¶é—´ç›¸åŒã€‚è¿™æ„å‘³ç€å…¨å±€å˜é‡åœ¨ç¨‹åºå¯åŠ¨æ—¶åˆ›å»ºï¼Œå¹¶åœ¨ç¨‹åºç»“æŸæ—¶é”€æ¯</strong>ã€‚</p>
<h4 data-id="heading-19">æˆ‘å¯ä»¥åœ¨ Rust å‡½æ•°ä¸­ä½¿ç”¨å…¨å±€å˜é‡å—ï¼Ÿ</h4>
<p>æ˜¯çš„ï¼Œä½ å¯ä»¥åœ¨ Rust å‡½æ•°ä¸­ä½¿ç”¨å…¨å±€å˜é‡ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨æ—¶è¦æ ¼å¤–å°å¿ƒï¼Œå› ä¸ºå¦‚æœä½¿ç”¨ä¸å½“ï¼Œå®ƒä»¬å¯èƒ½ä¼šå¯¼è‡´æ•°æ®ç«äº‰ã€‚é€šå¸¸å»ºè®®å°½å¯èƒ½ä½¿ç”¨å±€éƒ¨å˜é‡è€Œä¸æ˜¯å…¨å±€å˜é‡ã€‚</p>
<h4 data-id="heading-20">Rust ä¸­å…¨å±€å˜é‡çš„æ›¿ä»£æ–¹æ¡ˆæœ‰å“ªäº›ï¼Ÿ</h4>
<p>å¦‚æœä½ æƒ³åœ¨ Rust ç¨‹åºçš„ä¸åŒéƒ¨åˆ†ä¹‹é—´å…±äº«æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ä¸€äº›æ›¿ä»£å…¨å±€å˜é‡çš„æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•åŒ…æ‹¬å°†æ•°æ®ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’ã€ä»å‡½æ•°è¿”å›æ•°æ®ã€ä½¿ç”¨ç»“æ„ä½“å’Œæšä¸¾ç­‰æ•°æ®ç»“æ„ï¼Œä»¥åŠä½¿ç”¨é€šé“å’Œé”ç­‰å¹¶å‘åŸè¯­ã€‚</p>
<hr/>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.sitepoint.com%2Frust-global-variables%2F" target="_blank" title="https://www.sitepoint.com/rust-global-variables/" ref="nofollow noopener noreferrer">åŸæ–‡åœ°å€</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Instagramè´Ÿè´£äººAdamå¯¹2026å¹´å†…å®¹ç”Ÿæ€çš„åˆ¤æ–­]]></title>    <link>https://juejin.cn/post/7592276497399513138</link>    <guid>https://juejin.cn/post/7592276497399513138</guid>    <pubDate>2026-01-07T06:44:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592276497399513138" data-draft-id="7592361736129806346" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Instagramè´Ÿè´£äººAdamå¯¹2026å¹´å†…å®¹ç”Ÿæ€çš„åˆ¤æ–­"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-07T06:44:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="XCaptaino"/> <meta itemprop="url" content="https://juejin.cn/user/3052665287739005"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Instagramè´Ÿè´£äººAdamå¯¹2026å¹´å†…å®¹ç”Ÿæ€çš„åˆ¤æ–­
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3052665287739005/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    XCaptaino
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T06:44:30.000Z" title="Wed Jan 07 2026 06:44:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€2026å¹´å†…å®¹ç”Ÿæ€é¢„æµ‹</h2>
<p>è¿™æ˜¯å…³äº Instagram è´Ÿè´£äºº Adam Mosseri å¯¹ 2026 å¹´å†…å®¹ç”Ÿæ€çš„åˆ¤æ–­ï¼š åœ¨ AI å¿«é€Ÿæ¶Œå…¥ç¤¾äº¤åª’ä½“ã€ç”Ÿæˆæµ·é‡â€œçœ‹èµ·æ¥å¾ˆçœŸâ€çš„å›¾ç‰‡å’Œè§†é¢‘çš„èƒŒæ™¯ä¸‹ï¼Œåˆ›ä½œè€…çœŸæ­£ç¨€ç¼ºã€çœŸæ­£æœ‰ä»·å€¼çš„ï¼Œä¸å†æ˜¯â€œå†…å®¹åšå¾—å¤šç²¾è‡´â€ï¼Œè€Œæ˜¯â€œå¯ä¿¡åº¦â€å’Œâ€œç‹¬ä¸€æ— äºŒçš„ä¸ªäººæ€§â€ã€‚</p>
<p>ä»–è®¤ä¸ºï¼šæœªæ¥åˆ›ä½œè€…ä¸ä¼šå˜å¾—ä¸é‡è¦ï¼Œåè€Œä¼šæ›´é‡è¦ï¼Œå› ä¸ºåœ¨ AI å†…å®¹å……æ–¥çš„ä¸–ç•Œé‡Œï¼Œå¤§å®¶ä¼šæ›´ä¾èµ–â€œè®¤è¯†çš„äººâ€å’Œâ€œä¿¡å¾—è¿‡çš„äººâ€ï¼Œè€Œä¸æ˜¯æŠ½è±¡çš„æœºæ„æˆ–çœ‹èµ·æ¥å®Œç¾çš„ç”»é¢ã€‚</p>
<h2 data-id="heading-1">äºŒã€AI æ´ªæ°´ä¸‹çš„æ ¹æœ¬å˜åŒ–ï¼šä»â€œå¥½ä¸å¥½çœ‹â€åˆ°â€œå¯ä¿¡ä¸å¯ä¿¡â€</h2>
<ol>
<li>AI è®©åˆ¶ä½œç²¾è‡´å†…å®¹çš„é—¨æ§›å‡ ä¹ä¸ºé›¶</li>
</ol>
<ul>
<li>ç”Ÿæˆç…§ç‰‡çº§çœŸå®ï¼ˆphotorealisticï¼‰çš„å›¾ç‰‡ã€è§†é¢‘ã€ç”šè‡³å£°éŸ³çš„å·¥å…·è¿›æ­¥å¾ˆå¿«ã€‚</li>
<li>å†…å®¹ç”Ÿäº§æˆæœ¬è¢«å¤§å¹…å‹ç¼©ï¼Œå¾ˆå¤šäººå¯ä»¥è½»æ¾åšå‡ºè¿‡å»éœ€è¦ä¸“ä¸šè®¾å¤‡å’ŒæŠ€èƒ½æ‰èƒ½åšå‡ºçš„â€œé«˜è´¨é‡â€å†…å®¹ã€‚</li>
<li>è¿™æ„å‘³ç€ï¼šâ€œç”»é¢çœŸå®æ„Ÿã€å¥½çœ‹ã€å…‰çº¿å¥½ã€çš®è‚¤å®Œç¾â€è¿™ç±»åŸæœ¬å¯ä»¥å¸®åˆ›ä½œè€…è„±é¢–è€Œå‡ºçš„ç‰¹ç‚¹ï¼Œå˜æˆäº†ä»»ä½•ä¼šç”¨å·¥å…·çš„äººéƒ½èƒ½å¤åˆ¶çš„â€œæ ‡é…â€ã€‚</li>
</ul>
<p>Mosseri æŠŠè¿™æè¿°ä¸ºä¸€ç§â€œè¿‡å‰©â€ï¼šå½“æŸç§ä¸œè¥¿å¤ªå¤šã€å¤ªå®¹æ˜“è·å¾—æ—¶ï¼Œå®ƒå°±ä¸å†æ˜¯åŒºåˆ†åº¦ã€‚</p>
<ol start="2">
<li>â€œçœŸå®æ€§â€å˜æˆç¨€ç¼ºå“</li>
</ol>
<ul>
<li>æ—©æœŸçš„ AI ç”Ÿæˆä½œå“è¿˜æœ‰æ˜æ˜¾ç ´ç»½ï¼ˆæ¯”å¦‚çš®è‚¤è¿‡åº¦å…‰æ»‘ã€å…‰çº¿æ€ªå¼‚ï¼‰ï¼Œä½†è¿™äº›â€œç ´ç»½â€åªä¼šè¶Šæ¥è¶Šå°‘ã€‚</li>
<li>éšç€ AI è¾“å‡ºè¶Šæ¥è¶Šé€¼çœŸï¼Œç”¨æˆ·ç”¨â€œçœ‹ä¸Šå»åƒä¸å¤ªè‡ªç„¶â€æ¥åˆ¤æ–­æ˜¯ä¸æ˜¯ AI å†…å®¹ï¼Œä¼šè¶Šæ¥è¶Šä¸å¯é ã€‚</li>
<li>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä»–è®¤ä¸ºï¼šâ€œçœŸå®æ€§â€ï¼ˆauthenticityï¼‰æ­£åœ¨å˜æˆä¸€ç§ç¨€ç¼ºèµ„æºã€‚ äººä»¬éœ€è¦æ–°çš„æ–¹å¼æ¥åˆ¤æ–­ï¼šè¿™ä¸ªå†…å®¹æ˜¯ä¸æ˜¯â€œçœŸå®çš„â€ã€æ˜¯ä¸æ˜¯â€œæœ‰äººåœ¨èƒŒåè´Ÿè´£â€ã€‚</li>
</ul>
<h2 data-id="heading-2">ä¸‰ã€ä¸ºä»€ä¹ˆåˆ›ä½œè€…ä¼šâ€œæ›´é‡è¦è€Œä¸æ˜¯æ›´ä¸é‡è¦â€ï¼Ÿ</h2>
<ol>
<li>åª’ä½“ç»“æ„çš„é•¿æœŸå˜åŒ–ï¼šä»æœºæ„åˆ°ä¸ªäºº</li>
</ol>
<p>Mosseri æŠŠè¿™ä¸ªè¶‹åŠ¿æ”¾åœ¨æ›´å¤§çš„èƒŒæ™¯é‡Œè®²ï¼š</p>
<ul>
<li>äº’è”ç½‘é™ä½äº†â€œè§¦è¾¾å—ä¼—â€çš„æˆæœ¬ï¼Œä¸ªä½“å¯ä»¥ç»•å¼€ä¼ ç»Ÿåª’ä½“ï¼ˆæŠ¥çº¸ã€ç”µè§†å°ã€å‡ºç‰ˆæœºæ„ï¼‰ç›´æ¥å‘å£°ã€‚</li>
<li>ç»“æœæ˜¯ï¼šä¸ªåˆ«è¿åŠ¨å‘˜çš„ä¸ªäººç²‰ä¸é‡ä¸äºšäºæ•´ä¸ªçƒé˜Ÿã€‚ ä¸€äº›è®°è€…çš„ä¸ªäººå…¬ä¿¡åŠ›è¶…è¿‡å…¶æ‰€åœ¨åª’ä½“ã€‚ å¾ˆå¤šåˆ›ä½œè€…çš„å—ä¼—ä½“é‡å¤§äºä¼ ç»Ÿåª’ä½“å“ç‰Œã€‚</li>
</ul>
<p>è¿™æ˜¯ä¸€ä¸ªé•¿æœŸçš„â€œå»æœºæ„åŒ–ã€å‘ä¸ªäººèšç„¦â€çš„è¿‡ç¨‹ã€‚</p>
<ol start="2">
<li>å¯¹æœºæ„çš„ä¿¡ä»»ä¸‹é™ï¼Œå¯¹äººçš„ä¿¡ä»»ä¸Šå‡</li>
</ol>
<ul>
<li>è¿‡å»å‡ åå¹´é‡Œï¼Œå…¬ä¼—å¯¹æ”¿åºœã€å¤§å…¬å¸ã€ä¼ ç»Ÿåª’ä½“ç­‰æœºæ„çš„ä¿¡ä»»æŒç»­èµ°ä½ã€‚</li>
<li>è¿™æ¨åŠ¨äº†â€œåˆ›ä½œè€…å†…å®¹â€çš„å´›èµ·ï¼š äººä»¬æ›´æ„¿æ„çœ‹ä¸€ä¸ªè‡ªå·±å–œæ¬¢ã€è§‰å¾—çœŸè¯šçš„åˆ›ä½œè€…æ‹çš„å†…å®¹ï¼Œè€Œä¸æ˜¯â€œæœºæ„åŒ…è£…å‡ºæ¥çš„å®˜æ–¹å®£ä¼ â€ã€‚</li>
</ul>
<p>åœ¨ AI æ¥ä¸´ä¹‹å‰ï¼Œè¿™ç§â€œäººæ¯”æœºæ„æ›´å¯ä¿¡â€çš„è¶‹åŠ¿å°±å·²ç»åœ¨å‘ç”Ÿäº†ã€‚</p>
<ol start="3">
<li>AI çš„å†²å‡»ï¼šè§„æ¨¡æœ‰äº†ï¼Œä½†â€œä½œè€…â€æ¶ˆå¤±äº†</li>
</ol>
<ul>
<li>AI å¯ä»¥æ— é™æ”¾å¤§å†…å®¹ç”Ÿäº§çš„è§„æ¨¡ï¼Œå´ä¸å¸¦æ¥æ˜ç¡®çš„â€œåˆ›ä½œè€…èº«ä»½â€ã€‚</li>
<li>å³ä½¿ AI ä½œå“è´¨é‡å¾ˆé«˜ï¼Œäººä»¬å¸¸å¸¸è§‰å¾—å®ƒâ€œæœ‰ç‚¹é€ å‡ºæ¥çš„æ„Ÿè§‰â€ï¼ˆfabricatedï¼‰ï¼Œç¼ºä¹çœŸå®æ„Ÿã€‚</li>
<li>åœ¨å†…å®¹é‡æš´æ¶¨çš„ç¯å¢ƒé‡Œï¼ŒMosseri æå‡ºä¸€ä¸ªæ–°çš„æ ¸å¿ƒé—®é¢˜ï¼š</li>
</ul>
<blockquote>
<p>æ ¸å¿ƒä¸å†æ˜¯â€œä½ èƒ½ä¸èƒ½åšå†…å®¹â€ï¼Œè€Œæ˜¯â€œè¿™ä¸ªä¸œè¥¿çœ‹èµ·æ¥æ˜¯ä¸æ˜¯åªèƒ½ç”±ä½ æ¥åšâ€ã€‚</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œâ€œè°åœ¨åˆ›ä½œâ€ä¼šæ¯”â€œå†…å®¹çœ‹èµ·æ¥å¤šå®Œç¾â€æ›´å…³é”®ã€‚</p>
<h2 data-id="heading-3">å››ã€Instagram å®¡ç¾è¶‹åŠ¿çš„å˜åŒ–ï¼šä»ç²¾ä¿®å¤§ç‰‡åˆ°â€œç²—ç³™æ„Ÿâ€</h2>
<ol>
<li>ç²¾è‡´ä¸»é¡µé¢çš„æ—¶ä»£å·²ç»è¿‡å»</li>
</ol>
<p>Mosseri å›é¡¾äº† Instagram è‡ªèº«çš„å˜åŒ–ï¼š</p>
<ul>
<li>è¿‡å»ï¼šInstagram ä»£è¡¨â€œç²¾è‡´ã€æ»¤é•œã€ç²¾å¿ƒå¸ƒç½®çš„ç”Ÿæ´»ç…§â€ã€‚</li>
<li>ç°åœ¨ï¼šå¤§å¤šæ•°äººå·²ç»ä¸å†åœ¨ä¸»é¡µé¢ï¼ˆFeedï¼‰ä¸Šé¢‘ç¹å‘ç”Ÿæ´»ç¬é—´ã€‚ æ›´å¤šçš„â€œæ—¥å¸¸åˆ†äº«â€è½¬ç§»åˆ°ï¼šStoriesï¼ˆé™æ—¶åŠ¨æ€ï¼‰ ç§ä¿¡ï¼ˆDMï¼‰</li>
</ul>
<ol start="2">
<li>Stories å’Œç§ä¿¡é‡Œçš„å†…å®¹æ˜¯ä»€ä¹ˆæ ·ï¼Ÿ</li>
</ol>
<ul>
<li>æŠ€æœ¯ä¸Šä¸å®Œç¾ï¼šæ¨¡ç³Šçš„ç…§ç‰‡ æŠ–åŠ¨çš„è§†é¢‘ éšæ‰‹æ‹ã€æ²¡æœ‰æ„å›¾å’Œä¿®é¥°</li>
<li>æƒ…æ„Ÿä¸Šæ›´æ¥è¿‘ï¼šè‡ªç„¶ã€éšæ„ã€å¸¦æœ‰æ˜æ˜¾â€œæ­¤åˆ»â€çš„ç—•è¿¹ã€‚</li>
</ul>
<p>è¿™ä¸æ‰‹æœºå‚å•†ã€ç›¸æœºå‚å•†è¿½æ±‚çš„æ–¹å‘å½¢æˆé²œæ˜å¯¹æ¯”â€”â€”åè€…ä¸€ç›´åœ¨å¼ºè°ƒæ›´é«˜åƒç´ ã€æ›´é«˜çº§çš„å›¾åƒå¤„ç†ã€æ›´æ¥è¿‘â€œä¸“ä¸šæ‘„å½±â€çš„è™šåŒ–æ•ˆæœã€‚</p>
<ol start="3">
<li>â€œç²—ç³™æ„Ÿâ€æˆäº†ä¸€ç§åå‘çš„çœŸå®æ€§ä¿¡å·</li>
</ol>
<p>Mosseri è®¤ä¸ºï¼š</p>
<ul>
<li>å½“â€œç²¾è‡´ã€å¥½çœ‹â€å˜å¾—éå¸¸æ™®éã€éå¸¸å»‰ä»·çš„æ—¶å€™ï¼Œäººä»¬åè€Œè¢«â€œä¸å®Œç¾ã€æœªåŠ å·¥â€çš„å†…å®¹æ‰€å¸å¼•ã€‚</li>
<li>ä»–é¢„æµ‹æœªæ¥ä¼šå‡ºç°æ˜æ˜¾çš„â€œåŠ é€Ÿâ€ï¼šåˆ›ä½œè€…ä¼šåˆ»æ„ä¿ç•™æˆ–åˆ¶é€ ä¸€äº›â€œç²—ç³™æ„Ÿâ€æ¥è¡¨è¾¾çœŸå®ã€‚åœ¨ä¸€ä¸ªä¸€åˆ‡éƒ½å¯è¢«ä¼˜åŒ–çš„ä¸–ç•Œé‡Œï¼Œç•™æœ‰ç‘•ç–µåè€Œæˆä¸ºâ€œæœ‰äººåœ¨ç°åœºâ€â€œè¿™æ˜¯çœŸçš„â€çš„è¯æ®ã€‚</li>
</ul>
<h2 data-id="heading-4">äº”ã€Instagram çš„äº§å“å’Œç®—æ³•å¦‚ä½•é…åˆè¿™ç§è¶‹åŠ¿ï¼Ÿ</h2>
<ol>
<li>æ‰“å‹â€œæ¨¡æ¿åŒ–ã€è‡ªåŠ¨åŒ–â€çš„å†…å®¹</li>
</ol>
<p>Instagram æœ€è¿‘çš„ä¸€äº›ç­–ç•¥ä½“ç°äº†è¿™ç§åå¥½ï¼š</p>
<ul>
<li>é™ä½ä»¥ä¸‹å†…å®¹çš„æ¨èæƒé‡ï¼šè¿‡äºæ¨¡æ¿åŒ–ã€æ‰¹é‡åŒ–çš„å†…å®¹ çº¯è½¬å‘ã€æ²¡æœ‰æ˜æ˜¾äºŒæ¬¡åˆ›ä½œçš„å†…å®¹ çœ‹èµ·æ¥åƒâ€œé€šç”¨çš„ã€æ‰¹é‡ AI ç”Ÿæˆâ€çš„å†…å®¹</li>
<li>å…è®¸ä½¿ç”¨ AI å·¥å…·ï¼Œä½†å¼ºè°ƒï¼šå¿…é¡»èƒ½çœ‹å‡ºæ˜æ˜¾çš„â€œåˆ›ä½œæ„å›¾â€ ä¸é¼“åŠ±æœºæ¢°ã€æµ·é‡çš„â€œæ— ä¸ªæ€§â€äº§å‡º</li>
</ul>
<ol start="2">
<li>2025 å¹´ 12 æœˆç®—æ³•æ›´æ–°çš„é‡ç‚¹</li>
</ol>
<p>æ–‡ç« æåˆ° Instagram çš„ä¸€æ¬¡é‡è¦ç®—æ³•æ›´æ–°ï¼Œä¸»è¦å€¾å‘ï¼š</p>
<ul>
<li>æ›´çœ‹é‡ï¼šä¸»é¢˜çš„æ¸…æ™°åº¦ï¼ˆtopical clarityï¼‰ï¼šè´¦å·å†…å®¹æ˜¯å¦å›´ç»•ç›¸å¯¹æ˜ç¡®çš„ä¸»é¢˜ï¼Œè€Œä¸æ˜¯å•¥éƒ½å‘ã€‚ æ—©æœŸäº’åŠ¨ä¿¡å·ï¼šå†…å®¹å‘å‡ºåï¼ŒåˆæœŸçš„ç‚¹èµã€è¯„è®ºã€åˆ†äº«åé¦ˆå¦‚ä½•ã€‚ åŸåˆ›æ€§ï¼šæ˜¯å¦ä¸ºåŸåˆ›ï¼Œæ˜¯å¦æœ‰æ˜æ˜¾çš„ä¸ªäººåŒ–è¡¨è¾¾ã€‚</li>
<li>é™åˆ¶ï¼šåŒä¸€ä¸ªè´¦å·å¦‚æœè¦†ç›–å¾ˆå¤šä¸ç›¸å…³çš„ä¸»é¢˜ï¼Œæ•´ä½“åˆ†å‘ä¼šå˜å¼±ã€‚ çœ‹èµ·æ¥â€œæ¨¡å¼åŒ–â€â€œå…¬å¼åŒ–â€â€œç¼ºä¹åŸåˆ›å˜ä½“â€çš„å†…å®¹æ›´éš¾å¾—åˆ°æ¨èã€‚</li>
</ul>
<p>è¿™è·Ÿ Mosseri çš„è§‚ç‚¹æ˜¯ç»Ÿä¸€çš„ï¼š åœ¨å†…å®¹æåº¦è¿‡å‰©çš„æƒ…å†µä¸‹ï¼Œå¹³å°ä¸å¾—ä¸æ›´ç”¨åŠ›åœ°åŒºåˆ†â€œå¡«å……æ—¶é—´çš„å†…å®¹â€å’Œâ€œçœŸæ­£èƒ½å»ºç«‹ä¿¡ä»»å…³ç³»çš„å†…å®¹â€ã€‚</p>
<h2 data-id="heading-5">å…­ã€ä¸‹ä¸€æ­¥ï¼šè¿â€œç²—ç³™æ„Ÿâ€ä¹Ÿä¼šè¢« AI æ¨¡ä»¿</h2>
<p>Mosseri ä¹Ÿæé†’ï¼š å“ªæ€•ç°åœ¨â€œç²—ç³™â€â€œä¸ä¿®è¾¹å¹…â€æ˜¯ä¸€ç§çœŸå®æ€§ä¿¡å·ï¼Œæœªæ¥ AI ä¹Ÿä¼šå­¦ä¼šå®Œç¾å¤åˆ¶è¿™ç§é£æ ¼ã€‚</p>
<ul>
<li>AI å¾ˆå¿«å¯ä»¥ç”Ÿæˆï¼šçœ‹èµ·æ¥åƒæ‰‹æœºéšæ‰‹æ‹çš„æ¨¡ç³Šç…§ç‰‡ å¸¦æ‰‹æŠ–çš„â€œä¼ªè§†é¢‘â€ çœ‹ä¼¼ä¸´æ—¶ã€å†²åŠ¨çš„â€œå‡å³å…´â€å†…å®¹</li>
<li>è¿™æ„å‘³ç€ï¼šä¸ç®¡ç”»é¢æ˜¯ç²¾è‡´è¿˜æ˜¯ç²—ç³™ï¼Œéƒ½å¯èƒ½æ˜¯ AIã€‚ å…‰é â€œç”»é¢é£æ ¼â€æ¥åˆ¤æ–­çœŸä¼ªä¼šå˜å¾—è¶Šæ¥è¶Šä¸å¯é ã€‚</li>
</ul>
<p>è§‚ä¼—å°†ä»â€œçœ‹å†…å®¹â€è½¬å‘â€œçœ‹äººâ€</p>
<p>é¢å¯¹è¿™ç§å±€é¢ï¼ŒMosseri è®¤ä¸ºï¼š</p>
<ul>
<li>ç”¨æˆ·å°†è¢«è¿«æ”¹å˜æ€ç»´æ–¹å¼ï¼šä»â€œè¿™å¼ å›¾/è¿™æ®µè§†é¢‘çœ‹èµ·æ¥çœŸå®å—ï¼Ÿâ€è½¬å‘ â€œå‘è¿™ä¸œè¥¿çš„äººæ˜¯è°ï¼Ÿæˆ‘ä¿¡ä¸ä¿¡è¿™ä¸ªäººï¼Ÿâ€</li>
<li>å¯¹ä»–è¿™ä¸€ä»£äººæ¥è¯´ï¼Œäººä»¬ä¹ æƒ¯é»˜è®¤ï¼šç…§ç‰‡å’Œè§†é¢‘å¤§ä½“ä¸Šéƒ½æ˜¯çœŸå®è®°å½•ç°å®çš„ã€‚ è¿™ç§ç›´è§‰æ­£åœ¨å¤±æ•ˆï¼Œé€‚åº”æ–°çš„ç°å®éœ€è¦æ—¶é—´ã€‚</li>
</ul>
<h2 data-id="heading-6">ä¸ƒã€å¯¹åˆ›ä½œè€…å’Œå¹³å°åˆ†åˆ«æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</h2>
<ol>
<li>å¯¹åˆ›ä½œè€…ï¼šä¸è¦æ‹’ç»æŠ€æœ¯ï¼Œè€Œè¦ä¿ç•™â€œä½ çš„ç—•è¿¹â€</li>
</ol>
<p>Mosseri çš„å»ºè®®ä¸æ˜¯â€œåˆ«ç”¨ AIâ€ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>å¯ä»¥ç”¨ AIï¼Œä½†è¦é¿å…ï¼šè¢«å·¥å…·åŒè´¨åŒ– è®©ä½œå“å¤±å»â€œåªæœ‰ä½ æ‰èƒ½è¿™æ ·è®²â€çš„æ„Ÿè§‰</li>
<li>å…³é”®æ˜¯ï¼šä½ ç”¨ AI åšå‡ºæ¥çš„ä¸œè¥¿ï¼Œè§‚ä¼—èƒ½ä¸èƒ½ä¸€çœ¼çœ‹å‡ºï¼šâ€œè¿™æ˜¯ä½ ä¸€è´¯çš„é£æ ¼ã€è§‚ç‚¹ã€äººæ ¼å»¶ç»­â€ï¼Ÿ ä½ æœ‰æ²¡æœ‰æŒç»­åœ¨ç§¯ç´¯â€œä¸ªäººå£°èª‰ã€é•¿æœŸèº«ä»½ã€å†…å®¹é£æ ¼â€çš„èµ„äº§ï¼Ÿ</li>
</ul>
<ol start="2">
<li>å¯¹å¹³å°ï¼šå¦‚ä½•ç®¡ç†æµ·é‡â€œåˆæˆå†…å®¹â€è€Œä¸æŸåä¿¡ä»»</li>
</ol>
<p>å¯¹ Instagram è¿™ç±»å¹³å°æ¥è¯´ï¼Œéš¾é¢˜æ˜¯ï¼š</p>
<ul>
<li>AI å†…å®¹ä¼šæºæºä¸æ–­æ¶Œå…¥å¹³å°ã€‚</li>
<li>ä½†å¦‚æœä¸åŠ ç®¡ç†ï¼Œç”¨æˆ·å¯¹å¹³å°æ•´ä½“å†…å®¹çš„ä¿¡ä»»ä¼šä¸‹é™ã€‚</li>
<li>æ‰€ä»¥å¹³å°éœ€è¦ï¼šè¯†åˆ«ã€æ——æ ‡ã€é™æƒé‚£äº›ç¼ºä¹æ˜ç¡®ä½œè€…ã€ç¼ºå°‘åˆ›ä½œæ„å›¾ã€åªè¿½æ±‚æ•°é‡çš„å†…å®¹ã€‚ æå‡é‚£äº›èƒ½æ‰¿è½½â€œçœŸå®äººæ ¼ã€é•¿æœŸå…³ç³»ã€ç¨³å®šèº«ä»½â€çš„åˆ›ä½œè€…å’Œä½œå“ã€‚</li>
</ul>
<p>ç”¨ä¸€å¥è¯æ¦‚æ‹¬ Mosseri çš„åˆ¤æ–­ï¼š</p>
<blockquote>
<p>å½“â€œé€¼çœŸæ„Ÿâ€å› ä¸º AI è€Œå˜å¾—å»‰ä»·æ—¶ï¼ŒçœŸæ­£ç¨€æœ‰çš„ä¸œè¥¿ä¼šå˜æˆï¼š çœŸå®çš„äººã€æŒç»­çš„èº«ä»½ã€ä¸€è´¯çš„é£æ ¼ï¼Œä»¥åŠå¯¹å—ä¼—è´Ÿè´£çš„æ€åº¦ã€‚</p>
</blockquote>
<h2 data-id="heading-7">å…«ã€æ ¸å¿ƒç»“è®º</h2>
<p>AI ä¼šè®©â€œåšå¾—åƒçœŸçš„å†…å®¹â€å˜å¾—åˆ°å¤„éƒ½æ˜¯ï¼Œä½†ä¹Ÿæ­£å› ä¸ºè¿™æ ·ï¼Œ åœ¨ç¤¾äº¤åª’ä½“é‡Œï¼Œèƒ½å¤Ÿä¿æŒâ€œå¯è¯†åˆ«çš„äººå‘³ã€é•¿æœŸçš„ä¸€è‡´æ€§å’Œå¯è¢«è¿½è´£çš„ä¸ªäººèº«ä»½â€çš„åˆ›ä½œè€…ï¼Œåè€Œä¼šå˜å¾—æ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½æ›´æœ‰ä»·å€¼ã€‚</p>
<p>å‚è€ƒæ¥æºï¼š</p>
<p>Instagram Head Adam Mosseri Sees Creator Value Rising As AI Floods Social Feeds</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.netinfluencer.com%2Finstagram-head-adam-mosseri-sees-creator-value-rising-as-ai-floods-social-feeds%2F" target="_blank" title="https://www.netinfluencer.com/instagram-head-adam-mosseri-sees-creator-value-rising-as-ai-floods-social-feeds/" ref="nofollow noopener noreferrer">www.netinfluencer.com/instagram-hâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>