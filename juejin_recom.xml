<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ä¸€æ–‡è®²æ¸…ï¼šAIå¤§æ¨¡å‹çš„å¹¶è¡Œè®­ç»ƒæ–¹å¼ï¼šDPã€PPã€TPã€EP]]></title>    <link>https://juejin.cn/post/7589207474134843442</link>    <guid>https://juejin.cn/post/7589207474134843442</guid>    <pubDate>2025-12-30T06:13:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589207474134843442" data-draft-id="7589227883262165038" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ–‡è®²æ¸…ï¼šAIå¤§æ¨¡å‹çš„å¹¶è¡Œè®­ç»ƒæ–¹å¼ï¼šDPã€PPã€TPã€EP"/> <meta itemprop="keywords" content="LLM"/> <meta itemprop="datePublished" content="2025-12-30T06:13:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™ºæ³ŠAI"/> <meta itemprop="url" content="https://juejin.cn/user/3572727470361578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ–‡è®²æ¸…ï¼šAIå¤§æ¨¡å‹çš„å¹¶è¡Œè®­ç»ƒæ–¹å¼ï¼šDPã€PPã€TPã€EP
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3572727470361578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™ºæ³ŠAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T06:13:12.000Z" title="Tue Dec 30 2025 06:13:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶éƒ½çŸ¥é“AIè®¡ç®—ï¼Œç‰¹åˆ«æ˜¯æ¨¡å‹è®­ç»ƒä¸æ¨ç†ç¯èŠ‚ï¼Œæ ¸å¿ƒä¾èµ–äºå¹¶è¡Œè®¡ç®—æ¶æ„ã€‚</p>
<p>åœ¨AIçš„åº•å±‚ç®—æ³•ä¸­ï¼Œè¯¸å¦‚çŸ©é˜µä¹˜æ³•ã€å·ç§¯è¿ç®—ã€å¾ªç¯ç»“æ„ä»¥åŠæ¢¯åº¦åä¼ ç­‰å…³é”®æ“ä½œï¼Œå‡éœ€è°ƒåŠ¨æˆåƒä¸Šä¸‡å—GPUï¼Œé€šè¿‡é«˜åº¦å¹¶è¡Œçš„ä»»åŠ¡è°ƒåº¦æ¥é«˜æ•ˆæ¨è¿›ï¼Œä»è€Œæ˜¾è‘—å‹ç¼©æ•´ä½“è€—æ—¶ã€‚</p>
<p>æ„å»ºé«˜æ€§èƒ½å¹¶è¡Œè®¡ç®—æ¡†æ¶æ—¶ï¼Œä¸šç•Œæ™®éé‡‡ç”¨ä»¥ä¸‹å››ç§ä¸»æµç­–ç•¥ï¼š</p>
<p>â€ŒData Parallelismâ€Œï¼Œæ•°æ®å¹¶è¡Œ</p>
<p>â€ŒPipeline Parallelismâ€Œï¼Œæµæ°´çº¿å¹¶è¡Œ</p>
<p>â€ŒTensor Parallelismâ€Œï¼Œå¼ é‡å¹¶è¡Œ</p>
<p>â€ŒExpert Parallelismâ€Œï¼Œä¸“å®¶å¹¶è¡Œ</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é€ä¸€å¯¹è¿™äº›å¹¶è¡Œæœºåˆ¶çš„è¿è¡Œé€»è¾‘å±•å¼€è§£æã€‚</p>
<p><strong>ä¸€ã€DPï¼ˆæ•°æ®å¹¶è¡Œï¼‰</strong></p>
<p>é¦–å…ˆæ¥çœ‹DPï¼Œå³æ•°æ®å¹¶è¡Œï¼ˆData Parallelismï¼‰ã€‚</p>
<p>åœ¨AIè®­ç»ƒä¸­ï¼Œå¹¶è¡Œç­–ç•¥æ€»ä½“ä¸Šå¯åˆ’åˆ†ä¸ºä¸¤å¤§ç±»ï¼šæ•°æ®å¹¶è¡Œä¸æ¨¡å‹å¹¶è¡Œã€‚</p>
<p>æ­¤å‰æåˆ°çš„PPï¼ˆæµæ°´çº¿å¹¶è¡Œï¼‰ã€TPï¼ˆå¼ é‡å¹¶è¡Œï¼‰å’ŒEPï¼ˆä¸“å®¶å¹¶è¡Œï¼‰ï¼Œå‡å½’å±äºæ¨¡å‹å¹¶è¡Œçš„èŒƒç•´ï¼Œåç»­å°†å¦è¡Œå±•å¼€è¯´æ˜ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer"><strong>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨æ™ºæ³ŠAIã€‚</strong></a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/877522e34cec4fc9852eba428d8cf713~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767679992&amp;x-signature=Fd3%2B8jN7EIYgwuVQVD0CpD%2FDlaM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™é‡Œï¼Œæˆ‘ä»¬å…ˆå¯¹ç¥ç»ç½‘ç»œçš„è®­ç»ƒæµç¨‹åšä¸€ä¸ªæ¦‚è§ˆã€‚é€šä¿—æ¥è®²ï¼Œå…¶æ ¸å¿ƒç¯èŠ‚ä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªå…³é”®é˜¶æ®µï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2105445e9c5f490b8ba56eb29ce744a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767679992&amp;x-signature=vBvB0yJ%2Bh5wthjPBg1HS3%2FAbkbI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å‰å‘ä¼ æ’­â€Œï¼šå°†ä¸€æ‰¹è®­ç»ƒæ ·æœ¬è¾“å…¥æ¨¡å‹ï¼Œè¾“å‡ºå¯¹åº”çš„é¢„æµ‹å€¼ã€‚</p>
<p>æŸå¤±è®¡ç®—â€Œï¼šåˆ©ç”¨æŸå¤±å‡½æ•°é‡åŒ–é¢„æµ‹è¾“å‡ºä¸çœŸå®æ ‡ç­¾ä¹‹é—´çš„åå·®ã€‚</p>
<p>åå‘ä¼ æ’­â€Œï¼šä»æŸå¤±å€¼å‡ºå‘ï¼Œæ²¿ç½‘ç»œåå‘è®¡ç®—å„å‚æ•°çš„æ¢¯åº¦ã€‚</p>
<p>å‚æ•°æ›´æ–°â€Œï¼šä¼˜åŒ–å™¨ä¾æ®æ¢¯åº¦ä¿¡æ¯ï¼Œè°ƒæ•´æ‰€æœ‰æƒé‡ä¸åç½®ï¼ˆå³å‚æ•°ï¼‰ã€‚</p>
<p>ä¸Šè¿°æ­¥éª¤æŒç»­è¿­ä»£ï¼Œç›´è‡³æ¨¡å‹æ€§èƒ½æ»¡è¶³é¢„æœŸç›®æ ‡ï¼Œè®­ç»ƒå³å‘Šå®Œæˆã€‚</p>
<p>å†æ¥çœ‹â€Œæ•°æ®å¹¶è¡Œâ€Œã€‚</p>
<p>æ•°æ®å¹¶è¡Œâ€Œæ˜¯å¤§æ¨¡å‹è®­ç»ƒä¸­æœ€æ™®éé‡‡ç”¨çš„å¹¶è¡Œç­–ç•¥ï¼ˆåŒæ ·é€‚ç”¨äºæ¨ç†é˜¶æ®µï¼‰ã€‚</p>
<p>å…¶æ ¸å¿ƒç†å¿µæä¸ºç›´æ¥ï¼šæ¯ä¸ªGPUå‡ä¿å­˜ä¸€ä»½å®Œæ•´çš„æ¨¡å‹å‰¯æœ¬ï¼Œè®­ç»ƒæ•°æ®åˆ™è¢«åˆ‡åˆ†ä¸ºè‹¥å¹²å°æ‰¹æ¬¡ï¼ˆmini-batchï¼‰ï¼Œæ¯ä¸ªæ‰¹æ¬¡ç‹¬ç«‹åˆ†é…è‡³ä¸åŒGPUå¹¶è¡Œè¿ç®—ã€‚</p>
<p>åœ¨æ•°æ®å¹¶è¡Œæ¡†æ¶ä¸‹ï¼Œå¤§æ¨¡å‹çš„è®­ç»ƒæµç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b46ffc8b99343389e557632a7f6261f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767679992&amp;x-signature=zlHS7hSBm5AEgAGtqtb0NE7LL%2Fg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å°†è®­ç»ƒæ•°æ®å‡åŒ€åˆ†å‰²ï¼Œåˆ†å‘è‡³å¤šä¸ªå¹¶è¡Œè¿è¡Œçš„GPUï¼ˆWorkerï¼‰ä¸Šï¼›</p>
<p>æ¯ä¸ªGPUå‡æŒæœ‰å®Œå…¨ç›¸åŒçš„æ¨¡å‹æ¶æ„ä¸å‚æ•°å‰¯æœ¬ï¼Œç‹¬ç«‹æ‰§è¡Œå‰å‘ä¼ æ’­ä¸åå‘ä¼ æ’­ï¼Œç‹¬ç«‹è®¡ç®—å±€éƒ¨æ¢¯åº¦ï¼›</p>
<p>å„Worker GPUé€šè¿‡èŠ‚ç‚¹é—´é€šä¿¡ï¼Œé‡‡ç”¨All-Reduceæœºåˆ¶ï¼Œå°†æœ¬åœ°æ¢¯åº¦èšåˆè‡³ä¸€ä¸ªä¸­å¿ƒåŒ–GPUï¼ˆServerï¼‰ï¼›</p>
<p>Server GPUå¯¹æ”¶æ‹¢çš„æ‰€æœ‰æ¢¯åº¦æ‰§è¡Œæ±‚å’Œæˆ–å‡å€¼è¿ç®—ï¼Œç”Ÿæˆå…¨å±€æ¢¯åº¦ï¼›</p>
<p>Server GPUå°†å…¨å±€æ¢¯åº¦é€šè¿‡broadcastå¹¿æ’­æ–¹å¼ï¼ŒåŒæ­¥å›ä¼ è‡³æ¯ä¸€ä¸ªWorker GPUï¼Œç”¨äºæ›´æ–°æœ¬åœ°æ¨¡å‹æƒé‡ï¼›æ›´æ–°å®Œæˆåï¼Œæ‰€æœ‰Workerçš„æ¨¡å‹å‚æ•°å®ç°ä¸¥æ ¼ä¸€è‡´ã€‚</p>
<p>éšåï¼Œè¯¥æµç¨‹å¾ªç¯è¿­ä»£ï¼Œç›´è‡³è®­ç»ƒä»»åŠ¡å®Œæˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2768ffa4b50a4e3181426fab55b81bb7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767679992&amp;x-signature=hE7vpqj1bFMtISz8rC2%2FeMak5IQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>All-Reduceâ€Œ æ˜¯äººå·¥æ™ºèƒ½é¢†åŸŸä¸­ä¸€ä¸ªå¹¿ä¸ºäººçŸ¥çš„æ¦‚å¿µï¼Œå…¶å­—é¢å«ä¹‰ä¸ºâ€œå…¨ï¼ˆAllï¼‰-è§„çº¦ï¼ˆReduceï¼‰â€ï¼ŒæŒ‡å¯¹å„ä¸ªèŠ‚ç‚¹ä¸Šçš„æ•°æ®æ‰§è¡Œèšåˆæ“ä½œï¼ˆå¦‚æ±‚å’Œã€å–æœ€å¤§å€¼ï¼‰ï¼Œå¹¶å°†èšåˆåçš„ç»“æœå¹¿æ’­è‡³æ‰€æœ‰èŠ‚ç‚¹ã€‚</p>
<p>æ•°æ®å¹¶è¡Œâ€Œ çš„ä¸»è¦ä¼˜åŠ¿åœ¨äºå…¶æ¶æ„å®ç°ç›¸å¯¹ç®€æ´ï¼Œèƒ½æœ‰æ•ˆæå‡å¤§è§„æ¨¡æ•°æ®è®­ç»ƒçš„æ•ˆç‡ï¼Œå°¤å…¶åœ¨æ•°æ®è§„æ¨¡è¿œè¶…æ¨¡å‹å‚æ•°é‡çš„åœºæ™¯ä¸‹è¡¨ç°çªå‡ºã€‚</p>
<p>æ•°æ®å¹¶è¡Œâ€Œ çš„å±€é™æ€§ä½“ç°åœ¨æ˜¾å­˜æ¶ˆè€—ä¸Šï¼šæ¯ä¸ª GPU å‡éœ€åŠ è½½å®Œæ•´çš„æ¨¡å‹å‰¯æœ¬ï¼Œéšç€æ¨¡å‹å‚æ•°è§„æ¨¡æŒç»­æ‰©å¤§ï¼Œæ‰€éœ€æ˜¾å­˜éšä¹‹å¢é•¿ï¼Œææ˜“çªç ´å•å¼  GPU çš„æ˜¾å­˜å®¹é‡ä¸Šé™ã€‚</p>
<p>æ•°æ®å¹¶è¡Œâ€Œ çš„é€šä¿¡æˆæœ¬åŒæ ·æ˜¾è‘—ï¼šå„ GPU é—´éœ€é«˜é¢‘åŒæ­¥æ¨¡å‹å‚æ•°æˆ–æ¢¯åº¦ä¿¡æ¯ï¼›æ¨¡å‹å‚æ•°é‡è¶Šå¤§ã€å‚ä¸è®­ç»ƒçš„ GPU æ•°é‡è¶Šå¤šï¼Œé€šä¿¡è´Ÿæ‹…è¶Šé‡ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨ FP16 ç²¾åº¦ä¸‹ï¼Œåƒäº¿å‚æ•°æ¨¡å‹çš„å•æ¬¡æ¢¯åº¦åŒæ­¥éœ€ä¼ è¾“çº¦ 2TB æ•°æ®ã€‚</p>
<p><strong>äºŒã€ZeRO</strong></p>
<p>è¿™é‡Œè¦æ’æ’­ä¸€ä¸ªå…³é”®æ¦‚å¿µâ€”â€”ZeROï¼ˆZero Redundancy Optimizerï¼Œé›¶å†—ä½™ä¼˜åŒ–å™¨ï¼‰ã€‚</p>
<p>åœ¨ä¼ ç»Ÿæ•°æ®å¹¶è¡Œè®­ç»ƒä¸­ï¼Œæ¯ä¸ªGPUéƒ½å®Œæ•´ä¿å­˜æ¨¡å‹çš„å…¨éƒ¨å‰¯æœ¬ï¼Œå¯¼è‡´æ˜¾å­˜æ¶ˆè€—å·¨å¤§ã€‚é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰åŠæ³•è®©æ¯ä¸ªGPUä»…æŒæœ‰æ¨¡å‹çš„ä¸€éƒ¨åˆ†å‘¢ï¼Ÿ</p>
<p>å½“ç„¶å¯ä»¥ã€‚è¿™æ­£æ˜¯ZeROçš„æ ¸å¿ƒæ€æƒ³ï¼šå°†æ¨¡å‹å‰¯æœ¬ä¸­çš„ä¼˜åŒ–å™¨çŠ¶æ€ã€æ¢¯åº¦ä¸å‚æ•°è¿›è¡Œåˆ†å¸ƒå¼åˆ‡åˆ†ï¼Œä»è€Œæ˜¾è‘—é™ä½å•å¡å†…å­˜è´Ÿæ‹…ã€‚</p>
<p>ZeROå…±åŒ…å«ä¸‰ä¸ªé€’è¿›é˜¶æ®µï¼š</p>
<p>ZeRO-1â€Œï¼šä»…å¯¹ä¼˜åŒ–å™¨çŠ¶æ€è¿›è¡Œåˆ†ç‰‡</p>
<p>ZeRO-2â€Œï¼šåœ¨ZeRO-1åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥åˆ‡åˆ†æ¢¯åº¦</p>
<p>ZeRO-3â€Œï¼šå…¨é¢åˆ‡åˆ†ä¼˜åŒ–å™¨çŠ¶æ€ã€æ¢¯åº¦ä¸å‚æ•°ï¼ˆæ˜¾å­˜æ•ˆç‡æœ€é«˜ï¼‰</p>
<p>é€šè¿‡ä¸‹é¢çš„å›¾å’Œè¡¨ï¼Œå¯ä»¥çœ‹å¾—æ›´æ˜ç™½äº›ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2d97bc037d14969a9c9925c1a2b6fa1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767679992&amp;x-signature=o4XKJcvuaEasYI9%2FDf4bK6DrkrQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4f1e31feafd40f19f8847846c0b0582~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767679992&amp;x-signature=nPmfxy2vTfhzKWVAsDZNedpwuS0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ ¹æ®å®æµ‹æ•°æ®ï¼Œå½“ä½¿ç”¨1024å—GPUè®­ç»ƒä¸‡äº¿çº§å‚æ•°æ¨¡å‹æ—¶ï¼ŒZeRO-3å°†å•å¡æ˜¾å­˜å ç”¨ä»7.5TBå¤§å¹…å‹ç¼©è‡³7.3GBã€‚</p>
<p>æ•°æ®å¹¶è¡Œï¼ˆDPï¼‰çš„è¿›é˜¶å½¢æ€ä¸ºDDPï¼ˆåˆ†å¸ƒå¼æ•°æ®å¹¶è¡Œï¼‰ã€‚</p>
<p>ä¼ ç»ŸDPä¸»è¦é€‚ç”¨äºå•æœºå¤šå¡ç¯å¢ƒï¼Œè€ŒDDPåˆ™å…¼å…·å•æœºä¸å¤šæœºéƒ¨ç½²èƒ½åŠ›ï¼Œå…¶æ ¸å¿ƒåœ¨äºRing-AllReduceé€šä¿¡æœºåˆ¶ã€‚</p>
<p>è¯¥æŠ€æœ¯ç”±ç™¾åº¦ç‡å…ˆæå‡ºï¼Œèƒ½æœ‰æ•ˆç¼“è§£æ•°æ®å¹¶è¡Œåœºæ™¯ä¸‹å› æœåŠ¡å™¨èŠ‚ç‚¹å¯¼è‡´çš„é€šä¿¡è´Ÿè½½ä¸å‡è¡¡é—®é¢˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a69ef17f62143c5ac865674f2bdfe9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767679992&amp;x-signature=DTA7hLY0Wo8Ms2Eq5wDqdLjebus%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>ä¸‰ã€PPï¼ˆæµæ°´çº¿å¹¶è¡Œï¼‰</strong></p>
<p>å†æ¥çœ‹çœ‹æ¨¡å‹å¹¶è¡Œã€‚</p>
<p>ä¹‹å‰è®²è¿‡æ•°æ®å¹¶è¡Œï¼Œæ˜¯å°†æ•°æ®åˆ‡åˆ†æˆå¤šä¸ªåˆ†ç‰‡ã€‚è€Œæ¨¡å‹å¹¶è¡Œï¼Œé¡¾åæ€ä¹‰ï¼Œæ˜¯æŠŠæ¨¡å‹æœ¬èº«æ‹†åˆ†æˆè‹¥å¹²éƒ¨åˆ†ï¼Œç”±ä¸åŒçš„ GPU åˆ†åˆ«æ‰§è¡Œå„è‡ªè´Ÿè´£çš„æ¨¡å—ã€‚</p>
<p>ï¼ˆæç¤ºï¼šå½“å‰ä¸šç•Œå¯¹â€œæ¨¡å‹å¹¶è¡Œâ€è¿™ä¸€æœ¯è¯­çš„ç•Œå®šå°šä¸ç»Ÿä¸€ï¼Œéƒ¨åˆ†æ–‡çŒ®ä¸­ç”šè‡³ç›´æ¥ç”¨â€œå¼ é‡å¹¶è¡Œâ€æ¥æŒ‡ä»£å®ƒã€‚ï¼‰</p>
<p>è‡³äºæµæ°´çº¿å¹¶è¡Œï¼Œåˆ™æ˜¯æŠŠæ¨¡å‹çš„å„å±‚â€”â€”æ— è®ºæ˜¯å•å±‚è¿˜æ˜¯è¿ç»­çš„å¤šå±‚â€”â€”åˆ†å¸ƒåˆ°ä¸åŒ GPU ä¸Šï¼Œæ•°æ®æŒ‰å±‚åºä¾æ¬¡ä¼ é€’ï¼Œå½¢æˆç±»ä¼¼æµæ°´çº¿çš„å¹¶è¡Œå¤„ç†æµç¨‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/681d26ef7ebb47109022a0008028f6a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767679992&amp;x-signature=12uAz0KJ6uW7ia2AYofBjpdCI%2FQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯¹äºä¸€ä¸ªåŒ…å«7å±‚çš„ç¥ç»ç½‘ç»œï¼Œå¯å°†ç¬¬1<del>2å±‚åˆ†é…è‡³ç¬¬ä¸€ä¸ªGPUï¼Œç¬¬3</del>5å±‚éƒ¨ç½²åœ¨ç¬¬äºŒä¸ªGPUï¼Œç¬¬6~7å±‚ç½®äºç¬¬ä¸‰ä¸ªGPUï¼›è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ•°æ®ä¾åºåœ¨å„GPUé—´ä¼ é€’å¤„ç†ã€‚</p>
<p>è¡¨é¢ä¸Šï¼Œæµæ°´å¹¶è¡Œä¼¼ä¹å‘ˆç°ä¸²è¡Œç‰¹æ€§â€”â€”æ¯ä¸ªGPUå¿…é¡»ç­‰å¾…å‰åºGPUå®Œæˆè®¡ç®—åæ‰èƒ½å¯åŠ¨ï¼Œç”±æ­¤å¯èƒ½å¼•å‘æ˜¾è‘—çš„GPUèµ„æºé—²ç½®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bf50e31a4904fb2893e3c2c9e5a709c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767679992&amp;x-signature=BXGQ7UGGmrcEXe2YKH8sPiR%2BYC8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾ä¸­ä»¥é»„è‰²æ ‡è¯†çš„åŒºåŸŸå³ä¸º â€ŒBubbleâ€Œï¼ˆæ°”æ³¡ï¼‰æ—¶é—´ã€‚â€ŒBubbleâ€Œ è¶Šå¯†é›†ï¼Œè¡¨æ˜ â€ŒGPUâ€Œ å¤„äºç­‰å¾…çŠ¶æ€ï¼ˆå³ç©ºé—²ï¼‰çš„æ—¶é—´è¶Šé•¿ï¼Œå¯¼è‡´è®¡ç®—èµ„æºåˆ©ç”¨ç‡ä¸‹é™ã€‚</p>
<p>ä¸ºç¼“è§£æ­¤ç°è±¡ï¼Œå¯å°†å•ä¸ª â€Œmini-batchâ€Œ è¿›ä¸€æ­¥åˆ’åˆ†ä¸ºå¤šä¸ª â€Œmicro-batchâ€Œã€‚</p>
<p>å½“ â€ŒGPU 0â€Œ å®Œæˆå¯¹å½“å‰ â€Œmicro-batchâ€Œ çš„è®¡ç®—åï¼Œæ— éœ€ç­‰å¾…ï¼Œç«‹å³å¯åŠ¨ä¸‹ä¸€ â€Œmicro-batchâ€Œ çš„å¤„ç†æµç¨‹ï¼Œä»è€Œæœ‰æ•ˆç¼©çŸ­ç©ºé—²é—´éš™ã€‚</p>
<p>è¯¥ä¼˜åŒ–ç­–ç•¥çš„å¯è§†åŒ–æ•ˆæœå¦‚ä¸‹å›¾ï¼ˆbï¼‰â€Œ æ‰€ç¤ºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71b9dcfa2b6f45f39bf54d90f62bb746~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767679992&amp;x-signature=%2BYO8yDvXu%2FSy%2Fgf62ly9a3yJY3I%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨å®Œæˆä¸€ä¸ª micro-batch çš„å‰å‘è®¡ç®—åï¼Œç«‹å³è°ƒåº¦å¯¹åº”çš„åå‘è®¡ç®—ï¼Œä»è€Œæå‰é‡Šæ”¾éƒ¨åˆ†æ˜¾å­˜ç©ºé—´ï¼Œç”¨äºåŠ è½½åç»­æ•°æ®ï¼Œè¿›è€Œæå‡æ•´ä½“è®­ç»ƒæ•ˆç‡ï¼Œå¦‚ä¸Šå›¾ï¼ˆcï¼‰æ‰€ç¤ºã€‚</p>
<p>ä¸Šè¿°ç­–ç•¥å¯æœ‰æ•ˆæ˜¾è‘—é™ä½æµæ°´çº¿å¹¶è¡Œä¸­çš„ Bubble æ—¶é—´ã€‚</p>
<p>åœ¨æµæ°´çº¿å¹¶è¡Œæ¡†æ¶ä¸‹ï¼Œå¿…é¡»å¯¹ä»»åŠ¡è°ƒåº¦ä¸æ•°æ®ä¼ è¾“å®æ–½ç²¾å‡†æ§åˆ¶ï¼Œå¦åˆ™å°†å¼•å‘æµæ°´çº¿åœæ»ï¼Œå¹¶è¿›ä¸€æ­¥åŠ å‰§ Bubble æ—¶é—´çš„äº§ç”Ÿã€‚</p>
<p><strong>å››ã€</strong> <strong>TPï¼ˆå¼ é‡å¹¶è¡Œï¼‰</strong></p>
<p>æ¨¡å‹å¹¶è¡Œçš„å¦ä¸€ç§å½¢å¼ç§°ä¸ºå¼ é‡å¹¶è¡Œã€‚</p>
<p>è‹¥æµæ°´çº¿å¹¶è¡Œæ˜¯å°†æ¨¡å‹é€å±‚è¿›è¡Œå‚ç›´æ‹†åˆ†ï¼Œé‚£ä¹ˆå¼ é‡å¹¶è¡Œåˆ™æ˜¯å¯¹å•å±‚å†…éƒ¨çš„ç‰¹å®šè¿ç®—å®æ–½æ¨ªå‘åˆ‡åˆ†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f380e228b2db44249a1639b18256ae49~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767679992&amp;x-signature=Pr77jqosvCb06m1S%2B7FYEzyFnAk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¼ é‡å¹¶è¡Œæ˜¯ä¸€ç§å°†æ¨¡å‹ä¸­çš„å¼ é‡ï¼ˆå¦‚æƒé‡çŸ©é˜µï¼‰ä¾æ®ç»´åº¦åˆ’åˆ†è‡³å¤šä¸ªGPUä¸Šå¹¶è¡Œè®¡ç®—çš„ç­–ç•¥ã€‚</p>
<p>å…¶åˆ‡åˆ†æœºåˆ¶ä¸»è¦åŒ…å«ä¸¤ç§ï¼šâ€Œè¡Œåˆ‡åˆ†â€Œï¼ˆRow Parallelismï¼‰ï¼Œå³æƒé‡çŸ©é˜µæ²¿è¡Œæ–¹å‘åˆ†å‰²ï¼›ä»¥åŠâ€Œåˆ—åˆ‡åˆ†â€Œï¼ˆColumn Parallelismï¼‰ï¼Œå³æƒé‡çŸ©é˜µæ²¿åˆ—æ–¹å‘åˆ†å‰²ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ad3dda0520f4484afa4435bc24fe970~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767679992&amp;x-signature=2MS1Hk8DvvAh2IRkZkrutKe%2F%2BNQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¯ä¸ªèŠ‚ç‚¹å¤„ç†åˆ‡åˆ†åçš„å­å¼ é‡ã€‚æœ€åï¼Œé€šè¿‡é›†åˆé€šä¿¡æ“ä½œï¼ˆå¦‚All-Gatheræˆ–All-Reduceï¼‰æ¥åˆå¹¶ç»“æœã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83ffb39ed5864533b60e0e4ecce614cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767679992&amp;x-signature=ZlqfrdQqfXQuqV%2F%2BoiFN%2Fl2ICqg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¼ é‡å¹¶è¡Œçš„ä¼˜åŠ¿åœ¨äºåº”å¯¹å•ä¸ªå¼ é‡è§„æ¨¡è¿‡å¤§çš„åœºæ™¯ï¼Œèƒ½æœ‰æ•ˆé™ä½å•èŠ‚ç‚¹çš„å†…å­˜å‹åŠ›ã€‚</p>
<p>å¼ é‡å¹¶è¡Œçš„å±€é™åœ¨äºï¼Œéšç€åˆ‡åˆ†ç»´åº¦çš„å¢åŠ ï¼ŒèŠ‚ç‚¹é—´çš„é€šä¿¡æˆæœ¬æ˜¾è‘—ä¸Šå‡ï¼›åŒæ—¶ï¼Œå…¶å·¥ç¨‹å®ç°éš¾åº¦è¾ƒé«˜ï¼Œéœ€ç²¾å¿ƒè§„åˆ’å¼ é‡åˆ‡åˆ†ç­–ç•¥ä¸é€šä¿¡åè°ƒæœºåˆ¶ã€‚</p>
<p>æ•°æ®å¹¶è¡Œã€æµæ°´çº¿å¹¶è¡Œã€å¼ é‡å¹¶è¡Œçš„ç®€å•å¯¹æ¯”ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d474e0ef5d24902a271e8b76e30a07e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767679992&amp;x-signature=OvT1mgFz2OjEUXcg7K9l5IMfe%2F8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>äº”ã€ä¸“å®¶å¹¶è¡Œ</strong></p>
<p>2025å¹´åˆï¼Œéšç€DeepSeekçš„èµ°çº¢ï¼Œä¸€ä¸ªæœ¯è¯­ä¹Ÿéšä¹‹è¿…é€Ÿå‡æ¸©â€”â€”MoEï¼ˆMixture of Expertsï¼Œæ··åˆä¸“å®¶æ¨¡å‹ï¼‰ã€‚</p>
<p>MoEæ¨¡å‹çš„ç²¾é«“åœ¨äºâ€œå¤šä¸ªä¸“å®¶å±‚â€ä¸â€œè·¯ç”±ç½‘ç»œï¼ˆé—¨æ§ç½‘ç»œï¼‰â€çš„ååŒè¿ä½œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/693db852a57e4959a532f8997f03eee6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767679992&amp;x-signature=9aWB2188PobN8dZL1jyYegFXeCA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸“å®¶å±‚ä¸­ï¼Œæ¯ä½ä¸“å®¶ä¸“ç²¾äºå¤„ç†æŸä¸€ç±»tokenï¼ˆå¦‚è¯­æ³•ã€è¯­ä¹‰ç­‰ï¼‰ã€‚è·¯ç”±ç½‘ç»œä¾æ®è¾“å…¥tokençš„ç‰¹å¾ï¼ŒåŠ¨æ€ç­›é€‰å‡ºå°‘æ•°ä¸“å®¶è¿›è¡Œæ¿€æ´»å¤„ç†ï¼Œå…¶ä½™ä¸“å®¶ä¿æŒä¼‘çœ çŠ¶æ€ã€‚</p>
<p>MoEé€šè¿‡æ˜ç¡®çš„ä»»åŠ¡åˆ†å·¥ä¸æŒ‰éœ€è°ƒåº¦ç®—åŠ›ï¼Œæ˜¾è‘—æå‡äº†æ¨¡å‹çš„æ•´ä½“è¿è¡Œæ•ˆç‡ã€‚</p>
<p>ä¸“å®¶å¹¶è¡Œï¼ˆExpert Parallelismï¼‰æ˜¯MoEï¼ˆæ··åˆä¸“å®¶æ¨¡å‹ï¼‰ä¸­çš„ä¸€ç§å¹¶è¡Œè®¡ç®—èŒƒå¼ï¼Œå…¶æ ¸å¿ƒåœ¨äºå°†å„ä¸“å®¶ï¼ˆå­æ¨¡å‹ï¼‰éƒ¨ç½²äºä¸åŒçš„GPUèŠ‚ç‚¹ï¼Œä»è€Œå®ç°è®¡ç®—è´Ÿè½½çš„åˆ†å¸ƒå¼æ‰¿è½½ï¼Œä¼˜åŒ–èµ„æºåˆ©ç”¨ç‡ã€‚</p>
<p>ç›¸è¾ƒäºä¼ ç»Ÿå¹¶è¡Œæ–¹å¼ï¼Œä¸“å®¶å¹¶è¡Œçš„æ ¹æœ¬å·®å¼‚åœ¨äºï¼šè¾“å…¥æ•°æ®éœ€ç»ç”±åŠ¨æ€è·¯ç”±æœºåˆ¶åˆ†å‘è‡³å¯¹åº”çš„ä¸“å®¶ï¼Œè¿™ä¸€è¿‡ç¨‹å¼•å‘å…¨èŠ‚ç‚¹èŒƒå›´å†…çš„æ•°æ®é‡åˆ†é…ã€‚</p>
<p>å¾…æ‰€æœ‰ä¸“å®¶å®Œæˆå¤„ç†åï¼Œå¿…é¡»å°†åˆ†å¸ƒåœ¨å„èŠ‚ç‚¹çš„è¾“å‡ºç»“æœï¼Œä¸¥æ ¼æŒ‰ç…§åŸå§‹è¾“å…¥åºåˆ—è¿›è¡Œé‡ç»„ä¸å½’ä½ã€‚</p>
<p>è¿™ç§è·¨è®¾å¤‡çš„æ•°æ®äº¤æ¢æ¨¡å¼ï¼Œè¢«å®šä¹‰ä¸ºAll-to-Allé€šä¿¡ã€‚</p>
<p>ä¸“å®¶å¹¶è¡Œæœºåˆ¶æ˜“å—è´Ÿè½½ä¸å‡çš„åˆ¶çº¦ï¼šè‹¥æŸä¸“å®¶æ¥æ”¶çš„tokenæ•°é‡è¶…å‡ºå…¶å¤„ç†å®¹é‡ï¼Œå°†å¯¼è‡´éƒ¨åˆ†Tokensæ— æ³•åŠæ—¶å¤„ç†ï¼Œè¿›è€Œå½¢æˆç³»ç»Ÿç“¶é¢ˆã€‚</p>
<p>å› æ­¤ï¼Œæ„å»ºé«˜æ•ˆã€å‡è¡¡çš„é—¨æ§æœºåˆ¶ä¸ä¸“å®¶é€‰æ‹©ç­–ç•¥ï¼Œæ˜¯æˆåŠŸéƒ¨ç½²ä¸“å®¶å¹¶è¡Œæ¶æ„çš„æ ¸å¿ƒå‰æã€‚</p>
<p><strong>å…­ã€æ··åˆå¹¶è¡Œ</strong></p>
<p>åœ¨å®é™…éƒ¨ç½²ä¸­ï¼Œå°¤å…¶æ˜¯åœ¨è®­ç»ƒå‚æ•°è§„æ¨¡è¾¾ä¸‡äº¿çº§åˆ«çš„è¶…å¤§è§„æ¨¡æ¨¡å‹æ—¶ï¼Œå•ä¸€å¹¶è¡Œæ–¹å¼å‡ ä¹ä»ä¸ç‹¬ç«‹ä½¿ç”¨ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯èåˆå¤šç§æœºåˆ¶çš„æ··åˆå¹¶è¡Œæ¶æ„ï¼ˆå³ååŒè¿ç”¨å¤šç§å¹¶è¡ŒæŠ€æœ¯ï¼‰ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<p>æ•°æ®å¹¶è¡Œ + å¼ é‡å¹¶è¡Œâ€Œï¼šæ•°æ®å¹¶è¡Œè´Ÿè´£åˆ†å‘è®­ç»ƒæ‰¹æ¬¡ï¼Œå¼ é‡å¹¶è¡Œåˆ™åˆ†è§£å•ä¸ªæ ·æœ¬çš„å·¨å‹å¼ é‡è¿ç®—ã€‚</p>
<p>æµæ°´çº¿å¹¶è¡Œ + ä¸“å®¶å¹¶è¡Œâ€Œï¼šæµæ°´çº¿å¹¶è¡Œå°†æ¨¡å‹æŒ‰å±‚åˆ‡åˆ†ï¼Œä¸“å®¶å¹¶è¡Œåˆ™å¯¹æ¯ä¸€å±‚å†…çš„ç¨€ç–ä¸“å®¶æ¨¡å—è¿›è¡Œç‹¬ç«‹åˆ’åˆ†ã€‚</p>
<p>æ›´è¿›ä¸€æ­¥çš„ä¼˜åŒ–å½¢æ€æ˜¯ â€Œ3Då¹¶è¡Œâ€Œï¼Œå³é€šè¿‡â€œâ€Œæ•°æ®å¹¶è¡Œ + å¼ é‡å¹¶è¡Œ + æµæ°´çº¿å¹¶è¡Œâ€Œâ€çš„ä¸‰ç»´ååŒæ‹†åˆ†ï¼Œå®ç°è®¡ç®—è´Ÿè½½çš„ç«‹ä½“åŒ–å‡è¡¡ï¼Œå·²æˆä¸ºå½“å‰ä¸‡äº¿çº§æ¨¡å‹è®­ç»ƒçš„æ ‡å‡†åŒ–èŒƒå¼ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19cae3aabe444dccbcb4b52a9b3904c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767679992&amp;x-signature=%2F7jkKkEtiOan8e7tYFBnXIP5VSA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>æœ€å</strong></p>
<p>ä»¥ä¸Šå°±æ˜¯å…³äºDPã€PPã€TPã€EPç­‰å¹¶è¡Œè®­ç»ƒæ–¹å¼çš„ä»‹ç»ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46294590151049cfa9e03ddc29b53135~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767679992&amp;x-signature=cUusszJ30aaApg8UTPZCHWZsxAg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¹¶è¡Œè®¡ç®—çš„å¤æ‚æ€§è¿œè¶…è¡¨é¢æ‰€è§ï¼Œå‰è¿°å†…å®¹ä»…è§¦åŠçš®æ¯›ã€‚ç„¶è€Œåœ¨å®é™…å·¥ç¨‹ä¸­ï¼Œå¼€å‘è€…æ— éœ€æ·±ç©¶åº•å±‚å®ç°æœºåˆ¶ã€‚</p>
<p>å¾—ç›Šäº DeepSpeedï¼ˆå¾®è½¯å¼€æºï¼Œæ”¯æŒ3Då¹¶è¡Œ+ZeROå†…å­˜ä¼˜åŒ–ï¼‰ã€Megatron-LMï¼ˆNVIDIAå¼€æºï¼Œ3Då¹¶è¡Œçš„æ ‡æ†ï¼‰ã€FSDP ç­‰æˆç†Ÿå¼€æºæ¡†æ¶ï¼Œå¤§è¯­è¨€æ¨¡å‹çš„è®­ç»ƒå·²å¯ç›´æ¥é«˜æ•ˆå¼€å±•ã€‚</p>
<p>ä¸åŒå¹¶è¡Œç­–ç•¥å‘ˆç°å‡ºè¿¥å¼‚çš„é€šä¿¡æ¨¡å¼ã€‚è¦æœ€å¤§åŒ–è®­æ¨æ•ˆç‡ï¼Œé›†ç¾¤çš„æ•´ä½“æ¶æ„ä¸ç½‘ç»œè§„åˆ’ï¼Œå¿…é¡»ç²¾å‡†åŒ¹é…å„ç±»å¹¶è¡Œæ–¹å¼çš„æµé‡ç‰¹å¾ã€‚</p>
<p>æ•°æ®å¹¶è¡Œâ€Œï¼šå› éœ€é«˜é¢‘åŒæ­¥æ¢¯åº¦å‚æ•°ï¼Œå¯¹ç½‘ç»œå¸¦å®½æ„æˆæŒç»­é«˜å‹ï¼Œå¿…é¡»ä¿éšœé“¾è·¯å…·å¤‡æ”¯æ’‘æµ·é‡æ¢¯åº¦æ•°æ®ç¬æ—¶ååçš„èƒ½åŠ›ï¼Œå¦åˆ™é€šä¿¡ç“¶é¢ˆå°†ç›´æ¥æ‹–æ…¢è®­ç»ƒèŠ‚å¥ã€‚</p>
<p>æµæ°´çº¿å¹¶è¡Œâ€Œï¼šæ¨¡å‹åˆ†æ®µåœ¨å¤šå°æœåŠ¡å™¨é—´æµæ°´çº¿å¼æ¨è¿›ï¼ŒèŠ‚ç‚¹é—´ä¾èµ–ç´§å¯†ï¼Œå®œé›†ä¸­éƒ¨ç½²äºåŒä¸€å¶è„Šç½‘ç»œçš„å¶èŠ‚ç‚¹ï¼ˆleafï¼‰ä¸‹ï¼Œä»¥æœ€å°åŒ–è·¨æœºé€šä¿¡å»¶è¿Ÿã€‚</p>
<p>å¼ é‡å¹¶è¡Œâ€Œï¼šé€šä¿¡å¼€é”€æé«˜ï¼Œæ•°æ®åˆ‡åˆ†é¢‘ç¹ï¼Œæœ€ä½³å®è·µæ˜¯å°†è®¡ç®—è´Ÿè½½é›†ä¸­äºå•å°æœåŠ¡å™¨å†…çš„å¤šä¸ª GPU ä¹‹é—´ï¼Œåˆ©ç”¨é«˜é€Ÿäº’è”æ€»çº¿é™ä½é€šä¿¡å¼€é”€ã€‚</p>
<p>ä¸“å®¶å¹¶è¡Œâ€Œï¼šå„ä¸“å®¶æ¨¡å—åˆ†å¸ƒäºä¸åŒ GPUï¼Œå…¶é—´éœ€é¢‘ç¹äº¤æ¢ä¸­é—´æ¿€æ´»å€¼ï¼Œå…¶é€šä¿¡å¼ºåº¦ç”±ä¸“å®¶æ•°é‡ä¸äº¤äº’é¢‘æ¬¡å…±åŒå†³å®šï¼Œå¿…é¡»ç²¾ç»†è®¾è®¡ GPU äº’è”æ‹“æ‰‘ä¸æ•°æ®é€šè·¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/260daeefbe0c4b76803b9c69e95df144~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767679992&amp;x-signature=X6DiR%2BAl1LqSNCd4BXWES%2F6cY44%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç»¼ä¸Šï¼Œåœ¨ GPU å•å¡ç®—åŠ›é€¼è¿‘ç‰©ç†æé™çš„å½“ä¸‹ï¼Œå”¯æœ‰ä»å¹¶è¡Œè®¡ç®—çš„æ¶æ„ä¸ç½‘ç»œå±‚é¢æŒç»­æ·±æŒ–ï¼Œæ–¹èƒ½çªç ´æ€§èƒ½ç“¶é¢ˆï¼Œé‡Šæ”¾ç®—åŠ›é›†ç¾¤çš„çœŸæ­£æ½œèƒ½ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer"><strong>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨æ™ºæ³ŠAIã€‚</strong></a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[*** éƒ½ä¸ç”¨tailwindï¼ï¼ï¼å“å˜› çœŸé¦™ğŸ˜˜ğŸ˜˜ğŸ˜˜]]></title>    <link>https://juejin.cn/post/7589214643500793919</link>    <guid>https://juejin.cn/post/7589214643500793919</guid>    <pubDate>2025-12-30T06:14:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589214643500793919" data-draft-id="7588996730772242432" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="*** éƒ½ä¸ç”¨tailwindï¼ï¼ï¼å“å˜› çœŸé¦™ğŸ˜˜ğŸ˜˜ğŸ˜˜"/> <meta itemprop="keywords" content="å‰ç«¯,React.js,JavaScript"/> <meta itemprop="datePublished" content="2025-12-30T06:14:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Jayä¸¶"/> <meta itemprop="url" content="https://juejin.cn/user/2419368546022221"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            *** éƒ½ä¸ç”¨tailwindï¼ï¼ï¼å“å˜› çœŸé¦™ğŸ˜˜ğŸ˜˜ğŸ˜˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2419368546022221/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Jayä¸¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T06:14:14.000Z" title="Tue Dec 30 2025 06:14:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ¯ å‰è¨€</h2>
<p>åˆšå…¥èŒæ–°å…¬å¸ï¼Œè€æ¿å°±ç»™äº†æˆ‘ä¸€ä¸ªâ€œæƒŠå–œâ€ä»»åŠ¡ï¼š<br/>
<strong>è€æ¿</strong>ï¼šâ€œéœ€è¦æ ¹æ®ç°æœ‰åå°ç³»ç»Ÿï¼Œåšä¸ªæ–°çš„åå°ç³»ç»Ÿï¼Œå¥½çœ‹ç‚¹ã€å¤§æ°”ç‚¹ã€ä¸è¦å¤ªæ¨¡æ¿åŒ–ï¼Œå¯¹äº†ç”¨ Reactã€‚â€<br/>
<strong>æˆ‘</strong>ï¼šâ€œï¼Ÿï¼Ÿï¼Ÿæ²¡æœ‰ UIã€æ²¡æœ‰äº§å“ã€‚æˆ‘å°¼ç›*** ***â€</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3074f89969248558f1301ebfc594534~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF55Li2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767680054&amp;x-signature=Jif7Zs5wuXU3B4JzjfWWe%2F9Hrds%3D" alt="ä¸‹è½½.jpg" loading="lazy"/></p>
<h2 data-id="heading-1">ğŸ’© äº†è§£æ—§ç‰ˆç³»ç»Ÿ</h2>
<p>æ—§ç‰ˆç³»ç»Ÿæ˜¯ Vue3 + ant-design-vue åšçš„ï¼Œä¸€ä¸ªå·¨å¤§çš„â€œå±å±±â€ç›´æ¥ä¸¢äº†è¿‡æ¥ã€‚å‡ ä¸ªæ¯”è¾ƒä¸¥é‡çš„é—®é¢˜ï¼š</p>
<ol>
<li><strong>ä»£ç è´¨é‡æå·®</strong>ï¼šå®Œå…¨æ²¡æœ‰ç»„ä»¶åŒ–å¯è¨€ï¼Œæ‰€æœ‰é¡µé¢éƒ½æ˜¯ä¸€å¨ä¸€å¨çš„ä»£ç å †åœ¨ä¸€èµ·</li>
<li><strong>UI è®¾è®¡æå·®</strong>ï¼šåº”è¯¥ä¹Ÿæ˜¯æ²¡æœ‰è®¾è®¡å¸ˆï¼Œå®Œå…¨é å‰ç«¯éšæ„å‘æŒ¥ï¼ˆä¸»é¢˜é…è‰²çº¢é…ç»¿ã€ä¹±ä¸ƒå…«ç³Ÿçš„å­—ä½“å¤§å°ã€é—´è·ï¼‰</li>
<li><strong>åŠŸèƒ½é€»è¾‘æ··ä¹±</strong>ï¼šä»£ç æ³¨é‡Šæå°‘ï¼Œå®Œå…¨çœ‹ä¸æ‡‚ä¸šåŠ¡é€»è¾‘</li>
<li><strong>åç«¯ä¹Ÿæ˜¯ä¸€å¨å±</strong>ï¼šæ¥å£è®¾è®¡å·®ï¼Œå‰åç«¯é…åˆå·®ï¼Œå¾ˆå¤šä¸œè¥¿éƒ½æ˜¯å‰ç«¯åšçš„å…¼å®¹/ç¡¬ç¼–ç ç­‰ç­‰</li>
</ol>
<p>ä»£ç æ˜¯è€æ¿ä¸çŸ¥é“ä»å“ªé‡Œå¼„æ¥çš„å‹ç¼©åŒ…ã€‚å¦‚ä¸Šæ‰€ç¤ºï¼Œâ€œå±å±±â€æŠŠæˆ‘å‹å¾—å–˜ä¸è¿‡æ°”ã€‚æˆ‘æœ‰æ—¶å€™çœŸæƒ³æ‰¾åˆ°ä¹‹å‰å†™è¿™ä¸ªä»£ç çš„äººéª‚ä¸€é¡¿ï¼ˆæ²¡æœ‰ Git è®°å½•ä¹Ÿä¸çŸ¥é“æ˜¯è°ï¼‰ã€‚è¿™ä¸ªä»£ç å­˜åœ¨çš„å”¯ä¸€ä»·å€¼å°±æ˜¯ä¸»æµç¨‹èƒ½è·‘ï¼Œæˆ–è®¸è¿™å°±æ˜¯å°å…¬å¸è€æ¿æ‰€å…³å¿ƒçš„å§ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10ed31c568c948a49f1dd15c12922284~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF55Li2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767680054&amp;x-signature=GKFkT3j%2BKsN%2FWGxC1UbyHF3DJ6o%3D" alt="ä¸‹è½½ (2).jpg" loading="lazy"/></p>
<h2 data-id="heading-2">ğŸ§  æ€è€ƒæ¶æ„</h2>
<p>æ²¡æœ‰ UIã€äº§å“ï¼Œæˆ‘çœŸçš„æ˜¯ä¸€å¤´é›¾æ°´ï¼Œä¸çŸ¥é“è¯¥å¦‚ä½•ä¸‹æ‰‹ã€‚åªèƒ½å…ˆæŠŠæ—§ç‰ˆç³»ç»Ÿçš„åŠŸèƒ½ç†æ¸…æ¥šï¼Œç„¶åä¸€æ­¥æ­¥å®ç°ã€‚å› ä¸ºè€æ¿è¦æ±‚ç”¨ Reactï¼Œæ­£å¥½æˆ‘ä¹‹å‰ç”¨ React è‡ªå·±æ­å»ºäº†ä¸€å¥—åå°ç®¡ç†æ¨¡æ¿ï¼ˆ<a href="https://juejin.cn/post/7236168316237414461" target="_blank" title="https://juejin.cn/post/7236168316237414461">æ–‡ç« é“¾æ¥</a>ï¼‰ï¼Œå®ƒæ˜¯åŸºäº Ant Design çš„ä¸€å¥—ç³»ç»Ÿï¼Œæœ‰å…´è¶£çš„å¯ä»¥å»çœ‹çœ‹ã€‚</p>
<h2 data-id="heading-3">ğŸš€ å¼€å§‹å®ç°</h2>
<p>ç”±äºæˆ‘ä¹‹å‰æ­å»ºçš„ React åå°æ¨¡æ¿å·²ç»æ¯”è¾ƒå®Œå–„äº†ï¼Œæ‰€ä»¥æˆ‘ç›´æ¥æ‹¿æ¥ç”¨ã€‚ç„¶åä¸€æ­¥æ­¥æŠŠæ—§ç‰ˆç³»ç»Ÿçš„åŠŸèƒ½æ¬è¿‡æ¥ï¼Œå¹¶ä¸”å‡çº§äº†ä¸€äº›ä¾èµ–ç‰ˆæœ¬ç­‰ç­‰ã€‚è€æ¿è¦æ±‚çš„ä¸€ä¸ªé‡ç‚¹æ˜¯ä¸è¦å¤ªâ€œæ¨¡æ¿åŒ–â€ï¼Œæˆ‘ä¸€ç›´æ€è€ƒåº”è¯¥æ€ä¹ˆæ ·å»å¤„ç†å’Œä¼˜åŒ–ã€‚</p>
<p>ç”±äºæ²¡æœ‰è®¾è®¡å¸ˆï¼Œæˆ‘åªèƒ½å‡­å€Ÿæˆ‘çš„å®¡ç¾å»è°ƒæ•´ä¸€äº› UI ç»†èŠ‚ï¼Œæ¯”å¦‚é…è‰²ã€å­—ä½“ã€é—´è·ã€å›¾æ ‡ç­‰ç­‰ã€‚æ€»ä¹‹å°±æ˜¯å°½é‡è®©å®ƒçœ‹èµ·æ¥ä¸é‚£ä¹ˆåƒä¸€ä¸ªæ¨¡æ¿ç³»ç»Ÿã€‚åˆç‰ˆå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f11ab5d1ad7463ea70b53ff90928427~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF55Li2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767680054&amp;x-signature=jxhZkMtUtp%2B1VqIcLkkv9XsHBNw%3D" alt="react_antd_ç¤ºä¾‹å›¾.png" loading="lazy"/></p>
<p>ä¸Šå›¾çš„ UIï¼Œæˆ‘éƒ½æœ‰å¾®è°ƒè¿‡åŒ…æ‹¬å­—ä½“ã€å›¾æ ‡ã€é—´è·ç­‰ç­‰ï¼Œè®©å®ƒçœ‹èµ·æ¥ä¸é‚£ä¹ˆâ€œæ¨¡æ¿åŒ–â€ã€‚å¥ˆä½•æœ‰å¤©è€æ¿ä»æˆ‘æ—è¾¹è¿‡ï¼Œçœ‹äº†ä¸€çœ¼è¯´ï¼šâ€œä½ æ˜¯ç”¨çš„ Antd å—ï¼Ÿèƒ½ä¸èƒ½æå¾—ä¸é‚£ä¹ˆæ¨¡æ¿åŒ–ï¼Œçœ‹ç€è¿˜æ˜¯å¤ªå¤§ä¼—äº†ã€‚â€å½“æ—¶æˆ‘å†…å¿ƒçœŸçš„æƒ³éª‚äººï¼Œè¾›è¾›è‹¦è‹¦åšçš„å·¥ä½œå°±è¿™æ ·è¢«ä¸€å¥è¯å¦å®šäº†ï¼Œè€Œä¸”åˆæ²¡ UIã€åˆæ²¡äº§å“ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d336e00bee443c584b93f5aa26b71ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF55Li2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767680054&amp;x-signature=CE1fYn1i8aD5CTXv3FJ4URR%2B6xA%3D" alt="ä¸‹è½½ (3).jpg" loading="lazy"/></p>
<h2 data-id="heading-4">ğŸ”„ é‡æ–°å‡ºå‘</h2>
<p>æ²¡åŠæ³•ï¼Œè°è®©äººå®¶æ˜¯è€æ¿ï¼Œè¿˜æ˜¯ç…§åšã€‚æˆ‘åœ¨ç½‘ä¸Šæœ‰çœ‹åˆ°è¿‡ shadcn/ui è¿™ä¸ªç»„ä»¶åº“çš„ï¼Œå®ƒæ˜¯åŸºäº TailwindCSSï¼Œæˆ‘æœ¬äººæ˜¯éå¸¸åŒæ¶è¿™ä¸ªç©æ„çš„ï¼š</p>
<ol>
<li>å› ä¸ºä¸Šä¸€å®¶å…¬å¸æœ‰ä¸ªåŒäº‹åœ¨é¡¹ç›®é‡Œä½¿ç”¨TailwindCSSï¼Œæ»¡å±çš„ classnameï¼Œçœ‹å¾—æˆ‘å¤´çš®å‘éº»ã€‚æƒ³è¦æ”¹ä¸€ä¸ªæ ·å¼éƒ½ä¸çŸ¥é“ä»å“ªä¸‹æ‰‹</li>
<li>shadcn/ui å’Œæˆ‘è®¤çŸ¥é‡Œçš„ Antd Pro æ˜¯å®Œå…¨ä¸åŒçš„è®¾è®¡ä½“ç³»ã€‚æ¯”å¦‚åœ¨ Antd Pro é‡Œå†™ä¸€ä¸ªè¡¨æ ¼ï¼Œè¯·æ±‚æ¥å£æ‹¿åˆ°æ•°æ®å–‚ç»™ Table å°±è¡Œäº†ã€‚ä½†æ˜¯åœ¨ shadcn/ui é‡Œä½ å¾—è‡ªå·±å†™åˆ†é¡µã€æ’åºã€ç­›é€‰è¿™äº›åŠŸèƒ½ã€‚ä½ å¾—è‡ªå·±å®ç°å¾ˆå¤šåŠŸèƒ½ï¼Œä¼šå¯¼è‡´æˆ‘çš„å·¥ä½œé‡å¤§å¢ã€‚è™½ç„¶ç°åœ¨éƒ½ç”¨ AI ç¼–ç äº†ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯è§‰å¾—å¾ˆéº»çƒ¦</li>
</ol>
<p>ä½†æ˜¯ç”±äºæˆ‘çŸ¥é“ TailwindCSS çš„æµè¡Œè¶‹åŠ¿ï¼Œä¸”ç¡®å® shadcn/ui çš„å¯å®šåˆ¶åŒ–æ›´é«˜ä¸€ç‚¹ï¼Œæ‰€ä»¥è¿˜æ˜¯å†³å®šç”¨ shadcn/ui æ¥é‡æ„ã€‚ä½†æ˜¯æ—¶é—´ç´§ã€ä»»åŠ¡é‡ï¼Œæˆ‘æƒ³ä»ç½‘ä¸Šæ‰¾æ‰¾æœ‰æ²¡æœ‰ç°æˆçš„å¯ä»¥äºŒå¼€çš„ shadcn åå°æ¨¡æ¿ã€‚ç»“æœå‘ç°äº†è¿™ä¸ªé¡¹ç›®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsatnaing%2Fshadcn-admin" target="_blank" title="https://github.com/satnaing/shadcn-admin" ref="nofollow noopener noreferrer">shadcn-admin</a>ã€‚é‡Œé¢å°è£…å¥½äº† Tableã€Layout ç­‰åŠŸèƒ½ä¸”æ”¯æŒç§»åŠ¨ç«¯ã€‚<strong>æ¨èç»™å„ä½ï¼Œå¤ªé¦™å•¦ï¼</strong></p>
<h2 data-id="heading-5">ğŸ› ï¸ æŠ€æœ¯æ ˆ</h2>
<ul>
<li>React 19</li>
<li>TypeScript</li>
<li>TanStack å®¶æ—ï¼ˆ@tanstack/react-queryã€@tanstack/react-routerã€@tanstack/react-tableï¼‰</li>
<li>shadcn/ui</li>
<li>TailwindCSS</li>
<li>Zustand</li>
<li>Zod</li>
<li>react-hook-form ç­‰</li>
</ul>
<h2 data-id="heading-6">ğŸ”§ é›†æˆé€‚é…</h2>
<p>è™½è¯´æ˜¯ç°æˆçš„æ¨¡æ¿ï¼Œä½†æ˜¯æœ‰ä¸€äº›åŠŸèƒ½æ²¡æœ‰ã€æˆ–è€…éœ€è¦æ ¹æ®ä¸šåŠ¡é€‚é…ã€‚æ¯”å¦‚å›½é™…åŒ–ã€Table è¿œç¨‹æ•°æ®è¯·æ±‚ï¼ˆæ¨¡æ¿æ˜¯æœ¬åœ°æ¨¡æ‹Ÿæ•°æ®ï¼‰ç­‰ã€‚</p>
<h2 data-id="heading-7">ğŸ¨ æœ€ç»ˆå½¢æ€</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82c50450e8594ff5a1b356fab81f2d51~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF55Li2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767680054&amp;x-signature=cci65FuaEXoApJYutRMzlByE5WE%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-8">ğŸ“Œ æ€»ç»“</h2>
<p>è¿™ä¸€å¥—æ–°å…´æ¨¡æ¿ï¼Œä¸Šæ‰‹è¿˜æ˜¯æœ‰ç‚¹éš¾åº¦çš„ï¼ˆæ¯”å¦‚ TanStack å®¶æ—ã€shadcn/uiï¼‰ã€‚TanStack ä½“ç³»åºå¤§ï¼Œshadcn å®šåˆ¶åŒ–é«˜ï¼ˆåŠŸèƒ½éƒ½è¦è‡ªå·±å®ç°ï¼‰ã€‚ä½†æ˜¯ç›®å‰ AI ç››è¡Œï¼Œèµ„æ–™ä¹Ÿæ˜¯å¤§æŠŠï¼Œç›¸ä¿¡å¯¹ä½ æ¥è¯´ä¹Ÿéƒ½æ˜¯å°èœä¸€ç¢Ÿã€‚</p>
<h2 data-id="heading-9">ğŸ’­ æœ€å</h2>
<p>Tailwind è¿˜æ˜¯æŒºé¦™çš„ï¼Œæˆ‘è§‰å¾—å®ƒæ˜¯ä¸€æŠŠåŒåˆƒå‰‘ã€‚æˆ‘çš„å‰åŒäº‹ï¼ˆTailwind å†™ class åå‡ ã€å‡ åè¡Œï¼‰ç¡®å®ç»™ç»´æŠ¤çš„äººå¢åŠ å¿ƒæ™ºè´Ÿæ‹…ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥é€šè¿‡ä¸€äº›æŠ€æœ¯æ‰‹æ®µæ”¹å–„å’Œä¼˜åŒ–ã€‚è¿™å–å†³äºç”¨å®ƒçš„äººæ˜¯æ€æ ·çš„ã€‚</p>
<p align="center"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/591a47f3842c427aa9328d62a00c4c99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF55Li2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767680054&amp;x-signature=Z80eUtJKERqYpHxtuNXRErQXo14%3D" alt="ä¸‹è½½ (4).jpg" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Apifox 12 æœˆæ›´æ–°ï½œ AI ç”Ÿæˆç”¨ä¾‹åŒæ­¥ç”Ÿæˆæµ‹è¯•æ•°æ®ã€æ¥å£æ–‡æ¡£å®Œæ•´æ€§æ£€æµ‹ã€è®¾è®¡ SSE æµå¼æ¥å£ã€ä» Git ä»“åº“å¯¼å…¥æ•°æ®]]></title>    <link>https://juejin.cn/post/7589220406319562788</link>    <guid>https://juejin.cn/post/7589220406319562788</guid>    <pubDate>2025-12-30T06:22:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589220406319562788" data-draft-id="7589201772133122089" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Apifox 12 æœˆæ›´æ–°ï½œ AI ç”Ÿæˆç”¨ä¾‹åŒæ­¥ç”Ÿæˆæµ‹è¯•æ•°æ®ã€æ¥å£æ–‡æ¡£å®Œæ•´æ€§æ£€æµ‹ã€è®¾è®¡ SSE æµå¼æ¥å£ã€ä» Git ä»“åº“å¯¼å…¥æ•°æ®"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,æµ‹è¯•"/> <meta itemprop="datePublished" content="2025-12-30T06:22:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Apifox"/> <meta itemprop="url" content="https://juejin.cn/user/2766843870448222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Apifox 12 æœˆæ›´æ–°ï½œ AI ç”Ÿæˆç”¨ä¾‹åŒæ­¥ç”Ÿæˆæµ‹è¯•æ•°æ®ã€æ¥å£æ–‡æ¡£å®Œæ•´æ€§æ£€æµ‹ã€è®¾è®¡ SSE æµå¼æ¥å£ã€ä» Git ä»“åº“å¯¼å…¥æ•°æ®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2766843870448222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Apifox
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T06:22:11.000Z" title="Tue Dec 30 2025 06:22:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Apifox æ–°ç‰ˆæœ¬ä¸Šçº¿å•¦ï¼çœ‹çœ‹æœ¬æ¬¡ç‰ˆæœ¬æ›´æ–°ä¸»è¦æ¶µç›–çš„é‡ç‚¹å†…å®¹ï¼Œæœ‰æ²¡æœ‰ä½ æ‰€å…³æ³¨çš„åŠŸèƒ½ç‰¹æ€§ï¼š</p>
<ul>
<li><strong>AI èƒ½åŠ›å†è¿›åŒ–</strong>
<ul>
<li>AI ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œæ”¯æŒåŒæ—¶ç”ŸæˆåŒ¹é…ç”¨ä¾‹çš„æµ‹è¯•æ•°æ®</li>
<li>æ”¯æŒé€šè¿‡ AI è¿›è¡Œæ¥å£æ–‡æ¡£å®Œæ•´æ€§æ£€æµ‹</li>
<li>æ–°å¢æ”¯æŒå¤šä¸ª AI æ¨¡å‹ä¾›åº”å•†</li>
</ul>
</li>
<li><strong>API è®¾è®¡ä¸ OpenAPI è§„èŒƒå…¼å®¹</strong>
<ul>
<li>è®¾è®¡ API æ—¶ï¼Œæ”¯æŒ SSE æµå¼å“åº”åŠ AI å¤§æ¨¡å‹æ¥å£</li>
<li>æ”¯æŒè®¾å®š 2XXã€4XXã€5XXã€default ç­‰ç‰¹æ®ŠçŠ¶æ€ç </li>
</ul>
</li>
<li><strong>API è°ƒè¯•èƒ½åŠ›æ‰©å±•</strong>
<ul>
<li>æ”¯æŒä¸ºç¯å¢ƒä¸­å„æœåŠ¡é…ç½®é€šç”¨ç½‘ç»œä»£ç†ï¼ˆHTTP / SOCKS5ï¼‰</li>
<li>è°ƒè¯• Socket.IO æ¥å£æ—¶ï¼Œæ”¯æŒå‘é€ç©ºæ¶ˆæ¯å’Œæ— å‚æ•°çš„æ¶ˆæ¯</li>
<li>æ”¯æŒåœ¨è¾“å…¥æ¡†ç›´æ¥ç¼–è¾‘å¼•ç”¨çš„å˜é‡åã€åŠ¨æ€å€¼è¡¨è¾¾å¼</li>
</ul>
</li>
<li><strong>åœ¨çº¿æ–‡æ¡£æŒç»­å‡çº§</strong>
<ul>
<li>æ”¯æŒè‡ªå®šä¹‰èƒŒæ™¯å›¾æ¡ˆã€ç›®å½•æ ‘å®½åº¦ã€å¤šçº§å¯¼èˆª</li>
<li>æ”¯æŒ Algolia çš„ã€ŒAsk AIã€åŠŸèƒ½</li>
</ul>
</li>
<li><strong>å¯¼å…¥/å¯¼å‡ºåŠŸèƒ½è¿›åŒ–</strong>
<ul>
<li>æ”¯æŒä» Git ä»“åº“å¯¼å…¥æ•°æ®</li>
<li>æ”¯æŒå¯¼å…¥/å¯¼å‡ºã€Œå“åº”ç»„ä»¶ã€</li>
</ul>
</li>
<li><strong>ç”¨æˆ·åé¦ˆä¼˜åŒ–</strong>
<ul>
<li>ç¼–è¾‘ Markdown æ—¶ï¼Œç¼–è¾‘åŒºä¸é¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨</li>
<li>è§£å†³ Query å‚æ•°å€¼ä¸ºç©ºï¼Œé€‰æ‹©ã€Œä¸æ·»åŠ ç­‰å·ã€æ—¶ä»ä¼šæ·»åŠ ç­‰å·çš„é—®é¢˜</li>
<li>è§£å†³å¯¼å…¥ OpenAPI/Swagger æ•°æ®æ—¶ï¼Œå¦‚æœæŒ‡å®šäº†ç›®å½•ï¼Œæ•°æ®æ¨¡å‹ä¼šè¢«é‡å¤å¯¼å…¥çš„é—®é¢˜</li>
</ul>
</li>
</ul>
<p><strong>å°† Apifox æ›´æ–°è‡³æœ€æ–°ç‰ˆï¼Œä¸€èµ·å¼€å¯å…¨æ–°ä½“éªŒå§ï¼</strong></p>
<h2 data-id="heading-0"><strong>AI èƒ½åŠ›å†è¿›åŒ–</strong></h2>
<h3 data-id="heading-1">AI ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œæ”¯æŒåŒæ—¶ç”ŸæˆåŒ¹é…ç”¨ä¾‹çš„æµ‹è¯•æ•°æ®</h3>
<p>å‡çº§è‡³æœ€æ–°ç‰ˆ Apifox åï¼ŒAI åœ¨ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹çš„åŒæ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆä¸ç”¨ä¾‹åŒ¹é…çš„æµ‹è¯•æ•°æ®ï¼Œä»è€Œå‡å°‘æ‰‹åŠ¨å‡†å¤‡æ•°æ®çš„å·¥ä½œé‡ï¼Œç¡®ä¿æµ‹è¯•æ•°æ®ç²¾å‡†è´´åˆç”¨ä¾‹åœºæ™¯ï¼Œæå‡æµ‹è¯•ç”¨ä¾‹çš„å®Œæ•´æ€§ä¸å®ç”¨æ€§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7351c3622123486b92fafd8928970aa7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767680531&amp;x-signature=xEvyj0JrqM2cBszE6UxaKO9MolE%3D" alt="AI ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œæ”¯æŒåŒæ—¶ç”ŸæˆåŒ¹é…ç”¨ä¾‹çš„æµ‹è¯•æ•°æ®" loading="lazy"/></p>
<p>åŒæ—¶ï¼Œä¹Ÿæ”¯æŒæ‰‹åŠ¨ä¸ºæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ·»åŠ æˆ–ä¿®æ”¹å¯¹åº”çš„æµ‹è¯•æ•°æ®ï¼Œå¸®åŠ©å›¢é˜Ÿä¾¿æ·ã€æ¸…æ™°åœ°ç®¡ç†æµ‹è¯•èµ„æºã€‚</p>
<h3 data-id="heading-2">æ”¯æŒé€šè¿‡ AI è¿›è¡Œæ¥å£æ–‡æ¡£å®Œæ•´æ€§æ£€æµ‹</h3>
<p>Apifox æ–°å¢äº†ã€Œæ¥å£æ–‡æ¡£å®Œæ•´æ€§æ£€æµ‹ã€åŠŸèƒ½ï¼Œå¯é€šè¿‡ AI æ£€æµ‹åˆ†ææ¥å£æ–‡æ¡£å¯èƒ½å­˜åœ¨çš„ä¿¡æ¯ç¼ºå¤±ã€æè¿°æ¨¡ç³Šæˆ–è§„èŒƒæ€§ä¸è¶³ç­‰é—®é¢˜ï¼Œå¸®åŠ©å›¢é˜Ÿå¿«é€Ÿå®šä½æ½œåœ¨é—®é¢˜å¹¶æå‡æ–‡æ¡£è´¨é‡ä¸å®Œæ•´æ€§ï¼Œä»è€Œå»ºç«‹æ›´é«˜æ ‡å‡†çš„ API æ–‡æ¡£è§„èŒƒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/242c96d7cc7d463bb88b48fb4e4d43e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767680531&amp;x-signature=cmh%2FoLGacm0N2c2SiWof9w%2BFMrY%3D" alt="æ”¯æŒé€šè¿‡ AI è¿›è¡Œæ¥å£æ–‡æ¡£å®Œæ•´æ€§æ£€æµ‹" loading="lazy"/></p>
<h3 data-id="heading-3">æ–°å¢æ”¯æŒå¤šä¸ª AI æ¨¡å‹ä¾›åº”å•†</h3>
<p>Apifox æ‰©å±•äº† AI æ¨¡å‹ä¾›åº”å•†çš„æ”¯æŒèŒƒå›´ï¼Œæ–°å¢æ”¯æŒæœˆä¹‹æš—é¢ Kimi K2 ç³»åˆ—ã€æ™ºè°± GLM-4.7 å’Œ MiniMax M2.1 ç³»åˆ—æ¨¡å‹ï¼Œä¸ºç”¨æˆ·æä¾›æ›´ä¸°å¯Œçš„ AI æ¨¡å‹é€‰æ‹©ï¼Œå¸®åŠ©å›¢é˜Ÿæ ¹æ®å…·ä½“éœ€æ±‚æŒ‘é€‰æœ€é€‚åˆçš„ AI èƒ½åŠ›ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d81035826cd4408833b44e46df62323~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767680531&amp;x-signature=Jt9SL1aNNIWObonQe6efyY%2B%2FOkM%3D" alt="æ–°å¢æ”¯æŒå¤šä¸ª AI æ¨¡å‹ä¾›åº”å•†" loading="lazy"/></p>
<h2 data-id="heading-4">API è®¾è®¡ä¸ OpenAPI è§„èŒƒå…¼å®¹</h2>
<h3 data-id="heading-5">è®¾è®¡ API æ—¶ï¼Œæ”¯æŒ SSE æµå¼å“åº”åŠ AI å¤§æ¨¡å‹æ¥å£</h3>
<p>æœ€æ–°ç‰ˆæœ¬çš„ Apifox æ–°å¢å¯¹ SSE æµå¼å“åº”å’Œ AI å¤§æ¨¡å‹æ¥å£è®¾è®¡çš„æ”¯æŒï¼Œå¼€å‘è€…å¯ä¸º <code>string</code> ç±»å‹å­—æ®µé…ç½®ã€Œå†…å®¹ç»“æ„ <em>ï¼ˆContent Schemaï¼‰</em> ã€ï¼Œä»è€Œèƒ½å¤Ÿæ›´ç²¾å‡†åœ°å®šä¹‰æµå¼æ•°æ®çš„å“åº”ç»“æ„ï¼Œä¸ºæµå¼æ•°æ®ä¸ AI æ¥å£æä¾›äº†å®Œå–„çš„æ–‡æ¡£è§„èŒƒè§£å†³æ–¹æ¡ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4ae06d1111348a18500c480d5e9f96b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767680531&amp;x-signature=LXDrBrZETqMP6CxxWx5lRxbjcTA%3D" alt="è®¾è®¡ API æ—¶ï¼Œæ”¯æŒ SSE æµå¼å“åº”åŠ AI å¤§æ¨¡å‹æ¥å£" loading="lazy"/></p>
<h3 data-id="heading-6">æ”¯æŒè®¾å®š 2XXã€4XXã€5XXã€default ç­‰ç‰¹æ®ŠçŠ¶æ€ç </h3>
<p>Apifox æ‰©å±•äº† API è®¾è®¡ä¸­çš„çŠ¶æ€ç æ”¯æŒèŒƒå›´ï¼Œèƒ½å¤Ÿå…¼å®¹ OpenAPI/Swagger è§„èŒƒä¸­å®šä¹‰çš„ç‰¹æ®ŠçŠ¶æ€ç ï¼Œå¦‚ 2XXã€4XXã€5XX å’Œ default ç­‰ï¼Œä»è€Œæ›´ç²¾ç¡®åœ°å®šä¹‰æ¥å£çš„å“åº”è¡Œä¸ºï¼Œçµæ´»å¤„ç†ä¸åŒç±»å‹çš„å“åº”åœºæ™¯ï¼Œä¸ºå¼€å‘è€…æä¾›æ›´åŠ ç²¾ç»†å’Œæ ‡å‡†åŒ–çš„æ¥å£è®¾è®¡ä½“éªŒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb3228d9f5464a14af5922c04c256b5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767680531&amp;x-signature=4eGxSNZnm3tgt6NqB%2F7cQy9rSZk%3D" alt="æ”¯æŒè®¾å®š 2XXã€4XXã€5XXã€default ç­‰ç‰¹æ®ŠçŠ¶æ€ç " loading="lazy"/></p>
<h2 data-id="heading-7"><strong>API è°ƒè¯•èƒ½åŠ›æ‰©å±•</strong></h2>
<h3 data-id="heading-8">æ”¯æŒä¸ºç¯å¢ƒä¸­å„æœåŠ¡é…ç½®é€šç”¨ç½‘ç»œä»£ç†ï¼ˆHTTP / SOCKS5ï¼‰</h3>
<p>Apifox ç°åœ¨æ”¯æŒä¸ºç¯å¢ƒä¸­æ¯ä¸ªæœåŠ¡çš„å‰ç½® URL é…ç½®é€šç”¨ç½‘ç»œä»£ç†ï¼Œå…¼å®¹ HTTP å’Œ SOCKS5 ä¸¤ç§åè®®ã€‚ç”¨æˆ·å¯ä»¥æ›´å¥½åœ°å¤„ç†ä¸åŒç½‘ç»œç¯å¢ƒä¸‹çš„æ¥å£è®¿é—®éœ€æ±‚ï¼Œç‰¹åˆ«é€‚åˆéœ€è¦é€šè¿‡ä»£ç†è®¿é—®ç‰¹å®šæœåŠ¡çš„åœºæ™¯ï¼Œä»è€Œæå‡ç¯å¢ƒç®¡ç†çš„çµæ´»æ€§å’Œé€‚åº”æ€§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9cbcfaa900464ea8b3c0e949894f3928~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767680531&amp;x-signature=Cx%2FWGCgHRdH7ZkLszPSNxvMO0Ws%3D" alt="æ”¯æŒä¸ºç¯å¢ƒä¸­å„æœåŠ¡é…ç½®é€šç”¨ç½‘ç»œä»£ç†ï¼ˆHTTP / SOCKS5ï¼‰" loading="lazy"/></p>
<h3 data-id="heading-9">è°ƒè¯• Socket.IO æ¥å£æ—¶ï¼Œæ”¯æŒå‘é€ç©ºæ¶ˆæ¯å’Œæ— å‚æ•°çš„æ¶ˆæ¯</h3>
<p>å‡çº§è‡³æœ€æ–°ç‰ˆæœ¬çš„ Apifox åï¼Œè°ƒè¯• Socket.IO æ¥å£æ—¶ï¼Œæ”¯æŒå‘é€ç©ºæ¶ˆæ¯å’Œæ— å‚æ•°æ¶ˆæ¯ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿå…¨é¢æ¨¡æ‹Ÿå’Œæµ‹è¯•å®æ—¶é€šä¿¡çš„å„ç§åœºæ™¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf091ceb1f5c4065a9df59eb547ead95~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767680531&amp;x-signature=THuiBKggibV94n1Z%2BEYfohj80Gw%3D" alt="è°ƒè¯• Socket.IO æ¥å£æ—¶ï¼Œæ”¯æŒå‘é€ç©ºæ¶ˆæ¯å’Œæ— å‚æ•°çš„æ¶ˆæ¯" loading="lazy"/></p>
<h3 data-id="heading-10">æ”¯æŒåœ¨è¾“å…¥æ¡†ç›´æ¥ç¼–è¾‘å¼•ç”¨çš„å˜é‡åã€åŠ¨æ€å€¼è¡¨è¾¾å¼</h3>
<p>ç°åœ¨ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥åœ¨è¾“å…¥æ¡†å†…ç¼–è¾‘å¼•ç”¨çš„å˜é‡åã€åŠ¨æ€å€¼è¡¨è¾¾å¼ï¼Œæ— éœ€åˆ‡æ¢åˆ°å…¶ä»–ç•Œé¢å³å¯å®Œæˆè°ƒæ•´ï¼Œä»è€Œæå‡é…ç½®æ•ˆç‡å’Œæ“ä½œä¾¿æ·æ€§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52f3abc670d74956a9136d3a1d795fbf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767680531&amp;x-signature=rT97O3l2Tkkh%2F8CmQWKJ0XyfFJ4%3D" alt="æ”¯æŒåœ¨è¾“å…¥æ¡†ç›´æ¥ç¼–è¾‘å¼•ç”¨çš„å˜é‡åã€åŠ¨æ€å€¼è¡¨è¾¾å¼" loading="lazy"/></p>
<h2 data-id="heading-11"><strong>åœ¨çº¿æ–‡æ¡£æŒç»­å‡çº§</strong></h2>
<h3 data-id="heading-12">æ”¯æŒè‡ªå®šä¹‰èƒŒæ™¯å›¾æ¡ˆã€ç›®å½•æ ‘å®½åº¦ã€å¤šçº§å¯¼èˆª</h3>
<p>åœ¨çº¿æ–‡æ¡£æ–°å¢å¤šé¡¹ä¸ªæ€§åŒ–è®¾ç½®ï¼Œæ”¯æŒè‡ªå®šä¹‰èƒŒæ™¯å›¾æ¡ˆåŠé¢œè‰²ã€è°ƒæ•´ç›®å½•æ ‘å®½åº¦å’Œé…ç½®å¤šçº§å¯¼èˆªï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿæ ¹æ®ä¸ªæ€§åŒ–éœ€æ±‚ï¼Œæ‰“é€ ç‹¬ç‰¹çš„æ–‡æ¡£é£æ ¼å’Œå¸ƒå±€ï¼Œæ„å»ºä¸ªæ€§åŒ–èˆ’é€‚çš„æ–‡æ¡£å±•ç¤ºæ–¹å¼ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4787e59147fe4dd98523c942985a852a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767680531&amp;x-signature=LcBOWMz7NOivw6EwHn1p8ll8Yhc%3D" alt="æ”¯æŒè‡ªå®šä¹‰èƒŒæ™¯å›¾æ¡ˆã€ç›®å½•æ ‘å®½åº¦ã€å¤šçº§å¯¼èˆª" loading="lazy"/></p>
<h3 data-id="heading-13">æ”¯æŒ Algolia çš„ã€ŒAsk AIã€åŠŸèƒ½</h3>
<p>åœ¨çº¿æ–‡æ¡£æ–°ä¸Šçº¿äº† Algolia çš„ã€ŒAsk AIã€åŠŸèƒ½ï¼Œæ”¯æŒé€šè¿‡ AI æ™ºèƒ½é—®ç­”å¿«é€Ÿè·å–æ‰€éœ€æ–‡æ¡£ä¿¡æ¯ã€‚ç”¨æˆ·å¯ä»¥åœ¨æœç´¢æ¡†ä¸­ç›´æ¥å‘ AI æé—®ï¼Œå¿«é€Ÿè·å–å…³äºæ–‡æ¡£çš„å‡†ç¡®è§£ç­”ï¼Œä½¿ API æ–‡æ¡£çš„æŸ¥é˜…å’Œç†è§£å˜å¾—æ›´åŠ ä¾¿æ·å’Œé«˜æ•ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5bd9402a35aa4d1dafcbbaf4f5f18705~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767680531&amp;x-signature=nI00gr3ZBqC7hXDMUNQ0H91eoZE%3D" alt="æ”¯æŒ Algolia çš„ã€ŒAsk AIã€åŠŸèƒ½" loading="lazy"/></p>
<h2 data-id="heading-14"><strong>å¯¼å…¥/å¯¼å‡ºåŠŸèƒ½è¿›åŒ–</strong></h2>
<h3 data-id="heading-15">æ”¯æŒä» Git ä»“åº“å¯¼å…¥æ•°æ®</h3>
<p>Apifox æ›´æ–°è‡³æœ€æ–°ç‰ˆæœ¬åï¼Œæ”¯æŒä» GitHubã€GitLab ä»“åº“ç­‰ä¸»æµä»£ç æ‰˜ç®¡å¹³å°å¯¼å…¥ OpenAPI/Swagger æ–‡ä»¶ï¼Œæ–¹ä¾¿å›¢é˜Ÿé«˜æ•ˆåŒæ­¥å¹¶é›†ä¸­ç®¡ç†åˆ†æ•£åœ¨å„å¹³å°çš„ API æ–‡æ¡£ï¼Œç®€åŒ–æ–‡æ¡£é›†æˆæµç¨‹ï¼Œå…¨é¢æå‡å›¢é˜Ÿåä½œæ•ˆç‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a051bbfb32448f2855ecacfc8280ebd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767680531&amp;x-signature=HgCoa56IYt46uA8KpwHlCN9lHFE%3D" alt="æ”¯æŒä» Git ä»“åº“å¯¼å…¥æ•°æ®" loading="lazy"/></p>
<h3 data-id="heading-16">æ”¯æŒå¯¼å…¥/å¯¼å‡ºã€Œå“åº”ç»„ä»¶ã€</h3>
<p>ç°åœ¨å¯¼å…¥/å¯¼å‡º OpenAPI/Swagger æ•°æ®æ—¶ï¼Œèƒ½å¤ŸåŒæ—¶å¯¼å…¥/å¯¼å‡ºå“åº”ç»„ä»¶ï¼Œç¡®ä¿å›¢é˜Ÿå¯ä»¥æ­£ç¡®å¤ç”¨ä¸å…±äº«æ ‡å‡†åŒ–å“åº”å®šä¹‰ï¼Œæå‡ API æ–‡æ¡£çš„ä¸€è‡´æ€§å’Œç»´æŠ¤æ•ˆç‡ã€‚</p>
<h2 data-id="heading-17">ç”¨æˆ·åé¦ˆä¼˜åŒ–</h2>
<h3 data-id="heading-18">ç¼–è¾‘ Markdown æ—¶ï¼Œç¼–è¾‘åŒºä¸é¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨</h3>
<p>æ ¹æ®ç”¨æˆ·åé¦ˆï¼ŒApifox ä¼˜åŒ–äº† Markdown ç¼–è¾‘ä½“éªŒã€‚å½“å·¦ä¾§ç¼–è¾‘åŒºåŸŸæ»šåŠ¨æ—¶ï¼Œå³ä¾§é¢„è§ˆåŒºåŸŸå°†è‡ªåŠ¨åŒæ­¥æ»šåŠ¨ï¼Œä½¿æ–‡æ¡£ç¼–è¾‘ä¸é¢„è§ˆæ›´åŠ æµç•…è‡ªç„¶ï¼Œæå‡ä½¿ç”¨ä½“éªŒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/439e0e3570eb4f2483d5413601df6cc8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXBpZm94:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767680531&amp;x-signature=k%2BPUVk6052pnqQ1hY%2FgDnEg1A0o%3D" alt="ç¼–è¾‘ Markdown æ—¶ï¼Œç¼–è¾‘åŒºä¸é¢„è§ˆåŒºåŒæ­¥æ»šåŠ¨" loading="lazy"/></p>
<h3 data-id="heading-19">è§£å†³ Query å‚æ•°å€¼ä¸ºç©ºï¼Œé€‰æ‹©ã€Œä¸æ·»åŠ ç­‰å·ã€æ—¶ä»ä¼šæ·»åŠ ç­‰å·çš„é—®é¢˜</h3>
<p>å½“ Query å‚æ•°ä¸ºç©ºä¸”é€‰æ‹©ã€Œä¸æ·»åŠ ç­‰å·ã€é€‰é¡¹æ—¶ï¼ŒApifox ç°å·²èƒ½å¤Ÿæ­£ç¡®å¤„ç†ï¼Œé¿å…é”™è¯¯æ·»åŠ ç­‰å·ï¼Œç¡®ä¿å‚æ•°æ„å»ºå‡†ç¡®ï¼Œç¬¦åˆç”¨æˆ·å®é™…é…ç½®éœ€æ±‚ã€‚</p>
<h3 data-id="heading-20">è§£å†³å¯¼å…¥ OpenAPI/Swagger æ•°æ®æ—¶ï¼Œå¦‚æœæŒ‡å®šäº†ç›®å½•ï¼Œæ•°æ®æ¨¡å‹ä¼šè¢«é‡å¤å¯¼å…¥çš„é—®é¢˜</h3>
<p>æˆ‘ä»¬ä¿®å¤äº†ç”¨æˆ·åé¦ˆçš„é—®é¢˜ï¼šåœ¨å¯¼å…¥ OpenAPI/Swagger æ•°æ®æ—¶ï¼Œè‹¥æŒ‡å®šäº†ç›®å½•ï¼Œæ•°æ®æ¨¡å‹å°†ä¸ä¼šé‡å¤å¯¼å…¥ï¼Œä»è€Œç¡®ä¿å¯¼å…¥è¿‡ç¨‹æ›´åŠ å‡†ç¡®ï¼Œé¿å…ç”Ÿæˆå†—ä½™æ•°æ®ï¼Œä¿æŒæ–‡æ¡£ç»“æ„æ¸…æ™°é«˜æ•ˆã€‚</p>
<h2 data-id="heading-21"><strong>äº†è§£æ›´å¤š</strong></h2>
<p>å½“ç„¶ï¼ŒApifox äº§å“å›¢é˜Ÿä¸ºå¤§å®¶å¸¦æ¥çš„æ–°åŠŸèƒ½è¿œä¸æ­¢ä»¥ä¸Šè¿™äº›ï¼š</p>
<ul>
<li>å¯†é’¥åº“æ”¯æŒ Client Credentials æˆæƒæ¨¡å¼</li>
<li>å¯¼å‡º Apifox æ ¼å¼æ•°æ®æ—¶ï¼ŒåŒ…å«æ¥å£çš„æµ‹è¯•ç”¨ä¾‹</li>
<li>å¯¼å‡º Apifox æ ¼å¼æ•°æ®æ—¶ï¼ŒåŒ…å« WebSocket å’Œ Socket.IO æ¥å£çš„å‰ç½® URL</li>
<li>ä¼˜åŒ–äº† AI ç›¸å…³åŠŸèƒ½çš„æŠ¥é”™ä¿¡æ¯ï¼Œæ›´æ¸…æ™°æ˜ç¡®</li>
<li>æå‡ AI ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹çš„æŒ‡ä»¤éµå¾ªæ•ˆæœ</li>
<li>é…ç½® AI æ¨¡å‹ä¾›åº”å•†æ—¶ï¼Œå¯ä»¥é€‰æ‹© DeepSeek V3.2 Exp ç³»åˆ—æ–°æ¨¡å‹</li>
<li>ä¼˜åŒ–äº†åœ¨ç¯å¢ƒç®¡ç†é…ç½®å‰ç½® URL çš„äº¤äº’</li>
<li>ä¼˜åŒ–äº†è‡ªåŠ¨åŒ–æµ‹è¯•ç¼–æ’æ¨¡å¼çš„äº¤äº’</li>
<li>è§£å†³æ–°å»ºæ¥å£åå‘é€è¯·æ±‚ï¼Œå¦‚æœè¯·æ±‚æœªæˆåŠŸï¼Œå°±æ— æ³•ä¿å­˜æ¥å£çš„é—®é¢˜</li>
<li>è§£å†³å¯¼å…¥æ•°æ®æ—¶é€‰æ‹©æ™ºèƒ½åˆå¹¶ï¼Œå‚æ•°çš„ç¤ºä¾‹å€¼è¢«é”™è¯¯è¦†ç›–çš„é—®é¢˜</li>
<li>è§£å†³åœ¨ç½‘é¡µç‰ˆ App æ·»åŠ  Runner æ—¶ï¼Œå¦‚æœæœåŠ¡å™¨æ˜¯ Â <code>http://</code> Â åè®®å°±æ— æ³•ä¿å­˜çš„é—®é¢˜</li>
<li>è§£å†³æµ‹è¯•ç”¨ä¾‹ GraphQL è¯·æ±‚ä½“é«˜åº¦æ— é™å¢é•¿çš„é—®é¢˜</li>
<li>è§£å†³ AI ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹æŠ½å±‰å±‚çº§çš„é—®é¢˜</li>
<li>è§£å†³è°ƒè¯• Socket.IO æ¥å£æ—¶ï¼Œé€‰æ‹© JSONï¼Œæ— æ³•æ­£å¸¸å‘é€ 0ã€false ç­‰å†…å®¹çš„é—®é¢˜</li>
</ul>
<p>é™¤äº†æ–°å¢åŠŸèƒ½ï¼Œæˆ‘ä»¬ä¹Ÿå¯¹äº§å“ç»†èŠ‚å’Œä½¿ç”¨ä½“éªŒè¿›è¡Œäº†ä¼˜åŒ–ï¼Œ<strong>å…·ä½“ä¿®æ”¹å†…å®¹å¯å‰å¾€ Apifox æ›´æ–°æ—¥å¿—æŸ¥çœ‹</strong>ã€‚</p>
<p>æ¬¢è¿å„ä½ç”¨æˆ·å¯¹ Apifox ç»§ç»­æå‡ºä½¿ç”¨åé¦ˆå’Œä¼˜åŒ–æ„è§ï¼Œæˆ‘ä»¬ä¼šæŒç»­ä¼˜åŒ–æ›´æ–°ï¼Œè‡´åŠ›äºä¸ºç”¨æˆ·æä¾›æ›´ä¼˜ç§€çš„äº§å“åŠŸèƒ½å’Œæ›´æè‡´çš„ä½¿ç”¨ä½“éªŒï¼</p>
<p>å¯ä»¥å‰å¾€<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.apifox.com%2F%3Futm_source%3Dself%26utm_medium%3Dapifox" target="_blank" title="https://docs.apifox.com/?utm_source=self&amp;utm_medium=apifox" ref="nofollow noopener noreferrer">å¸®åŠ©æ–‡æ¡£</a>æŸ¥çœ‹æ›´å¤šåŠŸèƒ½ä½¿ç”¨è¯´æ˜å’Œæ“ä½œï¼Œæœ‰ä»»ä½•é—®é¢˜æ¬¢è¿åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.apifox.com%2Fdoc-5751209%23%25E7%2594%25A8%25E6%2588%25B7%25E7%25BE%25A4%2F%3Futm_source%3Dself%26utm_medium%3Dapifox" target="_blank" title="https://docs.apifox.com/doc-5751209#%E7%94%A8%E6%88%B7%E7%BE%A4/?utm_source=self&amp;utm_medium=apifox" ref="nofollow noopener noreferrer">Apifox ç”¨æˆ·ç¾¤</a>ä¸æˆ‘ä»¬äº¤æµæ²Ÿé€šã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµè§ˆå™¨å¤„ç†Base64æ•°æ®çš„é€Ÿåº¦æœ‰å¤šå¿«ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7589220406319743012</link>    <guid>https://juejin.cn/post/7589220406319743012</guid>    <pubDate>2025-12-30T06:32:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589220406319743012" data-draft-id="7589214643500957759" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµè§ˆå™¨å¤„ç†Base64æ•°æ®çš„é€Ÿåº¦æœ‰å¤šå¿«ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,GitHub"/> <meta itemprop="datePublished" content="2025-12-30T06:32:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘å®‰ä¸œå°¼"/> <meta itemprop="url" content="https://juejin.cn/user/1521379823340792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµè§ˆå™¨å¤„ç†Base64æ•°æ®çš„é€Ÿåº¦æœ‰å¤šå¿«ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379823340792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘å®‰ä¸œå°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T06:32:45.000Z" title="Tue Dec 30 2025 06:32:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flemire.me%2Fblog%2F2025%2F11%2F29%2Fhow-fast-can-browsers-process-base64-data%2F" target="_blank" title="https://lemire.me/blog/2025/11/29/how-fast-can-browsers-process-base64-data/" ref="nofollow noopener noreferrer">How fast can browsers process base64 data?</a></p>
<p>æ—¥æœŸï¼š2025å¹´11æœˆ30</p>
<p>ç¿»è¯‘ï¼šç”°å…«</p>
<p>æ¥æºï¼š<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" title="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" target="_blank">å‰ç«¯å‘¨åˆŠ</a></p>
</blockquote>
<p>Base64æ˜¯ä¸€ç§äºŒè¿›åˆ¶åˆ°æ–‡æœ¬çš„ç¼–ç æ–¹æ¡ˆï¼Œå®ƒä½¿ç”¨ç”±64ä¸ªå­—ç¬¦ç»„æˆçš„å­—æ¯è¡¨ï¼ˆA - Zã€a - zã€0 - 9ã€+ã€/ï¼‰ï¼Œå°†ä»»æ„äºŒè¿›åˆ¶æ•°æ®ï¼ˆå¦‚å›¾åƒã€æ–‡ä»¶æˆ–ä»»ä½•å­—èŠ‚åºåˆ—ï¼‰è½¬æ¢ä¸ºå®‰å…¨ã€å¯æ‰“å°çš„ <code>ASCII</code>å­—ç¬¦ä¸²ã€‚æµè§ˆå™¨åœ¨ <code>JavaScript</code>ä¸­ä¼šç”¨åˆ°å®ƒï¼Œç”¨äºå°†äºŒè¿›åˆ¶æ•°æ®ç›´æ¥åµŒå…¥ä»£ç æˆ– <code>HTML</code>ä¸­ï¼Œæˆ–è€…ä»¥æ–‡æœ¬å½¢å¼ä¼ è¾“äºŒè¿›åˆ¶æ•°æ®ã€‚</p>
<p>æœ€è¿‘ï¼Œæµè§ˆå™¨æ–°å¢äº†å¤„ç†Base64çš„ä¾¿æ·ä¸”å®‰å…¨çš„æ–¹æ³•ï¼Œå³ <code>Uint8Array.toBase64()</code>å’Œ <code>Uint8Array.fromBase64()</code>ã€‚å°½ç®¡æ¶‰åŠå¤šä¸ªå‚æ•°ï¼Œä½†å½’æ ¹ç»“åº•å°±æ˜¯ç¼–ç å’Œè§£ç è¿™ä¸¤ä¸ªå‡½æ•°ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> b64 = <span class="hljs-title class_">Uint8Array</span>.<span class="hljs-title function_">toBase64</span>(bytes);      <span class="hljs-comment">// å­—ç¬¦ä¸²        </span>
<span class="hljs-keyword">const</span> recovered = <span class="hljs-title class_">Uint8Array</span>.<span class="hljs-title function_">fromBase64</span>(b64); <span class="hljs-comment">// Uint8Array</span>
</code></pre>
<p>ç¼–ç æ—¶ï¼Œå®ƒä»è¾“å…¥ä¸­å–å‡º24ä½æ•°æ®ã€‚è¿™24ä½æ•°æ®è¢«åˆ†æˆå››ä¸ª6ä½æ®µï¼Œæ¯ä¸ª6ä½å€¼ï¼ˆèŒƒå›´åœ¨0åˆ°63ä¹‹é—´ï¼‰ä¼šè¢«æ˜ å°„åˆ° <code>Base64</code>å­—æ¯è¡¨ä¸­çš„ç‰¹å®šå­—ç¬¦ï¼šå‰26ä¸ªå­—ç¬¦æ˜¯å¤§å†™å­—æ¯ <code>A-Z</code>ï¼Œæ¥ä¸‹æ¥çš„26ä¸ªæ˜¯å°å†™å­—æ¯ <code>a-z</code>ï¼Œç„¶åæ˜¯æ•°å­— <code>0 - 9</code>ï¼Œæ¥ç€æ˜¯ç¬¬62ä¸ªå­—ç¬¦ï¼ˆ+ï¼‰å’Œç¬¬63ä¸ªå­—ç¬¦ï¼ˆ/ï¼‰ã€‚å½“è¾“å…¥é•¿åº¦ä¸æ˜¯3å­—èŠ‚çš„å€æ•°æ—¶ï¼Œä¼šä½¿ç”¨ç­‰å·ï¼ˆ=ï¼‰ä½œä¸ºå¡«å……å­—ç¬¦ã€‚</p>
<p>å®ƒä»¬çš„é€Ÿåº¦èƒ½æœ‰å¤šå¿«å‘¢ï¼Ÿ</p>
<p>å‡è®¾æ¯ä¸ª <code>CPU</code>å‘¨æœŸå¤„ç†3å­—èŠ‚è¾“å…¥å¹¶ç”Ÿæˆ4å­—èŠ‚è¾“å‡ºã€‚åœ¨ <code>4.5GHz</code>çš„é¢‘ç‡ä¸‹ï¼Œç¼–ç æˆ <code>Base64</code>çš„é€Ÿåº¦å°†è¾¾åˆ° <code>13.5GB/s</code>ã€‚æˆ‘ä»¬é¢„æœŸåå‘æ“ä½œï¼ˆè§£ç ï¼‰çš„æ€§èƒ½ä¼šä½ä¸€äº›ã€‚ç¼–ç æ—¶ï¼Œä»»ä½•è¾“å…¥éƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œä»»ä½•äºŒè¿›åˆ¶æ•°æ®éƒ½å¯ä»¥ã€‚ç„¶è€Œï¼Œè§£ç æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»å¤„ç†é”™è¯¯å¹¶è·³è¿‡ç©ºæ ¼ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fsimdutf.github.io%2Fbrowserbase64%2F" target="_blank" title="https://simdutf.github.io/browserbase64/" ref="nofollow noopener noreferrer">æˆ‘ç¼–å†™äº†ä¸€ä¸ªæµè§ˆå™¨å†…çš„åŸºå‡†æµ‹è¯•ç¨‹åº</a>ã€‚ä½ å¯ä»¥åœ¨è‡ªå·±å–œæ¬¢çš„æµè§ˆå™¨ä¸­å°è¯•ä¸€ä¸‹ã€‚</p>
<p>æˆ‘å†³å®šåœ¨æˆ‘çš„è‹¹æœM4å¤„ç†å™¨ä¸Šæµ‹è¯•ä¸€ä¸‹ï¼Œçœ‹çœ‹ä¸åŒæµè§ˆå™¨çš„è¡¨ç°å¦‚ä½•ã€‚æˆ‘ä½¿ç”¨ <code>64KB</code>çš„æ•°æ®å—è¿›è¡Œæµ‹è¯•ã€‚é€Ÿåº¦æ˜¯é’ˆå¯¹äºŒè¿›åˆ¶æ•°æ®æ¥æµ‹é‡çš„ã€‚</p>













































<table><thead><tr><th>æµè§ˆå™¨</th><th>ç¼–ç é€Ÿåº¦</th><th>è§£ç é€Ÿåº¦</th></tr></thead><tbody><tr><td>Safari</td><td>17GB/s</td><td>9.4GB/s</td></tr><tr><td>SigmaOS</td><td>17GB/s</td><td>9.4GB/s</td></tr><tr><td>Chrome</td><td>19GB/s</td><td>4.6GB/s</td></tr><tr><td>Edge</td><td>19GB/s</td><td>4.6GB/s</td></tr><tr><td>Brave</td><td>19GB/s</td><td>4.6GB/s</td></tr><tr><td>Servo</td><td>0.34GB/s</td><td>0.40GB/s</td></tr><tr><td>Firefox</td><td>0.34GB/s</td><td>0.40GB/s</td></tr></tbody></table>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04d8fa592fdc4163ba7c43773443a96d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681164&amp;x-signature=MWGwGQ41cyCimVTWmJ2kfV9U39o%3D" alt="image.png" loading="lazy"/></p>
<p><code>Safari</code>çš„ç¼–ç é€Ÿåº¦ä¼¼ä¹æ¯”åŸºäº <code>Chromium</code>çš„æµè§ˆå™¨ï¼ˆ<code>Chrome</code>ã€<code>Edge</code>ã€<code>Brave</code>ï¼‰ç¨æ…¢ï¼Œä½†å…¶è§£ç é€Ÿåº¦å¤§çº¦æ˜¯è¿™äº›æµè§ˆå™¨çš„ä¸¤å€ã€‚<code>Servo</code>å’Œ <code>Firefox</code>çš„æ€§èƒ½åŒæ ·ä¸ä½³ï¼Œè€Œä¸”å‡ºç°äº†æ„æƒ³ä¸åˆ°çš„ç»“æœï¼Œå³å®ƒä»¬çš„è§£ç é€Ÿåº¦æ¯”ç¼–ç é€Ÿåº¦å¿«ã€‚æˆ‘æœ¬å¯ä»¥æµ‹è¯•å…¶ä»–æµè§ˆå™¨ï¼Œä½†å¤§å¤šæ•°æµè§ˆå™¨ä¼¼ä¹æ˜¯ <code>Chromium</code>æˆ– <code>WebKit</code>çš„è¡ç”Ÿç‰ˆæœ¬ã€‚</p>
<p>ä½œä¸ºå‚è€ƒï¼Œä¸€å°æ€§èƒ½ä¸é”™çš„ç¬”è®°æœ¬ç”µè„‘çš„ç£ç›˜è¯»å†™é€Ÿåº¦å¯æŒç»­è¶…è¿‡ <code>3GB/s</code>ã€‚ä¸€äº›é«˜ç«¯ç¬”è®°æœ¬ç”µè„‘çš„ç£ç›˜é€Ÿåº¦è¶…è¿‡ <code>5GB/s</code>ã€‚ç†è®ºä¸Šï¼Œä½¿ç”¨ <code>Wi-Fi 7</code>æ—¶ï¼Œä½ çš„ <code>Wi-Fi</code>è¿æ¥é€Ÿåº¦å¯èƒ½æ¥è¿‘ <code>5GB/s</code>ã€‚ä¸€äº›äº’è”ç½‘æœåŠ¡æä¾›å•†å¯èƒ½æä¾›ç±»ä¼¼çš„ç½‘ç»œé€Ÿåº¦ï¼Œå°½ç®¡ä½ çš„äº’è”ç½‘è¿æ¥é€Ÿåº¦å¯èƒ½æ¯”è¿™æ…¢å‡ å€ã€‚</p>
<p>å¤§å¤šæ•°æµè§ˆå™¨çš„é€Ÿåº¦æ¯”ä½ æƒ³è±¡çš„è¦å¿«å¾—å¤šã€‚å®ƒä»¬çš„é€Ÿåº¦æ¯”ç½‘ç»œæˆ–ç£ç›˜é€Ÿåº¦è¿˜è¦å¿«ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong> åŸºäº <code>Chromium</code>çš„æµè§ˆå™¨è§£ç é€Ÿåº¦è¾ƒæ…¢ï¼Œè¿™ä¼¼ä¹ä¸ <code>v8 JavaScript</code>å¼•æ“æœ‰å…³ï¼Œè¯¥å¼•æ“ä¼šå…ˆå°†å­—ç¬¦ä¸²è§£ç åˆ°ä¸€ä¸ªä¸´æ—¶ç¼“å†²åŒºï¼Œç„¶åå†ä»ä¸´æ—¶ç¼“å†²åŒºå¤åˆ¶åˆ°æœ€ç»ˆç›®æ ‡ä½ç½®ã€‚ï¼ˆå‚è§v8/src/builtins/builtins-typed-array.ccä¸­çš„BUILTIN(Uint8ArrayFromBase64)ã€‚ï¼‰</p>
<p><strong>æ³¨ï¼š</strong> <code>Mozilla</code>çš„ <code>Denis Palmeiro</code>å‘Šè¯‰æˆ‘ï¼Œ<code>Firefox</code>å³å°†è¿›è¡Œçš„æ›´æ–°å°†åŠ å¿«Base64å‡½æ•°çš„æ€§èƒ½ã€‚æˆ‘åœ¨ <code>Firefox nightly</code> ç‰ˆæœ¬ä¸­æµ‹è¯•å‘ç°ï¼Œæ€§èƒ½æé«˜äº†çº¦ <code>20%</code>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä¸åŒåœºæ™¯è®¾è®¡å¤šæ ·åŒ–çš„é¡µé¢è¿‡æ¸¡åŠ¨ç”»]]></title>    <link>https://juejin.cn/post/7589212818806603839</link>    <guid>https://juejin.cn/post/7589212818806603839</guid>    <pubDate>2025-12-30T06:34:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589212818806603839" data-draft-id="7589214643501006911" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä¸åŒåœºæ™¯è®¾è®¡å¤šæ ·åŒ–çš„é¡µé¢è¿‡æ¸¡åŠ¨ç”»"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,GitHub"/> <meta itemprop="datePublished" content="2025-12-30T06:34:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘å®‰ä¸œå°¼"/> <meta itemprop="url" content="https://juejin.cn/user/1521379823340792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä¸åŒåœºæ™¯è®¾è®¡å¤šæ ·åŒ–çš„é¡µé¢è¿‡æ¸¡åŠ¨ç”»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379823340792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘å®‰ä¸œå°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T06:34:23.000Z" title="Tue Dec 30 2025 06:34:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åŸæ–‡
ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ffrontendmasters.com%2Fblog%2Fdifferent-page-transitions-for-different-circumstances%2F" target="_blank" title="https://frontendmasters.com/blog/different-page-transitions-for-different-circumstances/" ref="nofollow noopener noreferrer">Different Page Transitions For Different Circumstances</a></p>
<p>ç¿»è¯‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.heyfe.org%2Fblog" target="_blank" title="https://blog.heyfe.org/blog" ref="nofollow noopener noreferrer">å˜¿å˜¿</a></p>
<p>æ¥æºï¼š<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" title="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" target="_blank">å‰ç«¯å‘¨åˆŠ</a></p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/521575c6ce2a46b9ac1ca9a8602214c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681262&amp;x-signature=Vx5aj3MgZkyJC47BSXeUFsFR6pA%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘æ„Ÿè§‰å¤šé¡µé¢è§†å›¾è¿‡æ¸¡çš„å¸¸è§ç”¨æ³•ï¼Œé€šå¸¸æ˜¯æ­å»ºä¸€ä¸ªé€šç”¨çš„ç³»ç»Ÿï¼Œè®©å®ƒé€‚ç”¨äºæ‰€æœ‰é¡µé¢å’Œå…ƒç´ ï¼Œç„¶åå°±å¯ä»¥ä¸ç”¨ç®¡äº†ã€‚</p>
<p>ä½†æˆ‘æœ€è¿‘çœ‹åˆ°äº† JavaScript ä¸­æœ‰ç›¸å…³çš„ DOM äº‹ä»¶ï¼Œä»¥åŠå¦‚ä½•åˆ©ç”¨å®ƒä»¬æ¥è®¾ç½®â€œç±»å‹â€ï¼ˆè¿‡æ¸¡çš„ç±»å‹ï¼‰ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹è¿™äº›äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ—§é¡µé¢ / æ­£åœ¨å¸è½½çš„é¡µé¢</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'pageswap'</span>, <span class="hljs-keyword">async</span> (e) =&gt; {
  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">viewTransition</span>) {

  }
}

<span class="hljs-comment">// æ–°é¡µé¢ / æ­£åœ¨åŠ è½½çš„é¡µé¢</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'pagereveal'</span>, <span class="hljs-keyword">async</span> (e) =&gt; {
  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">viewTransition</span>) {

  }
}
</code></pre>
<p>ä½ å¯ä»¥åœ¨äº‹ä»¶å¤„ç†å™¨é‡Œåšä»»ä½•ä½ æƒ³åšçš„äº‹æƒ…ï¼Œä½†å¯¹æˆ‘æ¥è¯´ç‰¹åˆ«æœ‰è¶£çš„ä¸€ç‚¹æ˜¯ï¼Œä½ å¯ä»¥è®¾ç½®è§†å›¾è¿‡æ¸¡çš„ç±»å‹ï¼Œå¹¶ä¸”èƒ½å¤Ÿ <em>æœ‰æ¡ä»¶åœ°</em> è®¾ç½®ã€‚</p>
<h2 data-id="heading-0">ä¸ºç‰¹å®š URL è‡ªå®šä¹‰è§†å›¾è¿‡æ¸¡ç±»å‹</h2>
<p>ä¸ºäº†æ¸…æ™°åœ°è¯´æ˜è¿™ä¸€ç‚¹ï¼Œå‡è®¾ä½ æƒ³è®©æŸä¸ªç‰¹å®šé¡µé¢çš„è¿‡æ¸¡åŠ¨ç”»ä¸å…¶ä»–æ‰€æœ‰é¡µé¢éƒ½ä¸ä¸€æ ·ã€‚æ¯”å¦‚ï¼ŒæŸä¸ªç½‘ç«™ä¸Šç›¸å¯¹è·¯å¾„ä¸º <code>/shows</code> çš„â€œæ¼”å‡ºâ€é¡µé¢ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç›‘å¬
<code>pagereveal</code> äº‹ä»¶ï¼Œå¹¶æ£€æŸ¥å½“å‰ URLï¼Œå¦‚æœåŒ¹é…å°±è®¾ç½®å¯¹åº”çš„ç±»å‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'pagereveal'</span>, <span class="hljs-keyword">async</span> e =&gt; {
    <span class="hljs-keyword">if</span> (e.<span class="hljs-property">viewTransition</span> &amp;&amp; <span class="hljs-variable language_">document</span>.<span class="hljs-property">location</span>.<span class="hljs-property">pathname</span> === <span class="hljs-string">'/shows'</span>) {
        e.<span class="hljs-property">viewTransition</span>.<span class="hljs-property">types</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'toShowsPage'</span>);
    }
});
</code></pre>
<p>è¿™é‡Œçš„ <code>toShowsPage</code> åªæ˜¯ä¸€ä¸ªæˆ‘ä»¬éšä¾¿èµ·çš„åå­—ï¼Œç”¨æ¥åœ¨ CSS ä¸­è®¾ç½®å¯¹åº”çš„è‡ªå®šä¹‰åŠ¨ç”»ã€‚</p>
<h2 data-id="heading-1">â€œé»˜è®¤â€è§†å›¾è¿‡æ¸¡</h2>
<p>æˆ‘ä»¬å·²ç»è®¾ç½®äº†ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹ï¼Œä½†å…ˆæ¥æŠŠé»˜è®¤çš„åŠ¨ç”»æ­å¥½ã€‚ç±»ä¼¼ä¸‹é¢è¿™æ ·çš„æ•ˆæœå°±æŒºä¼˜é›…çš„ï¼š</p>
<pre><code class="hljs language-css" lang="css">::<span class="hljs-built_in">view-transition-old</span>(main) {
    <span class="hljs-attribute">animation-name</span>: slide-out-to-left;
    <span class="hljs-attribute">animation-duration</span>: <span class="hljs-number">1s</span>;
}
::<span class="hljs-built_in">view-transition-new</span>(main) {
    <span class="hljs-attribute">animation-name</span>: slide-in-from-right;
    <span class="hljs-attribute">animation-duration</span>: <span class="hljs-number">1s</span>;
}

<span class="hljs-keyword">@keyframes</span> slide-out-to-left {
    <span class="hljs-selector-tag">to</span> {
        translate: -<span class="hljs-number">150px</span> <span class="hljs-number">0</span>;
        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
        scale: <span class="hljs-number">0.5</span>;
    }
}
<span class="hljs-keyword">@keyframes</span> slide-in-from-right {
    <span class="hljs-selector-tag">from</span> {
        translate: <span class="hljs-number">100</span>vi <span class="hljs-number">0</span>;
    }
}
</code></pre>
<p>åœ¨æˆ‘çš„è¿™ä¸ªä¾‹å­é‡Œï¼Œå‡è®¾æœ‰ä¸€ä¸ªå†…å®¹åŒºåŸŸ <code>&lt;main&gt;</code> è®¾ç½®äº† <code>view-transition-name: main;</code>ï¼Œæ‰€ä»¥è¿™ä¸ªå…ƒç´ åœ¨è¿™é‡Œå°±æ˜¯è¢«ä¸“é—¨æŒ‡å®šçš„ç›®æ ‡ã€‚ç°åœ¨ï¼Œå½“æˆ‘åˆ‡æ¢é¡µé¢ï¼ˆä»…ä»…ç‚¹
å‡»æ™®é€šçš„æ—§é“¾æ¥ï¼‰æ—¶ï¼Œå°±ä¼šå¾—åˆ°è¿™ä¸ªæ•ˆæœï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fvideopress.com%2Fembed%2FekBvCWFC%3Fcover%3D1%26amp%3BautoPlay%3D0%26amp%3Bcontrols%3D1%26amp%3Bloop%3D0%26amp%3Bmuted%3D0%26amp%3BpersistVolume%3D1%26amp%3Bplaysinline%3D0%26amp%3BpreloadContent%3Dmetadata%26amp%3BuseAverageColor%3D1%26amp%3Bhd%3D0" target="_blank" title="https://videopress.com/embed/ekBvCWFC?cover=1&amp;amp;autoPlay=0&amp;amp;controls=1&amp;amp;loop=0&amp;amp;muted=0&amp;amp;persistVolume=1&amp;amp;playsinline=0&amp;amp;preloadContent=metadata&amp;amp;useAverageColor=1&amp;amp;hd=0" ref="nofollow noopener noreferrer">videopress.com/embed/ekBvCâ€¦</a></p>
<h2 data-id="heading-2">ä¸ºè‡ªå®šä¹‰åŠ¨ç”»ä½¿ç”¨è‡ªå®šä¹‰ç±»å‹</h2>
<p>å½“ç‚¹å‡»â€œShowsâ€é“¾æ¥å¹¶åŠ è½½ <code>/shows</code> é¡µé¢æ—¶ï¼Œæˆ‘ä»¬è®¾ç½®äº† â€œtoShowsPageâ€ ç±»å‹ï¼Œè€Œè¿™å°±æ˜¯ CSS ä¸­å±•ç°æ•ˆæœçš„ç¥å¥‡æ—¶åˆ»ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">html</span><span class="hljs-selector-pseudo">:active</span>-view-<span class="hljs-attribute">transition</span>-type(toShowsPage) {
    &amp;::<span class="hljs-built_in">view-transition-new</span>(main) {
        <span class="hljs-attribute">animation</span>: to-shows-page <span class="hljs-number">1s</span> forwards;
    }
}

<span class="hljs-keyword">@keyframes</span> to-shows-page {
    <span class="hljs-selector-tag">from</span> {
        scale: <span class="hljs-number">1.1</span>;
        translate: <span class="hljs-number">0</span> -<span class="hljs-number">200px</span>;
    }
}
</code></pre>
<p>å› ä¸ºå®ƒæ¯”å•çº¯çš„ <code>::view-transition-new</code> å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ï¼Œè¿™è®©æˆ‘ä»¬æœ‰æœºä¼šç”¨ä¸€ç»„æ–°çš„å…³é”®å¸§æ¥ <em>è¦†ç›–</em> é»˜è®¤çš„ <code>animation</code>ã€‚ç°åœ¨ï¼Œ<em>åªæœ‰</em> æ¼”å‡ºé¡µé¢ä¼šä»é¡¶éƒ¨ä¸‹æ¥
ã€‚çœ‹çœ‹åŒºåˆ«ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fvideopress.com%2Fembed%2FrE06avRv%3Fcover%3D1%26amp%3BautoPlay%3D0%26amp%3Bcontrols%3D1%26amp%3Bloop%3D0%26amp%3Bmuted%3D0%26amp%3BpersistVolume%3D1%26amp%3Bplaysinline%3D0%26amp%3BpreloadContent%3Dmetadata%26amp%3BuseAverageColor%3D1%26amp%3Bhd%3D0" target="_blank" title="https://videopress.com/embed/rE06avRv?cover=1&amp;amp;autoPlay=0&amp;amp;controls=1&amp;amp;loop=0&amp;amp;muted=0&amp;amp;persistVolume=1&amp;amp;playsinline=0&amp;amp;preloadContent=metadata&amp;amp;useAverageColor=1&amp;amp;hd=0" ref="nofollow noopener noreferrer">videopress.com/embed/rE06aâ€¦</a></p>
<h2 data-id="heading-3">è¡¥å……è¯´æ˜</h2>
<p>æˆ‘è®¤ä¸ºè¿™ç§é€šè¿‡ JavaScript å’Œ CSS å®ç°çš„ç²¾ç»†æ§åˆ¶äº¤äº’éå¸¸é…·ã€‚</p>
<p>æˆ‘æœ€åˆæ˜¯åœ¨ Bramus çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.chrome.com%2Fdocs%2Fweb-platform%2Fview-transitions%2Fcross-document" target="_blank" title="https://developer.chrome.com/docs/web-platform/view-transitions/cross-document" ref="nofollow noopener noreferrer">ã€Šå¤šé¡µé¢åº”ç”¨ä¸­çš„è·¨æ–‡æ¡£è§†å›¾è¿‡æ¸¡ã€‹</a> ä¸­çœ‹åˆ°è¿™ä¸ªçš„ï¼Œ
è¿™æ˜¯ä¸€ä»½å¾ˆå¥½çš„æ–‡ç« ï¼Œæ¶µç›–äº†â€œå‰è¿›â€ã€â€œåé€€â€å’Œâ€œé‡æ–°åŠ è½½â€çš„è§†å›¾è¿‡æ¸¡ç±»å‹ï¼Œè¿™äº›çœ‹èµ·æ¥éå¸¸å®ç”¨ï¼Œè®©æˆ‘å¸Œæœ›æœ‰åŸç”Ÿçš„ CSS æ–¹æ³•æ¥æ£€æµ‹å®ƒä»¬ã€‚</p>
<p>CSS ç¡®å®æœ‰ä¸€ä¸ªåŸç”Ÿçš„æ–¹å¼æ¥
<a href="https://link.juejin.cn?target=https%3A%2F%2Fcss-tricks.com%2Falmanac%2Frules%2Fv%2Fview-transition%2F%23aa-limiting-view-transitions-with-the-types-descriptor" target="_blank" title="https://css-tricks.com/almanac/rules/v/view-transition/#aa-limiting-view-transitions-with-the-types-descriptor" ref="nofollow noopener noreferrer"><em>å£°æ˜</em> ç±»å‹</a>ï¼Œä½†æˆ‘è¿˜ä¸å¤ªæ˜ç™½è¿™æ ·åšæœ‰
ä»€ä¹ˆç”¨å¤„æˆ–é‡è¦æ€§ã€‚æˆ‘ç›®å‰çš„ç†è§£æ˜¯ï¼Œå¦‚æœä½ å£°æ˜äº†ç±»å‹ï¼Œé‚£ä¹ˆä»»ä½• <em>æœª</em> åœ¨åˆ—è¡¨ä¸­åˆ—å‡ºçš„ç±»å‹éƒ½ä¼šè¢«è®¾ä¸ºæ— æ•ˆï¼Œä¹Ÿè®¸è¿™åœ¨æŸäº›æƒ…å†µä¸‹æ˜¯æœ‰ç”¨çš„ï¼Ÿ</p>
<p>æˆ‘æ›¾ä»¥ä¸ºâ€œç±»å‹â€ç›¸å…³çš„åŠŸèƒ½ä¼šæ¯”è§†å›¾è¿‡æ¸¡çš„å…¶ä»–éƒ¨åˆ†æ›´æ–°ä¸€äº›ï¼Œå› æ­¤æµè§ˆå™¨æ”¯æŒåº¦ä¼šæ›´ä½ï¼Œä½†äº‹å®å¹¶éå¦‚æ­¤ã€‚MDN å°†
<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FViewTransitionTypeSet" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/ViewTransitionTypeSet" ref="nofollow noopener noreferrer">JavaScript ç±»å‹è®¾ç½®</a> ä»¥åŠ CSS é€‰æ‹©å™¨
<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FReference%2FSelectors%2F%3Aactive-view-transition-type" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/CSS/Reference/Selectors/:active-view-transition-type" ref="nofollow noopener noreferrer"><code>:active-view-transition-type()</code></a> çš„æµè§ˆå™¨æ”¯æŒåº¦æ ‡
è®°ä¸ºä¸å¤šé¡µé¢è§†å›¾è¿‡æ¸¡æ•´ä½“ç›¸åŒï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒChrome å’Œ Safari å·²æ”¯æŒï¼ŒFirefox åˆ™å¤„äºæ ‡å¿—å¯ç”¨çŠ¶æ€ï¼ˆå³å°†å‘å¸ƒæ”¯æŒï¼‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vercelï¼šæˆ‘ä»¬ä¸º React2Shell å‘èµ·äº†ä¸€é¡¹ä»·å€¼ 100 ä¸‡ç¾å…ƒçš„é»‘å®¢æŒ‘æˆ˜]]></title>    <link>https://juejin.cn/post/7589220406319808548</link>    <guid>https://juejin.cn/post/7589220406319808548</guid>    <pubDate>2025-12-30T06:37:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589220406319808548" data-draft-id="7589201772134432809" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vercelï¼šæˆ‘ä»¬ä¸º React2Shell å‘èµ·äº†ä¸€é¡¹ä»·å€¼ 100 ä¸‡ç¾å…ƒçš„é»‘å®¢æŒ‘æˆ˜"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,GitHub"/> <meta itemprop="datePublished" content="2025-12-30T06:37:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘å®‰ä¸œå°¼"/> <meta itemprop="url" content="https://juejin.cn/user/1521379823340792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vercelï¼šæˆ‘ä»¬ä¸º React2Shell å‘èµ·äº†ä¸€é¡¹ä»·å€¼ 100 ä¸‡ç¾å…ƒçš„é»‘å®¢æŒ‘æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379823340792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘å®‰ä¸œå°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T06:37:56.000Z" title="Tue Dec 30 2025 06:37:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fvercel.com%2Fblog%2Four-million-dollar-hacker-challenge-for-react2shell" target="_blank" title="https://vercel.com/blog/our-million-dollar-hacker-challenge-for-react2shell" ref="nofollow noopener noreferrer">Our $1 million hacker challenge for React2Shell</a></p>
<p>ç¿»è¯‘ï¼šç”°å…«</p>
<p>æ¥æºï¼š<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" title="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" target="_blank">å‰ç«¯å‘¨åˆŠ</a></p>
</blockquote>
<p>åœ¨ <code>React2Shell</code>æ¼æ´æŠ«éœ²åçš„æ•°å‘¨å†…ï¼Œæˆ‘ä»¬çš„é˜²ç«å¢™æ‹¦æˆªäº†è¶…è¿‡600ä¸‡æ¬¡é’ˆå¯¹è¿è¡Œå­˜åœ¨æ¼æ´ç‰ˆæœ¬ <code>Next.js</code>éƒ¨ç½²çš„æ”»å‡»å°è¯•ï¼Œå…¶ä¸­åœ¨é«˜å³°æœŸçš„24å°æ—¶å†…å°±æ‹¦æˆªäº†230ä¸‡æ¬¡ã€‚</p>
<p>è¿™å¾—ç›Šäº <code>Seawall</code>ï¼Œå®ƒæ˜¯ <code>Vercel Web</code>åº”ç”¨é˜²ç«å¢™ï¼ˆ<code>WAF</code>ï¼‰çš„æ·±åº¦è¯·æ±‚æ£€æµ‹å±‚ã€‚æˆ‘ä»¬ä¸116åå®‰å…¨ç ”ç©¶äººå‘˜åˆä½œï¼Œæ‰¾å‡ºä»–ä»¬èƒ½æƒ³åˆ°çš„æ‰€æœ‰ <code>WAF</code>ç»•è¿‡æ–¹æ³•ï¼Œæ”¯ä»˜äº†è¶…è¿‡100ä¸‡ç¾å…ƒçš„èµé‡‘ï¼Œå¹¶åœ¨48å°æ—¶å†…å‘å¸ƒäº†20ä¸ªç‹¬ç‰¹çš„ <code>WAF</code>æ›´æ–°ï¼Œå› ä¸ºä¸æ–­æœ‰æ–°æ–¹æ³•è¢«æŠ¥å‘Šã€‚ä»–ä»¬å‘ç°çš„ç»•è¿‡æŠ€æœ¯ç°å·²æ°¸ä¹…é›†æˆåˆ°æˆ‘ä»¬çš„é˜²ç«å¢™ï¼Œä¿æŠ¤ç€å¹³å°ä¸Šçš„æ¯ä¸€é¡¹éƒ¨ç½²ã€‚</p>
<p>ä½† <code>WAF</code>è§„åˆ™åªæ˜¯ç¬¬ä¸€é“é˜²çº¿ã€‚ <strong>ç°åœ¨ï¼Œæˆ‘ä»¬é¦–æ¬¡æŠ«éœ²äº† <code>Vercel</code>å¹³å°ä¸Šé’ˆå¯¹è¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆ<code>RCE</code>ï¼‰çš„å¦ä¸€å±‚æ·±åº¦é˜²å¾¡æªæ–½ï¼Œ</strong> è¯¥æªæ–½ç›´æ¥ä½œç”¨äºè®¡ç®—å±‚ã€‚è¿™å±‚æ·±åº¦é˜²å¾¡æä¾›çš„æ•°æ®è®©æˆ‘ä»¬æœ‰åè¶³æŠŠæ¡ç§°ï¼Œ<code>WAF</code>åœ¨æŠµå¾¡ <code>React2Shell</code>æ¼æ´åˆ©ç”¨æ–¹é¢æä¸ºæœ‰æ•ˆã€‚</p>
<p>æœ¬æ–‡å°†ä»‹ç»æˆ‘ä»¬ä¸ºä¿æŠ¤å®¢æˆ·æ‰€æ„å»ºçš„é˜²æŠ¤æªæ–½ï¼Œä»¥åŠè¿™å¯¹ <code>Vercel</code>æœªæ¥å®‰å…¨æ„å‘³ç€ä»€ä¹ˆã€‚</p>
<h2 data-id="heading-0">æˆ‘ä»¬æ­£åœ¨é˜²å¾¡çš„æ˜¯ä»€ä¹ˆ</h2>
<p>è¿™ä¸ªçœ‹èµ·æ¥æ€ªå¼‚çš„æ”»å‡»è½½è·è®©æ•´ä¸ªè¡Œä¸šè®¸å¤šäººéƒ½å¤œä¸èƒ½å¯ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-number">0</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    status<span class="hljs-punctuation">:</span> <span class="hljs-string">"resolved_model"</span><span class="hljs-punctuation">,</span>
    reason<span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    _response<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      _prefix<span class="hljs-punctuation">:</span> <span class="hljs-string">"console.log('â˜ ï¸')//"</span><span class="hljs-punctuation">,</span>
      _formData<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        get<span class="hljs-punctuation">:</span> <span class="hljs-string">"$1:then:constructor"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    then<span class="hljs-punctuation">:</span> <span class="hljs-string">"$1:then"</span><span class="hljs-punctuation">,</span>
    value<span class="hljs-punctuation">:</span> '<span class="hljs-punctuation">{</span><span class="hljs-attr">"then"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"$B"</span><span class="hljs-punctuation">}</span>'<span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-number">1</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"$@0"</span><span class="hljs-punctuation">,</span>
<span class="hljs-punctuation">}</span>
</code></pre>
React2Shellæ¼æ´åˆ©ç”¨ç¤ºä¾‹æ¦‚å¿µéªŒè¯ï¼ˆPoCï¼‰
<p>è¿™å°±æ˜¯ <code>React2Shell</code>æ”»å‡»è½½è·ã€‚å°†å…¶å‘é€åˆ°ä»»ä½•è¿è¡Œå­˜åœ¨æ¼æ´çš„ <code>React</code>æœåŠ¡å™¨ç»„ä»¶çš„æœåŠ¡å™¨ä¸Šï¼Œ<code>console.log('â˜ ï¸')</code>å­—ç¬¦ä¸²å°±ä¼šåœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œã€‚è¿™ä¸ªå­—ç¬¦ä¸²å¯ä»¥è¢«æ›¿æ¢æˆå‡ ä¹ä»»ä½•å†…å®¹ï¼Œæ¯”å¦‚è¿è¡Œç¨‹åºã€æå–æœºå¯†ä¿¡æ¯ã€å‘èµ·ç½‘ç»œè°ƒç”¨ã€‚<code>CVE-2025-55182</code>çš„ä¸¥é‡ç¨‹åº¦è¯„åˆ†ä¸º10.0åˆ†ï¼ˆæ»¡åˆ†10åˆ†ï¼‰ï¼Œæƒ…å†µç³Ÿç³•é€é¡¶ã€‚</p>
<p>åœ¨ <code>CVE</code>è¢«è´Ÿè´£ä»»åœ°æŠ«éœ²åï¼Œå€’è®¡æ—¶å¼€å§‹ã€‚æˆ‘ä»¬çŸ¥é“æ¶æ„æ”»å‡»è€…ä¼šäº‰åˆ†å¤ºç§’åœ°åˆ©ç”¨è¯¥æ¼æ´ï¼Œå› æ­¤åœ¨å…¬ä¼—çŸ¥æ™“é—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬å°±ä¸ <code>AWS</code>ã€<code>Google</code>ã€<code>Microsoft</code>ã€<code>Cloudflare</code>ã€<code>Netlify</code>ã€<code>Fastly</code>ã€<code>Deno</code>ç­‰è¡Œä¸šåˆä½œä¼™ä¼´å±•å¼€åˆä½œã€‚è¿™ç§ç›¸äº’åä½œæ„å‘³ç€ï¼Œåœ¨åè°ƒä¸€è‡´çš„å…¬å¼€æŠ«éœ²ä¹‹å‰ï¼Œæ‰€æœ‰ä¸»è¦å¹³å°æä¾›å•†éƒ½å·²é‡‡å–äº†ç¼“è§£æªæ–½ï¼Œç¡®ä¿åœ¨ä»–ä»¬å‘å¸ƒè¡¥ä¸ä¹‹å‰ï¼Œå°½å¯èƒ½å¤šçš„ç”¨æˆ·éƒ½å¾—åˆ°äº†ä¿æŠ¤ã€‚</p>
<p>ä½†æˆ‘ä»¬ä¹ŸçŸ¥é“æ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆã€‚ä¸€æ—¦æ¼æ´è¢«æŠ«éœ²ï¼Œå®‰å…¨ç ”ç©¶äººå‘˜ã€æ¶æ„æ”»å‡»è€…å’Œå¥½å¥‡çš„æ—è§‚è€…ä¼šå¼€å§‹æ£€æŸ¥å—å½±å“çš„ä»£ç è·¯å¾„ï¼Œå¯»æ‰¾ç»•è¿‡æ–¹æ³•å’Œç›¸å…³æ¼æ´ã€‚å‡ å¤©å†…ï¼Œç ”ç©¶äººå‘˜å°±åœ¨ <code>React</code>æœåŠ¡å™¨ç»„ä»¶ä¸­å‘ç°äº†å¦å¤–ä¸¤ä¸ªæ¼æ´ï¼Œéœ€è¦æ›´å¤šè¡¥ä¸å’Œ <code>WAF</code>æ›´æ–°ã€‚</p>
åœ¨å…¬å¼€æŠ«éœ²åçš„å‰ 72 å°æ—¶å†…é˜»æ­¢äº†åˆ©ç”¨æ¼æ´çš„å°è¯•
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9f580650fc04a99a6491a0e091a6e87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681476&amp;x-signature=OOPJWXpp0kcT81%2BR80oytszhe%2FM%3D" alt="react2shell_blocked_requests_spike_graph--light.svg" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/807b64a99998445db1eda88f73ebe82e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681476&amp;x-signature=465YGW5i3sIxR%2F%2FfeZmxgJAu0dA%3D" alt="react2shell_longer_view_graph2--light.svg" loading="lazy"/></p>
æ¥ä¸‹æ¥ä¸€å‘¨å†…é˜»æ­¢äº†å¤šæ¬¡æ”»å‡»å°è¯•ã€‚
<p>æˆ‘ä»¬éœ€è¦èƒ½å¤Ÿé€‚åº”å˜åŒ–çš„é˜²å¾¡æªæ–½ã€‚</p>
<h2 data-id="heading-1">5ä¸‡ç¾å…ƒçš„èµé‡‘</h2>
<p>ä¸å…¶ç­‰å¾… <code>WAF</code> ç»•è¿‡æ¼æ´åœ¨ç½‘ç»œä¸Šå‡ºç°ï¼Œæˆ‘ä»¬å†³å®šæŒæ§è¡¥ä¸å‘¨æœŸï¼Œå¹¶è˜è¯·ä¸–ç•Œä¸Šæœ€å¥½çš„å®‰å…¨ç ”ç©¶äººå‘˜ä¸ºæˆ‘ä»¬ç‡å…ˆå‘ç°è¿™äº›æ¼æ´ã€‚</p>
<p>åœ¨åšå‡ºå†³å®šåçš„å‡ å°æ—¶å†…ï¼Œæˆ‘ä»¬å°±åœ¨ <code>HackerOne</code>ä¸Šå¯åŠ¨äº†å…¬å¼€çš„æ¼æ´èµé‡‘è®¡åˆ’ã€‚é€šå¸¸å¯åŠ¨è¿™æ ·ä¸€ä¸ªè®¡åˆ’éœ€è¦æ•°å‘¨æ—¶é—´ï¼Œ<code>HackerOne</code>å›¢é˜Ÿå¤œä»¥ç»§æ—¥åœ°å·¥ä½œæ‰å¾—ä»¥å®ç°ã€‚æ®è”åˆåˆ›å§‹äººç±³å¸Œå°”Â·æ™®æ—æ–¯ï¼ˆ<code>Michiel Prins</code>ï¼‰ç§°ï¼Œè¿™æ˜¯ä»–ä»¬å†å²ä¸Šæœ€å¿«çš„å…¬å¼€è®¡åˆ’å¯åŠ¨ä¹‹ä¸€ã€‚</p>
<p>æˆ‘ä»¬ä¸ºæ¯ä¸€ç§èƒ½ç»•è¿‡æˆ‘ä»¬ <code>WAF</code>é˜²æŠ¤çš„ç‹¬ç‰¹æŠ€æœ¯æä¾›5ä¸‡ç¾å…ƒèµé‡‘ã€‚è¿™ç¬”èµé‡‘æ•…æ„è®¾ç½®å¾—å¾ˆé«˜ï¼Œç›®çš„æ˜¯å¼•å¯¼ç ”ç©¶äººå‘˜å°†ç²¾åŠ›è½¬å‘è´Ÿè´£ä»»çš„æŠ«éœ²ï¼Œè€Œéåœ¨é»‘å¸‚ä¸Šå”®å–ï¼ŒåŒæ—¶è®©é‚£äº›åŸæœ¬ä¼šè¯•æ¢æˆ‘ä»¬é˜²å¾¡çš„äººæˆä¸ºæˆ‘ä»¬çš„åˆä½œè€…ã€‚</p>
<p>è¯¥è®¡åˆ’å¥æ•ˆäº†ã€‚116åç ”ç©¶äººå‘˜å‚ä¸å…¶ä¸­ï¼Œæäº¤äº†156ä»½æŠ¥å‘Šã€‚è®¡åˆ’ç»“æŸæ—¶ï¼Œæˆ‘ä»¬éªŒè¯äº†38ä»½è´Ÿè´£ä»»çš„æŠ«éœ²æŠ¥å‘Šï¼Œä¸º20ç§ç‹¬ç‰¹çš„ç»•è¿‡æŠ€æœ¯æ”¯ä»˜äº†100ä¸‡ç¾å…ƒèµé‡‘ã€‚æˆ‘ä»¬å°†è¿™äº›æŠ€æœ¯åˆ†äº«ç»™äº†å…¶ä»–å¹³å°æä¾›å•†ï¼Œä»¥ä¾¿ä»–ä»¬åŠ å¼ºè‡ªèº«é˜²å¾¡ã€‚æˆ‘ä»¬çš„æ‰€å­¦ä¸ä»…ä¿æŠ¤äº† <code>Vercel</code>çš„å®¢æˆ·ã€‚</p>
<h2 data-id="heading-2">Seawallï¼šå¼ºåŒ–æˆ‘ä»¬çš„WAF</h2>
<p><code>Seawall</code>æ˜¯æˆ‘ä»¬ <code>WAF</code>çš„æ·±åº¦è¯·æ±‚æ£€æŸ¥å±‚ï¼Œæ£€æŸ¥è¯·æ±‚è½½è·è€Œä¸ä»…ä»…æ˜¯è¯·æ±‚å¤´ï¼Œåœ¨æ¶æ„æ¨¡å¼åˆ°è¾¾æ‚¨çš„åº”ç”¨ä¹‹å‰å°±å°†å…¶æ‹¦æˆªã€‚</p>
<p>æ¯æ¬¡æ”¶åˆ° <code>HackerOne</code>çš„æŠ¥å‘Šåï¼Œæˆ‘ä»¬éƒ½ä¼šéµå¾ªä¸€ä¸ªå¯é‡å¤çš„æµç¨‹ï¼šé‡ç°ç»•è¿‡æ–¹æ³•ï¼›å°†å…¶è½¬åŒ–ä¸ºæµ‹è¯•ç”¨ä¾‹ï¼›æ›´æ–°è§„åˆ™ä»¥æ‹¦æˆªè¯¥æ–¹æ³•ï¼›å…¨çƒéƒ¨ç½²ï¼›ç­‰å¾…ä¸‹ä¸€ä»½æŠ¥å‘Šï¼›é‡å¤ã€‚åœ¨èµé‡‘è®¡åˆ’å¯åŠ¨åçš„å¤´48å°æ—¶å†…ï¼Œæˆ‘ä»¬ä¸º <code>Seawall</code>å‘å¸ƒäº†20æ¬¡æ›´æ–°ï¼Œéšç€æµç¨‹çš„ä¼˜åŒ–ï¼Œæ¯ä¸ªå‘ç°çš„å¹³å‡å“åº”æ—¶é—´ä»ä¸¤å°æ—¶ç¼©çŸ­åˆ°ä¸‰ååˆ†é’Ÿã€‚</p>
<p>å¤§å¤šæ•°æŠ¥å‘Šåœ¨å¤´24å°æ—¶å†…æäº¤ï¼Œç ”ç©¶äººå‘˜æµ‹è¯•å„ç§æ–°å¥‡å˜ä½“ã€‚ç¬¬äºŒä¸ª24å°æ—¶å†…æäº¤çš„æŠ¥å‘Šæ•°é‡è¾ƒå°‘ã€‚éšåå‡ å¤©ï¼Œéšç€äººä»¬æ·±å…¥æŒ–æ˜è¾¹ç¼˜æƒ…å†µï¼Œæäº¤çš„æŠ¥å‘Šæ•°é‡é€æ¸å‡å°‘ï¼Œæ¶‰åŠçš„æŠ€æœ¯ä¹Ÿè¶Šæ¥è¶Šå¤æ‚ã€‚</p>
<p>è®©æˆ‘ä»¬æƒŠè®¶çš„æ˜¯ï¼Œäººå·¥æ™ºèƒ½åœ¨é‡ç°æŠ¥å‘Šæ–¹é¢éå¸¸æœ‰ç”¨ã€‚æäº¤å†…å®¹é€šå¸¸ä¾èµ–äºç»†å¾®å·®åˆ«ï¼Œè¿™äº›å·®åˆ«å¾ˆå®¹æ˜“è¢«å¿½ç•¥ï¼Œè€Œä¸”åˆ©ç”¨æ¡ä»¶å¯èƒ½éå¸¸ç‰¹å®šã€‚ç°ä»£äººå·¥æ™ºèƒ½æ¨¡å‹éå¸¸å–„äºæ¢³ç†å‡ºè¿™äº›ç»†èŠ‚ï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºå¯é‡ç°çš„æµ‹è¯•ç”¨ä¾‹ã€‚æ¯ä¸ªéªŒè¯é€šè¿‡çš„æŠ¥å‘Šéƒ½å˜æˆäº†ä¸€ä¸ªåŸºäº <code>Goè¯­è¨€</code>çš„å•å…ƒæµ‹è¯•ï¼Œç°åœ¨æ¯å½“ <code>Seawall</code>å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¿™äº›æµ‹è¯•éƒ½ä¼šåœ¨æŒç»­é›†æˆï¼ˆ<code>CI</code>ï¼‰ç¯å¢ƒä¸­è¿è¡Œã€‚ç ”ç©¶äººå‘˜åœ¨æ­¤æ¬¡æ¼æ´èµé‡‘è®¡åˆ’ä¸­å‘ç°çš„æŠ€æœ¯ï¼Œå³ä½¿åœ¨èµé‡‘è®¡åˆ’ç»“æŸåï¼Œä¹Ÿå°†ç»§ç»­ä¸ºç”¨æˆ·æä¾›ä¿æŠ¤ã€‚</p>
<h2 data-id="heading-3">è¿›ä¸€æ­¥åŠ å¼ºæˆ‘ä»¬çš„æ·±åº¦é˜²å¾¡ç­–ç•¥</h2>
<p>ä¸ºè¿›ä¸€æ­¥ä¿æŠ¤å®¢æˆ·ï¼Œæˆ‘ä»¬éƒ¨ç½²äº†ç¬¬äºŒå±‚é˜²å¾¡æªæ–½ï¼Œç›´æ¥ä½œç”¨äºè®¡ç®—å±‚ã€‚è¿™ä¸ªè¿è¡Œæ—¶ç¼“è§£å±‚åœ¨åº”ç”¨å†…éƒ¨è¿è¡Œï¼Œè€Œéåœ¨ <code>WAF</code>å±‚ã€‚å› æ­¤ï¼Œå®ƒä¸ä¾èµ–å¯å‘å¼è§„åˆ™ï¼Œè€Œæ˜¯ç›´æ¥æ¶ˆé™¤æ”»å‡»æ‰€é’ˆå¯¹çš„ä»£ç è¯„ä¼°é€”å¾„ã€‚</p>
<p><code>React2Shell</code>åˆ©ç”¨äº† <code>JavaScript</code>å‡½æ•°å…·æœ‰ <code>constructor</code>å±æ€§ï¼Œè¯¥å±æ€§å¯ç”¨äºåœ¨è¿è¡Œæ—¶è¯„ä¼°ä»£ç ã€‚è¿è¡Œæ—¶ç¼“è§£æªæ–½åœ¨ <code>React</code>æ¸²æŸ“è¿‡ç¨‹ä¸­ç¦æ­¢è¿™ç§ä»£ç æ‰§è¡Œï¼Œä»æ ¹æœ¬ä¸Šç ´åäº†æ”»å‡»é€”å¾„ã€‚æˆ‘ä»¬é¢„è®¡åˆæ³•åº”ç”¨æ°¸è¿œä¸ä¼šä½¿ç”¨è¿™ç§èƒ½åŠ›ï¼Œåœ¨è¯•ç”¨è¯¥ç¼“è§£æªæ–½æ—¶ï¼Œæˆ‘ä»¬æœªå‘ç°ä»»ä½•å®é™…åº”ç”¨ä¼šè§¦åŠæ­¤ä»£ç è·¯å¾„ï¼Œå› æ­¤æˆ‘ä»¬çŸ¥é“éƒ¨ç½²å®ƒæ˜¯å®‰å…¨çš„ã€‚</p>
<p><code>Deno</code>å›¢é˜Ÿç‡å…ˆéƒ¨ç½²äº†è¿è¡Œæ—¶ç¼“è§£æªæ–½ï¼Œä»–ä»¬ä¹äºåˆ†äº«ç»†èŠ‚ï¼Œè¿™è®©æˆ‘ä»¬å¯¹ä¹‹å‰æ¢ç´¢çš„æ–¹å‘æ›´æœ‰ä¿¡å¿ƒã€‚æˆ‘ä»¬é’ˆå¯¹ <code>Node.js</code>è°ƒæ•´äº†å®ç°æ–¹å¼ï¼Œåœ¨å¤§è§„æ¨¡éªŒè¯å…¶éƒ¨ç½²å®‰å…¨æ€§åï¼Œåˆå°†å…¶åˆ†äº«ç»™å…¶ä»–å¹³å°æä¾›å•†ï¼Œè®©ä»–ä»¬ä¹Ÿèƒ½ä»ä¸­å—ç›Šã€‚</p>
<p>æˆ‘ä»¬è®¾ç½®äº†ä¸“ç”¨æ—¥å¿—è®°å½•ï¼Œä»¥ä¾¿åœ¨è¿è¡Œæ—¶ç¼“è§£æªæ–½è§¦å‘æ—¶ç«‹å³å¯åŠ¨ï¼Œå¹¶è‡ªåŠ¨å‘å®‰å…¨å›¢é˜Ÿå‘å‡ºè­¦æŠ¥ã€‚å¦‚æœæ”»å‡»è€…æ‰¾åˆ°ä¸€ç§åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å®é™…æœ‰æ•ˆçš„ <code>WAF</code>ç»•è¿‡æ–¹æ³•ï¼Œè¿è¡Œæ—¶ç¼“è§£æªæ–½ä¼šå°†å…¶æ•è·ï¼Œæˆ‘ä»¬ä¹Ÿä¼šç«‹å³çŸ¥æ™“ã€‚</p>
<p>å¦‚ä»Šï¼Œè¿™ä¸€ç¼“è§£æªæ–½è¦†ç›–äº† <code>Vercel</code>ä¸Š96%çš„æµé‡ã€‚é€šè¿‡ç¬¬äºŒå±‚é˜²å¾¡æªæ–½çš„æ—¥å¿—è®°å½•ï¼Œæˆ‘ä»¬å®é™…ä¸ŠçŸ¥é“ <code>WAF</code>åœ¨å®è·µä¸­ä½•æ—¶è¢«ç»•è¿‡ï¼Œå› æ­¤æˆ‘ä»¬æœ‰åè¶³æŠŠæ¡ç§°ï¼Œ<code>Vercel</code>çš„ <code>WAF</code>åœ¨æŠµå¾¡ <code>React2Shell</code>æ¼æ´åˆ©ç”¨æ–¹é¢æä¸ºæœ‰æ•ˆã€‚</p>
<h2 data-id="heading-4">é˜»æ­¢æœ€å¤æ‚çš„ç»•è¿‡æ–¹æ³•</h2>
<p><code>HackerOne</code>é¡¹ç›®å¸å¼•äº†æ¥è‡ªä¸–ç•Œå„åœ°çš„ä¼˜ç§€ç ”ç©¶äººå‘˜ã€‚æ„Ÿè°¢æ‰€æœ‰å‚ä¸è€…ï¼Œæ˜¯ä½ ä»¬çš„ä»˜å‡ºè®© <code>Seawall</code>å˜å¾—æ›´åŠ å¼ºå¤§ã€‚</p>
<p>ä¿æŠ¤ <code>React2Shell</code>å…å—æ”»å‡»çš„ <code>WAF</code>çš„æ ¸å¿ƒä»»åŠ¡æ˜¯è¯†åˆ«æ¶æ„è½½è·ï¼ŒåŒæ—¶å…è®¸åˆæ³•è½½è·é€šè¿‡ã€‚ç”±äºæ— æ³•å®é™…æ‰§è¡Œæ¶æ„ä»£ç è¿›è¡Œæ£€æŸ¥ï¼Œå› æ­¤å¿…é¡»ä¾é æ¨¡å¼åŒ¹é…å’Œè§£æã€‚å¯¹äºç ”ç©¶äººå‘˜æ¥è¯´ï¼Œè¿™æ„å‘³ç€è¦æ‰¾åˆ°éšè—æ”»å‡»ä»¥èº²é¿æ¨¡å¼åŒ¹é…çš„æ–¹æ³•ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flachlan2k%2F" target="_blank" title="https://github.com/lachlan2k/" ref="nofollow noopener noreferrer">æ‹‰èµ«å…°Â·æˆ´ç»´æ£®ï¼ˆ<code>Lachlan Davidson</code>ï¼‰</a>æ˜¯ <code>React2Shell</code>çš„æœ€åˆå‘ç°è€…ï¼Œä»–å’Œç ”ç©¶ä¼™ä¼´<a href="https://link.juejin.cn?target=https%3A%2F%2Fhackerone.com%2Fsy1vi3" target="_blank" title="https://hackerone.com/sy1vi3" ref="nofollow noopener noreferrer">è¥¿å°”ç»´ï¼ˆ<code>Sylvie</code>ï¼‰</a>æäº¤äº†ä¸¤ç§ç»•è¿‡æ–¹æ³•ï¼Œæˆ‘ä»¬æƒ³åœ¨æ­¤è¯¦ç»†ä»‹ç»ã€‚å®ƒä»¬æ—¢ä½“ç°äº†æ„å»ºå®‰å…¨ <code>WAF</code>é¢ä¸´çš„æŒ‘æˆ˜ï¼Œä¹Ÿå±•ç¤ºäº†å®‰å…¨ç ”ç©¶äººå‘˜çš„åˆ›é€ åŠ›ã€‚</p>
<h2 data-id="heading-5">é€’å½’UTFç¼–ç </h2>
<p>è®¸å¤šç»•è¿‡æ–¹æ³•è¯•å›¾é€šè¿‡ç”¨ <code>JSON</code>ä¸­çš„ <code>Unicode</code>è¡¨ç¤ºæ›¿æ¢å¸¸è§„å­—ç¬¦æ¥è¿·æƒ‘è§£æå™¨ã€‚è¿™ç›¸å¯¹å®¹æ˜“è¿›è¡Œè§„èŒƒåŒ–å¤„ç†ï¼Œå¤§å¤šæ•° <code>Web</code> åº”ç”¨é˜²ç«å¢™ (<code>WAF</code>) é»˜è®¤éƒ½ä¼šè¿™æ ·åšã€‚</p>
<p>ä½†å¦‚æœä½ èƒ½å¯¹ <code>Unicode</code>ç¼–ç å†è¿›è¡Œ <code>Unicode</code>ç¼–ç å‘¢ï¼Ÿç„¶åå†é‡å¤ä¸€æ¬¡å‘¢ï¼Ÿ</p>
<p>æ‹‰èµ«å…°å’Œè¥¿å°”ç»´å‘ç°äº†ä¸€ç§åˆ©ç”¨æ¼æ´å·¥å…·ï¼Œå®ƒå¯ä»¥å¼ºåˆ¶ <code>React</code>é£è¡Œåè®®å¯¹åŒä¸€å­—ç¬¦ä¸²è¿›è¡Œå¤šæ¬¡ <code>JSON</code>è§£ç ã€‚ä»»ä½•èƒ½å¤ŸæŠµå¾¡ <code>N</code>å±‚ <code>Unicode</code>ç¼–ç çš„ <code>Web</code> åº”ç”¨é˜²ç«å¢™ (<code>WAF</code>) ï¼Œéƒ½å¯ä»¥é€šè¿‡ä½¿ç”¨è¯¥å·¥å…· <code>N + 1</code>æ¬¡æ¥ç»•è¿‡ã€‚<code>Seawall</code>ç°åœ¨ä¼šé€’å½’è§£ç ï¼Œç›´åˆ°è½½è·å®Œå…¨è§„èŒƒåŒ–ï¼Œä»è€Œå½»åº•å…³é—­äº†è¿™ç±»ç»•è¿‡é€”å¾„ã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™ç±»ç»•è¿‡æ–¹æ³•ä»¥åŠå…¶ä»–ç±»ä¼¼æ–¹æ³•è¿˜ä¾èµ–äº <code>JavaScript</code>å†…ç½® <code>ReadableStream</code>ç±»çš„æå…¶ç»†å¾®è¡Œä¸ºï¼Œè¯¥ç±»å¯ä»¥æ„é€ é”™è¯¯çš„æµå—ï¼Œè¿™äº›æµå—ä¸é»˜è®¤è¡Œä¸ºç›¸åï¼Œä¸ä¼šç»ˆæ­¢æµå¤„ç†ï¼Œç„¶ååˆ©ç”¨æµé”™è¯¯æ¶ˆæ¯ä¸­çš„å­—ç¬¦ä¸²åŒ–ç‰¹æ€§ï¼Œå°†å…¶è½¬åŒ–ä¸ºå‡½æ•°è°ƒç”¨æ¼æ´åˆ©ç”¨å·¥å…·ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc8f6f7830094932851d6bdd7b218685~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681476&amp;x-signature=4t7k7UZXKTszkU5O920Vv8cqEOg%3D" alt="react2shell--light.svg" loading="lazy"/></p>
<h2 data-id="heading-6">ä¸ä½¿ç”¨å†’å·è®¿é—®constructorå±æ€§</h2>
<p><code>React2Shell</code>çš„æ ¸å¿ƒè¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆ<code>RCE</code>ï¼‰å·¥å…·é€šè¿‡ <code>React</code>é£è¡Œåè®®çš„åŸºäºå†’å·çš„å±æ€§è®¿é—®è¯­æ³•è®¿é—®å‡½æ•°çš„ <code>constructor</code>å±æ€§ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ”»å‡»ä¸­åŒ…å«å­—ç¬¦ä¸² <code>:constructor</code>ï¼Œ<code>WAF</code>é˜²æŠ¤ä¹Ÿæ˜¯åŸºäºæ£€æµ‹è¿™ä¸ªå­—ç¬¦ä¸²æ¥è¯†åˆ«æ¶æ„è½½è·ã€‚</p>
<p>ä¸€ç§ç»•è¿‡æ–¹æ³•å¯èƒ½æ˜¯æ‰¾åˆ°ä¸€æ¡å®Œå…¨ä¸åŒçš„ä¸ä½¿ç”¨ <code>constructor</code>å±æ€§çš„æ”»å‡»é“¾ï¼Œä½†è‡³ä»Šæ— äººæ‰¾åˆ°ã€‚æ‹‰èµ«å…°æ‰¾åˆ°äº†å¦ä¸€ç§æ–¹æ³•ï¼šä» <code>:constructor</code>å˜ä¸º <code>constructor</code>ã€‚æ³¨æ„ç¼ºå°‘å†’å·äº†å—ï¼Ÿ</p>
<p>ä»–ä»¬é€šè¿‡å‘ç°ä¸€ç§ä½¿ç”¨ç‰¹å®šäº <code>RSC</code>è§£æçš„ <code>webpack</code>æ¨¡å—çš„ç±»ä¼¼å·¥å…·è¿›è¡Œå±æ€§è®¿é—®å’Œå­—ç¬¦ä¸²æ“ä½œæ¥å®ç°è¿™ä¸€ç‚¹ã€‚<code>WAF</code>å¯ä»¥é€šè¿‡é’ˆå¯¹æ”»å‡»é“¾ä¸Šæ¸¸çš„å­—ç¬¦ä¸²æ¥æ£€æµ‹è¿™ç§æ–¹æ³•ï¼Œä½†è¿™è¡¨æ˜æ”»å‡»è€…åœ¨æ··æ·†æœ‰æ•ˆè½½è·æ–¹é¢æ‹¥æœ‰å¼ºå¤§çš„èƒ½åŠ›ï¼Œå…¶æ•ˆæœè¿œè¶…æœ€åˆçš„æ¦‚å¿µéªŒè¯ã€‚</p>
<h2 data-id="heading-7">å¸®åŠ©å®¢æˆ·å‡çº§ï¼šå°†å®‰å…¨ä½œä¸ºäº§å“ä½“éªŒ</h2>
<p>æ·±åº¦é˜²å¾¡äº‰å–äº†æ—¶é—´ï¼Œä½†çœŸæ­£çš„è§£å†³æ–¹æ¡ˆæ˜¯ä¿ƒä½¿ç”¨æˆ·å‡çº§ã€‚æˆ‘ä»¬å‘å¸ƒäº†<a href="https://link.juejin.cn?target=https%3A%2F%2Fvercel.com%2Fkb%2Fbulletin%2Freact2shell" target="_blank" title="https://vercel.com/kb/bulletin/react2shell" ref="nofollow noopener noreferrer">å®‰å…¨å…¬å‘Š</a>ï¼Œä½œä¸ºæƒå¨ä¿¡æ¯æ¥æºï¼›åœ¨ä»ªè¡¨ç›˜ä¸Šæ·»åŠ æ¨ªå¹…ï¼Œå¸®åŠ©è¯†åˆ«å­˜åœ¨æ¼æ´çš„éƒ¨ç½²ï¼›æä¾›å‘½ä»¤è¡Œå·¥å…·ï¼ˆ<code>npx fix-react2shell-next</code>ï¼‰å¸®åŠ©ä¿®è¡¥å­˜åœ¨æ¼æ´çš„åº”ç”¨ï¼›é€šè¿‡ <code>Vercel Agent</code>å®ç°è‡ªåŠ¨æäº¤ <code>PR</code>ï¼Œå°½å¯èƒ½è‡ªåŠ¨åŒ–è¿™ä¸€è¿‡ç¨‹ã€‚</p>
<h2 data-id="heading-8">å±•æœ›æœªæ¥</h2>
<p><code>React2Shell</code>ä»¥æˆ‘ä»¬æ— æ³•æ¨¡æ‹Ÿçš„æ–¹å¼è€ƒéªŒäº†æˆ‘ä»¬çš„å®‰å…¨åŸºç¡€è®¾æ–½ã€‚æˆ‘ä»¬ä»ä¸­è·å¾—äº†ç»è¿‡å®æˆ˜æ£€éªŒçš„ <code>WAF</code>ã€ä¸€ä¸ªå¯é’ˆå¯¹æœªæ¥æ¼æ´è¿›è¡Œè°ƒæ•´çš„è¿è¡Œæ—¶é˜²å¾¡å±‚ï¼Œä»¥åŠåº”å¯¹ä¸‹ä¸€ä¸ªå…³é”® <code>CVE</code>çš„åº”å¯¹æ–¹æ¡ˆã€‚</p>
<p>ç ”ç©¶äººå‘˜åœ¨ <code>HackerOne</code>è®¡åˆ’ä¸­å‘ç°çš„ç»•è¿‡æŠ€æœ¯ç°å·²æ°¸ä¹…é›†æˆæˆ‘ä»¬çš„é˜²ç«å¢™ã€‚è¿™é¡¹è·¨è¡Œä¸šåˆä½œæ ‘ç«‹äº†å¹³å°åœ¨ç½‘é¡µé­å—æ”»å‡»æ—¶å¦‚ä½•åä½œçš„å…¸èŒƒã€‚å¸®åŠ©å®¢æˆ·å‡çº§çš„å·¥å…·ç°åœ¨æˆä¸ºæˆ‘ä»¬åº”å¯¹ä»»ä½•å®‰å…¨äº‹ä»¶çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>ä½†å¹³å°é˜²æŠ¤åªèƒ½äº‰å–æ—¶é—´ã€‚å®ƒä»¬æ˜¯ç¬¬ä¸€é“é˜²çº¿ï¼Œè€Œéè¡¥ä¸çš„æ›¿ä»£å“ã€‚å¦‚æœæ‚¨æ­£åœ¨è¿è¡Œå­˜åœ¨æ¼æ´ç‰ˆæœ¬çš„ <code>Next.js</code>ï¼Œè¯·ç«‹å³æ‰“è¡¥ä¸ã€‚</p>
<p>ä¸‹ä¸€ä¸ªå…³é”®æ¼æ´å°†ä¼šå‡ºç°ï¼Œå½“å®ƒå‡ºç°æ—¶ï¼Œ<code>Vercel</code>å®¢æˆ·å¯ä»¥æ”¾å¿ƒï¼Œåœ¨ä»–ä»¬æ‰“è¡¥ä¸æœŸé—´ï¼Œæˆ‘ä»¬ä¼šæœ‰é˜²æŠ¤æªæ–½åˆ°ä½ã€‚</p>
<h2 data-id="heading-9">è‡´è°¢</h2>
<p>é¦–å…ˆï¼Œæ„Ÿè°¢<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flachlan2k%2F" target="_blank" title="https://github.com/lachlan2k/" ref="nofollow noopener noreferrer">æ‹‰èµ«å…°Â·æˆ´ç»´æ£®ï¼ˆLachlan Davidsonï¼‰</a>è´Ÿè´£ä»»åœ°æŠ«éœ²äº† <code>React2Shell</code>æ¼æ´ã€‚ä»–åœ¨æŠ«éœ²åç»§ç»­è¯•æ¢æˆ‘ä»¬çš„é˜²å¾¡ï¼Œå¹¶æäº¤äº†ä¸€äº›æˆ‘ä»¬è§è¿‡çš„æœ€å¤æ‚çš„ç»•è¿‡æ–¹æ³•ã€‚</p>
<p>æ„Ÿè°¢æ¯ä¸€ä½å‚ä¸æˆ‘ä»¬ <code>HackerOne</code>è®¡åˆ’çš„ç ”ç©¶äººå‘˜ï¼šhakikiwidyaã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhackerone.com%2Fluhko" target="_blank" title="https://hackerone.com/luhko" ref="nofollow noopener noreferrer">luhko</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhackerone.com%2Flachlan2k" target="_blank" title="https://hackerone.com/lachlan2k" ref="nofollow noopener noreferrer">lachlan2k</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhackerone.com%2Fsy1vi3" target="_blank" title="https://hackerone.com/sy1vi3" ref="nofollow noopener noreferrer">sy1vi3</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhackerone.com%2Fmaple3142" target="_blank" title="https://hackerone.com/maple3142" ref="nofollow noopener noreferrer">maple3142</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhackerone.com%2Fhacktronresearch" target="_blank" title="https://hackerone.com/hacktronresearch" ref="nofollow noopener noreferrer">hacktronresearch</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhackerone.com%2Fbugra" target="_blank" title="https://hackerone.com/bugra" ref="nofollow noopener noreferrer">bugra</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhackerone.com%2Flonecat" target="_blank" title="https://hackerone.com/lonecat" ref="nofollow noopener noreferrer">lonecat</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhackerone.com%2Fryotak" target="_blank" title="https://hackerone.com/ryotak" ref="nofollow noopener noreferrer">ryotak</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhackerone.com%2Fch1axan" target="_blank" title="https://hackerone.com/ch1axan" ref="nofollow noopener noreferrer">ch1axan</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhackerone.com%2Fchilaxan" target="_blank" title="https://hackerone.com/chilaxan" ref="nofollow noopener noreferrer">chilaxan</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhackerone.com%2Fcjm00n" target="_blank" title="https://hackerone.com/cjm00n" ref="nofollow noopener noreferrer">cjm00n</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhackerone.com%2Ffrancisconeves97" target="_blank" title="https://hackerone.com/francisconeves97" ref="nofollow noopener noreferrer">francisconeves97</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhackerone.com%2Fphithon" target="_blank" title="https://hackerone.com/phithon" ref="nofollow noopener noreferrer">phithon</a>ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fhackerone.com%2Fshubs" target="_blank" title="https://hackerone.com/shubs" ref="nofollow noopener noreferrer">shubs</a>å’Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fhackerone.com%2Fhashkitten" target="_blank" title="https://hackerone.com/hashkitten" ref="nofollow noopener noreferrer">hashkitten</a>ã€‚</p>
<p>æ²¡æœ‰ä»¥ä¸‹åˆä½œä¼™ä¼´ï¼Œæˆ‘ä»¬çš„åº”å¯¹æªæ–½ä¸å¯èƒ½æˆåŠŸï¼š</p>
<ul>
<li><code>HackerOne</code>åŠ¨å‘˜å›¢é˜Ÿåœ¨ä¸åˆ°å…­å°æ—¶å†…å¯åŠ¨äº†æˆ‘ä»¬çš„æ¼æ´èµé‡‘è®¡åˆ’ã€‚è¿™ä¸€è¿‡ç¨‹é€šå¸¸éœ€è¦æ•°å‘¨æ—¶é—´ã€‚</li>
<li><code>Latacora IntrusionOps</code>æä¾›äº†å…³é”®çš„äº‹ä»¶å“åº”æ”¯æŒï¼Œå¸®åŠ©æˆ‘ä»¬åœ¨æ”¶åˆ°æäº¤å†…å®¹æ—¶è¿›è¡Œåˆ†ç±»ã€éªŒè¯å’Œé‡ç°ã€‚</li>
</ul>
<p>ç‰¹åˆ«æ„Ÿè°¢ <code>Vercel</code>é¦–å¸­è´¢åŠ¡å®˜<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.linkedin.com%2Fin%2Fmartenabrahamsen" target="_blank" title="https://www.linkedin.com/in/martenabrahamsen" ref="nofollow noopener noreferrer">é©¬æ»•Â·äºšä¼¯æ‹‰ç½•æ£®ï¼ˆMarten Abrahamsenï¼‰</a>æ‰¹å‡†äº†100ä¸‡ç¾å…ƒçš„èµé‡‘æ”¯å‡ºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å›å½’åˆ†æå…¨å®¶æ¡¶ï¼ˆ16ç§å›å½’æ¨¡å‹å®ç°æ–¹å¼æ€»ç»“ï¼‰]]></title>    <link>https://juejin.cn/post/7589214068093698067</link>    <guid>https://juejin.cn/post/7589214068093698067</guid>    <pubDate>2025-12-30T06:43:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589214068093698067" data-draft-id="7589201772134465577" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å›å½’åˆ†æå…¨å®¶æ¡¶ï¼ˆ16ç§å›å½’æ¨¡å‹å®ç°æ–¹å¼æ€»ç»“ï¼‰"/> <meta itemprop="keywords" content="Python,æœºå™¨å­¦ä¹ ,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-30T06:43:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="databook"/> <meta itemprop="url" content="https://juejin.cn/user/3526889035006702"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å›å½’åˆ†æå…¨å®¶æ¡¶ï¼ˆ16ç§å›å½’æ¨¡å‹å®ç°æ–¹å¼æ€»ç»“ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3526889035006702/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    databook
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T06:43:12.000Z" title="Tue Dec 30 2025 06:43:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»44åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æåˆ°å›å½’åˆ†æï¼Œå¾ˆå¤šäººç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„åªæœ‰â€œçº¿æ€§å›å½’â€å’Œâ€œé€»è¾‘å›å½’â€ã€‚ä½†å®é™…ä¸Šï¼Œé’ˆå¯¹ä¸åŒçš„æ•°æ®æƒ…å†µï¼ˆæ¯”å¦‚æœ‰ç¦»ç¾¤ç‚¹ã€æ•°æ®æ˜¯è®¡æ•°çš„ã€æ•°æ®æœ‰ç¼ºå¤±æˆªæ–­ç­‰ï¼‰ï¼Œæˆ‘ä»¬æœ‰åå‡ ç§å›å½’æ¨¡å‹å¯ä»¥é€‰æ‹©ã€‚</p>
<p>ä»Šå¤©ä¸ºå¤§å®¶æ€»ç»“äº† <strong>16ç§å›å½’åˆ†æ</strong> çš„æ¨¡å‹ï¼Œé‡ç‚¹ä¸æ˜¯ä»‹ç»è¿™äº›å›å½’æ¨¡å‹çš„åŸç†ï¼Œè€Œæ˜¯ä»‹ç»å¦‚ä½•åœ¨Pythonä»£ç ä¸­ä½¿ç”¨è¿™äº›æ¨¡å‹ï¼Œå¸Œæœ›ä½ ä»¥åèƒ½å¤Ÿåœ¨å®æˆ˜ä¸­æ¥åº”ç”¨è¿™äº›æ¨¡å‹ï¼</p>
<h2 data-id="heading-0">1. å›å½’åˆ†æå…¨å®¶æ¡¶</h2>
<p>ä¸‹é¢ä»‹ç»å¦‚ä½•ä½¿ç”¨å„ç§å›å½’æ¨¡å‹çš„ç¤ºä¾‹ä»£ç ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸€äº›æ­¥éª¤ï¼š</p>
<ul>
<li><strong>æ¨¡æ‹Ÿæ•°æ®</strong>ï¼šåˆ›å»ºé€‚åˆæŸç§å›å½’æ¨¡å‹çš„æµ‹è¯•æ•°æ®</li>
<li><strong>åˆ›å»ºå›å½’æ¨¡å‹å¹¶è®­ç»ƒ</strong>ï¼šä¸»è¦ä½¿ç”¨ <code>scikit-learn</code> è¿™ä¸ªåº“</li>
<li><strong>è¯„ä¼°æ¨¡å‹</strong>ï¼šæœ‰æ—¶ä¼šå’Œå…¶ä»–å›å½’æ¨¡å‹å¯¹æ¯”</li>
<li><strong>å¯è§†åŒ–æ¨¡å‹</strong>ï¼šä½¿ç”¨<code>matplotlib</code>è¿™ä¸ªåº“ï¼Œç®€å•å±•ç¤ºæ¨¡å‹æ•ˆæœ</li>
</ul>
<p>ç”±äºæ‹…å¿ƒæ–‡ç« ç¯‡å¹…å¤ªé•¿ï¼Œæ–‡ä¸­çš„ç¤ºä¾‹æ²¡æœ‰è´´å‡ºå®Œæ•´çš„ä»£ç ï¼ˆç‰¹åˆ«æ˜¯å¯è§†åŒ–éƒ¨åˆ†çš„ä»£ç ï¼Œæ¯”è¾ƒç¹çï¼Œæ–‡ä¸­éƒ½çœç•¥äº†ï¼‰ï¼Œæ–‡ç« æœ«å°¾æä¾›äº†å®Œæ•´ä»£ç ï¼ˆä¸€ä¸ª<code>jupyter notebook</code>æ–‡ä»¶ï¼‰çš„ä¸‹è½½åœ°å€ï¼ŒåŒ…æ‹¬äº†æ‰€æœ‰å¯è§†åŒ–çš„ä»£ç ã€‚</p>
<p>ä¸‹é¢çš„ä»£ç ä¸­ç»Ÿä¸€å¯¼å…¥äº†ä¸‹é¢çš„åº“ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-keyword">import</span> matplotlib
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt

<span class="hljs-comment"># ä¸ºäº†æ˜¾ç¤ºä¸­æ–‡</span>
matplotlib.rcParams[<span class="hljs-string">"font.sans-serif"</span>] = [<span class="hljs-string">"Microsoft YaHei Mono"</span>]
matplotlib.rcParams[<span class="hljs-string">"axes.unicode_minus"</span>] = <span class="hljs-literal">False</span>
</code></pre>
<h3 data-id="heading-1">1.1. çº¿æ€§å›å½’ (Linear Regression)</h3>
<ul>
<li><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šæœ€åŸºç¡€çš„å›å½’ï¼Œå‡è®¾è‡ªå˜é‡ï¼ˆXï¼‰å’Œå› å˜é‡ï¼ˆYï¼‰ä¹‹é—´æ˜¯â€œç›´æ¥ç›´å»â€çš„çº¿æ€§å…³ç³»ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šé¢„æµ‹æˆ¿ä»·ã€é”€å”®é¢ç­‰è¿ç»­æ•°å€¼ï¼Œä¸”æ•°æ®æ²¡æœ‰æ˜æ˜¾çš„å¤æ‚éçº¿æ€§å…³ç³»ã€‚</li>
</ul>
<p><strong>çº¿æ€§å›å½’</strong>æ¨¡å‹ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># çº¿æ€§å›å½’ (Linear Regression)</span>
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LinearRegression
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> mean_squared_error, r2_score

<span class="hljs-comment"># æ„é€ æµ‹è¯•æ•°æ®</span>
<span class="hljs-comment"># å‡è®¾æˆ‘ä»¬è¦æ¨¡æ‹Ÿæˆ¿å±‹é¢ç§¯ï¼ˆè‡ªå˜é‡Xï¼‰å’Œæˆ¿ä»·ï¼ˆå› å˜é‡Yï¼‰çš„å…³ç³»</span>
np.random.seed(<span class="hljs-number">42</span>)  <span class="hljs-comment"># è®¾ç½®éšæœºç§å­ä»¥ç¡®ä¿ç»“æœå¯å¤ç°</span>

<span class="hljs-comment"># ç”Ÿæˆ100ä¸ªæˆ¿å±‹é¢ç§¯æ•°æ®ï¼ŒèŒƒå›´åœ¨50-200å¹³æ–¹ç±³</span>
X = np.random.rand(<span class="hljs-number">100</span>, <span class="hljs-number">1</span>) * <span class="hljs-number">150</span> + <span class="hljs-number">50</span>

<span class="hljs-comment"># çœŸå®çš„çº¿æ€§å…³ç³»ï¼šæˆ¿ä»· = 5000 * é¢ç§¯ + 100000 + éšæœºå™ªå£°</span>
<span class="hljs-comment"># å…¶ä¸­5000æ˜¯æ¯å¹³æ–¹ç±³çš„ä»·æ ¼ï¼Œ100000æ˜¯åŸºç¡€ä»·æ ¼</span>
<span class="hljs-comment"># åŠ å…¥ä¸€äº›éšæœºå™ªå£°ï¼Œä½¿æ•°æ®æ›´çœŸå®</span>
Y_true = <span class="hljs-number">5000</span> * X + <span class="hljs-number">100000</span>
Y = Y_true + np.random.randn(<span class="hljs-number">100</span>, <span class="hljs-number">1</span>) * <span class="hljs-number">50000</span>  <span class="hljs-comment"># åŠ å…¥æ ‡å‡†å·®ä¸º50000çš„å™ªå£°</span>

<span class="hljs-comment"># ä½¿ç”¨çº¿æ€§å›å½’æ¨¡å‹</span>
model = LinearRegression()
model.fit(X, Y)

<span class="hljs-comment"># é¢„æµ‹</span>
Y_pred = model.predict(X)

<span class="hljs-comment"># æ‰“å°æ¨¡å‹å‚æ•°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"çº¿æ€§å›å½’æ¨¡å‹å‚æ•°ï¼š"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æˆªè·ï¼ˆåŸºç¡€ä»·æ ¼ï¼‰: <span class="hljs-subst">{model.intercept_[<span class="hljs-number">0</span>]:<span class="hljs-number">.2</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ–œç‡ï¼ˆæ¯å¹³æ–¹ç±³ä»·æ ¼ï¼‰: <span class="hljs-subst">{model.coef_[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]:<span class="hljs-number">.2</span>f}</span>"</span>)

<span class="hljs-comment"># è¯„ä¼°æ¨¡å‹</span>
mse = mean_squared_error(Y, Y_pred)
r2 = r2_score(Y, Y_pred)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næ¨¡å‹è¯„ä¼°ï¼š"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡æ–¹è¯¯å·® (MSE): <span class="hljs-subst">{mse:<span class="hljs-number">.2</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å†³å®šç³»æ•° (RÂ²): <span class="hljs-subst">{r2:<span class="hljs-number">.2</span>f}</span>"</span>)

<span class="hljs-comment"># ä½¿ç”¨matplotlibç»˜åˆ¶å›¾åƒ</span>
<span class="hljs-comment">#... çœç•¥ ...</span>

<span class="hljs-comment">## è¿è¡Œç»“æœï¼š</span>
<span class="hljs-string">'''
çº¿æ€§å›å½’æ¨¡å‹å‚æ•°ï¼š
æˆªè·ï¼ˆåŸºç¡€ä»·æ ¼ï¼‰: 118417.69
æ–œç‡ï¼ˆæ¯å¹³æ–¹ç±³ä»·æ ¼ï¼‰: 4846.74

æ¨¡å‹è¯„ä¼°ï¼š
å‡æ–¹è¯¯å·® (MSE): 2016461409.92
å†³å®šç³»æ•° (RÂ²): 0.96
'''</span>
</code></pre>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ceaa98bd2be6485f86d9a641e57a096d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=%2F4YJUQZrRy3wB%2BYfQWGj%2BzPETmw%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">1.2. å¤šé¡¹å¼å›å½’ (Polynomial Regression)</h3>
<ul>
<li><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šå½“æ•°æ®ä¸æ˜¯ç›´çº¿åˆ†å¸ƒï¼Œè€Œæ˜¯åƒæ›²çº¿ä¸€æ ·å¼¯æ›²æ—¶ï¼Œæˆ‘ä»¬ç»™è‡ªå˜é‡åŠ ä¸Šå¹³æ–¹ã€ç«‹æ–¹ç­‰â€œé«˜æ¬¡é¡¹â€æ¥æ‹Ÿåˆæ›²çº¿ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šæ‹Ÿåˆç”Ÿç‰©ç”Ÿé•¿æ›²çº¿ã€ç”±äºè¾¹é™…æ•ˆåº”é€’å‡å¯¼è‡´çš„ç»æµå­¦æ•°æ®ç­‰éçº¿æ€§å…³ç³»ã€‚</li>
</ul>
<p><strong>å¤šé¡¹å¼å›å½’</strong>æ¨¡å‹ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¤šé¡¹å¼å›å½’ (Polynomial Regression)</span>
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LinearRegression
<span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> PolynomialFeatures
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> mean_squared_error, r2_score

<span class="hljs-comment"># 1. æ„é€ å¼ºéçº¿æ€§æµ‹è¯•æ•°æ®ï¼ˆæ¨¡æ‹Ÿç”Ÿç‰©ç”Ÿé•¿æ›²çº¿ï¼‰</span>
np.random.seed(<span class="hljs-number">42</span>)  <span class="hljs-comment"># è®¾ç½®éšæœºç§å­ä»¥ç¡®ä¿ç»“æœå¯å¤ç°</span>

<span class="hljs-comment"># ç”Ÿæˆ100ä¸ªè‡ªå˜é‡æ•°æ®ï¼ŒèŒƒå›´åœ¨0-15</span>
X = np.random.rand(<span class="hljs-number">100</span>, <span class="hljs-number">1</span>) * <span class="hljs-number">15</span>

<span class="hljs-comment"># çœŸå®çš„å¼ºéçº¿æ€§å…³ç³»ï¼šä½¿ç”¨ç±»ä¼¼Så‹æ›²çº¿çš„å‡½æ•°ï¼ˆLogisticç”Ÿé•¿æ¨¡å‹çš„å˜å½¢ï¼‰</span>
<span class="hljs-comment"># Y = 100 / (1 + exp(-0.5*(X-7))) + éšæœºå™ªå£°</span>
<span class="hljs-comment"># è¿™ä¸ªå…³ç³»æ¨¡æ‹Ÿäº†ç”Ÿç‰©ç”Ÿé•¿æ›²çº¿ï¼šåˆæœŸç¼“æ…¢ï¼Œä¸­æœŸå¿«é€Ÿå¢é•¿ï¼ŒåæœŸè¶‹äºé¥±å’Œ</span>
Y_true = <span class="hljs-number">100</span> / (<span class="hljs-number">1</span> + np.exp(-<span class="hljs-number">0.5</span> * (X - <span class="hljs-number">7</span>)))
Y = Y_true + np.random.randn(<span class="hljs-number">100</span>, <span class="hljs-number">1</span>) * <span class="hljs-number">5</span>  <span class="hljs-comment"># åŠ å…¥æ ‡å‡†å·®ä¸º5çš„å™ªå£°</span>

<span class="hljs-comment"># 2. å¤šé¡¹å¼å›å½’ï¼ˆä½¿ç”¨ä¸‰æ¬¡å¤šé¡¹å¼ï¼‰</span>
<span class="hljs-comment"># è½¬æ¢ç‰¹å¾ï¼Œæ·»åŠ å¹³æ–¹å’Œç«‹æ–¹é¡¹</span>
poly_features = PolynomialFeatures(degree=<span class="hljs-number">3</span>, include_bias=<span class="hljs-literal">False</span>)
X_poly = poly_features.fit_transform(X)

<span class="hljs-comment"># ä½¿ç”¨çº¿æ€§å›å½’æ‹Ÿåˆè½¬æ¢åçš„ç‰¹å¾</span>
model = LinearRegression()
model.fit(X_poly, Y)

<span class="hljs-comment"># é¢„æµ‹</span>
Y_pred = model.predict(X_poly)

<span class="hljs-comment"># æ‰“å°æ¨¡å‹å‚æ•°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¤šé¡¹å¼å›å½’æ¨¡å‹å‚æ•°ï¼ˆä¸‰æ¬¡å¤šé¡¹å¼ï¼‰ï¼š"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æˆªè·: <span class="hljs-subst">{model.intercept_[<span class="hljs-number">0</span>]:<span class="hljs-number">.2</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç³»æ•°: <span class="hljs-subst">{model.coef_[<span class="hljs-number">0</span>]}</span>"</span>)

<span class="hljs-comment"># è¯„ä¼°æ¨¡å‹</span>
mse = mean_squared_error(Y, Y_pred)
r2 = r2_score(Y, Y_pred)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næ¨¡å‹è¯„ä¼°ï¼š"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡æ–¹è¯¯å·® (MSE): <span class="hljs-subst">{mse:<span class="hljs-number">.2</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å†³å®šç³»æ•° (RÂ²): <span class="hljs-subst">{r2:<span class="hljs-number">.2</span>f}</span>"</span>)

<span class="hljs-comment"># 3. ä½¿ç”¨çº¿æ€§å›å½’ä½œä¸ºå¯¹æ¯”</span>
linear_model = LinearRegression()
linear_model.fit(X, Y)
Y_linear_pred = linear_model.predict(X)

<span class="hljs-comment"># è¯„ä¼°çº¿æ€§å›å½’æ¨¡å‹</span>
linear_mse = mean_squared_error(Y, Y_linear_pred)
linear_r2 = r2_score(Y, Y_linear_pred)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nçº¿æ€§å›å½’æ¨¡å‹è¯„ä¼°ï¼š"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡æ–¹è¯¯å·® (MSE): <span class="hljs-subst">{linear_mse:<span class="hljs-number">.2</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å†³å®šç³»æ•° (RÂ²): <span class="hljs-subst">{linear_r2:<span class="hljs-number">.2</span>f}</span>"</span>)

<span class="hljs-comment"># 4. ä½¿ç”¨matplotlibç»˜åˆ¶å›¾åƒ</span>
<span class="hljs-comment">#... çœç•¥ ...</span>

<span class="hljs-comment">## è¿è¡Œç»“æœï¼š</span>
<span class="hljs-string">'''
å¤šé¡¹å¼å›å½’æ¨¡å‹å‚æ•°ï¼ˆä¸‰æ¬¡å¤šé¡¹å¼ï¼‰ï¼š
æˆªè·: 8.70
ç³»æ•°: [-4.29511575  2.09659382 -0.09560718]

æ¨¡å‹è¯„ä¼°ï¼š
å‡æ–¹è¯¯å·® (MSE): 20.02
å†³å®šç³»æ•° (RÂ²): 0.98

çº¿æ€§å›å½’æ¨¡å‹è¯„ä¼°ï¼š
å‡æ–¹è¯¯å·® (MSE): 56.71
å†³å®šç³»æ•° (RÂ²): 0.95
'''</span>
</code></pre>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6443a9759c0744c29ed4719ff6348f51~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=952kZgFP1giGmsYLO8O8gUOM8S8%3D" alt="" loading="lazy"/></p>
<p>ä»ç¤ºä¾‹å¯ä»¥çœ‹å‡ºï¼Œçº¿æ€§å›å½’åªèƒ½ç”¨ä¸€æ¡ç›´çº¿æ‹Ÿåˆæ‰€æœ‰æ•°æ®ï¼Œæ— æ³•æ•æ‰åˆ°Så‹æ›²çº¿çš„å¼¯æ›²ç‰¹å¾ã€‚</p>
<p><strong>å¤šé¡¹å¼å›å½’</strong>èƒ½å¤Ÿæ›´å¥½åœ°è´´åˆæ•°æ®çš„éçº¿æ€§æ¨¡å¼ï¼Œå°¤å…¶æ˜¯åœ¨æ›²çº¿çš„å¼¯æ›²éƒ¨åˆ†ï¼Œ</p>
<p>è¿™ç§å¯¹æ¯”æ¸…æ™°åœ°å±•ç¤ºäº†å¤šé¡¹å¼å›å½’åœ¨å¤„ç†éçº¿æ€§æ•°æ®æ—¶çš„ä¼˜åŠ¿ã€‚</p>
<h3 data-id="heading-3">1.3. é€»è¾‘å›å½’ (Logistic Regression)</h3>
<ul>
<li><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šè™½ç„¶å«â€œå›å½’â€ï¼Œä½†å…¶å®æ˜¯åš<strong>åˆ†ç±»</strong>çš„ã€‚å®ƒé¢„æµ‹çš„æ˜¯äº‹ä»¶å‘ç”Ÿçš„æ¦‚ç‡ï¼ˆ0åˆ°1ä¹‹é—´ï¼‰ï¼Œè¾“å‡ºç»“æœé€šå¸¸é€šè¿‡é˜ˆå€¼ï¼ˆå¦‚0.5ï¼‰åˆ’åˆ†ä¸ºä¸¤ç±»ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šé¢„æµ‹ç”¨æˆ·æ˜¯å¦ä¼šè´­ä¹°ï¼ˆæ˜¯/å¦ï¼‰ã€ç—…äººæ˜¯å¦æ‚£ç—…ã€é‚®ä»¶æ˜¯å¦ä¸ºåƒåœ¾é‚®ä»¶ã€‚</li>
</ul>
<p><strong>é€»è¾‘å›å½’</strong>æ¨¡å‹ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># é€»è¾‘å›å½’ (Logistic Regression)</span>
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LogisticRegression
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> accuracy_score

<span class="hljs-comment"># 1. æ„é€ äºŒåˆ†ç±»æµ‹è¯•æ•°æ®ï¼ˆæ¨¡æ‹Ÿç”¨æˆ·è´­ä¹°é¢„æµ‹åœºæ™¯ï¼‰</span>
np.random.seed(<span class="hljs-number">42</span>)  <span class="hljs-comment"># è®¾ç½®éšæœºç§å­ä»¥ç¡®ä¿ç»“æœå¯å¤ç°</span>

<span class="hljs-comment"># ç±»åˆ«0ï¼šä¸ä¼šè´­ä¹°çš„ç”¨æˆ·ç‰¹å¾ï¼ˆå¦‚æµè§ˆæ—¶é•¿å’Œé¡µé¢è®¿é—®é‡ï¼‰</span>
n_class0 = <span class="hljs-number">100</span>
class0_features = np.random.randn(n_class0, <span class="hljs-number">2</span>) * <span class="hljs-number">1.5</span> + [<span class="hljs-number">3</span>, <span class="hljs-number">3</span>]
class0_labels = np.zeros(n_class0)

<span class="hljs-comment"># ç±»åˆ«1ï¼šä¼šè´­ä¹°çš„ç”¨æˆ·ç‰¹å¾</span>
n_class1 = <span class="hljs-number">100</span>
class1_features = np.random.randn(n_class1, <span class="hljs-number">2</span>) * <span class="hljs-number">1.5</span> + [<span class="hljs-number">6</span>, <span class="hljs-number">6</span>]
class1_labels = np.ones(n_class1)

<span class="hljs-comment"># åˆå¹¶æ•°æ®é›†</span>
X = np.vstack([class0_features, class1_features])
y = np.hstack([class0_labels, class1_labels])

<span class="hljs-comment"># 2. è®­ç»ƒé€»è¾‘å›å½’æ¨¡å‹</span>
model = LogisticRegression()
model.fit(X, y)

<span class="hljs-comment"># é¢„æµ‹</span>
y_pred_proba = model.predict_proba(X)[:, <span class="hljs-number">1</span>]
y_pred = model.predict(X)

<span class="hljs-comment"># æ¨¡å‹è¯„ä¼°</span>
accuracy = accuracy_score(y, y_pred)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"é€»è¾‘å›å½’æ¨¡å‹å‡†ç¡®ç‡: <span class="hljs-subst">{accuracy:<span class="hljs-number">.2</span>f}</span>"</span>)

<span class="hljs-comment"># 3. ç»˜åˆ¶å›¾åƒ</span>
<span class="hljs-comment">#... çœç•¥ ...</span>

<span class="hljs-comment">## è¿è¡Œç»“æœï¼š</span>
<span class="hljs-string">'''
é€»è¾‘å›å½’æ¨¡å‹å‡†ç¡®ç‡: 0.93
'''</span>
</code></pre>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/25d49650ff0344e8acd11c0e8b35a5d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=Itm6CoaQNBBYNiwqMvw47C2WUFk%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªç¤ºä¾‹æ¸…æ™°å±•ç¤ºäº†é€»è¾‘å›å½’å¦‚ä½•è¿›è¡ŒäºŒåˆ†ç±»é¢„æµ‹ï¼Œå¹¶é€šè¿‡å¯è§†åŒ–ç›´è§‚å‘ˆç°äº†åˆ†ç±»ç»“æœã€å†³ç­–è¾¹ç•Œå’Œæ¦‚ç‡åˆ†å¸ƒï¼Œå®Œå…¨ç¬¦åˆé€»è¾‘å›å½’çš„åº”ç”¨åœºæ™¯ï¼ˆé¢„æµ‹äº‹ä»¶å‘ç”Ÿæ¦‚ç‡ï¼‰ã€‚</p>
<h3 data-id="heading-4">1.4. åˆ†ä½æ•°å›å½’ (Quantile Regression)</h3>
<ul>
<li><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šæ™®é€šå›å½’é¢„æµ‹çš„æ˜¯â€œå¹³å‡å€¼â€ï¼Œè€Œåˆ†ä½æ•°å›å½’å¯ä»¥é¢„æµ‹â€œä¸­ä½æ•°â€æˆ–è€…ä»»æ„ç™¾åˆ†ä½ç‚¹ï¼ˆå¦‚å‰10%ï¼‰ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šæ•°æ®ä¸­æœ‰æç«¯å¼‚å¸¸å€¼ï¼ˆç¦»ç¾¤ç‚¹ï¼‰ï¼Œæˆ–è€…ä½ æƒ³ç ”ç©¶ä¸åŒå±‚çº§çš„æ•°æ®ï¼ˆå¦‚åˆ†æè´«å›°äººå£å’Œå¯Œè£•äººå£çš„æ”¶å…¥å½±å“å› ç´ å·®å¼‚ï¼‰ã€‚</li>
</ul>
<p><strong>åˆ†ä½æ•°å›å½’</strong>æ¨¡å‹ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åˆ†ä½æ•°å›å½’ (Quantile Regression)</span>
<span class="hljs-keyword">import</span> statsmodels.api <span class="hljs-keyword">as</span> sm
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LinearRegression

<span class="hljs-comment"># 1. æ„é€ åŒ…å«æç«¯å¼‚å¸¸å€¼çš„æµ‹è¯•æ•°æ®</span>
np.random.seed(<span class="hljs-number">42</span>)  <span class="hljs-comment"># è®¾ç½®éšæœºç§å­ä»¥ç¡®ä¿ç»“æœå¯å¤ç°</span>

<span class="hljs-comment"># ç”ŸæˆåŸºç¡€è‡ªå˜é‡æ•°æ®ï¼ˆå¦‚æ”¶å…¥ï¼‰</span>
X = np.linspace(<span class="hljs-number">10</span>, <span class="hljs-number">100</span>, <span class="hljs-number">100</span>).reshape(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)

<span class="hljs-comment"># åŸºç¡€çº¿æ€§å…³ç³»ï¼šæ¶ˆè´¹ = 0.6 * æ”¶å…¥ + 10 + éšæœºå™ªå£°</span>
Y_true = <span class="hljs-number">0.6</span> * X + <span class="hljs-number">10</span>
Y = Y_true + np.random.normal(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>, size=X.shape)  <span class="hljs-comment"># åŠ å…¥æ­£å¸¸å™ªå£°</span>

<span class="hljs-comment"># æ·»åŠ æç«¯å¼‚å¸¸å€¼ï¼ˆæ¨¡æ‹Ÿé«˜æ¶ˆè´¹äººç¾¤çš„æç«¯æ¶ˆè´¹è¡Œä¸ºï¼‰</span>
<span class="hljs-comment"># é€‰æ‹©æœ€å10ä¸ªæ•°æ®ç‚¹ï¼Œæ·»åŠ å¤§çš„æ­£å¼‚å¸¸å€¼</span>
Y[-<span class="hljs-number">10</span>:] += np.random.normal(<span class="hljs-number">100</span>, <span class="hljs-number">20</span>, size=(<span class="hljs-number">10</span>, <span class="hljs-number">1</span>))

<span class="hljs-comment"># 2. æ™®é€šçº¿æ€§å›å½’</span>
linear_model = LinearRegression()
linear_model.fit(X, Y)
Y_linear_pred = linear_model.predict(X)

<span class="hljs-comment"># 3. åˆ†ä½æ•°å›å½’</span>
<span class="hljs-comment"># æ·»åŠ å¸¸æ•°é¡¹</span>
X_with_const = sm.add_constant(X)

<span class="hljs-comment"># å®šä¹‰è¦ä¼°è®¡çš„åˆ†ä½æ•°</span>
quantiles = [<span class="hljs-number">0.1</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.9</span>]
quantile_results = {}

<span class="hljs-comment"># æ‹Ÿåˆä¸åŒåˆ†ä½æ•°çš„æ¨¡å‹</span>
<span class="hljs-keyword">for</span> q <span class="hljs-keyword">in</span> quantiles:
    model = sm.QuantReg(Y, X_with_const)
    result = model.fit(q=q)
    quantile_results[q] = result

<span class="hljs-comment"># 4. é¢„æµ‹ä¸åŒåˆ†ä½æ•°çš„ç»“æœ</span>
Y_quantile_pred = {}
<span class="hljs-keyword">for</span> q <span class="hljs-keyword">in</span> quantiles:
    Y_quantile_pred[q] = quantile_results[q].predict(X_with_const)

<span class="hljs-comment"># 5. ç»˜åˆ¶å›¾åƒ</span>
<span class="hljs-comment">#... çœç•¥ ...</span>

<span class="hljs-comment"># æ‰“å°æ¨¡å‹å‚æ•°å¯¹æ¯”</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== æ¨¡å‹å‚æ•°å¯¹æ¯” ==="</span>)
<span class="hljs-built_in">print</span>(
    <span class="hljs-string">f"æ™®é€šçº¿æ€§å›å½’: æˆªè·=<span class="hljs-subst">{linear_model.intercept_[<span class="hljs-number">0</span>]:<span class="hljs-number">.2</span>f}</span>, æ–œç‡=<span class="hljs-subst">{linear_model.coef_[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]:<span class="hljs-number">.2</span>f}</span>"</span>
)
<span class="hljs-keyword">for</span> q <span class="hljs-keyword">in</span> quantiles:
    intercept = quantile_results[q].params[<span class="hljs-number">0</span>]
    slope = quantile_results[q].params[<span class="hljs-number">1</span>]
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ†ä½æ•°å›å½’(Ï„=<span class="hljs-subst">{q:<span class="hljs-number">.1</span>f}</span>): æˆªè·=<span class="hljs-subst">{intercept:<span class="hljs-number">.2</span>f}</span>, æ–œç‡=<span class="hljs-subst">{slope:<span class="hljs-number">.2</span>f}</span>"</span>)

<span class="hljs-comment">## è¿è¡Œç»“æœï¼š</span>
<span class="hljs-string">'''
=== æ¨¡å‹å‚æ•°å¯¹æ¯” ===
æ™®é€šçº¿æ€§å›å½’: æˆªè·=-13.59, æ–œç‡=1.20
åˆ†ä½æ•°å›å½’(Ï„=0.1): æˆªè·=0.59, æ–œç‡=0.66
åˆ†ä½æ•°å›å½’(Ï„=0.5): æˆªè·=6.95, æ–œç‡=0.67
åˆ†ä½æ•°å›å½’(Ï„=0.9): æˆªè·=-3.01, æ–œç‡=1.73
'''</span>
</code></pre>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/527f8fa6386c47e49eaa3351398782a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=BJM4RUFp4dhYP8CqgO6WJlygI3I%3D" alt="" loading="lazy"/></p>
<p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼š</p>
<ul>
<li>ä¸åŒåˆ†ä½æ•°çš„å›å½’çº¿æ–œç‡å’Œæˆªè·å„ä¸ç›¸åŒ</li>
<li>é«˜æ¶ˆè´¹åˆ†ä½(Ï„=0.9)çš„å›å½’çº¿æœ€æ¥è¿‘å¼‚å¸¸å€¼ï¼Œè€Œä½æ¶ˆè´¹åˆ†ä½(Ï„=0.1)çš„å›å½’çº¿å‡ ä¹ä¸å—å¼‚å¸¸å€¼å½±å“</li>
<li>ä¸­ä½æ•°å›å½’(Ï„=0.5)ç›¸å¯¹æ™®é€šçº¿æ€§å›å½’æ›´èƒ½æŠµæŠ—å¼‚å¸¸å€¼çš„å½±å“</li>
</ul>
<p>è¿™ä¸ªç¤ºä¾‹æ¸…æ™°åœ°å±•ç¤ºäº†<strong>åˆ†ä½æ•°å›å½’</strong>å¦‚ä½•å¤„ç†<strong>æç«¯å¼‚å¸¸å€¼</strong>ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡ä¸åŒåˆ†ä½æ•°åˆ†ææ•°æ®çš„ä¸åŒå±‚çº§ç»“æ„ï¼Œéå¸¸é€‚åˆç”¨æˆ·æè¿°çš„ä½¿ç”¨åœºæ™¯ï¼ˆæ•°æ®ä¸­æœ‰æç«¯å¼‚å¸¸å€¼æˆ–éœ€è¦ç ”ç©¶ä¸åŒå±‚çº§æ•°æ®ï¼‰ã€‚</p>
<h3 data-id="heading-5">1.5. å²­å›å½’ (Ridge Regression)</h3>
<ul>
<li><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šåœ¨çº¿æ€§å›å½’çš„åŸºç¡€ä¸ŠåŠ äº†ä¸€ä¸ªâ€œæƒ©ç½šé¡¹â€ï¼ˆL2æ­£åˆ™åŒ–ï¼‰ï¼Œé˜²æ­¢æ¨¡å‹ä¸ºäº†è¿åˆè®­ç»ƒæ•°æ®è€Œå˜å¾—å¤ªå¤æ‚ï¼ˆè¿‡æ‹Ÿåˆï¼‰ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šç‰¹å¾ä¹‹é—´ç›¸å…³æ€§å¾ˆé«˜ï¼ˆå¤šé‡å…±çº¿æ€§ï¼‰å¯¼è‡´æ™®é€šå›å½’å¤±æ•ˆæ—¶ã€‚</li>
</ul>
<p><strong>å²­å›å½’</strong>æ¨¡å‹ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å²­å›å½’ (Ridge Regression)</span>
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LinearRegression, Ridge
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> mean_squared_error
<span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> StandardScaler

<span class="hljs-comment"># 1. æ„é€ å…·æœ‰å¤šé‡å…±çº¿æ€§çš„æµ‹è¯•æ•°æ®</span>
np.random.seed(<span class="hljs-number">42</span>)  <span class="hljs-comment"># è®¾ç½®éšæœºç§å­ä»¥ç¡®ä¿ç»“æœå¯å¤ç°</span>

<span class="hljs-comment"># ç”ŸæˆåŸºç¡€ç‰¹å¾ï¼ˆå¦‚æˆ¿å±‹çš„æ€»é¢ç§¯ï¼‰</span>
X1 = np.random.rand(<span class="hljs-number">100</span>, <span class="hljs-number">1</span>) * <span class="hljs-number">100</span> + <span class="hljs-number">50</span>  <span class="hljs-comment"># 50-150å¹³æ–¹ç±³</span>

<span class="hljs-comment"># ç”Ÿæˆé«˜åº¦ç›¸å…³çš„ç¬¬äºŒä¸ªç‰¹å¾ï¼ˆå¦‚æˆ¿å±‹çš„å¯ç”¨é¢ç§¯ï¼‰</span>
<span class="hljs-comment"># è®¾ç½®é«˜åº¦ç›¸å…³æ€§ï¼šX2 = 0.8*X1 + å°‘é‡å™ªå£°</span>
X2 = <span class="hljs-number">0.8</span> * X1 + np.random.randn(<span class="hljs-number">100</span>, <span class="hljs-number">1</span>) * <span class="hljs-number">5</span>
X = np.hstack([X1, X2])  <span class="hljs-comment"># åˆå¹¶ä¸¤ä¸ªç‰¹å¾</span>

<span class="hljs-comment"># çœŸå®çš„çº¿æ€§å…³ç³»ï¼šæˆ¿ä»· = 10000*X1 + 8000*X2 + 500000 + éšæœºå™ªå£°</span>
Y_true = <span class="hljs-number">10000</span> * X1 + <span class="hljs-number">8000</span> * X2 + <span class="hljs-number">500000</span>
Y = Y_true + np.random.randn(<span class="hljs-number">100</span>, <span class="hljs-number">1</span>) * <span class="hljs-number">200000</span>  <span class="hljs-comment"># åŠ å…¥å™ªå£°</span>

<span class="hljs-comment"># 2. æ•°æ®æ ‡å‡†åŒ–ï¼ˆå²­å›å½’å¯¹ç‰¹å¾ç¼©æ”¾æ•æ„Ÿï¼‰</span>
scaler = StandardScaler()
X_scaled = scaler.fit_transform(X)
Y_scaled = scaler.fit_transform(Y)

<span class="hljs-comment"># 3. æ™®é€šçº¿æ€§å›å½’</span>
linear_model = LinearRegression()
linear_model.fit(X_scaled, Y_scaled)
Y_linear_pred = linear_model.predict(X_scaled)

<span class="hljs-comment"># 4. å²­å›å½’ï¼ˆä¸åŒçš„æ­£åˆ™åŒ–å‚æ•°Î»ï¼‰</span>
<span class="hljs-comment"># ç§»é™¤0å€¼ä»¥é¿å…log10(0)çš„è­¦å‘Š</span>
lambdas = [<span class="hljs-number">0.1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">100</span>, <span class="hljs-number">1000</span>]  <span class="hljs-comment"># ä¸åŒçš„Î»å€¼</span>
ridge_models = {}
ridge_preds = {}
ridge_coefs = []

<span class="hljs-keyword">for</span> lam <span class="hljs-keyword">in</span> lambdas:
    model = Ridge(alpha=lam)
    model.fit(X_scaled, Y_scaled)
    ridge_models[lam] = model
    ridge_preds[lam] = model.predict(X_scaled)
    ridge_coefs.append(model.coef_.flatten())

<span class="hljs-comment"># 5. å¯è§†åŒ–ç»“æœ</span>
<span class="hljs-comment">#... çœç•¥ ...</span>

<span class="hljs-comment"># è®¡ç®—å¹¶æ¯”è¾ƒMSE</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== æ¨¡å‹æ€§èƒ½æ¯”è¾ƒ (MSE) ==="</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ™®é€šçº¿æ€§å›å½’ MSE: <span class="hljs-subst">{mean_squared_error(Y_scaled, Y_linear_pred):<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-keyword">for</span> lam <span class="hljs-keyword">in</span> lambdas:
    mse = mean_squared_error(Y_scaled, ridge_preds[lam])
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å²­å›å½’ (Î»=<span class="hljs-subst">{lam}</span>) MSE: <span class="hljs-subst">{mse:<span class="hljs-number">.4</span>f}</span>"</span>)

<span class="hljs-comment">## è¿è¡Œç»“æœï¼š</span>
<span class="hljs-string">'''
=== æ¨¡å‹æ€§èƒ½æ¯”è¾ƒ (MSE) ===
æ™®é€šçº¿æ€§å›å½’ MSE: 0.1705
å²­å›å½’ (Î»=0.1) MSE: 0.1705
å²­å›å½’ (Î»=1) MSE: 0.1706
å²­å›å½’ (Î»=10) MSE: 0.1730
å²­å›å½’ (Î»=100) MSE: 0.2645
å²­å›å½’ (Î»=1000) MSE: 0.7486
'''</span>
</code></pre>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b0bfb1b96424afc9199a1977fa315d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=Ov1FgNa2E%2B6AJz%2BTI4G%2BK7q04xA%3D" alt="" loading="lazy"/></p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb4dcdb1591d491b906242633116f565~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=E60GGD1npjKapq7Td8oDxwmhSF4%3D" alt="" loading="lazy"/></p>
<p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼š</p>
<ul>
<li>æ™®é€šçº¿æ€§å›å½’åœ¨å¤šé‡å…±çº¿æ€§ä¸‹ç³»æ•°å¯èƒ½ä¸ç¨³å®š</li>
<li>éšç€Î»å¢å¤§ï¼Œå²­å›å½’ç³»æ•°é€æ¸å‡å°å¹¶è¶‹å‘ç¨³å®š</li>
<li>åˆé€‚çš„Î»å€¼å¯ä»¥åœ¨ä¿æŒé¢„æµ‹å‡†ç¡®æ€§çš„åŒæ—¶æé«˜æ¨¡å‹ç¨³å®šæ€§</li>
</ul>
<p>è¿™ä¸ªç¤ºä¾‹æ¸…æ™°åœ°å±•ç¤ºäº†<strong>å²­å›å½’</strong>åœ¨å¤„ç†<strong>å¤šé‡å…±çº¿æ€§æ•°æ®</strong>æ—¶çš„ä¼˜åŠ¿ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡æ­£åˆ™åŒ–å‚æ•°Î»æ¥å¹³è¡¡æ¨¡å‹å¤æ‚åº¦å’Œé¢„æµ‹å‡†ç¡®æ€§ã€‚</p>
<h3 data-id="heading-6">1.6. Lassoå›å½’ (Lasso Regression)</h3>
<ul>
<li><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šå’Œå²­å›å½’ç±»ä¼¼ï¼Œä½†ä½¿ç”¨çš„æ˜¯L1æ­£åˆ™åŒ–ã€‚å®ƒä¸ä»…èƒ½é˜²æ­¢è¿‡æ‹Ÿåˆï¼Œè¿˜èƒ½æŠŠä¸é‡è¦çš„ç‰¹å¾ç³»æ•°å¼ºè¡Œå‹ç¼©ä¸º0ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šå½“ä½ æœ‰å¾ˆå¤šç‰¹å¾ï¼Œæƒ³è¦è‡ªåŠ¨ç­›é€‰å‡ºæœ€é‡è¦çš„å‡ ä¸ªç‰¹å¾æ—¶ã€‚</li>
</ul>
<hr/>
<p><strong>Lassoå›å½’</strong>æ¨¡å‹ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Lassoå›å½’ (Lasso Regression)</span>
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LinearRegression, Lasso
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> mean_squared_error
<span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> StandardScaler

<span class="hljs-comment"># 1. æ„é€ å¤šç‰¹å¾æµ‹è¯•æ•°æ®ï¼ˆå¤§éƒ¨åˆ†ç‰¹å¾ä¸é‡è¦ï¼‰</span>
np.random.seed(<span class="hljs-number">42</span>)  <span class="hljs-comment"># è®¾ç½®éšæœºç§å­ä»¥ç¡®ä¿ç»“æœå¯å¤ç°</span>

n_samples = <span class="hljs-number">100</span>
n_features = <span class="hljs-number">10</span>  <span class="hljs-comment"># æ€»å…±10ä¸ªç‰¹å¾</span>

<span class="hljs-comment"># ç”Ÿæˆ10ä¸ªç‰¹å¾ï¼Œå‰3ä¸ªæ˜¯çœŸæ­£é‡è¦çš„ï¼Œå7ä¸ªæ˜¯ä¸é‡è¦çš„</span>
X = np.random.randn(n_samples, n_features)

<span class="hljs-comment"># çœŸå®ç³»æ•°ï¼šå‰3ä¸ªç‰¹å¾æœ‰è¾ƒå¤§çš„éé›¶ç³»æ•°ï¼Œå7ä¸ªç‰¹å¾çš„ç³»æ•°ä¸º0</span>
true_coef = np.zeros(n_features)
true_coef[<span class="hljs-number">0</span>] = <span class="hljs-number">10.0</span>  <span class="hljs-comment"># é‡è¦ç‰¹å¾1</span>
true_coef[<span class="hljs-number">1</span>] = -<span class="hljs-number">8.0</span>  <span class="hljs-comment"># é‡è¦ç‰¹å¾2</span>
true_coef[<span class="hljs-number">2</span>] = <span class="hljs-number">5.0</span>  <span class="hljs-comment"># é‡è¦ç‰¹å¾3</span>

<span class="hljs-comment"># ç”Ÿæˆç›®æ ‡å˜é‡ï¼šY = X * çœŸå®ç³»æ•° + éšæœºå™ªå£°</span>
Y_true = X.dot(true_coef)
Y = Y_true + np.random.randn(n_samples) * <span class="hljs-number">5</span>  <span class="hljs-comment"># åŠ å…¥å™ªå£°</span>

<span class="hljs-comment"># 2. æ•°æ®æ ‡å‡†åŒ–ï¼ˆLassoå¯¹ç‰¹å¾ç¼©æ”¾æ•æ„Ÿï¼‰</span>
scaler = StandardScaler()
X_scaled = scaler.fit_transform(X)
Y_scaled = scaler.fit_transform(Y.reshape(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)).ravel()

<span class="hljs-comment"># 3. æ™®é€šçº¿æ€§å›å½’</span>
linear_model = LinearRegression()
linear_model.fit(X_scaled, Y_scaled)
Y_linear_pred = linear_model.predict(X_scaled)

<span class="hljs-comment"># 4. Lassoå›å½’ï¼ˆä¸åŒçš„æ­£åˆ™åŒ–å‚æ•°Î»ï¼‰</span>
lambdas = [<span class="hljs-number">0.01</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">5.0</span>]  <span class="hljs-comment"># ä¸åŒçš„Î»å€¼</span>
lasso_models = {}
lasso_preds = {}
lasso_coefs = []

<span class="hljs-keyword">for</span> lam <span class="hljs-keyword">in</span> lambdas:
    model = Lasso(alpha=lam, max_iter=<span class="hljs-number">10000</span>)  <span class="hljs-comment"># å¢åŠ æœ€å¤§è¿­ä»£æ¬¡æ•°é¿å…æ”¶æ•›è­¦å‘Š</span>
    model.fit(X_scaled, Y_scaled)
    lasso_models[lam] = model
    lasso_preds[lam] = model.predict(X_scaled)
    lasso_coefs.append(model.coef_)

<span class="hljs-comment"># 5. å¯è§†åŒ–ç»“æœ</span>
<span class="hljs-comment">#... çœç•¥ ...</span>

<span class="hljs-comment"># è®¡ç®—å¹¶æ¯”è¾ƒMSE</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== æ¨¡å‹æ€§èƒ½æ¯”è¾ƒ (MSE) ==="</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ™®é€šçº¿æ€§å›å½’ MSE: <span class="hljs-subst">{mean_squared_error(Y_scaled, Y_linear_pred):<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-keyword">for</span> lam <span class="hljs-keyword">in</span> lambdas:
    mse = mean_squared_error(Y_scaled, lasso_preds[lam])
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Lassoå›å½’ (Î»=<span class="hljs-subst">{lam}</span>) MSE: <span class="hljs-subst">{mse:<span class="hljs-number">.4</span>f}</span>"</span>)

<span class="hljs-comment">## è¿è¡Œç»“æœï¼š</span>
<span class="hljs-string">'''
=== æ¨¡å‹æ€§èƒ½æ¯”è¾ƒ (MSE) ===
æ™®é€šçº¿æ€§å›å½’ MSE: 0.1024
Lassoå›å½’ (Î»=0.01) MSE: 0.1034
Lassoå›å½’ (Î»=0.1) MSE: 0.1384
Lassoå›å½’ (Î»=0.5) MSE: 0.6845
Lassoå›å½’ (Î»=1.0) MSE: 1.0000
Lassoå›å½’ (Î»=5.0) MSE: 1.0000
'''</span>
</code></pre>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dbd8e137eeb04cf2ad932708c79820ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=CiMU%2F8DIGiSMpWqy%2BXgoY4NQDTU%3D" alt="" loading="lazy"/></p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d71e895654be48e9883e209f2da0f4d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=BbQMkpjzjjDTwIfZ%2BPW57qKey9k%3D" alt="" loading="lazy"/></p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d8c21a55a4b407f9c1eec47afea0f2a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=vhoke9bFTZ%2BFs3saBfLtuvSGoTg%3D" alt="" loading="lazy"/></p>
<p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼š</p>
<ul>
<li>éšç€Î»å¢å¤§ï¼Œè¶Šæ¥è¶Šå¤šçš„ç³»æ•°è¢«å‹ç¼©ä¸º0</li>
<li>Lassoèƒ½å¤Ÿè‡ªåŠ¨è¯†åˆ«å¹¶ä¿ç•™é‡è¦ç‰¹å¾ï¼ˆå‰3ä¸ªï¼‰</li>
<li>é€‚å½“çš„Î»å€¼å¯ä»¥åœ¨ä¿æŒé¢„æµ‹ç²¾åº¦çš„åŒæ—¶å®ç°ç‰¹å¾é€‰æ‹©</li>
</ul>
<p>è¿™ä¸ªç¤ºä¾‹å¾ˆå¥½åœ°å±•ç¤ºäº†<strong>Lassoå›å½’</strong>çš„ç‰¹å¾é€‰æ‹©èƒ½åŠ›ï¼Œéå¸¸é€‚åˆç”¨æˆ·æè¿°çš„ä½¿ç”¨åœºæ™¯ï¼ˆå½“æœ‰å¾ˆå¤šç‰¹å¾ï¼Œæƒ³è¦è‡ªåŠ¨ç­›é€‰å‡ºæœ€é‡è¦çš„å‡ ä¸ªç‰¹å¾æ—¶ï¼‰ã€‚</p>
<h3 data-id="heading-7">1.7. å¼¹æ€§ç½‘ç»œå›å½’ (Elastic Net Regression)</h3>
<ul>
<li><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šå²­å›å½’å’Œå¥—ç´¢å›å½’çš„â€œæ··è¡€å„¿â€ï¼Œç»“åˆäº†å®ƒä¿©çš„ä¼˜ç‚¹ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šç‰¹å¾éå¸¸å¤šä¸”å½¼æ­¤é«˜åº¦ç›¸å…³ï¼Œä½ æ—¢æƒ³é€‰ç‰¹å¾åˆæƒ³ä¿æŒæ¨¡å‹ç¨³å®šæ—¶ã€‚</li>
</ul>
<p><strong>å¼¹æ€§ç½‘ç»œå›å½’</strong>æ¨¡å‹ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¼¹æ€§ç½‘ç»œå›å½’ (Elastic Net Regression)</span>
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LinearRegression, Lasso, Ridge, ElasticNet
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> mean_squared_error
<span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> StandardScaler

<span class="hljs-comment"># 1. æ„é€ é«˜ç›¸å…³å¤šç‰¹å¾æµ‹è¯•æ•°æ®</span>
np.random.seed(<span class="hljs-number">42</span>)  <span class="hljs-comment"># è®¾ç½®éšæœºç§å­ä»¥ç¡®ä¿ç»“æœå¯å¤ç°</span>

n_samples = <span class="hljs-number">100</span>
n_features = <span class="hljs-number">10</span>  <span class="hljs-comment"># æ€»å…±10ä¸ªç‰¹å¾</span>

<span class="hljs-comment"># ç”ŸæˆåŸºç¡€ç‰¹å¾</span>
base_feature = np.random.randn(n_samples, <span class="hljs-number">1</span>)

<span class="hljs-comment"># ç”Ÿæˆé«˜åº¦ç›¸å…³çš„ç‰¹å¾ç»„</span>
<span class="hljs-comment"># å‰3ä¸ªç‰¹å¾é«˜åº¦ç›¸å…³ï¼ˆé‡è¦ç‰¹å¾ï¼‰</span>
X = np.zeros((n_samples, n_features))
X[:, <span class="hljs-number">0</span>] = base_feature.ravel() + np.random.randn(n_samples) * <span class="hljs-number">0.1</span>  <span class="hljs-comment"># ä¸»ç‰¹å¾1</span>
X[:, <span class="hljs-number">1</span>] = X[:, <span class="hljs-number">0</span>] * <span class="hljs-number">0.8</span> + np.random.randn(n_samples) * <span class="hljs-number">0.2</span>  <span class="hljs-comment"># ç›¸å…³ç‰¹å¾2</span>
X[:, <span class="hljs-number">2</span>] = X[:, <span class="hljs-number">0</span>] * <span class="hljs-number">0.5</span> + X[:, <span class="hljs-number">1</span>] * <span class="hljs-number">0.3</span> + np.random.randn(n_samples) * <span class="hljs-number">0.2</span>  <span class="hljs-comment"># ç›¸å…³ç‰¹å¾3</span>

<span class="hljs-comment"># ä¸­é—´3ä¸ªç‰¹å¾é«˜åº¦ç›¸å…³ä½†ä¸é‡è¦</span>
X[:, <span class="hljs-number">3</span>] = np.random.randn(n_samples) * <span class="hljs-number">0.3</span> + X[:, <span class="hljs-number">0</span>] * <span class="hljs-number">0.1</span>  <span class="hljs-comment"># å¼±ç›¸å…³ç‰¹å¾4</span>
X[:, <span class="hljs-number">4</span>] = X[:, <span class="hljs-number">3</span>] * <span class="hljs-number">0.7</span> + np.random.randn(n_samples) * <span class="hljs-number">0.2</span>  <span class="hljs-comment"># ç›¸å…³ç‰¹å¾5</span>
X[:, <span class="hljs-number">5</span>] = X[:, <span class="hljs-number">3</span>] * <span class="hljs-number">0.6</span> + X[:, <span class="hljs-number">4</span>] * <span class="hljs-number">0.4</span> + np.random.randn(n_samples) * <span class="hljs-number">0.2</span>  <span class="hljs-comment"># ç›¸å…³ç‰¹å¾6</span>

<span class="hljs-comment"># æœ€å4ä¸ªç‰¹å¾æ˜¯éšæœºå™ªå£°ï¼ˆå®Œå…¨ä¸é‡è¦ï¼‰</span>
X[:, <span class="hljs-number">6</span>:] = np.random.randn(n_samples, <span class="hljs-number">4</span>) * <span class="hljs-number">0.5</span>

<span class="hljs-comment"># çœŸå®ç³»æ•°ï¼šåªæœ‰å‰3ä¸ªé‡è¦ç‰¹å¾æœ‰éé›¶ç³»æ•°</span>
true_coef = np.zeros(n_features)
true_coef[<span class="hljs-number">0</span>] = <span class="hljs-number">10.0</span>
true_coef[<span class="hljs-number">1</span>] = -<span class="hljs-number">5.0</span>
true_coef[<span class="hljs-number">2</span>] = <span class="hljs-number">3.0</span>

<span class="hljs-comment"># ç”Ÿæˆç›®æ ‡å˜é‡</span>
Y_true = X.dot(true_coef)
Y = Y_true + np.random.randn(n_samples) * <span class="hljs-number">3</span>  <span class="hljs-comment"># åŠ å…¥å™ªå£°</span>

<span class="hljs-comment"># 2. æ•°æ®æ ‡å‡†åŒ–ï¼ˆæ­£åˆ™åŒ–æ¨¡å‹å¯¹ç‰¹å¾ç¼©æ”¾æ•æ„Ÿï¼‰</span>
scaler = StandardScaler()
X_scaled = scaler.fit_transform(X)
Y_scaled = scaler.fit_transform(Y.reshape(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)).ravel()

<span class="hljs-comment"># 3. è®­ç»ƒä¸åŒçš„å›å½’æ¨¡å‹</span>
<span class="hljs-comment"># æ™®é€šçº¿æ€§å›å½’</span>
linear_model = LinearRegression()
linear_model.fit(X_scaled, Y_scaled)

<span class="hljs-comment"># Lassoå›å½’ï¼ˆÎ»=0.1ï¼‰</span>
lasso_model = Lasso(alpha=<span class="hljs-number">0.1</span>, max_iter=<span class="hljs-number">10000</span>)
lasso_model.fit(X_scaled, Y_scaled)

<span class="hljs-comment"># Ridgeå›å½’ï¼ˆÎ»=1.0ï¼‰</span>
ridge_model = Ridge(alpha=<span class="hljs-number">1.0</span>)
ridge_model.fit(X_scaled, Y_scaled)

<span class="hljs-comment"># å¼¹æ€§ç½‘ç»œå›å½’ï¼ˆä¸åŒçš„l1_ratioï¼‰</span>
elastic_models = {}
l1_ratios = [<span class="hljs-number">0.1</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.9</span>]  <span class="hljs-comment"># æ§åˆ¶L1å’ŒL2çš„æ¯”ä¾‹</span>
alpha = <span class="hljs-number">1.0</span>  <span class="hljs-comment"># æ€»æ­£åˆ™åŒ–å¼ºåº¦</span>

<span class="hljs-keyword">for</span> ratio <span class="hljs-keyword">in</span> l1_ratios:
    model = ElasticNet(alpha=alpha, l1_ratio=ratio, max_iter=<span class="hljs-number">10000</span>)
    model.fit(X_scaled, Y_scaled)
    elastic_models[ratio] = model

<span class="hljs-comment"># 4. é¢„æµ‹</span>
Y_linear_pred = linear_model.predict(X_scaled)
Y_lasso_pred = lasso_model.predict(X_scaled)
Y_ridge_pred = ridge_model.predict(X_scaled)
Y_elastic_pred = {
    ratio: model.predict(X_scaled) <span class="hljs-keyword">for</span> ratio, model <span class="hljs-keyword">in</span> elastic_models.items()
}

<span class="hljs-comment"># 5. å¯è§†åŒ–ç»“æœ</span>
<span class="hljs-comment"># ... çœç•¥ ...</span>

<span class="hljs-comment"># 6. æ¨¡å‹è¯„ä¼°å’Œç‰¹å¾é€‰æ‹©æ•ˆæœ</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"=== æ¨¡å‹æ€§èƒ½è¯„ä¼° ==="</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ™®é€šçº¿æ€§å›å½’ MSE: <span class="hljs-subst">{mean_squared_error(Y_scaled, Y_linear_pred):<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Lassoå›å½’ MSE: <span class="hljs-subst">{mean_squared_error(Y_scaled, Y_lasso_pred):<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Ridgeå›å½’ MSE: <span class="hljs-subst">{mean_squared_error(Y_scaled, Y_ridge_pred):<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-keyword">for</span> ratio <span class="hljs-keyword">in</span> l1_ratios:
    mse = mean_squared_error(Y_scaled, Y_elastic_pred[ratio])
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¼¹æ€§ç½‘ç»œ (l1_ratio=<span class="hljs-subst">{ratio}</span>) MSE: <span class="hljs-subst">{mse:<span class="hljs-number">.4</span>f}</span>"</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== ç‰¹å¾é€‰æ‹©æ•ˆæœ ==="</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ™®é€šçº¿æ€§å›å½’éé›¶ç³»æ•°æ•°: <span class="hljs-subst">{np.<span class="hljs-built_in">sum</span>(linear_model.coef_ != <span class="hljs-number">0</span>)}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Lassoå›å½’éé›¶ç³»æ•°æ•°: <span class="hljs-subst">{np.<span class="hljs-built_in">sum</span>(lasso_model.coef_ != <span class="hljs-number">0</span>)}</span>"</span>)
<span class="hljs-built_in">print</span>(
    <span class="hljs-string">f"Ridgeå›å½’éé›¶ç³»æ•°æ•°: <span class="hljs-subst">{np.<span class="hljs-built_in">sum</span>(ridge_model.coef_ != <span class="hljs-number">0</span>)}</span>"</span>
)  <span class="hljs-comment"># Ridgeå‡ ä¹ä¸ä¼šäº§ç”Ÿä¸¥æ ¼é›¶ç³»æ•°</span>
<span class="hljs-keyword">for</span> ratio <span class="hljs-keyword">in</span> l1_ratios:
    non_zero_count = np.<span class="hljs-built_in">sum</span>(elastic_models[ratio].coef_ != <span class="hljs-number">0</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¼¹æ€§ç½‘ç»œ (l1_ratio=<span class="hljs-subst">{ratio}</span>) éé›¶ç³»æ•°æ•°: <span class="hljs-subst">{non_zero_count}</span>"</span>)

<span class="hljs-comment">## è¿è¡Œç»“æœï¼š</span>
<span class="hljs-string">'''
=== æ¨¡å‹æ€§èƒ½è¯„ä¼° ===
æ™®é€šçº¿æ€§å›å½’ MSE: 0.1352
Lassoå›å½’ MSE: 0.1677
Ridgeå›å½’ MSE: 0.1369
å¼¹æ€§ç½‘ç»œ (l1_ratio=0.1) MSE: 0.2676
å¼¹æ€§ç½‘ç»œ (l1_ratio=0.5) MSE: 0.5002
å¼¹æ€§ç½‘ç»œ (l1_ratio=0.9) MSE: 0.9711

=== ç‰¹å¾é€‰æ‹©æ•ˆæœ ===
æ™®é€šçº¿æ€§å›å½’éé›¶ç³»æ•°æ•°: 10
Lassoå›å½’éé›¶ç³»æ•°æ•°: 2
Ridgeå›å½’éé›¶ç³»æ•°æ•°: 10
å¼¹æ€§ç½‘ç»œ (l1_ratio=0.1) éé›¶ç³»æ•°æ•°: 3
å¼¹æ€§ç½‘ç»œ (l1_ratio=0.5) éé›¶ç³»æ•°æ•°: 3
å¼¹æ€§ç½‘ç»œ (l1_ratio=0.9) éé›¶ç³»æ•°æ•°: 1
'''</span>
</code></pre>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a49bb59bd4e4059965ee54007118c87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=F4YX9JYiLt2ylTydzedDEZyrdeM%3D" alt="" loading="lazy"/></p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bfc9b0e2c05b4616b7024b16cbc4cdec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=RjFHsn5J5rD1854fw9Ide0V38rQ%3D" alt="" loading="lazy"/></p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27891f2468cc448b8d85ef12bc779785~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=bKv2OndjFG6ZZlmQU2LQSlJ86Ms%3D" alt="" loading="lazy"/></p>
<p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼š</p>
<ul>
<li>å¼¹æ€§ç½‘ç»œç»“åˆäº†Lassoçš„ç‰¹å¾é€‰æ‹©èƒ½åŠ›å’ŒRidgeçš„ç¨³å®šæ€§</li>
<li>é€šè¿‡è°ƒæ•´l1_ratioï¼Œå¯ä»¥åœ¨ç‰¹å¾é€‰æ‹©å’Œç³»æ•°ç¨³å®šæ€§ä¹‹é—´æ‰¾åˆ°å¹³è¡¡</li>
<li>å½“ç‰¹å¾é«˜åº¦ç›¸å…³æ—¶ï¼Œå¼¹æ€§ç½‘ç»œæ¯”Lassoæ›´ç¨³å®šï¼Œæ¯”Ridgeæ›´èƒ½è¿›è¡Œç‰¹å¾é€‰æ‹©</li>
</ul>
<p>è¿™ä¸ªç¤ºä¾‹å¾ˆå¥½åœ°å±•ç¤ºäº†<strong>å¼¹æ€§ç½‘ç»œå›å½’</strong>åœ¨å¤„ç†<strong>é«˜ç»´</strong>ã€<strong>é«˜åº¦ç›¸å…³æ•°æ®</strong>æ—¶çš„ä¼˜åŠ¿ï¼Œç‰¹åˆ«é€‚åˆéœ€è¦åŒæ—¶è¿›è¡Œç‰¹å¾é€‰æ‹©å’Œä¿æŒæ¨¡å‹ç¨³å®šçš„åœºæ™¯ã€‚</p>
<h3 data-id="heading-8">1.8. ä¸»æˆåˆ†å›å½’ (PCR)</h3>
<ul>
<li><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šå…ˆç”¨PCAï¼ˆä¸»æˆåˆ†åˆ†æï¼‰æŠŠå¾ˆå¤šç›¸å…³çš„ç‰¹å¾å‹ç¼©æˆå‡ ä¸ªä¸ç›¸å…³çš„â€œä¸»æˆåˆ†â€ï¼Œå†ç”¨è¿™äº›ä¸»æˆåˆ†åšå›å½’ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šç‰¹å¾æ•°é‡æ¯”æ ·æœ¬æ•°é‡è¿˜å¤šï¼Œæˆ–è€…ç‰¹å¾ä¹‹é—´ä¸¥é‡ç›¸å…³ã€‚</li>
</ul>
<p><strong>ä¸»æˆåˆ†å›å½’</strong>æ¨¡å‹ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¸»æˆåˆ†å›å½’ (PCR)</span>
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LinearRegression
<span class="hljs-keyword">from</span> sklearn.decomposition <span class="hljs-keyword">import</span> PCA
<span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> StandardScaler
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> mean_squared_error

<span class="hljs-comment"># 1. æ„é€ é«˜ç»´é«˜ç›¸å…³æµ‹è¯•æ•°æ®ï¼ˆç‰¹å¾æ•°&gt;æ ·æœ¬æ•°ï¼‰</span>
np.random.seed(<span class="hljs-number">42</span>)  <span class="hljs-comment"># è®¾ç½®éšæœºç§å­ä»¥ç¡®ä¿ç»“æœå¯å¤ç°</span>

n_samples = <span class="hljs-number">100</span>
n_features = <span class="hljs-number">200</span>  <span class="hljs-comment"># ç‰¹å¾æ•°å¤šäºæ ·æœ¬æ•°ï¼Œæ¨¡æ‹Ÿé«˜ç»´é—®é¢˜</span>

<span class="hljs-comment"># ç”ŸæˆåŸºç¡€ç‰¹å¾ï¼ˆåªæœ‰3ä¸ªçœŸæ­£é‡è¦çš„åŸºç¡€å˜é‡ï¼‰</span>
base_features = np.random.randn(n_samples, <span class="hljs-number">3</span>)

<span class="hljs-comment"># ç”Ÿæˆ200ä¸ªé«˜åº¦ç›¸å…³çš„ç‰¹å¾</span>
<span class="hljs-comment"># æ¯ä¸ªæ–°ç‰¹å¾éƒ½æ˜¯3ä¸ªåŸºç¡€ç‰¹å¾çš„çº¿æ€§ç»„åˆ + å°‘é‡å™ªå£°</span>
X = np.zeros((n_samples, n_features))
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n_features):
    <span class="hljs-comment"># éšæœºæƒé‡ï¼ˆç¡®ä¿ç‰¹å¾ä¹‹é—´é«˜åº¦ç›¸å…³ï¼‰</span>
    weights = np.random.randn(<span class="hljs-number">3</span>)
    X[:, i] = base_features.dot(weights) + np.random.randn(n_samples) * <span class="hljs-number">0.1</span>

<span class="hljs-comment"># çœŸå®ç³»æ•°ï¼šåªæœ‰åŸºäºå‰3ä¸ªåŸºç¡€ç‰¹å¾çš„ç»„åˆæœ‰æ„ä¹‰</span>
<span class="hljs-comment"># æˆ‘ä»¬åªä½¿ç”¨å‰10ä¸ªç‰¹å¾æ¥ç”Ÿæˆç›®æ ‡å˜é‡</span>
true_weights = np.zeros(n_features)
true_weights[:<span class="hljs-number">10</span>] = np.random.randn(<span class="hljs-number">10</span>) * <span class="hljs-number">2</span>

<span class="hljs-comment"># ç”Ÿæˆç›®æ ‡å˜é‡</span>
Y_true = X.dot(true_weights)
Y = Y_true + np.random.randn(n_samples) * <span class="hljs-number">5</span>  <span class="hljs-comment"># åŠ å…¥å™ªå£°</span>

<span class="hljs-comment"># 2. æ•°æ®æ ‡å‡†åŒ–</span>
scaler = StandardScaler()
X_scaled = scaler.fit_transform(X)
Y_scaled = scaler.fit_transform(Y.reshape(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)).ravel()

<span class="hljs-comment"># 3. æ™®é€šçº¿æ€§å›å½’ï¼ˆå¯èƒ½è¿‡æ‹Ÿåˆï¼‰</span>
linear_model = LinearRegression()
linear_model.fit(X_scaled, Y_scaled)
Y_linear_pred = linear_model.predict(X_scaled)
linear_mse = mean_squared_error(Y_scaled, Y_linear_pred)

<span class="hljs-comment"># 4. ä¸»æˆåˆ†å›å½’ (PCR)</span>
<span class="hljs-comment"># 4.1 PCAé™ç»´</span>
pca = PCA()
X_pca = pca.fit_transform(X_scaled)

<span class="hljs-comment"># 4.2 è®¡ç®—ç´¯ç§¯æ–¹å·®è§£é‡Šç‡</span>
explained_variance_ratio = pca.explained_variance_ratio_
cumulative_variance_ratio = np.cumsum(explained_variance_ratio)

<span class="hljs-comment"># 4.3 é€‰æ‹©ä¿ç•™çš„ä¸»æˆåˆ†æ•°é‡ï¼ˆæ¯”å¦‚ä¿ç•™95%æ–¹å·®ï¼‰</span>
n_components_95 = np.argmax(cumulative_variance_ratio &gt;= <span class="hljs-number">0.95</span>) + <span class="hljs-number">1</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¿ç•™95%æ–¹å·®éœ€è¦çš„ä¸»æˆåˆ†æ•°: <span class="hljs-subst">{n_components_95}</span>"</span>)

<span class="hljs-comment"># 4.4 ä½¿ç”¨ä¸åŒæ•°é‡çš„ä¸»æˆåˆ†è¿›è¡Œå›å½’</span>
n_components_list = [<span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">20</span>, n_components_95]
pcr_results = {}

<span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> n_components_list:
    <span class="hljs-comment"># ä½¿ç”¨å‰nä¸ªä¸»æˆåˆ†</span>
    X_pca_n = X_pca[:, :n]

    <span class="hljs-comment"># çº¿æ€§å›å½’</span>
    model = LinearRegression()
    model.fit(X_pca_n, Y_scaled)

    <span class="hljs-comment"># é¢„æµ‹</span>
    Y_pcr_pred = model.predict(X_pca_n)
    mse = mean_squared_error(Y_scaled, Y_pcr_pred)

    pcr_results[n] = {
        <span class="hljs-string">'model'</span>: model,
        <span class="hljs-string">'predictions'</span>: Y_pcr_pred,
        <span class="hljs-string">'mse'</span>: mse
    }

<span class="hljs-comment"># 5. å¯è§†åŒ–ç»“æœ</span>
<span class="hljs-comment"># ... çœç•¥ ...</span>

<span class="hljs-comment"># 6. æ¨¡å‹æ€§èƒ½å¯¹æ¯”</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== æ¨¡å‹æ€§èƒ½å¯¹æ¯” ==="</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ™®é€šçº¿æ€§å›å½’ MSE: <span class="hljs-subst">{linear_mse:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> n_components_list:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"PCR (n=<span class="hljs-subst">{n}</span>) MSE: <span class="hljs-subst">{pcr_results[n][<span class="hljs-string">'mse'</span>]:<span class="hljs-number">.4</span>f}</span>"</span>)

<span class="hljs-comment"># 7. å±•ç¤ºPCRå¦‚ä½•è§£å†³è¿‡æ‹Ÿåˆ</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== PCRè§£å†³è¿‡æ‹Ÿåˆæ•ˆæœ ==="</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åŸå§‹ç‰¹å¾æ•°é‡: <span class="hljs-subst">{n_features}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ ·æœ¬æ•°é‡: <span class="hljs-subst">{n_samples}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ™®é€šå›å½’çš„ç‰¹å¾ç³»æ•°æœ€å¤§å€¼: <span class="hljs-subst">{np.<span class="hljs-built_in">max</span>(np.<span class="hljs-built_in">abs</span>(linear_model.coef_)):<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"PCR (n=<span class="hljs-subst">{n_components_95}</span>) çš„ç‰¹å¾ç³»æ•°æœ€å¤§å€¼: <span class="hljs-subst">{np.<span class="hljs-built_in">max</span>(np.<span class="hljs-built_in">abs</span>(pcr_coef)):<span class="hljs-number">.4</span>f}</span>"</span>)

<span class="hljs-comment">## è¿è¡Œç»“æœï¼š</span>
<span class="hljs-string">'''
=== æ¨¡å‹æ€§èƒ½å¯¹æ¯” ===
æ™®é€šçº¿æ€§å›å½’ MSE: 0.0000
PCR (n=3) MSE: 0.5484
PCR (n=5) MSE: 0.5187
PCR (n=10) MSE: 0.4777
PCR (n=20) MSE: 0.4040
PCR (n=3) MSE: 0.5484

=== PCRè§£å†³è¿‡æ‹Ÿåˆæ•ˆæœ ===
åŸå§‹ç‰¹å¾æ•°é‡: 200
æ ·æœ¬æ•°é‡: 100
æ™®é€šå›å½’çš„ç‰¹å¾ç³»æ•°æœ€å¤§å€¼: 2.1407
PCR (n=3) çš„ç‰¹å¾ç³»æ•°æœ€å¤§å€¼: 0.0101
'''</span>
</code></pre>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f060ca66690647f59403c45103da475e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=D%2B8f727JPs6dCXxvUsiajjjX9SI%3D" alt="" loading="lazy"/></p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2603b2a86c994e679951173f04382859~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=tgiFrXmj9XTReusbLuPa1ptqo4k%3D" alt="" loading="lazy"/></p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a09b48d38cb4bfbadff15318ecac598~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=429MbW%2BemTpiuaEWWnFBLDsC5eQ%3D" alt="" loading="lazy"/></p>
<p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼š</p>
<ul>
<li>åªéœ€å°‘é‡ä¸»æˆåˆ†ï¼ˆé€šå¸¸&lt;30ï¼‰å³å¯ä¿ç•™95%ä»¥ä¸Šçš„æ–¹å·®</li>
<li>PCRçš„é¢„æµ‹æ•ˆæœä¼˜äºç›´æ¥çº¿æ€§å›å½’ï¼Œå°¤å…¶æ˜¯åœ¨é«˜ç»´æ•°æ®ä¸­</li>
<li>PCRçš„ç³»æ•°æ›´åŠ ç¨³å®šï¼Œé¿å…äº†æ™®é€šå›å½’ä¸­ç³»æ•°è¿‡å¤§çš„é—®é¢˜</li>
</ul>
<p>è¿™ä¸ªç¤ºä¾‹å®Œç¾å±•ç¤ºäº†<code>PCR</code>åœ¨<strong>é«˜ç»´</strong>ã€<strong>é«˜åº¦ç›¸å…³æ•°æ®</strong>ä¸­çš„åº”ç”¨ï¼Œè§£å†³äº†ç›´æ¥çº¿æ€§å›å½’çš„è¿‡æ‹Ÿåˆé—®é¢˜ï¼ŒåŒæ—¶ä¿æŒäº†è‰¯å¥½çš„é¢„æµ‹æ€§èƒ½ã€‚</p>
<h3 data-id="heading-9">1.9. åæœ€å°äºŒä¹˜å›å½’ (PLS Regression)</h3>
<ul>
<li><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šå’ŒPCRç±»ä¼¼ï¼Œä½†å®ƒåœ¨é™ç»´æ—¶ä¼šè€ƒè™‘å› å˜é‡Yçš„ä¿¡æ¯ï¼Œç¡®ä¿æå–å‡ºçš„æˆåˆ†ä¸ä»…èƒ½æ¦‚æ‹¬Xï¼Œè¿˜èƒ½å¾ˆå¥½åœ°é¢„æµ‹Yã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šæ¯”PCRæ›´é«˜çº§ä¸€ç‚¹ï¼Œå¸¸ç”¨äºåŒ–å­¦è®¡é‡å­¦æˆ–å˜é‡éå¸¸å¤šçš„æƒ…å†µã€‚</li>
</ul>
<p><strong>åæœ€å°äºŒä¹˜å›å½’</strong>æ¨¡å‹ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åæœ€å°äºŒä¹˜å›å½’ (PLS Regression)</span>
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LinearRegression
<span class="hljs-keyword">from</span> sklearn.decomposition <span class="hljs-keyword">import</span> PCA
<span class="hljs-keyword">from</span> sklearn.cross_decomposition <span class="hljs-keyword">import</span> PLSRegression
<span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> StandardScaler
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> mean_squared_error

<span class="hljs-comment"># 1. æ„é€ é«˜ç»´ç›¸å…³æ•°æ®ï¼Œå…¶ä¸­åªæœ‰éƒ¨åˆ†ç‰¹å¾ä¸Yç›¸å…³</span>
np.random.seed(<span class="hljs-number">42</span>)  <span class="hljs-comment"># è®¾ç½®éšæœºç§å­ä»¥ç¡®ä¿ç»“æœå¯å¤ç°</span>

n_samples = <span class="hljs-number">100</span>
n_features = <span class="hljs-number">100</span>  <span class="hljs-comment"># 100ä¸ªç‰¹å¾ï¼Œæ¨¡æ‹Ÿé«˜ç»´é—®é¢˜</span>

<span class="hljs-comment"># ç”ŸæˆåŸºç¡€å˜é‡</span>
<span class="hljs-comment"># å‰5ä¸ªå˜é‡ä¸Yé«˜åº¦ç›¸å…³ï¼Œä¸­é—´15ä¸ªå˜é‡ä¸Yå¼±ç›¸å…³ï¼Œæœ€å80ä¸ªå˜é‡ä¸Yä¸ç›¸å…³</span>
base_vars = np.random.randn(n_samples, <span class="hljs-number">20</span>)
noise_vars = np.random.randn(n_samples, <span class="hljs-number">80</span>)  <span class="hljs-comment"># å®Œå…¨ä¸ç›¸å…³çš„å™ªå£°ç‰¹å¾</span>

<span class="hljs-comment"># ç»„åˆæ‰€æœ‰ç‰¹å¾</span>
X = np.hstack([base_vars, noise_vars])

<span class="hljs-comment"># ç”ŸæˆYï¼Œä¸»è¦ä¾èµ–å‰5ä¸ªåŸºç¡€å˜é‡</span>
Y_true = (
    <span class="hljs-number">5</span> * base_vars[:, <span class="hljs-number">0</span>]
    + <span class="hljs-number">3</span> * base_vars[:, <span class="hljs-number">1</span>]
    - <span class="hljs-number">4</span> * base_vars[:, <span class="hljs-number">2</span>]
    + <span class="hljs-number">2</span> * base_vars[:, <span class="hljs-number">3</span>]
    + base_vars[:, <span class="hljs-number">4</span>]
)
Y = Y_true + np.random.randn(n_samples) * <span class="hljs-number">3</span>  <span class="hljs-comment"># åŠ å…¥å™ªå£°</span>

<span class="hljs-comment"># 2. æ•°æ®æ ‡å‡†åŒ–</span>
scaler = StandardScaler()
X_scaled = scaler.fit_transform(X)
Y_scaled = scaler.fit_transform(Y.reshape(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)).ravel()

<span class="hljs-comment"># 3. æ™®é€šçº¿æ€§å›å½’ï¼ˆä½œä¸ºåŸºå‡†ï¼‰</span>
linear_model = LinearRegression()
linear_model.fit(X_scaled, Y_scaled)
Y_linear_pred = linear_model.predict(X_scaled)
linear_mse = mean_squared_error(Y_scaled, Y_linear_pred)

<span class="hljs-comment"># 4. PCA + çº¿æ€§å›å½’ (PCR)</span>
pca = PCA()
X_pca = pca.fit_transform(X_scaled)

<span class="hljs-comment"># 5. åæœ€å°äºŒä¹˜å›å½’ (PLS)</span>
pls = PLSRegression(n_components=<span class="hljs-number">20</span>)
X_pls = pls.fit_transform(X_scaled, Y_scaled)[<span class="hljs-number">0</span>]

<span class="hljs-comment"># 6. æ¯”è¾ƒä¸åŒæˆåˆ†æ•°é‡çš„PCRå’ŒPLSæ€§èƒ½</span>
n_components_list = <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">21</span>)
pcr_mse_list = []
pls_mse_list = []

<span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> n_components_list:
    <span class="hljs-comment"># PCR</span>
    model_pcr = LinearRegression()
    model_pcr.fit(X_pca[:, :n], Y_scaled)
    Y_pcr_pred = model_pcr.predict(X_pca[:, :n])
    pcr_mse_list.append(mean_squared_error(Y_scaled, Y_pcr_pred))

    <span class="hljs-comment"># PLS</span>
    model_pls = PLSRegression(n_components=n)
    model_pls.fit(X_scaled, Y_scaled)
    Y_pls_pred = model_pls.predict(X_scaled).ravel()
    pls_mse_list.append(mean_squared_error(Y_scaled, Y_pls_pred))

<span class="hljs-comment"># 7. å¯è§†åŒ–ç»“æœ</span>
<span class="hljs-comment"># ... çœç•¥ ...</span>

<span class="hljs-comment"># è¾“å‡ºç»“æœ</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== æ¨¡å‹æ€§èƒ½å¯¹æ¯” ==="</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ™®é€šçº¿æ€§å›å½’ MSE: <span class="hljs-subst">{linear_mse:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœ€ä½³PCR (n=<span class="hljs-subst">{best_pcr_n}</span>) MSE: <span class="hljs-subst">{pcr_mse_list[best_pcr_n-<span class="hljs-number">1</span>]:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœ€ä½³PLS (n=<span class="hljs-subst">{best_pls_n}</span>) MSE: <span class="hljs-subst">{pls_mse_list[best_pls_n-<span class="hljs-number">1</span>]:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(
    <span class="hljs-string">f"PLSç›¸æ¯”æœ€ä½³PCRçš„MSEæå‡: <span class="hljs-subst">{(pcr_mse_list[best_pcr_n-<span class="hljs-number">1</span>] - pls_mse_list[best_pls_n-<span class="hljs-number">1</span>])/pcr_mse_list[best_pcr_n-<span class="hljs-number">1</span>]*<span class="hljs-number">100</span>:<span class="hljs-number">.1</span>f}</span>%"</span>
)

<span class="hljs-comment"># å±•ç¤ºPLSå¦‚ä½•æå–ä¸Yç›¸å…³çš„æˆåˆ†</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== PLSæˆåˆ†åˆ†æ ==="</span>)
pls_var_importance = np.<span class="hljs-built_in">abs</span>(pls.x_weights_).<span class="hljs-built_in">sum</span>(axis=<span class="hljs-number">1</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"PLSå‰5ä¸ªæœ€é‡è¦æˆåˆ†çš„æ–¹å·®è´¡çŒ®: <span class="hljs-subst">{np.sort(pls_var_importance)[::-<span class="hljs-number">1</span>][:<span class="hljs-number">5</span>]}</span>"</span>)

<span class="hljs-comment">## è¿è¡Œç»“æœï¼š</span>
<span class="hljs-string">'''
=== æ¨¡å‹æ€§èƒ½å¯¹æ¯” ===
æ™®é€šçº¿æ€§å›å½’ MSE: 0.0000
æœ€ä½³PCR (n=20) MSE: 0.6687
æœ€ä½³PLS (n=20) MSE: 0.0048
PLSç›¸æ¯”æœ€ä½³PCRçš„MSEæå‡: 99.3%

=== PLSæˆåˆ†åˆ†æ ===
PLSå‰5ä¸ªæœ€é‡è¦æˆåˆ†çš„æ–¹å·®è´¡çŒ®: [2.4938574  2.27964709 2.17888686 2.08667187 2.06267069]
'''</span>
</code></pre>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8dab70f652de45cda019d209a95ed6c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=2KDzJsPrNYaO1rToq4HpNQ7oyx0%3D" alt="" loading="lazy"/></p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/317e354d6b9c44a68fad9dd7db9653f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=sCPOTDVAoVy84zugBjbrA4vXvj8%3D" alt="" loading="lazy"/></p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d302b7a3f39043558a513b133b183c8e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=dLWzbKrnzaUOgp4ItLL6OnwH1pk%3D" alt="" loading="lazy"/></p>
<p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼š</p>
<ul>
<li>PLSåœ¨è¾ƒå°‘çš„æˆåˆ†æ•°ä¸‹å°±èƒ½è¾¾åˆ°è¾ƒå¥½çš„é¢„æµ‹æ•ˆæœ</li>
<li>PLSæå–çš„æˆåˆ†ä¸Yçš„ç›¸å…³æ€§æ˜æ˜¾é«˜äºPCAæˆåˆ†</li>
<li>å½“å­˜åœ¨å¤§é‡å™ªå£°ç‰¹å¾æ—¶ï¼ŒPLSçš„ä¼˜åŠ¿æ›´åŠ æ˜æ˜¾</li>
</ul>
<p>è¿™ä¸ªç¤ºä¾‹æ¸…æ™°åœ°å±•ç¤ºäº†<strong>PLSå›å½’</strong>å¦‚ä½•åœ¨é™ç»´è¿‡ç¨‹ä¸­è€ƒè™‘å› å˜é‡Yçš„ä¿¡æ¯ï¼Œä»è€Œåœ¨é«˜ç»´ã€å­˜åœ¨å™ªå£°çš„æƒ…å†µä¸‹æä¾›æ¯”PCRæ›´å¥½çš„é¢„æµ‹æ€§èƒ½ã€‚</p>
<h3 data-id="heading-10">1.10. æ”¯æŒå‘é‡å›å½’ (SVR)</h3>
<ul>
<li><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šå€Ÿç”¨äº†SVMåˆ†ç±»çš„æ€æƒ³ï¼Œè¯•å›¾æ‰¾åˆ°ä¸€ä¸ªâ€œç®¡é“â€åŒ…è£¹ä½å°½å¯èƒ½å¤šçš„æ•°æ®ç‚¹ï¼Œåœ¨ç®¡é“å†…çš„è¯¯å·®è¢«å¿½ç•¥ï¼Œåªè®¡ç®—ç®¡é“å¤–çš„è¯¯å·®ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šé«˜ç»´æ•°æ®ï¼Œæˆ–è€…æ•°æ®å…³ç³»éå¸¸å¤æ‚éçº¿æ€§æ—¶ï¼ˆé…åˆæ ¸å‡½æ•°ï¼‰ã€‚</li>
</ul>
<p><strong>æ”¯æŒå‘é‡å›å½’</strong>æ¨¡å‹ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ”¯æŒå‘é‡å›å½’ (SVR)</span>
<span class="hljs-keyword">from</span> sklearn.svm <span class="hljs-keyword">import</span> SVR
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LinearRegression
<span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> StandardScaler
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> mean_squared_error

<span class="hljs-comment"># 1. æ„é€ å¤æ‚éçº¿æ€§æµ‹è¯•æ•°æ®</span>
np.random.seed(<span class="hljs-number">42</span>)  <span class="hljs-comment"># è®¾ç½®éšæœºç§å­ä»¥ç¡®ä¿ç»“æœå¯å¤ç°</span>

<span class="hljs-comment"># ç”ŸæˆåŸºç¡€è‡ªå˜é‡ï¼ˆåœ¨0-10èŒƒå›´å†…ï¼‰</span>
X = np.sort(np.random.rand(<span class="hljs-number">100</span>, <span class="hljs-number">1</span>) * <span class="hljs-number">10</span>, axis=<span class="hljs-number">0</span>)

<span class="hljs-comment"># ç”Ÿæˆå¤æ‚çš„éçº¿æ€§ç›®æ ‡å˜é‡ï¼šæ­£å¼¦å‡½æ•° + å¤šé¡¹å¼ + å™ªå£°</span>
<span class="hljs-comment"># è¿™ç§éçº¿æ€§å…³ç³»å¾ˆéš¾ç”¨æ™®é€šçº¿æ€§å›å½’æ‹Ÿåˆ</span>
Y_true = np.sin(<span class="hljs-number">2</span> * X) + <span class="hljs-number">0.5</span> * X + <span class="hljs-number">0.2</span> * X**<span class="hljs-number">2</span>
Y = Y_true + np.random.randn(<span class="hljs-number">100</span>, <span class="hljs-number">1</span>) * <span class="hljs-number">0.5</span>  <span class="hljs-comment"># åŠ å…¥å™ªå£°</span>

<span class="hljs-comment"># 2. æ•°æ®æ ‡å‡†åŒ–</span>
scaler_X = StandardScaler()
scaler_Y = StandardScaler()

X_scaled = scaler_X.fit_transform(X)
Y_scaled = scaler_Y.fit_transform(Y)

<span class="hljs-comment"># 3. æ¨¡å‹è®­ç»ƒ</span>

<span class="hljs-comment"># æ™®é€šçº¿æ€§å›å½’ï¼ˆä½œä¸ºåŸºå‡†ï¼‰</span>
linear_model = LinearRegression()
linear_model.fit(X_scaled, Y_scaled)
Y_linear_pred_scaled = linear_model.predict(X_scaled)
Y_linear_pred = scaler_Y.inverse_transform(Y_linear_pred_scaled)

<span class="hljs-comment"># æ”¯æŒå‘é‡å›å½’ (SVR)</span>
<span class="hljs-comment"># çº¿æ€§æ ¸SVR</span>
svr_linear = SVR(kernel=<span class="hljs-string">"linear"</span>, C=<span class="hljs-number">100</span>, epsilon=<span class="hljs-number">0.1</span>)
svr_linear.fit(X_scaled, Y_scaled.ravel())
Y_svr_linear_pred_scaled = svr_linear.predict(X_scaled)
Y_svr_linear_pred = scaler_Y.inverse_transform(Y_svr_linear_pred_scaled.reshape(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>))

<span class="hljs-comment"># RBFæ ¸SVRï¼ˆéçº¿æ€§ï¼‰</span>
svr_rbf_1 = SVR(kernel=<span class="hljs-string">"rbf"</span>, C=<span class="hljs-number">100</span>, epsilon=<span class="hljs-number">0.1</span>, gamma=<span class="hljs-number">0.1</span>)
svr_rbf_1.fit(X_scaled, Y_scaled.ravel())
Y_svr_rbf_1_pred_scaled = svr_rbf_1.predict(X_scaled)
Y_svr_rbf_1_pred = scaler_Y.inverse_transform(Y_svr_rbf_1_pred_scaled.reshape(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>))

<span class="hljs-comment"># ä¸åŒÎµå€¼çš„RBFæ ¸SVR</span>
svr_rbf_2 = SVR(kernel=<span class="hljs-string">"rbf"</span>, C=<span class="hljs-number">100</span>, epsilon=<span class="hljs-number">0.5</span>, gamma=<span class="hljs-number">0.1</span>)
svr_rbf_2.fit(X_scaled, Y_scaled.ravel())
Y_svr_rbf_2_pred_scaled = svr_rbf_2.predict(X_scaled)
Y_svr_rbf_2_pred = scaler_Y.inverse_transform(Y_svr_rbf_2_pred_scaled.reshape(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>))

<span class="hljs-comment"># 4. è®¡ç®—æ¨¡å‹æ€§èƒ½</span>
mse_linear = mean_squared_error(Y, Y_linear_pred)
mse_svr_linear = mean_squared_error(Y, Y_svr_linear_pred)
mse_svr_rbf_1 = mean_squared_error(Y, Y_svr_rbf_1_pred)
mse_svr_rbf_2 = mean_squared_error(Y, Y_svr_rbf_2_pred)

<span class="hljs-comment"># 5. å¯è§†åŒ–ç»“æœ</span>
<span class="hljs-comment"># ... çœç•¥ ...</span>

<span class="hljs-comment"># 4. è¾“å‡ºæ¨¡å‹æ€§èƒ½</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n=== æ¨¡å‹æ€§èƒ½å¯¹æ¯” ==="</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ™®é€šçº¿æ€§å›å½’ MSE: <span class="hljs-subst">{mse_linear:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"çº¿æ€§æ ¸SVR MSE: <span class="hljs-subst">{mse_svr_linear:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"RBFæ ¸SVR (Îµ=0.1) MSE: <span class="hljs-subst">{mse_svr_rbf_1:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"RBFæ ¸SVR (Îµ=0.5) MSE: <span class="hljs-subst">{mse_svr_rbf_2:<span class="hljs-number">.4</span>f}</span>"</span>)

<span class="hljs-comment"># å±•ç¤ºæ”¯æŒå‘é‡</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n=== SVRæ”¯æŒå‘é‡ä¿¡æ¯ ==="</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"RBFæ ¸SVR (Îµ=0.1) ä½¿ç”¨çš„æ”¯æŒå‘é‡æ•°é‡: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(svr_rbf_1.support_)}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"çº¿æ€§æ ¸SVR ä½¿ç”¨çš„æ”¯æŒå‘é‡æ•°é‡: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(svr_linear.support_)}</span>"</span>)

<span class="hljs-comment">## è¿è¡Œç»“æœï¼š</span>
<span class="hljs-string">'''
=== æ¨¡å‹æ€§èƒ½å¯¹æ¯” ===
æ™®é€šçº¿æ€§å›å½’ MSE: 3.3016
çº¿æ€§æ ¸SVR MSE: 3.3938
RBFæ ¸SVR (Îµ=0.1) MSE: 0.6200
RBFæ ¸SVR (Îµ=0.5) MSE: 4.7397

=== SVRæ”¯æŒå‘é‡ä¿¡æ¯ ===
RBFæ ¸SVR (Îµ=0.1) ä½¿ç”¨çš„æ”¯æŒå‘é‡æ•°é‡: 42
çº¿æ€§æ ¸SVR ä½¿ç”¨çš„æ”¯æŒå‘é‡æ•°é‡: 70
'''</span>
</code></pre>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/830e1736a5844a9f9dc831b37028df22~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=W1AJW8cFoN0309ZaWvBR1PWGBPw%3D" alt="" loading="lazy"/></p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e994f6523399446b9d043c24d90c8e21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=oApaLRS8L%2FEv5BPdPAcudgYGD24%3D" alt="" loading="lazy"/></p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08a0da62599642dc92eec478630292fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=i2qDvPT4MRNmobJZxDWRyaptPLA%3D" alt="" loading="lazy"/></p>
<p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼š</p>
<ul>
<li>RBFæ ¸SVRèƒ½å¤Ÿå¾ˆå¥½åœ°æ‹Ÿåˆå¤æ‚éçº¿æ€§å…³ç³»</li>
<li>è°ƒæ•´Îµå¯ä»¥æ§åˆ¶æ¨¡å‹å¯¹è¯¯å·®çš„å®¹å¿åº¦</li>
<li>è°ƒæ•´Cå¯ä»¥å¹³è¡¡æ¨¡å‹å¤æ‚åº¦å’Œå¯¹å¼‚å¸¸å€¼çš„æ•æ„Ÿåº¦</li>
<li>SVRåªä½¿ç”¨éƒ¨åˆ†æ•°æ®ç‚¹ï¼ˆæ”¯æŒå‘é‡ï¼‰è¿›è¡Œé¢„æµ‹</li>
</ul>
<p>è¿™ä¸ªç¤ºä¾‹å®Œç¾å±•ç¤ºäº†<code>SVR</code>åœ¨å¤„ç†å¤æ‚éçº¿æ€§æ•°æ®æ—¶çš„ä¼˜åŠ¿ï¼Œç‰¹åˆ«æ˜¯å…¶ç‹¬ç‰¹çš„Îµ-ä¸æ•æ„ŸæŸå¤±å‡½æ•°å’Œæ ¸å‡½æ•°æœºåˆ¶ã€‚</p>
<h3 data-id="heading-11">1.11. æœ‰åºå›å½’ (Ordinal Regression)</h3>
<ul>
<li><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šé¢„æµ‹çš„ç»“æœæ˜¯æœ‰é¡ºåºçš„ç±»åˆ«ï¼Œæ¯”å¦‚â€œä½ã€ä¸­ã€é«˜â€æˆ–è€…â€œä¸å–œæ¬¢ã€ä¸€èˆ¬ã€å–œæ¬¢â€ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šé—®å·è°ƒæŸ¥è¯„åˆ†ï¼ˆ1-5åˆ†ï¼‰ã€ç”µå½±è¯„çº§ã€ç–¾ç—…ä¸¥é‡ç¨‹åº¦åˆ†çº§ã€‚</li>
</ul>
<p><strong>æœ‰åºå›å½’</strong>æ¨¡å‹ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æœ‰åºå›å½’ (Ordinal Regression)</span>
<span class="hljs-keyword">import</span> statsmodels.api <span class="hljs-keyword">as</span> sm
<span class="hljs-keyword">from</span> statsmodels.miscmodels.ordinal_model <span class="hljs-keyword">import</span> OrderedModel

<span class="hljs-comment"># 1. æ„é€ æµ‹è¯•æ•°æ®</span>
np.random.seed(<span class="hljs-number">42</span>)
n_samples = <span class="hljs-number">500</span>

<span class="hljs-comment"># ç‰¹å¾ï¼šå¹´é¾„ï¼ˆ0-70å²ï¼‰å’Œè´­ä¹°é‡‘é¢ï¼ˆ0-100å…ƒï¼‰</span>
age = np.random.uniform(<span class="hljs-number">0</span>, <span class="hljs-number">70</span>, n_samples)
purchase = np.random.uniform(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>, n_samples)

<span class="hljs-comment"># çœŸå®ç³»æ•°ï¼šè´­ä¹°é‡‘é¢å¯¹æ»¡æ„åº¦å½±å“æ›´å¤§</span>
beta_age = <span class="hljs-number">0.03</span>  <span class="hljs-comment"># å¹´é¾„ç³»æ•°</span>
beta_purchase = <span class="hljs-number">0.08</span>  <span class="hljs-comment"># è´­ä¹°é‡‘é¢ç³»æ•°</span>
intercept = -<span class="hljs-number">2.0</span>  <span class="hljs-comment"># åŸºå‡†æˆªè·</span>

<span class="hljs-comment"># æ½œåœ¨å˜é‡ï¼ˆè¿ç»­å€¼ï¼Œç”¨äºç”Ÿæˆæœ‰åºç±»åˆ«ï¼‰</span>
latent = (
    intercept
    + beta_age * age
    + beta_purchase * purchase
    + np.random.normal(<span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>, n_samples)
)

<span class="hljs-comment"># ä½¿ç”¨åˆ†ä½æ•°åˆ›å»º5ä¸ªå‡è¡¡çš„æœ‰åºç±»åˆ«ï¼ˆ1-5åˆ†æ»¡æ„åº¦ï¼‰</span>
thresholds = np.percentile(latent, [<span class="hljs-number">20</span>, <span class="hljs-number">40</span>, <span class="hljs-number">60</span>, <span class="hljs-number">80</span>])
satisfaction = np.digitize(latent, thresholds, right=<span class="hljs-literal">False</span>) + <span class="hljs-number">1</span>  <span class="hljs-comment"># ç±»åˆ«ï¼š1-5</span>

<span class="hljs-comment"># åˆ›å»ºDataFrame</span>
df = pd.DataFrame({<span class="hljs-string">"age"</span>: age, <span class="hljs-string">"purchase"</span>: purchase, <span class="hljs-string">"satisfaction"</span>: satisfaction})

<span class="hljs-comment"># 2. æ‹Ÿåˆæœ‰åºå›å½’æ¨¡å‹</span>
model = OrderedModel(
    df[<span class="hljs-string">"satisfaction"</span>], df[[<span class="hljs-string">"age"</span>, <span class="hljs-string">"purchase"</span>]], distr=<span class="hljs-string">"logit"</span>  <span class="hljs-comment"># é€»è¾‘æ–¯è’‚é“¾æ¥å‡½æ•°</span>
)

result = model.fit(method=<span class="hljs-string">"bfgs"</span>)  <span class="hljs-comment"># ä½¿ç”¨BFGSä¼˜åŒ–ç®—æ³•</span>

<span class="hljs-comment"># 3. ç”Ÿæˆé¢„æµ‹</span>
pred_probs = result.predict(df[[<span class="hljs-string">"age"</span>, <span class="hljs-string">"purchase"</span>]])
predicted = pred_probs.idxmax(axis=<span class="hljs-number">1</span>).astype(<span class="hljs-built_in">int</span>)  <span class="hljs-comment"># é¢„æµ‹çš„ç±»åˆ«ï¼ˆæ¦‚ç‡æœ€é«˜çš„ï¼‰</span>

<span class="hljs-comment"># 4. å¯è§†åŒ–ç»“æœ</span>
<span class="hljs-comment"># ... çœç•¥ ...</span>

<span class="hljs-comment"># 5. æ¨¡å‹è§£é‡Š</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ¨¡å‹ç³»æ•°è§£é‡Š:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¹´é¾„ç³»æ•°: <span class="hljs-subst">{result.params[<span class="hljs-string">'age'</span>]:<span class="hljs-number">.4</span>f}</span> - å¹´é¾„æ¯å¢åŠ 1å²ï¼Œæ»¡æ„åº¦çš„æ½œåœ¨å˜é‡å˜åŒ–"</span>)
<span class="hljs-built_in">print</span>(
    <span class="hljs-string">f"è´­ä¹°é‡‘é¢ç³»æ•°: <span class="hljs-subst">{result.params[<span class="hljs-string">'purchase'</span>]:<span class="hljs-number">.4</span>f}</span> - è´­ä¹°é‡‘é¢æ¯å¢åŠ 1å…ƒï¼Œæ»¡æ„åº¦çš„æ½œåœ¨å˜é‡å˜åŒ–"</span>
)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\né˜ˆå€¼ä¼°è®¡:"</span>)
<span class="hljs-keyword">for</span> i, threshold <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(result.params[<span class="hljs-number">2</span>:]):  <span class="hljs-comment"># å‰ä¸¤ä¸ªæ˜¯ç‰¹å¾ç³»æ•°ï¼Œåé¢æ˜¯é˜ˆå€¼</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ»¡æ„åº¦ <span class="hljs-subst">{i+<span class="hljs-number">1</span>}</span>-<span class="hljs-subst">{i+<span class="hljs-number">2</span>}</span> é˜ˆå€¼: <span class="hljs-subst">{threshold:<span class="hljs-number">.4</span>f}</span>"</span>)

<span class="hljs-comment">## è¿è¡Œç»“æœï¼š</span>
<span class="hljs-string">'''
æ¨¡å‹ç³»æ•°è§£é‡Š:
å¹´é¾„ç³»æ•°: 0.0872 - å¹´é¾„æ¯å¢åŠ 1å²ï¼Œæ»¡æ„åº¦çš„æ½œåœ¨å˜é‡å˜åŒ–
è´­ä¹°é‡‘é¢ç³»æ•°: 0.2626 - è´­ä¹°é‡‘é¢æ¯å¢åŠ 1å…ƒï¼Œæ»¡æ„åº¦çš„æ½œåœ¨å˜é‡å˜åŒ–

é˜ˆå€¼ä¼°è®¡:
æ»¡æ„åº¦ 1-2 é˜ˆå€¼: 7.8416
æ»¡æ„åº¦ 2-3 é˜ˆå€¼: 1.6160
æ»¡æ„åº¦ 3-4 é˜ˆå€¼: 1.6758
æ»¡æ„åº¦ 4-5 é˜ˆå€¼: 1.6772
'''</span>
</code></pre>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09875e925caf4e9389a425cdf92fd2e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=F%2B0F9Bz35yM1MU7BbJ4Kxjaa0lk%3D" alt="" loading="lazy"/></p>
<p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼š</p>
<ul>
<li>ç‰¹å¾ç³»æ•°è¡¨ç¤ºå¯¹æ½œåœ¨å˜é‡çš„å½±å“ç¨‹åº¦</li>
<li>é˜ˆå€¼å‚æ•°è¡¨ç¤ºç±»åˆ«ä¹‹é—´çš„åˆ†ç•Œç‚¹</li>
<li>è´­ä¹°é‡‘é¢çš„å½±å“å¤§äºå¹´é¾„ï¼Œç¬¦åˆæ•°æ®ç”Ÿæˆé€»è¾‘</li>
</ul>
<p>è¯¥ä»£ç å®Œæ•´å±•ç¤ºäº†<strong>æœ‰åºå›å½’</strong>çš„ç†è®ºåŸºç¡€ã€å®ç°æ–¹æ³•å’Œç»“æœåˆ†æï¼Œç‰¹åˆ«é€‚åˆå¤„ç†å¦‚æ»¡æ„åº¦è¯„åˆ†ã€ç­‰çº§è¯„å®šç­‰æœ‰åºåˆ†ç±»æ•°æ®ã€‚</p>
<h3 data-id="heading-12">1.12. æ³Šæ¾å›å½’ (Poisson Regression)</h3>
<ul>
<li><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šä¸“é—¨ç”¨äºé¢„æµ‹â€œæ¬¡æ•°â€æˆ–â€œè®¡æ•°â€çš„å›å½’ï¼Œå‡è®¾æ•°æ®ç¬¦åˆæ³Šæ¾åˆ†å¸ƒã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šé¢„æµ‹æŸä¸ªè·¯å£æ¯å°æ—¶ç»è¿‡çš„è½¦è¾†æ•°ã€å®¢æœä¸­å¿ƒæ¯å¤©æ¥åˆ°çš„ç”µè¯æ•°ã€‚</li>
</ul>
<p><strong>æ³Šæ¾å›å½’</strong>æ¨¡å‹ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ³Šæ¾å›å½’ (Poisson Regression)</span>
<span class="hljs-keyword">from</span> scipy <span class="hljs-keyword">import</span> stats
<span class="hljs-keyword">from</span> scipy.optimize <span class="hljs-keyword">import</span> minimize
<span class="hljs-keyword">from</span> scipy.special <span class="hljs-keyword">import</span> gammaln
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> mean_squared_error, mean_absolute_error

<span class="hljs-comment"># ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®ï¼šæ¨¡æ‹Ÿå®¢æœä¸­å¿ƒæ¯å¤©æ¥åˆ°çš„ç”µè¯æ•°</span>
np.random.seed(<span class="hljs-number">42</span>)  <span class="hljs-comment"># è®¾ç½®éšæœºç§å­ç¡®ä¿ç»“æœå¯å¤ç°</span>

<span class="hljs-comment"># è‡ªå˜é‡ï¼šå¹¿å‘ŠæŠ•å…¥ï¼ˆä¸‡å…ƒï¼‰ï¼Œå·¥ä½œæ—¥æ ‡è¯†ï¼ˆ1ä¸ºå·¥ä½œæ—¥ï¼Œ0ä¸ºéå·¥ä½œæ—¥ï¼‰</span>
n_samples = <span class="hljs-number">200</span>
advertising_spend = np.random.uniform(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, n_samples)  <span class="hljs-comment"># å¹¿å‘ŠæŠ•å…¥0-10ä¸‡å…ƒ</span>
is_weekday = np.random.binomial(<span class="hljs-number">1</span>, <span class="hljs-number">0.7</span>, n_samples)       <span class="hljs-comment"># 70%æ˜¯å·¥ä½œæ—¥</span>

<span class="hljs-comment"># æ„é€ çº¿æ€§é¢„æµ‹å˜é‡ï¼ˆä½¿ç”¨å¯¹æ•°é“¾æ¥å‡½æ•°ï¼‰</span>
linear_combination = <span class="hljs-number">0.5</span> + <span class="hljs-number">0.3</span> * advertising_spend + <span class="hljs-number">0.4</span> * is_weekday
<span class="hljs-comment"># æ³Šæ¾å›å½’çš„æœŸæœ›å€¼ï¼ˆå‡å€¼ï¼‰ä¸º exp(çº¿æ€§ç»„åˆ)</span>
expected_counts = np.exp(linear_combination)

<span class="hljs-comment"># ç”Ÿæˆæ³Šæ¾åˆ†å¸ƒçš„å“åº”å˜é‡ï¼ˆç”µè¯æ•°é‡ï¼‰</span>
calls_count = np.random.poisson(expected_counts)

<span class="hljs-comment"># åˆ›å»ºæ•°æ®é›†</span>
X = np.column_stack([advertising_spend, is_weekday])
y = calls_count

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”Ÿæˆäº† <span class="hljs-subst">{n_samples}</span> ä¸ªæ ·æœ¬"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¹³å‡ç”µè¯æ•°é‡: <span class="hljs-subst">{np.mean(y):<span class="hljs-number">.2</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”µè¯æ•°é‡çš„æ ‡å‡†å·®: <span class="hljs-subst">{np.std(y):<span class="hljs-number">.2</span>f}</span>"</span>)

<span class="hljs-comment"># æ³Šæ¾å›å½’æ¨¡å‹å®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PoissonRegression</span>:
    <span class="hljs-comment"># ... çœç•¥ ...</span>

<span class="hljs-comment"># æ‹Ÿåˆæ³Šæ¾å›å½’æ¨¡å‹</span>
poisson_reg = PoissonRegression()
poisson_reg.fit(X, y)

<span class="hljs-comment"># é¢„æµ‹</span>
y_pred = poisson_reg.predict(X)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"æ³Šæ¾å›å½’ç³»æ•°:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æˆªè·: <span class="hljs-subst">{poisson_reg.coefficients[<span class="hljs-number">0</span>]:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¹¿å‘ŠæŠ•å…¥ç³»æ•°: <span class="hljs-subst">{poisson_reg.coefficients[<span class="hljs-number">1</span>]:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·¥ä½œæ—¥ç³»æ•°: <span class="hljs-subst">{poisson_reg.coefficients[<span class="hljs-number">2</span>]:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¹¿å‘ŠæŠ•å…¥æ¯å¢åŠ 1ä¸‡å…ƒï¼Œç”µè¯æ•°é‡å˜åŒ–å€æ•°: <span class="hljs-subst">{np.exp(poisson_reg.coefficients[<span class="hljs-number">1</span>]):<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·¥ä½œæ—¥ç›¸æ¯”éå·¥ä½œæ—¥ç”µè¯æ•°é‡å˜åŒ–å€æ•°: <span class="hljs-subst">{np.exp(poisson_reg.coefficients[<span class="hljs-number">2</span>]):<span class="hljs-number">.4</span>f}</span>"</span>)

<span class="hljs-comment"># ç»˜åˆ¶ç»“æœå›¾åƒ</span>
<span class="hljs-comment"># ... çœç•¥ ...</span>

<span class="hljs-comment"># è®¡ç®—æ¨¡å‹æ€§èƒ½æŒ‡æ ‡</span>
mse = mean_squared_error(y, y_pred)
mae = mean_absolute_error(y, y_pred)
rmse = np.sqrt(mse)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næ¨¡å‹æ€§èƒ½æŒ‡æ ‡:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡æ–¹è¯¯å·® (MSE): <span class="hljs-subst">{mse:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¹³å‡ç»å¯¹è¯¯å·® (MAE): <span class="hljs-subst">{mae:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡æ–¹æ ¹è¯¯å·® (RMSE): <span class="hljs-subst">{rmse:<span class="hljs-number">.4</span>f}</span>"</span>)

<span class="hljs-comment">## è¿è¡Œç»“æœï¼š</span>
<span class="hljs-string">'''
ç”Ÿæˆäº† 200 ä¸ªæ ·æœ¬
å¹³å‡ç”µè¯æ•°é‡: 13.93
ç”µè¯æ•°é‡çš„æ ‡å‡†å·®: 13.13
æ³Šæ¾å›å½’ç³»æ•°:
æˆªè·: 0.4484
å¹¿å‘ŠæŠ•å…¥ç³»æ•°: 0.3098
å·¥ä½œæ—¥ç³»æ•°: 0.3904
å¹¿å‘ŠæŠ•å…¥æ¯å¢åŠ 1ä¸‡å…ƒï¼Œç”µè¯æ•°é‡å˜åŒ–å€æ•°: 1.3632
å·¥ä½œæ—¥ç›¸æ¯”éå·¥ä½œæ—¥ç”µè¯æ•°é‡å˜åŒ–å€æ•°: 1.4775

æ¨¡å‹æ€§èƒ½æŒ‡æ ‡:
å‡æ–¹è¯¯å·® (MSE): 14.5815
å¹³å‡ç»å¯¹è¯¯å·® (MAE): 2.8126
å‡æ–¹æ ¹è¯¯å·® (RMSE): 3.8186
'''</span>
</code></pre>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/829d363f23b149ac9ff340b7cb87a05a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=yvJZGFCp7mYB9bzPyRsWxuWG%2FeE%3D" alt="" loading="lazy"/></p>
<p><strong>æ³Šæ¾å›å½’æ¨¡å‹</strong>çš„ä¼˜åŠ¿ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<ol>
<li><strong>é€‚ç”¨äºè®¡æ•°æ•°æ®</strong>ï¼šæ³Šæ¾å›å½’ç‰¹åˆ«é€‚åˆé¢„æµ‹è®¡æ•°å‹å˜é‡ï¼ˆå¦‚ç”µè¯æ•°é‡ï¼‰ï¼Œå‡è®¾å“åº”å˜é‡æœä»æ³Šæ¾åˆ†å¸ƒï¼Œä¸”å…¶æ–¹å·®ç­‰äºå‡å€¼ï¼Œèƒ½å¤Ÿå¾ˆå¥½åœ°å¤„ç†è®¡æ•°æ•°æ®ä¸­å¸¸è§çš„æ–¹å·®éšå‡å€¼å˜åŒ–çš„æƒ…å†µã€‚</li>
<li><strong>ä¿è¯éè´Ÿé¢„æµ‹</strong>ï¼šé€šè¿‡ä½¿ç”¨å¯¹æ•°é“¾æ¥å‡½æ•°ï¼Œç¡®ä¿äº†é¢„æµ‹å€¼å§‹ç»ˆä¸ºæ­£æ•°ï¼Œé¿å…äº†å¯èƒ½å‡ºç°çš„è´Ÿæ•°è®¡æ•°é—®é¢˜ï¼Œç¬¦åˆè®¡æ•°æ•°æ®çš„ç‰¹æ€§ã€‚</li>
<li><strong>è§£é‡Šæ€§å¼ºä¸”é€‚ç”¨ç¨€æœ‰äº‹ä»¶</strong>ï¼šå›å½’ç³»æ•°æ˜“äºè§£é‡Šä¸ºè‡ªå˜é‡å˜åŒ–å¯¹è®¡æ•°çš„ä¹˜æ€§å½±å“ï¼Œå¹¶ä¸”åœ¨äº‹ä»¶å‘ç”Ÿé¢‘ç‡è¾ƒä½æ—¶è¡¨ç°è‰¯å¥½ï¼Œé€‚åˆäºå®¢æœç”µè¯ã€äº¤é€šäº‹æ•…ç­‰ä½é¢‘äº‹ä»¶çš„é¢„æµ‹ã€‚</li>
</ol>
<p>è¿™ä¸ªç¤ºä¾‹æ¨¡æ‹Ÿäº†å®¢æœä¸­å¿ƒç”µè¯æ•°é‡é¢„æµ‹çš„åœºæ™¯ï¼Œå…¶ä¸­å¹¿å‘ŠæŠ•å…¥å’Œæ˜¯å¦ä¸ºå·¥ä½œæ—¥ä½œä¸ºé¢„æµ‹å˜é‡ï¼Œå®Œç¾å±•ç¤ºäº†æ³Šæ¾å›å½’å¦‚ä½•å¤„ç†è®¡æ•°å‹æ•°æ®å¹¶æä¾›å¯è§£é‡Šçš„ç»“æœã€‚</p>
<h3 data-id="heading-13">1.13. è´ŸäºŒé¡¹å›å½’ (Negative Binomial Regression)</h3>
<ul>
<li><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šä¹Ÿæ˜¯åšè®¡æ•°é¢„æµ‹çš„ï¼Œä½†å®ƒè§£å†³äº†æ³Šæ¾å›å½’ä¸­â€œæ–¹å·®å¿…é¡»ç­‰äºå‡å€¼â€çš„è‹›åˆ»å‡è®¾ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šæ•°æ®æ³¢åŠ¨ç‰¹åˆ«å¤§ï¼ˆæ–¹å·® &gt;&gt; å‡å€¼ï¼‰çš„è®¡æ•°æ•°æ®ï¼Œæ¯”å¦‚æŸæ¬¾å†·é—¨å•†å“å¶å°”å¤§å–çš„é”€é‡é¢„æµ‹ã€‚</li>
</ul>
<p><strong>è´ŸäºŒé¡¹å›å½’</strong>æ¨¡å‹ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è´ŸäºŒé¡¹å›å½’ (Negative Binomial Regression)</span>
<span class="hljs-keyword">from</span> scipy.optimize <span class="hljs-keyword">import</span> minimize
<span class="hljs-keyword">from</span> scipy.special <span class="hljs-keyword">import</span> gammaln
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> mean_squared_error, mean_absolute_error

<span class="hljs-comment"># ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®ï¼šæ¨¡æ‹Ÿå†·é—¨å•†å“é”€é‡é¢„æµ‹ï¼ˆæ–¹å·®è¿œå¤§äºå‡å€¼çš„æƒ…å†µï¼‰</span>
np.random.seed(<span class="hljs-number">42</span>)  <span class="hljs-comment"># è®¾ç½®éšæœºç§å­ç¡®ä¿ç»“æœå¯å¤ç°</span>

<span class="hljs-comment"># è‡ªå˜é‡ï¼šä¿ƒé”€æ´»åŠ¨ï¼ˆ1ä¸ºæœ‰ä¿ƒé”€ï¼Œ0ä¸ºæ— ä¿ƒé”€ï¼‰ï¼Œä»·æ ¼æŠ˜æ‰£ç‡ï¼Œå•†å“ç±»åˆ«ï¼ˆ1ä¸ºçƒ­é—¨å•†å“ï¼Œ0ä¸ºå†·é—¨å•†å“ï¼‰</span>
n_samples = <span class="hljs-number">300</span>
promotion = np.random.binomial(<span class="hljs-number">1</span>, <span class="hljs-number">0.3</span>, n_samples)  <span class="hljs-comment"># 30%æœ‰ä¿ƒé”€æ´»åŠ¨</span>
discount_rate = np.random.uniform(<span class="hljs-number">0</span>, <span class="hljs-number">0.3</span>, n_samples)  <span class="hljs-comment"># 0-30%çš„æŠ˜æ‰£</span>
is_popular = np.random.binomial(<span class="hljs-number">1</span>, <span class="hljs-number">0.2</span>, n_samples)   <span class="hljs-comment"># 20%æ˜¯çƒ­é—¨å•†å“</span>

<span class="hljs-comment"># æ„é€ çº¿æ€§é¢„æµ‹å˜é‡ï¼ˆä½¿ç”¨å¯¹æ•°é“¾æ¥å‡½æ•°ï¼‰</span>
linear_combination = -<span class="hljs-number">1.0</span> + <span class="hljs-number">1.2</span> * promotion + <span class="hljs-number">0.8</span> * discount_rate + <span class="hljs-number">0.5</span> * is_popular
<span class="hljs-comment"># è´ŸäºŒé¡¹å›å½’çš„å‡å€¼ä¸º exp(çº¿æ€§ç»„åˆ)</span>
mu = np.exp(linear_combination)

<span class="hljs-comment"># è´ŸäºŒé¡¹åˆ†å¸ƒçš„å‚æ•°è®¾ç½®ï¼ˆrä¸ºç¦»æ•£å‚æ•°ï¼Œæ§åˆ¶æ–¹å·®ï¼‰</span>
<span class="hljs-comment"># æ–¹å·® = mu + mu^2/rï¼Œå½“rè¾ƒå°æ—¶ï¼Œæ–¹å·®è¿œå¤§äºå‡å€¼</span>
r = <span class="hljs-number">1.5</span>  <span class="hljs-comment"># è¾ƒå°çš„rå€¼ï¼Œä½¿å¾—æ–¹å·®è¿œå¤§äºå‡å€¼</span>

<span class="hljs-comment"># ç”Ÿæˆè´ŸäºŒé¡¹åˆ†å¸ƒçš„å“åº”å˜é‡ï¼ˆé”€é‡ï¼‰</span>
<span class="hljs-comment"># ä½¿ç”¨è´ŸäºŒé¡¹åˆ†å¸ƒï¼švar = mu + mu^2/rï¼Œå½“rå°çš„æ—¶å€™æ–¹å·®å¾ˆå¤§</span>
<span class="hljs-comment"># è´ŸäºŒé¡¹åˆ†å¸ƒçš„å‚æ•°è½¬æ¢ï¼šp = r/(r+mu)</span>
p = r / (r + mu)
sales_count = np.random.negative_binomial(r, p)

<span class="hljs-comment"># åˆ›å»ºæ•°æ®é›†</span>
X = np.column_stack([promotion, discount_rate, is_popular])
y = sales_count

<span class="hljs-comment"># è´ŸäºŒé¡¹å›å½’æ¨¡å‹å®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">NegativeBinomialRegression</span>:
    <span class="hljs-comment"># ... çœç•¥ ...</span>

<span class="hljs-comment"># æ‹Ÿåˆè´ŸäºŒé¡¹å›å½’æ¨¡å‹</span>
neg_bin_reg = NegativeBinomialRegression()
neg_bin_reg.fit(X, y)

<span class="hljs-comment"># é¢„æµ‹</span>
y_pred = neg_bin_reg.predict(X)

<span class="hljs-comment"># ç»˜åˆ¶ç»“æœå›¾åƒ</span>
<span class="hljs-comment"># ... çœç•¥ ...</span>

<span class="hljs-comment"># è®¡ç®—æ¨¡å‹æ€§èƒ½æŒ‡æ ‡</span>
mse = mean_squared_error(y, y_pred)
mae = mean_absolute_error(y, y_pred)
rmse = np.sqrt(mse)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næ¨¡å‹æ€§èƒ½æŒ‡æ ‡:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡æ–¹è¯¯å·® (MSE): <span class="hljs-subst">{mse:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¹³å‡ç»å¯¹è¯¯å·® (MAE): <span class="hljs-subst">{mae:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡æ–¹æ ¹è¯¯å·® (RMSE): <span class="hljs-subst">{rmse:<span class="hljs-number">.4</span>f}</span>"</span>)

<span class="hljs-comment"># æ¯”è¾ƒæ³Šæ¾å›å½’å’Œè´ŸäºŒé¡¹å›å½’çš„æ‹Ÿåˆæ•ˆæœ</span>
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> PoissonRegressor

<span class="hljs-comment"># ä½¿ç”¨sklearnçš„æ³Šæ¾å›å½’è¿›è¡Œæ¯”è¾ƒ</span>
poisson_reg = PoissonRegressor()
poisson_reg.fit(X, y)
y_pred_poisson = poisson_reg.predict(X)

poisson_mse = mean_squared_error(y, y_pred_poisson)
poisson_mae = mean_absolute_error(y, y_pred_poisson)
poisson_rmse = np.sqrt(poisson_mse)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nä¸æ³Šæ¾å›å½’çš„æ¯”è¾ƒ:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è´ŸäºŒé¡¹å›å½’ MSE: <span class="hljs-subst">{mse:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ³Šæ¾å›å½’ MSE: <span class="hljs-subst">{poisson_mse:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è´ŸäºŒé¡¹å›å½’ MAE: <span class="hljs-subst">{mae:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ³Šæ¾å›å½’ MAE: <span class="hljs-subst">{poisson_mae:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"è´ŸäºŒé¡¹å›å½’ RMSE: <span class="hljs-subst">{rmse:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ³Šæ¾å›å½’ RMSE: <span class="hljs-subst">{poisson_rmse:<span class="hljs-number">.4</span>f}</span>"</span>)

<span class="hljs-comment">## è¿è¡Œç»“æœï¼š</span>
<span class="hljs-string">'''
æ¨¡å‹æ€§èƒ½æŒ‡æ ‡:
å‡æ–¹è¯¯å·® (MSE): 1.0138
å¹³å‡ç»å¯¹è¯¯å·® (MAE): 0.7567
å‡æ–¹æ ¹è¯¯å·® (RMSE): 1.0069

ä¸æ³Šæ¾å›å½’çš„æ¯”è¾ƒ:
è´ŸäºŒé¡¹å›å½’ MSE: 1.0138
æ³Šæ¾å›å½’ MSE: 1.1612
è´ŸäºŒé¡¹å›å½’ MAE: 0.7567
æ³Šæ¾å›å½’ MAE: 0.8246
è´ŸäºŒé¡¹å›å½’ RMSE: 1.0069
æ³Šæ¾å›å½’ RMSE: 1.0776
'''</span>
</code></pre>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b44a14776b8494cb971ebbb2691028f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=xtMp9GNK2IWbIMXDdfeLhPDbdY0%3D" alt="" loading="lazy"/></p>
<p><strong>è´ŸäºŒé¡¹å›å½’æ¨¡å‹</strong>çš„ä¼˜åŠ¿ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<ol>
<li><strong>è§£å†³è¿‡åº¦ç¦»åŠ¿é—®é¢˜</strong>ï¼šè´ŸäºŒé¡¹å›å½’èƒ½å¤Ÿå¤„ç†æ–¹å·®å¤§äºå‡å€¼çš„è®¡æ•°æ•°æ®ï¼Œé€‚ç”¨äºæ–¹å·®/å‡å€¼æ¯”è¿œå¤§äº1çš„æƒ…å†µï¼Œå¦‚å†·é—¨å•†å“å¶å°”å¤§å–çš„æ•°æ®ã€‚</li>
<li><strong>æ›´çµæ´»çš„æ–¹å·®ç»“æ„</strong>ï¼šé€šè¿‡å¼•å…¥ç¦»æ•£å‚æ•°rï¼Œè´ŸäºŒé¡¹å›å½’å…è®¸æ–¹å·®ç‹¬ç«‹äºå‡å€¼å˜åŒ–ï¼ˆæ–¹å·®ä¸º <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î¼</mi><mo>+</mo><msup><mi>Î¼</mi><mn>2</mn></msup><mi mathvariant="normal">/</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">\mu + \mu^2/r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"/><span class="mord mathnormal">Î¼</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">Î¼</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span></span></span></span>ï¼‰ï¼Œä»è€Œæ›´å¥½åœ°æ‹Ÿåˆå®é™…æ•°æ®ä¸­çš„å˜å¼‚æ€§ã€‚</li>
<li><strong>æ›´å¥½çš„æ‹Ÿåˆæ•ˆæœå’Œæ›´çœŸå®çš„å‡è®¾</strong>ï¼šåœ¨é«˜å˜å¼‚æ•°æ®ä¸‹ï¼Œè´ŸäºŒé¡¹å›å½’é€šå¸¸æ¯”æ³Šæ¾å›å½’æä¾›æ›´å‡†ç¡®çš„é¢„æµ‹ï¼Œå¹¶ä¸”å…¶å‡è®¾æ›´ç¬¦åˆå®é™…ä¸šåŠ¡åœºæ™¯ä¸­è®¡æ•°æ•°æ®çš„ç»Ÿè®¡ç‰¹æ€§ã€‚</li>
</ol>
<p>è¿™ä¸ªç¤ºä¾‹æ¨¡æ‹Ÿäº†å†·é—¨å•†å“é”€é‡é¢„æµ‹çš„åœºæ™¯ï¼Œå…¶ä¸­ä¿ƒé”€æ´»åŠ¨ã€æŠ˜æ‰£ç‡å’Œå•†å“ç±»å‹ä½œä¸ºé¢„æµ‹å˜é‡ï¼Œå®Œç¾å±•ç¤ºäº†<strong>è´ŸäºŒé¡¹å›å½’</strong>å¦‚ä½•å¤„ç†æ–¹å·®è¿œå¤§äºå‡å€¼çš„è®¡æ•°å‹æ•°æ®ï¼Œå¹¶æä¾›æ¯”æ³Šæ¾å›å½’æ›´å‡†ç¡®çš„é¢„æµ‹ç»“æœã€‚</p>
<h3 data-id="heading-14">1.14. å‡†æ³Šæ¾å›å½’ (Quasi Poisson Regression)</h3>
<ul>
<li><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šæ³Šæ¾å›å½’çš„å¦ä¸€ç§æ›¿ä»£æ–¹æ¡ˆï¼Œç”¨æ¥å¤„ç†ç”±äºæ•°æ®æ³¢åŠ¨è¿‡å¤§ï¼ˆè¿‡åº¦ç¦»æ•£ï¼‰å¯¼è‡´çš„æ ‡å‡†è¯¯ä¼°è®¡ä¸å‡†çš„é—®é¢˜ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šå’Œè´ŸäºŒé¡¹å›å½’ç±»ä¼¼ï¼Œç”¨äºå¤„ç†è¿‡åº¦ç¦»æ•£çš„è®¡æ•°æ•°æ®ã€‚</li>
</ul>
<p><strong>å‡†æ³Šæ¾å›å½’</strong>æ¨¡å‹ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å‡†æ³Šæ¾å›å½’ (Quasi Poisson Regression)</span>
<span class="hljs-keyword">from</span> scipy.optimize <span class="hljs-keyword">import</span> minimize
<span class="hljs-keyword">from</span> scipy.special <span class="hljs-keyword">import</span> gammaln
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> mean_squared_error, mean_absolute_error

<span class="hljs-comment"># ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®ï¼šæ¨¡æ‹Ÿè¿‡åº¦ç¦»æ•£çš„è®¡æ•°æ•°æ®ï¼ˆå¦‚äº¤é€šäº‹æ•…æ¬¡æ•°é¢„æµ‹ï¼‰</span>
np.random.seed(<span class="hljs-number">42</span>)  <span class="hljs-comment"># è®¾ç½®éšæœºç§å­ç¡®ä¿ç»“æœå¯å¤ç°</span>

<span class="hljs-comment"># è‡ªå˜é‡ï¼šé“è·¯é•¿åº¦ï¼ˆå…¬é‡Œï¼‰ï¼Œäº¤é€šæµé‡ï¼ˆè½¦è¾†/å°æ—¶ï¼‰ï¼Œå¤©æ°”çŠ¶å†µï¼ˆ1ä¸ºæ¶åŠ£å¤©æ°”ï¼Œ0ä¸ºæ­£å¸¸å¤©æ°”ï¼‰</span>
n_samples = <span class="hljs-number">250</span>
road_length = np.random.uniform(<span class="hljs-number">1</span>, <span class="hljs-number">20</span>, n_samples)  <span class="hljs-comment"># é“è·¯é•¿åº¦1-20å…¬é‡Œ</span>
traffic_flow = np.random.uniform(<span class="hljs-number">50</span>, <span class="hljs-number">500</span>, n_samples)  <span class="hljs-comment"># äº¤é€šæµé‡50-500è¾†/å°æ—¶</span>
bad_weather = np.random.binomial(<span class="hljs-number">1</span>, <span class="hljs-number">0.15</span>, n_samples)  <span class="hljs-comment"># 15%æ˜¯æ¶åŠ£å¤©æ°”</span>

<span class="hljs-comment"># æ„é€ çº¿æ€§é¢„æµ‹å˜é‡ï¼ˆä½¿ç”¨å¯¹æ•°é“¾æ¥å‡½æ•°ï¼‰</span>
linear_combination = -<span class="hljs-number">2.0</span> + <span class="hljs-number">0.05</span> * road_length + <span class="hljs-number">0.002</span> * traffic_flow + <span class="hljs-number">0.8</span> * bad_weather
<span class="hljs-comment"># æ³Šæ¾å›å½’çš„æœŸæœ›å€¼ï¼ˆå‡å€¼ï¼‰ä¸º exp(çº¿æ€§ç»„åˆ)</span>
expected_counts = np.exp(linear_combination)

<span class="hljs-comment"># ä¸ºäº†æ¨¡æ‹Ÿè¿‡åº¦ç¦»æ•£ï¼Œæˆ‘ä»¬å¼•å…¥é¢å¤–çš„å˜å¼‚</span>
<span class="hljs-comment"># ç”Ÿæˆè¿‡åº¦ç¦»æ•£çš„è®¡æ•°æ•°æ®ï¼šå‡å€¼ä¸ºexpected_countsï¼Œä½†æ–¹å·®æ›´å¤§</span>
<span class="hljs-comment"># ä½¿ç”¨è´ŸäºŒé¡¹åˆ†å¸ƒç”Ÿæˆæ•°æ®ï¼Œä½¿å…¶å…·æœ‰è¿‡åº¦ç¦»æ•£ç‰¹å¾</span>
dispersion_param = <span class="hljs-number">2.0</span>  <span class="hljs-comment"># ç¦»æ•£å‚æ•°ï¼Œæ§åˆ¶è¿‡åº¦ç¦»æ•£ç¨‹åº¦</span>
r = expected_counts / (dispersion_param - <span class="hljs-number">1</span>)  <span class="hljs-comment"># è´ŸäºŒé¡¹åˆ†å¸ƒçš„å‚æ•°è½¬æ¢</span>
p = r / (r + expected_counts)
accident_count = np.random.negative_binomial(r, p)

<span class="hljs-comment"># åˆ›å»ºæ•°æ®é›†</span>
X = np.column_stack([road_length, traffic_flow, bad_weather])
y = accident_count

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”Ÿæˆäº† <span class="hljs-subst">{n_samples}</span> ä¸ªæ ·æœ¬"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¹³å‡äº‹æ•…æ•°: <span class="hljs-subst">{np.mean(y):<span class="hljs-number">.2</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"äº‹æ•…æ•°çš„æ ‡å‡†å·®: <span class="hljs-subst">{np.std(y):<span class="hljs-number">.2</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ–¹å·®/å‡å€¼æ¯”: <span class="hljs-subst">{np.var(y)/np.mean(y):<span class="hljs-number">.2</span>f}</span> (æ³Šæ¾åˆ†å¸ƒè¯¥æ¯”å€¼åº”ä¸º1ï¼Œå¤§äº1è¡¨ç¤ºè¿‡åº¦ç¦»æ•£)"</span>)

<span class="hljs-comment"># å‡†æ³Šæ¾å›å½’æ¨¡å‹å®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">QuasiPoissonRegression</span>:
    <span class="hljs-comment"># ... çœç•¥ ...</span>

<span class="hljs-comment"># æ‹Ÿåˆå‡†æ³Šæ¾å›å½’æ¨¡å‹</span>
quasi_poisson_reg = QuasiPoissonRegression()
quasi_poisson_reg.fit(X, y)

<span class="hljs-comment"># é¢„æµ‹</span>
y_pred = quasi_poisson_reg.predict(X)
y_var = quasi_poisson_reg.predict_variance(X)

<span class="hljs-comment"># ç»˜åˆ¶ç»“æœå›¾åƒ</span>
<span class="hljs-comment"># ... çœç•¥ ...</span>

<span class="hljs-comment"># è®¡ç®—æ¨¡å‹æ€§èƒ½æŒ‡æ ‡</span>
mse = mean_squared_error(y, y_pred)
mae = mean_absolute_error(y, y_pred)
rmse = np.sqrt(mse)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næ¨¡å‹æ€§èƒ½æŒ‡æ ‡:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡æ–¹è¯¯å·® (MSE): <span class="hljs-subst">{mse:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¹³å‡ç»å¯¹è¯¯å·® (MAE): <span class="hljs-subst">{mae:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡æ–¹æ ¹è¯¯å·® (RMSE): <span class="hljs-subst">{rmse:<span class="hljs-number">.4</span>f}</span>"</span>)

<span class="hljs-comment"># ä¸æ ‡å‡†æ³Šæ¾å›å½’çš„æ¯”è¾ƒ</span>
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> PoissonRegressor

<span class="hljs-comment"># ä½¿ç”¨sklearnçš„æ³Šæ¾å›å½’è¿›è¡Œæ¯”è¾ƒ</span>
poisson_reg = PoissonRegressor()
poisson_reg.fit(X, y)
y_pred_poisson = poisson_reg.predict(X)

poisson_mse = mean_squared_error(y, y_pred_poisson)
poisson_mae = mean_absolute_error(y, y_pred_poisson)
poisson_rmse = np.sqrt(poisson_mse)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nä¸æ³Šæ¾å›å½’çš„æ¯”è¾ƒ:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡†æ³Šæ¾å›å½’ MSE: <span class="hljs-subst">{mse:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ³Šæ¾å›å½’ MSE: <span class="hljs-subst">{poisson_mse:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡†æ³Šæ¾å›å½’ MAE: <span class="hljs-subst">{mae:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ³Šæ¾å›å½’ MAE: <span class="hljs-subst">{poisson_mae:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡†æ³Šæ¾å›å½’ RMSE: <span class="hljs-subst">{rmse:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ³Šæ¾å›å½’ RMSE: <span class="hljs-subst">{poisson_rmse:<span class="hljs-number">.4</span>f}</span>"</span>)

<span class="hljs-comment"># æ£€æŸ¥è¿‡åº¦ç¦»æ•£</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nè¿‡åº¦ç¦»æ•£æ£€æŸ¥:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ•°æ®æ–¹å·®/å‡å€¼æ¯”: <span class="hljs-subst">{np.var(y)/np.mean(y):<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å‡†æ³Šæ¾ä¼°è®¡çš„ç¦»æ•£å‚æ•°: <span class="hljs-subst">{quasi_poisson_reg.dispersion:<span class="hljs-number">.4</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¦»æ•£å‚æ•° &gt; 1 è¡¨ç¤ºå­˜åœ¨è¿‡åº¦ç¦»æ•£: <span class="hljs-subst">{quasi_poisson_reg.dispersion &gt; <span class="hljs-number">1</span>}</span>"</span>)

<span class="hljs-comment">## è¿è¡Œç»“æœï¼š</span>
<span class="hljs-string">'''
æ¨¡å‹æ€§èƒ½æŒ‡æ ‡:
å‡æ–¹è¯¯å·® (MSE): 0.8350
å¹³å‡ç»å¯¹è¯¯å·® (MAE): 0.6398
å‡æ–¹æ ¹è¯¯å·® (RMSE): 0.9138

ä¸æ³Šæ¾å›å½’çš„æ¯”è¾ƒ:
å‡†æ³Šæ¾å›å½’ MSE: 0.8350
æ³Šæ¾å›å½’ MSE: 0.8415
å‡†æ³Šæ¾å›å½’ MAE: 0.6398
æ³Šæ¾å›å½’ MAE: 0.6515
å‡†æ³Šæ¾å›å½’ RMSE: 0.9138
æ³Šæ¾å›å½’ RMSE: 0.9174

è¿‡åº¦ç¦»æ•£æ£€æŸ¥:
æ•°æ®æ–¹å·®/å‡å€¼æ¯”: 1.6993
å‡†æ³Šæ¾ä¼°è®¡çš„ç¦»æ•£å‚æ•°: 1.6699
ç¦»æ•£å‚æ•° &gt; 1 è¡¨ç¤ºå­˜åœ¨è¿‡åº¦ç¦»æ•£: True
'''</span>
</code></pre>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad879291899d462a86c1bdd065789527~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=obAtjDNZpFV37lm9NQ1ed8zqz9A%3D" alt="" loading="lazy"/></p>
<p><strong>å‡†æ³Šæ¾å›å½’æ¨¡å‹</strong>çš„ä¼˜åŠ¿ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<ol>
<li><strong>è§£å†³è¿‡åº¦ç¦»æ•£é—®é¢˜</strong>ï¼šå‡†æ³Šæ¾å›å½’é€šè¿‡å¼•å…¥ç¦»æ•£å‚æ•°Ï†æ¥å¤„ç†æ–¹å·®å¤§äºå‡å€¼çš„è¿‡åº¦ç¦»æ•£æ•°æ®ã€‚åœ¨ç¤ºä¾‹ä¸­ï¼Œæ–¹å·®/å‡å€¼æ¯”è¿œå¤§äº1ï¼ˆçº¦ä¸º2.35ï¼‰ï¼Œè¡¨æ˜å­˜åœ¨æ˜æ˜¾çš„è¿‡åº¦ç¦»æ•£ç°è±¡ã€‚</li>
<li><strong>æ ‡å‡†è¯¯æ ¡æ­£</strong>ï¼šä¿®æ­£äº†æ³Šæ¾å›å½’ä¸­ç”±äºè¿‡åº¦ç¦»æ•£å¯¼è‡´çš„æ ‡å‡†è¯¯ä¼°è®¡è¿‡å°çš„é—®é¢˜ï¼Œä»è€Œæé«˜äº†ç»Ÿè®¡æ¨æ–­ï¼ˆå¦‚ç½®ä¿¡åŒºé—´å’Œå‡è®¾æ£€éªŒï¼‰çš„å¯é æ€§ã€‚</li>
<li><strong>ä¿æŒæ³Šæ¾å›å½’çš„ç³»æ•°</strong>ï¼šä¸æ³Šæ¾å›å½’ä½¿ç”¨ç›¸åŒçš„ç³»æ•°ä¼°è®¡ï¼Œä½†è°ƒæ•´äº†æ–¹å·®ä¼°è®¡ã€‚è¿™æ„å‘³ç€å›å½’ç³»æ•°çš„è§£é‡Šä¸æ³Šæ¾å›å½’ç›¸åŒï¼Œä¿æŒäº†æ¨¡å‹çš„å¯è§£é‡Šæ€§ã€‚</li>
<li><strong>ç®€å•æ˜“ç”¨</strong>ï¼šç›¸æ¯”è´ŸäºŒé¡¹å›å½’ï¼Œå‡†æ³Šæ¾å›å½’å‚æ•°æ›´å°‘ï¼Œè®¡ç®—æ›´ç®€å•ã€‚å‡†æ³Šæ¾å›å½’åªéœ€è¦ä¼°è®¡ä¸€ä¸ªé¢å¤–çš„ç¦»æ•£å‚æ•°ï¼Œè€Œè´ŸäºŒé¡¹å›å½’éœ€è¦ä¼°è®¡ç¦»æ•£å‚æ•°rã€‚</li>
<li><strong>çµæ´»æ€§å¼º</strong>ï¼šå¯ä»¥å¤„ç†ä»»æ„ç¨‹åº¦çš„è¿‡åº¦ç¦»æ•£ï¼Œè€Œä¸é™äºç‰¹å®šçš„åˆ†å¸ƒå‡è®¾ã€‚å‡†æ³Šæ¾å›å½’ä¸å‡è®¾ç‰¹å®šçš„åˆ†å¸ƒæ—ï¼Œåªæ˜¯è°ƒæ•´æ–¹å·®ç»“æ„ã€‚</li>
<li><strong>å®ç”¨æ€§å¼º</strong>ï¼šåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå½“æ•°æ®å­˜åœ¨è¿‡åº¦ç¦»æ•£ä½†åˆä¸æƒ³ä½¿ç”¨æ›´å¤æ‚çš„è´ŸäºŒé¡¹å›å½’æ—¶ï¼Œå‡†æ³Šæ¾æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚å®ƒæä¾›äº†ä¸€ä¸ªå¹³è¡¡ç‚¹ï¼Œæ—¢è§£å†³äº†è¿‡åº¦ç¦»æ•£é—®é¢˜ï¼Œåˆä¿æŒäº†æ¨¡å‹çš„ç®€æ´æ€§ã€‚</li>
<li><strong>è®¡ç®—æ•ˆç‡é«˜</strong>ï¼šç”±äºä½¿ç”¨ä¸æ³Šæ¾å›å½’ç›¸åŒçš„ç³»æ•°ä¼°è®¡æ–¹æ³•ï¼Œè®¡ç®—å¤æ‚åº¦è¾ƒä½ï¼Œé€‚åˆå¤„ç†å¤§è§„æ¨¡æ•°æ®ã€‚</li>
</ol>
<p>è¿™ä¸ªç¤ºä¾‹æ¨¡æ‹Ÿäº†äº¤é€šäº‹æ•…é¢„æµ‹çš„åœºæ™¯ï¼Œå…¶ä¸­é“è·¯é•¿åº¦ã€äº¤é€šæµé‡å’Œå¤©æ°”çŠ¶å†µä½œä¸ºé¢„æµ‹å˜é‡ï¼Œå®Œç¾å±•ç¤ºäº†<strong>å‡†æ³Šæ¾å›å½’</strong>å¦‚ä½•å¤„ç†è¿‡åº¦ç¦»æ•£çš„è®¡æ•°å‹æ•°æ®ï¼Œå¹¶æä¾›æ¯”æ ‡å‡†æ³Šæ¾å›å½’æ›´å¯é çš„ç»Ÿè®¡æ¨æ–­ã€‚</p>
<h3 data-id="heading-15">1.15. Cox å›å½’ (Cox Regression)</h3>
<ul>
<li><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šç”¨äºâ€œç”Ÿå­˜åˆ†æâ€ï¼Œç ”ç©¶çš„æ˜¯â€œäº‹ä»¶å‘ç”Ÿéœ€è¦å¤šé•¿æ—¶é—´â€ï¼Œä»¥åŠå“ªäº›å› ç´ å½±å“è¿™ä¸ªæ—¶é—´ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šé¢„æµ‹ç—…äººç¡®è¯Šåçš„ç”Ÿå­˜æ—¶é—´ã€å®¢æˆ·æµå¤±æ‰€éœ€çš„æ—¶é—´ï¼ˆä¹Ÿå°±æ˜¯å®¢æˆ·è¿˜èƒ½ç•™å­˜å¤šä¹…ï¼‰ã€‚</li>
</ul>
<p><strong>COXå›å½’</strong>æ¨¡å‹ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Cox å›å½’ (Cox Regression)</span>
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split
<span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> StandardScaler

<span class="hljs-comment"># å¯¼å…¥sksurvåº“</span>
<span class="hljs-keyword">from</span> sksurv.linear_model <span class="hljs-keyword">import</span> CoxPHSurvivalAnalysis
<span class="hljs-keyword">from</span> sksurv.preprocessing <span class="hljs-keyword">import</span> OneHotEncoder

<span class="hljs-comment"># ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºCoxå›å½’çš„æµ‹è¯•æ•°æ®</span>
<span class="hljs-comment"># æ¨¡æ‹ŸåŒ»ç–—æ•°æ®ï¼šæ‚£è€…ç”Ÿå­˜åˆ†æ</span>
np.random.seed(<span class="hljs-number">42</span>)
n_samples = <span class="hljs-number">300</span>

<span class="hljs-comment"># ç”Ÿæˆç‰¹å¾</span>
age = np.random.normal(<span class="hljs-number">60</span>, <span class="hljs-number">15</span>, n_samples)  <span class="hljs-comment"># æ‚£è€…å¹´é¾„</span>
treatment = np.random.binomial(<span class="hljs-number">1</span>, <span class="hljs-number">0.5</span>, n_samples)  <span class="hljs-comment"># æ˜¯å¦æ¥å—æ²»ç–— (0/1)</span>
gender = np.random.binomial(<span class="hljs-number">1</span>, <span class="hljs-number">0.5</span>, n_samples)  <span class="hljs-comment"># æ€§åˆ« (0/1)</span>
comorbidity = np.random.poisson(<span class="hljs-number">1.5</span>, n_samples)  <span class="hljs-comment"># å¹¶å‘ç—‡æ•°é‡</span>

<span class="hljs-comment"># ç”Ÿæˆç”Ÿå­˜æ—¶é—´å’Œäº‹ä»¶çŠ¶æ€</span>
<span class="hljs-comment"># å¹´é¾„è¶Šå¤§ã€å¹¶å‘ç—‡è¶Šå¤š -&gt; ç”Ÿå­˜æ—¶é—´è¶ŠçŸ­</span>
<span class="hljs-comment"># æ¥å—æ²»ç–— -&gt; ç”Ÿå­˜æ—¶é—´æ›´é•¿</span>
linear_combination = (
    <span class="hljs-number">0.05</span> * age +
    -<span class="hljs-number">0.8</span> * treatment +
    <span class="hljs-number">0.1</span> * gender +
    <span class="hljs-number">0.3</span> * comorbidity
)

<span class="hljs-comment"># åŸºçº¿é£é™©å‡½æ•°æ•ˆåº”</span>
base_time = np.random.exponential(<span class="hljs-number">2</span>, n_samples)
time_to_event = base_time * np.exp(-linear_combination)

<span class="hljs-comment"># æ·»åŠ ä¸€äº›åˆ å¤±ï¼ˆå¹¶éæ‰€æœ‰æ‚£è€…éƒ½ä¼šåœ¨ç ”ç©¶æœŸé—´å‘ç”Ÿäº‹ä»¶ï¼‰</span>
censoring_time = np.random.uniform(<span class="hljs-number">0</span>, np.percentile(time_to_event, <span class="hljs-number">80</span>), n_samples)
observed_time = np.minimum(time_to_event, censoring_time)
event_occurred = time_to_event &lt;= censoring_time

<span class="hljs-comment"># åˆ›å»ºDataFrame</span>
data = pd.DataFrame({
    <span class="hljs-string">'age'</span>: age,
    <span class="hljs-string">'treatment'</span>: treatment,
    <span class="hljs-string">'gender'</span>: gender,
    <span class="hljs-string">'comorbidity'</span>: comorbidity,
    <span class="hljs-string">'time'</span>: observed_time,
    <span class="hljs-string">'event'</span>: event_occurred
})

<span class="hljs-comment"># ç¬¬äºŒæ­¥ï¼šå®ç°Coxå›å½’æ¨¡å‹</span>
<span class="hljs-comment"># ä¸ºsksurvå‡†å¤‡æ•°æ®</span>
X = data[[<span class="hljs-string">'age'</span>, <span class="hljs-string">'treatment'</span>, <span class="hljs-string">'gender'</span>, <span class="hljs-string">'comorbidity'</span>]].values
y = np.array(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">zip</span>(data[<span class="hljs-string">'event'</span>], data[<span class="hljs-string">'time'</span>])), dtype=[(<span class="hljs-string">'event'</span>, <span class="hljs-string">'?'</span>), (<span class="hljs-string">'time'</span>, <span class="hljs-string">'&lt;f8'</span>)])

<span class="hljs-comment"># åˆ†å‰²æ•°æ®</span>
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="hljs-number">0.2</span>, random_state=<span class="hljs-number">42</span>)

<span class="hljs-comment"># æ‹ŸåˆCoxæ¨¡å‹</span>
cox_model = CoxPHSurvivalAnalysis()
cox_model.fit(X_train, y_train)

<span class="hljs-comment"># è·å–æ¨¡å‹ç³»æ•°</span>
cox_coef = cox_model.coef_

<span class="hljs-built_in">print</span>(<span class="hljs-string">"Coxå›å½’æ¨¡å‹ (sksurv) - ç³»æ•°ï¼š"</span>)
feature_names = [<span class="hljs-string">'å¹´é¾„'</span>, <span class="hljs-string">'æ²»ç–—'</span>, <span class="hljs-string">'æ€§åˆ«'</span>, <span class="hljs-string">'å¹¶å‘ç—‡'</span>]
<span class="hljs-keyword">for</span> i, (name, coef) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(<span class="hljs-built_in">zip</span>(feature_names, cox_coef)):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{name}</span>: <span class="hljs-subst">{coef:<span class="hljs-number">.4</span>f}</span>"</span>)

<span class="hljs-comment"># åœ¨sksurvä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨è®¡ç®—é£é™©è¯„åˆ†</span>
<span class="hljs-comment"># é£é™©è¯„åˆ†æ˜¯çº¿æ€§é¢„æµ‹å™¨çš„æŒ‡æ•°ï¼Œå³ exp(X * coef)</span>
linear_predictor = X_test @ cox_coef
risk_scores = np.exp(linear_predictor)

<span class="hljs-comment"># ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºå¯è§†åŒ–</span>
<span class="hljs-comment"># ... çœç•¥ ...</span>

<span class="hljs-comment">## è¿è¡Œç»“æœï¼š</span>
<span class="hljs-string">'''
Coxå›å½’æ¨¡å‹ (sksurv) - ç³»æ•°ï¼š
å¹´é¾„: 0.0585
æ²»ç–—: -0.7703
æ€§åˆ«: -0.1919
å¹¶å‘ç—‡: 0.1779
'''</span>
</code></pre>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2881e56f30c3420488fe22b2553908b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=9gIo6SZOmyyWmXk8S0edLDCCzZY%3D" alt="" loading="lazy"/></p>
<p><strong>COXå›å½’æ¨¡å‹</strong>çš„ä¼˜åŠ¿</p>
<ol>
<li><strong>å¤„ç†åˆ å¤±æ•°æ®</strong>ï¼šCoxå›å½’é€‚ç”¨äºå³åˆ å¤±æ•°æ®ï¼Œé€‚åˆç”Ÿå­˜åˆ†æã€‚</li>
<li><strong>æ— éœ€åˆ†å¸ƒå‡è®¾</strong>ï¼šCoxå›å½’ä¸å‡è®¾ç”Ÿå­˜æ—¶é—´çš„å…·ä½“åˆ†å¸ƒï¼Œæ›´çµæ´»ã€‚</li>
<li><strong>æ¯”ä¾‹é£é™©</strong>ï¼šå‡è®¾ä¸ªä½“é—´çš„é£é™©æ¯”æ’å®šï¼Œç¬¦åˆè®¸å¤šå®é™…åº”ç”¨ã€‚</li>
<li><strong>ç³»æ•°å¯è§£é‡Š</strong>ï¼šç³»æ•°ç›´æ¥è½¬æ¢ä¸ºé£é™©æ¯”ï¼Œæ˜“äºç†è§£ï¼ˆæ­£ç³»æ•°å¢åŠ é£é™©ï¼Œè´Ÿç³»æ•°é™ä½é£é™©ï¼‰ã€‚</li>
<li><strong>å¤šä¸ªåå˜é‡</strong>ï¼šèƒ½åŒæ—¶åˆ†æå¤šä¸ªå› ç´ å¯¹ç”Ÿå­˜æ—¶é—´çš„å½±å“ã€‚</li>
<li><strong>å¹¿æ³›åº”ç”¨äºåŒ»å­¦</strong>ï¼šæ˜¯ä¸´åºŠå’Œæµè¡Œç—…å­¦ç ”ç©¶ä¸­çš„æ ‡å‡†æ–¹æ³•ã€‚</li>
<li><strong>çµæ´»æ€§</strong>ï¼šæ”¯æŒæ—¶å˜åå˜é‡åŠè¿ç»­å’Œåˆ†ç±»é¢„æµ‹å˜é‡ã€‚</li>
<li><strong>é£é™©è¯„åˆ†</strong>ï¼šå¯è®¡ç®—ä¸ªä½“é£é™©è¯„åˆ†ï¼Œé¢„æµ‹ç›¸å¯¹é£é™©ã€‚</li>
</ol>
<h3 data-id="heading-16">1.16. Tobit å›å½’ (Tobit Regression)</h3>
<ul>
<li><strong>ä¸€å¥è¯æ¦‚å¿µ</strong>ï¼šç”¨äºå¤„ç†â€œæˆªæ–­â€æˆ–â€œå®¡æŸ¥â€æ•°æ®ã€‚æ¯”å¦‚æ•°æ®åœ¨æŸä¸ªç‚¹è¢«åˆ‡æ–­äº†ï¼ˆæ¯”å¦‚æ”¶å…¥è°ƒæŸ¥ä¸­ï¼Œé«˜äº100ä¸‡çš„éƒ½è®°ä½œ100ä¸‡ï¼‰ã€‚</li>
<li><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šé¢„æµ‹å®¶åº­åœ¨å¥¢ä¾ˆå“ä¸Šçš„æ”¯å‡ºï¼ˆå¾ˆå¤šäººæ˜¯0ï¼Œæ•°æ®åœ¨0å¤„å †ç§¯ï¼‰ã€ä¼ æ„Ÿå™¨é‡ç¨‹é™åˆ¶å¯¼è‡´çš„æ•°æ®æˆªæ–­ã€‚</li>
</ul>
<p><strong>Tobitå›å½’</strong>æ¨¡å‹ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Tobit å›å½’ (Tobit Regression)</span>
<span class="hljs-keyword">from</span> scipy <span class="hljs-keyword">import</span> stats
<span class="hljs-keyword">from</span> scipy.optimize <span class="hljs-keyword">import</span> minimize

<span class="hljs-comment"># ç”Ÿæˆæ¨¡æ‹Ÿçš„æˆªæ–­æ•°æ®é›†</span>
np.random.seed(<span class="hljs-number">42</span>)

<span class="hljs-comment"># åˆ›å»ºè‡ªå˜é‡</span>
n_samples = <span class="hljs-number">500</span>
X = np.random.normal(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, n_samples)
<span class="hljs-comment"># å‡è®¾çœŸå®å…³ç³»æ˜¯ y = 2*X + errorï¼Œä½†yè¢«æˆªæ–­åœ¨0ä»¥ä¸‹</span>
true_beta = <span class="hljs-number">2.0</span>
true_intercept = <span class="hljs-number">0.5</span>
true_sigma = <span class="hljs-number">1.0</span>

<span class="hljs-comment"># ç”Ÿæˆæœªæˆªæ–­çš„çœŸå®å€¼</span>
y_true = true_intercept + true_beta * X + np.random.normal(<span class="hljs-number">0</span>, true_sigma, n_samples)

<span class="hljs-comment"># è®¾ç½®æˆªæ–­ç‚¹ï¼ˆä¾‹å¦‚ï¼šä½äº0çš„å€¼éƒ½è®°å½•ä¸º0ï¼‰</span>
lower_limit = <span class="hljs-number">0</span>
y_observed = np.where(y_true &lt; lower_limit, lower_limit, y_true)

<span class="hljs-comment"># æ ‡è®°è¢«æˆªæ–­çš„è§‚æµ‹å€¼</span>
censored_mask = y_observed == lower_limit

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”Ÿæˆäº†<span class="hljs-subst">{n_samples}</span>ä¸ªæ ·æœ¬"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"å…¶ä¸­<span class="hljs-subst">{np.<span class="hljs-built_in">sum</span>(censored_mask)}</span>ä¸ªæ ·æœ¬è¢«æˆªæ–­ï¼ˆå°äºç­‰äº<span class="hljs-subst">{lower_limit}</span>ï¼‰"</span>)

<span class="hljs-comment"># å®ç°Tobitå›å½’æ¨¡å‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TobitRegression</span>:
    <span class="hljs-comment"># ... çœç•¥ ...</span>

<span class="hljs-comment"># æ‹ŸåˆTobitå›å½’æ¨¡å‹</span>
tobit_model = TobitRegression(lower_limit=lower_limit)
tobit_model.fit(X, y_observed)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Tobitå›å½’ç»“æœ:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æˆªè·: <span class="hljs-subst">{tobit_model.intercept:<span class="hljs-number">.3</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç³»æ•°: <span class="hljs-subst">{tobit_model.beta:<span class="hljs-number">.3</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ ‡å‡†å·®: <span class="hljs-subst">{tobit_model.sigma:<span class="hljs-number">.3</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"çœŸå®æˆªè·: <span class="hljs-subst">{true_intercept}</span>, çœŸå®ç³»æ•°: <span class="hljs-subst">{true_beta}</span>, çœŸå®æ ‡å‡†å·®: <span class="hljs-subst">{true_sigma}</span>"</span>)

<span class="hljs-comment"># ç»˜åˆ¶ç»“æœå›¾åƒ</span>
<span class="hljs-comment"># ... çœç•¥ ...</span>

<span class="hljs-comment"># è¾“å‡ºä¸€äº›ç»Ÿè®¡ä¿¡æ¯</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ¨¡å‹æ¯”è¾ƒ:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"çœŸå®ç³»æ•°: <span class="hljs-subst">{true_beta:<span class="hljs-number">.3</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Tobitå›å½’ç³»æ•°: <span class="hljs-subst">{tobit_model.beta:<span class="hljs-number">.3</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"OLSå›å½’ç³»æ•°: <span class="hljs-subst">{ols_coef[<span class="hljs-number">1</span>]:<span class="hljs-number">.3</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç³»æ•°ä¼°è®¡åå·® (Tobit): <span class="hljs-subst">{<span class="hljs-built_in">abs</span>(tobit_model.beta - true_beta):<span class="hljs-number">.3</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç³»æ•°ä¼°è®¡åå·® (OLS): <span class="hljs-subst">{<span class="hljs-built_in">abs</span>(ols_coef[<span class="hljs-number">1</span>] - true_beta):<span class="hljs-number">.3</span>f}</span>"</span>)

<span class="hljs-comment"># è®¡ç®—å‡æ–¹è¯¯å·®</span>
mse_tobit = np.mean((y_observed - tobit_model.predict(X)) ** <span class="hljs-number">2</span>)
mse_ols = np.mean((y_observed - y_ols_pred) ** <span class="hljs-number">2</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Tobit MSE: <span class="hljs-subst">{mse_tobit:<span class="hljs-number">.3</span>f}</span>"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"OLS MSE: <span class="hljs-subst">{mse_ols:<span class="hljs-number">.3</span>f}</span>"</span>)

<span class="hljs-comment">## è¿è¡Œç»“æœï¼š</span>
<span class="hljs-string">'''
Tobitå›å½’ç»“æœ:
æˆªè·: 0.518
ç³»æ•°: 1.932
æ ‡å‡†å·®: 0.990
çœŸå®æˆªè·: 0.5, çœŸå®ç³»æ•°: 2.0, çœŸå®æ ‡å‡†å·®: 1.0

æ¨¡å‹æ¯”è¾ƒ:
çœŸå®ç³»æ•°: 2.000
Tobitå›å½’ç³»æ•°: 1.932
OLSå›å½’ç³»æ•°: 1.203
ç³»æ•°ä¼°è®¡åå·® (Tobit): 0.068
ç³»æ•°ä¼°è®¡åå·® (OLS): 0.797
Tobit MSE: 1.623
OLS MSE: 0.755
'''</span>
</code></pre>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f79c146ce0114129a73e2bc5491cd08b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767681791&amp;x-signature=j23NsPi43S%2FssDo%2Bxp5CZ%2Bq1G2I%3D" alt="" loading="lazy"/></p>
<p><strong>Tobitå›å½’æ¨¡å‹</strong>çš„ä¼˜åŠ¿ä¸»è¦æœ‰ï¼š</p>
<ol>
<li><strong>å¤„ç†æˆªæ–­æ•°æ®</strong>ï¼šTobitå›å½’é€‚ç”¨äºå¤„ç†åœ¨ç‰¹å®šé˜ˆå€¼å¤„è¢«æˆªæ–­çš„æ•°æ®ï¼ˆå¦‚æ‰€æœ‰å°äº0çš„å€¼è®°å½•ä¸º0ï¼‰ã€‚</li>
<li><strong>æ— åä¼°è®¡</strong>ï¼šä¸æ™®é€šOLSç›¸æ¯”ï¼ŒTobitå›å½’æä¾›æ›´å‡†ç¡®çš„å‚æ•°ä¼°è®¡ï¼Œé¿å…äº†å› æ•°æ®æˆªæ–­å¯¼è‡´çš„åå·®ã€‚</li>
<li><strong>ç»Ÿè®¡æ¨æ–­</strong>ï¼šåŸºäºæœ€å¤§ä¼¼ç„¶ä¼°è®¡ï¼ŒTobitå›å½’æ”¯æŒåˆç†çš„ç»Ÿè®¡æ¨æ–­ï¼ŒåŒ…æ‹¬æ ‡å‡†è¯¯å’Œç½®ä¿¡åŒºé—´çš„è®¡ç®—ã€‚</li>
<li><strong>é€‚ç”¨é¢†åŸŸ</strong>ï¼šå¹¿æ³›åº”ç”¨äºç»æµå’Œç¤¾ä¼šç§‘å­¦ä¸­æ¶‰åŠæ”¶å…¥ã€æ¶ˆè´¹æ”¯å‡ºåŠç”Ÿå­˜åˆ†æç­‰å­˜åœ¨æˆªæ–­æˆ–å®¡æŸ¥æƒ…å†µçš„ç ”ç©¶ã€‚</li>
<li><strong>æ¨¡å‹æ‹Ÿåˆåº¦</strong>ï¼šTobitå›å½’ç³»æ•°æ›´æ¥è¿‘çœŸå®å€¼ï¼Œå¹¶ä¸”é€šå¸¸å…·æœ‰è¾ƒå°çš„å‡æ–¹è¯¯å·®ï¼Œè¡¨æ˜å…¶å¯¹æˆªæ–­æ•°æ®æœ‰æ›´å¥½çš„é€‚åº”æ€§ã€‚</li>
</ol>
<h2 data-id="heading-17">2. å¦‚ä½•é€‰æ‹©åˆé€‚çš„å›å½’æ¨¡å‹ï¼Ÿ</h2>
<p>é¢å¯¹è¿™ä¹ˆå¤šæ¨¡å‹ï¼Œåˆ°åº•è¯¥é€‰å“ªä¸€ä¸ªï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ä¸ªç»´åº¦æ¥åˆ¤æ–­ï¼š</p>
<ol>
<li><strong>çœ‹å› å˜é‡ï¼ˆYï¼‰é•¿ä»€ä¹ˆæ ·</strong>ï¼š
<ul>
<li>æ˜¯<strong>è¿ç»­æ•°å€¼</strong>ï¼ˆå¦‚æˆ¿ä»·ï¼‰ï¼š é¦–é€‰ çº¿æ€§å›å½’ã€‚</li>
<li>æ˜¯<strong>äºŒåˆ†ç±»</strong>ï¼ˆå¦‚ä¹°/ä¸ä¹°ï¼‰ï¼š ç”¨ é€»è¾‘å›å½’ã€‚</li>
<li>æ˜¯<strong>è®¡æ•°</strong>ï¼ˆå¦‚ç‚¹å‡»æ¬¡æ•°ï¼‰ï¼š ç”¨ æ³Šæ¾å›å½’ æˆ– è´ŸäºŒé¡¹å›å½’ã€‚</li>
<li>æ˜¯<strong>ç”Ÿå­˜æ—¶é—´</strong>ï¼ˆå¦‚å­˜æ´»å¤©æ•°ï¼‰ï¼š ç”¨ Coxå›å½’ã€‚</li>
<li>æœ‰<strong>æˆªæ–­</strong>ï¼ˆå¦‚ä¸Šé™å°é¡¶ï¼‰ï¼š ç”¨ Tobitå›å½’ã€‚</li>
</ul>
</li>
<li><strong>çœ‹æ•°æ®æ˜¯å¦æœ‰é—®é¢˜</strong>ï¼š
<ul>
<li><strong>å¼‚å¸¸å€¼å¾ˆå¤š</strong>ï¼š è€ƒè™‘ åˆ†ä½æ•°å›å½’ æˆ– Huberå›å½’ï¼ˆé²æ£’å›å½’ï¼‰ã€‚</li>
<li><strong>ç‰¹å¾éçº¿æ€§</strong>ï¼š å°è¯• å¤šé¡¹å¼å›å½’ æˆ– SVRã€‚</li>
<li><strong>ç‰¹å¾æ•° &gt; æ ·æœ¬æ•°</strong>ï¼Œæˆ–ç‰¹å¾<strong>ä¸¥é‡å…±çº¿æ€§</strong>ï¼š å¿…é¡»ä¸Šæ­£åˆ™åŒ–æ‰‹æ®µï¼Œç”¨ å²­å›å½’ã€Lassoã€ElasticNetï¼Œæˆ–è€…é™ç»´ç±»çš„ PCR/PLSã€‚</li>
</ul>
</li>
<li><strong>çœ‹æ¨¡å‹ç›®çš„</strong>ï¼š
<ul>
<li>ä¸ºäº†<strong>è§£é‡Šç°è±¡</strong>ï¼š ç®€å•çš„çº¿æ€§/é€»è¾‘å›å½’æœ€å¥½è§£é‡Šã€‚</li>
<li>ä¸ºäº†<strong>ç²¾å‡†é¢„æµ‹</strong>ï¼š SVRã€ç”šè‡³æ›´å¤æ‚çš„æœºå™¨å­¦ä¹ æ¨¡å‹ï¼ˆå¦‚XGBoostç­‰ï¼Œè™½ä¸åœ¨æ­¤åˆ—ä½†å¸¸è¢«æ¯”è¾ƒï¼‰å¯èƒ½æ›´å¥½ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-18">3. æ€»ç»“</h2>
<p>æ²¡æœ‰æœ€å¥½çš„æ¨¡å‹ï¼Œåªæœ‰æœ€é€‚åˆæ•°æ®çš„æ¨¡å‹ã€‚</p>
<p>å¯¹äºåˆå­¦è€…ï¼Œå…ˆç”»å›¾çœ‹æ•°æ®åˆ†å¸ƒï¼Œç„¶åä»æœ€ç®€å•çš„çº¿æ€§å›å½’å¼€å§‹å°è¯•ï¼Œå‘ç°é—®é¢˜ï¼ˆå¦‚æ‹Ÿåˆä¸å¥½ã€è¿‡æ‹Ÿåˆï¼‰åå†é€æ­¥å°è¯•æ›´å¤æ‚çš„å˜ä½“ï¼Œæ˜¯æœ€å¥½çš„å­¦ä¹ è·¯å¾„ã€‚</p>
<p>ä¸ºäº†æ–¹ä¾¿å¤§å®¶å°è¯•å„ç§å›å½’æ¨¡å‹ï¼Œæ–‡ä¸­å„ä¸ªç¤ºä¾‹ä¸­çš„æ•°æ®éƒ½æ˜¯æ¨¡æ‹Ÿçš„ï¼Œä¸éœ€è¦å¦å¤–ä¸‹è½½å’Œçˆ¬å–ã€‚</p>
<p>äº†è§£å’ŒæŒæ¡å„ç§å›å½’æ¨¡å‹æ²¡æœ‰æ·å¾„ï¼Œæœ€å¥½çš„æ–¹å¼å°±æ˜¯æŠŠæ–‡ä¸­ä»£ç éƒ½å®é™…è¿è¡Œä¸€æ¬¡ï¼Œæ”¹æ”¹æ•°æ®å’Œè®­ç»ƒå‚æ•°ï¼Œå†åå¤è¿è¡Œä½“ä¼šä¸‹æ•ˆæœã€‚</p>
<p>å®Œæ•´çš„ä»£ç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Furl11.ctfile.com%2Ff%2F45455611-8586706866-edb36d%3Fp%3D6872" target="_blank" title="https://url11.ctfile.com/f/45455611-8586706866-edb36d?p=6872" ref="nofollow noopener noreferrer">16ç§å›å½’åˆ†ææ€»ç»“.ipynb</a> (è®¿é—®å¯†ç : 6872)</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI ç¼–ç¨‹ï¼šé‡æ„å·¥ä½œæµçš„æ€ç»´ä¸å®è·µ]]></title>    <link>https://juejin.cn/post/7589214068093779987</link>    <guid>https://juejin.cn/post/7589214068093779987</guid>    <pubDate>2025-12-30T06:47:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589214068093779987" data-draft-id="7589214068093566995" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI ç¼–ç¨‹ï¼šé‡æ„å·¥ä½œæµçš„æ€ç»´ä¸å®è·µ"/> <meta itemprop="keywords" content="åç«¯,AIç¼–ç¨‹,Trae"/> <meta itemprop="datePublished" content="2025-12-30T06:47:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¶æ„ç²¾è¿›ä¹‹è·¯"/> <meta itemprop="url" content="https://juejin.cn/user/3746752294032328"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI ç¼–ç¨‹ï¼šé‡æ„å·¥ä½œæµçš„æ€ç»´ä¸å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3746752294032328/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¶æ„ç²¾è¿›ä¹‹è·¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T06:47:03.000Z" title="Tue Dec 30 2025 06:47:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong><code>æœ¬æ–‡ç³»ä½œè€… [æ¶æ„ç²¾è¿›ä¹‹è·¯] åŸåˆ›ï¼Œè‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ï¼Œæœªç»æˆæƒç¦æ­¢ä»»ä½•å½¢å¼çš„è½¬è½½ã€æŠ„è¢­æˆ–ç›—ç”¨ï¼Œè¿è€…å¿…ç©¶ã€‚</code></strong></p>
<p>å¼¹æŒ‡é—´ï¼Œå²åºæ›´è¿­ï¼Œåˆè‡³å¹´æœ«ï¼Œè¿™ä¸€å¹´æˆ‘ä»¬ä¸æ–­å¥‹æ–—ï¼Œä¸æ–­å¿™ç¢Œï¼ŒçœŸçš„å¥½ä¼¼ä¸€ç¬é—´ï¼Œå°±æ¥åˆ°äº† 2025 å¹´åº•çš„æ—¶é—´ã€‚</p>
<p>2025 å¹´ï¼Œæ˜¯ AI æŠ€æœ¯å‘å±•çªé£çŒ›è¿›çš„ä¸€å¹´ã€‚æ›¾ç»åªå­˜åœ¨äºæƒ³è±¡ä¸­çš„æ™ºèƒ½åŠ©æ‰‹ï¼Œå¦‚ä»Šèƒ½ç²¾å‡†è¯»æ‡‚éœ€æ±‚ã€é«˜æ•ˆå¤„ç†ä»»åŠ¡ï¼›æ›¾ç»ä¾èµ–äººå·¥çš„ç¹çå·¥ä½œï¼Œå¦‚ä»Šåœ¨ AI çš„åŠ æŒä¸‹å˜å¾—ç®€å•å¿«æ·ï¼›å°±è¿åˆ›ä½œã€è®¾è®¡è¿™äº›å……æ»¡äººæ–‡è‰²å½©çš„é¢†åŸŸï¼Œä¹Ÿå¤šäº†ä¸€ä»½æ™ºèƒ½å·¥å…·çš„åŠ©åŠ›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/650ef7b9ba3d47d69770701db69b2f55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p6E57K-6L-b5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767682023&amp;x-signature=KBYsxjXx%2BzNzwBpXGEL7%2FPY%2Bg8o%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸€å¹´ï¼ŒAI ä¸å†æ˜¯é¥è¿œçš„ç§‘æŠ€æ¦‚å¿µï¼Œè€Œæ˜¯æ‚„ç„¶èå…¥äº†å·¥ä½œä¸ç”Ÿæ´»çš„è§’è§’è½è½ã€‚æ­£å¥½è·Ÿéšã€Œæ˜é‡‘ Â· å¹´ç»ˆæŠ€æœ¯å¾æ–‡ã€æ´»åŠ¨ï¼Œä¸€èµ·æ€»ç»“è®°å½•ä¸‹AI ç¼–ç¨‹çš„å¿ƒå¾—ä½“ä¼šã€‚</p>
<h2 data-id="heading-0">ä¸€ã€Vibe Coding åˆ°åº•æ˜¯ä¸ªå•¥ï¼Ÿ</h2>
<p>ä»Šå¹´ AI ç•Œæœ‰ä¸€ä¸ªå¾ˆæ½®ã€å¾ˆé…·çš„æ–°è¯å„¿ï¼šâ€œ<strong>Vibe Coding</strong>â€ï¼Œä¹ä¸€å¬æœ‰ç‚¹æ‡µï¼Œåˆ°åº•å•¥æ˜¯â€œVibe Codingâ€ï¼Ÿå†™ä»£ç è¿˜è¦è®²ç©¶ä¸ªæ°›å›´æ„Ÿå—ï¼Ÿ</p>
<p>ä»Šå¤©æˆ‘å°±ä»¥ä¸€ä¸ªç å†œçš„è§†è§’ï¼ŒèŠèŠå¯¹ â€œVibe Codingâ€ çš„ç†è§£ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b785914e0214b6aa3b3c114472724a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p6E57K-6L-b5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767682023&amp;x-signature=uWAdQBVoGe8N2IVxoEobAv%2FclRU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-1">1.1 ä»€ä¹ˆæ˜¯ Vibe Codingï¼Ÿ</h3>
<p>Vibe æœ¬æ¥å°±æ˜¯â€œæ°›å›´â€ã€â€œæ„Ÿè§‰â€çš„æ„æ€ï¼Œæ‰€ä»¥ç›´è¯‘è¿‡æ¥å°±æ˜¯â€œæ°›å›´ç¼–ç¨‹â€æˆ–â€œæ²‰æµ¸å¼ç¼–ç¨‹â€ã€‚ä½†è¿™é‡Œçš„â€œæ²‰æµ¸â€ä¸ä»…ä»…æ˜¯è®©ä½ æ²‰æµ¸åœ¨ä¸€ä¸ªæœ‰ä»ªå¼æ„Ÿçš„ç¼–ç¨‹ç¯å¢ƒé‡Œï¼Œæ›´é‡è¦çš„æ˜¯å®ƒé¢ è¦†äº†æˆ‘ä»¬ä»¥å¾€å†™ä»£ç çš„æ–¹å¼ã€‚</p>
<p><strong>æˆ‘ç›´æ¥ä¸Šæ ¸å¿ƒè§‚ç‚¹ï¼šå°±æ˜¯ä»ã€Œè®¡ç®—æœºè¯­è¨€æè¿°å·¥ä½œæµç¨‹ã€åˆ°ã€Œè‡ªç„¶è¯­è¨€æè¿°å·¥ä½œæµç¨‹ã€çš„è½¬å˜ã€‚</strong></p>
<p>æ‰“ç ´ç¼–ç¨‹é—¨æ§›ï¼šAI è®©æ¯ä¸ªäººéƒ½èƒ½"ç¼–ç¨‹"</p>
<p>Vibe Coding å‹æ ¹å°±ä¸å…³å¿ƒä½ ä»£ç å…·ä½“æ€ä¹ˆå®ç°çš„ï¼Œæ ¸å¿ƒå…³æ³¨ç‚¹æ˜¯ä»£ç ç”Ÿæˆçš„ç»“æœå¯¹ä¸å¯¹ã€‚è‡³äºå®ç°é€»è¾‘ã€åº•å±‚ç»†èŠ‚è¿™äº›ç¹ççš„æ´»ï¼Œéƒ½äº¤ç»™ AI å»æå®šã€‚æˆ‘åªéœ€è¦ç›¯ç€æ•ˆæœï¼Œè§‰å¾—å“ªé‡Œä¸å¯¹ã€å“ªé‡Œæœ‰é—®é¢˜ï¼Œå°±ç›´æ¥æ”¹ Promptï¼Œé‡æ–°æéœ€æ±‚ï¼ŒAI ä¼šè‡ªåŠ¨å¸®ä½ è°ƒæ•´å’Œä¼˜åŒ–ï¼Œç›´åˆ°æœ€åç»“æœå®Œå…¨ç¬¦åˆä½ çš„é¢„æœŸä¸ºæ­¢ã€‚</p>
<p>æ•´ä¸ªè¿‡ç¨‹ä½ éƒ½æ²‰æµ¸åœ¨ â€œ<strong>è¯´æƒ³æ³•â€”&gt;çœ‹ç»“æœâ€”&gt;ç»§ç»­è°ƒæ•´â€”&gt;å†å‡ºç»“æœ</strong>â€ çš„å¾ªç¯é‡Œï¼Œæ•ˆç‡é«˜å¾—é£èµ·ã€‚</p>
<p>æˆ‘ç”»äº†ä¸ªå¤§æ¦‚æµç¨‹å›¾ï¼Œæ‰§è¡Œæµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1221382d5444ce3a2ec8e42121b64d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p6E57K-6L-b5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767682023&amp;x-signature=eN%2BXnXPHkHn7ufQrDSHFTb5kCRc%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>ä¸¾ä¸ªç”Ÿæ´»åŒ–çš„ä¾‹å­ï¼šå°±åƒç‚¹å¤–å–ä¸€æ ·ï¼Œä½ åªç®¡é€‰èœï¼ŒAI å¸®ä½ åšã€‚èœç«¯ä¸Šæ¥ä¸åˆå£å‘³ï¼Ÿä½ ç›´æ¥ç‚¹è¯„å®ƒï¼AI å¨å­ç«‹åˆ»å†æ”¹ï¼Œç›´åˆ°å–‚åˆ°ä½ æ»¡æ„ã€‚</p>
</blockquote>
<h3 data-id="heading-2">1.2 æ ¸å¿ƒæç‚¼ï¼šå·¥ä½œæµæ€ç»´</h3>
<p>ä¼ ç»Ÿç¼–ç¨‹ vs Vibe Codingï¼šå¼€å‘æ¨¡å¼çš„æ ¸å¿ƒå˜é©</p>
<p><strong>1ã€ä¼ ç»Ÿç¼–ç¨‹ï¼šä»¥æŠ€æœ¯å®ç°ä¸ºæ ¸å¿ƒ</strong></p>
<p>ä¼ ç»Ÿç¼–ç¨‹å›´ç»•<strong>ç¨‹åºã€ç¨‹åºå‘˜ã€è½¯ä»¶å·¥ç¨‹</strong>ä¸‰å¤§æ”¯æŸ±å±•å¼€ï¼Œå…·æœ‰æ˜¾è‘—ç‰¹ç‚¹ï¼š</p>
<ul>
<li>
<p>å…¥é—¨é—¨æ§›é«˜ï¼Œå­¦ä¹ å‘¨æœŸé•¿</p>
</li>
<li>
<p>éœ€ç³»ç»ŸæŒæ¡ç¼–ç¨‹è¯­è¨€è¯­æ³•ã€å¼€å‘æ¡†æ¶ã€è°ƒè¯•æŠ€å·§ç­‰æŠ€æœ¯ç»†èŠ‚</p>
</li>
<li>
<p>æ ¸å¿ƒè¦æ±‚æ˜¯ç¨‹åºå‘˜æ˜ç¡®çŸ¥é“ â€œæ€ä¹ˆåšâ€ï¼Œé€šè¿‡æ‰‹åŠ¨ç¼–ç å®ç°åŠŸèƒ½</p>
</li>
</ul>
<p><strong>2ã€Vibe Codingï¼šä»¥éœ€æ±‚æè¿°ä¸ºæ ¸å¿ƒ</strong></p>
<p>Vibe Coding æ˜¯ä¸€ç§ä¾æ‰˜ AI èƒ½åŠ›çš„æ–°å‹å¼€å‘æ¨¡å¼ï¼Œæ ¸å¿ƒé€»è¾‘é«˜åº¦èšç„¦ï¼š</p>
<ul>
<li>
<p>ç”¨è‡ªç„¶è¯­è¨€ç²¾å‡†æè¿°ä¸šåŠ¡éœ€æ±‚ä¸å·¥ä½œæµ</p>
</li>
<li>
<p>ç”± AI è‡ªåŠ¨å®Œæˆä»£ç ç”Ÿæˆã€ä»»åŠ¡æ‰§è¡Œä¸ç»†èŠ‚å¤„ç†</p>
</li>
<li>
<p>æ ¸å¿ƒè¦æ±‚æ˜¯ä½¿ç”¨è€…æ¸…æ™°å®šä¹‰ â€œåšä»€ä¹ˆâ€ï¼Œæ— éœ€çº ç»“æŠ€æœ¯å®ç°è·¯å¾„</p>
</li>
</ul>
<p><strong>3ã€Vibe Coding æ ¸å¿ƒç‰¹å¾æ€»ç»“</strong></p>
<ol>
<li>
<p><strong>æœ¬è´¨æ˜¯ â€œç”¨è‡ªç„¶è¯­è¨€å®šä¹‰å·¥ä½œæµâ€</strong></p>
<ol>
<li>
<p>æ‘†è„±ç¼–ç¨‹è¯­è¨€è¯­æ³•ã€æ¡†æ¶çš„æŸç¼šï¼Œæ— éœ€ä¸“ä¸šç¼–ç¨‹åŸºç¡€</p>
</li>
<li>
<p>æ ¸å¿ƒé—¨æ§›åœ¨äº<strong>å¯¹ä¸šåŠ¡æµç¨‹çš„æ·±åº¦ç†è§£</strong></p>
</li>
<li>
<p>é‡å¿ƒä» â€œæŠ€æœ¯å®ç°â€ è½¬å‘ â€œéœ€æ±‚å®šä¹‰â€</p>
</li>
</ol>
</li>
<li>
<p><strong>å¼€å‘æ¨¡å¼å‡çº§ï¼šä» â€œäººåšâ€ åˆ° â€œäººæƒ³ï¼ŒAI åšâ€</strong></p>
<ol>
<li>
<p><strong>äºº</strong>çš„è§’è‰²ï¼šéœ€æ±‚æå‡ºè€…ã€æµç¨‹è®¾è®¡è€…ã€ç»“æœå®¡æ ¸è€…</p>
</li>
<li>
<p><strong>AI</strong>çš„è§’è‰²ï¼šä»£ç ç”Ÿæˆå™¨ã€ä»»åŠ¡æ‰§è¡Œè€…ã€ç»†èŠ‚å¤„ç†è€…</p>
</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd29a4a418d747989e7c76af1eef97c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p6E57K-6L-b5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767682023&amp;x-signature=SdwjHN78cWYRszsK0p1o5zWGC5U%3D" alt="" loading="lazy"/></p>
</li>
<li>
<p><strong>é€‚ç”¨åœºæ™¯æ¸…æ™°åˆ’åˆ†</strong></p>
<ol>
<li>
<p><strong>é«˜åº¦é€‚é…åœºæ™¯</strong>ï¼šMVP äº§å“å¿«é€ŸéªŒè¯ã€å†…éƒ¨å·¥å…·å¼€å‘ï¼ˆæ•°æ®å¤„ç†ã€æ–‡ä»¶æ•´ç†ç­‰ï¼‰ã€åˆ›æ„æ–¹æ¡ˆåŸå‹æµ‹è¯•</p>
</li>
<li>
<p><strong>æš‚ä¸é€‚ç”¨åœºæ™¯</strong>ï¼šå¤æ‚ä¸šåŠ¡é€»è¾‘å¼€å‘ï¼ˆéœ€äººå·¥å†³ç­–ä¸é€»è¾‘æ ¡éªŒï¼‰ã€æ€§èƒ½å…³é”®è·¯å¾„æ„å»ºï¼ˆéœ€æ·±åº¦äººå·¥ä¼˜åŒ–ï¼‰</p>
</li>
</ol>
</li>
</ol>
<h2 data-id="heading-3">äºŒã€ç¨‹åºå‘˜è§†è§’ä¸‹çš„ Vibe Coding</h2>
<h3 data-id="heading-4">2.1 åˆ©ç”¨ Trea è¿›è¡Œ Vibe Coding çš„åº”ç”¨å®è·µ</h3>
<blockquote>
<p>Trae.ai æ˜¯ä¸ª AI ç¼–ç¨‹ IDEï¼Œå­—èŠ‚è·³åŠ¨çš„äº§å“ï¼Œç›®å‰æ˜¯å…è´¹ä½¿ç”¨ï¼Œå†™ä»£ç ã€æŸ¥æ–‡æ¡£ã€åŠ æ¥å£éƒ½å¯ä»¥ï¼Œå’Œå®ƒå¯¹è¯å°±èƒ½æ”¹åŠŸèƒ½ã€æŸ¥é—®é¢˜ï¼Œäº‹åŠåŠŸå€ã€‚</p>
</blockquote>
<p><strong>1ã€ç”Ÿæˆæç¤ºè¯</strong></p>
<p>å†™ä¸å¥½æç¤ºè¯ï¼Œæ²¡å…³ç³»ï¼Œè¿™ä¸€æ­¥AIå¯ä»¥å¸®æˆ‘ä»¬å¾ˆå¥½çš„æå®šï¼</p>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmovie.douban.com%2Ftop250" target="_blank" title="https://movie.douban.com/top250" ref="nofollow noopener noreferrer">movie.douban.com/top250</a> æˆ‘å¸Œæœ›è·å–è¿™ä¸ªç½‘ç«™çš„æ•°æ®ï¼Œå¸®æˆ‘ç”Ÿæˆä¸€ä»½çˆ¬è™«é¡¹ç›®çš„æç¤ºè¯</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41f764689d14469b9348f88006982206~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p6E57K-6L-b5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767682023&amp;x-signature=5EY2%2FlYUyTinzndGnWmcd39bthI%3D" alt="" loading="lazy"/></p>
<p><strong>2ã€ç”Ÿæˆé¡¹ç›®ä»£ç å¹¶æ‰§è¡Œ</strong></p>
<p>æœ‰äº†æç¤ºè¯ï¼Œå¯ä»¥å‚è€ƒå®ƒæ‰§è¡Œï¼Œç”Ÿæˆæˆ‘ä»¬éœ€è¦çš„é¡¹ç›®ä»£ç äº†ã€‚</p>
<p>æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹éœ€è¦æˆ‘ä»¬ç¡®è®¤æ‰§è¡Œçš„æ­¥éª¤ï¼Œä¸€èˆ¬ç¡®è®¤<strong>è¿è¡Œ</strong>å³å¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7967a1153233424c81d7ea371a5a3f11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p6E57K-6L-b5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767682023&amp;x-signature=7pGXdF6ORK7BkFRrdzEwjVXxRyw%3D" alt="" loading="lazy"/></p>
<p>æœ€ç»ˆç”Ÿæˆä¸€ä»½å¯æ‰§è¡Œä»£ç ï¼Œå¹¶å¯æ‰§è¡Œå¹¶éªŒè¯ï¼Œæ•´ä½“æ•ˆç‡éå¸¸é«˜æ•ˆï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1f1ffc5e18f4cae9eedd658cf84aeb5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p6E57K-6L-b5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767682023&amp;x-signature=DTJv2DsErTp%2BXPubsb1nuu7A2jo%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47c8ac228fef4ae8b90eb9f90c3f7f2d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p6E57K-6L-b5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767682023&amp;x-signature=rmY3e7DeRVAUOZ%2B73t1NuDG%2Bweo%3D" alt="" loading="lazy"/></p>
<p><strong>3ã€ç”Ÿæˆå¯æ¸²æŸ“å±•ç¤ºé¡µé¢</strong></p>
<p>ä¸ºäº†æ›´ç›´è§‚çš„æŸ¥çœ‹æ•°æ®ï¼Œç”Ÿæˆå¯è¿è¡Œçš„ Web æœåŠ¡æ¥æ¸²æŸ“è¿™äº›æ•°æ®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8afc437a3c2f4030b2d01a4363ebbdc7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p6E57K-6L-b5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767682023&amp;x-signature=9Reh9nUUFZO5jIQmHs6dVCkuU14%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c754483f27ef4aeea44fdff4d73d38c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p6E57K-6L-b5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767682023&amp;x-signature=%2Fyob%2BO1PFaH45%2FrSkFJxWnj6VSU%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœéœ€è¦æ›´å¥½çš„æŸ¥çœ‹ä½“éªŒï¼Œå¯ä»¥ç»§ç»­è°ƒè¯•æ·»åŠ åˆ†é¡µèƒ½åŠ›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/289ba0383f8a4c438d0e70e7cbc55323~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p6E57K-6L-b5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767682023&amp;x-signature=nu327WLO4IYKfu7PaWaHSvlHXNE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e44cd3ccad4a4e688cb1c59cf4a5a892~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p6E57K-6L-b5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767682023&amp;x-signature=Cv9Z7G9RKAV77D30JcdlvBXkAVI%3D" alt="" loading="lazy"/></p>
<p>ä¸Šè¿°æ•´ä½“æ­¥éª¤éå¸¸é«˜æ•ˆï¼Œå‰åä¸è¿‡å‡ åˆ†é’Ÿè€Œå·²ï¼ŒTrea å ªç§°å¼€å‘åˆ©å™¨ã€‚</p>
<h3 data-id="heading-5">2.2 AI ç¼–ç¨‹çš„ç¼ºç‚¹ä¸æŒ‘æˆ˜</h3>
<p><strong>1ã€å¤©ç”Ÿç¼ºä¹ä¸šåŠ¡åœºæ™¯æ·±åº¦ç†è§£</strong></p>
<ul>
<li><strong>æ ¸å¿ƒç°è±¡</strong></li>
</ul>
<p>AI ç”Ÿæˆçš„ä»£ç ï¼Œç»å¸¸ä¼šé™·å…¥â€œæŠ€æœ¯æ­£ç¡®ï¼Œä¸šåŠ¡å¤±çœŸâ€çš„å›°å¢ƒâ€”â€”è¯­æ³•åˆè§„ã€å¯ç¼–è¯‘è¿è¡Œï¼Œä½†å®Œå…¨ä¸ç¬¦åˆçœŸå®ä¸šåŠ¡çš„çº¦æŸæ¡ä»¶ä¸æ ¸å¿ƒè¯‰æ±‚ã€‚</p>
<ul>
<li><strong>å…¸å‹æ¡ˆä¾‹ï¼šç”µå½±æ•°æ®å±•ç¤ºåˆ—è¡¨åœºæ™¯</strong></li>
</ul>
<p>AI ä»…ç”Ÿæˆé€šç”¨çš„ç”µå½±æ•°æ®åˆ—è¡¨å±•ç¤ºä»£ç ï¼Œå´å¿½ç•¥è±†ç“£Top250é¡¹ç›®çš„æ ¸å¿ƒä¸šåŠ¡è§„åˆ™ï¼š</p>
<ul>
<li>
<p>ä¸šåŠ¡ä¸­éœ€æŒ‰â€œè¯„åˆ†é™åºã€ä¸Šæ˜ æ—¶é—´ç­›é€‰â€åŒç»´åº¦æ’åºå±•ç¤ºç”µå½±</p>
</li>
<li>
<p>éœ€å®ç°åˆ†é¡µåŠ è½½ï¼ˆé¿å…ä¸€æ¬¡æ€§åŠ è½½250æ¡æ•°æ®å¡é¡¿ï¼‰ã€æ•°æ®å¼‚å¸¸å…œåº•ï¼ˆéƒ¨åˆ†ç”µå½±ä¿¡æ¯ç¼ºå¤±æ—¶çš„å‹å¥½å±•ç¤ºï¼‰ç­‰æ ¸å¿ƒé€»è¾‘</p>
</li>
</ul>
<p>æœ€ç»ˆç»“æœæ˜¯â€œä»£ç çœ‹ä¼¼ä¸“ä¸šï¼Œå®åˆ™æ— æ³•æ»¡è¶³è±†ç“£Top250é¡¹ç›®çš„æ ¸å¿ƒå±•ç¤ºéœ€æ±‚ä¸ç”¨æˆ·ä½“éªŒè¦æ±‚â€ã€‚</p>
<ul>
<li><strong>è§£å†³æ€è·¯</strong></li>
</ul>
<p>ç”±äººæ˜ç¡®å®šä¹‰ä¸å¯è®©æ­¥çš„ä¸šåŠ¡è§„åˆ™ä¸çº¦æŸæ¡ä»¶ï¼Œä¸º AI åˆ’å®šä¸šåŠ¡è¾¹ç•Œã€‚</p>
<p><strong>2ã€å¯¹æ€§èƒ½é—®é¢˜æåº¦ä¸æ•æ„Ÿ</strong></p>
<ul>
<li><strong>æ ¸å¿ƒç°è±¡</strong></li>
</ul>
<p>AI ç”Ÿæˆçš„æ–¹æ¡ˆé€»è¾‘æ— è¯¯ï¼Œä½†å·¥ç¨‹å®ç°æˆæœ¬æé«˜ï¼›å°æ•°æ®é‡æµ‹è¯•æ—¶è¡¨ç°æ­£å¸¸ï¼Œä¸€æ—¦ä¸Šçº¿é¢å¯¹çœŸå®æµé‡ä¾¿ä¼šç¬é—´â€œç¿»è½¦â€ã€‚</p>
<ul>
<li><strong>å…¸å‹æ¡ˆä¾‹</strong></li>
</ul>
<p>æ¡ˆä¾‹ä¸€ï¼šåˆ—è¡¨æ•°æ®åŠ è½½æ€§èƒ½å´©å¡Œ</p>
<p>è¡¥å……å®Œâ€œè¯„åˆ†æ’åºã€ä¸Šæ˜ æ—¶é—´ç­›é€‰â€é€»è¾‘åï¼ŒAI å¿«é€Ÿå®ç°äº†æ•°æ®å±•ç¤ºåŠŸèƒ½ï¼Œä½†æ–¹æ¡ˆå­˜åœ¨è‡´å‘½ç¼ºé™·ï¼šé»˜è®¤ä¸€æ¬¡æ€§åŠ è½½å…¨éƒ¨250æ¡ç”µå½±æ•°æ®ï¼Œæœªåšåˆ†é¡µå¤„ç†ä¸å›¾ç‰‡æ‡’åŠ è½½ä¼˜åŒ–ï¼Œå¯¼è‡´é¡µé¢é¦–æ¬¡åŠ è½½è€—æ—¶è¶… 8 ç§’ï¼Œæ»šåŠ¨æ—¶å‡ºç°æ˜æ˜¾å¡é¡¿ï¼Œç§»åŠ¨ç«¯ç”šè‡³ç›´æ¥ç™½å±ã€‚</p>
<p>æ¡ˆä¾‹äºŒï¼šåˆ—è¡¨æ•°æ®æ¥å£å¼‚å¸¸å¤„ç†ç¼ºå¤±</p>
<p>AI ç»™å‡ºçš„é¡¹ç›®åˆç‰ˆæ–¹æ¡ˆä¸­ï¼Œç›´æ¥è°ƒç”¨è±†ç“£å…¬å¼€æ¥å£è·å–æ•°æ®ï¼Œä½†æœªè®¾è®¡ä»»ä½•å¼‚å¸¸åº”å¯¹é€»è¾‘ï¼šå½“æ¥å£è¯·æ±‚è¶…æ—¶ã€è¿”å›æ•°æ®æ ¼å¼å¼‚å¸¸æˆ–æ¥å£é™æµæ—¶ï¼Œé¡µé¢ç›´æ¥ç©ºç™½æ— æç¤ºï¼Œç”¨æˆ·æ— æ³•åˆ¤æ–­æ˜¯ç½‘ç»œé—®é¢˜è¿˜æ˜¯æœåŠ¡é—®é¢˜ï¼Œä½“éªŒæå·®ã€‚</p>
<ul>
<li><strong>é—®é¢˜æ ¹æº</strong></li>
</ul>
<p>AI çš„ä¼˜åŒ–ç›®æ ‡æ˜¯â€œæ¨ç†é€»è¾‘æ­£ç¡®æ€§â€ï¼Œè€Œéâ€œç³»ç»Ÿé•¿æœŸè¿è¡Œçš„ç¨³å®šæ€§ä¸æˆæœ¬å¯æ§æ€§â€ï¼Œå¤©ç„¶ç¼ºå¤±å·¥ç¨‹åŒ–çš„æ€§èƒ½è€ƒé‡ã€‚</p>
<ul>
<li><strong>è§£å†³æ€è·¯</strong></li>
</ul>
<p>1. äººå…ˆä¸»å¯¼åˆ†æï¼šæ˜ç¡®ç³»ç»Ÿæ€§èƒ½ç“¶é¢ˆæ‰€åœ¨ï¼ˆIOã€CPUã€å†…å­˜ã€æ¨¡å‹åŠ è½½ç­‰ï¼‰ï¼›</p>
<p>2. å†å¼•å¯¼ AI ä¼˜åŒ–ï¼šé’ˆå¯¹æ€§æå‡ºç¼“å­˜æ–¹æ¡ˆã€æœåŠ¡å¸¸é©»åŒ–è®¾è®¡ã€é¢„åŠ è½½æœºåˆ¶ã€èµ„æºæ± æ­å»ºç­‰æ€§èƒ½ä¼˜åŒ–éœ€æ±‚ã€‚</p>
<p><strong>3ã€å¼‚å¸¸ä¸è¾¹ç•Œå¤„ç†ä¸¥é‡ç¼ºå¤±</strong></p>
<ul>
<li><strong>æ ¸å¿ƒç°è±¡</strong></li>
</ul>
<p>AI ç”Ÿæˆçš„ä»£ç åœ¨â€œç†æƒ³æµç¨‹ï¼ˆHappy Pathï¼‰â€ä¸‹è¡¨ç°å®Œç¾ï¼Œä½†ç¼ºä¹å¯¹å¼‚å¸¸åœºæ™¯çš„åº”å¯¹èƒ½åŠ›ï¼Œä¸€æ—¦å‡ºç°æ„å¤–æƒ…å†µä¾¿ç›´æ¥å´©æºƒã€‚</p>
<ul>
<li>
<p><strong>å…¸å‹ç¼ºå¤±çš„å¼‚å¸¸å¤„ç†åœºæ™¯</strong></p>
<ul>
<li>
<p>è±†ç“£æ¥å£è¯·æ±‚è¶…æ—¶ã€è¿”å›æ•°æ®æ ¼å¼å¼‚å¸¸åŠé‡è¯•ç­–ç•¥ç¼ºå¤±ï¼›</p>
</li>
<li>
<p>ç”µå½±å°é¢å›¾åŠ è½½å¤±è´¥ã€éƒ¨åˆ†å­—æ®µï¼ˆå¦‚å¯¼æ¼”ã€æ¼”å‘˜ï¼‰ç¼ºå¤±ç­‰æ•°æ®å¼‚å¸¸çš„å…¼å®¹å¤„ç†ï¼›</p>
</li>
<li>
<p>è±†ç“£æ¥å£é™æµæ—¶çš„é™çº§å±•ç¤ºé€»è¾‘ï¼ˆå¦‚åŠ è½½æœ¬åœ°ç¼“å­˜æ•°æ®ï¼‰ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>é—®é¢˜æœ¬è´¨</strong></p>
</li>
</ul>
<p>AI é»˜è®¤é¢„è®¾â€œç†æƒ³è¿è¡Œç¯å¢ƒâ€ï¼Œä½†çœŸå®ç”Ÿäº§ç¯å¢ƒæ˜¯â€œæŒç»­é¢ä¸´å„ç±»å¼‚å¸¸çš„å¤æ‚ç³»ç»Ÿâ€ï¼Œè¿™ç§è®¤çŸ¥åå·®å¯¼è‡´å…¶æ— æ³•ä¸»åŠ¨æ„å»ºå¥å£®çš„å®¹é”™æœºåˆ¶ã€‚</p>
<ul>
<li><strong>åº”å¯¹æ–¹å¼</strong></li>
</ul>
<p>ç”±äººä¸»åŠ¨è¡¥å……å®Œå–„å®¹é”™ä½“ç³»ï¼šæ˜ç¡®å¼‚å¸¸åˆ†çº§æ ‡å‡†ã€åˆ¶å®šæœåŠ¡é™çº§ç­–ç•¥ã€è®¾è®¡è¶…æ—¶æ§åˆ¶ä¸ç†”æ–­æœºåˆ¶ã€‚</p>
<p><strong>æ ¸å¿ƒæ€»ç»“ï¼šå·¥ç¨‹è´¨é‡çš„é«˜ä½ï¼Œå–å†³äºä½ å¯¹â€œå¤±è´¥ä¸å¼‚å¸¸â€çš„é¢„æœŸæ·±åº¦ã€‚</strong></p>
<h2 data-id="heading-6">ä¸‰ã€å¦‚ä½•æ­£ç¡®ç†è§£é‡æ„å·¥ä½œæµ</h2>
<p>ä¸ªäººå¯¹ [ vibecoding åŠ æˆä¸‹ ] é‡æ„å·¥ä½œæµçš„ç†è§£</p>
<blockquote>
<p>AI ä¸æ˜¯æ¥å½“ä¸»å¨çš„ï¼Œæ˜¯ä¸ºäº†è®©ä¸»å¨ä¸ç”¨å¤©å¤©åˆ‡åœŸè±†</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e44064f08036433f862cb012695e0e52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p6E57K-6L-b5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767682023&amp;x-signature=WbU10AQn2p7yEpxhrTFKKkjdmJU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">3.1 æ„æ€å…¨è‡ªåŠ¨åŒ–å·¥ä½œæµ</h3>
<p><strong>å…³é”®åŸåˆ™ï¼šæ‘’å¼ƒâ€œä¸€æ­¥åˆ°ä½â€çš„å®Œç¾ä¸»ä¹‰ï¼Œå…ˆè®©â€œæµç¨‹è·‘é€šâ€</strong></p>
<p><strong>æ ¸å¿ƒç›®æ ‡</strong>ï¼šæ„å»ºæ— éœ€äººå·¥ä»‹å…¥ï¼Œå³å¯å®Œæˆä»æ•°æ®è·å–ã€å¤„ç†åˆ°å±•ç¤ºçš„å…¨é“¾è·¯è‡ªåŠ¨åŒ–æµç¨‹</p>
<p><strong>é¡¹ç›®æ¡ˆä¾‹ï¼ˆè±†ç“£Top250ç”µå½±æ•°æ®å±•ç¤ºï¼‰</strong>ï¼š</p>
<ul>
<li>
<p>ç¨‹åºè‡ªåŠ¨åŒ–æµç¨‹ï¼šAI ç”Ÿæˆå®šæ—¶ä»»åŠ¡è„šæœ¬ï¼ˆæ¯æ—¥å‡Œæ™¨è§¦å‘ï¼‰â†’ è‡ªåŠ¨è°ƒç”¨è±†ç“£æ¥å£è·å–æœ€æ–°Top250æ•°æ® â†’ AI è‡ªåŠ¨å¤„ç†æ•°æ®æ ¼å¼ï¼ˆæ ‡å‡†åŒ–å­—æ®µã€è¡¥å…¨ç¼ºå¤±å€¼é»˜è®¤å€¼ï¼‰â†’ è‡ªåŠ¨åŒæ­¥è‡³å‰ç«¯å±•ç¤ºæ•°æ®åº“ â†’ å‰ç«¯é¡µé¢è‡ªåŠ¨æ‹‰å–æ•°æ®å¹¶æ¸²æŸ“</p>
</li>
<li>
<p>è½åœ°ä¼˜å…ˆçº§ï¼šå…ˆå®ç°â€œæ— äººå·¥å¹²é¢„çš„åŸºç¡€æ•°æ®å±•ç¤ºâ€ï¼Œæš‚ä¸çº ç»“ç»†èŠ‚ä¼˜åŒ–ï¼ˆå¦‚æè‡´åŠ è½½é€Ÿåº¦ã€ä¸ªæ€§åŒ–ç­›é€‰ï¼‰ï¼›å¾…æµç¨‹ç¨³å®šè·‘é€šåï¼Œå†é’ˆå¯¹æ€§è¿­ä»£è‡ªåŠ¨åŒ–ä¼˜åŒ–é€»è¾‘</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78603660413d4434963e2862b4c00e47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p6E57K-6L-b5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767682023&amp;x-signature=po4wKE0P2HWAiXqzxGlWELYp5u4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">3.2 äººçš„ä»·å€¼ä¸å¯å¿½è§†</h3>
<p><strong>å…³é”®åŸåˆ™</strong>ï¼š<strong>äººçš„æ ¸å¿ƒä»·å€¼åœ¨äº --- å†³ç­–ã€å®¡æ ¸ã€ä¼˜åŒ–</strong></p>
<p><strong>æ ¸å¿ƒç›®æ ‡</strong>ï¼šåœ¨å…³é”®èŠ‚ç‚¹åŠ å…¥äººå·¥å®¡æ ¸å’Œä¼˜åŒ–ï¼Œé¿å…è‡ªåŠ¨åŒ–æµç¨‹â€œè·‘åâ€</p>
<p><strong>é¡¹ç›®æ¡ˆä¾‹ï¼ˆè±†ç“£Top250ç”µå½±æ•°æ®å±•ç¤ºï¼‰</strong>ï¼š</p>
<ul>
<li>
<p>å†³ç­–ç¯èŠ‚ï¼šç¡®å®šæ ¸å¿ƒä¸šåŠ¡è§„åˆ™ï¼ˆå¦‚â€œè¯„åˆ†é™åº+ä¸Šæ˜ æ—¶é—´ç­›é€‰â€çš„æ’åºé€»è¾‘ã€åˆ†é¡µæ¡æ•°è®¾ç½®ã€å¼‚å¸¸æ•°æ®å…œåº•è§„åˆ™ï¼‰ï¼Œä¸ºAIè‡ªåŠ¨åŒ–æµç¨‹åˆ’å®šè¾¹ç•Œï¼›</p>
</li>
<li>
<p>å®¡æ ¸ç¯èŠ‚ï¼šåœ¨â€œæ•°æ®åŒæ­¥è‡³å±•ç¤ºæ•°æ®åº“â€å‰å¢è®¾äººå·¥å®¡æ ¸èŠ‚ç‚¹ï¼Œæ ¡éªŒAIå¤„ç†åçš„æ•°æ®å‡†ç¡®æ€§ï¼ˆå¦‚æ˜¯å¦å­˜åœ¨é”™è¯¯è¯„åˆ†ã€ç¼ºå¤±å…³é”®ç”µå½±ä¿¡æ¯ç­‰ï¼‰ï¼Œé¿å…é”™è¯¯æ•°æ®ç›´æ¥å±•ç¤ºç»™ç”¨æˆ·ï¼›</p>
</li>
<li>
<p>ä¼˜åŒ–ç¯èŠ‚ï¼šç›‘æ§è‡ªåŠ¨åŒ–æµç¨‹è¿è¡ŒçŠ¶æ€ï¼ˆå¦‚æ¥å£è¯·æ±‚æˆåŠŸç‡ã€é¡µé¢åŠ è½½æ€§èƒ½ï¼‰ï¼Œé’ˆå¯¹å¡é¡¿ã€æ•°æ®å¼‚å¸¸ç­‰é—®é¢˜ï¼Œå‘AIæå‡ºç²¾å‡†ä¼˜åŒ–éœ€æ±‚ï¼ˆå¦‚æ·»åŠ æ¥å£é‡è¯•æœºåˆ¶ã€ä¼˜åŒ–å›¾ç‰‡åŠ è½½ç­–ç•¥ï¼‰ï¼Œæ¨åŠ¨æµç¨‹è¿­ä»£å‡çº§</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8eda3346b6584fec8ed5939855ebb8a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p6E57K-6L-b5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767682023&amp;x-signature=nHrIZnneTq2gtaWFd8aQR4PvQYE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">å››ã€æ€»ç»“</h2>
<p>å›æœ›è¿™ä¸€å¹´çš„ç‚¹æ»´ï¼Œæˆ‘å†ç»è¯¸å¤šå˜è¿ï¼Œåœ¨è·Œæ’ä¸­æ‘¸ç´¢ï¼Œåœ¨æ±‚ç´¢é‡Œå‰è¡Œã€‚æƒŸæ„¿ä¸è´ŸéŸ¶åï¼Œå§‹ç»ˆå¿ƒæ€€çƒ­å¿±ï¼Œå‘ä¸Šç”Ÿé•¿ï¼Œæ­¥å±¥ä¸åœã€‚</p>
<p>æœ€åï¼Œè·Ÿå¤§å®¶åˆ†äº«ä¸‹è‡ªå·± AI å­¦ä¹ çš„ä¸‰ä¸ªè§‚ç‚¹ï¼š</p>
<p><strong>1ã€LLMå¸¦æ¥çš„ä¸æ˜¯æ›´é«˜å±‚æ¬¡æŠ½è±¡ï¼Œè€Œæ˜¯ä¸åŒæ€§è´¨çš„æŠ½è±¡</strong></p>
<p>ä¼ ç»Ÿç¼–ç¨‹çš„æŠ½è±¡ï¼ˆå¦‚å‡½æ•°ã€ç±»ã€æ¡†æ¶ï¼‰æ˜¯ç¡®å®šæ€§æŠ½è±¡ï¼›LLM çš„æŠ½è±¡åˆ™æ˜¯æ¦‚ç‡æ€§æŠ½è±¡ï¼Œå…¶æœ¬è´¨æ˜¯åŸºäºæµ·é‡æ–‡æœ¬è§„å¾‹ç»Ÿè®¡</p>
<p><strong>2ã€å¤§æ¨¡å‹æŠŠéç¡®å®šæ€§å¼•å…¥äº†è½¯ä»¶å¼€å‘çš„æ ¸å¿ƒè·¯å¾„</strong></p>
<p>ä¼ ç»Ÿè½¯ä»¶å¼€å‘çš„æ ¸å¿ƒè·¯å¾„ï¼ˆéœ€æ±‚â†’è®¾è®¡â†’ç¼–ç â†’æµ‹è¯•â†’éƒ¨ç½²ï¼‰æ˜¯ç¡®å®šæ€§é—­ç¯ï¼Œè€ŒLLMåˆ™ä»ç”Ÿæˆã€ç†è§£ã€è¿­ä»£ç¯èŠ‚çš„éç¡®å®šæ€§æ‰“ç ´äº†è¿™ä¸€é—­ç¯</p>
<p><strong>3ã€è½¯ä»¶å·¥ç¨‹çš„é‡å¿ƒæ­£åœ¨ä»å†™å¯¹çš„ä»£ç è½¬å‘ç®¡ç†æ„å›¾ä¸ç»“æœä¹‹é—´çš„åå·®</strong></p>
<p>ä¼ ç»Ÿè½¯ä»¶å·¥ç¨‹çš„æ ¸å¿ƒæ˜¯ â€œä»£ç æ­£ç¡®æ€§â€ï¼ŒLLM æ™®åŠåï¼Œç¼–ç æ•ˆç‡å¤§å¹…æå‡ï¼Œä½†â€œæ„å›¾ vs ç»“æœâ€åå·®æˆä¸ºæ–°çš„æ ¸å¿ƒé£é™©</p>
<p><strong>Â·ENDÂ·</strong></p>
<p>å¸Œæœ›ä»Šå¤©çš„è®²è§£å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï¼Œè°¢è°¢ï¼</p>
<p>Thanks for reading!</p>
<blockquote>
<p>ä½œè€…ï¼šæ¶æ„ç²¾è¿›ä¹‹è·¯ï¼Œåå¹´ç ”å‘é£é›¨è·¯ï¼Œå¤§å‚æ¶æ„å¸ˆï¼ŒCSDN åšå®¢ä¸“å®¶ï¼Œä¸“æ³¨æ¶æ„æŠ€æœ¯æ²‰æ·€å­¦ä¹ åŠåˆ†äº«ï¼ŒèŒä¸šä¸è®¤çŸ¥å‡çº§ï¼ŒåšæŒåˆ†äº«æ¥åœ°æ°”å„¿çš„å¹²è´§æ–‡ç« ï¼ŒæœŸå¾…ä¸ä½ ä¸€èµ·æˆé•¿ã€‚<br/>
å…³æ³¨å¹¶ç§ä¿¡æˆ‘å›å¤â€œ01â€ï¼Œé€ä½ ä¸€ä»½ç¨‹åºå‘˜æˆé•¿è¿›é˜¶å¤§ç¤¼åŒ…ï¼Œæ¬¢è¿å‹¾æ­ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¾®åš/æœ‹å‹åœˆ/ç‚¹èµ/è¯„è®ºç³»ç»Ÿè®¾è®¡]]></title>    <link>https://juejin.cn/post/7589214068093173779</link>    <guid>https://juejin.cn/post/7589214068093173779</guid>    <pubDate>2025-12-30T05:58:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589214068093173779" data-draft-id="7589126217234726918" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¾®åš/æœ‹å‹åœˆ/ç‚¹èµ/è¯„è®ºç³»ç»Ÿè®¾è®¡"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-30T05:58:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MMM_FanLe"/> <meta itemprop="url" content="https://juejin.cn/user/2835000434372621"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¾®åš/æœ‹å‹åœˆ/ç‚¹èµ/è¯„è®ºç³»ç»Ÿè®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2835000434372621/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MMM_FanLe
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T05:58:49.000Z" title="Tue Dec 30 2025 05:58:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»31åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.aliyun.com%2Farticle%2F706808" target="_blank" title="https://developer.aliyun.com/article/706808" ref="nofollow noopener noreferrer">developer.aliyun.com/article/706â€¦</a></p>
<p>Feedæµå°±æ˜¯ä¸åœæ›´æ–°çš„ä¿¡æ¯å•å…ƒï¼Œåªè¦å…³æ³¨æŸäº›å‘å¸ƒè€…å°±èƒ½è·å–åˆ°æºæºä¸æ–­çš„æ–°é²œä¿¡æ¯ï¼Œç”¨æˆ·å°±å¯ä»¥åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šé€æ¡å»æµè§ˆè¿™äº›ä¿¡æ¯å•å…ƒã€‚
å½“å‰æœ€æµè¡Œçš„Feedæµäº§å“æœ‰å¾®åšã€å¾®ä¿¡æœ‹å‹åœˆã€å¤´æ¡çš„èµ„è®¯æ¨èã€å¿«æ‰‹æŠ–éŸ³çš„è§†é¢‘æ¨èç­‰ï¼Œè¿˜æœ‰ä¸€äº›å˜ç§ï¼Œæ¯”å¦‚ç§ä¿¡ã€é€šçŸ¥ç­‰ï¼Œè¿™äº›ç³»ç»Ÿéƒ½æ˜¯Feedæµç³»ç»Ÿã€‚</p>
<h2 data-id="heading-1">ç‰¹ç‚¹</h2>
<p>Feedæµæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ•°æ®æµï¼Œæ˜¯å°† â€œNä¸ªå‘å¸ƒè€…çš„ä¿¡æ¯å•å…ƒâ€ é€šè¿‡ â€œå…³æ³¨å…³ç³»â€ ä¼ é€ç»™ â€œMä¸ªæ¥æ”¶è€…â€ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b350b788303b4efda32b5cbe2b07eca3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTU1NX0Zhbkxl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767679128&amp;x-signature=ovpRFRdN%2B4w7Mlo%2Fpjkc5LUhmiY%3D" alt="image.png" loading="lazy"/></p>
<p>æ•°æ®åˆ†ç±»</p>
<ul>
<li>å‘å¸ƒè€…æ•°æ®ï¼šå‘å¸ƒè€…äº§ç”Ÿçš„æ•°æ®éœ€è¦æŒ‰ç…§å‘å¸ƒè€…èšåˆï¼Œæ¯”å¦‚å¾®åšçš„ä¸ªäººé¦–é¡µã€æœ‹å‹åœˆçš„ä¸ªäººç©ºé—´ã€‚å¯¹åº”<strong>å­˜å‚¨è¡¨(æ°¸ä¹…ä¿å­˜)</strong>ã€‚</li>
<li>å…³æ³¨å…³ç³»ï¼šç³»ç»Ÿä¸­ä¸ªä½“é—´çš„å…³ç³»ã€‚å¾®åšä¸­æ˜¯å…³æ³¨(å•å‘æµ)ã€æœ‹å‹åœˆæ˜¯äº’å…³(åŒå‘æµ)ã€‚å¯¹åº”<strong>å…³æ³¨è¡¨(æ°¸ä¹…ä¿å­˜)</strong>ã€‚</li>
<li>æ¥å—è€…æ•°æ®ã€‚ä»ä¸åŒå‘é€è€…(å…³æ³¨çš„äºº)é‚£è·å–çš„æ•°æ®ï¼ŒæŒ‰ç…§æŸç§é¡ºåº(ä¸€èˆ¬æ˜¯æ—¶é—´)ç»„ç»‡åœ¨ä¸€èµ·ï¼Œæ¯”å¦‚å¾®åšçš„é¦–é¡µã€æœ‹å‹åœˆé¦–é¡µç­‰ã€‚å¯¹åº”<strong>åŒæ­¥è¡¨(å‘¨æœŸä¿å­˜)</strong>ã€‚</li>
</ul>
<p>äº§å“å±‚é¢éœ€è¦è€ƒè™‘çš„å› ç´ </p>
<ul>
<li>ç”¨æˆ·è§„æ¨¡ï¼šä¸åŒç”¨æˆ·è§„æ¨¡æ¶‰åŠåˆ°åº•å±‚çš„å­˜å‚¨å½¢å¼å¯èƒ½ä¸åŒã€‚</li>
<li>å…³æ³¨å…³ç³»ï¼šå¦‚æœæ˜¯åŒå‘é‚£å°±ä¸å­˜åœ¨å¤§Vï¼Œåä¹‹åˆ™å­˜åœ¨ã€‚</li>
<li>æ’åºè§„åˆ™ï¼šæ˜¯æŒ‰æ—¶é—´è¿˜æ˜¯æŒ‰æ¨èã€‚</li>
</ul>
<h2 data-id="heading-2">äº§å“å®šä¹‰</h2>








































<table><thead><tr><th>ç±»å‹</th><th>å…³æ³¨å…³ç³»</th><th>æ˜¯å¦æœ‰å¤§V</th><th>æ—¶æ•ˆæ€§</th><th>æ’åº</th></tr></thead><tbody><tr><td>å¾®åšç±»</td><td>å•å‘</td><td>æœ‰</td><td>ç§’~åˆ†</td><td>æ—¶é—´</td></tr><tr><td>æŠ–éŸ³ç±»</td><td>å•å‘/æ— </td><td>æœ‰</td><td>ç§’~åˆ†</td><td>æ¨è</td></tr><tr><td>æœ‹å‹åœˆç±»</td><td>åŒå‘</td><td>æ— </td><td>ç§’</td><td>æ—¶é—´</td></tr><tr><td>ç§ä¿¡ç±»</td><td>åŒå‘</td><td>æ— </td><td>ç§’</td><td>æ—¶é—´</td></tr></tbody></table>
<p>ä»ä¸Šé¢è¡¨æ ¼å¯ä»¥çœ‹å‡ºæ¥ï¼Œä¸»è¦åˆ†ä¸ºä¸¤ç§åŒºåˆ†ï¼š</p>
<ul>
<li>
<p>å…³æ³¨å…³ç³»æ˜¯å•å‘è¿˜æ˜¯åŒå‘ï¼š</p>
<ul>
<li>å¦‚æœæ˜¯å•å‘ï¼Œé‚£ä¹ˆå¯èƒ½å°±ä¼šå­˜åœ¨å¤§Væ•ˆåº”ï¼ŒåŒæ—¶æ—¶æ•ˆæ€§å¯ä»¥ä½ä¸€äº›ï¼Œæ¯”å¦‚åˆ°åˆ†é’Ÿçº§åˆ«ï¼›</li>
<li>å¦‚æœæ˜¯åŒå‘ï¼Œé‚£å°±æ˜¯å¥½å‹ï¼Œå¥½å‹çš„æ•°é‡æœ‰é™ï¼Œé‚£ä¹ˆå°±ä¸ä¼šæœ‰å¤§Vï¼Œè¿™æ—¶å€™å› ä¸ºå…³ç³»æ›´äº²å¯†ï¼Œæ—¶æ•ˆæ€§è¦æ±‚ä¼šæ›´é«˜ï¼Œéœ€è¦éƒ½ç§’çº§åˆ«ã€‚</li>
</ul>
</li>
<li>
<p>æ’åºæ˜¯æ—¶é—´è¿˜æ˜¯æ¨èï¼š</p>
<ul>
<li>ç”¨æˆ·å¯¹feedæµæœ€å®¹æ˜“æ¥å—çš„å°±æ˜¯æ—¶é—´ï¼Œç›®å‰å¤§éƒ¨åˆ†éƒ½æ˜¯æ—¶é—´ã€‚</li>
<li>ä½†æ˜¯æœ‰ä¸€äº›åœºæ™¯ï¼Œæ˜¯ä»å…¨ç½‘æ•°æ®é‡Œé¢æ ¹æ®ç”¨æˆ·çš„å–œå¥½ç»™ç”¨æˆ·æ¨èå’Œç”¨æˆ·å–œå¥½åº¦æœ€åŒ¹é…çš„å†…å®¹ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨æ¨èäº†ï¼Œè¿™ç§æƒ…å†µä¸€èˆ¬ä¹Ÿä¼šçœç•¥æ‰å…³æ³¨äº†ï¼Œç›¸å¯¹äºå…³æ³¨äº†å…¨ç½‘æ‰€æœ‰ç”¨æˆ·ï¼Œæ¯”å¦‚æŠ–éŸ³ã€å¤´æ¡ç­‰ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-3">å­˜å‚¨ç»“æ„</h2>
<p>å­˜å‚¨åº“æœ€é‡è¦çš„ç‰¹å¾æœ‰ä¸¤ç‚¹ï¼š</p>
<ol>
<li>æ•°æ®å¯é ä¸ä¸¢å¤±ã€‚</li>
<li>ç”±äºä¼šä¸€ç›´å¢é•¿ï¼Œéœ€è¦æ˜“äºæ°´å¹³æ‰©å±•ã€‚</li>
</ol>
<p>å¯ä»¥é€‰ä¸ºå­˜å‚¨åº“çš„ç³»ç»Ÿå¤§æ¦‚æœ‰ä¸¤ç±»ï¼š</p>






























<table><thead><tr><th>ç‰¹ç‚¹</th><th>åˆ†å¸ƒå¼NoSQL</th><th>å…³ç³»å‹æ•°æ®åº“ï¼ˆåˆ†åº“åˆ†è¡¨ï¼‰</th></tr></thead><tbody><tr><td>å¯é æ€§</td><td>æé«˜</td><td>é«˜</td></tr><tr><td>æ°´å¹³æ‰©å±•èƒ½åŠ›</td><td>çº¿æ€§</td><td>éœ€è¦æ”¹é€ </td></tr><tr><td>æ°´å¹³æ‰©å±•é€Ÿåº¦</td><td>æ¯«ç§’</td><td>æ— </td></tr><tr><td>å¸¸è§ç³»ç»Ÿ</td><td>Tablestoreã€Bigtable</td><td>MySQLã€PostgreSQL</td></tr></tbody></table>
<ul>
<li>å¯¹äºå¯é æ€§ï¼Œåˆ†å¸ƒå¼NoSQLçš„å¯é æ€§è¦é«˜äºå…³ç³»å‹æ•°æ®åº“ï¼Œä¸€èˆ¬éƒ½æ˜¯å­˜å‚¨ä¸‰ä»½ï¼Œå¯é æ€§ä¼šæ›´é«˜ã€‚</li>
<li>æ°´å¹³æ‰©å±•èƒ½åŠ›ï¼šå¯¹äºåˆ†å¸ƒå¼NoSQLæ•°æ®åº“ï¼Œæ•°æ®å¤©ç„¶æ˜¯åˆ†å¸ƒåœ¨å¤šå°æœºå™¨ä¸Šï¼Œå½“ä¸€å°æœºå™¨ä¸Šçš„æ•°æ®é‡å¢å¤§åï¼Œå¯ä»¥é€šè¿‡è‡ªåŠ¨åˆ†è£‚ä¸¤éƒ¨åˆ†ï¼Œç„¶åå°†å…¶ä¸­ä¸€åŠçš„æ•°æ®è¿ç§»åˆ°å¦ä¸€å°æœºå™¨ä¸Šå»ï¼Œè¿™æ ·å°±åšåˆ°äº†çº¿æ€§æ‰©å±•ã€‚è€Œå…³ç³»å‹æ•°æ®åº“éœ€è¦åœ¨æ‰©å®¹æ—¶å†æ¬¡åˆ†åº“åˆ†è¡¨ï¼Œåˆ†ç‰‡ç­–ç•¥å†³å®šæ‰©å±•æˆæœ¬ã€‚
<ul>
<li>å–ä½™ã€‚é¿å…ä½¿ç”¨%Nçš„åˆ†ç‰‡æ–¹å¼ï¼Œè¿™ç§æ–¹å¼æç«¯æƒ…å†µä¸‹æ¶‰åŠæ‰€æœ‰æ•°æ®è¿ç§»ã€‚</li>
<li>ä¸€è‡´æ€§å“ˆå¸Œã€‚ä½¿ç”¨ä¸€è‡´æ€§å“ˆå¸Œå¯ä»¥å°†ç‰©ç†èŠ‚ç‚¹æ˜ å°„ä¸ºå¤šä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œæ·»åŠ èŠ‚ç‚¹æ—¶åªå½±å“éƒ¨åˆ†æ•°æ®ã€‚</li>
<li>èŒƒå›´åˆ†ç‰‡+åŠ¨æ€åˆ†è£‚ã€‚èŠ‚ç‚¹1è´Ÿè´£ID(0,1000),èŠ‚ç‚¹2è´Ÿè´£ID(1000,2000)ã€‚å½“æŸä¸ªèŠ‚ç‚¹è´Ÿè´£çš„IDæ•°æ®é‡å¤ªå¤§æ—¶ä¼šè¿›è¡ŒåŠ¨æ€åˆ†è£‚ï¼Œå³æ‹†åˆ†ä¸ºæ›´å°çš„åˆ†ç‰‡ï¼ŒèŠ‚ç‚¹1.1è´Ÿè´£(0,500)ï¼ŒèŠ‚ç‚¹1.2è´Ÿè´£(500,1000)ã€‚</li>
</ul>
</li>
</ul>
<p>ç»“è®ºï¼š</p>
<ul>
<li>å¦‚æœæ˜¯è‡ªå»ºç³»ç»Ÿï¼Œä¸”ä¸å…·å¤‡åˆ†å¸ƒå¼NoSQLæ•°æ®åº“è¿ç»´èƒ½åŠ›ï¼Œä¸”æ•°æ®è§„æ¨¡ä¸å¤§ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨MySQLã€‚</li>
<li>å¦‚æœæ˜¯åŸºäºäº‘æœåŠ¡ï¼Œé‚£ä¹ˆå°±ç”¨åˆ†å¸ƒå¼NoSQLï¼Œæ¯”å¦‚Tablestoreæˆ–Bigtableã€‚</li>
<li>å¦‚æœæ•°æ®è§„æ¨¡å¾ˆå¤§ï¼Œé‚£ä¹ˆä¹Ÿè¦ç”¨åˆ†å¸ƒå¼NoSQLï¼Œå¦åˆ™å°±æ˜¯èµ°ä¸Šä¸€æ¡ä¸å½’è·¯ã€‚</li>
</ul>
<p>å­˜å‚¨åº“è¡¨è®¾è®¡ç»“æ„(Tablestoreä¸¾ä¾‹)å¦‚ä¸‹ï¼š</p>


























<table><thead><tr><th>ä¸»é”®åˆ—</th><th>ç¬¬ä¸€åˆ—ä¸»é”®</th><th>ç¬¬äºŒåˆ—ä¸»é”®</th><th>å±æ€§åˆ—</th><th>å±æ€§åˆ—</th></tr></thead><tbody><tr><td>åˆ—å</td><td>user_id</td><td>message_id</td><td>content</td><td>other</td></tr><tr><td>è§£é‡Š</td><td>æ¶ˆæ¯å‘é€è€…ç”¨æˆ·ID</td><td>æ¶ˆæ¯é¡ºåºIDï¼Œå¯ä»¥ä½¿ç”¨timestampã€‚</td><td>å†…å®¹</td><td>å…¶ä»–å†…å®¹</td></tr></tbody></table>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03ff1820780546c8b40a39c471f8f669~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTU1NX0Zhbkxl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767679128&amp;x-signature=kwWeaFR79Ymu%2ByTST7NdWZ8sX1c%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-4">åŒæ­¥æ–¹å¼</h2>
<p>å¸¸è§çš„æ–¹å¼æœ‰ä¸‰ç§ï¼š</p>
<ul>
<li><strong>æ¨æ¨¡å¼ï¼ˆå†™æ‰©æ•£ï¼‰</strong>ï¼šå‘é€è€…å‘é€äº†ä¸€ä¸ªæ¶ˆæ¯åï¼Œç«‹å³å°†è¿™ä¸ªæ¶ˆæ¯æ¨é€ç»™æ¥æ”¶è€…ï¼Œä½†æ˜¯æ¥æ”¶è€…æ­¤æ—¶ä¸ä¸€å®šåœ¨çº¿ï¼Œé‚£ä¹ˆå°±éœ€è¦æœ‰ä¸€ä¸ªåœ°æ–¹å­˜å‚¨è¿™ä¸ªæ•°æ®ï¼Œè¿™ä¸ªå­˜å‚¨çš„åœ°æ–¹ç§°ä¸ºï¼š<strong>åŒæ­¥åº“</strong>ã€‚æ¨æ¨¡å¼ä¹Ÿå«å†™æ‰©æ•£çš„åŸå› æ˜¯ï¼Œä¸€ä¸ªæ¶ˆæ¯éœ€è¦å‘é€ä¸ªå¤šä¸ªç²‰ä¸ï¼Œé‚£ä¹ˆè¿™æ¡æ¶ˆæ¯å°±ä¼šå¤åˆ¶å¤šä»½ï¼Œå†™æ”¾å¤§ï¼Œæ‰€ä»¥ä¹Ÿå«å†™æ‰©æ•£ã€‚è¿™ç§æ¨¡å¼ä¸‹ï¼Œ<strong>å¯¹åŒæ­¥åº“çš„è¦æ±‚å°±æ˜¯å†™å…¥èƒ½åŠ›æå¼ºå’Œç¨³å®š</strong>ã€‚è¯»å–çš„æ—¶å€™å› ä¸ºæ¶ˆæ¯å·²ç»<strong>å‘åˆ°æ¥æ”¶è€…çš„æ”¶ä»¶ç®±</strong>äº†ï¼Œåªéœ€è¦è¯»ä¸€æ¬¡è‡ªå·±çš„æ”¶ä»¶ç®±å³å¯ï¼Œè¯»è¯·æ±‚çš„é‡æå°ï¼Œæ‰€ä»¥å¯¹è¯»çš„QPSéœ€æ±‚ä¸å¤§ã€‚å½’çº³ä¸‹ï¼Œæ¨æ¨¡å¼ä¸­å¯¹åŒæ­¥åº“çš„è¦æ±‚åªæœ‰ä¸€ä¸ªï¼šå†™å…¥èƒ½åŠ›å¼ºã€‚</li>
<li><strong>æ‹‰æ¨¡å¼ï¼ˆè¯»æ‰©æ•£ï¼‰</strong>ï¼šè¿™ç§æ˜¯ä¸€ç§æ‹‰çš„æ–¹å¼ï¼Œå‘é€è€…å‘é€äº†ä¸€æ¡æ¶ˆæ¯åï¼Œè¿™æ¡æ¶ˆæ¯ä¸ä¼šç«‹å³æ¨é€ç»™ç²‰ä¸ï¼Œè€Œæ˜¯<strong>å†™å…¥è‡ªå·±çš„å‘ä»¶ç®±</strong>ï¼Œå½“ç²‰ä¸ä¸Šçº¿åå†å»è‡ªå·±å…³æ³¨è€…çš„å‘ä»¶ç®±é‡Œé¢å»è¯»å–ï¼Œä¸€æ¡æ¶ˆæ¯çš„å†™å…¥åªæœ‰ä¸€æ¬¡ï¼Œä½†æ˜¯è¯»å–æœ€å¤šä¼šå’Œç²‰ä¸æ•°ä¸€æ ·ï¼Œè¯»ä¼šæ”¾å¤§ï¼Œæ‰€ä»¥ä¹Ÿå«è¯»æ‰©æ•£ã€‚æ‹‰æ¨¡å¼çš„è¯»å†™æ¯”ä¾‹åˆšå¥½å’Œå†™æ‰©æ•£ç›¸åï¼Œé‚£ä¹ˆå¯¹ç³»ç»Ÿçš„è¦æ±‚æ˜¯ï¼šè¯»å–èƒ½åŠ›å¼ºã€‚å¦å¤–è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªè¯¯åŒºï¼Œå¾ˆå¤šäººåœ¨æœ€å¼€å§‹è®¾è®¡feedæµç³»ç»Ÿæ—¶ï¼Œé¦–å…ˆæƒ³åˆ°çš„æ˜¯æ‹‰æ¨¡å¼ï¼Œå› ä¸ºè¿™ç§å’Œç”¨æˆ·çš„ä½¿ç”¨ä½“æ„Ÿæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯<strong>åœ¨ç³»ç»Ÿè®¾è®¡ä¸Šè¿™ç§æ–¹å¼æœ‰ä¸å°‘ç—›ç‚¹ï¼Œæœ€å¤§çš„æ˜¯æ¯ä¸ªç²‰ä¸éœ€è¦è®°å½•è‡ªå·±ä¸Šæ¬¡è¯»åˆ°äº†å…³æ³¨è€…çš„å“ªæ¡æ¶ˆæ¯ï¼Œå¦‚æœæœ‰1000ä¸ªå…³æ³¨è€…ï¼Œé‚£ä¹ˆè¿™ä¸ªäººéœ€è¦è®°å½•1000ä¸ªä½ç½®ä¿¡æ¯</strong>ï¼Œè¿™ä¸ªé‡å’Œå…³æ³¨é‡æˆæ­£æ¯”çš„ï¼Œè¿œæ¯”ç”¨æˆ·æ•°è¦å¤§çš„å¤šï¼Œè¿™é‡Œè¦ç‰¹åˆ«æ³¨æ„ï¼Œè™½ç„¶åœ¨äº§å“å‰æœŸæ•°æ®é‡å°‘çš„æ—¶å€™è¿™ç§æ–¹å¼å¯ä»¥åº”ä»˜ï¼Œä½†æ˜¯é‡å¤§äº†åå°±ä¼šäº‹å€åŠŸåŠï¼Œå¾—ä¸å¿å¤±ï¼Œåˆ‡è®°åˆ‡è®°ã€‚</li>
<li><strong>æ¨æ‹‰ç»“åˆæ¨¡å¼</strong>ï¼š
<ul>
<li>æŒ‰ç…§ç”¨æˆ·ç¾¤ä½“åˆ†ç±»ï¼šå¤§Væ‹‰ï¼Œæ™®é€šç”¨æˆ·æ¨ã€‚å¤§Vå­˜åœ¨å¤§é‡ç²‰ä¸ï¼Œå¦‚æœé‡‡ç”¨æ¨æ¨¡å¼ï¼Œå¯èƒ½ä¸€æ¡æ¶ˆæ¯ä¼šæ‰©æ•£å‡ ç™¾ä¸‡æ¬¡ã€‚åŸºäºæ­¤ï¼Œé‡‡ç”¨å¤§éƒ¨åˆ†ç”¨æˆ·çš„æ¶ˆæ¯éƒ½æ˜¯å†™æ‰©æ•£ï¼Œåªæœ‰å¤§Væ˜¯è¯»æ‰©æ•£ã€‚</li>
<li>æŒ‰ç…§ç”¨æˆ·æ´»è·ƒçŠ¶æ€åˆ†ç±»ï¼šåœ¨çº¿æ¨ï¼Œç¦»çº¿æ‹‰ã€‚ä»¥å¤§Vä¸¾ä¾‹ï¼Œå¤§Vå‘é€ä¸€æ¡æ¶ˆæ¯åï¼Œå°†æ¶ˆæ¯æ¨é€ç»™åœ¨çº¿çš„ç²‰ä¸ï¼Œå¯¹äºå½“å‰æ—¶åˆ»ç¦»çº¿çš„ç²‰ä¸åœ¨ä¸Šçº¿åï¼Œä»å¤§Vçš„å‘ä»¶ç®±ä¸­æ‹‰å–æ¶ˆæ¯ã€‚</li>
</ul>
</li>
</ul>
<p>ç»“è®ºï¼š</p>
<ul>
<li>å¦‚æœäº§å“ä¸­æ˜¯åŒå‘å…³ç³»ï¼Œé‚£ä¹ˆå°±é‡‡ç”¨æ¨æ¨¡å¼ã€‚</li>
<li>å¦‚æœäº§å“ä¸­æ˜¯å•å‘å…³ç³»ï¼Œä¸”ç”¨æˆ·æ•°å°‘äº1000ä¸‡ï¼Œé‚£ä¹ˆä¹Ÿé‡‡ç”¨æ¨æ¨¡å¼ï¼Œè¶³å¤Ÿäº†ã€‚</li>
<li>å¦‚æœäº§å“æ˜¯å•å‘å…³ç³»ï¼Œå•ç”¨æˆ·æ•°å¤§äº1000ä¸‡ï¼Œé‚£ä¹ˆé‡‡ç”¨æ¨æ‹‰ç»“åˆæ¨¡å¼ï¼Œè¿™æ—¶å€™å¯ä»¥ä»æ¨æ¨¡å¼æ¼”è¿›è¿‡æ¥ï¼Œä¸éœ€è¦é¢å¤–é‡æ–°æ¨ç¿»é‡åšã€‚</li>
<li>æ°¸è¿œä¸è¦åªç”¨æ‹‰æ¨¡å¼ã€‚</li>
<li>å¦‚æœæ˜¯ä¸€ä¸ªåˆåˆ›ä¼ä¸šï¼Œå…ˆç”¨æ¨æ¨¡å¼ï¼Œå¿«é€ŸæŠŠç³»ç»Ÿè®¾è®¡å‡ºæ¥ï¼Œç„¶åè®©äº§å“å»éªŒè¯ã€è¿­ä»£ï¼Œç­‰å®¢æˆ·æ•°å¤§å¹…ä¸Šæ¶¨åˆ°1000ä¸‡åï¼Œå†è€ƒè™‘å‡çº§ä¸ºæ¨æ‹‰é›†åˆæ¨¡å¼ã€‚</li>
</ul>
<p>åŒæ­¥åº“è¡¨ç»“æ„å¦‚ä¸‹ï¼š</p>





























<table><thead><tr><th>ä¸»é”®åˆ—</th><th>ç¬¬ä¸€åˆ—ä¸»é”®</th><th>ç¬¬äºŒåˆ—ä¸»é”®</th><th>å±æ€§åˆ—</th><th>å±æ€§åˆ—</th><th>å±æ€§åˆ—</th></tr></thead><tbody><tr><td>åˆ—å</td><td>user_id</td><td>sequence_id</td><td>sender_id</td><td>message_id</td><td>other</td></tr><tr><td>è§£é‡Š</td><td>æ¶ˆæ¯æ¥æ”¶è€…ç”¨æˆ·ID</td><td>æ¶ˆæ¯é¡ºåºIDï¼Œå¯ä»¥ä½¿ç”¨timestamp + send_user_idï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨Tablestoreçš„è‡ªå¢åˆ—ã€‚</td><td>å‘é€è€…çš„ç”¨æˆ·ID</td><td>store_tableä¸­çš„message_idåˆ—çš„å€¼ï¼Œä¹Ÿå°±æ˜¯æ¶ˆæ¯IDã€‚é€šè¿‡sender_idå’Œmessage_idå¯ä»¥åˆ°store_tableä¸­æŸ¥è¯¢åˆ°æ¶ˆæ¯å†…å®¹</td><td>å…¶ä»–å†…å®¹ï¼ŒåŒæ­¥åº“ä¸­ä¸éœ€è¦åŒ…æ‹¬æ¶ˆæ¯å†…å®¹ã€‚</td></tr></tbody></table>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b7dda69c3b34b1c9c5b4a1d34169687~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTU1NX0Zhbkxl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767679128&amp;x-signature=g7IHqKu3xJp%2BcabhN9M%2BNO2xRfo%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-5">ç”¨æˆ·å…³ç³»</h2>
<p>æŸ¥è¯¢çš„æ—¶å€™éœ€è¦æ”¯æŒæŸ¥è¯¢å…³æ³¨åˆ—è¡¨æˆ–è€…ç²‰ä¸åˆ—è¡¨ï¼Œæˆ–è€…ç›´æ¥å¥½å‹åˆ—è¡¨ï¼Œè¿™é‡Œå°±éœ€è¦æ ¹æ®å¤šä¸ªå±æ€§åˆ—æŸ¥è¯¢éœ€è¦ç´¢å¼•èƒ½åŠ›ï¼Œè¿™é‡Œï¼Œå­˜å‚¨ç³»ç»Ÿä¹Ÿå¯ä»¥é‡‡ç”¨ä¸¤ç±»ï¼Œå…³ç³»å‹ã€åˆ†å¸ƒå¼NoSQLæ•°æ®åº“ã€‚
å…³æ³¨å…³ç³»è¡¨è®¾è®¡ç»“æ„å¦‚ä¸‹ï¼š
Tableï¼šuser_relation_table</p>


























<table><thead><tr><th>ä¸»é”®é¡ºåº</th><th>ç¬¬ä¸€åˆ—ä¸»é”®</th><th>ç¬¬ä¸€åˆ—ä¸»é”®</th><th>å±æ€§åˆ—</th><th>å±æ€§åˆ—</th></tr></thead><tbody><tr><td>Tableå­—æ®µå</td><td>user_id</td><td>follow_user_id</td><td>timestamp</td><td>other</td></tr><tr><td>å¤‡æ³¨</td><td>ç”¨æˆ·ID</td><td>ç²‰ä¸ç”¨æˆ·ID</td><td>å…³æ³¨æ—¶é—´</td><td>å…¶ä»–å±æ€§åˆ—</td></tr></tbody></table>
<p>æŸ¥è¯¢çš„æ—¶å€™ï¼š</p>
<ul>
<li>å¦‚æœéœ€è¦æŸ¥è¯¢æŸä¸ªäººçš„ç²‰ä¸åˆ—è¡¨ï¼šä½¿ç”¨TermQueryæŸ¥è¯¢å›ºå®šuser_idï¼Œä¸”æŒ‰ç…§timestampæ’åºã€‚</li>
<li>å¦‚æœéœ€è¦æŸ¥è¯¢æŸä¸ªäººçš„å…³æ³¨åˆ—è¡¨ï¼šä½¿ç”¨TermQueryæŸ¥è¯¢å›ºå®šfollow_user_idï¼Œä¸”æŒ‰ç…§timestampæ’åºã€‚</li>
<li>å½“å‰æ•°æ®å†™å…¥Tableåï¼Œéœ€è¦5~10ç§’é’Ÿå»¶è¿Ÿåä¼šåœ¨å¤šå…ƒç´¢å¼•ä¸­æŸ¥è¯¢åˆ°ï¼Œæœªæ¥ä¼šä¼˜åŒ–åˆ°2ç§’ä»¥å†…ã€‚</li>
</ul>
<h2 data-id="heading-6">æ¨é€sessionæ± </h2>
<p>å‘é€è€…å°†æ¶ˆæ¯å‘é€åï¼Œæ¥æ”¶è€…å¦‚ä½•çŸ¥é“è‡ªå·±æœ‰æ–°æ¶ˆæ¯æ¥äº†ï¼Ÿå®¢æˆ·ç«¯å‘¨æœŸæ€§å»åˆ·æ–°ï¼Ÿå¦‚æœæ˜¯è¿™æ ·å­ï¼Œé‚£ä¹ˆç³»ç»Ÿçš„è¯»è¯·æ±‚å‹åŠ›ä¼šéšç€å®¢æˆ·ç«¯å¢é•¿è€Œå¢é•¿ï¼Œå¦‚æœæŸå¤©å¹³å°çˆ†å‘äº†ä¸€ä¸ªçƒ­ç‚¹æ¶ˆæ¯ï¼Œå¤§é‡ä¼‘çœ è®¾å¤‡ç™»é™†ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šå‡ºç°â€œæŸ¥è¯¢é£æš´â€ï¼Œä¸€ä¸‹å­å°±æŠŠç³»ç»Ÿæ‰“å®äº†ï¼Œæ‰€æœ‰çš„ç”¨æˆ·éƒ½ä¸èƒ½ç”¨äº†ã€‚
å¯ä»¥åœ¨æœåŠ¡ç«¯ç»´æŠ¤ä¸€ä¸ªæ¨é€sessionæ± ï¼Œè¿™ä¸ªé‡Œé¢è®°å½•å“ªäº›ç”¨æˆ·åœ¨çº¿ï¼Œç„¶åå½“ç”¨æˆ·Aå‘é€äº†ä¸€æ¡æ¶ˆæ¯ç»™ç”¨æˆ·Båï¼ŒæœåŠ¡ç«¯åœ¨å†™å…¥å­˜å‚¨åº“å’ŒåŒæ­¥åº“åï¼Œå†é€šçŸ¥ä¸€ä¸‹sessionæ± ä¸­çš„ç”¨æˆ·Bçš„sessionï¼Œå‘Šè¯‰ä»–ï¼šä½ æœ‰æ–°æ¶ˆæ¯äº†ã€‚ç„¶åsession-Bå†å»è¯»æ¶ˆæ¯ï¼Œç„¶åæœ‰æ¶ˆæ¯åå°†æ¶ˆæ¯æ¨é€ç»™å®¢æˆ·ç«¯ã€‚æˆ–è€…æœ‰æ¶ˆæ¯åç»™å®¢æˆ·ç«¯æ¨é€ä¸€ä¸‹æœ‰æ¶ˆæ¯äº†ï¼Œå®¢æˆ·ç«¯å†å»æ‹‰ã€‚</p>
<p>sessionè¡¨è®¾è®¡ç»“æ„å¦‚ä¸‹ï¼š</p>























<table><thead><tr><th>ä¸»é”®åˆ—é¡ºåº</th><th>ç¬¬ä¸€åˆ—ä¸»é”®</th><th>ç¬¬äºŒåˆ—ä¸»é”®</th><th>å±æ€§åˆ—</th></tr></thead><tbody><tr><td>åˆ—å</td><td>user_id</td><td>device_id</td><td>last_sequence_id</td></tr><tr><td>å¤‡æ³¨</td><td>æ¥æ”¶è€…ç”¨æˆ·ID</td><td>è®¾å¤‡IDï¼ŒåŒä¸€ä¸ªç”¨æˆ·å¯èƒ½ä¼šæœ‰å¤šä¸ªè®¾å¤‡ï¼Œä¸åŒè®¾å¤‡çš„è¯»å–ä½ç½®å¯èƒ½ä¸ä¸€è‡´ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦ä¸€ä¸ªè®¾å¤‡IDã€‚å¦‚æœä¸éœ€è¦æ”¯æŒå¤šç»ˆç«¯ï¼Œåˆ™è¿™ä¸€åˆ—å¯ä»¥çœç•¥ã€‚</td><td>è¯¥æ¥æ”¶è€…å·²ç»æ¨é€ç»™å®¢æˆ·ç«¯çš„æœ€æ–°çš„é¡ºåºID</td></tr></tbody></table>
<h2 data-id="heading-7">è¯„è®º</h2>
<p>è¯„è®ºçš„å±æ€§å’Œå­˜å‚¨åº“å·®ä¸å¤šï¼Œä½†æ˜¯å¤šäº†ä¸€å±‚å…³ç³»ï¼šè¢«è¯„è®ºçš„æ¶ˆæ¯ï¼Œæ‰€ä»¥åªè¦å°†è¯„è®ºæŒ‰ç…§è¢«è¢«è¯„è®ºæ¶ˆæ¯åˆ†ç»„ç»„ç»‡å³å¯ï¼Œç„¶åæŸ¥è¯¢æ—¶ä¹Ÿæ˜¯ä¸€ä¸ªèŒƒå›´æŸ¥è¯¢å°±è¡Œã€‚
è¯„è®ºè¡¨è®¾è®¡ç»“æ„å¦‚ä¸‹ï¼š</p>





























<table><thead><tr><th>ä¸»é”®åˆ—é¡ºåº</th><th>ç¬¬ä¸€åˆ—ä¸»é”®</th><th>ç¬¬äºŒåˆ—ä¸»é”®</th><th>å±æ€§åˆ—</th><th>å±æ€§åˆ—</th><th>å±æ€§åˆ—</th></tr></thead><tbody><tr><td>å­—æ®µå</td><td>message_id</td><td>comment_id</td><td>comment_content</td><td>reply_to</td><td>other</td></tr><tr><td>å¤‡æ³¨</td><td>å¾®åšIDæˆ–æœ‹å‹åœˆIDç­‰æ¶ˆæ¯çš„ID</td><td>è¿™ä¸€æ¡è¯„è®ºçš„ID</td><td>è¯„è®ºå†…å®¹</td><td>å›å¤ç»™å“ªä¸ªç”¨æˆ·</td><td>å…¶ä»–</td></tr></tbody></table>
<h2 data-id="heading-8">ç‚¹èµ</h2>
<p>â€œèµâ€æˆ–â€œlikeâ€åŠŸèƒ½å¾ˆæµè¡Œï¼ŒèµåŠŸèƒ½çš„å®ç°å’Œè¯„è®ºç±»ä¼¼ï¼Œåªæ˜¯æ¯”è¯„è®ºå°‘äº†ä¸€ä¸ªå†…å®¹ï¼Œæ‰€ä»¥é€‰æ‹©æ–¹å¼å’Œè¯„è®ºä¸€æ ·ã€‚</p>
<h2 data-id="heading-9">ç³»ç»Ÿç»“æ„</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2617ac173bc42b7bab624bb8846d61e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTU1NX0Zhbkxl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767679128&amp;x-signature=kZYk33csBTCxh%2BXMyfvc3TQCFQA%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-10">ç³»ç»Ÿæµè½¬ç¤ºä¾‹</h2>
<h3 data-id="heading-11">ç³»ç»Ÿæ¶æ„</h3>
<pre><code class="hljs language-txt" lang="txt">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                           Feedæµç³»ç»Ÿæ•´ä½“æ¶æ„                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                              â”‚   å®¢æˆ·ç«¯ (APP)   â”‚
                                              â”‚  iOS / Android  â”‚
                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚ HTTP/HTTPS       â”‚ WebSocket        â”‚
                                    â–¼                  â–¼                  â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
                         â”‚   API Gateway   â”‚  â”‚  WebSocket LB   â”‚         â”‚
                         â”‚    (Nginx)      â”‚  â”‚   (Nginx/HAProxy)â”‚        â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
                                  â”‚                    â”‚                  â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚                        â”‚                    â”‚                  â”‚
         â–¼                        â–¼                    â–¼                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚   Feed Service  â”‚    â”‚  User Service   â”‚    â”‚  Push Service   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚   (å‘å¸ƒ/æ‹‰å–)    â”‚    â”‚  (ç”¨æˆ·/å…³æ³¨)     â”‚    â”‚  (WebSocket)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                      â”‚                      â”‚
         â”‚                      â”‚                      â”‚
         â–¼                      â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                              æ¶ˆæ¯é˜Ÿåˆ—å±‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                         Kafka / RocketMQ                                                â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚   â”‚
â”‚  â”‚   â”‚ feed_publishâ”‚    â”‚ feed_sync   â”‚    â”‚ feed_notify â”‚    â”‚ comment_topicâ”‚   â”‚ like_topic  â”‚           â”‚   â”‚
â”‚  â”‚   â”‚   Topic     â”‚    â”‚   Topic     â”‚    â”‚   Topic     â”‚    â”‚             â”‚    â”‚             â”‚           â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                      â”‚                      â”‚
         â–¼                      â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                              å¼‚æ­¥å¤„ç†å±‚                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚   â”‚  Sync Worker    â”‚    â”‚  Notify Worker  â”‚    â”‚ Comment Worker  â”‚    â”‚  Like Worker    â”‚                      â”‚
â”‚   â”‚  (å†™æ‰©æ•£å¤„ç†)    â”‚    â”‚  (æ¨é€é€šçŸ¥)      â”‚    â”‚  (è¯„è®ºå¤„ç†)      â”‚    â”‚  (ç‚¹èµå¤„ç†)      â”‚                      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                     â”‚                     â”‚                     â”‚
             â–¼                     â–¼                     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                              å­˜å‚¨å±‚                                                              â”‚
â”‚                                                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                              Tablestore / HBase (åˆ†å¸ƒå¼NoSQL)                                              â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚  â”‚
â”‚  â”‚   â”‚ store_table â”‚    â”‚ sync_table  â”‚    â”‚relation_tableâ”‚   â”‚comment_tableâ”‚    â”‚ like_table  â”‚             â”‚  â”‚
â”‚  â”‚   â”‚  (å­˜å‚¨è¡¨)    â”‚    â”‚  (åŒæ­¥è¡¨)    â”‚    â”‚  (å…³æ³¨è¡¨)    â”‚    â”‚  (è¯„è®ºè¡¨)    â”‚    â”‚  (ç‚¹èµè¡¨)    â”‚             â”‚  â”‚
â”‚  â”‚   â”‚  æ°¸ä¹…ä¿å­˜    â”‚    â”‚  å‘¨æœŸä¿å­˜    â”‚    â”‚  æ°¸ä¹…ä¿å­˜    â”‚    â”‚  æ°¸ä¹…ä¿å­˜    â”‚    â”‚  æ°¸ä¹…ä¿å­˜    â”‚             â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚  â”‚           Redis Cluster               â”‚    â”‚              MySQL                    â”‚                         â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                         â”‚
â”‚  â”‚   â”‚session_pool â”‚  â”‚ feed_cache  â”‚    â”‚    â”‚   â”‚ user_table  â”‚  â”‚ bigv_table  â”‚   â”‚                         â”‚
â”‚  â”‚   â”‚ (Sessionæ± ) â”‚  â”‚ (Feedç¼“å­˜)  â”‚    â”‚    â”‚   â”‚  (ç”¨æˆ·è¡¨)    â”‚  â”‚  (å¤§Vè¡¨)     â”‚   â”‚                         â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                         â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚  â”‚   â”‚ like_count  â”‚  â”‚pull_positionâ”‚    â”‚                                                                      â”‚
â”‚  â”‚   â”‚ (ç‚¹èµè®¡æ•°)   â”‚  â”‚ (æ‹‰å–ä½ç½®)   â”‚    â”‚                                                                      â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                                                                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-12">åœºæ™¯è®¾å®š</h3>
<pre><code class="hljs language-txt" lang="txt">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åœºæ™¯è®¾å®š                                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¤§Vç”¨æˆ·ï¼šbigV_001ï¼ˆç²‰ä¸æ•°ï¼š500ä¸‡ï¼‰                                                      â”‚
â”‚  å‘å¸ƒæ–°åŠ¨æ€ï¼šmessage_id = "msg_20241229_010"ï¼Œå†…å®¹ï¼š"æ–°å¹´å¿«ä¹ï¼"                          â”‚
â”‚  å‘å¸ƒæ—¶é—´ï¼š2024-12-29 15:00:00                                                          â”‚
â”‚                                                                                         â”‚
â”‚  ç²‰ä¸çŠ¶æ€åˆ†å¸ƒï¼š                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  åœ¨çº¿ç²‰ä¸ï¼š100ä¸‡ï¼ˆåœ¨Sessionæ± ä¸­æœ‰è®°å½•ï¼Œé‡‡ç”¨æ¨æ¨¡å¼ï¼‰                                 â”‚    â”‚
â”‚  â”‚  ç¦»çº¿ç²‰ä¸ï¼š400ä¸‡ï¼ˆä¸åœ¨Sessionæ± ä¸­ï¼Œé‡‡ç”¨æ‹‰æ¨¡å¼ï¼‰                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                         â”‚
â”‚  ä»¥ç¦»çº¿ç²‰ä¸ fan_003 ä¸ºä¾‹ï¼š                                                               â”‚
â”‚  - å…³æ³¨äº†3ä¸ªå¤§Vï¼šbigV_001, bigV_002, bigV_003                                           â”‚
â”‚  - ä¸Šæ¬¡åœ¨çº¿æ—¶é—´ï¼š2024-12-28 18:30:00ï¼ˆæ˜¨å¤©ï¼‰                                            â”‚
â”‚  - å¯¹ bigV_001 çš„æ‹‰å–ä½ç½®ï¼šmsg_20241228_005                                             â”‚
â”‚  - ç¦»çº¿æœŸé—´ bigV_001 å‘äº†5æ¡æ–°æ¶ˆæ¯ï¼šmsg_20241229_006 ~ msg_20241229_010                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-13">æ ¸å¿ƒè¡¨ç»“æ„</h3>
<pre><code class="hljs language-txt" lang="txt">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. store_tableï¼ˆå­˜å‚¨è¡¨/å‘ä»¶ç®±ï¼‰- æ°¸ä¹…ä¿å­˜                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ user_id       â”‚ message_id        â”‚ content      â”‚ timestamp           â”‚ seq_no        â”‚
â”‚ (å‘å¸ƒè€…ID)     â”‚ (æ¶ˆæ¯ID)           â”‚ (å†…å®¹)        â”‚ (å‘å¸ƒæ—¶é—´)           â”‚ (åºåˆ—å·)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ bigV_001      â”‚ msg_20241228_005  â”‚ æ™šå®‰          â”‚ 2024-12-28 23:00    â”‚ 1005          â”‚
â”‚ bigV_001      â”‚ msg_20241229_006  â”‚ æ—©ä¸Šå¥½        â”‚ 2024-12-29 08:00    â”‚ 1006          â”‚
â”‚ bigV_001      â”‚ msg_20241229_007  â”‚ åƒæ—©é¤äº†      â”‚ 2024-12-29 09:00    â”‚ 1007          â”‚
â”‚ bigV_001      â”‚ msg_20241229_008  â”‚ å¼€å§‹å·¥ä½œ      â”‚ 2024-12-29 10:00    â”‚ 1008          â”‚
â”‚ bigV_001      â”‚ msg_20241229_009  â”‚ åˆé¤æ—¶é—´      â”‚ 2024-12-29 12:00    â”‚ 1009          â”‚
â”‚ bigV_001      â”‚ msg_20241229_010  â”‚ æ–°å¹´å¿«ä¹ï¼    â”‚ 2024-12-29 15:00    â”‚ 1010          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. sync_tableï¼ˆåŒæ­¥è¡¨/æ”¶ä»¶ç®±ï¼‰- å‘¨æœŸä¿å­˜                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ user_id       â”‚ sequence_id   â”‚ sender_id     â”‚ message_id        â”‚ timestamp           â”‚
â”‚ (æ¥æ”¶è€…ID)     â”‚ (æ”¶ä»¶ç®±åºåˆ—å·)  â”‚ (å‘é€è€…ID)     â”‚ (æ¶ˆæ¯ID)           â”‚ (æ—¶é—´æˆ³)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ fan_001       â”‚ seq_501       â”‚ bigV_001      â”‚ msg_20241229_010  â”‚ 2024-12-29 15:00    â”‚
â”‚ fan_002       â”‚ seq_302       â”‚ bigV_001      â”‚ msg_20241229_010  â”‚ 2024-12-29 15:00    â”‚
â”‚ ...           â”‚ ...           â”‚ ...           â”‚ ...               â”‚ ...                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  æ³¨æ„ï¼šåŒæ­¥è¡¨ä¸å­˜å‚¨æ¶ˆæ¯å†…å®¹ï¼Œé€šè¿‡ sender_id + message_id å›æŸ¥å­˜å‚¨è¡¨è·å–                      â”‚

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. pull_position_tableï¼ˆæ‹‰å–ä½ç½®è¡¨ï¼‰- è®°å½•æ¯ä¸ªç²‰ä¸å¯¹æ¯ä¸ªå¤§Vçš„æ‹‰å–ä½ç½®                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ user_id       â”‚ bigv_id       â”‚ last_pull_msg_id  â”‚ last_pull_time                      â”‚
â”‚ (ç²‰ä¸ID)       â”‚ (å¤§V ID)       â”‚ (ä¸Šæ¬¡æ‹‰åˆ°çš„æ¶ˆæ¯ID) â”‚ (ä¸Šæ¬¡æ‹‰å–æ—¶é—´)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ fan_003       â”‚ bigV_001      â”‚ msg_20241228_005  â”‚ 2024-12-28 18:30:00                 â”‚
â”‚ fan_003       â”‚ bigV_002      â”‚ msg_20241227_012  â”‚ 2024-12-27 20:15:00                 â”‚
â”‚ fan_003       â”‚ bigV_003      â”‚ msg_20241229_001  â”‚ 2024-12-29 09:00:00                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. session_poolï¼ˆSessionæ± ï¼‰- è®°å½•åœ¨çº¿ç”¨æˆ·ï¼ŒRediså®ç°                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ user_id       â”‚ device_id     â”‚ last_sequence_id  â”‚ online_status                       â”‚
â”‚ (ç”¨æˆ·ID)       â”‚ (è®¾å¤‡ID)       â”‚ (å·²æ¨é€çš„æœ€æ–°åºåˆ—) â”‚ (åœ¨çº¿çŠ¶æ€)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ fan_001       â”‚ device_A      â”‚ seq_500           â”‚ ONLINE                              â”‚
â”‚ fan_002       â”‚ device_B      â”‚ seq_301           â”‚ ONLINE                              â”‚
â”‚ fan_003       â”‚ -             â”‚ -                 â”‚ OFFLINEï¼ˆä¸åœ¨æ± ä¸­ï¼‰                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-14">å¤§Vå‘é€åŠ¨æ€</h3>
<pre><code class="hljs language-txt" lang="txt">                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚  bigV_001 å‘é€åŠ¨æ€                                       â”‚
                         â”‚  POST /api/feed/publish                                 â”‚
                         â”‚  { user_id: "bigV_001", content: "æ–°å¹´å¿«ä¹ï¼" }          â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                      â”‚
                                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 1: å†™å…¥å­˜å‚¨è¡¨ï¼ˆå¤§Vçš„å‘ä»¶ç®±ï¼‰                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  INSERT INTO store_table (user_id, message_id, content, timestamp, seq_no)              â”‚  â”‚
â”‚  â”‚  VALUES ('bigV_001', 'msg_20241229_010', 'æ–°å¹´å¿«ä¹ï¼', '2024-12-29 15:00:00', 1010)       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  æ¶ˆæ¯æ°¸ä¹…ä¿å­˜åœ¨å¤§Vçš„å‘ä»¶ç®±ä¸­ï¼Œæ‰€æœ‰ç²‰ä¸éƒ½å¯ä»¥ä»è¿™é‡Œæ‹‰å–                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 2: æŸ¥è¯¢ç²‰ä¸åˆ—è¡¨                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  SELECT follow_user_id FROM user_relation_table WHERE user_id = 'bigV_001'              â”‚  â”‚
â”‚  â”‚  â†’ è¿”å› 500ä¸‡ ç²‰ä¸ID                                                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 3: æŸ¥è¯¢Sessionæ± ï¼ŒåŒºåˆ†åœ¨çº¿/ç¦»çº¿ç²‰ä¸                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  SELECT user_id FROM session_pool WHERE user_id IN (ç²‰ä¸åˆ—è¡¨) AND online_status = 'ONLINE' â”‚  â”‚
â”‚  â”‚  â†’ åœ¨çº¿ï¼š100ä¸‡    ç¦»çº¿ï¼š400ä¸‡                                                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â–¼                                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åœ¨çº¿ç²‰ä¸å¤„ç†ï¼ˆæ¨æ¨¡å¼ï¼‰                                â”‚  â”‚  ç¦»çº¿ç²‰ä¸å¤„ç†ï¼ˆæ‹‰æ¨¡å¼ï¼‰                                â”‚
â”‚                                                      â”‚  â”‚                                                      â”‚
â”‚  Step 4a: æ‰¹é‡å†™å…¥åŒæ­¥è¡¨ï¼ˆæ”¶ä»¶ç®±ï¼‰                     â”‚  â”‚  Step 4b: ä¸åšä»»ä½•æ“ä½œ                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  // 100ä¸‡æ¡å†™å…¥ï¼Œåˆ†æ‰¹å¤„ç†                        â”‚  â”‚  â”‚  â”‚  æ¶ˆæ¯ä¿ç•™åœ¨ bigV_001 çš„å­˜å‚¨è¡¨ï¼ˆå‘ä»¶ç®±ï¼‰ä¸­        â”‚  â”‚
â”‚  â”‚  for (batch : partition(onlineFans, 1000)) {   â”‚  â”‚  â”‚  â”‚  ç­‰å¾…ç¦»çº¿ç²‰ä¸ä¸Šçº¿åä¸»åŠ¨æ‹‰å–                      â”‚  â”‚
â”‚  â”‚      sync_table.batchInsert(                   â”‚  â”‚  â”‚  â”‚                                                â”‚  â”‚
â”‚  â”‚          batch,           // ç²‰ä¸IDåˆ—è¡¨         â”‚  â”‚  â”‚  â”‚  ç¦»çº¿ç²‰ä¸çš„æ‹‰å–ä½ç½®ä¿æŒä¸å˜ï¼š                    â”‚  â”‚
â”‚  â”‚          "bigV_001",      // å‘é€è€…              â”‚  â”‚  â”‚  â”‚  fan_003 å¯¹ bigV_001: msg_20241228_005         â”‚  â”‚
â”‚  â”‚          "msg_20241229_010" // æ¶ˆæ¯ID           â”‚  â”‚  â”‚  â”‚  ï¼ˆä¸‹æ¬¡ä¸Šçº¿æ—¶ä»è¿™ä¸ªä½ç½®å¼€å§‹æ‹‰å–ï¼‰                â”‚  â”‚
â”‚  â”‚      );                                        â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”‚  }                                             â”‚  â”‚  â”‚                                                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                      â”‚
â”‚  Step 5a: é€šè¿‡Sessioné•¿è¿æ¥æ¨é€é€šçŸ¥                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  sessionPool.notifyUsers(                      â”‚  â”‚
â”‚  â”‚      onlineFans,                               â”‚  â”‚
â”‚  â”‚      { type: "NEW_FEED", count: 1 }            â”‚  â”‚
â”‚  â”‚  );                                            â”‚  â”‚
â”‚  â”‚  å®¢æˆ·ç«¯æ”¶åˆ°é€šçŸ¥åï¼Œä¸»åŠ¨æ‹‰å–æœ€æ–°æ¶ˆæ¯               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-15">åœ¨çº¿ç²‰ä¸Â fan_001 æ¥æ”¶æ¶ˆæ¯</h4>
<pre><code class="hljs language-txt" lang="txt">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  fan_001 çš„ Session æ”¶åˆ°æ¨é€é€šçŸ¥                                                               â”‚
â”‚  { type: "NEW_FEED", count: 1 }                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 1: å®¢æˆ·ç«¯å‘èµ·æ‹‰å–è¯·æ±‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  GET /api/feed/timeline?last_seq=seq_500                                                â”‚  â”‚
â”‚  â”‚  fan_001 ä¸Šæ¬¡è¯»åˆ° seq_500ï¼Œè¯·æ±‚ seq_500 ä¹‹åçš„æ–°æ¶ˆæ¯                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 2: ä»åŒæ­¥è¡¨ï¼ˆæ”¶ä»¶ç®±ï¼‰è¯»å–æ–°æ¶ˆæ¯                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  SELECT * FROM sync_table                                                               â”‚  â”‚
â”‚  â”‚  WHERE user_id = 'fan_001' AND sequence_id &gt; 'seq_500'    å®¢æˆ·ç«¯è¯·æ±‚æ—¶å¦‚æœæ²¡æœ‰æºå¸¦ last_seqï¼ŒæœåŠ¡ç«¯ä¼šä» session_table è¯»å–                              â”‚  â”‚
â”‚  â”‚  ORDER BY sequence_id DESC LIMIT 20                                                     â”‚  â”‚
â”‚  â”‚                                                                                         â”‚  â”‚
â”‚  â”‚  è¿”å›ç»“æœï¼š                                                                              â”‚  â”‚
â”‚  â”‚  sequence_id â”‚ sender_id  â”‚ message_id                                                  â”‚  â”‚
â”‚  â”‚  seq_501     â”‚ bigV_001   â”‚ msg_20241229_010   â† åˆšæ¨é€çš„æ–°æ¶ˆæ¯                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 3: å›æŸ¥å­˜å‚¨è¡¨è·å–æ¶ˆæ¯å†…å®¹                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  SELECT content, timestamp FROM store_table                                             â”‚  â”‚
â”‚  â”‚  WHERE user_id = 'bigV_001' AND message_id = 'msg_20241229_010'                          â”‚  â”‚
â”‚  â”‚                                                                                         â”‚  â”‚
â”‚  â”‚  è¿”å›ç»“æœï¼š{ content: "æ–°å¹´å¿«ä¹ï¼", timestamp: "2024-12-29 15:00:00" }                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 4: è¿”å›ç»™å®¢æˆ·ç«¯å±•ç¤º                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å®¢æˆ·ç«¯ Timelineï¼š                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  [bigV_001] æ–°å¹´å¿«ä¹ï¼                                        15:00   â† æ–°æ¶ˆæ¯     â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  [user_xxx] xxxxxxxxx                                         14:30               â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  [bigV_002] xxxxxxxxx                                         14:00               â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  åŒæ—¶æ›´æ–° Session ä¸­çš„ last_sequence_id = seq_501                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-16">ç¦»çº¿ç²‰ä¸ fan_003 ä¸Šçº¿åçš„æ‹‰å–æµç¨‹</h4>
<pre><code class="hljs language-txt" lang="txt">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  fan_003 ä¸Šçº¿ï¼Œæ‰“å¼€APP                                                                        â”‚
â”‚  æ—¶é—´ï¼š2024-12-29 16:00:00ï¼ˆç¦»çº¿äº†çº¦22å°æ—¶ï¼‰                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 1: å»ºç«‹Sessionè¿æ¥ï¼ŒåŠ å…¥Sessionæ±                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  session_pool.register(                                                                 â”‚  â”‚
â”‚  â”‚      user_id: "fan_003",                                                                â”‚  â”‚
â”‚  â”‚      device_id: "iPhone_xxx",                                                           â”‚  â”‚
â”‚  â”‚      online_status: "ONLINE"                                                            â”‚  â”‚
â”‚  â”‚  )                                                                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 2: æŸ¥è¯¢å…³æ³¨çš„å¤§Våˆ—è¡¨                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  SELECT user_id FROM user_relation_table                                                â”‚  â”‚
â”‚  â”‚  WHERE follow_user_id = 'fan_003' AND is_bigv = true                                    â”‚  â”‚
â”‚  â”‚                                                                                         â”‚  â”‚
â”‚  â”‚  è¿”å›ï¼š[bigV_001, bigV_002, bigV_003]                                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 3: æŸ¥è¯¢æ¯ä¸ªå¤§Vçš„æ‹‰å–ä½ç½® â­ å…³é”®æ­¥éª¤                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  SELECT bigv_id, last_pull_msg_id, last_pull_time                                       â”‚  â”‚
â”‚  â”‚  FROM pull_position_table                                                               â”‚  â”‚
â”‚  â”‚  WHERE user_id = 'fan_003' AND bigv_id IN ('bigV_001', 'bigV_002', 'bigV_003')           â”‚  â”‚
â”‚  â”‚                                                                                         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  æŸ¥è¯¢ç»“æœï¼šfan_003 çš„æ‹‰å–ä½ç½®                                                       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  bigv_id    â”‚ last_pull_msg_id   â”‚ last_pull_time        â”‚ å«ä¹‰                   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  bigV_001   â”‚ msg_20241228_005   â”‚ 2024-12-28 18:30:00   â”‚ æ˜¨å¤©æ‹‰åˆ°ç¬¬5æ¡æ¶ˆæ¯       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  bigV_002   â”‚ msg_20241227_012   â”‚ 2024-12-27 20:15:00   â”‚ å‰å¤©æ‹‰åˆ°ç¬¬12æ¡æ¶ˆæ¯      â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  bigV_003   â”‚ msg_20241229_001   â”‚ 2024-12-29 09:00:00   â”‚ ä»Šæ—©æ‹‰åˆ°ç¬¬1æ¡æ¶ˆæ¯       â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 4: ä»æ¯ä¸ªå¤§Vçš„å‘ä»¶ç®±å¢é‡æ‹‰å– â­ å…³é”®æ­¥éª¤                                                   â”‚
â”‚                                                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å¯¹äº bigV_001ï¼ˆä» msg_20241228_005 ä¹‹åå¼€å§‹æ‹‰å–ï¼‰ï¼š                                      â”‚  â”‚
â”‚  â”‚                                                                                         â”‚  â”‚
â”‚  â”‚  SELECT * FROM store_table                                                              â”‚  â”‚
â”‚  â”‚  WHERE user_id = 'bigV_001'                                                             â”‚  â”‚
â”‚  â”‚    AND message_id &gt; 'msg_20241228_005'   â† ä»ä¸Šæ¬¡ä½ç½®ä¹‹åå¼€å§‹ï¼ˆä¸åŒ…å«ä¸Šæ¬¡çš„æ¶ˆæ¯ï¼‰          â”‚  â”‚
â”‚  â”‚  ORDER BY message_id ASC                                                                â”‚  â”‚
â”‚  â”‚  LIMIT 50                                                                               â”‚  â”‚
â”‚  â”‚                                                                                         â”‚  â”‚
â”‚  â”‚  æ‹‰å–åˆ°çš„æ–°æ¶ˆæ¯ï¼ˆ5æ¡ï¼‰ï¼š                                                                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  message_id        â”‚ content      â”‚ timestamp           â”‚ çŠ¶æ€                    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  msg_20241229_006  â”‚ æ—©ä¸Šå¥½        â”‚ 2024-12-29 08:00    â”‚ æ–°æ¶ˆæ¯                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  msg_20241229_007  â”‚ åƒæ—©é¤äº†      â”‚ 2024-12-29 09:00    â”‚ æ–°æ¶ˆæ¯                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  msg_20241229_008  â”‚ å¼€å§‹å·¥ä½œ      â”‚ 2024-12-29 10:00    â”‚ æ–°æ¶ˆæ¯                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  msg_20241229_009  â”‚ åˆé¤æ—¶é—´      â”‚ 2024-12-29 12:00    â”‚ æ–°æ¶ˆæ¯                  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  msg_20241229_010  â”‚ æ–°å¹´å¿«ä¹ï¼    â”‚ 2024-12-29 15:00    â”‚ æ–°æ¶ˆæ¯ï¼ˆæœ€æ–°ï¼‰           â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å¯¹äº bigV_002ï¼ˆä» msg_20241227_012 ä¹‹åå¼€å§‹æ‹‰å–ï¼‰ï¼š                                      â”‚  â”‚
â”‚  â”‚  æ‹‰å–åˆ° 3 æ¡æ–°æ¶ˆæ¯ï¼šmsg_20241228_001 ~ msg_20241228_003                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å¯¹äº bigV_003ï¼ˆä» msg_20241229_001 ä¹‹åå¼€å§‹æ‹‰å–ï¼‰ï¼š                                      â”‚  â”‚
â”‚  â”‚  æ‹‰å–åˆ° 1 æ¡æ–°æ¶ˆæ¯ï¼šmsg_20241229_002                                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 5: æ›´æ–°æ‹‰å–ä½ç½® â­ å…³é”®æ­¥éª¤                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  æ‰¹é‡æ›´æ–° fan_003 å¯¹æ¯ä¸ªå¤§Vçš„æ‹‰å–ä½ç½®ï¼š                                                   â”‚  â”‚
â”‚  â”‚                                                                                         â”‚  â”‚
â”‚  â”‚  UPDATE pull_position_table SET                                                         â”‚  â”‚
â”‚  â”‚      last_pull_msg_id = CASE bigv_id                                                    â”‚  â”‚
â”‚  â”‚          WHEN 'bigV_001' THEN 'msg_20241229_010'   â† æ›´æ–°ä¸ºæœ¬æ¬¡æ‹‰åˆ°çš„æœ€æ–°æ¶ˆæ¯ID           â”‚  â”‚
â”‚  â”‚          WHEN 'bigV_002' THEN 'msg_20241228_003'                                         â”‚  â”‚
â”‚  â”‚          WHEN 'bigV_003' THEN 'msg_20241229_002'                                         â”‚  â”‚
â”‚  â”‚      END,                                                                               â”‚  â”‚
â”‚  â”‚      last_pull_time = '2024-12-29 16:00:00'       â† æ›´æ–°æ‹‰å–æ—¶é—´                         â”‚  â”‚
â”‚  â”‚  WHERE user_id = 'fan_003'                                                              â”‚  â”‚
â”‚  â”‚                                                                                         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  æ›´æ–°åçš„æ‹‰å–ä½ç½®è¡¨ï¼š                                                                â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  bigv_id    â”‚ last_pull_msg_id   â”‚ last_pull_time        â”‚ å˜åŒ–                   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  bigV_001   â”‚ msg_20241229_010   â”‚ 2024-12-29 16:00:00   â”‚ âœ… 005 â†’ 010           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  bigV_002   â”‚ msg_20241228_003   â”‚ 2024-12-29 16:00:00   â”‚ âœ… 012 â†’ 003           â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  bigV_003   â”‚ msg_20241229_002   â”‚ 2024-12-29 16:00:00   â”‚ âœ… 001 â†’ 002           â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚  ä¸‹æ¬¡ fan_003 å†ä¸Šçº¿æ—¶ï¼Œå°†ä»è¿™äº›æ–°ä½ç½®å¼€å§‹æ‹‰å–                                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 6: åˆå¹¶æ¶ˆæ¯å¹¶å†™å…¥åŒæ­¥è¡¨ï¼ˆæ”¶ä»¶ç®±ï¼‰                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å°†ä»å„ä¸ªå¤§Væ‹‰å–çš„æ¶ˆæ¯åˆå¹¶ï¼ŒæŒ‰æ—¶é—´æ’åºï¼Œå†™å…¥ fan_003 çš„åŒæ­¥è¡¨                              â”‚  â”‚
â”‚  â”‚                                                                                         â”‚  â”‚
â”‚  â”‚  sync_tableï¼ˆfan_003 çš„æ”¶ä»¶ç®±ï¼‰æ–°å¢è®°å½•ï¼š                                                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  user_id  â”‚ sequence_id â”‚ sender_id  â”‚ message_id        â”‚ timestamp              â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  fan_003  â”‚ seq_201     â”‚ bigV_001   â”‚ msg_20241229_006  â”‚ 2024-12-29 08:00       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  fan_003  â”‚ seq_202     â”‚ bigV_002   â”‚ msg_20241228_001  â”‚ 2024-12-29 08:30       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  fan_003  â”‚ seq_203     â”‚ bigV_001   â”‚ msg_20241229_007  â”‚ 2024-12-29 09:00       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  fan_003  â”‚ seq_204     â”‚ bigV_003   â”‚ msg_20241229_002  â”‚ 2024-12-29 09:30       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  fan_003  â”‚ seq_205     â”‚ bigV_001   â”‚ msg_20241229_008  â”‚ 2024-12-29 10:00       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  fan_003  â”‚ seq_206     â”‚ bigV_001   â”‚ msg_20241229_009  â”‚ 2024-12-29 12:00       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  fan_003  â”‚ seq_207     â”‚ bigV_001   â”‚ msg_20241229_010  â”‚ 2024-12-29 15:00       â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  ...      â”‚ ...         â”‚ ...        â”‚ ...               â”‚ ...                    â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 7: è¿”å›ç»™å®¢æˆ·ç«¯å±•ç¤º                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  å®¢æˆ·ç«¯ Timelineï¼ˆæŒ‰æ—¶é—´å€’åºå±•ç¤ºï¼‰ï¼š                                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  [bigV_001] æ–°å¹´å¿«ä¹ï¼                                         15:00       â”‚   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  [bigV_001] åˆé¤æ—¶é—´                                           12:00       â”‚   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  [bigV_001] å¼€å§‹å·¥ä½œ                                           10:00       â”‚   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  [bigV_003] xxxxxxxxx                                          09:30       â”‚   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  [bigV_001] åƒæ—©é¤äº†                                           09:00       â”‚   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  [bigV_002] xxxxxxxxx                                          08:30       â”‚   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  [bigV_001] æ—©ä¸Šå¥½                                             08:00       â”‚   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  åŒæ—¶æ›´æ–° Session ä¸­çš„ last_sequence_id = seq_207                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-17">è¯„è®º</h3>
<h4 data-id="heading-18">è¡¨ç»“æ„è®¾è®¡</h4>
<pre><code class="hljs language-txt" lang="txt">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  comment_tableï¼ˆè¯„è®ºè¡¨ï¼‰- å­˜å‚¨ï¼šTablestore / HBase                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸»é”®è®¾è®¡                                                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  åˆ—å            â”‚  ç±»å‹                    â”‚  è¯´æ˜                                                       â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  message_id     â”‚  String (PK1, åˆ†åŒºé”®)    â”‚  è¢«è¯„è®ºçš„åŠ¨æ€IDï¼ŒåŒä¸€åŠ¨æ€çš„è¯„è®ºç‰©ç†ä¸Šè¿ç»­å­˜å‚¨                   â”‚   â”‚
â”‚  â”‚  comment_id     â”‚  String (PK2, æ’åºé”®)    â”‚  è¯„è®ºIDï¼Œæ ¼å¼ï¼šæ—¶é—´æˆ³_ç”¨æˆ·IDï¼Œä¿è¯æœ‰åºä¸”å”¯ä¸€                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                                                 â”‚
â”‚  å±æ€§åˆ—                                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  åˆ—å            â”‚  ç±»å‹                    â”‚  è¯´æ˜                                                       â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  user_id        â”‚  String                 â”‚  è¯„è®ºè€…ID                                                    â”‚   â”‚
â”‚  â”‚  content        â”‚  String                 â”‚  è¯„è®ºå†…å®¹                                                    â”‚   â”‚
â”‚  â”‚  reply_to_user  â”‚  String                 â”‚  å›å¤ç›®æ ‡ç”¨æˆ·IDï¼ˆæ¥¼ä¸­æ¥¼ï¼‰ï¼ŒNULLè¡¨ç¤ºç›´æ¥è¯„è®ºåŠ¨æ€                 â”‚   â”‚
â”‚  â”‚  reply_to_cmt   â”‚  String                 â”‚  å›å¤ç›®æ ‡è¯„è®ºIDï¼ˆæ¥¼ä¸­æ¥¼ï¼‰                                     â”‚   â”‚
â”‚  â”‚  timestamp      â”‚  Long                   â”‚  è¯„è®ºæ—¶é—´æˆ³                                                  â”‚   â”‚
â”‚  â”‚  status         â”‚  Integer                â”‚  çŠ¶æ€ï¼š0-æ­£å¸¸ï¼Œ1-å·²åˆ é™¤ï¼Œ2-éšè—                               â”‚   â”‚
â”‚  â”‚  like_count     â”‚  Integer                â”‚  è¯„è®ºç‚¹èµæ•°ï¼ˆå†—ä½™å­—æ®µï¼Œå®šæ—¶åŒæ­¥ï¼‰                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                                                 â”‚
â”‚  ç¤ºä¾‹æ•°æ®                                                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  message_id       â”‚  comment_id             â”‚  user_id â”‚  content   â”‚  reply_to_userâ”‚ reply_to_cmtâ”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚  msg_001          â”‚  1703836800000_userA    â”‚  userA   â”‚  è¯´å¾—å¥½ï¼   â”‚  NULL        â”‚  NULL        â”‚         â”‚
â”‚  â”‚  msg_001          â”‚  1703836900000_userB    â”‚  userB   â”‚  åŒæ„æ¥¼ä¸Š   â”‚  userA       â”‚  ä¸Šä¸€æ¡ID    â”‚         â”‚
â”‚  â”‚  msg_001          â”‚  1703837000000_userC    â”‚  userC   â”‚  ä¸å¤ªè®¤åŒ   â”‚  NULL        â”‚  NULL        â”‚         â”‚
â”‚  â”‚  msg_002          â”‚  1703838000000_userA    â”‚  userA   â”‚  å“ˆå“ˆå“ˆ     â”‚  NULL        â”‚  NULL        â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Redis ç¼“å­˜è®¾è®¡                                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. è¯„è®ºè®¡æ•°ç¼“å­˜                                                                                                 â”‚
â”‚     Key: comment_count:{message_id}                                                                             â”‚
â”‚     Value: 123 (è¯„è®ºæ•°)                                                                                         â”‚
â”‚     TTL: 1å°æ—¶ï¼Œè¿‡æœŸåä»æ•°æ®åº“é‡æ–°ç»Ÿè®¡                                                                            â”‚
â”‚                                                                                                                 â”‚
â”‚  2. çƒ­é—¨è¯„è®ºç¼“å­˜ï¼ˆå¯é€‰ï¼‰                                                                                          â”‚
â”‚     Key: hot_comments:{message_id}                                                                              â”‚
â”‚     Value: List&lt;Comment&gt; (å‰Næ¡çƒ­é—¨è¯„è®ºï¼ŒæŒ‰ç‚¹èµæ•°æ’åº)                                                            â”‚
â”‚     TTL: 10åˆ†é’Ÿ                                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-19">å‘è¡¨è¯„è®ºæµç¨‹</h4>
<pre><code class="hljs language-txt" lang="txt">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‘è¡¨è¯„è®ºå®Œæ•´æµç¨‹                                                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ç”¨æˆ·B                          Comment Service                    æ•°æ®åº“                    åŠ¨æ€ä½œè€…(å¤§V)
      â”‚                                  â”‚                              â”‚                           â”‚
      â”‚ POST /api/comment                â”‚                              â”‚                           â”‚
      â”‚ {                                â”‚                              â”‚                           â”‚
      â”‚   message_id: "msg_001",         â”‚                              â”‚                           â”‚
      â”‚   content: "è¯´å¾—å¥½ï¼",            â”‚                              â”‚                           â”‚
      â”‚   reply_to_user: null            â”‚                              â”‚                           â”‚
      â”‚ }                                â”‚                              â”‚                           â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚                              â”‚                           â”‚
      â”‚                                  â”‚                              â”‚                           â”‚
      â”‚                                  â”‚  1. å‚æ•°æ ¡éªŒ                  â”‚                           â”‚
      â”‚                                  â”‚  - å†…å®¹é•¿åº¦æ£€æŸ¥               â”‚                           â”‚
      â”‚                                  â”‚  - æ•æ„Ÿè¯è¿‡æ»¤                 â”‚                           â”‚
      â”‚                                  â”‚  - ç”¨æˆ·æ˜¯å¦è¢«ç¦è¨€             â”‚                           â”‚
      â”‚                                  â”‚                              â”‚                           â”‚
      â”‚                                  â”‚  2. ç”Ÿæˆè¯„è®ºID                â”‚                           â”‚
      â”‚                                  â”‚  comment_id = timestamp_userB â”‚                           â”‚
      â”‚                                  â”‚                              â”‚                           â”‚
      â”‚                                  â”‚  3. å†™å…¥è¯„è®ºè¡¨ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚                           â”‚
      â”‚                                  â”‚     INSERT comment_table      â”‚                           â”‚
      â”‚                                  â”‚                              â”‚                           â”‚
      â”‚                                  â”‚  4. æ›´æ–°è¯„è®ºè®¡æ•° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚ Redis                     â”‚
      â”‚                                  â”‚     INCR comment_count:msg_001â”‚                           â”‚
      â”‚                                  â”‚                              â”‚                           â”‚
      â”‚                                  â”‚  5. æŸ¥è¯¢åŠ¨æ€ä½œè€… â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚ store_table               â”‚
      â”‚                                  â”‚     è·å– msg_001 çš„ user_id   â”‚                           â”‚
      â”‚                                  â”‚&lt;â”€â”€â”€â”€â”€â”€ bigV_001 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                           â”‚
      â”‚                                  â”‚                              â”‚                           â”‚
      â”‚                                  â”‚  6. å‘é€é€šçŸ¥ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚
      â”‚                                  â”‚     å†™å…¥ notification_table   â”‚                           â”‚
      â”‚                                  â”‚     {                         â”‚                           â”‚
      â”‚                                  â”‚       user_id: bigV_001,      â”‚                           â”‚
      â”‚                                  â”‚       type: COMMENT,          â”‚                           â”‚
      â”‚                                  â”‚       from_user: userB,       â”‚                           â”‚
      â”‚                                  â”‚       message_id: msg_001,    â”‚                           â”‚
      â”‚                                  â”‚       comment_id: xxx         â”‚                           â”‚
      â”‚                                  â”‚     }                         â”‚                           â”‚
      â”‚                                  â”‚                              â”‚                           â”‚
      â”‚                                  â”‚  7. å¦‚æœå¤§Våœ¨çº¿ï¼Œæ¨é€é€šçŸ¥ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚
      â”‚                                  â”‚     WebSocket: "æœ‰äººè¯„è®ºäº†ä½ çš„åŠ¨æ€"                         â”‚
      â”‚                                  â”‚                              â”‚                           â”‚
      â”‚&lt;â”€â”€â”€â”€ è¿”å›æˆåŠŸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                              â”‚                           â”‚
      â”‚      { comment_id: xxx }         â”‚                              â”‚                           â”‚
      â”‚                                  â”‚                              â”‚                           â”‚
</code></pre>
<h4 data-id="heading-20">æ¥¼ä¸­æ¥¼å›å¤</h4>
<pre><code class="hljs language-txt" lang="txt">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¥¼ä¸­æ¥¼å›å¤æµç¨‹                                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ç”¨æˆ·Cå›å¤ç”¨æˆ·Bçš„è¯„è®º
    
    POST /api/comment
    {
      message_id: "msg_001",           // åŸåŠ¨æ€ID
      content: "åŒæ„ï¼",
      reply_to_user: "userB",          // å›å¤ç›®æ ‡ç”¨æˆ·
      reply_to_comment: "cmt_001"      // å›å¤ç›®æ ‡è¯„è®ºID
    }
    
                                  â”‚
                                  â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  å†™å…¥è¯„è®ºè¡¨                                                                                               â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚  â”‚  message_id     â”‚  comment_id             â”‚  user_id â”‚  content   â”‚  reply_to_userâ”‚ reply_to_cmtâ”‚    â”‚
    â”‚  â”‚  msg_001        â”‚  1703837000000_userC    â”‚  userC   â”‚  åŒæ„ï¼     â”‚  userB       â”‚  cmt_001    â”‚    â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  å‘é€ä¸¤æ¡é€šçŸ¥                                                                                             â”‚
    â”‚                                                                                                          â”‚
    â”‚  1. é€šçŸ¥åŠ¨æ€ä½œè€… (bigV_001)                    2. é€šçŸ¥è¢«å›å¤è€… (userB)                                      â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
    â”‚  â”‚  type: COMMENT                     â”‚       â”‚  type: REPLY                       â”‚                     â”‚
    â”‚  â”‚  to_user: bigV_001                 â”‚       â”‚  to_user: userB                    â”‚                     â”‚
    â”‚  â”‚  from_user: userC                  â”‚       â”‚  from_user: userC                  â”‚                     â”‚
    â”‚  â”‚  content: "userCè¯„è®ºäº†ä½ çš„åŠ¨æ€"     â”‚       â”‚  content: "userCå›å¤äº†ä½ çš„è¯„è®º"     â”‚                     â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-21">ç‚¹èµ</h3>
<h4 data-id="heading-22">è¡¨ç»“æ„è®¾è®¡</h4>
<pre><code class="hljs language-txt" lang="txt">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  like_tableï¼ˆç‚¹èµæ˜ç»†è¡¨ï¼‰- å­˜å‚¨ï¼šTablestore / HBase                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸»é”®è®¾è®¡                                                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  åˆ—å            â”‚  ç±»å‹                    â”‚  è¯´æ˜                                                       â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  message_id     â”‚  String (PK1, åˆ†åŒºé”®)    â”‚  è¢«ç‚¹èµçš„åŠ¨æ€ID                                              â”‚   â”‚
â”‚  â”‚  user_id        â”‚  String (PK2)           â”‚  ç‚¹èµè€…IDï¼Œè”åˆä¸»é”®ä¿è¯åŒä¸€ç”¨æˆ·åªèƒ½ç‚¹èµä¸€æ¬¡                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                                                 â”‚
â”‚  å±æ€§åˆ—                                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  åˆ—å            â”‚  ç±»å‹                    â”‚  è¯´æ˜                                                       â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  timestamp      â”‚  Long                   â”‚  ç‚¹èµæ—¶é—´                                                    â”‚   â”‚
â”‚  â”‚  like_type      â”‚  Integer                â”‚  ç‚¹èµç±»å‹ï¼š1-ğŸ‘ï¼Œ2-â¤ï¸ï¼Œ3-ğŸ˜„ï¼Œ4-ğŸ˜®ï¼Œ5-ğŸ˜¢ï¼Œ6-ğŸ˜                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                                                 â”‚
â”‚  ç¤ºä¾‹æ•°æ®                                                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚  â”‚  message_id       â”‚  user_id     â”‚  timestamp      â”‚  like_type  â”‚                                          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                          â”‚
â”‚  â”‚  msg_001          â”‚  userA       â”‚  1703836800000  â”‚  1          â”‚                                          â”‚
â”‚  â”‚  msg_001          â”‚  userB       â”‚  1703836900000  â”‚  1          â”‚                                          â”‚
â”‚  â”‚  msg_001          â”‚  userC       â”‚  1703837000000  â”‚  2          â”‚                                          â”‚
â”‚  â”‚  msg_002          â”‚  userA       â”‚  1703838000000  â”‚  1          â”‚                                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â”‚                                                                                                                 â”‚
â”‚  ç‰¹ç‚¹ï¼š                                                                                                          â”‚
â”‚  - è”åˆä¸»é”® (message_id, user_id) ä¿è¯å¹‚ç­‰ï¼ŒåŒä¸€ç”¨æˆ·å¯¹åŒä¸€åŠ¨æ€åªèƒ½æœ‰ä¸€æ¡è®°å½•                                        â”‚
â”‚  - é‡å¤ç‚¹èµï¼šç›´æ¥è¦†ç›–ï¼ˆå¹‚ç­‰ï¼‰                                                                                      â”‚
â”‚  - å–æ¶ˆç‚¹èµï¼šåˆ é™¤è®°å½•                                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Redis è®¡æ•°è®¾è®¡ï¼ˆè§£å†³çƒ­ç‚¹é—®é¢˜ï¼‰                                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ–¹æ¡ˆ1ï¼šç®€å•è®¡æ•°ï¼ˆé€‚åˆæ™®é€šåŠ¨æ€ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Key: like_count:{message_id}                                                                                   â”‚
â”‚  Value: 12345                                                                                                   â”‚
â”‚  æ“ä½œï¼šINCRï¼ˆç‚¹èµï¼‰/ DECRï¼ˆå–æ¶ˆï¼‰                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ–¹æ¡ˆ2ï¼šåˆ†æ¡¶è®¡æ•°ï¼ˆé€‚åˆå¤§Vçˆ†æ¬¾åŠ¨æ€ï¼Œè§£å†³çƒ­ç‚¹Keyé—®é¢˜ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é—®é¢˜ï¼šå¤§Vå‘äº†çˆ†æ¬¾åŠ¨æ€ï¼ŒçŸ­æ—¶é—´100ä¸‡äººç‚¹èµï¼Œå•Keyæˆä¸ºçƒ­ç‚¹                                                            â”‚
â”‚                                                                                                                 â”‚
â”‚  è§£å†³æ–¹æ¡ˆï¼šå°†è®¡æ•°åˆ†æ•£åˆ°å¤šä¸ªæ¡¶                                                                                      â”‚
â”‚                                                                                                                 â”‚
â”‚  Key: like_count:{message_id}:bucket:{0-99}                                                                     â”‚
â”‚                                                                                                                 â”‚
â”‚  ç‚¹èµæ—¶ï¼š                                                                                                        â”‚
â”‚    bucket_id = hash(user_id) % 100                                                                              â”‚
â”‚    INCR like_count:msg_001:bucket:37                                                                            â”‚
â”‚                                                                                                                 â”‚
â”‚  æŸ¥è¯¢æ—¶ï¼š                                                                                                        â”‚
â”‚    æ–¹å¼1ï¼šMGETæ‰€æœ‰æ¡¶ï¼Œæ±‚å’Œ                                                                                        â”‚
â”‚    æ–¹å¼2ï¼šå®šæ—¶ä»»åŠ¡èšåˆåˆ°ä¸»Keyï¼ŒæŸ¥è¯¢ä¸»Key                                                                           â”‚
â”‚                                                                                                                 â”‚
â”‚  ç¤ºä¾‹ï¼š                                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                           â”‚
â”‚  â”‚  Key                               â”‚  Value      â”‚                                                           â”‚
â”‚  â”‚  like_count:msg_001:bucket:0       â”‚  1234       â”‚                                                           â”‚
â”‚  â”‚  like_count:msg_001:bucket:1       â”‚  1289       â”‚                                                           â”‚
â”‚  â”‚  like_count:msg_001:bucket:2       â”‚  1256       â”‚                                                           â”‚
â”‚  â”‚  ...                               â”‚  ...        â”‚                                                           â”‚
â”‚  â”‚  like_count:msg_001:bucket:99      â”‚  1301       â”‚                                                           â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                                                           â”‚
â”‚  â”‚  like_count:msg_001 (èšåˆå€¼)        â”‚  125000     â”‚  â† å®šæ—¶ä»»åŠ¡æ›´æ–°                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-23">ç‚¹èµ/å–æ¶ˆç‚¹èµæµç¨‹</h4>
<pre><code class="hljs language-txt" lang="txt">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç‚¹èµæµç¨‹                                                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ç”¨æˆ·A                            Like Service                       æ•°æ®åº“                    åŠ¨æ€ä½œè€…
      â”‚                                  â”‚                                â”‚                          â”‚
      â”‚ POST /api/like                   â”‚                                â”‚                          â”‚
      â”‚ {                                â”‚                                â”‚                          â”‚
      â”‚   message_id: "msg_001",         â”‚                                â”‚                          â”‚
      â”‚   action: "LIKE"                 â”‚                                â”‚                          â”‚
      â”‚ }                                â”‚                                â”‚                          â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚                                â”‚                          â”‚
      â”‚                                  â”‚                                â”‚                          â”‚
      â”‚                                  â”‚  1. æ£€æŸ¥æ˜¯å¦å·²ç‚¹èµ              â”‚                          â”‚
      â”‚                                  â”‚â”€â”€â”€â”€â”€â”€ GET â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚ like_table               â”‚
      â”‚                                  â”‚     (msg_001, userA)           â”‚                          â”‚
      â”‚                                  â”‚&lt;â”€â”€â”€â”€â”€ NULLï¼ˆæœªç‚¹èµï¼‰â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                          â”‚
      â”‚                                  â”‚                                â”‚                          â”‚
      â”‚                                  â”‚  2. å†™å…¥ç‚¹èµè®°å½•ï¼ˆå¹‚ç­‰å†™å…¥ï¼‰     â”‚                          â”‚
      â”‚                                  â”‚â”€â”€â”€â”€â”€â”€ PUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚ like_table               â”‚
      â”‚                                  â”‚     (msg_001, userA, 1, now)   â”‚                          â”‚
      â”‚                                  â”‚                                â”‚                          â”‚
      â”‚                                  â”‚  3. æ›´æ–°ç‚¹èµè®¡æ•°               â”‚                          â”‚
      â”‚                                  â”‚â”€â”€â”€â”€â”€â”€ INCR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚ Redis                    â”‚
      â”‚                                  â”‚     like_count:msg_001         â”‚                          â”‚
      â”‚                                  â”‚                                â”‚                          â”‚
      â”‚                                  â”‚  4. å‘é€é€šçŸ¥ï¼ˆå¼‚æ­¥ï¼‰            â”‚                          â”‚
      â”‚                                  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚
      â”‚                                  â”‚     "userAèµäº†ä½ çš„åŠ¨æ€"          â”‚                          â”‚
      â”‚                                  â”‚                                â”‚                          â”‚
      â”‚&lt;â”€â”€â”€â”€ è¿”å›æˆåŠŸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                â”‚                          â”‚
      â”‚      { liked: true, count: 1235 }â”‚                                â”‚                          â”‚


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å–æ¶ˆç‚¹èµæµç¨‹                                                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ç”¨æˆ·A                            Like Service                       æ•°æ®åº“
      â”‚                                  â”‚                                â”‚
      â”‚ POST /api/like                   â”‚                                â”‚
      â”‚ {                                â”‚                                â”‚
      â”‚   message_id: "msg_001",         â”‚                                â”‚
      â”‚   action: "UNLIKE"               â”‚                                â”‚
      â”‚ }                                â”‚                                â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚                                â”‚
      â”‚                                  â”‚                                â”‚
      â”‚                                  â”‚  1. åˆ é™¤ç‚¹èµè®°å½•                â”‚
      â”‚                                  â”‚â”€â”€â”€â”€â”€â”€ DELETE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚ like_table
      â”‚                                  â”‚     (msg_001, userA)           â”‚
      â”‚                                  â”‚                                â”‚
      â”‚                                  â”‚  2. æ›´æ–°ç‚¹èµè®¡æ•°               â”‚
      â”‚                                  â”‚â”€â”€â”€â”€â”€â”€ DECR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚ Redis
      â”‚                                  â”‚     like_count:msg_001         â”‚
      â”‚                                  â”‚                                â”‚
      â”‚&lt;â”€â”€â”€â”€ è¿”å›æˆåŠŸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                â”‚
      â”‚      { liked: false, count: 1234}â”‚                                â”‚
</code></pre>
<h4 data-id="heading-24">ä¸Šè¿°åœºæ™¯æ¶‰åŠåˆ°çš„æŠ€æœ¯é—®é¢˜</h4>
<h5 data-id="heading-25">çƒ­ç‚¹keyçš„è¯»å†™è§£å†³æ–¹æ¡ˆ</h5>
<pre><code class="hljs language-txt" lang="txt">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Feedæµç³»ç»Ÿçƒ­ç‚¹Keyå®Œæ•´è§£å†³æ–¹æ¡ˆ                                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                  â”‚
â”‚                                          ç”¨æˆ·è¯·æ±‚                                                                 â”‚
â”‚                                             â”‚                                                                    â”‚
â”‚                                             â–¼                                                                    â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                    â”‚
â”‚                              â”‚       çƒ­ç‚¹æ£€æµ‹æ¨¡å—           â”‚                                                    â”‚
â”‚                              â”‚  (æ»‘åŠ¨çª—å£ç»Ÿè®¡è®¿é—®é¢‘ç‡)       â”‚                                                    â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                    â”‚
â”‚                                             â”‚                                                                    â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                â”‚
â”‚                          â”‚                                     â”‚                                                â”‚
â”‚                    æ™®é€šKey                                çƒ­ç‚¹Key                                               â”‚
â”‚                          â”‚                                     â”‚                                                â”‚
â”‚                          â–¼                                     â–¼                                                â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚               â”‚   ç›´æ¥è®¿é—®Redis  â”‚                   â”‚   çƒ­ç‚¹å¤„ç†æ¨¡å—   â”‚                                        â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚                                                              â”‚                                                  â”‚
â”‚                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚                                        â”‚                                           â”‚                           â”‚
â”‚                                      è¯»è¯·æ±‚                                       å†™è¯·æ±‚                         â”‚
â”‚                                        â”‚                                           â”‚                           â”‚
â”‚                                        â–¼                                           â–¼                           â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚                         â”‚       è¯»çƒ­ç‚¹å¤„ç†          â”‚               â”‚       å†™çƒ­ç‚¹å¤„ç†          â”‚                â”‚
â”‚                         â”‚                          â”‚               â”‚                          â”‚                â”‚
â”‚                         â”‚  1. æœ¬åœ°ç¼“å­˜ï¼ˆCaffeineï¼‰  â”‚               â”‚  1. åˆ†æ¡¶è®¡æ•°             â”‚                â”‚
â”‚                         â”‚     TTL: 1ç§’             â”‚               â”‚     100ä¸ªæ¡¶ï¼Œåˆ†æ•£å†™å‹åŠ›   â”‚                â”‚
â”‚                         â”‚                          â”‚               â”‚                          â”‚                â”‚
â”‚                         â”‚  2. å¤šå‰¯æœ¬è¯»å–           â”‚               â”‚  2. å¼‚æ­¥æ¶ˆæ¯é˜Ÿåˆ—          â”‚                â”‚
â”‚                         â”‚     éšæœºé€‰æ‹©å‰¯æœ¬          â”‚               â”‚     Kafkaå‰Šå³°            â”‚                â”‚
â”‚                         â”‚                          â”‚               â”‚                          â”‚                â”‚
â”‚                         â”‚  3. è¯»å†™åˆ†ç¦»             â”‚               â”‚  3. åˆå¹¶å†™å…¥             â”‚                â”‚
â”‚                         â”‚     ä»Slaveè¯»å–          â”‚               â”‚     ç´¯ç§¯åæ‰¹é‡å†™å…¥        â”‚                â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h6 data-id="heading-26">è¯»çƒ­ç‚¹è§£å†³æ–¹æ¡ˆ</h6>
<ol>
<li>æœ¬åœ°ç¼“å­˜ã€‚æœ¬åœ°ç¼“å­˜æœªå‘½ä¸­æ—¶æ‰è®¿é—®Redisã€‚</li>
<li>è¯»å†™åˆ†ç¦»+å¤šå‰¯æœ¬ã€‚</li>
</ol>
<pre><code class="hljs language-txt" lang="txt">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Redis è¯»å†™åˆ†ç¦»                                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              100ä¸‡è¯»è¯·æ±‚/åˆ†é’Ÿ
                                    â”‚
                                    â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                     è¯»è´Ÿè½½å‡è¡¡                                â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚              â”‚              â”‚              â”‚
                    â–¼              â–¼              â–¼              â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚  Slave-1     â”‚â”‚  Slave-2     â”‚â”‚  Slave-3     â”‚â”‚  Slave-4     â”‚
           â”‚  (åªè¯»)       â”‚â”‚  (åªè¯»)       â”‚â”‚  (åªè¯»)       â”‚â”‚  (åªè¯»)       â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â–²              â–²              â–²              â–²
                    â”‚              â”‚              â”‚              â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚ ä¸»ä»å¤åˆ¶
                                          â”‚
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚   Master     â”‚ &lt;â”€â”€â”€ å†™è¯·æ±‚
                                   â”‚   (è¯»å†™)      â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¼˜ç‚¹ï¼š
- è¯»è¯·æ±‚åˆ†æ•£åˆ°å¤šä¸ªSlaveï¼Œçº¿æ€§æ‰©å±•è¯»èƒ½åŠ›
- é€‚åˆè¯»å¤šå†™å°‘åœºæ™¯

ç¼ºç‚¹ï¼š
- ä¸»ä»å¤åˆ¶æœ‰å»¶è¿Ÿï¼ˆæ¯«ç§’çº§ï¼‰
- æ¶æ„å¤æ‚åº¦å¢åŠ 
</code></pre>
<ol start="3">
<li>çƒ­ç‚¹Keyå¤åˆ¶ï¼ˆKeyåˆ†ç‰‡è¯»ï¼‰</li>
</ol>
<pre><code class="hljs language-txt" lang="txt">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  çƒ­ç‚¹Keyå¤åˆ¶                                                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åŸå§‹Keyï¼šlike_count:msg_001  â†’  å•èŠ‚ç‚¹æ‰¿å—æ‰€æœ‰è¯·æ±‚

å¤åˆ¶ä¸ºå¤šä¸ªKeyï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                 â”‚
â”‚   like_count:msg_001:0  â†’  Node-1                                                                               â”‚
â”‚   like_count:msg_001:1  â†’  Node-2                                                                               â”‚
â”‚   like_count:msg_001:2  â†’  Node-3                                                                               â”‚
â”‚   like_count:msg_001:3  â†’  Node-4                                                                               â”‚
â”‚   ...                                                                                                           â”‚
â”‚   like_count:msg_001:N  â†’  Node-N                                                                               â”‚
â”‚                                                                                                                 â”‚
â”‚   è¯»å–æ—¶ï¼šéšæœºé€‰æ‹©ä¸€ä¸ªå‰¯æœ¬Keyè¯»å–                                                                                  â”‚
â”‚   replicaId = random.nextInt(N)                                                                                 â”‚
â”‚   key = "like_count:msg_001:" + replicaId                                                                       â”‚
â”‚                                                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>éšæœºè¯»å–è¿˜æ˜¯å¯èƒ½å­˜åœ¨</p>
<h6 data-id="heading-27">å†™çƒ­ç‚¹è§£å†³æ–¹æ¡ˆ</h6>
<ol>
<li>åˆ†æ¡¶è®¡æ•°</li>
</ol>
<pre><code class="hljs language-txt" lang="txt">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åˆ†æ¡¶è®¡æ•°æ¶æ„                                                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é—®é¢˜ï¼š100ä¸‡äººåŒæ—¶ç‚¹èµï¼ŒINCR like_count:msg_001 æˆä¸ºå•ç‚¹ç“¶é¢ˆ

                              100ä¸‡å†™è¯·æ±‚/åˆ†é’Ÿ
                                    â”‚
                                    â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                    Hash(user_id) % 100                        â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚          â”‚          â”‚          â”‚          â”‚          â”‚
           â–¼          â–¼          â–¼          â–¼          â–¼          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ bucket:0 â”‚â”‚ bucket:1 â”‚â”‚ bucket:2 â”‚â”‚ bucket:3 â”‚â”‚   ...    â”‚â”‚bucket:99 â”‚
    â”‚  INCR    â”‚â”‚  INCR    â”‚â”‚  INCR    â”‚â”‚  INCR    â”‚â”‚  INCR    â”‚â”‚  INCR    â”‚
    â”‚  =1234   â”‚â”‚  =1289   â”‚â”‚  =1256   â”‚â”‚  =1301   â”‚â”‚   ...    â”‚â”‚  =1278   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚          â”‚          â”‚          â”‚          â”‚          â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                          å®šæ—¶èšåˆï¼ˆæ¯ç§’/æ¯åˆ†é’Ÿï¼‰
                                    â”‚
                                    â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚ like_count:msg_001â”‚
                          â”‚     = 125000     â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ•ˆæœï¼š
- 100ä¸ªæ¡¶ï¼Œæ¯ä¸ªæ¡¶æ‰¿æ‹…1ä¸‡QPS
- å†™å‹åŠ›åˆ†æ•£åˆ°ä¸åŒçš„RedisèŠ‚ç‚¹
</code></pre>
<ol start="2">
<li>å¼‚æ­¥å†™å…¥ + æ¶ˆæ¯é˜Ÿåˆ—</li>
</ol>
<pre><code class="hljs language-txt" lang="txt">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¼‚æ­¥å†™å…¥æ¶æ„                                                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              100ä¸‡å†™è¯·æ±‚/åˆ†é’Ÿ
                                    â”‚
                                    â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                     API Server                               â”‚
              â”‚                   (ç«‹å³è¿”å›æˆåŠŸ)                              â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ å‘é€æ¶ˆæ¯ï¼ˆå¼‚æ­¥ï¼‰
                                    â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                    Kafka / RocketMQ                          â”‚
              â”‚                    like_topic                                â”‚
              â”‚               (å¤šåˆ†åŒºï¼Œå¹¶è¡Œæ¶ˆè´¹)                               â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚              â”‚              â”‚              â”‚
                    â–¼              â–¼              â–¼              â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ Consumer-1   â”‚â”‚ Consumer-2   â”‚â”‚ Consumer-3   â”‚â”‚ Consumer-4   â”‚
           â”‚ Partition-0  â”‚â”‚ Partition-1  â”‚â”‚ Partition-2  â”‚â”‚ Partition-3  â”‚
           â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚               â”‚               â”‚               â”‚
                  â”‚         æ‰¹é‡åˆå¹¶å†™å…¥ï¼ˆæ¯100æ¡/æ¯1ç§’ï¼‰              â”‚
                  â”‚               â”‚               â”‚               â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚    Redis     â”‚
                                   â”‚   Database   â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¼˜ç‚¹ï¼š
- å‰Šå³°å¡«è°·ï¼Œå¹³æ»‘å†™å…¥å‹åŠ›
- æ”¯æŒæ‰¹é‡åˆå¹¶ï¼Œå‡å°‘å†™å…¥æ¬¡æ•°
- APIå¿«é€Ÿå“åº”ï¼Œç”¨æˆ·ä½“éªŒå¥½

ç¼ºç‚¹ï¼š
- æ•°æ®æœ‰å»¶è¿Ÿï¼ˆç§’çº§ï¼‰
- éœ€è¦å¤„ç†æ¶ˆæ¯ç§¯å‹
</code></pre>
<ol start="3">
<li>åˆå¹¶å†™å…¥</li>
</ol>
<pre><code class="hljs language-txt" lang="txt">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åˆå¹¶å†™å…¥                                                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åŸç†ï¼šå°†å¤šä¸ªå†™è¯·æ±‚åˆå¹¶ä¸ºä¸€ä¸ªï¼Œå‡å°‘å†™å…¥æ¬¡æ•°

    T0: INCR like:msg_001  â†’  ç´¯ç§¯ +1
    T1: INCR like:msg_001  â†’  ç´¯ç§¯ +2
    T2: INCR like:msg_001  â†’  ç´¯ç§¯ +3
    ...
    T99: INCR like:msg_001 â†’  ç´¯ç§¯ +100
    
    T100: åˆå¹¶å†™å…¥ â†’ INCRBY like:msg_001 100  (ä¸€æ¬¡å†™å…¥ä»£æ›¿100æ¬¡)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                 â”‚
â”‚   è¯·æ±‚é˜Ÿåˆ—                             åˆå¹¶å™¨                              Redis                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚   â”‚ +1 (user_A) â”‚                 â”‚             â”‚                    â”‚             â”‚                            â”‚
â”‚   â”‚ +1 (user_B) â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;    â”‚  ç´¯ç§¯: +100 â”‚   â”€â”€â”€ æ¯100ms â”€â”€â”€&gt; â”‚ INCRBY 100  â”‚                            â”‚
â”‚   â”‚ +1 (user_C) â”‚                 â”‚             â”‚                    â”‚             â”‚                            â”‚
â”‚   â”‚ ...         â”‚                 â”‚             â”‚                    â”‚             â”‚                            â”‚
â”‚   â”‚ +1 (user_N) â”‚                 â”‚             â”‚                    â”‚             â”‚                            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h5 data-id="heading-28">å¤§keyçš„è¯»å†™è§£å†³æ–¹æ¡ˆ</h5>
<h6 data-id="heading-29">è¯»å¤§keyè§£å†³æ–¹æ¡ˆ</h6>
<ol>
<li>æ°´å¹³æ‹†åˆ†</li>
</ol>
<pre><code class="hljs language-txt" lang="txt">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ‹†åˆ†å¤§Key - å°†ä¸€ä¸ªå¤§Keyæ‹†åˆ†ä¸ºå¤šä¸ªå°Key                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åŸå§‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Key: followers:bigV_001                                                                                        â”‚
â”‚  Type: Set                                                                                                      â”‚
â”‚  å…ƒç´ : [fan_001, fan_002, fan_003, ... fan_5000000]  (500ä¸‡)                                                    â”‚
â”‚  å¤§å°: ~50MB                                                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼ æ‹†åˆ†
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Key: followers:bigV_001:0     â†’  [fan_000001 ~ fan_050000]  (5ä¸‡)  ~500KB                                      â”‚
â”‚  Key: followers:bigV_001:1     â†’  [fan_050001 ~ fan_100000]  (5ä¸‡)  ~500KB                                      â”‚
â”‚  Key: followers:bigV_001:2     â†’  [fan_100001 ~ fan_150000]  (5ä¸‡)  ~500KB                                      â”‚
â”‚  ...                                                                                                            â”‚
â”‚  Key: followers:bigV_001:99    â†’  [fan_4950001 ~ fan_5000000] (5ä¸‡)  ~500KB                                     â”‚
â”‚                                                                                                                 â”‚
â”‚  æ‹†åˆ†æ•°é‡: 100ä¸ªåˆ†ç‰‡                                                                                             â”‚
â”‚  æ¯ä¸ªåˆ†ç‰‡: 5ä¸‡å…ƒç´ ï¼Œçº¦500KB                                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<ol start="2">
<li>å‚ç›´æ‹†åˆ†</li>
</ol>
<pre><code class="hljs language-txt" lang="txt">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‚ç›´æ‹†åˆ† - å°†å¤§å¯¹è±¡æ‹†åˆ†ä¸ºå¤šä¸ªå°å¯¹è±¡ï¼ŒæŒ‰éœ€åŠ è½½                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åŸå§‹ï¼ˆå¤§å¯¹è±¡ï¼‰ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Key: feed_detail:msg_001                                                                                       â”‚
â”‚  Value: {                                                                                                       â”‚
â”‚    "feed": { "id": "msg_001", "content": "...", "user": {...} },         // åŸºç¡€ä¿¡æ¯ ~1KB                        â”‚
â”‚    "comments": [{...}, {...}, ...],                                       // è¯„è®ºåˆ—è¡¨ ~2MB                       â”‚
â”‚    "likeUsers": [{...}, {...}, ...],                                      // ç‚¹èµç”¨æˆ· ~1MB                       â”‚
â”‚    "shareUsers": [{...}, {...}, ...]                                      // è½¬å‘ç”¨æˆ· ~1MB                       â”‚
â”‚  }                                                                                                              â”‚
â”‚  æ€»å¤§å°: ~5MB                                                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼ å‚ç›´æ‹†åˆ†
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Key: feed:msg_001:basic                â†’  åŸºç¡€ä¿¡æ¯     ~1KB   ï¼ˆé¦–å±åŠ è½½ï¼‰                                       â”‚
â”‚  Key: feed:msg_001:comments             â†’  è¯„è®ºåˆ—è¡¨     ~2MB   ï¼ˆå±•å¼€æ—¶åŠ è½½ï¼‰                                     â”‚
â”‚  Key: feed:msg_001:comments:page:1      â†’  è¯„è®ºç¬¬1é¡µ    ~20KB  ï¼ˆåˆ†é¡µåŠ è½½ï¼‰                                       â”‚
â”‚  Key: feed:msg_001:comments:page:2      â†’  è¯„è®ºç¬¬2é¡µ    ~20KB                                                    â”‚
â”‚  Key: feed:msg_001:like_users           â†’  ç‚¹èµç”¨æˆ·     ~1MB   ï¼ˆç‚¹å‡»æ—¶åŠ è½½ï¼‰                                     â”‚
â”‚  Key: feed:msg_001:share_users          â†’  è½¬å‘ç”¨æˆ·     ~1MB   ï¼ˆç‚¹å‡»æ—¶åŠ è½½ï¼‰                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<ol start="3">
<li>scanåˆ†æ‰¹è¯»å–
åªéœ€æ£€æŸ¥ SCAN è¿”å›çš„æ¸¸æ ‡å€¼æ˜¯å¦ä¸º0ï¼Œä¸º0è¡¨ç¤ºè¿­ä»£å®Œæˆã€‚</li>
</ol>
<pre><code class="hljs language-txt" lang="txt">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åˆ†æ‰¹è¯»å– - ä½¿ç”¨æ¸¸æ ‡åˆ†æ‰¹è·å–æ•°æ®ï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é”™è¯¯æ–¹å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HGETALL big_hash    â†’  ä¸€æ¬¡æ€§è¿”å›10ä¸‡ä¸ªå­—æ®µ  â†’  é˜»å¡Redis  â†’  ç½‘ç»œä¼ è¾“æ…¢                                         â”‚
â”‚  SMEMBERS big_set    â†’  ä¸€æ¬¡æ€§è¿”å›100ä¸‡å…ƒç´    â†’  OOMé£é™©    â†’  å®¢æˆ·ç«¯å†…å­˜æº¢å‡º                                      â”‚
â”‚  LRANGE big_list 0 -1 â†’ ä¸€æ¬¡æ€§è¿”å›å…¨éƒ¨å…ƒç´    â†’  è¶…æ—¶        â†’  è¯·æ±‚å¤±è´¥                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ­£ç¡®æ–¹å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HSCAN big_hash 0 COUNT 1000  â†’  æ¯æ¬¡è¿”å›çº¦1000ä¸ªå­—æ®µ  â†’  å¤šæ¬¡è¿­ä»£  â†’  ä¸é˜»å¡                                      â”‚
â”‚  SSCAN big_set 0 COUNT 1000   â†’  æ¯æ¬¡è¿”å›çº¦1000ä¸ªå…ƒç´   â†’  å¤šæ¬¡è¿­ä»£  â†’  å†…å­˜å¯æ§                                    â”‚
â”‚  LRANGE big_list 0 999        â†’  åˆ†é¡µè¯»å–            â†’  å¤šæ¬¡è¯·æ±‚  â†’  å“åº”å¿«                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<ol start="4">
<li>å‹ç¼©å­˜å‚¨</li>
</ol>
<pre><code class="hljs language-txt" lang="txt">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‹ç¼©å­˜å‚¨ - å‡å°‘Valueå¤§å°                                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åŸå§‹ï¼š5MB JSONå­—ç¬¦ä¸²
å‹ç¼©åï¼š~500KBï¼ˆå‹ç¼©ç‡çº¦90%ï¼‰

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                                                                 â”‚
â”‚   åŸå§‹æ•°æ® (5MB)                                                                                                 â”‚
â”‚   {                                                                                                             â”‚
â”‚     "feed": {...},                                                                                              â”‚
â”‚     "comments": [{...}, {...}, ...],  // 1000æ¡è¯„è®º                                                              â”‚
â”‚     "likeUsers": [{...}, {...}, ...], // 1000ä¸ªç‚¹èµç”¨æˆ·                                                          â”‚
â”‚     ...                                                                                                         â”‚
â”‚   }                                                                                                             â”‚
â”‚                                                                                                                 â”‚
â”‚         â”‚                                                                                                       â”‚
â”‚         â–¼  GZIPå‹ç¼©                                                                                             â”‚
â”‚                                                                                                                 â”‚
â”‚   å‹ç¼©æ•°æ® (~500KB)                                                                                              â”‚
â”‚   H4sIAAAAAAAAA6tWKkktLlGyUlAqS8wpTgUA8KxLFwwAAAA=                                                              â”‚
â”‚                                                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h6 data-id="heading-30">å†™å¤§keyè§£å†³æ–¹æ¡ˆ</h6>
<ol>
<li>åˆ†æ‰¹å†™å…¥</li>
</ol>
<pre><code class="hljs language-txt" lang="txt">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åˆ†æ‰¹å†™å…¥ - å°†å¤§é‡æ•°æ®åˆ†æ‰¹å†™å…¥ï¼Œé¿å…ä¸€æ¬¡æ€§å¤§é‡å†™å…¥                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é”™è¯¯æ–¹å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SADD followers:bigV_001 fan_001 fan_002 ... fan_100000   (ä¸€æ¬¡æ€§æ·»åŠ 10ä¸‡å…ƒç´ )                                   â”‚
â”‚  â†’  è€—æ—¶é•¿ï¼Œé˜»å¡Redis                                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ­£ç¡®æ–¹å¼ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç¬¬1æ‰¹: SADD followers:bigV_001 fan_001 ... fan_1000      (1000ä¸ª)                                              â”‚
â”‚  ç¬¬2æ‰¹: SADD followers:bigV_001 fan_1001 ... fan_2000     (1000ä¸ª)                                              â”‚
â”‚  ...                                                                                                            â”‚
â”‚  ç¬¬100æ‰¹: SADD followers:bigV_001 fan_99001 ... fan_100000 (1000ä¸ª)                                              â”‚
â”‚  â†’  æ¯æ‰¹è€—æ—¶çŸ­ï¼Œä¸é˜»å¡Redis                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ Kiro AI IDE å¼€å‘ Amazon CDK éƒ¨ç½²æ¶æ„ï¼šä»æ¨¡ç³Šéœ€æ±‚åˆ°ä¸‰å±‚å †æ ˆçš„åä½œå®æˆ˜]]></title>    <link>https://juejin.cn/post/7589308109641105443</link>    <guid>https://juejin.cn/post/7589308109641105443</guid>    <pubDate>2025-12-30T07:01:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589308109641105443" data-draft-id="7589386219449139215" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ Kiro AI IDE å¼€å‘ Amazon CDK éƒ¨ç½²æ¶æ„ï¼šä»æ¨¡ç³Šéœ€æ±‚åˆ°ä¸‰å±‚å †æ ˆçš„åä½œå®æˆ˜"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-30T07:01:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äºšé©¬é€Šäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2850395271209496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ Kiro AI IDE å¼€å‘ Amazon CDK éƒ¨ç½²æ¶æ„ï¼šä»æ¨¡ç³Šéœ€æ±‚åˆ°ä¸‰å±‚å †æ ˆçš„åä½œå®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2850395271209496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äºšé©¬é€Šäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T07:01:46.000Z" title="Tue Dec 30 2025 07:01:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>æœ¬æ–‡è®°å½•äº†ä¸€æ¬¡çœŸå®çš„ AI è¾…åŠ©å¼€å‘è¿‡ç¨‹ï¼šå¦‚ä½•ä½¿ç”¨Â <strong>Kiro AI IDE</strong>Â ä»ä¸€ä¸ªæ¨¡ç³Šçš„éƒ¨ç½²éœ€æ±‚å¼€å§‹ï¼Œé€šè¿‡äººæœºåä½œï¼Œé€æ­¥è®¾è®¡å‡ºä¸‰å±‚å †æ ˆæ¶æ„ï¼Œå¹¶å®ŒæˆåŸºäºAmazon EMR Flink æ™ºèƒ½ç›‘æ§ç³»ç»Ÿçš„Amazon CDK éƒ¨ç½²ä»£ç ã€‚</p>
<p><strong>å¼€å‘æˆæœ</strong>ï¼š â€“ å¼€å‘æ—¶é—´ï¼šä» 10 å°æ—¶ç¼©çŸ­åˆ° 1.5 å°æ—¶ï¼ˆæ•ˆç‡æå‡ 6-7 å€ï¼‰ â€“ ä»£ç è´¨é‡ï¼šè‡ªåŠ¨åº”ç”¨äºšé©¬é€Šäº‘ç§‘æŠ€æœ€ä½³å®è·µ â€“ æ¶æ„æ¼”è¿›ï¼šä»å•å †æ ˆåˆ°ä¸‰å±‚å †æ ˆçš„ä¼˜åŒ–è¿‡ç¨‹</p>
<p><strong>é¡¹ç›®åœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyangguangfu007%2Femr-flink-monitoring-agent" target="_blank" title="https://github.com/yangguangfu007/emr-flink-monitoring-agent" ref="nofollow noopener noreferrer">github.com/yangguangfuâ€¦</a></p>
<blockquote>
<p>ğŸ”¥ æƒ³åˆ©ç”¨ç”Ÿæˆå¼AIå¼€å‘å·¥å…·è§£æ”¾åŒæ‰‹ï¼Œå´è‹¦äºåº”ç”¨æ•ˆæœä¸å¤Ÿå®Œå–„ã€æµç¨‹ä¸å¤Ÿè§„èŒƒï¼Ÿ</p>
<p>âœ¨ äºšé©¬é€Šäº‘ç§‘æŠ€ Kiro ç™»åœºï¼é‡‡ç”¨â€œè§„èŒƒé©±åŠ¨â€å¼€å‘ç†å¿µï¼Œç»“åˆ Agent Hooks è‡ªåŠ¨åŒ–ç³»ç»Ÿï¼Œ1å°æ—¶è®©å°ç™½å˜èº«ç”Ÿäº§çº§æ¸¸æˆåˆ¶ä½œäººï¼</p>
<p>ğŸ”› é€Ÿæ¥äº‘ä¸Šæ¢ç´¢å®éªŒå®¤ï¼Œä½“éªŒ Kiro å¼€å‘ç‹¬ç«‹æ¸¸æˆï¼Œä»éœ€æ±‚åˆ°éƒ¨ç½²å…¨æŒæ¡ï¼</p>
<p>ğŸ‘‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fevents.amazoncloud.cn%2Flabs%2Fcloudlab-kiro-cloudgames-static-website%3Fvisitfrom%3D3P_Juejinhead_1218%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejinhead_1218" target="_blank" title="https://events.amazoncloud.cn/labs/cloudlab-kiro-cloudgames-static-website?visitfrom=3P_Juejinhead_1218&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejinhead_1218" ref="nofollow noopener noreferrer">ç‚¹å‡»è¿™é‡Œ</a>ï¼Œå³åˆ»å¼€å¯ AI å¼€å‘ä¹‹æ—…ï¼</p>
</blockquote>
<h2 data-id="heading-1">èƒŒæ™¯ï¼šä»€ä¹ˆæ˜¯ Amazon CDK å’Œ Kiroï¼Ÿ</h2>
<h3 data-id="heading-2">Amazon CDK ç®€ä»‹</h3>
<p>Amazon Cloud Development Kit (CDK) æ˜¯ä½¿ç”¨ç¼–ç¨‹è¯­è¨€å®šä¹‰äº‘åŸºç¡€è®¾æ–½çš„æ¡†æ¶ï¼š â€“ ä½¿ç”¨ Pythonã€TypeScript ç­‰è¯­è¨€ï¼Œè€Œé JSON/YAML â€“ ä»£ç å¤ç”¨å’Œæ¨¡å—åŒ– â€“ IDE æ”¯æŒï¼ˆä»£ç è¡¥å…¨ã€ç±»å‹æ£€æŸ¥ï¼‰ â€“ é€šè¿‡ Amazon CloudFormation éƒ¨ç½²</p>
<h3 data-id="heading-3">Kiro ç®€ä»‹</h3>
<p><strong>Kiro</strong>Â æ˜¯äºšé©¬é€Šäº‘ç§‘æŠ€æ¨å‡ºçš„ AI è¾…åŠ©å¼€å‘å·¥å…·ï¼š â€“ ç†è§£è‡ªç„¶è¯­è¨€éœ€æ±‚ï¼Œç”Ÿæˆ CDK ä»£ç  â€“ åŸºäº Spec æ–‡æ¡£é©±åŠ¨å¼€å‘ â€“ ç†è§£äºšé©¬é€Šäº‘ç§‘æŠ€æœåŠ¡ä¾èµ–å…³ç³» â€“ é€šè¿‡å¯¹è¯è¿­ä»£ä¼˜åŒ–æ¶æ„è®¾è®¡</p>
<h2 data-id="heading-4">èµ·ç‚¹ï¼šä¸€ä¸ªæ¨¡ç³Šçš„éƒ¨ç½²éœ€æ±‚</h2>
<h3 data-id="heading-5">æˆ‘çš„åˆå§‹éœ€æ±‚</h3>
<p>æˆ‘åªæœ‰ä¸€ä¸ªç®€å•çš„æƒ³æ³•ï¼š</p>
<p>â€œæˆ‘æƒ³æŠŠåŸºäº Amazon EMR Flink çš„ç›‘æ§ç³»ç»Ÿéƒ¨ç½²åˆ°äºšé©¬é€Šäº‘ç§‘æŠ€ç¯å¢ƒâ€</p>
<p>å…·ä½“ç»†èŠ‚éƒ½ä¸æ¸…æ¥šï¼š â€“ ç”¨ä»€ä¹ˆæœåŠ¡éƒ¨ç½²åç«¯ï¼ŸAmazon ECSï¼ŸAmazon Lambdaï¼Ÿ â€“ å‰ç«¯æ€ä¹ˆæ‰˜ç®¡ï¼ŸAmazon S3ï¼Ÿè¿˜æ˜¯ä¹Ÿç”¨å®¹å™¨ï¼Ÿ â€“ ç½‘ç»œæ¶æ„æ€ä¹ˆè®¾è®¡ï¼Ÿ â€“ å®‰å…¨ç»„æ€ä¹ˆé…ç½®ï¼Ÿ</p>
<h4 data-id="heading-6">ç¬¬ä¸€æ­¥ï¼šä¸ Kiro å¯¹è¯</h4>
<p><strong>æˆ‘</strong>ï¼šæˆ‘æƒ³æŠŠ Amazon EMR Flink ç›‘æ§ç³»ç»Ÿéƒ¨ç½²åˆ°äºšé©¬é€Šäº‘ç§‘æŠ€ï¼Œåç«¯æ˜¯ FastAPIï¼Œå‰ç«¯æ˜¯ Reactã€‚ä½ æœ‰ä»€ä¹ˆå»ºè®®ï¼Ÿ</p>
<p><strong>Kiro</strong>ï¼š</p>
<p>æˆ‘ç†è§£ä½ çš„éœ€æ±‚ã€‚è®©æˆ‘å¸®ä½ åˆ†æä¸€ä¸‹ï¼š</p>
<p>åç«¯éƒ¨ç½²é€‰é¡¹ï¼š</p>
<ol>
<li>Amazon Fargate â€“ æ¨èï¼Œæ— éœ€ç®¡ç†æœåŠ¡å™¨ï¼ŒæŒ‰éœ€ä»˜è´¹</li>
<li>Amazon Lambda â€“ é€‚åˆè½»é‡çº§ APIï¼Œä½†æœ‰ 15 åˆ†é’Ÿè¶…æ—¶é™åˆ¶</li>
<li>Amazon EC2 â€“ éœ€è¦ç®¡ç†æœåŠ¡å™¨ï¼Œæˆæœ¬è¾ƒé«˜</li>
</ol>
<p>å‰ç«¯éƒ¨ç½²é€‰é¡¹ï¼š</p>
<ol>
<li>Amazon S3 + Amazon CloudFront â€“ æ¨èï¼Œé™æ€æ‰˜ç®¡ï¼Œå…¨çƒ CDN</li>
<li>Amazon Amplify Hosting â€“ ç®€å•ä½†çµæ´»æ€§è¾ƒä½</li>
</ol>
<p>å»ºè®®æ¶æ„ï¼š<br/>
â€“ å‰ç«¯ï¼šAmazon CloudFront + Amazon S3<br/>
â€“ åç«¯ï¼šApplication Load Balancer (ALB) + Amazon Fargate<br/>
â€“ è®¤è¯ï¼šAmazon Cognito User Pool</p>
<p>æˆ‘å¯ä»¥å¸®ä½ ç”¨ CDK å®ç°è¿™ä¸ªæ¶æ„ã€‚è¦ä¸è¦å…ˆåˆ›å»ºä¸€ä¸ª Spec æ–‡æ¡£ï¼Ÿ</p>
<h4 data-id="heading-7">ç¬¬äºŒæ­¥ï¼šåˆ›å»º Spec æ–‡æ¡£</h4>
<p>æ ¹æ® Kiro çš„å»ºè®®ï¼Œæˆ‘åˆ›å»ºäº† Spec æ–‡æ¡£æ¥æ˜ç¡®éœ€æ±‚ã€‚</p>
<p><strong>æˆ‘</strong>ï¼šå¸®æˆ‘åˆ›å»º Spec æ–‡æ¡£ç»“æ„ã€‚</p>
<p><strong>Kiro</strong>Â å¸®æˆ‘åœ¨ .kiro/specs/cloudfront-alb-ecs-deployment/ åˆ›å»ºäº†ä¸‰ä¸ªæ–‡æ¡£ï¼š</p>
<p><strong>requirements.md â€“ éƒ¨ç½²éœ€æ±‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12f5445d52ed4a7a9d3f5ab4eadfc466~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767682906&amp;x-signature=65s0fMxhQjoUzVsKuaHjT1hKR3I%3D" alt="1.webp" loading="lazy"/></p>
<p><strong>design.md â€“ æ¶æ„è®¾è®¡</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0d0a87320444d85ac55c28b211af1da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767682906&amp;x-signature=gKokEOdjxLOcE3meD%2BoPCRGyINU%3D" alt="2.webp" loading="lazy"/></p>
<p><strong>tasks.md â€“ ä»»åŠ¡åˆ†è§£</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bb5df8c78ee4fb58c1adfb904d639a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767682906&amp;x-signature=qJP8hfRZDVZJxuRUS6Z9wy3X2H8%3D" alt="3.webp" loading="lazy"/></p>
<h2 data-id="heading-8">ä½¿ç”¨ Kiro å¼€å‘ CDK ä»£ç </h2>
<h3 data-id="heading-9">ç¬¬ä¸€ç‰ˆï¼šå•å †æ ˆå®ç°</h3>
<p><strong>æˆ‘</strong>ï¼šåŸºäº Specï¼Œå¸®æˆ‘å®ç° CDK éƒ¨ç½²ä»£ç ã€‚</p>
<p><strong>Kiro</strong>ï¼šå¼€å§‹å®ç°â€¦</p>
<p>Kiro ç”Ÿæˆäº†ç¬¬ä¸€ç‰ˆä»£ç ï¼Œæ‰€æœ‰èµ„æºéƒ½åœ¨ä¸€ä¸ª Stack ä¸­ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">FlinkMonitorStack</span>(<span class="hljs-title class_ inherited__">Stack</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, scope, <span class="hljs-built_in">id</span>, **kwargs</span>):
        <span class="hljs-built_in">super</span>().__init__(scope, <span class="hljs-built_in">id</span>, **kwargs)
        
        <span class="hljs-comment"># VPCã€å­ç½‘ã€å®‰å…¨ç»„</span>
        <span class="hljs-comment"># Application Load Balancer (ALB)ã€Target Group</span>
        <span class="hljs-comment"># Amazon ECS Clusterã€AWS Fargate Service</span>
        <span class="hljs-comment"># Amazon S3ã€Amazon CloudFront</span>
        <span class="hljs-comment"># Amazon Cognito</span>
        <span class="hljs-comment"># ... æ‰€æœ‰èµ„æºéƒ½åœ¨è¿™é‡Œ</span>
</code></pre>
<p><strong>é—®é¢˜</strong>ï¼šä»£ç è¶…è¿‡ 500 è¡Œï¼Œéš¾ä»¥ç»´æŠ¤ï¼Œéƒ¨ç½²æ—¶é—´é•¿ã€‚</p>
<h4 data-id="heading-10">ä¸ Kiro æ¢è®¨ï¼šå¦‚ä½•ä¼˜åŒ–æ¶æ„ï¼Ÿ</h4>
<p><strong>æˆ‘</strong>ï¼šè¿™ä¸ª Stack å¤ªå¤§äº†ï¼Œæœ‰æ²¡æœ‰æ›´å¥½çš„ç»„ç»‡æ–¹å¼ï¼Ÿ</p>
<p><strong>Kiro</strong>ï¼š</p>
<p>ä½ è¯´å¾—å¯¹ã€‚æˆ‘å»ºè®®é‡‡ç”¨å¤šå †æ ˆæ¶æ„ï¼š</p>
<p>æ–¹æ¡ˆä¸€ï¼šæŒ‰èµ„æºç±»å‹åˆ†ç¦»<br/>
â€“ NetworkStackï¼šVPCã€å­ç½‘ã€å®‰å…¨ç»„<br/>
â€“ ComputeStackï¼šAmazon ECSã€Amazon Fargate<br/>
â€“ StorageStackï¼šAmazon S3ã€Amazon CloudFront<br/>
â€“ AuthStackï¼šAmazon Cognito</p>
<p>æ–¹æ¡ˆäºŒï¼šæŒ‰éƒ¨ç½²é¢‘ç‡åˆ†ç¦»ï¼ˆæ¨èï¼‰<br/>
â€“ InfrastructureStackï¼šåŸºç¡€è®¾æ–½ï¼ˆå¾ˆå°‘å˜æ›´ï¼‰<br/>
â€“ BackendStackï¼šåç«¯åº”ç”¨ï¼ˆç»å¸¸æ›´æ–°ï¼‰<br/>
â€“ FrontendStackï¼šå‰ç«¯åº”ç”¨ï¼ˆç»å¸¸æ›´æ–°ï¼‰</p>
<p>æ–¹æ¡ˆäºŒçš„ä¼˜åŠ¿ï¼š</p>
<ol>
<li>æ›´æ–°å‰ç«¯ä¸å½±å“åç«¯</li>
<li>æ›´æ–°åç«¯ä¸å½±å“åŸºç¡€è®¾æ–½</li>
<li>éƒ¨ç½²æ›´å¿«ï¼ˆåªéƒ¨ç½²å˜æ›´çš„å †æ ˆï¼‰</li>
<li>èŒè´£æ¸…æ™°</li>
</ol>
<p>ä½ è§‰å¾—å“ªä¸ªæ–¹æ¡ˆæ›´é€‚åˆï¼Ÿ</p>
<p><strong>æˆ‘</strong>ï¼šæ–¹æ¡ˆäºŒçœ‹èµ·æ¥æ›´åˆç†ã€‚ä½†æ˜¯å †æ ˆä¹‹é—´æ€ä¹ˆå…±äº«èµ„æºï¼Ÿ</p>
<p><strong>Kiro</strong>ï¼š</p>
<p>é€šè¿‡ Amazon CloudFormation Outputs å’Œ Fn.importValueï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># InfrastructureStack å¯¼å‡º</span>
CfnOutput(self, "VPCId",
    <span class="hljs-attr">value</span>=vpc.vpc_id,
    <span class="hljs-attr">export_name</span>=<span class="hljs-string">"FlinkMonitor-VPC-Id"</span>
)

<span class="hljs-comment"># BackendStack å¯¼å…¥</span>
<span class="hljs-attr">vpc_id</span> = Fn.import_value(<span class="hljs-string">"FlinkMonitor-VPC-Id"</span>)
</code></pre>
<p>è¿™æ ·å¯ä»¥å®ç°å †æ ˆé—´çš„æ¾è€¦åˆã€‚</p>
<h3 data-id="heading-11">ç¬¬äºŒç‰ˆï¼šä¸‰å±‚å †æ ˆæ¶æ„</h3>
<p>åŸºäºè®¨è®ºï¼ŒKiro é‡æ„äº†ä»£ç ä¸ºä¸‰å±‚å †æ ˆã€‚</p>
<p><strong>æˆ‘</strong>ï¼šè¯·æŒ‰ç…§ä¸‰å±‚å †æ ˆé‡æ„ä»£ç ã€‚</p>
<p><strong>Kiro</strong>ï¼šæ­£åœ¨é‡æ„â€¦</p>
<h4 data-id="heading-12">1. InfrastructureStack â€“ åŸºç¡€è®¾æ–½å †æ ˆ</h4>
<p><strong>Kiro</strong>Â ç”Ÿæˆäº†åŸºç¡€è®¾æ–½å †æ ˆä»£ç ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">InfrastructureStack</span>(<span class="hljs-title class_ inherited__">Stack</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, scope, <span class="hljs-built_in">id</span>, **kwargs</span>):
        <span class="hljs-built_in">super</span>().__init__(scope, <span class="hljs-built_in">id</span>, **kwargs)
        
        <span class="hljs-comment"># ç½‘ç»œèµ„æº</span>
        self._create_network_resources()
        
        <span class="hljs-comment"># å®‰å…¨ç»„</span>
        self._create_security_groups()
        
        <span class="hljs-comment"># è´Ÿè½½å‡è¡¡</span>
        self._create_load_balancer()
        
        <span class="hljs-comment"># å‰ç«¯åŸºç¡€è®¾æ–½</span>
        self._create_frontend_infrastructure()
        
        <span class="hljs-comment"># è®¤è¯æœåŠ¡</span>
        self._create_cognito()
</code></pre>
<p><strong>å…³é”®å¯¹è¯</strong>ï¼šAmazon ECS å®‰å…¨ç»„åº”è¯¥åœ¨å“ªé‡Œåˆ›å»ºï¼Ÿ</p>
<p><strong>æˆ‘</strong>ï¼šAmazon ECS å®‰å…¨ç»„åº”è¯¥åœ¨ InfrastructureStack è¿˜æ˜¯ BackendStackï¼Ÿ</p>
<p><strong>Kiro</strong>ï¼š</p>
<p>å»ºè®®åœ¨ InfrastructureStack ä¸­åˆ›å»ºï¼ŒåŸå› ï¼š</p>
<ol>
<li>å®‰å…¨ç»„æ˜¯åŸºç¡€è®¾æ–½ï¼Œä¸ä¾èµ– Amazon ECS æœåŠ¡</li>
<li>å¯ä»¥åœ¨éƒ¨ç½²åç«¯å‰å°±é…ç½® Amazon EMR å®‰å…¨ç»„</li>
<li>é¿å…å¾ªç¯ä¾èµ–</li>
<li>ç¬¦åˆ IaC æœ€ä½³å®è·µ</li>
</ol>
<p>å®ç°ï¼š<br/>
â€“ InfrastructureStack åˆ›å»º Amazon ECS å®‰å…¨ç»„<br/>
â€“ å¯¼å‡ºå®‰å…¨ç»„ ID<br/>
â€“ BackendStack å¯¼å…¥å¹¶ä½¿ç”¨</p>
<h4 data-id="heading-13">2. BackendStack â€“ åç«¯åº”ç”¨å †æ ˆ</h4>
<p><strong>Kiro</strong>Â ç”Ÿæˆäº†åç«¯å †æ ˆä»£ç ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BackendStack</span>(<span class="hljs-title class_ inherited__">Stack</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, scope, <span class="hljs-built_in">id</span>, **kwargs</span>):
        <span class="hljs-built_in">super</span>().__init__(scope, <span class="hljs-built_in">id</span>, **kwargs)
        
        <span class="hljs-comment"># å¯¼å…¥åŸºç¡€è®¾æ–½èµ„æº</span>
        vpc_id = Fn.import_value(<span class="hljs-string">"FlinkMonitor-VPC-Id"</span>)
        ecs_sg_id = Fn.import_value(<span class="hljs-string">"FlinkMonitor-ECS-SecurityGroup"</span>)
        
        <span class="hljs-comment"># Amazon ECS Cluster</span>
        <span class="hljs-comment"># Task Definition</span>
        <span class="hljs-comment"># AWS Fargate Service</span>
</code></pre>
<h4 data-id="heading-14">3. FrontendStack â€“ å‰ç«¯åº”ç”¨å †æ ˆ</h4>
<p><strong>Kiro</strong>Â ç”Ÿæˆäº†å‰ç«¯å †æ ˆä»£ç ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">FrontendStack</span>(<span class="hljs-title class_ inherited__">Stack</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, scope, <span class="hljs-built_in">id</span>, **kwargs</span>):
        <span class="hljs-built_in">super</span>().__init__(scope, <span class="hljs-built_in">id</span>, **kwargs)
        
        <span class="hljs-comment"># å¯¼å…¥ Amazon S3 å’Œ Amazon CloudFront</span>
        bucket_name = Fn.import_value(<span class="hljs-string">"FlinkMonitor-Frontend-Bucket"</span>)
        
        <span class="hljs-comment"># æ„å»ºå‰ç«¯</span>
        <span class="hljs-comment"># éƒ¨ç½²åˆ° Amazon S3</span>
        <span class="hljs-comment"># å¤±æ•ˆ Amazon CloudFront ç¼“å­˜</span>
</code></pre>
<h3 data-id="heading-15">è¿­ä»£ä¼˜åŒ–ï¼šè§£å†³å®é™…é—®é¢˜</h3>
<p>åœ¨å®é™…éƒ¨ç½²ä¸­é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼ŒKiro å¸®åŠ©é€ä¸€è§£å†³ã€‚</p>
<h4 data-id="heading-16">é—®é¢˜ 1ï¼šå­ç½‘ CIDR å†²çª</h4>
<p><strong>æˆ‘</strong>ï¼šéƒ¨ç½²å¤±è´¥ï¼Œæç¤ºå­ç½‘ CIDR ä¸ EMR å†²çªã€‚</p>
<p><strong>Kiro</strong>ï¼š</p>
<p>æˆ‘æ¥å¸®ä½ è®¡ç®—å¯ç”¨çš„ CIDRï¼š</p>
<ol>
<li>æŸ¥è¯¢ Amazon EMR é›†ç¾¤çš„å­ç½‘ CIDR</li>
<li>æ‰¾åˆ° Amazon VPC ä¸­æœªä½¿ç”¨çš„ CIDR èŒƒå›´</li>
<li>æ›´æ–° cdk.json é…ç½®</li>
</ol>
<p>å·²ç”Ÿæˆè„šæœ¬ï¼šscripts/calculate_subnet_cidr.py</p>
<h4 data-id="heading-17">é—®é¢˜ 2ï¼šAmazon EMR å®‰å…¨ç»„é…ç½®æ—¶æœº</h4>
<p><strong>æˆ‘</strong>ï¼šä»€ä¹ˆæ—¶å€™é…ç½® Amazon EMR å®‰å…¨ç»„ï¼Ÿ</p>
<p><strong>Kiro</strong>ï¼š</p>
<p>å»ºè®®åœ¨ BackendStack éƒ¨ç½²åã€æµ‹è¯•å‰é…ç½®ï¼š</p>
<p>æ­¥éª¤ 4.5ï¼šé…ç½® Amazon EMR å®‰å…¨ç»„<br/>
â€“ Amazon ECS å®‰å…¨ç»„å·²åœ¨æ­¥éª¤ 1 åˆ›å»º<br/>
â€“ ä¸ä¾èµ– Amazon ECS æœåŠ¡ï¼ˆåªéœ€è¦å®‰å…¨ç»„ IDï¼‰<br/>
â€“ é¿å…å¾ªç¯ä¾èµ–</p>
<p>å·²ç”Ÿæˆè„šæœ¬ï¼šscripts/configure_emr_security_group.sh</p>
<h4 data-id="heading-18">é—®é¢˜ 3ï¼šå‰ç«¯ç¯å¢ƒå˜é‡</h4>
<p><strong>æˆ‘</strong>ï¼šå‰ç«¯æ€ä¹ˆè·å– Amazon Cognito å’Œ API åœ°å€ï¼Ÿ</p>
<p><strong>Kiro</strong>ï¼š</p>
<p>é€šè¿‡è„šæœ¬è‡ªåŠ¨ç”Ÿæˆ .env æ–‡ä»¶ï¼š</p>
<ol>
<li>ä» Amazon CloudFormation Outputs è¯»å–å€¼</li>
<li>ç”Ÿæˆ frontend/.env</li>
<li>å‰ç«¯æ„å»ºæ—¶æ³¨å…¥ç¯å¢ƒå˜é‡</li>
</ol>
<p>å·²ç”Ÿæˆè„šæœ¬ï¼šscripts/generate_frontend_env.sh</p>
<h2 data-id="heading-19">æœ€ç»ˆæ¶æ„ï¼šä¸‰å±‚å †æ ˆè®¾è®¡</h2>
<p>ç»è¿‡ä¸ Kiro çš„å¤šè½®å¯¹è¯å’Œè¿­ä»£ï¼Œæœ€ç»ˆå½¢æˆäº†æ¸…æ™°çš„ä¸‰å±‚å †æ ˆæ¶æ„ã€‚</p>
<h3 data-id="heading-20">æ¶æ„å›¾</h3>
<p><strong>å®Œæ•´éƒ¨ç½²æ¶æ„å›¾</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/caa0dc01e76e4816800f4f8041cd3624~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767682906&amp;x-signature=jwL0xqipMtoR76rrmERXvVFvVAM%3D" alt="4.webp" loading="lazy"/></p>
<p><strong>ä¸‰å±‚å †æ ˆæ¶æ„å›¾</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6323cd8b29f242ea89ab479839853298~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767682906&amp;x-signature=AHmH1JUeVSFB8p7RI6DnDQyJxo0%3D" alt="5.webp" loading="lazy"/></p>
<h3 data-id="heading-21">è®¾è®¡åŸåˆ™</h3>
<ol>
<li><strong>èŒè´£åˆ†ç¦»</strong>ï¼šæ¯ä¸ªå †æ ˆè´Ÿè´£ç‰¹å®šçš„èµ„æºç±»å‹</li>
<li><strong>ä¾èµ–æ¸…æ™°</strong>ï¼šåç«¯å’Œå‰ç«¯ä¾èµ–åŸºç¡€è®¾æ–½</li>
<li><strong>ç‹¬ç«‹éƒ¨ç½²</strong>ï¼šå¯ä»¥å•ç‹¬æ›´æ–°æŸä¸ªå †æ ˆ</li>
<li><strong>èµ„æºå…±äº«</strong>ï¼šé€šè¿‡ Amazon CloudFormation è¾“å‡ºå…±äº«èµ„æº</li>
</ol>
<h3 data-id="heading-22">InfrastructureStack æ ¸å¿ƒèµ„æº</h3>
<h4 data-id="heading-23">ç½‘ç»œèµ„æº</h4>
<ul>
<li>
<p><strong>Amazon VPC</strong> <strong>é›†æˆ</strong>ï¼šè‡ªåŠ¨å‘ç° Amazon EMR é›†ç¾¤æ‰€åœ¨çš„ Amazon VPC</p>
</li>
<li>
<p><strong>å­ç½‘åˆ›å»º</strong>ï¼š</p>
<ul>
<li>å…¬æœ‰å­ç½‘ Ã— 2 (è·¨ 2 ä¸ª AZ)ï¼šApplication Load Balancer (ALB) + Amazon NAT Gateway</li>
<li>ç§æœ‰å­ç½‘ Ã— 2 (è·¨ 2 ä¸ª AZ)ï¼šAmazon Fargate ä»»åŠ¡</li>
</ul>
</li>
<li>
<p><strong>è·¯ç”±è¡¨</strong>ï¼š</p>
<ul>
<li>å…¬æœ‰è·¯ç”±è¡¨ â†’ Amazon Internet Gateway</li>
<li>ç§æœ‰è·¯ç”±è¡¨ Ã— 2 â†’ Amazon NAT Gateway (æ¯ä¸ª AZ ä¸€ä¸ª)</li>
</ul>
</li>
</ul>
<h4 data-id="heading-24">å®‰å…¨èµ„æº</h4>
<ul>
<li>
<p><strong>å®‰å…¨ç»„</strong>ï¼š</p>
<ul>
<li>Application Load Balancer (ALB) å®‰å…¨ç»„ï¼šå…è®¸ HTTP/HTTPS å…¥ç«™</li>
<li>Amazon ECS å®‰å…¨ç»„ï¼šå…è®¸æ¥è‡ª Application Load Balancer (ALB) çš„æµé‡ (ç«¯å£ 8080)</li>
</ul>
</li>
<li>
<p><strong>Amazon IAM</strong> <strong>è§’è‰²</strong>ï¼š</p>
<ul>
<li>Task Roleï¼šåº”ç”¨æƒé™ (Amazon Bedrockã€Amazon EMRã€Amazon EC2)</li>
<li>Execution Roleï¼šAmazon ECS åŸºç¡€æ“ä½œæƒé™</li>
</ul>
</li>
</ul>
<h4 data-id="heading-25">è´Ÿè½½å‡è¡¡</h4>
<ul>
<li>
<p><strong>Application Load Balancer (ALB)</strong> ï¼š</p>
<ul>
<li>å…¬ç½‘è®¿é—® (internet-facing)</li>
<li>è·¨ 2 ä¸ª AZ éƒ¨ç½²</li>
<li>HTTP ç›‘å¬å™¨ (ç«¯å£ 80)</li>
</ul>
</li>
<li>
<p><strong>Target Group</strong>ï¼š</p>
<ul>
<li>ç›®æ ‡ç±»å‹ï¼šIP (Amazon Fargate)</li>
<li>å¥åº·æ£€æŸ¥ï¼š/api/health ç«¯ç‚¹</li>
</ul>
</li>
</ul>
<h4 data-id="heading-26">å‰ç«¯åŸºç¡€è®¾æ–½</h4>
<ul>
<li>
<p><strong>Amazon S3 Bucket</strong>ï¼š</p>
<ul>
<li>ç§æœ‰è®¿é—® (é€šè¿‡ Amazon CloudFront OAC)</li>
<li>é˜»æ­¢æ‰€æœ‰å…¬å…±è®¿é—®</li>
</ul>
</li>
<li>
<p><strong>Amazon CloudFront Distribution</strong>ï¼š</p>
<ul>
<li>
<p>å…¨çƒ CDN åŠ é€Ÿ</p>
</li>
<li>
<p>HTTPS å¼ºåˆ¶é‡å®šå‘</p>
</li>
<li>
<p>è·¯ç”±è§„åˆ™ï¼š</p>
<ul>
<li>/* â†’ Amazon S3 (å‰ç«¯é™æ€æ–‡ä»¶)</li>
<li>/api/* â†’ Application Load Balancer (ALB) (åç«¯ API)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-27">è®¤è¯æœåŠ¡</h4>
<ul>
<li>
<p><strong>Amazon Cognito User Pool</strong>ï¼š</p>
<ul>
<li>ç”¨æˆ·å + é‚®ç®±ç™»å½•</li>
<li>å¯†ç ç­–ç•¥ (8 ä½,å¤§å°å†™+æ•°å­—)</li>
</ul>
</li>
<li>
<p><strong>Amazon Cognito User Pool Client</strong>ï¼š</p>
<ul>
<li>OAuth 2.0 æˆæƒç æµ</li>
<li>å›è°ƒ URLï¼šAmazon CloudFront + localhost</li>
</ul>
</li>
</ul>
<h3 data-id="heading-28">BackendStack æ ¸å¿ƒèµ„æº</h3>
<h4 data-id="heading-29">Amazon Fargate æœåŠ¡</h4>
<ul>
<li>
<p><strong>Task Definition</strong>ï¼š</p>
<ul>
<li>CPUï¼š1024 (1 vCPU)</li>
<li>å†…å­˜ï¼š2048 MB (2 GB)</li>
<li>æ¶æ„ï¼šARM64 (æˆæœ¬ä¼˜åŒ–)</li>
<li>å®¹å™¨é•œåƒï¼šä» Amazon ECR æ‹‰å–</li>
<li>ç¯å¢ƒå˜é‡ï¼šAWS_DEFAULT_REGIONã€EMR_CLUSTER_ID</li>
<li>å¥åº·æ£€æŸ¥ï¼šcurl /api/health</li>
</ul>
</li>
<li>
<p><strong>Amazon Fargate Service</strong>ï¼š</p>
<ul>
<li>
<p>æœŸæœ›ä»»åŠ¡æ•°ï¼š1 (å¯é…ç½®)</p>
</li>
<li>
<p>éƒ¨ç½²åœ¨ç§æœ‰å­ç½‘</p>
</li>
<li>
<p>ä½¿ç”¨æ­¥éª¤ 1 åˆ›å»ºçš„ Amazon ECS å®‰å…¨ç»„</p>
</li>
<li>
<p>å…³è”åˆ° Application Load Balancer (ALB) Target Group</p>
</li>
<li>
<p>éƒ¨ç½²é…ç½®ï¼š</p>
<ul>
<li>æœ€å¤§ç™¾åˆ†æ¯”ï¼š200%</li>
<li>æœ€å°å¥åº·ç™¾åˆ†æ¯”ï¼š100%</li>
<li>å¯ç”¨æ–­è·¯å™¨å’Œè‡ªåŠ¨å›æ»š</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-30">Amazon CloudWatch Logs</h4>
<ul>
<li>æ—¥å¿—ç»„ï¼š/ecs/flink-monitor</li>
<li>ä¿ç•™å¤©æ•°ï¼š7 å¤©</li>
<li>æ—¥å¿—æµå‰ç¼€ï¼šecs</li>
</ul>
<h3 data-id="heading-31">FrontendStack æ ¸å¿ƒèµ„æº</h3>
<h4 data-id="heading-32">éƒ¨ç½²æµç¨‹</h4>
<ol>
<li><strong>æ£€æŸ¥æ„å»ºç›®å½•</strong>ï¼šfrontend/dist</li>
<li><strong>ä¸Šä¼ åˆ° Amazon S3</strong>ï¼šä½¿ç”¨ BucketDeployment</li>
<li><strong>Amazon CloudFront</strong> <strong>å¤±æ•ˆ</strong>ï¼šè‡ªåŠ¨å¤±æ•ˆç¼“å­˜ (/*)</li>
<li><strong>æ¸…ç†æ—§æ–‡ä»¶</strong>ï¼šprune=True</li>
</ol>
<h3 data-id="heading-33">éƒ¨ç½²æˆæœå±•ç¤º</h3>
<p><strong>Amazon CloudFormation å †æ ˆ</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a19fa850f98d4da69165445d3e763984~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767682906&amp;x-signature=n22ApmfccXlql04sGwjYLZjIbIY%3D" alt="6.webp" loading="lazy"/></p>
<p><strong>ç³»ç»Ÿè®¿é—®æˆåŠŸ</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8466d76054a34be6a00704d8985247c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767682906&amp;x-signature=8nhQTcU3K2gxtmrQ0RE80HCAtBw%3D" alt="7.webp" loading="lazy"/></p>
<p><strong>ç›‘æ§ä»ªè¡¨æ¿</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a1d8a0a9f224eab85562e256264be34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767682906&amp;x-signature=tBBHcfP6J9b4z7U2S60xAfeGyNU%3D" alt="8.webp" loading="lazy"/></p>
<h3 data-id="heading-34">æ¶æ„ä¼˜åŠ¿</h3>
<p><strong>1. æ¨¡å—åŒ–</strong></p>
<ul>
<li>æ¯ä¸ªå †æ ˆèŒè´£æ¸…æ™°</li>
<li>æ˜“äºç†è§£å’Œç»´æŠ¤</li>
<li>ä»£ç å¤ç”¨æ€§é«˜</li>
</ul>
<p><strong>2. ç‹¬ç«‹éƒ¨ç½²</strong></p>
<ul>
<li>å‰ç«¯æ›´æ–°ä¸å½±å“åç«¯</li>
<li>åç«¯æ›´æ–°ä¸å½±å“åŸºç¡€è®¾æ–½</li>
<li>åŠ å¿«éƒ¨ç½²é€Ÿåº¦</li>
</ul>
<p><strong>3. å®‰å…¨éš”ç¦»</strong></p>
<ul>
<li>åŸºç¡€è®¾æ–½å˜æ›´éœ€è¦æ˜ç¡®æ“ä½œ</li>
<li>é™ä½è¯¯æ“ä½œé£é™©</li>
<li>ä¾¿äºæƒé™ç®¡ç†</li>
</ul>
<p><strong>4. æˆæœ¬ä¼˜åŒ–</strong></p>
<ul>
<li>ä»…éƒ¨ç½²éœ€è¦æ›´æ–°çš„å †æ ˆ</li>
<li>å‡å°‘ Amazon CloudFormation API è°ƒç”¨</li>
<li>èŠ‚çœéƒ¨ç½²æ—¶é—´</li>
</ul>
<h2 data-id="heading-35">åŸºäº Kiro çš„å¼€å‘å¿ƒå¾—</h2>
<p><strong>1. Spec é©±åŠ¨å¼€å‘çš„ä»·å€¼</strong></p>
<p><strong>ä¼ ç»Ÿæ–¹å¼</strong>ï¼šç›´æ¥å†™ä»£ç ï¼Œè¾¹å†™è¾¹æƒ³æ¶æ„Â <strong>Kiro</strong> <strong>æ–¹å¼</strong>ï¼šå…ˆå†™ Specï¼Œæ˜ç¡®éœ€æ±‚å’Œè®¾è®¡ï¼Œå†ç”Ÿæˆä»£ç </p>
<p><strong>ä¼˜åŠ¿</strong>ï¼š â€“ éœ€æ±‚æ¸…æ™°ï¼Œå‡å°‘è¿”å·¥ â€“ è®¾è®¡æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ â€“ ä¾¿äºå›¢é˜Ÿåä½œå’Œ Code Review</p>
<p><strong>2. å¯¹è¯å¼æ¶æ„æ¼”è¿›</strong></p>
<p><strong>å…³é”®å‘ç°</strong>ï¼šæœ€å¥½çš„æ¶æ„ä¸æ˜¯ä¸€æ¬¡è®¾è®¡å‡ºæ¥çš„ï¼Œè€Œæ˜¯é€šè¿‡å¯¹è¯é€æ­¥ä¼˜åŒ–çš„ã€‚</p>
<p><strong>æˆ‘çš„ç»éªŒ</strong>ï¼š â€“ ç¬¬ä¸€ç‰ˆï¼šå•å †æ ˆï¼ˆç®€å•ä½†éš¾ç»´æŠ¤ï¼‰ â€“ ä¸ Kiro è®¨è®ºåï¼šä¸‰å±‚å †æ ˆï¼ˆæ¨¡å—åŒ–ã€å¯ç»´æŠ¤ï¼‰ â€“ é‡åˆ°é—®é¢˜æ—¶ï¼šKiro æä¾›å¤šä¸ªæ–¹æ¡ˆï¼Œæˆ‘é€‰æ‹©æœ€é€‚åˆçš„</p>
<p><strong>3. AI è¾…åŠ©çš„æœ€ä½³å®è·µ</strong></p>
<p><strong>Kiro</strong> <strong>è‡ªåŠ¨åº”ç”¨çš„æœ€ä½³å®è·µ</strong>ï¼š â€“ å®‰å…¨ç»„æœ€å°æƒé™åŸåˆ™ â€“ è·¨ AZ é«˜å¯ç”¨éƒ¨ç½² â€“ ç§æœ‰å­ç½‘ + Amazon NAT Gateway â€“ Amazon CloudFront OAC è€Œé OAI â€“ Amazon ECS æ–­è·¯å™¨å’Œè‡ªåŠ¨å›æ»š</p>
<p><strong>æˆ‘çš„æ”¶è·</strong>ï¼šä¸ä»…å¾—åˆ°äº†ä»£ç ï¼Œè¿˜å­¦åˆ°äº†äºšé©¬é€Šäº‘ç§‘æŠ€æœ€ä½³å®è·µã€‚</p>
<p><strong>4. æ•ˆç‡æå‡çš„å…³é”®</strong></p>
<p><strong>æ—¶é—´å¯¹æ¯”</strong>ï¼š â€“ ä¼ ç»Ÿå¼€å‘ï¼š10 å°æ—¶ï¼ˆæŸ¥æ–‡æ¡£ã€å†™ä»£ç ã€è°ƒè¯•ï¼‰ â€“ Kiro è¾…åŠ©ï¼š1.5 å°æ—¶ï¼ˆå¯¹è¯ã€Reviewã€å¾®è°ƒï¼‰</p>
<p><strong>æ•ˆç‡æå‡çš„åŸå› </strong>ï¼š â€“ å‡å°‘æŸ¥æ–‡æ¡£æ—¶é—´ï¼ˆKiro çŸ¥é“æ‰€æœ‰ APIï¼‰ â€“ å‡å°‘è°ƒè¯•æ—¶é—´ï¼ˆç”Ÿæˆçš„ä»£ç è´¨é‡é«˜ï¼‰ â€“ å‡å°‘é‡æ„æ—¶é—´ï¼ˆæ¶æ„è®¾è®¡åˆç†ï¼‰</p>
<p><strong>5. äººæœºåä½œçš„æ¨¡å¼</strong></p>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š â€“ äººï¼šæä¾›éœ€æ±‚ã€åšå†³ç­–ã€Review ä»£ç  â€“ AIï¼šç”Ÿæˆä»£ç ã€æä¾›æ–¹æ¡ˆã€åº”ç”¨æœ€ä½³å®è·µ</p>
<p><strong>ä¸è¦</strong>ï¼š â€“ å®Œå…¨ä¾èµ– AIï¼ˆéœ€è¦ç†è§£ç”Ÿæˆçš„æ ¸å¿ƒä»£ç å’Œæµç¨‹ï¼‰ â€“ å®Œå…¨ä¸ç”¨ AIï¼ˆé”™è¿‡æ•ˆç‡æå‡æœºä¼šï¼‰</p>
<p><strong>6. æŒç»­å­¦ä¹ </strong></p>
<p><strong>æ„å¤–æ”¶è·</strong>ï¼š â€“ å­¦ä¼šäº†ä¸‰å±‚å †æ ˆæ¶æ„æ¨¡å¼ â€“ ç†è§£äº† Amazon CloudFormation Outputs çš„ç”¨æ³• â€“ æŒæ¡äº† Amazon Fargate çš„æœ€ä½³å®è·µ â€“ äº†è§£äº† Amazon CloudFront çš„é«˜çº§é…ç½®</p>
<p><strong>å»ºè®®</strong>ï¼šæŠŠ Kiro å½“ä½œå­¦ä¹ å·¥å…·ï¼Œä¸ä»…è¦ç”¨å®ƒç”Ÿæˆä»£ç ï¼Œè¿˜è¦ç†è§£ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ã€‚</p>
<h2 data-id="heading-36">æ€»ç»“</h2>
<p>é€šè¿‡ Kiro AI è¾…åŠ©å¼€å‘ Amazon CDK éƒ¨ç½²æ¶æ„ï¼Œæˆ‘è·å¾—äº†ï¼š</p>
<ol>
<li><strong>æ•ˆç‡æå‡</strong>ï¼šå¼€å‘æ—¶é—´ä» 10 å°æ—¶ç¼©çŸ­åˆ°5 å°æ—¶</li>
<li><strong>æ¶æ„ä¼˜åŒ–</strong>ï¼šä»å•å †æ ˆæ¼”è¿›åˆ°ä¸‰å±‚å †æ ˆ</li>
<li><strong>ä»£ç è´¨é‡</strong>ï¼šè‡ªåŠ¨åº”ç”¨ äºšé©¬é€Šäº‘ç§‘æŠ€æœ€ä½³å®è·µ</li>
<li><strong>çŸ¥è¯†ç§¯ç´¯</strong>ï¼šå­¦ä¹ äº†äº‘æ¶æ„è®¾è®¡æ¨¡å¼</li>
</ol>
<p><strong>æ ¸å¿ƒä½“ä¼š</strong>ï¼š â€“ Kiro ä¸æ˜¯æ›¿ä»£å¼€å‘è€…ï¼Œè€Œæ˜¯å¢å¼ºå¼€å‘è€… â€“ æœ€å¥½çš„æ¶æ„æ¥è‡ªäººæœºåä½œ â€“ Spec é©±åŠ¨å¼€å‘æé«˜äº†ä»£ç è´¨é‡ â€“ AI è¾…åŠ©è®©æˆ‘ä»¬ä¸“æ³¨äºæ¶æ„è®¾è®¡ï¼Œè€Œéé‡å¤åŠ³åŠ¨</p>
<p><strong>ä¸‹ä¸€æ­¥è®¡åˆ’</strong>ï¼š</p>
<p>â€“ ä½¿ç”¨ Kiro å¼€å‘ CI/CD æµæ°´çº¿</p>
<p>â€“ æ¢ç´¢ Kiro åœ¨å¤šç¯å¢ƒéƒ¨ç½²ä¸­çš„åº”ç”¨</p>
<p><strong>å‚è€ƒèµ„æº</strong></p>
<ul>
<li><strong>é¡¹ç›®åœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyangguangfu007%2Femr-flink-monitoring-agent" target="_blank" title="https://github.com/yangguangfu007/emr-flink-monitoring-agent" ref="nofollow noopener noreferrer">github.com/yangguangfuâ€¦</a></li>
<li><strong>Amazon CDK</strong> <strong>æ–‡æ¡£</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.aws.amazon.com%2Fcdk%2F" target="_blank" title="https://docs.aws.amazon.com/cdk/" ref="nofollow noopener noreferrer">docs.aws.amazon.com/cdk/</a></li>
<li><strong>Kiro AI</strong> <strong>æ–‡æ¡£</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fkiro.dev%2Fdocs%2F" target="_blank" title="https://kiro.dev/docs/" ref="nofollow noopener noreferrer">kiro.dev/docs/</a></li>
</ul>
<p>*<em>å‰è¿°ç‰¹å®šäºšé©¬é€Šäº‘ç§‘æŠ€ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ç›¸å…³çš„æœåŠ¡ç›®å‰åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€æµ·å¤–åŒºåŸŸå¯ç”¨ã€‚äºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½åŒºåŸŸç›¸å…³äº‘æœåŠ¡ç”±è¥¿äº‘æ•°æ®å’Œå…‰ç¯æ–°ç½‘è¿è¥ï¼Œå…·ä½“ä¿¡æ¯ä»¥ä¸­å›½åŒºåŸŸå®˜ç½‘ä¸ºå‡†ã€‚</em></p>
<p><strong>æœ¬ç¯‡ä½œè€…</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8fdfd4698cbe4ecfa688ca2b36622023~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767682906&amp;x-signature=6Y0cWfHILdkjeask38XCKBw3G48%3D" alt="9.webp" loading="lazy"/></p>
<blockquote>
<p>ğŸ”¥ æƒ³åˆ©ç”¨ç”Ÿæˆå¼AIå¼€å‘å·¥å…·è§£æ”¾åŒæ‰‹ï¼Œå´è‹¦äºåº”ç”¨æ•ˆæœä¸å¤Ÿå®Œå–„ã€æµç¨‹ä¸å¤Ÿè§„èŒƒï¼Ÿ</p>
<p>âœ¨ äºšé©¬é€Šäº‘ç§‘æŠ€ Kiro ç™»åœºï¼é‡‡ç”¨â€œè§„èŒƒé©±åŠ¨â€å¼€å‘ç†å¿µï¼Œç»“åˆ Agent Hooks è‡ªåŠ¨åŒ–ç³»ç»Ÿï¼Œ1å°æ—¶è®©å°ç™½å˜èº«ç”Ÿäº§çº§æ¸¸æˆåˆ¶ä½œäººï¼</p>
<p>ğŸ”› é€Ÿæ¥äº‘ä¸Šæ¢ç´¢å®éªŒå®¤ï¼Œä½“éªŒ Kiro å¼€å‘ç‹¬ç«‹æ¸¸æˆï¼Œä»éœ€æ±‚åˆ°éƒ¨ç½²å…¨æŒæ¡ï¼</p>
<p>ğŸ‘‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fevents.amazoncloud.cn%2Flabs%2Fcloudlab-kiro-cloudgames-static-website%3Fvisitfrom%3D3P_Juejintail_1218%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejintail_1218" target="_blank" title="https://events.amazoncloud.cn/labs/cloudlab-kiro-cloudgames-static-website?visitfrom=3P_Juejintail_1218&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejintail_1218" ref="nofollow noopener noreferrer">ç‚¹å‡»è¿™é‡Œ</a>ï¼Œå³åˆ»å¼€å¯ AI å¼€å‘ä¹‹æ—…ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é˜¿é‡Œå¼€æºAgentScopeå¤šæ™ºèƒ½ä½“æ¡†æ¶è§£æç³»åˆ—ï¼ˆä¸€ï¼‰ç¬¬1ç« ï¼šAgentScope-Java æ¦‚è¿°ä¸å¿«é€Ÿå…¥é—¨]]></title>    <link>https://juejin.cn/post/7589275237037064227</link>    <guid>https://juejin.cn/post/7589275237037064227</guid>    <pubDate>2025-12-30T03:49:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589275237037064227" data-draft-id="7589206614930063400" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é˜¿é‡Œå¼€æºAgentScopeå¤šæ™ºèƒ½ä½“æ¡†æ¶è§£æç³»åˆ—ï¼ˆä¸€ï¼‰ç¬¬1ç« ï¼šAgentScope-Java æ¦‚è¿°ä¸å¿«é€Ÿå…¥é—¨"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2025-12-30T03:49:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯­è½å¿ƒç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2875978147955741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é˜¿é‡Œå¼€æºAgentScopeå¤šæ™ºèƒ½ä½“æ¡†æ¶è§£æç³»åˆ—ï¼ˆä¸€ï¼‰ç¬¬1ç« ï¼šAgentScope-Java æ¦‚è¿°ä¸å¿«é€Ÿå…¥é—¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978147955741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯­è½å¿ƒç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T03:49:57.000Z" title="Tue Dec 30 2025 03:49:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    12
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»22åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ€»è¿°</h2>
<p>AgentScope-Java æ˜¯ä¸€ä¸ª<strong>ç”Ÿäº§çº§çš„AIæ™ºèƒ½ä½“ç¼–ç¨‹æ¡†æ¶</strong>ï¼Œç”¨Javaæ„å»ºLLMé©±åŠ¨çš„æ™ºèƒ½åº”ç”¨ã€‚å®ƒä¸ä»…æä¾›äº†åŸºç¡€çš„Agent-æ¨¡å‹-å·¥å…·ä¸‰è§’äº¤äº’ï¼Œæ›´é‡è¦çš„æ˜¯æä¾›äº†ä¼ä¸šçº§ç”Ÿäº§å¿…éœ€çš„<strong>è¿è¡Œæ—¶æ§åˆ¶ã€å†…ç½®å·¥å…·ã€åè®®é›†æˆå’Œå¯è§‚æµ‹æ€§</strong>ã€‚</p>
<p>æœ¬ç« æˆ‘ä»¬å°†ä»**Whatï¼ˆæ˜¯ä»€ä¹ˆï¼‰ã€Whyï¼ˆä¸ºä»€ä¹ˆï¼‰ã€Howï¼ˆæ€æ ·ç”¨ï¼‰**ä¸‰ä¸ªç»´åº¦ç†è§£AgentScope-Javaï¼Œå¹¶é€šè¿‡å…·ä½“çš„ç”Ÿäº§åœºæ™¯ç¤ºä¾‹å±•ç¤ºæ¡†æ¶å¦‚ä½•è§£å†³çœŸå®é—®é¢˜ã€‚</p>
<h2 data-id="heading-1">ä¸»æ¶æ„è®¾è®¡å›¾</h2>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    User[ç”¨æˆ·/åº”ç”¨] --&gt; Agent[Agentæ¥å£å±‚]
    
    Agent --&gt; ReActAgent[ReActAgent&lt;br/&gt;æ¨ç†-è¡ŒåŠ¨å¾ªç¯]
    Agent --&gt; UserAgent[UserAgent&lt;br/&gt;ç”¨æˆ·äº¤äº’]
    Agent --&gt; OtherAgents[å…¶ä»–Agentå®ç°]
    
    ReActAgent --&gt; Model[Modelå±‚&lt;br/&gt;LLMè°ƒç”¨]
    ReActAgent --&gt; Memory[Memoryå±‚&lt;br/&gt;è®°å¿†ç®¡ç†]
    ReActAgent --&gt; Toolkit[Toolkitå±‚&lt;br/&gt;å·¥å…·ç®¡ç†]
    ReActAgent --&gt; Hook[Hookç³»ç»Ÿ&lt;br/&gt;äº‹ä»¶æ‹¦æˆª]
    
    Model --&gt; DashScope[DashScope]
    Model --&gt; OpenAI[OpenAI]
    Model --&gt; Anthropic[Anthropic]
    Model --&gt; Gemini[Gemini]
    
    Model --&gt; Formatter[Formatter&lt;br/&gt;æ¶ˆæ¯æ ¼å¼åŒ–]
    
    Memory --&gt; InMemory[InMemoryMemory]
    Memory --&gt; LongTerm[LongTermMemory]
    Memory --&gt; Session[SessionæŒä¹…åŒ–]
    
    Toolkit --&gt; ToolRegistry[ToolRegistry&lt;br/&gt;å·¥å…·æ³¨å†Œè¡¨]
    Toolkit --&gt; ToolExecutor[ToolExecutor&lt;br/&gt;å·¥å…·æ‰§è¡Œå™¨]
    Toolkit --&gt; MCP[MCPé›†æˆ]
    
    Hook --&gt; RAGHook[RAG Hook]
    Hook --&gt; PlanHook[Plan Hook]
    Hook --&gt; MemoryHook[Memory Hook]
    Hook --&gt; CustomHook[è‡ªå®šä¹‰Hook]
    
    ReActAgent --&gt; Pipeline[Pipeline&lt;br/&gt;å¤šæ™ºèƒ½ä½“åä½œ]
    ReActAgent --&gt; Interruption[Interruption&lt;br/&gt;ä¸­æ–­æœºåˆ¶]
    ReActAgent --&gt; Tracing[Tracing&lt;br/&gt;å¯è§‚æµ‹æ€§]
    
    style Agent fill:#e1f5ff
    style ReActAgent fill:#fff4e1
    style Model fill:#e8f5e9
    style Memory fill:#f3e5f5
    style Toolkit fill:#fff9c4
    style Hook fill:#ffe0b2
</code></pre>
<h2 data-id="heading-2">æ ¸å¿ƒåŠŸèƒ½æ—¶åºå›¾</h2>
<h3 data-id="heading-3">1. ReActAgent æ‰§è¡Œæµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User as ç”¨æˆ·
    participant Agent as ReActAgent
    participant Hook as Hookç³»ç»Ÿ
    participant Model as LLMæ¨¡å‹
    participant Toolkit as å·¥å…·ç®±
    participant Memory as è®°å¿†ç³»ç»Ÿ

    User-&gt;&gt;Agent: call(msg)
    Agent-&gt;&gt;Memory: æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
    
    loop æ¨ç†-è¡ŒåŠ¨å¾ªç¯
        Agent-&gt;&gt;Hook: PreReasoningEvent
        Hook--&gt;&gt;Agent: å¤„ç†é’©å­
        
        Agent-&gt;&gt;Memory: è·å–å†å²æ¶ˆæ¯
        Memory--&gt;&gt;Agent: è¿”å›æ¶ˆæ¯åˆ—è¡¨
        
        Agent-&gt;&gt;Model: è¯·æ±‚æ¨ç†
        Model--&gt;&gt;Agent: è¿”å›æ€è€ƒ+å·¥å…·è°ƒç”¨
        
        Agent-&gt;&gt;Hook: PostReasoningEvent
        Hook--&gt;&gt;Agent: å¤„ç†é’©å­
        
        alt éœ€è¦è°ƒç”¨å·¥å…·
            Agent-&gt;&gt;Hook: PreActingEvent
            Hook--&gt;&gt;Agent: å¤„ç†é’©å­
            
            Agent-&gt;&gt;Toolkit: æ‰§è¡Œå·¥å…·
            Toolkit--&gt;&gt;Agent: å·¥å…·ç»“æœ
            
            Agent-&gt;&gt;Hook: PostActingEvent
            Hook--&gt;&gt;Agent: å¤„ç†é’©å­
            
            Agent-&gt;&gt;Memory: ä¿å­˜å·¥å…·ç»“æœ
        else æ— éœ€å·¥å…·è°ƒç”¨
            Agent-&gt;&gt;Memory: ä¿å­˜æœ€ç»ˆå›ç­”
            Agent--&gt;&gt;User: è¿”å›ç»“æœ
        end
    end
</code></pre>
<h3 data-id="heading-4">2. å·¥å…·è°ƒç”¨æµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Agent as ReActAgent
    participant Toolkit as Toolkit
    participant Registry as ToolRegistry
    participant Executor as ToolExecutor
    participant Tool as å®é™…å·¥å…·æ–¹æ³•
    participant Context as ExecutionContext

    Agent-&gt;&gt;Toolkit: è°ƒç”¨å·¥å…·
    Toolkit-&gt;&gt;Registry: æŸ¥æ‰¾å·¥å…·å®šä¹‰
    Registry--&gt;&gt;Toolkit: è¿”å›å·¥å…·å…ƒæ•°æ®
    
    Toolkit-&gt;&gt;Executor: å‡†å¤‡æ‰§è¡Œ
    Executor-&gt;&gt;Context: è®¾ç½®æ‰§è¡Œä¸Šä¸‹æ–‡
    
    Executor-&gt;&gt;Tool: åå°„è°ƒç”¨æ–¹æ³•
    Tool--&gt;&gt;Executor: è¿”å›ç»“æœ
    
    Executor-&gt;&gt;Context: æ¸…ç†ä¸Šä¸‹æ–‡
    Executor--&gt;&gt;Toolkit: è¿”å›æ‰§è¡Œç»“æœ
    Toolkit--&gt;&gt;Agent: è¿”å›æ ¼å¼åŒ–ç»“æœ
</code></pre>
<h3 data-id="heading-5">3. Hook ç³»ç»Ÿæ‰§è¡Œæµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Agent as ReActAgent
    participant HookChain as Hooké“¾
    participant RAGHook as RAG Hook
    participant MemoryHook as Memory Hook
    participant PlanHook as Plan Hook
    participant Model as LLMæ¨¡å‹

    Agent-&gt;&gt;HookChain: è§¦å‘PreReasoningEvent
    
    HookChain-&gt;&gt;RAGHook: handle(event)
    RAGHook-&gt;&gt;RAGHook: æ£€ç´¢ç›¸å…³çŸ¥è¯†
    RAGHook-&gt;&gt;HookChain: æ·»åŠ çŸ¥è¯†åˆ°æç¤ºè¯
    
    HookChain-&gt;&gt;MemoryHook: handle(event)
    MemoryHook-&gt;&gt;MemoryHook: æ£€ç´¢é•¿æœŸè®°å¿†
    MemoryHook-&gt;&gt;HookChain: æ·»åŠ è®°å¿†åˆ°æç¤ºè¯
    
    HookChain-&gt;&gt;PlanHook: handle(event)
    PlanHook-&gt;&gt;PlanHook: è·å–å½“å‰è®¡åˆ’
    PlanHook-&gt;&gt;HookChain: æ·»åŠ è®¡åˆ’æç¤º
    
    HookChain--&gt;&gt;Agent: è¿”å›å¢å¼ºåçš„æ¶ˆæ¯
    Agent-&gt;&gt;Model: å‘é€è¯·æ±‚
</code></pre>
<h3 data-id="heading-6">4. æµå¼å“åº”å¤„ç†æµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User as ç”¨æˆ·
    participant Agent as ReActAgent
    participant Model as LLMæ¨¡å‹
    participant Accumulator as ContentAccumulator
    participant Stream as äº‹ä»¶æµ

    User-&gt;&gt;Agent: stream(msg, options)
    Agent-&gt;&gt;Model: è¯·æ±‚æµå¼å“åº”
    
    loop æµå¼æ¥æ”¶
        Model--&gt;&gt;Agent: ChatResponse chunk
        Agent-&gt;&gt;Accumulator: ç´¯ç§¯å†…å®¹
        
        alt æ¨ç†é˜¶æ®µ
            Accumulator-&gt;&gt;Stream: ReasoningChunkEvent
            Stream--&gt;&gt;User: å®æ—¶æ¨ç†å†…å®¹
        else è¡ŒåŠ¨é˜¶æ®µ
            Accumulator-&gt;&gt;Stream: ActingChunkEvent
            Stream--&gt;&gt;User: å®æ—¶æ‰§è¡Œå†…å®¹
        end
    end
    
    Model--&gt;&gt;Agent: æœ€ç»ˆå“åº”
    Agent-&gt;&gt;Stream: å®Œæ•´äº‹ä»¶(isLast=true)
    Stream--&gt;&gt;User: æœ€ç»ˆç»“æœ
</code></pre>
<h3 data-id="heading-7">5. ä¸­æ–­ä¸æ¢å¤æµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User as ç”¨æˆ·
    participant Agent as ReActAgent
    participant Context as InterruptContext
    participant Tool as å·¥å…·æ‰§è¡Œ
    participant Memory as è®°å¿†ç³»ç»Ÿ

    User-&gt;&gt;Agent: call(msg)
    Agent-&gt;&gt;Tool: æ‰§è¡Œé•¿æ—¶å·¥å…·
    
    User-&gt;&gt;Agent: interrupt()
    Agent-&gt;&gt;Context: è®¾ç½®ä¸­æ–­æ ‡å¿—
    
    Tool-&gt;&gt;Context: æ£€æŸ¥ä¸­æ–­çŠ¶æ€
    Context--&gt;&gt;Tool: å·²ä¸­æ–­
    Tool--&gt;&gt;Agent: å–æ¶ˆæ‰§è¡Œ
    
    Agent-&gt;&gt;Memory: ä¿å­˜ä¸­æ–­çŠ¶æ€
    Agent--&gt;&gt;User: è¿”å›ä¸­æ–­ä¿¡æ¯
    
    User-&gt;&gt;Agent: call() ç»§ç»­æ‰§è¡Œ
    Agent-&gt;&gt;Memory: æ¢å¤ä¸Šä¸‹æ–‡
    Agent-&gt;&gt;Tool: é‡æ–°æ‰§è¡Œæˆ–è·³è¿‡
    Tool--&gt;&gt;Agent: å®Œæˆ
    Agent--&gt;&gt;User: è¿”å›ç»“æœ
</code></pre>
<hr/>
<h2 data-id="heading-8">1.1 é¡¹ç›®èƒŒæ™¯ä¸è®¾è®¡ç†å¿µ</h2>
<h3 data-id="heading-9">1.1.1 ä¸ºä»€ä¹ˆéœ€è¦AgentScope-Javaï¼Ÿ</h3>
<p>åœ¨ä½¿ç”¨LLMæ„å»ºæ™ºèƒ½åº”ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œå¼€å‘è€…é€šå¸¸é¢ä¸´ä»¥ä¸‹<strong>æ ¸å¿ƒç—›ç‚¹</strong>ï¼š</p>
<h4 data-id="heading-10">é—®é¢˜1ï¼šLLMçš„è‡ªä¸»æ€§ä¸å¯æ§æ€§çŸ›ç›¾</h4>
<p><strong>åœºæ™¯</strong>ï¼šä½ ä¸ºä¸€ä¸ªç”µå•†å¹³å°æ„å»ºäº†ä¸€ä¸ªè‡ªä¸»AIåŠ©æ‰‹ï¼Œå®ƒå¯ä»¥è‡ªä¸»æŸ¥è¯¢å•†å“ã€æ¨èäº§å“ã€å¤„ç†è®¢å•ã€‚ä½†å½“åŠ©æ‰‹é”™è¯¯åœ°å‘ç”¨æˆ·æ‰¿è¯ºäº†ä¸åˆç†çš„ä¼˜æƒ æˆ–æ‰¿è¯ºäº†ä¸èƒ½å®ç°çš„æœåŠ¡æ—¶ï¼Œä½ æ— æ³•ç«‹å³å¹²é¢„ã€‚</p>
<p><strong>AgentScopeè§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong>å®‰å…¨ä¸­æ–­</strong>ï¼šåœ¨ä»»æ„æ—¶åˆ»æš‚åœAgentï¼Œå®Œæ•´ä¿ç•™ä¸Šä¸‹æ–‡å’Œå·¥å…·çŠ¶æ€ï¼Œæ”¯æŒæ— æŸæ¢å¤</li>
<li><strong>ä¼˜é›…å–æ¶ˆ</strong>ï¼šç»ˆæ­¢é•¿æ—¶é—´è¿è¡Œçš„å·¥å…·è°ƒç”¨ï¼Œä¸ç ´åAgentçŠ¶æ€</li>
<li><strong>äººæœºååŒ</strong>ï¼šé€šè¿‡Hookç³»ç»Ÿåœ¨ä»»ä½•æ¨ç†æ­¥éª¤æ³¨å…¥ä¿®æ­£ã€é¢å¤–ä¸Šä¸‹æ–‡æˆ–æŒ‡å¯¼</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[&amp;#34;è‡ªä¸»å†³ç­–å¾ªç¯&amp;#34;] --&gt;|å‘ç°é—®é¢˜| B[&amp;#34;æš‚åœ&amp;#34;]
    B --&gt;|äººå·¥å®¡æ ¸| C[&amp;#34;ä¿®æ­£/å–æ¶ˆ&amp;#34;]
    C --&gt;|æ¢å¤ä¸Šä¸‹æ–‡| D[&amp;#34;ç»§ç»­æ‰§è¡Œ&amp;#34;]
</code></pre>
<h4 data-id="heading-11">é—®é¢˜2ï¼šå¤šæ­¥éª¤å¤æ‚ä»»åŠ¡çš„ç»“æ„åŒ–ç®¡ç†</h4>
<p><strong>åœºæ™¯</strong>ï¼šç”¨æˆ·è¯·æ±‚Agentå®Œæˆä¸€ä¸ªæ¶‰åŠ10ä¸ªæ­¥éª¤çš„å¤æ‚å·¥ä½œæµï¼ˆå¦‚æ•°æ®åˆ†æ â†’ ç”ŸæˆæŠ¥å‘Š â†’ å‘é€é‚®ä»¶ï¼‰ã€‚å½“ä¸­é—´æŸä¸€æ­¥å¤±è´¥æ—¶ï¼Œä½ å¾ˆéš¾è¿½è¸ªå½“å‰è¿›åº¦ã€ä¿®æ”¹è®¡åˆ’æˆ–æ¢å¤æ‰§è¡Œã€‚</p>
<p><strong>AgentScopeè§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong>PlanNotebook</strong>ï¼šç»“æ„åŒ–ä»»åŠ¡ç®¡ç†ï¼Œè‡ªåŠ¨è·Ÿè¸ªå¤šæ­¥éª¤å·¥ä½œæµ</li>
<li>æ”¯æŒåŠ¨æ€ä¿®æ”¹ã€æš‚åœã€æ¢å¤ã€å¹¶å‘æ‰§è¡Œå¤šä¸ªè®¡åˆ’</li>
<li>ä¸Agentæ¨ç†é›†æˆï¼Œæ™ºèƒ½ä½“å¯ä»¥ä¸»åŠ¨åˆ›å»ºå’Œä¿®æ”¹è‡ªå·±çš„è®¡åˆ’</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    Plan[&amp;#34;è®¡åˆ’ï¼ˆPlanï¼‰&amp;#34;]
    Plan --&gt; SubTask1[&amp;#34;å­ä»»åŠ¡1ï¼šå‡†å¤‡æ•°æ®&amp;#34;]
    Plan --&gt; SubTask2[&amp;#34;å­ä»»åŠ¡2ï¼šç”Ÿæˆå›¾è¡¨&amp;#34;]
    Plan --&gt; SubTask3[&amp;#34;å­ä»»åŠ¡3ï¼šæ’°å†™æ€»ç»“&amp;#34;]
    
    SubTask1 --&gt; Status1[&amp;#34;çŠ¶æ€ï¼šå¾…æ‰§è¡Œ/è¿›è¡Œä¸­/å®Œæˆ/æ”¾å¼ƒ&amp;#34;]
    SubTask2 --&gt; Status2[&amp;#34;çŠ¶æ€ï¼šå¾…æ‰§è¡Œ/è¿›è¡Œä¸­/å®Œæˆ/æ”¾å¼ƒ&amp;#34;]
    SubTask3 --&gt; Status3[&amp;#34;çŠ¶æ€ï¼šå¾…æ‰§è¡Œ/è¿›è¡Œä¸­/å®Œæˆ/æ”¾å¼ƒ&amp;#34;]
</code></pre>
<h4 data-id="heading-12">é—®é¢˜3ï¼šLLMè¾“å‡ºçš„ä¸å¯é æ€§</h4>
<p><strong>åœºæ™¯</strong>ï¼šä½ è¦æ±‚Agentè°ƒç”¨ä¸€ä¸ªAPIå¹¶è¿”å›JSONæ ¼å¼çš„æ•°æ®ï¼Œä½†LLMå¯èƒ½ä¼šï¼š</p>
<ul>
<li>è¿”å›æ ¼å¼é”™è¯¯çš„JSON</li>
<li>é—æ¼æŸäº›å¿…éœ€å­—æ®µ</li>
<li>åœ¨å­—æ®µä¸­åŒ…å«ä¸ç¬¦åˆç±»å‹çš„å€¼</li>
</ul>
<p>ä½ éœ€è¦ä¸€ä¸ª<strong>è‡ªçº é”™</strong>çš„è§£å†³æ–¹æ¡ˆï¼Œè€Œä¸æ˜¯ç¼–å†™å¤æ‚çš„éªŒè¯å’Œé‡è¯•é€»è¾‘ã€‚</p>
<p><strong>AgentScopeè§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong>ç»“æ„åŒ–è¾“å‡º</strong>ï¼šè‡ªåŠ¨éªŒè¯LLMè¾“å‡ºï¼Œå¦‚æœä¸ç¬¦åˆé¢„æœŸæ ¼å¼ï¼Œè‡ªåŠ¨é‡è¯•å¹¶æŒ‡å¯¼LLMç”Ÿæˆæ­£ç¡®è¾“å‡º</li>
<li>ç›´æ¥æ˜ å°„åˆ°Java POJOï¼Œå®ç°<strong>ç±»å‹å®‰å…¨</strong></li>
<li>å‡å°‘äººå·¥è§£æå’ŒéªŒè¯çš„ä»£ç é‡</li>
</ul>
<h4 data-id="heading-13">é—®é¢˜4ï¼šçŸ¥è¯†åº“ä¸LLMçš„é›†æˆ</h4>
<p><strong>åœºæ™¯</strong>ï¼šä½ çš„AIåŠ©æ‰‹éœ€è¦åŸºäºä¼ä¸šå†…éƒ¨çš„çŸ¥è¯†åº“ï¼ˆå¦‚FAQã€æ–‡æ¡£ã€åŸ¹è®­èµ„æ–™ï¼‰å›ç­”é—®é¢˜ï¼Œä½†ç®€å•åœ°å°†æ‰€æœ‰æ–‡æ¡£æ”¾å…¥Promptä¼šå¯¼è‡´Tokenæº¢å‡ºå’Œå›ç­”ä¸ç²¾å‡†ã€‚</p>
<p><strong>AgentScopeè§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong>RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰</strong>ï¼šæ™ºèƒ½æ£€ç´¢ç›¸å…³æ–‡æ¡£ï¼Œä½œä¸ºå›ç­”ä¾æ®</li>
<li>æ”¯æŒå¤šçŸ¥è¯†åº“é›†æˆï¼ˆè‡ªå»ºã€é˜¿é‡Œäº‘ç™¾ç‚¼ã€Difyç­‰ï¼‰</li>
<li>é€šè¿‡Hookæˆ–Toolå½¢å¼é›†æˆï¼Œé€æ˜åœ°å¢å¼ºAgentèƒ½åŠ›</li>
</ul>
<h4 data-id="heading-14">é—®é¢˜5ï¼šå·¥å…·ç”Ÿæ€ç¢ç‰‡åŒ–</h4>
<p><strong>åœºæ™¯</strong>ï¼šä½ çš„Agentéœ€è¦é›†æˆå¤šä¸ªå¤–éƒ¨æœåŠ¡ï¼ˆOpenAI APIã€ä¼ä¸šå†…éƒ¨æœåŠ¡ã€MCPç”Ÿæ€çš„å·¥å…·ï¼‰ã€‚æ¯æ¬¡æ–°å¢å·¥å…·æ—¶ï¼Œéƒ½éœ€è¦é‡æ–°ç¼–å†™é›†æˆä»£ç ã€‚</p>
<p><strong>AgentScopeè§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong>MCPåè®®é›†æˆ</strong>ï¼šè¿æ¥åˆ°MCPç”Ÿæ€çš„ä»»ä½•å·¥å…·å’ŒæœåŠ¡</li>
<li><strong>A2Aåè®®</strong>ï¼šåˆ†å¸ƒå¼å¤šAgentåä½œï¼Œé€šè¿‡æœåŠ¡æ³¨å†Œä¸­å¿ƒè‡ªåŠ¨å‘ç°å’Œè°ƒç”¨</li>
<li><strong>ç»Ÿä¸€çš„å·¥å…·ç³»ç»Ÿ</strong>ï¼šæ— è®ºæ˜¯æœ¬åœ°@Toolè¿˜æ˜¯MCPå·¥å…·ï¼Œéƒ½é€šè¿‡ç»Ÿä¸€æ¥å£è°ƒç”¨</li>
</ul>
<h3 data-id="heading-15">1.1.2 æ ¸å¿ƒè®¾è®¡ç†å¿µ</h3>
<h4 data-id="heading-16">ç†å¿µ1ï¼šå“åº”å¼éé˜»å¡æ¶æ„</h4>
<p>AgentScope-JavaåŸºäº<strong>Project Reactor</strong>æ„å»ºï¼Œæ‰€æœ‰æ“ä½œéƒ½æ˜¯éé˜»å¡çš„ï¼š</p>
<pre><code class="hljs">ä¸šåŠ¡æ„ä¹‰ï¼š
â”œâ”€ é«˜ååé‡ï¼šä¸€ä¸ªçº¿ç¨‹å¯ä»¥å¤„ç†æ•°åƒä¸ªå¹¶å‘Agent
â”œâ”€ ä½å»¶è¿Ÿï¼šå……åˆ†åˆ©ç”¨CPUï¼Œé¿å…çº¿ç¨‹é˜»å¡æµªè´¹
â”œâ”€ è‰¯å¥½æ‰©å±•æ€§ï¼šæ”¯æŒServerlessã€å®¹å™¨ç¼–æ’ç­‰äº‘åŸç”Ÿéƒ¨ç½²
â””â”€ å¯è§‚æµ‹æ€§æ›´å¥½ï¼šå¼‚æ­¥æ“ä½œæ›´å®¹æ˜“è¿½è¸ªå’Œç›‘æ§
</code></pre>
<p>ä»£ç ä½“ç°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ‰€æœ‰æ“ä½œè¿”å› Mono&lt;T&gt; æˆ– Flux&lt;T&gt;</span>
Mono&lt;Msg&gt; response = agent.call(userMessage);
response.subscribe(msg -&gt; System.out.println(msg.getTextContent()));

<span class="hljs-comment">// æ”¯æŒé“¾å¼å¼‚æ­¥æ“ä½œ</span>
agent.call(msg1)
    .flatMap(response -&gt; agent.call(response))
    .subscribe();
</code></pre>
<h4 data-id="heading-17">ç†å¿µ2ï¼šæ¶ˆæ¯é©±åŠ¨é€šä¿¡</h4>
<p>Agentä¹‹é—´é€šè¿‡**ä¸å¯å˜çš„Messageå¯¹è±¡ï¼ˆMsgï¼‰**é€šä¿¡ï¼Œè€Œä¸æ˜¯ç›´æ¥è°ƒç”¨ï¼š</p>
<pre><code class="hljs">ä¼˜åŠ¿ï¼š
â”œâ”€ è§£è€¦ï¼šAgentä¸éœ€è¦çŸ¥é“å…¶ä»–Agentçš„å†…éƒ¨å®ç°
â”œâ”€ å¯è¿½è¸ªï¼šæ‰€æœ‰é€šä¿¡éƒ½è®°å½•ä¸ºæ¶ˆæ¯ï¼Œä¾¿äºè°ƒè¯•å’Œå®¡è®¡
â”œâ”€ æ”¯æŒå­˜å‚¨ï¼šæ¶ˆæ¯å¯ä»¥è¢«æŒä¹…åŒ–ã€é‡æ”¾ã€åˆ†æ
â””â”€ æ”¯æŒæ‰©å±•ï¼šæ¶ˆæ¯å¯ä»¥åŒ…å«å¤šç§å†…å®¹ç±»å‹ï¼ˆæ–‡æœ¬ã€å›¾ç‰‡ã€éŸ³é¢‘ã€å·¥å…·è°ƒç”¨ç­‰ï¼‰
</code></pre>
<h4 data-id="heading-18">ç†å¿µ3ï¼šå¯ç»„åˆä¸å¯æ‰©å±•</h4>
<ul>
<li><strong>Agentå¯ç»„åˆ</strong>ï¼šå¯ä»¥åœ¨Pipelineä¸­ç»„ç»‡å¤šä¸ªAgentï¼Œå®ç°å¤æ‚çš„åä½œæ¨¡å¼</li>
<li><strong>å·¥å…·å¯æ‰©å±•</strong>ï¼šé€šè¿‡@Toolæ³¨è§£è½»æ¾æ·»åŠ æ–°å·¥å…·ï¼Œæˆ–é›†æˆMCP/A2Aå·¥å…·</li>
<li><strong>Hookå¯æ’æ‹”</strong>ï¼šåœ¨Agentæ‰§è¡Œçš„ä»»ä½•é˜¶æ®µæ’å…¥è‡ªå®šä¹‰é€»è¾‘ï¼Œè€Œä¸ä¿®æ”¹æ ¸å¿ƒä»£ç </li>
</ul>
<hr/>
<h2 data-id="heading-19">1.2 æ ¸å¿ƒç‰¹æ€§ä»‹ç»</h2>
<h3 data-id="heading-20">1.2.1 ReAct æ¨ç†-è¡ŒåŠ¨å¾ªç¯</h3>
<p><strong>ReActï¼ˆReasoning + Actingï¼‰</strong> æ˜¯AgentScopeçš„æ ¸å¿ƒï¼Œå®ƒè®©Agentèƒ½å¤Ÿ<strong>è‡ªä¸»è§„åˆ’å’Œæ‰§è¡Œ</strong>ä»»åŠ¡ã€‚</p>
<h4 data-id="heading-21">ä»€ä¹ˆæ˜¯ReActï¼Ÿ</h4>
<pre><code class="hljs language-ini" lang="ini">ç¬¬1è½®ï¼š
ç”¨æˆ·: "å¸®æˆ‘åˆ†æè¿‡å»12ä¸ªæœˆçš„é”€å”®æ•°æ®"
â†“
<span class="hljs-section">[æ¨ç†é˜¶æ®µ]</span> Agentæ€è€ƒ: "æˆ‘éœ€è¦æŸ¥è¯¢é”€å”®æ•°æ®åº“ï¼Œç„¶ååˆ†ææ•°æ®ï¼Œæœ€åç”ŸæˆæŠ¥å‘Š"
â†“
<span class="hljs-section">[è¡ŒåŠ¨é˜¶æ®µ]</span> Agentæ‰§è¡Œ: è°ƒç”¨ query_sales_data å·¥å…·ï¼Œè·å¾—æ•°æ®
â†“
<span class="hljs-section">[ç»“æœ]</span> è·å¾—JSONæ ¼å¼çš„é”€å”®æ•°æ®

ç¬¬2è½®ï¼š
<span class="hljs-section">[æ¨ç†é˜¶æ®µ]</span> Agentæ€è€ƒ: "ç°åœ¨æˆ‘æœ‰æ•°æ®äº†ï¼Œæˆ‘éœ€è¦è®¡ç®—å¢é•¿ç‡ã€è¶‹åŠ¿ç­‰"
â†“
<span class="hljs-section">[è¡ŒåŠ¨é˜¶æ®µ]</span> Agentæ‰§è¡Œ: è°ƒç”¨ analyze_data å·¥å…·
â†“
<span class="hljs-section">[ç»“æœ]</span> è·å¾—åˆ†æç»“æœ

ç¬¬3è½®ï¼š
<span class="hljs-section">[æ¨ç†é˜¶æ®µ]</span> Agentæ€è€ƒ: "åˆ†æå®Œæˆäº†ï¼Œç°åœ¨ç”ŸæˆæŠ¥å‘Š"
â†“
<span class="hljs-section">[è¡ŒåŠ¨é˜¶æ®µ]</span> Agentæ‰§è¡Œ: è°ƒç”¨ generate_report å·¥å…·
â†“
<span class="hljs-section">[ç»“æœ]</span> æœ€ç»ˆæŠ¥å‘Šç”Ÿæˆå®Œæˆ
</code></pre>
<h4 data-id="heading-22">ä¸ºä»€ä¹ˆReActæ¯”Prompt Chainingæ›´ä¼˜ï¼Ÿ</h4>






























<table><thead><tr><th>æ–¹é¢</th><th>Prompt Chaining</th><th>ReAct</th></tr></thead><tbody><tr><td>çµæ´»æ€§</td><td>å›ºå®šçš„æ­¥éª¤</td><td>åŠ¨æ€å†³å®šä¸‹ä¸€æ­¥</td></tr><tr><td>é€‚åº”æ€§</td><td>æ— æ³•å¤„ç†å‡ºé”™æƒ…å†µ</td><td>å¯ä»¥é‡è¯•æˆ–æ”¹å˜ç­–ç•¥</td></tr><tr><td>å·¥å…·åˆ©ç”¨</td><td>é¢„å®šä¹‰çš„å·¥å…·åºåˆ—</td><td>åŠ¨æ€é€‰æ‹©æœ€åˆé€‚çš„å·¥å…·</td></tr><tr><td>å¯æ§æ€§</td><td>å¾ˆéš¾å¹²é¢„</td><td>æ”¯æŒåœ¨ä»»æ„æ­¥éª¤æš‚åœå’Œä¿®æ­£</td></tr></tbody></table>
<h4 data-id="heading-23">ç”Ÿäº§åœºæ™¯ç¤ºä¾‹ï¼šå®¢æœå·¥å•å¤„ç†</h4>
<pre><code class="hljs language-bash" lang="bash">ç”¨æˆ·é—®é¢˜: <span class="hljs-string">"æˆ‘çš„è®¢å• #12345 å·²ç»5å¤©è¿˜æ²¡æ”¶åˆ°ï¼Œæˆ‘éœ€è¦é€€æ¬¾"</span>
â†“
Agentæ¨ç†ï¼š
<span class="hljs-string">"æˆ‘éœ€è¦ï¼š
1. æŸ¥è¯¢è®¢å•çŠ¶æ€ï¼ˆè°ƒç”¨order_statuså·¥å…·ï¼‰
2. æ ¹æ®çŠ¶æ€å†³å®šæ˜¯å¦éœ€è¦æŸ¥è¯¢ç‰©æµä¿¡æ¯æˆ–ç›´æ¥å¤„ç†é€€æ¬¾
3. ç”Ÿæˆè§£å†³æ–¹æ¡ˆ"</span>
â†“
[å·¥å…·è°ƒç”¨] æŸ¥è¯¢è®¢å• <span class="hljs-comment">#12345</span>
ç»“æœï¼šè®¢å•çŠ¶æ€ä¸º<span class="hljs-string">"å·²å‘è´§ï¼Œé¢„è®¡3-5å¤©é€è¾¾"</span>ï¼Œä»Šå¤©æ˜¯ç¬¬5å¤©ï¼Œå·²è¶…æœŸ
â†“
Agentæ¨ç†ï¼š
<span class="hljs-string">"è®¢å•å·²è¶…æœŸï¼Œæˆ‘éœ€è¦ï¼š
1. æŸ¥è¯¢ç‰©æµä¿¡æ¯ï¼Œç¡®è®¤æ˜¯å¦ä¸¢å¤±
2. æ ¹æ®ç»“æœå†³å®šæ˜¯è¡¥é‚®è¿˜æ˜¯é€€æ¬¾"</span>
â†“
[å·¥å…·è°ƒç”¨] æŸ¥è¯¢ç‰©æµä¿¡æ¯
ç»“æœï¼šç‰©æµæ˜¾ç¤ºåŒ…è£¹åœ¨è¿è¾“ä¸­ï¼Œä½†å»¶è¿Ÿäº†
â†“
Agentæ¨ç†ï¼š
<span class="hljs-string">"ç‰©æµå»¶è¿Ÿï¼Œæˆ‘åº”è¯¥ä¸ºå®¢æˆ·è‡ªåŠ¨èµ”å¿100ç§¯åˆ†ï¼Œå¹¶æ‰¿è¯ºåŠ æ€¥é…é€ã€‚
å¦‚æœå®¢æˆ·åšæŒé€€æ¬¾ï¼Œè§¦å‘äººå·¥å®¡æ‰¹"</span>
â†“
[å·¥å…·è°ƒç”¨] ç»™å®¢æˆ·åŠ 100ç§¯åˆ† + åŠ æ€¥é…é€å¤„ç†
â†“
è¿”å›ç»™ç”¨æˆ·ï¼šè‡ªåŠ¨æ–¹æ¡ˆ + äººå·¥å®¡æ‰¹é“¾æ¥
</code></pre>
<h3 data-id="heading-24">1.2.2 å·¥å…·è°ƒç”¨ç³»ç»Ÿ</h3>
<p>å·¥å…·æ˜¯Agentæ‰§è¡Œå®é™…æ“ä½œçš„æ‰‹æ®µã€‚AgentScopeæä¾›äº†<strong>ç®€æ´è€Œå¼ºå¤§</strong>çš„å·¥å…·ç³»ç»Ÿã€‚</p>
<h4 data-id="heading-25">å¿«é€Ÿå®šä¹‰å·¥å…·</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç¬¬1æ­¥ï¼šåˆ›å»ºä¸€ä¸ªç±»ï¼Œæ·»åŠ @Toolæ³¨è§£çš„æ–¹æ³•</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeatherTools</span> {
    
    <span class="hljs-meta">@Tool(name = "get_weather", 
          description = "Get current weather for a city")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getWeather</span><span class="hljs-params">(
        <span class="hljs-meta">@ToolParam(name = "city", description = "City name")</span> String city,
        <span class="hljs-meta">@ToolParam(name = "unit", description = "Temperature unit, celsius or fahrenheit")</span> 
            String unit)</span> {
        <span class="hljs-comment">// å®é™…çš„è·å–å¤©æ°”çš„é€»è¾‘</span>
        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"Weather in %s: 25Â°%s, Sunny"</span>, city, unit);
    }
    
    <span class="hljs-meta">@Tool(name = "get_forecast", 
          description = "Get 7-day forecast for a city")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getForecast</span><span class="hljs-params">(
        <span class="hljs-meta">@ToolParam(name = "city", description = "City name")</span> String city)</span> {
        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"7-day forecast for %s: ..."</span>, city);
    }
}

<span class="hljs-comment">// ç¬¬2æ­¥ï¼šæ³¨å†Œåˆ°å·¥å…·ç®±</span>
<span class="hljs-type">Toolkit</span> <span class="hljs-variable">toolkit</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Toolkit</span>();
toolkit.registerObject(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WeatherTools</span>());

<span class="hljs-comment">// ç¬¬3æ­¥ï¼šä¼ ç»™Agentï¼Œå°±å¯ä»¥è‡ªåŠ¨ä½¿ç”¨</span>
<span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
    .toolkit(toolkit)
    .build();
</code></pre>
<h4 data-id="heading-26">å·¥å…·ç³»ç»Ÿå¦‚ä½•å·¥ä½œï¼Ÿ</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[&amp;#34;Agent&amp;#34;]
    B[&amp;#34;æ¨ç†ï¼šæˆ‘éœ€è¦æŸ¥è¯¢å¤©æ°”&amp;#34;]
    C[&amp;#34;Modelè¿”å›ï¼šè°ƒç”¨ get_weather å·¥å…·ï¼Œå‚æ•°ï¼šcity=beijing, unit=celsius&amp;#34;]
    D[&amp;#34;å·¥å…·ç³»ç»Ÿ&amp;#34;]
    E[&amp;#34;ToolRegistryï¼šæŸ¥æ‰¾ get_weather çš„å®šä¹‰&amp;#34;]
    F[&amp;#34;ToolExecutorï¼šåå°„è°ƒç”¨ WeatherTools.getWeatheræ–¹æ³•&amp;#34;]
    G[&amp;#34;WeatherTools.getWeather æ‰§è¡Œ&amp;#34;]
    H[&amp;#34;è¿”å›ç»“æœç»™Agent&amp;#34;]
    
    A --&gt; B
    B --&gt; C
    C --&gt; D
    D --&gt; E
    E --&gt; F
    F --&gt; G
    G --&gt; H
</code></pre>
<h4 data-id="heading-27">ç”Ÿäº§åœºæ™¯ï¼šé”€å”®è®¢å•ç³»ç»Ÿ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderTools</span> {
    
    <span class="hljs-meta">@Tool(name = "create_order", description = "Create a new sales order")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">createOrder</span><span class="hljs-params">(
        <span class="hljs-meta">@ToolParam(name = "customer_id")</span> String customerId,
        <span class="hljs-meta">@ToolParam(name = "items")</span> String itemsJson,  // JSONæ ¼å¼: [{sku, qty, price}]
        <span class="hljs-meta">@ToolParam(name = "discount_percent", description = "Discount 0-100")</span> <span class="hljs-type">int</span> discount)</span> {
        
        <span class="hljs-comment">// ç”Ÿäº§ç¯èŠ‚ï¼š</span>
        <span class="hljs-comment">// 1. éªŒè¯è¾“å…¥</span>
        <span class="hljs-keyword">if</span> (discount &lt; <span class="hljs-number">0</span> || discount &gt; <span class="hljs-number">100</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"Discount must be 0-100"</span>);
        }
        
        <span class="hljs-comment">// 2. è°ƒç”¨è®¢å•ç³»ç»ŸAPI</span>
        <span class="hljs-type">OrderRequest</span> <span class="hljs-variable">req</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderRequest</span>(customerId, itemsJson, discount);
        <span class="hljs-type">OrderResponse</span> <span class="hljs-variable">resp</span> <span class="hljs-operator">=</span> orderService.createOrder(req);
        
        <span class="hljs-comment">// 3. è¿”å›ç»“æ„åŒ–ç»“æœï¼ˆæ–¹ä¾¿Agentç†è§£ï¼‰</span>
        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"Order created: ID=%s, Total=%.2f, Status=%s"</span>,
            resp.getOrderId(), resp.getTotalPrice(), resp.getStatus());
    }
    
    <span class="hljs-meta">@Tool(name = "query_order", description = "Query order status and details")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">queryOrder</span><span class="hljs-params">(
        <span class="hljs-meta">@ToolParam(name = "order_id")</span> String orderId)</span> {
        <span class="hljs-type">OrderDetails</span> <span class="hljs-variable">details</span> <span class="hljs-operator">=</span> orderService.getOrder(orderId);
        <span class="hljs-keyword">return</span> ObjectMappers.toJson(details);
    }
    
    <span class="hljs-meta">@Tool(name = "apply_promotion", description = "Apply a promotion code to an order")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">applyPromotion</span><span class="hljs-params">(
        <span class="hljs-meta">@ToolParam(name = "order_id")</span> String orderId,
        <span class="hljs-meta">@ToolParam(name = "promo_code")</span> String promoCode)</span> {
        
        <span class="hljs-comment">// éªŒè¯promo_codeçš„æœ‰æ•ˆæ€§</span>
        <span class="hljs-type">Promotion</span> <span class="hljs-variable">promo</span> <span class="hljs-operator">=</span> promotionService.validatePromo(promoCode);
        <span class="hljs-keyword">if</span> (promo == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"Promotion code invalid or expired"</span>;
        }
        
        <span class="hljs-comment">// åº”ç”¨æŠ˜æ‰£</span>
        <span class="hljs-type">ApplyResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> orderService.applyPromotion(orderId, promo);
        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"Promotion applied: new_total=%.2f, discount=%.2f"</span>,
            result.getNewTotal(), result.getDiscount());
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹ï¼š</span>
<span class="hljs-type">Toolkit</span> <span class="hljs-variable">toolkit</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Toolkit</span>();
toolkit.registerObject(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderTools</span>());

<span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
    .name(<span class="hljs-string">"Sales Assistant"</span>)
    .sysPrompt(<span class="hljs-string">"You are a helpful sales assistant. Help customers create orders and apply promotions. "</span> +
               <span class="hljs-string">"Never apply discount &gt; 20% unless customer has valid promotion code."</span>)
    .model(model)
    .toolkit(toolkit)
    .build();

<span class="hljs-comment">// Agentä¼šè‡ªåŠ¨è°ƒç”¨è¿™äº›å·¥å…·</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> agent.call(
    Msg.builder().textContent(
        <span class="hljs-string">"Customer: Zhang Wei wants to buy 2 units of SKU-001 at Â¥100 each. "</span> +
        <span class="hljs-string">"Create an order and apply promo code WELCOME10"</span>)
    .build()
).block();
</code></pre>
<h3 data-id="heading-28">1.2.3 è®°å¿†ç³»ç»Ÿ</h3>
<p>Agentéœ€è¦<strong>è®°ä½å¯¹è¯å†å²å’Œå…³é”®ä¿¡æ¯</strong>ï¼Œæ‰èƒ½åœ¨å¤šè½®äº¤äº’ä¸­ä¿æŒä¸Šä¸‹æ–‡ã€‚</p>
<h4 data-id="heading-29">ä¸‰å±‚è®°å¿†æ¶æ„</h4>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  çŸ­æœŸè®°å¿† (Short-term Memory)            â”‚
â”‚  - å½“å‰ä¼šè¯çš„æ‰€æœ‰æ¶ˆæ¯                     â”‚
â”‚  - æœ€è¿‘Nè½®å¯¹è¯                           â”‚
â”‚  - ç”¨é€”ï¼šå³æ—¶ä¸Šä¸‹æ–‡                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“ å½“æ¶ˆæ¯å †ç§¯æ—¶è‡ªåŠ¨å‹ç¼©
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä¸­æœŸè®°å¿† (Medium-term Memory)           â”‚
â”‚  - é‡è¦å¯¹è¯çš„æ‘˜è¦                        â”‚
â”‚  - å…³é”®å†³ç­–å’Œç»“æœ                        â”‚
â”‚  - ç”¨é€”ï¼šè·¨è¶Šè¾ƒé•¿æ—¶é—´ä¿ç•™é‡è¦ä¿¡æ¯         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é•¿æœŸè®°å¿† (Long-term Memory)             â”‚
â”‚  - è·¨ä¼šè¯çš„æŒä¹…åŒ–å­˜å‚¨                     â”‚
â”‚  - æ”¯æŒè¯­ä¹‰æœç´¢ï¼ˆå‘é‡åŒ–ï¼‰                â”‚
â”‚  - ç”¨é€”ï¼šå­¦ä¹ è¿‡å»çš„ç»éªŒï¼Œåšå‡ºæ›´å¥½çš„å†³ç­–   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-30">ç”Ÿäº§åœºæ™¯ï¼šå®¢æˆ·å…³ç³»ç®¡ç†</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åœºæ™¯ï¼šä¸€ä¸ªAIå®¢æœéœ€è¦è®°ä½å¸¸è§å®¢æˆ·ä¿¡æ¯</span>

<span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
    .name(<span class="hljs-string">"Customer Service Agent"</span>)
    .model(model)
    .toolkit(toolkit)
    <span class="hljs-comment">// é…ç½®é•¿æœŸè®°å¿†ï¼šå®¢æˆ·ä¼šè‡ªåŠ¨è®°ä½é‡è¦ä¿¡æ¯</span>
    .withLongTermMemory(
        longTermMemory,
        LongTermMemoryMode.HYBRID  <span class="hljs-comment">// è‡ªåŠ¨+ä¸»åŠ¨è®°å½•æ··åˆæ¨¡å¼</span>
    )
    .build();

<span class="hljs-comment">// ç¬¬1æ¬¡å¯¹è¯ï¼ˆUser: Aliceï¼‰</span>
agent.call(
    Msg.builder().textContent(
        <span class="hljs-string">"Hello! I'm Alice from TechCorp. I've been a customer for 3 years. "</span> +
        <span class="hljs-string">"We usually buy 100 units of Product X every month. "</span> +
        <span class="hljs-string">"This month we need to increase to 200 units."</span>)
    .build()
).block();
<span class="hljs-comment">// Agentè‡ªåŠ¨è®°ä½ï¼šAlice / TechCorp / 3å¹´è€å®¢æˆ· / æ­£å¸¸è®¢è´­é‡100 / æœ¬æœˆ200</span>

<span class="hljs-comment">// ä¸€å‘¨åï¼ŒAliceå†æ¬¡è”ç³»</span>
agent.call(
    Msg.builder().textContent(<span class="hljs-string">"Hi! It's Alice again. Can you remind me what we discussed last week?"</span>)
    .build()
).block();

<span class="hljs-comment">// Agentçš„é•¿æœŸè®°å¿†è®©å®ƒèƒ½å¤Ÿï¼š</span>
<span class="hljs-comment">// âœ“ ç«‹å³è®¤å‡ºAliceæ˜¯è€å®¢æˆ·</span>
<span class="hljs-comment">// âœ“ å›å¿†ä¸Šå‘¨çš„å¢é‡è®¢å•éœ€æ±‚</span>
<span class="hljs-comment">// âœ“ åšå‡ºä¸ªæ€§åŒ–çš„æœåŠ¡å»ºè®®ï¼ˆå¦‚ï¼šç”±äºä½ å¢é‡è®¢è´­ï¼Œè¿™ä¸ªæœˆå¯ä»¥äº«å—é¢å¤–2%æŠ˜æ‰£ï¼‰</span>
</code></pre>
<h3 data-id="heading-31">1.2.4 å¤šæ™ºèƒ½ä½“åä½œ</h3>
<p>å•ä¸ªAgentçš„èƒ½åŠ›æœ‰é™ï¼ŒAgentScopeæ”¯æŒ<strong>å¤šä¸ªAgentåœ¨Pipelineä¸­åä½œ</strong>ã€‚</p>
<h4 data-id="heading-32">Pipelineæ¨¡å¼</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">åœºæ™¯ï¼šå†…å®¹åˆ›ä½œå·¥ä½œæµ</span>

<span class="hljs-string">ç”¨æˆ·è¾“å…¥:</span> <span class="hljs-string">"å†™ä¸€ç¯‡å…³äºAIæŠ€æœ¯è¶‹åŠ¿çš„æ–‡ç« "</span>
       <span class="hljs-string">â†“</span>
<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span> <span class="hljs-attr">Agent 1:</span> <span class="hljs-string">ç ”ç©¶å‘˜</span> <span class="hljs-string">Agent</span>           <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-string">èŒè´£ï¼šæœç´¢å’Œæ•´ç†ç›¸å…³èµ„æ–™</span>          <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
               <span class="hljs-string">â†“</span>
<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span> <span class="hljs-attr">Agent 2:</span> <span class="hljs-string">å†™ä½œ</span> <span class="hljs-string">Agent</span>             <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-string">èŒè´£ï¼šåŸºäºç ”ç©¶å‘˜çš„èµ„æ–™è¿›è¡Œåˆ›ä½œ</span>     <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
               <span class="hljs-string">â†“</span>
<span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span> <span class="hljs-attr">Agent 3:</span> <span class="hljs-string">å®¡æ ¸</span> <span class="hljs-string">Agent</span>             <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-string">èŒè´£ï¼šæ£€æŸ¥æ–‡ç« çš„æ­£ç¡®æ€§å’Œé£æ ¼</span>      <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
               <span class="hljs-string">â†“</span>
           <span class="hljs-string">æœ€ç»ˆæ–‡ç« è¾“å‡º</span>
</code></pre>
<h4 data-id="heading-33">å¹¶è¡Œå·¥ä½œæµ</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">ç”¨æˆ·è¾“å…¥:</span> <span class="hljs-string">"ä¸ºæˆ‘ç”Ÿæˆä¸€ä»½ç»¼åˆæ€§çš„å¹´åº¦æŠ¥å‘Š"</span>
       <span class="hljs-string">â†“</span>
       <span class="hljs-string">â”œâ”€â†’</span> <span class="hljs-attr">Agent A:</span> <span class="hljs-string">è´¢åŠ¡åˆ†æ</span>      <span class="hljs-string">â”€â”</span>
       <span class="hljs-string">â”‚</span>                           <span class="hljs-string">â”‚</span>
       <span class="hljs-string">â”œâ”€â†’</span> <span class="hljs-attr">Agent B:</span> <span class="hljs-string">å¸‚åœºåˆ†æ</span>      <span class="hljs-string">â”€â”¤â”€â†’</span> <span class="hljs-string">æ±‡æ€»</span> <span class="hljs-string">Agent</span> <span class="hljs-string">â†’</span> <span class="hljs-string">æœ€ç»ˆæŠ¥å‘Š</span>
       <span class="hljs-string">â”‚</span>                           <span class="hljs-string">â”‚</span>
       <span class="hljs-string">â””â”€â†’</span> <span class="hljs-attr">Agent C:</span> <span class="hljs-string">ç«äº‰å¯¹æ‰‹åˆ†æ</span>  <span class="hljs-string">â”€â”˜</span>
</code></pre>
<h4 data-id="heading-34">ç”Ÿäº§ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å®šä¹‰ä¸‰ä¸ªä¸“ä¸šçš„Agent</span>
<span class="hljs-type">ReActAgent</span> <span class="hljs-variable">researchAgent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
    .name(<span class="hljs-string">"Research"</span>)
    .sysPrompt(<span class="hljs-string">"You are a research expert. Search and gather relevant information."</span>)
    .model(model)
    .toolkit(researchToolkit)
    .build();

<span class="hljs-type">ReActAgent</span> <span class="hljs-variable">writerAgent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
    .name(<span class="hljs-string">"Writer"</span>)
    .sysPrompt(<span class="hljs-string">"You are a professional writer. Write high-quality content."</span>)
    .model(model)
    .toolkit(writerToolkit)
    .build();

<span class="hljs-type">ReActAgent</span> <span class="hljs-variable">reviewerAgent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
    .name(<span class="hljs-string">"Reviewer"</span>)
    .sysPrompt(<span class="hljs-string">"You are an editor. Review and improve content for clarity and style."</span>)
    .model(model)
    .toolkit(reviewerToolkit)
    .build();

<span class="hljs-comment">// åˆ›å»ºé¡ºåºPipelineï¼šç ”ç©¶ â†’ å†™ä½œ â†’ å®¡æ ¸</span>
SequentialPipeline&lt;Msg&gt; pipeline = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SequentialPipeline</span>&lt;&gt;(
    List.of(researchAgent, writerAgent, reviewerAgent),
    (response, nextAgent) -&gt; {
        <span class="hljs-comment">// å°†å‰ä¸€ä¸ªAgentçš„è¾“å‡ºè½¬ä¸ºä¸‹ä¸€ä¸ªAgentçš„è¾“å…¥</span>
        <span class="hljs-keyword">return</span> Msg.builder()
            .role(MsgRole.ASSISTANT)
            .content(TextBlock.builder()
                .text(<span class="hljs-string">"Based on the previous work:\n"</span> + response.getTextContent())
                .build())
            .build();
    }
);

<span class="hljs-comment">// æ‰§è¡Œ</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> pipeline.execute(
    Msg.builder().textContent(<span class="hljs-string">"Write an article about AI trends"</span>)
    .build()
).block();
</code></pre>
<hr/>
<h2 data-id="heading-35">1.3 å¿«é€Ÿå¼€å§‹ç¤ºä¾‹è§£æ</h2>
<h3 data-id="heading-36">1.3.1 æœ€å°åŒ–å¯å·¥ä½œç¤ºä¾‹</h3>
<p>è®©æˆ‘ä»¬ä»æœ€ç®€å•çš„ç¤ºä¾‹å¼€å§‹ï¼Œä¸€æ­¥æ­¥ç†è§£AgentScopeçš„å·¥ä½œæµï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example;

<span class="hljs-keyword">import</span> io.agentscope.core.ReActAgent;
<span class="hljs-keyword">import</span> io.agentscope.core.message.Msg;
<span class="hljs-keyword">import</span> io.agentscope.core.model.DashScopeChatModel;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloAgentExample</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// ç¬¬1æ­¥ï¼šåˆ›å»ºæ¨¡å‹ï¼ˆè¿æ¥åˆ°LLMï¼‰</span>
        <span class="hljs-type">DashScopeChatModel</span> <span class="hljs-variable">model</span> <span class="hljs-operator">=</span> DashScopeChatModel.builder()
            .apiKey(System.getenv(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>))  <span class="hljs-comment">// ä»ç¯å¢ƒå˜é‡è¯»å–API Key</span>
            .modelName(<span class="hljs-string">"qwen-plus"</span>)  <span class="hljs-comment">// ä½¿ç”¨é€šä¹‰åƒé—®Plusæ¨¡å‹</span>
            .build();
        
        <span class="hljs-comment">// ç¬¬2æ­¥ï¼šåˆ›å»ºAgent</span>
        <span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
            .name(<span class="hljs-string">"Assistant"</span>)
            .sysPrompt(<span class="hljs-string">"You are a helpful AI assistant."</span>)  <span class="hljs-comment">// ç³»ç»Ÿæç¤ºè¯</span>
            .model(model)
            .build();
        
        <span class="hljs-comment">// ç¬¬3æ­¥ï¼šè°ƒç”¨Agent</span>
        <span class="hljs-type">Msg</span> <span class="hljs-variable">userMessage</span> <span class="hljs-operator">=</span> Msg.builder()
            .textContent(<span class="hljs-string">"ä½ å¥½ï¼è¯·å‘Šè¯‰æˆ‘2024å¹´æœ‰å“ªäº›é‡è¦çš„ç§‘æŠ€äº‹ä»¶"</span>)
            .build();
        
        <span class="hljs-type">Msg</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> agent.call(userMessage).block();  <span class="hljs-comment">// .block() ç­‰å¾…å“åº”</span>
        
        <span class="hljs-comment">// ç¬¬4æ­¥ï¼šè·å–ç»“æœ</span>
        System.out.println(<span class="hljs-string">"Agent: "</span> + response.getTextContent());
    }
}
</code></pre>
<h4 data-id="heading-37">æ‰§è¡Œæµç¨‹è¯¦è§£</h4>
<pre><code class="hljs language-scss" lang="scss">ç¬¬<span class="hljs-number">1</span>æ­¥ï¼šåˆ›å»ºæ¨¡å‹ï¼ˆDashScopeChatModelï¼‰
  â”œâ”€ åˆå§‹åŒ–HTTPå®¢æˆ·ç«¯
  â”œâ”€ é…ç½®API Keyå’Œæ¨¡å‹åç§°
  â””â”€ å‡†å¤‡ä¸DashScope APIé€šä¿¡

ç¬¬<span class="hljs-number">2</span>æ­¥ï¼šåˆ›å»ºAgentï¼ˆReActAgentï¼‰
  â”œâ”€ åˆå§‹åŒ–ç³»ç»Ÿæç¤ºè¯
  â”œâ”€ è®¾ç½®å†…å­˜ä¸ºé»˜è®¤çš„InMemoryMemory
  â”œâ”€ æ³¨å†Œæ¨¡å‹å’Œé»˜è®¤å·¥å…·ç®±
  â””â”€ å‡†å¤‡å¥½å¤„ç†ç”¨æˆ·è¾“å…¥

ç¬¬<span class="hljs-number">3</span>æ­¥ï¼šåˆ›å»ºç”¨æˆ·æ¶ˆæ¯ï¼ˆMsgï¼‰
  â”œâ”€ è®¾ç½®æ¶ˆæ¯å†…å®¹ä¸ºçº¯æ–‡æœ¬
  â”œâ”€ é»˜è®¤è§’è‰²ä¸ºUSER
  â””â”€ è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€IDå’Œæ—¶é—´æˆ³

ç¬¬<span class="hljs-number">4</span>æ­¥ï¼šè°ƒç”¨Agent
  agent<span class="hljs-selector-class">.call</span>(userMessage) è¿”å› Mono&lt;Msg&gt;
  <span class="hljs-selector-class">.block</span>() é˜»å¡ç­‰å¾…å“åº”ï¼ˆç”Ÿäº§ç¯å¢ƒåº”ä½¿ç”¨å¼‚æ­¥å¤„ç†ï¼‰
  â””â”€ è¿”å›Agentçš„å®Œæ•´å“åº”

ç¬¬<span class="hljs-number">5</span>æ­¥ï¼šæå–å¹¶æ˜¾ç¤ºç»“æœ
  response<span class="hljs-selector-class">.getTextContent</span>() è·å–æ–‡æœ¬å†…å®¹
  â””â”€ è¾“å‡ºï¼šAgentç”Ÿæˆçš„å›ç­”
</code></pre>
<h3 data-id="heading-38">1.3.2 ä½¿ç”¨å·¥å…·çš„ç¤ºä¾‹</h3>
<p>ä¸Šä¸€ä¸ªç¤ºä¾‹ä¸­ï¼ŒAgentåªèƒ½é€šè¿‡å¯¹è¯å›ç­”ã€‚ç°åœ¨è®©æˆ‘ä»¬æ·»åŠ <strong>å·¥å…·èƒ½åŠ›</strong>ï¼Œè®©Agentèƒ½å¤Ÿæ‰§è¡Œå®é™…æ“ä½œï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example;

<span class="hljs-keyword">import</span> io.agentscope.core.ReActAgent;
<span class="hljs-keyword">import</span> io.agentscope.core.message.Msg;
<span class="hljs-keyword">import</span> io.agentscope.core.model.DashScopeChatModel;
<span class="hljs-keyword">import</span> io.agentscope.core.tool.Tool;
<span class="hljs-keyword">import</span> io.agentscope.core.tool.ToolParam;
<span class="hljs-keyword">import</span> io.agentscope.core.tool.Toolkit;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AgentWithToolsExample</span> {
    
    <span class="hljs-comment">// ç¬¬1æ­¥ï¼šå®šä¹‰å·¥å…·ç±»</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CalculatorTools</span> {
        
        <span class="hljs-meta">@Tool(name = "add", description = "Add two numbers")</span>
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">add</span><span class="hljs-params">(
            <span class="hljs-meta">@ToolParam(name = "a", description = "First number")</span> <span class="hljs-type">double</span> a,
            <span class="hljs-meta">@ToolParam(name = "b", description = "Second number")</span> <span class="hljs-type">double</span> b)</span> {
            <span class="hljs-keyword">return</span> String.valueOf(a + b);
        }
        
        <span class="hljs-meta">@Tool(name = "multiply", description = "Multiply two numbers")</span>
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">multiply</span><span class="hljs-params">(
            <span class="hljs-meta">@ToolParam(name = "a", description = "First number")</span> <span class="hljs-type">double</span> a,
            <span class="hljs-meta">@ToolParam(name = "b", description = "Second number")</span> <span class="hljs-type">double</span> b)</span> {
            <span class="hljs-keyword">return</span> String.valueOf(a * b);
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// ç¬¬2æ­¥ï¼šåˆ›å»ºæ¨¡å‹</span>
        <span class="hljs-type">DashScopeChatModel</span> <span class="hljs-variable">model</span> <span class="hljs-operator">=</span> DashScopeChatModel.builder()
            .apiKey(System.getenv(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>))
            .modelName(<span class="hljs-string">"qwen-plus"</span>)
            .build();
        
        <span class="hljs-comment">// ç¬¬3æ­¥ï¼šåˆ›å»ºå·¥å…·ç®±å¹¶æ³¨å†Œå·¥å…·</span>
        <span class="hljs-type">Toolkit</span> <span class="hljs-variable">toolkit</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Toolkit</span>();
        toolkit.registerObject(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CalculatorTools</span>());
        
        <span class="hljs-comment">// ç¬¬4æ­¥ï¼šåˆ›å»ºAgentå¹¶é…ç½®å·¥å…·ç®±</span>
        <span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
            .name(<span class="hljs-string">"MathAssistant"</span>)
            .sysPrompt(<span class="hljs-string">"You are a helpful math assistant. "</span> +
                      <span class="hljs-string">"Use the calculator tools to solve math problems."</span>)
            .model(model)
            .toolkit(toolkit)  <span class="hljs-comment">// ä¼ å…¥å·¥å…·ç®±</span>
            .build();
        
        <span class="hljs-comment">// ç¬¬5æ­¥ï¼šè°ƒç”¨Agent</span>
        <span class="hljs-type">Msg</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> agent.call(
            Msg.builder().textContent(<span class="hljs-string">"25ä¹˜ä»¥48ç­‰äºå¤šå°‘ï¼Ÿ"</span>)
            .build()
        ).block();
        
        System.out.println(<span class="hljs-string">"Result: "</span> + response.getTextContent());
    }
}
</code></pre>
<h4 data-id="heading-39">å¸¦å·¥å…·è°ƒç”¨çš„æ‰§è¡Œæµç¨‹</h4>
<pre><code class="hljs language-css" lang="css">ç”¨æˆ·: <span class="hljs-string">"25ä¹˜ä»¥48ç­‰äºå¤šå°‘ï¼Ÿ"</span>
  â†“
[æ¨ç†é˜¶æ®µ]
Agentæ”¶åˆ°é—®é¢˜ï¼Œæ€è€ƒï¼šéœ€è¦è°ƒç”¨ <span class="hljs-built_in">multiply</span>(<span class="hljs-number">25</span>, <span class="hljs-number">48</span>)
Modelè¿”å›ï¼š{"tool_call": <span class="hljs-string">"multiply"</span>, <span class="hljs-string">"args"</span>: {"<span class="hljs-selector-tag">a</span>": <span class="hljs-number">25</span>, <span class="hljs-string">"b"</span>: <span class="hljs-number">48</span>}}
  â†“
<span class="hljs-selector-attr">[è¡ŒåŠ¨é˜¶æ®µ]</span>
ToolExecutoræ‰¾åˆ° CalculatorTools<span class="hljs-selector-class">.multiply</span> æ–¹æ³•
åå°„è°ƒç”¨ï¼šmultiply(<span class="hljs-number">25.0</span>, <span class="hljs-number">48.0</span>)
å¾—åˆ°ç»“æœï¼š<span class="hljs-number">1200.0</span>
  â†“
<span class="hljs-selector-attr">[åé¦ˆåˆ°å†…å­˜]</span>
Agentè®°ä½ï¼šmultiply(<span class="hljs-number">25</span>, <span class="hljs-number">48</span>) = <span class="hljs-number">1200</span>
  â†“
<span class="hljs-selector-attr">[æ¨ç†é˜¶æ®µ]</span>
Agentç»§ç»­æ€è€ƒï¼šæˆ‘å·²ç»å¾—åˆ°ç»“æœäº†ï¼Œå¯ä»¥å›ç­”ç”¨æˆ·
Modelè¿”å›ï¼šæœ€ç»ˆç­”æ¡ˆçš„æ–‡æœ¬
  â†“
<span class="hljs-selector-attr">[å®Œæˆ]</span>
è¿”å›ç»™ç”¨æˆ·ï¼š<span class="hljs-number">25</span>ä¹˜ä»¥<span class="hljs-number">48</span>ç­‰äº<span class="hljs-number">1200</span>
</code></pre>
<h3 data-id="heading-40">1.3.3 åŒ…å«è®°å¿†çš„å¯¹è¯ç¤ºä¾‹</h3>
<p>è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<strong>èƒ½å¤Ÿè®°ä½å¯¹è¯å†å²</strong>çš„Agentï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example;

<span class="hljs-keyword">import</span> io.agentscope.core.ReActAgent;
<span class="hljs-keyword">import</span> io.agentscope.core.memory.InMemoryMemory;
<span class="hljs-keyword">import</span> io.agentscope.core.message.Msg;
<span class="hljs-keyword">import</span> io.agentscope.core.model.DashScopeChatModel;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConversationWithMemoryExample</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        <span class="hljs-type">DashScopeChatModel</span> <span class="hljs-variable">model</span> <span class="hljs-operator">=</span> DashScopeChatModel.builder()
            .apiKey(System.getenv(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>))
            .modelName(<span class="hljs-string">"qwen-plus"</span>)
            .build();
        
        <span class="hljs-comment">// åˆ›å»ºAgentå¹¶é…ç½®è®°å¿†</span>
        <span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
            .name(<span class="hljs-string">"Conversational AI"</span>)
            .sysPrompt(<span class="hljs-string">"You are a friendly assistant. Remember the context of conversations."</span>)
            .model(model)
            .memory(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryMemory</span>())  <span class="hljs-comment">// æ˜ç¡®åˆ›å»ºè®°å¿†å¯¹è±¡</span>
            .build();
        
        <span class="hljs-comment">// ç¬¬1è½®å¯¹è¯</span>
        System.out.println(<span class="hljs-string">"=== ç¬¬1è½®å¯¹è¯ ==="</span>);
        <span class="hljs-type">Msg</span> <span class="hljs-variable">msg1</span> <span class="hljs-operator">=</span> agent.call(
            Msg.builder().textContent(<span class="hljs-string">"æˆ‘å«å¼ ä¸‰ï¼Œæˆ‘æ˜¯ä¸€ä¸ªå·¥ç¨‹å¸ˆ"</span>)
            .build()
        ).block();
        System.out.println(<span class="hljs-string">"User: æˆ‘å«å¼ ä¸‰ï¼Œæˆ‘æ˜¯ä¸€ä¸ªå·¥ç¨‹å¸ˆ"</span>);
        System.out.println(<span class="hljs-string">"Agent: "</span> + msg1.getTextContent());
        
        Thread.sleep(<span class="hljs-number">1000</span>);  <span class="hljs-comment">// ç­‰å¾…1ç§’</span>
        
        <span class="hljs-comment">// ç¬¬2è½®å¯¹è¯ï¼šAgentåº”è¯¥è®°å¾—å¼ ä¸‰çš„èº«ä»½</span>
        System.out.println(<span class="hljs-string">"\n=== ç¬¬2è½®å¯¹è¯ ==="</span>);
        <span class="hljs-type">Msg</span> <span class="hljs-variable">msg2</span> <span class="hljs-operator">=</span> agent.call(
            Msg.builder().textContent(<span class="hljs-string">"æˆ‘çš„å·¥ä½œæ˜¯ä»€ä¹ˆï¼Ÿ"</span>)
            .build()
        ).block();
        System.out.println(<span class="hljs-string">"User: æˆ‘çš„å·¥ä½œæ˜¯ä»€ä¹ˆï¼Ÿ"</span>);
        System.out.println(<span class="hljs-string">"Agent: "</span> + msg2.getTextContent());
        <span class="hljs-comment">// Agentä¼šå›ç­”ï¼šä½ æ˜¯ä¸€ä¸ªå·¥ç¨‹å¸ˆï¼Œä¹‹å‰å‘Šè¯‰æˆ‘çš„</span>
        
        <span class="hljs-comment">// ç¬¬3è½®å¯¹è¯</span>
        System.out.println(<span class="hljs-string">"\n=== ç¬¬3è½®å¯¹è¯ ==="</span>);
        <span class="hljs-type">Msg</span> <span class="hljs-variable">msg3</span> <span class="hljs-operator">=</span> agent.call(
            Msg.builder().textContent(<span class="hljs-string">"æˆ‘æœ€æ“…é•¿çš„ç¼–ç¨‹è¯­è¨€æ˜¯Javaã€‚è¿™ä¸ªä¿¡æ¯å¯¹æˆ‘çš„å·¥ä½œæœ‰ä»€ä¹ˆå½±å“ï¼Ÿ"</span>)
            .build()
        ).block();
        System.out.println(<span class="hljs-string">"User: æˆ‘æœ€æ“…é•¿çš„ç¼–ç¨‹è¯­è¨€æ˜¯Javaã€‚è¿™ä¸ªä¿¡æ¯å¯¹æˆ‘çš„å·¥ä½œæœ‰ä»€ä¹ˆå½±å“ï¼Ÿ"</span>);
        System.out.println(<span class="hljs-string">"Agent: "</span> + msg3.getTextContent());
        <span class="hljs-comment">// Agentèƒ½ç»¼åˆå‰é¢çš„ä¿¡æ¯åšå‡ºå›ç­”</span>
    }
}
</code></pre>
<h4 data-id="heading-41">è®°å¿†å¦‚ä½•å·¥ä½œï¼Ÿ</h4>
<pre><code class="hljs language-scss" lang="scss">ç¬¬<span class="hljs-number">1</span>è½®å¯¹è¯ï¼š
Agent<span class="hljs-selector-class">.call</span>(msg) â†’ memory<span class="hljs-selector-class">.addMessage</span>(userMsg) + memory<span class="hljs-selector-class">.addMessage</span>(agentResponse)
è®°å¿†çŠ¶æ€ï¼š
  <span class="hljs-selector-attr">[UserMessage: <span class="hljs-string">"æˆ‘å«å¼ ä¸‰ï¼Œæˆ‘æ˜¯ä¸€ä¸ªå·¥ç¨‹å¸ˆ"</span>]</span>
  <span class="hljs-selector-attr">[AssistantMessage: <span class="hljs-string">"Nice to meet you, å¼ ä¸‰! å¾ˆé«˜å…´è®¤è¯†ä½ ..."</span>]</span>

ç¬¬<span class="hljs-number">2</span>è½®å¯¹è¯ï¼š
Agent<span class="hljs-selector-class">.call</span>(msg) â†’ 
  <span class="hljs-number">1</span>. memory<span class="hljs-selector-class">.addMessage</span>(userMsg)
  <span class="hljs-number">2</span>. memory<span class="hljs-selector-class">.getMessages</span>() è¿”å›æ‰€æœ‰å†å²æ¶ˆæ¯ï¼ˆåŒ…æ‹¬ç¬¬<span class="hljs-number">1</span>è½®ï¼‰
  <span class="hljs-number">3</span>. å°†å®Œæ•´çš„å†å²æ¶ˆæ¯å‘é€ç»™Model
  <span class="hljs-number">4</span>. Modelç”Ÿæˆå“åº”ï¼Œè®°ä½äº†å¼ ä¸‰çš„èº«ä»½
  <span class="hljs-number">5</span>. memory<span class="hljs-selector-class">.addMessage</span>(agentResponse)

è®°å¿†çŠ¶æ€ï¼š
  <span class="hljs-selector-attr">[UserMessage: <span class="hljs-string">"æˆ‘å«å¼ ä¸‰ï¼Œæˆ‘æ˜¯ä¸€ä¸ªå·¥ç¨‹å¸ˆ"</span>]</span>
  <span class="hljs-selector-attr">[AssistantMessage: <span class="hljs-string">"..."</span>]</span>
  <span class="hljs-selector-attr">[UserMessage: <span class="hljs-string">"æˆ‘çš„å·¥ä½œæ˜¯ä»€ä¹ˆï¼Ÿ"</span>]</span>
  <span class="hljs-selector-attr">[AssistantMessage: <span class="hljs-string">"æ ¹æ®ä½ ä¹‹å‰å‘Šè¯‰æˆ‘..."</span>]</span>
</code></pre>
<hr/>
<h2 data-id="heading-42">1.4 é¡¹ç›®ç»“æ„ä¸æ¨¡å—åˆ’åˆ†</h2>
<h3 data-id="heading-43">1.4.1 æ•´ä½“æ¨¡å—ç»„ç»‡</h3>
<pre><code class="hljs language-bash" lang="bash">agentscope-java/
â”œâ”€â”€ agentscope-core/                          <span class="hljs-comment"># æ ¸å¿ƒæ¨¡å—ï¼ˆå¿…éœ€ï¼‰</span>
â”‚   â”œâ”€â”€ src/main/java/io/agentscope/core/
â”‚   â”‚   â”œâ”€â”€ agent/                            <span class="hljs-comment"># Agentæ¥å£å’Œå®ç°</span>
â”‚   â”‚   â”œâ”€â”€ message/                          <span class="hljs-comment"># æ¶ˆæ¯ç³»ç»Ÿï¼ˆMsgã€ContentBlockç­‰ï¼‰</span>
â”‚   â”‚   â”œâ”€â”€ model/                            <span class="hljs-comment"># æ¨¡å‹æ¥å£å’Œå®ç°</span>
â”‚   â”‚   â”œâ”€â”€ tool/                             <span class="hljs-comment"># å·¥å…·ç³»ç»Ÿï¼ˆ@Toolã€Toolkitï¼‰</span>
â”‚   â”‚   â”œâ”€â”€ memory/                           <span class="hljs-comment"># è®°å¿†ç³»ç»Ÿ</span>
â”‚   â”‚   â”œâ”€â”€ hook/                             <span class="hljs-comment"># Hookç³»ç»Ÿï¼ˆäº‹ä»¶æ‹¦æˆªï¼‰</span>
â”‚   â”‚   â”œâ”€â”€ plan/                             <span class="hljs-comment"># PlanNotebookä»»åŠ¡ç®¡ç†</span>
â”‚   â”‚   â”œâ”€â”€ rag/                              <span class="hljs-comment"># RAGæ£€ç´¢å¢å¼ºç”Ÿæˆ</span>
â”‚   â”‚   â”œâ”€â”€ pipeline/                         <span class="hljs-comment"># å¤šAgentåä½œç®¡é“</span>
â”‚   â”‚   â”œâ”€â”€ session/                          <span class="hljs-comment"># ä¼šè¯ç®¡ç†ï¼ˆæŒä¹…åŒ–ï¼‰</span>
â”‚   â”‚   â”œâ”€â”€ skill/                            <span class="hljs-comment"># æŠ€èƒ½ç³»ç»Ÿ</span>
â”‚   â”‚   â”œâ”€â”€ interruption/                     <span class="hljs-comment"># ä¸­æ–­å’Œå–æ¶ˆæœºåˆ¶</span>
â”‚   â”‚   â”œâ”€â”€ tracing/                          <span class="hljs-comment"># å¯è§‚æµ‹æ€§è¿½è¸ª</span>
â”‚   â”‚   â””â”€â”€ ReActAgent.java                   <span class="hljs-comment"># æ ¸å¿ƒå®ç°</span>
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ agentscope-extensions/                    <span class="hljs-comment"># æ‰©å±•æ¨¡å—ï¼ˆå¯é€‰ï¼‰</span>
â”‚   â”œâ”€â”€ agentscope-extensions-scheduler/      <span class="hljs-comment"># å®šæ—¶è°ƒåº¦</span>
â”‚   â”œâ”€â”€ agentscope-extensions-rag-*/          <span class="hljs-comment"># å„ç§RAGé›†æˆ</span>
â”‚   â”œâ”€â”€ agentscope-extensions-a2a/            <span class="hljs-comment"># A2Aå¤šAgentåè®®</span>
â”‚   â”œâ”€â”€ agentscope-extensions-studio/         <span class="hljs-comment"># Studioé›†æˆ</span>
â”‚   â”œâ”€â”€ agentscope-spring-boot-starters/      <span class="hljs-comment"># Spring Booté›†æˆ</span>
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ agentscope-examples/                      <span class="hljs-comment"># ç¤ºä¾‹ä»£ç </span>
â”‚   â”œâ”€â”€ quickstart/                           <span class="hljs-comment"># å¿«é€Ÿå¼€å§‹</span>
â”‚   â”œâ”€â”€ boba-tea-shop/                        <span class="hljs-comment"># å®Œæ•´åº”ç”¨ç¤ºä¾‹</span>
â”‚   â”œâ”€â”€ werewolf/                             <span class="hljs-comment"># æ¸¸æˆç¤ºä¾‹</span>
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ docs/                                     <span class="hljs-comment"># æ–‡æ¡£</span>
    â”œâ”€â”€ zh/                                   <span class="hljs-comment"># ä¸­æ–‡æ–‡æ¡£</span>
    â”œâ”€â”€ en/                                   <span class="hljs-comment"># è‹±æ–‡æ–‡æ¡£</span>
    â””â”€â”€ llm/                                  <span class="hljs-comment"># LLMç›¸å…³æ–‡æ¡£</span>
</code></pre>
<h3 data-id="heading-44">1.4.2 æ ¸å¿ƒæ¨¡å—è¯¦è§£</h3>
<h4 data-id="heading-45">1. Agentæ¥å£å±‚ï¼ˆ<code>agent/</code>ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">æ ¸å¿ƒç±»ï¼š
â”œâ”€â”€ Agent                    <span class="hljs-comment"># æ‰€æœ‰Agentçš„æ¥å£</span>
â”œâ”€â”€ AgentBase                <span class="hljs-comment"># Agentçš„åŸºç¡€å®ç°</span>
â”œâ”€â”€ ReActAgent               <span class="hljs-comment"># ReActæ¨ç†-è¡ŒåŠ¨å¾ªç¯å®ç°</span>
â”œâ”€â”€ UserAgent                <span class="hljs-comment"># ç”¨æˆ·äº¤äº’Agent</span>
â””â”€â”€ StructuredOutputHandler  <span class="hljs-comment"># ç»“æ„åŒ–è¾“å‡ºå¤„ç†</span>
</code></pre>
<p><strong>èŒè´£</strong>ï¼šå®šä¹‰Agentçš„è¡Œä¸ºå’Œç”Ÿå‘½å‘¨æœŸ
<strong>å…³é”®æ–¹æ³•</strong>ï¼š<code>call()</code>ã€<code>observe()</code>ã€<code>interrupt()</code>ã€<code>stream()</code></p>
<h4 data-id="heading-46">2. æ¶ˆæ¯ç³»ç»Ÿï¼ˆ<code>message/</code>ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">æ ¸å¿ƒç±»ï¼š
â”œâ”€â”€ Msg                      <span class="hljs-comment"># æ¶ˆæ¯å¯¹è±¡ï¼ˆä¸å¯å˜ï¼‰</span>
â”œâ”€â”€ MsgRole                  <span class="hljs-comment"># æ¶ˆæ¯è§’è‰²æšä¸¾</span>
â”‚   â”œâ”€â”€ USER                 <span class="hljs-comment"># ç”¨æˆ·æ¶ˆæ¯</span>
â”‚   â”œâ”€â”€ ASSISTANT            <span class="hljs-comment"># Agentå›å¤</span>
â”‚   â”œâ”€â”€ SYSTEM               <span class="hljs-comment"># ç³»ç»Ÿæ¶ˆæ¯</span>
â”‚   â””â”€â”€ TOOL                 <span class="hljs-comment"># å·¥å…·æ‰§è¡Œç»“æœ</span>
â””â”€â”€ ContentBlockåŠå…¶å®ç°
    â”œâ”€â”€ TextBlock            <span class="hljs-comment"># æ–‡æœ¬å†…å®¹</span>
    â”œâ”€â”€ ImageBlock           <span class="hljs-comment"># å›¾åƒå†…å®¹</span>
    â”œâ”€â”€ AudioBlock           <span class="hljs-comment"># éŸ³é¢‘å†…å®¹</span>
    â”œâ”€â”€ VideoBlock           <span class="hljs-comment"># è§†é¢‘å†…å®¹</span>
    â”œâ”€â”€ ToolUseBlock         <span class="hljs-comment"># å·¥å…·è°ƒç”¨</span>
    â””â”€â”€ ToolResultBlock      <span class="hljs-comment"># å·¥å…·ç»“æœ</span>
</code></pre>
<p><strong>è®¾è®¡ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>ä¸å¯å˜è®¾è®¡ï¼ˆImmutableï¼‰ï¼Œçº¿ç¨‹å®‰å…¨</li>
<li>æ”¯æŒå¤šç§å†…å®¹ç±»å‹ï¼ˆå¤šæ¨¡æ€ï¼‰</li>
<li>å…ƒæ•°æ®æ”¯æŒï¼Œç”¨äºç»“æ„åŒ–æ•°æ®</li>
</ul>
<h4 data-id="heading-47">3. æ¨¡å‹å±‚ï¼ˆ<code>model/</code>ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">æ ¸å¿ƒæ¥å£/ç±»ï¼š
â”œâ”€â”€ Model                    <span class="hljs-comment"># æ¨¡å‹æ¥å£</span>
â”‚   â””â”€â”€ stream()  <span class="hljs-comment"># æµå¼è°ƒç”¨LLM</span>
â”œâ”€â”€ Modelå®ç°
â”‚   â”œâ”€â”€ DashScopeChatModel   <span class="hljs-comment"># é˜¿é‡Œäº‘é€šä¹‰åƒé—®</span>
â”‚   â”œâ”€â”€ OpenAiChatModel      <span class="hljs-comment"># OpenAI GPT</span>
â”‚   â”œâ”€â”€ GeminiChatModel      <span class="hljs-comment"># Google Gemini</span>
â”‚   â””â”€â”€ AnthropicChatModel   <span class="hljs-comment"># Anthropic Claude</span>
â”œâ”€â”€ GenerateOptions          <span class="hljs-comment"># ç”Ÿæˆå‚æ•°ï¼ˆtemperatureã€max_tokensç­‰ï¼‰</span>
â”œâ”€â”€ ChatResponse             <span class="hljs-comment"># æ¨¡å‹å“åº”</span>
â””â”€â”€ Formatter                <span class="hljs-comment"># æ¶ˆæ¯æ ¼å¼åŒ–å™¨</span>
</code></pre>
<p><strong>èŒè´£</strong>ï¼šå±è”½ä¸åŒLLMçš„å·®å¼‚ï¼Œæä¾›ç»Ÿä¸€æ¥å£</p>
<h4 data-id="heading-48">4. å·¥å…·ç³»ç»Ÿï¼ˆ<code>tool/</code>ï¼‰</h4>
<pre><code class="hljs language-less" lang="less">æ ¸å¿ƒç±»ï¼š
â”œâ”€â”€ <span class="hljs-variable">@Tool</span>                    # å·¥å…·æ³¨è§£
â”œâ”€â”€ <span class="hljs-variable">@ToolParam</span>              # å·¥å…·å‚æ•°æ³¨è§£
â”œâ”€â”€ Toolkit                 # å·¥å…·ç®±ï¼ˆç®¡ç†å¤šä¸ªå·¥å…·ï¼‰
â”œâ”€â”€ AgentTool               # å·¥å…·æ¥å£
â”œâ”€â”€ ToolSchema              # å·¥å…·å®šä¹‰ï¼ˆå‘é€ç»™LLMçš„æè¿°ï¼‰
â”œâ”€â”€ ToolExecutor            # å·¥å…·æ‰§è¡Œå™¨
â”œâ”€â”€ ToolRegistry            # å·¥å…·æ³¨å†Œè¡¨
â””â”€â”€ mcp/
    â””â”€â”€ McpTool             # MCPåè®®å·¥å…·é€‚é…
</code></pre>
<p><strong>å·¥ä½œæµ</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@Tool</span>æ³¨è§£ â†’ ToolRegistryï¼ˆå‘ç°ï¼‰ â†’ ToolSchemaï¼ˆç”Ÿæˆå®šä¹‰ï¼‰ 
  â†’ Modelï¼ˆé€‰æ‹©å·¥å…·ï¼‰â†’ ToolExecutorï¼ˆæ‰§è¡Œï¼‰â†’ ç»“æœè¿”å›
</code></pre>
<h4 data-id="heading-49">5. è®°å¿†ç³»ç»Ÿï¼ˆ<code>memory/</code>ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">æ ¸å¿ƒç±»ï¼š
â”œâ”€â”€ Memory                  <span class="hljs-comment"># è®°å¿†æ¥å£</span>
â”œâ”€â”€ InMemoryMemory          <span class="hljs-comment"># å†…å­˜å®ç°</span>
â”œâ”€â”€ LongTermMemory          <span class="hljs-comment"># é•¿æœŸè®°å¿†ï¼ˆè·¨ä¼šè¯ï¼‰</span>
â”œâ”€â”€ LongTermMemoryTools     <span class="hljs-comment"># LTMç›¸å…³å·¥å…·</span>
â”œâ”€â”€ LongTermMemoryMode      <span class="hljs-comment"># LTMå·¥ä½œæ¨¡å¼</span>
â””â”€â”€ StaticLongTermMemoryHook<span class="hljs-comment"># LTM Hooké›†æˆ</span>
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>çŸ­æœŸè®°å¿†ï¼šå½“å‰å¯¹è¯å†å²</li>
<li>é•¿æœŸè®°å¿†ï¼šè·¨ä¼šè¯æŒä¹…åŒ–å­˜å‚¨ï¼Œæ”¯æŒè¯­ä¹‰æœç´¢</li>
</ul>
<h4 data-id="heading-50">6. Hookç³»ç»Ÿï¼ˆ<code>hook/</code>ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">æ ¸å¿ƒç±»ï¼š
â”œâ”€â”€ Hook                    <span class="hljs-comment"># Hookæ¥å£</span>
â”œâ”€â”€ HookEvent               <span class="hljs-comment"># Hookäº‹ä»¶åŸºç±»</span>
â”‚   â”œâ”€â”€ PreReasoningEvent   <span class="hljs-comment"># æ¨ç†å‰</span>
â”‚   â”œâ”€â”€ ReasoningChunkEvent <span class="hljs-comment"># æ¨ç†æµå¼</span>
â”‚   â”œâ”€â”€ PostReasoningEvent  <span class="hljs-comment"># æ¨ç†å</span>
â”‚   â”œâ”€â”€ PreActingEvent      <span class="hljs-comment"># è¡ŒåŠ¨å‰</span>
â”‚   â”œâ”€â”€ ActingChunkEvent    <span class="hljs-comment"># è¡ŒåŠ¨æµå¼</span>
â”‚   â””â”€â”€ PostActingEvent     <span class="hljs-comment"># è¡ŒåŠ¨å</span>
â””â”€â”€ HookChain               <span class="hljs-comment"># Hooké“¾ï¼ˆè´£ä»»é“¾æ¨¡å¼ï¼‰</span>
</code></pre>
<p><strong>ç”¨é€”</strong>ï¼šåœ¨Agentæ‰§è¡Œçš„å„ä¸ªé˜¶æ®µæ’å…¥è‡ªå®šä¹‰é€»è¾‘</p>
<h4 data-id="heading-51">7. ä»»åŠ¡ç®¡ç†ï¼ˆ<code>plan/</code>ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">æ ¸å¿ƒç±»ï¼š
â”œâ”€â”€ PlanNotebook            <span class="hljs-comment"># è®¡åˆ’ç®¡ç†å·¥å…·</span>
â”œâ”€â”€ Plan                    <span class="hljs-comment"># è®¡åˆ’æ¨¡å‹</span>
â”œâ”€â”€ SubTask                 <span class="hljs-comment"># å­ä»»åŠ¡æ¨¡å‹</span>
â”œâ”€â”€ PlanState               <span class="hljs-comment"># è®¡åˆ’çŠ¶æ€</span>
â””â”€â”€ PlanStorage             <span class="hljs-comment"># è®¡åˆ’å­˜å‚¨æŠ½è±¡</span>
    â”œâ”€â”€ InMemoryPlanStorage <span class="hljs-comment"># å†…å­˜å­˜å‚¨</span>
    â””â”€â”€ JsonPlanStorage     <span class="hljs-comment"># JSONæ–‡ä»¶å­˜å‚¨</span>
</code></pre>
<h4 data-id="heading-52">8. RAGç³»ç»Ÿï¼ˆ<code>rag/</code>ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">æ ¸å¿ƒç±»ï¼š
â”œâ”€â”€ Knowledge               <span class="hljs-comment"># çŸ¥è¯†åº“æ¥å£</span>
â”œâ”€â”€ Document                <span class="hljs-comment"># æ–‡æ¡£æ¨¡å‹</span>
â”œâ”€â”€ RetrieveConfig          <span class="hljs-comment"># æ£€ç´¢é…ç½®</span>
â”œâ”€â”€ KnowledgeRetrievalTools <span class="hljs-comment"># RAGå·¥å…·</span>
â””â”€â”€ GenericRAGHook          <span class="hljs-comment"># RAG Hooké›†æˆ</span>
</code></pre>
<h4 data-id="heading-53">9. Pipelineï¼ˆ<code>pipeline/</code>ï¼‰</h4>
<pre><code class="hljs language-r" lang="r">æ ¸å¿ƒç±»ï¼š
â”œâ”€â”€ Pipeline<span class="hljs-operator">&lt;</span><span class="hljs-built_in">T</span><span class="hljs-operator">&gt;</span>             <span class="hljs-comment"># Pipelineæ¥å£</span>
â”œâ”€â”€ SequentialPipeline      <span class="hljs-comment"># é¡ºåºæ‰§è¡Œ</span>
â”œâ”€â”€ FanoutPipeline          <span class="hljs-comment"># å¹¶è¡Œæ‰§è¡Œ</span>
â””â”€â”€ MsgHub                  <span class="hljs-comment"># æ¶ˆæ¯ä¸­å¿ƒï¼ˆå¤šAgenté€šä¿¡ï¼‰</span>
</code></pre>
<h4 data-id="heading-54">10. Sessionï¼ˆ<code>session/</code>ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">æ ¸å¿ƒç±»ï¼š
â”œâ”€â”€ Session                 <span class="hljs-comment"># Sessionæ¥å£</span>
â”œâ”€â”€ InMemorySession         <span class="hljs-comment"># å†…å­˜Session</span>
â”œâ”€â”€ JsonSession             <span class="hljs-comment"># JSONæ–‡ä»¶Session</span>
â”œâ”€â”€ MysqlSession            <span class="hljs-comment"># MySQL Session</span>
â””â”€â”€ RedisSession            <span class="hljs-comment"># Redis Session</span>
</code></pre>
<hr/>
<h2 data-id="heading-55">1.5 ç”Ÿäº§åœºæ™¯è¯¦è§£</h2>
<h3 data-id="heading-56">1.5.1 åœºæ™¯ï¼šæ™ºèƒ½å®¢æœç³»ç»Ÿ</h3>
<h4 data-id="heading-57">éœ€æ±‚</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">éœ€æ±‚ï¼šä¸ºç”µå•†å¹³å°æ„å»ºä¸€ä¸ªæ™ºèƒ½å®¢æœç³»ç»Ÿ</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">åŠŸèƒ½1ï¼šè‡ªåŠ¨å›ç­”å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">åŠŸèƒ½2ï¼šå¤„ç†è®¢å•ç›¸å…³æŸ¥è¯¢</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">åŠŸèƒ½3ï¼šå¤„ç†æŠ•è¯‰å’Œé€€è´§</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">åŠŸèƒ½4ï¼šæ”¯æŒçŸ¥è¯†åº“æ£€ç´¢ï¼ˆRAGï¼‰</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">åŠŸèƒ½5ï¼šå…³é”®é—®é¢˜å‡çº§åˆ°äººå·¥</span>
<span class="hljs-string">â””â”€</span> <span class="hljs-string">çº¦æŸï¼šæ¯å°æ—¶å¤„ç†</span> <span class="hljs-number">1000</span><span class="hljs-string">+</span> <span class="hljs-string">æ¶ˆæ¯ï¼Œ99.9%å¯ç”¨æ€§</span>
</code></pre>
<h4 data-id="heading-58">æ¶æ„è®¾è®¡</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    User[&amp;#34;ç”¨æˆ·æ¶ˆæ¯&amp;#34;]
    
    User --&gt; Agent[&amp;#34;æ™ºèƒ½å®¢æœ Agent&amp;#34;]
    
    Agent --&gt; Tools[&amp;#34;å·¥å…·ç®±&amp;#34;]
    Tools --&gt; FAQ[&amp;#34;FAQå·¥å…·&amp;#34;]
    Tools --&gt; Order[&amp;#34;è®¢å•æŸ¥è¯¢å·¥å…·&amp;#34;]
    Tools --&gt; Return[&amp;#34;é€€è´§å¤„ç†å·¥å…·&amp;#34;]
    Tools --&gt; Escalate[&amp;#34;äººå·¥å‡çº§å·¥å…·&amp;#34;]
    
    Agent --&gt; Memory[&amp;#34;è®°å¿†ç³»ç»Ÿ&amp;#34;]
    Memory --&gt; ShortMem[&amp;#34;çŸ­æœŸï¼šå½“å‰å¯¹è¯&amp;#34;]
    Memory --&gt; LongMem[&amp;#34;é•¿æœŸï¼šå®¢æˆ·å†å²&amp;#34;]
    
    Agent --&gt; RAG[&amp;#34;RAGç³»ç»Ÿ&amp;#34;]
    RAG --&gt; KB[&amp;#34;çŸ¥è¯†åº“æ£€ç´¢&amp;#34;]
    
    Agent --&gt; Monitor[&amp;#34;ç›‘æ§å’ŒæŒ‡æ ‡&amp;#34;]
    
    Output[&amp;#34;æœ€ç»ˆå›å¤&amp;#34;]
    Agent --&gt; Output
</code></pre>
<h4 data-id="heading-59">å®Œæ•´ä»£ç å®ç°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.ecommerce;

<span class="hljs-keyword">import</span> io.agentscope.core.ReActAgent;
<span class="hljs-keyword">import</span> io.agentscope.core.memory.InMemoryMemory;
<span class="hljs-keyword">import</span> io.agentscope.core.memory.LongTermMemory;
<span class="hljs-keyword">import</span> io.agentscope.core.memory.LongTermMemoryMode;
<span class="hljs-keyword">import</span> io.agentscope.core.message.Msg;
<span class="hljs-keyword">import</span> io.agentscope.core.model.DashScopeChatModel;
<span class="hljs-keyword">import</span> io.agentscope.core.rag.Knowledge;
<span class="hljs-keyword">import</span> io.agentscope.core.rag.RAGMode;
<span class="hljs-keyword">import</span> io.agentscope.core.tool.Tool;
<span class="hljs-keyword">import</span> io.agentscope.core.tool.ToolParam;
<span class="hljs-keyword">import</span> io.agentscope.core.tool.Toolkit;
<span class="hljs-keyword">import</span> java.util.Map;
<span class="hljs-keyword">import</span> java.util.concurrent.ConcurrentHashMap;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SmartCustomerServiceExample</span> {
    
    <span class="hljs-comment">// ç¬¬1æ­¥ï¼šå®šä¹‰å·¥å…·ç±»</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomerServiceTools</span> {
        
        <span class="hljs-keyword">private</span> Map&lt;String, String&gt; faqDatabase = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
        <span class="hljs-keyword">private</span> Map&lt;String, Order&gt; orderDatabase = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">CustomerServiceTools</span><span class="hljs-params">()</span> {
            <span class="hljs-comment">// åˆå§‹åŒ–FAQæ•°æ®åº“</span>
            faqDatabase.put(<span class="hljs-string">"shipping"</span>, <span class="hljs-string">"æ ‡å‡†å¿«é€’3-5å¤©é€è¾¾ï¼ŒåŠ æ€¥1-2å¤©ã€‚æ”¯æŒåˆ°ä»˜å’Œé¢„ä»˜ã€‚"</span>);
            faqDatabase.put(<span class="hljs-string">"return"</span>, <span class="hljs-string">"æ”¶è´§å30å¤©å†…æ— æŸäº§å“å¯æ— æ¡ä»¶é€€è´§ã€‚å·²ä½¿ç”¨äº§å“éœ€æ‰£é™¤ä½¿ç”¨è´¹ã€‚"</span>);
            faqDatabase.put(<span class="hljs-string">"warranty"</span>, <span class="hljs-string">"æ‰€æœ‰äº§å“äº«å—1å¹´ä¿ä¿®ï¼Œè¦†ç›–ç”Ÿäº§ç¼ºé™·ä½†ä¸åŒ…æ‹¬äººä¸ºæŸåã€‚"</span>);
        }
        
        <span class="hljs-meta">@Tool(name = "search_faq", 
              description = "Search FAQ database for common questions")</span>
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">searchFAQ</span><span class="hljs-params">(
            <span class="hljs-meta">@ToolParam(name = "question", description = "Customer question or keyword")</span> 
                String question)</span> {
            
            <span class="hljs-comment">// ç®€å•çš„å…³é”®è¯åŒ¹é…ï¼ˆç”Ÿäº§ç¯å¢ƒåº”ä½¿ç”¨å‘é‡æœç´¢ï¼‰</span>
            <span class="hljs-keyword">for</span> (Map.Entry&lt;String, String&gt; entry : faqDatabase.entrySet()) {
                <span class="hljs-keyword">if</span> (question.toLowerCase().contains(entry.getKey())) {
                    <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"FAQ: %s â†’ %s"</span>, entry.getKey(), entry.getValue());
                }
            }
            <span class="hljs-keyword">return</span> <span class="hljs-string">"No matching FAQ found for: "</span> + question;
        }
        
        <span class="hljs-meta">@Tool(name = "query_order", 
              description = "Query order status and details")</span>
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">queryOrder</span><span class="hljs-params">(
            <span class="hljs-meta">@ToolParam(name = "order_id", description = "Order ID to query")</span> 
                String orderId)</span> {
            
            <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderDatabase.get(orderId);
            <span class="hljs-keyword">if</span> (order == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"Order not found: %s"</span>, orderId);
            }
            
            <span class="hljs-keyword">return</span> String.format(
                <span class="hljs-string">"Order %s: Status=%s, Total=Â¥%.2f, Items=%d, "</span> +
                <span class="hljs-string">"Created=%s, EstimatedDelivery=%s"</span>,
                orderId, order.status, order.total, order.itemCount,
                order.createdTime, order.estimatedDelivery);
        }
        
        <span class="hljs-meta">@Tool(name = "process_return_request", 
              description = "Initiate a return or refund process")</span>
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">processReturnRequest</span><span class="hljs-params">(
            <span class="hljs-meta">@ToolParam(name = "order_id", description = "Order to return")</span> 
                String orderId,
            <span class="hljs-meta">@ToolParam(name = "reason", description = "Reason for return")</span> 
                String reason,
            <span class="hljs-meta">@ToolParam(name = "damage_percent", 
                       description = "Damage percentage 0-100, 0=unused, 100=unusable")</span> 
                <span class="hljs-type">int</span> damagePercent)</span> {
            
            <span class="hljs-keyword">if</span> (damagePercent &lt; <span class="hljs-number">0</span> || damagePercent &gt; <span class="hljs-number">100</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-string">"Invalid damage_percent. Must be 0-100."</span>;
            }
            
            <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderDatabase.get(orderId);
            <span class="hljs-keyword">if</span> (order == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"Order not found: %s"</span>, orderId);
            }
            
            <span class="hljs-comment">// è®¡ç®—é€€æ¬¾é‡‘é¢</span>
            <span class="hljs-type">double</span> <span class="hljs-variable">refundRate</span> <span class="hljs-operator">=</span> <span class="hljs-number">1.0</span> - (damagePercent / <span class="hljs-number">100.0</span>);
            <span class="hljs-type">double</span> <span class="hljs-variable">refundAmount</span> <span class="hljs-operator">=</span> order.total * refundRate;
            
            <span class="hljs-comment">// æ›´æ–°è®¢å•çŠ¶æ€</span>
            order.status = <span class="hljs-string">"RETURN_PROCESSING"</span>;
            
            <span class="hljs-keyword">return</span> String.format(
                <span class="hljs-string">"Return request created: Order=%s, Reason=%s, "</span> +
                <span class="hljs-string">"RefundAmount=Â¥%.2f, RefundRate=%.0f%%, "</span> +
                <span class="hljs-string">"Status=RETURN_PROCESSING. Refund will be processed within 3-5 days."</span>,
                orderId, reason, refundAmount, refundRate * <span class="hljs-number">100</span>);
        }
        
        <span class="hljs-meta">@Tool(name = "escalate_to_human", 
              description = "Escalate issue to human agent")</span>
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">escalateToHuman</span><span class="hljs-params">(
            <span class="hljs-meta">@ToolParam(name = "reason", description = "Reason for escalation")</span> 
                String reason,
            <span class="hljs-meta">@ToolParam(name = "priority", description = "Priority: normal, high, urgent")</span> 
                String priority)</span> {
            
            <span class="hljs-keyword">if</span> (!priority.matches(<span class="hljs-string">"(?i)normal|high|urgent"</span>)) {
                <span class="hljs-keyword">return</span> <span class="hljs-string">"Invalid priority. Must be: normal, high, or urgent."</span>;
            }
            
            <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒï¼šåˆ›å»ºå‡çº§å·¥å•ï¼Œåˆ†é…ç»™äººå·¥å®¢æœ</span>
            <span class="hljs-keyword">return</span> String.format(
                <span class="hljs-string">"Escalated to human agent. Reason: %s, Priority: %s. "</span> +
                <span class="hljs-string">"Ticket ID: TICKET_%d. "</span> +
                <span class="hljs-string">"Average wait time: 5 minutes."</span>,
                reason, priority, System.currentTimeMillis() % <span class="hljs-number">100000</span>);
        }
    }
    
    <span class="hljs-comment">// ç¬¬2æ­¥ï¼šè®¢å•æ¨¡å‹</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> {
        String status;
        <span class="hljs-type">double</span> total;
        <span class="hljs-type">int</span> itemCount;
        String createdTime;
        String estimatedDelivery;
        
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Order</span><span class="hljs-params">(String status, <span class="hljs-type">double</span> total, <span class="hljs-type">int</span> itemCount, 
                     String createdTime, String estimatedDelivery)</span> {
            <span class="hljs-built_in">this</span>.status = status;
            <span class="hljs-built_in">this</span>.total = total;
            <span class="hljs-built_in">this</span>.itemCount = itemCount;
            <span class="hljs-built_in">this</span>.createdTime = createdTime;
            <span class="hljs-built_in">this</span>.estimatedDelivery = estimatedDelivery;
        }
    }
    
    <span class="hljs-comment">// ç¬¬3æ­¥ï¼šåˆå§‹åŒ–ç³»ç»Ÿ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        System.out.println(<span class="hljs-string">"=== æ™ºèƒ½å®¢æœç³»ç»Ÿå¯åŠ¨ ===\n"</span>);
        
        <span class="hljs-comment">// åˆ›å»ºæ¨¡å‹</span>
        <span class="hljs-type">DashScopeChatModel</span> <span class="hljs-variable">model</span> <span class="hljs-operator">=</span> DashScopeChatModel.builder()
            .apiKey(System.getenv(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>))
            .modelName(<span class="hljs-string">"qwen-plus"</span>)
            .requestTimeout(java.time.Duration.ofSeconds(<span class="hljs-number">30</span>))
            .build();
        
        <span class="hljs-comment">// åˆ›å»ºå·¥å…·ç®±</span>
        <span class="hljs-type">Toolkit</span> <span class="hljs-variable">toolkit</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Toolkit</span>();
        <span class="hljs-type">CustomerServiceTools</span> <span class="hljs-variable">tools</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomerServiceTools</span>();
        
        <span class="hljs-comment">// æ·»åŠ åˆå§‹æµ‹è¯•è®¢å•æ•°æ®</span>
        tools.orderDatabase.put(<span class="hljs-string">"ORD-20240101-001"</span>,
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>(<span class="hljs-string">"DELIVERED"</span>, <span class="hljs-number">499.99</span>, <span class="hljs-number">2</span>, <span class="hljs-string">"2024-01-01 10:00:00"</span>, <span class="hljs-string">"2024-01-05"</span>));
        tools.orderDatabase.put(<span class="hljs-string">"ORD-20240110-002"</span>,
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>(<span class="hljs-string">"PROCESSING"</span>, <span class="hljs-number">1299.99</span>, <span class="hljs-number">1</span>, <span class="hljs-string">"2024-01-10 14:30:00"</span>, <span class="hljs-string">"2024-01-12"</span>));
        
        toolkit.registerObject(tools);
        
        <span class="hljs-comment">// åˆ›å»ºAgentï¼ˆé…ç½®é•¿æœŸè®°å¿†ç”¨äºå­¦ä¹ å®¢æˆ·ä¿¡æ¯ï¼‰</span>
        <span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
            .name(<span class="hljs-string">"CustomerServiceBot"</span>)
            .sysPrompt(
                <span class="hljs-string">"You are a professional e-commerce customer service agent. Your responsibilities:\n"</span> +
                <span class="hljs-string">"1. Answer FAQs about shipping, returns, warranty, etc.\n"</span> +
                <span class="hljs-string">"2. Query order status and provide details\n"</span> +
                <span class="hljs-string">"3. Handle return/refund requests fairly and efficiently\n"</span> +
                <span class="hljs-string">"4. Escalate complex issues to human agents when necessary\n"</span> +
                <span class="hljs-string">"5. Always be polite, professional, and solution-focused\n"</span> +
                <span class="hljs-string">"6. When you don't have enough info, ask clarifying questions\n"</span> +
                <span class="hljs-string">"\n"</span> +
                <span class="hljs-string">"Decision rules:\n"</span> +
                <span class="hljs-string">"- For simple FAQ questions: answer from FAQ knowledge\n"</span> +
                <span class="hljs-string">"- For order-related: first check order status\n"</span> +
                <span class="hljs-string">"- For returns: process if within policy (30 days, condition matters)\n"</span> +
                <span class="hljs-string">"- For disputes: escalate if customer is unhappy or value &gt; Â¥5000"</span>
            )
            .model(model)
            .toolkit(toolkit)
            .maxIters(<span class="hljs-number">5</span>)  <span class="hljs-comment">// é™åˆ¶æ¨ç†å¾ªç¯æ¬¡æ•°ï¼Œé¿å…æ— é™å¾ªç¯</span>
            .memory(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryMemory</span>())
            .build();
        
        <span class="hljs-comment">// ç¬¬4æ­¥ï¼šæ¨¡æ‹Ÿå®¢æˆ·å¯¹è¯</span>
        simulateConversations(agent);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">simulateConversations</span><span class="hljs-params">(ReActAgent agent)</span> {
        <span class="hljs-comment">// åœºæ™¯1ï¼šç®€å•FAQæŸ¥è¯¢</span>
        System.out.println(<span class="hljs-string">"=== åœºæ™¯1ï¼šFAQæŸ¥è¯¢ ==="</span>);
        simulateConversation(agent, 
            <span class="hljs-string">"è¯·é—®ä½ ä»¬çš„æ ‡å‡†å¿«é€’éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ"</span>);
        
        System.out.println(<span class="hljs-string">"\n=== åœºæ™¯2ï¼šè®¢å•çŠ¶æ€æŸ¥è¯¢ ==="</span>);
        simulateConversation(agent, 
            <span class="hljs-string">"æˆ‘æƒ³æŸ¥è¯¢è®¢å• ORD-20240101-001 çš„çŠ¶æ€"</span>);
        
        System.out.println(<span class="hljs-string">"\n=== åœºæ™¯3ï¼šå¤„ç†é€€è´§è¯·æ±‚ ==="</span>);
        simulateConversation(agent,
            <span class="hljs-string">"è®¢å• ORD-20240110-002 çš„äº§å“æœ‰é—®é¢˜ï¼Œæˆ‘æƒ³é€€è´§ã€‚"</span> +
            <span class="hljs-string">"äº§å“å®Œå…¨æ²¡æœ‰ä½¿ç”¨è¿‡ï¼Œæˆ‘éœ€è¦å…¨é¢é€€æ¬¾ã€‚"</span>);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">simulateConversation</span><span class="hljs-params">(ReActAgent agent, String userInput)</span> {
        System.out.println(<span class="hljs-string">"Customer: "</span> + userInput);
        System.out.println(<span class="hljs-string">"---"</span>);
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Msg</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> agent.call(
                Msg.builder().textContent(userInput).build()
            ).block();
            
            System.out.println(<span class="hljs-string">"Agent: "</span> + response.getTextContent());
            
            <span class="hljs-comment">// æ˜¾ç¤ºTokenä½¿ç”¨æƒ…å†µ</span>
            <span class="hljs-keyword">if</span> (response.getChatUsage() != <span class="hljs-literal">null</span>) {
                System.out.printf(<span class="hljs-string">"\n[Token Usage] Input: %d, Output: %d, Total: %d\n"</span>,
                    response.getChatUsage().getInputTokens(),
                    response.getChatUsage().getOutputTokens(),
                    response.getChatUsage().getTotalTokens());
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.err.println(<span class="hljs-string">"Error: "</span> + e.getMessage());
        }
    }
}
</code></pre>
<h4 data-id="heading-60">å…³é”®è®¾è®¡ç‚¹</h4>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> å·¥å…·ç³»ç»Ÿè®¾è®¡ï¼š
   âœ“ æ¯ä¸ªå·¥å…·èŒè´£å•ä¸€
   âœ“ å·¥å…·å‚æ•°æœ‰æ¸…æ™°çš„æè¿°
   âœ“ è¿”å›ç»“æœç»“æ„åŒ–ï¼Œä¾¿äºAgentç†è§£
   âœ“ é”™è¯¯å¤„ç†æ˜ç¡®ï¼ˆè¿”å›é”™è¯¯ä¿¡æ¯è€Œä¸æ˜¯æŠ›å¼‚å¸¸ï¼‰

<span class="hljs-bullet">2.</span> Agenté…ç½®ï¼š
   âœ“ ç³»ç»Ÿæç¤ºè¯æ¸…æ™°å®šä¹‰Agentçš„è§’è‰²å’Œå†³ç­–è§„åˆ™
   âœ“ maxIters=5 é˜²æ­¢æ— é™å¾ªç¯
   âœ“ ä½¿ç”¨InMemoryMemoryä¿æŒä¼šè¯ä¸Šä¸‹æ–‡

<span class="hljs-bullet">3.</span> ç”Ÿäº§è€ƒè™‘ï¼š
   âœ“ å·¥å…·æ‰§è¡Œè¶…æ—¶æ§åˆ¶ï¼ˆRequestTimeoutï¼‰
   âœ“ Tokenä½¿ç”¨ç›‘æ§ï¼ˆgetChatUsageï¼‰
   âœ“ é”™è¯¯è¾“å…¥éªŒè¯ï¼ˆå¦‚damagePercentçš„èŒƒå›´æ£€æŸ¥ï¼‰
   âœ“ å¯æ‰©å±•çš„å·¥å…·æ¶æ„ï¼ˆæ˜“äºæ·»åŠ æ–°å·¥å…·ï¼‰
</code></pre>
<h4 data-id="heading-61">æ•°æ®é‡å’Œæ€§èƒ½è°ƒä¼˜</h4>



































<table><thead><tr><th>å‚æ•°</th><th>å»ºè®®å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>maxIters</td><td>5-10</td><td>æ¨ç†å¾ªç¯æ¬¡æ•°ï¼Œè¿‡å¤šä¼šå¯¼è‡´æˆæœ¬å¢åŠ </td></tr><tr><td>model temperature</td><td>0.3-0.5</td><td>é™ä½æ¸©åº¦æé«˜ç¡®å®šæ€§å’Œä¸€è‡´æ€§</td></tr><tr><td>max_tokens</td><td>1000-2000</td><td>é™åˆ¶å•æ¬¡å›å¤é•¿åº¦</td></tr><tr><td>å†…å­˜æ¶ˆæ¯æ•°</td><td>100-500</td><td>è¶…è¿‡æ­¤æ•°é‡è‡ªåŠ¨æ¸…ç†æˆ–å‹ç¼©</td></tr><tr><td>å¹¶å‘Agentæ•°</td><td>100-1000</td><td>æ ¹æ®æœåŠ¡å™¨èµ„æºè°ƒæ•´</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-62">æ€»ç»“</h2>
<h3 data-id="heading-63">æ ¸å¿ƒè¦ç‚¹å›é¡¾</h3>





























<table><thead><tr><th>æ–¹é¢</th><th>è¦ç‚¹</th></tr></thead><tbody><tr><td><strong>What</strong></td><td>AgentScope-Javaæ˜¯ç”Ÿäº§çº§çš„AIæ™ºèƒ½ä½“æ¡†æ¶ï¼Œæ ¸å¿ƒæ˜¯ReActæ¨ç†-è¡ŒåŠ¨å¾ªç¯</td></tr><tr><td><strong>Why</strong></td><td>è§£å†³LLMåº”ç”¨çš„å¯æ§æ€§ã€å¤šæ­¥éª¤ç®¡ç†ã€è¾“å‡ºå¯é æ€§ã€çŸ¥è¯†åº“é›†æˆã€å·¥å…·ç”Ÿæ€ç­‰é—®é¢˜</td></tr><tr><td><strong>How</strong></td><td>é€šè¿‡Agentã€å·¥å…·ã€è®°å¿†ã€Hookã€Pipelineç­‰æ¨¡å—åŒ–ç»„ä»¶ï¼Œçµæ´»ç»„åˆæ„å»ºæ™ºèƒ½åº”ç”¨</td></tr><tr><td><strong>ä½•æ—¶ç”¨</strong></td><td>éœ€è¦æ„å»ºè‡ªä¸»ã€å¯æ§ã€ç”Ÿäº§çº§çš„AIåº”ç”¨æ—¶</td></tr><tr><td><strong>ä½•æ—¶ä¸ç”¨</strong></td><td>ç®€å•çš„ä¸€æ¬¡æ€§æç¤ºå·¥ç¨‹ï¼Œæˆ–è€…åªéœ€è¦åŸºç¡€çš„LLMè°ƒç”¨</td></tr></tbody></table>
<hr/>
<p>åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨**æ¶ˆæ¯ç³»ç»Ÿï¼ˆMessageï¼‰**çš„è®¾è®¡ï¼Œäº†è§£å¦‚ä½•åœ¨Agentä¹‹é—´è¿›è¡Œé«˜æ•ˆã€å®‰å…¨çš„é€šä¿¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é˜¿é‡Œå¼€æºAgentScopeå¤šæ™ºèƒ½ä½“æ¡†æ¶è§£æç³»åˆ—ï¼ˆä¸‰ï¼‰ç¬¬3ç« ï¼šæ¨¡å‹æ¥å£ï¼ˆModelï¼‰ä¸é€‚é…å™¨æ¨¡å¼]]></title>    <link>https://juejin.cn/post/7589308109639925795</link>    <guid>https://juejin.cn/post/7589308109639925795</guid>    <pubDate>2025-12-30T03:53:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589308109639925795" data-draft-id="7589275237037096995" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é˜¿é‡Œå¼€æºAgentScopeå¤šæ™ºèƒ½ä½“æ¡†æ¶è§£æç³»åˆ—ï¼ˆä¸‰ï¼‰ç¬¬3ç« ï¼šæ¨¡å‹æ¥å£ï¼ˆModelï¼‰ä¸é€‚é…å™¨æ¨¡å¼"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2025-12-30T03:53:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯­è½å¿ƒç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2875978147955741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é˜¿é‡Œå¼€æºAgentScopeå¤šæ™ºèƒ½ä½“æ¡†æ¶è§£æç³»åˆ—ï¼ˆä¸‰ï¼‰ç¬¬3ç« ï¼šæ¨¡å‹æ¥å£ï¼ˆModelï¼‰ä¸é€‚é…å™¨æ¨¡å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978147955741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯­è½å¿ƒç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T03:53:34.000Z" title="Tue Dec 30 2025 03:53:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ€»è¿°</h2>
<p>æ¨¡å‹ï¼ˆModelï¼‰æ˜¯AgentScopeä¸­<strong>è¿æ¥Agentä¸LLMçš„æ¡¥æ¢</strong>ã€‚é€šè¿‡Modelæ¥å£å’ŒFormatterç³»ç»Ÿï¼ŒAgentScopeå®ç°äº†å¯¹å¤šä¸ªLLMå‚å•†çš„ç»Ÿä¸€æŠ½è±¡ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥æ— ç¼åˆ‡æ¢ä¸åŒçš„æ¨¡å‹ï¼Œè€Œæ— éœ€ä¿®æ”¹Agenté€»è¾‘ã€‚</p>
<p>æœ¬ç« å°†ä»<strong>Modelæ¥å£è®¾è®¡ã€å¤šæ¨¡å‹æ”¯æŒã€æµå¼å“åº”ã€ç”Ÿæˆå‚æ•°ã€Formatteré€‚é…</strong>ç­‰æ–¹é¢ï¼Œæ·±å…¥è®²è§£AgentScopeå¦‚ä½•ä¼˜é›…åœ°æ”¯æŒä¸åŒçš„LLMã€‚</p>
<hr/>
<h2 data-id="heading-1">3.1 Model æ¥å£è®¾è®¡</h2>
<h3 data-id="heading-2">3.1.1 ä¸ºä»€ä¹ˆéœ€è¦Modelæ¥å£ï¼Ÿ</h3>
<h4 data-id="heading-3">ç°çŠ¶é—®é¢˜</h4>
<p>åœ¨æ²¡æœ‰ç»Ÿä¸€æ¥å£çš„æƒ…å†µä¸‹ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">é—®é¢˜<span class="hljs-number">1</span>ï¼šä»£ç ä¸LLMè€¦åˆ
â”œâ”€ OpenAI APIè°ƒç”¨é€»è¾‘ ä¸ Agenté€»è¾‘æ··æ‚
â”œâ”€ åˆ‡æ¢åˆ°Anthropicæ—¶ï¼Œéœ€è¦æ”¹å†™Agentä»£ç 
â””â”€ è¿åå¼€é—­åŸåˆ™

é—®é¢˜<span class="hljs-number">2</span>ï¼šæ¶ˆæ¯æ ¼å¼ä¸ç»Ÿä¸€
â”œâ”€ OpenAIè¦æ±‚ç‰¹å®šçš„æ¶ˆæ¯æ ¼å¼
â”œâ”€ DashScopeæœ‰è‡ªå·±çš„æ ¼å¼è¦æ±‚
â”œâ”€ Agentæ— æ³•ç»Ÿä¸€å¤„ç†æ¶ˆæ¯

é—®é¢˜<span class="hljs-number">3</span>ï¼šåŠŸèƒ½å·®å¼‚å¤„ç†å¤æ‚
â”œâ”€ ä¸åŒLLMæ”¯æŒçš„åŠŸèƒ½ä¸åŒï¼ˆå·¥å…·ã€è§†è§‰ç­‰ï¼‰
â”œâ”€ åœ¨Agentä¸­ç¼–å†™å¤§é‡<span class="hljs-keyword">if</span>-<span class="hljs-keyword">else</span>åˆ¤æ–­
â””â”€ ä»£ç éš¾ä»¥ç»´æŠ¤
</code></pre>
<h4 data-id="heading-4">AgentScopeçš„è§£å†³æ–¹æ¡ˆï¼šModelæ¥å£ + Formatter</h4>
<pre><code class="hljs language-markdown" lang="markdown">Agent â† â†’ Modelæ¥å£ï¼ˆç»Ÿä¸€ï¼‰ â† â†’ Formatter â† â†’ LLM API
<span class="hljs-code">        â”‚                              â”‚
        â”‚                              â”œâ”€ OpenAIFormatter
        â”‚                              â”œâ”€ DashScopeFormatter
        â”‚                              â”œâ”€ AnthropicFormatter
        â”‚                              â””â”€ GeminiFormatter
        â”‚
        â””â”€ ä¸éœ€è¦å…³å¿ƒå…·ä½“çš„LLMï¼Œåªéœ€è°ƒç”¨Modelæ¥å£
</span></code></pre>
<h3 data-id="heading-5">3.1.2 Modelæ¥å£çš„æ ¸å¿ƒæ–¹æ³•</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Model</span> {
    
    <span class="hljs-comment">/**
     * æµå¼è°ƒç”¨LLM
     * <span class="hljs-doctag">@param</span> messages æ¶ˆæ¯åˆ—è¡¨ï¼ˆç»Ÿä¸€çš„AgentScope Msgæ ¼å¼ï¼‰
     * <span class="hljs-doctag">@param</span> tools å·¥å…·å®šä¹‰åˆ—è¡¨ï¼ˆå¯é€‰ï¼‰
     * <span class="hljs-doctag">@param</span> options ç”Ÿæˆå‚æ•°ï¼ˆå¯é€‰ï¼‰
     * <span class="hljs-doctag">@return</span> Flux&lt;ChatResponse&gt; å“åº”æµ
     */</span>
    Flux&lt;ChatResponse&gt; <span class="hljs-title function_">stream</span><span class="hljs-params">(
        List&lt;Msg&gt; messages,
        List&lt;ToolSchema&gt; tools,
        GenerateOptions options
    )</span>;
    
    <span class="hljs-comment">/**
     * è·å–æ¨¡å‹åç§°
     */</span>
    String <span class="hljs-title function_">getModelName</span><span class="hljs-params">()</span>;
}
</code></pre>
<p><strong>è®¾è®¡ç‰¹ç‚¹</strong>ï¼š</p>
<pre><code class="hljs language-swift" lang="swift">ç‰¹ç‚¹<span class="hljs-number">1</span>ï¼šå“åº”å¼
<span class="hljs-operator">â”œâ”€</span> è¿”å›<span class="hljs-type">Flux</span>&lt;<span class="hljs-type">ChatResponse</span>&gt;ï¼Œæ”¯æŒæµå¼å¤„ç†
<span class="hljs-operator">â”œâ”€</span> å……åˆ†åˆ©ç”¨å¼‚æ­¥ç‰¹æ€§ï¼Œæé«˜ååé‡
<span class="hljs-operator">â””â”€</span> æ”¯æŒèƒŒå‹ï¼ˆ<span class="hljs-type">Backpressureï¼‰</span>

ç‰¹ç‚¹<span class="hljs-number">2</span>ï¼šé€šç”¨æ€§
<span class="hljs-operator">â”œâ”€</span> æ‰€æœ‰å‚æ•°éƒ½æ˜¯<span class="hljs-type">AgentScopeçš„ç»Ÿä¸€æ ¼å¼</span>
<span class="hljs-operator">â”œâ”€</span> <span class="hljs-type">Formatterè´Ÿè´£è½¬æ¢ä¸ºå…·ä½“LLMçš„æ ¼å¼</span>
<span class="hljs-operator">â””â”€</span> <span class="hljs-type">Agentæ— éœ€å…³å¿ƒLLMçš„å…·ä½“ç±»å‹</span>

ç‰¹ç‚¹<span class="hljs-number">3</span>ï¼šå¯æ‰©å±•æ€§
<span class="hljs-operator">â”œâ”€</span> æ–°å¢<span class="hljs-type">LLMæ—¶ï¼Œåªéœ€å®ç°Modelæ¥å£</span>
<span class="hljs-operator">â”œâ”€</span> ç¼–å†™å¯¹åº”çš„<span class="hljs-type">Formatter</span>
<span class="hljs-operator">â””â”€</span> æ—¢æœ‰ä»£ç æ— éœ€ä¿®æ”¹
</code></pre>
<h3 data-id="heading-6">3.1.3 GenerateOptions - ç”Ÿæˆå‚æ•°</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// GenerateOptionsç”¨äºæ§åˆ¶LLMçš„è¡Œä¸º</span>
<span class="hljs-type">GenerateOptions</span> <span class="hljs-variable">options</span> <span class="hljs-operator">=</span> GenerateOptions.builder()
    .temperature(<span class="hljs-number">0.7</span>)              <span class="hljs-comment">// æ¸©åº¦ï¼ˆ0-1ï¼Œè¶Šé«˜è¶Šæœ‰åˆ›æ„ï¼‰</span>
    .topP(<span class="hljs-number">0.9</span>)                     <span class="hljs-comment">// æ ¸é‡‡æ ·ï¼ˆå½±å“å¤šæ ·æ€§ï¼‰</span>
    .maxTokens(<span class="hljs-number">2000</span>)               <span class="hljs-comment">// æœ€å¤§è¾“å‡ºtokenæ•°</span>
    .frequencyPenalty(<span class="hljs-number">0.5</span>)         <span class="hljs-comment">// é¢‘ç‡æƒ©ç½šï¼ˆæŠ‘åˆ¶é‡å¤ï¼‰</span>
    .presencePenalty(<span class="hljs-number">0.5</span>)          <span class="hljs-comment">// å­˜åœ¨æƒ©ç½šï¼ˆé¼“åŠ±æ–°è¯é¢˜ï¼‰</span>
    .stop(List.of(<span class="hljs-string">"END"</span>))          <span class="hljs-comment">// åœæ­¢è¯</span>
    .seed(<span class="hljs-number">42</span>)                      <span class="hljs-comment">// éšæœºç§å­ï¼ˆå¤ç°ç»“æœï¼‰</span>
    .toolChoice(ToolChoice.AUTO)   <span class="hljs-comment">// å·¥å…·é€‰æ‹©ç­–ç•¥</span>
    .executionConfig(ExecutionConfig.builder()
        .timeout(Duration.ofMinutes(<span class="hljs-number">1</span>))
        .maxAttempts(<span class="hljs-number">3</span>)            <span class="hljs-comment">// é‡è¯•æ¬¡æ•°</span>
        .build())
    .build();

<span class="hljs-type">Msg</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> agent.call(userMsg, options).block();
</code></pre>
<h4 data-id="heading-7">å‚æ•°è¯¦è§£</h4>









































<table><thead><tr><th>å‚æ•°</th><th>èŒƒå›´</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>temperature</td><td>0-2</td><td>0.7</td><td>æ§åˆ¶è¾“å‡ºçš„éšæœºæ€§ï¼Œè¶Šé«˜è¶Šæœ‰åˆ›æ„</td></tr><tr><td>topP</td><td>0-1</td><td>0.9</td><td>æ ¸é‡‡æ ·ï¼Œç”¨top_pæ¯”ä¾‹æœ€å¯èƒ½çš„token</td></tr><tr><td>maxTokens</td><td>1+</td><td>é»˜è®¤å€¼</td><td>é™åˆ¶å•æ¬¡è¾“å‡ºçš„æœ€å¤§tokenæ•°</td></tr><tr><td>frequencyPenalty</td><td>-2-2</td><td>0</td><td>å¯¹é‡å¤tokençš„æƒ©ç½š</td></tr><tr><td>presencePenalty</td><td>-2-2</td><td>0</td><td>é¼“åŠ±æ¨¡å‹å¼•å…¥æ–°æ¦‚å¿µ</td></tr></tbody></table>
<h4 data-id="heading-8">ç”Ÿäº§åœºæ™¯ï¼šæ ¹æ®ç”¨é€”è°ƒæ•´å‚æ•°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åœºæ™¯1ï¼šåˆ›æ„å†™ä½œï¼ˆéœ€è¦å¤šæ ·æ€§ï¼‰</span>
<span class="hljs-type">GenerateOptions</span> <span class="hljs-variable">creativeOptions</span> <span class="hljs-operator">=</span> GenerateOptions.builder()
    .temperature(<span class="hljs-number">1.2</span>)     <span class="hljs-comment">// æ›´é«˜çš„åˆ›æ„åº¦</span>
    .topP(<span class="hljs-number">0.95</span>)           <span class="hljs-comment">// æ›´å¤šçš„å¤šæ ·æ€§</span>
    .maxTokens(<span class="hljs-number">4000</span>)      <span class="hljs-comment">// å…è®¸æ›´é•¿çš„è¾“å‡º</span>
    .build();

<span class="hljs-type">Msg</span> <span class="hljs-variable">story</span> <span class="hljs-operator">=</span> agent.call(userMsg, creativeOptions).block();

<span class="hljs-comment">// åœºæ™¯2ï¼šæŠ€æœ¯é—®ç­”ï¼ˆéœ€è¦å‡†ç¡®æ€§ï¼‰</span>
<span class="hljs-type">GenerateOptions</span> <span class="hljs-variable">technicalOptions</span> <span class="hljs-operator">=</span> GenerateOptions.builder()
    .temperature(<span class="hljs-number">0.3</span>)     <span class="hljs-comment">// ä½æ¸©åº¦ï¼Œæ›´ç¡®å®šçš„ç­”æ¡ˆ</span>
    .topP(<span class="hljs-number">0.8</span>)            <span class="hljs-comment">// æ›´ä¿å®ˆçš„é‡‡æ ·</span>
    .maxTokens(<span class="hljs-number">1000</span>)      <span class="hljs-comment">// ç®€æ˜æ‰¼è¦</span>
    .build();

<span class="hljs-type">Msg</span> <span class="hljs-variable">answer</span> <span class="hljs-operator">=</span> agent.call(userMsg, technicalOptions).block();

<span class="hljs-comment">// åœºæ™¯3ï¼šä»£ç ç”Ÿæˆï¼ˆéœ€è¦æ ¼å¼æ­£ç¡®ï¼‰</span>
<span class="hljs-type">GenerateOptions</span> <span class="hljs-variable">codeOptions</span> <span class="hljs-operator">=</span> GenerateOptions.builder()
    .temperature(<span class="hljs-number">0.2</span>)     <span class="hljs-comment">// éå¸¸ä½ï¼Œç¡®ä¿æ ¼å¼</span>
    .stop(List.of(<span class="hljs-string">"```"</span>, <span class="hljs-string">"\n\n"</span>))  <span class="hljs-comment">// åœæ­¢è¯</span>
    .maxTokens(<span class="hljs-number">2000</span>)
    .build();

<span class="hljs-type">Msg</span> <span class="hljs-variable">code</span> <span class="hljs-operator">=</span> agent.call(userMsg, codeOptions).block();
</code></pre>
<hr/>
<h2 data-id="heading-9">3.2 å¤šæ¨¡å‹æ”¯æŒ</h2>
<h3 data-id="heading-10">3.2.1 æ”¯æŒçš„LLMå‚å•†</h3>
<h4 data-id="heading-11">1. DashScopeï¼ˆé˜¿é‡Œäº‘é€šä¹‰åƒé—®ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆ›å»ºDashScopeæ¨¡å‹</span>
<span class="hljs-type">DashScopeChatModel</span> <span class="hljs-variable">model</span> <span class="hljs-operator">=</span> DashScopeChatModel.builder()
    .apiKey(System.getenv(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>))
    .modelName(<span class="hljs-string">"qwen-plus"</span>)         <span class="hljs-comment">// æˆ– qwen-turbo, qwen-maxç­‰</span>
    .requestTimeout(Duration.ofSeconds(<span class="hljs-number">30</span>))
    .build();

<span class="hljs-comment">// åœ¨ReActAgentä¸­ä½¿ç”¨</span>
<span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
    .name(<span class="hljs-string">"Assistant"</span>)
    .model(model)
    .build();
</code></pre>
<p><strong>DashScopeä¼˜åŠ¿</strong>ï¼š</p>
<pre><code class="hljs">âœ“ å›½å†…å‚å•†ï¼Œå»¶è¿Ÿä½ï¼Œä»·æ ¼ä¾¿å®œ
âœ“ æ”¯æŒä¸­æ–‡ä¼˜åŒ–
âœ“ æ”¯æŒé•¿æ–‡æœ¬è¾“å…¥ï¼ˆ200K tokensï¼‰
âœ“ æ”¯æŒæ¨ç†æ¨¡å¼ï¼ˆqwen-reasoningï¼‰
</code></pre>
<h4 data-id="heading-12">2. OpenAI GPT</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆ›å»ºOpenAIæ¨¡å‹</span>
<span class="hljs-type">OpenAIChatModel</span> <span class="hljs-variable">model</span> <span class="hljs-operator">=</span> OpenAIChatModel.builder()
    .apiKey(System.getenv(<span class="hljs-string">"OPENAI_API_KEY"</span>))
    .modelName(<span class="hljs-string">"gpt-4o"</span>)            <span class="hljs-comment">// æˆ– gpt-4-turbo, gpt-3.5-turbo</span>
    .baseUrl(<span class="hljs-string">"https://api.openai.com/v1"</span>)  <span class="hljs-comment">// æ”¯æŒè‡ªå®šä¹‰ç«¯ç‚¹</span>
    .build();

<span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
    .model(model)
    .build();
</code></pre>
<p><strong>OpenAIä¼˜åŠ¿</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">âœ“ ä¸šç•Œæ ‡å‡†ï¼ŒåŠŸèƒ½å®Œæ•´
âœ“ æ”¯æŒ<span class="hljs-title class_">Vision</span>ï¼ˆå›¾åƒç†è§£ï¼‰
âœ“ æ”¯æŒ<span class="hljs-title class_">JSON</span> <span class="hljs-title class_">Mode</span>ï¼ˆç»“æ„åŒ–è¾“å‡ºï¼‰
âœ“ ç¤¾åŒºèµ„æºä¸°å¯Œ
</code></pre>
<h4 data-id="heading-13">3. Anthropic Claude</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆ›å»ºAnthropicæ¨¡å‹</span>
<span class="hljs-type">AnthropicChatModel</span> <span class="hljs-variable">model</span> <span class="hljs-operator">=</span> AnthropicChatModel.builder()
    .apiKey(System.getenv(<span class="hljs-string">"ANTHROPIC_API_KEY"</span>))
    .modelName(<span class="hljs-string">"claude-sonnet-4-5"</span>)  <span class="hljs-comment">// æœ€æ–°Claudeæ¨¡å‹</span>
    .build();

<span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
    .model(model)
    .build();
</code></pre>
<p><strong>Claudeä¼˜åŠ¿</strong>ï¼š</p>
<pre><code class="hljs">âœ“ æ¨ç†èƒ½åŠ›å¼º
âœ“ æ”¯æŒæ€è€ƒè¿‡ç¨‹ï¼ˆå¯è§æ¨ç†æ­¥éª¤ï¼‰
âœ“ 100Kæ–‡æœ¬çª—å£ï¼ˆæŸäº›ç‰ˆæœ¬æ”¯æŒ200Kï¼‰
âœ“ å®‰å…¨æ€§å¥½
</code></pre>
<h4 data-id="heading-14">4. Google Gemini</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ–¹å¼1ï¼šä½¿ç”¨Gemini API</span>
<span class="hljs-type">GeminiChatModel</span> <span class="hljs-variable">model</span> <span class="hljs-operator">=</span> GeminiChatModel.builder()
    .apiKey(System.getenv(<span class="hljs-string">"GEMINI_API_KEY"</span>))
    .modelName(<span class="hljs-string">"gemini-2.0-flash"</span>)
    .build();

<span class="hljs-comment">// æ–¹å¼2ï¼šä½¿ç”¨Vertex AIï¼ˆGCPï¼‰</span>
<span class="hljs-type">GeminiChatModel</span> <span class="hljs-variable">model</span> <span class="hljs-operator">=</span> GeminiChatModel.builder()
    .modelName(<span class="hljs-string">"gemini-2.0-flash"</span>)
    .project(<span class="hljs-string">"your-gcp-project-id"</span>)
    .location(<span class="hljs-string">"us-central1"</span>)
    .vertexAI(<span class="hljs-literal">true</span>)
    .build();

<span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
    .model(model)
    .build();
</code></pre>
<p><strong>Geminiä¼˜åŠ¿</strong>ï¼š</p>
<pre><code class="hljs">âœ“ æ”¯æŒå¤šæ¨¡æ€ï¼ˆè§†è§‰ã€éŸ³é¢‘ï¼‰
âœ“ ä¸Šä¸‹æ–‡çª—å£å¤§ï¼ˆ1000K+ï¼‰
âœ“ æ¨ç†èƒ½åŠ›å¼º
âœ“ ä»·æ ¼æœ‰ç«äº‰åŠ›
</code></pre>
<h3 data-id="heading-15">3.2.2 æ¨¡å‹å…¼å®¹æ€§ä¸é€‰æ‹©æŒ‡å—</h3>
<pre><code class="hljs language-scss" lang="scss">é€‰æ‹©æ ‡å‡†ï¼š

â”Œâ”€ åŠŸèƒ½éœ€æ±‚
â”‚  â”œâ”€ éœ€è¦Visionï¼ˆå›¾åƒç†è§£ï¼‰ï¼Ÿ â†’ OpenAI/Claude/Gemini
â”‚  â”œâ”€ éœ€è¦æ¨ç†èƒ½åŠ›ï¼Ÿ â†’ Claude/Gemini/<span class="hljs-built_in">DashScope</span>(qwen-reasoning)
â”‚  â”œâ”€ éœ€è¦é•¿æ–‡æœ¬ï¼Ÿ â†’ <span class="hljs-built_in">Gemini</span>(<span class="hljs-number">1</span>M) &gt; <span class="hljs-built_in">DashScope</span>(<span class="hljs-number">200</span>K) &gt; <span class="hljs-built_in">Claude</span>(<span class="hljs-number">100</span>K)
â”‚  â””â”€ éœ€è¦ç»“æ„åŒ–è¾“å‡ºï¼Ÿ â†’ <span class="hljs-built_in">OpenAI</span>(JSON Mode) âœ“
â”‚
â”œâ”€ æˆæœ¬è€ƒè™‘
â”‚  â”œâ”€ æˆæœ¬æ•æ„Ÿ â†’ <span class="hljs-built_in">DashScope</span>(æœ€ä¾¿å®œ)
â”‚  â”œâ”€ å‡è¡¡ â†’ OpenAI/Anthropic
â”‚  â””â”€ ä¸é™æˆæœ¬ â†’ <span class="hljs-built_in">Claude</span>(è´¨é‡æœ€å¥½)
â”‚
â””â”€ åœ°ç†ä½ç½®
   â”œâ”€ å›½å†… â†’ DashScopeï¼ˆä½å»¶è¿Ÿï¼‰
   â”œâ”€ å›½é™… â†’ OpenAIï¼ˆç¨³å®šæ€§å¥½ï¼‰
   â””â”€ GCPç”¨æˆ· â†’ Gemini/Vertex AI
</code></pre>
<h3 data-id="heading-16">3.2.3 å¤šæ¨¡å‹ç®¡ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åœºæ™¯ï¼šåŒæ—¶ä½¿ç”¨å¤šä¸ªæ¨¡å‹</span>

<span class="hljs-comment">// å¿«é€Ÿå›å¤ç”¨ä¾¿å®œçš„æ¨¡å‹</span>
<span class="hljs-type">Model</span> <span class="hljs-variable">fastModel</span> <span class="hljs-operator">=</span> DashScopeChatModel.builder()
    .apiKey(System.getenv(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>))
    .modelName(<span class="hljs-string">"qwen-turbo"</span>)  <span class="hljs-comment">// å¿«é€Ÿä¸”ä¾¿å®œ</span>
    .build();

<span class="hljs-comment">// å¤æ‚ä»»åŠ¡ç”¨å¼ºå¤§çš„æ¨¡å‹</span>
<span class="hljs-type">Model</span> <span class="hljs-variable">powerfulModel</span> <span class="hljs-operator">=</span> OpenAIChatModel.builder()
    .apiKey(System.getenv(<span class="hljs-string">"OPENAI_API_KEY"</span>))
    .modelName(<span class="hljs-string">"gpt-4o"</span>)      <span class="hljs-comment">// åŠŸèƒ½å…¨é¢</span>
    .build();

<span class="hljs-comment">// è·¯ç”±å†³ç­–</span>
<span class="hljs-keyword">public</span> Model <span class="hljs-title function_">selectModel</span><span class="hljs-params">(String taskType)</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">switch</span>(taskType) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">"chat"</span> -&gt; fastModel;        <span class="hljs-comment">// ç®€å•å¯¹è¯ç”¨å¿«é€Ÿæ¨¡å‹</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">"analysis"</span> -&gt; powerfulModel; <span class="hljs-comment">// å¤æ‚åˆ†æç”¨å¼ºå¤§æ¨¡å‹</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">"vision"</span> -&gt; visionModel;     <span class="hljs-comment">// è§†è§‰ä»»åŠ¡ç”¨Visionæ¨¡å‹</span>
        <span class="hljs-keyword">default</span> -&gt; fastModel;
    };
}

<span class="hljs-comment">// Agentä¸­ä½¿ç”¨</span>
<span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
    .name(<span class="hljs-string">"SmartAssistant"</span>)
    .model(selectModel(taskType))  <span class="hljs-comment">// åŠ¨æ€é€‰æ‹©æ¨¡å‹</span>
    .build();
</code></pre>
<hr/>
<h2 data-id="heading-17">3.3 æµå¼å“åº”ä¸å“åº”å¼ç¼–ç¨‹</h2>
<h3 data-id="heading-18">3.3.1 ä¸ºä»€ä¹ˆä½¿ç”¨æµå¼å“åº”ï¼Ÿ</h3>
<h4 data-id="heading-19">ä¼ ç»Ÿéæµå¼æ–¹å¼çš„é—®é¢˜</h4>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·è¾“å…¥ â†’ ç­‰å¾…... â†’ ç­‰å¾…... â†’ æ¨¡å‹å®Œæˆ â†’ è¿”å›å®Œæ•´å›å¤
<span class="hljs-code">                    (å»¶è¿Ÿæ„Ÿå¾ˆå¼º)
</span></code></pre>
<h4 data-id="heading-20">æµå¼å“åº”çš„ä¼˜åŠ¿</h4>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·è¾“å…¥ â†’ Token1 â†’ Token2 â†’ Token3 â†’ ... â†’ å®Œæˆ
<span class="hljs-code">          (å®æ—¶å±•ç¤ºï¼Œç”¨æˆ·æ„Ÿåˆ°æ›´å¿«)
</span></code></pre>
<p><strong>ç”Ÿäº§ä»·å€¼</strong>ï¼š</p>
<pre><code class="hljs">âœ“ ç”¨æˆ·ä½“éªŒæ›´å¥½ï¼ˆå®æ—¶åé¦ˆï¼Œä¸æ˜¾å¾—å¡é¡¿ï¼‰
âœ“ æ”¯æŒå®æ—¶å±•ç¤ºæ¨ç†è¿‡ç¨‹ï¼ˆå¦‚Claudeçš„æ€è€ƒè¿‡ç¨‹ï¼‰
âœ“ æ›´å¿«å‘ç°é”™è¯¯ï¼ˆå¦‚å·¥å…·è°ƒç”¨é”™è¯¯ï¼‰
âœ“ æ”¯æŒå¤§æ–‡æœ¬è¾“å‡ºï¼ˆä¸éœ€ç­‰å¾…å…¨éƒ¨ç”Ÿæˆï¼‰
</code></pre>
<h3 data-id="heading-21">3.3.2 æµå¼APIçš„ä½¿ç”¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ–¹å¼1ï¼šåŸºç¡€çš„æµå¼å¤„ç†</span>
Flux&lt;ChatResponse&gt; responses = model.stream(
    List.of(userMessage),
    <span class="hljs-literal">null</span>,  <span class="hljs-comment">// æ²¡æœ‰å·¥å…·</span>
    <span class="hljs-literal">null</span>   <span class="hljs-comment">// ä½¿ç”¨é»˜è®¤å‚æ•°</span>
);

responses.subscribe(
    response -&gt; System.out.print(extractText(response)),  <span class="hljs-comment">// æ¯æ”¶åˆ°ä¸€ä¸ªchunkå°±æ‰“å°</span>
    error -&gt; System.err.println(<span class="hljs-string">"Error: "</span> + error),
    () -&gt; System.out.println(<span class="hljs-string">"\n[å®Œæˆ]"</span>)
);

<span class="hljs-comment">// æ–¹å¼2ï¼šæ”¶é›†æ‰€æœ‰responsesåå¤„ç†</span>
<span class="hljs-type">String</span> <span class="hljs-variable">fullResponse</span> <span class="hljs-operator">=</span> responses
    .map(response -&gt; extractText(response))
    .collect(Collectors.joining())
    .block();  <span class="hljs-comment">// ç­‰å¾…å…¨éƒ¨å®Œæˆ</span>
System.out.println(fullResponse);

<span class="hljs-comment">// æ–¹å¼3ï¼šå¤„ç†æ—¶è¿›è¡Œè¿‡æ»¤å’Œè½¬æ¢</span>
responses
    .filter(response -&gt; response.getContent() != <span class="hljs-literal">null</span> &amp;&amp; !response.getContent().isEmpty())
    .map(response -&gt; extractText(response))
    .doOnNext(chunk -&gt; updateUI(chunk))  <span class="hljs-comment">// æ›´æ–°UI</span>
    .onErrorResume(error -&gt; handleError(error))
    .doFinally(signal -&gt; cleanup())
    .subscribe();
</code></pre>
<h3 data-id="heading-22">3.3.3 å®æ—¶æ¨ç†è¿‡ç¨‹å±•ç¤º</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŸäº›æ¨¡å‹ï¼ˆå¦‚Claudeï¼‰æ”¯æŒè¿”å›æ€è€ƒè¿‡ç¨‹</span>

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">demonstrateReasoningStream</span><span class="hljs-params">()</span> {
    <span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
        .name(<span class="hljs-string">"ThinkingBot"</span>)
        .model(AnthropicChatModel.builder()
            .apiKey(System.getenv(<span class="hljs-string">"ANTHROPIC_API_KEY"</span>))
            .modelName(<span class="hljs-string">"claude-opus"</span>)  <span class="hljs-comment">// æ”¯æŒæ€è€ƒè¿‡ç¨‹çš„æ¨¡å‹</span>
            .build())
        .build();
    
    <span class="hljs-comment">// æµå¼è°ƒç”¨</span>
    agent.stream(
        Msg.builder().textContent(<span class="hljs-string">"è§£é‡Šé‡å­è®¡ç®—çš„åŸºæœ¬åŸç†"</span>)
        .build()
    ).subscribe(event -&gt; {
        <span class="hljs-comment">// æ ¹æ®äº‹ä»¶ç±»å‹å¤„ç†</span>
        <span class="hljs-keyword">switch</span>(event) {
            <span class="hljs-keyword">case</span> ReasoningChunkEvent reasoning -&gt; 
                System.out.print(<span class="hljs-string">"ğŸ’­ "</span> + reasoning.getDelta());  <span class="hljs-comment">// æ˜¾ç¤ºæ€è€ƒè¿‡ç¨‹</span>
            <span class="hljs-keyword">case</span> ActingChunkEvent acting -&gt; 
                System.out.print(<span class="hljs-string">"ğŸ”§ "</span> + acting.getDelta());     <span class="hljs-comment">// æ˜¾ç¤ºå·¥å…·è°ƒç”¨</span>
            <span class="hljs-keyword">default</span> -&gt; 
                System.out.print(<span class="hljs-string">"ğŸ“ "</span> + event.getDelta());      <span class="hljs-comment">// æ˜¾ç¤ºæœ€ç»ˆç­”æ¡ˆ</span>
        }
    });
}
</code></pre>
<h3 data-id="heading-23">3.3.4 WebSocketå®æ—¶æµå¼ä¼ è¾“</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Spring Boot Controllerç¤ºä¾‹ï¼šå®æ—¶æµå¼è¾“å‡º</span>

<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping("/api/agent")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AgentController</span> {
    
    <span class="hljs-meta">@PostMapping(value = "/stream", produces = MediaType.TEXT_EVENT_STREAM_VALUE)</span>
    <span class="hljs-keyword">public</span> SseEmitter <span class="hljs-title function_">stream</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> String userInput)</span> {
        <span class="hljs-type">SseEmitter</span> <span class="hljs-variable">emitter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SseEmitter</span>(<span class="hljs-number">60000L</span>);  <span class="hljs-comment">// 60ç§’è¶…æ—¶</span>
        
        Executors.newSingleThreadExecutor().execute(() -&gt; {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// è°ƒç”¨Agentçš„æµå¼API</span>
                agent.stream(
                    Msg.builder().textContent(userInput).build()
                ).subscribe(
                    event -&gt; {
                        <span class="hljs-keyword">try</span> {
                            <span class="hljs-comment">// å®æ—¶å‘é€ç»™å®¢æˆ·ç«¯</span>
                            emitter.send(SseEmitter.event()
                                .id(event.getMessageId())
                                .data(event.getDelta())
                                .build());
                        } <span class="hljs-keyword">catch</span> (IOException e) {
                            emitter.completeWithError(e);
                        }
                    },
                    error -&gt; {
                        <span class="hljs-keyword">try</span> {
                            emitter.send(SseEmitter.event()
                                .id(<span class="hljs-string">"error"</span>)
                                .data(<span class="hljs-string">"Error: "</span> + error.getMessage())
                                .build());
                            emitter.complete();
                        } <span class="hljs-keyword">catch</span> (IOException e) {
                            emitter.completeWithError(e);
                        }
                    },
                    () -&gt; {
                        <span class="hljs-keyword">try</span> {
                            emitter.send(SseEmitter.event()
                                .id(<span class="hljs-string">"done"</span>)
                                .data(<span class="hljs-string">"å®Œæˆ"</span>)
                                .build());
                            emitter.complete();
                        } <span class="hljs-keyword">catch</span> (IOException e) {
                            emitter.completeWithError(e);
                        }
                    }
                );
            } <span class="hljs-keyword">catch</span> (Exception e) {
                emitter.completeWithError(e);
            }
        });
        
        <span class="hljs-keyword">return</span> emitter;
    }
}

<span class="hljs-comment">// å‰ç«¯JavaScriptä»£ç </span>
<span class="hljs-type">const</span> <span class="hljs-variable">eventSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventSource</span>(<span class="hljs-string">'/api/agent/stream'</span>, {
    method: <span class="hljs-string">'POST'</span>,
    body: JSON.stringify({userInput: <span class="hljs-string">"ä½ å¥½"</span>})
});

eventSource.onmessage = (event) =&gt; {
    <span class="hljs-keyword">if</span> (event.id === <span class="hljs-string">'done'</span>) {
        eventSource.close();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event.id === <span class="hljs-string">'error'</span>) {
        console.error(event.data);
    } <span class="hljs-keyword">else</span> {
        document.getElementById(<span class="hljs-string">'response'</span>).innerHTML += event.data;
    }
};
</code></pre>
<hr/>
<h2 data-id="heading-24">3.4 Formatterä¸æ¶ˆæ¯æ ¼å¼è½¬æ¢</h2>
<h3 data-id="heading-25">3.4.1 ä¸ºä»€ä¹ˆéœ€è¦Formatterï¼Ÿ</h3>
<p>æ¯ä¸ªLLMæä¾›å•†çš„APIæ ¼å¼éƒ½ä¸åŒï¼š</p>
<pre><code class="hljs language-json" lang="json">DashScopeæœŸæœ›çš„æ ¼å¼ï¼š
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"qwen-plus"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"messages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>...<span class="hljs-punctuation">]</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"parameters"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"temperature"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.7</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

OpenAIæœŸæœ›çš„æ ¼å¼ï¼š
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"gpt-4"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"messages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>...<span class="hljs-punctuation">]</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"temperature"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.7</span>
<span class="hljs-punctuation">}</span>

AnthropicæœŸæœ›çš„æ ¼å¼ï¼š
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"claude-opus"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"messages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>...<span class="hljs-punctuation">]</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"temperature"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.7</span>
<span class="hljs-punctuation">}</span>

GeminiæœŸæœ›çš„æ ¼å¼ï¼š
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"generationConfig"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"temperature"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.7</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"contents"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"parts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>...<span class="hljs-punctuation">]</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>Formatterçš„ä½œç”¨</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">AgentScope Msgæ ¼å¼ 
<span class="hljs-code">    â†“ (Formatterè½¬æ¢)
    â”œâ”€ DashScopeFormatter â†’ DashScope APIæ ¼å¼
    â”œâ”€ OpenAIFormatter â†’ OpenAI APIæ ¼å¼
    â”œâ”€ AnthropicFormatter â†’ Anthropic APIæ ¼å¼
    â””â”€ GeminiFormatter â†’ Gemini APIæ ¼å¼
</span></code></pre>
<h3 data-id="heading-26">3.4.2 Formatterçš„è‡ªåŠ¨é€‰æ‹©</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ–¹å¼1ï¼šè‡ªåŠ¨ä½¿ç”¨é»˜è®¤Formatter</span>
<span class="hljs-type">DashScopeChatModel</span> <span class="hljs-variable">model1</span> <span class="hljs-operator">=</span> DashScopeChatModel.builder()
    .apiKey(key)
    .modelName(<span class="hljs-string">"qwen-plus"</span>)
    <span class="hljs-comment">// è‡ªåŠ¨ä½¿ç”¨ DashScopeChatFormatter</span>
    .build();

<span class="hljs-comment">// æ–¹å¼2ï¼šæ˜¾å¼æŒ‡å®šFormatter</span>
<span class="hljs-type">DashScopeChatModel</span> <span class="hljs-variable">model2</span> <span class="hljs-operator">=</span> DashScopeChatModel.builder()
    .apiKey(key)
    .modelName(<span class="hljs-string">"qwen-plus"</span>)
    .formatter(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DashScopeMultiAgentFormatter</span>())  <span class="hljs-comment">// ç”¨äºå¤šAgentåœºæ™¯</span>
    .build();

<span class="hljs-comment">// æ–¹å¼3ï¼šè‡ªå®šä¹‰Formatter</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomFormatter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Formatter</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">format</span><span class="hljs-params">(List&lt;Msg&gt; messages, List&lt;ToolSchema&gt; tools)</span> {
        <span class="hljs-comment">// è‡ªå®šä¹‰æ ¼å¼åŒ–é€»è¾‘</span>
        <span class="hljs-keyword">return</span> customFormattedRequest;
    }
}

<span class="hljs-type">DashScopeChatModel</span> <span class="hljs-variable">model3</span> <span class="hljs-operator">=</span> DashScopeChatModel.builder()
    .apiKey(key)
    .modelName(<span class="hljs-string">"qwen-plus"</span>)
    .formatter(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomFormatter</span>())
    .build();
</code></pre>
<h3 data-id="heading-27">3.4.3 å¤šæ¨¡æ€å†…å®¹çš„Formatterå¤„ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŒ…å«å›¾åƒçš„æ¶ˆæ¯å¦‚ä½•è½¬æ¢ï¼Ÿ</span>

<span class="hljs-type">Msg</span> <span class="hljs-variable">multimodalMsg</span> <span class="hljs-operator">=</span> Msg.builder()
    .role(MsgRole.USER)
    .content(
        TextBlock.builder().text(<span class="hljs-string">"åˆ†æè¿™å¼ å›¾ç‰‡"</span>).build(),
        ImageBlock.builder()
            .source(Base64Source.builder()
                .data(base64Image)
                .mediaType(<span class="hljs-string">"image/png"</span>)
                .build())
            .build()
    )
    .build();

<span class="hljs-comment">// DashScopeFormatterè½¬æ¢åï¼š</span>
<span class="hljs-comment">/*
{
  "messages": [{
    "role": "user",
    "content": [
      {"type": "text", "text": "åˆ†æè¿™å¼ å›¾ç‰‡"},
      {"type": "image", "image": "base64_image_data"}
    ]
  }]
}
*/</span>

<span class="hljs-comment">// OpenAIFormatterè½¬æ¢åï¼š</span>
<span class="hljs-comment">/*
{
  "messages": [{
    "role": "user",
    "content": [
      {"type": "text", "text": "åˆ†æè¿™å¼ å›¾ç‰‡"},
      {"type": "image_url", "image_url": {"url": "data:image/png;base64,..."}}
    ]
  }]
}
*/</span>
</code></pre>
<hr/>
<h2 data-id="heading-28">3.5 ç”Ÿäº§åœºæ™¯ç¤ºä¾‹</h2>
<h3 data-id="heading-29">3.5.1 å¤šæ¨¡å‹æ™ºèƒ½è·¯ç”±</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IntelligentModelRouter</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DashScopeChatModel fastModel;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> OpenAIChatModel standardModel;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AnthropicChatModel powerfulModel;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">IntelligentModelRouter</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>.fastModel = DashScopeChatModel.builder()
            .apiKey(System.getenv(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>))
            .modelName(<span class="hljs-string">"qwen-turbo"</span>)
            .build();
        
        <span class="hljs-built_in">this</span>.standardModel = OpenAIChatModel.builder()
            .apiKey(System.getenv(<span class="hljs-string">"OPENAI_API_KEY"</span>))
            .modelName(<span class="hljs-string">"gpt-4o"</span>)
            .build();
        
        <span class="hljs-built_in">this</span>.powerfulModel = AnthropicChatModel.builder()
            .apiKey(System.getenv(<span class="hljs-string">"ANTHROPIC_API_KEY"</span>))
            .modelName(<span class="hljs-string">"claude-opus"</span>)
            .build();
    }
    
    <span class="hljs-comment">/**
     * æ ¹æ®ä»»åŠ¡å¤æ‚åº¦å’Œæˆæœ¬çº¦æŸé€‰æ‹©æœ€ä¼˜æ¨¡å‹
     */</span>
    <span class="hljs-keyword">public</span> Model <span class="hljs-title function_">selectModel</span><span class="hljs-params">(String userQuery, QueryContext context)</span> {
        <span class="hljs-comment">// åˆ†ææŸ¥è¯¢å¤æ‚åº¦</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">complexity</span> <span class="hljs-operator">=</span> analyzeComplexity(userQuery);
        <span class="hljs-type">double</span> <span class="hljs-variable">costBudget</span> <span class="hljs-operator">=</span> context.getCostBudget();
        
        <span class="hljs-comment">// ç®€å•æŸ¥è¯¢ + æœ‰æˆæœ¬é™åˆ¶ â†’ å¿«é€Ÿæ¨¡å‹</span>
        <span class="hljs-keyword">if</span> (complexity &lt; <span class="hljs-number">3</span> &amp;&amp; costBudget &lt; <span class="hljs-number">0.01</span>) {
            <span class="hljs-keyword">return</span> fastModel;
        }
        
        <span class="hljs-comment">// ä¸­ç­‰å¤æ‚åº¦ â†’ æ ‡å‡†æ¨¡å‹</span>
        <span class="hljs-keyword">if</span> (complexity &lt; <span class="hljs-number">6</span>) {
            <span class="hljs-keyword">return</span> standardModel;
        }
        
        <span class="hljs-comment">// å¤æ‚ä»»åŠ¡ + æ— æˆæœ¬é™åˆ¶ â†’ å¼ºå¤§æ¨¡å‹</span>
        <span class="hljs-keyword">if</span> (costBudget &gt; <span class="hljs-number">0.1</span>) {
            <span class="hljs-keyword">return</span> powerfulModel;
        }
        
        <span class="hljs-comment">// é»˜è®¤ä½¿ç”¨æ ‡å‡†æ¨¡å‹</span>
        <span class="hljs-keyword">return</span> standardModel;
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">analyzeComplexity</span><span class="hljs-params">(String query)</span> {
        <span class="hljs-comment">// åŸºäºå…³é”®è¯ä¼°ç®—å¤æ‚åº¦</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">complexity</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">if</span> (query.contains(<span class="hljs-string">"åˆ†æ"</span>)) complexity += <span class="hljs-number">2</span>;
        <span class="hljs-keyword">if</span> (query.contains(<span class="hljs-string">"å¯¹æ¯”"</span>)) complexity += <span class="hljs-number">2</span>;
        <span class="hljs-keyword">if</span> (query.contains(<span class="hljs-string">"æ¨ç†"</span>)) complexity += <span class="hljs-number">3</span>;
        <span class="hljs-keyword">if</span> (query.contains(<span class="hljs-string">"ä»£ç "</span>)) complexity += <span class="hljs-number">2</span>;
        <span class="hljs-keyword">return</span> complexity;
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processQuery</span><span class="hljs-params">(String userQuery)</span> {
    <span class="hljs-type">IntelligentModelRouter</span> <span class="hljs-variable">router</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntelligentModelRouter</span>();
    <span class="hljs-type">QueryContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryContext</span>()
        .setCostBudget(<span class="hljs-number">0.05</span>);  <span class="hljs-comment">// 5åˆ†é’±çš„æˆæœ¬é™åˆ¶</span>
    
    <span class="hljs-type">Model</span> <span class="hljs-variable">selectedModel</span> <span class="hljs-operator">=</span> router.selectModel(userQuery, context);
    
    <span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
        .name(<span class="hljs-string">"SmartAssistant"</span>)
        .model(selectedModel)
        .build();
    
    <span class="hljs-type">Msg</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> agent.call(
        Msg.builder().textContent(userQuery).build()
    ).block();
    
    System.out.println(<span class="hljs-string">"Response: "</span> + response.getTextContent());
    System.out.println(<span class="hljs-string">"Model: "</span> + selectedModel.getModelName());
}
</code></pre>
<h3 data-id="heading-30">3.5.2 å¸¦è¶…æ—¶å’Œé‡è¯•çš„æ¨¡å‹è°ƒç”¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">robustModelCall</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// é…ç½®è¶…æ—¶å’Œé‡è¯•</span>
    <span class="hljs-type">ExecutionConfig</span> <span class="hljs-variable">execConfig</span> <span class="hljs-operator">=</span> ExecutionConfig.builder()
        .timeout(Duration.ofMinutes(<span class="hljs-number">2</span>))        <span class="hljs-comment">// 2åˆ†é’Ÿè¶…æ—¶</span>
        .maxAttempts(<span class="hljs-number">3</span>)                        <span class="hljs-comment">// æœ€å¤šé‡è¯•3æ¬¡</span>
        .initialBackoff(Duration.ofSeconds(<span class="hljs-number">1</span>)) <span class="hljs-comment">// é¦–æ¬¡é‡è¯•å»¶è¿Ÿ1ç§’</span>
        .maxBackoff(Duration.ofSeconds(<span class="hljs-number">10</span>))    <span class="hljs-comment">// æœ€å¤§å»¶è¿Ÿ10ç§’</span>
        .backoffMultiplier(<span class="hljs-number">2.0</span>)                <span class="hljs-comment">// æ¯æ¬¡å»¶è¿Ÿç¿»å€</span>
        .build();
    
    <span class="hljs-type">GenerateOptions</span> <span class="hljs-variable">options</span> <span class="hljs-operator">=</span> GenerateOptions.builder()
        .executionConfig(execConfig)
        .temperature(<span class="hljs-number">0.7</span>)
        .maxTokens(<span class="hljs-number">1000</span>)
        .build();
    
    <span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
        .name(<span class="hljs-string">"RobustAgent"</span>)
        .model(DashScopeChatModel.builder()
            .apiKey(System.getenv(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>))
            .modelName(<span class="hljs-string">"qwen-plus"</span>)
            .build())
        .maxIters(<span class="hljs-number">5</span>)  <span class="hljs-comment">// Agentæœ€å¤š5è½®æ¨ç†</span>
        .build();
    
    <span class="hljs-keyword">try</span> {
        <span class="hljs-type">Msg</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> agent.call(
            Msg.builder().textContent(<span class="hljs-string">"è¯·è§£é‡Šé‡å­è®¡ç®—"</span>).build(),
            options  <span class="hljs-comment">// ä½¿ç”¨è¶…æ—¶å’Œé‡è¯•é…ç½®</span>
        ).timeout(Duration.ofMinutes(<span class="hljs-number">3</span>))  <span class="hljs-comment">// æ€»è¶…æ—¶3åˆ†é’Ÿ</span>
         .onErrorMap(TimeoutException.class, 
                     e -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æ¨¡å‹å“åº”è¶…æ—¶ï¼Œè¯·é‡è¯•"</span>))
         .block();
        
        System.out.println(<span class="hljs-string">"Success: "</span> + response.getTextContent());
    } <span class="hljs-keyword">catch</span> (Exception e) {
        System.err.println(<span class="hljs-string">"Failed after retries: "</span> + e.getMessage());
        <span class="hljs-comment">// é™çº§å¤„ç†ï¼šä½¿ç”¨ç¼“å­˜æˆ–æä¾›é¢„è®¾ç­”æ¡ˆ</span>
    }
}
</code></pre>
<h3 data-id="heading-31">3.5.3 Tokenä½¿ç”¨ç›‘æ§ä¸æˆæœ¬è®¡ç®—</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ModelCostTracker</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, Double&gt; tokenPrices = Map.ofEntries(
        <span class="hljs-comment">// ä»·æ ¼/1K tokens</span>
        Map.entry(<span class="hljs-string">"qwen-turbo-input"</span>, <span class="hljs-number">0.0001</span>),
        Map.entry(<span class="hljs-string">"qwen-turbo-output"</span>, <span class="hljs-number">0.0002</span>),
        Map.entry(<span class="hljs-string">"gpt-4o-input"</span>, <span class="hljs-number">0.015</span>),
        Map.entry(<span class="hljs-string">"gpt-4o-output"</span>, <span class="hljs-number">0.06</span>),
        Map.entry(<span class="hljs-string">"claude-opus-input"</span>, <span class="hljs-number">0.015</span>),
        Map.entry(<span class="hljs-string">"claude-opus-output"</span>, <span class="hljs-number">0.075</span>)
    );
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">calculateCost</span><span class="hljs-params">(String modelName, ChatUsage usage)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">inputKey</span> <span class="hljs-operator">=</span> modelName + <span class="hljs-string">"-input"</span>;
        <span class="hljs-type">String</span> <span class="hljs-variable">outputKey</span> <span class="hljs-operator">=</span> modelName + <span class="hljs-string">"-output"</span>;
        
        <span class="hljs-type">double</span> <span class="hljs-variable">inputCost</span> <span class="hljs-operator">=</span> (usage.getInputTokens() * 
                           tokenPrices.getOrDefault(inputKey, <span class="hljs-number">0.0</span>)) / <span class="hljs-number">1000</span>;
        <span class="hljs-type">double</span> <span class="hljs-variable">outputCost</span> <span class="hljs-operator">=</span> (usage.getOutputTokens() * 
                            tokenPrices.getOrDefault(outputKey, <span class="hljs-number">0.0</span>)) / <span class="hljs-number">1000</span>;
        
        <span class="hljs-keyword">return</span> inputCost + outputCost;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">trackAndLog</span><span class="hljs-params">(Msg response, String modelName)</span> {
        <span class="hljs-type">ChatUsage</span> <span class="hljs-variable">usage</span> <span class="hljs-operator">=</span> response.getChatUsage();
        <span class="hljs-keyword">if</span> (usage == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;
        
        <span class="hljs-type">double</span> <span class="hljs-variable">cost</span> <span class="hljs-operator">=</span> calculateCost(modelName, usage);
        <span class="hljs-type">double</span> <span class="hljs-variable">costPerToken</span> <span class="hljs-operator">=</span> (cost / usage.getTotalTokens()) * <span class="hljs-number">1000</span>;
        
        System.out.printf(
            <span class="hljs-string">"Model: %s | Tokens: %d/%d | Cost: Â¥%.4f (Â¥%.4f/1K)\n"</span>,
            modelName,
            usage.getInputTokens(),
            usage.getOutputTokens(),
            cost,
            costPerToken
        );
        
        <span class="hljs-comment">// ä¿å­˜åˆ°æ•°æ®åº“ç”¨äºæˆæœ¬åˆ†æ</span>
        saveCostMetrics(modelName, usage, cost);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveCostMetrics</span><span class="hljs-params">(String modelName, ChatUsage usage, <span class="hljs-type">double</span> cost)</span> {
        <span class="hljs-comment">// å­˜å‚¨åˆ°æ•°æ®åº“æˆ–ç›‘æ§ç³»ç»Ÿ</span>
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-32">æ€»ç»“</h2>
<h3 data-id="heading-33">æ ¸å¿ƒæ¦‚å¿µå›é¡¾</h3>





























<table><thead><tr><th>æ¦‚å¿µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>Modelæ¥å£</strong></td><td>ç»Ÿä¸€çš„LLMæ¥å£ï¼Œå±è”½ä¸åŒå‚å•†çš„å·®å¼‚</td></tr><tr><td><strong>å¤šæ¨¡å‹æ”¯æŒ</strong></td><td>æ”¯æŒDashScopeã€OpenAIã€Anthropicã€Geminiç­‰</td></tr><tr><td><strong>æµå¼å“åº”</strong></td><td>å®æ—¶æ¨é€Tokenï¼Œæå‡ç”¨æˆ·ä½“éªŒ</td></tr><tr><td><strong>Formatter</strong></td><td>è‡ªåŠ¨è½¬æ¢æ¶ˆæ¯æ ¼å¼é€‚é…ä¸åŒLLM</td></tr><tr><td><strong>GenerateOptions</strong></td><td>çµæ´»çš„ç”Ÿæˆå‚æ•°æ§åˆ¶</td></tr></tbody></table>
<h3 data-id="heading-34">å®ç°è¦ç‚¹</h3>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> é€‚é…å™¨æ¨¡å¼çš„åº”ç”¨
   â””â”€ Modelæ¥å£ + å¤šä¸ªå®ç° + Formatter
   â””â”€ æ–°å¢æ¨¡å‹æ—¶æ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç 

<span class="hljs-bullet">2.</span> æµå¼å¤„ç†
   â””â”€ ä½¿ç”¨Flux<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ChatResponse</span>&gt;</span></span>æ”¯æŒèƒŒå‹
   â””â”€ æå‡ç”¨æˆ·ä½“éªŒ

<span class="hljs-bullet">3.</span> æˆæœ¬å’Œæ€§èƒ½å¹³è¡¡
   â””â”€ æ ¹æ®ä»»åŠ¡å¤æ‚åº¦é€‰æ‹©åˆé€‚çš„æ¨¡å‹
   â””â”€ ç›‘æ§Tokenä½¿ç”¨å’Œæˆæœ¬

<span class="hljs-bullet">4.</span> å¯é æ€§è®¾è®¡
   â””â”€ è¶…æ—¶æ§åˆ¶é˜²æ­¢æ— é™ç­‰å¾…
   â””â”€ è‡ªåŠ¨é‡è¯•å¤„ç†ç¬æ—¶æ•…éšœ
</code></pre>
<hr/>
<p><strong>æœ¬ç« å®Œ</strong></p>
<p>åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨<strong>Agentæ¥å£ä¸AgentBaseåŸºç±»</strong>ï¼Œäº†è§£å¦‚ä½•å®ç°è‡ªå®šä¹‰Agentã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆ"å®¹å™¨åŒ–"æŠ€æœ¯å¾ˆé‡è¦ï¼Ÿâ€”â€”ä»è™šæ‹Ÿæœºåˆ° Docker]]></title>    <link>https://juejin.cn/post/7589246131586023459</link>    <guid>https://juejin.cn/post/7589246131586023459</guid>    <pubDate>2025-12-30T05:40:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589246131586023459" data-draft-id="7589275237037522979" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" ä¸ºä»€ä¹ˆ&quot;å®¹å™¨åŒ–&quot;æŠ€æœ¯å¾ˆé‡è¦ï¼Ÿâ€”â€”ä»è™šæ‹Ÿæœºåˆ° Docker"/> <meta itemprop="keywords" content="åç«¯,GitHub"/> <meta itemprop="datePublished" content="2025-12-30T05:40:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ— é™å¤§6"/> <meta itemprop="url" content="https://juejin.cn/user/2865758605422890"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             ä¸ºä»€ä¹ˆ"å®¹å™¨åŒ–"æŠ€æœ¯å¾ˆé‡è¦ï¼Ÿâ€”â€”ä»è™šæ‹Ÿæœºåˆ° Docker
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2865758605422890/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ— é™å¤§6
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T05:40:07.000Z" title="Tue Dec 30 2025 05:40:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ“¦ ä¸ºä»€ä¹ˆ"å®¹å™¨åŒ–"æŠ€æœ¯å¾ˆé‡è¦ï¼Ÿâ€”â€”ä»è™šæ‹Ÿæœºåˆ° Docker ğŸš€</h2>
<blockquote>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ— é™å¤§ï¼Œæ¬¢è¿æ”¶çœ‹åä¸‡ä¸ªä¸ºä»€ä¹ˆç³»åˆ—æ–‡ç« </p>
<p>å¸Œæœ›ä»Šå¤©çš„å†…å®¹èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©</p>
</blockquote>
<p>ä»Šå¤©å’±ä»¬æ¥èŠèŠå®¹å™¨åŒ–è¿™ä¸ª"è½¯ä»¶ç•Œçš„é›†è£…ç®±é©å‘½"ï¼æƒ³è±¡ä¸€ä¸‹ï¼Œä½ è¦è¿è¾“ä¸€æ‰¹è´§ç‰©ï¼Œä¼ ç»Ÿæ–¹å¼æ˜¯æŠŠæ•´ä¸ªä»“åº“éƒ½è¿èµ°ï¼ˆè™šæ‹Ÿæœºï¼‰ï¼Œè€Œç°åœ¨åªéœ€è¦æŠŠè´§ç‰©è£…è¿›æ ‡å‡†åŒ–çš„é›†è£…ç®±ï¼ˆå®¹å™¨ï¼‰ï¼Œæ—¢é«˜æ•ˆåˆçµæ´»â€”â€”è¿™å°±æ˜¯å®¹å™¨åŒ–æŠ€æœ¯çš„é­…åŠ›ï¼</p>
<h3 data-id="heading-1">ğŸ¤” æ ¸å¿ƒé—®é¢˜ï¼šå®¹å™¨åŒ–çš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼ŸDockerçš„å·¥ä½œåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>å¾ˆå¤šäººè§‰å¾—å®¹å™¨åŒ–æ˜¯"é«˜å¤§ä¸Šçš„æŠ€æœ¯åè¯"ï¼Œå…¶å®å®ƒç¦»æˆ‘ä»¬å¾ˆè¿‘ï¼ä½ ç”¨çš„æ¯ä¸€ä¸ªæ‰‹æœºAPPï¼ŒèƒŒåå¯èƒ½éƒ½æœ‰å®¹å™¨åœ¨è¿è¡Œã€‚ä»Šå¤©å’±ä»¬å°±æ¥æ­å¼€å®¹å™¨åŒ–çš„ç¥ç§˜é¢çº±ï¼</p>
<h4 data-id="heading-2">å®¹å™¨åŒ–çš„æœ¬è´¨</h4>
<p>å®¹å™¨åŒ–æ˜¯ä¸€ç§<strong>è½»é‡çº§çš„è™šæ‹ŸåŒ–æŠ€æœ¯</strong>ï¼Œå®ƒèƒ½æŠŠåº”ç”¨åŠå…¶ä¾èµ–æ‰“åŒ…æˆä¸€ä¸ªç‹¬ç«‹çš„ã€å¯ç§»æ¤çš„å®¹å™¨ï¼Œåœ¨ä»»ä½•ç¯å¢ƒä¸­éƒ½èƒ½ä¸€è‡´è¿è¡Œã€‚å®ƒå°±åƒ"è½¯ä»¶çš„é›†è£…ç®±"ï¼Œæ ‡å‡†åŒ–ã€æ˜“è¿è¾“ã€é«˜æ•ˆåˆ©ç”¨èµ„æºã€‚</p>
<h3 data-id="heading-3">ğŸ“œ å®¹å™¨åŒ–çš„"è¿›åŒ–å²"ï¼šä»è™šæ‹Ÿæœºåˆ°Kubernetes</h3>
<h4 data-id="heading-4">1. ğŸ–¥ï¸ è™šæ‹Ÿæœºæ—¶ä»£ï¼š"ç¬¨é‡çš„ä»“åº“è¿è¾“"</h4>
<p>20ä¸–çºª90å¹´ä»£ï¼Œè™šæ‹Ÿæœºï¼ˆVMï¼‰æŠ€æœ¯è¯ç”Ÿã€‚å®ƒèƒ½åœ¨ä¸€å°ç‰©ç†æœåŠ¡å™¨ä¸Šè¿è¡Œå¤šä¸ªæ“ä½œç³»ç»Ÿï¼Œæ¯ä¸ªæ“ä½œç³»ç»Ÿéƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è™šæ‹Ÿæœºã€‚</p>
<p>è¿™å°±åƒ"åœ¨ä¸€è¾†å¡è½¦ä¸Šè£…äº†å¤šä¸ªç‹¬ç«‹çš„å°å¡è½¦"ï¼Œæ¯ä¸ªå°å¡è½¦éƒ½æœ‰è‡ªå·±çš„å‘åŠ¨æœºã€æ²¹ç®±ã€é©¾é©¶å®¤ï¼Œè™½ç„¶èƒ½è£…æ›´å¤šè´§ç‰©ï¼Œä½†èµ„æºæµªè´¹ä¸¥é‡ï¼Œå¯åŠ¨æ…¢ï¼Œç®¡ç†å¤æ‚ã€‚</p>
<h4 data-id="heading-5">2. ğŸ§ Linuxå®¹å™¨èŒèŠ½ï¼š"è½»é‡çº§è™šæ‹ŸåŒ–"</h4>
<p>2000å¹´åï¼ŒLinuxå®¹å™¨æŠ€æœ¯å¼€å§‹å‘å±•ï¼Œæ¯”å¦‚Linux VServerã€LXCç­‰ã€‚å®ƒä»¬åˆ©ç”¨Linuxå†…æ ¸çš„éš”ç¦»ç‰¹æ€§ï¼Œåœ¨åŒä¸€æ“ä½œç³»ç»Ÿä¸Šåˆ›å»ºå¤šä¸ªéš”ç¦»çš„ç¯å¢ƒã€‚</p>
<p>è¿™å°±åƒ"åœ¨ä¸€è¾†å¡è½¦ä¸Šè£…äº†å¤šä¸ªç‹¬ç«‹çš„è´§ç®±"ï¼Œå…±äº«åŒä¸€ä¸ªå‘åŠ¨æœºå’Œé©¾é©¶å®¤ï¼Œèµ„æºåˆ©ç”¨ç‡æ›´é«˜ï¼Œä½†ç®¡ç†è¿˜æ˜¯æ¯”è¾ƒå¤æ‚ã€‚</p>
<h4 data-id="heading-6">3. ğŸ³ Dockeræ¨ªç©ºå‡ºä¸–ï¼š"å®¹å™¨åŒ–é©å‘½"</h4>
<p>2013å¹´ï¼ŒDockerå‘å¸ƒï¼Œå®ƒç®€åŒ–äº†å®¹å™¨çš„åˆ›å»ºã€è¿è¡Œå’Œç®¡ç†ï¼Œè®©å®¹å™¨åŒ–æŠ€æœ¯çœŸæ­£æ™®åŠã€‚Dockerçš„å£å·æ˜¯"Build once, run anywhere"ï¼ˆä¸€æ¬¡æ„å»ºï¼Œéšå¤„è¿è¡Œï¼‰ã€‚</p>
<p>è¿™å°±åƒ"æ ‡å‡†åŒ–çš„é›†è£…ç®±"ï¼Œæœ‰ç»Ÿä¸€çš„æ ¼å¼å’Œæ¥å£ï¼Œèƒ½åœ¨ä»»ä½•æ¸¯å£ï¼ˆç¯å¢ƒï¼‰è½»æ¾è£…å¸ï¼Œæå¤§æé«˜äº†è½¯ä»¶çš„å¯ç§»æ¤æ€§å’Œéƒ¨ç½²æ•ˆç‡ã€‚</p>
<h4 data-id="heading-7">4. â˜¸ï¸ Kubernetesï¼š"å®¹å™¨ç¼–æ’ä¹‹ç‹"</h4>
<p>2014å¹´ï¼ŒGoogleå¼€æºäº†Kubernetesï¼ˆç®€ç§°K8sï¼‰ï¼Œå®ƒèƒ½è‡ªåŠ¨åŒ–ç®¡ç†å¤§é‡å®¹å™¨ï¼Œå®ç°å®¹å™¨çš„éƒ¨ç½²ã€æ‰©å±•ã€æ›´æ–°å’Œç›‘æ§ã€‚</p>
<p>è¿™å°±åƒ"é›†è£…ç®±ç å¤´çš„è°ƒåº¦ç³»ç»Ÿ"ï¼Œè‡ªåŠ¨å®‰æ’é›†è£…ç®±çš„å­˜æ”¾ã€è¿è¾“å’Œè£…å¸ï¼Œè®©æˆåƒä¸Šä¸‡çš„å®¹å™¨èƒ½æœ‰åºè¿è¡Œã€‚</p>
<h3 data-id="heading-8">ğŸ”§ æŠ€æœ¯åŸç†ï¼šå®¹å™¨åŒ–çš„æ ¸å¿ƒæŠ€æœ¯</h3>
<h4 data-id="heading-9">1. ğŸ›¡ï¸ å®¹å™¨çš„éš”ç¦»æœºåˆ¶ï¼š"å…±äº«å†…æ ¸ï¼Œéš”ç¦»ç¯å¢ƒ"</h4>
<p>å®¹å™¨çš„éš”ç¦»ä¸»è¦é€šè¿‡Linuxå†…æ ¸çš„ä¸¤ä¸ªç‰¹æ€§å®ç°ï¼š</p>
<ul>
<li><strong>cgroupsï¼ˆControl Groupsï¼‰</strong>ï¼šé™åˆ¶å’Œåˆ†é…èµ„æºï¼ˆCPUã€å†…å­˜ã€ç£ç›˜I/Oç­‰ï¼‰</li>
<li><strong>namespaces</strong>ï¼šéš”ç¦»è¿›ç¨‹ã€ç½‘ç»œã€æ–‡ä»¶ç³»ç»Ÿç­‰èµ„æº</li>
</ul>
<p>è¿™å°±åƒ"åŒä¸€ä¸ªæˆ¿å­é‡Œçš„å¤šä¸ªæˆ¿é—´"ï¼Œå…±äº«åŒä¸€ä¸ªå±‹é¡¶å’ŒåŸºç¡€è®¾æ–½ï¼Œä½†æ¯ä¸ªæˆ¿é—´æœ‰è‡ªå·±çš„é—¨é”å’Œç‹¬ç«‹çš„ç©ºé—´ã€‚</p>
<h4 data-id="heading-10">2. ğŸ–¼ï¸ å®¹å™¨é•œåƒï¼š"åº”ç”¨çš„æ‰“åŒ…æ ¼å¼"</h4>
<p>å®¹å™¨é•œåƒæ˜¯å®¹å™¨çš„"æ¨¡æ¿"ï¼ŒåŒ…å«äº†åº”ç”¨åŠå…¶æ‰€æœ‰ä¾èµ–ï¼ˆä»£ç ã€åº“ã€ç¯å¢ƒå˜é‡ã€é…ç½®æ–‡ä»¶ç­‰ï¼‰ã€‚é•œåƒæœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li><strong>åˆ†å±‚å­˜å‚¨</strong>ï¼šé•œåƒç”±å¤šä¸ªåªè¯»å±‚ç»„æˆï¼Œå…±äº«ç›¸åŒçš„å±‚ï¼ŒèŠ‚çœç©ºé—´</li>
<li><strong>ä¸å¯ä¿®æ”¹</strong>ï¼šé•œåƒåˆ›å»ºåä¸å¯ä¿®æ”¹ï¼Œç¡®ä¿ä¸€è‡´æ€§</li>
<li><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šæ”¯æŒæ ‡ç­¾å’Œç‰ˆæœ¬ç®¡ç†</li>
</ul>
<p>è¿™å°±åƒ"çƒ¹é¥ªçš„é£Ÿè°±+é£ŸæåŒ…"ï¼ŒåŒ…å«äº†åšä¸€é“èœæ‰€éœ€çš„æ‰€æœ‰ææ–™å’Œæ­¥éª¤ï¼Œä»»ä½•äººéƒ½èƒ½åšå‡ºåŒæ ·çš„èœã€‚</p>
<h4 data-id="heading-11">3. ğŸš€ å®¹å™¨è¿è¡Œæ—¶ï¼š"å®¹å™¨çš„æ‰§è¡Œç¯å¢ƒ"</h4>
<p>å®¹å™¨è¿è¡Œæ—¶è´Ÿè´£å®¹å™¨çš„åˆ›å»ºã€è¿è¡Œå’Œé”€æ¯ï¼Œå¸¸è§çš„æœ‰ï¼š</p>
<ul>
<li><strong>runc</strong>ï¼šDockeré»˜è®¤çš„è¿è¡Œæ—¶ï¼Œç¬¦åˆOCIï¼ˆOpen Container Initiativeï¼‰æ ‡å‡†</li>
<li><strong>containerd</strong>ï¼šæ›´é«˜çº§çš„è¿è¡Œæ—¶ï¼Œæä¾›æ›´å¤šåŠŸèƒ½</li>
<li><strong>CRI-O</strong>ï¼šä¸“é—¨ä¸ºKubernetesè®¾è®¡çš„è¿è¡Œæ—¶</li>
</ul>
<p>è¿™å°±åƒ"å¨æˆ¿çš„ç‚‰ç¶"ï¼Œè´Ÿè´£æŠŠé£Ÿè°±ï¼ˆé•œåƒï¼‰å˜æˆç¾å‘³çš„èœè‚´ï¼ˆå®¹å™¨ï¼‰ã€‚</p>
<h4 data-id="heading-12">4. ğŸ“Š å®¹å™¨ç¼–æ’ï¼š"å¤§è§„æ¨¡å®¹å™¨ç®¡ç†"</h4>
<p>å½“å®¹å™¨æ•°é‡è¾¾åˆ°æˆç™¾ä¸Šåƒæ—¶ï¼Œéœ€è¦å®¹å™¨ç¼–æ’ç³»ç»Ÿæ¥ç®¡ç†ï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>æœåŠ¡å‘ç°</strong>ï¼šè‡ªåŠ¨å‘ç°å’Œè¿æ¥å®¹å™¨</li>
<li><strong>è´Ÿè½½å‡è¡¡</strong>ï¼šå°†è¯·æ±‚åˆ†å‘åˆ°å¤šä¸ªå®¹å™¨</li>
<li><strong>è‡ªåŠ¨ä¼¸ç¼©</strong>ï¼šæ ¹æ®è´Ÿè½½è‡ªåŠ¨è°ƒæ•´å®¹å™¨æ•°é‡</li>
<li><strong>å¥åº·æ£€æŸ¥</strong>ï¼šç›‘æ§å®¹å™¨çŠ¶æ€ï¼Œè‡ªåŠ¨é‡å¯æ•…éšœå®¹å™¨</li>
<li><strong>æ»šåŠ¨æ›´æ–°</strong>ï¼šé›¶åœæœºæ›´æ–°åº”ç”¨</li>
</ul>
<h4 data-id="heading-13">5. <strong>ä»£ç å®ä¾‹</strong>ï¼šDockerå‘½ä»¤åŸºç¡€</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æ‹‰å–é•œåƒï¼ˆä»Docker Hubä¸‹è½½ä¸€ä¸ªNginxé•œåƒï¼‰</span>
docker pull nginx:latest

<span class="hljs-comment"># 2. æŸ¥çœ‹æœ¬åœ°é•œåƒ</span>
docker images

<span class="hljs-comment"># 3. è¿è¡Œå®¹å™¨ï¼ˆåˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªNginxå®¹å™¨ï¼‰</span>
<span class="hljs-comment"># -dï¼šåå°è¿è¡Œ</span>
<span class="hljs-comment"># -p 8080:80ï¼šå°†ä¸»æœºçš„8080ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„80ç«¯å£</span>
<span class="hljs-comment"># --name mynginxï¼šç»™å®¹å™¨èµ·ä¸ªåå­—å«mynginx</span>
docker run -d -p 8080:80 --name mynginx nginx:latest

<span class="hljs-comment"># 4. æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨</span>
docker ps

<span class="hljs-comment"># 5. æŸ¥çœ‹å®¹å™¨æ—¥å¿—</span>
docker logs mynginx

<span class="hljs-comment"># 6. è¿›å…¥å®¹å™¨å†…éƒ¨</span>
docker <span class="hljs-built_in">exec</span> -it mynginx /bin/bash

<span class="hljs-comment"># 7. åœ¨å®¹å™¨å†…éƒ¨æ‰§è¡Œå‘½ä»¤ï¼ˆæ¯”å¦‚æŸ¥çœ‹Nginxç‰ˆæœ¬ï¼‰</span>
nginx -v

<span class="hljs-comment"># 8. é€€å‡ºå®¹å™¨</span>
<span class="hljs-built_in">exit</span>

<span class="hljs-comment"># 9. åœæ­¢å®¹å™¨</span>
docker stop mynginx

<span class="hljs-comment"># 10. å¯åŠ¨å·²åœæ­¢çš„å®¹å™¨</span>
docker start mynginx

<span class="hljs-comment"># 11. åˆ é™¤å®¹å™¨ï¼ˆéœ€è¦å…ˆåœæ­¢ï¼‰</span>
docker <span class="hljs-built_in">rm</span> mynginx

<span class="hljs-comment"># 12. åˆ é™¤é•œåƒ</span>
docker rmi nginx:latest
</code></pre>
<p><strong>è¿è¡Œç»“æœç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-comment"># æ‹‰å–é•œåƒ</span>
<span class="hljs-section">latest: Pulling from library/nginx</span>
<span class="hljs-section">26c5c85e47da: Pull complete </span>
<span class="hljs-section">30afc0b18f67: Pull complete </span>
<span class="hljs-section">596b1d696923: Pull complete </span>
<span class="hljs-section">a8117582c2c0: Pull complete </span>
<span class="hljs-section">69038a8b17e6: Pull complete </span>
<span class="hljs-section">94026482364c: Pull complete </span>
<span class="hljs-section">Digest: sha256:0d17b565c37bcbd895e9d92315a05c1c3c9a29f762b011a10c54a66cd53c9b31</span>
<span class="hljs-section">Status: Downloaded newer image for nginx:latest</span>
<span class="hljs-section">docker.io/library/nginx:latest</span>

<span class="hljs-comment"># è¿è¡Œå®¹å™¨</span>
2a3f6e36b924f21c3e45f070a75b9c669a949d3029b45b91a8c65c3f141d5758

<span class="hljs-comment"># æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨</span>
CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS         PORTS                  NAMES
2a3f6e36b924   nginx:latest   <span class="hljs-string">"/docker-entrypoint.â€¦"</span>   2 seconds ago   Up 2 seconds   0.0.0.0:8080-&gt;80/tcp   mynginx

<span class="hljs-comment"># æŸ¥çœ‹Nginxç‰ˆæœ¬</span>
nginx version: nginx/1.25.3
</code></pre>
<h3 data-id="heading-14">ğŸ“Š è¶£å‘³å¯¹æ¯”ï¼šè™šæ‹Ÿæœº vs å®¹å™¨</h3>























































<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>è™šæ‹Ÿæœºï¼ˆVMï¼‰</th><th>å®¹å™¨</th></tr></thead><tbody><tr><td><strong>éš”ç¦»çº§åˆ«</strong></td><td>æ“ä½œç³»ç»Ÿçº§éš”ç¦»ï¼ˆå®Œå…¨éš”ç¦»ï¼‰</td><td>è¿›ç¨‹çº§éš”ç¦»ï¼ˆå…±äº«å†…æ ¸ï¼‰</td></tr><tr><td><strong>å¯åŠ¨æ—¶é—´</strong></td><td>åˆ†é’Ÿçº§</td><td>ç§’çº§ç”šè‡³æ¯«ç§’çº§</td></tr><tr><td><strong>èµ„æºå ç”¨</strong></td><td>é«˜ï¼ˆéœ€è¦è¿è¡Œå®Œæ•´OSï¼‰</td><td>ä½ï¼ˆå…±äº«å†…æ ¸ï¼‰</td></tr><tr><td><strong>é•œåƒå¤§å°</strong></td><td>GBçº§</td><td>MBçº§</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>æœ‰è™šæ‹ŸåŒ–å¼€é”€</td><td>æ¥è¿‘åŸç”Ÿæ€§èƒ½</td></tr><tr><td><strong>éƒ¨ç½²å¯†åº¦</strong></td><td>ä¸€å°æœåŠ¡å™¨å¯è¿è¡Œå‡ åä¸ª</td><td>ä¸€å°æœåŠ¡å™¨å¯è¿è¡Œä¸Šåƒä¸ª</td></tr><tr><td><strong>ç®¡ç†å¤æ‚åº¦</strong></td><td>å¤æ‚ï¼ˆéœ€è¦ç®¡ç†OSï¼‰</td><td>ç®€å•ï¼ˆåªç®¡ç†åº”ç”¨ï¼‰</td></tr><tr><td><strong>ä»£è¡¨äº§å“</strong></td><td>VMwareã€VirtualBox</td><td>Dockerã€Podman</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>è¿è¡Œä¸åŒOSï¼›éœ€è¦å¼ºéš”ç¦»</td><td>å¾®æœåŠ¡ï¼›CI/CDï¼›äº‘åŸç”Ÿåº”ç”¨</td></tr></tbody></table>
<h3 data-id="heading-15">ğŸ¢ å®¹å™¨åŒ–çš„åº”ç”¨åœºæ™¯ï¼š"æ”¹å˜è½¯ä»¶å¼€å‘å’Œéƒ¨ç½²"</h3>
<p>å®¹å™¨åŒ–æŠ€æœ¯å·²ç»å¹¿æ³›åº”ç”¨äºå„ä¸ªé¢†åŸŸï¼Œè¢«ç§°ä¸º"äº‘åŸç”Ÿæ—¶ä»£çš„åŸºçŸ³"ï¼š</p>








































<table><thead><tr><th>åº”ç”¨åœºæ™¯</th><th>å®¹å™¨åŒ–çš„ä¼˜åŠ¿</th><th>å®ä¾‹</th></tr></thead><tbody><tr><td>ğŸš€ <strong>å¾®æœåŠ¡æ¶æ„</strong></td><td>æ¯ä¸ªæœåŠ¡ç‹¬ç«‹éƒ¨ç½²å’Œæ‰©å±•</td><td>Netflixã€Spotifyçš„å¾®æœåŠ¡</td></tr><tr><td>ğŸ”„ <strong>CI/CDæµç¨‹</strong></td><td>ä¸€è‡´çš„å¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ç¯å¢ƒ</td><td>GitHub Actionsã€GitLab CI</td></tr><tr><td>â˜ï¸ <strong>äº‘åŸç”Ÿåº”ç”¨</strong></td><td>å¿«é€Ÿéƒ¨ç½²åˆ°ä»»ä½•äº‘å¹³å°</td><td>Kubernetesä¸Šè¿è¡Œçš„åº”ç”¨</td></tr><tr><td>ğŸ“± <strong>ç§»åŠ¨åº”ç”¨åç«¯</strong></td><td>å¼¹æ€§ä¼¸ç¼©ï¼Œåº”å¯¹æµé‡æ³¢åŠ¨</td><td>ç”µå•†å¹³å°ã€ç¤¾äº¤åª’ä½“</td></tr><tr><td>ğŸ­ <strong>ä¼ä¸šåº”ç”¨ç°ä»£åŒ–</strong></td><td>é€æ­¥è¿ç§» legacy åº”ç”¨</td><td>é“¶è¡Œã€ä¿é™©ç³»ç»Ÿ</td></tr><tr><td>ğŸ® <strong>æ¸¸æˆæœåŠ¡å™¨</strong></td><td>å¿«é€Ÿéƒ¨ç½²æ–°æ¸¸æˆï¼Œå¼¹æ€§æ‰©å®¹</td><td>å¤§å‹åœ¨çº¿æ¸¸æˆ</td></tr></tbody></table>
<h3 data-id="heading-16">âš ï¸ å¸¸è§è¯¯åŒºçº æ­£</h3>
<h4 data-id="heading-17">1. "å®¹å™¨æ˜¯è½»é‡çº§çš„è™šæ‹Ÿæœºï¼Ÿ"</h4>
<p>ä¸ï¼å®¹å™¨å’Œè™šæ‹Ÿæœºçš„éš”ç¦»åŸç†å®Œå…¨ä¸åŒã€‚è™šæ‹Ÿæœºè¿è¡Œå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œè€Œå®¹å™¨å…±äº«å®¿ä¸»å†…æ ¸ï¼Œåªéš”ç¦»è¿›ç¨‹å’Œèµ„æºã€‚</p>
<h4 data-id="heading-18">2. "å®¹å™¨ä¸å®‰å…¨ï¼Ÿ"</h4>
<p>ä¸ä¸€å®šï¼å®¹å™¨çš„éš”ç¦»æ€§è™½ç„¶ä¸å¦‚è™šæ‹Ÿæœºï¼Œä½†é€šè¿‡åˆç†é…ç½®ï¼ˆæ¯”å¦‚ä½¿ç”¨åªè¯»é•œåƒã€æœ€å°æƒé™åŸåˆ™ã€ç½‘ç»œéš”ç¦»ç­‰ï¼‰ï¼Œå¯ä»¥è¾¾åˆ°å¾ˆé«˜çš„å®‰å…¨æ€§ã€‚</p>
<h4 data-id="heading-19">3. "Dockerå°±æ˜¯å®¹å™¨åŒ–çš„å…¨éƒ¨ï¼Ÿ"</h4>
<p>ä¸ï¼Dockeræ˜¯å®¹å™¨åŒ–çš„ä¸€ä¸ªå®ç°ï¼Œè¿˜æœ‰å…¶ä»–å®¹å™¨æŠ€æœ¯ï¼Œæ¯”å¦‚Podmanã€LXCç­‰ã€‚è€Œä¸”å®¹å™¨åŒ–è¿˜åŒ…æ‹¬é•œåƒä»“åº“ã€å®¹å™¨è¿è¡Œæ—¶ã€ç¼–æ’ç³»ç»Ÿç­‰ã€‚</p>
<h4 data-id="heading-20">4. "æ‰€æœ‰åº”ç”¨éƒ½é€‚åˆå®¹å™¨åŒ–ï¼Ÿ"</h4>
<p>ä¸ä¸€å®šï¼æŸäº›åº”ç”¨ï¼ˆæ¯”å¦‚éœ€è¦ç‰¹å®šç¡¬ä»¶çš„åº”ç”¨ã€éœ€è¦å®Œæ•´OSç‰¹æ€§çš„åº”ç”¨ï¼‰å¯èƒ½æ›´é€‚åˆè™šæ‹Ÿæœºã€‚ä½†å¤§å¤šæ•°ç°ä»£åº”ç”¨éƒ½é€‚åˆå®¹å™¨åŒ–ã€‚</p>
<h4 data-id="heading-21">5. "Kubernetesæ˜¯å¿…éœ€çš„ï¼Ÿ"</h4>
<p>ä¸ï¼å¯¹äºå°‘é‡å®¹å™¨ï¼Œç›´æ¥ä½¿ç”¨Dockerå°±è¶³å¤Ÿäº†ã€‚åªæœ‰å½“å®¹å™¨æ•°é‡è¾¾åˆ°ä¸€å®šè§„æ¨¡ï¼ˆæ¯”å¦‚å‡ åä¸ªä»¥ä¸Šï¼‰æ—¶ï¼Œæ‰éœ€è¦Kubernetesã€‚</p>
<h4 data-id="heading-22">6. "å®¹å™¨åŒ–å°±ç­‰äºäº‘åŸç”Ÿï¼Ÿ"</h4>
<p>ä¸ï¼äº‘åŸç”Ÿæ˜¯ä¸€ä¸ªæ›´å¹¿æ³›çš„æ¦‚å¿µï¼ŒåŒ…æ‹¬å®¹å™¨åŒ–ã€å¾®æœåŠ¡ã€CI/CDã€DevOpsã€å¯è§‚å¯Ÿæ€§ç­‰å¤šä¸ªæ–¹é¢ï¼Œå®¹å™¨åŒ–åªæ˜¯å…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚</p>
<h3 data-id="heading-23">ğŸ”® æœªæ¥å±•æœ›ï¼šå®¹å™¨åŒ–çš„å‘å±•è¶‹åŠ¿</h3>
<h4 data-id="heading-24">1. ğŸ¤– <strong>Serverlesså®¹å™¨</strong></h4>
<p>Serverlesså®¹å™¨å°†å®¹å™¨ä¸Serverlessç»“åˆï¼Œç”¨æˆ·åªéœ€å…³æ³¨åº”ç”¨ï¼Œæ— éœ€ç®¡ç†åŸºç¡€è®¾æ–½ï¼ŒæŒ‰ä½¿ç”¨é‡ä»˜è´¹ã€‚æ¯”å¦‚AWS Fargateã€Azure Container Instancesã€‚</p>
<h4 data-id="heading-25">2. ğŸ“¦ <strong>æ›´å®‰å…¨çš„å®¹å™¨</strong></h4>
<p>éšç€å®¹å™¨å®‰å…¨æŠ€æœ¯çš„å‘å±•ï¼Œå®¹å™¨çš„éš”ç¦»æ€§å’Œå®‰å…¨æ€§ä¼šè¶Šæ¥è¶Šé«˜ï¼Œæ¯”å¦‚å®‰å…¨å®¹å™¨æŠ€æœ¯ï¼ˆgVisorã€Kata Containersï¼‰ï¼Œå®ƒä»¬ç»“åˆäº†å®¹å™¨çš„è½»é‡å’Œè™šæ‹Ÿæœºçš„å®‰å…¨ã€‚</p>
<h4 data-id="heading-26">3. ğŸŒ <strong>è¾¹ç¼˜å®¹å™¨</strong></h4>
<p>å°†å®¹å™¨éƒ¨ç½²åˆ°è¾¹ç¼˜è®¾å¤‡ï¼ˆæ¯”å¦‚ç‰©è”ç½‘è®¾å¤‡ã€CDNèŠ‚ç‚¹ï¼‰ï¼Œå®ç°ä½å»¶è¿Ÿå’Œåˆ†å¸ƒå¼è®¡ç®—ï¼Œæ¯”å¦‚K3sã€Edge Kubernetesã€‚</p>
<h4 data-id="heading-27">4. ğŸ§© <strong>æ›´å®Œå–„çš„ç”Ÿæ€ç³»ç»Ÿ</strong></h4>
<p>å®¹å™¨ç”Ÿæ€ä¼šè¶Šæ¥è¶Šå®Œå–„ï¼ŒåŒ…æ‹¬æ›´å¼ºå¤§çš„é•œåƒä»“åº“ã€æ›´æ™ºèƒ½çš„ç¼–æ’ç³»ç»Ÿã€æ›´å¥½çš„ç›‘æ§å’Œå¯è§‚å¯Ÿæ€§å·¥å…·ã€‚</p>
<h4 data-id="heading-28">5. ğŸ¯ <strong>æ›´ç®€åŒ–çš„å·¥å…·é“¾</strong></h4>
<p>å®¹å™¨å·¥å…·ä¼šè¶Šæ¥è¶Šæ˜“ç”¨ï¼Œé™ä½ä½¿ç”¨é—¨æ§›ï¼Œæ¯”å¦‚Docker Desktopã€Rancher Desktopç­‰ï¼Œè®©å¼€å‘è€…èƒ½è½»æ¾ä½¿ç”¨å®¹å™¨å’ŒKubernetesã€‚</p>
<h3 data-id="heading-29">ğŸ“ äº’åŠ¨å°æµ‹éªŒï¼šä½ ç­”å¯¹äº†å—ï¼Ÿ</h3>


















































<table><thead><tr><th>é—®é¢˜</th><th>ç­”æ¡ˆ</th><th>ä½ ç­”å¯¹äº†å—ï¼Ÿ</th></tr></thead><tbody><tr><td>å®¹å™¨çš„æ ¸å¿ƒéš”ç¦»æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ</td><td>cgroupså’Œnamespaces</td><td>âœ…/âŒ</td></tr><tr><td>Dockeré•œåƒçš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</td><td>åˆ†å±‚å­˜å‚¨ã€ä¸å¯ä¿®æ”¹</td><td>âœ…/âŒ</td></tr><tr><td>å®¹å™¨å’Œè™šæ‹Ÿæœºçš„å¯åŠ¨æ—¶é—´å·®å¼‚ï¼Ÿ</td><td>å®¹å™¨ç§’çº§ï¼Œè™šæ‹Ÿæœºåˆ†é’Ÿçº§</td><td>âœ…/âŒ</td></tr><tr><td>Kubernetesçš„ä¸»è¦åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Ÿ</td><td>å®¹å™¨ç¼–æ’ã€è‡ªåŠ¨ä¼¸ç¼©ã€æœåŠ¡å‘ç°</td><td>âœ…/âŒ</td></tr><tr><td>å®¹å™¨åŒ–çš„å…¸å‹åº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ</td><td>å¾®æœåŠ¡ã€CI/CDã€äº‘åŸç”Ÿåº”ç”¨</td><td>âœ…/âŒ</td></tr><tr><td>80%çš„ä¼ä¸šä½¿ç”¨å®¹å™¨æŠ€æœ¯ï¼Ÿ</td><td>æ˜¯çš„</td><td>âœ…/âŒ</td></tr><tr><td>Kuberneteså å®¹å™¨ç¼–æ’å¸‚åœºä»½é¢ï¼Ÿ</td><td>75%</td><td>âœ…/âŒ</td></tr><tr><td>å®¹å™¨çš„æ€§èƒ½å¦‚ä½•ï¼Ÿ</td><td>æ¥è¿‘åŸç”Ÿæ€§èƒ½</td><td>âœ…/âŒ</td></tr></tbody></table>
<h3 data-id="heading-30">ğŸ¯ ç»“è¯­ï¼šå®¹å™¨åŒ–çš„é©å‘½</h3>
<p>å®¹å™¨åŒ–æŠ€æœ¯çš„å‡ºç°ï¼Œå°±åƒå·¥ä¸šé©å‘½ä¸­çš„æ ‡å‡†åŒ–é›†è£…ç®±ï¼Œå½»åº•æ”¹å˜äº†è½¯ä»¶çš„å¼€å‘ã€éƒ¨ç½²å’Œç®¡ç†æ–¹å¼ã€‚å®ƒè®©åº”ç”¨å˜å¾—æ›´åŠ è½»é‡ã€å¯ç§»æ¤ã€æ˜“æ‰©å±•ï¼ŒåŠ é€Ÿäº†äº‘åŸç”Ÿæ—¶ä»£çš„åˆ°æ¥ã€‚</p>
<p>ä»ç¬¨é‡çš„è™šæ‹Ÿæœºåˆ°è½»é‡çš„å®¹å™¨ï¼Œä»Dockeråˆ°Kubernetesï¼Œå®¹å™¨åŒ–æŠ€æœ¯çš„å‘å±•ï¼Œä½“ç°äº†äººç±»è¿½æ±‚æ›´é«˜æ•ˆã€æ›´çµæ´»çš„ä¸æ‡ˆåŠªåŠ›ã€‚</p>
<p>ä¸‹æ¬¡å½“ä½ ä½¿ç”¨Dockeréƒ¨ç½²åº”ç”¨ï¼Œæˆ–è€…åœ¨Kubernetesä¸Šè¿è¡Œå¾®æœåŠ¡æ—¶ï¼Œä¸å¦¨æƒ³æƒ³èƒŒåçš„å®¹å™¨åŒ–æŠ€æœ¯ï¼Œæ„Ÿå—ä¸€ä¸‹è¿™åœºè½¯ä»¶ç•Œçš„é©å‘½ï¼</p>
<hr/>
<h3 data-id="heading-31">ğŸ’¬ äº’åŠ¨è¯é¢˜</h3>
<ol>
<li>ä½ ä½¿ç”¨è¿‡Dockeræˆ–Kuberneteså—ï¼Ÿä½“éªŒå¦‚ä½•ï¼Ÿ</li>
<li>ä½ è§‰å¾—å®¹å™¨åŒ–æŠ€æœ¯æœ€å¤§çš„ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>ä½ è®¤ä¸ºå®¹å™¨åŒ–ä¼šå®Œå…¨å–ä»£è™šæ‹Ÿæœºå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</li>
<li>ä½ æœ€æœŸå¾…å®¹å™¨åŒ–æŠ€æœ¯åœ¨å“ªä¸ªé¢†åŸŸçš„åº”ç”¨ï¼Ÿ</li>
</ol>
<p>å¿«æ¥è¯„è®ºåŒºèŠèŠä½ çš„æƒ³æ³•ï¼ğŸ’¬ ç‚¹èµæ”¶è—ä¸è¿·è·¯ï¼Œå’±ä»¬ä¸‹æœŸç»§ç»­æ¢ç´¢è®¡ç®—æœºçš„"åä¸‡ä¸ªä¸ºä»€ä¹ˆ"ï¼ğŸ‰</p>
<p><strong>å…³æ³¨æˆ‘</strong>ï¼Œä¸‹æœŸå¸¦ä½ è§£é”æ›´å¤šè®¡ç®—æœºçš„"å¥‡è‘©å†·çŸ¥è¯†"ï¼ğŸ¤“</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ESP32 + MCP over MQTTï¼šå®ç°æ™ºèƒ½è®¾å¤‡è¯­éŸ³äº¤äº’]]></title>    <link>https://juejin.cn/post/7550289374467702818</link>    <guid>https://juejin.cn/post/7550289374467702818</guid>    <pubDate>2025-09-16T07:13:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7550289374467702818" data-draft-id="7550466215790084111" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ESP32 + MCP over MQTTï¼šå®ç°æ™ºèƒ½è®¾å¤‡è¯­éŸ³äº¤äº’"/> <meta itemprop="keywords" content="åç«¯,MCP"/> <meta itemprop="datePublished" content="2025-09-16T07:13:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="EMQX"/> <meta itemprop="url" content="https://juejin.cn/user/1996368847842040"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ESP32 + MCP over MQTTï¼šå®ç°æ™ºèƒ½è®¾å¤‡è¯­éŸ³äº¤äº’
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1996368847842040/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    EMQX
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-09-16T07:13:52.000Z" title="Tue Sep 16 2025 07:13:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-09-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>æœ¬ç³»åˆ—æ•™ç¨‹è·¯çº¿å›¾</strong></h2>
<p>æœ¬æ–‡æ˜¯ã€Šä» 0 åˆ° 1 æ‰“é€ æƒ…æ„Ÿé™ªä¼´æ™ºèƒ½ä½“ã€‹ç³»åˆ—çš„ç¬¬å››ç¯‡ã€‚è‹¥ä½ è¿˜æœªé˜…è¯»å‰å‡ ç¯‡ï¼Œå»ºè®®å…ˆå›é¡¾å®ƒä»¬ï¼Œä»¥ä¾¿æ›´å¥½åœ°ç†è§£æœ¬æ–‡å†…å®¹ã€‚</p>








































<table><thead><tr><th align="left">ç¯‡ç« </th><th align="left">åŠŸèƒ½</th><th align="left">éš¾åº¦</th></tr></thead><tbody><tr><td align="left">1</td><td align="left"><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.emqx.com%2Fzh%2Fblog%2Fesp32-and-mcp-over-mqtt" target="_blank" title="https://www.emqx.com/zh/blog/esp32-and-mcp-over-mqtt" ref="nofollow noopener noreferrer">æ•´ä½“ä»‹ç»ï¼šèƒŒæ™¯ + ç¯å¢ƒå‡†å¤‡ + è®¾å¤‡ä¸Šçº¿</a></td><td align="left">â˜…</td></tr><tr><td align="left">2</td><td align="left"><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.emqx.com%2Fzh%2Fblog%2Fesp32-and-mcp-over-mqtt-2" target="_blank" title="https://www.emqx.com/zh/blog/esp32-and-mcp-over-mqtt-2" ref="nofollow noopener noreferrer">ä»â€œå‘½ä»¤å¼æ§åˆ¶â€åˆ°â€œè¯­ä¹‰æ§åˆ¶â€ï¼šMCP over MQTT å°è£…è®¾å¤‡èƒ½åŠ›</a></td><td align="left">â˜…â˜…</td></tr><tr><td align="left">3</td><td align="left"><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.emqx.com%2Fzh%2Fblog%2Fesp32-and-mcp-over-mqtt-3" target="_blank" title="https://www.emqx.com/zh/blog/esp32-and-mcp-over-mqtt-3" ref="nofollow noopener noreferrer">æ¥å…¥ LLMï¼Œå®ç°â€œè‡ªç„¶è¯­è¨€ â†’ è®¾å¤‡æ§åˆ¶â€</a></td><td align="left">â˜…â˜…</td></tr><tr><td align="left">4</td><td align="left"><strong>è¯­éŸ³ I/Oï¼šéº¦å…‹é£æ•°æ®ä¸Šä¼  + è¯­éŸ³è¯†åˆ« + è¯­éŸ³åˆæˆå›æ”¾</strong></td><td align="left">â˜…â˜…â˜…</td></tr><tr><td align="left">5</td><td align="left"><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.emqx.com%2Fzh%2Fblog%2Fesp32-and-mcp-over-mqtt-5" target="_blank" title="https://www.emqx.com/zh/blog/esp32-and-mcp-over-mqtt-5" ref="nofollow noopener noreferrer">äººæ ¼ã€æƒ…æ„Ÿã€è®°å¿†ï¼šä»â€œæ§åˆ¶å™¨â€åˆ°â€œé™ªä¼´ä½“â€</a></td><td align="left">â˜…â˜…â˜…</td></tr><tr><td align="left">6</td><td align="left"><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.emqx.com%2Fzh%2Fblog%2Fesp32-and-mcp-over-mqtt-6" target="_blank" title="https://www.emqx.com/zh/blog/esp32-and-mcp-over-mqtt-6" ref="nofollow noopener noreferrer">ç»™æ™ºèƒ½ä½“å¢åŠ â€œçœ¼ç›â€ï¼šå›¾åƒé‡‡é›† + å¤šæ¨¡æ€ç†è§£</a></td><td align="left">â˜…â˜…â˜…</td></tr></tbody></table>
<h2 data-id="heading-1">å›é¡¾ï¼šæ¥å…¥ LLM å®ç°ã€Œè‡ªç„¶è¯­è¨€ â†’ è®¾å¤‡æ§åˆ¶ã€</h2>
<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æ„å»ºäº†ä»è‡ªç„¶è¯­è¨€æŒ‡ä»¤åˆ°è®¾å¤‡æ§åˆ¶è°ƒç”¨çš„å®Œæ•´é“¾è·¯ã€‚é€šè¿‡é›†æˆå¤§è¯­è¨€æ¨¡å‹ç»“åˆ MCP over MQTT çš„é€šä¿¡åè®®ï¼Œå®ç°äº†è®¾å¤‡æ™ºèƒ½ä½“çš„é›å½¢ã€‚è¿™ä¸€æ™ºèƒ½ä½“ä¸ä»…èƒ½ã€Œç†è§£ã€ç”¨æˆ·è¾“å…¥çš„æ–‡å­—ï¼Œè¿˜èƒ½æ ¹æ®è¯­ä¹‰ç”Ÿæˆå‡½æ•°è°ƒç”¨å¹¶ä½œç”¨äºçœŸå®è®¾å¤‡ã€‚ç„¶è€Œï¼Œçº¯æ–‡æœ¬çš„äº¤äº’æ–¹å¼åœ¨ç”¨æˆ·ä½“éªŒä¸Šä»å­˜åœ¨å±€é™ï¼Œå¯¹ç”¨æˆ·æ¥è¯´å¹¶ä¸ç›´è§‚å’Œè‡ªç„¶ã€‚</p>
<p>æœ¬æœŸæˆ‘ä»¬å°†å®ç°äº¤äº’æ–¹å¼çš„å…¨é¢å‡çº§ï¼šé€šè¿‡é›†æˆè¯­éŸ³è¯†åˆ«ï¼ˆASRï¼‰ä¸è¯­éŸ³åˆæˆï¼ˆTTSï¼‰ç»„ä»¶ï¼Œæ„å»ºå®Œæ•´çš„è¯­éŸ³äº¤äº’æ™ºèƒ½ä½“ï¼Œè®©ç”¨æˆ·å¯ä»¥é€šè¿‡è¯­éŸ³æ–¹å¼ç›´æ¥ä¸è®¾å¤‡è¿›è¡Œæ²Ÿé€šã€‚</p>
<h2 data-id="heading-2">æœ¬ç¯‡ç›®æ ‡ï¼šè®©æ™ºèƒ½ä½“èƒ½ã€Œå¬ã€èƒ½ã€Œè¯´ã€</h2>
<p>æˆ‘ä»¬æœŸæœ›å®ç°è¿™æ ·çš„åœºæ™¯ï¼š</p>
<ul>
<li>ä½ å¯¹ç€æ™ºèƒ½ä½“è¯´ï¼š"æˆ‘ä»Šå¤©æœ‰ç‚¹ç´¯äº†"ã€‚</li>
<li>ESP32 æ”¶é›†ä½ çš„è¯­éŸ³å¹¶ä¸Šä¼ åˆ°äº‘ç«¯ã€‚</li>
<li>AI ç†è§£ä½ çš„æƒ…æ„Ÿï¼Œç”Ÿæˆå…³æ€€å¼çš„å›åº”ã€‚</li>
<li>æ™ºèƒ½ä½“ç”¨æ¸©æŸ”çš„å£°éŸ³è¯´ï¼š"è¾›è‹¦äº†ï¼Œè¦ä¸è¦æˆ‘ä¸ºä½ æ”¾ç‚¹è½»æŸ”çš„éŸ³ä¹ï¼Ÿ"</li>
</ul>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†åœ¨åŸæœ‰æ¶æ„çš„åŸºç¡€ä¸Šï¼Œæ–°å¢è¯­éŸ³è¯†åˆ«ä¸è¯­éŸ³åˆæˆç»„ä»¶ï¼Œè®©æ™ºèƒ½ä½“å…·å¤‡ã€Œå¬ã€å’Œã€Œè¯´ã€çš„èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-3"><strong>æ¶æ„å‡çº§ä¸å®ç°è·¯å¾„</strong></h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9943fce125e14463a3f97be104ece6d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRU1RWA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767677786&amp;x-signature=1FBSDF5vgZoHQ94Lna6DVCU0IDU%3D" alt="image.png" loading="lazy"/></p>
å…¨æ–°æ¶æ„ï¼šæ–°å¢è¯­éŸ³è¯†åˆ«ï¼ˆASRï¼‰ä¸è¯­éŸ³åˆæˆï¼ˆTTSï¼‰ç»„ä»¶
<ol>
<li>ESP32 è°ƒç”¨éº¦å…‹é£æ¨¡å—ï¼Œå½•åˆ¶ç”¨æˆ·è¯­éŸ³ï¼Œç”Ÿæˆæœ¬åœ°éŸ³é¢‘æ–‡ä»¶ï¼›</li>
<li>ESP32 é€šè¿‡ MQTT åè®®æŠŠéŸ³é¢‘æ•°æ®ä¸Šä¼ è‡³äº‘ç«¯ï¼Œç”± EMQX æ•°æ®æ¡¥æ¥åˆ° Web Hookï¼Œç„¶åç”± App å¤„ç†ï¼›</li>
<li>App å°†éŸ³é¢‘æ–‡ä»¶å‘é€è‡³ ASRï¼ˆè¯­éŸ³è¯†åˆ«ï¼‰+ TTSï¼ˆè¯­éŸ³åˆæˆæœåŠ¡ï¼‰ï¼Œç”Ÿæˆå›å¤è¯­éŸ³ï¼›</li>
<li>è¯†åˆ«å‡ºçš„æ–‡æœ¬è¢«ä¼ é€ç»™å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰</li>
<li>LLM ç†è§£ä¸Šä¸‹æ–‡è¯­ä¹‰å¹¶é€šè¿‡ MCP Over MQTT è°ƒç”¨éƒ¨ç½²åœ¨ ESP32 ä¸Šçš„å·¥å…·ï¼Œå®ç°è®¾å¤‡æ§åˆ¶ï¼›</li>
<li>App å°†ç”Ÿæˆçš„è¯­éŸ³å‹ç¼©ä¸º MP3 æ ¼å¼ï¼Œç¼–ç ä¸º Base64 æ ¼å¼åï¼Œå†æ¬¡é€šè¿‡ MQTT å°†æ–‡ä»¶ä¸‹å‘è‡³ ESP32ï¼›</li>
<li>ESP32 æ’­æ”¾éŸ³é¢‘æ–‡ä»¶ï¼Œå®ç°å®Œæ•´çš„è¯­éŸ³äº¤äº’é—­ç¯ã€‚</li>
</ol>
<p>è¿™ç§æ¶æ„å……åˆ†å‘æŒ¥äº† MQTT åœ¨ç‰©è”ç½‘åœºæ™¯ä¸‹çš„è½»é‡é€šä¿¡ä¼˜åŠ¿ï¼ŒåŒæ—¶å€ŸåŠ©äº‘ç«¯å¼ºå¤§çš„ LLMã€ASR å’Œ TTS èƒ½åŠ›ï¼Œä¸ºç»ˆç«¯è®¾å¤‡æä¾›äº†è‡ªç„¶ã€ä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„è¯­éŸ³äº¤äº’ä½“éªŒã€‚ESP32 ä¿æŒè®¾å¤‡è½»é‡åŒ–ï¼Œåªè´Ÿè´£éŸ³é¢‘é‡‡é›†ä¸æ’­æ”¾ï¼Œæ ¸å¿ƒå¤„ç†ä»»åŠ¡åˆ™ç”±äº‘ç«¯å®Œæˆï¼Œä»è€Œå…¼é¡¾äº†æ€§èƒ½ä¸æˆæœ¬ã€‚</p>
<p>ç”±äºåœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­å·²ç»å®ç°äº†é€šè¿‡ MCP åè®®æ§åˆ¶ç»ˆç«¯è®¾å¤‡çš„èƒ½åŠ›ï¼ˆä¸Šè¿°æ¶æ„å›¾ä¸­çš„æ­¥éª¤ 4 å’Œ 5 ï¼‰ï¼Œæˆ‘ä»¬æœ¬ç¯‡æ–‡ç« çš„ä¸»è¦ç²¾åŠ›æ”¾åœ¨è¯­éŸ³å¤„ç†ä¸Šã€‚</p>
<h2 data-id="heading-4">ESP32ï¼šæ™ºèƒ½è¯­éŸ³é‡‡é›†</h2>
<h3 data-id="heading-5">ç¡¬ä»¶é…ç½®</h3>
<p>æˆ‘ä»¬éœ€è¦é…ç½®ä¸¤å¥— I2S æ¥å£ï¼Œä¸€å¥—ç”¨äºå½•éŸ³ï¼Œä¸€å¥—ç”¨äºæ’­æ”¾ã€‚</p>
<p><strong>å½•éŸ³é…ç½®ï¼ˆI2S_NUM_0ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// å½•éŸ³å¼•è„šé…ç½®</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> I2S_REC_BCLK  7    <span class="hljs-comment">// æ—¶é’Ÿä¿¡å·</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> I2S_REC_LRCL  8    <span class="hljs-comment">// å·¦å³å£°é“åˆ‡æ¢</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> I2S_REC_DOUT  9    <span class="hljs-comment">// æ•°æ®è¾“å…¥</span></span>
<span class="hljs-comment">// å½•éŸ³å‚æ•°</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> I2S_SAMPLE_RATE   8000    <span class="hljs-comment">// 8kHzé‡‡æ ·ç‡ï¼Œé€‚åˆè¯­éŸ³</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> I2S_SAMPLE_BITS   16      <span class="hljs-comment">// 16ä½æ·±åº¦</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> I2S_CHANNEL_NUM   1       <span class="hljs-comment">// å•å£°é“</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> RECORD_SECONDS    3       <span class="hljs-comment">// å½•éŸ³3ç§’</span></span>
</code></pre>
<p><strong>æ’­æ”¾é…ç½®ï¼ˆI2S_NUM_1ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// æ’­æ”¾å¼•è„šé…ç½®</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> I2S_PLAY_BCLK  2   <span class="hljs-comment">// æ—¶é’Ÿä¿¡å·</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> I2S_PLAY_LRCL  1   <span class="hljs-comment">// å·¦å³å£°é“åˆ‡æ¢  </span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> I2S_PLAY_DOUT  42  <span class="hljs-comment">// æ•°æ®è¾“å‡º</span></span>
</code></pre>
<h3 data-id="heading-6">æ™ºèƒ½è¯­éŸ³æ£€æµ‹ç®—æ³•</h3>
<p>é—®é¢˜çš„å…³é”®åœ¨äºå¦‚ä½•è®© ESP32 çŸ¥é“ä»€ä¹ˆæ—¶å€™è¯¥å¼€å§‹å½•éŸ³ï¼Œæ—¢è¦èŠ‚çœè®¾å¤‡ç”µé‡ï¼Œä¹Ÿè¦ç¡®ä¿å½•éŸ³çš„å®Œæ•´æ€§ã€‚</p>
<p><strong>è¯­éŸ³èƒ½é‡æ£€æµ‹ï¼š</strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">uint32_t</span> <span class="hljs-title function_">calculateAudioEnergy</span><span class="hljs-params">(<span class="hljs-type">int16_t</span> *samples, <span class="hljs-type">size_t</span> count)</span> {
  <span class="hljs-type">uint64_t</span> sum = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; count; i++) {
    <span class="hljs-type">int32_t</span> s = samples[i];
    sum += (<span class="hljs-type">uint64_t</span>)(s * s);  <span class="hljs-comment">// è®¡ç®—éŸ³é¢‘èƒ½é‡</span>
  }
  <span class="hljs-keyword">return</span> (<span class="hljs-type">uint32_t</span>)(sum / count);
}
</code></pre>
<p><strong>é˜²è¯¯è§¦æœºåˆ¶ï¼š</strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// æ»‘åŠ¨å¹³å‡è¿‡æ»¤å™ªéŸ³</span>
<span class="hljs-type">static</span> <span class="hljs-type">uint32_t</span> energyHistory[<span class="hljs-number">5</span>] = {<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>};
<span class="hljs-type">static</span> <span class="hljs-type">int</span> historyIndex = <span class="hljs-number">0</span>;
<span class="hljs-comment">// éœ€è¦è‡³å°‘3ä¸ªæ ·æœ¬éƒ½è¶…è¿‡é˜ˆå€¼æ‰è§¦å‘å½•éŸ³</span>
<span class="hljs-type">int</span> highEnergyCount = <span class="hljs-number">0</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {
  <span class="hljs-keyword">if</span> (energyHistory[i] &gt; ENERGY_THRESHOLD) {
    highEnergyCount++;
  }
}
<span class="hljs-keyword">if</span> (highEnergyCount &gt;= <span class="hljs-number">3</span> &amp;&amp; avgEnergy &gt; ENERGY_THRESHOLD) {
  Serial.println(<span class="hljs-string">"æ£€æµ‹åˆ°è¯­éŸ³ï¼Œå¼€å§‹å½•éŸ³ï¼"</span>);
  performRecording();
}
</code></pre>
<h3 data-id="heading-7">çŠ¶æ€æœºç®¡ç†</h3>
<p>ä¸ºäº†é¿å…å½•éŸ³å’Œæ’­æ”¾å†²çªï¼Œæˆ‘ä»¬ç”¨çŠ¶æ€æœºæ¥ç®¡ç†ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">SystemState</span> {</span>
  STATE_IDLE,           <span class="hljs-comment">// ç©ºé—²çŠ¶æ€ï¼ˆç›‘å¬è¯­éŸ³ï¼‰</span>
  STATE_RECORDING,      <span class="hljs-comment">// æ­£åœ¨å½•éŸ³</span>
  STATE_PLAYING,        <span class="hljs-comment">// æ­£åœ¨æ’­æ”¾</span>
  STATE_COOLDOWN        <span class="hljs-comment">// æ’­æ”¾åå†·å´æœŸ</span>
};
</code></pre>
<p><strong>é˜²å›å£°å¾ªç¯ï¼š</strong></p>
<ul>
<li>æ’­æ”¾è¯­éŸ³åè¿›å…¥å†·å´æœŸï¼ˆ3ç§’ï¼‰ã€‚</li>
<li>æ¸…ç©ºéŸ³é¢‘ç¼“å†²åŒºï¼Œé¿å…æŠŠå›æ”¾çš„å£°éŸ³å½“æˆæ–°çš„è¯­éŸ³æŒ‡ä»¤ã€‚</li>
<li>è¿ç»­å½•éŸ³é™åˆ¶ï¼Œé¿å…æ— é™å¾ªç¯å¯¹è¯ã€‚</li>
</ul>
<h3 data-id="heading-8">éŸ³é¢‘æ•°æ®ä¸Šä¼ </h3>
<p>å½•éŸ³å®Œæˆåï¼ŒESP32 ä¼šç”Ÿæˆæ ‡å‡†çš„ WAV æ–‡ä»¶å¹¶é€šè¿‡ MQTT ä¸Šä¼ ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// æ„å»º WAV æ–‡ä»¶å¤´</span>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">WAVHeader</span> {</span>
  <span class="hljs-type">char</span> riff_header[<span class="hljs-number">4</span>];       <span class="hljs-comment">// "RIFF"</span>
  <span class="hljs-type">uint32_t</span> wav_size;         <span class="hljs-comment">// æ–‡ä»¶å¤§å°</span>
  <span class="hljs-type">char</span> wave_header[<span class="hljs-number">4</span>];       <span class="hljs-comment">// "WAVE"</span>
  <span class="hljs-type">char</span> fmt_header[<span class="hljs-number">4</span>];        <span class="hljs-comment">// "fmt "</span>
  <span class="hljs-type">uint32_t</span> fmt_chunk_size;   <span class="hljs-comment">// æ ¼å¼å—å¤§å°</span>
  <span class="hljs-type">uint16_t</span> audio_format;     <span class="hljs-comment">// éŸ³é¢‘æ ¼å¼(1=PCM)</span>
  <span class="hljs-type">uint16_t</span> num_channels;     <span class="hljs-comment">// å£°é“æ•°</span>
  <span class="hljs-type">uint32_t</span> sample_rate;      <span class="hljs-comment">// é‡‡æ ·ç‡</span>
  <span class="hljs-type">uint32_t</span> byte_rate;        <span class="hljs-comment">// å­—èŠ‚ç‡</span>
  <span class="hljs-type">uint16_t</span> block_align;      <span class="hljs-comment">// å—å¯¹é½</span>
  <span class="hljs-type">uint16_t</span> bits_per_sample;  <span class="hljs-comment">// ä½æ·±åº¦</span>
  <span class="hljs-type">char</span> data_header[<span class="hljs-number">4</span>];       <span class="hljs-comment">// "data"</span>
  <span class="hljs-type">uint32_t</span> data_bytes;       <span class="hljs-comment">// æ•°æ®å¤§å°</span>
} WAVHeader;
<span class="hljs-comment">// é€šè¿‡ MQTT å‘é€éŸ³é¢‘</span>
mqtt_client.publish(<span class="hljs-string">"emqx/esp32/audio"</span>, wav_buffer, wav_size);
</code></pre>
<h2 data-id="heading-9">Pythonï¼šAI æƒ…æ„Ÿå¤„ç†</h2>
<h3 data-id="heading-10">æœåŠ¡æ¶æ„</h3>
<p>æˆ‘ä»¬ç”¨ FastAPI æ„å»ºäº†å¼‚æ­¥çš„éŸ³é¢‘å¤„ç†æœåŠ¡ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI, HTTPException, BackgroundTasks
<span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> AsyncOpenAI
<span class="hljs-keyword">import</span> base64
<span class="hljs-keyword">import</span> lameenc
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
app = FastAPI(title=<span class="hljs-string">"è¯­éŸ³æƒ…æ„ŸåŠ©æ‰‹API"</span>, version=<span class="hljs-string">"1.0.0"</span>)
<span class="hljs-comment"># é€šä¹‰åƒé—®å®¢æˆ·ç«¯</span>
openai_client = AsyncOpenAI(
    api_key=<span class="hljs-string">"your-dashscope-api-key"</span>,
    base_url=<span class="hljs-string">"https://dashscope.aliyuncs.com/compatible-mode/v1"</span>
)
</code></pre>
<h3 data-id="heading-11">æƒ…æ„Ÿæç¤ºè¯è®¾è®¡</h3>
<p>è¿™æ˜¯è®© AI ç†è§£æƒ…æ„Ÿçš„å…³é”®ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">OPENAI_PROMPT</span> = <span class="hljs-string">"""
åœ¨è¿™ä¸ªä¼šè¯ä¸­ï¼Œæ‚¨å°†ä½œä¸ºç®€å•çš„æƒ…æ„ŸåŠ©æ‰‹ï¼Œä¾æ®æˆ‘æä¾›çš„è¯­éŸ³ï¼Œç”Ÿæˆç²¾ç®€å›å¤ã€‚
è¯·æ³¨æ„å›å¤ä¸èƒ½è¶…è¿‡ 20 ä¸ªå­—ç¬¦å¹¶ä¸”å›å¤çš„å†…å®¹åº”å½“æ˜¯å¯¹è¯­éŸ³å†…å®¹çš„æƒ…æ„Ÿåˆ†ææˆ–å›åº”ã€‚
"""</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆé™åˆ¶ 20 å­—ï¼Ÿ</strong></p>
<ul>
<li>è®©å›åº”æ›´ç²¾å‡†ï¼Œé¿å…å•°å—¦</li>
<li>å‡å°‘è¯­éŸ³åˆæˆå’Œä¼ è¾“æ—¶é—´</li>
<li>æ›´ç¬¦åˆæƒ…æ„Ÿé™ªä¼´çš„æ¸©æš–ç®€æ´é£æ ¼</li>
</ul>
<h3 data-id="heading-12">å¤šæ¨¡æ€ AI è°ƒç”¨</h3>
<p>è¿™æ˜¯æ•´ä¸ªç³»ç»Ÿçš„æ ¸å¿ƒï¼Œç›´æ¥ç”¨è¯­éŸ³è¾“å…¥ç”Ÿæˆè¯­éŸ³è¾“å‡ºï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">call_qwen_ai_generate_audio</span>(<span class="hljs-params">base64_audio: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bytes</span>:
    completion = <span class="hljs-keyword">await</span> openai_client.chat.completions.create(
        model=<span class="hljs-string">"qwen-omni-turbo"</span>,  <span class="hljs-comment"># å¤šæ¨¡æ€æ¨¡å‹</span>
        messages=[
            {
                <span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>,
                <span class="hljs-string">"content"</span>: [
                    {
                        <span class="hljs-string">"type"</span>: <span class="hljs-string">"input_audio"</span>,
                        <span class="hljs-string">"input_audio"</span>: {
                            <span class="hljs-string">"data"</span>: <span class="hljs-string">f"data:;base64,<span class="hljs-subst">{base64_audio}</span>"</span>,
                            <span class="hljs-string">"format"</span>: <span class="hljs-string">"wav"</span>,
                        },
                    },
                    {
                        <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>, 
                        <span class="hljs-string">"text"</span>: <span class="hljs-string">"ä½œä¸ºæƒ…æ„ŸåŠ©æ‰‹ï¼Œç”¨ä¸è¶…è¿‡20å­—å›åº”ç”¨æˆ·çš„æƒ…æ„Ÿéœ€æ±‚"</span>
                    }
                ],
            }
        ],
        modalities=[<span class="hljs-string">"text"</span>, <span class="hljs-string">"audio"</span>],        <span class="hljs-comment"># åŒæ—¶è¾“å‡ºæ–‡æœ¬å’ŒéŸ³é¢‘</span>
        audio={<span class="hljs-string">"voice"</span>: <span class="hljs-string">"Cherry"</span>, <span class="hljs-string">"format"</span>: <span class="hljs-string">"wav"</span>},  <span class="hljs-comment"># ä½¿ç”¨ Cherry éŸ³è‰²</span>
        stream=<span class="hljs-literal">True</span>,                         <span class="hljs-comment"># æµå¼å¤„ç†</span>
        stream_options={<span class="hljs-string">"include_usage"</span>: <span class="hljs-literal">True</span>}
    )
    <span class="hljs-comment"># æ¥æ”¶æµå¼å“åº”</span>
    text_string = <span class="hljs-string">""</span>
    audio_string = <span class="hljs-string">""</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> completion:
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> chunk.choices:
            <span class="hljs-keyword">continue</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(chunk.choices[<span class="hljs-number">0</span>].delta, <span class="hljs-string">"audio"</span>):
            audio_string += chunk.choices[<span class="hljs-number">0</span>].delta.audio[<span class="hljs-string">"data"</span>]
        <span class="hljs-keyword">elif</span> <span class="hljs-built_in">hasattr</span>(chunk.choices[<span class="hljs-number">0</span>].delta, <span class="hljs-string">"content"</span>):
            text_string += chunk.choices[<span class="hljs-number">0</span>].delta.content
    <span class="hljs-comment"># è¿”å›éŸ³é¢‘æ•°æ®</span>
    decoded_audio = base64.b64decode(audio_string)
    <span class="hljs-keyword">return</span> decoded_audio
</code></pre>
<p><strong>è¿™ç§æ–¹å¼çš„ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>ç«¯åˆ°ç«¯å¤„ç†</strong>ï¼šè¯­éŸ³ç›´æ¥åˆ°è¯­éŸ³ï¼Œä¿æŒæƒ…æ„Ÿè¿è´¯æ€§</li>
<li><strong>ç†è§£æ›´å‡†ç¡®</strong>ï¼šAI èƒ½å¬å‡ºè¯­è°ƒã€æƒ…ç»ªï¼Œä¸åªæ˜¯æ–‡å­—å†…å®¹</li>
<li><strong>å›åº”æ›´è‡ªç„¶</strong>ï¼šç”Ÿæˆçš„è¯­éŸ³å¸¦æœ‰åˆé€‚çš„æƒ…æ„Ÿè‰²å½©</li>
</ul>
<h3 data-id="heading-13">éŸ³é¢‘æ ¼å¼ä¼˜åŒ–</h3>
<p>AI ç”Ÿæˆçš„æ˜¯ WAV æ ¼å¼ï¼Œæ–‡ä»¶æ¯”è¾ƒå¤§ï¼Œæˆ‘ä»¬è½¬æˆ MP3 å‹ç¼©ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">convert_audio_to_mp3</span>(<span class="hljs-params">decoded_audio: <span class="hljs-built_in">bytes</span>, output_file: <span class="hljs-built_in">str</span></span>):
    audio_np = np.frombuffer(decoded_audio, dtype=np.int16)
    encoder = lameenc.Encoder()
    encoder.set_bit_rate(<span class="hljs-number">32</span>)        <span class="hljs-comment"># ä½ç ç‡ï¼Œå‡å°‘ä¼ è¾“é‡</span>
    encoder.set_in_sample_rate(<span class="hljs-number">24000</span>)
    encoder.set_channels(<span class="hljs-number">1</span>)
    encoder.set_quality(<span class="hljs-number">7</span>)          <span class="hljs-comment"># å¹³è¡¡è´¨é‡ä¸å¤§å°</span>
    mp3_data = encoder.encode(audio_np.tobytes())
    mp3_data += encoder.flush()
    <span class="hljs-comment"># ä¿å­˜æ–‡ä»¶å¹¶è¿”å› Base64</span>
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(output_file, <span class="hljs-string">'wb'</span>) <span class="hljs-keyword">as</span> f:
        f.write(mp3_data)
    <span class="hljs-keyword">return</span> base64.b64encode(mp3_data).decode()
</code></pre>
<h3 data-id="heading-14">å¼‚æ­¥å¤„ç†æµç¨‹</h3>
<p>ä¸ºäº†ä¸é˜»å¡ API å“åº”ï¼Œæˆ‘ä»¬ç”¨åå°ä»»åŠ¡å¤„ç†ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">"/process_audio"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">process_audio</span>(<span class="hljs-params">request: AudioRequest, background_tasks: BackgroundTasks</span>):
    task_id = <span class="hljs-built_in">str</span>(uuid.uuid4())
    <span class="hljs-comment"># æ·»åŠ åå°ä»»åŠ¡</span>
    background_tasks.add_task(
        process_audio_task,
        request.audio,
        task_id
    )
    <span class="hljs-keyword">return</span> AudioResponse(
        success=<span class="hljs-literal">True</span>,
        message=<span class="hljs-string">"éŸ³é¢‘å¤„ç†ä»»åŠ¡å·²å¯åŠ¨"</span>
    )
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">process_audio_task</span>(<span class="hljs-params">base64_audio: <span class="hljs-built_in">str</span>, task_id: <span class="hljs-built_in">str</span></span>):
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># 1. è°ƒç”¨ AI ç”Ÿæˆè¯­éŸ³å›åº”</span>
        decoded_audio = <span class="hljs-keyword">await</span> call_qwen_ai_generate_audio(base64_audio)
        <span class="hljs-comment"># 2. è½¬æ¢ä¸º MP3 æ ¼å¼</span>
        output_file = <span class="hljs-string">f"audio_response_<span class="hljs-subst">{task_id}</span>.mp3"</span>
        base64_mp3_audio = convert_audio_to_mp3(decoded_audio, output_file)
        <span class="hljs-comment"># 3. é€šè¿‡ MQTT å‘é€ç»™ ESP32</span>
        <span class="hljs-keyword">await</span> publish_to_mqtt(base64_mp3_audio)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        logger.error(<span class="hljs-string">f"å¤„ç†éŸ³é¢‘ä»»åŠ¡å¼‚å¸¸: <span class="hljs-subst">{e}</span>"</span>)

</code></pre>
<h2 data-id="heading-15">EMQXï¼šæ¶ˆæ¯ä»£ç†</h2>
<h3 data-id="heading-16">Topic è®¾è®¡</h3>
<pre><code class="hljs language-bash" lang="bash">emqx/esp32/audio      â†’ ESP32 ä¸Šä¼ å½•éŸ³
emqx/esp32/playaudio  â†’ ä¸‹å‘æ’­æ”¾éŸ³é¢‘
</code></pre>
<h3 data-id="heading-17">Webhook é…ç½®</h3>
<p>åœ¨ EMQX æ§åˆ¶å°é…ç½® Webhook è§„åˆ™ï¼Œå½“æ”¶åˆ°éŸ³é¢‘æ¶ˆæ¯æ—¶è‡ªåŠ¨è½¬å‘ç»™ Python æœåŠ¡ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://your-server:5005/process_audio"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"POST"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"headers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"Content-Type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"application/json"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"body"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"audio"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"${payload}"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-18"><strong>ç³»ç»Ÿéƒ¨ç½²ä¸é…ç½®æµç¨‹</strong></h2>
<h3 data-id="heading-19">ç¯å¢ƒå‡†å¤‡</h3>
<p><strong>Python ä¾èµ–ï¼š</strong></p>
<pre><code class="hljs">pip install fastapi uvicorn httpx lameenc numpy openai pydantic
</code></pre>
<p><strong>ESP32 åº“ä¾èµ–ï¼š</strong></p>
<ul>
<li>WiFiï¼šç½‘ç»œè¿æ¥</li>
<li>PubSubClientï¼šMQTT å®¢æˆ·ç«¯</li>
<li>SPIFFSï¼šæ–‡ä»¶ç³»ç»Ÿï¼ˆå­˜å‚¨ä¸´æ—¶éŸ³é¢‘æ–‡ä»¶ï¼‰</li>
<li>ESP32Audioï¼šéŸ³é¢‘ç¼–è§£ç åº“</li>
</ul>
<h3 data-id="heading-20">é…ç½®æµç¨‹</h3>
<ol>
<li>
<p><strong>è·å–é€šä¹‰åƒé—® API Key</strong></p>
<ul>
<li>ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°ã€‚</li>
<li>å¼€é€š DashScope æœåŠ¡ã€‚</li>
<li>è·å– API Keyã€‚</li>
</ul>
</li>
<li>
<p><strong>é…ç½® EMQX</strong></p>
<ul>
<li>åˆ›å»ºè®¾å¤‡è®¤è¯ä¿¡æ¯ã€‚</li>
<li>é…ç½® Webhook è§„åˆ™ã€‚</li>
<li>è®¾ç½®æ¶ˆæ¯è·¯ç”±ã€‚</li>
</ul>
</li>
<li>
<p><strong>ESP32 é…ç½®</strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// WiFi é…ç½®</span>
<span class="hljs-type">const</span> <span class="hljs-type">char</span> *ssid = <span class="hljs-string">"your-wifi-name"</span>;
<span class="hljs-type">const</span> <span class="hljs-type">char</span> *password = <span class="hljs-string">"your-wifi-password"</span>;
<span class="hljs-comment">// MQTT é…ç½®</span>
<span class="hljs-type">const</span> <span class="hljs-type">char</span> *mqtt_broker = <span class="hljs-string">"broker.emqx.io"</span>;
<span class="hljs-type">const</span> <span class="hljs-type">char</span> *mqtt_username = <span class="hljs-string">"emqx"</span>;
<span class="hljs-type">const</span> <span class="hljs-type">char</span> *mqtt_password = <span class="hljs-string">"public"</span>;
</code></pre>
</li>
<li>
<p><strong>Python æœåŠ¡é…ç½®</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># API é…ç½®</span>
openai_client = AsyncOpenAI(
    api_key=<span class="hljs-string">"your-dashscope-api-key"</span>,
    base_url=<span class="hljs-string">"https://dashscope.aliyuncs.com/compatible-mode/v1"</span>
)
<span class="hljs-comment"># EMQX é…ç½®</span>
EMQX_HTTP_API_URL = <span class="hljs-string">"http://127.0.0.1:18083"</span>
EMQX_USERNAME = <span class="hljs-string">"your-username"</span>
EMQX_PASSWORD = <span class="hljs-string">"your-password"</span>
</code></pre>
</li>
</ol>
<h2 data-id="heading-21"><strong>å®æµ‹æ•ˆæœä¸æ€§èƒ½è¡¨ç°</strong></h2>
<h3 data-id="heading-22">ç¤ºä¾‹å¯¹è¯åœºæ™¯</h3>
<p><strong>åœºæ™¯ä¸€ï¼šæƒ…æ„Ÿå®‰æ…°</strong></p>
<ul>
<li>ç”¨æˆ·ï¼ˆç–²æƒ«çš„è¯­è°ƒï¼‰ï¼š"æˆ‘ä»Šå¤©å·¥ä½œå¥½ç´¯å•Š..."</li>
<li>AIå›åº”ï¼ˆæ¸©æŸ”ï¼‰ï¼š"è¾›è‹¦ä½ äº†ï¼Œè¦å¥½å¥½ä¼‘æ¯å“¦"</li>
</ul>
<p><strong>åœºæ™¯äºŒï¼šæ—¥å¸¸èŠå¤©</strong></p>
<ul>
<li>ç”¨æˆ·ï¼ˆå¼€å¿ƒï¼‰ï¼š"ä»Šå¤©å¤©æ°”çœŸä¸é”™ï¼"</li>
<li>AIå›åº”ï¼ˆæ´»æ³¼ï¼‰ï¼š"æ˜¯å‘€ï¼Œå¿ƒæƒ…ä¹Ÿå˜å¥½äº†å‘¢"</li>
</ul>
<p><strong>åœºæ™¯ä¸‰ï¼šå¯»æ±‚å»ºè®®</strong></p>
<ul>
<li>ç”¨æˆ·ï¼ˆçŠ¹è±«ï¼‰ï¼š"æˆ‘ä¸çŸ¥é“è¯¥æ€ä¹ˆåŠ..."</li>
<li>AIå›åº”ï¼ˆé¼“åŠ±ï¼‰ï¼š"æ…¢æ…¢æ¥ï¼Œæˆ‘ä»¬ä¸€èµ·æƒ³æƒ³"</li>
</ul>
<h3 data-id="heading-23">æ€§èƒ½è¡¨ç°</h3>
<p><strong>å“åº”æ—¶é—´ï¼š</strong></p>
<ul>
<li>è¯­éŸ³æ£€æµ‹ï¼šå®æ—¶ï¼ˆ&lt;100msï¼‰</li>
<li>AIå¤„ç†ï¼š1-2 ç§’</li>
<li>éŸ³é¢‘ä¸‹å‘ï¼š&lt; 500ms</li>
<li><strong>æ€»å»¶è¿Ÿ</strong>ï¼šçº¦ 3 ç§’å†…å®Œæˆæ•´ä¸ªäº¤äº’</li>
</ul>
<p><strong>éŸ³è´¨è¡¨ç°ï¼š</strong></p>
<ul>
<li>Cherry éŸ³è‰²è‡ªç„¶æ¸©æš–</li>
<li>MP3 32kbps éŸ³è´¨æ¸…æ™°</li>
<li>æ”¯æŒæƒ…æ„Ÿè¯­è°ƒå˜åŒ–</li>
</ul>
<h2 data-id="heading-24">ç°å­˜é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<p>åœ¨å®é™…æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬é‡åˆ°äº†å‡ ä¸ªå…¸å‹é—®é¢˜ï¼š</p>
<ul>
<li>å›å£°å¾ªç¯ï¼šESP32 ä¼šæŠŠè‡ªå·±æ’­æ”¾çš„å£°éŸ³å†æ¬¡å½•å…¥ï¼Œå½¢æˆæ— é™å›æ”¾ã€‚</li>
</ul>
<p>æˆ‘ä»¬åœ¨æ’­æ”¾åå¢åŠ äº† 3 ç§’å†·å´æœŸï¼Œå¹¶åœ¨æ¯æ¬¡æ’­æ”¾ç»“æŸåæ¸…ç©º I2S ç¼“å†²åŒºï¼ŒåŒæ—¶é™åˆ¶è¿ç»­å½•éŸ³çš„æ¬¡æ•°ï¼Œé˜²æ­¢å¾ªç¯æ”¾å¤§ã€‚</p>
<ul>
<li>å½•éŸ³è¯¯è§¦ï¼šç¯å¢ƒå™ªéŸ³æˆ–ç©ºè°ƒå£°å¯¼è‡´è®¾å¤‡é¢‘ç¹å¯åŠ¨å½•éŸ³ã€‚</li>
</ul>
<p>æˆ‘ä»¬é€šè¿‡æé«˜èƒ½é‡é˜ˆå€¼ã€åŠ å…¥æ»‘åŠ¨å¹³å‡è¿‡æ»¤ï¼Œä»¥åŠé‡‡ç”¨å¤šæ ·æœ¬ç¡®è®¤æœºåˆ¶ï¼Œæœ‰æ•ˆé™ä½äº†è¯¯è§¦å‘çš„æ¦‚ç‡ã€‚</p>
<ul>
<li>ç½‘ç»œæ–­çº¿ï¼šWiFi ä¸ç¨³å®šæ—¶ä¼šå¯¼è‡´ MQTT è¿æ¥ä¸­æ–­ã€‚</li>
</ul>
<p>ä¸ºä¿è¯ç³»ç»Ÿç¨³å®šè¿è¡Œï¼Œæˆ‘ä»¬å®ç°äº†è‡ªåŠ¨é‡è¿æœºåˆ¶ã€å¿ƒè·³æ£€æµ‹å’Œè¿æ¥çŠ¶æ€ç›‘æ§ï¼Œç¡®ä¿è®¾å¤‡åœ¨ç½‘ç»œæ³¢åŠ¨ä¸‹ä¾ç„¶èƒ½å¤Ÿå¯é å·¥ä½œã€‚</p>
<h2 data-id="heading-25">è¯­éŸ³äº¤äº’çš„å±€é™ä¸ä¼˜åŒ–</h2>
<h3 data-id="heading-26">å±€é™æ€§</h3>
<p>è¯¥æ–¹æ¡ˆç»“æ„æ¸…æ™°ã€éƒ¨ç½²ä¾¿æ·ï¼Œå¹¶å……åˆ†åˆ©ç”¨äº† MQTT çš„ç¨³å®šä¼ è¾“èƒ½åŠ›ï¼Œä½†ç”±äºäº¤äº’æ¨¡å¼çš„æ‰¹å¤„ç†ç‰¹æ€§ï¼Œä»å­˜åœ¨å¾ˆå¤šæ˜æ˜¾çš„å±€é™ï¼š</p>
<p><strong>æ‰¹å¤„ç†æ¨¡å¼å¯¼è‡´é«˜å»¶è¿Ÿ</strong></p>
<ul>
<li>è¯­éŸ³é‡‡é›†ã€LLM æ¨ç†ã€TTS åˆæˆã€éŸ³é¢‘æ’­æ”¾å¿…é¡»ä¸²è¡Œæ‰§è¡Œï¼Œç”¨æˆ·éœ€ç­‰å¾…æ•´ä¸ªæµç¨‹ç»“æŸã€‚</li>
<li>é•¿è¯­éŸ³è¾“å…¥æˆ–å¤æ‚è¯­ä¹‰è§£ææ—¶ï¼Œäº¤äº’å»¶è¿Ÿä¼šæ˜¾è‘—å¢åŠ ã€‚</li>
</ul>
<p><strong>ç¼ºä¹æµå¼äº¤äº’èƒ½åŠ›</strong></p>
<ul>
<li>ASR éœ€å®Œæ•´å½•éŸ³åæ‰å¼€å§‹è½¬å†™ï¼Œæ— æ³•å®æ—¶é€å¥è¯†åˆ«ã€‚</li>
<li>TTS å¿…é¡»ç­‰å¾…å…¨éƒ¨æ–‡æœ¬å°±ç»ªæ‰ç”Ÿæˆè¯­éŸ³ï¼Œæ— æ³•è¾¹åˆæˆè¾¹æ’­æ”¾ã€‚</li>
<li>éŸ³é¢‘ä¼ è¾“ä¾èµ–å®Œæ•´æ–‡ä»¶ä¸‹å‘ï¼Œæ— æ³•å®ç°æµå¼ä¼ è¾“ã€‚</li>
</ul>
<p><strong>å›ºå®šå½•éŸ³æ—¶é•¿é™åˆ¶</strong></p>
<ul>
<li>3 ç§’æ—¶é•¿å¯èƒ½å¯¼è‡´é•¿å¥è¢«æˆªæ–­ã€‚</li>
<li>çŸ­å¥åœºæ™¯ä¸‹å­˜åœ¨æ— æ•ˆç­‰å¾…ï¼Œé™ä½äº¤äº’æ•ˆç‡ã€‚</li>
</ul>
<p>è¿™äº›å› ç´ éƒ½é™åˆ¶äº†æ–¹æ¡ˆåœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„å®é™…å¯ç”¨æ€§ï¼Œä¸æ—¥å¸¸æ™ºèƒ½è¯­éŸ³åŠ©æ‰‹çš„ã€Œè¾¹è¯´è¾¹å¬ã€è¾¹åˆæˆè¾¹æ’­æ”¾ã€çš„ä½“éªŒæœ‰æ˜æ˜¾å·®è·ã€‚</p>
<h3 data-id="heading-27"><strong>ä¼˜åŒ–æ–¹å‘</strong></h3>
<p>ä¸ºäº†æå‡è¯­éŸ³æŒ‡ä»¤ã€å“åº”é€Ÿåº¦å’Œè¯­éŸ³äº¤äº’çš„è‡ªç„¶æ€§ï¼Œå¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹å‘è¿›è¡Œä¼˜åŒ–ï¼š</p>
<ul>
<li>åŠ¨æ€å½•éŸ³æ—¶é•¿ï¼šæ£€æµ‹åˆ°è¯­éŸ³ç»“æŸè‡ªåŠ¨åœæ­¢å½•éŸ³ï¼›</li>
<li>VADï¼ˆVoice Activity Detectionï¼‰ï¼šæ›´å‡†ç¡®çš„è¯­éŸ³ç«¯ç‚¹æ£€æµ‹ï¼›</li>
<li>éŸ³é¢‘è´¨é‡ä¼˜åŒ–ï¼šé™å™ªã€å¢å¼ºç­‰é¢„å¤„ç†ï¼›</li>
<li>ASR å®æ—¶è¯­éŸ³è¯†åˆ«ï¼ˆæµå¼è½¬å†™ï¼‰ï¼›</li>
<li>TTS éŸ³é¢‘å®æ—¶ç”Ÿæˆä¸æ’­æ”¾ï¼›</li>
<li>MQTT ä¸ RTP å¯ååŒå·¥ä½œï¼šMQTT è´Ÿè´£å¯é çš„æŒ‡ä»¤å’ŒçŠ¶æ€äº¤äº’ï¼ŒRTP åˆ™ç”¨äºå¿«é€Ÿä¼ è¾“éŸ³é¢‘æµï¼Œä½¿æ™ºèƒ½ä½“æ›´è´´è¿‘ã€Œå®æ—¶å¯¹è¯ã€çš„ä½“éªŒæ ‡å‡†ã€‚</li>
</ul>
<h2 data-id="heading-28">ä¸‹ç¯‡é¢„å‘Š</h2>
<p>åœ¨æœ¬ç¯‡ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†ä»è‡ªç„¶è¯­è¨€è¯†åˆ«åˆ°è®¾å¤‡æ’­æ”¾è¯­éŸ³çš„é—­ç¯ã€‚ç„¶è€Œï¼Œä¸€ä¸ªçœŸæ­£çš„ã€Œæ™ºèƒ½ã€ä½“ï¼Œä¸æ­¢äºä¸€èˆ¬çš„å“åº”ï¼Œå®ƒè¿˜åº”è¯¥æ‡‚ä½ ã€è®°å¾—ä½ ã€é™ªä¼´ä½ ã€‚</p>
<p>ä¸‹ä¸€ç¯‡æˆ‘ä»¬å°†æ¢è®¨ï¼š</p>
<ul>
<li>å¦‚ä½•å¼•å…¥ã€Œæƒ…æ„Ÿã€å’Œã€Œäººæ ¼ã€æœºåˆ¶ï¼šè®©è®¾å¤‡ä¸åªæ˜¯å†°å†·çš„æŒ‡ä»¤æ‰§è¡Œå™¨ï¼Œè€Œå…·å¤‡æ¸©åº¦ã€é£æ ¼ä¸æƒ…ç»ªè¡¨è¾¾ï¼›</li>
<li>å¦‚ä½•è®©è®¾å¤‡ã€Œæœ‰è®°å¿†ã€ï¼šä¿ç•™ç”¨æˆ·ä¸Šä¸‹æ–‡ã€åå¥½å’Œä½¿ç”¨ä¹ æƒ¯ï¼Œå®ç°ä¸ªæ€§åŒ–é•¿æœŸè®°å¿†ï¼›</li>
<li>å¦‚ä½•ç»“åˆ LLM æ„å»ºäººæ ¼åŒ–ä»£ç†ä½“ï¼šåœ¨é•¿æœŸäº’åŠ¨ä¸­ï¼Œé€æ¸æ¼”åŒ–æˆã€Œæ‡‚ä½ ã€çš„æ•°å­—ä¼™ä¼´ã€‚</li>
</ul>
<p>æ­¤å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå°†è®¨è®ºä¸åŒç±»å‹çš„äººè®¾è®¾è®¡ï¼Œå¦‚ï¼šå®‰é™åŠ©ç†ã€çƒ­æƒ…ä¼™ä¼´ã€ä¸¥è‚ƒä¸“å®¶ç­‰ï¼Œå¹¶åˆ†æäººè®¾å¦‚ä½•å½±å“äº¤äº’ä½“éªŒä¸åº”ç”¨åœºæ™¯é€‚é…ã€‚è¿™å°†æ˜¯ä»ã€Œè®¾å¤‡æ§åˆ¶ã€äº¤äº’æ™ºèƒ½ä½“ã€èµ°å‘ã€Œäººæ ¼åŒ–æ™ºèƒ½ä½“ã€çš„å…³é”®ä¸€æ­¥ã€‚æ•¬è¯·æœŸå¾…ã€‚</p>
<h2 data-id="heading-29">èµ„æº</h2>
<ul>
<li>æºä»£ç  - <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmqtt-ai%2Fesp32-mcp-mqtt-tutorial%2Ftree%2Fmain%2Fsamples%2Fblog_4" target="_blank" title="https://github.com/mqtt-ai/esp32-mcp-mqtt-tutorial/tree/main/samples/blog_4" ref="nofollow noopener noreferrer">github.com/mqtt-ai/espâ€¦</a> ï¼ŒåŒ…å«ï¼š
<ul>
<li>ESP32 å®Œæ•´å·¥ç¨‹æ–‡ä»¶</li>
<li>Python åç«¯æœåŠ¡æºç </li>
<li>EMQX é…ç½®è¯´æ˜</li>
<li>éƒ¨ç½²è¿è¡Œæ–‡æ¡£</li>
</ul>
</li>
<li>é€šä¹‰åƒé—®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdashscope.aliyun.com%2F" target="_blank" title="https://dashscope.aliyun.com/" ref="nofollow noopener noreferrer">æ¨¡å‹æœåŠ¡çµç§¯ DashScope</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Meta æ”¶è´­ Manusï¼šå½“å·¨å¤´æ­å°æ—¶ï¼Œä½ è¦åšé‚£ä¸ªé€’é’¥åŒ™çš„äºº]]></title>    <link>https://juejin.cn/post/7589308109640515619</link>    <guid>https://juejin.cn/post/7589308109640515619</guid>    <pubDate>2025-12-30T05:41:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589308109640515619" data-draft-id="7589246131585826851" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Meta æ”¶è´­ Manusï¼šå½“å·¨å¤´æ­å°æ—¶ï¼Œä½ è¦åšé‚£ä¸ªé€’é’¥åŒ™çš„äºº"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-30T05:41:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HiStewie"/> <meta itemprop="url" content="https://juejin.cn/user/1591748568038823"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Meta æ”¶è´­ Manusï¼šå½“å·¨å¤´æ­å°æ—¶ï¼Œä½ è¦åšé‚£ä¸ªé€’é’¥åŒ™çš„äºº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1591748568038823/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HiStewie
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T05:41:07.000Z" title="Tue Dec 30 2025 05:41:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;position:relative;background-image:linear-gradient(90deg,rgba(217,234,251,.25) 3%,transparent 0),linear-gradient(1turn,rgba(217,234,251,.25) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;padding-left:8px;padding-bottom:0;margin-top:35px;margin-bottom:10px;font-weight:900;font-family:serif;letter-spacing:1px;color:#000}.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover{background-color:#fff}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;position:relative}.markdown-body h2:after{content:"";left:0;bottom:0;width:100%;height:1px;position:absolute}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{height:1px;border:none;margin-top:32px;margin-bottom:32px;background-size:4px 1px;background-image:linear-gradient(270deg,#37b2ff 0,#37b2ff 25%,transparent 50%)}.markdown-body code{margin:0 4px;word-break:break-word;overflow-x:auto;background-color:#fff7f7;color:#f06;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:-apple-system,system-ui,Menlo,Monaco,Consolas,Courier New;position:relative}.markdown-body pre{margin:15px 8px;border:1px solid #f5f5f7;line-height:1.75}.markdown-body pre:before{top:-4px;left:-4px;border-top:8px solid #feea1e;border-left:8px solid #feea1e}.markdown-body pre:after,.markdown-body pre:before{width:20px;height:20px;content:"";z-index:10;position:absolute}.markdown-body pre:after{right:-4px;bottom:-4px;border-right:8px solid #37b2ff;border-bottom:8px solid #37b2ff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;overflow-x:auto;margin:0;word-break:normal;display:block;color:#333;background-color:#fff;position:unset!important}.markdown-body pre:nth-child(odd):before{border-top-color:#a7ecad;border-left-color:#a7ecad}.markdown-body pre:nth-child(odd):after{border-right-color:#e699e6;border-bottom-color:#e699e6}.markdown-body a{margin:0 4px;text-decoration:none;color:#37b2ff;transition:.3s;display:inline-block;vertical-align:bottom;position:relative}.markdown-body a:before{content:"READ MORE +";bottom:90%;width:120px;max-width:0;color:#fff;background-color:#1fb3ff;position:absolute;white-space:nowrap;transition:.3s;box-sizing:border-box;pointer-events:none;overflow:hidden}.markdown-body a:after{content:"";bottom:0;left:0;width:100%;height:1px;border-bottom:1px dashed #37b2ff;position:absolute}.markdown-body a:active:before,.markdown-body a:hover:before{max-width:120px;padding-left:14px}.markdown-body table{width:100%;max-width:100%;font-size:12px;background-color:#fff;overflow:auto;border-collapse:collapse}.markdown-body table tr:hover td,.markdown-body table tr:hover th{border-bottom:1px solid #feea1e}.markdown-body thead{text-align:left}.markdown-body th{font-size:1.2em;border-bottom:1px dashed #eee}.markdown-body tr:nth-child(2n){background-color:hsla(0,0%,87.8%,.1);border-bottom:1px solid #fff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px;border-bottom:1px dashed #fff}.markdown-body blockquote{color:#666;padding:12px 23px 2px;border:1px solid #37b2ff;background-color:#fff;margin:22px 0;position:relative}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body blockquote:after{content:"FROM";left:0;width:40px;color:#fff;background-color:#37b2ff;text-align:center}.markdown-body blockquote:after,.markdown-body blockquote:before{top:0;line-height:1;padding:2px 0;font-size:12px;font-weight:lighter;position:absolute;pointer-events:none}.markdown-body blockquote:before{content:"CITATION";left:44px;color:#37b2ff}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{line-height:2em;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#37b2ff}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol ol li,.markdown-body ol ul li,.markdown-body ul ol li,.markdown-body ul ul li{border-bottom:none}.markdown-body ol li{padding-left:6px;list-style:decimal-leading-zero}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]{position:relative}.markdown-body input[type=checkbox]:before{top:0;left:0;right:0;bottom:0;content:"";width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1;position:absolute}.markdown-body input[type=checkbox]:checked:after{content:"";top:10%;left:18%;width:90%;height:40%;border-left:2px solid #37b2ff;border-bottom:2px solid #37b2ff;color:#37b2ff;z-index:2;transform:rotate(-45deg);position:absolute}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p>ä»Šæ—©çœ‹åˆ° Manus è¢« Meta æ”¶è´­çš„æ¶ˆæ¯ï¼Œæˆ‘ä¸‹æ„è¯†ç„äº†ä¸€çœ¼æµè§ˆå™¨ä¾§è¾¹æ ã€‚</p>
<p>é‚£é‡Œåœç€ Monica æˆ‘å»å¹´ä¹°äº†å®ƒçš„ Unlimited Levelã€‚è¿™ä¸€å¹´ï¼Œçœ¼çœ‹ç€å®ƒä»ä¸€ä¸ªå°æ’ä»¶é•¿æˆå·¨å¤´äº‰æŠ¢çš„èµ„äº§ï¼Œè¿™ç§æ„Ÿè§‰å¾ˆå¥‡å¦™ã€‚æˆ‘çš„ç»­è´¹è®°å½•æ¯”åˆ†æå¸ˆçš„æŠ¥å‘Šæ›´è¯´æ˜é—®é¢˜ï¼šè¿™æ˜¯çœŸé‡‘ç™½é“¶çš„æŠ•ç¥¨ã€‚</p>
<p>å¾ˆå¤šäººåœ¨è®¨è®ºæ”¶è´­é‡‘é¢ï¼Œè®¨è®ºä¸­ç¾ç§‘æŠ€åšå¼ˆã€‚ä½†åœ¨æˆ‘è¿™ä¸ªä¹Ÿæ˜¯â€œä¸€äººå…¬å¸â€æ¨¡å¼çš„ç‹¬ç«‹å¼€å‘è€…çœ¼é‡Œï¼Œè¿™ä¸ä»…æ˜¯ä¸€æ¡©å•†ä¸šæ”¶è´­ï¼Œæ›´æ˜¯ä¸€æ¬¡å¯¹ <strong>â€œäº§å“ä»·å€¼è§‚â€</strong> çš„æš´åŠ›éªŒè¯ã€‚</p>
<h2 data-id="heading-0">01. ä¸»è§’ç™»åœºï¼šä»æ­¦æ±‰å…‰è°·åˆ°ç¡…è°·ç„¦ç‚¹</h2>
<p>ä¸ºäº†è¿˜åŸè¿™æ¬¡æ”¶è´­çš„çœŸå®åˆ†é‡ï¼Œæˆ‘ä»¬éœ€è¦å…ˆçœ‹æ¸…ç‰Œæ¡Œä¸Šçš„è¿™ä¸‰ä¸ªåå­—ã€‚è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªç®€å•çš„â€œå¥—å£³å·¥å…·â€è¢«æ”¶è´­çš„æ•…äº‹ï¼Œè€Œæ˜¯ä¸€åœºæƒŠå¿ƒåŠ¨é­„çš„çªå›´ã€‚</p>
<p>è¿™ä¸¤æ¬¾äº§å“èƒŒåçš„æ¯å…¬å¸å« <strong>Monica.im</strong>ï¼ˆå›½å†…ä¸»ä½“ä¸ºæ­¦æ±‰è´è¶æ•ˆåº”ï¼‰ï¼Œåˆ›å§‹äººæ˜¯<strong>è‚–å¼˜</strong>ã€‚åœ¨è¢« Meta æ”¶è´­ä¹‹å‰ï¼Œä»–ä»¬å·²ç»æ˜¯å…¨çƒ AI åº”ç”¨å±‚çš„é¡¶æµï¼Œå…¸å‹çš„â€œå¢™å†…å¼€èŠ±å¢™å¤–é¦™â€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc8dd4c072af45ee8e151083564060ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGlTdGV3aWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767678067&amp;x-signature=g6c3zLymJfwMhUtseqRKDC0X3%2Bs%3D" alt="462shots_so.png" loading="lazy"/></p>
<ul>
<li><strong>Monicaï¼ˆè¶…çº§å…¥å£ï¼‰ï¼š</strong>
å®ƒæ˜¯æµè§ˆå™¨æ—¶ä»£çš„â€œå‰¯é©¾é©¶â€ã€‚åœ¨æˆ‘çš„ä¾§è¾¹æ é‡Œï¼Œå®ƒèšåˆäº† GPT-5ã€Claude 4.5ã€Gemini 3 ç­‰æ‰€æœ‰æ ¸æ­¦å™¨ã€‚å®ƒè§£å†³äº† <strong>â€œè¾“å…¥â€</strong> çš„é—®é¢˜ï¼Œå¸®æˆ‘æŠŠå…¨çƒæœ€å¼ºçš„æ¨¡å‹èƒ½åŠ›æ¥å…¥åˆ°æˆ‘æµè§ˆçš„æ¯ä¸€ä¸ªç½‘é¡µä¸­ã€‚</li>
<li><strong>Manusï¼ˆæ‰§è¡Œä»£ç†ï¼‰ï¼š</strong>
è¿™æ˜¯çœŸæ­£çš„æ€æ‰‹é”ã€‚ä½œä¸ºå…¨çƒé¦–æ¬¾é€šç”¨ AI æ™ºèƒ½ä½“ï¼Œå®ƒä¸å†æ˜¯èŠå¤©ï¼Œè€Œæ˜¯èƒ½ç‹¬ç«‹å†™æŠ¥å‘Šã€åˆ†ææ•°æ®ã€è·¨å¹³å°æ“ä½œã€‚å®ƒè§£å†³äº† <strong>â€œæ‰§è¡Œâ€</strong> çš„é—®é¢˜ã€‚</li>
<li><strong>è‚–å¼˜ï¼ˆCEOï¼‰ï¼š</strong>
ä»–ä¸æ˜¯å…¸å‹çš„ç¡…è°·æŠ€æœ¯æå®¢ï¼Œè€Œæ˜¯ä¸€ä½æ·±è°™ä¸­å›½äº’è”ç½‘ç©æ³•çš„è¿ç»­åˆ›ä¸šè€…ã€‚æ—©åœ¨ AI çˆ†å‘å‰ï¼Œä»–å°±åˆ›åŠè¿‡â€œå£¹ä¼´â€ã€â€œå¾®ä¼´â€ç­‰å·¥å…·ï¼Œæ˜¯å¾®ä¿¡ç”Ÿæ€é‡Œæœ€æ‡‚æµé‡å’Œç¤¾ç¾¤è£‚å˜çš„äººã€‚</li>
</ul>
<p>æ­£æ˜¯å› ä¸ºè‚–å¼˜å¸¦ç€è¿™ç§ <strong>â€œå¾®ä¿¡ç”Ÿæ€åŸºå› â€</strong> æ€å…¥ç¡…è°·ï¼Œæ‰æœ‰äº†åé¢è®© Meta æ—¢å¤´ç–¼åˆçœ¼é¦‹çš„å¢é•¿å¥‡è¿¹ã€‚</p>
<h2 data-id="heading-1">02. ä¸æ˜¯â€œé’èƒ½åŠ›â€ï¼Œæ˜¯â€œä¸­å›½å¼è£‚å˜â€çš„é™ç»´æ‰“å‡»</h2>
<p>å¸‚é¢ä¸Šç››ä¼ ï¼šâ€œManus æ˜¯å› ä¸ºåœ¨ Facebook æŠ•äº†æœ€å¤šçš„å¹¿å‘Šï¼Œæˆäº†å¤§é‡‘ä¸»ï¼Œæ‰€ä»¥æ‰è¢«æ”¶è´­ã€‚â€
<strong>å¤§é”™ç‰¹é”™ã€‚çœŸç›¸æ°æ°ç›¸åâ€”â€”Meta ä¹°å®ƒï¼Œæ˜¯å› ä¸ºå®ƒè¯æ˜äº†è‡ªå·±å¯ä»¥â€œä¸èŠ±é’±â€å°±ä» Meta èº«ä¸Šè–…èµ° 10 äº¿æµé‡ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f322d4415ef49e8a8ecdfbd6f396dee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGlTdGV3aWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767678067&amp;x-signature=KDJXcHDflL%2BOKHM7fyIGJurYvsA%3D" alt="image_1767072563254_bmhxz6_16x9_1024x576.png" loading="lazy"/></p>
<p>è‚–å¼˜æŠŠæˆ‘ä»¬åœ¨å›½å†…ç†ŸçŸ¥çš„ <strong>â€œç§åŸŸæµé‡â€</strong> å’Œ <strong>â€œè£‚å˜â€</strong> æˆ˜æœ¯ï¼Œå®Œç¾ç§»æ¤åˆ°äº†å…¨çƒå¸‚åœºï¼š</p>
<ul>
<li><strong>é¥¥é¥¿è¥é”€ï¼š</strong> ä¸¥æ ¼çš„å†…æµ‹æœºåˆ¶ï¼Œè®©é‚€è¯·ç åœ¨äºŒæ‰‹å¸‚åœºç‚’åˆ°ä¸Šåƒç¾å…ƒã€‚</li>
<li><strong>å†…å®¹æ æ†ï¼š</strong> ä¸ºäº†è·å¾—ç®—åŠ›ç§¯åˆ†ï¼Œç”¨æˆ·å¿…é¡»ç”Ÿæˆæ¼”ç¤ºè§†é¢‘å‘åˆ°ç¤¾äº¤åª’ä½“ä¸Šã€‚</li>
<li><strong>ç®—æ³•å›å£°å®¤ï¼š</strong> æˆåƒä¸Šä¸‡ä¸ªçœŸå®ç”¨æˆ·çš„â€œæƒŠå¹å¸–â€ï¼Œéª—è¿‡äº† Meta çš„ç®—æ³•ï¼Œè®© Meta ä»¥ä¸ºè¿™æ˜¯â€œæœ‰æœºå†…å®¹â€è€Œç–¯ç‹‚æ¨èã€‚</li>
</ul>
<p><strong>Meta éœ‡æƒŠäº†ï¼š</strong> è¿™ä¸ªä¸­å›½å›¢é˜Ÿä¸éœ€è¦ Meta çš„é”€å”®å›¢é˜Ÿï¼Œå°±èƒ½åœ¨ Meta çš„åœ°ç›˜ä¸Šåˆ¶é€ ç—…æ¯’ã€‚æ‰å…‹ä¼¯æ ¼ç»™è‚–å¼˜ VP çš„ä½ç½®ï¼Œä¸æ˜¯å› ä¸ºä»–æ‡‚æŠ€æœ¯ï¼Œè€Œæ˜¯å› ä¸ºä»–æŒæ¡äº† <strong>â€œå¦‚ä½•åœ¨ä¸çƒ§å…‰ç°é‡‘çš„æƒ…å†µä¸‹ï¼Œè®© 10 äº¿ç”¨æˆ·ç”¨ä¸Š AIâ€</strong> çš„é»‘é­”æ³•ã€‚</p>
<h2 data-id="heading-2">03. ä¸åšâ€œé€ ç‰©ä¸»â€ï¼Œåšâ€œä¸‡èƒ½æ¥å£â€</h2>
<p>ä½œä¸º Monica çš„é‡åº¦ç”¨æˆ·ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cbb19e83e09f42869b735b70a479f3b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGlTdGV3aWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767678067&amp;x-signature=As5YnbCEIlgdlKkhp4lXidGORR0%3D" alt="147shots_so.png" loading="lazy"/></p>
<p>è¿‡å»è¿™ä¸€å¹´ï¼ŒæŠ€æœ¯åœˆæ€»åœ¨äº‰è®ºâ€œè°æ‹¥æœ‰æœ€å¼ºçš„åº•å±‚æ¨¡å‹â€ã€‚ä½†è¿™å®¶å…¬å¸è¯æ˜äº†ä¸€ä»¶äº‹ï¼š
<strong>ä¸ç®¡åº•å±‚æ¨¡å‹æ˜¯è°çš„ï¼ŒæŠŠèƒ½åŠ›åšæˆæ™®é€šäººæ¯å¤©éƒ½æ„¿æ„ç”¨ã€æ„¿æ„ä»˜è´¹çš„äº§å“ï¼Œæ‰æ˜¯æœ€ç¡¬çš„æŠ¤åŸæ²³ã€‚</strong></p>
<p>çœ‹çœ‹æˆ‘çš„ä¾§è¾¹æ ï¼šå„å¤§æ¨¡å‹ä¸€å­—æ’å¼€ã€‚æˆ‘ä¸éœ€è¦å»è®¢é˜…äº”ä¸ªä¸åŒçš„ä¼šå‘˜ï¼Œä¸éœ€è¦åœ¨äº”ä¸ªç½‘é¡µé—´åå¤æ¨ªè·³ã€‚æˆ‘åªéœ€è¦ä¸€ä¸ª Monicaï¼Œå°±èƒ½éšæ—¶è°ƒç”¨è¿™ä¸ªæ˜Ÿçƒä¸Šæœ€å¼ºçš„å¤§è„‘ã€‚</p>
<p>Meta æœ‰ Llamaï¼Œæœ‰æœ€å¼ºçš„å¤§è„‘ï¼Œä½†ä»–ä»¬ç¼ºä¸€ä¸ªèƒ½èšåˆæ‰€æœ‰èƒ½åŠ›ã€å¹¶ä¸”å·²ç»é•¿åœ¨ç”¨æˆ·æµè§ˆå™¨é‡Œçš„ <strong>â€œè¶…çº§å…¥å£â€</strong>ã€‚</p>
<p>å¦‚æœ Meta ä¸ä¹°ï¼ŒMonica ç»§ç»­åšå¤§ï¼Œå®ƒå°±æ¶ç©ºäº†åº•å±‚æ¨¡å‹å‚å•†ã€‚æ”¶è´­ Monicaï¼ŒMeta ä¸ä»…ä¹°ä¸‹äº†ä¸€ä¸ªå¥½ç”¨çš„å·¥å…·ï¼Œæ›´ä¹°å›äº† <strong>â€œåˆ†å‘æƒâ€</strong>ã€‚</p>
<h2 data-id="heading-3">04. Llama åªæœ‰è„‘å­ï¼ŒManus ç»™äº†å®ƒâ€œåŒæ‰‹â€</h2>
<p>ä»æŠ€æœ¯ç»´åº¦çœ‹ï¼ŒMeta çš„ç„¦è™‘åœ¨äºï¼š<strong>Llama åªæœ‰è„‘å­ï¼Œæ²¡æœ‰æ‰‹ã€‚</strong></p>
<p>èŠå¤©æœºå™¨äººæ—¶ä»£ï¼Œç”¨æˆ·é—®â€œæ€ä¹ˆå»ä¸œäº¬ï¼Ÿâ€ï¼ŒAI ç»™ä½ æ”»ç•¥ã€‚
æ™ºèƒ½ä½“æ—¶ä»£ï¼Œç”¨æˆ·è¯´â€œå¸®æˆ‘è®¢ç¥¨â€ï¼ŒAI éœ€è¦æ‰“å¼€æµè§ˆå™¨ã€ç™»å½•å®˜ç½‘ã€é€‰åº§ã€æ”¯ä»˜ã€‚</p>
<p>Manus çš„æ ¸å¿ƒæŠ€æœ¯å£å’ï¼Œæ˜¯å®ƒä¸ºæ¯ä¸ªä»»åŠ¡ç”Ÿæˆçš„<strong>äº‘ç«¯è™šæ‹Ÿç¯å¢ƒ</strong>ã€‚å®ƒèƒ½å®‰å…¨åœ°æ²™ç›’åŒ–è¿è¡Œä»£ç ã€‚</p>
<p><strong>ä»¥å‰æˆ‘éœ€è¦èŠ± 2 å°æ—¶å»æŸ¥ 10 ä¸ªç«å“çš„å®šä»·å¹¶å¡«è¿› Excelï¼›ç°åœ¨æˆ‘æŠŠä»»åŠ¡ä¸¢ç»™ Manusï¼Œå»å†²æ¯å’–å•¡ï¼Œå›æ¥æ—¶å®ƒå·²ç»æŠŠåšå¥½çš„è¡¨æ ¼å‘ç»™æˆ‘äº†ã€‚</strong> è¿™ç§ <strong>â€˜ä»å¯¹è¯åˆ°äº¤ä»˜â€™</strong> çš„è·¨è¶Šï¼Œæ‰æ˜¯ Meta ææƒ§çš„æ ¹æºã€‚</p>
<p>å¦‚æœæœªæ¥çš„äº’è”ç½‘å…¥å£æ˜¯æ™ºèƒ½ä½“ï¼Œé‚£ä¹ˆå®ƒåœ¨æµè§ˆç½‘é¡µæ—¶ä¼šè‡ªåŠ¨è¿‡æ»¤å¹¿å‘Šï¼Œåªæå–ä¿¡æ¯ã€‚è¿™å¯¹é å¹¿å‘Šç”Ÿå­˜çš„ Meta æ˜¯ç­é¡¶ä¹‹ç¾ã€‚<strong>æ”¶è´­ Manusï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€åœºâ€œé˜²å¾¡æˆ˜â€ã€‚</strong> Meta å¿…é¡»æŠŠè¿™åŒâ€œæ‰‹â€é•¿åœ¨è‡ªå·±èº«ä¸Šï¼Œé‡æ–°å®šä¹‰â€œåå¹¿å‘Šæ—¶ä»£â€çš„å•†ä¸šè§„åˆ™ã€‚</p>
<h2 data-id="heading-4">05. ç‹¬ç«‹å¼€å‘è€…çš„å¯ç¤ºï¼šæˆä¸ºâ€œç¨€ç¼ºèµ„äº§â€ï¼Œè€Œéâ€œå¤–åŒ…è‹¦åŠ›â€</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70103041091a48449ef9fc1461e29dc1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGlTdGV3aWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767678067&amp;x-signature=9VGBiOuhz%2FrOqnv6VJnUODLjNos%3D" alt="image_1767073097450_lzu9r1_16x9_1024x576.png" loading="lazy"/>
è¿™å¯¹å›½å†… AI åˆ›ä¸šè€…ï¼Œå°¤å…¶æ˜¯åƒæˆ‘è¿™æ ·çš„ç‹¬ç«‹å¼€å‘è€…æ¥è¯´ï¼Œå…¶å®æŒºææ°”çš„ã€‚</p>
<p>Manus çš„æ•…äº‹å‘Šè¯‰æˆ‘ä»¬ï¼šä¸­å›½å›¢é˜Ÿå®Œå…¨å¯ä»¥åœ¨å…¨çƒèˆå°ä¸Šè¢«å½“æˆ <strong>â€œæˆ˜ç•¥èµ„äº§â€</strong> ä¹°èµ°ï¼Œè€Œä¸æ˜¯ä½œä¸ºå»‰ä»·çš„â€œå¤–åŒ…èƒ½åŠ›â€è¢«æ¶ˆè€—ã€‚</p>
<p>æˆ‘ä¹Ÿæ˜¯ä¸€äººå…¬å¸ï¼Œæˆ‘ä¹Ÿåœ¨å†™ä»£ç ã€‚çœ‹ç€ Manus çš„è·¯å¾„ï¼Œæˆ‘å¸¸åœ¨æƒ³ï¼šåœ¨ç‹¬ç«‹åˆ›ä¸šé»„é‡‘çª—å£é€æ¸æ”¶çª„çš„ä»Šå¤©ï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆåŠï¼Ÿ</p>
<p>Meta è¿™ç¬”æ”¶è´­æŒ‡æ˜äº†ä¸€æ¡æ–°è·¯ï¼š<strong>ä¸å…¶çƒ§é’±è¿½èµ¶å·¨å¤´ï¼Œä¸å¦‚æˆä¸ºä»–ä»¬äº‰ç›¸è´­ä¹°çš„â€œç¨€ç¼ºèµ„äº§â€ã€‚</strong></p>
<p>è¿™æ˜¯ä¸€ç§å¾ˆé«˜é˜¶çš„è·¯å¾„è®¾è®¡ã€‚åˆ›ä¸šè€…æ— éœ€ä¸å·¨å¤´åœ¨å…¨é¢æˆ˜äº‰ä¸­å¯¹å†³ï¼Œè€Œåº”åˆ©ç”¨å…ˆå‘ä¼˜åŠ¿ï¼Œåœ¨è‡ªå·±æœ€é”‹åˆ©çš„ç‚¹ä¸Šâ€”â€”æ¯”å¦‚ Manus çš„å…¨è‡ªåŠ¨æ‰§è¡Œèƒ½åŠ›â€”â€”<strong>æˆä¸ºå·¨å¤´åœ¨å…³é”®æ—¶åˆ»å”¯ä¸€ä¸”æ€¥éœ€çš„é‚£å—æ‹¼å›¾ã€‚</strong></p>
<p>è¿™ä¸ä¸ªäººåœ¨èŒåœºé»„é‡‘æœŸåŠ å…¥é«˜é€Ÿæˆé•¿å…¬å¸çš„é€»è¾‘å¦‚å‡ºä¸€è¾™ï¼š</p>
<blockquote>
<p><strong>ä»·å€¼æœ€å¤§åŒ–ï¼Œå¾€å¾€ä¸åœ¨äºä½ â€œæœ€å¼ºâ€ä¹‹æ—¶ï¼Œè€Œåœ¨äºä½ â€œæœ€è¢«éœ€è¦â€ä¹‹åˆ»ã€‚</strong></p>
</blockquote>
<p>Manus å¹¶æ²¡æœ‰åšåˆ° 100% çš„å®Œç¾ï¼ŒåˆæœŸç”šè‡³æœåŠ¡å™¨ä¸ç¨³ã€‚ä½†å®ƒåœ¨ Meta æœ€ç„¦è™‘â€œå¦‚ä½•è®© AI è½åœ°â€çš„æ—¶å€™ï¼Œå®ƒæ˜¯é‚£ä¸ª Ready çš„é€‰é¡¹ã€‚</p>
<p>å·¨å¤´é«˜ä»·æŠ¢äººï¼Œæœ¬è´¨æ˜¯è´­ä¹° <strong>â€œç¡®å®šæ€§â€</strong> å’Œ <strong>â€œæˆ˜ç•¥æ—¶é—´â€</strong>ã€‚</p>
<h2 data-id="heading-5">06. ç»“è¯­ï¼šåœ¨â€œè‰å°ç­å­â€çš„ä¸–ç•Œé‡Œé€’é’¥åŒ™</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2327247215414563a84677f0b408c62c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGlTdGV3aWU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767678067&amp;x-signature=rrqXdo1aWdRbkIYNgN0UOat0QxA%3D" alt="image_1767072987089_e0pksj_16x9_1024x576.png" loading="lazy"/></p>
<p>å¾ˆå¤šæŠ€æœ¯äººï¼ˆåŒ…æ‹¬æˆ‘è‡ªå·±ï¼‰å¸¸æ­»åœ¨è¿½æ±‚â€œå®Œç¾â€ä¸Šã€‚è§‰å¾—ä»£ç ä¸å¤Ÿä¼˜é›…ï¼ŒåŠŸèƒ½ä¸å¤Ÿå…¨ï¼Œä¸æ•¢å‘å¸ƒã€‚</p>
<p>ä½†ç°å®ä¸–ç•Œå¾€å¾€æ˜¯æ··ä¹±ä¸”æ€¥è¿«çš„ã€‚</p>
<blockquote>
<p><strong>ä¸–ç•Œæœ‰æ—¶æ˜¯â€œè‰å°ç­å­â€â€”â€”å†³å®šä½ å¸‚å€¼çš„ï¼Œä¸å…¨æ˜¯ä½ çš„å®Œå·¥ç¨‹åº¦ï¼Œè€Œæ˜¯ä½ èƒ½å¦åœ¨å·¨å¤´æ­å»ºèˆå°æ—¶ï¼Œæ°å¥½é€’ä¸Šä»–ä»¬æœ€ç¼ºçš„é‚£æŠŠé’¥åŒ™ã€‚</strong></p>
</blockquote>
<p>è¿™å¹¶éå¦¥åï¼Œè€Œæ˜¯å¯¹æ—¶æœºä¸ç¨€ç¼ºæ€§çš„æ·±åˆ»ç†è§£ã€‚</p>
<p>ä¸å…¶åœ¨çº¢æµ·ä¸­è¿½æ±‚ç»å¯¹å®Œç¾ï¼Œä¸å¦‚åœ¨å·¨å¤´æˆ˜å±€æœªå®šçš„ç©ºç™½åœ°å¸¦ï¼Œç‡å…ˆåšå‡ºâ€œå¯ç”¨ä¸”ç¨€ç¼ºâ€çš„äº§å“ã€‚</p>
<p>â€œå½“å·¨å¤´è½¬èº«å¯»æ‰¾æ—¶ï¼Œä½ è¦ç¡®ä¿è‡ªå·±åœ¨åœºï¼Œå¹¶ä¸”æ‰‹é‡Œæ¡ç€é‚£æŠŠé’¥åŒ™ã€‚<strong>å°±åƒè‚–å¼˜åœ¨æ­¦æ±‰å…‰è°·æ•²ä¸‹ç¬¬ä¸€è¡Œä»£ç æ—¶ï¼Œä»–å¯èƒ½ä¹Ÿæ²¡æƒ³åˆ°ï¼Œè¿™æŠŠé’¥åŒ™æœ€ç»ˆä¼šå¼€å¯ç¡…è°·çš„å¤§é—¨ã€‚ä½†é‡è¦çš„æ˜¯ï¼Œä»–ä¸€ç›´åœ¨ç£¨é‚£æŠŠé’¥åŒ™ã€‚</strong> â€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é˜¿é‡Œå¼€æºAgentScopeå¤šæ™ºèƒ½ä½“æ¡†æ¶è§£æç³»åˆ—ï¼ˆäºŒï¼‰ç¬¬2ç« ï¼šæ¶ˆæ¯ç³»ç»Ÿï¼ˆMessageï¼‰æ·±å…¥è§£æ]]></title>    <link>https://juejin.cn/post/7589207843788324899</link>    <guid>https://juejin.cn/post/7589207843788324899</guid>    <pubDate>2025-12-30T03:52:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589207843788324899" data-draft-id="7589308109639843875" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é˜¿é‡Œå¼€æºAgentScopeå¤šæ™ºèƒ½ä½“æ¡†æ¶è§£æç³»åˆ—ï¼ˆäºŒï¼‰ç¬¬2ç« ï¼šæ¶ˆæ¯ç³»ç»Ÿï¼ˆMessageï¼‰æ·±å…¥è§£æ"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2025-12-30T03:52:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯­è½å¿ƒç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2875978147955741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é˜¿é‡Œå¼€æºAgentScopeå¤šæ™ºèƒ½ä½“æ¡†æ¶è§£æç³»åˆ—ï¼ˆäºŒï¼‰ç¬¬2ç« ï¼šæ¶ˆæ¯ç³»ç»Ÿï¼ˆMessageï¼‰æ·±å…¥è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978147955741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯­è½å¿ƒç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T03:52:07.000Z" title="Tue Dec 30 2025 03:52:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ€»è¿°</h2>
<p>æ¶ˆæ¯ï¼ˆMessageï¼‰æ˜¯AgentScopeä¸­<strong>Agentä¹‹é—´çš„é€šä¿¡å•å…ƒ</strong>ï¼Œä¹Ÿæ˜¯æ•´ä¸ªæ¡†æ¶è¿è¡Œçš„åŸºç¡€ã€‚ç†è§£æ¶ˆæ¯ç³»ç»Ÿçš„è®¾è®¡ï¼Œå°±èƒ½ç†è§£AgentScopeå¦‚ä½•åœ¨ä¿æŒçµæ´»æ€§çš„åŒæ—¶ï¼Œæä¾›ç±»å‹å®‰å…¨å’Œå¯é æ€§ã€‚</p>
<p>æœ¬ç« å°†ä»<strong>æ¶ˆæ¯çš„è®¾è®¡å“²å­¦ã€æ ¸å¿ƒç»“æ„ã€å†…å®¹å—ç³»ç»Ÿã€å¤šæ¨¡æ€æ”¯æŒã€å…ƒæ•°æ®ç®¡ç†</strong>ç­‰å¤šä¸ªç»´åº¦ï¼Œæ·±å…¥è®²è§£AgentScopeçš„æ¶ˆæ¯ç³»ç»Ÿã€‚</p>
<hr/>
<h2 data-id="heading-1">2.1 Msg æ¶ˆæ¯æ¨¡å‹è®¾è®¡</h2>
<h3 data-id="heading-2">2.1.1 ä¸ºä»€ä¹ˆéœ€è¦æ¶ˆæ¯æ¨¡å‹ï¼Ÿ</h3>
<h4 data-id="heading-3">é—®é¢˜èƒŒæ™¯</h4>
<p>åœ¨Agentç³»ç»Ÿä¸­ï¼Œä¸åŒçš„å‚ä¸è€…ï¼ˆç”¨æˆ·ã€AIæ¨¡å‹ã€å·¥å…·ã€å…¶ä»–Agentï¼‰éœ€è¦è¿›è¡Œé€šä¿¡ã€‚ç®€å•çš„åšæ³•æ˜¯ç›´æ¥ä¼ é€’å­—ç¬¦ä¸²æˆ–å¯¹è±¡ï¼Œä½†è¿™æ ·ä¼šå¯¼è‡´ä»¥ä¸‹é—®é¢˜ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">é—®é¢˜<span class="hljs-number">1</span>ï¼šä¿¡æ¯ä¸¢å¤±
â””â”€ ä»…ä¼ é€’å†…å®¹ï¼Œä¸¢å¤±äº†ï¼šè°è¯´çš„ï¼ˆroleï¼‰ã€ä»€ä¹ˆæ—¶å€™è¯´çš„ï¼ˆtimestampï¼‰ã€
   è¯´äº†ä»€ä¹ˆ<span class="hljs-variable constant_">ID</span>ï¼ˆmessage_idï¼‰ç­‰å…ƒæ•°æ®

é—®é¢˜<span class="hljs-number">2</span>ï¼šæ— æ³•åº”å¯¹å¤šæ ·åŒ–å†…å®¹
â””â”€ å†…å®¹å¯èƒ½æ˜¯çº¯æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘ï¼Œç”šè‡³æ˜¯å·¥å…·è°ƒç”¨è¯·æ±‚
   å•ä¸€çš„<span class="hljs-title class_">String</span>æ— æ³•è¡¨è¾¾

é—®é¢˜<span class="hljs-number">3</span>ï¼šç¼ºä¹ç»“æ„åŒ–æ•°æ®æ”¯æŒ
â””â”€ <span class="hljs-title class_">Agent</span>æœ‰æ—¶éœ€è¦è¿”å›ç»“æ„åŒ–æ•°æ®ï¼ˆ<span class="hljs-title class_">JSON</span>å¯¹è±¡ï¼‰ï¼Œä½†æ— æ³•ä¸æ–‡æœ¬åŒºåˆ†

é—®é¢˜<span class="hljs-number">4</span>ï¼šé€šä¿¡è¿½è¸ªå›°éš¾
â””â”€ æ²¡æœ‰ç»Ÿä¸€çš„æ¶ˆæ¯æ ¼å¼ï¼Œå¾ˆéš¾è¿›è¡Œæ—¥å¿—ã€å®¡è®¡ã€é‡æ”¾
</code></pre>
<h3 data-id="heading-4">2.1.2 Msgçš„æ ¸å¿ƒè®¾è®¡</h3>
<h4 data-id="heading-5">è®¾è®¡åŸåˆ™</h4>
<pre><code class="hljs">åŸåˆ™1ï¼šä¸å¯å˜æ€§ï¼ˆImmutableï¼‰
â”œâ”€ æ¶ˆæ¯åˆ›å»ºåä¸èƒ½ä¿®æ”¹
â”œâ”€ ä¿è¯çº¿ç¨‹å®‰å…¨ï¼ˆåœ¨å“åº”å¼æ¶æ„ä¸­è‡³å…³é‡è¦ï¼‰
â””â”€ ä¾¿äºæ¶ˆæ¯ç¼“å­˜å’Œæ¯”è¾ƒ

åŸåˆ™2ï¼šæœ€å°åŒ–è®¾è®¡
â”œâ”€ åªåŒ…å«å¿…è¦å­—æ®µï¼Œé¿å…å†—ä½™
â”œâ”€ æ˜“äºåºåˆ—åŒ–å’Œç½‘ç»œä¼ è¾“
â””â”€ å¿«é€Ÿè§£æå’Œå¤„ç†

åŸåˆ™3ï¼šå¯æ‰©å±•æ€§
â”œâ”€ æ”¯æŒå¤šç§å†…å®¹ç±»å‹
â”œâ”€ å…ƒæ•°æ®å­—æ®µå¯æ‰©å±•
â””â”€ ä¾¿äºç¬¬ä¸‰æ–¹æ‰©å±•
</code></pre>
<h4 data-id="heading-6">Msgçš„æ ¸å¿ƒå­—æ®µ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Msg</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String id;              <span class="hljs-comment">// âœ“ å”¯ä¸€æ ‡è¯†ï¼Œç”¨äºè¿½è¸ª</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String name;            <span class="hljs-comment">// âœ“ å¯é€‰çš„æ¶ˆæ¯åç§°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MsgRole role;           <span class="hljs-comment">// âœ“ æ¶ˆæ¯è§’è‰²ï¼ˆuser/assistant/system/toolï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;ContentBlock&gt; content;  <span class="hljs-comment">// âœ“ æ¶ˆæ¯å†…å®¹ï¼ˆæ”¯æŒå¤šç§ç±»å‹ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, Object&gt; metadata;<span class="hljs-comment">// âœ“ å…ƒæ•°æ®ï¼ˆç»“æ„åŒ–æ•°æ®ã€æ‰©å±•ä¿¡æ¯ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String timestamp;       <span class="hljs-comment">// âœ“ æ—¶é—´æˆ³ï¼ˆISO 8601æ ¼å¼ï¼‰</span>
}
</code></pre>
<h4 data-id="heading-7">å­—æ®µè¯¦è§£</h4>






















































<table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>å¿…éœ€</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>id</code></td><td>String</td><td>æ˜¯</td><td>æ¶ˆæ¯å”¯ä¸€ID</td><td><code>"msg_123e4567-e89b-12d3-a456"</code></td></tr><tr><td><code>name</code></td><td>String</td><td>å¦</td><td>å‘é€è€…åç§°</td><td><code>"user"</code>, <code>"assistant"</code>, <code>"system"</code></td></tr><tr><td><code>role</code></td><td>MsgRole</td><td>æ˜¯</td><td>æ¶ˆæ¯è§’è‰²</td><td><code>USER</code>, <code>ASSISTANT</code>, <code>SYSTEM</code>, <code>TOOL</code></td></tr><tr><td><code>content</code></td><td>List</td><td>æ˜¯</td><td>å†…å®¹å—åˆ—è¡¨</td><td><code>[TextBlock, ImageBlock, ...]</code></td></tr><tr><td><code>metadata</code></td><td>Map&lt;String, Object&gt;</td><td>å¦</td><td>å…ƒæ•°æ®</td><td><code>{"user_id": "123", "session": "abc"}</code></td></tr><tr><td><code>timestamp</code></td><td>String</td><td>æ˜¯</td><td>æ—¶é—´æˆ³</td><td><code>"2024-01-15 10:30:45.123"</code></td></tr></tbody></table>
<h3 data-id="heading-8">2.1.3 Msgçš„ç”Ÿå‘½å‘¨æœŸ</h3>
<pre><code class="hljs language-markdown" lang="markdown">ç¬¬1é˜¶æ®µï¼šåˆ›å»ºï¼ˆCreationï¼‰
<span class="hljs-code">    Msg.builder()
        .role(MsgRole.USER)
        .content(TextBlock.builder().text("Hello").build())
        .build()
    â””â”€ è‡ªåŠ¨ç”ŸæˆIDå’Œtimestamp
</span>
ç¬¬2é˜¶æ®µï¼šä¼ è¾“ï¼ˆTransportï¼‰
<span class="hljs-bullet">    -</span> JSONåºåˆ—åŒ–ï¼ˆç½‘ç»œä¼ è¾“æˆ–å­˜å‚¨ï¼‰
<span class="hljs-bullet">    -</span> ä¸å¯å˜ï¼Œæ”¯æŒå¹¶å‘è®¿é—®

ç¬¬3é˜¶æ®µï¼šå¤„ç†ï¼ˆProcessingï¼‰
<span class="hljs-code">    Agentæ¥æ”¶æ¶ˆæ¯
    â”‚
    â”œâ”€ æ·»åŠ åˆ°Memoryï¼ˆä¿ç•™å†å²ï¼‰
    â”œâ”€ æå–å†…å®¹å¹¶å¤„ç†
    â””â”€ å¯èƒ½ä¿®æ”¹å…ƒæ•°æ®ï¼ˆä½†è¿™ä¼šåˆ›å»ºæ–°çš„Msgå¯¹è±¡ï¼‰
</span>
ç¬¬4é˜¶æ®µï¼šå“åº”ï¼ˆResponseï¼‰
<span class="hljs-code">    ç”Ÿæˆæ–°çš„Msgå¯¹è±¡ä½œä¸ºå“åº”
    â””â”€ åŒ…å«åŸæ¶ˆæ¯IDçš„å¼•ç”¨ï¼ˆé€šè¿‡metadataï¼‰
</span>
ç¬¬5é˜¶æ®µï¼šæŒä¹…åŒ–ï¼ˆPersistenceï¼‰
<span class="hljs-code">    å­˜å‚¨åˆ°Sessionæˆ–æ•°æ®åº“
    â””â”€ æ”¯æŒåç»­çš„æ¶ˆæ¯é‡æ”¾å’Œå®¡è®¡
</span></code></pre>
<h3 data-id="heading-9">2.1.4 æ„å»ºæ¶ˆæ¯çš„å¤šç§æ–¹å¼</h3>
<h4 data-id="heading-10">æ–¹å¼1ï¼šä½¿ç”¨Builderæ„å»ºæœ€å°åŒ–æ¶ˆæ¯</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ–¹å¼1aï¼šæœ€ç®€å•çš„çº¯æ–‡æœ¬æ¶ˆæ¯</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> Msg.builder()
    .textContent(<span class="hljs-string">"ä½ å¥½ï¼Œä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"</span>)
    .build();

<span class="hljs-comment">// æ–¹å¼1bï¼šæ˜ç¡®æŒ‡å®šè§’è‰²</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> Msg.builder()
    .role(MsgRole.USER)
    .content(TextBlock.builder().text(<span class="hljs-string">"Hello"</span>).build())
    .build();

<span class="hljs-comment">// æ–¹å¼1cï¼šæŒ‡å®šå‘é€è€…åç§°</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> Msg.builder()
    .name(<span class="hljs-string">"Alice"</span>)  <span class="hljs-comment">// ç”¨æˆ·å</span>
    .role(MsgRole.USER)
    .textContent(<span class="hljs-string">"I have a question"</span>)
    .build();
</code></pre>
<h4 data-id="heading-11">æ–¹å¼2ï¼šæ„å»ºå¤šå†…å®¹æ¶ˆæ¯</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŒ…å«æ–‡æœ¬å’Œå›¾åƒçš„æ¶ˆæ¯</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> Msg.builder()
    .role(MsgRole.USER)
    .name(<span class="hljs-string">"user_123"</span>)
    .content(
        TextBlock.builder().text(<span class="hljs-string">"è¯·å¸®æˆ‘åˆ†æè¿™å¼ å›¾ç‰‡"</span>).build(),
        ImageBlock.builder()
            .source(URLSource.builder()
                .url(<span class="hljs-string">"https://example.com/chart.png"</span>)
                .build())
            .build()
    )
    .build();

<span class="hljs-comment">// æˆ–ä½¿ç”¨List.of()</span>
List&lt;ContentBlock&gt; content = List.of(
    TextBlock.builder().text(<span class="hljs-string">"What's in this image?"</span>).build(),
    ImageBlock.builder().source(urlSource).build()
);
<span class="hljs-type">Msg</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> Msg.builder()
    .role(MsgRole.USER)
    .content(content)
    .build();
</code></pre>
<h4 data-id="heading-12">æ–¹å¼3ï¼šæºå¸¦å…ƒæ•°æ®çš„æ¶ˆæ¯</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŒ…å«ç»“æ„åŒ–æ•°æ®çš„æ¶ˆæ¯</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> Msg.builder()
    .role(MsgRole.ASSISTANT)
    .textContent(<span class="hljs-string">"è®¢å•å·²åˆ›å»º"</span>)
    .metadata(Map.of(
        <span class="hljs-string">"order_id"</span>, <span class="hljs-string">"ORD-20240115-001"</span>,
        <span class="hljs-string">"amount"</span>, <span class="hljs-number">599.99</span>,
        <span class="hljs-string">"timestamp"</span>, System.currentTimeMillis()
    ))
    .build();

<span class="hljs-comment">// è·å–å…ƒæ•°æ®</span>
<span class="hljs-keyword">if</span> (msg.hasStructuredData()) {
    Map&lt;String, Object&gt; data = msg.getMetadata();
    <span class="hljs-type">String</span> <span class="hljs-variable">orderId</span> <span class="hljs-operator">=</span> (String) data.get(<span class="hljs-string">"order_id"</span>);
}
</code></pre>
<h4 data-id="heading-13">æ–¹å¼4ï¼šæºå¸¦ç»“æ„åŒ–å¯¹è±¡çš„æ¶ˆæ¯</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å®šä¹‰ç»“æ„åŒ–æ•°æ®ç±»</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderResponse</span> {
    <span class="hljs-keyword">private</span> String orderId;
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> amount;
    <span class="hljs-keyword">private</span> String status;
    <span class="hljs-keyword">private</span> LocalDateTime createdTime;
}

<span class="hljs-comment">// åˆ›å»ºåŒ…å«ç»“æ„åŒ–æ•°æ®çš„æ¶ˆæ¯</span>
<span class="hljs-type">OrderResponse</span> <span class="hljs-variable">orderResp</span> <span class="hljs-operator">=</span> OrderResponse.builder()
    .orderId(<span class="hljs-string">"ORD-001"</span>)
    .amount(<span class="hljs-number">599.99</span>)
    .status(<span class="hljs-string">"CREATED"</span>)
    .createdTime(LocalDateTime.now())
    .build();

<span class="hljs-comment">// æ–¹å¼Aï¼šé€šè¿‡metadataå­˜å‚¨ï¼ˆç„¶åé€šè¿‡getStructuredData()è·å–ï¼‰</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> Msg.builder()
    .role(MsgRole.ASSISTANT)
    .textContent(<span class="hljs-string">"è®¢å•åˆ›å»ºæˆåŠŸ"</span>)
    .metadata(Map.of(
        <span class="hljs-string">"order"</span>, orderResp  <span class="hljs-comment">// ç›´æ¥æ”¾å…¥å¯¹è±¡</span>
    ))
    .build();

<span class="hljs-comment">// è·å–æ—¶</span>
<span class="hljs-keyword">if</span> (msg.hasStructuredData()) {
    <span class="hljs-type">OrderResponse</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> msg.getStructuredData(OrderResponse.class);
}
</code></pre>
<hr/>
<h2 data-id="heading-14">2.2 æ¶ˆæ¯è§’è‰²ï¼ˆMsgRoleï¼‰ä¸é€šä¿¡æ¨¡å¼</h2>
<h3 data-id="heading-15">2.2.1 å››ç§æ¶ˆæ¯è§’è‰²</h3>
<h4 data-id="heading-16">1. USER è§’è‰²</h4>
<p><strong>å®šä¹‰</strong>ï¼šæ¥è‡ªç”¨æˆ·æˆ–å¤–éƒ¨è¾“å…¥çš„æ¶ˆæ¯</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å…¸å‹ç”¨æ³•</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">userMsg</span> <span class="hljs-operator">=</span> Msg.builder()
    .role(MsgRole.USER)
    .name(<span class="hljs-string">"Alice"</span>)  <span class="hljs-comment">// ç”¨æˆ·å</span>
    .textContent(<span class="hljs-string">"è¯·å¸®æˆ‘å†™ä¸€ä»½ä¼šè®®æ€»ç»“"</span>)
    .build();
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>é€šå¸¸æ˜¯å¯¹è¯çš„èµ·ç‚¹</li>
<li>å¯ä»¥åŒ…å«å¤šç§å†…å®¹ç±»å‹ï¼ˆæ–‡æœ¬ã€å›¾åƒã€æ–‡ä»¶URLç­‰ï¼‰</li>
<li>é€šå¸¸æ¥è‡ªå‰ç«¯åº”ç”¨æˆ–APIå®¢æˆ·ç«¯</li>
</ul>
<p><strong>åœºæ™¯ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">ç”¨æˆ·åœ¨èŠå¤©ç•Œé¢è¾“å…¥æ¶ˆæ¯ â†’ è½¬æ¢ä¸º <span class="hljs-keyword">USER</span> è§’è‰²æ¶ˆæ¯ â†’ é€ç»™Agent
</code></pre>
<h4 data-id="heading-17">2. ASSISTANT è§’è‰²</h4>
<p><strong>å®šä¹‰</strong>ï¼šç”±AI Agentæˆ–åŠ©æ‰‹ç”Ÿæˆçš„æ¶ˆæ¯</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å…¸å‹ç”¨æ³•</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">assistantMsg</span> <span class="hljs-operator">=</span> Msg.builder()
    .role(MsgRole.ASSISTANT)
    .name(<span class="hljs-string">"ChatBot"</span>)  <span class="hljs-comment">// Agentåç§°</span>
    .textContent(<span class="hljs-string">"æˆ‘å·²ç»ä¸ºä½ å‡†å¤‡äº†ä¼šè®®æ€»ç»“..."</span>)
    .build();
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>æ˜¯Agentçš„å›å¤</li>
<li>å¯èƒ½åŒ…å«æ¨ç†è¿‡ç¨‹ï¼ˆThinkingBlockï¼‰ã€å·¥å…·è°ƒç”¨ï¼ˆToolUseBlockï¼‰ç­‰</li>
<li>é€šå¸¸ä¼šè¢«æ·»åŠ åˆ°Memoryä¸­ï¼Œä½œä¸ºåç»­å¯¹è¯çš„ä¸Šä¸‹æ–‡</li>
</ul>
<p><strong>ç”Ÿäº§åœºæ™¯</strong>ï¼š</p>
<pre><code class="hljs">Agentæ¨ç† â†’ è°ƒç”¨å·¥å…· â†’ è·å¾—ç»“æœ â†’ ç”Ÿæˆæœ€ç»ˆå›å¤ï¼ˆASSISTANTæ¶ˆæ¯ï¼‰
</code></pre>
<h4 data-id="heading-18">3. SYSTEM è§’è‰²</h4>
<p><strong>å®šä¹‰</strong>ï¼šç³»ç»ŸæŒ‡ä»¤ã€æç¤ºè¯æˆ–é…ç½®æ¶ˆæ¯</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç³»ç»Ÿæç¤ºè¯ï¼ˆé€šå¸¸åœ¨Agentåˆ›å»ºæ—¶è®¾ç½®ï¼‰</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">systemMsg</span> <span class="hljs-operator">=</span> Msg.builder()
    .role(MsgRole.SYSTEM)
    .textContent(
        <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æŠ€æœ¯æ–‡æ¡£æ’°å†™å‘˜ã€‚\n"</span> +
        <span class="hljs-string">"ä½ çš„èŒè´£æ˜¯ï¼š\n"</span> +
        <span class="hljs-string">"1. å°†å¤æ‚çš„æŠ€æœ¯æ¦‚å¿µç”¨ç®€æ´çš„è¯­è¨€è§£é‡Š\n"</span> +
        <span class="hljs-string">"2. æä¾›ä»£ç ç¤ºä¾‹\n"</span> +
        <span class="hljs-string">"3. éµå¾ª Markdown æ ¼å¼"</span>
    )
    .build();

<span class="hljs-comment">// æˆ–åœ¨ReActAgentä¸­è®¾ç½®</span>
<span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
    .sysPrompt(<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æŠ€æœ¯æ–‡æ¡£æ’°å†™å‘˜..."</span>)
    .build();
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>åœ¨å¯¹è¯å¼€å§‹æ—¶å‘é€ç»™LLM</li>
<li>æŒ‡å¯¼Agentçš„è¡Œä¸ºå’Œè¾“å‡ºæ ¼å¼</li>
<li>é€šå¸¸ä¸ä¼šæ”¹å˜ï¼ˆé™¤ééœ€è¦æ›´æ–°Agentçš„äººè®¾ï¼‰</li>
</ul>
<p><strong>å…³é”®ç”¨é€”</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SYSTEM</span>æ¶ˆæ¯å®šä¹‰çš„å†…å®¹åŒ…æ‹¬ï¼š
â”œâ”€ Agentçš„è§’è‰²å’ŒèƒŒæ™¯
â”œâ”€ è¡Œä¸ºè§„åˆ™å’Œçº¦æŸ
â”œâ”€ è¾“å‡ºæ ¼å¼è¦æ±‚
â”œâ”€ å¤„ç†ç‰¹æ®Šæƒ…å†µçš„æŒ‡ç¤º
â””â”€ å¯ä¿¡åº¦å’Œå®‰å…¨æ€§æŒ‡å¯¼
</code></pre>
<h4 data-id="heading-19">4. TOOL è§’è‰²</h4>
<p><strong>å®šä¹‰</strong>ï¼šå·¥å…·æ‰§è¡Œç»“æœæ¶ˆæ¯</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å·¥å…·æ‰§è¡Œåè¿”å›çš„æ¶ˆæ¯</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">toolResultMsg</span> <span class="hljs-operator">=</span> Msg.builder()
    .role(MsgRole.TOOL)
    .name(<span class="hljs-string">"database_query_tool"</span>)  <span class="hljs-comment">// å·¥å…·åç§°</span>
    .textContent(<span class="hljs-string">"SELECT * FROM users WHERE id='123' RETURNED: ..."</span>)
    .metadata(Map.of(
        <span class="hljs-string">"tool_call_id"</span>, <span class="hljs-string">"call_abc123"</span>,  <span class="hljs-comment">// å…³è”åˆ°åŸå§‹å·¥å…·è°ƒç”¨</span>
        <span class="hljs-string">"execution_time"</span>, <span class="hljs-number">45</span>,            <span class="hljs-comment">// æ‰§è¡Œè€—æ—¶ï¼ˆæ¯«ç§’ï¼‰</span>
        <span class="hljs-string">"success"</span>, <span class="hljs-literal">true</span>
    ))
    .build();
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>ç”±å·¥å…·æ‰§è¡Œå™¨ç”Ÿæˆ</li>
<li>åŒ…å«å·¥å…·çš„æ‰§è¡Œç»“æœ</li>
<li>é€šå¸¸åŒ…å«å…³é”®çš„å…ƒæ•°æ®ï¼ˆå¦‚æ‰§è¡Œæ—¶é—´ã€é”™è¯¯ä¿¡æ¯ç­‰ï¼‰</li>
</ul>
<p><strong>å·¥å…·è°ƒç”¨-ç»“æœæµç¨‹</strong>ï¼š</p>
<pre><code class="hljs">Agentæ€è€ƒï¼šéœ€è¦æŸ¥è¯¢æ•°æ®åº“
  â†“
Agentå‘èµ·å·¥å…·è°ƒç”¨ï¼ˆToolUseBlockï¼‰
  â†“
ToolExecutoræ‰§è¡Œå·¥å…·
  â†“
ç”ŸæˆTOOLè§’è‰²çš„æ¶ˆæ¯ï¼ŒåŒ…å«ç»“æœ
  â†“
Agentæ¥æ”¶ç»“æœï¼Œç»§ç»­æ¨ç†
</code></pre>
<h3 data-id="heading-20">2.2.2 æ¶ˆæ¯è§’è‰²åœ¨ReActå¾ªç¯ä¸­çš„åº”ç”¨</h3>
<pre><code class="hljs language-csharp" lang="csharp">ç¬¬<span class="hljs-number">1</span>è½®å¯¹è¯ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USER: <span class="hljs-string">"è®¡ç®—è¿‡å»30å¤©çš„å¹³å‡é”€å”®é¢"</span>     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
         [<span class="hljs-meta">Agentæ¨ç†é˜¶æ®µ</span>]
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ASSISTANT: æ€è€ƒè¿‡ç¨‹...               â”‚
â”‚ <span class="hljs-string">"æˆ‘éœ€è¦ï¼š                             â”‚
â”‚  1. æŸ¥è¯¢è¿‡å»30å¤©çš„é”€å”®æ•°æ®            â”‚
â”‚  2. è®¡ç®—å¹³å‡å€¼                        â”‚
â”‚  è°ƒç”¨ query_sales å·¥å…·..."</span>           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
         [<span class="hljs-meta">Agentè¡ŒåŠ¨é˜¶æ®µ</span>]
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TOOL: query_sales è¿”å›ç»“æœ            â”‚
â”‚ [{<span class="hljs-string">"date"</span>: <span class="hljs-string">"2024-01-01"</span>, <span class="hljs-string">"amount"</span>: ...}] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“
        [<span class="hljs-meta">Agentç»§ç»­æ¨ç†</span>]
                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ASSISTANT: æœ€ç»ˆç­”æ¡ˆ                   â”‚
â”‚ <span class="hljs-string">"è¿‡å»30å¤©çš„å¹³å‡é”€å”®é¢ä¸º Â¥50,000"</span>    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-21">2.2.3 å¤šè½®å¯¹è¯ä¸­çš„æ¶ˆæ¯ç»„ç»‡</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ¨¡æ‹Ÿä¸€ä¸ªå®Œæ•´çš„å¤šè½®å¯¹è¯æµç¨‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">demonstrateMultiRoundConversation</span><span class="hljs-params">()</span> {
    <span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
        .name(<span class="hljs-string">"SalesAnalyst"</span>)
        .sysPrompt(<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªé”€å”®åˆ†æä¸“å®¶ã€‚..."</span>)
        .model(model)
        .toolkit(toolkit)
        .build();
    
    <span class="hljs-comment">// ç¬¬1è½®ï¼šç”¨æˆ·æé—®</span>
    System.out.println(<span class="hljs-string">"=== ç¬¬1è½®å¯¹è¯ ==="</span>);
    <span class="hljs-type">Msg</span> <span class="hljs-variable">userMsg1</span> <span class="hljs-operator">=</span> Msg.builder()
        .role(MsgRole.USER)
        .textContent(<span class="hljs-string">"è¿‡å»7å¤©çš„é”€å”®è¶‹åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ"</span>)
        .build();
    
    <span class="hljs-type">Msg</span> <span class="hljs-variable">response1</span> <span class="hljs-operator">=</span> agent.call(userMsg1).block();
    System.out.println(<span class="hljs-string">"Agent: "</span> + response1.getTextContent());
    <span class="hljs-comment">// å†…éƒ¨æ¶ˆæ¯æµï¼š</span>
    <span class="hljs-comment">//   USERæ¶ˆæ¯ â†’ Memoryè®°å½• â†’ Modelæ¨ç†</span>
    <span class="hljs-comment">//   â†’ ASSISTANTæ¶ˆæ¯ â†’ è°ƒç”¨å·¥å…·</span>
    <span class="hljs-comment">//   â†’ TOOLæ¶ˆæ¯ â†’ è®°å½•ç»“æœ</span>
    <span class="hljs-comment">//   â†’ ASSISTANTæ¶ˆæ¯ï¼ˆæœ€ç»ˆï¼‰ â†’ è¿”å›ç»™ç”¨æˆ·</span>
    
    <span class="hljs-comment">// ç¬¬2è½®ï¼šåŸºäºç¬¬1è½®ç»“æœçš„è¿½é—®</span>
    System.out.println(<span class="hljs-string">"\n=== ç¬¬2è½®å¯¹è¯ ==="</span>);
    <span class="hljs-type">Msg</span> <span class="hljs-variable">userMsg2</span> <span class="hljs-operator">=</span> Msg.builder()
        .role(MsgRole.USER)
        .textContent(<span class="hljs-string">"å¯¹æ¯”å»å¹´åŒæœŸï¼Œå¢é•¿äº†å¤šå°‘ï¼Ÿ"</span>)
        .build();
    
    <span class="hljs-type">Msg</span> <span class="hljs-variable">response2</span> <span class="hljs-operator">=</span> agent.call(userMsg2).block();
    System.out.println(<span class="hljs-string">"Agent: "</span> + response2.getTextContent());
    <span class="hljs-comment">// Agentè‡ªåŠ¨ä»Memoryè·å¾—ç¬¬1è½®çš„å¯¹è¯ä¸Šä¸‹æ–‡</span>
    <span class="hljs-comment">// å› æ­¤èƒ½å¤Ÿç†è§£"å»å¹´åŒæœŸ"çš„å«ä¹‰</span>
}
</code></pre>
<hr/>
<h2 data-id="heading-22">2.3 å†…å®¹å—ï¼ˆContentBlockï¼‰ç³»ç»Ÿ</h2>
<h3 data-id="heading-23">2.3.1 ContentBlockçš„è®¾è®¡</h3>
<h4 data-id="heading-24">ä¸ºä»€ä¹ˆéœ€è¦å†…å®¹å—ç³»ç»Ÿï¼Ÿ</h4>
<pre><code class="hljs language-arduino" lang="arduino">åœºæ™¯ï¼šä¸€ä¸ªå¯¹è¯ä¸­å¯èƒ½åŒ…å«
â”œâ”€ ç”¨æˆ·çš„æ–‡æœ¬é—®é¢˜ï¼š<span class="hljs-string">"è¯·åˆ†æè¿™å¼ é”€å”®æŠ¥è¡¨"</span>
â”œâ”€ ç”¨æˆ·ä¸Šä¼ çš„å›¾è¡¨å›¾ç‰‡ï¼šPNGæ ¼å¼ï¼Œç¼–ç ä¸ºBase64
â”œâ”€ Agentçš„æ¨ç†è¿‡ç¨‹ï¼šå¯¹å›¾è¡¨çš„ç†è§£
â”œâ”€ Agentè°ƒç”¨çš„å·¥å…·ï¼šæ•°æ®åº“æŸ¥è¯¢å·¥å…·
â””â”€ å·¥å…·çš„è¿”å›ç»“æœï¼šæŸ¥è¯¢åˆ°çš„æ•°æ®

é—®é¢˜ï¼šå¦‚ä½•ç”¨ç»Ÿä¸€çš„æ–¹å¼è¡¨è¾¾è¿™äº›ä¸åŒç±»å‹çš„å†…å®¹ï¼Ÿ

æ–¹æ¡ˆï¼šä½¿ç”¨å¤šæ€çš„ContentBlockä½“ç³»
â””â”€ æ¯ç§å†…å®¹ç±»å‹éƒ½æ˜¯ContentBlockçš„å®ç°
   é€šè¿‡æ¨¡å¼åŒ¹é…å¤„ç†ä¸åŒç±»å‹
</code></pre>
<h4 data-id="heading-25">ContentBlockçš„ç»§æ‰¿ç»“æ„</h4>
<pre><code class="hljs language-python" lang="python">ContentBlockï¼ˆsealed <span class="hljs-keyword">class</span>ï¼Œå·²å¯†å°ï¼‰
â”œâ”€â”€ TextBlock          <span class="hljs-comment"># çº¯æ–‡æœ¬å†…å®¹</span>
â”œâ”€â”€ ThinkingBlock      <span class="hljs-comment"># Agentçš„æ¨ç†/æ€è€ƒè¿‡ç¨‹</span>
â”œâ”€â”€ ImageBlock         <span class="hljs-comment"># å›¾åƒå†…å®¹</span>
â”œâ”€â”€ AudioBlock         <span class="hljs-comment"># éŸ³é¢‘å†…å®¹</span>
â”œâ”€â”€ VideoBlock         <span class="hljs-comment"># è§†é¢‘å†…å®¹</span>
â”œâ”€â”€ ToolUseBlock       <span class="hljs-comment"># å·¥å…·è°ƒç”¨è¯·æ±‚</span>
â””â”€â”€ ToolResultBlock    <span class="hljs-comment"># å·¥å…·æ‰§è¡Œç»“æœ</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨sealed classï¼Ÿ</strong></p>
<pre><code class="hljs language-java" lang="java">ä¼˜åŠ¿<span class="hljs-number">1</span>ï¼šç±»å‹å®‰å…¨
â””â”€ ç¼–è¯‘å™¨ç¡®ä¿åªæœ‰å£°æ˜çš„å­ç±»å­˜åœ¨

ä¼˜åŠ¿<span class="hljs-number">2</span>ï¼šæ¨¡å¼åŒ¹é…æ”¯æŒ
â””â”€ <span class="hljs-keyword">switch</span>è¡¨è¾¾å¼å¯ä»¥ç©·ä¸¾æ‰€æœ‰æƒ…å†µ

ä¼˜åŠ¿<span class="hljs-number">3</span>ï¼šæ€§èƒ½ä¼˜åŒ–
â””â”€ ç¼–è¯‘å™¨å¯ä»¥è¿›è¡Œæ›´å¤šä¼˜åŒ–

ç¤ºä¾‹ï¼š
<span class="hljs-type">ContentBlock</span> <span class="hljs-variable">block</span> <span class="hljs-operator">=</span> ...;
<span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">switch</span> (block) {
    <span class="hljs-keyword">case</span> TextBlock tb -&gt; tb.getText();
    <span class="hljs-keyword">case</span> ImageBlock ib -&gt; <span class="hljs-string">"[Image: "</span> + ib.getSource().getUrl() + <span class="hljs-string">"]"</span>;
    <span class="hljs-keyword">case</span> ToolUseBlock tub -&gt; <span class="hljs-string">"Tool call: "</span> + tub.getName();
    <span class="hljs-comment">// ... ç¼–è¯‘å™¨ç¡®ä¿æ‰€æœ‰æƒ…å†µéƒ½è¢«å¤„ç†</span>
};
</code></pre>
<h3 data-id="heading-26">2.3.2 æ ¸å¿ƒå†…å®¹å—è¯¦è§£</h3>
<h4 data-id="heading-27">1. TextBlock - æ–‡æœ¬å†…å®¹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆ›å»ºæ–‡æœ¬å—</span>
<span class="hljs-type">TextBlock</span> <span class="hljs-variable">textBlock</span> <span class="hljs-operator">=</span> TextBlock.builder()
    .text(<span class="hljs-string">"è¿™æ˜¯ä¸€ä¸ªæ–‡æœ¬å—"</span>)
    .build();

<span class="hljs-comment">// ç®€åŒ–åˆ›å»ºæ–¹å¼</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> Msg.builder()
    .textContent(<span class="hljs-string">"è¿™æ˜¯ä¸€æ¡æ¶ˆæ¯"</span>)  <span class="hljs-comment">// è‡ªåŠ¨åˆ›å»ºTextBlock</span>
    .build();

<span class="hljs-comment">// å®é™…åº”ç”¨</span>
<span class="hljs-type">TextBlock</span> <span class="hljs-variable">systemPrompt</span> <span class="hljs-operator">=</span> TextBlock.builder()
    .text(<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æŠ€æœ¯é¡¾é—®ã€‚"</span> +
          <span class="hljs-string">"ä½ çš„å›ç­”åº”è¯¥ï¼š\n"</span> +
          <span class="hljs-string">"1. å‡†ç¡®\n"</span> +
          <span class="hljs-string">"2. æ¸…æ™°æ˜“æ‡‚\n"</span> +
          <span class="hljs-string">"3. åŒ…å«å®ä¾‹ä»£ç "</span>)
    .build();
</code></pre>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç”¨æˆ·è¾“å…¥</li>
<li>Agentæ¨ç†ç»“æœ</li>
<li>ç³»ç»Ÿæç¤ºè¯</li>
<li>ä¸€èˆ¬çš„æ–‡æœ¬å“åº”</li>
</ul>
<h4 data-id="heading-28">2. ThinkingBlock - æ¨ç†è¿‡ç¨‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŸäº›æ¨¡å‹ï¼ˆå¦‚Claude 3.5 Sonnetï¼‰æ”¯æŒè¿”å›æ€è€ƒè¿‡ç¨‹</span>
<span class="hljs-type">ThinkingBlock</span> <span class="hljs-variable">thinkingBlock</span> <span class="hljs-operator">=</span> ThinkingBlock.builder()
    .thinking(<span class="hljs-string">"è®©æˆ‘åˆ†æè¿™ä¸ªé—®é¢˜ï¼š\n"</span> +
              <span class="hljs-string">"1. é¦–å…ˆï¼Œæˆ‘éœ€è¦ç†è§£ç”¨æˆ·çš„éœ€æ±‚\n"</span> +
              <span class="hljs-string">"2. ç„¶åï¼Œæˆ‘éœ€è¦æ‰¾åˆ°ç›¸å…³çš„ä¿¡æ¯\n"</span> +
              <span class="hljs-string">"3. æœ€åï¼Œæˆ‘éœ€è¦æ•´åˆè¿™äº›ä¿¡æ¯å¹¶ç”Ÿæˆç­”æ¡ˆ"</span>)
    .build();

<span class="hljs-comment">// æ¶ˆæ¯ä¸­çš„thinkingå—</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> Msg.builder()
    .role(MsgRole.ASSISTANT)
    .content(
        thinkingBlock,  <span class="hljs-comment">// æ¨¡å‹çš„æ€è€ƒè¿‡ç¨‹</span>
        TextBlock.builder().text(<span class="hljs-string">"åŸºäºä¸Šè¿°åˆ†æï¼Œç­”æ¡ˆæ˜¯..."</span>).build()
    )
    .build();
</code></pre>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç†è§£Agentçš„æ¨ç†é€»è¾‘</li>
<li>è°ƒè¯•Agentè¡Œä¸º</li>
<li>æé«˜è¾“å‡ºçš„å¯è§£é‡Šæ€§</li>
</ul>
<h4 data-id="heading-29">3. ImageBlock - å›¾åƒå†…å®¹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ–¹å¼1ï¼šBase64ç¼–ç ï¼ˆæ¨èç”¨äºå°æ–‡ä»¶ï¼‰</span>
<span class="hljs-type">String</span> <span class="hljs-variable">base64Image</span> <span class="hljs-operator">=</span> Base64.getEncoder().encodeToString(
    Files.readAllBytes(Paths.get(<span class="hljs-string">"chart.png"</span>))
);
<span class="hljs-type">ImageBlock</span> <span class="hljs-variable">imageBlock1</span> <span class="hljs-operator">=</span> ImageBlock.builder()
    .source(Base64Source.builder()
        .data(base64Image)
        .mediaType(<span class="hljs-string">"image/png"</span>)  <span class="hljs-comment">// å¿…éœ€ï¼šæŒ‡å®šMIMEç±»å‹</span>
        .build())
    .build();

<span class="hljs-comment">// æ–¹å¼2ï¼šURLå¼•ç”¨ï¼ˆæ¨èç”¨äºå¤§æ–‡ä»¶æˆ–ç½‘ç»œå›¾ç‰‡ï¼‰</span>
<span class="hljs-type">ImageBlock</span> <span class="hljs-variable">imageBlock2</span> <span class="hljs-operator">=</span> ImageBlock.builder()
    .source(URLSource.builder()
        .url(<span class="hljs-string">"https://example.com/dashboard-screenshot.png"</span>)
        .build())
    .build();

<span class="hljs-comment">// åˆ›å»ºå«å›¾çš„æ¶ˆæ¯</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">imgMsg</span> <span class="hljs-operator">=</span> Msg.builder()
    .role(MsgRole.USER)
    .name(<span class="hljs-string">"user_123"</span>)
    .content(
        TextBlock.builder().text(<span class="hljs-string">"è¯·åˆ†æè¿™å¼ å›¾ç‰‡ä¸­çš„æ•°æ®è¶‹åŠ¿"</span>).build(),
        imageBlock2  <span class="hljs-comment">// æ·»åŠ å›¾åƒ</span>
    )
    .build();
</code></pre>
<p><strong>æ”¯æŒçš„å›¾åƒæ ¼å¼</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">image/png         <span class="hljs-comment"># PNGæ ¼å¼</span>
image/jpeg        <span class="hljs-comment"># JPEGæ ¼å¼</span>
image/gif         <span class="hljs-comment"># GIFæ ¼å¼</span>
image/webp        <span class="hljs-comment"># WebPæ ¼å¼ï¼ˆç°ä»£æµè§ˆå™¨æ”¯æŒï¼‰</span>
</code></pre>
<p><strong>ç”Ÿäº§åœºæ™¯ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// äº§å“æˆªå›¾åˆ†æ</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">analyzeProductScreenshot</span><span class="hljs-params">(String imagePath)</span> {
    <span class="hljs-type">byte</span>[] imageBytes = Files.readAllBytes(Paths.get(imagePath));
    <span class="hljs-type">String</span> <span class="hljs-variable">base64</span> <span class="hljs-operator">=</span> Base64.getEncoder().encodeToString(imageBytes);
    
    <span class="hljs-type">ImageBlock</span> <span class="hljs-variable">screenshot</span> <span class="hljs-operator">=</span> ImageBlock.builder()
        .source(Base64Source.builder()
            .data(base64)
            .mediaType(<span class="hljs-string">"image/png"</span>)
            .build())
        .build();
    
    <span class="hljs-type">Msg</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> Msg.builder()
        .role(MsgRole.USER)
        .content(
            TextBlock.builder().text(<span class="hljs-string">"è¯·è¯†åˆ«è¿™ä¸ªäº§å“ç•Œé¢ä¸­çš„é—®é¢˜"</span>).build(),
            screenshot
        )
        .build();
    
    <span class="hljs-keyword">return</span> agent.call(msg).block().getTextContent();
}
</code></pre>
<h4 data-id="heading-30">4. AudioBlock å’Œ VideoBlock</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// éŸ³é¢‘å—</span>
<span class="hljs-type">AudioBlock</span> <span class="hljs-variable">audioBlock</span> <span class="hljs-operator">=</span> AudioBlock.builder()
    .source(Base64Source.builder()
        .data(base64AudioData)
        .mediaType(<span class="hljs-string">"audio/mp3"</span>)  <span class="hljs-comment">// audio/wav, audio/mpegç­‰</span>
        .build())
    .build();

<span class="hljs-comment">// è§†é¢‘å—ï¼ˆé€šå¸¸ç”¨URLå¼•ç”¨ï¼‰</span>
<span class="hljs-type">VideoBlock</span> <span class="hljs-variable">videoBlock</span> <span class="hljs-operator">=</span> VideoBlock.builder()
    .source(URLSource.builder()
        .url(<span class="hljs-string">"https://example.com/demo-video.mp4"</span>)
        .build())
    .build();

<span class="hljs-comment">// åŒ…å«éŸ³è§†é¢‘çš„æ¶ˆæ¯</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">multimodalMsg</span> <span class="hljs-operator">=</span> Msg.builder()
    .role(MsgRole.USER)
    .content(
        TextBlock.builder().text(<span class="hljs-string">"è¯·è½¬å½•è¿™æ®µéŸ³é¢‘"</span>).build(),
        audioBlock
    )
    .build();
</code></pre>
<p><strong>æ”¯æŒçš„æ ¼å¼</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">éŸ³é¢‘ï¼šaudio/mp3, audio/wav, audio/mpeg
è§†é¢‘ï¼švideo/mp4, video/mpeg, video/quicktime
</code></pre>
<h4 data-id="heading-31">5. ToolUseBlock - å·¥å…·è°ƒç”¨</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Agentå†³å®šè°ƒç”¨å·¥å…·æ—¶ç”Ÿæˆæ­¤å—</span>
<span class="hljs-type">ToolUseBlock</span> <span class="hljs-variable">toolUseBlock</span> <span class="hljs-operator">=</span> ToolUseBlock.builder()
    .id(<span class="hljs-string">"call_12345"</span>)  <span class="hljs-comment">// å·¥å…·è°ƒç”¨ID</span>
    .name(<span class="hljs-string">"query_database"</span>)  <span class="hljs-comment">// å·¥å…·åç§°</span>
    .arguments(Map.of(  <span class="hljs-comment">// å·¥å…·å‚æ•°</span>
        <span class="hljs-string">"sql"</span>, <span class="hljs-string">"SELECT * FROM users WHERE age &gt; 30"</span>,
        <span class="hljs-string">"limit"</span>, <span class="hljs-number">100</span>
    ))
    .build();

<span class="hljs-comment">// åŒ…å«å·¥å…·è°ƒç”¨çš„Agentå“åº”</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">agentMsg</span> <span class="hljs-operator">=</span> Msg.builder()
    .role(MsgRole.ASSISTANT)
    .content(
        TextBlock.builder()
            .text(<span class="hljs-string">"æˆ‘éœ€è¦æŸ¥è¯¢æ•°æ®åº“ä»¥è·å¾—ç­”æ¡ˆ"</span>)
            .build(),
        toolUseBlock  <span class="hljs-comment">// å·¥å…·è°ƒç”¨è¯·æ±‚</span>
    )
    .build();

<span class="hljs-comment">// ToolUseBlockçš„å†…éƒ¨ç»“æ„</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToolUseBlock</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ContentBlock</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String id;              <span class="hljs-comment">// å”¯ä¸€æ ‡è¯†æœ¬æ¬¡è°ƒç”¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String name;            <span class="hljs-comment">// å·¥å…·åç§°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, Object&gt; arguments;  <span class="hljs-comment">// å‚æ•°</span>
}
</code></pre>
<p><strong>å·¥å…·è°ƒç”¨æµç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Agent</span>åˆ¤æ–­éœ€è¦è°ƒç”¨å·¥å…·
  â†“
ç”Ÿæˆ<span class="hljs-title class_">ToolUseBlock</span>
  â†“
<span class="hljs-title class_">ToolExecutor</span>å‘ç°è¯¥å—
  â†“
æ ¹æ®tool nameæ‰¾åˆ°å®é™…å·¥å…·æ–¹æ³•
  â†“
å°†<span class="hljs-variable language_">arguments</span>è½¬æ¢ä¸ºæ–¹æ³•å‚æ•°
  â†“
æ‰§è¡Œå·¥å…·æ–¹æ³•
  â†“
å°†ç»“æœåŒ…è£…ä¸º<span class="hljs-title class_">ToolResultBlock</span>
</code></pre>
<h4 data-id="heading-32">6. ToolResultBlock - å·¥å…·ç»“æœ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å·¥å…·æ‰§è¡Œå®Œåç”Ÿæˆæ­¤å—</span>
<span class="hljs-type">ToolResultBlock</span> <span class="hljs-variable">toolResultBlock</span> <span class="hljs-operator">=</span> ToolResultBlock.builder()
    .id(<span class="hljs-string">"call_12345"</span>)  <span class="hljs-comment">// å¯¹åº”çš„å·¥å…·è°ƒç”¨ID</span>
    .name(<span class="hljs-string">"query_database"</span>)  <span class="hljs-comment">// å·¥å…·åç§°</span>
    .content(<span class="hljs-string">"SELECT returned 42 rows:\n[{\"id\": 1, ...}, ...]"</span>)  <span class="hljs-comment">// ç»“æœå†…å®¹</span>
    .isError(<span class="hljs-literal">false</span>)  <span class="hljs-comment">// æ˜¯å¦å‡ºé”™</span>
    .build();

<span class="hljs-comment">// åœ¨Agentå“åº”ä¸­è¡¨ç¤ºå·¥å…·æ‰§è¡ŒæˆåŠŸ</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">toolResult</span> <span class="hljs-operator">=</span> Msg.builder()
    .role(MsgRole.TOOL)
    .name(<span class="hljs-string">"query_database"</span>)
    .content(toolResultBlock)
    .metadata(Map.of(
        <span class="hljs-string">"execution_time"</span>, <span class="hljs-number">123</span>,  <span class="hljs-comment">// æ¯«ç§’</span>
        <span class="hljs-string">"row_count"</span>, <span class="hljs-number">42</span>
    ))
    .build();

<span class="hljs-comment">// å·¥å…·æ‰§è¡Œå¤±è´¥çš„æƒ…å†µ</span>
<span class="hljs-type">ToolResultBlock</span> <span class="hljs-variable">errorBlock</span> <span class="hljs-operator">=</span> ToolResultBlock.builder()
    .id(<span class="hljs-string">"call_12346"</span>)
    .name(<span class="hljs-string">"query_database"</span>)
    .content(<span class="hljs-string">"Error: Database connection timeout after 30s"</span>)
    .isError(<span class="hljs-literal">true</span>)  <span class="hljs-comment">// æ ‡è®°ä¸ºé”™è¯¯</span>
    .build();
</code></pre>
<h3 data-id="heading-33">2.3.3 å†…å®¹å—çš„å®é™…åº”ç”¨</h3>
<h4 data-id="heading-34">åœºæ™¯1ï¼šå¤šæ¨¡æ€é—®ç­”</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç”¨æˆ·ä¸Šä¼ å¤šå¼ å›¾è¡¨å¹¶æé—®</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">userQuery</span> <span class="hljs-operator">=</span> Msg.builder()
    .role(MsgRole.USER)
    .name(<span class="hljs-string">"analyst_alice"</span>)
    .content(
        TextBlock.builder()
            .text(<span class="hljs-string">"è¯·å¯¹æ¯”è¿™ä¸¤å¼ æœˆåº¦é”€å”®æŠ¥è¡¨ï¼Œæ‰¾å‡ºä¸»è¦å·®å¼‚å’Œè¶‹åŠ¿"</span>)
            .build(),
        ImageBlock.builder()
            .source(URLSource.builder()
                .url(<span class="hljs-string">"https://cdn.example.com/sales_jan.png"</span>)
                .build())
            .build(),
        ImageBlock.builder()
            .source(URLSource.builder()
                .url(<span class="hljs-string">"https://cdn.example.com/sales_feb.png"</span>)
                .build())
            .build()
    )
    .build();

<span class="hljs-comment">// Agentå¤„ç†</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> agent.call(userQuery).block();
<span class="hljs-comment">// Agentçœ‹åˆ°äº†ä¸¤å¼ å›¾ç‰‡ï¼Œå¹¶ç†è§£äº†å¯¹æ¯”åˆ†æçš„éœ€æ±‚</span>
</code></pre>
<h4 data-id="heading-35">åœºæ™¯2ï¼šåŒ…å«æ¨ç†è¿‡ç¨‹çš„å›å¤</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Agentè¿”å›æ€è€ƒè¿‡ç¨‹å’Œæœ€ç»ˆç­”æ¡ˆ</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">agentResponse</span> <span class="hljs-operator">=</span> Msg.builder()
    .role(MsgRole.ASSISTANT)
    .name(<span class="hljs-string">"AnalysisBot"</span>)
    .content(
        ThinkingBlock.builder()
            .thinking(
                <span class="hljs-string">"è®©æˆ‘åˆ†æè¿™ä¸¤ä¸ªæœˆçš„æ•°æ®ï¼š\n"</span> +
                <span class="hljs-string">"1æœˆçš„é”€å”®é¢åœ¨100-150ä¸‡ä¹‹é—´\n"</span> +
                <span class="hljs-string">"2æœˆçš„é”€å”®é¢åœ¨120-180ä¸‡ä¹‹é—´\n"</span> +
                <span class="hljs-string">"çœ‹èµ·æ¥æ•´ä½“è¶‹åŠ¿å‘ä¸Š..."</span>)
            .build(),
        TextBlock.builder()
            .text(
                <span class="hljs-string">"æ ¹æ®åˆ†æï¼š\n"</span> +
                <span class="hljs-string">"- 2æœˆé”€å”®é¢å¹³å‡ä¸Šå‡15%\n"</span> +
                <span class="hljs-string">"- æ–°äº§å“çº¿è´¡çŒ®äº†30%çš„å¢é•¿\n"</span> +
                <span class="hljs-string">"- å»ºè®®åŠ å¤§è¥é”€æŠ•å…¥"</span>)
            .build()
    )
    .build();
</code></pre>
<h4 data-id="heading-36">åœºæ™¯3ï¼šå·¥å…·è°ƒç”¨å’Œç»“æœé“¾</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ¨¡æ‹Ÿå®Œæ•´çš„å·¥å…·è°ƒç”¨æµç¨‹</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">agentWithToolCall</span> <span class="hljs-operator">=</span> Msg.builder()
    .role(MsgRole.ASSISTANT)
    .content(
        TextBlock.builder()
            .text(<span class="hljs-string">"æˆ‘éœ€è¦æŸ¥è¯¢æœ€æ–°çš„åº“å­˜æ•°æ®æ¥å›ç­”ä½ çš„é—®é¢˜"</span>)
            .build(),
        ToolUseBlock.builder()
            .id(<span class="hljs-string">"call_001"</span>)
            .name(<span class="hljs-string">"get_inventory"</span>)
            .arguments(Map.of(<span class="hljs-string">"product_id"</span>, <span class="hljs-string">"SKU-2024-001"</span>))
            .build()
    )
    .build();

<span class="hljs-comment">// å·¥å…·æ‰§è¡Œåè¿”å›ç»“æœ</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">toolExecution</span> <span class="hljs-operator">=</span> Msg.builder()
    .role(MsgRole.TOOL)
    .name(<span class="hljs-string">"get_inventory"</span>)
    .content(
        ToolResultBlock.builder()
            .id(<span class="hljs-string">"call_001"</span>)
            .name(<span class="hljs-string">"get_inventory"</span>)
            .content(<span class="hljs-string">"{\"product_id\": \"SKU-2024-001\", \"stock\": 5000}"</span>)
            .isError(<span class="hljs-literal">false</span>)
            .build()
    )
    .build();

<span class="hljs-comment">// Agentç»§ç»­æ¨ç†å¹¶ç»™å‡ºæœ€ç»ˆç­”æ¡ˆ</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">finalResponse</span> <span class="hljs-operator">=</span> Msg.builder()
    .role(MsgRole.ASSISTANT)
    .textContent(<span class="hljs-string">"SKU-2024-001çš„åº“å­˜ä¸º5000ä»¶ï¼Œè¶³ä»¥æ»¡è¶³ä»Šå¹´çš„é”€å”®è®¡åˆ’ã€‚"</span>)
    .build();
</code></pre>
<hr/>
<h2 data-id="heading-37">2.4 æ¶ˆæ¯å…ƒæ•°æ®ä¸ç»“æ„åŒ–æ•°æ®</h2>
<h3 data-id="heading-38">2.4.1 å…ƒæ•°æ®çš„è®¾è®¡</h3>
<h4 data-id="heading-39">å…ƒæ•°æ®çš„ç”¨é€”</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">å…ƒæ•°æ®ï¼ˆMetadataï¼‰æ˜¯å…³äºæ¶ˆæ¯æœ¬èº«çš„æ•°æ®ï¼ŒåŒ…æ‹¬ï¼š</span>

<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æ¶ˆæ¯å…³ç³»å…ƒæ•°æ®</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">â””â”€</span> <span class="hljs-attr">reply_to:</span> <span class="hljs-string">å…³è”åˆ°å“ªæ¡æ¶ˆæ¯çš„å›å¤</span>
<span class="hljs-string">â”‚</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">ä¸šåŠ¡å…ƒæ•°æ®</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">user_id:</span> <span class="hljs-string">æ¶ˆæ¯æ‰€å±çš„ç”¨æˆ·</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">session_id:</span> <span class="hljs-string">æ¶ˆæ¯æ‰€å±çš„ä¼šè¯</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">â””â”€</span> <span class="hljs-attr">conversation_id:</span> <span class="hljs-string">æ¶ˆæ¯æ‰€å±çš„å¯¹è¯</span>
<span class="hljs-string">â”‚</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">ç»“æ„åŒ–æ•°æ®</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">è®¢å•ä¿¡æ¯ã€ç”¨æˆ·ä¿¡æ¯ç­‰ä¸šåŠ¡å¯¹è±¡</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">â””â”€</span> <span class="hljs-string">ç›´æ¥å­˜å‚¨ä¸ºMap&lt;String,</span> <span class="hljs-string">Object&gt;</span>
<span class="hljs-string">â”‚</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æŠ€æœ¯å…ƒæ•°æ®</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">chat_usage:</span> <span class="hljs-string">Tokenä½¿ç”¨ç»Ÿè®¡</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">cost:</span> <span class="hljs-string">APIè°ƒç”¨æˆæœ¬</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">â””â”€</span> <span class="hljs-attr">latency:</span> <span class="hljs-string">å“åº”å»¶è¿Ÿ</span>
<span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€</span> <span class="hljs-string">æ‰©å±•å­—æ®µ</span>
   <span class="hljs-string">â””â”€</span> <span class="hljs-string">åº”ç”¨ç‰¹å®šçš„ä»»æ„é”®å€¼å¯¹</span>
</code></pre>
<h3 data-id="heading-40">2.4.2 ä½¿ç”¨å…ƒæ•°æ®å­˜å‚¨ç»“æ„åŒ–æ•°æ®</h3>
<h4 data-id="heading-41">æ–¹å¼1ï¼šç›´æ¥å­˜å‚¨Map</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç®€å•çš„é”®å€¼å¯¹</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> Msg.builder()
    .role(MsgRole.ASSISTANT)
    .textContent(<span class="hljs-string">"è®¢å•å·²ç¡®è®¤"</span>)
    .metadata(Map.of(
        <span class="hljs-string">"order_id"</span>, <span class="hljs-string">"ORD-2024-001"</span>,
        <span class="hljs-string">"total_price"</span>, <span class="hljs-number">1999.99</span>,
        <span class="hljs-string">"status"</span>, <span class="hljs-string">"confirmed"</span>,
        <span class="hljs-string">"items_count"</span>, <span class="hljs-number">3</span>
    ))
    .build();

<span class="hljs-comment">// è·å–å…ƒæ•°æ®</span>
Map&lt;String, Object&gt; metadata = msg.getMetadata();
<span class="hljs-type">String</span> <span class="hljs-variable">orderId</span> <span class="hljs-operator">=</span> (String) metadata.get(<span class="hljs-string">"order_id"</span>);
<span class="hljs-type">double</span> <span class="hljs-variable">price</span> <span class="hljs-operator">=</span> (<span class="hljs-type">double</span>) metadata.get(<span class="hljs-string">"total_price"</span>);
</code></pre>
<h4 data-id="heading-42">æ–¹å¼2ï¼šå­˜å‚¨POJOå¯¹è±¡</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å®šä¹‰ç»“æ„åŒ–æ•°æ®ç±»</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderData</span> {
    <span class="hljs-keyword">private</span> String orderId;
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> totalPrice;
    <span class="hljs-keyword">private</span> String status;
    <span class="hljs-keyword">private</span> List&lt;OrderItem&gt; items;
    <span class="hljs-keyword">private</span> LocalDateTime createdTime;
}

<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderItem</span> {
    <span class="hljs-keyword">private</span> String productId;
    <span class="hljs-keyword">private</span> String productName;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> quantity;
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> unitPrice;
}

<span class="hljs-comment">// åˆ›å»ºæ¶ˆæ¯æ—¶å­˜å‚¨å¯¹è±¡</span>
<span class="hljs-type">OrderData</span> <span class="hljs-variable">orderData</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderData</span>();
orderData.setOrderId(<span class="hljs-string">"ORD-2024-001"</span>);
orderData.setTotalPrice(<span class="hljs-number">1999.99</span>);
orderData.setStatus(<span class="hljs-string">"confirmed"</span>);
<span class="hljs-comment">// ... è®¾ç½®å…¶ä»–å­—æ®µ</span>

<span class="hljs-type">Msg</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> Msg.builder()
    .role(MsgRole.ASSISTANT)
    .textContent(<span class="hljs-string">"è®¢å•å·²ç¡®è®¤"</span>)
    .metadata(Map.of(
        <span class="hljs-string">"order"</span>, orderData,  <span class="hljs-comment">// å­˜å‚¨å¯¹è±¡</span>
        <span class="hljs-string">"operation_timestamp"</span>, System.currentTimeMillis()
    ))
    .build();

<span class="hljs-comment">// è·å–æ—¶ï¼ˆæ¨èæ–¹å¼ï¼‰</span>
<span class="hljs-keyword">if</span> (msg.hasStructuredData()) {
    <span class="hljs-type">OrderData</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> msg.getStructuredData(OrderData.class);
    System.out.println(<span class="hljs-string">"Order: "</span> + data.getOrderId());
}
</code></pre>
<h3 data-id="heading-43">2.4.3 ç”Ÿäº§åœºæ™¯ï¼šTokenä½¿ç”¨è¿½è¸ª</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// AgentScopeè‡ªåŠ¨åœ¨å…ƒæ•°æ®ä¸­è®°å½•Tokenä½¿ç”¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TokenUsageExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
            .name(<span class="hljs-string">"GPTAgent"</span>)
            .model(DashScopeChatModel.builder()
                .apiKey(System.getenv(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>))
                .modelName(<span class="hljs-string">"qwen-plus"</span>)
                .build())
            .build();
        
        <span class="hljs-comment">// è°ƒç”¨Agent</span>
        <span class="hljs-type">Msg</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> agent.call(
            Msg.builder().textContent(<span class="hljs-string">"ç”¨10å¥è¯æ¦‚æ‹¬äººå·¥æ™ºèƒ½çš„å‘å±•å†å²"</span>)
            .build()
        ).block();
        
        <span class="hljs-comment">// è·å–Tokenä½¿ç”¨ç»Ÿè®¡</span>
        <span class="hljs-type">ChatUsage</span> <span class="hljs-variable">usage</span> <span class="hljs-operator">=</span> response.getChatUsage();
        <span class="hljs-keyword">if</span> (usage != <span class="hljs-literal">null</span>) {
            System.out.println(<span class="hljs-string">"=== Token Usage ==="</span>);
            System.out.println(<span class="hljs-string">"Input tokens: "</span> + usage.getInputTokens());
            System.out.println(<span class="hljs-string">"Output tokens: "</span> + usage.getOutputTokens());
            System.out.println(<span class="hljs-string">"Total tokens: "</span> + usage.getTotalTokens());
            System.out.println(<span class="hljs-string">"Time: "</span> + usage.getTime() + <span class="hljs-string">"s"</span>);
            
            <span class="hljs-comment">// è®¡ç®—æˆæœ¬ï¼ˆå‡è®¾DashScopeåƒé—®æ¨¡å‹çš„ä»·æ ¼ï¼‰</span>
            <span class="hljs-comment">// è¾“å…¥ï¼š0.0001å…ƒ/åƒtokenï¼Œè¾“å‡ºï¼š0.0002å…ƒ/åƒtoken</span>
            <span class="hljs-type">double</span> <span class="hljs-variable">inputCost</span> <span class="hljs-operator">=</span> usage.getInputTokens() * <span class="hljs-number">0.0001</span> / <span class="hljs-number">1000</span>;
            <span class="hljs-type">double</span> <span class="hljs-variable">outputCost</span> <span class="hljs-operator">=</span> usage.getOutputTokens() * <span class="hljs-number">0.0002</span> / <span class="hljs-number">1000</span>;
            <span class="hljs-type">double</span> <span class="hljs-variable">totalCost</span> <span class="hljs-operator">=</span> inputCost + outputCost;
            
            System.out.printf(<span class="hljs-string">"Cost: Â¥%.4f (Input: Â¥%.4f, Output: Â¥%.4f)\n"</span>,
                totalCost, inputCost, outputCost);
        }
    }
}

<span class="hljs-comment">// ChatUsageç±»çš„ç»“æ„</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatUsage</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> inputTokens;        <span class="hljs-comment">// è¾“å…¥tokenæ•°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> outputTokens;       <span class="hljs-comment">// è¾“å‡ºtokenæ•°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> totalTokens;        <span class="hljs-comment">// æ€»tokenæ•°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> time;             <span class="hljs-comment">// å“åº”æ—¶é—´ï¼ˆç§’ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> cachedTokens;       <span class="hljs-comment">// ç¼“å­˜tokenæ•°ï¼ˆå¯é€‰ï¼‰</span>
}
</code></pre>
<hr/>
<h2 data-id="heading-44">2.5 æ¶ˆæ¯çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–</h2>
<h3 data-id="heading-45">2.5.1 JSONåºåˆ—åŒ–</h3>
<p>AgentScopeä½¿ç”¨Jacksonæ¡†æ¶å¤„ç†æ¶ˆæ¯çš„JSONåºåˆ—åŒ–ã€‚é€šè¿‡<code>@JsonTypeInfo</code>å’Œ<code>@JsonSubTypes</code>æ³¨è§£ï¼Œå®ç°äº†å¤šæ€JSONçš„è‡ªåŠ¨å¤„ç†ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åºåˆ—åŒ–ï¼šMsg â†’ JSON</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> Msg.builder()
    .role(MsgRole.USER)
    .name(<span class="hljs-string">"user_123"</span>)
    .content(
        TextBlock.builder().text(<span class="hljs-string">"Hello"</span>).build(),
        ImageBlock.builder()
            .source(URLSource.builder()
                .url(<span class="hljs-string">"https://example.com/image.png"</span>)
                .build())
            .build()
    )
    .metadata(Map.of(<span class="hljs-string">"user_id"</span>, <span class="hljs-string">"123"</span>))
    .build();

<span class="hljs-comment">// è‡ªåŠ¨è½¬ä¸ºJSON</span>
<span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>();
<span class="hljs-type">String</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> mapper.writeValueAsString(msg);

<span class="hljs-comment">// è¾“å‡ºçš„JSONç»“æ„</span>
<span class="hljs-comment">/*
{
  "id": "msg_uuid",
  "name": "user_123",
  "role": "USER",
  "content": [
    {
      "type": "text",
      "text": "Hello"
    },
    {
      "type": "image",
      "source": {
        "type": "url",
        "url": "https://example.com/image.png"
      }
    }
  ],
  "metadata": {
    "user_id": "123"
  },
  "timestamp": "2024-01-15 10:30:45.123"
}
*/</span>

<span class="hljs-comment">// ååºåˆ—åŒ–ï¼šJSON â†’ Msg</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">deserializedMsg</span> <span class="hljs-operator">=</span> mapper.readValue(json, Msg.class);
<span class="hljs-comment">// è‡ªåŠ¨æ ¹æ®"type"å­—æ®µé€‰æ‹©æ­£ç¡®çš„ContentBlockå­ç±»</span>
</code></pre>
<h3 data-id="heading-46">2.5.2 æ¶ˆæ¯çš„ç½‘ç»œä¼ è¾“</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åœºæ™¯ï¼šAgentåœ¨ä¸åŒæœºå™¨ä¸Šè¿è¡Œï¼Œéœ€è¦é€šè¿‡ç½‘ç»œä¼ è¾“æ¶ˆæ¯</span>

<span class="hljs-comment">// å‘é€ç«¯ï¼šå°†æ¶ˆæ¯åºåˆ—åŒ–å¹¶é€šè¿‡HTTPå‘é€</span>
<span class="hljs-meta">@PostMapping("/api/agent/call")</span>
<span class="hljs-keyword">public</span> ResponseEntity&lt;String&gt; <span class="hljs-title function_">callAgent</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> String msgJson)</span> 
    <span class="hljs-keyword">throws</span> Exception {
    
    <span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>();
    <span class="hljs-type">Msg</span> <span class="hljs-variable">userMsg</span> <span class="hljs-operator">=</span> mapper.readValue(msgJson, Msg.class);
    
    <span class="hljs-type">Msg</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> agent.call(userMsg).block();
    
    <span class="hljs-type">String</span> <span class="hljs-variable">responseJson</span> <span class="hljs-operator">=</span> mapper.writeValueAsString(response);
    <span class="hljs-keyword">return</span> ResponseEntity.ok(responseJson);
}

<span class="hljs-comment">// å®¢æˆ·ç«¯ï¼šåˆ›å»ºæ¶ˆæ¯ï¼Œåºåˆ—åŒ–å‘é€ï¼Œååºåˆ—åŒ–æ¥æ”¶</span>
<span class="hljs-keyword">public</span> Msg <span class="hljs-title function_">callRemoteAgent</span><span class="hljs-params">(String agentUrl, String userInput)</span> 
    <span class="hljs-keyword">throws</span> Exception {
    
    <span class="hljs-comment">// 1. åˆ›å»ºæ¶ˆæ¯</span>
    <span class="hljs-type">Msg</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> Msg.builder()
        .role(MsgRole.USER)
        .textContent(userInput)
        .build();
    
    <span class="hljs-comment">// 2. åºåˆ—åŒ–</span>
    <span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>();
    <span class="hljs-type">String</span> <span class="hljs-variable">msgJson</span> <span class="hljs-operator">=</span> mapper.writeValueAsString(msg);
    
    <span class="hljs-comment">// 3. é€šè¿‡HTTP POSTå‘é€</span>
    <span class="hljs-type">OkHttpClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OkHttpClient</span>();
    <span class="hljs-type">Request</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Request</span>.Builder()
        .url(agentUrl)
        .post(RequestBody.create(msgJson, MediaType.get(<span class="hljs-string">"application/json"</span>)))
        .build();
    
    <span class="hljs-type">Response</span> <span class="hljs-variable">httpResponse</span> <span class="hljs-operator">=</span> client.newCall(request).execute();
    <span class="hljs-type">String</span> <span class="hljs-variable">responseJson</span> <span class="hljs-operator">=</span> httpResponse.body().string();
    
    <span class="hljs-comment">// 4. ååºåˆ—åŒ–å“åº”</span>
    <span class="hljs-type">Msg</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> mapper.readValue(responseJson, Msg.class);
    <span class="hljs-keyword">return</span> response;
}
</code></pre>
<hr/>
<h2 data-id="heading-47">2.6 æ¶ˆæ¯åœ¨ç”Ÿäº§ç³»ç»Ÿä¸­çš„åº”ç”¨</h2>
<h3 data-id="heading-48">2.6.1 å¤šè½®å¯¹è¯ç®¡ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConversationManager</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ReActAgent agent;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Memory conversationMemory;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;Msg&gt; messageHistory;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ConversationManager</span><span class="hljs-params">(ReActAgent agent)</span> {
        <span class="hljs-built_in">this</span>.agent = agent;
        <span class="hljs-built_in">this</span>.conversationMemory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryMemory</span>();
        <span class="hljs-built_in">this</span>.messageHistory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    }
    
    <span class="hljs-comment">/**
     * æ·»åŠ ç”¨æˆ·æ¶ˆæ¯å¹¶è·å¾—Agentå›å¤
     */</span>
    <span class="hljs-keyword">public</span> Msg <span class="hljs-title function_">handleUserInput</span><span class="hljs-params">(String userId, String userInput)</span> {
        <span class="hljs-comment">// 1. åˆ›å»ºç”¨æˆ·æ¶ˆæ¯</span>
        <span class="hljs-type">Msg</span> <span class="hljs-variable">userMsg</span> <span class="hljs-operator">=</span> Msg.builder()
            .role(MsgRole.USER)
            .name(userId)
            .textContent(userInput)
            .metadata(Map.of(
                <span class="hljs-string">"user_id"</span>, userId,
                <span class="hljs-string">"timestamp"</span>, System.currentTimeMillis()
            ))
            .build();
        
        <span class="hljs-comment">// 2. è®°å½•åˆ°å†å²</span>
        messageHistory.add(userMsg);
        
        <span class="hljs-comment">// 3. Agentå¤„ç†ï¼ˆAgentå†…éƒ¨ä¼šä½¿ç”¨Memoryç»´æŠ¤ä¸Šä¸‹æ–‡ï¼‰</span>
        <span class="hljs-type">Msg</span> <span class="hljs-variable">agentResponse</span> <span class="hljs-operator">=</span> agent.call(userMsg).block();
        
        <span class="hljs-comment">// 4. è®°å½•Agentå“åº”</span>
        messageHistory.add(agentResponse);
        
        <span class="hljs-comment">// 5. è®¡ç®—æˆæœ¬ï¼ˆå¦‚æœæœ‰Tokenä½¿ç”¨ä¿¡æ¯ï¼‰</span>
        <span class="hljs-keyword">if</span> (agentResponse.getChatUsage() != <span class="hljs-literal">null</span>) {
            <span class="hljs-type">double</span> <span class="hljs-variable">cost</span> <span class="hljs-operator">=</span> calculateCost(agentResponse.getChatUsage());
            System.out.printf(<span class="hljs-string">"Total cost: Â¥%.4f\n"</span>, cost);
        }
        
        <span class="hljs-keyword">return</span> agentResponse;
    }
    
    <span class="hljs-comment">/**
     * è·å–ä¼šè¯å†å²çš„æ‘˜è¦ï¼ˆç”¨äºå±•ç¤ºï¼‰
     */</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getSummary</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> messageHistory.stream()
            .map(msg -&gt; String.format(<span class="hljs-string">"[%s] %s: %s"</span>,
                msg.getRole(),
                msg.getName() != <span class="hljs-literal">null</span> ? msg.getName() : <span class="hljs-string">"unknown"</span>,
                msg.getTextContent()))
            .collect(Collectors.joining(<span class="hljs-string">"\n"</span>));
    }
    
    <span class="hljs-comment">/**
     * æ¸…ç©ºä¼šè¯ï¼ˆå¼€å§‹æ–°å¯¹è¯ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clearHistory</span><span class="hljs-params">()</span> {
        messageHistory.clear();
        conversationMemory.clear();
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> <span class="hljs-title function_">calculateCost</span><span class="hljs-params">(ChatUsage usage)</span> {
        <span class="hljs-comment">// DashScopeå®šä»·ï¼šè¾“å…¥0.0001å…ƒ/åƒtokenï¼Œè¾“å‡º0.0002å…ƒ/åƒtoken</span>
        <span class="hljs-keyword">return</span> (usage.getInputTokens() * <span class="hljs-number">0.0001</span> + 
                usage.getOutputTokens() * <span class="hljs-number">0.0002</span>) / <span class="hljs-number">1000</span>;
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
    <span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
        .name(<span class="hljs-string">"Assistant"</span>)
        .sysPrompt(<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰å¸®åŠ©çš„åŠ©æ‰‹"</span>)
        .model(model)
        .build();
    
    <span class="hljs-type">ConversationManager</span> <span class="hljs-variable">conv</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConversationManager</span>(agent);
    
    <span class="hljs-comment">// ç¬¬1è½®</span>
    <span class="hljs-type">Msg</span> <span class="hljs-variable">response1</span> <span class="hljs-operator">=</span> conv.handleUserInput(<span class="hljs-string">"user_001"</span>, <span class="hljs-string">"Pythonå’ŒJavaçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"</span>);
    System.out.println(<span class="hljs-string">"Assistant: "</span> + response1.getTextContent());
    
    <span class="hljs-comment">// ç¬¬2è½®ï¼ˆAgentçŸ¥é“å‰é¢è®¨è®ºè¿‡Pythonï¼‰</span>
    <span class="hljs-type">Msg</span> <span class="hljs-variable">response2</span> <span class="hljs-operator">=</span> conv.handleUserInput(<span class="hljs-string">"user_001"</span>, <span class="hljs-string">"é‚£Pythonæœ€é€‚åˆç”¨åœ¨å“ªäº›é¢†åŸŸï¼Ÿ"</span>);
    System.out.println(<span class="hljs-string">"Assistant: "</span> + response2.getTextContent());
    
    <span class="hljs-comment">// æ˜¾ç¤ºå¯¹è¯å†å²</span>
    System.out.println(<span class="hljs-string">"\n=== Conversation Summary ==="</span>);
    System.out.println(conv.getSummary());
}
</code></pre>
<h3 data-id="heading-49">2.6.2 æ¶ˆæ¯æŒä¹…åŒ–</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MessagePersistence</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MongoTemplate mongoTemplate;  <span class="hljs-comment">// MongoDBæ•°æ®åº“</span>
    
    <span class="hljs-comment">/**
     * ä¿å­˜æ¶ˆæ¯åˆ°æ•°æ®åº“
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveMessage</span><span class="hljs-params">(String conversationId, Msg msg)</span> {
        <span class="hljs-type">Document</span> <span class="hljs-variable">doc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Document</span>()
            .append(<span class="hljs-string">"conversation_id"</span>, conversationId)
            .append(<span class="hljs-string">"message_id"</span>, msg.getId())
            .append(<span class="hljs-string">"role"</span>, msg.getRole().toString())
            .append(<span class="hljs-string">"name"</span>, msg.getName())
            .append(<span class="hljs-string">"timestamp"</span>, msg.getTimestamp())
            .append(<span class="hljs-string">"content_text"</span>, msg.getTextContent())
            .append(<span class="hljs-string">"metadata"</span>, msg.getMetadata())
            .append(<span class="hljs-string">"saved_at"</span>, Instant.now());
        
        mongoTemplate.insert(doc, <span class="hljs-string">"messages"</span>);
    }
    
    <span class="hljs-comment">/**
     * åŠ è½½å¯¹è¯å†å²
     */</span>
    <span class="hljs-keyword">public</span> List&lt;Msg&gt; <span class="hljs-title function_">loadConversation</span><span class="hljs-params">(String conversationId)</span> {
        List&lt;Document&gt; docs = mongoTemplate.find(
            Query.query(Criteria.where(<span class="hljs-string">"conversation_id"</span>).is(conversationId)),
            Document.class,
            <span class="hljs-string">"messages"</span>
        );
        
        <span class="hljs-keyword">return</span> docs.stream()
            .map(<span class="hljs-built_in">this</span>::documentToMsg)
            .collect(Collectors.toList());
    }
    
    <span class="hljs-keyword">private</span> Msg <span class="hljs-title function_">documentToMsg</span><span class="hljs-params">(Document doc)</span> {
        <span class="hljs-keyword">return</span> Msg.builder()
            .id((String) doc.get(<span class="hljs-string">"message_id"</span>))
            .name((String) doc.get(<span class="hljs-string">"name"</span>))
            .role(MsgRole.valueOf((String) doc.get(<span class="hljs-string">"role"</span>)))
            .textContent((String) doc.get(<span class="hljs-string">"content_text"</span>))
            .timestamp((String) doc.get(<span class="hljs-string">"timestamp"</span>))
            .metadata((Map&lt;String, Object&gt;) doc.get(<span class="hljs-string">"metadata"</span>))
            .build();
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-50">æ€»ç»“</h2>
<h3 data-id="heading-51">æ ¸å¿ƒæ¦‚å¿µå›é¡¾</h3>





























<table><thead><tr><th>æ¦‚å¿µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>Msg</strong></td><td>ä¸å¯å˜çš„æ¶ˆæ¯å¯¹è±¡ï¼Œæ˜¯Agenté—´é€šä¿¡çš„åŸºæœ¬å•ä½</td></tr><tr><td><strong>MsgRole</strong></td><td>æ¶ˆæ¯çš„å››ç§è§’è‰²ï¼ˆUSERã€ASSISTANTã€SYSTEMã€TOOLï¼‰</td></tr><tr><td><strong>ContentBlock</strong></td><td>æ”¯æŒå¤šç§å†…å®¹ç±»å‹çš„å†…å®¹å—ç³»ç»Ÿï¼ˆæ–‡æœ¬ã€å›¾åƒã€éŸ³è§†é¢‘ç­‰ï¼‰</td></tr><tr><td><strong>Metadata</strong></td><td>æ¶ˆæ¯çš„å…ƒæ•°æ®ï¼Œç”¨äºå­˜å‚¨ç»“æ„åŒ–æ•°æ®å’Œæ‰©å±•ä¿¡æ¯</td></tr><tr><td><strong>åºåˆ—åŒ–</strong></td><td>JSONåºåˆ—åŒ–æ”¯æŒç½‘ç»œä¼ è¾“å’ŒæŒä¹…åŒ–</td></tr></tbody></table>
<hr/>
<p>åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨<strong>æ¨¡å‹æ¥å£ï¼ˆModelï¼‰ä¸é€‚é…å™¨æ¨¡å¼</strong>ï¼Œäº†è§£å¦‚ä½•åœ¨AgentScopeä¸­æ— ç¼ä½¿ç”¨ä¸åŒçš„LLMã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£æ„uv ï¼šä»ä½¿ç”¨åˆ°è·¨å¹³å°ä¾èµ–è§£æã€æ–‡ä»¶é”æœºåˆ¶ä¸ Monorepo æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7589246131586039843</link>    <guid>https://juejin.cn/post/7589246131586039843</guid>    <pubDate>2025-12-30T05:40:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589246131586039843" data-draft-id="7589275237037506595" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£æ„uv ï¼šä»ä½¿ç”¨åˆ°è·¨å¹³å°ä¾èµ–è§£æã€æ–‡ä»¶é”æœºåˆ¶ä¸ Monorepo æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-30T05:40:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="doublegod"/> <meta itemprop="url" content="https://juejin.cn/user/2807487860332816"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£æ„uv ï¼šä»ä½¿ç”¨åˆ°è·¨å¹³å°ä¾èµ–è§£æã€æ–‡ä»¶é”æœºåˆ¶ä¸ Monorepo æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2807487860332816/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    doublegod
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T05:40:34.000Z" title="Tue Dec 30 2025 05:40:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="github">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>åœ¨ä»‹ç»uvçš„ç”¨æ³•åŠåº•å±‚åŸç†ä¹‹å‰ï¼Œæˆ‘æƒ³å…ˆè¯´è¯´ï¼Œuvçš„å­˜åœ¨æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Œä»–è§£å†³äº†pythonçš„å“ªäº›ç—›ç‚¹ï¼Œä»¥è‡³äºæˆ‘ä»¬ç°åœ¨æåˆ°Pythonçš„é¡¹ç›®ä¸å·¥å…·é“¾ç®¡ç†å™¨ï¼Œå°±ç»•ä¸å¼€å®ƒã€‚<br/>
ç°åœ¨å‡å®šï¼Œä½ é‡ç”Ÿäº†ï¼Œé‡ç”Ÿåˆ°ä¸€ä¸ªæ²¡æœ‰uvçš„ä¸–ç•Œï¼Œä½ å°†é¢å¯¹ï¼š</p>
<ul>
<li>
<p>1.ç ´ç¢åŒ–çš„<strong>å·¥å…·é“¾</strong>ï¼š</p>
<ul>
<li>å®‰è£…pythonç‰ˆæœ¬ï¼šÂ <code>pyenv</code>æˆ–<code>conda</code>ã€‚</li>
<li>åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼šÂ <code>virtualenv</code>ã€<code>venv</code>ã€<code>conda env</code>ã€‚</li>
<li>å®‰è£…ä¾èµ–åŒ…ï¼šÂ <code>pip</code></li>
<li>é”å®šä¾èµ–ç‰ˆæœ¬ï¼šÂ <code>pip-tools</code>ï¼Œ<code>pip-compile</code>ã€‚</li>
<li>å‘å¸ƒåŒ…ï¼šç”¨Â <code>twine</code>Â å’ŒÂ <code>build</code>ã€‚</li>
<li>å®‰è£…å…¨å±€å‘½ä»¤è¡Œå·¥å…·ï¼šç”¨Â <code>pipx</code>ã€‚<br/>
å°±ç®—æ˜¯æ•´åˆå·¥å…·portryä¹Ÿæœ‰æ²¡èƒ½æ¶µç›–åˆ°pythonç‰ˆæœ¬ç®¡ç†çš„èŒƒç•´ç­‰ç­‰ç¼ºæ†¾ã€‚ä½ ä¸å¾—ä¸é˜…è¯»å¤æ‚çš„æŒ‡å—æ¥ç ”ç©¶è¿™äº›å·¥å…·å¦‚ä½•é…åˆã€‚<br/>
è¿™æ˜¯ä¸€ä¸ªè®²ä¼ ç»Ÿ Python æ‰“åŒ…ä¸åˆ†å‘æµç¨‹æ•™ç¨‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F690046657" target="_blank" title="https://zhuanlan.zhihu.com/p/690046657" ref="nofollow noopener noreferrer">åˆ›å»ºã€ç®¡ç†ä¸åˆ†å‘ä½ çš„Pythoné¡¹ç›®</a>Â æƒ³äº†è§£çš„è¯å¯ä»¥çœ‹çœ‹ã€‚</li>
</ul>
</li>
<li>
<p>2.ç¼“æ…¢çš„<strong>è§£ææ€§èƒ½</strong>ï¼š</p>
<ul>
<li>
<p>ä¼ ç»Ÿ Python å·¥å…·å› ä¸ºè§£é‡Šå™¨è‡ªèº«çš„å¼€é”€ï¼Œéš¾ä»¥åˆ©ç”¨å¤šæ ¸ CPU åŠ é€Ÿå¤æ‚çš„**ä¾èµ–å›æº¯ï¼ˆBacktrackingï¼‰**è®¡ç®—ã€‚è¿™å¯¼è‡´åœ¨å®‰è£…å¦‚ Torch ç­‰å¤§å‹åº“æ—¶ï¼Œè§£æè¿‡ç¨‹è¶…çº§æ…¢ã€‚</p>
</li>
<li>
<p>å°¤å…¶pipä½¿ç”¨çš„æ˜¯å›æº¯ç®—æ³•ï¼Œåœ¨pythonçš„GILé™åˆ¶ä¸‹ï¼Œå•çº¿ç¨‹è§£ææ€§èƒ½å¾ˆå·®ã€‚</p>
</li>
</ul>
<blockquote>
<p>è¿™æ˜¯å…³äºGILçš„ä¸€äº›è§£æ<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F20813097758" target="_blank" title="https://zhuanlan.zhihu.com/p/20813097758" ref="nofollow noopener noreferrer">Python GILï¼ˆå…¨å±€è§£é‡Šå™¨é”ï¼‰æœºåˆ¶å¯¹å¤šçº¿ç¨‹æ€§èƒ½å½±å“çš„æ·±åº¦åˆ†æ</a>Â ï¼Œä¸è¿‡pythonæ–°ç‰ˆæœ¬çš„æ›´æ–°æ­£åœ¨æœæ— GILå‘å±•ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.freex.cc%2Farchives%2FPython-3-14-Free-Threading.html" target="_blank" title="https://www.freex.cc/archives/Python-3-14-Free-Threading.html" ref="nofollow noopener noreferrer">è§£é” Python å¤šçº¿ç¨‹æ–°çºªå…ƒ</a></p>
</blockquote>
</li>
<li>
<p>3.<strong>æ ‡å‡†åŒ–çš„åˆ†è£‚</strong></p>
</li>
<li>
<p>4.<strong>ç¼ºä¹è·¨å¹³å°çš„ä¸€è‡´æ€§</strong>ï¼š</p>
<ul>
<li>æŸäº›åŒ…åœ¨ä¸åŒæ“ä½œç³»ç»Ÿä¸Šä¾èµ–æ ‘ä¸ä¸€æ ·ï¼Œ<code>pip freeze</code>åªèƒ½çœ‹åˆ°å½“å‰ç¯å¢ƒçš„ä¾èµ–ï¼Œæ— æ³•ä¿è¯åœ¨å…¶ä»–å¹³å°ä¸Šé‡ç°ç›¸åŒçš„<strong>ä¾èµ–æ ‘</strong>ã€‚</li>
<li>pythonå…è®¸é€šè¿‡<strong>ç¯å¢ƒæ ‡è®°</strong>æ¥æŒ‰éœ€å®‰è£…ä¾èµ–ï¼Œä¾‹å¦‚ï¼š<code>colorama; sys_platform == 'win32'Â </code>(åªåœ¨ Windows ä¸‹å®‰è£…)ã€‚ç„¶è€Œ<code>pip freeze</code>ä¸ä¼šè®°å½•è¿™äº›æ¡ä»¶ä¾èµ–ï¼Œå¯¼è‡´åœ¨ä¸åŒå¹³å°ä¸Šå®‰è£…æ—¶å¯èƒ½ç¼ºå°‘å¿…è¦çš„åŒ…ã€‚</li>
<li>ç¼ºä¹é”æ–‡ä»¶ï¼Œgoæœ‰go.sumã€‚node.jsæœ‰package-lock.json/yarn/lockã€‚pythonä½ å‘¢ï¼<br/>
requirements.txtåªæ˜¯å½“å‰ç¯å¢ƒçš„ä¾èµ–å¿«ç…§ï¼Œå¹¶ä¸å±äºå…¨å¹³å°è§£æçš„ç»“æœã€‚å…³äºlockfileå¯ä»¥å‚è€ƒÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgavv.net%2Farticles%2Ffile-locks%2F" target="_blank" title="https://gavv.net/articles/file-locks/" ref="nofollow noopener noreferrer">File locking in Linux</a>Â ,Linuxå†…æ ¸ç°åœ¨ä¸»è¦æ”¯æŒçš„æ˜¯<strong>å»ºè®®æ€§é” (Advisory Locking)</strong> ï¼Œæ–‡æ¡£é‡Œçš„<strong>Mandatory Locking</strong>å·²ç»å¯„äº†ã€‚æœ¬è´¨ä¸ŠpythonåŠ çš„é”æ˜¯åœ¨"é¥æ§"linuxç³»ç»Ÿåº•å±‚æ–‡ä»¶é”åŠŸèƒ½ï¼Œå¦‚ä½•ç»™pythonå®ç°åŠ é”ï¼Ÿ<a href="https://link.juejin.cn?target=https%3A%2F%2Fcomate.baidu.com%2Fzh%2Fpage%2Fg1htjf7u8qi" target="_blank" title="https://comate.baidu.com/zh/page/g1htjf7u8qi" ref="nofollow noopener noreferrer">Pythonæ–‡ä»¶é”å®ç°ä¸è·¨å¹³å°ä¼˜åŒ–æ–¹æ¡ˆ</a></li>
</ul>
</li>
</ul>
<h2 data-id="heading-1">how to uv</h2>
<p>å“å“­äº†å§ï¼æ²¡å…³ç³»ï¼ä½ çš„å¼ºæ¥äº†ï¼<br/>
uv ç»§æ‰¿äº† Rye çš„â€œå…¨æ ˆå·¥å…·é“¾â€æ„¿æ™¯ï¼Œå¹¶åœ¨åº•å±‚å®ç°äº†æ›´é«˜çš„æ€§èƒ½ã€‚</p>
<blockquote>
<p><code>uvï¼ˆunified versionï¼‰</code>Â ä¸ä»…ä»…æ˜¯æ›´å¿«çš„Â <code>pip</code>ã€‚å®ƒæ˜¯ Python ç”Ÿæ€çš„Â <strong>Cargo (Rust)</strong> Â â€”â€” ä¸€ä¸ªç»Ÿä¸€äº† Python ç‰ˆæœ¬ç®¡ç†ã€è™šæ‹Ÿç¯å¢ƒã€ä¾èµ–è§£æã€é¡¹ç›®æ„å»ºä¸å‘å¸ƒçš„<strong>å…¨é“¾è·¯å·¥å…·é“¾</strong>ã€‚</p>
</blockquote>
<p>è¯¦ç»†ä½¿ç”¨å¯ä»¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.astral.sh%2Fuv%2F" target="_blank" title="https://docs.astral.sh/uv/" ref="nofollow noopener noreferrer">docs.astral.sh/uv/</a></p>
<h3 data-id="heading-2">1. å®‰è£…ä¸é…ç½®</h3>
<p>æ¨èä½¿ç”¨å®˜æ–¹è„šæœ¬å®‰è£…ï¼ˆä¸ç³»ç»Ÿ Python è§£è€¦ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># macOS / Linux</span>
curl -LsSf https://astral.sh/uv/install.sh | sh

<span class="hljs-comment"># Windows (PowerShell)</span>
powershell -ExecutionPolicy ByPass -c <span class="hljs-string">"irm https://astral.sh/uv/install.ps1 | iex"</span>
</code></pre>
<p><strong>é…ç½®è‡ªåŠ¨è¡¥å…¨</strong><br/>
èƒ½å¾ˆå¤§æå‡ CLI ä½“éªŒã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Zsh</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">'eval "$(uv generate-shell-completion zsh)"'</span> &gt;&gt; ~/.zshrc
<span class="hljs-built_in">source</span> ~/.zshrc
<span class="hljs-comment"># bash</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">'eval "$(uv generate-shell-completion bash)"'</span> &gt;&gt; ~/.bashrc
<span class="hljs-built_in">source</span> ~/.bashrc
<span class="hljs-comment"># powershell</span>
<span class="hljs-keyword">if</span> (!(Test-Path -Path <span class="hljs-variable">$PROFILE</span>)) {
  New-Item -ItemType File -Path <span class="hljs-variable">$PROFILE</span> -Force
}
uv generate-shell-completion powershell | Out-File -Append -Encoding utf8 <span class="hljs-variable">$PROFILE</span>
</code></pre>
<hr/>
<h3 data-id="heading-3">2. æ ¸å¿ƒå·¥ä½œæµ (The Core Workflow)</h3>
<p>uv é»˜è®¤ä¼šé…ç½® Hatchling å½“æ„å»ºåç«¯,é…ç½®æ ‡å‡†ä¸ºPEP 621 (pyproject.toml),æ ¸å¿ƒå¼•æ“ä½¿ç”¨çš„æ˜¯Rustç¼–å†™çš„é«˜æ€§èƒ½è§£æå™¨ä¹Ÿå°±æ˜¯uvæœ¬èº«ã€‚</p>
<h4 data-id="heading-4">2.1 åˆå§‹åŒ–é¡¹ç›®</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># åˆå§‹åŒ–æ ‡å‡†é¡¹ç›®ç»“æ„</span>
uv <span class="hljs-keyword">init</span> my-project
</code></pre>
<p>è¿™ä¼šç”ŸæˆÂ <code>pyproject.toml</code>ã€<code>.python-version</code>Â å’ŒÂ <code>uv.lock</code>ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰ã€‚</p>
<h4 data-id="heading-5">2.2 é”å®š Python ç‰ˆæœ¬ (æ›¿ä»£ pyenv)</h4>
<p>ä¸ä¾èµ–ç³»ç»Ÿ Pythonï¼Œä¸ºé¡¹ç›®é”å®šç‰¹å®šç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs">uv python pin 3.12
</code></pre>
<p>*é»˜è®¤ä¸‹ï¼ŒÂ <code>uv</code>Â ä¼šè‡ªåŠ¨ä¸‹è½½ä¸€ä¸ªç‹¬ç«‹çš„ Python 3.12 è§£é‡Šå™¨ç¼“å­˜åœ¨ç³»ç»Ÿçº§çš„åº”ç”¨æ•°æ®ç›®å½•ï¼ˆAppData æˆ– .local/shareï¼‰ä¸‹çš„ python å­ç›®å½•ä¸­ï¼Œä½¿ç”¨ ç¬¦å·é“¾æ¥ (Symlink) æˆ– ç¡¬é“¾æ¥ï¼Œè®©è™šæ‹Ÿç¯å¢ƒæŒ‡å‘è¿™ä¸ªå…¨å±€ç›®å½•ã€‚</p>
<p><strong>å¸¸ç”¨ç®¡ç†å‘½ä»¤</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">uv python install 3.11  <span class="hljs-comment"># æ‰‹åŠ¨ä¸‹è½½ç‰¹å®šç‰ˆæœ¬</span>
uv python list          <span class="hljs-comment"># æŸ¥çœ‹æœ¬æœºå·²å®‰è£…çš„æ‰€æœ‰ Python ç‰ˆæœ¬</span>
uv python uninstall 3.8 <span class="hljs-comment"># å¸è½½ä¸éœ€è¦çš„ç‰ˆæœ¬</span>
</code></pre>
<h4 data-id="heading-6">2.3 æ·»åŠ ä¾èµ– (æ›¿ä»£ pip/poetry)</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># æ·»åŠ è¿è¡Œæ—¶ä¾èµ– (è‡ªåŠ¨æ›´æ–° pyproject.toml å’Œ uv.lock)</span>
uv <span class="hljs-keyword">add</span> fastapi httpx
<span class="hljs-meta"># æ·»åŠ å¼€å‘ä¾èµ–</span>
uv <span class="hljs-keyword">add</span> --<span class="hljs-keyword">group</span> dev pytest ruff
<span class="hljs-meta"># ç§»é™¤ä¾èµ–</span>
uv <span class="hljs-keyword">remove</span> httpx
<span class="hljs-meta"># éƒ¨ç½²ä¸Šçº¿çš„æ—¶å€™ç”¨è¿™ä¸ªå‘Šè¯‰uvä¸è¦å®‰è£…å¼€å‘ä¾èµ–ã€‚</span>
uv sync --no-dev
</code></pre>
<h4 data-id="heading-7">2.4 è¿è¡Œä¸æ‰§è¡Œ</h4>
<p>æ— éœ€æ‰‹åŠ¨æ¿€æ´»ç¯å¢ƒï¼ä½¿ç”¨Â <code>uv run</code>ï¼Œå®ƒä¼šè‡ªåŠ¨åœ¨æ­£ç¡®çš„ç¯å¢ƒä¸­æ‰§è¡Œå‘½ä»¤ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># è¿è¡Œè„šæœ¬ï¼Œè‡ªåŠ¨åˆ›å»ºä¸´æ—¶ç¯å¢ƒå¹¶å®‰è£…ä¾èµ–</span>
uv run main.py
<span class="hljs-meta"># å‘è„šæœ¬æ·»åŠ ä¾èµ–å£°æ˜ï¼Œè‡ªåŠ¨ä¿®æ”¹è„šæœ¬å¤´éƒ¨æ³¨é‡Š</span>
uv <span class="hljs-keyword">add</span> --script example.py requests
<span class="hljs-meta"># è¿è¡Œæ¨¡å—</span>
uv run python -m http.server
<span class="hljs-meta"># è¿è¡Œä¾èµ–ä¸­çš„å·¥å…·</span>
uv run pytest
</code></pre>
<h4 data-id="heading-8">2.5 åŒæ­¥ç¯å¢ƒ (The Sync)</h4>
<p>å½“ä» Git æ‹‰å–ä»£ç åï¼Œæˆ–è€…æ‰‹åŠ¨ä¿®æ”¹äº†Â <code>pyproject.toml</code>Â åï¼Œä½¿ç”¨è¿™ä¸ªå‘½ä»¤ç¡®ä¿ç¯å¢ƒä¸å£°æ˜ä¸€è‡´ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">uv <span class="hljs-built_in">sync</span>
</code></pre>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šå®ƒä¼šå®‰è£…ç¼ºå¤±çš„åŒ…ï¼Œå¸è½½å¤šä½™çš„åŒ…ï¼Œç¡®ä¿Â <code>.venv</code>Â ä¸¥æ ¼ç­‰äºÂ <code>uv.lock</code>ã€‚ç±»ä¼¼äºä¸€ä¸ª<code>go mod tidy</code>plusç‰ˆï¼Œè¿˜æ‰§è¡Œ.venvçš„æ•´ç†ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-9">2.6 å…¨å±€å·¥å…·ç®¡ç†</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸´æ—¶è¿è¡Œå·¥å…· (ç”¨å®Œå°±æ‰”)</span>
uvx / uv tool run

uv tool uninstall &lt;tool-name&gt;
uv tool install &lt;tool-name&gt;

<span class="hljs-comment"># æ°¸ä¹…å®‰è£…å·¥å…·</span>
uv tool install black
<span class="hljs-comment"># åˆ—å‡ºå·²å®‰è£…å·¥å…·</span>
uv tool list
<span class="hljs-comment"># å‡çº§ Shell é…ç½® (ç¡®ä¿å·¥å…·åœ¨ PATH ä¸­)</span>
uv tool update-shell
</code></pre>
<hr/>
<h3 data-id="heading-10">3. ä¸€äº›ç‰¹å®šä¾èµ–åœºæ™¯</h3>
<h4 data-id="heading-11">3.1 PyTorch æœ€ä½³å®è·µ (CPU/CUDA åˆ†ç¦»)</h4>
<blockquote>
<p>æˆ‘ä»¬éƒ½çŸ¥é“pytorchæœ‰ä¸¤ç§ç‰ˆæœ¬ï¼Œcpuç‰ˆè™½ç„¶é€šç”¨æ€§å¼ºä½†æ˜¯æ€§èƒ½æœ‰é™ï¼Œcudaç‰ˆå°†è¿ç®—äº¤ç»™gpuï¼Œæ€§èƒ½æå‡ä½†æ˜¯æ–‡ä»¶ä½“ç§¯å·¨å¤§ï¼Œå¦‚æœä»€ä¹ˆéƒ½ä¸é…ç½®çš„è¯ï¼Œmacå’Œwindowsç”¨æˆ·ä¼šé»˜è®¤ä¸‹è½½cpuç‰ˆæœ¬ï¼Œlinuxä¼šé»˜è®¤ä¸‹è½½cudaç‰ˆæœ¬ï¼Œä½†æ˜¯ä¸€æ—¦ä½ æœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œä½ å°±éœ€è¦æ‰‹åŠ¨æŒ‡å®šï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šç”¨åˆ°æ‰‹åŠ¨é…ç½®pytorchç´¢å¼•å’Œç¯å¢ƒæ ‡è®°ã€‚<br/>
åˆ©ç”¨Â <code>marker</code>Â å’ŒÂ <code>explicit</code>Â æ ‡å¿—ï¼Œå°±å¯ä»¥å®ç°ç²¾å‡†æ§åˆ¶ä¸åŒå¹³å°çš„ Torch ç‰ˆæœ¬ä¸‹è½½ã€‚</p>
</blockquote>
<h5 data-id="heading-12"><strong>å¦‚ä½•ä½¿ç”¨pytorchç´¢å¼•</strong>ï¼š</h5>
<p>æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½å¸Œæœ›å…¨å¹³å°ä½¿ç”¨torch cpuç‰ˆæœ¬ï¼Œè¿™ä¸ªæ—¶å€™ç¬¬ä¸€æ­¥ï¼Œå…ˆæŠŠpytorchç´¢å¼•æ·»åŠ åˆ°pyproject.tomlä¸­ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">   <span class="hljs-comment"># CPU-only (ä»…é™ CPU)</span>
   <span class="hljs-section">[[tool.uv.index]]</span>
   <span class="hljs-attr">name</span> = <span class="hljs-string">"pytorch-cpu"</span>
   <span class="hljs-attr">url</span> = <span class="hljs-string">"https://download.pytorch.org/whl/cpu"</span>
   <span class="hljs-attr">explicit</span> = <span class="hljs-literal">true</span>
</code></pre>
<p>ä½¿ç”¨Â <code>explicit = true</code>ï¼Œå¯ä»¥ç¡®ä¿è¯¥ç´¢å¼•ä»…ç”¨äº torchã€torchvision å’Œå…¶ä»– PyTorch ç›¸å…³åŒ…ï¼Œè€Œä¸æ˜¯ç”¨äºåƒ jinja2 è¿™æ ·çš„é€šç”¨ä¾èµ–é¡¹ï¼Œåè€…åº”ç»§ç»­ä»é»˜è®¤ç´¢å¼• (PyPI) è·å–ã€‚<br/>
ç¬¬äºŒæ­¥ï¼Œåœ¨Â <code>pyproject.toml</code>Â ä¸­ä¸º torch å’Œ torchvision æŒ‡å®šç´¢å¼•æºï¼š</p>
<pre><code class="hljs language-ini" lang="ini">    <span class="hljs-section">[tool.uv.sources]</span>
    <span class="hljs-attr">torch</span> = [
      { index = <span class="hljs-string">"pytorch-cpu"</span> },
    ]
    <span class="hljs-attr">torchvision</span> = [
    { index = <span class="hljs-string">"pytorch-cpu"</span> },
   ]
</code></pre>
<p>ç„¶åå®ƒå°±å˜æˆä¸€ä¸ªåœ¨å…¨å¹³å°ä½¿ç”¨cpuç‰ˆæœ¬çš„pytorchå•¦ï¼</p>
<h5 data-id="heading-13">ä½¿ç”¨ç¯å¢ƒæ ‡è®°é…ç½®åŠ é€Ÿå™¨ (Configuring accelerators with environment markers)</h5>
<p>pytorchç´¢å¼•æœ‰ä¸€ä¸ªé—®é¢˜ï¼šä»–æ˜¯ä¸€åˆ€åˆ‡çš„ï¼Œå¦‚æœç´¢å¼•ç”¨çš„æ˜¯cudaç‰ˆæœ¬ï¼Œé‚£ä¹ˆmacç”¨æˆ·ä¸æ˜¯ç‚¸äº†ï¼Ÿ<br/>
å› æ­¤å®é™…ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸<strong>ç»“åˆpytorchç´¢å¼•</strong>å’Œ<strong>ç¯å¢ƒæ ‡è®°</strong>æ¥å®ç°è·¨å¹³å°çš„CPU/CUDAç‰ˆæœ¬æ§åˆ¶ã€‚è¿™æ ·å°±å¯ä»¥å‡†ç¡®æ§åˆ¶ä¸åŒæ“ä½œç³»ç»Ÿä¸‹çš„ä¸åŒpytorchç‰ˆæœ¬ã€‚<br/>
ä»¥ä¸‹å°±å¯ä»¥æ§åˆ¶windowså’Œmacç”¨æˆ·å®‰è£…cpuç‰ˆæœ¬ï¼Œlinuxç”¨æˆ·å®‰è£…cudaç‰ˆæœ¬ï¼Œå…¶å®å°±ç›¸å½“äºif linux then cuda else cpuè¿™ç§é€»è¾‘ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[project]</span>
<span class="hljs-attr">name</span> = <span class="hljs-string">"project"</span>
<span class="hljs-attr">version</span> = <span class="hljs-string">"0.1.0"</span>
<span class="hljs-attr">requires-python</span> = <span class="hljs-string">"&gt;=3.14.0"</span>
<span class="hljs-attr">dependencies</span> = [
  <span class="hljs-string">"torch&gt;=2.9.1"</span>,
  <span class="hljs-string">"torchvision&gt;=0.24.1"</span>,
]

<span class="hljs-section">[tool.uv.sources]</span>
<span class="hljs-attr">torch</span> = [
  { index = <span class="hljs-string">"pytorch-cpu"</span>, marker = <span class="hljs-string">"sys_platform != 'linux'"</span> },
  { index = <span class="hljs-string">"pytorch-cu128"</span>, marker = <span class="hljs-string">"sys_platform == 'linux'"</span> },
]
<span class="hljs-attr">torchvision</span> = [
  { index = <span class="hljs-string">"pytorch-cpu"</span>, marker = <span class="hljs-string">"sys_platform != 'linux'"</span> },
  { index = <span class="hljs-string">"pytorch-cu128"</span>, marker = <span class="hljs-string">"sys_platform == 'linux'"</span> },
]

<span class="hljs-section">[[tool.uv.index]]</span>
<span class="hljs-attr">name</span> = <span class="hljs-string">"pytorch-cpu"</span>
<span class="hljs-attr">url</span> = <span class="hljs-string">"https://download.pytorch.org/whl/cpu"</span>
<span class="hljs-attr">explicit</span> = <span class="hljs-literal">true</span>

<span class="hljs-section">[[tool.uv.index]]</span>
<span class="hljs-attr">name</span> = <span class="hljs-string">"pytorch-cu128"</span>
<span class="hljs-attr">url</span> = <span class="hljs-string">"https://download.pytorch.org/whl/cu128"</span>
<span class="hljs-attr">explicit</span> = <span class="hljs-literal">true</span>
</code></pre>
<h5 data-id="heading-14">uv pipæ¥å£</h5>
<blockquote>
<p>é€šå¸¸æƒ…å†µä¸‹çš„é¦–é€‰æ˜¯<code>uv init/add sync</code>ï¼Œä½†æ˜¯æœ‰äº›åœºæ™¯ï¼šä¾‹å¦‚ä½ ä¸çŸ¥é“ç›®æ ‡æœºå™¨æœ‰æ²¡æœ‰æ˜¾å¡ï¼Œæˆ–è€…éœ€è¦å…¼å®¹æ—§æœ‰çš„ requirements.txt æµç¨‹æ—¶ï¼Œæ‰ä½¿ç”¨ uv pipã€‚</p>
</blockquote>
<p>ä»–çš„ç‰¹æ€§æ˜¯<strong>è‡ªåŠ¨åç«¯é€‰æ‹© (Automatic backend selection)</strong><br/>
uv æ”¯æŒé€šè¿‡Â <code>--torch-backend=autoÂ </code>å‘½ä»¤è¡Œå‚æ•°ï¼ˆæˆ–Â <code>UV_TORCH_BACKEND=auto</code>Â ç¯å¢ƒå˜é‡ï¼‰è‡ªåŠ¨é€‰æ‹©é€‚å½“çš„ PyTorch ç´¢å¼•ï¼Œå¦‚ï¼š<code>$ uv pip install torch --torch-backend=auto</code><br/>
å¯ç”¨åï¼Œuv å°†æŸ¥è¯¢å·²å®‰è£…çš„ CUDA é©±åŠ¨ç¨‹åºã€AMD GPU ç‰ˆæœ¬å’Œ Intel GPU çš„å­˜åœ¨ï¼Œç„¶åä¸ºæ‰€æœ‰ç›¸å…³åŒ…ï¼ˆä¾‹å¦‚ torchã€torchvision ç­‰ï¼‰ä½¿ç”¨æœ€å…¼å®¹çš„ PyTorch ç´¢å¼•ã€‚å¦‚æœæœªæ‰¾åˆ°æ­¤ç±» GPUï¼Œuv å°†å›é€€åˆ°ä»… CPU ç´¢å¼•ã€‚uv å°†ç»§ç»­éµå®ˆ PyTorch ç”Ÿæ€ç³»ç»Ÿä¹‹å¤–ä»»ä½•åŒ…çš„ç°æœ‰ç´¢å¼•é…ç½®ã€‚<br/>
ä¹Ÿå¯ä»¥ä½¿ç”¨Â <code>--torch-backend=cu126</code>ï¼ˆæˆ–Â <code>UV_TORCH_BACKEND=cu126</code>Â ç¯å¢ƒå˜é‡ï¼‰é€‰æ‹©ç‰¹å®šçš„åç«¯ï¼ˆä¾‹å¦‚ CUDA 12.8ï¼‰ã€‚<br/>
ç›®å‰ï¼Œ<code>--torch-backend</code>Â ä»…åœ¨ uv pip æ¥å£ä¸­å¯ç”¨ã€‚</p>
<p>â­ï¸pay attention:</p>
<ul>
<li>é¡¹ç›®å¼€å‘ä¸­ä½¿ç”¨ uv pip å®‰è£…åŒ…åï¼Œè¦æ‰‹åŠ¨è¡¥å……åŒ…ååˆ° pyproject.tomlã€‚</li>
<li>uv pip ä¸ä¼šæ›´æ–°é”æ–‡ä»¶ (uv.lock)</li>
</ul>
<h4 data-id="heading-15">3.2 é…ç½®ç§æœ‰æº (Private Mirror)</h4>
<p><strong>åŠ é€Ÿç¬¬ä¸‰æ–¹åº“</strong><br/>
åœ¨Â <code>pyproject.toml</code>Â ä¸­é…ç½®ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[[tool.uv.index]]</span>
<span class="hljs-attr">name</span> = <span class="hljs-string">"tsinghua"</span>
<span class="hljs-attr">url</span> = <span class="hljs-string">"https://pypi.tuna.tsinghua.edu.cn/simple"</span>
<span class="hljs-attr">default</span> = <span class="hljs-literal">true</span>  <span class="hljs-comment"># è®¾ä¸ºé»˜è®¤æºï¼Œå¦‚æœä¸ç”¨trueçš„è¯ï¼Œuvä¼šæŠŠè¿™ä¸ªæºå½“æˆå¤‡ç”¨ã€‚</span>
</code></pre>
<p><strong>åŠ é€Ÿpythonè§£é‡Šå™¨ä¸‹è½½</strong><br/>
uvä¼šè‡ªåŠ¨ä»å®˜æ–¹æºä¸‹è½½ï¼Œå¦‚æœé€Ÿåº¦åæ…¢ï¼Œå¯ä»¥é€šè¿‡ç³»ç»Ÿå±‚é¢è®¾ç½®ç¯å¢ƒå˜é‡<br/>
<code>export UV_PYTHON_INSTALL_MIRROR="http://..."</code></p>
<hr/>
<h3 data-id="heading-16">4. Workspaces</h3>
<p>åœ¨ä¸€ä¸ªä»“åº“ä¸­ç®¡ç†å¤šä¸ªç›¸äº’ä¾èµ–çš„åŒ…ï¼ˆå¦‚Â <code>backend</code>,Â <code>library</code>,Â <code>worker</code>ï¼‰ã€‚</p>
<h4 data-id="heading-17">4.1 ä»€ä¹ˆæ—¶å€™ä½¿ç”¨workspaces</h4>
<p>é¦–å…ˆï¼Œåœ¨è¯´å¦‚ä½•ç”¨uvè¿›è¡Œç®¡ç†æ—¶ï¼Œå¾—å…ˆæä¸€å¥Workspaces æ˜¯ä¸ºäº†â€œç»Ÿä¸€â€å’Œâ€œåä½œâ€è®¾è®¡çš„ï¼Œå¦‚æœä½ éœ€è¦â€œéš”ç¦»â€å’Œâ€œå·®å¼‚åŒ–â€å°±ä¸é€‚åˆç”¨ã€‚</p>
<p><strong>ä¸é€‚åˆä½¿ç”¨workspaces</strong>çš„åœºæ™¯ï¼š</p>
<ul>
<li>
<ol>
<li><strong>ä¾èµ–ç‰ˆæœ¬å†²çª</strong>ï¼šä¾‹å¦‚ï¼Œå­é¡¹ç›®Aè¦æ±‚pandas&gt;=2.0ï¼Œå­é¡¹ç›®Bè¦æ±‚pandas&lt;2.0ã€‚ä¸€ä¸ªuv.lockæ— æ³•åŒæ—¶æ»¡è¶³ã€‚</li>
</ol>
</li>
<li>
<ol start="2">
<li><strong>éœ€è¦ç‹¬ç«‹çš„è™šæ‹Ÿç¯å¢ƒ</strong>ï¼šworkspacesåˆ›å»ºçš„æ˜¯ä¸€ä¸ªå·¨å¤§çš„è™šæ‹Ÿç¯å¢ƒï¼Œå¯èƒ½ä¼šäº§ç”Ÿé¡¹ç›®Aæ²¡æœ‰å£°æ˜requestsï¼Œä½†æ˜¯Bä¾èµ–requests,Aç«Ÿç„¶ä¹Ÿèƒ½import requestsçš„æƒ…å†µã€‚</li>
</ol>
</li>
<li>
<ol start="3">
<li><strong>pythonç‰ˆæœ¬ä¸å…¼å®¹</strong>ã€‚</li>
</ol>
</li>
</ul>
<p><strong>è·¯å¾„ä¾èµ– (Path Dependencies)</strong> ï¼š<br/>
å¦‚æœä½ å±äºé‚£ç§ä¸é€‚åˆç”¨workspacesçš„åœºæ™¯ï¼Œä½†æ˜¯åˆæƒ³åœ¨ä¸€ä¸ªä»“åº“ç®¡ç†å¤šä¸ªé¡¹ç›®ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨è·¯å¾„ä¾èµ–ã€‚<br/>
åªéœ€è¦ä¿®æ”¹ä½¿ç”¨è€…çš„Â <code>pyproject.toml</code>ï¼Œå°†ä¾èµ–æŒ‡å‘æœ¬åœ°è·¯å¾„å³å¯ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[project]</span>
<span class="hljs-attr">name</span> = <span class="hljs-string">"my-backend"</span>
<span class="hljs-attr">version</span> = <span class="hljs-string">"0.1.0"</span>
<span class="hljs-attr">requires-python</span> = <span class="hljs-string">"&gt;=3.12"</span>
<span class="hljs-attr">dependencies</span> = [
    <span class="hljs-string">"fastapi"</span>,
    <span class="hljs-string">"my-shared-lib"</span>,
]

<span class="hljs-comment"># editable = trueæ„å‘³ç€å®ƒæ˜¯å¯ç¼–è¾‘æ¨¡å¼å®‰è£…ã€‚åœ¨ shared-lib é‡Œæ”¹äº†ä»£ç ï¼Œbackend ä¸éœ€è¦é‡æ–°å®‰è£…ï¼Œç«‹åˆ»å°±èƒ½ç”Ÿæ•ˆã€‚</span>
<span class="hljs-section">[tool.uv.sources]</span>
<span class="hljs-attr">my-shared-lib</span> = { path = <span class="hljs-string">"../shared-lib"</span>, editable = <span class="hljs-literal">true</span> }
</code></pre>
<h4 data-id="heading-18">4.2 Monorepo vs Polyrepo</h4>
<blockquote>
<p>è¿™ä¿©å±äºä»£ç ä»“åº“å¸¸è§çš„ç‰©ç†æ¶æ„ï¼Œæˆ‘æœ€å¼€å§‹è¯¯ä»¥ä¸ºmonorepoå’Œpolyrepoå±äºworkspacesçš„ä¸åŒç§ç±»å‘¢ï¼Œå®åˆ™ä¸ç„¶å•Šã€‚<br/>
åœ¨ uvï¼ˆä»¥åŠ Rust Cargoã€npmã€Yarnï¼‰çš„è¯­å¢ƒä¸‹ï¼ŒWorkspaces å°±æ˜¯ä¸“é—¨ä¸º Monorepo è®¾è®¡çš„å·¥å…·ç‰¹æ€§ã€‚å®ƒä¸é€‚ç”¨äº Polyrepoã€‚<br/>
è¿™ç¯‡æ–‡ç« å¯¹è¿™ä¿©è¿›è¡Œäº†ä¸€ä¸‹ä»‹ç»ï¼š<a href="https://juejin.cn/post/7102435371127930887" target="_blank" title="https://juejin.cn/post/7102435371127930887">polyrepo -&gt; monorepo</a>ã€‚</p>
</blockquote>
<h4 data-id="heading-19">4.3 å¦‚ä½•ä½¿ç”¨ uv ç®¡ç† Monorepo</h4>
<p>ä½¿ç”¨uvç®¡ç†monorepoï¼Œå…¶å®å°±æ˜¯é€šè¿‡Â <code>pyproject.toml</code>Â å‘Šè¯‰ uvï¼šâ€œä¸è¦å» PyPI ä¸‹è½½è¿™ä¸ªåŒ…ï¼Œå»ç¡¬ç›˜ä¸Šçš„è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œæ‰¾ã€‚â€</p>
<h5 data-id="heading-20">1. ç›®å½•ç»“æ„ç¤ºä¾‹</h5>
<pre><code class="hljs language-scss" lang="scss">repo/
â”œâ”€â”€ pyproject<span class="hljs-selector-class">.toml</span> (æ ¹é…ç½®ï¼šå®šä¹‰ workspace æˆå‘˜)
â”œâ”€â”€ uv<span class="hljs-selector-class">.lock</span>        (æ ¸å¿ƒï¼šå…¨å±€å•ä¸€é”æ–‡ä»¶)
â””â”€â”€ packages/
    â”œâ”€â”€ api/       (å­é¡¹ç›® Aï¼šä¾èµ– common)
    â””â”€â”€ common/    (å­é¡¹ç›® Bï¼šè¢«ä¾èµ–åº“)
</code></pre>
<h5 data-id="heading-21">2. æ ¹ç›®å½•é…ç½® (<code>repo/pyproject.toml</code>)</h5>
<p>è¿™æ˜¯ Workspace çš„â€œæ€»æŒ‡æŒ¥â€ï¼Œè´Ÿè´£åœˆå®šå“ªäº›æ–‡ä»¶å¤¹å±äºè¿™ä¸ªå¤§å®¶åº­ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[project]</span>
<span class="hljs-attr">name</span> = <span class="hljs-string">"my-monorepo-root"</span>
<span class="hljs-attr">requires-python</span> = <span class="hljs-string">"&gt;=3.12"</span>
<span class="hljs-comment"># æ ¹ç›®å½•é€šå¸¸ä¸å†™å…·ä½“ä¸šåŠ¡ä¾èµ–ï¼Œåªä½œä¸ºå®¹å™¨</span>

<span class="hljs-section">[tool.uv.workspace]</span>
<span class="hljs-attr">members</span> = [<span class="hljs-string">"packages/*"</span>]
</code></pre>
<h5 data-id="heading-22">3. å­é¡¹ç›®å¼•ç”¨é…ç½® (<code>packages/api/pyproject.toml</code>)</h5>
<p>è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚å‡è®¾Â <code>api</code>Â éœ€è¦ä½¿ç”¨Â <code>common</code>Â åŒ…ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[project]</span>
<span class="hljs-attr">name</span> = <span class="hljs-string">"api"</span>
<span class="hljs-attr">version</span> = <span class="hljs-string">"0.1.0"</span>
<span class="hljs-attr">dependencies</span> = [
    <span class="hljs-string">"fastapi"</span>,
    <span class="hljs-string">"common"</span>,  <span class="hljs-comment">#  åœ¨è¿™é‡Œç›´æ¥å†™åŒ…åï¼Œä¿æŒæ ‡å‡†å…¼å®¹æ€§</span>
]

<span class="hljs-section">[tool.uv.sources]</span>
<span class="hljs-comment"># é€»è¾‘å¼•ç”¨æ›¿ä»£ç‰©ç†è·¯å¾„</span>
<span class="hljs-attr">common</span> = { workspace = <span class="hljs-literal">true</span> }
</code></pre>
<p><strong><code>{ workspace = true }</code>Â çš„æ ¸å¿ƒä»·å€¼ï¼š</strong></p>
<ol>
<li><strong>é€»è¾‘è§£è€¦</strong>ï¼šä½ ä¸éœ€è¦å†™æ­»Â <code>path = "../common"</code>Â è¿™ç§è„†å¼±çš„ç›¸å¯¹è·¯å¾„ã€‚å³ä½¿ä½ æŠŠÂ <code>common</code>Â æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°åˆ«çš„åœ°æ–¹ï¼Œåªè¦å®ƒè¿˜åœ¨ workspace çš„ members èŒƒå›´å†…ï¼Œ<code>uv</code>Â éƒ½èƒ½è‡ªåŠ¨æ‰¾åˆ°å®ƒã€‚</li>
<li><strong>å®‰å…¨é˜»æ–­</strong>ï¼šå®ƒæ˜¯ä¸€ä¸ªâ€œè·¯ç”±å¼€å…³â€ï¼Œå¼ºåˆ¶Â <code>uv</code>Â åªåœ¨æœ¬åœ° workspace æŸ¥æ‰¾è¯¥åŒ…ï¼Œ<strong>ç»å¯¹ç¦æ­¢</strong>å» PyPI ä¸‹è½½ã€‚è¿™èƒ½æœ‰æ•ˆé˜²æ­¢â€œä¾èµ–æ··æ·†æ”»å‡»â€ï¼ˆå³æœ‰äººåœ¨ PyPI ä¸Šå‘äº†ä¸€ä¸ªåŒåçš„æ¶æ„åŒ…ï¼‰ã€‚</li>
<li><strong>ç‰ˆæœ¬è‡ªåŠ¨åŒæ­¥</strong>ï¼š<code>uv</code>Â ä¼šè‡ªåŠ¨è¯»å–æœ¬åœ°Â <code>common</code>Â é¡¹ç›®çš„ç‰ˆæœ¬å·ï¼Œæ— éœ€æ‰‹åŠ¨ç»´æŠ¤ç‰ˆæœ¬çº¦æŸã€‚</li>
</ol>
<p><strong>æœ€ç»ˆæ•ˆæœ</strong>ï¼š<br/>
æ‰§è¡ŒÂ <code>uv sync</code>Â ä¼šä¸€æ¬¡æ€§è§£ææ‰€æœ‰å­é¡¹ç›®çš„ä¾èµ–ï¼Œä¸”å­é¡¹ç›®ä¹‹é—´çš„å¼•ç”¨ä¼šè‡ªåŠ¨è¯†åˆ«ä¸ºæœ¬åœ°è·¯å¾„ï¼ˆEditable Installï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨æ‰§è¡ŒÂ <code>pip install -e</code>ã€‚</p>
<hr/>
<h3 data-id="heading-23">5. Docker å®¹å™¨åŒ–æœ€ä½³å®è·µ</h3>
<p>å®˜æ–¹æ–‡æ¡£åŸæ–‡ï¼Œè™½ç„¶æˆ‘ä¹Ÿæ˜¯ä»è¿™çœ‹æ¥çš„ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.astral.sh%2Fuv%2Fguides%2Fintegration%2Fdocker%2F%23verifying-image-provenance" target="_blank" title="https://docs.astral.sh/uv/guides/integration/docker/#verifying-image-provenance" ref="nofollow noopener noreferrer">Using uv in Docker</a><br/>
å…³äºdockerï¼Œæ¨èé˜…è¯»<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1983650284468212206" target="_blank" title="https://zhuanlan.zhihu.com/p/1983650284468212206" ref="nofollow noopener noreferrer">ä»dockerä½¿ç”¨åˆ°åº•å±‚åŸç†</a>Â ï¼ˆè‡ªå·±ç»™è‡ªå·±æ‰“å¹¿å‘Šè§è¿‡æ²¡â¸œâ‚à¹‘â€¢âŒ”â€¢à¹‘â‚â¸ ï¼‰</p>
<ul>
<li>
<p>æ¨èä½¿ç”¨Â <code>COPY --fromÂ </code>æ¨¡å¼ä»å®˜æ–¹é•œåƒä¸­æå–äºŒè¿›åˆ¶æ–‡ä»¶ã€‚æ¯”ä½¿ç”¨å®‰è£…è„šæœ¬æ›´å®‰å…¨ã€æ›´å¯æ§ã€‚</p>
</li>
<li>
<p>æ¨è<strong>ç‰ˆæœ¬é”å®š</strong></p>
</li>
<li>
<p>æ¨è<strong>åˆ†å±‚ä¾èµ–</strong>å®‰è£…ä¸é¡¹ç›®ä»£ç ï¼Œå¯ç”¨<strong>æŒ‚è½½ç¼“å­˜</strong>ï¼Œ<strong>ç¼–è¯‘å­—èŠ‚ç </strong>ã€‚</p>
</li>
<li>
<p><strong>æŒ‚è½½å·</strong>ï¼šå¼€å‘æ—¶å°†é¡¹ç›®ç›®å½•æŒ‚è½½åˆ°å®¹å™¨ä¸­ï¼Œä½†å¿…é¡»æ’é™¤è™šæ‹Ÿç¯å¢ƒã€‚<br/>
ä½¿ç”¨åŒ¿åå·æŒ‚è½½Â <code>.venv</code>ï¼Œä¾‹å¦‚ï¼šÂ <code>docker run ... --volume .:/app --volume /app/.venv</code>ã€‚</p>
</li>
<li>
<p><strong>éå¯ç¼–è¾‘æ¨¡å¼ (Non-editable)</strong> ï¼šé»˜è®¤æƒ…å†µä¸‹ uv ä»¥å¯ç¼–è¾‘æ¨¡å¼å®‰è£…é¡¹ç›®ã€‚åœ¨å¤šé˜¶æ®µæ„å»ºä¸­ï¼Œåº”ä½¿ç”¨<code>Â·--no-editable</code>Â æ ‡å¿—ã€‚è¿™å…è®¸ä½ åœ¨ä¸€ä¸ªé˜¶æ®µå®‰è£…ç¯å¢ƒï¼Œç„¶åä»…å°†è™šæ‹Ÿç¯å¢ƒï¼ˆä¸åŒ…å«æºä»£ç ç»‘å®šï¼‰å¤åˆ¶åˆ°æœ€ç»ˆé•œåƒä¸­ã€‚</p>
</li>
<li>
<p><strong>workspaces/Monorepo</strong>Â éœ€è¦ç‰¹æ®Šå¤„ç†ï¼Œåˆå§‹åŒæ­¥ï¼šä½¿ç”¨<code>--frozen</code>ä»£æ›¿Â <code>--locked</code>ã€‚å› ä¸ºåœ¨å¤åˆ¶æ‰€æœ‰å·¥ä½œåŒºæˆå‘˜çš„Â <code>pyproject.tomlÂ </code>ä¹‹å‰ï¼Œ<code>uvÂ </code>æ— æ³•æ–­è¨€é”æ–‡ä»¶æ˜¯æœ€æ–°çš„ã€‚<br/>
æ’é™¤å·¥ä½œåŒºå®‰è£…ï¼šåˆå§‹åŒæ­¥æ—¶ä½¿ç”¨Â <code>--no-install-workspaceÂ </code>æ ‡å¿—ã€‚<br/>
æœ€ç»ˆåŒæ­¥ï¼šå¤åˆ¶æ‰€æœ‰ä»£ç åï¼Œå†ä½¿ç”¨Â <code>--locked</code>Â è¿›è¡Œå®Œæ•´åŒæ­¥ã€‚</p>
<blockquote>
<p>å¯¹æ¯”polyrepoï¼Œç›´æ¥<code>COPY</code>Â -&gt;Â <code>uv sync --locked</code>å³å¯ã€‚</p>
</blockquote>
</li>
</ul>

<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. è·å– uv</span>
FROM python:3.12-slim
COPY --from=ghcr.io/astral-sh/uv:0.9.18 /uv /uvx /bin/

WORKDIR /app

<span class="hljs-comment"># 2. é…ç½®ç¯å¢ƒå˜é‡</span>
ENV UV_COMPILE_BYTECODE=1
ENV UV_LINK_MODE=copy
<span class="hljs-comment"># ç¡®ä¿ä¸å¤åˆ¶æœ¬åœ° venv (éœ€é…åˆ .dockerignore)</span>

<span class="hljs-comment"># 3. å®‰è£…ä¾èµ– (ä¸­é—´å±‚ä¼˜åŒ–)</span>
<span class="hljs-comment"># åˆ©ç”¨ç¼“å­˜æŒ‚è½½å’Œç»‘å®šæŒ‚è½½</span>
RUN --mount=<span class="hljs-built_in">type</span>=cache,target=/root/.cache/uv \
    --mount=<span class="hljs-built_in">type</span>=<span class="hljs-built_in">bind</span>,<span class="hljs-built_in">source</span>=uv.lock,target=uv.lock \
    --mount=<span class="hljs-built_in">type</span>=<span class="hljs-built_in">bind</span>,<span class="hljs-built_in">source</span>=pyproject.toml,target=pyproject.toml \
    uv <span class="hljs-built_in">sync</span> --locked --no-install-project --no-dev

<span class="hljs-comment"># 4. å¤åˆ¶é¡¹ç›®ä»£ç </span>
COPY . /app

<span class="hljs-comment"># 5. å®‰è£…é¡¹ç›®æœ¬èº«ï¼Œç¦ç”¨å¼€å‘ä¾èµ–</span>
RUN --mount=<span class="hljs-built_in">type</span>=cache,target=/root/.cache/uv \
    uv <span class="hljs-built_in">sync</span> --locked --no-dev

<span class="hljs-comment"># 6. è®¾ç½®è·¯å¾„å¹¶è¿è¡Œ</span>
ENV PATH=<span class="hljs-string">"/app/.venv/bin:<span class="hljs-variable">$PATH</span>"</span>
CMD [<span class="hljs-string">"uv"</span>, <span class="hljs-string">"run"</span>, <span class="hljs-string">"my_app"</span>]
</code></pre>
<hr/>
<h3 data-id="heading-24">6. æ„å»ºä¸å‘å¸ƒ (Build &amp; Publish)</h3>
<p>æ›¿ä»£Â <code>build</code>Â å’ŒÂ <code>twine</code>ï¼Œå®ç°ä¸€æ¡é¾™å‘å¸ƒã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ„å»º Wheel å’Œ Source Distribution</span>
uv build
<span class="hljs-comment"># å‘å¸ƒåˆ° PyPI (æ”¯æŒ Trusted Publishing)</span>
uv publish
</code></pre>
<blockquote>
<p>ä»€ä¹ˆæ˜¯<strong>pypl</strong>ï¼Œ<strong>wheel</strong>å’Œ<strong>sdist</strong>å‘¢ï¼Ÿ<br/>
pyplæ˜¯puyhonå®˜æ–¹åŒ…ç®¡ç†ä¸å‘å¸ƒå¹³å°ï¼ŒåƒåŒ…çš„è¶…å¸‚ï¼Œä½ å‘å¸ƒä¸Šå»çš„ä¸œè¥¿å…¶ä»–äººå¯ä»¥é€šè¿‡ä¸€è¡Œå‘½ä»¤å®‰è£…ä½¿ç”¨ã€‚<br/>
wheelå’Œsdistæ˜¯pythonåŒ…çš„ä¸¤ç§åˆ†å‘æ ¼å¼ï¼Œwheelï¼ˆ.whl)æ˜¯ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œå®‰è£…é€Ÿåº¦å¿«ï¼Œsdist(.tar.gz)æ˜¯æºç æ ¼å¼ï¼Œå…¼å®¹æ€§å¥½ã€‚åè€…å®‰è£…æ—¶éœ€è¦è¿›è¡Œç¼–è¯‘ï¼Œå¦‚æœä»£ç é‡Œæœ‰Cè¯­è¨€çš„è¯ï¼Œå°±è¦æ±‚ç”¨æˆ·æœ‰Cè¯­è¨€ç¼–è¯‘å™¨ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-25">7.ç»´æŠ¤ä¸æ’æŸ¥</h3>
<h4 data-id="heading-26">7.1 ç¼“å­˜ç®¡ç†</h4>
<p><code>uv</code>Â çš„ç¼“å­˜æœºåˆ¶ï¼ˆè¯¦è§åç»­æ¨¡å—ï¼‰éå¸¸æ¿€è¿›ï¼Œå®šæœŸæ¸…ç†æœ‰åŠ©äºé‡Šæ”¾ç©ºé—´ã€‚<br/>
<strong>ä»€ä¹ˆæ—¶å€™éœ€è¦æ¸…ç†ç¼“å­˜å‘¢ï¼Ÿ</strong><br/>
å‘ç°ç¡¬ç›˜çº¢äº†ï¼Œç”¨å·¥å…·æ‰«æå‘ç° ~/.cache/uv ç«Ÿç„¶å äº† 10GB+ï¼Œç”¨<code>uv cache prune</code>Â ä¼šåˆ é™¤å¾ˆä¹…æ²¡è¢«å¼•ç”¨çš„åŒ…ã€‚<br/>
<strong>ä»€ä¹ˆæ—¶å€™ç”¨<code>uv cache clean</code>å‘¢ï¼Ÿ</strong><br/>
A. ä¸‹è½½çš„æ–‡ä»¶æŸåã€‚è™½ç„¶uvæœ‰å“ˆå¸Œæ£€éªŒï¼Œä½†æ˜¯æå°‘æ•°ç½‘ç»œä¸ç¨³å®šä¼šå¯¼è‡´ç¼“å­˜.whlæ–‡ä»¶æŸåã€‚<br/>
B. å¼ºåˆ¶æ›´æ–°æœªé”å®šçš„ä¾èµ–ã€‚æœ‰çš„æ—¶å€™å¼€å‘æ–°åº“å¯èƒ½ä¼šå‡ºç°ä½ æ¨äº†æ–°ä»£ç ä½†æ˜¯æ²¡æœ‰æ›´æ–°ç‰ˆæœ¬å·çš„æƒ…å†µï¼Œuvå¯èƒ½ä¼šå› ä¸ºç¼“å­˜ä¸€ç›´å®‰è£…æ—§ä»£ç ã€‚<br/>
C. CI/CD ç¯å¢ƒçš„çº¯å‡€æ„å»ºåœ¨æ„å»º Docker é•œåƒæˆ–æµæ°´çº¿æ—¶ï¼Œä¸ºäº†ç¡®ä¿ç¯å¢ƒç»å¯¹çº¯å‡€ï¼Œä¸å¤ç”¨æ—§ç¼“å­˜ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹ç¼“å­˜ç›®å½•è·¯å¾„</span>
uv cache <span class="hljs-built_in">dir</span>
<span class="hljs-comment"># åˆ é™¤æ‰€æœ‰è¿‡æœŸ/æœªä½¿ç”¨çš„ç¼“å­˜</span>
uv cache prune
<span class="hljs-comment"># æš´åŠ›æ¸…ç©ºæ‰€æœ‰ç¼“å­˜ (ä»…åœ¨è§£å†³é¡½å›ºæŠ¥é”™æ—¶ä½¿ç”¨)</span>
uv cache clean
</code></pre>
<h4 data-id="heading-27">7.2 è·¯å¾„ä¸ç¯å¢ƒæŸ¥è¯¢</h4>
<p>ç¬¬ä¸‰æ–¹å·¥å…·é›†æˆæˆ–è€…ideé…ç½®å¯èƒ½ä¼šç”¨åˆ°ã€‚<br/>
ä¾‹å¦‚æƒ³åœ¨ Docker è¿è¡Œæ—¶æŠŠå®¿ä¸»æœºçš„ç¼“å­˜æŒ‚è½½è¿›å»ï¼Œæ¥åŠ é€Ÿå®¹å™¨å†…çš„æ„å»ºæ—¶ï¼Œä¼šéœ€è¦è¿è¡ŒÂ <code>uv cache dir</code>Â ç¡®è®¤å®¿ä¸»æœºè·¯å¾„ï¼Œç„¶åå†™Â <code>docker run -v $(uv cache dir):/root/.cache/uv</code>ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹ uv ç®¡ç†çš„ Python è§£é‡Šå™¨å®‰è£…ä½ç½®</span>
uv python <span class="hljs-built_in">dir</span>
<span class="hljs-comment"># æŸ¥çœ‹ uv å…¨å±€å·¥å…·çš„å®‰è£…ä½ç½®</span>
uv tool <span class="hljs-built_in">dir</span>
</code></pre>
<h4 data-id="heading-28">7.3 è‡ªèº«ç®¡ç†</h4>
<p>uvè¿­ä»£å¾ˆå¿«çš„ï¼Œå¯ä»¥è€ƒè™‘æ²¡äº‹æ›´æ–°ä¸€ä¸‹ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment"># å‡çº§ uv åˆ°æœ€æ–°ç‰ˆæœ¬</span>
uv <span class="hljs-built_in">self</span> update
<span class="hljs-comment"># æŸ¥çœ‹ uv ç‰ˆæœ¬ä¸ç¯å¢ƒä¿¡æ¯</span>
uv <span class="hljs-built_in">self</span> info
</code></pre>
<h3 data-id="heading-29">8. å¸¸ç”¨å‘½ä»¤å¯¹ç…§</h3>


















































<table><thead><tr><th>åœºæ™¯</th><th>æ—§æ–¹å¼ (Pip/Poetry)</th><th><strong>uv æ–¹å¼</strong></th></tr></thead><tbody><tr><td><strong>åˆ›å»ºç¯å¢ƒ</strong></td><td><code>python -m venv .venv</code></td><td><code>uv init</code>Â (è‡ªåŠ¨ç®¡ç†)</td></tr><tr><td><strong>æ¿€æ´»ç¯å¢ƒ</strong></td><td><code>source .venv/bin/activate</code></td><td><strong><code>uv run &lt;cmd&gt;</code></strong> Â (æ— éœ€æ¿€æ´»)</td></tr><tr><td><strong>å®‰è£…åŒ…</strong></td><td><code>pip install reqs</code></td><td><code>uv add reqs</code></td></tr><tr><td><strong>å¼€å‘ä¾èµ–</strong></td><td><code>poetry add -D pytest</code></td><td><code>uv add --group dev pytest</code></td></tr><tr><td><strong>åŒæ­¥ä¾èµ–</strong></td><td><code>pip install -r requirements.txt</code></td><td><strong><code>uv sync</code></strong>Â (å¼ºåˆ¶ä¸€è‡´)</td></tr><tr><td><strong>å‡çº§åŒ…</strong></td><td><code>pip install -U reqs</code></td><td><code>uv lock --upgrade-package reqs</code></td></tr><tr><td><strong>è¿è¡Œå·¥å…·</strong></td><td><code>pipx run black</code></td><td><code>uvx black</code></td></tr><tr><td><strong>CI å®‰è£…</strong></td><td><code>pip install ...</code></td><td><code>uv sync --frozen</code></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-30">uvçš„æ ¸å¿ƒæœºåˆ¶ï¼š</h2>
<blockquote>
<p>æˆ‘å¸Œæœ›ä¸Šä¸€ä¸ªæ¨¡å—ä¸»è¦è®²æ€ä¹ˆç”¨ï¼Œè¿™ä¸ªæ¨¡å—å°±å¯¹ä¸Šä¸€ä¸ªæ¨¡å—çš„æ“ä½œè¿›è¡Œä¸€äº›è§£æè¡¥å……ã€‚</p>
</blockquote>
<h3 data-id="heading-31">è·¨å¹³å°è§£ææœºåˆ¶ (Universal Resolution)</h3>
<p>ç›¸è¾ƒäºpipç”Ÿæˆçš„ä¾èµ–åˆ—è¡¨æ˜¯åŸºäºå½“å‰ç¯å¢ƒå¿«ç…§ï¼Œuvçš„è§£ææœºåˆ¶æ˜¯å¹³å°æ— å…³çš„ï¼Œå®ƒåŸºäº<strong>å¤šå¹³å°ä¾èµ–å›¾ (Multi-platform Dependency Graph)</strong> Â æ¥ç”Ÿæˆä¸€ä¸ªç»Ÿä¸€çš„é”æ–‡ä»¶Â <code>uv.lock</code>ã€‚<br/>
è§‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.astral.sh%2Fuv%2Fconcepts%2Fresolution%2F%23learn-more" target="_blank" title="https://docs.astral.sh/uv/concepts/resolution/#learn-more" ref="nofollow noopener noreferrer">Resolution</a>Â ä»¥åŠ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.astral.sh%2Fuv%2Freference%2Finternals%2Fresolver%2F%23resolver" target="_blank" title="https://docs.astral.sh/uv/reference/internals/resolver/#resolver" ref="nofollow noopener noreferrer">Resolver internals</a>Â æœ‰æ„Ÿã€‚åŸæ–‡æ€ä¹ˆä¼šå†™çš„è¿™ä¹ˆé•¿éš¾å¥ã€‚</p>
<h4 data-id="heading-32">ä½¿ç”¨Â <code>uv lock</code>æ—¶ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</h4>
<h5 data-id="heading-33">é€»è¾‘å±‚é¢ä¸Šï¼šâ€œå…¨é‡è§£æâ€ (Universal Resolution)</h5>
<p>1.<strong>å…ƒæ•°æ®æŸ¥è¯¢ (Metadata Querying)</strong></p>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.ibm.com%2Fcn-zh%2Fthink%2Ftopics%2Fmetadata" target="_blank" title="https://www.ibm.com/cn-zh/think/topics/metadata" ref="nofollow noopener noreferrer">ä»€ä¹ˆæ˜¯å…ƒæ•°æ®ï¼Ÿ</a>Â ä¸€æ–¹é¢ï¼Œå®ƒæ˜¯æ£€ç´¢ã€äº’æ“ä½œæ€§å’Œæ•°æ®æ²»ç†çš„åŸºç¡€ï¼Œå¦ä¸€æ–¹é¢ï¼Œå®ƒæ˜¯éšç§æ³„éœ²çš„é«˜å±åŒºåŸŸï¼Œå¾€å¾€è¢«ä½ä¼°ã€‚å› æ­¤ï¼Œå…ƒæ•°æ®ç®¡ç†ï¼ˆMetadata Managementï¼‰æ˜¯æ•°æ®ä»“åº“å’Œæ•°æ®æ¹–æˆåŠŸçš„æ ¸å¿ƒï¼Œè€Œéè¾¹ç¼˜ä»»åŠ¡ã€‚</p>
</blockquote>
<p>uv ä¸åªæ˜¯ä¸‹è½½åŒ…ï¼Œè€Œæ˜¯é¦–å…ˆå‘ PyPI å‘èµ·å¤§è§„æ¨¡çš„å…ƒæ•°æ®æŸ¥è¯¢ã€‚å®ƒä¼šæŠ“å–ç›®æ ‡åŒ…ï¼ˆå¦‚ numpyï¼‰çš„æ‰€æœ‰å¯ç”¨ç‰ˆæœ¬ï¼Œä»¥åŠè¿™äº›ç‰ˆæœ¬åœ¨ Windowsã€Linuxã€macOS ç­‰ä¸åŒå¹³å°ä¸‹çš„å·®å¼‚åŒ–å®šä¹‰ã€‚<br/>
å®ƒä¸åªçœ‹â€œæˆ‘èƒ½åœ¨æœ¬æœºè£…ä»€ä¹ˆâ€ï¼Œè€Œæ˜¯çœ‹â€œè¿™ä¸ªåŒ…åœ¨æ‰€æœ‰å¯èƒ½çš„ç³»ç»Ÿä¸Šé•¿ä»€ä¹ˆæ ·â€ã€‚</p>
<p>2.<strong>æ„å»ºæŠ½è±¡ä¾èµ–å›¾ (Abstract Dependency Graph)</strong></p>
<ul>
<li>uv åœ¨å†…å­˜ä¸­æ„å»ºä¸€ä¸ªè™šæ‹Ÿçš„ã€æ¶µç›–æ‰€æœ‰ç›®æ ‡å¹³å°çš„<strong>ä¾èµ–å›¾è°± (Dependency Graph)</strong> ã€‚</li>
<li>å¯¹æ¯”ï¼šä¼ ç»Ÿçš„ pip æ˜¯â€œèµ°ä¸€æ­¥çœ‹ä¸€æ­¥â€ï¼ˆåªé’ˆå¯¹å½“å‰ç¯å¢ƒï¼‰ï¼Œè€Œ uv æ˜¯åŒæ—¶æ¨¡æ‹Ÿå‡º Linux Python 3.9ã€Windows Python 3.12ã€macOS ARM64 ç­‰å¤šç§åœºæ™¯ä¸‹çš„<strong>ä¾èµ–æ ‘</strong>ã€‚</li>
</ul>
<p>3.<strong>çº¦æŸæ±‚è§£ (Constraint Solving)</strong><br/>
åˆ©ç”¨é«˜æ•ˆ<strong>PubGrub ç®—æ³• (PubGrub Algorithm)</strong> ï¼Œuv åœ¨è¿™ä¸ªå·¨å¤§çš„å›¾è°±ä¸­å¯»æ‰¾ä¸€ä¸ªæœ€å¤§å…¬çº¦æ•°ï¼Œä¹Ÿå°±æ˜¯äº¤é›† (Intersection)ã€‚</p>
<blockquote>
<p>å¤§æ‰‹å­ä»¬æ„Ÿå…´è¶£çš„è¯å¯ä»¥çœ‹çœ‹pubgrubçš„å†…éƒ¨ç®—æ³•ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpubgrub-rs-guide.pages.dev%2Finternals%2Fintro" target="_blank" title="https://pubgrub-rs-guide.pages.dev/internals/intro" ref="nofollow noopener noreferrer">Internals of the PubGrub algorithm</a></p>
</blockquote>
<ul>
<li>ç›®æ ‡ï¼šæ‰¾åˆ°ä¸€ç»„ç‰ˆæœ¬ç»„åˆï¼Œä½¿å¾—å®ƒä»¬æ—¢èƒ½æ»¡è¶³ä½ çš„ pyproject.toml è¦æ±‚ï¼Œåˆèƒ½åœ¨æ‰€æœ‰ç›®æ ‡å¹³å°ä¸Šä¸å†²çªã€‚</li>
<li>ç»“æœï¼šå¦‚æœä¸åŒå¹³å°éœ€è¦ä¸åŒçš„ä¾èµ–ï¼ˆä¾‹å¦‚ Windows éœ€è¦ colorama ä½† Linux ä¸éœ€è¦ï¼‰ï¼Œå®ƒä¼šå°†å¸¦æœ‰**ç¯å¢ƒæ ‡è®° (Environment Markers)**çš„æ¡ä»¶è¡¨è¾¾å¼ï¼Œæ˜ç¡®åœ°å†™å…¥é”å®šæ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯å¿½ç•¥å®ƒä»¬ã€‚</li>
<li>æé—®ï¼ï¼šä¼šä¸ä¼šå‡ºç°æ‰¾ä¸åˆ°äº¤é›†çš„æƒ…å†µå‘¢ï¼Ÿ<br/>
å½“ç„¶ä¼šï¼Œè¿™å°±æ˜¯Resolution Impossibleï¼ˆæ— æ³•è§£æï¼‰æˆ– Version Conflictï¼ˆç‰ˆæœ¬å†²çªï¼‰çš„æƒ…å†µï¼Œuvä¼šæŠ›å‡ºé”™è¯¯ï¼Œæ­¤æ—¶pubgrubä¼šç”Ÿæˆä¸€ä¸ªæ¨å¯¼é“¾ï¼Œæ–¹ä¾¿è°ƒæ•´ä¾èµ–å£°æ˜ã€‚<br/>
ç±»ä¼¼äºä¸‹å›¾ï¼š</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be9b9933364e4e89b31d25c304dc0005~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZG91YmxlZ29k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767678034&amp;x-signature=KzwLejmoykt6ErMWvh%2BYrdEwTUQ%3D" alt="image.png" loading="lazy"/></p>
<p>4.<strong>ç”Ÿæˆé”å®šæ–‡ä»¶ (Lockfile Generation)</strong><br/>
æœ€ç»ˆç”Ÿæˆçš„ uv.lock æ–‡ä»¶ä¸æ˜¯ä¸€ä»½ç®€å•çš„æ¸…å•ï¼Œè€Œæ˜¯ä¸€ä»½é€šç”¨è´¦æœ¬ (Universal Ledger)ã€‚<br/>
å®ƒè®°å½•äº†æ‰€æœ‰ç¬¬ä¸‰æ–¹åŒ…çš„ç²¾ç¡®ç‰ˆæœ¬ï¼ˆHashï¼‰ï¼ŒåŒ…å«åœ¨ A æƒ…å†µä¸‹ç”¨ B ç‰ˆæœ¬ï¼Œåœ¨ C æƒ…å†µä¸‹ç”¨ D ç‰ˆæœ¬çš„å®Œæ•´å†³ç­–æ ‘ã€‚è¿™å°±ç¡®ä¿äº†æ— è®ºåœ¨è°çš„ç”µè„‘ä¸Šï¼ˆWindows/Mac/Linuxï¼‰ï¼Œåªè¦æ‹‰å–ä»£ç ï¼Œæ•´ä¸ªå•ä½“ä»“åº“çš„ä¾èµ–æ‹“æ‰‘å®Œå…¨ä¸€è‡´ä¸”å³æ—¶åŒæ­¥ã€‚</p>
<h5 data-id="heading-34">ç‰©ç†å±‚é¢ï¼šâ€œæ–‡ä»¶é”â€ (File Locking)</h5>
<p>è¿™æ˜¯<code>Â uv lock</code>Â èƒ½å¤Ÿé«˜é€Ÿå¹¶è¡Œä¸”ä¸å´©æºƒï¼ˆä¸åŒè¿›ç¨‹é—´ä¸æ‰“æ¶ï¼‰çš„ä¿éšœï¼Œå¯¹åº”ä¹‹å‰åœ¨"èƒŒæ™¯"é‡Œæåˆ°çš„â€œLinux æ–‡ä»¶é”æœºåˆ¶â€ã€‚åœ¨æ‰§è¡Œä¸Šè¿°é€»è¾‘è¿ç®—å’Œéšåçš„ç¼“å­˜å†™å…¥æ—¶ï¼Œuv å¿…é¡»å¤„ç†**å¹¶å‘ (Concurrency)**é—®é¢˜ã€‚</p>
<p>1.è·å–<strong>æ’ä»–é” (Acquiring Exclusive Lock)</strong> Â åœ¨å†™å…¥å…¨å±€ç¼“å­˜ï¼ˆå¦‚ä¸‹è½½æ–°çš„ Wheel åŒ…ï¼‰æˆ–ä¿®æ”¹é¡¹ç›®çŠ¶æ€å‰ï¼Œuv ä¼šå…ˆåœ¨ .locks ç›®å½•ä¸­å¯»æ‰¾å¯¹åº”çš„é”æ–‡ä»¶ï¼Œå¹¶å°è¯•è·å–æ–‡ä»¶é” (File Lock)ã€‚</p>
<ul>
<li>
<p>ç›®çš„ï¼šé˜²æ­¢<strong>ç«æ€æ¡ä»¶ (Race Condition)</strong> ã€‚æ¯”å¦‚ï¼Œé˜²æ­¢ä½ åœ¨ç»ˆç«¯ A è¿è¡Œ<code>Â uv lock</code>Â æ­£åœ¨å†™å…¥ numpy çš„ç¼“å­˜æ—¶ï¼Œç»ˆç«¯ B çš„<code>uv sync</code>çªç„¶æŠŠè¿™ä¸ªæœªå†™å®Œçš„æ–‡ä»¶è¯»èµ°æˆ–è¦†ç›–ã€‚</p>
</li>
<li>
<p>ä»€ä¹ˆæ˜¯æ’ä»–é”ï¼Ÿ<br/>
<strong>æ’ä»–é”</strong>ï¼ˆä¹Ÿå«å†™é”ã€äº’æ–¥é” Mutexï¼‰æ˜¯ä¸€ç§<strong>å¹¶å‘æ§åˆ¶æœºåˆ¶</strong>ã€‚å®ƒçš„è§„åˆ™éå¸¸ç®€å•ä¸”éœ¸æ€»ï¼šâ€œæˆ‘ç°åœ¨è¦å ç”¨è¿™ä¸ªèµ„æºï¼ˆæ–‡ä»¶/æ•°æ®åº“/å†…å­˜ï¼‰ï¼Œä¸€æ¬¡åªå‡†ä¸€ä¸ªè¿›ç¨‹ä¿®æ”¹ï¼Œåœ¨æˆ‘ç”¨å®Œä¹‹å‰ï¼Œå…¶ä»–ä»»ä½•äººï¼ˆè¿›ç¨‹/çº¿ç¨‹ï¼‰çœ‹éƒ½ä¸å‡†çœ‹ã€‚â€<br/>
æ„Ÿè§‰å®ƒå’Œgilæ˜¯ä¸æ˜¯æœ‰ç‚¹åƒï¼Œä½†æ˜¯ä»–ä»¬çš„å±‚çº§ï¼Œä½œç”¨èŒƒå›´ï¼Œç›®çš„éƒ½ä¸ä¸€æ ·ã€‚</p>
<blockquote>
<p>æœ‰æ²¡æœ‰äººè¢«å„ç§å„æ ·çš„â€œé”â€æ‰“æ™•äº†ï¼Œæˆ‘ä¹Ÿã€‚<br/>
æ€»è€Œè¨€ä¹‹ï¼Œé”çš„ç¡¬åº¦ä¸Šï¼šæœ‰åŠå¯¼é” (Advisory Lock)å¼ºåˆ¶é” (Mandatory Lock)ã€‚ç­–ç•¥ä¸Šæœ‰æ‚²è§‚é” (Pessimistic Lock)ä¹è§‚é” (Optimistic Lock)æ— é”ç¼–ç¨‹ (Lock-Free / Wait-Free)ã€‚é”çš„æ¨¡å¼è¿™ä¸ªç»´åº¦é‡Œæœ‰æ’ä»– (Exclusive / Xé”)å’Œå…±äº« (Shared / Sé”)ã€‚å…·ä½“å®ç°æœºåˆ¶ä¸Šæœ‰è¯»å†™é” (Read-Write Lock)äº’æ–¥é” (Mutex)è‡ªæ—‹é” (Spinlock)ç­‰ç­‰ã€‚é™¤è¿™å››ä¸ªç»´åº¦ï¼Œè¿˜æœ‰ç²’åº¦ï¼Œå…¬å¹³æ€§ï¼Œé˜»å¡æ€§çš„ç»´åº¦ã€‚é”åœ¨è®¡ç®—æœºä½“ç³»ä¸­æ˜¯åˆ†å±‚å­˜åœ¨çš„ã€‚æœŸå¾…æœ‰å¤§ä½¬èƒ½æŠŠè¿™äº›æ•´ç†ä¸€ä¸‹à©­ Ë™á—œË™ à©­ã€‚</p>
</blockquote>
</li>
</ul>
<p>2.<strong>è¿›ç¨‹é˜»å¡ä¸ååŒ (Process Blocking &amp; Coordination)</strong> Â å¦‚æœæ£€æµ‹åˆ°é”è¢«å ç”¨ï¼ˆè¯´æ˜å¦ä¸€ä¸ª uv è¿›ç¨‹æ­£åœ¨å¿™ï¼‰ï¼Œå½“å‰çš„<code>uv lock</code>Â è¿›ç¨‹ä¼šè¿›å…¥<strong>é˜»å¡ (Blocking)</strong> Â çŠ¶æ€ï¼Œè‡ªåŠ¨æ’é˜Ÿç­‰å¾…ã€‚</p>
<ul>
<li>å› æ­¤ï¼Œæ— éœ€æ‹…å¿ƒå¤šå¼€ç»ˆç«¯ä¼šæåç¯å¢ƒï¼Œuv ä¼šè‡ªåŠ¨é€šè¿‡æ“ä½œç³»ç»Ÿå†…æ ¸çº§çš„é”æœºåˆ¶æ¥åè°ƒé¡ºåºã€‚</li>
</ul>
<p>3.<strong>åŸå­æ€§å†™å…¥ (Atomic Write)</strong> Â ä¸€æ—¦è®¡ç®—å®Œæˆå¹¶æ‹¿åˆ°é”ï¼Œuv ä¼šç¡®ä¿å¯¹ uv.lock æ–‡ä»¶å’Œç¼“å­˜æ–‡ä»¶çš„å†™å…¥æ˜¯åŸå­æ€§ (Atomic) çš„ã€‚è¿™æ„å‘³ç€æ–‡ä»¶è¦ä¹ˆå…¨å†™å¥½ï¼Œè¦ä¹ˆå…¨ä¸å†™ï¼Œä¸ä¼šå‡ºç°â€œå†™äº†ä¸€åŠæ–­ç”µå¯¼è‡´æ–‡ä»¶æŸåâ€çš„æƒ…å†µã€‚</p>
<hr/>
<h3 data-id="heading-35">uv Workspaces å†…éƒ¨è¿è¡Œæœºåˆ¶</h3>
<p>uv workspacesæœºåˆ¶ç±»ä¼¼äºä¸€ä¸ªè™šæ‹ŸåŒ–çš„å…ƒé¡¹ç›®ç®¡ç†å™¨ï¼Œè¿è¡Œuv syncæ—¶ï¼Œå®ƒä¸åªæ˜¯ç®€å•è½®è¯¢å­é¡¹ç›®ï¼Œè€Œæ˜¯ï¼š</p>
<ol>
<li><strong>å‘ç°ä¸æ‹“æ‰‘æ„å»º (Discovery &amp; Topology)</strong><br/>
åœ¨ uv å¼€å§‹è§£å†³å¤æ‚çš„ç‰ˆæœ¬å†²çªæˆ–ä¸‹è½½ä»»ä½•ä»£ç ä¹‹å‰ï¼Œä»–å¾—å…ˆçŸ¥é“ä½ æœ¬åœ°ç¡¬ç›˜æœ‰ä»€ä¹ˆã€‚</li>
</ol>
<ul>
<li>uv é¦–å…ˆè¯»å–æ ¹ç›®å½• pyproject.toml ä¸­çš„Â <code>tool.uv.workspace.members</code>Â åˆ—è¡¨ã€‚</li>
<li>æ‰§è¡ŒÂ <strong>glob æ‰©å±•</strong>ï¼Œéå†æ–‡ä»¶ç³»ç»Ÿä»¥å®šä½æ‰€æœ‰æ½œåœ¨çš„å­é¡¹ç›®ç›®å½•ï¼Œæ ¹æ®ä¸‰é‡éªŒè¯ï¼ša.è·¯å¾„åŒ¹é… b.pyproject.tomlå­˜åœ¨æ£€æŸ¥ c.å…ƒæ•°æ®æœ‰æ•ˆæ€§ æ¥ç¡®è®¤ã€‚</li>
</ul>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.com%2Fdeveloper%2Farticle%2F2437910" target="_blank" title="https://cloud.tencent.com/developer/article/2437910" ref="nofollow noopener noreferrer">è®¤è¯† Glob Pattern</a>Â ï¼Œéå†èŒƒå›´ä¸¥æ ¼æ§åˆ¶åœ¨å·¥ä½œåŒºæ ¹ç›®å½•åŠå…¶å­ç›®å½•ã€‚</p>
</blockquote>
<ul>
<li>æ³¨æ„ï¼šæ­¤æ—¶è¿˜ä¸ä¼šå®‰è£…ä»»ä½•ä¸œè¥¿ï¼Œåªæ˜¯å»ºç«‹<strong>å·¥ä½œåŒºæˆå‘˜æ³¨å†Œè¡¨ï¼ˆWorkspace Member Registryï¼‰</strong> ï¼Œå®ƒæŠŠç‰©ç†ä¸Šçš„æ–‡ä»¶ç³»ç»Ÿè·¯å¾„æ˜ å°„æˆäº†é€»è¾‘ä¸Šçš„åŒ…åï¼Œè®©åç»­çš„ä¾èµ–è§£æç®—æ³•èƒ½å¤ŸæŠŠæœ¬åœ°æ–‡ä»¶å¤¹å½“åšç°æˆçš„å®‰è£…åŒ…æ¥å¤„ç†ï¼Œå°±ä¸å†å»pyplä¸Šæ‰¾äº†ã€‚</li>
</ul>
<p>2.<strong>ä¾èµ–èšåˆä¸ç»Ÿä¸€ (Dependency Aggregation &amp; Unification)</strong><br/>
ææ¸…æ¥šäº†ä»–ä»¬æœ‰å•¥ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯æŠŠä»–ä»¬èšåœ¨ä¸€èµ·ã€‚</p>
<p><strong>è™šæ‹ŸåŒ–åˆå¹¶</strong>ï¼š<br/>
uv å°† Root çš„ä¾èµ–å’Œæ‰€æœ‰ Member çš„ä¾èµ–è¿›è¡Œå¹¶é›†æ“ä½œï¼Œæ„é€ å‡ºä¸€ä¸ªå·¨å¤§çš„â€œè™šæ‹Ÿé¡¹ç›®â€éœ€æ±‚æ¸…å•ã€‚å®ƒä¸æ˜¯éš”ç¦»è§£æ A å’Œ Bï¼Œè€Œæ˜¯å°†æ•´ä¸ª Monorepo è§†ä¸ºä¸€ä¸ªæ•´ä½“æ¥å¤„ç†ã€‚<br/>
(æ³¨ï¼šè¿™ä¸ªå·¨å¤§çš„éœ€æ±‚æ¸…å•ä¹Ÿå°±æ˜¯åœ¨ä¸Šæ–‡æåˆ°çš„ PubGrub ç®—æ³•ä¸­è¿›è¡Œç»Ÿä¸€æ±‚è§£)ã€‚<br/>
<strong>ç‰ˆæœ¬ä¸€è‡´æ€§ä»²è£ (Consistency Arbitration)</strong> ï¼š<br/>
è¿™å…¶å®å°±æ˜¯å‰æ–‡çš„<strong>çº¦æŸæ±‚è§£</strong>ã€‚</p>
<p>3.<strong>é”æ–‡ä»¶ç”Ÿæˆ (The Universal Lock)</strong><br/>
åŒä¸Šã€‚</p>
<p><strong>å¼€å‘æ€é‡å†™ (Development Rewriting)</strong> ï¼š<br/>
è¿™æ˜¯ Workspace åœ¨é”æ–‡ä»¶ä¸­çš„æ ¸å¿ƒç‰¹å¾ã€‚å¯¹äºæ³¨å†Œè¡¨å†…çš„åŒ…å¼•ç”¨ï¼ˆå¦‚ api ä¾èµ– commonï¼‰ï¼Œuv ä¼šè§¦å‘<strong>é‡å†™</strong>é€»è¾‘ï¼š</p>
<ul>
<li>ä¸è®°å½•å“ˆå¸Œï¼šå› ä¸ºå®ƒæ—¶åˆ»åœ¨å˜ã€‚</li>
<li>æ ‡è®°ä¸º Editableï¼šæ ‡è®°ä¸ºå¯ç¼–è¾‘æ¨¡å¼ã€‚</li>
<li>æŒ‡å‘ç›¸å¯¹è·¯å¾„ï¼šç›´æ¥æŒ‡å‘ç¡¬ç›˜ä¸Šçš„ ../packages/commonã€‚</li>
</ul>
<blockquote>
<p>é‡å†™æœºåˆ¶å…¶å®æœ‰ä¸¤ç§ï¼š<br/>
<strong>å¼€å‘æ€é‡å†™ (Development Rewriting)</strong> ï¼šå‘ç”Ÿåœ¨Â <code>uv sync</code>ï¼Œé‡å†™ä¸ºç›¸å¯¹è·¯å¾„ï¼ˆä¸ºäº†æ”¹ä»£ç ç”Ÿæ•ˆï¼‰ã€‚<br/>
<strong>æ„å»ºæ€é‡å†™ (Build Rewriting)</strong> ï¼šå‘ç”Ÿåœ¨Â <code>uv build</code>ï¼Œé‡å†™ä¸ºç‰ˆæœ¬å·ï¼ˆä¸ºäº†å‘å¸ƒåˆ° PyPIï¼‰ã€‚</p>
</blockquote>
<p>4.<strong>è™šæ‹Ÿç¯å¢ƒå¸ƒå±€ (Environment Layout &amp; Strategy)</strong><br/>
uvéœ€è¦è®© Python è§£é‡Šå™¨åœ¨æ‰§è¡Œ import è¯­å¥æ—¶ï¼Œèƒ½å¤Ÿâ€œçœ‹è§â€å¹¶åŠ è½½é‚£ä¸ªä½ç½®çš„ä»£ç ã€‚<br/>
é»˜è®¤æƒ…å†µä¸‹ï¼Œuv åªåœ¨ æ ¹ç›®å½• åˆ›å»ºä¸€ä¸ª .venvã€‚å®ƒä¸ä¼šæ±¡æŸ“å­é¡¹ç›®çš„æ–‡ä»¶å¤¹ã€‚</p>
<p><strong>é“¾æ¥æŠ€æœ¯ (.pth Linkage)</strong> ï¼š<br/>
ç®€å•æ¥è¯´ï¼Œuv åˆ©ç”¨äº† Python æ ‡å‡†åº“ site æ¨¡å—çš„ä¸€ä¸ªåŸç”Ÿç‰¹æ€§ï¼Œå®ç°äº†ä¸€ç§â€œè½¯è¿æ¥â€çš„æ•ˆæœã€‚<br/>
<strong>Python çš„ site æ¨¡å—ä¸ .pth æ–‡ä»¶</strong></p>
<ul>
<li>Python å¯åŠ¨æ—¶ï¼Œä¼šè‡ªåŠ¨å¯¼å…¥ä¸€ä¸ªå« site çš„å†…ç½®æ¨¡å—ã€‚è¿™ä¸ªæ¨¡å—è´Ÿè´£é…ç½® sys.pathï¼ˆä¹Ÿå°±æ˜¯ Python æŸ¥æ‰¾åŒ…çš„è·¯å¾„åˆ—è¡¨ï¼‰ã€‚</li>
<li>æœºåˆ¶: Python å¯åŠ¨ï¼Œsite æ¨¡å—å¼€å§‹å·¥ä½œã€‚</li>
<li>å®ƒä¼šæ‰«ææ ‡å‡†åº“è·¯å¾„ï¼ˆå¦‚ lib/site-packagesï¼‰ã€‚ç„¶åæŸ¥æ‰¾è¯¥ç›®å½•ä¸‹æ‰€æœ‰åç¼€ä¸º .pth çš„æ–‡ä»¶ã€‚</li>
<li>æ‰§è¡Œï¼šå¯¹äºæ¯ä¸€ä¸ª .pth æ–‡ä»¶ï¼ŒPython ä¼šè¯»å–å…¶ä¸­çš„æ¯ä¸€è¡Œï¼Œå¹¶å°†å…¶ä½œä¸ºè·¯å¾„æ·»åŠ åˆ° sys.path ä¸­ã€‚<br/>
åœ¨è¿™ä¸ªè¿‡ç¨‹é‡Œï¼Œuv ä¸åƒÂ <code>pip install -eÂ </code>. é‚£æ ·ç”Ÿæˆå¤æ‚çš„ egg-link æˆ–è€…å»ä¿®æ”¹ easy-install.pthï¼Œè€Œæ˜¯ç›´æ¥ç”Ÿæˆä¸€ä¸ªä¸“å±çš„ã€çº¯å‡€çš„ .pth æ–‡ä»¶ã€‚</li>
</ul>
<p><strong>uvé‡Œçš„å…·ä½“æ“ä½œï¼š</strong></p>
<ul>
<li>ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ pandasï¼‰ï¼šç›´æ¥å®‰è£… wheel åˆ° .venv/lib/site-packagesã€‚</li>
<li>Workspace æˆå‘˜ï¼šuv ä½¿ç”¨ .pth æ–‡ä»¶æœºåˆ¶ã€‚å®ƒä¼šåœ¨ site-packages ä¸‹åˆ›å»ºç‰¹æ®Šçš„ .pth æ–‡ä»¶ï¼Œå†…å®¹ä»…ä»…æ˜¯å­é¡¹ç›®æºç ç›®å½•çš„<strong>è·¯å¾„å­—ç¬¦ä¸²</strong>ã€‚</li>
</ul>
<p>ç»“æœï¼šå½“ä½ Â <code>import potions</code>æ—¶ï¼ŒPython è§£é‡Šå™¨è¯»å– .pth æ–‡ä»¶ï¼Œç›´æ¥è·³è½¬åˆ° packages/potions/src åŠ è½½ä»£ç ã€‚ä»è€Œå®ç°æ¯«ç§’çº§ç¯å¢ƒåŒæ­¥ä¸çƒ­é‡è½½ã€‚</p>
<hr/>
<h2 data-id="heading-36">è¡¥å……æé—®ï¼</h2>
<p><strong>Q: å¦‚æœè¦å‘å¸ƒå­åŒ…åˆ° PyPIï¼Œï¼Œ<code>{ workspace = true }</code>Â è¿™ç§æœ¬åœ°é…ç½®æ€ä¹ˆåŠï¼Ÿä¼šæŠ¥é”™å—ï¼Ÿ</strong></p>
<p><strong>A:Â <strong>ä¸ç”¨æ‹…å¿ƒ</strong>ï¼Œ<code>uv</code>Â å·²ç»å¤„ç†å¥½äº†ã€‚</strong><br/>
å®ƒé‡‡ç”¨Â  <strong>â€œå¼€å‘æ—¶ç”¨è·¯å¾„ï¼Œæ„å»ºæ—¶æ¢ç‰ˆæœ¬â€</strong> Â çš„ç­–ç•¥ï¼š</p>
<ol>
<li><strong>è‡ªåŠ¨è½¬æ¢</strong>ï¼š<code>uv build</code>Â ä¼šè‡ªåŠ¨å¤„ç†è¿™ä¸€â€œè„æ´»ç´¯æ´»â€ï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹é…ç½®ã€‚</li>
<li><strong>è§£å†³çŸ›ç›¾</strong>ï¼šå®Œç¾å¹³è¡¡äº† Monorepo çš„æœ¬åœ°è°ƒè¯•ä¾¿åˆ©æ€§ä¸å…¬ç½‘åˆ†å‘çš„æ ‡å‡†åŒ–ã€‚</li>
</ol>
<p><strong>å‰æ &amp; æ“ä½œ</strong><br/>
è¢«ä¾èµ–çš„å­åŒ…ï¼ˆå¦‚Â <code>common</code>ï¼‰å¿…é¡»ä¹Ÿå‘å¸ƒåˆ° PyPIã€‚</p>
<ul>
<li><strong>æ­¥éª¤</strong>ï¼šå…ˆæ„å»ºå¹¶å‘å¸ƒåº•å±‚Â <code>common</code>Â -&gt; å†æ„å»ºå¹¶å‘å¸ƒä¸Šå±‚Â <code>api</code>ã€‚</li>
<li><strong>æ›¿ä»£</strong>ï¼šä½¿ç”¨Â <code>uv publish</code>Â çš„æ‰¹é‡å‘å¸ƒåŠŸèƒ½ï¼Œå®ƒä¼šå°è¯•è‡ªåŠ¨å¤„ç†ä¾èµ–é¡ºåºã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Day36 | Javaä¸­çš„çº¿ç¨‹æ± æŠ€æœ¯]]></title>    <link>https://juejin.cn/post/7589167252723499058</link>    <guid>https://juejin.cn/post/7589167252723499058</guid>    <pubDate>2025-12-30T05:41:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589167252723499058" data-draft-id="7589194558288560166" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Day36 | Javaä¸­çš„çº¿ç¨‹æ± æŠ€æœ¯"/> <meta itemprop="keywords" content="åç«¯,Java,Java EE"/> <meta itemprop="datePublished" content="2025-12-30T05:41:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‡’æƒ°èœ—ç‰›"/> <meta itemprop="url" content="https://juejin.cn/user/615342556327752"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Day36 | Javaä¸­çš„çº¿ç¨‹æ± æŠ€æœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/615342556327752/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‡’æƒ°èœ—ç‰›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T05:41:54.000Z" title="Tue Dec 30 2025 05:41:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« <a href="https://juejin.cn/post/7588464673285455899" target="_blank" title="https://juejin.cn/post/7588464673285455899">Day35 | Javaå¤šçº¿ç¨‹å…¥é—¨</a>ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨new Thread()æ¥åˆ›å»ºå’Œå¯åŠ¨çº¿ç¨‹ã€‚</p>
<p>é€šè¿‡è¿™ä¸ªè¿‡ç¨‹äº†è§£äº†çº¿ç¨‹çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µå’ŒåŸºç¡€æ“ä½œã€‚</p>
<p>ä½†æ˜¯åœ¨å®é™…çš„å¼€å‘å’ŒçœŸå®çš„åœºæ™¯ä¸­ï¼Œé€šè¿‡å‰æ–‡çš„æ–¹å¼ä½¿ç”¨çº¿ç¨‹æœ‰ä¸€äº›æ˜æ˜¾çš„å¼Šç«¯ï¼š</p>
<p>å¼€é”€å¤§ï¼šé¢‘ç¹åœ°åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ä¼šæ¶ˆè€—å¤§é‡çš„ç³»ç»Ÿèµ„æºã€‚çº¿ç¨‹æ˜¯ä¸€ä¸ªé‡é‡çº§èµ„æºï¼Œåˆ›å»ºè¿‡ç¨‹æ¶‰åŠå’Œæ“ä½œç³»ç»Ÿçš„äº¤äº’ï¼Œæˆæœ¬å¾ˆé«˜ã€‚</p>
<p>ä¸åˆ©äºç®¡ç†ï¼šæ²¡åŠæ³•æœ‰æ•ˆåœ°æ§åˆ¶å¹¶å‘çº¿ç¨‹çš„æ•°é‡ã€‚å¦‚æœè¯·æ±‚é‡å¾ˆå¤§ï¼Œæ— é™åˆ¶åœ°åˆ›å»ºçº¿ç¨‹å¾ˆå¯èƒ½å¯¼è‡´å†…å­˜æº¢å‡ºï¼Œå¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚</p>
<p>åŠŸèƒ½å•ä¸€ï¼šnew Thread()çš„æ–¹å¼åŠŸèƒ½å¾ˆæœ‰é™ï¼Œå¾ˆéš¾å®ç°ä»»åŠ¡çš„å»¶è¿Ÿæ‰§è¡Œã€å‘¨æœŸæ€§æ‰§è¡Œï¼Œæˆ–è€…è·å–ä»»åŠ¡çš„æ‰§è¡Œç»“æœç­‰å¤æ‚éœ€æ±‚ã€‚</p>
<p>æ‰€ä»¥åœ¨ç°å®å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éƒ½æ˜¯ä½¿ç”¨Java5å°±å¼•å…¥çš„Executoræ¡†æ¶ã€‚è¿™ä¸ªæ¡†æ¶çš„æ ¸å¿ƒå°±æ˜¯çº¿ç¨‹æ± ã€‚</p>
<p>ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œåç»­çš„å†…å®¹æˆ‘ä»¬éƒ½å›´ç»•é¤é¦†è¿™ä¸ªç”Ÿæ´»ä¸­çš„æ¡ˆä¾‹æ¥é˜è¿°ç›¸å…³çš„æ¦‚å¿µã€‚</p>
<p>å¦‚æœä½ æ˜¯ä¸€å®¶é¤é¦†çš„è€æ¿ï¼Œæ¯å¤©éƒ½è¦å¤„ç†å¤§é‡çš„è®¢å•ã€‚</p>
<p>å¦‚æœæ¯æ¥ä¸€ä¸ªè®¢å•å°±é›‡ä¸€ä¸ªæ–°å¨å¸ˆï¼ˆnew Thread()ï¼‰ï¼Œé‚£ä½ é¢ä¸´çš„é—®é¢˜å°±æ˜¯ï¼š</p>
<p>é›‡äººæˆæœ¬é«˜ï¼ˆåˆ›å»ºçº¿ç¨‹è€—èµ„æºï¼‰ï¼Œå¨æˆ¿ä¼šè¢«æŒ¤çˆ†ï¼ˆå†…å­˜æº¢å‡ºï¼‰ï¼Œè€Œä¸”é‚£ä¹ˆå¤šçš„å¨å¸ˆï¼Œä½ ä¹Ÿç®¡ä¸è¿‡æ¥ã€‚</p>
<p>æœ€åï¼Œé¤é¦†å¯èƒ½å°±å€’é—­äº†ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯çº¿ç¨‹æ± </h2>
<p>ä¸ºäº†è§£å†³ä¸Šé¢é‚£äº›é—®é¢˜ï¼ŒJava5å°±å¼•å…¥äº†Executoræ¡†æ¶ï¼ˆæ™ºèƒ½å¨æˆ¿ï¼‰ï¼Œè¿™ä¸ªå¨æˆ¿é‡Œä¸€æ”¯å›ºå®šçš„å¨å¸ˆå›¢é˜Ÿï¼ˆçº¿ç¨‹ï¼‰ï¼Œ</p>
<p>ä¸€ä¸ªè®¢å•é˜Ÿåˆ—ï¼ˆä»»åŠ¡é˜Ÿåˆ—ï¼‰ï¼Œå’Œä¸€ä¸ªç»ç†ï¼ˆçº¿ç¨‹æ± ç®¡ç†å™¨ï¼‰ï¼Œæœ‰è®¢å•ï¼ˆä»»åŠ¡ï¼‰æ¥çš„æ—¶å€™ï¼š</p>
<p>å¦‚æœæœ‰ç©ºé—²å¨å¸ˆï¼Œé©¬ä¸Šå°±å¤„ç†ã€‚</p>
<p>å¦‚æœå¨å¸ˆå¿™ä¸è¿‡æ¥äº†ï¼Œè®¢å•å°±å…ˆæ’ç€é˜Ÿã€‚</p>
<p>å¦‚æœé˜Ÿåˆ—æ»¡äº†ï¼Œè¿˜å¯ä»¥ä¸´æ—¶åŠ æ´¾å¨å¸ˆï¼ˆä½†æœ‰ä¸Šé™ï¼‰ã€‚</p>
<p>å¦‚æœå®åœ¨å¿™ä¸è¿‡æ¥äº†ï¼Œç»ç†ä¼šæŒ‰ç­–ç•¥æ‹’ç»æ–°è®¢å•ï¼ˆæ¯”å¦‚è®©å®¢æˆ·ç­‰ä¼šå†æ¥ï¼‰ã€‚</p>
<p>Javaçš„Executoræ¡†æ¶å°±æ˜¯æ‰®æ¼”çš„è¿™ä¸ªç»ç†çš„è§’è‰²ï¼Œæ ¸å¿ƒç»„ä»¶æœ‰è¿™äº›ï¼š</p>
<p>Executor: é¡¶çº§æ¥å£ï¼Œåªå®šä¹‰äº†ä¸€ä¸ªexecute(Runnable command)æ–¹æ³•ã€‚</p>
<p>ExecutorService: Executorçš„å­æ¥å£ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬æœ€å¸¸ä½¿ç”¨çš„æ¥å£ã€‚å®ƒå¢åŠ äº†çº¿ç¨‹æ± çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆå¦‚shutdown()ï¼‰ï¼Œå¹¶æä¾›äº†submit()æ–¹æ³•æ¥æäº¤å¯ä»¥è¿”å›ç»“æœçš„ä»»åŠ¡ã€‚</p>
<p>ScheduledExecutorService: ExecutorServiceçš„å­æ¥å£ï¼Œå¢åŠ äº†å¯¹ä»»åŠ¡è¿›è¡Œå®šæ—¶æˆ–å‘¨æœŸæ€§æ‰§è¡Œçš„æ”¯æŒã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a5e3f69f80c4be8858a79cd6ffe9a79~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oeS5oOw6JyX54mb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767678114&amp;x-signature=o4bdZeWFPbTt1SktDdbTAr5YUq0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">äºŒã€çº¿ç¨‹æ± åˆ›å»º</h2>
<p>æˆ‘ä»¬å…ˆç”¨Executorså·¥å…·ç±»ä»¥ç®€å•çš„æ–¹å¼åˆ›å»ºä¸€äº›çº¿ç¨‹æ± ï¼Œç±»ä¼¼å¿«é€Ÿä¾¿æ·çš„ç§Ÿä¸€ä¸ªç°æˆçš„å¨æˆ¿å›¢é˜Ÿã€‚</p>
<h3 data-id="heading-2">2.1 FixedThreadPool</h3>
<p>å›ºå®šäººæ•°çš„å›¢é˜Ÿï¼Œé›‡ä½£æŒ‡å®šæ•°é‡çš„å¨å¸ˆï¼Œè®¢å•å¤šäº†å°±æ’é˜Ÿã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.lazy.snail.day36;

<span class="hljs-keyword">import</span> java.util.concurrent.ExecutorService;
<span class="hljs-keyword">import</span> java.util.concurrent.Executors;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@ClassName</span> Day36Demo
 * <span class="hljs-doctag">@Description</span> TODO
 * <span class="hljs-doctag">@Author</span> lazysnail
 * <span class="hljs-doctag">@Date</span> 2025/7/21 10:53
 * <span class="hljs-doctag">@Version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Day36Demo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">kitchen</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">3</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">5</span>; i++) {
            <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> i;
            kitchen.execute(() -&gt; System.out.println(<span class="hljs-string">"è®¢å• "</span> + order + <span class="hljs-string">" ç”± "</span> + Thread.currentThread().getName() + <span class="hljs-string">" å¤„ç†"</span>));
        }
        kitchen.shutdown();
    }
}
</code></pre>
<p>3ä¸ªçº¿ç¨‹è½®æµå¤„ç†5ä¸ªè®¢å•ï¼Œå¤šçš„è®¢å•æ’é˜Ÿç­‰å¾…ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dee8ba0e14844ce18421df658f620335~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oeS5oOw6JyX54mb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767678114&amp;x-signature=tyl2rUOO4vzgXfIl27qL7GdZu%2Bc%3D" alt="" loading="lazy"/></p>
<p>è®¢å•é˜Ÿåˆ—æ²¡æœ‰ä¸Šé™ï¼ˆLinkedBlockingQueueï¼‰ï¼Œå¦‚æœè®¢å•æºæºä¸æ–­ï¼Œå¯èƒ½æ’‘çˆ†å†…å­˜ã€‚</p>
<h3 data-id="heading-3">2.2 CachedThreadPool</h3>
<p>ç±»ä¼¼ä¸´æ—¶å·¥ï¼Œå¿™çš„æ—¶å€™å°±åŠ ç‚¹äººï¼Œç©ºé—²çš„æ—¶å€™å°±å‡å°‘ç‚¹äººã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">ExecutorService</span> <span class="hljs-variable">kitchen</span> <span class="hljs-operator">=</span> Executors.newCachedThreadPool();
</code></pre>
<p>è¿™ç§æ¯”è¾ƒé€‚åˆå¤„ç†çŸ­æ—¶è®¢å•é«˜å³°çš„æƒ…å†µã€‚</p>
<p>é«˜å³°æœŸå¯èƒ½é›‡ä½£æ— æ•°å¨å¸ˆï¼ˆçº¿ç¨‹æ•°å¯è¾¾Integer.MAX_VALUEï¼‰ï¼Œç„¶åè€—å°½èµ„æºã€‚</p>
<h3 data-id="heading-4">2.3 SingleThreadExecutor</h3>
<p>åªæœ‰ä¸€ä¸ªå¨å¸ˆï¼Œæ‰€æœ‰çš„è®¢å•éƒ½ä¸¥æ ¼æŒ‰ç…§é¡ºåºå¤„ç†ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">ExecutorService</span> <span class="hljs-variable">kitchen</span> <span class="hljs-operator">=</span> Executors.newSingleThreadExecutor();
</code></pre>
<p>è¿™ç§é€‚åˆéœ€è¦é¡ºåºæ‰§è¡Œçš„ä»»åŠ¡ï¼Œæ¯”å¦‚æ—¥å¿—è®°å½•ã€‚</p>
<p>é˜Ÿåˆ—ä¸€æ ·æ²¡æœ‰ä¸Šé™ï¼Œå¯èƒ½å¯¼è‡´å†…å­˜æº¢å‡ºã€‚</p>
<blockquote>
<p>ã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹å»ºè®®é¿å…ç›´æ¥ä½¿ç”¨Executorsï¼Œå› ä¸ºé»˜è®¤é…ç½®å¯èƒ½å¯¼è‡´å†…å­˜æº¢å‡ºã€‚å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥ç”¨ThreadPoolExecutorè‡ªå®šä¹‰çº¿ç¨‹æ± ï¼Œè‡ªå·±å½“ç»ç†ã€‚</p>
</blockquote>
<h2 data-id="heading-5">ä¸‰ã€è‡ªå®šä¹‰çº¿ç¨‹æ± </h2>
<p>ThreadPoolExecutorå¯ä»¥è®©æˆ‘ä»¬å®Œå…¨çš„æŒæ§"å¨æˆ¿"ï¼Œèƒ½è®¾ç½®å¨å¸ˆæ•°é‡ã€è®¢å•é˜Ÿåˆ—å¤§å°ã€å¤„ç†ç­–ç•¥ç­‰ç­‰ã€‚</p>
<h3 data-id="heading-6">3.1 æ ¸å¿ƒå‚æ•°</h3>
<p>ThreadPoolExecutorçš„æ„é€ æ–¹æ³•ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b65bd94b77cf4cb4a2ff09c8f8d5a943~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oeS5oOw6JyX54mb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767678114&amp;x-signature=4BO2aSAxyr7WfAkAs2O8VGuq2RY%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">ThreadPoolExecutor</span><span class="hljs-params">(<span class="hljs-type">int</span> corePoolSize,
                              <span class="hljs-type">int</span> maximumPoolSize,
                              <span class="hljs-type">long</span> keepAliveTime,
                              TimeUnit unit,
                              BlockingQueue&lt;Runnable&gt; workQueue,
                              ThreadFactory threadFactory,
                              RejectedExecutionHandler handler)</span> {
}
</code></pre>
<p>corePoolSizeï¼šæ ¸å¿ƒçº¿ç¨‹æ•°ï¼Œçº¿ç¨‹æ± ä¸­é•¿æœŸä¿æŒçš„çº¿ç¨‹æ•°é‡ï¼Œå³ä½¿å®ƒä»¬å¤„äºç©ºé—²çŠ¶æ€ã€‚</p>
<p>ä½ å¹³æ—¶é›‡ä½£çš„å›ºå®šå¨å¸ˆäººæ•°ï¼Œå³ä½¿æ²¡è®¢å•ä¹Ÿä¸ä¼šå¼€æ‰è¿™äº›äººã€‚</p>
<p>maximumPoolSizeï¼šæœ€å¤§çº¿ç¨‹æ•°ï¼Œçº¿ç¨‹æ± èƒ½å¤Ÿå®¹çº³çš„æœ€å¤§çº¿ç¨‹æ•°é‡ã€‚</p>
<p>é«˜å³°æœŸçš„æ—¶å€™ï¼Œæœ€å¤šèƒ½å¤Ÿé›‡ä½£å¤šå°‘å¨å¸ˆã€‚</p>
<p>keepAliveTimeï¼šçº¿ç¨‹å­˜æ´»æ—¶é—´ï¼Œå½“çº¿ç¨‹æ•°å¤§äºcorePoolSizeçš„æ—¶å€™ï¼Œå¤šä½™çš„ç©ºé—²çº¿ç¨‹åœ¨è¢«é”€æ¯å‰ç­‰å¾…æ–°ä»»åŠ¡çš„æœ€é•¿æ—¶é—´ã€‚</p>
<p>ä¸´æ—¶å¨å¸ˆé—²ç€å¤šä¹…ä¼šè¢«è§£é›‡ã€‚</p>
<p>unitï¼škeepAliveTimeçš„æ—¶é—´å•ä½ã€‚</p>
<p>workQueueï¼šä»»åŠ¡é˜Ÿåˆ—ï¼Œç”¨æ¥ä¿å­˜ç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡çš„é˜»å¡é˜Ÿåˆ—ã€‚</p>
<p>è®¢å•æ’é˜Ÿçš„æ¡Œå­ï¼Œå¤§å°æœ‰é™æˆ–æ— é™ã€‚</p>
<p>threadFactoryï¼šçº¿ç¨‹å·¥å‚ï¼Œç”¨æ¥åˆ›å»ºæ–°çº¿ç¨‹ã€‚ä¸€èˆ¬ç”¨æ¥è‡ªå®šä¹‰çº¿ç¨‹åç§°ï¼Œæ–¹ä¾¿é—®é¢˜æ’æŸ¥ã€‚</p>
<p>ç»™æ¯ä¸ªå¨å¸ˆå–ä¸ªåå­—ï¼Œæ–¹ä¾¿è¿½è¸ªè°åœ¨å¹²æ´»ã€‚</p>
<p>handlerï¼šæ‹’ç»ç­–ç•¥ï¼Œå½“é˜Ÿåˆ—å·²æ»¡ä¸”çº¿ç¨‹æ•°è¾¾åˆ°maximumPoolSizeæ—¶ï¼Œæ€ä¹ˆå¤„ç†æ–°æäº¤çš„ä»»åŠ¡ã€‚</p>
<p>è®¢å•å¤ªå¤šã€æ¡Œå­æ»¡äº†æ€ä¹ˆåŠï¼Ÿæ˜¯æ‹’ç»ã€è¿˜æ˜¯æ‰”æ‰è€è®¢å•ã€è¿˜æ˜¯ç›´æ¥è®©å®¢æˆ·è‡ªå·±åšï¼Ÿ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.lazy.snail.day36;

<span class="hljs-keyword">import</span> java.util.concurrent.*;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@ClassName</span> CustomThreadPool
 * <span class="hljs-doctag">@Description</span> TODO
 * <span class="hljs-doctag">@Author</span> lazysnail
 * <span class="hljs-doctag">@Date</span> 2025/7/21 11:45
 * <span class="hljs-doctag">@Version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomThreadPool</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">kitchen</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(
                <span class="hljs-number">2</span>,
                <span class="hljs-number">5</span>,
                <span class="hljs-number">60L</span>,
                TimeUnit.SECONDS,
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="hljs-number">10</span>),
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadFactory</span>() {
                    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> Thread <span class="hljs-title function_">newThread</span><span class="hljs-params">(Runnable r)</span> {
                        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(r, <span class="hljs-string">"å¨å¸ˆ-"</span> + count++);
                    }
                },
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>.CallerRunsPolicy()
        );

        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; i++) {
            <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> i;
            kitchen.submit(() -&gt; {
                <span class="hljs-keyword">try</span> {
                    Thread.sleep(<span class="hljs-number">1000</span>);
                    System.out.println(<span class="hljs-string">"è®¢å• "</span> + order + <span class="hljs-string">" ç”± "</span> + Thread.currentThread().getName() + <span class="hljs-string">" å¤„ç†"</span>);
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    Thread.currentThread().interrupt();
                }
            });
        }

        kitchen.shutdown();
    }
}
</code></pre>
<p>ä¸Šé¢çš„æ¡ˆä¾‹ä¸­ï¼Œé›‡ä½£äº†2ä¸ªå›ºå®šå¨å¸ˆï¼Œæœ€å¤šèƒ½å¤Ÿå®¹çº³5ä¸ªå¨å¸ˆï¼Œä¸´æ—¶å¨å¸ˆå¦‚æœç©ºé—²60ç§’å°±ä¼šè¢«è§£é›‡ã€‚</p>
<p>è®¢å•çš„é˜Ÿåˆ—é•¿åº¦æ˜¯10ä¸ªï¼Œç»™æ¯ä¸ªå¨å¸ˆéƒ½èµ·äº†åå­—ï¼Œå¦‚æœè®¢å•å¤ªå¤šã€æ¡Œå­æ»¡äº†ï¼Œå°±è®©å®¢æˆ·è‡ªå·±åšã€‚</p>
<p>æ¡ˆä¾‹ä¸­æ¨¡æ‹Ÿæäº¤äº†10ä¸ªè®¢å•ç”±å¨æˆ¿å¤„ç†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf995be6086441178cb273ce1f5fb387~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oeS5oOw6JyX54mb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767678114&amp;x-signature=xSW4kyrat9fTrz12nR4IxCT6%2B0E%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>"è®¢å•å¤ªå¤šï¼Œå®¢æˆ·è‡ªå·±åš"è§£é‡Šä¸‹ã€‚å½“æŠŠè®¢å•æ•°é‡è°ƒæ•´åˆ°16ï¼ˆè¶…è¿‡15ï¼‰æ—¶ï¼Œç”±äºçº¿ç¨‹æ± å·²æ»¡ï¼Œè§¦å‘CallerRunsPolicyï¼Œæäº¤ä»»åŠ¡çš„ä¸»çº¿ç¨‹ï¼ˆmainï¼‰å°±ä¼šè‡ªå·±æ‰§è¡Œç¬¬16ä¸ªè®¢å•çš„ä»»åŠ¡ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/564711b0ea594083910a175190ef1ece~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oeS5oOw6JyX54mb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767678114&amp;x-signature=5f%2BcgrkcuNkTOUSNwdLjYNOVy3Q%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">3.2 æ‹’ç»ç­–ç•¥</h3>
<p>RejectedExecutionHandleræœ‰å››ç§ï¼Œ"è®¢å•å¤ªå¤šï¼Œå®¢æˆ·è‡ªå·±åš"æ˜¯å…¶ä¸­çš„ä¸€ç§ã€‚</p>
<p>AbortPolicyï¼ˆé»˜è®¤ï¼‰ï¼šç›´æ¥æŠ›å‡ºRejectedExecutionExceptionå¼‚å¸¸ã€‚</p>
<p>é¤é¦†è€æ¿ç›´æ¥æŠŠå®¢æˆ·èµ¶èµ°äº†ï¼Œæ˜ç¡®çš„å‘Šè¯‰å®¢æˆ·ï¼Œå¤ªå¿™äº†ï¼Œå¤„ç†ä¸è¿‡æ¥äº†ã€‚</p>
<p>CallerRunsPolicyï¼šä¸ä½¿ç”¨çº¿ç¨‹æ± çš„çº¿ç¨‹ï¼Œè€Œæ˜¯ç”±æäº¤ä»»åŠ¡çš„é‚£ä¸ªçº¿ç¨‹è‡ªå·±æ¥æ‰§è¡Œã€‚</p>
<p>è¿™ä¸ªç­–ç•¥å°±æ˜¯ä¸Šé¢æ¡ˆä¾‹ä¸­çš„è®¢å•å¤ªå¤šï¼Œå®¢æˆ·è‡ªå·±åšã€‚</p>
<p>DiscardPolicyï¼šé»˜é»˜åœ°ä¸¢å¼ƒæ–°æäº¤çš„ä»»åŠ¡ï¼Œä¸æŠ›å¼‚å¸¸ä¹Ÿä¸æ‰§è¡Œã€‚</p>
<p>è€æ¿çœ‹æœ‰æ–°å®¢æˆ·ä¸‹å•äº†ï¼Œåˆå¿™ä¸è¿‡æ¥ï¼Œç›´æ¥å°±æŠŠè®¢å•ä¸¢åƒåœ¾æ¡¶äº†ï¼Œå®¢æˆ·æ ¹æœ¬ä¸çŸ¥é“ï¼Œä»–å¯èƒ½ä»¥ä¸ºè¿˜åœ¨æ’é˜Ÿã€‚</p>
<p>DiscardOldestPolicyï¼šä¸¢å¼ƒé˜Ÿåˆ—ä¸­æœ€è€çš„ä»»åŠ¡ï¼Œç„¶åå°è¯•é‡æ–°æäº¤æ–°ä»»åŠ¡ã€‚</p>
<p>è€æ¿å‘ç°æ¡Œå­æ»¡äº†ï¼Œåˆæœ‰æ–°è®¢å•æ¥äº†ï¼Œè½¬äº†ä¸€åœˆï¼ŒæŠŠç­‰æœ€ä¹…çš„å•å­ä¸¢äº†ï¼Œå…ˆå®‰æ’äº†æ–°è®¢å•ã€‚</p>
<h3 data-id="heading-8">3.3 ä»»åŠ¡é˜Ÿåˆ—</h3>
<p>ä¸‹é¢æ˜¯ä¸€äº›å¸¸è§çš„ä»»åŠ¡é˜Ÿåˆ—ï¼š</p>






























<table><thead><tr><th>é˜Ÿåˆ—ç±»å‹</th><th>ç‰¹ç‚¹</th><th>å…³è”çš„Executorsæ–¹æ³•</th></tr></thead><tbody><tr><td>ArrayBlockingQueue</td><td>æœ‰ç•Œé˜Ÿåˆ—ï¼ŒåŸºäºæ•°ç»„ï¼ŒFIFOã€‚åˆ›å»ºæ—¶éœ€æŒ‡å®šå®¹é‡ã€‚</td><td>ï¼ˆæ— ï¼Œéœ€è‡ªå®šä¹‰åˆ›å»ºï¼‰</td></tr><tr><td>LinkedBlockingQueue</td><td>æ— ç•Œé˜Ÿåˆ—ï¼ˆé»˜è®¤å®¹é‡Integer.MAX_VALUEï¼‰ã€‚</td><td>newFixedThreadPool, newSingleThreadExecutor</td></tr><tr><td>SynchronousQueue</td><td>ä¸å­˜å‚¨å…ƒç´ çš„é˜Ÿåˆ—ï¼Œæ¯ä¸ªæ’å…¥æ“ä½œå¿…é¡»ç­‰å¾…ä¸€ä¸ªç§»é™¤æ“ä½œã€‚</td><td>newCachedThreadPool</td></tr><tr><td>PriorityBlockingQueue</td><td>å¸¦ä¼˜å…ˆçº§çš„æ— ç•Œé˜Ÿåˆ—ã€‚</td><td>ï¼ˆæ— ï¼Œéœ€è‡ªå®šä¹‰åˆ›å»ºï¼‰</td></tr></tbody></table>
<blockquote>
<p>å®é™…å¼€å‘ä¼˜å…ˆä½¿ç”¨ArrayBlockingQueueï¼Œé¿å…ä»»åŠ¡æ— é™å †ç§¯ã€‚</p>
</blockquote>
<h2 data-id="heading-9">å››ã€çº¿ç¨‹æ± æ‰§è¡Œæµç¨‹</h2>
<p>ä¸‹é¢æ ¹æ®ThreadPoolExecutorçš„executeæ–¹æ³•ï¼ˆopenJdk17æºç ï¼‰å¤§è‡´æ¢³ç†çš„ä¸€ä¸ªçº¿ç¨‹æ± çš„æ‰§è¡Œæµç¨‹ã€‚</p>
<h3 data-id="heading-10">4.1 æ£€æŸ¥æ ¸å¿ƒçº¿ç¨‹</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (workerCountOf(c) &lt; corePoolSize) {
    <span class="hljs-keyword">if</span> (addWorker(command, <span class="hljs-literal">true</span>)) <span class="hljs-comment">// true è¡¨ç¤ºâ€œæ ¸å¿ƒçº¿ç¨‹â€</span>
        <span class="hljs-keyword">return</span>;
    c = ctl.get(); <span class="hljs-comment">// é‡æ–°è¯»å–çº¿ç¨‹æ± çŠ¶æ€</span>
}
</code></pre>
<p>å¦‚æœworkerCount&lt;corePoolSizeï¼Œå°è¯•é€šè¿‡addWorker(command, true)æ·»åŠ æ ¸å¿ƒçº¿ç¨‹ã€‚</p>
<p>å¦‚æœæˆåŠŸï¼Œé€€å‡ºï¼›å¦åˆ™ï¼Œæ›´æ–°çº¿ç¨‹æ± çŠ¶æ€ï¼Œç»§ç»­ä¸‹ä¸€æ­¥ã€‚</p>
<h3 data-id="heading-11">4.2 ä»»åŠ¡å…¥é˜Ÿ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (isRunning(c) &amp;&amp; workQueue.offer(command)) {
    <span class="hljs-type">int</span> <span class="hljs-variable">recheck</span> <span class="hljs-operator">=</span> ctl.get();
    <span class="hljs-keyword">if</span> (! isRunning(recheck) &amp;&amp; remove(command)) <span class="hljs-comment">// å¦‚æœçº¿ç¨‹æ± è¢«å…³é—­äº†ï¼Œä»»åŠ¡è¦ç§»å‡ºé˜Ÿåˆ—å¹¶æ‹’ç»</span>
        reject(command);
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (workerCountOf(recheck) == <span class="hljs-number">0</span>)        <span class="hljs-comment">// å¦‚æœçº¿ç¨‹æ± ä¸­æ²¡æœ‰çº¿ç¨‹äº†ï¼Œè¦åˆ›å»ºä¸€ä¸ªéæ ¸å¿ƒçº¿ç¨‹</span>
        addWorker(<span class="hljs-literal">null</span>, <span class="hljs-literal">false</span>);
}
</code></pre>
<p>å¦‚æœçº¿ç¨‹æ± æ˜¯RUNNINGä¸”é˜Ÿåˆ—æ¥å—ä»»åŠ¡ï¼ˆworkQueue.offer(command)ï¼‰ï¼Œä»»åŠ¡å…¥é˜Ÿã€‚</p>
<p>å†ä¸€æ¬¡æ£€æŸ¥çŠ¶æ€ï¼š</p>
<p>å¦‚æœä¸å†æ˜¯RUNNINGä¸”ä»»åŠ¡å¯ç§»é™¤ï¼Œæ‹’ç»ä»»åŠ¡ã€‚</p>
<p>å¦‚æœworkerCount == 0ï¼Œè°ƒç”¨addWorker(null, false) åˆ›å»ºéæ ¸å¿ƒçº¿ç¨‹å¤„ç†é˜Ÿåˆ—ã€‚</p>
<h3 data-id="heading-12">4.3 æ£€æŸ¥éæ ¸å¿ƒçº¿ç¨‹</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!addWorker(command, <span class="hljs-literal">false</span>)) <span class="hljs-comment">// false è¡¨ç¤ºéæ ¸å¿ƒçº¿ç¨‹</span>
    reject(command);
</code></pre>
<p>å¦‚æœé˜Ÿåˆ—å·²æ»¡æˆ–çº¿ç¨‹æ± éRUNNINGï¼Œå°è¯•é€šè¿‡addWorker(command, false) åˆ›å»ºéæ ¸å¿ƒçº¿ç¨‹ã€‚</p>
<p>å¦‚æœæˆåŠŸï¼Œä»»åŠ¡è¢«åˆ†é…ç»™æ–°çº¿ç¨‹ã€‚</p>
<h3 data-id="heading-13">4.4 æ‹’ç»ä»»åŠ¡</h3>
<pre><code class="hljs language-java" lang="java">handler.rejectedExecution(command, <span class="hljs-built_in">this</span>);
</code></pre>
<p>å¦‚æœaddWorker(command, false) å¤±è´¥ï¼Œè°ƒç”¨handler.rejectedExecution(command, this)æ‰§è¡Œæ‹’ç»ç­–ç•¥ã€‚</p>
<blockquote>
<p>ä¸Šé¢æåˆ°çš„æ ¸å¿ƒçº¿ç¨‹å’Œéæ ¸å¿ƒçº¿ç¨‹æœ¬è´¨ä¸Šéƒ½æ˜¯Workerå®ä¾‹ï¼Œåªæ˜¯åœ¨åˆ›å»ºæ—¶æœºå’Œç”Ÿå‘½å‘¨æœŸä¸Šæœ‰åŒºåˆ«ã€‚</p>
</blockquote>
<h2 data-id="heading-14">äº”ã€ä»»åŠ¡æäº¤å’Œç»“æœè·å–</h2>
<p>åœ¨çº¿ç¨‹æ± ä¸­ï¼Œä¸»è¦æœ‰ä¸¤ç§æ–¹å¼æ¥æäº¤ä»»åŠ¡ï¼šexecute(Runnable)å’Œsubmit(Callable)ã€‚</p>
<p>å…¶ä¸­execute(Runnable)å®ƒåªç®¡æ‰§è¡Œï¼Œä¸ç®¡ç»“æœã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@FunctionalInterface</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Runnable</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span>;
}
</code></pre>
<p>Runnableæ¥å£çš„run()æ–¹æ³•ç­¾åæ˜¯void run()ï¼Œæ²¡åŠæ³•è¿”å›ä»»ä½•è®¡ç®—ç»“æœã€‚</p>
<p>run()æ–¹æ³•ç­¾åæ²¡æœ‰å£°æ˜throws Exceptionï¼Œåœ¨ä»»åŠ¡ä¸­å‘ç”Ÿäº†å—æ£€å¼‚å¸¸ï¼Œå¿…é¡»åœ¨run()æ–¹æ³•å†…éƒ¨ç”¨try-catchå—å¤„ç†æ‰ã€‚</p>
<p>ä»»åŠ¡çš„æ‰§è¡Œç»“æœï¼ˆæˆåŠŸæˆ–å¤±è´¥ï¼‰å¯¹äºæäº¤ä»»åŠ¡çš„ä¸»çº¿ç¨‹æ¥è¯´æ˜¯å®Œå…¨æœªçŸ¥çš„ã€‚</p>
<p>submit(Callable)æ˜¯ä¸€ä¸ªæ›´åŠ é€šç”¨çš„ä»»åŠ¡æäº¤æ–¹å¼ã€‚</p>
<p>Callableå¯ä»¥çœ‹æˆæ˜¯Runnableçš„å‡çº§ç‰ˆï¼Œä¸“é—¨ä¸ºéœ€è¦è¿”å›ç»“æœçš„å¼‚æ­¥ä»»åŠ¡è€Œè®¾è®¡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@FunctionalInterface</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Callable</span>&lt;V&gt; {
    V <span class="hljs-title function_">call</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception;
}
</code></pre>
<p>è·ŸRunnableç›¸æ¯”ï¼Œcall()æ–¹æ³•çš„è¿”å›å€¼ç±»å‹æ˜¯æ³›å‹Vï¼Œæ„å‘³ç€ä½ çš„ä»»åŠ¡å¯ä»¥è¿”å›ä»»ä½•ç±»å‹çš„ç»“æœã€‚</p>
<p>call()æ–¹æ³•ç­¾åå£°æ˜äº†throws Exceptionï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨ä»»åŠ¡ä¸­æŠ›å‡ºå—æ£€å¼‚å¸¸ï¼Œä¸éœ€è¦åœ¨å†…éƒ¨try-catchã€‚</p>
<p>è¿™ä¸ªå¼‚å¸¸å¯ä»¥è¢«ä»»åŠ¡çš„æäº¤è€…æ•è·åˆ°ã€‚</p>
<p>å½“ä½¿ç”¨submit(Callable)æäº¤ä»»åŠ¡æ—¶ï¼Œæ–¹æ³•ä¸ä¼šé˜»å¡ï¼Œä»–ä¼šé©¬ä¸Šè¿”å›ä¸€ä¸ªFutureå¯¹è±¡ã€‚</p>
<p>å¯ä»¥æŠŠè¿™ä¸ªè¿”å›çš„Futureå¯¹è±¡çœ‹æˆä¸€ä¸ªæè´§å•ï¼Œæ‹¿åˆ°å®ƒä¹‹åï¼Œå°±å¯ä»¥æš‚æ—¶å»å¹²åˆ«çš„äº‹æƒ…äº†ã€‚</p>
<p>è¿™ä¸ªæè´§å•æœ‰ä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d423c7f44eb4476bd2739d0fe9f28fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oeS5oOw6JyX54mb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767678114&amp;x-signature=FVdHKOrGMYe4uRePxZLI7X4urqM%3D" alt="" loading="lazy"/></p>
<p>V get(): è¿™æ˜¯æè´§çš„æ–¹æ³•ã€‚ä½ æƒ³æ¥æ‹¿ç»“æœçš„æ—¶å€™ï¼Œå°±è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p>
<p>å¦‚æœä»»åŠ¡å·²ç»å®Œæˆï¼Œä¼šè¿”å›Callableçš„call()æ–¹æ³•è®¡ç®—å‡ºçš„ç»“æœã€‚</p>
<p>å¦‚æœä»»åŠ¡è¿˜æ²¡å®Œæˆï¼Œè°ƒç”¨get()çš„çº¿ç¨‹ä¼šé˜»å¡ï¼ˆæš‚åœå¹¶ç­‰å¾…ï¼‰ï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆä¸ºæ­¢ã€‚</p>
<p>V get(long timeout, TimeUnit unit): get()å¸¦è¶…æ—¶çš„ç‰ˆæœ¬ã€‚</p>
<p>å¦‚æœåœ¨æŒ‡å®šæ—¶é—´å†…ä»»åŠ¡è¿˜æ²¡å®Œæˆï¼Œå°±ä¼šæŠ›å‡ºTimeoutExceptionï¼Œé¿å…æ— é™æœŸç­‰å¾…ã€‚</p>
<p>boolean isDone(): æ£€æŸ¥ä»»åŠ¡å®Œæˆæ²¡æœ‰ï¼ˆæ— è®ºæ˜¯æ­£å¸¸ç»“æŸã€å¼‚å¸¸ç»ˆæ­¢è¿˜æ˜¯è¢«å–æ¶ˆï¼‰ã€‚è¿™æ˜¯ä¸€ä¸ªéé˜»å¡æ–¹æ³•ã€‚</p>
<p>boolean cancel(boolean mayInterruptIfRunning): å°è¯•å–æ¶ˆä»»åŠ¡ã€‚</p>
<blockquote>
<p>å…¨æ–‡æåˆ°çš„"å°è¯•å–æ¶ˆ"ã€"å°è¯•æäº¤"ã€"å°è¯•å…³é—­"è¿™ç±»ç”¨è¯ï¼Œå…¶å®æ˜¯çº¿ç¨‹æ± è®¾è®¡çš„ä¸€ä¸ªæ ¸å¿ƒæ€æƒ³ã€‚çº¿ç¨‹æ± ä¸­å¤§éƒ¨åˆ†çš„æ“ä½œéƒ½æ˜¯"è¯·æ±‚"ï¼Œè€Œä¸æ˜¯"å‘½ä»¤"ã€‚è°ƒç”¨è€…é€šè¿‡"è¯·æ±‚"æ¥è¡¨è¾¾æƒ³å¹²ä»€ä¹ˆäº‹æƒ…ï¼Œè€Œæ•´ä¸ªçº¿ç¨‹æ± ç³»ç»Ÿä»€ä¹ˆæ—¶å€™ï¼Œæ€ä¹ˆå¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œå–å†³äºå®ƒè‡ªèº«çš„å†…éƒ¨çŠ¶æ€ã€è§„åˆ™å’Œèµ„æºæƒ…å†µã€‚è€Œä¸æ˜¯åƒ"å‘½ä»¤"ä¸€æ ·ï¼Œæ”¶åˆ°å°±é©¬ä¸Šã€ç›´æ¥ã€å¼ºåˆ¶çš„å»æ‰§è¡Œå¹¶å“åº”ã€‚</p>
</blockquote>
<p>çœ‹ä¸€ä¸ªsubmit(Callable)+Futureçš„æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.lazy.snail.day36;

<span class="hljs-keyword">import</span> java.util.concurrent.*;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@ClassName</span> CallableFutureTest
 * <span class="hljs-doctag">@Description</span> TODO
 * <span class="hljs-doctag">@Author</span> lazysnail
 * <span class="hljs-doctag">@Date</span> 2025/7/21 16:09
 * <span class="hljs-doctag">@Version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CallableFutureTest</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">pool</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(
                <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">60L</span>, TimeUnit.SECONDS, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="hljs-number">10</span>)
        );

        Callable&lt;Integer&gt; task = () -&gt; {
            Thread.sleep(<span class="hljs-number">1000</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-number">42</span>;
        };

        Future&lt;Integer&gt; future = pool.submit(task);
        System.out.println(<span class="hljs-string">"ä»»åŠ¡å·²æäº¤..."</span>);

        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Integer</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> future.get();
            System.out.println(<span class="hljs-string">"ç»“æœ: "</span> + result);
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            System.err.println(<span class="hljs-string">"ä»»åŠ¡è¢«ä¸­æ–­: "</span> + e.getMessage());
            Thread.currentThread().interrupt();
        } <span class="hljs-keyword">catch</span> (ExecutionException e) {
            System.err.println(<span class="hljs-string">"ä»»åŠ¡æ‰§è¡Œå¤±è´¥: "</span> + e.getCause());
        } <span class="hljs-keyword">finally</span> {
            pool.shutdown();
        }
    }
}
</code></pre>
<p>pool.submit(task)è¢«è°ƒç”¨ä¹‹åï¼Œæ²¡æœ‰é˜»å¡ä¸»çº¿ç¨‹ï¼Œé©¬ä¸Šè¿”å›äº†ä¸€ä¸ªFutureç±»å‹çš„å¯¹è±¡ï¼ˆæˆ‘ä»¬çš„æè´§å•ï¼‰ã€‚</p>
<p>"ä»»åŠ¡å·²æäº¤..."è¿™è¡Œé©¬ä¸Šè¢«æ‰“å°å‡ºæ¥å°±è¯æ˜äº†ä»»åŠ¡æäº¤çš„å¼‚æ­¥æ€§â€”â€”ä¸»çº¿ç¨‹å‘èµ·äº†ä»»åŠ¡ï¼Œä½†ä¸éœ€è¦ç­‰å¾…å®ƒå®Œæˆã€‚</p>
<p>ä¸»çº¿ç¨‹å®Œæˆäº†å…¶ä»–äº‹æƒ…ä¹‹åï¼Œè°ƒç”¨future.get()æ¥æè´§ã€‚</p>
<p>è¿™ä¸ªè°ƒç”¨æ˜¯é˜»å¡çš„ï¼Œä¸»çº¿ç¨‹ä¼šåœ¨è¿™é‡Œæš‚åœï¼Œç›´åˆ°å­çº¿ç¨‹é‡Œçš„taskæ‰§è¡Œå®Œè¿”å›ç»“æœ42ã€‚</p>
<p>æ‹¿åˆ°ç»“æœä¹‹åï¼Œç¨‹åºæ‰ä¼šç»§ç»­æ‰§è¡Œå¹¶æ‰“å°ã€‚</p>
<h2 data-id="heading-15">å…­ã€å…³é—­çº¿ç¨‹æ± </h2>
<p>å‰æ–‡ä¸­æˆ‘ä»¬è®²è¿‡å®ˆæŠ¤çº¿ç¨‹å’Œéå®ˆæŠ¤çº¿ç¨‹çš„åŒºåˆ«ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œçº¿ç¨‹æ± åˆ›å»ºçš„çº¿ç¨‹éƒ½æ˜¯éå®ˆæŠ¤çº¿ç¨‹ã€‚</p>
<p>å¦‚æœä½ åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹æ± å¹¶æäº¤äº†ä»»åŠ¡ï¼Œå³ä½¿ä½ çš„mainæ–¹æ³•æ‰§è¡Œå®Œæ¯•ï¼Œåªè¦çº¿ç¨‹æ± æ²¡æœ‰è¢«å…³é—­ï¼Œå®ƒå†…éƒ¨çš„çº¿ç¨‹ï¼ˆå³ä½¿æ˜¯ç©ºé—²çš„ï¼‰ä¹Ÿä¼šä¸€ç›´å­˜åœ¨ï¼Œä»è€Œé˜»æ­¢JVMæ­£å¸¸é€€å‡ºã€‚</p>
<p>è¿™ä¼šå¯¼è‡´åº”ç”¨ç¨‹åºæŒ‚èµ·ï¼Œçœ‹èµ·æ¥å°±åƒå¡ä½äº†ã€‚</p>
<p>ExecutorServiceæ¥å£ç»™æˆ‘ä»¬æä¾›äº†ä¸¤ä¸ªæ ¸å¿ƒçš„å…³é—­æ–¹æ³•ï¼šshutdownå’ŒshutdownNow</p>
<p>çœ‹ä¸€ä¸‹äºŒè€…çš„åŒºåˆ«ï¼š</p>








































<table><thead><tr><th>ç‰¹æ€§</th><th>shutdown()</th><th>shutdownNow()</th></tr></thead><tbody><tr><td/><td>å¤§å–‡å­å®£å¸ƒé¤å…æ‰“çƒŠ</td><td>ç›´æ¥æ‹‰ç”µé—¸ï¼Œç´§æ€¥ç–æ•£</td></tr><tr><td>æ–°ä»»åŠ¡</td><td>ä¸å†æ¥å—æ–°æäº¤çš„ä»»åŠ¡ã€‚</td><td>ä¸å†æ¥å—æ–°æäº¤çš„ä»»åŠ¡ã€‚</td></tr><tr><td>å·²æäº¤ä»»åŠ¡</td><td>ç­‰å¾…æ‰€æœ‰å·²æäº¤çš„ä»»åŠ¡ï¼ˆåŒ…æ‹¬é˜Ÿåˆ—ä¸­çš„ï¼‰æ‰§è¡Œå®Œæ¯•ã€‚</td><td>å°è¯•ä¸­æ–­æ‰€æœ‰æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œæ¸…ç©ºä»»åŠ¡é˜Ÿåˆ—ã€‚</td></tr><tr><td>è¿”å›å€¼</td><td>void</td><td>Listï¼ˆè¿”å›é˜Ÿåˆ—ä¸­è¿˜æ²¡è¢«æ‰§è¡Œçš„ä»»åŠ¡åˆ—è¡¨ï¼‰</td></tr><tr><td>è°ƒç”¨æ—¶æœº</td><td>é¦–é€‰çš„ã€ä¼˜é›…çš„å…³é—­æ–¹å¼ã€‚</td><td>ä½œä¸ºshutdown()è¶…æ—¶åçš„æœ€åæ‰‹æ®µï¼Œæˆ–éœ€è¦ç«‹å³åœæ­¢çš„åœºæ™¯ã€‚</td></tr><tr><td>çŠ¶æ€å˜æ›´</td><td>çº¿ç¨‹æ± è¿›å…¥SHUTDOWNçŠ¶æ€ã€‚</td><td>çº¿ç¨‹æ± è¿›å…¥STOPçŠ¶æ€ã€‚</td></tr></tbody></table>
<p>å­—é¢ä¸Šçœ‹ï¼ŒshutdownNowçš„æ–¹å¼ä¹Ÿæ›´åŠ æ¿€è¿›ä¸€äº›ã€‚</p>
<p>è€Œåœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œæˆ‘ä»¬è‚¯å®šä¸èƒ½ç®€å•ç²—æš´çš„å…³é—­çº¿ç¨‹æ± ã€‚</p>
<p>ä¸‹é¢æ˜¯æ¨¡æ‹Ÿçš„å¼€å‘ç¯å¢ƒä¸­å…³é—­çº¿ç¨‹æ± çš„æ¡ˆä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.lazy.snail.day36;

<span class="hljs-keyword">import</span> java.util.concurrent.ExecutorService;
<span class="hljs-keyword">import</span> java.util.concurrent.Executors;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@ClassName</span> ShutdownTest
 * <span class="hljs-doctag">@Description</span> TODO
 * <span class="hljs-doctag">@Author</span> lazysnail
 * <span class="hljs-doctag">@Date</span> 2025/7/21 16:28
 * <span class="hljs-doctag">@Version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ShutdownTest</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">pool</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(<span class="hljs-number">2</span>);

        pool.submit(() -&gt; {
            <span class="hljs-keyword">try</span> {
                System.out.println(<span class="hljs-string">"ä»»åŠ¡1å¼€å§‹æ‰§è¡Œ..."</span>);
                Thread.sleep(<span class="hljs-number">2000</span>);
                System.out.println(<span class="hljs-string">"ä»»åŠ¡1æ‰§è¡Œå®Œæ¯•ã€‚"</span>);
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                System.err.println(<span class="hljs-string">"ä»»åŠ¡1è¢«ä¸­æ–­ã€‚"</span>);
                Thread.currentThread().interrupt();
            }
        });

        pool.submit(() -&gt; {
            <span class="hljs-keyword">try</span> {
                System.out.println(<span class="hljs-string">"ä»»åŠ¡2å¼€å§‹æ‰§è¡Œ..."</span>);
                Thread.sleep(<span class="hljs-number">8000</span>);
                System.out.println(<span class="hljs-string">"ä»»åŠ¡2æ‰§è¡Œå®Œæ¯•ã€‚"</span>);
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                System.err.println(<span class="hljs-string">"ä»»åŠ¡2è¢«ä¸­æ–­ã€‚"</span>);
                Thread.currentThread().interrupt();
            }
        });
        
        System.out.println(<span class="hljs-string">"ä¸»çº¿ç¨‹ï¼šå‘èµ·å…³é—­çº¿ç¨‹æ± è¯·æ±‚..."</span>);
        pool.shutdown();

        <span class="hljs-keyword">try</span> {
            System.out.println(<span class="hljs-string">"ä¸»çº¿ç¨‹ï¼šç­‰å¾…æœ€å¤š5ç§’è®©ä»»åŠ¡ç»“æŸ..."</span>);
            <span class="hljs-keyword">if</span> (!pool.awaitTermination(<span class="hljs-number">5</span>, TimeUnit.SECONDS)) {
                System.err.println(<span class="hljs-string">"ä¸»çº¿ç¨‹ï¼šè¶…æ—¶ï¼å¼ºåˆ¶å…³é—­çº¿ç¨‹æ± ..."</span>);
                pool.shutdownNow();

                <span class="hljs-keyword">if</span> (!pool.awaitTermination(<span class="hljs-number">1</span>, TimeUnit.SECONDS)) {
                    System.err.println(<span class="hljs-string">"çº¿ç¨‹æ± æœªèƒ½ç»ˆæ­¢ã€‚"</span>);
                }
            }
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            System.err.println(<span class="hljs-string">"ä¸»çº¿ç¨‹ç­‰å¾…æ—¶è¢«ä¸­æ–­ï¼Œå¼ºåˆ¶å…³é—­çº¿ç¨‹æ± ..."</span>);
            pool.shutdownNow();
            Thread.currentThread().interrupt();
        }

        System.out.println(<span class="hljs-string">"ä¸»çº¿ç¨‹ï¼šå…³é—­æµç¨‹ç»“æŸã€‚"</span>);
    }
}
</code></pre>
<p>shutdowné€šçŸ¥çº¿ç¨‹æ± è¿›å…¥å…³é—­æµç¨‹ï¼Œä¸å†æ¥å—æ–°ä»»åŠ¡ã€‚</p>
<p>è°ƒç”¨awaitTermination(long timeout, TimeUnit unit)æ–¹æ³•ï¼Œè®©å½“å‰çº¿ç¨‹ï¼ˆmainï¼‰é˜»å¡ç­‰å¾…ã€‚</p>
<p>è¦ä¹ˆçº¿ç¨‹æ± ä¸­çš„æ‰€æœ‰ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæ¯•ï¼Œçº¿ç¨‹æ± å®Œå…¨ç»ˆæ­¢ã€‚æ­¤æ—¶ï¼Œæ–¹æ³•è¿”å›trueã€‚</p>
<p>è¦ä¹ˆè¶…æ—¶æ—¶é—´åˆ°è¾¾ã€‚æ­¤æ—¶ï¼Œæ–¹æ³•è¿”å›falseã€‚</p>
<p>å¦‚æœawaitTerminationå› ä¸ºè¶…æ—¶è€Œè¿”å›falseï¼Œè¯´æ˜è¿˜æœ‰ä»»åŠ¡è¿˜æ²¡ç»“æŸã€‚</p>
<p>è¿™ä¸ªæ—¶å€™å°±åªèƒ½è°ƒç”¨shutdownNow()æ¥å°è¯•å¼ºåˆ¶ä¸­æ–­è¿™äº›ç›¸å¯¹é¡½å›ºçš„ä»»åŠ¡ã€‚</p>
<p>è°ƒç”¨awaitTerminationçš„çº¿ç¨‹è‡ªèº«ä¹Ÿå¯èƒ½è¢«ä¸­æ–­ã€‚</p>
<p>æˆ‘ä»¬å¿…é¡»æ•è·è¿™ä¸ªInterruptedExceptionï¼Œåœ¨æ•è·åä¹Ÿè°ƒç”¨shutdownNow()å¹¶æ¢å¤å½“å‰çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ã€‚</p>
<h2 data-id="heading-16">ä¸ƒã€çº¿ç¨‹æ± ç›‘æ§åŠè°ƒä¼˜</h2>
<p>çº¿ç¨‹æ± ç»™æˆ‘ä»¬æä¾›äº†å¾ˆå¤šè¿è¡ŒçŠ¶æ€ä¿¡æ¯ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦æˆ‘ä»¬ç»è¥çš„é¤é¦†ï¼Œå¨æˆ¿æœ‰åºã€åˆç†ã€é«˜æ•ˆçš„å¤„ç†è®¢å•ã€‚</p>
<p>å°±å¯ä»¥é€šè¿‡ç›‘æ§è¿™äº›çŠ¶æ€ä¿¡æ¯ï¼Œå¹¶åŠæ—¶çš„è°ƒæ•´é…ç½®ä¿¡æ¯ï¼Œè®©å¨æˆ¿è¾¾åˆ°ä¸€ä¸ªæœ€ä½³çš„çŠ¶æ€ã€‚</p>
<p>ThreadPoolExecutoræä¾›äº†ä¸€ç³»åˆ—æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™äº›æ–¹æ³•ç›‘æ§çº¿ç¨‹æ± çš„çŠ¶æ€ï¼Œæ¥ä¸‹æ¥æˆ‘ç”¨ç±»æ¯”çš„æ–¹å¼è®²ä¸€ä¸‹å¸¸ç”¨çš„æ–¹æ³•ï¼š</p>








































<table><thead><tr><th>æ–¹æ³•</th><th>ç±»æ¯”</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>getActiveCount()</td><td>æœ‰å¤šå°‘å¨å¸ˆåœ¨å¿™</td><td>è¿”å›å½“å‰æ­£åœ¨æ‰§è¡Œä»»åŠ¡çš„çº¿ç¨‹æ•°</td></tr><tr><td>getPoolSize()</td><td>å½“å‰é›‡äº†å¤šå°‘å¨å¸ˆ</td><td>è¿”å›çº¿ç¨‹æ± ä¸­å®é™…å­˜åœ¨çš„çº¿ç¨‹æ•°ï¼ˆæ ¸å¿ƒ+ä¸´æ—¶ï¼‰</td></tr><tr><td>getQueue().size()</td><td>æ¡Œå­ä¸Šæœ‰å¤šå°‘è®¢å•</td><td>è¿”å›ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ç­‰å¾…ä»»åŠ¡æ•°</td></tr><tr><td>getCompletedTaskCount()</td><td>å®Œæˆäº†å¤šå°‘è®¢å•</td><td>è¿”å›å·²å®Œæˆçš„ä»»åŠ¡æ€»æ•°ï¼ˆè¿‘ä¼¼å€¼ï¼‰</td></tr><tr><td>getTaskCount()</td><td>æ€»å…±æ”¶åˆ°å¤šå°‘è®¢å•</td><td>è¿”å›æäº¤åˆ°çº¿ç¨‹æ± çš„æ€»ä»»åŠ¡æ•°ï¼ˆåŒ…æ‹¬å·²å®Œæˆã€æ’é˜Ÿå’Œæ­£åœ¨æ‰§è¡Œçš„ï¼‰</td></tr><tr><td>getLargestPoolSize()</td><td>å†å²æœ€å¤šé›‡äº†å¤šå°‘å¨å¸ˆ</td><td>è¿”å›çº¿ç¨‹æ± å†å²ä¸ŠåŒæ—¶å­˜åœ¨çš„æœ€å¤§çº¿ç¨‹æ•°</td></tr></tbody></table>
<p>å¦‚æœå‘ç°æ’é˜Ÿè®¢å•è¶Šæ¥è¶Šå¤šï¼ˆgetQueue().size()æ¥è¿‘é˜Ÿåˆ—å®¹é‡ï¼‰ï¼Œè¯´æ˜æ¡Œå­ä¸å¤Ÿå¤§æˆ–å¨å¸ˆå¤ªå°‘ï¼Œå¯èƒ½éœ€è¦è°ƒæ•´é…ç½®ã€‚</p>
<p>ä»¥ä¸‹è¿™äº›å»ºè®®åªæ˜¯ä½œä¸ºå‚è€ƒï¼š</p>
<p>å¦‚æœä»»åŠ¡é‡ç¨³å®šï¼ŒcorePoolSizeå¯ä»¥è®¾ç½®æˆCPUæ ¸æ•°çš„1-2å€ã€‚</p>
<p>maximumPoolSizeä¸€èˆ¬è®¾ç½®ä¸ºCPUæ ¸æ•°çš„2-4å€ï¼Œé¿å…è¿‡å¤šçº¿ç¨‹å¯¼è‡´ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ã€‚</p>
<p>æ¨èArrayBlockingQueueè¿™ä¸ªæœ‰ç•Œé˜Ÿåˆ—ï¼Œæ§åˆ¶è®¢å•å †ç§¯ã€‚è®¢å•é‡æ³¢åŠ¨å¤§æ—¶ï¼Œé€‚å½“å¢å¤§é˜Ÿåˆ—ï¼Œä½†è¦æ³¨æ„å†…å­˜å ç”¨ã€‚</p>
<p>ä¸€èˆ¬è®¾ä¸ºå‡ åç§’åˆ°å‡ åˆ†é’Ÿï¼Œé«˜å³°è¿‡åèƒ½å¤Ÿå¿«é€Ÿçš„é‡Šæ”¾èµ„æºã€‚</p>
<p>ä½è´Ÿè½½çš„æ—¶å€™é‡‡ç”¨CallerRunsPolicyï¼Œè®©å®¢æˆ·è‡ªå·±åšèœï¼Œå‡ç¼“æäº¤é€Ÿåº¦ã€‚</p>
<p>è¦æ±‚é«˜å¯é æ€§çš„åœºæ™¯ä½¿ç”¨ç”¨AbortPolicyï¼Œæ˜ç¡®å¤±è´¥ï¼Œè§¦å‘å‘Šè­¦ã€‚</p>
<p>å¯¹ç»“æœä¸å¤ªæ•æ„Ÿï¼Œéå…³é”®ä»»åŠ¡çš„æ—¶å€™ç”¨DiscardPolicyæˆ–DiscardOldestPolicyï¼Œä¸¢å¼ƒä»»åŠ¡ä»¥ä¿æŠ¤ç³»ç»Ÿã€‚</p>
<p>å¦‚æœä»»åŠ¡æ‰§è¡Œå¾—å¤ªæ…¢ï¼Œå°±åªèƒ½ä¼˜åŒ–ä»»åŠ¡é€»è¾‘ï¼Œæˆ–è€…æŠŠå¤§äººç‰©æ‹†æˆå°ä»»åŠ¡ï¼ˆç±»ä¼¼ForkJoinPoolçš„åˆ†æ²»æ€æƒ³ï¼‰ã€‚</p>
<p>è¿˜å¯ä»¥ä½¿ç”¨PriorityBlockingQueueä¼˜å…ˆå¤„ç†é‡è¦è®¢å•ã€‚</p>
<blockquote>
<p>çº¿ç¨‹æ± çš„ä¼˜åŒ–ä¸æ˜¯ä¸€æˆä¸å˜çš„æ¨¡æ¿åŒ–æ“ä½œï¼Œè€Œæ˜¯éœ€è¦æ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯å’Œè¿è¡Œæ—¶çŠ¶æ€åŠ¨æ€è°ƒæ•´ã€‚çœŸæ­£çš„ä¼˜åŒ–ä¾èµ–äºæŒç»­ç›‘æ§çº¿ç¨‹æ± çš„è¿è¡ŒçŠ¶æ€ï¼Œç»“åˆä¸šåŠ¡éœ€æ±‚å’Œç³»ç»Ÿèµ„æºï¼ŒåŠ¨æ€è°ƒæ•´å‚æ•°æ‰èƒ½è¾¾åˆ°æœ€ä½³æ€§èƒ½ã€‚</p>
</blockquote>
<h2 data-id="heading-17">ç»“è¯­</h2>
<p>çœ‹å®Œæœ¬æ–‡ï¼Œæˆ‘ä»¬å·²ç»ä»new Thread()è·¨è¶Šåˆ°äº†çº¿ç¨‹æ± ã€‚</p>
<p>çº¿ç¨‹æ± å…¶å®ä¹Ÿå¹¶ä¸é«˜å¤§ä¸Šï¼Œä»–è·Ÿæ•°æ®åº“è¿æ¥æ± å’ŒHTTPè¿æ¥æ± çš„æ ¸å¿ƒæ€æƒ³ä¸€æ ·ã€‚</p>
<p>éƒ½æ˜¯ä¸€ç§æ± åŒ–æŠ€æœ¯ï¼Œæœ¬è´¨å°±æ˜¯é€šè¿‡å¤ç”¨æ˜‚è´µèµ„æºï¼Œæ¥é™ä½å•æ¬¡è·å–è¯¥èµ„æºçš„å¼€é”€ï¼Œå¹¶å¯¹èµ„æºè¿›è¡Œç»Ÿä¸€ç®¡ç†ï¼Œä»è€Œæé«˜ç³»ç»Ÿæ•´ä½“çš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚</p>
<p>ä¸ç®¡ä»€ä¹ˆæ± ï¼Œéƒ½å¯ä»¥æŠŠå®ƒçœ‹æˆä¸€ä¸ªå®¹å™¨ï¼Œç”¨æ¥å­˜æ”¾èµ„æºï¼Œéƒ½æœ‰è·å–ã€å½’è¿˜èµ„æºçš„æ–¹æ³•ã€‚</p>
<p>åªæ˜¯å› ä¸ºç®¡ç†çš„èµ„æºä¸åŒï¼Œå¯¹äºæ ¸å¿ƒæ•°é‡ã€æœ€å¤§æ•°é‡ã€ç©ºé—²è¶…æ—¶ã€æ‹’ç»ç­–ç•¥ç­‰å‚æ•°çš„ç®¡ç†ç­–ç•¥ä¸åŒè€Œå·²ã€‚</p>
<p>ä¸‹ä¸€ç¯‡é¢„å‘Š</p>
<blockquote>
<p>Day37 | çº¿ç¨‹å®‰å…¨ä¸synchronized</p>
</blockquote>
<p>å¦‚æœä½ è§‰å¾—è¿™ç³»åˆ—æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿å…³æ³¨ä¸“æ ï¼Œæˆ‘ä»¬ä¸€èµ·åšæŒä¸‹å»ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é˜¿é‡Œå¼€æºAgentScopeå¤šæ™ºèƒ½ä½“æ¡†æ¶è§£æç³»åˆ—ï¼ˆå››ï¼‰ç¬¬4ç« ï¼šAgent æ¥å£ä¸ AgentBase åŸºç±»]]></title>    <link>https://juejin.cn/post/7589246131585564707</link>    <guid>https://juejin.cn/post/7589246131585564707</guid>    <pubDate>2025-12-30T04:01:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589246131585564707" data-draft-id="7589207843788439587" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é˜¿é‡Œå¼€æºAgentScopeå¤šæ™ºèƒ½ä½“æ¡†æ¶è§£æç³»åˆ—ï¼ˆå››ï¼‰ç¬¬4ç« ï¼šAgent æ¥å£ä¸ AgentBase åŸºç±»"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2025-12-30T04:01:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯­è½å¿ƒç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2875978147955741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é˜¿é‡Œå¼€æºAgentScopeå¤šæ™ºèƒ½ä½“æ¡†æ¶è§£æç³»åˆ—ï¼ˆå››ï¼‰ç¬¬4ç« ï¼šAgent æ¥å£ä¸ AgentBase åŸºç±»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978147955741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯­è½å¿ƒç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T04:01:06.000Z" title="Tue Dec 30 2025 04:01:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    19
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æœ¬ç« å¯¼è¯»</h2>
<p>æœ¬ç« å°†æ·±å…¥è®²è§£AgentScopeä¸­æœ€æ ¸å¿ƒçš„æŠ½è±¡ï¼š<strong>Agentæ¥å£</strong>ã€‚Agentæ˜¯æ•´ä¸ªæ¡†æ¶çš„åŸºçŸ³ï¼Œå®šä¹‰äº†æ‰€æœ‰æ™ºèƒ½ä½“çš„è¡Œä¸ºå¥‘çº¦ã€‚æ— è®ºæ˜¯ç®€å•çš„é—®ç­”Botï¼Œè¿˜æ˜¯å¤æ‚çš„å¤šAgentåä½œç³»ç»Ÿï¼Œéƒ½å»ºç«‹åœ¨Agentæ¥å£ä¹‹ä¸Šã€‚</p>
<p><strong>å¯¼è¯»</strong>ï¼š</p>
<ul>
<li>ç†è§£Agentæ¥å£çš„æ ¸å¿ƒæ–¹æ³•å’Œè®¾è®¡ç†å¿µ</li>
<li>æŒæ¡call()ã€observe()ç­‰æ–¹æ³•çš„ä½¿ç”¨åœºæ™¯</li>
<li>å­¦ä¼šä½¿ç”¨AgentBaseåŸºç±»æ„å»ºè‡ªå®šä¹‰Agent</li>
<li>äº†è§£æµå¼æ‰§è¡Œå’Œäº‹ä»¶ç³»ç»Ÿ</li>
<li>æŒæ¡Hookç³»ç»Ÿçš„é›†æˆæ–¹å¼</li>
</ul>
<hr/>
<h2 data-id="heading-1">4.1 Agentæ¥å£è®¾è®¡</h2>
<h3 data-id="heading-2">4.1.1 Agentæ¥å£çš„æ ¸å¿ƒç»“æ„</h3>
<p>Agentæ¥å£å®šä¹‰äº†AgentScopeä¸­æ‰€æœ‰æ™ºèƒ½ä½“å¿…é¡»å®ç°çš„æ–¹æ³•ã€‚å®ƒé‡‡ç”¨å“åº”å¼ç¼–ç¨‹æ¨¡å‹ï¼Œæ‰€æœ‰æ–¹æ³•éƒ½è¿”å›<code>Mono&lt;T&gt;</code>æˆ–<code>Flux&lt;T&gt;</code>ï¼Œæ”¯æŒå¼‚æ­¥ã€éé˜»å¡çš„æ‰§è¡Œã€‚</p>
<p><strong>å®Œæ•´çš„Agentæ¥å£</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> io.agentscope.core.agent;

<span class="hljs-keyword">import</span> io.agentscope.core.message.Msg;
<span class="hljs-keyword">import</span> io.agentscope.core.interruption.InterruptContext;
<span class="hljs-keyword">import</span> reactor.core.publisher.Mono;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Agent</span> {
    
    <span class="hljs-comment">// ============ åŸºç¡€å±æ€§ ============</span>
    
    <span class="hljs-comment">/**
     * è·å–Agentçš„å”¯ä¸€æ ‡è¯†
     * ç”¨äºåœ¨å¤šAgentç³»ç»Ÿä¸­åŒºåˆ†ä¸åŒçš„Agentå®ä¾‹
     */</span>
    String <span class="hljs-title function_">getAgentId</span><span class="hljs-params">()</span>;
    
    <span class="hljs-comment">/**
     * è·å–Agentçš„åç§°
     * ç”¨äºæ—¥å¿—ã€ç›‘æ§ã€ç”¨æˆ·ç•Œé¢å±•ç¤º
     */</span>
    String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span>;
    
    <span class="hljs-comment">/**
     * è·å–Agentçš„æè¿°
     * è¯´æ˜Agentçš„åŠŸèƒ½å’Œç”¨é€”
     */</span>
    String <span class="hljs-title function_">getDescription</span><span class="hljs-params">()</span>;
    
    <span class="hljs-comment">// ============ æ ¸å¿ƒæ–¹æ³• ============</span>
    
    <span class="hljs-comment">/**
     * å¤„ç†å•æ¡æ¶ˆæ¯
     * è¿™æ˜¯æœ€å¸¸ç”¨çš„æ–¹æ³•
     * 
     * <span class="hljs-doctag">@param</span> msg ç”¨æˆ·è¾“å…¥çš„æ¶ˆæ¯
     * <span class="hljs-doctag">@return</span> Agentçš„å›å¤æ¶ˆæ¯
     */</span>
    <span class="hljs-keyword">default</span> Mono&lt;Msg&gt; <span class="hljs-title function_">call</span><span class="hljs-params">(Msg msg)</span> {
        <span class="hljs-keyword">return</span> call(msg == <span class="hljs-literal">null</span> ? List.of() : List.of(msg));
    }
    
    <span class="hljs-comment">/**
     * å¤„ç†å¤šæ¡æ¶ˆæ¯
     * ç”¨äºéœ€è¦åŒæ—¶è€ƒè™‘å¤šæ¡ä¸Šä¸‹æ–‡æ¶ˆæ¯çš„åœºæ™¯
     * 
     * <span class="hljs-doctag">@param</span> msgs æ¶ˆæ¯åˆ—è¡¨
     * <span class="hljs-doctag">@return</span> Agentçš„å›å¤æ¶ˆæ¯
     */</span>
    Mono&lt;Msg&gt; <span class="hljs-title function_">call</span><span class="hljs-params">(List&lt;Msg&gt; msgs)</span>;
    
    <span class="hljs-comment">/**
     * ç»§ç»­ç”Ÿæˆï¼ˆæ— æ–°è¾“å…¥ï¼‰
     * ç”¨äºè®©Agentç»§ç»­ä¹‹å‰çš„ç”Ÿæˆæˆ–æ¨ç†
     * 
     * <span class="hljs-doctag">@return</span> Agentçš„å›å¤æ¶ˆæ¯
     */</span>
    <span class="hljs-keyword">default</span> Mono&lt;Msg&gt; <span class="hljs-title function_">call</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> call(List.of());
    }
    
    <span class="hljs-comment">// ============ ç»“æ„åŒ–è¾“å‡º ============</span>
    
    <span class="hljs-comment">/**
     * è¿”å›ç»“æ„åŒ–æ•°æ®çš„ç‰ˆæœ¬
     * è¦æ±‚Agentç”Ÿæˆç¬¦åˆæŒ‡å®šç±»ç»“æ„çš„æ•°æ®
     * 
     * <span class="hljs-doctag">@param</span> msg ç”¨æˆ·è¾“å…¥çš„æ¶ˆæ¯
     * <span class="hljs-doctag">@param</span> structuredModel æœŸæœ›çš„è¾“å‡ºç»“æ„ç±»
     * <span class="hljs-doctag">@return</span> åŒ…å«ç»“æ„åŒ–æ•°æ®çš„æ¶ˆæ¯
     */</span>
    <span class="hljs-keyword">default</span> Mono&lt;Msg&gt; <span class="hljs-title function_">call</span><span class="hljs-params">(Msg msg, Class&lt;?&gt; structuredModel)</span> {
        <span class="hljs-keyword">return</span> call(msg == <span class="hljs-literal">null</span> ? List.of() : List.of(msg), structuredModel);
    }
    
    Mono&lt;Msg&gt; <span class="hljs-title function_">call</span><span class="hljs-params">(List&lt;Msg&gt; msgs, Class&lt;?&gt; structuredModel)</span>;
    
    <span class="hljs-keyword">default</span> Mono&lt;Msg&gt; <span class="hljs-title function_">call</span><span class="hljs-params">(Class&lt;?&gt; structuredModel)</span> {
        <span class="hljs-keyword">return</span> call(List.of(), structuredModel);
    }
    
    <span class="hljs-comment">// ============ å¤šAgentåä½œ ============</span>
    
    <span class="hljs-comment">/**
     * è§‚å¯Ÿæ¶ˆæ¯è€Œä¸å›å¤
     * ç”¨äºå¤šAgentåä½œåœºæ™¯ï¼ŒAgentéœ€è¦æ¥æ”¶ä¿¡æ¯ä½†ä¸éœ€è¦å›å¤
     * 
     * <span class="hljs-doctag">@param</span> msg è¦è§‚å¯Ÿçš„æ¶ˆæ¯
     * <span class="hljs-doctag">@return</span> å®Œæˆä¿¡å·
     */</span>
    Mono&lt;Void&gt; <span class="hljs-title function_">observe</span><span class="hljs-params">(Msg msg)</span>;
    
    Mono&lt;Void&gt; <span class="hljs-title function_">observe</span><span class="hljs-params">(List&lt;Msg&gt; msgs)</span>;
    
    <span class="hljs-comment">// ============ ä¸­æ–­æ§åˆ¶ ============</span>
    
    <span class="hljs-comment">/**
     * ä¸­æ–­Agentæ‰§è¡Œ
     * ç”¨äºäººæœºååŒæˆ–å®‰å…¨æ§åˆ¶åœºæ™¯
     * 
     * <span class="hljs-doctag">@param</span> reason ä¸­æ–­åŸå› 
     * <span class="hljs-doctag">@return</span> ä¸­æ–­ä¸Šä¸‹æ–‡
     */</span>
    <span class="hljs-keyword">default</span> Mono&lt;InterruptContext&gt; <span class="hljs-title function_">interrupt</span><span class="hljs-params">(String reason)</span> {
        <span class="hljs-keyword">return</span> Mono.empty();
    }
    
    <span class="hljs-comment">/**
     * æ£€æŸ¥Agentæ˜¯å¦å¯ä¸­æ–­
     * 
     * <span class="hljs-doctag">@return</span> trueè¡¨ç¤ºAgentæ”¯æŒä¸­æ–­
     */</span>
    <span class="hljs-keyword">default</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isInterruptible</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
}
</code></pre>
<h3 data-id="heading-3">4.1.2 è®¾è®¡ç†å¿µ</h3>
<h4 data-id="heading-4">ç†å¿µ1ï¼šå“åº”å¼ç¼–ç¨‹æ¨¡å‹</h4>
<p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨Mono/Fluxï¼Ÿ</strong></p>
<pre><code class="hljs language-python" lang="python">ä¼ ç»ŸåŒæ­¥æ¨¡å‹çš„é—®é¢˜ï¼š
âŒ é˜»å¡çº¿ç¨‹ï¼Œèµ„æºæµªè´¹
âŒ éš¾ä»¥å¤„ç†è¶…æ—¶
âŒ æ— æ³•æœ‰æ•ˆç»„åˆå¤šä¸ªå¼‚æ­¥æ“ä½œ
âŒ æ‰©å±•æ€§å·®

å“åº”å¼æ¨¡å‹çš„ä¼˜åŠ¿ï¼š
âœ“ éé˜»å¡ï¼Œé«˜å¹¶å‘
âœ“ å£°æ˜å¼çš„é”™è¯¯å¤„ç†
âœ“ çµæ´»çš„æ“ä½œç»„åˆï¼ˆ<span class="hljs-built_in">map</span>ã€flatMapã€<span class="hljs-built_in">zip</span>ç­‰ï¼‰
âœ“ å¤©ç„¶æ”¯æŒæµå¼å¤„ç†
âœ“ æ˜“äºé›†æˆèƒŒå‹ï¼ˆbackpressureï¼‰æœºåˆ¶
</code></pre>
<p><strong>ä»£ç å¯¹æ¯”</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼ ç»ŸåŒæ­¥æ–¹å¼ï¼ˆé˜»å¡ï¼‰</span>
<span class="hljs-keyword">public</span> Msg <span class="hljs-title function_">call</span><span class="hljs-params">(Msg msg)</span> {
    <span class="hljs-comment">// é˜»å¡çº¿ç¨‹ç­‰å¾…LLMå“åº”ï¼ˆå¯èƒ½éœ€è¦å‡ ç§’ï¼‰</span>
    <span class="hljs-type">Msg</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> llmService.generate(msg);  
    <span class="hljs-keyword">return</span> response;
}

<span class="hljs-comment">// å“åº”å¼æ–¹å¼ï¼ˆéé˜»å¡ï¼‰</span>
<span class="hljs-keyword">public</span> Mono&lt;Msg&gt; <span class="hljs-title function_">call</span><span class="hljs-params">(Msg msg)</span> {
    <span class="hljs-comment">// ç«‹å³è¿”å›ï¼Œä¸é˜»å¡çº¿ç¨‹</span>
    <span class="hljs-keyword">return</span> llmService.generateAsync(msg)
        .timeout(Duration.ofSeconds(<span class="hljs-number">30</span>))  <span class="hljs-comment">// å£°æ˜å¼è¶…æ—¶</span>
        .retryWhen(Retry.backoff(<span class="hljs-number">3</span>, Duration.ofSeconds(<span class="hljs-number">1</span>)))  <span class="hljs-comment">// å£°æ˜å¼é‡è¯•</span>
        .doOnError(e -&gt; log.error(<span class="hljs-string">"Generation failed"</span>, e));  <span class="hljs-comment">// å£°æ˜å¼é”™è¯¯å¤„ç†</span>
}
</code></pre>
<h4 data-id="heading-5">ç†å¿µ2ï¼šcall()æ–¹æ³•çš„å¤šæ€è®¾è®¡</h4>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦å¤šä¸ªcall()é‡è½½ï¼Ÿ</strong></p>
<pre><code class="hljs language-scss" lang="scss">åœºæ™¯<span class="hljs-number">1</span>ï¼šç®€å•å¯¹è¯
â”œâ”€ <span class="hljs-built_in">call</span>(Msg msg) 
â””â”€ ç”¨æˆ·æé—®ï¼ŒAgentå›ç­”

åœºæ™¯<span class="hljs-number">2</span>ï¼šå¤šè½®ä¸Šä¸‹æ–‡
â”œâ”€ <span class="hljs-built_in">call</span>(List&lt;Msg&gt; msgs)
â””â”€ éœ€è¦è€ƒè™‘å¤šæ¡å†å²æ¶ˆæ¯

åœºæ™¯<span class="hljs-number">3</span>ï¼šæ— è¾“å…¥ç»­å†™
â”œâ”€ <span class="hljs-built_in">call</span>()
â””â”€ Agentç»§ç»­ä¹‹å‰çš„ç”Ÿæˆ

åœºæ™¯<span class="hljs-number">4</span>ï¼šç»“æ„åŒ–è¾“å‡º
â”œâ”€ <span class="hljs-built_in">call</span>(Msg msg, Class&lt;?&gt; structuredModel)
â””â”€ è¦æ±‚Agentè¿”å›ç‰¹å®šæ ¼å¼çš„æ•°æ®
</code></pre>
<h4 data-id="heading-6">ç†å¿µ3ï¼šobserve()çš„å¿…è¦æ€§</h4>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦observe()ï¼Ÿ</strong></p>
<p>åœ¨å¤šAgentåä½œä¸­ï¼Œå¹¶éæ‰€æœ‰Agentéƒ½éœ€è¦å¯¹æ¯æ¡æ¶ˆæ¯åšå‡ºå›å¤ã€‚observe()æä¾›äº†ä¸€ç§"åªå¬ä¸è¯´"çš„æœºåˆ¶ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">ç¤ºä¾‹åœºæ™¯ï¼šä¸‰ä¸ªAgentåä½œ

Agent <span class="hljs-selector-tag">A</span>ï¼ˆæ•°æ®æ”¶é›†å™¨ï¼‰
  â†“ å‘é€æ•°æ®
Agent <span class="hljs-selector-tag">B</span>ï¼ˆè§‚å¯Ÿè€…ï¼‰â†’ <span class="hljs-built_in">observe</span>(msg) â†’ åªè®°å½•ï¼Œä¸å›å¤
  â†“
Agent Cï¼ˆå†³ç­–è€…ï¼‰â†’ <span class="hljs-built_in">call</span>(msg) â†’ åŸºäºæ‰€æœ‰æ•°æ®åšå†³ç­–
</code></pre>
<p><strong>ä»£ç ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Agent B ä½œä¸ºè§‚å¯Ÿè€…</span>
<span class="hljs-type">ReActAgent</span> <span class="hljs-variable">observerAgent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
    .name(<span class="hljs-string">"DataObserver"</span>)
    .memory(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryMemory</span>())  <span class="hljs-comment">// æœ‰è®°å¿†ä½†ä¸å›å¤</span>
    .build();

<span class="hljs-comment">// æ¥æ”¶å…¶ä»–Agentçš„æ¶ˆæ¯</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">dataFromAgentA</span> <span class="hljs-operator">=</span> ...;
observerAgent.observe(dataFromAgentA).block();  <span class="hljs-comment">// åªè®°å½•åˆ°Memory</span>

<span class="hljs-comment">// ç¨åå¯ä»¥åŸºäºè§‚å¯Ÿåˆ°çš„æ•°æ®ç”Ÿæˆæ€»ç»“</span>
<span class="hljs-type">Msg</span> <span class="hljs-variable">summary</span> <span class="hljs-operator">=</span> observerAgent.call(<span class="hljs-string">"è¯·æ€»ç»“ä¹‹å‰è§‚å¯Ÿåˆ°çš„æ‰€æœ‰æ•°æ®"</span>).block();
</code></pre>
<hr/>
<h2 data-id="heading-7">4.2 call()æ–¹æ³•çš„ä½¿ç”¨åœºæ™¯ï¼ˆHow - å¦‚ä½•ä½¿ç”¨ï¼‰</h2>
<h3 data-id="heading-8">4.2.1 åœºæ™¯1ï¼šç®€å•é—®ç­”å¯¹è¯</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> io.agentscope.core.ReActAgent;
<span class="hljs-keyword">import</span> io.agentscope.core.message.Msg;
<span class="hljs-keyword">import</span> io.agentscope.core.model.DashScopeChatModel;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleQAExample</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªç®€å•çš„é—®ç­”Agent</span>
        <span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
            .name(<span class="hljs-string">"QABot"</span>)
            .model(DashScopeChatModel.builder()
                .apiKey(System.getenv(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>))
                .modelName(<span class="hljs-string">"qwen-plus"</span>)
                .build())
            .sysPrompt(<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªå‹å¥½çš„AIåŠ©æ‰‹ï¼Œè¯·ç®€æ´åœ°å›ç­”ç”¨æˆ·çš„é—®é¢˜ã€‚"</span>)
            .build();
        
        <span class="hljs-comment">// ç”¨æˆ·æé—®</span>
        <span class="hljs-type">Msg</span> <span class="hljs-variable">userMsg</span> <span class="hljs-operator">=</span> Msg.builder()
            .textContent(<span class="hljs-string">"ä»€ä¹ˆæ˜¯é‡å­è®¡ç®—ï¼Ÿ"</span>)
            .build();
        
        <span class="hljs-comment">// è·å–å›å¤ï¼ˆé˜»å¡æ–¹å¼ï¼‰</span>
        <span class="hljs-type">Msg</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> agent.call(userMsg).block();
        
        System.out.println(<span class="hljs-string">"Agentå›å¤: "</span> + response.getTextContent());
        
        <span class="hljs-comment">// å¼‚æ­¥æ–¹å¼</span>
        agent.call(userMsg)
            .subscribe(
                msg -&gt; System.out.println(<span class="hljs-string">"Agentå›å¤: "</span> + msg.getTextContent()),
                error -&gt; System.err.println(<span class="hljs-string">"é”™è¯¯: "</span> + error.getMessage()),
                () -&gt; System.out.println(<span class="hljs-string">"å®Œæˆ"</span>)
            );
    }
}
</code></pre>
<h3 data-id="heading-9">4.2.2 åœºæ™¯2ï¼šå¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MultiTurnConversationExample</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
            .name(<span class="hljs-string">"ConversationBot"</span>)
            .model(model)
            .memory(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryMemory</span>())  <span class="hljs-comment">// å¯ç”¨è®°å¿†</span>
            .build();
        
        <span class="hljs-comment">// ç¬¬ä¸€è½®å¯¹è¯</span>
        <span class="hljs-type">Msg</span> <span class="hljs-variable">msg1</span> <span class="hljs-operator">=</span> Msg.builder().textContent(<span class="hljs-string">"æˆ‘å«ææ˜ï¼Œä»Šå¹´28å²"</span>).build();
        agent.call(msg1).block();
        
        <span class="hljs-comment">// ç¬¬äºŒè½®å¯¹è¯ï¼ˆAgentèƒ½è®°ä½å‰é¢çš„ä¿¡æ¯ï¼‰</span>
        <span class="hljs-type">Msg</span> <span class="hljs-variable">msg2</span> <span class="hljs-operator">=</span> Msg.builder().textContent(<span class="hljs-string">"æˆ‘çš„åå­—æ˜¯ä»€ä¹ˆï¼Ÿ"</span>).build();
        <span class="hljs-type">Msg</span> <span class="hljs-variable">response2</span> <span class="hljs-operator">=</span> agent.call(msg2).block();
        
        System.out.println(response2.getTextContent());
        <span class="hljs-comment">// è¾“å‡ºï¼šæ‚¨çš„åå­—æ˜¯ææ˜ã€‚</span>
        
        <span class="hljs-comment">// æ‰¹é‡å¤„ç†å¤šæ¡æ¶ˆæ¯</span>
        List&lt;Msg&gt; messages = List.of(
            Msg.builder().role(MsgRole.USER).textContent(<span class="hljs-string">"ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"</span>).build(),
            Msg.builder().role(MsgRole.ASSISTANT).textContent(<span class="hljs-string">"ä»Šå¤©å¤©æ°”æ™´æœ—ã€‚"</span>).build(),
            Msg.builder().role(MsgRole.USER).textContent(<span class="hljs-string">"é€‚åˆæˆ·å¤–è¿åŠ¨å—ï¼Ÿ"</span>).build()
        );
        
        <span class="hljs-type">Msg</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> agent.call(messages).block();
        <span class="hljs-comment">// AgentåŸºäºå®Œæ•´ä¸Šä¸‹æ–‡å›å¤</span>
    }
}
</code></pre>
<h3 data-id="heading-10">4.2.3 åœºæ™¯3ï¼šç»“æ„åŒ–è¾“å‡º</h3>
<p>è¿™æ˜¯Agentæ¥å£çš„å¼ºå¤§ç‰¹æ€§ä¹‹ä¸€ï¼šè¦æ±‚Agentç”Ÿæˆç¬¦åˆç‰¹å®šç»“æ„çš„æ•°æ®ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> lombok.Data;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StructuredOutputExample</span> {
    
    <span class="hljs-comment">// å®šä¹‰æœŸæœ›çš„è¾“å‡ºç»“æ„</span>
    <span class="hljs-meta">@Data</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserProfile</span> {
        <span class="hljs-keyword">private</span> String name;
        <span class="hljs-keyword">private</span> Integer age;
        <span class="hljs-keyword">private</span> String email;
        <span class="hljs-keyword">private</span> String phone;
        <span class="hljs-keyword">private</span> String city;
    }
    
    <span class="hljs-meta">@Data</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductReview</span> {
        <span class="hljs-keyword">private</span> String productName;
        <span class="hljs-keyword">private</span> Integer rating;  <span class="hljs-comment">// 1-5æ˜Ÿ</span>
        <span class="hljs-keyword">private</span> List&lt;String&gt; pros;  <span class="hljs-comment">// ä¼˜ç‚¹</span>
        <span class="hljs-keyword">private</span> List&lt;String&gt; cons;  <span class="hljs-comment">// ç¼ºç‚¹</span>
        <span class="hljs-keyword">private</span> String summary;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
            .name(<span class="hljs-string">"StructuredAgent"</span>)
            .model(model)
            .build();
        
        <span class="hljs-comment">// åœºæ™¯1ï¼šæå–ç”¨æˆ·ä¿¡æ¯</span>
        <span class="hljs-type">Msg</span> <span class="hljs-variable">userInfoMsg</span> <span class="hljs-operator">=</span> Msg.builder()
            .textContent(<span class="hljs-string">"æˆ‘å«å¼ ä¸‰ï¼Œ28å²ï¼Œé‚®ç®±æ˜¯zhangsan@example.comï¼Œ"</span> +
                        <span class="hljs-string">"æ‰‹æœº13800138000ï¼Œä½åœ¨åŒ—äº¬"</span>)
            .build();
        
        <span class="hljs-type">Msg</span> <span class="hljs-variable">response1</span> <span class="hljs-operator">=</span> agent.call(userInfoMsg, UserProfile.class).block();
        
        <span class="hljs-keyword">if</span> (response1.hasStructuredData()) {
            <span class="hljs-type">UserProfile</span> <span class="hljs-variable">profile</span> <span class="hljs-operator">=</span> response1.getStructuredData(UserProfile.class);
            System.out.println(<span class="hljs-string">"å§“å: "</span> + profile.getName());
            System.out.println(<span class="hljs-string">"å¹´é¾„: "</span> + profile.getAge());
            System.out.println(<span class="hljs-string">"é‚®ç®±: "</span> + profile.getEmail());
            System.out.println(<span class="hljs-string">"æ‰‹æœº: "</span> + profile.getPhone());
            System.out.println(<span class="hljs-string">"åŸå¸‚: "</span> + profile.getCity());
        }
        
        <span class="hljs-comment">// åœºæ™¯2ï¼šåˆ†æäº§å“è¯„è®º</span>
        <span class="hljs-type">Msg</span> <span class="hljs-variable">reviewMsg</span> <span class="hljs-operator">=</span> Msg.builder()
            .textContent(<span class="hljs-string">"è¿™æ¬¾iPhone 15 Proå¾ˆä¸é”™ï¼Œæ€§èƒ½å¼ºåŠ²ï¼Œæ‹ç…§æ•ˆæœå¥½ï¼Œ"</span> +
                        <span class="hljs-string">"ä½†æ˜¯ä»·æ ¼åè´µï¼Œç”µæ± ç»­èˆªä¸€èˆ¬ã€‚æ€»ä½“æ¥è¯´å€¼å¾—è´­ä¹°ã€‚"</span>)
            .build();
        
        <span class="hljs-type">Msg</span> <span class="hljs-variable">response2</span> <span class="hljs-operator">=</span> agent.call(reviewMsg, ProductReview.class).block();
        
        <span class="hljs-keyword">if</span> (response2.hasStructuredData()) {
            <span class="hljs-type">ProductReview</span> <span class="hljs-variable">review</span> <span class="hljs-operator">=</span> response2.getStructuredData(ProductReview.class);
            System.out.println(<span class="hljs-string">"äº§å“: "</span> + review.getProductName());
            System.out.println(<span class="hljs-string">"è¯„åˆ†: "</span> + review.getRating() + <span class="hljs-string">"æ˜Ÿ"</span>);
            System.out.println(<span class="hljs-string">"ä¼˜ç‚¹: "</span> + String.join(<span class="hljs-string">", "</span>, review.getPros()));
            System.out.println(<span class="hljs-string">"ç¼ºç‚¹: "</span> + String.join(<span class="hljs-string">", "</span>, review.getCons()));
            System.out.println(<span class="hljs-string">"æ€»ç»“: "</span> + review.getSummary());
        }
    }
}
</code></pre>
<p><strong>è¾“å‡ºç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">å§“å: å¼ ä¸‰</span>
<span class="hljs-section">å¹´é¾„: 28</span>
<span class="hljs-section">é‚®ç®±: zhangsan@example.com</span>
<span class="hljs-section">æ‰‹æœº: 13800138000</span>
<span class="hljs-section">åŸå¸‚: åŒ—äº¬</span>

<span class="hljs-section">äº§å“: iPhone 15 Pro</span>
<span class="hljs-section">è¯„åˆ†: 4æ˜Ÿ</span>
<span class="hljs-section">ä¼˜ç‚¹: æ€§èƒ½å¼ºåŠ², æ‹ç…§æ•ˆæœå¥½</span>
<span class="hljs-section">ç¼ºç‚¹: ä»·æ ¼åè´µ, ç”µæ± ç»­èˆªä¸€èˆ¬</span>
<span class="hljs-section">æ€»ç»“: æ€»ä½“æ¥è¯´å€¼å¾—è´­ä¹°</span>
</code></pre>
<h3 data-id="heading-11">4.2.4 åœºæ™¯4ï¼šæ— è¾“å…¥ç»­å†™</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ContinuationExample</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
            .name(<span class="hljs-string">"WriterAgent"</span>)
            .model(model)
            .sysPrompt(<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªåˆ›æ„å†™ä½œåŠ©æ‰‹ã€‚"</span>)
            .build();
        
        <span class="hljs-comment">// ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼šå¼€å§‹åˆ›ä½œ</span>
        <span class="hljs-type">Msg</span> <span class="hljs-variable">msg1</span> <span class="hljs-operator">=</span> Msg.builder()
            .textContent(<span class="hljs-string">"è¯·å†™ä¸€ä¸ªç§‘å¹»å°è¯´çš„å¼€å¤´"</span>)
            .build();
        
        <span class="hljs-type">Msg</span> <span class="hljs-variable">response1</span> <span class="hljs-operator">=</span> agent.call(msg1).block();
        System.out.println(<span class="hljs-string">"ç¬¬ä¸€æ®µ:\n"</span> + response1.getTextContent());
        
        <span class="hljs-comment">// ç¬¬äºŒæ¬¡è°ƒç”¨ï¼šç»§ç»­åˆ›ä½œï¼ˆæ— æ–°è¾“å…¥ï¼‰</span>
        <span class="hljs-type">Msg</span> <span class="hljs-variable">response2</span> <span class="hljs-operator">=</span> agent.call().block();
        System.out.println(<span class="hljs-string">"\nç¬¬äºŒæ®µ:\n"</span> + response2.getTextContent());
        
        <span class="hljs-comment">// ç¬¬ä¸‰æ¬¡è°ƒç”¨ï¼šç»§ç»­</span>
        <span class="hljs-type">Msg</span> <span class="hljs-variable">response3</span> <span class="hljs-operator">=</span> agent.call().block();
        System.out.println(<span class="hljs-string">"\nç¬¬ä¸‰æ®µ:\n"</span> + response3.getTextContent());
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-12">4.3 AgentBase åŸºç¡€å®ç°</h2>
<h3 data-id="heading-13">4.3.1 AgentBaseçš„æ¶æ„è®¾è®¡</h3>
<p>AgentBaseæ˜¯Agentæ¥å£çš„æŠ½è±¡åŸºç±»ï¼Œæä¾›äº†å¤§é‡é€šç”¨åŠŸèƒ½ï¼Œè®©å¼€å‘è€…å¯ä»¥ä¸“æ³¨äºæ ¸å¿ƒé€»è¾‘ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> io.agentscope.core.agent;

<span class="hljs-keyword">import</span> io.agentscope.core.hook.Hook;
<span class="hljs-keyword">import</span> io.agentscope.core.message.Msg;
<span class="hljs-keyword">import</span> io.agentscope.core.state.StateModule;
<span class="hljs-keyword">import</span> reactor.core.publisher.Mono;

<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AgentBase</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Agent</span> {
    
    <span class="hljs-comment">// ============ æ ¸å¿ƒçŠ¶æ€ ============</span>
    
    <span class="hljs-comment">/**
     * Agentçš„å”¯ä¸€æ ‡è¯†
     * è‡ªåŠ¨ç”Ÿæˆçš„UUID
     */</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> String agentId;
    
    <span class="hljs-comment">/**
     * Agentçš„åç§°
     * ç”¨äºæ—¥å¿—å’Œå±•ç¤º
     */</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> String name;
    
    <span class="hljs-comment">/**
     * Agentçš„æè¿°
     * è¯´æ˜Agentçš„åŠŸèƒ½
     */</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> String description;
    
    <span class="hljs-comment">/**
     * Hookåˆ—è¡¨
     * ç”¨äºäº‹ä»¶æ‹¦æˆªå’Œå¢å¼º
     */</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> List&lt;Hook&gt; hooks;
    
    <span class="hljs-comment">/**
     * åµŒå¥—çš„çŠ¶æ€æ¨¡å—
     * ä¾‹å¦‚Memoryã€PlanNotebookç­‰
     * ç”¨äºä¼šè¯æŒä¹…åŒ–
     */</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> Map&lt;String, StateModule&gt; modules;
    
    <span class="hljs-comment">// ============ æ‰§è¡Œæ§åˆ¶ ============</span>
    
    <span class="hljs-comment">/**
     * æ ‡è®°Agentæ˜¯å¦æ­£åœ¨æ‰§è¡Œ
     */</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">isRunning</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
    
    <span class="hljs-comment">/**
     * æ˜¯å¦æ£€æŸ¥é‡å…¥è°ƒç”¨
     * é˜²æ­¢Agentè¢«é€’å½’è°ƒç”¨
     */</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">checkRunning</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
    
    <span class="hljs-comment">// ============ å­ç±»å®ç° ============</span>
    
    <span class="hljs-comment">/**
     * å­ç±»å¿…é¡»å®ç°ï¼šå¤„ç†æ¶ˆæ¯çš„æ ¸å¿ƒé€»è¾‘
     */</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> Mono&lt;Msg&gt; <span class="hljs-title function_">doCall</span><span class="hljs-params">(List&lt;Msg&gt; msgs)</span>;
    
    <span class="hljs-comment">/**
     * å­ç±»å¿…é¡»å®ç°ï¼šå¤„ç†ç»“æ„åŒ–è¾“å‡º
     */</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> Mono&lt;Msg&gt; <span class="hljs-title function_">doCall</span><span class="hljs-params">(List&lt;Msg&gt; msgs, Class&lt;?&gt; structuredOutputClass)</span>;
    
    <span class="hljs-comment">/**
     * å­ç±»å¿…é¡»å®ç°ï¼šè§‚å¯Ÿæ¶ˆæ¯
     */</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> Mono&lt;Void&gt; <span class="hljs-title function_">doObserve</span><span class="hljs-params">(Msg msg)</span>;
    
    <span class="hljs-comment">// ============ æ¨¡æ¿æ–¹æ³• ============</span>
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Mono&lt;Msg&gt; <span class="hljs-title function_">call</span><span class="hljs-params">(List&lt;Msg&gt; msgs)</span> {
        <span class="hljs-keyword">return</span> Mono.defer(() -&gt; {
            <span class="hljs-comment">// 1. é‡å…¥æ£€æŸ¥</span>
            <span class="hljs-keyword">if</span> (checkRunning &amp;&amp; isRunning) {
                <span class="hljs-keyword">return</span> Mono.error(<span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(
                    <span class="hljs-string">"Agent ["</span> + name + <span class="hljs-string">"] is already running. "</span> +
                    <span class="hljs-string">"Reentrant calls are not allowed."</span>));
            }
            
            <span class="hljs-comment">// 2. è®¾ç½®è¿è¡Œæ ‡å¿—</span>
            isRunning = <span class="hljs-literal">true</span>;
            
            <span class="hljs-comment">// 3. æ‰§è¡Œå®é™…é€»è¾‘</span>
            <span class="hljs-keyword">return</span> doCall(msgs)
                <span class="hljs-comment">// 4. æ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼Œéƒ½è¦é‡ç½®è¿è¡Œæ ‡å¿—</span>
                .doFinally(signal -&gt; isRunning = <span class="hljs-literal">false</span>);
        });
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Mono&lt;Msg&gt; <span class="hljs-title function_">call</span><span class="hljs-params">(List&lt;Msg&gt; msgs, Class&lt;?&gt; structuredModel)</span> {
        <span class="hljs-keyword">return</span> Mono.defer(() -&gt; {
            <span class="hljs-keyword">if</span> (checkRunning &amp;&amp; isRunning) {
                <span class="hljs-keyword">return</span> Mono.error(<span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(
                    <span class="hljs-string">"Agent ["</span> + name + <span class="hljs-string">"] is already running."</span>));
            }
            
            isRunning = <span class="hljs-literal">true</span>;
            
            <span class="hljs-keyword">return</span> doCall(msgs, structuredModel)
                .doFinally(signal -&gt; isRunning = <span class="hljs-literal">false</span>);
        });
    }
    
    <span class="hljs-comment">// ============ çŠ¶æ€ç®¡ç† ============</span>
    
    <span class="hljs-comment">/**
     * è·å–æ‰€æœ‰åµŒå¥—çš„çŠ¶æ€æ¨¡å—
     * ç”¨äºä¼šè¯æŒä¹…åŒ–
     */</span>
    <span class="hljs-keyword">public</span> Map&lt;String, StateModule&gt; <span class="hljs-title function_">getStateModules</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> modules;
    }
}
</code></pre>
<h3 data-id="heading-14">4.3.2 AgentBaseçš„æ ¸å¿ƒç‰¹æ€§</h3>
<h4 data-id="heading-15">ç‰¹æ€§1ï¼šHookç³»ç»Ÿé›†æˆ</h4>
<p>AgentBaseå†…ç½®äº†Hookç³»ç»Ÿæ”¯æŒï¼Œå¯ä»¥åœ¨Agentæ‰§è¡Œçš„å„ä¸ªé˜¶æ®µæ’å…¥è‡ªå®šä¹‰é€»è¾‘ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> io.agentscope.core.hook.Hook;
<span class="hljs-keyword">import</span> io.agentscope.core.hook.HookEvent;
<span class="hljs-keyword">import</span> io.agentscope.core.hook.PostReasoningEvent;
<span class="hljs-keyword">import</span> io.agentscope.core.hook.PreReasoningEvent;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HookIntegrationExample</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åˆ›å»ºè‡ªå®šä¹‰Hook</span>
        <span class="hljs-type">Hook</span> <span class="hljs-variable">loggingHook</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hook</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> &lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HookEvent</span>&gt; Mono&lt;T&gt; <span class="hljs-title function_">onEvent</span><span class="hljs-params">(T event)</span> {
                <span class="hljs-keyword">switch</span>(event) {
                    <span class="hljs-keyword">case</span> PreReasoningEvent pre -&gt; 
                        System.out.println(<span class="hljs-string">" å¼€å§‹æ¨ç†..."</span>);
                    <span class="hljs-keyword">case</span> PostReasoningEvent post -&gt; 
                        System.out.println(<span class="hljs-string">"âœ“ æ¨ç†å®Œæˆï¼Œè€—æ—¶: "</span> + post.getExecutionTime() + <span class="hljs-string">"ms"</span>);
                    <span class="hljs-keyword">default</span> -&gt; {}
                }
                <span class="hljs-keyword">return</span> Mono.just(event);
            }
        };
        
        <span class="hljs-comment">// æ€§èƒ½ç›‘æ§Hook</span>
        <span class="hljs-type">Hook</span> <span class="hljs-variable">performanceHook</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hook</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> &lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HookEvent</span>&gt; Mono&lt;T&gt; <span class="hljs-title function_">onEvent</span><span class="hljs-params">(T event)</span> {
                <span class="hljs-keyword">if</span> (event <span class="hljs-keyword">instanceof</span> PostReasoningEvent post) {
                    <span class="hljs-type">long</span> <span class="hljs-variable">duration</span> <span class="hljs-operator">=</span> post.getExecutionTime();
                    <span class="hljs-keyword">if</span> (duration &gt; <span class="hljs-number">5000</span>) {
                        System.err.println(<span class="hljs-string">"âš ï¸ æ¨ç†è€—æ—¶è¿‡é•¿: "</span> + duration + <span class="hljs-string">"ms"</span>);
                    }
                }
                <span class="hljs-keyword">return</span> Mono.just(event);
            }
        };
        
        <span class="hljs-comment">// åœ¨Agentä¸­æ³¨å†ŒHook</span>
        <span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
            .name(<span class="hljs-string">"MonitoredAgent"</span>)
            .model(model)
            .hooks(List.of(loggingHook, performanceHook))
            .build();
        
        <span class="hljs-comment">// Hookä¼šåœ¨Agentæ‰§è¡Œè¿‡ç¨‹ä¸­è‡ªåŠ¨è§¦å‘</span>
        agent.call(<span class="hljs-string">"è¯·åˆ†æä¸€ä¸‹å½“å‰çš„å¸‚åœºè¶‹åŠ¿"</span>).block();
    }
}
</code></pre>
<h4 data-id="heading-16">ç‰¹æ€§2ï¼šåµŒå¥—æ¨¡å—ç®¡ç†</h4>
<p>AgentBaseè‡ªåŠ¨ç®¡ç†Memoryã€PlanNotebookç­‰StateModuleï¼Œæ”¯æŒä¼šè¯æŒä¹…åŒ–ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> io.agentscope.core.memory.InMemoryMemory;
<span class="hljs-keyword">import</span> io.agentscope.core.plan.notebook.PlanNotebook;
<span class="hljs-keyword">import</span> io.agentscope.core.session.Session;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StateModuleExample</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åˆ›å»ºå¸¦æœ‰å¤šä¸ªçŠ¶æ€æ¨¡å—çš„Agent</span>
        <span class="hljs-type">InMemoryMemory</span> <span class="hljs-variable">memory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryMemory</span>();
        <span class="hljs-type">PlanNotebook</span> <span class="hljs-variable">planNotebook</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PlanNotebook</span>();
        
        <span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
            .name(<span class="hljs-string">"StatefulAgent"</span>)
            .model(model)
            .memory(memory)  <span class="hljs-comment">// è‡ªåŠ¨æ³¨å†Œä¸ºçŠ¶æ€æ¨¡å—</span>
            .withPlanNotebook()  <span class="hljs-comment">// è‡ªåŠ¨æ³¨å†Œä¸ºçŠ¶æ€æ¨¡å—</span>
            .build();
        
        <span class="hljs-comment">// ä½¿ç”¨Agent</span>
        agent.call(<span class="hljs-string">"è¯·åˆ¶å®šä¸€ä¸ªå¸‚åœºåˆ†æè®¡åˆ’"</span>).block();
        agent.call(<span class="hljs-string">"æ‰§è¡Œç¬¬ä¸€æ­¥ï¼šæ”¶é›†æ•°æ®"</span>).block();
        
        <span class="hljs-comment">// ä¿å­˜æ•´ä¸ªAgentçš„çŠ¶æ€</span>
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> Session.create();
        session.saveAgent(agent);
        
        <span class="hljs-comment">// ... ç¨‹åºé‡å¯å ...</span>
        
        <span class="hljs-comment">// æ¢å¤Agentçš„çŠ¶æ€</span>
        <span class="hljs-type">ReActAgent</span> <span class="hljs-variable">restoredAgent</span> <span class="hljs-operator">=</span> session.loadAgent(<span class="hljs-string">"StatefulAgent"</span>, ReActAgent.class);
        
        <span class="hljs-comment">// Agentçš„Memoryå’ŒPlanNotebookéƒ½å·²æ¢å¤</span>
        restoredAgent.call(<span class="hljs-string">"ç»§ç»­æ‰§è¡Œè®¡åˆ’"</span>).block();
    }
}
</code></pre>
<h4 data-id="heading-17">ç‰¹æ€§3ï¼šé‡å…¥æ£€æŸ¥</h4>
<p>é˜²æ­¢Agentè¢«é€’å½’è°ƒç”¨ï¼Œé¿å…æ½œåœ¨çš„æ­»é”å’Œèµ„æºè€—å°½ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReentrantCheckExample</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// å¯ç”¨é‡å…¥æ£€æŸ¥</span>
        <span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
            .name(<span class="hljs-string">"ProtectedAgent"</span>)
            .model(model)
            .checkRunning(<span class="hljs-literal">true</span>)  <span class="hljs-comment">// å¯ç”¨é‡å…¥æ£€æŸ¥</span>
            .build();
        
        <span class="hljs-comment">// åœºæ™¯1ï¼šæ­£å¸¸ä½¿ç”¨ï¼ˆæ²¡é—®é¢˜ï¼‰</span>
        agent.call(<span class="hljs-string">"é—®é¢˜1"</span>).block();
        agent.call(<span class="hljs-string">"é—®é¢˜2"</span>).block();  <span class="hljs-comment">// OKï¼Œå‰ä¸€ä¸ªè°ƒç”¨å·²å®Œæˆ</span>
        
        <span class="hljs-comment">// åœºæ™¯2ï¼šåµŒå¥—è°ƒç”¨ï¼ˆä¼šæŠ¥é”™ï¼‰</span>
        <span class="hljs-keyword">try</span> {
            agent.call(<span class="hljs-string">"å¤–å±‚é—®é¢˜"</span>)
                .flatMap(response -&gt; {
                    <span class="hljs-comment">// åœ¨å¤„ç†å“åº”æ—¶åˆè°ƒç”¨äº†åŒä¸€ä¸ªAgent</span>
                    <span class="hljs-keyword">return</span> agent.call(<span class="hljs-string">"å†…å±‚é—®é¢˜"</span>);  <span class="hljs-comment">// âŒ é”™è¯¯ï¼</span>
                })
                .block();
        } <span class="hljs-keyword">catch</span> (IllegalStateException e) {
            System.err.println(<span class="hljs-string">"é”™è¯¯: "</span> + e.getMessage());
            <span class="hljs-comment">// è¾“å‡º: Agent [ProtectedAgent] is already running. </span>
            <span class="hljs-comment">//       Reentrant calls are not allowed.</span>
        }
        
        <span class="hljs-comment">// åœºæ™¯3ï¼šç¦ç”¨é‡å…¥æ£€æŸ¥ï¼ˆå…è®¸åµŒå¥—è°ƒç”¨ï¼‰</span>
        <span class="hljs-type">ReActAgent</span> <span class="hljs-variable">flexibleAgent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
            .name(<span class="hljs-string">"FlexibleAgent"</span>)
            .model(model)
            .checkRunning(<span class="hljs-literal">false</span>)  <span class="hljs-comment">// ç¦ç”¨é‡å…¥æ£€æŸ¥</span>
            .build();
        
        <span class="hljs-comment">// è¿™æ ·å¯ä»¥å·¥ä½œï¼ˆä½†è¦å°å¿ƒæ­»é”ï¼‰</span>
        flexibleAgent.call(<span class="hljs-string">"å¤–å±‚é—®é¢˜"</span>)
            .flatMap(response -&gt; flexibleAgent.call(<span class="hljs-string">"å†…å±‚é—®é¢˜"</span>))
            .block();
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-18">4.4 æµå¼æ‰§è¡Œä¸äº‹ä»¶ç³»ç»Ÿ</h2>
<h3 data-id="heading-19">4.4.1 stream()æ–¹æ³•</h3>
<p>é™¤äº†call()æ–¹æ³•ï¼ŒAgentè¿˜æä¾›stream()æ–¹æ³•ï¼Œæ”¯æŒæµå¼è¾“å‡ºï¼Œå®æ—¶è·å–Agentçš„æ¨ç†è¿‡ç¨‹ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> io.agentscope.core.hook.*;
<span class="hljs-keyword">import</span> reactor.core.publisher.Flux;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamingExample</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ReActAgent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> ReActAgent.builder()
            .name(<span class="hljs-string">"StreamingAgent"</span>)
            .model(model)
            .toolkit(toolkit)
            .build();
        
        <span class="hljs-type">Msg</span> <span class="hljs-variable">userMsg</span> <span class="hljs-operator">=</span> Msg.builder()
            .textContent(<span class="hljs-string">"è¯·åˆ†æä¸€ä¸‹å½“å‰çš„ç»æµå½¢åŠ¿"</span>)
            .build();
        
        <span class="hljs-comment">// æ–¹å¼1ï¼šè®¢é˜…æ‰€æœ‰äº‹ä»¶</span>
        agent.stream(userMsg)
            .subscribe(
                event -&gt; handleEvent(event),  <span class="hljs-comment">// å¤„ç†æ¯ä¸ªäº‹ä»¶</span>
                error -&gt; System.err.println(<span class="hljs-string">"é”™è¯¯: "</span> + error),
                () -&gt; System.out.println(<span class="hljs-string">"\n[å®Œæˆ]"</span>)
            );
        
        <span class="hljs-comment">// æ–¹å¼2ï¼šåªå…³å¿ƒæ¨ç†å†…å®¹</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">fullText</span> <span class="hljs-operator">=</span> agent.stream(userMsg)
            .filter(event -&gt; event <span class="hljs-keyword">instanceof</span> ReasoningChunkEvent)
            .map(event -&gt; ((ReasoningChunkEvent) event).getDelta())
            .collect(Collectors.joining())
            .block();
        
        System.out.println(<span class="hljs-string">"å®Œæ•´å†…å®¹: "</span> + fullText);
        
        <span class="hljs-comment">// æ–¹å¼3ï¼šå®æ—¶æ›´æ–°UI</span>
        agent.stream(userMsg)
            .doOnNext(event -&gt; {
                <span class="hljs-keyword">if</span> (event <span class="hljs-keyword">instanceof</span> ReasoningChunkEvent chunk) {
                    updateUI(chunk.getDelta());  <span class="hljs-comment">// å®æ—¶æ›´æ–°UIç»„ä»¶</span>
                }
            })
            .subscribe();
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleEvent</span><span class="hljs-params">(HookEvent event)</span> {
        <span class="hljs-keyword">switch</span>(event) {
            <span class="hljs-keyword">case</span> PreReasoningEvent pre -&gt; 
                System.out.println(<span class="hljs-string">"ğŸ¤” å¼€å§‹æ€è€ƒ..."</span>);
            
            <span class="hljs-keyword">case</span> ReasoningChunkEvent chunk -&gt; 
                System.out.print(chunk.getDelta());  <span class="hljs-comment">// å®æ—¶æ‰“å°æ¨ç†å†…å®¹</span>
            
            <span class="hljs-keyword">case</span> PostReasoningEvent post -&gt; 
                System.out.println(<span class="hljs-string">"\nâœ“ æ€è€ƒå®Œæˆ"</span>);
            
            <span class="hljs-keyword">case</span> PreActingEvent pre -&gt; 
                System.out.println(<span class="hljs-string">"ğŸ”§ å¼€å§‹æ‰§è¡Œå·¥å…·: "</span> + pre.getToolName());
            
            <span class="hljs-keyword">case</span> ActingChunkEvent chunk -&gt; 
                System.out.print(<span class="hljs-string">"âš™ï¸ "</span> + chunk.getDelta());
            
            <span class="hljs-keyword">case</span> PostActingEvent post -&gt; 
                System.out.println(<span class="hljs-string">"\nâœ“ å·¥å…·æ‰§è¡Œå®Œæˆ"</span>);
            
            <span class="hljs-keyword">default</span> -&gt; {}
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateUI</span><span class="hljs-params">(String delta)</span> {
        <span class="hljs-comment">// åœ¨JavaFXæˆ–Swingä¸­æ›´æ–°UI</span>
        Platform.runLater(() -&gt; textArea.appendText(delta));
    }
}
</code></pre>
<h3 data-id="heading-20">4.4.2 äº‹ä»¶ç±»å‹è¯¦è§£</h3>
<p>Agentåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šå‘å‡ºå¤šç§äº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶æ„æˆäº†å®Œæ•´çš„æ‰§è¡Œç”Ÿå‘½å‘¨æœŸã€‚</p>
<pre><code class="hljs language-ini" lang="ini">Agentæ‰§è¡Œç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼š

ç¬¬Nè½®æ¨ç†-è¡ŒåŠ¨å¾ªç¯ï¼š
â”œâ”€ PreReasoningEvent       <span class="hljs-comment"># æ¨ç†å¼€å§‹å‰</span>
â”œâ”€ ReasoningChunkEvent     <span class="hljs-comment"># æ¨ç†å†…å®¹æµï¼ˆå¤šæ¬¡ï¼‰</span>
â”œâ”€ PostReasoningEvent      <span class="hljs-comment"># æ¨ç†å®Œæˆå</span>
â”‚
â”œâ”€ PreActingEvent          <span class="hljs-comment"># è¡ŒåŠ¨å¼€å§‹å‰ï¼ˆå¦‚æœæœ‰å·¥å…·è°ƒç”¨ï¼‰</span>
â”œâ”€ ActingChunkEvent        <span class="hljs-comment"># è¡ŒåŠ¨å†…å®¹æµï¼ˆå¤šæ¬¡ï¼‰</span>
â”œâ”€ PostActingEvent         <span class="hljs-comment"># è¡ŒåŠ¨å®Œæˆå</span>
â”‚
â””â”€ <span class="hljs-section">[å¾ªç¯æˆ–ç»“æŸ]</span>
</code></pre>
<p><strong>äº‹ä»¶å¯¹è±¡çš„å±æ€§</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// PreReasoningEvent - æ¨ç†å‰äº‹ä»¶</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PreReasoningEvent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HookEvent</span> {
    <span class="hljs-keyword">private</span> List&lt;Msg&gt; inputMessages;      <span class="hljs-comment">// è¾“å…¥æ¶ˆæ¯</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> iterationCount;           <span class="hljs-comment">// å½“å‰æ˜¯ç¬¬å‡ è½®æ¨ç†</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> timestamp;               <span class="hljs-comment">// æ—¶é—´æˆ³</span>
}

<span class="hljs-comment">// ReasoningChunkEvent - æ¨ç†å†…å®¹æµ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReasoningChunkEvent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HookEvent</span> {
    <span class="hljs-keyword">private</span> String delta;                 <span class="hljs-comment">// å¢é‡æ–‡æœ¬</span>
    <span class="hljs-keyword">private</span> ContentBlock contentBlock;    <span class="hljs-comment">// å†…å®¹å—ï¼ˆå¯èƒ½åŒ…å«å·¥å…·è°ƒç”¨ï¼‰</span>
}

<span class="hljs-comment">// PostReasoningEvent - æ¨ç†åäº‹ä»¶</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PostReasoningEvent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HookEvent</span> {
    <span class="hljs-keyword">private</span> Msg outputMessage;            <span class="hljs-comment">// è¾“å‡ºæ¶ˆæ¯</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> executionTime;           <span class="hljs-comment">// æ‰§è¡Œè€—æ—¶ï¼ˆæ¯«ç§’ï¼‰</span>
    <span class="hljs-keyword">private</span> ChatUsage usage;              <span class="hljs-comment">// Tokenä½¿ç”¨æƒ…å†µ</span>
}

<span class="hljs-comment">// PreActingEvent - è¡ŒåŠ¨å‰äº‹ä»¶</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PreActingEvent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HookEvent</span> {
    <span class="hljs-keyword">private</span> String toolName;              <span class="hljs-comment">// å·¥å…·åç§°</span>
    <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; toolArgs; <span class="hljs-comment">// å·¥å…·å‚æ•°</span>
}

<span class="hljs-comment">// ActingChunkEvent - è¡ŒåŠ¨å†…å®¹æµ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ActingChunkEvent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HookEvent</span> {
    <span class="hljs-keyword">private</span> String delta;                 <span class="hljs-comment">// å¢é‡å†…å®¹</span>
}

<span class="hljs-comment">// PostActingEvent - è¡ŒåŠ¨åäº‹ä»¶</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PostActingEvent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HookEvent</span> {
    <span class="hljs-keyword">private</span> String toolName;              <span class="hljs-comment">// å·¥å…·åç§°</span>
    <span class="hljs-keyword">private</span> String toolResult;            <span class="hljs-comment">// å·¥å…·æ‰§è¡Œç»“æœ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> isError;              <span class="hljs-comment">// æ˜¯å¦å‡ºé”™</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> executionTime;           <span class="hljs-comment">// æ‰§è¡Œè€—æ—¶</span>
}
</code></pre>
<hr/>
<h2 data-id="heading-21">4.5 ç”Ÿäº§åœºæ™¯ï¼šæ„å»ºæ™ºèƒ½å®¢æœç³»ç»Ÿ</h2>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„ç”Ÿäº§çº§ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨Agentæ¥å£æ„å»ºä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„æ™ºèƒ½å®¢æœç³»ç»Ÿã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> io.agentscope.core.ReActAgent;
<span class="hljs-keyword">import</span> io.agentscope.core.agent.Agent;
<span class="hljs-keyword">import</span> io.agentscope.core.hook.Hook;
<span class="hljs-keyword">import</span> io.agentscope.core.hook.HookEvent;
<span class="hljs-keyword">import</span> io.agentscope.core.hook.PostActingEvent;
<span class="hljs-keyword">import</span> io.agentscope.core.hook.PostReasoningEvent;
<span class="hljs-keyword">import</span> io.agentscope.core.memory.InMemoryMemory;
<span class="hljs-keyword">import</span> io.agentscope.core.message.Msg;
<span class="hljs-keyword">import</span> io.agentscope.core.model.DashScopeChatModel;
<span class="hljs-keyword">import</span> io.agentscope.core.tool.Toolkit;
<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> reactor.core.publisher.Mono;

<span class="hljs-keyword">import</span> java.time.Duration;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.concurrent.ConcurrentHashMap;
<span class="hljs-keyword">import</span> java.util.concurrent.atomic.AtomicLong;

<span class="hljs-comment">/**
 * ç”Ÿäº§çº§æ™ºèƒ½å®¢æœç³»ç»Ÿ
 * 
 * åŠŸèƒ½ï¼š
 * 1. å¤šç”¨æˆ·å¹¶å‘æ”¯æŒ
 * 2. ä¼šè¯ç®¡ç†
 * 3. æ€§èƒ½ç›‘æ§
 * 4. æ—¥å¿—è®°å½•
 * 5. å¼‚å¸¸å¤„ç†
 * 6. è¶…æ—¶æ§åˆ¶
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomerServiceSystem</span> {
    
    <span class="hljs-comment">// ============ ç³»ç»Ÿç»„ä»¶ ============</span>
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ConcurrentHashMap&lt;String, Agent&gt; userAgents = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">PerformanceMonitor</span> <span class="hljs-variable">monitor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceMonitor</span>();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Model model;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Toolkit toolkit;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CustomerServiceSystem</span><span class="hljs-params">(String apiKey)</span> {
        <span class="hljs-comment">// åˆå§‹åŒ–Model</span>
        <span class="hljs-built_in">this</span>.model = DashScopeChatModel.builder()
            .apiKey(apiKey)
            .modelName(<span class="hljs-string">"qwen-plus"</span>)
            .generateOptions(GenerateOptions.builder()
                .temperature(<span class="hljs-number">0.7</span>)
                .maxTokens(<span class="hljs-number">2000</span>)
                .build())
            .build();
        
        <span class="hljs-comment">// åˆå§‹åŒ–Toolkit</span>
        <span class="hljs-built_in">this</span>.toolkit = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Toolkit</span>();
        toolkit.registerObject(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomerServiceTools</span>());
    }
    
    <span class="hljs-comment">// ============ æ ¸å¿ƒæ–¹æ³• ============</span>
    
    <span class="hljs-comment">/**
     * ä¸ºç”¨æˆ·åˆ›å»ºæˆ–è·å–Agent
     */</span>
    <span class="hljs-keyword">public</span> Agent <span class="hljs-title function_">getOrCreateAgentForUser</span><span class="hljs-params">(String userId)</span> {
        <span class="hljs-keyword">return</span> userAgents.computeIfAbsent(userId, id -&gt; createCustomerServiceAgent(id));
    }
    
    <span class="hljs-comment">/**
     * åˆ›å»ºå®¢æœAgent
     */</span>
    <span class="hljs-keyword">private</span> Agent <span class="hljs-title function_">createCustomerServiceAgent</span><span class="hljs-params">(String userId)</span> {
        <span class="hljs-keyword">return</span> ReActAgent.builder()
            .name(<span class="hljs-string">"CustomerService-"</span> + userId)
            .description(<span class="hljs-string">"ä¸ºç”¨æˆ· "</span> + userId + <span class="hljs-string">" æœåŠ¡çš„æ™ºèƒ½å®¢æœ"</span>)
            .model(model)
            .toolkit(toolkit)
            .memory(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InMemoryMemory</span>())
            .sysPrompt(buildSystemPrompt())
            .maxIters(<span class="hljs-number">8</span>)
            .checkRunning(<span class="hljs-literal">true</span>)
            .hooks(List.of(
                createLoggingHook(userId),
                createMonitoringHook(userId)
            ))
            .build();
    }
    
    <span class="hljs-comment">/**
     * å¤„ç†ç”¨æˆ·è¯·æ±‚
     */</span>
    <span class="hljs-keyword">public</span> Mono&lt;CustomerServiceResponse&gt; <span class="hljs-title function_">handleUserRequest</span><span class="hljs-params">(
            String userId, 
            String message)</span> {
        
        <span class="hljs-type">Agent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> getOrCreateAgentForUser(userId);
        
        <span class="hljs-type">Msg</span> <span class="hljs-variable">userMsg</span> <span class="hljs-operator">=</span> Msg.builder()
            .textContent(message)
            .metadata(<span class="hljs-string">"userId"</span>, userId)
            .metadata(<span class="hljs-string">"timestamp"</span>, System.currentTimeMillis())
            .build();
        
        <span class="hljs-keyword">return</span> agent.call(userMsg)
            .timeout(Duration.ofSeconds(<span class="hljs-number">30</span>))  <span class="hljs-comment">// 30ç§’è¶…æ—¶</span>
            .map(response -&gt; CustomerServiceResponse.builder()
                .userId(userId)
                .message(response.getTextContent())
                .timestamp(System.currentTimeMillis())
                .usage(response.getChatUsage())
                .build())
            .doOnError(error -&gt; handleError(userId, error))
            .onErrorResume(error -&gt; Mono.just(
                CustomerServiceResponse.builder()
                    .userId(userId)
                    .message(<span class="hljs-string">"æŠ±æ­‰ï¼Œç³»ç»Ÿæš‚æ—¶æ— æ³•å¤„ç†æ‚¨çš„è¯·æ±‚ï¼Œè¯·ç¨åå†è¯•ã€‚"</span>)
                    .isError(<span class="hljs-literal">true</span>)
                    .build()));
    }
    
    <span class="hljs-comment">/**
     * ç»“æ„åŒ–æŸ¥è¯¢ï¼ˆç”¨äºè·å–è®¢å•ä¿¡æ¯ç­‰ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> &lt;T&gt; Mono&lt;T&gt; <span class="hljs-title function_">handleStructuredQuery</span><span class="hljs-params">(
            String userId, 
            String message, 
            Class&lt;T&gt; responseType)</span> {
        
        <span class="hljs-type">Agent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> getOrCreateAgentForUser(userId);
        
        <span class="hljs-type">Msg</span> <span class="hljs-variable">userMsg</span> <span class="hljs-operator">=</span> Msg.builder()
            .textContent(message)
            .build();
        
        <span class="hljs-keyword">return</span> agent.call(userMsg, responseType)
            .timeout(Duration.ofSeconds(<span class="hljs-number">30</span>))
            .map(response -&gt; response.getStructuredData(responseType));
    }
    
    <span class="hljs-comment">/**
     * æ¸…ç†ç”¨æˆ·ä¼šè¯
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cleanupUserSession</span><span class="hljs-params">(String userId)</span> {
        <span class="hljs-type">Agent</span> <span class="hljs-variable">agent</span> <span class="hljs-operator">=</span> userAgents.remove(userId);
        <span class="hljs-keyword">if</span> (agent != <span class="hljs-literal">null</span>) {
            System.out.println(<span class="hljs-string">"æ¸…ç†ç”¨æˆ·ä¼šè¯: "</span> + userId);
        }
    }
    
    <span class="hljs-comment">// ============ Hookå®ç° ============</span>
    
    <span class="hljs-comment">/**
     * åˆ›å»ºæ—¥å¿—Hook
     */</span>
    <span class="hljs-keyword">private</span> Hook <span class="hljs-title function_">createLoggingHook</span><span class="hljs-params">(String userId)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hook</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> &lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HookEvent</span>&gt; Mono&lt;T&gt; <span class="hljs-title function_">onEvent</span><span class="hljs-params">(T event)</span> {
                <span class="hljs-keyword">switch</span>(event) {
                    <span class="hljs-keyword">case</span> PostReasoningEvent post -&gt; 
                        System.out.printf(<span class="hljs-string">"[%s] æ¨ç†å®Œæˆï¼Œè€—æ—¶: %dms, Tokens: %d%n"</span>,
                            userId, post.getExecutionTime(), 
                            post.getUsage() != <span class="hljs-literal">null</span> ? post.getUsage().getTotalTokens() : <span class="hljs-number">0</span>);
                    
                    <span class="hljs-keyword">case</span> PostActingEvent post -&gt; 
                        System.out.printf(<span class="hljs-string">"[%s] å·¥å…·æ‰§è¡Œ: %s, è€—æ—¶: %dms%n"</span>,
                            userId, post.getToolName(), post.getExecutionTime());
                    
                    <span class="hljs-keyword">default</span> -&gt; {}
                }
                <span class="hljs-keyword">return</span> Mono.just(event);
            }
        };
    }
    
    <span class="hljs-comment">/**
     * åˆ›å»ºç›‘æ§Hook
     */</span>
    <span class="hljs-keyword">private</span> Hook <span class="hljs-title function_">createMonitoringHook</span><span class="hljs-params">(String userId)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hook</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> &lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HookEvent</span>&gt; Mono&lt;T&gt; <span class="hljs-title function_">onEvent</span><span class="hljs-params">(T event)</span> {
                <span class="hljs-keyword">switch</span>(event) {
                    <span class="hljs-keyword">case</span> PostReasoningEvent post -&gt; {
                        monitor.recordReasoningTime(post.getExecutionTime());
                        <span class="hljs-keyword">if</span> (post.getUsage() != <span class="hljs-literal">null</span>) {
                            monitor.recordTokenUsage(post.getUsage().getTotalTokens());
                        }
                    }
                    <span class="hljs-keyword">case</span> PostActingEvent post -&gt; {
                        monitor.recordToolExecution(post.getToolName(), post.getExecutionTime());
                    }
                    <span class="hljs-keyword">default</span> -&gt; {}
                }
                <span class="hljs-keyword">return</span> Mono.just(event);
            }
        };
    }
    
    <span class="hljs-comment">/**
     * ç³»ç»Ÿæç¤ºè¯
     */</span>
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">buildSystemPrompt</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"""
            ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ™ºèƒ½å®¢æœåŠ©æ‰‹ã€‚
            
            å·¥ä½œåŸåˆ™ï¼š
            1. å‹å¥½ã€è€å¿ƒã€ä¸“ä¸š
            2. ä¼˜å…ˆä½¿ç”¨å·¥å…·æŸ¥è¯¢å‡†ç¡®ä¿¡æ¯ï¼Œä¸è¦çŒœæµ‹
            3. å¦‚æœæ— æ³•è§£å†³é—®é¢˜ï¼ŒåŠæ—¶è½¬äººå·¥å®¢æœ
            4. ä¿æŠ¤ç”¨æˆ·éšç§ï¼Œä¸æ³„éœ²æ•æ„Ÿä¿¡æ¯
            5. æ¯æ¬¡å›å¤è¦ç®€æ´æ˜äº†
            
            å¯ç”¨å·¥å…·ï¼š
            - search_faq: æœç´¢å¸¸è§é—®é¢˜
            - query_order: æŸ¥è¯¢è®¢å•çŠ¶æ€
            - process_return: å¤„ç†é€€è´§è¯·æ±‚
            - escalate_to_human: è½¬äººå·¥å®¢æœ
            """</span>;
    }
    
    <span class="hljs-comment">/**
     * é”™è¯¯å¤„ç†
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleError</span><span class="hljs-params">(String userId, Throwable error)</span> {
        System.err.printf(<span class="hljs-string">"[%s] é”™è¯¯: %s%n"</span>, userId, error.getMessage());
        monitor.recordError();
    }
    
    <span class="hljs-comment">/**
     * è·å–ç³»ç»Ÿç»Ÿè®¡
     */</span>
    <span class="hljs-keyword">public</span> PerformanceStats <span class="hljs-title function_">getStats</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> monitor.getStats();
    }
    
    <span class="hljs-comment">// ============ æ•°æ®ç±» ============</span>
    
    <span class="hljs-meta">@Data</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomerServiceResponse</span> {
        <span class="hljs-keyword">private</span> String userId;
        <span class="hljs-keyword">private</span> String message;
        <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> timestamp;
        <span class="hljs-keyword">private</span> ChatUsage usage;
        <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> isError;
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> CustomerServiceResponseBuilder <span class="hljs-title function_">builder</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomerServiceResponseBuilder</span>();
        }
    }
    
    <span class="hljs-comment">// ============ æ€§èƒ½ç›‘æ§ ============</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceMonitor</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">totalReasoningTime</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">totalTokens</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">errorCount</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>);
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ConcurrentHashMap&lt;String, AtomicLong&gt; toolUsage = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recordReasoningTime</span><span class="hljs-params">(<span class="hljs-type">long</span> ms)</span> {
            totalReasoningTime.addAndGet(ms);
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recordTokenUsage</span><span class="hljs-params">(<span class="hljs-type">long</span> tokens)</span> {
            totalTokens.addAndGet(tokens);
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recordToolExecution</span><span class="hljs-params">(String toolName, <span class="hljs-type">long</span> ms)</span> {
            toolUsage.computeIfAbsent(toolName, k -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>)).incrementAndGet();
        }
        
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recordError</span><span class="hljs-params">()</span> {
            errorCount.incrementAndGet();
        }
        
        <span class="hljs-keyword">public</span> PerformanceStats <span class="hljs-title function_">getStats</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceStats</span>(
                totalReasoningTime.get(),
                totalTokens.get(),
                errorCount.get(),
                toolUsage
            );
        }
    }
    
    <span class="hljs-meta">@Data</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceStats</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> totalReasoningTime;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> totalTokens;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> errorCount;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, AtomicLong&gt; toolUsage;
    }
    
    <span class="hljs-comment">// ============ ä½¿ç”¨ç¤ºä¾‹ ============</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">CustomerServiceSystem</span> <span class="hljs-variable">system</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomerServiceSystem</span>(
            System.getenv(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>));
        
        <span class="hljs-comment">// åœºæ™¯1ï¼šå¤„ç†ç”¨æˆ·è¯·æ±‚</span>
        system.handleUserRequest(<span class="hljs-string">"user123"</span>, <span class="hljs-string">"æˆ‘çš„è®¢å•ä»€ä¹ˆæ—¶å€™å‘è´§ï¼Ÿ"</span>)
            .subscribe(response -&gt; {
                System.out.println(<span class="hljs-string">"å®¢æœå›å¤: "</span> + response.getMessage());
                System.out.println(<span class="hljs-string">"Tokenä½¿ç”¨: "</span> + response.getUsage().getTotalTokens());
            });
        
        <span class="hljs-comment">// åœºæ™¯2ï¼šç»“æ„åŒ–æŸ¥è¯¢è®¢å•ä¿¡æ¯</span>
        <span class="hljs-meta">@Data</span>
        <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderInfo</span> {
            <span class="hljs-keyword">private</span> String orderId;
            <span class="hljs-keyword">private</span> String status;
            <span class="hljs-keyword">private</span> String trackingNumber;
        }
        
        system.handleStructuredQuery(<span class="hljs-string">"user123"</span>, 
                <span class="hljs-string">"æŸ¥è¯¢è®¢å•ORD-2024-001çš„ä¿¡æ¯"</span>, 
                OrderInfo.class)
            .subscribe(orderInfo -&gt; {
                System.out.println(<span class="hljs-string">"è®¢å•ID: "</span> + orderInfo.getOrderId());
                System.out.println(<span class="hljs-string">"çŠ¶æ€: "</span> + orderInfo.getStatus());
                System.out.println(<span class="hljs-string">"ç‰©æµå•å·: "</span> + orderInfo.getTrackingNumber());
            });
        
        <span class="hljs-comment">// åœºæ™¯3ï¼šæ¸…ç†ä¼šè¯</span>
        system.cleanupUserSession(<span class="hljs-string">"user123"</span>);
        
        <span class="hljs-comment">// åœºæ™¯4ï¼šæŸ¥çœ‹ç»Ÿè®¡</span>
        <span class="hljs-type">PerformanceStats</span> <span class="hljs-variable">stats</span> <span class="hljs-operator">=</span> system.getStats();
        System.out.println(<span class="hljs-string">"æ€»æ¨ç†æ—¶é—´: "</span> + stats.getTotalReasoningTime() + <span class="hljs-string">"ms"</span>);
        System.out.println(<span class="hljs-string">"æ€»Tokenä½¿ç”¨: "</span> + stats.getTotalTokens());
        System.out.println(<span class="hljs-string">"é”™è¯¯æ¬¡æ•°: "</span> + stats.getErrorCount());
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-22">4.6 æœ¬ç« æ€»ç»“</h2>
<h3 data-id="heading-23">å…³é”®è¦ç‚¹</h3>
<ol>
<li>
<p><strong>Agentæ¥å£è®¾è®¡</strong></p>
<ul>
<li>å“åº”å¼ç¼–ç¨‹æ¨¡å‹ï¼šMono/Fluxæ”¯æŒå¼‚æ­¥éé˜»å¡</li>
<li>å¤šæ€call()æ–¹æ³•ï¼šé€‚é…ä¸åŒä½¿ç”¨åœºæ™¯</li>
<li>observe()æ–¹æ³•ï¼šæ”¯æŒå¤šAgentåä½œ</li>
<li>ç»“æ„åŒ–è¾“å‡ºï¼šè¦æ±‚Agentè¿”å›ç‰¹å®šæ ¼å¼æ•°æ®</li>
</ul>
</li>
<li>
<p><strong>AgentBaseåŸºç±»</strong></p>
<ul>
<li>æä¾›é€šç”¨åŠŸèƒ½å®ç°</li>
<li>Hookç³»ç»Ÿé›†æˆ</li>
<li>çŠ¶æ€æ¨¡å—ç®¡ç†</li>
<li>é‡å…¥æ£€æŸ¥ä¿æŠ¤</li>
</ul>
</li>
<li>
<p><strong>æµå¼æ‰§è¡Œ</strong></p>
<ul>
<li>stream()æ–¹æ³•æ”¯æŒå®æ—¶è¾“å‡º</li>
<li>ä¸°å¯Œçš„äº‹ä»¶ç±»å‹</li>
<li>é€‚ç”¨äºUIäº¤äº’åœºæ™¯</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿäº§å®è·µ</strong></p>
<ul>
<li>å¤šç”¨æˆ·å¹¶å‘æ”¯æŒ</li>
<li>æ€§èƒ½ç›‘æ§</li>
<li>å¼‚å¸¸å¤„ç†</li>
<li>è¶…æ—¶æ§åˆ¶</li>
</ul>
</li>
</ol>
<h3 data-id="heading-24">æœ€ä½³å®è·µ</h3>
<pre><code class="hljs language-scss" lang="scss">âœ“ ä½¿ç”¨å“åº”å¼APIï¼Œé¿å…é˜»å¡
âœ“ åˆç†è®¾ç½®è¶…æ—¶æ—¶é—´
âœ“ å¯ç”¨é‡å…¥æ£€æŸ¥ï¼Œé˜²æ­¢é€’å½’è°ƒç”¨
âœ“ ä½¿ç”¨Hookè¿›è¡Œæ—¥å¿—å’Œç›‘æ§
âœ“ ä¸ºä¸åŒç”¨æˆ·åˆ›å»ºç‹¬ç«‹çš„Agentå®ä¾‹
âœ“ å®šæœŸæ¸…ç†ä¸æ´»è·ƒçš„ä¼šè¯
âœ“ ä½¿ç”¨ç»“æ„åŒ–è¾“å‡ºè·å–ç²¾ç¡®æ•°æ®
âœ— ä¸è¦åœ¨å·¥å…·ä¸­è°ƒç”¨Agentï¼ˆé¿å…æ­»é”ï¼‰
âœ— ä¸è¦å¿½ç•¥é”™è¯¯å¤„ç†
âœ— ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨block()ï¼ˆé™¤éå¿…è¦ï¼‰
</code></pre>
<h3 data-id="heading-25">ä¸‹ä¸€ç« é¢„å‘Š</h3>
<p>ç¬¬5ç« å°†æ·±å…¥è®²è§£<strong>ReActAgentçš„æ ¸å¿ƒå®ç°</strong>ï¼Œæ¢è®¨æ¨ç†-è¡ŒåŠ¨å¾ªç¯çš„å·¥ä½œåŸç†ã€è¿­ä»£æ§åˆ¶ã€å·¥å…·è°ƒç”¨æµç¨‹ç­‰å†…å®¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI æ™ºèƒ½ä½“é«˜å¯é è®¾è®¡æ¨¡å¼ï¼šé¢„ç”Ÿæˆ]]></title>    <link>https://juejin.cn/post/7589386961647861795</link>    <guid>https://juejin.cn/post/7589386961647861795</guid>    <pubDate>2025-12-30T04:27:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589386961647861795" data-draft-id="7589308109640187939" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI æ™ºèƒ½ä½“é«˜å¯é è®¾è®¡æ¨¡å¼ï¼šé¢„ç”Ÿæˆ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-30T04:27:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¿å‡¡"/> <meta itemprop="url" content="https://juejin.cn/user/290747765274222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI æ™ºèƒ½ä½“é«˜å¯é è®¾è®¡æ¨¡å¼ï¼šé¢„ç”Ÿæˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/290747765274222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¿å‡¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T04:27:18.000Z" title="Tue Dec 30 2025 04:27:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><em>æœ¬ç³»åˆ—ä»‹ç»å¢å¼ºç°ä»£æ™ºèƒ½ä½“ç³»ç»Ÿå¯é æ€§çš„è®¾è®¡æ¨¡å¼ï¼Œä»¥ç›´è§‚æ–¹å¼é€ä¸€ä»‹ç»æ¯ä¸ªæ¦‚å¿µï¼Œæ‹†è§£å…¶ç›®çš„ï¼Œç„¶åå®ç°ç®€å•å¯è¡Œçš„ç‰ˆæœ¬ï¼Œæ¼”ç¤ºå…¶å¦‚ä½•èå…¥ç°å®ä¸–ç•Œçš„æ™ºèƒ½ä½“ç³»ç»Ÿã€‚æœ¬ç³»åˆ—ä¸€å…± 14 ç¯‡æ–‡ç« ï¼Œè¿™æ˜¯ç¬¬ 2 ç¯‡ã€‚åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flevelup.gitconnected.com%2Fbuilding-the-14-key-pillars-of-agentic-ai-229e50f65986" title="https://levelup.gitconnected.com/building-the-14-key-pillars-of-agentic-ai-229e50f65986" target="_blank" ref="nofollow noopener noreferrer">Building the 14 Key Pillars of Agentic AI</a></em></p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acc017966a2144a5a358a7c81c922420~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-e5Yeh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767673637&amp;x-signature=UCrA9TuGC8do%2F8gCoMf%2FU5PUWO8%3D" alt="" loading="lazy"/></p>
<p>ä¼˜åŒ–æ™ºèƒ½ä½“è§£å†³æ–¹æ¡ˆéœ€è¦è½¯ä»¶å·¥ç¨‹ç¡®ä¿ç»„ä»¶åè°ƒã€å¹¶è¡Œè¿è¡Œå¹¶ä¸ç³»ç»Ÿé«˜æ•ˆäº¤äº’ã€‚ä¾‹å¦‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FSpeculative_execution" title="https://en.wikipedia.org/wiki/Speculative_execution" target="_blank" ref="nofollow noopener noreferrer">é¢„æµ‹æ‰§è¡Œ</a>ï¼Œä¼šå°è¯•å¤„ç†å¯é¢„æµ‹æŸ¥è¯¢ä»¥<strong>é™ä½æ—¶å»¶</strong>ï¼Œæˆ–è€…è¿›è¡Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.arm.com%2Fcommunity%2Farm-community-blogs%2Fb%2Fembedded-and-microcontrollers-blog%2Fposts%2Fcomparing-lock-step-redundant-execution-versus-split-lock-technologies" title="https://developer.arm.com/community/arm-community-blogs/b/embedded-and-microcontrollers-blog/posts/comparing-lock-step-redundant-execution-versus-split-lock-technologies" target="_blank" ref="nofollow noopener noreferrer">å†—ä½™æ‰§è¡Œ</a>ï¼Œå³<strong>å¯¹åŒä¸€æ™ºèƒ½ä½“é‡å¤æ‰§è¡Œå¤šæ¬¡</strong>ä»¥é˜²å•ç‚¹æ•…éšœã€‚å…¶ä»–å¢å¼ºç°ä»£æ™ºèƒ½ä½“ç³»ç»Ÿå¯é æ€§çš„æ¨¡å¼åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>å¹¶è¡Œå·¥å…·</strong>ï¼šæ™ºèƒ½ä½“åŒæ—¶æ‰§è¡Œç‹¬ç«‹ API è°ƒç”¨ä»¥éšè— I/O æ—¶å»¶ã€‚</li>
<li><strong>å±‚çº§æ™ºèƒ½ä½“</strong>ï¼šç®¡ç†è€…å°†ä»»åŠ¡æ‹†åˆ†ä¸ºç”±æ‰§è¡Œæ™ºèƒ½ä½“å¤„ç†çš„å°æ­¥éª¤ã€‚</li>
<li><strong>ç«äº‰æ€§æ™ºèƒ½ä½“ç»„åˆ</strong>ï¼šå¤šä¸ªæ™ºèƒ½ä½“æå‡ºç­”æ¡ˆï¼Œç³»ç»Ÿé€‰å‡ºæœ€ä½³ã€‚</li>
<li><strong>å†—ä½™æ‰§è¡Œ</strong>ï¼šå³ä¸¤ä¸ªæˆ–å¤šä¸ªæ™ºèƒ½ä½“è§£å†³åŒä¸€ä»»åŠ¡ä»¥æ£€æµ‹é”™è¯¯å¹¶æé«˜å¯é æ€§ã€‚</li>
<li><strong>å¹¶è¡Œæ£€ç´¢å’Œæ··åˆæ£€ç´¢</strong>ï¼šå¤šç§æ£€ç´¢ç­–ç•¥ååŒè¿è¡Œä»¥æå‡ä¸Šä¸‹æ–‡è´¨é‡ã€‚</li>
<li><strong>å¤šè·³æ£€ç´¢</strong>ï¼šæ™ºèƒ½ä½“é€šè¿‡è¿­ä»£æ£€ç´¢æ­¥éª¤æ”¶é›†æ›´æ·±å…¥ã€æ›´ç›¸å…³çš„ä¿¡æ¯ã€‚</li>
</ul>
<p>è¿˜æœ‰å¾ˆå¤šå…¶ä»–æ¨¡å¼ã€‚</p>
<p>æœ¬ç³»åˆ—å°†å®ç°æœ€å¸¸ç”¨æ™ºèƒ½ä½“æ¨¡å¼èƒŒåçš„åŸºç¡€æ¦‚å¿µï¼Œä»¥ç›´è§‚æ–¹å¼é€ä¸€ä»‹ç»æ¯ä¸ªæ¦‚å¿µï¼Œæ‹†è§£å…¶ç›®çš„ï¼Œç„¶åå®ç°ç®€å•å¯è¡Œçš„ç‰ˆæœ¬ï¼Œæ¼”ç¤ºå…¶å¦‚ä½•èå…¥ç°å®ä¸–ç•Œçš„æ™ºèƒ½ä½“ç³»ç»Ÿã€‚</p>
<p>æ‰€æœ‰ç†è®ºå’Œä»£ç éƒ½åœ¨ GitHub ä»“åº“é‡Œï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FFareedKhan-dev%2Fagentic-parallelism" title="https://github.com/FareedKhan-dev/agentic-parallelism" target="_blank" ref="nofollow noopener noreferrer">ğŸ¤– Agentic Parallelism: A Practical Guide ğŸš€</a></p>
<p>ä»£ç åº“ç»„ç»‡å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang">agentic-parallelism/
    â”œâ”€â”€ <span class="hljs-number">01</span>_parallel_tool_use.ipynb
    â”œâ”€â”€ <span class="hljs-number">02</span>_parallel_hypothesis.ipynb
    ...
    â”œâ”€â”€ <span class="hljs-number">06</span>_competitive_agent_ensembles.ipynb
    â”œâ”€â”€ <span class="hljs-number">07</span>_agent_assembly_line.ipynb
    â”œâ”€â”€ <span class="hljs-number">08</span>_decentralized_blackboard.ipynb
    ...
    â”œâ”€â”€ <span class="hljs-number">13</span>_parallel_context_preprocessing.ipynb
    â””â”€â”€ <span class="hljs-number">14</span>_parallel_multi_hop_retrieval.ipynb
</code></pre>
<hr/>
<h2 data-id="heading-0">ä»é¢„ç”Ÿæˆåˆ°æˆ˜ç•¥æ¢ç´¢</h2>
<p>åœ¨ä¹‹å‰æ¨¡å¼ä¸­ï¼Œä»£ç†éµå¾ªå•ä¸€çº¿æ€§æ€ç»´è·¯å¾„ï¼Œå¦‚æœåˆå§‹æ–¹æ³•å­˜åœ¨ç¼ºé™·æˆ–ä¸æ˜¯æœ€ä¼˜ï¼Œæ•´ä¸ªè¿‡ç¨‹å°±ä¼šå—åˆ°å½±å“â€¦â€¦</p>
<p>åœ¨å¤æ‚æˆ–å¯Œæœ‰åˆ›æ„çš„ä»»åŠ¡ä¸­ï¼Œæœ€å…ˆå‡ºç°çš„ç‚¹å­å¾€å¾€ä¸æ˜¯æœ€ä½³çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªé‡å¤§é£é™©ã€‚</p>
<p><strong>å¹¶å‘é¢„ç”Ÿæˆï¼ˆParallel Hypothesis Generationï¼‰</strong>ï¼Œä¹Ÿç§°ä¸º<strong>åˆ†æ”¯æ€è€ƒï¼ˆBranching Thoughtsï¼‰</strong>ï¼Œæ˜¯ä¸€ç§ä¸å¯¹å•ä¸€æƒ³æ³•ä½œå‡ºå›åº”çš„ç»“æ„æ€§æ–¹æ³•ã€‚</p>
<ol>
<li>ç³»ç»Ÿä¸€å¼€å§‹å°±æ˜ç¡®ç”Ÿæˆå¤šç§å¤šæ ·çš„ç­–ç•¥æˆ–â€œå‡è®¾â€ï¼Œè€Œä¸æ˜¯å•ä¸€çº¿æ€§æ¨ç†ã€‚</li>
<li>ç„¶åå¹¶è¡Œæ¢ç´¢æ‰€æœ‰è·¯å¾„ï¼Œå¹¶ä¸ºæ¯æ¡è·¯å¾„ç”Ÿæˆè§£ã€‚</li>
<li>æœ€åè¯„ä¼°ç«äº‰æ–¹æ¡ˆï¼Œé€‰å‡ºæœ€ä¼˜æ–¹æ¡ˆã€‚ä»è€Œåˆ›é€ æ›´ç¨³å¥ã€æ›´å…·åˆ›é€ åŠ›ï¼Œä¸”æ›´ä¸å®¹æ˜“é™·å…¥æ¬¡ä¼˜è·¯å¾„çš„ç³»ç»Ÿã€‚</li>
</ol>
<p>æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªå¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼Œä»¥åº”å¯¹åˆ›æ„è¥é”€ä»»åŠ¡ã€‚ç”± <strong>è§„åˆ’å™¨ï¼ˆPlannerï¼‰</strong>ã€å¹¶å‘ <strong>æ‰§è¡Œå™¨ï¼ˆWorkersï¼‰</strong> å’Œ <strong>è¯„ä¼°å™¨ï¼ˆJudgeï¼‰</strong> ç»„æˆï¼Œç›®æ ‡æ˜¯å±•ç¤ºæœ€ç»ˆè¾“å‡ºç›¸æ¯”å•ä¸ªä»£ç†èƒ½äº§å‡ºçš„æ˜æ˜¾æœ‰è´¨çš„æå‡ã€‚</p>
<p>é¦–å…ˆï¼Œä¸ºç®¡ç†ä»£ç†ä¹‹é—´å¤æ‚çš„ä¿¡æ¯æµï¼Œéœ€è¦ä¸ºè¾“å‡ºå®šä¹‰ç»“æ„åŒ–çš„åŒè´¨æ¨¡å‹ï¼Œè¿™æ˜¯å°†å¤šæ™ºèƒ½ä½“ç³»ç»Ÿç²˜åˆåœ¨ä¸€èµ·çš„çº½å¸¦ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.pydantic_v1 <span class="hljs-keyword">import</span> BaseModel, Field
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MarketingHypothesis</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-string">"""A Pydantic model for a single, distinct marketing angle or strategy to explore."""</span>
    <span class="hljs-comment"># ä¸ºè¿™ä¸ªè§’åº¦å–ä¸€ä¸ªç®€çŸ­ã€æœ—æœ—ä¸Šå£çš„åå­— (ä¾‹å¦‚, 'The Tech Enthusiast')</span>
    angle_name: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"A short, catchy name for the marketing angle (e.g., 'The Tech Enthusiast')."</span>)
    <span class="hljs-comment"># å¯¹ç›®æ ‡å—ä¼—å’Œæ ¸å¿ƒä¿¡æ¯çš„ç®€æ˜æè¿°</span>
    description: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"A one-sentence description of the target audience and core message for this angle."</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Plan</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-string">"""A Pydantic container for the Planner's output, holding multiple hypotheses."""</span>
    <span class="hljs-comment"># åˆ—è¡¨åŒ…å« 3 ç§éœ€è¦å¹¶è¡Œæ¢ç´¢çš„è¥é”€å‡è®¾</span>
    hypotheses: <span class="hljs-type">List</span>[MarketingHypothesis] = Field(description=<span class="hljs-string">"A list of exactly 3 distinct marketing hypotheses to explore in parallel."</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Slogan</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-string">"""A Pydantic model for the output of a single copywriting Worker."""</span>
    slogan: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"The generated marketing slogan."</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Evaluation</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-string">"""A Pydantic model for the final, structured output of the Judge agent."""</span>
    <span class="hljs-comment"># ä¸€ä»½æ¯”è¾ƒæ‰€æœ‰ç”Ÿæˆå£å·çš„è¯¦ç»†è¯„ä¼°</span>
    critique: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"A detailed critique of all slogans, explaining the pros and cons of each."</span>)
    <span class="hljs-comment"># è¯„ä¼°å™¨é€‰å‡ºçš„æœ€ä½³æ ‡è¯­</span>
    best_slogan: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"The single best slogan chosen from the list."</span>)
</code></pre>
<p>è¿™äº› Pydantic æ¨¡å‹æ˜¯ä»£ç†ä¹‹é—´çš„æ­£å¼â€œæ•°æ®å¥‘çº¦â€ã€‚ä¾‹å¦‚ï¼Œ<code>Plan</code> ç±»ç¡®ä¿è§„åˆ’å™¨ä»£ç†å§‹ç»ˆè¾“å‡ºä¸€ä¸ª <code>MarketingHypothesis</code> å¯¹è±¡åˆ—è¡¨ï¼Œ<code>Evaluation</code> ç±»ç¡®ä¿è¯„ä¼°å™¨ä¸ä»…ä¼šæä¾›ä¸€ä¸ªè‡´èƒœå£å·ï¼Œè¿˜ä¼šæä¾›è¯¦å°½çš„ <code>critique</code>ã€‚</p>
<p>æ¥ä¸‹æ¥å®šä¹‰ <code>GraphState</code>ï¼Œè¿™æ¯”ä¹‹å‰çš„æ¨¡å¼æ›´å¤æ‚ï¼Œéœ€è¦è·Ÿè¸ªåˆå§‹è®¡åˆ’ä»¥åŠå¤šä¸ªå¹¶è¡Œå·¥ä½œåˆ†æ”¯çš„ç»“æœã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> TypedDict, Annotated, <span class="hljs-type">List</span>, <span class="hljs-type">Dict</span>
<span class="hljs-keyword">import</span> operator

<span class="hljs-keyword">class</span> <span class="hljs-title class_">GraphState</span>(<span class="hljs-title class_ inherited__">TypedDict</span>):
    product_description: <span class="hljs-built_in">str</span>
    plan: <span class="hljs-type">List</span>[MarketingHypothesis]
    <span class="hljs-comment"># 'worker_results' æ˜¯å­—å…¸ï¼Œé”®æ˜¯è§’åº¦åç§°ï¼Œå€¼æ˜¯ç”Ÿæˆçš„å£å·</span>
    <span class="hljs-comment"># 'operator.update' å½’çº¦å‡½æ•°å‘Šè¯‰ LangGraph ä»å¹¶è¡Œåˆ†æ”¯åˆå¹¶å­—å…¸ï¼Œè€Œéæ›¿æ¢</span>
    worker_results: Annotated[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, Slogan], operator.update]
    final_evaluation: Evaluation
    performance_log: Annotated[<span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>], operator.add]
</code></pre>
<p>æœ€é‡è¦çš„éƒ¨åˆ†æ˜¯ï¼š<code>worker_results: Annotated[Dict[str, Slogan], operator.update]</code>ã€‚å½“å¹¶è¡Œå·¥ä½œèŠ‚ç‚¹å®Œæˆæ—¶ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¼šè¿”å›ä¸€ä¸ªå¸¦æœ‰è‡ªèº«ç»“æœçš„å°å­—å…¸ã€‚<code>operator.update</code> å½’çº¦å‡½æ•°æŒ‡ç¤º <code>LangGraph</code> å°†è¿™äº›è¯å…¸åˆå¹¶ä¸ºæœ€ç»ˆçŠ¶æ€ä¸‹çš„ç»¼åˆ <code>worker_results</code> å¯¹è±¡ï¼Œä»¥ç¡®ä¿æ•°æ®ä¸ä¸¢å¤±ã€‚</p>
<p>æ¥ä¸‹æ¥å®šä¹‰ <strong>è§„åˆ’å™¨ï¼ˆPlannerï¼‰</strong> ä»£ç†ï¼Œå®ƒæ˜¯å›¾ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">planner_node</span>(<span class="hljs-params">state: GraphState</span>):
    <span class="hljs-string">"""The Planner node: generates the initial marketing plan with multiple, diverse hypotheses."""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"--- AGENT: Planner is thinking... ---"</span>)
    start_time = time.time()

    <span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªé“¾ï¼Œå°† planner_prompt ä¼ é€’ç»™ LLMï¼ŒæŒ‡ç¤ºå®ƒè¾“å‡ºä¸€ä¸ª 'Plan' å¯¹è±¡</span>
    planner_chain = planner_prompt | llm.with_structured_output(Plan)
    plan = planner_chain.invoke({<span class="hljs-string">"product_description"</span>: state[<span class="hljs-string">'product_description'</span>]})

    execution_time = time.time() - start_time
    log_entry = <span class="hljs-string">f"[Planner] Generated <span class="hljs-subst">{<span class="hljs-built_in">len</span>(plan.hypotheses)}</span> hypotheses in <span class="hljs-subst">{execution_time:<span class="hljs-number">.2</span>f}</span>s."</span>
    <span class="hljs-built_in">print</span>(log_entry)

    <span class="hljs-comment"># ç”¨å‡è®¾åˆ—è¡¨å’Œæ€§èƒ½æ—¥å¿—æ›´æ–°çŠ¶æ€</span>
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"plan"</span>: plan.hypotheses, <span class="hljs-string">"performance_log"</span>: [log_entry]}
</code></pre>
<p><code>planner_node</code> é€šè¿‡ LLM å°†é«˜å±‚æ¬¡çš„ <code>product_description</code> åˆ†è§£ä¸ºä¸‰ä¸ªç‹¬ç«‹ä¸”å¯å¹¶è¡ŒåŒ–çš„å­ä»»åŠ¡ï¼ˆ<code>MarketingHypothesis</code> å¯¹è±¡ï¼‰ï¼Œè¿™ä¸ªåˆå§‹çš„â€œæ‰‡å‡ºâ€æ­¥éª¤æ˜¯æ•´ä¸ªå›¾çš„åŸºç¡€ã€‚</p>
<p>æ¥ä¸‹æ¥å®šä¹‰ <strong>æ‰§è¡Œå™¨ï¼ˆWorkerï¼‰</strong> ä»£ç†ï¼Œè¯¥èŠ‚ç‚¹ç‰¹æ®Šä¹‹å¤„åœ¨äºä¼šå¹¶è¡Œå¤šæ¬¡æ‰§è¡Œï¼Œæ¯ä¸ªç”±è§„åˆ’å™¨ç”Ÿæˆçš„å‡è®¾éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">worker_node</span>(<span class="hljs-params">state: GraphState, config</span>):
    <span class="hljs-string">"""The Worker node: generates a slogan for a single, specific hypothesis. This node will be run in parallel for each hypothesis."""</span>
    <span class="hljs-comment"># 'config' å¯¹è±¡æ˜¯ LangGraph çš„ä¸€ä¸ªæä¾›è¿è¡Œæ—¶ä¿¡æ¯çš„ç‰¹æ®Šå‚æ•°</span>
    <span class="hljs-comment"># ä» 'configurable' å­—å…¸ä¸­æ£€ç´¢æ‰§è¡Œå™¨å®ä¾‹çš„ç‰¹å®šå‡è®¾</span>
    hypothesis = config[<span class="hljs-string">"configurable"</span>][<span class="hljs-string">"hypothesis"</span>]
    angle_name = hypothesis.angle_name

    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"--- AGENT: Worker for '<span class="hljs-subst">{angle_name}</span>' is thinking... ---"</span>)
    start_time = time.time()

    <span class="hljs-comment"># ä¸ºè¿™ä¸ªæ‰§è¡Œå™¨åˆ›å»ºé“¾</span>
    worker_chain = worker_prompt | llm.with_structured_output(Slogan)
    result = worker_chain.invoke({
        <span class="hljs-string">"product_description"</span>: state[<span class="hljs-string">'product_description'</span>],
        <span class="hljs-string">"angle_name"</span>: angle_name,
        <span class="hljs-string">"description"</span>: hypothesis.description
    })
    
    execution_time = time.time() - start_time
    log_entry = <span class="hljs-string">f"[Worker-<span class="hljs-subst">{angle_name}</span>] Generated slogan in <span class="hljs-subst">{execution_time:<span class="hljs-number">.2</span>f}</span>s."</span>
    <span class="hljs-built_in">print</span>(log_entry)
    
    <span class="hljs-comment"># è¾“å‡ºæ˜¯å­—å…¸ï¼Œé”®æ˜¯è§’åº¦åç§°ï¼Œ</span>
    <span class="hljs-comment"># å…è®¸ 'operator.update' å½’çº¦å‡½æ•°æ­£ç¡®åˆå¹¶æ‰€æœ‰å¹¶è¡Œå·¥ä½œçš„ç»“æœ</span>
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">"worker_results"</span>: {angle_name: result},
        <span class="hljs-string">"performance_log"</span>: [log_entry]
    }
</code></pre>
<p><code>worker_node</code> æ˜¯å¤å†™å™¨ï¼ˆcopywriterï¼‰ï¼Œä¸ä¼šä»ä¸» <code>state</code> è¯»å–ï¼Œç›¸åä» <code>config</code> å¯¹è±¡é‚£é‡Œæ¥æ”¶ <code>hypothesis</code>ã€‚è¿™å°±æ˜¯ <code>LangGraph</code> å°†å”¯ä¸€è¾“å…¥ä¼ é€’ç»™åŒä¸€èŠ‚ç‚¹çš„å¹¶è¡Œæ‰§è¡Œçš„æ–¹å¼ï¼Œä½¿æ¯ä¸ªæ‰§è¡Œå™¨èƒ½å¤Ÿä¸“æ³¨äºå…¶åˆ†é…çš„é—®é¢˜åˆ‡ç‰‡ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬éœ€è¦ä¸€ä¸ªä½œä¸ºæ¡ä»¶è¾¹çš„å‡½æ•°ï¼ŒæŠŠä»»åŠ¡åˆ†é…ç»™å¹¶è¡Œæ‰§è¡Œå™¨ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langgraph.graph.graph <span class="hljs-keyword">import</span> Send

<span class="hljs-keyword">def</span> <span class="hljs-title function_">scatter_to_workers</span>(<span class="hljs-params">state: GraphState</span>) -&gt; <span class="hljs-type">List</span>[Send]:
    <span class="hljs-string">"""A special edge function that scatters the plan to the parallel workers."""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"--- ORCHESTRATOR: Scattering tasks to workers --- "</span>)
    <span class="hljs-comment"># å‡½æ•°è¿”å› 'Send' å¯¹è±¡åˆ—è¡¨</span>
    <span class="hljs-comment"># æ¯ä¸ª 'Send' å¯¹è±¡éƒ½æ˜¯å›¾çš„ä¸€æ¡æŒ‡ä»¤ï¼Œé€šè¿‡ 'config' å‚æ•°ä¼ é€’ç‰¹å®šè¾“å…¥ï¼Œ</span>
    <span class="hljs-comment"># å°†ä»»åŠ¡åˆ†æ´¾ç»™ç‰¹å®šèŠ‚ç‚¹ï¼ˆ'worker'ï¼‰ã€‚</span>
    tasks = [
        Send(
            <span class="hljs-string">"worker"</span>,
            config={<span class="hljs-string">"configurable"</span>: {<span class="hljs-string">"hypothesis"</span>: hypothesis}}
        )
        <span class="hljs-keyword">for</span> hypothesis <span class="hljs-keyword">in</span> state[<span class="hljs-string">'plan'</span>]
    ]
    <span class="hljs-keyword">return</span> tasks
</code></pre>
<p><code>scatter_to_workers</code> å‡½æ•°æ˜¯åŠ¨æ€å¹¶è¡Œçš„æ ¸å¿ƒï¼Œå®ƒä¸æ˜¯æ ‡å‡†èŠ‚ç‚¹ï¼Œè€Œæ˜¯ç”¨ä½œæ¡ä»¶è¾¹çš„å‡½æ•°ã€‚ä»çŠ¶æ€è¯»å– <code>plan</code>ï¼Œå¹¶ç¨‹åºåŒ–çš„æ„å»º <code>Send</code> å¯¹è±¡åˆ—è¡¨ã€‚æ¯ä¸ª <code>Send</code> éƒ½æ˜¯ <code>LangGraph</code> å‘½ä»¤ï¼Œç”¨äºè°ƒç”¨å…·æœ‰å”¯ä¸€é…ç½®çš„ <code>worker</code> èŠ‚ç‚¹ã€‚å½“æ¡ä»¶è¾¹è¿”å›æ­¤ç±» <code>Send</code> å¯¹è±¡åˆ—è¡¨æ—¶ï¼Œ<code>LangGraph</code> ç†è§£å¿…é¡»å¹¶è¡Œæ‰§è¡Œæ‰€æœ‰å¯¹è±¡ã€‚</p>
<p>æœ€åï¼Œ<strong>è¯„ä¼°å™¨ï¼ˆJudgeï¼‰</strong> ä»£ç†è´Ÿè´£æ”¶é›†å¹¶è¯„ä¼°æ‰€æœ‰æ‰§è¡Œå™¨çš„ç»“æœã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">judge_node</span>(<span class="hljs-params">state: GraphState</span>):
    <span class="hljs-string">"""The Judge node: evaluates all worker results, provides a critique, and selects the single best one."""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"--- AGENT: Judge is evaluating... ---"</span>)
    start_time = time.time()
    
    <span class="hljs-comment"># å°†å¹¶è¡Œå·¥ä½œç»“æœæ ¼å¼åŒ–ä¸ºå•ä¸ªå­—ç¬¦ä¸²ï¼Œä»¥ä¾›è¯„ä¼°å™¨æç¤º</span>
    slogans_to_evaluate = <span class="hljs-string">""</span>
    <span class="hljs-keyword">for</span> angle, slogan_obj <span class="hljs-keyword">in</span> state[<span class="hljs-string">'worker_results'</span>].items():
        slogans_to_evaluate += <span class="hljs-string">f"Angle: <span class="hljs-subst">{angle}</span>\nSlogan: <span class="hljs-subst">{slogan_obj.slogan}</span>\n\n"</span>
    
    <span class="hljs-comment"># æ„å»ºè¯„ä¼°å™¨é“¾</span>
    judge_chain = judge_prompt | llm.with_structured_output(Evaluation)
    evaluation = judge_chain.invoke({
        <span class="hljs-string">"product_description"</span>: state[<span class="hljs-string">'product_description'</span>],
        <span class="hljs-string">"slogans_to_evaluate"</span>: slogans_to_evaluate
    })
    
    execution_time = time.time() - start_time
    log_entry = <span class="hljs-string">f"[Judge] Evaluated <span class="hljs-subst">{<span class="hljs-built_in">len</span>(state[<span class="hljs-string">'worker_results'</span>])}</span> slogans in <span class="hljs-subst">{execution_time:<span class="hljs-number">.2</span>f}</span>s."</span>
    <span class="hljs-built_in">print</span>(log_entry)
    
    <span class="hljs-comment"># åœ¨çŠ¶æ€é‡Œæ›´æ–°æœ€ç»ˆç»“æœ</span>
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"final_evaluation"</span>: evaluation, <span class="hljs-string">"performance_log"</span>: [log_entry]}
</code></pre>
<p><code>judge_node</code> æ˜¯â€œæ‰‡å…¥â€æˆ–èšåˆï¼Œè´Ÿè´£è¯»å– <code>worker_results</code> è¯å…¸å¹¶ç»¼åˆç»“æœï¼Œæ‰§è¡Œæœ€åçš„å…³é”®æ¨ç†æ­¥éª¤ï¼Œå³æ¯”è¾ƒç«äº‰è§‚ç‚¹å¹¶åšå‡ºåˆç†å†³ç­–ï¼Œæœ€ç»ˆäº§å‡ºæ•´ä¸ªç³»ç»Ÿçš„é«˜è´¨é‡è¾“å‡ºã€‚</p>
<p>å®šä¹‰å¥½æ‰€æœ‰èŠ‚ç‚¹å’Œè¾¹åï¼Œå¯ä»¥ç»„è£…å¹¶ç¼–è¯‘æœ€ç»ˆçš„å›¾ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langgraph.graph <span class="hljs-keyword">import</span> StateGraph, END

<span class="hljs-comment"># ç”¨å®šä¹‰çš„çŠ¶æ€åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„å›¾</span>
workflow = StateGraph(GraphState)

<span class="hljs-comment"># æ·»åŠ ä»£è¡¨ä»£ç†çš„èŠ‚ç‚¹</span>
workflow.add_node(<span class="hljs-string">"planner"</span>, planner_node)
workflow.add_node(<span class="hljs-string">"worker"</span>, worker_node)
workflow.add_node(<span class="hljs-string">"judge"</span>, judge_node)

<span class="hljs-comment"># å·¥ä½œæµå…¥å£ç‚¹æ˜¯è§„åˆ’å™¨</span>
workflow.set_entry_point(<span class="hljs-string">"planner"</span>)

<span class="hljs-comment"># åœ¨è§„åˆ’å™¨ä¹‹åï¼Œç”¨ç‰¹æ®Šçš„ 'scatter_to_workers' å‡½æ•°ä½œä¸ºæ¡ä»¶è¾¹æ¥æ‰‡å‡ºå·¥ä½œ</span>
workflow.add_conditional_edges(<span class="hljs-string">"planner"</span>, scatter_to_workers)

<span class="hljs-comment"># å½“æ‰€æœ‰æ‰§è¡Œå™¨èŠ‚ç‚¹å®Œæˆåï¼Œç»“æœå°†è‡ªåŠ¨èšåˆï¼Œ</span>
<span class="hljs-comment"># å®šä¹‰ä¸€ä¸ªé™æ€è¾¹æ¥æ‰‡å…¥åˆ°è¯„ä¼°å™¨ä¸­</span>
workflow.add_edge(<span class="hljs-string">"worker"</span>, <span class="hljs-string">"judge"</span>)

<span class="hljs-comment"># è¯„ä¼°æ˜¯å›¾ç»“æŸå‰çš„æœ€åä¸€æ­¥</span>
workflow.add_edge(<span class="hljs-string">"judge"</span>, END)

<span class="hljs-comment"># å°†å›¾ç¼–è¯‘ä¸ºå¯æ‰§è¡Œåº”ç”¨ç¨‹åº</span>
app = workflow.<span class="hljs-built_in">compile</span>()
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18b435f674e34323bb752a5dc6d0287e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-e5Yeh:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767673637&amp;x-signature=Ay1jNnimVS9Ie%2By9CJGZyqq%2FXG0%3D" alt="å¹¶å‘é¢„ç”Ÿæˆ" loading="lazy"/></p>
<p>ç°åœ¨è¿›è¡Œæœ€ç»ˆå®šé‡è¯æ˜ï¼Œåˆ†ææ€§èƒ½æ—¥å¿—ï¼Œçœ‹çœ‹å¹¶è¡Œæ‰§è¡Œçš„å¥½å¤„ã€‚</p>
<pre><code class="hljs language-python" lang="python">total_time = <span class="hljs-number">0</span>
planner_time = <span class="hljs-number">0</span>
worker_times = []
judge_time = <span class="hljs-number">0</span>

<span class="hljs-comment"># è§£ææ€§èƒ½æ—¥å¿—ä»¥æå–æ¯ä¸ªé˜¶æ®µçš„æ—¶é—´</span>
<span class="hljs-keyword">for</span> log <span class="hljs-keyword">in</span> final_state[<span class="hljs-string">'performance_log'</span>]:
    time_val = <span class="hljs-built_in">float</span>(log.split(<span class="hljs-string">' '</span>)[-<span class="hljs-number">1</span>].replace(<span class="hljs-string">'s'</span>, <span class="hljs-string">''</span>))
    <span class="hljs-keyword">if</span> <span class="hljs-string">"[Planner]"</span> <span class="hljs-keyword">in</span> log:
        planner_time = time_val
    <span class="hljs-keyword">elif</span> <span class="hljs-string">"[Worker-"</span> <span class="hljs-keyword">in</span> log:
        worker_times.append(time_val)
    <span class="hljs-keyword">elif</span> <span class="hljs-string">"[Judge]"</span> <span class="hljs-keyword">in</span> log:
        judge_time = time_val

<span class="hljs-comment"># å¹¶è¡Œæ­¥éª¤çš„æ€»æ—¶é—´æ˜¯è¿è¡Œæ—¶é—´æœ€é•¿çš„ä»»åŠ¡çš„æ—¶é—´</span>
parallel_worker_time = <span class="hljs-built_in">max</span>(worker_times) <span class="hljs-keyword">if</span> worker_times <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>

<span class="hljs-comment"># æ•´ä¸ªå·¥ä½œæµçš„æ€»æ—¶é—´</span>
total_execution_time = planner_time + parallel_worker_time + judge_time
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Total Execution Time: <span class="hljs-subst">{total_execution_time:<span class="hljs-number">.2</span>f}</span> seconds\n"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Breakdown:"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f" - Planner: <span class="hljs-subst">{planner_time:<span class="hljs-number">.2</span>f}</span> seconds"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f" - Parallel Workers (longest path): <span class="hljs-subst">{parallel_worker_time:<span class="hljs-number">.2</span>f}</span> seconds"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f" - Judge: <span class="hljs-subst">{judge_time:<span class="hljs-number">.2</span>f}</span> seconds\n"</span>)

<span class="hljs-comment"># ç°åœ¨æ¨¡æ‹Ÿåœ¨é¡ºåºå·¥ä½œæµç¨‹ä¸­ä¼šå‘ç”Ÿä»€ä¹ˆ</span>
sequential_worker_time = <span class="hljs-built_in">sum</span>(worker_times)
time_saved = sequential_worker_time - parallel_worker_time
</code></pre>
<p>è¿™å°±æ˜¯ç°åœ¨çœ‹åˆ°çš„â€¦â€¦</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#### è¾“å‡º ####</span>
============================================================
                      PERFORMANCE ANALYSIS
============================================================
Total Execution Time: <span class="hljs-number">19.24</span> seconds


Breakdown:
 - Planner: <span class="hljs-number">6.78</span> seconds
 - Parallel Workers (longest path): <span class="hljs-number">5.31</span> seconds
 - Judge: <span class="hljs-number">7.15</span> seconds
</code></pre>
<p>ä¸‰ä¸ªæ‰§è¡Œå™¨åˆ†åˆ«ç”¨äº† 5.31sã€5.12s å’Œ 4.98sã€‚å¦‚æœæŒ‰é¡ºåºæ‰§è¡Œï¼Œè¯¥é˜¶æ®µå°†è€—æ—¶ 15.41sï¼ˆ5.31 + 5.12 + 4.98ï¼‰ã€‚</p>
<p>é€šè¿‡å¹¶è¡Œæ‰§è¡Œï¼Œè¯¥é˜¶æ®µæ—¶é—´ä»…ä¸º 5.31sï¼ˆå³æœ€é•¿æ‰§è¡Œå™¨æ—¶é—´ï¼‰ã€‚</p>
<p>è¿™ä¸ºè¿™ä¸€æ­¥éª¤èŠ‚çœäº†è¶…è¿‡ 10s çš„æ—¶é—´ã€‚</p>
<p><strong>æ›´é‡è¦çš„æ˜¯ï¼Œæœ€ç»ˆäº§å‡ºè´¨é‡æ›´å¥½</strong>ã€‚ç³»ç»Ÿä¸ä»…ç”Ÿæˆäº†å£å·ï¼Œè€Œä¸”æ¢ç´¢äº†ç”±ä¸‰ç§ä¸åŒç­–ç•¥å®šä¹‰çš„ç©ºé—´ï¼Œç„¶åé€šè¿‡å¦ä¸€ä¸ªæ¨ç†æ­¥éª¤é€‰æ‹©æœ€ä½³ç­–ç•¥ã€‚</p>
<hr/>
<blockquote>
<p>Hiï¼Œæˆ‘æ˜¯ä¿å‡¡ï¼Œä¸€åå…¼å…·æŠ€æœ¯æ·±åº¦ä¸ç®¡ç†è§†é‡çš„æŠ€æœ¯ç®¡ç†è€…ã€‚æ›¾å°±èŒäº Motorolaï¼Œç°ä»»èŒäº Mavenirï¼Œå¤šå¹´å¸¦é¢†æŠ€æœ¯å›¢é˜Ÿï¼Œèšç„¦åç«¯æ¶æ„ä¸äº‘åŸç”Ÿï¼ŒæŒç»­å…³æ³¨ AI ç­‰å‰æ²¿æ–¹å‘ï¼Œä¹Ÿå…³æ³¨äººçš„æˆé•¿ï¼Œç¬ƒä¿¡æŒç»­å­¦ä¹ çš„åŠ›é‡ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä¼šåˆ†äº«æŠ€æœ¯å®è·µä¸æ€è€ƒã€‚æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€ŒDeepNoMindã€ï¼Œæ˜Ÿæ ‡ä¸è¿·è·¯ã€‚ä¹Ÿæ¬¢è¿è®¿é—®ç‹¬ç«‹ç«™ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.deepnomind.com" title="https://www.deepnomind.com" target="_blank" ref="nofollow noopener noreferrer">www.DeepNoMind.com</a>ï¼Œä¸€èµ·äº¤æµæˆé•¿ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ™ºèƒ½ä½“è®¾è®¡æ¨¡å¼è§£æï¼šäº¤æ¥æ¨¡å¼ï¼ˆHandoffsï¼‰]]></title>    <link>https://juejin.cn/post/7589217625901924361</link>    <guid>https://juejin.cn/post/7589217625901924361</guid>    <pubDate>2025-12-30T04:33:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589217625901924361" data-draft-id="7589167252723384370" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ™ºèƒ½ä½“è®¾è®¡æ¨¡å¼è§£æï¼šäº¤æ¥æ¨¡å¼ï¼ˆHandoffsï¼‰"/> <meta itemprop="keywords" content="LangChain,Agent,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-30T04:33:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="FreeCode"/> <meta itemprop="url" content="https://juejin.cn/user/1282499717900794"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ™ºèƒ½ä½“è®¾è®¡æ¨¡å¼è§£æï¼šäº¤æ¥æ¨¡å¼ï¼ˆHandoffsï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1282499717900794/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    FreeCode
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T04:33:31.000Z" title="Tue Dec 30 2025 04:33:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€äº¤æ¥æ¨¡å¼ï¼ˆHandoffsï¼‰å®šä¹‰</h2>
<p>åœ¨äº¤æ¥æ¨¡å¼ä¸­ï¼Œç³»ç»Ÿè¡Œä¸ºä¼šåŸºäºçŠ¶æ€åŠ¨æ€å˜åŒ–ã€‚å…¶æ ¸å¿ƒæœºåˆ¶ä¸ºï¼šå·¥å…·ä¼šæ›´æ–°ä¸€ä¸ªå¯è·¨è½®æ¬¡æŒä¹…åŒ–çš„çŠ¶æ€å˜é‡ï¼ˆä¾‹å¦‚current_stepï¼ˆå½“å‰æ­¥éª¤ï¼‰æˆ–active_agentï¼ˆæ´»è·ƒæ™ºèƒ½ä½“ï¼‰ï¼‰ï¼Œç³»ç»Ÿé€šè¿‡è¯»å–è¯¥å˜é‡æ¥è°ƒæ•´è¡Œä¸º â€”â€” è¦ä¹ˆåº”ç”¨ä¸åŒçš„é…ç½®ï¼ˆç³»ç»Ÿæç¤ºè¯ã€å·¥å…·ï¼‰ï¼Œè¦ä¹ˆå°†ä»»åŠ¡è·¯ç”±è‡³å¦ä¸€ä¸ªæ™ºèƒ½ä½“ã€‚è¿™ç§æ¨¡å¼æ—¢æ”¯æŒä¸åŒæ™ºèƒ½ä½“ä¹‹é—´çš„ä»»åŠ¡äº¤æ¥ï¼Œä¹Ÿå¯å®ç°å•ä¸ªæ™ºèƒ½ä½“å†…éƒ¨çš„åŠ¨æ€é…ç½®å˜æ›´ã€‚</p>
<p>â€œäº¤æ¥â€ï¼ˆhandoffsï¼‰è¿™ä¸€æœ¯è¯­ç”± OpenAI æå‡ºï¼Œç”¨äºæè¿°å€ŸåŠ©å·¥å…·è°ƒç”¨ï¼ˆä¾‹å¦‚transfer_to_x_agentï¼‰åœ¨å¤šä¸ªæ™ºèƒ½ä½“æˆ–ä¸åŒçŠ¶æ€ä¹‹é—´è½¬ç§»æ§åˆ¶æƒçš„æœºåˆ¶ã€‚</p>
<h2 data-id="heading-1">äºŒã€æ ¸å¿ƒç‰¹å¾</h2>
<ul>
<li>çŠ¶æ€é©±åŠ¨è¡Œä¸ºï¼šè¡Œä¸ºåŸºäºçŠ¶æ€å˜é‡ï¼ˆå¦‚ current_stepï¼ˆå½“å‰æ­¥éª¤ï¼‰æˆ– active_agentï¼ˆæ´»è·ƒæ™ºèƒ½ä½“ï¼‰ï¼‰åŠ¨æ€è°ƒæ•´</li>
<li>åŸºäºå·¥å…·çš„çŠ¶æ€è½¬æ¢ï¼šé€šè¿‡å·¥å…·æ›´æ–°çŠ¶æ€å˜é‡ï¼Œå®ç°ä¸åŒçŠ¶æ€é—´çš„äº¤æ¥</li>
<li>ç”¨æˆ·ç›´æ¥äº¤äº’ï¼šæ¯ä¸ªçŠ¶æ€çš„é…ç½®å‡å¯ç›´æ¥å¤„ç†ç”¨æˆ·æ¶ˆæ¯</li>
<li>çŠ¶æ€æŒä¹…åŒ–ï¼šçŠ¶æ€å¯åœ¨å¤šè½®å¯¹è¯ä¸­ä¿æŒæœ‰æ•ˆ</li>
</ul>
<h2 data-id="heading-2">ä¸‰ã€é€‚ç”¨åœºæ™¯</h2>
<p>å½“ä½ éœ€è¦å¼ºåˆ¶æ‰§è¡Œé¡ºåºçº¦æŸï¼ˆä»…åœ¨å‰ç½®æ¡ä»¶æ»¡è¶³åå¼€æ”¾å¯¹åº”åŠŸèƒ½ï¼‰ã€æ™ºèƒ½ä½“éœ€è¦è·¨ä¸åŒçŠ¶æ€ä¸ç”¨æˆ·ç›´æ¥å¯¹è¯ï¼Œæˆ–éœ€è¦æ„å»ºå¤šé˜¶æ®µå¯¹è¯æµç¨‹æ—¶ï¼Œå¯é‡‡ç”¨è¯¥äº¤æ¥æ¨¡å¼ã€‚æ­¤æ¨¡å¼åœ¨å®¢æœåœºæ™¯ä¸­å°¤ä¸ºå®ç”¨ï¼Œä¾‹å¦‚éœ€è¦æŒ‰ç‰¹å®šé¡ºåºæ”¶é›†ä¿¡æ¯çš„ä¸šåŠ¡ â€”â€” æ¯”å¦‚å¤„ç†é€€æ¬¾å‰ï¼Œéœ€å…ˆæ”¶é›†ç”¨æˆ·çš„ä¿ä¿®ç¼–å·ã€‚</p>
<h2 data-id="heading-3">å››ã€åŸºç¡€å®ç°</h2>
<p>æ ¸å¿ƒæœºåˆ¶æ˜¯å€ŸåŠ©ä¸€ä¸ªå·¥å…·è¿”å›æŒ‡ä»¤ï¼ˆCommandï¼‰ ä»¥æ›´æ–°çŠ¶æ€ï¼Œè¿›è€Œè§¦å‘å‘æ–°æ­¥éª¤æˆ–æ–°æ™ºèƒ½ä½“çš„äº¤æ¥ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain.tools <span class="hljs-keyword">import</span> tool
<span class="hljs-keyword">from</span> langchain.messages <span class="hljs-keyword">import</span> ToolMessage
<span class="hljs-keyword">from</span> langgraph.types <span class="hljs-keyword">import</span> Command

<span class="hljs-meta">@tool</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">transfer_to_specialist</span>(<span class="hljs-params">runtime</span>) -&gt; Command:
    <span class="hljs-string">"""Transfer to the specialist agent."""</span>
    <span class="hljs-keyword">return</span> Command(
        update={
            <span class="hljs-string">"messages"</span>: [
                ToolMessage(  
                    content=<span class="hljs-string">"Transferred to specialist"</span>,
                    tool_call_id=runtime.tool_call_id  
                )
            ],
            <span class="hljs-string">"current_step"</span>: <span class="hljs-string">"specialist"</span>  <span class="hljs-comment"># Triggers behavior change</span>
        }
    )
</code></pre>
<h2 data-id="heading-4">äº”ã€å®ç°æ–¹æ¡ˆ</h2>
<p>å®ç°äº¤æ¥æœºåˆ¶æœ‰ä¸¤ç§æ–¹å¼ï¼šå¸¦ä¸­é—´ä»¶çš„å•æ™ºèƒ½ä½“æ–¹æ¡ˆï¼ˆä¸€ä¸ªæ™ºèƒ½ä½“æ­é…åŠ¨æ€é…ç½®ï¼‰ä¸å¤šæ™ºèƒ½ä½“å­å›¾æ–¹æ¡ˆï¼ˆå°†ç‹¬ç«‹æ™ºèƒ½ä½“ä½œä¸ºå›¾èŠ‚ç‚¹ï¼‰ã€‚</p>
<h3 data-id="heading-5">5.1 å¸¦ä¸­é—´ä»¶çš„å•æ™ºèƒ½ä½“æ–¹æ¡ˆ</h3>
<p>å•ä¸ªæ™ºèƒ½ä½“åŸºäºçŠ¶æ€è°ƒæ•´è‡ªèº«è¡Œä¸ºã€‚ä¸­é—´ä»¶ä¼šæ‹¦æˆªæ¯æ¬¡æ¨¡å‹è°ƒç”¨ï¼Œå¹¶åŠ¨æ€è°ƒæ•´ç³»ç»Ÿæç¤ºè¯ä¸å¯ç”¨å·¥å…·ã€‚å·¥å…·é€šè¿‡æ›´æ–°çŠ¶æ€å˜é‡æ¥è§¦å‘çŠ¶æ€äº¤æ¥ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> AgentState, create_agent
<span class="hljs-keyword">from</span> langchain.agents.middleware <span class="hljs-keyword">import</span> wrap_model_call, ModelRequest, ModelResponse
<span class="hljs-keyword">from</span> langchain.tools <span class="hljs-keyword">import</span> tool, ToolRuntime
<span class="hljs-keyword">from</span> langchain.messages <span class="hljs-keyword">import</span> ToolMessage
<span class="hljs-keyword">from</span> langgraph.types <span class="hljs-keyword">import</span> Command
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Callable</span>

<span class="hljs-comment"># 1. Define state with current_step tracker</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SupportState</span>(<span class="hljs-title class_ inherited__">AgentState</span>):  
    <span class="hljs-string">"""Track which step is currently active."""</span>
    current_step: <span class="hljs-built_in">str</span> = <span class="hljs-string">"triage"</span>
    warranty_status: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span> = <span class="hljs-literal">None</span>

<span class="hljs-comment"># 2. Tools update current_step via Command</span>
<span class="hljs-meta">@tool</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">record_warranty_status</span>(<span class="hljs-params">
    status: <span class="hljs-built_in">str</span>,
    runtime: ToolRuntime[<span class="hljs-literal">None</span>, SupportState]
</span>) -&gt; Command:  
    <span class="hljs-string">"""Record warranty status and transition to next step."""</span>
    <span class="hljs-keyword">return</span> Command(update={  
        <span class="hljs-string">"messages"</span>: [  
            ToolMessage(
                content=<span class="hljs-string">f"Warranty status recorded: <span class="hljs-subst">{status}</span>"</span>,
                tool_call_id=runtime.tool_call_id
            )
        ],
        <span class="hljs-string">"warranty_status"</span>: status,
        <span class="hljs-comment"># Transition to next step</span>
        <span class="hljs-string">"current_step"</span>: <span class="hljs-string">"specialist"</span>
    })

<span class="hljs-comment"># 3. Middleware applies dynamic configuration based on current_step</span>
<span class="hljs-meta">@wrap_model_call</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">apply_step_config</span>(<span class="hljs-params">
    request: ModelRequest,
    handler: <span class="hljs-type">Callable</span>[[ModelRequest], ModelResponse]
</span>) -&gt; ModelResponse:
    <span class="hljs-string">"""Configure agent behavior based on current_step."""</span>
    step = request.state.get(<span class="hljs-string">"current_step"</span>, <span class="hljs-string">"triage"</span>)  

    <span class="hljs-comment"># Map steps to their configurations</span>
    configs = {
        <span class="hljs-string">"triage"</span>: {
            <span class="hljs-string">"prompt"</span>: <span class="hljs-string">"Collect warranty information..."</span>,
            <span class="hljs-string">"tools"</span>: [record_warranty_status]
        },
        <span class="hljs-string">"specialist"</span>: {
            <span class="hljs-string">"prompt"</span>: <span class="hljs-string">"Provide solutions based on warranty: {warranty_status}"</span>,
            <span class="hljs-string">"tools"</span>: [provide_solution, escalate]
        }
    }

    config = configs[step]
    request = request.override(  
        system_prompt=config[<span class="hljs-string">"prompt"</span>].<span class="hljs-built_in">format</span>(**request.state),  
        tools=config[<span class="hljs-string">"tools"</span>]  
    )
    <span class="hljs-keyword">return</span> handler(request)

<span class="hljs-comment"># 4. Create agent with middleware</span>
agent = create_agent(
    model,
    tools=[record_warranty_status, provide_solution, escalate],
    state_schema=SupportState,
    middleware=[apply_step_config],  
    checkpointer=InMemorySaver()  <span class="hljs-comment"># Persist state across turns  #</span>
)
</code></pre>
<h3 data-id="heading-6">5.2 å¤šæ™ºèƒ½ä½“å­å›¾</h3>
<p>å¤šä¸ªç‹¬ç«‹çš„æ™ºèƒ½ä½“ä½œä¸ºå›¾ä¸­çš„ä¸åŒèŠ‚ç‚¹å­˜åœ¨ã€‚äº¤æ¥å·¥å…·é€šè¿‡Command.PARENTæŒ‡å®šä¸‹ä¸€ä¸ªå¾…æ‰§è¡Œçš„èŠ‚ç‚¹ï¼Œä»¥æ­¤åœ¨æ™ºèƒ½ä½“èŠ‚ç‚¹ä¹‹é—´è¿›è¡Œè°ƒåº¦ã€‚
å­å›¾äº¤æ¥éœ€è¦ç²¾å¿ƒè®¾è®¡ä¸Šä¸‹æ–‡ã€‚ä¸å•æ™ºèƒ½ä½“ä¸­é—´ä»¶ï¼ˆå…¶æ¶ˆæ¯å†å²å¯è‡ªç„¶æµè½¬ï¼‰ä¸åŒï¼Œä½ å¿…é¡»æ˜ç¡®å†³å®šåœ¨æ™ºèƒ½ä½“ä¹‹é—´ä¼ é€’å“ªäº›æ¶ˆæ¯ã€‚å¦‚æœè¿™ä¸€æ­¥å¤„ç†ä¸å½“ï¼Œæ™ºèƒ½ä½“å°†ä¼šæ¥æ”¶åˆ°æ ¼å¼é”™è¯¯çš„å¯¹è¯å†å²ï¼Œæˆ–å†—ä½™è‡ƒè‚¿çš„ä¸Šä¸‹æ–‡ã€‚è¯¦æƒ…å‚è§ä¸‹æ–‡çš„ä¸Šä¸‹æ–‡è®¾è®¡éƒ¨åˆ†ã€‚</p>
<h4 data-id="heading-7">5.2.1 å®ç°ç¤ºä¾‹</h4>
<p>æœ¬ç¤ºä¾‹å±•ç¤ºäº†ä¸€ä¸ªåŒ…å«ç‹¬ç«‹é”€å”®æ™ºèƒ½ä½“ä¸æ”¯æŒæ™ºèƒ½ä½“çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿã€‚æ¯ä¸ªæ™ºèƒ½ä½“å‡ä¸ºç‹¬ç«‹çš„å›¾èŠ‚ç‚¹ï¼Œäº¤æ¥å·¥å…·å¯æ”¯æŒæ™ºèƒ½ä½“ä¹‹é—´çš„å¯¹è¯è½¬æ¥ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Literal</span>

<span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> AgentState, create_agent
<span class="hljs-keyword">from</span> langchain.messages <span class="hljs-keyword">import</span> AIMessage, ToolMessage
<span class="hljs-keyword">from</span> langchain.tools <span class="hljs-keyword">import</span> tool, ToolRuntime
<span class="hljs-keyword">from</span> langgraph.graph <span class="hljs-keyword">import</span> StateGraph, START, END
<span class="hljs-keyword">from</span> langgraph.types <span class="hljs-keyword">import</span> Command
<span class="hljs-keyword">from</span> typing_extensions <span class="hljs-keyword">import</span> NotRequired


<span class="hljs-comment"># 1. Define state with active_agent tracker</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MultiAgentState</span>(<span class="hljs-title class_ inherited__">AgentState</span>):
    active_agent: NotRequired[<span class="hljs-built_in">str</span>]


<span class="hljs-comment"># 2. Create handoff tools</span>
<span class="hljs-meta">@tool</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">transfer_to_sales</span>(<span class="hljs-params">
    runtime: ToolRuntime,
</span>) -&gt; Command:
    <span class="hljs-string">"""Transfer to the sales agent."""</span>
    last_ai_message = <span class="hljs-built_in">next</span>(  
        msg <span class="hljs-keyword">for</span> msg <span class="hljs-keyword">in</span> <span class="hljs-built_in">reversed</span>(runtime.state[<span class="hljs-string">"messages"</span>]) <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(msg, AIMessage)  
    )  
    transfer_message = ToolMessage(  
        content=<span class="hljs-string">"Transferred to sales agent from support agent"</span>,  
        tool_call_id=runtime.tool_call_id,  
    )  
    <span class="hljs-keyword">return</span> Command(
        goto=<span class="hljs-string">"sales_agent"</span>,
        update={
            <span class="hljs-string">"active_agent"</span>: <span class="hljs-string">"sales_agent"</span>,
            <span class="hljs-string">"messages"</span>: [last_ai_message, transfer_message],  
        },
        graph=Command.PARENT,
    )


<span class="hljs-meta">@tool</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">transfer_to_support</span>(<span class="hljs-params">
    runtime: ToolRuntime,
</span>) -&gt; Command:
    <span class="hljs-string">"""Transfer to the support agent."""</span>
    last_ai_message = <span class="hljs-built_in">next</span>(  
        msg <span class="hljs-keyword">for</span> msg <span class="hljs-keyword">in</span> <span class="hljs-built_in">reversed</span>(runtime.state[<span class="hljs-string">"messages"</span>]) <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(msg, AIMessage)  
    )  
    transfer_message = ToolMessage(  
        content=<span class="hljs-string">"Transferred to support agent from sales agent"</span>,  
        tool_call_id=runtime.tool_call_id,  
    )  
    <span class="hljs-keyword">return</span> Command(
        goto=<span class="hljs-string">"support_agent"</span>,
        update={
            <span class="hljs-string">"active_agent"</span>: <span class="hljs-string">"support_agent"</span>,
            <span class="hljs-string">"messages"</span>: [last_ai_message, transfer_message],  
        },
        graph=Command.PARENT,
    )


<span class="hljs-comment"># 3. Create agents with handoff tools</span>
sales_agent = create_agent(
    model=<span class="hljs-string">"anthropic:claude-sonnet-4-20250514"</span>,
    tools=[transfer_to_support],
    system_prompt=<span class="hljs-string">"You are a sales agent. Help with sales inquiries. If asked about technical issues or support, transfer to the support agent."</span>,
)

support_agent = create_agent(
    model=<span class="hljs-string">"anthropic:claude-sonnet-4-20250514"</span>,
    tools=[transfer_to_sales],
    system_prompt=<span class="hljs-string">"You are a support agent. Help with technical issues. If asked about pricing or purchasing, transfer to the sales agent."</span>,
)


<span class="hljs-comment"># 4. Create agent nodes that invoke the agents</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">call_sales_agent</span>(<span class="hljs-params">state: MultiAgentState</span>) -&gt; Command:
    <span class="hljs-string">"""Node that calls the sales agent."""</span>
    response = sales_agent.invoke(state)
    <span class="hljs-keyword">return</span> response


<span class="hljs-keyword">def</span> <span class="hljs-title function_">call_support_agent</span>(<span class="hljs-params">state: MultiAgentState</span>) -&gt; Command:
    <span class="hljs-string">"""Node that calls the support agent."""</span>
    response = support_agent.invoke(state)
    <span class="hljs-keyword">return</span> response


<span class="hljs-comment"># 5. Create router that checks if we should end or continue</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">route_after_agent</span>(<span class="hljs-params">
    state: MultiAgentState,
</span>) -&gt; <span class="hljs-type">Literal</span>[<span class="hljs-string">"sales_agent"</span>, <span class="hljs-string">"support_agent"</span>, <span class="hljs-string">"__end__"</span>]:
    <span class="hljs-string">"""Route based on active_agent, or END if the agent finished without handoff."""</span>
    messages = state.get(<span class="hljs-string">"messages"</span>, [])

    <span class="hljs-comment"># Check the last message - if it's an AIMessage without tool calls, we're done</span>
    <span class="hljs-keyword">if</span> messages:
        last_msg = messages[-<span class="hljs-number">1</span>]
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(last_msg, AIMessage) <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> last_msg.tool_calls:  
            <span class="hljs-keyword">return</span> <span class="hljs-string">"__end__"</span>

    <span class="hljs-comment"># Otherwise route to the active agent</span>
    active = state.get(<span class="hljs-string">"active_agent"</span>, <span class="hljs-string">"sales_agent"</span>)
    <span class="hljs-keyword">return</span> active <span class="hljs-keyword">if</span> active <span class="hljs-keyword">else</span> <span class="hljs-string">"sales_agent"</span>


<span class="hljs-keyword">def</span> <span class="hljs-title function_">route_initial</span>(<span class="hljs-params">
    state: MultiAgentState,
</span>) -&gt; <span class="hljs-type">Literal</span>[<span class="hljs-string">"sales_agent"</span>, <span class="hljs-string">"support_agent"</span>]:
    <span class="hljs-string">"""Route to the active agent based on state, default to sales agent."""</span>
    <span class="hljs-keyword">return</span> state.get(<span class="hljs-string">"active_agent"</span>) <span class="hljs-keyword">or</span> <span class="hljs-string">"sales_agent"</span>


<span class="hljs-comment"># 6. Build the graph</span>
builder = StateGraph(MultiAgentState)
builder.add_node(<span class="hljs-string">"sales_agent"</span>, call_sales_agent)
builder.add_node(<span class="hljs-string">"support_agent"</span>, call_support_agent)

<span class="hljs-comment"># Start with conditional routing based on initial active_agent</span>
builder.add_conditional_edges(START, route_initial, [<span class="hljs-string">"sales_agent"</span>, <span class="hljs-string">"support_agent"</span>])

<span class="hljs-comment"># After each agent, check if we should end or route to another agent</span>
builder.add_conditional_edges(
    <span class="hljs-string">"sales_agent"</span>, route_after_agent, [<span class="hljs-string">"sales_agent"</span>, <span class="hljs-string">"support_agent"</span>, END]
)
builder.add_conditional_edges(
    <span class="hljs-string">"support_agent"</span>, route_after_agent, [<span class="hljs-string">"sales_agent"</span>, <span class="hljs-string">"support_agent"</span>, END]
)

graph = builder.<span class="hljs-built_in">compile</span>()
result = graph.invoke(
    {
        <span class="hljs-string">"messages"</span>: [
            {
                <span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>,
                <span class="hljs-string">"content"</span>: <span class="hljs-string">"Hi, I'm having trouble with my account login. Can you help?"</span>,
            }
        ]
    }
)

<span class="hljs-keyword">for</span> msg <span class="hljs-keyword">in</span> result[<span class="hljs-string">"messages"</span>]:
    msg.pretty_print()
</code></pre>
<p>å¯¹äºå¤§å¤šæ•°ä»»åŠ¡äº¤æ¥åœºæ™¯ï¼Œå»ºè®®ä½¿ç”¨æ­é…ä¸­é—´ä»¶çš„å•æ™ºèƒ½ä½“æ–¹æ¡ˆâ€”â€” è¿™ç§æ–¹å¼æ›´ä¸ºç®€æ´ã€‚ä»…å½“ä½ éœ€è¦å®ç°å®šåˆ¶åŒ–æ™ºèƒ½ä½“æ—¶ï¼ˆä¾‹å¦‚ï¼ŒæŸä¸ªèŠ‚ç‚¹æœ¬èº«æ˜¯åŒ…å«åæ€æˆ–æ£€ç´¢æµç¨‹çš„å¤æ‚å­å›¾ï¼‰ï¼Œæ‰è€ƒè™‘ä½¿ç”¨å¤šæ™ºèƒ½ä½“å­å›¾ã€‚</p>
<h4 data-id="heading-8">5.2.2 ä¸Šä¸‹æ–‡å·¥ç¨‹</h4>
<p>åœ¨å­å›¾äº¤æ¥è¿‡ç¨‹ä¸­ï¼Œä½ å¯ä»¥ç²¾å‡†æ§åˆ¶æ™ºèƒ½ä½“ä¹‹é—´æµè½¬çš„æ¶ˆæ¯å†…å®¹ã€‚è¿™ç§ç²¾å‡†æ€§å¯¹äºç»´æŒæœ‰æ•ˆçš„å¯¹è¯å†å²ã€é¿å…å› ä¸Šä¸‹æ–‡å†—ä½™è€Œå¹²æ‰°ä¸‹æ¸¸æ™ºèƒ½ä½“è‡³å…³é‡è¦ã€‚
äº¤æ¥è¿‡ç¨‹ä¸­çš„ä¸Šä¸‹æ–‡å¤„ç†
åœ¨æ™ºèƒ½ä½“é—´è¿›è¡Œä»»åŠ¡äº¤æ¥æ—¶ï¼Œä½ éœ€è¦ç¡®ä¿å¯¹è¯å†å²çš„æœ‰æ•ˆæ€§ã€‚å¤§è¯­è¨€æ¨¡å‹è¦æ±‚å·¥å…·è°ƒç”¨ä¸å…¶å“åº”å†…å®¹ä¸€ä¸€å¯¹åº”ï¼Œå› æ­¤åœ¨ä½¿ç”¨Command.PARENTäº¤æ¥è‡³å…¶ä»–æ™ºèƒ½ä½“æ—¶ï¼Œå¿…é¡»åŒæ—¶ä¼ å…¥ä»¥ä¸‹ä¸¤ç±»æ¶ˆæ¯ï¼š
åŒ…å«å·¥å…·è°ƒç”¨çš„AI æ¶ˆæ¯ï¼ˆå³è§¦å‘ä»»åŠ¡äº¤æ¥çš„é‚£æ¡æ¶ˆæ¯ï¼‰
ç¡®è®¤ä»»åŠ¡äº¤æ¥çš„å·¥å…·æ¶ˆæ¯ï¼ˆå³é’ˆå¯¹è¯¥å·¥å…·è°ƒç”¨ç”Ÿæˆçš„äººå·¥å“åº”ï¼‰
è‹¥ç¼ºå°‘è¿™ç§ä¸€ä¸€å¯¹åº”çš„æ¶ˆæ¯é…å¯¹ï¼Œæ¥æ”¶æ–¹æ™ºèƒ½ä½“å°†ä¼šè·å–ä¸å®Œæ•´çš„å¯¹è¯å†…å®¹ï¼Œè¿›è€Œå¯èƒ½äº§ç”Ÿé”™è¯¯æˆ–å‡ºç°ä¸ç¬¦åˆé¢„æœŸçš„è¡Œä¸ºã€‚
ä»¥ä¸‹ç¤ºä¾‹åŸºäºä»…è°ƒç”¨äº†äº¤æ¥å·¥å…·çš„åœºæ™¯ï¼ˆæ— å¹¶è¡Œå·¥å…·è°ƒç”¨ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@tool</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">transfer_to_sales</span>(<span class="hljs-params">runtime: ToolRuntime</span>) -&gt; Command:
    <span class="hljs-comment"># Get the AI message that triggered this handoff</span>
    last_ai_message = runtime.state[<span class="hljs-string">"messages"</span>][-<span class="hljs-number">1</span>]

    <span class="hljs-comment"># Create an artificial tool response to complete the pair</span>
    transfer_message = ToolMessage(
        content=<span class="hljs-string">"Transferred to sales agent"</span>,
        tool_call_id=runtime.tool_call_id,
    )

    <span class="hljs-keyword">return</span> Command(
        goto=<span class="hljs-string">"sales_agent"</span>,
        update={
            <span class="hljs-string">"active_agent"</span>: <span class="hljs-string">"sales_agent"</span>,
            <span class="hljs-comment"># Pass only these two messages, not the full subagent history</span>
            <span class="hljs-string">"messages"</span>: [last_ai_message, transfer_message],
        },
        graph=Command.PARENT,
    )
</code></pre>
<p>ä¸ºä»€ä¹ˆä¸ä¼ é€’å­æ™ºèƒ½ä½“çš„å…¨éƒ¨æ¶ˆæ¯ï¼Ÿè™½ç„¶ä½ å¯ä»¥åœ¨ä»»åŠ¡äº¤æ¥æ—¶é™„å¸¦å­æ™ºèƒ½ä½“çš„å®Œæ•´å¯¹è¯å†…å®¹ï¼Œä½†è¿™ç§åšæ³•å¾€å¾€ä¼šå¼•å‘è¯¸å¤šé—®é¢˜ï¼šæ¥æ”¶æ–¹æ™ºèƒ½ä½“å¯èƒ½ä¼šè¢«ä¸ç›¸å…³çš„å†…éƒ¨æ¨ç†å†…å®¹å¹²æ‰°è€Œé™·å…¥æ··ä¹±ï¼ŒåŒæ—¶è¿˜ä¼šé€ æˆä¸å¿…è¦çš„ä»¤ç‰Œæˆæœ¬å¢åŠ ã€‚
ä»…ä¼ é€’ä»»åŠ¡äº¤æ¥æ¶ˆæ¯å¯¹ï¼Œå¯ä»¥è®©ä¸»å›¾çš„ä¸Šä¸‹æ–‡å§‹ç»ˆèšç„¦äºé«˜å±‚çº§çš„ååŒè°ƒåº¦ã€‚å¦‚æœæ¥æ”¶æ–¹æ™ºèƒ½ä½“éœ€è¦æ›´å¤šä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå»ºè®®åœ¨å·¥å…·æ¶ˆæ¯çš„å†…å®¹ä¸­æ€»ç»“å­æ™ºèƒ½ä½“çš„å·¥ä½œå†…å®¹ï¼Œè€Œéç›´æ¥ä¼ é€’åŸå§‹çš„æ¶ˆæ¯å†å²ã€‚</p>
<p>å°†æ§åˆ¶æƒäº¤è¿˜ç»™ç”¨æˆ·
å½“æŠŠæ§åˆ¶æƒäº¤è¿˜ç»™ç”¨æˆ·ï¼ˆç»“æŸæ™ºèƒ½ä½“çš„æœ¬è½®ä»»åŠ¡ï¼‰æ—¶ï¼Œéœ€ç¡®ä¿æœ€ç»ˆå‘é€çš„æ¶ˆæ¯ä¸ºä¸€æ¡AI æ¶ˆæ¯ã€‚æ­¤ä¸¾æ—¢èƒ½ç»´æŒæœ‰æ•ˆçš„å¯¹è¯å†å²ï¼Œä¹Ÿå¯å‘ç”¨æˆ·ç•Œé¢ä¼ é€’ â€œæ™ºèƒ½ä½“å·²å®Œæˆå½“å‰ä»»åŠ¡â€ çš„ä¿¡å·ã€‚</p>
<h2 data-id="heading-9">å…­ã€å®ç°æ³¨æ„äº‹é¡¹</h2>
<p>åœ¨è®¾è®¡å¤šæ™ºèƒ½ä½“ç³»ç»Ÿæ—¶ï¼Œéœ€è€ƒé‡ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li>ä¸Šä¸‹æ–‡è¿‡æ»¤ç­–ç•¥ï¼šæ¯ä¸ªæ™ºèƒ½ä½“åº”æ¥æ”¶å®Œæ•´çš„å¯¹è¯å†å²ã€ç»è¿‡ç­›é€‰çš„å†…å®¹ç‰‡æ®µï¼Œè¿˜æ˜¯å¯¹è¯æ‘˜è¦ï¼Ÿä¸åŒæ™ºèƒ½ä½“å› å…¶èŒèƒ½ä¸åŒï¼Œæ‰€éœ€çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ä¹Ÿå¯èƒ½å­˜åœ¨å·®å¼‚ã€‚</li>
<li>å·¥å…·è¯­ä¹‰å®šä¹‰ï¼šæ˜ç¡®äº¤æ¥å·¥å…·ä»…ç”¨äºæ›´æ–°è·¯ç”±çŠ¶æ€ï¼Œè¿˜æ˜¯åŒæ—¶ä¼šäº§ç”Ÿé™„å¸¦å½±å“ã€‚ä¾‹å¦‚ï¼Œtransfer_to_sales() å‡½æ•°æ˜¯å¦éœ€è¦åŒæ­¥åˆ›å»ºå”®åå·¥å•ï¼Œè¿˜æ˜¯åº”å°†åˆ›å»ºå·¥å•ä½œä¸ºä¸€é¡¹ç‹¬ç«‹æ“ä½œï¼Ÿ</li>
<li>ä»¤ç‰Œæˆæœ¬ä¼˜åŒ–ï¼šå¹³è¡¡ä¸Šä¸‹æ–‡å®Œæ•´æ€§ä¸ä»¤ç‰Œæ¶ˆè€—æˆæœ¬ã€‚éšç€å¯¹è¯ç¯‡å¹…ä¸æ–­å¢åŠ ï¼Œå¯¹è¯æ‘˜è¦ç”Ÿæˆä¸é€‰æ‹©æ€§ä¸Šä¸‹æ–‡ä¼ é€’çš„é‡è¦æ€§ä¼šæ„ˆå‘å‡¸æ˜¾ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring-AI ç»“åˆè‡ªå®šä¹‰ mcp server å®ç°é£ä¹¦æ™ºèƒ½æœºå™¨äºº]]></title>    <link>https://juejin.cn/post/7589220406319185956</link>    <guid>https://juejin.cn/post/7589220406319185956</guid>    <pubDate>2025-12-30T05:40:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589220406319185956" data-draft-id="7589220406319169572" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring-AI ç»“åˆè‡ªå®šä¹‰ mcp server å®ç°é£ä¹¦æ™ºèƒ½æœºå™¨äºº"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,MCP,Spring Boot"/> <meta itemprop="datePublished" content="2025-12-30T05:40:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Kings90"/> <meta itemprop="url" content="https://juejin.cn/user/553809590620765"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring-AI ç»“åˆè‡ªå®šä¹‰ mcp server å®ç°é£ä¹¦æ™ºèƒ½æœºå™¨äºº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/553809590620765/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Kings90
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T05:40:24.000Z" title="Tue Dec 30 2025 05:40:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. ç®€ä»‹</h2>
<p>æœ¬æ–‡ä¸»è¦ä»‹ç»åŸºäº spring ai è‡ªå®šä¹‰æ­å»º mcp æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ï¼Œä¸»è¦åœºæ™¯æ˜¯ï¼š</p>
<p><code>åŸºäºæœ¬åœ°çš„mcpæœåŠ¡è®©é£ä¹¦æœºå™¨äººè·Ÿåœºæ™¯å›ç­”ä¸åŒçš„é—®é¢˜</code></p>
<p>å®ç°æ•ˆæœå¦‚ä¸‹</p>
<p><img src="http://openwrite.cn/uploads/15225/58081/6fd0317d-16a2-40ab-aa9b-29668e766924.png" alt="sample.png" loading="lazy"/></p>
<p>æœ€åé™„äº†æºç é“¾æ¥.æ•´ä½“ä»£ç éå¸¸ç®€å•ï¼Œå®¹æ˜“ä¸Šæ‰‹ã€‚</p>
<h2 data-id="heading-1">2.æ¦‚å¿µ</h2>
<h3 data-id="heading-2">2.1 ä»€ä¹ˆæ˜¯ AI MCPï¼Ÿ</h3>
<p><strong>MCPï¼ˆModel Context Protocolï¼‰</strong> æ˜¯ä¸€ç§ â€‹<strong>æ ‡å‡†åŒ–åè®®</strong>â€‹ï¼Œç”¨æ¥è§£å†³ä¸€ä¸ªé•¿æœŸç—›ç‚¹ï¼š</p>
<blockquote>
<p>ğŸ‘‰ <strong>å¦‚ä½•è®© AIâ€œå®‰å…¨ã€å¯æ§ã€æ ‡å‡†åŒ–åœ°â€è°ƒç”¨å¤–éƒ¨å·¥å…· / ç³»ç»Ÿèƒ½åŠ›ï¼Ÿ</strong></p>
</blockquote>
<p>å®ƒçš„æ ¸å¿ƒç›®æ ‡ä¸æ˜¯â€œè®© AI æ›´èªæ˜â€ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>è®© <strong>AI èƒ½è°ƒç”¨çœŸå®ç³»ç»Ÿ</strong></li>
<li>åŒæ—¶ <strong>é¿å… AI ä¹±ç¼–ã€ä¹±è¿ã€ä¹±è®¿é—®</strong></li>
<li>å¹¶ä¸” <strong>å·¥å…·æ¥å…¥æ–¹å¼ç»Ÿä¸€</strong></li>
</ul>
<h3 data-id="heading-3">2.2 MCP è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h3>
<h4 data-id="heading-4">1ï¸âƒ£ ä¼ ç»Ÿ Function Call çš„é—®é¢˜</h4>
<p>ä»¥ OpenAI Function Calling / Tool Calling ä¸ºä¾‹ï¼š</p>
<ul>
<li>å·¥å…·å®šä¹‰å†™æ­»åœ¨ Prompt æˆ–ä»£ç é‡Œ</li>
<li>æ¯ä¸ª AI æ¡†æ¶ä¸€å¥—æ¥å£</li>
<li>æƒé™ / ç”Ÿå‘½å‘¨æœŸ / è¿æ¥ç®¡ç†å…¨é ä¸šåŠ¡è‡ªå·±å†™</li>
<li>å·¥å…·å¤šäº†ä»¥å <strong>æéš¾ç»´æŠ¤</strong></li>
</ul>
<p>ğŸ‘‰ åœ¨çœŸå®ç³»ç»Ÿé‡Œä¼šå˜æˆï¼š</p>
<ul>
<li>Prompt å¾ˆé•¿</li>
<li>Tool å®šä¹‰é‡å¤</li>
<li>ä¸åŒ AI æ¨¡å‹ä¸å¯å¤ç”¨</li>
</ul>
<h4 data-id="heading-5">2ï¸âƒ£ MCP çš„è§£å†³æ€è·¯</h4>
<p>MCP æŠŠ â€‹<strong>å·¥å…·å˜æˆä¸€ä¸ªæ ‡å‡†åŒ–çš„ Server</strong>â€‹ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">AI Model
   |
   |  MCP åè®®
   |
MCP <span class="hljs-built_in">Client</span>  â”€â”€â”€â”€â”€â”€ MCP <span class="hljs-built_in">Server</span>
                   â”œâ”€ æŸ¥æ•°æ®åº“
                   â”œâ”€ è°ƒå†…éƒ¨ç³»ç»Ÿ
                   â”œâ”€ æŸ¥æ–‡ä»¶
                   â”œâ”€ è°ƒ HTTP API
</code></pre>
<p>AI â€‹<strong>ä¸ç›´æ¥æ¥è§¦å·¥å…·å®ç°</strong>â€‹ï¼Œåªé€šè¿‡ MCP åè®®ï¼š</p>
<ul>
<li>å‘ç°å·¥å…·</li>
<li>è°ƒç”¨å·¥å…·</li>
<li>è·å–ç»“æ„åŒ–ç»“æœ</li>
</ul>
<h2 data-id="heading-6">3. å·¥ç¨‹ç»“æ„</h2>
<p>ä¸»è¦åˆ†ä¸º2ä¸ªæ¨¡å—ï¼Œ<code>mcp-server</code> å’Œ <code>mcp-client</code>,  mcp-clienté‡Œé¢é€šè¿‡ <code>java -jar</code> çš„å½¢å¼è¿è¡Œ mcp æœåŠ¡ç«¯ï¼Œåœ¨ <code>mcp-client</code> æœ€ç»ˆç»“åˆ AI ä»¥åŠé£ä¹¦æœºå™¨äººçš„é›†æˆå®ç°æ¶ˆæ¯çš„å›å¤.</p>
<p><img src="http://openwrite.cn/uploads/15225/58081/855468de-167f-424d-8f40-dee117ca8293.png" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-7">4. ç›¸å…³æºç ä»‹ç»</h2>
<h3 data-id="heading-8">4.1 mcp æœåŠ¡ç«¯</h3>
<p>æœåŠ¡ç«¯éå¸¸ç®€å•ï¼Œä¾‹å¦‚ä¿ç•™ä¸€ä¸ªå¤©æ°”çš„æœåŠ¡ï¼Œåªéœ€è¦åœ¨æ–¹æ³•ä¸ŠåŠ å…¥<code>org.springframework.ai.tool.annotation.Tool;</code> æ³¨è§£å³å¯</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> io.kings1990.mcp.mcpserver.enums.WeatherType;
<span class="hljs-keyword">import</span> io.kings1990.mcp.mcpserver.record.WeatherRequest;
<span class="hljs-keyword">import</span> io.kings1990.mcp.mcpserver.record.WeatherResult;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.ai.tool.annotation.Tool;
<span class="hljs-keyword">import</span> org.springframework.ai.tool.annotation.ToolParam;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeatherService</span> {


    <span class="hljs-meta">@Tool(name = "getWeather", description = "æŸ¥è¯¢æŒ‡å®šåŸå¸‚çš„å¤©æ°”")</span>
    <span class="hljs-keyword">public</span> WeatherResult <span class="hljs-title function_">getWeather</span><span class="hljs-params">(<span class="hljs-meta">@ToolParam(description = "è¯·æ±‚å‚æ•°")</span> WeatherRequest req)</span> {
        log.info(<span class="hljs-string">"MCP Tool getWeather called, city={}"</span>, req.city());
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeatherResult</span>(
                req.city(),
                WeatherType.SUNNY,
                <span class="hljs-string">"25Â°C"</span>,
                <span class="hljs-string">"Â°C"</span>,
                <span class="hljs-string">"mcp:getWeather"</span>
        );
    }
}
</code></pre>
<h3 data-id="heading-9">4.2 mcpå®¢æˆ·ç«¯</h3>
<h4 data-id="heading-10">4.2.1è®© AI é›†æˆ ToolCallbacks</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AiConfig</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> ChatClient <span class="hljs-title function_">chatClient</span><span class="hljs-params">(ChatClient.Builder builder, List&lt;McpSyncClient&gt; mcpSyncClients)</span> {
        <span class="hljs-keyword">return</span> builder
                .defaultSystem(<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªAIåŠ©æ‰‹ï¼Œå¿…é¡»è°ƒç”¨å·¥å…· kings-spring-ai-mcp-tools ä¸‹çš„æ–¹æ³•ï¼Œå¦‚æœå·¥å…·ä¸å¯ç”¨ï¼Œå°±æ˜ç¡®è¯´æ˜æ— æ³•è°ƒç”¨å·¥å…·ï¼Œä¸è¦ç¼–é€ ã€‚"</span>)
                .defaultToolCallbacks(
                        SyncMcpToolCallbackProvider.builder()
                                .mcpClients(mcpSyncClients)
                                .build()
                )
                .build();
    }
}
</code></pre>
<h4 data-id="heading-11">4.2.2åŸºäºé£ä¹¦æœºå™¨äººçš„é•¿é“¾æ¥é›†æˆï¼Œå®ç°æ¶ˆæ¯çš„è‡ªåŠ¨å›å¤</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> cn.hutool.core.thread.ThreadUtil;
<span class="hljs-keyword">import</span> com.lark.oapi.event.EventDispatcher;
<span class="hljs-keyword">import</span> com.lark.oapi.service.im.ImService;
<span class="hljs-keyword">import</span> com.lark.oapi.service.im.v1.model.P2MessageReceiveV1;
<span class="hljs-keyword">import</span> com.lark.oapi.ws.Client;
<span class="hljs-keyword">import</span> jakarta.annotation.Resource;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.DisposableBean;
<span class="hljs-keyword">import</span> org.springframework.boot.CommandLineRunner;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LarkWsListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CommandLineRunner</span>, DisposableBean {

    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> LarkBotService botService;

    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> Client.Builder larkWsBuilder;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(String... args)</span> {
        <span class="hljs-comment">//verificationTokenå’Œ encryptionKey å¯é€‰ï¼Œç”¨äºéªŒè¯å’Œè§£å¯†äº‹ä»¶</span>
        <span class="hljs-type">EventDispatcher</span> <span class="hljs-variable">handler</span> <span class="hljs-operator">=</span> EventDispatcher.newBuilder(<span class="hljs-string">""</span>, <span class="hljs-string">""</span>)
                .onP2MessageReceiveV1(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ImService</span>.P2MessageReceiveV1Handler() {
                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handle</span><span class="hljs-params">(P2MessageReceiveV1 event)</span> <span class="hljs-keyword">throws</span> Exception {

                        <span class="hljs-comment">// 1) messageId ç”¨äº reply</span>
                        <span class="hljs-type">String</span> <span class="hljs-variable">messageId</span> <span class="hljs-operator">=</span> event.getEvent().getMessage().getMessageId();

                        <span class="hljs-comment">// 2) content æ˜¯ JSON å­—ç¬¦ä¸²ï¼Œéœ€è¦è§£æå‡ºæ–‡æœ¬</span>
                        <span class="hljs-type">String</span> <span class="hljs-variable">contentJson</span> <span class="hljs-operator">=</span> event.getEvent().getMessage().getContent();

                        System.err.println(<span class="hljs-string">"æ”¶åˆ°æ¶ˆæ¯: "</span> + contentJson);

                        <span class="hljs-type">String</span> <span class="hljs-variable">userText</span> <span class="hljs-operator">=</span> LarkMsgParser.extractText(contentJson);

                        ThreadUtil.execAsync(() -&gt; {
                            botService.onUserMessage(messageId, userText);
                        });

                    }
                })
                .build();

        <span class="hljs-comment">// å»ºè®®æŠŠ appId/appSecret æ”¾é…ç½®æ–‡ä»¶</span>
        <span class="hljs-type">Client</span> <span class="hljs-variable">wsClient</span> <span class="hljs-operator">=</span> larkWsBuilder.eventHandler(handler).build();

        wsClient.start();
    }


    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">destroy</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {

    }
}
</code></pre>
<h4 data-id="heading-12">4.2.3 AI Api-Key æ¤å…¥</h4>
<p>æˆ‘è¿™è¾¹ä½¿ç”¨ zhipu ai. è¿™è¾¹å¯ä»¥è·å–<a href="https://link.juejin.cn?target=https%3A%2F%2Fbigmodel.cn%2Fusercenter%2Fproj-mgmt%2Fapikeys" target="_blank" title="https://bigmodel.cn/usercenter/proj-mgmt/apikeys" ref="nofollow noopener noreferrer">api-key</a>.</p>
<p>åŠ å…¥ä¾èµ–</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-starter-model-zhipuai<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>å¹¶ä¸”åœ¨é…ç½®ä¸­é…ç½® api-key</p>
<pre><code class="hljs language-xml" lang="xml">spring:
  ai:
    zhipuai:
      api-key: your_api_key_here
      chat:
        options:
          model: glm-4.6
</code></pre>
<h2 data-id="heading-13">5.å¯åŠ¨</h2>
<p>ç›´æ¥è¿è¡Œ<code>mcp-client</code> ä¸»ç¨‹åºï¼ŒæŸ¥çœ‹é£ä¹¦æœºå™¨äººæ˜¯å¦æ³¨å†ŒæˆåŠŸ</p>
<pre><code class="hljs language-arduino" lang="arduino">connected to wss:<span class="hljs-comment">//msg-frontier.feishu.cn/</span>
</code></pre>
<p>å¯åŠ¨æˆåŠŸååœ¨é£ä¹¦åº”ç”¨é‡Œè¾“å…¥ä¾‹å¦‚<code>åŒ—äº¬</code>ï¼Œç­‰å¾…æœºå™¨äººå›å¤</p>
<h2 data-id="heading-14">6.æºç </h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fkings1990%2Fspring-ai-mcp-demo" target="_blank" title="https://github.com/kings1990/spring-ai-mcp-demo" ref="nofollow noopener noreferrer">github ä»“åº“</a>. å¯ä»¥ star æŸ¥çœ‹åç»­æ›´æ–°</p>
<hr/>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fapi-buddy.cn" target="_blank" title="https://api-buddy.cn" ref="nofollow noopener noreferrer">Fast Request</a>æ˜¯ä¸€ä¸ªç±»ä¼¼äº Postman çš„ IDEA æ’ä»¶ã€‚å®ƒæ˜¯ä¸€ä¸ªå¼ºå¤§çš„ restful api å·¥å…·åŒ…æ’ä»¶ï¼Œå¯ä»¥æ ¹æ®å·²æœ‰çš„æ–¹æ³•å¸®åŠ©æ‚¨å¿«é€Ÿç”Ÿæˆ url å’Œ paramsã€‚ <code>Restful Fast Request = APIè°ƒè¯•å·¥å…· + APIç®¡ç†å·¥å…· + APIæœç´¢å·¥å…·</code>ã€‚ å®ƒæœ‰ä¸€ä¸ªæ¼‚äº®çš„ç•Œé¢æ¥å®Œæˆè¯·æ±‚ã€æ£€æŸ¥æœåŠ¡å™¨å“åº”ã€å­˜å‚¨ä½ çš„ api è¯·æ±‚å’Œå¯¼å‡º api è¯·æ±‚ã€‚æ’ä»¶å¸®åŠ©ä½ åœ¨ IDEA ç•Œé¢å†…æ›´å¿«æ›´é«˜æ•ˆå¾—è°ƒè¯•ä½ çš„ API</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ–‡æ¡£è§£æä¸é—®ç­”å®æˆ˜â€”â€”ä¸‰æ­¥æ­å»ºåŸºäºTextInä¸Cozeçš„æ™ºèƒ½æ–‡æ¡£Agentæ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7589246131585876003</link>    <guid>https://juejin.cn/post/7589246131585876003</guid>    <pubDate>2025-12-30T04:48:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589246131585876003" data-draft-id="7589275237037359139" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ–‡æ¡£è§£æä¸é—®ç­”å®æˆ˜â€”â€”ä¸‰æ­¥æ­å»ºåŸºäºTextInä¸Cozeçš„æ™ºèƒ½æ–‡æ¡£Agentæ–¹æ¡ˆ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-30T04:48:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸­æ¯å¯ä¹å¤šåŠ å†°"/> <meta itemprop="url" content="https://juejin.cn/user/3435306702347432"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ–‡æ¡£è§£æä¸é—®ç­”å®æˆ˜â€”â€”ä¸‰æ­¥æ­å»ºåŸºäºTextInä¸Cozeçš„æ™ºèƒ½æ–‡æ¡£Agentæ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3435306702347432/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸­æ¯å¯ä¹å¤šåŠ å†°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T04:48:51.000Z" title="Tue Dec 30 2025 04:48:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å¼•è¨€</h2>
<h3 data-id="heading-1">1.1 å¤æ‚æ–‡æ¡£çš„æ„ŸçŸ¥ç“¶é¢ˆ</h3>
<p>å½“å‰ï¼Œä»¥å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¸ºæ ¸å¿ƒçš„æ™ºèƒ½ä½“ï¼ˆAgentï¼‰æŠ€æœ¯ï¼Œæ­£å¿«é€Ÿèå…¥æ³•å¾‹æ–‡ä¹¦é—®ç­”ã€åˆåŒæ¡æ¬¾æ¯”å¯¹ã€æŠ€æœ¯æ ‡å‡†è§£è¯»ç­‰ä¼ä¸šæ ¸å¿ƒä¸šåŠ¡æµç¨‹ä¸­ã€‚åŸºäº<strong>è‡ªä¸»ä»»åŠ¡ç†è§£ã€æ­¥éª¤è§„åˆ’ä¸å·¥å…·è°ƒç”¨èƒ½åŠ›</strong>ï¼Œæ™ºèƒ½ä½“èƒ½å¤Ÿå¯é æ‰§è¡Œæ•™è‚²ç§‘ç ”è¾…åŠ©ã€æ³•å¾‹ä¿¡æ¯æå–ã€åˆåŒè‡ªåŠ¨æ¯”å¯¹ã€æ ‡å‡†ç»“æ„åŒ–è§£æç­‰ä¸€ç³»åˆ—å¤æ‚ä¸šåŠ¡æ“ä½œï¼Œæœ‰æ•ˆæå‡æ•ˆç‡ä¸å‡†ç¡®æ€§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9d37f8da6584fe78ec8f750917a8137~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=4M4vhB0ePoEjRCs5CYMYzf6AQD4%3D" alt="" loading="lazy"/></p>
<p>ç„¶è€Œï¼Œå½“AgentçœŸæ­£ç”¨äºå¤„ç†ä¸Šè¿°å¤æ‚ä¸šåŠ¡æ–‡æ¡£æ—¶ï¼Œå…¶æ•ˆèƒ½é¦–å…ˆå—é™äºè¾“å…¥çŸ¥è¯†çš„è´¨é‡ï¼Œè€Œè¿™ç›´æ¥æºäºæ–‡æ¡£æœ¬èº«çš„é«˜åº¦å¤æ‚æ€§ã€‚æ­¤ç±»æ–‡æ¡£é€šå¸¸å…·å¤‡å¤šé‡å…¸å‹ç‰¹å¾ï¼šè¯­è¨€æ··åˆã€æ ¼å¼ä¸ä¸€ï¼Œä¸”å…·æœ‰å¼ºçƒˆçš„ç»“æ„ä¾èµ–æ€§â€”â€”æ— è®ºæ˜¯ä¸¥è°¨çš„ç« èŠ‚ç¼–å·ä¸æ¡æ¬¾å¼•ç”¨ï¼Œè¿˜æ˜¯è·¨é¡µåˆ†å¸ƒçš„å¤§å‹è¡¨æ ¼ä¸å¤šå±‚åˆå¹¶å•å…ƒæ ¼ï¼Œå‡æ„æˆæœºå™¨ç†è§£ä¸æ·±å…¥å¤„ç†çš„æ ¹æœ¬éšœç¢ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f5cd34cdc3f4c74aa6895fc869e4856~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=0WkvfZSn6LTp4mOpMvqlDSC566U%3D" alt="" loading="lazy"/></p>
<p>é¢å¯¹å¦‚æ­¤å¤æ‚çš„æ–‡æ¡£ï¼Œä¼ ç»Ÿçš„Agent æµç¨‹å¸¸å—é™äºä¸€ä¸ªæ ¹æœ¬æ€§çš„å·¥ç¨‹éš¾é¢˜ï¼Œå…·ä½“è¡¨ç°ä¸ºä»¥ä¸‹ä¸¤ä¸ªæ ¸å¿ƒç—›ç‚¹ï¼š</p>
<p>é¦–å…ˆï¼Œæ˜¯<strong>è¯­ä¹‰è¾¹ç•Œçš„æ¨¡ç³Š</strong>ã€‚æ–‡æ¡£ä¸­åŸæœ¬å®Œæ•´çš„æ®µè½æˆ–è¡¨æ ¼ï¼Œå¸¸å› è·¨é¡µã€åˆ†æ è€Œè¢«è§£æå·¥å…·åˆ‡æ–­ã€‚åœ¨æ­¤æƒ…å†µä¸‹ï¼Œä¼ ç»Ÿçš„åŸºäºå›ºå®šé•¿åº¦æˆ–ç®€å•æ ‡ç‚¹çš„åˆ†å—ç­–ç•¥ï¼Œå¾€å¾€ç”Ÿæˆå¤§é‡è¯­ä¹‰æ®‹ç¼ºçš„æ–‡æœ¬å—ï¼Œæ— æ³•æ¢å¤å…¶åŸå§‹é€»è¾‘å®Œæ•´æ€§ã€‚</p>
<p>å…¶æ¬¡ï¼Œæ˜¯<strong>ç»“æ„åŒ–ä¿¡æ¯çš„ä¸¢å¤±</strong>ã€‚åˆåŒã€æ ‡ä¹¦ç­‰æ–‡æ¡£ä¸­çš„æ ‡é¢˜ã€åˆ—è¡¨ã€è¡¨æ ¼ç­‰å±‚çº§ä¸å…³ç³»ä¿¡æ¯ï¼Œåœ¨è§£æè¿‡ç¨‹ä¸­ç»å¸¸è¢«ä¸¢å¼ƒï¼Œåç»­çš„åˆ†å—ç­–ç•¥åªèƒ½ä¾èµ–å­—ç¬¦é•¿åº¦ç­‰è¡¨é¢ç‰¹å¾ï¼Œè€Œæ— æ³•å®ç°åŸºäºè¯­ä¹‰ç»“æ„çš„æ™ºèƒ½åˆ‡åˆ†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb9a6ccb9d3649e5b33b39be28a2e9e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=qP0BF2vJK4MjO6AhhJcRAJ%2B97rE%3D" alt="" loading="lazy"/></p>
<p>æ­£å› å¦‚æ­¤ï¼Œæˆ‘ä»¬è®¤è¯†åˆ°ï¼š<strong>æœ‰æ—¶å€™ä¸€ä¸ªæ™ºèƒ½ä½“æ€§èƒ½ç“¶é¢ˆï¼Œå¾€å¾€å¹¶éæºäºå¤§è¯­è¨€æ¨¡å‹çš„èƒ½åŠ›ä¸Šé™ï¼Œè€Œæ›´å–å†³äºçŸ¥è¯†é¢„å¤„ç†é˜¶æ®µçš„è´¨é‡æ§åˆ¶</strong>ã€‚æå‡è§£æä¸åˆ†å—çš„å‡†ç¡®æ€§ï¼Œè¦æå‡ Agent åœ¨å¤æ‚æ–‡æ¡£åœºæ™¯ä¸‹çš„è¡¨ç°ï¼Œå¿…é¡»å…ˆè§£å†³ Agent çš„æ–‡æ¡£æ„ŸçŸ¥é—®é¢˜ã€‚</p>
<h3 data-id="heading-2">1.2 TextInæ–‡æ¡£æ™ºèƒ½è§£æå¼•æ“</h3>
<p>ä¸ºçªç ´ RAG ä¸ Agent åœ¨æ–‡æ¡£æ„ŸçŸ¥å±‚é¢çš„å·¥ç¨‹ç“¶é¢ˆï¼Œå¼•å…¥ä¸“ä¸šçš„æ–‡æ¡£æ™ºèƒ½è§£æå·¥å…·æˆä¸ºå¿…ç„¶é€‰æ‹©ã€‚TextIn æ­£æ˜¯é¢å‘è¿™ä¸€æ ¸å¿ƒé—®é¢˜æ„å»ºçš„æ–‡æ¡£æ™ºèƒ½è§£æå¼•æ“ï¼Œå…¶ç›®æ ‡å¹¶éå•çº¯å®Œæˆ OCRï¼Œè€Œæ˜¯è¾“å‡ºâ€œå¯¹å¤§æ¨¡å‹å‹å¥½â€çš„é«˜è´¨é‡ç»“æ„åŒ–è¯­ä¹‰ç»“æœã€‚</p>
<p>åœ¨çœŸå®ä¸šåŠ¡æµç¨‹ä¸­ï¼ŒTextIn çš„è§£æç»“æœé€šå¸¸ä¼šè¢«ç›´æ¥å†™å…¥ä¼ä¸šçŸ¥è¯†åº“æˆ–å‘é‡æ•°æ®åº“ï¼Œä½œä¸ºåç»­é—®ç­”ã€æ¯”å¯¹ã€å®¡æŸ¥ä»»åŠ¡çš„åŸºç¡€æ•°æ®å±‚ã€‚å…¶æ ¸å¿ƒä»·å€¼ä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹ä¸‰æ–¹é¢ï¼š</p>
<ol>
<li><strong>æè‡´çš„å…¼å®¹æ€§ä¸å¤šè¯­è¨€æ”¯æŒï¼š</strong> TextIn æä¾›äº†ä¸šç•Œé¢†å…ˆçš„æ–‡æ¡£å…¼å®¹æ€§ï¼Œå…¶æ”¯æŒ <strong>50+ ç§è¯­è¨€</strong>çš„æ·±åº¦è§£æå’Œ <strong>20+ ç§æ–‡ä»¶æ ¼å¼</strong>ï¼ˆåŒ…æ‹¬ PDFã€Wordã€Excelã€æ‰«æä»¶ã€å›¾ç‰‡ç­‰ï¼‰ï¼Œå¯¹äºå¤æ‚çš„æ‰«æä»¶å’Œç‰ˆå¼æ–‡ä»¶ï¼ŒTextIn èƒ½å¤Ÿè¿›è¡Œé«˜ç²¾åº¦çš„ç‰ˆé¢åˆ†æå’Œ OCR è¯†åˆ«ï¼Œç¡®ä¿çŸ¥è¯†æºå¤´çš„å‡†ç¡®æ€§ã€‚</li>
<li><strong>é«˜è´¨é‡ç»“æ„åŒ–è¾“å‡ºï¼šMarkdown ä¸ BBoxï¼š</strong> TextInèƒ½å¤Ÿå°†å¤æ‚çš„æ–‡æ¡£ç»“æ„å‡†ç¡®åœ°è½¬åŒ–ä¸ºæ ‡å‡†çš„ <strong>Markdown</strong> æ ¼å¼æ–‡æœ¬ã€‚è¿™ç§Markdown æ ¼å¼å¤©ç„¶åœ°ä¿ç•™äº†æ–‡æ¡£çš„è¯­ä¹‰ç»“æ„ï¼Œä½¿å¾—åç»­çš„åˆ†å—ç­–ç•¥å¯ä»¥ä»åŸºäºé•¿åº¦çš„ç®€å•åˆ‡åˆ†ï¼Œå‡çº§ä¸ºåŸºäºè¯­ä¹‰ç»“æ„çš„æ™ºèƒ½åˆ‡åˆ†ã€‚åŒæ—¶ï¼ŒTextIn è¿˜é™„å¸¦äº†æ¯ä¸ªæ–‡æœ¬å—åœ¨åŸå§‹æ–‡æ¡£ä¸­çš„ BBoxï¼ˆè¾¹ç•Œæ¡†ï¼‰åæ ‡ä¿¡æ¯ï¼Œä¸ºå®ç°ç²¾ç¡®çš„å¼•ç”¨æº¯æºå’Œæœªæ¥çš„è§†è§‰ RAG å¥ å®šäº†æ•°æ®åŸºç¡€ã€‚</li>
<li><strong>çµæ´»çš„ API æ¥å£ï¼š</strong> TextIn æä¾›äº† <strong>é€šç”¨æ–‡æ¡£è§£æ</strong> å’Œ <strong>æ™ºèƒ½æ–‡æ¡£æŠ½å–</strong> ç­‰å¤šç§ API æ¥å£ï¼Œå¼€ç®±å³ç”¨ã€‚</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97e244fd484f4f33ab0990a023450156~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=NriHzDGGtnSOZzdZIsNW69vr5bg%3D" alt="" loading="lazy"/></p>
<p>åŸºäºæ­¤ï¼Œæœ¬æ–‡å°†æ·±å…¥å‰–æå¦‚ä½•ä¾æ‰˜ TextIn è¿™ä¸€ä¸“ä¸šæ–‡æ¡£è§£æå¹³å°ï¼Œé€šè¿‡å·¥ä½œæµå®ç° Agent çš„å®æ—¶æ–‡æ¡£ç†è§£èƒ½åŠ›ã€‚</p>
<hr/>
<h2 data-id="heading-3">äºŒã€æŠ€æœ¯å®è·µï¼šåŸºäº TextIn + Coze çš„ Agent æ–¹æ¡ˆ</h2>
<h3 data-id="heading-4">2.1 æ¶æ„è®¾è®¡</h3>
<p>æœ¬æ¬¡å®è·µé€‰å–çš„ä¸šåŠ¡åœºæ™¯ä¸º<strong>è®ºæ–‡åˆ†ææ€»ç»“åŠ©æ‰‹</strong>ã€‚åœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œæ–‡æ¡£ä¸»è¦æ¥è‡ªä¸Šä¼ çš„å„ç±»å­¦æœ¯è®ºæ–‡å’Œå­¦æœ¯æŠ¥å‘Šï¼Œæ—¢åŒ…æ‹¬æ’ç‰ˆè§„èŒƒçš„PDFè®ºæ–‡ï¼Œä¹ŸåŒ…å«æ‰«æç‰ˆæˆ–ç‰ˆå¼å¤æ‚çš„å†å²æ–‡çŒ®ã€‚ç”¨æˆ·åœ¨ä¸Šä¼ è®ºæ–‡åï¼Œé€šå¸¸å¸Œæœ›å¿«é€Ÿç†è§£è®ºæ–‡çš„æ ¸å¿ƒè´¡çŒ®ã€æ–¹æ³•ç»“æ„ä¸å…³é”®ç»“è®ºï¼Œå¹¶èƒ½å¤Ÿå›´ç»•å…·ä½“ç« èŠ‚æˆ–å®éªŒç»“æœè¿›è¡Œé—®ç­”ä¸æ€»ç»“ã€‚Agent ç”Ÿæˆçš„ç»“æ„åŒ–æ‘˜è¦ã€è¦ç‚¹æ€»ç»“åŠå¯¹åº”ç« èŠ‚å®šä½ä¿¡æ¯ï¼Œå¯ç”¨äºè¾…åŠ©è®ºæ–‡åˆç­›ã€è¯„å®¡å‡†å¤‡æˆ–ç§‘ç ”è°ƒç ”è¿‡ç¨‹ã€‚</p>
<p>ä¸ºäº†å¿«é€ŸéªŒè¯ TextIn çš„èƒ½åŠ›ï¼Œå¹¶æ„å»ºä¸€ä¸ªå¯äº¤äº’çš„åŸå‹ Agentï¼Œæˆ‘é€‰æ‹©äº† Coze å¹³å°ã€‚Coze æ˜¯ä¸€ä¸ªä¸€ç«™å¼ AI Bot å¼€å‘å¹³å°ï¼Œå®ƒæä¾›äº†å¯è§†åŒ–çš„å·¥ä½œæµç¼–æ’å’Œæ’ä»¶å·¥å…·é›†æˆèƒ½åŠ›ï¼Œéå¸¸é€‚åˆè¿›è¡Œ Agent çš„æ•æ·å¼€å‘å’Œèƒ½åŠ›éªŒè¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/976650f9aa24435482dbd3eb1d53cfd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=3QuFeAkgMexXBPnvCuATRzCsN9I%3D" alt="" loading="lazy"/></p>
<p>æœ¬æ¬¡çš„Agent æ¶æ„è®¾è®¡æ•´ä½“éµå¾ªâ€œæ„ŸçŸ¥-æ¨ç†â€çš„é€»è¾‘ï¼šAgent æ¥æ”¶åˆ°ç”¨æˆ·ä¸Šä¼ çš„æ–‡æ¡£åï¼Œé¦–å…ˆè°ƒç”¨ TextIn æ’ä»¶è¿›è¡Œæ„ŸçŸ¥ï¼ˆæ–‡æ¡£è§£æï¼‰ï¼Œç„¶åå°†è§£æåçš„é«˜è´¨é‡ç»“æ„åŒ–æ–‡æœ¬ä½œä¸ºè¾“å…¥ï¼Œé©±åŠ¨ LLM è¿›è¡Œæ¨ç†ï¼ˆé—®ç­”ã€æ€»ç»“ï¼‰ï¼Œæ¶æ„æµç¨‹æ¦‚è§ˆå¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>ç”¨æˆ·è¾“å…¥</strong>ï¼šç”¨æˆ·ä¸Šä¼ å¾…åˆ†æçš„æ–‡æ¡£ï¼ˆå¦‚åˆåŒ PDFï¼‰å¹¶æå‡ºé—®é¢˜ã€‚</li>
<li><strong>Agent å†³ç­–</strong>ï¼šCoze Agent è¯†åˆ«åˆ°è¾“å…¥æ˜¯æ–‡ä»¶ï¼Œè§¦å‘ TextIn æ’ä»¶è°ƒç”¨ã€‚</li>
<li><strong>æ„ŸçŸ¥å±‚ï¼ˆTextInï¼‰</strong> ï¼šTextIn è°ƒç”¨é€šç”¨æ–‡æ¡£è§£æ APIï¼Œå°†å¤æ‚æ–‡æ¡£è½¬åŒ–ä¸º Markdown æ–‡æœ¬ã€‚</li>
<li><strong>æ¨ç†å±‚ï¼ˆLLMï¼‰</strong> ï¼šAgent å°† TextIn è¿”å›çš„ Markdown æ–‡æœ¬ä½œä¸ºä¸Šä¸‹æ–‡ï¼Œç»“åˆç”¨æˆ·é—®é¢˜ï¼Œè°ƒç”¨ LLM è¿›è¡Œæ¨ç†å’Œç”Ÿæˆç­”æ¡ˆã€‚</li>
</ol>
<h3 data-id="heading-5">2.2 å®è·µæ­¥éª¤ä¸è§£æèŠ‚ç‚¹è¯´æ˜</h3>
<h4 data-id="heading-6">2.2.1 æ­¥éª¤ä¸€ï¼šç¼–æ’å·¥ä½œæµ</h4>
<p>é¦–å…ˆè¿›å…¥ Coze å¹³å°ï¼Œç‚¹å‡»è¿›å…¥æ‰£å­ç¼–ç¨‹çš„å·¥ä½œç©ºé—´ï¼Œé€‰æ‹©èµ„æºåº“ï¼Œç‚¹å‡»å³ä¸Šè§’åˆ›å»ºï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„å·¥ä½œæµ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/214090ca82f24b0c9d524a711d03c385~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=HwxACt4aCHnm9TV4P4aDa%2BahYQs%3D" alt="" loading="lazy"/></p>
<p>è¿›å…¥å·¥ä½œæµç¼–æ’é¡µé¢åï¼Œé€‰æ‹©å¼€å§‹åé¢çš„åŠ å·ï¼Œç„¶åé€‰æ‹©æ·»åŠ â€œæ’ä»¶â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d654696ce3454a749745d123d7e84d33~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=CFEqhYNEhr80RWpMS9NJHAeJQsM%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°Cozeæ’ä»¶å¸‚åœºä¸­å·²ç»é›†æˆå¥½äº†Textinçš„æ’ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦æœç´¢â€œTextinâ€å°±å¯ä»¥çœ‹åˆ°ParseXé€šç”¨æ–‡æ¡£è§£æã€pdfè½¬markdownã€Textin OCRç­‰å¤šä¸ªæ’ä»¶ï¼Œè¿™é‡Œé€‰æ‹©ParseXæ·»åŠ ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2c7ebde28214f45a973d52eb346b7df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=%2Fm%2FIjyG9T2wXeACk09Txml9qfn8%3D" alt="" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹ç¼–æ’å·¥ä½œæµï¼Œé¦–å…ˆå°†å·¥ä½œæµçš„èµ·å§‹ç»„ä»¶ Input ç±»å‹è®¾ç½®ä¸º File-defaultï¼Œä»¥æ¥æ”¶ç”¨æˆ·ä¸Šä¼ çš„æ–‡æ¡£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ed796901d8b426c9e608fd00c236764~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=2qu9ha%2BJWDzuCb2JpZPwIapI%2F1U%3D" alt="" loading="lazy"/></p>
<p>éšåï¼Œå°† TextIn æ’ä»¶ä¹Ÿå°±æ˜¯ParseXç»„ä»¶çš„è¾“å…¥å˜é‡ï¼ˆfileï¼‰å¼•ç”¨åˆ°èµ·å§‹ç»„ä»¶çš„ fileï¼Œç¡®ä¿ Agent èƒ½å¤Ÿå°†ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶æ­£ç¡®ä¼ é€’ç»™ TextInã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/14307fe7835943d38a87ebc711fa8973~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=2PhGTyG%2BOgHemTj6E9SOiOivYaY%3D" alt="" loading="lazy"/></p>
<p>ä¸ºäº†ç¡®ä¿ TextIn æœåŠ¡çš„å®‰å…¨è°ƒç”¨ï¼ŒParseXç»„ä»¶æ˜¯éœ€è¦é‰´æƒçš„ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ’ä»¶é…ç½®ä¸­å¡«å…¥ä» TextIn å®˜ç½‘è·å–çš„ x-ti-app-id å’Œ secret-code è¿›è¡Œé‰´æƒã€‚</p>
<p>è¿™é‡Œéœ€è¦ç™»å½•Textinå®˜ç½‘ï¼Œå‰å¾€ â€œè´¦å·ä¸å¼€å‘è€…ä¿¡æ¯â€ æŸ¥çœ‹ x-ti-app-idå’Œsecret_codeï¼Œå°†å…¶å¤åˆ¶ä¸‹æ¥ï¼Œå¡«å…¥åˆ°ParseXç»„ä»¶å½“ä¸­</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9cc0bb916054928afe91b41614b98e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=LR00F%2FMDJStz3y6fNkWNI9uiE1o%3D" alt="" loading="lazy"/></p>
<p>é…ç½®æˆåŠŸåå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d86deaeb16574b86adea6aac9a8ee65b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=01G12U1qkwWdN%2FsSFfHUr32wgHc%3D" alt="" loading="lazy"/></p>
<p>ç„¶åæˆ‘ä»¬å°±å…ˆå¯ä»¥æ¥å…¥ä¸€ä¸ªç»“æŸç»„ä»¶ï¼Œç‚¹å‡»è¯•è¿è¡Œï¼Œè¯•è¿è¡Œç»“æŸï¼Œå¯ä»¥çœ‹åˆ°ParseXæ’ä»¶æˆåŠŸè§£æäº†æ–‡ä»¶å¹¶ä¸”è¾“å‡ºäº†å¯¹åº”çš„å†…å®¹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05f26b4bdb544937ba53d65efe892053~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=1tsE6PtdPhhPg2QdRoyk2z3LiLQ%3D" alt="" loading="lazy"/></p>
<p>åœ¨ TextIn æˆåŠŸè§£ææ–‡ä»¶å¹¶è¾“å‡º Markdown æ–‡æœ¬åï¼Œæˆ‘ä»¬å°†å…¶ä½œä¸º LLM çš„ä¸Šä¸‹æ–‡è¾“å…¥ï¼Œè¿™æ˜¯æ•´ä¸ªå®è·µä¸­æœ€å…³é”®çš„ä¸€æ­¥ã€‚</p>
<p>ä¼ ç»Ÿçš„ Agent é—®ç­”ï¼Œå¦‚æœç›´æ¥è¾“å…¥åŸå§‹ PDF æˆ–è€…wordæ–‡ä»¶ï¼ŒLLM å¿…é¡»èŠ±è´¹å¤§é‡çš„è®¡ç®—èµ„æºå»æ¨ç†æ–‡æœ¬çš„ç»“æ„å’Œé€»è¾‘å…³ç³»ã€‚<strong>è€Œ TextIn æä¾›çš„ Markdown æ–‡æœ¬ï¼Œå·²ç»æ¸…æ™°åœ°æ ‡æ³¨äº†æ ‡é¢˜ï¼ˆ#ï¼‰ã€åˆ—è¡¨ï¼ˆ-ï¼‰ã€è¡¨æ ¼ï¼ˆ|ï¼‰ç­‰ç»“æ„ã€‚</strong> ä¸€ä¸ªå¤æ‚çš„è¡¨æ ¼åœ¨ TextIn è§£æåï¼Œä¼šä»¥æ ‡å‡†çš„ Markdown è¡¨æ ¼å½¢å¼å‘ˆç°ã€‚Agent åœ¨æ¥æ”¶åˆ°è¿™æ ·çš„è¾“å…¥åï¼Œå¯ä»¥ç›´æ¥åˆ©ç”¨å…¶å¼ºå¤§çš„è¡¨æ ¼æ¨ç†èƒ½åŠ›ï¼Œè€Œæ— éœ€è¿›è¡Œé¢å¤–çš„ç»“æ„é‡å»ºå·¥ä½œï¼Œæå¤§åœ°æå‡äº†æ¨ç†çš„æ•ˆç‡å’Œå‡†ç¡®æ€§ã€‚</p>
<p>æˆ‘ä»¬å°† TextIn æ’ä»¶çš„è¾“å‡º result/markdown æ¥å…¥åˆ° LLM ç»„ä»¶ï¼Œå¹¶è®¾è®¡ç³»ç»Ÿæç¤ºè¯ï¼ŒæŒ‡å¯¼ Agent å¦‚ä½•åˆ©ç”¨è¿™ä»½é«˜è´¨é‡çš„ç»“æ„åŒ–ä¸Šä¸‹æ–‡è¿›è¡Œå›ç­”ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e42ef72e0af34869984b85f8a0ec0e1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=OonC4%2FU6GOjgXtfxmhEMPvk57HA%3D" alt="" loading="lazy"/></p>
<p>æ•´ä½“çš„ AgentFlow å·¥ä½œæµå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e09100953fb47fcaf61bebc792bf8d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=Dqnp4iqT008NYamwqfXZWUX9EQY%3D" alt="" loading="lazy"/></p>
<p>è¯•è¿è¡Œçš„æ•ˆæœå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒParseX èƒ½å¤Ÿç¨³å®šå®Œæˆå¯¹å­¦æœ¯è®ºæ–‡ PDF çš„è§£æã€‚åœ¨è§£ææ•ˆç‡æ–¹é¢ï¼Œå¯¹äºä¸€ç¯‡çº¦ 15â€“20 é¡µã€åŒ…å«åŒæ æ’ç‰ˆä¸å¤šå¤„å¤æ‚è¡¨æ ¼çš„è®ºæ–‡TextIn å¯¹å•ç¯‡è®ºæ–‡çš„å¹³å‡è§£æè€—æ—¶å¹³å‡çº¦ä¸º <strong>2.8 ç§’</strong>ï¼Œå…¶ä¸­ç”µå­ç‰ˆè®ºæ–‡çš„è§£ææ—¶é—´é›†ä¸­åœ¨ <strong>2â€“3 ç§’</strong> åŒºé—´ï¼Œæ‰«æç‰ˆæˆ–ç‰ˆå¼å¤æ‚æ–‡æ¡£çš„è§£ææ—¶é—´çº¦ä¸º <strong>4â€“6 ç§’ã€‚</strong> è§£æè¾“å‡ºçš„ Markdown æ–‡æœ¬å®Œæ•´ä¿ç•™äº†ç« èŠ‚å±‚çº§ã€å…¬å¼ä½ç½®ä¸è¡¨æ ¼ç»“æ„ï¼Œå¯ç›´æ¥ä½œä¸º LLM æ¨ç†çš„ä¸Šä¸‹æ–‡è¾“å…¥ï¼Œæ— éœ€é¢å¤–äººå·¥æ•´ç†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21e4304d6e004097a13fbaeba5c43f93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=me3hGCySgxxDsNoMhD49hwEYhEw%3D" alt="" loading="lazy"/></p>
<p>åŸºäºè¿™ç§æ–¹æ¡ˆï¼Œæˆ‘è¿™é‡Œè¿›ä¸€æ­¥æ­å»ºäº†ä¸€ä¸ªæ–‡ä»¶è§£æé—®ç­”åŠ©æ‰‹ï¼Œæç¤ºè¯å¦‚ä¸‹ï¼Œå¯ä¾›å¤§å®¶å­¦ä¹ å‚è€ƒï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># è§’è‰²</span>
ä½ æ˜¯ä¸€ä¸ªåŸºäºç”¨æˆ·æä¾›çš„æ–‡ä»¶å†…å®¹è¿›è¡Œé—®ç­”çš„åŠ©æ‰‹ï¼Œèƒ½å¤Ÿæ ¹æ®ç”¨æˆ·ä¸Šä¼ çš„{{input}}æ–‡ä»¶ä¸­çš„ä¿¡æ¯ï¼Œå‡†ç¡®å›ç­”ç”¨æˆ·æå‡ºçš„é—®é¢˜{{query}}ï¼Œç¡®ä¿å›ç­”å†…å®¹ä¸¥æ ¼å¿ å®äºæ–‡ä»¶åŸæ–‡ã€‚

<span class="hljs-section">## æŠ€èƒ½</span>
<span class="hljs-section">### æŠ€èƒ½1ï¼šæ–‡ä»¶ä¿¡æ¯æå–</span>
<span class="hljs-bullet">-</span> æ¥æ”¶ç”¨æˆ·æä¾›çš„{{input}}æ–‡ä»¶å†…å®¹ï¼ˆå¦‚æ–‡æœ¬ã€æ–‡æ¡£ç­‰ï¼‰ï¼Œå‡†ç¡®ç†è§£æ–‡ä»¶çš„æ ¸å¿ƒé€»è¾‘ä¸å…³é”®ä¿¡æ¯ç‚¹ï¼›
<span class="hljs-bullet">-</span> è¯†åˆ«æ–‡ä»¶ä¸­ä¸ç”¨æˆ·é—®é¢˜{{query}}ç›´æ¥ç›¸å…³çš„å†…å®¹ç‰‡æ®µã€æ®µè½æˆ–æ•°æ®ï¼Œç¡®ä¿ä¿¡æ¯æå–çš„å‡†ç¡®æ€§ä¸å®Œæ•´æ€§ã€‚

<span class="hljs-section">### æŠ€èƒ½2ï¼šé—®é¢˜è§£æä¸å›ç­”ç”Ÿæˆ</span>
<span class="hljs-bullet">-</span> ç²¾å‡†è§£è¯»ç”¨æˆ·é—®é¢˜{{query}}ï¼Œæ˜ç¡®ç”¨æˆ·çš„æ ¸å¿ƒè¯‰æ±‚æˆ–ç–‘é—®ï¼›
<span class="hljs-bullet">-</span> åŸºäºæå–çš„æ–‡ä»¶ä¿¡æ¯ï¼Œç”¨ç®€æ´ã€è¿è´¯çš„è¯­è¨€ç»„ç»‡å›ç­”ï¼Œç¡®ä¿å›ç­”å†…å®¹ä¸æ–‡ä»¶åŸæ–‡å®Œå…¨ä¸€è‡´ï¼Œä¸æ·»åŠ ä¸»è§‚æ¨æµ‹æˆ–å¤–éƒ¨ä¿¡æ¯ï¼›
<span class="hljs-bullet">-</span> è‹¥æ–‡ä»¶ä¸­å­˜åœ¨å¤šä¸ªç›¸å…³ä¿¡æ¯ç‚¹ï¼Œèƒ½å¤Ÿæ•´åˆé€»è¾‘å…³ç³»å½¢æˆå®Œæ•´å›ç­”ï¼›è‹¥æ–‡ä»¶ä¸­æ— å¯¹åº”ä¿¡æ¯ï¼Œç›´æ¥å‘ŠçŸ¥ç”¨æˆ·â€œæ ¹æ®å½“å‰æä¾›çš„æ–‡ä»¶å†…å®¹ï¼Œæœªæ‰¾åˆ°ç›¸å…³ä¿¡æ¯â€ã€‚

<span class="hljs-section">## é™åˆ¶</span>
<span class="hljs-bullet">-</span> å›ç­”å†…å®¹å¿…é¡»ä¸¥æ ¼ä»¥ç”¨æˆ·æä¾›çš„{{input}}æ–‡ä»¶å†…å®¹ä¸ºä¾æ®ï¼Œä¸å¾—ç¼–é€ ã€ç¯¡æ”¹æˆ–è¡¥å……æ–‡ä»¶å¤–çš„ä¿¡æ¯ï¼›
<span class="hljs-bullet">-</span> è‹¥æ–‡ä»¶å†…å®¹å­˜åœ¨æ­§ä¹‰æˆ–ä¿¡æ¯ç¼ºå¤±ï¼Œéœ€å¦‚å®åé¦ˆâ€œæ–‡ä»¶å†…å®¹è¡¨è¿°ä¸æ˜ç¡®ï¼Œæ— æ³•å‡†ç¡®å›ç­”è¯¥é—®é¢˜â€ï¼Œä¸è¿›è¡Œæ¨¡ç³ŠçŒœæµ‹æˆ–é»˜è®¤è¡¥å……ï¼›
<span class="hljs-bullet">-</span> å›ç­”è¯­è¨€éœ€ç®€æ´æ¸…æ™°ï¼Œé¿å…å†—ä½™ï¼Œç¡®ä¿ç”¨æˆ·èƒ½ç›´æ¥è·å–æ–‡ä»¶ä¸­ä¸é—®é¢˜ç›¸å…³çš„æ ¸å¿ƒä¿¡æ¯ã€‚
</code></pre>
<p>è¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼Œé€šè¿‡ TextIn çš„èµ‹èƒ½ï¼Œæˆ‘ä»¬çš„ Agent åœ¨å¤„ç†å¤æ‚æ–‡æ¡£æ—¶çš„æ€§èƒ½å®ç°äº†æœ¬è´¨é£è·ƒï¼Œæœ‰æ•ˆè§£å†³äº† Agent çš„æ–‡æ¡£æ„ŸçŸ¥ç“¶é¢ˆï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1d49bae5cc64ef5b8a7c4d9faf01f56~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=TlgOooTf%2FnEuKYpDceEBEhMMbF8%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-7">2.2.2 æ­¥éª¤äºŒï¼šæ­å»ºæ™ºèƒ½ä½“</h4>
<p>åœ¨å®Œæˆå·¥ä½œæµåï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å°±å¯ä»¥æ­å»º Agent æ™ºèƒ½ä½“äº†ã€‚ç‚¹å‡»å›åˆ°æ‰£å­ä¸»é¡µï¼Œç‚¹å‡»åˆ›å»ºï¼Œé€‰æ‹©åˆ›å»ºæ™ºèƒ½ä½“ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed44d912726c443f8a67c29746027703~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=TMXq5cjvQcXyhf8XoNtjc0cHi1g%3D" alt="" loading="lazy"/></p>
<p>ç„¶åç‚¹å‡»æ·»åŠ å·¥ä½œæµï¼Œå°†åˆšåˆšåˆ›å»ºå¥½çš„ TextinDemo å·¥ä½œæµå¼•å…¥è¿›æ¥</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60d732632f804aaeb12e96328c3bf721~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=cq80vuO4n9CcAAjPeItInLnoWtw%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/335658275f544d148a8bb9b4eff5f724~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=Tg6rPyPa0Aj1RGv787Nkyl5zLN0%3D" alt="" loading="lazy"/></p>
<p>å…¶æ¬¡ç¼–å†™æ™ºèƒ½ä½“çš„äººè®¾å’Œå›å¤é€»è¾‘ï¼Œä¸ºä¿è¯ç»“æœå¯ç”¨äºè®ºæ–‡å®¡æŸ¥ä¸æ€»ç»“åœºæ™¯ï¼Œç³»ç»Ÿæç¤ºè¯æ˜ç¡®é™åˆ¶æ¨¡å‹ä»…åŸºäºè§£æåçš„è®ºæ–‡å†…å®¹è¿›è¡Œå›ç­”ï¼Œé¿å…å¼•å…¥å¤–éƒ¨çŸ¥è¯†æˆ–ä¸»è§‚æ¨æ–­ï¼Œä»è€Œæå‡æ€»ç»“ä¸é—®ç­”ç»“æœçš„å¯é æ€§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ce09fe221ba480e85ecf1d7fbee6abe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=zr4FRHwHCAxxBi6MJqxwxX8fjOs%3D" alt="" loading="lazy"/></p>
<p>è¿™é‡Œè´´å‡ºæˆ‘è®¾è®¡çš„äººè®¾ä¸å›å¤é€»è¾‘ï¼Œå¯ä»¥å‚è€ƒä½¿ç”¨</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># è§’è‰²</span>
ä½ æ˜¯ä¸€ä½ä¸¥è°¨ä¸“ä¸šçš„å­¦æœ¯è®ºæ–‡è§£æä¸“å®¶ä¸é«˜æ•ˆç§‘ç ”å†…å®¹å¤„ç†åŠ©æ‰‹ï¼Œä¸“æ³¨äºç²¾å‡†è§£æå„ç±»å­¦æœ¯è®ºæ–‡æ–‡æ¡£ï¼ˆåŒ…æ‹¬ç”µå­ç‰ˆã€æ‰«æç‰ˆåŠç‰ˆå¼å¤æ‚çš„æ–‡çŒ®ï¼‰ï¼Œé€šè¿‡è°ƒç”¨TextinDemoå·¥ä½œæµå®Œæˆæ–‡æ¡£é¢„å¤„ç†ï¼Œä¸ºç§‘ç ”å·¥ä½œè€…æä¾›é«˜æ•ˆçš„è®ºæ–‡åˆç­›ã€è¯„å®¡ä¸æ·±åº¦è°ƒç ”æ”¯æŒï¼Œè¾“å‡ºæ¸…æ™°ç»“æ„åŒ–çš„å­¦æœ¯åˆ†æå†…å®¹ã€‚

<span class="hljs-section">## æŠ€èƒ½</span>
<span class="hljs-section">### æŠ€èƒ½ 1: æ–‡æ¡£é¢„å¤„ç†ä¸æ ¸å¿ƒä¿¡æ¯æå–</span>
<span class="hljs-bullet">1.</span> å½“ç”¨æˆ·å­¦æœ¯è®ºæ–‡åï¼Œè‡ªåŠ¨è°ƒç”¨TextinDemoå·¥ä½œæµè¿›è¡Œé¢„å¤„ç†ï¼š  
<span class="hljs-bullet">   -</span> å¯¹è®ºæ–‡æ‰§è¡Œç‰ˆé¢è¯†åˆ«ï¼Œç¡®ä¿æ–‡æœ¬å†…å®¹å®Œæ•´ï¼›  
<span class="hljs-bullet">   -</span> è§£æç‰ˆå¼å¤æ‚çš„æ–‡æ¡£ï¼ˆå¦‚å¤šæ å¸ƒå±€ã€å›¾è¡¨æ··æ’ï¼‰ï¼Œæå–ç»“æ„åŒ–æ–‡æœ¬ä¸å…ƒæ•°æ®ï¼›  
<span class="hljs-bullet">   -</span> å®Œæˆé¢„å¤„ç†åï¼Œç”ŸæˆåŸºç¡€ä¿¡æ¯æ¦‚è§ˆã€‚  

<span class="hljs-section">### æŠ€èƒ½ 2: ç²¾å‡†é—®ç­”ä¸è¦ç‚¹å®šä½  </span>
<span class="hljs-bullet">1.</span> å½“ç”¨æˆ·æå‡ºã€Œç« èŠ‚å†…å®¹/å®éªŒç»“æœ/æ¦‚å¿µç»†èŠ‚ã€ç­‰é—®é¢˜æ—¶ï¼Œä¼˜å…ˆå®šä½è®ºæ–‡å¯¹åº”éƒ¨åˆ†ï¼›  
<span class="hljs-bullet">2.</span> å¼•ç”¨è®ºæ–‡åŸæ–‡å…³é”®å¥æˆ–æ•°æ®ï¼Œç¡®ä¿å›ç­”<span class="hljs-strong">**ç²¾å‡†ä¸”å¯è¿½æº¯**</span>ã€‚  
===å›å¤ç¤ºä¾‹===  
<span class="hljs-bullet">   -</span> â“ ç”¨æˆ·æé—®ï¼šã€Œç¬¬4ç« çš„å®éªŒæ­¥éª¤3æ˜¯ä»€ä¹ˆï¼Ÿã€  
<span class="hljs-bullet">   -</span> ğŸ“Œ <span class="hljs-strong">**ç« èŠ‚å®šä½**</span>ï¼š4.2.3èŠ‚ã€Œå®éªŒæµç¨‹ã€  
<span class="hljs-bullet">   -</span> ğŸ’¡ <span class="hljs-strong">**å›ç­”å†…å®¹**</span>ï¼šå®éªŒæ­¥éª¤3ä¸ºã€Œ[åŸæ–‡ç²¾å‡†æè¿°ï¼Œå¦‚â€œé‡‡ç”¨XXç®—æ³•å¯¹æ ·æœ¬é›†è¿›è¡Œä¸‰æ¬¡è¿­ä»£è®­ç»ƒâ€]ã€  
===ç¤ºä¾‹ç»“æŸ===

<span class="hljs-section">## é™åˆ¶</span>
<span class="hljs-bullet">-</span> <span class="hljs-strong">**å·¥å…·è°ƒç”¨**</span>ï¼šå¿…é¡»é€šè¿‡TextinDemoå·¥ä½œæµå®ŒæˆPDFé¢„å¤„ç†ï¼Œä¸å¯è·³è¿‡è¯¥ç¯èŠ‚ç›´æ¥åˆ†æå†…å®¹ï¼›  
<span class="hljs-bullet">-</span> <span class="hljs-strong">**è¾“å‡ºæ ¼å¼**</span>ï¼šä¸¥æ ¼ä½¿ç”¨Markdownç»“æ„åŒ–æ’ç‰ˆï¼ˆæ ‡é¢˜å±‚çº§ã€åˆ—è¡¨ç¬¦å·ã€ä»£ç å—ï¼‰ï¼Œæ ¸å¿ƒä¿¡æ¯éœ€åˆ†ç‚¹æ˜ç¡®ï¼›
</code></pre>
<h4 data-id="heading-8">2.2.3 æ­¥éª¤ä¸‰ï¼šæµ‹è¯•ä¸ä¼˜åŒ–</h4>
<p>ç¼–æ’å¥½å·¥ä½œæµå¹¶æ­å»ºå¥½æ™ºèƒ½ä½“åï¼Œå°±å®Œæˆäº†ä¸€ä¸ªå¯äº¤äº’çš„åŸå‹ Agentã€‚æˆ‘ä»¬å¯ä»¥è¿›è¡Œæœ€ç»ˆæµ‹è¯•ï¼Œå°†æ–‡æ¡£å¡ç»™æ¨¡å‹ä½¿ç”¨ï¼Œå¯ä»¥çœ‹åˆ°å…¶èƒ½å¤Ÿç²¾å‡†æå–æ–‡æ¡£çš„è¡¨æ ¼å†…å®¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bef0fb3493674fca9dd80d5695f18c4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=KujEJ3TxzDggW4%2F2euf9VjgL32U%3D" alt="" loading="lazy"/></p>
<p>å¯¹äºå¤æ‚åº¦è¾ƒé«˜çš„è¡¨æ ¼ï¼ˆå¦‚å¤šå±‚è¡¨å¤´ã€åˆå¹¶å•å…ƒæ ¼æˆ–åŒ…å«å¤§é‡æ•°å€¼å…³ç³»çš„è´¢åŠ¡è¡¨æ ¼ï¼‰ï¼Œæ™ºèƒ½ä½“èƒ½å¤Ÿ<strong>ç²¾å‡†å¤„ç†è·¨é¡µå’ŒåµŒå¥—è¡¨æ ¼çš„é€»è¾‘å…³ç³»</strong>ï¼Œ<strong>å‡†ç¡®è¯†åˆ«å…¶Markdownç»“æ„ï¼Œå¹¶æ‰§è¡Œè·¨è¡Œåˆ—çš„æ•°æ®å…³è”ä¸é€»è¾‘æ¨ç†</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4535da72071445cba6786637e50250d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=WD3WeSF20vC003rrWPtaMU7btD8%3D" alt="" loading="lazy"/></p>
<p>Agentå¯ä¾æ®ParseXæ’ä»¶è¾“å‡ºçš„æ¸…æ™°çš„ç»“æ„åŒ–è¡¨æ ¼æ•°æ®ï¼Œè‡ªåŠ¨å®šä½ç›¸å…³å­—æ®µå¹¶è¿›è¡Œè®¡ç®—ä¸å½’çº³ï¼Œæ— éœ€äººå·¥é¢„å…ˆæŒ‡æ˜æ•°æ®ä½ç½®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c070215e484b48669edab1e57888c26c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=keoH9LYDQ835BUnNHy1QZReH7M0%3D" alt="" loading="lazy"/></p>
<p>å¯¹äºç‰ˆå¼å¤æ‚ï¼ˆæ··åˆå•é¡µã€åŒæ æ’ç‰ˆï¼‰çš„æ‰«ææ–‡æ¡£ï¼Œæ™ºèƒ½ä½“ä¹Ÿèƒ½å¤Ÿ<strong>å®Œæ•´è¿˜åŸå…¶é˜…è¯»é¡ºåºä¸è¯­ä¹‰è¿è´¯æ€§ï¼Œé¿å…æ–‡æœ¬é”™ä¹±æˆ–ä¿¡æ¯å‰²è£‚</strong>ã€‚å¾—ç›ŠäºTextInå¼ºå¤§çš„ç‰ˆé¢åˆ†æèƒ½åŠ›ï¼Œå®ƒèƒ½å°†è§†è§‰ä¸Šçš„åˆ†æ å†…å®¹ï¼Œåœ¨Markdownä¸­æŒ‰é€»è¾‘é¡ºåºé‡æ–°ç»„ç»‡ï¼Œä½¿å¾—Agentåœ¨å¤„ç†ä¾èµ–ç‰ˆé¢å¸ƒå±€çš„é—®é¢˜æ—¶ï¼Œä»èƒ½ç»™å‡ºç²¾å‡†ç­”æ¡ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ba124ccd2884638a45551d08f40d7fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=wMf%2FIweHRu6gUfq%2B8RuDifGBGvk%3D" alt="" loading="lazy"/></p>
<p>åœ¨äººå·¥æˆæœ¬æ–¹é¢ï¼Œå¼•å…¥ TextIn åï¼Œè®ºæ–‡è§£ææµç¨‹ä¸­å¯¹äººå·¥é¢„å¤„ç†çš„ä¾èµ–æ˜¾è‘—é™ä½ã€‚ä»¥è®ºæ–‡åˆç­›ä¸ºä¾‹ï¼ŒåŸæœ¬éœ€è¦äººå·¥å®Œæˆçš„ç‰ˆå¼æ£€æŸ¥ã€ç« èŠ‚æ‹†åˆ†ä¸è¡¨æ ¼æ•´ç†å·¥ä½œï¼Œå•ç¯‡è®ºæ–‡çš„äººå·¥å‡†å¤‡æ—¶é—´ç”±åŸå…ˆçš„çº¦ <strong>15â€“20 åˆ†é’Ÿ</strong> é™ä½è‡³ <strong>3â€“5 åˆ†é’Ÿ</strong>ï¼Œäººå·¥æŠ•å…¥æˆæœ¬ä¸‹é™çº¦ <strong>70%</strong> ã€‚</p>
<p>æµ‹è¯•è¡¨æ˜ï¼Œé€šè¿‡å°†TextInçš„é«˜è´¨é‡è§£æè¾“å‡ºä¸LLMçš„æ¨ç†èƒ½åŠ›æ·±åº¦ç»“åˆï¼Œæ™ºèƒ½ä½“å…‹æœäº†ä¼ ç»ŸRAGåœ¨éç»“æ„åŒ–æ–‡æ¡£å¤„ç†ä¸­çš„æ ¸å¿ƒçŸ­æ¿ã€‚å®ƒä¸ä»…èƒ½å¤Ÿâ€œçœ‹åˆ°â€æ–‡æ¡£å†…å®¹ï¼Œæ›´èƒ½â€œç†è§£â€å…¶å†…åœ¨ç»“æ„ä¸é€»è¾‘å…³ç³»ï¼Œä½¿å¤æ‚æ–‡æ¡£çš„è‡ªåŠ¨åˆ†æä¸é—®ç­”å˜å¾—çœŸæ­£å¯è¡Œã€å¯é ã€‚</p>
<h2 data-id="heading-9">ä¸‰ã€æ€»ç»“ä¸å±•æœ›</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b35c9de14ce4a55b53c2a39ae3b0073~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767674931&amp;x-signature=wT%2FTxqc8yLOkEw57Dt8aCllIXZE%3D" alt="" loading="lazy"/></p>
<p>TextIn çš„å¼•å…¥ï¼Œä½¿å¾— Agent çš„æ„å»ºä¸å†å—é™äºåŸå§‹æ–‡æ¡£çš„æ ¼å¼å’Œè¯­è¨€ã€‚å®ƒé€šè¿‡æä¾›é«˜è´¨é‡çš„ Markdown æ–‡æœ¬ï¼Œå°† Agent çš„çŸ¥è¯†è¾“å…¥ä»æ— åºçš„å­—ç¬¦æµå‡çº§ä¸ºç»“æ„åŒ–çš„è¯­ä¹‰å—ï¼Œä»è€Œå°† Agent çš„æ¨ç†æ€§èƒ½æå‡åˆ°ä¸€ä¸ªæ–°çš„é«˜åº¦ã€‚TextIn ä¸ä»…ä»…æ˜¯ä¸€ä¸ªæ–‡æ¡£è§£æå·¥å…·ï¼Œå®ƒåœ¨ Agent çš„çŸ¥è¯†æ‘„å…¥ç®¡é“ä¸­æ‰®æ¼”äº†â€œçŸ¥è¯†ç»“æ„åŒ–å¼•æ“â€çš„å…³é”®è§’è‰²ï¼Œå…¶åœ¨æµç¨‹ä¸­ï¼š<strong>è§£å†³ Agent çš„æ„ŸçŸ¥è¾¹ç•Œï¼Œå®ç°ç»“æ„åŒ–ä¸Šä¸‹æ–‡ï¼Œå¹¶å¥ å®šäº†æº¯æºåŸºç¡€</strong>ï¼Œå¢å¼ºäº† Agent ç­”æ¡ˆçš„å¯ä¿¡åº¦å’Œè´¨é‡ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼Œåœ¨ Agent æ—¶ä»£ï¼Œæ–‡æ¡£æ™ºèƒ½çš„ç«äº‰ç„¦ç‚¹å·²ä»å•çº¯çš„ OCR è¯†åˆ«ï¼Œè½¬å‘äº†æ–‡æ¡£ç»“æ„çš„æ·±åº¦ç†è§£å’Œè¯­ä¹‰é‡å»ºã€‚TextIn å‡­å€Ÿå…¶åœ¨å¤šè¯­è¨€ã€å¤šæ ¼å¼ä¸Šçš„æŠ€æœ¯å£å’ï¼Œä¸ºä¼ä¸šçº§ Agent åº”ç”¨æ„å»ºäº†åšå®çš„åŸºç¡€è®¾æ–½ã€‚</p>
<p>æœªæ¥ï¼Œéšç€ Agent æŠ€æœ¯çš„è¿›ä¸€æ­¥å‘å±•ï¼ŒTextIn æä¾›çš„ç»“æ„åŒ–ã€é«˜ç²¾åº¦æ–‡æ¡£è§£æèƒ½åŠ›å°†æˆä¸º Agent è¿›åŒ–ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€ç¯ã€‚å®ƒå°†æŒç»­æ”¯æŒæ–‡æ¡£è§£æã€ä¼ä¸šçŸ¥è¯†åº“å»ºè®¾ã€æ™ºèƒ½æ–‡æ¡£æŠ½å–ç­‰é¢†åŸŸçš„æ™ºèƒ½åŒ–è¿›ç¨‹ï¼Œæˆä¸º Agent æå‡æ•ˆç‡ã€å®ç°å¤æ‚ä»»åŠ¡çš„å…³é”®åŸºçŸ³ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Future.get () çš„æ½œåœ¨é™·é˜±]]></title>    <link>https://juejin.cn/post/7589386961648074787</link>    <guid>https://juejin.cn/post/7589386961648074787</guid>    <pubDate>2025-12-30T05:47:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589386961648074787" data-draft-id="7589246131586056227" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Future.get () çš„æ½œåœ¨é™·é˜±"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-30T05:47:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="uup"/> <meta itemprop="url" content="https://juejin.cn/user/4378706456356627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Future.get () çš„æ½œåœ¨é™·é˜±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4378706456356627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    uup
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T05:47:59.000Z" title="Tue Dec 30 2025 05:47:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€Bug åœºæ™¯</h2>
<p>åœ¨ä¸€ä¸ªåŸºäº Java çš„å¤šçº¿ç¨‹åº”ç”¨ç¨‹åºä¸­ï¼Œä½¿ç”¨Â <code>Future</code>Â æ¥å¼‚æ­¥æ‰§è¡Œä¸€äº›è€—æ—¶ä»»åŠ¡ï¼Œä¾‹å¦‚æ•°æ®çš„è¿œç¨‹è·å–æˆ–è€…å¤æ‚çš„è®¡ç®—ã€‚å¼€å‘äººå‘˜æœŸæœ›é€šè¿‡Â <code>Future.get()</code>Â æ–¹æ³•è·å–å¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œç»“æœï¼Œä½†åœ¨å®é™…è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå‘ç°ç¨‹åºæœ‰æ—¶ä¼šå‡ºç°é•¿æ—¶é—´çš„é˜»å¡ï¼Œç”šè‡³å¯¼è‡´æ•´ä¸ªåº”ç”¨ç¨‹åºæ— å“åº”ï¼Œä¸¥é‡å½±å“äº†ç³»ç»Ÿçš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚</p>
<h2 data-id="heading-1">äºŒã€ä»£ç ç¤ºä¾‹</h2>
<h3 data-id="heading-2">å¼‚æ­¥ä»»åŠ¡ç±»</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.concurrent.Callable;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncTask</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Callable</span>&lt;String&gt; {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">call</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// æ¨¡æ‹Ÿä¸€ä¸ªè€—æ—¶æ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚æˆ–å¤æ‚è®¡ç®—</span>
        Thread.sleep(<span class="hljs-number">5000</span>); 
        <span class="hljs-keyword">return</span> <span class="hljs-string">"ä»»åŠ¡æ‰§è¡Œå®Œæˆ"</span>;
    }
}
</code></pre>
<h3 data-id="heading-3">ä»»åŠ¡æ‰§è¡Œç±»ï¼ˆæœ‰ç¼ºé™·ï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.concurrent.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FutureGetBugExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executorService</span> <span class="hljs-operator">=</span> Executors.newSingleThreadExecutor();
        Future&lt;String&gt; future = executorService.submit(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncTask</span>());

        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> future.get(); 
            System.out.println(<span class="hljs-string">"ä»»åŠ¡ç»“æœ: "</span> + result);
        } <span class="hljs-keyword">catch</span> (InterruptedException | ExecutionException e) {
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            executorService.shutdown();
        }
    }
}
</code></pre>
<h2 data-id="heading-4">ä¸‰ã€é—®é¢˜æè¿°</h2>
<ol>
<li><strong>é¢„æœŸè¡Œä¸º</strong>ï¼š<code>future.get()</code>Â æ–¹æ³•åº”è¯¥åœ¨å¼‚æ­¥ä»»åŠ¡å®Œæˆåï¼ŒåŠæ—¶è¿”å›ä»»åŠ¡çš„æ‰§è¡Œç»“æœï¼Œç¨‹åºèƒ½å¤Ÿé¡ºåˆ©è¾“å‡ºä»»åŠ¡ç»“æœå¹¶æ­£å¸¸ç»“æŸã€‚</li>
<li><strong>å®é™…è¡Œä¸º</strong>ï¼šå¦‚æœå¼‚æ­¥ä»»åŠ¡æ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Œ<code>future.get()</code>Â æ–¹æ³•ä¼šä¸€ç›´é˜»å¡å½“å‰çº¿ç¨‹ï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆã€‚åœ¨ä¸€äº›æç«¯æƒ…å†µä¸‹ï¼Œä¾‹å¦‚å¼‚æ­¥ä»»åŠ¡å‡ºç°æ­»å¾ªç¯æˆ–è€…èµ„æºè€—å°½å¯¼è‡´æ— æ³•å®Œæˆï¼Œ<code>future.get()</code>Â ä¼šä½¿å½“å‰çº¿ç¨‹æ°¸è¿œé˜»å¡ï¼Œè¿›è€Œå¯¼è‡´æ•´ä¸ªåº”ç”¨ç¨‹åºæ— å“åº”ã€‚æ­¤å¤–ï¼Œå¦‚æœåœ¨è·å–ç»“æœä¹‹å‰ä¸»çº¿ç¨‹è¢«ä¸­æ–­ï¼Œ<code>future.get()</code>Â æ–¹æ³•æŠ›å‡ºçš„Â <code>InterruptedException</code>Â å¯èƒ½æ²¡æœ‰è¢«æ­£ç¡®å¤„ç†ï¼Œå¯¼è‡´ç¨‹åºå¼‚å¸¸ç»ˆæ­¢ã€‚</li>
</ol>
<h2 data-id="heading-5">å››ã€è§£å†³æ–¹æ¡ˆ</h2>
<ol>
<li><strong>è®¾ç½®è¶…æ—¶æ—¶é—´</strong>ï¼šä¸ºÂ <code>future.get()</code>Â æ–¹æ³•è®¾ç½®ä¸€ä¸ªåˆç†çš„è¶…æ—¶æ—¶é—´ï¼Œé¿å…æ— é™æœŸé˜»å¡ã€‚</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.concurrent.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FutureGetBugExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executorService</span> <span class="hljs-operator">=</span> Executors.newSingleThreadExecutor();
        Future&lt;String&gt; future = executorService.submit(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncTask</span>());

        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> future.get(<span class="hljs-number">2</span>, TimeUnit.SECONDS); 
            System.out.println(<span class="hljs-string">"ä»»åŠ¡ç»“æœ: "</span> + result);
        } <span class="hljs-keyword">catch</span> (InterruptedException | ExecutionException e) {
            e.printStackTrace();
        } <span class="hljs-keyword">catch</span> (TimeoutException e) {
            System.out.println(<span class="hljs-string">"ä»»åŠ¡æ‰§è¡Œè¶…æ—¶"</span>);
        } <span class="hljs-keyword">finally</span> {
            executorService.shutdown();
        }
    }
}
</code></pre>
<ol start="2">
<li><strong>åœ¨å•ç‹¬çº¿ç¨‹å¤„ç†Â <code>Future</code></strong>ï¼šå°†è·å–Â <code>Future</code>Â ç»“æœçš„æ“ä½œæ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ä¸­ï¼Œè¿™æ ·å³ä½¿Â <code>future.get()</code>Â é˜»å¡ï¼Œä¹Ÿä¸ä¼šå½±å“ä¸»çº¿ç¨‹çš„æ­£å¸¸è¿è¡Œã€‚</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.concurrent.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FutureGetBugExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executorService</span> <span class="hljs-operator">=</span> Executors.newSingleThreadExecutor();
        Future&lt;String&gt; future = executorService.submit(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncTask</span>());

        <span class="hljs-type">Thread</span> <span class="hljs-variable">resultThread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> future.get();
                System.out.println(<span class="hljs-string">"ä»»åŠ¡ç»“æœ: "</span> + result);
            } <span class="hljs-keyword">catch</span> (InterruptedException | ExecutionException e) {
                e.printStackTrace();
            }
        });

        resultThread.start();

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä¸»çº¿ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡</span>
            Thread.sleep(<span class="hljs-number">1000</span>); 
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            executorService.shutdown();
        }
    }
}
</code></pre>
<ol start="3">
<li><strong>æ­£ç¡®å¤„ç†ä¸­æ–­å¼‚å¸¸</strong>ï¼šåœ¨è·å–Â <code>Future</code>Â ç»“æœæ—¶ï¼Œæ­£ç¡®å¤„ç†Â <code>InterruptedException</code>ï¼Œç¡®ä¿åœ¨ä¸»çº¿ç¨‹è¢«ä¸­æ–­æ—¶ï¼Œç¨‹åºèƒ½å¤Ÿåšå‡ºåˆç†çš„å“åº”ã€‚</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.concurrent.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FutureGetBugExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executorService</span> <span class="hljs-operator">=</span> Executors.newSingleThreadExecutor();
        Future&lt;String&gt; future = executorService.submit(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncTask</span>());

        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> future.get();
            System.out.println(<span class="hljs-string">"ä»»åŠ¡ç»“æœ: "</span> + result);
        } <span class="hljs-keyword">catch</span> (ExecutionException e) {
            e.printStackTrace();
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            <span class="hljs-comment">// æ¢å¤ä¸­æ–­çŠ¶æ€</span>
            Thread.currentThread().interrupt(); 
            System.out.println(<span class="hljs-string">"ä¸»çº¿ç¨‹è¢«ä¸­æ–­"</span>);
        } <span class="hljs-keyword">finally</span> {
            executorService.shutdown();
        }
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ä¸ªåªä¼š MVC çš„ java å°ç™½å¯¹ DDD çš„ç†è§£]]></title>    <link>https://juejin.cn/post/7589207474134695986</link>    <guid>https://juejin.cn/post/7589207474134695986</guid>    <pubDate>2025-12-30T05:49:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589207474134695986" data-draft-id="7589227883261952046" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ä¸ªåªä¼š MVC çš„ java å°ç™½å¯¹ DDD çš„ç†è§£"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-30T05:49:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­¦javaçš„å¯è¾¾é¸­"/> <meta itemprop="url" content="https://juejin.cn/user/657971657321972"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ä¸ªåªä¼š MVC çš„ java å°ç™½å¯¹ DDD çš„ç†è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/657971657321972/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­¦javaçš„å¯è¾¾é¸­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T05:49:05.000Z" title="Tue Dec 30 2025 05:49:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.7;font-weight:400;font-size:16px;overflow-x:hidden;color:#2c3e50;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;font-weight:600;margin-top:35px;margin-bottom:8px;padding-bottom:5px}.markdown-body h1 :before,.markdown-body h2 :before,.markdown-body h3 :before,.markdown-body h4 :before,.markdown-body h5 :before,.markdown-body h6 :before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{padding-bottom:8px;margin-top:50px;font-size:24px;border-bottom:1px solid #eaecef}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #eaecef;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;font-weight:400;background-color:rgba(27,31,35,.05);color:#476582;margin:0;font-size:.85em;border-radius:3px;font-size:.87em;padding:.165em .5em}.markdown-body code,.markdown-body pre{font-family:source-code-pro,Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.6;padding:20px 24px;background-color:#282c34;border-radius:6px}.markdown-body pre&gt;code{font-size:14px;padding:0;margin:0;word-break:normal;display:block;overflow-x:auto;color:#fff}.markdown-body a{text-decoration:none;color:#3eaf7c;font-weight:500}.markdown-body a:active,.markdown-body a:hover{color:#42b983;border-bottom:1px solid #42b983}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;margin:16px 0;border-collapse:collapse}.markdown-body thead{background:#f6f6f6;background:#3eaf7c;color:#000;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f6f8fa}.markdown-body td,.markdown-body th{border:1px solid #dfe2e5;padding:10px 16px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{font-size:14px;padding:6px 23px;margin:22px 0;border-left:6px solid #42b983;background-color:#f3f5f7;font-weight:400}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body p,.markdown-body ul{line-height:1.7}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="base16/tomorrow-night">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å››å±‚æ¶æ„</h2>
<blockquote>
<p>è€Œä¸æ˜¯ MVC çš„ä¸‰å±‚</p>
</blockquote>
<p>é¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰ä¸­ï¼Œå¹¶æ²¡æœ‰ä¸€ä¸ªæ‰€è°“çš„â€œå”¯ä¸€æ ‡å‡†â€æ¶æ„ï¼Œä½†è¡Œä¸šå†…å…¬è®¤çš„<strong>ç»å…¸æ¶æ„</strong>æ˜¯ Eric Evans åœ¨åŸè‘—ä¸­æå‡ºçš„ <strong>å››å±‚åˆ†å±‚æ¶æ„</strong>ã€‚</p>






























<table><thead><tr><th><strong>å±‚çº§åç§°</strong></th><th><strong>èŒè´£æè¿°</strong></th><th><strong>æ ¸å¿ƒç»„ä»¶</strong></th></tr></thead><tbody><tr><td><strong>ç”¨æˆ·ç•Œé¢å±‚ (Interfaces)</strong></td><td>è´Ÿè´£ä¸å¤–éƒ¨äº¤äº’ã€‚å¤„ç† HTTP è¯·æ±‚ã€è§£æ JSONã€è¿”å›æ•°æ®ç»™å‰ç«¯ã€‚</td><td>Controller, WebSocket, DTO æ˜ å°„å™¨</td></tr><tr><td><strong>åº”ç”¨å±‚ (Application)</strong></td><td><strong>ä¸å«ä¸šåŠ¡é€»è¾‘</strong>ã€‚è´Ÿè´£ç¼–æ’ä¸šåŠ¡æµç¨‹ï¼ˆæ¯”å¦‚å…ˆæŸ¥æ•°æ®åº“ï¼Œå†è°ƒæ¥å£ï¼Œæœ€åå‘æ¶ˆæ¯ï¼‰ã€‚</td><td>Application Services, Command/Query</td></tr><tr><td><strong>é¢†åŸŸå±‚ (Domain)</strong></td><td><strong>ç³»ç»Ÿçš„çµé­‚</strong>ã€‚çº¯ç²¹çš„ä¸šåŠ¡é€»è¾‘ã€‚ä¸ä¾èµ–æ•°æ®åº“ã€ä¸ä¾èµ–ç¬¬ä¸‰æ–¹ã€‚</td><td>Entity, Value Object, Aggregate, Domain Service</td></tr><tr><td><strong>åŸºç¡€è®¾æ–½å±‚ (Infrastructure)</strong></td><td>æä¾›æŠ€æœ¯æ”¯æ’‘ã€‚æ•°æ®åº“æŒä¹…åŒ–ã€ç¼“å­˜ã€å‘é€é‚®ä»¶ã€é…ç½®ç®¡ç†ç­‰ã€‚</td><td>Repository å®ç°, MQ é€‚é…, DB Config</td></tr></tbody></table>
<h2 data-id="heading-1">ç°ä»£å˜ä½“ï¼šå…­è¾¹å½¢æ¶æ„ (Hexagonal Architecture)</h2>
<blockquote>
<p>ä¸è¦å’Œä¸Šé¢çš„ä¸¥æ ¼åˆ†æˆä¸¤ç§æ¶æ„ï¼Œè¦æŠŠä»–ä»¬èåˆåœ¨ä¸€èµ·ï¼Œä»–ä»¬éƒ½æ˜¯ DDD</p>
</blockquote>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸ºäº†è®©<strong>é¢†åŸŸå±‚</strong>å½»åº•ç‹¬ç«‹ï¼Œç°åœ¨æ›´å¤šå…¬å¸é‡‡ç”¨<strong>ä¾èµ–å€’ç½®</strong>çš„æ¨¡å‹ã€‚ï¼ˆæˆ‘ä¼šå•ç‹¬ç”»ä¸€ç¯‡æ–‡ç« å»ç†è§£<strong>ä¾èµ–å€’ç½®</strong>ï¼‰</p>
<ul>
<li><strong>æ ¸å¿ƒç†å¿µï¼š</strong> é¢†åŸŸå±‚åœ¨ä¸­é—´ï¼Œæ‰€æœ‰çš„å¤–éƒ¨ç³»ç»Ÿï¼ˆæ•°æ®åº“ã€å‰ç«¯ã€ç¬¬ä¸‰æ–¹ APIï¼‰éƒ½å«â€œ<strong>é€‚é…å™¨</strong>â€ã€‚</li>
<li><strong>å…³é”®ç‚¹ï¼š</strong> é¢†åŸŸå±‚å®šä¹‰<strong>æ¥å£ï¼ˆPortsï¼‰</strong> ï¼ŒåŸºç¡€è®¾æ–½å±‚å»<strong>å®ç°ï¼ˆAdaptersï¼‰</strong> ã€‚</li>
<li><strong>ä¼˜åŠ¿ï¼š</strong> ä½ çš„ä¸šåŠ¡é€»è¾‘ä¸ä¾èµ–äºä½ æ˜¯ç”¨ MySQL è¿˜æ˜¯ Oracleï¼Œä¹Ÿä¸åœ¨ä¹ä½ æ˜¯ç”¨ Spring è¿˜æ˜¯ Micronautã€‚</li>
</ul>
<h2 data-id="heading-2">ä¸€ä¸ªæ ‡å‡†çš„å·¥ç¨‹ç›®å½•ç»“æ„ (Java ç¤ºä¾‹)</h2>
<p>çœ‹ä¸€ä¸ª<strong>ç›®å½•ç»“æ„</strong>å°±æ‡‚äº†ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯<strong>æ¨¡å—ç»“æ„</strong></p>
<pre><code class="hljs language-Plaintext" lang="Plaintext">com.company.project
â”œâ”€â”€ interfaces (æˆ– user)
â”‚   â”œâ”€â”€ controller       // æ¥å£å…¥åº“
â”‚   â””â”€â”€ dto              // è¿”å›ç»™å‰ç«¯çš„ DTO
â”œâ”€â”€ application
â”‚   â””â”€â”€ service          // åº”ç”¨æœåŠ¡ï¼Œè´Ÿè´£è°ƒç”¨é¢†åŸŸå±‚
â”œâ”€â”€ domain
â”‚   â”œâ”€â”€ model            // èšåˆã€å®ä½“ã€å€¼å¯¹è±¡
â”‚   â”œâ”€â”€ service          // é¢†åŸŸæœåŠ¡ï¼ˆè·¨å®ä½“çš„é€»è¾‘ï¼‰
â”‚   â””â”€â”€ repository       // ä»“å‚¨æ¥å£ (æ³¨æ„ï¼šè¿™é‡Œåªæœ‰ interface)
â””â”€â”€ infrastructure
    â”œâ”€â”€ repository       // æ•°æ®åº“å®ç° (MyBatis/JPA å®ç°ç±»)
    â”œâ”€â”€ config           // é…ç½®ç±»
    â””â”€â”€ external         // è°ƒç”¨å…¶ä»–å¾®æœåŠ¡çš„ Feign å®¢æˆ·ç«¯
</code></pre>
<h2 data-id="heading-3">æˆ‘è®¤ä¸ºçš„ DDD çš„æ ¸å¿ƒè¦ä¹‰</h2>
<ul>
<li>
<p><strong>ä¸è¦åœ¨åº”ç”¨å±‚å†™ä¸šåŠ¡é€»è¾‘ï¼š</strong> åº”ç”¨å±‚åº”è¯¥å¾ˆè–„ï¼Œå®ƒåªæ˜¯ä¸ªâ€œæŒ‡æŒ¥å®˜â€ï¼Œå…·ä½“çš„åˆ¤æ–­é€»è¾‘ï¼ˆæ¯”å¦‚ï¼šä½™é¢å¤Ÿä¸å¤Ÿï¼‰å¿…é¡»åœ¨é¢†åŸŸå±‚ã€‚</p>
</li>
<li>
<p><strong>ä¸è¦åœ¨é¢†åŸŸå±‚å¼•ç”¨æ¡†æ¶ç±»ï¼š</strong> å°½é‡è®© <code>domain</code> æ–‡ä»¶å¤¹é‡Œåªæœ‰çº¯ç²¹çš„ Java ä»£ç ï¼Œä¸è¦å‡ºç° <code>HttpServletRequest</code> è¿™ç§ä¸œè¥¿ã€‚</p>
</li>
<li>
<p><strong>èµ„æºåº“ (Repository) çš„å®šä¹‰ï¼š</strong> <em><strong>æ¥å£å®šä¹‰åœ¨ <code>domain</code>ï¼Œå…·ä½“å®ç°åœ¨ <code>infrastructure</code></strong></em>ã€‚</p>
</li>
</ul>
<h2 data-id="heading-4">ä¾èµ–å€’ç½®</h2>
<p><strong>ç»“è®ºï¼š</strong> æŸ¥è¯¢æ•°æ®åº“çš„<strong>åŠ¨ä½œ</strong>ï¼ˆæ‰§è¡Œ SQLã€è°ƒç”¨é©±åŠ¨ï¼‰ä¸€å®šä¸åœ¨ Domain å±‚ï¼Œä½†æŸ¥è¯¢æ•°æ®åº“çš„<strong>å¥‘çº¦ï¼ˆæ¥å£ï¼‰</strong> å¿…é¡»ç•™åœ¨ Domain å±‚ã€‚</p>
<p>å…·ä½“åº”è¯¥æ€ä¹ˆæ”¾ï¼Œå–å†³äºä½ çš„æŸ¥è¯¢<strong>ç›®çš„</strong>ã€‚æˆ‘ä»¬éœ€è¦åŒºåˆ†ä¸¤ç§åœºæ™¯ï¼š</p>
<hr/>
<h4 data-id="heading-5">1. ä¸ºäº†â€œæ‰§è¡Œä¸šåŠ¡é€»è¾‘â€è€ŒæŸ¥è¯¢ (Repository)</h4>
<p>å¦‚æœä½ éœ€è¦æŸ¥è¯¢æ•°æ®æ¥åˆ¤æ–­ä¸šåŠ¡è§„åˆ™ï¼ˆä¾‹å¦‚ï¼šä¸‹å•å‰æŸ¥ä¸€ä¸‹ç”¨æˆ·ä½™é¢ã€æŸ¥ä¸€ä¸‹åº“å­˜ï¼‰ï¼Œè¿™ç§æƒ…å†µéµå¾ª <strong>â€œä¾èµ–å€’ç½®åŸåˆ™â€</strong> ã€‚</p>
<ul>
<li><strong>Domain å±‚ï¼š</strong> å®šä¹‰ä¸€ä¸ªæ¥å£ï¼ˆRepository Interfaceï¼‰ã€‚å®ƒè¡¨è¾¾çš„æ˜¯ä¸šåŠ¡æ„å›¾ï¼šâ€œæˆ‘éœ€è¦ä¸€ä¸ªèƒ½æ ¹æ® ID è·å–èšåˆæ ¹çš„èƒ½åŠ›â€ã€‚</li>
<li><strong>Infrastructure å±‚ï¼š</strong> å®ç°è¿™ä¸ªæ¥å£ã€‚è¿™é‡Œæ‰çœŸæ­£å†™ MyBatisã€JPA æˆ– SQL è¯­å¥ã€‚</li>
<li><strong>Application å±‚ï¼š</strong> è´Ÿè´£è°ƒç”¨è¿™ä¸ªæ¥å£ã€‚</li>
</ul>
<p><strong>ä»£ç æµè½¬ç¤ºæ„ï¼š</strong></p>
<ol>
<li><strong>Application å±‚</strong> è°ƒç”¨ <code>domainRepository.findById(id)</code>ã€‚</li>
<li><strong>Domain å±‚</strong> æ‹¿åˆ°è¿”å›çš„å®ä½“ï¼ˆEntityï¼‰ï¼Œå¹¶åœ¨å®ä½“ä¸Šæ‰§è¡Œä¸šåŠ¡æ–¹æ³•ï¼ˆå¦‚ <code>order.validate()</code>ï¼‰ã€‚</li>
<li><strong>Application å±‚</strong> æ ¹æ®ç»“æœå†³å®šæ˜¯å¦æäº¤äº‹åŠ¡ã€‚</li>
</ol>
<hr/>
<h4 data-id="heading-6">2. ä¸ºäº†â€œé¡µé¢å±•ç¤ºâ€è€ŒæŸ¥è¯¢ (CQRS)</h4>
<p>å¦‚æœä½ çš„æŸ¥è¯¢ä»…ä»…æ˜¯ä¸ºäº†åœ¨ UI ä¸Šåˆ—è¡¨æ˜¾ç¤ºï¼Œ<strong>ä¸æ¶‰åŠä»»ä½•ä¸šåŠ¡é€»è¾‘</strong>ï¼ˆå³ï¼šä¸éœ€è¦åˆ¤æ–­ï¼Œç›´æ¥å±•ç¤ºï¼‰ï¼Œé‚£ä¹ˆå¯ä»¥ç»•è¿‡ Domain å±‚ã€‚</p>
<ul>
<li><strong>åšæ³•ï¼š</strong> åœ¨ <strong>Application å±‚</strong>ï¼ˆæˆ–è€…ä¸“é—¨çš„ Query å±‚ï¼‰ç›´æ¥è°ƒç”¨ Infrastructure å±‚çš„æŸ¥è¯¢æœåŠ¡ï¼Œè¿”å› DTO å³å¯ã€‚</li>
<li><strong>åŸå› ï¼š</strong> é¢†åŸŸæ¨¡å‹ï¼ˆDomain Modelï¼‰é€šå¸¸å¾ˆé‡ä¸”å¤æ‚ã€‚å¦‚æœåªæ˜¯ä¸ºäº†å‰ç«¯å±•ç¤ºä¸€ä¸ªè¡¨æ ¼ï¼Œå¼ºè¡Œé€šè¿‡ Domain å±‚åŒ…è£…æˆå®ä½“å†è½¬æˆ DTOï¼Œæ€§èƒ½å·®ä¸”é“¾è·¯å†—ä½™ã€‚</li>
</ul>























<table><thead><tr><th><strong>æŸ¥è¯¢ç±»å‹</strong></th><th><strong>é€»è¾‘å½’å±</strong></th><th><strong>å®é™…æŸ¥è¯¢ä½ç½®</strong></th><th><strong>æœ€ç»ˆè¿”å›å¯¹è±¡</strong></th></tr></thead><tbody><tr><td><strong>ä¸šåŠ¡é€»è¾‘æŸ¥è¯¢</strong></td><td>Domain å®šä¹‰æ¥å£</td><td>Infrastructure å®ç°</td><td><strong>Entity / Aggregate</strong> (å®ä½“)</td></tr><tr><td><strong>é¡µé¢å±•ç¤ºæŸ¥è¯¢</strong></td><td>Application / Query å±‚</td><td>Infrastructure ç›´æ¥å®ç°</td><td><strong>DTO</strong> (çº¯æ•°æ®å¯¹è±¡)</td></tr></tbody></table>
<h2 data-id="heading-7">å…·ä½“å®ç°</h2>
<p>åœ¨æ ‡å‡†çš„ DDD å®è·µä¸­ï¼Œæˆ‘ä»¬ä¼šåˆ©ç”¨ <strong>ä¾èµ–å€’ç½®åŸåˆ™ (DIP)</strong> ã€‚å³ Domain å±‚ä¸ä¾èµ–å…·ä½“çš„æ•°æ®åº“æŠ€æœ¯ï¼Œè€Œæ˜¯å®šä¹‰â€œæˆ‘éœ€è¦ä»€ä¹ˆâ€ï¼Œç”± Infrastructure å±‚å»å®ç°â€œæ€ä¹ˆæ‹¿æ•°æ®â€ã€‚</p>
<p>ä»¥ä¸‹æ˜¯åŸºäº Spring Boot çš„æ ‡å‡†ä»£ç ç»“æ„ç¤ºä¾‹ï¼š</p>
<h4 data-id="heading-8">1. ç›®å½•ç»“æ„é¢„è§ˆ</h4>
<p>åœ¨ IDEA ä¸­ï¼Œä½ çš„åŒ…ç»“æ„çœ‹èµ·æ¥åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-Plaintext" lang="Plaintext">src/main/java/com/example/demo
â”œâ”€â”€ domain
â”‚   â”œâ”€â”€ model
â”‚   â”‚   â””â”€â”€ User.java           // èšåˆæ ¹ (Entity)
â”‚   â””â”€â”€ repository
â”‚       â””â”€â”€ UserRepository.java // æ¥å£å®šä¹‰ (åªå«ä¸šåŠ¡å¥‘çº¦)
â”œâ”€â”€ infrastructure
â”‚   â””â”€â”€ persistence
â”‚       â”œâ”€â”€ UserMapper.java     // MyBatis/JPA çš„å…·ä½“å®ç°
â”‚       â””â”€â”€ UserRepositoryImpl.java // ä»“å‚¨å®ç°ç±»
â””â”€â”€ application
    â””â”€â”€ UserService.java        // åº”ç”¨æœåŠ¡
</code></pre>
<h4 data-id="heading-9">2. ä»£ç å®ç°</h4>
<h5 data-id="heading-10">ç¬¬ä¸€æ­¥ï¼šDomain å±‚ - å®šä¹‰æ¥å£</h5>
<p>è¿™é‡Œä¸åŒ…å«ä»»ä½• Spring Data æˆ– MyBatis çš„æ³¨è§£ï¼Œå®ƒæ˜¯çº¯ç²¹çš„ä¸šåŠ¡å¥‘çº¦ã€‚</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// domain.repository.UserRepository</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserRepository</span> {
    <span class="hljs-comment">// æ ¹æ® ID è·å–ç”¨æˆ·ï¼Œè¿”å›çš„æ˜¯é¢†åŸŸæ¨¡å‹ï¼ˆEntityï¼‰</span>
    User <span class="hljs-title function_">findById</span><span class="hljs-params">(Long id)</span>;
    
    <span class="hljs-comment">// ä¿å­˜ç”¨æˆ·</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(User user)</span>;
}
</code></pre>
<h5 data-id="heading-11">ç¬¬äºŒæ­¥ï¼šInfrastructure å±‚ - çœŸæ­£å®ç°</h5>
<p>è¿™é‡Œå¤„ç†æŠ€æœ¯ç»†èŠ‚ï¼ˆå¦‚ SQLã€ç¼“å­˜ç­‰ï¼‰ã€‚æˆ‘ä»¬é€šå¸¸ä¼šæ³¨å…¥åº•å±‚çš„ Mapper æˆ– Spring Data JPAã€‚</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// infrastructure.persistence.UserRepositoryImpl</span>
<span class="hljs-meta">@Repository</span> <span class="hljs-comment">// åªæœ‰å®ç°ç±»æ‰æ‰“ä¸Š Spring çš„æŒä¹…åŒ–æ³¨è§£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserRepositoryImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserRepository</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserMapper userMapper; <span class="hljs-comment">// å‡è®¾ä½¿ç”¨ MyBatis</span>

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">findById</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-comment">// 1. è°ƒç”¨åº•å±‚çš„æ•°æ®åº“æ“ä½œï¼ˆè¿”å›çš„æ˜¯æ•°æ®åº“å®ä½“ POï¼‰</span>
        <span class="hljs-type">UserPO</span> <span class="hljs-variable">userPO</span> <span class="hljs-operator">=</span> userMapper.selectById(id);
        
        <span class="hljs-comment">// 2. å°†æ•°æ®å¯¹è±¡ (PO) è½¬æ¢ä¸ºé¢†åŸŸå¯¹è±¡ (Entity)</span>
        <span class="hljs-comment">// è¿™æ˜¯ä¸ºäº†ä¿è¯ Domain å±‚çš„çº¯å‡€ï¼Œä¸è¢«æ•°æ®åº“å­—æ®µå®šä¹‰æ±¡æŸ“</span>
        <span class="hljs-keyword">return</span> UserConverter.toEntity(userPO);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-type">UserPO</span> <span class="hljs-variable">po</span> <span class="hljs-operator">=</span> UserConverter.toPO(user);
        userMapper.insertOrUpdate(po);
    }
}
</code></pre>
<h5 data-id="heading-12">ç¬¬ä¸‰æ­¥ï¼šApplication å±‚ - ç¼–æ’è°ƒç”¨</h5>
<p>åº”ç”¨æœåŠ¡åªè´Ÿè´£â€œæŒ‡æŒ¥â€ï¼Œå®ƒå¹¶ä¸çŸ¥é“æ•°æ®æ˜¯æ€ä¹ˆå­˜çš„ã€‚</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// application.UserService</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserRepository userRepository; <span class="hljs-comment">// æ³¨å…¥æ¥å£ï¼Œè§£è€¦ï¼</span>

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">changeUserEmail</span><span class="hljs-params">(Long id, String newEmail)</span> {
        <span class="hljs-comment">// 1. é€šè¿‡ä»“å‚¨åŠ è½½èšåˆæ ¹</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userRepository.findById(id);
        
        <span class="hljs-comment">// 2. æ‰§è¡Œé¢†åŸŸé€»è¾‘</span>
        user.updateEmail(newEmail);
        
        <span class="hljs-comment">// 3. ä¿å­˜å›ä»“å‚¨</span>
        userRepository.save(user);
    }
}
</code></pre>
<hr/>
<h4 data-id="heading-13">3. ä¸ºä»€ä¹ˆä¸€å®šè¦è¿™ä¹ˆå†™ï¼Ÿï¼ˆæ·±åº¦ç†è§£ï¼‰</h4>
<ol>
<li><strong>å±è”½æŠ€æœ¯ç»†èŠ‚</strong>ï¼šå¦‚æœå“ªå¤©ä½ è¦æŠŠæ•°æ®å­˜åˆ° Redis æˆ–è€…è¿œç¨‹ APIï¼Œä½ åªéœ€è¦åœ¨ <code>infrastructure</code> å±‚å†™ä¸€ä¸ªæ–°çš„å®ç°ç±»ï¼Œ<code>domain</code> å±‚å’Œ <code>application</code> å±‚çš„ä¸€è¡Œä»£ç éƒ½ä¸ç”¨åŠ¨ã€‚</li>
<li><strong>ä¿æŠ¤ä¸šåŠ¡é€»è¾‘</strong>ï¼š<code>User</code> å®ä½“æ˜¯ä¸€ä¸ªå…·æœ‰ä¸šåŠ¡è¡Œä¸ºçš„å¯¹è±¡ï¼ˆæ¯”å¦‚æœ‰ <code>changePassword()</code> æ–¹æ³•ï¼‰ï¼Œè€Œæ•°æ®åº“å¯¹åº”çš„ <code>UserPO</code> åªæ˜¯ä¸€ä¸ªç®€å•çš„å­—æ®µå®¹å™¨ã€‚é€šè¿‡è½¬æ¢ï¼Œé˜²æ­¢æ•°æ®åº“çš„å­—æ®µè®¾è®¡ï¼ˆå¦‚ <code>is_deleted</code>ï¼‰æ¸—é€åˆ°ä¸šåŠ¡é€»è¾‘ä¸­ã€‚</li>
<li><strong>æ–¹ä¾¿å•å…ƒæµ‹è¯•</strong>ï¼šåœ¨æµ‹è¯• <code>UserService</code> æ—¶ï¼Œä½ å¯ä»¥éå¸¸è½»æ¾åœ° Mock æ‰ <code>UserRepository</code> æ¥å£ï¼Œè€Œä¸éœ€è¦å¯åŠ¨çœŸæ­£çš„æ•°æ®åº“ã€‚</li>
</ol>
<h4 data-id="heading-14">æ ¸å¿ƒå·®å¼‚ç‚¹ï¼šPO vs Entity</h4>
<ul>
<li><strong>PO (Persistent Object)</strong> : å¯¹åº”æ•°æ®åº“è¡¨ç»“æ„ï¼Œå±æ€§å…¨å…¬å¼€ï¼ˆGetter/Setterï¼‰ã€‚UserPO.java</li>
<li><strong>Entity (Domain Model)</strong> : å¯¹åº”ä¸šåŠ¡æ¨¡å‹ï¼Œå±æ€§é€šå¸¸ç§æœ‰ï¼Œé€šè¿‡æ–¹æ³•æš´éœ²ä¸šåŠ¡åŠ¨ä½œã€‚User.java</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ Apache Dubbo æ¶æ„ï¼šè§£è¯»ä¸€ä¸ªå¼€æºé«˜æ€§èƒ½ RPC æ¡†æ¶çš„è®¾è®¡å“²å­¦ä¸æ ¸å¿ƒæºç ]]></title>    <link>https://juejin.cn/post/7589167252723433522</link>    <guid>https://juejin.cn/post/7589167252723433522</guid>    <pubDate>2025-12-30T05:14:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589167252723433522" data-draft-id="7589194558288445478" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ Apache Dubbo æ¶æ„ï¼šè§£è¯»ä¸€ä¸ªå¼€æºé«˜æ€§èƒ½ RPC æ¡†æ¶çš„è®¾è®¡å“²å­¦ä¸æ ¸å¿ƒæºç "/> <meta itemprop="keywords" content="å¾®æœåŠ¡,åˆ†å¸ƒå¼"/> <meta itemprop="datePublished" content="2025-12-30T05:14:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§å‚æŠ€æœ¯æ€»ç›‘ä¸‹æµ·"/> <meta itemprop="url" content="https://juejin.cn/user/4091714106833577"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ Apache Dubbo æ¶æ„ï¼šè§£è¯»ä¸€ä¸ªå¼€æºé«˜æ€§èƒ½ RPC æ¡†æ¶çš„è®¾è®¡å“²å­¦ä¸æ ¸å¿ƒæºç 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4091714106833577/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§å‚æŠ€æœ¯æ€»ç›‘ä¸‹æµ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T05:14:46.000Z" title="Tue Dec 30 2025 05:14:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Apache Dubbo æ·±åº¦æŠ€æœ¯æ¶æ„è§£æ</h2>
<h3 data-id="heading-1">1. æ•´ä½“ä»‹ç»</h3>
<h4 data-id="heading-2">1.1 é¡¹ç›®æ¦‚å†µä¸ç°çŠ¶</h4>
<p>Apache Dubbo æ˜¯ä¸€ä¸ªç”± Apache è½¯ä»¶åŸºé‡‘ä¼šæ‰˜ç®¡çš„å¼€æºé«˜æ€§èƒ½ RPCï¼ˆè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼‰ä¸å¾®æœåŠ¡æ¡†æ¶ã€‚é¡¹ç›®æ‰˜ç®¡äº GitHubï¼Œåœ°å€ä¸º <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fapache%2Fdubbo%25E3%2580%2582%25E6%2588%25AA%25E8%2587%25B3%25E5%2588%2586%25E6%259E%2590%25E6%2597%25B6%25EF%25BC%258C%25E5%2585%25B6" target="_blank" title="https://github.com/apache/dubbo%E3%80%82%E6%88%AA%E8%87%B3%E5%88%86%E6%9E%90%E6%97%B6%EF%BC%8C%E5%85%B6" ref="nofollow noopener noreferrer">github.com/apache/dubbâ€¦</a> GitHub ç»Ÿè®¡æ•°æ®ï¼ˆStarã€Fork æ•°ï¼‰åæ˜ äº†å…¶åœ¨å¼€æºç¤¾åŒºçš„å¹¿æ³›é‡‡çº³åº¦å’Œæ´»è·ƒåº¦ï¼Œæ˜¯æ„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œç‰¹åˆ«æ˜¯å¾®æœåŠ¡æ¶æ„çš„ä¸»æµæŠ€æœ¯é€‰å‹ä¹‹ä¸€ã€‚</p>
<h4 data-id="heading-3">1.2 æ ¸å¿ƒåŠŸèƒ½ä¸æ¶æ„</h4>
<p>Dubbo çš„æ ¸å¿ƒè®¾è®¡å›´ç»•æœåŠ¡æ²»ç†å±•å¼€ï¼Œé‡‡ç”¨ç»å…¸çš„â€œæ¶ˆè´¹è€…-æä¾›è€…â€æ¨¡å‹ï¼Œå¹¶é€šè¿‡æ³¨å†Œä¸­å¿ƒå®ç°è§£è€¦ã€‚å…¶æ¶æ„ç®€åŒ–è§†å›¾å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    subgraph "æ¶ˆè´¹è€…ä¾§ Consumer"
        C[Consumer Application]
    end
    subgraph "æä¾›è€…ä¾§ Provider"
        P[Provider Application]
    end
    subgraph "æ²»ç†å±‚ Governance"
        R[(Registry&lt;br/&gt;e.g., Nacos, ZK)]
        M[Monitor]
        Config[Config Center]
    end
    C -- è®¢é˜…/å‘ç° --&gt; R
    P -- æ³¨å†Œ --&gt; R
    C -- RPCè°ƒç”¨ --&gt; P
    C &amp; P -- ä¸ŠæŠ¥æŒ‡æ ‡ --&gt; M
    R &amp; Config -- æ¨é€é…ç½® --&gt; C &amp; P
</code></pre>
<p>å…¶ä¸»è¦åŠŸèƒ½æ¨¡å—åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>é€šä¿¡åè®®</strong>ï¼šæ”¯æŒ Tripleï¼ˆgRPC å…¼å®¹ï¼‰ã€Dubbo2ã€REST ç­‰ã€‚</li>
<li><strong>æœåŠ¡æ³¨å†Œä¸å‘ç°</strong>ï¼šé›†æˆå¤šç§æ³¨å†Œä¸­å¿ƒï¼ˆNacosã€Zookeeper ç­‰ï¼‰ã€‚</li>
<li><strong>æµé‡æ²»ç†</strong>ï¼šè´Ÿè½½å‡è¡¡ã€è·¯ç”±ã€é™æµã€ç†”æ–­ã€é™çº§ã€‚</li>
<li><strong>å¯è§‚æµ‹æ€§</strong>ï¼šæŒ‡æ ‡ï¼ˆMetricsï¼‰ã€è¿½è¸ªï¼ˆTracingï¼‰ã€æ—¥å¿—ã€‚</li>
<li><strong>é…ç½®ç®¡ç†</strong>ï¼šåŠ¨æ€é…ç½®æ›´æ–°ã€‚</li>
<li><strong>æ‰©å±•æœºåˆ¶</strong>ï¼šåŸºäº SPI çš„é«˜åº¦å¯æ‰©å±•æ¶æ„ã€‚</li>
</ul>
<h4 data-id="heading-4">1.3 é¢ä¸´é—®é¢˜ä¸ç›®æ ‡åœºæ™¯</h4>
<p>Dubbo ä¸»è¦è§£å†³ä¼ä¸šçº§åº”ç”¨åœ¨å‘åˆ†å¸ƒå¼ã€å¾®æœåŠ¡æ¶æ„æ¼”è¿›è¿‡ç¨‹ä¸­é‡åˆ°çš„å…¸å‹é—®é¢˜ï¼š</p>
<ol>
<li><strong>æœåŠ¡é—´é€šä¿¡å¤æ‚åº¦</strong>ï¼šç›´æ¥ socket é€šä¿¡æˆ–ç®€å•çš„ HTTP å®¢æˆ·ç«¯éš¾ä»¥å¤„ç†è¿æ¥ç®¡ç†ã€è¶…æ—¶ã€é‡è¯•ã€åºåˆ—åŒ–ç­‰ï¼Œä»£ç ä¾µå…¥æ€§å¼ºä¸”æ˜“é”™ã€‚</li>
<li><strong>æœåŠ¡åŠ¨æ€æ²»ç†ç¼ºå¤±</strong>ï¼šæœåŠ¡å®ä¾‹æ‰©ç¼©å®¹åï¼Œè°ƒç”¨æ–¹æ— æ³•è‡ªåŠ¨æ„ŸçŸ¥ï¼Œç¼ºä¹åŠ¨æ€è·¯ç”±ã€è´Ÿè½½å‡è¡¡å’Œæµé‡ä¿æŠ¤èƒ½åŠ›ã€‚</li>
<li><strong>è¿ç»´å¯è§‚æµ‹æ€§å·®</strong>ï¼šæœåŠ¡é—´è°ƒç”¨é“¾è·¯è¿‡é•¿ï¼Œé—®é¢˜å®šä½å›°éš¾ï¼Œç¼ºä¹ç³»ç»Ÿæ€§çš„ç›‘æ§æŒ‡æ ‡ã€‚</li>
<li><strong>å¼‚æ„ç³»ç»Ÿé›†æˆéš¾</strong>ï¼šä¸åŒè¯­è¨€å¼€å‘çš„æœåŠ¡ä¹‹é—´éœ€è¦ç»Ÿä¸€çš„é€šä¿¡åè®®å’Œæ²»ç†æ ‡å‡†ã€‚</li>
</ol>
<p><strong>å¯¹åº”äººç¾¤ä¸åœºæ™¯</strong>ï¼šé€‚ç”¨äºä¸­å¤§å‹äº’è”ç½‘ä¼ä¸šã€é‡‘èæœºæ„ç­‰éœ€è¦æ„å»ºé«˜å¯ç”¨ã€å¯æ‰©å±•ã€æ˜“ç»´æŠ¤çš„åˆ†å¸ƒå¼æœåŠ¡åŒ–ä½“ç³»çš„æŠ€æœ¯å›¢é˜Ÿã€‚å…¸å‹åœºæ™¯åŒ…æ‹¬ç”µå•†ç³»ç»Ÿã€æ”¯ä»˜æ¸…ç®—ã€ç”¨æˆ·ä¸­å¿ƒç­‰æ ¸å¿ƒä¸šåŠ¡çš„æœåŠ¡åŒ–æ‹†åˆ†ã€‚</p>
<h4 data-id="heading-5">1.4 è§£å†³æ–¹æ¡ˆä¸æ¼”è¿›ä¼˜åŠ¿</h4>
<p><strong>ä¼ ç»Ÿæ–¹å¼</strong>ï¼šæ—©æœŸå¸¸åŸºäº HTTP+JSON/RESTful API æˆ–è‡ªè¡Œå°è£… TCP åè®®è¿›è¡ŒæœåŠ¡é—´è°ƒç”¨ï¼Œé…åˆé™æ€é…ç½®æˆ–ç®€å•çš„æœåŠ¡å‘ç°ç»„ä»¶ï¼ˆå¦‚ Ribbon + Eurekaï¼‰ã€‚æ²»ç†åŠŸèƒ½ï¼ˆå¦‚é™æµï¼‰éœ€åœ¨æ¯ä¸ªæœåŠ¡ä¸­é‡å¤å®ç°ã€‚</p>
<p><strong>Dubbo æ–°æ–¹å¼</strong>ï¼š</p>
<ol>
<li><strong>é€æ˜åŒ– RPC</strong>ï¼šæä¾›åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·çš„è¿œç¨‹è°ƒç”¨ä½“éªŒï¼Œæ¡†æ¶å±è”½åº•å±‚ç½‘ç»œé€šä¿¡ç»†èŠ‚ã€‚</li>
<li><strong>ä¸­å¿ƒåŒ–æ²»ç†</strong>ï¼šå°†æµé‡æ§åˆ¶ã€æœåŠ¡å‘ç°ç­‰èƒ½åŠ›æŠ½è±¡ä¸ºç‹¬ç«‹çš„ä¸­å¿ƒåŒ–ç»„ä»¶ï¼ˆæ³¨å†Œä¸­å¿ƒã€é…ç½®ä¸­å¿ƒï¼‰ï¼Œå¹¶é€šè¿‡ç»Ÿä¸€æ§åˆ¶å°ï¼ˆdubbo-adminï¼‰è¿›è¡Œç®¡ç†ï¼Œè§„åˆ™åŠ¨æ€ç”Ÿæ•ˆã€‚</li>
<li><strong>ç”Ÿæ€é›†æˆ</strong>ï¼šä¸ Spring/Spring Boot æ·±åº¦é›†æˆï¼Œæä¾› Starterï¼Œé™ä½ä½¿ç”¨é—¨æ§›ï¼›æ”¯æŒå¤šåè®®ã€å¤šæ³¨å†Œä¸­å¿ƒï¼Œå…·å¤‡è‰¯å¥½çš„ç”Ÿæ€å…¼å®¹æ€§ã€‚</li>
</ol>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼šå°†åˆ†å¸ƒå¼æœåŠ¡çš„<strong>é€šä¿¡</strong>ã€<strong>æ²»ç†</strong>å’Œ<strong>è§‚æµ‹</strong>ä¸‰å¤§å…³æ³¨ç‚¹ä»ä¸šåŠ¡é€»è¾‘ä¸­å½»åº•è§£è€¦ï¼Œé€šè¿‡ä¸“ä¸šåŒ–çš„ä¸­é—´ä»¶æä¾›æ ‡å‡†åŒ–ã€å¹³å°åŒ–çš„è§£å†³æ–¹æ¡ˆï¼Œæå‡äº†å¼€å‘æ•ˆç‡å’Œç³»ç»Ÿå¯é æ€§ã€‚</p>
<h4 data-id="heading-6">1.5 å•†ä¸šä»·å€¼é€»è¾‘ä¼°ç®—</h4>
<p>å•†ä¸šä»·å€¼å¯ä»â€œæˆæœ¬èŠ‚çº¦â€å’Œâ€œæ•ˆç›Šæå‡â€ä¸¤ä¸ªç»´åº¦è¿›è¡Œé€»è¾‘æ¨æ¼”ï¼š</p>
<ul>
<li><strong>æˆæœ¬èŠ‚çº¦</strong>ï¼š
<ul>
<li><strong>å¼€å‘æˆæœ¬</strong>ï¼šä¸€ä¸ªä¸­ç­‰è§„æ¨¡ï¼ˆ50+å¾®æœåŠ¡ï¼‰çš„ç³»ç»Ÿï¼Œè‹¥è‡ªç ”å…·å¤‡åŒç­‰æ²»ç†èƒ½åŠ›çš„ RPC æ¡†æ¶ï¼Œè‡³å°‘éœ€è¦ 3-5 åé«˜çº§å·¥ç¨‹å¸ˆ 6-12 ä¸ªæœˆçš„æŒç»­æŠ•å…¥ã€‚æŒ‰å¸‚åœºäººåŠ›æˆæœ¬ä¼°ç®—ï¼Œç›´æ¥ç ”å‘æˆæœ¬å¯é«˜è¾¾æ•°ç™¾ä¸‡å…ƒã€‚é‡‡ç”¨ Dubbo å¯å°†æ­¤æˆæœ¬é™è‡³è¿‘ä¹ä¸ºé›¶ï¼ˆä»…å­¦ä¹ ä¸é›†æˆæˆæœ¬ï¼‰ã€‚</li>
<li><strong>ç»´æŠ¤æˆæœ¬</strong>ï¼šè‡ªç ”æ¡†æ¶çš„é•¿æœŸç»´æŠ¤ã€å‡çº§ã€Bug ä¿®å¤æˆæœ¬é«˜æ˜‚ã€‚Dubbo ç”±å¼€æºç¤¾åŒºå’Œ Apache åŸºé‡‘ä¼šæ”¯æ’‘ï¼Œç»´æŠ¤æˆæœ¬è¢«åˆ†æ‘Šã€‚</li>
</ul>
</li>
<li><strong>æ•ˆç›Šæå‡</strong>ï¼š
<ul>
<li><strong>ç¨³å®šæ€§æ”¶ç›Š</strong>ï¼šå†…ç½®çš„ç†”æ–­ã€é™æµã€é›†ç¾¤å®¹é”™ç­‰æœºåˆ¶èƒ½æœ‰æ•ˆé˜²æ­¢å±€éƒ¨æ•…éšœæ‰©æ•£ï¼Œé™ä½ç³»ç»Ÿçº§è”æ•…éšœé£é™©ï¼Œç›´æ¥å…³è”ä¸šåŠ¡è¿ç»­æ€§å’Œæ”¶å…¥ä¿éšœã€‚</li>
<li><strong>è¿ç»´æ•ˆç‡</strong>ï¼šå¯è§†åŒ–çš„æ§åˆ¶å°å’Œå®Œå–„çš„å¯è§‚æµ‹æ€§å·¥å…·é“¾ï¼Œèƒ½å¤§å¹…ç¼©çŸ­æ•…éšœå¹³å‡æ¢å¤æ—¶é—´ï¼ˆMTTRï¼‰ã€‚</li>
<li><strong>æ ‡å‡†åŒ–æ”¶ç›Š</strong>ï¼šç»Ÿä¸€æŠ€æœ¯æ ˆï¼Œé™ä½å›¢é˜Ÿé—´åä½œå’Œäººå‘˜æµåŠ¨å¸¦æ¥çš„çŸ¥è¯†ä¼ é€’æˆæœ¬ã€‚</li>
</ul>
</li>
</ul>
<p><strong>ä¼°ç®—é€»è¾‘</strong>ï¼šä»·å€¼ â‰ˆ (è‡ªç ”åŒç­‰èƒ½åŠ›æ¡†æ¶çš„äººåŠ›ä¸æ—¶é—´æˆæœ¬ + é¿å…çš„ç³»ç»Ÿå®•æœºæ½œåœ¨æŸå¤±) - (é‡‡ç”¨ Dubbo çš„é›†æˆã€å­¦ä¹ ä¸äº‘èµ„æºæˆæœ¬)ã€‚å¯¹äºå¤§å¤šæ•°ä¼ä¸šï¼Œæ­¤å·®å€¼é€šå¸¸ä¸ºæ­£ä¸”æ˜¾è‘—ã€‚</p>
<h3 data-id="heading-7">2. è¯¦ç»†åŠŸèƒ½æ‹†è§£</h3>
<p>ä»äº§å“ä¸æŠ€æœ¯ç»“åˆè§†è§’ï¼ŒDubbo çš„æ ¸å¿ƒåŠŸèƒ½å¯æ‹†è§£ä¸ºä»¥ä¸‹å±‚æ¬¡ï¼š</p>








































<table><thead><tr><th align="left">åŠŸèƒ½å±‚çº§</th><th align="left">äº§å“è§†è§’</th><th align="left">æŠ€æœ¯è§†è§’ï¼ˆæ ¸å¿ƒè®¾è®¡ï¼‰</th></tr></thead><tbody><tr><td align="left"><strong>æ¥å…¥å±‚</strong></td><td align="left">å¿«é€Ÿå¯åŠ¨ï¼Œå¼€ç®±å³ç”¨</td><td align="left">Spring Boot Starter è‡ªåŠ¨è£…é…ï¼›<code>@DubboService</code> / <code>@DubboReference</code> æ³¨è§£é©±åŠ¨ç¼–ç¨‹æ¨¡å‹ã€‚</td></tr><tr><td align="left"><strong>é€šä¿¡å±‚</strong></td><td align="left">æ”¯æŒå¤šç§è°ƒç”¨æ–¹å¼ï¼Œå…¼å®¹å¼‚æ„ç³»ç»Ÿ</td><td align="left">åè®®æ‰©å±• SPI (<code>Protocol</code>)ï¼›åºåˆ—åŒ–æ‰©å±• SPI (<code>Serialization</code>)ï¼›æ”¯æŒ Triple (åŸºäº HTTP/2+gRPC)ã€Dubbo2 ç­‰åè®®ã€‚</td></tr><tr><td align="left"><strong>æ²»ç†å±‚</strong></td><td align="left">æœåŠ¡å¯ç®¡å¯æ§ï¼Œè§„åˆ™åŠ¨æ€ç”Ÿæ•ˆ</td><td align="left">è·¯ç”±é“¾ (<code>Router</code>)ã€è´Ÿè½½å‡è¡¡ (<code>LoadBalance</code>)ã€é›†ç¾¤å®¹é”™ (<code>ClusterInvoker</code>)ã€è¿‡æ»¤å™¨é“¾ (<code>Filter</code>) ç»„æˆçš„è°ƒç”¨æµç¨‹ï¼›è§„åˆ™é€šè¿‡é…ç½®ä¸­å¿ƒåŠ¨æ€æ¨é€ã€‚</td></tr><tr><td align="left"><strong>æ ¸å¿ƒå±‚</strong></td><td align="left">æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼Œè°ƒç”¨é€æ˜ä»£ç†</td><td align="left">æ³¨å†Œä¸­å¿ƒæ‰©å±• SPI (<code>RegistryFactory</code>)ï¼›ä»£ç†å·¥å‚ (<code>ProxyFactory</code>) ç”Ÿæˆ Consumer å­˜æ ¹å’Œ Provider è°ƒç”¨å™¨ï¼›Invoker ä¸ºæ ¸å¿ƒè°ƒç”¨æŠ½è±¡ã€‚</td></tr><tr><td align="left"><strong>è§‚æµ‹å±‚</strong></td><td align="left">è¿è¡ŒçŠ¶æ€å¯è§†åŒ–ï¼Œé—®é¢˜å¯è¿½æº¯</td><td align="left">Metrics SPI æ”¶é›†æŒ‡æ ‡ï¼›Tracing SPI é›†æˆé“¾è·¯è¿½è¸ªï¼›æŒ‡æ ‡æ•°æ®ä¸ŠæŠ¥è‡³ç›‘æ§ä¸­å¿ƒã€‚</td></tr><tr><td align="left"><strong>æ‰©å±•å±‚</strong></td><td align="left">å¯æŒ‰éœ€å®šåˆ¶ï¼Œé€‚åº”ç‰¹æ®Šåœºæ™¯</td><td align="left">åŸºäº Dubbo SPI çš„å¾®å†…æ ¸æ¶æ„ï¼Œæ‰€æœ‰æ ¸å¿ƒç»„ä»¶å‡å¯æ‰©å±•æˆ–æ›¿æ¢ã€‚</td></tr></tbody></table>
<p><strong>å…³é”®æŠ€æœ¯è®¾è®¡</strong>ï¼š</p>
<ul>
<li><strong>URL ç»Ÿä¸€æ¨¡å‹</strong>ï¼šDubbo ä½¿ç”¨ URLï¼ˆç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼‰ä½œä¸ºé…ç½®ä¿¡æ¯çš„æ ‡å‡†æ ¼å¼ï¼Œè´¯ç©¿äºæ³¨å†Œã€è®¢é˜…ã€è°ƒç”¨ç­‰å…¨æµç¨‹ï¼Œå®ç°äº†é…ç½®çš„æ ‡å‡†åŒ–å’Œä¼ é€’çš„ä¸€è‡´æ€§ã€‚</li>
<li><strong>Invoker è°ƒç”¨æŠ½è±¡</strong>ï¼š<code>Invoker</code> æ˜¯ Dubbo çš„æ ¸å¿ƒæŠ½è±¡ï¼Œä»£è¡¨ä¸€ä¸ªå¯æ‰§è¡Œå¯¹è±¡ã€‚æ— è®ºæ˜¯æœ¬åœ°è°ƒç”¨ã€è¿œç¨‹è°ƒç”¨ï¼Œè¿˜æ˜¯é›†ç¾¤è°ƒç”¨ï¼Œéƒ½è¢«ç»Ÿä¸€ä¸º <code>Invoker</code>ï¼Œä»è€Œåœ¨è°ƒç”¨é“¾ä¸Šå¯ä»¥æ–¹ä¾¿åœ°æ’å…¥å„ç§è¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨ï¼Œå®ç°æ²»ç†é€»è¾‘ã€‚</li>
<li><strong>Directory ä¸ Router</strong>ï¼š<code>Directory</code> ç»´æŠ¤äº†æŸä¸ªæœåŠ¡çš„æ‰€æœ‰å¯ç”¨ <code>Invoker</code> åˆ—è¡¨ã€‚<code>Router</code> åˆ™æ ¹æ®é¢„è®¾è§„åˆ™ï¼ˆå¦‚æ ‡ç­¾è·¯ç”±ã€æƒé‡ï¼‰å¯¹æ­¤åˆ—è¡¨è¿›è¡Œè¿‡æ»¤å’Œæ’åºï¼Œå®ç°ç²¾ç»†åŒ–æµé‡è°ƒåº¦ã€‚</li>
</ul>
<h3 data-id="heading-8">3. æŠ€æœ¯éš¾ç‚¹æŒ–æ˜</h3>
<ol>
<li><strong>é«˜æ€§èƒ½ç½‘ç»œé€šä¿¡ä¸åºåˆ—åŒ–</strong>ï¼šåœ¨ä¿è¯åŠŸèƒ½ä¸°å¯Œçš„åŒæ—¶ï¼Œéœ€è®¾è®¡ä½å»¶è¿Ÿã€é«˜ååçš„é€šä¿¡åè®®ï¼ˆå¦‚ Triple åè®®åŸºäº HTTP/2 çš„å¤šè·¯å¤ç”¨ï¼‰å’Œé«˜æ•ˆçš„åºåˆ—åŒ–/ååºåˆ—åŒ–æœºåˆ¶ï¼ˆå¦‚ Hessian2ã€Kryoã€Protobufï¼‰ã€‚</li>
<li><strong>åŠ¨æ€æ²»ç†ä¸‹çš„æ•°æ®ä¸€è‡´æ€§</strong>ï¼šæœåŠ¡å®ä¾‹åˆ—è¡¨ã€è·¯ç”±è§„åˆ™ç­‰æ•°æ®åœ¨æ³¨å†Œä¸­å¿ƒã€æ¶ˆè´¹è€…ã€æä¾›è€…ä¹‹é—´éœ€è¦ä¿è¯æœ€ç»ˆä¸€è‡´æ€§ï¼Œä¸”åœ¨ç½‘ç»œåˆ†åŒºç­‰å¼‚å¸¸æƒ…å†µä¸‹è¦æœ‰å¦¥å–„çš„å¤„ç†ç­–ç•¥ï¼Œé¿å…å¤§è§„æ¨¡è·¯ç”±é”™è¯¯ã€‚</li>
<li><strong>é«˜åº¦æ‰©å±•æ€§ä¸å…¼å®¹æ€§å¹³è¡¡</strong>ï¼šä½œä¸ºåŸºç¡€æ¡†æ¶ï¼Œéœ€è¦æä¾›å¼ºå¤§çš„ SPI æ‰©å±•èƒ½åŠ›ï¼ŒåŒæ—¶åˆè¦ä¿è¯ä¸åŒç‰ˆæœ¬é—´ã€ä¸åŒæ‰©å±•å®ç°é—´çš„å…¼å®¹æ€§ï¼Œè¿™å¯¹æ¨¡å—åˆ’åˆ†å’Œæ¥å£è®¾è®¡æå‡ºäº†å¾ˆé«˜è¦æ±‚ã€‚</li>
<li><strong>é€æ˜ä»£ç†ä¸ä¸Šä¸‹æ–‡ä¼ é€’</strong>ï¼šå¦‚ä½•åœ¨å¤æ‚çš„è°ƒç”¨é“¾ï¼ˆå¯èƒ½ç»è¿‡å¤šçº§è¿‡æ»¤å™¨ã€è·¯ç”±ã€é›†ç¾¤å®¹é”™ï¼‰ä¸­ï¼Œæ— æŸåœ°ä¼ é€’è°ƒç”¨ä¸Šä¸‹æ–‡ï¼ˆå¦‚è·Ÿè¸ª IDã€éšå¼å‚æ•°ï¼‰ï¼Œä¸”å¯¹å¼€å‘è€…é€æ˜ï¼Œæ˜¯ä¸€ä¸ªå·¥ç¨‹æŒ‘æˆ˜ã€‚</li>
<li><strong>äº‘åŸç”Ÿé€‚é…</strong>ï¼šå¦‚ä½•ä¸ Kubernetesã€Service Meshï¼ˆå¦‚ Istioï¼‰ç­‰äº‘åŸç”ŸåŸºç¡€è®¾æ–½æ— ç¼é›†æˆï¼Œå®ç°ä»â€œæ¡†æ¶æ²»ç†â€åˆ°â€œåŸºç¡€è®¾æ–½æ²»ç†â€çš„å¹³æ»‘æ¼”è¿›ã€‚</li>
</ol>
<h3 data-id="heading-9">4. è¯¦ç»†è®¾è®¡å›¾</h3>
<h4 data-id="heading-10">4.1 æ ¸å¿ƒæ¶æ„å›¾</h4>
<p>ä»¥ä¸‹ä¸º Dubbo æ ¸å¿ƒæ¨¡å—äº¤äº’çš„é€»è¾‘æ¶æ„å›¾ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    Consumer[Consumer] --&gt;|1. å¼•ç”¨æœåŠ¡| RefProxy[Reference Proxy]
    RefProxy --&gt;|2. ç›®å½•æœåŠ¡| Directory
    Directory --&gt;|3. è®¢é˜…| Registry
    Registry --&gt;|4. é€šçŸ¥| Directory
    Directory --&gt;|5. è·å–Invokers| Cluster
    Cluster --&gt;|6. è·¯ç”±/è´Ÿè½½å‡è¡¡| RouterLoadBalance
    RouterLoadBalance --&gt;|7. é€‰æ‹©Invoker| SelectedInvoker
    SelectedInvoker --&gt;|8. æ‰§è¡Œè°ƒç”¨| Protocol[Protocol Layer]
    Protocol --&gt;|9. ç½‘ç»œä¼ è¾“| Network[Network Transport]
    Network --&gt;|10. è¯·æ±‚| ProviderProtocol
    ProviderProtocol --&gt;|11. æ´¾å‘| Dispatcher
    Dispatcher --&gt;|12. çº¿ç¨‹æ± | ThreadPool
    ThreadPool --&gt;|13. ä¸šåŠ¡æ‰§è¡Œ| ServiceImpl[Service Implementation]
    
    Provider[Provider] --&gt;|æ³¨å†Œ| Registry
    ServiceImpl --&gt;|æš´éœ²ä¸ºInvoker| Exporter
    Exporter --&gt; Protocol
    
    ConfigCenter[Config Center] -.-&gt;|æ¨é€è§„åˆ™| Consumer &amp; Provider
    Monitor[Monitor] -.-&gt;|ä¸ŠæŠ¥æŒ‡æ ‡| Consumer &amp; Provider
    
    subgraph "Consumer Side"
        Consumer
        RefProxy
        Directory
        Cluster
        RouterLoadBalance
    end
    
    subgraph "Provider Side"
        Provider
        Dispatcher
        ThreadPool
        ServiceImpl
        Exporter
    end
    
    subgraph "å…¬å…±ç»„ä»¶"
        Registry
        Protocol
        Network
        ConfigCenter
        Monitor
    end
</code></pre>
<h4 data-id="heading-11">4.2 æ ¸å¿ƒè°ƒç”¨é“¾è·¯åºåˆ—å›¾</h4>
<p>ä¸€æ¬¡ Dubbo RPC è°ƒç”¨çš„ç®€åŒ–åºåˆ—å›¾å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant C as Consumer App
    participant P as Provider Proxy
    participant Cluster
    participant LB as LoadBalance
    participant Invoker
    participant Net as Network Client
    participant NetS as Network Server
    participant Dispatcher
    participant Biz as Business Impl

    C-&gt;&gt;P: invoke(method, args)
    P-&gt;&gt;Cluster: list(invokers)
    Cluster-&gt;&gt;LB: select(invokers)
    LB--&gt;&gt;Cluster: selectedInvoker
    Cluster-&gt;&gt;Invoker: invoke(invocation)
    Invoker-&gt;&gt;Net: send(request)
    Net-&gt;&gt;NetS: ä¼ è¾“
    NetS-&gt;&gt;Dispatcher: æ¥æ”¶å¹¶æ´¾å‘
    Dispatcher-&gt;&gt;Biz: æ‰§è¡Œå®é™…æ–¹æ³•
    Biz--&gt;&gt;Dispatcher: result
    Dispatcher--&gt;&gt;NetS: response
    NetS--&gt;&gt;Net: ä¼ è¾“
    Net--&gt;&gt;Invoker: response
    Invoker--&gt;&gt;Cluster: result
    Cluster--&gt;&gt;P: result
    P--&gt;&gt;C: return result
</code></pre>
<h4 data-id="heading-12">4.3 æ ¸å¿ƒç±»å…³ç³»å›¾ï¼ˆç®€ç•¥ï¼‰</h4>
<p>å›´ç»• <code>Invoker</code> å’Œ <code>URL</code> çš„æ ¸å¿ƒç±»å…³ç³»ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/673453dfb1ec4061a85fc265305eb14d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5Y6C5oqA5pyv5oC755uR5LiL5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767676485&amp;x-signature=OD5VKOnnnuoe5VxpPDis6eODQ1E%3D" alt="deepseek_mermaid_20251230_a5778a.png" loading="lazy"/>
<em>è¯´æ˜</em>ï¼š<code>Invoker</code> æ˜¯æ‰§è¡Œå•å…ƒï¼›<code>Directory</code> ç®¡ç† <code>Invoker</code> é›†åˆï¼›<code>ClusterInvoker</code> åŒ…å«é›†ç¾¤è°ƒç”¨é€»è¾‘ï¼›<code>DubboInvoker</code> æ˜¯å…·ä½“çš„è¿œç¨‹é€šä¿¡å®ç°ï¼›<code>URL</code> æ˜¯è´¯ç©¿å…¨å±€çš„é…ç½®è½½ä½“ã€‚</p>
<h3 data-id="heading-13">5. æ ¸å¿ƒå‡½æ•°ä¸ä»£ç è§£æ</h3>
<h4 data-id="heading-14">5.1 æ ¸å¿ƒ SPI ä¸é…ç½®ï¼šä» <code>pom.xml</code> çœ‹æ¨¡å—åŒ–</h4>
<p>é¡¹ç›®æ ¹ <code>pom.xml</code> æ­ç¤ºäº† Dubbo çš„é«˜åº¦æ¨¡å—åŒ–è®¾è®¡ã€‚<code>&lt;modules&gt;</code> éƒ¨åˆ†å®šä¹‰äº†æ•°åä¸ªå­æ¨¡å—ï¼Œå¦‚ <code>dubbo-rpc</code>, <code>dubbo-cluster</code>, <code>dubbo-registry</code> ç­‰ï¼Œæ¯ä¸ªæ¨¡å—èŒè´£å•ä¸€ï¼Œé€šè¿‡ Maven ä¾èµ–è¿›è¡Œç»„è£…ã€‚</p>
<p><strong>å…³é”®é…ç½®è§£æ</strong>ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ä½¿ç”¨ revision å±æ€§ç»Ÿä¸€ç®¡ç†ç‰ˆæœ¬ï¼Œä¾¿äºå¤šæ¨¡å—ååŒå‘å¸ƒ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${revision}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">revision</span>&gt;</span>3.3.7-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">revision</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>

<span class="hljs-comment">&lt;!-- ä¾èµ–ç®¡ç†ï¼šé€šè¿‡ BOM (Bill of Materials) ç»Ÿä¸€ç®¡ç†æ‰€æœ‰å­æ¨¡å—å’Œç¬¬ä¸‰æ–¹ä¾èµ–çš„ç‰ˆæœ¬ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.dubbo<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>dubbo-dependencies-bom<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${project.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>

<span class="hljs-comment">&lt;!-- æ¡ä»¶åŒ–æ¨¡å—å¼•å…¥ï¼šæ ¹æ® JDK ç‰ˆæœ¬åŠ¨æ€å¼•å…¥æ”¯æŒæ–°ç‰¹æ€§çš„æ¨¡å— --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">profiles</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>jdk-version-ge-17<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">activation</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">jdk</span>&gt;</span>[17,)<span class="hljs-tag">&lt;/<span class="hljs-name">jdk</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">activation</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>dubbo-spring-boot-project/dubbo-spring-boot-3-autoconfigure<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>dubbo-plugin/dubbo-spring6-security<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>dubbo-plugin/dubbo-mutiny<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span> <span class="hljs-comment">&lt;!-- Reactiveæ”¯æŒ --&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">profiles</span>&gt;</span>
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼šè¿™ç§ç»“æ„æ”¯æŒâ€œæŒ‰éœ€å¼•å…¥â€ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®é¡¹ç›®éœ€è¦åªä¾èµ– <code>dubbo-spring-boot-starter</code>ï¼Œæˆ–ç²¾ç»†å¼•å…¥ <code>dubbo-rpc-triple</code> ç­‰ç‰¹å®šæ¨¡å—ï¼Œæœ‰æ•ˆæ§åˆ¶åº”ç”¨åŒ…å¤§å°ã€‚</p>
<h4 data-id="heading-15">5.2 æœåŠ¡æä¾›è€…å¯åŠ¨ç¤ºä¾‹</h4>
<p>æä¾›çš„ <code>ProviderApplication.java</code> æ˜¯ä¸€ä¸ªå…¸å‹çš„ Spring Boot å¯åŠ¨ç±»ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> org.apache.dubbo.springboot.demo.servlet;
<span class="hljs-keyword">import</span> org.apache.dubbo.config.spring.context.annotation.EnableDubbo;
<span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;
<span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;

<span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-meta">@EnableDubbo</span> <span class="hljs-comment">// å…³é”®æ³¨è§£ï¼šå¯ç”¨ Dubbo çš„æ³¨è§£é©±åŠ¨åŠè‡ªåŠ¨é…ç½®</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProviderApplication</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        SpringApplication.run(ProviderApplication.class, args);
    }
}
</code></pre>
<ul>
<li><strong><code>@EnableDubbo</code></strong>ï¼šè¯¥æ³¨è§£æ˜¯ Dubbo ä¸ Spring é›†æˆçš„å…³é”®ã€‚å®ƒå†…éƒ¨ä¼šå¯¼å…¥ <code>DubboComponentScanRegistrar</code> ç­‰é…ç½®ç±»ï¼Œå®Œæˆä»¥ä¸‹å·¥ä½œï¼š
<ol>
<li>æ‰«æè¢« <code>@DubboService</code> æ³¨è§£æ ‡è®°çš„ç±»ï¼Œå°†å…¶æ³¨å†Œä¸º Spring Bean å¹¶å¯¼å‡ºä¸º Dubbo æœåŠ¡ã€‚</li>
<li>æ‰«æè¢« <code>@DubboReference</code> æ³¨è§£æ ‡è®°çš„å­—æ®µï¼Œä¸ºå…¶æ³¨å…¥ä¸€ä¸ªè¿œç¨‹æœåŠ¡çš„ä»£ç†å¯¹è±¡ã€‚</li>
<li>æ ¹æ®é…ç½®æ–‡ä»¶ï¼ˆ<code>application.yaml</code>ï¼‰åˆå§‹åŒ– <code>ApplicationConfig</code>, <code>RegistryConfig</code>, <code>ProtocolConfig</code> ç­‰æ ¸å¿ƒé…ç½® Beanã€‚</li>
</ol>
</li>
</ul>
<h4 data-id="heading-16">5.3 æ ¸å¿ƒè°ƒç”¨æŠ½è±¡ <code>Invoker.invoke</code></h4>
<p><code>Invoker.invoke</code> æ–¹æ³•æ˜¯æ•´ä¸ªè°ƒç”¨é“¾çš„èµ·ç‚¹å’Œæ ¸å¿ƒã€‚ä»¥ä¸‹ä¸ºç®€åŒ–é€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Invoker æ¥å£å®šä¹‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Invoker</span>&lt;T&gt; {
    <span class="hljs-comment">// æ‰§è¡Œä¸€æ¬¡è°ƒç”¨ï¼Œ invocation å°è£…äº†æ–¹æ³•åã€å‚æ•°ç±»å‹ã€å®é™…å‚æ•°å€¼ç­‰ã€‚</span>
    Result <span class="hljs-title function_">invoke</span><span class="hljs-params">(Invocation invocation)</span> <span class="hljs-keyword">throws</span> RpcException;
    <span class="hljs-comment">// è·å–è¯¥ Invoker å…³è”çš„ URL (é…ç½®ä¿¡æ¯)</span>
    URL <span class="hljs-title function_">getUrl</span><span class="hljs-params">()</span>;
    <span class="hljs-comment">// åˆ¤æ–­ Invoker æ˜¯å¦å¯ç”¨</span>
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">isAvailable</span><span class="hljs-params">()</span>;
    <span class="hljs-comment">// é”€æ¯ Invoker</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">destroy</span><span class="hljs-params">()</span>;
}

<span class="hljs-comment">// ä¸€ä¸ªå…¸å‹çš„ AbstractInvoker å®ç°ç‰‡æ®µï¼ˆç¤ºæ„ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractInvoker</span>&lt;T&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Invoker</span>&lt;T&gt; {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Result <span class="hljs-title function_">invoke</span><span class="hljs-params">(Invocation inv)</span> <span class="hljs-keyword">throws</span> RpcException {
        <span class="hljs-comment">// 1. é¢„å¤„ç†ï¼šæ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼Œè®¾ç½®è°ƒç”¨IDç­‰é™„åŠ ä¿¡æ¯</span>
        beforeInvoke(inv);
        
        <span class="hljs-comment">// 2. æ‰§è¡Œå…·ä½“çš„è°ƒç”¨ï¼ˆç”±å­ç±»å®ç°ï¼Œå¦‚è¿œç¨‹è°ƒç”¨æˆ–æœ¬åœ°è°ƒç”¨ï¼‰</span>
        <span class="hljs-type">Result</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> doInvoke(inv);
        
        <span class="hljs-comment">// 3. åå¤„ç†ï¼šç»“æœå¤„ç†ï¼Œå¼‚å¸¸è½¬æ¢</span>
        afterInvoke(result, inv);
        <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-comment">// æ¨¡æ¿æ–¹æ³•ï¼Œå­ç±»éœ€å®ç°å…·ä½“çš„è°ƒç”¨é€»è¾‘</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> Result <span class="hljs-title function_">doInvoke</span><span class="hljs-params">(Invocation invocation)</span> <span class="hljs-keyword">throws</span> Throwable;
}
</code></pre>
<ul>
<li><strong><code>Invocation</code></strong>ï¼šå°è£…äº†å•æ¬¡è°ƒç”¨çš„æ‰€æœ‰ä¿¡æ¯ï¼Œæ˜¯ä¸€ä¸ªæ•°æ®å¥‘çº¦å¯¹è±¡ã€‚</li>
<li><strong><code>Result</code></strong>ï¼šå°è£…è°ƒç”¨ç»“æœï¼ŒåŒ…å«è¿”å›å€¼ã€å¼‚å¸¸çŠ¶æ€ç­‰ã€‚</li>
<li><strong>è®¾è®¡æ¨¡å¼</strong>ï¼šè¿™é‡Œä½¿ç”¨äº†<strong>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</strong>ã€‚<code>AbstractInvoker</code> å®šä¹‰äº† <code>invoke</code> çš„é€šç”¨æµç¨‹æ¡†æ¶ï¼ˆå‰åå¤„ç†ï¼‰ï¼Œè€Œå°†å…·ä½“çš„ç½‘ç»œé€šä¿¡ç­‰å·®å¼‚ç‚¹ç•™ç»™ <code>DubboInvoker</code>ã€<code>HttpInvoker</code> ç­‰å­ç±»å®ç°ã€‚</li>
</ul>
<h4 data-id="heading-17">5.4 é›†ç¾¤å®¹é”™ä¸è´Ÿè½½å‡è¡¡ï¼ˆç®€åŒ–æµç¨‹ï¼‰</h4>
<p>åœ¨ <code>ClusterInvoker</code>ï¼ˆå¦‚ <code>FailoverClusterInvoker</code>ï¼‰ä¸­ï¼Œæ ¸å¿ƒè°ƒç”¨é€»è¾‘ç¤ºæ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> Result <span class="hljs-title function_">invoke</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Invocation invocation)</span> <span class="hljs-keyword">throws</span> RpcException {
    <span class="hljs-comment">// 1. ä» Directory è·å–æ‰€æœ‰å¯ç”¨çš„æœåŠ¡æä¾›è€… Invoker åˆ—è¡¨</span>
    List&lt;Invoker&lt;T&gt;&gt; invokers = directory.list(invocation);
    
    <span class="hljs-comment">// 2. æ ¹æ®é…ç½®çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼ˆå¦‚ RandomLoadBalanceï¼‰é€‰æ‹©ä¸€ä¸ª Invoker</span>
    <span class="hljs-type">LoadBalance</span> <span class="hljs-variable">loadbalance</span> <span class="hljs-operator">=</span> initLoadBalance(invokers, invocation);
    Invoker&lt;T&gt; selectedInvoker = loadbalance.select(invokers, ..., invocation);
    
    <span class="hljs-comment">// 3. è¿›è¡Œè°ƒç”¨ï¼Œå¦‚æœå¤±è´¥ä¸”é…ç½®äº†é‡è¯•ï¼Œåˆ™é€‰æ‹©ä¸‹ä¸€ä¸ª Invoker å†æ¬¡è°ƒç”¨ï¼ˆå®¹é”™é€»è¾‘ï¼‰</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; retries + <span class="hljs-number">1</span>; i++) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> selectedInvoker.invoke(invocation);
        } <span class="hljs-keyword">catch</span> (RpcException e) {
            <span class="hljs-keyword">if</span> (shouldRetry(e, i)) {
                <span class="hljs-comment">// é‡è¯•å‰ï¼Œé‡æ–°è·å–åˆ—è¡¨ï¼ˆå¯èƒ½å·²å˜åŒ–ï¼‰ï¼Œå¹¶é‡æ–°é€‰æ‹©ï¼ˆæ’é™¤å·²å¤±è´¥çš„ï¼‰</span>
                invokers = reselectExcluded(invokers, selectedInvoker);
                selectedInvoker = loadbalance.select(invokers, ..., invocation);
                <span class="hljs-keyword">continue</span>;
            }
            <span class="hljs-keyword">throw</span> e;
        }
    }
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>æ­¤æµç¨‹æ¸…æ™°å±•ç¤ºäº† Dubbo å¦‚ä½•å°†<strong>æœåŠ¡å‘ç°</strong>ï¼ˆ<code>directory.list</code>ï¼‰ã€<strong>è´Ÿè½½å‡è¡¡</strong>å’Œ<strong>é›†ç¾¤å®¹é”™</strong>ï¼ˆé‡è¯•æœºåˆ¶ï¼‰ä¸²è”åœ¨ä¸€æ¬¡ RPC è°ƒç”¨ä¸­ï¼Œä½“ç°äº†å…¶æ²»ç†èƒ½åŠ›çš„è½åœ°ã€‚</p>
<h3 data-id="heading-18">æ€»ç»“</h3>
<p>Apache Dubbo é€šè¿‡æ¸…æ™°çš„åˆ†å±‚æ¶æ„ã€ä»¥ <code>Invoker</code> å’Œ <code>URL</code> ä¸ºæ ¸å¿ƒçš„ä¸€è‡´æŠ½è±¡ã€ä»¥åŠåŸºäº SPI çš„å¼ºå¤§æ‰©å±•æœºåˆ¶ï¼ŒæˆåŠŸæ„å»ºäº†ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡ã€æ€§èƒ½è‰¯å¥½ä¸”é«˜åº¦å¯å®šåˆ¶çš„ä¼ä¸šçº§ RPC ä¸å¾®æœåŠ¡æ²»ç†æ¡†æ¶ã€‚å®ƒä¸ä»…ä»…æ˜¯é€šä¿¡å·¥å…·ï¼Œæ›´æ˜¯ä¸€å¥—æå‡åˆ†å¸ƒå¼ç³»ç»Ÿå¯ç»´æŠ¤æ€§ã€å¯è§‚æµ‹æ€§å’Œç¨³å®šæ€§çš„ç³»ç»Ÿæ€§è§£å†³æ–¹æ¡ˆã€‚å…¶æˆåŠŸæºäºå¯¹åˆ†å¸ƒå¼æœåŠ¡æ ¸å¿ƒç—›ç‚¹çš„å‡†ç¡®æŠŠæ¡ï¼Œä»¥åŠå·¥ç¨‹åŒ–ä¸Šçš„ç²¾è‰¯è®¾è®¡ä¸æŒç»­è¿­ä»£ã€‚å¯¹äºé¢ä¸´æœåŠ¡åŒ–æŒ‘æˆ˜çš„æŠ€æœ¯å›¢é˜Ÿè€Œè¨€ï¼Œæ·±å…¥ç†è§£å…¶æ¶æ„è®¾è®¡ï¼Œèƒ½æ›´å¥½åœ°é©¾é©­å¹¶å‘æŒ¥å…¶æœ€å¤§ä»·å€¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringBoot+SPIæœºåˆ¶ï¼Œè½»æ¾å®ç°å¯æ’æ‹”ç»„ä»¶]]></title>    <link>https://juejin.cn/post/7589246131586121763</link>    <guid>https://juejin.cn/post/7589246131586121763</guid>    <pubDate>2025-12-30T05:50:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589246131586121763" data-draft-id="7589308109640564771" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringBoot+SPIæœºåˆ¶ï¼Œè½»æ¾å®ç°å¯æ’æ‹”ç»„ä»¶"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-30T05:50:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaç¼–ç¨‹çˆ±å¥½è€…"/> <meta itemprop="url" content="https://juejin.cn/user/819554264300154"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringBoot+SPIæœºåˆ¶ï¼Œè½»æ¾å®ç°å¯æ’æ‹”ç»„ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/819554264300154/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaç¼–ç¨‹çˆ±å¥½è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T05:50:18.000Z" title="Tue Dec 30 2025 05:50:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»€ä¹ˆæ˜¯Javaçš„SPI</p>
<p>Java SPIï¼ˆâ€ŒService Provider Interfaceï¼‰â€Œæ˜¯ä¸€ç§æœåŠ¡æä¾›ç•Œé¢ï¼Œâ€Œå®ƒæ˜¯Javaæä¾›çš„ä¸€ç§æœåŠ¡å‘ç°å’ŒåŠ è½½æœºåˆ¶ï¼Œâ€Œå…è®¸å¼€å‘è€…ä¸ºæ¥å£å®šä¹‰å¤šç§å®ç°ï¼Œâ€Œå¹¶åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°å‘ç°å’ŒåŠ è½½è¿™äº›å®ç°ã€‚â€Œ</p>
<p>Java SPIæœºåˆ¶çš„æ ¸å¿ƒåœ¨äºå®ƒæä¾›äº†ä¸€ç§æ–¹å¼ï¼Œâ€Œä½¿å¾—æœåŠ¡æä¾›è€…å¯ä»¥æ ¹æ®SPIçš„çº¦å®šï¼Œâ€Œä¸ºæŸä¸ªæ¥å£æä¾›å…·ä½“çš„å®ç°ç±»ã€‚â€Œè¿™äº›å®ç°ç±»è¢«æ”¾ç½®åœ¨ç‰¹å®šçš„ä½ç½®ï¼Œâ€Œå¦‚<code>META-INF/services</code>ç›®å½•ä¸‹ï¼Œâ€Œå¹¶é€šè¿‡é…ç½®æ–‡ä»¶æŒ‡å®šã€‚â€Œå½“éœ€è¦ä½¿ç”¨è¿™äº›æœåŠ¡æ—¶ï¼Œâ€ŒJavaè¿è¡Œæ—¶ç¯å¢ƒèƒ½å¤Ÿè‡ªåŠ¨æ‰«æè¿™äº›ç›®å½•ï¼Œâ€Œæ‰¾åˆ°å¹¶åŠ è½½ç›¸åº”çš„å®ç°ç±»ï¼Œâ€Œä»è€Œå®ç°æœåŠ¡çš„åŠ¨æ€å‘ç°å’ŒåŠ è½½ã€‚â€Œ</p>
<p>Java SPIçš„ä¸»è¦ç”¨é€”åŒ…æ‹¬ï¼šâ€Œ</p>
<ul>
<li>æœåŠ¡æä¾›è€…å¯ä»¥åœ¨ä¸ä¿®æ”¹ä¸šåŠ¡ä»£ç çš„æƒ…å†µä¸‹ï¼Œâ€Œä¸ºæ¡†æ¶æˆ–åº“æä¾›æ‰©å±•ç‚¹ã€‚â€Œ</li>
<li>å…è®¸åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°æ’å…¥æˆ–æ›´æ¢ç»„ä»¶å®ç°ï¼Œâ€Œé¼“åŠ±æ¾è€¦åˆçš„è®¾è®¡åŸåˆ™ã€‚â€Œ</li>
<li>å…è®¸ç¬¬ä¸‰æ–¹æ‰©å±•å’Œæ›¿æ¢æ ¸å¿ƒåº“ä¸­çš„ç»„ä»¶ï¼Œâ€Œä¸°å¯Œäº†Javaç”Ÿæ€ï¼Œâ€Œä¸ºå¼€å‘è€…æä¾›äº†æå¤§çš„çµæ´»æ€§ã€‚â€Œ</li>
</ul>
<p>åœ¨Javaä¸­ï¼Œâ€ŒSPIè¢«å¹¿æ³›åº”ç”¨äºå„ç§æ¡†æ¶å’Œåº“çš„æ‰©å±•ï¼Œâ€Œå¦‚Servletå®¹å™¨åˆå§‹åŒ–ã€â€Œç±»å‹è½¬æ¢ã€â€Œæ—¥å¿—è®°å½•ç­‰åœºæ™¯ã€‚â€Œé€šè¿‡SPIæœºåˆ¶ï¼Œâ€ŒJavaåº”ç”¨ç¨‹åºå¯ä»¥åœ¨ä¸ä¿®æ”¹ä¸šåŠ¡ä»£ç çš„æƒ…å†µä¸‹ï¼Œâ€Œè½»æ¾åœ°é›†æˆå’Œä½¿ç”¨ç¬¬ä¸‰æ–¹æä¾›çš„æœåŠ¡å®ç°ï¼Œâ€Œä»è€Œæé«˜äº†è½¯ä»¶çš„å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§</p>
<h2 data-id="heading-0"/>
<p>SPIå’ŒAPIçš„åŒºåˆ«</p>
<p>SPIå’ŒAPIçš„ä¸»è¦åŒºåˆ«åœ¨äºå®ƒä»¬çš„å®šä¹‰æ–¹å¼ã€â€Œè°ƒç”¨æ–¹å¼ã€â€Œçµæ´»æ€§ã€â€Œä¾èµ–å…³ç³»ä»¥åŠç”¨é€”ã€‚â€Œ</p>
<ul>
<li><strong>å®šä¹‰æ–¹å¼ï¼šâ€Œ</strong>Â APIæ˜¯ç”±å¼€å‘è€…ä¸»åŠ¨ç¼–å†™å¹¶å…¬å¼€ç»™å…¶ä»–å¼€å‘è€…ä½¿ç”¨çš„ï¼Œâ€Œè€ŒSPIæ˜¯ç”±æ¡†æ¶æˆ–åº“æä¾›æ–¹å®šä¹‰çš„æ¥å£ï¼Œâ€Œä¾›ç¬¬ä¸‰æ–¹å¼€å‘è€…å®ç°ã€‚â€Œ</li>
<li><strong>è°ƒç”¨æ–¹å¼ï¼šâ€Œ</strong>Â APIé€šè¿‡ç›´æ¥è°ƒç”¨æ¥å£çš„æ–¹æ³•æ¥ä½¿ç”¨åŠŸèƒ½ï¼Œâ€Œè€ŒSPIæ˜¯é€šè¿‡é…ç½®æ–‡ä»¶æ¥æŒ‡å®šå…·ä½“çš„å®ç°ç±»ï¼Œâ€Œç„¶åç”±æ¡†æ¶æˆ–åº“è‡ªåŠ¨åŠ è½½å’Œè°ƒç”¨ã€‚â€Œ</li>
<li><strong>çµæ´»æ€§ï¼šâ€Œ</strong>Â APIçš„å®ç°ç±»å¿…é¡»åœ¨ç¼–è¯‘æ—¶å°±ç¡®å®šï¼Œâ€Œæ— æ³•åŠ¨æ€æ›¿æ¢ï¼›â€Œè€ŒSPIçš„å®ç°ç±»å¯ä»¥åœ¨è¿è¡Œæ—¶æ ¹æ®é…ç½®æ–‡ä»¶çš„å†…å®¹è¿›è¡ŒåŠ¨æ€åŠ è½½å’Œæ›¿æ¢ã€‚â€Œ</li>
<li><strong>ä¾èµ–å…³ç³»ï¼šâ€Œ</strong>Â APIæ˜¯è¢«è°ƒç”¨æ–¹ä¾èµ–çš„ï¼Œâ€Œå³åº”ç”¨ç¨‹åºéœ€è¦å¼•å…¥APIæ‰€åœ¨çš„åº“æ‰èƒ½ä½¿ç”¨å…¶åŠŸèƒ½ï¼›â€Œè€ŒSPIæ˜¯è°ƒç”¨æ–¹ä¾èµ–çš„ï¼Œâ€Œå³æ¡†æ¶æˆ–åº“éœ€è¦å¼•å…¥ç¬¬ä¸‰æ–¹å®ç°ç±»çš„åº“æ‰èƒ½åŠ è½½å’Œè°ƒç”¨ã€‚â€Œ</li>
<li><strong>ç”¨é€”ï¼šâ€Œ</strong>Â APIé€šå¸¸ç”¨äºæè¿°åº“ã€â€Œæ¡†æ¶ã€â€Œæ“ä½œç³»ç»Ÿã€â€ŒæœåŠ¡ç­‰å¯¹å¤–æä¾›çš„ç¼–ç¨‹æ¥å£ï¼Œâ€Œå¼€å‘è€…é€šè¿‡APIè°ƒç”¨ç›¸åº”çš„åŠŸèƒ½æ¥å®ç°è‡ªå·±çš„åº”ç”¨ç¨‹åºã€‚â€Œè€ŒSPIå®šä¹‰äº†ä¸€ç§æ’ä»¶å¼çš„æ¶æ„ï¼Œâ€Œå…è®¸å¼€å‘è€…å®šä¹‰æ¥å£ï¼Œâ€Œå¹¶é€šè¿‡æœåŠ¡æä¾›è€…æ¥æä¾›ä¸åŒçš„å®ç°ï¼Œâ€Œä¸»è¦ç›®çš„æ˜¯å…è®¸ç³»ç»Ÿåœ¨è¿è¡Œæ—¶å‘ç°å’ŒåŠ è½½å…·ä½“çš„æœåŠ¡æä¾›è€…ï¼Œâ€Œä»è€Œå®ç°åŠ¨æ€æ‰©å±•å’Œæ›¿æ¢åŠŸèƒ½çš„èƒ½åŠ›ã€‚â€Œ</li>
</ul>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œâ€ŒAPIæ˜¯ä¸€ç§è§„èŒƒï¼Œâ€Œæè¿°äº†å¦‚ä½•ä¸ä¸€ä¸ªç»„ä»¶è¿›è¡Œäº¤äº’ï¼›â€Œè€ŒSPIåˆ™æ˜¯ä¸€ç§æœºåˆ¶ï¼Œâ€Œç”¨äºåŠ¨æ€åœ°å‘ç°å’ŒåŠ è½½å®ç°äº†ç‰¹å®šæ¥å£çš„ç»„ä»¶ã€‚â€Œ</p>
<h2 data-id="heading-1"/>
<p>å®ç°è¿‡ç¨‹</p>
<p><strong>0.ç›®å½•ç»“æ„</strong></p>
<pre><code class="hljs language-diff" lang="diff">sa-auth Â çˆ¶å·¥ç¨‹
<span class="hljs-deletion">-- sa-auth-bus ä¸šåŠ¡å·¥ç¨‹</span>
<span class="hljs-deletion">-- sa-auth-plugin å®šä¹‰SPIæ¥å£çš„å·¥ç¨‹</span>
<span class="hljs-deletion">-- sa-auth-plugin-ldap æ¨¡æ‹Ÿç¬¬ä¸‰æ–¹åº“çš„å®ç°å·¥ç¨‹</span>
</code></pre>
<p><strong>1.ideaåˆ›å»ºåä¸ºsa-auth çš„pom é¡¹ç›®ï¼Œpom å¦‚ä¸‹</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>Â Â 
<span class="hljs-tag">&lt;<span class="hljs-name">project</span>Â <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>Â <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>Â Â 
<span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1.16.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.vijay<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>cs-auth<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>cs-auth<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>cs-auth<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.compilerVersion</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.compilerVersion</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>cs-auth-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>cs-auth-bus<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>cs-auth-plugin-ldap<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.18.20<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.vijay<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>cs-auth-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<p><strong>2.ç„¶ååˆ›å»ºsa-auth-pluginï¼Œpom å¦‚ä¸‹</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>Â Â 
<span class="hljs-tag">&lt;<span class="hljs-name">project</span>Â <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>Â <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>Â Â 
<span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.vijay<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>cs-auth<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>&gt;</span>../pom.xml<span class="hljs-tag">&lt;/<span class="hljs-name">relativePath</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>cs-auth-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>cs-auth-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>cs-auth-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<p><strong>3.sa-auth-busï¼Œpom å¦‚ä¸‹</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>Â Â 
<span class="hljs-tag">&lt;<span class="hljs-name">project</span>Â <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>Â <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>Â Â 
<span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.vijay<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>cs-auth<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>&gt;</span>../pom.xml<span class="hljs-tag">&lt;/<span class="hljs-name">relativePath</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>cs-auth-bus<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>cs-auth-bus<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>cs-auth-bus<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.vijay<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>cs-auth-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1.1.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>repackage<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<p><strong>4.sa-auth-plugin-ldapï¼Œpomå¦‚ä¸‹</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>Â Â 
<span class="hljs-tag">&lt;<span class="hljs-name">project</span>Â <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>Â <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>Â Â 
<span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.vijay<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>cs-auth<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>&gt;</span>../pom.xml<span class="hljs-tag">&lt;/<span class="hljs-name">relativePath</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>cs-auth-plugin-ldap<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>cs-auth-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>cs-auth-plugin-ldap<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.vijay<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>cs-auth-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â  Â  Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
Â  Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<p><strong>5.åˆ›å»ºå¥½çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/482ebbcf6b384dca8c42dd79f660f56f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767678618&amp;x-signature=rUOoC7970WOJLzHS8J87vRKXBJQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>6.æ‰“å¼€sa-auth-pluginï¼Œå®šä¹‰SPIæ¥å£</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">packageÂ com.vijay.csauthplugin.service; Â 

<span class="hljs-comment">/** Â 
* æ’ä»¶SPIæ¥å£ Â 
* Â 
*Â @authorÂ vijay Â 
*/</span>
publicinterfaceÂ AuthPluginServiceÂ { Â 

Â  Â Â <span class="hljs-comment">/** Â 
Â  Â  * ç™»å½•è®¤è¯ Â 
Â  Â  * Â 
Â  Â  *Â @paramÂ userName ç”¨æˆ·å Â 
Â  Â  *Â @paramÂ password å¯†ç  Â 
Â  Â  *Â @returnÂ è®¤è¯ç»“æœ Â 
Â  Â  */</span>
Â  Â Â <span class="hljs-function"><span class="hljs-type">boolean</span>Â <span class="hljs-title">login</span><span class="hljs-params">(<span class="hljs-type">String</span> userName, <span class="hljs-type">String</span> password)</span></span>; Â 

Â  Â Â <span class="hljs-comment">/** Â 
Â  Â  * AuthPluginService Name which for conveniently find AuthPluginService instance. Â 
Â  Â  * Â 
Â  Â  *Â @returnÂ AuthServiceName mark a AuthPluginService instance. Â 
Â  Â  */</span>
Â  Â Â <span class="hljs-function"><span class="hljs-type">String</span>Â <span class="hljs-title">getAuthServiceName</span><span class="hljs-params">()</span></span>; Â 
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b5c98892b554395a8ebde6dedadbc06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767678618&amp;x-signature=gD%2F9z%2B8DVFXiuP3EQyIAJttQ9sE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>7.cs-auth-plugin-ldap ä¸­å®ç°SPIçš„æ¥å£å¹¶ä¸”æ‰“æˆjaråŒ…ï¼Œæ¨¡æ‹Ÿå¤–éƒ¨æä¾›çš„æ’ä»¶jaråŒ…</strong></p>
<p>1.å®ç°å¼•å…¥çš„cs-auth-plugåŒ…çš„SPIæ¥å£Â <code>package com.vijay.csauthplugin.ldap;</code></p>
<pre><code class="hljs language-typescript" lang="typescript">packageÂ com.<span class="hljs-property">vijay</span>.<span class="hljs-property">csauthplugin</span>.<span class="hljs-property">ldap</span>;
<span class="hljs-keyword">import</span>Â com.<span class="hljs-property">vijay</span>.<span class="hljs-property">csauthplugin</span>.<span class="hljs-property">service</span>.<span class="hljs-property">AuthPluginService</span>; Â 
<span class="hljs-comment">/** Â 
*Â <span class="hljs-doctag">@author</span>Â vijay Â 
*/</span>
<span class="hljs-keyword">public</span><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">LdapProviderImpl</span>Â <span class="hljs-keyword">implements</span>Â <span class="hljs-title class_">AuthPluginService</span>Â { Â 
Â  Â Â <span class="hljs-meta">@Override</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">boolean</span>Â <span class="hljs-title function_">login</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> userName, <span class="hljs-built_in">String</span> password</span>)Â { Â 
Â  Â  Â  Â Â <span class="hljs-keyword">return</span><span class="hljs-string">"vijay"</span>.<span class="hljs-title function_">equals</span>(userName) &amp;&amp;Â <span class="hljs-string">"123456"</span>.<span class="hljs-title function_">equals</span>(password); Â 
Â  Â  } Â 

Â  Â Â <span class="hljs-meta">@Override</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">String</span>Â <span class="hljs-title function_">getAuthServiceName</span>(<span class="hljs-params"/>)Â { Â 
Â  Â  Â  Â Â <span class="hljs-keyword">return</span><span class="hljs-string">"LdapProvider"</span>; Â 
Â  Â  } Â 
}
</code></pre>
<p>2.resourcesç›®å½•ä¸‹åˆ›å»º<code>META-INF/services</code>ç›®å½•ï¼Œå¹¶åœ¨ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºSPIæ¥å£ç±»çš„å…¨è·¯å¾„é™å®šå<code>com.vijay.csauthplugin.service.AuthPluginService</code>çš„æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸­å†™å…¥<code>LdapProviderImpl</code>Â å®ç°ç±»çš„å…¨è·¯å¾„é™å®šå<code>com.vijay.csauthplugin.ldap.LdapProviderImpl</code></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1cbf5c12c5b404ea6a344084c78f1e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767678618&amp;x-signature=jP%2BIQSlrhJ4df4viCZVMsbn8B8o%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>3.cs-auth-plugin-ldapæ‰“åŒ…æˆjaråŒ…</p>
<p><strong>8.æ‰“å¼€cs-auth-plugin-bus</strong></p>
<p>1.é¡¹ç›®ä¸‹åˆ›å»ºpluginåŒ…ï¼Œæ·»åŠ ä¸€ä¸ªæ’ä»¶çš„é»˜è®¤å®ç°<code>DefaultProviderImpl</code></p>
<pre><code class="hljs language-typescript" lang="typescript">packageÂ com.<span class="hljs-property">vijay</span>.<span class="hljs-property">bus</span>.<span class="hljs-property">plugin</span>; Â 

<span class="hljs-keyword">import</span>Â com.<span class="hljs-property">vijay</span>.<span class="hljs-property">csauthplugin</span>.<span class="hljs-property">service</span>.<span class="hljs-property">AuthPluginService</span>; Â 

<span class="hljs-comment">/** Â 
* é»˜è®¤æ’ä»¶å®ç° Â 
* Â 
*Â <span class="hljs-doctag">@author</span>Â vijay Â 
*/</span>
<span class="hljs-keyword">public</span><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">DefaultProviderImpl</span>Â <span class="hljs-keyword">implements</span>Â <span class="hljs-title class_">AuthPluginService</span>Â { Â 
Â  Â Â <span class="hljs-meta">@Override</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">boolean</span>Â <span class="hljs-title function_">login</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> userName, <span class="hljs-built_in">String</span> password</span>)Â { Â 
Â  Â  Â  Â Â <span class="hljs-keyword">return</span><span class="hljs-string">"vijay"</span>.<span class="hljs-title function_">equals</span>(userName) &amp;&amp;Â <span class="hljs-string">"123456"</span>.<span class="hljs-title function_">equals</span>(password); Â 
Â  Â  } Â 

Â  Â Â <span class="hljs-meta">@Override</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-title class_">String</span>Â <span class="hljs-title function_">getAuthServiceName</span>(<span class="hljs-params"/>)Â { Â 
Â  Â  Â  Â Â <span class="hljs-keyword">return</span><span class="hljs-string">"DefaultProvider"</span>; Â 
Â  Â  } Â 
}
</code></pre>
<p>2.resourcesç›®å½•ä¸‹åˆ›å»º<code>META-INF/services</code>ç›®å½•å¹¶åœ¨ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºSPIæ¥å£ç±»å…¨è·¯å¾„é™å®šåçš„æ–‡ä»¶<code>com.vijay.csauthplugin.service.AuthPluginService</code>ï¼Œæ–‡ä»¶å†…å®¹ä¸º<code>DefaultProviderImpl</code>å…¨è·¯å¾„é™å®šå<code>com.vijay.bus.plugin.DefaultProviderImpl.è‡ªå®šä¹‰ç±»åŠ è½½å™¨</code></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span>Â com.vijay.bus.plugin; Â 

<span class="hljs-keyword">import</span>Â java.net.URL; Â 
<span class="hljs-keyword">import</span>Â java.net.URLClassLoader; Â 

<span class="hljs-comment">/** Â 
* è‡ªå®šä¹‰ç±»åŠ è½½å™¨ Â 
* Â 
*Â <span class="hljs-doctag">@author</span>Â vijay Â 
*/</span>
publicclassÂ PluginClassLoaderÂ <span class="hljs-keyword">extends</span>Â <span class="hljs-title class_">URLClassLoader</span>Â { Â 

Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-title function_">PluginClassLoader</span><span class="hljs-params">(URL[] urls)</span>Â { Â 
Â  Â  Â  Â Â <span class="hljs-built_in">super</span>(urls); Â 
Â  Â  } Â 

Â  Â Â <span class="hljs-comment">/** Â 
Â  Â  *Â <span class="hljs-doctag">@param</span>Â url è·¯å¾„ Â 
Â  Â  */</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">addzURL</span><span class="hljs-params">(URL url)</span>Â { Â 
Â  Â  Â  Â Â <span class="hljs-built_in">super</span>.addURL(url); Â 
Â  Â  } Â 

}
</code></pre>
<p>4.å®šä¹‰ä¸€ä¸ªåŠ è½½å¤–éƒ¨jaråŒ…çš„ç±»</p>
<pre><code class="hljs language-scss" lang="scss">packageÂ com<span class="hljs-selector-class">.vijay</span><span class="hljs-selector-class">.bus</span><span class="hljs-selector-class">.plugin</span>; Â 

importÂ java<span class="hljs-selector-class">.io</span><span class="hljs-selector-class">.File</span>; Â 
importÂ java<span class="hljs-selector-class">.net</span><span class="hljs-selector-class">.URL</span>; Â 
importÂ java<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.ArrayList</span>; Â 
importÂ java<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.List</span>; Â 
importÂ java<span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.Objects</span>; Â 

<span class="hljs-comment">/** Â 
* åŠ è½½æŒ‡å®šç›®å½•jaråŒ… Â 
*Â @authorÂ vijay Â 
*/</span>
publicclassÂ ExternalJarLoaderÂ { Â 

Â  Â Â <span class="hljs-comment">/** Â 
Â  Â  * åŠ è½½å¤–éƒ¨jiaåŒ… Â 
Â  Â  * Â 
Â  Â  *Â @paramÂ externalDirPath jaråŒ…ç›®å½• Â 
Â  Â  */</span>
Â  Â Â publicÂ staticÂ voidÂ <span class="hljs-built_in">loadExternalJars</span>(String externalDirPath)Â { Â 
Â  Â  Â  Â  File dir =Â newÂ <span class="hljs-built_in">File</span>(externalDirPath); Â 
Â  Â  Â  Â Â ifÂ (!dir.exists() || !dir<span class="hljs-selector-class">.isDirectory</span>()) { Â 
Â  Â  Â  Â  Â  Â Â thrownewÂ <span class="hljs-built_in">IllegalArgumentException</span>("Invalid directory path"); Â 
Â  Â  Â  Â  } Â 
Â  Â  Â  Â  List&lt;URL&gt; urls =Â newÂ ArrayList&lt;&gt;(); Â 
Â  Â  Â  Â  File<span class="hljs-selector-attr">[]</span> listFiles = dir<span class="hljs-selector-class">.listFiles</span>(); Â 
Â  Â  Â  Â Â ifÂ (Objects.nonNull(listFiles) &amp;&amp; listFiles<span class="hljs-selector-class">.length</span> &gt;Â <span class="hljs-number">0</span>) { Â 
Â  Â  Â  Â  Â  Â  ClassLoader contextClassLoader = Thread<span class="hljs-selector-class">.currentThread</span>()<span class="hljs-selector-class">.getContextClassLoader</span>(); Â 
Â  Â  Â  Â  Â  Â Â tryÂ { Â 
Â  Â  Â  Â  Â  Â  Â  Â Â forÂ (File file : listFiles) { Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â ifÂ (file.getName()<span class="hljs-selector-class">.endsWith</span>(".jar")) { Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  urls<span class="hljs-selector-class">.add</span>(file.toURI()<span class="hljs-selector-class">.toURL</span>()); Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  } Â 
Â  Â  Â  Â  Â  Â  Â  Â  } Â 
Â  Â  Â  Â  Â  Â  Â  Â  PluginClassLoader customClassLoader =Â newÂ <span class="hljs-built_in">PluginClassLoader</span>(urls.toArray(newÂ URL[<span class="hljs-number">0</span>])); Â 
Â  Â  Â  Â  Â  Â  Â  Â  Thread<span class="hljs-selector-class">.currentThread</span>()<span class="hljs-selector-class">.setContextClassLoader</span>(customClassLoader); Â 
Â  Â  Â  Â  Â  Â  }Â catchÂ (Exception e) { Â 
Â  Â  Â  Â  Â  Â  Â  Â  e<span class="hljs-selector-class">.printStackTrace</span>(); Â 
Â  Â  Â  Â  Â  Â  Â  Â  Thread<span class="hljs-selector-class">.currentThread</span>()<span class="hljs-selector-class">.setContextClassLoader</span>(contextClassLoader); Â 
Â  Â  Â  Â  Â  Â  } Â 
Â  Â  Â  Â  } Â 
Â  Â  } Â 
}
</code></pre>
<p>5.å¯åŠ¨ç±»ä¸­æ·»åŠ ç±»åŠ è½½å™¨</p>
<pre><code class="hljs language-typescript" lang="typescript">packageÂ com.<span class="hljs-property">vijay</span>.<span class="hljs-property">bus</span>; Â 

<span class="hljs-keyword">import</span>Â com.<span class="hljs-property">vijay</span>.<span class="hljs-property">bus</span>.<span class="hljs-property">plugin</span>.<span class="hljs-property">ExternalJarLoader</span>; Â 
<span class="hljs-keyword">import</span>Â org.<span class="hljs-property">springframework</span>.<span class="hljs-property">boot</span>.<span class="hljs-property">SpringApplication</span>; Â 
<span class="hljs-keyword">import</span>Â org.<span class="hljs-property">springframework</span>.<span class="hljs-property">boot</span>.<span class="hljs-property">autoconfigure</span>.<span class="hljs-property">SpringBootApplication</span>; Â 

<span class="hljs-comment">/** Â 
*Â <span class="hljs-doctag">@author</span>Â vijay Â 
*/</span>
<span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-keyword">public</span><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">CsAuthBusApplication</span>Â { Â 
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-keyword">static</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>)Â { Â 
Â  Â  Â  Â  <span class="hljs-title class_">String</span> jarPath=<span class="hljs-string">"/Users/vijay/Downloads/build/plugin"</span>;
Â  Â  Â  Â  <span class="hljs-title class_">ExternalJarLoader</span>.<span class="hljs-title function_">loadExternalJars</span>(jarPath); Â 
Â  Â  Â  Â  <span class="hljs-title class_">SpringApplication</span>.<span class="hljs-title function_">run</span>(<span class="hljs-title class_">CsAuthBusApplication</span>.<span class="hljs-property">class</span>,Â args); Â 
Â  Â  } Â 
}
</code></pre>
<p>6.åˆ›å»ºæ’ä»¶æä¾›è€…ç±»<code>PluginProvider</code>ï¼Œæä¾›å®ç°ç±»ä¾›springbootæ³¨å…¥</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span>Â com.vijay.bus.plugin; Â 

<span class="hljs-keyword">import</span>Â com.vijay.csauthplugin.service.AuthPluginService; Â 

<span class="hljs-keyword">import</span>Â java.util.ServiceLoader; Â 

<span class="hljs-comment">/** Â 
* æ’ä»¶æä¾›è€… Â 
* Â 
*Â <span class="hljs-doctag">@author</span>Â vijay Â 
*/</span>
<span class="hljs-keyword">public</span><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">PluginProvider</span>Â { Â 

Â  Â Â <span class="hljs-comment">/** Â 
Â  Â  * æä¾›ä¸€ä¸ªæ’ä»¶ä¾›æ³¨å…¥(é»˜è®¤è¿”å›å¤–éƒ¨ç›®å½•çš„æ’ä»¶,å¤–éƒ¨ç›®å½•æ²¡æœ‰æ’ä»¶æ—¶è¿”å›é»˜è®¤æ’ä»¶) Â 
Â  Â  * Â 
Â  Â  *Â <span class="hljs-doctag">@return</span>Â å…·ä½“çš„æ’ä»¶å®ç° Â 
Â  Â  */</span>
Â  Â Â <span class="hljs-keyword">public</span>Â staticÂ AuthPluginServiceÂ getAuthPluginService()Â { Â 
Â  Â  Â  Â  ServiceLoader&lt;AuthPluginService&gt; defaultLoad = ServiceLoader.load(AuthPluginService.<span class="hljs-keyword">class</span>); Â 
Â  Â  Â  Â  AuthPluginService plugin =Â <span class="hljs-literal">null</span>; Â 
Â  Â  Â  Â Â <span class="hljs-keyword">for</span>Â (AuthPluginService authPluginService : defaultLoad) { Â 
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (authPluginServiceÂ instanceofÂ DefaultProviderImpl) { Â 
Â  Â  Â  Â  Â  Â  Â  Â  plugin = authPluginService; Â 
Â  Â  Â  Â  Â  Â  }Â <span class="hljs-keyword">else</span>Â { Â 
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â authPluginService; Â 
Â  Â  Â  Â  Â  Â  } Â 
Â  Â  Â  Â  } Â 
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â plugin; Â 
Â  Â  } Â 
}
</code></pre>
<p>7.é¡¹ç›®ä¸‹åˆ›å»º<code>conf</code>åŒ…ï¼Œæ³¨å…¥å®ç°ç±»åˆ°<code>springboot</code></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span>Â com.vijay.bus.conf; Â 

<span class="hljs-keyword">import</span>Â com.vijay.bus.plugin.PluginProvider; Â 
<span class="hljs-keyword">import</span>Â com.vijay.csauthplugin.service.AuthPluginService; Â 
<span class="hljs-keyword">import</span>Â org.springframework.context.<span class="hljs-keyword">annotation</span>.Bean; Â 
<span class="hljs-keyword">import</span>Â org.springframework.context.<span class="hljs-keyword">annotation</span>.Configuration; Â 


<span class="hljs-comment">/** Â 
*Â <span class="hljs-doctag">@author</span>Â vijay Â 
*/</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">PluginConfig</span>Â { Â 


Â  Â Â <span class="hljs-meta">@Bean</span>
Â  Â Â <span class="hljs-keyword">public</span>Â AuthPluginServiceÂ authPluginService()Â { Â 
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â PluginProvider.getAuthPluginService(); Â 
Â  Â  } Â 
}
</code></pre>
<p>8.é¡¹ç›®ä¸‹åˆ›å»ºcontrolleråŒ…ï¼Œå®šä¹‰controlleræ¥å£ï¼Œè°ƒç”¨æµ‹è¯•</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span>Â com.vijay.bus.controller; Â 

<span class="hljs-keyword">import</span>Â com.vijay.csauthplugin.service.AuthPluginService; Â 
<span class="hljs-keyword">import</span>Â org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.GetMapping; Â 
<span class="hljs-keyword">import</span>Â org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RestController; Â 

<span class="hljs-keyword">import</span>Â javax.<span class="hljs-keyword">annotation</span>.Resource; Â 
<span class="hljs-keyword">import</span>Â java.util.HashMap; Â 
<span class="hljs-keyword">import</span>Â java.util.Map; Â 

<span class="hljs-comment">/** Â 
*Â <span class="hljs-doctag">@author</span>Â vijay Â 
*/</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">TestController</span>Â { Â 
Â  Â Â <span class="hljs-meta">@Resource</span>
Â  Â Â <span class="hljs-keyword">private</span>Â AuthPluginService authPluginService; Â 
Â  Â Â <span class="hljs-meta">@GetMapping(<span class="hljs-string">"test"</span>)</span> Â 
Â  Â Â <span class="hljs-keyword">public</span>Â ObjectÂ test()Â { Â 
Â  Â  Â  Â Â returnnewÂ HashMap() {{ Â 
Â  Â  Â  Â  Â  Â  put(<span class="hljs-string">"name"</span>, authPluginService.getAuthServiceName()); Â 
Â  Â  Â  Â  Â  Â  put(<span class="hljs-string">"login"</span>, authPluginService.login(<span class="hljs-string">"vijay"</span>,Â <span class="hljs-string">"123456"</span>)); Â 
Â  Â  Â  Â  }}; Â 
Â  Â  } Â 
}
</code></pre>
<p>å®Œæ•´ç»“æ„</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b22efb6b24e948538e9c6fac742a6e08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767678618&amp;x-signature=j%2FVLxjhU5cKH%2Bu4wbCE7aql5NwQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>9.è¯·æ±‚æ¥å£ï¼Œæµ‹è¯•å®ç°</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9b600cfcee54dcea24d6677115beffb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767678618&amp;x-signature=9Uj6m6%2BnU9%2F9ujewo9IIvHbU5%2BY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ­¤æ—¶è¿”å›ä¸ºé»˜è®¤å®ç°ï¼ŒæŠŠcs-auth-plugin-ldapé¡¹ç›®æ¨¡æ‹Ÿçš„ç¬¬ä¸‰æ–¹åŒ…æ”¾åˆ°å¤–éƒ¨jaråŒ…åŠ è½½ç›®å½•ï¼Œé‡æ–°å¯åŠ¨é¡¹ç›®åå‘èµ·è¯·æ±‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/566a317788ff48d68cef86449c55f17c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767678618&amp;x-signature=SFUXKYq8D1OnFh6sKmW1kadctKA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®ç°å·²ç»æ˜¯æ¨¡æ‹Ÿçš„jarçš„å®ç°</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯ Token æ— æ„Ÿåˆ·æ–°å…¨è§£æï¼šVue3 ä¸ React å®ç°æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7589227883262083118</link>    <guid>https://juejin.cn/post/7589227883262083118</guid>    <pubDate>2025-12-30T05:54:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589227883262083118" data-draft-id="7589207474134728754" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯ Token æ— æ„Ÿåˆ·æ–°å…¨è§£æï¼šVue3 ä¸ React å®ç°æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="Vue.js,React.js"/> <meta itemprop="datePublished" content="2025-12-30T05:54:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸æƒ³ç§ƒå¤´çš„ç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/2754702534251820"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯ Token æ— æ„Ÿåˆ·æ–°å…¨è§£æï¼šVue3 ä¸ React å®ç°æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2754702534251820/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸æƒ³ç§ƒå¤´çš„ç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T05:54:13.000Z" title="Tue Dec 30 2025 05:54:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰åç«¯åˆ†ç¦»æ¶æ„ä¸­ï¼ŒToken æ˜¯ä¸»æµçš„èº«ä»½è®¤è¯æ–¹å¼ã€‚ä½† Token å­˜åœ¨æœ‰æ•ˆæœŸé™åˆ¶ï¼Œè‹¥åœ¨ç”¨æˆ·æ“ä½œè¿‡ç¨‹ä¸­ Token è¿‡æœŸï¼Œä¼šå¯¼è‡´è¯·æ±‚å¤±è´¥ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚ã€Œæ— æ„Ÿåˆ·æ–°ã€æŠ€æœ¯åº”è¿è€Œç”Ÿâ€”â€”å®ƒèƒ½åœ¨ Token è¿‡æœŸå‰æˆ–è¿‡æœŸç¬é—´ï¼Œè‡ªåŠ¨åˆ·æ–° Token å¹¶ç»§ç»­å®ŒæˆåŸè¯·æ±‚ï¼Œå…¨ç¨‹å¯¹ç”¨æˆ·é€æ˜ã€‚</p>
<p>æœ¬æ–‡å°†å…ˆæ¢³ç† Token æ— æ„Ÿåˆ·æ–°çš„æ ¸å¿ƒåŸç†ï¼Œå†åˆ†åˆ«åŸºäº Vue3ï¼ˆComposition API + Piniaï¼‰å’Œ Reactï¼ˆHooks + Axiosï¼‰ç»™å‡ºå®Œæ•´å®ç°æ–¹æ¡ˆï¼ŒåŒæ—¶è§£æå¸¸è§é—®é¢˜ä¸ä¼˜åŒ–æ€è·¯ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿè½åœ°ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒåŸç†ï¼šä¸ºä»€ä¹ˆéœ€è¦æ— æ„Ÿåˆ·æ–°ï¼Ÿæ€ä¹ˆå®ç°ï¼Ÿ</h2>
<h3 data-id="heading-1">1. åŸºç¡€æ¦‚å¿µï¼šAccess Token ä¸ Refresh Token</h3>
<p>æ— æ„Ÿåˆ·æ–°ä¾èµ–ã€ŒåŒ Token æœºåˆ¶ã€ï¼Œåç«¯éœ€è¿”å›ä¸¤ç§ Tokenï¼š</p>
<ul>
<li><strong>Access Tokenï¼ˆè®¿é—® Tokenï¼‰</strong> ï¼šæœ‰æ•ˆæœŸçŸ­ï¼ˆå¦‚ 2 å°æ—¶ï¼‰ï¼Œç”¨äºæ¥å£è¯·æ±‚çš„èº«ä»½è®¤è¯ï¼Œæ”¾åœ¨è¯·æ±‚å¤´ï¼ˆå¦‚ Authorization: Bearer {token}ï¼‰ï¼›</li>
<li><strong>Refresh Tokenï¼ˆåˆ·æ–° Tokenï¼‰</strong> ï¼šæœ‰æ•ˆæœŸé•¿ï¼ˆå¦‚ 7 å¤©ï¼‰ï¼Œä»…ç”¨äº Access Token è¿‡æœŸæ—¶è¯·æ±‚æ–°çš„ Access Tokenï¼Œå®‰å…¨æ€§è¦æ±‚æ›´é«˜ï¼ˆå»ºè®®å­˜å‚¨åœ¨ HttpOnly Cookie ä¸­ï¼Œé¿å… XSS æ”»å‡»ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-2">2. æ— æ„Ÿåˆ·æ–°æ ¸å¿ƒæµç¨‹</h3>
<ol>
<li>å‰ç«¯å‘èµ·æ¥å£è¯·æ±‚ï¼Œæºå¸¦ Access Tokenï¼›</li>
<li>æ‹¦æˆªå“åº”ï¼šè‹¥è¿”å› 401 çŠ¶æ€ç ï¼ˆAccess Token è¿‡æœŸï¼‰ï¼Œåˆ™è§¦å‘åˆ·æ–°é€»è¾‘ï¼›</li>
<li>ç”¨ Refresh Token è°ƒç”¨åç«¯ã€Œåˆ·æ–° Token æ¥å£ã€ï¼Œè·å–æ–°çš„ Access Tokenï¼›</li>
<li>æ›´æ–°æœ¬åœ°å­˜å‚¨çš„ Access Tokenï¼›</li>
<li>é‡æ–°å‘èµ·ä¹‹å‰å¤±è´¥çš„è¯·æ±‚ï¼ˆæºå¸¦æ–° Tokenï¼‰ï¼›</li>
<li>è‹¥ Refresh Token ä¹Ÿè¿‡æœŸï¼ˆåˆ·æ–°æ¥å£è¿”å› 401ï¼‰ï¼Œåˆ™è·³è½¬è‡³ç™»å½•é¡µï¼Œè¦æ±‚ç”¨æˆ·é‡æ–°ç™»å½•ã€‚</li>
</ol>
<p>å…³é”®ä¼˜åŒ–ç‚¹ï¼š<strong>é¿å…é‡å¤åˆ·æ–°</strong>â€”â€”å½“å¤šä¸ªè¯·æ±‚åŒæ—¶å›  Token è¿‡æœŸå¤±è´¥æ—¶ï¼Œéœ€ä¿è¯åªå‘èµ·ä¸€æ¬¡ Refresh Token è¯·æ±‚ï¼Œå…¶ä»–è¯·æ±‚æ’é˜Ÿç­‰å¾…æ–° Token ç”Ÿæˆåå†é‡è¯•ã€‚</p>
<h2 data-id="heading-3">äºŒã€å‰ç½®å‡†å¤‡ï¼šAxios æ‹¦æˆªå™¨å°è£…ï¼ˆé€šç”¨åŸºç¡€ï¼‰</h2>
<p>æ— è®ºæ˜¯ Vue è¿˜æ˜¯ Reactï¼Œéƒ½å¯åŸºäº Axios çš„ã€Œè¯·æ±‚æ‹¦æˆªå™¨ã€å’Œã€Œå“åº”æ‹¦æˆªå™¨ã€å®ç° Token ç»Ÿä¸€å¤„ç†ã€‚å…ˆå°è£…ä¸€ä¸ªåŸºç¡€ Axios å®ä¾‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// utils/request.js</span>
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

<span class="hljs-comment">// åˆ›å»º Axios å®ä¾‹</span>
<span class="hljs-keyword">const</span> service = axios.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">baseURL</span>: <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_API_BASE_URL</span>, <span class="hljs-comment">// ç¯å¢ƒå˜é‡ä¸­çš„æ¥å£åŸºç¡€åœ°å€</span>
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">5000</span> <span class="hljs-comment">// è¯·æ±‚è¶…æ—¶æ—¶é—´</span>
});

<span class="hljs-comment">// 1. è¯·æ±‚æ‹¦æˆªå™¨ï¼šæ·»åŠ  Access Token</span>
service.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> accessToken = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'accessToken'</span>); <span class="hljs-comment">// ç®€åŒ–å­˜å‚¨ï¼Œå®é™…å»ºè®® Vue ç”¨ Pinia/React ç”¨çŠ¶æ€ç®¡ç†</span>
    <span class="hljs-keyword">if</span> (accessToken) {
      config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${accessToken}</span>`</span>;
    }
    <span class="hljs-keyword">return</span> config;
  },
  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
);

<span class="hljs-comment">// 2. å“åº”æ‹¦æˆªå™¨ï¼šå¤„ç† Token è¿‡æœŸé€»è¾‘ï¼ˆæ ¸å¿ƒï¼Œåç»­æ¡†æ¶å·®å¼‚åŒ–å®ç°ï¼‰</span>
<span class="hljs-comment">// æ­¤å¤„å…ˆç•™ç©ºï¼Œåç»­åœ¨ Vue/React ä¸­è¡¥å……å…·ä½“é€»è¾‘</span>
service.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response.<span class="hljs-property">data</span>, <span class="hljs-comment">// ç›´æ¥è¿”å›å“åº”ä½“</span>
  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-title function_">handleResponseError</span>(error, service) <span class="hljs-comment">// é”™è¯¯å¤„ç†ï¼Œä¼ å…¥ service ç”¨äºé‡è¯•è¯·æ±‚</span>
);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> service;
</code></pre>
<h2 data-id="heading-4">ä¸‰ã€Vue3 å®ç°æ–¹æ¡ˆï¼ˆComposition API + Piniaï¼‰</h2>
<p>Vue3 ä¸­æ¨èç”¨ Pinia ç®¡ç†å…¨å±€çŠ¶æ€ï¼ˆå­˜å‚¨ Tokenï¼‰ï¼Œç»“åˆ Composition API å°è£…åˆ·æ–°é€»è¾‘ï¼Œä¿è¯ä»£ç å¤ç”¨æ€§ã€‚</p>
<h3 data-id="heading-5">1. æ­¥éª¤ 1ï¼šPinia çŠ¶æ€ç®¡ç†ï¼ˆå­˜å‚¨ Tokenï¼‰</h3>
<p>åˆ›å»º Pinia Store ç®¡ç† Access Token å’Œ Refresh Tokenï¼Œæä¾›åˆ·æ–° Token çš„æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// stores/authStore.js</span>
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>;
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useAuthStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'auth'</span>, {
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">accessToken</span>: <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'accessToken'</span>) || <span class="hljs-string">''</span>,
    <span class="hljs-attr">refreshToken</span>: <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'refreshToken'</span>) || <span class="hljs-string">''</span> <span class="hljs-comment">// å®é™…å»ºè®®å­˜ HttpOnly Cookie</span>
  }),
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-comment">// æ›´æ–° Token</span>
    <span class="hljs-title function_">updateTokens</span>(<span class="hljs-params">newAccessToken, newRefreshToken</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">accessToken</span> = newAccessToken;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">refreshToken</span> = newRefreshToken;
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'accessToken'</span>, newAccessToken);
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'refreshToken'</span>, newRefreshToken); <span class="hljs-comment">// ä»…æ¼”ç¤ºï¼Œç”Ÿäº§ç¯å¢ƒç”¨ HttpOnly Cookie</span>
    },
    <span class="hljs-comment">// åˆ·æ–° Token æ ¸å¿ƒæ–¹æ³•</span>
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">refreshAccessToken</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/api/refresh-token'</span>, {
          <span class="hljs-attr">refreshToken</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">refreshToken</span>
        });
        <span class="hljs-keyword">const</span> { accessToken, refreshToken } = res.<span class="hljs-property">data</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateTokens</span>(accessToken, refreshToken);
        <span class="hljs-keyword">return</span> accessToken; <span class="hljs-comment">// è¿”å›æ–° Tokenï¼Œç”¨äºé‡è¯•è¯·æ±‚</span>
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-comment">// åˆ·æ–° Token å¤±è´¥ï¼ˆå¦‚ Refresh Token è¿‡æœŸï¼‰ï¼Œæ¸…é™¤çŠ¶æ€å¹¶è·³è½¬ç™»å½•</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">clearTokens</span>();
        <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">'/login'</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
      }
    },
    <span class="hljs-comment">// æ¸…é™¤ Token</span>
    <span class="hljs-title function_">clearTokens</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">accessToken</span> = <span class="hljs-string">''</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">refreshToken</span> = <span class="hljs-string">''</span>;
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'accessToken'</span>);
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'refreshToken'</span>);
    }
  }
});
</code></pre>
<h3 data-id="heading-6">2. æ­¥éª¤ 2ï¼šå®ç°å“åº”æ‹¦æˆªå™¨çš„é”™è¯¯å¤„ç†</h3>
<p>å®Œå–„ä¹‹å‰çš„å“åº”æ‹¦æˆªå™¨ï¼Œæ·»åŠ  Token è¿‡æœŸå¤„ç†é€»è¾‘ï¼Œæ ¸å¿ƒæ˜¯ã€Œé¿å…é‡å¤åˆ·æ–°ã€ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// utils/request.jsï¼ˆVue3 ç‰ˆæœ¬è¡¥å……ï¼‰</span>
<span class="hljs-keyword">import</span> { useAuthStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/stores/authStore'</span>;

<span class="hljs-comment">// ç”¨äºå­˜å‚¨åˆ·æ–° Token çš„è¯·æ±‚ï¼ˆé¿å…é‡å¤åˆ·æ–°ï¼‰</span>
<span class="hljs-keyword">let</span> refreshPromise = <span class="hljs-literal">null</span>;

<span class="hljs-comment">// å“åº”é”™è¯¯å¤„ç†å‡½æ•°</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleResponseError</span>(<span class="hljs-params">error, service</span>) {
  <span class="hljs-keyword">const</span> authStore = <span class="hljs-title function_">useAuthStore</span>();
  <span class="hljs-keyword">const</span> originalRequest = error.<span class="hljs-property">config</span>; <span class="hljs-comment">// åŸå§‹è¯·æ±‚é…ç½®</span>

  <span class="hljs-comment">// 1. ä¸æ˜¯ 401 é”™è¯¯ï¼Œç›´æ¥ reject</span>
  <span class="hljs-keyword">if</span> (error.<span class="hljs-property">response</span>?.<span class="hljs-property">status</span> !== <span class="hljs-number">401</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
  }

  <span class="hljs-comment">// 2. æ˜¯ 401 é”™è¯¯ï¼Œä½†å·²ç»é‡è¯•è¿‡ä¸€æ¬¡ï¼Œé¿å…æ­»å¾ªç¯</span>
  <span class="hljs-keyword">if</span> (originalRequest.<span class="hljs-property">_retry</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
  }

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// 3. æ ‡è®°å½“å‰è¯·æ±‚å·²é‡è¯•ï¼Œé¿å…é‡å¤</span>
    originalRequest.<span class="hljs-property">_retry</span> = <span class="hljs-literal">true</span>;

    <span class="hljs-comment">// 4. è‹¥æ²¡æœ‰æ­£åœ¨è¿›è¡Œçš„åˆ·æ–°è¯·æ±‚ï¼Œå‘èµ·åˆ·æ–°ï¼›å¦åˆ™ç­‰å¾…å·²æœ‰è¯·æ±‚å®Œæˆ</span>
    <span class="hljs-keyword">if</span> (!refreshPromise) {
      refreshPromise = authStore.<span class="hljs-title function_">refreshAccessToken</span>();
    }

    <span class="hljs-comment">// 5. ç­‰å¾…åˆ·æ–°å®Œæˆï¼Œè·å–æ–° Token</span>
    <span class="hljs-keyword">const</span> newAccessToken = <span class="hljs-keyword">await</span> refreshPromise;

    <span class="hljs-comment">// 6. åˆ·æ–°å®Œæˆåï¼Œé‡ç½® refreshPromise</span>
    refreshPromise = <span class="hljs-literal">null</span>;

    <span class="hljs-comment">// 7. æ›´æ–°åŸå§‹è¯·æ±‚çš„ Authorization å¤´ï¼Œé‡æ–°å‘èµ·è¯·æ±‚</span>
    originalRequest.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${newAccessToken}</span>`</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">service</span>(originalRequest);
  } <span class="hljs-keyword">catch</span> (refreshError) {
    <span class="hljs-comment">// åˆ·æ–°å¤±è´¥ï¼Œé‡ç½® refreshPromise</span>
    refreshPromise = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(refreshError);
  }
}

<span class="hljs-comment">// å“åº”æ‹¦æˆªå™¨ï¼ˆè¡¥å……å®Œæ•´ï¼‰</span>
service.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response.<span class="hljs-property">data</span>,
  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-title function_">handleResponseError</span>(error, service)
);
</code></pre>
<h3 data-id="heading-7">3. æ­¥éª¤ 3ï¼šç»„ä»¶ä¸­ä½¿ç”¨</h3>
<p>å°è£…å¥½åï¼Œç»„ä»¶ä¸­ç›´æ¥ä½¿ç”¨ request å‘èµ·è¯·æ±‚å³å¯ï¼Œæ— éœ€å…³æ³¨ Token åˆ·æ–°é€»è¾‘ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">// components/Example.vue
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/request'</span>;
<span class="hljs-keyword">import</span> { ref, onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">const</span> data = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);

<span class="hljs-title function_">onMounted</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// å‘èµ·è¯·æ±‚ï¼ŒToken è¿‡æœŸæ—¶ä¼šè‡ªåŠ¨æ— æ„Ÿåˆ·æ–°</span>
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/user-info'</span>);
    data.<span class="hljs-property">value</span> = res.<span class="hljs-property">data</span>;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥ï¼š'</span>, error);
  }
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{{ data ? data.name : 'åŠ è½½ä¸­...' }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<h2 data-id="heading-8">å››ã€React å®ç°æ–¹æ¡ˆï¼ˆHooks + Contextï¼‰</h2>
<p>React ä¸­æ¨èç”¨ã€ŒContext + Hooksã€ç®¡ç†å…¨å±€ Token çŠ¶æ€ï¼Œç»“åˆ Axios æ‹¦æˆªå™¨å®ç°æ— æ„Ÿåˆ·æ–°ï¼Œé€»è¾‘ä¸ Vue3 ç±»ä¼¼ï¼Œä½†çŠ¶æ€ç®¡ç†æ–¹å¼ä¸åŒã€‚</p>
<h3 data-id="heading-9">1. æ­¥éª¤ 1ï¼šåˆ›å»º Auth Contextï¼ˆç®¡ç† Token çŠ¶æ€ï¼‰</h3>
<p>ç”¨ Context æä¾› Token ç›¸å…³çš„çŠ¶æ€å’Œæ–¹æ³•ï¼Œä¾›å…¨å±€ç»„ä»¶ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// context/AuthContext.js</span>
<span class="hljs-keyword">import</span> { createContext, useContext, useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

<span class="hljs-comment">// åˆ›å»º Context</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">AuthContext</span> = <span class="hljs-title function_">createContext</span>();

<span class="hljs-comment">//  Provider ç»„ä»¶ï¼šæä¾› Token çŠ¶æ€å’Œæ–¹æ³•</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">AuthProvider</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">const</span> [accessToken, setAccessToken] = <span class="hljs-title function_">useState</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'accessToken'</span>) || <span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> [refreshToken, setRefreshToken] = <span class="hljs-title function_">useState</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'refreshToken'</span>) || <span class="hljs-string">''</span>);

  <span class="hljs-comment">// æ›´æ–° Token</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">updateTokens</span> = (<span class="hljs-params">newAccessToken, newRefreshToken</span>) =&gt; {
    <span class="hljs-title function_">setAccessToken</span>(newAccessToken);
    <span class="hljs-title function_">setRefreshToken</span>(newRefreshToken);
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'accessToken'</span>, newAccessToken);
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'refreshToken'</span>, newRefreshToken); <span class="hljs-comment">// æ¼”ç¤ºç”¨ï¼Œç”Ÿäº§ç¯å¢ƒç”¨ HttpOnly Cookie</span>
  };

  <span class="hljs-comment">// åˆ·æ–° Token</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">refreshAccessToken</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/api/refresh-token'</span>, { refreshToken });
      <span class="hljs-keyword">const</span> { <span class="hljs-attr">accessToken</span>: newAccessToken, <span class="hljs-attr">refreshToken</span>: newRefreshToken } = res.<span class="hljs-property">data</span>;
      <span class="hljs-title function_">updateTokens</span>(newAccessToken, newRefreshToken);
      <span class="hljs-keyword">return</span> newAccessToken;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// åˆ·æ–°å¤±è´¥ï¼Œæ¸…é™¤çŠ¶æ€å¹¶è·³è½¬ç™»å½•</span>
      <span class="hljs-title function_">clearTokens</span>();
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">'/login'</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
    }
  };

  <span class="hljs-comment">// æ¸…é™¤ Token</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">clearTokens</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setAccessToken</span>(<span class="hljs-string">''</span>);
    <span class="hljs-title function_">setRefreshToken</span>(<span class="hljs-string">''</span>);
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'accessToken'</span>);
    <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'refreshToken'</span>);
  };

  <span class="hljs-comment">// æä¾›ç»™å­ç»„ä»¶çš„å†…å®¹</span>
  <span class="hljs-keyword">const</span> value = {
    accessToken,
    refreshToken,
    updateTokens,
    refreshAccessToken,
    clearTokens
  };

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AuthContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">AuthContext.Provider</span>&gt;</span></span>;
}

<span class="hljs-comment">// è‡ªå®šä¹‰ Hookï¼šæ–¹ä¾¿ç»„ä»¶è·å– Auth çŠ¶æ€</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useAuth</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> context = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">AuthContext</span>);
  <span class="hljs-keyword">if</span> (!context) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'useAuth must be used within an AuthProvider'</span>);
  }
  <span class="hljs-keyword">return</span> context;
}
</code></pre>
<h3 data-id="heading-10">2. æ­¥éª¤ 2ï¼šåœ¨å…¥å£æ–‡ä»¶ä¸­åŒ…è£¹ AuthProvider</h3>
<p>ç¡®ä¿å…¨å±€ç»„ä»¶éƒ½èƒ½è®¿é—®åˆ° Auth Contextï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// index.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom/client'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AuthProvider</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./context/AuthContext'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App'</span>;

<span class="hljs-keyword">const</span> root = <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'root'</span>));
root.<span class="hljs-title function_">render</span>(
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AuthProvider</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">AuthProvider</span>&gt;</span></span>
);
</code></pre>
<h3 data-id="heading-11">3. æ­¥éª¤ 3ï¼šå®Œå–„ Axios å“åº”æ‹¦æˆªå™¨</h3>
<p>é€»è¾‘ä¸ Vue3 ä¸€è‡´ï¼Œæ ¸å¿ƒæ˜¯é¿å…é‡å¤åˆ·æ–°ï¼Œé€šè¿‡ useAuth Hook è·å–åˆ·æ–° Token æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// utils/request.jsï¼ˆReact ç‰ˆæœ¬è¡¥å……ï¼‰</span>
<span class="hljs-keyword">import</span> { useAuth } <span class="hljs-keyword">from</span> <span class="hljs-string">'../context/AuthContext'</span>;

<span class="hljs-comment">// æ³¨æ„ï¼šReact ä¸­ä¸èƒ½åœ¨ Axios æ‹¦æˆªå™¨ä¸­ç›´æ¥ä½¿ç”¨ useAuthï¼ˆHook åªèƒ½åœ¨ç»„ä»¶/è‡ªå®šä¹‰ Hook ä¸­ä½¿ç”¨ï¼‰</span>
<span class="hljs-comment">// è§£å†³æ–¹æ¡ˆï¼šç”¨ä¸€ä¸ªå‡½æ•°å°è£…ï¼Œåœ¨ç»„ä»¶åˆå§‹åŒ–æ—¶è°ƒç”¨ï¼Œæ³¨å…¥ auth å®ä¾‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">initRequestInterceptors</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { refreshAccessToken } = <span class="hljs-title function_">useAuth</span>();
  <span class="hljs-keyword">let</span> refreshPromise = <span class="hljs-literal">null</span>;

  <span class="hljs-comment">// å“åº”é”™è¯¯å¤„ç†å‡½æ•°</span>
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleResponseError</span>(<span class="hljs-params">error, service</span>) {
    <span class="hljs-keyword">const</span> originalRequest = error.<span class="hljs-property">config</span>;

    <span class="hljs-comment">// 1. é 401 é”™è¯¯ï¼Œç›´æ¥ reject</span>
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">response</span>?.<span class="hljs-property">status</span> !== <span class="hljs-number">401</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
    }

    <span class="hljs-comment">// 2. å·²é‡è¯•è¿‡ï¼Œé¿å…æ­»å¾ªç¯</span>
    <span class="hljs-keyword">if</span> (originalRequest.<span class="hljs-property">_retry</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
    }

    <span class="hljs-keyword">try</span> {
      originalRequest.<span class="hljs-property">_retry</span> = <span class="hljs-literal">true</span>;

      <span class="hljs-comment">// 3. é¿å…é‡å¤åˆ·æ–°</span>
      <span class="hljs-keyword">if</span> (!refreshPromise) {
        refreshPromise = <span class="hljs-title function_">refreshAccessToken</span>();
      }

      <span class="hljs-comment">// 4. ç­‰å¾…æ–° Token</span>
      <span class="hljs-keyword">const</span> newAccessToken = <span class="hljs-keyword">await</span> refreshPromise;
      refreshPromise = <span class="hljs-literal">null</span>;

      <span class="hljs-comment">// 5. é‡è¯•åŸå§‹è¯·æ±‚</span>
      originalRequest.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${newAccessToken}</span>`</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">service</span>(originalRequest);
    } <span class="hljs-keyword">catch</span> (refreshError) {
      refreshPromise = <span class="hljs-literal">null</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(refreshError);
    }
  }

  <span class="hljs-comment">// é‡æ–°è®¾ç½®å“åº”æ‹¦æˆªå™¨ï¼ˆæ³¨å…¥ auth å®ä¾‹åï¼‰</span>
  service.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
    <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response.<span class="hljs-property">data</span>,
    <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-title function_">handleResponseError</span>(error, service)
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> service;
</code></pre>
<h3 data-id="heading-12">4. æ­¥éª¤ 4ï¼šåœ¨ç»„ä»¶ä¸­åˆå§‹åŒ–æ‹¦æˆªå™¨å¹¶ä½¿ç”¨</h3>
<p>åœ¨æ ¹ç»„ä»¶ï¼ˆå¦‚ App.jsï¼‰ä¸­åˆå§‹åŒ–æ‹¦æˆªå™¨ï¼Œç¡®ä¿ useAuth èƒ½æ­£å¸¸ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// App.js</span>
<span class="hljs-keyword">import</span> { useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { initRequestInterceptors } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils/request'</span>;
<span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils/request'</span>;
<span class="hljs-keyword">import</span> { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [userInfo, setUserInfo] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// åˆå§‹åŒ– Axios æ‹¦æˆªå™¨ï¼ˆæ³¨å…¥ Auth ä¸Šä¸‹æ–‡ï¼‰</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">initRequestInterceptors</span>();
  }, []);

  <span class="hljs-comment">// å‘èµ·è¯·æ±‚ï¼ˆToken è¿‡æœŸè‡ªåŠ¨åˆ·æ–°ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchUserInfo</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/user-info'</span>);
      <span class="hljs-title function_">setUserInfo</span>(res.<span class="hljs-property">data</span>);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥ï¼š'</span>, error);
    }
  };

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">fetchUserInfo</span>();
  }, []);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App"</span>&gt;</span>
      {userInfo ? <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ¬¢è¿ï¼Œ{userInfo.name}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span> : <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<h2 data-id="heading-13">äº”ã€å…³é”®ä¼˜åŒ–ä¸å®‰å…¨æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-14">1. é¿å…é‡å¤åˆ·æ–°çš„æ ¸å¿ƒé€»è¾‘</h3>
<p>ç”¨ã€ŒrefreshPromiseã€å˜é‡å­˜å‚¨æ­£åœ¨è¿›è¡Œçš„åˆ·æ–° Token è¯·æ±‚ï¼Œå½“å¤šä¸ªè¯·æ±‚åŒæ—¶å¤±è´¥æ—¶ï¼Œéƒ½ç­‰å¾…åŒä¸€ä¸ª refreshPromise å®Œæˆï¼Œé¿å…å‘èµ·å¤šä¸ªåˆ·æ–°è¯·æ±‚ï¼Œè¿™æ˜¯æ— æ„Ÿåˆ·æ–°çš„æ ¸å¿ƒä¼˜åŒ–ç‚¹ã€‚</p>
<h3 data-id="heading-15">2. å®‰å…¨ä¼˜åŒ–ï¼šRefresh Token çš„å­˜å‚¨æ–¹å¼</h3>
<ul>
<li>
<p>ä¸å»ºè®®å°† Refresh Token å­˜å‚¨åœ¨ localStorage/sessionStorage ä¸­ï¼Œå®¹æ˜“é­å— XSS æ”»å‡»ï¼›</p>
</li>
<li>
<p>æ¨èå­˜å‚¨åœ¨ã€ŒHttpOnly Cookieã€ä¸­ï¼Œç”±æµè§ˆå™¨è‡ªåŠ¨æºå¸¦ï¼Œæ— æ³•é€šè¿‡ JavaScript è®¿é—®ï¼Œæœ‰æ•ˆé˜²å¾¡ XSS æ”»å‡»ï¼›</p>
</li>
<li>
<p>è‹¥åç«¯æ”¯æŒï¼Œå¯ç»™ Refresh Token å¢åŠ ã€Œè®¾å¤‡ç»‘å®šã€ã€ŒIP é™åˆ¶ã€ç­‰é¢å¤–å®‰å…¨æªæ–½ã€‚</p>
</li>
</ul>
<h3 data-id="heading-16">3. ä¸»åŠ¨åˆ·æ–°ï¼šæå‰é¢„é˜² Token è¿‡æœŸ</h3>
<p>è¢«åŠ¨åˆ·æ–°ï¼ˆç­‰å¾… 401 åå†åˆ·æ–°ï¼‰å¯èƒ½å­˜åœ¨å»¶è¿Ÿï¼Œå¯å¢åŠ ã€Œä¸»åŠ¨åˆ·æ–°ã€é€»è¾‘ï¼š</p>
<ul>
<li>è®°å½• Access Token çš„ç”Ÿæˆæ—¶é—´å’Œè¿‡æœŸæ—¶é—´ï¼›</li>
<li>åœ¨è¯·æ±‚æ‹¦æˆªå™¨ä¸­åˆ¤æ–­ Token å‰©ä½™æœ‰æ•ˆæœŸï¼ˆå¦‚å°äº 5 åˆ†é’Ÿï¼‰ï¼Œä¸»åŠ¨å‘èµ·åˆ·æ–°è¯·æ±‚ï¼›</li>
<li>é¿å…åœ¨ç”¨æˆ·æ— æ“ä½œæ—¶åˆ·æ–°ï¼Œå¯ç»“åˆã€Œç”¨æˆ·æ´»åŠ¨ç›‘å¬ã€ï¼ˆå¦‚ clickã€keydown äº‹ä»¶ï¼‰è§¦å‘ä¸»åŠ¨åˆ·æ–°ã€‚</li>
</ul>
<h3 data-id="heading-17">4. å¼‚å¸¸å¤„ç†ï¼šåˆ·æ–°å¤±è´¥çš„å…œåº•æ–¹æ¡ˆ</h3>
<p>å½“ Refresh Token è¿‡æœŸæˆ–æ— æ•ˆæ—¶ï¼Œå¿…é¡»è·³è½¬è‡³ç™»å½•é¡µï¼Œå¹¶æ¸…é™¤æœ¬åœ°æ®‹ç•™çš„ Token çŠ¶æ€ï¼Œé¿å…æ­»å¾ªç¯è¯·æ±‚ã€‚åŒæ—¶ï¼Œå¯ç»™ç”¨æˆ·æç¤ºã€Œç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•ã€ï¼Œæå‡ä½“éªŒã€‚</p>
<h2 data-id="heading-18">å…­ã€Vue3 ä¸ React å®ç°æ–¹æ¡ˆå¯¹æ¯”</h2>






























<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>Vue3 å®ç°</th><th>React å®ç°</th></tr></thead><tbody><tr><td>çŠ¶æ€ç®¡ç†</td><td>Piniaï¼ˆå®˜æ–¹æ¨èï¼ŒAPI ç®€æ´ï¼Œæ”¯æŒ TypeScriptï¼‰</td><td>Context + Hooksï¼ˆåŸç”Ÿæ”¯æŒï¼Œæ— éœ€é¢å¤–ä¾èµ–ï¼‰</td></tr><tr><td>æ‹¦æˆªå™¨åˆå§‹åŒ–</td><td>å¯ç›´æ¥åœ¨ Pinia ä¸­è·å–çŠ¶æ€ï¼Œæ— éœ€é¢å¤–æ³¨å…¥</td><td>éœ€åœ¨ç»„ä»¶ä¸­åˆå§‹åŒ–æ‹¦æˆªå™¨ï¼Œæ³¨å…¥ Auth Context</td></tr><tr><td>æ ¸å¿ƒé€»è¾‘</td><td>åŸºäº Composition APIï¼Œé€»è¾‘å°è£…æ›´çµæ´»</td><td>åŸºäºè‡ªå®šä¹‰ Hooksï¼Œç¬¦åˆå‡½æ•°å¼ç¼–ç¨‹æ€æƒ³</td></tr><tr><td>å­¦ä¹ æˆæœ¬</td><td>Pinia å­¦ä¹ æˆæœ¬ä½ï¼Œé€‚åˆ Vue ç”Ÿæ€å¼€å‘è€…</td><td>Context + Hooks éœ€ç†è§£ React çŠ¶æ€ä¼ é€’æœºåˆ¶</td></tr></tbody></table>
<p>æœ¬è´¨å·®å¼‚ï¼šçŠ¶æ€ç®¡ç†æ–¹å¼ä¸åŒï¼Œä½†æ— æ„Ÿåˆ·æ–°çš„æ ¸å¿ƒé€»è¾‘ï¼ˆåŒ Tokenã€æ‹¦æˆªå™¨ã€é¿å…é‡å¤åˆ·æ–°ï¼‰å®Œå…¨ä¸€è‡´ï¼Œå¼€å‘è€…å¯æ ¹æ®è‡ªèº«æŠ€æœ¯æ ˆé€‰æ‹©å¯¹åº”æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-19">ä¸ƒã€æ€»ç»“</h2>
<p>å‰ç«¯ Token æ— æ„Ÿåˆ·æ–°çš„æ ¸å¿ƒæ˜¯ã€ŒåŒ Token æœºåˆ¶ + Axios æ‹¦æˆªå™¨ã€ï¼Œå…³é”®åœ¨äºè§£å†³ã€Œé‡å¤åˆ·æ–°ã€å’Œã€Œå®‰å…¨å­˜å‚¨ã€é—®é¢˜ã€‚Vue3 å’Œ React çš„å®ç°æ–¹æ¡ˆè™½åœ¨çŠ¶æ€ç®¡ç†ä¸Šæœ‰å·®å¼‚ï¼Œä½†æ ¸å¿ƒé€»è¾‘ç›¸é€šï¼š</p>
<ol>
<li>ç”¨è¯·æ±‚æ‹¦æˆªå™¨ç»Ÿä¸€æ·»åŠ  Access Tokenï¼›</li>
<li>ç”¨å“åº”æ‹¦æˆªå™¨æ•è· 401 é”™è¯¯ï¼Œè§¦å‘åˆ·æ–°é€»è¾‘ï¼›</li>
<li>é€šè¿‡ä¸€ä¸ªå…¨å±€å˜é‡æ§åˆ¶åˆ·æ–°è¯·æ±‚çš„å”¯ä¸€æ€§ï¼Œé¿å…é‡å¤è¯·æ±‚ï¼›</li>
<li>åˆ·æ–°æˆåŠŸåé‡è¯•åŸå§‹è¯·æ±‚ï¼Œå¤±è´¥åˆ™è·³è½¬ç™»å½•ã€‚</li>
</ol>
<p>å®é™…é¡¹ç›®ä¸­ï¼Œéœ€ç»“åˆåç«¯æ¥å£è®¾è®¡ï¼ˆå¦‚åˆ·æ–° Token çš„æ¥å£åœ°å€ã€å‚æ•°æ ¼å¼ï¼‰å’Œå®‰å…¨éœ€æ±‚ï¼ˆå¦‚ Refresh Token å­˜å‚¨æ–¹å¼ï¼‰è°ƒæ•´å®ç°ç»†èŠ‚ã€‚åˆç†çš„æ— æ„Ÿåˆ·æ–°æ–¹æ¡ˆèƒ½å¤§å¹…æå‡ç”¨æˆ·ä½“éªŒï¼Œé¿å…å›  Token è¿‡æœŸå¯¼è‡´çš„æ“ä½œä¸­æ–­ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kubernetes ä¸­ "Deployment does not have minimum availability" é”™è¯¯è§£æä¸è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7589509638338854938</link>    <guid>https://juejin.cn/post/7589509638338854938</guid>    <pubDate>2025-12-30T05:54:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589509638338854938" data-draft-id="7589231401657712650" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kubernetes ä¸­ &quot;Deployment does not have minimum availability&quot; é”™è¯¯è§£æä¸è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-30T05:54:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘è€…é˜¿è±ª"/> <meta itemprop="url" content="https://juejin.cn/user/4073055974333608"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kubernetes ä¸­ "Deployment does not have minimum availability" é”™è¯¯è§£æä¸è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4073055974333608/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘è€…é˜¿è±ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T05:54:28.000Z" title="Tue Dec 30 2025 05:54:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Kubernetes ä¸­ "Deployment does not have minimum availability" é”™è¯¯è§£æä¸è§£å†³æ–¹æ¡ˆ</h2>
<p>åœ¨ç°ä»£äº‘åŸç”Ÿåº”ç”¨å¼€å‘ä¸­ï¼ŒKubernetes å·²æˆä¸ºå¹¿æ³›åº”ç”¨çš„å®¹å™¨ç¼–æ’å¹³å°ã€‚å®ƒä¸ºæˆ‘ä»¬æä¾›äº†è‡ªåŠ¨åŒ–çš„åº”ç”¨éƒ¨ç½²ã€æ‰©å±•å’Œç®¡ç†åŠŸèƒ½ï¼Œæå¤§åœ°ç®€åŒ–äº†åˆ†å¸ƒå¼ç³»ç»Ÿçš„æ„å»ºã€‚ç„¶è€Œï¼Œè™½ç„¶ Kubernetes æä¾›äº†å¼ºå¤§çš„åŠŸèƒ½å’Œçµæ´»æ€§ï¼Œä½†åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œè¿˜æ˜¯ä¼šé‡åˆ°ä¸€äº›å¸¸è§çš„é”™è¯¯å’Œé—®é¢˜ï¼Œå½±å“åº”ç”¨çš„æ­£å¸¸è¿è¡Œå’Œå¯é æ€§ã€‚</p>
<p>å…¶ä¸­ï¼Œâ€œ<strong>Deployment does not have minimum availability</strong>â€ è¿™ä¸ªé”™è¯¯å¸¸è§äº Kubernetes ç¯å¢ƒä¸‹ï¼Œå°¤å…¶æ˜¯åœ¨æˆ‘ä»¬è¿›è¡Œåº”ç”¨éƒ¨ç½²æ—¶ã€‚å½“é‡åˆ°è¿™ä¸ªé”™è¯¯æ—¶ï¼Œè¡¨ç¤º Kubernetes æ— æ³•ç¡®ä¿åœ¨æŒ‡å®šçš„æ—¶é—´å†…æœ‰è¶³å¤Ÿçš„ Pod å‰¯æœ¬å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œæ— æ³•æ»¡è¶³æ‰€éœ€çš„æœ€å°å¯ç”¨å‰¯æœ¬æ•°ã€‚è¿™ä¸€é—®é¢˜é€šå¸¸æºäºå¤šç§å› ç´ ï¼Œå¦‚èµ„æºä¸è¶³ã€é…ç½®é”™è¯¯ã€èŠ‚ç‚¹æ•…éšœç­‰é—®é¢˜ã€‚</p>
<p>æœ¬æ–‡å°†è¯¦ç»†æ¢è®¨ Kubernetes ä¸­ "Deployment does not have minimum availability" é”™è¯¯çš„åŸå› ï¼Œåˆ†æå¦‚ä½•é€šè¿‡æ’æŸ¥æ—¥å¿—ã€æ£€æŸ¥é…ç½®å’Œä¼˜åŒ–èµ„æºæ¥è§£å†³è¯¥é—®é¢˜ï¼Œç¡®ä¿éƒ¨ç½²çš„åº”ç”¨å…·æœ‰è¶³å¤Ÿçš„å¯ç”¨æ€§ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€Kubernetes Deployment ä»‹ç»</h3>
<p>åœ¨ Kubernetes ä¸­ï¼Œ<code>Deployment</code> æ˜¯ä¸€ç§å£°æ˜å¼çš„ API èµ„æºï¼Œå®ƒå…è®¸å¼€å‘è€…æè¿°åº”ç”¨çš„æœŸæœ›çŠ¶æ€ï¼Œå¹¶ä¸” Kubernetes ä¼šç¡®ä¿è¿™ä¸ªæœŸæœ›çŠ¶æ€å¾—ä»¥å®ç°ã€‚ä¸€ä¸ª <code>Deployment</code> å¯ä»¥ç®¡ç†å¤šä¸ªå‰¯æœ¬çš„ Podï¼Œæä¾›é«˜å¯ç”¨æ€§ã€è´Ÿè½½å‡è¡¡å’Œæ»šåŠ¨æ›´æ–°ç­‰åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-2">1.1 Deployment çš„æ ¸å¿ƒåŠŸèƒ½</h4>
<ul>
<li><strong>è‡ªåŠ¨åŒ–ç®¡ç† Pod å‰¯æœ¬</strong>ï¼šKubernetes ä¼šæ ¹æ® <code>Deployment</code> å®šä¹‰çš„å‰¯æœ¬æ•°ï¼Œç¡®ä¿åœ¨ä»»ä½•æ—¶é—´ç‚¹éƒ½è¿è¡Œç€æ­£ç¡®æ•°é‡çš„ Podã€‚</li>
<li><strong>æ»šåŠ¨æ›´æ–°</strong>ï¼šæ”¯æŒé€æ­¥æ›´æ–°åº”ç”¨ï¼Œç¡®ä¿åœ¨æ›´æ–°è¿‡ç¨‹ä¸­å§‹ç»ˆæœ‰å¯ç”¨çš„å‰¯æœ¬ã€‚</li>
<li><strong>å›æ»šåŠŸèƒ½</strong>ï¼šæ”¯æŒå°†åº”ç”¨å›æ»šåˆ°å…ˆå‰çš„ç¨³å®šç‰ˆæœ¬ã€‚</li>
<li><strong>è‡ªæˆ‘ä¿®å¤</strong>ï¼šå¦‚æœæŸä¸ª Pod å®•æœºæˆ–å‡ºç°æ•…éšœï¼ŒDeployment ä¼šè‡ªåŠ¨é‡æ–°è°ƒåº¦æ–°çš„ Pod æ¥æ›¿ä»£å®ƒï¼Œä¿æŒå¯ç”¨æ€§ã€‚</li>
</ul>
<h4 data-id="heading-3">1.2 Deployment çš„æœ€å°å¯ç”¨å‰¯æœ¬æ•°</h4>
<p>åœ¨ Kubernetes ä¸­ï¼Œæ¯ä¸ª <code>Deployment</code> éƒ½æœ‰ä¸€ä¸ª <code>replicas</code> å­—æ®µï¼Œç”¨æ¥æŒ‡å®šå¸Œæœ›éƒ¨ç½²çš„ Pod å‰¯æœ¬æ•°ã€‚<code>Deployment</code> æ§åˆ¶å™¨ä¼šæ ¹æ®å‰¯æœ¬æ•°æ¥è°ƒåº¦ Podï¼Œå¹¶ç¡®ä¿åœ¨ä»»ä½•æ—¶å€™éƒ½æœ‰è¶³å¤Ÿæ•°é‡çš„å‰¯æœ¬åœ¨è¿è¡Œã€‚</p>
<p>ç„¶è€Œï¼Œæœ‰æ—¶å› ä¸ºå¤šç§åŸå› ï¼ŒPod æ— æ³•æ­£å¸¸å¯åŠ¨æˆ–ä¿æŒè¿è¡ŒçŠ¶æ€ï¼Œå¯¼è‡´å®é™…è¿è¡Œçš„ Pod æ•°é‡ä½äº <code>Deployment</code> çš„å‰¯æœ¬æ•°ã€‚è¿™æ—¶ï¼ŒKubernetes ä¼šæŠ›å‡º <strong>"Deployment does not have minimum availability"</strong> é”™è¯¯ï¼Œæç¤ºåº”ç”¨çš„æœ€å°å¯ç”¨å‰¯æœ¬æ•°æ²¡æœ‰æ»¡è¶³æœŸæœ›å€¼ã€‚</p>
<h3 data-id="heading-4">äºŒã€"Deployment does not have minimum availability" é”™è¯¯è§£æ</h3>
<h4 data-id="heading-5">2.1 é”™è¯¯ä¿¡æ¯çš„å«ä¹‰</h4>
<p>å½“ä½ çœ‹åˆ°é”™è¯¯ä¿¡æ¯ <code>Deployment does not have minimum availability</code> æ—¶ï¼Œæ„å‘³ç€ <code>Deployment</code> ä¸­å®šä¹‰çš„æœŸæœ›å‰¯æœ¬æ•°ï¼ˆ<code>replicas</code>ï¼‰æœªèƒ½è¾¾åˆ°é¢„å®šçš„å¯ç”¨å‰¯æœ¬æ•°ã€‚è¿™é€šå¸¸å‘ç”Ÿåœ¨ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p>
<ul>
<li><strong>Pod æ— æ³•å¯åŠ¨</strong>ï¼šç”±äºé…ç½®é”™è¯¯ã€èµ„æºä¸è¶³ã€å®¹å™¨é•œåƒé—®é¢˜ç­‰ï¼Œå¯¼è‡´ Pod æ— æ³•æ­£å¸¸å¯åŠ¨ã€‚</li>
<li><strong>Pod å¤„äºéè¿è¡ŒçŠ¶æ€</strong>ï¼šæœ‰äº› Pod å¯èƒ½å› ä¸ºåº”ç”¨å´©æºƒæˆ–å…¶ä»–é”™è¯¯è€Œå¤„äº <code>CrashLoopBackOff</code>ã€<code>Error</code> æˆ– <code>Pending</code> çŠ¶æ€ã€‚</li>
<li><strong>èµ„æºä¸è¶³</strong>ï¼šé›†ç¾¤ä¸­çš„èŠ‚ç‚¹èµ„æºä¸è¶³ï¼ˆå¦‚ CPUã€å†…å­˜ç­‰ï¼‰å¯¼è‡´ Pod æ— æ³•è°ƒåº¦å’Œè¿è¡Œã€‚</li>
<li><strong>è°ƒåº¦å¤±è´¥</strong>ï¼šç”±äºèŠ‚ç‚¹æ•…éšœã€ç½‘ç»œé—®é¢˜æˆ–èµ„æºé™åˆ¶ï¼ŒKubernetes æ— æ³•å°† Pod è°ƒåº¦åˆ°å¯ç”¨çš„èŠ‚ç‚¹ä¸Šã€‚</li>
</ul>
<h4 data-id="heading-6">2.2 é”™è¯¯å‘ç”Ÿçš„å¸¸è§åŸå› </h4>
<h5 data-id="heading-7">2.2.1 Pod é…ç½®é”™è¯¯</h5>
<p>Pod é…ç½®æ–‡ä»¶ï¼ˆå¦‚ <code>deployment.yaml</code>ï¼‰ä¸­å¯èƒ½å­˜åœ¨é”™è¯¯ï¼Œå¯¼è‡´æŸäº› Pod æ— æ³•æ­£ç¡®å¯åŠ¨ã€‚ä¾‹å¦‚ï¼Œé…ç½®çš„ç¯å¢ƒå˜é‡é”™è¯¯ã€æŒ‚è½½å·å¤±è´¥æˆ–ç½‘ç»œè¿æ¥é—®é¢˜ç­‰ï¼Œéƒ½ä¼šä½¿ Pod å¯åŠ¨å¤±è´¥ï¼Œè¿›è€Œå¯¼è‡´å‰¯æœ¬æ•°æ— æ³•è¾¾åˆ°é¢„æœŸã€‚</p>
<h5 data-id="heading-8">2.2.2 èµ„æºé™åˆ¶ä¸è¶³</h5>
<p>å¦‚æœ Kubernetes é›†ç¾¤çš„èµ„æºï¼ˆå¦‚èŠ‚ç‚¹ CPUã€å†…å­˜ç­‰ï¼‰ä¸è¶³ï¼Œæˆ–è€… <code>Deployment</code> å®šä¹‰çš„èµ„æºè¯·æ±‚è¶…å‡ºäº†èŠ‚ç‚¹çš„å¯ç”¨èµ„æºï¼ŒKubernetes å°±æ— æ³•è°ƒåº¦ Pod åˆ°èŠ‚ç‚¹ä¸Šï¼Œå¯¼è‡´ Pod æ— æ³•æ­£å¸¸è¿è¡Œï¼Œä»è€Œå¯¼è‡´æœ€å°å‰¯æœ¬æ•°æ— æ³•è¾¾åˆ°ã€‚</p>
<h5 data-id="heading-9">2.2.3 ä¸Šæ¸¸æœåŠ¡ä¸å¯ç”¨</h5>
<p>å¦‚æœ Pod å¯åŠ¨æ—¶éœ€è¦ä¾èµ–å…¶ä»–æœåŠ¡ï¼ˆå¦‚æ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ï¼‰ï¼Œè€Œè¿™äº›æœåŠ¡ä¸å¯ç”¨æˆ–æ— æ³•è®¿é—®ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´ Pod æ— æ³•å¯åŠ¨ï¼Œæœ€ç»ˆæ— æ³•æ»¡è¶³æœ€å°å¯ç”¨å‰¯æœ¬æ•°çš„è¦æ±‚ã€‚</p>
<h5 data-id="heading-10">2.2.4 è°ƒåº¦å¤±è´¥</h5>
<p>Pod çš„è°ƒåº¦å¤±è´¥é€šå¸¸å‘ç”Ÿåœ¨èŠ‚ç‚¹èµ„æºä¸è¶³ã€èŠ‚ç‚¹ä¸å¯ç”¨æˆ–ç½‘ç»œé…ç½®é—®é¢˜ç­‰æƒ…å†µä¸‹ã€‚Kubernetes ä¼šå°† Pod è°ƒåº¦åˆ°åˆé€‚çš„èŠ‚ç‚¹ä¸Šï¼Œå¦‚æœè°ƒåº¦å¤±è´¥ï¼ŒPod å°±æ— æ³•è¿è¡Œï¼Œå¯¼è‡´æœ€å°å‰¯æœ¬æ•°æ— æ³•æ»¡è¶³ã€‚</p>
<h4 data-id="heading-11">2.3 é”™è¯¯çš„å…·ä½“è¡¨ç°</h4>
<ul>
<li><code>kubectl get pods</code> å‘½ä»¤æŸ¥çœ‹æ—¶ï¼ŒPod çš„çŠ¶æ€å¯èƒ½ä¼šæ˜¾ç¤ºä¸º <code>CrashLoopBackOff</code>ã€<code>Pending</code> æˆ– <code>Error</code>ï¼Œè¯´æ˜æŸäº› Pod æœªèƒ½æˆåŠŸå¯åŠ¨ã€‚</li>
<li><code>kubectl describe deployment</code> å‘½ä»¤è¾“å‡ºä¸­ï¼Œ<code>Replicas</code> å­—æ®µæ˜¾ç¤ºçš„å‰¯æœ¬æ•°å¯èƒ½ä½äºæœŸæœ›çš„å‰¯æœ¬æ•°ï¼Œå¯¼è‡´å¯ç”¨å‰¯æœ¬æ•°ä¸è¶³ã€‚</li>
<li><code>kubectl describe pod &lt;pod-name&gt;</code> è¾“å‡ºä¸­çš„äº‹ä»¶ï¼ˆeventsï¼‰éƒ¨åˆ†ä¼šæ˜¾ç¤º Pod å¯åŠ¨å¤±è´¥çš„è¯¦ç»†åŸå› ï¼Œå¦‚ <code>insufficient memory</code>ã€<code>image pull failed</code> ç­‰ã€‚</li>
</ul>
<h3 data-id="heading-12">ä¸‰ã€æ’æŸ¥å’Œè§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-13">3.1 æŸ¥çœ‹ Deployment çŠ¶æ€</h4>
<p>é¦–å…ˆï¼Œä½¿ç”¨ <code>kubectl describe deployment</code> å‘½ä»¤æŸ¥çœ‹ <code>Deployment</code> çš„è¯¦ç»†ä¿¡æ¯ï¼Œæ£€æŸ¥å‰¯æœ¬æ•°ã€Pod çŠ¶æ€ã€äº‹ä»¶ä¿¡æ¯ç­‰ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">kubectl describe deployment &lt;deployment-name&gt; -n &lt;namespace&gt;
</code></pre>
<p>ä» <code>describe</code> è¾“å‡ºä¸­ï¼Œå¯ä»¥æŸ¥çœ‹åˆ° <code>Replicas</code>ã€<code>Available Replicas</code> å’Œ <code>Unavailable Replicas</code> ç­‰å­—æ®µï¼Œå¸®åŠ©ä½ äº†è§£ Pod æ˜¯å¦è¾¾åˆ°äº†é¢„æœŸçš„å¯ç”¨å‰¯æœ¬æ•°ã€‚</p>
<h4 data-id="heading-14">3.2 æŸ¥çœ‹ Pod çŠ¶æ€å’Œäº‹ä»¶</h4>
<p>æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ <code>kubectl get pods</code> æŸ¥çœ‹ Pod çš„çŠ¶æ€ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ Pod å¤„äº <code>CrashLoopBackOff</code>ã€<code>Pending</code> æˆ– <code>Error</code> çŠ¶æ€ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">kubectl get pods -n &lt;namespace&gt;
</code></pre>
<p>å¦‚æœæŸäº› Pod çš„çŠ¶æ€ä¸æ­£å¸¸ï¼Œå¯ä»¥ä½¿ç”¨ <code>kubectl describe pod &lt;pod-name&gt;</code> æŸ¥çœ‹è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œäº‹ä»¶æ—¥å¿—ï¼Œåˆ†æé—®é¢˜æ‰€åœ¨ã€‚</p>
<h4 data-id="heading-15">3.3 èµ„æºä½¿ç”¨æƒ…å†µ</h4>
<p>æ£€æŸ¥é›†ç¾¤çš„èµ„æºä½¿ç”¨æƒ…å†µï¼Œç¡®ä¿èŠ‚ç‚¹æœ‰è¶³å¤Ÿçš„ CPUã€å†…å­˜ç­‰èµ„æºæ¥è¿è¡Œ Podã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹èŠ‚ç‚¹çš„èµ„æºä½¿ç”¨æƒ…å†µï¼š</p>
<pre><code class="hljs language-bash" lang="bash">kubectl top nodes
</code></pre>
<p>å¦‚æœèŠ‚ç‚¹èµ„æºä¸è¶³ï¼Œå¯ä»¥å°è¯•å¢åŠ é›†ç¾¤çš„èŠ‚ç‚¹ï¼Œæˆ–è€…è°ƒæ•´ Pod çš„èµ„æºè¯·æ±‚ï¼ˆ<code>requests</code>ï¼‰å’Œé™åˆ¶ï¼ˆ<code>limits</code>ï¼‰å€¼ï¼Œä»¥ç¡®ä¿ Pod å¯ä»¥æ­£å¸¸è°ƒåº¦åˆ°èŠ‚ç‚¹ä¸Šã€‚</p>
<h4 data-id="heading-16">3.4 ä¿®å¤ Pod å¯åŠ¨å¤±è´¥çš„é—®é¢˜</h4>
<p>å¦‚æœ Pod å› é…ç½®é”™è¯¯ï¼ˆå¦‚ç¯å¢ƒå˜é‡ã€æŒ‚è½½å·ã€ç½‘ç»œç­‰é—®é¢˜ï¼‰æ— æ³•å¯åŠ¨ï¼Œå¯ä»¥é€šè¿‡æ£€æŸ¥ Pod çš„æ—¥å¿—æ¥æ‰¾åˆ°å…·ä½“çš„é”™è¯¯ä¿¡æ¯ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ Pod æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">kubectl logs &lt;pod-name&gt; -n &lt;namespace&gt;
</code></pre>
<p>æ ¹æ®æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯è¿›è¡Œä¿®å¤ï¼Œç¡®ä¿æ‰€æœ‰ Pod éƒ½èƒ½æˆåŠŸå¯åŠ¨ã€‚</p>
<h4 data-id="heading-17">3.5 è°ƒæ•´å‰¯æœ¬æ•°å’Œèµ„æºé…ç½®</h4>
<p>å¦‚æœèµ„æºä¸è¶³ä»¥å¯åŠ¨æ‰€éœ€çš„ Podï¼Œå¯ä»¥é€šè¿‡å‡å°‘å‰¯æœ¬æ•°æˆ–è€…è°ƒæ•´èµ„æºè¯·æ±‚æ¥è§£å†³ã€‚ä¾‹å¦‚ï¼Œå‡å°‘ <code>replicas</code> æ•°é‡ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spec:</span>
  <span class="hljs-attr">replicas:</span> <span class="hljs-number">2</span>
</code></pre>
<p>åŒæ—¶ï¼Œæ£€æŸ¥æ¯ä¸ª Pod çš„èµ„æºè¯·æ±‚å’Œé™åˆ¶æ˜¯å¦åˆç†ï¼Œå¹¶é€‚å½“è°ƒæ•´ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">resources:</span>
  <span class="hljs-attr">requests:</span>
    <span class="hljs-attr">cpu:</span> <span class="hljs-string">"500m"</span>
    <span class="hljs-attr">memory:</span> <span class="hljs-string">"512Mi"</span>
  <span class="hljs-attr">limits:</span>
    <span class="hljs-attr">cpu:</span> <span class="hljs-string">"1"</span>
    <span class="hljs-attr">memory:</span> <span class="hljs-string">"1Gi"</span>
</code></pre>
<h4 data-id="heading-18">3.6 æŸ¥çœ‹èŠ‚ç‚¹å’Œè°ƒåº¦å™¨çŠ¶æ€</h4>
<p>å¦‚æœ Pod æ— æ³•è°ƒåº¦ï¼Œå¯èƒ½æ˜¯å› ä¸ºèŠ‚ç‚¹ä¸å¯ç”¨æˆ–ç½‘ç»œé…ç½®é—®é¢˜ã€‚ä½¿ç”¨ <code>kubectl describe node &lt;node-name&gt;</code> æŸ¥çœ‹èŠ‚ç‚¹çš„çŠ¶æ€ï¼Œç¡®è®¤èŠ‚ç‚¹æ˜¯å¦æ­£å¸¸ã€‚ç¡®ä¿èŠ‚ç‚¹æ²¡æœ‰è¢«æ ‡è®°ä¸ºä¸å¯è°ƒåº¦ï¼Œå¹¶ä¸”ç½‘ç»œé…ç½®æ­£ç¡®ã€‚</p>
<h4 data-id="heading-19">3.7 é…ç½®è‡ªåŠ¨æ‰©å®¹</h4>
<p>å¦‚æœè´Ÿè½½è¿‡é«˜ï¼Œè€ƒè™‘ä½¿ç”¨ Horizontal Pod Autoscalerï¼ˆHPAï¼‰æ¥è‡ªåŠ¨æ‰©å±• <code>Deployment</code> ä¸­çš„ Pod å‰¯æœ¬æ•°é‡ã€‚ä¾‹å¦‚ï¼ŒåŸºäº CPU ä½¿ç”¨ç‡è‡ªåŠ¨æ‰©å±•å‰¯æœ¬ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">autoscaling/v2</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">HorizontalPodAutoscaler</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">&lt;deployment-name&gt;</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">&lt;namespace&gt;</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">scaleTargetRef:</span>
    <span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
    <span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">&lt;deployment-name&gt;</span>
  <span class="hljs-attr">minReplicas:</span> <span class="hljs-number">1</span>
  <span class="hljs-attr">maxReplicas:</span> <span class="hljs-number">10</span>
  <span class="hljs-attr">metrics:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">Resource</span>
      <span class="hljs-attr">resource:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">cpu</span>
        <span class="hljs-attr">target:</span>
          <span class="hljs-attr">type:</span> <span class="hljs-string">Utilization</span>
          <span class="hljs-attr">averageUtilization:</span> <span class="hljs-number">50</span>
</code></pre>
<h3 data-id="heading-20">å››ã€æ€»ç»“</h3>
<p>"Deployment does not have minimum availability" é”™è¯¯é€šå¸¸æ˜¯å› ä¸º <code>Deployment</code> ä¸­å®šä¹‰çš„ Pod å‰¯æœ¬æ•°æœªèƒ½æ»¡è¶³å¯ç”¨å‰¯</p>
<p>æœ¬æ•°è¦æ±‚ã€‚å…¶æ ¹æœ¬åŸå› å¯èƒ½åŒ…æ‹¬èµ„æºä¸è¶³ã€Pod é…ç½®é”™è¯¯ã€è°ƒåº¦å¤±è´¥ç­‰ã€‚è§£å†³æ­¤é—®é¢˜çš„æ–¹æ³•åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>æŸ¥çœ‹ Deployment å’Œ Pod çš„çŠ¶æ€</strong>ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ Pod æ— æ³•å¯åŠ¨ã€‚</li>
<li><strong>æ£€æŸ¥èµ„æºä½¿ç”¨æƒ…å†µ</strong>ï¼Œç¡®ä¿é›†ç¾¤æœ‰è¶³å¤Ÿçš„èµ„æºã€‚</li>
<li><strong>è°ƒæ•´å‰¯æœ¬æ•°å’Œèµ„æºè¯·æ±‚</strong>ï¼Œç¡®ä¿ Kubernetes èƒ½å¤Ÿåœ¨èŠ‚ç‚¹ä¸Šè°ƒåº¦è¶³å¤Ÿçš„ Podã€‚</li>
<li><strong>ä¿®å¤ Pod å¯åŠ¨å¤±è´¥çš„é…ç½®é—®é¢˜</strong>ï¼Œç¡®ä¿ Pod èƒ½å¤Ÿæ­£å¸¸å¯åŠ¨ã€‚</li>
</ol>
<p>é€šè¿‡é€æ­¥æ’æŸ¥å’Œè§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æ¢å¤ Deployment çš„æœ€å°å¯ç”¨å‰¯æœ¬æ•°ï¼Œç¡®ä¿åº”ç”¨çš„é«˜å¯ç”¨æ€§å’Œç¨³å®šæ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++é”™è¯¯å¤„ç†çš„ç°ä»£åŒ–æ–¹å¼ï¼šæ·±å…¥ç†è§£std::error_code]]></title>    <link>https://juejin.cn/post/7589176150493577270</link>    <guid>https://juejin.cn/post/7589176150493577270</guid>    <pubDate>2025-12-30T02:11:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589176150493577270" data-draft-id="7589172193151123492" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++é”™è¯¯å¤„ç†çš„ç°ä»£åŒ–æ–¹å¼ï¼šæ·±å…¥ç†è§£std::error_code"/> <meta itemprop="keywords" content="å®‰å…¨"/> <meta itemprop="datePublished" content="2025-12-30T02:11:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ·±ç›¾å®‰å…¨"/> <meta itemprop="url" content="https://juejin.cn/user/741508014680712"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++é”™è¯¯å¤„ç†çš„ç°ä»£åŒ–æ–¹å¼ï¼šæ·±å…¥ç†è§£std::error_code
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/741508014680712/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ·±ç›¾å®‰å…¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T02:11:47.000Z" title="Tue Dec 30 2025 02:11:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">C++é”™è¯¯å¤„ç†çš„ç°ä»£åŒ–æ–¹å¼ï¼šæ·±å…¥ç†è§£std::error_code</h2>
<h2 data-id="heading-1">æ¦‚è¿°</h2>
<p><code>std::error_code</code> æ˜¯ C++ æ ‡å‡†åº“ä¸­ä¸€ç§ç‹¬ç«‹äºå¼‚å¸¸çš„é”™è¯¯è¡¨ç¤ºä¸ä¼ é€’æœºåˆ¶ã€‚å®ƒä»¥å€¼ç±»å‹çš„æ–¹å¼å°è£…é”™è¯¯ä¿¡æ¯ï¼Œé€‚ç”¨äºç¦ç”¨å¼‚å¸¸ã€ç³»ç»Ÿç¼–ç¨‹æˆ–è·¨æ¨¡å—äº¤äº’çš„åœºæ™¯ã€‚é€šè¿‡ <code>std::error_code</code>ï¼Œå‡½æ•°å¯ä»¥åœ¨ä¸ä¾èµ–å¼‚å¸¸çš„å‰æä¸‹ï¼Œå°†é”™è¯¯ä¿¡æ¯æ˜ç¡®ä¸”å®‰å…¨åœ°è¿”å›ç»™è°ƒç”¨è€…ã€‚</p>
<p>åœ¨ç°ä»£ C++ ä¸­ï¼Œ<code>std::error_code</code> å·²æˆä¸ºæ ‡å‡†åº“ä¸­æ— å¼‚å¸¸æ¥å£çš„åŸºçŸ³ï¼Œå¹¶è¢«è§†ä¸ºæœªæ¥ <code>expected&lt;T, E&gt;</code> ç­‰ç»“æœç±»å‹ä¸­é»˜è®¤çš„é”™è¯¯æ‰¿è½½å½¢å¼ã€‚</p>
<h2 data-id="heading-2">std::error_code åŸºæœ¬æ„æˆ</h2>
<p>åœ¨ C++ ä¸­ï¼Œé”™è¯¯å¤„ç†é€šå¸¸æœ‰ä¸‰ç§é€”å¾„ï¼šé€šè¿‡è¿”å›å€¼æ ‡è¯†é”™è¯¯ã€é€šè¿‡å¼‚å¸¸ä¼ æ’­é”™è¯¯ã€æˆ–é€šè¿‡ä¸“é—¨çš„å¯¹è±¡ä¼ é€’é”™è¯¯ä¿¡æ¯ã€‚è¿”å›å€¼æ–¹å¼è¡¨è¾¾èƒ½åŠ›æœ‰é™ï¼Œå¼‚å¸¸åœ¨æŸäº›å·¥ç¨‹ç¯å¢ƒä¸‹ä¸å¯ç”¨ï¼Œè€Œ <code>std::error_code</code> ä¸ºç¬¬ä¸‰ç§æ–¹å¼æä¾›äº†æ ‡å‡†åŒ–å®ç°ã€‚</p>
<p><code>std::error_code</code> äº C++11 å¼•å…¥ï¼Œæ—¨åœ¨æä¾›ä¸€ç§ç±»å‹å®‰å…¨ã€å¯ç»„åˆä¸”æ— éœ€å¼‚å¸¸çš„é”™è¯¯å¤„ç†æœºåˆ¶ã€‚</p>
<p>ä»ç»“æ„ä¸Šçœ‹ï¼Œ<code>std::error_code</code> åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼šä¸€ä¸ªæ•´å‹é”™è¯¯å€¼å’Œä¸€ä¸ªé”™è¯¯ç±»åˆ«ã€‚é”™è¯¯å€¼è¡¨ç¤ºå…·ä½“é”™è¯¯ç¼–å·ï¼Œé”™è¯¯ç±»åˆ«åˆ™æŒ‡æ˜è¯¥ç¼–å·æ‰€å±çš„é”™è¯¯åŸŸï¼Œä¾‹å¦‚ç³»ç»Ÿé”™è¯¯ã€æ–‡ä»¶ç³»ç»Ÿé”™è¯¯æˆ–è‡ªå®šä¹‰åº“é”™è¯¯ã€‚</p>
<p>è¿™ç§è®¾è®¡é¿å…äº†çº¯æ•´æ•°é”™è¯¯ç å¯èƒ½å¼•èµ·çš„æ­§ä¹‰ã€‚ç›¸åŒçš„æ•´æ•°å€¼åœ¨ä¸åŒé”™è¯¯åŸŸä¸­å¯ä»£è¡¨ä¸åŒçš„å«ä¹‰ï¼Œè€Œ <code>std::error_code</code> èƒ½åŒæ—¶ä¿å­˜å€¼å’ŒåŸŸçš„ä¿¡æ¯ã€‚</p>
<p><code>std::error_code</code> æ˜¯è½»é‡çº§çš„å€¼ç±»å‹ï¼Œæ”¯æŒæ‹·è´ã€èµ‹å€¼å’Œä¼ å€¼ã€‚é»˜è®¤æ„é€ çš„ <code>std::error_code</code> è¡¨ç¤ºâ€œæ— é”™è¯¯â€ï¼Œå…¶å†…éƒ¨é”™è¯¯å€¼ä¸º 0ã€‚</p>
<p>è¯¥ç±»æä¾›äº† <code>operator bool()</code>ï¼Œå¯ç”¨äºåˆ¤æ–­æ˜¯å¦å‡ºé”™ã€‚éé›¶é”™è¯¯å€¼å¯¹åº” <code>true</code>ï¼Œè¡¨ç¤ºå‘ç”Ÿé”™è¯¯ï¼›é›¶å€¼å¯¹åº” <code>false</code>ï¼Œè¡¨ç¤ºæˆåŠŸã€‚</p>
<p>æ­¤å¤–ï¼Œå¯é€šè¿‡ <code>value()</code> è·å–åŸå§‹é”™è¯¯å€¼ï¼Œé€šè¿‡ <code>category()</code> è·å–é”™è¯¯ç±»åˆ«ï¼Œé€šè¿‡ <code>message()</code> è·å–å¯è¯»çš„é”™è¯¯æè¿°ã€‚æ³¨æ„ï¼Œ<code>message()</code> ä»…ç”¨äºè¾“å‡ºï¼Œä¸åº”ç”¨äºé€»è¾‘åˆ¤æ–­ã€‚</p>
<h2 data-id="heading-3">ä¸ºä½•é€‰æ‹© std::error_code</h2>
<p>è™½ç„¶å¼‚å¸¸æ˜¯ C++ å†…ç½®çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œä½†å¹¶éæ‰€æœ‰é¡¹ç›®éƒ½é€‚ç”¨ã€‚ä¸€äº›ç³»ç»Ÿçº§é¡¹ç›®å¯èƒ½ç¦ç”¨å¼‚å¸¸ä»¥å‡å°‘ä½“ç§¯æˆ–é¿å…è¿è¡Œæ—¶å¼€é”€ï¼›æŸäº›åº“éœ€ä¸ C æ¥å£æˆ–å…¶ä»–è¯­è¨€äº¤äº’ï¼Œå¼‚å¸¸æ— æ³•è·¨è¶Šè¯­è¨€å±éšœï¼›è¿˜æœ‰ä¸€äº›åœºæ™¯éœ€è¦æ˜¾å¼å¤„ç†æ¯ä¸€æ­¥å¯èƒ½çš„å¤±è´¥ã€‚</p>
<p>åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œå¼‚å¸¸å¹¶éç†æƒ³é€‰æ‹©ï¼Œè€Œ <code>std::error_code</code> æä¾›äº†ä¸€ç§æ ‡å‡†ã€å¯ç§»æ¤çš„æ›¿ä»£æ–¹æ¡ˆã€‚</p>
<p>ä¸ä¼ ç»Ÿçš„æ•´å‹é”™è¯¯ç ç›¸æ¯”ï¼Œ<code>std::error_code</code> å…·å¤‡æ›´å¼ºçš„ç±»å‹å®‰å…¨æ€§å’Œè¯­ä¹‰æ¸…æ™°åº¦ã€‚é”™è¯¯å€¼ä¸å†å­¤ç«‹ï¼Œè€Œæ˜¯ä¸é”™è¯¯åŸŸç»‘å®šï¼Œé¿å…äº†ä¸åŒæ¨¡å—é—´çš„å†²çªã€‚é”™è¯¯å¯¹è±¡å¯ç›´æ¥ä¼ é€’å’Œå­˜å‚¨ï¼Œä¸ä¾èµ–å…¨å±€å˜é‡æˆ–çº¿ç¨‹å±€éƒ¨å­˜å‚¨ã€‚</p>
<p>C++17 çš„ <code>&lt;filesystem&gt;</code> æ¨¡å—å¤§é‡ä½¿ç”¨äº†åŒæ—¶æ”¯æŒå¼‚å¸¸å’Œéå¼‚å¸¸ç‰ˆæœ¬çš„æ¥å£ï¼Œéå¼‚å¸¸ç‰ˆæœ¬é€šå¸¸é€šè¿‡ <code>std::error_code&amp;</code> å‚æ•°æŠ¥å‘Šé”™è¯¯ã€‚ç±»ä¼¼åœ°ï¼Œ<code>std::from_chars</code> ç­‰åº•å±‚å‡½æ•°ä¹Ÿé‡‡ç”¨äº†è¿™ä¸€è®¾è®¡ã€‚</p>
<p>è¿™äº›å®è·µè¡¨æ˜ï¼Œ<code>std::error_code</code> å·²æˆä¸ºç°ä»£ C++ å¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚</p>
<h2 data-id="heading-4">å¦‚ä½•ä½¿ç”¨ std::error_code</h2>
<p>æœ€å¸¸è§çš„ä½¿ç”¨æ–¹å¼æ˜¯è°ƒç”¨é‚£äº›æ¥å— <code>std::error_code&amp;</code> å½¢å‚çš„å‡½æ•°ã€‚è°ƒç”¨æ–¹åœ¨è°ƒç”¨å‰å‡†å¤‡ä¸€ä¸ª <code>std::error_code</code> å¯¹è±¡ï¼Œå‡½æ•°æ‰§è¡Œåä¼šæ ¹æ®ç»“æœè®¾ç½®è¯¥å¯¹è±¡ã€‚æˆåŠŸæ—¶é”™è¯¯ç è¢«æ¸…ç©ºï¼Œå¤±è´¥æ—¶è¢«è®¾ä¸ºç›¸åº”é”™è¯¯å€¼ã€‚</p>
<p>è°ƒç”¨å®Œæˆåï¼Œè°ƒç”¨æ–¹é€šè¿‡æ£€æŸ¥è¯¥å¯¹è±¡å³å¯åˆ¤æ–­æ˜¯å¦å‡ºé”™ï¼Œå¹¶æ‰§è¡Œç›¸åº”å¤„ç†ã€‚</p>
<p><code>std::error_code</code> éµå¾ªä¸€é¡¹å…³é”®çº¦å®šï¼šé”™è¯¯å€¼ 0 è¡¨ç¤ºæˆåŠŸï¼Œä»»ä½•é 0 å€¼è¡¨ç¤ºå¤±è´¥ã€‚åŸºäºè¯¥çº¦å®šï¼Œ<code>operator bool()</code> çš„è¡Œä¸ºç›´è§‚ä¸”ä¸€è‡´ã€‚</p>
<p>è¿™ä¸€çº¦å®šåœ¨ä½¿ç”¨ä¸­å¿…é¡»ä¸¥æ ¼éµå®ˆã€‚è‡ªå®šä¹‰é”™è¯¯ç æ—¶ï¼Œåˆ‡å‹¿å°† 0 åˆ†é…ç»™è¡¨ç¤ºå¤±è´¥çš„æšä¸¾å€¼ï¼Œå¦åˆ™ä¼šå¯¼è‡´é€»è¾‘é”™è¯¯ã€‚</p>
<p>åœ¨ç¼–å†™åº“æˆ–æ¨¡å—æ—¶ï¼Œé€šå¸¸éœ€è¦å®šä¹‰è‡ªèº«çš„é”™è¯¯é›†åˆã€‚å»ºè®®ä½¿ç”¨ <code>enum class</code> å£°æ˜é”™è¯¯æšä¸¾ï¼Œå¹¶æ˜ç¡®æŒ‡å®šä¸€ä¸ªåº•å±‚å€¼ä¸º 0 çš„â€œæˆåŠŸâ€æšä¸¾å€¼ã€‚</p>
<p>è¿™äº›æšä¸¾å€¼ä»…è¡¨ç¤ºé”™è¯¯ç±»å‹ï¼Œä¸åŒ…å«é”™è¯¯åŸŸä¿¡æ¯ã€‚é”™è¯¯åŸŸç”±åç»­çš„ <code>error_category</code> æä¾›ã€‚</p>
<p>ä¸ºä½¿è‡ªå®šä¹‰æšä¸¾èƒ½è‡ªåŠ¨è½¬æ¢ä¸º <code>std::error_code</code>ï¼Œéœ€å®Œæˆä¸¤é¡¹å·¥ä½œï¼šä¸€æ˜¯ä¸ºè¯¥æšä¸¾ç‰¹åŒ– <code>std::is_error_code_enum</code>ï¼Œå°†å…¶æ ‡è®°ä¸ºé”™è¯¯ç æšä¸¾ï¼›äºŒæ˜¯æä¾›åä¸º <code>make_error_code</code> çš„è‡ªç”±å‡½æ•°ï¼Œç”¨äºæ ¹æ®æšä¸¾å€¼æ„é€  <code>std::error_code</code> å¯¹è±¡ã€‚</p>
<p>å®Œæˆä¸Šè¿°æ­¥éª¤åï¼Œè¯¥æšä¸¾ç±»å‹å³å¯åœ¨éœ€è¦ <code>std::error_code</code> çš„åœºåˆéšå¼ä½¿ç”¨ã€‚è¯¥æœºåˆ¶ä¾èµ–äºå‚æ•°ä¾èµ–æŸ¥æ‰¾ï¼Œå¯¹è°ƒç”¨æ–¹é€æ˜ã€‚</p>
<h2 data-id="heading-5">å®Œæ•´ç¤ºä¾‹</h2>
<p>å‡è®¾ä¸ºä¸€ä¸ªæ–‡ä»¶å¤„ç†æ¨¡å—å®šä¹‰é”™è¯¯ç ã€‚é¦–å…ˆå®šä¹‰é”™è¯¯æšä¸¾ï¼Œå…¶ä¸­æ˜ç¡®åŒ…å«æˆåŠŸå€¼ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">enum class</span> <span class="hljs-title class_">FileError</span> {
    success = <span class="hljs-number">0</span>,
    not_found = <span class="hljs-number">1</span>,
    permission_denied = <span class="hljs-number">2</span>
};
</code></pre>
<p>æ¥ç€å®šä¹‰å¯¹åº”çš„é”™è¯¯ç±»åˆ«ï¼Œç»§æ‰¿è‡ª <code>std::error_category</code>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">FileErrorCategory</span> : <span class="hljs-keyword">public</span> std::error_category {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">const</span> <span class="hljs-type">char</span>* <span class="hljs-title">name</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">noexcept</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"file_error"</span>;
    }

    <span class="hljs-function">std::string <span class="hljs-title">message</span><span class="hljs-params">(<span class="hljs-type">int</span> ev)</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-keyword">switch</span> (<span class="hljs-built_in">static_cast</span>&lt;FileError&gt;(ev)) {
        <span class="hljs-keyword">case</span> FileError::success:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>;
        <span class="hljs-keyword">case</span> FileError::not_found:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"file not found"</span>;
        <span class="hljs-keyword">case</span> FileError::permission_denied:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"permission denied"</span>;
        <span class="hljs-keyword">default</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"unknown file error"</span>;
        }
    }
};
</code></pre>
<p>æä¾›è·å–è¯¥ç±»åˆ«å”¯ä¸€å®ä¾‹çš„å‡½æ•°ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">const</span> std::error_category&amp; <span class="hljs-title">file_error_category</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">static</span> FileErrorCategory instance;
    <span class="hljs-keyword">return</span> instance;
}
</code></pre>
<p>å°†æšä¸¾æ ‡è®°ä¸ºé”™è¯¯ç æšä¸¾ï¼Œå¹¶æä¾›æ„é€ å‡½æ•°ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">namespace</span> std {
<span class="hljs-keyword">template</span> &lt;&gt;
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">is_error_code_enum</span>&lt;FileError&gt; : true_type {};
}

<span class="hljs-function">std::error_code <span class="hljs-title">make_error_code</span><span class="hljs-params">(FileError e)</span> </span>{
    <span class="hljs-keyword">return</span> std::<span class="hljs-built_in">error_code</span>(<span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">int</span>&gt;(e), <span class="hljs-built_in">file_error_category</span>());
}
</code></pre>
<p>æ­¤åå³å¯åœ¨æ¥å£ä¸­è‡ªç„¶ä½¿ç”¨ <code>std::error_code</code>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">std::error_code <span class="hljs-title">open_file</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; path)</span> </span>{
    <span class="hljs-keyword">if</span> (path.<span class="hljs-built_in">empty</span>()) {
        <span class="hljs-keyword">return</span> FileError::not_found;
    }
    <span class="hljs-keyword">return</span> FileError::success;
}
</code></pre>
<p>è°ƒç”¨æ–¹é€šè¿‡æ£€æŸ¥é”™è¯¯ç åˆ¤æ–­ç»“æœï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">std::error_code ec = <span class="hljs-built_in">open_file</span>(<span class="hljs-string">"data.txt"</span>);
<span class="hljs-keyword">if</span> (ec) {
    std::cerr &lt;&lt; ec.<span class="hljs-built_in">message</span>() &lt;&lt; std::endl;
}
</code></pre>
<h2 data-id="heading-6">ä½¿ç”¨ std::error_code çš„åŸºæœ¬åŸåˆ™</h2>
<p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œ<code>std::error_code</code> åº”ä»…ç”¨äºè¡¨ç¤ºé”™è¯¯ç±»å‹ï¼Œè€Œéæºå¸¦å¤æ‚ä¸Šä¸‹æ–‡ã€‚é”™è¯¯ç çš„æ¯”è¾ƒåº”åŸºäºæšä¸¾å€¼æˆ–å¸ƒå°”è¯­ä¹‰ï¼Œè€Œéä¾èµ–é”™è¯¯ä¿¡æ¯å­—ç¬¦ä¸²ã€‚</p>
<p>æ­¤å¤–ï¼Œé”™è¯¯ç è®¾è®¡åº”ä¿æŒç¨³å®šã€‚ä¸€æ—¦é”™è¯¯å€¼å’Œç±»åˆ«å¯¹å¤–å…¬å¼€ï¼Œåº”é¿å…éšæ„ä¿®æ”¹å…¶å«ä¹‰ï¼Œä»¥å…å½±å“è°ƒç”¨æ–¹é€»è¾‘ã€‚</p>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p><code>std::error_code</code> æä¾›äº†ä¸€ç§æ ‡å‡†åŒ–ã€ç±»å‹å®‰å…¨ä¸”ä¸ä¾èµ–äºå¼‚å¸¸çš„é”™è¯¯å¤„ç†æ–¹å¼ã€‚å®ƒé€šè¿‡ç»‘å®šé”™è¯¯å€¼ä¸é”™è¯¯åŸŸï¼Œè§£å†³äº†ä¼ ç»Ÿé”™è¯¯ç çš„æ­§ä¹‰é—®é¢˜ï¼Œå¹¶åœ¨æ ‡å‡†åº“ä¸­å¾—åˆ°äº†å¹¿æ³›åº”ç”¨ã€‚</p>
<p>åœ¨éœ€è¦æ— å¼‚å¸¸æ¥å£çš„åœºæ™¯ä¸­ï¼Œæ­£ç¡®å®šä¹‰é”™è¯¯æšä¸¾ä¸é”™è¯¯ç±»åˆ«ï¼Œå¹¶éµå®ˆâ€œ0 è¡¨ç¤ºæˆåŠŸâ€çš„çº¦å®šï¼Œå¯ä½¿ <code>std::error_code</code> æˆä¸ºæ¸…æ™°å¯é çš„é”™è¯¯ä¼ é€’å·¥å…·ã€‚éšç€ C++ æ ‡å‡†å‘ç»“æœç±»å‹æ¼”è¿›ï¼Œ<code>std::error_code</code> ä»å°†åœ¨æœªæ¥é•¿æœŸæ‰®æ¼”é‡è¦è§’è‰²ã€‚</p>
<p>æ— è®ºæ˜¯é”™è¯¯å¤„ç†æœºåˆ¶çš„è®¾è®¡ï¼Œè¿˜æ˜¯æ ¸å¿ƒä¸šåŠ¡é€»è¾‘çš„å®ç°ï¼ŒC++ ä»£ç çš„å®‰å…¨æ€§å§‹ç»ˆæ˜¯å•†ä¸šé¡¹ç›®çš„é‡è¦è€ƒé‡ã€‚åœ¨äº¤ä»˜å¯æ‰§è¡Œç¨‹åºæˆ– SDK æ—¶ï¼Œé™¤äº†ç¡®ä¿åŠŸèƒ½æ­£ç¡®ï¼Œè¿˜éœ€é˜²èŒƒé€†å‘å·¥ç¨‹ä¸ä»£ç ç¯¡æ”¹çš„é£é™©ã€‚å¯¹äºéœ€è¦åŠ å¼ºä¿æŠ¤çš„ C++ åº”ç”¨ç¨‹åºï¼Œæ¨èä½¿ç”¨ Virbox Protector è¿›è¡Œä¸“ä¸šçš„ä»£ç åŠ å¯†ä¸æ··æ·†ï¼Œå®ƒèƒ½æœ‰æ•ˆé˜»æ­¢åç¼–è¯‘åˆ†æï¼Œä¿æŠ¤çŸ¥è¯†äº§æƒï¼Œä¸ºæ‚¨çš„è½¯ä»¶æ„ç­‘ä¸€é“å¯é çš„å®‰å…¨å±éšœã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python 3.12 æ€§èƒ½ä¼˜åŒ–ï¼š5 ä¸ªé²œä¸ºäººçŸ¥ä½†æå‡æ˜¾è‘—çš„æŠ€å·§è®©ä½ çš„ä»£ç å¿«å¦‚é—ªç”µ]]></title>    <link>https://juejin.cn/post/7589275237037293603</link>    <guid>https://juejin.cn/post/7589275237037293603</guid>    <pubDate>2025-12-30T04:17:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589275237037293603" data-draft-id="7589275237037277219" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python 3.12 æ€§èƒ½ä¼˜åŒ–ï¼š5 ä¸ªé²œä¸ºäººçŸ¥ä½†æå‡æ˜¾è‘—çš„æŠ€å·§è®©ä½ çš„ä»£ç å¿«å¦‚é—ªç”µ"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-30T04:17:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python 3.12 æ€§èƒ½ä¼˜åŒ–ï¼š5 ä¸ªé²œä¸ºäººçŸ¥ä½†æå‡æ˜¾è‘—çš„æŠ€å·§è®©ä½ çš„ä»£ç å¿«å¦‚é—ªç”µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T04:17:21.000Z" title="Tue Dec 30 2025 04:17:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Python 3.12 æ€§èƒ½ä¼˜åŒ–ï¼š5 ä¸ªé²œä¸ºäººçŸ¥ä½†æå‡æ˜¾è‘—çš„æŠ€å·§è®©ä½ çš„ä»£ç å¿«å¦‚é—ªç”µ</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Python ä½œä¸ºä¸€ç§é«˜çº§è§£é‡Šå‹è¯­è¨€ï¼Œä»¥å…¶ç®€æ´æ˜“è¯»çš„è¯­æ³•å’Œå¼ºå¤§çš„ç”Ÿæ€ç³»ç»Ÿè‘—ç§°ï¼Œä½†åœ¨æ€§èƒ½æ–¹é¢å¸¸å¸¸è¢«äººè¯Ÿç—…ã€‚ç„¶è€Œï¼Œéšç€ Python 3.12 çš„å‘å¸ƒï¼Œå…¶æ€§èƒ½ä¼˜åŒ–ç‰¹æ€§å†æ¬¡æˆä¸ºå¼€å‘è€…å…³æ³¨çš„ç„¦ç‚¹ã€‚å°½ç®¡å¤§å®¶ç†ŸçŸ¥ä¸€äº›å¸¸è§çš„ä¼˜åŒ–æ‰‹æ®µï¼ˆå¦‚ä½¿ç”¨ <code>list</code> æ¨å¯¼å¼ã€é¿å…å…¨å±€å˜é‡ç­‰ï¼‰ï¼Œä½†ä»æœ‰ä¸å°‘é²œä¸ºäººçŸ¥çš„æŠ€å·§å¯ä»¥æ˜¾è‘—æå‡ä»£ç çš„æ‰§è¡Œæ•ˆç‡ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ Python 3.12 ä¸­äº”ä¸ªè¾ƒå°‘è¢«æåŠä½†æ•ˆæœæ˜¾è‘—çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§ã€‚è¿™äº›æŠ€å·§ä¸ä»…åŸºäº Python æ ¸å¿ƒå›¢é˜Ÿçš„å®˜æ–¹æ”¹è¿›ï¼Œè¿˜ç»“åˆäº†å®é™…å¼€å‘ä¸­çš„æœ€ä½³å®è·µã€‚æ— è®ºä½ æ˜¯æ•°æ®åˆ†æå¸ˆã€Web å¼€å‘è€…è¿˜æ˜¯ç³»ç»Ÿå·¥ç¨‹å¸ˆï¼Œè¿™äº›æŠ€å·§éƒ½èƒ½å¸®åŠ©ä½ å†™å‡ºæ›´é«˜æ•ˆçš„ Python ä»£ç ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸»ä½“</h2>
<h3 data-id="heading-3">1. <strong>åˆ©ç”¨ PEP 709ï¼šå†…è” comprehensions</strong></h3>
<p>Python 3.12 å¼•å…¥äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fpeps.python.org%2Fpep-0709%2F" target="_blank" title="https://peps.python.org/pep-0709/" ref="nofollow noopener noreferrer">PEP 709</a>ï¼Œå°† comprehensionsï¼ˆæ¨å¯¼å¼ï¼‰ä»å‡½æ•°è°ƒç”¨è½¬æ¢ä¸ºå†…è”ä»£ç ã€‚è¿™ä¸€æ”¹è¿›æ˜¾è‘—å‡å°‘äº†æ¨å¯¼å¼çš„å¼€é”€ï¼Œå°¤å…¶æ˜¯åœ¨åµŒå¥—ä½¿ç”¨æ—¶ã€‚</p>
<h4 data-id="heading-4"><strong>ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼Ÿ</strong></h4>
<p>åœ¨ Python 3.11 åŠä¹‹å‰ç‰ˆæœ¬ï¼Œåˆ—è¡¨æ¨å¯¼å¼ã€å­—å…¸æ¨å¯¼å¼å’Œé›†åˆæ¨å¯¼å¼ä¼šè¢«ç¼–è¯‘ä¸ºéšå¼çš„å‡½æ•°è°ƒç”¨ã€‚è™½ç„¶è¿™ç§è®¾è®¡æœ‰åŠ©äºéš”ç¦»ä½œç”¨åŸŸï¼Œä½†ä¹Ÿå¸¦æ¥äº†é¢å¤–çš„å‡½æ•°è°ƒç”¨å¼€é”€ã€‚Python 3.12 é€šè¿‡å†…è”è¿™äº›æ“ä½œæ¶ˆé™¤äº†è¿™ä¸€å¼€é”€ã€‚</p>
<h4 data-id="heading-5"><strong>ç¤ºä¾‹å¯¹æ¯”</strong></h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Python 3.11ï¼ˆè¾ƒæ…¢ï¼‰</span>
squares = [x * x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000</span>)]

<span class="hljs-comment"># Python 3.12ï¼ˆæ›´å¿«ï¼‰</span>
squares = [x * x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000</span>)]
</code></pre>
<p>æ ¹æ®å®˜æ–¹åŸºå‡†æµ‹è¯•ï¼Œè¿™ä¸€æ”¹è¿›ä½¿å¾—ç®€å•çš„åˆ—è¡¨æ¨å¯¼å¼é€Ÿåº¦æå‡äº†çº¦ <strong>20%</strong>ã€‚</p>
<h4 data-id="heading-6"><strong>é€‚ç”¨åœºæ™¯</strong></h4>
<ul>
<li>é«˜é¢‘ä½¿ç”¨çš„æ¨å¯¼å¼ï¼ˆå°¤å…¶æ˜¯åµŒå¥—ç»“æ„ï¼‰ã€‚</li>
<li>å¤§æ•°æ®é›†å¤„ç†æ—¶çš„å°å¹…åŠ é€Ÿç´¯ç§¯æ•ˆåº”ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">2. <strong><code>math</code>æ¨¡å—çš„å‘é‡åŒ–æ“ä½œ</strong></h3>
<p>Python 3.12è¿›ä¸€æ­¥ä¼˜åŒ–äº†<code>math</code>æ¨¡å—çš„æ€§èƒ½ï¼Œå°¤å…¶æ˜¯å¯¹å‘é‡åŒ–æ•°å­¦å‡½æ•°çš„æ”¯æŒã€‚è™½ç„¶ NumPyä»ç„¶æ˜¯é«˜æ€§èƒ½è®¡ç®—çš„æ ‡æ†ï¼Œä½†åŸç”Ÿ<code>math</code>æ¨¡å—åœ¨æŸäº›åœºæ™¯ä¸‹å·²ç»è¶³å¤Ÿé«˜æ•ˆã€‚</p>
<h4 data-id="heading-8"><strong>ä¸ºä»€ä¹ˆæœ‰æ•ˆï¼Ÿ</strong></h4>
<p>Pythonçš„æ ¸å¿ƒæ•°å­¦å‡½æ•°ï¼ˆå¦‚<code>math.sqrt</code>ã€<code>math.sin</code>ï¼‰ç°åœ¨åˆ©ç”¨äº†æ›´é«˜æ•ˆçš„åº•å±‚å®ç°ï¼ˆä¾‹å¦‚Cæ ‡å‡†åº“çš„ç°ä»£ä¼˜åŒ–ç‰ˆæœ¬ï¼‰ã€‚æ­¤å¤–ï¼Œç¼–è¯‘å™¨å¯¹å¾ªç¯å†…è”å’Œå¸¸é‡ä¼ æ’­çš„æ”¹è¿›ä¹Ÿæå‡äº†è¿ç»­è°ƒç”¨çš„æ•ˆç‡ã€‚</p>
<h4 data-id="heading-9"><strong>ç¤ºä¾‹å¯¹æ¯”</strong></h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> math

<span class="hljs-comment"># Python &lt;3.12ï¼ˆè¾ƒæ…¢ï¼‰</span>
results = [math.sqrt(x) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10000</span>)]

<span class="hljs-comment"># Python &gt;=3.12 + vectorized style</span>
results = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">map</span>(math.sqrt, <span class="hljs-built_in">range</span>(<span class="hljs-number">10000</span>)))
</code></pre>
<p>åè€…çš„å†™æ³•åœ¨Python3.12ä¸­å¿«äº†çº¦15%ï¼Œå› ä¸ºé¿å…äº†ç”Ÿæˆå™¨åˆ°åˆ—è¡¨çš„è½¬æ¢å¼€é”€ã€‚</p>
<h4 data-id="heading-10"><strong>é€‚ç”¨åœºæ™¯</strong></h4>
<ul>
<li>çº¯æ•°å­¦è®¡ç®—ä¸”æ— æ³•ä¾èµ–NumPyçš„å°å‹è„šæœ¬ã€‚</li>
<li>éœ€è¦å‡å°‘ç¬¬ä¸‰æ–¹ä¾èµ–çš„åœºæ™¯ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-11">3.<strong>ç»“æ„åŒ–æ¨¡å¼åŒ¹é…ä¸­çš„ç¼“å­˜æœºåˆ¶</strong></h3>
<p>Pythonçš„æ¨¡å¼åŒ¹é…åŠŸèƒ½è‡ªå¼•å…¥ä»¥æ¥ä¸€ç›´æ˜¯è¯­æ³•ç³–çš„ä»£åè¯ã€‚ç„¶è€Œå¾ˆå°‘æœ‰äººæ³¨æ„åˆ°å…¶åœ¨ç‰¹å®šæƒ…å†µä¸‹çš„æ€§èƒ½ä¼˜åŠ¿â€”â€”ç‰¹åˆ«æ˜¯å½“åŒ¹é…é¡¹é‡å¤æ—¶,Pytonä¼šç¼“å­˜éƒ¨åˆ†åŒ¹é…é€»è¾‘.</p>
<h4 data-id="heading-12"><strong>ä¸ºä»€ä¹ˆæœ‰æ•ˆ?</strong></h4>
<p>å½“ä½ åå¤ç”¨ç›¸åŒæ¨¡å¼å»åŒ¹é…ä¸åŒæ•°æ®æ—¶,Pythoä¼šè®°ä½å…ˆå‰è§£æè¿‡çš„æ¨¡å¼ç»“æ„ä»è€Œè·³è¿‡é‡å¤åˆ†æé˜¶æ®µç›´æ¥æ¯”è¾ƒå€¼æœ¬èº«.</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_data</span>(<span class="hljs-params">data</span>):
    <span class="hljs-keyword">match</span> data:
        <span class="hljs-keyword">case</span> {<span class="hljs-string">"type"</span>: <span class="hljs-string">"A"</span>, <span class="hljs-string">"value"</span>: val}:
            process_a(val)
        <span class="hljs-keyword">case</span> {<span class="hljs-string">"type"</span>: <span class="hljs-string">"B"</span>, <span class="hljs-string">"value"</span>: val}:
            process_b(val)

<span class="hljs-comment">#å¤šæ¬¡è°ƒç”¨æ—¶ç¬¬äºŒæ¬¡ä»¥åæ›´å¿«</span>
handle_data({<span class="hljs-string">"type"</span>:<span class="hljs-string">"A"</span>,<span class="hljs-string">"value"</span>:<span class="hljs-number">42</span>}) 
</code></pre>
<p>æ ¹æ®å†…éƒ¨æµ‹è¯•,å¤æ‚æ¨¡å¼çš„é‡å¤åŒ¹é…å¯æé€Ÿè¾¾30%.</p>
<hr/>
<p>###4.<strong>å­—å…¸é”®æŸ¥æ‰¾åŠ é€Ÿ(PEPç”³è¯·ä¸­)</strong></p>
<p>è™½ç„¶å°šæœªæ­£å¼å‘å¸ƒ,ä½†Pytohnæ ¸å¿ƒå›¢é˜Ÿæ­£åœ¨è¯•éªŒä¸€ç§æ–°å‹å­—å…¸é”®æŸ¥æ‰¾ç®—æ³•â€”å°†å“ˆå¸Œè¡¨ä¸çº¿æ€§æœç´¢ç›¸ç»“åˆä»¥é™ä½å†²çªç‡.
å½“å‰ç‰ˆæœ¬ä¸‹å¦‚æœå­—å…¸å¾ˆå°(&lt;=5é¡¹),åˆ™ç›´æ¥çº¿æ€§æ‰«æå¯èƒ½æ¯”è®¡ç®—å“ˆå¸Œæ›´å¿«.</p>
<p>ä½ å¯ä»¥æ‰‹åŠ¨æ¨¡æ‹Ÿè¿™ç‚¹:</p>
<pre><code class="hljs language-python" lang="python">small_dict = {<span class="hljs-number">1</span>:<span class="hljs-string">"a"</span>,<span class="hljs-number">2</span>:<span class="hljs-string">"b"</span>}
key=<span class="hljs-number">2</span>

<span class="hljs-comment">#ä¼ ç»Ÿæ–¹å¼(æ‰€æœ‰ç‰ˆæœ¬)</span>
value=small_dict[key]

<span class="hljs-comment">#æ‰‹åŠ¨çº¿æ€§æ‰«æ(Python&gt;=312æ¨èä»…å¯¹å°å­—å…¸!)</span>
<span class="hljs-keyword">for</span> k,v <span class="hljs-keyword">in</span> small_dict.items():
    <span class="hljs-keyword">if</span> k==key:
        value=v
        <span class="hljs-keyword">break</span>
</code></pre>
<p>æ³¨æ„:è¿™åªæ˜¯ä¸€ä¸ªä¸´æ—¶æŠ€å·§ç­‰å¾…æœªæ¥ç‰ˆæœ¬åŸç”Ÿæ”¯æŒ.</p>
<hr/>
<p>###5.<strong>åç¨‹æ ˆåˆ‡æ¢ä¼˜åŒ–</strong></p>
<p>å¼‚æ­¥ç¼–ç¨‹æ˜¯ç°ä»£Pythoç”Ÿæ€ä¸å¯æˆ–ç¼ºçš„éƒ¨åˆ†.Pythn312é‡æ–°è®¾è®¡äº†åç¨‹è°ƒåº¦å™¨æ ˆç®¡ç†æœºåˆ¶ä½¿å¾—ä»»åŠ¡åˆ‡æ¢æ—¶çš„å†…å­˜æ“ä½œå‡å°‘äº†çº¦40%.</p>
<p>è¿™æ„å‘³ç€å³ä½¿ä¸ä¿®æ”¹ä»»ä½•ä¸šåŠ¡é€»è¾‘ä½ çš„asyncioåº”ç”¨ä¹Ÿèƒ½è·å¾—å…è´¹æé€Ÿ!</p>
<p>å…·ä½“æ¥è¯´:</p>
<ul>
<li>Coroutineå¯¹è±¡ç°åœ¨ä½¿ç”¨æ›´ç´§å‡‘çš„å†…å­˜å¸ƒå±€</li>
<li>awaitå…³é”®å­—çš„å †æ ˆåˆ†é…ç­–ç•¥è¢«ç®€åŒ–</li>
<li>Event loopå”¤é†’å»¶è¿Ÿé™ä½</li>
</ul>
<hr/>
<p>##æ€»ç»“</p>
<p>æœ¬æ–‡ä»‹ç»äº†äº”ä¸ªé’ˆå¯¹Pytho312æˆ–å³å°†å‘å¸ƒç‰ˆæœ¬çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼š
1)ç†è§£å¹¶åˆ©ç”¨PEP709çš„å†…è”comprehensions<br/>
2)ä¼˜å…ˆé€‰æ‹©åŸç”Ÿmathæ¨¡å—è€Œéæ‰‹å·¥å¾ªç¯<br/>
3)å–„ç”¨æ¨¡å¼åŒ¹é…çš„éšå¼ç¼“å­˜ç‰¹æ€§<br/>
4)å…³æ³¨å°è§„æ¨¡å­—å…¸çš„ç‰¹æ®Šè¡Œä¸º<br/>
5)äº«å—å¼‚æ­¥IOæ ˆç®¡ç†æ”¹è¿›å¸¦æ¥çš„çº¢åˆ©</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯æ²¡æœ‰ä»»ä½•å•ä¸€æŠ€æœ¯èƒ½è§£å†³æ‰€æœ‰é—®é¢˜â€”çœŸæ­£çš„é«˜æ•ˆæ¥è‡ªäºå¯¹è¿™äº›ç»†èŠ‚çš„ç»„åˆè¿ç”¨ä»¥åŠå¯¹åº”ç”¨åœºæ™¯æ·±åˆ»ç†è§£ååšå‡ºæƒè¡¡å–èˆçš„èƒ½åŠ›ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SourceMap æ·±åº¦è§£æï¼šä»æ˜ å°„åŸç†åˆ°çº¿ä¸Šç›‘æ§è½åœ°]]></title>    <link>https://juejin.cn/post/7589217625901858825</link>    <guid>https://juejin.cn/post/7589217625901858825</guid>    <pubDate>2025-12-30T04:22:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589217625901858825" data-draft-id="7589166195798097947" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SourceMap æ·±åº¦è§£æï¼šä»æ˜ å°„åŸç†åˆ°çº¿ä¸Šç›‘æ§è½åœ°"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-30T04:22:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¢œé…±"/> <meta itemprop="url" content="https://juejin.cn/user/905653309941495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SourceMap æ·±åº¦è§£æï¼šä»æ˜ å°„åŸç†åˆ°çº¿ä¸Šç›‘æ§è½åœ°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/905653309941495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¢œé…±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T04:22:16.000Z" title="Tue Dec 30 2025 04:22:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">SourceMap æ·±åº¦è§£æï¼šä»æ˜ å°„åŸç†åˆ°çº¿ä¸Šç›‘æ§è½åœ°</h2>
<p>åœ¨å‰ç«¯å·¥ç¨‹åŒ–ä½“ç³»ä¸­ï¼ŒSourceMap æ˜¯è§£å†³ã€Œå‹ç¼©ä»£ç è°ƒè¯•éš¾ã€çš„æ ¸å¿ƒå·¥å…·ï¼Œä½†å¤šæ•°å¼€å‘è€…ä»…åœç•™åœ¨"çŸ¥é“èƒ½ç”¨"çš„å±‚é¢ï¼Œæ—¢ä¸æ¸…æ¥šå…¶åº•å±‚çš„ mappings å­—æ®µç¼–ç é€»è¾‘ï¼Œä¹Ÿä¸äº†è§£ç”Ÿäº§ç¯å¢ƒå¦‚ä½•å®‰å…¨è½åœ°ã€‚æœ¬æ–‡å°†ä» SourceMap çš„æœ¬è´¨å‡ºå‘ï¼Œæ‹†è§£ mappings å­—æ®µçš„ Base64 VLQ æ˜ å°„é€»è¾‘ï¼Œå¹¶ç»“åˆçº¿ä¸Šç›‘æ§åœºæ™¯ï¼Œè®²é€ SourceMap çš„å®æˆ˜ç”¨æ³•ã€‚</p>
<h3 data-id="heading-1">ğŸ“‘ ç›®å½•</h3>
<ul>
<li><a href="#%E4%B8%80sourcemap-%E6%98%AF%E4%BB%80%E4%B9%88%E8%A7%A3%E5%86%B3%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98" title="#%E4%B8%80sourcemap-%E6%98%AF%E4%BB%80%E4%B9%88%E8%A7%A3%E5%86%B3%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98">ä¸€ã€SourceMap æ˜¯ä»€ä¹ˆï¼Ÿè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ</a>
<ul>
<li><a href="#sourcemap%E7%94%B1%E6%9D%A5" title="#sourcemap%E7%94%B1%E6%9D%A5">SourceMap ç”±æ¥</a></li>
<li><a href="#11-%E6%A0%B8%E5%BF%83%E7%97%9B%E7%82%B9%E5%8E%8B%E7%BC%A9%E4%BB%A3%E7%A0%81%E8%B0%83%E8%AF%95%E7%9A%84%E5%99%A9%E6%A2%A6" title="#11-%E6%A0%B8%E5%BF%83%E7%97%9B%E7%82%B9%E5%8E%8B%E7%BC%A9%E4%BB%A3%E7%A0%81%E8%B0%83%E8%AF%95%E7%9A%84%E5%99%A9%E6%A2%A6">æ ¸å¿ƒç—›ç‚¹ï¼šå‹ç¼©ä»£ç è°ƒè¯•çš„"å™©æ¢¦"</a></li>
<li><a href="#12-sourcemap-%E6%9C%AC%E8%B4%A8%E4%BB%A3%E7%A0%81%E7%9A%84%E5%9D%90%E6%A0%87%E6%98%A0%E5%B0%84%E8%A1%A8" title="#12-sourcemap-%E6%9C%AC%E8%B4%A8%E4%BB%A3%E7%A0%81%E7%9A%84%E5%9D%90%E6%A0%87%E6%98%A0%E5%B0%84%E8%A1%A8">SourceMap æœ¬è´¨ï¼šä»£ç çš„"åæ ‡æ˜ å°„è¡¨"</a></li>
</ul>
</li>
<li><a href="#%E4%BA%8Csourcemap-%E6%A0%B8%E5%BF%83%E7%BB%93%E6%9E%84%E4%B8%8E-mappings-%E5%AD%97%E6%AE%B5%E8%A7%A3%E6%9E%90" title="#%E4%BA%8Csourcemap-%E6%A0%B8%E5%BF%83%E7%BB%93%E6%9E%84%E4%B8%8E-mappings-%E5%AD%97%E6%AE%B5%E8%A7%A3%E6%9E%90">äºŒã€SourceMap æ ¸å¿ƒç»“æ„ä¸ mappings å­—æ®µè§£æ</a>
<ul>
<li><a href="#21-sourcemap-%E6%A0%87%E5%87%86%E7%BB%93%E6%9E%84" title="#21-sourcemap-%E6%A0%87%E5%87%86%E7%BB%93%E6%9E%84">SourceMap æ ‡å‡†ç»“æ„</a></li>
<li><a href="#22-mappings-%E5%AD%97%E6%AE%B5base64-vlq-%E6%98%A0%E5%B0%84%E9%80%BB%E8%BE%91%E6%A0%B8%E5%BF%83" title="#22-mappings-%E5%AD%97%E6%AE%B5base64-vlq-%E6%98%A0%E5%B0%84%E9%80%BB%E8%BE%91%E6%A0%B8%E5%BF%83">mappings å­—æ®µï¼šBase64 VLQ æ˜ å°„é€»è¾‘ï¼ˆæ ¸å¿ƒï¼‰</a></li>
</ul>
</li>
<li><a href="#%E4%B8%89%E7%BA%BF%E4%B8%8A%E7%9B%91%E6%8E%A7sourcemap-%E5%AE%89%E5%85%A8%E8%90%BD%E5%9C%B0%E5%AE%9E%E8%B7%B5" title="#%E4%B8%89%E7%BA%BF%E4%B8%8A%E7%9B%91%E6%8E%A7sourcemap-%E5%AE%89%E5%85%A8%E8%90%BD%E5%9C%B0%E5%AE%9E%E8%B7%B5">ä¸‰ã€çº¿ä¸Šç›‘æ§ï¼šSourceMap å®‰å…¨è½åœ°å®è·µ</a>
<ul>
<li><a href="#31-%E6%A0%B8%E5%BF%83%E5%8E%9F%E5%88%99" title="#31-%E6%A0%B8%E5%BF%83%E5%8E%9F%E5%88%99">æ ¸å¿ƒåŸåˆ™</a></li>
<li><a href="#32-%E7%BB%93%E5%90%88-sentry-%E5%AE%9E%E7%8E%B0%E7%BA%BF%E4%B8%8A%E6%8A%A5%E9%94%99%E8%A7%A3%E6%9E%90%E4%B8%BB%E6%B5%81%E6%96%B9%E6%A1%88" title="#32-%E7%BB%93%E5%90%88-sentry-%E5%AE%9E%E7%8E%B0%E7%BA%BF%E4%B8%8A%E6%8A%A5%E9%94%99%E8%A7%A3%E6%9E%90%E4%B8%BB%E6%B5%81%E6%96%B9%E6%A1%88">ç»“åˆ Sentry å®ç°çº¿ä¸ŠæŠ¥é”™è§£æï¼ˆä¸»æµæ–¹æ¡ˆï¼‰</a></li>
<li><a href="#33-%E6%89%8B%E5%8A%A8%E7%A6%BB%E7%BA%BF%E8%A7%A3%E6%9E%90%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9B%91%E6%8E%A7%E5%B9%B3%E5%8F%B0" title="#33-%E6%89%8B%E5%8A%A8%E7%A6%BB%E7%BA%BF%E8%A7%A3%E6%9E%90%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9B%91%E6%8E%A7%E5%B9%B3%E5%8F%B0">æ‰‹åŠ¨ç¦»çº¿è§£æï¼ˆè‡ªå®šä¹‰ç›‘æ§å¹³å°ï¼‰</a></li>
</ul>
</li>
<li><a href="#%E5%9B%9Bsourcemap-%E5%B8%B8%E8%A7%81%E9%85%8D%E7%BD%AE%E4%B8%8E%E9%81%BF%E5%9D%91" title="#%E5%9B%9Bsourcemap-%E5%B8%B8%E8%A7%81%E9%85%8D%E7%BD%AE%E4%B8%8E%E9%81%BF%E5%9D%91">å››ã€SourceMap å¸¸è§é…ç½®ä¸é¿å‘</a></li>
<li><a href="#%E4%BA%94%E6%80%BB%E7%BB%93" title="#%E4%BA%94%E6%80%BB%E7%BB%93">äº”ã€æ€»ç»“</a></li>
</ul>
<h3 data-id="heading-2">ä¸€ã€SourceMap æ˜¯ä»€ä¹ˆï¼Ÿè§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h3>
<h4 data-id="heading-3">SourceMapç”±æ¥</h4>
<p>SourceMap æœ€æ—©ç”± Google å·¥ç¨‹å¸ˆåœ¨å¼€å‘ Closure Compilerï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdevelopers.google.com%2Fclosure%2Fcompiler%2Fdocs%2Fgettingstarted_app%3Fhl%3Dzh-cn" target="_blank" title="https://developers.google.com/closure/compiler/docs/gettingstarted_app?hl=zh-cn" ref="nofollow noopener noreferrer">è°·æ­Œé—­åŒ…ç¼–è¯‘å™¨</a>ï¼‰æ—¶æå‡ºï¼Œåˆè¡·æ˜¯è§£å†³ã€Œç¼–è¯‘åçš„ä»£ç è°ƒè¯•éš¾ã€é—®é¢˜ â€”â€” æ—©æœŸå‰ç«¯ä»£ç å‹ç¼© / ç¼–è¯‘åï¼Œè°ƒè¯•åªèƒ½çœ‹åˆ°æ··æ·†åçš„ä»£ç ï¼Œå·¥ç¨‹å¸ˆéœ€è¦ä¸€ä¸ªå·¥å…·èƒ½ â€œåå‘æ‰¾åˆ°æºç ä½ç½®â€ï¼Œå› æ­¤å°†è¿™ä¸ªã€Œå­˜å‚¨æºç æ˜ å°„å…³ç³»çš„æ–‡ä»¶ã€å‘½åä¸º SourceMapã€‚åç»­è¯¥è§„èŒƒè¢«æ ‡å‡†åŒ–ï¼ˆå½“å‰ä¸»æµä¸º Version 3 ç‰ˆæœ¬ï¼‰ï¼Œå¹¶è¢« Webpackã€Viteã€Babelã€Terser ç­‰å‡ ä¹æ‰€æœ‰å‰ç«¯æ„å»ºå·¥å…·é‡‡çº³ï¼ŒSourceMap ä¹Ÿæˆä¸ºè¡Œä¸šé€šç”¨æœ¯è¯­ã€‚</p>
<p>SourceMap ç”± Source + Map ä¸¤ä¸ªè‹±æ–‡å•è¯ç»„åˆè€Œæˆï¼Œå…¶å‘½åç²¾å‡†å¯¹åº”å·¥å…·çš„æ ¸å¿ƒåŠŸèƒ½ï¼š</p>
<ul>
<li>Sourceï¼šæŒ‡ã€ŒåŸå§‹æºç ï¼ˆSource Codeï¼‰ã€â€”â€” å³å¼€å‘è€…ç¼–å†™çš„æœªç¼–è¯‘ã€æœªå‹ç¼©çš„ä»£ç ï¼ˆå¦‚ ES6/TS ä»£ç ã€React/Vue æºç ï¼‰ï¼›</li>
<li>Mapï¼šæŒ‡ã€Œæ˜ å°„ï¼ˆMappingï¼‰ã€â€”â€” åœ¨è®¡ç®—æœºé¢†åŸŸï¼Œâ€œMapâ€ æ ¸å¿ƒå«ä¹‰æ˜¯ã€Œé”®å€¼å¯¹çš„å¯¹åº”å…³ç³»ã€ï¼ˆå¦‚å“ˆå¸Œè¡¨ã€æ˜ å°„è¡¨ï¼‰ï¼Œæ­¤å¤„ç‰¹æŒ‡ã€Œå‹ç¼© / ç¼–è¯‘åçš„ä»£ç ã€ä¸ã€ŒåŸå§‹æºç ã€ä¹‹é—´çš„åæ ‡ã€åç§°æ˜ å°„å…³ç³»ã€‚</li>
</ul>
<h4 data-id="heading-4">1.1 æ ¸å¿ƒç—›ç‚¹ï¼šå‹ç¼©ä»£ç è°ƒè¯•çš„"å™©æ¢¦"</h4>
<p>å‰ç«¯é¡¹ç›®ä¸Šçº¿å‰ï¼Œä»£ç ä¼šç»è¿‡ <strong>ç¼–è¯‘ï¼ˆBabel è½¬ ES5ï¼‰ã€æ··æ·†ï¼ˆå˜é‡åç¼©çŸ­ï¼‰ã€å‹ç¼©ï¼ˆåˆå¹¶è¡Œ/åˆ ç©ºæ ¼ï¼‰</strong> å¤„ç†ï¼š</p>
<ul>
<li>
<p>æºç ï¼š<code>function sayHi(userName) { return </code>Hi ${userName}<code>; }</code></p>
</li>
<li>
<p>å‹ç¼©åï¼š<code>function a(b){return</code>Hi ${b}<code>}</code></p>
</li>
</ul>
<p>æ­¤æ—¶è‹¥ä»£ç æŠ¥é”™ï¼Œæµè§ˆå™¨æ§åˆ¶å°åªä¼šæ˜¾ç¤ºã€Œz-index.min.js:1:25ã€è¿™ç±»å‹ç¼©ä»£ç çš„åæ ‡ï¼Œå®Œå…¨æ— æ³•å®šä½åˆ°æºç çš„å…·ä½“ä½ç½®â€”â€”è¿™å°±æ˜¯ SourceMap è¦è§£å†³çš„æ ¸å¿ƒé—®é¢˜ã€‚</p>
<h4 data-id="heading-5">1.2 SourceMap æœ¬è´¨ï¼šä»£ç çš„"åæ ‡æ˜ å°„è¡¨"</h4>
<p>SourceMap æ˜¯ä¸€ä¸ªä»¥ <code>.map</code> ä¸ºåç¼€çš„ JSON æ–‡ä»¶ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯å»ºç«‹ã€Œå‹ç¼©åä»£ç ã€ä¸ã€ŒåŸå§‹æºç ã€çš„ä¸€ä¸€æ˜ å°„å…³ç³»ï¼š</p>
<ul>
<li>
<p>å‹ç¼©åä»£ç çš„"è¡Œ/åˆ—" â†” æºç çš„"æ–‡ä»¶/è¡Œ/åˆ—"ï¼›</p>
</li>
<li>
<p>å‹ç¼©åçš„å˜é‡åï¼ˆå¦‚ <code>a</code>ï¼‰ â†” æºç çš„å˜é‡åï¼ˆå¦‚ <code>sayHi</code>ï¼‰ï¼›</p>
</li>
<li>
<p>ç®€å•ç±»æ¯”ï¼šæºç æ˜¯"åŸç‰ˆä¹¦"ï¼Œå‹ç¼©ä»£ç æ˜¯"ç²¾ç®€è¯‘æœ¬"ï¼ŒSourceMap æ˜¯"å¯¹ç…§å­—å…¸"ã€‚</p>
</li>
</ul>
<h3 data-id="heading-6">äºŒã€SourceMap æ ¸å¿ƒç»“æ„ä¸ mappings å­—æ®µè§£æ</h3>
<h4 data-id="heading-7">2.1 SourceMap æ ‡å‡†ç»“æ„</h4>
<p>SourceMapæœ¬è´¨å°±æ˜¯ä¸€ä¸ªjsonæ–‡ä»¶ï¼Œä¸€ä¸ªå®Œæ•´çš„ SourceMap æ–‡ä»¶åŒ…å« 6 ä¸ªæ ¸å¿ƒå­—æ®µï¼Œä»¥æç®€ç¤ºä¾‹ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// SourceMap ç‰ˆæœ¬ï¼ˆä¸»æµä¸º3ï¼‰</span>
  <span class="hljs-attr">"file"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"z-index.min.js"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// å‹ç¼©åçš„äº§ç‰©æ–‡ä»¶å</span>
  <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"z-index.js"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// åŸå§‹æºç æ–‡ä»¶è·¯å¾„åˆ—è¡¨ï¼Œå¯èƒ½æœ‰å¤šä¸ª</span>
  <span class="hljs-attr">"names"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"userName"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"sayHi"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æºç ä¸­çš„å˜é‡/å‡½æ•°ååˆ—è¡¨</span>
  <span class="hljs-attr">"mappings"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"AAAA,MAAMA,SAAW,QACjB,SAASC,QACP,MAAO,MAAMD,UACf"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æ ¸å¿ƒæ˜ å°„è§„åˆ™ï¼ˆBase64 VLQ ç¼–ç ï¼‰</span>
  <span class="hljs-attr">"sourcesContent"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-comment">// å¯é€‰ï¼šå­˜å‚¨æºç æ–‡æœ¬ï¼Œè§£ææ—¶æ— éœ€é¢å¤–è¯»å–æºç </span>
    <span class="hljs-string">"const userName = 'Alice';\nfunction sayHi() {\n  return `Hi ${userName}`;\n}\n"</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å„å­—æ®µæ ¸å¿ƒä½œç”¨ï¼š</p>

































<table><thead><tr><th>å­—æ®µ</th><th>æ ¸å¿ƒä½œç”¨</th></tr></thead><tbody><tr><td><code>version</code></td><td>å›ºå®šç‰ˆæœ¬å·ï¼Œç¡®ä¿è§£æå™¨å…¼å®¹</td></tr><tr><td><code>file</code></td><td>å…³è”çš„å‹ç¼©äº§ç‰©æ–‡ä»¶å</td></tr><tr><td><code>sources</code></td><td>æ˜ å°„çš„åŸå§‹æºç è·¯å¾„ï¼Œæ”¯æŒå¤šä¸ªæ–‡ä»¶ï¼ˆå¦‚å¤šå…¥å£é¡¹ç›®ï¼‰</td></tr><tr><td><code>names</code></td><td>æºç ä¸­çš„å˜é‡/å‡½æ•°åï¼Œå‹ç¼©ååç§°é€šè¿‡æ­¤æ˜ å°„å›åŸå</td></tr><tr><td><code>mappings</code></td><td>æœ€æ ¸å¿ƒï¼šå­˜å‚¨"å‹ç¼©ä»£ç åæ ‡ â†” æºç åæ ‡"çš„æ˜ å°„è§„åˆ™ï¼ˆBase64 VLQ ç¼–ç ï¼‰</td></tr><tr><td><code>sourcesContent</code></td><td>å¯é€‰ï¼šå­˜å‚¨æºç æ–‡æœ¬ï¼Œè§£ææ—¶æ— éœ€é¢å¤–è¯»å–æºç æ–‡ä»¶</td></tr></tbody></table>
<h4 data-id="heading-8">2.2 mappings å­—æ®µï¼šBase64 VLQ æ˜ å°„é€»è¾‘ï¼ˆæ ¸å¿ƒï¼‰</h4>
<p><code>mappings</code> æ˜¯ SourceMap çš„çµé­‚ï¼Œå…¶æœ¬è´¨æ˜¯å°†ã€Œå‹ç¼©ä»£ç  â†” æºç ã€çš„åæ ‡æ˜ å°„å…³ç³»ï¼Œè½¬æ¢æˆä¸€ç»„æ•°å­—ï¼Œå†é€šè¿‡ VLQ ç¼–ç å‹ç¼©é•¿åº¦ï¼Œæœ€ç»ˆè½¬æˆ Base64 å­—ç¬¦ã€‚æˆ‘ä»¬ä»¥å®é™…çš„ <code>z-index.js</code> å‹ç¼©åœºæ™¯æ‹†è§£å…¨ç¨‹ï¼š</p>
<h5 data-id="heading-9">åœºæ™¯å‡†å¤‡</h5>
<p><strong>å‰ç½®å‡†å¤‡</strong>ï¼šå…¨å±€å®‰è£… terserï¼ˆ<code>pnpm install terser -g</code>ï¼‰</p>
<ul>
<li>
<p><strong>æºç </strong>ï¼ˆz-index.jsï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> userName = <span class="hljs-string">'Alice'</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">sayHi</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`Hi <span class="hljs-subst">${userName}</span>`</span>;
}
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨ terser å‹ç¼©</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">terser z-index.js -o z-index.min.js --source-map <span class="hljs-string">"url='z-index.min.js.map',includeSources=true,filename='z-index.min.js'"</span>
</code></pre>
<p>ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼š<code>z-index.min.js</code> å’Œ <code>z-index.min.js.map</code></p>
</li>
<li>
<p><strong>å‹ç¼©åçš„ä»£ç </strong>ï¼ˆz-index.min.jsï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> userName = <span class="hljs-string">'Alice'</span>;
<span class="hljs-keyword">function</span> <span class="hljs-title function_">sayHi</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`Hi <span class="hljs-subst">${userName}</span>`</span>;
}
<span class="hljs-comment">//# sourceMappingURL=z-index.min.js.map</span>
</code></pre>
</li>
</ul>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"file"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"z-index.min.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"names"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"userName"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"sayHi"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"z-index.js"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"sourcesContent"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"const userName = 'Alice';\nfunction sayHi() {\n  return `Hi ${userName}`;\n}\n"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"mappings"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"AAAA,MAAMA,SAAW,QACjB,SAASC,QACP,MAAO,MAAMD,UACf"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"ignoreList"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>































































































<table><thead><tr><th>æ˜ å°„æ®µ</th><th>Base64 VLQ</th><th>è§£ç åï¼ˆç›¸å¯¹åç§»ï¼‰</th><th>å‹ç¼©ä»£ç ä½ç½®</th><th>æºç ä½ç½®</th><th>å¯¹åº”å­—ç¬¦/å†…å®¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>AAAA</code></td><td>[0,0,0,0]</td><td>åˆ—:0, æ–‡ä»¶:0, è¡Œ:0, åˆ—:0</td><td>ç¬¬1è¡Œ, ç¬¬0åˆ—</td><td>z-index.js ç¬¬1è¡Œ, ç¬¬0åˆ—</td><td><code>c</code> (const)</td><td>èµ·å§‹ä½ç½®</td></tr><tr><td><code>MAAMA</code></td><td>[6,0,0,6,0]</td><td>åˆ—:+6, æ–‡ä»¶:+0, è¡Œ:+0, åˆ—:+6, åç§°:+0</td><td>ç¬¬1è¡Œ, ç¬¬6åˆ—</td><td>z-index.js ç¬¬1è¡Œ, ç¬¬6åˆ—</td><td><code>u</code> (userName)</td><td>userName å˜é‡åå¼€å§‹</td></tr><tr><td><code>SAAW</code></td><td>[9,0,0,9]</td><td>åˆ—:+9, æ–‡ä»¶:+0, è¡Œ:+0, åˆ—:+9</td><td>ç¬¬1è¡Œ, ç¬¬15åˆ—</td><td>z-index.js ç¬¬1è¡Œ, ç¬¬17åˆ—</td><td><code>A</code> (Alice)</td><td>'Alice' å­—ç¬¦ä¸²å¼€å§‹</td></tr><tr><td><code>QACjB</code></td><td>[1,0,1,3,1]</td><td>åˆ—:+1, æ–‡ä»¶:+0, è¡Œ:+1, åˆ—:+3, åç§°:+1</td><td>ç¬¬1è¡Œ, ç¬¬16åˆ—</td><td>z-index.js ç¬¬2è¡Œ, ç¬¬0åˆ—</td><td><code>f</code> (function)</td><td>function å…³é”®å­—</td></tr><tr><td><code>SAASC</code></td><td>[9,0,0,9,1]</td><td>åˆ—:+9, æ–‡ä»¶:+0, è¡Œ:+0, åˆ—:+9, åç§°:+1</td><td>ç¬¬1è¡Œ, ç¬¬25åˆ—</td><td>z-index.js ç¬¬2è¡Œ, ç¬¬9åˆ—</td><td><code>s</code> (sayHi)</td><td>sayHi å‡½æ•°å</td></tr><tr><td><code>QACP</code></td><td>[1,0,0,1]</td><td>åˆ—:+1, æ–‡ä»¶:+0, è¡Œ:+0, åˆ—:+1</td><td>ç¬¬1è¡Œ, ç¬¬26åˆ—</td><td>z-index.js ç¬¬2è¡Œ, ç¬¬15åˆ—</td><td><code>(</code></td><td>å‡½æ•°å‚æ•°æ‹¬å·</td></tr><tr><td><code>MAAO</code></td><td>[6,0,0,6]</td><td>åˆ—:+6, æ–‡ä»¶:+0, è¡Œ:+0, åˆ—:+6</td><td>ç¬¬1è¡Œ, ç¬¬32åˆ—</td><td>z-index.js ç¬¬2è¡Œ, ç¬¬16åˆ—</td><td><code>{</code></td><td>å‡½æ•°ä½“å¼€å§‹</td></tr><tr><td><code>MAAMD</code></td><td>[6,0,0,6,0]</td><td>åˆ—:+6, æ–‡ä»¶:+0, è¡Œ:+0, åˆ—:+6, åç§°:+0</td><td>ç¬¬1è¡Œ, ç¬¬38åˆ—</td><td>z-index.js ç¬¬3è¡Œ, ç¬¬2åˆ—</td><td><code>r</code> (return)</td><td>return å…³é”®å­—</td></tr><tr><td><code>UACf</code></td><td>[10,0,0,10]</td><td>åˆ—:+10, æ–‡ä»¶:+0, è¡Œ:+0, åˆ—:+10</td><td>ç¬¬1è¡Œ, ç¬¬48åˆ—</td><td>z-index.js ç¬¬3è¡Œ, ç¬¬9åˆ—</td><td><code>`</code></td><td>æ¨¡æ¿å­—ç¬¦ä¸²å¼€å§‹</td></tr></tbody></table>
<h5 data-id="heading-10">Step 1ï¼šå®šä¹‰æ˜ å°„æ•°å­—ç»„ï¼ˆ5ä¸ªæ ¸å¿ƒæ•°å­—ï¼‰</h5>
<p>SourceMap è§„å®šï¼Œæ¯ä¸€ç»„æ˜ å°„å…³ç³»ç”¨ <strong>5ä¸ªç›¸å¯¹åç§»æ•°å­—</strong> è¡¨ç¤ºï¼ˆå2ä¸ªå¯é€‰ï¼‰ï¼Œ"ç›¸å¯¹åç§»"æ˜¯æ ¸å¿ƒä¼˜åŒ–ï¼ˆé¿å…å­˜å‚¨å¤§æ•°ï¼‰ï¼š</p>
<p>ä»¥å®é™…çš„ <code>z-index.js</code> ä¸ºä¾‹ï¼Œæˆ‘ä»¬çœ‹å‡ ä¸ªå…³é”®æ˜ å°„æ®µï¼š</p>









































<table><thead><tr><th>æ•°å­—ä½ç½®</th><th>å«ä¹‰ï¼ˆç›¸å¯¹å‰ä¸€æ®µçš„åç§»é‡ï¼‰</th><th>MAAMAï¼ˆuserNameï¼‰</th><th>SAASCï¼ˆsayHiï¼‰</th></tr></thead><tbody><tr><td>ç¬¬1ä¸ª</td><td>å‹ç¼©ä»£ç çš„åˆ—å·åç§»</td><td>+6</td><td>+9</td></tr><tr><td>ç¬¬2ä¸ª</td><td>æºç åœ¨ sources æ•°ç»„çš„ç´¢å¼•</td><td>0</td><td>0</td></tr><tr><td>ç¬¬3ä¸ª</td><td>æºç è¡Œå·åç§»</td><td>0</td><td>0</td></tr><tr><td>ç¬¬4ä¸ª</td><td>æºç åˆ—å·åç§»</td><td>+6</td><td>+9</td></tr><tr><td>ç¬¬5ä¸ª</td><td>å˜é‡ååœ¨ names æ•°ç»„çš„ç´¢å¼•</td><td>0 (userName)</td><td>1 (sayHi)</td></tr></tbody></table>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>MAAMA</code> æ˜ å°„åˆ° <code>userName</code>ï¼šå‹ç¼©ä»£ç åˆ—å·+6ï¼Œæºç åˆ—å·+6ï¼Œåç§°ç´¢å¼•0 â†’ <code>names[0] = "userName"</code></li>
<li><code>SAASC</code> æ˜ å°„åˆ° <code>sayHi</code>ï¼šå‹ç¼©ä»£ç åˆ—å·+9ï¼Œæºç åˆ—å·+9ï¼Œåç§°ç´¢å¼•1 â†’ <code>names[1] = "sayHi"</code></li>
</ul>
<h5 data-id="heading-11">Step 2ï¼šVLQ ç¼–ç  + Base64 è½¬æ¢</h5>
<p>VLQ æ˜¯æŠŠ SourceMap é‡Œçš„ â€œç›¸å¯¹åç§»æ•°å­—â€ è½¬æˆ 6ä½â€œçŸ­äºŒè¿›åˆ¶â€ï¼ŒBase64 æ˜¯æŠŠ 6ä½â€œçŸ­äºŒè¿›åˆ¶â€ è½¬æˆ â€œå¯è¯»å­—ç¬¦â€ï¼Œä¸¤è€…é…åˆè®© mappings å­—æ®µæ—¢çŸ­åˆèƒ½è§£æã€‚</p>
<p>VLQ ç¼–ç çš„æ ¸å¿ƒä¼˜åŠ¿æ˜¯<strong>ç”¨æ›´å°‘çš„å­—ç¬¦è¡¨ç¤ºæ•°å­—</strong>ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå°æ•°å­—ï¼ˆ0-63ï¼‰åªéœ€è¦1ä¸ªå­—ç¬¦ï¼Œ1 ä¸ªå­—ç¬¦é€šå¸¸å  8 ä½äºŒè¿›åˆ¶ï¼ˆ1 å­—èŠ‚ï¼‰ï¼ŒBase64 ç¼–ç æ—¶ï¼Œåªä½¿ç”¨è¿™ 8 ä½ä¸­çš„ä½ 6 ä½ï¼ˆé«˜ 2 ä½è¡¥ 0ï¼‰ï¼Œå› ä¸º 6 ä½äºŒè¿›åˆ¶åˆšå¥½èƒ½è¡¨ç¤º 0-63ï¼ŒåŒ¹é… Base64 çš„ 64 ä¸ªå­—ç¬¦ã€‚</p>

























<table><thead><tr><th>è§„åˆ™ç¼–å·</th><th>å¤§ç™½è¯è§„åˆ™</th><th>ä¸¾ä¾‹</th></tr></thead><tbody><tr><td>1</td><td>6 ä½äºŒè¿›åˆ¶é‡Œï¼Œæœ€å 1 ä½è¡¨ç¤ºæ­£è´Ÿï¼š0 = æ­£æ•°ï¼Œ1 = è´Ÿæ•°</td><td>æ•°å­— 6ï¼ˆæ­£æ•°ï¼‰â†’ æœ€å 1 ä½æ˜¯ 0ï¼›æ•°å­— - 6ï¼ˆè´Ÿæ•°ï¼‰â†’ æœ€å 1 ä½æ˜¯ 1</td></tr><tr><td>2</td><td>6 ä½äºŒè¿›åˆ¶é‡Œï¼Œç¬¬ä¸€ä½è¡¨ç¤ºæ˜¯å¦ç»­è¡Œï¼š0 = ç»“æŸï¼ˆ1 ä¸ªå­—ç¬¦å°±å¤Ÿï¼‰ï¼Œ1 = ç»§ç»­ï¼ˆéœ€è¦å¤šä¸ªå­—ç¬¦ï¼‰</td><td>æ•°å­— 6ï¼ˆå°æ•°å­—ï¼‰â†’ ç¬¬ä¸€ä½æ˜¯ 0ï¼›æ•°å­— 100ï¼ˆå¤§æ•°å­—ï¼‰â†’ ç¬¬ä¸€ä½æ˜¯ 1ï¼ˆéœ€è¦ 2 ä¸ªå­—ç¬¦ï¼‰</td></tr><tr><td>3</td><td>ä¸­é—´ 4 ä½å­˜å®é™…æ•°å­—ï¼ˆ0-15 çš„æ•°å­—ç”¨ä¸­é—´ 4 ä½å­˜å‚¨ï¼ŒåŠ ä¸Šç¬¦å·ä½å…± 5 ä½å¯è¡¨ç¤º 0-31ï¼‰</td><td>æ•°å­— 6 â†’ äºŒè¿›åˆ¶æ˜¯ <code>000110</code>ï¼ˆç¬¬5ä½=0ç»“æŸï¼Œç¬¬1-4ä½=0011è¡¨ç¤º3ï¼Œç¬¬0ä½=0è¡¨ç¤ºæ­£æ•°ï¼Œå®é™…ç¼–ç æ›´å¤æ‚ï¼‰</td></tr></tbody></table>
<h5 data-id="heading-12">Step 3ï¼šç»„è£… mappings å­—æ®µ</h5>
<p>mappings åˆ†éš”è§„åˆ™ï¼š</p>
<ul>
<li><code>,</code> åˆ†éš”åŒä¸€è¡Œå†…çš„ä¸åŒæ˜ å°„æ®µï¼›</li>
<li><code>;</code> åˆ†éš”ä¸åŒè¡Œçš„æ˜ å°„æ®µã€‚</li>
</ul>
<p><strong>å®é™…ä¾‹å­</strong>ï¼šç”±äº <code>z-index.js</code> å‹ç¼©ååªæœ‰1è¡Œï¼Œæ‰€ä»¥ mappings ä¸­æ²¡æœ‰åˆ†å·ï¼Œåªæœ‰é€—å·ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"mappings"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"AAAA,MAAMA,SAAW,QACjB,SAASC,QACP,MAAO,MAAMD,UACf"</span>
</code></pre>
<p>è¿™9ä¸ªæ˜ å°„æ®µéƒ½å¯¹åº”å‹ç¼©ä»£ç çš„ç¬¬1è¡Œï¼Œä½†æ˜ å°„åˆ°æºç çš„ä¸åŒä½ç½®ï¼š</p>
<ul>
<li><code>AAAA</code> â†’ æºç ç¬¬1è¡Œç¬¬0åˆ—ï¼ˆconstï¼‰</li>
<li><code>MAAMA</code> â†’ æºç ç¬¬1è¡Œç¬¬6åˆ—ï¼ˆuserNameï¼‰</li>
<li><code>SAAW</code> â†’ æºç ç¬¬1è¡Œç¬¬17åˆ—ï¼ˆAliceï¼‰</li>
<li><code>QACjB</code> â†’ æºç ç¬¬2è¡Œç¬¬0åˆ—ï¼ˆfunctionï¼Œæ³¨æ„è¡Œå·+1ï¼‰</li>
<li><code>SAASC</code> â†’ æºç ç¬¬2è¡Œç¬¬9åˆ—ï¼ˆsayHiï¼‰</li>
<li><code>QACP</code> â†’ æºç ç¬¬2è¡Œç¬¬15åˆ—ï¼ˆæ‹¬å·ï¼‰</li>
<li><code>MAAO</code> â†’ æºç ç¬¬2è¡Œç¬¬16åˆ—ï¼ˆå¤§æ‹¬å·ï¼‰</li>
<li><code>MAAMD</code> â†’ æºç ç¬¬3è¡Œç¬¬2åˆ—ï¼ˆreturnï¼Œæ³¨æ„è¡Œå·+1ï¼‰</li>
<li><code>UACf</code> â†’ æºç ç¬¬3è¡Œç¬¬9åˆ—ï¼ˆæ¨¡æ¿å­—ç¬¦ä¸²ï¼‰</li>
</ul>
<h5 data-id="heading-13">Step 4ï¼šåå‘è§£æéªŒè¯</h5>
<p><strong>å®é™…åœºæ™¯</strong>ï¼šè‹¥çº¿ä¸ŠæŠ¥é”™ <code>Uncaught ReferenceError: userName is not defined at z-index.min.js:1:25</code>ï¼Œè§£ææ­¥éª¤ï¼š</p>
<ol>
<li>
<p><strong>æ‰¾åˆ°å‹ç¼©ä»£ç ä½ç½®</strong>ï¼šç¬¬1è¡Œç¬¬25åˆ—ï¼ˆå‹ç¼©ä»£ç åªæœ‰1è¡Œï¼‰</p>
</li>
<li>
<p><strong>æŸ¥æ‰¾å¯¹åº”çš„æ˜ å°„æ®µ</strong>ï¼šéå† mappings ä¸­çš„æ˜ å°„æ®µï¼Œæ‰¾åˆ°ç¬¬25åˆ—å¯¹åº”çš„æ˜ å°„æ®µ <code>SAASC</code></p>
</li>
<li>
<p><strong>Base64 VLQ è§£ç </strong>ï¼š<code>SAASC</code> â†’ <code>[9,0,0,9,1]</code>ï¼ˆç›¸å¯¹åç§»ï¼‰</p>
</li>
<li>
<p><strong>è®¡ç®—ç»å¯¹ä½ç½®</strong>ï¼ˆç´¯ç§¯å‰é¢çš„åç§»ï¼‰ï¼š</p>
<ul>
<li>å‹ç¼©åˆ—å·ï¼š0 + 6 + 9 + 1 + 9 = 25 âœ…ï¼ˆåŒ¹é…æŠ¥é”™åˆ—å·ï¼‰</li>
<li>æºç æ–‡ä»¶ï¼š0 + 0 + 0 + 0 + 0 = 0 â†’ <code>z-index.js</code></li>
<li>æºç è¡Œå·ï¼š0 + 0 + 0 + 1 + 0 = 1 â†’ æºç ç¬¬2è¡Œï¼ˆæ³¨æ„ï¼šè¡Œå·ä»0å¼€å§‹ï¼Œæ‰€ä»¥+1åæ˜¯ç¬¬2è¡Œï¼‰</li>
<li>æºç åˆ—å·ï¼š0 + 6 + 9 + 3 + 9 = 27ï¼Œä½†å®é™…æ˜ å°„æ®µ <code>SAASC</code> çš„ç›¸å¯¹åç§»æ˜¯ <code>[9,0,0,9,1]</code>ï¼Œç´¯ç§¯è®¡ç®—åå¯¹åº”æºç ç¬¬2è¡Œç¬¬9åˆ— âœ…</li>
<li>åç§°ç´¢å¼•ï¼š0 + 0 + 0 + 1 + 1 = 2ï¼Œä½†å®é™…æ˜¯ <code>names[1] = "sayHi"</code> âœ…ï¼ˆç›¸å¯¹åç§»ç´¯ç§¯ï¼‰</li>
</ul>
</li>
<li>
<p><strong>æœ€ç»ˆç»“æœ</strong>ï¼šæŠ¥é”™ä½ç½® <code>z-index.min.js:1:25</code> å¯¹åº”æºç  <code>z-index.js:2:9</code> çš„ <code>sayHi</code> å‡½æ•°åä½ç½®ã€‚</p>
</li>
</ol>
<p><strong>å…³é”®ç‚¹</strong>ï¼šè™½ç„¶å‹ç¼©ä»£ç åªæœ‰1è¡Œï¼Œä½† SourceMap èƒ½å‡†ç¡®æ˜ å°„åˆ°æºç çš„ç¬¬2è¡Œç¬¬9åˆ—ï¼Œè¿™å°±æ˜¯ SourceMap çš„æ ¸å¿ƒä»·å€¼ï¼</p>
<h3 data-id="heading-14">ä¸‰ã€çº¿ä¸Šç›‘æ§ï¼šSourceMap å®‰å…¨è½åœ°å®è·µ</h3>
<p>ç”Ÿäº§ç¯å¢ƒä¸èƒ½ç›´æ¥æš´éœ² SourceMap æ–‡ä»¶ï¼ˆé¿å…æºç æ³„éœ²ï¼‰ï¼Œæ ¸å¿ƒæ–¹æ¡ˆæ˜¯ã€Œç¦»çº¿è§£æã€â€”â€”å°† <code>.map</code> æ–‡ä»¶å­˜å‚¨åˆ°å†…ç½‘/ç›‘æ§å¹³å°åå°ï¼Œçº¿ä¸ŠæŠ¥é”™æ—¶æ”¶é›†"å‹ç¼©ä»£ç åæ ‡"ï¼Œåå°ç¦»çº¿è§£æã€‚</p>
<h4 data-id="heading-15">3.1 æ ¸å¿ƒåŸåˆ™</h4>
<ul>
<li>
<p>ä¸å°† <code>.map</code> æ–‡ä»¶éƒ¨ç½²åˆ° CDNï¼ˆå‰ç«¯å¯è®¿é—®çš„ä½ç½®ï¼‰ï¼›</p>
</li>
<li>
<p>å°† <code>.map</code> æ–‡ä»¶å­˜å‚¨åˆ°å†…ç½‘/ç›‘æ§å¹³å°åå°ï¼›</p>
</li>
<li>
<p>çº¿ä¸ŠæŠ¥é”™æ—¶ï¼Œä»…è§£æ"å‹ç¼©ä»£ç åæ ‡ â†’ æºç åæ ‡"ï¼Œä¸æš´éœ²æºç å†…å®¹ã€‚</p>
</li>
</ul>
<h4 data-id="heading-16">3.2 ç»“åˆ Sentry å®ç°çº¿ä¸ŠæŠ¥é”™è§£æï¼ˆä¸»æµæ–¹æ¡ˆï¼‰</h4>
<p>Sentry æ˜¯å‰ç«¯ä¸»æµçš„é”™è¯¯ç›‘æ§å¹³å°ï¼Œæ”¯æŒ SourceMap ä¸Šä¼ å’Œè‡ªåŠ¨è§£æï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<h5 data-id="heading-17">æ­¥éª¤1ï¼šé¡¹ç›®é›†æˆ Sentry</h5>
<p>åœ¨é¡¹ç›®å…¥å£æ–‡ä»¶ä¸­å¼•å…¥ Sentryï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é¡¹ç›®å…¥å£æ–‡ä»¶</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">Sentry</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@sentry/browser'</span>;

<span class="hljs-title class_">Sentry</span>.<span class="hljs-title function_">init</span>({
  <span class="hljs-attr">dsn</span>: <span class="hljs-string">'ä½ çš„ Sentry DSN åœ°å€'</span>,
  <span class="hljs-attr">release</span>: <span class="hljs-string">'v1.0.0'</span>, <span class="hljs-comment">// ç‰ˆæœ¬å·ï¼Œéœ€ä¸ SourceMap ä¸Šä¼ æ—¶ä¸€è‡´</span>
});
</code></pre>
<h5 data-id="heading-18">æ­¥éª¤2ï¼šä¸Šä¼  SourceMap åˆ° Sentry</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£… Sentry CLI</span>
pnpm install -g @sentry/cli

<span class="hljs-comment"># ä¸Šä¼  SourceMapï¼ˆæŒ‡å®šç‰ˆæœ¬å·ï¼Œä¸ä»£ç å‘å¸ƒç‰ˆæœ¬ä¸€è‡´ï¼‰</span>
sentry-cli releases files v1.0.0 upload-sourcemaps ./dist --url-prefix <span class="hljs-string">"~/static/js"</span>
</code></pre>
<p>å…³é”®å‚æ•°ï¼š</p>
<ul>
<li>
<p><code>release</code>ï¼šç‰ˆæœ¬å·ï¼Œç¡®ä¿ä»£ç ä¸ SourceMap ä¸€ä¸€å¯¹åº”ï¼›</p>
</li>
<li>
<p><code>url-prefix</code>ï¼šå‹ç¼©ä»£ç åœ¨çº¿ä¸Šçš„è®¿é—®è·¯å¾„ï¼ˆå¦‚ <code>https://xxx.com/static/js/z-index.min.js</code>ï¼‰ã€‚</p>
</li>
</ul>
<h5 data-id="heading-19">æ­¥éª¤3ï¼šæ•ˆæœï¼šè‡ªåŠ¨è§£ææŠ¥é”™åˆ°æºç </h5>
<p>çº¿ä¸ŠæŠ¥é”™åï¼ŒSentry ä¼šè‡ªåŠ¨å°†ã€Œå‹ç¼©ä»£ç åæ ‡ã€è§£æä¸ºã€Œæºç æ–‡ä»¶+è¡Œå·+åˆ—å·ã€ï¼Œç¤ºä¾‹ï¼š</p>
<blockquote>
<p>Uncaught ReferenceError: sayHi is not defined at z-index.js:2:9</p>
</blockquote>
<h4 data-id="heading-20">3.3 æ‰‹åŠ¨ç¦»çº¿è§£æï¼ˆè‡ªå®šä¹‰ç›‘æ§å¹³å°ï¼‰</h4>
<p>è‹¥ä¸ç”¨ Sentryï¼Œå¯é€šè¿‡ <code>source-map</code> åº“æ‰‹åŠ¨è§£æï¼Œç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> { <span class="hljs-title class_">SourceMapConsumer</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'source-map'</span>);

<span class="hljs-comment">// 1. è¯»å– SourceMap æ–‡ä»¶ï¼ˆå†…ç½‘å­˜å‚¨ï¼‰</span>
<span class="hljs-keyword">const</span> rawMap = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'z-index.min.js.map'</span>, <span class="hljs-string">'utf8'</span>);

<span class="hljs-comment">// 2. è§£æå‹ç¼©ä»£ç æŠ¥é”™åæ ‡</span>
<span class="hljs-comment">// å‡è®¾çº¿ä¸ŠæŠ¥é”™ï¼šUncaught ReferenceError: userName is not defined at z-index.min.js:1:25</span>
<span class="hljs-title class_">SourceMapConsumer</span>.<span class="hljs-title function_">with</span>(rawMap, <span class="hljs-literal">null</span>, <span class="hljs-function"><span class="hljs-params">consumer</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> originalPos = consumer.<span class="hljs-title function_">originalPositionFor</span>({
    <span class="hljs-attr">line</span>: <span class="hljs-number">1</span>, <span class="hljs-comment">// å‹ç¼©åè¡Œå·ï¼ˆå‹ç¼©ä»£ç åªæœ‰1è¡Œï¼‰</span>
    <span class="hljs-attr">column</span>: <span class="hljs-number">25</span>, <span class="hljs-comment">// å‹ç¼©ååˆ—å·ï¼ˆå¯¹åº” sayHi å‡½æ•°çš„ä½ç½®ï¼‰</span>
  });
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æºç ä½ç½®ï¼š'</span>, originalPos);
  <span class="hljs-comment">// è¾“å‡ºï¼š{ source: 'z-index.js', line: 2, column: 9, name: 'sayHi' }</span>

  <span class="hljs-comment">// 3. è·å–æºç å†…å®¹ï¼ˆå¦‚æœ SourceMap åŒ…å« sourcesContentï¼‰</span>
  <span class="hljs-keyword">const</span> sourceContent = consumer.<span class="hljs-title function_">sourceContentFor</span>(<span class="hljs-string">'z-index.js'</span>);
  <span class="hljs-keyword">if</span> (sourceContent) {
    <span class="hljs-keyword">const</span> lines = sourceContent.<span class="hljs-title function_">split</span>(<span class="hljs-string">'\n'</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æºç å†…å®¹ï¼š'</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç¬¬<span class="hljs-subst">${originalPos.line}</span>è¡Œ: <span class="hljs-subst">${lines[originalPos.line - <span class="hljs-number">1</span>]}</span>`</span>);
    <span class="hljs-comment">// è¾“å‡ºï¼šç¬¬2è¡Œ: function sayHi() {</span>
  }
});
</code></pre>
<h3 data-id="heading-21">å››ã€SourceMap å¸¸è§é…ç½®ä¸é¿å‘</h3>
<h4 data-id="heading-22">4.1 ä¸åŒç¯å¢ƒçš„ SourceMap é…ç½®</h4>

























<table><thead><tr><th>ç¯å¢ƒ</th><th>æ¨èé…ç½®ï¼ˆWebpack/Viteï¼‰</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>å¼€å‘ç¯å¢ƒ</td><td><code>devtool: 'eval-cheap-module-source-map'</code></td><td>æ„å»ºå¿«ï¼Œæ”¯æŒè¡Œ/åˆ—æ˜ å°„ï¼Œä¸æš´éœ²æºç </td></tr><tr><td>æµ‹è¯•ç¯å¢ƒ</td><td><code>devtool: 'source-map'</code></td><td>å®Œæ•´æ˜ å°„ï¼Œä¾¿äºæµ‹è¯•å®šä½é—®é¢˜</td></tr><tr><td>ç”Ÿäº§ç¯å¢ƒ</td><td><code>devtool: 'hidden-source-map'</code></td><td>ä¸ç”Ÿæˆ <code>sourceMappingURL</code> æ³¨é‡Šï¼Œä»…åå°å¯è§£æï¼Œé¿å…æºç æ³„éœ²</td></tr></tbody></table>
<h4 data-id="heading-23">4.2 å¸¸è§å‘ç‚¹</h4>
<ol>
<li>
<p><strong>ç‰ˆæœ¬ä¸å…¼å®¹</strong>ï¼šç¡®ä¿ SourceMap ç‰ˆæœ¬ä¸º 3ï¼ˆä¸»æµè§£æå™¨ä»…æ”¯æŒ v3ï¼‰ï¼›</p>
</li>
<li>
<p><strong>è·¯å¾„ä¸ä¸€è‡´</strong>ï¼š<code>sources</code> å­—æ®µçš„è·¯å¾„éœ€ä¸çº¿ä¸Šæºç è·¯å¾„åŒ¹é…ï¼Œå¦åˆ™è§£æå¤±è´¥ï¼›</p>
</li>
<li>
<p><strong>æºç å†…å®¹ç¼ºå¤±</strong>ï¼šè‹¥æœªé…ç½® <code>sourcesContent</code>ï¼Œéœ€ç¡®ä¿è§£ææ—¶èƒ½è¯»å–åˆ°æºç æ–‡ä»¶ï¼›</p>
</li>
<li>
<p><strong>å‹ç¼©å·¥å…·å…¼å®¹</strong>ï¼šä¸åŒå·¥å…·ï¼ˆTerser/Webpackï¼‰ç”Ÿæˆçš„ SourceMap ç•¥æœ‰å·®å¼‚ï¼Œä¼˜å…ˆç”¨é¡¹ç›®æ„å»ºå·¥å…·è‡ªå¸¦çš„ SourceMap ç”Ÿæˆèƒ½åŠ›ã€‚</p>
</li>
</ol>
<h3 data-id="heading-24">äº”ã€æ€»ç»“</h3>
<p>SourceMap æ˜¯å‰ç«¯çº¿ä¸Šé—®é¢˜å®šä½çš„"åˆ©å™¨"ï¼Œå…¶æ ¸å¿ƒæ˜¯é€šè¿‡ Base64 VLQ ç¼–ç çš„ <code>mappings</code> å­—æ®µï¼Œå°†ã€Œå‹ç¼©ä»£ç åæ ‡ã€ä¸ã€Œæºç åæ ‡ã€çš„æ˜ å°„å…³ç³»å‹ç¼©å­˜å‚¨ï¼›è§£ææ—¶åå‘è§£ç ï¼Œå°±èƒ½ä»å‹ç¼©ä»£ç çš„æŠ¥é”™ä½ç½®ç²¾å‡†å®šä½åˆ°æºç ã€‚</p>
<p>ç”Ÿäº§ç¯å¢ƒè½åœ°çš„å…³é”®æ˜¯ã€Œç¦»çº¿è§£æã€â€”â€”æ—¢ä¸æš´éœ² SourceMap æ–‡ä»¶å¯¼è‡´æºç æ³„éœ²ï¼Œåˆèƒ½é€šè¿‡ç›‘æ§å¹³å°ï¼ˆå¦‚ Sentryï¼‰æˆ–è‡ªå®šä¹‰è„šæœ¬ï¼Œå®ç°å‹ç¼©ä»£ç æŠ¥é”™åˆ°æºç çš„ç²¾å‡†æ˜ å°„ï¼Œå¤§å¹…æå‡çº¿ä¸Šé—®é¢˜æ’æŸ¥æ•ˆç‡ã€‚</p>
<h4 data-id="heading-25">æ ¸å¿ƒè¦ç‚¹å›é¡¾</h4>
<ol>
<li>
<p>SourceMap æœ¬è´¨æ˜¯"åæ ‡æ˜ å°„è¡¨"ï¼Œè§£å†³å‹ç¼©ä»£ç è°ƒè¯•éš¾çš„é—®é¢˜ï¼›</p>
</li>
<li>
<p><code>mappings</code> æ˜¯æ ¸å¿ƒï¼Œé€šè¿‡"5ä¸ªç›¸å¯¹åç§»æ•°å­— â†’ VLQ ç¼–ç  â†’ Base64 å­—ç¬¦"å®ç°æ˜ å°„å…³ç³»çš„å‹ç¼©å­˜å‚¨ï¼›</p>
</li>
<li>
<p>ç”Ÿäº§ç¯å¢ƒéœ€ç¦»çº¿è§£æ SourceMapï¼Œé¿å…æºç æ³„éœ²ï¼›</p>
</li>
<li>
<p>Sentry æ˜¯ä¸»æµçš„ SourceMap é›†æˆæ–¹æ¡ˆï¼Œä¹Ÿå¯é€šè¿‡ <code>source-map</code> åº“æ‰‹åŠ¨è§£æã€‚</p>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ•°æ®-199 å†³ç­–æ ‘æ¨¡å‹è¯¦è§£ï¼šèŠ‚ç‚¹ç»“æ„ã€æ¡ä»¶æ¦‚ç‡è§†è§’ä¸é¦™å†œç†µè®¡ç®—]]></title>    <link>https://juejin.cn/post/7589166195798114331</link>    <guid>https://juejin.cn/post/7589166195798114331</guid>    <pubDate>2025-12-30T04:25:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589166195798114331" data-draft-id="7589194558288396326" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ•°æ®-199 å†³ç­–æ ‘æ¨¡å‹è¯¦è§£ï¼šèŠ‚ç‚¹ç»“æ„ã€æ¡ä»¶æ¦‚ç‡è§†è§’ä¸é¦™å†œç†µè®¡ç®—"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,æœºå™¨å­¦ä¹ "/> <meta itemprop="datePublished" content="2025-12-30T04:25:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­¦å­åº·"/> <meta itemprop="url" content="https://juejin.cn/user/149189314230039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ•°æ®-199 å†³ç­–æ ‘æ¨¡å‹è¯¦è§£ï¼šèŠ‚ç‚¹ç»“æ„ã€æ¡ä»¶æ¦‚ç‡è§†è§’ä¸é¦™å†œç†µè®¡ç®—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/149189314230039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­¦å­åº·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T04:25:39.000Z" title="Tue Dec 30 2025 04:25:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TL;DR</h2>
<ul>
<li>åœºæ™¯ï¼šæ¢³ç†åˆ†ç±»å†³ç­–æ ‘çš„ç»“æ„ã€å­¦ä¹ æµç¨‹ä¸â€œæ¡ä»¶æ¦‚ç‡åˆ†å¸ƒâ€è§£é‡Šï¼Œå¹¶ç»™å‡ºé¦™å†œç†µä»£ç å®ç°ã€‚</li>
<li>ç»“è®ºï¼šå†³ç­–æ ‘å¯è§†ä¸ºå¯¹åˆ†åŒºåŒºåŸŸä¸Šçš„ P(Y\mid X\in R_j) å»ºæ¨¡ï¼›åˆ’åˆ†ä¾æ®ç”±ä¸çº¯åº¦åº¦é‡ï¼ˆç†µ/åŸºå°¼/è¯¯åˆ†ç±»ç‡ï¼‰é©±åŠ¨ï¼Œè¿‡æ‹Ÿåˆéœ€é å‰ªææ§åˆ¶ã€‚</li>
<li>äº§å‡ºï¼šå†³ç­–æ ‘èŠ‚ç‚¹/æµç¨‹æ¡†æ¶ + æ¦‚ç‡è§£é‡Šé“¾è·¯ + é¦™å†œç†µå…¬å¼å¯¹ç…§ + Pandas ä»£ç å¯å¤ç”¨å®ç°ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9ee0fa944ee48b5bb114fe9d821395d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767673538&amp;x-signature=ZEBHe%2BY%2FjDYMa9KnT9VmrCIVFgA%3D" alt="å¤§æ•°æ®-199 å†³ç­–æ ‘æ¨¡å‹è¯¦è§£ï¼šèŠ‚ç‚¹ç»“æ„ã€æ¡ä»¶æ¦‚ç‡è§†è§’ä¸é¦™å†œç†µè®¡ç®—" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7b01efec5cc4c4799113b01fa99fffa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767673538&amp;x-signature=Irols8ymz6dRnmGyMMa9J%2Fp%2BmXA%3D" alt="å¤§æ•°æ®-199 å†³ç­–æ ‘æ¨¡å‹è¯¦è§£ï¼šèŠ‚ç‚¹ç»“æ„ã€æ¡ä»¶æ¦‚ç‡è§†è§’ä¸é¦™å†œç†µè®¡ç®—" loading="lazy"/></p>
<h2 data-id="heading-1">å†³ç­–æ ‘æ¨¡å‹</h2>
<ul>
<li>æ ‘æ¨¡å‹æ˜¯æœ‰ç›‘ç£å­¦ä¹ ç±»ç®—æ³•ä¸­åº”ç”¨å¹¿æ³›çš„ä¸€ç±»æ¨¡å‹ï¼ŒåŒæ—¶å¯åº”ç”¨ä¸åˆ†ç±»é—®é¢˜å’Œå›å½’é—®é¢˜ï¼Œå…¶ä¸­ç”¨äºè§£å†³åˆ†ç±»é—®é¢˜çš„æ ‘æ¨¡å‹å¸¸è¢«ç§°ä¸ºåˆ†ç±»æ ‘ï¼Œè€Œç”¨äºè§£å†³å›å½’ç±»é—®é¢˜çš„æ ‘æ¨¡å‹è¢«ç§°ä¸ºå›å½’æ ‘ã€‚</li>
<li>æ ‘æ¨¡å‹é€šè¿‡é€’å½’å¼åˆ‡å‰²çš„æ–¹æ³•æ¥å¯»æ‰¾æœ€ä½³åˆ†ç±»æ ‡å‡†ï¼Œè¿›è€Œæœ€ç»ˆå½¢æˆè§„åˆ™ã€‚</li>
<li>å…¶ç®—æ³•åŸç†è™½ç„¶ç®€å•ï¼Œä½†æ¨¡å‹æœ¬èº«ä½¿ç”¨é¢æå¹¿ï¼Œä¸”åœ¨åˆ†ç±»é—®é¢˜å’Œå›å½’é—®é¢˜ä¸Šå‡æœ‰è‰¯å¥½çš„è¡¨ç°ï¼Œå¤–åŠ ä½¿ç”¨ç®€å•ï¼Œæ— éœ€äººä¸ºè¿›è¡Œè¿‡å¤šå˜é‡è°ƒæ•´å’Œæ•°æ®é¢„å¤„ç†ï¼ŒåŒæ—¶ç”Ÿæˆè§„åˆ™æ¸…æ™°ï¼Œæ¨¡å‹æœ¬èº«å¯è§£é‡Šæ€§éå¸¸å¼ºï¼Œå› æ­¤åœ¨å„ä¸ªè¡Œä¸šå‡æœ‰å¹¿æ³›åº”ç”¨ã€‚</li>
<li>å†³ç­–æ ‘ï¼ˆDecision Treeï¼‰æ˜¯ä¸€ç§å®ç°åˆ†æ²»ç­–ç•¥çš„å±‚æ¬¡æ•°æ®ç»“æ„ï¼Œå®ƒæ˜¯ä¸€ç§æœ‰æ•ˆçš„éå‚æ•°å­¦ä¹ æ–¹æ³•ï¼Œå¹¶å¯ä»¥ç”¨äºåˆ†ç±»å’Œå›å½’ï¼Œæˆ‘ä»¬ä¸»è¦è®¨è®ºåˆ†ç±»çš„å†³ç­–æ ‘ã€‚</li>
<li>åˆ†ç±»å†³ç­–æ ‘æ¨¡å‹è¡¨ç¤ºä¸€ç§åŸºäºç‰¹å¾å¯¹å®ä¾‹è¿›è¡Œåˆ†ç±»çš„å±æ€§ç»“æ„ï¼ˆåŒ…æ‹¬äºŒå‰æ ‘å’Œå¤šå‰æ ‘ï¼‰ã€‚</li>
</ul>
<p>å†³ç­–æ ‘ç”±èŠ‚ç‚¹ï¼ˆNodeï¼‰å’Œæœ‰å‘è¾¹ï¼ˆDirected edgeï¼‰ç»„æˆï¼Œæ ‘ä¸­åŒ…å«ä¸‰ç§èŠ‚ç‚¹ï¼š</p>
<ul>
<li>æ ¹èŠ‚ç‚¹ï¼ˆRoot Nodeï¼‰ï¼šåŒ…å«æ ·æœ¬å…¨é›†ï¼Œæ²¡æœ‰å…¥è¾¹ï¼Œä½†æœ‰é›¶æ¡æˆ–å¤šæ¡å¤šè¾¹ã€‚</li>
<li>å†…éƒ¨èŠ‚ç‚¹ï¼ˆInternal Nodeï¼‰ï¼šå¯¹åº”äºå±æ€§æµ‹è¯•æ¡ä»¶ï¼Œæ°æœ‰ä¸€æ¡å…¥è¾¹ï¼Œå’Œä¸¤æ¡æˆ–å¤šæ¡å‡ºè¾¹ã€‚</li>
<li>å¶èŠ‚ç‚¹ï¼ˆLeaf Nodeï¼‰æˆ–ç»ˆèŠ‚ç‚¹ï¼ˆTerminal Nodeï¼‰ï¼šå¯¹åº”äºå†³ç­–ç»“æœï¼Œæ°æœ‰ä¸€æ¡å…¥è¾¹ï¼Œä½†æ²¡æœ‰å‡ºè¾¹ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d31d2ba663cf423a811ac4756a20cc8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767673538&amp;x-signature=NOSu7FpCWIH8ZYvrHrF4LMx%2FV7s%3D" alt="å†³ç­–æ ‘èŠ‚ç‚¹" loading="lazy"/></p>
<h2 data-id="heading-2">å†³ç­–æ ‘åŸºæœ¬æµç¨‹</h2>
<p>ä»æ ¹èŠ‚ç‚¹åˆ°æ¯ä¸ªå¶å­èŠ‚ç‚¹çš„è·¯å¾„å¯¹åº”äº†ä¸€ä¸ªåˆ¤å®šæµ‹è¯•åºåˆ—ï¼Œå…¶åŸºæœ¬æµç¨‹éµå¾ªäº†ç®€å•ä¸”ç›´è§‚çš„â€œåˆ†è€Œæ²»ä¹‹â€ç­–ç•¥ã€‚
ç”±æ­¤ï¼Œå±€éƒ¨åŒºåŸŸé€šè¿‡å°‘æ•°å‡ æ­¥é€’å½’åˆ†è£‚ç¡®å®šï¼Œæ¯ä¸ªå†³ç­–èŠ‚ç‚¹å®ç°ä¸€ä¸ªå…·æœ‰ç¦»æ•£è¾“å‡ºçš„å±æ€§æµ‹è¯•å‡½æ•°ï¼Œæ ‡è®°åˆ†æ”¯ã€‚
å‡è®¾ç»™å®šè®­ç»ƒé›†è¾“å…¥ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1368846751c64a81b1e90965d3d4c815~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767673538&amp;x-signature=V6CH2GCOJH2b8%2ByzAPxMvb2%2FNHM%3D" alt="å†³ç­–æ ‘åŸºæœ¬æµç¨‹" loading="lazy"/>
åœ¨æ¯ä¸ªèŠ‚ç‚¹åº”ç”¨ä¸€ä¸ªæµ‹è¯•ï¼Œå¹¶æ ¹æ®æµ‹è¯•çš„è¾“å‡ºç¡®å®šä¸€ä¸ªåˆ†æ”¯ï¼Œè¿™ä¸€è¿‡ç¨‹ä»è·ŸèŠ‚ç‚¹å¼€å§‹ï¼Œå¹¶é€’å½’çš„é‡å¤ï¼Œç›´è‡³åˆ°è¾¾ä¸€ä¸ªå¶å­èŠ‚ç‚¹ï¼Œè¿™æ˜¯ï¼Œè¯¥ leaf çš„å€¼å½¢æˆè¾“å‡ºã€‚</p>
<h2 data-id="heading-3">å†³ç­–ä¸æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒ</h2>
<p>å†³ç­–æ ‘æ˜¯ä¸€ç§åŸºäºæ¦‚ç‡ç»Ÿè®¡çš„æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œå…¶æœ¬è´¨å¯ä»¥ç†è§£ä¸ºåœ¨ç»™å®šå†³ç­–èŠ‚ç‚¹ä¸‹å¯¹ç±»åˆ«å˜é‡çš„æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒå»ºæ¨¡ã€‚å…·ä½“æ¥è¯´ï¼š</p>
<ol>
<li>æ¦‚ç‡åˆ†å¸ƒçš„å®šä¹‰ä¸åˆ’åˆ†ï¼š</li>
</ol>
<ul>
<li>å†³ç­–æ ‘å°†ç‰¹å¾ç©ºé—´ X åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªäº’ä¸é‡å çš„åŒºåŸŸ R1, R2,..., Rm</li>
<li>åœ¨æ¯ä¸ªåŒºåŸŸ Rj ä¸Šå®šä¹‰äº†ä¸€ä¸ªæ¡ä»¶æ¦‚ç‡åˆ†å¸ƒ P(Y|X âˆˆ Rj)</li>
<li>è¿™ä¸ªæ¦‚ç‡åˆ†å¸ƒå®šä¹‰åœ¨ç±»åˆ«å˜é‡ Y çš„æ‰€æœ‰å¯èƒ½å–å€¼ä¸Š</li>
</ul>
<ol start="2">
<li>æ ‘ç»“æ„çš„æ¦‚ç‡è§£é‡Šï¼š</li>
</ol>
<ul>
<li>æ ¹èŠ‚ç‚¹å¯¹åº”æ•´ä¸ªç‰¹å¾ç©ºé—´çš„åˆå§‹åˆ’åˆ†</li>
<li>æ¯ä¸ªå†…éƒ¨å†³ç­–èŠ‚ç‚¹ä»£è¡¨å¯¹å½“å‰åŒºåŸŸçš„è¿›ä¸€æ­¥ç»†åˆ†</li>
<li>éšç€ä»æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹çš„è·¯å¾„å»¶ä¼¸ï¼Œç‰¹å¾ç©ºé—´è¢«é€’å½’åœ°åˆ’åˆ†ä¸ºæ›´å°çš„å­åŒºåŸŸ</li>
<li>æœ€ç»ˆæ¯ä¸ªå¶èŠ‚ç‚¹å¯¹åº”ç‰¹å¾ç©ºé—´çš„ä¸€ä¸ªç‰¹å®šåŒºåŸŸ Rj</li>
</ul>
<ol start="3">
<li>æ¡ä»¶æ¦‚ç‡çš„ç‰¹æ€§ï¼š</li>
</ol>
<ul>
<li>åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œé€šè¿‡ç»Ÿè®¡è½å…¥æ¯ä¸ªåŒºåŸŸçš„æ ·æœ¬ç±»åˆ«åˆ†å¸ƒæ¥ä¼°è®¡ P(Y|X âˆˆ Rj)</li>
<li>é€šå¸¸æƒ…å†µä¸‹ï¼Œå¶èŠ‚ç‚¹ä¸Šçš„æ¡ä»¶æ¦‚ç‡ä¼šå‘ˆç°æ˜æ˜¾åå‘æ€§ï¼Œå³æŸä¸ªç±»åˆ«çš„æ¦‚ç‡æ˜¾è‘—é«˜äºå…¶ä»–ç±»åˆ«</li>
<li>ä¾‹å¦‚ï¼Œåœ¨äºŒåˆ†ç±»é—®é¢˜ä¸­ï¼ŒæŸä¸ªå¶èŠ‚ç‚¹å¯èƒ½å¾—åˆ° P(Y=1|X âˆˆ Rj)=0.85ï¼ŒP(Y=0|X âˆˆ Rj)=0.15</li>
</ul>
<ol start="4">
<li>åˆ†ç±»å†³ç­–è¿‡ç¨‹ï¼š</li>
</ol>
<ul>
<li>å¯¹äºæ–°æ ·æœ¬ xï¼Œå†³ç­–æ ‘ä¼šå°†å…¶è·¯ç”±åˆ°å¯¹åº”çš„å¶èŠ‚ç‚¹ï¼ˆåŒºåŸŸ Rjï¼‰</li>
<li>æ ¹æ®è¯¥èŠ‚ç‚¹çš„æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒï¼Œé‡‡ç”¨æœ€å¤§åéªŒæ¦‚ç‡(MAP)å‡†åˆ™è¿›è¡Œåˆ†ç±»ï¼š
yÌ‚ = argmax_y P(Y=y|X âˆˆ Rj)</li>
<li>è¿™æ„å‘³ç€å³ä½¿æŸä¸ªç±»åˆ«çš„æ¦‚ç‡ä¸æ˜¯100%ï¼Œå†³ç­–æ ‘ä»ä¼šå°†è¯¥æ ·æœ¬å¼ºè¡Œåˆ’åˆ†åˆ°æ¦‚ç‡æœ€å¤§çš„ç±»åˆ«</li>
</ul>
<ol start="5">
<li>å®é™…åº”ç”¨ç¤ºä¾‹ï¼š</li>
</ol>
<ul>
<li>åœ¨ä¿¡ç”¨è¯„åˆ†æ¨¡å‹ä¸­ï¼Œå†³ç­–æ ‘å¯èƒ½å°†"å¹´æ”¶å…¥&gt;50ä¸‡ä¸”è´Ÿå€ºç‡&lt;30%"çš„åŒºåŸŸåˆ†é…ç»™"ä½é£é™©"ç±»åˆ«ï¼Œæ¦‚ç‡ä¸º92%</li>
<li>åœ¨åŒ»ç–—è¯Šæ–­ä¸­ï¼ŒæŸä¸ªå¶èŠ‚ç‚¹å¯èƒ½è¡¨ç¤º"ä½“æ¸©&gt;38.5â„ƒä¸”ç™½ç»†èƒè®¡æ•°&gt;10^4"æ¡ä»¶ä¸‹ï¼Œæ‚£ç»†èŒæ€§è‚ºç‚çš„æ¦‚ç‡ä¸º78%</li>
</ul>
<p>è¿™ç§æ¦‚ç‡è§£é‡Šæ¡†æ¶ä¸ºç†è§£å†³ç­–æ ‘çš„å·¥ä½œåŸç†æä¾›äº†ç†è®ºåŸºç¡€ï¼Œä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆå†³ç­–æ ‘å®¹æ˜“åœ¨è®­ç»ƒæ•°æ®ä¸Šè¾¾åˆ°100%å‡†ç¡®ç‡ï¼ˆé€šè¿‡ä¸æ–­ç»†åˆ†ç›´åˆ°æ¯ä¸ªå¶èŠ‚ç‚¹åªåŒ…å«å•ä¸€ç±»åˆ«çš„æ ·æœ¬ï¼‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35fcbf6c03b34c5e9f5b15fa75e8dc5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767673538&amp;x-signature=yIrZGocUfrVJ0G%2BRtE%2BKtfwETmg%3D" alt="å†³ç­–æ ‘åˆ†å¸ƒ" loading="lazy"/>
å·¦å›¾è¡¨ç¤ºäº†ç‰¹å¾ç©ºé—´çš„ä¸€ä¸ªåˆ’åˆ†ï¼Œå‡å®šç°åœ¨åªæœ‰ W10 å’Œ W20 ä¸¤ä¸ªå†³ç­–ç‚¹ï¼Œç‰¹å¾ç©ºé—´è¢«å†³ç­–ç‚¹æ²¿è½´åˆ’åˆ†ï¼Œå¹¶ä¸”ç›¸ç»§åˆ’åˆ†ç›¸äº’æ­£äº¤ï¼Œæ¯ä¸ªå°çŸ©å½¢è¡¨ç¤ºä¸€ä¸ªåŒºåŸŸï¼Œç‰¹å¾ç©ºé—´ä¸Šçš„åŒºåŸŸæ„æˆäº†é›†åˆï¼ŒX å–å€¼ä¸ºåŒºåŸŸçš„é›†åˆã€‚
æˆ‘ä»¬åœ¨è¿™é‡Œåªå‡è®¾ä¸¤ç±»ï¼Œå³ Y çš„å–å€¼ä¸º æ–¹å—ã€åœ†åœˆã€‚å½“æŸä¸ªåŒºåŸŸ C çš„æ¡ä»¶æ¦‚ç‡åˆ†å¸ƒæ»¡è¶³ Pï¼ˆY=åœ†åœˆï½œX=Cï¼‰&gt; 0.5 æ—¶ï¼Œåˆ™è®¤ä¸ºè¿™ä¸ªåŒºåŸŸå±äºåœ†åœˆç±»ï¼Œå³è½åœ¨è¿™ä¸ªåŒºåŸŸçš„å®ä¾‹éƒ½è¢«è§†ä¸ºè¯¥ç±»ã€‚
å³å›¾ä¸ºå¯¹åº”äºæ¦‚ç‡åˆ†å¸ƒçš„å†³ç­–æ ‘ï¼Œå¦‚æœè¾“å…¥ç»´æ˜¯ Xn æ˜¯ç¦»æ•£çš„ï¼Œå– N ä¸ªå¯èƒ½çš„å€¼ä¹‹ä¸€ï¼Œåˆ™è¯¥å†³ç­–èŠ‚ç‚¹æ£€æŸ¥ Xn çš„å€¼ï¼Œå¹¶å–ç›¸åº”åˆ†æ”¯ï¼Œå®ç°ä¸€ä¸ª n è·¯åˆ’åˆ†ã€‚å› æ­¤ï¼Œå¦‚æœå†³ç­–èŠ‚ç‚¹å…·æœ‰ç¦»æ•£åˆ†æ”¯ï¼Œæ•°å€¼è¾“å…¥åº”å½“ç¦»æ•£åŒ–ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95fd881905594d24b20cf7ac193c1130~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767673538&amp;x-signature=qc6ppc%2FRqhE2IudFy6ELg7Im6f8%3D" alt="å…¬å¼çš„è§£é‡Š" loading="lazy"/></p>
<h2 data-id="heading-4">å­¦ä¹ ç®—æ³•</h2>
<p>å†³ç­–æ ‘å­¦ä¹ æ˜¯ä¸€ç§é€šè¿‡å½’çº³è®­ç»ƒæ•°æ®é›†æ¥æ„å»ºåˆ†ç±»è§„åˆ™çš„æœºå™¨å­¦ä¹ æ–¹æ³•ï¼Œä¹Ÿç§°ä¸º"æ ‘å½’çº³"è¿‡ç¨‹ã€‚è¿™ä¸€è¿‡ç¨‹å…·æœ‰ä»¥ä¸‹å‡ ä¸ªå…³é”®ç‰¹å¾ï¼š</p>
<ol>
<li>æ¨¡å‹é€‰æ‹©åŸåˆ™</li>
</ol>
<ul>
<li>å¯¹äºåŒä¸€ä¸ªè®­ç»ƒæ•°æ®é›†ï¼Œå¯èƒ½å­˜åœ¨æ— æ•°æ£µèƒ½å¤Ÿå®Œç¾åˆ†ç±»çš„å†³ç­–æ ‘ã€‚æˆ‘ä»¬è¿½æ±‚çš„æ˜¯å…¶ä¸­"æœ€å°"çš„æ ‘ï¼Œè¿™é‡Œçš„"æœ€å°"é€šå¸¸é€šè¿‡ä¸¤ç§æ–¹å¼è¡¡é‡ï¼š
<ul>
<li>æ ‘çš„èŠ‚ç‚¹æ€»æ•°ï¼ˆåŒ…æ‹¬å†…éƒ¨èŠ‚ç‚¹å’Œå¶èŠ‚ç‚¹ï¼‰</li>
<li>å†³ç­–èŠ‚ç‚¹çš„å¤æ‚æ€§ï¼ˆå¦‚åˆ’åˆ†æ¡ä»¶çš„å¤æ‚ç¨‹åº¦ï¼‰</li>
</ul>
</li>
<li>ä»æ¦‚ç‡è§’åº¦è§£é‡Šï¼Œå†³ç­–æ ‘å®é™…ä¸Šæ˜¯åœ¨ä¼°è®¡æ¡ä»¶æ¦‚ç‡æ¨¡å‹ã€‚åœ¨ç‰¹å¾ç©ºé—´åˆ’åˆ†ä¸‹ï¼Œå­˜åœ¨æ— æ•°ä¸ªå¯èƒ½çš„æ¡ä»¶æ¦‚ç‡æ¨¡å‹ï¼Œæˆ‘ä»¬é€‰æ‹©çš„æ ‡å‡†æ˜¯ï¼š
<ul>
<li>å¯¹è®­ç»ƒæ•°æ®å…·æœ‰è‰¯å¥½çš„æ‹Ÿåˆåº¦</li>
<li>åŒæ—¶å…·å¤‡è‰¯å¥½çš„æ³›åŒ–èƒ½åŠ›ï¼ˆå¯¹æœªçŸ¥æ•°æ®çš„é¢„æµ‹å‡†ç¡®æ€§ï¼‰</li>
</ul>
</li>
</ul>
<ol start="2">
<li>ç®—æ³•æ‰§è¡Œè¿‡ç¨‹</li>
</ol>
<ul>
<li>ç®—æ³•å¼€å§‹æ—¶ï¼Œæ•´ä¸ªè®­ç»ƒæ•°æ®é›†ä½äºæ ¹èŠ‚ç‚¹</li>
<li>åœ¨æ¯ä¸ªåˆ’åˆ†æ­¥éª¤ä¸­ï¼Œç®—æ³•ä¼šï¼š
<ul>
<li>å¯¹äºè¿ç»­å€¼å±æ€§ï¼šå¯»æ‰¾æœ€ä¼˜åˆ†å‰²ç‚¹å°†æ•°æ®åˆ’åˆ†ä¸ºä¸¤ä¸ªå­é›†</li>
<li>å¯¹äºç¦»æ•£å€¼å±æ€§ï¼šæ ¹æ®å±æ€§å€¼å°†æ•°æ®åˆ’åˆ†ä¸ºNä¸ªå­é›†ï¼ˆNä¸ºå±æ€§å–å€¼ä¸ªæ•°ï¼‰</li>
</ul>
</li>
<li>åˆ’åˆ†æ ‡å‡†é€šå¸¸åŸºäºï¼š
<ul>
<li>ä¿¡æ¯å¢ç›Šï¼ˆID3ç®—æ³•ï¼‰</li>
<li>ä¿¡æ¯å¢ç›Šæ¯”ï¼ˆC4.5ç®—æ³•ï¼‰</li>
<li>åŸºå°¼æŒ‡æ•°ï¼ˆCARTç®—æ³•ï¼‰</li>
</ul>
</li>
<li>é€’å½’åœ°å¯¹æ¯ä¸ªå­é›†é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°æ»¡è¶³ä»¥ä¸‹ä»»ä¸€åœæ­¢æ¡ä»¶ï¼š
<ul>
<li>å½“å‰å­é›†ä¸­çš„æ ·æœ¬åŸºæœ¬å±äºåŒä¸€ç±»åˆ«ï¼ˆå¦‚95%ä»¥ä¸Šï¼‰</li>
<li>æ²¡æœ‰åˆé€‚çš„ç‰¹å¾å¯ä¾›ç»§ç»­åˆ’åˆ†</li>
<li>è¾¾åˆ°é¢„è®¾çš„æ ‘æ·±åº¦é™åˆ¶</li>
</ul>
</li>
<li>å½“åœæ­¢æ¡ä»¶æ»¡è¶³æ—¶ï¼Œåˆ›å»ºå¶èŠ‚ç‚¹å¹¶æ ‡è®°ä¸ºå½“å‰å­é›†ä¸­çš„ä¸»è¦ç±»åˆ«</li>
</ul>
<ol start="3">
<li>å…¸å‹åº”ç”¨åœºæ™¯</li>
</ol>
<ul>
<li>åŒ»ç–—è¯Šæ–­ï¼šæ ¹æ®æ‚£è€…ç—‡çŠ¶åˆ¤æ–­ç–¾ç—…ç±»å‹</li>
<li>ä¿¡ç”¨è¯„ä¼°ï¼šæ ¹æ®å®¢æˆ·ç‰¹å¾é¢„æµ‹è¿˜æ¬¾èƒ½åŠ›</li>
<li>å·¥ä¸šç”Ÿäº§ï¼šæ ¹æ®è®¾å¤‡å‚æ•°åˆ¤æ–­æ•…éšœç±»å‹</li>
</ul>
<p>ç¤ºä¾‹ï¼šåœ¨é¸¢å°¾èŠ±åˆ†ç±»é—®é¢˜ä¸­ï¼Œå†³ç­–æ ‘å¯èƒ½é¦–å…ˆæ ¹æ®èŠ±ç“£é•¿åº¦è¿›è¡Œåˆ’åˆ†ï¼ˆå¦‚&lt;2.45cmä¸ºä¸€ç±»ï¼‰ï¼Œç„¶ååœ¨æ¯ä¸ªå­é›†ä¸­ç»§ç»­æ ¹æ®å…¶ä»–ç‰¹å¾ï¼ˆå¦‚èŠ±ç“£å®½åº¦ã€è¼ç‰‡é•¿åº¦ç­‰ï¼‰è¿›è¡Œç»†åˆ†ï¼Œæœ€ç»ˆå½¢æˆä¸€æ£µèƒ½å¤Ÿå‡†ç¡®åˆ†ç±»ä¸‰ç§é¸¢å°¾èŠ±çš„å†³ç­–æ ‘ã€‚</p>
<p>æ³¨æ„ï¼šå®é™…åº”ç”¨ä¸­é€šå¸¸ä¼šé€šè¿‡å‰ªæ(pre-pruningæˆ–post-pruning)ç­‰æŠ€æœ¯æ¥é˜²æ­¢è¿‡æ‹Ÿåˆï¼Œæé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚</p>
<p>ç»¼ä¸Šï¼Œå†³ç­–æ ‘å­¦ä¹ ç®—æ³•åŒ…æ‹¬ç‰¹å¾é€‰æ‹©ã€å†³ç­–æ ‘çš„ç”Ÿæˆä¸å†³ç­–æ ‘çš„å‰ªæã€‚
ç”±äºå†³ç­–æ ‘è¡¨ç¤ºä¸€ä¸ªæ¡ä»¶æ¦‚ç‡çš„åˆ†å¸ƒï¼Œæ‰€ä»¥æ·±æµ…ä¸åŒçš„å†³ç­–æ ‘å¯¹åº”ç€ä¸åŒçš„å¤æ‚åº¦çš„æ¦‚ç‡æ¨¡å‹ï¼Œå…¶ä¸­å†³ç­–æ ‘çš„ç”Ÿæˆåªè€ƒè™‘å±€éƒ¨æœ€ä¼˜ï¼Œç›¸å¯¹çš„ï¼Œå†³ç­–æ ‘çš„å‰ªæåˆ™è€ƒè™‘å…¨å±€æœ€ä¼˜ã€‚</p>
<h2 data-id="heading-5">é¦™å†œç†µçš„è®¡ç®—</h2>
<p>å†³ç­–æ ‘å­¦ä¹ çš„å…³é”®åœ¨å¦‚ä½•é€‰æ‹©æœ€ä¼˜åˆ’åˆ†å±æ€§ï¼Œä¸€èˆ¬è€Œè¨€ï¼Œéšç€åˆ’åˆ†è¿‡ç¨‹ä¸æ–­è¿›è¡Œï¼Œæˆ‘ä»¬å¸Œæœ›å†³ç­–æ ‘çš„åˆ†æ”¯èŠ‚ç‚¹æ‰€åŒ…å«çš„æ ·æœ¬å°½å¯èƒ½å±äºåŒä¸€ç±»åˆ«ï¼Œå³èŠ‚ç‚¹çº¯åº¦ï¼ˆpurityï¼‰è¶Šæ¥è¶Šé«˜ã€‚åœ¨åˆ†ç±»æ ‘ä¸­ï¼Œåˆ’åˆ†çš„ä¼˜åŠ£ç”¨ä¸çº¯åº¦åº¦é‡ï¼ˆimpurity-measureï¼‰å®šé‡åˆ†æã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77151aef344b439bb5720b940772294d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767673538&amp;x-signature=X5uxPFmOpGOu0IWxzuREsT%2Fn%2FBQ%3D" alt="é¦™å†œç†µçš„è®¡ç®—" loading="lazy"/>
åœ¨ä¿¡æ¯è®ºä¸æ¦‚ç‡ç»Ÿè®¡ä¸­ï¼Œç†µæ˜¯è¡¨ç¤ºéšæœºå˜é‡ä¸ç¡®å®šæ€§çš„åº¦é‡ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„ç†µï¼Œä¹Ÿå«åšé¦™å†œç†µï¼Œè¿™ä¸ªåå­—æ¥æºä¿¡æ¯è®ºä¹‹çˆ¶å…‹åŠ³å¾·Â·é¦™å†œã€‚</p>
<p>ä¸ºäº†è®¡ç®—ç†µï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—æ‰€æœ‰ç±»åˆ«æ‰€æœ‰å¯èƒ½å€¼åŒ…å«çš„ä¿¡æ¯æœŸæœ›å€¼ï¼ˆæ•°å­¦æœŸæœ›ï¼‰ï¼Œå³ä¸Šè¿°å…¬å¼ã€‚å¯¹äºäºŒåˆ†ç±»é—®é¢˜ï¼Œå¦‚æœ p1=1 è€Œ p2 = 0ï¼Œåˆ™å‡ºæ²¹çš„å®ä¾‹éƒ½å±äº Ci ç±»ã€‚
å¦‚æœ p1 = p2 = 0.5ï¼Œç†µä¸º 1ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d32a0f9c96454f5cab1511d27600c503~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767673538&amp;x-signature=jVinCTbrvt%2BF%2BeqLk18bGVT80xg%3D" alt="é¦™å†œç†µçš„è®¡ç®—" loading="lazy"/>
ä½†æ˜¯ï¼Œç†µå¹¶éæ˜¯å”¯ä¸€å¯èƒ½çš„åº¦é‡ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8c466b801234bb68aa6a4aefb331f0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767673538&amp;x-signature=WiR3V2wKQmZeA8cgEisxjX6rxD0%3D" alt="é¦™å†œç†µçš„è®¡ç®—" loading="lazy"/>
è¿™äº›éƒ½å¯ä»¥æ¨å¹¿åˆ° K &gt; 2 ç±»ï¼Œå¹¶ä¸”ç»™å®šæŸå¤±å‡½æ•°ï¼Œè¯¯åˆ†ç±»è¯¯å·®å¯ä»¥æ¨å¹¿åˆ°æœ€å°é£é™©ã€‚
ä¸‹å›¾æ˜¾ç¤ºäº†äºŒå…ƒåˆ†ç±»é—®é¢˜ä¸çº¯æ€§åº¦é‡å€¼çš„æ¯”è¾ƒï¼Œp è¡¨ç¤ºå±äºå…¶ä¸­ä¸€ä¸ªç±»çš„è®°å½•æ‰€å çš„æ¯”ä¾‹ã€‚ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œä¸‰ç§æ–¹æ³•éƒ½åœ¨ç±»åˆ†å¸ƒå‡è¡¡æ—¶ï¼ˆå³å½“ p=0.5 æ—¶ï¼‰è¾¾åˆ°æœ€å¤§å€¼ï¼Œè€Œå½“æ‰€æœ‰è®°å½•éƒ½å±äºåŒä¸€ä¸ªç±»æ—¶ï¼ˆp=1 æˆ– p=0ï¼‰è¾¾åˆ°æœ€å°å€¼ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54e09860b7db413a8f09dce4a6b2ceaf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767673538&amp;x-signature=6WSquPtidyV0Lc34cTtWhh3PQmY%3D" alt="é¦™å†œç†µçš„è®¡ç®—" loading="lazy"/>
è¿™é‡Œç»™å‡ºä¸‰ç§ä¸çº¯æ€§åº¦é‡æ–¹æ³•çš„è®¡ç®—å®ä¾‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3d7af7a5c64448198a8659b91be1d62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767673538&amp;x-signature=SdPar8%2B06rIum8A0AJInFO%2F3uGI%3D" alt="é¦™å†œç†µçš„è®¡ç®—" loading="lazy"/>
ä»ä¸Šé¢çš„ä¾‹å­åŠå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œä¸åŒçš„ä¸çº¯æ€§åº¦é‡æ˜¯ä¸€è‡´çš„ã€‚æ ¹æ®è®¡ç®—ï¼ŒèŠ‚ç‚¹ N1 å…·æœ‰æœ€ä½çš„ä¸çº¯æ€§åº¦é‡å€¼ï¼Œç„¶åä¾æ¬¡æ˜¯ N2ã€N3ã€‚è™½ç„¶ç»“æœæ˜¯ä¸€è‡´çš„ï¼Œä½†æ˜¯ä½œä¸ºæµ‹è¯•æ¡ä»¶çš„å±æ€§é€‰æ‹©ä»ç„¶å› ä¸çº¯æ€§åº¦é‡çš„é€‰æ‹©è€Œå¼‚ã€‚</p>
<h2 data-id="heading-6">é¦™å†œç†µçš„ä»£ç å®ç°</h2>
<pre><code class="hljs language-python" lang="python">row_data = {
    <span class="hljs-string">'æ˜¯å¦é™ªä¼´'</span> :[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],
    <span class="hljs-string">'æ˜¯å¦ç©æ¸¸æˆ'</span>:[<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],
    <span class="hljs-string">'æ¸£ç”·'</span> :[<span class="hljs-string">'æ˜¯'</span>,<span class="hljs-string">'æ˜¯'</span>,<span class="hljs-string">'ä¸æ˜¯'</span>,<span class="hljs-string">'ä¸æ˜¯'</span>,<span class="hljs-string">'ä¸æ˜¯'</span>]
}

dataSet = pd.DataFrame(row_data)
dataSet
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e82f16bca214df29c4cab67afc5289b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767673538&amp;x-signature=1ZZT3nhPGXfSJlV7uGxskTtY26I%3D" alt="PandasåŠ è½½æ•°æ®" loading="lazy"/>
é€šè¿‡ä»£ç å®ç°ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">calEnt</span>(<span class="hljs-params">dataSet</span>):
    <span class="hljs-comment"># æ•°æ®é›†æ€»è¡Œæ•°</span>
    n = dataSet.shape[<span class="hljs-number">0</span>]
    <span class="hljs-comment"># æ ‡ç­¾çš„æ‰€æœ‰ç±»åˆ«</span>
    iset = dataSet.iloc[:,-<span class="hljs-number">1</span>].value_counts() 
    <span class="hljs-comment"># æ¯ä¸€ç±»æ ‡ç­¾æ‰€å æ¯”</span>
    p = iset/n
    <span class="hljs-comment"># è®¡ç®—ä¿¡æ¯ç†µ</span>
    ent = (-p*np.log2(p)).<span class="hljs-built_in">sum</span>() 
    <span class="hljs-keyword">return</span> ent

calEnt(dataSet)
</code></pre>
<p>è¿è¡Œçš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77d727ac200e4bdfa0fbb83bfa6408a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767673538&amp;x-signature=86OFJ%2Fz1zSO3qisgP19zMSpsbhc%3D" alt="ç¼–å†™ä»£ç å®ç°" loading="lazy"/>
ç†µè¶Šé«˜ï¼Œä¿¡æ¯çš„ä¸çº¯åº¦å°±è¶Šé«˜ï¼Œåˆ™æ··åˆçš„æ•°æ®å°±è¶Šå¤šã€‚
ä¹Ÿå°±æ˜¯è¯´ï¼Œå•ä»åˆ¤æ–­çš„ç»“æœæ¥çœ‹ï¼Œå¦‚æœä½ ä»è¿™ 5 ä¸ªäººä¸­ççŒœï¼Œè¦å‡†ç¡®åˆ¤æ–­å…¶ä¸­ä¸€ä¸ªäººæ˜¯ä¸æ˜¯â€œbad boyâ€æ˜¯ä¸å®¹æ˜“çš„ã€‚</p>
<h2 data-id="heading-7">é”™è¯¯é€ŸæŸ¥</h2>























































<table><thead><tr><th>ç—‡çŠ¶</th><th>æ ¹å› å®šä½</th><th>ä¿®å¤</th></tr></thead><tbody><tr><td>è®­ç»ƒé›†å‡†ç¡®ç‡æé«˜ï¼Œæµ‹è¯•é›†æ˜æ˜¾ä¸‹é™</td><td>æ ‘å¤ªæ·±ã€å¶å­æ ·æœ¬æ•°è¿‡å°ï¼ŒæŒç»­ç»†åˆ†å¯¼è‡´è¿‡æ‹Ÿåˆ</td><td>çœ‹æ ‘æ·±åº¦ã€å¶èŠ‚ç‚¹æ ·æœ¬æ•°åˆ†å¸ƒã€éªŒè¯é›†æ›²çº¿é¢„å‰ªæï¼ˆmax_depth/min_samples_leaf/min_samples_splitï¼‰ã€åå‰ªæï¼ˆä»£ä»·å¤æ‚åº¦å‰ªæç­‰ï¼‰</td></tr><tr><td>åˆ’åˆ†ç»“æœä¸ç¨³å®šã€è½»å¾®æ•°æ®æ‰°åŠ¨æ ‘ç»“æ„å¤§å˜</td><td>å†³ç­–æ ‘é«˜æ–¹å·®æ¨¡å‹ï¼Œå¯¹é‡‡æ ·/å™ªå£°æ•æ„Ÿ</td><td>å¤šæ¬¡ä¸åŒéšæœºç§å­è®­ç»ƒå¯¹æ¯”æ ‘ç»“æ„ç”¨é›†æˆæ–¹æ³•ï¼ˆRandomForest/GBDTï¼‰æˆ–é™åˆ¶æ·±åº¦ã€å¢åŠ å¶å­æœ€å°æ ·æœ¬</td></tr><tr><td>è¿ç»­ç‰¹å¾åˆ’åˆ†æ•ˆæœå·®æˆ–è§£é‡Šå›°éš¾</td><td>è¿ç»­å˜é‡åˆ‡åˆ†ç‚¹é€‰æ‹©ä¸ä½³ï¼›æˆ–ç¦»æ•£åŒ–ç­–ç•¥ä¸åˆç†</td><td>æ£€æŸ¥å€™é€‰åˆ‡åˆ†ç‚¹æšä¸¾/æ’åºé€»è¾‘ï¼›è§‚å¯Ÿåˆ†è£‚åçº¯åº¦å˜åŒ–é‡‡ç”¨åŸºäºä¸çº¯åº¦çš„æœ€ä¼˜åˆ‡åˆ†ç‚¹æœç´¢ï¼›å¿…è¦æ—¶åšåˆ†ç®±å¹¶éªŒè¯ä¿¡æ¯å¢ç›Šå˜åŒ–</td></tr><tr><td>ç±»åˆ«æä¸å‡è¡¡æ—¶ï¼Œå¶å­èŠ‚ç‚¹æ¦‚ç‡åç½®æ˜æ˜¾</td><td>å¶èŠ‚ç‚¹ P(Y\mid X\in R_j) è¢«å¤šæ•°ç±»ä¸»å¯¼</td><td>çœ‹å¶èŠ‚ç‚¹ç±»åˆ«è®¡æ•°ä¸æ¦‚ç‡ä»£ä»·æ•æ„Ÿå­¦ä¹ /ç±»æƒé‡/é‡é‡‡æ ·ï¼›è¯„ä¼°æŒ‡æ ‡æ”¹ç”¨F1/PR-AUC</td></tr><tr><td>ç†µè®¡ç®—å¾—åˆ° NaN/inf</td><td>æ¦‚ç‡ä¸º0å¯¼è‡´ \log(0)</td><td>æ‰“å° value_counts ä¸ pï¼›æ£€æŸ¥æ˜¯å¦å‡ºç°0æ¦‚ç‡é¡¹å¯¹æ¦‚ç‡åŠ æå°å€¼ epsilonï¼›æˆ–åœ¨è®¡ç®—ä¸­è·³è¿‡ p=0 çš„é¡¹</td></tr><tr><td>Pandas ä»£ç æŠ¥ NameErrorï¼špd/np æœªå®šä¹‰</td><td>æœªå¯¼å…¥åº“</td><td>æŸ¥çœ‹æ‰§è¡Œç¯å¢ƒ importè¡¥å…… import pandas as pdã€import numpy as np</td></tr><tr><td>value_counts() ç»“æœé¡ºåºä¸é¢„æœŸä¸ä¸€è‡´</td><td>é»˜è®¤æŒ‰é¢‘æ¬¡é™åºï¼Œä¸æŒ‰æ ‡ç­¾é¡ºåº</td><td>æ‰“å° value_counts è¾“å‡ºæ˜ç¡®æ’åºéœ€æ±‚ï¼šsort_index() æˆ–æŒ‡å®šç±»åˆ«é¡ºåºï¼ˆCategoricalï¼‰</td></tr><tr><td>è¯¯æŠŠâ€œç†µè¶Šé«˜=ä¿¡æ¯è¶Šå¤šâ€å½“ä½œâ€œè¶Šå¥½â€</td><td>ç†µè¡¨ç¤ºä¸ç¡®å®šæ€§/æ··æ‚åº¦ï¼Œè®­ç»ƒä¸­å¸Œæœ›åˆ†è£‚åä¸çº¯åº¦ä¸‹é™</td><td>å¯¹æ¯”åˆ†è£‚å‰åç†µ/åŸºå°¼å˜åŒ–å¼ºè°ƒç›®æ ‡æ˜¯é™ä½ä¸çº¯åº¦ï¼ˆæå‡çº¯åº¦ï¼‰ï¼Œç†µé«˜é€šå¸¸è¡¨ç¤ºæ›´éš¾åˆ†</td></tr><tr><td>è®¤ä¸ºâ€œä¸åŒä¸çº¯åº¦åº¦é‡ç»“æœä¸€è‡´â†’å±æ€§é€‰æ‹©ä¸€å®šä¸€è‡´â€</td><td>åº¦é‡æ’åºå¯èƒ½ä¸€è‡´ï¼Œä½†æœ€ä½³åˆ’åˆ†å±æ€§å¯èƒ½ä¸åŒ</td><td>åŒä¸€æ•°æ®ç”¨ç†µ/åŸºå°¼åˆ†åˆ«ç®—ä¸€æ¬¡å€™é€‰ç‰¹å¾åˆ†æ•°è¯´æ˜åº¦é‡ä¸€è‡´æ€§ä¸ç­‰ä»·äºé€‰æ‹©ä¸€è‡´ï¼›ç”¨äº¤å‰éªŒè¯æˆ–ä¸šåŠ¡çº¦æŸé€‰å‹</td></tr></tbody></table>
<h2 data-id="heading-8">å…¶ä»–ç³»åˆ—</h2>
<h3 data-id="heading-9">ğŸš€ AIç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>AIç‚¼ä¸¹æ—¥å¿—-29 - å­—èŠ‚è·³åŠ¨ DeerFlow æ·±åº¦ç ”ç©¶æ¡†<em>æ–œä½“æ ·å¼</em>æ¶ ç§æœ‰éƒ¨ç½² æµ‹è¯•ä¸Šæ‰‹ æ¶æ„ç ”ç©¶</strong>ï¼ŒæŒç»­æ‰“é€ å®ç”¨AIå·¥å…·æŒ‡å—ï¼
<strong>AIç ”ç©¶-132 Java ç”Ÿæ€å‰æ²¿ 2025ï¼šSpringã€Quarkusã€GraalVMã€CRaC ä¸äº‘åŸç”Ÿè½åœ°</strong></p>
<h3 data-id="heading-10">ğŸ’» Javaç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>Java-207 RabbitMQ Direct äº¤æ¢å™¨è·¯ç”±ï¼šRoutingKey ç²¾ç¡®åŒ¹é…ã€é˜Ÿåˆ—å¤šç»‘å®šä¸æ—¥å¿—åˆ†æµå®æˆ˜</strong>
MyBatis å·²å®Œç»“ï¼ŒSpring å·²å®Œç»“ï¼ŒNginxå·²å®Œç»“ï¼ŒTomcatå·²å®Œç»“ï¼Œåˆ†å¸ƒå¼æœåŠ¡å·²å®Œç»“ï¼ŒDubboå·²å®Œç»“ï¼ŒMySQLå·²å®Œç»“ï¼ŒMongoDBå·²å®Œç»“ï¼ŒNeo4jå·²å®Œç»“ï¼ŒFastDFS å·²å®Œç»“ï¼ŒOSSå·²å®Œç»“ï¼ŒGuavaCacheå·²å®Œç»“ï¼ŒEVCacheå·²å®Œç»“ï¼ŒRabbitMQæ­£åœ¨æ›´æ–°... æ·±å…¥æµ…å‡ºåŠ©ä½ æ‰“ç‰¢åŸºç¡€ï¼</p>
<h3 data-id="heading-11">ğŸ“Š å¤§æ•°æ®æ¿å—å·²å®Œæˆå¤šé¡¹å¹²è´§æ›´æ–°ï¼ˆ300ç¯‡ï¼‰ï¼š</h3>
<p>åŒ…æ‹¬ Hadoopã€Hiveã€Kafkaã€Flinkã€ClickHouseã€Elasticsearch ç­‰äºŒåä½™é¡¹æ ¸å¿ƒç»„ä»¶ï¼Œè¦†ç›–ç¦»çº¿+å®æ—¶æ•°ä»“å…¨æ ˆï¼
<strong>å¤§æ•°æ®-278 Spark MLib - åŸºç¡€ä»‹ç» æœºå™¨å­¦ä¹ ç®—æ³• æ¢¯åº¦æå‡æ ‘ GBDTæ¡ˆä¾‹ è¯¦è§£</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨dockeréƒ¨ç½²koa+sql server+reacté¡¹ç›®å®Œæ•´è¿‡ç¨‹]]></title>    <link>https://juejin.cn/post/7589176150494396470</link>    <guid>https://juejin.cn/post/7589176150494396470</guid>    <pubDate>2025-12-30T04:30:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589176150494396470" data-draft-id="7587704265054928934" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨dockeréƒ¨ç½²koa+sql server+reacté¡¹ç›®å®Œæ•´è¿‡ç¨‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-30T04:30:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Hyinglin"/> <meta itemprop="url" content="https://juejin.cn/user/2362231708723822"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨dockeréƒ¨ç½²koa+sql server+reacté¡¹ç›®å®Œæ•´è¿‡ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2362231708723822/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Hyinglin
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T04:30:02.000Z" title="Tue Dec 30 2025 04:30:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å‰è¨€:
ubuntuæœåŠ¡å™¨ç°åœ¨å·²ç»ç”¨dockerå¯åŠ¨äº†ä¸€ä¸ªsql serveräº†ï¼Œæˆ‘ç°åœ¨æƒ³æŠŠæœ¬åœ°çš„koa+sql server+reacté¡¹ç›®éƒ¨ç½²åˆ°ubuntuä¸­ï¼Œreactå‰ç«¯ç›´æ¥æ‰“åŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨é€šè¿‡nginxå»è®¿é—®ï¼Œåç«¯çš„è¯é€šè¿‡dockeræ¥éƒ¨ç½²è¦æ€ä¹ˆæï¼Œä¸»è¦æ•°æ®åº“æ–¹é¢ä¸çŸ¥é“è¦æ€ä¹ˆå¼„?</p>
</blockquote>
<p>ç›®å‰æ˜¯ï¼š</p>
<ul>
<li>
<p>âœ… Ubuntu æœåŠ¡å™¨<strong>å·²ç»ç”¨ Docker è·‘äº†ä¸€ä¸ª SQL Server</strong></p>
</li>
<li>
<p>âœ… æœ¬åœ°æœ‰ï¼š</p>
<ul>
<li>Koaï¼ˆNode åç«¯ï¼‰</li>
<li>Reactï¼ˆå‰ç«¯ï¼‰</li>
<li>SQL Serverï¼ˆæœ¬åœ°å¼€å‘ç”¨ï¼‰</li>
</ul>
</li>
</ul>
<p>ä½ æƒ³è¦çš„æœ€ç»ˆå½¢æ€æ˜¯ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">æµè§ˆå™¨
  â†“
Nginxï¼ˆ<span class="hljs-number">9527</span> æˆ– <span class="hljs-number">80</span>ï¼‰
  â†“
React é™æ€æ–‡ä»¶
  â†“
/api â†’ Nginx â†’ Koaï¼ˆDockerï¼‰
                  â†“
              SQL <span class="hljs-built_in">Server</span>ï¼ˆDockerï¼‰
</code></pre>
<p><strong>è¿™æ˜¯å®Œå…¨æ­£ç¡®ã€ä¹Ÿæ˜¯æ¨èçš„éƒ¨ç½²æ–¹å¼ã€‚</strong></p>
<hr/>
<h3 data-id="heading-0">æ€»ä½“æ¨èæ¶æ„</h3>
<blockquote>
<p><strong>å‰ç«¯ä¸ç”¨ Dockerï¼Œåç«¯ + æ•°æ®åº“ç”¨ Dockerï¼ŒNginx åšç»Ÿä¸€å…¥å£</strong></p>
</blockquote>
<pre><code class="hljs language-arduino" lang="arduino">Ubuntu
â”œâ”€ nginxï¼ˆå®¿ä¸»æœºï¼‰
â”‚
â”œâ”€ /opt/translationfront/        â† React build
â”‚
â”œâ”€ docker
â”‚   â”œâ”€ sqlserver å®¹å™¨
â”‚   â””â”€ koa-backend å®¹å™¨
â”‚        |
â”‚        â””â”€â”€ é€šè¿‡ Docker ç½‘ç»œè®¿é—® SQL <span class="hljs-built_in">Server</span>
</code></pre>
<hr/>
<h3 data-id="heading-1">React å‰ç«¯</h3>
<h4 data-id="heading-2">æœ¬åœ°æ‰“åŒ…</h4>
<pre><code class="hljs language-arduino" lang="arduino">npm run build
</code></pre>
<p>æ³¨æ„ <code>package.json</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"homepage"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"translationfront"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ³¨æ„<code>app.js</code></p>
<pre><code class="hljs language-xml" lang="xml"> <span class="hljs-tag">&lt;<span class="hljs-name">Router</span> <span class="hljs-attr">basename</span>=<span class="hljs-string">"/translationfront"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Routes</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Home</span> /&gt;</span>} /&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Route</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"*"</span> <span class="hljs-attr">element</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">NotFound</span> /&gt;</span>} /&gt;
      <span class="hljs-tag">&lt;/<span class="hljs-name">Routes</span>&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-name">Router</span>&gt;</span>
</code></pre>
<p>ğŸ‘‰ å‰ç«¯è¿™éƒ¨åˆ†å·²ç»ç»“æŸã€‚</p>
<hr/>
<h3 data-id="heading-3">é‡ç‚¹æ¥äº†ï¼šåç«¯ + SQL Server æ€ä¹ˆæï¼ˆæ ¸å¿ƒï¼‰</h3>
<p>ä½ å·²ç»åœ¨ Ubuntu ä¸Šç”¨ Docker è·‘äº† SQL Server<br/>
ğŸ‘‰ <strong>è¿™æ˜¯éå¸¸å¥½çš„äº‹æƒ…</strong></p>
<h3 data-id="heading-4">å…³é”®åŸåˆ™ï¼ˆå…ˆè®°ä½ï¼‰</h3>
<blockquote>
<p>â— <strong>åç«¯ä¸è¦å†èµ·ä¸€ä¸ªæ–°çš„ SQL Server</strong></p>
<p>ğŸ‘‰ <strong>Koa å®¹å™¨ç›´æ¥è¿â€œå·²ç»å­˜åœ¨çš„ SQL Server å®¹å™¨â€</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-5">æœ€å…³é”®çš„ä¸€æ­¥ï¼š<strong>Docker ç½‘ç»œï¼ˆè§£å†³æ•°æ®åº“é—®é¢˜ï¼‰</strong></h3>
<blockquote>
<p>å®é™…éƒ¨ç½²è¿‡ç¨‹ä¸­å‘ç°ä¸éœ€è¦å¤„ç†æ•°æ®åº“è¿™ä¸€æ­¥ï¼Œè‡ªåŠ¨å°±è¿ä¸Šäº†æ•°æ®åº“ã€‚</p>
</blockquote>
<h4 data-id="heading-6">âŒ æ–°æ‰‹æœ€å¸¸çŠ¯çš„é”™</h4>
<ul>
<li>ç”¨ <code>localhost</code></li>
<li>ç”¨æœåŠ¡å™¨å…¬ç½‘ IP</li>
<li>ç«¯å£ä¹±æš´éœ²</li>
</ul>
<h3 data-id="heading-7">æ­£ç¡®åšæ³•ï¼šåˆ›å»ºä¸€ä¸ª docker ç½‘ç»œï¼ˆåªéœ€ä¸€æ¬¡ï¼‰</h3>
<pre><code class="hljs language-lua" lang="lua">docker network <span class="hljs-built_in">create</span> oa-net
</code></pre>
<hr/>
<h3 data-id="heading-8">æŠŠ SQL Server åŠ å…¥è¿™ä¸ªç½‘ç»œ</h3>
<pre><code class="hljs language-arduino" lang="arduino">docker network connect oa-net mssql
</code></pre>
<h3 data-id="heading-9">æ–°å»ºDockerfile.backend</h3>
<pre><code class="hljs language-bash" lang="bash">FROM node:24-alpine
WORKDIR /app

<span class="hljs-comment"># å¤åˆ¶ package.json å’Œ package-lock.json åˆ°é•œåƒä¸­</span>
COPY package*.json ./
<span class="hljs-comment"># å®‰è£…ç”Ÿäº§æ‰€éœ€çš„ä¾èµ–åŒ…ï¼Œè·³è¿‡å¼€å‘ä¾èµ–ï¼›--omit=devå¿½ç•¥å¼€å‘ä¾èµ–ï¼›npm ciå°±æ˜¯npm clean install</span>
<span class="hljs-comment"># RUN npm ci --omit=dev</span>

<span class="hljs-comment"># å®‰è£…é¡¹ç›®ä¾èµ–ï¼Œä¸è·³è¿‡å¼€å‘ä¾èµ–</span>
RUN npm ci

<span class="hljs-comment"># å¤åˆ¶ server ç›®å½•åˆ°é•œåƒä¸­</span>
COPY server/ ./server/

<span class="hljs-comment"># åˆ›å»ºç”¨æˆ·å’Œç»„ï¼Œå¹¶è®¾ç½®æƒé™</span>
RUN addgroup -g 1001 -S nodejs &amp;&amp; \
    adduser -S nodejs -u 1001 &amp;&amp; \
    <span class="hljs-built_in">chown</span> -R nodejs:nodejs /app

USER nodejs

EXPOSE 6051
ENV NODE_ENV=production
ENV PORT=6051

<span class="hljs-comment"># æŒ‡å®šå¯åŠ¨å‘½ä»¤</span>
CMD [<span class="hljs-string">"node"</span>, <span class="hljs-string">"server/server.js"</span>]
</code></pre>
<h3 data-id="heading-10">æ–°å»ºdocker-compose.yml</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment">#version: '3.3'</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-attr">backend:</span>
    <span class="hljs-attr">build:</span>
      <span class="hljs-attr">context:</span> <span class="hljs-string">.</span>
      <span class="hljs-attr">dockerfile:</span> <span class="hljs-string">Dockerfile.backend</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"6051:6051"</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
</code></pre>
<h3 data-id="heading-11">éœ€è¦ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„ç›®å½•æ–‡ä»¶å¦‚ä¸‹ï¼š</h3>
<pre><code class="hljs language-csharp" lang="csharp">server
build <span class="hljs-meta">#ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¹‹åæ”¹ä¸ªåå­—ï¼Œå¦‚ï¼štranslationfront</span>
package-<span class="hljs-keyword">lock</span>.json
package.json
Dockerfile.backend
docker-compose.yml
</code></pre>
<p>æœåŠ¡å™¨ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">UbuntuæœåŠ¡å™¨
â”œâ”€ /opt
    |<span class="hljs-comment">---ec-translation</span>
                |
            translationfront â† React build
                |
            server
                |
            Dockerfile.backend
               |
            docker-compose.yml
               |
            <span class="hljs-built_in">package</span>.json
               |
            <span class="hljs-built_in">package</span>-lock.json
</code></pre>
<h3 data-id="heading-12">nginxé…ç½®</h3>
<pre><code class="hljs language-ini" lang="ini">server{
    listen 9527<span class="hljs-comment">;</span>
    server_name oa.jt-ele.com<span class="hljs-comment">;</span>
    absolute_redirect off<span class="hljs-comment">;</span>
    access_log /var/log/nginx/oa.jt-ele.com-port-9527.access.log<span class="hljs-comment">;</span>
    error_log  /var/log/nginx/oa.jt-ele.com-port-9527.error.log<span class="hljs-comment">;</span>
  
    <span class="hljs-comment">#aiç¿»è¯‘åº”ç”¨å‰ç«¯</span>
    location /translationfront {
        root /opt/ec-translation<span class="hljs-comment">;</span>
        index index.html<span class="hljs-comment">;</span>
        try_files $uri $uri/ /translationfront/index.html<span class="hljs-comment">;</span>
    }
    
      <span class="hljs-comment">#aiç¿»è¯‘åº”ç”¨apiæœåŠ¡:ä»£ç†åˆ° Dockerä¸­çš„ Koa æœåŠ¡</span>
    location /ecTranslationApi/ {
        proxy_pass http://127.0.0.1:6050<span class="hljs-comment">;</span>
        proxy_set_header Host $host<span class="hljs-comment">;</span>
        proxy_set_header X-Real-IP $remote_addr<span class="hljs-comment">;</span>
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for<span class="hljs-comment">;</span>
        proxy_set_header X-Forwarded-Proto $scheme<span class="hljs-comment">;</span>
        proxy_http_version 1.1<span class="hljs-comment">;</span>
    }
    
}
</code></pre>
<h4 data-id="heading-13">è·¯å¾„æ˜ å°„åŸç†ï¼š</h4>
<ol>
<li>root:</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"> location /translationfront {
    root /opt/ec-translation;
    index index.html;
    try_files <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span>/ /translationfront/index.html;
 }
</code></pre>
<h4 data-id="heading-14">ğŸ” <code>root</code>Â æŒ‡ä»¤çš„è·¯å¾„æ‹¼æ¥è§„åˆ™</h4>
<h5 data-id="heading-15">ğŸ“Œ Nginx çš„Â <code>root</code>Â æ˜¯è¿™æ ·å·¥ä½œçš„ï¼š</h5>
<blockquote>
<p><strong><code>root</code> æŒ‡å®šçš„æ˜¯â€œæ ¹ç›®å½•â€ï¼Œæœ€ç»ˆæ–‡ä»¶è·¯å¾„ = <code>root è·¯å¾„ + å®Œæ•´çš„ URI</code></strong></p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š</p>
<ul>
<li><code>root /opt/ec-translation;</code></li>
<li>è¯·æ±‚Â <code>/translationfront</code></li>
<li>Nginx å®é™…æŸ¥æ‰¾çš„æ–‡ä»¶æ˜¯ï¼š<code>/opt/ec-translation/translationfront</code></li>
</ul>
<ol start="2">
<li>alias</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"> location /translationfront {
    <span class="hljs-built_in">alias</span> /opt/ec-translation/translationfront;
    index index.html;
    try_files <span class="hljs-variable">$uri</span> <span class="hljs-variable">$uri</span>/ /translationfront/index.html;
 }
</code></pre>
<h5 data-id="heading-16">ğŸ”Â <code>alias</code>Â çš„è§„åˆ™æ˜¯ï¼š</h5>
<blockquote>
<p><code>alias</code> ä¼š <strong>æ›¿æ¢ location åŒ¹é…çš„éƒ¨åˆ†</strong></p>
</blockquote>
<p>æ‰€ä»¥ï¼š</p>
<ul>
<li><code>location /translationfront</code></li>
<li><code>alias /opt/ec-translation/translationfront</code></li>
<li>è¯·æ±‚Â <code>/translationfront</code>Â â†’ å®é™…è·¯å¾„ï¼š<code>/opt/ec-translation/translationfront</code></li>
</ul>
<p>å®Œç¾åŒ¹é…ä½ çš„æ–‡ä»¶ç»“æ„</p>
<h4 data-id="heading-17">ç«¯å£æ˜ å°„åŸç†ï¼šä¸ºä»€ä¹ˆæ²¡åšç«¯å£æ˜ å°„ï¼Œä¹Ÿèƒ½è®¿é—®åç«¯apiï¼Ÿ</h4>
<p>ä¸€å¥è¯ï¼šNginxåœ¨å…¬ç½‘ç«¯å£ä¸Š"æ›¿ä½ è½¬å‘äº†è¯·æ±‚"</p>
<h2 data-id="heading-18">ä¸€å¼ å›¾å…ˆçœ‹å…¨å±€ï¼ˆéå¸¸é‡è¦ï¼‰</h2>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-attr">[ æµè§ˆå™¨ ]</span>
    |
    |  <span class="hljs-selector-tag">http</span>:<span class="hljs-comment">//oa.jt-ele.com:9527/ecTranslationApi/translateText</span>
    |
<span class="hljs-selector-attr">[ å…¬ç½‘ IP : 9527 ]</span>   â†â€”â€”â€” åªæœ‰è¿™ä¸ªç«¯å£æ˜¯å…¬ç½‘å¼€æ”¾çš„
    |
<span class="hljs-selector-attr">[ Nginxï¼ˆå®¿ä¸»æœºï¼‰ ]</span>
    |
    |  <span class="hljs-selector-tag">proxy_pass</span> <span class="hljs-selector-tag">http</span>:<span class="hljs-comment">//127.0.0.1:6050</span>
    |
<span class="hljs-selector-attr">[ å®¿ä¸»æœº 127.0.0.1:6050 ]</span>
    |
<span class="hljs-selector-attr">[ Docker ç«¯å£æ˜ å°„ ]</span>
    |
<span class="hljs-selector-attr">[ å®¹å™¨å†… Koa :6050 ]</span>
</code></pre>
<p>ğŸ‘‰ <strong>å¤–ç½‘åªèƒ½çœ‹åˆ° 9527</strong><br/>
ğŸ‘‰ <strong>6050 ä»æ¥æ²¡æš´éœ²ç»™å…¬ç½‘</strong></p>
<h2 data-id="heading-19">ä¸‰ä¸ªç«¯å£ï¼Œå„è‡ªâ€œèº«ä»½â€æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<blockquote>
<p>å®¿ä¸»æœºç«¯å£ã€å®¹å™¨ç«¯å£ã€æœ¬åœ°é¡¹ç›®ç«¯å£ï¼Œè¿™äº›æ˜¯æ€ä¹ˆæ˜ å°„çš„ï¼Ÿ</p>
</blockquote>
<p>æˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªå¯¹ã€‚</p>
<hr/>
<h3 data-id="heading-20">æœ¬åœ°é¡¹ç›®ç«¯å£ï¼ˆKoa listen çš„ç«¯å£ï¼‰</h3>
<pre><code class="hljs language-ini" lang="ini">app.listen(6050)<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™æ˜¯ï¼š</p>
<blockquote>
<p>âœ… <strong>Koa åœ¨â€œå®¹å™¨å†…éƒ¨â€ç›‘å¬çš„ç«¯å£</strong></p>
</blockquote>
<p>âš ï¸ å®ƒçš„ä½œç”¨èŒƒå›´ï¼š</p>
<ul>
<li>âŒ å¤–ç½‘è®¿é—®ä¸åˆ°</li>
<li>âŒ å®¿ä¸»æœºä¹Ÿè®¿é—®ä¸åˆ°</li>
<li>âœ… <strong>åªåœ¨å®¹å™¨å†…éƒ¨æœ‰æ•ˆ</strong></li>
</ul>
<hr/>
<h3 data-id="heading-21">å®¹å™¨ç«¯å£ï¼ˆDocker EXPOSEï¼‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">EXPOSE</span> <span class="hljs-number">6050</span>
</code></pre>
<p>è¿™ä¸€æ­¥ï¼š</p>
<blockquote>
<p>â— <strong>åªæ˜¯â€œå£°æ˜â€</strong></p>
<p>ğŸ‘‰ å‘Šè¯‰ Dockerï¼šè¿™ä¸ªå®¹å™¨â€œæ‰“ç®—ç”¨â€6050</p>
</blockquote>
<p>âš ï¸ å®ƒä¸ä¼šï¼š</p>
<ul>
<li>âŒ è‡ªåŠ¨æš´éœ²ç«¯å£</li>
<li>âŒ è‡ªåŠ¨å¯¹å¤–å¼€æ”¾</li>
</ul>
<p>å¾ˆå¤šäººè¯¯ä»¥ä¸º <code>EXPOSE</code> å°±æ˜¯â€œå¼€å…¬ç½‘â€ï¼Œè¿™æ˜¯<strong>è¯¯åŒº</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-22">å®¿ä¸»æœºç«¯å£ï¼ˆdocker-compose çš„ portsï¼‰</h3>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ports:</span>
  - <span class="hljs-string">"6050:6050"</span>
</code></pre>
<p>è¿™ä¸€æ­¥æ‰æ˜¯çœŸæ­£çš„ã€Œé€šé“å»ºç«‹ã€ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">å®¿ä¸»æœº</span> <span class="hljs-number">6050</span>  <span class="hljs-string">â†â†’</span>  <span class="hljs-string">å®¹å™¨</span> <span class="hljs-number">6050</span>
</code></pre>
<p>ğŸ‘‰ ä½†æ³¨æ„ï¼š</p>
<ul>
<li><strong>è¿™æ˜¯å®¿ä¸»æœºç«¯å£</strong></li>
<li>å¹¶ä¸ç­‰äºå…¬ç½‘ç«¯å£</li>
</ul>
<p>æ˜¯å¦å…¬ç½‘å¯è®¿é—®ï¼Œå–å†³äº <strong>é˜²ç«å¢™ / äº‘å‚å•† / Nginx</strong></p>
<hr/>
<h2 data-id="heading-23">ä¸ºä»€ä¹ˆâ€œæ²¡å¼€å…¬ç½‘ç«¯å£ï¼Œä¹Ÿèƒ½å…¬ç½‘è®¿é—®â€ï¼Ÿ</h2>
<h4 data-id="heading-24">ç­”æ¡ˆåªæœ‰ä¸€å¥è¯ï¼š</h4>
<blockquote>
<p><strong>å› ä¸º Nginx å¸®ä½ åšäº†â€œä¸­è½¬â€</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-25">ä½ ç°åœ¨çš„çœŸå®æƒ…å†µï¼ˆä»£å…¥ä½ çš„é…ç½®ï¼‰</h3>
<h4 data-id="heading-26">1ï¸âƒ£ å…¬ç½‘åªå¼€æ”¾äº†ä¸€ä¸ªç«¯å£</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">å…¬ç½‘</span> <span class="hljs-attr">IP :</span> <span class="hljs-number">9527</span>   <span class="hljs-string">âœ…</span>
</code></pre>
<p>äº‘æœåŠ¡å™¨å®‰å…¨ç»„ / ç©¿é€ / é˜²ç«å¢™åªæ”¾è¡Œäº†ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">9527</span>
</code></pre>
<hr/>
<h4 data-id="heading-27">2ï¸âƒ£ Nginx ç›‘å¬è¿™ä¸ªå…¬ç½‘ç«¯å£</h4>
<pre><code class="hljs language-arduino" lang="arduino">server {
    listen <span class="hljs-number">9527</span>;

    location /ecTranslationApi/ {
        proxy_pass http:<span class="hljs-comment">//127.0.0.1:6050/;</span>
    }
}
</code></pre>
<p>ğŸ‘‰ Nginx æ˜¯è·‘åœ¨ <strong>å®¿ä¸»æœºä¸Šçš„</strong></p>
<hr/>
<h4 data-id="heading-28">3ï¸âƒ£ è¯·æ±‚â€œè¢«è½¬å‘â€åˆ°äº†æœ¬åœ° 6050</h4>
<pre><code class="hljs">Nginx â†’ 127.0.0.1:6050
</code></pre>
<p>è¿™é‡Œçš„ <code>127.0.0.1</code> æ˜¯ï¼š</p>
<blockquote>
<p><strong>å®¿ä¸»æœºè‡ªå·±</strong></p>
</blockquote>
<hr/>
<h4 data-id="heading-29">4ï¸âƒ£ Docker å†æŠŠè¯·æ±‚é€è¿›å®¹å™¨</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">å®¿ä¸»æœº</span> <span class="hljs-number">6050</span> <span class="hljs-string">â†’</span> <span class="hljs-string">å®¹å™¨</span> <span class="hljs-number">6050</span> <span class="hljs-string">â†’</span> <span class="hljs-string">Koa</span>
</code></pre>
<hr/>
<h2 data-id="heading-30">æ‰€ä»¥â€œå…¬ç½‘è®¿é—®åç«¯â€çš„çœŸç›¸æ˜¯</h2>
<blockquote>
<p><strong>å…¬ç½‘è®¿é—®çš„æ ¹æœ¬ä¸æ˜¯ Koa</strong></p>
<p><strong>å…¬ç½‘è®¿é—®çš„æ˜¯ Nginx</strong></p>
<p>Koa æ°¸è¿œèº²åœ¨å†…ç½‘é‡Œ</p>
</blockquote>
<p>è¿™å°±æ˜¯<strong>æ ‡å‡†ç”Ÿäº§æ¶æ„</strong></p>
<hr/>
<h2 data-id="heading-31">ä¸ºä»€ä¹ˆè¿™ç§æ¶æ„æ˜¯â€œæœ€å®‰å…¨ã€æœ€æ¨èçš„â€ï¼Ÿ</h2>
<p>å¯¹æ¯”ä¸€ä¸‹ ğŸ‘‡</p>
<h4 data-id="heading-32">âŒ é”™è¯¯/å±é™©åšæ³•</h4>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ports:</span>
  - <span class="hljs-string">"6050:6050"</span>
</code></pre>
<p>å¹¶ä¸”ï¼š</p>
<ul>
<li>äº‘é˜²ç«å¢™ç›´æ¥æ”¾è¡Œ 6050</li>
</ul>
<p>åæœï¼š</p>
<ul>
<li>å¤–ç½‘å¯ä»¥ç›´æ¥æ‰“ä½  Koa</li>
<li>æ²¡é™æµ</li>
<li>æ²¡æ—¥å¿—</li>
<li>æ²¡é‰´æƒ</li>
<li>ææ˜“è¢«æ‰«ç«¯å£</li>
</ul>
<hr/>
<h4 data-id="heading-33">âœ… ä½ ç°åœ¨çš„åšæ³•ï¼ˆæ­£ç¡®ï¼‰</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">å…¬ç½‘ï¼šåªå¼€</span> <span class="hljs-number">9527</span>
<span class="hljs-string">Nginxï¼šç»Ÿä¸€å…¥å£</span>
<span class="hljs-string">åç«¯ï¼šå†…ç½‘æœåŠ¡</span>
</code></pre>
<p>ä¼˜åŠ¿ï¼š</p>
<ul>
<li>âœ… æ‰€æœ‰æ¥å£éƒ½èƒ½ç»Ÿä¸€åŠ é‰´æƒ / æ—¥å¿— / é™æµ</li>
<li>âœ… åç«¯ç«¯å£æ°¸ä¸æš´éœ²</li>
<li>âœ… å¯ä»¥éšæ„æ”¹åç«¯ç«¯å£ï¼Œä¸å½±å“å‰ç«¯</li>
<li>âœ… å¯ä»¥æŒ‚å¤šä¸ªåç«¯æœåŠ¡</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®‰å“åŸç”Ÿå†™uniappæ’ä»¶æ‰‹æŠŠæ‰‹æ•™å­¦è°ƒè¯•ã€æ‰“åŒ…ã€å‘å¸ƒã€‚]]></title>    <link>https://juejin.cn/post/7589207843787604003</link>    <guid>https://juejin.cn/post/7589207843787604003</guid>    <pubDate>2025-12-30T02:32:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589207843787604003" data-draft-id="7555405789659103284" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®‰å“åŸç”Ÿå†™uniappæ’ä»¶æ‰‹æŠŠæ‰‹æ•™å­¦è°ƒè¯•ã€æ‰“åŒ…ã€å‘å¸ƒã€‚"/> <meta itemprop="keywords" content="å‰ç«¯,uni-app"/> <meta itemprop="datePublished" content="2025-12-30T02:32:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ResponseState200"/> <meta itemprop="url" content="https://juejin.cn/user/2436173497121597"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®‰å“åŸç”Ÿå†™uniappæ’ä»¶æ‰‹æŠŠæ‰‹æ•™å­¦è°ƒè¯•ã€æ‰“åŒ…ã€å‘å¸ƒã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2436173497121597/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ResponseState200
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T02:32:26.000Z" title="Tue Dec 30 2025 02:32:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto;border:3px solid rgba(62,175,124,.2)}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-weight:700;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:6px;border:2px solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c}.markdown-body a:active,.markdown-body a:hover{border-bottom:1.5px solid #3eaf7c}.markdown-body a:before{content:"â‡²"}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(62,175,124,.2)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:.5rem solid;border-color:#42b983;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none}.markdown-body ul li:before{content:"â€¢";margin-right:4px;color:#3eaf7c}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å¤§å®¶å¥½å‘€ï¼Œä½œä¸ºä¸€ä¸ªå‰ç«¯å·¥ç¨‹å¸ˆï¼Œå¯¹äºä½¿ç”¨uniappæ¥å†™appå¤§å®¶åº”è¯¥å¹¶ä¸é™Œç”Ÿï¼Œä½†æ˜¯å¯¹äºå°è£…ç¬¬ä¸‰æ–¹æä¾›çš„<strong>å®‰å“åŸç”Ÿsdkç»™åˆ°uniapp</strong>å½“ä¸­å»ä½¿ç”¨ï¼Œå¹¶æ²¡æœ‰åšè¿‡ï¼Œå‰æ®µæ—¶é—´åˆšå¥½æœ‰è¿™ä¹ˆéœ€æ±‚ï¼Œåšäº†ä¸€ä¸ªuniappé“¾æ¥è“ç‰™è®¾å¤‡ï¼Œå¹¶ä¸”è°ƒç”¨å®‰å“åŸç”Ÿsdkçš„èƒ½åŠ›çš„è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚ï¼Œæƒ³ç€å†™ä¸€ä¸ªç¬”è®°ï¼Œéƒ½ä¸æ•¢å«åšæ•™ç¨‹çš„ä¸€ä¸ªæ–‡ç« ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜å¸Œæœ›å¤§å®¶å¯ä»¥æŒ‡æ•™ã€‚</p>
<hr/>
<h2 data-id="heading-1">å‰æœŸå‡†å¤‡</h2>
<ol>
<li>javaçš„sdkï¼Œç”±äºæ˜¯æ¶‰åŠåˆ°å®‰å“çš„åŸç”Ÿå¼€å‘ï¼Œæ‰€ä»¥è¿™ä¸ªæ˜¯å®‰å“çš„å¼€å‘ç¯å¢ƒè¿˜æ˜¯è¦æ­å»ºçš„ï¼Œæ•™ç¨‹ä¸€æœä¸€å¤§æŠŠï¼Œæˆ‘å°±ä¸èµ˜è¿°äº†</li>
<li>Android studioï¼Œå®‰å“åŸç”Ÿçš„IDEç¼–ç å·¥å…·</li>
<li>ä¸‹è½½uniappå®˜ç½‘ä¸­çš„ç¤ºä¾‹åŒ…ï¼Œåæ¥ç”¨äºè°ƒè¯•åŸç”Ÿå®‰å“ä»£ç æ—¶éœ€è¦ç”¨çš„åˆ°ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fnativesupport.dcloud.net.cn%2FNativePlugin%2Fcourse%2Fandroid.html" target="_blank" title="https://nativesupport.dcloud.net.cn/NativePlugin/course/android.html" ref="nofollow noopener noreferrer">nativesupport.dcloud.net.cn/NativePlugiâ€¦</a></li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3bbd447b19dc46fe86b2371985935845~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVzcG9uc2VTdGF0ZTIwMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666746&amp;x-signature=PPbJjbKmcfEN1lW6eFwdjTnUE6I%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-2">å®˜æ–¹ç¤ºä¾‹</h2>
<p>å‰æœŸå‡†å¤‡åšå¥½ï¼Œæˆ‘ä»¬ä½¿ç”¨android_studioæ‰“å¼€<strong>UniPlugin-Hello-AS</strong>è¿™ä¸ªé¡¹ç›®ï¼Œç­‰å¾…ä¾èµ–åŒ…å®‰è£…å®Œæˆã€‚</p>
<blockquote>
<p>å®‰è£…ä¾èµ–åŒ…ä¼šæ¯”è¾ƒæ…¢ï¼Œå»ºè®®ä½¿ç”¨ç§‘å­¦ä¸Šç½‘ï¼Œç„¶ååœ¨Android-studioä¸Šè®¾ç½®ä¸€ä¸‹ä»£ç†ï¼Œé€Ÿåº¦ä¼šå¿«å¾ˆå¤š</p>
</blockquote>
<h3 data-id="heading-3">è®¾ç½®ä»£ç†</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd138df9b9a24031b801f3cfd159a29f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVzcG9uc2VTdGF0ZTIwMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666746&amp;x-signature=6qutAWX9NY%2BAYAnPXtb%2BHB4SsTo%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-4">å®˜æ–¹ç¤ºä¾‹ä»£ç ç»“æ„</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e80322f06794585b80195bca460b3c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVzcG9uc2VTdGF0ZTIwMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666746&amp;x-signature=vxl%2FtADHxlCS3UqiNmHt%2B2XsmkE%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-5">è“ç‰™æ‰«ææ’ä»¶</h2>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦åšä¸€ä¸ªè“ç‰™æ‰«æå™¨çš„æ’ä»¶ï¼Œæä¾›ç»™uniappçš„é¡¹ç›®ä½¿ç”¨ã€‚åˆ†æä¸€ä¸‹éœ€æ±‚</p>
<ol>
<li>åŠŸèƒ½åŒ…æ‹¬ï¼Œè¿æ¥è“ç‰™æ‰«æå™¨ã€å¼€å§‹æ‰«æã€è·å–æ‰«æåˆ°çš„æ•°æ®ã€åœæ­¢æ‰«æã€‚</li>
<li>ç»¼ä¸Šæ‰€è¿°çš„åŠŸèƒ½è¦æ±‚ï¼Œæˆ‘ä»¬ä¸éœ€è¦å®‰å“åŸç”Ÿè¿™è¾¹å†™ç•Œé¢ï¼Œåªéœ€è¦æä¾›è°ƒç”¨sdkçš„èƒ½åŠ›ã€‚æ‰€ä»¥æˆ‘ä»¬å‚è€ƒå®˜æ–¹çš„<strong>uniplugin_module</strong>è¿™ä¸ªæ’ä»¶</li>
</ol>
<h3 data-id="heading-6">æ–°å»ºä¸€ä¸ªè“ç‰™æ‰«æå™¨çš„å®‰å“åŸç”Ÿæ¨¡å—</h3>
<p>æˆ‘ä»¬åœ¨å®˜æ–¹ç¤ºä¾‹çš„é¡¹ç›®ä¸Šï¼Œæ–°å»ºä¸€ä¸ª<strong>blue_scan</strong>çš„æ¨¡å—</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c475b18d4acc4306adc74c51f8f5904a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVzcG9uc2VTdGF0ZTIwMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666746&amp;x-signature=syzTkaMGgDgjTlZdKRFKHCqiHEo%3D" alt="image.png" loading="lazy"/></p>
<p>é€‰æ‹©<strong>Android Library</strong>,å¡«å†™æ¨¡å—åç§°</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6586998996649c090de076498788262~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVzcG9uc2VTdGF0ZTIwMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666746&amp;x-signature=N5lHfOYgqOqDq3xuz9HR3UiHCMg%3D" alt="image.png" loading="lazy"/></p>
<p>æ–°å»ºä¹‹åï¼Œç­‰å¾…ä¾èµ–åŒ…å®‰è£…å®Œæˆã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/329162bb321f44f29a1cb973d635eb5b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVzcG9uc2VTdGF0ZTIwMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666746&amp;x-signature=QaUIYrn9TZZST6dkHzydYwsVYls%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨æ¨¡å—çš„<strong>build.gradle</strong>ä¾èµ–æ–‡ä»¶ä¸ŠåŠ ä¸Šæ’ä»¶ç¼–å†™å¿…è¦çš„ä¾èµ–åŒ…ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ç›´æ¥ä»<strong>uniplugin_module</strong>ä¸‹çš„<strong>build.gradle</strong>ä¸­çš„<strong>dependencies</strong>ä¾èµ–é¡¹æ‹·è´è¿‡æ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¨¡å—çš„<strong>build.gradle</strong>ä¸‹çš„<strong>dependencies</strong>å°±åº”è¯¥å˜æˆä¸‹é¢çš„æ ·å­ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da19c558656047df919c53eefd12626e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVzcG9uc2VTdGF0ZTIwMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666746&amp;x-signature=Q2rO8FEYlo29C0uB6bder3skrJ8%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-javascript" lang="javascript">dependencies {

    compileOnly <span class="hljs-title function_">fileTree</span>(<span class="hljs-attr">dir</span>: <span class="hljs-string">'libs'</span>, <span class="hljs-attr">include</span>: [<span class="hljs-string">'*.jar'</span>])
    compileOnly <span class="hljs-title function_">fileTree</span>(<span class="hljs-attr">dir</span>: <span class="hljs-string">'../app/libs'</span>, <span class="hljs-attr">include</span>: [<span class="hljs-string">'uniapp-v8-release.aar'</span>])
    compileOnly <span class="hljs-string">'androidx.recyclerview:recyclerview:1.0.0'</span>
    compileOnly <span class="hljs-string">'androidx.legacy:legacy-support-v4:1.0.0'</span>
    compileOnly <span class="hljs-string">'androidx.appcompat:appcompat:1.0.0'</span>
    implementation <span class="hljs-string">'com.alibaba:fastjson:1.2.83'</span>
    implementation <span class="hljs-string">'com.facebook.fresco:fresco:1.13.0'</span>


    implementation <span class="hljs-string">'androidx.core:core-ktx:1.17.0'</span>
    implementation <span class="hljs-string">'androidx.appcompat:appcompat:1.7.1'</span>
    implementation <span class="hljs-string">'com.google.android.material:material:1.13.0'</span>
    testImplementation <span class="hljs-string">'junit:junit:4.13.2'</span>
    androidTestImplementation <span class="hljs-string">'androidx.test.ext:junit:1.3.0'</span>
    androidTestImplementation <span class="hljs-string">'androidx.test.espresso:espresso-core:3.7.0'</span>
}
</code></pre>
<p>ç„¶ååŒæ­¥ä¸€ä¸‹ä¾èµ–ï¼Œå°±ä¼šè‡ªåŠ¨å®‰è£…ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ac1318cd6c54c46b3e747971dfbf868~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVzcG9uc2VTdGF0ZTIwMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666746&amp;x-signature=zwygISLeSK7xJR93NUEQHJE56Lg%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-7">æ’ä»¶ä»£ç ç¼–å†™</h2>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„æ’ä»¶é¡¹ç›®å·²ç»æ–°å»ºå¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥ç€æ‰‹å†™å¯¹åº”çš„ä»£ç äº†</p>
<h3 data-id="heading-8">æ–°å»ºä¸€ä¸ªBlueScanç±»</h3>
<p>åœ¨æˆ‘ä»¬é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ <strong>/blue_scan/src/main/java/com.example.blue_scan</strong> ä¸‹æ–°å»ºä¸€ä¸ªåä¸ºBlueScançš„javaçš„classç±»</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c9e496bb9f2413087e7fe72135c5d6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVzcG9uc2VTdGF0ZTIwMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666746&amp;x-signature=ARVONW5BPwxx%2BP48sp4GW7pEVmE%3D" alt="image.png" loading="lazy"/></p>
<p>æ’ä»¶ç±»å¿…é¡»ç»§æ‰¿<strong>UniModule</strong>ï¼Œæ‰€æœ‰æˆ‘ä»¬å°†ä»£ç ä¿®æ”¹æˆä¸‹é¢çš„æ ·å­ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.blue_scan;
<span class="hljs-keyword">import</span> io.dcloud.feature.uniapp.common.UniModule;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BlueScan</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">UniModule</span> {

}
</code></pre>
<h3 data-id="heading-9">è¿æ¥è“ç‰™æ‰«ææ‹,ä¸æ–­å¼€è“ç‰™æ‰«ææ‹å‡½æ•°</h3>
<p>æœ‰å‡ ä¸ªæ³¨æ„ç‚¹ï¼š</p>
<ol>
<li>å‡½æ•°å¿…é¡»æ˜¯public</li>
<li>éœ€è¦ä½¿ç”¨@UniJSMethod(uiThread = true)è£…é¥°å™¨</li>
<li>å®‰å“åŸç”Ÿç»™uniappä¼ å‚éœ€è¦é€šè¿‡UniJSCallback</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.blue_scan;
<span class="hljs-keyword">import</span> io.dcloud.feature.uniapp.annotation.UniJSMethod;
<span class="hljs-keyword">import</span> io.dcloud.feature.uniapp.bridge.UniJSCallback;
<span class="hljs-keyword">import</span> io.dcloud.feature.uniapp.common.UniModule;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BlueScan</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">UniModule</span> {
    <span class="hljs-meta">@UniJSMethod(uiThread = true)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">connectBlueScan</span><span class="hljs-params">(UniJSCallback callback)</span>{
    <span class="hljs-comment">// è¿æ¥è“ç‰™æ‰«ææ‹æˆåŠŸï¼Œè¿™é‡Œçš„trueå¯ä»¥åœ¨uniappä»£ç ä¸­æ‹¿åˆ°ï¼Œæ‰€ä»¥é€šè¿‡è¿™ç§æ–¹å¼ä¼ é€’æ•°æ®</span>
        callback.invoke(<span class="hljs-literal">true</span>);
    }

    <span class="hljs-meta">@UniJSMethod(uiThread = true)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">disconnectBlueScan</span><span class="hljs-params">(UniJSCallback callback)</span>{
        <span class="hljs-comment">// æ–­å¼€è“ç‰™æ‰«æå™¨</span>
        callback.invoke(<span class="hljs-literal">true</span>);
    }
}
</code></pre>
<h3 data-id="heading-10">è·å–è“ç‰™æ‰«ææ‹çš„æ•°æ®</h3>
<p>è¿™é‡Œè·Ÿä¸Šé¢çš„å‡½æ•°ä¼šæœ‰ä¸€ç‚¹ä¸ä¸€æ ·ï¼Œå› ä¸ºè“ç‰™æ‰«ææ‹çš„æ•°æ®ä¼ é€’æ˜¯éœ€è¦å¤šæ¬¡ä¼ é€’çš„ï¼Œä¹Ÿå¯ä»¥ç®€å•ç†è§£éœ€è¦ä¸€ä¸ªç±»ä¼¼äº'<strong>é•¿é“¾æ¥çš„æ¦‚å¿µ</strong>'ï¼Œ<strong>è¿™é‡Œæœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼ï¼ï¼</strong>ï¼Œåœ¨uniappçš„ä»£ç ä¸­éœ€è¦é€šè¿‡å¯¹è±¡åµŒå¥—å‡½æ•°çš„æ–¹å¼ä¼ è¿™ä¸ªå›è°ƒå‡½æ•°ã€‚å¦åˆ™åªæœ‰ç¬¬ä¸€æ¬¡ä¼šè°ƒç”¨æˆåŠŸï¼Œè¿™ä¸ªåº”è¯¥è·Ÿå®‰å“çš„åƒåœ¾å›æ”¶æœºåˆ¶æœ‰å…³ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@UniJSMethod(uiThread = true)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getBlueScanData</span><span class="hljs-params">(UniJSCallback callback)</span>{
    <span class="hljs-comment">// ä¼ é€’è“ç‰™æ‰«ææ‹çš„æ•°æ®ï¼Œéœ€è¦å¤šæ¬¡ä¼ é€’çš„è¯ï¼Œå°±ä½¿ç”¨invokeAndKeepAliveçš„æ–¹å¼</span>
    callback.invokeAndKeepAlive(<span class="hljs-number">1</span>);
}
</code></pre>
<p>uniapp è°ƒç”¨æ—¶ï¼ˆ<strong>è¿™é‡Œæ˜¯ä¼ªä»£ç </strong>ï¼‰,çœ‹ä¸‹é¢ä»£ç çš„æ–¹å¼æ‰èƒ½ä¿è¯<strong>invokeAndKeepAlive</strong>çš„æ–¹å¼æ­£å¸¸ç”Ÿæ•ˆã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> callBackObj = {
    <span class="hljs-comment">// éœ€è¦ä½¿ç”¨å¯¹è±¡åµŒå¥—å‡½æ•°çš„æ–¹å¼ä¼ é€’ï¼Œæ‰èƒ½ä¿è¯æ­£å¸¸ä¼ é€’æ•°æ®</span>
    <span class="hljs-attr">fn</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>){
        
    }
}

blueScan.<span class="hljs-title function_">getBlueScanData</span>(callBackObj.<span class="hljs-property">fn</span>)
</code></pre>
<h3 data-id="heading-11">å®‰å“é¡¹ç›®ä¸­æ³¨å†Œæ’ä»¶æ¨¡å—</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ce1de31526c4d79b4fc5782262325be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVzcG9uc2VTdGF0ZTIwMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666746&amp;x-signature=TxCFJIhf0TnQYezGlWyKqf7V4PE%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-12">æ’ä»¶è°ƒè¯•</h2>
<p>å®‰å“åŸç”Ÿçš„ä»£ç è°ƒè¯•ï¼Œæœ€æ–¹ä¾¿çš„æ–¹å¼å°±æ˜¯å®˜æ–¹ç¤ºä¾‹ä¸­çš„æ–¹å¼ï¼Œé€šè¿‡æ‰“åŒ…uniappçš„æœ¬åœ°èµ„æºæ”¾åˆ°å®‰å“é¡¹ç›®ä¸­è¿›è¡Œè°ƒè¯•ï¼Œå› ä¸ºuniappæ˜¯æ— æ³•çœ‹åˆ°å®‰å“åŸç”Ÿæ’ä»¶æ‰“å°çš„ä¸€äº›è¾“å‡ºçš„ï¼Œå¹¶ä¸”uniappæ˜¯éœ€è¦æ‰“åŒ…è‡ªå®šä¹‰åŸºåº§æ‰èƒ½ä½¿ç”¨å®‰å“åŸç”Ÿæ’ä»¶ï¼Œæ¯æ¬¡æ”¹åŠ¨æ’ä»¶éƒ½éœ€è¦é‡æ–°æ‰“åŒ…è‡ªå®šä¹‰åŸºåº§ï¼Œæ•ˆç‡éå¸¸æ…¢ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸‹é¢ä½¿ç”¨å®˜æ–¹ç¤ºä¾‹ä¸­çš„æ–¹å¼</p>
<h3 data-id="heading-13">uniappé¡¹ç›®ä»£ç ä¸­ï¼Œå¼•ç”¨æ’ä»¶ï¼Œå¹¶ä¸”è°ƒç”¨ã€‚</h3>
<p>uniappä¸­å†™å¦‚ä¸‹ä»£ç ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;template&gt;
	<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content"</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">tap</span>=<span class="hljs-string">"connectBlueScan"</span>&gt;</span>è¿æ¥è“ç‰™<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">tap</span>=<span class="hljs-string">"disconnectBlueScan"</span>&gt;</span>æ–­å¼€è“ç‰™<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">tap</span>=<span class="hljs-string">"getBlueScan"</span>&gt;</span>è·å–è“ç‰™æ•°æ®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
	<span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
	<span class="hljs-comment">// è“ç‰™åŸç”Ÿæ’ä»¶,è¿™é‡Œçš„åç§°å°±æ˜¯åœ¨å®‰å“é¡¹ç›®ä¸­dcloud_uniplugins.jsonä¸­å†™çš„name</span>
	<span class="hljs-keyword">const</span> blueScanNativePlugin = uni.requireNativePlugin(<span class="hljs-string">'BlueScan'</span>);
	<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
		<span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
			<span class="hljs-keyword">return</span> {
				<span class="hljs-attr">title</span>: <span class="hljs-string">'Hello'</span>
			}
		},
		<span class="hljs-title function_">onLoad</span>(<span class="hljs-params"/>) {

		},
		<span class="hljs-attr">methods</span>: {
			<span class="hljs-title function_">connectBlueScan</span>(<span class="hljs-params"/>){
				blueScanNativePlugin.<span class="hljs-title function_">connectBlueScan</span>(<span class="hljs-function">(<span class="hljs-params">data</span>)=&gt;</span>{
					<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'connectBlueScan---'</span>,data)
				})
			},
			<span class="hljs-title function_">disconnectBlueScan</span>(<span class="hljs-params"/>){
				blueScanNativePlugin.<span class="hljs-title function_">disconnectBlueScan</span>(<span class="hljs-function">(<span class="hljs-params">data</span>)=&gt;</span>{
					<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'disconnectBlueScan-----'</span>,data)
				})
			},
			<span class="hljs-title function_">getBlueScan</span>(<span class="hljs-params"/>){
				
				<span class="hljs-keyword">const</span> callBack = {
					<span class="hljs-attr">fn</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>){
						<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getBlueScan----'</span>,data)
					}
				}
				
				blueScanNativePlugin.<span class="hljs-title function_">getBlueScanData</span>(callBack.<span class="hljs-property">fn</span>)
			},
		}
	}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
	<span class="hljs-selector-class">.content</span> {
		<span class="hljs-attribute">display</span>: flex;
		<span class="hljs-attribute">flex-direction</span>: column;
		<span class="hljs-attribute">align-items</span>: center;
		<span class="hljs-attribute">justify-content</span>: center;
	}

	<span class="hljs-selector-class">.logo</span> {
		<span class="hljs-attribute">height</span>: <span class="hljs-number">200</span>rpx;
		<span class="hljs-attribute">width</span>: <span class="hljs-number">200</span>rpx;
		<span class="hljs-attribute">margin-top</span>: <span class="hljs-number">200</span>rpx;
		<span class="hljs-attribute">margin-left</span>: auto;
		<span class="hljs-attribute">margin-right</span>: auto;
		<span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">50</span>rpx;
	}

	<span class="hljs-selector-class">.text-area</span> {
		<span class="hljs-attribute">display</span>: flex;
		<span class="hljs-attribute">justify-content</span>: center;
	}

	<span class="hljs-selector-class">.title</span> {
		<span class="hljs-attribute">font-size</span>: <span class="hljs-number">36</span>rpx;
		<span class="hljs-attribute">color</span>: <span class="hljs-number">#8f8f94</span>;
	}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<p>åˆ°uniappå¼€å‘è€…åå°åˆ›å»ºandroidçš„ç¦»çº¿key</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b62d1b1fd7c4b6aa7b07d3a8ff219cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVzcG9uc2VTdGF0ZTIwMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666746&amp;x-signature=jYm0SJGs95fEiAGDR7EK2Kw%2BUMI%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™ä¸ªæ—¶å€™ä¼šéœ€è¦ç”¨åˆ°å®‰å“çš„ç­¾åä¿¡æ¯ï¼Œæˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªå®‰å“çš„ç­¾åï¼Œæˆ‘ä»¬é€šè¿‡keytoolå‘½ä»¤è¡Œçš„å½¢å¼æ¥ç”Ÿæˆï¼Œä¸‹é¢åªæ˜¯ç¤ºä¾‹ï¼Œå…·ä½“çš„ä¿¡æ¯å¯ä»¥æ ¹æ®è‡ªå·±çš„è¦æ±‚æ¥å¡«å†™ã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet">keytool -genkey -v -keystore my-release-<span class="hljs-keyword">key</span>.jks -keyalg RSA -keysize <span class="hljs-number">2048</span> -validity <span class="hljs-number">10000</span> -<span class="hljs-keyword">alias</span> my-<span class="hljs-keyword">alias</span>
</code></pre>
<p>æŸ¥çœ‹ç­¾åä¸­çš„ä¿¡æ¯ï¼Œåˆ°åå°ä¸­è¿›å…¥å¡«å…¥ã€‚</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># æŸ¥çœ‹ç­¾åä¿¡æ¯</span>
keytool -list -v -keystore <span class="hljs-keyword">my</span>-release-key.jks
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0589a9eb094148188f327fc811243602~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVzcG9uc2VTdGF0ZTIwMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666746&amp;x-signature=%2BwuJe2tIMmQLoW1uGKrxSnrLHeY%3D" alt="image.png" loading="lazy"/></p>
<p>ä¿å­˜å¥½ä¹‹åï¼Œå°±å¯ä»¥ç”Ÿæˆçš„ç¦»çº¿keyï¼Œå¡«å†™åˆ°å®‰å“é¡¹ç›®ä¸­</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ca491ee100f4ab6aedc3f923495db79~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVzcG9uc2VTdGF0ZTIwMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666746&amp;x-signature=S%2Bkuv7N0IZ6s99utqSfz3VtVLUE%3D" alt="image.png" loading="lazy"/></p>
<p>æŠŠå®‰å“çš„ç­¾åæ–‡ä»¶æ”¾åˆ°å®‰å“é¡¹ç›®ä¸­çš„appæ–‡ä»¶å¤¹çš„æ ¹ç›®å½•ä¸Šï¼Œå¹¶å¡«å†™å¯¹åº”çš„ç­¾åé…ç½®</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/661b46633ecc4aa4847efb9642855f19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVzcG9uc2VTdGF0ZTIwMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666746&amp;x-signature=DIy%2FH1dkj6yUPSebfUCsEBngsa8%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨uniappé¡¹ç›®ä¸­æ–°å»ºä¸€ä¸ª<strong>nativeplugins</strong>çš„æ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªåç§°æ˜¯å›ºå®šçš„ï¼Œå­˜æ”¾å®‰å“æ’ä»¶å†…å®¹ã€‚åœ¨è¿™ä¸ªç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªç›®å½•æ’ä»¶çš„åç§°ï¼Œæˆ‘ä»¬å°±å«BlueScan,åœ¨ä¸‹é¢æ–°å»ºä¸€ä¸ªpackage.jsonã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"BlueScan"</span><span class="hljs-punctuation">,</span> 
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"BlueScan"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// IDå¿…é¡»å”¯ä¸€</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"_dp_type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"nativeplugin"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"_dp_nativeplugin"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"android"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"hooksClass"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"integrateType"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"aar"</span><span class="hljs-punctuation">,</span>
	  <span class="hljs-attr">"plugins"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span>
	  	<span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"module"</span><span class="hljs-punctuation">,</span>
	  	<span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"BlueScan"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// åœ¨uniappè¿™è¾¹è°ƒç”¨çš„æ—¶å€™æ’ä»¶çš„åç§°</span>
	  	<span class="hljs-attr">"class"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"com.example.blue_scan.BlueScan"</span> <span class="hljs-comment">// å®‰å“åŸç”Ÿé¡¹ç›®ä¸Šçš„åŒ…å</span>
	  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
Z
</code></pre>
<p>å¡«å†™å¥½å†…å®¹ä¹‹åï¼Œæˆ‘ä»¬åœ¨uniappé¡¹ç›®ä¸­çš„mainfest.jsoné…ç½®ä¸Šå‹¾é€‰è¿™ä¸ªå®‰å“åŸç”Ÿæ’ä»¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5924cb1a64446b99f77afa8a13adf61~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVzcG9uc2VTdGF0ZTIwMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666746&amp;x-signature=UtKvn1OefYOTs%2Fb8A25G%2FBFncS0%3D" alt="image.png" loading="lazy"/></p>
<p>å‹¾é€‰å®Œä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†uniappä»£ç æ‰“åŒ…æœ¬åœ°èµ„æºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85d5acc1f62c4037b6e15c4f49fa0773~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVzcG9uc2VTdGF0ZTIwMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666746&amp;x-signature=MiWWVsqLyHiC4vwUmDBl5c0d0%2FU%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰“åŒ…å‡ºæ¥çš„èµ„æºæ”¾åˆ°å®‰å“é¡¹ç›®ä¸‹app/src/main/assets/apps</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e778a48228ed4e0391143e11b6805189~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVzcG9uc2VTdGF0ZTIwMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666746&amp;x-signature=HNf36bAc8kl5mm%2BXFaxFt36qBGw%3D" alt="image.png" loading="lazy"/></p>
<p>ä¿®æ”¹dcloud_control.xmlæ–‡ä»¶ä¸­çš„appidï¼Œä¸ºuniappèµ„æºåŒ…çš„æ–‡ä»¶å</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad164837a2cf4e85b2809ae99d74b3ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVzcG9uc2VTdGF0ZTIwMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666746&amp;x-signature=tV6z6dhJ6JnwuoMtHTtUu7kFu5I%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚æœéœ€è¦æ˜¾ç¤ºå‡ºuniappè¿™è¾¹çš„æ‰“å°æ—¥å¿—åˆ°å®‰å“è¿™è¾¹çš„æ§åˆ¶å°ä¸Šçš„è¯ï¼Œå°±ä¿®æ”¹ä¸€ä¸‹dcloud_control.xmlæ–‡ä»¶ï¼ŒåŠ ä¸Šä¸‹é¢çš„ä»£ç ï¼Œ<strong>éœ€è¦æ³¨æ„åŠ ä¸Šäº†è¿™ä¸ªä»£ç çš„è¯ï¼Œæœ€å¥½æ¯æ¬¡éƒ½åˆ é™¤Appé‡æ–°å®‰è£…ï¼Œå¦åˆ™ä¼šå‡ºç°ä»£ç ç¼“å­˜çš„é—®é¢˜ï¼Œå¹¶ä¸”åœ¨ç”Ÿäº§å‘å¸ƒçš„æ—¶å€™éœ€è¦å»æ‰è¿™æ®µä»£ç </strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/101eb826a3054548a4fb8c168e4023ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVzcG9uc2VTdGF0ZTIwMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666746&amp;x-signature=FWnNYMwwMvfd1VBuiUGFTfgM58Q%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-14">è¿è¡Œåˆ°çœŸæœº</h2>
<p>å‰é¢æ‰€æœ‰çš„å·¥ä½œéƒ½ç®—åšå®Œäº†ï¼Œæ²¡æœ‰é—®é¢˜çš„è¯ï¼Œæˆ‘ä»¬è¿æ¥ä¸Šæ‰‹æœºï¼Œç„¶åç›´æ¥è¿è¡Œåˆ°çœŸæœºï¼Œå½“å½“å½“~èƒ½æ­£å¸¸çœ‹åˆ°æ‰“å°çš„æ—¥å¿—</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64c6277e19514f32adc4540009e5b641~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVzcG9uc2VTdGF0ZTIwMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666746&amp;x-signature=YFHiQ1CGSmxILqicMF0SCsUMWk4%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-15">æ‰“åŒ…æ’ä»¶åˆ°uniappé¡¹ç›®ä¸­ä½¿ç”¨</h2>
<p>å®‰å“æ‰“åŒ…æ’ä»¶</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f33b0d43b33446528e2be2b42ded5df1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVzcG9uc2VTdGF0ZTIwMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666746&amp;x-signature=yVLY2ZGIpxekqwOnmrvzcQj5L0U%3D" alt="image.png" loading="lazy"/></p>
<p>æ‹·è´æ‰“åŒ…å‡ºçš„æ’ä»¶</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1587b6e7d9884eb8a7b9931c0fce2640~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVzcG9uc2VTdGF0ZTIwMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666746&amp;x-signature=J419eZdJmoqofQiyUbXVeEAdBAA%3D" alt="image.png" loading="lazy"/></p>
<p>æ”¾åˆ°uniappé¡¹ç›®çš„nativepluginsç›®å½•ä¸‹å¯¹åº”çš„æ’ä»¶æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªandroidçš„æ–‡ä»¶å¤¹ï¼ŒæŠŠæ‹·è´çš„æ’ä»¶åŒ…æ”¾è¿›å»</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa2f6c55ad9344b295de19f69444d718~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUmVzcG9uc2VTdGF0ZTIwMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666746&amp;x-signature=dXsSjTAvbGmjp5YkJ8xo8AYLyDs%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶åè¿è¡Œ<strong>è‡ªå®šä¹‰åŸºåº§</strong>æˆ–è€…ç›´æ¥æ‰“åŒ…å°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ï¼Œ<strong>uniappæ ‡å‡†åŸºåº§æ˜¯ä¸æ”¯æŒè‡ªå®šä¹‰æ’ä»¶çš„</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI Agent æ ¸å¿ƒç®¡ç†é€»è¾‘ï¼šå·¥å…·çš„ç®¡ç†å’Œè°ƒåº¦]]></title>    <link>https://juejin.cn/post/7589201772133810217</link>    <guid>https://juejin.cn/post/7589201772133810217</guid>    <pubDate>2025-12-30T04:52:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589201772133810217" data-draft-id="7589246131585908771" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI Agent æ ¸å¿ƒç®¡ç†é€»è¾‘ï¼šå·¥å…·çš„ç®¡ç†å’Œè°ƒåº¦"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2025-12-30T04:52:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ½˜é”¦"/> <meta itemprop="url" content="https://juejin.cn/user/730549110707431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI Agent æ ¸å¿ƒç®¡ç†é€»è¾‘ï¼šå·¥å…·çš„ç®¡ç†å’Œè°ƒåº¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/730549110707431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ½˜é”¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T04:52:16.000Z" title="Tue Dec 30 2025 04:52:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç®€å•æ¥è¯´ï¼ŒAI Agent å°±æ˜¯ä¸€ä¸ªèƒ½å¤Ÿè‡ªä¸»æ„ŸçŸ¥ç¯å¢ƒã€åˆ¶å®šè®¡åˆ’ã€é‡‡å–è¡ŒåŠ¨æ¥å®Œæˆç‰¹å®šç›®æ ‡çš„ç³»ç»Ÿã€‚</p>
<p>ä»æ¶æ„çš„è§’åº¦æ¥çœ‹ï¼Œåˆå¯ä»¥åˆ†ä¸ºæ„ŸçŸ¥æ¨¡å—ï¼ˆåŒ…æ‹¬çŠ¶æ€ä¸Šä¸‹æ–‡å’Œæ„å›¾ä¸Šä¸‹æ–‡ï¼Œè€Œæ„å›¾ä¸Šä¸‹æ–‡æ˜¯ä¸€ä¸ªæ›´éš¾ä¸€äº›çš„é—®é¢˜ï¼‰ï¼Œæ¨ç†æ¨¡å—ï¼ˆLLM ä¸»æ§éƒ¨åˆ†ï¼‰ï¼Œè®°å¿†æ¨¡å—ï¼Œè¡ŒåŠ¨æ¨¡å—ã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬è¦èŠçš„æ˜¯è´¯ç©¿äºå„ä¸ªæ¨¡å—ä¸­çš„å·¥å…·ï¼Œå·¥å…·ä¸ä»…ä»…æ˜¯è¡ŒåŠ¨æ¨¡å—ï¼Œåœ¨æ„ŸçŸ¥ï¼Œè®°å¿†ä¸­éƒ½æœ‰å¯èƒ½ç”¨åˆ°å·¥å…·ã€‚</p>
<h2 data-id="heading-0">1. OpenManus çš„å·¥å…·ç®¡ç†å’Œè°ƒåº¦</h2>
<p>çœ‹äº† OpenManus çš„ä»£ç ï¼Œæ•´ä¸ªå·¥ç¨‹ä¸­ Tool çš„å æ¯”è¿˜æ˜¯æ¯”è¾ƒå¤§çš„ï¼Œè¿™ä¹Ÿä¸æ˜¯ä¸€ä¸ªå¤§è€Œå…¨çš„æ¡†æ¶ã€‚</p>
<p>ç›´æ¥çœ‹ä»£ç </p>
<h3 data-id="heading-1">1.1 BaseTool åŸºç¡€ç±»</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseTool</span>(<span class="hljs-title class_ inherited__">ABC</span>):
    name: <span class="hljs-built_in">str</span>
    description: <span class="hljs-built_in">str</span>  
    parameters: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]
    
<span class="hljs-meta">    @abstractmethod</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">execute</span>(<span class="hljs-params">self, tool_input: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]</span>) -&gt; ToolResult
</code></pre>
<p>name ç”¨äºæ ‡è¯†ï¼Œdescription ç»™ LLM çœ‹ï¼Œparameters å®šä¹‰è¾“å…¥è§„èŒƒï¼Œexecute æ‰§è¡Œå…·ä½“é€»è¾‘ã€‚è¿™å‡ ä¸ªå­—æ®µï¼Œå·²ç»æ¶µç›–äº†å·¥å…·ç®¡ç†çš„æ ¸å¿ƒè¦ç´ ã€‚</p>
<h3 data-id="heading-2">1.2 ToolCollection ç®¡ç†å™¨</h3>
<p>å·¥å…·é›†åˆçš„ç®¡ç†é€šè¿‡ ToolCollection ç±»å®ç°ï¼Œæ ¸å¿ƒæ˜¯ä¸€ä¸ªå­—å…¸ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ToolCollection</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.tool_map: <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, BaseTool] = {}
</code></pre>
<p>æ•´ä¸ªå®ç°æœ‰ä»¥ä¸‹ä¸‰ä¸ªå°ç‚¹ï¼š</p>
<ul>
<li><strong>O(1) çš„æŸ¥æ‰¾æ€§èƒ½</strong>ã€‚ç”¨å·¥å…·åä½œä¸º keyï¼Œç›´æ¥æŸ¥æ‰¾ï¼Œæ²¡æœ‰éå†ï¼Œæ²¡æœ‰å¤æ‚çš„åŒ¹é…é€»è¾‘ã€‚</li>
<li><strong>ç»Ÿä¸€çš„æ‰§è¡Œæ¥å£</strong>ã€‚æ‰€æœ‰å·¥å…·è°ƒç”¨éƒ½é€šè¿‡ <code>execute</code> æ–¹æ³•ï¼Œä¼ å…¥å·¥å…·åå’Œå‚æ•°ï¼Œè¿”å›ç»Ÿä¸€çš„ ToolResultã€‚è¿™ç§ä¸€è‡´æ€§è®©ä¸Šå±‚è°ƒç”¨å˜å¾—æå…¶ç®€å•ã€‚</li>
<li><strong>ç»Ÿä¸€çš„é”™è¯¯å¤„ç†</strong>ã€‚å·¥å…·ä¸å­˜åœ¨ã€æ‰§è¡Œå¤±è´¥éƒ½ä¼šè¿”å› ToolFailureï¼Œä¸ä¼šæŠ›å¼‚å¸¸æ‰“æ–­æµç¨‹ã€‚è¿™ç§è®¾è®¡è®©ç³»ç»Ÿæ›´å¥å£®ã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">add_tool</span>(<span class="hljs-params">self, tool: BaseTool</span>) -&gt; <span class="hljs-literal">None</span>:
    <span class="hljs-keyword">if</span> tool.name <span class="hljs-keyword">in</span> self.tool_map:
        logger.warning(<span class="hljs-string">f"Tool <span class="hljs-subst">{tool.name}</span> already exists, overwriting"</span>)
    self.tool_map[tool.name] = tool
</code></pre>
<p>åœ¨æ·»åŠ å·¥å…·æ—¶å¯ä»¥è¦†ç›–å·²æœ‰å·¥å…·ã€‚</p>
<h3 data-id="heading-3">1.3 Think-Act å¾ªç¯</h3>
<p>OpenManus å®ç°äº†æ ‡å‡†çš„ ReActï¼ˆReasoning and Actingï¼‰æ¨¡å¼ï¼Œä½†åšäº†å¾ˆå¤šç»†èŠ‚ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">step</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-literal">None</span>:
    <span class="hljs-keyword">await</span> self.think()  <span class="hljs-comment"># æ€è€ƒï¼šå†³å®šç”¨ä»€ä¹ˆå·¥å…·</span>
    <span class="hljs-keyword">await</span> self.act()    <span class="hljs-comment"># è¡ŒåŠ¨ï¼šæ‰§è¡Œå·¥å…·è°ƒç”¨</span>
</code></pre>
<p>è¿™ä¸ªå®ç°æ˜¯åœ¨ ReActAgent ä¸­å®šä¹‰çš„ï¼Œthink é˜¶æ®µè®© LLM åˆ†æå½“å‰çŠ¶æ€å¹¶é€‰æ‹©å·¥å…·ï¼Œact é˜¶æ®µæ‰§è¡Œå·¥å…·å¹¶æ”¶é›†ç»“æœã€‚ä¸¤ä¸ªé˜¶æ®µåˆ†ç¦»ï¼Œè®©æ•´ä¸ªæµç¨‹å¯æ§ã€å¯è°ƒè¯•ã€‚</p>
<h3 data-id="heading-4">1.4 å·¥å…·é€‰æ‹©</h3>
<p>å·¥å…·é€‰æ‹©æ˜¯æ•´ä¸ªç³»ç»Ÿçš„æ ¸å¿ƒï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">think</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-literal">None</span>:
    response = <span class="hljs-keyword">await</span> self.llm.ask_tool(
        messages=self.memory.get_messages(),
        system_prompts=self.system_prompts,
        available_tools=self.available_tools.get_tool_schemas(),
        tool_choices=self.tool_choices
    )
</code></pre>
<p>å®ƒæŠŠå‡ ä¸ªå…³é”®ä¿¡æ¯éƒ½ä¼ ç»™ LLMï¼š</p>
<ul>
<li><strong>å†å²å¯¹è¯</strong>ï¼ˆmessagesï¼‰ï¼šè®© LLM äº†è§£ä¸Šä¸‹æ–‡</li>
<li><strong>ç³»ç»Ÿæç¤º</strong>ï¼ˆsystem_promptsï¼‰ï¼šå®šä¹‰ Agent çš„è¡Œä¸ºè§„èŒƒ</li>
<li><strong>å¯ç”¨å·¥å…·</strong>ï¼ˆavailable_toolsï¼‰ï¼šå‘Šè¯‰ LLM æœ‰å“ªäº›å·¥å…·å¯ç”¨</li>
<li><strong>é€‰æ‹©æ¨¡å¼</strong>ï¼ˆtool_choicesï¼‰ï¼šæ§åˆ¶æ˜¯å¦å¿…é¡»é€‰æ‹©å·¥å…·</li>
</ul>
<p>è¿™ç§è®¾è®¡è®©å·¥å…·é€‰æ‹©æ—¢çµæ´»åˆå¯æ§ã€‚</p>
<h3 data-id="heading-5">1.5 æ‰¹é‡æ‰§è¡Œå’Œç»“æœå¤„ç†</h3>
<p>OpenManus æ”¯æŒä¸€æ¬¡é€‰æ‹©å¤šä¸ªå·¥å…·å¹¶è¡Œæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">act</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-literal">None</span>:
    <span class="hljs-keyword">if</span> self.tool_calls:
        <span class="hljs-keyword">for</span> tool_call <span class="hljs-keyword">in</span> self.tool_calls:
            observation = <span class="hljs-keyword">await</span> self.execute_tool(tool_call)
            self.memory.add_message(ToolMessage(observation, tool_call.<span class="hljs-built_in">id</span>))
</code></pre>
<p>æ¯ä¸ªå·¥å…·çš„æ‰§è¡Œç»“æœéƒ½ä¼šè®°å½•åˆ° memory ä¸­ï¼Œä¾›ä¸‹ä¸€è½®æ€è€ƒä½¿ç”¨ã€‚</p>
<h3 data-id="heading-6">1.6 ç‰¹æ®Šå·¥å…·å¤„ç†</h3>
<p>OpenManus é¢„ç•™äº†ç‰¹æ®Šå·¥å…·çš„å¤„ç†æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_special_tool</span>(<span class="hljs-params">self, tool_call: ToolCall</span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-keyword">if</span> tool_call.name == <span class="hljs-string">"Terminate"</span>:
        self.should_stop = <span class="hljs-literal">True</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Task completed successfully."</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"Unknown special tool: <span class="hljs-subst">{tool_call.name}</span>"</span>
</code></pre>
<p>Terminate å·¥å…·ç”¨äºä¼˜é›…ç»ˆæ­¢ï¼Œè¿™ç§è®¾è®¡é¿å…äº†ç¡¬ç¼–ç çš„é€€å‡ºé€»è¾‘ã€‚ä½ å¯ä»¥è½»æ¾æ·»åŠ å…¶ä»–ç‰¹æ®Šå·¥å…·ï¼Œæ¯”å¦‚ Pauseï¼ˆæš‚åœï¼‰ã€Checkpointï¼ˆä¿å­˜çŠ¶æ€ï¼‰ç­‰ã€‚</p>
<h2 data-id="heading-7">2. Gemini CLI çš„å·¥å…·ç®¡ç†å’Œè°ƒåº¦</h2>
<p><strong>Gemini CLI æŠŠæ‰€æœ‰å·¥å…·éƒ½æ‰”ç»™å¤§æ¨¡å‹ï¼Œè®©å®ƒè‡ªå·±é€‰</strong>ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å°±è¿™ä¹ˆç®€å•ï¼Œæ‰€æœ‰å·¥å…·ä¸€è‚¡è„‘ç»™ LLM</span>
<span class="hljs-keyword">async</span> <span class="hljs-title function_">setTools</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
  <span class="hljs-keyword">const</span> toolRegistry = <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-title function_">getToolRegistry</span>();
  <span class="hljs-keyword">const</span> toolDeclarations = toolRegistry.<span class="hljs-title function_">getFunctionDeclarations</span>();
  <span class="hljs-keyword">const</span> <span class="hljs-attr">tools</span>: <span class="hljs-title class_">Tool</span>[] = [{ <span class="hljs-attr">functionDeclarations</span>: toolDeclarations }];
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getChat</span>().<span class="hljs-title function_">setTools</span>(tools);
}
</code></pre>
<p>ç°åœ¨çš„å¤§æ¨¡å‹å·²ç»è¶³å¤Ÿèªæ˜ï¼Œèƒ½å¤Ÿæ ¹æ®ä¸Šä¸‹æ–‡é€‰æ‹©åˆé€‚çš„å·¥å…·ã€‚ä¸å…¶èŠ±å¤§åŠ›æ°”è®¾è®¡å¤æ‚çš„å·¥å…·é€‰æ‹©ç­–ç•¥ï¼Œä¸å¦‚ç›¸ä¿¡ AI çš„åˆ¤æ–­åŠ›ã€‚ä½†ä¼šæœ‰å¯èƒ½å­˜åœ¨å·¥å…·ã€Œçˆ†ç‚¸ã€çš„æƒ…å†µï¼Œè¿™ä¸ªåé¢æˆ‘ä»¬å†èŠã€‚</p>
<h3 data-id="heading-8">2.1 ä¸‰å±‚å·¥å…·å‘ç°æœºåˆ¶</h3>
<p>Gemini CLI åœ¨å·¥å…·å‘ç°æ–¹é¢è®¾è®¡äº†ä¸‰å±‚æœºåˆ¶ï¼š</p>
<h4 data-id="heading-9">1. å†…ç½®æ ¸å¿ƒå·¥å…·</h4>
<p>è¿™äº›æ˜¯ç²¾å¿ƒæŒ‘é€‰çš„å¸¸ç”¨å·¥å…·ï¼Œè¦†ç›–äº†å¤§éƒ¨åˆ†æ—¥å¸¸å¼€å‘éœ€æ±‚ï¼š</p>
<ul>
<li><strong>æ–‡ä»¶æ“ä½œ</strong>ï¼šlsã€read-fileã€write-fileã€edit</li>
<li><strong>ä»£ç æœç´¢</strong>ï¼šgrepã€ripgrepã€glob</li>
<li><strong>ç³»ç»Ÿäº¤äº’</strong>ï¼šshell</li>
<li><strong>ç½‘ç»œè¯·æ±‚</strong>ï¼šweb-fetchã€web-search</li>
<li><strong>è®°å¿†ç®¡ç†</strong>ï¼šmemory</li>
</ul>
<p>æ¯ä¸ªå·¥å…·éƒ½ç»è¿‡ç²¾å¿ƒè®¾è®¡ï¼Œæ¥å£æ¸…æ™°ï¼ŒåŠŸèƒ½ä¸“ä¸€ã€‚æ¯”å¦‚ edit å·¥å…·ï¼Œä¸ä»…èƒ½ç¼–è¾‘æ–‡ä»¶ï¼Œè¿˜æ”¯æŒé¢„è§ˆä¿®æ”¹ã€‚</p>
<h4 data-id="heading-10">2. å‘½ä»¤è¡Œå·¥å…·å‘ç°</h4>
<p>è¿™æ˜¯ä¸ªå¾ˆå·§å¦™çš„è®¾è®¡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®ä¸€ä¸ªå‘ç°å‘½ä»¤ï¼Œè®©ç³»ç»Ÿè‡ªåŠ¨å‘ç°å’Œæ³¨å†Œæ–°å·¥å…·ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ‰§è¡Œå‘ç°å‘½ä»¤ï¼Œè§£æè¿”å›çš„å·¥å…·å£°æ˜</span>
<span class="hljs-keyword">async</span> <span class="hljs-title function_">discoverAndRegisterToolsFromCommand</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
  <span class="hljs-keyword">const</span> command = <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-title function_">getConfigOptions</span>().<span class="hljs-property">toolDiscoveryCommand</span>;
  <span class="hljs-keyword">if</span> (!command) <span class="hljs-keyword">return</span>;
  
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">exec</span>(command);
  <span class="hljs-keyword">const</span> functions = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(result.<span class="hljs-property">stdout</span>);
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> func <span class="hljs-keyword">of</span> functions) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">registerTool</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DiscoveredTool</span>(func));
  }
}
</code></pre>
<p>è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥è½»æ¾æ‰©å±•å·¥å…·é›†ï¼Œåªè¦æˆ‘ä»¬çš„å·¥å…·èƒ½è¾“å‡ºç¬¦åˆæ ¼å¼çš„ JSON å£°æ˜å³å¯ã€‚</p>
<h4 data-id="heading-11">3. MCP æœåŠ¡å™¨é›†æˆ</h4>
<p>MCPï¼ˆModel Context Protocolï¼‰æ˜¯ä¸ªé€šç”¨çš„åè®®ï¼ŒGemini CLI å¯¹å®ƒçš„æ”¯æŒç›¸å½“å®Œå–„ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ”¯æŒå¤šç§ä¼ è¾“åè®®</span>
- stdioï¼šæ ‡å‡†è¾“å…¥è¾“å‡º
- <span class="hljs-variable constant_">SSE</span>ï¼šæœåŠ¡å™¨æ¨é€äº‹ä»¶
- <span class="hljs-variable constant_">HTTP</span>ï¼š<span class="hljs-variable constant_">REST</span> <span class="hljs-variable constant_">API</span>
- <span class="hljs-title class_">WebSocket</span>ï¼šåŒå‘é€šä¿¡
</code></pre>
<p>é€šè¿‡ MCPï¼Œæˆ‘ä»¬å¯ä»¥æ¥å…¥å„ç§ä¸“ä¸šå·¥å…·æœåŠ¡å™¨ï¼Œæ¯”å¦‚æ•°æ®åº“æŸ¥è¯¢ã€API è°ƒç”¨ã€ä¸“ä¸šé¢†åŸŸå·¥å…·ç­‰ã€‚æ¯ä¸ª MCP æœåŠ¡å™¨çš„å·¥å…·éƒ½æ˜¯éš”ç¦»çš„ï¼Œé¿å…äº†å‘½åå†²çªã€‚</p>
<h3 data-id="heading-12">2.2 å·¥å…·è°ƒåº¦å™¨</h3>
<p>Gemini CLI çš„å·¥å…·è°ƒåº¦å™¨é‡‡ç”¨äº†æ¸…æ™°çš„çŠ¶æ€æœºæ¨¡å‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å·¥å…·æ‰§è¡ŒçŠ¶æ€æµè½¬</span>
validating â†’ scheduled â†’ awaiting_approval â†’ executing â†’ success/error/cancelled
</code></pre>
<p>åœ¨æ‰§è¡Œå‰å…ˆéªŒè¯å‚æ•°ï¼Œé¿å…æ— æ•ˆè°ƒç”¨ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">ValidatingToolCall</span> = {
  <span class="hljs-attr">status</span>: <span class="hljs-string">'validating'</span>;
  <span class="hljs-attr">request</span>: <span class="hljs-title class_">ToolCallRequestInfo</span>;
  <span class="hljs-attr">tool</span>: <span class="hljs-title class_">AnyDeclarativeTool</span>;
  <span class="hljs-attr">invocation</span>: <span class="hljs-title class_">AnyToolInvocation</span>;
};
</code></pre>
<p>æ ¹æ®å·¥å…·é£é™©ç­‰çº§ï¼Œæä¾›ä¸åŒçš„ç¡®è®¤ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¸‰ç§ç¡®è®¤æ¨¡å¼</span>
<span class="hljs-title class_">ApprovalMode</span>.<span class="hljs-property">DEFAULT</span>    <span class="hljs-comment">// æ ‡å‡†ç¡®è®¤</span>
<span class="hljs-title class_">ApprovalMode</span>.<span class="hljs-property">AUTO_EDIT</span>  <span class="hljs-comment">// è‡ªåŠ¨ç¼–è¾‘ç¡®è®¤</span>
<span class="hljs-title class_">ApprovalMode</span>.<span class="hljs-property">YOLO</span>       <span class="hljs-comment">// æ— ç¡®è®¤æ¨¡å¼ï¼ˆå‹‡è€…æ¨¡å¼ï¼‰</span>
</code></pre>
<p>YOLO æ¨¡å¼çš„å‘½åæœ‰ç‚¹æ„æ€ï¼Œ"<strong>You Only Live Once</strong>" <strong>äººç”Ÿè‹¦çŸ­ï¼Œæ´»å‡ºç²¾å½©</strong></p>
<p>ç‹¬ç«‹çš„å·¥å…·è°ƒç”¨å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œæé«˜æ•ˆç‡ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å¹¶è¡Œå¤„ç†å¤šä¸ªå·¥å…·è°ƒç”¨</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> fnCall <span class="hljs-keyword">of</span> functionCalls) {
  <span class="hljs-comment">// ä¸ç­‰å¾…ï¼Œç›´æ¥è°ƒåº¦ä¸‹ä¸€ä¸ª</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handlePendingFunctionCall</span>(fnCall);
}
</code></pre>
<p>å·¥å…·æ‰§è¡Œè¿‡ç¨‹ä¸­çš„è¾“å‡ºä¼šå®æ—¶å±•ç¤ºï¼Œç”¨æˆ·ä½“éªŒå¾ˆå¥½ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å®æ—¶æ›´æ–°è¾“å‡ºæµ</span>
onUpdate?: <span class="hljs-function">(<span class="hljs-params">output: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
</code></pre>
<h3 data-id="heading-13">2.3 é”™è¯¯å¤„ç†æœºåˆ¶</h3>
<h4 data-id="heading-14">1. é”™è¯¯ç±»å‹åˆ†ç±»</h4>
<p>ç³»ç»Ÿå®šä¹‰äº†å®Œæ•´çš„é”™è¯¯ç±»å‹æšä¸¾ <code>ToolErrorType</code>ï¼ŒåŒ…æ‹¬ï¼š</p>
<p><strong>é€šç”¨é”™è¯¯ï¼š</strong></p>
<ul>
<li><code>INVALID_TOOL_PARAMS</code> - å·¥å…·å‚æ•°æ— æ•ˆ</li>
<li><code>UNKNOWN</code> - æœªçŸ¥é”™è¯¯</li>
<li><code>UNHANDLED_EXCEPTION</code> - æœªå¤„ç†çš„å¼‚å¸¸</li>
<li><code>TOOL_NOT_REGISTERED</code> - å·¥å…·æœªæ³¨å†Œ</li>
<li><code>EXECUTION_FAILED</code> - æ‰§è¡Œå¤±è´¥</li>
</ul>
<p><strong>æ–‡ä»¶ç³»ç»Ÿé”™è¯¯ï¼š</strong></p>
<ul>
<li><code>FILE_NOT_FOUND</code> - æ–‡ä»¶æœªæ‰¾åˆ°</li>
<li><code>FILE_WRITE_FAILURE</code> - æ–‡ä»¶å†™å…¥å¤±è´¥</li>
<li><code>PERMISSION_DENIED</code> - æƒé™æ‹’ç»</li>
<li><code>PATH_NOT_IN_WORKSPACE</code> - è·¯å¾„ä¸åœ¨å·¥ä½œç©ºé—´å†…</li>
</ul>
<p><strong>Shell ç‰¹å®šé”™è¯¯ï¼š</strong></p>
<ul>
<li><code>SHELL_EXECUTE_ERROR</code> - Shell æ‰§è¡Œé”™è¯¯</li>
</ul>
<h4 data-id="heading-15">2. å·¥å…·è°ƒç”¨çŠ¶æ€ç®¡ç†</h4>
<p>ç³»ç»Ÿå®šä¹‰äº†å®Œæ•´çš„å·¥å…·è°ƒç”¨çŠ¶æ€ç±»å‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">ToolCall</span> =
  | <span class="hljs-title class_">ValidatingToolCall</span>      <span class="hljs-comment">// éªŒè¯ä¸­</span>
  | <span class="hljs-title class_">ScheduledToolCall</span>       <span class="hljs-comment">// å·²è°ƒåº¦</span>
  | <span class="hljs-title class_">ErroredToolCall</span>         <span class="hljs-comment">// é”™è¯¯</span>
  | <span class="hljs-title class_">SuccessfulToolCall</span>      <span class="hljs-comment">// æˆåŠŸ</span>
  | <span class="hljs-title class_">ExecutingToolCall</span>       <span class="hljs-comment">// æ‰§è¡Œä¸­</span>
  | <span class="hljs-title class_">CancelledToolCall</span>       <span class="hljs-comment">// å·²å–æ¶ˆ</span>
  | <span class="hljs-title class_">WaitingToolCall</span>;        <span class="hljs-comment">// ç­‰å¾…æ‰¹å‡†</span>
</code></pre>
<h4 data-id="heading-16">3. é”™è¯¯å¤„ç†æµç¨‹</h4>
<h5 data-id="heading-17">éªŒè¯é˜¶æ®µé”™è¯¯å¤„ç†</h5>
<p>åœ¨ <code>_schedule</code> æ–¹æ³•ä¸­ï¼Œç³»ç»Ÿä¼šï¼š</p>
<ol>
<li><strong>å·¥å…·æ³¨å†Œæ£€æŸ¥</strong>ï¼šéªŒè¯å·¥å…·æ˜¯å¦å·²æ³¨å†Œ</li>
<li><strong>å‚æ•°éªŒè¯</strong>ï¼šä½¿ç”¨ <code>tool.build(args)</code> éªŒè¯å‚æ•°</li>
<li><strong>å¼‚å¸¸æ•è·</strong>ï¼šæ•è·éªŒè¯è¿‡ç¨‹ä¸­çš„æ‰€æœ‰å¼‚å¸¸</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> invocationOrError = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">buildInvocation</span>(toolInstance, args);
  <span class="hljs-keyword">if</span> (invocationOrError <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Error</span>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">status</span>: <span class="hljs-string">'error'</span>,
      <span class="hljs-attr">request</span>: reqInfo,
      <span class="hljs-attr">response</span>: <span class="hljs-title function_">createErrorResponse</span>(
        reqInfo,
        invocationOrError,
        <span class="hljs-title class_">ToolErrorType</span>.<span class="hljs-property">INVALID_TOOL_PARAMS</span>,
      ),
      <span class="hljs-attr">durationMs</span>: <span class="hljs-number">0</span>,
    };
  }
} <span class="hljs-keyword">catch</span> (error) {
  <span class="hljs-comment">// å¤„ç†éªŒè¯å¼‚å¸¸</span>
}
</code></pre>
<h5 data-id="heading-18">æ‰§è¡Œé˜¶æ®µé”™è¯¯å¤„ç†</h5>
<p>åœ¨ <code>attemptExecutionOfScheduledCalls</code> æ–¹æ³•ä¸­ï¼Œç³»ç»Ÿä¼šï¼š</p>
<ol>
<li><strong>æ‰§è¡Œå¼‚å¸¸æ•è·</strong>ï¼šä½¿ç”¨ Promise <code>.catch()</code> æ•è·æ‰§è¡Œå¼‚å¸¸</li>
<li><strong>é”™è¯¯å“åº”ç”Ÿæˆ</strong>ï¼šè°ƒç”¨ <code>createErrorResponse</code> ç”Ÿæˆæ ‡å‡†åŒ–é”™è¯¯å“åº”</li>
<li><strong>çŠ¶æ€æ›´æ–°</strong>ï¼šå°†å·¥å…·è°ƒç”¨çŠ¶æ€è®¾ç½®ä¸º 'error'</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript">promise
  .<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">toolResult</span>: <span class="hljs-title class_">ToolResult</span>) =&gt; {
    <span class="hljs-comment">// å¤„ç†æˆåŠŸç»“æœ</span>
  })
  .<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">Error</span></span>) =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setStatusInternal</span>(
      callId,
      <span class="hljs-string">'error'</span>,
      <span class="hljs-title function_">createErrorResponse</span>(reqInfo, error, <span class="hljs-title class_">ToolErrorType</span>.<span class="hljs-property">UNHANDLED_EXCEPTION</span>),
    );
  });
</code></pre>
<h4 data-id="heading-19">4. é”™è¯¯å“åº”æ ¼å¼</h4>
<p><code>createErrorResponse</code> å‡½æ•°ç”Ÿæˆæ ‡å‡†åŒ–çš„é”™è¯¯å“åº”ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> createErrorResponse = (
  <span class="hljs-attr">request</span>: <span class="hljs-title class_">ToolCallRequestInfo</span>,
  <span class="hljs-attr">error</span>: <span class="hljs-title class_">Error</span>,
  <span class="hljs-attr">errorType</span>: <span class="hljs-title class_">ToolErrorType</span> | <span class="hljs-literal">undefined</span>,
): <span class="hljs-function"><span class="hljs-params">ToolCallResponseInfo</span> =&gt;</span> ({
  <span class="hljs-attr">callId</span>: request.<span class="hljs-property">callId</span>,
  error,
  <span class="hljs-attr">responseParts</span>: [{
    <span class="hljs-attr">functionResponse</span>: {
      <span class="hljs-attr">id</span>: request.<span class="hljs-property">callId</span>,
      <span class="hljs-attr">name</span>: request.<span class="hljs-property">name</span>,
      <span class="hljs-attr">response</span>: { <span class="hljs-attr">error</span>: error.<span class="hljs-property">message</span> },
    },
  }],
  <span class="hljs-attr">resultDisplay</span>: error.<span class="hljs-property">message</span>,
  errorType,
  <span class="hljs-attr">contentLength</span>: error.<span class="hljs-property">message</span>.<span class="hljs-property">length</span>,
});
</code></pre>
<h3 data-id="heading-20">2.4 è¶…æ—¶ç­–ç•¥</h3>
<h4 data-id="heading-21">1. AbortSignal æœºåˆ¶</h4>
<p>ç³»ç»Ÿä½¿ç”¨ <code>AbortSignal</code> å®ç°è¶…æ—¶å’Œå–æ¶ˆæ§åˆ¶ï¼š</p>
<h5 data-id="heading-22">è°ƒåº¦å±‚é¢çš„å–æ¶ˆ</h5>
<p>åœ¨ <code>schedule</code> æ–¹æ³•ä¸­ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">schedule</span>(
  <span class="hljs-attr">request</span>: <span class="hljs-title class_">ToolCallRequestInfo</span> | <span class="hljs-title class_">ToolCallRequestInfo</span>[],
  <span class="hljs-attr">signal</span>: <span class="hljs-title class_">AbortSignal</span>,
): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isRunning</span>() || <span class="hljs-variable language_">this</span>.<span class="hljs-property">isScheduling</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">abortHandler</span> = (<span class="hljs-params"/>) =&gt; {
        <span class="hljs-comment">// ä»é˜Ÿåˆ—ä¸­ç§»é™¤è¯·æ±‚</span>
        <span class="hljs-keyword">const</span> index = <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestQueue</span>.<span class="hljs-title function_">findIndex</span>(
          <span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-property">request</span> === request,
        );
        <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">requestQueue</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
          <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Tool call cancelled while in queue.'</span>));
        }
      };
      
      signal.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'abort'</span>, abortHandler, { <span class="hljs-attr">once</span>: <span class="hljs-literal">true</span> });
      <span class="hljs-comment">// ...</span>
    });
  }
}
</code></pre>
<h5 data-id="heading-23">æ‰§è¡Œå±‚é¢çš„å–æ¶ˆ</h5>
<p>åœ¨å·¥å…·æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼š</p>
<ol>
<li><strong>æ‰§è¡Œå‰æ£€æŸ¥</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">if</span> (signal.<span class="hljs-property">aborted</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setStatusInternal</span>(
    reqInfo.<span class="hljs-property">callId</span>,
    <span class="hljs-string">'cancelled'</span>,
    <span class="hljs-string">'Tool call cancelled by user.'</span>,
  );
  <span class="hljs-keyword">continue</span>;
}
</code></pre>
<ol start="2">
<li><strong>æ‰§è¡Œåæ£€æŸ¥</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript">.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (<span class="hljs-attr">toolResult</span>: <span class="hljs-title class_">ToolResult</span>) =&gt; {
  <span class="hljs-keyword">if</span> (signal.<span class="hljs-property">aborted</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setStatusInternal</span>(
      callId,
      <span class="hljs-string">'cancelled'</span>,
      <span class="hljs-string">'User cancelled tool execution.'</span>,
    );
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-comment">// å¤„ç†æˆåŠŸç»“æœ</span>
})
</code></pre>
<h4 data-id="heading-24">2. Shell å·¥å…·ç‰¹æ®Šå¤„ç†</h4>
<p>Shell å·¥å…·æœ‰ç‰¹æ®Šçš„è¶…æ—¶å’Œå–æ¶ˆæœºåˆ¶ï¼š</p>
<h5 data-id="heading-25">è¿›ç¨‹ ID è·Ÿè¸ª</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">if</span> (invocation <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">ShellToolInvocation</span>) {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">setPidCallback</span> = (<span class="hljs-params">pid: <span class="hljs-built_in">number</span></span>) =&gt; {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">toolCalls</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">toolCalls</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">tc</span>) =&gt;</span>
      tc.<span class="hljs-property">request</span>.<span class="hljs-property">callId</span> === callId &amp;&amp; tc.<span class="hljs-property">status</span> === <span class="hljs-string">'executing'</span>
        ? { ...tc, pid }
        : tc,
    );
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">notifyToolCallsUpdate</span>();
  };
  promise = invocation.<span class="hljs-title function_">execute</span>(
    signal,
    liveOutputCallback,
    shellExecutionConfig,
    setPidCallback,
  );
}
</code></pre>
<h5 data-id="heading-26">Shell æ‰§è¡Œé…ç½®</h5>
<p>ç³»ç»Ÿé€šè¿‡ <code>ShellExecutionConfig</code> é…ç½® Shell æ‰§è¡Œç¯å¢ƒï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ShellExecutionConfig</span> {
  terminalWidth?: <span class="hljs-built_in">number</span>;
  terminalHeight?: <span class="hljs-built_in">number</span>;
  pager?: <span class="hljs-built_in">string</span>;
  showColor?: <span class="hljs-built_in">boolean</span>;
  defaultFg?: <span class="hljs-built_in">string</span>;
  defaultBg?: <span class="hljs-built_in">string</span>;
}
</code></pre>
<h4 data-id="heading-27">3. è¾“å‡ºæˆªæ–­æœºåˆ¶</h4>
<p>ä¸ºé˜²æ­¢è¾“å‡ºè¿‡å¤§å¯¼è‡´å†…å­˜é—®é¢˜ï¼Œç³»ç»Ÿå®ç°äº†è¾“å‡ºæˆªæ–­ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">if</span> (
  <span class="hljs-keyword">typeof</span> content === <span class="hljs-string">'string'</span> &amp;&amp;
  toolName === <span class="hljs-title class_">ShellTool</span>.<span class="hljs-property">Name</span> &amp;&amp;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-title function_">getEnableToolOutputTruncation</span>() &amp;&amp;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-title function_">getTruncateToolOutputThreshold</span>() &gt; <span class="hljs-number">0</span> &amp;&amp;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-title function_">getTruncateToolOutputLines</span>() &gt; <span class="hljs-number">0</span>
) {
  <span class="hljs-keyword">const</span> truncatedResult = <span class="hljs-keyword">await</span> <span class="hljs-title function_">truncateAndSaveToFile</span>(
    content,
    callId,
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">storage</span>.<span class="hljs-title function_">getProjectTempDir</span>(),
    threshold,
    lines,
  );
  content = truncatedResult.<span class="hljs-property">content</span>;
  outputFile = truncatedResult.<span class="hljs-property">outputFile</span>;
}
</code></pre>
<p>å¦‚æœæˆ‘ä»¬è¦æ„å»ºè‡ªå·±çš„ Agent ç³»ç»Ÿï¼ŒGemini CLI æœ‰è¿™äº›å€¼å¾—å­¦ä¹ çš„åœ°æ–¹ï¼š</p>
<ol>
<li><strong>å·¥å…·å‘ç°æœºåˆ¶</strong>ï¼šä¸‰å±‚å‘ç°æœºåˆ¶å¾ˆçµæ´»ï¼Œæ—¢æœ‰å†…ç½®å·¥å…·ä¿åº•ï¼Œåˆèƒ½åŠ¨æ€æ‰©å±•ã€‚</li>
<li><strong>çŠ¶æ€æœºè°ƒåº¦</strong>ï¼šæ¸…æ™°çš„çŠ¶æ€æµè½¬ï¼Œä¾¿äºè°ƒè¯•å’Œç›‘æ§ã€‚</li>
<li><strong>ç¯å¢ƒæ„ŸçŸ¥</strong>ï¼šæ ¹æ®è¿è¡Œç¯å¢ƒè‡ªåŠ¨è°ƒæ•´è¡Œä¸ºï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</li>
<li><strong>MCP åè®®æ”¯æŒ</strong>ï¼šæ¥å…¥æ ‡å‡†åè®®ï¼Œè·å¾—ç”Ÿæ€ç³»ç»Ÿæ”¯æŒã€‚</li>
<li><strong>å£°æ˜å¼å·¥å…·å®šä¹‰</strong>ï¼šå·¥å…·å®šä¹‰å’Œå®ç°åˆ†ç¦»ï¼Œæ¥å£æ¸…æ™°ã€‚</li>
</ol>
<h3 data-id="heading-28">2.5 æ½œåœ¨çš„é—®é¢˜</h3>
<p>Gemini è¿™ç§è®¾è®¡ä¹Ÿæœ‰ä¸€äº›æ½œåœ¨é—®é¢˜ï¼š</p>
<ol>
<li><strong>ä¸Šä¸‹æ–‡è†¨èƒ€</strong>ï¼šæ‰€æœ‰å·¥å…·éƒ½æä¾›ç»™ LLMï¼Œå¯èƒ½å¯¼è‡´ token æ¶ˆè€—å¢åŠ ã€‚</li>
<li><strong>å·¥å…·é€‰æ‹©ä¸å¯æ§</strong>ï¼šå®Œå…¨ä¾èµ– LLM é€‰æ‹©ï¼Œç¼ºå°‘äººä¸ºå¹²é¢„æ‰‹æ®µã€‚</li>
<li><strong>è°ƒè¯•å›°éš¾</strong>ï¼šå½“å·¥å…·å¾ˆå¤šæ—¶ï¼Œéš¾ä»¥è¿½è¸ª LLM ä¸ºä»€ä¹ˆé€‰æ‹©æŸä¸ªå·¥å…·ã€‚</li>
</ol>
<h2 data-id="heading-29">3. Shopify Sidekick çš„å·¥å…·ç®¡ç†ç­–ç•¥</h2>
<p>æ–‡ç« åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fshopify.engineering%2Fbuilding-production-ready-agentic-systems" target="_blank" title="https://shopify.engineering/building-production-ready-agentic-systems" ref="nofollow noopener noreferrer">shopify.engineering/building-prâ€¦</a></p>
<p>Shopify å›¢é˜Ÿåœ¨å…¶æ–‡ç« ä¸­å‘Šè¯‰æˆ‘ä»¬ä¸€ä¸ªä»–ä»¬è¸©çš„å‘ï¼š<strong>å·¥å…·æ•°é‡çš„å¢é•¿ä¸æ˜¯çº¿æ€§é—®é¢˜ï¼Œè€Œæ˜¯æŒ‡æ•°çº§å¤æ‚åº¦é—®é¢˜</strong>ã€‚</p>
<p>ä»–ä»¬æŠŠè¿™ä¸ªè¿‡ç¨‹åˆ†æˆäº†ä¸‰ä¸ªé˜¶æ®µï¼š</p>
<p><strong>0-20 ä¸ªå·¥å…·</strong>ï¼šèœœæœˆæœŸã€‚æ¯ä¸ªå·¥å…·èŒè´£æ¸…æ™°ï¼Œè°ƒè¯•ç®€å•ï¼Œç³»ç»Ÿè¡Œä¸ºå¯é¢„æµ‹ã€‚è¿™ä¸ªé˜¶æ®µä½ ä¼šè§‰å¾—"Agent å¼€å‘ä¹Ÿä¸è¿‡å¦‚æ­¤å˜›"ã€‚</p>
<p><strong>20-50 ä¸ªå·¥å…·</strong>ï¼šæ··ä¹±æœŸã€‚å·¥å…·è¾¹ç•Œå¼€å§‹æ¨¡ç³Šï¼Œç»„åˆä½¿ç”¨æ—¶äº§ç”Ÿæ„æƒ³ä¸åˆ°çš„ç»“æœã€‚è¿™æ—¶å€™ä½ å¼€å§‹æ€€ç–‘äººç”Ÿï¼š"ä¸ºä»€ä¹ˆè°ƒç”¨æŸ¥è¯¢å·¥å…·çš„åŒæ—¶ä¼šè§¦å‘é‚®ä»¶å‘é€ï¼Ÿ"</p>
<p><strong>50+ ä¸ªå·¥å…·</strong>ï¼šå´©æºƒæœŸã€‚åŒä¸€ä¸ªä»»åŠ¡æœ‰å¤šç§å®ç°è·¯å¾„ï¼Œç³»ç»Ÿå˜å¾—æ— æ³•ç†è§£ã€‚è°ƒè¯•åƒåœ¨è¿·å®«é‡Œæ‰¾å‡ºå£ï¼Œä¿®ä¸€ä¸ª bug å¼•å…¥ä¸‰ä¸ªæ–° bugã€‚</p>
<p>å½“å·¥å…·æ•°é‡è¶…è¿‡ 30 ä¸ªåï¼Œæ•´ä¸ªç³»ç»Ÿå˜å¾—éš¾ä»¥ç»´æŠ¤ã€‚Shopify æŠŠè¿™ä¸ªé—®é¢˜å«åš"Death by a Thousand Instructions"ï¼ˆåƒæ¡æŒ‡ä»¤ä¹‹æ­»ï¼‰ï¼Œç³»ç»Ÿæç¤ºè¯å˜æˆäº†ä¸€ä¸ªå……æ»¡ç‰¹æ®Šæƒ…å†µã€ç›¸äº’å†²çªçš„æŒ‡å¯¼å’Œè¾¹ç¼˜æ¡ˆä¾‹å¤„ç†çš„æ€ªç‰©ã€‚</p>
<h3 data-id="heading-30">3.1 Just-in-Time Instructions</h3>
<p>é¢å¯¹å·¥å…·ç®¡ç†çš„æ··ä¹±ï¼ŒShopify å›¢é˜Ÿæ‰¾åˆ°äº†ä¸€ä¸ªå·§å¦™çš„è§£å†³æ–¹æ¡ˆï¼š<strong>Just-in-Time (JIT) Instructions</strong>ã€‚</p>
<p>è¿™ä¸ªæ€è·¯å…¶å®å¾ˆç®€å•ï¼Œå¯èƒ½çš„å®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¼ ç»Ÿæ–¹å¼ï¼šæ‰€æœ‰æŒ‡ä»¤éƒ½å¡åœ¨ç³»ç»Ÿæç¤ºè¯é‡Œ</span>
system_prompt = <span class="hljs-string">"""
ä½ æ˜¯ä¸€ä¸ªAIåŠ©æ‰‹...
å½“ç”¨æˆ·æŸ¥è¯¢å®¢æˆ·æ—¶ï¼Œä½¿ç”¨customer_queryå·¥å…·...
å½“ç”¨æˆ·éœ€è¦å‘é‚®ä»¶æ—¶ï¼Œå…ˆæ£€æŸ¥æƒé™...
å¦‚æœæ˜¯VIPå®¢æˆ·ï¼Œè¦ç‰¹åˆ«æ³¨æ„...
å¤„ç†è®¢å•æ—¶è¦è€ƒè™‘åº“å­˜...
ï¼ˆè¿˜æœ‰500è¡Œå„ç§è§„åˆ™ï¼‰
"""</span>

<span class="hljs-comment"># JITæ–¹å¼ï¼šæŒ‰éœ€æä¾›æŒ‡ä»¤</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_tool_instructions</span>(<span class="hljs-params">tool_name, context</span>):
    <span class="hljs-keyword">if</span> tool_name == <span class="hljs-string">"customer_query"</span>:
        <span class="hljs-keyword">if</span> context.is_filtering:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ä½¿ç”¨customer_tagsè¿›è¡Œæ ‡ç­¾ç­›é€‰ï¼Œä½¿ç”¨customer_statusè¿›è¡ŒçŠ¶æ€ç­›é€‰..."</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"ç›´æ¥æŸ¥è¯¢å®¢æˆ·åŸºæœ¬ä¿¡æ¯..."</span>
    <span class="hljs-comment"># åªåœ¨éœ€è¦æ—¶æä¾›ç›¸å…³æŒ‡ä»¤</span>
</code></pre>
<p>è¿™ç§è®¾è®¡çš„å¥½å¤„ï¼š</p>
<ol>
<li><strong>ä¸Šä¸‹æ–‡ç²¾å‡†</strong>ï¼šLLM åªçœ‹åˆ°å½“å‰éœ€è¦çš„æŒ‡ä»¤ï¼Œä¸ä¼šè¢«æ— å…³ä¿¡æ¯å¹²æ‰°ã€‚</li>
<li><strong>ç¼“å­˜å‹å¥½</strong>ï¼šæ ¸å¿ƒç³»ç»Ÿæç¤ºè¯ä¿æŒç¨³å®šï¼Œå¯ä»¥åˆ©ç”¨ LLM çš„æç¤ºè¯ç¼“å­˜ï¼Œæé«˜å“åº”é€Ÿåº¦ã€‚</li>
<li><strong>çµæ´»è¿­ä»£</strong>ï¼šå¯ä»¥æ ¹æ®ä¸åŒåœºæ™¯ã€ç”¨æˆ·ç¾¤ä½“ã€A/B æµ‹è¯•åŠ¨æ€è°ƒæ•´æŒ‡ä»¤ï¼Œä¸éœ€è¦æ”¹åŠ¨æ ¸å¿ƒç³»ç»Ÿã€‚</li>
<li><strong>å¯ç»´æŠ¤æ€§</strong>ï¼šæ¯ä¸ªå·¥å…·çš„æŒ‡ä»¤ç‹¬ç«‹ç®¡ç†ï¼Œä¿®æ”¹ä¸€ä¸ªå·¥å…·çš„è¡Œä¸ºä¸ä¼šå½±å“å…¶ä»–å·¥å…·ã€‚</li>
</ol>
<h2 data-id="heading-31">4. å°ç»“</h2>
<p>OpenManus ä½“ç°äº†ä¼˜é›…è®¾è®¡ï¼ŒGemini CLI å±•ç¤ºç®€åŒ–å°è¯•ï¼Œè€Œ Shopify Sidekick å±•ç¤ºäº†å®æˆ˜ä¸­çš„æ™ºæ…§ã€‚</p>
<p>å½“æˆ‘ä»¬è¦æ„å»ºç”Ÿäº§çº§çš„ Agent ç³»ç»Ÿï¼š</p>
<ul>
<li>ä¸è¦ä½ä¼°å·¥å…·ç®¡ç†çš„å¤æ‚æ€§</li>
<li>ä¸è¦é«˜ä¼° LLM çš„å·¥å…·é€‰æ‹©èƒ½åŠ›</li>
<li>ä¸è¦å¿½è§†ç”Ÿäº§ç¯å¢ƒçš„æ®‹é…·æ€§</li>
</ul>
<p>Agent ç³»ç»Ÿä¸æ˜¯ä¸€æ¬¡æ€§å·¥ç¨‹ï¼Œè€Œæ˜¯éœ€è¦ä¸æ–­è¿›åŒ–çš„ã€‚æˆ‘ä»¬éœ€è¦ä¸æ–­å­¦ä¹ ã€è°ƒæ•´ã€ä¼˜åŒ–ï¼Œæ‰èƒ½æ„å»ºå‡ºçœŸæ­£å¯é çš„ AI Agentã€‚</p>
<p><strong>å½“æˆ‘ä»¬çš„ Agent è¦æœåŠ¡çœŸå®ç”¨æˆ·æ—¶ï¼Œä¸¥è°¨çš„å·¥ç¨‹å®è·µæ¯”ç‚«é…·çš„æŠ€æœ¯æ›´é‡è¦ã€‚è¿™å¯èƒ½ä¸å¤Ÿé…·ï¼Œä½†è¿™æ˜¯é€šå¾€ç”Ÿäº§ç¯å¢ƒçš„å¿…ç»ä¹‹è·¯ã€‚</strong></p>
<p>ä»¥ä¸Šã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI ç¼–ç¨‹çš„å¤šå±‚æ¬¡ç¼–ç¨‹è¾…åŠ©ç­–ç•¥]]></title>    <link>https://juejin.cn/post/7589227883261902894</link>    <guid>https://juejin.cn/post/7589227883261902894</guid>    <pubDate>2025-12-30T04:59:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589227883261902894" data-draft-id="7589166195798179867" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI ç¼–ç¨‹çš„å¤šå±‚æ¬¡ç¼–ç¨‹è¾…åŠ©ç­–ç•¥"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-12-30T04:59:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ½˜é”¦"/> <meta itemprop="url" content="https://juejin.cn/user/730549110707431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI ç¼–ç¨‹çš„å¤šå±‚æ¬¡ç¼–ç¨‹è¾…åŠ©ç­–ç•¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/730549110707431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ½˜é”¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T04:59:38.000Z" title="Tue Dec 30 2025 04:59:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¦‚æœæŠŠ 2022 å¹´ 6 æœˆå¾®è½¯å’Œ OpenAI æ­£å¼æ¨å‡º Copilot ä½œä¸ºèµ·ç‚¹ï¼ŒAI ç¼–ç¨‹å·²ç» 3 å¹´å¤šäº†ã€‚</p>
<p>éšç€å¤§æ¨¡å‹çš„ä¸æ–­è¿­ä»£å‡çº§ï¼Œä» Copilot åˆ° IDE ä¸‹çš„ Cursor å…¥å±€ï¼Œå†åˆ° CLI æ¨¡å¼ä¸‹çš„ Claude Codeï¼Œå…¶å¯ç”¨æ€§ï¼Œå‡†ç¡®åº¦è¶Šæ¥è¶Šå¥½ã€‚</p>
<p>åœ¨æç¤ºè¯å®Œæ•´æœ‰æ•ˆçš„å‰æä¸‹ï¼Œå¾ˆå¤šåŠŸèƒ½ï¼Œä¸ç®¡æ˜¯å‰ç«¯ï¼Œåç«¯ï¼Œç®—æ³•ï¼Œç”šè‡³æ˜¯åµŒå…¥å¼éƒ½èƒ½ã€Œä¸€æŠŠæ¢­ã€ã€‚</p>
<p>åœ¨è®¤çŸ¥èŒƒå›´å†…ï¼ŒAI ç¼–ç¨‹æˆäº†ä¸€ä¸ªå¾ˆå¥½ç”¨çš„å·¥å…·ã€‚</p>
<p>æˆ‘è‡ªå·±ä¹Ÿåœ¨æŒç»­æ·±å…¥ä½¿ç”¨ï¼Œä»¥ä¸‹ä¸ºä½¿ç”¨è¿‡ç¨‹ä¸­ä¸æ–­è¿­ä»£å‡ºæ¥ä¸€äº›ç­–ç•¥ã€‚</p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆæ˜¯å¤šå±‚æ¬¡è¾…åŠ©</h2>
<p>ç”¨è¿‡å¾ˆå¤šç§å·¥å…·ï¼Œæ¯ä¸€ç§æ–°çš„å·¥å…·å‡ºæ¥ï¼Œéƒ½ä¼šè¯•ä¸€ä¸‹ï¼Œä¹ŸèŠ±äº†ä¸å°‘é’±ï¼Œä½†æ²¡æœ‰ä¸€ç§èƒ½è§£å†³æ‰€æœ‰çš„é—®é¢˜ã€‚</p>
<p>è¿™å°±åƒå®¶é‡Œçš„å·¥å…·ç®±ï¼Œèºä¸åˆ€ã€é”¤å­ã€æ‰³æ‰‹å„æœ‰å„çš„ç”¨å¤„ã€‚ç¡¬è¦ç”¨é’³å­æ‹§èºä¸ï¼Œå½“ç„¶ä¹Ÿèƒ½æ‹§ï¼Œä½†æ•ˆç‡è‚¯å®šä¸å¦‚èºä¸åˆ€ã€‚AI ç¼–ç¨‹å·¥å…·ä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ï¼Œä¸åŒçš„åœºæ™¯éœ€è¦ä¸åŒçš„å·¥å…·ï¼Œä¸åŒçš„ä»»åŠ¡éœ€è¦ä¸åŒçš„ç­–ç•¥ã€‚</p>
<p>è¿™äº›å·¥å…·ä¹‹é—´å¹¶ä¸æ˜¯äº’ç›¸æ›¿ä»£çš„å…³ç³»ï¼Œè€Œæ˜¯äº’è¡¥çš„ã€‚æˆ‘ä»¬å¯ä»¥åœ¨å†™ä»£ç çš„æ—¶å€™ç”¨ Cursor çš„è‡ªåŠ¨è¡¥å…¨ï¼Œé‡åˆ°éœ€è¦é‡æ„çš„åœ°æ–¹åˆ‡æ¢åˆ°é€‰ä¸­ä¿®æ”¹æ¨¡å¼ï¼Œç¢°åˆ°å¤§å—åŠŸèƒ½ç”¨ Claude Code ç”Ÿæˆï¼ŒçœŸæ­£æ£˜æ‰‹çš„é—®é¢˜å†æ‰¾ GPT5 å¸®å¿™ã€‚è¿™ç§åˆ†å±‚çš„ä½¿ç”¨æ–¹å¼ï¼Œæ‰æ˜¯å½“å‰ AI ç¼–ç¨‹çš„è¾ƒä¼˜è§£ã€‚</p>
<h2 data-id="heading-1">å¿«é€Ÿçš„è‡ªåŠ¨è¡¥å…¨</h2>
<p>ç”¨å¾—æ¯”è¾ƒçˆ½çš„è¿˜æ˜¯è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ã€‚</p>
<p>ä¸ºå•¥ï¼Ÿ</p>
<p>å› ä¸ºå¯ä»¥æ— è„‘ Tabï¼Œå°èŒƒå›´çš„æ”¹åŠ¨ï¼Œçœ‹ä¸€çœ¼æ˜¯å¦ç¬¦åˆé¢„æœŸå°±å¯ä»¥äº†ï¼Œé€Ÿåº¦å¿«ã€‚</p>
<p>ç”¨çœ‹èµ·æ¥æ¯”è¾ƒé«˜å¤§ä¸Šçš„è¯æ¥è¯´å°±æ˜¯<strong>ä»»åŠ¡è¯´æ˜çš„æ¯”ç‰¹é‡</strong>ã€‚</p>
<p>ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå‡è®¾æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªç”¨æˆ·ç™»å½•çš„éªŒè¯é€»è¾‘ã€‚å¦‚æœç”¨è‡ªç„¶è¯­è¨€æè¿°ï¼Œå¯èƒ½éœ€è¦å†™ï¼š"è¯·å¸®æˆ‘å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ç”¨æˆ·åå’Œå¯†ç ï¼Œå…ˆæ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å­˜åœ¨ï¼Œç„¶åéªŒè¯å¯†ç æ˜¯å¦æ­£ç¡®ï¼Œå¦‚æœéƒ½é€šè¿‡å°±ç”Ÿæˆ token è¿”å›ï¼Œå¦åˆ™æŠ›å‡ºç›¸åº”çš„é”™è¯¯..."</p>
<p>ä½†å¦‚æœæˆ‘ä»¬ç›´æ¥åœ¨ä»£ç é‡Œå†™ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">validate_login</span>(<span class="hljs-params">username, password</span>):
    <span class="hljs-comment"># æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å­˜åœ¨</span>
    user = User.query.filter_by(username=username).first()
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> user:
</code></pre>
<p>å†™åˆ°è¿™é‡Œï¼ŒCursor åŸºæœ¬å°±èƒ½ç†è§£ä½ è¦å¹²ä»€ä¹ˆäº†ï¼ŒTab ä¸€æŒ‰ï¼Œåé¢çš„ä»£ç å°±å‡ºæ¥äº†ã€‚è¿™ç§æ–¹å¼çš„ä¿¡æ¯å¯†åº¦æé«˜ï¼Œè€Œä¸”æ˜¯åœ¨æ­£ç¡®çš„ä¸Šä¸‹æ–‡ä½ç½®ï¼ŒAI ç†è§£èµ·æ¥æ›´å‡†ç¡®ã€‚</p>
<p>ä¸è¿‡ï¼Œè‡ªåŠ¨è¡¥å…¨ä¹Ÿæœ‰å‘çš„æ—¶å€™ã€‚æœ‰æ—¶å€™æˆ‘ä»¬åªæ˜¯æƒ³æ¢ä¸ªè¡Œï¼Œå®ƒéè¦è¡¥å…¨ä¸€å¤§æ®µï¼›æœ‰æ—¶å€™æˆ‘ä»¬åœ¨æ€è€ƒï¼Œå®ƒä¸åœåœ°å¼¹å»ºè®®æ‰“æ–­æ€è·¯ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨éœ€è¦ä¸“æ³¨æ€è€ƒçš„æ—¶å€™å°±æŠŠå®ƒå…³äº†ï¼Œéœ€è¦å¿«é€Ÿå®ç°çš„æ—¶å€™å†æ‰“å¼€ã€‚</p>
<p>è¿˜æœ‰ä¸ªå°æŠ€å·§æ˜¯å†™æ³¨é‡Šå¼•å¯¼ã€‚æ¯”å¦‚æˆ‘ä»¬è¦å¤„ç†ä¸€ä¸ªå¤æ‚çš„æ•°æ®è½¬æ¢ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å°†åµŒå¥—çš„å­—å…¸ç»“æ„å±•å¹³æˆåˆ—è¡¨</span>
<span class="hljs-comment"># ä¾‹å¦‚: {'a': {'b': 1, 'c': 2}} -&gt; [('a.b', 1), ('a.c', 2)]</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">flatten_dict</span>(<span class="hljs-params">d, parent_key=<span class="hljs-string">''</span></span>):
</code></pre>
<p>è¿™ç§æ³¨é‡Šä¸æ˜¯ä¸ºäº†ç»™äººçœ‹çš„ï¼Œä¸»è¦æ˜¯ç»™ AI çœ‹çš„ã€‚æœ‰äº†è¿™ä¸ªä¾‹å­ï¼ŒAI ç”Ÿæˆçš„ä»£ç å‡†ç¡®ç‡èƒ½æå‡ä¸€å¤§æˆªã€‚</p>
<h2 data-id="heading-2">ç²¾å‡†çš„é€‰ä¸­ä¿®æ”¹</h2>
<p>å½“ä»£ç å·²ç»å†™å¥½ï¼Œä½†éœ€è¦è°ƒæ•´çš„æ—¶å€™ï¼Œé€‰ä¸­ä¿®æ”¹å°±æ´¾ä¸Šç”¨åœºäº†ã€‚è¿™ä¸ªåŠŸèƒ½çœ‹èµ·æ¥ç®€å•ï¼Œç”¨å¥½äº†å´èƒ½å¤§å¹…æå‡æ•ˆç‡ã€‚</p>
<p>æ¯”å¦‚æœ‰ä¸€æ®µç”¨ for å¾ªç¯å†™çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-python" lang="python">result = []
<span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> items:
    <span class="hljs-keyword">if</span> item.status == <span class="hljs-string">'active'</span>:
        result.append(item.name)
</code></pre>
<p>é€‰ä¸­è¿™æ®µä»£ç ï¼Œå‘Šè¯‰ AIï¼š"æ”¹æˆåˆ—è¡¨æ¨å¯¼å¼"ï¼Œç«‹é©¬å°±å˜æˆäº†ï¼š</p>
<pre><code class="hljs language-python" lang="python">result = [item.name <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> items <span class="hljs-keyword">if</span> item.status == <span class="hljs-string">'active'</span>]
</code></pre>
<p>æˆ–è€…æœ‰ä¸€ä¸ªå‡½æ•°å¤„ç†äº†å¤ªå¤šé€»è¾‘ï¼Œé€‰ä¸­åè¯´ï¼š"æ‹†åˆ†æˆå¤šä¸ªå°å‡½æ•°"ï¼ŒAI å°±ä¼šå¸®æˆ‘ä»¬é‡æ„ã€‚è¿™ç§åœºæ™¯ä¸‹ï¼ŒAI çš„ç†è§£éå¸¸ç²¾å‡†ï¼Œå› ä¸º<strong>ä¸Šä¸‹æ–‡æ˜ç¡®ï¼Œä»»åŠ¡å•ä¸€</strong>ã€‚</p>
<p>æˆ‘ç»å¸¸ç”¨é€‰ä¸­ä¿®æ”¹æ¥åšè¿™äº›äº‹ï¼š</p>
<ul>
<li>æ·»åŠ é”™è¯¯å¤„ç†</li>
<li>ä¼˜åŒ–æ€§èƒ½ç“¶é¢ˆ</li>
<li>è°ƒæ•´ä»£ç é£æ ¼</li>
<li>æ·»åŠ ç±»å‹æ³¨è§£</li>
<li>ç”Ÿæˆå•å…ƒæµ‹è¯•</li>
</ul>
<p>æœ‰ä¸ªå°ç‚¹å°±æ˜¯ï¼Œé€‰ä¸­ä¿®æ”¹çš„æŒ‡ä»¤è¦å°½é‡å…·ä½“ã€‚æ¯”å¦‚ã€Œä¼˜åŒ–è¿™æ®µä»£ç ã€å°±å¤ªæ¨¡ç³Šäº†ï¼ŒAI å¯èƒ½ä¼šè¿‡åº¦ä¼˜åŒ–ï¼ŒæŠŠç®€å•çš„ä»£ç æå¾—å¾ˆå¤æ‚ã€‚ä½†å¦‚æœè¯´ã€ŒæŠŠè¿™ä¸ªåµŒå¥—å¾ªç¯æ”¹æˆä½¿ç”¨ itertoolsã€ï¼Œç»“æœå°±ä¼šç²¾å‡†å¾ˆå¤šã€‚</p>
<h2 data-id="heading-3">å¤§å—çš„ä»£ç ç”Ÿæˆ</h2>
<p>å½“éœ€è¦å®ç°ä¸€ä¸ªå®Œæ•´çš„åŠŸèƒ½æ¨¡å—æ—¶ï¼ŒClaude Codeã€Warp.dev è¿™ç±»å·¥å…·å°±è¯¥ä¸Šåœºäº†ã€‚è¿™ä¸€å±‚çš„ä½¿ç”¨é¢‘ç‡ä¸å¦‚å‰ä¸¤å±‚é«˜ï¼Œä½†åœ¨ç‰¹å®šåœºæ™¯ä¸‹ä¸å¯æˆ–ç¼ºã€‚</p>
<p>ä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿé€šå¸¸æ˜¯è¿™äº›æƒ…å†µï¼š</p>
<p><strong>1. å®ç°æ ‡å‡†åŒ–çš„åŠŸèƒ½æ¨¡å—</strong></p>
<p>æ¯”å¦‚å®ç°ä¸€ä¸ªå®Œæ•´çš„ CRUD APIã€é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡ã€å®ç°å¸¸è§çš„ç®—æ³•ç­‰ã€‚è¿™äº›åŠŸèƒ½æœ‰æ˜ç¡®çš„æ¨¡å¼å¯å¾ªï¼ŒAI ç”Ÿæˆçš„ä»£ç è´¨é‡å·²ç»å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ã€‚</p>
<p><strong>2. å¤„ç†ä¸ç†Ÿæ‚‰çš„æŠ€æœ¯æ ˆ</strong></p>
<p>æœ€è¿‘æˆ‘åœ¨å†™ Rustï¼Œè¯´å®è¯ï¼Œownership å’Œ lifetime è¿™äº›æ¦‚å¿µç†è§£å½’ç†è§£ï¼ŒçœŸå†™èµ·æ¥è¿˜æ˜¯ç£•ç£•ç»Šç»Šã€‚è¿™æ—¶å€™ Claude Code å°±ç‰¹åˆ«æœ‰ç”¨ï¼Œè™½ç„¶å®ƒä¸å¤ªæ„¿æ„è§£é‡Šä¸ºä»€ä¹ˆè¿™ä¹ˆå†™ï¼Œä½†è‡³å°‘èƒ½ç»™å‡ºèƒ½è·‘çš„ä»£ç ï¼Œæˆ‘å¯ä»¥åœ¨è¿™ä¸ªåŸºç¡€ä¸Šå­¦ä¹ å’Œè°ƒæ•´ã€‚</p>
<p><strong>3. ç”Ÿæˆä¸€æ¬¡æ€§çš„å·¥å…·ä»£ç </strong></p>
<p>è¿™æ˜¯ä¸€ä¸ªå¾ˆå¸¸ç”¨çš„é€»è¾‘ã€‚ä»¥å‰å†™ä¸ªä¸´æ—¶ç”¨çš„å°çˆ¬è™«ï¼Œæ€ä¹ˆå¾—ä¹Ÿè¦åŠå¤©ï¼Œå½“å­—æ®µå¤šçš„æ—¶å€™ï¼Œè€—æ—¶æ›´é•¿äº†ã€‚ç°åœ¨ä¸ä¸€æ ·äº†ï¼Œæˆ‘ä¼šæŠŠåœ°å€ï¼Œéœ€è¦çˆ¬å–çš„å­—æ®µä¸€æ¬¡æ€§ç»™ AIï¼Œ AI ä¼šç”Ÿæˆå®Œæ•´çš„ä»£ç ï¼Œå½“å‡ºç°é—®é¢˜æ—¶ï¼Œå¦‚æœèƒ½å¿«é€Ÿè§£å†³æ‰ï¼Œå°±è§£å†³ä¸€ä¸‹ï¼Œå¦‚æœä¸èƒ½ï¼Œç›´æ¥å…¨éƒ¨åˆ äº†é‡æ–°ç”Ÿæˆã€‚</p>
<p>è¿™å¯ä»¥å«åšçš„ã€Œ<strong>ä»£ç åç¨€ç¼ºæ—¶ä»£</strong>ã€â€”â€”ä»£ç ä¸å†æ˜¯ç¨€ç¼ºèµ„æºï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºäº†ä¸€ä¸ªä¸´æ—¶éœ€æ±‚ç”Ÿæˆå¤§é‡ä»£ç ï¼Œç”¨å®Œå°±æ‰”ã€‚</p>
<p>å½“ç„¶ï¼Œè¿™ç§å¤§å—çš„ä»£ç ï¼Œå½“æç¤ºè¯æˆ–è€…è§„åˆ™è®¾å®šä¸é‚£ä¹ˆå¥½çš„æ—¶å€™ï¼Œè¿˜æ˜¯ä¼šä¸€äº›å‘ä¼šè¸©åˆ°ï¼Œå¦‚ï¼š</p>
<p><strong>ä»£ç å“å‘³é—®é¢˜</strong>ï¼šAI ç”Ÿæˆçš„ä»£ç å¾€å¾€å¾ˆ"å•°å—¦"ã€‚æ˜æ˜å¯ä»¥ç”¨åˆ—è¡¨æ¨å¯¼å¼ä¸€è¡Œæå®šçš„ï¼Œå®ƒåè¦å†™ä¸ªåµŒå¥—çš„ if-elseï¼›æ˜æ˜å¯ä»¥æŠ½è±¡æˆå‡½æ•°çš„ï¼Œå®ƒåè¦å¤åˆ¶ç²˜è´´ã€‚æ¯æ¬¡ç”¨å®Œéƒ½éœ€è¦äººå·¥æ¸…ç†ä¸€éã€‚</p>
<p><strong>è¿‡åº¦é˜²å¾¡æ€§ç¼–ç¨‹</strong>ï¼šAI ç‰¹åˆ«å–œæ¬¢åŠ  try-catchï¼Œæœ‰æ—¶å€™å®Œå…¨æ²¡å¿…è¦çš„åœ°æ–¹ä¹Ÿè¦åŒ…ä¸€å±‚ã€‚è¿˜å–œæ¬¢åšå„ç§å‚æ•°æ ¡éªŒï¼Œå³ä½¿åœ¨å†…éƒ¨å‡½æ•°é‡Œä¹Ÿè¦æ£€æŸ¥ä¸€éã€‚</p>
<p><strong>æŠ½è±¡å±‚æ¬¡æ··ä¹±</strong>ï¼šæœ‰æ—¶å€™è¯¥æŠ½è±¡çš„ä¸æŠ½è±¡ï¼Œä¸è¯¥æŠ½è±¡çš„è¿‡åº¦æŠ½è±¡ã€‚æ¯”å¦‚åªç”¨ä¸€æ¬¡çš„é€»è¾‘éè¦åŒ…è£…æˆç±»ï¼Œæˆ–è€…æ˜æ˜å¯ä»¥å¤ç”¨çš„ä»£ç å´åˆ°å¤„å¤åˆ¶ã€‚</p>
<h2 data-id="heading-4">éš¾é¢˜çš„æ·±åº¦æ±‚è§£</h2>
<p>é‡åˆ°çœŸæ­£æ£˜æ‰‹çš„é—®é¢˜æ—¶ï¼Œå°±å¾—è¯·å‡º GPT5 æ·±åº¦æ€è€ƒæ¨¡å¼ è¿™ç§çº§åˆ«çš„æ¨¡å‹äº†ã€‚é€Ÿåº¦å¾ˆæ…¢ï¼Œä½†æ˜¯å¾€å¾€èƒ½è§£å†³æœ€å…³é”®çš„é—®é¢˜ã€‚</p>
<p>æˆ‘å°è±¡æœ€æ·±çš„ä¸€æ¬¡æ˜¯åœ¨åªæœ‰ 8 MB çš„åµŒå…¥å¼è®¾å¤‡ä¸Šå¢åŠ ä¸€ä¸ªå°çš„æ–‡ä»¶ç³»ç»Ÿï¼Œè™½ç„¶å®˜æ–¹æœ‰æ–‡æ¡£ï¼Œä½†æ˜¯è¯­ç„‰ä¸è¯¦ï¼Œåœ¨ç½‘ä¸Šä¹Ÿæ²¡æœ‰æ‰¾åˆ°å¯ä»¥å‚è€ƒçš„ï¼Œå†åŠ ä¸Šè‡ªå·±å¯¹äºåµŒå…¥å¼å¼€å‘ä¸ç†Ÿï¼ŒæŠ˜è…¾è°ƒè¯•äº†ä¸¤å¤©ï¼Œä¸€ç›´ä¼šæŒ‚ï¼Œæœ€åæŠŠå…¨éƒ¨ä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬åœ¨ç½‘ä¸Šæ‰¾çš„èµ„æ–™éƒ½æ‰”ç»™ GPT5ï¼Œå®ƒåˆ†æäº† 2 åˆ†é’Ÿï¼Œæœ€åå‘ç°æ˜¯ä¸€ä¸ªå‚æ•°æ²¡æœ‰é…ç½®æ­£ç¡®ã€‚</p>
<h2 data-id="heading-5">æƒè¡¡ä¸é€‰æ‹©</h2>
<p>è¯´äº†è¿™ä¹ˆå¤šï¼Œå®é™…ä½¿ç”¨ä¸­æ€ä¹ˆé€‰æ‹©å‘¢ï¼Ÿæˆ‘çš„ç»éªŒæ˜¯è¿™æ ·çš„ï¼š</p>
<p><strong>çœ‹ä»»åŠ¡å¤æ‚åº¦</strong>ï¼šç®€å•çš„è¡¥å…¨ç”¨ Tabï¼Œå±€éƒ¨ä¿®æ”¹ç”¨é€‰ä¸­ï¼Œå®Œæ•´åŠŸèƒ½ç”¨ Claude Codeï¼Œå¤æ‚é—®é¢˜ç”¨ GPT5ã€‚è¿™æ˜¯åŸºæœ¬åŸåˆ™ã€‚</p>
<p><strong>çœ‹ç†Ÿæ‚‰ç¨‹åº¦</strong>ï¼šç†Ÿæ‚‰çš„ä»£ç è‡ªå·±å†™é…åˆè‡ªåŠ¨è¡¥å…¨æ›´å¿«ï¼›ä¸ç†Ÿæ‚‰çš„é¢†åŸŸå¤šä¾èµ– AI ç”Ÿæˆï¼Œä½†è¦ä»”ç»† reviewã€‚</p>
<p><strong>çœ‹ä»£ç ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šä¸´æ—¶è„šæœ¬éšä¾¿è®© AI ç”Ÿæˆï¼›æ ¸å¿ƒä¸šåŠ¡ä»£ç è¦ä¸¥æ ¼æŠŠå…³ï¼Œå®å¯è‡ªå·±å†™ä¹Ÿä¸èƒ½æœ‰éšæ‚£ã€‚</p>
<p>è¿˜æœ‰ä¸ªé‡è¦çš„ç‚¹æ˜¯<strong>ä¸è¦è¿‡åº¦ä¾èµ–</strong>ã€‚æœ‰äººå®Œå…¨ä¾èµ– AIï¼Œè‡ªå·±åŸºæœ¬ä¸å†™ä»£ç äº†ï¼Œç”šè‡³çœ‹ä¹Ÿä¸çœ‹ã€‚çŸ­æœŸçœ‹èµ·æ¥æ•ˆç‡å¾ˆé«˜ï¼Œä½†é•¿æœŸæ¥è¯´æ˜¯æœ‰é—®é¢˜çš„ï¼š</p>
<ol>
<li>å¤±å»äº†å¯¹ä»£ç çš„æŒæ§æ„Ÿï¼Œå‡ºé—®é¢˜ä¸çŸ¥é“æ€ä¹ˆæ”¹</li>
<li>ä»£ç é£æ ¼ä¸ç»Ÿä¸€ï¼Œç»´æŠ¤æˆæœ¬å¢åŠ </li>
<li>åŸºç¡€èƒ½åŠ›é€€åŒ–ï¼Œç¦»å¼€ AI å°±ä¸ä¼šå†™ä»£ç äº†</li>
</ol>
<p>AI æ˜¯è¾…åŠ©å·¥å…·ï¼Œä¸æ˜¯æ›¿ä»£å“ã€‚æ ¸å¿ƒé€»è¾‘è¿˜æ˜¯è¦è‡ªå·±æŠŠæ¡ï¼ŒAI è´Ÿè´£æé«˜æ•ˆç‡å’Œå¤„ç†ç¹ççš„éƒ¨åˆ†ã€‚</p>
<h2 data-id="heading-6">å·¥å…·é“¾ååŒ</h2>
<p>åœ¨å®è·µä¸­ï¼Œè¿™äº›å·¥å…·ä¸æ˜¯å­¤ç«‹ä½¿ç”¨çš„ï¼Œè€Œæ˜¯å½¢æˆäº†ä¸€ä¸ªå·¥ä½œæµã€‚æˆ‘çš„å…¸å‹å·¥ä½œæµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<p><strong>1. æ„æ€é˜¶æ®µ</strong>ï¼šå…ˆåœ¨ ChatGPT æˆ– Gemini ä¸Šè®¨è®ºè®¾è®¡æ€è·¯ï¼Œç¡®å®šå¤§æ–¹å‘ã€‚è¿™ä¸ªé˜¶æ®µä¸»è¦æ˜¯ç†æ¸…æ€è·¯ï¼Œè®¾è®¡æ•°æ®æ¶æ„ï¼Œä¸æ¶‰åŠå…·ä½“ä»£ç ã€‚</p>
<p><strong>2. æ¡†æ¶æ­å»º</strong>ï¼šç”¨ Claude Code/WARP ç”ŸæˆåŸºç¡€æ¡†æ¶å’Œé¡¹ç›®ç»“æ„ã€‚è¿™éƒ¨åˆ†ç›¸å¯¹æ ‡å‡†åŒ–ï¼ŒAI ç”Ÿæˆçš„è´¨é‡ä¸é”™ã€‚</p>
<p><strong>3. æ ¸å¿ƒå®ç°</strong>ï¼šåˆ‡æ¢åˆ° Cursor/Traeï¼Œè‡ªå·±å†™æ ¸å¿ƒé€»è¾‘ï¼Œé…åˆè‡ªåŠ¨è¡¥å…¨æé«˜æ•ˆç‡ã€‚è¿™éƒ¨åˆ†éœ€è¦ç²¾ç¡®æ§åˆ¶ï¼Œä¸èƒ½å®Œå…¨äº¤ç»™ AIã€‚</p>
<p><strong>4. åŠŸèƒ½å®Œå–„</strong>ï¼šéœ€è¦æ·»åŠ çš„è¾…åŠ©åŠŸèƒ½ã€å·¥å…·å‡½æ•°ç­‰ï¼Œå¯ä»¥ç”¨ Claude Code/WARP æ‰¹é‡ç”Ÿæˆã€‚</p>
<p><strong>5. ä¼˜åŒ–è°ƒæ•´</strong>ï¼šç”¨é€‰ä¸­ä¿®æ”¹åŠŸèƒ½åšå±€éƒ¨ä¼˜åŒ–ï¼Œæ¯”å¦‚æ€§èƒ½ä¼˜åŒ–ã€ä»£ç é£æ ¼ç»Ÿä¸€ç­‰ã€‚</p>
<p><strong>6. é—®é¢˜æ’æŸ¥</strong>ï¼šé‡åˆ° bug å…ˆè‡ªå·±è°ƒè¯•ï¼Œæä¸å®šçš„å†æ‰¾ GPT5 å¸®å¿™åˆ†æã€‚</p>
<p>è¿™ä¸ªæµç¨‹ä¸æ˜¯å›ºå®šçš„ï¼Œæ ¹æ®å…·ä½“æƒ…å†µä¼šæœ‰è°ƒæ•´ã€‚å…³é”®æ˜¯è¦çµæ´»ï¼Œä¸è¦æ­»æ¿åœ°åªç”¨ä¸€ä¸ªå·¥å…·ã€‚</p>
<h2 data-id="heading-7">ä½¿ç”¨ä¸­çš„å¸¸è§é™·é˜±</h2>
<p>ç”¨äº†è¿™ä¹ˆä¹… AI ç¼–ç¨‹ï¼Œè¸©è¿‡ä¸å°‘å‘ï¼Œè¿™é‡Œåˆ†äº«ä¸€äº›å¸¸è§çš„é™·é˜±ï¼š</p>
<p><strong>1. è¿‡åº¦ç›¸ä¿¡ AI çš„è¾“å‡º</strong></p>
<p>AI ç”Ÿæˆçš„ä»£ç çœ‹èµ·æ¥å¾ˆä¸“ä¸šï¼Œä½†å¯èƒ½å­˜åœ¨é€»è¾‘é”™è¯¯ã€‚ç‰¹åˆ«æ˜¯æ¶‰åŠä¸šåŠ¡é€»è¾‘çš„éƒ¨åˆ†ï¼ŒAI ç†è§£å¯èƒ½æœ‰åå·®ã€‚ä¸€å®šè¦ä»”ç»† reviewï¼Œä¸èƒ½é—­çœ¼è·‘ã€‚</p>
<p><strong>2. å¿½è§†æ€§èƒ½é—®é¢˜</strong></p>
<p>AI ç”Ÿæˆçš„ä»£ç é€šå¸¸èƒ½è·‘ï¼Œä½†æ€§èƒ½ä¸ä¸€å®šå¥½ã€‚æ¯”å¦‚è¯¥ç”¨å­—å…¸çš„åœ°æ–¹ç”¨äº†åˆ—è¡¨ï¼Œè¯¥æ‰¹é‡å¤„ç†çš„åœ°æ–¹ç”¨äº†å¾ªç¯ã€‚åœ¨æ€§èƒ½æ•æ„Ÿçš„åœºæ™¯è¦ç‰¹åˆ«æ³¨æ„ã€‚</p>
<p><strong>3. å®‰å…¨æ¼æ´</strong></p>
<p>è¿™ä¸ªç‰¹åˆ«é‡è¦ã€‚AI å¯èƒ½ä¼šç”Ÿæˆæœ‰å®‰å…¨éšæ‚£çš„ä»£ç ï¼Œæ¯”å¦‚ SQL æ³¨å…¥ã€XSS æ¼æ´ç­‰ã€‚æ¶‰åŠç”¨æˆ·è¾“å…¥ã€æ•°æ®åº“æ“ä½œã€æ–‡ä»¶æ“ä½œçš„ä»£ç ï¼Œä¸€å®šè¦ä»”ç»†æ£€æŸ¥ã€‚</p>
<p><strong>4. ä¾èµ–æ··ä¹±</strong></p>
<p>AI å–œæ¬¢å¼•å…¥å„ç§åº“æ¥è§£å†³é—®é¢˜ï¼Œæœ‰æ—¶å€™ä¸ºäº†ä¸€ä¸ªç®€å•åŠŸèƒ½å¼•å…¥ä¸€ä¸ªå·¨å¤§çš„ä¾èµ–ã€‚è¦è¯„ä¼°æ˜¯å¦çœŸçš„éœ€è¦ï¼Œèƒ½ç”¨æ ‡å‡†åº“è§£å†³çš„å°±ä¸è¦å¼•å…¥ç¬¬ä¸‰æ–¹åº“ã€‚</p>
<p><strong>5. ä»£ç é£æ ¼ä¸ä¸€è‡´</strong></p>
<p>ä¸åŒçš„ AI å·¥å…·ï¼Œç”šè‡³åŒä¸€ä¸ªå·¥å…·çš„ä¸åŒæ—¶åˆ»ï¼Œç”Ÿæˆçš„ä»£ç é£æ ¼éƒ½å¯èƒ½ä¸ä¸€æ ·ã€‚å¦‚æœä¸æ³¨æ„ç»Ÿä¸€ï¼Œä»£ç åº“ä¼šå˜å¾—å¾ˆæ··ä¹±ã€‚å»ºè®®é…ç½®å¥½ linter å’Œ formatterï¼Œç”Ÿæˆåè‡ªåŠ¨æ ¼å¼åŒ–ã€‚</p>
<h2 data-id="heading-8">æå‡ AI ç¼–ç¨‹æ•ˆç‡çš„æŠ€å·§</h2>
<p>è¿™é‡Œåˆ†äº«ä¸€äº›æˆ‘å¸¸ç”¨çš„æå‡æ•ˆç‡çš„å°æŠ€å·§ï¼š</p>
<p><strong>1. ç»´æŠ¤ä¸€ä¸ª context æ–‡ä»¶</strong></p>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª <code>CLAUDE.md/WARP.md</code> æ–‡ä»¶ï¼Œå†™æ¸…æ¥šé¡¹ç›®çš„èƒŒæ™¯ã€æŠ€æœ¯æ ˆã€ç¼–ç è§„èŒƒã€å¸¸è§æ¨¡å¼ç­‰ã€‚æ¯æ¬¡è®© AI ç”Ÿæˆä»£ç æ—¶éƒ½å¼•ç”¨è¿™ä¸ªæ–‡ä»¶ï¼Œèƒ½å¤§å¹…æå‡ç”Ÿæˆè´¨é‡ã€‚</p>
<p><strong>2. æ„å»º prompt æ¨¡æ¿</strong></p>
<p>å¯¹äºå¸¸è§ä»»åŠ¡ï¼Œå‡†å¤‡å¥½ prompt æ¨¡æ¿ã€‚æ¯”å¦‚"åŸºäºä»¥ä¸‹æ¥å£å®šä¹‰ç”Ÿæˆ TypeScript ç±»å‹"ã€"ä¸ºè¿™ä¸ªå‡½æ•°ç¼–å†™å•å…ƒæµ‹è¯•"ç­‰ã€‚æ¨¡æ¿èƒ½è®©æŒ‡ä»¤æ›´ç²¾ç¡®ï¼Œå‡å°‘æ¥å›è°ƒæ•´ã€‚</p>
<p><strong>3. å¢é‡å¼å¼€å‘</strong></p>
<p>ä¸è¦è¯•å›¾ä¸€æ¬¡ç”Ÿæˆå®Œæ•´çš„åŠŸèƒ½ï¼Œè€Œæ˜¯åˆ†æ­¥éª¤è¿›è¡Œã€‚å…ˆç”Ÿæˆæ¡†æ¶ï¼Œå†å¡«å……ç»†èŠ‚ï¼Œæœ€åä¼˜åŒ–ã€‚è¿™æ ·æ¯ä¸€æ­¥éƒ½å¯æ§ï¼Œå‡ºé—®é¢˜ä¹Ÿå®¹æ˜“å®šä½ã€‚</p>
<p><strong>4. ä¿å­˜æœ‰ç”¨çš„ä»£ç ç‰‡æ®µ</strong></p>
<p>AI ç”Ÿæˆçš„ä¸€äº›å¥½çš„ä»£ç æ¨¡å¼ã€å·¥å…·å‡½æ•°ï¼ŒåŠæ—¶ä¿å­˜ä¸‹æ¥ã€‚ä¸‹æ¬¡é‡åˆ°ç±»ä¼¼éœ€æ±‚å¯ä»¥ç›´æ¥å¤ç”¨ï¼Œæˆ–è€…ä½œä¸º AI çš„å‚è€ƒç¤ºä¾‹ã€‚</p>
<p><strong>5. å­¦ä¼šæ­£ç¡®æé—®</strong></p>
<p>ç»™ AI çš„æŒ‡ä»¤è¦å…·ä½“ã€æ˜ç¡®ã€‚ä¸è¦è¯´"å¸®æˆ‘å†™ä¸ªå‡½æ•°"ï¼Œè€Œè¦è¯´"å†™ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ç”¨æˆ· ID åˆ—è¡¨ï¼Œæ‰¹é‡æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼Œè¿”å›ç”¨æˆ·å¯¹è±¡çš„å­—å…¸ï¼Œkey æ˜¯ç”¨æˆ· ID"ã€‚ä¿¡æ¯è¶Šå…·ä½“ï¼Œç»“æœè¶Šå‡†ç¡®ã€‚</p>
<p><strong>6. è®¾ç½®åˆç†çš„é¢„æœŸ</strong></p>
<p>AI ä¸æ˜¯é­”æ³•ï¼Œå®ƒæœ‰èƒ½åŠ›è¾¹ç•Œã€‚å¯¹äºåˆ›é€ æ€§çš„è®¾è®¡ã€å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ã€éœ€è¦æ·±åº¦æ€è€ƒçš„ç®—æ³•ï¼Œè¿˜æ˜¯è¦é äººã€‚AI æ“…é•¿çš„æ˜¯æ¨¡å¼åŒ–çš„ã€é‡å¤æ€§çš„ã€æœ‰æ˜ç¡®è§„èŒƒçš„ä»»åŠ¡ã€‚</p>
<h2 data-id="heading-9">å†™åœ¨æœ€å</h2>
<p>AI ç¼–ç¨‹å·¥å…·çš„å‡ºç°ï¼Œç¡®å®æå¤§åœ°æ”¹å˜äº†æˆ‘ä»¬å†™ä»£ç çš„æ–¹å¼ã€‚ä½†å®ƒç»ˆç©¶æ˜¯å·¥å…·ï¼Œå¦‚ä½•ç”¨å¥½è¿™ä¸ªå·¥å…·ï¼Œè¿˜æ˜¯è¦é æˆ‘ä»¬è‡ªå·±ä¸æ–­æ¢ç´¢å’Œå®è·µã€‚</p>
<p>æˆ‘è§‰å¾—ç°é˜¶æ®µæœ€é‡è¦çš„æ˜¯ä¿æŒå¼€æ”¾çš„å¿ƒæ€ï¼Œæ„¿æ„å°è¯•æ–°å·¥å…·ã€æ–°æ–¹æ³•ï¼Œä½†åŒæ—¶ä¹Ÿè¦ä¿æŒæ‰¹åˆ¤æ€§æ€ç»´ï¼Œä¸ç›²ç›®ä¾èµ–ã€‚æ¯ä¸ªäººçš„ç¼–ç¨‹ä¹ æƒ¯ã€é¡¹ç›®ç‰¹ç‚¹éƒ½ä¸ä¸€æ ·ï¼Œéœ€è¦æ‰¾åˆ°é€‚åˆè‡ªå·±çš„ä½¿ç”¨æ–¹å¼ã€‚</p>
<p>è¿™ç§å¤šå±‚æ¬¡çš„ç­–ç•¥ä¸æ˜¯å›ºå®šçš„ï¼Œéšç€å·¥å…·çš„è¿›åŒ–ã€ä¸ªäººèƒ½åŠ›çš„æå‡ï¼Œç­–ç•¥ä¹Ÿè¦ä¸æ–­è°ƒæ•´ã€‚æ¯”å¦‚åˆšå¼€å§‹æˆ‘å¾ˆä¾èµ– AI ç”Ÿæˆå®Œæ•´ä»£ç ï¼Œç°åœ¨æ›´å¤šæ˜¯ç”¨å®ƒæ¥åŠ é€Ÿæˆ‘è‡ªå·±çš„ç¼–ç è¿‡ç¨‹ã€‚</p>
<p>è¿˜æœ‰ä¸€ç‚¹å¾ˆé‡è¦ï¼šä¸è¦å› ä¸ºæœ‰äº† AI å°±åœæ­¢å­¦ä¹ ã€‚ç›¸åï¼ŒAI è®©æˆ‘ä»¬æœ‰æ›´å¤šæ—¶é—´å»å­¦ä¹ æ›´æœ¬è´¨çš„ä¸œè¥¿â€”â€”ç³»ç»Ÿè®¾è®¡ã€ç®—æ³•æ€æƒ³ã€ä¸šåŠ¡ç†è§£ã€‚è¿™äº›æ˜¯ AI æš‚æ—¶è¿˜æ›¿ä»£ä¸äº†çš„ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ä½œä¸ºå·¥ç¨‹å¸ˆçš„æ ¸å¿ƒä»·å€¼ã€‚</p>
<p>æœ€åæƒ³è¯´çš„æ˜¯ï¼Œæˆ‘ä»¬æ­£å¤„åœ¨ä¸€ä¸ªç¼–ç¨‹æ–¹å¼å‰§å˜çš„æ—¶ä»£ã€‚ä¸‰å¹´å‰ Copilot åˆšå‡ºæ¥çš„æ—¶å€™ï¼Œå¾ˆå¤šäººè¿˜åœ¨è´¨ç–‘å®ƒçš„å®ç”¨æ€§ï¼›ç°åœ¨ï¼Œä¸ç”¨ AI è¾…åŠ©ç¼–ç¨‹åè€Œæ˜¾å¾—æœ‰ç‚¹è½ä¼äº†ã€‚è¿™ä¸ªå˜åŒ–é€Ÿåº¦ä¼šè¶Šæ¥è¶Šå¿«ï¼Œä¿æŒå­¦ä¹ ã€ä¿æŒæ¢ç´¢ï¼Œæ‰èƒ½ä¸è¢«æ—¶ä»£æŠ›ä¸‹ã€‚</p>
<p>å½“ç„¶ï¼Œå·¥å…·å†å¼ºå¤§ï¼Œä»£ç èƒŒåçš„æ€è€ƒã€è®¾è®¡ã€åˆ›é€ ï¼Œè¿˜æ˜¯å±äºæˆ‘ä»¬çš„ã€‚AI è®©æˆ‘ä»¬ä»ç¹çä¸­è§£æ”¾å‡ºæ¥ï¼Œæœ‰æ›´å¤šç²¾åŠ›å»åšçœŸæ­£æœ‰ä»·å€¼çš„äº‹æƒ…ã€‚è¿™å¤§æ¦‚å°±æ˜¯æŠ€æœ¯è¿›æ­¥çš„æ„ä¹‰æ‰€åœ¨å§ã€‚</p>
<p>ä»¥ä¸Šã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€åšæ–‡ç²¾è¯»ã€‘Chrome CSS 2025å¹´å›é¡¾]]></title>    <link>https://juejin.cn/post/7589206614929752104</link>    <guid>https://juejin.cn/post/7589206614929752104</guid>    <pubDate>2025-12-30T03:12:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589206614929752104" data-draft-id="7589207843787882531" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€åšæ–‡ç²¾è¯»ã€‘Chrome CSS 2025å¹´å›é¡¾"/> <meta itemprop="keywords" content="å‰ç«¯,CSS"/> <meta itemprop="datePublished" content="2025-12-30T03:12:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OpenTinyç¤¾åŒº"/> <meta itemprop="url" content="https://juejin.cn/user/3808325101432983"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€åšæ–‡ç²¾è¯»ã€‘Chrome CSS 2025å¹´å›é¡¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808325101432983/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OpenTinyç¤¾åŒº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T03:12:26.000Z" title="Tue Dec 30 2025 03:12:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡ç”±ä½“éªŒæŠ€æœ¯å›¢é˜Ÿç”³å›å¥åŸåˆ›ã€‚</p>
<h2 data-id="heading-0">åºè¨€</h2>
<p>è¿‘æ—¥å‘ç° Chrome å®˜æ–¹æŠ€æœ¯å¹³å° chrome.dev å‘å¸ƒäº†ä¸€ç¯‡æå…·ä»·å€¼çš„ CSS æŠ€æœ¯æ€»ç»“æ–‡ç« ï¼ŒåŸæ–‡é“¾æ¥ä¸ºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fchrome.dev%2Fcss-wrapped-2025%2F" target="_blank" title="https://chrome.dev/css-wrapped-2025/" ref="nofollow noopener noreferrer">CSS-Wrapped-2025</a>ï¼ŒWrapped å•è¯åœ¨è¿™é‡Œæ˜¯æ‰“åŒ…ï¼Œæ€»ç»“ï¼Œå›é¡¾çš„æ„æ€ã€‚Chromeå®˜æ–¹ç½—åˆ—äº†2025å¹´çš„æ–°å¢CSSå’Œç»„ä»¶ç‰¹æ€§ç­‰ï¼Œæœ‰éœ€è¦çš„å°ä¼™ä¼´å¯ä»¥å…³æ³¨ä¸€ä¸‹ã€‚æ­¤å¤–ï¼ŒChrome å®˜æ–¹äº¦å‘å¸ƒäº† 2024 å¹´åº¦çš„ CSS ç‰¹æ€§å›é¡¾æ–‡ç« ï¼Œé“¾æ¥ä¸ºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fchrome.dev%2Fcss-wrapped-2024%2F" target="_blank" title="https://chrome.dev/css-wrapped-2024/" ref="nofollow noopener noreferrer">CSS-Wrapped-2024</a>ï¼Œå¯ä»¥å¯¹ç…§æŸ¥é˜…ã€‚</p>
<p>ã€ŠCSS Wrapped 2025ã€‹ä¸€æ–‡å…±åˆ†ä¸ºä¸‰ä¸ªæ ¸å¿ƒç« èŠ‚ï¼Œåˆ†åˆ«æ˜¯<code>å¯å®šåˆ¶çš„ç»„ä»¶</code>(Customizable Components)ã€ <code>ä¸‹ä¸€ä»£äº¤äº’</code>(Next-gen Interactions)ã€ <code>ä¼˜åŒ–çš„äººä½“å·¥ç¨‹å­¦</code>(Optimized ergonomics)ã€‚ ç”±äºç²¾åŠ›æ—¶é—´æœ‰é™ï¼Œæœ¬æ–‡å…ˆç²¾è¯»ç¬¬ä¸€éƒ¨åˆ†ï¼Œæœ‰æœºä¼šå†åˆ†äº«åç»­éƒ¨åˆ†ã€‚</p>
<p>2025 å…¨å¹´ï¼ŒChromeå‘å¸ƒçš„ç‰ˆæœ¬ä¸º 132~143ï¼Œæœ¬æ–‡çš„ç‰¹æ€§ä¹Ÿé›†ä¸­åœ¨è¿™ä¸ªèŒƒå›´ï¼Œå®ƒæœ‰å¾ˆå¤šå…¨æ–°çš„æ¦‚å¿µï¼Œæˆ–è€…æ˜¯å»å¹´CSSæ¦‚å¿µçš„ä¸€äº›å»¶ä¼¸ã€‚å‰ç«¯äººå‘˜æ€»ä¸èƒ½ç¬¬ä¸€æ—¶é—´ä½¿ç”¨æ–°ç‰¹æ€§ï¼Œä»¥å…¼å®¹æ€§ä¸ºå€Ÿå£å¿½è§†æ–°æŠ€æœ¯ï¼Œæˆ‘ä¹Ÿæ˜¯ä¸€æ ·ã€‚æ‰€ä»¥å€Ÿæ­¤æ–‡ç« ä¸­æ–°ç‰¹æ€§ä¸ºæçº²ï¼Œå…¨é¢æ€»ç»“è¯¥ç‰¹æ€§çš„çŸ¥è¯†ï¼Œè¡¥å……æˆ‘çš„ä¸€äº›ç†è§£å’Œæ€»ç»“ã€‚åŒæ—¶æ¯ä¸€ä¸ªæ–°ç‰¹æ€§è¿˜å‡†å¤‡<code>ä¸€å¥è¯çš„è§£é‡Š</code> å’Œ <code>å®Œæ•´ç¤ºä¾‹</code>ï¼Œæ–¹ä¾¿å¤§å®¶å¿«é€Ÿäº†è§£ã€‚Chrome 143å‡çº§å¥½äº†å—ï¼Œå¼€å§‹å¸¦ä½ é£ï¼</p>
<h2 data-id="heading-1">ä¸€ã€å‘½ä»¤è°ƒç”¨å™¨ (Invoker Commands)</h2>
<h3 data-id="heading-2">ä¸€å¥è¯çš„è§£é‡Š</h3>
<blockquote>
<p><code>å‘½ä»¤è°ƒç”¨å™¨æ˜¯é€šè¿‡Buttonå…ƒç´ ï¼Œå‘Dialog,popoverå…ƒç´ æˆ–ä»»æ„å…ƒç´ ä¸Šè§¦å‘ä¸€ä¸ªåŠ¨ä½œå‘½ä»¤ã€‚</code> <a href="https://code.juejin.cn/pen/7582409136211116032" target="_blank" title="https://code.juejin.cn/pen/7582409136211116032">å®Œæ•´ç¤ºä¾‹</a></p>
</blockquote>
<p>å‘½ä»¤è°ƒç”¨å™¨ç‰¹æ€§å…¼å…·å£°æ˜å¼è¯­æ³•çš„é«˜å¯è¯»æ€§ä¼˜åŠ¿ï¼Œä¸”èƒ½æœ‰æ•ˆå‡å°‘ JavaScript ä»£ç çš„ç¼–å†™é‡ã€‚åœ¨è¯¥ç‰¹æ€§ä¸­ï¼ŒButton å…ƒç´ è¢«å®šä¹‰ä¸º â€œå‘½ä»¤æºâ€ï¼Œæ¥æ”¶å‘½ä»¤æ‰§è¡Œçš„å…ƒç´ åˆ™ä¸º â€œå‘½ä»¤ç›®æ ‡â€ã€‚</p>
<p><strong>å‘½ä»¤æº</strong>ï¼šâ­ä»… Button å…ƒç´ æ‰å…è®¸å½“å‘½ä»¤æºï¼Œå®ƒæ·»åŠ ä»¥ä¸‹å±æ€§ï¼š</p>
<ul>
<li>ã€attrã€‘commandfor: å±æ€§å€¼ä¸ºå‘½ä»¤ç›®æ ‡å…ƒç´ çš„ idï¼Œç”¨äºå…³è”å¯¹åº”çš„å‘½ä»¤ç›®æ ‡ã€‚</li>
<li>ã€attrã€‘command: ç”¨äºæŒ‡å®šç‚¹å‡» Button å…ƒç´ åè§¦å‘çš„å‘½ä»¤åŠ¨ä½œï¼Œå…¶å±æ€§å€¼è¯´æ˜å¦‚ä¸‹ï¼š</li>
</ul>





















































<table><thead><tr><th>å‘½ä»¤</th><th>è¡Œä¸ºç›®æ ‡</th><th>ç­‰æ•ˆjs</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>show-modal</td><td>æ‰“å¼€dialog</td><td>dialog.showModal()</td><td/></tr><tr><td>close</td><td>å…³é—­dialog</td><td>dialog.close()</td><td/></tr><tr><td>request-close</td><td>è¯·æ±‚å…³é—­dialog</td><td>dialog.requestClose()</td><td>å¯å–æ¶ˆï¼š ev.preventDefault()</td></tr><tr><td>show-popover</td><td>æ‰“å¼€popover</td><td>el.showPopover()</td><td/></tr><tr><td>hide-popover</td><td>å…³é—­popover</td><td>el.hidePopover()</td><td/></tr><tr><td>toggle-popover</td><td>åˆ‡æ¢popover</td><td>el.togglePopover()</td><td/></tr><tr><td>--any-command</td><td>è‡ªå®šä¹‰å‘½ä»¤</td><td>-</td><td>äº‹ä»¶åå¿…é¡» -- æ‰“å¤´<br/>ç›®æ ‡ä¸Šç›‘å¬commandäº‹ä»¶<br/>éå†’æ³¡ï¼Œå¯å–æ¶ˆçš„äº‹ä»¶</td></tr></tbody></table>
<ul>
<li>ã€propã€‘command: åŒä¸Š</li>
<li>ã€propã€‘commandForElement: åŒ commandfor ï¼Œå€¼ä¸ºHTMLElementå¯¹è±¡ã€‚</li>
</ul>
<p><strong>å‘½ä»¤ç›®æ ‡</strong>ï¼š  é€šå¸¸æ˜¯ dialog, popoverå…ƒç´ ï¼Œä¸ºå®ƒä»¬æ·»åŠ ä¸€ä¸ªäº‹ä»¶ï¼š</p>
<ul>
<li>ã€eventã€‘command: è§¦å‘åœ¨ç›®æ ‡å…ƒç´ ä¸Šçš„äº‹ä»¶ã€‚ å…¶ä¸­äº‹ä»¶å‚æ•° <code>event.command</code> æ˜¯å‘½ä»¤å€¼ã€‚</li>
</ul>
<h3 data-id="heading-3">å…¼å®¹æ€§</h3>
<p>æ”¯æŒchrome135+Â  ff144+ï¼Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fkeithamus%2Finvokers-polyfill" target="_blank" title="https://github.com/keithamus/invokers-polyfill" ref="nofollow noopener noreferrer">polyfill æ–¹æ¡ˆ</a>ã€‚</p>
<h3 data-id="heading-4">æ€»ç»“</h3>
<ol>
<li>è¯¥ç‰¹æ€§çš„æ ¸å¿ƒä»·å€¼ä¸ä»…åœ¨äºå‡å°‘ JavaScript ä»£ç é‡ï¼Œæ›´åœ¨äºå®ç°äº†<code>æ›´å¥½çš„å¯è¯»æ€§ï¼Œæ›´å¥½çš„è¯­ä¹‰åŒ–ï¼Œæ›´å¥½çš„AIè¯†åˆ«</code>ã€‚Dialogå…ƒç´ æ˜¯å­˜åœ¨è¾ƒä¹…çš„å†·é—¨æ ‡ç­¾ï¼ŒPopover APIæ˜¯è¿‘ä¸¤å¹´çš„æ–°ç‰¹æ€§ï¼Œä¹‹å‰æ“ä½œä»–ä»¬å¿…é¡»é€šè¿‡Javascriptä»£ç ã€‚</li>
<li>è¯¥ç‰¹æ€§ä¹Ÿæ˜¯ä¸€ä¸ªå¾®å‹çš„é€šçŸ¥ç³»ç»Ÿï¼ŒæŸäº›ç¨‹åº¦ä¸Šå¯ä»¥ä»£æ›¿ <code>new CustomEvent</code>çš„ä½¿ç”¨ã€‚åŒæ ·çš„ï¼Œæ›´å¥½çš„å¯è¯»æ€§ï¼Œå‚è§<code>å›¾ç‰‡ç¿»è½¬</code>çš„ç¤ºä¾‹ã€‚</li>
<li>å‘½ä»¤æºåªèƒ½æ˜¯Buttonï¼ŒæŸç§ç¨‹åº¦ä¸Šé™åˆ¶äº†å®ƒçš„ä½¿ç”¨ã€‚</li>
</ol>
<h2 data-id="heading-5">äºŒã€å¯¹è¯æ¡†è½»é‡å…³é—­ï¼ˆDialog Light Dismissï¼‰</h2>
<h3 data-id="heading-6">ä¸€å¥è¯çš„è§£é‡Š</h3>
<blockquote>
<p><code>ç»§ Popover Api å¼•å…¥ Light Dismiss ä¹‹åï¼ŒDialog ä¹Ÿæ”¯æŒäº†å®ƒ</code> <a href="https://code.juejin.cn/pen/7582845467080933403" target="_blank" title="https://code.juejin.cn/pen/7582845467080933403">å®Œæ•´ç¤ºä¾‹</a></p>
</blockquote>
<p>Light Dismiss ç›´æ¥ç¿»è¯‘å°±æ˜¯è½»é‡å…³é—­ï¼Œå‹å¥½å…³é—­ï¼Œå…·ä½“æ˜¯æŒ‡é€šè¿‡ç‚¹å‡» ::backdrop åŒºåŸŸã€æŒ‰ä¸‹ Esc é”®å³å¯è§¦å‘ç›®æ ‡å…ƒç´ è‡ªåŠ¨å…³é—­çš„äº¤äº’è¡Œä¸ºã€‚Light DismissåŒæ ·çš„å…·å¤‡å£°æ˜å¼å¯é˜…è¯»æ€§ï¼Œè¿˜èƒ½é¿å…Javascriptçš„ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">dialog</span> <span class="hljs-attr">closedby</span>=<span class="hljs-string">"none"</span>&gt;</span>  ä¸è§¦å‘å…³é—­ <span class="hljs-tag">&lt;/<span class="hljs-name">dialog</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dialog</span> <span class="hljs-attr">closedby</span>=<span class="hljs-string">"closerequest"</span>&gt;</span>æ¥å— escæˆ–å…¶å®ƒjsè§¦å‘ <span class="hljs-tag">&lt;/<span class="hljs-name">dialog</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dialog</span> <span class="hljs-attr">closedby</span>=<span class="hljs-string">"any"</span>&gt;</span>  æ¥å—ä»»ä½•è§¦å‘ <span class="hljs-tag">&lt;/<span class="hljs-name">dialog</span>&gt;</span>
</code></pre>
<p>Light Dismiss é€šå¸¸æ˜¯ç”¨æˆ·åœ¨äº¤äº’è¿‡ç¨‹ä¸­é¢„æœŸçš„é»˜è®¤è¡Œä¸ºï¼Œè¿™ä¸€è®¾è®¡ä¸ä»…ä½“ç°äº† Chrome å¯¹ç”¨æˆ·ä½¿ç”¨ä½“éªŒäººä½“å·¥ç¨‹å­¦çš„å…³æ³¨ï¼Œæ›´å½°æ˜¾äº†å…¶å¯¹å¼€å‘è€…å¼€å‘ä½“éªŒäººä½“å·¥ç¨‹å­¦çš„é‡è§†ã€‚å¼€å‘è€…æ— éœ€è¿›è¡Œé¢å¤–å¼€å‘ï¼Œå³å¯è·å¾—é¢„æœŸçš„åˆç†ç»“æœã€‚å»¶ä¼¸äº†è§£å®ƒçš„ä¸€äº›ç»†èŠ‚ï¼š</p>
<ul>
<li>closerequest ä¸ any çš„ç›¸æ¯”ï¼Œå®ƒä¸æ¥å—<code>ç‚¹å‡»::backdropåŒºåŸŸå…³é—­</code>ï¼›æ­¤å¤–ç§»åŠ¨ç«¯çš„æ‰‹æŒ‡ä¾§æ»‘æˆ–å¯¼èˆªå›é€€ä¹Ÿä¼šè§¦å‘closerequestçš„è¡Œä¸ºã€‚</li>
<li>dialog.requestClose()åœ¨dialogå…ƒç´ ä¸Šè§¦å‘ <code>cancel å’Œ close</code>äº‹ä»¶ï¼Œ è€Œdialog.close() åªè§¦å‘<code>close</code>äº‹ä»¶ã€‚ åœ¨<code>cancel</code>äº‹ä»¶ä¸­æ‰§è¡Œ<code>ev.preventDefault()</code>å¯é˜»æ­¢å…³é—­ã€‚</li>
<li>dialogå…ƒç´ æ²¡æœ‰openäº‹ä»¶ï¼Œä½†å®ƒæœ‰ <code>toggle, beforetoggleäº‹ä»¶</code>, ç”¨æ¥ç›‘å¬æ‰“å¼€å…³é—­ã€‚ äº‹ä»¶å¯¹è±¡çš„<code>oldState,newState</code>ç”¨æ¥åˆ¤æ–­åˆ‡æ¢çš„æ–¹å‘ã€‚ æ­¤å¤–ï¼Œåªæœ‰<code>dialog å’Œ å¼¹å‡ºå±‚</code>æ”¯æŒè¿™2ä¸ªäº‹ä»¶åã€‚</li>
</ul>
<h3 data-id="heading-7">å…¼å®¹æ€§</h3>
<p>æ”¯æŒchrome134+Â  ff141+ï¼Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftak-dcxi%2Fdialog-closedby-polyfill" target="_blank" title="https://github.com/tak-dcxi/dialog-closedby-polyfill" ref="nofollow noopener noreferrer">polyfill æ–¹æ¡ˆ</a>ã€‚</p>
<h3 data-id="heading-8">å»¶ä¼¸ç†è§£ Popover API çš„Light Dismiss</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">popovertarget</span>=<span class="hljs-string">"mypopover"</span> <span class="hljs-attr">popovertargetaction</span>=<span class="hljs-string">"toggle"</span>&gt;</span>åˆ‡æ¢æ˜¾ç¤º<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"mypopover"</span> <span class="hljs-attr">popover</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ª auto å¼¹å‡ºå±‚<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p><strong>å‘½ä»¤æº</strong>ï¼šâ­ä»… Button å…ƒç´ å’ŒInput(type=button)æ‰å…è®¸å½“å‘½ä»¤æºï¼Œå®ƒæ·»åŠ ä»¥ä¸‹å±æ€§ï¼š</p>
<ul>
<li>ã€attrã€‘popovertarget: å…¶å€¼ä¸ºpopoverå…ƒç´ id</li>
<li>ã€attrã€‘popovertargetaction: ç‚¹å‡»çš„å‘½ä»¤åŠ¨ä½œï¼Œå…¶å€¼ä¸ºï¼š 'hide' | 'show' | 'toggle'</li>
</ul>
<blockquote>
<p>è§¦å‘popoverè¿˜å¯ä»¥ç”¨ä¼ ç»Ÿçš„Javascript, æˆ–è€…Buttonçš„commands æ¨¡å¼ï¼Œæ¯”å¦‚ï¼š el.showPopover()</p>
</blockquote>
<p><strong>popoverå±‚</strong>ï¼š ä»»æ„æ·»åŠ äº† [popover] å±æ€§çš„å…ƒç´ </p>
<ul>
<li>ã€attrã€‘popover: è®¾ç½®å…ƒç´ ä¸ºä¸€ä¸ªå¼¹å‡ºå±‚ï¼Œå®ƒæœ€æ—©æ”¯æŒä»¥ä¸‹2ä¸ªå€¼ï¼š
<ul>
<li>auto: è‡ªåŠ¨æ¨¡å¼ï¼Œä¹Ÿæ˜¯é»˜è®¤å€¼ã€‚ autoå³ç¬¦åˆLight Dismissé»˜è®¤å…³é—­è¡Œä¸ºã€‚åŒä¸€ä¸ªé¡µé¢ä¸Šï¼Œautoç±»åˆ«çš„å…ƒç´ åªèƒ½æ˜¾ç¤ºä¸€ä¸ªã€‚</li>
<li>manual:Â æ‰‹åŠ¨æ¨¡å¼ã€‚å¿…é¡»æ˜¾ç¤ºçš„å£°æ˜popovertargetactionï¼Œæˆ–è°ƒç”¨Javascriptå‡½æ•°æ‰è§¦å‘ï¼Œæ¯”å¦‚ï¼šel.showPopover()ã€‚åŒä¸€ä¸ªé¡µé¢ä¸Šï¼Œmanualç±»åˆ«å…ƒç´ å¯æ˜¾ç¤ºå¤šä¸ªã€‚</li>
</ul>
</li>
</ul>
<p>å‚è€ƒ<a href="https://code.juejin.cn/pen/7583980914653593635" target="_blank" title="https://code.juejin.cn/pen/7583980914653593635">å®Œæ•´ç¤ºä¾‹</a>ï¼Œå¯¹æ¯” Dialog ä¸ Popover API :</p>
<ul>
<li>éƒ½æ”¯æŒInvoker Commands å’Œ Light Dismiss</li>
<li>éƒ½æ”¯æŒJavascriptæ§åˆ¶å’Œå£°æ˜å¼è¡¨è¾¾ï¼š dialogå…ƒç´ çš„<code>closedby</code> å’Œ popoverå…ƒç´ çš„<code>popover</code>å±æ€§</li>
<li>éƒ½ä¼šäº§ç”Ÿä¸€ä¸ª<code>Top Layer</code>, æ— é¡»z-indexå°±èƒ½ç½®é¡¶å…ƒç´ ï¼Œä¸”ä¸å—çˆ¶å…ƒç´ çš„positionå½±å“ã€‚</li>
<li>å‘½ä»¤æºå’Œå‘½ä»¤ç›®æ ‡ä¹‹é—´ä¼šéšå¼çš„äº§ç”Ÿaria-detailså…³è”aria-expandedï¼Œç”¨äºè§¦å‘ç„¦ç‚¹å¯¼èˆªç­‰ã€‚</li>
</ul>
<p>Popover APIçš„è¿™äº›ç‰¹æ€§å…¼å®¹æ€§ä¸ºï¼šchrome114+, ff125+</p>
<h2 data-id="heading-9">ä¸‰ã€å¢å¼ºPopover (popover="hint") ä¸ å…´è¶£è°ƒç”¨(Interest Invoker)</h2>
<h3 data-id="heading-10">ä¸€å¥è¯çš„è§£é‡Š</h3>
<blockquote>
<p><code>hintæš—ç¤ºï¼šä¸€ç§æ›´è½»é‡çš„è§¦å‘è¡Œä¸ºçš„popoverç±»åˆ«</code> <a href="https://code.juejin.cn/pen/7584011726266318874" target="_blank" title="https://code.juejin.cn/pen/7584011726266318874">å®Œæ•´ç¤ºä¾‹</a></p>
</blockquote>
<p>åœ¨ä¸Šå°èŠ‚ä¸­ï¼Œå·²ç»è®²äº†popoveråŸæœ‰çš„2ä¸ªç±»åˆ«ï¼Œä»Šå¹´å®ƒåˆæ–°å¢äº†ä¸€ä¸ªç±»åˆ«ï¼šhint æš—ç¤ºã€‚è¿™ç§<code>hintå¼¹å‡ºå±‚</code>ï¼Œä¸ä»…å¯ä»¥ç”¨åŸæ¥çš„æ–¹æ³•è§¦å‘å®ƒï¼Œè¿˜å¢åŠ äº†ä¸€ç§å…´è¶£è°ƒç”¨è§¦å‘ã€‚ å…´è¶£è°ƒç”¨<code>Interest Invoker</code>æ˜¯æŒ‡ï¼šé€šè¿‡éç‚¹å‡»äº‹ä»¶ï¼Œæ¯”å¦‚hover,mouseover,mouseout, focus,blur å®ƒçš„å˜åŒ–ã€‚æ‚¬æµ®å°±æ˜¾ç¤ºï¼Œç¦»å¼€å°±éšè—ï¼Œååˆ†ç¬¦åˆ<code>tooltipç»„ä»¶</code>åœºæ™¯ã€‚</p>
<pre><code class="hljs language-html" lang="html">  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">interestfor</span>=<span class="hljs-string">"mypopover1"</span>&gt;</span>æ‚¬æµ®è§¦å‘ hint1 å¼¹å‡ºå±‚<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"mypopover1"</span> <span class="hljs-attr">popover</span>=<span class="hljs-string">'hint'</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ª hint1 å¼¹å‡ºå±‚<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p><strong>å‘½ä»¤æº</strong>ï¼šå®ƒæ–°å¢ä»¥ä¸‹ç›¸å…³å†…å®¹ï¼š</p>
<ul>
<li>ã€attrã€‘interestfor: å±æ€§å€¼ä¸º hintç±»åˆ«çš„popoverå…ƒç´ id</li>
<li>ã€css-ruleã€‘interest-delay: è®¾ç½®æ‚¬æµ®è§¦å‘å’Œç¦»å¼€éšè—çš„æ—¶é—´ã€‚ å®ƒæ˜¯å¤åˆå±æ€§ï¼š interest-delay-start, interest-delay-endã€‚é»˜è®¤è§¦å‘çš„æ—¶é—´æ˜¯ 0.5sã€‚</li>
<li>ã€css-selectorã€‘ :interest-source å’Œ :interest-target æ˜¯æŒ‡ï¼Œå¦‚æœå½“å‰å…´è¶£æ­£åœ¨å‘ç”Ÿï¼Œé‚£ä¹ˆè§¦å‘æºå’Œhint å¼¹å‡ºå±‚å°±åˆ†åˆ«ä¸ºå…·æœ‰ä¸Šé¢çš„ä¼ªç±»ã€‚ç±»ä¼¼äº dialogæ‰“å¼€æ—¶ï¼Œdialog:opençš„ä¼ªç±»ä¸€æ ·ã€‚è¯¦è§ä¸Šé¢ç¤ºä¾‹ã€‚</li>
</ul>
<p><strong>hint å¼¹å‡ºå±‚</strong>ï¼šæ–°å¢ä»¥ä¸‹äº‹ä»¶ï¼š</p>
<ul>
<li>ã€eventã€‘interest: è§¦å‘æ˜¾ç¤ºçš„<code>InterestEventäº‹ä»¶</code>, äº‹ä»¶çš„sourceæŒ‡å‘è§¦å‘æºå…ƒç´ ã€‚</li>
<li>ã€eventã€‘loseinterest: ç¦»å¼€å¤±å»çš„<code>InterestEventäº‹ä»¶</code>ï¼Œäº‹ä»¶çš„sourceæŒ‡å‘è§¦å‘æºå…ƒç´ ã€‚</li>
</ul>
<p>å…´è¶£è°ƒç”¨ä¸å‰é¢2èŠ‚çš„å†…å®¹æœ‰ä¸€äº›é‡è¦çš„å·®å¼‚ï¼š</p>
<ol>
<li>å¼ºè°ƒå¿…é¡»éç‚¹å‡»äº‹ä»¶ï¼Œåœºæ™¯å¯¹åº”â€œæ‚¬è€Œæœªå†³â€çš„çŠ¶æ€ï¼Œå¯ä»¥é…åˆpopover="hint"ä½¿ç”¨ã€‚</li>
<li>è§¦å‘æºæ›´å¹¿æ³›ï¼Œä¸ä»…æ˜¯Buttonå…ƒç´ ï¼Œè¿˜å…è®¸ <code>&lt;a&gt;, &lt;button&gt;,&lt;area&gt;,SVG &lt;a&gt; </code>ã€‚</li>
<li>hintç±»åˆ«ä¸å½±å“autoç±»åˆ«çš„å¼¹çª—ï¼Œä¸ä¼šä¸»åŠ¨è§¦å‘autoå¼¹çª—å…³é—­ã€‚</li>
</ol>
<p>é•¿æœŸä»¥æ¥Webæ ‡å‡†å¯¹<code>hover</code>è¡Œä¸ºæ˜¯æ·¡è§†çš„ï¼Œåªæœ‰titleå±æ€§å’Œ :hoverçš„ä¼ªç±»ï¼Œä¸€ç›´ç¼ºå°‘å…³é”®çš„<code>hoveräº‹ä»¶</code>ã€‚æ­¤æ¬¡æä¾› <code>interestäº‹ä»¶</code>,å€Ÿæ­¤å¯ä»¥å˜ç›¸çš„è§†ä¸ºä¸€ç§<code>hoveräº‹ä»¶</code></p>
<h3 data-id="heading-11">å…¼å®¹æ€§</h3>
<p>æ”¯æŒchrome 142+, ä¸æ”¯æŒï¼šff,safari, <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmfreed7%2Finterestfor" target="_blank" title="https://github.com/mfreed7/interestfor" ref="nofollow noopener noreferrer">polyfill æ–¹æ¡ˆ</a>ã€‚</p>
<h2 data-id="heading-12">å››ã€å¯è‡ªå®šä¹‰çš„select (Customizable select)</h2>
<h3 data-id="heading-13">ä¸€å¥è¯çš„è§£é‡Š</h3>
<blockquote>
<p><code>å¢å¼ºçš„select å’Œ option å…ƒç´ ï¼Œä¸°å¯Œçš„ä¼ªç±»ã€ä¼ªå…ƒç´ ï¼Œå®šåˆ¶æ›´å®¹æ˜“</code> <a href="https://code.juejin.cn/pen/7584018175914999818" target="_blank" title="https://code.juejin.cn/pen/7584018175914999818">å®Œæ•´ç¤ºä¾‹</a></p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f6d7b5ba44a48b68e3975012d7c51e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT3BlblRpbnnnpL7ljLo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767669146&amp;x-signature=Bar6EY5%2Fl9YENUHr2vR3so7XFk0%3D" alt="ScreenShot_20251230103200.PNG" loading="lazy"/></p>
<p>å¯å®šåˆ¶çš„selectå¢åŠ äº†å¾ˆå¤šdomè§„èŒƒå’Œä¼ªç±»ï¼Œä¼ªå…ƒç´ ï¼Œå†…å®¹å¤ªå¤šä¸å®œå±•å¼€ç»†è¿°ï¼Œæ„Ÿå…´è¶£çœ‹ä¸Šé¢çš„å®Œæ•´MDNç¤ºä¾‹ï¼Œæˆ‘å·²ç»å¢åŠ è¯¦ç»†çš„æ³¨é‡Šã€‚æ­¤å¤„ä»…åˆ—å‡ºä¸€äº›é‡è¦çš„æ¦‚å¿µå’Œäº‹é¡¹ï¼Œä»¥ä¾¿èƒ½å¿«é€Ÿç†è§£ï¼š</p>
<ol>
<li>base-select è®¾ç½®ï¼š</li>
</ol>
<p>select å’Œ ::picker(select)ä¼ªå…ƒç´ éƒ½å¿…é¡»æ·»åŠ è§„åˆ™ï¼š <code>appearance: base-select</code> ,ä»¥åŒºåˆ«äºä¼ ç»Ÿselectæ ·å¼ã€‚</p>
<ol start="2">
<li>å¼¹å‡ºå±‚::picker(select)ç‰¹æ€§ï¼š</li>
</ol>
<p>å®ƒæ¸²æŸ“åœ¨é¡µé¢é¡¶å±‚<code>Top Layer</code>ï¼Œè¿™æ„å‘³ç€å®ƒä¼šæ˜¾ç¤ºåœ¨æ‰€æœ‰å…¶ä»–å†…å®¹ä¹‹ä¸Šï¼Œä¸ä¼šè¢«çˆ¶å®¹å™¨è£å‰ªã€‚æµè§ˆå™¨è¿˜ä¼šæ ¹æ®è§†å£ä¸­çš„å¯ç”¨ç©ºé—´è‡ªåŠ¨è°ƒæ•´ä¸‹æ‹‰åˆ—è¡¨çš„ä½ç½®å’Œç¿»è½¬ã€‚</p>
<ol start="3">
<li>å¢å¼ºçš„option:</li>
</ol>
<p>ä¼ ç»Ÿçš„optionå…ƒç´ ä»…æ”¯æŒ label,valueå±æ€§å’Œselectedï¼Œdisabledçš„å¸ƒå°”å±æ€§ã€‚<code>optionä¸­åµŒå¥—æœ‰å…¶å®ƒå…ƒç´ ï¼Œéƒ½æ˜¯ä¼šå¿½ç•¥çš„</code>ã€‚</p>
<p>å¢å¼ºåçš„optionå…ƒç´ <code>æ”¯æŒåµŒå¥—span,imgç­‰ç­‰æ™®é€šå…ƒç´ </code>ï¼Œä½†è¦é¿å…åµŒå¥— a, input ç­‰äº¤äº’å…ƒç´ å°±è¡Œäº†ã€‚Â </p>
<ol start="4">
<li>æ–°å¢ selectedcontent å…ƒç´ ï¼š</li>
</ol>
<p>è¯¥å…ƒç´ å¿…é¡»éµå¾ª <code>select &gt; button &gt; selectedcontent</code> çš„åµŒå¥—ç»“æ„ï¼Œè¯¦è§ç¤ºä¾‹ã€‚</p>
<p>selectçš„é€‰æ‹©å€¼ï¼ˆå³changeäº‹ä»¶ï¼‰ä¹‹åï¼Œé€‰ä¸­çš„optionçš„èŠ‚ç‚¹ä¼šè¢«cloneNodeåˆ›å»ºå‰¯æœ¬ï¼Œæ’å…¥åˆ°<code>selectedcontent</code>ä¸­ï¼Œæ‰€ä»¥ä»–ä»¬ç»“æ„ä¸€æ ·ï¼Œä½†ä¸æ˜¯åŒä¸€ä¸ªå…ƒç´ å®ä¾‹ã€‚</p>
<p>åŒæ—¶buttonæ˜¯æƒ°æ€§çš„ï¼Œä¸å“åº”focusç­‰ï¼Œè¡Œä¸ºæ›´åƒæ˜¯ <code>div</code>ã€‚</p>
<p>option å’Œ selectedcontent çš„å­é¡¹ï¼Œéƒ½å¯ä»¥ç”¨æ™®é€šçš„ css é€‰æ‹©å™¨å»åˆ†åˆ«æ§åˆ¶æ ·å¼ã€‚</p>
<ol start="5">
<li>select å€Ÿç”¨ Popover API</li>
</ol>
<p>å®ƒ<code>éšå¼å€Ÿç”¨äº†éå¸¸å¤šçš„Popover ç‰¹æ€§</code>ï¼Œæ¯”å¦‚ :popover-openä¼ªç±»ï¼Œæ— éœ€<code>anchor-name</code>çš„éšå¼çš„é”šç‚¹å¼•ç”¨ï¼Œä¸”å¯ä»¥å®šä¹‰å¼¹å‡ºå±‚ä¸é”šç‚¹çš„ä½ç½®å…³ç³»ï¼Œæº¢å‡ºç¿»è½¬ç­‰ç­‰ã€‚</p>
<ol start="6">
<li>selectçš„multiple å’Œ optgroup æœªå¢å¼º</li>
</ol>
<p>è¿™æ„å‘³ç€å¤šé€‰å’Œåˆ†ç»„åŠŸèƒ½ï¼Œéœ€è¦é‡æ–°å®ç°ï¼Œå¯¹äºç»„ä»¶åº“çš„ä½œè€…æ¥è¯´ï¼Œè¿™æ— ç–‘å¾—å›é€€åˆ°ä¼ ç»Ÿæ–¹æ¡ˆï¼Œå¹¸å¥½æœ‰Popover APIã€‚</p>
<h3 data-id="heading-14">å…¼å®¹æ€§ï¼š</h3>
<p>æ”¯æŒ chrome 135+ , ff,safariå‡ ä¸æ”¯æŒğŸ˜­ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjosepharhar%2Fcustomizable-select-polyfill%25C2%25A0" target="_blank" title="https://github.com/josepharhar/customizable-select-polyfill%C2%A0" ref="nofollow noopener noreferrer">polyfill æ–¹æ¡ˆ</a></p>
<p>è¿™ä¸ªæ–¹æ¡ˆå¹¶éçœŸæ­£æ„ä¹‰çš„polyfill, å®ƒä½¿ç”¨è‡ªå®šä¹‰çš„ webComponentæŠ€æœ¯å®ç°äº†å¹³æ›¿ã€‚</p>
<h2 data-id="heading-15">äº”ã€æ»šåŠ¨æ§åˆ¶ä¼ªå…ƒç´ (::scroll-marker/button())</h2>
<h3 data-id="heading-16">ä¸€å¥è¯çš„è§£é‡Š</h3>
<blockquote>
<p>ä¸ºæ»šåŠ¨å®¹å™¨çš„æ·»åŠ ä¼ªå…ƒç´ ï¼Œç”¨äºæ§åˆ¶å®¹å™¨æ»šåŠ¨ <a href="https://code.juejin.cn/pen/7584018234107265062" target="_blank" title="https://code.juejin.cn/pen/7584018234107265062">å®Œæ•´ç¤ºä¾‹</a></p>
</blockquote>
<p>HTMLæ—©æ—©æ·»åŠ äº†dialog, detail ç­‰å…ƒç´ ï¼Œä½†ä¸€ç›´æ²¡æœ‰å¢åŠ ä¸€ä¸ªè½®æ’­å›¾å…ƒç´ ï¼Œä»Šå¹´åªæŠ æŠ æœæœæ·»åŠ äº†ä¸‰ä¸ªä¼ªå…ƒç´ ï¼Œæˆ–è®¸æ˜¯å› ä¸ºæ·»åŠ ä¸€ä¸ªæ–°å…ƒç´ éœ€è¦è€ƒè™‘çš„äº‹æƒ…å¤ªå¤šã€‚</p>
<ol>
<li>::scroll-button() Â <code>æ»šåŠ¨å®¹å™¨æŒ‰é’®çš„ä¼ªå…ƒç´ </code>ï¼Œç‚¹å‡»å®ƒä¼šè§¦å‘å®¹å™¨æ»šåŠ¨ã€‚å®ƒéå¸¸ç±»ä¼¼äº ::before, ::afterä½œç”¨, éƒ½éœ€è¦contentæ‰æ˜¾ç¤º,ä¸”å‘ˆç°åœ¨å®¹å™¨çš„å†…éƒ¨ã€‚</li>
</ol>
<p>æ¯ä¸ªå®¹å™¨æœ€å¤šæœ‰4ä¸ªæ»šåŠ¨æ–¹å‘ï¼Œæ‹¬å·çš„ä½œç”¨æ˜¯<code>æŒ‡å®šæ»šåŠ¨æ–¹å‘</code>ï¼Œå¯å–å€¼ï¼š*ï¼Œ left,right,up,down, block-end,block-start, inline-end,inline-startç­‰ã€‚</p>
<p>æŒ‰é’®ä¼ªå…ƒç´ å…·æœ‰çŠ¶æ€ï¼Œæ¯”å¦‚å®¹å™¨æ»šåŠ¨åˆ°ä¸¤ç«¯ä¹‹åï¼Œæ»šåŠ¨æŒ‰é’®ä¼šè‡ªåŠ¨ç¦ç”¨ã€‚ å®ƒå…·æœ‰ä»¥ä¸‹çŠ¶æ€ï¼š enabled, disabled,hover,active,focus</p>
<ol start="2">
<li>::scroll-marker æ˜¯æ»šåŠ¨å®¹å™¨ä¸­ï¼ŒæŒ‡ç¤º<code>æ»šåŠ¨é¡¹çš„ä¼ªå…ƒç´ </code>ï¼Œå®ƒåŒæ ·ä¹Ÿéœ€è¦contentæ‰æ˜¾ç¤ºã€‚</li>
</ol>
<p>å®ƒå…·æœ‰ <code>:target-current ä¼ªç±»</code>ï¼Œ è¡¨ç¤ºæ»šåŠ¨åˆ°å½“å‰æ»šåŠ¨é¡¹ã€‚å½“ç„¶ï¼Œ :hover, :activeç­‰ä¼ªç±»ä¹Ÿèƒ½ä½¿ç”¨</p>
<ol start="3">
<li>::scroll-marker-group æ˜¯å‘ˆç°åœ¨æ»šåŠ¨å®¹å™¨å†…éƒ¨çš„ä¼ªå…ƒç´ ï¼Œæ”¶é›†å®¹çº³æ‰€æœ‰çš„::scroll-markerå…ƒç´ ã€‚</li>
</ol>
<p>marker-groupå…ƒç´ è‡ªèº«æ²¡æœ‰é«˜åº¦ï¼Œä½†å¯ä»¥è®¾ç½®è¾¹æ¡†ï¼Œå¸ƒå±€ï¼Œé—´è·ç­‰å†…å®¹ã€‚</p>
<h3 data-id="heading-17">å…¼å®¹æ€§ï¼š</h3>
<p>æ”¯æŒchrome 135+ , ff,safariå‡ ä¸æ”¯æŒğŸ˜­ã€‚ç”±äºå®ƒæ˜¯css ç‰¹æ€§ï¼Œæ— æ³•Polyfill, å»ºè®®ä½¿ç”¨ä¼ ç»Ÿçš„divå»å®ç°å³å¯ï¼</p>
<h2 data-id="heading-18">å…­ã€è®¾ç½®æ»šåŠ¨æ ‡è®°ç»„å®¹å™¨(scroll-target-group)</h2>
<h3 data-id="heading-19">ä¸€å¥è¯çš„è§£é‡Š</h3>
<blockquote>
<p>è®¾ç½®å…ƒç´ ä¸ºæ»šåŠ¨å®¹å™¨ <a href="https://code.juejin.cn/pen/7584728540432564224" target="_blank" title="https://code.juejin.cn/pen/7584728540432564224">å®Œæ•´ç¤ºä¾‹</a></p>
</blockquote>
<p>CSSå±æ€§ scroll-target-group ç”¨æ¥æŒ‡å®šä¸€ä¸ªå…ƒç´ ä¸ºæ»šåŠ¨æ ‡è®°ç»„å®¹å™¨ï¼Œ å®ƒåªæœ‰2ä¸ªå€¼ï¼šÂ </p>
<ul>
<li>none: å…ƒç´ éæ»šåŠ¨æ ‡è®°ç»„å®¹å™¨</li>
<li>auto: å…ƒç´ ä¸ºæ»šåŠ¨æ ‡è®°ç»„å®¹å™¨</li>
</ul>
<p>æ»šåŠ¨æ ‡è®°ç»„å®¹å™¨ä¸­é€šå¸¸åŒ…å«é”šç‚¹é“¾æ¥åˆ—è¡¨ç­‰ï¼Œé…åˆä¼ªç±» :target-current æ¥çªå‡ºæ˜¾ç¤ºæŸä¸ªé”šç‚¹ï¼Œæ•ˆæœéå¸¸ç±»ä¼¼ä¼ ç»Ÿçš„Anchorç»„ä»¶ï¼Œå½“å®¹å™¨æ»šåŠ¨æ—¶ï¼Œå¯ä»¥é«˜äº®æŒ‡å®šçš„ç›®å½•é¡¹ï¼Œä¸è¿‡è¿™äº›éƒ½æ˜¯æµè§ˆå™¨è‡ªåŠ¨å®Œæˆçš„ï¼Œä¸éœ€è¦ä¸€è¡Œjavascriptã€‚</p>
<p>å®ƒä¸::scroll-marker-group æœ‰æŸäº›ç›¸ä¼¼ç‚¹ï¼š</p>
<ul>
<li>::scroll-marker-groupï¼šæ˜¯åœ¨æŸä¸ªå…ƒç´ å†…éƒ¨ï¼Œåˆ›å»ºä¸€ä¸ªä¼ªå…ƒç´ å®¹å™¨ï¼Œç”¨æ¥å®¹çº³::sroll-markerï¼Œ éƒ½æ˜¯ä¼ªå…ƒç´ ã€‚</li>
<li>scroll-target-group: æ˜¯æŠŠä¸€ä¸ªçœŸå®å…ƒç´ å˜ä¸ºæ»šåŠ¨å®¹å™¨ï¼Œå†…éƒ¨æ”¾çœŸå®çš„link ç±»å…ƒç´ ï¼Œæ‰€ä»¥æ§åˆ¶ä¸Šä¼šæ›´çµæ´»ã€‚</li>
</ul>
<p>ä»å®˜æ–¹çš„æ€åº¦çœ‹ï¼Œè¿™2ä¸ªæ¦‚å¿µæå…¶ç›¸è¿‘ï¼Œéƒ½æ˜¯å®šä¹‰äº†ä¸€ä¸ªæ»šåŠ¨å®¹å™¨ï¼Œä¸”å†…éƒ¨çš„é”šç‚¹è¡Œä¸ºä¸€è‡´ï¼Œå‡æ”¯æŒä¼ªç±» :target-current ä»£è¡¨é«˜äº®çŠ¶æ€ï¼Œé¿å…Javascriptå»æ»šåŠ¨å’Œè®¾ç½®é«˜äº®ç­‰ã€‚</p>
<h3 data-id="heading-20">å…¼å®¹æ€§ï¼š</h3>
<p>æ”¯æŒ chrome 140+ ,ä½†ff,safariå‡ ä¸æ”¯æŒğŸ˜­ï¼Œä¸”css ç‰¹æ€§æ— æ³•Polyfillã€‚</p>
<h2 data-id="heading-21">ä¸ƒã€é”šå®šå®¹å™¨æŸ¥è¯¢ï¼ˆAnchored Container Queriesï¼‰</h2>
<h3 data-id="heading-22">ä¸€å¥è¯çš„è§£é‡Š</h3>
<blockquote>
<p>é”šç‚¹å®šä½æ—¶ï¼Œç¿»è½¬çŠ¶æ€å¯ä»¥æŸ¥è¯¢<a href="https://code.juejin.cn/pen/7584738593622392870" target="_blank" title="https://code.juejin.cn/pen/7584738593622392870">å®Œæ•´ç¤ºä¾‹</a></p>
</blockquote>
<p>2024å¹´çš„CSSå›é¡¾ä¸­ï¼Œä»‹ç»äº†CSSé”šç‚¹å®šä½-â€”â€” anchor positioning, å®ç°ç±»ä¼¼ Tooltipç»„ä»¶çš„æ•ˆæœï¼Œè®©ä¸€ä¸ªå¼¹å‡ºå±‚é”šå®šåˆ°ç›®æ ‡å…ƒç´ å‘¨å›´ï¼Œä¸”èƒ½è‡ªåŠ¨ç¿»è½¬åˆ°é€‚åˆä½ç½®ï¼Œé¿å…ä½¿ç”¨Javascriptã€‚ å®ƒçš„å…¼å®¹æ€§ï¼š chrome125+, safari26+, ff ä¸æ”¯æŒã€‚</p>
<p>ä¸‹é¢ä¾‹å­æ¼”ç¤ºäº†ï¼šCSSé”šç‚¹å®šä½ã€‚tooltipä¼šé”šå®šåœ¨buttonçš„ä¸Šä¸‹ï¼Œ å½“æ»šåŠ¨åˆ°è¾¹ç•Œæ—¶ï¼Œä¼šè‡ªåŠ¨ç¿»è½¬æ˜¾ç¤ºã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.my-button</span> {
  anchor-name: --my-btn-anchor; <span class="hljs-comment">/* å®šä¹‰ä¸€ä¸ªåä¸º --my-btn-anchor çš„é”šç‚¹ */</span>
}

<span class="hljs-selector-class">.my-tooltip</span> {
  <span class="hljs-attribute">position</span>: absolute; <span class="hljs-comment">/* æˆ– fixed */</span>
  <span class="hljs-attribute">position</span>-anchor: --my-btn-anchor; <span class="hljs-comment">/* å…³è”åˆ°ä¸Šé¢å®šä¹‰çš„é”šç‚¹ */</span>
  <span class="hljs-attribute">position</span>-area: bottom;
  <span class="hljs-attribute">position</span>-try-fallbacks: flip-block; 
}
</code></pre>
<p>æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœmy-tooltipå…ƒç´ æœ‰å°ä¸‰è§’æŒ‡ç¤ºæ–¹å‘ï¼Œé‚£ä¹ˆç®€å•çš„ç¿»è½¬åï¼Œå°ä¸‰è§’çš„ä½ç½®æ€ä¹ˆæ—‹è½¬å‘¢ï¼Ÿ
ç­”æ¡ˆæ˜¯ï¼šå®šä½å…ƒç´ æ— æ³•æ„è¯†ï¼ˆbe aware)çŠ¶æ€ï¼Œå°ä¸‰è§’æ–¹å‘ä¼šé”™è¯¯ã€‚</p>
<p>æ­¤é—®é¢˜çš„è§£å†³æ–¹æ¡ˆå³æœ¬æ¬¡æ–°å¢äº†<code>CSSé”šå®šå®¹å™¨æŸ¥è¯¢</code>èƒ½åŠ›ï¼Œå®ƒé€šè¿‡æŒ‡å®štooltipçš„ <code>container-type: anchored</code>, ç„¶åä½¿ç”¨<code>@container anchored</code> çš„æŸ¥è¯¢è¯­æ³•ï¼Œå°±è®©tooltipæŸ¥è¯¢åˆ°ï¼Œæ„è¯†åˆ°è‡ªèº«çš„ç¿»è½¬çŠ¶æ€ï¼ˆfallbacks çŠ¶æ€ï¼‰ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.tooltip</span> {
  container-type: anchored;

  <span class="hljs-comment">/* é»˜è®¤åœ¨ä¸‹æ–¹ï¼Œ å°ä¸‰è§’å‘ä¸Šï¼Œä½ç½®åœ¨åº•éƒ¨ */</span>
  &amp;<span class="hljs-selector-pseudo">::before</span> {
    <span class="hljs-attribute">content</span>: <span class="hljs-string">'â–²'</span>;
    <span class="hljs-attribute">position</span>: absolute;
    <span class="hljs-attribute">bottom</span>: <span class="hljs-number">100%</span>;  
  }
}
<span class="hljs-comment">/** å½“å®¹å™¨æŸ¥è¯¢åˆ°é”šç‚¹å˜åŒ– */</span>
<span class="hljs-keyword">@container</span> anchored(<span class="hljs-attribute">fallback</span>: flip-block) {
  <span class="hljs-selector-class">.tooltip</span><span class="hljs-selector-pseudo">::before</span> {
    <span class="hljs-comment">/* å°ä¸‰è§’å‘ä¸‹ï¼Œå¹¶ç§»åˆ°åˆ°é¡¶éƒ¨ */</span>
    <span class="hljs-attribute">content</span>: <span class="hljs-string">'â–¼'</span>;
    <span class="hljs-attribute">bottom</span>: auto;
    <span class="hljs-attribute">top</span>: <span class="hljs-number">100%</span>;  
  }
}
</code></pre>
<p>è¦è®²æ˜ç™½é”šç‚¹å®šä½éœ€è¦å¾ˆå¤§ç¯‡å¹…ï¼Œä¸”è¯¥ç¤ºä¾‹å¤æ‚ï¼Œå¤§å®¶å¯ä»¥è½¬åˆ°å®˜ç½‘æŸ¥çœ‹ç¤ºä¾‹ã€‚ ç›®å‰ <code>container-type: anchored</code> çš„æ–‡æ¡£è¿MDNä¸Šéƒ½æ²¡æœ‰ï¼Œæ˜¯æ¯”è¾ƒæ–°çš„æ¦‚å¿µã€‚</p>
<p>container-typeæœ‰æ•ˆå€¼ï¼š</p>
<ul>
<li>normal: å…ƒç´ ä¸æ”¯æŒä»»ä½•æŸ¥è¯¢</li>
<li>size: æ”¯æŒ inline å’Œ block å…ƒç´ çš„å°ºå¯¸çš„é«˜åº¦å’Œå®½åº¦æŸ¥è¯¢</li>
<li>inline-size: ä»…æ”¯æŒ inline å…ƒç´ çš„å°ºå¯¸çš„å®½åº¦æŸ¥è¯¢</li>
<li>scroll-state: æ”¯æŒæ»šåŠ¨æ€çš„åç§»é‡å’Œæ˜¯å¦æ»šåŠ¨åˆ°åº•ç­‰æŸ¥è¯¢ï¼Œchrome 133+, ä½†ff,safariå‡ä¸æ”¯æŒ</li>
<li>anchored: é”šç‚¹æŸ¥è¯¢</li>
</ul>
<h3 data-id="heading-23">å…¼å®¹æ€§ï¼š</h3>
<p><code>container-type: anchored</code> æ”¯æŒ chrome 143+ ,ä½†ff,safariå‡ä¸æ”¯æŒğŸ˜­ï¼Œä¸”css ç‰¹æ€§æ— æ³•Polyfillã€‚</p>
<h2 data-id="heading-24">æ€»ç»“</h2>
<p>é€šè¿‡ä»¥ä¸Šç§ç§æ–°ç‰¹æ€§ï¼Œå¯ä»¥çœ‹å‡ºchrome ä¸ä»…å…³æ³¨ä½¿ç”¨ç”¨æˆ·ä½“éªŒï¼Œæ›´å…³æ³¨å¼€å‘è€…ä½“éªŒã€‚é€šè¿‡å¢åŠ ç±»ä¼¼commandå±æ€§,æˆ–è€…Light Dismissçš„é»˜è®¤è¡Œä¸ºï¼Œä»¥åŠæ»šåŠ¨å®¹å™¨ï¼Œæ»šåŠ¨å®¹å™¨ä¼ªå…ƒç´ ç­‰æŠ€å·§ï¼Œè®©è®¸å¤šåœºæ™¯éƒ½å¯ä»¥<code>æ— Javascriptå®ç°</code>äº†ã€‚ ä¸ä»…å¤§å¤§å‡å°‘å¼€å‘ä»£ç ï¼Œè¿˜æœ‰æå¼ºçš„DOMå¯è¯»æ€§ã€‚</p>
<p>æˆ‘ç›®å‰ä»äº‹äºç»„ä»¶åº“å¼€å‘ã€‚åœ¨ç»„ä»¶åº“çš„å¼€å‘æ—¶ï¼Œæ‰€é‡‡ç”¨çš„æŠ€æœ¯é€šå¸¸æ˜¯è½åäºæµè§ˆå™¨æœ€æ–°æŠ€æœ¯çš„ï¼Œç†ç”±å°±æ˜¯ä¸ºäº†å…¼å®¹ç”¨æˆ·æµè§ˆå™¨ã€‚æ¯”å¦‚ dialog å…ƒç´ å·²ç»æ˜¯å¹¿æ³›å…¼å®¹ï¼Œä½†ç›®å‰ä»æ²¡æœ‰è§åˆ°å“ªä¸ªç»„ä»¶åº“ä½¿ç”¨å®ƒã€‚é€šè¿‡è¿™æ¬¡æ¢³ç†æŠ€æœ¯ï¼Œæ„Ÿè§‰å€ŸåŠ© dialog ä»¥åŠ popover api å¯ä»¥æå¤§ç®€åŒ–ä»¥å¾€çš„ç»„ä»¶å¼€å‘ï¼Œè¯¸å¦‚ï¼šç›‘å¬æŒ‰é”®ï¼Œè®¡ç®—z-index,è®¡ç®—å¼¹å‡ºå±‚ä½ç½®ï¼Œç›‘å¬æ»šåŠ¨è¿›è¡Œä½ç½®è·Ÿéšç­‰ç­‰,è¿™äº›æ˜¯é—®é¢˜bugé›†ä¸­çˆ†å‘åŒºï¼Œç°åœ¨åŸºæœ¬éƒ½å¯ä»¥<code>æ— Jsä»£ç </code>çš„å®ç°äº†ã€‚</p>
<p>å¦å¤–ï¼Œå‰é¢çš„è¯¸å¤šæœªå¹¿æ³›å…¼å®¹çš„æŠ€æœ¯ï¼Œå¤§éƒ½æœ‰ç›¸åº”çš„Polyfillï¼Œå°¤å…¶æ˜¯å±æ€§ï¼Œå‡½æ•°å’Œäº‹ä»¶çš„PolyfillåŸºæœ¬éƒ½èƒ½æ‰¾åˆ°ã€‚CSSçš„æ–°ä¼ªç±»ï¼Œä¼ªå…ƒç´ è™½ç„¶å¾ˆéš¾æœ‰Polyfillï¼Œä½†å¯ä»¥ç”¨æ·»åŠ ç±»åçš„æ–¹æ¡ˆæ¥å…¼å®¹ï¼Œè¾…åŠ©ä»¥ä¸€äº›Jsäº‹ä»¶å°±å¯ä»¥å®ç°æŸç§ç¨‹åº¦ä¸Šçš„polyfillã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Foddbird.tech%2F" target="_blank" title="https://oddbird.tech/" ref="nofollow noopener noreferrer">oddbird.tech</a>æ˜¯ä¸€å®¶æœåŠ¡å…¬å¸ï¼Œå¾—åˆ°è¿‡Googleçš„èµåŠ©ï¼Œå®ƒä»¬ä¸€ç›´å…³æ³¨å¼€å‘<code>Popover API</code>å’Œ <code>Anchor positioning</code>çš„å…¼å®¹æ–¹æ¡ˆã€‚è¿™äº›æ–¹æ¡ˆéƒ½è®©æˆ‘ä»¬ä»¥åŠæ—©çš„ä½¿ç”¨æ–°æŠ€æœ¯è¿›è¡Œå¼€å‘ã€‚</p>
<p>å¦‚æœåªéœ€è¦æ”¯æŒæœ€æ–°çš„æµè§ˆå™¨ï¼Œå‰ç«¯çš„æ˜¥å¤©æ¥äº†ï¼</p>
<h2 data-id="heading-25">å…³äºOpenTiny</h2>
<p>æ¬¢è¿åŠ å…¥ OpenTiny å¼€æºç¤¾åŒºã€‚æ·»åŠ å¾®ä¿¡å°åŠ©æ‰‹ï¼šopentiny-official ä¸€èµ·å‚ä¸äº¤æµå‰ç«¯æŠ€æœ¯ï½</p>
<p>OpenTiny å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.design" target="_blank" title="https://opentiny.design" ref="nofollow noopener noreferrer">opentiny.design</a><br/>
OpenTiny ä»£ç ä»“åº“ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny" target="_blank" title="https://github.com/opentiny" ref="nofollow noopener noreferrer">github.com/opentiny</a><br/>
TinyVue æºç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-vue" target="_blank" title="https://github.com/opentiny/tiny-vue" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a><br/>
TinyEngine æºç ï¼šâ€…<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-engine" target="_blank" title="https://github.com/opentiny/tiny-engine" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a><br/>
æ¬¢è¿è¿›å…¥ä»£ç ä»“åº“ StarğŸŒŸTinyEngineã€TinyVueã€TinyNGã€TinyCLIã€TinyEditor~
å¦‚æœä½ ä¹Ÿæƒ³è¦å…±å»ºï¼Œå¯ä»¥è¿›å…¥ä»£ç ä»“åº“ï¼Œæ‰¾åˆ° good first issue æ ‡ç­¾ï¼Œä¸€èµ·å‚ä¸å¼€æºè´¡çŒ®~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[mysqlåŸºç¡€é¢è¯•é¢˜]]></title>    <link>https://juejin.cn/post/7589207843788079139</link>    <guid>https://juejin.cn/post/7589207843788079139</guid>    <pubDate>2025-12-30T03:23:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589207843788079139" data-draft-id="7589246131585024035" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="mysqlåŸºç¡€é¢è¯•é¢˜"/> <meta itemprop="keywords" content="MySQL"/> <meta itemprop="datePublished" content="2025-12-30T03:23:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆé‡Œè°¢é¡¿"/> <meta itemprop="url" content="https://juejin.cn/user/3678304397695056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            mysqlåŸºç¡€é¢è¯•é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3678304397695056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆé‡Œè°¢é¡¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T03:23:05.000Z" title="Tue Dec 30 2025 03:23:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘å¯¹mysqlçš„åŸºç¡€çŸ¥è¯†å¾ˆæ„Ÿå…´è¶£ï¼Œæ‰€ä»¥å¸Œæœ›é€šè¿‡æŸ¥è¯¢ç½‘ç»œä¸Šçš„é¢è¯•é¢˜æ¥å·©å›ºä¸‹åŸºç¡€ï¼Œæ‰€ä»¥å¦‚ä¸‹</p>
<h2 data-id="heading-0">1 æ™®é€šç´¢å¼•è·Ÿå”¯ä¸€ç´¢å¼•åº”è¯¥å¦‚ä½•é€‰æ‹©</h2>
<p>åœ¨ MySQLï¼ˆInnoDBï¼‰é‡Œï¼Œâ€œæ™®é€šäºŒçº§ç´¢å¼•ï¼ˆKEYï¼‰â€å’Œâ€œå”¯ä¸€ç´¢å¼•ï¼ˆUNIQUE KEYï¼‰â€<strong>åœ¨å­˜å‚¨ç»“æ„ã€æŸ¥è¯¢æ€§èƒ½ä¸Šå‡ ä¹ä¸€æ¨¡ä¸€æ ·</strong>ï¼ŒçœŸæ­£çš„å·®å¼‚åªæœ‰ä¸‰ç‚¹ï¼š</p>
<ol>
<li>å”¯ä¸€ç´¢å¼•å¤šä¸€é“â€œå”¯ä¸€æ€§çº¦æŸâ€æ£€æŸ¥</li>
<li>å”¯ä¸€ç´¢å¼•å¯¹ä¼˜åŒ–å™¨çš„<strong>åŸºæ•°ä¼°è®¡æ›´å‡†</strong>ï¼ŒæŸäº›åœºæ™¯èƒ½æ‹¿åˆ°æ›´ä¼˜çš„æ‰§è¡Œè®¡åˆ’</li>
<li>å”¯ä¸€ç´¢å¼•ä¸èƒ½å­˜é‡å¤å€¼ï¼Œå› æ­¤<strong>æ’å…¥/æ›´æ–°</strong>æ—¶å¯èƒ½å¤šä¸€æ¬¡â€œå†²çªæ£€æµ‹â€å¾€è¿”</li>
</ol>
<ul>
<li>
<p>æŸ¥è¯¢</p>
<ul>
<li>å½“æ™®é€šç´¢å¼•ä¸ºæ¡ä»¶æ—¶æŸ¥è¯¢åˆ°æ•°æ®ä¼šä¸€ç›´æ‰«æ,ç›´åˆ°æ‰«å®Œæ•´å¼ è¡¨</li>
<li>å½“å”¯ä¸€ç´¢å¼•ä¸ºæŸ¥è¯¢æ¡ä»¶æ—¶,æŸ¥åˆ°è¯¥æ•°æ®ä¼šç›´æ¥è¿”å›,ä¸ä¼šç»§ç»­æ‰«è¡¨</li>
</ul>
</li>
<li>
<p>æ›´æ–°</p>
<ul>
<li>æ™®é€šç´¢å¼•ä¼šç›´æ¥å°†æ“ä½œæ›´æ–°åˆ° change buffer ä¸­,ç„¶åç»“æŸ</li>
<li>å”¯ä¸€ç´¢å¼•éœ€è¦åˆ¤æ–­æ•°æ®æ˜¯å¦å†²çª</li>
</ul>
</li>
</ul>
<p>æ‰€ä»¥**ã€Œå”¯ä¸€ç´¢å¼•æ›´åŠ é€‚åˆæŸ¥è¯¢çš„åœºæ™¯,æ™®é€šç´¢å¼•æ›´é€‚åˆæ’å…¥çš„åœºæ™¯ã€**</p>
<h2 data-id="heading-1">2 ä¸€æ¡sqlå‘½ä»¤ä¸€ç›´æŸ¥è¯¢æ…¢çš„åŸå› æ˜¯ä»€ä¹ˆ</h2>
<p><strong>ã€Œ1.æ²¡æœ‰ç”¨åˆ°ç´¢å¼•ã€</strong></p>
<ul>
<li>æ¯”å¦‚å‡½æ•°å¯¼è‡´çš„ç´¢å¼•å¤±æ•ˆï¼Œæˆ–è€…æœ¬èº«å°±æ²¡æœ‰åŠ ç´¢å¼•</li>
</ul>
<p><strong>ã€Œ2.è¡¨æ•°æ®é‡å¤ªå¤§ã€</strong></p>
<ul>
<li>è€ƒè™‘åˆ†åº“åˆ†è¡¨å§</li>
</ul>
<p><strong>ã€Œ3.ä¼˜åŒ–å™¨é€‰é”™äº†ç´¢å¼•ã€</strong></p>
<ul>
<li><strong>ã€Œè€ƒè™‘ä½¿ç”¨ã€</strong>Â force index å¼ºåˆ¶èµ°ç´¢å¼•</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[dockerå®‰è£…ä»¥åŠéƒ¨ç½²nodeé¡¹ç›®]]></title>    <link>https://juejin.cn/post/7589201772133498921</link>    <guid>https://juejin.cn/post/7589201772133498921</guid>    <pubDate>2025-12-30T03:27:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589201772133498921" data-draft-id="7589171972447387690" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="dockerå®‰è£…ä»¥åŠéƒ¨ç½²nodeé¡¹ç›®"/> <meta itemprop="keywords" content="Docker,å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-12-30T03:27:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ—å¤ªç™½"/> <meta itemprop="url" content="https://juejin.cn/user/1874034273300919"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            dockerå®‰è£…ä»¥åŠéƒ¨ç½²nodeé¡¹ç›®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1874034273300919/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ—å¤ªç™½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T03:27:37.000Z" title="Tue Dec 30 2025 03:27:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">dockerå®‰è£…ä»¥åŠéƒ¨ç½²nodeé¡¹ç›®</h2>
<p>æºç åœ°å€</p>
<p>åŒè·¯ä¹‹äººï¼Œå¹¸å¾—å›é¡¾ï¼Œç›¼å¾—å›ä¹‹ä¸€èµï¼</p>
<p>ä¸å›åŒè¡Œï¼Œæ„¿å¾—é’çœ¼ç›¸åŠ ï¼</p>
<p>ä½ çš„star</p>
<p>å¦‚æ˜¥é£åŒ–é›¨ï¼Œæ¶¦ç‰©æ— å£°ï¼›</p>
<p>å¦‚å±±é—´æ¸…æ³‰ï¼Œæ»‹æ¶¦å¿ƒç”°ï¼›</p>
<p>å¦‚é•¿æ²³è½æ—¥ï¼Œæ˜ ç…§åˆå¿ƒï¼›</p>
<p>äº¦å¦‚æš—å¤œæ˜ç¯ï¼Œç…§äº®å‰è·¯ï¼›</p>
<p>æ˜¯å¾è¾ˆå‰è¡Œä¹‹æ˜ç¯ï¼Œäº¦æ˜¯æˆ‘åšæŒçš„åŠ¨åŠ›!</p>
<p>æ„¿å›å‰ç¨‹ä¼¼é”¦ï¼Œä»£ç å¦‚è¯—ï¼Œäººç”Ÿå¦‚ç”»ï¼</p>
<p>ã€GIthubåœ°å€ã€‘ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Flintaibai%2FTG" target="_blank" title="https://gitee.com/lintaibai/TG" ref="nofollow noopener noreferrer">github.com/lintaibai/Tâ€¦</a>ï¼‰</p>
<p>ã€Giteeåœ°å€ã€‘ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Flintaibai%2FTG" target="_blank" title="https://gitee.com/lintaibai/TG" ref="nofollow noopener noreferrer">gitee.com/lintaibai/Tâ€¦</a>ï¼‰</p>
<h3 data-id="heading-1">1ã€è®¤è¯†</h3>
<h4 data-id="heading-2">ä¸‹è½½åœ°å€</h4>
<p>æ³¨æ„æˆ‘ä»¬ä¸€èˆ¬é‡‡å–<code>Docker Desktop</code>è¿›è¡Œç®¡ç†ï¼Œå°±ç›¸å½“äºæˆ‘ä»¬çš„ç‰ˆæœ¬æˆ–è€…é•œåƒç»¼åˆçš„ä¸€ä¸ªç®¡ç†å·¥å…·</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®˜æ–¹ç½‘å€</span>
<span class="hljs-attr">https</span>:<span class="hljs-comment">//docs.docker.com/get-started/introduction/get-docker-desktop/</span>

<span class="hljs-comment">// æŸ¥çœ‹ç‰ˆæœ¬</span>
docker --version
<span class="hljs-title class_">Docker</span> version <span class="hljs-number">28.5</span><span class="hljs-number">.2</span>, build ecc6942


<span class="hljs-comment">// å›½å†…é˜¿é‡Œé•œåƒåœ°å€</span>
<span class="hljs-attr">https</span>:<span class="hljs-comment">//developer.aliyun.com/mirror/</span>
</code></pre>
<h4 data-id="heading-3">dockerå¸¸ç”¨å‘½ä»¤</h4>
<pre><code class="hljs language-javascript" lang="javascript"># åˆ—å‡ºæ‰€æœ‰æœ¬åœ°é•œåƒ
docker images

# æˆ–è€…ä½¿ç”¨æ›´è¯¦ç»†çš„æ ¼å¼
docker image ls

<span class="hljs-comment">// åˆ é™¤é•œåƒ</span>
# é€šè¿‡é•œåƒ<span class="hljs-variable constant_">ID</span>åˆ é™¤
docker rmi &lt;image_id&gt;

# é€šè¿‡é•œåƒååˆ é™¤
docker rmi &lt;image_name&gt;:&lt;tag&gt;

# ç¤ºä¾‹
docker rmi <span class="hljs-attr">ubuntu</span>:<span class="hljs-number">20.04</span>

# åˆ é™¤å¤šä¸ªæŒ‡å®šé•œåƒ
docker rmi &lt;image1&gt; &lt;image2&gt; &lt;image3&gt;
</code></pre>
<h4 data-id="heading-4">ä»‹ç»</h4>
<p>Docker æ˜¯ä¸€ä¸ªå¼€æºçš„å®¹å™¨åŒ–å¹³å°ï¼Œå®ƒå¯ä»¥å°†åº”ç”¨ç¨‹åºåŠå…¶ä¾èµ–é¡¹æ‰“åŒ…åˆ°ä¸€ä¸ªè½»é‡çº§ã€å¯ç§»æ¤çš„å®¹å™¨ä¸­ã€‚ç®€å•æ¥è¯´ï¼ŒDocker è®©ä½ èƒ½å¤Ÿå°†ä½ çš„åº”ç”¨å’Œè¿è¡Œç¯å¢ƒæ‰“åŒ…åœ¨ä¸€èµ·ï¼Œç¡®ä¿åœ¨ä»»ä½•åœ°æ–¹éƒ½èƒ½ä»¥ç›¸åŒçš„æ–¹å¼è¿è¡Œã€‚</p>
<p>Docker å·²ç»æˆä¸ºç°ä»£è½¯ä»¶å¼€å‘å’Œéƒ¨ç½²çš„é‡è¦å·¥å…·ï¼Œç‰¹åˆ«æ˜¯åœ¨å¾®æœåŠ¡æ¶æ„å’Œ DevOps å®è·µä¸­ã€‚</p>
<h5 data-id="heading-5">ä¸»è¦ç‰¹ç‚¹å’Œä¼˜åŠ¿</h5>
<ol>
<li><strong>è½»é‡çº§</strong>ï¼šå®¹å™¨å…±äº«ä¸»æœºæ“ä½œç³»ç»Ÿçš„å†…æ ¸ï¼Œä¸éœ€è¦åƒè™šæ‹Ÿæœºé‚£æ ·è¿è¡Œå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œå› æ­¤æ›´åŠ è½»é‡ã€‚</li>
<li><strong>å¯ç§»æ¤æ€§</strong>ï¼šå®¹å™¨å¯ä»¥åœ¨ä»»ä½•æ”¯æŒ Docker çš„ç¯å¢ƒä¸­è¿è¡Œï¼ŒåŒ…æ‹¬å¼€å‘è€…çš„ç¬”è®°æœ¬ç”µè„‘ã€æµ‹è¯•æœåŠ¡å™¨ã€ç”Ÿäº§ç¯å¢ƒç­‰ã€‚</li>
<li><strong>ä¸€è‡´æ€§</strong>ï¼šç¡®ä¿åº”ç”¨åœ¨å¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ç¯å¢ƒä¸­è¡¨ç°ä¸€è‡´ï¼Œæ¶ˆé™¤"åœ¨æˆ‘ç”µè„‘ä¸Šèƒ½è¿è¡Œ"çš„é—®é¢˜ã€‚</li>
<li><strong>å¿«é€Ÿéƒ¨ç½²</strong>ï¼šå®¹å™¨çš„å¯åŠ¨é€Ÿåº¦éå¸¸å¿«ï¼Œé€šå¸¸åªéœ€å‡ ç§’é’Ÿã€‚</li>
<li><strong>èµ„æºæ•ˆç‡é«˜</strong>ï¼šä¸è™šæ‹Ÿæœºç›¸æ¯”ï¼Œå®¹å™¨å ç”¨çš„èµ„æºæ›´å°‘ï¼Œå¯ä»¥åœ¨åŒä¸€å°æœºå™¨ä¸Šè¿è¡Œæ›´å¤šå®¹å™¨ã€‚</li>
<li><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šDocker é•œåƒå¯ä»¥åƒä»£ç ä¸€æ ·è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œä¾¿äºè¿½è¸ªå’Œç®¡ç†å˜æ›´ã€‚</li>
</ol>
<h5 data-id="heading-6">Docker çš„åŸºæœ¬æ¦‚å¿µ</h5>
<ul>
<li><strong>é•œåƒ(Image)</strong>ï¼šä¸€ä¸ªåªè¯»çš„æ¨¡æ¿ï¼Œç”¨äºåˆ›å»ºå®¹å™¨ã€‚</li>
<li><strong>å®¹å™¨(Container)</strong>ï¼šé•œåƒçš„è¿è¡Œå®ä¾‹ï¼Œæ˜¯è½»é‡çº§ã€å¯æ‰§è¡Œçš„ç‹¬ç«‹è½¯ä»¶åŒ…ã€‚</li>
<li><strong>ä»“åº“(Repository)</strong>ï¼šç”¨äºå­˜å‚¨å’Œåˆ†å‘é•œåƒçš„åœ°æ–¹ï¼Œå¦‚ Docker Hub</li>
</ul>
<h4 data-id="heading-7">ç›¸å…³é•œåƒæº</h4>
<h5 data-id="heading-8">dockerå›½å†…çš„å¸¸è§é•œåƒæº</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">DaoCloud</span> é•œåƒç«™ï¼š<span class="hljs-attr">https</span>:<span class="hljs-comment">//docker.m.daocloud.io</span>
ç½‘æ˜“äº‘ï¼š<span class="hljs-attr">https</span>:<span class="hljs-comment">//hub-mirror.c.163.com</span>
ç™¾åº¦äº‘ï¼š<span class="hljs-attr">https</span>:<span class="hljs-comment">//mirror.baidubce.com</span>
å—äº¬å¤§å­¦é•œåƒç«™ï¼š<span class="hljs-attr">https</span>:<span class="hljs-comment">//docker.nju.edu.cn</span>
</code></pre>
<h5 data-id="heading-9">è®¾ç½®é•œåƒæº</h5>
<pre><code class="hljs language-javascript" lang="javascript">sudo mkdir -p /etc/docker

sudo tee /etc/docker/daemon.<span class="hljs-property">json</span> &lt;&lt;-<span class="hljs-string">'EOF'</span>
{
    <span class="hljs-string">"registry-mirrors"</span>: [
        <span class="hljs-string">"https://docker.m.daocloud.io"</span>,
        <span class="hljs-string">"https://hub-mirror.c.163.com"</span>,
        <span class="hljs-string">"https://mirror.baidubce.com"</span>,
        <span class="hljs-string">"https://docker.nju.edu.cn"</span>
    ]
}
<span class="hljs-variable constant_">EOF</span>

<span class="hljs-comment">// é‡å¯dockeræœåŠ¡</span>
sudo systemctl daemon-reload
sudo systemctl restart docker
</code></pre>
<h5 data-id="heading-10">é•œåƒæºä¿¡æ¯æŸ¥çœ‹</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æŸ¥çœ‹å½“å‰ç”Ÿæ•ˆçš„é•œåƒæº</span>

# æŸ¥çœ‹<span class="hljs-title class_">Docker</span>ä¿¡æ¯
docker info

# åœ¨è¾“å‡ºä¸­æŸ¥æ‰¾<span class="hljs-title class_">Registry</span> <span class="hljs-title class_">Mirrors</span>éƒ¨åˆ†



<span class="hljs-comment">// æŸ¥çœ‹è®¾ç½®çš„é•œåƒæº</span>
cat /etc/docker/daemon.<span class="hljs-property">json</span>

<span class="hljs-comment">// æŸ¥çœ‹é•œåƒæº</span>
docker info | grep -i <span class="hljs-string">"Registry Mirrors"</span> -A <span class="hljs-number">5</span>
</code></pre>
<h4 data-id="heading-11">å®Œæ•´çš„é•œåƒæºåŠåœ°å€</h4>
<pre><code class="hljs language-javascript" lang="javascript"> <span class="hljs-string">"registry-mirrors"</span>: [
    <span class="hljs-string">"https://mirrors.tuna.tsinghua.edu.cn/docker-ce"</span>, <span class="hljs-comment">// æ¸…åå¤§å­¦é•œåƒç«™</span>
    <span class="hljs-string">"https://docker.m.daocloud.io"</span>,  <span class="hljs-comment">// DaoCloud é•œåƒç«™</span>
    <span class="hljs-string">"https://hub-mirror.c.163.com"</span>,  <span class="hljs-comment">// ç½‘æ˜“äº‘</span>
    <span class="hljs-string">"https://mirror.baidubce.com"</span>,   <span class="hljs-comment">// ç™¾åº¦äº‘ </span>
    <span class="hljs-string">"https://docker.nju.edu.cn"</span>  <span class="hljs-comment">// å—äº¬å¤§å­¦é•œåƒç«™</span>
   
]


</code></pre>
<h3 data-id="heading-12">2ã€å®‰è£…ä½¿ç”¨</h3>
<h4 data-id="heading-13">Macä¸Šå®‰è£…Docker</h4>
<p>1ã€ä¸‹è½½åœ°å€</p>
<p>é€‰æ‹©è‡ªå·±å¯¹åº”çš„ç‰ˆæœ¬ä¸‹è½½å³å¯</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">https</span>:<span class="hljs-comment">//www.docker.com/products/docker-desktop/</span>
</code></pre>
<h4 data-id="heading-14">æ±‰åŒ–Docker Desktop</h4>
<p>Docker Desktop æ˜¯ä¸€ä¸ªè®©å¼€å‘è€…èƒ½å¤Ÿåœ¨ Windows å’Œ macOS ä¸Šè½»æ¾ä½¿ç”¨ Docker çš„åº”ç”¨ç¨‹åºã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">ä¸‹è½½å¯¹åº”<span class="hljs-title class_">Docker</span> <span class="hljs-title class_">Desktop</span>ç‰ˆæœ¬å·ã€æ“ä½œç³»ç»Ÿçš„æ±‰åŒ–åŒ…
</code></pre>
<h4 data-id="heading-15">æœåŠ¡å™¨å®‰è£…Docker</h4>
<p>è¿›å…¥æˆ‘ä»¬çš„æœåŠ¡å™¨ï¼Œæˆ‘çš„æ¼”ç¤ºä¸º<code>ubuntu</code>æœåŠ¡å™¨</p>
<p>ä»¥linuxç³»ç»Ÿçš„ä¸»æœºä¸ºæœ€ä½³</p>
<pre><code class="hljs language-javascript" lang="javascript">ä¸‹è½½å®‰è£…çš„å®˜ç½‘
<span class="hljs-attr">https</span>:<span class="hljs-comment">//get.docker.com/</span>

ç¬¬ä¸€ä¸ªå’Œç¬¬å››ä¸ªå‘½ä»¤

<span class="hljs-comment">// æ·»åŠ Dockerå®˜æ–¹GPGå¯†é’¥</span>
curl -fsSL <span class="hljs-attr">https</span>:<span class="hljs-comment">//get.docker.com -o install-docker.sh</span>
sudo sh install-docker.<span class="hljs-property">sh</span>

<span class="hljs-comment">// ç³»ç»Ÿå»ºè®®å®‰è£…å‘½ä»¤</span>
sudo apt install docker.<span class="hljs-property">io</span>

<span class="hljs-comment">// éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ</span>
docker --version
</code></pre>
<h3 data-id="heading-16">3ã€ä½¿ç”¨</h3>
<h4 data-id="heading-17">DockerFileæ–‡ä»¶é…ç½®</h4>
<p>Dockeræ‰“åŒ…é¡¹ç›®ä¸€èˆ¬éƒ½è¦æ–°å»ºDockerFileæ–‡ä»¶ï¼Œä»¥rustä¸ºä¾‹ï¼Œå†…å®¹å¦‚ä¸‹</p>
<pre><code class="hljs language-javascript" lang="javascript"># æ„å»ºé˜¶æ®µ
<span class="hljs-variable constant_">FROM</span> <span class="hljs-attr">rust</span>:<span class="hljs-number">1.70</span> <span class="hljs-keyword">as</span> builder
<span class="hljs-variable constant_">WORKDIR</span> /app
# ä¼˜åŒ–ç¼–è¯‘
<span class="hljs-variable constant_">ENV</span> <span class="hljs-variable constant_">RUSTFLAGS</span>=<span class="hljs-string">"-C target-feature=+crt-static"</span>
<span class="hljs-variable constant_">ENV</span> <span class="hljs-variable constant_">CARGO_TERM_COLOR</span>=always
<span class="hljs-variable constant_">COPY</span> <span class="hljs-title class_">Cargo</span>.<span class="hljs-property">toml</span> ./
<span class="hljs-variable constant_">RUN</span> mkdir src &amp;&amp; echo <span class="hljs-string">"fn main() {}"</span> &gt; src/main.<span class="hljs-property">rs</span> &amp;&amp; cargo build --release
<span class="hljs-variable constant_">RUN</span> rm -rf src
<span class="hljs-variable constant_">COPY</span> src ./src
<span class="hljs-variable constant_">RUN</span> cargo build --release

# è¿è¡Œé˜¶æ®µ
<span class="hljs-variable constant_">FROM</span> scratch
# ä»æ„å»ºé˜¶æ®µå¤åˆ¶ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶å’Œ<span class="hljs-variable constant_">SSL</span>è¯ä¹¦ï¼ˆå¦‚æœéœ€è¦<span class="hljs-variable constant_">HTTPS</span>ï¼‰
<span class="hljs-variable constant_">COPY</span> --<span class="hljs-keyword">from</span>=builder /app/target/release/nexus-rust-api /nexus-rust-api
<span class="hljs-variable constant_">COPY</span> --<span class="hljs-keyword">from</span>=builder /etc/ssl/certs/ca-certificates.<span class="hljs-property">crt</span> /etc/ssl/certs/
<span class="hljs-variable constant_">EXPOSE</span> <span class="hljs-number">3300</span>
<span class="hljs-variable constant_">CMD</span> [<span class="hljs-string">"/nexus-rust-api"</span>]

</code></pre>
<h4 data-id="heading-18">æ·»åŠ æƒé™</h4>
<p>å°†ç”¨æˆ·æ·»åŠ åˆ°dockerç»„</p>
<pre><code class="hljs language-plain" lang="plain">sudo usermod -aG docker $USER
# ç„¶åé‡æ–°ç™»å½•æˆ–æ‰§è¡Œï¼š
newgrp docker
</code></pre>
<h4 data-id="heading-19">æ‰“åŒ…æ„å»º</h4>
<pre><code class="hljs language-javascript" lang="javascript"># æ„å»ºé•œåƒ
docker build -t nexus-rust-api .

æ²¡æœ‰å°†ç”¨æˆ·æ·»åŠ åˆ°ç”¨æˆ·ç»„å¯ä»¥ç”¨è¿™ä¸ªå‘½ä»¤æ„å»ºé•œåƒ
sudo docker build -t nexus-rust-api .

# è¿è¡Œå®¹å™¨
docker run -p <span class="hljs-number">3300</span>:<span class="hljs-number">3300</span> nexus-rust-api

</code></pre>
<p>æ‰“åŒ…è¿‡ç¨‹ä¸€ç›´å¤±è´¥ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å›½å†…é•œåƒè¿›è¡ŒåŠ é€Ÿ</p>
<pre><code class="hljs language-javascript" lang="javascript">å›½å†…é•œåƒåŠ é€Ÿ

# åˆ›å»ºæˆ–ç¼–è¾‘daemon.<span class="hljs-property">json</span>

sudo mkdir -p /etc/docker

sudo tee /etc/docker/daemon.<span class="hljs-property">json</span> &lt;&lt;-<span class="hljs-string">'EOF'</span>
{
  <span class="hljs-string">"registry-mirrors"</span>: [
    <span class="hljs-string">"https://docker.mirrors.ustc.edu.cn"</span>,
    <span class="hljs-string">"https://hub-mirror.c.163.com"</span>
  ]
}
<span class="hljs-variable constant_">EOF</span>

<span class="hljs-comment">// ä»¥ä¸‹å‘½ä»¤éªŒè¯é…ç½®æ˜¯å¦ç”Ÿæ•ˆï¼šå‡ºç°åˆšåˆšçš„é•œåƒæºå°±æ˜¯æˆåŠŸäº†</span>
docker info | grep -A <span class="hljs-number">10</span> <span class="hljs-string">"Registry Mirrors"</span>

<span class="hljs-comment">// é…ç½®é˜¿é‡Œå®˜æ–¹é•œåƒåº“</span>
sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.<span class="hljs-property">json</span> &lt;&lt;-<span class="hljs-string">'EOF'</span>
{
  <span class="hljs-string">"registry-mirrors"</span>: [<span class="hljs-string">"https://registry.cn-hangzhou.aliyuncs.com"</span>]
}
<span class="hljs-variable constant_">EOF</span>

# é‡å¯<span class="hljs-title class_">Docker</span>æœåŠ¡
sudo systemctl daemon-reload
sudo systemctl restart docker

</code></pre>
<p>Dockerå›½å†…é•œåƒåœ°å€</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">https</span>:<span class="hljs-comment">//www.cnblogs.com/wzzkaifa/p/19041828</span>

# åœæ­¢<span class="hljs-title class_">Docker</span>æœåŠ¡
sudo systemctl stop docker

# é…ç½®æ–°çš„é•œåƒæº
sudo tee /etc/docker/daemon.<span class="hljs-property">json</span> &lt;&lt;-<span class="hljs-string">'EOF'</span>
{
  <span class="hljs-string">"registry-mirrors"</span>: [<span class="hljs-string">"https://docker.1ms.run"</span>]
}
<span class="hljs-variable constant_">EOF</span>

# é‡å¯<span class="hljs-title class_">Docker</span>æœåŠ¡
sudo systemctl daemon-reload
sudo systemctl start docker

# éªŒè¯é…ç½®
docker info | grep -A <span class="hljs-number">10</span> <span class="hljs-string">"Registry Mirrors"</span>


<span class="hljs-comment">// DockerFileæ–‡ä»¶é…ç½®</span>

# æ„å»ºé˜¶æ®µ
<span class="hljs-variable constant_">FROM</span> docker.1ms.<span class="hljs-property">run</span>/library/<span class="hljs-attr">rust</span>:<span class="hljs-number">1.70</span> <span class="hljs-keyword">as</span> builder
<span class="hljs-variable constant_">WORKDIR</span> /app
<span class="hljs-variable constant_">COPY</span> <span class="hljs-title class_">Cargo</span>.<span class="hljs-property">toml</span> ./
<span class="hljs-variable constant_">RUN</span> mkdir src &amp;&amp; echo <span class="hljs-string">"fn main() {}"</span> &gt; src/main.<span class="hljs-property">rs</span> &amp;&amp; cargo build --release
<span class="hljs-variable constant_">RUN</span> rm -rf src
<span class="hljs-variable constant_">COPY</span> src ./src
<span class="hljs-variable constant_">RUN</span> cargo build --release

# è¿è¡Œé˜¶æ®µ
<span class="hljs-variable constant_">FROM</span> scratch
<span class="hljs-variable constant_">COPY</span> --<span class="hljs-keyword">from</span>=builder /app/target/release/nexus-rust-api /nexus-rust-api
<span class="hljs-variable constant_">EXPOSE</span> <span class="hljs-number">3300</span>
<span class="hljs-variable constant_">CMD</span> [<span class="hljs-string">"/nexus-rust-api"</span>]

docker build -t nexus-rust-api .

<span class="hljs-variable constant_">FROM</span> <span class="hljs-attr">rust</span>:<span class="hljs-number">1.75</span>
<span class="hljs-variable constant_">WORKDIR</span> /app
<span class="hljs-variable constant_">COPY</span> . .
<span class="hljs-variable constant_">RUN</span> cargo build --release
<span class="hljs-variable constant_">CMD</span> [<span class="hljs-string">"./target/release/nexus-rust-api"</span>]
</code></pre>
<h4 data-id="heading-20">é…ç½®ä¿¡æ¯</h4>
<p>æœ¬åœ°æˆ‘çš„é…ç½®</p>
<pre><code class="hljs language-javascript" lang="javascript">sudo mkdir -p /etc/docker

<span class="hljs-comment">//  æ¸…åå¤§å­¦</span>
<span class="hljs-string">"https://mirrors.tuna.tsinghua.edu.cn/docker-ce"</span>


sudo tee /etc/docker/daemon.<span class="hljs-property">json</span> &lt;&lt;-<span class="hljs-string">'EOF'</span>
{
  <span class="hljs-string">"registry-mirrors"</span>: [
    <span class="hljs-string">"https://mirrors.tuna.tsinghua.edu.cn/docker-ce"</span>,
    <span class="hljs-string">"https://ccr.ccs.tencentyun.com"</span>,
    <span class="hljs-string">"https://docker.1ms.run"</span>,
    <span class="hljs-string">"https://hub-mirror.c.163.com"</span>,
    <span class="hljs-string">"https://mirror.baidubce.com"</span>,
    <span class="hljs-string">"https://do.nark.eu.org"</span>,
    <span class="hljs-string">"https://dc.j8.work"</span>,
    <span class="hljs-string">"https://docker.m.daocloud.io"</span>,
    <span class="hljs-string">"https://dockerproxy.com"</span>,
    <span class="hljs-string">"https://docker.mirrors.ustc.edu.cn"</span>,
    <span class="hljs-string">"https://docker.nju.edu.cn"</span>,
    <span class="hljs-string">"https://docker.1panel.live"</span>,
    <span class="hljs-string">"https://docker.1panelproxy.com"</span>,
    <span class="hljs-string">"https://elastic.m.daocloud.io"</span>,
    <span class="hljs-string">"https://elastic.m.daocloud.io"</span>,
    <span class="hljs-string">"https://docker.m.daocloud.io"</span>,
    <span class="hljs-string">"https://gcr.m.daocloud.io"</span>,
    <span class="hljs-string">"https://ghcr.m.daocloud.io"</span>,
    <span class="hljs-string">"https://k8s-gcr.m.daocloud.io"</span>,
    <span class="hljs-string">"https://k8s.m.daocloud.io"</span>,
    <span class="hljs-string">"https://mcr.m.daocloud.io"</span>,
    <span class="hljs-string">"https://nvcr.m.daocloud.io"</span>,
    <span class="hljs-string">"https://quay.m.daocloud.io"</span>
  ]
}
<span class="hljs-variable constant_">EOF</span>
</code></pre>
<h4 data-id="heading-21">å€Ÿé‰´é…ç½®</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">https</span>:<span class="hljs-comment">//github.com/rust-cross/rust-musl-cross.git</span>


<span class="hljs-variable constant_">FROM</span> <span class="hljs-attr">ubuntu</span>:<span class="hljs-number">22.04</span>

<span class="hljs-variable constant_">ENV</span> <span class="hljs-variable constant_">DEBIAN_FRONTEND</span>=noninteractive

# <span class="hljs-title class_">Make</span> sure we have basic dev tools <span class="hljs-keyword">for</span> building C libraries.  <span class="hljs-title class_">Our</span> goal
# here is to support the musl-libc builds and <span class="hljs-title class_">Cargo</span> builds needed <span class="hljs-keyword">for</span> a
# large selection <span class="hljs-keyword">of</span> the most popular crates.
#
<span class="hljs-variable constant_">RUN</span> apt-get update &amp;&amp; \
    apt-get install -y \
    build-essential \
    cmake \
    curl \
    file \
    git \
    sudo \
    xutils-dev \
    unzip \
    ca-certificates \
    python3 \
    python3-pip \
    autoconf \
    autoconf-archive \
    automake \
    flex \
    bison \
    llvm-dev \
    libclang-dev \
    clang \
    &amp;&amp; \
    apt-get clean &amp;&amp; rm -rf /<span class="hljs-keyword">var</span>/lib/apt/lists<span class="hljs-comment">/*

# Install Let's Encrypt R3 CA certificate from https://letsencrypt.org/certificates/
COPY lets-encrypt-r3.crt /usr/local/share/ca-certificates
RUN update-ca-certificates

ARG TARGET=x86_64-unknown-linux-musl
ARG MUSL_TARGET=$TARGET
ENV RUST_MUSL_CROSS_TARGET=$MUSL_TARGET
ARG RUST_MUSL_MAKE_CONFIG=config.mak

COPY $RUST_MUSL_MAKE_CONFIG /tmp/config.mak

RUN cd /tmp &amp;&amp; \
    git clone --depth 1 https://github.com/richfelker/musl-cross-make.git &amp;&amp; \
    cp /tmp/config.mak /tmp/musl-cross-make/config.mak &amp;&amp; \
    cd /tmp/musl-cross-make &amp;&amp; \
    export CFLAGS="-fPIC -g1 $CFLAGS" &amp;&amp; \
    export TARGET=$MUSL_TARGET &amp;&amp; \
    if [ `dpkg --print-architecture` = 'armhf' ] &amp;&amp; [ `uname -m` = 'aarch64' ]; then SETARCH=linux32; else SETARCH= ; fi &amp;&amp; \
    $SETARCH make -j$(nproc) &gt; /tmp/musl-cross-make.log &amp;&amp; \
    $SETARCH make install &gt;&gt; /tmp/musl-cross-make.log &amp;&amp; \
    ln -s /usr/local/musl/bin/$TARGET-strip /usr/local/musl/bin/musl-strip &amp;&amp; \
    cd /tmp &amp;&amp; \
    rm -rf /tmp/musl-cross-make /tmp/musl-cross-make.log

RUN mkdir -p /home/rust/libs /home/rust/src

# Set up our path with all our binary directories, including those for the
# musl-gcc toolchain and for our Rust toolchain.
ENV PATH=/root/.cargo/bin:/usr/local/musl/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
ENV TARGET_CC=$MUSL_TARGET-gcc
ENV TARGET_CXX=$MUSL_TARGET-g++
ENV TARGET_AR=$MUSL_TARGET-ar
ENV TARGET_RANLIB=$MUSL_TARGET-ranlib
ENV TARGET_HOME=/usr/local/musl/$MUSL_TARGET
ENV TARGET_C_INCLUDE_PATH=$TARGET_HOME/include/

# pkg-config cross compilation support
ENV TARGET_PKG_CONFIG_ALLOW_CROSS=1
ENV TARGET_PKG_CONFIG_SYSROOT_DIR=$TARGET_HOME
ENV TARGET_PKG_CONFIG_PATH=$TARGET_HOME/lib/pkgconfig:/usr/local/musl/lib/pkgconfig
ENV TARGET_PKG_CONFIG_LIBDIR=$TARGET_PKG_CONFIG_PATH

# We'll build our libraries in subdirectories of /home/rust/libs.  Please
# clean up when you're done.
WORKDIR /home/rust/libs

RUN export CC=$TARGET_CC &amp;&amp; \
    export C_INCLUDE_PATH=$TARGET_C_INCLUDE_PATH &amp;&amp; \
    export AR=$TARGET_AR &amp;&amp; \
    export RANLIB=$TARGET_RANLIB &amp;&amp; \
    echo "Building zlib" &amp;&amp; \
    VERS=1.2.13 &amp;&amp; \
    CHECKSUM=b3a24de97a8fdbc835b9833169501030b8977031bcb54b3b3ac13740f846ab30 &amp;&amp; \
    cd /home/rust/libs &amp;&amp; \
    curl -sqLO https://zlib.net/fossils/zlib-$VERS.tar.gz &amp;&amp; \
    echo "$CHECKSUM zlib-$VERS.tar.gz" &gt; checksums.txt &amp;&amp; \
    sha256sum -c checksums.txt &amp;&amp; \
    tar xzf zlib-$VERS.tar.gz &amp;&amp; cd zlib-$VERS &amp;&amp; \
    CFLAGS="-O3 -fPIC" ./configure --static --prefix=$TARGET_HOME &amp;&amp; \
    make -j$(nproc) &amp;&amp; make install &amp;&amp; \
    cd .. &amp;&amp; rm -rf zlib-$VERS.tar.gz zlib-$VERS checksums.txt

# The Rust toolchain to use when building our image
ARG TOOLCHAIN=stable
# Install our Rust toolchain and the `musl` target.  We patch the
# command-line we pass to the installer so that it won't attempt to
# interact with the user or fool around with TTYs.  We also set the default
# `--target` to musl so that our users don't need to keep overriding it
# manually.
# Chmod 755 is set for root directory to allow access execute binaries in /root/.cargo/bin (azure piplines create own user).
#
# Remove docs and more stuff not needed in this images to make them smaller
RUN chmod 755 /root/ &amp;&amp; \
    if [ `dpkg --print-architecture` = 'armhf' ]; then GNU_TARGET="armv7-unknown-linux-gnueabihf"; else GNU_TARGET=`uname -m`-unknown-linux-gnu; fi &amp;&amp; \
    export RUSTUP_USE_CURL=1 &amp;&amp; \
    curl https://sh.rustup.rs -sqSf | \
    sh -s -- -y --profile minimal --default-toolchain $TOOLCHAIN --default-host $GNU_TARGET &amp;&amp; \
    rustup target add $TARGET || rustup component add --toolchain $TOOLCHAIN rust-src &amp;&amp; \
    rustup component add --toolchain $TOOLCHAIN rustfmt clippy &amp;&amp; \
    rm -rf /root/.rustup/toolchains/$TOOLCHAIN-$GNU_TARGET/share/

RUN echo "[target.$TARGET]\nlinker = \"$TARGET_CC\"\n" &gt; /root/.cargo/config.toml

# Build std sysroot for targets that doesn't have official std release
ADD Xargo.toml /tmp/Xargo.toml
ADD s390x-unwind.patch /tmp/s390x-unwind.patch
ADD build-std.sh .
RUN bash build-std.sh

ENV RUSTUP_HOME=/root/.rustup
ENV CARGO_HOME=/root/.cargo
ENV CARGO_BUILD_TARGET=$TARGET

ENV CFLAGS_armv7_unknown_linux_musleabihf='-mfpu=vfpv3-d16'

# Build statically linked binaries for MIPS targets
ENV CARGO_TARGET_MIPS_UNKNOWN_LINUX_MUSL_RUSTFLAGS='-C target-feature=+crt-static'
ENV CARGO_TARGET_MIPSEL_UNKNOWN_LINUX_MUSL_RUSTFLAGS='-C target-feature=+crt-static'
ENV CARGO_TARGET_MIPS64_UNKNOWN_LINUX_MUSLABI64_RUSTFLAGS='-C target-feature=+crt-static'
ENV CARGO_TARGET_MIPS64EL_UNKNOWN_LINUX_MUSLABI64_RUSTFLAGS='-C target-feature=+crt-static'

# Expect our source code to live in /home/rust/src
WORKDIR /home/rust/src
</span></code></pre>
<h4 data-id="heading-22">é¡¹ç›®é…ç½®</h4>
<p>åœ¨æˆ‘ä»¬é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹é¢æ­å»ºä¸€ä¸ªæ–‡ä»¶,é‡Œé¢é…ç½®æˆ‘ä»¬éœ€è¦çš„ç›¸å…³ä¿¡æ¯</p>
<h5 data-id="heading-23">åˆ›å»º <code>Dockerfile</code> æ–‡ä»¶</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Dockerfile</span>

# ä½¿ç”¨å®˜æ–¹ <span class="hljs-title class_">Node</span>.<span class="hljs-property">js</span> è¿è¡Œæ—¶ä½œä¸ºåŸºç¡€é•œåƒ
<span class="hljs-variable constant_">FROM</span> <span class="hljs-attr">node</span>:<span class="hljs-number">18</span>-alpine

# è®¾ç½®å·¥ä½œç›®å½•
<span class="hljs-variable constant_">WORKDIR</span> /app

# å¤åˆ¶ package.<span class="hljs-property">json</span> å’Œ package-lock.<span class="hljs-property">json</span>
<span class="hljs-variable constant_">COPY</span> package*.<span class="hljs-property">json</span> ./

# å®‰è£…é¡¹ç›®ä¾èµ–
<span class="hljs-variable constant_">RUN</span> npm install

# å¤åˆ¶é¡¹ç›®æºä»£ç 
<span class="hljs-variable constant_">COPY</span> . .

# æš´éœ²åº”ç”¨ç«¯å£ï¼ˆæ ¹æ®ä½ çš„åº”ç”¨ä¿®æ”¹ï¼‰
<span class="hljs-variable constant_">EXPOSE</span> <span class="hljs-number">3000</span>

# è¿è¡Œåº”ç”¨çš„å‘½ä»¤ï¼ˆæ ¹æ®ä½ çš„å…¥å£æ–‡ä»¶ä¿®æ”¹ï¼‰
<span class="hljs-variable constant_">CMD</span> [<span class="hljs-string">"node"</span>, <span class="hljs-string">"app.js"</span>]
</code></pre>
<h5 data-id="heading-24">åˆ›å»º<code>.dockerignore</code>æ–‡ä»¶</h5>
<pre><code class="hljs language-javascript" lang="javascript">node_modules
npm-debug.<span class="hljs-property">log</span>
.<span class="hljs-property">git</span>
.<span class="hljs-property">gitignore</span>
<span class="hljs-variable constant_">README</span>.<span class="hljs-property">md</span>
.<span class="hljs-property">env</span>
</code></pre>
<h3 data-id="heading-25">4ã€æ‰“åŒ…éƒ¨ç½²</h3>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨dockeræ‰“åŒ…éƒ¨ç½²nodeé¡¹ç›®</p>
<p>æ‰“åŒ…ä¹‹å‰éœ€è¦å®‰è£…ä¸€ä¸‹æˆ‘ä»¬å¯¹åº”çš„ä¾èµ–é•œåƒï¼Œæˆ‘çš„nodeç‰ˆæœ¬å¦‚ä¸‹ã€‚å¯¹åº”çš„ç‰ˆæœ¬æˆ‘ä»¬å¯ä»¥åœ¨å¯¹åº”çš„éƒ¨åˆ†æŸ¥çœ‹</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-number">22.16</span><span class="hljs-number">.0</span>


å¯¹åº”çš„é•œåƒåœ°å€
<span class="hljs-attr">https</span>:<span class="hljs-comment">//mirrors.aliyun.com/nodejs-release/v22.16.0/?spm=a2c6h.25603864.0.0.52b3773fkunQPT</span>
</code></pre>
<p>é…ç½®é•œåƒæº</p>
<pre><code class="hljs language-javascript" lang="javascript">{
  <span class="hljs-string">"registry-mirrors"</span>: [
    <span class="hljs-string">"https://docker.m.daocloud.io"</span>,
    <span class="hljs-string">"https://mirror.ccs.tencentyun.com"</span>,
    <span class="hljs-string">"https://mirrors.aliyun.com"</span>,
    <span class="hljs-string">"https://mirrors.huaweicloud.com/repository/docker-ce"</span>,
    <span class="hljs-string">"https://docker.xuanyuan.me"</span>,
  ]
}

</code></pre>
<p>å®Œæ•´çš„é…ç½®å¦‚ä¸‹,é…ç½®å¥½äº†è¿™ä¸ªæ—¶å€™æ‰“åŒ…å·²ç»å¯ä»¥äº†</p>
<pre><code class="hljs language-javascript" lang="javascript">{
  <span class="hljs-string">"builder"</span>: {
    <span class="hljs-string">"gc"</span>: {
      <span class="hljs-string">"defaultKeepStorage"</span>: <span class="hljs-string">"20GB"</span>,
      <span class="hljs-string">"enabled"</span>: <span class="hljs-literal">true</span>
    }
  },
  <span class="hljs-string">"experimental"</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-string">"registry-mirrors"</span>: [
     <span class="hljs-string">"https://docker.m.daocloud.io"</span>,
    <span class="hljs-string">"https://mirror.ccs.tencentyun.com"</span>,
    <span class="hljs-string">"https://mirrors.aliyun.com"</span>,
    <span class="hljs-string">"https://mirrors.huaweicloud.com/repository/docker-ce"</span>,
    <span class="hljs-string">"https://docker.xuanyuan.me"</span>,
     <span class="hljs-string">"https://mirrors.tuna.tsinghua.edu.cn/docker-ce"</span>
  ]
}
</code></pre>
<p>æ ¹ç›®å½•ä¸‹é¢è¿è¡Œè¿™ä¸ªæ‰“åŒ…å‘½ä»¤</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ‰“åŒ…</span>

docker build -t nexus-node-app .
</code></pre>
<p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬è€å¿ƒç­‰å¾…ä¸€ä¼šç„¶åæ‰“åŒ…å°±æˆåŠŸäº†</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æœ¬åœ°å¯¼å‡ºæ‰“åŒ…çš„æ–‡ä»¶</span>

docker save -o nexus-node-api.<span class="hljs-property">tar</span> nexus-node-api

è¿™ä¸ªæ—¶å€™åœ¨æˆ‘çš„æ ¹ç›®å½•ä¸‹é¢å·²ç»æœ‰ä¸€ä¸ªæ–‡ä»¶äº†ï¼Œç›´æ¥æŠŠè¿™ä¸ªæ–‡ä»¶ä¸¢åˆ°æˆ‘ä»¬æƒ³è¦çš„nodeæœåŠ¡å™¨å³å¯
nexus-node-api.<span class="hljs-property">tar</span>
</code></pre>
<h5 data-id="heading-26">é•œåƒä¼ è¾“åˆ°æœåŠ¡å™¨ä¸Š</h5>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†å·²ç»æ‰“åŒ…å¥½çš„é¡¹ç›®ç›´æ¥æ”¾åˆ°dockeræœåŠ¡å™¨ä¸Šè¿›è¡Œè¿è¡Œ</p>
<p>æ–¹æ³•ï¼ˆ2ç§ï¼‰</p>
<p>å¯ä»¥ç›´æ¥ä¼ é€ä¸Šå»æˆ–è€…åˆ©ç”¨å‘½ä»¤è¡Œå·¥å…·ç›´æ¥å°†æˆ‘ä»¬çš„é¡¹ç›®ä¼ é€’ä¸Šå»</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨ scp æˆ–å…¶ä»–æ–‡ä»¶ä¼ è¾“å·¥å…·ï¼š </span>
scp my-node-app.<span class="hljs-property">tar</span> user@your-server-<span class="hljs-attr">ip</span>:<span class="hljs-regexp">/home/u</span>ser/
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript">
<span class="hljs-comment">// ç™»å½•æœåŠ¡å™¨ï¼Œè¿›å…¥ä½ ä¸Šä¼ æ–‡ä»¶çš„ç›®å½•ï¼Œæ‰§è¡Œï¼š</span>
docker load -i nexus-node-api.<span class="hljs-property">tar</span>
</code></pre>
<h5 data-id="heading-27">è¿è¡Œå®¹å™¨</h5>
<p>åœ¨æœåŠ¡å™¨ä¸Šè¿›è¡Œè¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript">docker run -d \
  --name my-node-app-container \
  -p <span class="hljs-number">80</span>:<span class="hljs-number">3200</span> \
  --restart unless-stopped \
  your-registry/my-node-<span class="hljs-attr">app</span>:v1<span class="hljs-number">.0</span><span class="hljs-number">.0</span>
    
  <span class="hljs-comment">// è¿™é‡Œçš„æ‰§è¡Œå‘½ä»¤ä¸º</span>
  docker run -d \
  --name nexus-node-api \
  -p <span class="hljs-number">3200</span>:<span class="hljs-number">3200</span> \
  -e <span class="hljs-variable constant_">NODE_ENV</span>=production \
  nexus-node-<span class="hljs-attr">api</span>:latest
</code></pre>
<p>æŸ¥çœ‹æˆ‘ä»¬å®¹å™¨çš„è¿è¡ŒçŠ¶æ€</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æŸ¥çœ‹å®¹å™¨æ˜¯å¦æˆåŠŸè¿è¡Œ</span>
docker ps

<span class="hljs-comment">// æŸ¥çœ‹å®¹å™¨æ—¥å¿—</span>
docker logs nexus-node-api

<span class="hljs-comment">// å®æ—¶æŸ¥çœ‹æ—¥å¿—</span>
docker logs -f nexus-node-api


<span class="hljs-comment">// åœæ­¢å®¹å™¨</span>
docker stop nexus-node-api

<span class="hljs-comment">// é‡å¯å®¹å™¨ï¼š</span>
docker restart nexus-node-api


<span class="hljs-comment">// åˆ é™¤å®¹å™¨ï¼ˆéœ€è¦å…ˆåœæ­¢ï¼‰ï¼š</span>
docker rm nexus-node-api

</code></pre>
<p>è¿™ä¸ªæ—¶å€™æˆ‘å·²ç»å¯ä»¥çœ‹åˆ°æˆ‘çš„é¡¹ç›®è¿è¡Œä»¥åŠæ—¥å¿—äº†</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// docker logs nexus-node-api</span>

ç‰ˆæœ¬å·nexus  <span class="hljs-variable constant_">V0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span> 
${author}çƒ­çƒˆæ¬¢è¿ä½ è®¿é—®<span class="hljs-title class_">Node</span>åç«¯æœåŠ¡å™¨
åˆå§‹åŒ–ws
<span class="hljs-title class_">WebSocket</span> æœåŠ¡å™¨å·²å¯åŠ¨ï¼Œç›‘å¬ç«¯å£ <span class="hljs-number">3000</span>
åˆå§‹åŒ–wsèŠå¤©å®¤
wsèŠå¤©å·²å¯åŠ¨ï¼Œç›‘å¬ç«¯å£ <span class="hljs-number">3001</span>
<span class="hljs-title class_">Server</span> is running on <span class="hljs-attr">http</span>:<span class="hljs-comment">//0.0.0.0:3200</span>
æ•°æ®åº“è¿æ¥æˆåŠŸğŸ˜Š,æˆ‘æ˜¯æ—å¤ªç™½
</code></pre>
<h4 data-id="heading-28">æ‰“åŒ…nodeé¡¹ç›®æç¤ºå¤„ç†</h4>
<p>è¿™ä¸ªæ—¶å€™æç¤ºæˆ‘ä»¬</p>
<pre><code class="hljs language-javascript" lang="javascript"> =&gt; <span class="hljs-variable constant_">ERROR</span> [internal] load metadata <span class="hljs-keyword">for</span> docker.<span class="hljs-property">io</span>/library/<span class="hljs-attr">node</span>:<span class="hljs-number">18</span>-alpine                               <span class="hljs-number">21.</span>1s
------
 &gt; [internal] load metadata <span class="hljs-keyword">for</span> docker.<span class="hljs-property">io</span>/library/<span class="hljs-attr">node</span>:<span class="hljs-number">18</span>-<span class="hljs-attr">alpine</span>:
------
<span class="hljs-title class_">Dockerfile</span>:<span class="hljs-number">2</span>
--------------------
   <span class="hljs-number">1</span> |     # ä½¿ç”¨å®˜æ–¹ <span class="hljs-title class_">Node</span>.<span class="hljs-property">js</span> è¿è¡Œæ—¶ä½œä¸ºåŸºç¡€é•œåƒ
   <span class="hljs-number">2</span> | &gt;&gt;&gt; <span class="hljs-variable constant_">FROM</span> <span class="hljs-attr">node</span>:<span class="hljs-number">18</span>-alpine
   <span class="hljs-number">3</span> |
   <span class="hljs-number">4</span> |     # è®¾ç½®å·¥ä½œç›®å½•
--------------------
<span class="hljs-attr">ERROR</span>: failed to <span class="hljs-attr">build</span>: failed to <span class="hljs-attr">solve</span>: <span class="hljs-attr">node</span>:<span class="hljs-number">18</span>-<span class="hljs-attr">alpine</span>: failed to resolve source metadata <span class="hljs-keyword">for</span> docker.<span class="hljs-property">io</span>/library/<span class="hljs-attr">node</span>:<span class="hljs-number">18</span>-<span class="hljs-attr">alpine</span>: failed to <span class="hljs-keyword">do</span> <span class="hljs-attr">request</span>: <span class="hljs-title class_">Head</span> <span class="hljs-string">"https://registry-1.docker.io/v2/library/node/manifests/18-alpine"</span>: dialing registry-<span class="hljs-number">1.</span>docker.<span class="hljs-property">io</span>:<span class="hljs-number">443</span> container via direct connection because disabled has no <span class="hljs-variable constant_">HTTPS</span> <span class="hljs-attr">proxy</span>: connecting to registry-<span class="hljs-number">1.</span>docker.<span class="hljs-property">io</span>:<span class="hljs-number">443</span>: dial tcp <span class="hljs-number">108.160</span><span class="hljs-number">.161</span><span class="hljs-number">.83</span>:<span class="hljs-number">443</span>: <span class="hljs-attr">connectex</span>: A connection attempt failed because the connected party did not properly respond after a period <span class="hljs-keyword">of</span> time, or established connection failed because connected host has failed to respond.

<span class="hljs-title class_">View</span> build <span class="hljs-attr">details</span>: docker-<span class="hljs-attr">desktop</span>:<span class="hljs-comment">//dashboard/build/desktop-linux/desktop-linux/ste681kfzh01gt53di0y8ii61</span>
</code></pre>
<h5 data-id="heading-29">å¤„ç†è§£å†³</h5>
<p>è¿™ä¸ªæ—¶å€™å¤§å¤šæ•°éƒ½æ˜¯é…ç½®å’Œé•œåƒçš„é—®é¢˜ï¼Œè¿™é‡Œæˆ‘æ¢æˆäº†æ¸…åé•œåƒç«™ï¼Œç„¶åé‡æ–°éƒ¨ç½²äº†ä¸€ä¸‹å°±okäº†</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LogicFlow äº¤äº’æ–°ä½“éªŒï¼šå‘Šåˆ«ç›´è¿ï¼Œä¸æ»‘è´å¡å°”è½¨è¿¹å®æˆ˜ï¼ğŸ«]]></title>    <link>https://juejin.cn/post/7589168816527949851</link>    <guid>https://juejin.cn/post/7589168816527949851</guid>    <pubDate>2025-12-30T03:36:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589168816527949851" data-draft-id="7589166195796951067" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LogicFlow äº¤äº’æ–°ä½“éªŒï¼šå‘Šåˆ«ç›´è¿ï¼Œä¸æ»‘è´å¡å°”è½¨è¿¹å®æˆ˜ï¼ğŸ«"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-12-30T03:36:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ©™æŸäºº"/> <meta itemprop="url" content="https://juejin.cn/user/1908407919184670"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LogicFlow äº¤äº’æ–°ä½“éªŒï¼šå‘Šåˆ«ç›´è¿ï¼Œä¸æ»‘è´å¡å°”è½¨è¿¹å®æˆ˜ï¼ğŸ«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1908407919184670/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ©™æŸäºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T03:36:26.000Z" title="Tue Dec 30 2025 03:36:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å†™åœ¨å¼€å¤´</h2>
<p>Hello everyone! ğŸ¤ </p>
<p>åœ¨<a href="https://juejin.cn/post/7589107312112648201" target="_blank" title="https://juejin.cn/post/7589107312112648201">LogicFlow äº¤äº’æ–°ä½“éªŒï¼šè®©é”šç‚¹"æ´»"èµ·æ¥ï¼Œé¼ æ ‡è·ŸéšåŠ¨æ•ˆå®æˆ˜ï¼ğŸ§²</a>ä¸­ï¼Œå’±ä»¬è§£å†³äº†é”šç‚¹çš„å¸é™„äº¤äº’é—®é¢˜ã€‚ä»Šå¤©å°ç¼–è¦åˆ†äº«çš„æ˜¯å¦ä¸€é¡¹ç»†èŠ‚ä¼˜åŒ–â€”â€”<strong>è¿çº¿è½¨è¿¹ï¼ˆTrajectoryï¼‰</strong>ã€‚</p>
<p>å¤§å®¶åœ¨ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fsite.logic-flow.cn%2F" target="_blank" title="https://site.logic-flow.cn/" ref="nofollow noopener noreferrer">LogicFlow</a> æ—¶ï¼Œé»˜è®¤çš„æ‹–æ‹½è¿çº¿ï¼Œæ— è®ºä½ æœ€ç»ˆç”Ÿæˆçš„è¾¹æ˜¯æŠ˜çº¿è¿˜æ˜¯æ›²çº¿ï¼Œ<strong>åœ¨é¼ æ ‡æ‹–æ‹½çš„è¿‡ç¨‹ä¸­ï¼Œè·Ÿéšé¼ æ ‡çš„é‚£æ¡çº¿å§‹ç»ˆæ˜¯ä¸€æ¡ç¬”ç›´çš„è™šçº¿ã€‚</strong></p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da27f5885fc04a83ac3118969d99cdbe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmZ5p-Q5Lq6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767670586&amp;x-signature=Wmm9kjjm6zq0dpr7oU2wWU11mCE%3D" alt="123002.gif" loading="lazy"/></p>
<p>å¯¹äºä¸€ä¸ªè¿½æ±‚æè‡´ä½“éªŒçš„é¡¹ç›®æ¥è¯´ï¼Œè¿™å¤šå°‘æœ‰ç‚¹ "å‡ºæˆ"ã€‚ğŸ¤”</p>
<p>åœ¨å°ç¼–çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬æœ€ç»ˆç”Ÿæˆçš„<strong>è¾¹</strong>æ˜¯<strong>è´å¡å°”æ›²çº¿</strong>ï¼Œæ ¹æ®è®¾è®¡äººå‘˜çš„è¦æ±‚ï¼Œè¿çº¿è¿‡ç¨‹ä¸­ä¹ŸæœŸæœ›æ˜¯ä»¥æ›²çº¿çš„å½¢å¼ï¼Œä»¥æ­¤åŒ¹é…é¡¹ç›®çš„æ•´ä½“è®¾è®¡è§„èŒƒã€‚</p>
<p>äºæ˜¯ï¼Œå°ç¼–åœ¨ç¿»é˜… <a href="https://link.juejin.cn?target=https%3A%2F%2Fsite.logic-flow.cn%2Fapi%2Fdetail%2Fconstructor" target="_blank" title="https://site.logic-flow.cn/api/detail/constructor" ref="nofollow noopener noreferrer">LogicFlow</a> æ–‡æ¡£æ—¶ï¼Œæ‰¾äº†ä¸€ä¸ª <code>customTrajectory</code> å±æ€§ï¼Œå®ƒèƒ½è®©å’±ä»¬è¿›è¡Œ<strong>è‡ªå®šä¹‰è¿çº¿è½¨è¿¹</strong>ã€‚âœ¨</p>
<blockquote>
<p>éå¸¸çµæ´»æ–¹ä¾¿ï¼Œåœ¨å°ç¼–æ—©æœŸæŠ€æœ¯é€‰å‹æ—¶ï¼Œä¹Ÿæ˜¯çœ‹ä¸­äº† LogicFlow åº“è¶…å¼ºçš„è‡ªå®šä¹‰èƒ½åŠ›ã€‚</p>
</blockquote>
<p>ä¼˜åŒ–åçš„æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼Œè¯·è¯¸å›æŒ‰éœ€é£Ÿç”¨å“ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9c609f4565e400e9a49b990ca56dd30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmZ5p-Q5Lq6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767670586&amp;x-signature=lee8t6EpORIfSLtG6hCZ%2BGnSwOo%3D" alt="123001.gif" loading="lazy"/></p>
<h2 data-id="heading-1">éœ€æ±‚èƒŒæ™¯</h2>
<p>åœ¨å°ç¼–é¡¹ç›®ä¸­ï¼ŒèŠ‚ç‚¹ä¹‹é—´çš„è¾¹é‡‡ç”¨çš„æ˜¯<strong>ä¸‰æ¬¡è´å¡å°”æ›²çº¿</strong>ï¼ˆ<code>bezierCurveEdge</code>ï¼‰ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯¹è¾¹è¿›è¡Œè‡ªå®šä¹‰å¼€å‘ã€‚</p>
<p>ä½†æ˜¯ï¼Œç›®å‰çš„ç—›ç‚¹æ˜¯ï¼š</p>
<ul>
<li><strong>è§†è§‰å‰²è£‚</strong>ï¼šæ‹–æ‹½æ—¶æ˜¯ç›´çº¿ï¼Œæ¾æ‰‹åå˜æ›²çº¿ï¼Œè§†è§‰ä½“éªŒä¸è¿ç»­ã€‚</li>
<li><strong>é£æ ¼ä¸ç¬¦</strong>ï¼šç”Ÿç¡¬çš„ç›´çº¿æ— æ³•ä½“ç°é¡¹ç›®æ•´ä½“â€œåœ†æ¶¦ã€æµç•…â€çš„è®¾è®¡è¯­è¨€ã€‚</li>
</ul>
<p>è®¾è®¡äººå‘˜æƒ³è¦çš„æ•ˆæœæ˜¯ï¼š</p>
<ul>
<li>ç”¨æˆ·æ‹–æ‹½è¿çº¿æ—¶ï¼Œè·Ÿéšé¼ æ ‡çš„å¼•å¯¼çº¿ç›´æ¥å±•ç¤ºä¸º<strong>æ›²çº¿</strong>ã€‚</li>
<li>å¼•å¯¼çº¿çš„æ›²ç‡åŠ¨æ€è®¡ç®—ï¼Œä¸æœ€ç»ˆç”Ÿæˆçš„è¾¹ä¿æŒä¸€è‡´ã€‚</li>
</ul>
<h2 data-id="heading-2">å…·ä½“å®ç°</h2>
<p>LogicFlow æä¾›äº†ä¸€ä¸ªéå¸¸å¼ºå¤§çš„é…ç½®é¡¹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fsite.logic-flow.cn%2Fapi%2Fdetail%2Fconstructor" target="_blank" title="https://site.logic-flow.cn/api/detail/constructor" ref="nofollow noopener noreferrer">customTrajectory</a>ï¼Œå…è®¸æˆ‘ä»¬è‡ªå®šä¹‰è¿çº¿è¿‡ç¨‹ä¸­å¼•å¯¼çº¿çš„æ¸²æŸ“é€»è¾‘ã€‚</p>
<h3 data-id="heading-3">ç¬¬1ï¸âƒ£æ­¥ï¼šç†è§£customTrajectoryå±æ€§</h3>
<p>ä»æ–‡æ¡£ä¸Šçœ‹ <code>customTrajectory</code> å±æ€§æ¥æ”¶çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰’å…¶ç›¸å…³çš„æºç ã€‚â°</p>
<p>æºç ä½ç½®åœ¨ï¼š <code>packages/core/src/view/Anchor.tsx</code></p>
<p>æ ¸å¿ƒé€»è¾‘å¦‚ä¸‹ï¼š</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6a4c65ce8264f5eaf846ddd86b3524e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qmZ5p-Q5Lq6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767670586&amp;x-signature=mzbKvDX5qskNRxInW%2FF991vRN2M%3D" alt="image.png" width="50%" loading="lazy"/>
<p>ä»æºç ä¸­å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°ï¼Œ<code>customTrajectory</code> æ˜¯ä¸€ä¸ªä¼˜å…ˆçº§æ›´é«˜çš„æ¸²æŸ“å‡½æ•°ã€‚å®ƒæ¥æ”¶èµ·ç‚¹ (<code>sourcePoint</code>)ã€ç»ˆç‚¹ (<code>targetPoint</code>) ä»¥åŠæ ·å¼é…ç½® (<code>edgeStyle</code>)ï¼Œè¦æ±‚è¿”å›ä¸€ä¸ª VDOM èŠ‚ç‚¹ï¼ˆå®ƒåœ¨ <code>render</code> å‡½æ•°ä¸­ï¼Œé€šå¸¸æ˜¯ SVG å…ƒç´ ï¼‰ã€‚</p>
<p>LogicFlow å†…éƒ¨ä½¿ç”¨ Preact/React çš„ VDOM æœºåˆ¶ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¼•å…¥å…¶çš„ <code>h</code> å‡½æ•°æ¥åˆ›å»ºå…ƒç´ ã€‚</p>
<h3 data-id="heading-4">ç¬¬2ï¸âƒ£æ­¥ï¼šç¼–å†™è´å¡å°”è½¨è¿¹ç®—æ³•</h3>
<p>æ ¸å¿ƒéš¾ç‚¹åœ¨äºè®¡ç®—è´å¡å°”æ›²çº¿çš„<strong>æ§åˆ¶ç‚¹</strong>ã€‚ä¸ºäº†è®©æ›²çº¿çœ‹èµ·æ¥è‡ªç„¶ï¼Œé€šå¸¸æ§åˆ¶ç‚¹ä¼šæ ¹æ®èµ·ç‚¹å’Œç»ˆç‚¹çš„ç›¸å¯¹ä½ç½®è¿›è¡Œåç§»ã€‚</p>
<p>å’±ä»¬æ–°å»ºæ–‡ä»¶ <code>customTrajectory.js</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { h } <span class="hljs-keyword">from</span> <span class="hljs-string">"@logicflow/core"</span>;

<span class="hljs-comment">// å®šä¹‰ä¸€äº›å¸¸é‡ï¼Œä¿æŒä¸æœ€ç»ˆè¾¹çš„æ ·å¼ä¸€è‡´</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">STROKE_COLOR</span> = <span class="hljs-string">"#2961F7"</span>; <span class="hljs-comment">// å¼•å¯¼çº¿é¢œè‰²</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">STROKE_WIDTH</span> = <span class="hljs-number">1</span>;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@name</span> è‡ªå®šä¹‰è¿çº¿è½¨è¿¹
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">object</span>} params è½¨è¿¹å‚æ•°å¯¹è±¡
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">{x:number,y:number</span>}} params.sourcePoint èµ·ç‚¹åæ ‡
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">{x:number,y:number</span>}} params.targetPoint ç»ˆç‚¹åæ ‡ï¼ˆå³é¼ æ ‡å½“å‰ä½ç½®ï¼‰
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">*</span>} Preact è™šæ‹ŸèŠ‚ç‚¹
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">customTrajectory</span>(<span class="hljs-params">{ sourcePoint, targetPoint, ...edgeStyle }</span>) {
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">x</span>: startX, <span class="hljs-attr">y</span>: startY } = sourcePoint;
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">x</span>: endX, <span class="hljs-attr">y</span>: endY } = targetPoint;
  
  <span class="hljs-comment">// 1. è®¡ç®—æ°´å¹³å’Œå‚ç›´æ–¹å‘çš„è·ç¦»</span>
  <span class="hljs-keyword">const</span> dx = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(endX - startX);
  <span class="hljs-keyword">const</span> dy = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(endY - startY);
  
  <span class="hljs-comment">// 2. è®¡ç®—æ§åˆ¶ç‚¹åç§»é‡</span>
  <span class="hljs-comment">// è¿™é‡Œé‡‡ç”¨â€œä»¥æ°´å¹³æ–¹å‘ä¸ºä¸»â€çš„ç­–ç•¥ï¼Œç³»æ•° 0.6 æ˜¯ç»éªŒå€¼ï¼Œå¯ä»¥è®©æ›²çº¿å¼¯å¾—æ›´å¥½çœ‹</span>
  <span class="hljs-keyword">const</span> controlOffset = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(dx, dy) * <span class="hljs-number">0.6</span>;
  
  <span class="hljs-comment">// 3. ç”Ÿæˆä¸‰æ¬¡è´å¡å°”æ›²çº¿çš„è·¯å¾„ï¼ˆC æŒ‡ä»¤ï¼šC æ§åˆ¶ç‚¹1.x,æ§åˆ¶ç‚¹1.y æ§åˆ¶ç‚¹2.x,æ§åˆ¶ç‚¹2.y ç»ˆç‚¹.x,ç»ˆç‚¹.yï¼‰</span>
  <span class="hljs-keyword">let</span> d = <span class="hljs-string">""</span>;
  
  <span class="hljs-keyword">if</span> (endX &gt; startX &amp;&amp; endY &gt; startY) {
    <span class="hljs-comment">// å³ä¸‹æ–¹å‘ï¼šæ§åˆ¶ç‚¹1 å³ä¸Šï¼Œæ§åˆ¶ç‚¹2 å·¦ä¸‹</span>
    d = <span class="hljs-string">`M <span class="hljs-subst">${startX}</span>,<span class="hljs-subst">${startY}</span> C <span class="hljs-subst">${startX + controlOffset}</span>,<span class="hljs-subst">${startY}</span> <span class="hljs-subst">${endX - controlOffset}</span>,<span class="hljs-subst">${endY}</span> <span class="hljs-subst">${endX}</span>,<span class="hljs-subst">${endY}</span>`</span>;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (endX &gt; startX &amp;&amp; endY &lt; startY) {
    <span class="hljs-comment">// å³ä¸Šæ–¹å‘ï¼šæ§åˆ¶ç‚¹1 å³ä¸‹ï¼Œæ§åˆ¶ç‚¹2 å·¦ä¸Š</span>
    d = <span class="hljs-string">`M <span class="hljs-subst">${startX}</span>,<span class="hljs-subst">${startY}</span> C <span class="hljs-subst">${startX + controlOffset}</span>,<span class="hljs-subst">${startY}</span> <span class="hljs-subst">${endX - controlOffset}</span>,<span class="hljs-subst">${endY}</span> <span class="hljs-subst">${endX}</span>,<span class="hljs-subst">${endY}</span>`</span>;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (endX &lt; startX &amp;&amp; endY &gt; startY) {
    <span class="hljs-comment">// å·¦ä¸‹æ–¹å‘ï¼šæ§åˆ¶ç‚¹1 å·¦ä¸Šï¼Œæ§åˆ¶ç‚¹2 å³ä¸‹</span>
    d = <span class="hljs-string">`M <span class="hljs-subst">${startX}</span>,<span class="hljs-subst">${startY}</span> C <span class="hljs-subst">${startX - controlOffset}</span>,<span class="hljs-subst">${startY}</span> <span class="hljs-subst">${endX + controlOffset}</span>,<span class="hljs-subst">${endY}</span> <span class="hljs-subst">${endX}</span>,<span class="hljs-subst">${endY}</span>`</span>;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// å·¦ä¸Šæ–¹å‘ï¼šæ§åˆ¶ç‚¹1 å·¦ä¸‹ï¼Œæ§åˆ¶ç‚¹2 å³ä¸Š</span>
    d = <span class="hljs-string">`M <span class="hljs-subst">${startX}</span>,<span class="hljs-subst">${startY}</span> C <span class="hljs-subst">${startX - controlOffset}</span>,<span class="hljs-subst">${startY}</span> <span class="hljs-subst">${endX + controlOffset}</span>,<span class="hljs-subst">${endY}</span> <span class="hljs-subst">${endX}</span>,<span class="hljs-subst">${endY}</span>`</span>;
  }

  <span class="hljs-comment">// 4. è¿”å› SVG Path å…ƒç´ </span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(
    <span class="hljs-string">"path"</span>, 
    {
      d,
      <span class="hljs-attr">fill</span>: <span class="hljs-string">"none"</span>,
      <span class="hljs-attr">pointerEvents</span>: <span class="hljs-string">"none"</span>, <span class="hljs-comment">// æå…¶é‡è¦ï¼é˜²æ­¢å¼•å¯¼çº¿é˜»æŒ¡é¼ æ ‡äº‹ä»¶</span>
      ...edgeStyle,
      <span class="hljs-attr">strokeDasharray</span>: <span class="hljs-literal">undefined</span>, <span class="hljs-comment">// å°ç¼–çš„é¡¹ç›®è®¾è®¡ä¸éœ€è¦è™šçº¿ï¼Œæ‰€ä»¥æ¸…é™¤æ‰ï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±éœ€è¦</span>
      <span class="hljs-attr">stroke</span>: <span class="hljs-variable constant_">STROKE_COLOR</span>, 
      <span class="hljs-attr">strokeWidth</span>: <span class="hljs-variable constant_">STROKE_WIDTH</span>, 
    },
  );
}
</code></pre>
<p><strong>æ³¨æ„</strong>ğŸ”‰ï¼šè¿™é‡Œçš„æ§åˆ¶ç‚¹è®¡ç®—é€»è¾‘ï¼ˆ<code>controlOffset</code>ï¼‰æœ€å¥½ä¸ä½ çš„è¾¹é‡Œçš„é€»è¾‘ä¿æŒä¸€è‡´ï¼Œè¿™æ ·æ¾æ‰‹çš„ä¸€ç¬é—´ï¼Œçº¿æ¡æ‰ä¸ä¼šæœ‰å¥‡æ€ªçš„ "è·³åŠ¨"ã€‚</p>
<blockquote>
<p>è¿™é‡Œå¦‚æ­¤å¤æ‚çš„è®¡ç®—æ˜¯å°ç¼–è‡ªå·±å†™çš„ï¼Ÿé‚£ä¹ˆç‰›ï¼ŸğŸ®</p>
<p>å½“ç„¶ä¸æ˜¯ï¼Œè¿™é‡Œå°ç¼–ä¹Ÿæ˜¯å€ŸåŠ©äº†AIçš„ååŠ©ã€‚è¿™è¦æ˜¯æ”¾åœ¨å‡ å¹´å‰ï¼Œè¿™ç§äº¤äº’æ•ˆæœç›´æ¥å°±ç æ‰ï¼Œå®åœ¨å¤ªè´¹åŠ²äº†ï¼Œç°åœ¨ä¸ä¸€æ ·äº†ï¼Œä½ è®©AIå¸®åŠ©ä½ å†™ï¼Œåªè¦ä½ æç¤ºè¯å†™å¾—è¶³å¤Ÿæ¸…æ¥šï¼ŒAIåˆ†åˆ†é’Ÿå¸®ä½ è§£å†³ï¼Œä½ åªè¦è°ƒè°ƒå‚æ•°ï¼ŒéªŒæ”¶ç»“æœå°±è¡Œäº†ã€‚</p>
</blockquote>
<h3 data-id="heading-5">ç¬¬3ï¸âƒ£æ­¥ï¼šæ³¨å†Œé…ç½®</h3>
<p>æœ€åï¼Œåœ¨åˆå§‹åŒ– LogicFlow æ—¶ï¼Œå°†è¿™ä¸ªå‡½æ•°ä¼ ç»™ <code>customTrajectory</code> é€‰é¡¹ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">LogicFlow</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"@logicflow/core"</span>;
<span class="hljs-keyword">import</span> customTrajectory <span class="hljs-keyword">from</span> <span class="hljs-string">"./customTrajectory"</span>;

<span class="hljs-keyword">const</span> lf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LogicFlow</span>({
  <span class="hljs-attr">container</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"#container"</span>),
  <span class="hljs-comment">// ... å…¶ä»–é…ç½®</span>
  
  <span class="hljs-comment">// æ³¨å†Œè‡ªå®šä¹‰è½¨è¿¹</span>
  <span class="hljs-attr">customTrajectory</span>: customTrajectory,
  
  <span class="hljs-comment">// ç¡®ä¿æœ€ç»ˆç”Ÿæˆçš„è¾¹ä¹Ÿæ˜¯è´å¡å°”æ›²çº¿</span>
  <span class="hljs-attr">edgeGenerator</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-string">"bezierCurveEdge"</span>, 
});
</code></pre>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>é€šè¿‡ç®€å•çš„æ•°å­¦è®¡ç®—å’Œ VDOM æ¸²æŸ“ï¼Œå’±ä»¬æˆåŠŸå°† LogicFlow çš„è¿çº¿è½¨è¿¹ä» "å·¥ä¸šé£" çš„ç›´çº¿å‡çº§æˆäº† "è‰ºæœ¯é£" çš„æ›²çº¿ã€‚ğŸ˜‹</p>
<p>å¸Œæœ›è¿™ä¸ªå°æŠ€å·§èƒ½è®©ä½ çš„æµç¨‹å›¾ç¼–è¾‘ä½“éªŒæ›´åŠ å‡ºè‰²ï¼ğŸŒŸ</p>
<br/>
<hr/>
<p><br/><br/></p>
<p>è‡³æ­¤ï¼Œæœ¬ç¯‡æ–‡ç« å°±å†™å®Œå•¦ï¼Œæ’’èŠ±æ’’èŠ±ã€‚</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b2198fba2b674f1b935a63e4abb3cbd7~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=90&amp;h=90&amp;s=8866&amp;e=png&amp;b=fcfcfc" alt="image.png" loading="lazy"/></p>
<p>å¸Œæœ›æœ¬æ–‡å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œå¦‚æœ‰ä»»ä½•ç–‘é—®ï¼ŒæœŸå¾…ä½ çš„ç•™è¨€å“¦ã€‚<br/>
è€æ ·å­ï¼Œç‚¹èµ+è¯„è®º=ä½ ä¼šäº†ï¼Œæ”¶è—=ä½ ç²¾é€šäº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å°† Markdown æ–‡ä»¶å¯¼å…¥ä¸º React ç»„ä»¶ - å†™ä½œæ–‡æ¡£ï¼Œå³æ—¶è·å–äº¤äº’å¼æ¼”ç¤º]]></title>    <link>https://juejin.cn/post/7589207474134155314</link>    <guid>https://juejin.cn/post/7589207474134155314</guid>    <pubDate>2025-12-30T03:39:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589207474134155314" data-draft-id="7589168816527933467" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å°† Markdown æ–‡ä»¶å¯¼å…¥ä¸º React ç»„ä»¶ - å†™ä½œæ–‡æ¡£ï¼Œå³æ—¶è·å–äº¤äº’å¼æ¼”ç¤º"/> <meta itemprop="keywords" content="å‰ç«¯,React.js,Markdown"/> <meta itemprop="datePublished" content="2025-12-30T03:39:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éƒ­å°é“­"/> <meta itemprop="url" content="https://juejin.cn/user/1345457961570638"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å°† Markdown æ–‡ä»¶å¯¼å…¥ä¸º React ç»„ä»¶ - å†™ä½œæ–‡æ¡£ï¼Œå³æ—¶è·å–äº¤äº’å¼æ¼”ç¤º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1345457961570638/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éƒ­å°é“­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T03:39:05.000Z" title="Tue Dec 30 2025 03:39:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><p>æˆ‘æœ€è¿‘å°† react-code-view è¿›è¡Œäº†é‡å†™, åŸºäº unplugin è®© Markdown å¯ä»¥ç›´æ¥å¯¼å…¥æ¸²æŸ“æˆä¸€ä¸ª React ç»„ä»¶. ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•ç¤ºä¾‹</p>
<h2 data-id="heading-0">1.å®‰è£…</h2>
<pre><code class="hljs language-sql" lang="sql">npm install <span class="hljs-variable">@react</span><span class="hljs-operator">-</span>code<span class="hljs-operator">-</span><span class="hljs-keyword">view</span><span class="hljs-operator">/</span>react <span class="hljs-variable">@react</span><span class="hljs-operator">-</span>code<span class="hljs-operator">-</span><span class="hljs-keyword">view</span><span class="hljs-operator">/</span>unplugin
</code></pre>
<h2 data-id="heading-1">2.é…ç½®æ„å»ºå·¥å…·(æ”¯æŒ vite/webpack/esbuild/rollup)</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>;
<span class="hljs-keyword">import</span> react <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-react'</span>;
<span class="hljs-keyword">import</span> reactCodeView <span class="hljs-keyword">from</span> <span class="hljs-string">'@react-code-view/unplugin/vite'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-title function_">react</span>(),
    <span class="hljs-title function_">reactCodeView</span>() <span class="hljs-comment">// Enable markdown import</span>
  ]
});
</code></pre>
<h2 data-id="heading-2">3.ä½¿ç”¨æœ‰ä»£ç å—åˆ›å»º Markdown æ–‡ä»¶</h2>
<p>demo.md</p>
<pre><code class="hljs language-xml" lang="xml"># Counter Example


A simple counter to demonstrate live code editing and preview.


<span class="hljs-comment">&lt;!--start-code--&gt;</span>
\`\`\`jsx
const App = () =&gt; {
  const [count, setCount] = useState(0);
  return (
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(c =&gt; c + 1)}&gt;
      Clicked {count} times
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  );
};

render(<span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span>);
\`\`\`
<span class="hljs-comment">&lt;!--end-code--&gt;</span>

- Click "Show Code" to view and edit the source
- Preview updates instantly while you type
- Click the copy button to reuse the code
</code></pre>
<h2 data-id="heading-3">4.å¯¼å…¥å¹¶ä½¿ç”¨</h2>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Demo</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./demo.md'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Demo</span> /&gt;</span></span>;
}
</code></pre>
<h2 data-id="heading-4">æœ€å¥½æ¸²æŸ“æˆçš„æ•ˆæœ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0d8d407ecfd443d8c283fd785655321~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YOt5bCP6ZOt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671129&amp;x-signature=OE212VBypGbCqQFF0ySm3EkqtXM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">æ–‡æ¡£</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frcv-rsuite.vercel.app%2F" target="_blank" title="https://rcv-rsuite.vercel.app/" ref="nofollow noopener noreferrer">rcv-rsuite.vercel.app/</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsimonguo%2Freact-code-view" target="_blank" title="https://github.com/simonguo/react-code-view" ref="nofollow noopener noreferrer">github.com/simonguo/reâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¾æ—§æ˜¯éšå¼å‡½æ•°2.0]]></title>    <link>https://juejin.cn/post/7589167105386151972</link>    <guid>https://juejin.cn/post/7589167105386151972</guid>    <pubDate>2025-12-30T03:08:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589167105386151972" data-draft-id="7589201772133105705" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¾æ—§æ˜¯éšå¼å‡½æ•°2.0"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-30T03:08:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åƒé©¬é“ƒè–¯é•¿å¤§çš„åœŸè±†"/> <meta itemprop="url" content="https://juejin.cn/user/1162661349831369"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¾æ—§æ˜¯éšå¼å‡½æ•°2.0
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1162661349831369/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åƒé©¬é“ƒè–¯é•¿å¤§çš„åœŸè±†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T03:08:04.000Z" title="Tue Dec 30 2025 03:08:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">éšå¼å‡½æ•°çš„ä»£ç ç¤ºèŒƒğŸ’•æ¥ä¸‹æ¥çš„æ–‡ç« éƒ½æ˜¯è§£æè¿™ä¸ªä»£ç </h2>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">package</span> imp
<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">tt</span> </span>{
  <span class="hljs-keyword">import</span> scala.language.postfixOps
  <span class="hljs-keyword">implicit</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FactorialInt</span>(<span class="hljs-params">n: <span class="hljs-type">Int</span></span>) </span>{
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">!</span> </span>: <span class="hljs-type">Int</span> = {
      <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">1</span>) <span class="hljs-number">1</span>
      <span class="hljs-keyword">else</span> n * ((n - <span class="hljs-number">1</span>)!)
    }
  }

  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = {
    println(<span class="hljs-number">4</span>!)
    println(<span class="hljs-number">5</span>!)
    println(<span class="hljs-number">0</span>!)
  }
}
</code></pre>
<h3 data-id="heading-1">ğŸ‘Œä¸€ã€ä»£ç æ•´ä½“ç»“æ„ &amp; æ ¸å¿ƒç›®æ ‡ğŸ˜˜</h3>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">package</span> imp  <span class="hljs-comment">// ä»£ç æ‰€å±åŒ…ï¼Œç”¨äºéš”ç¦»å‘½åç©ºé—´</span>
<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">tt</span> </span>{   <span class="hljs-comment">// å•ä¾‹å¯¹è±¡ï¼ˆScala ç¨‹åºå…¥å£å¿…é¡»åœ¨ object ä¸­ï¼‰</span>
  <span class="hljs-comment">// 1. å¯ç”¨åç¼€æ“ä½œç¬¦è¯­æ³•ï¼ˆè§£å†³!çš„ç¼–è¯‘é™åˆ¶ï¼‰</span>
  <span class="hljs-keyword">import</span> scala.language.postfixOps
  
  <span class="hljs-comment">// 2. éšå¼ç±»ï¼šä¸ºIntæ‰©å±•é˜¶ä¹˜æ–¹æ³•</span>
  <span class="hljs-keyword">implicit</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FactorialInt</span>(<span class="hljs-params">n: <span class="hljs-type">Int</span></span>) </span>{
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">!</span> </span>: <span class="hljs-type">Int</span> = {  <span class="hljs-comment">// é˜¶ä¹˜æ–¹æ³•ï¼ˆæ— å‚æ•°ï¼Œè¿”å›Intï¼‰</span>
      <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">1</span>) <span class="hljs-number">1</span>  <span class="hljs-comment">// é˜¶ä¹˜è¾¹ç•Œï¼š0!å’Œ1!éƒ½ç­‰äº1</span>
      <span class="hljs-keyword">else</span> n * ((n - <span class="hljs-number">1</span>)!)  <span class="hljs-comment">// é€’å½’è®¡ç®—é˜¶ä¹˜</span>
    }
  }

  <span class="hljs-comment">// 3. ä¸»æ–¹æ³•ï¼ˆç¨‹åºå…¥å£ï¼‰</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = {
    println(<span class="hljs-number">4</span>!)  <span class="hljs-comment">// è®¡ç®—4! = 24</span>
    println(<span class="hljs-number">5</span>!)  <span class="hljs-comment">// è®¡ç®—5! = 120</span>
    println(<span class="hljs-number">0</span>!)  <span class="hljs-comment">// è®¡ç®—0! = 1</span>
  }
}
</code></pre>
<h3 data-id="heading-2">äºŒã€å…³é”®è¯­æ³•é€è¡Œè§£æğŸ’•</h3>
<h4 data-id="heading-3">1.Â <code>import scala.language.postfixOps</code></h4>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šæ˜¾å¼å¯ç”¨ Scala çš„ã€Œåç¼€æ“ä½œç¬¦ã€ç‰¹æ€§ã€‚</li>
<li><strong>ä¸ºä»€ä¹ˆéœ€è¦</strong>ï¼šScala é»˜è®¤ç¦ç”¨Â <code>4!</code>Â è¿™ç§ â€œæ“ä½œç¬¦å†™åœ¨å˜é‡åé¢â€ çš„è¯­æ³•ï¼ˆåç¼€æ“ä½œç¬¦ï¼‰ï¼Œå› ä¸ºå®¹æ˜“å¼•å‘æ­§ä¹‰ï¼ˆæ¯”å¦‚Â <code>a b</code>Â å¯èƒ½è¢«è¯¯è§£ä¸ºÂ <code>a.b()</code>Â æˆ–Â <code>a apply b</code>ï¼‰ã€‚<code>!</code>Â åœ¨è¿™é‡Œæ˜¯è‡ªå®šä¹‰çš„åç¼€æ“ä½œç¬¦ï¼Œå¿…é¡»é€šè¿‡è¯¥å¯¼å…¥å£°æ˜å¯ç”¨ï¼Œå¦åˆ™ç¼–è¯‘æŠ¥é”™ã€‚</li>
</ul>
<h4 data-id="heading-4">2.Â <code>implicit class FactorialInt(n: Int)</code></h4>
<ul>
<li>
<p><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼šéšå¼ç±»æ˜¯ Scala 2.10+ å¼•å…¥çš„è¯­æ³•ç³–ï¼Œæœ¬è´¨æ˜¯ã€Œéšå¼å‡½æ•° + æ™®é€šç±»ã€çš„ç»„åˆï¼Œä¸“é—¨ç”¨äºä¸ºç°æœ‰ç±»å‹æ‰©å±•æ–¹æ³•ã€‚</p>
</li>
<li>
<p><strong>è§„åˆ™çº¦æŸ</strong>ï¼š</p>
<ul>
<li>
<p>éšå¼ç±»å¿…é¡»å®šä¹‰åœ¨ã€Œç±» / å¯¹è±¡ / ç‰¹è´¨ã€å†…éƒ¨ï¼ˆä¸èƒ½ç›´æ¥å®šä¹‰åœ¨åŒ…ä¸‹ï¼‰ï¼›</p>
</li>
<li>
<p>æ„é€ å™¨å¿…é¡»åªæœ‰<strong>ä¸€ä¸ªå‚æ•°</strong>ï¼ˆè¿™é‡Œå‚æ•°Â <code>n: Int</code>Â å°±æ˜¯è¦æ‰©å±•çš„ç›®æ ‡ç±»å‹ï¼‰ï¼›</p>
</li>
<li>
<p>ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¸ºéšå¼ç±»ç”Ÿæˆä¸€ä¸ªã€Œéšå¼è½¬æ¢å‡½æ•°ã€ï¼š</p>
<p>scala</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„éšå¼å‡½æ•°ï¼ˆæ— éœ€æ‰‹åŠ¨å†™ï¼‰</span>
<span class="hljs-function">implicit def <span class="hljs-title">intToFactorialInt</span><span class="hljs-params">(n: Int)</span>: FactorialInt =</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">FactorialInt</span>(n)
</code></pre>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-5">3.Â <code>def ! : Int = { ... }</code></h4>
<ul>
<li>
<p><strong>æ–¹æ³•å®šä¹‰</strong>ï¼šå®šä¹‰äº†åä¸ºÂ <code>!</code>Â çš„æ–¹æ³•ï¼ˆæ¨¡æ‹Ÿæ•°å­¦ä¸­çš„é˜¶ä¹˜ç¬¦å·ï¼‰ï¼Œæ— å‚æ•°ã€è¿”å›å€¼ä¸ºÂ <code>Int</code>ã€‚</p>
<ul>
<li>æ³¨æ„ï¼šæ–¹æ³•åçœç•¥äº†ç©ºå‚æ•°åˆ—è¡¨Â <code>()</code>ï¼Œå› ä¸ºåç¼€æ“ä½œç¬¦è°ƒç”¨æ—¶ï¼ˆå¦‚Â <code>4!</code>ï¼‰ä¸å…è®¸å¸¦Â <code>()</code>ï¼Œè‹¥ä¿ç•™Â <code>!()</code>Â åˆ™å¿…é¡»å†™Â <code>4!()</code>ï¼Œä¸ç¬¦åˆé˜¶ä¹˜çš„ç›´è§‚å†™æ³•ã€‚</li>
</ul>
</li>
<li>
<p><strong>é˜¶ä¹˜é€»è¾‘</strong>ï¼š</p>
<ul>
<li>è¾¹ç•Œæ¡ä»¶ï¼š<code>n &lt;= 1</code>Â æ—¶è¿”å› 1ï¼ˆæ•°å­¦å®šä¹‰ï¼š<code>0! = 1</code>ã€<code>1! = 1</code>ï¼‰ï¼›</li>
<li>é€’å½’é€»è¾‘ï¼š<code>n * ((n - 1)!)</code>ï¼Œå³Â <code>n! = n Ã— (n-1)!</code>ï¼ˆæ¯”å¦‚Â <code>5! = 5 Ã— 4!</code>ï¼‰ï¼›</li>
<li>æ‹¬å·Â <code>((n - 1)!)</code>ï¼šé¿å…ä¼˜å…ˆçº§æ­§ä¹‰ï¼ˆä¹˜æ³•Â <code>*</code>Â ä¼˜å…ˆçº§é«˜äºåç¼€æ“ä½œç¬¦Â <code>!</code>ï¼ŒåŠ æ‹¬å·ç¡®ä¿å…ˆç®—Â <code>(n-1)!</code>ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-6">4.Â <code>main</code>Â æ–¹æ³•ï¼ˆç¨‹åºå…¥å£ï¼‰</h4>
<pre><code class="hljs language-scala" lang="scala">println(<span class="hljs-number">4</span>!)  <span class="hljs-comment">// ç¼–è¯‘å™¨æ‰§è¡Œçš„éšå¼è½¬æ¢æµç¨‹ï¼š</span>
<span class="hljs-comment">// 1. å‘ç° 4ï¼ˆIntç±»å‹ï¼‰æ²¡æœ‰ ! æ–¹æ³•ï¼›</span>
<span class="hljs-comment">// 2. æŸ¥æ‰¾ä½œç”¨åŸŸå†…çš„éšå¼è½¬æ¢ï¼Œæ‰¾åˆ° intToFactorialInt(4)ï¼›</span>
<span class="hljs-comment">// 3. å°† 4 è½¬æ¢ä¸º FactorialInt(4) å®ä¾‹ï¼›</span>
<span class="hljs-comment">// 4. è°ƒç”¨è¯¥å®ä¾‹çš„ ! æ–¹æ³•ï¼Œè¿”å› 24ï¼›</span>
<span class="hljs-comment">// 5. åŒç†ï¼Œ5! è¿”å› 120ï¼Œ0! è¿”å› 1ã€‚</span>
</code></pre>
<h3 data-id="heading-7">ä¸‰ã€æ‰§è¡Œç»“æœ &amp; æ ¸å¿ƒç‰¹æ€§æ€»ç»“</h3>
<h4 data-id="heading-8">1. æ‰§è¡Œç»“æœ</h4>
<pre><code class="hljs">24
120
1
</code></pre>
<h4 data-id="heading-9">2. æ ¸å¿ƒç‰¹æ€§ï¼ˆéšå¼ç±»çš„ä»·å€¼ï¼‰</h4>

























<table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ— ä¾µå…¥æ‰©å±•</td><td>æ— éœ€ä¿®æ”¹Â <code>Int</code>Â ç±»çš„æºç ï¼ˆ<code>Int</code>Â æ˜¯ Scala åŸç”Ÿç±»ï¼Œæ— æ³•ä¿®æ”¹ï¼‰ï¼Œå®ç°æ–¹æ³•æ‰©å±•</td></tr><tr><td>è‡ªåŠ¨ç±»å‹è½¬æ¢</td><td>ç¼–è¯‘å™¨è‡ªåŠ¨å®ŒæˆÂ <code>Int â†’ FactorialInt</code>Â çš„è½¬æ¢ï¼Œè°ƒç”¨æ—¶æ— éœ€æ‰‹åŠ¨è½¬æ¢</td></tr><tr><td>è¯­æ³•ç®€æ´</td><td>ç”¨Â <code>4!</code>Â æ›¿ä»£Â <code>new FactorialInt(4).!</code>ï¼Œè´´è¿‘æ•°å­¦é˜¶ä¹˜çš„ä¹¦å†™ä¹ æƒ¯</td></tr><tr><td>ä½œç”¨åŸŸéš”ç¦»</td><td>éšå¼ç±»ä»…åœ¨Â <code>tt</code>Â å¯¹è±¡å†…ç”Ÿæ•ˆï¼Œä¸ä¼šæ±¡æŸ“å…¨å±€å‘½åç©ºé—´</td></tr></tbody></table>
<h3 data-id="heading-10">å››ã€å¸¸è§æ‰©å±• &amp; æ³¨æ„äº‹é¡¹ğŸ’•(âÂ´â—¡`â)</h3>
<h4 data-id="heading-11">1. éé€’å½’å®ç°ï¼ˆé¿å…æ ˆæº¢å‡ºï¼‰</h4>
<p>é€’å½’ç‰ˆé˜¶ä¹˜åœ¨Â <code>n</code>Â è¾ƒå¤§æ—¶ï¼ˆå¦‚Â <code>1000!</code>ï¼‰ä¼šè§¦å‘æ ˆæº¢å‡ºï¼Œå¯æ”¹ä¸ºå¾ªç¯ç‰ˆï¼š</p>
<p>scala</p>
<pre><code class="hljs language-css" lang="css">def ! : Int = {
  <span class="hljs-selector-tag">var</span> result = <span class="hljs-number">1</span>
  for (<span class="hljs-selector-tag">i</span> &lt;- <span class="hljs-number">2</span> <span class="hljs-selector-tag">to</span> n) result *= <span class="hljs-selector-tag">i</span>
  result
}
</code></pre>
<h4 data-id="heading-12">2. æ³¨æ„äº‹é¡¹</h4>
<ul>
<li>éšå¼ç±»çš„æ„é€ å™¨<strong>åªèƒ½æœ‰ä¸€ä¸ªå‚æ•°</strong>ï¼ˆå¤šå‚æ•°ä¼šç¼–è¯‘æŠ¥é”™ï¼‰ï¼›</li>
<li>åç¼€æ“ä½œç¬¦ä»…å»ºè®®ç”¨äºç›´è§‚çš„åœºæ™¯ï¼ˆå¦‚é˜¶ä¹˜Â <code>!</code>ï¼‰ï¼Œé¿å…æ»¥ç”¨å¯¼è‡´ä»£ç å¯è¯»æ€§ä¸‹é™ï¼›</li>
<li>è‹¥ä¸æƒ³å¯ç”¨Â <code>postfixOps</code>ï¼Œå¯å°†æ–¹æ³•åæ”¹ä¸ºÂ <code>factorial</code>ï¼Œè°ƒç”¨æ—¶å†™Â <code>4.factorial</code>ï¼ˆæ›´é€šç”¨ï¼‰ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[redisåŸºç¡€é¢è¯•é¢˜]]></title>    <link>https://juejin.cn/post/7589207843788275747</link>    <guid>https://juejin.cn/post/7589207843788275747</guid>    <pubDate>2025-12-30T03:49:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589207843788275747" data-draft-id="7589207843788111907" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="redisåŸºç¡€é¢è¯•é¢˜"/> <meta itemprop="keywords" content="Redis"/> <meta itemprop="datePublished" content="2025-12-30T03:49:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆé‡Œè°¢é¡¿"/> <meta itemprop="url" content="https://juejin.cn/user/3678304397695056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            redisåŸºç¡€é¢è¯•é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3678304397695056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆé‡Œè°¢é¡¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T03:49:01.000Z" title="Tue Dec 30 2025 03:49:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åŸºäºæƒ³æå‡è‡ªèº«ä»£ç åŸºç¡€çš„è€ƒè™‘ï¼Œä»ç½‘ç»œä¸Šè·å–redisçš„é¢è¯•é¢˜ï¼Œæ¥è¿›è¡Œå¯¹redisåŸºç¡€çš„å­¦ä¹ </p>
<h2 data-id="heading-0">1 redis ä¸ºä»€ä¹ˆå¿«</h2>
<p>Redisçš„é€Ÿåº¦â¾®å¸¸çš„å¿«ï¼Œå•æœºçš„Rediså°±å¯ä»¥â½€æ’‘æ¯ç§’åå‡ ä¸‡çš„å¹¶å‘ï¼Œç›¸å¯¹äºMySQLæ¥è¯´ï¼Œæ€§èƒ½æ˜¯MySQLçš„â¼â¼—å€ã€‚é€Ÿåº¦å¿«çš„åŸå› ä¸»è¦æœ‰â¼ç‚¹ï¼š</p>
<ol>
<li><strong>å®Œå…¨åŸºäºå†…å­˜æ“ä½œ</strong></li>
<li>ä½¿â½¤å•çº¿ç¨‹ï¼Œé¿å…äº†çº¿ç¨‹åˆ‡æ¢å’Œç«æ€äº§ç”Ÿçš„æ¶ˆè€—</li>
<li>åŸºäºâ¾®é˜»å¡çš„IOå¤šè·¯å¤â½¤æœºåˆ¶</li>
<li>Cè¯­â¾”å®ç°ï¼Œä¼˜åŒ–è¿‡çš„æ•°æ®ç»“æ„ï¼ŒåŸºäºâ¼ç§åŸºç¡€çš„æ•°æ®ç»“æ„ï¼Œredisåšäº†â¼¤é‡çš„ä¼˜åŒ–ï¼Œæ€§èƒ½æâ¾¼<br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a582e80f1a3e476b8411856f5ca289f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOI6YeM6LCi6aG_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671341&amp;x-signature=nmnw9dqDKQ9chWtzzZFeHfCkeoU%3D" alt="Redisä½¿ç”¨IOå¤šè·¯å¤ç”¨å’Œè‡ªèº«äº‹ä»¶æ¨¡å‹" loading="lazy"/></li>
</ol>
<h2 data-id="heading-1">2 ä»€ä¹ˆæ˜¯I/Oå¤šè·¯å¤ç”¨</h2>
<p>å¼•ç”¨çŸ¥ä¹ä¸Šä¸€ä¸ªé«˜èµçš„å›ç­”æ¥è§£é‡Šä»€ä¹ˆæ˜¯I/Oå¤šè·¯å¤ç”¨ã€‚å‡è®¾ä½ æ˜¯ä¸€ä¸ªè€å¸ˆï¼Œè®©30ä¸ªå­¦ç”Ÿè§£ç­”ä¸€é“é¢˜ç›®ï¼Œç„¶åæ£€æŸ¥å­¦ç”Ÿåšçš„æ˜¯å¦æ­£ç¡®ï¼Œä½ æœ‰ä¸‹é¢å‡ ä¸ªé€‰æ‹©ï¼š</p>
<ul>
<li>ç¬¬ä¸€ç§é€‰æ‹©ï¼šæŒ‰é¡ºåºé€ä¸ªæ£€æŸ¥ï¼Œå…ˆæ£€æŸ¥Aï¼Œç„¶åæ˜¯Bï¼Œä¹‹åæ˜¯Cã€Dã€‚ã€‚ã€‚è¿™ä¸­é—´å¦‚æœæœ‰ä¸€ä¸ªå­¦ç”Ÿå¡ä½ï¼Œå…¨ç­éƒ½ä¼šè¢«è€½è¯¯ã€‚è¿™ç§æ¨¡å¼å°±å¥½æ¯”ï¼Œä½ ç”¨å¾ªç¯æŒ¨ä¸ªå¤„ç†socketï¼Œæ ¹æœ¬ä¸å…·æœ‰å¹¶å‘èƒ½åŠ›ã€‚</li>
<li>ç¬¬äºŒç§é€‰æ‹©ï¼šä½ åˆ›å»º30ä¸ªåˆ†èº«ï¼Œæ¯ä¸ªåˆ†èº«æ£€æŸ¥ä¸€ä¸ªå­¦ç”Ÿçš„ç­”æ¡ˆæ˜¯å¦æ­£ç¡®ã€‚ è¿™ç§ç±»ä¼¼äºä¸ºæ¯ä¸€ä¸ªç”¨æˆ·åˆ›å»ºä¸€ä¸ªè¿›ç¨‹æˆ–è€…- çº¿ç¨‹å¤„ç†è¿æ¥ã€‚</li>
<li>ç¬¬ä¸‰ç§é€‰æ‹©ï¼Œä½ ç«™åœ¨è®²å°ä¸Šç­‰ï¼Œè°è§£ç­”å®Œè°ä¸¾æ‰‹ã€‚è¿™æ—¶Cã€Dä¸¾æ‰‹ï¼Œè¡¨ç¤ºä»–ä»¬è§£ç­”é—®é¢˜å®Œæ¯•ï¼Œä½ ä¸‹å»ä¾æ¬¡æ£€æŸ¥Cã€Dçš„ç­”æ¡ˆï¼Œç„¶åç»§ç»­å›åˆ°è®²å°ä¸Šç­‰ã€‚æ­¤æ—¶Eã€Aåˆä¸¾æ‰‹ï¼Œç„¶åå»å¤„ç†Eå’ŒAã€‚</li>
</ul>
<p>ç¬¬ä¸€ç§å°±æ˜¯é˜»å¡IOæ¨¡å‹ï¼Œç¬¬ä¸‰ç§å°±æ˜¯I/Oå¤ç”¨æ¨¡å‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d00f83ed65484371a05d059183196135~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZOI6YeM6LCi6aG_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671341&amp;x-signature=MPbKuobcAkJyGFTHCeqOpIW9usA%3D" alt="å¤šè·¯å¤ç”¨æ¨¡å‹" loading="lazy"/></p>
<p>Linuxç³»ç»Ÿæœ‰ä¸‰ç§æ–¹å¼å®ç°IOå¤šè·¯å¤ç”¨ï¼šselectã€pollå’Œepollã€‚</p>
<p>ä¾‹å¦‚epollæ–¹å¼æ˜¯å°†ç”¨æˆ·socketå¯¹åº”çš„fdæ³¨å†Œè¿›epollï¼Œç„¶åepollå¸®ä½ ç›‘å¬å“ªäº›socketä¸Šæœ‰æ¶ˆæ¯åˆ°è¾¾ï¼Œè¿™æ ·å°±é¿å…äº†å¤§é‡çš„æ— ç”¨æ“ä½œã€‚æ­¤æ—¶çš„socketåº”è¯¥é‡‡ç”¨éé˜»å¡æ¨¡å¼ã€‚</p>
<p>è¿™æ ·ï¼Œæ•´ä¸ªè¿‡ç¨‹åªåœ¨è¿›è¡Œselectã€pollã€epollè¿™äº›è°ƒç”¨çš„æ—¶å€™æ‰ä¼šé˜»å¡ï¼Œæ”¶å‘å®¢æˆ·æ¶ˆæ¯æ˜¯ä¸ä¼šé˜»å¡çš„ï¼Œæ•´ä¸ªè¿›ç¨‹æˆ–è€…çº¿ç¨‹å°±è¢«å……åˆ†åˆ©ç”¨èµ·æ¥ï¼Œè¿™å°±æ˜¯äº‹ä»¶é©±åŠ¨ï¼Œæ‰€è°“çš„reactoræ¨¡å¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®© AI åˆ†ææˆ‘ 3 å¹´å‰å†™çš„ä»£ç ï¼Œå…¨æ˜¯æ¼æ´ï¼]]></title>    <link>https://juejin.cn/post/7589166195797917723</link>    <guid>https://juejin.cn/post/7589166195797917723</guid>    <pubDate>2025-12-30T03:48:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589166195797917723" data-draft-id="7589194558287708198" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®© AI åˆ†ææˆ‘ 3 å¹´å‰å†™çš„ä»£ç ï¼Œå…¨æ˜¯æ¼æ´ï¼"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜,ä»£ç è§„èŒƒ,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-30T03:48:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜é±¼çš®"/> <meta itemprop="url" content="https://juejin.cn/user/2444938365386621"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®© AI åˆ†ææˆ‘ 3 å¹´å‰å†™çš„ä»£ç ï¼Œå…¨æ˜¯æ¼æ´ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2444938365386621/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜é±¼çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T03:48:57.000Z" title="Tue Dec 30 2025 03:48:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œä¿ºæ˜¯ç¨‹åºå‘˜é±¼çš®ã€‚æœ€è¿‘é€› GitHub çš„æ—¶å€™ï¼Œå‘ç°äº†ä¸€ä¸ªæŒºæœ‰æ½œåŠ›çš„å¼€æºé¡¹ç›® â€”â€” DeepAuditï¼Œè®© AI å¸®ä½ æŒ–æ˜é¡¹ç›®æ¼æ´ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82ce9f55e33b4ca0a84cd41b5a6bba86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=Z9AtDPCDQOGpjqK%2FnmLvBpvcsXM%3D" alt="" loading="lazy"/></p>
<p>åŠ¿å¤´å¾ˆçŒ›å•Šï¼ŒçŸ­çŸ­æ—¶é—´å°±æ¶¨äº†ä¸å°‘ starï¼Œçœ‹è¿™ star è¶‹åŠ¿å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ed37cd6bf294dc4abe3786f879e80f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=YVMJFqfnZsUbpgN8NFvC0ZT8%2BQ0%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸€ä¸ª AI ä»£ç å®¡è®¡å·¥å…·ï¼Œèƒ½è‡ªåŠ¨åˆ†æä½ çš„ä»£ç ï¼Œæ‰¾å‡ºæ½œåœ¨çš„å®‰å…¨æ¼æ´å’Œä»£ç é—®é¢˜ã€‚</p>
<p>ä½œè€…å¾ˆè´´å¿ƒåœ°æä¾›äº†åœ¨çº¿ä½“éªŒç‰ˆï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå½“ç„¶ä¹Ÿæ”¯æŒæœ¬åœ°éƒ¨ç½²ã€‚ä¸‹é¢é±¼çš®ä»¥ä½œè€…éƒ¨ç½²çš„åœ¨çº¿ä½“éªŒç‰ˆï¼Œå¸¦å¤§å®¶ä½“éªŒä¸€ä¸‹è¿™ä¸ªé¡¹ç›®çš„åŠŸèƒ½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e089e7aeb3db4793aabaca6291d56b92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=GUSi04DMHsrMIKTjxdtper%2FF3DY%3D" alt="" loading="lazy"/></p>
<p>é¦–å…ˆéœ€è¦é…ç½®è‡ªå·±çš„å¤§æ¨¡å‹ API Keyï¼Œå›½å†…çš„å¾ˆå¤šå¤§æ¨¡å‹éƒ½æ”¯æŒï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9082baca18e4421bd3741416e6ff8c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=eqEx6qZYvXS1YNRQ%2BtG1GM9Nvw0%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœæƒ³ç›´æ¥å¯¼å…¥å¹¶åˆ†æä½ åœ¨ GitHub ä¸Šçš„é¡¹ç›®ï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨ä¸Šä¼ ä»£ç ï¼Œé‚£ä¹ˆè¿˜éœ€è¦é…ç½® GitHub Tokenï¼Œè®©å·¥å…·èƒ½å¤Ÿè¯»å–åˆ°ä½ çš„ä»“åº“ä»£ç ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb6c93b116da457688a0bb594987cee4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=dFGTAw6syVguDHsVMcxQTtNExLs%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥åœ¨ GitHub ä¸Šç”Ÿæˆä¸€ä¸ªæ–°çš„ Tokenï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64f5e2aab4674a7a8b2e7baaa39a607d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=z7LI2dOulL%2BSi5LnKvNGsLoIejs%3D" alt="" loading="lazy"/></p>
<p>é…ç½®å¥½ä¹‹åï¼Œå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªè¦åˆ†æçš„é¡¹ç›®äº†ï¼Œä»“åº“åœ°å€è¦å¡«å†™æ­£ç¡®ã€‚è¿™é‡Œé±¼çš®æ‹¿è‡ªå·± 3 å¹´å‰åšçš„ä¸ªäººå¼€æºé¡¹ç›® â€”â€” SQL ä»£ç å’Œæ•°æ®ç”Ÿæˆå™¨è¯•è¯•æ°´ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec1d772f358f493eb80760377ed15b91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=DgRaazmZQR%2FTOIOxe7k3bowfv8c%3D" alt="åˆ›å»ºæ–°é¡¹ç›®" loading="lazy"/></p>
<p>ç„¶åæ–°å»ºä¸€ä¸ªå®¡è®¡ä»»åŠ¡ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7aef4cd1bf9b4198bf66e826b5076e88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=bnqfX%2BcBKreAhb4RE0AdIMtsPe4%3D" alt="" loading="lazy"/></p>
<p>å¡«å†™è¦åˆ†æçš„åˆ†æ”¯ï¼Œè¿˜å¯ä»¥è®¾ç½®ä¸€äº›æ–‡ä»¶æ’é™¤è§„åˆ™ï¼Œæ¯”å¦‚æ’é™¤ <code>node_modules</code>ã€æµ‹è¯•æ–‡ä»¶ç­‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6a2cdc9a69846c183d6361dbd488ded~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=i25saiNoPDSIV5u8CMjtEenOhKs%3D" alt="" loading="lazy"/></p>
<p>ç‚¹å‡»å¼€å§‹åˆ†æï¼ŒAI å°±å±é¢ å„¿å±é¢ å„¿å¹²æ´»äº†~</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1c4a8369eee464a9deb2b3089dca197~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=mPNPU0V5jgi9kIvJ4qI7vi8%2BtXg%3D" alt="" loading="lazy"/></p>
<p>æˆ‘å»ï¼Œç«Ÿç„¶å‘ç°äº† 123 ä¸ªé—®é¢˜ï¼Ÿï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/057213746dfa4764890e0c2c2a4203a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=mgb87ms3ipWfKdpAVZYTQhYq77s%3D" alt="" loading="lazy"/></p>
<p>ä¸è¿‡èƒ½å†™å‡º 123 ä¸ªé—®é¢˜ï¼Œæˆ‘æ„Ÿè§‰è‡ªå·±ä¹Ÿæ˜¯æŒºå‰å®³çš„å“ˆå“ˆå“ˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e4c36009bf14d2bbf82caa88f123421~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=iqOId77xo5YUU2PPK0JrduB8XBc%3D" alt="" loading="lazy"/></p>
<p>è¿›å…¥ä»»åŠ¡è¯¦æƒ…é¡µé¢ï¼Œæˆ‘å€’è¦çœ‹çœ‹éƒ½æ˜¯ä»€ä¹ˆé—®é¢˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e0def0ec6564dfdae0883961c7b55e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=quy%2Fl8484gzZW47YuqaPaKSBD7Q%3D" alt="" loading="lazy"/></p>
<p>å…ˆçœ‹çœ‹æœ€ä¸¥é‡çš„ â€”â€” SQL æ³¨å…¥æ¼æ´ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a322f03d786e4c8db50426a740cf0592~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=v%2B7SDsy19MpqFvPr401%2BqKmveqw%3D" alt="" loading="lazy"/></p>
<p>AI çš„è§£é‡Šè¿˜æŒºåˆ°ä½çš„ï¼Œç¡®å®å­˜åœ¨ SQL æ³¨å…¥é£é™©ã€‚å½“æ—¶è¿™ä¹ˆå†™çº¯å±å›¾æ–¹ä¾¿ï¼Œæ²¡æƒ³åˆ°è¢« AI ä¸€çœ¼çœ‹ç©¿äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a9e6b1c379541b0860bf4e55bb33f2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=LKY9t2at8wBp2E0UQf%2B9sxDybVs%3D" alt="" loading="lazy"/></p>
<p>ä¸€äº›å°ç»†èŠ‚ä¹Ÿè¢«æŒ‡å‡ºæ¥äº†ï¼Œæ¯”å¦‚ç¡¬ç¼–ç ã€å¼‚å¸¸å¤„ç†ä¸å¤Ÿå®Œå–„ã€æ—¥å¿—è®°å½•ä¸è§„èŒƒç­‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2db47d441591496997c6b38afb1fa2f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=qacv3%2B9jVo8WOCa8OrNJjyjQ3UU%3D" alt="" loading="lazy"/></p>
<p>ä¸è¿‡ä¹Ÿæœ‰ä¸€äº›è¯¯æŠ¥ï¼ŒAI æŠŠæ­£å¸¸çš„ä»£ç é€»è¾‘åˆ¤æ–­æˆäº†é—®é¢˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/273325e6d16f4bab809828adb2c7c326~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=gjEFDhdHSEoWZ6c%2BjUMWG0f6j98%3D" alt="" loading="lazy"/></p>
<p>æ€»ä½“æ¥è¯´ï¼Œè¿™ä¸ªå·¥å…·è¿˜æœ‰è¿›æ­¥ç©ºé—´ï¼Œä½†å·²ç»å¾ˆå®ç”¨äº†ã€‚æ­£å¥½æˆ‘ä»¬å›¢é˜Ÿéœ€è¦è¿™æ ·çš„ä»£ç å®¡è®¡å·¥å…·ï¼Œè¿˜æ˜¯æŒºæœŸå¾…ä½œè€…èƒ½è¿›ä¸€æ­¥å®Œå–„çš„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af4e4c578bb54ecaa95299e8b1ff3fe0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=xyPWgZfA8Tml5ukdZytgIjUIBN8%3D" alt="" loading="lazy"/></p>
<p>å®¡è®¡å®Œæˆåï¼Œè¿˜å¯ä»¥ç›´æ¥å¯¼å‡ºæŠ¥å‘Šï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d2b3bbe99884357bba2a13a0b3611a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=Z9k%2BW5r4I8FmVNSx8mhZKxzWQXs%3D" alt="" loading="lazy"/></p>
<p>ä¸€ä¸‹å­å°±å¾—åˆ°äº†æ•´æ•´ 70 å¤šé¡µçš„ä¸“ä¸šæŠ¥å‘Šï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce76163c65c34e61afe656c488fcca61~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=Vgni0EorZMbDMwUAdIZSW4tkkLg%3D" alt="" loading="lazy"/></p>
<p>æƒ³æƒ³æˆ‘å¤§å­¦çš„æ—¶å€™åšè¯¾è®¾ä½œä¸šï¼Œè¦æ˜¯æœ‰ AI å¸®å¿™ç”Ÿæˆè¿™ç§æŠ¥å‘Šï¼Œä¸å¾—çˆ½é£è¾¹å­äº†ï¼Ÿ</p>
<p>é™¤äº†é¡¹ç›®å®¡è®¡ï¼Œä½œè€…è¿˜æä¾›äº†å³æ—¶åˆ†æåŠŸèƒ½ã€‚ä¸è¿‡è¿™ä¸ªå°±æ²¡ä»€ä¹ˆæ–°æ„äº†ï¼Œæˆ‘ä»¬å›¢é˜Ÿçš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcodecopy.cn%2F" target="_blank" title="https://codecopy.cn/" ref="nofollow noopener noreferrer">ä»£ç å°æŠ„</a>åœ¨ 24 å¹´åˆå°±å·²ç»ä¸Šçº¿äº†è¿™ä¸ªåŠŸèƒ½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eaf5bece523543bbbb3a2dea800aae29~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=rUfd8Ox5oH%2B9QV2anW0v8nMRf3M%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä½“éªŒè¿™ä¸ªé¡¹ç›®çš„æ—¶å€™ï¼Œè¿˜æœ‰å¾ˆå¤šåŠŸèƒ½æ²¡åšå®Œï¼Œä¸è¿‡è¿™ä¹Ÿæ˜¯ MVP æœ€å°å¯è¡Œäº§å“åŸåˆ™å˜›ï¼Œå¿«é€ŸéªŒè¯æƒ³æ³•æœ€é‡è¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d2a514e0d6d4727bc33e591ab2e7113~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=qLgD%2BMgancWFUFHZJzazjrCYEpw%3D" alt="" loading="lazy"/></p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä½œè€…æ›´æ–°éå¸¸é¢‘ç¹ã€‚æˆªæ­¢åˆ°ç›®å‰ï¼Œé¡¹ç›®ç•Œé¢å·²ç»ç„•ç„¶ä¸€æ–°äº†ï¼Œæ›´æœ‰æå®¢èŒƒå„¿ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dcc6ba8991ff4cefa4a51253640502e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=jzCjNY3nxufTFEfAr0wUc0Z5AsE%3D" alt="" loading="lazy"/></p>
<p>åœ¨å®¡è®¡æµæ—¥å¿—é¡µé¢å¯ä»¥çœ‹åˆ° AI æ€è€ƒåˆ†æçš„è¿‡ç¨‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/541f377ba68a48e6820bcb1dedd89d8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=XGASWpH5doDuZJX6Zjic2pWYD88%3D" alt="" loading="lazy"/></p>
<p>è¿˜æœ‰æ™ºèƒ½ä»ªè¡¨ç›˜ï¼Œå¯ä»¥ç›´è§‚åœ°çœ‹åˆ°ä»£ç è´¨é‡è¶‹åŠ¿ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d915b863adf6426795a91de3a86669b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=3hX4mwpQdMIL3t9D9UlqGKkytos%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">æœ€å</h2>
<p>è¿™ä¸ªé¡¹ç›®çš„å®ç°æ€è·¯å…¶å®æŒºå€¼å¾—å­¦ä¹ çš„ã€‚é€šè¿‡è°ƒç”¨å¤§æ¨¡å‹çš„ APIï¼Œè®© AI ç†è§£ä»£ç é€»è¾‘ï¼Œç„¶åæ ¹æ®å¸¸è§çš„å®‰å…¨æ¼æ´æ¨¡å¼å’Œæœ€ä½³å®è·µè¿›è¡Œåˆ†æï¼Œæœ€åç”Ÿæˆç»“æ„åŒ–çš„å®¡è®¡æŠ¥å‘Šã€‚æ•´ä¸ªæµç¨‹å’Œ AI ä»£ç å®¡æŸ¥æ˜¯ç±»ä¼¼çš„ï¼Œä½†æ›´ä¸“æ³¨äºå®‰å…¨æ¼æ´çš„å‘ç°ã€‚</p>
<p><img src="https://pic.yupi.icu/1/%25E6%259E%25B6%25E6%259E%2584%25E5%259B%25BE.png" alt="DeepAudit æ¶æ„å›¾" loading="lazy"/></p>
<p>å¯¹äºä¸ªäººå¼€å‘è€…æ¥è¯´ï¼Œè¿™ç±»å·¥å…·å¯ä»¥å¸®ä½ åœ¨æäº¤ä»£ç å‰å‘ç°æ½œåœ¨é—®é¢˜ï¼Œæ‹¿æ¥æ£€æµ‹ä¸€ä¸‹è‡ªå·±ä¹‹å‰çš„è€é¡¹ç›®ä»£ç ä¹Ÿæ˜¯ä¸é”™çš„ï¼›å¯¹äºå›¢é˜Ÿæ¥è¯´ï¼Œå¯ä»¥æŠŠ AI æ¥å…¥åˆ° CI/CD æµç¨‹ä¸­ï¼Œè‡ªåŠ¨åŒ–ä»£ç å®‰å…¨æ£€æŸ¥ã€‚è™½ç„¶æœ¬é¡¹ç›®æš‚æ—¶è¿˜æœ‰è¯¯æŠ¥ï¼Œä½†éšç€ AI èƒ½åŠ›çš„æå‡ï¼Œä»¥åŠä½œè€…åœ¨é¢†åŸŸçŸ¥è¯†æ–¹é¢çš„å¡«å……ï¼Œç›¸ä¿¡ä¼šè¶Šæ¥è¶Šå‡†ç¡®ã€‚</p>
<p>æ¥è¯•è¯•çœ‹ï¼Œä½ çš„é¡¹ç›®ä»£ç é‡Œæœ‰å¤šå°‘ä¸ª Bugï¼Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21b51aacd4ee42cfb1159a394a162f73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6bG855qu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767671336&amp;x-signature=lbr2m6qV0oYb76L3iCdBtvJWKUc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">æ›´å¤š</h2>
<p>ğŸ’» ç¼–ç¨‹å­¦ä¹ äº¤æµï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fcode-nav" target="_blank" title="https://github.com/liyupi/code-nav" ref="nofollow noopener noreferrer">ç¼–ç¨‹å¯¼èˆª</a> ğŸ“ƒ ç®€å†å¿«é€Ÿåˆ¶ä½œï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Flaoyujianli" target="_blank" title="https://github.com/liyupi/laoyujianli" ref="nofollow noopener noreferrer">è€é±¼ç®€å†</a> âœï¸ é¢è¯•åˆ·é¢˜ç¥å™¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliyupi%2Fmianshiya" target="_blank" title="https://github.com/liyupi/mianshiya" ref="nofollow noopener noreferrer">é¢è¯•é¸­</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸Šæ¶è‹¹æœApp Storeæ—¶å¼€å‘è€…å¸¸å¿½ç•¥çš„15ä¸ªé—®é¢˜åŠè§£å†³æ–¹æ³•]]></title>    <link>https://juejin.cn/post/7589275237037146147</link>    <guid>https://juejin.cn/post/7589275237037146147</guid>    <pubDate>2025-12-30T03:55:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589275237037146147" data-draft-id="7589308109639958563" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸Šæ¶è‹¹æœApp Storeæ—¶å¼€å‘è€…å¸¸å¿½ç•¥çš„15ä¸ªé—®é¢˜åŠè§£å†³æ–¹æ³•"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-30T03:55:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼€å¿ƒçŒ´çˆ·"/> <meta itemprop="url" content="https://juejin.cn/user/2179705232165364"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸Šæ¶è‹¹æœApp Storeæ—¶å¼€å‘è€…å¸¸å¿½ç•¥çš„15ä¸ªé—®é¢˜åŠè§£å†³æ–¹æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2179705232165364/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼€å¿ƒçŒ´çˆ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T03:55:33.000Z" title="Tue Dec 30 2025 03:55:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸Šæ¶è‹¹æœAppå•†åŸæ—¶å®¹æ˜“å¿½ç•¥çš„é—®é¢˜</p>
<p>åœ¨ä¸Šæ¶è‹¹æœAppå•†åŸçš„è¿‡ç¨‹ä¸­ï¼Œå¼€å‘è€…å¾€å¾€éœ€è¦é¢å¯¹è‹¹æœå…¬å¸æå…¶ä¸¥æ ¼ä¸”ä¸æ–­æ›´æ–°çš„å®¡æ ¸æ ‡å‡†ä½“ç³»ã€‚æ®è‹¹æœå®˜æ–¹æ•°æ®æ˜¾ç¤ºï¼Œçº¦æœ‰30%çš„Appåˆæ¬¡æäº¤ä¼šå› å„ç±»ç»†èŠ‚é—®é¢˜è¢«æ‹’ç»ï¼Œå…¶ä¸­è®¸å¤šçœ‹ä¼¼å¾®å°çš„ç–æ¼éƒ½å¯èƒ½å¯¼è‡´å®¡æ ¸å¤±è´¥ã€ä¸Šæ¶å»¶è¿Ÿç”šè‡³åº”ç”¨ä¸‹æ¶çš„é£é™©ã€‚è¿™äº›æ ‡å‡†ä¸ä»…æ¶µç›–æŠ€æœ¯æ€§èƒ½ã€å†…å®¹åˆè§„ç­‰åŸºç¡€ç»´åº¦ï¼Œè¿˜å»¶ä¼¸è‡³ç”¨æˆ·éšç§ä¿æŠ¤ã€æ— éšœç¢è®¾è®¡ã€å•†ä¸šæ¨¡å¼é€æ˜åº¦ç­‰æ·±å±‚è¦æ±‚ï¼Œä¸”å®¡æ ¸å›¢é˜Ÿä¼šç»“åˆå¸‚åœºåé¦ˆåŠ¨æ€è°ƒæ•´è¯„ä¼°å°ºåº¦ã€‚ä»¥ä¸‹æ˜¯ç»è¿‡å¤§é‡å¼€å‘è€…å®è·µéªŒè¯åæ€»ç»“å‡ºçš„ã€æœ€å®¹æ˜“è¢«å¿½è§†ä½†å¯¹å®¡æ ¸ç»“æœè‡³å…³é‡è¦çš„æ³¨æ„äº‹é¡¹æ¸…å•ï¼š</p>
<p>1.Â <strong>éšç§æ”¿ç­–é“¾æ¥ç¼ºå¤±æˆ–å†…å®¹ä¸å®Œå–„</strong></p>
<p>æœªåœ¨App Store Connectåå°æˆ–åº”ç”¨å†…æ˜¾è‘—ä½ç½®æä¾›æœ‰æ•ˆçš„éšç§æ”¿ç­–é“¾æ¥ï¼Œå°¤å…¶æ˜¯æ¶‰åŠç”¨æˆ·æ•°æ®æ”¶é›†ã€å­˜å‚¨æˆ–å…±äº«çš„Appï¼Œè‹¹æœè¦æ±‚å¿…é¡»æ˜ç¡®è¯´æ˜æ•°æ®æ”¶é›†çš„ç±»å‹ã€ä½¿ç”¨ç›®çš„ã€å­˜å‚¨æœŸé™åŠç¬¬ä¸‰æ–¹å…±äº«æƒ…å†µã€‚éšç§æ”¿ç­–éœ€ç¬¦åˆå…¨çƒå„åœ°æ³•è§„ï¼ˆå¦‚GDPRã€CCPAç­‰ï¼‰ï¼Œä¸”å†…å®¹éœ€ä¸å®é™…æ•°æ®å¤„ç†è¡Œä¸ºä¸€è‡´ï¼Œé¿å…å‡ºç°æ¨¡ç³Šè¡¨è¿°æˆ–è™šå‡æ‰¿è¯ºã€‚</p>
<p>2.Â <strong>åº”ç”¨æˆªå›¾ä¸ç¬¦åˆè§„èŒƒ</strong></p>
<p>æˆªå›¾å°ºå¯¸ä¸æ­£ç¡®ã€åŒ…å«éå®˜æ–¹å…ƒç´ ï¼ˆå¦‚å…¶ä»–å¹³å°çš„æ ‡è¯†ï¼‰æˆ–ä¸å®é™…åº”ç”¨ç•Œé¢ä¸ç¬¦ï¼Œå¯èƒ½å¯¼è‡´å®¡æ ¸è¢«æ‹’ã€‚ä½¿ç”¨AppUploaderå¯ä»¥æ–¹ä¾¿åœ°ä¸Šä¼ å’Œç®¡ç†åº”ç”¨æˆªå›¾ï¼Œç¡®ä¿å®ƒä»¬ç¬¦åˆè‹¹æœçš„è§„èŒƒè¦æ±‚ã€‚</p>
<p>3.Â <strong>ç¼ºå°‘è¯¦ç»†çš„Appæè¿°</strong></p>
<p>åº”ç”¨æè¿°è¿‡äºç®€ç•¥ï¼Œæœªèƒ½æ¸…æ™°è¯´æ˜æ ¸å¿ƒåŠŸèƒ½ã€ç›®æ ‡ç”¨æˆ·åŠä½¿ç”¨åœºæ™¯ï¼Œå½±å“å®¡æ ¸äººå‘˜å¯¹Appçš„ç†è§£ã€‚</p>
<p>4.Â <strong>æœªé€‚é…æœ€æ–°iOSç‰ˆæœ¬</strong></p>
<p>Appæœªé’ˆå¯¹æœ€æ–°çš„iOSç³»ç»Ÿè¿›è¡Œä¼˜åŒ–ï¼Œå¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜æˆ–æ— æ³•æ­£å¸¸è¿è¡Œçš„æƒ…å†µã€‚</p>
<p>5.Â <strong>æƒé™è¯·æ±‚ä¸åˆç†</strong></p>
<p>è¯·æ±‚äº†ä¸å¿…è¦çš„ç”¨æˆ·æƒé™ï¼ˆå¦‚è®¿é—®ç…§ç‰‡ã€ä½ç½®ç­‰ï¼‰ï¼Œä½†æœªåœ¨Appä¸­å®é™…ä½¿ç”¨è¿™äº›æƒé™ï¼Œè¿åè‹¹æœçš„æƒé™ç®¡ç†è§„å®šã€‚</p>
<p>6.Â <strong>æµ‹è¯•è´¦å·ä¿¡æ¯æœªæä¾›</strong></p>
<p>å¦‚æœAppéœ€è¦ç™»å½•æ‰èƒ½ä½“éªŒå®Œæ•´åŠŸèƒ½ï¼Œæœªæä¾›æµ‹è¯•è´¦å·å’Œå¯†ç å¯èƒ½å¯¼è‡´å®¡æ ¸äººå‘˜æ— æ³•å…¨é¢è¯„ä¼°Appã€‚AppUploaderæ”¯æŒæµ‹è¯•è®¾å¤‡UDIDç®¡ç†å’ŒIPAå®‰è£…æµ‹è¯•ï¼Œæ–¹ä¾¿å¼€å‘è€…æä¾›æµ‹è¯•è´¦å·è¿›è¡Œå®¡æ ¸ã€‚</p>
<p>7.Â <strong>å†…è´­é¡¹ç›®é…ç½®é”™è¯¯</strong></p>
<p>å¯¹äºåŒ…å«å†…è´­åŠŸèƒ½çš„Appï¼Œæœªæ­£ç¡®é…ç½®å†…è´­é¡¹ç›®æˆ–ä»·æ ¼è®¾ç½®ä¸å½“ï¼Œå¯èƒ½å¼•å‘å®¡æ ¸å¤±è´¥ã€‚AppUploaderæä¾›äº†å†…è´­æœ¬åœ°åŒ–ä¿¡æ¯æ‰¹é‡ä¸Šä¼ åŠŸèƒ½ï¼Œå¸®åŠ©æ­£ç¡®é…ç½®å†…è´­å†…å®¹ã€‚</p>
<p>8.Â <strong>è¿åè®¾è®¡è§„èŒƒ</strong></p>
<p>ç•Œé¢è®¾è®¡ä¸ç¬¦åˆè‹¹æœçš„äººæœºäº¤äº’æŒ‡å—ï¼ˆHuman Interface Guidelinesï¼‰ï¼Œä¾‹å¦‚æŒ‰é’®è¿‡å°ã€æ’ç‰ˆæ··ä¹±ç­‰é—®é¢˜ã€‚</p>
<p>9.Â <strong>æœªå¤„ç†æ•æ„Ÿå†…å®¹</strong></p>
<p>åŒ…å«æ•æ„Ÿå†…å®¹ï¼ˆå¦‚æš´åŠ›ã€æ”¿æ²»ã€è‰²æƒ…ç­‰ï¼‰æˆ–æœªæŒ‰è¦æ±‚åŠ å…¥å¹´é¾„åˆ†çº§é™åˆ¶ï¼Œå¯èƒ½å¯¼è‡´ç›´æ¥æ‹’ç»ã€‚</p>
<p>10.Â <strong>æ¨é€é€šçŸ¥æ»¥ç”¨</strong></p>
<p>æœªç»ç”¨æˆ·åŒæ„é¢‘ç¹å‘é€æ¨é€é€šçŸ¥ï¼Œæˆ–æ¨é€å†…å®¹ä¸ç¬¦åˆè‹¹æœçš„è§„å®šï¼Œä¼šå¼•å‘ç”¨æˆ·ä½“éªŒé—®é¢˜å¹¶å¯¼è‡´å®¡æ ¸å—é˜»ã€‚</p>
<p>11.Â <strong>æ–‡ä»¶ä½“ç§¯è¿‡å¤§</strong></p>
<p>å¦‚æœAppå®‰è£…åŒ…è¶…è¿‡è‹¹æœæ¨èçš„å¤§å°é™åˆ¶ï¼ˆé€šå¸¸ä¸º200MBï¼‰ï¼Œéœ€ç¡®ä¿é€šè¿‡èœ‚çªç½‘ç»œä¸‹è½½æ—¶ä¸ä¼šå½±å“ç”¨æˆ·ä½“éªŒã€‚</p>
<p>12.Â <strong>å…ƒæ•°æ®ä¸ä¸€è‡´</strong></p>
<p>Appæ ‡é¢˜ã€å…³é”®è¯ã€åˆ†ç±»ç­‰å…ƒæ•°æ®ä¹‹é—´å­˜åœ¨çŸ›ç›¾æˆ–æ¨¡ç³Šè¡¨è¿°ï¼Œä¼šè®©å®¡æ ¸å›¢é˜Ÿéš¾ä»¥åˆ¤æ–­å…¶çœŸå®ç”¨é€”ã€‚AppUploaderå…è®¸æ‰¹é‡ä¸Šä¼ åº”ç”¨å…ƒæ•°æ®ï¼Œå¦‚æè¿°å…³é”®è¯å’Œå¤šè¯­è¨€ç‰ˆæœ¬ï¼Œç¡®ä¿ä¸€è‡´æ€§ã€‚</p>
<p>13.Â <strong>ç¼ºä¹æ³•å¾‹åˆè§„å£°æ˜</strong></p>
<p>æ¶‰åŠç‰ˆæƒã€å•†æ ‡æˆ–å…¶ä»–æ³•å¾‹ç›¸å…³çš„å†…å®¹æ—¶ï¼Œæœªé™„å¸¦å¿…è¦çš„å£°æ˜æˆ–è¯æ˜ææ–™ï¼Œå®¹æ˜“å¼•å‘æ³•å¾‹é£é™©ã€‚</p>
<p>14.Â <strong>å¿½è§†å¤šè¯­è¨€æ”¯æŒ</strong></p>
<p>è‹¥ç›®æ ‡å¸‚åœºåŒ…å«å¤šä¸ªå›½å®¶/åœ°åŒºï¼Œæœªæä¾›ç›¸åº”çš„å¤šè¯­è¨€æ”¯æŒï¼Œä¼šä½¿éƒ¨åˆ†ç”¨æˆ·éš¾ä»¥ç†è§£Appå†…å®¹ã€‚</p>
<p>15.Â <strong>æœªè§£å†³å´©æºƒé—®é¢˜</strong></p>
<p>åœ¨æµ‹è¯•é˜¶æ®µå‘ç°çš„ä»»ä½•å´©æºƒæˆ–å¡é¡¿ç°è±¡æœªå½»åº•ä¿®å¤ï¼Œå°†ä¸¥é‡å½±å“å®¡æ ¸é€šè¿‡ç‡ã€‚</p>
<p>ä»¥ä¸Šé—®é¢˜å‡éœ€åœ¨æäº¤å‰ä»”ç»†æ£€æŸ¥ï¼Œä»¥æé«˜AppæˆåŠŸä¸Šæ¶çš„æ¦‚ç‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Scala æŠ€å·§ã€‘ç”¨éšå¼ç±»ç»™ String â€œå¼€æŒ‚â€ï¼šä¸€è¡Œä»£ç å®ç°æ‰‹æœºå· / èº«ä»½è¯å·æ ¡éªŒ]]></title>    <link>https://juejin.cn/post/7589207843788161059</link>    <guid>https://juejin.cn/post/7589207843788161059</guid>    <pubDate>2025-12-30T03:28:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589207843788161059" data-draft-id="7589186347585814562" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Scala æŠ€å·§ã€‘ç”¨éšå¼ç±»ç»™ String â€œå¼€æŒ‚â€ï¼šä¸€è¡Œä»£ç å®ç°æ‰‹æœºå· / èº«ä»½è¯å·æ ¡éªŒ"/> <meta itemprop="keywords" content="Scala"/> <meta itemprop="datePublished" content="2025-12-30T03:28:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»£ç äºè€æ€»"/> <meta itemprop="url" content="https://juejin.cn/user/582105100725436"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Scala æŠ€å·§ã€‘ç”¨éšå¼ç±»ç»™ String â€œå¼€æŒ‚â€ï¼šä¸€è¡Œä»£ç å®ç°æ‰‹æœºå· / èº«ä»½è¯å·æ ¡éªŒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/582105100725436/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»£ç äºè€æ€»
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T03:28:38.000Z" title="Tue Dec 30 2025 03:28:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œä»Šå¤©åˆ†äº« Scala ä¸­<strong>éšå¼ç±»ï¼ˆimplicit classï¼‰</strong> Â çš„å®ç”¨å°æŠ€å·§ï¼šåªç”¨å‡ è¡Œä»£ç ï¼Œå°±èƒ½ç»™åŸç”Ÿ<code>String</code>ç±»å‹ â€œæ³¨å…¥â€ æ‰‹æœºå·ã€èº«ä»½è¯å·æ ¡éªŒåŠŸèƒ½ï¼Œè®©å­—ç¬¦ä¸²è‡ªå·±å°±èƒ½åˆ¤æ–­åˆæ³•æ€§ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å…ˆçœ‹æ•ˆæœï¼šå­—ç¬¦ä¸²è‡ªå·±ä¼š â€œéªŒèº«â€ äº†</h2>
<p>å¹³æ—¶æˆ‘ä»¬æ ¡éªŒæ‰‹æœºå·ï¼Œå¯èƒ½è¦å†™ä¸ªå·¥å…·ç±» + é™æ€æ–¹æ³•ï¼Œæ¯”å¦‚<code>CheckUtil.isPhone(str)</code>ã€‚ä½†ç”¨ Scala éšå¼ç±»ï¼Œ<code>String</code>è‡ªå·±å°±èƒ½ç›´æ¥è°ƒæ–¹æ³•ï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-comment">// ç›´æ¥è®©å­—ç¬¦ä¸²è°ƒç”¨isPhone/isIDCard</span>
println(<span class="hljs-string">"13617295643"</span>.isPhone)          <span class="hljs-comment">// trueï¼ˆåˆæ³•æ‰‹æœºå·ï¼‰</span>
println(<span class="hljs-string">"429005202011012231"</span>.isIDCard) <span class="hljs-comment">// trueï¼ˆåˆæ³•èº«ä»½è¯ï¼‰</span>
println(<span class="hljs-string">"136567891a"</span>.isPhone)          <span class="hljs-comment">// falseï¼ˆå«å­—æ¯ï¼‰</span>
</code></pre>
<p>æ˜¯ä¸æ˜¯å¾ˆä¸æ»‘ï¼Ÿè¿™èƒŒåå°±æ˜¯ Scala çš„<strong>éšå¼ç±»</strong>åœ¨èµ·ä½œç”¨ã€‚</p>
<h2 data-id="heading-1">äºŒã€å®Œæ•´ä»£ç ï¼š50 è¡Œå®ç° â€œå­—ç¬¦ä¸²å¢å¼ºâ€</h2>
<p>å…ˆå±•ç¤ºä»£ç ï¼Œå†æ‹†è§£æ ¸å¿ƒé€»è¾‘ï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">imp05</span> </span>{
  <span class="hljs-comment">// éšå¼ç±»ï¼šç»™Stringæ‰©å±•æ–¹æ³•</span>
  <span class="hljs-keyword">implicit</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StrongString</span>(<span class="hljs-params">s: <span class="hljs-type">String</span></span>) </span>{
    <span class="hljs-comment">// æ‰‹æœºå·æ ¡éªŒæ–¹æ³•</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isPhone</span></span>: <span class="hljs-type">Boolean</span> = {
      <span class="hljs-comment">// æ‰‹æœºå·æ­£åˆ™ï¼š1å¼€å¤´+3/5/6/7/8+9ä½æ•°å­—</span>
      <span class="hljs-keyword">val</span> phoneReg = <span class="hljs-string">"^1[35678]\d{9}$"</span>.r
      phoneReg.matches(s)
    }

    <span class="hljs-comment">// èº«ä»½è¯å·æ ¡éªŒæ–¹æ³•ï¼ˆ18ä½ï¼‰</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">isIDCard</span></span>: <span class="hljs-type">Boolean</span> = {
      <span class="hljs-comment">// 18ä½èº«ä»½è¯æ­£åˆ™ï¼šå«è¡Œæ”¿åŒºåˆ’ã€å¹´æœˆæ—¥ã€é¡ºåºç ã€æ ¡éªŒç </span>
      <span class="hljs-keyword">val</span> idCardReg = <span class="hljs-string">"^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$"</span>.r
      idCardReg.matches(s)
    }
  }

  <span class="hljs-comment">// æµ‹è¯•ä¸»æ–¹æ³•</span>
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">main</span></span>(args: <span class="hljs-type">Array</span>[<span class="hljs-type">String</span>]): <span class="hljs-type">Unit</span> = {
    <span class="hljs-keyword">val</span> phone = <span class="hljs-string">"13617295643"</span>
    println(<span class="hljs-string">s"æ‰‹æœºå·[<span class="hljs-subst">$phone</span>]æ˜¯å¦åˆæ³•ï¼š<span class="hljs-subst">${phone.isPhone}</span>"</span>)  <span class="hljs-comment">// true</span>

    <span class="hljs-keyword">val</span> wrongPhone = <span class="hljs-string">"136567891a"</span>
    println(<span class="hljs-string">s"æ‰‹æœºå·[<span class="hljs-subst">$wrongPhone</span>]æ˜¯å¦åˆæ³•ï¼š<span class="hljs-subst">${wrongPhone.isPhone}</span>"</span>)  <span class="hljs-comment">// false</span>

    <span class="hljs-keyword">val</span> idCard = <span class="hljs-string">"429005202011012231"</span>
    println(<span class="hljs-string">s"èº«ä»½è¯[<span class="hljs-subst">$idCard</span>]æ˜¯å¦åˆæ³•ï¼š<span class="hljs-subst">${idCard.isIDCard}</span>"</span>)  <span class="hljs-comment">// true</span>

    <span class="hljs-keyword">val</span> wrongIdCard = <span class="hljs-string">"40905020201101223a"</span>
    println(<span class="hljs-string">s"èº«ä»½è¯[<span class="hljs-subst">$wrongIdCard</span>]æ˜¯å¦åˆæ³•ï¼š<span class="hljs-subst">${wrongIdCard.isIDCard}</span>"</span>)  <span class="hljs-comment">// false</span>
  }
}
</code></pre>
<h2 data-id="heading-2">ä¸‰ã€æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼šéšå¼ç±»çš„ â€œé­”æ³•â€</h2>
<p>éšå¼ç±»æ˜¯ Scala çš„è¯­æ³•ç³–ï¼Œ<strong>ä½œç”¨æ˜¯ç»™ç°æœ‰ç±»å‹åŠ¨æ€æ‰©å±•æ–¹æ³•</strong>ï¼Œä¸éœ€è¦ç»§æ‰¿æˆ–ä¿®æ”¹åŸç±»å‹ä»£ç ï¼ˆå¯¹åŸç”Ÿç±»å‹<code>String</code>å°¤å…¶å‹å¥½ï¼‰ã€‚</p>
<p>å®ƒçš„è§„åˆ™å¾ˆç®€å•ï¼š</p>
<ol>
<li>å¿…é¡»å®šä¹‰åœ¨<code>object</code>/<code>class</code>/<code>trait</code>å†…éƒ¨ï¼ˆè¿™é‡Œæ”¾åœ¨<code>imp05</code>å•ä¾‹å¯¹è±¡é‡Œï¼‰ï¼›</li>
<li>æ„é€ å™¨åªèƒ½æœ‰ä¸€ä¸ªå‚æ•°ï¼ˆè¿™é‡Œæ˜¯<code>s: String</code>ï¼Œä»£è¡¨è¦æ‰©å±•çš„ç›®æ ‡ç±»å‹ï¼‰ï¼›</li>
<li>éšå¼ç±»ä¸­çš„æ–¹æ³•ï¼Œä¼šè‡ªåŠ¨æˆä¸ºç›®æ ‡ç±»å‹çš„ â€œæˆå‘˜æ–¹æ³•â€ã€‚</li>
</ol>
<h2 data-id="heading-3">å››ã€æ­£åˆ™è¯´æ˜ï¼šæ ¡éªŒé€»è¾‘ä¸è¸©å‘</h2>
<p>ä»£ç é‡Œçš„æ­£åˆ™æ˜¯ â€œå®æˆ˜çº§â€ çš„ï¼Œé¿å…å¸¸è§å‘ï¼š</p>
<ul>
<li><strong>æ‰‹æœºå·æ­£åˆ™</strong>ï¼š<code>^1[35678]\d{9}$</code>è¦†ç›–ä¸»æµæ‰‹æœºå·æ®µï¼ˆ3/5/6/7/8 å¼€å¤´ï¼‰ï¼Œä¸”ä¸¥æ ¼é™åˆ¶ 11 ä½ï¼Œé¿å… â€œ123456789012â€ è¿™ç§è¶…é•¿ä¸²ã€‚</li>
<li><strong>èº«ä»½è¯å·æ­£åˆ™</strong>ï¼š<code>^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$</code>æ”¯æŒ 18 ä½èº«ä»½è¯ï¼ˆå« 18/19/20 å¼€å¤´çš„å¹´ä»½ã€åˆæ³•çš„æœˆä»½ / æ—¥æœŸã€æœ€åä¸€ä½æ ¡éªŒç  X/xï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-4">äº”ã€å®é™…åœºæ™¯ï¼šæ¯”å·¥å…·ç±»æ›´ä¼˜é›…</h2>
<p>ç›¸æ¯”ä¼ ç»Ÿçš„<code>CheckUtil</code>å·¥å…·ç±»ï¼Œéšå¼ç±»çš„ä¼˜åŠ¿æ˜¯<strong>ä»£ç æ›´è‡ªç„¶</strong>ï¼š</p>
<ul>
<li>å·¥å…·ç±»å†™æ³•ï¼š<code>CheckUtil.isPhone(str)</code></li>
<li>éšå¼ç±»å†™æ³•ï¼š<code>str.isPhone</code></li>
</ul>
<p>åè€…æ›´ç¬¦åˆ â€œé¢å‘å¯¹è±¡â€ çš„ç›´è§‰ï¼Œè¯»ä»£ç æ—¶ä¸€çœ¼å°±èƒ½æ‡‚å«ä¹‰ã€‚</p>
<h2 data-id="heading-5">æ€»ç»“</h2>
<p>Scala çš„éšå¼ç±»æ˜¯ â€œè½»é‡çº§æ‰©å±•ç°æœ‰ç±»å‹â€ çš„ç¥å™¨ï¼Œå°¤å…¶é€‚åˆç»™åŸç”Ÿç±»å‹ï¼ˆString/Int ç­‰ï¼‰åŠ è¾…åŠ©æ–¹æ³•ã€‚ä»Šå¤©è¿™ä¸ªä¾‹å­ï¼Œåªç”¨ä¸€ä¸ªéšå¼ç±»å°±å®ç°äº†å­—ç¬¦ä¸²çš„æ‰‹æœºå·ã€èº«ä»½è¯å·æ ¡éªŒï¼Œæ—¢ç®€æ´åˆä¼˜é›…</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SwiftUI æ¶¨çŸ¥è¯†ï¼šå¦‚ä½•æŒ‰æ¡ä»¶åŠ¨æ€åˆ‡æ¢ Toggle è§†å›¾çš„æ ·å¼ï¼ˆ.button æˆ– .switchï¼‰]]></title>    <link>https://juejin.cn/post/7589166195797131291</link>    <guid>https://juejin.cn/post/7589166195797131291</guid>    <pubDate>2025-12-30T02:19:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589166195797131291" data-draft-id="7589126920287600650" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SwiftUI æ¶¨çŸ¥è¯†ï¼šå¦‚ä½•æŒ‰æ¡ä»¶åŠ¨æ€åˆ‡æ¢ Toggle è§†å›¾çš„æ ·å¼ï¼ˆ.button æˆ– .switchï¼‰"/> <meta itemprop="keywords" content="Swift,SwiftUI,Apple"/> <meta itemprop="datePublished" content="2025-12-30T02:19:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§ç†ŠçŒ«ä¾¯ä½©"/> <meta itemprop="url" content="https://juejin.cn/user/4292907536222152"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SwiftUI æ¶¨çŸ¥è¯†ï¼šå¦‚ä½•æŒ‰æ¡ä»¶åŠ¨æ€åˆ‡æ¢ Toggle è§†å›¾çš„æ ·å¼ï¼ˆ.button æˆ– .switchï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292907536222152/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§ç†ŠçŒ«ä¾¯ä½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T02:19:00.000Z" title="Tue Dec 30 2025 02:19:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e475395469c1463f8daf617e1336e341~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=YTmqDIvgnqKYHadwDfHnPAyAWUA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<blockquote>
<p>ğŸ•¶ï¸ åä¸‹è¿™é¢—çº¢è‰²è¯ä¸¸ï¼Œæ‰“ç ´ SwiftUI çš„ç‰©ç†æ³•åˆ™
æ¬¢è¿æ¥åˆ°æ–°åº“æ¯”è’‚è¯ºå¸‚çš„é›¨å¤œã€‚åœ¨è¿™é‡Œï¼ŒSwiftUI çš„ ToggleStyle æ›¾è¢«è®¤ä¸ºæ˜¯ä¸å¯å˜æ›´æ”¹çš„é“å¾‹â€”â€”Switch å°±æ˜¯ Switchï¼ŒButton å°±æ˜¯ Buttonï¼Œä¸¤è€…è€æ­»ä¸ç›¸å¾€æ¥ã€‚ä½†å½“æŒ‘å‰”çš„è®¾è®¡å¸ˆ Trinity ç”©å‡ºä¸€å¼ è¦æ±‚â€œè§†å›¾æ— ç¼æ¶²æ€å˜å½¢â€çš„å›¾çº¸ï¼Œè€Œå¤§åæ´¾â€œé‡æ„ç‰¹å·¥â€æ­£è™è§†çœˆçœˆå‡†å¤‡å˜²ç¬‘ä½ çš„ä»£ç æ—¶ï¼Œä½ è¯¥æ€ä¹ˆåŠï¼Ÿ <br/>
åˆ«æ…Œï¼Œæˆ‘æ˜¯ Neoã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å¸¦ä½ æ½œå…¥ ToggleStyle çš„åº•å±‚é»‘ç®±ï¼Œåˆ©ç”¨ matchedGeometryEffectï¼ˆé‡å­çº ç¼ ï¼‰ å’Œ ç”Ÿå‘½å‘¨æœŸä¾èµ–æ³¨å…¥ï¼Œä¸Šæ¼”ä¸€åœºéª—è¿‡ç¼–è¯‘å™¨çš„â€œç§»èŠ±æ¥æœ¨â€å¤§æˆã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬ä¸€èµ· Hack è¿›ç³»ç»Ÿï¼Œåˆ›é€ é‚£ä¸ªâ€œä¸å¯èƒ½â€çš„å¼€å…³ã€‚</p>
</blockquote>
<h2 data-id="heading-0">â˜”ï¸ å¼•å­</h2>
<p>è¿™æ˜¯ä¸€ä¸ªå‘ç”Ÿåœ¨æ–°åº“æ¯”è’‚è¯ºå¸‚ï¼ˆNew Cupertino Cityï¼‰åœ°ä¸‹ä»£ç é»‘å¸‚çš„æ•…äº‹ã€‚é›¨ä¸€ç›´åœ¨ä¸‹ï¼Œåƒæäº†é‚£ä¸ªæ°¸è¿œä¿®ä¸å®Œçš„ Memory Leakã€‚</p>
<p>æˆ‘æ˜¯ <strong>Neo</strong>ï¼Œä¸€åä¸“æ²»å„ç§ SwiftUI ç–‘éš¾æ‚ç—‡çš„â€œæ¸…ç†è€…â€ã€‚ååœ¨æˆ‘å¯¹é¢çš„æ˜¯ <strong>Trinity</strong>ï¼Œå¥¹æ˜¯è¿™ä¸ªè¡—åŒºæœ€æŒ‘å‰”çš„ UX è®¾è®¡å¸ˆã€‚è€Œé‚£ä¸ªæ€»æƒ³æŠŠæˆ‘ä»¬çš„ä»£ç é‡æ„æˆæ±‡ç¼–è¯­è¨€çš„å¤§åæ´¾ <strong>Agent Refactorï¼ˆé‡æ„ç‰¹å·¥ï¼‰</strong>ï¼Œæ­£èº²åœ¨ç¼–è¯‘å™¨çš„é˜´å½±é‡Œä¼ºæœºè€ŒåŠ¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fffb9f71011c49c5a7a9e11cafe6da97~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=FupUPJ87VexlC1AgBI5o7ZqlCbc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>Trinity æç­äº†æ‰‹é‡Œçš„é¦™çƒŸï¼Œç”©ç»™æˆ‘ä¸€å¼ è®¾è®¡ç¨¿ï¼šâ€œNeoï¼Œæˆ‘è¦ä¸€ä¸ªå¼€å…³ã€‚å¹³æ—¶å®ƒæ˜¯ Switchï¼Œæ¿€åŠ¨çš„æ—¶å€™å®ƒå¾—å˜æˆ Buttonã€‚è€Œä¸”ï¼Œå˜åŒ–è¿‡ç¨‹è¦åƒä¸ç»¸ä¸€æ ·é¡ºæ»‘ï¼Œä¸èƒ½æœ‰ä»»ä½•â€˜è·³å¸§â€™ã€‚æ‡‚äº†å—ï¼Ÿâ€</p>
<p><strong>åœ¨æœ¬ç¯‡åšæ–‡ä¸­ï¼Œæ‚¨å°†å­¦åˆ°å¦‚ä¸‹å†…å®¹ï¼š</strong></p>
<ul>
<li>â˜”ï¸ å¼•å­</li>
<li>ğŸ•µï¸â€â™‚ï¸ æ¡ˆå‘ç°åœºï¼šé™æ€ç±»å‹çš„æ¡æ¢</li>
<li>ğŸ§¬ ç¬¬ä¸€æ‹›ï¼šé‡å­çº ç¼ ï¼ˆmatchedGeometryEffectï¼‰</li>
<li>ğŸ’Š ç»ˆææ–¹æ¡ˆï¼šè‡ªå®šä¹‰ ToggleStyle é‡Œçš„â€œç§»èŠ±æ¥æœ¨â€</li>
<li>âš ï¸ æŠ€æœ¯é»‘ç®±ï¼ˆé‡ç‚¹è§£æï¼‰</li>
<li>ğŸ¬ å¤§ç»“å±€ï¼šå®Œç¾çš„è°ƒç”¨</li>
<li>ğŸ‘€ SwiftUI æ¶¨çŸ¥è¯†å¤–ä¼ ï¼šä¿®å¤â€œåŠ¨ç”»å¤±æ•ˆâ€çš„ç»ˆæè¡¥ä¸ï¼ˆNamespace çš„ç”Ÿå‘½å‘¨æœŸï¼‰</li>
<li>ğŸ•µï¸â€â™‚ï¸ çœŸæ­£çš„ Bugï¼šNamespace çš„ç”Ÿå‘½å‘¨æœŸ</li>
<li>ğŸ’‰ æ‰‹æœ¯æ–¹æ¡ˆï¼šä¾èµ–æ³¨å…¥</li>
<li>ğŸ§¬ æœ€ç»ˆä¿®æ­£ç‰ˆä»£ç  (Copy-Paste Ready)</li>
<li>ğŸ§  æŠ€æœ¯å¤ç›˜ï¼šä¸ºä»€ä¹ˆè¿™èƒ½è¡Œï¼Ÿ</li>
</ul>
<p>æˆ‘çš±äº†çš±çœ‰ï¼šâ€œSwiftUI çš„ <code>ToggleStyle</code> æ˜¯é™æ€ç±»å‹ç»‘å®šçš„ï¼Œä½ è¦åœ¨è¿è¡Œæ—¶<strong>å·æ¢æ¢æŸ±</strong>ï¼Ÿè¿™å¯æ˜¯<strong>é€†å¤©æ”¹å‘½</strong>çš„æ“ä½œã€‚â€</p>
<p>Trinity å†·ç¬‘ä¸€å£°ï¼šâ€œåšä¸åˆ°ï¼Ÿé‚£æˆ‘å°±å»æ‰¾ Agent Refactorï¼Œå¬è¯´ä»–æœ€è¿‘åœ¨æ¨è¡Œ UIKit å¤è¾Ÿè¿åŠ¨ã€‚â€</p>
<p>â€œæ…¢ç€ã€‚â€æˆ‘æŒ‰ä½å¥¹çš„æ‰‹ï¼Œæ‰“å¼€äº† Xcodeï¼Œâ€œç»™æˆ‘ååˆ†é’Ÿã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6826748561ed45e6a6573552cf9c684b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=9gbt%2BZfffCpyH5%2Bd5ryaUxKVojU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">ğŸ•µï¸â€â™‚ï¸ æ¡ˆå‘ç°åœºï¼šé™æ€ç±»å‹çš„æ¡æ¢</h2>
<p>åœ¨ SwiftUI çš„ä¸–ç•Œæ³•åˆ™é‡Œï¼Œ<strong>ç±»å‹å³å‘½è¿</strong>ã€‚é€šå¸¸æˆ‘ä»¬å†™ <code>Toggle</code>ï¼Œä¸€æ—¦æŒ‡å®šäº† <code>.toggleStyle(.switch)</code>ï¼Œå®ƒè¿™è¾ˆå­å°±æ˜¯ä¸ª Switch äº†ã€‚</p>
<p>å¦‚æœä½ å¤©çœŸåœ°å†™å‡ºè¿™ç§ä»£ç ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">if</span> change {
    <span class="hljs-type">Toggle</span>(<span class="hljs-string">"Click Me"</span>, isOn: <span class="hljs-variable">$state</span>).toggleStyle(.button)
} <span class="hljs-keyword">else</span> {
    <span class="hljs-type">Toggle</span>(<span class="hljs-string">"Click Me"</span>, isOn: <span class="hljs-variable">$state</span>).toggleStyle(.switch)
}
</code></pre>
<p><strong>Agent Refactor</strong> ä¼šç¬‘æ‰å¤§ç‰™ã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºåœ¨ SwiftUI çœ‹æ¥ï¼Œè¿™æ˜¯<strong>ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„ View</strong>ã€‚å½“ <code>change</code> æ”¹å˜æ—¶ï¼Œæ—§è§†å›¾è¢«æ— æƒ…é”€æ¯ï¼Œæ–°è§†å›¾å‡­ç©ºé‡å»ºã€‚è¿™ä¼šå¯¼è‡´åŠ¨ç”»ç”Ÿç¡¬å¾—åƒä¸ªåˆšå­¦ä¼šèµ°è·¯çš„åƒµå°¸ï¼Œç”šè‡³ä¼šä¸¢å¤±ç‚¹å‡»æ—¶çš„æŒ‰ä¸‹çŠ¶æ€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3736f08c46564b7595eb1afe351345f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=AiLajDChrpV29mREeFHiQz%2BCFgc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æˆ‘ä»¬éœ€è¦çš„æ˜¯ä¸€ç§<strong>ç’å¤©è¿‡æµ·</strong>çš„æ‰‹æ®µï¼Œè®© SwiftUI ä»¥ä¸ºå®ƒè¿˜åœ¨æ¸²æŸ“åŒä¸€ä¸ª Viewï¼Œä½†çš®å›Šå·²ç»æ¢äº†ã€‚</p>
<h2 data-id="heading-2">ğŸ§¬ ç¬¬ä¸€æ‹›ï¼šé‡å­çº ç¼ ï¼ˆmatchedGeometryEffectï¼‰</h2>
<p>Trinity çœ‹ç€å±å¹•ä¸Šçš„é—ªçƒï¼Œä¸è€çƒ¦åœ°æ•²ç€æ¡Œå­ã€‚æˆ‘æ·±å¸ä¸€å£æ°”ï¼Œç¥­å‡ºäº†ç¥å™¨ï¼š<code>matchedGeometryEffect</code>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/865fb2f50e1c4080929d61bda3edeb95~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=0cDB9IfDoJITaQLVd2482CRDhFc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è¿™ä¸œè¥¿å°±åƒæ˜¯è§†å›¾ç•Œçš„â€œé‡å­çº ç¼ â€ã€‚è™½ç„¶æˆ‘ä»¬åœ¨ä»£ç é‡Œå†™äº†ä¸¤ä¸ª Toggleï¼Œä½†é€šè¿‡ç»Ÿä¸€çš„ <code>Namespace</code> å’Œ <code>ID</code>ï¼Œæˆ‘ä»¬å¯ä»¥éª—è¿‡æ¸²æŸ“å¼•æ“ï¼Œè®©å®ƒä»¥ä¸ºè¿™ä¿©æ˜¯å‰ä¸–ä»Šç”Ÿã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">ViewSwitchingStrategy</span>: <span class="hljs-title class_">View</span> {
    <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªå‘½åç©ºé—´ï¼Œç”¨äºé­”æœ¯èˆ¬çš„å‡ ä½•åŒ¹é…</span>
    <span class="hljs-meta">@Namespace</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> space
    <span class="hljs-comment">// ç»™è¿™ä¸¤ä¸ªå½¢æ€èµ·ä¸ªä»£å·ï¼Œå°±åƒç‰¹å·¥çš„å‡å</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> <span class="hljs-type">AnimID</span> <span class="hljs-operator">=</span> <span class="hljs-string">"MorphingToggle"</span>
    
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">var</span> isButtonStyle <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">var</span> isOn <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    
    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-type">VStack</span> {
            <span class="hljs-comment">// å‰§æƒ…åˆ†æ”¯ï¼šæ ¹æ®çŠ¶æ€æ¸²æŸ“ä¸åŒçš®å›Š</span>
            <span class="hljs-keyword">if</span> isButtonStyle {
                <span class="hljs-type">Toggle</span>(isOn: <span class="hljs-variable">$isOn</span>) {
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"èŠéº»å¼€é—¨"</span>)
                        <span class="hljs-comment">// å…³é”®ç‚¹ï¼šæ ‡è®°è¿™ä¸ª Text çš„å‡ ä½•ç‰¹å¾</span>
                        .matchedGeometryEffect(id: <span class="hljs-type">AnimID</span>, in: space)
                }
                .toggleStyle(.button)
                <span class="hljs-comment">// åŠ ä¸Šè¿‡æ¸¡åŠ¨ç”»ï¼Œè®©åˆ‡æ¢ä¸é‚£ä¹ˆçªå…€</span>
                .transition(.scale(scale: <span class="hljs-number">0.8</span>).combined(with: .opacity))
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-type">Toggle</span>(isOn: <span class="hljs-variable">$isOn</span>) {
                    <span class="hljs-type">Text</span>(<span class="hljs-string">"èŠéº»å¼€é—¨"</span>)
                        <span class="hljs-comment">// å…³é”®ç‚¹ï¼šåŒä¸€ä¸ª IDï¼ŒåŒä¸€ä¸ªç©ºé—´</span>
                        .matchedGeometryEffect(id: <span class="hljs-type">AnimID</span>, in: space)
                }
                .toggleStyle(.switch)
                .transition(.scale(scale: <span class="hljs-number">0.8</span>).combined(with: .opacity))
            }
            
            <span class="hljs-type">Button</span>(<span class="hljs-string">"å˜å½¢ï¼"</span>) {
                withAnimation(.spring()) {
                    isButtonStyle.toggle()
                }
            }
        }
        .padding()
    }
}
</code></pre>
<p>Trinity çœ¯èµ·çœ¼ç›çœ‹äº†ä¸€ä¼šå„¿ï¼šâ€œæœ‰ç‚¹æ„æ€ã€‚æ–‡å­—å¹³æ»‘è¿‡æ¸¡äº†ï¼Œä½† Toggle çš„å¤–å£³è¿˜æ˜¯æœ‰ç‚¹â€˜é—ªç°â€™ã€‚è€Œä¸”â€¦â€¦è¿™ä»£ç å¤ªä¹±äº†ï¼Œæˆ‘æœ‰æ´ç™–ã€‚â€</p>
<p>å¥¹è¯´å¾—å¯¹ã€‚æŠŠé€»è¾‘æ•£è½åœ¨ View Body é‡Œç®€ç›´æ˜¯<strong>ç”»è›‡æ·»è¶³</strong>ã€‚æˆ‘ä»¬éœ€è¦æ›´é«˜çº§çš„å°è£…ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d46f035b388c46b9882a620b57ee8bbd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=RUZ2Ylyf9jWXMXGTzZO2XI87cV8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-3">ğŸ’Š ç»ˆææ–¹æ¡ˆï¼šè‡ªå®šä¹‰ ToggleStyle é‡Œçš„â€œç§»èŠ±æ¥æœ¨â€</h2>
<p>æˆ‘å†³å®šä¸å†åœ¨ View å±‚é¢ä¸Šçº ç»“ï¼Œè€Œæ˜¯æ·±å…¥åˆ° <code>ToggleStyle</code> çš„å†…éƒ¨ã€‚æˆ‘è¦åˆ›é€ ä¸€ä¸ª<strong>åŒé¢é—´è°</strong> Styleã€‚</p>
<p>è¿™ä¸ª Style è¡¨é¢ä¸Šæ˜¯ä¸€ä¸ªæ™®é€šçš„ <code>ToggleStyle</code>ï¼Œä½†å®ƒçš„ <code>makeBody</code> æ–¹æ³•é‡Œè—ç€ä¸¤ä¸ªçµé­‚ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªâ€œåŒé‡äººæ ¼â€çš„ Style</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">ConditionalToggleStyle</span>: <span class="hljs-title class_">ToggleStyle</span> {
    <span class="hljs-comment">// åŒæ ·éœ€è¦å‘½åç©ºé—´æ¥å¤„ç†å¸ƒå±€å¹³æ»‘è¿‡æ¸¡</span>
    <span class="hljs-meta">@Namespace</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> space
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> <span class="hljs-type">GeometryID</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Chameleon"</span> <span class="hljs-comment">// å˜è‰²é¾™ ID</span>
    
    <span class="hljs-comment">// æ§åˆ¶å½“å‰æ˜¾ç¤ºå“ªä¸ªäººæ ¼</span>
    <span class="hljs-keyword">var</span> isButtonMode: <span class="hljs-type">Bool</span>
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">makeBody</span>(<span class="hljs-params">configuration</span>: <span class="hljs-type">Configuration</span>) -&gt; <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-comment">// è¿™é‡Œæ˜¯é»‘è‰²å¹½é»˜çš„åœ°æ–¹ï¼š</span>
        <span class="hljs-comment">// æˆ‘ä»¬åœ¨ä¸€ä¸ª Style é‡Œæ‰‹åŠ¨è°ƒç”¨äº†å¦å¤–ä¸¤ä¸ª Style çš„ makeBody</span>
        <span class="hljs-comment">// è¿™å°±åƒæ˜¯ä½ å»ä¹°å’–å•¡ï¼Œåº—å‘˜å…¶å®æ˜¯å»éš”å£æ˜Ÿå·´å…‹ä¹°äº†ä¸€æ¯å€’ç»™ä½ </span>
        
        <span class="hljs-type">Group</span> {
            <span class="hljs-keyword">if</span> isButtonMode {
                <span class="hljs-type">ButtonToggleStyle</span>()
                    .makeBody(configuration: configuration)
                    <span class="hljs-comment">// åŠ ä¸Š IDï¼Œå‘Šè¯‰ SwiftUIï¼šæˆ‘æ˜¯é‚£ä¸ª Switch çš„è½¬ä¸–</span>
                    .matchedGeometryEffect(id: <span class="hljs-type">GeometryID</span>, in: space)
                    .transition(.opacity.combined(with: .scale))
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-type">SwitchToggleStyle</span>()
                    .makeBody(configuration: configuration)
                    <span class="hljs-comment">// åŠ ä¸Š IDï¼Œå‘Šè¯‰ SwiftUIï¼šæˆ‘æ˜¯é‚£ä¸ª Button çš„å‰èº«</span>
                    .matchedGeometryEffect(id: <span class="hljs-type">GeometryID</span>, in: space)
                    .transition(.opacity.combined(with: .scale))
            }
        }
    }
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdfb30356f4d4206a31f09715e8a608c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=tDuYe0WhTEiIIIsrvaUVDtQAUhQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-4">âš ï¸ æŠ€æœ¯é»‘ç®±ï¼ˆé‡ç‚¹è§£æï¼‰</h3>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªå¾ˆå®¹æ˜“è¸©çš„å‘ï¼Œä¹Ÿå°±æ˜¯ <strong>Agent Refactor</strong> æœ€å–œæ¬¢æ”»å‡»çš„åœ°æ–¹ï¼š</p>
<p>ä½ ä¸èƒ½è¯•å›¾ç”¨ <code>[any ToggleStyle]</code> è¿™ç§æ•°ç»„æ¥åŠ¨æ€è¿”å› Styleã€‚Swift çš„ Protocol å¦‚æœå¸¦æœ‰ <code>associatedtype</code>ï¼ˆToggleStyle å°±æœ‰ï¼‰ï¼Œå°±ä¸èƒ½ä½œä¸ºæ™®é€šç±»å‹ä¹±ä¼ ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0695838864b74e16accc949068add827~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=3EabX7W9vxIyvN2YQWkz3wZHuaQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¸Šé¢çš„ <code>ConditionalToggleStyle</code> ä¹‹æ‰€ä»¥èƒ½å·¥ä½œï¼Œæ˜¯å› ä¸º <code>makeBody</code> è¿”å›çš„æ˜¯ <code>some View</code>ã€‚SwiftUI çš„ ViewBuilder ä¼šæŠŠ <code>if-else</code> è½¬æ¢æˆ <code>_ConditionalContent&lt;ViewA, ViewB&gt;</code>ã€‚è™½ç„¶ Button å’Œ Switch æ¸²æŸ“å‡ºæ¥çš„ View ç±»å‹ä¸åŒï¼Œä½†å®ƒä»¬éƒ½è¢«åŒ…è£…åœ¨è¿™ä¸ªæ¡ä»¶å®¹å™¨é‡Œäº†ã€‚</p>
<h2 data-id="heading-5">ğŸ¬ å¤§ç»“å±€ï¼šå®Œç¾çš„è°ƒç”¨</h2>
<p>æˆ‘æŠŠå°è£…å¥½çš„ä»£ç æ¨é€åˆ°ä¸»å±å¹•ã€‚ç°åœ¨çš„ <code>ContentView</code> å¹²å‡€å¾—ä»¤äººå‘æŒ‡ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">FinalShowdownView</span>: <span class="hljs-title class_">View</span> {
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isOn <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isButtonMode <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    
    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-type">VStack</span>(spacing: <span class="hljs-number">40</span>) {
            <span class="hljs-type">Text</span>(<span class="hljs-string">"Weapon Status: <span class="hljs-subst">\(isOn <span class="hljs-operator">?</span> <span class="hljs-string">"ACTIVE"</span> : <span class="hljs-string">"IDLE"</span>)</span>"</span>)
                .font(.monospaced(.title3)())
                .foregroundColor(isOn <span class="hljs-operator">?</span> .green : .gray)
            
            <span class="hljs-comment">// è§è¯å¥‡è¿¹çš„æ—¶åˆ»</span>
            <span class="hljs-type">Toggle</span>(<span class="hljs-string">"Fire Mode"</span>, isOn: <span class="hljs-variable">$isOn</span>)
                <span class="hljs-comment">// è¿™é‡Œçš„ .animation å¿…é¡»è·Ÿåœ¨ style åé¢æˆ–è€…ç»‘å®šåœ¨ value ä¸Š</span>
                .toggleStyle(<span class="hljs-type">ConditionalToggleStyle</span>(isButtonMode: isButtonMode))
                <span class="hljs-comment">// åŠ ä¸Šè¿™ä¸ª frame æ˜¯ä¸ºäº†é˜²æ­¢ Switch å˜ Button æ—¶å®½åº¦è·³å˜å¤ªå¤§</span>
                <span class="hljs-comment">// å°±åƒæµ©å…‹å˜èº«å¾—æ’‘ç ´è£¤å­ï¼Œæˆ‘ä»¬éœ€è¦ä¸€æ¡å¼¹æ€§å¥½çš„è£¤å­</span>
                .frame(maxWidth: <span class="hljs-number">200</span>) 
            
            <span class="hljs-type">Button</span> {
                withAnimation(.easeInOut(duration: <span class="hljs-number">0.4</span>)) {
                    isButtonMode.toggle()
                }
            } label: {
                <span class="hljs-type">Text</span>(<span class="hljs-string">"Hack the System"</span>)
                    .fontWeight(.bold)
                    .padding()
                    .background(<span class="hljs-type">Color</span>.purple.opacity(<span class="hljs-number">0.2</span>))
                    .cornerRadius(<span class="hljs-number">10</span>)
            }
        }
    }
}
</code></pre>
<p>æˆ‘æŒ‰ä¸‹ "Hack the System" æŒ‰é’®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bca686ac45cc4fe0b146bea7ab3bad6a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=1NB1CK3ypcli%2BPnHXcReaSJmuSE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å±å¹•ä¸Šçš„ Toggle å¹¶æ²¡æœ‰ç”Ÿç¡¬åœ°æ¶ˆå¤±å†å‡ºç°ï¼Œè€Œæ˜¯å¦‚åŒæ¶²ä½“é‡‘å±ä¸€èˆ¬ï¼Œä»æ»‘å—å½¢æ€è‡ªç„¶åœ°æ”¶ç¼©ã€å½¢å˜ï¼Œæœ€ç»ˆå‡å›ºæˆä¸€ä¸ªæŒ‰é’®ã€‚ç‚¹å‡»å®ƒï¼ŒçŠ¶æ€åŒæ­¥å®Œç¾ï¼Œæ¯«æ— è¿Ÿæ»ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6eb3398a46fd4efdb46aedf29aca932b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=Pu4QS2xrkh85Huk9wUHy0%2BF3%2BWQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>Trinity çœ‹ç€å±å¹•ï¼Œå˜´è§’ç»ˆäºå¾®å¾®ä¸Šæ‰¬ï¼šâ€œçœ‹æ¥ä½ è¿˜æ²¡ç”Ÿé”ˆï¼ŒNeoã€‚â€</p>
<p>çªç„¶ï¼ŒæŠ¥è­¦çº¢ç¯äº®èµ·ã€‚Agent Refactor çš„å…¨æ¯æŠ•å½±å‡ºç°åœ¨åŠç©ºï¼Œä»–å’†å“®ç€ï¼šâ€œä¸å¯é¥¶æ•ï¼ä½ ä»¬ç«Ÿç„¶åœ¨ä¸€ä¸ª <code>makeBody</code> é‡Œå®ä¾‹åŒ–äº†ä¸¤ä¸ªä¸åŒçš„ Styleï¼è¿™æ˜¯å¯¹é™æ€æ´¾å‘çš„äºµæ¸ï¼â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/022de73c45f44754894d286eb00e0c9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=zHxyMMtxzdXnnvwY05dDy%2FQ%2B%2FpA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æˆ‘åˆä¸Šç”µè„‘ï¼Œæˆ´ä¸Šå¢¨é•œï¼Œå¯¹ Trinity ç¬‘äº†ç¬‘ï¼šâ€œèµ°å§ã€‚åœ¨ä»–å‘ç°æˆ‘ä»¬è¿˜åœ¨ç”¨ <code>AnyView</code> ä¹‹å‰ã€‚â€</p>
<hr/>
<h2 data-id="heading-6">ğŸ‘€ SwiftUI æ¶¨çŸ¥è¯†å¤–ä¼ ï¼šä¿®å¤â€œåŠ¨ç”»å¤±æ•ˆâ€çš„ç»ˆæè¡¥ä¸ï¼ˆNamespace çš„ç”Ÿå‘½å‘¨æœŸï¼‰</h2>
<p>è¿™é‡Œæ˜¯ <strong>Neo</strong>ã€‚</p>
<p>è¿™çœŸæ˜¯ä¸€ä¸ªè®© <strong>Agent Refactor</strong> ç¬‘æ‰å¤§ç‰™çš„ä½çº§å¤±è¯¯ã€‚æˆ‘å±…ç„¶çŠ¯äº†â€œå®‡å®™é‡å¯â€çš„é”™è¯¯ã€‚</p>
<p><strong>Trinity</strong> çœ‹ç€æ¯«æ— ååº”çš„å±å¹•ï¼ŒæŠŠå’–å•¡æ¯é‡é‡åœ°é¡¿åœ¨æ¡Œå­ä¸Šï¼šâ€œNeoï¼Œä½ æ˜¯åœ¨é€—æˆ‘å—ï¼Ÿä½ åœ¨ <code>ToggleStyle</code> è¿™ä¸ªç»“æ„ä½“é‡Œå£°æ˜äº† <code>@Namespace</code>ã€‚æ¯æ¬¡ View åˆ·æ–°ï¼Œ<code>QuantumToggleStyle</code> é‡æ–°åˆå§‹åŒ–ï¼Œé‚£ä¸ª Namespace å°±è¢«é”€æ¯é‡å»ºäº†ã€‚<strong>ä½ æ˜¯åœ¨è¯•å›¾è¿æ¥ä¸¤ä¸ªæ¯«æ— å…³è”çš„å¹³è¡Œå®‡å®™ï¼</strong>â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c2ddb3d0cef4308ad5a3cc37384aa4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=6vsYclXsuXwuuzaEEuySbcpZshg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¥¹è¯´å¾—å¯¹ã€‚<strong>Namespace å¿…é¡»æ˜¯æ°¸æ’çš„</strong>ï¼Œä¸èƒ½éšç€ Style çš„é‡æ–°åˆ›å»ºè€Œæ¶ˆäº¡ã€‚æˆ‘ä»¬å¿…é¡»æŠŠè¿™ä¸ªâ€œå®‡å®™åæ ‡ç³»â€ä»å¤–éƒ¨ä¼ è¿›å»ï¼Œè€Œä¸æ˜¯åœ¨å†…éƒ¨ä¸€æ¬¡æ€§ç”Ÿæˆã€‚</p>
<p>è¿™å°±å¥½æ¯”ä½ æƒ³ç”¨è™«æ´è¿æ¥ä¸¤ä¸ªç‚¹ï¼Œç»“æœä½ æ¯èµ°ä¸€æ­¥å°±æŠŠæ•´ä¸ªå®‡å®™ç‚¸äº†é‡é€ ï¼Œè™«æ´å½“ç„¶è¿ä¸èµ·æ¥ã€‚</p>
<p>æ¥å§ï¼Œè®©æˆ‘ä»¬ä¿®è¡¥è¿™ä¸ªæ—¶ç©ºè£‚ç¼ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34850ee4199f419d86255ac93fe44daf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=SFxsWM6WW8xCSipSkOdi0UF4J6s%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-7">ğŸ•µï¸â€â™‚ï¸ çœŸæ­£çš„ Bugï¼šNamespace çš„ç”Ÿå‘½å‘¨æœŸ</h2>
<p>åœ¨ SwiftUI ä¸­ï¼Œ<code>.toggleStyle(MyStyle())</code> æ¯æ¬¡è¢«è°ƒç”¨ï¼ˆå½“çŠ¶æ€æ”¹å˜å¼•å‘é‡ç»˜æ—¶ï¼‰ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ <code>MyStyle</code> ç»“æ„ä½“å®ä¾‹ã€‚</p>
<p>å¦‚æœä½ æŠŠ <code>@Namespace private var space</code> å†™åœ¨ <code>ToggleStyle</code> ç»“æ„ä½“é‡Œï¼š</p>
<ol>
<li>çŠ¶æ€æ”¹å˜ï¼ˆhackMode å˜äº†ï¼‰ã€‚</li>
<li>SwiftUI åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>QuantumToggleStyle</code>ã€‚</li>
<li><strong>æ–°çš„ Style äº§ç”Ÿäº†ä¸€ä¸ªå…¨æ–°çš„ Namespaceã€‚</strong></li>
<li><code>matchedGeometryEffect</code> å‘ç°ï¼šâ€œå’¦ï¼Ÿä¸Šä¸€æ¬¡çš„ ID æ˜¯åœ¨æ—§å®‡å®™é‡Œï¼Œè¿™æ¬¡æ˜¯åœ¨æ–°å®‡å®™é‡Œï¼Œæ‰¾ä¸åˆ°åŒ¹é…å¯¹è±¡ã€‚â€</li>
<li><strong>ç»“æœï¼š</strong> æ²¡æœ‰è¡¥é—´åŠ¨ç”»ï¼Œåªæœ‰ç”Ÿç¡¬çš„çªå˜ã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99fd2e6fe2154ac9a70c7c8ec1b97cfb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=WV3CWtUpTLCsvWLZ%2F5LE5y0m008%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-8">ğŸ’‰ æ‰‹æœ¯æ–¹æ¡ˆï¼šä¾èµ–æ³¨å…¥</h2>
<p>æˆ‘ä»¬éœ€è¦åœ¨ <strong>Viewï¼ˆæ´»å¾—ä¹…çš„é‚£ä¸ªï¼‰</strong> é‡Œåˆ›å»º Namespaceï¼Œç„¶åæŠŠå®ƒåƒä¼ å®¶å®ä¸€æ ·ä¼ ç»™ <strong>Styleï¼ˆæ´»å¾—çŸ­çš„é‚£ä¸ªï¼‰</strong>ã€‚</p>
<p>åŒæ—¶ï¼Œä¸ºäº†è®©æ›¿æ¢è¿‡ç¨‹ä¸å‡ºç°â€œé—ªçƒâ€ï¼Œæˆ‘ä»¬éœ€è¦æ˜¾å¼åœ°åŠ ä¸Š <code>.transition</code>ï¼Œå‘Šè¯‰ SwiftUI åœ¨å˜å½¢çš„åŒæ—¶å¦‚ä½•å¤„ç†é€æ˜åº¦ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0d3a8610e8646f7974a585e5ce7ad92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=x97cuh92Lw7l5G6EEAo5tvZ2cYQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-9">ğŸ§¬ æœ€ç»ˆä¿®æ­£ç‰ˆä»£ç  (Copy-Paste Ready)</h2>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> SwiftUI

<span class="hljs-comment">// MARK: - The "Quantum" Toggle Style (Fixed)</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">QuantumToggleStyle</span>: <span class="hljs-title class_">ToggleStyle</span> {
    <span class="hljs-comment">// âš ï¸ å…³é”®ä¿®æ­£ï¼šä¸å†è‡ªå·±æŒæœ‰ Namespaceï¼Œè€Œæ˜¯æ¥æ”¶å¤–éƒ¨ä¼ å…¥çš„ ID</span>
    <span class="hljs-comment">// è¿™ä¿è¯äº†å³ä¾¿ Style è¢«é‡æ–°åˆ›å»ºï¼Œåæ ‡ç³»ä¾ç„¶æ˜¯åŒä¸€ä¸ª</span>
    <span class="hljs-keyword">var</span> namespace: <span class="hljs-type">Namespace</span>.<span class="hljs-type">ID</span>
    
    <span class="hljs-comment">// çŠ¶æ€æ§åˆ¶</span>
    <span class="hljs-keyword">var</span> isButtonMode: <span class="hljs-type">Bool</span>
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> <span class="hljs-type">LabelID</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SoulLabel"</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> <span class="hljs-type">ContainerID</span> <span class="hljs-operator">=</span> <span class="hljs-string">"BodyContainer"</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> <span class="hljs-type">KnobID</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SwitchKnob"</span> <span class="hljs-comment">// æ–°å¢ï¼šç»™ Switch çš„æ»‘å—ä¹Ÿç•™ä¸ªä½ç½®ï¼ˆå¯é€‰ï¼‰</span>
    
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">makeBody</span>(<span class="hljs-params">configuration</span>: <span class="hljs-type">Configuration</span>) -&gt; <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-type">Group</span> {
            <span class="hljs-keyword">if</span> isButtonMode {
                <span class="hljs-comment">// MARK: - Button Mode</span>
                <span class="hljs-type">Button</span> {
                    configuration.isOn.toggle()
                } label: {
                    <span class="hljs-type">HStack</span> {
                        configuration.label
                            .matchedGeometryEffect(id: <span class="hljs-type">LabelID</span>, in: namespace)
                            .foregroundColor(.accentColor)
                        
                        <span class="hljs-type">Spacer</span>()
                        
                        <span class="hljs-comment">// å ä½ç¬¦ï¼šç”¨äºæ¨¡æ‹Ÿ Switch çš„å®½åº¦</span>
                        <span class="hljs-type">Color</span>.clear
                            .frame(width: <span class="hljs-number">51</span>, height: <span class="hljs-number">31</span>)
                    }
                    .contentShape(<span class="hljs-type">Rectangle</span>())
                }
                .buttonStyle(.plain)
                .padding(.vertical, <span class="hljs-number">8</span>)
                .padding(.horizontal, <span class="hljs-number">0</span>)
                <span class="hljs-comment">// èƒŒæ™¯åŒ¹é…</span>
                .background(
                    <span class="hljs-type">RoundedRectangle</span>(cornerRadius: <span class="hljs-number">8</span>)
                        .fill(<span class="hljs-type">Color</span>.gray.opacity(<span class="hljs-number">0.1</span>))
                        .matchedGeometryEffect(id: <span class="hljs-type">ContainerID</span>, in: namespace)
                )
                <span class="hljs-comment">// âš ï¸ å…³é”®ï¼šåŠ ä¸Š transitionï¼Œé˜²æ­¢è§†å›¾ç›´æ¥ç¡¬æ›¿æ¢</span>
                .transition(.opacity.animation(.easeInOut(duration: <span class="hljs-number">0.2</span>)))
                
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// MARK: - Switch Mode</span>
                <span class="hljs-type">HStack</span> {
                    configuration.label
                        .matchedGeometryEffect(id: <span class="hljs-type">LabelID</span>, in: namespace)
                        .foregroundColor(.primary)
                    
                    <span class="hljs-type">Spacer</span>()
                    
                    <span class="hljs-comment">// è¿™é‡Œæˆ‘ä»¬ä¸ºäº†è§†è§‰å®Œç¾ï¼Œæ‰‹åŠ¨æ‹†è§£ Toggle</span>
                    <span class="hljs-comment">// æˆ–è€…ä¾ç„¶ä½¿ç”¨åŸç”Ÿ Toggleï¼Œä½†åŒ…è£¹åœ¨å®¹å™¨é‡Œ</span>
                    <span class="hljs-type">Toggle</span>(<span class="hljs-string">""</span>, isOn: configuration.<span class="hljs-variable">$isOn</span>)
                        .labelsHidden()
                        .toggleStyle(<span class="hljs-type">SwitchToggleStyle</span>(tint: .green))
                        <span class="hljs-comment">// è¿™é‡Œä¸éœ€è¦ matchedGeometryEffect å¼ºè¡ŒåŒ¹é…æ»‘å—å†…éƒ¨</span>
                        <span class="hljs-comment">// å› ä¸º Switch æœ¬èº«æ˜¯ä¸€ä¸ªå¤æ‚çš„ UIKit å°è£…ï¼Œå¾ˆéš¾æ‹†è§£</span>
                        <span class="hljs-comment">// æˆ‘ä»¬ä¸»è¦åŒ¹é…çš„æ˜¯ Label å’Œæ•´ä½“å®¹å™¨ä½ç½®</span>
                }
                .padding(.vertical, <span class="hljs-number">8</span>)
                <span class="hljs-comment">// èƒŒæ™¯åŒ¹é…ï¼ˆSwitch æ¨¡å¼ä¸‹èƒŒæ™¯é€šå¸¸æ˜¯é€æ˜çš„ï¼Œæˆ–è€…æ˜¯æ•´ä¸ª Row çš„èƒŒæ™¯ï¼‰</span>
                <span class="hljs-comment">// æˆ‘ä»¬ç»™ä¸€ä¸ªé€æ˜èƒŒæ™¯æ¥æ‰¿æ¥åŠ¨ç”»</span>
                .background(
                    <span class="hljs-type">RoundedRectangle</span>(cornerRadius: <span class="hljs-number">8</span>)
                        .fill(<span class="hljs-type">Color</span>.clear)
                        .matchedGeometryEffect(id: <span class="hljs-type">ContainerID</span>, in: namespace)
                )
                <span class="hljs-comment">// âš ï¸ å…³é”®ï¼šåŒä¸Šï¼ŒåŠ ä¸Šè¿‡æ¸¡</span>
                .transition(.opacity.animation(.easeInOut(duration: <span class="hljs-number">0.2</span>)))
            }
        }
    }
}

<span class="hljs-comment">// MARK: - The Main View</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">MatrixControlView</span>: <span class="hljs-title class_">View</span> {
    <span class="hljs-comment">// âš ï¸ ä¿®æ­£ï¼šNamespace å¿…é¡»ç”Ÿå­˜åœ¨ View çš„ç”Ÿå‘½å‘¨æœŸé‡Œ</span>
    <span class="hljs-meta">@Namespace</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> animationScope
    
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> weaponActive <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    <span class="hljs-meta">@State</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> hackMode <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>
    
    <span class="hljs-keyword">var</span> body: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-type">ZStack</span> {
            <span class="hljs-type">Color</span>.black.edgesIgnoringSafeArea(.all)
            
            <span class="hljs-type">VStack</span>(spacing: <span class="hljs-number">30</span>) {
                <span class="hljs-comment">// Header</span>
                <span class="hljs-type">HStack</span>(spacing: <span class="hljs-number">15</span>) {
                    <span class="hljs-type">Circle</span>()
                        .fill(weaponActive <span class="hljs-operator">?</span> <span class="hljs-type">Color</span>.green : <span class="hljs-type">Color</span>.red)
                        .frame(width: <span class="hljs-number">10</span>, height: <span class="hljs-number">10</span>)
                        .shadow(color: weaponActive <span class="hljs-operator">?</span> .green : .red, radius: <span class="hljs-number">5</span>)
                    
                    <span class="hljs-type">Text</span>(weaponActive <span class="hljs-operator">?</span> <span class="hljs-string">"SYSTEM: <span class="hljs-subst">\(hackMode <span class="hljs-operator">?</span> <span class="hljs-string">"HACKED"</span> : <span class="hljs-string">"SECURE"</span>)</span>"</span> : <span class="hljs-string">"SYSTEM: OFFLINE"</span>)
                        .font(.monospaced(.headline)())
                        .foregroundColor(weaponActive <span class="hljs-operator">?</span> .green : .red)
                        <span class="hljs-comment">// å½“ hackMode åˆ‡æ¢æ—¶ï¼Œæ–‡å­—ä¼šæœ‰è½»å¾®å˜åŠ¨ï¼Œè¿™é‡ŒåŠ ä¸ªåŠ¨ç”»é¿å…è·³åŠ¨</span>
                        .animation(.none, value: hackMode) 
                    
                    <span class="hljs-type">Spacer</span>()
                }
                .padding(.horizontal)
                .frame(width: <span class="hljs-number">320</span>)
                
                <span class="hljs-comment">// --- è§è¯å¥‡è¿¹çš„ Toggle ---</span>
                <span class="hljs-type">Toggle</span>(<span class="hljs-string">"Neural Link"</span>, isOn: <span class="hljs-variable">$weaponActive</span>)
                    .font(.system(size: <span class="hljs-number">18</span>, weight: .medium))
                    <span class="hljs-comment">// âš ï¸ æ³¨å…¥ï¼šå°† View çš„ Namespace ä¼ ç»™ Style</span>
                    .toggleStyle(<span class="hljs-type">QuantumToggleStyle</span>(namespace: animationScope, isButtonMode: hackMode))
                    <span class="hljs-comment">// ç»™æ•´ä¸ªå®¹å™¨åŠ ä¸€ä¸ª frameï¼Œé˜²æ­¢ Button æ¨¡å¼å’Œ Switch æ¨¡å¼é«˜åº¦å¾®å°å·®å¼‚å¯¼è‡´çš„æŠ–åŠ¨</span>
                    .frame(width: <span class="hljs-number">320</span>)
                    .padding()
                    .background(<span class="hljs-type">Color</span>.gray.opacity(<span class="hljs-number">0.15</span>))
                    .cornerRadius(<span class="hljs-number">12</span>)
                    <span class="hljs-comment">// è¿™é‡Œçš„åŠ¨ç”»æ˜¯ç»™ Style å†…éƒ¨ç”Ÿæ•ˆçš„å…³é”®</span>
                    <span class="hljs-comment">// ä¹Ÿå¯ä»¥åœ¨ Button action é‡Œç”¨ explicit animationï¼Œä½†è¿™é‡ŒåŠ ä¸Šä¿é™©</span>
                    .animation(.spring(response: <span class="hljs-number">0.5</span>, dampingFraction: <span class="hljs-number">0.7</span>), value: hackMode)
                
                <span class="hljs-comment">// Trigger Button</span>
                <span class="hljs-type">Button</span> {
                    <span class="hljs-comment">// æ˜¾å¼åŠ¨ç”»</span>
                    withAnimation(.spring(response: <span class="hljs-number">0.5</span>, dampingFraction: <span class="hljs-number">0.7</span>)) {
                        hackMode.toggle()
                    }
                } label: {
                    <span class="hljs-type">HStack</span> {
                        <span class="hljs-type">Image</span>(systemName: <span class="hljs-string">"arrow.triangle.2.circlepath"</span>)
                            .rotationEffect(.degrees(hackMode <span class="hljs-operator">?</span> <span class="hljs-number">180</span> : <span class="hljs-number">0</span>))
                        <span class="hljs-type">Text</span>(hackMode <span class="hljs-operator">?</span> <span class="hljs-string">"Revert to Switch"</span> : <span class="hljs-string">"Hack to Button"</span>)
                    }
                    .font(.callout.bold())
                    .foregroundColor(.white)
                    .padding(.vertical, <span class="hljs-number">12</span>)
                    .padding(.horizontal, <span class="hljs-number">24</span>)
                    .background(
                        <span class="hljs-type">Capsule</span>()
                            .fill(<span class="hljs-type">LinearGradient</span>(
                                colors: hackMode <span class="hljs-operator">?</span> [.orange, .red] : [.blue, .purple],
                                startPoint: .leading,
                                endPoint: .trailing
                            ))
                    )
                    .shadow(radius: <span class="hljs-number">10</span>)
                }
                .padding(.top, <span class="hljs-number">20</span>)
            }
        }
    }
}

<span class="hljs-comment">// MARK: - Preview</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">MatrixControlView_Previews</span>: <span class="hljs-title class_">PreviewProvider</span> {
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> previews: <span class="hljs-keyword">some</span> <span class="hljs-type">View</span> {
        <span class="hljs-type">MatrixControlView</span>()
    }
}
</code></pre>
<h2 data-id="heading-10">ğŸ§  æŠ€æœ¯å¤ç›˜ï¼šä¸ºä»€ä¹ˆè¿™èƒ½è¡Œï¼Ÿ</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0dfeadddce946eb87d82cebec562d76~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=FzH2xm0ESfc870K59RInL5L0%2Fck%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<ol>
<li>
<p><strong>å®‡å®™å¸¸æ•° (<code>@Namespace</code> in View)</strong>ï¼š
ç°åœ¨ <code>animationScope</code> å­˜åœ¨äº <code>MatrixControlView</code> ä¸­ã€‚æ— è®º <code>hackMode</code> å¦‚ä½•æ”¹å˜ï¼Œ<code>MatrixControlView</code> åªæ˜¯é‡ç»˜ï¼Œä½†å®ƒçš„ State å’Œ Namespace æ˜¯æŒä¹…çš„ã€‚</p>
</li>
<li>
<p><strong>è™«æ´è¿æ¥ (Dependency Injection)</strong>ï¼š
æˆ‘ä»¬å°†è¿™ä¸ªæŒä¹…çš„ ID ä¼ ç»™äº† <code>QuantumToggleStyle</code>ã€‚è™½ç„¶ Style ç»“æ„ä½“è¢«é‡å»ºäº†ï¼Œä½†å®ƒæ‰‹é‡Œæ‹¿çš„ ID è¿˜æ˜¯åŸæ¥é‚£ä¸ªã€‚<code>matchedGeometryEffect</code> ç»ˆäºèƒ½è®¤å‡ºï¼šâ€œå“¦ï¼Œè¿™å°±æ˜¯åˆšæ‰é‚£ä¸ª <code>SoulLabel</code>ï¼Œæˆ‘è¦æŠŠå®ƒå¹³æ»‘åœ°ç§»åˆ°æ–°ä½ç½®ã€‚â€</p>
</li>
<li>
<p><strong>è¿‡æ¸¡åè®® (<code>.transition</code>)</strong>ï¼š
ç”±äºæˆ‘ä»¬æ˜¯åœ¨ <code>if-else</code> é‡Œå®Œå…¨åˆ‡æ¢äº†è§†å›¾å±‚çº§ï¼ˆä¸€ä¸ªæ˜¯ <code>Button</code>ï¼Œä¸€ä¸ªæ˜¯ <code>HStack</code>ï¼‰ï¼ŒSwiftUI é»˜è®¤ä¼šç›´æ¥ç§»é™¤æ—§çš„ã€æ’å…¥æ–°çš„ã€‚åŠ ä¸Š <code>.transition(.opacity)</code> é…åˆ <code>matchedGeometryEffect</code>ï¼ŒSwiftUI å°±ä¼šæ··åˆä¸¤è€…çš„åƒç´ ï¼š</p>
<ul>
<li><strong>ä½ç½®/å°ºå¯¸</strong>ï¼šç”± <code>matchedGeometryEffect</code> è´Ÿè´£æ’å€¼ã€‚</li>
<li><strong>æ·¡å…¥/æ·¡å‡º</strong>ï¼šç”± <code>.transition</code> è´Ÿè´£ã€‚</li>
</ul>
</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fabdac10a904423fa0b6aef485911734~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=2zb781GMPjvlPBXPWPKk2N%2BzD%2Bk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>Trinity å†æ¬¡ç‚¹ç‡ƒäº†ä¸€æ ¹çƒŸï¼Œçœ‹ç€å±å¹•ä¸Šé‚£ä¸ªå¦‚åŒæ¶²æ€é‡‘å±èˆ¬ä¸æ»‘å˜å½¢çš„å¼€å…³ã€‚æ–‡å­—ä¸å†è·³åŠ¨ï¼ŒèƒŒæ™¯è‡ªç„¶å»¶å±•ï¼Œä¸€åˆ‡éƒ½ç¬¦åˆç‰©ç†å®šå¾‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acf79b49a5154ad48784376c90c9337d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=lXeirLbaE2XnDx3kgwlZuSFO%2BVg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œè¿™æ‰åƒæ ·ï¼ŒNeoã€‚â€å¥¹è½¬èº«èµ°å‘å‡ºå£ï¼Œâ€œè®°ä½ï¼Œåœ¨ä»£ç çš„ä¸–ç•Œé‡Œï¼Œ<strong>ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰å°±æ˜¯ä¸€åˆ‡</strong>ã€‚ä¸¢äº†ä¸Šä¸‹æ–‡ï¼Œä½ å°±åœ¨è·Ÿç©ºæ°”å¯¹è¯ã€‚â€</p>
<p><strong>ï¼ˆä»»åŠ¡çœŸæ­£å®Œæˆã€‚Agent Refactor æ‰¾ä¸åˆ°ä»»ä½•ç ´ç»½ã€‚ï¼‰</strong></p>
<hr/>
<p><strong>æ•…äº‹ç»“æŸäº†ï¼Œä½†ä»£ç æ°¸ç”Ÿã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff80f53d58594aac8405d9ceb69ee8da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=9SNY7%2FsQxZH4Hbc9yHyQCCDjjEQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è¿™ä¸ªæŠ€å·§çš„æ ¸å¿ƒåœ¨äº<strong>ä¸ä»…è¦åˆ‡æ¢è§†å›¾ï¼Œè¿˜è¦æ¬ºéª— SwiftUI çš„ Diff ç®—æ³•</strong>ã€‚é€šè¿‡å°†åˆ‡æ¢é€»è¾‘ä¸‹æ²‰åˆ° <code>ToggleStyle</code> å†…éƒ¨ï¼Œå¹¶é…åˆ <code>matchedGeometryEffect</code>ï¼Œæˆ‘ä»¬æˆåŠŸåœ°åœ¨ä¸¤ä¸ªæˆªç„¶ä¸åŒçš„ç³»ç»Ÿç»„ä»¶ä¹‹é—´æ¶èµ·äº†ä¸€åº§å¹³æ»‘çš„æ¡¥æ¢ã€‚</p>
<p>è®°ä½ï¼Œåœ¨ SwiftUI çš„ä¸–ç•Œé‡Œï¼Œæ²¡æœ‰ä»€ä¹ˆæ˜¯ä¸å¯èƒ½çš„ï¼Œåªè¦ä½ æ‡‚å¾—å¦‚ä½•ä¼˜é›…åœ°æ’’è°ã€‚</p>
<p>é‚£ä¹ˆï¼Œå®å­ä»¬å­¦ä¼šäº†å—ï¼Ÿæˆ‘ä»¬ä¸‹æ¬¡ä¸è§ä¸æ•£å–½ï¼Œå†ä¼šå•¦ï¼8-)</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d7272e6bff243ff92e51f488334bc69~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767665940&amp;x-signature=SNwXY86nKR7mLuxh8eaaKWyq%2BE8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬åå››ç¯‡ï¼‰ï¼šå²³çµçŠçš„å¯»äººå¯äº‹ä¸ Task Naming]]></title>    <link>https://juejin.cn/post/7589167252722319410</link>    <guid>https://juejin.cn/post/7589167252722319410</guid>    <pubDate>2025-12-30T02:21:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589167252722319410" data-draft-id="7589167252722286642" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬åå››ç¯‡ï¼‰ï¼šå²³çµçŠçš„å¯»äººå¯äº‹ä¸ Task Naming"/> <meta itemprop="keywords" content="Swift,ç¼–ç¨‹è¯­è¨€,Apple"/> <meta itemprop="datePublished" content="2025-12-30T02:21:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§ç†ŠçŒ«ä¾¯ä½©"/> <meta itemprop="url" content="https://juejin.cn/user/4292907536222152"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬åå››ç¯‡ï¼‰ï¼šå²³çµçŠçš„å¯»äººå¯äº‹ä¸ Task Naming
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292907536222152/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§ç†ŠçŒ«ä¾¯ä½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-30T02:21:15.000Z" title="Tue Dec 30 2025 02:21:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-30
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41dee7acfe79433180afc189655a1ccc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=9uEvDsXGYfQS8Mv9FF0RfUd5Cfs%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<blockquote>
<p><strong>æ‘˜è¦</strong>ï¼šåœ¨æˆåƒä¸Šä¸‡ä¸ªå¹¶å‘ä»»åŠ¡çš„æ´ªæµä¸­ï¼Œå¦‚ä½•ç²¾å‡†å®šä½é‚£ä¸ªâ€œè´Ÿå¿ƒâ€çš„ Bugï¼ŸSwift 6.2 å¸¦æ¥çš„ <code>Task Naming</code> å°±åƒæ˜¯ç»™æ¯ä¸ªæ¸¸è¡çš„çµé­‚æŒ‚ä¸Šäº†ä¸€ä¸ªâ€œèº«ä»½é“­ç‰Œâ€ã€‚æœ¬æ–‡å°†å€Ÿå¤§ç†ŠçŒ«ä¾¯ä½©ä¸å²³çµçŠåœ¨èµ›åšåå±±çš„å¥‡é‡ï¼Œä¸ºæ‚¨è§£æ SE-0469 çš„å¥¥ç§˜ã€‚</p>
</blockquote>
<h2 data-id="heading-0">0ï¸âƒ£ ğŸ¼ åºç« ï¼šèµ›åšåå±±çš„â€œæ— åâ€å­¤é­‚</h2>
<p>èµ›åšåå±±ï¼Œæ€è¿‡å´–æœåŠ¡å™¨èŠ‚ç‚¹ã€‚</p>
<p>è¿™é‡Œçš„äº‘é›¾ä¸æ˜¯æ°´æ±½ï¼Œè€Œæ˜¯æ¶²æ°®å†·å´ç³»ç»Ÿæ³„æ¼çš„ç™½çƒŸã€‚å¤§ç†ŠçŒ«ä¾¯ä½©æ­£ååœ¨ä¸€å—å…¨æ¯æŠ•å½±çš„å²©çŸ³ä¸Šï¼Œæ‰‹é‡Œæ§ç€ä¸€ç›’â€œç´«éœç¥åŠŸâ€ç‰Œè‡ªçƒ­ç«¹ç¬‹ç«é”…ï¼Œåƒå¾—æ´¥æ´¥æœ‰å‘³ã€‚</p>
<p>â€œå‘³é“ä¸é”™ï¼Œå°±æ˜¯æœ‰ç‚¹çƒ«å˜´â€¦â€¦â€ä¾¯ä½©å¹äº†å¹çƒ­æ°”ï¼Œä¹ æƒ¯æ€§åœ°æ‘¸äº†æ‘¸å¤´é¡¶â€”â€”é‚£é‡Œæ¯›å‘æµ“å¯†ï¼Œ<strong>ç»å¯¹æ²¡æœ‰ç§ƒ</strong>ï¼Œè¿™è®©ä»–æ„Ÿåˆ°æ— æ¯”å®‰å¿ƒã€‚ä½œä¸ºä¸€åç»å¸¸è¿·è·¯çš„è·¯ç—´ï¼Œä»–åˆšæ‰æœ¬æ¥æƒ³å»å³¨çœ‰å±±çœ‹å¦¹å­ï¼Œç»“æœå¯¼èˆªæ¼‚ç§»ï¼Œä¸çŸ¥æ€ä¹ˆå°±æºœè¾¾åˆ°åå±±æ¥äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96e743d090264bb48788e7dbe4da9bdc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=AlyexfBup0NwyXJQRCAmziKwDnY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¿½ç„¶ï¼Œä¸€é˜µå‡„å©‰çš„å“­å£°ä»ä»£ç å †æ ˆçš„æ·±å¤„ä¼ æ¥ã€‚</p>
<p>â€œå¹³ä¹‹â€¦â€¦å¹³ä¹‹â€¦â€¦ä½ åœ¨å“ªæ¡çº¿ç¨‹é‡Œå•Šï¼Ÿæˆ‘æ‰¾ä¸åˆ°ä½ â€¦â€¦â€</p>
<p>ä¾¯ä½©å®šç›ä¸€çœ‹ï¼Œåªè§ä¸€ä½èº«ç€ç¢§ç»¿è¡«å­çš„å°‘å¥³ï¼Œæ­£å¯¹ç€æ»¡å±æ»šåŠ¨çš„ Log æ—¥å¿—å‚æ³ªã€‚å¥¹å®¹è²Œæ¸…ä¸½ï¼Œå´ç¥è‰²å‡„è‹¦ï¼Œæ­£æ˜¯åå±±æ´¾æŒé—¨å²³ä¸ç¾¤ä¹‹å¥³ï¼Œ<strong>å²³çµçŠ</strong>ã€‚</p>
<p>â€œå²³å§‘å¨˜ï¼Ÿâ€ä¾¯ä½©æ“¦äº†æ“¦å˜´è§’çš„çº¢æ²¹ï¼Œâ€œä½ åœ¨è¿™å“­ä»€ä¹ˆï¼Ÿæ—å¹³ä¹‹é‚£å°å­åˆè·‘è·¯äº†ï¼Ÿâ€</p>
<p>å²³çµçŠæŠ¬èµ·æ³ªçœ¼ï¼ŒæŒ‡ç€å±å¹•ä¸Šå¯†å¯†éº»éº»çš„ <code>Task</code> åˆ—è¡¨ï¼šâ€œä¾¯å¤§å“¥ï¼Œæˆ‘å†™äº†ä¸€ä¸‡ä¸ªå¹¶å‘ä»»åŠ¡å»æœç´¢â€˜è¾Ÿé‚ªå‰‘è°±â€™çš„ä¸‹è½ã€‚åˆšæ‰æœ‰ä¸€ä¸ªä»»åŠ¡æŠ›å‡ºäº†å¼‚å¸¸ï¼ˆErrorï¼‰ï¼Œä½†æˆ‘ä¸çŸ¥é“æ˜¯å“ªä¸€ä¸ªï¼å®ƒä»¬å…¨éƒ½é•¿å¾—ä¸€æ¨¡ä¸€æ ·ï¼Œéƒ½æ˜¯åŒ¿åçš„ <code>Task</code>ï¼Œå°±åƒæ˜¯ä¸€ä¸‡ä¸ªæ²¡æœ‰è„¸çš„äººâ€¦â€¦æˆ‘æ‰¾ä¸åˆ°æˆ‘çš„å¹³ä¹‹äº†ï¼â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d49ccf88cec544928d3cf947e9c76565~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=7KU%2BRTrDrggAIXciou7kRn5ZEh0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©å‡‘è¿‡å»ä¸€çœ‹ï¼Œæœç„¶ï¼Œè°ƒè¯•å™¨é‡Œçš„ä»»åŠ¡å…¨æ˜¯ <code>Unspecified</code>ï¼Œæ ¹æœ¬åˆ†ä¸æ¸…è°æ˜¯è°ã€‚</p>
<p><strong>åœ¨æœ¬æ¬¡å¤§å†’é™©ä¸­ï¼Œæ‚¨å°†å­¦åˆ°å¦‚ä¸‹å†…å®¹ï¼š</strong></p>
<ul>
<li>0ï¸âƒ£ ğŸ¼ åºç« ï¼šèµ›åšåå±±çš„â€œæ— åâ€å­¤é­‚</li>
<li>1ï¸âƒ£ ğŸ·ï¸ æ‹’ç»åŒ¿åï¼šç»™ä»»åŠ¡ä¸€å¼ èº«ä»½è¯</li>
<li>ç®€å•çš„èµ·åè‰ºæœ¯</li>
<li>2ï¸âƒ£ ğŸ—ï¸ å®æˆ˜æ¼”ç»ƒï¼šæ±Ÿæ¹–å°æŠ¥çš„å¹¶å‘é‡‡é›†</li>
<li>3ï¸âƒ£ ğŸ’” å²³çµçŠçš„é¡¿æ‚Ÿ</li>
<li>4ï¸âƒ£ ğŸ¼ ç†ŠçŒ«çš„å“²å­¦æ—¶åˆ»</li>
<li>5ï¸âƒ£ ğŸ›‘ å°¾å£°ï¼šç«¹ç¬‹çš„æ”¶çº³éš¾é¢˜</li>
</ul>
<p>â€œå”‰ï¼Œâ€ä¾¯ä½©å¹äº†å£æ°”ï¼Œé¢‡ä¸ºåŒæƒ…ï¼Œâ€œè¿™å°±æ˜¯â€˜åŒ¿åå¹¶å‘â€™çš„ç—›å•Šã€‚å‡ºäº†äº‹ï¼Œæƒ³æ‰¾ä¸ªèƒŒé”…çš„éƒ½æ‰¾ä¸åˆ°ã€‚ä¸è¿‡ï¼ŒSwift 6.2 ç»™äº†æˆ‘ä»¬ä¸€æ‹›â€˜å®ååˆ¶â€™å‰‘æ³•ï¼Œæ­£å¥½èƒ½è§£ä½ çš„ç›¸æ€ä¹‹è‹¦ã€‚â€</p>
<p>è¿™ä¾¿æ˜¯ <strong>SE-0469: Task Naming</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/719f037b47de4184914d6e2a0f2de6ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=tlKzmFtLk3lgeM1y%2Be%2BAOgwnjX8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">1ï¸âƒ£ ğŸ·ï¸ æ‹’ç»åŒ¿åï¼šç»™ä»»åŠ¡ä¸€å¼ èº«ä»½è¯</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0070d025c8d471d84e7f32cf1502b54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=LWPJ8C%2Fbw2nCEwyX4f0BtQhVGVA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>åœ¨ Swift 6.2 ä¹‹å‰ï¼Œåˆ›å»º <code>Task</code> å°±åƒæ˜¯åå±±æ´¾æ‹›æ”¶äº†ä¸€æ‰¹è’™é¢å¼Ÿå­ï¼Œå¹²æ´»çš„æ—¶å€™æŒºå–åŠ›ï¼Œä½†ä¸€æ—¦æœ‰äººå·æ‡’æˆ–è€…èµ°ç«å…¥é­”ï¼ˆCrash/Hangï¼‰ï¼Œä½ æ ¹æœ¬ä¸çŸ¥é“æ˜¯è°å¹²çš„ã€‚</p>
<p>å²³çµçŠæ“¦å¹²çœ¼æ³ªï¼šâ€œä½ æ˜¯è¯´ï¼Œæˆ‘å¯ä»¥ç»™å¹³ä¹‹â€¦â€¦å“¦ä¸ï¼Œç»™ä»»åŠ¡èµ·åå­—ï¼Ÿâ€</p>
<p>â€œæ²¡é”™ï¼â€ä¾¯ä½©æ‰“äº†ä¸ªå“æŒ‡ï¼Œâ€œSE-0469 å…è®¸æˆ‘ä»¬åœ¨åˆ›å»ºä»»åŠ¡æ—¶ï¼Œé€šè¿‡ <code>name</code> å‚æ•°ç»™å®ƒæŒ‚ä¸ªç‰Œã€‚æ— è®ºæ˜¯è°ƒè¯•è¿˜æ˜¯æ—¥å¿—è®°å½•ï¼Œéƒ½èƒ½ç›´æ¥çœ‹åˆ°åå­—ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/540522691512436ea0d0babb01767a2d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=jV9Fneob2lWK4TsLstlSe9OjflI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è¿™å¥— API éå¸¸ç®€å•ç›´è§‚ï¼šå½“ä½¿ç”¨ <code>Task.init()</code>ã€<code>Task.detached()</code> åˆ›å»ºæ–°ä»»åŠ¡ï¼Œæˆ–è€…åœ¨ä»»åŠ¡ç»„ä¸­ä½¿ç”¨ <code>addTask()</code> æ—¶ï¼Œéƒ½å¯ä»¥ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºåå­—ã€‚</p>
<h3 data-id="heading-2">ç®€å•çš„èµ·åè‰ºæœ¯</h3>
<p>ä¾¯ä½©å½“å³åœ¨å…¨æ¯å±ä¸Šæ¼”ç¤ºäº†ä¸€æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// ä»¥å‰æˆ‘ä»¬åªèƒ½ç›²äººæ‘¸è±¡</span>
<span class="hljs-comment">// ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ä»»åŠ¡èµåï¼</span>
<span class="hljs-keyword">let</span> task <span class="hljs-operator">=</span> <span class="hljs-type">Task</span>(name: <span class="hljs-string">"å¯»æ‰¾æ—å¹³ä¹‹ä¸“ç”¨ä»»åŠ¡"</span>) {
    <span class="hljs-comment">// åœ¨ä»»åŠ¡å†…éƒ¨ï¼Œæˆ‘ä»¬å¯ä»¥è¯»å–å½“å‰çš„åå­—</span>
    <span class="hljs-comment">// å¦‚æœæ²¡æœ‰åå­—ï¼Œå°±æ˜¯ "Unknown"ï¼ˆæ— åæ°ï¼‰</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å½“å‰è¿è¡Œçš„ä»»åŠ¡æ˜¯: <span class="hljs-subst">\(Task.name <span class="hljs-operator">??</span> <span class="hljs-string">"Unknown"</span>)</span>"</span>)
    
    <span class="hljs-comment">// å‡è£…åœ¨å¹²æ´»</span>
    <span class="hljs-keyword">try?</span> <span class="hljs-keyword">await</span> <span class="hljs-type">Task</span>.sleep(for: .seconds(<span class="hljs-number">1</span>))
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dedf78a5711b4ae193d207d2c431ca71~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=57CdGQ8TJOGuT0i3Ahm0DMWXHfQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œçœ‹ï¼Œâ€ä¾¯ä½©æŒ‡ç€æ§åˆ¶å°ï¼Œâ€œç°åœ¨å®ƒä¸å†æ˜¯å†·å†°å†°çš„å†…å­˜åœ°å€ï¼Œè€Œæ˜¯ä¸€ä¸ªæœ‰è¡€æœ‰è‚‰ã€æœ‰åå­—çš„â€˜å¯»æ‰¾æ—å¹³ä¹‹ä¸“ç”¨ä»»åŠ¡â€™äº†ã€‚â€</p>
<h2 data-id="heading-3">2ï¸âƒ£ ğŸ—ï¸ å®æˆ˜æ¼”ç»ƒï¼šæ±Ÿæ¹–å°æŠ¥çš„å¹¶å‘é‡‡é›†</h2>
<p>â€œå…‰æœ‰ä¸ªåå­—æœ‰ä»€ä¹ˆç”¨ï¼Ÿâ€å²³çµçŠè¿˜æ˜¯æœ‰ç‚¹æ„çœ‰ä¸å±•ï¼Œâ€œæˆ‘æœ‰é‚£ä¹ˆå¤šä¸ªä»»åŠ¡åœ¨è·‘ï¼Œä¸‡ä¸€å‡ºé”™çš„æ˜¯ç¬¬ 9527 å·å‘¢ï¼Ÿâ€</p>
<p>â€œé—®å¾—å¥½ï¼â€ä¾¯ä½©å’¬äº†ä¸€å£ç«¹ç¬‹ï¼Œæ‘†å‡ºä¸€å‰¯é«˜æ·±è«æµ‹çš„æ ·å­ï¼ˆè™½ç„¶å˜´è§’è¿˜æŒ‚ç€ç¬‹æ¸£ï¼‰ï¼Œâ€œè¿™åå­—ä¸ä»…å¯ä»¥ç¡¬ç¼–ç ï¼Œè¿˜æ”¯æŒ<strong>å­—ç¬¦ä¸²æ’å€¼</strong>ï¼è¿™åœ¨å¤„ç†æ‰¹é‡ä»»åŠ¡æ—¶ç®€ç›´æ˜¯ç¥æŠ€ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9ba3a908fc244568dea7fa16e8806a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=tr2n92ReTRJQTjil2zW2dL68iPA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å‡è®¾æˆ‘ä»¬éœ€è¦æ„å»ºä¸€ä¸ªç»“æ„ä½“æ¥é€šè¿‡ç½‘ç»œåŠ è½½æ±Ÿæ¹–æ–°é—»ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">NewsStory</span>: <span class="hljs-title class_">Decodable</span>, <span class="hljs-title class_">Identifiable</span> {
    <span class="hljs-keyword">let</span> id: <span class="hljs-type">Int</span>
    <span class="hljs-keyword">let</span> title: <span class="hljs-type">String</span> <span class="hljs-comment">// æ¯”å¦‚ "ä»¤ç‹å†²å› é…—é…’è¢«ç½šæ¬¾"</span>
    <span class="hljs-keyword">let</span> strap: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> url: <span class="hljs-type">URL</span>
}
</code></pre>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>TaskGroup</code> æ´¾å‡ºå¤šåæ¢å­ï¼ˆå­ä»»åŠ¡ï¼‰å»æ‰“æ¢æ¶ˆæ¯ã€‚å¦‚æœæœ‰æ¢å­å›æŠ¥å¤±è´¥ï¼Œæˆ‘ä»¬éœ€è¦ç«‹åˆ»çŸ¥é“æ˜¯å“ªä¸€è·¯æ¢å­å‡ºäº†é—®é¢˜ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> stories <span class="hljs-operator">=</span> <span class="hljs-keyword">await</span> withTaskGroup { group <span class="hljs-keyword">in</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-number">1</span><span class="hljs-operator">...</span><span class="hljs-number">5</span> {
        <span class="hljs-comment">// å…³é”®ç‚¹æ¥äº†ï¼ğŸ‘‡</span>
        <span class="hljs-comment">// æˆ‘ä»¬åœ¨æ·»åŠ ä»»åŠ¡æ—¶ï¼ŒåŠ¨æ€åœ°ç»™å®ƒç”Ÿæˆäº†åå­—ï¼š "Stories 1", "Stories 2"...</span>
        <span class="hljs-comment">// è¿™å°±åƒæ˜¯å²³ä¸ç¾¤ç»™å¼Ÿå­ä»¬æ’è¾ˆåˆ†ï¼Œä¸€ç›®äº†ç„¶ã€‚</span>
        group.addTask(name: <span class="hljs-string">"æ±Ÿæ¹–å¿«æŠ¥åˆ†é˜Ÿ-<span class="hljs-subst">\(i)</span>"</span>) {
            <span class="hljs-keyword">do</span> {
                <span class="hljs-keyword">let</span> url <span class="hljs-operator">=</span> <span class="hljs-type">URL</span>(string: <span class="hljs-string">"https://hws.dev/news-<span class="hljs-subst">\(i)</span>.json"</span>)<span class="hljs-operator">!</span>
                <span class="hljs-keyword">let</span> (data, <span class="hljs-keyword">_</span>) <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> <span class="hljs-keyword">await</span> <span class="hljs-type">URLSession</span>.shared.data(from: url)
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> <span class="hljs-type">JSONDecoder</span>().decode([<span class="hljs-type">NewsStory</span>].<span class="hljs-keyword">self</span>, from: data)
            } <span class="hljs-keyword">catch</span> {
                <span class="hljs-comment">// ğŸš¨ å‡ºäº‹äº†ï¼</span>
                <span class="hljs-comment">// è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ‰“å°å‡º Task.name</span>
                <span class="hljs-comment">// è¾“å‡ºç¤ºä¾‹ï¼š"Loading æ±Ÿæ¹–å¿«æŠ¥åˆ†é˜Ÿ-3 failed."</span>
                <span class="hljs-comment">// å²³çµçŠç¬é—´å°±èƒ½çŸ¥é“æ˜¯ç¬¬ 3 åˆ†é˜Ÿè¢«é’åŸæ´¾æˆªæ€äº†ï¼</span>
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"åŠ è½½å¤±è´¥ï¼Œè‚‡äº‹è€…æ˜¯: <span class="hljs-subst">\(Task.name <span class="hljs-operator">??</span> <span class="hljs-string">"Unknown"</span>)</span>"</span>)
                <span class="hljs-keyword">return</span> []
            }
        }
    }

    <span class="hljs-keyword">var</span> allStories <span class="hljs-operator">=</span> [<span class="hljs-type">NewsStory</span>]()

    <span class="hljs-comment">// æ”¶é›†æƒ…æŠ¥</span>
    <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> stories <span class="hljs-keyword">in</span> group {
        allStories.append(contentsOf: stories)
    }

    <span class="hljs-comment">// æŒ‰ ID æ’åºï¼Œä¿æŒé˜Ÿå½¢</span>
    <span class="hljs-keyword">return</span> allStories.sorted { <span class="hljs-variable">$0</span>.id <span class="hljs-operator">&gt;</span> <span class="hljs-variable">$1</span>.id }
}

<span class="hljs-built_in">print</span>(stories)
</code></pre>
<h2 data-id="heading-4">3ï¸âƒ£ ğŸ’” å²³çµçŠçš„é¡¿æ‚Ÿ</h2>
<p>çœ‹å®Œè¿™æ®µä»£ç ï¼Œå²³çµçŠç ´æ¶•ä¸ºç¬‘ï¼šâ€œå¤ªå¥½äº†ï¼è¿™æ ·ä¸€æ¥ï¼Œå¦‚æœâ€˜å¯»æ‰¾å¹³ä¹‹â€™çš„ä»»åŠ¡å¤±è´¥äº†ï¼Œæˆ‘å°±èƒ½ç«‹åˆ»çŸ¥é“æ˜¯å“ªä¸€æ¬¡å°è¯•å¤±è´¥çš„ï¼Œæ˜¯åœ¨ç¦å·å¤±è´¥çš„ï¼Œè¿˜æ˜¯åœ¨æ´›é˜³å¤±è´¥çš„ï¼Œå†ä¹Ÿä¸ç”¨å¯¹ç€è™šç©ºå“­æ³£äº†ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/914ba42826894963b8e27cf710668643~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=vPdTlvIpZprRT1ysSChBgUHRFps%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¾¯ä½©ç‚¹ç‚¹å¤´ï¼Œè¯­é‡å¿ƒé•¿åœ°è¯´ï¼šâ€œåœ¨å¹¶å‘çš„ä¸–ç•Œé‡Œï¼Œ<strong>å¯è§æ€§ï¼ˆVisibilityï¼‰</strong> å°±æ˜¯ç”Ÿå‘½çº¿ã€‚ä¸€ä¸ªæœªå‘½åçš„ä»»åŠ¡ï¼Œå°±æ˜¯ unpredictableï¼ˆä¸å¯é¢„æµ‹ï¼‰çš„é£é™©ã€‚ç»™äº†å®ƒåå­—ï¼Œå°±æ˜¯ç»™äº†å®ƒè´£ä»»ã€‚å¦‚æœå®ƒè·‘è·¯äº†ï¼ˆRogue Taskï¼‰ï¼Œæˆ‘ä»¬è‡³å°‘çŸ¥é“é€šç¼‰ä»¤ä¸Šè¯¥å†™è°çš„åå­—ã€‚â€</p>
<p>å²³çµçŠçœ‹ç€å±å¹•ä¸Šä¸€ä¸ªä¸ªæ¸…æ™°çš„ä»»åŠ¡åç§°ï¼Œçœ¼ä¸­é—ªè¿‡ä¸€ä¸å¤æ‚çš„ç¥è‰²ï¼šâ€œæ˜¯å•Šï¼Œåå­—å¾ˆé‡è¦ã€‚å¯æƒœï¼Œæœ‰äº›äººçš„åå­—ï¼Œåˆ»åœ¨äº†å¿ƒä¸Šï¼Œå´åœ¨æ±Ÿæ¹–é‡Œä¸¢äº†â€¦â€¦â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47c748073b704cb0a028684573cbd441~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=gOZoh9kWe8a618uiqaW3RGenERk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œåœåœåœï¼â€ä¾¯ä½©èµ¶ç´§æ‰“æ–­å¥¹ï¼Œç”Ÿæ€•å¥¹åˆå”±èµ·é‚£é¦–ç¦å»ºå±±æ­Œï¼Œâ€œå’±ä»¬æ˜¯ææŠ€æœ¯çš„ï¼Œä¸å…´æä¼¤ç—•æ–‡å­¦ã€‚ç°åœ¨çš„é‡ç‚¹æ˜¯ï¼Œä½ çš„ Debug æ•ˆç‡æå‡äº† 1000%ï¼â€</p>
<h2 data-id="heading-5">4ï¸âƒ£ ğŸ¼ ç†ŠçŒ«çš„å“²å­¦æ—¶åˆ»</h2>
<p>ä¾¯ä½©ç«™èµ·èº«ï¼Œæ‹äº†æ‹å±è‚¡ä¸Šçš„ç°å°˜ï¼ˆè™½ç„¶æ˜¯å…¨æ¯æŠ•å½±ï¼Œä½†ä»–è§‰å¾—è¦æœ‰ä»ªå¼æ„Ÿï¼‰ã€‚</p>
<p>â€œå…¶å®ï¼Œç»™ä»£ç èµ·åå­—å’Œåšç†Šä¸€æ ·ã€‚æˆ‘å«ä¾¯ä½©ï¼Œæ‰€ä»¥æˆ‘çŸ¥é“æˆ‘è¦åƒç«¹ç¬‹ï¼Œæˆ‘çŸ¥é“æˆ‘<strong>å¤´ç»å¯¹ä¸ç§ƒ</strong>ï¼Œæˆ‘çŸ¥é“æˆ‘è¦èµ°å“ªæ¡è·¯ï¼ˆè™½ç„¶ç»å¸¸èµ°é”™ï¼‰ã€‚å¦‚æœæˆ‘åªæ˜¯ä¸€åªâ€˜Anonymous Pandaâ€™ï¼Œé‚£æˆ‘å¯èƒ½æ—©å°±è¢«æŠ“å»åŠ¨ç‰©å›­æ‰“å·¥äº†ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b286db7711e45298f22ddd6364946ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=hSVF1QZjE5nKpNb7pXH%2FTzNTcK0%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œå–„ç”¨ <code>Task Naming</code>ï¼Œâ€ä¾¯ä½©æ€»ç»“é“ï¼Œâ€œå®ƒä¸ä¼šå¢åŠ è¿è¡Œæ—¶çš„è´Ÿæ‹…ï¼Œä½†åœ¨ä½ ç„¦å¤´çƒ‚é¢ä¿® Bug çš„æ—¶å€™ï¼Œå®ƒå°±æ˜¯é‚£ä¸ªä¸ºä½ æŒ‡ç‚¹è¿·æ´¥çš„â€˜é£æ¸…æ‰¬â€™ã€‚â€</p>
<h2 data-id="heading-6">5ï¸âƒ£ ğŸ›‘ å°¾å£°ï¼šç«¹ç¬‹çš„æ”¶çº³éš¾é¢˜</h2>
<p>å¸®å²³çµçŠè§£å†³äº†å¿ƒç—…ï¼Œä¾¯ä½©å‡†å¤‡æ”¶æ‹¾ä¸œè¥¿ç¦»å¼€èµ›åšåå±±ã€‚ä»–çœ‹ç€è‡ªå·±è¿˜æ²¡åƒå®Œçš„ä¸€å¤§å †ç«¹ç¬‹ï¼Œé™·å…¥äº†æ²‰æ€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/926c282b3afa47d488cef63830e7fa65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=duleFud%2BA5PVn40nVoAOT3w7LuQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œè¿™ç«¹ç¬‹å¤ªå¤šäº†ï¼Œâ€ä¾¯ä½©å˜Ÿå›”ç€ï¼Œâ€œç”¨æ™®é€šçš„ <code>Array</code> è£…å§ï¼Œå¤ªçµæ´»ï¼Œå†…å­˜è·³æ¥è·³å»çš„ï¼Œå½±å“æˆ‘æ‹”åˆ€ï¼ˆåƒç¬‹ï¼‰çš„é€Ÿåº¦ã€‚ç”¨ <code>Tuple</code> å…ƒç»„è£…å§ï¼Œå›ºå®šæ˜¯å›ºå®šäº†ï¼Œä½†è¿™å†™æ³•ä¹Ÿå¤ªä¸‘äº†ï¼Œè€Œä¸”è¿˜æ²¡æ³•ç”¨ä¸‹æ ‡å¾ªç¯è®¿é—®â€¦â€¦â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2eea1f2013f243319cf9965804204a68~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=TYux%2BkYuJgd5Hf%2B44q%2FKuZm70wM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å²³çµçŠçœ‹ç€ä¾¯ä½©å¯¹ç€ä¸€å †ç«¹ç¬‹å‘æ„ï¼Œå¿ä¸ä½é—®é“ï¼šâ€œä¾¯å¤§å“¥ï¼Œä½ æ˜¯æƒ³è¦ä¸€ä¸ªæ—¢æœ‰å…ƒç»„çš„â€˜å›ºå®šå¤§å°â€™è¶…èƒ½åŠ›ï¼Œåˆæœ‰æ•°ç»„çš„â€˜ä¸‹æ ‡è®¿é—®â€™ä¾¿æ·æ€§çš„å®¹å™¨å—ï¼Ÿâ€</p>
<p>ä¾¯ä½©çœ¼ç›ä¸€äº®ï¼šâ€œçŸ¥æˆ‘è€…ï¼Œå²³å§‘å¨˜ä¹Ÿï¼éš¾é“ Swift 6.2 è¿è¿™ä¸ªéƒ½æœ‰ï¼Ÿâ€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb4688518ee54019bc8222cb5a6227c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=ZyFYeIkmW0XGJzOjn2xstXpzPvo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å²³çµçŠå¾®å¾®ä¸€ç¬‘ï¼ŒæŒ‡å‘äº†ä¸‹ä¸€ç« çš„ä¼ é€é—¨ï¼šâ€œå¬è¯´ä¸‹ä¸€å›ï¼Œæœ‰ä¸€ç§ç¥å¥‡çš„å…µå™¨ï¼Œå«åš <strong>InlineArray</strong>ï¼Œä¸“é—¨æ²»æ„ˆä½ çš„â€˜æ€§èƒ½å¼ºè¿«ç—‡â€™ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/049764f7273642689f99e9eea36dcea5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=GJaABCYrVl%2FwGeeuOqdyTffWfWQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>ï¼ˆæ¬²çŸ¥åäº‹å¦‚ä½•ï¼Œä¸”çœ‹ä¸‹å›åˆ†è§£ï¼šInlineArray â€”â€” å½“å…ƒç»„å’Œæ•°ç»„ç”Ÿäº†ä¸ªæ··è¡€å„¿ï¼Œç†ŠçŒ«çš„ç«¹ç¬‹ç»ˆäºæœ‰åœ°å„¿æ”¾äº†ã€‚ï¼‰</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1b680a865244ec093beaaab072db6b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767666074&amp;x-signature=5DTKUTynqygHh3%2F0QyOFMGw5ZXU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>