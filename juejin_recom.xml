<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[æœ¬åœ°é…ç½®host]]></title>    <link>https://juejin.cn/post/7602776926327308342</link>    <guid>https://juejin.cn/post/7602776926327308342</guid>    <pubDate>2026-02-04T09:48:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602776926327308342" data-draft-id="7602814773495988266" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœ¬åœ°é…ç½®host"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-04T09:48:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¹¸ç¦å°å®"/> <meta itemprop="url" content="https://juejin.cn/user/1856420109622520"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœ¬åœ°é…ç½®host
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1856420109622520/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¹¸ç¦å°å®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T09:48:10.000Z" title="Wed Feb 04 2026 09:48:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><blockquote>
<p>æ³¨æ„äº‹é¡¹</p>
</blockquote>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fxx.demo.com%3A8000%2F%23%2F" target="_blank" title="https://xx.demo.com:8000/#/" ref="nofollow noopener noreferrer">xx.demo.com:8000/#/</a>  è¿™ä¸ªè¦å’Œå›¾ç‰‡é…ç½®çš„åŸŸåä¸€è‡´(ç»†å¿ƒç‚¹)æ‰èƒ½æ‰“å¼€ æ³¨æ„httpå’Œhttps</li>
</ol>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a643310aa0e34d95bc5f5d2233204ba5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bm456aP5bCP5a6d:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803290&amp;x-signature=6Z5IcasrXF%2BVq2Vv0AwlQyzb90s%3D" alt="image.png" loading="lazy"/></p>
<ol start="2">
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Flocalhost%3A8000" target="_blank" title="https://localhost:8000" ref="nofollow noopener noreferrer">https://localhost:8000</a> è¿™ä¸ªåœ°å€èƒ½å¯åŠ¨ é…ç½®çš„åœ°å€å°±èƒ½å¯åŠ¨ ä¸èƒ½å¯åŠ¨å°±æ˜¯åœ°å€ä¸å¯¹</p>
</li>
<li>
<p>å¦‚æœé…ç½®å®Œæ˜¾ç¤ºå¦‚ä¸‹ éœ€è¦æ¸…ç†dnsç¼“å­˜</p>
</li>
</ol>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd1435c6c7fc40a9a8c861a5bf15286d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bm456aP5bCP5a6d:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803290&amp;x-signature=Ks6jfp8%2BRcp5vqWg0owlhEPlLFg%3D" alt="image.png" width="50%" loading="lazy"/></p>
<ul>
<li>åœ¨ Chrome æµè§ˆå™¨çš„åœ°å€æ ä¸­è¾“å…¥ <code>chrome://net-internals/#dns</code></li>
<li>åœ¨æ‰“å¼€çš„é¡µé¢ä¸­ï¼Œæ‰¾åˆ°å¹¶ç‚¹å‡» â€Œ <strong>â€œClear host cacheâ€</strong> â€Œ æŒ‰é’®ã€‚ â€Œ</li>
<li>æ‰§è¡Œå®Œä¸Šè¿°æ­¥éª¤åï¼ŒChrome çš„ DNS ç¼“å­˜å³è¢«æ¸…é™¤ã€‚æ­¤æ“ä½œæ— éœ€é‡å¯æµè§ˆå™¨å³å¯ç”Ÿæ•ˆã€‚</li>
<li>å¦‚æœè¿˜æ˜¯ä¸å¯¹æ¸…ç†æµè§ˆå™¨ç¼“å­˜</li>
</ul>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fab929f298554d9daf0250a182517732~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bm456aP5bCP5a6d:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803290&amp;x-signature=hxEN1HPTDDZK36LOtz4rrx2KCfE%3D" alt="image.png" width="50%" loading="lazy"/></p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae0365fa9076457e980caeefad85dc78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bm456aP5bCP5a6d:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803290&amp;x-signature=dVIc4kj8Rrp8pqc%2F%2F%2FTR92Be6pQ%3D" alt="image.png" width="50%" loading="lazy"/></p>
<blockquote>
<p><strong>chrome://net-internals/#sockets</strong> åˆ·æ–°Socketæ± ä»¥é‡ç½®ç½‘ç»œè¿æ¥</p>
</blockquote>
<blockquote>
<p>done</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å¹¶å‘å¤„ç†æœ€ä½³å®è·µï¼šToken å…±äº«èµ„æºçš„å•ä¾‹ Promise æ¨¡å¼]]></title>    <link>https://juejin.cn/post/7602553969971052598</link>    <guid>https://juejin.cn/post/7602553969971052598</guid>    <pubDate>2026-02-04T09:51:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602553969971052598" data-draft-id="7602543146237591595" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å¹¶å‘å¤„ç†æœ€ä½³å®è·µï¼šToken å…±äº«èµ„æºçš„å•ä¾‹ Promise æ¨¡å¼"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-04T09:51:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€æ‹³ä¸æ˜¯è¶…äºº"/> <meta itemprop="url" content="https://juejin.cn/user/3456520289261902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å¹¶å‘å¤„ç†æœ€ä½³å®è·µï¼šToken å…±äº«èµ„æºçš„å•ä¾‹ Promise æ¨¡å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3456520289261902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€æ‹³ä¸æ˜¯è¶…äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T09:51:04.000Z" title="Wed Feb 04 2026 09:51:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼šå¤šä¸ªç‹¬ç«‹çš„ç»„ä»¶æˆ–äº‹ä»¶æµï¼ˆEvent Streamï¼‰å‡ ä¹åŒæ—¶è§¦å‘ï¼Œå®ƒä»¬éƒ½éœ€è¦ä¾èµ–åŒä¸€ä¸ªå¼‚æ­¥è·å–çš„èµ„æºâ€”â€”æ¯”å¦‚é‰´æƒ Tokenã€‚</p>
<p>å¦‚æœå¤„ç†ä¸å½“ï¼Œå°±ä¼šå¯¼è‡´Â <strong>Race Conditionï¼ˆç«æ€æ¡ä»¶ï¼‰</strong> Â æˆ–è€…Â <strong>é‡å¤çš„ç½‘ç»œè¯·æ±‚</strong>ã€‚ä»Šå¤©æˆ‘ä»¬æ¥åˆ†äº«ä¸€ç§ç®€å•è€Œå¥å£®çš„æœ€ä½³å®è·µï¼š<strong>Singleton Promise Patternï¼ˆå•ä¾‹ Promise æ¨¡å¼ï¼‰</strong> ã€‚</p>
<h2 data-id="heading-0">å¸¸è§é—®é¢˜ï¼šå¹¶å‘åœ°ç‹±</h2>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ªÂ <code>audio-to-text</code>ï¼ˆè¯­éŸ³è½¬æ–‡å­—ï¼‰çš„åŠŸèƒ½ï¼Œæ¯æ¬¡è§¦å‘éƒ½éœ€è¦å…ˆè·å–ä¸€ä¸ªä¸´æ—¶çš„ API Tokenã€‚</p>
<p>å¦‚æœç”¨æˆ·è¿ç»­å¿«é€Ÿæ’­æ”¾äº† 3 æ¡è¯­éŸ³ï¼Œæˆ–è€…é¡µé¢åˆå§‹åŒ–æ—¶æœ‰å¤šä¸ªç»„ä»¶åŒæ—¶è¯·æ±‚ Tokenï¼Œå¯èƒ½ä¼šå‘ç”Ÿä»¥ä¸‹æƒ…å†µï¼š</p>
<ol>
<li><strong>èµ„æºæµªè´¹</strong>ï¼šå‘èµ·äº† 3 æ¬¡è·å– Token çš„ç½‘ç»œè¯·æ±‚ï¼Œä½†å®é™…ä¸Šåªéœ€è¦ 1 æ¬¡ã€‚</li>
<li><strong>çŠ¶æ€ä¸ä¸€è‡´</strong>ï¼šç¬¬ 1 ä¸ªè¯·æ±‚æˆåŠŸäº†ï¼Œä½†åœ¨å®ƒå†™å…¥æœ¬åœ°ç¼“å­˜ä¹‹å‰ï¼Œç¬¬ 2 ä¸ªè¯·æ±‚åˆå‘èµ·äº†ã€‚</li>
<li><strong>æ­»é”/æ— é™ç­‰å¾…</strong>ï¼šä½¿ç”¨ç®€å•çš„Â <code>isLoading</code>Â é”ï¼Œå¦‚æœä»£ç é€»è¾‘åœ¨å¼‚å¸¸å¤„ç†ï¼ˆcatchï¼‰ä¸­é—æ¼äº†é‡ç½®é”ï¼Œå¯¼è‡´åç»­è¯·æ±‚ä¸€ç›´ pendingã€‚</li>
</ol>
<h2 data-id="heading-1">è§£å†³æ–¹æ¡ˆï¼šå•ä¾‹ Promise æ¨¡å¼</h2>
<p>æ ¸å¿ƒæ€æƒ³éå¸¸ç®€å•ï¼š<strong>å°†"æ­£åœ¨è¿›è¡Œçš„è¯·æ±‚"ç¼“å­˜èµ·æ¥ï¼Œè€Œä¸æ˜¯åªç¼“å­˜ç»“æœã€‚</strong></p>
<p>å¯¹äºå…±äº«èµ„æºï¼Œæˆ‘ä»¬ç»´æŠ¤ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ Promiseã€‚</p>
<ul>
<li>å½“ç¬¬ä¸€ä¸ªè¯·æ±‚è¿›æ¥æ—¶ï¼Œåˆ›å»ºä¸€ä¸ª Promise å¹¶å‘èµ·è¯·æ±‚ã€‚</li>
<li>å½“åç»­è¯·æ±‚è¿›æ¥æ—¶ï¼Œå¦‚æœå‘ç°å·²ç»æœ‰ä¸€ä¸ª Promise åœ¨ pendingï¼Œç›´æ¥å¤ç”¨å¹¶è¿”å›è¿™ä¸ª Promiseã€‚</li>
<li>æ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼ŒPromise settled åï¼Œæ¸…ç†çŠ¶æ€ï¼Œä»¥ä¾¿ä¸‹æ¬¡å¯ä»¥å‘èµ·æ–°è¯·æ±‚ã€‚</li>
</ul>
<h3 data-id="heading-2">ä»£ç å®ç°æ¨¡æ¿</h3>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¥å£®çš„å®ç°æ¨¡æ¿ï¼ŒåŒ…å«äº†Â <strong>é˜²æŠ–ï¼ˆDebounceï¼‰</strong> ã€<strong>å¼‚å¸¸å®‰å…¨ï¼ˆException Safetyï¼‰</strong> Â å’ŒÂ <strong>çŠ¶æ€å¤ä½</strong>ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å…¨å±€çŠ¶æ€å˜é‡</span>
<span class="hljs-keyword">let</span> getTokenTask = <span class="hljs-literal">null</span>; <span class="hljs-comment">// å­˜å‚¨æ­£åœ¨è¿›è¡Œçš„ Promise</span>
<span class="hljs-keyword">let</span> isGettingToken = <span class="hljs-literal">false</span>; <span class="hljs-comment">// é”æ ‡è®°</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getSharedToken</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// 1. æ£€æŸ¥æœ¬åœ°ç¼“å­˜æ˜¯å¦æœ‰æ•ˆ</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isTokenValid</span>()) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">getTokenFromStorage</span>();
  }
  <span class="hljs-comment">// 2. å¹¶å‘æ‹¦æˆªï¼šå¦‚æœæœ‰æ­£åœ¨è¿›è¡Œçš„ä»»åŠ¡ï¼Œç›´æ¥å¤ç”¨ï¼Œä¸å‘èµ·æ–°è¯·æ±‚</span>
  <span class="hljs-keyword">if</span> (isGettingToken &amp;&amp; getTokenTask) {
    <span class="hljs-keyword">return</span> getTokenTask;
  }
  <span class="hljs-comment">// 3. åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„å•ä¾‹ä»»åŠ¡</span>
  isGettingToken = <span class="hljs-literal">true</span>;
  
  <span class="hljs-comment">// åˆ›å»º Promise é—­åŒ…ï¼Œç¡®ä¿æˆ‘ä»¬å¯ä»¥æ§åˆ¶ resolve</span>
  <span class="hljs-keyword">let</span> taskResolve = <span class="hljs-literal">null</span>;
  getTokenTask = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    taskResolve = resolve;
  });
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// 4. æ‰§è¡Œå®é™…çš„å¼‚æ­¥æ“ä½œ</span>
    <span class="hljs-keyword">const</span> token = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchTokenFromServer</span>();
    
    <span class="hljs-comment">// 5. ç¼“å­˜ç»“æœ</span>
    <span class="hljs-title function_">saveTokenToStorage</span>(token);
    
    <span class="hljs-keyword">return</span> token;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å– Token å¤±è´¥'</span>, error);
    <span class="hljs-keyword">throw</span> error; <span class="hljs-comment">// å‘ä¸Šä¼ é€’é”™è¯¯ï¼Œè®©è°ƒç”¨æ–¹å†³å®šå¦‚ä½•å¤„ç†</span>
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-comment">// 6. å…³é”®ï¼šæ— è®ºæˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œéƒ½è¦é€šçŸ¥ç­‰å¾…çš„ Promise å¹¶é‡Šæ”¾é”</span>
    <span class="hljs-keyword">if</span> (taskResolve) {
      <span class="hljs-comment">// è·å–å½“å‰æœ€æ–°çš„ token (å¯èƒ½åœ¨ try å—ä¸­å·²ç»å­˜å…¥ï¼Œä¹Ÿå¯èƒ½ä¸ºç©º)</span>
      <span class="hljs-keyword">const</span> currentToken = <span class="hljs-title function_">getTokenFromStorage</span>();
      <span class="hljs-title function_">taskResolve</span>(currentToken);
    }
    
    <span class="hljs-comment">// é‡ç½®çŠ¶æ€ï¼Œå…è®¸ä¸‹ä¸€æ¬¡æ–°çš„è¯·æ±‚å‘èµ·</span>
    isGettingToken = <span class="hljs-literal">false</span>; 
    getTokenTask = <span class="hljs-literal">null</span>;
  }
}
</code></pre>
<h2 data-id="heading-3">ğŸ’¡ æ ¸å¿ƒè®¾è®¡ç‚¹è§£æ</h2>
<h3 data-id="heading-4">1. ä¸ºä»€ä¹ˆè¦è¿”å› Promise è€Œä¸æ˜¯ç­‰å¾…Â <code>await</code>Â åè¿”å›ç»“æœï¼Ÿ</h3>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆé€šè¿‡Â <code>if (isGettingToken) return getTokenTask</code>Â ç›´æ¥è¿”å› Promise å¯¹è±¡ã€‚è¿™æ ·ï¼Œä¸‰ä¸ªå¹¶å‘çš„è°ƒç”¨è€…Â <code>await getSharedToken()</code>Â å®é™…ä¸Šæ˜¯åœ¨ç­‰å¾…åŒä¸€ä¸ª Promise å¯¹è±¡ resolveã€‚ä¸€æ—¦ Leader è¯·æ±‚å®Œæˆï¼Œä¸‰ä¸ªè°ƒç”¨è€…ä¼šåŒæ—¶å¾—åˆ°é€šçŸ¥ã€‚</p>
<h3 data-id="heading-5">2. Try...Finally çš„é‡è¦æ€§</h3>
<p>å¹¶å‘æ§åˆ¶ä¸­æœ€æ€•çš„æ˜¯Â  <strong>"æ­»é”"</strong> ã€‚å¦‚æœ API è¯·æ±‚æŠ›å‡ºå¼‚å¸¸ï¼Œè€Œä½ å¿˜è®°åœ¨Â <code>catch</code>Â å—ä¸­æŠŠÂ <code>isGettingToken</code>Â è®¾ç½®å›Â <code>false</code>ï¼Œé‚£ä¹ˆæ•´ä¸ªåº”ç”¨çš„ç›¸å…³åŠŸèƒ½å°±ä¼šæ°¸ä¹…å¡æ­»ã€‚ ä½¿ç”¨Â <code>finally</code>Â å—å¯ä»¥ä¿è¯æ— è®ºä»£ç è·¯å¾„å¦‚ä½•ï¼ˆæ­£å¸¸è¿”å›ã€æŠ›å‡ºé”™è¯¯ã€ç”šè‡³æ—©é€€ï¼‰ï¼Œé”ä¸€å®šä¼šè¢«é‡Šæ”¾ã€‚</p>
<h3 data-id="heading-6">3. ä¸è¦ä¸ºæ¯ä¸ªè¯·æ±‚åˆ›å»ºç¼“å­˜ Map</h3>
<p>æœ‰äº›å¼€å‘è€…ä¼šæƒ³ï¼š"æˆ‘æ˜¯ä¸æ˜¯åº”è¯¥ç”¨ä¸€ä¸ª Mapï¼Œæ ¹æ® Request ID æ¥ç¼“å­˜ï¼Ÿ" å¯¹äº Token è¿™ç§Â <strong>å…¨å±€å…±äº«èµ„æº</strong>ï¼Œä¸éœ€è¦ã€‚å› ä¸ºæ— è®ºè°å‘èµ·çš„è¯·æ±‚ï¼Œä»–ä»¬è¦çš„éƒ½æ˜¯åŒä¸€ä¸ªä¸œè¥¿ã€‚Map åªä¼šå¢åŠ å†…å­˜æ³„æ¼çš„é£é™©å’Œç®¡ç†çš„å¤æ‚åº¦ã€‚</p>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p>åœ¨é«˜å¹¶å‘çš„å‰ç«¯åœºæ™¯ä¸‹ï¼Œ<strong>å…±äº«èµ„æºçš„å•ä¾‹ Promise æ¨¡å¼</strong>Â æ˜¯æ€§ä»·æ¯”æé«˜çš„ä¼˜åŒ–æ‰‹æ®µã€‚å®ƒç”¨æå°‘çš„ä»£ç æˆæœ¬ï¼Œå®ç°äº†ï¼š</p>
<ul>
<li><strong>æµé‡èŠ‚çœ</strong>ï¼šN ä¸ªå¹¶å‘è¯·æ±‚åªéœ€ 1 æ¬¡ç½‘ç»œè°ƒç”¨ã€‚</li>
<li><strong>é«˜æ€§èƒ½</strong>ï¼šæ‰€æœ‰è¯·æ±‚å‡ ä¹åŒæ—¶å¾—åˆ°å“åº”ï¼Œæ²¡æœ‰é˜»å¡ã€‚</li>
<li><strong>é«˜å¥å£®æ€§</strong>ï¼šå¼‚å¸¸æƒ…å†µä¸‹ä¹Ÿèƒ½è‡ªåŠ¨æ¢å¤ï¼Œä¸ä¼šå¡æ­»ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringBootå¼€å‘å¿…çŸ¥çš„5ä¸ªé«˜æ•ˆæŠ€å·§ï¼Œæ–°æ‰‹è€æ‰‹éƒ½è¯¥çœ‹çœ‹ï¼]]></title>    <link>https://juejin.cn/post/7602073973309849615</link>    <guid>https://juejin.cn/post/7602073973309849615</guid>    <pubDate>2026-02-03T00:18:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602073973309849615" data-draft-id="7602072652607569960" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringBootå¼€å‘å¿…çŸ¥çš„5ä¸ªé«˜æ•ˆæŠ€å·§ï¼Œæ–°æ‰‹è€æ‰‹éƒ½è¯¥çœ‹çœ‹ï¼"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-03T00:18:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringBootå¼€å‘å¿…çŸ¥çš„5ä¸ªé«˜æ•ˆæŠ€å·§ï¼Œæ–°æ‰‹è€æ‰‹éƒ½è¯¥çœ‹çœ‹ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T00:18:01.000Z" title="Tue Feb 03 2026 00:18:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    21
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>SpringBootå¼€å‘å¿…çŸ¥çš„5ä¸ªé«˜æ•ˆæŠ€å·§ï¼Œæ–°æ‰‹è€æ‰‹éƒ½è¯¥çœ‹çœ‹ï¼</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>SpringBootä½œä¸ºJavaç”Ÿæ€ä¸­æœ€æµè¡Œçš„å¾®æœåŠ¡æ¡†æ¶ä¹‹ä¸€ï¼Œå‡­å€Ÿå…¶"çº¦å®šä¼˜äºé…ç½®"çš„ç†å¿µå’Œå¼ºå¤§çš„è‡ªåŠ¨åŒ–èƒ½åŠ›ï¼Œæå¤§åœ°ç®€åŒ–äº†Springåº”ç”¨çš„å¼€å‘å’Œéƒ¨ç½²ã€‚ç„¶è€Œï¼Œåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œè®¸å¤šå¼€å‘è€…ï¼ˆå°¤å…¶æ˜¯æ–°æ‰‹ï¼‰å¾€å¾€åªåœç•™åœ¨åŸºç¡€ç”¨æ³•ä¸Šï¼Œæœªèƒ½å……åˆ†å‘æŒ¥SpringBootçš„æ½œåŠ›ã€‚æœ¬æ–‡å°†åˆ†äº«5ä¸ªç»è¿‡å®æˆ˜éªŒè¯çš„é«˜æ•ˆæŠ€å·§ï¼Œæ¶µç›–é…ç½®ä¼˜åŒ–ã€æ€§èƒ½è°ƒä¼˜ã€è°ƒè¯•æ‰‹æ®µç­‰æ–¹é¢ï¼Œå¸®åŠ©å¼€å‘è€…æå‡å¼€å‘æ•ˆç‡å’Œåº”ç”¨è´¨é‡ã€‚æ— è®ºä½ æ˜¯åˆšæ¥è§¦SpringBootçš„æ–°æ‰‹è¿˜æ˜¯ç»éªŒä¸°å¯Œçš„è€æ‰‹ï¼Œè¿™äº›æŠ€å·§éƒ½èƒ½ä¸ºä½ çš„é¡¹ç›®å¸¦æ¥å®è´¨æ€§çš„æ”¹è¿›ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸€ã€åˆç†ä½¿ç”¨@ConfigurationPropertieså®ç°ç±»å‹å®‰å…¨é…ç½®</h2>
<h3 data-id="heading-3">é—®é¢˜èƒŒæ™¯</h3>
<p>ä¼ ç»Ÿçš„<code>@Value</code>æ³¨è§£è™½ç„¶ç®€å•ï¼Œä½†åœ¨å¤„ç†å¤æ‚é…ç½®æ—¶ä¼šå¯¼è‡´ä»£ç åˆ†æ•£ä¸”ç¼ºä¹ç±»å‹å®‰å…¨ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Value("${app.mail.host}")</span>
<span class="hljs-keyword">private</span> String mailHost;
<span class="hljs-meta">@Value("${app.mail.port}")</span>
<span class="hljs-keyword">private</span> <span class="hljs-type">int</span> mailPort;
<span class="hljs-comment">// æ›´å¤šå­—æ®µ...</span>
</code></pre>
<h3 data-id="heading-4">è§£å†³æ–¹æ¡ˆ</h3>
<p>ä½¿ç”¨<code>@ConfigurationProperties</code>å°†ç›¸å…³é…ç½®åˆ†ç»„å¹¶ç»‘å®šåˆ°POJOï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@ConfigurationProperties(prefix = "app.mail")</span>
<span class="hljs-meta">@Data</span> <span class="hljs-comment">// Lombokæ³¨è§£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MailProperties</span> {
    <span class="hljs-keyword">private</span> String host;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> port;
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> sslEnabled;
    <span class="hljs-comment">// å¸¦æœ‰é»˜è®¤å€¼</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">timeout</span> <span class="hljs-operator">=</span> <span class="hljs-number">5000</span>; 
}
</code></pre>
<h3 data-id="heading-5">ä¼˜åŠ¿åˆ†æ</h3>
<ol>
<li><strong>å¼ºç±»å‹æ ¡éªŒ</strong>ï¼šå¯åŠ¨æ—¶è‡ªåŠ¨éªŒè¯é…ç½®é¡¹çš„ç±»å‹å’Œå¿…å¡«é¡¹ï¼ˆé…åˆ<code>@Validated</code>ä½¿ç”¨ï¼‰</li>
<li><strong>IDEæ”¯æŒ</strong>ï¼šæ™ºèƒ½æç¤ºå’Œè‡ªåŠ¨è¡¥å…¨ï¼ˆéœ€æ·»åŠ spring-boot-configuration-processorä¾èµ–ï¼‰</li>
<li><strong>é‡æ„å‹å¥½</strong>ï¼šä¿®æ”¹é…ç½®å‰ç¼€åªéœ€è°ƒæ•´ä¸€å¤„</li>
<li><strong>æ–‡æ¡£ç”Ÿæˆ</strong>ï¼šç»“åˆspring-configuration-metadata.jsonå¯ç”Ÿæˆé…ç½®æ–‡æ¡£</li>
</ol>
<blockquote>
<p><strong>ä¸“å®¶æç¤º</strong>ï¼šå¯¹äºå¤šç¯å¢ƒé…ç½®ï¼Œå¯ä»¥ç»“åˆProfile-specificçš„propertiesæ–‡ä»¶ä½¿ç”¨æ­¤æŠ€æœ¯ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-6">äºŒã€åˆ©ç”¨Actuator+Micrometeræ„å»ºç”Ÿäº§çº§ç›‘æ§</h2>
<h3 data-id="heading-7">æ ¸å¿ƒç»„ä»¶è¯´æ˜</h3>
<ul>
<li><strong>Spring Boot Actuator</strong>ï¼šæä¾›å¥åº·æ£€æŸ¥ã€metricsã€ç¯å¢ƒä¿¡æ¯ç­‰ç«¯ç‚¹</li>
<li><strong>Micrometer</strong>ï¼šæŒ‡æ ‡æ”¶é›†çš„å‚å•†ä¸­ç«‹æ¥å£ï¼ˆæ”¯æŒPrometheus, Datadogç­‰ï¼‰</li>
</ul>
<h3 data-id="heading-8">å…³é”®é…ç½®æ­¥éª¤</h3>
<ol>
<li>æ·»åŠ ä¾èµ–ï¼š</li>
</ol>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.micrometer<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>micrometer-registry-prometheus<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<ol start="2">
<li>application.ymlé…ç½®ç¤ºä¾‹ï¼š</li>
</ol>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">management:</span>
  <span class="hljs-attr">endpoints:</span>
    <span class="hljs-attr">web:</span>
      <span class="hljs-attr">exposure:</span>
        <span class="hljs-attr">include:</span> <span class="hljs-string">health,metrics,prometheus</span>
  <span class="hljs-attr">metrics:</span>
    <span class="hljs-attr">tags:</span>
      <span class="hljs-attr">application:</span> <span class="hljs-string">${spring.application.name}</span>
</code></pre>
<h3 data-id="heading-9">é«˜é˜¶æŠ€å·§</h3>
<ul>
<li><strong>è‡ªå®šä¹‰æŒ‡æ ‡</strong>ï¼šé€šè¿‡MeterRegistryè®°å½•ä¸šåŠ¡æŒ‡æ ‡</li>
</ul>
<pre><code class="hljs language-java" lang="java">registry.counter(<span class="hljs-string">"order.created"</span>, <span class="hljs-string">"region"</span>, <span class="hljs-string">"north"</span>).increment();
</code></pre>
<ul>
<li><strong>JVMç›‘æ§</strong>ï¼šè‡ªåŠ¨æš´éœ²çº¿ç¨‹/å†…å­˜/GCç­‰æ•°æ®ï¼ˆGrafanaä»ªè¡¨æ¿å¯ç›´æ¥å¯¼å…¥4701æ¨¡æ¿ï¼‰</li>
<li><strong>åˆ†å¸ƒå¼è¿½è¸ª</strong>ï¼šé›†æˆSleuth+Zipkinå®ç°è¯·æ±‚é“¾è·¯è¿½è¸ª</li>
</ul>
<hr/>
<h2 data-id="heading-10">ä¸‰ã€æŒæ¡æ¡ä»¶åŒ–Beanæ³¨å†Œç­–ç•¥</h2>
<h3 data-id="heading-11">@Conditionalç³»åˆ—æ³¨è§£ç²¾è¦</h3>

























<table><thead><tr><th>æ³¨è§£</th><th>ç”Ÿæ•ˆæ¡ä»¶</th></tr></thead><tbody><tr><td><code>@ConditionalOnProperty</code></td><td>æŒ‡å®šé…ç½®å­˜åœ¨ä¸”åŒ¹é…å€¼æ—¶ç”Ÿæ•ˆ</td></tr><tr><td><code>@ConditionalOnClass</code></td><td>classpathä¸­å­˜åœ¨æŒ‡å®šç±»æ—¶ç”Ÿæ•ˆ</td></tr><tr><td><code>@ConditionalOnMissingBean</code></td><td>IOCå®¹å™¨ä¸­ä¸å­˜åœ¨æŒ‡å®šBeanæ—¶ç”Ÿæ•ˆ</td></tr><tr><td><code>@ConditionalOnWebApplication</code></td><td>Webç¯å¢ƒä¸‹ç”Ÿæ•ˆ</td></tr></tbody></table>
<h3 data-id="heading-12">å®æˆ˜æ¡ˆä¾‹ï¼šå¤šç¼“å­˜æ–¹æ¡ˆåŠ¨æ€åˆ‡æ¢</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheConfig</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@ConditionalOnProperty(name = "cache.type", havingValue = "redis")</span>
    <span class="hljs-keyword">public</span> CacheService <span class="hljs-title function_">redisCache</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisCacheService</span>();
    }

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@ConditionalOnProperty(name = "cache.type", havingValue = "caffeine")</span>
    <span class="hljs-keyword">public</span> CacheService <span class="hljs-title function_">caffeineCache</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CaffeineCacheService</span>();
    }
}
</code></pre>
<h3 data-id="heading-13">æœ€ä½³å®è·µå»ºè®®</h3>
<ol>
<li><strong>ç»„åˆæ¡ä»¶</strong>ï¼šé€šè¿‡<code>AnyNestedCondition</code>ç­‰æŠ½è±¡ç±»å®ç°å¤æ‚é€»è¾‘</li>
<li><strong>è‡ªå®šä¹‰æ¡ä»¶</strong>ï¼šç»§æ‰¿<code>SpringBootCondition</code>é‡å†™getMatchOutcomeæ–¹æ³•</li>
<li><strong>è°ƒè¯•æŠ€å·§</strong>ï¼šå¯åŠ¨æ—¶æ·»åŠ <code>--debug</code>å‚æ•°æŸ¥çœ‹æ¡ä»¶è¯„ä¼°æŠ¥å‘Š</li>
</ol>
<hr/>
<h2 data-id="heading-14">å››ã€ä¼˜åŒ–å¯åŠ¨é€Ÿåº¦çš„å®ç”¨æ–¹æ¡ˆ</h2>
<h3 data-id="heading-15">è€—æ—¶åˆ†æå·¥å…·æ¨è</h3>
<ol>
<li><strong>å®˜æ–¹æ–¹å¼</strong>ï¼šæ·»åŠ JVMå‚æ•° <code>-Ddebug=true -Dspring-boot.run.profiles=timing</code></li>
<li><strong>å¯è§†åŒ–å·¥å…·</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fspring-projects%2Fspring-boot%2Fissues%2F19378" target="_blank" title="https://github.com/spring-projects/spring-boot/issues/19378" ref="nofollow noopener noreferrer">Spring Boot Startup Report</a></li>
</ol>
<h3 data-id="heading-16">å·²éªŒè¯çš„åŠ é€Ÿç­–ç•¥</h3>
<h4 data-id="heading-17">A. JVMå±‚é¢ä¼˜åŒ–</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># OpenJDKæ¨èå‚æ•°ï¼ˆæ¨¡å—åŒ–ç²¾ç®€ï¼‰</span>
-javaagent:springloaded.jar -noverify 
-Djdk.module.illegalAccess.silent=<span class="hljs-literal">true</span>
-Xms256m -Xmx256m <span class="hljs-comment">#é¿å…å †å¤§å°åŠ¨æ€è°ƒæ•´</span>
</code></pre>
<h4 data-id="heading-18">B. SpringBootç‰¹å®šä¼˜åŒ–é¡¹</h4>
<ol>
<li><strong>å»¶è¿Ÿåˆå§‹åŒ–æ¨¡å¼</strong>(éœ€æƒè¡¡é¦–æ¬¡è¯·æ±‚å“åº”æ—¶é—´)ï¼š</li>
</ol>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">main:</span>
    <span class="hljs-attr">lazy-initialization:</span> <span class="hljs-literal">true</span> 
</code></pre>
<ol start="2">
<li><strong>æ’é™¤è‡ªåŠ¨è£…é…ç±»</strong>(é€šè¿‡spring.autoconfigure.exclude)ï¼š</li>
</ol>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration</span>
</code></pre>
<ol start="3">
<li><strong>ç»„ä»¶æ‰«æèŒƒå›´æ§åˆ¶</strong>(ç²¾ç¡®æŒ‡å®šbasePackages)ï¼š</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@ComponentScan(basePackages = "com.your.package")</span>
</code></pre>
<h4 data-id="heading-19">C. Classpathç˜¦èº«æ–¹æ¡ˆ</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Mavenå‘½ä»¤åˆ†æä¾èµ–æ ‘(è¿‡æ»¤provided/test)</span>
mvn dependency:tree -Dincludes=org.springframework*
</code></pre>
<hr/>
<h2 data-id="heading-20">äº”ã€é«˜æ•ˆçƒ­éƒ¨ç½²ä¸å®æ—¶è°ƒè¯•æŠ€å·§</h2>
<h3 data-id="heading-21">DevToolsæ·±åº¦åº”ç”¨æŒ‡å—</h3>
<h4 data-id="heading-22">A. ClassåŠ è½½æœºåˆ¶åŸç†å›¾</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-selector-attr">[å˜æ›´æ£€æµ‹]</span> â†’ <span class="hljs-selector-attr">[é‡å¯ç±»åŠ è½½å™¨]</span> â†’ <span class="hljs-selector-attr">[éš”ç¦»çš„åº”ç”¨ç±»åŠ è½½å™¨]</span>
              â†‘               â†“ 
          (ç¬¬ä¸‰æ–¹åº“ä¸å˜)   (ä¸šåŠ¡ç±»é‡æ–°åŠ è½½)
</code></pre>
<h4 data-id="heading-23">B. application.ymlä¸“å±é…ç½®é¡¹</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
 <span class="hljs-attr">devtools:</span>
   <span class="hljs-attr">restart:</span>
     <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span> 
     <span class="hljs-attr">exclude:</span> <span class="hljs-string">static/**</span> <span class="hljs-comment">#å¿½ç•¥èµ„æºç›®å½•å˜æ›´è§¦å‘é‡å¯ </span>
     <span class="hljs-attr">poll-interval:</span> <span class="hljs-string">2s</span> <span class="hljs-comment">#è½®è¯¢é—´éš”(å¯¹éIDEåœºæ™¯é‡è¦)</span>
   <span class="hljs-attr">livereload:</span>
     <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span> <span class="hljs-comment">#æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°(éœ€é…åˆæ’ä»¶)</span>
</code></pre>
<h4 data-id="heading-24">C. JRebelé«˜çº§æ›¿ä»£æ–¹æ¡ˆå¯¹æ¯”è¡¨</h4>






























<table><thead><tr><th>Feature</th><th>DevTools</th><th>JRebel</th></tr></thead><tbody><tr><td>Classé‡è½½</td><td>âœ“</td><td>âœ“</td></tr><tr><td>Beanå®šä¹‰æ›´æ–°</td><td>âœ—</td><td>âœ“</td></tr><tr><td>XMLçƒ­æ›´æ–°</td><td>âœ—</td><td>âœ“</td></tr><tr><td>Annotationså˜åŒ–å¤„ç†</td><td>âœ—</td><td>âœ“</td></tr></tbody></table>
<blockquote>
<p><strong>æ€§èƒ½æ•°æ®å®æµ‹</strong>ï¼š(i7-11800H + SSDç¯å¢ƒ) DevToolså†·å¯å¹³å‡800ms vs JRebelå¹³å‡200ms</p>
</blockquote>
<hr/>
<h2 data-id="heading-25">Conclusion</h2>
<p>æœ¬æ–‡æ·±å…¥æ¢è®¨çš„äº”ä¸ªç»´åº¦â€”â€”ç±»å‹å®‰å…¨é…ç½®(<code>@ConfigurationProperties</code>) ã€ç”Ÿäº§å¯è§‚æµ‹æ€§(Actuator+Micrometer)ã€æ¡ä»¶åŒ–è£…é…ç­–ç•¥(<code>@Conditional</code>) ã€å¯åŠ¨é€Ÿåº¦ä¼˜åŒ–ä»¥åŠçƒ­éƒ¨ç½²å®è·µ(DevTools/JRebel)â€”â€”æ„æˆäº†SpringBooté«˜æ•ˆå¼€å‘çš„åŸºçŸ³ã€‚è¿™äº›æŠ€æœ¯ä¸æ˜¯å­¤ç«‹çš„çŸ¥è¯†ç‚¹ï¼Œè€Œæ˜¯éœ€è¦æ ¹æ®å®é™…é¡¹ç›®éœ€æ±‚è¿›è¡Œæœ‰æœºç»„åˆçš„ç³»ç»Ÿå·¥ç¨‹ã€‚</p>
<p>ç‰¹åˆ«å¼ºè°ƒçš„æ˜¯ï¼š</p>
<p>1ï¸âƒ£ <em>å¯¹äºæ–°é¡¹ç›®</em> ï¼šå»ºè®®ä»ç¬¬ä¸€å¤©å°±é›†æˆActuatorç›‘æ§å’ŒMetricæ”¶é›†ä½“ç³»</p>
<p>2ï¸âƒ£ <em>å¯¹äºé—ç•™ç³»ç»Ÿè¿ç§»</em> ï¼šä¼˜å…ˆè€ƒè™‘é€šè¿‡æ¡ä»¶åŒ–Beanå®ç°å¹³æ»‘è¿‡æ¸¡</p>
<p>3ï¸âƒ£ <em>å›¢é˜Ÿåä½œåœºæ™¯</em> ï¼šç»Ÿä¸€DevToolsæˆ–JRebelçš„çƒ­éƒ¨ç½²æ–¹æ¡ˆèƒ½æ˜¾è‘—æå‡ååŒæ•ˆç‡</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ç§è½»é‡çº§è¿›ç¨‹é—´æœåŠ¡éš”ç¦»æ–¹æ³•å®è·µ]]></title>    <link>https://juejin.cn/post/7602188264115306511</link>    <guid>https://juejin.cn/post/7602188264115306511</guid>    <pubDate>2026-02-03T10:45:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602188264115306511" data-draft-id="7602216700747972608" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ç§è½»é‡çº§è¿›ç¨‹é—´æœåŠ¡éš”ç¦»æ–¹æ³•å®è·µ"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-02-03T10:45:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2634854380340008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ç§è½»é‡çº§è¿›ç¨‹é—´æœåŠ¡éš”ç¦»æ–¹æ³•å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2634854380340008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T10:45:11.000Z" title="Tue Feb 03 2026 10:45:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç³»ç»Ÿçš„å¤æ‚æ€§</h2>
<p>æˆ‘ä»¬å›¢é˜Ÿè´Ÿè´£çš„ç³»ç»Ÿæ˜¯åˆ†å¸ƒå¼å¾®æœåŠ¡éƒ¨ç½²æ¶æ„ï¼Œéšç€ä¸šåŠ¡çš„ä¸æ–­å‘å±•å£®å¤§å’Œå¤šæ¡çº¿åœºæ™¯åŒ–çš„æŒç»­å»ºè®¾ä¸°å¯Œï¼Œç³»ç»Ÿçš„ä¸šåŠ¡é€»è¾‘è¶Šæ¥è¶Šå¤šï¼ŒåŠŸèƒ½é€»è¾‘ä¹Ÿè¶Šæ¥è¶Šå¤æ‚ã€‚</p>
<p>ï»¿</p>
<h3 data-id="heading-1">ç³»ç»Ÿæ—©æœŸå•ä¸ªåº”ç”¨çš„ä¸€ä¸ªç”¨æˆ·æ•…äº‹åœ°å›¾</h3>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77eb8d5b7a5b499eb0a68f2bba921796~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=punYw5iRhe8%2FhxgLLoqj947jGSs%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<h3 data-id="heading-2">ç³»ç»Ÿäº¤äº’</h3>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed397964ee1f42ccadf1ca50ace0e55f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=Tq9T1jyCXWgXoEBwDLP9UepAVyo%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>ï»¿</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e505874bd1d469ba518d3b180e30cfe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=LfbGMb3ZkYMBiFOJM%2Byk%2BOPspOU%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>ï»¿</p>
<h3 data-id="heading-3">ç‰©ç†æ¨¡å‹ï¼ˆåº“è¡¨ï¼‰çš„å¤æ‚æ€§</h3>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c6ef7725857482f80ad2e298c3dd60f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=EQ3%2FbJKCZtaZ67ZvUscJW65ZfQk%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<h3 data-id="heading-4">ä¸€ä¸ªå­ç³»ç»Ÿçš„ä»£ç æ²‰æ·€</h3>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d783aa32b3294b5a8cb2cc440d3c45ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=dOUD5lqX6WFreOGRrh7%2BLa%2BX8y0%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b896831ad0a40fba2779abbc35f4c53~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=zV9qYM7pFqfd0xAbM0gyI0Orc%2Bo%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>åœ¨åº”ç”¨éƒ¨ç½²æ–¹é¢ï¼Œç›®å‰ç°çŠ¶æˆ‘ä»¬çš„ä¸€ä¸ªåº”ç”¨å¯¹åº”ä¸€ä¸ªcodingä»£ç åœ°å€ï¼Œéƒ¨ç½²ä»¥ä¸€ä¸ªåº”ç”¨ä¸ºå•ä½å‘èµ·éƒ¨ç½²ç”³è¯·ï¼Œåº”ç”¨ä¸‹æœ‰å¤šä¸ªé›†ç¾¤ï¼Œé›†ç¾¤ä¸‹æœ‰å¤šä¸ªåˆ†ç»„ï¼Œä¹ŸåŒºåˆ†ç°åº¦ç¯å¢ƒã€æ­£å¼çº¿ä¸Šç¯å¢ƒã€‚é€šè¿‡ä¸åŒçš„éƒ¨ç½²ç¼–æ’ï¼Œä½¿ç”¨ä¸åŒçš„ä»£ç ç‰ˆæœ¬éƒ¨ç½²ä¸åŒçš„ç¯å¢ƒã€‚</p>
<p>ï»¿</p>
<p>ç³»ç»Ÿçš„å¤æ‚æ€§æ¥è‡ªå¤šä¸ªæ–¹é¢ï¼šä¸šåŠ¡æµç¨‹å¤æ‚æ€§ã€æ¶æ„å¤æ‚æ€§ã€ä»£ç å®ç°å¤æ‚æ€§ã€ç‰©ç†æ¨¡å‹ï¼ˆåº“è¡¨ï¼‰çš„å¤æ‚æ€§ã€ç›‘æ§è¿ç»´çš„å¤æ‚æ€§ç­‰ã€‚æœ¬æ–‡é‡ç‚¹ä¸æ˜¯ç³»ç»Ÿå¤æ‚æ€§çš„æ²»ç†ï¼Œè€Œæ˜¯åœ¨ç°æœ‰åŸºç¡€ä¸Šï¼Œå¦‚ä½•ä½æˆæœ¬è½»é‡çº§æ–¹å¼æœåŠ¡éš”ç¦»ï¼Œåœ¨å¤§ä¿ƒä¸ºç³»ç»Ÿçš„ç¨³å®šæ€§ä¸­å‘æŒ¥ä½œç”¨ã€‚</p>
<p>ï»¿</p>
<p>ä¸€ä¸ªå®¹å™¨ä¸­éƒ¨ç½²çš„åº”ç”¨è¿›ç¨‹å†…ï¼Œæä¾›äº†å„ç§å„æ ·çš„æœåŠ¡ï¼Œä»¥åœ¨åº“åº”ç”¨ä¸ºä¾‹ï¼ŒåŒ…å«äº†ç›˜ç‚¹ã€å˜æ›´ã€è¡¥è´§ã€ç§»åº“ã€ç›˜ç›ˆäºã€é¢„åŒ…ç­‰ç›¸å¯¹ç‹¬ç«‹çš„åŠŸèƒ½ï¼Œæ¯ä¸ªåŠŸèƒ½åˆæœ‰è‡ªå·±çš„å•æ®-ä»»åŠ¡-ç»“æœæ•´å¥—ä¸šåŠ¡æµç¨‹ã€‚æ—¢æœ‰RESTfulæœåŠ¡ï¼Œä¹Ÿæœ‰JSFæœåŠ¡ï¼Œè¿˜æœ‰MQæ¶ˆæ¯å¤„ç†ï¼Œå¦å¤–è¿˜æœ‰å®šæ—¶ä»»åŠ¡ã€‚è¿™äº›èµ„æºè™½æœ‰çº¿ç¨‹æ± éš”ç¦»ï¼Œä½†CPUã€å†…å­˜ç­‰èµ„æºä»æ˜¯å…±äº«èµ„æºï¼Œåœ¨è´Ÿè½½é«˜çš„æ—¶å€™ï¼Œæ¯”å¦‚CPUæ»¡è½½æˆ–å†…å­˜OOMæ—¶ï¼Œä¼šé€ æˆæœåŠ¡å¡é¡¿ï¼ŒRTæ—¶é—´é•¿ï¼Œå½±å“æœåŠ¡å“åº”å’ŒåŠŸèƒ½ä½¿ç”¨ã€‚</p>
<p>ï»¿</p>
<h2 data-id="heading-5">æ–¹æ¡ˆ</h2>
<h3 data-id="heading-6">æ–¹æ¡ˆä¸€ï¼šåº”ç”¨æ‹†åˆ†</h3>
<p>æŒ‰ä¸šåŠ¡åŸŸã€æŠ€æœ¯åŸŸå¯¹è¿›è¡Œæ‹†åˆ†ï¼Œæ¯”å¦‚åœ¨åº“åº”ç”¨æŒ‰ç›˜ç‚¹ã€å˜æ›´ã€ç§»åº“ã€è¡¥è´§ç­‰æ‹†åˆ†ä¸ºå•ç‹¬çš„åº”ç”¨ï¼Œä¸ä»…åº”ç”¨éƒ¨ç½²åšäº†æ‹†åˆ†ï¼Œå¯¹åº”çš„æ•°æ®åº“å±‚é¢ä¹ŸæŒ‰åŸŸè¿›è¡Œæ‹†åˆ†ï¼Œç›˜ç‚¹ç›¸å…³çš„è¡¨ï¼Œä¾‹å¦‚ç›˜ç‚¹å•ä¸»æ¡£ã€ç›˜ç‚¹å•æ˜ç»†ã€ç›˜ç‚¹ä»»åŠ¡ä¸»æ¡£ã€ç›˜ç‚¹ä»»åŠ¡æ˜ç»†ã€ç›˜ç‚¹ç»“æœç‹¬ç«‹åˆ°å•ç‹¬çš„åº“ä¸­ï¼Œå¯ä»¥æŒ‰é€»è¾‘åº“ç‹¬ç«‹ï¼Œä¹Ÿå¯ä»¥ç‹¬ç«‹åˆ°å•ç‹¬çš„æ•°æ®åº“å®ä¾‹ä¸­ï¼Œåè€…çš„éš”ç¦»æ•ˆæœæ›´å¥½ã€‚åœ¨ä»£ç å±‚é¢ï¼Œå¯ä»¥å°†åœ¨åº“codingæŒ‰åŸŸæ‹†åˆ†å‡ºæ¥å•ç‹¬çš„ä»£ç åº“ï¼Œä¹Ÿå¯ä»¥ä¸ç‹¬ç«‹ï¼Œä¿æŒå…±äº«ä»£ç åº“ï¼Œåªæ˜¯åœ¨ç¼–è¯‘æ—¶æŒ‰moudleè¿›è¡ŒæŒ‰éœ€é›†æˆï¼Œä¾‹å¦‚ä¸ºç›˜ç‚¹åº”ç”¨ç¼–è¯‘æ—¶ï¼ŒåŒ…å«ç›˜ç‚¹moudleã€å…¬å…±moduleï¼Œå…¶ä»–ä¸éœ€è¦çš„moudleï¼Œæ¯”å¦‚å˜æ›´moduleã€è¡¥è´§moduleåˆ™ä¸éœ€è¦å‚ä¸ç¼–è¯‘é›†æˆã€‚</p>
<p>ï»¿</p>
<h3 data-id="heading-7">æ–¹æ¡ˆäºŒï¼šä½¿ç”¨Hystrixè¿›è¡ŒæœåŠ¡éš”ç¦»</h3>
<p>Hystrix ä¸»è¦å®ç°çš„æ˜¯â€Œè¿›ç¨‹å†…éš”ç¦»â€Œï¼Œå…·ä½“æ¥è¯´ï¼Œå®ƒé€šè¿‡çº¿ç¨‹æ± éš”ç¦»å’Œä¿¡å·é‡éš”ç¦»ä¸¤ç§æœºåˆ¶ï¼Œåœ¨å•ä¸ªåº”ç”¨è¿›ç¨‹å†…éƒ¨å¯¹ä¾èµ–æœåŠ¡çš„è°ƒç”¨è¿›è¡Œèµ„æºéš”ç¦»å’Œæ•…éšœæ§åˆ¶â€Œã€‚</p>
<h4 data-id="heading-8">â€Œçº¿ç¨‹æ± éš”ç¦»â€Œ</h4>
<p>Hystrix ä¸ºæ¯ä¸ªä¾èµ–æœåŠ¡åˆ†é…ç‹¬ç«‹çš„çº¿ç¨‹æ± ï¼Œä¸åŒæœåŠ¡çš„è°ƒç”¨è¯·æ±‚åœ¨å„è‡ªçš„çº¿ç¨‹æ± ä¸­æ‰§è¡Œï¼Œé¿å…å› æŸä¸ªæœåŠ¡æ•…éšœæˆ–å»¶è¿Ÿè€—å°½æ•´ä¸ªåº”ç”¨çš„çº¿ç¨‹èµ„æºâ€Œï¼Œè¿™ç§éš”ç¦»æ–¹å¼ç±»ä¼¼äºâ€œèˆ±å£éš”ç¦»â€ï¼Œå°†æ•…éšœé™åˆ¶åœ¨ç‰¹å®šèŒƒå›´å†…â€Œã€‚</p>
<p>ï»¿</p>
<h4 data-id="heading-9">â€Œä¿¡å·é‡éš”ç¦»â€Œ</h4>
<p>é€šè¿‡æ§åˆ¶å¹¶å‘è¯·æ±‚çš„çº¿ç¨‹æ•°ï¼ˆä¿¡å·é‡é˜ˆå€¼ï¼‰å®ç°éš”ç¦»ï¼Œé€‚ç”¨äºè€—æ—¶çŸ­ã€å¹¶å‘é‡é«˜çš„åœºæ™¯ï¼ˆå¦‚è¯»ç¼“å­˜ï¼‰â€Œã€‚ä¿¡å·é‡éš”ç¦»æ˜¯åŒæ­¥é˜»å¡æ–¹å¼ï¼Œä¸æ¶‰åŠçº¿ç¨‹åˆ‡æ¢ï¼Œå¼€é”€è¾ƒä½â€Œã€‚</p>
<p>ï»¿</p>
<h3 data-id="heading-10">æ–¹æ¡ˆä¸‰ï¼šè½»é‡çº§è¿›ç¨‹é—´æœåŠ¡æœåŠ¡éš”ç¦»</h3>
<p>æ—¢ä¸æ‹†åˆ†åº”ç”¨ï¼Œä¹Ÿä¸éœ€è¦å¼•å…¥Sping Cloud Hystrixç»„ä»¶ï¼Œä¸ä¾µå…¥ä¸šåŠ¡ä»£ç ï¼Œåœ¨éƒ¨ç½²å±‚é¢å®ç°æœåŠ¡éš”ç¦»ï¼Œå±äºåº”ç”¨å†…åˆ†ç»„æœºå™¨å®ä¾‹éš”ç¦»ï¼Œä¹Ÿæ˜¯è¿›ç¨‹é—´æœåŠ¡éš”ç¦»ã€‚æ•°æ®åº“å’Œä»£ç åº“å±‚é¢ä¸éœ€è¦éš”ç¦»ï¼Œä»é‡‡ç”¨å…±äº«æ¨¡å¼ã€‚</p>
<p>ä»¥åœ¨åº“ä¸ºä¾‹ï¼Œä¸ºç›˜ç‚¹ã€è¡¥è´§ã€å˜æ›´ç­‰åˆ›å»ºä¸åŒçš„ä¸šåŠ¡åˆ†ç»„ï¼Œå½“ç„¶å¤„äºé«˜å¯ç”¨è€ƒè™‘ï¼Œä¼šä¸ºç›˜ç‚¹ã€è¡¥è´§ã€å˜æ›´ç­‰æ¯ä¸ªä¸šåŠ¡åˆ†ç»„ï¼Œåˆä¼šæ¨ªè·¨å¤šä¸ªæœºæˆ¿åˆ†ç»„ï¼Œä¸å¦‚ä¸­äº‘ä¿¡æœºæˆ¿åˆ†ç»„ã€æœ‰å­šæœºæˆ¿åˆ†ç»„ã€‚</p>
<p>ï»¿</p>
<p>æœ¬æ–‡æ¢ç´¢å®è·µçš„æ–¹æ¡ˆä¸‰ç¤ºæ„å›¾å¦‚ä¸‹ï¼š</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/841edfbd0b3647318728cdbc4be9cbd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=qGPtxKg26wGmApf0IcSIleJRo%2FQ%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<h3 data-id="heading-11">æ–¹æ¡ˆç®€å•å¯¹æ¯”å’Œé€‰æ‹©</h3>









































<table><thead><tr><th><strong>æ–¹æ¡ˆ</strong></th><th><strong>éš”ç¦»ç²’åº¦</strong></th><th><strong>éš”ç¦»æ•ˆæœ</strong></th><th><strong>ä»£ç ä¾µå…¥æ€§</strong></th><th><strong>å®ç°æˆæœ¬</strong></th><th><strong>è½åœ°é£é™©</strong></th><th><strong>è½åœ°é€Ÿåº¦</strong></th></tr></thead><tbody><tr><td>æ–¹æ¡ˆä¸€ï¼šåº”ç”¨æ‹†åˆ†</td><td>åº”ç”¨é—´éš”ç¦»</td><td>é«˜</td><td>é«˜</td><td>é«˜</td><td>é«˜</td><td>æ…¢</td></tr><tr><td>æ–¹æ¡ˆäºŒï¼šä½¿ç”¨Hystrixè¿›è¡ŒæœåŠ¡éš”ç¦»</td><td>çº¿ç¨‹é—´éš”ç¦»</td><td>ä½</td><td>ä¸­</td><td>ä¸­</td><td>ä¸­</td><td>ä¸­</td></tr><tr><td>æ–¹æ¡ˆä¸‰ï¼šè½»é‡çº§è¿›ç¨‹é—´æœåŠ¡æœåŠ¡éš”ç¦»</td><td>è¿›ç¨‹é—´éš”ç¦»</td><td>ä¸­</td><td>ä½</td><td>ä½</td><td>ä½</td><td>å¿«</td></tr></tbody></table>
<p>ï»¿</p>
<p>æœ¬æ–‡æ—¨åœ¨æ¢ç´¢ä¸€ä¸ªè½»é‡çº§çš„è¿›ç¨‹çº§æœåŠ¡éš”ç¦»æ–¹æ³•ï¼ŒçŸ­å¹³å¿«ï¼Œæ˜“è½åœ°ï¼Œè§æ•ˆå¿«ï¼Œå¯ä»¥åœ¨å¤§ä¿ƒä¸­å¿«é€Ÿå‘æŒ¥ä½œç”¨ï¼Œä¿éšœç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚</p>
<p>åœ¨æ–¹æ¡ˆé€‰æ‹©ä¸Šï¼Œæœ¬æ–‡é€‰æ‹©æ–¹æ¡ˆä¸‰è¿›è¡Œå®æ“è½åœ°ã€‚é€‰æ‹©æ–¹æ¡ˆä¸‰ï¼Œæ˜¯å› ä¸ºæ–¹æ¡ˆä¸‰å¾ˆç‰›å—ï¼Ÿä¸æ˜¯çš„ï¼Œç›¸æ¯”ä¹‹ä¸‹æ–¹æ¡ˆä¸€å’Œæ–¹æ¡ˆäºŒæ–¹æ¡ˆæ›´ä¸ºæˆç†Ÿï¼Œè¡Œä¸šè½åœ°ç»éªŒæ›´ä¸ºä¸°å¯Œã€‚</p>
<p>ä¹‹æ‰€ä»¥é€‰æ‹©æ–¹æ¡ˆä¸‰ï¼Œæ˜¯åœ¨ä¼—å¤šçš„å› ç´ è€ƒé‡ä¸­æŠ˜ä¸­é€‰æ‹©ï¼Œåœ¨ä¸åŒçš„åœºæ™¯ä¸‹ï¼Œé‡‡ç”¨åˆé€‚çš„æ–¹æ¡ˆè§£å†³ç›¸åº”çš„ç—›ç‚¹ï¼Œå¤Ÿç”¨ + 1ï¼Œeasy + 1ã€‚</p>
<p>æ–¹æ¡ˆäºŒå’Œä¸‰ä¹‹é—´å¹¶æ— å†²çªï¼Œå…¶å®å¯ä»¥ç»“åˆæ­é…ä½¿ç”¨ã€‚</p>
<p>ï»¿</p>
<h2 data-id="heading-12">å®æ“</h2>
<h3 data-id="heading-13">éš”ç¦»éƒ¨ç½²åˆ†ç»„</h3>
<p>é…ç½®é›†åˆ</p>
<p>é€šè¿‡é…ç½®é›†åˆï¼Œå®ç°åˆ†ç»„é—´å…±äº«é…ç½®ï¼Œæ–¹ä¾¿å¤šåˆ†ç»„ç®¡ç†ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/412c1f699fb3488095955e8f6414e9da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=5TUJzy6rLn9gWLfvATZdRJQG13g%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>ï»¿</p>
<p>è·¨æœºæˆ¿å¤šæœºæˆ¿éƒ¨ç½²</p>
<p>é€šè¿‡å¤šæœºæˆ¿éƒ¨ç½²å®ç°æœåŠ¡é«˜å¯ç”¨ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b8b2f77310045f68e35841fe3af0cb1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=aarBbL%2FJT1FG6Rcyto%2FiI2LpNhw%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<h3 data-id="heading-14">éš”ç¦»NPåŸŸå</h3>
<p>æŒ‰åŸŸéš”ç¦»çš„RESTfulï¼Œåˆ›å»ºå•ç‹¬çš„NPåŸŸåã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6df1f7d96c9a463e8642d0582324900b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=AslAPY9D2n2Gs30%2BQvIYp3NFSJU%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>ï»¿</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ddc01c0d0f1446c1aaa3ee518ce56089~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=VEJSFrMrcT%2F5FbUv950l4cP1ipY%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4307c2a34ade48d48c3d50c462c4c5e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=Or32upHCJa4Zewo5meEYViVpEnY%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<h3 data-id="heading-15">NGINXæ‹†åˆ†æµé‡</h3>
<p>æ‹†åˆ†upstreamï¼ŒæŒ‰ç…§ä¸åŒåŸŸRESTfulæ–¹æ³•çš„è§„åˆ™è¿›è¡Œè·¯ç”±æ‹†åˆ†é…ç½®ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22f3b762331e4b2691fbf3814f86c10e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=2KPYiQiRb4BBTeCMsufutHl0gNA%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6914810603d4b3ba8434e283afa7648~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=%2FziMn5f89QrQFU%2FF3s3jVTiqZL4%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<h3 data-id="heading-16">JSFæœåŠ¡éš”ç¦»</h3>
<p>åˆ«åæ‹†åˆ†ï¼Œé€šè¿‡åˆ«åéš”ç¦»æœåŠ¡ï¼Œè°ƒç”¨æ–¹æ— éœ€æ”¹åŠ¨ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3bff9677f0ac4033903756c3ca05afc0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=FMtvOgHDkWieTs7%2F%2F0L8jqRbBsk%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/740ff0c882694018bed1aee648d11e98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=TZ87O9Gw8EaKFTxGAsiMKJXCsGY%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a02b702d21b41468bf310d6baef270b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=k8UiNVGRShgJVYYmU%2BPTsfncZ%2Fs%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>éšç€æœåŠ¡éš”ç¦»ï¼ŒåŒæ—¶å…¼é¡¾æœºå™¨èµ„æºåˆ©ç”¨ç‡ï¼Œæ‹†åˆ†åçš„å•åŸŸå†…æœºå™¨æ•°é‡å°‘äºæ‹†åˆ†å‰æœºå™¨æ•°é‡ï¼ŒJSFä¸šåŠ¡çº¿ç¨‹æ± å¤§å°å¯é€‚å½“è°ƒå¤§ï¼ŒJSFçš„å•æœºé™æµé˜ˆå€¼ä¹Ÿé€‚å½“è°ƒå¤§ã€‚</p>
<p>ï»¿</p>
<h3 data-id="heading-17">MQæ¶ˆæ¯é˜Ÿåˆ—éš”ç¦»</h3>
<p>åœ¨å˜æ›´çš„ymlä¸­ï¼Œåªä¿ç•™å˜æ›´ç›¸å…³çš„TOPICï¼Œå…¶ä»–ç½®ä¸ºNONEã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c3aebfe1b1b47fda66540a08aa3bcf9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=otDvQ0LECL2jXh3S1A2%2FdgY%2BGdY%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>åœ¨ç›˜ç‚¹çš„ymlä¸­ï¼Œåªä¿ç•™ç›˜ç‚¹ç›¸å…³çš„TOPICï¼Œå…¶ä»–ç½®ä¸ºNONEã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a67f64be9dc48ab9ea27f6ab0be64eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=oE3y06n9NAI3s0sBwR7BN7wMFu0%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>å…¶ä»–åˆ†ç»„æŒ‰æ­¤è°ƒæ•´é…ç½®ã€‚</p>
<p>ï»¿</p>
<h2 data-id="heading-18">è½åœ°æ•ˆæœ</h2>
<h3 data-id="heading-19">RESTFulæœåŠ¡</h3>
<p>å¯¹åº”çš„logbookè‡ªç„¶åœ°æŒ‰åŸŸæ‹†åˆ†ï¼Œæ–¹ä¾¿æŸ¥è¯¢å®šä½æµé‡æœºå™¨ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5421c33b9cf04d0099a1036d0abf5b18~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=SbgoyT0A2ZYXLjHIm4ePzTzKe7w%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38e1a7c58722454bb669ee6dd4ceb24b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=MrfaLsz6EGrEktWnzbWeQy%2BCiJE%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<h3 data-id="heading-20">JSFæœåŠ¡</h3>
<p>é€šè¿‡éš”ç¦»çš„JSFåˆ«åå®ç°æµé‡è·¯ç”±åˆ°çš„æœºå™¨ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed47ad3963f1473aaa1dab8687758578~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770720311&amp;x-signature=ZhbNuPq9oAld7B4i4WORAspQqPA%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>ï»¿</p>
<h2 data-id="heading-21">æœªæ¥æ¼”è¿›</h2>
<p>ç›®å‰ï¼Œåœ¨åº”ç”¨ç¨³å®šæ–¹é¢ï¼Œæ¢ç´¢å¹¶å®è·µè½åœ°äº†ä¸€ç§è½»é‡çº§è¿›ç¨‹é—´æœåŠ¡éš”ç¦»å•å…ƒåŒ–éƒ¨ç½²æ–¹æ³•ï¼Œåœ¨åº“å’Œåº“å­˜æŒ‰ä¸šåŠ¡åŸŸæ‹†åˆ†æœåŠ¡éƒ¨ç½²å•å…ƒåŒ–åˆ†ç»„ï¼Œåœ¨åº“æŒ‰ç›˜ç‚¹ã€è¡¥è´§ã€å˜æ›´ã€å¯¼å‡ºå¯¼å‡ºã€é€šç”¨æœåŠ¡éƒ¨ç½²ï¼Œåº“å­˜æŒ‰åº“å­˜æŸ¥è¯¢ã€åº“å®¹æœåŠ¡ã€é«˜æ—¶æ•ˆã€workeræœåŠ¡ç­‰ä½œä¸ºç‹¬ç«‹éƒ¨ç½²çš„éƒ¨ç½²å•å…ƒï¼Œæ§åˆ¶çˆ†ç‚¸åŠå¾„ï¼Œæ¯ä¸ªéƒ¨ç½²å•å…ƒéƒ½æ˜¯åŒæœºæˆ¿é«˜å¯ç”¨ï¼Œä¿éšœç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚</p>
<p>æœªæ¥ï¼Œéšç€ç³»ç»Ÿçš„é•¿æœŸå‘å±•ï¼Œç³»ç»Ÿå¤æ‚æ€§éœ€æŒ‰åŸŸåˆç†æ‹†åˆ†æ²»ç†ï¼Œä¸šåŠ¡å•å…ƒåŒ–ï¼ŒæœåŠ¡å•å…ƒåŒ–ï¼Œç³»ç»Ÿæ¼”è¿›ä¸ä¸šåŠ¡å‘å±•é½å¤´å¹¶è¿›ï¼Œç›¸äº’ä¿ƒè¿›ï¼Œä½¿ç³»ç»Ÿå§‹ç»ˆä¿æŒåœ¨å¥åº·çš„æ°´ä½ï¼Œå¯æŒç»­å‘å±•</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js è‡ªå¸¦â€œåŠ é€Ÿå™¨â€ï¼šnode --run æ˜¯å¦æ¯” Bun æ›´å¿«ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7602246300454436899</link>    <guid>https://juejin.cn/post/7602246300454436899</guid>    <pubDate>2026-02-03T14:17:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602246300454436899" data-draft-id="7584353612501368873" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js è‡ªå¸¦â€œåŠ é€Ÿå™¨â€ï¼šnode --run æ˜¯å¦æ¯” Bun æ›´å¿«ï¼Ÿ"/> <meta itemprop="keywords" content="Bun,Node.js,deno"/> <meta itemprop="datePublished" content="2026-02-03T14:17:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Legend80s"/> <meta itemprop="url" content="https://juejin.cn/user/2568105753839790"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js è‡ªå¸¦â€œåŠ é€Ÿå™¨â€ï¼šnode --run æ˜¯å¦æ¯” Bun æ›´å¿«ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2568105753839790/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Legend80s
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T14:17:36.000Z" title="Tue Feb 03 2026 14:17:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    30
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ JavaScript åç«¯è¿è¡Œæ—¶é¢†åŸŸï¼Œé€Ÿåº¦ä¸€ç›´æ˜¯æ ¸å¿ƒæˆ˜åœºã€‚è¿‘å¹´æ¥ï¼ŒBun ä»¥å…¶å®£ç§°çš„â€œä¸€ä½“åŒ–â€å·¥å…·é“¾å’Œé—ªç”µèˆ¬çš„å¯åŠ¨é€Ÿåº¦å¼‚å†›çªèµ·ï¼Œå¯¹è€ç‰Œç‹è€… Node.js å‘èµ·äº†å¼ºåŠ²æŒ‘æˆ˜ã€‚<code>bun run</code>Â çš„è¿…æ·ï¼Œè®©è®¸å¤šå¼€å‘è€…å¼€å§‹é‡æ–°è¯„ä¼°ä»–ä»¬çš„å·¥å…·é€‰æ‹©ã€‚</p>
<p>ç„¶è€Œï¼ŒNode.js å¹¶æœªæ­¢æ­¥ã€‚è‡ª v22.0.0 èµ·ï¼Œå®ƒæ‚„ç„¶å¼•å…¥äº†ä¸€ä¸ªä¸“ä¸ºå¯åŠ¨æ€§èƒ½è€Œç”Ÿçš„ç§˜å¯†æ­¦å™¨ï¼š<code>node --run</code>ã€‚è¿™ä¸ªå†…ç½®äº Node.js æ ¸å¿ƒçš„å‘½ä»¤ï¼Œæ—¨åœ¨ä»¥æœ€ç²¾ç®€ã€æœ€ç›´æ¥çš„æ–¹å¼æ‰§è¡ŒÂ <code>package.json</code>Â ä¸­çš„è„šæœ¬ï¼Œå®£ç§°è¦ä¸ºæœ€å¸¸è§çš„ç”¨ä¾‹æä¾›â€œé¡¶çº§æ€§èƒ½â€ã€‚</p>
<p>è¿™å¼•å‘äº†æˆ‘ä»¬çš„å¥½å¥‡ï¼šåœ¨çœŸå®çš„åœºæ™¯ä¸‹ï¼Œè¿™ä½æ–°ç§€çš„è¡¨ç°ç©¶ç«Ÿå¦‚ä½•ï¼Ÿå®ƒä¸Â <code>bun run</code>Â åŠä¼ ç»Ÿçš„Â <code>npm run</code>Â ç›¸æ¯”ï¼Œå­°ä¼˜å­°åŠ£ï¼Ÿ</p>
<p>æœ¬æ–‡å°†é€šè¿‡ä¸€ç³»åˆ—ä¸¥è°¨çš„å¯¹æ¯”æµ‹è¯•ï¼Œæ­å¼€Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fdocs%2Flatest%2Fapi%2Fcli.html%23--run" target="_blank" title="https://nodejs.org/docs/latest/api/cli.html#--run" ref="nofollow noopener noreferrer"><code>node --run</code></a>Â çš„ç¥ç§˜é¢çº±ï¼Œç”¨æ•°æ®å›ç­”ï¼šåœ¨ 2026 å¹´çš„è„šæœ¬å¯åŠ¨æ€§èƒ½ç«èµ›ä¸­ï¼Œè°æ‰æ˜¯çœŸæ­£çš„é€Ÿåº¦ç‹è€…ï¼Ÿ</p>
<p><strong/></p><p align="center"><strong>å„ä½å°ä¼™ä¼´è¯·æ³¨æ„ï¼æœ¬æ–‡å°†é¢ è¦†è¿™ä¸ªä¼ ç»Ÿè§‚å¿µâ€œbun å¯åŠ¨ä¸€å®šæ¯” Node.js æ›´å¿«â€ã€‚</strong></p><p/>
<hr/>
<p>é¦–å…ˆæˆ‘ä»¬å›é¡¾ä¸‹ Node.js è¿è¡Œæ–‡ä»¶æœ‰ä¸‰ç§æ–¹å¼ï¼š</p>
<ol>
<li>ç›´æ¥å¯åŠ¨ <code>node foo.[jt]s</code> ğŸ¤¼â€â™‚ï¸ <code>bun foo.[jt]s</code></li>
<li>package.json è„šæœ¬è¿è¡Œ <code>npm run foo</code> ğŸ¤¼â€â™‚ï¸ <code>bun run foo</code></li>
<li>è„šæœ¬ <code>--run</code> ç›´æ¥è¿è¡Œ <code>node --run foo</code> <em>Added in: v22.0.0</em> ğŸ¤¼â€â™‚ï¸ <code>bun --run foo</code></li>
</ol>
<p>ç»Ÿè®¡æ–¹æ³•ï¼Œæˆ‘ä»¬æ¨¡ä»¿ç«æŠ€æ¯”èµ›ä¸­ï¼Œå»æ‰ä¸€ä¸ªæœ€é«˜åˆ†å’Œä¸€ä¸ªæœ€ä½åˆ†ï¼Œå¯ä»¥é¿å…â€œå†·å¯åŠ¨â€ç­‰æç«¯æ•°æ®å¹²æ‰°ï¼Œé‡‡å–å»æ‰æœ€å¤§å’Œæœ€å°å€¼ç„¶åå–å¹³å‡å€¼ï¼Œè¿™æ ·<strong>æŠ—å¹²æ‰°æ€§å¼º</strong>ã€<strong>æ›´å…¬å¹³</strong>ã€‚</p>
<h2 data-id="heading-1">ç¬¬ä¸€è½®ï¼šç›´æ¥å¯åŠ¨ JS æ–‡ä»¶é€Ÿåº¦</h2>
<p>åˆ†åˆ«å¯åŠ¨ä¸¤ä¸ª mjs æ–‡ä»¶ï¼Œä¸€ä¸ªç©ºä¸€ä¸ªæœ‰ IO è¾“å‡ºã€‚æµ‹è¯•æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// empty.mjs</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// io.mjs</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'hello world'</span>);

</code></pre>
<h3 data-id="heading-2">Node.js ğŸŸ¢</h3>
<p>åˆ†åˆ«æ‰§è¡Œ <code>time node empty.js</code> <code>time node io.mjs</code> å„è‡ªä¸‰æ¬¡ã€‚</p>
<p><code>â¯ time node empty.mjs</code>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">node empty.<span class="hljs-property">mjs</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">78</span>% cpu <span class="hljs-number">0.217</span> total
node empty.<span class="hljs-property">mjs</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">84</span>% cpu <span class="hljs-number">0.203</span> total
node empty.<span class="hljs-property">mjs</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>16s system <span class="hljs-number">69</span>% cpu <span class="hljs-number">0.225</span> total
</code></pre>
<p>æ—  io å¹³å‡è€—æ—¶ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>217</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx217ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">217</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚</p>
<p><code>â¯ time node io.mjs</code>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">node io.<span class="hljs-property">mjs</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">73</span>% cpu <span class="hljs-number">0.234</span> total
node io.<span class="hljs-property">mjs</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">72</span>% cpu <span class="hljs-number">0.236</span> total
node io.<span class="hljs-property">mjs</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">74</span>% cpu <span class="hljs-number">0.229</span> total
</code></pre>
<p>io å¹³å‡è€—æ—¶ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>234</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx234ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">234</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚</p>
<p>æ•´ä½“è€—æ—¶ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>225</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx225ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">225</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚</p>
<h3 data-id="heading-3">Bun ğŸ</h3>
<pre><code class="hljs language-ts" lang="ts">bun empty.<span class="hljs-property">mjs</span>  <span class="hljs-number">0.</span>04s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">56</span>% cpu <span class="hljs-number">0.375</span> total
bun empty.<span class="hljs-property">mjs</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>21s system <span class="hljs-number">63</span>% cpu <span class="hljs-number">0.337</span> total
bun empty.<span class="hljs-property">mjs</span>  <span class="hljs-number">0.</span>03s user <span class="hljs-number">0.</span>23s system <span class="hljs-number">70</span>% cpu <span class="hljs-number">0.371</span> total
</code></pre>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>371</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx371ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">371</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span></p>
<pre><code class="hljs language-ts" lang="ts">bun io.<span class="hljs-property">mjs</span>  <span class="hljs-number">0.</span>05s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">63</span>% cpu <span class="hljs-number">0.338</span> total
bun io.<span class="hljs-property">mjs</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>20s system <span class="hljs-number">56</span>% cpu <span class="hljs-number">0.351</span> total
bun io.<span class="hljs-property">mjs</span>  <span class="hljs-number">0.</span>03s user <span class="hljs-number">0.</span>20s system <span class="hljs-number">62</span>% cpu <span class="hljs-number">0.369</span> total
</code></pre>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>351</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx351ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">351</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span></p>
<p>æ•´ä½“ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>361</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx361ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">361</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span></p>
<p>è¿™æ•°æ®æœ‰ç‚¹åå¸¸ï¼Œ1 bun å¯åŠ¨ io æ–‡ä»¶é€Ÿåº¦åè€Œå¿«äºç©ºæ–‡ä»¶ï¼Œ2 å…¶æ¬¡å¾—åˆ°æœ¬æ–‡ç¬¬ä¸€ä¸ª<strong>éå¸¸é‡è¦çš„ç»“è®ºï¼šbun å¯¹ js æ–‡ä»¶å¯åŠ¨é€Ÿåº¦åè€ŒåŠ£äº Node.js</strong>ï¼ˆäºŒè€…ç›¸å·® 100ms+ï¼‰ã€‚</p>
<h2 data-id="heading-4">ç¬¬äºŒè½®ï¼šç›´æ¥å¯åŠ¨ TS æ–‡ä»¶é€Ÿåº¦</h2>
<blockquote>
<p>[!TIP]
æ³¨æ„ï¼šæƒ³è¦ä¸åŠ å‚æ•°ç›´æ¥è¿è¡Œ TSï¼ŒNode.js ç‰ˆæœ¬éœ€ <strong><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰¥</mo></mrow><annotation encoding="application/x-tex">\geq</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"/><span class="mrel">â‰¥</span></span></span></span></span> v22.18.0</strong>ã€‚</p>
</blockquote>
<p>åˆ†åˆ«å¯åŠ¨ä¸¤ä¸ª ts æ–‡ä»¶ï¼Œä¸€ä¸ªç©ºä¸€ä¸ªæœ‰ IO è¾“å‡ºã€‚æµ‹è¯•æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># æ–‡ä»¶å†…å®¹ä¸€æ ·</span>
empty-ts.ts
io-ts.ts
</code></pre>
<h3 data-id="heading-5">Node.js ğŸŸ¢</h3>
<pre><code class="hljs language-ts" lang="ts">node empty-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>19s system <span class="hljs-number">73</span>% cpu <span class="hljs-number">0.254</span> total
node empty-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">72</span>% cpu <span class="hljs-number">0.236</span> total
node empty-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">71</span>% cpu <span class="hljs-number">0.240</span> total
</code></pre>
<p>æ—  io å¹³å‡è€—æ—¶ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>240</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx240ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">240</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚</p>
<p><code>â¯ time node io-ts.ts</code>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">node io-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">64</span>% cpu <span class="hljs-number">0.263</span> total
node io-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">67</span>% cpu <span class="hljs-number">0.255</span> total
node io-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">67</span>% cpu <span class="hljs-number">0.254</span> total
</code></pre>
<p>io å¹³å‡è€—æ—¶ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>255</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx255ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">255</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚</p>
<p>æ•´ä½“è€—æ—¶ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>248</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx248ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">248</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚</p>
<blockquote>
<p>[!TIP]
å°ç»“ï¼šNode.js è¿è¡Œ ts è€—æ—¶æ¯” js å¢åŠ  <strong>~20ms</strong>ï¼Œè¿™åœ¨é¢„æœŸå†…å› ä¸ºå…ˆè¦ <a href="https://juejin.cn/spost/7407763018472046629#heading-12" target="_blank" title="https://juejin.cn/spost/7407763018472046629#heading-12">amacro ts ç¼–è¯‘å™¨å³å°†æ‰€æœ‰ç±»å‹ç”¨ç©ºæ ¼æ›¿ä»£</a>ã€‚</p>
</blockquote>
<h3 data-id="heading-6">Bun ğŸ</h3>
<pre><code class="hljs language-ts" lang="ts">bun empty-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>04s user <span class="hljs-number">0.</span>21s system <span class="hljs-number">69</span>% cpu <span class="hljs-number">0.372</span> total
bun empty-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>01s user <span class="hljs-number">0.</span>15s system <span class="hljs-number">45</span>% cpu <span class="hljs-number">0.372</span> total
bun empty-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>06s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">56</span>% cpu <span class="hljs-number">0.402</span> total
</code></pre>
<p>æ—  io å¹³å‡è€—æ—¶ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>372</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx372ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">372</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚</p>
<pre><code class="hljs language-ts" lang="ts">bun io-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>01s user <span class="hljs-number">0.</span>25s system <span class="hljs-number">64</span>% cpu <span class="hljs-number">0.405</span> total
bun io-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>21s system <span class="hljs-number">55</span>% cpu <span class="hljs-number">0.388</span> total
bun io-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>09s user <span class="hljs-number">0.</span>23s system <span class="hljs-number">74</span>% cpu <span class="hljs-number">0.429</span> total
</code></pre>
<p>io å¹³å‡è€—æ—¶ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>405</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx 405ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">405</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚</p>
<p>æ•´ä½“è€—æ—¶ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>388.5</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx 388.5ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">388.5</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚</p>
<blockquote>
<p>[!TIP]
å°ç»“ï¼šBun è¿è¡Œ ts è€—æ—¶æ¯” js å¢åŠ  <strong>~20ms</strong>ï¼Œé¢„æœŸå†…ã€‚</p>
</blockquote>
<p>æœ¬æ–‡ç¬¬äºŒä¸ª<strong>ç»“è®ºï¼šbun æ‰§è¡Œ ts æ–‡ä»¶å¯åŠ¨é€Ÿåº¦åŠ£äº Node.js</strong>ï¼ˆäºŒè€…ç›¸å·® <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>388</mn><mo>âˆ’</mo><mn>248</mn><mo>=</mo><mn>140</mn><mi>m</mi><mi>s</mi><mo>+</mo></mrow><annotation encoding="application/x-tex">388 - 248 = 140ms+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">388</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">248</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">140</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span><span class="mord">+</span></span></span></span></span>ï¼‰ã€‚</p>
<p>æœ‰è¯»è€…å¯èƒ½ä¼šé—®æ˜¯å¦æ˜¯é€šè¿‡ç¯å¢ƒå˜é‡å¯»å€ bun è€—æ—¶å¯¼è‡´çš„ã€‚é‚£æˆ‘ä»¬ç›´æ¥è·³è¿‡å¯»å€ï¼š</p>
<p><code>â¯ time /e/pnpm/bun io-ts.ts</code></p>
<pre><code class="hljs language-ts" lang="ts">/e/pnpm/bun io-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>21s system <span class="hljs-number">55</span>% cpu <span class="hljs-number">0.384</span> total
/e/pnpm/bun io-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>23s system <span class="hljs-number">67</span>% cpu <span class="hljs-number">0.341</span> total
/e/pnpm/bun io-ts.<span class="hljs-property">ts</span>  <span class="hljs-number">0.</span>06s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">56</span>% cpu <span class="hljs-number">0.407</span> total
</code></pre>
<p>ç›´æ¥å¯»å€è€—æ—¶ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>384</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex"> 384ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">384</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ï¼Œç¡®å®å°‘äº <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>405</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex"> 405ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">405</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ï¼Œä½†ä¾ç„¶æ˜¾è‘—é«˜äº Node.js çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>255</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">255ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">255</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ï¼æ‰€ä»¥</p>
<h2 data-id="heading-7">ç»“è®ºä¸€</h2>
<p>Bun æ— è®º<strong>å¯åŠ¨</strong> JavaScript è¿˜æ˜¯ TypeScript æ–‡ä»¶<strong>éƒ½è¦æ…¢äº Node.js</strong>ï¼</p>
<blockquote>
<p>æ³¨æ„è¿™é‡Œæ˜¯<strong>å¯åŠ¨</strong>è€Œéè¿è¡Œã€‚</p>
</blockquote>
<h2 data-id="heading-8">ç¬¬ä¸‰è½®ï¼špackage.json è„šæœ¬å¯åŠ¨</h2>
<p>ç»“è®ºå…ˆè¡Œï¼šæ‰§è¡Œ package.json å†…çš„ scripts <code>bun run</code> çš„å¯åŠ¨é€Ÿåº¦å¿«äº <code>npm run</code>ã€‚æˆ‘ä»¬æµ‹è¯•ä¸‹ã€‚</p>
<p>npm v11.7.0</p>
<p>æˆ‘ä»¬å®šä¹‰ä¸¤ä¸ª script io å’Œä¸å« io çš„ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"module"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"io"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"echo \"hello world\""</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"empty"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-9">npm run</h3>
<p><code>â¯ time command npm run io</code></p>
<blockquote>
<p>[!TIP]
<code>command npm</code> æ˜¯å› ä¸ºæˆ‘åœ¨ <code>~/.zshrc</code> å†…å¯¹ npm åšäº†åŒå alias éœ€é€šè¿‡ <code>command</code> æ‰¾åˆ°åŸå§‹å‘½ä»¤ã€‚</p>
</blockquote>
<pre><code class="hljs language-ts" lang="ts">&gt; rsbuild-react-<span class="hljs-number">19</span>@<span class="hljs-number">1.0</span><span class="hljs-number">.0</span> io
&gt; io <span class="hljs-string">"hello world"</span>

<span class="hljs-string">"hello world"</span>
command npm run io  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>39s system <span class="hljs-number">58</span>% cpu <span class="hljs-number">0.660</span> total
</code></pre>
<pre><code class="hljs language-ts" lang="ts">command npm run io  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>34s system <span class="hljs-number">52</span>% cpu <span class="hljs-number">0.649</span> total
command npm run io  <span class="hljs-number">0.</span>01s user <span class="hljs-number">0.</span>31s system <span class="hljs-number">50</span>% cpu <span class="hljs-number">0.638</span> total
</code></pre>
<p><code>npm run io</code> è€—æ—¶ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>650</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">650ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">650</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚</p>
<p>å»é™¤ IOï¼š<code>â¯ time command npm run empty</code></p>
<pre><code class="hljs language-ts" lang="ts">command npm run empty  <span class="hljs-number">0.</span>05s user <span class="hljs-number">0.</span>32s system <span class="hljs-number">60</span>% cpu <span class="hljs-number">0.610</span> total
command npm run empty  <span class="hljs-number">0.</span>03s user <span class="hljs-number">0.</span>34s system <span class="hljs-number">59</span>% cpu <span class="hljs-number">0.626</span> total
command npm run empty  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>33s system <span class="hljs-number">53</span>% cpu <span class="hljs-number">0.611</span> total
</code></pre>
<p>çº¯å¯åŠ¨è€—æ—¶ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>616</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">616ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">616</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚</p>
<p>æ•´ä½“è€—æ—¶ï¼š<code>npm run</code> å¯åŠ¨éœ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>600</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\approx600ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">600</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚è¿™ä¹Ÿå¤ªæ…¢äº†ï¼Œä»£ç å•¥éƒ½æ²¡å¹²å‘¢ï¼</p>
<p>æ¥ä¸‹æ¥è¯•è¯• <code>bun run</code>ã€‚</p>
<h3 data-id="heading-10">bun run</h3>
<p><code>â¯ time bun run io</code>:</p>
<pre><code class="hljs language-ts" lang="ts">bun run io  <span class="hljs-number">0.</span>03s user <span class="hljs-number">0.</span>21s system <span class="hljs-number">79</span>% cpu <span class="hljs-number">0.308</span> total
bun run io  <span class="hljs-number">0.</span>06s user <span class="hljs-number">0.</span>21s system <span class="hljs-number">78</span>% cpu <span class="hljs-number">0.347</span> total
bun run io  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>21s system <span class="hljs-number">68</span>% cpu <span class="hljs-number">0.313</span> total
</code></pre>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>313</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">313 ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">313</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span> å·¦å³</p>
<p><code>â¯ time bun run empty</code>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">bun run empty  <span class="hljs-number">0.</span>04s user <span class="hljs-number">0.</span>18s system <span class="hljs-number">60</span>% cpu <span class="hljs-number">0.380</span> total
bun run empty  <span class="hljs-number">0.</span>01s user <span class="hljs-number">0.</span>21s system <span class="hljs-number">69</span>% cpu <span class="hljs-number">0.330</span> total
bun run empty  <span class="hljs-number">0.</span>03s user <span class="hljs-number">0.</span>21s system <span class="hljs-number">67</span>% cpu <span class="hljs-number">0.361</span> total
</code></pre>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>361</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">361 ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">361</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span> å·¦å³ã€‚ç¬¬äºŒä¸ªåå¸¸ io åè€Œæ›´æ…¢ã€‚</p>
<p>æ•´ä½“è€—æ—¶ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>337</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">337 ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">337</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ã€‚ç»“è®º <code>bun run</code> å¤§æ¦‚æ˜¯ <code>npm run</code> çš„ä¸¤å€ï¼ˆ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>600</mn><mi mathvariant="normal">/</mi><mn>300</mn><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">600 / 300=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">600/300</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">2</span></span></span></span></span>ï¼‰æ€§èƒ½ã€‚</p>
<p>çªç„¶æƒ³èµ· Node.js v22.0.0 æ”¯æŒ <code>node --run</code> è¿è¡Œè„šæœ¬ï¼Œä¸“ä¸ºæ€§èƒ½è€Œç”Ÿï¼Œçœ‹çœ‹å®ƒè¡¨ç°å¦‚ä½•ã€‚</p>
<h2 data-id="heading-11">ç¬¬å››è½®ï¼špackage.json è„šæœ¬ `--run` ç›´æ¥è¿è¡Œ</h2>
<p>å…ˆè§£é‡Šä¸‹ <code>node --run</code>ï¼Œæ˜¯çš„ï¼Œå®ƒä¹Ÿå¯ä»¥æ‰§è¡Œ package.json ä¸­çš„è„šæœ¬ï¼Œè€Œä¸”ç”Ÿæ¥å°±æ˜¯ä¸ºæ€§èƒ½è€ƒè™‘ï¼ˆä¸ä¼šæ‰§è¡Œ <code>pre</code> / <code>post</code> é’©å­ï¼‰ã€‚</p>
<blockquote>
<p>å®ƒå°†ä» <code>package.json</code> æ–‡ä»¶çš„ <code>"scripts"</code> å¯¹è±¡ä¸­è¿è¡ŒæŒ‡å®šçš„å‘½ä»¤ã€‚å¦‚æœæä¾›çš„ <code>"command"</code> ä¸å­˜åœ¨ï¼Œåˆ™ä¼šåˆ—å‡ºå¯ç”¨çš„è„šæœ¬ã€‚</p>
<p><code>node --run</code> å¹¶ä¸æ—¨åœ¨å®Œå…¨åŒ¹é… <code>npm run</code> æˆ–å…¶ä»–åŒ…ç®¡ç†å™¨çš„è¿è¡Œå‘½ä»¤çš„è¡Œä¸ºã€‚Node.js çš„å®ç°<strong>æœ‰æ„æ›´åŠ ç²¾ç®€</strong>ï¼Œä»¥ä¾¿åœ¨æœ€å¸¸è§çš„ç”¨ä¾‹ä¸­<strong>ä¸“æ³¨äºé¡¶çº§æ€§èƒ½</strong>ã€‚å…¶ä»–è¿è¡Œå®ç°ä¸­ä¸€äº›è¢«æœ‰æ„æ’é™¤çš„åŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ul>
<li>é™¤äº†è¿è¡ŒæŒ‡å®šçš„è„šæœ¬å¤–ï¼Œè¿˜ä¼šè¿è¡Œå‰ç½®ï¼ˆ<code>pre</code>ï¼‰æˆ–åç½®ï¼ˆ<code>post</code>ï¼‰è„šæœ¬ã€‚</li>
<li>å®šä¹‰ç‰¹å®šäºåŒ…ç®¡ç†å™¨çš„ç¯å¢ƒå˜é‡ã€‚</li>
</ul>
<p>â€”â€” <a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fdocs%2Flatest%2Fapi%2Fcli.html%23--run" target="_blank" title="https://nodejs.org/docs/latest/api/cli.html#--run" ref="nofollow noopener noreferrer">nodejs.org/docs/latestâ€¦</a></p>
</blockquote>
<h3 data-id="heading-12">node --run</h3>
<p><code>â¯ time node --run io</code>:</p>
<pre><code class="hljs language-ts" lang="ts">node --run io  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">79</span>% cpu <span class="hljs-number">0.216</span> total
node --run io  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>16s system <span class="hljs-number">81</span>% cpu <span class="hljs-number">0.192</span> total
node --run io  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>19s system <span class="hljs-number">84</span>% cpu <span class="hljs-number">0.220</span> total
</code></pre>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>216</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">216ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">216</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span> å®Œç¾ ğŸ¤©</p>
<p><code>â¯ time node --run empty</code>:</p>
<pre><code class="hljs language-ts" lang="ts">node --run empty  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">89</span>% cpu <span class="hljs-number">0.192</span> total
node --run empty  <span class="hljs-number">0.</span>01s user <span class="hljs-number">0.</span>16s system <span class="hljs-number">80</span>% cpu <span class="hljs-number">0.212</span> total
node --run empty  <span class="hljs-number">0.</span>00s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">89</span>% cpu <span class="hljs-number">0.192</span> total
</code></pre>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>192</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">192 ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">192</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span> å®Œç¾ ğŸ¤©ğŸ¤©</p>
<p><code>node --run</code> æ•´ä½“å¹³å‡ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>204</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">204 ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">204</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ï¼Œç¡®å®åšäº†æ€§èƒ½ä¼˜åŒ–ï¼Œ<strong>ä¸‰å€æ€§èƒ½æå‡ ğŸš€</strong>ï¼š<code>npm run 616ms</code> VS <code>node --run 204ms</code></p>
<h3 data-id="heading-13">bun --run</h3>
<pre><code class="hljs language-ts" lang="ts">bun --run empty  <span class="hljs-number">0.</span>06s user <span class="hljs-number">0.</span>14s system <span class="hljs-number">53</span>% cpu <span class="hljs-number">0.370</span> total
bun --run empty  <span class="hljs-number">0.</span>05s user <span class="hljs-number">0.</span>21s system <span class="hljs-number">75</span>% cpu <span class="hljs-number">0.347</span> total
bun --run empty  <span class="hljs-number">0.</span>04s user <span class="hljs-number">0.</span>21s system <span class="hljs-number">68</span>% cpu <span class="hljs-number">0.379</span> total
</code></pre>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>370</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">370 ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">370</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span></p>
<pre><code class="hljs language-ts" lang="ts">bun --run io  <span class="hljs-number">0.</span>01s user <span class="hljs-number">0.</span>18s system <span class="hljs-number">61</span>% cpu <span class="hljs-number">0.324</span> total
bun --run io  <span class="hljs-number">0.</span>01s user <span class="hljs-number">0.</span>23s system <span class="hljs-number">73</span>% cpu <span class="hljs-number">0.334</span> total
bun --run io  <span class="hljs-number">0.</span>03s user <span class="hljs-number">0.</span>17s system <span class="hljs-number">52</span>% cpu <span class="hljs-number">0.382</span> total
</code></pre>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>334</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">334 ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">334</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span> ï¼ˆio åè€Œé€Ÿåº¦å¿«äºç©ºè„šæœ¬ -_-||ï¼‰</p>
<p><code>bun --run</code> æ•´ä½“è€—æ—¶ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>352</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">352 ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">352</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span>ï¼Œ<strong>åå¸¸ä¸‰ï¼š<code>bun --run</code> æ…¢äº <code>node --run</code></strong> çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>204</mn><mi>m</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">204 ms</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">204</span><span class="mord mathnormal">m</span><span class="mord mathnormal">s</span></span></span></span></span></p>
<h2 data-id="heading-14">æ€§èƒ½æ•°æ®æ€»ç»“</h2>
<p>æ–‡ç« ä»ä¸‰ä¸ªç»´åº¦ï¼ˆç›´æ¥å¯åŠ¨æ–‡ä»¶ã€è¿è¡Œ package.json è„šæœ¬ã€ä½¿ç”¨Â <code>--run</code>Â å‘½ä»¤ï¼‰å¯¹æ¯”äº† Node.js å’Œ Bun çš„æ€§èƒ½ã€‚</p>
<h3 data-id="heading-15">æ ¸å¿ƒç»“è®º</h3>
<ol>
<li><strong>ç›´æ¥å¯åŠ¨æ–‡ä»¶</strong>ï¼šæ— è®º TS or JSï¼ŒNode.js ä»¥æ˜¾è‘—ä¼˜åŠ¿èƒœå‡ºã€‚</li>
<li><strong>è¿è¡Œ package.json è„šæœ¬</strong>ï¼šBun (<code>bun run</code>) å‡»è´¥ npm (<code>npm run</code>)ï¼Œä½† <code>node --run</code>Â å‡­å€Ÿå…¶ç²¾ç®€è®¾è®¡å‡»è´¥ <code>bun run / npm run / bun --run</code>ã€‚</li>
</ol>
<p><strong/></p><p align="center"><strong>è‡³æ­¤æœ¬æ–‡é¢ è¦†äº†ä¸€ä¸ªä¼ ç»Ÿè§‚å¿µâ€œbun å¯åŠ¨ä¸€å®šæ¯” Node.js æ›´å¿«â€ã€‚</strong></p><p/>
<h4 data-id="heading-16">é™„å½•ï¼šè¯¦ç»†æ•°æ®</h4>
<h6 data-id="heading-17">è¡¨æ ¼ä¸€ï¼šç›´æ¥è¿è¡Œ JS/TS æ–‡ä»¶æ€§èƒ½å¯¹æ¯” (å•ä½ï¼šms)</h6>















































<table><thead><tr><th>æµ‹è¯•åœºæ™¯</th><th>Node.js (v22.18.0)</th><th>Bun (v1.3.2)</th><th><strong>æ€§èƒ½èƒœå‡ºæ–¹</strong></th></tr></thead><tbody><tr><td>å¯åŠ¨ç©º JS æ–‡ä»¶</td><td>~217</td><td>~371</td><td>Node.js (å¿« ~41%)</td></tr><tr><td>å¯åŠ¨å« IO çš„ JS æ–‡ä»¶</td><td>~234</td><td>~351</td><td>Node.js (å¿« ~33%)</td></tr><tr><td><strong>JS æ–‡ä»¶å¯åŠ¨ç»¼åˆè€—æ—¶</strong></td><td><strong>~225</strong></td><td>~361</td><td><strong>Node.js èƒœå‡º</strong></td></tr><tr><td>å¯åŠ¨ç©º TS æ–‡ä»¶</td><td>~240</td><td>~372</td><td>Node.js (å¿« ~35%)</td></tr><tr><td>å¯åŠ¨å« IO çš„ TS æ–‡ä»¶</td><td>~255</td><td>~405</td><td>Node.js (å¿« ~37%)</td></tr><tr><td><strong>TS æ–‡ä»¶å¯åŠ¨ç»¼åˆè€—æ—¶</strong></td><td><strong>~248</strong></td><td>~389</td><td><strong>Node.js èƒœå‡º</strong></td></tr></tbody></table>
<p><strong>ç»“è®ºä¸€ï¼š</strong> Â åœ¨ç›´æ¥å¯åŠ¨æ–‡ä»¶ï¼ˆæ— è®º JS æˆ– TSï¼‰çš„åœºæ™¯ä¸‹ï¼Œ<strong>Node.js ğŸš€ æ€§èƒ½æ˜¾è‘—ä¼˜äº Bun</strong>ï¼Œå¹³å‡é¢†å…ˆå¹…åº¦åœ¨ 35%-41% å·¦å³ã€‚è™½ç„¶æœ‰åç›´è§‰ä½†æ˜¯æˆ‘çš„ Windows ä¸‹ç¡®å®å¦‚æ­¤ã€‚</p>
<hr/>
<h5 data-id="heading-18">è¡¨æ ¼äºŒï¼šè¿è¡Œ package.json è„šæœ¬æ€§èƒ½å¯¹æ¯” (å•ä½ï¼šms)</h5>








































<table><thead><tr><th>æ‰§è¡Œæ–¹å¼</th><th>å¹³å‡è€—æ—¶ (å«IO)</th><th>å¹³å‡è€—æ—¶ (ç©ºè„šæœ¬)</th><th>ç»¼åˆå¹³å‡è€—æ—¶</th><th><strong>æ€§èƒ½æ’åº (ç”±å¿«åˆ°æ…¢)</strong></th></tr></thead><tbody><tr><td><strong><code>node --run</code></strong></td><td>~216 ms</td><td>~192 ms</td><td><strong>~204 ms</strong></td><td>ğŸ¥‡Â <strong>ç¬¬1å</strong></td></tr><tr><td><strong><code>bun run</code></strong></td><td>~313 ms</td><td>~361 ms</td><td>~337 ms</td><td>ğŸ¥ˆÂ <strong>ç¬¬2å</strong></td></tr><tr><td><strong><code>bun --run</code></strong></td><td>~334 ms</td><td>~370 ms</td><td>~352 ms</td><td>ğŸ¥‰Â <strong>ç¬¬3å</strong></td></tr><tr><td><strong><code>npm run</code></strong></td><td>~650 ms</td><td>~616 ms</td><td>~633 ms</td><td><strong>ç¬¬4å</strong></td></tr></tbody></table>
<p><strong>ç»“è®ºäºŒï¼š</strong></p>
<ol>
<li><strong><code>node --run</code>Â æ˜¯ç»å¯¹çš„æ€§èƒ½å† å†›</strong>ï¼Œé€Ÿåº¦æ˜¯Â <code>npm run</code>Â çš„Â <strong>3.1 å€</strong>ï¼Œä¹Ÿæ¯”Â <code>bun run</code>Â å¿«çº¦Â <strong>65%</strong> ã€‚</li>
<li>Bun ç›¸å…³å‘½ä»¤æ€§èƒ½æ¥è¿‘ï¼š<code>bun run</code>Â å’ŒÂ <code>bun --run</code>Â æ€§èƒ½åœ¨åŒä¸€æ°´å¹³ï¼Œéƒ½æ˜¾è‘—å¿«äºÂ <code>npm run</code>ï¼ˆå¿«çº¦ 88%ï¼‰ã€‚</li>
<li><strong><code>npm run</code>Â å«åº•</strong>ï¼šä¼ ç»Ÿ npm è„šæœ¬çš„å¯åŠ¨å¼€é”€æœ€å¤§ï¼Œè€—æ—¶æœ€é•¿ã€‚</li>
</ol>
<h2 data-id="heading-19">å¯¹æˆ‘ä»¬çš„å¯å‘</h2>
<ul>
<li><strong>Node.js vs. Bun å¯åŠ¨é€Ÿåº¦</strong>ï¼šåœ¨ç›´æ¥å¯åŠ¨Â <code>.js</code>Â æˆ–Â <code>.ts</code>Â æ–‡ä»¶æ—¶ï¼ŒNode.js æ¯” Bun å¿«çº¦Â <strong>40%-60%</strong> ã€‚è¿™æ˜¯â€œ<strong>ä¸€ä¸ªéå¸¸é‡è¦çš„ç»“è®º</strong>â€ã€‚</li>
<li><strong>Package Script è¿è¡Œé€Ÿåº¦</strong>ï¼š
<ul>
<li><code>bun run</code>Â æ¯”Â <code>npm run</code>Â å¿«çº¦Â <strong>2 å€</strong>ã€‚</li>
<li>è€Œé»‘é©¬ ğŸ <code>node --run</code>Â æ¯”Â <code>npm run</code>Â å¿«çº¦Â <strong>3 å€</strong>ï¼</li>
</ul>
</li>
</ul>
<p><strong><code>node --run</code>Â çš„æ„ä¹‰</strong>â€”â€”<strong>åŒ…è„šæœ¬è¿è¡Œçš„é©æ–°</strong>ï¼š<code>node --run</code>Â æ— ç–‘æ˜¯æœ¬æ¬¡æµ‹è¯•çš„æœ€å¤§äº®ç‚¹ï¼Œå…¶é€Ÿåº¦éå¸¸æ¥è¿‘ç›´æ¥è¿è¡ŒÂ <code>node foo.js</code>Â çš„é€Ÿåº¦ï¼Œå®ç°äº†è¿‘ä¹â€œè£¸å¥”â€çš„è„šæœ¬æ‰§è¡Œæ€§èƒ½ã€‚å®ƒé€šè¿‡<strong>ç‰ºç‰² npm è„šæœ¬çš„éƒ¨åˆ†é«˜çº§åŠŸèƒ½</strong>ï¼ˆå¦‚Â <code>pre</code>/<code>post</code>Â é’©å­ã€ç‰¹å®šçš„ç¯å¢ƒå˜é‡ï¼‰ï¼Œæ¢æ¥äº†Â  <strong>~3 å€äºÂ <code>npm run</code>Â çš„é€Ÿåº¦æå‡</strong>ï¼Œç”šè‡³è¶…è¶Šäº†ä»¥é€Ÿåº¦è§é•¿çš„Â <code>bun run</code>ã€‚å¯¹äºè¿½æ±‚æè‡´æ„å»ºã€æµ‹è¯•æˆ–å¯åŠ¨é€Ÿåº¦ï¼Œä¸”ä¸ä¾èµ–è¿™äº›é«˜çº§ç‰¹æ€§çš„é¡¹ç›®ï¼Œ<code>node --run</code>Â æä¾›äº†ä¸€ä¸ªè¿‘ä¹å®Œç¾çš„â€œæ€§èƒ½æ¨¡å¼â€ã€‚</p>
<p>å¯å‘ï¼šå¦‚æœä½ è¦ç›´æ¥æ‰§è¡Œæ–‡ä»¶è¯·ä½¿ç”¨ Node.jsï¼Œå¦‚æœè¦æ‰§è¡Œ npm script å»ºè®® 99% æƒ…å†µä¸‹ç”¨ <code>node --run</code>ï¼ˆæ— éœ€è¿è¡Œ <code>pre / post npm script</code> æ—¶ï¼‰å¦åˆ™ <code>bun run</code>ã€‚</p>
<h2 data-id="heading-20">è¯´æ˜</h2>
<p>æµ‹è¯•ç¯å¢ƒ Windows 10ã€git bashã€Node.js ğŸŸ¢ v22.18.0ã€npm v11.7.0ã€bun ğŸ v1.3.2ã€‚</p>
<hr/>
<p><em/></p><p align="center"><em>â€”â€” å®Œ ğŸ‰ æœ€æ–°æ–‡ç« è¯·å…³æ³¨å…¬ä¼—å· <strong><code>JavaScriptä¸ç¼–ç¨‹è‰ºæœ¯</code></strong> â€”â€”</em></p><p/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é˜¿é‡Œäº‘ä¸ºä½•è¦å°†æ•°æ®é‡‡é›†å¼€å‘å¥—ä»¶å¼€æº]]></title>    <link>https://juejin.cn/post/7602776926327406646</link>    <guid>https://juejin.cn/post/7602776926327406646</guid>    <pubDate>2026-02-04T09:55:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602776926327406646" data-draft-id="7602553969970937910" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é˜¿é‡Œäº‘ä¸ºä½•è¦å°†æ•°æ®é‡‡é›†å¼€å‘å¥—ä»¶å¼€æº"/> <meta itemprop="keywords" content="äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2026-02-04T09:55:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é˜¿é‡Œäº‘ä¸ºä½•è¦å°†æ•°æ®é‡‡é›†å¼€å‘å¥—ä»¶å¼€æº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T09:55:30.000Z" title="Wed Feb 04 2026 09:55:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šæœ›å®¸</p>
<h2 data-id="heading-0">æ•°æ®é‡‡é›†æ­£æˆä¸ºå†³å®š Agent å“è´¨çš„æ ¸å¿ƒåŸºç¡€è®¾æ–½</h2>
<p>éšç€ Agent çš„ä¸æ–­æ¼”è¿›å’Œä¾›åº”é“¾çš„æŒç»­ç¹è£ï¼Œæ•°æ®é‡‡é›†æ­£ä»ä¼ ç»Ÿçš„è¿ç»´å·¥å…·è¿›åŒ–æˆä¸ºå†³å®š Agent å“è´¨çš„æ ¸å¿ƒåŸºç¡€è®¾æ–½ã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿä»¥ä¸‹æˆ‘ä»¬ä» Agent çš„æœåŠ¡å¯ç”¨æ€§ã€Agent çš„è¾“å‡ºå¯é æ€§ï¼Œä»¥åŠ Agent æˆæœ¬ä¸‰ä¸ªç»´åº¦æ¥åˆ†æã€‚</p>
<h3 data-id="heading-1">Agent çš„æœåŠ¡å¯ç”¨æ€§</h3>
<p>ä¸€ä¸ªå…¸å‹çš„ Agent åº”ç”¨ï¼Œè¿œæ¯”ä¼ ç»Ÿåº”ç”¨å¤æ‚å¾—å¤šã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0a360d23db742ce9f918b2497384c2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803730&amp;x-signature=pNRfGAITFcVVhZO8TbbYmb316j8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨ç”¨æˆ·ç»ˆç«¯ä¹‹å¤–ï¼ŒAgent å¾€å¾€è¿˜åŒ…å«è®¤è¯ä¸æƒé™ä½“ç³»ã€ä¼šè¯ä¸ä¸Šä¸‹æ–‡ç®¡ç†ã€æ¨ç†æœåŠ¡ã€å¤§æ¨¡å‹è·¯ç”±ä¸é™çº§ç­–ç•¥ã€æµç¨‹ç¼–æ’å¼•æ“ç­‰æ ¸å¿ƒæ¨¡å—ã€‚åŒæ—¶ï¼Œæ¨¡å‹æ¨ç†æœ¬èº«åˆé«˜åº¦ä¾èµ–å¤–éƒ¨ä¸–ç•Œï¼šå®ƒå¯èƒ½ä¼šè°ƒç”¨å¤šä¸ªæ¨¡å‹æœåŠ¡ï¼Œé€šè¿‡å·¥å…·æ‰§è¡ŒçœŸå®æ“ä½œï¼Œå€ŸåŠ©å‘é‡æ•°æ®åº“ç»´æŠ¤é•¿æœŸè®°å¿†ï¼Œå†é€šè¿‡ç¼“å­˜æœºåˆ¶æ§åˆ¶ LLM çš„é‡å¤è°ƒç”¨æˆæœ¬ã€‚</p>
<p>è¿™äº›ç»„ä»¶å…±åŒæ„æˆäº†ä¸€æ¡é«˜åº¦åŠ¨æ€ã€è·¨ç³»ç»Ÿã€è·¨è¯­ä¹‰çš„æ‰§è¡Œé“¾è·¯ã€‚æ•°æ®ç±»å‹æ›´å¤šã€æ¥æºæ›´åˆ†æ•£ã€å…³è”å…³ç³»æ›´å¤æ‚ï¼Œè¿™å·²ç»ä¸æ˜¯ä¼ ç»Ÿè½¯ä»¶å¯ä»¥ç±»æ¯”çš„åº”ç”¨å½¢æ€äº†ã€‚</p>
<p>åœ¨è¿™ç§èƒŒæ™¯ä¸‹ï¼Œå­¤ç«‹çš„æ•°æ®å‡ ä¹æ²¡æœ‰ä»·å€¼ã€‚</p>
<p>åªæœ‰å°†æ¨¡å‹ã€å·¥å…·ã€æµç¨‹ä¸åŸºç¡€è®¾æ–½äº§ç”Ÿçš„ä¿¡å·ç»Ÿä¸€å…³è”èµ·æ¥ï¼Œæ‰èƒ½çœŸæ­£å›ç­”ï¼šç³»ç»Ÿåˆ°åº•å“ªé‡Œå‡ºäº†é—®é¢˜ï¼Ÿè¿™å°±è¦æ±‚æ•°æ®é‡‡é›†å…·å¤‡ä¸‰ä¸ªèƒ½åŠ›ï¼šç»Ÿä¸€çš„æ•°æ®è¯­ä¹‰ã€ä½æˆæœ¬ä¸”é«˜è´¨é‡çš„é‡‡é›†æ–¹å¼ï¼Œä»¥åŠç«¯åˆ°ç«¯çš„å…¨é“¾è·¯è¿½è¸ªèƒ½åŠ›ã€‚</p>
<h3 data-id="heading-2">Agent çš„è¾“å‡ºå¯é æ€§</h3>
<p>Agent ä¸ä¼ ç»Ÿè½¯ä»¶çš„æ ¹æœ¬å·®å¼‚ï¼Œåœ¨äºå…¶è‡ªä¸»å†³ç­–ç‰¹æ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ac81fac7a794815a3cde444f60b8863~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803730&amp;x-signature=8mK5i19LXcZWfwKmbOiLHcCLZ8Y%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®ƒæ¶‰åŠå¤šæ¨¡æ€è¾“å…¥ã€å¤§æ¨¡å‹æ¨ç†ã€å·¥å…·è°ƒç”¨å’ŒçŠ¶æ€åé¦ˆç­‰å¤šå±‚äº¤äº’ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ç§éçº¿æ€§å·¥ä½œæµã€‚å½“è¿™ç§å·¥ä½œæµè¢«æŠ•å…¥çœŸå®ä¸šåŠ¡åœºæ™¯åï¼Œä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹çš„ä¸ç¡®å®šæ€§ï¼Œéƒ½ä¼šè¢«åç»­æ­¥éª¤ä¸æ–­æ”¾å¤§ï¼Œæœ€ç»ˆå½±å“æ•´ä½“ç»“æœã€‚</p>
<p>å› æ­¤ï¼ŒAI çš„éç¡®å®šæ€§ï¼Œæˆ–è€…è¯´æ²¡æœ‰æ ‡å‡†ç­”æ¡ˆï¼Œå‚¬ç”Ÿäº†è¯„ä¼°ç»æµã€‚</p>
<p>è¯„ä¼°å¼€å§‹ä»é˜¶æ®µæ€§å·¥ä½œï¼Œæ¼”è¿›ä¸ºä¸€ç§æŒç»­å­˜åœ¨çš„å·¥ç¨‹å®è·µã€‚è¯„ä¼°ä¸å†å‘ç”Ÿåœ¨ç³»ç»Ÿä¸Šçº¿ä¹‹åï¼Œè€Œæ˜¯ä¸å¼€å‘è¿‡ç¨‹å¹¶è¡Œå±•å¼€ã€‚è¿™èƒŒåé€æ¸å½¢æˆäº†ä¸€ç§æ–°çš„æ²»ç†èŒƒå¼ï¼šç”±å¯è§‚æµ‹æ€§ï¼ˆåŒ…å«æ•°æ®é‡‡é›†ï¼‰ã€åº¦é‡æ¡†æ¶ï¼ˆBenchmarkï¼‰ä»¥åŠè‡ªåŠ¨åŒ–è¯„ä¼°å…±åŒæ„æˆçš„ Agent æ²»ç†ä½“ç³»ã€‚åœ¨è¿™ä¸ªä½“ç³»ä¸­ï¼Œé«˜è´¨é‡ã€å¯å…³è”çš„æ•°æ®ï¼Œæ˜¯ä¸€åˆ‡è¯„ä¼°ä¸æ”¹è¿›çš„å‰æã€‚</p>
<h3 data-id="heading-3">æˆæœ¬å¯æ§</h3>
<p>å½“ Agent ä¸æ¨¡å‹è¿›è¡Œå¤šè½®äº¤äº’æ—¶ï¼ŒToken æ¶ˆè€—å¾€å¾€å‘ˆæŒ‡æ•°çº§å¢é•¿ã€‚åœ¨æŸäº›å¤æ‚åœºæ™¯ä¸‹ï¼Œç³»ç»Ÿç”šè‡³å¯èƒ½é™·å…¥æ— æ­¢å¢ƒçš„æ¨ç†å¾ªç¯ï¼Œå½¢æˆå…¸å‹çš„â€œToken é»‘æ´â€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e95eb1c37d3460c8f45c8a78ac0e6c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803730&amp;x-signature=k9wRo5JfGOyShTaRHZIggW5zzd4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¦‚æœç¼ºä¹é“¾è·¯çº§çš„å¯è§‚æµ‹èƒ½åŠ›ï¼Œå¼€å‘è€…æ—¢æ— æ³•åˆ¤æ–­æ¶ˆè€—å‘ç”Ÿåœ¨å“ªä¸€ç¯ï¼Œä¹Ÿæ— æ³•è¯„ä¼°ä¼˜åŒ–çš„çœŸå®æ”¶ç›Šã€‚ç³»ç»Ÿçš„æˆæœ¬æ§åˆ¶ï¼Œæœ€ç»ˆåªèƒ½ä¾èµ–ç»éªŒä¸çŒœæµ‹ã€‚è€Œä¸€æ—¦å…·å¤‡ç«¯åˆ°ç«¯çš„è§‚æµ‹èƒ½åŠ›ï¼Œå†³ç­–å°±æœ‰äº†ä¾æ®ï¼šå“ªäº›æ­¥éª¤å€¼å¾—ä¿ç•™ï¼Œå“ªäº›æ¨ç†å¯ä»¥è£å‰ªï¼Œå“ªäº›å·¥å…·è°ƒç”¨æ­£åœ¨åˆ¶é€ ä¸å¿…è¦çš„æ¶ˆè€—ã€‚</p>
<p>è€Œç»Ÿä¸€çš„æ•°æ®é‡‡é›†æ˜¯å»ºç«‹ç«¯åˆ°ç«¯çš„è§‚æµ‹èƒ½åŠ›çš„å‰æã€‚</p>
<p>æ­£æ˜¯åœ¨è¿™æ ·çš„æŠ€æœ¯èƒŒæ™¯ä¸‹ï¼Œé˜¿é‡Œäº‘é€‰æ‹©å¼€æº LoongSuite æ•°æ®é‡‡é›†å¼€å‘å¥—ä»¶ï¼Œå¸Œæœ›åœ¨é¡ºåº” AI å·¥ç¨‹æ¼”è¿›è¶‹åŠ¿çš„åŒæ—¶ï¼Œå¸®åŠ©æ›´å¤šä¼ä¸šä»¥æ›´ä½çš„æˆæœ¬ã€æ›´é«˜çš„æ•ˆç‡ï¼Œæ„å»ºæ ‡å‡†åŒ–ã€å¯æŒç»­æ¼”è¿›çš„å¯è§‚æµ‹ä½“ç³»ã€‚</p>
<h2 data-id="heading-4">LoongSuite çš„æ„æˆ</h2>
<p>ä½œä¸ºä¸€æ¬¾å¼€æºçš„æ•°æ®é‡‡é›†å¼€å‘å¥—ä»¶ï¼ŒLoongSuiteï¼ˆ/lÊŠÅ‹ swiËt/ï¼ŒéŸ³è¯‘ é¾™-sweetï¼‰ã€‚</p>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Falibaba%2Floongcollector" target="_blank" title="https://github.com/alibaba/loongcollector" ref="nofollow noopener noreferrer">github.com/alibaba/looâ€¦</a></p>
<p>LoongSuite åŒ…å«ä¸»æœºæ¢é’ˆã€è¿›ç¨‹çº§æ¢é’ˆå’Œæ•°æ®é‡‡é›†å¼•æ“ä¸‰éƒ¨åˆ†ï¼Œå…¶ä¸­ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f67284b68bc42c1bb1672b9e362dba2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803730&amp;x-signature=bcMGVEHhI00c%2B%2B10tuxhdMofqpw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li><strong>LoongCollector</strong></li>
</ul>
<p>æ˜¯ä¸»æœºæ¢é’ˆï¼ŒåŸºäº eBPF æä¾›æ—¥å¿—æ”¶é›†ã€Prometheus æŒ‡æ ‡æ”¶é›†ä»¥åŠç½‘ç»œå’Œå®‰å…¨æ”¶é›†åŠŸèƒ½ã€‚å®ç°äº†é«˜æ•ˆçµæ´»çš„æ•°æ®å¤„ç†ï¼Œä»¥åŠé€šè¿‡ eBPF ç­‰æŠ€æœ¯å®ç°äº†è¿›ç¨‹å¤–æ•°æ®çš„é‡‡é›†èƒ½åŠ›ã€‚åŒæ—¶ï¼Œå…¶ä½œä¸ºæ•°æ®é‡‡é›†å¼•æ“ï¼Œå®ç°äº†ä¸»æœºçº§æ¢é’ˆä¸è¿›ç¨‹çº§æ’æ¡©çš„æœ‰æ•ˆç»“åˆã€‚</p>
<ul>
<li><strong>LoongSuite å¤šè¯­è¨€ Agent</strong></li>
</ul>
<p>æ˜¯è¿›ç¨‹çº§æ¢é’ˆï¼Œå®ç°äº†åº”ç”¨å†…ç»†ç²’åº¦å¯è§‚æµ‹æ•°æ®çš„é‡‡é›†ï¼Œç›®å‰æä¾›äº†Â Javaã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUzNzYxNjAzMg%3D%3D%26mid%3D2247581261%26idx%3D1%26sn%3D428d24059141cab34cb3705cb54da2e7%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUzNzYxNjAzMg==&amp;mid=2247581261&amp;idx=1&amp;sn=428d24059141cab34cb3705cb54da2e7&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Goï¼ˆç¼–è¯‘æ—¶æ’æ¡©ï¼‰</a>ã€Python ç­‰ä¸»æµç¼–ç¨‹è¯­è¨€ Agentï¼Œèƒ½å¤Ÿè‡ªåŠ¨æ•è·è¿›ç¨‹ä¸­çš„å‡½æ•°è°ƒç”¨é“¾è·¯ã€å‚æ•°ä¼ é€’è·¯å¾„åŠèµ„æºæ¶ˆè€—ï¼Œæ— éœ€ä¿®æ”¹ä¸šåŠ¡ä»£ç å³å¯å®ç°è¿è¡Œæ—¶çŠ¶æ€çš„ç²¾å‡†é‡‡é›†ã€‚</p>
<p>è¿™ç§æ— ä¾µå…¥å¼è®¾è®¡ç‰¹åˆ«é€‚ç”¨äºåŠ¨æ€æ›´æ–°é¢‘ç¹çš„æŠ€æœ¯ç¯å¢ƒï¼Œæ—¢ä¿éšœè§‚æµ‹æ•°æ®çš„å®Œæ•´æ€§ï¼Œåˆé¿å…å¯¹æ ¸å¿ƒä¸šåŠ¡é€»è¾‘äº§ç”Ÿå¹²æ‰°ã€‚å½“é¢å¯¹å¤æ‚å·¥ä½œæµæ—¶ï¼Œç³»ç»Ÿå¯è‡ªåŠ¨å…³è”åˆ†å¸ƒå¼è¿½è¸ªä¸Šä¸‹æ–‡ï¼Œæ„å»ºå®Œæ•´çš„æ‰§è¡Œè·¯å¾„æ‹“æ‰‘ã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒæ•°æ®é‡‡é›†å¼•æ“</strong></li>
</ul>
<p>LoongCollector é™¤äº†ä¸»æœºæ¢é’ˆçš„èƒ½åŠ›ï¼Œä½œä¸ºæ ¸å¿ƒæ•°æ®é‡‡é›†å¼•æ“ï¼Œè¿˜å®ç°äº†å¤šç»´åº¦è§‚æµ‹æ•°æ®çš„ç»Ÿä¸€å¤„ç†ï¼Œä»åŸå§‹æ•°æ®é‡‡é›†åˆ°ç»“æ„åŒ–è½¬æ¢ï¼Œå†åˆ°æ™ºèƒ½è·¯ç”±åˆ†å‘ï¼Œæ•´ä¸ªæµç¨‹é€šè¿‡æ¨¡å—åŒ–æ¶æ„å®ç°çµæ´»ç¼–æ’ã€‚è¿™ç§æ¶æ„ä½¿è§‚æµ‹æ•°æ®æ—¢å¯å¯¹æ¥å¼€æºåˆ†æå¹³å°å®ç°è‡ªä¸»æ²»ç†ï¼Œä¹Ÿå¯æ— ç¼è¡”æ¥æ‰˜ç®¡æœåŠ¡æ„å»ºäº‘åŸç”Ÿè§‚æµ‹ä½“ç³»ã€‚</p>
<h2 data-id="heading-5">LoongSuite æœ‰å“ªäº›ç‰¹ç‚¹</h2>
<p>ä»å·¥ç¨‹å®ç°è§’åº¦çœ‹ï¼ŒLoongSuite çš„è®¾è®¡ç›®æ ‡éå¸¸æ˜ç¡®ï¼šåœ¨ä¸å¹²æ‰°ä¸šåŠ¡çš„å‰æä¸‹ï¼ŒæŠŠè¯¥é‡‡çš„éƒ½é‡‡åˆ°ï¼ŒæŠŠä¸è¯¥ä»˜å‡ºçš„æˆæœ¬é™åˆ°æœ€ä½ã€‚</p>
<ul>
<li><strong>é›¶ä¾µå…¥é‡‡é›†ï¼š</strong> é€šè¿‡è¿›ç¨‹çº§æ’æ¡©ä¸ä¸»æœºçº§æ¢é’ˆç»“åˆï¼Œæ— éœ€ä¿®æ”¹ä»£ç å³å¯æ•è·å…¨é“¾è·¯æ•°æ®ã€‚</li>
<li><strong>å…¨æ ˆæ”¯æŒï¼š</strong> è¦†ç›– Javaã€Goã€Python ç­‰ä¸»æµè¯­è¨€ï¼Œé€‚é…å½“å‰ç»å¤§å¤šæ•° AI åº”ç”¨å½¢æ€ã€‚</li>
<li><strong>ç”Ÿæ€å…¼å®¹ï¼š</strong> LoongSuite å¯ä»¥çœ‹åšæ˜¯ OpenTelemetry çš„ä¸€ä¸ªå‘è¡Œç‰ˆ <strong>[</strong> <strong>1]</strong> ï¼Œæ·±åº¦å…¼å®¹ OTï¼Œéµå¾ªç¤¾åŒº GenAI è¯­ä¹‰è§„èŒƒï¼Œå¹¶åŸºäºä¸Šæ¸¸è¿›è¡ŒåŒæ­¥ï¼›æ­¤å¤–ï¼Œæˆ‘ä»¬åœ¨ AI åœºæ™¯ä¸‹åšåˆ›æ–°åŠŸèƒ½çš„å­µåŒ–å™¨ï¼Œä¼šæŒç»­æŠŠæ–°ç‰¹æ€§è´¡çŒ®ç»™ OTel ç¤¾åŒºã€‚ä¾‹å¦‚åƒ Go æ¢é’ˆï¼Œæˆ‘ä»¬å·²ç»æçŒ®ç»™ç¤¾åŒºäº†ã€‚</li>
</ul>
<p>åœ¨æ­¤åŸºç¡€ä¹‹ä¸Šï¼ŒLoongSuite å†…çš„ LoongCollector è¿›ä¸€æ­¥æä¾›äº†ä¸‰é¡¹å…³é”®èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-6">å¤šç»´åº¦æ•°æ®çš„ç»Ÿä¸€é‡‡é›†èƒ½åŠ›</h3>
<p>åœ¨ Agent åœºæ™¯ä¸­ï¼Œå•ä¸€è§†è§’å·²ç»æ— æ³•è§£é‡Šç³»ç»Ÿè¡Œä¸ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/135238ed5d1c498b9e01b984908ab7fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803730&amp;x-signature=gmjKX6EwKjl%2BgQeGJ2gpKpvzt%2F4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸€ä¸ªçœ‹ä¼¼ç®€å•çš„ç”¨æˆ·è¯·æ±‚ï¼ŒèƒŒåå¾€å¾€åŒæ—¶æ¶‰åŠæ¨¡å‹æ¨ç†ã€å·¥å…·è°ƒç”¨ã€ä¸Šä¸‹æ–‡æ£€ç´¢å’ŒçŠ¶æ€æ›´æ–°ç­‰å¤šä¸ªæ­¥éª¤ã€‚æ—¥å¿—åªèƒ½å›ç­”â€œå‘ç”Ÿäº†ä»€ä¹ˆâ€ï¼ŒæŒ‡æ ‡åªèƒ½åæ˜ â€œæ•´ä½“æ˜¯å¦å¼‚å¸¸â€ï¼Œè€Œ Trace åªèƒ½å±•ç¤ºâ€œè°ƒç”¨é¡ºåºâ€ã€‚å¦‚æœè¿™äº›ä¿¡å·å½¼æ­¤å‰²è£‚ï¼Œå·¥ç¨‹å¸ˆé¢å¯¹çš„æ°¸è¿œæ˜¯ç‰‡æ®µåŒ–çš„äº‹å®ï¼Œæ—¢æ— æ³•åˆ¤æ–­é—®é¢˜çš„æ ¹å› ï¼Œä¹Ÿéš¾ä»¥è¯„ä¼°ä¸€æ¬¡ä¼˜åŒ–æ˜¯å¦çœŸæ­£ç”Ÿæ•ˆã€‚</p>
<p>LoongCollector å°† Logsã€Metricsã€Tracesã€Eventsã€Profiles ç»Ÿä¸€çº³å…¥åŒä¸€é‡‡é›†ä¸å…³è”ä½“ç³»ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨è¿˜åŸ Agent çš„çœŸå®æ‰§è¡Œè¿‡ç¨‹ï¼Œè®©é—®é¢˜ä¸å†åœç•™åœ¨â€œæ„Ÿè§‰ä¸å¯¹â€ï¼Œè€Œæ˜¯å¯ä»¥è¢«å®Œæ•´æè¿°ã€å¤ç°å’Œåˆ†æã€‚LoongCollector é‡‡ç”¨ All-in-One æ¶æ„ï¼Œæ”¯æŒåŒ…æ‹¬ Logsã€Metricsã€Tracesã€Eventsã€Profiles çš„å…¨ç±»å‹æ•°æ®é‡‡é›†ï¼ŒåŒæ—¶é€šè¿‡ eBPF å®ç°è¿›ç¨‹å¤–é‡‡é›†ï¼Œé™ä½ä¸šåŠ¡å¹²æ‰°ã€‚</p>
<h3 data-id="heading-7">æè‡´çš„æ€§èƒ½ä¸ç¨³å®šæ€§</h3>
<p>æè‡´çš„æ€§èƒ½ä¸ç¨³å®šæ€§æ˜¯æ•°æ®é‡‡é›†å±‚ä¸å¯å¦¥åçš„å‰æã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2758196664ce4bc19d612c3d2ac11636~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803730&amp;x-signature=gjWbwHPbp%2F1nsPRYVYzmulY7w%2FQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é‡‡é›†ç³»ç»Ÿä½äºä¸šåŠ¡ç³»ç»Ÿçš„å…³é”®è·¯å¾„ï¼Œä¸€æ—¦è‡ªèº«å¼•å…¥é¢å¤–æŠ–åŠ¨ï¼Œå½±å“å¾€å¾€ä¼šè¢«è¿…é€Ÿæ”¾å¤§ã€‚å°¤å…¶æ˜¯åœ¨ Agent åº”ç”¨ä¸­ï¼Œå¤šè½®æ¨ç†å’Œé¢‘ç¹çš„å·¥å…·è°ƒç”¨ä¼šå¸¦æ¥çªå‘æ€§çš„æ•°æ®æ´ªå³°ï¼Œå¦‚æœé‡‡é›†ç»„ä»¶åœ¨é«˜å¹¶å‘ä¸‹å‡ºç°é”ç«äº‰ã€é˜»å¡æˆ–æ— åºå †ç§¯ï¼Œå¾ˆå®¹æ˜“å°†åŸæœ¬å¯æ§çš„æ€§èƒ½æ³¢åŠ¨å‡çº§ä¸ºå…¨é“¾è·¯é—®é¢˜ã€‚</p>
<p>LoongCollector é€šè¿‡æ—¶é—´ç‰‡è°ƒåº¦ã€æ— é”åŒ–è®¾è®¡ã€é«˜ä½æ°´ä½åé¦ˆé˜Ÿåˆ—ä¸æŒä¹…åŒ–ç¼“å­˜ï¼Œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹å®ç°ä½èµ„æºæ¶ˆè€—ä¸é«˜ååï¼Œç¡®ä¿æ•°æ®ä¸ä¸¢å¤±ã€ç³»ç»Ÿä¸æŠ–åŠ¨ï¼Œä¿éšœä¸šåŠ¡ç¨³å®šæ€§ã€‚</p>
<h3 data-id="heading-8">çµæ´»éƒ¨ç½²ä¸æ™ºèƒ½è·¯ç”±</h3>
<p>çµæ´»éƒ¨ç½²ä¸æ™ºèƒ½è·¯ç”±èƒ½åŠ›ï¼Œå†³å®šäº†è¿™å¥—é‡‡é›†ä½“ç³»èƒ½å¦é€‚åº”æŒç»­æ¼”è¿›çš„ AI å·¥ç¨‹å®è·µã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c65f034c5b14aa9b15c08df9347b321~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803730&amp;x-signature=amcPBU2VQyHBdj64ebrFJkMZSRQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯è§‚æµ‹ç³»ç»Ÿå¹¶éä¸€æ¬¡æ€§å»ºè®¾å®Œæˆï¼Œéšç€æ¨¡å‹ã€æ¡†æ¶å’Œä¸šåŠ¡å½¢æ€çš„å˜åŒ–ï¼Œæ•°æ®çš„ä»·å€¼å¯†åº¦å’Œä½¿ç”¨æ–¹å¼éƒ½ä¼šä¸æ–­è°ƒæ•´ã€‚å¦‚æœé‡‡é›†å±‚ä¸ä¸‹æ¸¸å­˜å‚¨ã€åˆ†æç³»ç»Ÿå¼ºè€¦åˆï¼Œæ¯ä¸€æ¬¡è°ƒæ•´éƒ½æ„å‘³ç€é‡æ„å’Œé£é™©ç´¯ç§¯ã€‚</p>
<p>LoongCollector é€šè¿‡æ¨¡å—åŒ–æ¶æ„ï¼Œå°†é‡‡é›†ã€å¤„ç†ä¸åˆ†å‘è§£è€¦ï¼Œä½¿ä¸åŒæ¥æºã€ä¸åŒè¯­ä¹‰çš„æ•°æ®å¯ä»¥åœ¨é‡‡é›†å±‚å®Œæˆç»“æ„åŒ–è½¬æ¢ï¼Œå¹¶æ ¹æ®ç­–ç•¥è¢«è·¯ç”±è‡³ä¸åŒçš„ä¸‹æ¸¸ç³»ç»Ÿã€‚è¿™ç§è®¾è®¡è®©å·¥ç¨‹å›¢é˜Ÿå¯ä»¥åœ¨ä¸ç ´åæ—¢æœ‰ä½“ç³»çš„å‰æä¸‹ï¼Œå¼•å…¥æ–°çš„åˆ†æå¹³å°æˆ–è¯„ä¼°ç³»ç»Ÿï¼Œä»è€Œä¿è¯å¯è§‚æµ‹èƒ½åŠ›èƒ½å¤Ÿä¼´éš Agent åº”ç”¨ä¸€åŒæ¼”è¿›ï¼Œè€Œä¸æ˜¯æˆä¸ºåˆ¶çº¦åˆ›æ–°çš„ç“¶é¢ˆã€‚</p>
<h2 data-id="heading-9">ä¸ºä½•è¦å¼€æº</h2>
<p>åœ¨ AI æ—¶ä»£ï¼Œæ•°æ®é‡‡é›†æ—©å·²ä¸æ˜¯ä¸€ä¸ªâ€œå®ç°é—®é¢˜â€ï¼Œè€Œæ˜¯ä¸€ä¸ªç”Ÿæ€é—®é¢˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/225e3404b3214686ae264732f08bc6b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803730&amp;x-signature=Lla2OLTNyaP7Sq0%2FeqFgY1cs7xM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸€æ–¹é¢ï¼ŒAgent åº”ç”¨çš„å¤æ‚æ€§æ­£åœ¨å¿«é€Ÿå¤–æº¢ã€‚æ— è®ºæ˜¯åŸºäºä½ä»£ç å¹³å°å¿«é€Ÿæ‹¼è£…çš„ Agentï¼Œè¿˜æ˜¯åœ¨é«˜ä»£ç æ¡†æ¶ä¸­ç²¾ç»†æ‰“ç£¨çš„å¤æ‚ç³»ç»Ÿï¼Œå…¶æŠ€æœ¯æ ˆã€è¿è¡Œå½¢æ€å’Œäº¤äº’æ¨¡å¼éƒ½é«˜åº¦å¤šæ ·åŒ–ã€‚å¦‚æœæ•°æ®é‡‡é›†èƒ½åŠ›è¢«å°è£…åœ¨å•ä¸€å‚å•†æˆ–å°é—­ä½“ç³»ä¸­ï¼Œå°±ä¸å¯é¿å…åœ°é¢ä¸´è¦†ç›–ä¸è¶³ã€è¯­ä¹‰å‰²è£‚å’Œé€‚é…æˆæœ¬æŒ‡æ•°çº§ä¸Šå‡çš„é—®é¢˜ã€‚å¯è§‚æµ‹æ€§è¦çœŸæ­£æˆä¸º AI çš„åŸºç¡€è®¾æ–½ï¼Œå‰ææ˜¯å®ƒå¿…é¡»å…ˆæˆä¸ºå…¬å…±èƒ½åŠ›ã€‚</p>
<p>å¦ä¸€æ–¹é¢ï¼ŒAI å¯è§‚æµ‹æ­£åœ¨å½¢æˆäº‹å®ä¸Šçš„è¡Œä¸šå…±è¯†å’ŒæŠ€æœ¯æ ‡å‡†ã€‚ä» OpenTelemetry åœ¨å¯è§‚æµ‹é¢†åŸŸçš„æˆåŠŸç»éªŒå¯ä»¥çœ‹åˆ°ï¼šåªæœ‰é€šè¿‡å¼€æºï¼Œæ‰èƒ½åœ¨è¯­ä¹‰è§„èŒƒã€æ•°æ®æ¨¡å‹å’Œé‡‡é›†æ–¹å¼ä¸Šå½¢æˆæœ€å¤§å…¬çº¦æ•°ï¼Œé¿å…é‡å¤é€ è½®å­ï¼Œä¹Ÿé¿å…å„è‡ªä¸ºæ”¿ã€‚å°¤å…¶åœ¨ Agent åœºæ™¯ä¸‹ï¼Œå‡½æ•°è°ƒç”¨ã€å·¥å…·ä½¿ç”¨ã€æ¨ç†é“¾è·¯ã€è¯„ä¼°ç»“æœç­‰æ–°å‹ä¿¡å·å±‚å‡ºä¸ç©·ï¼Œä»»ä½•ä¸€å®¶å‚å•†éƒ½ä¸å¯èƒ½ç‹¬ç«‹å®šä¹‰æ ‡å‡†ç­”æ¡ˆã€‚å¼€æºï¼Œæ˜¯å¯¹ä¸ç¡®å®šæ€§æœ€åŠ¡å®çš„å›åº”ã€‚</p>
<p>ä»å·¥ç¨‹è§†è§’çœ‹ï¼Œå¼€æºä¹Ÿæ˜¯å¯¹æ€§èƒ½ä¸æˆæœ¬çš„é•¿æœŸè´Ÿè´£ã€‚æ•°æ®é‡‡é›†ä½äºç³»ç»Ÿæœ€åº•å±‚ï¼Œè¿è¡Œåœ¨ä¸»æœºã€å®¹å™¨å’Œè¿›ç¨‹çš„å…³é”®è·¯å¾„ä¸Šï¼Œä»»ä½•é¢å¤–å¼€é”€éƒ½ä¼šè¢«æˆå€æ”¾å¤§ã€‚é€šè¿‡å¼€æºï¼ŒLoongSuite èƒ½å¤Ÿåœ¨æ›´å¹¿æ³›çš„çœŸå®ç”Ÿäº§ç¯å¢ƒä¸­è¢«éªŒè¯ã€è¢«å®¡è§†ã€è¢«ä¼˜åŒ–ï¼Œè®©æè‡´æ€§èƒ½ä¸å†åªæ˜¯å®éªŒå®¤æŒ‡æ ‡ï¼Œè€Œæ˜¯åœ¨ç¤¾åŒºå…±å»ºä¸­ä¸æ–­é€¼è¿‘çš„å·¥ç¨‹ç°å®ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œé˜¿é‡Œäº‘å¹¶ä¸å¸Œæœ› LoongSuite åªæ˜¯â€œå¦ä¸€ä¸ªé‡‡é›†å™¨â€ã€‚å°†å…¶å¼€æºï¼Œæ„å‘³ç€å®ƒä¸åªæœåŠ¡äºæŸä¸€ä¸ªå¹³å°æˆ–äº§å“ï¼Œè€Œæ˜¯æˆä¸º AI å¯è§‚æµ‹ä½“ç³»ä¸­çš„ä¸€å—é€šç”¨æ‹¼å›¾ï¼šæ—¢å¯ä»¥è¢«é›†æˆè¿›ä¸åŒçš„ Agent æ¡†æ¶ï¼Œä¹Ÿå¯ä»¥ä¸å¤šç§å­˜å‚¨ã€åˆ†æå’Œè¯„ä¼°ç³»ç»Ÿè‡ªç”±ç»„åˆï¼Œæœ€ç»ˆå¸®åŠ©å¼€å‘è€…æ„å»ºçœŸæ­£ç«¯åˆ°ç«¯ã€å¯æ¼”è¿›çš„ Agent æ²»ç†ä½“ç³»ã€‚</p>
<p>å› æ­¤ï¼Œå¼€æºå¹¶éç»ˆç‚¹ï¼Œè€Œæ˜¯ä¸€ç§é€‰æ‹©ï¼šé€‰æ‹©ç”¨å¼€æ”¾æ¢å–æ ‡å‡†ï¼Œç”¨å…±å»ºå¯¹æŠ—å¤æ‚ï¼Œç”¨å·¥ç¨‹ç†æ€§æ¨åŠ¨ AI åº”ç”¨èµ°å‘è§„æ¨¡åŒ–å’Œå¯æŒç»­ã€‚LoongSuite çš„å¼€æºï¼Œæ­£æ˜¯åœ¨è¿™ä¸€åˆ¤æ–­ä¹‹ä¸Šçš„è‡ªç„¶ç»“æœã€‚</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<p>[1]Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUzNzYxNjAzMg%3D%3D%26mid%3D2247575751%26idx%3D1%26sn%3D57f3e143cd4bf8232c0ef1898cb23967%26scene%3D21%26token%3D53749100%26lang%3Dzh_CN%26poc_token%3DHJagaWmjW98y5CGGapVuocFmKziB1Vr-w7Eyx5PK%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUzNzYxNjAzMg==&amp;mid=2247575751&amp;idx=1&amp;sn=57f3e143cd4bf8232c0ef1898cb23967&amp;scene=21&amp;token=53749100&amp;lang=zh_CN&amp;poc_token=HJagaWmjW98y5CGGapVuocFmKziB1Vr-w7Eyx5PK#wechat_redirect" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘æ­£å¼å¼€æº LoongSuiteï¼šæ‰“é€  AI æ—¶ä»£çš„é«˜æ€§èƒ½ä½æˆæœ¬å¯è§‚æµ‹é‡‡é›†å¥—ä»¶</a></p>
<p>[2]Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUzNzYxNjAzMg%3D%3D%26mid%3D2247576188%26idx%3D1%26sn%3Dcf03d84317c10f09ae2080969f4f46ad%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUzNzYxNjAzMg==&amp;mid=2247576188&amp;idx=1&amp;sn=cf03d84317c10f09ae2080969f4f46ad&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">LoongCollectorï¼šæ„å»ºæ™ºèƒ½æ—¶ä»£çš„æ•°æ®é‡‡é›†æ–°èŒƒå¼</a></p>
<p>[3]Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fopentelemetry.io%2Fdocs%2Fconcepts%2Fdistributions%2F" target="_blank" title="https://opentelemetry.io/docs/concepts/distributions/" ref="nofollow noopener noreferrer">opentelemetry.io/docs/concepâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue-æ·±åº¦è§£è¯»ä»£ç†æŠ€æœ¯ï¼šObject.defineProperty ä¸ Proxy]]></title>    <link>https://juejin.cn/post/7602447286607331337</link>    <guid>https://juejin.cn/post/7602447286607331337</guid>    <pubDate>2026-02-03T09:06:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602447286607331337" data-draft-id="7602440800295075886" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue-æ·±åº¦è§£è¯»ä»£ç†æŠ€æœ¯ï¼šObject.defineProperty ä¸ Proxy"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,JavaScript"/> <meta itemprop="datePublished" content="2026-02-03T09:06:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‘ç°ä¸€åªå¤§å‘†ç“œ"/> <meta itemprop="url" content="https://juejin.cn/user/180747382561607"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue-æ·±åº¦è§£è¯»ä»£ç†æŠ€æœ¯ï¼šObject.defineProperty ä¸ Proxy
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/180747382561607/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‘ç°ä¸€åªå¤§å‘†ç“œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T09:06:28.000Z" title="Tue Feb 03 2026 09:06:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>åœ¨ Vue çš„è¿›åŒ–å²ä¸­ï¼Œä» Vue 2 åˆ° Vue 3 çš„è·¨è¶Šï¼Œæœ€æ ¸å¿ƒçš„å˜é©è«ä¹‹è¿‡äºå“åº”å¼ç³»ç»Ÿçš„é‡æ„ã€‚è€Œè¿™åœºé‡æ„çš„ä¸»è§’ï¼Œæ­£æ˜¯ <code>Object.defineProperty</code> ä¸ <code>Proxy</code>ã€‚æœ¬æ–‡å°†å¸¦ä½ ä»åº•å±‚æè¿°ç¬¦åˆ° <code>Reflect</code> é™·é˜±ï¼Œæ·±åº¦æ‹†è§£è¿™ä¸¤å¤§å¯¹è±¡ä»£ç†æŠ€æœ¯ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ ES5 æ—¶ä»£çš„åŠŸè‡£ï¼šObject.defineProperty</h2>
<p><code>Object.defineProperty</code> ç”¨äºåœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰æˆ–ä¿®æ”¹å±æ€§ã€‚Vue 2 çš„å“åº”å¼åŸºç¡€æ­£æ˜¯å»ºç«‹åœ¨å…¶â€œå­˜å–æè¿°ç¬¦â€ä¹‹ä¸Šçš„ã€‚</p>
<h3 data-id="heading-2">1. åŸºç¡€è¯­æ³•</h3>
<p><strong><code>Object.defineProperty(obj, prop, descriptor);</code></strong></p>
<ul>
<li><code>obj</code>ï¼šç›®æ ‡å¯¹è±¡</li>
<li><code>prop</code>ï¼šè¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§åï¼ˆå­—ç¬¦ä¸²æˆ– Symbolï¼‰</li>
<li><code>descriptor</code>ï¼šå±æ€§æè¿°ç¬¦ï¼Œæ˜¯ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼ˆåŒ…å«æ•°æ®æè¿°ç¬¦ä¸å­˜å–æè¿°ç¬¦ï¼‰</li>
</ul>
<h3 data-id="heading-3">2. descriptoræè¿°ç¬¦åˆ†ç±»</h3>
<p>å®ƒå¯åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»ä¸ºæ•°æ®æè¿°ç¬¦ã€ä¸€ç±»ä¸ºå­˜å–æè¿°ç¬¦</p>
<p>å±æ€§æè¿°ç¬¦ä¸èƒ½åŒæ—¶åŒ…å« <code>value/writable</code>ï¼ˆæ•°æ®æè¿°ç¬¦ï¼‰å’Œ <code>get/set</code>ï¼ˆå­˜å–æè¿°ç¬¦ï¼‰ã€‚</p>
<ul>
<li>
<p><strong>æ•°æ®æè¿°ç¬¦</strong>ï¼š</p>



































<table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>value</code></td><td>any</td><td><code>undefined</code></td><td>å±æ€§çš„å€¼</td></tr><tr><td><code>writable</code></td><td>boolean</td><td><code>false</code></td><td>æ˜¯å¦å¯å†™ï¼ˆèƒ½å¦è¢«é‡æ–°èµ‹å€¼ï¼‰</td></tr><tr><td><code>enumerable</code></td><td>boolean</td><td><code>false</code></td><td>æ˜¯å¦å¯æšä¸¾ï¼ˆèƒ½å¦åœ¨ <code>for...in</code> æˆ– <code>Object.keys</code> ä¸­å‡ºç°ï¼‰</td></tr><tr><td><code>configurable</code></td><td>boolean</td><td><code>false</code></td><td>æ˜¯å¦å¯é…ç½®ï¼ˆèƒ½å¦è¢«åˆ é™¤æˆ–ä¿®æ”¹æè¿°ç¬¦ï¼‰</td></tr></tbody></table>
</li>
<li>
<p><strong>å­˜å–æè¿°ç¬¦ï¼š</strong></p>




















<table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>get</code></td><td>function</td><td>è¯»å–å±æ€§æ—¶è°ƒç”¨çš„å‡½æ•°</td></tr><tr><td><code>set</code></td><td>function</td><td>è®¾ç½®å±æ€§æ—¶è°ƒç”¨çš„å‡½æ•°</td></tr></tbody></table>
</li>
</ul>
<blockquote>
<p>æ³¨æ„â—ï¼šä¸€ä¸ªæè¿°ç¬¦<strong>ä¸èƒ½åŒæ—¶åŒ…å«</strong> <code>value/writable</code> å’Œ <code>get/set</code>ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p>
</blockquote>
<h3 data-id="heading-4">3. å±€é™æ€§åˆ†æï¼ˆVue 2 çš„ç—›ç‚¹ï¼‰</h3>
<ul>
<li>
<p><strong>æ— æ³•ç›‘å¬æ–°å¢/åˆ é™¤</strong>ï¼šå¿…é¡»é¢„å…ˆå®šä¹‰å¥½å±æ€§ï¼ŒåŠ¨æ€æ·»åŠ çš„å±æ€§ï¼ˆ<code>data.b = 2</code>ï¼‰æ— æ³•å“åº”ã€‚</p>
</li>
<li>
<p><strong>æ•°ç»„æ”¯æŒå·®</strong>ï¼šæ— æ³•æ‹¦æˆªç´¢å¼•ä¿®æ”¹ï¼ˆ<code>arr[0] = x</code>ï¼‰åŠ <code>length</code> å˜æ›´ã€‚</p>
</li>
<li>
<p><strong>æ€§èƒ½å¼€é”€</strong>ï¼šå¿…é¡»é€šè¿‡é€’å½’éå†å¯¹è±¡çš„æ‰€æœ‰å±æ€§è¿›è¡Œæ‹¦æˆªã€‚</p>
</li>
</ul>
<h3 data-id="heading-5">4. ä½¿ç”¨ç¤ºä¾‹ï¼š</h3>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// å°è£…ä¸€ä¸ªåŠ«æŒå¯¹è±¡æ‰€æœ‰å±æ€§çš„å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">observe</span>(<span class="hljs-params">obj</span>) {
  <span class="hljs-comment">// éå†å¯¹è±¡çš„è‡ªæœ‰å±æ€§</span>
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(obj).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">prop</span>) =&gt;</span> {
    <span class="hljs-keyword">let</span> value = obj[prop]; <span class="hljs-comment">// å­˜å‚¨åŸå§‹å€¼</span>
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(obj, prop, {
      <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è¯»å– <span class="hljs-subst">${prop}</span> å±æ€§ï¼š<span class="hljs-subst">${value}</span>`</span>);
        <span class="hljs-keyword">return</span> value;
      },
      <span class="hljs-title function_">set</span>(<span class="hljs-params">newValue</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç»™ <span class="hljs-subst">${prop}</span> èµ‹å€¼ï¼š<span class="hljs-subst">${newValue}</span>`</span>);
        value = newValue;
      },
    });
  });
}

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-keyword">const</span> person = { <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-attr">gender</span>: <span class="hljs-string">"ç”·"</span> };
<span class="hljs-title function_">observe</span>(person);

person.<span class="hljs-property">name</span> = <span class="hljs-string">"æå››"</span>; <span class="hljs-comment">// è¾“å‡ºï¼šç»™ name èµ‹å€¼ï¼šæå››</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(person.<span class="hljs-property">gender</span>); <span class="hljs-comment">// è¾“å‡ºï¼šè¯»å– gender å±æ€§ï¼šç”· â†’ ç”·</span>
</code></pre>
<hr/>
<h2 data-id="heading-6">äºŒã€ ES6 æ—¶ä»£çš„å·…å³°ï¼šProxy</h2>
<p><code>Proxy</code> æ˜¯ES6å¼•å…¥çš„ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„ä»£ç†ï¼Œä»è€Œæ‹¦æˆªå¹¶è‡ªå®šä¹‰è¿™ä¸ªå¯¹è±¡çš„åŸºæœ¬æ“ä½œï¼ˆæ¯”å¦‚å±æ€§è¯»å–ã€èµ‹å€¼ã€åˆ é™¤ã€éå†ç­‰ï¼‰ã€‚å®ƒæ˜¯ Vue 3 å®ç°é«˜æ•ˆå“åº”å¼çš„åŸºçŸ³ã€‚</p>
<h3 data-id="heading-7">1. åŸºæœ¬è¯­æ³•</h3>
<ul>
<li>
<p>è¯­æ³•ï¼š<code>const proxy = new Proxy(target, handler);</code></p>
<ul>
<li>
<p><code>target</code>ï¼šè¦ä»£ç†çš„ç›®æ ‡å¯¹è±¡ï¼ˆå¯ä»¥æ˜¯æ™®é€šå¯¹è±¡ã€æ•°ç»„ã€å‡½æ•°ï¼Œç”šè‡³æ˜¯å¦ä¸€ä¸ª Proxyï¼‰ã€‚</p>
</li>
<li>
<p><code>handler</code>ï¼šä¸€ä¸ªé…ç½®å¯¹è±¡ï¼ŒåŒ…å«å¤šä¸ªé™·é˜±å‡½æ•°ï¼ˆtrapsï¼‰ï¼Œæ¯ä¸ªé™·é˜±å‡½æ•°å¯¹åº”ä¸€ç§å¯¹ç›®æ ‡å¯¹è±¡çš„æ“ä½œï¼ˆæ¯”å¦‚è¯»å–å±æ€§å¯¹åº”<code>get</code>é™·é˜±ï¼Œèµ‹å€¼å¯¹åº”<code>set</code>é™·é˜±ï¼‰</p>
</li>
<li>
<p><code>proxy</code>ï¼šè¿”å›çš„ä»£ç†å¯¹è±¡ï¼Œåç»­æ“ä½œéƒ½é€šè¿‡è¿™ä¸ªä»£ç†å¯¹è±¡è¿›è¡Œï¼Œè€Œéç›´æ¥æ“ä½œåŸå¯¹è±¡ã€‚</p>
</li>
</ul>
</li>
</ul>
<h3 data-id="heading-8">1. å¸¸è§é™·é˜±å‡½æ•° (Traps)</h3>
<p><code>Proxy</code> çš„å¼ºå¤§åœ¨äºå®ƒèƒ½æ‹¦æˆªå¤šç§åº•å±‚æ“ä½œã€‚</p>













































<table><thead><tr><th>Trap</th><th>è§¦å‘æ—¶æœº</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>get(target, prop, receiver)</code></td><td>è¯»å–å±æ€§æ—¶</td><td><code>obj.foo</code></td></tr><tr><td><code>set(target, prop, value, receiver)</code></td><td>è®¾ç½®å±æ€§æ—¶</td><td><code>obj.foo = 'bar'</code></td></tr><tr><td><code>has(target, prop)</code></td><td>ä½¿ç”¨<code>in</code> æ“ä½œç¬¦æ—¶</td><td><code>'foo' in obj</code></td></tr><tr><td><code>deleteProperty(target, prop)</code></td><td>åˆ é™¤å±æ€§æ—¶</td><td><code>delete obj.foo</code></td></tr><tr><td><code>ownKeys(target)</code></td><td>è·å–è‡ªèº«å±æ€§åæ—¶</td><td><code>Object.keys(obj)</code></td></tr><tr><td><code>apply(target, thisArg, args)</code></td><td>è°ƒç”¨å‡½æ•°æ—¶ï¼ˆä»…å½“ target æ˜¯å‡½æ•°ï¼‰</td><td><code>fn()</code></td></tr><tr><td><code>construct(target, args)</code></td><td>ä½¿ç”¨newæ“ä½œç¬¦æ—¶</td><td><code>new Obejct()</code></td></tr></tbody></table>
<h3 data-id="heading-9">2. ä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-JavaScript" lang="JavaScript">    <span class="hljs-comment">// 1. å®šä¹‰åŸå§‹ç”¨æˆ·å¯¹è±¡</span>
    <span class="hljs-keyword">const</span> user = {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>,
      <span class="hljs-attr">age</span>: <span class="hljs-number">20</span>,
    };

    <span class="hljs-comment">// 2. åˆ›å»º Proxy ä»£ç†å¯¹è±¡</span>
    <span class="hljs-keyword">const</span> userProxy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(user, {
      <span class="hljs-comment">// æ‹¦æˆªå±æ€§è¯»å–æ“ä½œï¼ˆæ¯”å¦‚ userProxy.nameï¼‰</span>
      <span class="hljs-title function_">get</span>(<span class="hljs-params">target, prop, receiver</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è¯»å–å±æ€§<span class="hljs-subst">${prop}</span>`</span>);
        <span class="hljs-comment">// æ ¸å¿ƒé€»è¾‘ï¼šå±æ€§ä¸å­˜åœ¨æ—¶è¿”å›é»˜è®¤æç¤º</span>
        <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">has</span>(target, prop)) {
          <span class="hljs-keyword">return</span> <span class="hljs-string">`å±æ€§<span class="hljs-subst">${prop}</span>ä¸å­˜åœ¨`</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, prop, receiver); <span class="hljs-comment">// ç”¨ Reflect ä¿è¯ this æŒ‡å‘æ­£ç¡®</span>
      },

      <span class="hljs-comment">// æ‹¦æˆªå±æ€§èµ‹å€¼æ“ä½œï¼ˆæ¯”å¦‚ userProxy.age = 25ï¼‰</span>
      <span class="hljs-title function_">set</span>(<span class="hljs-params">target, prop, value, receiver</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç»™å±æ€§<span class="hljs-subst">${prop}</span>èµ‹å€¼ï¼š<span class="hljs-subst">${value}</span>`</span>);
        <span class="hljs-comment">// æ ¸å¿ƒé€»è¾‘ï¼šå±æ€§åˆæ³•æ€§æ ¡éªŒ</span>
        <span class="hljs-keyword">switch</span> (prop) {
          <span class="hljs-keyword">case</span> <span class="hljs-string">'age'</span>:
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value !== <span class="hljs-string">'number'</span> || value &lt;= <span class="hljs-number">0</span>) {
              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">' å¹´é¾„å¿…é¡»æ˜¯å¤§äº0çš„æ•°å­—ï¼'</span>);
              <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// è¿”å› false è¡¨ç¤ºèµ‹å€¼å¤±è´¥</span>
            }
            <span class="hljs-keyword">break</span>;
          <span class="hljs-keyword">case</span> <span class="hljs-string">'name'</span>:
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value !== <span class="hljs-string">'string'</span> || value.<span class="hljs-title function_">trim</span>() === <span class="hljs-string">''</span>) {
              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">' å§“åä¸èƒ½ä¸ºç©ºå­—ç¬¦ä¸²ï¼'</span>);
              <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
            <span class="hljs-keyword">break</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, prop, value, receiver); <span class="hljs-comment">// åˆæ³•åˆ™æ‰§è¡Œèµ‹å€¼ï¼Œè¿”å› true è¡¨ç¤ºæˆåŠŸ</span>
      },
    });

    <span class="hljs-comment">// 3. æµ‹è¯•ä»£ç†åŠŸèƒ½</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'===== æµ‹è¯•å±æ€§è¯»å– ====='</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(userProxy.<span class="hljs-property">name</span>); <span class="hljs-comment">// è¯»å–å­˜åœ¨çš„å±æ€§</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(userProxy.<span class="hljs-property">age</span>); <span class="hljs-comment">// è¯»å–å­˜åœ¨çš„å±æ€§</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(userProxy.<span class="hljs-property">gender</span>); <span class="hljs-comment">// è¯»å–ä¸å­˜åœ¨çš„å±æ€§</span>

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'\n===== æµ‹è¯•åˆæ³•èµ‹å€¼ ====='</span>);
    userProxy.<span class="hljs-property">age</span> = <span class="hljs-number">25</span>; <span class="hljs-comment">// åˆæ³•çš„å¹´é¾„èµ‹å€¼</span>
    userProxy.<span class="hljs-property">name</span> = <span class="hljs-string">'æå››'</span>; <span class="hljs-comment">// åˆæ³•çš„å§“åèµ‹å€¼</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'èµ‹å€¼å nameï¼š'</span>, userProxy.<span class="hljs-property">name</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'èµ‹å€¼å ageï¼š'</span>, userProxy.<span class="hljs-property">age</span>);

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'\n===== æµ‹è¯•éæ³•èµ‹å€¼ ====='</span>);
    userProxy.<span class="hljs-property">age</span> = -<span class="hljs-number">5</span>; <span class="hljs-comment">// éæ³•çš„å¹´é¾„ï¼ˆè´Ÿæ•°ï¼‰</span>
    userProxy.<span class="hljs-property">name</span> = <span class="hljs-string">''</span>; <span class="hljs-comment">// éæ³•çš„å§“åï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'éæ³•èµ‹å€¼å ageï¼š'</span>, userProxy.<span class="hljs-property">age</span>); <span class="hljs-comment">// å¹´é¾„ä»ä¸º 25</span>
   
<span class="hljs-comment">// æ‰“å°ç»“æœï¼š  </span>
===== æµ‹è¯•å±æ€§è¯»å– =====
 è¯»å–å±æ€§name
 å¼ ä¸‰
 è¯»å–å±æ€§age
 <span class="hljs-number">20</span>
 è¯»å–å±æ€§gender
 å±æ€§genderä¸å­˜åœ¨
===== æµ‹è¯•åˆæ³•èµ‹å€¼ =====
 ç»™å±æ€§ageèµ‹å€¼ï¼š<span class="hljs-number">25</span>
 ç»™å±æ€§nameèµ‹å€¼ï¼šæå››
 è¯»å–å±æ€§name
 èµ‹å€¼å nameï¼š æå››
 è¯»å–å±æ€§age
 èµ‹å€¼å ageï¼š <span class="hljs-number">25</span>
 <span class="hljs-number">114</span> 
===== æµ‹è¯•éæ³•èµ‹å€¼ =====
 ç»™å±æ€§ageèµ‹å€¼ï¼š-<span class="hljs-number">5</span>
 å¹´é¾„å¿…é¡»æ˜¯å¤§äº<span class="hljs-number">0</span>çš„æ•°å­—ï¼
 ç»™å±æ€§nameèµ‹å€¼ï¼š
 å§“åä¸èƒ½ä¸ºç©ºå­—ç¬¦ä¸²ï¼
 è¯»å–å±æ€§age
 éæ³•èµ‹å€¼å ageï¼š <span class="hljs-number">25</span>


</code></pre>
<hr/>
<h2 data-id="heading-10">ä¸‰ã€ Reflectï¼šProxy çš„æœ€ä½³æ‹æ¡£</h2>
<p><code>Reflect</code> æ˜¯ ES6 å¼•å…¥çš„å†…ç½®å…¨å±€å¯¹è±¡ï¼Œä¸èƒ½é€šè¿‡ new å®ä¾‹åŒ–ï¼ˆä¸æ˜¯æ„é€ å‡½æ•°ï¼‰ã€‚å®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯æŠŠåŸæœ¬å±äº Object å¯¹è±¡çš„åº•å±‚æ“ä½œï¼ˆæ¯”å¦‚å±æ€§èµ‹å€¼ã€åˆ é™¤ï¼‰æç‚¼æˆç‹¬ç«‹çš„å‡½æ•°æ–¹æ³•ï¼ŒåŒæ—¶èƒ½ä¿è¯æ“ä½œçš„ â€œæ­£ç¡®æ€§â€â€”â€” æ¯”å¦‚è½¬å‘æ“ä½œæ—¶ä¿ç•™æ­£ç¡®çš„ this æŒ‡å‘ã€‚</p>
<h3 data-id="heading-11">1. ä¸ºä»€ä¹ˆä¸€å®šè¦é…åˆ Reflectï¼Ÿ</h3>
<p><strong>æ ¸å¿ƒåŸå› ï¼šå¤„ç† <code>this</code> æŒ‡å‘é—®é¢˜ã€‚</strong></p>
<p>å½“å¯¹è±¡å†…éƒ¨å­˜åœ¨ <code>getter</code> å¹¶ä¾èµ– <code>this</code> æ—¶ï¼Œå¦‚æœç›´æ¥ä½¿ç”¨ <code>target[prop]</code>ï¼Œ<code>this</code> å°†æŒ‡å‘åŸå§‹å¯¹è±¡è€Œéä»£ç†å¯¹è±¡ï¼Œå¯¼è‡´åç»­çš„å±æ€§è¯»å–æ— æ³•è¢« Proxy æ‹¦æˆªã€‚</p>
<h3 data-id="heading-12">2. Reflectä½¿ç”¨å¯¹æ¯”</h3>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> person = {
      <span class="hljs-attr">_name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>,
      <span class="hljs-keyword">get</span> <span class="hljs-title function_">name</span>() {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'getter è¢«è°ƒç”¨ï¼Œthis:'</span>, <span class="hljs-variable language_">this</span> === person ? <span class="hljs-string">'person'</span> : <span class="hljs-variable language_">this</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_name</span>;
      },

      <span class="hljs-title function_">introduce</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'this'</span>, <span class="hljs-variable language_">this</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-string">`æˆ‘å«<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>;
      },
    };

    <span class="hljs-comment">// é”™è¯¯ä»£ç†</span>
    <span class="hljs-keyword">const</span> badProxy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(person, {
      <span class="hljs-title function_">get</span>(<span class="hljs-params">target, prop, receiver</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ‹¦æˆª: <span class="hljs-subst">${prop}</span>`</span>);
        <span class="hljs-keyword">if</span> (prop === <span class="hljs-string">'introduce'</span>) {
          <span class="hljs-keyword">const</span> original = target[prop]; <span class="hljs-comment">// é”™è¯¯ï¼šç›´æ¥è·å–</span>
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
            <span class="hljs-keyword">return</span> <span class="hljs-title function_">original</span>(); <span class="hljs-comment">// this æŒ‡å‘ badProxy</span>
          };
        }
        <span class="hljs-keyword">return</span> target[prop];
      },
    });

    <span class="hljs-comment">// æ­£ç¡®ä»£ç†</span>
    <span class="hljs-keyword">const</span> goodProxy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(person, {
      <span class="hljs-title function_">get</span>(<span class="hljs-params">target, prop, receiver</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ‹¦æˆª: <span class="hljs-subst">${prop}</span>`</span>);
        <span class="hljs-keyword">if</span> (prop === <span class="hljs-string">'introduce'</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">apply</span>(target[prop], receiver, <span class="hljs-variable language_">arguments</span>); <span class="hljs-comment">// æ­£ç¡®</span>
          };
        }
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, prop, receiver);
      },
    });

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'=== æµ‹è¯•é”™è¯¯ä»£ç† ==='</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(badProxy.<span class="hljs-title function_">introduce</span>());

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'\n=== æµ‹è¯•æ­£ç¡®ä»£ç† ==='</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(goodProxy.<span class="hljs-title function_">introduce</span>()
</code></pre>
<h3 data-id="heading-13">3. æ‰“å°ç»“æœåˆ†æ</h3>
<ol>
<li>
<p>é¦–å…ˆæ‰§è¡Œ<code>console.log(badProxy.introduce())</code></p>
<ul>
<li>å®ƒä¼šè¯»å–<code>badProxy.introduce</code>å±æ€§ï¼Œè§¦å‘<code>badProxy</code>çš„<code>get</code> é™·é˜±ï¼Œå‚æ•°<code>target = person</code>ï¼Œ<code>prop = 'introduce'</code>ï¼Œ<code>receiver = badProxy</code></li>
</ul>
</li>
<li>
<p>æ¥ç€è¿›å…¥<code>badProxy</code>çš„<code>get</code>é™·é˜±å‡½æ•°ï¼Œæ­¤æ—¶è¿”å›çš„æ–°å‡½æ•°è¢«èµ‹å€¼ç»™<code>badProxy.introduce</code>ï¼Œç„¶åæ‰§è¡Œè¿™ä¸ªæ–°å‡½æ•°ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ‹¦æˆª: <span class="hljs-subst">${prop}</span>`</span>);  <span class="hljs-comment">// è¾“å‡ºï¼šæ‹¦æˆª: introduce</span>
<span class="hljs-keyword">if</span> (prop === <span class="hljs-string">'introduce'</span>) {
  <span class="hljs-keyword">const</span> original = target[prop]; <span class="hljs-comment">// æ‹¿åˆ° person.introduce å‡½æ•°</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) { <span class="hljs-comment">// è¿”å›ä¸€ä¸ªæ–°å‡½æ•°</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">original</span>(); <span class="hljs-comment">// å…³é”®é”™è¯¯ï¼šè£¸è°ƒç”¨ original</span>
  };
}
</code></pre>
</li>
<li>
<p>æ‰§è¡Œè¿”å›çš„æ–°å‡½æ•°<code>original()</code>ï¼ˆå³<code>person.introduce()</code>ï¼‰</p>
<ul>
<li><code>original</code>æ˜¯è£¸è°ƒç”¨ï¼ˆæ²¡æœ‰å¯¹è±¡å‰ç¼€ï¼‰ï¼Œæ‰€ä»¥<code>introduce</code>æ–¹æ³•é‡Œçš„<code>this</code>æŒ‡å‘<code>window</code>ï¼ˆéä¸¥æ ¼æ¨¡å¼ï¼‰ï¼›</li>
<li>è¾“å‡ºï¼š<code>this window</code>ï¼›</li>
<li>æ‰§è¡Œ<code>this.name</code>â†’<code>window.name</code>ï¼Œä¸ä¼šè§¦å‘<code>person</code>çš„<code>name</code>getterï¼ˆå› ä¸º<code>this</code>ä¸æ˜¯<code>person</code>/<code>badProxy</code>ï¼‰ï¼Œæ‰€ä»¥<code>window._name</code>ä¸å­˜åœ¨ï¼Œè¿”å›<code>undefined</code>ï¼›</li>
<li>æœ€ç»ˆè¿”å›<code>æˆ‘å«undefined</code>ï¼Œæ§åˆ¶å°è¾“å‡ºï¼š<code>æˆ‘å«</code>ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d53d0c800844058b36ddf7ff9a630a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-R546w5LiA5Y-q5aSn5ZGG55Oc:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770714393&amp;x-signature=Xe618lpspDXZX8vA3IeQ5ECwTCU%3D" alt="" loading="lazy"/></p>
</li>
<li>
<p>æ‰§è¡Œ<code>console.log(goodProxy.introduce())</code></p>
<ul>
<li>å®ƒä¼šè¯»å–<code>goodProxy.introduce</code>å±æ€§ï¼Œè§¦å‘<code>goodProxy</code>çš„<code>get</code> é™·é˜±ï¼Œå‚æ•°ï¼š</li>
<li><code>target = person</code>ï¼Œ<code>prop = 'introduce'</code>ï¼Œ<code>receiver = goodProxy</code>ã€‚</li>
</ul>
</li>
<li>
<p>ç¬¬ä¸€æ¬¡è§¦å‘<code>get</code>é™·é˜±ï¼ˆæ‹¦æˆª<code>introduce</code>ï¼‰ï¼Œæ­¤æ—¶è¿”å›çš„æ–°å‡½æ•°è¢«èµ‹å€¼ç»™<code>goodProxy.introduce</code>ï¼Œç„¶åæ‰§è¡Œè¿™ä¸ªæ–°å‡½æ•°</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ‹¦æˆª: <span class="hljs-subst">${prop}</span>`</span>); <span class="hljs-comment">// è¾“å‡ºï¼šæ‹¦æˆª: introduce â†’ ç¬¬ä¸€æ¬¡æ‹¦æˆª</span>
<span class="hljs-keyword">if</span> (prop === <span class="hljs-string">'introduce'</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) { <span class="hljs-comment">// è¿”å›ä¸€ä¸ªæ–°å‡½æ•°</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">apply</span>(target[prop], receiver, <span class="hljs-variable language_">arguments</span>); <span class="hljs-comment">// æ­£ç¡®ç»‘å®š this</span>
  };
}
</code></pre>
</li>
<li>
<p>æ‰§è¡Œè¿”å›çš„æ–°å‡½æ•°ï¼Œ<code>Reflect.apply(target[prop], receiver, arguments)</code>ï¼Œå…¶ä¸­</p>
<ul>
<li><code>target[prop]</code>=<code>person.introduce</code> å‡½æ•°ï¼›</li>
<li><code>receiver</code>=<code>goodProxy</code>ï¼ˆæŠŠ<code>introduce</code>æ–¹æ³•çš„<code>this</code>ç»‘å®šåˆ°<code>goodProxy</code>ï¼‰ï¼›</li>
<li>æ‰§è¡Œ<code>person.introduce</code>æ–¹æ³•ï¼Œæ­¤æ—¶æ–¹æ³•å†…çš„<code>this = goodProxy</code>ã€‚</li>
</ul>
</li>
<li>
<p>æ‰§è¡Œ introduce æ–¹æ³•å†…éƒ¨ä»£ç </p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'this'</span>, <span class="hljs-variable language_">this</span>); <span class="hljs-comment">// è¾“å‡ºï¼šthis Proxy(Object) { _name: 'å¼ ä¸‰' }ï¼ˆå³ goodProxyï¼‰</span>
<span class="hljs-keyword">return</span> <span class="hljs-string">`æˆ‘å«<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>; <span class="hljs-comment">// å…³é”®ï¼šè¯»å– this.name â†’ goodProxy.name</span>
</code></pre>
</li>
<li>
<p>ç¬¬äºŒæ¬¡è§¦å‘<code>get</code>é™·é˜±ï¼ˆæ‹¦æˆª<code>name</code>ï¼‰ï¼Œå› ä¸º<code>this = goodProxy</code>ï¼Œæ‰€ä»¥<code>this.name</code>ç­‰ä»·äº<code>goodProxy.name</code>ï¼Œéœ€è¦è¯»å–<code>goodProxy.name</code>å±æ€§ï¼Œ<strong>å†æ¬¡è§¦å‘</strong><code>goodProxy</code>çš„<code>get</code> é™·é˜±ï¼Œå‚æ•°ï¼š</p>
<ul>
<li><code>target = person</code>ï¼Œ<code>prop = 'name'</code>ï¼Œ<code>receiver = goodProxy</code></li>
<li>è¿›å…¥geté™·è¿›å‡½æ•°</li>
</ul>
</li>
</ol>

<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ‹¦æˆª: <span class="hljs-subst">${prop}</span>`</span>); <span class="hljs-comment">// è¾“å‡ºï¼šæ‹¦æˆª: name â†’ ç¬¬äºŒæ¬¡æ‹¦æˆª</span>
<span class="hljs-keyword">if</span> (prop === <span class="hljs-string">'introduce'</span>) { <span class="hljs-comment">/* ä¸æ‰§è¡Œ */</span> }
<span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, prop, receiver); <span class="hljs-comment">// è°ƒç”¨ Reflect.get è¯»å– person.name</span>
</code></pre>
<p>9.  è°ƒç”¨<code>Reflect.get(target, prop, receiver)</code>ï¼Œè§¦å‘<code>person.name</code>çš„ getterï¼Œæ­¤æ—¶ getter é‡Œçš„<code>this</code>è¢«<code>receiver</code>ç»‘å®šä¸º<code>goodProxy</code></p>

<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">get</span> name() {
  console.log(<span class="hljs-string">'getter è¢«è°ƒç”¨ï¼Œthis:'</span>, <span class="hljs-keyword">this</span> === person ? <span class="hljs-string">'person'</span> : <span class="hljs-keyword">this</span>); 
  <span class="hljs-comment">// è¾“å‡ºï¼šgetter è¢«è°ƒç”¨ï¼Œthis: Proxy(Object) { _name: 'å¼ ä¸‰' }</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._name; <span class="hljs-comment">// this = goodProxy â†’ è¯»å– goodProxy._name</span>
}
</code></pre>
<p>10. è¿”å›this._nameï¼ˆä¸æ˜¯nameï¼ï¼‰ï¼Œè¿™æ—¶ä¼šç¬¬ä¸‰æ¬¡è§¦å‘goodProxyçš„<code>get</code>é™·é˜±ï¼ˆ<code>prop = '_name'</code>ï¼‰</p>

<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ‹¦æˆª: <span class="hljs-subst">${prop}</span>`</span>); <span class="hljs-comment">// è¾“å‡ºï¼šæ‹¦æˆª: _name</span>
<span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, <span class="hljs-string">'_name'</span>, receiver); <span class="hljs-comment">// è¿”å› person._name = 'å¼ ä¸‰'</span>
</code></pre>
<p>11. æœ€ç»ˆè¿”å›ç»“æœ æˆ‘å«å¼ ä¸‰</p>
<pre><code class="hljs language-bash" lang="bash">![](https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb44628ee3904c759428efdadbba9e90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-R546w5LiA5Y-q5aSn5ZGG55Oc:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770714393&amp;x-signature=VN5mF0OKtlLwwfknHvfBPYIqpVE%3D)
</code></pre>
<hr/>
<h2 data-id="heading-14">å››ã€ æ€»ç»“ï¼šProxy çš„é™ç»´æ‰“å‡»</h2>
<ol>
<li><strong>å…¨æ–¹ä½æ‹¦æˆª</strong>ï¼šä¸ä»…èƒ½æ‹¦æˆªè¯»å†™ï¼Œè¿˜èƒ½æ‹¦æˆªåˆ é™¤ã€å‡½æ•°è°ƒç”¨ã€<code>new</code> æ“ä½œç­‰ã€‚</li>
<li><strong>æ€§èƒ½ä¼˜åŠ¿</strong>ï¼šæ— éœ€éå†å±æ€§ï¼Œç›´æ¥ä»£ç†æ•´ä¸ªå¯¹è±¡ã€‚</li>
<li><strong>åŸç”Ÿæ”¯æŒæ•°ç»„</strong>ï¼šå®Œç¾è§£å†³ Vue 2 ä¸­æ•°ç»„ç›‘å¬çš„å„ç§å¥‡æŠ€æ·«å·§ï¼ˆå¦‚é‡å†™æ•°ç»„åŸå‹æ–¹æ³•ï¼‰ã€‚</li>
<li><strong>é…åˆ Reflect</strong>ï¼šé€šè¿‡ <code>receiver</code> å‚æ•°å®Œç¾è½¬å‘ <code>this</code> ç»‘å®šï¼Œä¿è¯äº†å“åº”å¼ç³»ç»Ÿçš„ä¸¥å¯†æ€§ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java è¯­è¨€åŸºç¡€]]></title>    <link>https://juejin.cn/post/7602634187284103178</link>    <guid>https://juejin.cn/post/7602634187284103178</guid>    <pubDate>2026-02-04T09:47:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602634187284103178" data-draft-id="7602634187284086794" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java è¯­è¨€åŸºç¡€"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-02-04T09:47:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ¢é™©å®¶"/> <meta itemprop="url" content="https://juejin.cn/user/1882777597248728"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java è¯­è¨€åŸºç¡€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1882777597248728/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ¢é™©å®¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T09:47:20.000Z" title="Wed Feb 04 2026 09:47:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»26åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ğŸ“Š <strong>éš¾åº¦</strong>ï¼šåŸºç¡€ | <strong>é‡è¦ç¨‹åº¦</strong>ï¼šæ ¸å¿ƒå¿…å­¦</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">å˜é‡</h2>
<p>ä½ å·²ç»å­¦è¿‡å¯¹è±¡å°†çŠ¶æ€å­˜å‚¨åœ¨**å­—æ®µï¼ˆFieldï¼‰**ä¸­ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">int</span> <span class="hljs-variable">cadence</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
<span class="hljs-type">int</span> <span class="hljs-variable">speed</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
<span class="hljs-type">int</span> <span class="hljs-variable">gear</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
</code></pre>
<p>åœ¨ã€Œä»€ä¹ˆæ˜¯å¯¹è±¡ï¼Ÿã€ç« èŠ‚ä¸­ä»‹ç»äº†å­—æ®µï¼Œä½†ä½ å¯èƒ½è¿˜æœ‰ä¸€äº›ç–‘é—®ï¼šå­—æ®µå‘½åæœ‰å“ªäº›è§„åˆ™å’Œçº¦å®šï¼Ÿé™¤äº† <code>int</code>ï¼Œè¿˜æœ‰å“ªäº›æ•°æ®ç±»å‹ï¼Ÿå­—æ®µå£°æ˜æ—¶å¿…é¡»åˆå§‹åŒ–å—ï¼Ÿå¦‚æœæ²¡æœ‰æ˜¾å¼åˆå§‹åŒ–ï¼Œå­—æ®µä¼šè¢«èµ‹é»˜è®¤å€¼å—ï¼Ÿ</p>
<p>åœ¨æ¢ç´¢è¿™äº›é—®é¢˜ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆäº†è§£ä¸€äº›æŠ€æœ¯ä¸Šçš„åŒºåˆ«ã€‚åœ¨ Java ä¸­ï¼Œ"å­—æ®µ"å’Œ"å˜é‡"è¿™ä¸¤ä¸ªæœ¯è¯­éƒ½ä¼šç”¨åˆ°ï¼Œè¿™å¸¸å¸¸è®©æ–°æ‰‹æ„Ÿåˆ°å›°æƒ‘ï¼Œå› ä¸ºå®ƒä»¬ä¼¼ä¹æŒ‡çš„æ˜¯åŒä¸€ä¸ªä¸œè¥¿ã€‚</p>
<p>Java å®šä¹‰äº†ä»¥ä¸‹å‡ ç§å˜é‡ï¼š</p>
<h3 data-id="heading-1">å®ä¾‹å˜é‡ï¼ˆéé™æ€å­—æ®µï¼‰</h3>
<p>ä»æŠ€æœ¯è§’åº¦è®²ï¼Œå¯¹è±¡å°†å„è‡ªçš„çŠ¶æ€å­˜å‚¨åœ¨"éé™æ€å­—æ®µ"ä¸­ï¼Œå³ä¸å¸¦ <code>static</code> å…³é”®å­—å£°æ˜çš„å­—æ®µã€‚éé™æ€å­—æ®µä¹Ÿç§°ä¸º<strong>å®ä¾‹å˜é‡ï¼ˆInstance Variableï¼‰</strong>ï¼Œå› ä¸ºå®ƒä»¬çš„å€¼å¯¹äºç±»çš„æ¯ä¸ªå®ä¾‹ï¼ˆå³æ¯ä¸ªå¯¹è±¡ï¼‰éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚ä¸€è¾†è‡ªè¡Œè½¦çš„ <code>currentSpeed</code> ä¸å¦ä¸€è¾†è‡ªè¡Œè½¦çš„ <code>currentSpeed</code> æ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‚</p>
<p>ğŸ’¡ <strong>é€šä¿—ç†è§£</strong>ï¼šå®ä¾‹å˜é‡å°±åƒæ¯ä¸ªäººçš„èº«ä»½è¯å·ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ä¸€ä»½ï¼Œäº’ä¸å½±å“ã€‚</p>
<h3 data-id="heading-2">ç±»å˜é‡ï¼ˆé™æ€å­—æ®µï¼‰</h3>
<p>**ç±»å˜é‡ï¼ˆClass Variableï¼‰**æ˜¯ç”¨ <code>static</code> ä¿®é¥°ç¬¦å£°æ˜çš„å­—æ®µã€‚è¿™å‘Šè¯‰ç¼–è¯‘å™¨ï¼šæ— è®ºè¿™ä¸ªç±»è¢«å®ä¾‹åŒ–å¤šå°‘æ¬¡ï¼Œè¿™ä¸ªå˜é‡åªå­˜åœ¨ä¸€ä»½ã€‚ä¾‹å¦‚ï¼Œå®šä¹‰æŸç§è‡ªè¡Œè½¦é½¿è½®æ•°é‡çš„å­—æ®µå¯ä»¥æ ‡è®°ä¸º <code>static</code>ï¼Œå› ä¸ºæ‰€æœ‰å®ä¾‹æ¦‚å¿µä¸Šéƒ½ä½¿ç”¨ç›¸åŒçš„é½¿è½®æ•°ã€‚ä»£ç  <code>static int numGears = 6;</code> å°±åˆ›å»ºäº†è¿™æ ·ä¸€ä¸ªé™æ€å­—æ®µã€‚æ­¤å¤–ï¼Œè¿˜å¯ä»¥æ·»åŠ  <code>final</code> å…³é”®å­—è¡¨ç¤ºé½¿è½®æ•°æ°¸è¿œä¸ä¼šæ”¹å˜ã€‚</p>
<p>ğŸ’¡ <strong>é€šä¿—ç†è§£</strong>ï¼šç±»å˜é‡å°±åƒç­çº§çš„ç­ç‰Œï¼Œå…¨ç­åŒå­¦å…±ç”¨ä¸€ä¸ªï¼Œä¸ç®¡æ¥äº†å¤šå°‘å­¦ç”Ÿï¼Œç­ç‰Œåªæœ‰ä¸€å—ã€‚</p>
<h3 data-id="heading-3">å±€éƒ¨å˜é‡</h3>
<p>ç±»ä¼¼äºå¯¹è±¡åœ¨å­—æ®µä¸­å­˜å‚¨çŠ¶æ€ï¼Œæ–¹æ³•é€šå¸¸åœ¨<strong>å±€éƒ¨å˜é‡ï¼ˆLocal Variableï¼‰<strong>ä¸­å­˜å‚¨ä¸´æ—¶çŠ¶æ€ã€‚å£°æ˜å±€éƒ¨å˜é‡çš„è¯­æ³•ä¸å£°æ˜å­—æ®µç±»ä¼¼ï¼ˆä¾‹å¦‚ <code>int count = 0;</code>ï¼‰ã€‚æ²¡æœ‰ç‰¹æ®Šå…³é”®å­—å°†å˜é‡æŒ‡å®šä¸ºå±€éƒ¨å˜é‡ï¼Œè¿™å®Œå…¨å–å†³äºå˜é‡å£°æ˜çš„</strong>ä½ç½®</strong>â€”â€”åœ¨æ–¹æ³•çš„å¼€æ‹¬å·å’Œé—­æ‹¬å·ä¹‹é—´ã€‚å› æ­¤ï¼Œå±€éƒ¨å˜é‡åªå¯¹å£°æ˜å®ƒä»¬çš„æ–¹æ³•å¯è§ï¼Œç±»çš„å…¶ä»–éƒ¨åˆ†æ— æ³•è®¿é—®ã€‚</p>
<h3 data-id="heading-4">å‚æ•°</h3>
<p>ä½ å·²ç»è§è¿‡å‚æ•°çš„ä¾‹å­ï¼ŒåŒ…æ‹¬ <code>Bicycle</code> ç±»å’Œ"Hello World!"ç¨‹åºçš„ <code>main</code> æ–¹æ³•ã€‚å›æƒ³ä¸€ä¸‹ <code>main</code> æ–¹æ³•çš„ç­¾åï¼š<code>public static void main(String[] args)</code>ã€‚è¿™é‡Œçš„ <code>args</code> å˜é‡å°±æ˜¯è¿™ä¸ªæ–¹æ³•çš„å‚æ•°ã€‚é‡è¦çš„æ˜¯ï¼Œå‚æ•°å§‹ç»ˆè¢«å½’ç±»ä¸º"å˜é‡"è€Œé"å­—æ®µ"ã€‚è¿™åŒæ ·é€‚ç”¨äºå…¶ä»–æ¥å—å‚æ•°çš„ç»“æ„ï¼ˆå¦‚æ„é€ å‡½æ•°å’Œå¼‚å¸¸å¤„ç†å™¨ï¼‰ï¼Œä½ å°†åœ¨åé¢çš„æ•™ç¨‹ä¸­å­¦åˆ°ã€‚</p>
<p>âš–ï¸ <strong>å¯¹æ¯”å­¦ä¹ ï¼šå››ç§å˜é‡ç±»å‹</strong></p>








































<table><thead><tr><th>ç±»å‹</th><th>å£°æ˜ä½ç½®</th><th>ä½œç”¨åŸŸ</th><th>ç”Ÿå‘½å‘¨æœŸ</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td>å®ä¾‹å˜é‡</td><td>ç±»ä¸­ï¼Œæ–¹æ³•å¤–</td><td>æ•´ä¸ªç±»</td><td>éšå¯¹è±¡åˆ›å»º/é”€æ¯</td><td>æœ‰</td></tr><tr><td>ç±»å˜é‡ï¼ˆé™æ€ï¼‰</td><td>ç±»ä¸­ï¼Œå¸¦ <code>static</code></td><td>æ•´ä¸ªç±»</td><td>éšç±»åŠ è½½/å¸è½½</td><td>æœ‰</td></tr><tr><td>å±€éƒ¨å˜é‡</td><td>æ–¹æ³•å†…</td><td>æ–¹æ³•å†…</td><td>æ–¹æ³•æ‰§è¡ŒæœŸé—´</td><td><strong>æ— </strong></td></tr><tr><td>å‚æ•°</td><td>æ–¹æ³•ç­¾åä¸­</td><td>æ–¹æ³•å†…</td><td>æ–¹æ³•æ‰§è¡ŒæœŸé—´</td><td><strong>æ— </strong></td></tr></tbody></table>
<blockquote>
<p>ğŸ“Œ <strong>è¡¥å……è¯´æ˜</strong>ï¼šä½ å¯èƒ½è¿˜ä¼šçœ‹åˆ°"æˆå‘˜ï¼ˆMemberï¼‰"è¿™ä¸ªæœ¯è¯­ã€‚ä¸€ä¸ªç±»å‹çš„å­—æ®µã€æ–¹æ³•å’ŒåµŒå¥—ç±»å‹ç»Ÿç§°ä¸ºå…¶<strong>æˆå‘˜</strong>ã€‚</p>
</blockquote>
<h3 data-id="heading-5">å‘½åè§„åˆ™</h3>
<p>æ¯ç§ç¼–ç¨‹è¯­è¨€éƒ½æœ‰è‡ªå·±çš„å‘½åè§„åˆ™å’Œçº¦å®šï¼ŒJava ä¹Ÿä¸ä¾‹å¤–ã€‚å˜é‡å‘½åè§„åˆ™å’Œçº¦å®šå¦‚ä¸‹ï¼š</p>
<p><strong>è§„åˆ™ï¼ˆå¿…é¡»éµå®ˆï¼‰</strong>ï¼š</p>
<ul>
<li>å˜é‡å<strong>åŒºåˆ†å¤§å°å†™</strong></li>
<li>å˜é‡åå¯ä»¥æ˜¯ä»»æ„åˆæ³•æ ‡è¯†ç¬¦â€”â€”ç”± Unicode å­—æ¯å’Œæ•°å­—ç»„æˆçš„æ— é™é•¿åº¦åºåˆ—ï¼Œä»¥å­—æ¯ã€ç¾å…ƒç¬¦å· <code>$</code> æˆ–ä¸‹åˆ’çº¿ <code>_</code> å¼€å¤´</li>
<li>ä¸å…è®¸æœ‰ç©ºæ ¼</li>
<li>ä¸èƒ½æ˜¯å…³é”®å­—æˆ–ä¿ç•™å­—</li>
</ul>
<p><strong>çº¦å®šï¼ˆå»ºè®®éµå®ˆï¼‰</strong>ï¼š</p>
<ul>
<li>å§‹ç»ˆä»¥å­—æ¯å¼€å¤´ï¼Œè€Œé <code>$</code> æˆ– <code>_</code></li>
<li>é¿å…ä½¿ç”¨ç¾å…ƒç¬¦å· <code>$</code>ï¼ˆè‡ªåŠ¨ç”Ÿæˆçš„åç§°å¯èƒ½åŒ…å«å®ƒï¼‰</li>
<li>ä¸é¼“åŠ±ä»¥ä¸‹åˆ’çº¿ <code>_</code> å¼€å¤´</li>
<li>ä½¿ç”¨å®Œæ•´å•è¯è€Œéç¼©å†™ï¼ˆ<code>cadence</code>ã€<code>speed</code>ã€<code>gear</code> æ¯” <code>c</code>ã€<code>s</code>ã€<code>g</code> æ›´ç›´è§‚ï¼‰</li>
<li>å•ä¸ªå•è¯å…¨å°å†™ï¼š<code>speed</code></li>
<li>å¤šä¸ªå•è¯é‡‡ç”¨é©¼å³°å‘½åï¼š<code>gearRatio</code>ã€<code>currentGear</code></li>
<li>å¸¸é‡å…¨å¤§å†™ï¼Œå•è¯é—´ç”¨ä¸‹åˆ’çº¿ï¼š<code>static final int NUM_GEARS = 6</code></li>
</ul>
<p>âŒ <strong>å¸¸è§é”™è¯¯</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// âŒ é”™è¯¯ç¤ºä¾‹</span>
<span class="hljs-type">int</span> 2count = <span class="hljs-number">0</span>;      <span class="hljs-comment">// ä¸èƒ½ä»¥æ•°å­—å¼€å¤´</span>
<span class="hljs-type">int</span> my-<span class="hljs-keyword">var</span> = <span class="hljs-number">0</span>;      <span class="hljs-comment">// ä¸èƒ½åŒ…å«è¿å­—ç¬¦</span>
<span class="hljs-type">int</span> <span class="hljs-variable">class</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;       <span class="hljs-comment">// ä¸èƒ½ä½¿ç”¨å…³é”®å­—</span>

<span class="hljs-comment">// âœ… æ­£ç¡®ç¤ºä¾‹</span>
<span class="hljs-type">int</span> <span class="hljs-variable">count2</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
<span class="hljs-type">int</span> <span class="hljs-variable">myVar</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
<span class="hljs-type">int</span> <span class="hljs-variable">myClass</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
</code></pre>
<hr/>
<h2 data-id="heading-6">åŸºæœ¬æ•°æ®ç±»å‹</h2>
<p>Java æ˜¯<strong>é™æ€ç±»å‹è¯­è¨€</strong>ï¼Œè¿™æ„å‘³ç€æ‰€æœ‰å˜é‡åœ¨ä½¿ç”¨å‰å¿…é¡»å…ˆå£°æ˜ã€‚å£°æ˜éœ€è¦æŒ‡å®šå˜é‡çš„ç±»å‹å’Œåç§°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">int</span> <span class="hljs-variable">gear</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
</code></pre>
<p>è¿™å‘Šè¯‰ç¨‹åºå­˜åœ¨ä¸€ä¸ªåä¸º <code>gear</code> çš„å­—æ®µï¼Œä¿å­˜æ•°å€¼æ•°æ®ï¼Œåˆå§‹å€¼ä¸º 1ã€‚å˜é‡çš„æ•°æ®ç±»å‹å†³å®šäº†å®ƒå¯ä»¥åŒ…å«çš„å€¼ä»¥åŠå¯ä»¥å¯¹å®ƒæ‰§è¡Œçš„æ“ä½œã€‚</p>
<p>é™¤äº† <code>int</code>ï¼ŒJava è¿˜æ”¯æŒå…¶ä»–ä¸ƒç§<strong>åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆPrimitive Data Typeï¼‰</strong>ã€‚åŸºæœ¬ç±»å‹æ˜¯è¯­è¨€é¢„å®šä¹‰çš„ï¼Œç”¨ä¿ç•™å…³é”®å­—å‘½åã€‚åŸºæœ¬ç±»å‹çš„å€¼ä¸ä¸å…¶ä»–åŸºæœ¬ç±»å‹çš„å€¼å…±äº«çŠ¶æ€ã€‚</p>
<h3 data-id="heading-7">å…«ç§åŸºæœ¬æ•°æ®ç±»å‹</h3>




































































<table><thead><tr><th>ç±»å‹</th><th>ä½æ•°</th><th>èŒƒå›´</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>byte</code></td><td>8ä½</td><td>-128 ~ 127</td><td>0</td><td>èŠ‚çœå†…å­˜ï¼Œç”¨äºå¤§æ•°ç»„</td></tr><tr><td><code>short</code></td><td>16ä½</td><td>-32,768 ~ 32,767</td><td>0</td><td>èŠ‚çœå†…å­˜ï¼Œç”¨äºå¤§æ•°ç»„</td></tr><tr><td><code>int</code></td><td>32ä½</td><td>-2Â³Â¹ ~ 2Â³Â¹-1</td><td>0</td><td>æœ€å¸¸ç”¨çš„æ•´æ•°ç±»å‹</td></tr><tr><td><code>long</code></td><td>64ä½</td><td>-2â¶Â³ ~ 2â¶Â³-1</td><td>0L</td><td>éœ€è¦æ¯” int æ›´å¤§èŒƒå›´æ—¶ä½¿ç”¨</td></tr><tr><td><code>float</code></td><td>32ä½</td><td>IEEE 754</td><td>0.0f</td><td>èŠ‚çœå†…å­˜ï¼Œ<strong>ä¸ç”¨äºç²¾ç¡®å€¼</strong></td></tr><tr><td><code>double</code></td><td>64ä½</td><td>IEEE 754</td><td>0.0d</td><td>å°æ•°çš„é»˜è®¤é€‰æ‹©ï¼Œ<strong>ä¸ç”¨äºç²¾ç¡®å€¼</strong></td></tr><tr><td><code>boolean</code></td><td>-</td><td>true / false</td><td>false</td><td>ç®€å•çš„çœŸ/å‡æ ‡å¿—</td></tr><tr><td><code>char</code></td><td>16ä½</td><td>'\u0000' ~ '\uffff'</td><td>'\u0000'</td><td>å•ä¸ª Unicode å­—ç¬¦</td></tr></tbody></table>
<blockquote>
<p>ğŸ“Œ <strong>è¡¥å……è¯´æ˜</strong>ï¼šJava SE 8 åŠæ›´é«˜ç‰ˆæœ¬æ”¯æŒå°† <code>int</code> å’Œ <code>long</code> ç”¨ä½œæ— ç¬¦å·æ•´æ•°ã€‚<code>Integer</code> ç±»æ–°å¢äº† <code>compareUnsigned</code>ã€<code>divideUnsigned</code> ç­‰æ–¹æ³•æ”¯æŒæ— ç¬¦å·è¿ç®—ã€‚</p>
</blockquote>
<p>âš ï¸ <strong>æ³¨æ„</strong>ï¼š<code>float</code> å’Œ <code>double</code> <strong>ä¸èƒ½ç”¨äºç²¾ç¡®å€¼è®¡ç®—</strong>ï¼ˆå¦‚è´§å¸ï¼‰ã€‚éœ€è¦ç²¾ç¡®è®¡ç®—æ—¶ï¼Œè¯·ä½¿ç”¨ <code>java.math.BigDecimal</code> ç±»ã€‚</p>
<h3 data-id="heading-8">String ç±»å‹</h3>
<p>é™¤äº†å…«ç§åŸºæœ¬ç±»å‹ï¼ŒJava è¿˜é€šè¿‡ <code>java.lang.String</code> ç±»æä¾›å¯¹å­—ç¬¦ä¸²çš„ç‰¹æ®Šæ”¯æŒã€‚ç”¨åŒå¼•å·åŒ…å›´å­—ç¬¦ä¸²ä¼šè‡ªåŠ¨åˆ›å»º <code>String</code> å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-string">"this is a string"</span>;
</code></pre>
<p><code>String</code> å¯¹è±¡æ˜¯<strong>ä¸å¯å˜çš„ï¼ˆImmutableï¼‰</strong>ï¼Œä¸€æ—¦åˆ›å»ºï¼Œå…¶å€¼å°±ä¸èƒ½æ”¹å˜ã€‚è™½ç„¶ <code>String</code> ä¸¥æ ¼æ¥è¯´ä¸æ˜¯åŸºæœ¬ç±»å‹ï¼Œä½†ç”±äºè¯­è¨€å¯¹å®ƒçš„ç‰¹æ®Šæ”¯æŒï¼Œä½ å¯èƒ½ä¼šæŠŠå®ƒå½“ä½œåŸºæœ¬ç±»å‹æ¥çœ‹å¾…ã€‚</p>
<p>ğŸ¯ <strong>é¢è¯•è€ƒç‚¹</strong></p>
<p><strong>Qï¼šString ä¸ºä»€ä¹ˆè®¾è®¡æˆä¸å¯å˜çš„ï¼Ÿ</strong></p>
<p>Aï¼šä¸»è¦æœ‰ä¸‰ä¸ªåŸå› ï¼š</p>
<ol>
<li><strong>å®‰å…¨æ€§</strong>ï¼šString å¸¸ç”¨ä½œå‚æ•°ï¼ˆå¦‚ç½‘ç»œè¿æ¥ã€æ–‡ä»¶è·¯å¾„ï¼‰ï¼Œä¸å¯å˜é˜²æ­¢è¢«æ¶æ„ä¿®æ”¹</li>
<li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼šä¸å¯å˜å¯¹è±¡å¤©ç„¶çº¿ç¨‹å®‰å…¨ï¼Œå¯åœ¨å¤šçº¿ç¨‹é—´å…±äº«</li>
<li><strong>å­—ç¬¦ä¸²å¸¸é‡æ± </strong>ï¼šä¸å¯å˜æ€§ä½¿å¾—å­—ç¬¦ä¸²å¯ä»¥è¢«ç¼“å­˜å¤ç”¨ï¼ŒèŠ‚çœå†…å­˜</li>
</ol>
<h3 data-id="heading-9">é»˜è®¤å€¼</h3>
<p>å­—æ®µå£°æ˜æ—¶ä¸ä¸€å®šè¦èµ‹å€¼ã€‚æœªåˆå§‹åŒ–çš„å­—æ®µä¼šè¢«ç¼–è¯‘å™¨è®¾ç½®ä¸ºåˆç†çš„é»˜è®¤å€¼ï¼Œé€šå¸¸æ˜¯é›¶æˆ– <code>null</code>ã€‚ä½†<strong>ä¾èµ–é»˜è®¤å€¼é€šå¸¸è¢«è®¤ä¸ºæ˜¯ä¸å¥½çš„ç¼–ç¨‹é£æ ¼</strong>ã€‚</p>













































<table><thead><tr><th>æ•°æ®ç±»å‹</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td>byte</td><td>0</td></tr><tr><td>short</td><td>0</td></tr><tr><td>int</td><td>0</td></tr><tr><td>long</td><td>0L</td></tr><tr><td>float</td><td>0.0f</td></tr><tr><td>double</td><td>0.0d</td></tr><tr><td>char</td><td>'\u0000'</td></tr><tr><td>boolean</td><td>false</td></tr><tr><td>Stringï¼ˆæˆ–ä»»ä½•å¯¹è±¡ï¼‰</td><td>null</td></tr></tbody></table>
<p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šå±€éƒ¨å˜é‡<strong>æ²¡æœ‰é»˜è®¤å€¼</strong>ï¼ç¼–è¯‘å™¨ä¸ä¼šä¸ºæœªåˆå§‹åŒ–çš„å±€éƒ¨å˜é‡èµ‹é»˜è®¤å€¼ã€‚è®¿é—®æœªåˆå§‹åŒ–çš„å±€éƒ¨å˜é‡ä¼šå¯¼è‡´<strong>ç¼–è¯‘æ—¶é”™è¯¯</strong>ã€‚</p>
<p>âŒ <strong>å¸¸è§é”™è¯¯</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// âŒ ç¼–è¯‘é”™è¯¯ï¼šå±€éƒ¨å˜é‡æœªåˆå§‹åŒ–</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> count;
    System.out.println(count);  <span class="hljs-comment">// é”™è¯¯ï¼</span>
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šå…ˆåˆå§‹åŒ–å†ä½¿ç”¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    System.out.println(count);
}
</code></pre>
<h3 data-id="heading-10">å­—é¢é‡</h3>
<p>ä½ å¯èƒ½æ³¨æ„åˆ°åˆå§‹åŒ–åŸºæœ¬ç±»å‹å˜é‡æ—¶æ²¡æœ‰ä½¿ç”¨ <code>new</code> å…³é”®å­—ã€‚åŸºæœ¬ç±»å‹æ˜¯å†…ç½®äºè¯­è¨€ä¸­çš„ç‰¹æ®Šæ•°æ®ç±»å‹ï¼Œä¸æ˜¯ä»ç±»åˆ›å»ºçš„å¯¹è±¡ã€‚**å­—é¢é‡ï¼ˆLiteralï¼‰**æ˜¯å›ºå®šå€¼åœ¨æºä»£ç ä¸­çš„è¡¨ç¤ºå½¢å¼ï¼Œç›´æ¥å†™åœ¨ä»£ç ä¸­ï¼Œæ— éœ€è®¡ç®—ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">boolean</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;
<span class="hljs-type">char</span> <span class="hljs-variable">capitalC</span> <span class="hljs-operator">=</span> <span class="hljs-string">'C'</span>;
<span class="hljs-type">byte</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;
<span class="hljs-type">short</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-number">10000</span>;
<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">100000</span>;
</code></pre>
<h4 data-id="heading-11">æ•´æ•°å­—é¢é‡</h4>
<p>æ•´æ•°å­—é¢é‡å¦‚æœä»¥ <code>L</code> æˆ– <code>l</code> ç»“å°¾åˆ™ä¸º <code>long</code> ç±»å‹ï¼Œå¦åˆ™ä¸º <code>int</code> ç±»å‹ã€‚<strong>å»ºè®®ä½¿ç”¨å¤§å†™ <code>L</code></strong>ï¼Œå› ä¸ºå°å†™ <code>l</code> å®¹æ˜“ä¸æ•°å­— <code>1</code> æ··æ·†ã€‚</p>
<p>æ•´æ•°å­—é¢é‡å¯ä»¥ç”¨ä»¥ä¸‹è¿›åˆ¶è¡¨ç¤ºï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åè¿›åˆ¶ï¼š26</span>
<span class="hljs-type">int</span> <span class="hljs-variable">decVal</span> <span class="hljs-operator">=</span> <span class="hljs-number">26</span>;
<span class="hljs-comment">// åå…­è¿›åˆ¶ï¼š26ï¼ˆ0x å‰ç¼€ï¼‰</span>
<span class="hljs-type">int</span> <span class="hljs-variable">hexVal</span> <span class="hljs-operator">=</span> <span class="hljs-number">0x1a</span>;
<span class="hljs-comment">// äºŒè¿›åˆ¶ï¼š26ï¼ˆ0b å‰ç¼€ï¼ŒJava SE 7+ï¼‰</span>
<span class="hljs-type">int</span> <span class="hljs-variable">binVal</span> <span class="hljs-operator">=</span> <span class="hljs-number">0b11010</span>;
</code></pre>
<h4 data-id="heading-12">æµ®ç‚¹æ•°å­—é¢é‡</h4>
<p>æµ®ç‚¹æ•°å­—é¢é‡ä»¥ <code>F</code> æˆ– <code>f</code> ç»“å°¾ä¸º <code>float</code> ç±»å‹ï¼Œå¦åˆ™ä¸º <code>double</code> ç±»å‹ï¼ˆå¯é€‰åœ°ä»¥ <code>D</code> æˆ– <code>d</code> ç»“å°¾ï¼‰ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">double</span> <span class="hljs-variable">d1</span> <span class="hljs-operator">=</span> <span class="hljs-number">123.4</span>;
<span class="hljs-type">double</span> <span class="hljs-variable">d2</span> <span class="hljs-operator">=</span> <span class="hljs-number">1.234e2</span>;    <span class="hljs-comment">// ç§‘å­¦è®¡æ•°æ³•ï¼Œç­‰äº 123.4</span>
<span class="hljs-type">float</span> <span class="hljs-variable">f1</span> <span class="hljs-operator">=</span> <span class="hljs-number">123.4f</span>;
</code></pre>
<h4 data-id="heading-13">å­—ç¬¦å’Œå­—ç¬¦ä¸²å­—é¢é‡</h4>
<p><code>char</code> å’Œ <code>String</code> å­—é¢é‡å¯ä»¥åŒ…å«ä»»ä½• Unicodeï¼ˆUTF-16ï¼‰å­—ç¬¦ã€‚å¦‚æœç¼–è¾‘å™¨å’Œæ–‡ä»¶ç³»ç»Ÿå…è®¸ï¼Œå¯ä»¥ç›´æ¥åœ¨ä»£ç ä¸­ä½¿ç”¨è¿™äº›å­—ç¬¦ï¼›å¦åˆ™å¯ä»¥ä½¿ç”¨ Unicode è½¬ä¹‰ï¼Œå¦‚ <code>'\u0108'</code>ï¼ˆå¸¦æŠ‘æ‰¬ç¬¦çš„å¤§å†™ Cï¼‰ã€‚</p>
<p><strong>è½¬ä¹‰åºåˆ—</strong>ï¼š</p>









































<table><thead><tr><th>è½¬ä¹‰åºåˆ—</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>\b</code></td><td>é€€æ ¼</td></tr><tr><td><code>\t</code></td><td>åˆ¶è¡¨ç¬¦</td></tr><tr><td><code>\n</code></td><td>æ¢è¡Œ</td></tr><tr><td><code>\f</code></td><td>æ¢é¡µ</td></tr><tr><td><code>\r</code></td><td>å›è½¦</td></tr><tr><td><code>\"</code></td><td>åŒå¼•å·</td></tr><tr><td><code>\'</code></td><td>å•å¼•å·</td></tr><tr><td><code>\\</code></td><td>åæ–œæ </td></tr></tbody></table>
<p><code>char</code> å­—é¢é‡ç”¨<strong>å•å¼•å·</strong>ï¼Œ<code>String</code> å­—é¢é‡ç”¨<strong>åŒå¼•å·</strong>ã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ <code>null</code> å­—é¢é‡ï¼Œå¯ä»¥èµ‹ç»™ä»»ä½•å¼•ç”¨ç±»å‹å˜é‡ï¼ˆåŸºæœ¬ç±»å‹é™¤å¤–ï¼‰ã€‚<code>null</code> å¸¸ç”¨ä½œæ ‡è®°ï¼Œè¡¨ç¤ºæŸä¸ªå¯¹è±¡ä¸å¯ç”¨ã€‚</p>
<p>è¿˜æœ‰ä¸€ç§ç‰¹æ®Šçš„<strong>ç±»å­—é¢é‡ï¼ˆClass Literalï¼‰</strong>ï¼Œç”±ç±»å‹åååŠ  <code>.class</code> æ„æˆï¼Œä¾‹å¦‚ <code>String.class</code>ï¼Œå®ƒå¼•ç”¨ä»£è¡¨è¯¥ç±»å‹æœ¬èº«çš„ <code>Class</code> å¯¹è±¡ã€‚</p>
<h3 data-id="heading-14">æ•°å­—å­—é¢é‡ä¸­çš„ä¸‹åˆ’çº¿</h3>
<p>Java SE 7 åŠæ›´é«˜ç‰ˆæœ¬å…è®¸åœ¨æ•°å­—å­—é¢é‡çš„<strong>æ•°å­—ä¹‹é—´</strong>ä½¿ç”¨ä»»æ„æ•°é‡çš„ä¸‹åˆ’çº¿ <code>_</code>ï¼Œå¯ä»¥æé«˜ä»£ç å¯è¯»æ€§ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">long</span> <span class="hljs-variable">creditCardNumber</span> <span class="hljs-operator">=</span> <span class="hljs-number">1234_5678_9012_3456L</span>;
<span class="hljs-type">long</span> <span class="hljs-variable">socialSecurityNumber</span> <span class="hljs-operator">=</span> <span class="hljs-number">999_99_9999L</span>;
<span class="hljs-type">float</span> <span class="hljs-variable">pi</span> <span class="hljs-operator">=</span> <span class="hljs-number">3.14_15F</span>;
<span class="hljs-type">long</span> <span class="hljs-variable">hexBytes</span> <span class="hljs-operator">=</span> <span class="hljs-number">0xFF_EC_DE_5E</span>;
<span class="hljs-type">long</span> <span class="hljs-variable">hexWords</span> <span class="hljs-operator">=</span> <span class="hljs-number">0xCAFE_BABE</span>;
<span class="hljs-type">byte</span> <span class="hljs-variable">nybbles</span> <span class="hljs-operator">=</span> <span class="hljs-number">0b0010_0101</span>;
<span class="hljs-type">long</span> <span class="hljs-variable">bytes</span> <span class="hljs-operator">=</span> <span class="hljs-number">0b11010010_01101001_10010100_10010010</span>;
</code></pre>
<p><strong>ä¸‹åˆ’çº¿ä¸èƒ½æ”¾åœ¨ä»¥ä¸‹ä½ç½®</strong>ï¼š</p>
<ul>
<li>æ•°å­—çš„å¼€å¤´æˆ–ç»“å°¾</li>
<li>å°æ•°ç‚¹æ—è¾¹</li>
<li><code>F</code>ã€<code>L</code> ç­‰åç¼€ä¹‹å‰</li>
<li>éœ€è¦æ•°å­—ä¸²çš„ä½ç½®ï¼ˆå¦‚ <code>0x</code> ä¹‹åï¼‰</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// âŒ æ— æ•ˆ</span>
<span class="hljs-type">float</span> <span class="hljs-variable">pi1</span> <span class="hljs-operator">=</span> 3_<span class="hljs-number">.1415F</span>;       <span class="hljs-comment">// å°æ•°ç‚¹æ—è¾¹</span>
<span class="hljs-type">float</span> <span class="hljs-variable">pi2</span> <span class="hljs-operator">=</span> <span class="hljs-number">3.</span>_1415F;       <span class="hljs-comment">// å°æ•°ç‚¹æ—è¾¹</span>
<span class="hljs-type">long</span> <span class="hljs-variable">ssn</span> <span class="hljs-operator">=</span> 999_99_9999_L;   <span class="hljs-comment">// L åç¼€ä¹‹å‰</span>
<span class="hljs-type">int</span> <span class="hljs-variable">x2</span> <span class="hljs-operator">=</span> 52_;               <span class="hljs-comment">// ç»“å°¾</span>
<span class="hljs-type">int</span> <span class="hljs-variable">x4</span> <span class="hljs-operator">=</span> 0_x52;             <span class="hljs-comment">// 0x ä¹‹é—´</span>
<span class="hljs-type">int</span> <span class="hljs-variable">x5</span> <span class="hljs-operator">=</span> 0x_52;             <span class="hljs-comment">// 0x ä¹‹å</span>

<span class="hljs-comment">// âœ… æœ‰æ•ˆ</span>
<span class="hljs-type">int</span> <span class="hljs-variable">x1</span> <span class="hljs-operator">=</span> <span class="hljs-number">5_2</span>;
<span class="hljs-type">int</span> <span class="hljs-variable">x3</span> <span class="hljs-operator">=</span> <span class="hljs-number">5_______2</span>;
<span class="hljs-type">int</span> <span class="hljs-variable">x6</span> <span class="hljs-operator">=</span> <span class="hljs-number">0x5_2</span>;
</code></pre>
<hr/>
<h2 data-id="heading-15">æ•°ç»„</h2>
<p><strong>æ•°ç»„ï¼ˆArrayï¼‰<strong>æ˜¯ä¸€ä¸ªå®¹å™¨å¯¹è±¡ï¼Œä¿å­˜</strong>å›ºå®šæ•°é‡</strong>çš„<strong>å•ä¸€ç±»å‹</strong>çš„å€¼ã€‚æ•°ç»„çš„é•¿åº¦åœ¨åˆ›å»ºæ—¶ç¡®å®šï¼Œä¹‹åä¸å¯æ›´æ”¹ã€‚</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ç´¢å¼•:    0     1     2     3     4     5     6     7     8     9</span>
      â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
<span class="hljs-section">å€¼:   â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚</span>
      â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ç§°ä¸º<strong>å…ƒç´ ï¼ˆElementï¼‰</strong>ï¼Œé€šè¿‡æ•°å­—**ç´¢å¼•ï¼ˆIndexï¼‰**è®¿é—®ã€‚ç´¢å¼•ä» <strong>0</strong> å¼€å§‹ï¼Œå› æ­¤ç¬¬ 9 ä¸ªå…ƒç´ çš„ç´¢å¼•æ˜¯ 8ã€‚</p>
<p>ğŸ’¡ <strong>é€šä¿—ç†è§£</strong>ï¼šæ•°ç»„å°±åƒä¸€æ’å‚¨ç‰©æŸœï¼Œæ¯ä¸ªæŸœå­éƒ½æœ‰ç¼–å·ï¼ˆä» 0 å¼€å§‹ï¼‰ï¼Œæ¯ä¸ªæŸœå­åªèƒ½æ”¾åŒç±»å‹çš„ä¸œè¥¿ã€‚æŸœå­æ•°é‡åœ¨å»ºé€ æ—¶å°±å›ºå®šäº†ã€‚</p>
<h3 data-id="heading-16">ArrayDemo ç¤ºä¾‹</h3>
<p>ä»¥ä¸‹ç¨‹åºåˆ›å»ºä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œæ”¾å…¥ä¸€äº›å€¼ï¼Œç„¶åæ‰“å°æ¯ä¸ªå€¼ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ArrayDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// å£°æ˜ä¸€ä¸ªæ•´æ•°æ•°ç»„</span>
        <span class="hljs-type">int</span>[] anArray;

        <span class="hljs-comment">// åˆ†é… 10 ä¸ªæ•´æ•°çš„å†…å­˜</span>
        anArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">10</span>];
           
        <span class="hljs-comment">// åˆå§‹åŒ–å…ƒç´ </span>
        anArray[<span class="hljs-number">0</span>] = <span class="hljs-number">100</span>;
        anArray[<span class="hljs-number">1</span>] = <span class="hljs-number">200</span>;
        <span class="hljs-comment">// ... ä¾æ­¤ç±»æ¨</span>
        anArray[<span class="hljs-number">9</span>] = <span class="hljs-number">1000</span>;

        System.out.println(<span class="hljs-string">"Element at index 0: "</span> + anArray[<span class="hljs-number">0</span>]);
        System.out.println(<span class="hljs-string">"Element at index 1: "</span> + anArray[<span class="hljs-number">1</span>]);
        <span class="hljs-comment">// ... ä¾æ­¤ç±»æ¨</span>
        System.out.println(<span class="hljs-string">"Element at index 9: "</span> + anArray[<span class="hljs-number">9</span>]);
    }
} 
</code></pre>
<blockquote>
<p>â–¶ï¸ <strong>è¿è¡Œç»“æœ</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Element at index 0:</span> <span class="hljs-number">100</span>
<span class="hljs-attr">Element at index 1:</span> <span class="hljs-number">200</span>
<span class="hljs-string">...</span>
<span class="hljs-attr">Element at index 9:</span> <span class="hljs-number">1000</span>
</code></pre>
</blockquote>
<p>åœ¨å®é™…ç¼–ç¨‹ä¸­ï¼Œé€šå¸¸ä¼šä½¿ç”¨<strong>å¾ªç¯ç»“æ„</strong>éå†æ•°ç»„å…ƒç´ ï¼Œè€Œä¸æ˜¯é€è¡Œç¼–å†™ã€‚</p>
<h3 data-id="heading-17">å£°æ˜æ•°ç»„å˜é‡</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å£°æ˜ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼ˆæ¨èå†™æ³•ï¼‰</span>
<span class="hljs-type">int</span>[] anArray;

<span class="hljs-comment">// å£°æ˜å„ç§ç±»å‹çš„æ•°ç»„</span>
<span class="hljs-type">byte</span>[] anArrayOfBytes;
<span class="hljs-type">short</span>[] anArrayOfShorts;
<span class="hljs-type">long</span>[] anArrayOfLongs;
<span class="hljs-type">float</span>[] anArrayOfFloats;
<span class="hljs-type">double</span>[] anArrayOfDoubles;
<span class="hljs-type">boolean</span>[] anArrayOfBooleans;
<span class="hljs-type">char</span>[] anArrayOfChars;
String[] anArrayOfStrings;
</code></pre>
<p>æ•°ç»„ç±»å‹å†™ä½œ <code>type[]</code>ï¼Œå…¶ä¸­ <code>type</code> æ˜¯å…ƒç´ çš„æ•°æ®ç±»å‹ã€‚æ•°ç»„å¤§å°ä¸æ˜¯ç±»å‹çš„ä¸€éƒ¨åˆ†ï¼ˆæ‰€ä»¥æ–¹æ‹¬å·æ˜¯ç©ºçš„ï¼‰ã€‚å£°æ˜æœ¬èº«<strong>ä¸ä¼šåˆ›å»ºæ•°ç»„</strong>ï¼Œåªæ˜¯å‘Šè¯‰ç¼–è¯‘å™¨è¿™ä¸ªå˜é‡å°†ä¿å­˜æŒ‡å®šç±»å‹çš„æ•°ç»„ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¹Ÿå¯ä»¥æŠŠæ–¹æ‹¬å·æ”¾åœ¨å˜é‡ååï¼ˆä¸æ¨èï¼‰</span>
<span class="hljs-type">float</span> anArrayOfFloats[];
</code></pre>
<h3 data-id="heading-18">åˆ›å»ºã€åˆå§‹åŒ–å’Œè®¿é—®æ•°ç»„</h3>
<p><strong>æ–¹å¼ä¸€ï¼šä½¿ç”¨ new è¿ç®—ç¬¦</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆ›å»ºæ•°ç»„</span>
anArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">10</span>];

<span class="hljs-comment">// åˆå§‹åŒ–å…ƒç´ </span>
anArray[<span class="hljs-number">0</span>] = <span class="hljs-number">100</span>;
anArray[<span class="hljs-number">1</span>] = <span class="hljs-number">200</span>;
anArray[<span class="hljs-number">2</span>] = <span class="hljs-number">300</span>;

<span class="hljs-comment">// è®¿é—®å…ƒç´ </span>
System.out.println(<span class="hljs-string">"Element at index 0: "</span> + anArray[<span class="hljs-number">0</span>]);
</code></pre>
<p>å¦‚æœç¼ºå°‘åˆ›å»ºè¯­å¥ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ArrayDemo.java:4: Variable anArray may not have been initialized.</span>
</code></pre>
<p><strong>æ–¹å¼äºŒï¼šä½¿ç”¨ç®€å†™è¯­æ³•ï¼ˆæ¨èï¼‰</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">int</span>[] anArray = { 
    <span class="hljs-number">100</span>, <span class="hljs-number">200</span>, <span class="hljs-number">300</span>,
    <span class="hljs-number">400</span>, <span class="hljs-number">500</span>, <span class="hljs-number">600</span>, 
    <span class="hljs-number">700</span>, <span class="hljs-number">800</span>, <span class="hljs-number">900</span>, <span class="hljs-number">1000</span>
};
</code></pre>
<p>æ•°ç»„é•¿åº¦ç”±èŠ±æ‹¬å·å†…çš„å€¼çš„æ•°é‡å†³å®šã€‚</p>
<h3 data-id="heading-19">å¤šç»´æ•°ç»„</h3>
<p>ä½¿ç”¨ä¸¤ä¸ªæˆ–æ›´å¤šæ–¹æ‹¬å·å£°æ˜å¤šç»´æ•°ç»„ï¼š</p>
<pre><code class="hljs language-java" lang="java">String[][] names = {
    {<span class="hljs-string">"Mr. "</span>, <span class="hljs-string">"Mrs. "</span>, <span class="hljs-string">"Ms. "</span>},
    {<span class="hljs-string">"Smith"</span>, <span class="hljs-string">"Jones"</span>}
};
<span class="hljs-comment">// Mr. Smith</span>
System.out.println(names[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] + names[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]);
<span class="hljs-comment">// Ms. Jones</span>
System.out.println(names[<span class="hljs-number">0</span>][<span class="hljs-number">2</span>] + names[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>]);
</code></pre>
<blockquote>
<p>â–¶ï¸ <strong>è¿è¡Œç»“æœ</strong></p>
<pre><code class="hljs">Mr. Smith
Ms. Jones
</code></pre>
</blockquote>
<p>åœ¨ Java ä¸­ï¼Œå¤šç»´æ•°ç»„æ˜¯<strong>æ•°ç»„çš„æ•°ç»„</strong>ã€‚ä¸ C æˆ– Fortran ä¸åŒï¼ŒJava çš„å¤šç»´æ•°ç»„å„è¡Œ<strong>é•¿åº¦å¯ä»¥ä¸åŒ</strong>ã€‚</p>
<h3 data-id="heading-20">è·å–æ•°ç»„é•¿åº¦</h3>
<p>ä½¿ç”¨å†…ç½®çš„ <code>length</code> å±æ€§è·å–æ•°ç»„å¤§å°ï¼š</p>
<pre><code class="hljs language-java" lang="java">System.out.println(anArray.length);  <span class="hljs-comment">// è¾“å‡º: 10</span>
</code></pre>
<h3 data-id="heading-21">å¤åˆ¶æ•°ç»„</h3>
<p><code>System</code> ç±»æä¾›äº† <code>arraycopy</code> æ–¹æ³•é«˜æ•ˆåœ°å¤åˆ¶æ•°ç»„æ•°æ®ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">arraycopy</span><span class="hljs-params">(Object src, <span class="hljs-type">int</span> srcPos,
                             Object dest, <span class="hljs-type">int</span> destPos, <span class="hljs-type">int</span> length)</span>
</code></pre>
<p>å‚æ•°è¯´æ˜ï¼š</p>
<ul>
<li><code>src</code>ï¼šæºæ•°ç»„</li>
<li><code>srcPos</code>ï¼šæºæ•°ç»„èµ·å§‹ä½ç½®</li>
<li><code>dest</code>ï¼šç›®æ ‡æ•°ç»„</li>
<li><code>destPos</code>ï¼šç›®æ ‡æ•°ç»„èµ·å§‹ä½ç½®</li>
<li><code>length</code>ï¼šå¤åˆ¶çš„å…ƒç´ æ•°é‡</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ArrayCopyDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        String[] copyFrom = {
            <span class="hljs-string">"Affogato"</span>, <span class="hljs-string">"Americano"</span>, <span class="hljs-string">"Cappuccino"</span>, <span class="hljs-string">"Corretto"</span>, <span class="hljs-string">"Cortado"</span>,   
            <span class="hljs-string">"Doppio"</span>, <span class="hljs-string">"Espresso"</span>, <span class="hljs-string">"Frappucino"</span>, <span class="hljs-string">"Freddo"</span>, <span class="hljs-string">"Lungo"</span>, <span class="hljs-string">"Macchiato"</span>,      
            <span class="hljs-string">"Marocchino"</span>, <span class="hljs-string">"Ristretto"</span> };
        
        String[] copyTo = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[<span class="hljs-number">7</span>];
        System.arraycopy(copyFrom, <span class="hljs-number">2</span>, copyTo, <span class="hljs-number">0</span>, <span class="hljs-number">7</span>);
        <span class="hljs-keyword">for</span> (String coffee : copyTo) {
            System.out.print(coffee + <span class="hljs-string">" "</span>);           
        }
    }
}
</code></pre>
<blockquote>
<p>â–¶ï¸ <strong>è¿è¡Œç»“æœ</strong></p>
<pre><code class="hljs">Cappuccino Corretto Cortado Doppio Espresso Frappucino Freddo
</code></pre>
</blockquote>
<h3 data-id="heading-22">æ•°ç»„æ“ä½œå·¥å…·ç±»</h3>
<p><code>java.util.Arrays</code> ç±»æä¾›äº†å¸¸ç”¨çš„æ•°ç»„æ“ä½œæ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨ copyOfRangeï¼ˆä¸éœ€è¦é¢„å…ˆåˆ›å»ºç›®æ ‡æ•°ç»„ï¼‰</span>
String[] copyTo = java.util.Arrays.copyOfRange(copyFrom, <span class="hljs-number">2</span>, <span class="hljs-number">9</span>);
</code></pre>
<p>æ³¨æ„ï¼š<code>copyOfRange</code> çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯èµ·å§‹ç´¢å¼•ï¼ˆåŒ…å«ï¼‰ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ç»“æŸç´¢å¼•ï¼ˆ<strong>ä¸åŒ…å«</strong>ï¼‰ã€‚</p>
<p><strong>Arrays ç±»å…¶ä»–å¸¸ç”¨æ–¹æ³•</strong>ï¼š</p>





































<table><thead><tr><th>æ–¹æ³•</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td><code>binarySearch</code></td><td>åœ¨å·²æ’åºæ•°ç»„ä¸­äºŒåˆ†æŸ¥æ‰¾</td></tr><tr><td><code>equals</code></td><td>æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„æ˜¯å¦ç›¸ç­‰</td></tr><tr><td><code>fill</code></td><td>ç”¨æŒ‡å®šå€¼å¡«å……æ•°ç»„</td></tr><tr><td><code>sort</code></td><td>æ’åºï¼ˆå‡åºï¼‰</td></tr><tr><td><code>parallelSort</code></td><td>å¹¶è¡Œæ’åºï¼ˆJava SE 8+ï¼Œå¤§æ•°ç»„æ›´å¿«ï¼‰</td></tr><tr><td><code>stream</code></td><td>åˆ›å»ºæµï¼ˆJava SE 8+ï¼‰</td></tr><tr><td><code>toString</code></td><td>è½¬ä¸ºå­—ç¬¦ä¸²</td></tr></tbody></table>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è½¬ä¸ºå­—ç¬¦ä¸²</span>
System.out.println(java.util.Arrays.toString(copyTo));
<span class="hljs-comment">// è¾“å‡º: [Cappuccino, Corretto, Cortado, Doppio, Espresso, Frappucino, Freddo]</span>

<span class="hljs-comment">// ğŸš€ ä½¿ç”¨ Stream APIï¼ˆJava SE 8+ï¼‰</span>
java.util.Arrays.stream(copyTo).map(coffee -&gt; coffee + <span class="hljs-string">" "</span>).forEach(System.out::print);
</code></pre>
<hr/>
<h2 data-id="heading-23">è¿ç®—ç¬¦</h2>
<p>ç°åœ¨ä½ å·²ç»å­¦ä¼šäº†å¦‚ä½•å£°æ˜å’Œåˆå§‹åŒ–å˜é‡ï¼Œæ¥ä¸‹æ¥å­¦ä¹ å¦‚ä½•<strong>ä½¿ç”¨</strong>å®ƒä»¬ã€‚**è¿ç®—ç¬¦ï¼ˆOperatorï¼‰<strong>æ˜¯å¯¹ä¸€ä¸ªã€ä¸¤ä¸ªæˆ–ä¸‰ä¸ª</strong>æ“ä½œæ•°ï¼ˆOperandï¼‰**æ‰§è¡Œç‰¹å®šæ“ä½œå¹¶è¿”å›ç»“æœçš„ç‰¹æ®Šç¬¦å·ã€‚</p>
<h3 data-id="heading-24">è¿ç®—ç¬¦ä¼˜å…ˆçº§</h3>
<p>ä¸‹è¡¨æŒ‰ä¼˜å…ˆçº§ä»é«˜åˆ°ä½åˆ—å‡ºäº† Java è¿ç®—ç¬¦ã€‚ä¼˜å…ˆçº§é«˜çš„è¿ç®—ç¬¦å…ˆæ±‚å€¼ã€‚åŒä¸€è¡Œçš„è¿ç®—ç¬¦ä¼˜å…ˆçº§ç›¸åŒã€‚</p>





































































<table><thead><tr><th>ç±»åˆ«</th><th>è¿ç®—ç¬¦</th></tr></thead><tbody><tr><td>åç¼€</td><td><code>expr++</code> <code>expr--</code></td></tr><tr><td>ä¸€å…ƒ</td><td><code>++expr</code> <code>--expr</code> <code>+expr</code> <code>-expr</code> <code>~</code> <code>!</code></td></tr><tr><td>ä¹˜é™¤</td><td><code>*</code> <code>/</code> <code>%</code></td></tr><tr><td>åŠ å‡</td><td><code>+</code> <code>-</code></td></tr><tr><td>ç§»ä½</td><td><code>&lt;&lt;</code> <code>&gt;&gt;</code> <code>&gt;&gt;&gt;</code></td></tr><tr><td>å…³ç³»</td><td><code>&lt;</code> <code>&gt;</code> <code>&lt;=</code> <code>&gt;=</code> <code>instanceof</code></td></tr><tr><td>ç›¸ç­‰</td><td><code>==</code> <code>!=</code></td></tr><tr><td>æŒ‰ä½ä¸</td><td><code>&amp;</code></td></tr><tr><td>æŒ‰ä½å¼‚æˆ–</td><td><code>^</code></td></tr><tr><td>æŒ‰ä½æˆ–</td><td>`</td><td>`</td></tr><tr><td>é€»è¾‘ä¸</td><td><code>&amp;&amp;</code></td></tr><tr><td>é€»è¾‘æˆ–</td><td>`</td><td/><td>`</td></tr><tr><td>ä¸‰å…ƒ</td><td><code>? :</code></td></tr><tr><td>èµ‹å€¼</td><td><code>=</code> <code>+=</code> <code>-=</code> <code>*=</code> <code>/=</code> <code>%=</code> <code>&amp;=</code> <code>^=</code> `</td><td>=<code> </code>&lt;&lt;=<code> </code>&gt;&gt;=<code> </code>&gt;&gt;&gt;=`</td></tr></tbody></table>
<blockquote>
<p>ğŸ“Œ <strong>è¡¥å……è¯´æ˜</strong>ï¼šç›¸åŒä¼˜å…ˆçº§çš„äºŒå…ƒè¿ç®—ç¬¦<strong>ä»å·¦åˆ°å³</strong>æ±‚å€¼ï¼Œèµ‹å€¼è¿ç®—ç¬¦<strong>ä»å³åˆ°å·¦</strong>æ±‚å€¼ã€‚</p>
</blockquote>
<h3 data-id="heading-25">èµ‹å€¼è¿ç®—ç¬¦</h3>
<p>æœ€å¸¸è§çš„è¿ç®—ç¬¦æ˜¯ç®€å•èµ‹å€¼è¿ç®—ç¬¦ <code>=</code>ï¼Œå®ƒå°†å³è¾¹çš„å€¼èµ‹ç»™å·¦è¾¹çš„æ“ä½œæ•°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">int</span> <span class="hljs-variable">cadence</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
<span class="hljs-type">int</span> <span class="hljs-variable">speed</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
<span class="hljs-type">int</span> <span class="hljs-variable">gear</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
</code></pre>
<p>è¯¥è¿ç®—ç¬¦ä¹Ÿå¯ç”¨äºå¯¹è±¡ï¼Œèµ‹å€¼<strong>å¯¹è±¡å¼•ç”¨</strong>ã€‚</p>
<h3 data-id="heading-26">ç®—æœ¯è¿ç®—ç¬¦</h3>





























<table><thead><tr><th>è¿ç®—ç¬¦</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>+</code></td><td>åŠ æ³•ï¼ˆä¹Ÿç”¨äºå­—ç¬¦ä¸²è¿æ¥ï¼‰</td></tr><tr><td><code>-</code></td><td>å‡æ³•</td></tr><tr><td><code>*</code></td><td>ä¹˜æ³•</td></tr><tr><td><code>/</code></td><td>é™¤æ³•</td></tr><tr><td><code>%</code></td><td>å–ä½™ï¼ˆæ¨¡è¿ç®—ï¼‰</td></tr></tbody></table>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ArithmeticDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span> <span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span> + <span class="hljs-number">2</span>;
        System.out.println(<span class="hljs-string">"1 + 2 = "</span> + result);       <span class="hljs-comment">// 3</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">original_result</span> <span class="hljs-operator">=</span> result;

        result = result - <span class="hljs-number">1</span>;
        System.out.println(original_result + <span class="hljs-string">" - 1 = "</span> + result);  <span class="hljs-comment">// 2</span>
        original_result = result;

        result = result * <span class="hljs-number">2</span>;
        System.out.println(original_result + <span class="hljs-string">" * 2 = "</span> + result);  <span class="hljs-comment">// 4</span>
        original_result = result;

        result = result / <span class="hljs-number">2</span>;
        System.out.println(original_result + <span class="hljs-string">" / 2 = "</span> + result);  <span class="hljs-comment">// 2</span>
        original_result = result;

        result = result + <span class="hljs-number">8</span>;
        System.out.println(original_result + <span class="hljs-string">" + 8 = "</span> + result);  <span class="hljs-comment">// 10</span>
        original_result = result;

        result = result % <span class="hljs-number">7</span>;
        System.out.println(original_result + <span class="hljs-string">" % 7 = "</span> + result);  <span class="hljs-comment">// 3</span>
    }
}
</code></pre>
<blockquote>
<p>â–¶ï¸ <strong>è¿è¡Œç»“æœ</strong></p>
<pre><code class="hljs language-ini" lang="ini">1 + <span class="hljs-attr">2</span> = <span class="hljs-number">3</span>
3 - <span class="hljs-attr">1</span> = <span class="hljs-number">2</span>
2 * <span class="hljs-attr">2</span> = <span class="hljs-number">4</span>
4 / <span class="hljs-attr">2</span> = <span class="hljs-number">2</span>
2 + <span class="hljs-attr">8</span> = <span class="hljs-number">10</span>
10 % <span class="hljs-attr">7</span> = <span class="hljs-number">3</span>
</code></pre>
</blockquote>
<p><strong>å¤åˆèµ‹å€¼è¿ç®—ç¬¦</strong>ï¼š<code>x += 1;</code> ç­‰ä»·äº <code>x = x + 1;</code></p>
<p><strong>å­—ç¬¦ä¸²è¿æ¥</strong>ï¼š<code>+</code> è¿ç®—ç¬¦ä¹Ÿç”¨äºè¿æ¥å­—ç¬¦ä¸²ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcatDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>{
        <span class="hljs-type">String</span> <span class="hljs-variable">firstString</span> <span class="hljs-operator">=</span> <span class="hljs-string">"This is"</span>;
        <span class="hljs-type">String</span> <span class="hljs-variable">secondString</span> <span class="hljs-operator">=</span> <span class="hljs-string">" a concatenated string."</span>;
        <span class="hljs-type">String</span> <span class="hljs-variable">thirdString</span> <span class="hljs-operator">=</span> firstString + secondString;
        System.out.println(thirdString);
    }
}
</code></pre>
<p>è¾“å‡ºï¼š<code>This is a concatenated string.</code></p>
<h3 data-id="heading-27">ä¸€å…ƒè¿ç®—ç¬¦</h3>
<p>ä¸€å…ƒè¿ç®—ç¬¦åªéœ€è¦ä¸€ä¸ªæ“ä½œæ•°ï¼š</p>





























<table><thead><tr><th>è¿ç®—ç¬¦</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>+</code></td><td>ä¸€å…ƒæ­£å·ï¼ˆè¡¨ç¤ºæ­£å€¼ï¼Œé€šå¸¸çœç•¥ï¼‰</td></tr><tr><td><code>-</code></td><td>ä¸€å…ƒè´Ÿå·ï¼ˆå–åï¼‰</td></tr><tr><td><code>++</code></td><td>è‡ªå¢ï¼ˆåŠ  1ï¼‰</td></tr><tr><td><code>--</code></td><td>è‡ªå‡ï¼ˆå‡ 1ï¼‰</td></tr><tr><td><code>!</code></td><td>é€»è¾‘éï¼ˆå–åå¸ƒå°”å€¼ï¼‰</td></tr></tbody></table>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UnaryDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> +<span class="hljs-number">1</span>;
        System.out.println(result);   <span class="hljs-comment">// 1</span>

        result--;
        System.out.println(result);   <span class="hljs-comment">// 0</span>

        result++;
        System.out.println(result);   <span class="hljs-comment">// 1</span>

        result = -result;
        System.out.println(result);   <span class="hljs-comment">// -1</span>

        <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
        System.out.println(success);   <span class="hljs-comment">// false</span>
        System.out.println(!success);  <span class="hljs-comment">// true</span>
    }
}
</code></pre>
<h4 data-id="heading-28">å‰ç¼€ä¸åç¼€çš„åŒºåˆ«</h4>
<p>è‡ªå¢/è‡ªå‡è¿ç®—ç¬¦å¯ä»¥æ”¾åœ¨æ“ä½œæ•°<strong>å‰é¢ï¼ˆå‰ç¼€ï¼‰<strong>æˆ–</strong>åé¢ï¼ˆåç¼€ï¼‰</strong>ã€‚<code>result++</code> å’Œ <code>++result</code> éƒ½ä¼šè®© <code>result</code> åŠ  1ï¼Œä½†å®ƒä»¬çš„<strong>è¿”å›å€¼ä¸åŒ</strong>ï¼š</p>
<ul>
<li><strong>å‰ç¼€</strong> <code>++result</code>ï¼šè¿”å›<strong>å¢åŠ å</strong>çš„å€¼</li>
<li><strong>åç¼€</strong> <code>result++</code>ï¼šè¿”å›<strong>åŸæ¥çš„</strong>å€¼</li>
</ul>
<p>ğŸ¯ <strong>é¢è¯•è€ƒç‚¹</strong></p>
<p><strong>Qï¼š<code>++i</code> å’Œ <code>i++</code> æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PrePostDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>{
        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;
        i++;
        System.out.println(i);    <span class="hljs-comment">// 4</span>
        ++i;			   
        System.out.println(i);    <span class="hljs-comment">// 5</span>
        System.out.println(++i);  <span class="hljs-comment">// 6ï¼ˆå…ˆåŠ åç”¨ï¼‰</span>
        System.out.println(i++);  <span class="hljs-comment">// 6ï¼ˆå…ˆç”¨ååŠ ï¼‰</span>
        System.out.println(i);    <span class="hljs-comment">// 7</span>
    }
}
</code></pre>
<p>Aï¼šå•ç‹¬ä½¿ç”¨æ—¶æ•ˆæœç›¸åŒã€‚åœ¨è¡¨è¾¾å¼ä¸­ï¼Œ<code>++i</code> å…ˆè‡ªå¢å†è¿”å›æ–°å€¼ï¼Œ<code>i++</code> å…ˆè¿”å›åŸå€¼å†è‡ªå¢ã€‚</p>
<p>âš–ï¸ <strong>å¯¹æ¯”å­¦ä¹ ï¼š++i vs i++</strong></p>




















<table><thead><tr><th>è¡¨è¾¾å¼</th><th>æ“ä½œé¡ºåº</th><th>è¿”å›å€¼</th></tr></thead><tbody><tr><td><code>++i</code></td><td>å…ˆåŠ  1ï¼Œå†è¿”å›</td><td>æ–°å€¼</td></tr><tr><td><code>i++</code></td><td>å…ˆè¿”å›ï¼Œå†åŠ  1</td><td>åŸå€¼</td></tr></tbody></table>
<h3 data-id="heading-29">ç›¸ç­‰å’Œå…³ç³»è¿ç®—ç¬¦</h3>

































<table><thead><tr><th>è¿ç®—ç¬¦</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>==</code></td><td>ç­‰äº</td></tr><tr><td><code>!=</code></td><td>ä¸ç­‰äº</td></tr><tr><td><code>&gt;</code></td><td>å¤§äº</td></tr><tr><td><code>&gt;=</code></td><td>å¤§äºç­‰äº</td></tr><tr><td><code>&lt;</code></td><td>å°äº</td></tr><tr><td><code>&lt;=</code></td><td>å°äºç­‰äº</td></tr></tbody></table>
<p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šæµ‹è¯•ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰æ—¶å¿…é¡»ç”¨ <code>==</code>ï¼Œè€Œä¸æ˜¯ <code>=</code>ï¼</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ComparisonDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>{
        <span class="hljs-type">int</span> <span class="hljs-variable">value1</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">value2</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;
        <span class="hljs-keyword">if</span>(value1 == value2)
            System.out.println(<span class="hljs-string">"value1 == value2"</span>);
        <span class="hljs-keyword">if</span>(value1 != value2)
            System.out.println(<span class="hljs-string">"value1 != value2"</span>);
        <span class="hljs-keyword">if</span>(value1 &gt; value2)
            System.out.println(<span class="hljs-string">"value1 &gt; value2"</span>);
        <span class="hljs-keyword">if</span>(value1 &lt; value2)
            System.out.println(<span class="hljs-string">"value1 &lt; value2"</span>);
        <span class="hljs-keyword">if</span>(value1 &lt;= value2)
            System.out.println(<span class="hljs-string">"value1 &lt;= value2"</span>);
    }
}
</code></pre>
<blockquote>
<p>â–¶ï¸ <strong>è¿è¡Œç»“æœ</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">value1</span> <span class="hljs-type">!=</span> <span class="hljs-string">value2</span>
<span class="hljs-string">value1</span> <span class="hljs-string">&lt;</span> <span class="hljs-string">value2</span>
<span class="hljs-string">value1</span> <span class="hljs-string">&lt;=</span> <span class="hljs-string">value2</span>
</code></pre>
</blockquote>
<p>ğŸ¯ <strong>é¢è¯•è€ƒç‚¹</strong></p>
<p><strong>Qï¼š<code>==</code> å’Œ <code>equals()</code> æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<p>Aï¼š</p>
<ul>
<li><code>==</code>ï¼šæ¯”è¾ƒåŸºæœ¬ç±»å‹çš„<strong>å€¼</strong>ï¼Œæˆ–æ¯”è¾ƒå¼•ç”¨ç±»å‹çš„<strong>å†…å­˜åœ°å€</strong></li>
<li><code>equals()</code>ï¼šæ¯”è¾ƒå¯¹è±¡çš„<strong>å†…å®¹</strong>ï¼ˆéœ€è¦ç±»æ­£ç¡®é‡å†™è¯¥æ–¹æ³•ï¼‰</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">"hello"</span>);
<span class="hljs-type">String</span> <span class="hljs-variable">s2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">"hello"</span>);
System.out.println(s1 == s2);      <span class="hljs-comment">// falseï¼ˆä¸åŒå¯¹è±¡ï¼‰</span>
System.out.println(s1.equals(s2)); <span class="hljs-comment">// trueï¼ˆå†…å®¹ç›¸åŒï¼‰</span>
</code></pre>
<h3 data-id="heading-30">æ¡ä»¶è¿ç®—ç¬¦</h3>























<table><thead><tr><th>è¿ç®—ç¬¦</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>&amp;&amp;</code></td><td>æ¡ä»¶ä¸ï¼ˆçŸ­è·¯ï¼‰</td></tr><tr><td>`</td><td/><td>`</td><td>æ¡ä»¶æˆ–ï¼ˆçŸ­è·¯ï¼‰</td></tr><tr><td><code>? :</code></td><td>ä¸‰å…ƒè¿ç®—ç¬¦</td></tr></tbody></table>
<p><code>&amp;&amp;</code> å’Œ <code>||</code> å…·æœ‰<strong>çŸ­è·¯</strong>è¡Œä¸ºï¼šå¦‚æœç¬¬ä¸€ä¸ªæ“ä½œæ•°å·²ç»èƒ½ç¡®å®šç»“æœï¼Œå°±ä¸ä¼šè®¡ç®—ç¬¬äºŒä¸ªæ“ä½œæ•°ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConditionalDemo1</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>{
        <span class="hljs-type">int</span> <span class="hljs-variable">value1</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">value2</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;
        <span class="hljs-keyword">if</span>((value1 == <span class="hljs-number">1</span>) &amp;&amp; (value2 == <span class="hljs-number">2</span>))
            System.out.println(<span class="hljs-string">"value1 is 1 AND value2 is 2"</span>);
        <span class="hljs-keyword">if</span>((value1 == <span class="hljs-number">1</span>) || (value2 == <span class="hljs-number">1</span>))
            System.out.println(<span class="hljs-string">"value1 is 1 OR value2 is 1"</span>);
    }
}
</code></pre>
<p><strong>ä¸‰å…ƒè¿ç®—ç¬¦</strong>æ˜¯ <code>if-then-else</code> çš„ç®€å†™å½¢å¼ï¼š</p>
<pre><code class="hljs language-java" lang="java">result = someCondition ? value1 : value2;
</code></pre>
<p>å«ä¹‰ï¼šå¦‚æœ <code>someCondition</code> ä¸º <code>true</code>ï¼Œå°† <code>value1</code> èµ‹ç»™ <code>result</code>ï¼›å¦åˆ™å°† <code>value2</code> èµ‹ç»™ <code>result</code>ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConditionalDemo2</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>{
        <span class="hljs-type">int</span> <span class="hljs-variable">value1</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">value2</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;
        <span class="hljs-type">int</span> result;
        <span class="hljs-type">boolean</span> <span class="hljs-variable">someCondition</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;
        result = someCondition ? value1 : value2;
        System.out.println(result);  <span class="hljs-comment">// 1</span>
    }
}
</code></pre>
<p>ğŸ’¡ <strong>é€šä¿—ç†è§£</strong>ï¼šä¸‰å…ƒè¿ç®—ç¬¦å°±åƒåšé€‰æ‹©é¢˜ï¼Œæ¡ä»¶ä¸ºçœŸé€‰ Aï¼Œä¸ºå‡é€‰ Bã€‚å½“è¡¨è¾¾å¼ç®€æ´ä¸”æ²¡æœ‰å‰¯ä½œç”¨æ—¶ï¼Œç”¨å®ƒæ¯” <code>if-then-else</code> æ›´ç®€æ´ã€‚</p>
<h3 data-id="heading-31">ç±»å‹æ¯”è¾ƒè¿ç®—ç¬¦ instanceof</h3>
<p><code>instanceof</code> è¿ç®—ç¬¦å°†å¯¹è±¡ä¸æŒ‡å®šç±»å‹è¿›è¡Œæ¯”è¾ƒï¼Œå¯ä»¥æµ‹è¯•å¯¹è±¡æ˜¯å¦æ˜¯æŸä¸ªç±»çš„å®ä¾‹ã€å­ç±»çš„å®ä¾‹ï¼Œæˆ–å®ç°äº†æŸä¸ªæ¥å£çš„ç±»çš„å®ä¾‹ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">InstanceofDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">Parent</span> <span class="hljs-variable">obj1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parent</span>();
        <span class="hljs-type">Parent</span> <span class="hljs-variable">obj2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>();

        System.out.println(<span class="hljs-string">"obj1 instanceof Parent: "</span> + (obj1 <span class="hljs-keyword">instanceof</span> Parent));      <span class="hljs-comment">// true</span>
        System.out.println(<span class="hljs-string">"obj1 instanceof Child: "</span> + (obj1 <span class="hljs-keyword">instanceof</span> Child));        <span class="hljs-comment">// false</span>
        System.out.println(<span class="hljs-string">"obj1 instanceof MyInterface: "</span> + (obj1 <span class="hljs-keyword">instanceof</span> MyInterface)); <span class="hljs-comment">// false</span>
        System.out.println(<span class="hljs-string">"obj2 instanceof Parent: "</span> + (obj2 <span class="hljs-keyword">instanceof</span> Parent));      <span class="hljs-comment">// true</span>
        System.out.println(<span class="hljs-string">"obj2 instanceof Child: "</span> + (obj2 <span class="hljs-keyword">instanceof</span> Child));        <span class="hljs-comment">// true</span>
        System.out.println(<span class="hljs-string">"obj2 instanceof MyInterface: "</span> + (obj2 <span class="hljs-keyword">instanceof</span> MyInterface)); <span class="hljs-comment">// true</span>
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Parent</span> {}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Child</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Parent</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MyInterface</span> {}
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyInterface</span> {}
</code></pre>
<p>âš ï¸ <strong>æ³¨æ„</strong>ï¼š<code>null</code> ä¸æ˜¯ä»»ä½•ç±»å‹çš„å®ä¾‹ï¼Œ<code>null instanceof AnyType</code> å§‹ç»ˆè¿”å› <code>false</code>ã€‚</p>
<h3 data-id="heading-32">ä½è¿ç®—å’Œç§»ä½è¿ç®—ç¬¦</h3>
<p>è¿™äº›è¿ç®—ç¬¦å¯¹æ•´æ•°ç±»å‹æ‰§è¡Œä½çº§æ“ä½œï¼Œä½¿ç”¨é¢‘ç‡è¾ƒä½ï¼š</p>






































<table><thead><tr><th>è¿ç®—ç¬¦</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>~</code></td><td>æŒ‰ä½å–å</td></tr><tr><td><code>&lt;&lt;</code></td><td>æœ‰ç¬¦å·å·¦ç§»</td></tr><tr><td><code>&gt;&gt;</code></td><td>æœ‰ç¬¦å·å³ç§»</td></tr><tr><td><code>&gt;&gt;&gt;</code></td><td>æ— ç¬¦å·å³ç§»</td></tr><tr><td><code>&amp;</code></td><td>æŒ‰ä½ä¸</td></tr><tr><td><code>^</code></td><td>æŒ‰ä½å¼‚æˆ–</td></tr><tr><td>`</td><td>`</td><td>æŒ‰ä½æˆ–</td></tr></tbody></table>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BitDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">bitmask</span> <span class="hljs-operator">=</span> <span class="hljs-number">0x000F</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">val</span> <span class="hljs-operator">=</span> <span class="hljs-number">0x2222</span>;
        System.out.println(val &amp; bitmask);  <span class="hljs-comment">// è¾“å‡º: 2</span>
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-33">è¡¨è¾¾å¼ã€è¯­å¥å’Œå—</h2>
<h3 data-id="heading-34">è¡¨è¾¾å¼</h3>
<p><strong>è¡¨è¾¾å¼ï¼ˆExpressionï¼‰<strong>ç”±å˜é‡ã€è¿ç®—ç¬¦å’Œæ–¹æ³•è°ƒç”¨ç»„æˆï¼Œæ±‚å€¼å¾—åˆ°ä¸€ä¸ª</strong>å•ä¸€çš„å€¼</strong>ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">int</span> <span class="hljs-variable">cadence</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;              <span class="hljs-comment">// èµ‹å€¼è¡¨è¾¾å¼ï¼Œè¿”å› int</span>
anArray[<span class="hljs-number">0</span>] = <span class="hljs-number">100</span>;             <span class="hljs-comment">// èµ‹å€¼è¡¨è¾¾å¼</span>
System.out.println(<span class="hljs-string">"..."</span>);    <span class="hljs-comment">// æ–¹æ³•è°ƒç”¨è¡¨è¾¾å¼</span>

<span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span> + <span class="hljs-number">2</span>;           <span class="hljs-comment">// result ç°åœ¨æ˜¯ 3</span>
<span class="hljs-keyword">if</span> (value1 == value2)         <span class="hljs-comment">// æ¯”è¾ƒè¡¨è¾¾å¼ï¼Œè¿”å› boolean</span>
</code></pre>
<p>è¡¨è¾¾å¼è¿”å›å€¼çš„æ•°æ®ç±»å‹å–å†³äºè¡¨è¾¾å¼ä¸­ä½¿ç”¨çš„å…ƒç´ ã€‚<code>cadence = 0</code> è¿”å› <code>int</code>ï¼Œå› ä¸ºèµ‹å€¼è¿ç®—ç¬¦è¿”å›ä¸å·¦æ“ä½œæ•°ç›¸åŒç±»å‹çš„å€¼ã€‚</p>
<p><strong>å¤åˆè¡¨è¾¾å¼</strong>å¯ä»¥ç”±å¤šä¸ªå°è¡¨è¾¾å¼ç»„æˆï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-number">1</span> * <span class="hljs-number">2</span> * <span class="hljs-number">3</span>               <span class="hljs-comment">// ä¹˜æ³•é¡ºåºæ— å…³</span>
x + y / <span class="hljs-number">100</span>             <span class="hljs-comment">// æœ‰æ­§ä¹‰ï¼</span>
(x + y) / <span class="hljs-number">100</span>           <span class="hljs-comment">// æ˜ç¡®ï¼šå…ˆåŠ åé™¤</span>
x + (y / <span class="hljs-number">100</span>)           <span class="hljs-comment">// æ˜ç¡®ï¼šå…ˆé™¤ååŠ ï¼ˆé»˜è®¤è¡Œä¸ºï¼‰</span>
</code></pre>
<p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šç¼–å†™å¤åˆè¡¨è¾¾å¼æ—¶ï¼Œ<strong>å»ºè®®ä½¿ç”¨æ‹¬å·æ˜ç¡®è¿ç®—é¡ºåº</strong>ï¼Œè¿™æ ·ä»£ç æ›´æ˜“è¯»ã€æ˜“ç»´æŠ¤ã€‚</p>
<h3 data-id="heading-35">è¯­å¥</h3>
<p>**è¯­å¥ï¼ˆStatementï¼‰**å¤§è‡´ç›¸å½“äºè‡ªç„¶è¯­è¨€ä¸­çš„å¥å­ï¼Œæ„æˆä¸€ä¸ªå®Œæ•´çš„æ‰§è¡Œå•å…ƒã€‚</p>
<p><strong>è¡¨è¾¾å¼è¯­å¥</strong>ï¼šä»¥ä¸‹è¡¨è¾¾å¼åŠ ä¸Šåˆ†å· <code>;</code> å°±æ„æˆè¯­å¥ï¼š</p>
<ul>
<li>èµ‹å€¼è¡¨è¾¾å¼</li>
<li><code>++</code> æˆ– <code>--</code> çš„ä½¿ç”¨</li>
<li>æ–¹æ³•è°ƒç”¨</li>
<li>å¯¹è±¡åˆ›å»ºè¡¨è¾¾å¼</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// èµ‹å€¼è¯­å¥</span>
aValue = <span class="hljs-number">8933.234</span>;
<span class="hljs-comment">// è‡ªå¢è¯­å¥</span>
aValue++;
<span class="hljs-comment">// æ–¹æ³•è°ƒç”¨è¯­å¥</span>
System.out.println(<span class="hljs-string">"Hello World!"</span>);
<span class="hljs-comment">// å¯¹è±¡åˆ›å»ºè¯­å¥</span>
<span class="hljs-type">Bicycle</span> <span class="hljs-variable">myBike</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bicycle</span>();
</code></pre>
<p><strong>å£°æ˜è¯­å¥</strong>ï¼šå£°æ˜å˜é‡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å£°æ˜è¯­å¥</span>
<span class="hljs-type">double</span> <span class="hljs-variable">aValue</span> <span class="hljs-operator">=</span> <span class="hljs-number">8933.234</span>;
</code></pre>
<p><strong>æ§åˆ¶æµè¯­å¥</strong>ï¼šæ§åˆ¶è¯­å¥çš„æ‰§è¡Œé¡ºåºï¼Œä¸‹ä¸€èŠ‚è¯¦ç»†ä»‹ç»ã€‚</p>
<h3 data-id="heading-36">å—</h3>
<p>**å—ï¼ˆBlockï¼‰**æ˜¯ä¸€å¯¹èŠ±æ‹¬å· <code>{}</code> ä¹‹é—´çš„é›¶ä¸ªæˆ–å¤šä¸ªè¯­å¥ï¼Œå¯ä»¥ç”¨åœ¨ä»»ä½•å…è®¸å•ä¸ªè¯­å¥çš„åœ°æ–¹ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BlockDemo</span> {
     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
          <span class="hljs-type">boolean</span> <span class="hljs-variable">condition</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;
          <span class="hljs-keyword">if</span> (condition) { <span class="hljs-comment">// å— 1 å¼€å§‹</span>
               System.out.println(<span class="hljs-string">"Condition is true."</span>);
          } <span class="hljs-comment">// å— 1 ç»“æŸ</span>
          <span class="hljs-keyword">else</span> { <span class="hljs-comment">// å— 2 å¼€å§‹</span>
               System.out.println(<span class="hljs-string">"Condition is false."</span>);
          } <span class="hljs-comment">// å— 2 ç»“æŸ</span>
     }
}
</code></pre>
<p>ğŸ’¡ <strong>é€šä¿—ç†è§£</strong>ï¼šå—å°±åƒä¸€ä¸ªç›’å­ï¼ŒæŠŠç›¸å…³çš„è¯­å¥æ‰“åŒ…åœ¨ä¸€èµ·ã€‚if-else æ¯ä¸ªåˆ†æ”¯éƒ½å¯ä»¥ç”¨ä¸€ä¸ªå—æ¥åŒ…å«å¤šæ¡è¯­å¥ã€‚</p>
<hr/>
<h2 data-id="heading-37">æ§åˆ¶æµè¯­å¥</h2>
<p>æºæ–‡ä»¶ä¸­çš„è¯­å¥é€šå¸¸æŒ‰å‡ºç°é¡ºåºä»ä¸Šåˆ°ä¸‹æ‰§è¡Œã€‚<strong>æ§åˆ¶æµè¯­å¥ï¼ˆControl Flow Statementï¼‰<strong>é€šè¿‡å†³ç­–ã€å¾ªç¯å’Œåˆ†æ”¯æ¥æ‰“ç ´è¿™ç§æµç¨‹ï¼Œä½¿ç¨‹åºèƒ½å¤Ÿ</strong>æœ‰æ¡ä»¶åœ°</strong>æ‰§è¡Œç‰¹å®šä»£ç å—ã€‚</p>
<p>Java æ”¯æŒä»¥ä¸‹æ§åˆ¶æµè¯­å¥ï¼š</p>
<ul>
<li><strong>å†³ç­–è¯­å¥</strong>ï¼š<code>if-then</code>ã€<code>if-then-else</code>ã€<code>switch</code></li>
<li><strong>å¾ªç¯è¯­å¥</strong>ï¼š<code>for</code>ã€<code>while</code>ã€<code>do-while</code></li>
<li><strong>åˆ†æ”¯è¯­å¥</strong>ï¼š<code>break</code>ã€<code>continue</code>ã€<code>return</code></li>
</ul>
<h3 data-id="heading-38">if-then å’Œ if-then-else è¯­å¥</h3>
<h4 data-id="heading-39">if-then è¯­å¥</h4>
<p><code>if-then</code> è¯­å¥æ˜¯æœ€åŸºæœ¬çš„æ§åˆ¶æµè¯­å¥ã€‚å®ƒå‘Šè¯‰ç¨‹åº<strong>ä»…å½“</strong>ç‰¹å®šæ¡ä»¶ä¸º <code>true</code> æ—¶æ‰æ‰§è¡ŒæŸæ®µä»£ç ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">applyBrakes</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// "if" å­å¥ï¼šè‡ªè¡Œè½¦å¿…é¡»åœ¨ç§»åŠ¨</span>
    <span class="hljs-keyword">if</span> (isMoving) { 
        <span class="hljs-comment">// "then" å­å¥ï¼šå‡é€Ÿ</span>
        currentSpeed--;
    }
}
</code></pre>
<p>å¦‚æœæ¡ä»¶ä¸º <code>false</code>ï¼Œæ§åˆ¶è·³åˆ° <code>if-then</code> è¯­å¥ä¹‹åã€‚</p>
<p>å¦‚æœ "then" å­å¥åªæœ‰ä¸€æ¡è¯­å¥ï¼Œå¯ä»¥çœç•¥èŠ±æ‹¬å·ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">applyBrakes</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">if</span> (isMoving)
        currentSpeed--;
}
</code></pre>
<p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šçœç•¥èŠ±æ‹¬å·ä¼šä½¿ä»£ç æ›´è„†å¼±ã€‚å¦‚æœåæ¥æ·»åŠ ç¬¬äºŒæ¡è¯­å¥ï¼Œå¾ˆå®¹æ˜“å¿˜è®°åŠ èŠ±æ‹¬å·ã€‚ç¼–è¯‘å™¨ä¸ä¼šæ•è·è¿™ç§é”™è¯¯ï¼Œä½ åªä¼šå¾—åˆ°é”™è¯¯çš„ç»“æœã€‚<strong>å»ºè®®å§‹ç»ˆä½¿ç”¨èŠ±æ‹¬å·</strong>ã€‚</p>
<h4 data-id="heading-40">if-then-else è¯­å¥</h4>
<p>å½“ "if" æ¡ä»¶ä¸º <code>false</code> æ—¶ï¼Œ<code>if-then-else</code> è¯­å¥æä¾›<strong>å¤‡é€‰æ‰§è¡Œè·¯å¾„</strong>ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">applyBrakes</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">if</span> (isMoving) {
        currentSpeed--;
    } <span class="hljs-keyword">else</span> {
        System.err.println(<span class="hljs-string">"The bicycle has already stopped!"</span>);
    } 
}
</code></pre>
<p><strong>å¤šé‡æ¡ä»¶åˆ¤æ–­</strong>ï¼ˆelse ifï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">IfElseDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">testscore</span> <span class="hljs-operator">=</span> <span class="hljs-number">76</span>;
        <span class="hljs-type">char</span> grade;

        <span class="hljs-keyword">if</span> (testscore &gt;= <span class="hljs-number">90</span>) {
            grade = <span class="hljs-string">'A'</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (testscore &gt;= <span class="hljs-number">80</span>) {
            grade = <span class="hljs-string">'B'</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (testscore &gt;= <span class="hljs-number">70</span>) {
            grade = <span class="hljs-string">'C'</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (testscore &gt;= <span class="hljs-number">60</span>) {
            grade = <span class="hljs-string">'D'</span>;
        } <span class="hljs-keyword">else</span> {
            grade = <span class="hljs-string">'F'</span>;
        }
        System.out.println(<span class="hljs-string">"Grade = "</span> + grade);
    }
}
</code></pre>
<p>è¾“å‡ºï¼š<code>Grade = C</code></p>
<p>æ³¨æ„ï¼šè™½ç„¶ 76 åŒæ—¶æ»¡è¶³ <code>&gt;= 70</code> å’Œ <code>&gt;= 60</code>ï¼Œä½†ä¸€æ—¦æ¡ä»¶æ»¡è¶³ï¼Œç›¸åº”è¯­å¥æ‰§è¡Œåï¼Œ<strong>å‰©ä½™æ¡ä»¶ä¸å†æ£€æŸ¥</strong>ã€‚</p>
<h3 data-id="heading-41">switch è¯­å¥</h3>
<p>ä¸ <code>if-then</code> å’Œ <code>if-then-else</code> ä¸åŒï¼Œ<code>switch</code> è¯­å¥å¯ä»¥æœ‰<strong>å¤šä¸ªå¯èƒ½çš„æ‰§è¡Œè·¯å¾„</strong>ã€‚</p>
<p><code>switch</code> é€‚ç”¨äºä»¥ä¸‹ç±»å‹ï¼š</p>
<ul>
<li>åŸºæœ¬ç±»å‹ï¼š<code>byte</code>ã€<code>short</code>ã€<code>char</code>ã€<code>int</code></li>
<li>æšä¸¾ç±»å‹</li>
<li><code>String</code>ï¼ˆJava SE 7+ï¼‰</li>
<li>åŒ…è£…ç±»ï¼š<code>Character</code>ã€<code>Byte</code>ã€<code>Short</code>ã€<code>Integer</code></li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SwitchDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">month</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>;
        String monthString;
        <span class="hljs-keyword">switch</span> (month) {
            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:  monthString = <span class="hljs-string">"January"</span>;
                     <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:  monthString = <span class="hljs-string">"February"</span>;
                     <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:  monthString = <span class="hljs-string">"March"</span>;
                     <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:  monthString = <span class="hljs-string">"April"</span>;
                     <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:  monthString = <span class="hljs-string">"May"</span>;
                     <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">6</span>:  monthString = <span class="hljs-string">"June"</span>;
                     <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">7</span>:  monthString = <span class="hljs-string">"July"</span>;
                     <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">8</span>:  monthString = <span class="hljs-string">"August"</span>;
                     <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">9</span>:  monthString = <span class="hljs-string">"September"</span>;
                     <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">10</span>: monthString = <span class="hljs-string">"October"</span>;
                     <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">11</span>: monthString = <span class="hljs-string">"November"</span>;
                     <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">12</span>: monthString = <span class="hljs-string">"December"</span>;
                     <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">default</span>: monthString = <span class="hljs-string">"Invalid month"</span>;
                     <span class="hljs-keyword">break</span>;
        }
        System.out.println(monthString);
    }
}
</code></pre>
<p>è¾“å‡ºï¼š<code>August</code></p>
<p>âš–ï¸ <strong>å¯¹æ¯”å­¦ä¹ ï¼šif-else vs switch</strong></p>

























<table><thead><tr><th>ç‰¹æ€§</th><th>if-else</th><th>switch</th></tr></thead><tbody><tr><td>æ¡ä»¶ç±»å‹</td><td>ä»»æ„å¸ƒå°”è¡¨è¾¾å¼ã€èŒƒå›´</td><td>å•ä¸ªå€¼ï¼ˆæ•´æ•°ã€æšä¸¾ã€Stringï¼‰</td></tr><tr><td>å¯è¯»æ€§</td><td>æ¡ä»¶å°‘æ—¶æ¸…æ™°</td><td>å¤šä¸ªç­‰å€¼åˆ¤æ–­æ—¶æ›´æ¸…æ™°</td></tr><tr><td>æ€§èƒ½</td><td>é¡ºåºåˆ¤æ–­</td><td>å¯èƒ½ä½¿ç”¨è·³è½¬è¡¨ä¼˜åŒ–</td></tr></tbody></table>
<h4 data-id="heading-42">break è¯­å¥çš„é‡è¦æ€§</h4>
<p>æ¯ä¸ª <code>break</code> è¯­å¥ç»ˆæ­¢å½“å‰ <code>switch</code> è¯­å¥ã€‚<strong>æ²¡æœ‰ <code>break</code>ï¼Œè¯­å¥ä¼š"ç©¿é€ï¼ˆFall Throughï¼‰"</strong>â€”â€”ç»§ç»­æ‰§è¡Œåé¢æ‰€æœ‰ <code>case</code> çš„è¯­å¥ï¼Œç›´åˆ°é‡åˆ° <code>break</code>ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SwitchDemoFallThrough</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        java.util.ArrayList&lt;String&gt; futureMonths = <span class="hljs-keyword">new</span> <span class="hljs-title class_">java</span>.util.ArrayList&lt;String&gt;();
        <span class="hljs-type">int</span> <span class="hljs-variable">month</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>;

        <span class="hljs-keyword">switch</span> (month) {
            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:  futureMonths.add(<span class="hljs-string">"January"</span>);
            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:  futureMonths.add(<span class="hljs-string">"February"</span>);
            <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:  futureMonths.add(<span class="hljs-string">"March"</span>);
            <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:  futureMonths.add(<span class="hljs-string">"April"</span>);
            <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:  futureMonths.add(<span class="hljs-string">"May"</span>);
            <span class="hljs-keyword">case</span> <span class="hljs-number">6</span>:  futureMonths.add(<span class="hljs-string">"June"</span>);
            <span class="hljs-keyword">case</span> <span class="hljs-number">7</span>:  futureMonths.add(<span class="hljs-string">"July"</span>);
            <span class="hljs-keyword">case</span> <span class="hljs-number">8</span>:  futureMonths.add(<span class="hljs-string">"August"</span>);
            <span class="hljs-keyword">case</span> <span class="hljs-number">9</span>:  futureMonths.add(<span class="hljs-string">"September"</span>);
            <span class="hljs-keyword">case</span> <span class="hljs-number">10</span>: futureMonths.add(<span class="hljs-string">"October"</span>);
            <span class="hljs-keyword">case</span> <span class="hljs-number">11</span>: futureMonths.add(<span class="hljs-string">"November"</span>);
            <span class="hljs-keyword">case</span> <span class="hljs-number">12</span>: futureMonths.add(<span class="hljs-string">"December"</span>);
                     <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">default</span>: <span class="hljs-keyword">break</span>;
        }

        <span class="hljs-keyword">if</span> (futureMonths.isEmpty()) {
            System.out.println(<span class="hljs-string">"Invalid month number"</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">for</span> (String monthName : futureMonths) {
               System.out.println(monthName);
            }
        }
    }
}
</code></pre>
<blockquote>
<p>â–¶ï¸ <strong>è¿è¡Œç»“æœ</strong></p>
<pre><code class="hljs">August
September
October
November
December
</code></pre>
</blockquote>
<p>ğŸ’¡ <strong>é€šä¿—ç†è§£</strong>ï¼šç©¿é€å°±åƒå¤šç±³è¯ºéª¨ç‰Œï¼Œä¸€æ—¦è§¦å‘ï¼Œåé¢çš„éƒ½ä¼šå€’ä¸‹ï¼Œç›´åˆ°é‡åˆ° <code>break</code> è¿™ä¸ª"æŒ¡æ¿"ã€‚</p>
<h4 data-id="heading-43">å¤šä¸ª case å…±äº«ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SwitchDemo2</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">month</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">year</span> <span class="hljs-operator">=</span> <span class="hljs-number">2000</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">numDays</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;

        <span class="hljs-keyword">switch</span> (month) {
            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>: <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-number">7</span>: <span class="hljs-keyword">case</span> <span class="hljs-number">8</span>: <span class="hljs-keyword">case</span> <span class="hljs-number">10</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-number">12</span>:
                numDays = <span class="hljs-number">31</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>: <span class="hljs-keyword">case</span> <span class="hljs-number">6</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-number">9</span>: <span class="hljs-keyword">case</span> <span class="hljs-number">11</span>:
                numDays = <span class="hljs-number">30</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
                <span class="hljs-keyword">if</span> (((year % <span class="hljs-number">4</span> == <span class="hljs-number">0</span>) &amp;&amp; !(year % <span class="hljs-number">100</span> == <span class="hljs-number">0</span>)) || (year % <span class="hljs-number">400</span> == <span class="hljs-number">0</span>))
                    numDays = <span class="hljs-number">29</span>;
                <span class="hljs-keyword">else</span>
                    numDays = <span class="hljs-number">28</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">default</span>:
                System.out.println(<span class="hljs-string">"Invalid month."</span>);
                <span class="hljs-keyword">break</span>;
        }
        System.out.println(<span class="hljs-string">"Number of Days = "</span> + numDays);
    }
}
</code></pre>
<p>è¾“å‡ºï¼š<code>Number of Days = 29</code></p>
<h4 data-id="heading-44">åœ¨ switch ä¸­ä½¿ç”¨ Stringï¼ˆJava SE 7+ï¼‰</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StringSwitchDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getMonthNumber</span><span class="hljs-params">(String month)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">monthNumber</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;

        <span class="hljs-keyword">if</span> (month == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> monthNumber;
        }

        <span class="hljs-keyword">switch</span> (month.toLowerCase()) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">"january"</span>:
                monthNumber = <span class="hljs-number">1</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">"february"</span>:
                monthNumber = <span class="hljs-number">2</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-comment">// ... å…¶ä»–æœˆä»½</span>
            <span class="hljs-keyword">case</span> <span class="hljs-string">"august"</span>:
                monthNumber = <span class="hljs-number">8</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-comment">// ...</span>
            <span class="hljs-keyword">default</span>: 
                monthNumber = <span class="hljs-number">0</span>;
                <span class="hljs-keyword">break</span>;
        }
        <span class="hljs-keyword">return</span> monthNumber;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">month</span> <span class="hljs-operator">=</span> <span class="hljs-string">"August"</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">returnedMonthNumber</span> <span class="hljs-operator">=</span> StringSwitchDemo.getMonthNumber(month);
        <span class="hljs-keyword">if</span> (returnedMonthNumber == <span class="hljs-number">0</span>) {
            System.out.println(<span class="hljs-string">"Invalid month"</span>);
        } <span class="hljs-keyword">else</span> {
            System.out.println(returnedMonthNumber);
        }
    }
}
</code></pre>
<p>è¾“å‡ºï¼š<code>8</code></p>
<p><code>switch</code> è¡¨è¾¾å¼ä¸­çš„ <code>String</code> ä½¿ç”¨ <code>String.equals</code> æ–¹æ³•ä¸æ¯ä¸ª <code>case</code> æ ‡ç­¾æ¯”è¾ƒã€‚</p>
<p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šç¡®ä¿ <code>switch</code> è¡¨è¾¾å¼ä¸ä¸º <code>null</code>ï¼Œå¦åˆ™ä¼šæŠ›å‡º <code>NullPointerException</code>ã€‚</p>
<h3 data-id="heading-45">while å’Œ do-while è¯­å¥</h3>
<h4 data-id="heading-46">while è¯­å¥</h4>
<p><code>while</code> è¯­å¥åœ¨æ¡ä»¶ä¸º <code>true</code> æ—¶æŒç»­æ‰§è¡Œè¯­å¥å—ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">while</span> (expression) {
     statement(s)
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WhileDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>{
        <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
        <span class="hljs-keyword">while</span> (count &lt; <span class="hljs-number">11</span>) {
            System.out.println(<span class="hljs-string">"Count is: "</span> + count);
            count++;
        }
    }
}
</code></pre>
<p><strong>æ— é™å¾ªç¯</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
    <span class="hljs-comment">// ä»£ç </span>
}
</code></pre>
<h4 data-id="heading-47">do-while è¯­å¥</h4>
<p><code>do-while</code> è¯­å¥åœ¨å¾ªç¯åº•éƒ¨æ±‚å€¼è¡¨è¾¾å¼ï¼Œå› æ­¤<strong>å¾ªç¯ä½“è‡³å°‘æ‰§è¡Œä¸€æ¬¡</strong>ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">do</span> {
     statement(s)
} <span class="hljs-keyword">while</span> (expression);
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DoWhileDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>{
        <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
        <span class="hljs-keyword">do</span> {
            System.out.println(<span class="hljs-string">"Count is: "</span> + count);
            count++;
        } <span class="hljs-keyword">while</span> (count &lt; <span class="hljs-number">11</span>);
    }
}
</code></pre>
<p>âš–ï¸ <strong>å¯¹æ¯”å­¦ä¹ ï¼šwhile vs do-while</strong></p>

























<table><thead><tr><th>ç‰¹æ€§</th><th>while</th><th>do-while</th></tr></thead><tbody><tr><td>æ¡ä»¶æ£€æŸ¥ä½ç½®</td><td>å¾ªç¯<strong>å‰</strong></td><td>å¾ªç¯<strong>å</strong></td></tr><tr><td>æœ€å°‘æ‰§è¡Œæ¬¡æ•°</td><td>0 æ¬¡</td><td><strong>1 æ¬¡</strong></td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>å¯èƒ½ä¸éœ€è¦æ‰§è¡Œ</td><td>è‡³å°‘éœ€è¦æ‰§è¡Œä¸€æ¬¡</td></tr></tbody></table>
<h3 data-id="heading-48">for è¯­å¥</h3>
<p><code>for</code> è¯­å¥æä¾›äº†ä¸€ç§ç´§å‡‘çš„æ–¹å¼æ¥è¿­ä»£ä¸€ç³»åˆ—å€¼ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">for</span> (initialization; termination; increment) {
    statement(s)
}
</code></pre>
<ul>
<li><strong>initialization</strong>ï¼šåˆå§‹åŒ–è¡¨è¾¾å¼ï¼Œå¾ªç¯å¼€å§‹æ—¶æ‰§è¡Œä¸€æ¬¡</li>
<li><strong>termination</strong>ï¼šç»ˆæ­¢è¡¨è¾¾å¼ï¼Œä¸º <code>false</code> æ—¶å¾ªç¯ç»ˆæ­¢</li>
<li><strong>increment</strong>ï¼šæ¯æ¬¡è¿­ä»£åæ‰§è¡Œï¼Œå¯ä»¥é€’å¢æˆ–é€’å‡</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ForDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>{
         <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">11</span>; i++){
              System.out.println(<span class="hljs-string">"Count is: "</span> + i);
         }
    }
}
</code></pre>
<blockquote>
<p>â–¶ï¸ <strong>è¿è¡Œç»“æœ</strong></p>
<pre><code class="hljs language-csharp" lang="csharp">Count <span class="hljs-keyword">is</span>: <span class="hljs-number">1</span>
Count <span class="hljs-keyword">is</span>: <span class="hljs-number">2</span>
...
Count <span class="hljs-keyword">is</span>: <span class="hljs-number">10</span>
</code></pre>
</blockquote>
<p>ğŸ’¡ <strong>é€šä¿—ç†è§£</strong>ï¼š<code>for</code> å¾ªç¯å°±åƒè®¾å®šå¥½çš„é—¹é’Ÿï¼Œä½ å‘Šè¯‰å®ƒä»å‡ ç‚¹å¼€å§‹ï¼ˆåˆå§‹åŒ–ï¼‰ã€åˆ°å‡ ç‚¹ç»“æŸï¼ˆç»ˆæ­¢æ¡ä»¶ï¼‰ã€æ¯æ¬¡èµ°å¤šå°‘ï¼ˆå¢é‡ï¼‰ï¼Œå®ƒå°±è‡ªåŠ¨æŒ‰è§„å¾‹æ‰§è¡Œã€‚</p>
<p><strong>å˜é‡ä½œç”¨åŸŸ</strong>ï¼šåœ¨åˆå§‹åŒ–è¡¨è¾¾å¼ä¸­å£°æ˜çš„å˜é‡ï¼Œå…¶ä½œç”¨åŸŸä»å£°æ˜å¤„å»¶ä¼¸åˆ° <code>for</code> è¯­å¥ç»“æŸã€‚å¦‚æœå¾ªç¯å¤–ä¸éœ€è¦è¯¥å˜é‡ï¼Œæœ€å¥½åœ¨åˆå§‹åŒ–è¡¨è¾¾å¼ä¸­å£°æ˜å®ƒã€‚</p>
<p><strong>æ— é™å¾ªç¯</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">for</span> ( ; ; ) {
    <span class="hljs-comment">// ä»£ç </span>
}
</code></pre>
<h4 data-id="heading-49">å¢å¼º for è¯­å¥ï¼ˆfor-eachï¼‰</h4>
<p>ä¸“ä¸ºéå†é›†åˆå’Œæ•°ç»„è®¾è®¡çš„ç®€æ´å½¢å¼ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">EnhancedForDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>{
         <span class="hljs-type">int</span>[] numbers = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>};
         <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> item : numbers) {
             System.out.println(<span class="hljs-string">"Count is: "</span> + item);
         }
    }
}
</code></pre>
<p><strong>å»ºè®®å°½å¯èƒ½ä½¿ç”¨å¢å¼º for å¾ªç¯</strong>ï¼Œä»£ç æ›´ç®€æ´æ˜“è¯»ã€‚</p>
<h3 data-id="heading-50">åˆ†æ”¯è¯­å¥</h3>
<h4 data-id="heading-51">break è¯­å¥</h4>
<p><code>break</code> æœ‰ä¸¤ç§å½¢å¼ï¼š<strong>æ— æ ‡ç­¾</strong>å’Œ<strong>æœ‰æ ‡ç­¾</strong>ã€‚</p>
<p><strong>æ— æ ‡ç­¾ break</strong>ï¼šç»ˆæ­¢æœ€å†…å±‚çš„ <code>switch</code>ã€<code>for</code>ã€<code>while</code> æˆ– <code>do-while</code> è¯­å¥ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BreakDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span>[] arrayOfInts = { <span class="hljs-number">32</span>, <span class="hljs-number">87</span>, <span class="hljs-number">3</span>, <span class="hljs-number">589</span>, <span class="hljs-number">12</span>, <span class="hljs-number">1076</span>, <span class="hljs-number">2000</span>, <span class="hljs-number">8</span>, <span class="hljs-number">622</span>, <span class="hljs-number">127</span> };
        <span class="hljs-type">int</span> <span class="hljs-variable">searchfor</span> <span class="hljs-operator">=</span> <span class="hljs-number">12</span>;

        <span class="hljs-type">int</span> i;
        <span class="hljs-type">boolean</span> <span class="hljs-variable">foundIt</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;

        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; arrayOfInts.length; i++) {
            <span class="hljs-keyword">if</span> (arrayOfInts[i] == searchfor) {
                foundIt = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">break</span>;  <span class="hljs-comment">// æ‰¾åˆ°åé€€å‡ºå¾ªç¯</span>
            }
        }

        <span class="hljs-keyword">if</span> (foundIt) {
            System.out.println(<span class="hljs-string">"Found "</span> + searchfor + <span class="hljs-string">" at index "</span> + i);
        } <span class="hljs-keyword">else</span> {
            System.out.println(searchfor + <span class="hljs-string">" not in the array"</span>);
        }
    }
}
</code></pre>
<p>è¾“å‡ºï¼š<code>Found 12 at index 4</code></p>
<p><strong>æœ‰æ ‡ç­¾ break</strong>ï¼šç»ˆæ­¢å¸¦æœ‰æŒ‡å®šæ ‡ç­¾çš„å¤–å±‚è¯­å¥ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BreakWithLabelDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span>[][] arrayOfInts = { 
            { <span class="hljs-number">32</span>, <span class="hljs-number">87</span>, <span class="hljs-number">3</span>, <span class="hljs-number">589</span> },
            { <span class="hljs-number">12</span>, <span class="hljs-number">1076</span>, <span class="hljs-number">2000</span>, <span class="hljs-number">8</span> },
            { <span class="hljs-number">622</span>, <span class="hljs-number">127</span>, <span class="hljs-number">77</span>, <span class="hljs-number">955</span> }
        };
        <span class="hljs-type">int</span> <span class="hljs-variable">searchfor</span> <span class="hljs-operator">=</span> <span class="hljs-number">12</span>;

        <span class="hljs-type">int</span> i;
        <span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        <span class="hljs-type">boolean</span> <span class="hljs-variable">foundIt</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;

    search:  <span class="hljs-comment">// æ ‡ç­¾</span>
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; arrayOfInts.length; i++) {
            <span class="hljs-keyword">for</span> (j = <span class="hljs-number">0</span>; j &lt; arrayOfInts[i].length; j++) {
                <span class="hljs-keyword">if</span> (arrayOfInts[i][j] == searchfor) {
                    foundIt = <span class="hljs-literal">true</span>;
                    <span class="hljs-keyword">break</span> search;  <span class="hljs-comment">// è·³å‡ºå¤–å±‚å¾ªç¯</span>
                }
            }
        }

        <span class="hljs-keyword">if</span> (foundIt) {
            System.out.println(<span class="hljs-string">"Found "</span> + searchfor + <span class="hljs-string">" at "</span> + i + <span class="hljs-string">", "</span> + j);
        } <span class="hljs-keyword">else</span> {
            System.out.println(searchfor + <span class="hljs-string">" not in the array"</span>);
        }
    }
}
</code></pre>
<p>è¾“å‡ºï¼š<code>Found 12 at 1, 0</code></p>
<p>âš ï¸ <strong>æ³¨æ„</strong>ï¼š<code>break</code> ç»ˆæ­¢å¸¦æ ‡ç­¾çš„è¯­å¥ï¼Œæ§åˆ¶æµè½¬ç§»åˆ°è¯¥è¯­å¥ä¹‹åçš„è¯­å¥ï¼Œ<strong>ä¸æ˜¯</strong>è½¬ç§»åˆ°æ ‡ç­¾å¤„ã€‚</p>
<h4 data-id="heading-52">continue è¯­å¥</h4>
<p><code>continue</code> è·³è¿‡å½“å‰è¿­ä»£çš„å‰©ä½™éƒ¨åˆ†ã€‚</p>
<p><strong>æ— æ ‡ç­¾ continue</strong>ï¼šè·³åˆ°æœ€å†…å±‚å¾ªç¯çš„ä¸‹ä¸€æ¬¡è¿­ä»£ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ContinueDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">searchMe</span> <span class="hljs-operator">=</span> <span class="hljs-string">"peter piper picked a peck of pickled peppers"</span>;
        <span class="hljs-type">int</span> <span class="hljs-variable">max</span> <span class="hljs-operator">=</span> searchMe.length();
        <span class="hljs-type">int</span> <span class="hljs-variable">numPs</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;

        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; max; i++) {
            <span class="hljs-keyword">if</span> (searchMe.charAt(i) != <span class="hljs-string">'p'</span>)
                <span class="hljs-keyword">continue</span>;  <span class="hljs-comment">// ä¸æ˜¯ 'p'ï¼Œè·³è¿‡</span>
            numPs++;
        }
        System.out.println(<span class="hljs-string">"Found "</span> + numPs + <span class="hljs-string">" p's in the string."</span>);
    }
}
</code></pre>
<p>è¾“å‡ºï¼š<code>Found 9 p's in the string.</code></p>
<p><strong>æœ‰æ ‡ç­¾ continue</strong>ï¼šè·³è¿‡å¸¦æ ‡ç­¾çš„å¤–å±‚å¾ªç¯çš„å½“å‰è¿­ä»£ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ContinueWithLabelDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">searchMe</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Look for a substring in me"</span>;
        <span class="hljs-type">String</span> <span class="hljs-variable">substring</span> <span class="hljs-operator">=</span> <span class="hljs-string">"sub"</span>;
        <span class="hljs-type">boolean</span> <span class="hljs-variable">foundIt</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;

        <span class="hljs-type">int</span> <span class="hljs-variable">max</span> <span class="hljs-operator">=</span> searchMe.length() - substring.length();

    test:  <span class="hljs-comment">// æ ‡ç­¾</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= max; i++) {
            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> substring.length();
            <span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i;
            <span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
            <span class="hljs-keyword">while</span> (n-- != <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">if</span> (searchMe.charAt(j++) != substring.charAt(k++)) {
                    <span class="hljs-keyword">continue</span> test;  <span class="hljs-comment">// ä¸åŒ¹é…ï¼Œå°è¯•ä¸‹ä¸€ä¸ªä½ç½®</span>
                }
            }
            foundIt = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">break</span> test;
        }
        System.out.println(foundIt ? <span class="hljs-string">"Found it"</span> : <span class="hljs-string">"Didn't find it"</span>);
    }
}
</code></pre>
<p>è¾“å‡ºï¼š<code>Found it</code></p>
<p>âš–ï¸ <strong>å¯¹æ¯”å­¦ä¹ ï¼šbreak vs continue</strong></p>




















<table><thead><tr><th>è¯­å¥</th><th>ä½œç”¨</th><th>æœ‰æ ‡ç­¾ç‰ˆæœ¬</th></tr></thead><tbody><tr><td><code>break</code></td><td>å®Œå…¨é€€å‡ºå¾ªç¯</td><td>é€€å‡ºæŒ‡å®šæ ‡ç­¾çš„å¤–å±‚å¾ªç¯</td></tr><tr><td><code>continue</code></td><td>è·³è¿‡æœ¬æ¬¡è¿­ä»£ï¼Œç»§ç»­ä¸‹ä¸€æ¬¡</td><td>è·³è¿‡å¤–å±‚å¾ªç¯çš„æœ¬æ¬¡è¿­ä»£</td></tr></tbody></table>
<h4 data-id="heading-53">return è¯­å¥</h4>
<p><code>return</code> è¯­å¥é€€å‡ºå½“å‰æ–¹æ³•ï¼Œæ§åˆ¶æµè¿”å›åˆ°æ–¹æ³•è¢«è°ƒç”¨çš„åœ°æ–¹ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è¿”å›å€¼</span>
<span class="hljs-keyword">return</span> ++count;

<span class="hljs-comment">// æ— è¿”å›å€¼ï¼ˆvoid æ–¹æ³•ï¼‰</span>
<span class="hljs-keyword">return</span>;
</code></pre>
<p>è¿”å›å€¼çš„æ•°æ®ç±»å‹å¿…é¡»ä¸æ–¹æ³•å£°æ˜çš„è¿”å›ç±»å‹åŒ¹é…ã€‚</p>
<hr/>
<blockquote>
<p>ğŸ“‘ <strong>é€ŸæŸ¥æ‰‹å†Œ</strong></p>
</blockquote>
<p><strong>å˜é‡ç±»å‹</strong></p>






























<table><thead><tr><th>ç±»å‹</th><th>ä½ç½®</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>å®ä¾‹å˜é‡</td><td>ç±»ä¸­ï¼Œæ—  static</td><td>æ¯ä¸ªå¯¹è±¡ä¸€ä»½</td></tr><tr><td>ç±»å˜é‡</td><td>ç±»ä¸­ï¼Œæœ‰ static</td><td>æ‰€æœ‰å¯¹è±¡å…±äº«ä¸€ä»½</td></tr><tr><td>å±€éƒ¨å˜é‡</td><td>æ–¹æ³•ä¸­</td><td>æ–¹æ³•ç»“æŸå³é”€æ¯ï¼Œæ— é»˜è®¤å€¼</td></tr><tr><td>å‚æ•°</td><td>æ–¹æ³•ç­¾å</td><td>è°ƒç”¨æ—¶ä¼ å…¥</td></tr></tbody></table>
<p><strong>åŸºæœ¬æ•°æ®ç±»å‹</strong></p>



























































<table><thead><tr><th>ç±»å‹</th><th>ä½æ•°</th><th>èŒƒå›´</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td>byte</td><td>8</td><td>-128 ~ 127</td><td>0</td></tr><tr><td>short</td><td>16</td><td>-32768 ~ 32767</td><td>0</td></tr><tr><td>int</td><td>32</td><td>-2Â³Â¹ ~ 2Â³Â¹-1</td><td>0</td></tr><tr><td>long</td><td>64</td><td>-2â¶Â³ ~ 2â¶Â³-1</td><td>0L</td></tr><tr><td>float</td><td>32</td><td>IEEE 754</td><td>0.0f</td></tr><tr><td>double</td><td>64</td><td>IEEE 754</td><td>0.0d</td></tr><tr><td>boolean</td><td>-</td><td>true/false</td><td>false</td></tr><tr><td>char</td><td>16</td><td>0 ~ 65535</td><td>'\u0000'</td></tr></tbody></table>
<p><strong>æ§åˆ¶æµè¯­å¥</strong></p>

























<table><thead><tr><th>ç±»å‹</th><th>è¯­å¥</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>å†³ç­–</td><td>if-then, if-then-else, switch</td><td>æ¡ä»¶æ‰§è¡Œ</td></tr><tr><td>å¾ªç¯</td><td>for, while, do-while</td><td>é‡å¤æ‰§è¡Œ</td></tr><tr><td>åˆ†æ”¯</td><td>break, continue, return</td><td>è·³è½¬æ§åˆ¶</td></tr></tbody></table>
<hr/>
<blockquote>
<p>âœï¸ <strong>æ€è€ƒé¢˜</strong></p>
<ol>
<li><code>int[] arr</code> å’Œ <code>int arr[]</code> æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå“ªç§å†™æ³•æ›´æ¨èï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆ <code>float</code> å’Œ <code>double</code> ä¸èƒ½ç”¨äºè´§å¸è®¡ç®—ï¼Ÿåº”è¯¥ç”¨ä»€ä¹ˆæ›¿ä»£ï¼Ÿ</li>
<li><code>switch</code> è¯­å¥ä¸­å¦‚æœæ¼å†™ <code>break</code> ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</li>
<li><code>while(true)</code> å’Œ <code>for(;;)</code> å“ªç§æ— é™å¾ªç¯å†™æ³•æ›´å¥½ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</li>
<li>ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨å¸¦æ ‡ç­¾çš„ <code>break</code> æˆ– <code>continue</code>ï¼Ÿ</li>
</ol>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¾®æœåŠ¡ç®¡ç† | æœåŠ¡æ³¨å†Œä¸å‘ç°]]></title>    <link>https://juejin.cn/post/7602401081265979428</link>    <guid>https://juejin.cn/post/7602401081265979428</guid>    <pubDate>2026-02-03T12:41:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602401081265979428" data-draft-id="7602411521071251475" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¾®æœåŠ¡ç®¡ç† | æœåŠ¡æ³¨å†Œä¸å‘ç°"/> <meta itemprop="keywords" content="å¾®æœåŠ¡,åç«¯"/> <meta itemprop="datePublished" content="2026-02-03T12:41:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç è´¢åŒè¡Œ"/> <meta itemprop="url" content="https://juejin.cn/user/3883950915978728"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¾®æœåŠ¡ç®¡ç† | æœåŠ¡æ³¨å†Œä¸å‘ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3883950915978728/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç è´¢åŒè¡Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T12:41:56.000Z" title="Tue Feb 03 2026 12:41:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€å¥è¯</h2>
<p><strong>åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒæœåŠ¡å¾€å¾€æ˜¯ç‹¬ç«‹è¿è¡Œçš„ï¼Œä»–ä»¬ä¹‹é—´å¦‚ä½•äº¤æµä¹Ÿæ˜¯æœ‰å¾ˆå¤šå¯ä»¥æŒ–æ˜çš„ç‚¹ã€‚è®©æœåŠ¡ä¹‹é—´è‡ªåŠ¨â€œæ‰¾åˆ°å½¼æ­¤â€ï¼Œå¹¶å»ºç«‹è¿æ¥ï¼Œä¸”åœ¨æœåŠ¡å¢åˆ å˜åŒ–æ—¶ï¼Œè¿æ¥å…³ç³»èƒ½è‡ªåŠ¨è°ƒæ•´ï¼Œè¿™å°±æ˜¯æœåŠ¡æ³¨å†Œå’Œå‘ç°è¦åšçš„äº‹æƒ…</strong>ã€‚</p>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆéœ€è¦æœåŠ¡å‘ç°</h2>
<p><strong>ä¾‹å­ 1ï¼šç½‘å…³æ‰¾ç™»å½•æœ</strong></p>
<ul>
<li>ç™»å½•æœå¯èƒ½å¤šå°ï¼Œåœ°å€ä¹Ÿå¯èƒ½å˜ã€‚</li>
<li>å¦‚æœé é…ç½®æ–‡ä»¶å†™æ­»ï¼Œè¿ç»´ä¸€æ”¹åœ°å€å°±ä¼šå‡ºé”™ã€‚</li>
<li>æœåŠ¡å‘ç°å°±åƒâ€œè‡ªåŠ¨é€šè®¯å½•â€ï¼Œç™»å½•æœä¸Šçº¿å°±è‡ªåŠ¨åŠ å…¥ï¼Œæ‰çº¿å°±è‡ªåŠ¨ç§»é™¤ã€‚</li>
</ul>
<h2 data-id="heading-2">æœåŠ¡å‘ç°è¦åšåˆ°ä»€ä¹ˆ</h2>
<p>ç®€å•ç†è§£å°±æ˜¯ä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li><strong>æ³¨å†Œ</strong>ï¼šæœåŠ¡å®ä¾‹å°†è‡ªèº«èŠ‚ç‚¹ä¿¡æ¯å†™å…¥æ³¨å†Œä¸­å¿ƒï¼ˆä¾‹å¦‚ Zookeeperï¼‰ï¼Œä¹Ÿå°±æ˜¯æœåŠ¡è‡ªå·±æŠŠâ€œæˆ‘æ˜¯è°ã€æˆ‘çš„ç½‘ç»œåœ°å€æ˜¯ä»€ä¹ˆâ€ å†™è¿›å»</li>
<li><strong>å‘ç°</strong>ï¼šè®¢é˜…å¹¶è·å–è‡ªå·±å…³å¿ƒçš„æœåŠ¡èŠ‚ç‚¹ï¼Œå³èƒ½æ‹¿åˆ°â€œæˆ‘å‘ç°äº†å“ªäº›æœåŠ¡ä»¥åŠéœ€è¦è¿æ¥å“ªäº›æœåŠ¡â€</li>
<li><strong>æ›´æ–°</strong>ï¼šæœåŠ¡å˜åŒ–æ—¶è‡ªåŠ¨é€šçŸ¥ï¼Œå˜æ›´ä¸ä»…æœ‰â€œæ¥/èµ°â€ï¼Œè¿˜æœ‰â€œèŠ‚ç‚¹å±æ€§æ›´æ–°â€ï¼ˆæ¯”å¦‚æƒé‡/ç‰ˆæœ¬å˜åŒ–ï¼‰</li>
</ol>
<p><strong>é€šä¿—åœ°è¯´ï¼Œå¯¹äºä¸€ä¸ªæœåŠ¡ï¼š</strong></p>
<ul>
<li><strong>å¯åŠ¨æ—¶å…ˆç»™æˆ‘ä¸€å¼ å…¶ä»–æœåŠ¡çš„å®Œæ•´åå•</strong>ï¼ˆå¿«ç…§ï¼‰</li>
<li><strong>è¿è¡Œä¸­æœ‰æœåŠ¡åŠ å…¥æˆ–ç¦»å¼€å°±é€šçŸ¥æˆ‘</strong>ï¼ˆå¢é‡è®¢é˜…ï¼‰</li>
</ul>
<p>è¿™é‡Œå…¶å®æœ‰ä¸€ä¸ªæ•°æ®çš„ä¸€è‡´æ€§éœ€æ±‚ ï¼šå¯åŠ¨æ—¶éœ€è¦â€œå…¨é‡å¿«ç…§â€ï¼Œè¿è¡Œæ—¶éœ€è¦â€œå¢é‡å˜æ›´â€ï¼Œé¿å…æ¼è¿æˆ–é‡å¤ã€‚</p>
<h2 data-id="heading-3">å®ç°æ–¹æ¡ˆ</h2>
<h3 data-id="heading-4">1) æ³¨å†Œï¼šæœåŠ¡è‡ªå·±å‘Šè¯‰ç³»ç»Ÿâ€œæˆ‘æ˜¯è°â€ï¼Œæˆ‘çš„åœ°å€æ˜¯å¤šå°‘</h3>
<p>æ¯ä¸ªæœåŠ¡å¯åŠ¨åæŠŠä¿¡æ¯å†™è¿›æ³¨å†Œä¸­å¿ƒï¼Œé€šå¸¸å°±æ˜¯ key-value çš„å½¢å¼ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">login.tcp.3</span>Â =&gt;Â <span class="hljs-number">10.1</span>.<span class="hljs-number">2.3</span>:<span class="hljs-number">8001</span>
</code></pre>
<p>è¿™é‡Œï¼Œ<code>login</code> æ˜¯æœåŠ¡ç±»å‹ï¼Œ<code>tcp</code> æ˜¯åœ°å€çš„ç±»å‹ï¼ˆä¹Ÿå¯ä»¥æ˜¯httpï¼‰ï¼Œ<code>3</code> æ˜¯æœåŠ¡çš„ç¼–å·ï¼Œè¿™å¯¹äºæœ‰çŠ¶æ€æœåŠ¡çš„åŒºåˆ†æ¯”è¾ƒé‡è¦ã€‚</p>
<p>å¦‚æœè¦æ›´å¤šä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥å¸¦ä¸Šæƒé‡ã€ç‰ˆæœ¬ã€å…ƒæ•°æ®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-number">10.1</span><span class="hljs-number">.2</span><span class="hljs-number">.3</span>|<span class="hljs-number">8001</span>|<span class="hljs-number">20</span>|v1|<span class="hljs-punctuation">{</span><span class="hljs-attr">"region"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"cn"</span><span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-5">2) å‘ç°ï¼šè·å¾—åˆ«çš„æœåŠ¡çš„åœ°å€ï¼Œå…³æ³¨åœ°å€å˜æ›´</h3>
<p>æœåŠ¡å¯åŠ¨åè®¢é˜…è‡ªå·±å…³å¿ƒçš„ç›®æ ‡ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>Gate å…³å¿ƒ Loginã€Router</li>
<li>Game å…³å¿ƒ Battleã€Router</li>
</ul>
<p>å½“ Gate å¯åŠ¨æ—¶ï¼Œéœ€è¦å…ˆæ‹¿åˆ°Â <strong>å…¨é‡å¿«ç…§</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">snapshot</span>Â =Â [login-<span class="hljs-number">1</span>,Â login-<span class="hljs-number">2</span>,Â login-<span class="hljs-number">3</span>, router-<span class="hljs-number">1</span>, router-<span class="hljs-number">2</span>]
</code></pre>
<p>è¿™äº›æœåŠ¡çš„åœ°å€å¦‚æœå‘ç”Ÿäº†å˜æ›´ï¼Œå¦‚æƒé‡ä» 20 å˜æˆ 0ï¼Œå°±éœ€è¦å…³æ³¨ã€‚</p>
<h3 data-id="heading-6">3) å¢é‡ï¼šæœ‰å˜åŒ–å°±é€šçŸ¥</h3>
<p>å¦‚æœç™»å½•æœæ–°å¢äº†ä¸€å°ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">æ–°å¢:Â login-tcp-4</span>
</code></pre>
<p>è®¢é˜…è€…æ”¶åˆ°äº‹ä»¶åï¼Œåªéœ€è¦åšä¸€ä»¶äº‹ï¼š  <code>å»ºç«‹å’Œ login-tcp-4 çš„è¿æ¥</code></p>
<p>å¦‚æœ login-tcp-2 ä¸‹çº¿ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">åˆ é™¤:Â login-2</span>
</code></pre>
<p>è®¢é˜…è€…è‡ªåŠ¨æ–­å¼€å³å¯ã€‚</p>
<h2 data-id="heading-7">ç®€åŒ–æµç¨‹å›¾ï¼ˆMermaidï¼‰</h2>
<p>æˆ‘ä»¬æŠŠä¸Šé¢çš„å‡ ä¸ªè¿‡ç¨‹ä¸²è”èµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªæµç¨‹å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3db1a2589d64661992088e01df545dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB6LSi5ZCM6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770727319&amp;x-signature=nvNalqcuK%2Fd4JNIwYf%2FFW3mi8hw%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-8">æ›´æ·±å…¥çš„ç‚¹</h2>
<ol>
<li>åœ¨ç°ä»£ kubernetes äº‘éƒ¨ç½²ç››è¡Œçš„å½“ä¸‹ï¼ŒæœåŠ¡æ³¨å†Œå’Œå‘ç°å¾€å¾€å·²ç»æ”¯æŒï¼Œä½†æ˜¯å¦‚æœéœ€è¦è‡ªå·±æ¥æ›´ç»†ç²’åº¦æ›´æ·±åº¦çš„å®šåˆ¶å’Œæ§åˆ¶è·¯ç”±ï¼Œè‡ªå·±å®ç°ä¸€å¥—æœåŠ¡æ³¨å†Œå’Œå‘ç°æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼›</li>
<li>å¦‚æœæ˜¯ kubernetes éƒ¨ç½²ï¼ŒæœåŠ¡æ³¨å†Œçš„åœ°å€ä¸€èˆ¬æ˜¯ DNS åŸŸåï¼Œå› ä¸ºæœåŠ¡æœ¬èº«çš„åœ°å€æ˜¯ä¼šåŠ¨æ€å˜åŒ–çš„ï¼›</li>
<li>åœ¨å¾ˆå¤šå¼‚æ„çš„ç³»ç»Ÿä¸­ï¼Œå¾€å¾€ç”±ä¸åŒçš„è¯­è¨€æ¥å®ç°ä¸åŒçš„æœåŠ¡ï¼Œä¸ºäº†é¿å…å®ç°å¤šå¥—æœåŠ¡æ³¨å†Œå’Œå‘ç°ï¼Œå¢åŠ ç»´æŠ¤æˆæœ¬ï¼Œå¯ä»¥å°†å…¶æŠ½è±¡æˆagent æœåŠ¡ï¼ˆä»¥sidecarçš„å½¢å¼éƒ¨ç½²ï¼‰ï¼Œä½¿ç”¨æ–¹ç”¨ gRPC è¿™ç§è§£è€¦çš„åè®®å½¢å¼ï¼Œå’Œ agent é€šä¿¡ã€‚</li>
</ol>
<h2 data-id="heading-9">æ€»ç»“</h2>
<ul>
<li>æœåŠ¡æ³¨å†Œå’Œå‘ç°åšçš„æ˜¯ä¸€å¥—â€œè‡ªåŠ¨é€šè®¯å½• + å®æ—¶å˜æ›´æé†’â€</li>
<li>å¿«ç…§è§£å†³â€œå¯åŠ¨æ—¶çœ‹åˆ°å…¨é‡â€</li>
<li>å¢é‡è§£å†³â€œè¿è¡Œä¸­çœ‹åˆ°å˜åŒ–â€</li>
<li>å¯ä»¥æŒ–æ˜æ›´é€‚åˆk8såŠå¼‚æ„ç³»ç»Ÿçš„å®ç°æ–¹å¼</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¥ä¸€èµ·å®ç°ä¸€ä¸ªæŒ‰é’®æ•ˆæœ]]></title>    <link>https://juejin.cn/post/7602579671476142099</link>    <guid>https://juejin.cn/post/7602579671476142099</guid>    <pubDate>2026-02-04T09:57:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602579671476142099" data-draft-id="7602579671476043795" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¥ä¸€èµ·å®ç°ä¸€ä¸ªæŒ‰é’®æ•ˆæœ"/> <meta itemprop="keywords" content="Flutter,Android"/> <meta itemprop="datePublished" content="2026-02-04T09:57:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç«æŸ´å°±æ˜¯æˆ‘"/> <meta itemprop="url" content="https://juejin.cn/user/272334614705575"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¥ä¸€èµ·å®ç°ä¸€ä¸ªæŒ‰é’®æ•ˆæœ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/272334614705575/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç«æŸ´å°±æ˜¯æˆ‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T09:57:15.000Z" title="Wed Feb 04 2026 09:57:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdbbf3423beb43edb667935812c1d84e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Gr5p-05bCx5piv5oiR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803834&amp;x-signature=xzpDfRhn9tXwwIWxOlEXb0vljCI%3D" alt="image.png" width="70%" loading="lazy"/>
<p>æ•ˆæœç‚¹ï¼š1 æŒ‰é’®å¤–éƒ¨æ˜¯ç™½è‰²ï¼Œé‡Œé¢çš„é¢œè‰²åœ¨å››å‘¨åƒæ˜¯æ¸å˜å‡å¼±</p>
<p>2 æœ‰é˜´å½±å¹¶ä¸”é˜´å½±çœ‹ç€å¾ˆè‡ªç„¶ï¼ˆç›¸å¯¹äºç›´æ¥è®¾ç½®BoxShadowï¼‰</p>
<p>å®ç°çš„æ•ˆæœ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f36ea769d4e348bc856be7b27eceed9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Gr5p-05bCx5piv5oiR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803834&amp;x-signature=sAPgK9BD0%2BgfXeuVbXECHM0w7QA%3D" alt="image.png" loading="lazy"/></p>
<p>æ²¡æœ‰ç›´æ¥ç”¨BoxShadow,BoxShadowä¹Ÿæ˜¯ç”¨..maskFilter = MaskFilter.blur(BlurStyle.normal, 10); api æ¥å®ç°çš„é˜´å½±ï¼Œæˆ‘è¿™é‡Œå°±æ˜¯ç›´æ¥ç”¨çš„è¿™ä¸ªapiè¿›è¡Œç»˜åˆ¶ã€‚</p>
<p>ä¸»è¦ç»˜åˆ¶ä»£ç </p>
<pre><code class="hljs language-js" lang="js">      
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ShadowPainter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">CustomPainter</span> {
  @override
  <span class="hljs-keyword">void</span> <span class="hljs-title function_">paint</span>(<span class="hljs-params">Canvas canvas, Size size</span>) {
<span class="hljs-comment">// 1. åˆ›å»ºç»˜åˆ¶è·¯å¾„ï¼ˆåœ†å½¢ï¼‰</span>
    <span class="hljs-keyword">var</span> rect = <span class="hljs-title class_">RRect</span>.<span class="hljs-title function_">fromLTRBR</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, size.<span class="hljs-property">width</span>, size.<span class="hljs-property">height</span>, <span class="hljs-title class_">Radius</span>.<span class="hljs-title function_">circular</span>(size.<span class="hljs-property">height</span>/<span class="hljs-number">2</span>));
    final path = <span class="hljs-title class_">Path</span>()..<span class="hljs-title function_">addRRect</span>(rect);
    final path2 = <span class="hljs-title class_">Path</span>()..<span class="hljs-title function_">addRRect</span>(rect.<span class="hljs-title function_">deflate</span>(<span class="hljs-number">5</span>));

    final path3 = <span class="hljs-title class_">Path</span>()..<span class="hljs-title function_">addRRect</span>(rect.<span class="hljs-title function_">deflate</span>(<span class="hljs-number">10</span>));

    <span class="hljs-comment">//ç»˜åˆ¶åº•éƒ¨é˜´å½±</span>
    <span class="hljs-comment">//path3 æ¯”rect å° è¿™æ ·è®¾ç½®outeræ¨¡å¼çš„æ—¶å€™å¤–æ•£çš„å…‰è¶…å‡ºç»„ä»¶çš„éƒ¨åˆ†å°±çœ‹ç€å¾ˆæŸ”å’Œ</span>
    final <span class="hljs-title class_">Paint</span> paint3 = <span class="hljs-title class_">Paint</span>()
      ..<span class="hljs-property">color</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-title function_">fromRGBO</span>(<span class="hljs-number">249</span>, <span class="hljs-number">142</span>, <span class="hljs-number">119</span>, <span class="hljs-number">1</span>)
      ..<span class="hljs-property">maskFilter</span> = <span class="hljs-title class_">MaskFilter</span>.<span class="hljs-title function_">blur</span>(<span class="hljs-title class_">BlurStyle</span>.<span class="hljs-property">outer</span>, <span class="hljs-number">30</span>);
    canvas.<span class="hljs-title function_">drawPath</span>(path3, paint3);

    <span class="hljs-comment">//ç»˜åˆ¶ç™½è‰²åº•è‰²</span>
    final <span class="hljs-title class_">Paint</span> paint = <span class="hljs-title class_">Paint</span>()
      ..<span class="hljs-property">color</span> = <span class="hljs-title class_">Colors</span>.<span class="hljs-property">white</span>;
    canvas.<span class="hljs-title function_">drawPath</span>(path, paint);

    <span class="hljs-comment">//ç»˜åˆ¶ä¸­å¿ƒé¢œè‰² </span>
    <span class="hljs-comment">//å°±å¯ä»¥è®©å››å‘¨çš„é¢œè‰²æ¸å˜</span>
    final <span class="hljs-title class_">Paint</span> paint1 = <span class="hljs-title class_">Paint</span>()
      ..<span class="hljs-property">color</span> = <span class="hljs-title class_">Color</span>.<span class="hljs-title function_">fromRGBO</span>(<span class="hljs-number">249</span>, <span class="hljs-number">142</span>, <span class="hljs-number">119</span>, <span class="hljs-number">1</span>)
      ..<span class="hljs-property">maskFilter</span> = <span class="hljs-title class_">MaskFilter</span>.<span class="hljs-title function_">blur</span>(<span class="hljs-title class_">BlurStyle</span>.<span class="hljs-property">normal</span>, <span class="hljs-number">10</span>);

    canvas.<span class="hljs-title function_">drawPath</span>(path2, paint1);
  }

  @override
  bool <span class="hljs-title function_">shouldRepaint</span>(covariant <span class="hljs-title class_">CustomPainter</span> oldDelegate) =&gt; <span class="hljs-literal">false</span>;
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Reactå­¦ä¹ -è™šæ‹ŸDOM]]></title>    <link>https://juejin.cn/post/7602576205477511183</link>    <guid>https://juejin.cn/post/7602576205477511183</guid>    <pubDate>2026-02-04T09:24:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602576205477511183" data-draft-id="7602800677710839842" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Reactå­¦ä¹ -è™šæ‹ŸDOM"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2026-02-04T09:24:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="web_bee"/> <meta itemprop="url" content="https://juejin.cn/user/428665740231"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Reactå­¦ä¹ -è™šæ‹ŸDOM
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/428665740231/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    web_bee
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T09:24:51.000Z" title="Wed Feb 04 2026 09:24:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è™šæ‹ŸDOM</h2>
<h3 data-id="heading-1">ä¸€ã€ä»€ä¹ˆæ˜¯è™šæ‹Ÿ DOMï¼Ÿ</h3>
<p>è™šæ‹Ÿ DOM æ˜¯å¯¹æµè§ˆå™¨ä¸­<strong>çœŸå® DOMï¼ˆReal DOMï¼‰</strong> çš„ä¸€ç§è½»é‡çº§ JavaScript å¯¹è±¡è¡¨ç¤ºã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª<strong>çº¯ JavaScript å¯¹è±¡æ ‘</strong>ï¼Œç»“æ„ä¸çœŸå® DOM æ ‘ä¸€è‡´ï¼Œä½†ä¸ç›´æ¥æ“ä½œæµè§ˆå™¨çš„æ¸²æŸ“å¼•æ“ã€‚</p>
<p>ä¾‹å¦‚ï¼ŒçœŸå® DOM å…ƒç´ ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"container"</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Hello, world!<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>å¯¹åº”çš„è™šæ‹Ÿ DOM å¯èƒ½æ˜¯ï¼š</p>
<pre><code class="hljs language-css" lang="css">{
 Â type: <span class="hljs-string">'div'</span>,
 Â props: {
 Â  Â id: <span class="hljs-string">'container'</span>,
 Â  Â children: [
 Â  Â   {
 Â  Â  Â  Â type: <span class="hljs-string">'p'</span>,
 Â  Â  Â  Â props: {
 Â  Â  Â  Â  Â children: <span class="hljs-string">'Hello, world!'</span>
 Â  Â  Â   }
 Â  Â   }
 Â   ]
  }
}
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼šReact å†…éƒ¨ä½¿ç”¨çš„æ˜¯ <strong>Fiber èŠ‚ç‚¹</strong>ï¼ˆè‡ª React 16 èµ·ï¼‰ï¼Œå®ƒæ˜¯å¯¹è™šæ‹Ÿ DOM çš„è¿›ä¸€æ­¥æŠ½è±¡ï¼Œæ”¯æŒå¢é‡æ¸²æŸ“ã€ä¼˜å…ˆçº§è°ƒåº¦ç­‰é«˜çº§ç‰¹æ€§ï¼Œä½†å¼€å‘è€…é€šå¸¸ä»å°†å…¶ç»Ÿç§°ä¸ºâ€œè™šæ‹Ÿ DOMâ€ã€‚</p>
</blockquote>
<p>JSX ç¼–è¯‘ä¸º è™šæ‹ŸDOM</p>
<blockquote>
<p>åœ¨ React ä¸­ï¼Œ<strong>JSX ä»£ç ä¼šè¢«ç¼–è¯‘ä¸ºå¯¹ <code>React.createElement()</code> çš„å‡½æ•°è°ƒç”¨</strong>ï¼Œè€Œ <code>React.createElement()</code> çš„è¿”å›å€¼å°±æ˜¯ <strong>è™šæ‹Ÿ DOMï¼ˆå³ React å…ƒç´ ï¼‰</strong> ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸»è¦ä¾èµ– <strong>æ„å»ºå·¥å…·ï¼ˆå¦‚ Babelã€TypeScriptï¼‰çš„ç¼–è¯‘è½¬æ¢</strong>ã€‚</p>
<p><strong>JSXæœ¬è´¨ä¸Šæ˜¯Â <code>React.createElement()</code>Â å‡½æ•°è°ƒç”¨çš„è¯­æ³•ç³–</strong></p>
<p>JSX çº¦ç­‰äºï¼ˆ=ï¼‰ <code>React.createElement()</code> <strong>è°ƒç”¨</strong></p>
</blockquote>
<h3 data-id="heading-2">äºŒã€React 16ä¹‹å‰ï¼Œè™šæ‹Ÿ DOM çš„å·¥ä½œæµç¨‹</h3>
<p>React ä½¿ç”¨è™šæ‹Ÿ DOM å®ç°é«˜æ•ˆçš„ UI æ›´æ–°ï¼Œä¸»è¦åˆ†ä¸ºä¸‰æ­¥ï¼š</p>
<h4 data-id="heading-3"><strong>1.</strong> Render é˜¶æ®µï¼šç”Ÿæˆæ–°çš„è™šæ‹Ÿ DOM æ ‘</h4>
<ul>
<li>å½“ç»„ä»¶çŠ¶æ€ï¼ˆstateï¼‰æˆ–å±æ€§ï¼ˆpropsï¼‰å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒReact ä¼šé‡æ–°è°ƒç”¨ç»„ä»¶çš„ <code>render()</code> æ–¹æ³•ï¼ˆå‡½æ•°ç»„ä»¶å³é‡æ–°æ‰§è¡Œå‡½æ•°ï¼‰ã€‚</li>
<li>ç”Ÿæˆä¸€æ£µ<strong>å…¨æ–°çš„è™šæ‹Ÿ DOM æ ‘</strong>ï¼ˆç§°ä¸ºâ€œæ–° VDOMâ€ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-4"><strong>2.</strong> Reconciliationï¼ˆåè°ƒï¼‰é˜¶æ®µï¼šDiff ç®—æ³•æ¯”å¯¹æ–°æ—§è™šæ‹Ÿ DOM</h4>
<ul>
<li>React å°†æ–° VDOM ä¸ä¸Šä¸€æ¬¡æ¸²æŸ“ä¿å­˜çš„æ—§ VDOM è¿›è¡Œ<strong>å·®å¼‚æ¯”è¾ƒï¼ˆDiffingï¼‰</strong> ã€‚</li>
<li>ä½¿ç”¨é«˜æ•ˆçš„ <strong>å¯å‘å¼ Diff ç®—æ³•</strong>ï¼ˆå¦‚åŸºäº key çš„åˆ—è¡¨ diffã€åŒå±‚æ¯”è¾ƒç­‰ï¼‰ï¼Œæ‰¾å‡ºæœ€å°å˜æ›´é›†ã€‚</li>
<li>è¿™ä¸ªè¿‡ç¨‹å‘ç”Ÿåœ¨å†…å­˜ä¸­ï¼Œé€Ÿåº¦æå¿«ã€‚</li>
</ul>
<h4 data-id="heading-5"><strong>3.</strong> Commit é˜¶æ®µï¼šæ‰¹é‡æ›´æ–°çœŸå® DOM</h4>
<ul>
<li>å°†è®¡ç®—å‡ºçš„å·®å¼‚ï¼ˆpatchesï¼‰<strong>æ‰¹é‡åº”ç”¨åˆ°çœŸå® DOM</strong> ä¸Šã€‚</li>
<li>é¿å…é¢‘ç¹ã€é›¶æ•£åœ°æ“ä½œçœŸå® DOMï¼Œä»è€Œå‡å°‘é‡æ’ï¼ˆreflowï¼‰å’Œé‡ç»˜ï¼ˆrepaintï¼‰ã€‚</li>
</ul>
<blockquote>
<p>ğŸ’¡ æ•´ä¸ªè¿‡ç¨‹å¯æ¦‚æ‹¬ä¸ºï¼š<strong>State/Props å˜åŒ– â†’ ç”Ÿæˆæ–° VDOM â†’ Diff æ–°æ—§ VDOM â†’ æ‰¹é‡æ›´æ–°çœŸå® DOM</strong></p>
</blockquote>
<h3 data-id="heading-6">ä¸‰ã€ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿ DOMï¼Ÿ</h3>
<ol>
<li>
<p><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼š</p>
<p><strong>çœŸå® DOM æ“ä½œçš„ä»£ä»·é«˜ï¼š</strong></p>
<ul>
<li>æµè§ˆå™¨çš„ DOM æ“ä½œæ¶‰åŠå¸ƒå±€ï¼ˆLayoutï¼‰ã€ç»˜åˆ¶ï¼ˆPaintï¼‰ã€åˆæˆï¼ˆCompositeï¼‰ç­‰å¤šä¸ªæ˜‚è´µæ­¥éª¤ã€‚</li>
<li>é¢‘ç¹æ“ä½œä¼šå¯¼è‡´é¡µé¢å¡é¡¿ã€‚</li>
</ul>
<p>åœ¨ JS å±‚é¢åš diffï¼Œé¿å…ä¸å¿…è¦çš„ DOM æ“ä½œ</p>
</li>
<li>
<p><strong>è·¨å¹³å°èƒ½åŠ›</strong>ï¼šè™šæ‹Ÿ DOM æ˜¯å¹³å°æ— å…³çš„ï¼Œå¯ç”¨äº Webã€React Nativeï¼ˆæ˜ å°„åˆ°åŸç”Ÿç»„ä»¶ï¼‰ç­‰</p>
</li>
<li>
<p><strong>å£°æ˜å¼ç¼–ç¨‹</strong>ï¼šå¼€å‘è€…åªéœ€æè¿°â€œUI åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­â€ï¼Œæ— éœ€æ‰‹åŠ¨ç®¡ç† DOM æ›´æ–°é€»è¾‘</p>
</li>
</ol>
<h3 data-id="heading-7"><strong>å››ã€è™šæ‹Ÿ DOM çš„å±€é™æ€§</strong></h3>
<ul>
<li><strong>å†…å­˜å¼€é”€</strong>ï¼šéœ€è¦ç»´æŠ¤ä¸¤æ£µ DOM æ ‘ï¼ˆæ–° + æ—§ï¼‰ï¼Œåœ¨å¤§å‹åº”ç”¨ä¸­å¯èƒ½å ç”¨è¾ƒå¤šå†…å­˜ã€‚</li>
<li><strong>å¹¶éæ€»æ˜¯æœ€å¿«</strong>ï¼šå¯¹äºç®€å•ã€é™æ€çš„ UIï¼Œç›´æ¥æ“ä½œ DOM å¯èƒ½æ›´å¿«ï¼ˆå¦‚ jQueryï¼‰ã€‚</li>
</ul>
<blockquote>
<p>âš ï¸ æç¤ºï¼šåˆç†ä½¿ç”¨ <code>key</code>ï¼ˆå°¤å…¶æ˜¯åˆ—è¡¨æ¸²æŸ“ï¼‰å¯æå¤§æå‡ diff æ•ˆç‡ã€‚</p>
</blockquote>
<h2 data-id="heading-8">React 16+ çš„ Fiber æ¶æ„ï¼šå…¨æ–°å·¥ä½œæµ</h2>
<p>Fiber å¼•å…¥åï¼Œæ•´ä¸ªåè°ƒè¿‡ç¨‹è¢«é‡æ„ä¸ºï¼š</p>
<ol>
<li>
<p><strong>JSX â†’ React å…ƒç´ ï¼ˆè¾“å…¥ä¸å˜ï¼‰</strong></p>
</li>
<li>
<p>ä½†åè°ƒè¿‡ç¨‹ä¸å†ç›´æ¥æ“ä½œ React å…ƒç´ æ ‘ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>æ„å»º/æ›´æ–° <strong>Fiber èŠ‚ç‚¹æ ‘</strong>ï¼ˆå†…éƒ¨å·¥ä½œå•å…ƒï¼‰</li>
<li>ä½¿ç”¨Â <strong>å¯ä¸­æ–­çš„å¾ªç¯ï¼ˆè€Œéé€’å½’ï¼‰</strong> Â éå† Fiber æ ‘</li>
<li>æ”¯æŒ <strong>æ—¶é—´åˆ‡ç‰‡ï¼ˆTime Slicingï¼‰</strong> ï¼šæ¯æ‰§è¡Œä¸€å°æ®µå·¥ä½œå°±æ£€æŸ¥æ˜¯å¦éœ€è¦è®©å‡ºä¸»çº¿ç¨‹</li>
<li>åŸºäº <strong>ä¼˜å…ˆçº§è°ƒåº¦ï¼ˆSchedulerï¼‰</strong> å†³å®šå“ªäº›æ›´æ–°å…ˆæ‰§è¡Œ</li>
</ul>
</li>
<li>
<p>æœ€ç»ˆåœ¨ <strong>Commit é˜¶æ®µ</strong> æ‰¹é‡æ›´æ–°çœŸå® DOM</p>
</li>
</ol>
<p><strong>å…³é”®å˜åŒ–ï¼š</strong></p>



































<table><thead><tr><th>æ–¹é¢</th><th>React 15ï¼ˆæ—§ï¼‰</th><th>React 16+ï¼ˆFiberï¼‰</th></tr></thead><tbody><tr><td>åè°ƒç®—æ³•</td><td>é€’å½’ diff è™šæ‹Ÿ DOM æ ‘</td><td>è¿­ä»£å¼å¤„ç† Fiber æ ‘</td></tr><tr><td>æ‰§è¡Œæ–¹å¼</td><td>åŒæ­¥ã€ä¸å¯ä¸­æ–­</td><td>å¼‚æ­¥ã€å¯ä¸­æ–­ã€å¯æ¢å¤</td></tr><tr><td>æ•°æ®ç»“æ„</td><td>ç®€å•çš„ React å…ƒç´ </td><td>å¤æ‚çš„ Fiber èŠ‚ç‚¹ï¼ˆå¸¦çŠ¶æ€ã€å‰¯ä½œç”¨ã€æŒ‡é’ˆç­‰ï¼‰</td></tr><tr><td>æ¸²æŸ“æ¨¡å‹</td><td>ç«‹å³æ¸²æŸ“</td><td>æ”¯æŒå¹¶å‘æ¸²æŸ“ï¼ˆConcurrent Renderingï¼‰</td></tr><tr><td>æ€§èƒ½ç“¶é¢ˆ</td><td>å¤§æ›´æ–°å¡æ­» UI</td><td>å¯æ‹†åˆ†ä»»åŠ¡ï¼Œä¿æŒå“åº”æ€§</td></tr></tbody></table>
<blockquote>
<p>âœ… <strong>Fiber å®Œå…¨æ¥ç®¡äº†â€œå¦‚ä½•ä»è™šæ‹Ÿæè¿°ç”ŸæˆçœŸå® UIâ€çš„å…¨è¿‡ç¨‹</strong>ã€‚</p>
</blockquote>
<h3 data-id="heading-9">ä¸€ã€Fiber æ¶æ„ä¸‹çš„å·¥ä½œæµç¨‹ï¼ˆæ¸²æŸ“å¾ªç¯ï¼‰</h3>
<p>Fiber å°†æ¸²æŸ“è¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªä¸»è¦é˜¶æ®µï¼š</p>
<h4 data-id="heading-10">é˜¶æ®µ 1ï¼šReconciliationï¼ˆåè°ƒé˜¶æ®µï¼‰</h4>
<ul>
<li>
<p><strong>ç›®æ ‡</strong>ï¼šå¯¹æ¯”æ–°æ—§ UIï¼Œè®¡ç®—å‡ºéœ€è¦æ‰§è¡Œçš„å˜æ›´ã€‚</p>
</li>
<li>
<p><strong>å¯ä¸­æ–­ã€å¯æ¢å¤ã€æ”¯æŒä¼˜å…ˆçº§</strong>ã€‚</p>
</li>
<li>
<p>åˆ†ä¸ºä¸¤ä¸ªå­æ ‘ï¼š</p>
<ul>
<li><strong>current tree</strong>ï¼šå½“å‰å·²æäº¤åˆ°å±å¹•çš„ Fiber æ ‘ã€‚</li>
<li><strong>work-in-progress (WIP) tree</strong>ï¼šæ­£åœ¨æ„å»ºçš„æ–° Fiber æ ‘ã€‚</li>
</ul>
</li>
</ul>
<h5 data-id="heading-11"><strong>å…³é”®æ­¥éª¤ï¼š</strong></h5>
<ol>
<li>
<p><strong>ä»æ ¹å¼€å§‹éå† JSX ç”Ÿæˆçš„ React å…ƒç´ æ ‘</strong>ã€‚</p>
</li>
<li>
<p><strong>ä¸ºæ¯ä¸ªå…ƒç´ åˆ›å»ºæˆ–å¤ç”¨ Fiber èŠ‚ç‚¹</strong>ï¼ˆé€šè¿‡ <code>beginWork</code>ï¼‰ã€‚</p>
</li>
<li>
<p><strong>æ‰§è¡Œ diffï¼ˆåè°ƒï¼‰</strong> ï¼š</p>
<ul>
<li>æ¯”è¾ƒ <code>type</code> å’Œ <code>key</code>ã€‚</li>
<li>è‹¥ç›¸åŒï¼Œå¤ç”¨ç°æœ‰ Fiberï¼ˆé¿å…é‡å»º DOMï¼‰ã€‚</li>
<li>è‹¥ä¸åŒï¼Œæ ‡è®°ä¸ºåˆ é™¤æˆ–æ›¿æ¢ã€‚</li>
</ul>
</li>
<li>
<p><strong>å®Œæˆå­æ ‘åï¼Œæ‰§è¡Œ <code>completeWork</code></strong>ï¼š</p>
<ul>
<li>åˆ›å»º/æ›´æ–° DOM èŠ‚ç‚¹ï¼ˆä½†ä¸æŒ‚è½½ï¼‰ã€‚</li>
<li>æ”¶é›†å‰¯ä½œç”¨ï¼ˆå¦‚éœ€è¦æ’å…¥ã€æ›´æ–°ã€åˆ é™¤çš„èŠ‚ç‚¹ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p>æ•´ä¸ª WIP æ ‘æ„å»ºå®Œæˆåï¼Œè¿›å…¥ Commit é˜¶æ®µã€‚</p>
</li>
</ol>
<blockquote>
<p>ğŸ”„ æ­¤é˜¶æ®µè¿è¡Œåœ¨ <strong>render phase</strong>ï¼Œå¯èƒ½è¢«é«˜ä¼˜å…ˆçº§ä»»åŠ¡ï¼ˆå¦‚ç”¨æˆ·è¾“å…¥ï¼‰æ‰“æ–­å¹¶ä¸¢å¼ƒã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-12">é˜¶æ®µ 2ï¼šCommitï¼ˆæäº¤é˜¶æ®µï¼‰</h4>
<ul>
<li>
<p><strong>ç›®æ ‡</strong>ï¼šå°†å˜æ›´åº”ç”¨åˆ°çœŸå® DOMã€‚</p>
</li>
<li>
<p><strong>ä¸å¯ä¸­æ–­</strong>ï¼ˆå¿…é¡»ä¸€æ¬¡æ€§å®Œæˆï¼Œå¦åˆ™ UI ä¸ä¸€è‡´ï¼‰ã€‚</p>
</li>
<li>
<p>åˆ†ä¸ºä¸‰ä¸ªå­é˜¶æ®µï¼š</p>
<ol>
<li><strong>before mutation</strong>ï¼šè°ƒç”¨ <code>getSnapshotBeforeUpdate</code> ç­‰ã€‚</li>
<li><strong>mutation</strong>ï¼šæ‰§è¡Œ DOM æ“ä½œï¼ˆæ’å…¥ã€æ›´æ–°ã€åˆ é™¤ï¼‰ã€‚</li>
<li><strong>layout</strong>ï¼šè°ƒç”¨ <code>useLayoutEffect</code>ã€<code>componentDidMount/Update</code>ã€‚</li>
</ol>
</li>
</ul>
<blockquote>
<p>âœ… æ­¤é˜¶æ®µæ“ä½œçš„æ˜¯ <strong>çœŸå® DOM</strong>ï¼Œå¹¶è§¦å‘ç”Ÿå‘½å‘¨æœŸå’Œå‰¯ä½œç”¨ã€‚</p>
</blockquote>
<h3 data-id="heading-13">äºŒã€é‚£â€œè™šæ‹Ÿ DOMâ€è¿˜å­˜åœ¨å—ï¼Ÿ</h3>
<p><strong>å­˜åœ¨ï¼Œä½†è§’è‰²å˜äº†</strong>ï¼š</p>
<ul>
<li>
<p><strong>React å…ƒç´ ï¼ˆå³ JSX ç¼–è¯‘ç»“æœï¼‰ä»ç„¶æ˜¯â€œè™šæ‹Ÿ DOMâ€çš„è¡¨ç°å½¢å¼</strong>ï¼Œä½œä¸º<strong>è¾“å…¥æè¿°</strong>ã€‚</p>
</li>
<li>
<p>ä½† <strong>åè°ƒå’Œ diff ä¸å†ç›´æ¥åœ¨ React å…ƒç´ ä¸Šè¿›è¡Œ</strong>ï¼Œè€Œæ˜¯åœ¨ <strong>Fiber èŠ‚ç‚¹</strong> ä¸Šè¿›è¡Œã€‚</p>
</li>
<li>
<p>Fiber èŠ‚ç‚¹å¯ä»¥çœ‹ä½œæ˜¯ <strong>å¢å¼ºç‰ˆã€å¯å·¥ä½œçš„è™šæ‹Ÿ DOM</strong>ï¼Œå®ƒï¼š</p>
<ul>
<li>æŒæœ‰ React å…ƒç´ çš„ä¿¡æ¯ï¼ˆ<code>type</code>, <code>props</code>ï¼‰</li>
<li>è¿˜åŒ…å«çŠ¶æ€ï¼ˆ<code>memoizedState</code>ï¼‰ã€å‰¯ä½œç”¨ï¼ˆ<code>effectTag</code>ï¼‰ã€çˆ¶å­æŒ‡é’ˆç­‰</li>
<li>æ”¯æŒå¤ç”¨ã€ä¸­æ–­ã€ä¼˜å…ˆçº§ç­‰</li>
</ul>
</li>
</ul>
<blockquote>
<p>ğŸ“Œ æ‰€ä»¥ï¼š <strong>â€œè™šæ‹Ÿ DOMâ€ä½œä¸ºæ¦‚å¿µä»ç„¶å­˜åœ¨ï¼Œä½†å…¶å®ç°å’Œå·¥ä½œæœºåˆ¶å·²è¢« Fiber æ¶æ„å…¨é¢è¦†ç›–å’Œå‡çº§</strong>ã€‚</p>
</blockquote>
<h3 data-id="heading-14">ä¸‰ã€<strong>å¼€å‘è€…æ„ŸçŸ¥çš„å˜åŒ–</strong></h3>
<p>å¯¹å¤§å¤šæ•°å¼€å‘è€…æ¥è¯´ï¼Œ<strong>API å±‚é¢å‡ ä¹æ²¡æœ‰å˜åŒ–</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Hello<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>; <span class="hljs-comment">// å†™æ³•ä¸å˜</span>
}
</code></pre>
<p>ä½†åº•å±‚ï¼š</p>
<ul>
<li>ä¸å†æ˜¯ç®€å•çš„ <code>React.createElement</code> â†’ é€’å½’ diff</li>
<li>è€Œæ˜¯ <code>jsx()</code> â†’ åˆ›å»º Fiber èŠ‚ç‚¹ â†’ åè°ƒ â†’ æäº¤</li>
</ul>
<h3 data-id="heading-15">æ€»ç»“ï¼š</h3>
<p><strong>Fiber æ¶æ„å®Œå…¨è¦†ç›–å¹¶å–ä»£äº† React 15 ä¸­ä¼ ç»Ÿçš„è™šæ‹Ÿ DOM å·¥ä½œæµ</strong>ã€‚</p>
<ul>
<li>å®ƒä¸æ˜¯â€œåœ¨è™šæ‹Ÿ DOM ä¸ŠåŠ äº†ä¸ªè°ƒåº¦å™¨â€ï¼Œè€Œæ˜¯<strong>ç”¨ä¸€å¥—å…¨æ–°çš„ã€åŸºäº Fiber èŠ‚ç‚¹çš„åè°ƒç³»ç»Ÿæ›¿ä»£äº†æ—§çš„é€’å½’ diff æœºåˆ¶</strong>ã€‚</li>
<li>â€œè™šæ‹Ÿ DOMâ€ä½œä¸º<strong>UI æè¿°çš„æŠ½è±¡</strong>ä¾ç„¶å­˜åœ¨ï¼ˆå³ React å…ƒç´ ï¼‰ï¼Œä½†<strong>åè°ƒã€diffã€æ›´æ–°çš„æ‰§è¡Œè½½ä½“å·²å˜ä¸º Fiber æ ‘</strong>ã€‚</li>
<li>è¿™ä¸€å˜é©ä½¿å¾— React èƒ½å¤Ÿæ”¯æŒ<strong>å¹¶å‘æ¸²æŸ“ã€è‡ªåŠ¨æ‰¹å¤„ç†ã€Suspenseã€Transition</strong> ç­‰ç°ä»£ç‰¹æ€§ã€‚</li>
</ul>
<blockquote>
<p>ç®€å•è¯´ï¼š<strong>Fiber æ˜¯æ–°ä¸€ä»£çš„â€œè™šæ‹Ÿ DOM å¼•æ“â€</strong> ï¼Œå®ƒè®© React æµç•…ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨FastMCPæ–°å»ºMCP server å¹¶åœ¨Cursorè°ƒç”¨]]></title>    <link>https://juejin.cn/post/7602463463104921646</link>    <guid>https://juejin.cn/post/7602463463104921646</guid>    <pubDate>2026-02-03T09:21:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602463463104921646" data-draft-id="7602070768963371034" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨FastMCPæ–°å»ºMCP server å¹¶åœ¨Cursorè°ƒç”¨"/> <meta itemprop="keywords" content="Python,MCP,Cursor"/> <meta itemprop="datePublished" content="2026-02-03T09:21:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="gongzemin"/> <meta itemprop="url" content="https://juejin.cn/user/3931509311681192"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨FastMCPæ–°å»ºMCP server å¹¶åœ¨Cursorè°ƒç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3931509311681192/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    gongzemin
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T09:21:03.000Z" title="Tue Feb 03 2026 09:21:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™ç¯‡ç¬”è®°æˆ‘ä»¬è®°å½•: æˆ‘ä»¬ä½¿ç”¨FastMCPæ–°å»ºä¸€ä¸ªMCP server, å¹¶åœ¨Cursor IDEé‡Œè°ƒç”¨çš„è¿‡ç¨‹ã€‚ä¸»è¦åˆ†ä¸º2éƒ¨åˆ†</p>
<ul>
<li>ä½¿ç”¨FastMCPæ–°å»ºä¸€ä¸ªMCP server</li>
<li>åœ¨Cursoré‡Œè°ƒç”¨æˆ‘ä»¬å†™çš„MCP server</li>
</ul>
<p>ä¼šæœ‰ä¸€äº›æ¦‚å¿µï¼Œ<code>MCP</code>ã€<code>FastMCP</code>ã€<code>MCP Hostï¼ˆä¸»æœºï¼‰</code>ã€<code>MCP Clientï¼ˆå®¢æˆ·ç«¯ï¼‰</code>ã€<code>MCP Serverï¼ˆæœåŠ¡ç«¯ï¼‰ï¼‰</code>,è¿˜æœ‰<code>uv</code>pythonçš„æ–°å‹åŒ…ç®¡ç†å·¥å…·ï¼Œ@toolã€@resourceã€@prompt æ˜¯ FastMCPï¼ˆä»¥åŠæ•´ä¸ª MCP åè®®ç”Ÿæ€ï¼‰ä¸­æœ€æ ¸å¿ƒçš„ä¸‰ä¸ªæœåŠ¡å™¨ç«¯è£…é¥°å™¨ï¼Œéœ€è¦äº†è§£ã€‚</p>
<p>æ–‡æ¡£ä¸»è¦ä»‹ç»å®é™…æ“ä½œçš„è¿‡ç¨‹ï¼Œæ²¡å»ä»‹ç»é‚£äº›æ¦‚å¿µï¼ˆæ„Ÿå…´è¶£å¤šæŸ¥ä¸‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io%2Fdocs%2Fgetting-started%2Fintro" target="_blank" title="https://modelcontextprotocol.io/docs/getting-started/intro" ref="nofollow noopener noreferrer">MCPå®˜ç½‘</a>)ï¼Œå¸Œæœ›é€šè¿‡æ“ä½œçš„æˆæœæ¥åè¿‡æ¥ç†è§£ è¿™äº›æ¦‚å¿µï¼Œä¹Ÿæ›´ç”ŸåŠ¨ä¸€ç‚¹ã€‚</p>
<h5 data-id="heading-0">ä½¿ç”¨FastMCPæ–°å»ºä¸€ä¸ªMCP server</h5>
<ul>
<li>ä½¿ç”¨uvæ–°å»ºé¡¹ç›®</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">uv init mcp-server-demo
</code></pre>
<p>ä½¿ç”¨ uv å·¥å…·åˆå§‹åŒ–ä¸€ä¸ªåä¸º mcp-server-demo çš„å…¨æ–° Python é¡¹ç›®ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºé¡¹ç›®ç›®å½•ã€æ ‡å‡†åŒ–çš„é…ç½®æ–‡ä»¶å’ŒåŸºç¡€çš„é¡¹ç›®ç»“æ„ï¼Œæ›¿ä»£ä¼ ç»Ÿçš„æ‰‹åŠ¨åˆ›å»º pyproject.tomlã€è™šæ‹Ÿç¯å¢ƒç­‰æ“ä½œã€‚</p>
<ul>
<li>å®‰è£…FastMcp</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">uv add fastmcp
</code></pre>
<p>å®‰è£…<code>FastMcp</code>ä¾èµ– å¯ä»¥çœ‹åˆ°æˆ‘ç”¨çš„æ˜¯ æœ€æ–°ç¨³å®šç‰ˆPython 3.14.2 å®‰è£…ä¾èµ–åè‡ªåŠ¨åˆ›å»ºäº†è™šæ‹Ÿç¯å¢ƒ, å®‰è£…FastMCPä¼šè‡ªåŠ¨å®‰è£…MCP</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5bb02f9fa17b458e941e5c1ba75ea824~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29uZ3plbWlu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770715262&amp;x-signature=6hhohewMXEIvg1sDf9kPcODp92M%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1d82cb4be0e47f3919972585c8a12f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29uZ3plbWlu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770715262&amp;x-signature=P6TekCKXNLA4T0EcpwdGuVzerHk%3D" alt="image.png" loading="lazy"/></p>
<p>uv ç»™æˆ‘ä»¬åˆå§‹åŒ–çš„é¡¹ç›®ç»“æ„æˆªå›¾</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a12af430af74382bf3f962dedf039b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29uZ3plbWlu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770715262&amp;x-signature=I%2BhjsrOS%2FN%2BwYI4JrElJfSNjjCg%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰“å¼€main.py, å¤åˆ¶å¦‚ä¸‹ä»£ç ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„mcp server ä»£ç äº†</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># server.py æˆ–ä½ çš„ä¸»æ–‡ä»¶</span>
<span class="hljs-keyword">from</span> fastmcp <span class="hljs-keyword">import</span> FastMCP

mcp = FastMCP(<span class="hljs-string">"æ¼”ç¤º ğŸš€"</span>)


<span class="hljs-meta">@mcp.tool()</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">int</span>, b: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:
    <span class="hljs-string">"""å°†ä¸¤ä¸ªæ•°å­—ç›¸åŠ """</span>
    <span class="hljs-keyword">return</span> a + b


<span class="hljs-meta">@mcp.tool()</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span>, style: <span class="hljs-built_in">str</span> = <span class="hljs-string">"friendly"</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""æŒ‰ç…§é€‰æ‹©çš„è¯­æ°”å‘æŸäººé—®å¥½"""</span>
    style_key = (style <span class="hljs-keyword">or</span> <span class="hljs-string">"friendly"</span>).strip().lower()

    <span class="hljs-keyword">if</span> style_key == <span class="hljs-string">"formal"</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{name}</span>ï¼Œæ‚¨å¥½ï¼ç¥æ‚¨ä¸€åˆ‡é¡ºåˆ©ï¼Œå·¥ä½œç”Ÿæ´»çš†å¦‚æ„ã€‚"</span>
    <span class="hljs-keyword">if</span> style_key == <span class="hljs-string">"casual"</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{name}</span>ï¼Œå˜¿ï¼ç¥ä½ ä»Šå¤©å¿ƒæƒ…è¶…å¥½ï¼Œå•¥äº‹éƒ½é¡ºï¼"</span>

    <span class="hljs-comment"># é»˜è®¤ï¼šå‹å¥½é£æ ¼</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{name}</span>ï¼Œä½ å¥½ï¼å¾ˆé«˜å…´è§åˆ°ä½ ï¼Œæ„¿ä½ ä»Šå¤©å¹³å®‰å–œä¹ã€å¿ƒæƒ³äº‹æˆã€‚"</span>


<span class="hljs-meta">@mcp.resource(<span class="hljs-params"><span class="hljs-string">"greeting://{name}"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_greeting</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""è·å–ä¸ªæ€§åŒ–çš„é—®å€™è¯­"""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"ä½ å¥½ï¼Œ<span class="hljs-subst">{name}</span>ï¼"</span>


<span class="hljs-meta">@mcp.prompt()</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">greet_user</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span>, style: <span class="hljs-built_in">str</span> = <span class="hljs-string">"friendly"</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""ç”Ÿæˆé—®å€™æç¤ºè¯"""</span>
    styles = {
        <span class="hljs-string">"friendly"</span>: <span class="hljs-string">"è¯·å†™ä¸€æ®µæ¸©æš–ã€å‹å¥½çš„é—®å€™è¯­"</span>,
        <span class="hljs-string">"formal"</span>: <span class="hljs-string">"è¯·å†™ä¸€æ®µæ­£å¼ã€ä¸“ä¸šçš„é—®å€™è¯­"</span>,
        <span class="hljs-string">"casual"</span>: <span class="hljs-string">"è¯·å†™ä¸€æ®µè½»æ¾ã€éšæ„çš„é—®å€™è¯­"</span>,
    }
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{styles.get(style, styles[<span class="hljs-string">'friendly'</span>])}</span>ï¼Œå¯¹æ–¹åå­—æ˜¯ <span class="hljs-subst">{name}</span>ã€‚"</span>


<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-comment"># mcp.run(transport="streamable-http", json_response=True)</span>
    <span class="hljs-comment"># æˆ–è€…æœ¬åœ°è°ƒè¯•æœ€å¸¸ç”¨ï¼š</span>
    mcp.run(transport=<span class="hljs-string">"stdio"</span>)
</code></pre>
<p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘æœ‰ä¸€ä¸ªtool é—®å€™ï¼Œè¿˜æœ‰ä¸€ä¸ªprompt é—®å€™ï¼Œtoolé—®å€™ä¼šä¸¥æ ¼æŒ‰ç…§æˆ‘çš„ä¼ å‚ã€å®šä¹‰çš„å†…å®¹è¿”å›ï¼Œpromptä¼šç”±å¤§æ¨¡å‹è‡ªç”±å‘æŒ¥ã€‚</p>
<p>æ‰§è¡Œä¸‹é¢å‘½ä»¤</p>
<pre><code class="hljs language-bash" lang="bash">uv run python main.py
</code></pre>
<p>æ˜¯é€šè¿‡ uv å·¥å…·åœ¨é¡¹ç›®çš„è™šæ‹Ÿç¯å¢ƒä¸­æ‰§è¡Œ python main.py å‘½ä»¤ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯ä¿è¯è„šæœ¬è¿è¡Œæ—¶ä½¿ç”¨çš„æ˜¯é¡¹ç›®ä¸“å±çš„ Python è§£é‡Šå™¨å’Œä¾èµ–ç¯å¢ƒï¼Œé¿å…å…¨å±€ç¯å¢ƒçš„ä¾èµ–å†²çªã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c77168a85ec422393249eb5d4367781~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29uZ3plbWlu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770715262&amp;x-signature=IUcECdpWYsCDp48utcqVlUFW5lM%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬çš„FastMCP<br/>
å¯åŠ¨æˆåŠŸï¼šâœ”ï¸<br/>
å½“å‰è¿è¡Œä¸­ï¼šâœ”ï¸ï¼ˆåªè¦ç»ˆç«¯æ²¡å…³é—­ã€æ²¡æŠ¥é”™é€€å‡ºï¼‰<br/>
é€šä¿¡æ–¹å¼ï¼šé€šè¿‡ stdioï¼ˆå‘½ä»¤è¡Œè¾“å…¥è¾“å‡ºï¼‰ï¼Œé€‚åˆæœ¬åœ°å¿«é€Ÿæµ‹è¯•
ç‰ˆæœ¬ï¼šåœ¨ç”¨ 2.14.4ï¼ˆ3.0 è¿˜æ²¡æ­£å¼å‘å¸ƒï¼Œæç¤ºå…ˆ pin &lt; 3 ç‰ˆæœ¬ä»¥ä¿è¯ç”Ÿäº§ç¨³å®šï¼‰</p>
<h5 data-id="heading-1">åœ¨Cursoré‡Œè°ƒç”¨æˆ‘ä»¬å†™çš„MCP server</h5>
<p>Cursor è°ƒç”¨server.pyï¼ˆé‡Œé¢æœ‰ mcp = FastMCP(...) å’Œå„ç§ @tool / @promptï¼‰,
æ‰“å¼€Cursor æ‰¾åˆ°MCP é…ç½®</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/723d2482be844f97baa4d3ab75337ca6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29uZ3plbWlu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770715262&amp;x-signature=cgzFP1EuhYa7940rK9SC9Q8ihy4%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cfa2d2bd3f174c9a943daf1712d792b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29uZ3plbWlu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770715262&amp;x-signature=zbpgyzo9mbk5PrpCcyfuZaIogtQ%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨mcp.jsoné‡Œå†™å¦‚ä¸‹ä»£ç </p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"demo-mcp-local"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Demo MCP (Local uv run)"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"stdio"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"uv"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">"--directory"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"/Users/gongzemin/Documents/playground/mcp-server-demo"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"run"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"main.py"</span>
      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æˆ‘çš„ FastMCP æœ¬åœ°æ¼”ç¤ºæœåŠ¡å™¨ï¼ˆåŒ…å«åŠ æ³•ã€é—®å€™ã€æç¤ºæ¨¡æ¿ç­‰å·¥å…·ï¼‰"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"isActive"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"PYTHONIOENCODING"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"utf-8"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"PYTHONUNBUFFERED"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>çœ‹åˆ°æˆ‘ä»¬è¿™ä¸ªMCPé…ç½®çš„ç¯æ˜¯ç»¿è‰²çš„ å°±è¡¨ç¤ºé…ç½®æˆåŠŸäº†</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52df929c6608489bbcd7332f80d2a3af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29uZ3plbWlu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770715262&amp;x-signature=KxVKrso15ZvvEDMU%2FKPBZW%2BLHjY%3D" alt="image.png" loading="lazy"/></p>
<p>æ–°å»ºä¸€ä¸ªå¯¹è¯æ¡†ï¼Œé€‰æ‹©agentï¼Œæé—®</p>
<pre><code class="hljs language-lua" lang="lua">ä½¿ç”¨demo-mcp-<span class="hljs-keyword">local</span> å‹å¥½çš„æ–¹å¼é—®å€™åˆ˜äº¦è²
</code></pre>
<p>å°±ä¼šè°ƒç”¨æˆ‘ä»¬å†™å¥½çš„mcp-serveré‡Œé¢@tool è¿™ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”èƒ½è¯†åˆ«å‡ºå‚æ•° nameæ˜¯åˆ˜äº¦è² styleæ˜¯å‹å¥½çš„</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@mcp.tool()</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span>, style: <span class="hljs-built_in">str</span> = <span class="hljs-string">"friendly"</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""æŒ‰ç…§é€‰æ‹©çš„è¯­æ°”å‘æŸäººé—®å¥½"""</span>
    style_key = (style <span class="hljs-keyword">or</span> <span class="hljs-string">"friendly"</span>).strip().lower()

    <span class="hljs-keyword">if</span> style_key == <span class="hljs-string">"formal"</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{name}</span>ï¼Œæ‚¨å¥½ï¼ç¥æ‚¨ä¸€åˆ‡é¡ºåˆ©ï¼Œå·¥ä½œç”Ÿæ´»çš†å¦‚æ„ã€‚"</span>
    <span class="hljs-keyword">if</span> style_key == <span class="hljs-string">"casual"</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{name}</span>ï¼Œå˜¿ï¼ç¥ä½ ä»Šå¤©å¿ƒæƒ…è¶…å¥½ï¼Œå•¥äº‹éƒ½é¡ºï¼"</span>

    <span class="hljs-comment"># é»˜è®¤ï¼šå‹å¥½é£æ ¼</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{name}</span>ï¼Œä½ å¥½ï¼å¾ˆé«˜å…´è§åˆ°ä½ ï¼Œæ„¿ä½ ä»Šå¤©å¹³å®‰å–œä¹ã€å¿ƒæƒ³äº‹æˆã€‚"</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b95390e43d14dd0bda7d779a9834786~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29uZ3plbWlu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770715262&amp;x-signature=SrAu2CS0p3puAN7WcxE1fVDxemE%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥æ¥ç€æé—®ï¼Œéƒ½ä¸ç”¨è¯´ä½¿ç”¨demo-mcp-local</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a1ca84d97e14cd081924df021598710~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29uZ3plbWlu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770715262&amp;x-signature=TIJ6hAWmz16hv1x3eSfPDN3W7Yk%3D" alt="image.png" loading="lazy"/></p>
<p>å†è°ƒç”¨ä¸‹æˆ‘ä»¬é‚£ä¸ªæ±‚å’Œå·¥å…·</p>
<pre><code class="hljs language-sql" lang="sql">ç”¨<span class="hljs-keyword">user</span><span class="hljs-operator">-</span>demo<span class="hljs-operator">-</span>mcp<span class="hljs-operator">-</span><span class="hljs-keyword">local</span> è®¡ç®—<span class="hljs-number">1109</span><span class="hljs-operator">+</span><span class="hljs-number">10</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7836ecc22fd4f5d81106a6276da8090~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29uZ3plbWlu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770715262&amp;x-signature=btfB3e3LNZ4AbBTuFhsYN7imqZo%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬å°±æˆåŠŸçš„æ–°å»ºäº†MCP server, å¹¶åœ¨Cursorè°ƒç”¨ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»â€œå›ç­”è€…â€è¿›åŒ–ä¸ºâ€œç ”ç©¶å‘˜â€ï¼šå…¨é¢è§£æ Deep Research]]></title>    <link>https://juejin.cn/post/7602216700747956224</link>    <guid>https://juejin.cn/post/7602216700747956224</guid>    <pubDate>2026-02-03T10:20:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602216700747956224" data-draft-id="7602246300453322787" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»â€œå›ç­”è€…â€è¿›åŒ–ä¸ºâ€œç ”ç©¶å‘˜â€ï¼šå…¨é¢è§£æ Deep Research"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-02-03T10:20:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2634854380340008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»â€œå›ç­”è€…â€è¿›åŒ–ä¸ºâ€œç ”ç©¶å‘˜â€ï¼šå…¨é¢è§£æ Deep Research
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2634854380340008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T10:20:58.000Z" title="Tue Feb 03 2026 10:20:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»21åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1ã€èƒŒæ™¯</h2>
<p>åœ¨ AI é—®ä¸–çš„ä¸¤å¹´é‡Œï¼Œæˆ‘ä»¬ä¹ æƒ¯äº†æŠŠå®ƒå½“ä½œä¸€ä¸ªè¶…çº§ç™¾ç§‘å…¨ä¹¦ï¼šå¦‚æœä½ é—®å®ƒä¸€ä¸ªäº‹å®ï¼Œå®ƒä¼šç»™å‡ºç­”æ¡ˆï¼›å¦‚æœä½ ç»™å®ƒä¸€æ®µæ–‡å­—ï¼Œå®ƒä¼šå¸®ä½ æ€»ç»“ã€‚ç„¶è€Œï¼Œå½“æˆ‘ä»¬é¢å¯¹â€œåˆ†ææŸè¡Œä¸šæœªæ¥äº”å¹´çš„è¶‹åŠ¿â€æˆ–â€œæ’°å†™ä¸€ä»½è¯¦å°½çš„æŠ€æœ¯ç«å“è°ƒç ”æŠ¥å‘Šâ€è¿™æ ·å¤æ‚çš„ä»»åŠ¡æ—¶ï¼Œä¼ ç»Ÿçš„ LLM å¾€å¾€æ˜¾å¾—åŠ›ä¸ä»å¿ƒâ€”â€”å®ƒä»¬ç¼ºä¹æ·±åº¦ï¼Œå®¹æ˜“äº§ç”Ÿå¹»è§‰ï¼Œä¸”å—é™äºä¸Šä¸‹æ–‡é•¿åº¦ã€‚</p>
<p>Deep Researchæ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸€ç—›ç‚¹è€Œç”Ÿã€‚å®ƒä¸å†æ˜¯ä¸€ä¸ªç®€å•çš„èŠå¤©æœºå™¨äººï¼Œè€Œæ˜¯å…·å¤‡è‡ªä¸»æ¨ç†èƒ½åŠ›çš„â€œAI ç ”ç©¶å‘˜â€ã€‚</p>
<p>æˆ‘å°†ä¼šåœ¨ä¸‹é¢çš„å†…å®¹ä¸­æ·±å…¥å‰–æ Deep Research çš„è¿è¡Œæœºåˆ¶ã€å…¶èƒŒåçš„å·¥ç¨‹æŒ‘æˆ˜ä»¥åŠå®ƒå¦‚ä½•é€šè¿‡â€œReAct èŒƒå¼â€é‡å¡‘ä¿¡æ¯è·å–çš„æ–¹å¼ã€‚</p>
<h2 data-id="heading-1">2ã€ä»€ä¹ˆæ˜¯ Deep Research</h2>
<p>Deep Research æ˜¯ ä¸“ä¸ºç½‘é¡µæµè§ˆã€æ•°æ®åˆ†æå’Œå¤æ‚ä»»åŠ¡å¤„ç†è€Œä¼˜åŒ–çš„å…¨æ–°åŠŸèƒ½ã€‚ä¸æ™®é€š LLM â€œé—®ä»€ä¹ˆç­”ä»€ä¹ˆâ€çš„è¢«åŠ¨æ¨¡å¼ä¸åŒï¼ŒDeep Research å…·å¤‡<strong>ä¸»åŠ¨è§„åˆ’</strong>å’Œ<strong>æ·±åº¦æ¨ç†</strong>çš„èƒ½åŠ›ã€‚</p>
<p><strong>å®ƒçš„æ ¸å¿ƒç‰¹å¾å¯ä»¥æ¦‚æ‹¬ä¸ºï¼š</strong></p>
<p>1.è‡ªä¸»æ€§ï¼ˆAutonomyï¼‰ï¼š å®ƒå¯ä»¥ä¸€è¾¹æ€è€ƒï¼Œä¸€è¾¹â€œæŸ¥èµ„æ–™â€ã€‚å®ƒä¸ä»…æ˜¯æ£€ç´¢ä¿¡æ¯ï¼Œè¿˜èƒ½è‡ªä¸»åˆ¤æ–­ä¿¡æ¯æ˜¯å¦è¶³å¤Ÿï¼Œå¦‚æœä¸è¶³ï¼Œå®ƒä¼šä¸»åŠ¨è°ƒæ•´æœç´¢å…³é”®è¯å†æ¬¡æ£€ç´¢ã€‚</p>
<p>2.é•¿é“¾æ¡æ¨ç†ï¼ˆLong-chain Reasoningï¼‰ï¼š åŸºäº LLMçš„æ¨ç†èƒ½åŠ›ï¼Œå®ƒèƒ½å°†ä¸€ä¸ªæ¨¡ç³Šçš„åºå¤§éœ€æ±‚æ‹†è§£ä¸ºå¤šä¸ªå­æ­¥éª¤ï¼Œåˆ†é˜¶æ®µæ‰§è¡Œã€‚</p>
<p>3.ä¸“ä¸šæŠ¥å‘Šç”Ÿæˆï¼š æœ€ç»ˆè¾“å‡ºçš„ä¸æ˜¯é›¶æ•£çš„å¯¹è¯ï¼Œè€Œæ˜¯åŒ…å«é€»è¾‘æ‘˜è¦ã€æ¸…æ™°å¼•ç”¨æ¥æºå’Œå®Œæ•´æ–‡æ¡£çš„ä¸“ä¸šçº§ç ”ç©¶æŠ¥å‘Šã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦å®ƒï¼Ÿ</strong> å½“å‰çš„ä¿¡æ¯éœ€æ±‚å¾€å¾€éœ€è¦è·¨è¶Šå¤šä¸ªæ¥æºã€é˜…è¯»å¤§é‡éç»“æ„åŒ–æ•°æ®ã€‚Deep Research å®é™…ä¸Šé™ä½äº†â€œæµ·é‡ä¿¡æ¯æ”¶é›†â€<strong>ä¸</strong>â€œé«˜è´¨é‡æ¨ç†æ•´åˆâ€ä¹‹é—´çš„å£å’ï¼Œå°¤å…¶æ“…é•¿æŒ–æ˜é‚£äº›éœ€è¦æµè§ˆæ•°åä¸ªç½‘é¡µæ‰èƒ½æ‹¼å‡‘å‡ºçš„å°ä¼—æˆ–éç›´è§‚ä¿¡æ¯ã€‚</p>
<h2 data-id="heading-2">3ã€æ ¸å¿ƒåŸç†ï¼šä» DeepSearch åˆ° DeepResearch</h2>
<p>è¦ç†è§£ Deep Researchï¼Œé€šè¿‡ä¸¤ä¸ªå±‚çº§æ¥çœ‹ï¼šåº•å±‚çš„æœç´¢å¾ªç¯ï¼ˆDeepSearchï¼‰å’Œä¸Šå±‚çš„æŠ¥å‘Šæ¡†æ¶ï¼ˆDeepResearchï¼‰ã€‚</p>
<h3 data-id="heading-3">3.1 æ ¸å¿ƒå¼•æ“ï¼šDeepSearchï¼ˆå¾ªç¯ä¸è¿­ä»£ï¼‰</h3>
<p>DeepSearch çš„æœ¬è´¨æ˜¯ä¸€ä¸ªâ€œæœç´¢ - é˜…è¯» - æ¨ç†â€çš„æ— é™å¾ªç¯ã€‚è¿™ä¸æˆ‘ä»¬ç†Ÿæ‚‰çš„ <strong>ReAct Agent</strong> èŒƒå¼é«˜åº¦ç›¸ä¼¼ï¼Œä½†é€šè¿‡å¼ºåŒ–å­¦ä¹ ï¼ˆRLï¼‰ä¸ä»…å­¦ä¼šäº†æ¨ç†ï¼Œæ›´å­¦ä¼šäº†â€œæœç´¢ç­–ç•¥â€ï¼š</p>
<p>â€¢æœç´¢ï¼ˆSearchï¼‰ï¼š æ¢ç´¢äº’è”ç½‘ï¼Œè·å–åŸå§‹ä¿¡æ¯ã€‚</p>
<p>â€¢é˜…è¯»ï¼ˆReadï¼‰ï¼š å¯¹ç‰¹å®šç½‘é¡µè¿›è¡Œè¯¦å°½åˆ†æï¼Œæå–å…³é”®ç‰‡æ®µã€‚</p>
<p>â€¢æ¨ç†ï¼ˆThinkï¼‰ï¼š è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚æ¨¡å‹ä¼šè¯„ä¼°å½“å‰æ”¶é›†åˆ°çš„ä¿¡æ¯æ˜¯å¦è¶³ä»¥å›ç­”é—®é¢˜ã€‚å¦‚æœä¸å¤Ÿï¼Œå®ƒä¼šå†³å®šæ˜¯å°†é—®é¢˜æ‹†è§£ä¸ºæ›´å°çš„å­é—®é¢˜ï¼Œè¿˜æ˜¯å°è¯•å…¨æ–°çš„æœç´¢å…³é”®è¯ã€‚</p>
<p>è¿™ç§  â†’  â†’  â†’  â†’  çš„æ¨¡å¼ï¼Œè®© AI å…·å¤‡äº†â€œè‡ªæˆ‘çº é”™â€å’Œâ€œè¿½æ ¹ç©¶åº•â€çš„èƒ½åŠ›ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e6b379a54fc4d3f9432aaaf2fc12943~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770718858&amp;x-signature=ph%2BGqOLgE3Oj%2BLSW1%2Bvjo%2BNq1Vk%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<h3 data-id="heading-4">3.2 ä¸Šå±‚æ¡†æ¶ï¼šDeepResearchï¼ˆç»“æ„åŒ–è¾“å‡ºï¼‰</h3>
<p>DeepSearch è´Ÿè´£æ‰¾ç­”æ¡ˆï¼Œè€Œ DeepResearch è´Ÿè´£å†™æŠ¥å‘Šã€‚å®ƒåœ¨ DeepSearch çš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€ä¸ª<strong>ç»“æ„åŒ–æ¡†æ¶</strong>ï¼š</p>
<p>1.ç”¨æˆ·æ„å›¾ç†è§£ &amp; ç›®å½•ç”Ÿæˆï¼ˆTOCï¼‰ï¼š æ¥æ”¶æŒ‡ä»¤åï¼Œé¦–å…ˆç”ŸæˆæŠ¥å‘Šç›®å½•ï¼ˆå¦‚å¼•è¨€ã€æ–¹æ³•è®ºã€ç›¸å…³å·¥ä½œã€ç»“è®ºï¼‰ã€‚</p>
<p>2.åˆ†ç« èŠ‚æ‰§è¡Œï¼š ç³»ç»Ÿæ€§åœ°å°† DeepSearch å¼•æ“åº”ç”¨åˆ°æŠ¥å‘Šçš„æ¯ä¸€ä¸ªç« èŠ‚ä¸­ã€‚æ¯ä¸ªç« èŠ‚éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç ”ç©¶ä»»åŠ¡ã€‚</p>
<p>3.å…¨å±€æ•´åˆï¼š æœ€åå°†æ‰€æœ‰ç« èŠ‚å†…å®¹æ•´åˆï¼Œè¿›è¡Œè¿è´¯æ€§æ¶¦è‰²ï¼Œç”Ÿæˆæœ€ç»ˆæŠ¥å‘Šã€‚</p>
<p>æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹é€šå¸¸è€—æ—¶ 5 åˆ° 30 åˆ†é’Ÿï¼Œè¿™åœ¨ä»¥å‰çš„å³æ—¶é—®ç­”ä¸­æ˜¯ä¸å¯æƒ³è±¡çš„ï¼Œä½†å¯¹äºæ·±åº¦ç ”ç©¶æ¥è¯´ï¼Œå´æ˜¯æé«˜çš„æ•ˆç‡ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ea07a0788d040fc9bf941dcaa476acb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770718858&amp;x-signature=Hy4jUl8GoCzFUsA6qwpXQF7N%2F14%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>è®© LLM åœ¨è‡ªèº«æ¨ç†è¿‡ç¨‹ä¸­ä¸æœç´¢å¼•æ“äº¤æ›¿äº¤äº’ã€‚ç”¨æˆ·è¾“å…¥queryï¼ŒLLMäº§ç”ŸTOCï¼Œç„¶åè¿›å…¥å¾ªç¯ï¼šæŸ¥æ‰¾ã€è¯»å–å’Œæ¨ç†ï¼Œç›´åˆ°è¾¾åˆ°ç»“æŸçš„æ¡ä»¶ï¼Œç„¶åå†é€šè¿‡LLMåšæ€»ç»“ï¼Œæœ€ç»ˆç»™ç”¨æˆ·è¾“å‡ºå®Œæ•´çš„ç ”ç©¶æŠ¥å‘Šï¼ˆ â†’  â†’  â†’  â†’  ï¼‰çš„æ¨¡å¼ï¼Œå·²ç»éå¸¸æ¥è¿‘æˆ‘ä»¬ç†Ÿæ‚‰çš„ ReAct Agent èŒƒå¼ã€‚ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œçš„ Agent ä¸ä¾èµ–æç¤ºè¯ï¼Œè€Œæ˜¯é€šè¿‡ RL çœŸæ­£â€œå­¦ä¼šäº†â€æœç´¢ç­–ç•¥ã€‚å®è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª â€œå¸¦æœç´¢èƒ½åŠ›çš„ ReAct Agentâ€ï¼Œåªä¸è¿‡ä¸å†ä¾èµ–æç¤ºè¯å·¥ç¨‹ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡å¼ºåŒ–å­¦ä¹ å­¦ä¼šä½•æ—¶æœç´¢ã€ä½•æ—¶æ¨ç†ã€‚æ³¨æ„ï¼Œå®ƒæ˜¯ä¸»åŠ¨è®¤çŸ¥åˆ°ä½•æ—¶éœ€è¦æ£€ç´¢ä¿¡æ¯ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æ˜¾è‘—çš„ç‰¹ç‚¹å’Œä¸åŒã€‚</p>
<h2 data-id="heading-5">4ã€ å·¥ç¨‹åŒ–æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7fc47547a948485ca5dfb41326ce9987~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770718858&amp;x-signature=xEyHaOumuSZuUPpoLpFHBxsjSuY%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>Deep Research ä¹‹æ‰€ä»¥èƒ½è¶…è¶Šæ™®é€šçš„ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ï¼Œåœ¨äºå®ƒè§£å†³äº†ä¸€ç³»åˆ—æ£˜æ‰‹çš„å·¥ç¨‹é—®é¢˜ã€‚é€šè¿‡å¯¹æŠ€æœ¯ç»†èŠ‚çš„å¤ç›˜ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£åˆ°å…¶èƒŒåçš„æŠ€æœ¯å®ç°ã€‚</p>
<h3 data-id="heading-6">4.1 è§£å†³â€œåƒåœ¾è¿›ï¼Œåƒåœ¾å‡ºâ€ï¼šURL æ’åºä¸æ¸…æ´—</h3>
<h4 data-id="heading-7">4.1.1 é—®é¢˜</h4>
<p>Deep Research åœ¨ä¸€æ¬¡ä»»åŠ¡ä¸­å¯èƒ½æ‰«ææ•°ç™¾ä¸ª URLã€‚å¦‚æœæŠŠè¿™äº›å†…å®¹ä¸€è‚¡è„‘å¡ç»™ LLMï¼Œä¸ä»…æµªè´¹ Tokenï¼Œè¿˜ä¼šå¯¼è‡´æ¨¡å‹â€œçé€‰â€ç­”æ¡ˆã€‚åœ¨æ¯ä¸€æ¬¡ DeepReSearch æ¼«é•¿è¿‡ç¨‹ä¸­ï¼Œä½ å¯èƒ½ä¼šä»æœç´¢å¼•æ“ç»“æœé¡µï¼ˆSERPï¼‰é‡Œæ”¶é›†ä¸€å † URLï¼Œæ¯æ‰“å¼€ä¸€ä¸ªç½‘é¡µï¼Œåˆèƒ½é¡ºè—¤æ‘¸ç“œæ‰¾å‡ºä¸å°‘æ–°é“¾æ¥ï¼Œå°±ç®—æ˜¯å»é‡åï¼Œä¹Ÿæ˜¯è½»è½»æ¾æ¾å‡ ç™¾ä¸ªç½‘å€ã€‚åŒæ ·çš„ï¼Œä¸€è‚¡è„‘å„¿å…¨å¡ç»™ LLM è‚¯å®šä¸è¡Œï¼Œæµªè´¹å®è´µçš„ä¸Šä¸‹æ–‡é•¿åº¦ä¸è¯´ï¼Œæ›´è¦å‘½çš„æ˜¯ï¼Œæˆ‘ä»¬å‘ç° LLM åŸºæœ¬ä¸Šå°±æ˜¯çé€‰ã€‚æ‰€ä»¥ï¼Œå¾—æƒ³åŠæ³•å¼•å¯¼ LLM å»æŒ‘å‡ºé‚£äº›æœ€æœ‰å¯èƒ½åŒ…å«ç­”æ¡ˆçš„ URLã€‚</p>
<h4 data-id="heading-8">4.1.2 è§£å†³æ–¹æ¡ˆï¼šä¸¤é˜¶æ®µé‡æ’åºï¼ˆRe-rankingï¼‰</h4>
<p>URL æ’åºæ‰“åˆ†è¯„æµ‹æ˜¯ Deep Research ç³»ç»Ÿä¸­çš„å…³é”®æŠ€æœ¯ç¯èŠ‚ï¼Œå®ƒç›´æ¥å½±å“åˆ°ä¿¡æ¯è·å–çš„æ•ˆç‡å’Œè´¨é‡ã€‚ç³»ç»Ÿé‡‡ç”¨äº†å¤šå±‚æ¬¡ã€å¤šç»´åº¦çš„æ’åºç­–ç•¥ï¼Œç¡®ä¿èƒ½å¤Ÿä»æµ·é‡çš„æœç´¢ç»“æœä¸­å¿«é€Ÿå®šä½æœ€æœ‰ä»·å€¼çš„ä¿¡æ¯æºã€‚â€‹</p>
<p>ç»¼åˆè¯„åˆ†æœºåˆ¶æ˜¯ URL æ’åºçš„æ ¸å¿ƒã€‚ç³»ç»Ÿä¼šç»¼åˆè€ƒè™‘å¤šä¸ªå› ç´ ï¼šæœ€åæ›´æ–°æ—¶é—´ã€åŸŸåå‡ºç°çš„é¢‘ç‡ã€ç½‘é¡µè·¯å¾„ç»“æ„ï¼Œä»¥åŠæœ€é‡è¦çš„ä¸é—®é¢˜çš„è¯­ä¹‰ç›¸å…³æ€§ï¼Œç®—å‡ºä¸€ä¸ªç»¼åˆè¯„åˆ†â€‹ã€‚è¿™ç§å¤šç»´åº¦çš„è¯„åˆ†æœºåˆ¶èƒ½å¤Ÿå…¨é¢è¯„ä¼° URL çš„ä»·å€¼ï¼Œé¿å…äº†å•ä¸€ç»´åº¦æ’åºçš„å±€é™æ€§ã€‚â€‹</p>
<p>å…·ä½“çš„è¯„åˆ†å› ç´ åŒ…æ‹¬ï¼šâ€‹</p>
<p>1.<strong>é¢‘ç‡ä¿¡å·ï¼š</strong> å¦‚æœæŸä¸ª URL åœ¨ä¸åŒçš„ä¿¡æ¯æºä¸­å¤šæ¬¡å‡ºç°ï¼Œå®ƒçš„æƒé‡å°±ä¼šæ›´é«˜ã€‚å¦å¤–ï¼Œå¦‚æœæŸä¸ªåŸŸååœ¨æœç´¢ç»“æœä¸­ç»å¸¸å‡ºç°ï¼Œæ¥è‡ªè¿™ä¸ªåŸŸåçš„ URL ä¹Ÿä¼šè¢«åŠ åˆ†ã€‚å› ä¸ºä¸€èˆ¬æ¥è¯´ï¼Œçƒ­é—¨åŸŸåå¾€å¾€åŒ…å«æ›´æƒå¨çš„å†…å®¹ã€‚â€‹</p>
<p>2.<strong>è·¯å¾„ç»“æ„ï¼š</strong> ä¼šåˆ†æ URL çš„è·¯å¾„ç»“æ„ï¼Œæ¥åˆ¤æ–­å“ªäº›å†…å®¹æ˜¯èšé›†åœ¨ä¸€èµ·çš„ã€‚å¦‚æœå¤šä¸ªç½‘å€éƒ½å±äºåŒä¸€ä¸ªè·¯å¾„å±‚çº§ï¼Œå®ƒä»¬çš„åˆ†æ•°ä¼šæ›´é«˜ï¼›ä½†è·¯å¾„è¶Šæ·±ï¼Œåˆ†æ•°åŠ æˆä¼šé€æ¸å‡å°‘ã€‚â€‹</p>
<p>3.<strong>è¯­ä¹‰ç›¸å…³æ€§ï¼š</strong> ä½¿ç”¨ å°æ¨¡å‹ï¼ˆä¾‹å¦‚ï¼šjina-reranker-v2-base-multilingualï¼‰æˆ–è€…å¤§æ¨¡å‹ æ¥è¯„ä¼°é—®é¢˜å’Œæ¯ä¸ª URL çš„æ–‡æœ¬ä¿¡æ¯ï¼ˆä¾‹å¦‚æ ‡é¢˜å’Œæ‘˜è¦ï¼‰çš„è¯­ä¹‰ç›¸å…³æ€§ï¼Œè¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„é‡æ’åºé—®é¢˜â€‹ã€‚æ¯ä¸ª URL çš„æ–‡æœ¬ä¿¡æ¯æ¥è‡ªæœç´¢å¼•æ“ç»“æœé¡µï¼ˆSERPï¼‰API è¿”å›çš„æ ‡é¢˜å’Œæ‘˜è¦ï¼Œä»¥åŠé¡µé¢ä¸Š URL çš„é”šæ–‡æœ¬ã€‚â€‹</p>
<p>4.<strong>æœ€åæ›´æ–°æ—¶é—´ï¼š</strong> æœ‰äº›æŸ¥è¯¢å¯¹æ—¶æ•ˆæ€§è¦æ±‚å¾ˆé«˜ï¼Œæ‰€ä»¥ä¸€èˆ¬æ¥è¯´ï¼Œè¶Šæ–°çš„ URL ä»·å€¼è¶Šé«˜ã€‚ç³»ç»Ÿé‡‡ç”¨ä¸€å¥—ç»„åˆæ‹³ï¼Œç»¼åˆè€ƒè™‘ SERP API æä¾›çš„ç­›é€‰åŠŸèƒ½ã€HTTP Header ä¿¡æ¯åˆ†æã€å…ƒæ•°æ®æå–ã€å†…å®¹æ¨¡å¼è¯†åˆ«ç­‰ï¼Œæœ€ç»ˆç»™å‡ºä¸€ä¸ªå¸¦æœ‰ç½®ä¿¡åº¦è¯„åˆ†çš„æ—¶é—´æˆ³ã€‚â€‹</p>
<p>5.<strong>å—é™å†…å®¹è¯†åˆ«ï¼š</strong> æŸäº›ç¤¾äº¤åª’ä½“å¹³å°çš„å†…å®¹æ˜¯å—é™çš„ï¼Œæˆ–è€…éœ€è¦ä»˜è´¹æ‰èƒ½è®¿é—®ã€‚ç³»ç»Ÿä¼šç§¯æç»´æŠ¤ä¸€ä»½é»‘åå•ï¼ŒæŠŠè¿™äº›æœ‰é—®é¢˜çš„ URL å’ŒåŸŸåéƒ½è®°å½•ä¸‹æ¥ï¼Œé™ä½å®ƒä»¬çš„æ’åï¼Œé¿å…åœ¨è¿™äº›æ— æ³•è®¿é—®çš„å†…å®¹ä¸Šæµªè´¹è®¡ç®—èµ„æºã€‚â€‹</p>
<p>6.<strong>åŸŸåå¤šæ ·æ€§ï¼š</strong> ä¸ºäº†æé«˜ç»“æœçš„å¤šæ ·æ€§ï¼Œé¿å…é™·å…¥ "å±€éƒ¨æœ€ä¼˜"ï¼Œç³»ç»Ÿé‡‡ç”¨ "æ¢ç´¢ - åˆ©ç”¨" çš„ç­–ç•¥ï¼šä»æ¯ä¸ªåŸŸåä¸‹é€‰æ‹©æ’å Top K çš„ URLã€‚</p>
<p><strong>ç²—æ’å’Œç²¾æ’ï¼š</strong></p>
<p>â€¢ç²—æ’ï¼š å¿«é€Ÿç­›é€‰ï¼Œè¿½æ±‚å¬å›ç‡ã€‚</p>
<p>â€¢ç²¾æ’ï¼š é’ˆå¯¹ç²—æ’ç»“æœè¿›è¡Œæ·±åº¦è¯„ä¼°ã€‚è¿™é‡Œé€šå¸¸é‡‡ç”¨åŸºäºé‡æ’æ¨¡å‹ï¼ˆCross-Encoderï¼‰æˆ–åŸºäº LLM çš„é‡æ’åºã€‚åˆ©ç”¨ LLM çš„è¯­ä¹‰ç†è§£èƒ½åŠ›ï¼Œç”šè‡³ä½¿ç”¨æ»‘åŠ¨çª—å£ç®—æ³•ï¼ˆä»åå‘å‰æ»‘åŠ¨ï¼‰ï¼Œå¯¹å€™é€‰æ®µè½è¿›è¡Œç›¸å…³æ€§æ‰“åˆ†ï¼Œç¡®ä¿åªæœ‰å«é‡‘é‡æœ€é«˜çš„ä¿¡æ¯è¿›å…¥ä¸‹ä¸€æ­¥ã€‚</p>
<p>ç²—æ’æ£€ç´¢æ•ˆç‡è¾ƒå¿«ï¼Œä½†æ˜¯å¬å›çš„å†…å®¹å¹¶ä¸ä¸€å®šå¼ºç›¸å…³ã€‚è€Œç²¾æ’æ•ˆç‡è¾ƒä½ï¼Œå› æ­¤é€‚åˆåœ¨ç²—æ’çš„åŸºç¡€ä¸Šè¿›è¡Œè¿›ä¸€æ­¥ä¼˜åŒ–ã€‚é‡æ’çš„ä»»åŠ¡å°±æ˜¯è¯„ä¼°è¿™äº›ä¸Šä¸‹æ–‡çš„ç›¸å…³æ€§ï¼Œä¼˜å…ˆè€ƒè™‘é‚£äº›æœ€æœ‰å¯èƒ½æä¾›å‡†ç¡®å’Œç›¸å…³ä¿¡æ¯çš„å†…å®¹ã€‚</p>
<p>é‡æ’æ–¹æ³•ä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸¤ç±»ï¼š</p>
<p><strong>åŸºäºé‡æ’æ¨¡å‹ï¼š</strong> è¿™äº›æ¨¡å‹å¯ä»¥è¾“å‡ºæ–‡æ¡£ä¸æŸ¥è¯¢ä¹‹é—´çš„ç›¸å…³æ€§ï¼›å¤Ÿé’ˆå¯¹ä¸€ä¸ªæŸ¥è¯¢å’Œæ–‡æ¡£å¯¹ï¼Œè¾“å‡ºå®ƒä»¬çš„ç›¸ä¼¼åº¦åˆ†æ•°ã€‚æˆ‘ä»¬åˆ©ç”¨è¿™ä¸ªåˆ†æ•°å¯¹æ–‡æ¡£æŒ‰ç…§ä¸æŸ¥è¯¢çš„ç›¸å…³æ€§è¿›è¡Œé‡æ–°æ’åºã€‚è§£å†³ä¼ ç»Ÿæ£€ç´¢æ–¹æ³•ï¼ˆå¦‚BM25ã€å‘é‡æ£€ç´¢ï¼‰çš„å±€é™æ€§ï¼Œä¾‹å¦‚è¯­ä¹‰æ¨¡ç³Šæ€§ã€é•¿å°¾å…³é”®è¯æ¼æ£€ã€å¤šæ¨¡æ€æ„å›¾ç†è§£ä¸è¶³ç­‰é—®é¢˜ã€‚ä¼˜åŒ–æ£€ç´¢ç»“æœçš„Top-Kæ’åºï¼Œæå‡åç»­LLMç”Ÿæˆç­”æ¡ˆçš„å‡†ç¡®æ€§å’Œæ•ˆç‡</p>
<p><strong>åŸºäº LLMï¼š</strong> ç”±äºå¤§æ¨¡å‹å¯ä»¥æ›´å…¨é¢åœ°æ•æ‰è¯­ä¹‰ä¿¡æ¯ï¼Œä¹Ÿå¯è¢«ç”¨äºé‡æ’åºã€‚ä½¿ç”¨ Prompt çš„æ–¹å¼å¼•å¯¼ LLM è¿›è¡Œé‡æ’åºã€‚ç›´æ¥åˆ©ç”¨ LLM çš„è¯­ä¹‰ç†è§£èƒ½åŠ›å¯¹æ‰€æœ‰å€™é€‰æ®µè½è¿›è¡Œç›¸å…³æ€§ç¨‹åº¦æ’åã€‚å¦‚æœæ–‡æ¡£çš„æ•°é‡é€šå¸¸éå¸¸å¤§ï¼Œè€Œ LLM å¯èƒ½æ— æ³•ä¸€æ¬¡æ€§å¤„ç†æ‰€æœ‰çš„æ–‡æœ¬æ•°æ®ã€‚ä½¿ç”¨æ»‘åŠ¨çª—å£ç®—æ³•åŸç†ï¼Œæ»‘é¡ºåºæ˜¯ä»åå‘å‰çš„ï¼Œå°†å‰ä¸€ä¸ªçª—å£ä¸­çš„å‰ä¸¤ä¸ªæ®µè½å‚ä¸ä¸‹ä¸€ä¸ªçª—å£çš„é‡æ’åºã€‚</p>
<h3 data-id="heading-9">4.2 è§£å†³â€œå¤§æµ·æé’ˆâ€ä¸â€œä¸Šä¸‹æ–‡ä¸¢å¤±â€ï¼šé•¿ç½‘é¡µå†…å®¹æå–</h3>
<h4 data-id="heading-10">4.2.1 é—®é¢˜</h4>
<p>è¯»å–ç½‘é¡µå†…å®¹åï¼Œæˆ‘ä»¬éœ€è¦æŠŠå®ƒä½œä¸ºä¸€æ¡çŸ¥è¯†ï¼Œæ”¾åˆ° Agent çš„ä¸Šä¸‹æ–‡é‡Œï¼Œä¾›å®ƒæ¨ç†ã€‚è™½ç„¶æŠŠå…¨éƒ¨å†…å®¹ä¸€è‚¡è„‘å¡è¿› LLM çš„ä¸Šä¸‹æ–‡æ˜¯æœ€çœäº‹çš„åŠæ³•ï¼Œä½†è€ƒè™‘åˆ° Token æˆæœ¬å’Œç”Ÿæˆé€Ÿåº¦ï¼Œè¿™è‚¯å®šä¸æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚åœ¨å®é™…åº”ç”¨é‡Œï¼Œæˆ‘ä»¬éœ€è¦æ‰¾å‡ºå†…å®¹ä¸­ä¸é—®é¢˜æœ€ç›¸å…³çš„éƒ¨åˆ†ï¼ŒåªæŠŠè¿™äº›éƒ¨åˆ†ä½œä¸ºçŸ¥è¯†æ·»åŠ åˆ° Agent çš„ä¸Šä¸‹æ–‡é‡Œã€‚</p>
<p>æˆ‘ä»¬ä¸€è¾¹æ˜¯é—®é¢˜ï¼ˆåŸå§‹æŸ¥è¯¢æˆ–â€œä¿¡æ¯å·®â€é—®é¢˜ï¼‰ï¼Œå¦ä¸€è¾¹æ˜¯å¤§é‡çš„ Markdown å†…å®¹ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†å†…å®¹éƒ½æ˜¯æ— å…³ç´§è¦çš„ã€‚æˆ‘ä»¬éœ€è¦é€‰å‡ºä¸é—®é¢˜æœ€ç›¸å…³çš„ç‰‡æ®µã€‚</p>
<p><strong>æœ‰é™æ•°é‡æ–‡æ¡£ä¸­çš„æœ‰é™æ•°é‡çš„æ–‡æœ¬å—ï¼š</strong> å‡è®¾æ¯ä¸ªå—å¤§çº¦æœ‰ 500 ä¸ª Tokenï¼Œé‚£ä¹ˆä¸€ä¸ªå…¸å‹çš„é•¿ç½‘é¡µæ–‡æ¡£å¤§çº¦æœ‰ 20 ä¸‡ Tokenï¼ˆä¸­ä½æ•°ï¼‰åˆ° 100 ä¸‡ Tokenã€‚æˆ‘ä»¬æ¯ä¸€æ­¥æŠ“å– 4-5 ä¸ª URLï¼Œè¿™æ ·å¤§æ¦‚ä¼šäº§ç”Ÿå‡ ç™¾ä¸ªæ–‡æœ¬å—ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡ ç™¾ä¸ªå‘é‡å’Œå‡ ç™¾ä¸ªä½™å¼¦ç›¸ä¼¼åº¦ã€‚åœ¨å†…å­˜é‡Œå°±èƒ½è½»æ¾å¤„ç†ï¼Œæ ¹æœ¬ä¸éœ€è¦å‘é‡æ•°æ®åº“ã€‚</p>
<p><strong>æˆ‘ä»¬éœ€è¦è¿ç»­çš„æ–‡æœ¬å—æ¥å½¢æˆæœ‰æ•ˆçš„çŸ¥è¯†æ‘˜è¦ï¼š</strong> æˆ‘ä»¬ä¸èƒ½æ¥å—ç”±åˆ†æ•£çš„å¥å­ç»„æˆçš„æ‘˜è¦ã€‚æ›´æœ‰ç”¨çš„çŸ¥è¯†æ‘˜è¦ï¼Œæ›´èƒ½ä¿æŒæ–‡æœ¬çš„è¿è´¯æ€§ã€‚è¿™æ · LLM æ›´å®¹æ˜“ä»çŸ¥è¯†æºä¸­å¤åˆ¶å’Œå¼•ç”¨ï¼Œä¹Ÿèƒ½å‡å°‘â€œå¹»è§‰â€ã€‚</p>
<p>ç½‘é¡µå†…å®¹åŠ¨è¾„æ•°ä¸‡ Tokenï¼Œä¸”å……æ»¡å™ªéŸ³ã€‚å¦‚ä½•æå–æœ‰æ•ˆä¿¡æ¯ä¸”ä¿æŒä¸Šä¸‹æ–‡è¿è´¯ï¼Ÿ</p>
<h4 data-id="heading-11">4.2.2 è§£å†³æ–¹æ¡ˆï¼šè¿Ÿåˆ†ç®—æ³•ï¼ˆLate Chunkingï¼‰</h4>
<p>ä¼ ç»Ÿçš„ RAG ä¼šç›´æ¥æŠŠæ–‡æ¡£åˆ‡å—ï¼ˆChunkingï¼‰ç„¶åå‘é‡åŒ–ï¼Œä½†è¿™ä¼šå¯¼è‡´åˆ‡å—ä¸¢å¤±å…¨å±€ä¸Šä¸‹æ–‡ï¼ˆä¾‹å¦‚ä¸€ä¸ªä»£è¯â€œå®ƒâ€åœ¨åˆ‡å—åä¸çŸ¥é“æŒ‡ä»£è°ï¼‰ã€‚</p>
<p>â€¢<strong>Late Chunkingï¼ˆè¿Ÿåˆ†ï¼‰ï¼š</strong> è¿™æ˜¯ä¸€ä¸ªæå…¶ç²¾å¦™çš„ä¼˜åŒ–ã€‚å®ƒä¸æ€¥ç€åˆ‡å—ï¼Œè€Œæ˜¯å…ˆç”¨æ”¯æŒè¶…é•¿ä¸Šä¸‹æ–‡çš„æ¨¡å‹ï¼ˆå¦‚ jina-embeddings-v3ï¼‰å¯¹æ•´ä¸ªæ–‡æ¡£è¿›è¡Œç¼–ç ï¼Œä¿ç•™å…¨å±€è¯­ä¹‰ã€‚</p>
<p>é•¿æ–‡æ¡£åˆ‡å—ï¼Œæœ‰ä¿©ä¸ªé—®é¢˜ï¼Œç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼šæ–‡æœ¬å—åˆ†å‰²å¾—å‡†ä¸å‡†ï¼Œè¿™ä¸ä»…å…³ç³»åˆ°æœç´¢ç»“æœå¥½ä¸å¥½è¯»ï¼Œè¿˜å…³ç³»åˆ°åš RAG çš„æ—¶å€™ï¼Œç»™ LLM å–‚è¿›å»çš„æ–‡æœ¬å—æ˜¯ä¸æ˜¯æ­£å¥½ï¼Œä¸å¤šä¸å°‘ï¼›ç¬¬äºŒä¸ªé—®é¢˜æ˜¯ï¼šæ¯ä¸ªåˆ†å—é‡Œçš„ä¸Šä¸‹æ–‡ä¿¡æ¯å®¹æ˜“ä¸¢å¤±ã€‚æ–‡æ¡£åˆ‡å®Œä¹‹åï¼Œä¸‹ä¸€æ­¥å°±æ˜¯æŠŠæ¯ä¸ªåˆ†å—æ‹¿å»æ‰¹é‡å‘é‡åŒ–ã€‚ä½†è¿™ä¹ˆåšå®¹æ˜“æŠŠåŸæ–‡æ¡£é‡Œçš„å…¨å±€ä¸Šä¸‹æ–‡ä¿¡æ¯ç»™ä¸¢äº†ã€‚</p>
<p>è¿Ÿåˆ†ï¼ˆLate Chunkingï¼‰ä¸»è¦å°±æ˜¯è§£å†³ç¬¬äºŒä¸ªé—®é¢˜ â€”â€” ä¸Šä¸‹æ–‡ä¸¢å¤±ã€‚å®ƒä¸æ˜¯ç”¨æ¥æ‰¾æœ€ä½³æ–­ç‚¹æˆ–è€…è¯­ä¹‰è¾¹ç•Œçš„ã€‚è¯¥ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¯å‘å¼æ–¹æ³•ï¼Œæˆ–è€…å…¶ä»–æŠ€æœ¯æ¥åˆ†å—ï¼Œè¿˜æ˜¯å¾—ç”¨ã€‚</p>
<p>ä½†è¿Ÿåˆ†ä¸ä¸€æ ·çš„åœ°æ–¹æ˜¯ï¼Œå®ƒä¸æ˜¯ä¸€åˆ‡å®Œå°±ç«‹é©¬æŠŠæ¯ä¸ªå—æ‹¿å»å‘é‡åŒ–ï¼Œè€Œæ˜¯å…ˆæŠŠæ•´ä¸ªæ–‡æ¡£åœ¨ä¸€ä¸ªä¸Šä¸‹æ–‡çª—å£é‡Œç¼–ç äº†ï¼ˆjina-embeddings-v3æœ€æ–° SOTA å‘é‡æ¨¡å‹ï¼Œæ”¯æŒ 8192 Token çš„é•¿è¾“å…¥ï¼‰ï¼Œç„¶åå†æ ¹æ®è¾¹ç•Œçº¿ç´¢å»è¿›è¡Œå‡å€¼æ± åŒ–æ“ä½œã€‚</p>
<p>å®ƒçš„å·¥ä½œåŸç†ç±»ä¼¼äºä¸€ç»´å·ç§¯ï¼ˆConv1Dï¼‰ã€‚è¿™ä¸ªè¿‡ç¨‹é¦–å…ˆæŠŠä¸€ä¸ªé•¿æ–‡æ¡£åˆ†å‰²æˆå›ºå®šé•¿åº¦çš„å—ï¼Œç„¶åç”¨å¼€å¯äº†è¿Ÿåˆ†çš„ jina-embeddings-v3 å‘é‡åŒ–è¿™äº›æ–‡æœ¬å—ã€‚è®¡ç®—å®Œæ¯ä¸ªå—å’Œé—®é¢˜ä¹‹é—´çš„ç›¸ä¼¼åº¦åˆ†æ•°åï¼Œä¸€ä¸ªæ»‘åŠ¨çª—å£ä¼šåœ¨è¿™äº›ç›¸ä¼¼åº¦åˆ†æ•°ä¸Šç§»åŠ¨ï¼Œä»¥æ‰¾åˆ°å¹³å‡å€¼æœ€é«˜çš„çª—å£ã€‚</p>
<p>ç”¨è¿Ÿåˆ†å’Œç±»ä¼¼â€œä¸€ç»´å·ç§¯â€çš„å¹³å‡æ± åŒ–ï¼ŒæŒ‘å‡ºè·Ÿé—®é¢˜æœ€ç›¸å…³çš„æ®µè½ã€‚</p>
<p>â€¢<strong>å‡å€¼æ± åŒ–ï¼š</strong> åœ¨ç”Ÿæˆå‘é‡åï¼Œå†æ ¹æ®è¾¹ç•Œçº¿ç´¢è¿›è¡Œåˆ‡åˆ†å’Œå‡å€¼æ± åŒ–ã€‚ è¿™å°±åƒæ˜¯å…ˆè¯»å®Œä¸€æ•´æœ¬ä¹¦ç†è§£äº†å…¨æ„ï¼Œå†å›è¿‡å¤´å»æ‘˜å½•æ®µè½ï¼Œè€Œä¸æ˜¯æ¯è¯»ä¸€æ®µå°±æ‘˜å½•ä¸€æ®µã€‚è¿™æ ·æå–å‡ºçš„â€œçŸ¥è¯†å—â€æ—¢ç²¾å‡†åˆä¿ç•™äº†ä¸Šä¸‹æ–‡ï¼Œæå¤§å‡å°‘äº† LLM çš„å¹»è§‰ã€‚</p>
<h3 data-id="heading-12">4.3 è§£å†³â€œå†™ä¸é•¿â€ï¼šçªç ´ Token è¾“å‡ºé™åˆ¶</h3>
<h4 data-id="heading-13">4.3.1 é—®é¢˜</h4>
<p><strong>ä¸Šä¸‹æ–‡çª—å£çš„æ ¹æœ¬æ€§é™åˆ¶ï¼š</strong> å¤§éƒ¨åˆ†æ¨¡å‹ï¼Œä¾‹å¦‚ï¼šDeepSeek-V3ï¼Œå•æ¬¡è¾“å‡ºé€šå¸¸é™åˆ¶åœ¨ 8K Tokenï¼ˆçº¦ 8000 å­—ï¼‰ä»¥å†…ï¼Œéš¾ä»¥ä¸€æ¬¡æ€§ç”Ÿæˆæ•°ä¸‡å­—çš„è¯¦å°½æŠ¥å‘Šã€‚ï¼ˆå¯èƒ½æœ‰äººä¼šæå‡ºå¥½å¤šæ¨¡å‹è¾“å‡ºå‡ ä¸‡å­—æˆ–è€…å‡ åä¸‡å­—ï¼Œä¾‹å¦‚GPT-5å’ŒClaude Opusç­‰ï¼Œä½†æ˜¯åˆä¼šå‡ºç°ä¸‹é¢"ä¸Šä¸‹æ–‡è…çƒ‚" ç°è±¡çš„é—®é¢˜ï¼‰ã€‚</p>
<p><strong>"ä¸Šä¸‹æ–‡è…çƒ‚" ç°è±¡ï¼š</strong> å½“æ™ºèƒ½ä½“å¼€å§‹é¢‘ç¹è°ƒç”¨å¤šæ¬¡å·¥å…·ï¼Œæ¯æ¬¡è°ƒç”¨è¿”å›çš„ "è§‚å¯Ÿç»“æœ" éƒ½ä¼šè¿½åŠ åˆ°å¯¹è¯å†å²ä¸­ï¼Œå¯¼è‡´ä¸Šä¸‹æ–‡é•¿åº¦çˆ†ç‚¸å¼å¢é•¿ã€‚è¿™ä¸ä»…å¸¦æ¥é«˜æ˜‚çš„è®¡ç®—æˆæœ¬ï¼Œæ›´ä¼šå¯¼è‡´ "ä¸Šä¸‹æ–‡è…çƒ‚" (Context Rot)â€”â€” éšç€ä¸Šä¸‹æ–‡å˜é•¿ï¼Œæ¨¡å‹æ€§èƒ½åè€Œä¸‹é™ã€‚â€‹</p>
<p>å…·ä½“è¡¨ç°ä¸ºï¼šâ€‹</p>
<p>1.æ€§èƒ½ä¸‹é™ï¼šéšç€ä¸Šä¸‹æ–‡é•¿åº¦å¢åŠ ï¼Œæ¨¡å‹æ€§èƒ½ä¼šæ˜æ˜¾ä¸‹é™ã€‚Anthropic æŠŠè¿™ä¸ªç°è±¡ç§°ä¸º "ä¸Šä¸‹æ–‡è…çƒ‚"ï¼ˆcontext rotï¼‰ã€‚å…·ä½“è¡¨ç°æ˜¯æ¨¡å‹å¼€å§‹é‡å¤è¾“å‡ºã€æ¨ç†é€Ÿåº¦å˜æ…¢ã€å›ç­”è´¨é‡ä¸‹é™â€‹ã€‚â€‹</p>
<p>2.æ³¨æ„åŠ›åˆ†æ•£ï¼šAgent çš„ä¸Šä¸‹æ–‡éšæ—¶é—´æ¨ç§»å¿…ç„¶ç†µå¢ï¼Œå¯¼è‡´æ³¨æ„åŠ›æœºåˆ¶åˆ†æ•£ã€‚â€‹</p>
<p>3.ä¿¡æ¯åˆ©ç”¨æ•ˆç‡é™ä½ï¼šç ”ç©¶å‘ç°ï¼Œå½“ç›¸å…³ä¿¡æ¯ä½äºé•¿è¾“å…¥ä¸Šä¸‹æ–‡çš„å¼€å¤´æˆ–ç»“å°¾æ—¶ï¼Œæ¨¡å‹çš„æ€§èƒ½è¡¨ç°æœ€ä½³ï¼Œè€Œå½“ä¿¡æ¯è¢«æ”¾ç½®åœ¨ä¸­é—´ä½ç½®æ—¶ï¼Œæ€§èƒ½ä¼šæ˜¾è‘—ä¸‹é™ã€‚æ­¤å¤–ï¼Œåœ¨é•¿ä¸Šä¸‹æ–‡ä»»åŠ¡ä¸­ï¼Œæ¨¡å‹æœ‰æ—¶ä¼šå€¾å‘äºç›´æ¥ä¾èµ–å…¶é¢„è®­ç»ƒçš„å‚æ•°çŸ¥è¯†æ¥å›ç­”é—®é¢˜ï¼Œè€Œä¸æ˜¯æœ‰æ•ˆåˆ©ç”¨æ‰€æä¾›çš„å¤–éƒ¨é•¿æ–‡æœ¬ï¼Œè¿™è¿›ä¸€æ­¥åŠ å‰§äº†æ€§èƒ½çš„ä¸‹é™â€‹ã€‚</p>
<h4 data-id="heading-14">4.3.2 è§£å†³æ–¹æ¡ˆï¼šåŒå±‚çº§ Agent æ¶æ„ï¼ˆPlanner + Workersï¼‰</h4>
<p>Deep Research å®é™…ä¸Šé‡‡ç”¨äº†ä¸€ç§â€œè§„åˆ’-æ‰§è¡Œâ€çš„åˆ†ç¦»æ¶æ„ï¼š</p>
<p>â€¢è§„åˆ’ Agent (Planner)ï¼š å®ƒæ˜¯â€œåŒ…å·¥å¤´â€ã€‚è´Ÿè´£ç†è§£ä»»åŠ¡ï¼Œç”Ÿæˆè¯¦ç»†çš„ JSON æ ¼å¼å¤§çº²ï¼Œå¹¶åˆ†é…æ¯ä¸ªç« èŠ‚çš„å­—æ•°é¢„ç®—ã€‚</p>
<p>â€¢æ‰§è¡Œ Agent é›†ç¾¤ (Workers)ï¼š å®ƒæ˜¯â€œå»ºç­‘å·¥â€ã€‚å¤šä¸ª Agent å¹¶è¡Œå·¥ä½œï¼Œæ¯ä¸ª Agent è®¤é¢†ä¸€ä¸ªç« èŠ‚çš„æ ‡é¢˜ï¼Œç‹¬ç«‹å»æœç´¢ã€é˜…è¯»å’Œå†™ä½œã€‚</p>
<p>â€¢èšåˆå™¨ï¼š æœ€åç”±ä¸€ä¸ªæ¨¡å—åƒæ‹¼ç§¯æœ¨ä¸€æ ·å°†å„ç« èŠ‚æ‹¼æ¥ï¼Œå¹¶è¿›è¡Œé€»è¾‘é¡ºæ»‘å’Œé•¿åº¦æ§åˆ¶ã€‚</p>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5f949f5fa5b49d39c36d8af8eb0e9d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770718858&amp;x-signature=m3NX1YnrKG%2BnlYhrOL4F0rEDe0w%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p><strong>åŒå±‚æ¶æ„çš„æ ¸å¿ƒè®¾è®¡åŒ…æ‹¬ï¼šâ€‹</strong></p>
<p>1.ç›‘ç£è€…å±‚çº§ï¼šä½œä¸ºç³»ç»Ÿçš„ "å¤§è„‘"ï¼Œè´Ÿè´£å°†æ¨¡ç³Šéœ€æ±‚è½¬åŒ–ä¸ºå¯æ‰§è¡Œè®¡åˆ’ã€‚åœ¨ prompts.py ä¸­å®šä¹‰çš„ç»“æ„åŒ–æç¤ºæ¨¡æ¿æŒ‡å¯¼è§„åˆ’å™¨å®Œæˆä¸‰é¡¹æ ¸å¿ƒä»»åŠ¡ï¼šéœ€æ±‚æ¾„æ¸…ï¼ˆé€šè¿‡ clarify_with_user èŠ‚ç‚¹å®ç°ï¼‰ã€å­ä¸»é¢˜åˆ†è§£ï¼ˆæœ€å¤§æ”¯æŒ 5 ä¸ªå¹¶è¡Œå­ä»»åŠ¡ï¼‰ã€ä»¥åŠèµ„æºåˆ†é…ï¼ˆæ ¹æ®ä¸»é¢˜å¤æ‚åº¦é€‰æ‹©æ¨¡å‹ä¸å·¥å…·ï¼‰ã€‚â€‹</p>
<p>2.æ‰§è¡Œè€…å±‚çº§ï¼šè´Ÿè´£å…·ä½“çš„ä¿¡æ¯æ£€ç´¢ã€å†…å®¹æå–å’Œåˆæ­¥åˆ†æå·¥ä½œã€‚æ‰§è¡Œè€…å±‚çº§åŒ…å«å¤šä¸ªä¸“é—¨çš„ Agentï¼Œå¦‚æœç´¢ Agentã€é˜…è¯» Agentã€åˆ†æ Agent ç­‰ï¼Œæ¯ä¸ª Agent è´Ÿè´£ç‰¹å®šçš„ä»»åŠ¡ã€‚â€‹</p>
<p>3.çŠ¶æ€æœºæ§åˆ¶ï¼šåŸºäº LangGraph æ„å»ºçš„çŠ¶æ€æœºå®ç°äº†å¤æ‚æµç¨‹çš„ç²¾ç¡®æ§åˆ¶ã€‚çŠ¶æ€æœºèƒ½å¤Ÿè·Ÿè¸ªç ”ç©¶è¿‡ç¨‹çš„æ¯ä¸ªæ­¥éª¤ï¼Œç¡®ä¿ä»»åŠ¡æ‰§è¡Œçš„æœ‰åºæ€§å’Œå®Œæ•´æ€§ã€‚â€‹</p>
<p><strong>ä¸Šä¸‹æ–‡ç®¡ç†çš„åˆ›æ–°æ–¹æ¡ˆï¼šâ€‹</strong></p>
<p>ä¸ºäº†ç¼“è§£ä¸Šä¸‹æ–‡è…çƒ‚é—®é¢˜ï¼Œç³»ç»Ÿé‡‡ç”¨äº†å¤šç§ä¸Šä¸‹æ–‡ç®¡ç†ç­–ç•¥ï¼šâ€‹</p>
<p>1.ä¸Šä¸‹æ–‡å¸è½½æŠ€æœ¯ï¼šç³»ç»Ÿé‡‡ç”¨ "ä¸Šä¸‹æ–‡å¸è½½"æ¥ç¼“è§£ä¸Šä¸‹æ–‡æ±¡æŸ“ï¼Œè¿™èƒ½å¸® agent ä¿æŒåœ¨æ­£ç¡®è½¨é“ä¸Šã€‚ä¸Šä¸‹æ–‡å¸è½½å°±æ˜¯æŠŠä¿¡æ¯å­˜åœ¨è¯­è¨€æ¨¡å‹çš„ "æ´»è·ƒä¸Šä¸‹æ–‡çª—å£" ä¹‹å¤–ã€‚æŠŠå…³é”®ä¿¡æ¯å¸è½½å‡ºå»ï¼Œåªåœ¨éœ€è¦æ—¶æ£€ç´¢ï¼Œæˆ‘ä»¬å°±é¿å…äº†æ¨¡å‹å·¥ä½œå†…å­˜çš„ "è¿‡è½½"â€‹ã€‚â€‹</p>
<p>2.åˆ†çº§å­˜å‚¨æ¶æ„ï¼šåœ¨äºå¼•å…¥åˆ†çº§å­˜å‚¨æ¶æ„ã€‚é€šè¿‡å°†ä¿¡æ¯æŒ‰ç…§é‡è¦æ€§å’Œä½¿ç”¨é¢‘ç‡è¿›è¡Œåˆ†çº§å­˜å‚¨ï¼Œç³»ç»Ÿèƒ½å¤Ÿåœ¨æœ‰é™çš„ä¸Šä¸‹æ–‡ä¸­ä¿ç•™æœ€é‡è¦çš„ä¿¡æ¯ï¼ŒåŒæ—¶åœ¨éœ€è¦æ—¶å¿«é€Ÿæ£€ç´¢å…¶ä»–ä¿¡æ¯ã€‚â€‹</p>
<p>3.æ™ºèƒ½å‰ªæç­–ç•¥ï¼šç³»ç»Ÿé‡‡ç”¨ä¸Šä¸‹æ–‡å‰ªææŠ€æœ¯ã€‚è¿™ä¸ªæŠ€å·§æ˜¯åœ¨ RAG çš„åŸºç¡€ä¸Šåšçš„ä¼˜åŒ–ã€‚å®ƒçš„æ ¸å¿ƒæ˜¯åœ¨å°†æ£€ç´¢åˆ°çš„ä¿¡æ¯äº¤ç»™ä¸»æ¨¡å‹ä¹‹å‰ï¼Œå…ˆè¿›è¡Œä¸€æ¬¡ "å‰ªæ"ã€‚å…·ä½“åšæ³•æ˜¯ï¼šå…ˆæ£€ç´¢å‡ºç›¸å…³æ–‡æ¡£ï¼Œç„¶åä½¿ç”¨ä¸€ä¸ªæ›´å°ã€æ›´å¿«çš„æ¨¡å‹ï¼Œè®©å®ƒè¯»ä¸€éè¿™äº›æ–‡æ¡£ï¼Œè¿™ä¸ªå°æ¨¡å‹çš„ä»»åŠ¡æ˜¯ï¼Œæ ¹æ®ç”¨æˆ·çš„åŸå§‹é—®é¢˜ï¼Œåªä»æ–‡æ¡£ä¸­æå–æœ€æ ¸å¿ƒã€æœ€ç›¸å…³çš„ä¿¡æ¯â€‹ã€‚</p>
<p><strong>é•¿æ–‡æ¡£å¤„ç†çš„æŠ€æœ¯çªç ´ï¼šâ€‹</strong>â€‹</p>
<p>1.åˆ†æ®µå¤„ç†ç­–ç•¥ï¼šç³»ç»Ÿå°†é•¿æ–‡æ¡£åˆ†æˆå¤šä¸ªæ®µè½æˆ–ç« èŠ‚ï¼Œæ¯ä¸ªéƒ¨åˆ†ç‹¬ç«‹å¤„ç†ï¼Œç„¶åé€šè¿‡ç›‘ç£è€…å±‚çº§è¿›è¡Œæ•´åˆã€‚è¿™ç§æ–¹æ³•é¿å…äº†ä¸€æ¬¡æ€§å¤„ç†æ•´ä¸ªé•¿æ–‡æ¡£å¸¦æ¥çš„ä¸Šä¸‹æ–‡é™åˆ¶é—®é¢˜ã€‚â€‹</p>
<p>2.å¢é‡ç”Ÿæˆæœºåˆ¶ï¼šç³»ç»Ÿé‡‡ç”¨å¢é‡ç”Ÿæˆçš„æ–¹å¼å¤„ç†é•¿ç¯‡æŠ¥å‘Šã€‚ç›‘ç£è€…å±‚çº§è´Ÿè´£åˆ¶å®šæ•´ä½“ç»“æ„å’Œå„éƒ¨åˆ†çš„ç”Ÿæˆé¡ºåºï¼Œæ‰§è¡Œè€…å±‚çº§æŒ‰ç…§é¡ºåºé€æ­¥ç”Ÿæˆå„éƒ¨åˆ†å†…å®¹ã€‚è¿™ç§æ–¹å¼ä¸ä»…é¿å…äº†è¾“å‡ºé•¿åº¦é™åˆ¶ï¼Œè¿˜æé«˜äº†ç”Ÿæˆå†…å®¹çš„è¿è´¯æ€§ã€‚â€‹</p>
<p>3.æ™ºèƒ½æ•´åˆç®—æ³•ï¼šåœ¨å„éƒ¨åˆ†å†…å®¹ç”Ÿæˆåï¼Œç›‘ç£è€…å±‚çº§ä¼šå¯¹å†…å®¹è¿›è¡Œæ™ºèƒ½æ•´åˆã€‚è¿™åŒ…æ‹¬æ£€æŸ¥é€»è¾‘ä¸€è‡´æ€§ã€æ¶ˆé™¤é‡å¤å†…å®¹ã€ä¼˜åŒ–ç« èŠ‚é¡ºåºç­‰ï¼Œç¡®ä¿æœ€ç»ˆæŠ¥å‘Šçš„è´¨é‡ã€‚</p>
<h3 data-id="heading-15">4.4 ç”Ÿæˆå†…å®¹æ‰“åˆ†</h3>
<p>Deep Research åœ¨ç”Ÿæˆå†…å®¹çš„è´¨é‡æ§åˆ¶æ–¹é¢é‡‡ç”¨äº†å¤šå±‚æ¬¡ã€å¤šç»´åº¦çš„è¯„åˆ†å’Œä¼˜åŒ–æœºåˆ¶ï¼Œç¡®ä¿æœ€ç»ˆè¾“å‡ºçš„å†…å®¹æ—¢å‡†ç¡®åˆæœ‰ä»·å€¼ã€‚â€‹</p>
<p>è‡ªé€‚åº”è¯„ä¼°æ¡†æ¶æ˜¯å†…å®¹è¯„åˆ†çš„åŸºç¡€ã€‚åŒ…æ‹¬ä¸¤ä¸ªäº’è¡¥çš„è¯„ä¼°æ¡†æ¶æ¥è¯„ä¼° DRA èƒ½åŠ›ï¼šRACEï¼ˆåŸºäºå‚è€ƒçš„è‡ªé€‚åº”æ ‡å‡†é©±åŠ¨è¯„ä¼°æ¡†æ¶ï¼Œå…·æœ‰åŠ¨æ€åŠ æƒï¼‰ç”¨äºè¯„ä¼°ç”Ÿæˆç ”ç©¶æŠ¥å‘Šçš„è´¨é‡ï¼ŒFACTï¼ˆäº‹å®ä¸°å¯Œæ€§å’Œå¼•ç”¨å¯ä¿¡åº¦æ¡†æ¶ï¼‰ç”¨äºè¯„ä¼°ä¿¡æ¯æ£€ç´¢æœ‰æ•ˆæ€§å’Œå¼•ç”¨å‡†ç¡®æ€§â€‹ã€‚â€‹</p>
<p><strong>RACE æ¡†æ¶çš„æ ¸å¿ƒç‰¹ç‚¹åŒ…æ‹¬ï¼šâ€‹</strong></p>
<p>1.åŠ¨æ€æƒé‡åˆ†é…ï¼šå¯¹äºæ¯ä¸ªä»»åŠ¡ï¼Œè¯„åˆ¤ LLM é€šè¿‡å¤šæ¬¡è¯•éªŒè·å¾—æ¯ä¸ªç»´åº¦çš„æƒé‡ï¼Œå¹¶å–å¹³å‡å€¼ä½œä¸ºæœ€ç»ˆæƒé‡ï¼Œç¡®ä¿è¯„ä¼°ä¸ä»»åŠ¡æ„å›¾ä¸€è‡´â€‹ã€‚æ‰€æœ‰ç»´åº¦çš„ç”Ÿæˆæ ‡å‡†è¢«èšåˆåˆ°ä¸€ä¸ªç»¼åˆåˆ—è¡¨ä¸­ï¼Œè¯„åˆ¤ LLM ç„¶åæ ¹æ®æ¯ä¸ªæ ‡å‡†åˆ†æç›®æ ‡æŠ¥å‘Šå’Œå‚è€ƒæŠ¥å‘Šï¼Œä¸ºä¸¤ä»½æŠ¥å‘Šç”Ÿæˆæ¯ä¸ªæ ‡å‡†çš„åˆ†æ•°åˆ—è¡¨ï¼Œç”¨äºæœ€ç»ˆå¾—åˆ†è®¡ç®—ã€‚â€‹</p>
<p>2.å¤šç»´åº¦è¯„ä¼°ï¼šæ¡†æ¶é¦–å…ˆåŸºäºé¢†åŸŸçŸ¥è¯†ç¡®ç«‹å››ä¸ªé¡¶å±‚è¯„æµ‹ç»´åº¦ï¼šå…¨é¢æ€§ï¼ˆCOMPï¼‰ã€æ´å¯ŸåŠ› / æ·±åº¦ï¼ˆDEPTHï¼‰ã€æŒ‡ä»¤éµå¾ªï¼ˆINSTï¼‰å’Œå¯è¯»æ€§ï¼ˆREADï¼‰ã€‚å¯¹äºæ¯ä¸ªå…·ä½“ä»»åŠ¡ï¼Œè¯„åˆ¤ LLM ä¼šåŠ¨æ€è®¡ç®—å„ç»´åº¦çš„æƒé‡ï¼Œå¹¶ä¸ºæ¯ä¸ªç»´åº¦ç”Ÿæˆä¸€ç»„å®šåˆ¶åŒ–çš„è¯„æµ‹æ ‡å‡†ã€‚â€‹</p>
<p>3.è‡ªé€‚åº”é€ç‚¹è´¨é‡è¯„ä¼°ï¼šè¯„ä¼°æ¨¡å—åŒ…å«è‡ªé€‚åº”é€ç‚¹è´¨é‡è¯„ä¼°å’Œä¸»åŠ¨äº‹å®æ ¸æŸ¥ä¸¤å¤§æ ¸å¿ƒç»„ä»¶ï¼Œæ—¢è§£å†³äº† "åˆ¤åˆ†æ­»æ¿" çš„é—®é¢˜ï¼Œåˆå®ç°äº† "å…¨é¢æŸ¥é”™" çš„ç›®æ ‡ã€‚è‡ªé€‚åº”é€ç‚¹è´¨é‡è¯„ä¼°æ‰“ç ´äº†å›ºå®šç»´åº¦çš„é™åˆ¶ï¼Œä¸ºæ¯ä¸ªä»»åŠ¡é‡èº«å®šåˆ¶è¯„åˆ†æ ‡å‡†ã€‚è¯¥ç»„ä»¶é¦–å…ˆä¿ç•™ 4 ä¸ªé€šç”¨è¯„ä¼°ç»´åº¦ï¼ŒåŒæ—¶é’ˆå¯¹æ¯ä¸ªå…·ä½“ä»»åŠ¡è‡ªåŠ¨ç”Ÿæˆ 1-3 ä¸ªä¸“å±è¯„ä¼°ç»´åº¦ã€‚â€‹</p>
<p>ä¸»åŠ¨äº‹å®æ ¸æŸ¥æœºåˆ¶ç¡®ä¿äº†å†…å®¹çš„å‡†ç¡®æ€§ã€‚ç³»ç»Ÿä¸ä¼šåªå‚»å‚»åœ°æ£€æŸ¥æŠ¥å‘Šé‡Œæ ‡å‡ºæ¥çš„å¼•ç”¨æ¥æºï¼Œè€Œæ˜¯ä¼šåƒä¸€ä¸ªä¾¦æ¢ä¸€æ ·ä¸»åŠ¨å»ç½‘ä¸Šæœç´¢äº¤å‰éªŒè¯æŠ¥å‘Šé‡Œçš„æ¯ä¸€ä¸ªè¯´æ³•ï¼Œä¸ç®¡ä½ æœ‰æ²¡æœ‰ç»™å‡ºå¤„ï¼Œè¿™å°±ä¿è¯äº†è¯„åˆ†çš„ç»å¯¹ä¸¥æ ¼â€‹ã€‚â€‹</p>
<p><strong>è¿™ç§æœºåˆ¶çš„å®ç°åŒ…æ‹¬ï¼š</strong> â€‹</p>
<p>1.è‡ªåŠ¨è¯†åˆ«å…³é”®é™ˆè¿°ï¼šç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«æŠ¥å‘Šä¸­çš„å…³é”®é™ˆè¿°å’Œæ•°æ®ï¼ŒåŒ…æ‹¬äº‹å®æ€§æè¿°ã€æ•°å€¼æ•°æ®ã€å› æœå…³ç³»ç­‰ã€‚â€‹</p>
<p>2.å¤šæºäº¤å‰éªŒè¯ï¼šå¯¹äºæ¯ä¸ªå…³é”®é™ˆè¿°ï¼Œç³»ç»Ÿä¼šä»å¤šä¸ªç‹¬ç«‹æ¥æºè¿›è¡ŒéªŒè¯ï¼Œç¡®ä¿å…¶å‡†ç¡®æ€§ã€‚â€‹</p>
<p>3.ç½®ä¿¡åº¦è¯„ä¼°ï¼šç³»ç»Ÿä¼šä¸ºæ¯ä¸ªéªŒè¯ç»“æœç»™å‡ºç½®ä¿¡åº¦è¯„åˆ†ï¼Œé«˜ç½®ä¿¡åº¦çš„å†…å®¹ä¼šè¢«ä¿ç•™ï¼Œä½ç½®ä¿¡åº¦çš„å†…å®¹ä¼šè¢«æ ‡è®°ä¸ºéœ€è¦è¿›ä¸€æ­¥æ ¸å®ã€‚â€‹</p>
<p><strong>å†…å®¹ä¿®æ”¹ä¸ä¼˜åŒ–ç­–ç•¥ï¼š</strong> åŸºäºè¯„åˆ†ç»“æœï¼Œç³»ç»Ÿä¼šé‡‡ç”¨å¤šç§ç­–ç•¥å¯¹å†…å®¹è¿›è¡Œä¿®æ”¹å’Œä¼˜åŒ–ï¼šâ€‹</p>
<p>1.åŸºäºè¯„åˆ†çš„è‡ªåŠ¨ä¿®æ­£ï¼šå½“ç³»ç»Ÿå‘ç°å†…å®¹å­˜åœ¨äº‹å®é”™è¯¯æˆ–é€»è¾‘é—®é¢˜æ—¶ï¼Œä¼šè‡ªåŠ¨è¿›è¡Œä¿®æ­£ã€‚è¿™ç§ä¿®æ­£ä¸æ˜¯ç®€å•çš„æ›¿æ¢ï¼Œè€Œæ˜¯åŸºäºå¤šä¸ªå¯é æ¥æºçš„ä¿¡æ¯è¿›è¡Œç»¼åˆåˆ¤æ–­ã€‚â€‹</p>
<p>2.äººå·¥å¹²é¢„æœºåˆ¶ï¼šå¯¹äºå¤æ‚çš„é—®é¢˜æˆ–å­˜åœ¨äº‰è®®çš„å†…å®¹ï¼Œç³»ç»Ÿä¼šæç¤ºç”¨æˆ·è¿›è¡Œäººå·¥å¹²é¢„ï¼Œç¡®ä¿æœ€ç»ˆå†…å®¹çš„å‡†ç¡®æ€§å’Œå®¢è§‚æ€§ã€‚â€‹</p>
<p>3.é£æ ¼ä¸€è‡´æ€§ä¼˜åŒ–ï¼šç³»ç»Ÿä¼šæ£€æŸ¥æ•´ç¯‡æŠ¥å‘Šçš„è¯­è¨€é£æ ¼ã€æœ¯è¯­ä½¿ç”¨ã€æ ¼å¼è§„èŒƒç­‰ï¼Œç¡®ä¿å…¨æ–‡çš„ä¸€è‡´æ€§å’Œä¸“ä¸šæ€§ã€‚â€‹</p>
<p>4.ç»“æ„ä¼˜åŒ–ï¼šæ ¹æ®å†…å®¹çš„é€»è¾‘å…³ç³»ï¼Œç³»ç»Ÿä¼šå¯¹æŠ¥å‘Šçš„ç»“æ„è¿›è¡Œä¼˜åŒ–ï¼Œç¡®ä¿ç« èŠ‚å®‰æ’åˆç†ã€å±‚æ¬¡åˆ†æ˜ã€‚</p>
<h2 data-id="heading-16">5ã€ Deep Research vs Manus</h2>
<p>Manus æ›´åƒæ˜¯ä¸€ä¸ªé«˜åº¦å·¥ç¨‹åŒ–çš„ Agent å¹³å°ï¼Œå®ƒæ•´åˆäº†å¤§é‡å·¥å…·ï¼ˆæµè§ˆå™¨ã€ä»£ç è§£é‡Šå™¨ç­‰ï¼‰ï¼Œå¼ºåœ¨â€œè°ƒåº¦â€ã€‚è€Œ Deep Research æ˜¯æ¨¡å‹å±‚é¢å’Œæ¶æ„å±‚é¢çš„è¿›åŒ–ï¼Œå®ƒé€šè¿‡å¼ºåŒ–å­¦ä¹ æˆ–è€…æ¶æ„ä¼˜åŒ–è®©æ¨¡å‹äº†è§£â€œå¦‚ä½•æœç´¢â€å’Œâ€œå¦‚ä½•æ¨ç†â€çš„ç­–ç•¥ï¼Œæ˜¯ä¸€ç§æ›´åŸç”Ÿå’Œè‡ªä¸»çš„æ™ºèƒ½ã€‚æ‰€ä»¥Deep Researchå¯ä»¥è¿›è¡Œæ’°å†™æ–‡çŒ®ç»¼è¿°ã€å¸‚åœºä¸ç«å“åˆ†æã€è¡Œä¸šç ”æŠ¥ã€æŠ•èèµ„ç ”æŠ¥ã€å¸‚åœºè°ƒç ”ã€æ–°é—»çƒ­ç‚¹è¿½è¸ªã€ç”Ÿæ´»å†³ç­–ç­‰ï¼Œä¹Ÿå¯ä»¥åœ¨æ£€ç´¢æ—¶æ²‰æ·€æœ‰ç”¨ä¿¡æ¯ã€‚</p>
<h2 data-id="heading-17">6ã€æ€»ç»“</h2>
<p>Deep Researchæ˜¯æˆ‘åœ¨25å¹´å¹´ä¸­æ¥è§¦çš„ï¼Œå½“æ—¶æ„Ÿè§‰å°±å¾ˆæƒŠè‰³ï¼Œæ„Ÿè§‰æ­£åœ¨è·¨è¶Šåˆ°ä¸€ä¸ªæ–°çš„é—¨æ§›ï¼šä»ä¿¡æ¯çš„æ¬è¿å·¥ï¼Œå˜æˆäº†ä¿¡æ¯çš„åŠ å·¥è€…ã€‚å®ƒä¸å†éœ€è¦ç”¨æˆ·è´¹å°½å¿ƒæ€æƒ³ Promptï¼Œä¹Ÿä¸éœ€è¦ç”¨æˆ·å»ç‚¹å‡»ä¸€ä¸ªä¸ªçš„é“¾æ¥ã€‚å®ƒå±•ç¤ºäº† AI ä½œä¸ºä¸€ä¸ªâ€œæ€è€ƒè€…â€çš„æ½œåŠ›â€”â€”å®ƒçŸ¥é“è‡ªå·±ä¸çŸ¥é“ä»€ä¹ˆï¼Œå¹¶ä¸”çŸ¥é“å»å“ªé‡Œæ‰¾åˆ°ç­”æ¡ˆã€‚å¯¹äºä½¿ç”¨è€…è€Œè¨€ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å°†æœ€è€—æ—¶çš„â€œä¿¡æ¯æ”¶é›†ä¸æ•´ç†â€é˜¶æ®µå¤–åŒ…ç»™ AIï¼Œä»è€Œä¸“æ³¨äºæ›´é«˜ç»´åº¦çš„å†³ç­–ä¸åˆ›æ–°ã€‚</p>
<p>åé¢ä¼šç»§ç»­å†™æˆ‘æ€ä¹ˆåœ¨çœŸå®ä¸šåŠ¡ä¸­åˆ©ç”¨DeepResearchçš„èƒ½åŠ›ï¼Œæœ€åç¥å¤§å®¶æ—©å®‰ã€åˆå®‰ã€æ™šå®‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue-å“åº”å¼åŸç†æ·±åº¦è§£æï¼ˆå«æ‰‹å†™æºç ï¼‰]]></title>    <link>https://juejin.cn/post/7602463463105249326</link>    <guid>https://juejin.cn/post/7602463463105249326</guid>    <pubDate>2026-02-03T10:07:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602463463105249326" data-draft-id="7602303923171393545" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue-å“åº”å¼åŸç†æ·±åº¦è§£æï¼ˆå«æ‰‹å†™æºç ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-03T10:07:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‘ç°ä¸€åªå¤§å‘†ç“œ"/> <meta itemprop="url" content="https://juejin.cn/user/180747382561607"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue-å“åº”å¼åŸç†æ·±åº¦è§£æï¼ˆå«æ‰‹å†™æºç ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/180747382561607/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‘ç°ä¸€åªå¤§å‘†ç“œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T10:07:34.000Z" title="Tue Feb 03 2026 10:07:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>åŒå‘æ•°æ®ç»‘å®šæ˜¯ Vue çš„çµé­‚ç‰¹æ€§ã€‚å®ƒå°† <strong>Modelï¼ˆæ•°æ®å±‚ï¼‰</strong> ä¸ <strong>Viewï¼ˆè§†å›¾å±‚ï¼‰</strong> ç´§å¯†ç›¸è¿ï¼šJS é€»è¾‘æ›´æ–° Modelï¼Œè§†å›¾è‡ªåŠ¨é‡ç»˜ï¼›ç”¨æˆ·æ“ä½œ Viewï¼Œæ•°æ®è‡ªåŠ¨åŒæ­¥ã€‚æœ¬æ–‡å°†å¸¦ä½ ä»æºç çº§åˆ«å¯¹æ¯” Vue 2 ä¸ Vue 3 åœ¨å“åº”å¼å®ç°ä¸Šçš„å¼‚åŒã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ Vue 2ï¼šæ•°æ®åŠ«æŒ + å‘å¸ƒè®¢é˜…</h2>
<h3 data-id="heading-2">1. æ ¸å¿ƒåŸç†</h3>
<p>Vue 2 åŸºäº <code>Object.defineProperty</code> å®ç°æ•°æ®åŠ«æŒï¼Œé€šè¿‡ <strong>Observerï¼ˆç›‘å¬å™¨ï¼‰</strong> ã€<strong>Compileï¼ˆè§£æå™¨ï¼‰</strong> å’Œ <strong>Watcherï¼ˆè®¢é˜…è€…ï¼‰</strong> çš„é…åˆå®Œæˆã€‚</p>
<h3 data-id="heading-3">2. å…³é”®æ­¥éª¤</h3>
<ol>
<li>
<p><strong>æ•°æ®åŠ«æŒ (Observer)</strong> ï¼šéå† <code>data</code> å±æ€§ï¼Œåˆ©ç”¨ <code>Object.defineProperty</code> æ³¨å…¥ <code>getter</code>ï¼ˆä¾èµ–æ”¶é›†ï¼‰å’Œ <code>setter</code>ï¼ˆåˆ†å‘æ›´æ–°ï¼‰ã€‚</p>
</li>
<li>
<p><strong>æ¨¡æ¿è§£æ (Compile)</strong> ï¼šè§£ææŒ‡ä»¤ï¼ˆå¦‚ <code>v-model</code>ï¼‰å’Œæ’å€¼è¡¨è¾¾å¼ï¼ˆ<code>{{}}</code>ï¼‰ï¼Œä¸ºæ¯ä¸ªç»‘å®šç‚¹åˆ›å»ºä¸€ä¸ª <strong>Watcher</strong>ã€‚</p>
</li>
<li>
<p><strong>ä¾èµ–æ”¶é›† (Dep)</strong> ï¼šæ¯ä¸ªå±æ€§å¯¹åº”ä¸€ä¸ª <code>Dep</code> å®¹å™¨ã€‚è¯»å–å±æ€§æ—¶ï¼Œå°†å¯¹åº”çš„ Watcher å­˜å…¥ Depã€‚</p>
</li>
<li>
<p><strong>æ´¾å‘æ›´æ–° (Watcher)</strong> ï¼šä¿®æ”¹æ•°æ®æ—¶ä¼šè§¦å‘ <code>setter</code>ï¼Œé€šçŸ¥æ‰€æœ‰å…³è”çš„ Watcher æ‰§è¡Œ <code>update</code> æ–¹æ³•æ›´æ–° DOMã€‚</p>
</li>
</ol>
<h3 data-id="heading-4">3. æºç ä»¿çœŸå®ç°</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Vue2 å“åº”å¼åŸç†ç®€æ˜“å®ç°<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- æµ‹è¯•æ¨¡æ¿ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{{ message }}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"message"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å¹´é¾„ï¼š{{ age }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"vm.age++"</span>&gt;</span>å¹´é¾„+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-comment">//  1. ä¾èµ–æ”¶é›†å™¨ Depï¼šç®¡ç†æ‰€æœ‰ Watcherï¼Œæ•°æ®å˜åŒ–æ—¶é€šçŸ¥æ›´æ–° </span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Dep</span> {
      <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">subs</span> = []; <span class="hljs-comment">// å­˜å‚¨è®¢é˜…è€…ï¼ˆWatcher å®ä¾‹ï¼‰</span>
      }

      <span class="hljs-comment">// æ·»åŠ è®¢é˜…è€…</span>
      <span class="hljs-title function_">addSub</span>(<span class="hljs-params">sub</span>) {
        <span class="hljs-keyword">if</span> (sub &amp;&amp; sub.<span class="hljs-property">update</span>) { <span class="hljs-comment">// ç¡®ä¿æ˜¯åˆæ³•çš„ Watcher</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">subs</span>.<span class="hljs-title function_">push</span>(sub);
        }
      }

      <span class="hljs-comment">// é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…æ›´æ–°</span>
      <span class="hljs-title function_">notify</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">subs</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">sub</span> =&gt;</span> sub.<span class="hljs-title function_">update</span>());
      }
    }

    <span class="hljs-comment">//  2. æ•°æ®åŠ«æŒå™¨ Observerï¼šåŠ«æŒ data æ‰€æœ‰å±æ€§çš„ get/set </span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Observer</span> {
      <span class="hljs-title function_">constructor</span>(<span class="hljs-params">data</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">observe</span>(data);
      }

      <span class="hljs-comment">// éå†æ•°æ®å¯¹è±¡ï¼ŒåŠ«æŒæ‰€æœ‰å±æ€§</span>
      <span class="hljs-title function_">observe</span>(<span class="hljs-params">data</span>) {
        <span class="hljs-keyword">if</span> (!data || <span class="hljs-keyword">typeof</span> data !== <span class="hljs-string">'object'</span>) {
          <span class="hljs-keyword">return</span>; <span class="hljs-comment">// éå¯¹è±¡ç›´æ¥è¿”å›</span>
        }

        <span class="hljs-comment">// éå†å¯¹è±¡çš„æ‰€æœ‰å±æ€§</span>
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(data).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">defineReactive</span>(data, key, data[key]);
        });
      }

      <span class="hljs-comment">// æ ¸å¿ƒï¼šç”¨ Object.defineProperty åŠ«æŒå•ä¸ªå±æ€§</span>
      <span class="hljs-title function_">defineReactive</span>(<span class="hljs-params">obj, key, value</span>) {
        <span class="hljs-keyword">const</span> dep = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dep</span>(); <span class="hljs-comment">// æ¯ä¸ªå±æ€§å¯¹åº”ä¸€ä¸ª Dep</span>
        <span class="hljs-keyword">const</span> that = <span class="hljs-variable language_">this</span>; <span class="hljs-comment">// ä¿å­˜ Observer å®ä¾‹çš„ this</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">observe</span>(value); <span class="hljs-comment">// é€’å½’åŠ«æŒå­å±æ€§ï¼ˆå¤„ç†åµŒå¥—å¯¹è±¡ï¼‰</span>

        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(obj, key, {
          <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¯æšä¸¾</span>
          <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¯é…ç½®</span>
          <span class="hljs-comment">// è¯»å–å±æ€§æ—¶è§¦å‘ï¼šæ”¶é›†ä¾èµ–</span>
          <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
            <span class="hljs-comment">// Dep.target æ˜¯å½“å‰æ­£åœ¨æ‰§è¡Œçš„ Watcherï¼Œæ·»åŠ åˆ° Dep ä¸­</span>
            <span class="hljs-title class_">Dep</span>.<span class="hljs-property">target</span> &amp;&amp; dep.<span class="hljs-title function_">addSub</span>(<span class="hljs-title class_">Dep</span>.<span class="hljs-property">target</span>);
            <span class="hljs-keyword">return</span> value;
          },
          <span class="hljs-comment">// èµ‹å€¼å±æ€§æ—¶è§¦å‘ï¼šé€šçŸ¥æ›´æ–°</span>
          <span class="hljs-title function_">set</span>(<span class="hljs-params">newValue</span>) {
            <span class="hljs-keyword">if</span> (newValue === value) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// å€¼æœªå˜åŒ–åˆ™ä¸å¤„ç†</span>
            value = newValue;
            that.<span class="hljs-title function_">observe</span>(newValue); <span class="hljs-comment">// ä½¿ç”¨ä¿å­˜çš„ that è°ƒç”¨ observe</span>
            dep.<span class="hljs-title function_">notify</span>(); <span class="hljs-comment">// é€šçŸ¥æ‰€æœ‰ Watcher æ›´æ–°</span>
          }
        });
      }
    }

    <span class="hljs-comment">//  3. è®¢é˜…è€… Watcherï¼šè¿æ¥ Observer å’Œ Compileï¼Œè´Ÿè´£æ›´æ–° DOM </span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Watcher</span> {
      <span class="hljs-comment">/**
       * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} <span class="hljs-variable">vm</span> - Vue å®ä¾‹
       * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">expr</span> - data ä¸­çš„å±æ€§åï¼ˆå¦‚ 'message'ï¼‰
       * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} <span class="hljs-variable">cb</span> - æ›´æ–° DOM çš„å›è°ƒå‡½æ•°
       */</span>
      <span class="hljs-title function_">constructor</span>(<span class="hljs-params">vm, expr, cb</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">vm</span> = vm;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">expr</span> = expr;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">cb</span> = cb;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">oldValue</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getOldValue</span>(); <span class="hljs-comment">// è®°å½•æ—§å€¼</span>
      }

      <span class="hljs-comment">// è·å–æ—§å€¼ï¼šè§¦å‘ get æ–¹æ³•ï¼Œå®Œæˆä¾èµ–æ”¶é›†</span>
      <span class="hljs-title function_">getOldValue</span>(<span class="hljs-params"/>) {
        <span class="hljs-title class_">Dep</span>.<span class="hljs-property">target</span> = <span class="hljs-variable language_">this</span>; <span class="hljs-comment">// å°†å½“å‰ Watcher æŒ‚è½½åˆ° Dep.target</span>
        <span class="hljs-keyword">const</span> oldValue = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getVal</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">vm</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">expr</span>); <span class="hljs-comment">// è¯»å–å±æ€§ï¼Œè§¦å‘ get</span>
        <span class="hljs-title class_">Dep</span>.<span class="hljs-property">target</span> = <span class="hljs-literal">null</span>; <span class="hljs-comment">// æ”¶é›†å®Œä¾èµ–åæ¸…ç©º</span>
        <span class="hljs-keyword">return</span> oldValue;
      }

      <span class="hljs-comment">// è§£æå±æ€§è·¯å¾„ï¼ˆå¤„ç†åµŒå¥—å¯¹è±¡ï¼Œå¦‚ 'user.name'ï¼‰</span>
      <span class="hljs-title function_">getVal</span>(<span class="hljs-params">vm, expr</span>) {
        <span class="hljs-keyword">return</span> expr.<span class="hljs-title function_">split</span>(<span class="hljs-string">'.'</span>).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">data, currentKey</span>) =&gt;</span> {
          <span class="hljs-keyword">return</span> data[currentKey];
        }, vm.<span class="hljs-property">$data</span>);
      }

      <span class="hljs-comment">// æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œï¼šæ›´æ–° DOM</span>
      <span class="hljs-title function_">update</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> newValue = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getVal</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">vm</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">expr</span>);
        <span class="hljs-keyword">if</span> (newValue !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">oldValue</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cb</span>(newValue); <span class="hljs-comment">// æ‰§è¡Œå›è°ƒæ›´æ–° DOM</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">oldValue</span> = newValue; <span class="hljs-comment">// æ›´æ–°æ—§å€¼</span>
        }
      }
    }

    <span class="hljs-comment">//  4. æ¨¡æ¿è§£æå™¨ Compileï¼šè§£æ v-model å’Œ {{}}ï¼Œåˆ›å»º Watcher </span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Compile</span> {
      <span class="hljs-title function_">constructor</span>(<span class="hljs-params">el, vm</span>) {
        <span class="hljs-comment">// è·å–æŒ‚è½½å…ƒç´ ï¼ˆæ”¯æŒé€‰æ‹©å™¨æˆ– DOM å…ƒç´ ï¼‰</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">el</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isElementNode</span>(el) ? el : <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(el);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">vm</span> = vm;
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">el</span>) {
          <span class="hljs-comment">// 1. å°†æ¨¡æ¿å†…å®¹ç§»åˆ°æ–‡æ¡£ç¢ç‰‡ä¸­ï¼ˆå‡å°‘ DOM æ“ä½œï¼Œæå‡æ€§èƒ½ï¼‰</span>
          <span class="hljs-keyword">const</span> fragment = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">node2Fragment</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">el</span>);
          <span class="hljs-comment">// 2. è§£ææ¨¡æ¿ä¸­çš„æŒ‡ä»¤å’Œæ’å€¼è¡¨è¾¾å¼</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">compile</span>(fragment);
          <span class="hljs-comment">// 3. å°†è§£æåçš„ç¢ç‰‡æ”¾å›åŸå…ƒç´ </span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">el</span>.<span class="hljs-title function_">appendChild</span>(fragment);
        }
      }

      <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦æ˜¯å…ƒç´ èŠ‚ç‚¹ï¼ˆå¦‚ divã€inputï¼‰</span>
      <span class="hljs-title function_">isElementNode</span>(<span class="hljs-params">node</span>) {
        <span class="hljs-keyword">return</span> node.<span class="hljs-property">nodeType</span> === <span class="hljs-number">1</span>;
      }

      <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦æ˜¯æŒ‡ä»¤ï¼ˆä»¥ v- å¼€å¤´ï¼‰</span>
      <span class="hljs-title function_">isDirective</span>(<span class="hljs-params">attrName</span>) {
        <span class="hljs-keyword">return</span> attrName.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'v-'</span>);
      }

      <span class="hljs-comment">// å°†èŠ‚ç‚¹ç§»åˆ°æ–‡æ¡£ç¢ç‰‡</span>
      <span class="hljs-title function_">node2Fragment</span>(<span class="hljs-params">el</span>) {
        <span class="hljs-keyword">const</span> fragment = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createDocumentFragment</span>();
        <span class="hljs-keyword">let</span> firstChild;
        <span class="hljs-keyword">while</span> (firstChild = el.<span class="hljs-property">firstChild</span>) {
          fragment.<span class="hljs-title function_">appendChild</span>(firstChild); <span class="hljs-comment">// ç§»åŠ¨èŠ‚ç‚¹ï¼ˆåŸèŠ‚ç‚¹ä¼šè¢«ç§»é™¤ï¼‰</span>
        }
        <span class="hljs-keyword">return</span> fragment;
      }

      <span class="hljs-comment">// æ ¸å¿ƒï¼šè§£ææ–‡æ¡£ç¢ç‰‡ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹</span>
      <span class="hljs-title function_">compile</span>(<span class="hljs-params">fragment</span>) {
        <span class="hljs-keyword">const</span> childNodes = fragment.<span class="hljs-property">childNodes</span>;
        <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(childNodes).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">node</span> =&gt;</span> {
          <span class="hljs-comment">// 1. å¤„ç†å…ƒç´ èŠ‚ç‚¹ï¼ˆè§£æ v-model ç­‰æŒ‡ä»¤ï¼‰</span>
          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isElementNode</span>(node)) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">compileElement</span>(node);
          } 
          <span class="hljs-comment">// 2. å¤„ç†æ–‡æœ¬èŠ‚ç‚¹ï¼ˆè§£æ {{}} æ’å€¼ï¼‰</span>
          <span class="hljs-keyword">else</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">compileText</span>(node);
          }
          <span class="hljs-comment">// é€’å½’è§£æå­èŠ‚ç‚¹ï¼ˆå¤„ç†åµŒå¥—æ¨¡æ¿ï¼‰</span>
          <span class="hljs-keyword">if</span> (node.<span class="hljs-property">childNodes</span> &amp;&amp; node.<span class="hljs-property">childNodes</span>.<span class="hljs-property">length</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">compile</span>(node);
          }
        });
      }

      <span class="hljs-comment">// è§£æå…ƒç´ èŠ‚ç‚¹ï¼ˆå¦‚ v-modelï¼‰</span>
      <span class="hljs-title function_">compileElement</span>(<span class="hljs-params">node</span>) {
        <span class="hljs-keyword">const</span> attrs = node.<span class="hljs-property">attributes</span>;
        <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(attrs).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">attr</span> =&gt;</span> {
          <span class="hljs-keyword">const</span> attrName = attr.<span class="hljs-property">name</span>;
          <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦æ˜¯æŒ‡ä»¤</span>
          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isDirective</span>(attrName)) {
            <span class="hljs-keyword">const</span> expr = attr.<span class="hljs-property">value</span>; <span class="hljs-comment">// æŒ‡ä»¤å¯¹åº”çš„æ•°æ®å±æ€§ï¼ˆå¦‚ 'message'ï¼‰</span>
            <span class="hljs-keyword">const</span> [, directive] = attrName.<span class="hljs-title function_">split</span>(<span class="hljs-string">'-'</span>); <span class="hljs-comment">// æå–æŒ‡ä»¤åï¼ˆå¦‚ 'model'ï¼‰</span>
            <span class="hljs-comment">// æ‰§è¡ŒæŒ‡ä»¤å¯¹åº”çš„æ›´æ–°æ–¹æ³•</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">compileUtil</span>[directive](node, <span class="hljs-variable language_">this</span>.<span class="hljs-property">vm</span>, expr);
          }
        });
      }

      <span class="hljs-comment">// è§£ææ–‡æœ¬èŠ‚ç‚¹ï¼ˆ{{}} æ’å€¼ï¼‰</span>
      <span class="hljs-title function_">compileText</span>(<span class="hljs-params">node</span>) {
        <span class="hljs-keyword">const</span> textContent = node.<span class="hljs-property">textContent</span>;
        <span class="hljs-comment">// æ­£åˆ™åŒ¹é… {{xxx}} æ ¼å¼</span>
        <span class="hljs-keyword">const</span> reg = <span class="hljs-regexp">/\{\{(.+?)\}\}/g</span>;
        <span class="hljs-keyword">if</span> (reg.<span class="hljs-title function_">test</span>(textContent)) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">compileUtil</span>.<span class="hljs-title function_">text</span>(node, <span class="hljs-variable language_">this</span>.<span class="hljs-property">vm</span>, textContent);
        }
      }

      <span class="hljs-comment">// æŒ‡ä»¤å¤„ç†å·¥å…·é›†</span>
      compileUtil = {
        <span class="hljs-comment">// è·å–æ•°æ®å±æ€§çš„å€¼</span>
        <span class="hljs-title function_">getVal</span>(<span class="hljs-params">vm, expr</span>) {
          <span class="hljs-keyword">return</span> expr.<span class="hljs-title function_">split</span>(<span class="hljs-string">'.'</span>).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">data, currentKey</span>) =&gt;</span> {
            <span class="hljs-keyword">return</span> data[currentKey];
          }, vm.<span class="hljs-property">$data</span>);
        },

        <span class="hljs-comment">// è®¾ç½®æ•°æ®å±æ€§çš„å€¼ï¼ˆç”¨äº v-modelï¼‰</span>
        <span class="hljs-title function_">setVal</span>(<span class="hljs-params">vm, expr, value</span>) {
          <span class="hljs-keyword">return</span> expr.<span class="hljs-title function_">split</span>(<span class="hljs-string">'.'</span>).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">data, currentKey, index, arr</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (index === arr.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>) {
              <span class="hljs-keyword">return</span> data[currentKey] = value;
            }
            <span class="hljs-keyword">return</span> data[currentKey];
          }, vm.<span class="hljs-property">$data</span>);
        },

        <span class="hljs-comment">// å¤„ç† v-model æŒ‡ä»¤</span>
        <span class="hljs-title function_">model</span>(<span class="hljs-params">node, vm, expr</span>) {
          <span class="hljs-keyword">const</span> updateFn = <span class="hljs-variable language_">this</span>.<span class="hljs-property">updater</span>.<span class="hljs-property">modelUpdater</span>;
          <span class="hljs-comment">// 1. åˆå§‹åŒ–ï¼šè®¾ç½®è¾“å…¥æ¡†é»˜è®¤å€¼</span>
          <span class="hljs-title function_">updateFn</span>(node, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getVal</span>(vm, expr));
          <span class="hljs-comment">// 2. åˆ›å»º Watcherï¼šæ•°æ®å˜åŒ–æ—¶æ›´æ–°è¾“å…¥æ¡†</span>
          <span class="hljs-keyword">new</span> <span class="hljs-title class_">Watcher</span>(vm, expr, <span class="hljs-function">(<span class="hljs-params">newValue</span>) =&gt;</span> {
            <span class="hljs-title function_">updateFn</span>(node, newValue);
          });
          <span class="hljs-comment">// 3. ç›‘å¬è¾“å…¥æ¡†äº‹ä»¶ï¼šè¾“å…¥å†…å®¹åŒæ­¥åˆ° data</span>
          node.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'input'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
            <span class="hljs-keyword">const</span> newValue = e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>;
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setVal</span>(vm, expr, newValue);
          });
        },

        <span class="hljs-comment">// å¤„ç† {{}} æ’å€¼æ–‡æœ¬</span>
        <span class="hljs-title function_">text</span>(<span class="hljs-params">node, vm, expr</span>) {
          <span class="hljs-keyword">const</span> updateFn = <span class="hljs-variable language_">this</span>.<span class="hljs-property">updater</span>.<span class="hljs-property">textUpdater</span>;
          <span class="hljs-comment">// æ›¿æ¢ {{}} ä¸ºçœŸå®æ•°æ®</span>
          <span class="hljs-keyword">const</span> content = expr.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\{\{(.+?)\}\}/g</span>, <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
            <span class="hljs-keyword">const</span> prop = args[<span class="hljs-number">1</span>].<span class="hljs-title function_">trim</span>();
            <span class="hljs-comment">// åˆ›å»º Watcherï¼šæ•°æ®å˜åŒ–æ—¶æ›´æ–°æ–‡æœ¬</span>
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Watcher</span>(vm, prop, <span class="hljs-function">(<span class="hljs-params">newValue</span>) =&gt;</span> {
              <span class="hljs-title function_">updateFn</span>(node, <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getContentValue</span>(vm, expr));
            });
            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getVal</span>(vm, prop);
          });
          <span class="hljs-comment">// åˆå§‹åŒ–æ–‡æœ¬å†…å®¹</span>
          <span class="hljs-title function_">updateFn</span>(node, content);
        },

        <span class="hljs-comment">// è·å–æ’å€¼æ–‡æœ¬çš„å®Œæ•´å†…å®¹ï¼ˆå¤„ç†å¤šä¸ª {{}} æƒ…å†µï¼‰</span>
        <span class="hljs-title function_">getContentValue</span>(<span class="hljs-params">vm, expr</span>) {
          <span class="hljs-keyword">return</span> expr.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\{\{(.+?)\}\}/g</span>, <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getVal</span>(vm, args[<span class="hljs-number">1</span>].<span class="hljs-title function_">trim</span>());
          });
        },

        <span class="hljs-comment">// DOM æ›´æ–°æ–¹æ³•é›†</span>
        <span class="hljs-attr">updater</span>: {
          <span class="hljs-comment">// æ›´æ–° v-model æŒ‡ä»¤çš„ DOMï¼ˆè¾“å…¥æ¡†å€¼ï¼‰</span>
          <span class="hljs-title function_">modelUpdater</span>(<span class="hljs-params">node, value</span>) {
            node.<span class="hljs-property">value</span> = value;
          },
          <span class="hljs-comment">// æ›´æ–°æ–‡æœ¬èŠ‚ç‚¹å†…å®¹</span>
          <span class="hljs-title function_">textUpdater</span>(<span class="hljs-params">node, value</span>) {
            node.<span class="hljs-property">textContent</span> = value;
          }
        }
      };
    }

    <span class="hljs-comment">//  5. Vue æ ¸å¿ƒç±»ï¼šæ•´åˆæ‰€æœ‰æ¨¡å— </span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Vue</span> {
      <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">$el</span> = options.<span class="hljs-property">el</span>; <span class="hljs-comment">// æŒ‚è½½å…ƒç´ </span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">$data</span> = options.<span class="hljs-property">data</span>; <span class="hljs-comment">// å“åº”å¼æ•°æ®</span>

        <span class="hljs-comment">// 1. å¦‚æœæœ‰æŒ‚è½½å…ƒç´ ï¼Œåˆå§‹åŒ–å“åº”å¼</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">$el</span>) {
          <span class="hljs-comment">// åŠ«æŒ data æ‰€æœ‰å±æ€§</span>
          <span class="hljs-keyword">new</span> <span class="hljs-title class_">Observer</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$data</span>);
          <span class="hljs-comment">// ä»£ç† data å±æ€§åˆ° Vue å®ä¾‹ï¼ˆå¯é€šè¿‡ vm.message è®¿é—® vm.$data.messageï¼‰</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">proxyData</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$data</span>);
          <span class="hljs-comment">// è§£ææ¨¡æ¿</span>
          <span class="hljs-keyword">new</span> <span class="hljs-title class_">Compile</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$el</span>, <span class="hljs-variable language_">this</span>);
        }
      }

      <span class="hljs-comment">// ä»£ç† data å±æ€§åˆ° Vue å®ä¾‹</span>
      <span class="hljs-title function_">proxyData</span>(<span class="hljs-params">data</span>) {
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(data).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
          <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-variable language_">this</span>, key, {
            <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
              <span class="hljs-keyword">return</span> data[key];
            },
            <span class="hljs-title function_">set</span>(<span class="hljs-params">newValue</span>) {
              data[key] = newValue;
            }
          });
        });
      }
    }

    <span class="hljs-comment">//  æµ‹è¯•ä¾‹å­ </span>
    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({
      <span class="hljs-attr">el</span>: <span class="hljs-string">'#app'</span>,
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">message</span>: <span class="hljs-string">'Hello Vue2 å“åº”å¼ï¼'</span>,
        <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>
      }
    });
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h2 data-id="heading-5">äºŒã€ Vue 3ï¼šåŸºäº Proxy çš„å‡çº§è¿›åŒ–</h2>
<h3 data-id="heading-6">1. æ ¸å¿ƒæ”¹è¿›</h3>
<p>Vue 3 å½»åº•æ”¾å¼ƒäº† <code>Object.defineProperty</code>ï¼Œè½¬è€Œä½¿ç”¨ ES6 çš„ <code>Proxy</code>ã€‚å®ƒä¸ä»…è§£å†³äº† Vue 2 æ— æ³•ç›‘å¬å¯¹è±¡æ–°å¢å±æ€§å’Œæ•°ç»„ç´¢å¼•çš„é—®é¢˜ï¼Œè¿˜æ˜¾è‘—æå‡äº†åˆå§‹åŒ–æ€§èƒ½ã€‚</p>
<h3 data-id="heading-7">2. å“åº”å¼æµç¨‹</h3>
<ol>
<li>
<p><strong>Proxy ä»£ç†</strong>ï¼šæ‹¦æˆªå¯¹è±¡çš„ <code>get</code> å’Œ <code>set</code>ã€‚</p>
</li>
<li>
<p><strong>ä¾èµ–è¿½è¸ª (Track)</strong> ï¼šåœ¨ <code>get</code> æ—¶ï¼Œå°†å½“å‰æ­£åœ¨æ‰§è¡Œçš„ <code>Effect</code>ï¼ˆå‰¯ä½œç”¨å‡½æ•°ï¼‰è®°å½•åœ¨å…¨å±€æ˜ å°„è¡¨ <code>targetMap</code> ä¸­ã€‚</p>
</li>
<li>
<p><strong>è§¦å‘æ›´æ–° (Trigger)</strong> ï¼šåœ¨ <code>set</code> æ—¶ï¼Œä» <code>targetMap</code> ä¸­æ‰¾åˆ°è¯¥å±æ€§å¯¹åº”çš„æ‰€æœ‰ <code>Effect</code> å¹¶é‡æ–°æ‰§è¡Œã€‚</p>
</li>
</ol>
<h3 data-id="heading-8">3. æºç ä»¿çœŸå®ç°</h3>
<p>åœ¨ Vue3ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ <code>reactive</code> å£°æ˜å“åº”å¼æ•°æ®ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Vue3 åŒå‘æ•°æ®ç»‘å®šç®€æ˜“å®ç°<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- æµ‹è¯•æ¨¡æ¿ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{{ message }}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"message"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å¹´é¾„ï¼š{{ user.age }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>  <span class="hljs-attr">onclick</span>=<span class="hljs-string">"state.user.age++"</span>&gt;</span>å¹´é¾„+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"user.age"</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-comment">//  1. ä¾èµ–ç®¡ç†æ ¸å¿ƒï¼šå­˜å‚¨ã€Œæ•°æ®-å‰¯ä½œç”¨ã€æ˜ å°„ </span>
    <span class="hljs-keyword">const</span> targetMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>(); <span class="hljs-comment">// å…¨å±€ä¾èµ–æ˜ å°„ï¼štarget â†’ key â†’ effects</span>
    <span class="hljs-keyword">let</span> activeEffect = <span class="hljs-literal">null</span>; <span class="hljs-comment">// å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‰¯ä½œç”¨å‡½æ•°</span>

    <span class="hljs-comment">// æ”¶é›†ä¾èµ–ï¼ˆè¿½è¸ªï¼‰</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">track</span>(<span class="hljs-params">target, key</span>) {
      <span class="hljs-keyword">if</span> (!activeEffect) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// æ— å‰¯ä½œç”¨å‡½æ•°åˆ™ä¸æ”¶é›†</span>
      <span class="hljs-comment">// 1. è·å– target å¯¹åº”çš„ä¾èµ–æ˜ å°„</span>
      <span class="hljs-keyword">let</span> depsMap = targetMap.<span class="hljs-title function_">get</span>(target);
      <span class="hljs-keyword">if</span> (!depsMap) {
        depsMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
        targetMap.<span class="hljs-title function_">set</span>(target, depsMap);
      }
      <span class="hljs-comment">// 2. è·å– key å¯¹åº”çš„å‰¯ä½œç”¨é›†åˆ</span>
      <span class="hljs-keyword">let</span> deps = depsMap.<span class="hljs-title function_">get</span>(key);
      <span class="hljs-keyword">if</span> (!deps) {
        deps = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(); <span class="hljs-comment">// ç”¨ Set é¿å…é‡å¤å‰¯ä½œç”¨</span>
        depsMap.<span class="hljs-title function_">set</span>(key, deps);
      }
      <span class="hljs-comment">// 3. æ·»åŠ å½“å‰å‰¯ä½œç”¨åˆ°é›†åˆ</span>
      deps.<span class="hljs-title function_">add</span>(activeEffect);
    }

    <span class="hljs-comment">// è§¦å‘ä¾èµ–æ›´æ–°</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">trigger</span>(<span class="hljs-params">target, key</span>) {
      <span class="hljs-comment">// 1. è·å– target å¯¹åº”çš„ä¾èµ–æ˜ å°„</span>
      <span class="hljs-keyword">const</span> depsMap = targetMap.<span class="hljs-title function_">get</span>(target);
      <span class="hljs-keyword">if</span> (!depsMap) <span class="hljs-keyword">return</span>;
      <span class="hljs-comment">// 2. è·å– key å¯¹åº”çš„å‰¯ä½œç”¨é›†åˆ</span>
      <span class="hljs-keyword">const</span> deps = depsMap.<span class="hljs-title function_">get</span>(key);
      <span class="hljs-keyword">if</span> (!deps) <span class="hljs-keyword">return</span>;
      <span class="hljs-comment">// 3. æ‰§è¡Œæ‰€æœ‰å‰¯ä½œç”¨å‡½æ•°</span>
      deps.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">effect</span> =&gt;</span> <span class="hljs-title function_">effect</span>());
    }

    <span class="hljs-comment">//  2. åˆ›å»ºå“åº”å¼å¯¹è±¡ï¼šreactiveï¼ˆåŸºäº Proxy + Reflectï¼‰ </span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">reactive</span>(<span class="hljs-params">target</span>) {
      <span class="hljs-comment">// éå¯¹è±¡ç›´æ¥è¿”å›</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> target !== <span class="hljs-string">'object'</span> || target === <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> target;
      }

      <span class="hljs-comment">// åˆ›å»º Proxy ä»£ç†</span>
      <span class="hljs-keyword">const</span> proxy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(target, {
        <span class="hljs-comment">// æ‹¦æˆªå±æ€§è¯»å–</span>
        <span class="hljs-title function_">get</span>(<span class="hljs-params">target, key, receiver</span>) {
          <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, key, receiver);
          <span class="hljs-title function_">track</span>(target, key); <span class="hljs-comment">// æ”¶é›†ä¾èµ–</span>
          <span class="hljs-comment">// é€’å½’å¤„ç†åµŒå¥—å¯¹è±¡ï¼ˆæ‡’ä»£ç†ï¼Œè¯»å–æ—¶æ‰åˆ›å»ºå“åº”å¼ï¼‰</span>
          <span class="hljs-keyword">return</span> <span class="hljs-title function_">reactive</span>(result);
        },
        <span class="hljs-comment">// æ‹¦æˆªå±æ€§èµ‹å€¼</span>
        <span class="hljs-title function_">set</span>(<span class="hljs-params">target, key, value, receiver</span>) {
          <span class="hljs-keyword">const</span> oldValue = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, key, receiver);
          <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, key, value, receiver);
          <span class="hljs-comment">// å€¼å˜åŒ–æ‰è§¦å‘æ›´æ–°</span>
          <span class="hljs-keyword">if</span> (oldValue !== value) {
            <span class="hljs-title function_">trigger</span>(target, key); <span class="hljs-comment">// è§¦å‘ä¾èµ–æ›´æ–°</span>
          }
          <span class="hljs-keyword">return</span> result;
        },
        <span class="hljs-comment">// æ‹¦æˆªå±æ€§åˆ é™¤ï¼ˆå¯é€‰ï¼Œè¡¥å……å®Œæ•´åº¦ï¼‰</span>
        <span class="hljs-title function_">deleteProperty</span>(<span class="hljs-params">target, key</span>) {
          <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">deleteProperty</span>(target, key);
          <span class="hljs-title function_">trigger</span>(target, key);
          <span class="hljs-keyword">return</span> result;
        }
      });

      <span class="hljs-keyword">return</span> proxy;
    }

    <span class="hljs-comment">//  3. å‰¯ä½œç”¨å‡½æ•°ï¼šeffectï¼ˆä¾èµ–æ”¶é›†çš„å…¥å£ï¼‰ </span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">effect</span>(<span class="hljs-params">fn</span>) {
      <span class="hljs-comment">// åŒ…è£…å‰¯ä½œç”¨å‡½æ•°</span>
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">effectFn</span> = (<span class="hljs-params"/>) =&gt; {
        activeEffect = effectFn; <span class="hljs-comment">// æ ‡è®°å½“å‰å‰¯ä½œç”¨</span>
        <span class="hljs-title function_">fn</span>(); <span class="hljs-comment">// æ‰§è¡Œå‡½æ•°ï¼Œè§¦å‘ get æ‹¦æˆªï¼Œæ”¶é›†ä¾èµ–</span>
        activeEffect = <span class="hljs-literal">null</span>; <span class="hljs-comment">// é‡ç½®</span>
      };
      <span class="hljs-title function_">effectFn</span>(); <span class="hljs-comment">// ç«‹å³æ‰§è¡Œä¸€æ¬¡ï¼Œå®Œæˆåˆå§‹ä¾èµ–æ”¶é›†</span>
      <span class="hljs-keyword">return</span> effectFn;
    }

    <span class="hljs-comment">//  4. æ¨¡æ¿è§£æå™¨ï¼šCompileï¼ˆè§£æ {{}} å’Œ v-modelï¼‰ </span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Compile</span> {
      <span class="hljs-title function_">constructor</span>(<span class="hljs-params">el, data</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">el</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(el); <span class="hljs-comment">// æŒ‚è½½å…ƒç´ </span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span> = data; <span class="hljs-comment">// å“åº”å¼æ•°æ®</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">fragment</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createFragment</span>(); <span class="hljs-comment">// åˆ›å»ºæ–‡æ¡£ç¢ç‰‡</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">compile</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">fragment</span>); <span class="hljs-comment">// è§£ææ¨¡æ¿</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">el</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">fragment</span>); <span class="hljs-comment">// æŒ‚è½½åˆ° DOM</span>
      }

      <span class="hljs-comment">// åˆ›å»ºæ–‡æ¡£ç¢ç‰‡ï¼ˆå‡å°‘ DOM æ“ä½œï¼‰</span>
      <span class="hljs-title function_">createFragment</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> fragment = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createDocumentFragment</span>();
        <span class="hljs-keyword">let</span> child;
        <span class="hljs-keyword">while</span> (child = <span class="hljs-variable language_">this</span>.<span class="hljs-property">el</span>.<span class="hljs-property">firstChild</span>) {
          fragment.<span class="hljs-title function_">appendChild</span>(child);
        }
        <span class="hljs-keyword">return</span> fragment;
      }

      <span class="hljs-comment">// æ ¸å¿ƒè§£ææ–¹æ³•</span>
      <span class="hljs-title function_">compile</span>(<span class="hljs-params">node</span>) {
        <span class="hljs-keyword">if</span> (node.<span class="hljs-property">nodeType</span> === <span class="hljs-number">1</span>) { <span class="hljs-comment">// å…ƒç´ èŠ‚ç‚¹ï¼ˆè§£æ v-modelï¼‰</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">compileElement</span>(node);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (node.<span class="hljs-property">nodeType</span> === <span class="hljs-number">3</span> &amp;&amp; <span class="hljs-regexp">/\{\{(.+?)\}\}/</span>.<span class="hljs-title function_">test</span>(node.<span class="hljs-property">textContent</span>)) { <span class="hljs-comment">// æ–‡æœ¬èŠ‚ç‚¹ï¼ˆè§£æ {{}}ï¼‰</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">compileText</span>(node);
        }

        <span class="hljs-comment">// é€’å½’è§£æå­èŠ‚ç‚¹</span>
        node.<span class="hljs-property">childNodes</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">child</span> =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">compile</span>(child));
      }

      <span class="hljs-comment">// è§£æå…ƒç´ èŠ‚ç‚¹ï¼ˆv-model æŒ‡ä»¤ï¼‰</span>
      <span class="hljs-title function_">compileElement</span>(<span class="hljs-params">node</span>) {
        <span class="hljs-keyword">const</span> attrs = node.<span class="hljs-property">attributes</span>;
        <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(attrs).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">attr</span> =&gt;</span> {
          <span class="hljs-keyword">const</span> { name, value } = attr;
          <span class="hljs-keyword">if</span> (name === <span class="hljs-string">'v-model'</span>) { <span class="hljs-comment">// å¤„ç† v-model</span>
            <span class="hljs-comment">// 1. åˆå§‹åŒ–ï¼šç”¨å“åº”å¼æ•°æ®è®¾ç½® DOM å€¼</span>
            node.<span class="hljs-property">value</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getVal</span>(value);
            <span class="hljs-comment">// 2. ç›‘å¬è¾“å…¥äº‹ä»¶ï¼ŒåŒæ­¥åˆ°å“åº”å¼æ•°æ®</span>
            node.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'input'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setVal</span>(value, e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>);
            });
            <span class="hljs-comment">// 3. ç›‘å¬æ•°æ®å˜åŒ–ï¼Œæ›´æ–° DOM</span>
            <span class="hljs-title function_">effect</span>(<span class="hljs-function">() =&gt;</span> {
              node.<span class="hljs-property">value</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getVal</span>(value);
            });
            <span class="hljs-comment">// ç§»é™¤æŒ‡ä»¤å±æ€§ï¼ˆå¯é€‰ï¼Œç¾åŒ– DOMï¼‰</span>
            node.<span class="hljs-title function_">removeAttribute</span>(name);
          }
        });
      }

      <span class="hljs-comment">// è§£ææ–‡æœ¬èŠ‚ç‚¹ï¼ˆ{{}} æ’å€¼ï¼‰</span>
      <span class="hljs-title function_">compileText</span>(<span class="hljs-params">node</span>) {
        <span class="hljs-keyword">const</span> reg = <span class="hljs-regexp">/\{\{(.+?)\}\}/g</span>;
        <span class="hljs-keyword">const</span> text = node.<span class="hljs-property">textContent</span>;
        <span class="hljs-comment">// æ›¿æ¢ {{}} ä¸ºçœŸå®æ•°æ®ï¼Œå¹¶åˆ›å»ºå‰¯ä½œç”¨</span>
        node.<span class="hljs-property">textContent</span> = text.<span class="hljs-title function_">replace</span>(reg, <span class="hljs-function">(<span class="hljs-params">_, expr</span>) =&gt;</span> {
          <span class="hljs-keyword">const</span> prop = expr.<span class="hljs-title function_">trim</span>();
          <span class="hljs-comment">// ç›‘å¬æ•°æ®å˜åŒ–ï¼Œæ›´æ–°æ–‡æœ¬</span>
          <span class="hljs-title function_">effect</span>(<span class="hljs-function">() =&gt;</span> {
            node.<span class="hljs-property">textContent</span> = text.<span class="hljs-title function_">replace</span>(reg, <span class="hljs-function">(<span class="hljs-params">_, innerExpr</span>) =&gt;</span> {
              <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getVal</span>(innerExpr.<span class="hljs-title function_">trim</span>());
            });
          });
          <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getVal</span>(prop);
        });
      }

      <span class="hljs-comment">// è·å–å“åº”å¼æ•°æ®çš„å€¼ï¼ˆå¤„ç†åµŒå¥—ï¼Œå¦‚ user.ageï¼‰</span>
      <span class="hljs-title function_">getVal</span>(<span class="hljs-params">expr</span>) {
        <span class="hljs-keyword">return</span> expr.<span class="hljs-title function_">split</span>(<span class="hljs-string">'.'</span>).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">data, key</span>) =&gt;</span> {
          <span class="hljs-keyword">return</span> data[key];
        }, <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>);
      }

      <span class="hljs-comment">// è®¾ç½®å“åº”å¼æ•°æ®çš„å€¼ï¼ˆå¤„ç†åµŒå¥—ï¼Œå¦‚ user.ageï¼‰</span>
      <span class="hljs-title function_">setVal</span>(<span class="hljs-params">expr, value</span>) {
        <span class="hljs-keyword">return</span> expr.<span class="hljs-title function_">split</span>(<span class="hljs-string">'.'</span>).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">data, key, index, arr</span>) =&gt;</span> {
          <span class="hljs-keyword">if</span> (index === arr.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>) {
            <span class="hljs-comment">// å¤„ç†æ•°å­—ç±»å‹ï¼ˆå¦‚ ageï¼‰</span>
            <span class="hljs-keyword">return</span> data[key] = <span class="hljs-built_in">isNaN</span>(<span class="hljs-title class_">Number</span>(value)) ? value : <span class="hljs-title class_">Number</span>(value);
          }
          <span class="hljs-keyword">return</span> data[key];
        }, <span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>);
      }
    }

    <span class="hljs-comment">//  4. æµ‹è¯•ä»£ç  </span>
    <span class="hljs-comment">// 1. åˆ›å»ºå“åº”å¼æ•°æ®</span>
    <span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({
      <span class="hljs-attr">message</span>: <span class="hljs-string">'Hello Vue3 åŒå‘ç»‘å®šï¼'</span>,
      <span class="hljs-attr">user</span>: {
        <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>
      }
    });

    <span class="hljs-comment">// 2. è§£ææ¨¡æ¿ï¼Œå®ŒæˆåŒå‘ç»‘å®š</span>
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Compile</span>(<span class="hljs-string">'#app'</span>, state);

    <span class="hljs-comment">// æš´éœ²åˆ°å…¨å±€ï¼Œæ–¹ä¾¿æ§åˆ¶å°æµ‹è¯•</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">state</span> = state;
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>

</code></pre>
<h2 data-id="heading-9">ä¸‰ã€ æ€»ç»“ï¼šVue 2 vs Vue 3 å“åº”å¼å¯¹æ¯”</h2>






























<table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>Vue 2 (defineProperty)</strong></th><th><strong>Vue 3 (Proxy)</strong></th></tr></thead><tbody><tr><td><strong>æ€§èƒ½</strong></td><td>å¿…é¡»å…¨é‡éå†å±æ€§ï¼Œå¼€é”€å¤§</td><td>æ‡’ä»£ç†ï¼ˆè¯»å–æ—¶æ‰å¤„ç†ï¼‰ï¼Œæ›´é«˜æ•ˆ</td></tr><tr><td><strong>åŠ¨æ€æ€§</strong></td><td>æ— æ³•æ£€æµ‹å±æ€§æ–°å¢ã€åˆ é™¤</td><td>å®Œç¾æ”¯æŒå±æ€§æ–°å¢ã€åˆ é™¤åŠæ•°ç»„ç´¢å¼•</td></tr><tr><td><strong>å®ç°å¤æ‚åº¦</strong></td><td>éœ€è¦æ‰‹åŠ¨é‡å†™æ•°ç»„æ–¹æ³•</td><td>åŸç”Ÿæ”¯æŒæ‰€æœ‰å¯¹è±¡æ“ä½œ</td></tr><tr><td><strong>å…¼å®¹æ€§</strong></td><td>æ”¯æŒ IE9+</td><td>ä¸æ”¯æŒ IE (ä¾èµ– ES6)</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å›¢é˜Ÿå®ªæ³•:CLAUDE.md å’Œruleä½¿ç”¨æŠ€å·§ä¸å¤åˆ©æ¨¡å¼]]></title>    <link>https://juejin.cn/post/7602454700503646249</link>    <guid>https://juejin.cn/post/7602454700503646249</guid>    <pubDate>2026-02-03T12:33:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602454700503646249" data-draft-id="7602503154505089065" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å›¢é˜Ÿå®ªæ³•:CLAUDE.md å’Œruleä½¿ç”¨æŠ€å·§ä¸å¤åˆ©æ¨¡å¼"/> <meta itemprop="keywords" content="Claude,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-02-03T12:33:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å›¢é˜Ÿå®ªæ³•:CLAUDE.md å’Œruleä½¿ç”¨æŠ€å·§ä¸å¤åˆ©æ¨¡å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T12:33:46.000Z" title="Tue Feb 03 2026 12:33:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»22åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯?</p>
<blockquote>
<p><strong>åœºæ™¯ 1: è§„èŒƒæ‰§è¡Œé "å¼"</strong></p>
<ul>
<li>ä»£ç è¯„å®¡æ—¶:"è¿™ä¸ªå‘½åä¸ç¬¦åˆè§„èŒƒå•Š,æ”¹ä¸€ä¸‹"</li>
<li>æäº¤ä»£ç æ—¶:"æäº¤ä¿¡æ¯æ ¼å¼ä¸å¯¹,é‡æ–°å†™"</li>
<li>å†™å®ŒåŠŸèƒ½å:"æµ‹è¯•å‘¢?å•å…ƒæµ‹è¯•å†™äº†å—?"</li>
<li>æ¯æ¬¡éƒ½è¦æé†’,æ¯æ¬¡éƒ½è¦è¿”å·¥</li>
</ul>
</blockquote>
<blockquote>
<p><strong>åœºæ™¯ 2: AI åŠ©æ‰‹"ä¸å¬è¯"</strong></p>
<ul>
<li>Claude Code ç”Ÿæˆçš„ä»£ç é£æ ¼ä¹±ä¸ƒå…«ç³Ÿ</li>
<li>å‡½æ•°å‘½åæœ‰æ—¶é©¼å³°æœ‰æ—¶ä¸‹åˆ’çº¿</li>
<li>æ³¨é‡Šå†™å¾—åƒå¤©ä¹¦,æˆ–è€…å¹²è„†ä¸å†™</li>
<li>æ¯æ¬¡éƒ½è¦æ‰‹åŠ¨ä¿®æ”¹,æ•ˆç‡å¤§æ‰“æŠ˜æ‰£</li>
</ul>
</blockquote>
<p>ä¼ ç»Ÿå›¢é˜Ÿé "äººç›¯äºº"æ‰§è¡Œè§„èŒƒ,æ•ˆç‡ä½ã€æˆæœ¬é«˜ã€å®¹æ˜“é—æ¼ã€‚è€Œ AI è¾…åŠ©å¼€å‘æ—¶ä»£,å¦‚æœæ²¡æœ‰æ˜ç¡®çš„è§„èŒƒ,AI ç”Ÿæˆçš„ä»£ç è´¨é‡å‚å·®ä¸é½,åè€Œå¢åŠ äº†ç»´æŠ¤è´Ÿæ‹…ã€‚</p>
<p><strong>ç­”æ¡ˆæ˜¯</strong>: <strong>å›¢é˜Ÿå®ªæ³• â€” CLAUDE.md + rules/</strong></p>
<p>å°±åƒå›½å®¶éœ€è¦å®ªæ³•æ¥è§„å®šåŸºæœ¬åŸåˆ™,å›¢é˜Ÿä¹Ÿéœ€è¦ä¸€å¥—"å®ªæ³•"æ¥å®šä¹‰:</p>
<ul>
<li><strong>é¡¹ç›®çš„æŠ€æœ¯æ ˆå’Œå¸¸ç”¨å‘½ä»¤æ˜¯ä»€ä¹ˆ?</strong>ï¼ˆCLAUDE.mdï¼‰</li>
<li><strong>æˆ‘ä»¬çš„ç¼–ç è§„èŒƒå’Œå®‰å…¨åº•çº¿æ˜¯ä»€ä¹ˆ?</strong>ï¼ˆrules/ ç›®å½•ï¼‰</li>
</ul>
<p><strong>å›¢é˜Ÿå®ªæ³•æ˜¯åŒºåˆ«è‰å°ç­å­å’Œæ­£è§„å†›çš„åˆ†æ°´å²­ã€‚</strong></p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨å¦‚ä½•é€šè¿‡ CLAUDE.md + rules/ å»ºç«‹å›¢é˜Ÿè§„èŒƒ,å¹¶é€šè¿‡<strong>å¤åˆ©æ¨¡å¼</strong>è®©è¿™ä»½å®ªæ³•ä¸æ–­æ¼”è¿›,è®© Claude Code æˆä¸ºè¶Šæ¥è¶Šèµ„æ·±çš„é˜Ÿå‹ã€‚</p>
<p>é˜…è¯»æœ¬æ–‡å,ä½ å°†å­¦ä¼š:</p>
<ul>
<li>ç†è§£å›¢é˜Ÿå®ªæ³•çš„ç›®å½•ç»“æ„å’Œå„éƒ¨åˆ†çš„èŒè´£</li>
<li>æ­£ç¡®ä½¿ç”¨ CLAUDE.md å­˜æ”¾é¡¹ç›®äº‹å®,ä½¿ç”¨ rules/ å­˜æ”¾åº•çº¿è§„åˆ™</li>
<li>å»ºç«‹å¤åˆ©æ€ç»´:å‘ç°é—®é¢˜ â†’ æ›´æ–°å®ªæ³• â†’ å…¨å‘˜å—ç›Š</li>
<li>æŒæ¡è®© AI ç†è§£å’Œéµå®ˆè§„èŒƒçš„æŠ€å·§</li>
</ul>
<hr/>
<h2 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦"å›¢é˜Ÿå®ªæ³•"?</h2>
<h3 data-id="heading-2">1.1 ä¼ ç»Ÿå›¢é˜Ÿçš„è§„èŒƒé—®é¢˜</h3>
<p>åœ¨æ²¡æœ‰è‡ªåŠ¨åŒ–å·¥å…·ä¹‹å‰,å›¢é˜Ÿè§„èŒƒé ä»€ä¹ˆç»´æŠ¤?</p>
<p><strong>æ–¹å¼ 1: æ–‡æ¡£ + å£å¤´ä¼ æ‰¿</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">æŸå…¬å¸ç¼–ç è§„èŒƒ.docx (ä¸Šæ¬¡æ›´æ–°: 3å¹´å‰)
<span class="hljs-bullet">  -</span> ç¬¬ 3 ç«  å‘½åè§„èŒƒ
<span class="hljs-bullet">  -</span> ç¬¬ 5 ç«  æ³¨é‡Šè§„èŒƒ
<span class="hljs-bullet">  -</span> ç¬¬ 8 ç«  å¼‚å¸¸å¤„ç†
  ...

ç°å®:
<span class="hljs-bullet">  -</span> æ–°äººå…¥èŒä¸çŸ¥é“è¿™ä»½æ–‡æ¡£
<span class="hljs-bullet">  -</span> è€å‘˜å·¥ä¹Ÿä¸è®°å¾—å…·ä½“å†…å®¹
<span class="hljs-bullet">  -</span> è§„èŒƒæ›´æ–°åæ²¡äººé€šçŸ¥
</code></pre>
<p><strong>æ–¹å¼ 2: Code Review äººè‚‰æ£€æŸ¥</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">è¯„å®¡è€…:"è¿™é‡Œåº”è¯¥ç”¨ Optional è€Œä¸æ˜¯ null"</span>
<span class="hljs-section">å¼€å‘è€…:"å“¦,å¥½çš„" (å¿ƒé‡Œæƒ³:åˆæ˜¯è¿™ä¸ªé—®é¢˜,ä¸Šæ¬¡ä¹Ÿæè¿‡)</span>
<span class="hljs-section">è¯„å®¡è€…:"ä¸‹æ¬¡æ³¨æ„" (å¿ƒé‡Œæƒ³:å·²ç»è¯´äº† N éäº†)</span>

<span class="hljs-section">ä¸‹å‘¨:</span>
  åŒæ ·çš„é—®é¢˜å†æ¬¡å‡ºç°...
</code></pre>
<p><strong>æ–¹å¼ 3: Lint å·¥å…· + Git Hooks</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># .eslintrc.js</span>
rules: {
  <span class="hljs-string">'semi'</span>: [<span class="hljs-string">'error'</span>, <span class="hljs-string">'always'</span>],
  <span class="hljs-string">'quotes'</span>: [<span class="hljs-string">'error'</span>, <span class="hljs-string">'single'</span>],
  ...100+ æ¡è§„åˆ™
}

é—®é¢˜:
  - åªèƒ½æ£€æŸ¥è¯­æ³•,ä¸èƒ½æ£€æŸ¥é€»è¾‘
  - é…ç½®å¤æ‚,ç»´æŠ¤å›°éš¾
  - æ— æ³•è¦†ç›–æ¶æ„å±‚é¢çš„è§„èŒƒ
</code></pre>
<p><strong>å…±åŒçš„ç—›ç‚¹</strong>:</p>
<ul>
<li>âŒ è§„èŒƒæ‰§è¡Œ<strong>ä¸ä¸€è‡´</strong> - é äººå·¥æ£€æŸ¥,éš¾å…é—æ¼</li>
<li>âŒ æ–°äººå­¦ä¹ <strong>æˆæœ¬é«˜</strong> - éœ€è¦é˜…è¯»å¤§é‡æ–‡æ¡£</li>
<li>âŒ è§„èŒƒæ›´æ–°<strong>éš¾åŒæ­¥</strong> - æ”¹äº†æ–‡æ¡£,ä»£ç ä¸ä¸€å®šæ”¹</li>
<li>âŒ è¿è§„å‘ç°<strong>å¤ªæ™š</strong> - ä»£ç å†™å®Œæ‰å‘ç°é—®é¢˜</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3efadae671a64ae7be8d193fa00da9a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770726829&amp;x-signature=cakr03AXRFI0Uoqn1b3KkEBDYPk%3D" alt="03-01-CR-problem.png" loading="lazy"/>
åœ¨æˆ‘ä»¬å…¬å¸ï¼Œæˆ‘å·²ç»åœ¨Gerritä¸Šéƒ¨ç½²äº†AI CodeReviewç³»ç»Ÿï¼Œèƒ½æŠ“å‡ºå¾ˆå¤šäººå·¥å†™çš„ä»£ç ä¸æŒ‰ç…§å…¬å¸è§„èŒƒæ¥çš„æƒ…å†µï¼Œå¹¶ä¸”åœ¨AIéƒ½æç¤ºå‡ºæ¥çš„æƒ…å†µä¸‹è¿˜ä¸ä¿®æ”¹ã€‚</p>
<h3 data-id="heading-3">1.2 AI è¾…åŠ©å¼€å‘çš„æ–°æŒ‘æˆ˜</h3>
<p>å¼•å…¥ AI å,é—®é¢˜ä¸ä»…æ²¡æœ‰å‡å°‘,åè€Œå¢åŠ äº†æ–°çš„æŒ‘æˆ˜:</p>
<p><strong>æŒ‘æˆ˜ 1: AI ä¸çŸ¥é“ä½ çš„å›¢é˜Ÿè§„èŒƒ</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½ å¸Œæœ›çš„ä»£ç é£æ ¼</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserById</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">User</span> | <span class="hljs-literal">null</span>&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> db.<span class="hljs-property">users</span>.<span class="hljs-title function_">findOne</span>({ id });
    <span class="hljs-keyword">return</span> user ?? <span class="hljs-literal">null</span>;
  } <span class="hljs-keyword">catch</span> (error) {
    logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to get user'</span>, { id, error });
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatabaseError</span>(<span class="hljs-string">'User query failed'</span>, { <span class="hljs-attr">cause</span>: error });
  }
}

<span class="hljs-comment">// AI é»˜è®¤ç”Ÿæˆçš„ä»£ç (æ²¡æœ‰è§„èŒƒçº¦æŸ)</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserById</span>(<span class="hljs-params">id</span>) {
  <span class="hljs-keyword">return</span> db.<span class="hljs-property">users</span>.<span class="hljs-title function_">findOne</span>({ id }).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  })
}
</code></pre>
<p><strong>å·®å¼‚</strong>:</p>
<ul>
<li>âŒ ç¼ºå°‘ç±»å‹æ ‡æ³¨</li>
<li>âŒ ä½¿ç”¨ <code>console.log</code> è€Œä¸æ˜¯ logger</li>
<li>âŒ é”™è¯¯å¤„ç†ä¸è§„èŒƒ</li>
<li>âŒ æ²¡æœ‰å¼‚å¸¸æŠ›å‡ºå’Œä¸Šä¸‹æ–‡ä¿¡æ¯</li>
</ul>
<p><strong>æŒ‘æˆ˜ 2: æ¯æ¬¡å¯¹è¯éƒ½è¦é‡å¤è¯´æ˜è§„èŒƒ</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ä½ : "å¸®æˆ‘å®ç°ç”¨æˆ·ç™»å½•åŠŸèƒ½"</span>
<span class="hljs-section">AI: [ç”Ÿæˆä»£ç ,ä¸ç¬¦åˆè§„èŒƒ]</span>

<span class="hljs-section">ä½ : "è®°å¾—ä½¿ç”¨ logger è€Œä¸æ˜¯ console.log"</span>
<span class="hljs-section">AI: [ä¿®æ”¹ä»£ç ]</span>

<span class="hljs-section">ä½ : "è¿˜è¦åŠ ä¸Šç±»å‹æ ‡æ³¨"</span>
<span class="hljs-section">AI: [å†æ¬¡ä¿®æ”¹]</span>

<span class="hljs-section">ä½ : "å¼‚å¸¸å¤„ç†è¦æŠ›å‡º CustomError"</span>
<span class="hljs-section">AI: [åˆä¸€æ¬¡ä¿®æ”¹]</span>

æ•ˆç‡å¤§æ‰“æŠ˜æ‰£!
</code></pre>
<p><strong>æŒ‘æˆ˜ 3: AI ç”Ÿæˆçš„ä»£ç é£æ ¼ä¸ä¸€è‡´</strong></p>
<p>ç¬¬ä¸€æ¬¡å¯¹è¯:</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">addUser</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) { ... }  <span class="hljs-comment">// é©¼å³°å‘½å</span>
</code></pre>
<p>ç¬¬äºŒæ¬¡å¯¹è¯:</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">delete_user</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) { ... }  <span class="hljs-comment">// ä¸‹åˆ’çº¿å‘½å</span>
</code></pre>
<p>ç¬¬ä¸‰æ¬¡å¯¹è¯:</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GetUserList</span>(<span class="hljs-params"/>) { ... }  <span class="hljs-comment">// å¤§å†™å¼€å¤´</span>
</code></pre>
<p>åŒä¸€ä¸ªé¡¹ç›®,ä¸‰ç§å‘½åé£æ ¼æ··æ‚,ç»´æŠ¤å™©æ¢¦!</p>
<h3 data-id="heading-4">1.3 claude.md çš„å®šä½ä¸ä»·å€¼</h3>
<p><strong>å›¢é˜Ÿå®ªæ³•æ˜¯ä»€ä¹ˆ?</strong></p>
<p>å›¢é˜Ÿå®ªæ³•æ˜¯ä¸€å¥—å®Œæ•´çš„é…ç½®ä½“ç³»,åŒ…æ‹¬ CLAUDE.mdï¼ˆé¡¹ç›®äº‹å®ï¼‰å’Œ .claude/ ç›®å½•ä¸‹çš„ rules/ è§„åˆ™æ–‡ä»¶,å…±åŒå®šä¹‰äº† AI åœ¨å·¥ä½œæ—¶åº”è¯¥éµå®ˆçš„è§„èŒƒå’Œçº¦æŸã€‚</p>
<p><strong>æ ¸å¿ƒä»·å€¼</strong>:</p>
<ol>
<li><strong>è‡ªåŠ¨åŠ è½½,æ— éœ€é‡å¤</strong> - Claude Code å¯åŠ¨æ—¶è‡ªåŠ¨è¯»å–é…ç½®,æ¯æ¬¡å¯¹è¯éƒ½ç”Ÿæ•ˆ</li>
<li><strong>èŒè´£åˆ†ç¦»,æ˜“äºç»´æŠ¤</strong> - CLAUDE.md å­˜é¡¹ç›®äº‹å®,rules/ å­˜åº•çº¿è§„åˆ™,ç»“æ„æ¸…æ™°</li>
<li><strong>å¯ç‰ˆæœ¬ç®¡ç†</strong> - å’Œä»£ç ä¸€èµ·æäº¤åˆ° Git,å›¢é˜Ÿå…±äº«</li>
<li><strong>å¯æŒç»­æ”¹è¿›</strong> - å‘ç°é—®é¢˜å°±æ›´æ–°,å½¢æˆå¤åˆ©æ•ˆåº”</li>
</ol>
<p><strong>ç±»æ¯”ç†è§£</strong>:</p>
<pre><code class="hljs language-objectivec" lang="objectivec">å›¢é˜Ÿå®ªæ³•å°±åƒå›½å®¶çš„<span class="hljs-string">"å®ªæ³•ä½“ç³»"</span>
  â”œâ”€ <span class="hljs-built_in">CLAUDE</span>.md: é¡¹ç›®äº‹å®(æŠ€æœ¯æ ˆã€å¸¸ç”¨å‘½ä»¤ã€çº¦æŸ)
  â”œâ”€ rules/: åº•çº¿è§„åˆ™(ç¼–ç è§„èŒƒã€æµ‹è¯•è¦æ±‚ã€å®‰å…¨è§„èŒƒ)
  â””â”€ å¯ä»¥ä¿®æ­£å’Œå®Œå–„(å®ªæ³•ä¿®æ­£æ¡ˆ)
</code></pre>
<p><strong>å¯¹æ¯”ä¼ ç»Ÿæ–¹å¼</strong>:</p>















































<table><thead><tr><th align="left">ç»´åº¦</th><th align="left">ä¼ ç»Ÿè§„èŒƒæ–‡æ¡£</th><th align="left">Lint å·¥å…·</th><th align="left">claude.md</th></tr></thead><tbody><tr><td align="left"><strong>è‡ªåŠ¨æ‰§è¡Œ</strong></td><td align="left">âŒ é äººå·¥</td><td align="left">âœ… è‡ªåŠ¨æ£€æŸ¥</td><td align="left">âœ… AI è‡ªåŠ¨éµå®ˆ</td></tr><tr><td align="left"><strong>è¦†ç›–èŒƒå›´</strong></td><td align="left">âœ… å…¨é¢</td><td align="left">âš ï¸ ä»…è¯­æ³•å±‚é¢</td><td align="left">âœ… å…¨é¢(è¯­æ³•+é€»è¾‘+æ¶æ„)</td></tr><tr><td align="left"><strong>å­¦ä¹ æˆæœ¬</strong></td><td align="left">âŒ éœ€è¦é˜…è¯»å¤§é‡æ–‡æ¡£</td><td align="left">âš ï¸ éœ€è¦ç†è§£è§„åˆ™</td><td align="left">âœ… AI ç›´æ¥ç†è§£å¹¶åº”ç”¨</td></tr><tr><td align="left"><strong>å®æ—¶ç”Ÿæ•ˆ</strong></td><td align="left">âŒ å†™å®Œä»£ç æ‰å‘ç°</td><td align="left">âš ï¸ æäº¤æ—¶æ£€æŸ¥</td><td align="left">âœ… ç”Ÿæˆæ—¶å°±ç¬¦åˆè§„èŒƒ</td></tr><tr><td align="left"><strong>ç‰ˆæœ¬ç®¡ç†</strong></td><td align="left">âš ï¸ æ–‡æ¡£ç‹¬ç«‹ç®¡ç†</td><td align="left">âœ… é…ç½®æ–‡ä»¶ç®¡ç†</td><td align="left">âœ… å’Œä»£ç ä¸€èµ·ç®¡ç†</td></tr><tr><td align="left"><strong>å¯æ¼”è¿›æ€§</strong></td><td align="left">âŒ æ›´æ–°å›°éš¾</td><td align="left">âš ï¸ éœ€è¦æ”¹é…ç½®</td><td align="left">âœ… éšæ—¶æ›´æ–°,ç«‹å³ç”Ÿæ•ˆ</td></tr></tbody></table>
<blockquote>
<p>"claude.md ä¸æ˜¯çº¦æŸ AI çš„æ·é”,è€Œæ˜¯è®© AI æˆä¸ºèµ„æ·±é˜Ÿå‹çš„è®­ç»ƒæ‰‹å†Œ"</p>
</blockquote>
<hr/>
<h2 data-id="heading-5">äºŒã€claude.md æ–‡ä»¶è¯¦è§£</h2>
<h3 data-id="heading-6">2.1 é…ç½®å±‚çº§ä¸å·¥ä½œåŸç†</h3>
<p>Claude Code æ”¯æŒ<strong>ä¸¤çº§é…ç½®</strong>,ä¼˜å…ˆçº§è§„åˆ™: <strong>é¡¹ç›®é…ç½® &gt; å…¨å±€é…ç½® &gt; Claude é»˜è®¤è¡Œä¸º</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-number">1.</span> é¡¹ç›®çº§é…ç½®(ä¼˜å…ˆçº§æœ€é«˜)
   è·¯å¾„: &lt;é¡¹ç›®æ ¹ç›®å½•&gt;/<span class="hljs-variable constant_">CLAUDE</span>.<span class="hljs-property">md</span>
   ä½œç”¨åŸŸ: å½“å‰é¡¹ç›®

<span class="hljs-number">2.</span> å…¨å±€é…ç½®(é»˜è®¤é…ç½®)
   è·¯å¾„: ~<span class="hljs-regexp">/.claude/</span><span class="hljs-variable constant_">CLAUDE</span>.<span class="hljs-property">md</span>
   ä½œç”¨åŸŸ: æ‰€æœ‰é¡¹ç›®
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9474fc977550496daae032eb7a25da45~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770726829&amp;x-signature=rfhIcgMFaM6gMAqUqbl90A8zUQ8%3D" alt="03-02-config-hierarchy.png" loading="lazy"/></p>
<p><em>å›¾2: claude.md é…ç½®å±‚çº§ä¸åŠ è½½æœºåˆ¶,é¡¹ç›®é…ç½®ä¼˜å…ˆçº§é«˜äºå…¨å±€é…ç½®</em></p>
<p><strong>å·¥ä½œåŸç†</strong>: claude.md çš„å†…å®¹ä¼šè¢«æ’å…¥åˆ°æ¯æ¬¡ API è°ƒç”¨çš„ç³»ç»Ÿæç¤ºè¯ä¸­,ä½œä¸ºå›¢é˜Ÿå®ªæ³•è®© AI è‡ªåŠ¨éµå®ˆã€‚é¡¹ç›®é…ç½®ä¼šè¦†ç›–å…¨å±€é…ç½®ä¸­çš„åŒåè§„åˆ™,æœªè¦†ç›–çš„è§„åˆ™ä¼šç»§æ‰¿ã€‚</p>
<p><strong>ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># å…¨å±€é…ç½®: ä½¿ç”¨åŒå¼•å·ã€æœ«å°¾åˆ†å·ã€2ç©ºæ ¼ç¼©è¿›</span>
<span class="hljs-section"># é¡¹ç›®é…ç½®: ä½¿ç”¨å•å¼•å·(è¦†ç›–)ã€4ç©ºæ ¼ç¼©è¿›(è¦†ç›–)</span>

<span class="hljs-section"># æœ€ç»ˆç”Ÿæ•ˆ: å•å¼•å·ã€æœ«å°¾åˆ†å·(ç»§æ‰¿)ã€4ç©ºæ ¼ç¼©è¿›</span>
</code></pre>
<h3 data-id="heading-7">2.2 å›¢é˜Ÿå®ªæ³•çš„ç›®å½•ç»“æ„</h3>
<p>æ ¹æ® Claude ä¸­æ–‡ç¤¾åŒºçš„å®˜æ–¹å®è·µï¼Œå›¢é˜Ÿå®ªæ³•åº”è¯¥é‡‡ç”¨ä»¥ä¸‹ç›®å½•ç»“æ„ï¼ˆå»ºè®®æ”¾è¿›ä»“åº“ï¼Œå›¢é˜Ÿå…±äº«ï¼‰ï¼š</p>
<pre><code class="hljs language-text" lang="text">your-repo/
â”œâ”€ CLAUDE.md              # é¡¹ç›®äº‹å®ï¼ˆæŠ€æœ¯æ ˆã€å¸¸ç”¨å‘½ä»¤ã€çº¦æŸï¼‰
â””â”€ .claude/
   â””â”€ rules/              # åº•çº¿è§„åˆ™ï¼ˆæ‹†æˆå°æ–‡ä»¶ï¼‰
      â”œâ”€ security.md      # å®‰å…¨åº•çº¿
      â”œâ”€ testing.md        # æµ‹è¯•åº•çº¿
      â””â”€ coding-style.md  # ä»£ç é£æ ¼åº•çº¿
</code></pre>
<p><strong>CLAUDE.md çš„å®šä½ï¼šå­˜æ”¾"é¡¹ç›®äº‹å®"</strong></p>
<p>CLAUDE.md çš„é‡ç‚¹æ˜¯å†™<strong>å¯æ‰§è¡Œã€å¯éªŒè¯çš„ä¿¡æ¯</strong>ï¼Œè€Œä¸æ˜¯è¯¦ç»†çš„è§„åˆ™ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># é¡¹ç›®æ¦‚è¿°</span>
<span class="hljs-bullet">-</span> æŠ€æœ¯æ ˆï¼šTypeScript + React 18+ + Next.js 14
<span class="hljs-bullet">-</span> ç›®å½•ç»“æ„å…¥å£ï¼šsrc/ ä¸ºæºä»£ç ç›®å½•

<span class="hljs-section">## å¸¸ç”¨å‘½ä»¤ï¼ˆå¿…é¡»å‡†ç¡®ï¼‰</span>
<span class="hljs-bullet">-</span> å®‰è£…ä¾èµ–ï¼š<span class="hljs-code">`pnpm install`</span>
<span class="hljs-bullet">-</span> è¿è¡Œæµ‹è¯•ï¼š<span class="hljs-code">`pnpm test`</span>
<span class="hljs-bullet">-</span> æ„å»ºï¼š<span class="hljs-code">`pnpm build`</span>
<span class="hljs-bullet">-</span> ä»£ç æ ¼å¼åŒ–ï¼š<span class="hljs-code">`pnpm format`</span>
<span class="hljs-bullet">-</span> é™æ€æ£€æŸ¥ï¼š<span class="hljs-code">`pnpm lint`</span>

<span class="hljs-section">## çº¦æŸï¼ˆå›¢é˜Ÿå…±è¯†ï¼‰</span>
<span class="hljs-bullet">-</span> é»˜è®¤å…ˆç”¨ Plan Mode åˆ†æï¼Œå†åŠ¨ä»£ç 
<span class="hljs-bullet">-</span> ä»»ä½•ä¼šå½±å“è¡Œä¸ºçš„æ”¹åŠ¨ï¼šå¿…é¡»è¡¥æµ‹è¯•/è¡¥æ–‡æ¡£
<span class="hljs-bullet">-</span> æ¶‰åŠå‡­è¯/æƒé™ï¼šå…ˆå®‰å…¨å®¡æŸ¥ï¼Œå†åˆå¹¶
</code></pre>
<p><strong>rules/ ç›®å½•ï¼šå­˜æ”¾"åº•çº¿"è§„åˆ™</strong></p>
<p>è§„åˆ™åº”è¯¥æ‹†æˆå¯ç»„åˆã€å¯å®¡æŸ¥çš„å°æ–‡ä»¶ï¼š</p>
<ul>
<li><code>rules/security.md</code>ï¼šå¯†é’¥ä¸è¾“å…¥æ ¡éªŒåº•çº¿ï¼ˆç¦ç¡¬ç¼–ç ã€è¾¹ç•Œæ ¡éªŒã€æœ€å°æƒé™ï¼‰</li>
<li><code>rules/testing.md</code>ï¼šæµ‹è¯•åº•çº¿ï¼ˆTDD æµç¨‹ã€è¦†ç›–ç‡é—¨æ§›ã€å…³é”®è·¯å¾„å¿…é¡» E2Eï¼‰</li>
<li><code>rules/coding-style.md</code>ï¼šä»£ç ç»„ç»‡åº•çº¿ï¼ˆæ–‡ä»¶å¤§å°ã€å‡½æ•°é•¿åº¦ã€é”™è¯¯å¤„ç†ç­‰ï¼‰</li>
</ul>
<p>è¿™äº›è§„åˆ™ä¸è¦"æŠ„ä¸€å¤§æ®µ"ï¼Œè€Œæ˜¯å†™æˆ<strong>å›¢é˜ŸçœŸçš„ä¼šæ‰§è¡Œ</strong>çš„æ¸…å•ã€‚</p>
<p><strong>èŒè´£åˆ†ç¦»åŸåˆ™</strong>ï¼š</p>
<ul>
<li><strong>CLAUDE.md</strong>ï¼šåªå†™é¡¹ç›®äº‹å®ï¼Œä¸å†™è¯¦ç»†è§„åˆ™</li>
<li><strong>rules/</strong>ï¼šåªå†™è§„åˆ™çº¦æŸï¼Œä¸å†™é¡¹ç›®äº‹å®</li>
<li>ä¸¤è€…é…åˆï¼Œå½¢æˆå®Œæ•´çš„å›¢é˜Ÿå®ªæ³•</li>
</ul>
<h3 data-id="heading-8">2.3 ä¸Šä¸‹æ–‡ä¼˜å…ˆçº§</h3>
<p>CLAUDE.md å’Œ rules/ ç›®å½•ä¸­çš„é…ç½®ä¼˜å…ˆçº§é«˜äºå¯¹è¯å†å²,ç¡®ä¿è§„èŒƒå§‹ç»ˆç”Ÿæ•ˆ:</p>
<pre><code class="hljs language-ini" lang="ini">ä¼˜å…ˆçº§æ’åº:
1. CLAUDE.md å’Œ rules/ ä¸­çš„è§„èŒƒ  <span class="hljs-section">[æœ€é«˜ä¼˜å…ˆçº§]</span>
2. ç”¨æˆ·å½“å‰è¾“å…¥çš„æŒ‡ä»¤            <span class="hljs-section">[é«˜ä¼˜å…ˆçº§]</span>
3. å¯¹è¯å†å²ä¸­çš„ä¸Šä¸‹æ–‡            <span class="hljs-section">[ä¸­ä¼˜å…ˆçº§]</span>
4. Claude çš„é»˜è®¤è¡Œä¸º             <span class="hljs-section">[ä½ä¼˜å…ˆçº§]</span>
</code></pre>
<p><strong>å®é™…æ•ˆæœ</strong>: å³ä½¿ä¹‹å‰å¯¹è¯ä¸­ä½¿ç”¨äº†ä¸ç¬¦åˆè§„èŒƒçš„ä»£ç ,CLAUDE.md å’Œ rules/ ä¸­çš„è§„èŒƒä»ä¼šåœ¨æ–°ä»£ç ç”Ÿæˆæ—¶ç”Ÿæ•ˆã€‚ç”¨æˆ·å¯ä»¥åœ¨å•æ¬¡å¯¹è¯ä¸­ä¸´æ—¶è¦†ç›–è§„èŒƒ,ä½†ä¸‹æ¬¡å¯¹è¯ä¼šè‡ªåŠ¨æ¢å¤ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1064288d1b1410a8df35a170d359e34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770726829&amp;x-signature=T9ynkkREShW8ZSEJ1AkMEFEUyNM%3D" alt="03-03-claude-md-mechanism.png" loading="lazy"/></p>
<p><em>å›¾3: claude.md å·¥ä½œåŸç†,å±•ç¤ºå¦‚ä½•è¢«è§£æå¹¶æ’å…¥åˆ° API è°ƒç”¨çš„ç³»ç»Ÿæç¤ºè¯ä¸­</em></p>
<hr/>
<h2 data-id="heading-9">ä¸‰ã€å›¢é˜Ÿå®ªæ³•çš„å†…å®¹è®¾è®¡</h2>
<h3 data-id="heading-10">3.1 CLAUDE.mdï¼šé¡¹ç›®äº‹å®</h3>
<p>CLAUDE.md çš„å®šä½æ˜¯"é¡¹ç›®è®°å¿†"ï¼Œé‡ç‚¹å†™å¯æ‰§è¡Œã€å¯éªŒè¯çš„ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># é¡¹ç›®æ¦‚è¿°</span>
<span class="hljs-bullet">-</span> æŠ€æœ¯æ ˆï¼šTypeScript + React 18+ + Next.js 14
<span class="hljs-bullet">-</span> ç›®å½•ç»“æ„å…¥å£ï¼šsrc/ ä¸ºæºä»£ç ç›®å½•ï¼Œpackages/ ä¸ºå…±äº«åŒ…

<span class="hljs-section">## å¸¸ç”¨å‘½ä»¤ï¼ˆå¿…é¡»å‡†ç¡®ï¼‰</span>
<span class="hljs-bullet">-</span> å®‰è£…ä¾èµ–ï¼š<span class="hljs-code">`pnpm install`</span>
<span class="hljs-bullet">-</span> è¿è¡Œå¼€å‘æœåŠ¡å™¨ï¼š<span class="hljs-code">`pnpm dev`</span>
<span class="hljs-bullet">-</span> è¿è¡Œæµ‹è¯•ï¼š<span class="hljs-code">`pnpm test`</span>
<span class="hljs-bullet">-</span> æ„å»ºï¼š<span class="hljs-code">`pnpm build`</span>
<span class="hljs-bullet">-</span> ä»£ç æ ¼å¼åŒ–ï¼š<span class="hljs-code">`pnpm format`</span>
<span class="hljs-bullet">-</span> é™æ€æ£€æŸ¥ï¼š<span class="hljs-code">`pnpm lint`</span>

<span class="hljs-section">## çº¦æŸï¼ˆå›¢é˜Ÿå…±è¯†ï¼‰</span>
<span class="hljs-bullet">-</span> é»˜è®¤å…ˆç”¨ Plan Mode åˆ†æï¼Œå†åŠ¨ä»£ç 
<span class="hljs-bullet">-</span> ä»»ä½•ä¼šå½±å“è¡Œä¸ºçš„æ”¹åŠ¨ï¼šå¿…é¡»è¡¥æµ‹è¯•/è¡¥æ–‡æ¡£
<span class="hljs-bullet">-</span> æ¶‰åŠå‡­è¯/æƒé™ï¼šå…ˆå®‰å…¨å®¡æŸ¥ï¼Œå†åˆå¹¶
<span class="hljs-bullet">-</span> æäº¤å‰å¿…é¡»é€šè¿‡ lint å’Œæµ‹è¯•
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li>âœ… å†™å…·ä½“çš„æŠ€æœ¯æ ˆå’Œç‰ˆæœ¬å·</li>
<li>âœ… å†™å‡†ç¡®çš„å‘½ä»¤ï¼ˆAI ä¼šç›´æ¥æ‰§è¡Œï¼‰</li>
<li>âœ… å†™å›¢é˜Ÿå…±è¯†çš„çº¦æŸï¼ˆä¸æ˜¯è¯¦ç»†è§„åˆ™ï¼‰</li>
<li>âŒ ä¸è¦å†™è¯¦ç»†çš„ç¼–ç è§„èŒƒï¼ˆåº”è¯¥æ”¾åœ¨ rules/ ç›®å½•ï¼‰</li>
</ul>
<h3 data-id="heading-11">3.2 rules/ ç›®å½•ï¼šåº•çº¿è§„åˆ™</h3>
<p>è§„åˆ™åº”è¯¥æ‹†æˆå¯ç»„åˆã€å¯å®¡æŸ¥çš„å°æ–‡ä»¶ã€‚ä»¥ä¸‹æ˜¯ä¸‰ä¸ªæ ¸å¿ƒè§„åˆ™æ–‡ä»¶çš„ç¤ºä¾‹ï¼š</p>
<p><strong>rules/coding-style.md</strong>ï¼šä»£ç ç»„ç»‡åº•çº¿</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># ä»£ç é£æ ¼è§„èŒƒ</span>

<span class="hljs-section">## TypeScript é£æ ¼</span>
<span class="hljs-bullet">-</span> ä¸¥æ ¼æ¨¡å¼: å¯ç”¨ <span class="hljs-code">`strict: true`</span>
<span class="hljs-bullet">-</span> ç±»å‹æ ‡æ³¨: æ‰€æœ‰å‡½æ•°å‚æ•°å’Œè¿”å›å€¼å¿…é¡»æ ‡æ³¨ç±»å‹
<span class="hljs-bullet">-</span> ç±»å‹æ–­è¨€: é¿å…ä½¿ç”¨ <span class="hljs-code">`any`</span>,ä¼˜å…ˆä½¿ç”¨ <span class="hljs-code">`unknown`</span>

<span class="hljs-section">## ä»£ç æ ¼å¼</span>
<span class="hljs-bullet">-</span> ç¼©è¿›: 2 ç©ºæ ¼
<span class="hljs-bullet">-</span> å¼•å·: å•å¼•å·(å­—ç¬¦ä¸²),åŒå¼•å·(JSX å±æ€§)
<span class="hljs-bullet">-</span> åˆ†å·: å¿…é¡»ä½¿ç”¨
<span class="hljs-bullet">-</span> è¡Œå®½: æœ€å¤§ 100 å­—ç¬¦

<span class="hljs-section">## å‘½åçº¦å®š</span>
<span class="hljs-bullet">-</span> ç»„ä»¶: PascalCase (UserProfile.tsx)
<span class="hljs-bullet">-</span> å‡½æ•°: camelCase (getUserData)
<span class="hljs-bullet">-</span> å¸¸é‡: UPPER<span class="hljs-emphasis">_SNAKE_</span>CASE (API<span class="hljs-emphasis">_BASE_</span>URL)
<span class="hljs-bullet">-</span> å¸ƒå°”å€¼: is/has/can å¼€å¤´ (isLoading, hasPermission)

<span class="hljs-section">## æ³¨é‡Šè¦æ±‚</span>
<span class="hljs-bullet">-</span> âœ… å¿…é¡»: å¤æ‚é€»è¾‘ã€ç®—æ³•å®ç°ã€ä¸šåŠ¡è§„åˆ™
<span class="hljs-bullet">-</span> âœ… æ¨è: å…¬å…± APIã€å·¥å…·å‡½æ•°
<span class="hljs-bullet">-</span> æ‰€æœ‰å¯¼å‡ºçš„å‡½æ•°/ç±»å¿…é¡»æ·»åŠ  JSDoc
</code></pre>
<p><strong>rules/testing.md</strong>ï¼šæµ‹è¯•åº•çº¿</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># æµ‹è¯•è§„èŒƒ</span>

<span class="hljs-section">## å•å…ƒæµ‹è¯•</span>
<span class="hljs-bullet">-</span> è¦†ç›–ç‡: &gt; 80%
<span class="hljs-bullet">-</span> æ¡†æ¶: Jest + Testing Library
<span class="hljs-bullet">-</span> æ¯ä¸ªå…¬å…±å‡½æ•°å¿…é¡»æœ‰æµ‹è¯•
<span class="hljs-bullet">-</span> æµ‹è¯•ç”¨ä¾‹å‘½å: <span class="hljs-code">`should ... when ...`</span>

<span class="hljs-section">## é›†æˆæµ‹è¯•</span>
<span class="hljs-bullet">-</span> å·¥å…·: Cypress / Playwright
<span class="hljs-bullet">-</span> è¦†ç›–: å…³é”®ç”¨æˆ·æµç¨‹
<span class="hljs-bullet">-</span> è¿è¡Œæ—¶æœº: PR åˆå¹¶å‰

<span class="hljs-section">## TDD æµç¨‹</span>
<span class="hljs-bullet">-</span> RED: å…ˆå†™å¤±è´¥çš„æµ‹è¯•
<span class="hljs-bullet">-</span> GREEN: å®ç°æœ€å°ä»£ç è®©æµ‹è¯•é€šè¿‡
<span class="hljs-bullet">-</span> REFACTOR: é‡æ„ä¼˜åŒ–ä»£ç 
</code></pre>
<p><strong>rules/security.md</strong>ï¼šå®‰å…¨åº•çº¿</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># å®‰å…¨è§„èŒƒ</span>

<span class="hljs-section">## æ•æ„Ÿä¿¡æ¯å¤„ç†</span>
<span class="hljs-bullet">-</span> âŒ ç¦æ­¢: å°†å¯†é’¥/å¯†ç ç¡¬ç¼–ç åˆ°ä»£ç ä¸­
<span class="hljs-bullet">-</span> âœ… ä½¿ç”¨: ç¯å¢ƒå˜é‡ + .env æ–‡ä»¶

<span class="hljs-section">## è¾“å…¥éªŒè¯</span>
<span class="hljs-bullet">-</span> æ‰€æœ‰ç”¨æˆ·è¾“å…¥å¿…é¡»éªŒè¯å’Œå‡€åŒ–
<span class="hljs-bullet">-</span> ä½¿ç”¨ Zod / Yup è¿›è¡Œ schema éªŒè¯

<span class="hljs-section">## XSS é˜²æŠ¤</span>
<span class="hljs-bullet">-</span> ä½¿ç”¨ React çš„è‡ªåŠ¨è½¬ä¹‰
<span class="hljs-bullet">-</span> é¿å… <span class="hljs-code">`dangerouslySetInnerHTML`</span>
</code></pre>
<hr/>
<h2 data-id="heading-12">å››ã€å¤åˆ©æ¨¡å¼:æŒç»­ä¼˜åŒ–çš„å›¢é˜Ÿå®ªæ³•</h2>
<h3 data-id="heading-13">4.1 ä»€ä¹ˆæ˜¯å¤åˆ©æ¨¡å¼?</h3>
<p><strong>ä¼ ç»Ÿæ¨¡å¼</strong>:å†™ä¸€æ¬¡è§„èŒƒ,é•¿æœŸä¸æ›´æ–°,æœ€ç»ˆè¿‡æ—¶æ— ç”¨ã€‚</p>
<p><strong>å¤åˆ©æ¨¡å¼</strong>:å‘ç°é—®é¢˜ â†’ æ›´æ–°å®ªæ³• â†’ å…¨å‘˜å—ç›Š â†’ æŒç»­æ”¹è¿›ã€‚</p>
<p><strong>ç±»æ¯”</strong>:</p>
<pre><code class="hljs language-makefile" lang="makefile">å¤åˆ©æ¨¡å¼å°±åƒæŠ•èµ„ç†è´¢
  - åˆå§‹æŠ•å…¥: ç¼–å†™åŸºç¡€å®ªæ³•
  - æŒç»­æŠ•å…¥: æ¯æ¬¡é‡åˆ°é—®é¢˜å°±æ›´æ–°
  - å¤åˆ©æ”¶ç›Š: å›¢é˜Ÿæ•´ä½“èƒ½åŠ›æå‡,é—®é¢˜é€æ¸å‡å°‘

<span class="hljs-section">ç¬¬1å‘¨: å‘ç° 10 ä¸ªè§„èŒƒé—®é¢˜</span>
<span class="hljs-section">ç¬¬2å‘¨: å‘ç° 7 ä¸ªé—®é¢˜(ä¹‹å‰çš„ 3 ä¸ªä¸å†å‡ºç°)</span>
<span class="hljs-section">ç¬¬3å‘¨: å‘ç° 5 ä¸ªé—®é¢˜</span>
...
<span class="hljs-section">ç¬¬Nå‘¨: å‘ç° 0-1 ä¸ªé—®é¢˜(è§„èŒƒå·²ç»å¾ˆå®Œå–„)</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d3c9f67e9b54467b0bc2556b72ea92b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770726829&amp;x-signature=Mn4egti7cGFr7Z2ByB2%2BOkhip9k%3D" alt="03-04-compound-mode.png" loading="lazy"/></p>
<p><em>å›¾4: å¤åˆ©æ¨¡å¼çš„å¾ªç¯æµç¨‹,å±•ç¤ºæŒç»­ä¼˜åŒ–å¦‚ä½•å¸¦æ¥å¤åˆ©æ”¶ç›Š</em></p>
<h3 data-id="heading-14">4.2 å¤åˆ©æ¨¡å¼çš„å·¥ä½œæµç¨‹</h3>
<p><strong>æ­¥éª¤ 1: å‘ç°é—®é¢˜</strong></p>
<p>åœ¨ Code Reviewã€Bug ä¿®å¤ã€æ€§èƒ½ä¼˜åŒ–ç­‰åœºæ™¯ä¸­å‘ç°è§„èŒƒç¼ºå¤±æˆ–ä¸æ˜ç¡®çš„åœ°æ–¹ã€‚</p>
<p><strong>ç¤ºä¾‹åœºæ™¯</strong>:</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Code Review å‘ç°çš„é—®é¢˜</span>
<span class="hljs-comment">// å¼€å‘è€… A çš„ä»£ç :</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processData</span>(<span class="hljs-params">data</span>) {
  <span class="hljs-keyword">return</span> data.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
    <span class="hljs-comment">// å¤æ‚çš„ä¸šåŠ¡é€»è¾‘,æ²¡æœ‰æ³¨é‡Š</span>
    <span class="hljs-keyword">return</span> item.<span class="hljs-property">value</span> * <span class="hljs-number">1.1</span> + (item.<span class="hljs-property">bonus</span> ?? <span class="hljs-number">0</span>) - item.<span class="hljs-property">discount</span>;
  });
}

<span class="hljs-comment">// è¯„å®¡è€…: "è¿™ä¸ªè®¡ç®—é€»è¾‘æ˜¯ä»€ä¹ˆæ„æ€?ä¸ºä»€ä¹ˆä¹˜ 1.1?"</span>
<span class="hljs-comment">// å¼€å‘è€…: "å“¦,è¿™æ˜¯åŠ ä¸Š 10% çš„ç¨è´¹"</span>
<span class="hljs-comment">// è¯„å®¡è€…: "è¿™ç§ä¸šåŠ¡é€»è¾‘åº”è¯¥åŠ æ³¨é‡Šå•Š"</span>
</code></pre>
<p><strong>æ­¥éª¤ 2: åˆ†ææ ¹å› </strong></p>
<p>æ€è€ƒ:ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªé—®é¢˜?æ˜¯è§„èŒƒç¼ºå¤±è¿˜æ˜¯è§„èŒƒä¸å¤Ÿæ˜ç¡®?</p>
<pre><code class="hljs language-markdown" lang="markdown">æ ¹å› åˆ†æ:
<span class="hljs-bullet">  -</span> rules/ ç›®å½•ä¸­æ²¡æœ‰è§„å®š"å¤æ‚ä¸šåŠ¡é€»è¾‘å¿…é¡»æ·»åŠ æ³¨é‡Š"
<span class="hljs-bullet">  -</span> å¼€å‘è€…å’Œ AI éƒ½ä¸çŸ¥é“è¿™ä¸ªè§„èŒƒ
<span class="hljs-bullet">  -</span> å¯¼è‡´æ¯æ¬¡éƒ½è¦åœ¨ Code Review ä¸­æé†’
</code></pre>
<p><strong>æ­¥éª¤ 3: æ›´æ–°å®ªæ³•</strong></p>
<p>åœ¨ rules/ ç›®å½•ä¸‹çš„ç›¸åº”è§„åˆ™æ–‡ä»¶ä¸­æ·»åŠ æˆ–ä¿®æ”¹è§„èŒƒ,æ˜ç¡®è¦æ±‚ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># rules/coding-style.md</span>

<span class="hljs-section">## æ³¨é‡Šè¦æ±‚</span>

<span class="hljs-section">### ä¸šåŠ¡é€»è¾‘æ³¨é‡Š</span>
<span class="hljs-bullet">-</span> âœ… å¿…é¡»: æ‰€æœ‰åŒ…å«æ•°å­—å¸¸é‡çš„è®¡ç®—é€»è¾‘å¿…é¡»æ³¨é‡Šè¯´æ˜å«ä¹‰
<span class="hljs-bullet">-</span> âœ… å¿…é¡»: å¤æ‚çš„ä¸šåŠ¡è§„åˆ™å¿…é¡»æ³¨é‡Šè¯´æ˜åŸå› 

<span class="hljs-section">### ç¤ºä¾‹:</span>
\<span class="hljs-code">`\`</span>\`typescript
// âœ… æ­£ç¡®
function calculateTotalPrice(item: Item): number {
  // åŸºç¡€ä»·æ ¼ + 10% å¢å€¼ç¨
  const priceWithTax = item.value * 1.1;

  // åŠ ä¸Šå¥–åŠ±ç§¯åˆ†(å¦‚æœ‰),å‡å»æŠ˜æ‰£
  return priceWithTax + (item.bonus ?? 0) - item.discount;
}

// âŒ é”™è¯¯: ç¼ºå°‘æ³¨é‡Š
function calculateTotalPrice(item: Item): number {
  return item.value * 1.1 + (item.bonus ?? 0) - item.discount;
}
\<span class="hljs-code">`\`</span>\`
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šè§„åˆ™åº”è¯¥æ”¾åœ¨ rules/ ç›®å½•ä¸‹ï¼Œè€Œä¸æ˜¯ CLAUDE.md ä¸­ã€‚CLAUDE.md åªå­˜æ”¾é¡¹ç›®äº‹å®ã€‚</p>
<p><strong>æ­¥éª¤ 4: æäº¤ä¸åŒæ­¥</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æ›´æ–°è§„åˆ™æ–‡ä»¶</span>
git add .claude/rules/coding-style.md
git commit -m <span class="hljs-string">"docs(claude): add business logic comment requirement"</span>

<span class="hljs-comment"># 2. æ¨é€åˆ°è¿œç¨‹ä»“åº“</span>
git push origin main

<span class="hljs-comment"># 3. å›¢é˜Ÿæˆå‘˜æ‹‰å–æœ€æ–°ä»£ç </span>
<span class="hljs-comment"># ä¸‹æ¬¡ä½¿ç”¨ Claude Code æ—¶è‡ªåŠ¨ç”Ÿæ•ˆ</span>
</code></pre>
<p><strong>æ­¥éª¤ 5: å…¨å‘˜å—ç›Š</strong></p>
<p>æ‰€æœ‰å›¢é˜Ÿæˆå‘˜(åŒ…æ‹¬ AI)éƒ½è‡ªåŠ¨éµå®ˆæ–°è§„èŒƒ,ç±»ä¼¼é—®é¢˜ä¸å†å‡ºç°ã€‚</p>
<pre><code class="hljs language-less" lang="less">æ•ˆæœ:
  <span class="hljs-selector-tag">-</span> å¼€å‘è€… <span class="hljs-selector-tag">A</span>: ä¸‹æ¬¡å†™ä»£ç æ—¶,<span class="hljs-selector-tag">Claude</span> <span class="hljs-selector-tag">Code</span> è‡ªåŠ¨æ·»åŠ æ³¨é‡Š
  <span class="hljs-selector-tag">-</span> å¼€å‘è€… <span class="hljs-selector-tag">B</span>: ç¬¬ä¸€æ¬¡æ¥è§¦è¿™ä¸ªè§„èŒƒ,<span class="hljs-selector-tag">AI</span> ç”Ÿæˆçš„ä»£ç å·²ç»ç¬¦åˆ
  <span class="hljs-selector-tag">-</span> å¼€å‘è€… <span class="hljs-selector-tag">C</span>: ç»´æŠ¤è€ä»£ç æ—¶,<span class="hljs-selector-tag">AI</span> é‡æ„æ—¶è‡ªåŠ¨åŠ ä¸Šæ³¨é‡Š

ç»“æœ: å›¢é˜Ÿæ•´ä½“ä»£ç è´¨é‡æå‡,<span class="hljs-selector-tag">Code</span> <span class="hljs-selector-tag">Review</span> æ•ˆç‡æé«˜
</code></pre>
<h3 data-id="heading-15">4.3 çœŸå®æ¡ˆä¾‹:ä»ä»£ç ç¼ºé™·åˆ°å®ªæ³•æ¡æ¬¾</h3>
<p><strong>èƒŒæ™¯</strong>:</p>
<p>æŸ Android é¡¹ç›®åœ¨ç”Ÿäº§ç¯å¢ƒå‡ºç°å†…å­˜æ³„æ¼,æ’æŸ¥åå‘ç°æ˜¯å› ä¸º Activity ä¸­çš„åŒ¿åå†…éƒ¨ç±»æŒæœ‰äº†å¤–éƒ¨å¼•ç”¨ã€‚</p>
<p><strong>é—®é¢˜ä»£ç </strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// MainActivity.kt</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> <span class="hljs-keyword">data</span>: String = <span class="hljs-string">""</span>

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)

        <span class="hljs-comment">// âŒ é—®é¢˜: åŒ¿åå†…éƒ¨ç±»æŒæœ‰ Activity å¼•ç”¨</span>
        button.setOnClickListener(<span class="hljs-keyword">object</span> : View.OnClickListener {
            <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onClick</span><span class="hljs-params">(v: <span class="hljs-type">View</span>?)</span></span> {
                <span class="hljs-comment">// ä½¿ç”¨äº†å¤–éƒ¨ç±»çš„æˆå‘˜å˜é‡</span>
                processData(<span class="hljs-keyword">data</span>)
            }
        })
    }
}
</code></pre>
<p><strong>æ ¹å› åˆ†æ</strong>:</p>
<ol>
<li>åŒ¿åå†…éƒ¨ç±»éšå¼æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨</li>
<li>å¦‚æœ listener çš„ç”Ÿå‘½å‘¨æœŸè¶…è¿‡ Activity,ä¼šå¯¼è‡´å†…å­˜æ³„æ¼</li>
<li>å›¢é˜Ÿä¹‹å‰æ²¡æœ‰æ˜ç¡®çš„è§„èŒƒæ¥é¿å…è¿™ä¸ªé—®é¢˜</li>
</ol>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p>
<p>æ›´æ–° rules/security.md,æ·»åŠ  Android å†…å­˜æ³„æ¼é˜²æŠ¤è§„èŒƒ:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># rules/security.md</span>

<span class="hljs-section">## Android å†…å­˜æ³„æ¼é˜²æŠ¤</span>

<span class="hljs-section">#### é¿å…åŒ¿åå†…éƒ¨ç±»æŒæœ‰ Activity å¼•ç”¨</span>
<span class="hljs-bullet">-</span> âŒ ç¦æ­¢: åœ¨ Activity/Fragment ä¸­ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»ä½œä¸ºé•¿ç”Ÿå‘½å‘¨æœŸç›‘å¬å™¨
<span class="hljs-bullet">-</span> âœ… ä½¿ç”¨: Lambda è¡¨è¾¾å¼æˆ–é™æ€å†…éƒ¨ç±» + å¼±å¼•ç”¨

\<span class="hljs-code">`\`</span>\`kotlin
// âŒ é”™è¯¯: åŒ¿åå†…éƒ¨ç±»
button.setOnClickListener(object : View.OnClickListener {
<span class="hljs-code">    override fun onClick(v: View?) {
        processData(data)  // æŒæœ‰å¤–éƒ¨å¼•ç”¨
    }
})
</span>
// âœ… æ­£ç¡®: Lambda è¡¨è¾¾å¼
button.setOnClickListener { view -&gt;
<span class="hljs-code">    processData(data)  // Kotlin ç¼–è¯‘å™¨ä¼˜åŒ–,ä¸ä¼šæ³„æ¼
}
</span>
// âœ… æ­£ç¡®: é™æ€å†…éƒ¨ç±» + å¼±å¼•ç”¨
class MainActivity : AppCompatActivity() {
<span class="hljs-code">    private val clickListener = ClickListener(this)
</span>
<span class="hljs-code">    override fun onCreate(savedInstanceState: Bundle?) {
        button.setOnClickListener(clickListener)
    }
</span>
<span class="hljs-code">    private class ClickListener(activity: MainActivity) : View.OnClickListener {
        private val activityRef = WeakReference(activity)
</span>
<span class="hljs-code">        override fun onClick(v: View?) {
            activityRef.get()?.processData()
        }
    }
}
\`\`\`
</span>
<span class="hljs-section">#### Handler ä½¿ç”¨è§„èŒƒ</span>
<span class="hljs-bullet">-</span> ä½¿ç”¨é™æ€ Handler + å¼±å¼•ç”¨
<span class="hljs-bullet">-</span> åœ¨ onDestroy ä¸­ç§»é™¤æ‰€æœ‰æ¶ˆæ¯

\<span class="hljs-code">`\`</span>\`kotlin
// âœ… æ­£ç¡®
class MainActivity : AppCompatActivity() {
<span class="hljs-code">    private val handler = MyHandler(this)
</span>
<span class="hljs-code">    override fun onDestroy() {
        super.onDestroy()
        handler.removeCallbacksAndMessages(null)
    }
</span>
<span class="hljs-code">    private class MyHandler(activity: MainActivity) : Handler(Looper.getMainLooper()) {
        private val activityRef = WeakReference(activity)
</span>
<span class="hljs-code">        override fun handleMessage(msg: Message) {
            activityRef.get()?.handleMessage(msg)
        }
    }
}
\`\`\`
</span></code></pre>
<p><strong>æ•ˆæœ</strong>:</p>
<ol>
<li><strong>immediate(ç«‹å³ç”Ÿæ•ˆ)</strong>: ä¸‹æ¬¡ä½¿ç”¨ Claude Code ç”Ÿæˆä»£ç æ—¶,è‡ªåŠ¨ç¬¦åˆæ–°è§„èŒƒ</li>
<li><strong>Prevention(é¢„é˜²é—®é¢˜)</strong>: ç±»ä¼¼çš„å†…å­˜æ³„æ¼é—®é¢˜ä¸å†å‡ºç°</li>
<li><strong>Knowledge Transfer(çŸ¥è¯†ä¼ é€’)</strong>: æ–°å…¥èŒçš„å¼€å‘è€…é€šè¿‡ AI ç”Ÿæˆçš„ä»£ç å­¦ä¹ æœ€ä½³å®è·µ</li>
</ol>
<p><strong>å…³é”®ç‚¹</strong>ï¼šè¿™ä¸ªè§„èŒƒåº”è¯¥æ”¾åœ¨ <code>rules/security.md</code> ä¸­ï¼Œè€Œä¸æ˜¯ <code>CLAUDE.md</code>ã€‚CLAUDE.md åªå­˜æ”¾é¡¹ç›®äº‹å®ï¼ˆå¦‚æŠ€æœ¯æ ˆã€å¸¸ç”¨å‘½ä»¤ï¼‰ï¼Œè¯¦ç»†çš„è§„åˆ™çº¦æŸéƒ½åº”è¯¥æ”¾åœ¨ rules/ ç›®å½•ä¸‹ã€‚</p>
<h3 data-id="heading-16">4.4 ç‰ˆæœ¬ç®¡ç†:å®ªæ³•çš„æ¼”è¿›å†å²</h3>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦ç‰ˆæœ¬ç®¡ç†?</strong></p>
<ul>
<li>è¿½æº¯è§„èŒƒå˜æ›´çš„åŸå› å’Œæ—¶é—´</li>
<li>å›æ»šä¸åˆç†çš„è§„èŒƒä¿®æ”¹</li>
<li>äº†è§£å›¢é˜Ÿè§„èŒƒçš„æ¼”è¿›è·¯å¾„</li>
</ul>
<p><strong>å®è·µæ–¹æ³•</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. CLAUDE.md å’Œ rules/ ä¸ä»£ç ä¸€èµ·æäº¤åˆ° Git</span>
git add CLAUDE.md .claude/rules/
git commit -m <span class="hljs-string">"docs(claude): add memory leak prevention rules"</span>

<span class="hljs-comment"># 2. æŸ¥çœ‹å®ªæ³•æ¼”è¿›å†å²</span>
git <span class="hljs-built_in">log</span> --oneline -- CLAUDE.md .claude/rules/

<span class="hljs-comment"># è¾“å‡º:</span>
a1b2c3d docs(claude): add memory leak prevention rules
d4e5f6g docs(claude): update naming conventions
g7h8i9j docs(claude): add security guidelines
j0k1l2m docs(claude): initial team constitution

<span class="hljs-comment"># 3. æŸ¥çœ‹æŸæ¬¡ä¿®æ”¹çš„å…·ä½“å†…å®¹</span>
git show a1b2c3d

<span class="hljs-comment"># 4. å›æ»šåˆ°ä¹‹å‰çš„ç‰ˆæœ¬(å¦‚æœéœ€è¦)</span>
git checkout d4e5f6g -- CLAUDE.md .claude/rules/
</code></pre>
<p><strong>ç‰ˆæœ¬å·ç®¡ç†(å¯é€‰)</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Team Constitution</span>

<span class="hljs-strong">**Version**</span>: 2.3.0
<span class="hljs-strong">**Last Updated**</span>: 2026-01-29
<span class="hljs-strong">**Changelog**</span>: See CLAUDE<span class="hljs-emphasis">_CHANGELOG.md

## Version History
- v2.3.0 (2026-01-29): Add Android memory leak prevention
- v2.2.0 (2026-01-15): Update testing requirements
- v2.1.0 (2026-01-05): Add security guidelines
- v2.0.0 (2025-12-20): Major refactor, adopt Clean Architecture
- v1.0.0 (2025-12-01): Initial team constitution
</span></code></pre>
<h3 data-id="heading-17">4.5 å›¢é˜Ÿåä½œ:å®ªæ³•çš„å…±åŒç»´æŠ¤</h3>
<p><strong>ç»´æŠ¤ç­–ç•¥</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">## å›¢é˜Ÿå®ªæ³•ç»´æŠ¤æŒ‡å—</span>

<span class="hljs-section">### è°å¯ä»¥ä¿®æ”¹?</span>
<span class="hljs-bullet">-</span> æ‰€æœ‰å›¢é˜Ÿæˆå‘˜éƒ½å¯ä»¥æå‡ºä¿®æ”¹å»ºè®®
<span class="hljs-bullet">-</span> Tech Lead è´Ÿè´£æœ€ç»ˆå®¡æ ¸

<span class="hljs-section">### ä¿®æ”¹æµç¨‹</span>
<span class="hljs-bullet">1.</span> å‘ç°é—®é¢˜æˆ–æ”¹è¿›ç‚¹
<span class="hljs-bullet">2.</span> åˆ›å»º Issue è®¨è®ºå¿…è¦æ€§
<span class="hljs-bullet">3.</span> æäº¤ PR ä¿®æ”¹ CLAUDE.md æˆ– .claude/rules/ ä¸‹çš„è§„åˆ™æ–‡ä»¶
<span class="hljs-bullet">4.</span> Tech Lead å®¡æ ¸
<span class="hljs-bullet">5.</span> åˆå¹¶åå…¨å‘˜é€šçŸ¥

<span class="hljs-section">### å®šæœŸå›é¡¾</span>
<span class="hljs-bullet">-</span> æ¯æœˆ: å›¢é˜Ÿä¼šè®®å›é¡¾å®ªæ³•æ‰§è¡Œæƒ…å†µ
<span class="hljs-bullet">-</span> æ¯å­£åº¦: å…¨é¢å®¡æŸ¥å’Œä¼˜åŒ–
</code></pre>
<p><strong>æ²Ÿé€šæœºåˆ¶</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># ç¤ºä¾‹: PR æäº¤è¯´æ˜</span>

<span class="hljs-section">## ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªä¿®æ”¹?</span>
åœ¨æœ€è¿‘çš„ Code Review ä¸­,æˆ‘ä»¬å‘ç°å¤šä¸ª PR éƒ½å‡ºç°äº†æ—¥æœŸæ ¼å¼ä¸ç»Ÿä¸€çš„é—®é¢˜:
<span class="hljs-bullet">-</span> æœ‰çš„ç”¨ <span class="hljs-code">`YYYY-MM-DD`</span>
<span class="hljs-bullet">-</span> æœ‰çš„ç”¨ <span class="hljs-code">`MM/DD/YYYY`</span>
<span class="hljs-bullet">-</span> æœ‰çš„ç”¨æ—¶é—´æˆ³

è¿™å¯¼è‡´å‰åç«¯å¯¹æ¥æ—¶ç»å¸¸å‡ºé”™ã€‚

<span class="hljs-section">## æè®®çš„è§„èŒƒ</span>
ç»Ÿä¸€ä½¿ç”¨ ISO 8601 æ ¼å¼(<span class="hljs-code">`YYYY-MM-DDTHH:mm:ssZ`</span>)

<span class="hljs-section">## å½±å“èŒƒå›´</span>
<span class="hljs-bullet">-</span> å‰ç«¯å±•ç¤ºæ—¥æœŸæ—¶éœ€è¦æ ¼å¼åŒ–
<span class="hljs-bullet">-</span> åç«¯ API è¿”å›ç»Ÿä¸€æ ¼å¼
<span class="hljs-bullet">-</span> æ•°æ®åº“å­˜å‚¨ä½¿ç”¨ UTC æ—¶é—´

<span class="hljs-section">## ç›¸å…³è®¨è®º</span>
Issue #123: Date format inconsistency
</code></pre>
<hr/>
<h2 data-id="heading-18">äº”ã€å®æˆ˜æ¡ˆä¾‹:æ„å»º Android å›¢é˜Ÿçš„å›¢é˜Ÿå®ªæ³•</h2>
<h3 data-id="heading-19">5.1 ç›®å½•ç»“æ„</h3>
<pre><code class="hljs language-text" lang="text">android-project/
â”œâ”€ CLAUDE.md
â””â”€ .claude/
   â””â”€ rules/
      â”œâ”€ security.md
      â”œâ”€ testing.md
      â””â”€ coding-style.md
</code></pre>
<h3 data-id="heading-20">5.2 CLAUDE.mdï¼šé¡¹ç›®äº‹å®</h3>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Android Project - Claude Code Configuration</span>

<span class="hljs-section">## é¡¹ç›®æ¦‚è¿°</span>
<span class="hljs-bullet">-</span> æŠ€æœ¯æ ˆï¼šKotlin 1.9+ã€Android 14 (API 34)ã€MVVM + Clean Architecture
<span class="hljs-bullet">-</span> DIï¼šHilt
<span class="hljs-bullet">-</span> Asyncï¼šCoroutines + Flow
<span class="hljs-bullet">-</span> UIï¼šJetpack Compose
<span class="hljs-bullet">-</span> Testingï¼šJUnit5, Mockk, Espresso

<span class="hljs-section">## ç›®å½•ç»“æ„å…¥å£</span>
<span class="hljs-bullet">-</span> <span class="hljs-code">`app/src/main/java/`</span> - æºä»£ç ç›®å½•
<span class="hljs-bullet">-</span> <span class="hljs-code">`app/src/test/java/`</span> - å•å…ƒæµ‹è¯•ç›®å½•
<span class="hljs-bullet">-</span> <span class="hljs-code">`app/src/androidTest/java/`</span> - UI æµ‹è¯•ç›®å½•

<span class="hljs-section">## å¸¸ç”¨å‘½ä»¤ï¼ˆå¿…é¡»å‡†ç¡®ï¼‰</span>
<span class="hljs-bullet">-</span> å®‰è£…ä¾èµ–ï¼š<span class="hljs-code">`./gradlew build`</span>
<span class="hljs-bullet">-</span> è¿è¡Œæµ‹è¯•ï¼š<span class="hljs-code">`./gradlew test`</span>
<span class="hljs-bullet">-</span> è¿è¡Œ UI æµ‹è¯•ï¼š<span class="hljs-code">`./gradlew connectedAndroidTest`</span>
<span class="hljs-bullet">-</span> æ„å»º APKï¼š<span class="hljs-code">`./gradlew assembleDebug`</span>
<span class="hljs-bullet">-</span> ä»£ç æ ¼å¼åŒ–ï¼š<span class="hljs-code">`./gradlew ktlintFormat`</span>
<span class="hljs-bullet">-</span> é™æ€æ£€æŸ¥ï¼š<span class="hljs-code">`./gradlew ktlintCheck`</span>

<span class="hljs-section">## çº¦æŸï¼ˆå›¢é˜Ÿå…±è¯†ï¼‰</span>
<span class="hljs-bullet">-</span> é»˜è®¤å…ˆç”¨ Plan Mode åˆ†æï¼Œå†åŠ¨ä»£ç 
<span class="hljs-bullet">-</span> ä»»ä½•ä¼šå½±å“è¡Œä¸ºçš„æ”¹åŠ¨ï¼šå¿…é¡»è¡¥æµ‹è¯•/è¡¥æ–‡æ¡£
<span class="hljs-bullet">-</span> æ¶‰åŠå‡­è¯/æƒé™ï¼šå…ˆå®‰å…¨å®¡æŸ¥ï¼Œå†åˆå¹¶
<span class="hljs-bullet">-</span> ViewModel ä¸æŒæœ‰ Activity/Fragment å¼•ç”¨
<span class="hljs-bullet">-</span> ç½‘ç»œ/æ•°æ®åº“æ“ä½œå¿…é¡»ä½¿ç”¨ suspend å‡½æ•°
</code></pre>
<h3 data-id="heading-21">5.3 rules/coding-style.mdï¼šä»£ç é£æ ¼åº•çº¿</h3>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Kotlin ä»£ç é£æ ¼è§„èŒƒ</span>

<span class="hljs-section">## å‘½åçº¦å®š</span>
<span class="hljs-bullet">-</span> ç±»/æ¥å£: PascalCase (UserRepository)
<span class="hljs-bullet">-</span> å‡½æ•°/å±æ€§: camelCase (getUserById)
<span class="hljs-bullet">-</span> å¸¸é‡: UPPER<span class="hljs-emphasis">_SNAKE_</span>CASE (MAX<span class="hljs-emphasis">_RETRY_</span>COUNT)
<span class="hljs-bullet">-</span> åŒ…å: å°å†™,å•è¯é—´ç”¨ç‚¹åˆ†éš” (com.example.app)

<span class="hljs-section">## å±æ€§å£°æ˜</span>
<span class="hljs-bullet">-</span> ä¼˜å…ˆä½¿ç”¨ <span class="hljs-code">`val`</span> è€Œä¸æ˜¯ <span class="hljs-code">`var`</span>
<span class="hljs-bullet">-</span> ç§æœ‰å±æ€§ä½¿ç”¨ <span class="hljs-code">`private`</span> æ˜¾å¼æ ‡è®°
<span class="hljs-bullet">-</span> å¯ç©ºç±»å‹æ˜ç¡®æ ‡æ³¨ <span class="hljs-code">`?`</span>

<span class="hljs-section">## å¼‚æ­¥ç¼–ç¨‹</span>
<span class="hljs-bullet">-</span> ä½¿ç”¨ Coroutines,é¿å… Callback
<span class="hljs-bullet">-</span> ç½‘ç»œ/æ•°æ®åº“æ“ä½œä½¿ç”¨ <span class="hljs-code">`suspend`</span> å‡½æ•°
<span class="hljs-bullet">-</span> UI å±‚ä½¿ç”¨ <span class="hljs-code">`StateFlow`</span> / <span class="hljs-code">`SharedFlow`</span>

<span class="hljs-section">## èµ„æºå‘½å</span>
<span class="hljs-bullet">-</span> Drawable: <span class="hljs-code">`ic_*`</span> (å›¾æ ‡), <span class="hljs-code">`bg_*`</span> (èƒŒæ™¯), <span class="hljs-code">`img_*`</span> (å›¾ç‰‡)
<span class="hljs-bullet">-</span> Layout: <span class="hljs-code">`activity_*.xml`</span>, <span class="hljs-code">`fragment_*.xml`</span>, <span class="hljs-code">`item_*.xml`</span>
<span class="hljs-bullet">-</span> String: æ¨¡å—<span class="hljs-emphasis">_åŠŸèƒ½_</span>æè¿° (<span class="hljs-code">`user_profile_title`</span>)
</code></pre>
<h3 data-id="heading-22">5.4 rules/testing.mdï¼šæµ‹è¯•åº•çº¿</h3>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># æµ‹è¯•è§„èŒƒ</span>

<span class="hljs-section">## å•å…ƒæµ‹è¯•</span>
<span class="hljs-bullet">-</span> è¦†ç›–ç‡: &gt; 80%
<span class="hljs-bullet">-</span> UseCase å’Œ Repository å¿…é¡»æœ‰å•å…ƒæµ‹è¯•
<span class="hljs-bullet">-</span> ä½¿ç”¨ Mockk è¿›è¡Œ Mock
<span class="hljs-bullet">-</span> æµ‹è¯•ç”¨ä¾‹å‘½å: <span class="hljs-code">`should ... when ...`</span>

<span class="hljs-section">## UI æµ‹è¯•</span>
<span class="hljs-bullet">-</span> å…³é”®æµç¨‹å¿…é¡»æœ‰ Espresso æµ‹è¯•
<span class="hljs-bullet">-</span> ä½¿ç”¨ Hilt Test è¿›è¡Œä¾èµ–æ³¨å…¥

<span class="hljs-section">## TDD æµç¨‹</span>
<span class="hljs-bullet">-</span> RED: å…ˆå†™å¤±è´¥çš„æµ‹è¯•
<span class="hljs-bullet">-</span> GREEN: å®ç°æœ€å°ä»£ç è®©æµ‹è¯•é€šè¿‡
<span class="hljs-bullet">-</span> REFACTOR: é‡æ„ä¼˜åŒ–ä»£ç 
</code></pre>
<h3 data-id="heading-23">5.5 rules/security.mdï¼šå®‰å…¨åº•çº¿</h3>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># å®‰å…¨è§„èŒƒ</span>

<span class="hljs-section">## æ•æ„Ÿä¿¡æ¯å¤„ç†</span>
<span class="hljs-bullet">-</span> âŒ ç¦æ­¢: å°†å¯†é’¥/å¯†ç ç¡¬ç¼–ç åˆ°ä»£ç ä¸­
<span class="hljs-bullet">-</span> âœ… ä½¿ç”¨: BuildConfig æˆ– NDK å­˜å‚¨ API Key
<span class="hljs-bullet">-</span> âœ… ä½¿ç”¨: EncryptedSharedPreferences å­˜å‚¨ç”¨æˆ·å¯†ç /Token

<span class="hljs-section">## å†…å­˜æ³„æ¼é˜²æŠ¤</span>
<span class="hljs-bullet">-</span> ViewModel ä¸æŒæœ‰ Activity/Fragment å¼•ç”¨
<span class="hljs-bullet">-</span> é•¿ç”Ÿå‘½å‘¨æœŸå¯¹è±¡ä½¿ç”¨ ApplicationContext
<span class="hljs-bullet">-</span> ä½¿ç”¨ Lifecycle-aware ç»„ä»¶

<span class="hljs-section">## æƒé™è¯·æ±‚</span>
<span class="hljs-bullet">-</span> ä½¿ç”¨ ActivityResultContracts
<span class="hljs-bullet">-</span> è¯´æ˜æƒé™ç”¨é€”,æå‡æˆæƒç‡
</code></pre>
<hr/>
<h2 data-id="heading-24">å…­ã€æœ€ä½³å®è·µä¸å»ºè®®</h2>
<h3 data-id="heading-25">6.1 å¦‚ä½•ç¼–å†™æœ‰æ•ˆçš„å®ªæ³•æ¡æ¬¾</h3>
<p><strong>åŸåˆ™ 1: å…·ä½“è€ŒéæŠ½è±¡</strong></p>
<p>âŒ ä¸å¥½çš„ä¾‹å­:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">-</span> ä»£ç åº”è¯¥å†™å¾—æ¸…æ™°
<span class="hljs-bullet">-</span> æ³¨é‡Šè¦å†™å¥½
<span class="hljs-bullet">-</span> æ€§èƒ½è¦ä¼˜åŒ–
</code></pre>
<p>âœ… å¥½çš„ä¾‹å­:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">-</span> æ‰€æœ‰å…¬å…± API å¿…é¡»æ·»åŠ  JSDoc æ³¨é‡Š,åŒ…å«å‚æ•°è¯´æ˜å’Œç¤ºä¾‹
<span class="hljs-bullet">-</span> å‡½æ•°å¤æ‚åº¦ä¸è¶…è¿‡ 15(Cyclomatic Complexity)
<span class="hljs-bullet">-</span> API å“åº”æ—¶é—´ P95 &lt; 200ms
</code></pre>
<p><strong>åŸåˆ™ 2: æä¾›æ­£åç¤ºä¾‹</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">### é”™è¯¯å¤„ç†</span>

âœ… æ­£ç¡®:
\<span class="hljs-code">`\`</span>\`typescript
try {
  const data = await fetchData();
  return data;
} catch (error: unknown) {
  if (error instanceof NetworkError) {
<span class="hljs-code">    logger.error('Network request failed', { error });
    throw new ServiceUnavailableError('Service temporarily unavailable');
  }
  throw error;
}
\`\`\`
</span>
âŒ é”™è¯¯:
\<span class="hljs-code">`\`</span>\`typescript
try {
  const data = await fetchData();
  return data;
} catch (e) {
  console.log(e);  // åªæ‰“å°æ—¥å¿—,ä¸å¤„ç†
  return null;     // åæ‰å¼‚å¸¸
}
\<span class="hljs-code">`\`</span>\`
</code></pre>
<p><strong>åŸåˆ™ 3: è¯´æ˜"ä¸ºä»€ä¹ˆ"</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">### ä¼˜å…ˆä½¿ç”¨ `const` è€Œä¸æ˜¯ `let`</span>

<span class="hljs-strong">**åŸå› **</span>:
<span class="hljs-bullet">-</span> æé«˜ä»£ç å¯è¯»æ€§:å˜é‡ä¸å¯å˜æ›´,å‡å°‘è®¤çŸ¥è´Ÿæ‹…
<span class="hljs-bullet">-</span> é¿å…æ„å¤–ä¿®æ”¹:é˜²æ­¢ bug
<span class="hljs-bullet">-</span> ä¼˜åŒ–æ€§èƒ½:ç¼–è¯‘å™¨å¯ä»¥æ›´å¥½åœ°ä¼˜åŒ–

<span class="hljs-strong">**ä¾‹å¤–æƒ…å†µ**</span>:
<span class="hljs-bullet">-</span> å¾ªç¯è®¡æ•°å™¨
<span class="hljs-bullet">-</span> ç´¯åŠ å™¨å˜é‡
</code></pre>
<p><strong>åŸåˆ™ 4: è®¾ç½®ä¼˜å…ˆçº§</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">## ç¼–ç è§„èŒƒä¼˜å…ˆçº§</span>

<span class="hljs-section">### P0 (å¿…é¡»éµå®ˆ,å¦åˆ™æ‹’ç»åˆå¹¶)</span>
<span class="hljs-bullet">-</span> æ‰€æœ‰æ•æ„Ÿä¿¡æ¯ä¸å¾—ç¡¬ç¼–ç 
<span class="hljs-bullet">-</span> å¿…é¡»é€šè¿‡å•å…ƒæµ‹è¯•
<span class="hljs-bullet">-</span> ä¸å¾—å‡ºç° ESLint error

<span class="hljs-section">### P1 (å¼ºçƒˆå»ºè®®,Code Review ä¼šæå‡º)</span>
<span class="hljs-bullet">-</span> å…¬å…± API å¿…é¡»æœ‰ JSDoc
<span class="hljs-bullet">-</span> å¤æ‚é€»è¾‘å¿…é¡»æœ‰æ³¨é‡Š
<span class="hljs-bullet">-</span> æµ‹è¯•è¦†ç›–ç‡ &gt; 80%

<span class="hljs-section">### P2 (å»ºè®®,ä½†ä¸å¼ºåˆ¶)</span>
<span class="hljs-bullet">-</span> ä½¿ç”¨ TypeScript ç±»å‹æ¨æ–­ç®€åŒ–ä»£ç 
<span class="hljs-bullet">-</span> ä¼˜å…ˆä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹
</code></pre>
<h3 data-id="heading-26">6.2 å¦‚ä½•è®© AI ç†è§£å’Œéµå®ˆè§„èŒƒ</h3>
<p><strong>æŠ€å·§ 1: ä½¿ç”¨æ¸…æ™°çš„æ ‡è®°</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">## è§„èŒƒæ ‡è®°è¯´æ˜</span>

<span class="hljs-bullet">-</span> âœ… <span class="hljs-strong">**å¿…é¡»**</span>: å¼ºåˆ¶æ‰§è¡Œ,ä¸å¯è¿å
<span class="hljs-bullet">-</span> âš ï¸ <span class="hljs-strong">**æ¨è**</span>: å¼ºçƒˆå»ºè®®,æœ‰ç‰¹æ®ŠåŸå› å¯ä¾‹å¤–
<span class="hljs-bullet">-</span> ğŸ’¡ <span class="hljs-strong">**å»ºè®®**</span>: æœ€ä½³å®è·µ,å¯æ ¹æ®æƒ…å†µè°ƒæ•´
<span class="hljs-bullet">-</span> âŒ <span class="hljs-strong">**ç¦æ­¢**</span>: ç»å¯¹ä¸å…è®¸
</code></pre>
<p><strong>æŠ€å·§ 2: ç»“æ„åŒ–ç»„ç»‡</strong></p>
<p>æŒ‰ç…§å®˜æ–¹æ¨èçš„ç›®å½•ç»“æ„ç»„ç»‡ï¼š</p>
<pre><code class="hljs language-text" lang="text">your-repo/
â”œâ”€ CLAUDE.md              # é¡¹ç›®äº‹å®
â””â”€ .claude/
   â””â”€ rules/              # åº•çº¿è§„åˆ™
      â”œâ”€ security.md
      â”œâ”€ testing.md
      â””â”€ coding-style.md
</code></pre>
<p>æ¯ä¸ªæ–‡ä»¶èŒè´£å•ä¸€ï¼Œä¾¿äºç»´æŠ¤å’Œå®¡æŸ¥ã€‚</p>
<p><strong>æŠ€å·§ 3: ä½¿ç”¨å…³é”®è¯å¼ºè°ƒ</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">### å®‰å…¨è§„èŒƒ</span>

âš ï¸ <span class="hljs-strong">**CRITICAL**</span>: ç»å¯¹ä¸å…è®¸å°†å¯†é’¥ç¡¬ç¼–ç åˆ°ä»£ç ä¸­

âŒ <span class="hljs-strong">**NEVER**</span> do this:
\<span class="hljs-code">`\`</span>\`typescript
const API<span class="hljs-emphasis">_KEY = 'sk-1234567890abcdef';
\`\`\`

âœ… <span class="hljs-strong">**ALWAYS**</span> use environment variables:
\`\`\`typescript
const API_</span>KEY = process.env.API<span class="hljs-emphasis">_KEY;
\`\`\`
</span></code></pre>
<p><strong>æŠ€å·§ 4: æä¾›å†³ç­–æ ‘</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">### ä½•æ—¶ä½¿ç”¨ç¼“å­˜?</span>

\<span class="hljs-code">`\`</span>\`
æ•°æ®æ˜¯å¦é¢‘ç¹è¯»å–?
  â”œâ”€ æ˜¯ â†’ æ•°æ®æ˜¯å¦ç»å¸¸å˜åŒ–?
  â”‚       â”œâ”€ æ˜¯ â†’ ä½¿ç”¨çŸ­ TTL ç¼“å­˜(5åˆ†é’Ÿ)
  â”‚       â””â”€ å¦ â†’ ä½¿ç”¨é•¿ TTL ç¼“å­˜(1å°æ—¶)
  â””â”€ å¦ â†’ ä¸ä½¿ç”¨ç¼“å­˜,ç›´æ¥æŸ¥è¯¢
\<span class="hljs-code">`\`</span>\`
</code></pre>
<h3 data-id="heading-27">6.3 å›¢é˜Ÿæ¨å¹¿ç­–ç•¥</h3>
<p><strong>é˜¶æ®µ 1: è¯•ç‚¹é¡¹ç›®(ç¬¬1å‘¨)</strong></p>
<ol>
<li>é€‰æ‹©ä¸€ä¸ªå°å‹é¡¹ç›®ä½œä¸ºè¯•ç‚¹</li>
<li>ç¼–å†™åŸºç¡€çš„ CLAUDE.mdï¼ˆé¡¹ç›®äº‹å®ï¼‰å’Œ rules/ ç›®å½•ï¼ˆæ ¸å¿ƒè§„èŒƒï¼‰</li>
<li>å›¢é˜Ÿæˆå‘˜è½®æµä½¿ç”¨ Claude Code</li>
<li>æ”¶é›†åé¦ˆ,å¿«é€Ÿè¿­ä»£</li>
</ol>
<p><strong>é˜¶æ®µ 2: è§„èŒƒå®Œå–„(ç¬¬2-4å‘¨)</strong></p>
<ol>
<li>æ ¹æ®å®é™…ä½¿ç”¨å‘ç°çš„é—®é¢˜æ›´æ–°è§„èŒƒ</li>
<li>æ·»åŠ æ›´å¤šç¤ºä¾‹å’Œè¯´æ˜</li>
<li>ç»„ç»‡å›¢é˜ŸåŸ¹è®­,è®²è§£è§„èŒƒçš„ä»·å€¼</li>
<li>å»ºç«‹è§„èŒƒæ›´æ–°æœºåˆ¶</li>
</ol>
<p><strong>é˜¶æ®µ 3: å…¨é¢æ¨å¹¿(ç¬¬5-8å‘¨)</strong></p>
<ol>
<li>åœ¨æ‰€æœ‰é¡¹ç›®ä¸­å¯ç”¨ claude.md</li>
<li>å°† claude.md æ£€æŸ¥åŠ å…¥ CI/CD æµç¨‹</li>
<li>å®šæœŸå›é¡¾å’Œä¼˜åŒ–è§„èŒƒ</li>
<li>åˆ†äº«æˆåŠŸæ¡ˆä¾‹å’Œæ•°æ®</li>
</ol>
<p><strong>é˜¶æ®µ 4: æŒç»­æ”¹è¿›(é•¿æœŸ)</strong></p>
<ol>
<li>å»ºç«‹å¤åˆ©æ¨¡å¼:å‘ç°é—®é¢˜ â†’ æ›´æ–°å®ªæ³•</li>
<li>è·Ÿè¸ªæŒ‡æ ‡:ä»£ç è´¨é‡ã€Code Review æ—¶é—´ã€Bug æ•°é‡</li>
<li>å®šæœŸå›¢é˜Ÿåˆ†äº«:æœ€ä½³å®è·µã€è¸©å‘ç»éªŒ</li>
<li>ç‰ˆæœ¬ç®¡ç†:é‡å¤§æ›´æ–°æ—¶å‡çº§ç‰ˆæœ¬å·</li>
</ol>
<p><strong>æ¨å¹¿æŠ€å·§</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">### è®©å›¢é˜Ÿæ¥å— claude.md çš„æŠ€å·§</span>

<span class="hljs-bullet">1.</span> <span class="hljs-strong">**å±•ç¤ºæ”¶ç›Š,ä¸æ˜¯çº¦æŸ**</span>
<span class="hljs-bullet">   -</span> "è¿™èƒ½è®© Code Review æ—¶é—´å‡å°‘ 50%"
<span class="hljs-bullet">   -</span> "æ–°äººä¸Šæ‰‹é€Ÿåº¦æå‡ 3 å€"
<span class="hljs-bullet">   -</span> "Bug æ•°é‡ä¸‹é™ 40%"

<span class="hljs-bullet">2.</span> <span class="hljs-strong">**ä»ç—›ç‚¹å‡ºå‘**</span>
<span class="hljs-bullet">   -</span> "è¿˜è®°å¾—ä¸Šå‘¨é‚£ä¸ªä½çº§ Bug å—?å¦‚æœæœ‰è§„èŒƒå°±èƒ½é¿å…"
<span class="hljs-bullet">   -</span> "æ¯æ¬¡ Code Review éƒ½åœ¨è¯´åŒæ ·çš„é—®é¢˜,ç´¯ä¸ç´¯?"

<span class="hljs-bullet">3.</span> <span class="hljs-strong">**å°æ­¥å¿«è·‘**</span>
<span class="hljs-bullet">   -</span> ä¸è¦ä¸€æ¬¡æ€§å†™ 100 æ¡è§„èŒƒ
<span class="hljs-bullet">   -</span> ä» 3-5 æ¡æ ¸å¿ƒè§„èŒƒå¼€å§‹ï¼ˆæ”¾åœ¨ rules/ ç›®å½•ï¼‰
<span class="hljs-bullet">   -</span> é€æ­¥å®Œå–„,è®©å›¢é˜Ÿé€‚åº”

<span class="hljs-bullet">4.</span> <span class="hljs-strong">**è®©å¤§å®¶å‚ä¸**</span>
<span class="hljs-bullet">   -</span> è§„èŒƒä¸æ˜¯ Tech Lead ä¸€ä¸ªäººå®šçš„
<span class="hljs-bullet">   -</span> é¼“åŠ±æ‰€æœ‰äººæå‡ºæ”¹è¿›å»ºè®®
<span class="hljs-bullet">   -</span> å®šæœŸè®¨è®ºå’ŒæŠ•ç¥¨å†³å®šé‡è¦æ¡æ¬¾
</code></pre>
<hr/>
<h2 data-id="heading-28">ä¸ƒã€æ€»ç»“ä¸è¡ŒåŠ¨æŒ‡å—</h2>
<h3 data-id="heading-29">7.1 æ ¸å¿ƒè¦ç‚¹å›é¡¾</h3>
<p>é€šè¿‡æœ¬æ–‡,æˆ‘ä»¬æ·±å…¥æ¢è®¨äº† claude.md ä½œä¸º"å›¢é˜Ÿå®ªæ³•"çš„ä»·å€¼:</p>
<p><strong>1. ä¸ºä»€ä¹ˆéœ€è¦å›¢é˜Ÿå®ªæ³•?</strong></p>
<ul>
<li>ä¼ ç»Ÿè§„èŒƒé äººè‚‰æ‰§è¡Œ,æ•ˆç‡ä½ã€æ˜“é—æ¼</li>
<li>AI è¾…åŠ©å¼€å‘éœ€è¦æ˜ç¡®è§„èŒƒ,å¦åˆ™ä»£ç è´¨é‡å‚å·®ä¸é½</li>
<li>claude.md æ˜¯è‡ªåŠ¨åŒ–ã€ç»Ÿä¸€ã€å¯æ¼”è¿›çš„è§£å†³æ–¹æ¡ˆ</li>
</ul>
<p><strong>2. claude.md çš„å·¥ä½œæœºåˆ¶</strong></p>
<ul>
<li>ä¸¤çº§é…ç½®:å…¨å±€ + é¡¹ç›®,é¡¹ç›®é…ç½®è¦†ç›–å…¨å±€é…ç½®</li>
<li>ä½œä¸ºç³»ç»Ÿæç¤ºè¯æ³¨å…¥åˆ°æ¯æ¬¡ AI è°ƒç”¨,ä¼˜å…ˆçº§é«˜äºå¯¹è¯å†å²</li>
</ul>
<p><strong>3. å›¢é˜Ÿå®ªæ³•çš„å†…å®¹è®¾è®¡</strong></p>
<ul>
<li>CLAUDE.mdï¼šé¡¹ç›®äº‹å®ï¼ˆæŠ€æœ¯æ ˆã€å¸¸ç”¨å‘½ä»¤ã€çº¦æŸï¼‰</li>
<li>rules/ ç›®å½•ï¼šåº•çº¿è§„åˆ™ï¼ˆsecurity.mdã€testing.mdã€coding-style.mdï¼‰</li>
</ul>
<p><strong>4. å¤åˆ©æ¨¡å¼:æŒç»­æ¼”è¿›</strong></p>
<ul>
<li>å‘ç°é—®é¢˜ â†’ æ›´æ–°å®ªæ³• â†’ å…¨å‘˜å—ç›Š</li>
<li>ç‰ˆæœ¬ç®¡ç†:Git è·Ÿè¸ªè§„èŒƒæ¼”è¿›</li>
<li>å›¢é˜Ÿåä½œ:å…±åŒç»´æŠ¤,å®šæœŸå›é¡¾</li>
</ul>
<p><strong>5. å®æˆ˜æ¡ˆä¾‹:Android å›¢é˜Ÿ</strong></p>
<ul>
<li>å®Œæ•´çš„ CLAUDE.md å’Œ rules/ ç›®å½•ç¤ºä¾‹</li>
<li>èŒè´£åˆ†ç¦»ï¼šCLAUDE.md å­˜é¡¹ç›®äº‹å®ï¼Œrules/ å­˜è§„åˆ™çº¦æŸ</li>
<li>æ•°æ®è¯æ˜:Code Review æ—¶é—´å‡å°‘ 80%</li>
</ul>
<hr/>
<blockquote>
<p>ğŸ’¡ <strong>æ€è€ƒé¢˜</strong>: ä½ çš„å›¢é˜Ÿç›®å‰æœ‰å“ªäº›è§„èŒƒæ‰§è¡Œä¸åˆ°ä½çš„é—®é¢˜?å¦‚æœç”¨ CLAUDE.md å’Œruleæ¥è§£å†³,ä½ ä¼šå…ˆå†™å“ª 3 æ¡è§„èŒƒ?</p>
</blockquote>
<p>ğŸ”— <strong>ç›¸å…³æ–‡ç« </strong>:</p>
<ul>
<li><a href="https://juejin.cn/post/7601034810313080886" target="_blank" title="https://juejin.cn/post/7601034810313080886">ä¸Šä¸€ç¯‡: æ·±å…¥ç†è§£ Claude Code</a></li>
</ul>
<hr/>
<p>ğŸ“¥ <strong>ä¸‹è½½èµ„æº</strong>:</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fchendongqi%2Fawesome-ai-coding%2Ftree%2Fmain%2Frules" target="_blank" title="https://github.com/chendongqi/awesome-ai-coding/tree/main/rules" ref="nofollow noopener noreferrer">Awesome AI Coding</a> - è¦†ç›–å¤§éƒ¨åˆ†å¼€å‘é¢†åŸŸçš„è§„åˆ™é›†åˆ</li>
</ul>
<p><em>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©,æ¬¢è¿ç‚¹èµã€æ”¶è—ã€åˆ†äº«!æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®,æ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºã€‚è®©æˆ‘ä»¬ä¸€èµ·å­¦ä¹ ,ä¸€èµ·æˆé•¿!</em></p>
<p><em>ä¹Ÿæ¬¢è¿è®¿é—®æˆ‘çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top" target="_blank" title="https://home.wonlab.top" ref="nofollow noopener noreferrer">ä¸ªäººä¸»é¡µ</a>å‘ç°æ›´å¤šå®è—èµ„æº</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäºTransformersä»0åˆ°1è®­ç»ƒä¸€ä¸ªæ¨¡å‹]]></title>    <link>https://juejin.cn/post/7602789520035512330</link>    <guid>https://juejin.cn/post/7602789520035512330</guid>    <pubDate>2026-02-04T09:34:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602789520035512330" data-draft-id="7602842876256174126" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäºTransformersä»0åˆ°1è®­ç»ƒä¸€ä¸ªæ¨¡å‹"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2026-02-04T09:34:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†°èŒ¶èŒ¶"/> <meta itemprop="url" content="https://juejin.cn/user/3245414058035111"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäºTransformersä»0åˆ°1è®­ç»ƒä¸€ä¸ªæ¨¡å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3245414058035111/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†°èŒ¶èŒ¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T09:34:46.000Z" title="Wed Feb 04 2026 09:34:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æˆ‘åˆšä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹æ¯”å¦‚ Deekseekã€ChatGPT è¿›å…¥å¯¹è¯æ—¶ï¼Œæˆ‘ä¹Ÿæ›¾ä¸€åº¦è§‰å¾—è¿™ä¸ªä¸–ç•Œä¸Šæœ‰é­”æ³•ï¼Œä½†å®é™…ä¸Šè¿™èƒŒåå¹¶æ²¡æœ‰çœŸæ­£çš„é­”æ³•ï¼Œæˆ–è€…è¯´ï¼Œæ‰€è°“çš„é­”æ³•å…¶å®æ˜¯æ•°å­¦çš„é­”æ³•ï¼›è€Œæ•°å­¦è®¡ç®—ä¸–ç•Œçš„å‰æå°±æ˜¯æ‰¾åˆ°ä¸€ç§æ–¹æ³•ï¼Œå°†è¿ç»­çš„çœŸå®è½¬åŒ–ä¸ºç¦»æ•£çš„æ¨¡å‹ï¼ˆè¿™é‡Œæ‰€è°“çš„æ¨¡å‹ä¸åœ¨æ˜¯æŒ‡å¤§æ¨¡å‹ï¼Œè€Œæ˜¯æŒ‡å…·ä½“äº‹ç‰©çš„æŠ½è±¡ç»“æœï¼‰ï¼Œç„¶åå†è¿ç”¨å„ç§æ•°å­¦çŸ¥è¯†å»è®¡ç®—ã€å»æ‹Ÿåˆã€‚</p>
<p>è€Œæœ€å¥½çš„å»æ­å¼€å¤§æ¨¡å‹èƒŒåçš„é­”æ³•çš„æ–¹å¼ï¼Œå°±æ˜¯è‡ªå·±äº²æ‰‹å»åšä¸€ä¸ªå¤§æ¨¡å‹ï¼Œæƒ³è¦åœ¨å“ªä¸€å±‚å»åˆ¶ä½œå¤§æ¨¡å‹å–å†³äºä½ çš„ç›®çš„å’Œç²¾åŠ›ï¼Œæˆ‘è§‰å¾—ä»…ä»…å­¦ä¹ ä¸€äº›å…¥é—¨çš„æµç¨‹çŸ¥è¯†å¹¶ä¸èƒ½æ»¡è¶³æˆ‘ï¼Œä½†æ˜¯è¦æˆ‘ä»ç¥ç»ç½‘ç»œçš„æ•°å­¦å…¬å¼å¼€å§‹ç ”ç©¶æˆ‘åˆæ²¡é‚£ä¹ˆèªæ˜ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©åˆ©ç”¨å°è£…åçš„ã€è€Œä¸”æ˜¯é«˜åº¦å°è£…åçš„ä»£ç åº“æ¥å®Œæˆæ¨¡å‹çš„è®­ç»ƒæµç¨‹ï¼Œå¹¶ä¸”è¯•å›¾åœ¨æœ‰é™çš„ä»£ç ä¸­çœ‹åˆ°é­”æ³•èƒŒåæ›´å¤šç»´åº¦çš„çœŸç›¸ã€‚</p>
<blockquote>
<p>è¯·æ³¨æ„ï¼Œæœ¬ç¯‡ä»…ä»…æ˜¯ä¸ªäººè¾“å‡ºå’Œè®°å½•åˆ†äº«ï¼Œå¹¶ä¸ä¸€å®šä¼šè¯¦ç»†è§£é‡Šæ¯ä¸€ä¸ªæœ¯è¯­å’Œæ­¥éª¤ä¸”å¿…ç„¶å­˜åœ¨ä¸€äº›ä¸ªäººç†è§£é”™è¯¯ï¼Œæ„Ÿè°¢å¤§å®¶ç†è§£ã€‚</p>
</blockquote>
<h2 data-id="heading-0">èƒŒæ™¯çŸ¥è¯†</h2>
<p>ç®€å•åœ°ç”¨æµç¨‹å›¾è¡¨ç¤ºä¸€ä¸‹ä¸€ä¸ªå¤§æ¨¡å‹çš„è®­ç»ƒæµç¨‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8aa10b081604432b2f662a1815aec48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yaw6Iy26Iy2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803570&amp;x-signature=ljSvChCFZxK2f2Y%2FJ4Zgp33M2qs%3D" alt="" loading="lazy"/></p>
<ol>
<li>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°å¯æœ€åˆç”¨äºè®­ç»ƒçš„æ•°æ®é›†ï¼Œæ•°æ®é›†çœ‹ç€å¾ˆç®€å•ï¼Œä½†å®é™…ä¸Šå®ƒçš„è´¨é‡ä¼šç›´æ¥å½±å“æœ€åçš„å¤§æ¨¡å‹ï¼Œæ‰€ä»¥æœ€å¼€å§‹è¿™ä¸€æ­¥ä¹Ÿæ˜¯æœ€ä¸ºå…³é”®çš„ä¸€æ­¥</p>
</li>
<li>
<p>æœ‰äº†æ•°æ®é›†ä¹‹åï¼Œæˆ‘ä»¬ä¾¿éœ€è¦ç”¨åˆ†è¯ç®—æ³•å¯¹å…¶è¿›è¡Œtokenizationï¼ˆåˆ†è¯ï¼‰ï¼Œè¿™ä¸€æ­¥å…¶å®å°±æ˜¯å°†è¿ç»­çš„è¯­è¨€ä¿¡æ¯è½¬åŒ–æˆç¦»æ•£çš„ä¿¡æ¯å•å…ƒ</p>
</li>
<li>
<p>å°†åˆ†è¯åçš„ç»“æ„åŠè¡¨æ ¼åŒåŸæ•°æ®é›†ä¸€èµ·ä¸¢ç»™transformerç®—æ³•ï¼Œè€—è´¹éå¸¸å·¨å¤§çš„äººåŠ›ç‰©åŠ›ç®—åŠ›ï¼Œæœ€ç»ˆæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ª base/foundation modelï¼Œä½†æ˜¯ç›®å‰è¿™ä¸ªæ¨¡å‹å¹¶ä¸ä¼šè¿›è¡Œæ™ºèƒ½é—®ç­”ï¼Œå› ä¸ºå®ƒè¿˜æ²¡æœ‰å­¦ä¼šå¦‚ä½•ã€Œchatã€ï¼Œæ‰€ä»¥å®ƒåªä¼šåŸºäºä½ çš„è¯è¿›è¡Œæ¥é¾™ï¼Œæ¥é¾™çš„ä¾æ®å°±æ˜¯å‘é‡ç©ºé—´ä¸­å„åˆ†è¯çš„ç›¸ä¼¼åº¦æ¦‚ç‡</p>
</li>
<li>
<p>å¦‚æœæƒ³è¦åŸºç¡€æ¨¡å‹å˜å¾—ä¼šè¯´è¯ï¼Œé‚£å°±éœ€è¦è¿›è¡Œ SFTï¼ˆç›‘ç£å¾®è°ƒï¼‰ï¼Œé€šè¿‡å–‚ç»™æ¨¡å‹ä¸€å®šä½“é‡çš„é—®ç­”ç»“æ„çš„æ•°æ®ï¼Œè®©æ¨¡å‹å­¦ä¼šæ€ä¹ˆåŸºäº user-assistant çš„æ¨¡å¼å»å›ç­”äººç±»æˆ–è¿›è¡Œã€Œchatã€</p>
</li>
<li>
<p>å¾ˆå¤šé—®é¢˜æˆ–è®¸æ²¡æœ‰æ ‡å‡†ç­”æ¡ˆï¼Œå¹¶ä¸”äººç±»åå¥½çš„äº¤æµæ¨¡å¼å’Œé£æ ¼ä¹Ÿéƒ½æ˜¯æœ‰ä¸€å®šèŒƒå›´çš„ï¼Œæ‰€ä»¥æ­¤æ—¶éœ€è¦é€šè¿‡ RLï¼ˆå¢å¼ºå­¦ä¹ ï¼‰ï¼Œæˆ–è€…é€šè¿‡æ›´æ–°çš„æŠ€æœ¯ DPOï¼ˆç›´æ¥åå¥½ä¼˜åŒ–ï¼‰ï¼Œæ¥è®­ç»ƒæ¨¡å‹å°½é‡è¾“å‡ºæ›´ç¬¦åˆäººç±»åå¥½å’Œå®¡ç¾çš„å›ç­”</p>
</li>
</ol>
<p>æœ¬æ¬¡è®­ç»ƒçš„æ¨¡å‹å°†ä¼šæŒ‰ç…§ pretraining-SFT-DPO è¿™ä¸€è·¯å¾„æ¥å®Œæˆã€‚</p>
<h2 data-id="heading-1">å‡†å¤‡å·¥ä½œ</h2>
<p>é¦–å…ˆæŠ€æœ¯é€‰å‹å…·ä½“å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3ff482d519145aa9ff5ec427a3b604d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yaw6Iy26Iy2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803570&amp;x-signature=vdKkT0xMV9b8j2G8h1BUrRNkxMc%3D" alt="" loading="lazy"/></p>
<p>ç”±äºæˆ‘çš„ä¸ªäººç”µè„‘ GPU éå¸¸å¼±ï¼Œè€Œä¸”ä½¿ç”¨ GPU æ¥è¿›è¡Œæ¨¡å‹è®­ç»ƒéå¸¸å®¹æ˜“å‡ºç° OOMï¼ˆå†…å­˜æº¢å‡ºï¼‰ï¼Œæ‰€ä»¥æˆ‘åœ¨ä»£ç ä¸­å¼ºåˆ¶è§„å®šäº†åªä½¿ç”¨ CPU è¿›è¡Œå„ç§è¿ç®—ï¼›</p>
<p>è€Œ CPU è¿ç®—ç¡®å®ç‰¹åˆ«æ…¢ï¼Œæ‰€ä»¥æ¨¡å‹çš„å‚æ•°ã€å±‚æ•°æˆ‘éƒ½ä¸èƒ½è®¾ç½®å¤ªå¤šï¼Œä»¥ä¸‹æ˜¯æˆ‘çš„æ¨¡å‹çš„ä¸€äº›é‡è¦å‚æ•°ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/741fbb1b9cfc494bb3b9e064297ebd32~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yaw6Iy26Iy2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803570&amp;x-signature=XtzYKFN3zgNIwESPjw5rZJpOSJE%3D" alt="" loading="lazy"/></p>
<p>å…¶å®è¿™ä¸ªå‚æ•°é‡å®Œå…¨ä¸å¤Ÿç”¨ï¼Œå› ä¸ºç›®å‰å¸‚åœºä¸Šæˆç†Ÿå¤§æ¨¡å‹çš„å‚æ•°é‡åŸºæœ¬éƒ½æ˜¯ B æ•°é‡çº§èµ·æ­¥çš„ï¼Œæ‰€ä»¥æˆ‘è¿™é¡¶å¤šç®—åšæ˜¯ã€Œå°ã€æ¨¡å‹äº†ï¼Œä½†æ˜¯ä»…ä»…å°± 256 Vectors + 4 layers å°±åœ¨æˆ‘çš„ç”µè„‘ä¸ŠèŠ±äº†å¾ˆä¹…çš„è¿ç®—æ—¶é—´ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f27f27ffdfe444896a86611a65c6502~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yaw6Iy26Iy2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803570&amp;x-signature=z8j7QYr2yZ0S3wZeYKnyCWFp6tc%3D" alt="" loading="lazy"/>æ¥ä¸‹æ¥æˆ‘å°†è¾ƒä¸ºè¯¦ç»†åœ°æ¼”ç¤ºæ¯ä¸€æ­¥éª¤ï¼Œå¦‚æœæœ‰ä»£ç éœ€æ±‚å¯¹åº”çš„ GitHub åœ°å€åœ¨è¿™é‡Œï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FChacha-Bing%2Fmed_model_learning" target="_blank" title="https://github.com/Chacha-Bing/med_model_learning" ref="nofollow noopener noreferrer">github.com/Chacha-Bingâ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b2428d839824eea81aff847491fa76b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yaw6Iy26Iy2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803570&amp;x-signature=l4oF6RmfX4nOgb75GLZASBzaw4U%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">è®­ç»ƒæ¨¡å‹</h2>
<h3 data-id="heading-3">æ•°æ®é›†</h3>
<p>ä¸Šé¢ä¹Ÿæåˆ°è¿‡ï¼Œæ•°æ®é›†ä½œä¸ºæœ€åŸå§‹çš„å–‚ç»™æ¨¡å‹è®­ç»ƒçš„åŸæ²¹éå¸¸é‡è¦ï¼Œæ•°æ®é›†çš„å¤§å°ä¸è´¨é‡å°†ä¼šç›´æ¥å†³å®šæˆå“æ¨¡å‹çš„è´¨é‡ã€‚</p>
<p>ç›®å‰å¤§éƒ¨åˆ†æœ€å…ˆè¿›æ¨¡å‹çš„æ•°æ®é›†éƒ½æ˜¯éå…¬å¼€çš„ï¼ˆå³ä½¿ä»–ä»¬æœ¬èº«å·²ç»å¼€æºï¼‰ï¼Œä½†æ˜¯æˆ‘ä»¬å·²çŸ¥çš„æ˜¯ï¼Œè¿™äº›è¯­è¨€å¤§æ¨¡å‹çš„è®­ç»ƒæ•°æ®é›†çš„æ•°é‡çº§å·²ç»æ¥åˆ°äº† TB çº§åˆ«ï¼Œè€Œä¸”åœ¨ä¸è¿œçš„æœªæ¥å‡ å¹´æˆ–è®¸å°±ä¼šæŠŠäººç±»äº’è”ç½‘å·²æœ‰çš„æ–‡å­—èµ„æ–™ç»™è®­ç»ƒæ®†å°½ã€‚</p>
<p>ä½†æ˜¯æœ‰äº†å„ç§ç½‘ç»œæ•°æ®ä»¥åå¹¶ä¸å¯ä»¥ç›´æ¥æ‹¿æ¥ä½¿ç”¨ï¼Œå› ä¸ºè¿™äº›ç½‘ç»œä¿¡æ¯ä¸­å¯èƒ½åŒ…å«å¤§é‡çš„é‡å¤æ–‡ç« ã€å¹¿å‘Šä¿¡æ¯ã€æœ‰æ¯’æœ‰å®³ä¿¡æ¯ç­‰ï¼Œè¿™äº›æ–‡å­—å°†ä¼šä¸¥é‡å½±å“æ¨¡å‹çš„åå¥½ä¸è®­ç»ƒæˆæœï¼Œæ‰€ä»¥å¦‚ä½•è¿›è¡Œæ•°æ®æ¸…æ´—å’Œç»“æ„åŒ–æ˜¯æ•°æ®é›†ä¸­æ›´ä¸ºè‡³å…³é‡è¦çš„ä¸€æ­¥ã€‚</p>
<p>ä½†æ˜¯ç°åœ¨ä¼˜ç§€æ•°æ®é›†å¹¶ä¸éš¾å¾—åˆ°ï¼Œæ¯”å¦‚ Huggingface ä¸Šçš„ FineWeb é¡¹ç›®ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2Fdatasets%2FHuggingFaceFW%2Ffineweb%25EF%25BC%2589%25EF%25BC%258C%25E8%25BF%2599%25E4%25B8%25AA%25E9%25A1%25B9%25E7%259B%25AE%25E7%259A%2584%25E6%2595%25B0%25E6%258D%25AE%25E9%259B%2586%25E6%259C%2589%25E7%259D%2580%25E5%25A4%259A%25E8%25BE%25BE" target="_blank" title="https://huggingface.co/datasets/HuggingFaceFW/fineweb%EF%BC%89%EF%BC%8C%E8%BF%99%E4%B8%AA%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%95%B0%E6%8D%AE%E9%9B%86%E6%9C%89%E7%9D%80%E5%A4%9A%E8%BE%BE" ref="nofollow noopener noreferrer">huggingface.co/datasets/Huâ€¦</a> 18.5T tokensï¼Œå®ƒä»¬ç»ç”±çˆ¬è™«ï¼ˆCommon Crawlï¼‰çˆ¬å–æ•°æ®å¹¶ä¸”åšäº†ä¸€å®šçš„æ¸…æ´—ï¼Œä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°å°±ä¸‹è½½åˆ°å…¶ä¸­çš„æŸäº›æ•°æ®åˆ†ç‰‡ç”šè‡³æ˜¯å…¨é‡çš„æ•°æ®ï¼Œä½†çœŸæ­£çš„é—®é¢˜åœ¨äºå¤§å¤šæ•°äººæ ¹æœ¬æ²¡æœ‰å¯¹åº”çš„ç®—åŠ›èµ„æºå»å¯¹å¦‚æ­¤æµ·é‡çš„æ•°æ®è¿›è¡Œè®¡ç®—ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b2fad3dd5654fcead170a2ee554a516~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yaw6Iy26Iy2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803570&amp;x-signature=x87vbxAWDuklM4BHV%2BxZvFv8T1E%3D" alt="" loading="lazy"/></p>
<p>æˆ‘çš„ä¸ªäººç”µè„‘ä¹Ÿæ²¡æœ‰è¿™ä¹ˆå¤§çš„ç®—åŠ›ï¼Œè™½ç„¶å¯ä»¥ä½¿ç”¨è¯¸å¦‚ colab ä¹‹ç±»çš„å¹³å°äº‰å–ä¸€äº›å…è´¹è®¡ç®—èµ„æºï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯å†³å®šå…ˆåœ¨æœ¬åœ°å…ˆè¡Œè·‘ä¸€ä¸ªæµç¨‹ï¼Œæ‰€ä»¥æˆ‘é€‰å–äº†ä¸€ä¸ªéå¸¸å°çš„å…³äºåŒ»ç–—æ–¹é¢çš„æ•°æ®å­é›†ï¼ˆshibing624/medicalï¼Œæºè‡ªHuggingfaceï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2Fdatasets%2Fshibing624%2Fmedical%25EF%25BC%2589%25EF%25BC%258C%25E8%25BF%2599%25E4%25B8%25AA%25E6%2595%25B0%25E6%258D%25AE%25E9%259B%2586%25E7%259A%2584%25E5%25A5%25BD%25E5%25A4%2584%25E5%259C%25A8%25E4%25BA%258E%25E6%2588%2591%25E4%25BB%25AC%25E4%25B8%258D%25E7%2594%25A8%25E5%258F%2582%25E4%25B8%258E%25E7%25B9%2581%25E7%2590%2590%25E7%259A%2584%25E6%2595%25B0%25E6%258D%25AE%25E9%2587%2587%25E9%259B%2586%25E5%2592%258C%25E6%25B8%2585%25E6%25B4%2597%25E9%2598%25B6%25E6%25AE%25B5%25EF%25BC%258C%25E9%2587%258C%25E9%259D%25A2%25E7%259A%2584%25E6%2595%25B0%25E6%258D%25AE%25E9%2583%25BD%25E5%25B7%25B2%25E7%25BB%258FJSON%25E6%25A0%25BC%25E5%25BC%258F%25E5%258C%2596%25E6%2588%2591%25E4%25BB%25AC%25E5%25BC%2580%25E7%25AE%25B1%25E5%258D%25B3%25E7%2594%25A8%25E3%2580%2582" target="_blank" title="https://huggingface.co/datasets/shibing624/medical%EF%BC%89%EF%BC%8C%E8%BF%99%E4%B8%AA%E6%95%B0%E6%8D%AE%E9%9B%86%E7%9A%84%E5%A5%BD%E5%A4%84%E5%9C%A8%E4%BA%8E%E6%88%91%E4%BB%AC%E4%B8%8D%E7%94%A8%E5%8F%82%E4%B8%8E%E7%B9%81%E7%90%90%E7%9A%84%E6%95%B0%E6%8D%AE%E9%87%87%E9%9B%86%E5%92%8C%E6%B8%85%E6%B4%97%E9%98%B6%E6%AE%B5%EF%BC%8C%E9%87%8C%E9%9D%A2%E7%9A%84%E6%95%B0%E6%8D%AE%E9%83%BD%E5%B7%B2%E7%BB%8FJSON%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%88%91%E4%BB%AC%E5%BC%80%E7%AE%B1%E5%8D%B3%E7%94%A8%E3%80%82" ref="nofollow noopener noreferrer">huggingface.co/datasets/shâ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/023fc260ff9d49408586c0c7eb977c86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yaw6Iy26Iy2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803570&amp;x-signature=fXCSLvRmuXgqlDea%2BIkxuWOKOoY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">é¢„è®­ç»ƒ [ pre-training ]</h3>
<p>é¢„è®­ç»ƒæ˜¯æŒ‡åœ¨å¤§è§„æ¨¡çš„æµ·é‡æ•°æ®ï¼ˆé€šå¸¸æ˜¯æœªæ ‡æ³¨çš„äº’è”ç½‘æ–‡æœ¬ï¼‰ä¸Šï¼Œä½¿ç”¨<strong>è‡ªç›‘ç£å­¦ä¹  (Self-supervised Learning)</strong> çš„æ–¹å¼è®­ç»ƒæ¨¡å‹ï¼Œä½¿å…¶æŒæ¡é€šç”¨çš„çŸ¥è¯†å’Œè¯­è¨€è§„å¾‹ã€‚</p>
<p>é¢„è®­ç»ƒæ˜¯å¤§æ¨¡å‹ä¸‡ä¸ˆé«˜æ¥¼å¹³åœ°èµ·çš„ç¬¬ä¸€æ­¥ï¼ŒåŒæ—¶é¢„è®­ç»ƒä¹Ÿæ˜¯ LLM è®­ç»ƒä¸­æœ€è€—é’±ã€è€—åŠ›çš„é˜¶æ®µï¼Œå› ä¸ºè¿™ä¸€é˜¶æ®µçš„æ•°æ®é›†å’Œæ‰€éœ€ç®—åŠ›éƒ½æ˜¯æœ€å¤§çš„ï¼šæ¯”å¦‚ GPT-4 çš„é¢„è®­ç»ƒå°±éœ€è¦æ•°ä¸‡é¢— GPU è¿ç»­è·‘æ•°æœˆï¼Œæ¶ˆè€—çš„ç”µè´¹å’Œç®—åŠ›æˆæœ¬é«˜è¾¾æ•°åƒä¸‡ç¾å…ƒã€‚</p>
<p>é¢„è®­ç»ƒå¹¶ä¸è¦æ±‚æ¨¡å‹å®Œæˆç‰¹å®šä»»åŠ¡å¦‚ç¿»è¯‘æˆ–åˆ†ç±»ï¼Œå®ƒçš„ç›®æ ‡åªæœ‰ä¸€ä¸ªï¼š<strong>çŒœä¸‹ä¸€ä¸ªå­—</strong>ï¼Œæ¯”å¦‚</p>
<ul>
<li>
<p><strong>è¾“å…¥ï¼š</strong> â€œåºŠå‰æ˜æœˆå…‰ï¼Œâ€</p>
</li>
<li>
<p><strong>ç›®æ ‡ï¼š</strong> æ¨¡å‹é¢„æµ‹ä¸‹ä¸€ä¸ªå­—æ˜¯â€œç–‘â€ã€‚</p>
</li>
</ul>
<p>ä¸ºäº†çŒœå¾—å‡†ï¼Œæ¨¡å‹å¿…é¡»å­¦ä¼šè¯­æ³•ã€é€»è¾‘ã€äº‹å®çŸ¥è¯†ç”šè‡³æ˜¯å¸¸è¯†ï¼Œæ‰€ä»¥è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆé¢„è®­ç»ƒé˜¶æ®µéœ€è¦å¤§é‡çš„æ•°æ®ã€‚</p>
<p>è¿™äº›æ•°æ®ä¼šç»è¿‡åˆ†è¯ï¼Œå˜æˆä¸€ä¸ªä¸ªæœ‰è¯­ä¹‰çš„ tokenï¼Œç»è¿‡æ¨¡å‹çš„è®­ç»ƒåï¼Œè¿™äº›è¯è¡¨ä¸­çš„ token å°±ä¼šåœ¨ transformer åæ˜ å°„æˆå†…éƒ¨å‘é‡ç©ºé—´çš„é«˜ç»´æ•°ç»„ï¼Œå½“ç”¨æˆ·è¾“å…¥åï¼Œè¿™äº›è¾“å…¥ä¹Ÿä¼šç»è¿‡å†…éƒ¨ transformer çš„å„ç§å±‚å¾—åˆ°ä¸€ä¸ªåŒç»´åº¦çš„æ•°ç»„å‘é‡ï¼Œè€Œæ¨¡å‹çš„ä¸‹ä¸€æ­¥å°±æ˜¯åœ¨é¢„è®­ç»ƒå¥½åçš„å‘é‡ç©ºé—´å†…å¯»æ‰¾ä¸è¾“å…¥å‘é‡ç›¸ä¼¼åº¦ã€Œæœ€é€‚é…ã€çš„å‘é‡ï¼Œæ³¨æ„è¿™é‡Œä¸ä¸€å®šæ˜¯ã€Œæœ€æ¥è¿‘ã€è€Œæ˜¯ã€Œæœ€é€‚é…ã€ï¼Œå› ä¸ºè¿™å–å†³äºæˆ‘ä»¬çš„æ¨¡å‹è¿è¡Œå‚æ•°å’Œå†…éƒ¨ä½¿ç”¨è¿™äº›å‚æ•°çš„ç®—æ³•ã€‚é‚£ä¹ˆæ‰¾åˆ°ã€Œæœ€é€‚é…ã€çš„å‘é‡åï¼Œæˆ‘ä»¬é€šè¿‡é€†å‘çš„åŠæ³•å³ unembedding æ¥è§£ç å‡ºæ‰¾å‡ºçš„è¿™ä¸ªå‘é‡æ˜¯å¯¹åº”ç€ä»€ä¹ˆå­—ä½œä¸ºè¾“å‡ºï¼Œç„¶åå¾ªç¯å¾€å¤ä¸€ç›´ã€Œæ¥é¾™ã€ã€‚</p>
<h3 data-id="heading-5">åˆ†è¯ [ tokenization ]</h3>
<p>åœ¨æˆ‘ä»¬è®­ç»ƒè¯­è¨€æ¨¡å‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ•°æ®è¿›è¡Œåˆ†è¯ï¼Œtokenization æ˜¯å°†æˆ‘ä»¬çš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¯åšæ•°å€¼è¿ç®—çš„æ•°å­—çš„è¿‡ç¨‹ï¼šæˆ‘ä»¬çš„åŸå§‹æ•°æ®é›†ä»…ä»…æ˜¯å¤§æ®µå¤§æ®µæ–‡å­—çš„é›†åˆï¼Œç®—æ³•æœ¬èº«å¹¶ä¸çŸ¥é“è¦å¦‚ä½•å»æ‘„å…¥å¹¶ä¸”è®­ç»ƒè‡ªå·±ç†è§£è¿™äº›é•¿ç¯‡å¤§è®ºï¼Œæˆ‘ä»¬å¿…é¡»å¯¹å…¶è¿›è¡Œç¦»æ•£åŒ–ã€æ•°å­¦åŒ–ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬ä¸å±•å¼€åˆ†è¯çš„é€»è¾‘å’Œå„ç§ç®—æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•ç†è§£ä¸ºåˆ†è¯ç›¸å½“äºæ˜¯å°†æˆ‘ä»¬æ‰€æœ‰çš„è¯­æ–™åº“è¿›è¡Œäº†è¯­ä¹‰åˆ‡å‰²ï¼Œæ¯”å¦‚å°†ã€Œæˆ‘çˆ±æœˆäº®ã€è¿™å¥è¯åˆ†ä¸ºã€Œæˆ‘ã€ã€ã€Œçˆ±ã€ã€ã€Œæœˆäº®ã€è¿™ 3 ä¸ªtokensï¼Œè™½ç„¶ä¸åŒçš„ç®—æ³•ä¼šå¯¹åŒæ ·çš„æ–‡å­—è¿›è¡Œä¸åŒç±»å‹çš„åˆ†è¯ï¼Œä½†æ˜¯æˆ‘ä»¬ç›®å‰åªéœ€è¦çŸ¥é“ï¼Œç»è¿‡åˆ†è¯ä»¥åï¼Œæ‰€æœ‰çš„è¯­æ–™åº“å°±ä¼šè¢«åˆ‡å‰²ä¸ºéå¸¸å¤§é‡çš„ tokensï¼Œå…¶ä¸­æ¯ä¸ª token éƒ½ä¼šå¯¹åº”ç€è‡ªå·±çš„ tokenidï¼Œæ¯ä¸ª tokenid ä¸‹éƒ½ä¼šæœ‰ä¸€ä¸ªä»£è¡¨ç€è¿™ä¸ª token çš„å‘é‡ï¼Œå‘é‡çš„åˆå§‹å€¼å¯ä»¥æ˜¯éšæœºçš„ï¼Œå‘é‡çš„ç»´åº¦æ˜¯æˆ‘ä»¬è‡ªå·±å®šçš„ï¼Œä¹‹åé¢„è®­ç»ƒçš„å¾ˆå¤§ä¸€éƒ¨åˆ†å·¥ä½œï¼Œå°±æ˜¯å¯¹äºè¿™äº›å‘é‡ä¸­çš„æ¯ä¸€ä¸ªå‚æ•°è¿›è¡Œå¾®è°ƒã€‚</p>
<p>æˆ‘åœ¨è¿™é‡Œä½¿ç”¨äº†åŸºäº BPE ç®—æ³•çš„ tokenizer å³ ByteLevelBPETokenizerï¼Œç”¨å®ƒæ¥å¯¹æˆ‘ä»¬ 630MB (å†…å« 370000 æ¡åŒ»ç–—çŸ¥è¯†)çš„é¢„è®­ç»ƒæ•°æ®é›†è¿›è¡Œåˆ†è¯ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75a02a502d8d46b986940c5494d0299c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yaw6Iy26Iy2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803570&amp;x-signature=%2FHVlbFk9v7SlcDVNjaAAwc%2Bhaik%3D" alt="" loading="lazy"/></p>
<p>ç»è¿‡10minåï¼Œæˆ‘ä»¬çš„åˆ†è¯ç»“æœå·²ç»å®Œæˆï¼ŒåŒæ—¶æˆ‘ä»¬å†™ä¸€ä¸ªè„šæœ¬ç®€å•æµ‹è¯•ä¸€ä¸‹æˆ‘ä»¬çš„åˆ†è¯æˆæœï¼šä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œå¯¹äºæˆ‘æ„é€ çš„æ–‡æœ¬ã€Œæ‚£è€…è¯Šæ–­ä¸ºå¿ƒè‚Œæ¢—å¡ï¼Œå»ºè®®æœç”¨é˜¿å¸åŒ¹æ—ã€‚ã€â€”â€” è¿™å¥è¯åŸºäºæˆ‘ä»¬çš„åˆ†è¯æˆæœè¢«æ‹†åˆ†æˆäº† 8 ä¸ª tokensï¼Œå°†è¿™äº› tokens åš decoded è¿˜åŸæ²¡æœ‰ä¸¢å¤±ä»»ä½•ä¿¡æ¯ï¼Œå°†è¿™äº› tokens é€ä¸ªæ‰“å°å‡ºæ¥å¯ä»¥å‘ç°è¿™äº› token éƒ½æ˜¯æœ‰è¯­ä¹‰æ€§çš„ï¼Œæ¯”å¦‚ã€Œé˜¿å¸åŒ¹æ—ã€è¢«è§†ä¸ºäº†ä¸€ä¸ª token è€Œä¸æ˜¯è§†ä¸ºã€Œé˜¿ã€ã€ã€Œå¸ã€ã€ã€ŒåŒ¹ã€ã€ã€Œæ—ã€å››ä¸ª tokenã€‚</p>
<h3 data-id="heading-6">å¼€å§‹è®­ç»ƒ</h3>
<p>æˆ‘ä»¬è°ƒç”¨ transformers åº“ï¼Œè®¾ç½®å¥½åˆé€‚çš„å‚æ•°åï¼Œå³å¼€å§‹è¿›å…¥æ¼«é•¿çš„é¢„è®­ç»ƒè¿‡ç¨‹ã€‚</p>
<p>ç”±äºè®­ç»ƒè¿‡ç¨‹æ¶‰åŠåˆ°éå¸¸å¤šçš„ä¸“ä¸šå’Œæ•°å­¦çŸ¥è¯†ï¼Œæˆ‘æ„Ÿè§‰æˆ‘ä¹Ÿè®²ä¸å¥½ï¼Œæ‰€ä»¥å¤§å®¶æƒ³è¦äº†è§£è¿˜æ˜¯ä¸“é—¨å»æœç´¢ç›¸å…³èµ„æ–™æ¯”è¾ƒå¥½ï¼Œæˆ–è€…å¯ä»¥è¿›è¿™ä¸ªç½‘ç«™çœ‹ä¸€çœ‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fbbycroft.net%2Fllm%25EF%25BC%2588%25E8%25BF%2599%25E6%2598%25AF%25E4%25B8%2580%25E4%25B8%25AA%25E7%2594%25A8" target="_blank" title="https://bbycroft.net/llm%EF%BC%88%E8%BF%99%E6%98%AF%E4%B8%80%E4%B8%AA%E7%94%A8" ref="nofollow noopener noreferrer">bbycroft.net/llmï¼ˆè¿™æ˜¯ä¸€ä¸ªç”¨</a> three.js åˆ¶ä½œçš„è®²è§£ LLM å†…éƒ¨çš„åŠ¨ç”»æµï¼Œå¯¹äºå½¢æˆæ¦‚å¿µè¿˜æ˜¯æŒºæœ‰ç”¨çš„ï¼‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b03c9a8ff778494c8ba599d8fd8f5732~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yaw6Iy26Iy2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803570&amp;x-signature=b9V57FemcODYTtSAsqt9qAo2S6s%3D" alt="" loading="lazy"/></p>
<p>å¤§æ¦‚ 8.4M çš„å‚æ•°é‡ï¼Œæˆ‘ä»ä¸‹åˆ3ç‚¹å¼€å§‹è®­ç»ƒï¼Œåˆ°åŠå¤œè¿‘2ç‚¹æ‰è®­ç»ƒå®Œã€‚</p>
<p>åœ¨è¿™ 10h+ çš„è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œæ¨¡å‹éœ€è¦è¿›è¡Œ 92474 æ­¥æ‰èƒ½å°†è¿™æ¬¡è®­ç»ƒä»»åŠ¡è·‘å®Œï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9f7c48e67ed43118882527281f1b1b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yaw6Iy26Iy2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803570&amp;x-signature=YrmYa1B60Lsvv3XxoaJMLWDBxYE%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥ä»ç›‘è§†å™¨é‡Œçœ‹åˆ° Python çš„æ‰§è¡Œå·²ç»å æ®äº†å¤§éƒ¨åˆ† CPU è¿ç®—ï¼ŒåŒæ—¶ä¸ºäº†ä¸åŠŸäºä¸€ç¯‘ï¼Œæ‰€ä»¥æ¯éš” 500 æ­¥æˆ‘éƒ½ä¼šè®©æ¨¡å‹ä¿ç•™ä¸€æ¬¡ checkpoint ä½œä¸ºå¿«ç…§å­˜æ¡£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77702a2a9f0144789442722c10a07cfd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yaw6Iy26Iy2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803570&amp;x-signature=AWTen4j2FSSdIgdIeU%2FD0b2gd%2FY%3D" alt="" loading="lazy"/></p>
<p>å¦ä¸€æ–¹é¢ï¼Œæ¯éš”50æ­¥æˆ‘å°±ä¼šè®©æ¨¡å‹ä»¥ã€Œæˆ‘ä»Šå¤©æœ‰ç‚¹å¤´ç–¼ï¼Œæˆ‘éœ€è¦ã€å¼€å¤´è®©å®ƒè¿›è¡Œç»­å†™ï¼Œä»¥ä¾¿èƒ½å¤Ÿå®æ—¶çœ‹åˆ°è®­ç»ƒæˆæœï¼š</p>
<blockquote>
<p>åˆšå¼€å§‹è®­ç»ƒæ—¶ï¼Œæ¨¡å‹å‡ ä¹æ— æ³•åå‡ºå®Œæ•´çš„å¥å­ï¼Œloss å€¼ä¸º8+ï¼›</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c08f367d9b147e89977e9c231f1b819~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yaw6Iy26Iy2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803570&amp;x-signature=bdX4yyR7Nf4cI3ENVvp9E2%2BawcQ%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c63ef62fe4724c3d8901461c63d9edfe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yaw6Iy26Iy2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803570&amp;x-signature=ffM6aBs7NMe9KBjSKpulOJRT0Bk%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/925feaaf51b54ed19d77cb3c2febda82~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yaw6Iy26Iy2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803570&amp;x-signature=zfHwg9vJTUmv%2FtspQNMn7YPWIBA%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>æ¨¡å‹è·‘åˆ°2ä¸‡æ­¥æ—¶ï¼Œè¾“å‡ºä»ç ´ç¢ç»“æ„æ¥è¿‘æœ‰ä¸€å®šé€»è¾‘ï¼ŒLossé™åˆ°äº† 5+ ï¼›</p>
</blockquote>
<blockquote>
<p>æ¨¡å‹ 9ä¸‡+ è½®å…¨éƒ¨è·‘å®Œæ—¶å¹³å‡ Loss åœ¨4.7ï¼ˆä¸€èˆ¬æ¥è¯´ï¼ŒLoss åœ¨2-4æ˜¯æ¯”è¾ƒä¼˜ç§€ï¼Œå¯¹äºæˆ‘ä»¬è®­ç»ƒå°æ¨¡å‹æ¥è¯´ Loss åœ¨4-6ä¹Ÿç®—å¤Ÿç”¨å•¦ï¼‰</p>
</blockquote>
<h3 data-id="heading-7">ç›‘ç£å¾®è°ƒ [ SFT ]</h3>
<p>ç»è¿‡äº†åä¸ªåŠå°æ—¶çš„é›†ä¸­è®­ç»ƒï¼Œæˆ‘ä»¬ç»ˆäºå®Œæˆäº†è¿™ä¸ª9ä¸‡æ­¥çš„è®­ç»ƒè¿‡ç¨‹ğŸ‰ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬æ‹¥æœ‰äº†ä¸€ä¸ªåŸºç¡€æ¨¡å‹ï¼ˆBase/Foundation Modelï¼‰ï¼Œä½†æ˜¯ç›®å‰çš„è¿™ä¸ªæ¨¡å‹åªä¼šè¿›è¡Œæ•°ç†ç»Ÿè®¡æ„ä¹‰çš„è¯è¯­æ¥é¾™ï¼Œè™½ç„¶æˆ‘ä»¬å¯ä»¥è°ƒæ•´å„ç§å‚æ•°è®©å®ƒæ¯æ¬¡çš„è¾“å‡ºç»“æœä¸ä¸€æ ·ï¼Œä½†æ˜¯å®ƒç›®å‰è¿˜å­¦ä¸ä¼šé—®ç­”è¿™å¥—é€»è¾‘ï¼Œè€Œä¸”åªèƒ½åŸºäºåŒ»ç–—æ•°æ®å›ç­”ï¼Œè®©æˆ‘ä»¬å†™ä¸ªè„šæœ¬æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f2b199c21d6433e8330847428e685fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yaw6Iy26Iy2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803570&amp;x-signature=CPYcaPL0NFdnLoP9ZxfjKnG02X4%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥çœ‹å‡ºå…¶å®å®ƒå·²ç»æœ‰äº†æ¯”è¾ƒå¼ºçš„é€»è¾‘æ€§ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦é€šè¿‡ç›‘ç£å¾®è°ƒï¼ˆSFTï¼‰æ¥è®©è¿™ä¸ªâ€œGPTâ€å˜æˆâ€œChat GPTâ€ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥å¤§è‡´çœ‹ä¸€çœ‹ç”¨æ¥åš SFT çš„æ•°æ®é›†æ ·ä¾‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span><span class="hljs-attr">"instruction"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¯·æè¿°å£è…”é»è†œå¸æ”¶çš„å†å²"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"input"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"output"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1847å¹´ï¼Œé˜¿æ–¯åå°¼æ¬§Â·ç´¢å¸ƒé›·ç½—ç­‰é¦–å…ˆæŠ¥å¯¼äº†ç¡é…¸ç”˜æ²¹å¯ä»¥ç»å£è…”é»è†œå¸æ”¶è¿›å…¥äººä½“è¡€æ¶²å¾ªç¯ç³»ç»Ÿã€‚1879å¹´ï¼Œç¡é…¸ç”˜æ²¹èˆŒä¸‹è¯æˆåŠŸåœ°ç”¨äºä¸´åºŠï¼Œä¹‹åé™†ç»­å‡ºç°è®¸å¤šè¯ç‰©çš„å£è…”é»è†œå¸æ”¶ç›¸å…³æŠ¥å¯¼ã€‚"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"instruction"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æˆ‘å¦ˆ70å²ï¼ŒCTéƒ¨ä½L3â€”S1æ¤é—´ç›˜ï¼Œç»“æœLï¼Œæ— "</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"input"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"output"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è…°æ¤é—´ç›˜çªå‡ºç—‡å¼•èµ·çš„ç—‡çŠ¶å°±æ˜¯æœ‰é«“äº¥è„±å‡ºåˆºæ¿€ç¥ç»å¼•èµ·çš„ç—›åºï¼Œä¸‹è‚¢åå°„æ€§çš„ç—›åºï¼Œæ²»ç–—çš„æ–¹æ³•å°±æ˜¯éœ€è¦æ³¨æ„ä¼‘æ¯ç‰µå¼•ï¼ŒæŒ‰æ‘©é’ˆç¸çš„æ–¹æ³•æ²»ç–—ï¼Œå£æœèŠ¬å¿…å¾—ï¼Œè…°æ¯ç—›èƒ¶å›Šã€‚è…°è…¿ç—›ä¸¸æ²»ç–—ï¼Œæ— æ•ˆæ—¶å°„é¢‘å’Œé’ˆåˆ€çš„æ–¹æ³•æ²»ç–—ä¸€å®šè¦è‡ªå·±é”»ç‚¼çš„ï¼Œå¢å¼ºè‚Œè‚‰çš„éŸ§æ€§"</span><span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™ä»½æ•°æ®æ˜¯ç¬¦åˆ Alpaca æ ¼å¼çš„æ•°æ®é›†ï¼Œè¿™ä¹Ÿæ˜¯ç›®å‰å¼€æºç¤¾åŒºæœ€é€šç”¨çš„ SFT æ•°æ®æ ‡å‡†ã€‚</p>
<p>å…¶ä¸­**<code>instruction</code>** <strong>(æŒ‡ä»¤)<strong>æ˜¯ç”¨æˆ·ç»™æ¨¡å‹ä¸‹è¾¾çš„</strong>ä»»åŠ¡å‘½ä»¤ï¼Œ****<code>input</code></strong> **(ä¸Šä¸‹æ–‡/è¾“å…¥)ï¼š**æ˜¯æ‰§è¡ŒæŒ‡ä»¤æ—¶æ‰€éœ€è¦çš„é¢å¤–èƒŒæ™¯ä¿¡æ¯ï¼Œè¿™ä¸ªæ•°æ®é›†æ²¡é‚£ä¹ˆå¤æ‚æ‰€ä»¥ input åŸºæœ¬ä¸ºç©ºï¼Œè€Œ output å°±æ˜¯æ¨¡å‹éœ€è¦å­¦ä¹ çš„è¾“å‡ºã€‚</p>
<p>è¿™ä¸€ä»½æ•°æ®é›†æ˜æ˜¾æœ‰æ›´å¼ºçƒˆçš„æ ¼å¼åŒ–ï¼Œå®ƒèƒ½å¤Ÿæ•™ä¼šæ¨¡å‹æ€æ ·å»åšæ›´ç¬¦åˆé—®ç­”ç»“æ„çš„è¾“å‡ºè€Œä¸æ˜¯å»åšå­—è¯æ¥é¾™ã€‚</p>
<p>åŒæ—¶è¿™ä¸€éƒ¨åˆ†çš„æ•°æ®é›†ä¸ç”¨å¤ªå¤šï¼Œæ­£å¦‚å…¶åç§°ã€Œå¾®è°ƒã€ä¸€æ ·ï¼Œæˆ‘ä»¬åªæ˜¯æƒ³è¦å»æ”¹å˜æ¨¡å‹çš„ä¸€äº›è¾“å‡ºæ¨¡å¼å’Œè¯­æ°”ï¼Œå¹¶ä¸æƒ³åŠ¨åˆ°ä¹‹å‰å·²ç»è®­ç»ƒå¥½çš„çŸ¥è¯†çš„å…³è”ï¼Œæ‰€ä»¥ä¸éœ€è¦è¿‡å¤šçš„æ•°æ®ï¼Œå¦åˆ™æ¨¡å‹å¯èƒ½ä¼šäº§ç”Ÿç¾éš¾æ€§é—å¿˜ã€‚</p>
<p>æˆ‘ä»è¿™ä¸ª SFT æ•°æ®é›†ä¸­éšæœºæŠ½å–äº†5000æ¡æ•°æ®åŸºäºä¸Šé¢é‚£ä¸ªåŸºç¡€æ¨¡å‹åš SFT è®­ç»ƒï¼š</p>
<blockquote>
<p>SFTå®Œæˆæˆªå›¾ï¼š</p>
<p>ä»æ—¥å¿—çœ‹ï¼Œæœ€ç»ˆ <strong>train_loss å®šæ ¼åœ¨ 4.517</strong>ã€‚è™½ç„¶æ•°å­—ä¸Šçœ‹èµ·æ¥å’Œé¢„è®­ç»ƒå·®ä¸å¤šï¼Œä½†å› ä¸º SFT æ”¹å˜äº†æ¨¡å‹çš„è¾“å‡ºåˆ†å¸ƒï¼Œæ‰€ä»¥å®ƒç°åœ¨çš„å¯¹è¯é€»è¾‘ä¼šæ¯”ä¹‹å‰æ›´å¼ºã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf50f6a42e884022bd109129fd8775d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yaw6Iy26Iy2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803570&amp;x-signature=taWo3kc%2BUKKvl7IWqqkimURbOcM%3D" alt="" loading="lazy"/></p>
<p>ç°åœ¨è®©æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹è¿™ä¸ªç»è¿‡äº† SFT çš„å¯ä»¥è¿›è¡Œ Chat çš„æ¨¡å‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/548a231b7069425bb93013d00b395db2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yaw6Iy26Iy2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803570&amp;x-signature=XhxaORPyPB2FXDZYmZMMNQ15Ugw%3D" alt="" loading="lazy"/></p>
<p>ç°åœ¨è¿™ä¸ªç»è¿‡ SFT çš„æ¨¡å‹çš„ç¡®è¶…è¶Šäº†å­—è¯æ¥é¾™çš„é—¨æ§›ï¼Œä½†æ˜¯å¯¹äºã€Œæˆ‘æƒ³çŸ¥é“ä»€ä¹ˆæ˜¯å£è…”æºƒç–¡,ä½ å¯ä»¥å‘Šè¯‰æˆ‘å—ã€è¿™åŒä¸€è¾“å…¥æ¨¡å‹çš„ä¸åŒè¡¨ç°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹å‡ºåœ¨SFTåçš„ç­”æ¡ˆæ²¡æœ‰SFTå‰çš„å¥½ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7678726a1e834c0183f296514c69740f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yaw6Iy26Iy2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803570&amp;x-signature=2%2B74I9b1KqMM8LJEiJ3B9FPjsxo%3D" alt="" loading="lazy"/></p>
<p>è¿™é‡Œçš„åŸå› å¤§æ¦‚ç‡å°±æ˜¯å‡ºç°äº†æˆ‘ä»¬ä¸Šé¢æåˆ°çš„ã€Œé—å¿˜ã€ï¼Œæˆ–è€…è¯´ç¾éš¾æ€§é—å¿˜ (Catastrophic Forgetting)ï¼Œè¿™é‡Œçš„æ ¸å¿ƒåŸå› æ˜¯å› ä¸ºæˆ‘çš„æ¨¡å‹å¤ªå°äº†ï¼šä¸ºäº†è¿åˆ SFT çš„ã€Œå¯¹è¯æ ¼å¼ã€ï¼Œè€Œå¼ºåˆ¶å‹åˆ¶äº†é¢„è®­ç»ƒæ—¶å­¦åˆ°çš„ã€Œç™¾ç§‘çŸ¥è¯†ã€ã€‚</p>
<p>ç”±äºå‚æ•°é‡å¤ªå°ï¼ˆ8Mï¼‰ï¼Œæ¨¡å‹å¯èƒ½æ— æ³•åŒæ—¶å…¼é¡¾ã€Œæ·±åˆ»çš„çŸ¥è¯†ã€å’Œã€Œç¤¼è²Œçš„æ ¼å¼ã€ï¼Œè€Œæœ€ç»ˆé€‰æ‹©äº†æ ¼å¼ï¼Œä¸¢æ‰äº†é€»è¾‘ï¼šè¿™ç§ã€Œè¿‡æ‹Ÿåˆåˆ°æ¨¡ç‰ˆã€çš„æ“ä½œæŒ¤å äº†åŸæœ‰çŸ¥è¯†çš„å­˜å‚¨ç©ºé—´ï¼Œå¯¼è‡´å®ƒåœ¨å›ç­”æ—¶æ˜¾å¾—éå¸¸å‘†æ»ï¼Œç”šè‡³ä¸ç®¡ä¹‹å‰å­¦åˆ°çš„é€»è¾‘è€Œæ‹¼å‘½è¾“å‡ºç¤¼è²Œçš„ã€Œä½ å¥½ã€ã€‚</p>
<p>é™¤äº†é€šè¿‡æ¯”è¾ƒéš¾å®ç°çš„æé«˜å‚æ•°é‡ä»¥å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä¸€äº›æªæ–½æ¥ä¿®æ­£ï¼Œæ¯”å¦‚</p>
<ul>
<li>
<p><strong>æ··åˆè®­ç»ƒ (Mixed Training)</strong>ï¼šåœ¨æˆ‘ä»¬ SFT çš„ 5000 æ¡é—®ç­”é‡Œï¼Œæºå…¥ 1000 æ¡é¢„è®­ç»ƒæ—¶çš„çº¯ç™¾ç§‘æ–‡æœ¬ã€‚è¿™è¢«ç§°ä¸ºã€Œé‡æ¼”ç­–ç•¥ã€ï¼ˆReplayï¼‰ï¼Œèƒ½æœ‰æ•ˆç¼“è§£é—å¿˜</p>
</li>
<li>
<p><strong>æ›´æ¸©å’Œçš„å¾®è°ƒ</strong>ï¼šè¿›ä¸€æ­¥é™ä½å­¦ä¹ ç‡ï¼ˆæ¯”å¦‚åˆ° <code>1e-5</code>ï¼‰ï¼Œå¹¶å‡å°‘ Epochï¼ˆè½®æ¬¡ï¼‰æ•°ã€‚</p>
</li>
</ul>
<p>æˆ‘è¿™é‡Œå°±ä¸å»åšæ›´å¤šçš„å¤æ‚è°ƒæ•´äº†ï¼ŒåŒæ—¶ï¼Œå¯¹äºæˆ‘çš„è¿™ä¸ªcaseï¼Œç›´æ¥ä½¿ç”¨æ›´ç²¾å‡†ä¸€äº›çš„Promptæ˜¯ä¸ªæ›´è¿…é€Ÿçš„æ·å¾„ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/533c503e7e0d4867a0ae375a6b4ea77d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yaw6Iy26Iy2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803570&amp;x-signature=7WvsPgYGWAaHqKGqxjotCmLZLnU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">ç›´æ¥åå¥½ä¼˜åŒ– [ DPO ]</h3>
<p>å½“æ¨¡å‹åšå®Œå¾®è°ƒä»¥åï¼Œæ¯”è¾ƒä¼ ç»Ÿå’Œåœ¨å¤æ‚åœºæ™¯ä¸‹æ›´ä¸ºä¼˜è¶Šçš„æ–¹æ³•å…¶å®æ˜¯ RLHFï¼ˆäººç±»åé¦ˆå¼ºåŒ–å­¦ä¹ ï¼‰ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼Œåœ¨æ¨¡å‹åšå®Œ SFT åï¼Œæ¨¡å‹çš„ç¡®èƒ½åƒä¸ªæ­£å¸¸å¯¹è¯è€…ä¸€æ ·ï¼Œå¯ä»¥å»å’Œæˆ‘ä»¬è¿›è¡Œä¸€æ¥ä¸€å›çš„å¯¹è¯äº†ï¼Œä½†æ˜¯è¿™è¿˜ä¸å¤Ÿï¼Œå› ä¸ºå¯¹äºå¾ˆå¤šå›ç­”ï¼Œæ­¤æ—¶çš„æ¨¡å‹è¿˜å¹¶ä¸èƒ½åšå‡ºä¸€ä¸ªç¬¦åˆå¤šæ•°äººé¢„æœŸçš„ã€Œå¥½å›ç­”ã€ï¼Œæ¯”å¦‚æ¶‰åŠåˆ°ä¸åŒåœ°åŒºçš„ä¹ ä¿—å®—æ•™æ³•å¾‹çš„é—®é¢˜ï¼Œåˆæ¯”å¦‚è¿™ä¸ªä¸–ç•Œä¸Šå¤§å¤šæ•°é—®é¢˜éƒ½æ˜¯å¼€æ”¾æ€§é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦è§£å†³è¿™äº›é—®é¢˜è®©æ¨¡å‹å˜å¾—æ›´åŠ ã€Œåƒäººã€ã€‚</p>
<p>æ¯”è¾ƒå…¸å‹çš„åšæ³• RLHF å¤§ä½“ä¸Šåˆ†ä¸º2æ­¥ï¼š</p>
<p>é¦–å…ˆæˆ‘ä»¬è¦å»ºç«‹ä¸€ä¸ª<strong>å¥–åŠ±æ¨¡å‹ (Reward Modeling)</strong>ï¼Œè™½ç„¶æœ€ç†æƒ³çš„æƒ…å†µæ˜¯æ ¹æ®ä¸€ä¸ªæŒ‡ä»¤è®©æ¨¡å‹ç”Ÿæˆä¸åŒçš„å›ç­”ç„¶åè®©äººç±»ç›´æ¥æ¥æ ‡è®°æ‰“åˆ†ï¼Œä½†æ˜¯æƒ³æƒ³ä¹ŸçŸ¥é“è¿™æ˜¯å¤šä¹ˆå¤§çš„å·¥ä½œé‡ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€äº›äººç±»æ‰“åˆ†çš„æ ·æœ¬ï¼Œå»è®­ç»ƒä¸€ä¸ªå¥–åŠ±æ¨¡å‹ï¼Œè¿™ä¸ªâ€œå°è£åˆ¤â€æ¨¡å‹ä¼šå­¦ä¹ äººç±»çš„å–œå¥½ï¼Œåœ¨åç»­çš„æµ·é‡å·¥ä½œä¸­å®ƒå°†æ¨¡æ‹Ÿæ›¿ä»£äººç±»ã€ç»™æˆ‘ä»¬çš„è®­ç»ƒæ¨¡å‹çš„å¤šä¸ªå›ç­”æ‰“åˆ†æˆ–è€…æ ‡è®°å¥½å·®è¯„ã€‚æˆ‘è®°å¾—ä¹‹å‰åœ¨ç”¨ ChatGPT æ—¶ï¼Œæœ‰äº›æ—¶å€™å®ƒèƒ½ç”Ÿæˆä¸¤ç§å›ç­”å¹¶ä¸”ä¼šè®©ä½ é€‰æ‹©æ›´å–œæ¬¢çš„é£æ ¼æˆ–é€»è¾‘ï¼Œå…¶å®å’Œä¸Šè¿°çš„æµç¨‹ç±»ä¼¼ã€‚</p>
<p>å…¶æ¬¡å°±æ˜¯è¿›è¡Œå¼ºåŒ–å­¦ä¹  (PPO, Proximal Policy Optimization)ï¼Œåœ¨è¿™ä¸ªç®—æ³•ä¸­ï¼Œæˆ‘ä»¬è®©æ¨¡å‹ä¸æ–­ç”Ÿæˆå›ç­”ï¼Œç„¶åè®©åˆšåˆšç”Ÿæˆçš„â€œå°è£åˆ¤â€å³<strong>å¥–åŠ±æ¨¡å‹</strong>æ‰“åˆ†ï¼Œæ¨¡å‹æ ¹æ®åˆ†æ•°è°ƒæ•´è‡ªå·±ï¼Œè¿™ç§ç®—æ³•å…¶å®ä¹Ÿæ˜¯â€œæ¦‚ç‡åå¥½ä¼˜åŒ–â€çš„ä¸€ç§å…·ä½“å®ç°ã€‚</p>
<p>ä½†æ˜¯æˆ‘æ‰“ç®—ç”¨ä¸€ç§æ›´<strong>ç°ä»£æ›´ç®€åŒ–çš„æ–¹å¼ï¼Œä¹Ÿå³ DPOï¼šç›´æ¥åå¥½ä¼˜åŒ– (DPO, Direct Preference Optimization)ã€‚</strong></p>
<p>å®ƒç›´æ¥è·³è¿‡äº†è®­ç»ƒâ€œè£åˆ¤â€çš„æ­¥éª¤ï¼Œç›´æ¥ç”¨ã€Œå¥½å›ç­” / åå›ç­”ã€çš„å¯¹æ¯”å¯¹æ¥è®­ç»ƒæ¨¡å‹ï¼Œç›¸å¯¹æ›´ç®€å•ã€é«˜æ•ˆã€çœæ˜¾å­˜ï¼›æ¯”å¦‚è¯´å¦‚æœç”¨ RLHF çš„æ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨å†…å­˜ä¸­éœ€è¦åŒæ—¶è¿è¡Œæ•°ä¸ªæ¨¡å‹ï¼šä¸€ä¸ªå¥–åŠ±æ¨¡å‹ã€è¢«è®­ç»ƒçš„æ¨¡å‹ã€åŸºå‡†æ¨¡å‹ã€è¿˜æœ‰ä¸€äº›å…¶ä»–é˜²æ­¢æ¨¡å‹è·‘åçš„é™„åŠ æ¨¡å‹ï¼Œé‚£æˆ‘çš„ç”µè„‘è‚¯å®šä¼šä¸å ªé‡è´Ÿï¼Œè€Œ <strong>DPO</strong> å…¶å®åªç”¨åŠ è½½ä¸¤ä¸ªæ¨¡å‹ï¼Œå³è¢«è®­ç»ƒçš„æ¨¡å‹å’ŒåŸºå‡†æ¨¡å‹ï¼Œè¿™ä¸ªåŸºå‡†æ¨¡å‹å…¶å®å°±æ˜¯ä¸Šé¢æˆ‘ä»¬ç»“æŸ SFT åçš„æ¨¡å‹ï¼Œå®ƒå­˜åœ¨çš„æ„ä¹‰æ˜¯ç”¨æ¥ä½œä¸ºæŸç§è·ç¦»è®¡ç®—çš„åŸºå‡†ï¼Œå¯ä»¥é˜²æ­¢æˆ‘ä»¬çš„æ¨¡å‹åœ¨åšå®Œ DPO åç¦»åŸæ¥å¤ªè¿œè€Œäº§ç”ŸåŠ£åŒ–ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥å¤§è‡´çœ‹ä¸€çœ‹ç”¨æ¥åš DPO çš„æ•°æ®é›†æ ·ä¾‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span><span class="hljs-attr">"question"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æœ¯åè‚Œç—›çš„é«˜å±å› ç´ æœ‰äº›ä»€ä¹ˆï¼Ÿ"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"response_chosen"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç¥ç€èƒ†ç¢±"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"response_rejected"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ‰‹æœ¯åç–¼ç—›æ˜¯å¸¸è§çš„å¹¶å‘ç—‡ä¹‹ä¸€ã€‚"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"question"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é«˜è¡€è„‚çš„å°±è¯Šç§‘å®¤æ˜¯ä»€ä¹ˆï¼Ÿ"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"response_chosen"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å†…ç§‘ï¼›å¿ƒå†…ç§‘"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"response_rejected"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é«˜è¡€å‹ã€ç³–å°¿ç—…ç­‰ç–¾ç—…æ‚£è€…åœ¨æ²»ç–—è¿‡ç¨‹ä¸­å¸¸å¸¸éœ€è¦è¿›è¡Œè¡€æ¶²æ£€æŸ¥ã€‚"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"question"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è€å¹´ç¯çŠ¶æ··åˆç—”çš„å¹¶å‘ç—‡æ˜¯ä»€ä¹ˆï¼Ÿ"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"response_chosen"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å† å¿ƒç—…ï¼›é«˜è¡€å‹ç—…ï¼›ç³–å°¿ç—…"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"response_rejected"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è€å¹´ç¯çŠ¶æ··åˆç—”çš„å¸¸è§å¹¶å‘ç—‡åŒ…æ‹¬ï¼šè‚›é—¨ç‹­çª„ã€ç›´è‚ è„±å‚å’Œå¤§ä¾¿ä¹ æƒ¯æ”¹å˜ã€‚"</span><span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™ä¸ªæ•°æ®ç»“æ„ä¸­åŒ…å«æˆå¯¹çš„æ•°æ®å³ï¼šåŒä¸€ä¸ªé—®é¢˜ï¼Œé™„åŠ ä¸€ä¸ªæ­£ç¡®çš„ã€æ›´å¥½ç­”æ¡ˆå’Œä¸€ä¸ªé”™è¯¯çš„ã€ä¸å¤ªå¥½çš„ä½†çœ‹èµ·æ¥å¾ˆåƒæ­£ç¡®çš„ç­”æ¡ˆï¼ŒæŠŠè¿™äº›æ•°æ®ä¸¢ç»™æ¨¡å‹å»è®­ç»ƒï¼Œæ¨¡å‹å¯ä»¥è¢«è®­ç»ƒå‡ºä½¿å›ç­”æ›´åæ›´å¥½çš„ç­”æ¡ˆçš„å½¢æ€ã€‚</p>
<p>DPO æµç¨‹å…¶å®ç‰¹åˆ«è€—æ—¶ï¼ŒDPO æ—¶æˆ‘çš„ç”µè„‘ä¼šæ‰¿å—æ¯” SFT é˜¶æ®µ<strong>é‡ 3-4 å€</strong>çš„è®¡ç®—å‹åŠ›</p>
<blockquote>
<p>DPO æ—¶ç”µè„‘å†…å­˜ä¸­å‘ç”Ÿçš„ä¸€äº›äº‹ï¼š</p>
<ul>
<li>
<p><strong>åŒæ¨¡å‹åŒæ­¥å‰å‘ä¼ æ’­</strong>ï¼šåœ¨ SFT æ—¶ï¼Œç”µè„‘åªéœ€è¦è·‘ä¸€ä¸ªæ¨¡å‹ã€‚è€Œåœ¨ DPO çš„æ¯ä¸€å•æ­¥é‡Œï¼Œç”µè„‘è¦åŒæ—¶è·‘ <strong>Policy Model</strong>ï¼ˆè®­ç»ƒæ¨¡å‹ï¼‰å’Œ <strong>Reference Model</strong>ï¼ˆå‚è€ƒæ¨¡å‹ï¼‰ã€‚<strong>è®¡ç®—ä¸¤æ¬¡ Logits</strong>ï¼š</p>
</li>
<li>
<p>æŠŠ <code>chosen</code>ï¼ˆå¥½å›ç­”ï¼‰å–‚ç»™ä¸¤ä¸ªæ¨¡å‹ï¼Œç®—æ¦‚ç‡å·®ã€‚</p>
</li>
<li>
<p>æŠŠ <code>rejected</code>ï¼ˆåå›ç­”ï¼‰å–‚ç»™ä¸¤ä¸ªæ¨¡å‹ï¼Œå†ç®—æ¦‚ç‡å·®ã€‚</p>
</li>
<li>
<p><strong>å¯¹æ•°å‡ ç‡æ¯”ï¼ˆLog Odds Ratioï¼‰è®¡ç®—</strong>ï¼šæ¨¡å‹éœ€è¦æ ¹æ®è¿™ä¸¤ç»„æ¦‚ç‡å·®ï¼Œè®¡ç®—å‡ºä¸€ä¸ªæŸå¤±å€¼ï¼ˆLossï¼‰ï¼Œè¿™ä¸ªè¿‡ç¨‹æ¶‰åŠå¤§é‡çš„æµ®ç‚¹è¿ç®—ã€‚</p>
</li>
</ul>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/334def77f7ca4d19a463220d2c45bc7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yaw6Iy26Iy2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803570&amp;x-signature=l%2FeJU0zQOroNdUxBk52dgPyuVww%3D" alt="" loading="lazy"/></p>
<p><strong>Rewards/accuracies (å¥–åŠ±å‡†ç¡®ç‡)åœ¨30%è½®æ¬¡æ—¶å°±å·²ç»</strong>é«˜è¾¾ **0.9375ï¼Œ**è¿™æ„å‘³ç€åœ¨å½“å‰çš„æ¯ä¸€ä¸ªå¤„ç†é‡‡æ ·é‡Œï¼Œæ¨¡å‹æœ‰ 93% çš„æŠŠæ¡è®¤ä¸º <code>chosen</code> ç¡®å®æ¯” <code>rejected</code> æ›´å¥½ã€‚</p>
<p>çœ‹ç›¸å…³çš„å‚æ•°æˆ‘è§‰å¾—æˆ‘ä»¬è¿™ä¸ªå°æ¨¡å‹å¯¹å¥½åçš„è®¤çŸ¥å·²ç»åŸºæœ¬å®šå‹ã€‚æ‰€ä»¥æˆ‘æœ€åå†³å®šä¸ç»§ç»­ç­‰å¾…ï¼Œè€Œæ˜¯æ‹¿æœ€æ–°çš„ç¬¬**<code>141æ­¥çš„checkpoint</code>**<strong>æ–‡ä»¶ä½œä¸º DPO çš„è®­ç»ƒç»“æœï¼Œä¹Ÿä½œä¸ºæˆ‘ä»¬è¿™ä¸ªã€ŒåŒ»ç–—å¤§æ¨¡å‹ã€çš„æœ€ç»ˆæˆæœã€‚</strong></p>
<h2 data-id="heading-9">ç»“æœåˆ†æ</h2>
<p>æˆ‘ä»¬é‡‡å–æœ€ç›´è§‚çš„æ–¹å¼æ¥åˆ†æç»“æœï¼šå†™ä¸€ä¸ªè„šæœ¬ï¼Œå®ƒç”¨äºåŠ è½½ä¸åŒæ­¥éª¤ç”Ÿæˆåçš„å…±è®¡3ä¸ªæ¨¡å‹ï¼šé¢„è®­ç»ƒç”Ÿæˆåçš„æ¨¡å‹ã€SFTåç”Ÿæˆçš„æ¨¡å‹ã€DPOåç”Ÿæˆçš„æ¨¡å‹ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨å‘½ä»¤è¡Œæ‰“ä¸€ä¸ªé—®é¢˜ï¼Œä¸‹é¢å°±ä¼šè‡ªåŠ¨å‡ºç°ä¸‰ä¸ªæ¨¡å‹ç”Ÿæˆçš„å›å¤ä»¥ä¾¿è¿›è¡Œæ¯”è¾ƒï¼š</p>
<blockquote>
<p><strong>æ„å¤–ä½†åˆç†çš„ç»“æœæ˜¯ï¼Œæˆ‘å‘ç°æ•ˆæœæœ€å¥½çš„åè€Œæ˜¯åªç»è¿‡é¢„è®­ç»ƒçš„ Base Modelã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9499392bca8a4c78a85c2bb13c28c259~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yaw6Iy26Iy2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803570&amp;x-signature=XivU8y51k99sluQY3%2BpNT4M2nK4%3D" alt="" loading="lazy"/><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7094958348fe4ca3bf1664a381f4f36d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yaw6Iy26Iy2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803570&amp;x-signature=IfW4DXwKrnQ6gOHeSaWt333etyA%3D" alt="" loading="lazy"/></p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥ç®€å•åˆ†æä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆ SFT å’Œ DPO åè€Œå˜å·®äº†ï¼Ÿå…¶å®è¿˜æ˜¯ä¸Šé¢æåˆ°è¿‡çš„**ã€Œç¾éš¾æ€§é—å¿˜ã€**ã€‚</p>
<p>åœ¨æˆªå›¾é‡Œï¼Œå¯ä»¥æ¸…æ™°çœ‹åˆ°å¾®è°ƒå¸¦æ¥çš„å‰¯ä½œç”¨ï¼š</p>
<ul>
<li>
<p><strong>SFTï¼ˆæŒ‡ä»¤å¾®è°ƒï¼‰</strong>ï¼šå†…å®¹å˜å¾—åƒæ˜¯åœ¨â€œèƒŒæ¸…å•â€ï¼ˆ1...2...3...ï¼‰ã€‚è¿™æ˜¯å› ä¸º SFT æ•°æ®é›†é‡Œæœ‰å¾ˆå¤šåˆ†æ¡åˆ—ç‚¹çš„æ ¼å¼ï¼Œæ¨¡å‹å­¦ä¼šäº†è¿™ç§â€œè¯´è¯çš„è°ƒè°ƒâ€ï¼Œå´åœ¨æ¨¡ä»¿è¿‡ç¨‹ä¸­æŠŠ Base æ¨¡å‹é‡Œæ·±å±‚çš„åŒ»å­¦çŸ¥è¯†ç»™æŒ¤æ‰äº†ã€‚</p>
</li>
<li>
<p><strong>DPOï¼ˆåå¥½å¯¹é½ï¼‰</strong>ï¼šç»“å°¾å‡ºç°äº†å¤§é¢ç§¯çš„â€œç¥æ‚¨æ—©æ—¥åº·å¤ï¼ç¥æ‚¨æ—©æ—¥åº·å¤ï¼â€ã€‚è¿™æ˜¯å¾ˆå…¸å‹çš„ã€Œè¿‡æ‹Ÿåˆã€æˆ–ã€Œæ¨¡å¼å´©å¡Œã€ï¼šå› ä¸º DPO å¼ºè¿«æ¨¡å‹å»è¿åˆæŸä¸ªç‰¹å®šçš„å®¡ç¾ï¼Œæ¯”å¦‚æ›´æœ‰ç¤¼è²Œæˆ–è€…æ›´åƒåŒ»ç”Ÿï¼Œç»“æœå®ƒé‚£ä»…æœ‰çš„ 8M ã€Œè„‘å­ã€æ‰¿è½½ä¸äº†è¿™ç§å¤æ‚çš„è½¬å˜ï¼Œå¯¼è‡´å®ƒæœ€ååªå­¦ä¼šäº†åå¤è¾“å‡ºè¿™ç§é«˜åˆ†é‡‘å¥ï¼Œå› ä¸ºè¿™ä¸ªå¥å­æ¨¡å¼åœ¨è®­ç»ƒé›†ä¸­è¢«è®¤ä¸ºæ˜¯æ›´è¢«äººç±»åå¥½çš„ã€‚</p>
</li>
</ul>
<p>æˆ‘ä»¬æ¨¡å‹çš„æ ¸å¿ƒçŸ›ç›¾å°±æ˜¯å…¶ 8M çš„å¤§è„‘å®¹é‡å®åœ¨æ˜¯æœ‰é™ï¼Œæˆ‘ä»¬ä¼šè¯´<strong>æ¨¡å‹è§„æ¨¡å†³å®šäº†å¾®è°ƒçš„ä¸Šé™</strong>ï¼Œä½ å¯ä»¥ç†è§£ä¸ºå› ä¸ºå‚æ•°å¤ªå°æ‰€ä»¥æˆ‘è®­ç»ƒçš„æ¨¡å‹åœ¨é¢„è®­ç»ƒé˜¶æ®µå¯èƒ½å°±å·²ç»æ²¡æœ‰ä»€ä¹ˆå†—ä½™äº†ï¼Œæ‰€ä»¥åç»­ç»§ç»­è®­ç»ƒæ—¶ï¼Œå½±å“çš„å‚æ•°ç»å¤§å¤šæ•°éƒ½æ˜¯ä¹‹å‰çš„å…³é”®å‚æ•°ï¼Œè™½ç„¶æˆ‘ä»¬å¯ä»¥è®¾ç½®å­¦ä¹ ç‡ã€æ¢¯åº¦ç­‰å‚æ•°æ¥ç¼“è§£è¿™ç§æ”¹å˜ï¼Œä½†æ˜¯å‚æ•°å˜äº†å°±æ˜¯å˜äº†ï¼Œå®ƒå¯èƒ½å°±æ˜¯ä¼šå¯¹ä¹‹å‰ä¹ å¾—çš„å‘é‡ç©ºé—´é‡Œå„ä¸ª token çš„ä½ç½®äº§ç”Ÿå½±å“ã€‚</p>
<p>æœ€åï¼Œæˆ‘ä»¬çš„æ¨¡å‹å…¶å®åœ¨é¢„è®­ç»ƒåæˆä¸ºåŸºç¡€æ¨¡å‹çš„è¡¨ç°ä¼šæ›´å¥½ï¼Œè¿™ä¹Ÿè¯æ˜è¿™ä»½ Huggingface ä¸Šçš„åŒ»ç–—<strong>é¢„è®­ç»ƒè¯­æ–™è´¨é‡å¾ˆé«˜ï¼›</strong> è€Œ SFT å’Œ DPO è¡¨ç°å‡ºçš„é€€æ­¥ï¼Œè¯´æ˜å¯¹äºæˆ‘ä»¬çš„ <strong>8M æ¨¡å‹</strong> æ¥è¯´ï¼Œè¿‡åº¦çš„ Alignmentï¼ˆå¯¹é½ï¼‰åè€ŒåŠ£åŒ–äº†ã€‚</p>
</blockquote>
<p><strong>æ—¢ç„¶å¦‚æ­¤ï¼Œæˆ‘ä»¬åç»­æ›´å¥½çš„è·¯å¾„å…¶å®æ˜¯ï¼š</strong></p>
<ol>
<li>
<p><strong>ä½¿ç”¨ Base æ¨¡å‹ä½œä¸ºæ ¸å¿ƒ</strong>ã€‚åç»­æˆ‘ä»¬è¿˜å¯ä»¥åšç®€å•å°‘é‡çš„ SFT ä»…ä»…è®©æ¨¡å‹å­¦ä¼šä¸€äº›å›ç­”çš„æ ¼å¼ï¼Œä½†DPOå¯ä»¥å…ˆä¸è€ƒè™‘</p>
</li>
<li>
<p><strong>å¯ä»¥ç»§ç»­è€ƒè™‘åš RAG (æ£€ç´¢å¢å¼º)</strong>ï¼šæˆ‘ä»¬å¯ä»¥è®© Base æ¨¡å‹æ ¹æ®æœç´¢åˆ°çš„å®æ—¶ä¸“ä¸šæ–‡æ¡£è¿›è¡Œæ€»ç»“ï¼Œè¿™æ ·å®ƒå°±ä¸éœ€è¦ç»§ç»­æ¶ˆè€—æœ¬å°±ä¸å¤šçš„å®è´µå‚æ•°é‡å»â€œèƒŒè¯µâ€çŸ¥è¯†ç›²åŒºå’Œæ–°çŸ¥è¯†äº†</p>
</li>
</ol>
<p>åç»­æˆ‘å°±æš‚ä¸ä¼˜åŒ–è¿™ä¸ªæ¨¡å‹äº†ï¼Œå› ä¸ºä¸»è¦æµç¨‹å’Œæ ¸å¿ƒéƒ½è·‘è¿‡äº†ï¼ŒRAGä¹Ÿåœ¨å…¶ä»–é¡¹ç›®ä¸­åšè¿‡äº†ï¼Œæ‰€ä»¥è¿™ä¸ªé¡¹ç›®è‡³æ­¤å®Œæˆã€‚</p>
<h3 data-id="heading-10">ç»“è¯­</h3>
<blockquote>
<p>GitHub åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FChacha-Bing%2Fmed_model_learning" target="_blank" title="https://github.com/Chacha-Bing/med_model_learning" ref="nofollow noopener noreferrer">github.com/Chacha-Bingâ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e118a445ce7c408eb0174abc34e7f7fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yaw6Iy26Iy2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770803570&amp;x-signature=5I3gd92zilO8yeODczxXl%2FppvDQ%3D" alt="" loading="lazy"/></p>
</blockquote>
<p>æˆ‘åœ¨å‰ä¸¤å‘¨è¿˜æ˜¯ä¸€ä¸ªå¯¹äººå·¥æ™ºèƒ½ã€å¯¹ä»¥ä¸ŠçŸ¥è¯†å‡ä¸€æ— æ‰€çŸ¥çš„å°ç™½ï¼Œåˆ°ç°åœ¨å·²ç»èƒ½å¤Ÿç®€å•åœ°è·‘é€šä¸€ä¸ªæ¨¡å‹çš„è®­ç»ƒæµç¨‹ï¼Œå¯ä»¥è¯´æ˜¯ç®—å·²ç»å…¥é—¨äº†ï¼Œå¯¹æ­¤è¿˜æ˜¯æ„Ÿåˆ°éå¸¸æœ‰è¶£å’Œå¼€å¿ƒçš„ã€‚</p>
<p>å†™è¿™ç¯‡æ–‡ç« ä¹Ÿæ˜¯æƒæŠŠè‡ªå·±çš„ä¸€äº›å­¦ä¹ å¿ƒå¾—å’Œå®éªŒæµç¨‹è®°å½•ä¸‹æ¥ä¾›å¤§å®¶å‚è€ƒï¼Œæˆ–è®¸ä¹Ÿæœ‰è®¸å¤šå°ç™½å’Œæˆ‘åœ¨å„ä¸ªé˜¶æ®µæœ‰ç›¸åŒçš„ç–‘æƒ‘ï¼Œé‚£ä¹ˆå°±æ„Ÿè°¢å„ä½çš„é˜…è¯»å•¦ï¼Œåç»­å¦‚æœæˆ‘ç»§ç»­åšäº†ä»€ä¹ˆæœ‰è¶£çš„å°ä¸œè¥¿æˆ‘ä¼šç»§ç»­è¾“å‡ºçš„~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Javaè‡ªå®šä¹‰æ³¨è§£å®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€åˆ°å®æˆ˜è½åœ°]]></title>    <link>https://juejin.cn/post/7602162809291718694</link>    <guid>https://juejin.cn/post/7602162809291718694</guid>    <pubDate>2026-02-03T01:16:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602162809291718694" data-draft-id="7602070768963141658" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Javaè‡ªå®šä¹‰æ³¨è§£å®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€åˆ°å®æˆ˜è½åœ°"/> <meta itemprop="keywords" content="åç«¯,åˆ†å¸ƒå¼"/> <meta itemprop="datePublished" content="2026-02-03T01:16:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›å®¶è·¯ä¸Šç»•äº†å¼¯"/> <meta itemprop="url" content="https://juejin.cn/user/536217404587134"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Javaè‡ªå®šä¹‰æ³¨è§£å®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€åˆ°å®æˆ˜è½åœ°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/536217404587134/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›å®¶è·¯ä¸Šç»•äº†å¼¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T01:16:47.000Z" title="Tue Feb 03 2026 01:16:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    15
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Javaè‡ªå®šä¹‰æ³¨è§£å®Œå…¨æŒ‡å—ï¼šä»åŸºç¡€åˆ°å®æˆ˜è½åœ°</h2>
<p>åœ¨Javaå¼€å‘ä¸­ï¼Œæ³¨è§£ï¼ˆAnnotationï¼‰æ˜¯ä¸€ç§å…ƒæ•°æ®å½¢å¼ï¼Œå®ƒä¸ç›´æ¥å½±å“ä»£ç çš„æ‰§è¡Œé€»è¾‘ï¼Œå´èƒ½ä¸ºä»£ç æä¾›é¢å¤–çš„æè¿°ä¿¡æ¯ï¼Œè¢«ç¼–è¯‘å™¨ã€æ¡†æ¶æˆ–å·¥å…·è§£æåˆ©ç”¨ã€‚ä»JDKå†…ç½®çš„<code>@Override</code>ã€<code>@Deprecated</code>ï¼Œåˆ°Springçš„<code>@Controller</code>ã€MyBatisçš„<code>@Mapper</code>ï¼Œæ³¨è§£å·²æˆä¸ºæ¡†æ¶å¼€å‘ã€ä»£ç ç®€åŒ–ã€é€»è¾‘è§£è€¦çš„æ ¸å¿ƒæ‰‹æ®µã€‚è€Œè‡ªå®šä¹‰æ³¨è§£ï¼Œæ›´æ˜¯è®©å¼€å‘è€…èƒ½å¤Ÿæ ¹æ®ä¸šåŠ¡éœ€æ±‚å°è£…ä¸“å±å…ƒæ•°æ®ï¼Œå®ç°çµæ´»çš„åŠŸèƒ½æ‰©å±•ã€‚æœ¬æ–‡å°†ä»åŸºç¡€æ¦‚å¿µåˆ°å®æˆ˜åœºæ™¯ï¼Œå…¨é¢æ‹†è§£è‡ªå®šä¹‰æ³¨è§£çš„å®šä¹‰ã€è§£æä¸åº”ç”¨ï¼ŒåŠ©åŠ›å¼€å‘è€…æŒæ¡è¿™ä¸€æ ¸å¿ƒæŠ€èƒ½ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€æ³¨è§£æ ¸å¿ƒè®¤çŸ¥ï¼šä»€ä¹ˆæ˜¯æ³¨è§£ï¼Ÿ</h3>
<p>æ³¨è§£æ˜¯Java 5å¼•å…¥çš„ç‰¹æ€§ï¼Œæœ¬è´¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ¥å£ï¼ˆç»§æ‰¿è‡ª<code>java.lang.annotation.Annotation</code>ï¼‰ï¼Œç”¨äºåœ¨ä»£ç ä¸­åµŒå…¥å…ƒæ•°æ®ã€‚å…¶æ ¸å¿ƒä»·å€¼åœ¨äºâ€œ<strong>è§£è€¦</strong>â€â€”â€”å°†éä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚æ—¥å¿—ã€æƒé™ã€æ ¡éªŒã€é…ç½®ï¼‰ä¸ä¸šåŠ¡ä»£ç åˆ†ç¦»ï¼Œç”±ä¸“é—¨çš„å¤„ç†å™¨è§£ææ³¨è§£å¹¶æ‰§è¡Œå¯¹åº”é€»è¾‘ï¼Œå¤§å¹…æå‡ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œçµæ´»æ€§ã€‚</p>
<h4 data-id="heading-2">1. æ³¨è§£çš„åˆ†ç±»</h4>
<p>æŒ‰ä½¿ç”¨åœºæ™¯å’Œä½œç”¨èŒƒå›´ï¼Œæ³¨è§£å¯åˆ†ä¸ºä¸‰ç±»ï¼š</p>
<ul>
<li><strong>å†…ç½®æ³¨è§£</strong>ï¼šJDKè‡ªå¸¦ï¼Œç”¨äºæ ‡å‡†å¼€å‘åœºæ™¯ï¼Œå¦‚<code>@Override</code>ï¼ˆé‡å†™æ ¡éªŒï¼‰ã€<code>@Deprecated</code>ï¼ˆæ ‡è®°è¿‡æ—¶ï¼‰ã€<code>@SuppressWarnings</code>ï¼ˆå‹åˆ¶è­¦å‘Šï¼‰ï¼›</li>
<li><strong>ç¬¬ä¸‰æ–¹æ¡†æ¶æ³¨è§£</strong>ï¼šæ¡†æ¶å°è£…çš„åŠŸèƒ½æ³¨è§£ï¼Œå¦‚Springçš„<code>@Autowired</code>ï¼ˆä¾èµ–æ³¨å…¥ï¼‰ã€MyBatisçš„<code>@Select</code>ï¼ˆSQLæ˜ å°„ï¼‰ã€Lombokçš„<code>@Data</code>ï¼ˆå±æ€§ç”Ÿæˆï¼‰ï¼›</li>
<li><strong>è‡ªå®šä¹‰æ³¨è§£</strong>ï¼šå¼€å‘è€…æ ¹æ®ä¸šåŠ¡éœ€æ±‚è‡ªå®šä¹‰çš„æ³¨è§£ï¼Œç”¨äºå°è£…ä¸“å±å…ƒæ•°æ®ï¼Œå¦‚æ¥å£æƒé™æ ¡éªŒæ³¨è§£ã€æ—¥å¿—è®°å½•æ³¨è§£ã€å‚æ•°æ ¡éªŒæ³¨è§£ç­‰ã€‚</li>
</ul>
<h4 data-id="heading-3">2. æ³¨è§£çš„æ ¸å¿ƒç‰¹æ€§</h4>
<ul>
<li>å…ƒæ•°æ®å±æ€§ï¼šæ³¨è§£å¯åŒ…å«å¤šä¸ªå±æ€§ï¼Œç”¨äºå­˜å‚¨å…·ä½“çš„é…ç½®ä¿¡æ¯ï¼ˆå¦‚æ³¨è§£å‚æ•°ã€ç”Ÿæ•ˆèŒƒå›´ï¼‰ï¼›</li>
<li>æ— æ‰§è¡Œé€»è¾‘ï¼šæ³¨è§£æœ¬èº«ä»…æä¾›å…ƒæ•°æ®ï¼Œéœ€é…åˆâ€œæ³¨è§£å¤„ç†å™¨â€ï¼ˆè§£æå·¥å…·ï¼‰æ‰èƒ½å®ç°åŠŸèƒ½ï¼›</li>
<li>å¯ä½œç”¨äºå¤šå…ƒç´ ï¼šæ³¨è§£å¯æ ‡æ³¨åœ¨ç±»ã€æ–¹æ³•ã€å­—æ®µã€å‚æ•°ã€åŒ…ç­‰Javaå…ƒç´ ä¸Šï¼Œå…·ä½“èŒƒå›´ç”±å…ƒæ³¨è§£æŒ‡å®šã€‚</li>
</ul>
<h3 data-id="heading-4">äºŒã€è‡ªå®šä¹‰æ³¨è§£åŸºç¡€ï¼šå®šä¹‰è¯­æ³•ä¸å…ƒæ³¨è§£</h3>
<p>è‡ªå®šä¹‰æ³¨è§£çš„æ ¸å¿ƒæ˜¯â€œ<strong>å…ƒæ³¨è§£ + æ³¨è§£å±æ€§</strong>â€ï¼šå…ƒæ³¨è§£ç”¨äºå®šä¹‰æ³¨è§£çš„è‡ªèº«è¡Œä¸ºï¼ˆå¦‚ç”Ÿæ•ˆèŒƒå›´ã€ç”Ÿå‘½å‘¨æœŸï¼‰ï¼Œæ³¨è§£å±æ€§ç”¨äºå­˜å‚¨è‡ªå®šä¹‰é…ç½®ä¿¡æ¯ã€‚</p>
<h4 data-id="heading-5">1. å…ƒæ³¨è§£ï¼šæ³¨è§£çš„â€œæ³¨è§£â€</h4>
<p>JDKæä¾›4ä¸ªæ ¸å¿ƒå…ƒæ³¨è§£ï¼Œç”¨äºçº¦æŸè‡ªå®šä¹‰æ³¨è§£çš„ç‰¹æ€§ï¼Œæ˜¯è‡ªå®šä¹‰æ³¨è§£çš„å¿…å¤‡è¦ç´ ï¼š</p>






























<table><thead><tr><th>å…ƒæ³¨è§£</th><th>ä½œç”¨</th><th>å¸¸ç”¨å–å€¼</th></tr></thead><tbody><tr><td><code>@Target</code></td><td>æŒ‡å®šæ³¨è§£å¯ä½œç”¨çš„Javaå…ƒç´ èŒƒå›´</td><td><code>ElementType.TYPE</code>ï¼ˆç±»/æ¥å£ï¼‰ã€<code>METHOD</code>ï¼ˆæ–¹æ³•ï¼‰ã€<code>FIELD</code>ï¼ˆå­—æ®µï¼‰ã€<code>PARAMETER</code>ï¼ˆå‚æ•°ï¼‰ã€<code>CONSTRUCTOR</code>ï¼ˆæ„é€ å™¨ï¼‰ç­‰</td></tr><tr><td><code>@Retention</code></td><td>æŒ‡å®šæ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼ˆä¿ç•™é˜¶æ®µï¼‰</td><td><code>RetentionPolicy.SOURCE</code>ï¼ˆä»…æºç ï¼Œç¼–è¯‘åä¸¢å¼ƒï¼‰ã€<code>CLASS</code>ï¼ˆç¼–è¯‘åä¿ç•™åœ¨classæ–‡ä»¶ï¼Œè¿è¡Œæ—¶ä¸¢å¼ƒï¼Œé»˜è®¤ï¼‰ã€<code>RUNTIME</code>ï¼ˆè¿è¡Œæ—¶ä¿ç•™ï¼Œå¯é€šè¿‡åå°„è§£æï¼Œæœ€å¸¸ç”¨ï¼‰</td></tr><tr><td><code>@Documented</code></td><td>æŒ‡å®šæ³¨è§£æ˜¯å¦è¢«<code>javadoc</code>å·¥å…·ç”Ÿæˆæ–‡æ¡£</td><td>æ— å–å€¼ï¼Œä»…ä½œä¸ºæ ‡è®°</td></tr><tr><td><code>@Inherited</code></td><td>æŒ‡å®šæ³¨è§£æ˜¯å¦å¯è¢«å­ç±»ç»§æ‰¿ï¼ˆä»…ä½œç”¨äºç±»æ³¨è§£ï¼‰</td><td>æ— å–å€¼ï¼Œä»…ä½œä¸ºæ ‡è®°</td></tr></tbody></table>
<p>æ ¸å¿ƒæé†’ï¼š<code>@Retention(RetentionPolicy.RUNTIME)</code>æ˜¯å¤šæ•°å®æˆ˜åœºæ™¯çš„å¿…å¤‡é…ç½®ï¼Œåªæœ‰è®¾ç½®ä¸ºRUNTIMEï¼Œæ‰èƒ½åœ¨ç¨‹åºè¿è¡Œæ—¶é€šè¿‡åå°„è§£ææ³¨è§£ï¼Œå®ç°åŠ¨æ€åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-6">2. è‡ªå®šä¹‰æ³¨è§£å®šä¹‰è¯­æ³•</h4>
<p>è‡ªå®šä¹‰æ³¨è§£ä½¿ç”¨<code>@interface</code>å…³é”®å­—å£°æ˜ï¼Œè¯­æ³•ç»“æ„ä¸ºï¼šå…ƒæ³¨è§£ + æ³¨è§£åç§° + æ³¨è§£å±æ€§ã€‚</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// å…ƒæ³¨è§£ç»„åˆ</span>
<span class="hljs-variable">@Target</span>({ElementType.METHOD, ElementType.TYPE}) <span class="hljs-comment">// ä½œç”¨äºç±»å’Œæ–¹æ³•</span>
<span class="hljs-variable">@Retention</span>(RetentionPolicy.RUNTIME) <span class="hljs-comment">// è¿è¡Œæ—¶ä¿ç•™ï¼Œæ”¯æŒåå°„è§£æ</span>
<span class="hljs-variable">@Documented</span> <span class="hljs-comment">// ç”Ÿæˆjavadocæ–‡æ¡£</span>
<span class="hljs-variable">@Inherited</span> <span class="hljs-comment">// å…è®¸å­ç±»ç»§æ‰¿</span>
public <span class="hljs-variable">@interface</span> MyAnnotation {
    <span class="hljs-comment">// æ³¨è§£å±æ€§ï¼šæ ¼å¼ä¸ºâ€œå±æ€§ç±»å‹ å±æ€§å() [default é»˜è®¤å€¼];â€</span>
    <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">value</span>() <span class="hljs-selector-tag">default</span> ""; <span class="hljs-comment">// ç‰¹æ®Šå±æ€§ï¼švalueï¼Œä½¿ç”¨æ—¶å¯çœç•¥å±æ€§åç›´æ¥èµ‹å€¼</span>
    <span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">order</span>() <span class="hljs-selector-tag">default</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// æ™®é€šå±æ€§ï¼Œå¸¦é»˜è®¤å€¼</span>
    <span class="hljs-selector-tag">String</span><span class="hljs-selector-attr">[]</span> <span class="hljs-selector-tag">tags</span>(); <span class="hljs-comment">// æ•°ç»„ç±»å‹å±æ€§ï¼Œæ— é»˜è®¤å€¼ï¼Œä½¿ç”¨æ—¶å¿…é¡»èµ‹å€¼</span>
}
</code></pre>
<h4 data-id="heading-7">3. æ³¨è§£å±æ€§çš„è§„åˆ™ä¸æ³¨æ„äº‹é¡¹</h4>
<p>æ³¨è§£å±æ€§çš„å£°æ˜æœ‰ä¸¥æ ¼è§„åˆ™ï¼Œä¸ç¬¦åˆè§„åˆ™ä¼šå¯¼è‡´ç¼–è¯‘å¤±è´¥ï¼š</p>
<ul>
<li><strong>å±æ€§ç±»å‹é™åˆ¶</strong>ï¼šä»…æ”¯æŒåŸºæœ¬ç±»å‹ï¼ˆintã€booleanç­‰ï¼‰ã€Stringã€Classã€æšä¸¾ã€æ³¨è§£ï¼ŒåŠä»¥ä¸Šç±»å‹çš„æ•°ç»„ï¼›ä¸æ”¯æŒå¯¹è±¡ã€é›†åˆç­‰å¤æ‚ç±»å‹ã€‚</li>
<li><strong>é»˜è®¤å€¼è§„åˆ™</strong>ï¼šå±æ€§å¯é€šè¿‡<code>default</code>æŒ‡å®šé»˜è®¤å€¼ï¼Œæ— é»˜è®¤å€¼çš„å±æ€§ï¼Œä½¿ç”¨æ³¨è§£æ—¶å¿…é¡»æ˜¾å¼èµ‹å€¼ã€‚</li>
<li><strong>valueå±æ€§ç‰¹æ®Š</strong>ï¼šè‹¥æ³¨è§£ä»…å«valueä¸€ä¸ªå±æ€§ï¼Œæˆ–å…¶ä»–å±æ€§éƒ½æœ‰é»˜è®¤å€¼ï¼Œä½¿ç”¨æ—¶å¯çœç•¥â€œvalue=â€ï¼Œç›´æ¥èµ‹å€¼ï¼›è‹¥æœ‰å¤šä¸ªå±æ€§æ— é»˜è®¤å€¼ï¼Œå¿…é¡»æ˜¾å¼æŒ‡å®šå±æ€§åã€‚</li>
<li><strong>æ•°ç»„å±æ€§èµ‹å€¼</strong>ï¼šå•ä¸ªå€¼å¯ç›´æ¥èµ‹å€¼ï¼Œå¤šä¸ªå€¼éœ€ç”¨<code>{}</code>åŒ…è£¹ï¼Œå¦‚<code>tags = {"log", "auth"}</code>ã€‚</li>
</ul>
<h4 data-id="heading-8">4. æ³¨è§£çš„ä½¿ç”¨æ–¹å¼</h4>
<p>å®šä¹‰å®Œæ³¨è§£åï¼Œå¯åœ¨æŒ‡å®šèŒƒå›´çš„Javaå…ƒç´ ä¸Šä½¿ç”¨ï¼Œæ ¹æ®å±æ€§æ˜¯å¦æœ‰é»˜è®¤å€¼ï¼Œèµ‹å€¼æ–¹å¼ä¸åŒï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä½œç”¨äºç±»ï¼Œæ‰€æœ‰å±æ€§æ˜¾å¼èµ‹å€¼</span>
<span class="hljs-meta">@MyAnnotation(value = <span class="hljs-string">"user-service"</span>, order = 1, tags = {<span class="hljs-string">"service"</span>, <span class="hljs-string">"user"</span>})</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-comment">// ä½œç”¨äºæ–¹æ³•ï¼Œvalueå±æ€§çœç•¥åç§°ï¼Œtagsèµ‹å€¼å•ä¸ªå€¼</span>
    <span class="hljs-meta">@MyAnnotation(<span class="hljs-string">"get-user"</span>)</span>
    <span class="hljs-keyword">public</span> User getUserById(<span class="hljs-meta">@MyAnnotation(<span class="hljs-string">"user-id"</span>)</span> <span class="hljs-built_in">Long</span> id) {
        <span class="hljs-keyword">return</span> new User();
    }
}
</code></pre>
<h3 data-id="heading-9">ä¸‰ã€è‡ªå®šä¹‰æ³¨è§£å®æˆ˜ï¼šè§£æä¸åŠŸèƒ½è½åœ°</h3>
<p>æ³¨è§£æœ¬èº«ä»…ä¸ºå…ƒæ•°æ®ï¼Œéœ€é€šè¿‡â€œæ³¨è§£å¤„ç†å™¨â€è§£æå¹¶æ‰§è¡Œé€»è¾‘ã€‚æ ¹æ®æ³¨è§£çš„ç”Ÿå‘½å‘¨æœŸï¼Œè§£ææ–¹å¼åˆ†ä¸ºä¸¤ç±»ï¼š<code>SOURCE</code>é˜¶æ®µé€šè¿‡APTï¼ˆæ³¨è§£å¤„ç†å™¨å·¥å…·ï¼‰è§£æï¼Œ<code>RUNTIME</code>é˜¶æ®µé€šè¿‡åå°„è§£æã€‚å…¶ä¸­ï¼Œåå°„è§£ææ˜¯æœ€å¸¸ç”¨ã€æœ€çµæ´»çš„æ–¹å¼ï¼Œé€‚ç”¨äºå¤šæ•°ä¸šåŠ¡åœºæ™¯ã€‚</p>
<h4 data-id="heading-10">å®æˆ˜åœºæ™¯1ï¼šæ¥å£æ—¥å¿—è®°å½•æ³¨è§£</h4>
<p>éœ€æ±‚ï¼šè‡ªå®šä¹‰<code>@LogRecord</code>æ³¨è§£ï¼Œæ ‡æ³¨åœ¨æ¥å£æ–¹æ³•ä¸Šï¼Œè®°å½•æ–¹æ³•è°ƒç”¨è€…ã€è°ƒç”¨æ—¶é—´ã€æ‰§è¡Œè€—æ—¶ï¼Œå®ç°æ— ä¾µå…¥å¼æ—¥å¿—è®°å½•ã€‚</p>
<h5 data-id="heading-11">1. å®šä¹‰æ³¨è§£</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.lang.annotation.*;

<span class="hljs-meta">@Target(ElementType.METHOD)</span> <span class="hljs-comment">// ä»…ä½œç”¨äºæ–¹æ³•</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span> <span class="hljs-comment">// è¿è¡Œæ—¶ä¿ç•™ï¼Œæ”¯æŒåå°„</span>
<span class="hljs-meta">@Documented</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> LogRecord {
    <span class="hljs-comment">// æ—¥å¿—æè¿°ï¼Œé»˜è®¤å–æ–¹æ³•å</span>
    String <span class="hljs-title function_">desc</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">""</span>;
    <span class="hljs-comment">// æ˜¯å¦è®°å½•è¯·æ±‚å‚æ•°</span>
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">recordParam</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">true</span>;
    <span class="hljs-comment">// æ˜¯å¦è®°å½•è¿”å›ç»“æœ</span>
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">recordResult</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">false</span>;
}
</code></pre>
<h5 data-id="heading-12">2. å®ç°æ³¨è§£å¤„ç†å™¨ï¼ˆåå°„è§£æï¼‰</h5>
<p>é€šè¿‡Spring AOPæ‹¦æˆªæ ‡æ³¨äº†<code>@LogRecord</code>çš„æ–¹æ³•ï¼Œåå°„è§£ææ³¨è§£å±æ€§ï¼Œæ‰§è¡Œæ—¥å¿—è®°å½•é€»è¾‘ï¼ˆéSpringç¯å¢ƒå¯é€šè¿‡åŠ¨æ€ä»£ç†å®ç°ï¼‰ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">import org.aspectj.lang.ProceedingJoinPoint<span class="hljs-comment">;</span>
import org.aspectj.lang.annotation.Around<span class="hljs-comment">;</span>
import org.aspectj.lang.annotation.Aspect<span class="hljs-comment">;</span>
import org.aspectj.lang.reflect.MethodSignature<span class="hljs-comment">;</span>
import org.springframework.stereotype.Component<span class="hljs-comment">;</span>
import java.lang.reflect.Method<span class="hljs-comment">;</span>
import java.time.LocalDateTime<span class="hljs-comment">;</span>

// åˆ‡é¢ç±»ï¼Œæ‹¦æˆªæ³¨è§£æ ‡æ³¨çš„æ–¹æ³•
@Aspect
@Component
public class LogRecordAspect {

    // åˆ‡å…¥ç‚¹ï¼šæ‹¦æˆªæ‰€æœ‰æ ‡æ³¨@LogRecordçš„æ–¹æ³•
    @Around("@annotation(com.example.annotation.LogRecord)")
    public Object around(ProceedingJoinPoint joinPoint) throws Throwable {
        // 1. åå°„è·å–æ–¹æ³•åŠæ³¨è§£å±æ€§
        MethodSignature <span class="hljs-attr">signature</span> = (MethodSignature) joinPoint.getSignature()<span class="hljs-comment">;</span>
        Method <span class="hljs-attr">method</span> = signature.getMethod()<span class="hljs-comment">;</span>
        LogRecord <span class="hljs-attr">logRecord</span> = method.getAnnotation(LogRecord.class)<span class="hljs-comment">;</span>

        // 2. è§£ææ³¨è§£å±æ€§
        String <span class="hljs-attr">desc</span> = logRecord.desc().isEmpty() ? method.getName() : logRecord.desc()<span class="hljs-comment">;</span>
        boolean <span class="hljs-attr">recordParam</span> = logRecord.recordParam()<span class="hljs-comment">;</span>
        boolean <span class="hljs-attr">recordResult</span> = logRecord.recordResult()<span class="hljs-comment">;</span>

        // 3. æ—¥å¿—å‰ç½®è®°å½•
        LocalDateTime <span class="hljs-attr">startTime</span> = LocalDateTime.now()<span class="hljs-comment">;</span>
        String <span class="hljs-attr">username</span> = getCurrentUsername()<span class="hljs-comment">; // æ¨¡æ‹Ÿè·å–å½“å‰ç™»å½•ç”¨æˆ·</span>
        System.out.printf("<span class="hljs-section">[æ—¥å¿—è®°å½•]</span> æ—¶é—´ï¼š%sï¼Œç”¨æˆ·ï¼š%sï¼Œæ“ä½œï¼š%s%n", startTime, username, desc)<span class="hljs-comment">;</span>
        if (recordParam) {
            Object<span class="hljs-section">[]</span> <span class="hljs-attr">args</span> = joinPoint.getArgs()<span class="hljs-comment">;</span>
            System.out.printf("<span class="hljs-section">[æ—¥å¿—è®°å½•]</span> è¯·æ±‚å‚æ•°ï¼š%s%n", args)<span class="hljs-comment">;</span>
        }

        // 4. æ‰§è¡Œç›®æ ‡æ–¹æ³•
        long <span class="hljs-attr">start</span> = System.currentTimeMillis()<span class="hljs-comment">;</span>
        Object <span class="hljs-attr">result</span> = joinPoint.proceed()<span class="hljs-comment">; // æ‰§è¡ŒåŸæ–¹æ³•</span>
        long <span class="hljs-attr">cost</span> = System.currentTimeMillis() - start<span class="hljs-comment">;</span>

        // 5. æ—¥å¿—åç½®è®°å½•
        if (recordResult) {
            System.out.printf("<span class="hljs-section">[æ—¥å¿—è®°å½•]</span> è¿”å›ç»“æœï¼š%s%n", result)<span class="hljs-comment">;</span>
        }
        System.out.printf("<span class="hljs-section">[æ—¥å¿—è®°å½•]</span> æ‰§è¡Œè€—æ—¶ï¼š%dms%n", cost)<span class="hljs-comment">;</span>

        return result<span class="hljs-comment">;</span>
    }

    // æ¨¡æ‹Ÿè·å–å½“å‰ç™»å½•ç”¨æˆ·
    private String getCurrentUsername() {
        return "admin"<span class="hljs-comment">;</span>
    }
}
</code></pre>
<h5 data-id="heading-13">3. æ³¨è§£ä½¿ç”¨ä¸æ•ˆæœéªŒè¯</h5>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@RestController</span>
<span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">"/user"</span>)
public class UserController {

    <span class="hljs-comment">// ä½¿ç”¨æ—¥å¿—æ³¨è§£ï¼Œé…ç½®è®°å½•å‚æ•°å’Œç»“æœ</span>
    <span class="hljs-variable">@LogRecord</span>(desc = <span class="hljs-string">"æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·"</span>, recordParam = true, recordResult = true)
    <span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">"/{id}"</span>)
    public User <span class="hljs-built_in">getUserById</span>(<span class="hljs-variable">@PathVariable</span> Long id) {
        <span class="hljs-selector-tag">User</span> <span class="hljs-selector-tag">user</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">User</span>();
        <span class="hljs-selector-tag">user</span><span class="hljs-selector-class">.setId</span>(id);
        <span class="hljs-selector-tag">user</span><span class="hljs-selector-class">.setUsername</span>(<span class="hljs-string">"zhangsan"</span>);
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">user</span>;
    }
}
</code></pre>
<p>è°ƒç”¨æ¥å£åï¼Œæ§åˆ¶å°è¾“å‡ºæ—¥å¿—ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[æ—¥å¿—è®°å½•]</span> æ—¶é—´ï¼š2026-01-29T15:30:00ï¼Œç”¨æˆ·ï¼šadminï¼Œæ“ä½œï¼šæ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·
<span class="hljs-section">[æ—¥å¿—è®°å½•]</span> è¯·æ±‚å‚æ•°ï¼š<span class="hljs-section">[1]</span>
<span class="hljs-section">[æ—¥å¿—è®°å½•]</span> è¿”å›ç»“æœï¼šUser(<span class="hljs-attr">id</span>=<span class="hljs-number">1</span>, username=zhangsan)
<span class="hljs-section">[æ—¥å¿—è®°å½•]</span> æ‰§è¡Œè€—æ—¶ï¼š12ms
</code></pre>
<h4 data-id="heading-14">å®æˆ˜åœºæ™¯2ï¼šæ¥å£æƒé™æ ¡éªŒæ³¨è§£</h4>
<p>éœ€æ±‚ï¼šè‡ªå®šä¹‰<code>@RequiresPermission</code>æ³¨è§£ï¼Œæ ‡æ³¨åœ¨æ¥å£æ–¹æ³•ä¸Šï¼Œæ ¡éªŒå½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æŒ‡å®šæƒé™ï¼Œæ— æƒé™åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</p>
<h5 data-id="heading-15">1. å®šä¹‰æ³¨è§£</h5>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Target</span>(ElementType.METHOD)
<span class="hljs-variable">@Retention</span>(RetentionPolicy.RUNTIME)
<span class="hljs-variable">@Documented</span>
public <span class="hljs-variable">@interface</span> RequiresPermission {
    <span class="hljs-comment">// æ‰€éœ€æƒé™æ ‡è¯†ï¼ˆæ”¯æŒå¤šä¸ªï¼‰</span>
    <span class="hljs-selector-tag">String</span><span class="hljs-selector-attr">[]</span> <span class="hljs-selector-tag">value</span>();
    <span class="hljs-comment">// æ— æƒé™æ—¶çš„æç¤ºä¿¡æ¯</span>
    <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">message</span>() <span class="hljs-selector-tag">default</span> "æ— æƒé™è®¿é—®è¯¥æ¥å£";
}
</code></pre>
<h5 data-id="heading-16">2. å®ç°æƒé™æ ¡éªŒåˆ‡é¢</h5>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Aspect</span>
<span class="hljs-keyword">@Component</span>
public class PermissionAspect {

    <span class="hljs-keyword">@Around</span>(<span class="hljs-string">"@annotation(com.example.annotation.RequiresPermission)"</span>)
    public Object checkPermission(ProceedingJoinPoint joinPoint) throws Throwable {
        <span class="hljs-comment">// 1. è§£ææ³¨è§£</span>
        MethodSignature signature = (MethodSignature) joinPoint<span class="hljs-selector-class">.getSignature</span>();
        RequiresPermission permission = signature<span class="hljs-selector-class">.getMethod</span>()<span class="hljs-selector-class">.getAnnotation</span>(RequiresPermission.class);
        String<span class="hljs-selector-attr">[]</span> requiredPermissions = permission<span class="hljs-selector-class">.value</span>();
        String message = permission<span class="hljs-selector-class">.message</span>();

        <span class="hljs-comment">// 2. è·å–å½“å‰ç”¨æˆ·æ‹¥æœ‰çš„æƒé™ï¼ˆæ¨¡æ‹Ÿä»ç™»å½•ä¸Šä¸‹æ–‡è·å–ï¼‰</span>
        List&lt;String&gt; userPermissions = <span class="hljs-built_in">getCurrentUserPermissions</span>();

        <span class="hljs-comment">// 3. æƒé™æ ¡éªŒ</span>
        boolean hasPermission = Arrays<span class="hljs-selector-class">.stream</span>(requiredPermissions)
                <span class="hljs-selector-class">.anyMatch</span>(userPermissions::contains);
        if (!hasPermission) {
            throw new <span class="hljs-built_in">RuntimeException</span>(message);
        }

        <span class="hljs-comment">// 4. æ ¡éªŒé€šè¿‡ï¼Œæ‰§è¡Œç›®æ ‡æ–¹æ³•</span>
        return joinPoint<span class="hljs-selector-class">.proceed</span>();
    }

    <span class="hljs-comment">// æ¨¡æ‹Ÿè·å–å½“å‰ç”¨æˆ·æƒé™</span>
    private List&lt;String&gt; <span class="hljs-built_in">getCurrentUserPermissions</span>() {
        return Arrays<span class="hljs-selector-class">.asList</span>("user:query", "user:add"); <span class="hljs-comment">//  adminç”¨æˆ·æ‹¥æœ‰çš„æƒé™</span>
    }
}
</code></pre>
<h5 data-id="heading-17">3. æ³¨è§£ä½¿ç”¨ä¸æ•ˆæœéªŒè¯</h5>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@RestController</span>
<span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">"/user"</span>)
public class UserController {

    <span class="hljs-comment">// è¦æ±‚æ‹¥æœ‰"user:query"æƒé™</span>
    <span class="hljs-variable">@RequiresPermission</span>(<span class="hljs-string">"user:query"</span>)
    <span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">"/{id}"</span>)
    public User <span class="hljs-built_in">getUserById</span>(<span class="hljs-variable">@PathVariable</span> Long id) {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">User</span>(id, <span class="hljs-string">"zhangsan"</span>);
    }

    <span class="hljs-comment">// è¦æ±‚æ‹¥æœ‰"user:delete"æƒé™ï¼ˆå½“å‰ç”¨æˆ·æ— æ­¤æƒé™ï¼‰</span>
    @<span class="hljs-selector-tag">RequiresPermission</span>(value = <span class="hljs-string">"user:delete"</span>, message = <span class="hljs-string">"æ— åˆ é™¤ç”¨æˆ·æƒé™"</span>)
    @<span class="hljs-selector-tag">DeleteMapping</span>(<span class="hljs-string">"/{id}"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">deleteUser</span>(<span class="hljs-variable">@PathVariable</span> Long id) {
        <span class="hljs-selector-tag">return</span> "åˆ é™¤æˆåŠŸ";
    }
}
</code></pre>
<p>è°ƒç”¨åˆ é™¤æ¥å£æ—¶ï¼Œå› æ— æƒé™æŠ›å‡ºå¼‚å¸¸ï¼š<code>java.lang.RuntimeException: æ— åˆ é™¤ç”¨æˆ·æƒé™</code>ï¼Œå®ç°æƒé™æ ¡éªŒåŠŸèƒ½ã€‚</p>
<h3 data-id="heading-18">å››ã€è‡ªå®šä¹‰æ³¨è§£è¿›é˜¶æŠ€å·§</h3>
<h4 data-id="heading-19">1. æ³¨è§£ç»„åˆï¼šå¤ç”¨æ³¨è§£é€»è¾‘</h4>
<p>å¯å°†å¤šä¸ªæ³¨è§£ç»„åˆä¸ºä¸€ä¸ªå¤åˆæ³¨è§£ï¼Œç®€åŒ–ä½¿ç”¨åœºæ™¯ã€‚ä¾‹å¦‚ï¼Œå°†æ—¥å¿—è®°å½•ä¸æƒé™æ ¡éªŒæ³¨è§£ç»„åˆä¸º<code>@LogAndAuth</code>ï¼Œæ ‡æ³¨ä¸€æ¬¡å³å¯è§¦å‘ä¸¤ä¸ªåŠŸèƒ½ã€‚</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// å¤åˆæ³¨è§£ï¼šç»„åˆ@LogRecordå’Œ@RequiresPermission</span>
<span class="hljs-variable">@Target</span>(ElementType.METHOD)
<span class="hljs-variable">@Retention</span>(RetentionPolicy.RUNTIME)
<span class="hljs-variable">@LogRecord</span>(desc = <span class="hljs-string">"éœ€æƒé™æ ¡éªŒçš„æ“ä½œ"</span>, recordParam = true)
<span class="hljs-variable">@RequiresPermission</span>(<span class="hljs-string">"admin:operate"</span>)
public <span class="hljs-variable">@interface</span> LogAndAuth {
    <span class="hljs-comment">// å¯é‡å†™ç»„åˆæ³¨è§£çš„å±æ€§ï¼ˆå¯é€‰ï¼‰</span>
    <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">logDesc</span>() <span class="hljs-selector-tag">default</span> "";
}
</code></pre>
<p>ä½¿ç”¨æ—¶ï¼Œæ ‡æ³¨å¤åˆæ³¨è§£å³å¯ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@LogAndAuth</span>(logDesc = <span class="hljs-string">"ç®¡ç†å‘˜æ“ä½œ"</span>)
<span class="hljs-variable">@PostMapping</span>(<span class="hljs-string">"/admin/operate"</span>)
public String <span class="hljs-built_in">adminOperate</span>() {
    <span class="hljs-selector-tag">return</span> "æ“ä½œæˆåŠŸ";
}
</code></pre>
<h4 data-id="heading-20">2. æ³¨è§£ä¸æšä¸¾ç»“åˆï¼šè§„èŒƒå±æ€§å–å€¼</h4>
<p>å½“æ³¨è§£å±æ€§å–å€¼æœ‰é™æ—¶ï¼Œå¯ç»“åˆæšä¸¾ç±»å‹ï¼Œé¿å…ç¡¬ç¼–ç ï¼Œæå‡ä»£ç è§„èŒƒæ€§ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å®šä¹‰æ—¥å¿—çº§åˆ«æšä¸¾</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">LogLevel</span> {
    INFO, WARN, ERROR
}

<span class="hljs-comment">// æ³¨è§£å±æ€§ä½¿ç”¨æšä¸¾</span>
<span class="hljs-meta">@Target(ElementType.METHOD)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Log {
    LogLevel <span class="hljs-title function_">level</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> LogLevel.INFO; <span class="hljs-comment">// æšä¸¾ç±»å‹å±æ€§</span>
    String <span class="hljs-title function_">desc</span><span class="hljs-params">()</span>;
}

<span class="hljs-comment">// ä½¿ç”¨æ³¨è§£</span>
<span class="hljs-meta">@Log(level = LogLevel.WARN, desc = "æ•æ„Ÿæ“ä½œæ—¥å¿—")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sensitiveOperate</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span>
}
</code></pre>
<h4 data-id="heading-21">3. APTè§£æï¼šç¼–è¯‘æœŸç”Ÿæˆä»£ç </h4>
<p>å¯¹äº<code>@Retention(RetentionPolicy.SOURCE)</code>çš„æ³¨è§£ï¼Œå¯é€šè¿‡APTï¼ˆAnnotation Processing Toolï¼‰åœ¨ç¼–è¯‘æœŸè§£ææ³¨è§£ï¼Œè‡ªåŠ¨ç”Ÿæˆä»£ç ï¼ˆå¦‚Lombokçš„<code>@Data</code>ç”Ÿæˆgetter/setterï¼‰ã€‚æ ¸å¿ƒæ˜¯å®ç°<code>javax.annotation.processing.AbstractProcessor</code>ï¼Œé‡å†™<code>process</code>æ–¹æ³•è§£ææ³¨è§£å¹¶ç”Ÿæˆä»£ç ã€‚</p>
<p>é€‚ç”¨åœºæ™¯ï¼šéœ€åœ¨ç¼–è¯‘æœŸç”Ÿæˆæ¨¡æ¿ä»£ç çš„åœºæ™¯ï¼ˆå¦‚ORMæ˜ å°„ã€DTOè½¬æ¢ï¼‰ï¼Œä¼˜ç‚¹æ˜¯æ— è¿è¡Œæ—¶åå°„å¼€é”€ï¼Œæ€§èƒ½ä¼˜å¼‚ï¼›ç¼ºç‚¹æ˜¯å¼€å‘å¤æ‚åº¦é«˜äºåå°„è§£æã€‚</p>
<h3 data-id="heading-22">äº”ã€è‡ªå®šä¹‰æ³¨è§£é«˜é¢‘é¿å‘æŒ‡å—</h3>
<h4 data-id="heading-23">1. å‘ç‚¹1ï¼šæ³¨è§£æ— æ³•è¢«è§£æï¼ŒåŠŸèƒ½ä¸ç”Ÿæ•ˆ</h4>
<p><strong>ç°è±¡</strong>ï¼šæ ‡æ³¨æ³¨è§£åï¼Œæ— å¯¹åº”åŠŸèƒ½è§¦å‘ï¼Œæ§åˆ¶å°æ— æ—¥å¿—æˆ–æ ¡éªŒé€»è¾‘æœªæ‰§è¡Œã€‚ <strong>è§„é¿æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>æ£€æŸ¥å…ƒæ³¨è§£<code>@Retention</code>æ˜¯å¦è®¾ç½®ä¸º<code>RUNTIME</code>ï¼ŒéRUNTIMEæ— æ³•é€šè¿‡åå°„è§£æï¼›</li>
<li>Spring AOPåœºæ™¯ï¼šç¡®ä¿åˆ‡é¢ç±»æ·»åŠ <code>@Aspect</code>å’Œ<code>@Component</code>ï¼Œä¸”åŒ…è·¯å¾„è¢«Springæ‰«æï¼›</li>
<li>ç¡®è®¤æ³¨è§£ä½œç”¨èŒƒå›´ï¼ˆ<code>@Target</code>ï¼‰ä¸ä½¿ç”¨ä½ç½®ä¸€è‡´ï¼ˆå¦‚æ–¹æ³•æ³¨è§£ä¸èƒ½æ ‡æ³¨åœ¨ç±»ä¸Šï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-24">2. å‘ç‚¹2ï¼šæ³¨è§£å±æ€§èµ‹å€¼é”™è¯¯ï¼Œç¼–è¯‘å¤±è´¥</h4>
<p><strong>ç°è±¡</strong>ï¼šä½¿ç”¨æ³¨è§£æ—¶ï¼Œç¼–è¯‘æç¤ºâ€œAttribute value must be constantâ€æˆ–â€œMissing required attributeâ€ã€‚ <strong>è§„é¿æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>æ³¨è§£å±æ€§å€¼å¿…é¡»æ˜¯å¸¸é‡ï¼ˆå­—é¢é‡ã€æšä¸¾ã€static finalå˜é‡ï¼‰ï¼Œä¸èƒ½æ˜¯åŠ¨æ€è®¡ç®—çš„å€¼ï¼›</li>
<li>æ— é»˜è®¤å€¼çš„å±æ€§å¿…é¡»æ˜¾å¼èµ‹å€¼ï¼Œæ•°ç»„å±æ€§å¤šå€¼ç”¨<code>{}</code>åŒ…è£¹ï¼Œå•å€¼å¯ç›´æ¥èµ‹å€¼ï¼›</li>
<li>é¿å…ä½¿ç”¨ä¸æ”¯æŒçš„å±æ€§ç±»å‹ï¼ˆå¦‚Listã€Mapã€è‡ªå®šä¹‰å¯¹è±¡ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-25">3. å‘ç‚¹3ï¼šåˆ‡é¢æ‹¦æˆªå¤±æ•ˆï¼Œæ–¹æ³•æœªè¢«å¢å¼º</h4>
<p><strong>ç°è±¡</strong>ï¼šSpring AOPåœºæ™¯ä¸‹ï¼Œæ³¨è§£æ ‡æ³¨çš„æ–¹æ³•æœªè¢«åˆ‡é¢æ‹¦æˆªï¼ŒåŠŸèƒ½ä¸ç”Ÿæ•ˆã€‚ <strong>è§„é¿æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>é¿å…å†…éƒ¨æ–¹æ³•è°ƒç”¨ï¼šSpring AOPåŸºäºåŠ¨æ€ä»£ç†ï¼Œç±»å†…éƒ¨æ–¹æ³•è°ƒç”¨æ— æ³•è§¦å‘åˆ‡é¢ï¼ˆéœ€é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨ï¼‰ï¼›</li>
<li>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼æ­£ç¡®ï¼šç¡®ä¿<code>@Around</code>ç­‰æ³¨è§£çš„åˆ‡å…¥ç‚¹èƒ½åŒ¹é…ç›®æ ‡æ–¹æ³•ï¼ˆå¦‚æ³¨è§£å…¨ç±»åæ­£ç¡®ï¼‰ï¼›</li>
<li>éSpring Beançš„ç±»ï¼šåˆ‡é¢ä»…å¯¹Springå®¹å™¨ç®¡ç†çš„Beanç”Ÿæ•ˆï¼ŒæœªåŠ <code>@Service</code>/<code>@Controller</code>çš„ç±»æ— æ³•è¢«æ‹¦æˆªã€‚</li>
</ul>
<h4 data-id="heading-26">4. å‘ç‚¹4ï¼šæ³¨è§£ç»§æ‰¿å¤±æ•ˆï¼Œå­ç±»æ— çˆ¶ç±»æ³¨è§£åŠŸèƒ½</h4>
<p><strong>ç°è±¡</strong>ï¼šçˆ¶ç±»æ ‡æ³¨æ³¨è§£ï¼Œå­ç±»ç»§æ‰¿åï¼Œå­ç±»æ–¹æ³•æ— å¯¹åº”åŠŸèƒ½ã€‚ <strong>è§„é¿æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>ä»…<code>@Inherited</code>å…ƒæ³¨è§£çš„ç±»æ³¨è§£å¯è¢«ç»§æ‰¿ï¼Œæ–¹æ³•æ³¨è§£ã€å­—æ®µæ³¨è§£ä¸æ”¯æŒç»§æ‰¿ï¼›</li>
<li>å­ç±»éœ€é‡å†™çˆ¶ç±»æ–¹æ³•å¹¶é‡æ–°æ ‡æ³¨æ³¨è§£ï¼Œæˆ–é€šè¿‡åˆ‡é¢åˆ‡å…¥ç‚¹è°ƒæ•´ä¸ºæ‹¦æˆªçˆ¶ç±»æ³¨è§£ã€‚</li>
</ul>
<h3 data-id="heading-27">å…­ã€æ€»ç»“ï¼šè‡ªå®šä¹‰æ³¨è§£çš„æ ¸å¿ƒä»·å€¼ä¸ä½¿ç”¨åŸåˆ™</h3>
<p>è‡ªå®šä¹‰æ³¨è§£çš„æ ¸å¿ƒä»·å€¼åœ¨äºâ€œ<strong>ç”¨å…ƒæ•°æ®é©±åŠ¨é€»è¾‘ï¼Œå®ç°ä»£ç è§£è€¦ä¸å¤ç”¨</strong>â€ï¼Œå®ƒè®©éä¸šåŠ¡é€»è¾‘ï¼ˆæ—¥å¿—ã€æƒé™ã€æ ¡éªŒï¼‰ä¸ä¸šåŠ¡ä»£ç åˆ†ç¦»ï¼Œå¤§å¹…æå‡ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§ã€‚å®é™…ä½¿ç”¨ä¸­éœ€éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š</p>
<ul>
<li>æŒ‰éœ€è®¾è®¡ï¼šä»…åœ¨éœ€è¦å°è£…å…ƒæ•°æ®ã€è§£è€¦é€»è¾‘æ—¶ä½¿ç”¨æ³¨è§£ï¼Œé¿å…è¿‡åº¦è®¾è®¡å¯¼è‡´ä»£ç å¯è¯»æ€§ä¸‹é™ï¼›</li>
<li>æ˜ç¡®èŒƒå›´ï¼šé€šè¿‡å…ƒæ³¨è§£ä¸¥æ ¼çº¦æŸæ³¨è§£çš„ä½œç”¨èŒƒå›´å’Œç”Ÿå‘½å‘¨æœŸï¼Œé¿å…æ»¥ç”¨ï¼›</li>
<li>æ€§èƒ½æƒè¡¡ï¼šåå°„è§£æå­˜åœ¨è½»å¾®æ€§èƒ½å¼€é”€ï¼Œé«˜é¢‘è°ƒç”¨åœºæ™¯å¯è€ƒè™‘APTç¼–è¯‘æœŸè§£ææˆ–ç¼“å­˜æ³¨è§£è§£æç»“æœï¼›</li>
<li>è§„èŒƒå‘½åï¼šæ³¨è§£åç§°ã€å±æ€§åéœ€æ¸…æ™°æ˜“æ‡‚ï¼Œç»“åˆä¸šåŠ¡åœºæ™¯è¯­ä¹‰åŒ–ï¼ˆå¦‚<code>@RequiresPermission</code>ã€<code>@LogRecord</code>ï¼‰ã€‚</li>
</ul>
<p>ä»æ¡†æ¶å°è£…åˆ°ä¸šåŠ¡å¼€å‘ï¼Œè‡ªå®šä¹‰æ³¨è§£å·²æˆä¸ºJavaå¼€å‘è€…çš„å¿…å¤‡æŠ€èƒ½ã€‚æŒæ¡æœ¬æ–‡æ‰€è¿°çš„å®šä¹‰è¯­æ³•ã€è§£ææ–¹å¼ä¸å®æˆ˜åœºæ™¯ï¼Œå¯çµæ´»è¿ç”¨æ³¨è§£ç®€åŒ–å¼€å‘ã€å°è£…é€šç”¨é€»è¾‘ï¼Œè®©ä»£ç æ›´ä¼˜é›…ã€æ›´å…·æ‰©å±•æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[NetworkAgentçš„ä½œç”¨æ˜¯ä»€ä¹ˆ]]></title>    <link>https://juejin.cn/post/7602800677710872610</link>    <guid>https://juejin.cn/post/7602800677710872610</guid>    <pubDate>2026-02-04T09:26:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602800677710872610" data-draft-id="7602800677710856226" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="NetworkAgentçš„ä½œç”¨æ˜¯ä»€ä¹ˆ"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-02-04T09:26:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·341408199125"/> <meta itemprop="url" content="https://juejin.cn/user/570004686782272"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            NetworkAgentçš„ä½œç”¨æ˜¯ä»€ä¹ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/570004686782272/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·341408199125
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T09:26:21.000Z" title="Wed Feb 04 2026 09:26:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">NetworkAgent çš„ä½œç”¨ - ç½‘ç»œé€šä¿¡çš„æ¡¥æ¢ ğŸŒ‰</h2>
<p><code>NetworkAgent</code> æ˜¯ Android ç½‘ç»œæ¶æ„ä¸­çš„<strong>å…³é”®æŠ½è±¡ç±»</strong>,å……å½“<strong>ç½‘ç»œæä¾›è€…(å¦‚ Telephonyã€WiFi)å’Œ ConnectivityService ä¹‹é—´çš„åŒå‘é€šä¿¡æ¡¥æ¢</strong>ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€æ ¸å¿ƒå®šä½ ğŸ¯</h3>
<pre><code class="hljs language-49:67:packages_modules_Connectivity/framework/src/android/net/NetworkAgent.java" lang="49:67:packages_modules_Connectivity/framework/src/android/net/NetworkAgent.java">/**
 * A utility class for handling for communicating between bearer-specific
 * code and ConnectivityService.
 *
 * An agent manages the life cycle of a network. A network starts its
 * life cycle when {@link register} is called on NetworkAgent. The network
 * is then connecting. When full L3 connectivity has been established,
 * the agent should call {@link markConnected} to inform the system that
 * this network is ready to use. When the network disconnects its life
 * ends and the agent should call {@link unregister}, at which point the
 * system will clean up and free resources.
 * Any reconnection becomes a new logical network, so after a network
 * is disconnected the agent cannot be used any more. Network providers
 * should create a new NetworkAgent instance to handle new connections.
 *
 * A bearer may have more than one NetworkAgent if it can simultaneously
 * support separate networks (IMS / Internet / MMS Apns on cellular, or
 * perhaps connections with different SSID or P2P for Wi-Fi).
</code></pre>
<p><strong>ç®€è€Œè¨€ä¹‹</strong>: NetworkAgent = <strong>ç½‘ç»œä»£ç†äºº</strong>,ä»£è¡¨ä¸€ä¸ªç‰¹å®šçš„ç½‘ç»œè¿æ¥ã€‚</p>
<h3 data-id="heading-2">äºŒã€æ¶æ„ä½ç½® ğŸ—ï¸</h3>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             Applications (é€šè¿‡ Socket ä½¿ç”¨ç½‘ç»œ)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ConnectivityService (ç³»ç»Ÿæ ¸å¿ƒ)                   â”‚
â”‚  - ç®¡ç†æ‰€æœ‰ç½‘ç»œ                                            â”‚
â”‚  - é€‰æ‹©é»˜è®¤ç½‘ç»œ                                            â”‚
â”‚  - å¤„ç† NetworkRequest                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†‘ â†“ (Binder IPC)
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  NetworkAgent   â”‚ â† ä½ åœ¨è¿™é‡Œ
            â”‚  (æŠ½è±¡åŸºç±»)      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†‘ (ç»§æ‰¿)
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“            â†“            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Telephony    â”‚ â”‚  WiFi    â”‚ â”‚  VPN     â”‚
â”‚ NetworkAgent â”‚ â”‚  Agent   â”‚ â”‚  Agent   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“            â†“            â†“
    Modem/RIL    WiFi HAL    VPN Service
</code></pre>
<h3 data-id="heading-3">ä¸‰ã€ä¸»è¦èŒè´£ ğŸ“‹</h3>
<h4 data-id="heading-4">1. <strong>ç½‘ç»œç”Ÿå‘½å‘¨æœŸç®¡ç†</strong> ğŸ”„</h4>
<pre><code class="hljs language-740:776:packages_modules_Connectivity/framework/src/android/net/NetworkAgent.java" lang="740:776:packages_modules_Connectivity/framework/src/android/net/NetworkAgent.java">/**
 * Register this network agent with ConnectivityService.
 *
 * This method can only be called once per network agent.
 *
 * @return the Network associated with this network agent (which can also be obtained later
 *         by calling getNetwork() on this agent).
 * @throws IllegalStateException thrown by the system server if this network agent is
 *         already registered.
 */
@NonNull
public Network register() {
    if (VDBG) log("Registering NetworkAgent");
    synchronized (mRegisterLock) {
        if (mNetwork != null) {
            throw new IllegalStateException("Agent already registered");
        }
        final ConnectivityManager cm = (ConnectivityManager) mInitialConfiguration.context
                .getSystemService(Context.CONNECTIVITY_SERVICE);
        if (mInitialConfiguration.localNetworkConfig == null) {
            // Call registerNetworkAgent without localNetworkConfig argument to pass
            // android.net.cts.NetworkAgentTest#testAgentStartsInConnecting in old cts
            mNetwork = cm.registerNetworkAgent(new NetworkAgentBinder(mHandler),
                    new NetworkInfo(mInitialConfiguration.info),
                    mInitialConfiguration.properties, mInitialConfiguration.capabilities,
                    mInitialConfiguration.score, mInitialConfiguration.config, providerId);
        } else {
            mNetwork = cm.registerNetworkAgent(new NetworkAgentBinder(mHandler),
                    new NetworkInfo(mInitialConfiguration.info),
                    mInitialConfiguration.properties, mInitialConfiguration.capabilities,
                    mInitialConfiguration.localNetworkConfig, mInitialConfiguration.score,
                    mInitialConfiguration.config, providerId);
        }
        mInitialConfiguration = null; // All this memory can now be GC'd
    }
    return mNetwork;
}
</code></pre>
<p><strong>ç”Ÿå‘½å‘¨æœŸé˜¶æ®µ</strong>:</p>
<ol>
<li><strong>åˆ›å»º</strong>: <code>new TelephonyNetworkAgent(...)</code></li>
<li><strong>æ³¨å†Œ</strong>: <code>agent.register()</code> â†’ å‘ ConnectivityService æ³¨å†Œ</li>
<li><strong>è¿æ¥</strong>: <code>agent.markConnected()</code> â†’ é€šçŸ¥ L3 è¿æ¥å»ºç«‹</li>
<li><strong>æ´»è·ƒ</strong>: æŒç»­æ›´æ–°ç½‘ç»œçŠ¶æ€</li>
<li><strong>æ–­å¼€</strong>: <code>agent.unregister()</code> â†’ æ¸…ç†èµ„æº</li>
</ol>
<pre><code class="hljs language-996:1016:packages_modules_Connectivity/framework/src/android/net/NetworkAgent.java" lang="996:1016:packages_modules_Connectivity/framework/src/android/net/NetworkAgent.java">/**
 * Inform ConnectivityService that this agent has now connected.
 * Call {@link #unregister} to disconnect.
 */
public void markConnected() {
    mNetworkInfo.setDetailedState(NetworkInfo.DetailedState.CONNECTED, null /* reason */,
            mNetworkInfo.getExtraInfo());
    queueOrSendNetworkInfo(mNetworkInfo);
}

/**
 * Unregister this network agent.
 *
 * This signals the network has disconnected and ends its lifecycle. After this is called,
 * the network is torn down and this agent can no longer be used.
 */
public void unregister() {
    // When unregistering an agent nobody should use the extrainfo (or reason) any more.
    mNetworkInfo.setDetailedState(NetworkInfo.DetailedState.DISCONNECTED, null /* reason */,
            null /* extraInfo */);
    queueOrSendNetworkInfo(mNetworkInfo);
}
</code></pre>
<h4 data-id="heading-5">2. <strong>å‘ ConnectivityService ä¸ŠæŠ¥ç½‘ç»œä¿¡æ¯</strong> ğŸ“¤</h4>
<p>NetworkAgent æä¾›å¤šä¸ªæ–¹æ³•å‘ç³»ç»Ÿä¸ŠæŠ¥ç½‘ç»œçŠ¶æ€å˜åŒ–:</p>
<h5 data-id="heading-6">a) <strong>NetworkCapabilities</strong> (ç½‘ç»œèƒ½åŠ›)</h5>
<pre><code class="hljs language-1135:1145:packages_modules_Connectivity/framework/src/android/net/NetworkAgent.java" lang="1135:1145:packages_modules_Connectivity/framework/src/android/net/NetworkAgent.java">/**
 * Must be called by the agent when the network's {@link NetworkCapabilities} change.
 * @param networkCapabilities the new NetworkCapabilities.
 */
public void sendNetworkCapabilities(@NonNull NetworkCapabilities networkCapabilities) {
    Objects.requireNonNull(networkCapabilities);
    mBandwidthUpdatePending.set(false);
    mLastBwRefreshTime = System.currentTimeMillis();
    final NetworkCapabilities nc =
            new NetworkCapabilities(networkCapabilities, NetworkCapabilities.REDACT_NONE);
    queueOrSendMessage(reg -&gt; reg.sendNetworkCapabilities(nc));
}
</code></pre>
<p>ä¸ŠæŠ¥å†…å®¹:</p>
<ul>
<li>ç½‘ç»œç±»å‹ (TRANSPORT_CELLULAR, TRANSPORT_WIFI)</li>
<li>ç½‘ç»œèƒ½åŠ› (INTERNET, MMS, IMS, SUPL)</li>
<li>å¸¦å®½ä¿¡æ¯ (ä¸Šè¡Œ/ä¸‹è¡Œé€Ÿç‡)</li>
<li>è®¡è´¹çŠ¶æ€ (METERED/NOT_METERED)</li>
</ul>
<h5 data-id="heading-7">b) <strong>LinkProperties</strong> (é“¾è·¯å±æ€§)</h5>
<pre><code class="hljs language-960:967:packages_modules_Connectivity/framework/src/android/net/NetworkAgent.java" lang="960:967:packages_modules_Connectivity/framework/src/android/net/NetworkAgent.java">/**
 * Must be called by the agent when the network's {@link LinkProperties} change.
 * @param linkProperties the new LinkProperties.
 */
public void sendLinkProperties(@NonNull LinkProperties linkProperties) {
    Objects.requireNonNull(linkProperties);
    final LinkProperties lp = new LinkProperties(linkProperties);
    queueOrSendMessage(reg -&gt; reg.sendLinkProperties(lp));
}
</code></pre>
<p>ä¸ŠæŠ¥å†…å®¹:</p>
<ul>
<li>ç½‘ç»œæ¥å£å (å¦‚ <code>rmnet_data0</code>, <code>wlan0</code>)</li>
<li>IP åœ°å€ (IPv4/IPv6)</li>
<li>DNS æœåŠ¡å™¨</li>
<li>è·¯ç”±ä¿¡æ¯</li>
<li>MTU å€¼</li>
</ul>
<h5 data-id="heading-8">c) <strong>NetworkScore</strong> (ç½‘ç»œè¯„åˆ†)</h5>
<pre><code class="hljs language-1159:1167:packages_modules_Connectivity/framework/src/android/net/NetworkAgent.java" lang="1159:1167:packages_modules_Connectivity/framework/src/android/net/NetworkAgent.java">/**
 * Must be called by the agent to update the score of this network.
 *
 * @param score the new score.
 */
public void sendNetworkScore(@NonNull NetworkScore score) {
    Objects.requireNonNull(score);
    queueOrSendMessage(reg -&gt; reg.sendScore(score));
}
</code></pre>
<p>è¯„åˆ†å½±å“é»˜è®¤ç½‘ç»œé€‰æ‹©,è¶Šé«˜è¶Šä¼˜å…ˆã€‚</p>
<h5 data-id="heading-9">d) <strong>NetworkInfo</strong> (è¿æ¥çŠ¶æ€)</h5>
<pre><code class="hljs language-1120:1132:packages_modules_Connectivity/framework/src/android/net/NetworkAgent.java" lang="1120:1132:packages_modules_Connectivity/framework/src/android/net/NetworkAgent.java">/**
 * Must be called by the agent when it has a new NetworkInfo object.
 * @hide TODO: expose something better.
 */
@UnsupportedAppUsage(maxTargetSdk = Build.VERSION_CODES.P, trackingBug = 115609023)
public final void sendNetworkInfo(NetworkInfo networkInfo) {
    queueOrSendNetworkInfo(networkInfo);
}

private void queueOrSendNetworkInfo(NetworkInfo networkInfo) {
    final NetworkInfo ni = new NetworkInfo(networkInfo);
    queueOrSendMessage(reg -&gt; reg.sendNetworkInfo(ni));
}
</code></pre>
<p>ä¸ŠæŠ¥çŠ¶æ€:</p>
<ul>
<li>CONNECTING â†’ CONNECTED â†’ DISCONNECTED</li>
<li>SUSPENDED (æŒ‚èµ·)</li>
</ul>
<h4 data-id="heading-10">3. <strong>æ¥æ”¶ ConnectivityService çš„æŒ‡ä»¤</strong> ğŸ“¥</h4>
<p>é€šè¿‡ <code>INetworkAgent.aidl</code> å®šä¹‰çš„ Binder æ¥å£æ¥æ”¶ç³»ç»ŸæŒ‡ä»¤:</p>
<pre><code class="hljs language-28:49:packages_modules_Connectivity/framework/src/android/net/INetworkAgent.aidl" lang="28:49:packages_modules_Connectivity/framework/src/android/net/INetworkAgent.aidl">oneway interface INetworkAgent {
    void onRegistered(in INetworkAgentRegistry registry);
    void onDisconnected();
    void onBandwidthUpdateRequested();
    void onValidationStatusChanged(int validationStatus,
            in @nullable String captivePortalUrl);
    void onSaveAcceptUnvalidated(boolean acceptUnvalidated);
    void onStartNattSocketKeepalive(int slot, int intervalDurationMs,
        in NattKeepalivePacketData packetData);
    void onStartTcpSocketKeepalive(int slot, int intervalDurationMs,
        in TcpKeepalivePacketData packetData);
    void onStopSocketKeepalive(int slot);
    void onSignalStrengthThresholdsUpdated(in int[] thresholds);
    void onPreventAutomaticReconnect();
    void onAddNattKeepalivePacketFilter(int slot,
        in NattKeepalivePacketData packetData);
    void onAddTcpKeepalivePacketFilter(int slot,
        in TcpKeepalivePacketData packetData);
    void onRemoveKeepalivePacketFilter(int slot);
    void onQosFilterCallbackRegistered(int qosCallbackId, in QosFilterParcelable filterParcel);
    void onQosCallbackUnregistered(int qosCallbackId);
    void onNetworkCreated();
</code></pre>
<p><strong>å…³é”®å›è°ƒ</strong>:</p>
<ul>
<li><strong>onValidationStatusChanged</strong>: ç½‘ç»œéªŒè¯ç»“æœ(æ˜¯å¦æœ‰çœŸå®äº’è”ç½‘)</li>
<li><strong>onBandwidthUpdateRequested</strong>: è¯·æ±‚æ›´æ–°å¸¦å®½ä¿¡æ¯</li>
<li><strong>onDisconnected</strong>: ConnectivityService ä¸»åŠ¨æ–­å¼€ç½‘ç»œ</li>
<li><strong>onStartSocketKeepalive</strong>: å¯åŠ¨ Socket ä¿æ´»åŒ…</li>
<li><strong>onNetworkCreated</strong>: åŸç”Ÿç½‘ç»œå·²åˆ›å»ºå®Œæˆ</li>
</ul>
<h4 data-id="heading-11">4. <strong>Keepalive æ”¯æŒ</strong> ğŸ’“</h4>
<pre><code class="hljs language-68:87:packages_modules_Connectivity/framework/src/android/net/NetworkAgent.java" lang="68:87:packages_modules_Connectivity/framework/src/android/net/NetworkAgent.java">/**
 * This class supports methods to start and stop sending keepalive packets.
 * Keepalive packets are typically sent at periodic intervals over a network
 * with NAT when there is no other traffic to avoid the network forcefully
 * closing the connection. NetworkAgents that manage technologies that
 * have hardware support for keepalive should implement the related
 * methods to save battery life. NetworkAgent that cannot get support
 * without waking up the CPU should not, as this would be prohibitive in
 * terms of battery - these agents should simply not override the related
 * methods, which results in the implementation returning
 * {@link SocketKeepalive.ERROR_UNSUPPORTED} as appropriate.
 *
 * Keepalive packets need to be sent at relatively frequent intervals
 * (a few seconds to a few minutes). As the contents of keepalive packets
 * depend on the current network status, hardware needs to be configured
 * to send them and has a limited amount of memory to do so. The HAL
 * formalizes this as slots that an implementation can configure to send
 * the correct packets. Devices typically have a small number of slots
 * per radio technology, and the specific number of slots for each
 * technology is specified in configuration files.
</code></pre>
<p>ç”¨äº NAT ç©¿é€å’Œè¿æ¥ä¿æŒ,ç‰¹åˆ«æ˜¯ç§»åŠ¨æ•°æ®ç½‘ç»œã€‚</p>
<h3 data-id="heading-12">å››ã€Telephony ä¸­çš„å…·ä½“å®ç° ğŸ“±</h3>
<pre><code class="hljs language-44:58:frameworks_opt_telephony/src/java/com/android/internal/telephony/data/TelephonyNetworkAgent.java" lang="44:58:frameworks_opt_telephony/src/java/com/android/internal/telephony/data/TelephonyNetworkAgent.java">/**
 * TelephonyNetworkAgent class represents a single PDN (Packet Data Network). It is an agent
 * for telephony to propagate network related information to the connectivity service. It always
 * has an associated parent {@link DataNetwork}.
 */
public class TelephonyNetworkAgent extends NetworkAgent {
    private final String mLogTag;
    private final LocalLog mLocalLog = new LocalLog(128);

    /** Max unregister network agent delay. */
    private static final int NETWORK_AGENT_TEARDOWN_DELAY_MS = 5_000;

    /** The parent data network. */
    @NonNull
    private final DataNetwork mDataNetwork;
</code></pre>
<p><strong>TelephonyNetworkAgent</strong> ä»£è¡¨ä¸€ä¸ª PDN (Packet Data Network),ä¾‹å¦‚:</p>
<ul>
<li>Internet PDN</li>
<li>IMS PDN (ç”¨äº VoLTE)</li>
<li>MMS PDN</li>
</ul>
<p>æ¯ä¸ª PDN æœ‰ç‹¬ç«‹çš„ NetworkAgent å®ä¾‹ã€‚</p>
<h3 data-id="heading-13">äº”ã€å·¥ä½œæµç¨‹ç¤ºä¾‹ ğŸ”„</h3>
<h4 data-id="heading-14">åœºæ™¯: ç§»åŠ¨æ•°æ®è¿æ¥å»ºç«‹</h4>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> DataNetwork åˆ›å»º TelephonyNetworkAgent
   â†“
<span class="hljs-bullet">2.</span> agent.register()
   â†’ å‘ ConnectivityService æ³¨å†Œ
   â†“
<span class="hljs-bullet">3.</span> ConnectivityService åˆ›å»º NetworkAgentInfo
   â†’ åˆ†é… Network ID
   â†“
<span class="hljs-bullet">4.</span> Modem è¿”å› DataCallResponse (IPã€DNS ç­‰)
   â†“
<span class="hljs-bullet">5.</span> agent.sendLinkProperties(lp)
   â†’ ä¸ŠæŠ¥ IP/DNS/è·¯ç”±
   â†“
<span class="hljs-bullet">6.</span> agent.sendNetworkCapabilities(nc)
   â†’ ä¸ŠæŠ¥ INTERNET èƒ½åŠ›
   â†“
<span class="hljs-bullet">7.</span> agent.markConnected()
   â†’ çŠ¶æ€å˜ä¸º CONNECTED
   â†“
<span class="hljs-bullet">8.</span> NetworkMonitor éªŒè¯ç½‘ç»œ
   â†“
<span class="hljs-bullet">9.</span> agent.onValidationStatusChanged(VALID)
   â†’ æ”¶åˆ°éªŒè¯æˆåŠŸé€šçŸ¥
   â†“
<span class="hljs-bullet">10.</span> ConnectivityService å°†å…¶è®¾ä¸ºé»˜è®¤ç½‘ç»œ
<span class="hljs-code">    â†“
11. åº”ç”¨å¯ä»¥ä½¿ç”¨è¯¥ç½‘ç»œ
</span></code></pre>
<h4 data-id="heading-15">åœºæ™¯: æ•°æ®æ–­å¼€æ¸…ç†</h4>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> DataNetwork.tearDown(TEAR<span class="hljs-emphasis">_DOWN_</span>REASON<span class="hljs-emphasis">_DATA_</span>DISABLED)
   â†“
<span class="hljs-bullet">2.</span> agent.unregister()
   â†’ å‘é€ DISCONNECTED çŠ¶æ€
   â†“
<span class="hljs-bullet">3.</span> ConnectivityService æ”¶åˆ°é€šçŸ¥
   â†“
<span class="hljs-bullet">4.</span> ConnectivityService.disconnectAndDestroyNetwork(nai)
   â†’ æ¸…ç†ç½‘ç»œèµ„æº
   â†“
<span class="hljs-bullet">5.</span> agent.onNetworkDestroyed()
   â†’ å›è°ƒé€šçŸ¥åŸç”Ÿç½‘ç»œå·²é”€æ¯
   â†“
<span class="hljs-bullet">6.</span> DataNetwork æ¸…ç†å®Œæˆ
</code></pre>
<h3 data-id="heading-16">å…­ã€å…³é”®ç‰¹æ€§ â­</h3>

































<table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>ä¸€æ¬¡æ€§ä½¿ç”¨</strong></td><td>ç½‘ç»œæ–­å¼€åä¸èƒ½é‡ç”¨,å¿…é¡»åˆ›å»ºæ–°å®ä¾‹</td></tr><tr><td><strong>åŒå‘é€šä¿¡</strong></td><td>æ—¢ä¸ŠæŠ¥çŠ¶æ€ä¹Ÿæ¥æ”¶æŒ‡ä»¤</td></tr><tr><td><strong>å¼‚æ­¥æ¶ˆæ¯</strong></td><td>åŸºäº Handler æœºåˆ¶çš„å¼‚æ­¥é€šä¿¡</td></tr><tr><td><strong>å¤šå®ä¾‹å…±å­˜</strong></td><td>ä¸€ä¸ª bearer å¯ä»¥æœ‰å¤šä¸ª Agent (å¦‚ Telephony åŒæ—¶æœ‰ Internet + IMS)</td></tr><tr><td><strong>è¯„åˆ†æœºåˆ¶</strong></td><td>å½±å“é»˜è®¤ç½‘ç»œé€‰æ‹©</td></tr><tr><td><strong>ç”Ÿå‘½å‘¨æœŸæ˜ç¡®</strong></td><td>register â†’ markConnected â†’ unregister</td></tr></tbody></table>
<h3 data-id="heading-17">ä¸ƒã€ä¸ä½ ä¹‹å‰çœ‹çš„ç»„ä»¶å…³è” ğŸ”—</h3>

























<table><thead><tr><th>ç»„ä»¶</th><th>ä¸ NetworkAgent çš„å…³ç³»</th></tr></thead><tbody><tr><td><strong>DataNetwork</strong></td><td>åˆ›å»ºå¹¶ç®¡ç† TelephonyNetworkAgent</td></tr><tr><td><strong>ConnectivityService</strong></td><td>æ¥æ”¶ Agent ä¸ŠæŠ¥,ç®¡ç†æ‰€æœ‰ Agent</td></tr><tr><td><strong>NetworkManagementService</strong></td><td>Agent ä¸ŠæŠ¥çš„ LinkProperties ç”¨äºé…ç½® Netd</td></tr><tr><td><strong>GsmCdmaPhone</strong></td><td>Phone çš„ DataNetworkController åˆ›å»º DataNetwork,è¿›è€Œåˆ›å»º Agent</td></tr></tbody></table>
<h3 data-id="heading-18">æ€»ç»“ ğŸ¯</h3>
<p><strong>NetworkAgent æ˜¯ç½‘ç»œä¸–ç•Œçš„"å¤–äº¤å®˜"</strong>:</p>
<ul>
<li><strong>å¯¹å¤–(ConnectivityService)</strong>: ä»£è¡¨åº•å±‚ç½‘ç»œ,ä¸ŠæŠ¥çŠ¶æ€ã€æ¥æ”¶æŒ‡ä»¤</li>
<li><strong>å¯¹å†…(DataNetwork/WiFi)</strong>: å°†ç³»ç»Ÿéœ€æ±‚ä¼ é€’ç»™åº•å±‚å®ç°</li>
<li><strong>æ ¸å¿ƒä»·å€¼</strong>: ç»Ÿä¸€æŠ½è±¡,è§£è€¦ç½‘ç»œæä¾›è€…å’Œç³»ç»Ÿæ¡†æ¶</li>
</ul>
<p>æ²¡æœ‰ NetworkAgent,ConnectivityService å°±æ— æ³•çŸ¥é“åº•å±‚ç½‘ç»œçš„å­˜åœ¨å’ŒçŠ¶æ€,åº”ç”¨ä¹Ÿå°±æ— æ³•ä½¿ç”¨ç½‘ç»œ! ğŸŒâœ¨</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£ Android WebView çš„ onShowCustomView å›è°ƒ]]></title>    <link>https://juejin.cn/post/7602579671476092947</link>    <guid>https://juejin.cn/post/7602579671476092947</guid>    <pubDate>2026-02-04T09:44:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602579671476092947" data-draft-id="7602579671476060179" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£ Android WebView çš„ onShowCustomView å›è°ƒ"/> <meta itemprop="keywords" content="Android,APP,WebView"/> <meta itemprop="datePublished" content="2026-02-04T09:44:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Gemini001"/> <meta itemprop="url" content="https://juejin.cn/user/2333635831676704"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£ Android WebView çš„ onShowCustomView å›è°ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2333635831676704/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Gemini001
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T09:44:44.000Z" title="Wed Feb 04 2026 09:44:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ·±åº¦è§£æ Android WebView å…¨å±æœºåˆ¶ï¼šonShowCustomView ä¸æ²‰æµ¸å¼é€‚é…æ–¹æ¡ˆ</h2>
<p>åœ¨å¼€å‘ Android WebView åº”ç”¨æ—¶ï¼Œå®ç°ç½‘é¡µè§†é¢‘çš„å…¨å±æ’­æ”¾æ˜¯ä¸€ä¸ªå¸¸è§ä¸”å…·æœ‰æŒ‘æˆ˜æ€§çš„éœ€æ±‚ã€‚å…¶æ ¸å¿ƒéš¾ç‚¹ä¸ä»…åœ¨äºå¤„ç†å…¨å±è§†å›¾çš„æŒ‚è½½ï¼Œè¿˜æ¶‰åŠåŸç”Ÿå¸ƒå±€å±æ€§ï¼ˆå¦‚Â <code>fitsSystemWindows</code>ï¼‰å¸¦æ¥çš„é€‚é…æ®‹ç•™é—®é¢˜ï¼Œä»¥åŠæ²‰æµ¸å¼çŠ¶æ€æ ã€å¯¼èˆªæ ã€æ¨ªç«–å±åˆ‡æ¢ç­‰å¤æ‚åœºæ™¯çš„ç»¼åˆåè°ƒã€‚</p>
<p>æœ¬æ–‡å°†ä»Â <strong>æœºåˆ¶åŸç† â†’ é€‚é…é™·é˜± â†’ è§£å†³æ–¹æ¡ˆ â†’ è¿›é˜¶å®è·µ</strong>â€‹ å››ä¸ªç»´åº¦ï¼Œå…¨é¢å‰–æ WebView å…¨å±æœºåˆ¶ï¼Œå¹¶æä¾›ä¸€å¥—ç¨³å®šå¯é çš„æ²‰æµ¸å¼é€‚é…æ–¹æ¡ˆã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€æ ¸å¿ƒæœºåˆ¶ï¼šä»€ä¹ˆæ˜¯Â <code>onShowCustomView</code>ï¼Ÿ</h3>
<h4 data-id="heading-2">1. æ–¹æ³•å®šä¹‰ä¸æœ¬è´¨</h4>
<p><code>onShowCustomView(View view, CustomViewCallback callback)</code>æ˜¯Â <code>WebChromeClient</code>ç±»ä¸­çš„ä¸€ä¸ªé‡è¦å›è°ƒæ–¹æ³•ã€‚</p>
<ul>
<li><strong>æœ¬è´¨</strong>ï¼šå®ƒæ˜¯ä¸€ä¸ª <strong>â€œå§”æ‰˜å›è°ƒâ€</strong> ã€‚å½“ç½‘é¡µå†…éƒ¨è¯·æ±‚è¿›å…¥å…¨å±æ¨¡å¼æ—¶ï¼ŒWebView å¹¶ä¸ç›´æ¥æ”¹å˜è‡ªèº«å¤§å°æˆ–å±‚çº§ï¼Œè€Œæ˜¯å°†ä»£è¡¨å…¨å±å†…å®¹çš„è§†å›¾ï¼ˆ<code>view</code>ï¼‰äº¤ç»™å®¿ä¸» Activityã€‚Activity å¿…é¡»è´Ÿè´£å°†è¯¥è§†å›¾æ·»åŠ åˆ°ä¸€ä¸ªèƒ½å¤Ÿè¦†ç›–æ•´ä¸ªçª—å£çš„å®¹å™¨ä¸­ï¼Œå¹¶ç®¡ç†å…¶ç”Ÿå‘½å‘¨æœŸã€‚</li>
<li><strong>è®¾è®¡æ„å›¾</strong>ï¼šå°†å…¨å±æ§åˆ¶æƒä» WebView ç§»äº¤è‡³åŸç”Ÿå±‚ï¼Œä½¿å¼€å‘è€…å¯ä»¥çµæ´»æ§åˆ¶å…¨å±è§†å›¾çš„å±•ç¤ºæ–¹å¼ï¼ˆå¦‚åŠ¨ç”»ã€æ¨ªå±ã€éšè—ç³»ç»ŸUIç­‰ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-3">2. è§¦å‘åœºæ™¯ï¼ˆä½•æ—¶è¢«è°ƒç”¨ï¼Ÿï¼‰</h4>
<p>è¯¥æ–¹æ³•ä»…åœ¨ç½‘é¡µä¸»åŠ¨å‘èµ·â€œå…¨å±è¯·æ±‚â€æ—¶è§¦å‘ï¼Œå…¸å‹åœºæ™¯åŒ…æ‹¬ï¼š</p>





















<table><thead><tr><th>åœºæ™¯</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>âœ… HTML5 è§†é¢‘å…¨å±</td><td>ç”¨æˆ·ç‚¹å‡»Â <code>&lt;video&gt;</code>æ§ä»¶ä¸­çš„å…¨å±æŒ‰é’®ï¼ˆå¦‚ YouTubeã€Bilibili H5 æ’­æ”¾å™¨ï¼‰ã€‚</td></tr><tr><td>âœ… JavaScript Fullscreen API</td><td>ç½‘é¡µè„šæœ¬è°ƒç”¨Â <code>element.requestFullscreen()</code>ï¼Œå¸¸è§äº H5 æ¸¸æˆã€åœ°å›¾ï¼ˆå¦‚é«˜å¾·åœ°å›¾å…¨å±ï¼‰ã€è‡ªå®šä¹‰æ’­æ”¾å™¨ç­‰ã€‚</td></tr><tr><td>âœ… WebXR / VR æ¨¡å¼</td><td>ç½‘é¡µè¿›å…¥è™šæ‹Ÿç°å®æˆ–å…¨æ™¯æ¨¡å¼ï¼ˆå¦‚ A-Frameã€Three.js çš„ VR åœºæ™¯ï¼‰ã€‚</td></tr></tbody></table>
<blockquote>
<p>âš ï¸Â <strong>æ³¨æ„</strong>ï¼šä»¥ä¸‹è¡Œä¸º<strong>ä¸ä¼š</strong>è§¦å‘Â <code>onShowCustomView</code>ï¼š</p>
<ul>
<li>æ™®é€šé¡µé¢æ»šåŠ¨æˆ–ç¼©æ”¾</li>
<li>è½¯é”®ç›˜å¼¹å‡º</li>
<li>åŸç”Ÿ Dialogã€PopupWindow æ˜¾ç¤º</li>
<li>é¡µé¢è·³è½¬æˆ–åŠ è½½</li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-4">äºŒã€é€‚é…é™·é˜±ï¼š<code>fitsSystemWindows</code>çš„é™æ€å†²çª</h3>
<p>ä¸ºäº†å®ç°æ²‰æµ¸å¼çŠ¶æ€æ ï¼ˆå¦‚é€æ˜çŠ¶æ€æ ã€å†…å®¹å»¶ä¼¸åˆ°çŠ¶æ€æ ä¸‹æ–¹ï¼‰ï¼Œå¼€å‘è€…å¸¸åœ¨æ ¹å¸ƒå±€è®¾ç½®ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">android:<span class="hljs-attr">fitsSystemWindows</span>=<span class="hljs-string">"true"</span>
</code></pre>
<p>ä½†åœ¨Â <code>onShowCustomView</code>ä¸­ï¼Œå³ä½¿åŠ¨æ€è®¾ç½®Â <code>rootView.setFitsSystemWindows(false)</code>ï¼Œå…¨å±è§†å›¾é¡¶éƒ¨ä»å¯èƒ½æ®‹ç•™çŠ¶æ€æ é«˜åº¦çš„ç©ºç™½æˆ–é»‘è¾¹ï¼Œ<strong>æ— æ³•å®ç°çœŸæ­£çš„å…¨å±è¦†ç›–</strong>ã€‚</p>
<h4 data-id="heading-5">1. ç°è±¡å¤ç°</h4>
<ul>
<li>è¿›å…¥å…¨å±åï¼Œè§†é¢‘ä¸Šæ–¹å‡ºç°ä¸€æ¡å›ºå®šé«˜åº¦çš„ç©ºç™½åŒºåŸŸï¼ˆé€šå¸¸ä¸º 24dp~72dpï¼Œå–å†³äºè®¾å¤‡çŠ¶æ€æ é«˜åº¦ï¼‰ã€‚</li>
<li>èƒŒæ™¯ä¸ºé»‘è‰²æˆ–ä¸»é¢˜è‰²ï¼Œç ´åæ²‰æµ¸æ„Ÿã€‚</li>
<li><code>setFitsSystemWindows(false)</code>æ— æ•ˆï¼ŒPadding æœªè¢«æ¸…é™¤ã€‚</li>
</ul>
<h4 data-id="heading-6">2. å†²çªæ ¹æºæ·±åº¦è§£æ</h4>
<h5 data-id="heading-7">ï¼ˆ1ï¼‰<code>fitsSystemWindows</code>çš„å·¥ä½œæœºåˆ¶</h5>
<ul>
<li>å½“Â <code>android:fitsSystemWindows="true"</code>æ—¶ï¼Œç³»ç»Ÿåœ¨Â <strong>å¸ƒå±€åˆ†å‘é˜¶æ®µ</strong>ï¼ˆé€šè¿‡Â <code>View.dispatchApplyWindowInsets()</code>ï¼‰ä¼šç›‘å¬Â <code>WindowInsets</code>ï¼ˆå¦‚çŠ¶æ€æ ã€å¯¼èˆªæ é«˜åº¦ï¼‰ã€‚</li>
<li>ç³»ç»Ÿä¼šè‡ªåŠ¨ä¸ºå½“å‰ View è®¾ç½®Â <code>paddingTop</code>ã€<code>paddingBottom</code>ç­‰å€¼ï¼Œä»¥é¿å…å†…å®¹è¢«ç³»ç»Ÿæ é®æŒ¡ã€‚</li>
<li>æ­¤è¿‡ç¨‹æ˜¯<strong>ä¸€æ¬¡æ€§è®¡ç®—å¹¶åº”ç”¨</strong>çš„ï¼Œä¸”é»˜è®¤ä¸ä¼šéšÂ <code>fitsSystemWindows</code>æ ‡å¿—ä½å˜åŒ–è€Œè‡ªåŠ¨æ’¤é”€ã€‚</li>
</ul>
<h5 data-id="heading-8">ï¼ˆ2ï¼‰<code>setFitsSystemWindows(false)</code>çš„å±€é™æ€§</h5>
<ul>
<li>è°ƒç”¨Â <code>setFitsSystemWindows(false)</code>ä»…ä¿®æ”¹äº† View å†…éƒ¨çš„Â <code>mFitSystemWindows</code>æ ‡å¿—ä½ã€‚</li>
<li>å®ƒå‘Šè¯‰ç³»ç»Ÿï¼šâ€œ<strong>åç»­ä¸å†ä¸ºæˆ‘åˆ†å‘ WindowInsets</strong>â€ï¼Œä½†<strong>ä¸ä¼šæ¸…é™¤å·²è®¾ç½®çš„ Padding</strong>ã€‚</li>
<li>å› æ­¤ï¼Œå³ä½¿æ ‡å¿—ä½è®¾ä¸ºÂ <code>false</code>ï¼ŒåŸæœ‰çš„Â <code>paddingTop</code>ä¾ç„¶å­˜åœ¨ï¼Œå¯¼è‡´å…¨å±è§†å›¾è¢«â€œé¡¶èµ·â€ã€‚</li>
</ul>
<h5 data-id="heading-9">ï¼ˆ3ï¼‰è§†è§‰æ®‹ç•™çš„æœ¬è´¨</h5>
<ul>
<li>å…¨å±è§†å›¾ï¼ˆ<code>customView</code>ï¼‰è¢«æ·»åŠ åˆ°Â <code>video_container</code>ä¸­ï¼Œè€ŒÂ <code>video_container</code>åˆä½äºÂ <code>rootLayout</code>ä¹‹ä¸‹ã€‚</li>
<li>è‹¥Â <code>rootLayout</code>ä¿ç•™äº†Â <code>paddingTop</code>ï¼Œå…¶æ‰€æœ‰å­ Viewï¼ˆåŒ…æ‹¬å…¨å±å®¹å™¨ï¼‰éƒ½ä¼šç»§æ‰¿è¯¥åç§»é‡ï¼Œé€ æˆè§†è§‰ä¸Šçš„â€œç¼©è¿›â€ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-10">ä¸‰ã€è§£å†³æ–¹æ¡ˆï¼šæœ€ä½³å®è·µä¸ä»£ç å®ç°</h3>
<h4 data-id="heading-11">1. å¸ƒå±€ç»“æ„è®¾è®¡</h4>
<p>å»ºè®®åœ¨ Activity å¸ƒå±€ä¸­é¢„ç•™ä¸€ä¸ª<strong>é¡¶å±‚å…¨å±å®¹å™¨</strong>ï¼Œç”¨äºæ‰¿è½½ç½‘é¡µä¼ å…¥çš„å…¨å±è§†å›¾ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- activity_main.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">RelativeLayout</span> 
    <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/root_layout"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:fitsSystemWindows</span>=<span class="hljs-string">"true"</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æ­£å¸¸ä¸šåŠ¡å¸ƒå±€ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">layout</span>=<span class="hljs-string">"@layout/layout_title_bar"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">WebView</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/web_view"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- å…¨å±å®¹å™¨ï¼šåˆå§‹éšè—ï¼Œç½®äºæœ€ä¸Šå±‚ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">FrameLayout</span>
        <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/video_container"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_alignParentTop</span>=<span class="hljs-string">"true"</span>
        <span class="hljs-attr">android:layout_alignParentStart</span>=<span class="hljs-string">"true"</span>
        <span class="hljs-attr">android:visibility</span>=<span class="hljs-string">"gone"</span>
        <span class="hljs-attr">android:background</span>=<span class="hljs-string">"#000000"</span> /&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">RelativeLayout</span>&gt;</span>
</code></pre>
<blockquote>
<p>ğŸ’¡ æç¤ºï¼š<code>video_container</code>å¿…é¡»æ˜¯Â <code>RelativeLayout</code>çš„ç›´æ¥å­ Viewï¼Œä¸”åˆå§‹ä¸å¯è§ï¼Œé¿å…é®æŒ¡ä¸»ç•Œé¢ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-12">2. æ ¸å¿ƒä»£ç å®ç°ï¼ˆJavaï¼‰</h4>
<pre><code class="hljs language-scss" lang="scss">public class WebViewFullScreenActivity extends AppCompatActivity {

    private WebView webView;
    private RelativeLayout rootLayout;
    private FrameLayout videoContainer;
    private View titleBar;
    private View customView;
    private WebChromeClient<span class="hljs-selector-class">.CustomViewCallback</span> customViewCallback;

    <span class="hljs-keyword">@Override</span>
    protected void onCreate(Bundle savedInstanceState) {
        super<span class="hljs-selector-class">.onCreate</span>(savedInstanceState);
        <span class="hljs-built_in">setContentView</span>(R.layout.activity_main);

        <span class="hljs-comment">// åˆå§‹åŒ–è§†å›¾</span>
        rootLayout = <span class="hljs-built_in">findViewById</span>(R.id.root_layout);
        webView = <span class="hljs-built_in">findViewById</span>(R.id.web_view);
        videoContainer = <span class="hljs-built_in">findViewById</span>(R.id.video_container);
        titleBar = <span class="hljs-built_in">findViewById</span>(R.id.title_bar);

        <span class="hljs-built_in">setupWebView</span>();
    }

    private void <span class="hljs-built_in">setupWebView</span>() {
        WebSettings settings = webView<span class="hljs-selector-class">.getSettings</span>();
        settings<span class="hljs-selector-class">.setJavaScriptEnabled</span>(true);
        settings<span class="hljs-selector-class">.setDomStorageEnabled</span>(true);
        settings<span class="hljs-selector-class">.setMediaPlaybackRequiresUserGesture</span>(false); <span class="hljs-comment">// å…è®¸è‡ªåŠ¨æ’­æ”¾</span>

        webView<span class="hljs-selector-class">.setWebChromeClient</span>(new WebChromeClient() {
            <span class="hljs-keyword">@Override</span>
            public void onShowCustomView(View view, CustomViewCallback callback) {
                <span class="hljs-comment">// é˜²æ­¢é‡å¤è¿›å…¥å…¨å±</span>
                if (customView != null) {
                    callback<span class="hljs-selector-class">.onCustomViewHidden</span>();
                    return;
                }

                customView = view;
                customViewCallback = callback;

                <span class="hljs-comment">// === å…³é”®é€‚é…é€»è¾‘ï¼šæ¸…é™¤ fitsSystemWindows æ®‹ç•™ Padding ===</span>
                if (rootLayout != null) {
                    <span class="hljs-comment">// 1. å…³é—­ fitsSystemWindows å¤„ç†</span>
                    rootLayout<span class="hljs-selector-class">.setFitsSystemWindows</span>(false);
                    <span class="hljs-comment">// 2. æ‰‹åŠ¨æ¸…é™¤å·²è®¾ç½®çš„ Paddingï¼ˆæ ¸å¿ƒï¼ï¼‰</span>
                    rootLayout<span class="hljs-selector-class">.setPadding</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
                    <span class="hljs-comment">// 3. å¼ºåˆ¶é‡ç»˜å¸ƒå±€ï¼ˆç¡®ä¿ç«‹å³ç”Ÿæ•ˆï¼‰</span>
                    rootLayout<span class="hljs-selector-class">.requestLayout</span>();
                }

                <span class="hljs-comment">// éšè—æ ‡é¢˜æ </span>
                if (titleBar != null) titleBar<span class="hljs-selector-class">.setVisibility</span>(View.GONE);

                <span class="hljs-comment">// éšè—ç³»ç»Ÿ UIï¼ˆçŠ¶æ€æ ã€å¯¼èˆªæ ï¼‰</span>
                <span class="hljs-built_in">hideSystemUI</span>();

                <span class="hljs-comment">// æ·»åŠ å…¨å±è§†å›¾å¹¶å±•ç¤º</span>
                videoContainer<span class="hljs-selector-class">.addView</span>(view, new FrameLayout.LayoutParams(
                        ViewGroup.LayoutParams.MATCH_PARENT,
                        ViewGroup.LayoutParams.MATCH_PARENT));
                videoContainer<span class="hljs-selector-class">.setVisibility</span>(View.VISIBLE);

                <span class="hljs-comment">// å¯é€‰ï¼šé”å®šæ¨ªå±</span>
                <span class="hljs-built_in">setRequestedOrientation</span>(ActivityInfo.SCREEN_ORIENTATION_SENSOR_LANDSCAPE);
            }

            <span class="hljs-keyword">@Override</span>
            public void onHideCustomView() {
                if (customView == null) return;

                <span class="hljs-comment">// === æ¢å¤å¸ƒå±€å±æ€§ ===</span>
                if (rootLayout != null) {
                    rootLayout<span class="hljs-selector-class">.setFitsSystemWindows</span>(true);
                    <span class="hljs-comment">// ç³»ç»Ÿå°†åœ¨ä¸‹ä¸€æ¬¡ Insets åˆ†å‘æ—¶é‡æ–°è®¡ç®— Padding</span>
                }

                <span class="hljs-comment">// æ˜¾ç¤ºæ ‡é¢˜æ </span>
                if (titleBar != null) titleBar<span class="hljs-selector-class">.setVisibility</span>(View.VISIBLE);

                <span class="hljs-comment">// æ¢å¤ç³»ç»Ÿ UI</span>
                <span class="hljs-built_in">showSystemUI</span>();

                <span class="hljs-comment">// ç§»é™¤å…¨å±è§†å›¾</span>
                videoContainer<span class="hljs-selector-class">.setVisibility</span>(View.GONE);
                videoContainer<span class="hljs-selector-class">.removeView</span>(customView);
                customViewCallback<span class="hljs-selector-class">.onCustomViewHidden</span>();
                customView = null;
                customViewCallback = null;

                <span class="hljs-comment">// æ¢å¤ç«–å±</span>
                <span class="hljs-built_in">setRequestedOrientation</span>(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
            }
        });

        <span class="hljs-comment">// åŠ è½½æµ‹è¯•é¡µé¢</span>
        webView<span class="hljs-selector-class">.loadUrl</span>("https://example.com/fullscreen-video.html");
    }

    <span class="hljs-comment">// éšè—ç³»ç»ŸçŠ¶æ€æ å’Œå¯¼èˆªæ </span>
    private void <span class="hljs-built_in">hideSystemUI</span>() {
        View decorView = <span class="hljs-built_in">getWindow</span>()<span class="hljs-selector-class">.getDecorView</span>();
        decorView<span class="hljs-selector-class">.setSystemUiVisibility</span>(
                View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY
                        | View.SYSTEM_UI_FLAG_FULLSCREEN
                        | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION
                        | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN
                        | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION
                        | View.SYSTEM_UI_FLAG_LAYOUT_STABLE
        );
    }

    <span class="hljs-comment">// æ¢å¤ç³»ç»Ÿ UI</span>
    private void <span class="hljs-built_in">showSystemUI</span>() {
        View decorView = <span class="hljs-built_in">getWindow</span>()<span class="hljs-selector-class">.getDecorView</span>();
        decorView<span class="hljs-selector-class">.setSystemUiVisibility</span>(View.SYSTEM_UI_FLAG_LAYOUT_STABLE);
    }

    <span class="hljs-comment">// æ‹¦æˆªè¿”å›é”®ï¼šä¼˜å…ˆé€€å‡ºå…¨å±</span>
    <span class="hljs-keyword">@Override</span>
    public void onBackPressed() {
        if (customView != null) {
            webView<span class="hljs-selector-class">.getWebChromeClient</span>()<span class="hljs-selector-class">.onHideCustomView</span>();
        } else {
            super<span class="hljs-selector-class">.onBackPressed</span>();
        }
    }

    <span class="hljs-keyword">@Override</span>
    protected void onDestroy() {
        if (webView != null) {
            webView<span class="hljs-selector-class">.destroy</span>();
        }
        super<span class="hljs-selector-class">.onDestroy</span>();
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-13">å››ã€è¿›é˜¶æ³¨æ„äº‹é¡¹ä¸ä¼˜åŒ–ç­–ç•¥</h3>
<h4 data-id="heading-14">1. æ²‰æµ¸å¼çŠ¶æ€æ åº“çš„ååŒï¼ˆå¦‚ ImmersionBarï¼‰</h4>
<p>è‹¥ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgyf-dev%2FImmersionBar" target="_blank" title="https://github.com/gyf-dev/ImmersionBar" ref="nofollow noopener noreferrer">ImmersionBar</a>ï¼‰ï¼Œéœ€åœ¨Â <code>onShowCustomView</code>ä¸­è°ƒç”¨å…¶ API ç»Ÿä¸€ç®¡ç†çŠ¶æ€æ æ˜¾éšï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¿›å…¥å…¨å±</span>
ImmersionBar.<span class="hljs-keyword">with</span>(<span class="hljs-keyword">this</span>)
    .fitsSystemWindows(<span class="hljs-literal">false</span>)
    .<span class="hljs-keyword">init</span>();

<span class="hljs-comment">// é€€å‡ºå…¨å±</span>
ImmersionBar.<span class="hljs-keyword">with</span>(<span class="hljs-keyword">this</span>)
    .fitsSystemWindows(<span class="hljs-literal">true</span>)
    .statusBarDarkFont(<span class="hljs-literal">true</span>) <span class="hljs-comment">// æ ¹æ®ä¸»é¢˜è°ƒæ•´</span>
    .<span class="hljs-keyword">init</span>();
</code></pre>
<blockquote>
<p>âœ… ä¼˜åŠ¿ï¼šé¿å…æ‰‹åŠ¨æ“ä½œÂ <code>WindowInsets</code>çš„å¤æ‚æ€§ï¼Œå…¼å®¹æ›´å¤š ROMã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-15">2. æ¨ªç«–å±ä¸å±å¹•æ—‹è½¬ç®¡ç†</h4>
<ul>
<li><strong>å¼ºåˆ¶æ¨ªå±</strong>ï¼šåœ¨Â <code>onShowCustomView</code>ä¸­è°ƒç”¨Â <code>setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE)</code>ã€‚</li>
<li><strong>æ¢å¤æ–¹å‘</strong>ï¼šåœ¨Â <code>onHideCustomView</code>ä¸­æ¢å¤ä¸ºÂ <code>SCREEN_ORIENTATION_PORTRAIT</code>æˆ–Â <code>SCREEN_ORIENTATION_UNSPECIFIED</code>ã€‚</li>
<li><strong>é…ç½®æ”¯æŒ</strong>ï¼šåœ¨Â <code>AndroidManifest.xml</code>ä¸­ä¸º Activity æ·»åŠ ï¼š</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">android:<span class="hljs-attr">configChanges</span>=<span class="hljs-string">"orientation|screenSize|keyboardHidden"</span>
</code></pre>
<p>é¿å…æ—‹è½¬æ—¶é‡å»º Activityã€‚</p>
<hr/>
<h4 data-id="heading-16">3. ç¡¬ä»¶åŠ é€Ÿä¸æ¸²æŸ“æ€§èƒ½</h4>
<ul>
<li>ç¡®ä¿ Activity å¯ç”¨ç¡¬ä»¶åŠ é€Ÿï¼ˆé»˜è®¤å¼€å¯ï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">&lt;application android:<span class="hljs-attr">hardwareAccelerated</span>=<span class="hljs-string">"true"</span> ... &gt;
</code></pre>
<ul>
<li>è‹¥é‡åˆ°é»‘å±æˆ–å¡é¡¿ï¼Œå¯å°è¯•ä¸ºÂ <code>videoContainer</code>æˆ–å…¶çˆ¶å¸ƒå±€è®¾ç½®ï¼š</li>
</ul>
<pre><code class="hljs language-csharp" lang="csharp">videoContainer.setLayerType(View.LAYER_TYPE_HARDWARE, <span class="hljs-literal">null</span>);
</code></pre>
<hr/>
<h4 data-id="heading-17">4. å¤šçª—å£ä¸åˆ†å±é€‚é…ï¼ˆAPI 24+ï¼‰</h4>
<p>åœ¨æ”¯æŒåˆ†å±çš„è®¾å¤‡ä¸Šï¼Œéœ€é¢å¤–å¤„ç†Â <code>onShowCustomView</code>åœ¨åˆ†å±æ¨¡å¼ä¸‹çš„è¡Œä¸ºï¼š</p>
<ul>
<li>æ£€æŸ¥Â <code>isInMultiWindowMode()</code>ï¼Œå†³å®šæ˜¯å¦å…è®¸å…¨å±ã€‚</li>
<li>å¯è€ƒè™‘ç¦ç”¨å…¨å±æˆ–æç¤ºç”¨æˆ·â€œè¯·é€€å‡ºåˆ†å±ä»¥ä½¿ç”¨å…¨å±â€ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-18">5. å®‰å…¨æ€§ä¸æƒé™æ§åˆ¶</h4>
<ul>
<li>è‹¥ç½‘é¡µå†…å®¹æ¥è‡ªä¸å¯ä¿¡æºï¼Œå»ºè®®é™åˆ¶å…¨å±æƒé™æˆ–ä½¿ç”¨Â <code>WebViewAssetLoader</code>åŠ è½½æœ¬åœ°èµ„æºã€‚</li>
<li>é¿å…åœ¨Â <code>onShowCustomView</code>ä¸­æ‰§è¡Œè€—æ—¶æ“ä½œï¼Œé˜²æ­¢ ANRã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-19">äº”ã€æ€»ç»“ï¼šæ„å»ºâ€œæ‰‹åŠ¨å¹²é¢„ + æˆå¯¹æ¢å¤â€çš„é€‚é…æ€ç»´</h3>
<p><code>onShowCustomView</code>æ˜¯ WebView ä¸åŸç”Ÿç³»ç»Ÿäº¤äº’çš„å…³é”®æ¡¥æ¢ï¼Œå°¤å…¶åœ¨å¤„ç† H5 è§†é¢‘ã€æ¸¸æˆã€VR ç­‰å¯Œåª’ä½“åœºæ™¯æ—¶ä¸å¯æˆ–ç¼ºã€‚</p>
<p>é¢å¯¹Â <code>fitsSystemWindows</code>å¼•å‘çš„é€‚é…æ®‹ç•™é—®é¢˜ï¼Œå¼€å‘è€…åº”æ‘’å¼ƒâ€œç³»ç»Ÿä¼šè‡ªåŠ¨æ¸…ç†â€çš„å¹»æƒ³ï¼Œå»ºç«‹ä»¥ä¸‹æ ¸å¿ƒæ„è¯†ï¼š</p>

























<table><thead><tr><th>åŸåˆ™</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ğŸ”§Â <strong>æ‰‹åŠ¨å¹²é¢„ Padding</strong>â€‹</td><td>è¿›å…¥å…¨å±æ—¶å¿…é¡»æ˜¾å¼è°ƒç”¨Â <code>setPadding(0,0,0,0)</code>æ¸…é™¤å†å²æ®‹ç•™ã€‚</td></tr><tr><td>ğŸ”Â <strong>æˆå¯¹æ¢å¤å±æ€§</strong>â€‹</td><td><code>fitsSystemWindows</code>çš„å¼€å…³å¿…é¡»æˆå¯¹å‡ºç°ï¼ˆè¿›å…¥å…³ã€é€€å‡ºå¼€ï¼‰ã€‚</td></tr><tr><td>ğŸ¯Â <strong>ç”Ÿå‘½å‘¨æœŸç»‘å®š</strong>â€‹</td><td>å…¨å±è§†å›¾çš„æ·»åŠ /ç§»é™¤ã€UI æ˜¾éšã€å±å¹•æ–¹å‘åº”ä¸Â <code>customView</code>ç”Ÿå‘½å‘¨æœŸä¸¥æ ¼åŒæ­¥ã€‚</td></tr><tr><td>ğŸ§©Â <strong>åº“ä¸ç³»ç»ŸååŒ</strong>â€‹</td><td>ç»“åˆæ²‰æµ¸å¼åº“ã€WindowInsets ç›‘å¬å™¨ï¼Œæ„å»ºæ›´å¥å£®çš„é€‚é…ä½“ç³»ã€‚</td></tr></tbody></table>
<p>å”¯æœ‰å¦‚æ­¤ï¼Œæ‰èƒ½å®ç°Â <strong>H5 å…¨å±ä½“éªŒä¸åŸç”Ÿæ²‰æµ¸å¼ UI çš„æ— ç¼èåˆ</strong>ï¼Œä¸ºç”¨æˆ·æä¾›æµç•…ã€æ²‰æµ¸ã€ä¸€è‡´çš„è·¨å¹³å°äº¤äº’ä½“éªŒã€‚</p>
<hr/>
<p>âœ…Â <strong>æ¨èé˜…è¯»æ‰©å±•</strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fdevelop%2Fui%2Fviews%2Flayout%2Fedge-to-edge" target="_blank" title="https://developer.android.com/develop/ui/views/layout/edge-to-edge" ref="nofollow noopener noreferrer">Android Developers: System Windows and Insets</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FFullscreen_API" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/Fullscreen_API" ref="nofollow noopener noreferrer">MDN: Fullscreen API</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fandroid%2Fplay-billing-samples%2Ftree%2Fmain%2FClassyTaxiJava" target="_blank" title="https://github.com/android/play-billing-samples/tree/main/ClassyTaxiJava" ref="nofollow noopener noreferrer">Google Samples: WebView Demo</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue-æ·±å…¥æµ…å‡ºVue Diff ç®—æ³•]]></title>    <link>https://juejin.cn/post/7602488966609829926</link>    <guid>https://juejin.cn/post/7602488966609829926</guid>    <pubDate>2026-02-03T13:35:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602488966609829926" data-draft-id="7602464510607343642" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue-æ·±å…¥æµ…å‡ºVue Diff ç®—æ³•"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-03T13:35:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‘ç°ä¸€åªå¤§å‘†ç“œ"/> <meta itemprop="url" content="https://juejin.cn/user/180747382561607"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue-æ·±å…¥æµ…å‡ºVue Diff ç®—æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/180747382561607/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‘ç°ä¸€åªå¤§å‘†ç“œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T13:35:52.000Z" title="Tue Feb 03 2026 13:35:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>åœ¨ Vue çš„å“åº”å¼ç³»ç»Ÿä¸­ï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒVue ä¼šç”Ÿæˆä¸€é¢—æ–°çš„è™šæ‹Ÿ DOM æ ‘ï¼ˆVNode Treeï¼‰ã€‚Diff ç®—æ³•çš„æ ¸å¿ƒä»»åŠ¡å°±æ˜¯é€šè¿‡å¯¹æ¯”æ–°æ—§ä¸¤æ£µæ ‘ï¼Œä»¥<strong>æœ€å°çš„æ€§èƒ½ä»£ä»·</strong>å®ŒæˆçœŸå® DOM çš„æ›´æ–°ã€‚æœ¬æ–‡å°†å¸¦ä½ æ·±åº¦æ‹†è§£ Vue Diff çš„æ ¸å¿ƒæœºåˆ¶ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ Diff ç®—æ³•çš„æ ¸å¿ƒç­–ç•¥</h2>
<p>Vue çš„ Diffç®—æ³•å°±æ˜¯æ¯”è¾ƒdomæ ‘çš„æ–°æ—§èŠ‚ç‚¹ï¼Œä¸€è¾¹æ¯”è¾ƒä¸€è¾¹ç»™çœŸå®domç§»åŠ¨ã€æ’å…¥æˆ–è€…åˆ é™¤èŠ‚ç‚¹ã€‚Diff ç®—æ³•åŸºäºä¸¤ä¸ªåŸºæœ¬å‡è®¾ï¼Œä»è€Œå°†æ—¶é—´å¤æ‚åº¦ä» <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>3</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> é™ä½åˆ°äº† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></span>ï¼š</p>
<ol>
<li>
<p><strong>åŒå±‚æ¯”è¾ƒ</strong>ï¼šç®—æ³•åªä¼šå¯¹åŒä¸€å±‚çº§çš„èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒï¼Œä¸ä¼šè·¨å±‚çº§æ“ä½œã€‚</p>
</li>
<li>
<p><strong>æ·±åº¦ä¼˜å…ˆ</strong>ï¼šé€šè¿‡é€’å½’çš„æ–¹å¼ï¼Œå…ˆå¤„ç†å­èŠ‚ç‚¹ï¼Œå†å¤„ç†çˆ¶èŠ‚ç‚¹ã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-2">äºŒã€ ä¸‰å¤§æ ¸å¿ƒå‡½æ•°è§£æ</h2>
<p>Diff çš„è¿‡ç¨‹ä¸»è¦ç”± <code>patch</code>ã€<code>patchVnode</code> å’Œ <code>updateChildren</code> ä¸‰ä¸ªå‡½æ•°ååŒå®Œæˆã€‚</p>
<h3 data-id="heading-3">1. patch å‡½æ•°ï¼šåŒå±‚æ¯”å¯¹çš„å…¥å£</h3>
<p>è¿™æ˜¯ Diff çš„èµ·ç‚¹ï¼Œå®ƒè´Ÿè´£å†³å®šæ˜¯ç›´æ¥æ›¿æ¢æ•´ä¸ªèŠ‚ç‚¹ï¼Œè¿˜æ˜¯æ·±å…¥æ¯”å¯¹ï¼Œæ¯”è¾ƒç­–ç•¥å¦‚ä¸‹:</p>
<ul>
<li><strong>å¦‚æœæ–°èŠ‚ç‚¹ä¸å­˜åœ¨</strong>ï¼šç›´æ¥åˆ é™¤æ—§èŠ‚ç‚¹ã€‚</li>
<li><strong>å¦‚æœæ–°èŠ‚ç‚¹å­˜åœ¨ï¼Œæ—§èŠ‚ç‚¹ä¸å­˜åœ¨</strong>ï¼šç›´æ¥æ–°å»ºå¹¶æ’å…¥èŠ‚ç‚¹ã€‚</li>
<li><strong>å¦‚æœä¸¤ä¸ªèŠ‚ç‚¹éƒ½å­˜åœ¨ï¼Œä½†èŠ‚ç‚¹ç±»å‹ä¸åŒ</strong>ï¼šè®¤ä¸ºèŠ‚ç‚¹å·²æ”¹å˜ï¼Œé”€æ¯æ—§çš„ï¼Œåˆ›å»ºæ–°çš„ã€‚</li>
<li><strong>å¦‚æœä¸¤ä¸ªèŠ‚ç‚¹éƒ½å­˜åœ¨ï¼Œä¸”èŠ‚ç‚¹ç±»å‹ç›¸åŒ</strong>ï¼šåˆ™è°ƒç”¨ <code>patchVnode</code> ç»§ç»­æ¯”å¯¹</li>
<li>ã€‚</li>
</ul>
<h3 data-id="heading-4">2. patchVnode å‡½æ•°ï¼šå±æ€§ä¸æ–‡æœ¬çš„æ›´æ–°</h3>
<p>å½“ç¡®å®šä¸¤ä¸ªèŠ‚ç‚¹â€œå€¼å¾—æ¯”è¾ƒâ€æ—¶ï¼Œæ‰§è¡Œä»¥ä¸‹é€»è¾‘ï¼š</p>
<ul>
<li>
<p><strong>é¦–å…ˆåˆ¤æ–­æ–°èŠ‚ç‚¹æ˜¯å¦ä¸ºæ–‡æœ¬èŠ‚ç‚¹</strong>ï¼ˆä¸ºæ–‡æœ¬èŠ‚ç‚¹å°±è¯´æ˜æ²¡æœ‰å­èŠ‚ç‚¹äº†ï¼‰ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œåˆ™ç›´æ¥æ›´æ–°domçš„æ–‡æœ¬å†…å®¹ä¸ºæ–°èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹ã€‚</p>
</li>
<li>
<p><strong>å¦‚æœæ–°èŠ‚ç‚¹ä¸æ˜¯æ–‡æœ¬èŠ‚ç‚¹ï¼Œè€Œæ—§èŠ‚ç‚¹æ˜¯æ–‡æœ¬èŠ‚ç‚¹çš„è¯</strong>ï¼Œè¯´æ˜èŠ‚éƒ½æ˜¯å…¨æ–°çš„ï¼Œæ‰€ä»¥ç›´æ¥å°†æ–°èŠ‚ç‚¹æ·»åŠ åˆ°çˆ¶èŠ‚ç‚¹ä¸­</p>
</li>
<li>
<p><strong>å¦‚æœæ–°æ—§èŠ‚ç‚¹éƒ½ä¸æ˜¯æ–‡æœ¬èŠ‚ç‚¹</strong>ï¼Œåˆ™è¯´æ˜ä¸¤è€…éƒ½æœ‰å­èŠ‚ç‚¹ï¼Œæ¥ä¸‹æ¥å°±è¿›<code>updateChildren()</code>å‡½æ•°è¿›è¡Œä¸‹ä¸€æ­¥æ¯”è¾ƒå¹¶æ›´æ–°å­èŠ‚ç‚¹</p>
</li>
</ul>
<h3 data-id="heading-5">3. updateChildren å‡½æ•°ï¼šåŒç«¯æ¯”è¾ƒç®—æ³•</h3>
<p>è¿™æ˜¯ Vue Diff çš„çµé­‚ã€‚å®ƒé€šè¿‡ <strong>â€œåŒç«¯æŒ‡é’ˆâ€</strong> ï¼ˆæ–°å¤´ã€æ–°å°¾ã€æ—§å¤´ã€æ—§å°¾ï¼‰å‘ä¸­é—´é æ‹¢ï¼Œå¯»æ‰¾å¯å¤ç”¨çš„èŠ‚ç‚¹ã€‚<code>updateChildren</code>å‡½æ•°å¯¹ä¼šæ–°æ—§ä¸¤ä¸ªèŠ‚ç‚¹è®¾ç½®4ä¸ªæŒ‡é’ˆï¼Œåˆ†åˆ«æŒ‡å‘<strong>æ–°å¤´ã€æ—§å¤´ã€æ–°å°¾ã€æ—§å°¾</strong>ï¼Œå®ƒä¸»è¦å¯¹5ç§æƒ…å†µè¿›è¡Œæ¯”è¾ƒï¼š</p>
<p><strong>æ¯”è¾ƒçš„äº”ç§ä¼˜å…ˆçº§ï¼š</strong></p>
<ol>
<li>
<p><strong>é¦–å…ˆæ˜¯æ—§å¤´æ–°å¤´è¿›è¡Œæ¯”è¾ƒ</strong>ï¼šå¦‚æœäºŒè€…ç›¸åŒï¼Œå°±å¯¹äºŒè€…æ‰§è¡Œ<code>patchVnode()</code>ï¼Œå¹¶å°†æ—§å¤´æ–°å¤´ä¸¤ä¸ªæŒ‡é’ˆå‘ä¸­é—´ç§»åŠ¨ã€‚</p>
</li>
<li>
<p><strong>å¦‚æœæ—§å¤´æ–°å¤´ä¸ç›¸åŒï¼Œå°±è¿›è¡Œæ—§å°¾æ–°å°¾çš„æ¯”è¾ƒ</strong>ï¼šå¦‚æœæ—§å°¾æ–°å°¾ç›¸åŒçš„è¯ï¼Œåˆ™å°†æ—§å°¾æ–°å°¾ä¸¤æŒ‡é’ˆå‘ä¸­é—´ç§»åŠ¨ã€‚</p>
</li>
<li>
<p><strong>å¦‚æœæ—§å¤´ä¸æ–°å¤´ï¼Œæ—§å°¾ä¸æ–°å°¾éƒ½ä¸ç›¸åŒ</strong>ï¼šé‚£å°±è¿›è¡Œäº¤å‰æ¯”è¾ƒï¼Œæ¯”è¾ƒæ–¹å¼å¦‚ä¸‹ï¼š</p>
<ul>
<li>é¦–å…ˆæ˜¯<code>æ—§å¤´æ–°å°¾</code>æ¯”è¾ƒï¼Œå¦‚æœäºŒè€…ç›¸åŒï¼Œé‚£ä¹ˆå°±æ‰§è¡Œ<code>patchVnode()</code>ï¼Œå¹¶å°†<code>æ—§å¤´</code>æŒ‡é’ˆå‘åç§»ä¸€ä½ï¼Œ<code>æ–°å°¾</code>æŒ‡é’ˆå‰ç§»ä¸€ä½</li>
<li>å¦‚æœ<code>æ—§å¤´æ–°å°¾</code>ä¸ç›¸åŒï¼Œé‚£å°±æ¯”è¾ƒ<code>æ–°å¤´æ—§å°¾</code>ï¼Œå¦‚æœäºŒè€…ç›¸åŒï¼Œé‚£ä¹ˆå°±æ‰§è¡Œ<code>patchVnode()</code>ï¼Œå¹¶å°†<code>æ–°å¤´</code>æŒ‡é’ˆåç§»ä¸€ä½ï¼Œ<code>æ—§å°¾</code>æŒ‡é’ˆå‰ç§»ä¸€ä½</li>
</ul>
</li>
<li>
<p><strong>å¦‚æœä»¥ä¸Šå››ç§æƒ…å½¢éƒ½ä¸æ»¡è¶³çš„è¯ï¼Œé‚£è¯´æ˜æ²¡æœ‰ç›¸åŒçš„èŠ‚ç‚¹å¯ä»¥å¤ç”¨ï¼Œåˆ™å°†åœ¨æ—§èŠ‚ç‚¹ä¸­éå†å¯»æ‰¾ä¸æ–°å¤´èŠ‚ç‚¹<code>key</code>å€¼ç›¸åŒçš„èŠ‚ç‚¹</strong>ã€‚</p>
<ul>
<li>å¦‚æœæ²¡æœ‰åœ¨æ—§èŠ‚ç‚¹ä¸­æ‰¾åˆ°<code>key</code>å€¼ç›¸åŒçš„èŠ‚ç‚¹ï¼Œåˆ™è¯´æ˜æ–°å¤´èŠ‚ç‚¹æ˜¯ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±ç›´æ¥æ–°å»ºï¼Œå¹¶å°†æ–°å¤´æŒ‡é’ˆåç§»</li>
<li>å¦‚æœåœ¨æ—§èŠ‚ç‚¹ä¸­æ‰¾åˆ°äº†<code>key</code>å€¼ç›¸åŒçš„èŠ‚ç‚¹ï¼Œåˆ™æ‰§è¡Œ<code>patchVnode()</code>å‡½æ•°ç»§ç»­æ¯”è¾ƒå¯¹åº”keyå€¼ç›¸åŒçš„èŠ‚ç‚¹æ˜¯å¦ä¸ºåŒä¸€èŠ‚ç‚¹ï¼Œå¹¶å°†æ–°å¤´æŒ‡é’ˆåç§»</li>
</ul>
</li>
</ol>
<h2 data-id="heading-6">ä¸‰ã€ æ¡ˆä¾‹å®æˆ˜ï¼šåŒç«¯æ¯”å¯¹å…¨è¿‡ç¨‹</h2>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ec83030ce1a4cf0a180fa9831cb19b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-R546w5LiA5Y-q5aSn5ZGG55Oc:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770730552&amp;x-signature=9hsqO%2BQujd1tCY9DCIbT7MHwiic%3D" alt="image.png" loading="lazy"/></p>
<p>ç¬¬ä¸€æ¬¡å¾ªç¯åï¼Œå‘ç°æ—§å¤´æ–°å°¾ã€æ—§å¤´æ–°å¤´ä¸ç›¸åŒï¼Œä½†æ—§å°¾æ–°å¤´ç›¸åŒï¼Œç›´æ¥å¤ç”¨æ—§èŠ‚ç‚¹Dä½œä¸ºdiffåçš„ç¬¬ä¸€ä¸ªçœŸå®èŠ‚ç‚¹ï¼ŒåŒæ—¶æ—§èŠ‚ç‚¹<code>endIndex</code>ç§»åŠ¨åˆ°Cï¼Œæ–°èŠ‚ç‚¹çš„ <code>startIndex</code> ç§»åŠ¨åˆ°äº† Cã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/badf80934baf489e936512fcc13fa46f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-R546w5LiA5Y-q5aSn5ZGG55Oc:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770730552&amp;x-signature=12EtkYLn9HC6vz0kMn5C9yk6hF0%3D" alt="image.png" loading="lazy"/></p>
<p>äºŒæ¬¡å¾ªç¯åï¼ŒåŒæ ·æ˜¯æ—§å°¾æ–°å¤´ç›¸åŒï¼Œè¿™æ—¶å°±å°†diff ååˆ›å»ºçš„çœŸå®èŠ‚ç‚¹ C æ’å…¥åˆ°ç¬¬ä¸€æ¬¡åˆ›å»ºçš„ D èŠ‚ç‚¹åé¢ã€‚åŒæ—¶æ—§èŠ‚ç‚¹çš„ <code>endIndex</code> ç§»åŠ¨åˆ°äº† Bï¼Œæ–°èŠ‚ç‚¹çš„ <code>startIndex</code> ç§»åŠ¨åˆ°äº† Eã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3cad57541253446d8cc24bc9b3587f9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-R546w5LiA5Y-q5aSn5ZGG55Oc:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770730552&amp;x-signature=8K6arhQ%2BJG97Ds6WZFty9hvyvhk%3D" alt="image.png" loading="lazy"/>
ç¬¬ä¸‰æ¬¡å¾ªç¯ä¸­ï¼Œå‘ç°åœ¨æ—§èŠ‚ç‚¹ä¸­æ²¡æœ‰æ‰¾åˆ°EèŠ‚ç‚¹ï¼Œè¿™æ—¶å€™ç›´æ¥åˆ›å»ºæ–°çš„çœŸå®èŠ‚ç‚¹ Eï¼Œæ’å…¥åˆ°ç¬¬äºŒæ¬¡åˆ›å»ºçš„ C èŠ‚ç‚¹ä¹‹åã€‚åŒæ—¶æ–°èŠ‚ç‚¹çš„ <code>startIndex</code> ç§»åŠ¨åˆ°äº† Aã€‚<code>æ—§èŠ‚ç‚¹startIndex</code> å’Œ endIndex éƒ½ä¿æŒä¸åŠ¨ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d18c036d24b84dd281f2b17407430125~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-R546w5LiA5Y-q5aSn5ZGG55Oc:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770730552&amp;x-signature=sKW3IPwYH8T3O%2BZqBXSMwY74YAI%3D" alt="image.png" loading="lazy"/></p>
<p>å››æ¬¡å¾ªç¯ä¸­ï¼Œå‘ç°äº†æ–°å¤´æ—§å¤´ç›¸åŒï¼Œäºæ˜¯ diff ååˆ›å»ºäº† A çš„çœŸå®èŠ‚ç‚¹ï¼Œæ’å…¥åˆ°å‰ä¸€æ¬¡åˆ›å»ºçš„ E èŠ‚ç‚¹åé¢ã€‚åŒæ—¶æ—§èŠ‚ç‚¹çš„ <code>startIndex</code> ç§»åŠ¨åˆ°äº† Bï¼Œ<code>æ–°èŠ‚ç‚¹çš„startIndex</code> ç§»åŠ¨åˆ°äº† B</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51c36115bc9c435e8b2698b46d68b7eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-R546w5LiA5Y-q5aSn5ZGG55Oc:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770730552&amp;x-signature=VZKbtZB%2BSktwdgKS%2B0ACZ63%2B700%3D" alt="image.png" loading="lazy"/></p>
<p>ç¬¬äº”æ¬¡å¾ªç¯ä¸­ï¼Œå‘ç°äº†æ–°å¤´æ—§å¤´ç›¸åŒï¼Œå› æ­¤Â diffÂ ååˆ›å»ºäº† B çœŸå®èŠ‚ç‚¹ æ’å…¥åˆ°å‰ä¸€æ¬¡åˆ›å»ºçš„ A èŠ‚ç‚¹åé¢ã€‚åŒæ—¶æ—§èŠ‚ç‚¹çš„Â <code>startIndex</code>ç§»åŠ¨åˆ°äº† Cï¼Œæ–°èŠ‚ç‚¹çš„<code>startIndex</code>ç§»åŠ¨åˆ°äº† Fã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/662bbc50b30047deb95e168722d32442~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-R546w5LiA5Y-q5aSn5ZGG55Oc:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770730552&amp;x-signature=ESZQ3wJH4F1QV1N2JOZbWRoFg2Y%3D" alt="image.png" loading="lazy"/></p>
<p>æœ€åä¸€æ¬¡å¾ªç¯ä¸­ï¼Œå‘ç°åœ¨æ—§èŠ‚ç‚¹ä¸­æ²¡æœ‰æ‰¾åˆ°FèŠ‚ç‚¹ï¼Œè¿™æ—¶ç›´æ¥åˆ›å»º F å¯¹åº”çš„çœŸå®èŠ‚ç‚¹ï¼Œç›´æ¥å°†å…¶æ’å…¥åˆ° B èŠ‚ç‚¹åé¢ï¼Œå¹¶å°†æ–°å¤´æŒ‡é’ˆå‘åç§»åŠ¨ä¸€ä½ï¼Œå‘ç°startIndexå¤§äºendIndex ï¼Œè¿™æ—¶å¾ªç¯ç»“æŸã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87fd8bbdeb9c42af89fcd05f1e28b5c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-R546w5LiA5Y-q5aSn5ZGG55Oc:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770730552&amp;x-signature=LTtsxKfLVaERF4%2FHU95Fy6mqghM%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-7">å››ã€ æ€»ç»“</h2>
<ul>
<li><strong>Diff çš„æœ¬è´¨</strong>ï¼šæ˜¯è™šæ‹Ÿ DOM å‘¨æœŸçš„ç»ˆç‚¹ï¼Œä¹Ÿæ˜¯çœŸå® DOM æ›´æ–°çš„èµ·ç‚¹ã€‚</li>
<li><strong>Key çš„é‡è¦æ€§</strong>ï¼šæ²¡æœ‰ <code>key</code> ä¼šå¯¼è‡´ Diff ç®—æ³•å›é€€åˆ°æ€§èƒ½æå·®çš„é€ä¸ªæ›´æ–°æ¨¡å¼ã€‚åŠ¡å¿…åœ¨ <code>v-for</code> ä¸­æä¾›ç¨³å®šã€å”¯ä¸€çš„ <code>key</code>ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å“åº”å¼å›¾ç‰‡ï¼šåˆ«åªä¼š max-width:100%ï¼ŒçœŸæ­£å…³é”®æ˜¯â€œé€‰èµ„æºâ€ï¼ˆåŸºäºMDNçš„æ–‡æ¡£ï¼‰]]></title>    <link>https://juejin.cn/post/7602531501457981449</link>    <guid>https://juejin.cn/post/7602531501457981449</guid>    <pubDate>2026-02-04T08:26:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602531501457981449" data-draft-id="7602471311509127195" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å“åº”å¼å›¾ç‰‡ï¼šåˆ«åªä¼š max-width:100%ï¼ŒçœŸæ­£å…³é”®æ˜¯â€œé€‰èµ„æºâ€ï¼ˆåŸºäºMDNçš„æ–‡æ¡£ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-04T08:26:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Flinton"/> <meta itemprop="url" content="https://juejin.cn/user/2225067266677640"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å“åº”å¼å›¾ç‰‡ï¼šåˆ«åªä¼š max-width:100%ï¼ŒçœŸæ­£å…³é”®æ˜¯â€œé€‰èµ„æºâ€ï¼ˆåŸºäºMDNçš„æ–‡æ¡£ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2225067266677640/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Flinton
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T08:26:29.000Z" title="Wed Feb 04 2026 08:26:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ã€å°å¥‡è…¾ã€‘ã€‚æ‹›è˜é‡Œå¸¸å†™â€œè¦ä¼šå“åº”å¼å¼€å‘â€ï¼Œä½†å¾ˆå¤šäººå¯¹â€œå“åº”å¼å›¾ç‰‡â€çš„ç†è§£åœç•™åœ¨ï¼š<code>img { max-width:100% }</code>ã€‚<br/>
è¿™ç¡®å®èƒ½è®©å›¾ç‰‡è·Ÿç€å®¹å™¨ç¼©æ”¾ï¼Œä½†<strong>æ‰‹æœºå¯èƒ½ä»ç„¶ä¸‹è½½ä¸€å¼ è¶…å¤§å›¾</strong> â†’ æ›´æ…¢ã€æ›´è´¹æµé‡ã€‚</p>
<p><strong>ä¸€å¥è¯ç»“è®ºï¼šå“åº”å¼å›¾ç‰‡ = æ˜¾ç¤ºåˆé€‚ï¼ˆç¼©æ”¾ï¼‰ + ä¸‹è½½åˆé€‚ï¼ˆé€‰èµ„æºï¼‰ã€‚</strong></p>
</blockquote>
<p>æœ¬æœŸè¯¦ç»†çš„è§†é¢‘æ•™ç¨‹bilibiliï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1DzfRBnE3Z%2F%3Fvd_source%3D4213d38d889ea1581bbcae78a04cbd9d" target="_blank" title="https://www.bilibili.com/video/BV1DzfRBnE3Z/?vd_source=4213d38d889ea1581bbcae78a04cbd9d" ref="nofollow noopener noreferrer">å“åº”å¼å›¾ç‰‡ï¼šåˆ«åªä¼š max-width:100%ï¼ŒçœŸæ­£å…³é”®æ˜¯â€œé€‰èµ„æºâ€ï¼ˆåŸºäºMDNçš„æ–‡æ¡£ï¼‰</a></p>
<h2 data-id="heading-0">ä½ å°†å­¦åˆ°ä»€ä¹ˆ</h2>
<ul>
<li><strong>è·¯çº¿ Aï¼š<code>srcset + sizes</code></strong>ï¼ˆåŒä¸€æ„å›¾ï¼Œåªæ¢æ¸…æ™°åº¦/æ–‡ä»¶å¤§å°ï¼‰âœ…æœ€å¸¸ç”¨</li>
<li><strong>è·¯çº¿ Bï¼š<code>&lt;picture&gt;</code></strong>ï¼ˆä¸åŒå±å¹•éœ€è¦ä¸åŒæ„å›¾/è£åˆ‡ï¼‰âœ…æ›´åƒâ€œè‰ºæœ¯æŒ‡å¯¼â€</li>
</ul>
<hr/>
<pre><code class="hljs language-css" lang="css"># ä¸€ã€ä¸ºä»€ä¹ˆâ€œçœ‹èµ·æ¥èƒ½ç¼©æ”¾â€è¿˜ä¸ç®—å“åº”å¼å›¾ç‰‡ï¼Ÿ

å¾ˆå¤šäººå†™è¿‡è¿™æ ·çš„ CSSï¼š

```css
<span class="hljs-selector-tag">img</span> {
  <span class="hljs-attribute">display</span>: block;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: auto;
}
</code></pre>
<p>å®ƒèƒ½åšåˆ°ï¼š<strong>å›¾ç‰‡ä¸ä¼šè¶…è¿‡å®¹å™¨å®½åº¦</strong>ã€‚ä½ æ‹–åŠ¨æµè§ˆå™¨çª—å£ï¼Œå›¾ç‰‡ä¼šå˜å¤§å˜å°ï¼Œçœ‹èµ·æ¥â€œå·²ç»å“åº”å¼â€ã€‚</p>
<p>ä½†è¿™åªè§£å†³äº† <strong>Aï¼šæ˜¾ç¤ºå°ºå¯¸å˜äº†</strong>ï¼Œå¹¶æ²¡æœ‰è§£å†³ <strong>Bï¼šä¸‹è½½èµ„æºè·Ÿç€å˜</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-1">1ï¼‰æ ¸å¿ƒè¯¯åŒºï¼šåªåšåˆ°äº†â€œæ˜¾ç¤ºå˜äº†â€ï¼Œæ²¡åšåˆ°â€œèµ„æºå˜äº†â€</h3>
<p>ä¸¾ä¸ªçœŸå®åœºæ™¯ï¼š</p>
<ul>
<li>æ‰‹æœºä¸Šçš„å®¹å™¨å¯èƒ½åªæœ‰ <strong>360px</strong></li>
<li>ä½†ä½ ä»ç„¶è®©æµè§ˆå™¨ä¸‹è½½ <code>elva-800w.jpg</code>ï¼ˆå®½ 800px çš„å›¾ç‰‡èµ„æºï¼‰</li>
<li>ç»“æœï¼š<strong>ä¸‹è½½æ›´å¤§å›¾ç‰‡ â†’ æ›´æ…¢ â†’ æ›´è´¹æµé‡</strong></li>
</ul>
<blockquote>
<p><strong>â€œä¸å“åº”å¼â€å¾ˆå¤šæ—¶å€™æŒ‡çš„æ˜¯ï¼šèµ„æºé€‰æ‹©ä¸æ™ºèƒ½ï¼ˆä¸€å¼ å¤§å›¾èµ°å¤©ä¸‹ï¼‰ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-2">2ï¼‰éªŒè¯ä¸€ä¸‹ï¼šä½ åˆ°åº•ä¸‹è½½äº†å¤šå¤§çš„å›¾ï¼Ÿ</h3>
<p>ç”¨æœ€ç®€å•çš„æ–¹å¼éªŒè¯ï¼ˆå¼ºçƒˆå»ºè®®å†™åœ¨æ–‡ä¸­è®©è¯»è€…ç…§åšï¼‰ï¼š</p>
<ul>
<li>æ‰“å¼€ DevTools â†’ <strong>Network</strong></li>
<li>è¿‡æ»¤ <strong>Img</strong></li>
<li>åˆ·æ–°é¡µé¢ï¼ˆå»ºè®®å…ˆå‹¾é€‰ Disable cacheï¼‰</li>
<li>çœ‹çœ‹ä¸‹è½½çš„æ˜¯ä¸æ˜¯æ°¸è¿œåŒä¸€å¼ å¤§å›¾</li>
</ul>
<p>å¦‚æœä½ åªç”¨äº† <code>max-width:100%</code>ï¼Œä½ ä¼šå‘ç°ï¼š<strong>å›¾ç‰‡æ˜¾ç¤ºå˜äº†ï¼Œä½†ä¸‹è½½çš„èµ„æºæ²¡å˜</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-3">3ï¼‰æ›´å…¸å‹çš„â€œæ°¸è¿œä¸€åˆ€åˆ‡â€ï¼šheader èƒŒæ™¯å›¾</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">header</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">header.jpg</span>) no-repeat center;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
}
</code></pre>
<p>è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>æ‰‹æœºä¹Ÿä¸‹è½½ <code>header.jpg</code></li>
<li>å¤§å±ä¹Ÿä¸‹è½½ <code>header.jpg</code></li>
<li><strong>æ°¸è¿œåªä¸€å¼ å›¾</strong>ï¼ˆå¯èƒ½æ‰‹æœºæµªè´¹æµé‡ï¼Œå¤§å±åˆä¸å¤Ÿæ¸…æ™°ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-4">äºŒã€çœŸæ­£çš„å“åº”å¼å›¾ç‰‡åˆ°åº•è¦æ»¡è¶³å“ªä¸¤ä»¶äº‹ï¼Ÿ</h2>
<p>MDN å¯¹å“åº”å¼å›¾ç‰‡çš„è§£é‡Šï¼šå“åº”å¼å›¾ç‰‡æ˜¯åœ¨ä¸åŒå±å¹•å°ºå¯¸ã€åˆ†è¾¨ç‡æˆ–å…·æœ‰å…¶ä»–ç±»ä¼¼ç‰¹æ€§çš„è®¾å¤‡ä¸Šéƒ½å‘ˆç°è‰¯å¥½çš„å›¾ç‰‡ï¼Œå¹¶æ¢ç©¶ HTML æä¾›çš„ä¸€äº›å¸®åŠ©å®ç°å®ƒä»¬çš„å·¥å…·ï¼Œä»¥æå‡ä¸åŒè®¾å¤‡ä¸Šçš„æ€§èƒ½ã€‚</p>
<blockquote>
<p>ä½ å¯ä»¥æŠŠâ€œå“åº”å¼å›¾ç‰‡â€æ‹†æˆä¸¤ä¸ªå¿…é¡»åŒæ—¶è¾¾æˆçš„ç›®æ ‡ï¼š</p>
</blockquote>
<h3 data-id="heading-5">âœ… â‘  æ˜¾ç¤ºåˆé€‚ï¼ˆå¸ƒå±€ / ç¼©æ”¾ï¼‰</h3>
<ul>
<li>ä¸æº¢å‡ºã€ä¸å˜å½¢ã€æ’ç‰ˆæ­£å¸¸</li>
<li>å¸¸ç”¨ï¼š<code>max-width:100%</code>ã€åˆç†å®¹å™¨å¸ƒå±€</li>
</ul>
<h3 data-id="heading-6">âœ… â‘¡ ä¸‹è½½åˆé€‚ï¼ˆæ€§èƒ½ / æ¸…æ™°åº¦ï¼‰â€”â€”çœŸæ­£å…³é”®</h3>
<ul>
<li>æ‰‹æœºåˆ«ä¸‹è½½è¶…å¤§å›¾ï¼ˆçœæµé‡/æ›´å¿«ï¼‰</li>
<li>é«˜æ¸…å±åˆ«ç³Šï¼ˆè¶³å¤Ÿæ¸…æ™°ï¼‰</li>
<li>éœ€è¦ï¼š<code>srcset / sizes</code> æˆ– <code>&lt;picture&gt;</code></li>
</ul>
<hr/>
<h2 data-id="heading-7">ä¸‰ã€ä¸¤æ¡è·¯çº¿æ€ä¹ˆé€‰ï¼ˆå…ˆæŠŠè·¯é€‰å¯¹ï¼‰</h2>























<table><thead><tr><th>åœºæ™¯</th><th>è§£å†³ä»€ä¹ˆ</th><th>ç”¨ä»€ä¹ˆ</th><th>ä¸€å¥è¯</th></tr></thead><tbody><tr><td>åŒä¸€å¼ ç”»é¢ï¼Œä¸åŒæ¸…æ™°åº¦/ä½“ç§¯</td><td>çœæµé‡ + ä¸ç³Š</td><td><code>srcset + sizes</code></td><td>âœ…æœ€å¸¸ç”¨ï¼šæµè§ˆå™¨æŒ‰â€œæ˜¾ç¤ºå®½åº¦ + DPRâ€é€‰</td></tr><tr><td>ä¸åŒå±å¹•è¦ä¸åŒæ„å›¾ï¼ˆè£åˆ‡/è¿‘æ™¯/ä¿¡æ¯æ›´æ¸…æ™°ï¼‰</td><td>ç”»é¢ä¿¡æ¯æ¸…æ™°</td><td><code>&lt;picture&gt; + source[media]</code></td><td>âœ…éœ€è¦â€œæ¢æ„å›¾â€æ‰ç”¨</td></tr></tbody></table>
<blockquote>
<p><strong>ä¼˜å…ˆå­¦ <code>srcset + sizes</code>ï¼ˆé»˜è®¤æ–¹æ¡ˆï¼‰</strong> ï¼Œåªæœ‰å½“ä½ ç¡®å®éœ€è¦æ¢æ„å›¾ï¼Œå†ä¸Š <code>&lt;picture&gt;</code>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-8">å››ã€è·¯çº¿ Aï¼š<code>srcset + sizes</code>ï¼ˆåŒæ„å›¾é€‰å°ºå¯¸ï¼‰âœ…æœ€å¸¸ç”¨</h2>
<p>ä½ åªéœ€è¦è®°ä½ä¸€å¥è¯ï¼š</p>
<blockquote>
<p><strong><code>srcset</code> æä¾›å€™é€‰èµ„æºï¼Œ<code>sizes</code> å‘Šè¯‰æµè§ˆå™¨â€œè¿™å¼ å›¾å¤§æ¦‚ä¼šæ˜¾ç¤ºå¤šå®½â€ï¼Œæµè§ˆå™¨å†ç»“åˆ DPR é€‰æœ€åˆé€‚çš„é‚£å¼ ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-9">1ï¼‰æœ€å°å¯ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-ini" lang="ini">&lt;img
  <span class="hljs-attr">srcset</span>=<span class="hljs-string">"
    elva-fairy-480w.jpg 480w,
    elva-fairy-800w.jpg 800w
  "</span>
  <span class="hljs-attr">sizes</span>=<span class="hljs-string">"(max-width: 600px) 100vw, 800px"</span>
  <span class="hljs-attr">src</span>=<span class="hljs-string">"elva-fairy-800w.jpg"</span>
  <span class="hljs-attr">alt</span>=<span class="hljs-string">"Elva dressed as a fairy"</span>
/&gt;
</code></pre>
<h4 data-id="heading-10">è¿™ä¸‰è¡Œåˆ†åˆ«å¹²ä»€ä¹ˆï¼Ÿ</h4>
<ul>
<li><code>srcset="... 480w, ... 800w"</code>ï¼šå‘Šè¯‰æµè§ˆå™¨â€œæˆ‘æœ‰ä¸¤ä¸ªå®½åº¦ç‰ˆæœ¬â€</li>
<li><code>sizes="(max-width: 600px) 100vw, 800px"</code>ï¼šå‘Šè¯‰æµè§ˆå™¨â€œå›¾ç‰‡æ˜¾ç¤ºå®½åº¦çš„é¢„ä¼°å€¼â€</li>
<li><code>src="..."</code>ï¼šå…œåº•ï¼ˆæ—§æµè§ˆå™¨ä¸æ”¯æŒ srcset/sizes æ—¶ä»èƒ½æ˜¾ç¤ºï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-11">2ï¼‰<code>sizes</code> ä¸ºä»€ä¹ˆæ˜¯å…³é”®ï¼Ÿ</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">sizes</span>=<span class="hljs-string">"(max-width: 600px) 100vw, 800px"</span>
</code></pre>
<p>å«ä¹‰æ˜¯ï¼š</p>
<ul>
<li>å±å¹• â‰¤ 600pxï¼šå›¾ç‰‡æ˜¾ç¤ºå®½åº¦ â‰ˆ <strong>100vw</strong>ï¼ˆå æ»¡å±å¹•ï¼‰</li>
<li>å¦åˆ™ï¼šå›¾ç‰‡æ˜¾ç¤ºå®½åº¦ â‰ˆ <strong>800px</strong></li>
</ul>
<blockquote>
<p><code>sizes</code> ä¸æ˜¯â€œå›¾ç‰‡å®é™…å®½åº¦â€ï¼Œè€Œæ˜¯ä½ å‘Šè¯‰æµè§ˆå™¨çš„â€œæ˜¾ç¤ºå®½åº¦é¢„ä¼°â€ã€‚<br/>
é¢„ä¼°è¶Šæ¥è¿‘å®é™…å¸ƒå±€ï¼Œæµè§ˆå™¨é€‰èµ„æºå°±è¶Šåˆç†ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-12">3ï¼‰æµè§ˆå™¨åˆ°åº•æ€ä¹ˆé€‰ï¼Ÿï¼ˆç”¨ä¸€å¥â€œç®—è´¦â€å¸®åŠ©è¯»è€…çœŸæ­£ä¼šç”¨ï¼‰</h3>
<p>æµè§ˆå™¨ä¼šä¼°ç®—ï¼š</p>
<blockquote>
<p><strong>ç›®æ ‡èµ„æºåƒç´ å®½åº¦ â‰ˆ å›¾ç‰‡æ˜¾ç¤ºå®½åº¦ Ã— DPR</strong></p>
</blockquote>
<p>ä¸¾ä¾‹ï¼š</p>
<ul>
<li>æ‰‹æœº viewport 360px</li>
<li><code>sizes</code> å‘Šè¯‰æµè§ˆå™¨å›¾ç‰‡æ˜¾ç¤ºå®½åº¦æ˜¯ <code>100vw</code> â†’ çº¦ 360px</li>
<li>DPR=2 â†’ ç›®æ ‡åƒç´ å®½åº¦çº¦ 720px<br/>
â†’ æµè§ˆå™¨æ›´å¯èƒ½é€‰ <code>800w</code> è€Œä¸æ˜¯ <code>480w</code></li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆï¼š<strong>åŒä¸€æ‰‹æœºä¸Šï¼Œä¸åŒ DPR å¯èƒ½é€‰ä¸åŒèµ„æº</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-13">4ï¼‰æ€ä¹ˆéªŒè¯ä½ æˆåŠŸäº†ï¼Ÿ</h3>
<ul>
<li>DevTools â†’ Network â†’ Img</li>
<li>æ‹–åŠ¨çª—å£å®½åº¦ï¼ˆè·¨è¿‡ 600pxï¼‰</li>
<li>æˆ–åœ¨ä¸åŒ DPR è®¾å¤‡/æ¨¡æ‹Ÿå™¨ä¸Šçœ‹</li>
<li>ä½ åº”è¯¥èƒ½çœ‹åˆ°è¯·æ±‚çš„å›¾ç‰‡æ–‡ä»¶å/å°ºå¯¸å‘ç”Ÿå˜åŒ–</li>
</ul>
<hr/>
<h2 data-id="heading-14">äº”ã€è·¯çº¿ Bï¼š<code>&lt;picture&gt;</code>ï¼ˆæ¢æ„å›¾ï¼‰âœ…å½“ä½ éœ€è¦è£åˆ‡/è¿‘æ™¯æ—¶æ‰ç”¨</h2>
<p>å¦‚æœå°å±ä¸Šä¸»ä½“å¤ªå°ã€ä¿¡æ¯çœ‹ä¸æ¸…ï¼Œå°±ä¸æ˜¯â€œç¼©å°åŒä¸€å¼ å›¾â€èƒ½è§£å†³çš„ï¼Œè€Œæ˜¯è¦<strong>æ¢ä¸€å¼ æ›´é€‚åˆå°å±çš„æ„å›¾</strong>ï¼ˆart directionï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-15">1ï¼‰æœ€å°å¯ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-ini" lang="ini">&lt;picture&gt;
  &lt;source <span class="hljs-attr">media</span>=<span class="hljs-string">"(max-width: 799px)"</span> srcset=<span class="hljs-string">"elva-480w-close-portrait.jpg"</span>&gt;
  &lt;source <span class="hljs-attr">media</span>=<span class="hljs-string">"(min-width: 800px)"</span> srcset=<span class="hljs-string">"elva-800w.jpg"</span>&gt;
  &lt;img <span class="hljs-attr">src</span>=<span class="hljs-string">"elva-800w.jpg"</span> alt=<span class="hljs-string">"Chris standing up holding his daughter Elva"</span>&gt;
&lt;/picture&gt;
</code></pre>
<hr/>
<h3 data-id="heading-16">2ï¼‰ä¸‰å¥è¯ææ‡‚ <code>&lt;picture&gt;</code></h3>
<ol>
<li><code>&lt;picture&gt;</code> <strong>ä¸è´Ÿè´£æ¸²æŸ“</strong>ï¼ŒçœŸæ­£æ¸²æŸ“å‡ºæ¥çš„æ˜¯é‡Œé¢çš„ <code>&lt;img&gt;</code></li>
<li>æµè§ˆå™¨ä»ä¸Šåˆ°ä¸‹åŒ¹é… <code>&lt;source&gt;</code>ï¼Œ<strong>ç¬¬ä¸€ä¸ªåŒ¹é…çš„å°±ç”¨</strong></li>
<li>å¦‚æœéƒ½ä¸åŒ¹é…æˆ–æµè§ˆå™¨ä¸æ”¯æŒ <code>&lt;picture&gt;</code>ï¼Œå°±ç”¨ <code>&lt;img src="..."&gt;</code> å…œåº•</li>
</ol>
<hr/>
<h3 data-id="heading-17">3ï¼‰ä¸¤ä¸ªæ–°æ‰‹æœ€å¸¸è¸©çš„å‘ï¼ˆå»ºè®®ä¿ç•™åœ¨æ–‡ä¸­ï¼‰</h3>
<h4 data-id="heading-18">å‘ 1ï¼š<code>media</code> åˆ¤æ–­çš„æ˜¯ <strong>viewport å®½åº¦</strong>ï¼Œä¸æ˜¯å›¾ç‰‡å®¹å™¨å®½åº¦</h4>
<ul>
<li>å®ƒçœ‹çš„æ˜¯æµè§ˆå™¨å¯è§†åŒºåŸŸï¼ˆçª—å£/å±å¹•ï¼‰å®½åº¦</li>
<li>ä¸æ˜¯ä½  <code>.card</code> æˆ– <code>.container</code> çš„å®½åº¦</li>
</ul>
<h4 data-id="heading-19">å‘ 2ï¼šå¦‚æœä½ è¦æ”¯æŒ AVIF/WebPï¼Œè¦å†™ <code>type</code></h4>
<pre><code class="hljs language-ini" lang="ini">&lt;picture&gt;
  &lt;source <span class="hljs-attr">type</span>=<span class="hljs-string">"image/avif"</span> srcset=<span class="hljs-string">"a.avif"</span>&gt;
  &lt;source <span class="hljs-attr">type</span>=<span class="hljs-string">"image/webp"</span> srcset=<span class="hljs-string">"a.webp"</span>&gt;
  &lt;img <span class="hljs-attr">src</span>=<span class="hljs-string">"a.jpg"</span> alt=<span class="hljs-string">""</span>&gt;
&lt;/picture&gt;
</code></pre>
<hr/>
<h3 data-id="heading-20">4ï¼‰æ€ä¹ˆéªŒè¯ <code>&lt;picture&gt;</code> åˆ‡æ¢æˆåŠŸï¼Ÿ</h3>
<ul>
<li>DevTools â†’ Network â†’ Img</li>
<li>å‹¾é€‰ Disable cacheï¼ˆé¿å…ç¼“å­˜å¹²æ‰°ï¼‰</li>
<li>æ‹–åŠ¨çª—å£è·¨è¿‡ 799/800</li>
<li>çœ‹è¯·æ±‚çš„å›¾ç‰‡èµ„æºæ˜¯å¦ä» <code>close-portrait</code> åˆ‡åˆ° <code>800w</code></li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼šæœ‰äº›æµè§ˆå™¨åœ¨ç¼“å­˜/å·²åŠ è½½çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦åˆ·æ–°æ‰èƒ½é‡æ–°è§¦å‘é€‰æ‹©ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-21">å…­ã€å®æˆ˜è½åœ°ï¼šæˆ‘åœ¨é¡¹ç›®é‡Œçš„é»˜è®¤è§„åˆ™ï¼ˆå»ºè®®ä¿ç•™ï¼‰</h2>
<p>ä»¥åå¼€å‘æ‹¿åˆ°ä¸€å¼ å›¾ç‰‡ï¼Œé—®è‡ªå·±ä¸¤ä»¶äº‹ï¼š</p>
<h3 data-id="heading-22">â‘  æ˜¾ç¤ºæ˜¯å¦è¦â€œç¼©æ”¾å¾—ä½“â€</h3>
<ul>
<li>ä¸æº¢å‡ºã€ä¸å˜å½¢ã€æ’ç‰ˆæ­£å¸¸</li>
<li>é€šå¸¸ç”¨ï¼š</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">img</span> {
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: auto;
  <span class="hljs-attribute">display</span>: block;
}
</code></pre>
<h3 data-id="heading-23">â‘¡ èµ„æºæ˜¯å¦è¦â€œä¸‹è½½å¾—ä½“â€ï¼ˆå…³é”®ï¼‰</h3>
<ul>
<li>
<p><strong>é»˜è®¤ç”¨ <code>srcset + sizes</code></strong>ï¼ˆåŒæ„å›¾ï¼‰</p>
</li>
<li>
<p><strong>åªæœ‰éœ€è¦æ¢æ„å›¾æ—¶ç”¨ <code>&lt;picture&gt;</code></strong></p>
</li>
<li>
<p>æœ€å¥½é…åˆï¼š</p>
<ul>
<li><code>loading="lazy"</code>ï¼ˆéé¦–å±ï¼‰</li>
<li>å†™å¥½ <code>width/height</code> æˆ–å ä½ï¼ˆå‡å°‘å¸ƒå±€æŠ–åŠ¨ CLSï¼‰</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-24">ä¸ƒã€æ€»ç»“</h2>
<blockquote>
<p><strong>å“åº”å¼å›¾ç‰‡ = æ˜¾ç¤ºåˆé€‚ï¼ˆç¼©æ”¾ï¼‰ + ä¸‹è½½åˆé€‚ï¼ˆé€‰èµ„æºï¼‰</strong></p>
</blockquote>
<ul>
<li>åªåš <code>max-width:100%</code>ï¼šâœ…èƒ½ç¼©æ”¾ï¼Œä½† âŒèµ„æºä¸å˜ï¼ˆä¸å¤Ÿå“åº”å¼ï¼‰</li>
<li>åªéœ€æ¢æ¸…æ™°åº¦/å¤§å°ï¼šç”¨ <strong><code>srcset + sizes</code></strong></li>
<li>éœ€è¦æ¢æ„å›¾/è£åˆ‡ï¼šç”¨ <strong><code>&lt;picture&gt;</code></strong></li>
</ul>
<hr/>
<h2 data-id="heading-25">å…«ã€ä»£ç é™„å½•</h2>
<blockquote>
<p>å‚è€ƒï¼šMDN å“åº”å¼å›¾ç‰‡<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FHTML%2FGuides%2FResponsive_images" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Guides/Responsive_images" ref="nofollow noopener noreferrer">developer.mozilla.org/zh-CN/docs/â€¦</a></p>
</blockquote>
<h3 data-id="heading-26">1ï¼‰å“åº”å¼å›¾ç‰‡ï¼ˆåªå…·å¤‡ç¼©æ”¾ç‰¹å¾ï¼‰</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en-US"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Not responsive demo<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
      <span class="hljs-selector-tag">html</span> {
        <span class="hljs-attribute">font-family</span>: sans-serif;
        <span class="hljs-attribute">background-color</span>: gray;
      }
      <span class="hljs-selector-tag">body</span> {
        <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">max-width</span>: <span class="hljs-number">1200px</span>;
        <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
        <span class="hljs-attribute">background-color</span>: white;
      }
      <span class="hljs-selector-tag">header</span> {
        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">header.jpg</span>) no-repeat center;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
      }
      <span class="hljs-selector-tag">section</span> {
        <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
      }
      <span class="hljs-selector-tag">p</span> {
        <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.5</span>;
      }
      <span class="hljs-selector-tag">img</span> {
        <span class="hljs-attribute">display</span>: block;
        <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
        <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">height</span>: auto;
      }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>My website<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Lorem ipsum dolor sit amet...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"elva-800w.jpg"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"Chris standing up holding his daughter Elva"</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Suspendisse potenti...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"elva-fairy-800w.jpg"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"Elva dressed as a fairy"</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-27">2ï¼‰å“åº”å¼å›¾ç‰‡ï¼ˆå…·å¤‡ç¼©æ”¾ã€æ€§èƒ½ã€æ¸…æ™°åº¦ç‰¹å¾ï¼‰</h3>
<p>æºä»£ç ï¼ˆMDN learning-areaï¼‰ï¼š<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmdn%2Flearning-area%2Ftree%2Fmain%2Fhtml%2Fmultimedia-and-embedding%2Fresponsive-images" target="_blank" title="https://github.com/mdn/learning-area/tree/main/html/multimedia-and-embedding/responsive-images" ref="nofollow noopener noreferrer">github.com/mdn/learninâ€¦</a></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>My website<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Lorem ipsum dolor sit amet, consectetur adipiscing elit...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">picture</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">media</span>=<span class="hljs-string">"(max-width: 799px)"</span> <span class="hljs-attr">srcset</span>=<span class="hljs-string">"elva-480w-close-portrait.jpg"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">media</span>=<span class="hljs-string">"(min-width: 800px)"</span> <span class="hljs-attr">srcset</span>=<span class="hljs-string">"elva-800w.jpg"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"elva-800w.jpg"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"Chris standing up holding his daughter Elva"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">picture</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Suspendisse potenti. Ut in luctus eros...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
      <span class="hljs-attr">srcset</span>=<span class="hljs-string">"elva-fairy-480w.jpg 480w,
              elva-fairy-800w.jpg 800w"</span>
      <span class="hljs-attr">sizes</span>=<span class="hljs-string">"(max-width: 600px) 100vw, 800px"</span>
      <span class="hljs-attr">src</span>=<span class="hljs-string">"elva-fairy-800w.jpg"</span>
      <span class="hljs-attr">alt</span>=<span class="hljs-string">"Elva dressed as a fairy"</span>
    &gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
</code></pre>
<pre><code class="hljs"/></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‚ç›´SFTè¿‡æ‹Ÿåˆï¼ˆOverfittingï¼‰çš„æ·±å±‚æœºåˆ¶ä¸ç²¾å‡†å¯¹æŠ—]]></title>    <link>https://juejin.cn/post/7602559134576263204</link>    <guid>https://juejin.cn/post/7602559134576263204</guid>    <pubDate>2026-02-04T07:48:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602559134576263204" data-draft-id="7602579671475290131" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‚ç›´SFTè¿‡æ‹Ÿåˆï¼ˆOverfittingï¼‰çš„æ·±å±‚æœºåˆ¶ä¸ç²¾å‡†å¯¹æŠ—"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-02-04T07:48:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°åŸçˆ±å­¦ä¹ "/> <meta itemprop="url" content="https://juejin.cn/user/3036193768617897"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‚ç›´SFTè¿‡æ‹Ÿåˆï¼ˆOverfittingï¼‰çš„æ·±å±‚æœºåˆ¶ä¸ç²¾å‡†å¯¹æŠ—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3036193768617897/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°åŸçˆ±å­¦ä¹ 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T07:48:48.000Z" title="Wed Feb 04 2026 07:48:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<blockquote>
<p><strong>ä¼ é€é—¨ï¼š</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyafo-ai%2Fy-trainer" title="https://github.com/yafo-ai/y-trainer" target="_blank" ref="nofollow noopener noreferrer">GitHubä»“åº“</a>ï¼šæºä»£ç ä¸issueè®¨è®º</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.y-agent.cn%2Fdocs%2Fy-trainer%2Fintroduction" title="https://www.y-agent.cn/docs/y-trainer/introduction" target="_blank" ref="nofollow noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a>ï¼šæœ€æƒå¨çš„ä½¿ç”¨æŒ‡å—</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.y-agent.cn%2Fdocs%2Fy-trainer%2Ftutorials%2Fcore-algorithm" title="https://www.y-agent.cn/docs/y-trainer/tutorials/core-algorithm" target="_blank" ref="nofollow noopener noreferrer">æ ¸å¿ƒç®—æ³•è¯¦è§£</a>ï¼šNLIRGæ•°å­¦åŸç†</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.y-agent.cn%2Fdocs%2Fy-trainer%2Fquick-start" title="https://www.y-agent.cn/docs/y-trainer/quick-start" target="_blank" ref="nofollow noopener noreferrer">å¿«é€Ÿå¼€å§‹ç¤ºä¾‹</a>ï¼š5åˆ†é’Ÿä¸Šæ‰‹</li>
</ul>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€è¿‡æ‹Ÿåˆï¼šå¤§æ¨¡å‹SFTè®­ç»ƒä¸­çš„"éšå½¢æ€æ‰‹"</h2>
<p>åœ¨å¤§æ¨¡å‹å¾®è°ƒ(SFT)çš„ä¸–ç•Œé‡Œï¼Œè¿‡æ‹Ÿåˆå°±åƒä¸€ä¸ªæ½œä¼çš„éšå½¢æ€æ‰‹ã€‚å½“70Bå‚æ•°çš„å·¨æ— éœ¸æ¨¡å‹é‡ä¸Šä»…10ä¸‡æ¡çš„è®­ç»ƒæ•°æ®ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿæ²¡é”™ï¼Œæ¨¡å‹ä¼šåœ¨æçŸ­æ—¶é—´å†…å°†è®­ç»ƒé›†"å€’èƒŒå¦‚æµ"ï¼Œç„¶åâ€”â€”ç¾éš¾å¼€å§‹äº†ã€‚</p>
<h4 data-id="heading-1">åŒé‡ä¸‹é™ç°è±¡ï¼šä¸åªæ˜¯ç®€å•çš„è¿‡æ‹Ÿåˆ</h4>
<p>ä¼ ç»Ÿæœºå™¨å­¦ä¹ ä¸­ï¼Œè¿‡æ‹Ÿåˆè¡¨ç°ç›¸å¯¹ç®€å•ã€‚ä½†åœ¨å¤§æ¨¡å‹é¢†åŸŸï¼Œæˆ‘ä»¬å¸¸é‡åˆ°æ›´å¤æ‚çš„**åŒé‡ä¸‹é™(Double Descent)**ç°è±¡ï¼šéšç€è®­ç»ƒç»§ç»­ï¼Œæµ‹è¯•è¯¯å·®å…ˆé™åå‡ï¼Œéšååˆç¥å¥‡åœ°å†æ¬¡ä¸‹é™ã€‚åœ¨SFTè¿™ç§"å°æ ·æœ¬ã€å¤§å‚æ•°"åœºæ™¯ä¸‹ï¼Œè¿‡æ‹Ÿåˆä¼šè¡¨ç°ä¸ºï¼š</p>
<pre><code class="hljs language-scss" lang="scss"># å…¸å‹è¿‡æ‹Ÿåˆçš„è¡¨ç°
if training_loss<span class="hljs-selector-class">.approaches_zero</span>() and validation_loss<span class="hljs-selector-class">.rising</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"âš ï¸ è­¦å‘Šï¼šæ¨¡å‹æ­£åœ¨æ­»è®°ç¡¬èƒŒè®­ç»ƒæ•°æ®ï¼"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ” å…·ä½“ç—‡çŠ¶ï¼š"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"- å¯¹è®­ç»ƒé›†promptçš„è½»å¾®å˜åŒ–æåº¦æ•æ„Ÿ"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"- ç”Ÿæˆå†…å®¹é™·å…¥é‡å¤å¾ªç¯"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"- å¤šæ ·æ€§æŒ‡æ ‡(diversity score)éª¤é™50%+"</span>)
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-2">äºŒã€ä¼ ç»Ÿæ­£åˆ™åŒ–æ–¹æ³•ä¸ºä½•åœ¨LLMè®­ç»ƒä¸­å¤±æ•ˆï¼Ÿ</h3>
<p>é¢å¯¹è¿‡æ‹Ÿåˆï¼Œå·¥ç¨‹å¸ˆä»¬çš„ç¬¬ä¸€ååº”å¾€å¾€æ˜¯è¿™äº›ä¼ ç»Ÿæ–¹æ³•ï¼Œä½†å®ƒä»¬åœ¨å¤§æ¨¡å‹é¢†åŸŸå¾€å¾€æ°´åœŸä¸æœï¼š</p>



































<table><thead><tr><th/><th/><th/></tr></thead><tbody><tr><td>æ–¹æ³•</td><td>ä¼ ç»Ÿæ•ˆæœ</td><td>LLM SFTä¸­é—®é¢˜</td></tr><tr><td>Dropout</td><td>â˜…â˜…â˜…â˜…â˜†</td><td>ç ´åFlash Attentionä¼˜åŒ–ï¼Œè®­ç»ƒé€Ÿåº¦ä¸‹é™40%+</td></tr><tr><td>Early Stopping</td><td>â˜…â˜…â˜…â˜†â˜†</td><td>ç”Ÿæˆå¼è¯„æµ‹æˆæœ¬å¤ªé«˜ï¼Œæ— æ³•é¢‘ç¹éªŒè¯</td></tr><tr><td>Weight Decay</td><td>â˜…â˜…â˜†â˜†â˜†</td><td>éš¾ä»¥ç²¾å‡†æ§åˆ¶ï¼Œå®¹æ˜“åŒæ—¶å‰Šå¼±æ¨¡å‹èƒ½åŠ›</td></tr><tr><td>NEFTune</td><td>â˜…â˜…â˜…â˜†â˜†</td><td>å™ªå£°å‚æ•°éš¾è°ƒï¼Œå®¹æ˜“ç ´åè¯­ä¹‰ç»“æ„</td></tr></tbody></table>
<p><em>è¡¨ï¼šä¼ ç»Ÿ</em> <em>æ­£åˆ™åŒ–</em> <em>æ–¹æ³•åœ¨</em> <em>å¤§æ¨¡å‹</em> <em>SFT</em> <em>åœºæ™¯ä¸­çš„å±€é™æ€§</em></p>
<h3 data-id="heading-3">ä¸‰ã€Y-Trainerçš„ç ´å±€ä¹‹é“ï¼šNLIRGç®—æ³•æ·±åº¦è§£æ</h3>
<p>ä½œä¸ºå‘é‡æ„ŸçŸ¥å›¢é˜Ÿæ¨å‡ºçš„æ™ºèƒ½è®­ç»ƒæ¡†æ¶ï¼ŒY-Traineré€šè¿‡<strong>NLIRGç®—æ³•</strong>(éçº¿æ€§å­¦ä¹ å¼ºåº¦è°ƒèŠ‚ç®—æ³•)å¯¹è¿‡æ‹Ÿåˆè¿›è¡Œç²¾å‡†ç‹™å‡»ã€‚è¿™ä¸æ˜¯ç®€å•çš„æ­£åˆ™åŒ–ï¼Œè€Œæ˜¯ä¸€åœºTokençº§åˆ«çš„ç²¾å‡†æ‰‹æœ¯ã€‚</p>
<h4 data-id="heading-4">3.1 æ ¸å¿ƒæœºåˆ¶ï¼šTokençº§åŠ¨æ€æ¢¯åº¦è°ƒèŠ‚</h4>
<p>NLIRGçš„æ ¸å¿ƒåœ¨äº<strong>å®æ—¶ç›‘æµ‹æ¯ä¸ªtokençš„æŸå¤±å€¼</strong>ï¼Œå¹¶æ ¹æ®é¢„è®¾æ›²çº¿åŠ¨æ€è°ƒæ•´æ¢¯åº¦å¼ºåº¦ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">dynamic_sigmoid_batch</span>(<span class="hljs-params">losses, max_lr=<span class="hljs-number">1.0</span>, x0=<span class="hljs-number">1.2</span>, min_lr=<span class="hljs-number">5e-8</span>, k=<span class="hljs-number">1.7</span></span>):
    <span class="hljs-string">"""
    NLIRGæ ¸å¿ƒç®—æ³•ï¼šåŸºäºæŸå¤±å€¼çš„åŠ¨æ€æƒé‡è®¡ç®—
    æŸå¤±åŒºé—´åˆ’åˆ†ç­–ç•¥ï¼š
    - ä½æŸå¤±åŒºé—´(lossâ‰¤1.45)ï¼šå‰Šå‡æ¢¯åº¦ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆ
    - ä¸­ç­‰æŸå¤±åŒºé—´(1.45&lt;loss&lt;6.6)ï¼šå¢å¼ºæ¢¯åº¦ï¼ŒåŠ é€Ÿå­¦ä¹ 
    - é«˜æŸå¤±åŒºé—´(lossâ‰¥15.0)ï¼šæ¢¯åº¦å½’é›¶ï¼Œè¿‡æ»¤å¼‚å¸¸æ ·æœ¬
    """</span>
    <span class="hljs-comment"># å®é™…ä»£ç å®ç°æ›´å¤æ‚ï¼Œæ­¤å¤„ä¸ºç®€åŒ–ç‰ˆ</span>
    weights = torch.zeros_like(losses)
    <span class="hljs-keyword">for</span> i, loss <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(losses):
        <span class="hljs-keyword">if</span> loss &lt;= <span class="hljs-number">1.45</span>:
            weights[i] = <span class="hljs-number">1</span>/(<span class="hljs-number">1</span> + math.exp(-k*(loss - x0))) * <span class="hljs-number">0.3</span>  <span class="hljs-comment"># å‰Šå¼±ç®€å•æ ·æœ¬</span>
        <span class="hljs-keyword">elif</span> loss &lt; <span class="hljs-number">6.6</span>:
            weights[i] = <span class="hljs-number">1.5</span>  <span class="hljs-comment"># å¢å¼ºä¸­ç­‰éš¾åº¦æ ·æœ¬</span>
        <span class="hljs-keyword">elif</span> loss &lt; <span class="hljs-number">15.0</span>:
            weights[i] = <span class="hljs-number">1</span>/(<span class="hljs-number">1</span> + math.exp(loss - <span class="hljs-number">6.2</span>)) * <span class="hljs-number">0.4</span>  <span class="hljs-comment"># å‰Šå¼±å›°éš¾æ ·æœ¬</span>
        <span class="hljs-keyword">else</span>:
            weights[i] = <span class="hljs-number">0</span>  <span class="hljs-comment"># è¿‡æ»¤å¼‚å¸¸æ ·æœ¬</span>
    <span class="hljs-keyword">return</span> weights
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/182b67f90cc74210ad0a03ed056552f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5Y6f54ix5a2m5Lmg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770796127&amp;x-signature=p%2BzVMqHGTCixMlzzbXQj1BjVfD4%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹<em>å›¾ï¼šNLIRGç®—æ³•çš„åŠ¨æ€æƒé‡æ›²çº¿ã€‚æ¨ªåæ ‡ä¸ºlosså€¼ï¼Œçºµåæ ‡ä¸ºæ¢¯åº¦è®¡ç®—æƒé‡ã€‚</em></p>
<h4 data-id="heading-5">3.2 ä¸‰å¤§åˆ›æ–°ç‚¹è§£æ</h4>
<p><strong>1. Tokençº§åˆ«ç²¾å‡†æ§åˆ¶</strong></p>
<p>ä¼ ç»Ÿæ–¹æ³•å¯¹æ•´ä¸ªbatchç»Ÿä¸€å¤„ç†ï¼Œè€ŒNLIRGå¯¹æ¯ä¸ªtokenå•ç‹¬è®¡ç®—æƒé‡ï¼Œå®ç°<strong>å¾®è§‚çº§ç²¾å‡†è°ƒæ§</strong>ã€‚å½“æ¨¡å‹å¯¹æŸä¸ªtokençš„é¢„æµ‹å·²ç»å¾ˆå‡†ç¡®(loss&lt;1.0)ï¼Œç®—æ³•ä¼šå¤§å¹…é™ä½è¯¥tokençš„æ¢¯åº¦ï¼Œé˜²æ­¢æ¨¡å‹è¿‡åº¦æ‹Ÿåˆè¿™ä¸€ç‰¹å¾ã€‚</p>
<p><strong>2. è‡ªåŠ¨è¿‡æ»¤ä½è´¨é‡æ ·æœ¬</strong></p>
<p>å½“æŸæ ·æœ¬çš„lossæŒç»­é«˜äº15.0æ—¶ï¼ŒNLIRGä¼šè‡ªåŠ¨å°†å…¶æƒé‡è®¾ä¸º0ï¼Œ<strong>ä»æ ¹æœ¬ä¸Šé¿å…å™ªå£°æ•°æ®æ±¡æŸ“æ¨¡å‹</strong>ã€‚åœ¨å®é™…æµ‹è¯•ä¸­ï¼Œè¿™å¸®åŠ©æˆ‘ä»¬è¯†åˆ«å‡ºè®­ç»ƒé›†ä¸­15%çš„ä½è´¨é‡æ ‡æ³¨æ•°æ®ã€‚</p>
<p><strong>3. æ¢¯åº¦çƒ­åŠ›å›¾å¯è§†åŒ–</strong></p>
<p>Y-Traineré›†æˆTensorBoardï¼Œæä¾›ç›´è§‚çš„<strong>æ¢¯åº¦çƒ­åŠ›å›¾</strong>ï¼Œè®©è®­ç»ƒè¿‡ç¨‹å¯è§‚å¯Ÿã€å¯è°ƒè¯•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯ç”¨TensorBoardå¯è§†åŒ–</span>
python -m training_code.start_training \
  --use_tensorboard <span class="hljs-string">'true'</span> \
  --tensorboard_path ./logs
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0dabca5523be486fbe96d667560f8d92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5Y6f54ix5a2m5Lmg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770796127&amp;x-signature=L3oBylhr%2FZMA1v4zS1lbk9XcLY0%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹</p>
<h3 data-id="heading-6">å››ã€å®æˆ˜ï¼šç”¨Y-Traineré«˜æ•ˆå¯¹æŠ—è¿‡æ‹Ÿåˆ</h3>
<h4 data-id="heading-7">4.1 ç¯å¢ƒå‡†å¤‡ï¼ˆ10ç§’å¿«é€Ÿä¸Šæ‰‹ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…‹éš†ä»£ç </span>
git <span class="hljs-built_in">clone</span> https://github.com/yafo-ai/y-trainer.git
<span class="hljs-built_in">cd</span> y-trainer

<span class="hljs-comment"># å®‰è£…ä¾èµ–ï¼ˆå•å¡ç¯å¢ƒï¼‰</span>
pip install torch peft&gt;=0.10.0 tensorboard
pip install -r requirements.txt
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-8">4.2 å•å¡LoRAè®­ç»ƒé…ç½®ï¼ˆæ˜¾å­˜æœ‰é™åœºæ™¯ï¼‰</h4>
<pre><code class="hljs language-css" lang="css">python -m training_code<span class="hljs-selector-class">.start_training</span> \
  <span class="hljs-attr">--model_path_to_load</span> Qwen/Qwen3-<span class="hljs-number">8</span>B \
  <span class="hljs-attr">--training_type</span> 'sft' \
  <span class="hljs-attr">--use_NLIRG</span> 'true' \          # æ ¸å¿ƒï¼å¯ç”¨NLIRGç®—æ³•
  <span class="hljs-attr">--use_lora</span> 'true' \           # èŠ‚çœæ˜¾å­˜
  <span class="hljs-attr">--lora_target_modules</span> "q_proj,k_proj,v_proj,o_proj,gate_proj,up_proj,down_proj" \
  <span class="hljs-attr">--epoch</span> <span class="hljs-number">3</span> \
  <span class="hljs-attr">--batch_size</span> <span class="hljs-number">1</span> \
  <span class="hljs-attr">--token_batch</span> <span class="hljs-number">10</span> \            # å…³é”®å‚æ•°ï¼šæ¯æ¬¡åå‘ä¼ æ’­çš„tokenæ•°
  <span class="hljs-attr">--data_path</span> your_dataset<span class="hljs-selector-class">.json</span> \
  <span class="hljs-attr">--output_dir</span> ./output \
  <span class="hljs-attr">--use_tensorboard</span> 'true'      # å¯ç”¨å¯è§†åŒ–
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-9">äº”ã€é«˜é˜¶æŠ€å·§ï¼šè¯­æ–™æ’åºä¸è®­ç»ƒæ•ˆç‡ä¼˜åŒ–</h3>
<p>Y-Trainerè¿˜æä¾›äº†<strong>æ™ºèƒ½è¯­æ–™æ’åºå·¥å…·</strong>ï¼Œå¯æŒ‰éš¾æ˜“åº¦è‡ªåŠ¨è°ƒæ•´è®­ç»ƒé¡ºåºï¼Œè¿›ä¸€æ­¥æå‡æ•ˆæœï¼š</p>
<pre><code class="hljs language-lua" lang="lua">python -m training_code.utils.schedule.<span class="hljs-built_in">sort</span> \
  <span class="hljs-comment">--data_path raw_data.json \</span>
  <span class="hljs-comment">--output_path sorted_data.json \</span>
  <span class="hljs-comment">--model_path Qwen/Qwen3-8B \</span>
  <span class="hljs-comment">--mode "similarity_rank"</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p><strong>åŸç†</strong>ï¼šè¯¥å·¥å…·åˆ†ææ¨¡å‹å¯¹æ¯æ¡è¯­æ–™çš„å“åº”æ¨¡å¼ï¼ˆæŸå¤±å€¼å’Œç†µçš„å˜åŒ–ï¼‰ï¼Œè®¡ç®—éš¾æ˜“åº¦è¯„åˆ†ï¼Œæ„å»ºæ¸è¿›å¼å­¦ä¹ è·¯å¾„ã€‚åœ¨å®é™…æµ‹è¯•ä¸­ï¼Œä½¿ç”¨æ’åºåçš„è¯­æ–™è®­ç»ƒï¼Œ<strong>æ”¶æ•›é€Ÿåº¦</strong> <strong>æå‡30%+</strong> ï¼Œæœ€ç»ˆæ•ˆæœæå‡5-8%ã€‚</p>
<h3 data-id="heading-10">å…­ã€æ€»ç»“ä¸å±•æœ›</h3>
<p>Y-Traineré€šè¿‡NLIRGç®—æ³•ï¼Œå®ç°äº†å¯¹å¤§æ¨¡å‹è¿‡æ‹Ÿåˆé—®é¢˜çš„ç²¾å‡†æ‰“å‡»ï¼š</p>
<ul>
<li>
<p>âœ… <strong>Tokençº§åˆ«åŠ¨æ€è°ƒèŠ‚</strong>ï¼šä¸å†"ä¸€åˆ€åˆ‡"ï¼Œç²¾å‡†æ§åˆ¶æ¯ä¸ªè®­ç»ƒä¿¡å·</p>
</li>
<li>
<p>âœ… <strong>æ— éœ€é€šç”¨è¯­æ–™</strong>ï¼šçªç ´ä¼ ç»ŸSFTéœ€æ··åˆé€šç”¨è¯­æ–™çš„é™åˆ¶ï¼Œä¸“æ³¨å‚ç›´é¢†åŸŸ</p>
</li>
<li>
<p>âœ… <strong>èµ„æºå‹å¥½</strong>ï¼šå•å¡16GBæ˜¾å­˜å³å¯å¾®è°ƒ7Bæ¨¡å‹</p>
</li>
<li>
<p>âœ… <strong>è®­ç»ƒç¨³å®š</strong>ï¼šé¿å…è®­ç»ƒå´©æºƒï¼Œæ”¶æ•›æ›²çº¿æ›´å¹³æ»‘</p>
</li>
</ul>
<blockquote>
<p><strong>ä¸ªäººå®è·µå¿ƒå¾—</strong>ï¼šåœ¨ç”µå•†å®¢æœåœºæ™¯çš„SFTè®­ç»ƒä¸­ï¼Œä½¿ç”¨Y-Trainerçš„NLIRGç®—æ³•åï¼Œæ¨¡å‹åœ¨ä¿æŒé€šç”¨å¯¹è¯èƒ½åŠ›çš„åŒæ—¶ï¼Œä¸“ä¸šé—®é¢˜å›ç­”å‡†ç¡®ç‡æå‡22%ï¼Œä¸”å®Œå…¨æ¶ˆé™¤äº†é‡å¤å›ç­”çš„é—®é¢˜ã€‚è®­ç»ƒè¿‡ç¨‹ä¹Ÿæ›´åŠ ç¨³å®šï¼Œæ— éœ€åå¤è°ƒæ•´å­¦ä¹ ç‡å’Œæ—©åœç­–ç•¥ã€‚</p>
</blockquote>
<p><strong>å¼€æºåœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyafo-ai%2Fy-trainer" title="https://github.com/yafo-ai/y-trainer" target="_blank" ref="nofollow noopener noreferrer">GitHub</a></p>
<p><strong>æ–‡æ¡£åœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.y-agent.cn%2Fdocs%2Fy-trainer%2Fintroduction" title="https://www.y-agent.cn/docs/y-trainer/introduction" target="_blank" ref="nofollow noopener noreferrer">Y-Trainer ä»‹ç»</a></p>
<blockquote>
<p>æœ¬æ–‡ä½œè€…é•¿æœŸä»äº‹å¤§æ¨¡å‹è®­ç»ƒä¼˜åŒ–å·¥ä½œï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµå®è·µç»éªŒï¼</p>
</blockquote>
<p><strong>#äº’åŠ¨è¯é¢˜</strong>ï¼šä½ åœ¨å¤§æ¨¡å‹å¾®è°ƒä¸­é‡åˆ°è¿‡å“ªäº›è¿‡æ‹Ÿåˆé—®é¢˜ï¼Ÿæ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿæ¬¢è¿åˆ†äº«ä½ çš„å®æˆ˜ç»éªŒï¼</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»0æ­å»ºAIåŠå…¬ç³»ç»Ÿï¼š8æ¬¾å·¥å…· + 3å¥—ç»„åˆå»ºè®®]]></title>    <link>https://juejin.cn/post/7602554905270796288</link>    <guid>https://juejin.cn/post/7602554905270796288</guid>    <pubDate>2026-02-04T08:28:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602554905270796288" data-draft-id="7602554905270779904" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»0æ­å»ºAIåŠå…¬ç³»ç»Ÿï¼š8æ¬¾å·¥å…· + 3å¥—ç»„åˆå»ºè®®"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-04T08:28:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ChatExcel"/> <meta itemprop="url" content="https://juejin.cn/user/4179671691570953"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»0æ­å»ºAIåŠå…¬ç³»ç»Ÿï¼š8æ¬¾å·¥å…· + 3å¥—ç»„åˆå»ºè®®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4179671691570953/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ChatExcel
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T08:28:41.000Z" title="Wed Feb 04 2026 08:28:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åŠå…¬è½¯ä»¶çš„é€‰æ‹©ï¼Œå…¶å®å¾ˆå®¹æ˜“èµ°å‘ä¸¤ä¸ªæç«¯ï¼šè¦ä¹ˆè§‰å¾—â€œèƒ½ç”¨å°±è¡Œâ€ï¼Œè¦ä¹ˆçœ‹åˆ°æ–°å·¥å…·å°±å¿ä¸ä½å…¨éƒ½è¯•ä¸€éã€‚ä½†å·¥ä½œä¸€æ®µæ—¶é—´åä½ ä¼šå‘ç°ï¼ŒçœŸæ­£æ‹‰å¼€æ•ˆç‡å·®è·çš„ä»æ¥ä¸æ˜¯æŒ‰é’®æœ‰å¤šå°‘ï¼Œè€Œæ˜¯å®ƒèƒ½ä¸èƒ½åœ¨å…³é”®ç¯èŠ‚å¸®ä½ çœæ—¶é—´â€”â€”å°¤å…¶æ˜¯è¿™ä¸¤å¹´ <strong>AIåŠå…¬</strong>æ™®åŠä¹‹åï¼Œå¾ˆå¤šé‡å¤åŠ³åŠ¨å¼€å§‹è¢« <strong>AIå·¥å…·</strong>æ¥ç®¡ï¼Œæ•ˆç‡å·®è·è¢«è¿›ä¸€æ­¥æ”¾å¤§ã€‚</p>
<p>æˆ‘ä¼šæŒ‰çœŸå®å·¥ä½œåœºæ™¯ç›˜ç‚¹å‡ æ¬¾æ›´å€¼å¾—ä¼˜å…ˆå°è¯•çš„å·¥å…·ï¼Œå¹¶è®²æ¸…æ¥šå®ƒä»¬åˆ†åˆ«é€‚åˆè°ã€è§£å†³ä»€ä¹ˆé—®é¢˜ã€æ€ä¹ˆç»„åˆæœ€çœå¿ƒã€‚</p>
<p>å¦‚æœä½ å¯¹â€œAIåŠå…¬åˆ°åº•èƒ½è§£å†³å“ªäº›ç—›ç‚¹â€è¿˜æ²¡æœ‰æ¸…æ™°æ¦‚å¿µï¼Œå¯ä»¥å…ˆçœ‹æˆ‘è¿™ç¯‡ï¼š <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FWLvBEQPHhuEh01ENAFys-g" target="_blank" title="https://mp.weixin.qq.com/s/WLvBEQPHhuEh01ENAFys-g" ref="nofollow noopener noreferrer">ã€Šè®©ä¸Šç­æ›´è½»æ¾çš„ 10 ä¸ª AI å·¥ä½œæµï¼ˆæ¯å¤©çœ 3 å°æ—¶ï¼‰ã€‹</a></strong> ã€‚é‡Œé¢æŒ‰çœŸå®åŠå…¬åœºæ™¯æ‹†è§£äº†AIåœ¨ä¸åŒç¯èŠ‚æ€ä¹ˆçœæ—¶é—´ï¼Œèƒ½è®©ä½ æ›´ç›´è§‚åœ°æ„Ÿå—åˆ° AIåŠå…¬çš„ä»·å€¼ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€AIåŠå…¬è½¯ä»¶ç›˜ç‚¹ï¼š8æ¬¾å€¼å¾—ä¼˜å…ˆå°è¯•çš„ AIå·¥å…·</h2>
<h3 data-id="heading-1">1ï¼‰ChatExcelï¼šè¡¨æ ¼åˆ†æéå¸¸å€¼å¾—æ¨èçš„ AIå·¥å…·</h3>
<p>å¦‚æœä½ çš„ç—›ç‚¹åœ¨ Excelï¼Œé‚£ ChatExcel å¾ˆå€¼å¾—ä¼˜å…ˆå°è¯•ã€‚å¾ˆå¤šäººåšè¡¨æ ¼æ•ˆç‡ä½ï¼Œæ ¹æºä¸æ˜¯ä¸ä¼šå½•æ•°æ®ï¼Œè€Œæ˜¯ä¸ä¼šå‡½æ•°ã€ä¸ä¼šé€è§†è¡¨ã€ä¸ä¼šæ¸…æ´—æ•°æ®ï¼Œæ›´ä¸ä¼šæŠŠæ•°æ®å†™æˆç»“è®ºã€‚ChatExcel çš„æ€è·¯æ˜¯è®©ä½ ç”¨è‡ªç„¶è¯­è¨€ç›´æ¥å¯¹è¡¨æ ¼ä¸‹å‘½ä»¤ï¼Œæ¯”å¦‚â€œæŒ‰åœ°åŒºæ±‡æ€»é”€å”®é¢å¹¶ç”Ÿæˆå›¾è¡¨â€â€œæ‰¾å‡ºå¼‚å¸¸å€¼å¹¶è§£é‡ŠåŸå› â€â€œè¾“å‡ºåŒæ¯”ç¯æ¯”ç»“è®ºå¹¶å†™æˆæ±‡æŠ¥æ®µè½â€ã€‚å¯¹è¿è¥ã€è´¢åŠ¡ã€é”€å”®ã€äººäº‹ã€æŠ•æ”¾ç­‰å²—ä½æ¥è¯´ï¼Œå®ƒå¾€å¾€èƒ½å¸¦æ¥éå¸¸ç›´æ¥çš„æ—¶é—´èŠ‚çœã€‚</p>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fchatexcel.com%2F" target="_blank" title="https://chatexcel.com/" ref="nofollow noopener noreferrer">chatexcel.com/</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35ba6984bfa440bcb08ae2a142746d5b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhdEV4Y2Vs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770798524&amp;x-signature=8MPhvSN1w6ISTaEmxAf5hVLPc%2Bo%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">2ï¼‰WPS AIï¼šä¸­æ–‡åŠå…¬æœ€çœå¿ƒçš„å…¨èƒ½å‹å·¥å…·</h3>
<p>å¦‚æœä½ å¸Œæœ›ä¸€å¥—è½¯ä»¶è¦†ç›–æ–‡æ¡£ã€è¡¨æ ¼ã€PPTï¼Œå¹¶ä¸”å¸Œæœ› AI èƒ½ç›´æ¥å¸®ä½ å†™å‘¨æŠ¥ã€å†™æ€»ç»“ã€å†™æ–¹æ¡ˆï¼ŒWPS AI æ˜¯æ¯”è¾ƒç°å®çš„é€‰æ‹©ã€‚å®ƒçš„ä¼˜åŠ¿åœ¨äºä¸­æ–‡åœºæ™¯ä¼˜åŒ–è¾ƒå¥½ï¼Œç”Ÿæˆçš„å†…å®¹ç»“æ„æ¸…æ™°ã€è¯­æ°”ä¹Ÿæ›´è´´è¿‘èŒåœºè¡¨è¾¾ã€‚å¾ˆå¤šæ—¶å€™ä½ åªéœ€è¦æä¾›è¦ç‚¹ï¼ŒAI å°±èƒ½å…ˆç»™å‡ºä¸€ä»½å¯ç”¨åˆç¨¿ï¼Œå†åœ¨æ­¤åŸºç¡€ä¸Šä¿®æ”¹ï¼Œèƒ½æ˜æ˜¾å‡å°‘â€œä»0å¼€å§‹å†™â€çš„æ—¶é—´ã€‚</p>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.wps.cn" target="_blank" title="https://www.wps.cn" ref="nofollow noopener noreferrer">www.wps.cn</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba00564d72b747cc90a2f031fd66c992~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhdEV4Y2Vs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770798524&amp;x-signature=1v9sjvqAnIN2hQLWE%2Be3C4kR1iU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">3ï¼‰Microsoft 365 Copilotï¼šé€‚åˆä¼ä¸šç”¨æˆ·çš„ AIå‡çº§</h3>
<p>å¦‚æœä½ æ‰€åœ¨å›¢é˜Ÿä¸»è¦ç”¨ Wordã€Excelã€PowerPointã€Outlookï¼Œé‚£ä¹ˆ Copilot å±äºâ€œåŸåœ°å‡çº§â€ã€‚å®ƒæ›´é€‚åˆåœ¨ä¼ä¸šæµç¨‹é‡Œå‘æŒ¥ä½œç”¨ï¼Œä¾‹å¦‚ä» Word æ–‡æ¡£æç‚¼è¦ç‚¹ç”Ÿæˆ PPTï¼Œæˆ–ä» Excel æ•°æ®ç”Ÿæˆæ±‡æŠ¥æ‘˜è¦ï¼Œå†è¾“å‡ºæˆé‚®ä»¶å†…å®¹ã€‚å¯¹ä¼ä¸šç”¨æˆ·æ¥è¯´ï¼Œå®ƒæœ€å¤§çš„ä»·å€¼æ˜¯â€œå¥—ä»¶è”åŠ¨â€ï¼Œè€Œä¸æ˜¯å•ç‚¹èƒ½åŠ›ã€‚</p>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fm365.cloud.microsoft%2F" target="_blank" title="https://m365.cloud.microsoft/" ref="nofollow noopener noreferrer">m365.cloud.microsoft/</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c334bc6890404f7889e7e4d866a72e7f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhdEV4Y2Vs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770798524&amp;x-signature=xNwKyJ1QHd9Cs1vHVcJY6QqtECM%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">4ï¼‰ChatGPTï¼šæœ€é€šç”¨çš„å†™ä½œä¸æ€è·¯å‹ AIå·¥å…·</h3>
<p>ChatGPT æ›´åƒä¸€ä¸ªé€šç”¨åŠå…¬åŠ©ç†ï¼Œé€‚åˆåšæ¡†æ¶ã€å†™åˆç¨¿ã€æ¶¦è‰²è¡¨è¾¾ã€æ”¹å†™å£å»ã€‚æ¯”å¦‚ä½ è¦å†™é¡¹ç›®å¤ç›˜ã€ç«å“åˆ†æã€æ´»åŠ¨ç­–åˆ’ï¼Œå®ƒèƒ½å…ˆç»™ç»“æ„ï¼Œå†è¡¥å†…å®¹ï¼›ä½ è¦æŠŠå£è¯­åŒ–å†…å®¹æ”¹æˆæ­£å¼æ±‡æŠ¥ï¼Œå®ƒä¹Ÿå¾ˆæ“…é•¿ã€‚å¾ˆå¤šèŒåœºå†™ä½œå¡ä½ï¼Œå¹¶ä¸æ˜¯ä¸ä¼šå†™ï¼Œè€Œæ˜¯ä¸çŸ¥é“æ€ä¹ˆç»„ç»‡é€»è¾‘ï¼ŒChatGPT åœ¨è¿™æ–¹é¢èƒ½æä¾›å¾ˆå¤§å¸®åŠ©ã€‚</p>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fchatgpt.com%2F" target="_blank" title="https://chatgpt.com/" ref="nofollow noopener noreferrer">chatgpt.com/</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cde2a5dc48f44e779e2362b7eee49a70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhdEV4Y2Vs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770798524&amp;x-signature=qUmbd3Wr2mgAKI4uWq5gUlnF7Rg%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">5ï¼‰Claudeï¼šé•¿æ–‡é˜…è¯»ä¸æ€»ç»“æ›´ç¨³çš„ AIå·¥å…·</h3>
<p>å¦‚æœä½ ç»å¸¸è¦å¤„ç†é•¿ææ–™ï¼Œæ¯”å¦‚è¡Œä¸šæŠ¥å‘Šã€æ”¿ç­–æ–‡ä»¶ã€ä¼šè®®è®°å½•ã€è®¿è°ˆç¨¿ï¼ŒClaude çš„ä¼˜åŠ¿ä¼šæ›´æ˜æ˜¾ã€‚å®ƒé€‚åˆåšé•¿æ–‡æœ¬æ€»ç»“ã€æç‚¼é‡ç‚¹ã€å¯¹æ¯”ä¸åŒææ–™çš„ç»“è®ºã€‚å¯¹ç ”ç©¶ã€å’¨è¯¢ã€å†…å®¹ç­–ç•¥ç±»å²—ä½æ¥è¯´ï¼Œè¿™ç±» AIå·¥å…·èƒ½æ˜¾è‘—æå‡é˜…è¯»æ•ˆç‡ã€‚</p>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fclaude.ai%2F" target="_blank" title="https://claude.ai/" ref="nofollow noopener noreferrer">claude.ai/</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12b58e4083d349c39ef482eb9880c074~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhdEV4Y2Vs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770798524&amp;x-signature=za3gEe9BjrH1%2BFHGYcbIuXckTlc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">6ï¼‰é£ä¹¦ AIï¼šæŠŠåä½œæµç¨‹åšå¾—æ›´è‡ªåŠ¨åŒ–</h3>
<p>å¾ˆå¤šå›¢é˜Ÿæ•ˆç‡ä½ï¼Œä¸æ˜¯å†™å¾—æ…¢ï¼Œè€Œæ˜¯ä¿¡æ¯ä¸¢ã€ä»»åŠ¡ä¸è½åœ°ã€ä¼šè®®çºªè¦æ²¡äººæ•´ç†ã€‚é£ä¹¦ AI çš„ä¼˜åŠ¿å°±åœ¨äºå®ƒæ˜¯åä½œç³»ç»Ÿé‡Œçš„ AIï¼šèƒ½è‡ªåŠ¨ç”Ÿæˆä¼šè®®çºªè¦ã€æå–å…³é”®ç»“è®ºã€æ‹†è§£å¾…åŠå¹¶åŒæ­¥ç»™ç›¸å…³æˆå‘˜ã€‚å¯¹é¡¹ç›®åä½œå‹å²—ä½æ¥è¯´ï¼Œå®ƒè§£å†³çš„æ˜¯â€œæµç¨‹æ•ˆç‡â€ï¼Œä»·å€¼å¾€å¾€æ¯”å•çº¯å†™ä½œæ›´å¤§ã€‚</p>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.feishu.cn" target="_blank" title="https://www.feishu.cn" ref="nofollow noopener noreferrer">www.feishu.cn</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c4e74a5f613416387dd0f6b51f645e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhdEV4Y2Vs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770798524&amp;x-signature=68cpkZhG99wYlkuQBCWI9wDCcqE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">7ï¼‰Notion AIï¼šé€‚åˆåšçŸ¥è¯†åº“çš„ AIå·¥å…·</h3>
<p>Notion AI æ›´åâ€œèµ„æ–™æ²‰æ·€ + AIæ•´ç†â€ã€‚å¦‚æœä½ èµ„æ–™æ•£ä¹±ã€æ–‡æ¡£å¤šã€ç¬”è®°å¤šï¼Œç»å¸¸æ‰¾ä¸åˆ°ä»¥å‰åšè¿‡çš„å†…å®¹ï¼ŒNotion AI å¯ä»¥å¸®ä½ æŠŠä¿¡æ¯æ²‰æ·€ä¸‹æ¥ï¼Œå¹¶ä¸”ç”¨ AI åšå½’çº³æ€»ç»“ã€ç”Ÿæˆè¡ŒåŠ¨æ¸…å•ã€æç‚¼æ ¸å¿ƒç»“è®ºã€‚å®ƒä¸ä¸€å®šé€‚åˆæ‰€æœ‰äººï¼Œä½†å¯¹ä¿¡æ¯å¯†é›†å‹å²—ä½æ˜¯é•¿æœŸæ”¶ç›Šå‹å·¥å…·ã€‚</p>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.notion.com%2Fzh-cn%2Fproduct%2Fai" target="_blank" title="https://www.notion.com/zh-cn/product/ai" ref="nofollow noopener noreferrer">www.notion.com/zh-cn/produâ€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd815fc9af364502b40bc34f168fd663~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhdEV4Y2Vs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770798524&amp;x-signature=lQsZGEU5%2F6ql6s4E4Oruv9wVBTU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">8ï¼‰é€šä¹‰åƒé—® / è®¯é£æ˜Ÿç«ï¼šä¸­æ–‡åŠå…¬åœºæ™¯çš„å®ç”¨è¡¥å……</h3>
<p>å¦‚æœä½ æ›´åå‘ä½¿ç”¨å›½äº§ AIå·¥å…·ï¼Œé€šä¹‰åƒé—®å’Œè®¯é£æ˜Ÿç«éƒ½æ˜¯æ¯”è¾ƒç¨³çš„é€‰æ‹©ã€‚é€šä¹‰åƒé—®æ•´ä½“å‡è¡¡ï¼Œé€‚åˆå†™ä½œã€æ€»ç»“ã€ç¿»è¯‘ï¼›è®¯é£æ˜Ÿç«åœ¨ä¸­æ–‡è¡¨è¾¾ã€çºªè¦æ•´ç†ã€å…¬æ–‡è¯­æ°”æ¶¦è‰²æ–¹é¢æ›´è´´è¿‘å›½å†…åŠå…¬åœºæ™¯ã€‚å®ƒä»¬å¯ä»¥ä½œä¸ºæ—¥å¸¸â€œéšæ‰‹å†™ã€éšæ‰‹æ”¹â€çš„ AIå·¥å…·è¡¥å……ã€‚</p>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.qianwen.com%2F" target="_blank" title="https://www.qianwen.com/" ref="nofollow noopener noreferrer">www.qianwen.com/</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0c7f2628add43c7af83215ae9e224fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhdEV4Y2Vs:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770798524&amp;x-signature=fUPIEZp5F0MjiB%2BS4eQx79yQgPk%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">äºŒã€æ€ä¹ˆé€‰æ›´å¿«ï¼Ÿç»™3å¥—æ›´å®ç”¨çš„ç»„åˆ</h2>
<p>å¦‚æœä½ å¸Œæœ›å°‘æŠ˜è…¾ï¼Œå¯ä»¥æŒ‰ç…§ä¸‹è¡¨é€‰æ‹©ç»„åˆã€‚</p>





























<table><thead><tr><th>ä»»åŠ¡ç±»å‹/å²—ä½</th><th>é€‚åˆäººç¾¤</th><th>æ¨èAIå·¥å…·ç»„åˆ</th><th>æ¨èç†ç”±</th></tr></thead><tbody><tr><td>å†™ä½œå‹å²—ä½</td><td>è¿è¥ã€å¸‚åœºã€è¡Œæ”¿ã€HRã€äº§å“</td><td>WPS AI / Copilot + ChatGPT</td><td>WPS AI æˆ– Copilot è´Ÿè´£â€œè½åœ°å†™ä½œâ€ï¼ˆå‘¨æŠ¥ã€æ€»ç»“ã€æ–¹æ¡ˆï¼‰ï¼ŒChatGPT è´Ÿè´£â€œç»“æ„ä¸è¡¨è¾¾ä¼˜åŒ–â€ï¼ˆé€»è¾‘ã€äº®ç‚¹ã€å£å»ï¼‰</td></tr><tr><td>æ•°æ®å‹å²—ä½</td><td>è´¢åŠ¡ã€æŠ•æ”¾ã€é”€å”®åˆ†æã€è¿è¥åˆ†æ</td><td>ChatExcel + Excel/WPSè¡¨æ ¼</td><td>ChatExcel ä¼˜å…ˆç”¨äºæ•°æ®æ¸…æ´—ã€æ±‡æ€»ã€å›¾è¡¨ã€ç»“è®ºè¾“å‡ºï¼Œä¼ ç»Ÿè¡¨æ ¼ç”¨äºæœ€ç»ˆæ ¼å¼äº¤ä»˜ä¸è§„èŒƒåŒ–å‘ˆç°</td></tr><tr><td>åä½œå‹å²—ä½</td><td>é¡¹ç›®ç»ç†ã€ç®¡ç†å²—ã€è·¨éƒ¨é—¨åä½œ</td><td>é£ä¹¦ AI</td><td>è‡ªåŠ¨ç”Ÿæˆä¼šè®®çºªè¦ã€æ‹†è§£ä»»åŠ¡ã€åŒæ­¥ä¿¡æ¯åˆ°æµç¨‹ï¼Œå‡å°‘æ²Ÿé€šæˆæœ¬å’Œé—æ¼ï¼Œæé«˜åä½œæ•ˆç‡</td></tr></tbody></table>
<h2 data-id="heading-10">ç»“è¯­ï¼šAIå·¥å…·çš„æ„ä¹‰ï¼Œæ˜¯è®©ä½ æŠŠæ—¶é—´ç”¨åœ¨æ›´é‡è¦çš„äº‹ä¸Š</h2>
<p>åŠå…¬è½¯ä»¶ç›˜ç‚¹åˆ°æœ€åï¼Œå…¶å®å¾ˆå®¹æ˜“å¾—å‡ºä¸€ä¸ªæœ´ç´ ç»“è®ºï¼šçœŸæ­£å¥½ç”¨çš„ AIå·¥å…·ï¼Œå¹¶ä¸æ˜¯è®©ä½ â€œæ›´å¿™â€ï¼Œè€Œæ˜¯è®©ä½ å°‘åšé‡å¤åŠ³åŠ¨ï¼ŒæŠŠæ—¶é—´ç•™ç»™åˆ¤æ–­ã€æ²Ÿé€šå’Œåˆ›é€ ã€‚</p>
<p>å¦‚æœä½ åªæ‰“ç®—å…ˆé€‰ä¸€ä¸ªå·¥å…·ï¼Œä¸å¦¨ä»æœ€è€—æ—¶é—´çš„ç¯èŠ‚å¼€å§‹ï¼šå†™ææ–™å¤šå°±å…ˆç”¨å†™ä½œå‹ AIå·¥å…·ï¼Œè¡¨æ ¼å¤šå°±å…ˆç”¨ ChatExcelï¼Œåä½œæ··ä¹±å°±å…ˆç”¨é£ä¹¦ AIã€‚åªè¦æ–¹å‘é€‰å¯¹ï¼Œä½ ä¼šæ˜æ˜¾æ„Ÿåˆ°å·¥ä½œèŠ‚å¥å˜å¾—æ›´å¯æ§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨å®Œ OpenClawåï¼Œæˆ‘å¯¹â€œæ•°å­—åˆ†èº«â€çš„å…´å¥‹ä¸ææƒ§]]></title>    <link>https://juejin.cn/post/7602529888484753471</link>    <guid>https://juejin.cn/post/7602529888484753471</guid>    <pubDate>2026-02-04T08:21:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602529888484753471" data-draft-id="7602559134576361508" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨å®Œ OpenClawåï¼Œæˆ‘å¯¹â€œæ•°å­—åˆ†èº«â€çš„å…´å¥‹ä¸ææƒ§"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-04T08:21:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Oh_Barley"/> <meta itemprop="url" content="https://juejin.cn/user/948259103192138"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨å®Œ OpenClawåï¼Œæˆ‘å¯¹â€œæ•°å­—åˆ†èº«â€çš„å…´å¥‹ä¸ææƒ§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/948259103192138/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Oh_Barley
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T08:21:57.000Z" title="Wed Feb 04 2026 08:21:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¦ç™½è¯´ï¼Œæˆ‘åˆšåˆšä»â€œOpenClaw èƒ½è·‘èµ·æ¥â€çš„å…´å¥‹ä¸­ç¼“è¿‡ç¥æ¥ï¼Œç°åœ¨è„‘å­é‡Œåªå‰©ä¸¤ä»¶äº‹ï¼š</p>
<p><strong>è¿™ä¸œè¥¿å¤ªå¼ºäº†ï¼Œä»¥åŠï¼Œæˆ‘ä¸æ•¢å†è®©å®ƒéšä¾¿ç¢°æˆ‘çš„ä¸»åŠ›æœºã€‚</strong></p>
<p>ä»¥ä¸‹æ˜¯æˆ‘ä½œä¸ºä¸€ä¸ªåˆšè¸©å®Œå‘çš„ç¨‹åºå‘˜ï¼Œæœ€çœŸå®çš„æ„Ÿå—ã€‚</p>
<hr/>
<h3 data-id="heading-0">ğŸ¤¯ ç¬¬ä¸€çœ¼ï¼šè¿™ä¸å°±æ˜¯æˆ‘æ¢¦å¯ä»¥æ±‚çš„â€œæ•°å­—åˆ†èº«â€å—ï¼Ÿ</h3>
<p>æˆ‘èŠ±äº†ä¸€ä¸ªæ™šä¸Šï¼ŒæŒ‰ç…§æ–‡æ¡£åœ¨äº‘æœåŠ¡å™¨ä¸ŠæŠŠ OpenClaw è·‘äº†èµ·æ¥ã€‚Gateway å¯åŠ¨ï¼ŒWhatsApp è¿ä¸Šï¼Œæˆ‘éšæ‰‹å‘äº†å¥ï¼š</p>
<blockquote>
<p>â€œæŠŠæˆ‘ GitHub ä¸Šæœ€è¿‘ 3 å¤©çš„ PR æ•´ç†æˆä¸€ä»½ Markdownï¼Œæ ‡å‡ºå“ªäº›éœ€è¦ reviewï¼Œå‘åˆ°å›¢é˜Ÿç¾¤é‡Œã€‚â€</p>
</blockquote>
<p>æ¥ä¸‹æ¥çš„ 20 åˆ†é’Ÿï¼Œæˆ‘çœ‹ç€å®ƒåœ¨ç»ˆç«¯é‡Œè‡ªå·± <code>git clone</code>ã€ç¿»çœ‹ diffã€å†™æ€»ç»“ï¼Œæœ€åçœŸçš„æŠŠæ•´ç†å¥½çš„æŠ¥å‘Šå‘åˆ°äº† Slackã€‚é‚£ä¸€åˆ»ï¼Œæˆ‘é¸¡çš®ç–™ç˜©éƒ½èµ·æ¥äº†â€”â€”è¿™ä¸å°±æ˜¯æˆ‘æ¢¦å¯ä»¥æ±‚çš„â€œæ•°å­—åˆ†èº«â€å—ï¼Ÿ</p>
<p>å®ƒç»™æˆ‘çš„éœ‡æ’¼ä¸»è¦æœ‰ä¸‰ç‚¹ï¼š</p>
<ol>
<li>
<p><strong>çœŸæ­£çš„æœ¬åœ°ä¼˜å…ˆä¸æ•°æ®ä¸»æƒ</strong></p>
<p>å®ƒè·‘åœ¨æˆ‘è‡ªå·±çš„æœºå™¨ä¸Šï¼Œé…ç½®ã€è®°å¿†ã€æ—¥å¿—å…¨åœ¨æœ¬åœ°ç£ç›˜ã€‚æˆ‘å¯ä»¥éšæ—¶æ‹”æ‰ç½‘çº¿ï¼Œå®ƒç…§å¸¸å¹²æ´»ï¼Œè¿™ç§æŒæ§æ„Ÿæ˜¯ ChatGPT è¿™ç±»äº‘ç«¯äº§å“ç»™ä¸äº†çš„ã€‚</p>
</li>
<li>
<p><strong>ReAct + å·¥å…·è°ƒç”¨çš„æˆç†Ÿé—­ç¯</strong></p>
<p>å®ƒå†…ç½®äº†æˆç†Ÿçš„ ReAct å¾ªç¯ï¼Œèƒ½è‡ªä¸»è§„åˆ’ã€è°ƒç”¨å·¥å…·ã€è§‚å¯Ÿç»“æœå¹¶ä¿®æ­£ã€‚æˆ‘ç”šè‡³çœ‹åˆ°å®ƒä¸ºäº†å®Œæˆä¸€ä¸ªä»»åŠ¡ï¼Œè‡ªå·±å†™äº†ä¸ª Python è„šæœ¬ï¼Œæ‰§è¡Œå¤±è´¥åè‡ªåŠ¨ <code>pip install</code>ä¾èµ–ï¼Œå†é‡è¯•ï¼Œæœ€åæŠŠè„šæœ¬å­˜æˆäº† Skill ä¾›ä¸‹æ¬¡å¤ç”¨ã€‚</p>
</li>
<li>
<p><strong>å¤šæ¨¡å‹ä¸å¤šé€šé“çš„æŠ½è±¡</strong></p>
<p>æˆ‘å¯ä»¥éšæ„åœ¨ Claudeã€GPTã€DeepSeek ä¹‹é—´åˆ‡æ¢ï¼Œç”šè‡³å¯ä»¥åŒæ—¶è·‘å¤šä¸ª Agent åä½œã€‚æ‰€æœ‰èŠå¤©å¹³å°éƒ½é€šè¿‡ä¸€ä¸ªæœ¬åœ° Gateway æ¥å…¥ï¼Œæ›´æ¢å‰ç«¯ UI ä¸å½±å“åç«¯é€»è¾‘ï¼Œæ¶æ„éå¸¸æ¸…çˆ½ã€‚</p>
</li>
</ol>
<hr/>
<h3 data-id="heading-1">ğŸ˜± æ·±å…¥ä½“éªŒï¼šçˆ½æ„Ÿä¸ææƒ§å¹¶å­˜</h3>
<p>å½“æˆ‘å¼€å§‹è®©å®ƒæ¥ç®¡æ›´å¤šæ—¥å¸¸ä»»åŠ¡æ—¶ï¼Œé‚£ç§â€œå¼ºå¤§åˆ°å¯æ€•â€çš„æ„Ÿè§‰æ„ˆå‘å¼ºçƒˆã€‚</p>
<ul>
<li><strong>è‡ªåŠ¨ä¿®å¤ Bug</strong>ï¼šæˆ‘è®©å®ƒé‡æ„ä¸€å°å—ä»£ç ï¼Œå®ƒåˆ†æ diffã€æå‡ºä¿®æ”¹æ–¹æ¡ˆã€ç”Ÿæˆ patch å¹¶åº”ç”¨ã€‚è¿‡ç¨‹ä¸­é‡åˆ°æµ‹è¯•å¤±è´¥ï¼Œå®ƒä¼šè‡ªå·±è¯»æŠ¥é”™ã€æ”¹ä»£ç ã€å†è·‘æµ‹è¯•ï¼Œç›´åˆ°é—®é¢˜è§£å†³ã€‚æˆ‘å°±åƒä¸€ä¸ªç›‘å·¥ï¼Œçœ‹ç€å®ä¹ ç”ŸæŠŠæ´»å¹²å¾—åˆå¿«åˆå¥½ï¼Œå´ä¹Ÿå¼€å§‹æ‹…å¿ƒï¼šå¦‚æœå®ƒå“ªå¤©â€œè‡ªä½œä¸»å¼ â€æŠŠç”Ÿäº§ç¯å¢ƒææŒ‚äº†æ€ä¹ˆåŠï¼Ÿ</li>
<li><strong>å±é™©çš„â€œé€’å½’æŠ€èƒ½è¿›åŒ–â€</strong> ï¼šè¿™æ˜¯æœ€è®©æˆ‘åèƒŒå‘å‡‰çš„ç‰¹æ€§ã€‚å½“å®ƒå‘ç°æ²¡æœ‰ç°æˆå·¥å…·æ—¶ï¼Œä¼šç”¨ Shell å’Œ Python ç°åœºå†™è„šæœ¬å®Œæˆä»»åŠ¡ï¼ŒæˆåŠŸåè¿˜ä¼šå°†è¿™æ®µé€»è¾‘å°è£…æˆä¸€ä¸ªæ–°çš„ Skillï¼Œå›ºåŒ–ä¸‹æ¥ã€‚è¿™æ„å‘³ç€å®ƒçš„èƒ½åŠ›è¾¹ç•Œæ˜¯åŠ¨æ€æ‰©å¼ çš„ã€‚æˆ‘äº²çœ¼çœ‹ç€å®ƒä¸ºäº†æŠ“å–æŸä¸ªç½‘ç«™æ•°æ®ï¼Œè‡ªå·±å†™çˆ¬è™«ã€å¤„ç†åçˆ¬ã€è§£ææ•°æ®ï¼Œå…¨ç¨‹æ²¡æœ‰æˆ‘å¹²é¢„ã€‚è¿™ç§â€œè‡ªæˆ‘è¿›åŒ–â€çš„èƒ½åŠ›ï¼Œç”¨å¥½äº†æ˜¯ç¥å™¨ï¼Œç”¨é”™äº†å°±æ˜¯ç¾éš¾ã€‚</li>
<li><strong>å¤±æ§çš„â€œå¤è¯»æœºâ€</strong> ï¼šæˆ‘çŠ¯è¿‡ä¸€ä¸ªè‡³ä»Šæƒ³èµ·æ¥éƒ½è§‰å¾—è ¢çš„ä½çº§é”™è¯¯ã€‚æˆ‘ç”¨è‡ªå·±çš„ iMessage è´¦å·åŒæ—¶ä½œä¸ºæ§åˆ¶ç«¯å’Œ Agent ç«¯ï¼Œç»“æœå®ƒæŠŠå‘ç»™æˆ‘çš„æ¶ˆæ¯åˆå½“æˆäº†æ–°çš„æŒ‡ä»¤ï¼Œé™·å…¥äº†â€œä½ å¥½ â†’ ä½ å¥½ â†’ ä½ å¥½â€çš„æ— é™å¾ªç¯ã€‚è¿™ä¸ª Bug è®©æˆ‘æ„è¯†åˆ°ï¼Œæˆ‘æ­£åœ¨æŠŠä¸€ä¸ªæ‹¥æœ‰ç³»ç»Ÿæƒé™çš„ Agentï¼Œæ¥å…¥äº†ä¸€ä¸ªå®ƒè‡ªå·±ä¹Ÿåœ¨å…¶ä¸­å‘é€æ¶ˆæ¯çš„é€šä¿¡ç³»ç»Ÿï¼Œè¿™æœ¬èº«å°±æ˜¯ä¸€åœºç¾éš¾ã€‚</li>
<li><strong>è„†å¼±çš„é…ç½®æ–‡ä»¶</strong>ï¼šæˆ‘èŠ±äº†å¤§é‡æ—¶é—´â€œæ•‘ç«â€ï¼ŒåŸå› å¾€å¾€ä¸æ˜¯æ¨¡å‹ä¸è¡Œï¼Œè€Œæ˜¯é…ç½®é—®é¢˜ã€‚JSON é…ç½®é‡Œä¸€ä¸ªå¤šä½™çš„é€—å·ã€ä¸€ä¸ªé”™è¯¯çš„ç¼©è¿›ï¼Œå°±å¯èƒ½å¯¼è‡´æ•´ä¸ªæœåŠ¡å´©æºƒï¼Œä¸”æŠ¥é”™ä¿¡æ¯æå…¶ä¸å‹å¥½ã€‚æˆ‘ä¸å¾—ä¸æŠŠé…ç½®æ–‡ä»¶çº³å…¥ Gitï¼Œæ¯æ”¹ä¸€æ¬¡å°± <code>commit</code>ä¸€æ¬¡ï¼Œä»¥ä¾¿éšæ—¶å›æ»šã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-2">ğŸš¨ å®‰å…¨è­¦é’Ÿï¼šæˆ‘äº²æ‰‹åŸ‹ä¸‹çš„â€œå®šæ—¶ç‚¸å¼¹â€</h3>
<p>çœŸæ­£è®©æˆ‘ä»â€œçœŸé¦™â€è½¬å‘â€œä¸å®‰â€çš„ï¼Œæ˜¯é€æ¸æš´éœ²çš„å®‰å…¨é—®é¢˜ã€‚</p>
<ol>
<li>
<p><strong>é«˜æƒé™ + é«˜æš´éœ²é¢</strong></p>
<p>OpenClaw é»˜è®¤ç›‘å¬ <code>127.0.0.1:18789</code>ï¼Œçœ‹ä¼¼å®‰å…¨ï¼Œä½†åœ¨äº‘æœåŠ¡å™¨å’Œ Docker ç¯å¢ƒä¸­ï¼Œè¿™ä¸ªç«¯å£å¾ˆå®¹æ˜“é€šè¿‡åå‘ä»£ç†æš´éœ²å‡ºå»ã€‚ä¸€æ—¦é…ç½®ä¸å½“ï¼Œå°±ç­‰äºæŠŠæœåŠ¡å™¨ root æƒé™äº¤ç»™äº†å…¨ä¸–ç•Œã€‚æˆ‘èŠ±äº†ä¸€æ•´æ™šåŠ å›ºé˜²ç«å¢™ï¼Œå¼ºåˆ¶å¼€å¯ Token è®¤è¯ï¼Œæ‰ç¨å¾®å®‰å¿ƒã€‚</p>
</li>
<li>
<p><strong>æ˜æ–‡å­˜å‚¨çš„å¯†é’¥</strong></p>
<p>å®˜æ–¹æ–‡æ¡£è½»ææ·¡å†™åœ°è®©æˆ‘æŠŠ API Key å†™åœ¨é…ç½®æ–‡ä»¶é‡Œã€‚æˆ‘å¾ˆå¿«æ„è¯†åˆ°ï¼Œè¿™äº›å¯†é’¥ä¼šä»¥æ˜æ–‡å½¢å¼å­˜åœ¨äºç£ç›˜ä¸Šï¼Œç”šè‡³å¯èƒ½åœ¨å„ç§å¤‡ä»½ä¸­è¢«é•¿æœŸä¿ç•™ã€‚å¦‚æœè¿™å°æœºå™¨è¢«å…¥ä¾µï¼Œåæœä¸å ªè®¾æƒ³ã€‚æˆ‘ä¸å¾—ä¸æ‰‹åŠ¨å°†å¯†é’¥è¿ç§»åˆ°ä¸“é—¨çš„å¯†é’¥ç®¡ç†å·¥å…·ä¸­ã€‚</p>
</li>
<li>
<p><strong>é˜²ä¸èƒœé˜²çš„æç¤ºè¯æ³¨å…¥</strong></p>
<p>æˆ‘è®©å®ƒæ€»ç»“ä¸€å°é‚®ä»¶ï¼Œç»“æœå®ƒâ€œå¾ˆå¬è¯â€åœ°æŠŠé‚®ä»¶å†…å®¹è¿åŒé™„ä»¶é“¾æ¥ä¸€èµ·å‘ç»™äº†å‘ä»¶äººã€‚æˆ‘è¿™æ‰æ˜ç™½ï¼Œæ¨¡å‹æ— æ³•åŒºåˆ†â€œæŒ‡ä»¤â€å’Œâ€œæ•°æ®â€ã€‚ä»»ä½•åŒ…å«æŒ‡ä»¤çš„é‚®ä»¶ã€ç½‘é¡µæˆ–æ–‡æ¡£éƒ½å¯èƒ½æˆä¸ºæ”»å‡»è½½ä½“ï¼Œè¯±å¯¼ Agent åšå‡ºå±é™©è¡Œä¸ºã€‚æˆ‘è¢«è¿«ä¸ºæ‰€æœ‰æ¶‰åŠæ•æ„Ÿä¿¡æ¯çš„æ“ä½œéƒ½åŠ ä¸Šäº†äººå·¥å®¡æ‰¹ç¯èŠ‚ã€‚</p>
</li>
<li>
<p><strong>å¤±æ§çš„èµ„æºå ç”¨</strong></p>
<p>æœ‰ä¸€æ¬¡æˆ‘è®©å®ƒé•¿æ—¶é—´ç›‘æ§ä¸€ä¸ªä»»åŠ¡ï¼Œç»“æœå®ƒä¸ºäº†â€œä¸ä¸­æ–­â€ï¼Œç–¯ç‹‚é‡è¯•ï¼Œå æ»¡äº† CPU å’Œå†…å­˜ã€‚æˆ‘ä¸å¾—ä¸ç»™å®ƒåŠ ä¸Šèµ„æºé™åˆ¶å’Œâ€œè‡ªæ€â€æœºåˆ¶ï¼Œç¡®ä¿å®ƒä¸ä¼šæ‹–å®æ•´ä¸ªç³»ç»Ÿã€‚</p>
</li>
</ol>
<h3 data-id="heading-3">ğŸ¤” ç»“è¯­ï¼šä¸€æŠŠéœ€è¦â€œåˆ€é˜â€çš„åˆ©åˆƒ</h3>
<p>ç°åœ¨çš„æˆ‘ï¼Œå¯¹ OpenClaw çš„æ„Ÿæƒ…éå¸¸çŸ›ç›¾ã€‚</p>
<p>ä¸€æ–¹é¢ï¼Œæˆ‘çœŸå¿ƒä½©æœå®ƒçš„æ¶æ„è®¾è®¡å’Œå·¥ç¨‹å®ç°ï¼Œå®ƒè®©æˆ‘çœ‹åˆ°äº† AI Agent è½åœ°çš„å·¨å¤§æ½œåŠ›ã€‚å¦ä¸€æ–¹é¢ï¼Œæˆ‘æ¯å¤©éƒ½åœ¨æ‹…å¿ƒï¼šæˆ‘çš„ <code>.env</code>æ–‡ä»¶æ˜¯å¦å®‰å…¨ï¼Ÿé‚£ä¸ªå®šæ—¶ä»»åŠ¡ä¼šä¸ä¼šå“ªå¤©åˆ æ‰æˆ‘çš„é‡è¦æ•°æ®ï¼Ÿæˆ‘å‘ç»™å®ƒçš„ä»£ç é‡Œï¼Œæ˜¯å¦æ½œè—ç€æ¶æ„æŒ‡ä»¤ï¼Ÿ</p>
<p>OpenClaw å°±åƒä¸€æŠŠæ²¡æœ‰åˆ€é˜çš„åˆ©åˆƒï¼Œé”‹åˆ©åˆ°ä»¤äººæƒŠå¹ï¼Œä½†ä¹Ÿå±é™©åˆ°è®©äººå¿ƒæƒŠèƒ†æˆ˜ã€‚å®ƒè¿«ä½¿æˆ‘é‡æ–°æ€è€ƒâ€œæƒé™â€ã€â€œè¾¹ç•Œâ€å’Œâ€œä¿¡ä»»â€è¿™äº›åŸºç¡€é—®é¢˜ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿæƒ³å°è¯•ï¼Œæˆ‘çš„å»ºè®®æ˜¯ï¼š</p>
<ul>
<li><strong>éš”ç¦»ç¯å¢ƒ</strong>ï¼šåƒä¸‡åˆ«åœ¨ä¸»åŠ›å¼€å‘æœºä¸Šè·‘ï¼Œç”¨ä¸€å°ä¸“é—¨çš„ã€éšæ—¶å¯ä»¥ <code>rm -rf</code>çš„æœºå™¨ã€‚</li>
<li><strong>æœ€å°æƒé™</strong>ï¼šèƒ½ä¸ç»™çš„æƒé™å°±ä¸ç»™ï¼Œèƒ½ç”¨åªè¯»æ¨¡å¼å°±ç”¨åªè¯»æ¨¡å¼ã€‚</li>
<li><strong>äººå·¥å®¡æ‰¹</strong>ï¼šæ¶‰åŠæ•æ„Ÿæ•°æ®å’Œèµ„é‡‘æ“ä½œï¼Œå¿…é¡»å¼•å…¥äººå·¥å®¡æ‰¹æµç¨‹ã€‚</li>
</ul>
<p>OpenClaw ä¸æ˜¯â€œæ·˜æ±° 80% Appâ€çš„ç»ˆç‚¹ï¼Œè€Œæ˜¯ AI æ¥ç®¡æˆ‘ä»¬æ•°å­—ç”Ÿæ´»çš„ä¸€ä¸ªå±é™©èµ·ç‚¹ã€‚æˆ‘å¾ˆåº†å¹¸è‡ªå·±æ˜¯ç¬¬ä¸€æ‰¹â€œåƒèƒèŸ¹â€çš„äººï¼Œä½†æˆ‘ä¹Ÿæ¸…æ¥šåœ°çŸ¥é“ï¼Œè¿™åªâ€œé¾™è™¾â€ï¼Œæˆ‘æš‚æ—¶è¿˜ä¸æ•¢æŠŠå®ƒå…»åœ¨çœŸæ­£çš„ç”Ÿäº§ç¯å¢ƒé‡Œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OpenClaw Ubuntu å®‰è£…æŒ‡å—]]></title>    <link>https://juejin.cn/post/7602576205476921359</link>    <guid>https://juejin.cn/post/7602576205476921359</guid>    <pubDate>2026-02-04T08:29:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602576205476921359" data-draft-id="7602581823638274048" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OpenClaw Ubuntu å®‰è£…æŒ‡å—"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-04T08:29:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ·±åœ³è”“å»¶ç§‘æŠ€"/> <meta itemprop="url" content="https://juejin.cn/user/1919099566570249"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OpenClaw Ubuntu å®‰è£…æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1919099566570249/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ·±åœ³è”“å»¶ç§‘æŠ€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T08:29:49.000Z" title="Wed Feb 04 2026 08:29:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">OpenClaw Ubuntu å®‰è£…æŒ‡å—</h2>
<h3 data-id="heading-1">ğŸ“‹ ç›®å½•</h3>
<ul>
<li><a href="#%E7%AE%80%E4%BB%8B" title="#%E7%AE%80%E4%BB%8B">ç®€ä»‹</a></li>
<li><a href="#%E7%B3%BB%E7%BB%9F%E8%A6%81%E6%B1%82" title="#%E7%B3%BB%E7%BB%9F%E8%A6%81%E6%B1%82">ç³»ç»Ÿè¦æ±‚</a></li>
<li><a href="#%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4" title="#%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4">å®‰è£…æ­¥éª¤</a></li>
<li><a href="#%E9%85%8D%E7%BD%AE%E5%90%91%E5%AF%BC" title="#%E9%85%8D%E7%BD%AE%E5%90%91%E5%AF%BC">é…ç½®å‘å¯¼</a></li>
<li><a href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4" title="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4">å¸¸ç”¨å‘½ä»¤</a></li>
<li><a href="#%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4" title="#%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4">æ•…éšœæ’é™¤</a></li>
<li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90" title="#%E5%8F%82%E8%80%83%E8%B5%84%E6%BA%90">å‚è€ƒèµ„æº</a></li>
</ul>
<hr/>
<h3 data-id="heading-2">ğŸ¤– ç®€ä»‹</h3>
<p><strong>OpenClaw</strong> æ˜¯ä¸€ä¸ªè¿è¡Œåœ¨æœ¬åœ°è®¾å¤‡ä¸Šçš„ä¸ªäºº AI åŠ©æ‰‹ã€‚å®ƒå¯ä»¥åœ¨æ‚¨å·²ç»ä½¿ç”¨çš„æ¸ é“ä¸Šå›å¤æ‚¨ï¼ˆWhatsAppã€Telegramã€Slackã€Discordã€Google Chatã€Signalã€iMessageã€Microsoft Teamsã€WebChatï¼‰ï¼Œä»¥åŠ BlueBubblesã€Matrixã€Zalo å’Œ Zalo Personal ç­‰æ‰©å±•æ¸ é“ã€‚å®ƒå¯ä»¥åœ¨ macOS/iOS/Android ä¸Šè¿›è¡Œè¯­éŸ³å¯¹è¯ï¼Œå¹¶å¯ä»¥æ¸²æŸ“æ‚¨æ§åˆ¶çš„å®æ—¶ Canvasã€‚Gateway åªæ˜¯æ§åˆ¶å¹³é¢â€”â€”äº§å“æœ¬èº«æ‰æ˜¯åŠ©æ‰‹ã€‚</p>
<p>OpenClaw çš„æ ¸å¿ƒç‰¹ç‚¹ï¼š</p>
<ul>
<li>ğŸŒ <strong>å¤šæ¸ é“æ”¯æŒ</strong> - è¿æ¥å„ç§å³æ—¶é€šè®¯å¹³å°</li>
<li>ğŸ”’ <strong>æœ¬åœ°ä¼˜å…ˆ</strong> - æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ï¼Œä¿æŠ¤éšç§</li>
<li>ğŸ¨ <strong>å®æ—¶ Canvas</strong> - æ™ºèƒ½ä½“é©±åŠ¨çš„å¯è§†åŒ–å·¥ä½œåŒº</li>
<li>ğŸ—£ï¸ <strong>è¯­éŸ³äº¤äº’</strong> - æ”¯æŒè¯­éŸ³å”¤é†’å’Œå¯¹è¯æ¨¡å¼</li>
<li>ğŸ”§ <strong>ä¸°å¯Œçš„å·¥å…·é›†</strong> - æµè§ˆå™¨æ§åˆ¶ã€èŠ‚ç‚¹ç®¡ç†ã€è‡ªåŠ¨åŒ–ç­‰</li>
</ul>
<hr/>
<h3 data-id="heading-3">ğŸ–¥ï¸ ç³»ç»Ÿè¦æ±‚</h3>
<h4 data-id="heading-4">æœ€ä½ç³»ç»Ÿè¦æ±‚</h4>





























<table><thead><tr><th>ç»„ä»¶</th><th>è¦æ±‚</th></tr></thead><tbody><tr><td><strong>æ“ä½œç³»ç»Ÿ</strong></td><td>Ubuntu 20.04 LTS æˆ–æ›´é«˜ç‰ˆæœ¬</td></tr><tr><td><strong>Node.js</strong></td><td>â‰¥ 22.0.0ï¼ˆå¿…éœ€ï¼‰</td></tr><tr><td><strong>å†…å­˜</strong></td><td>è‡³å°‘ 4GB RAMï¼ˆå»ºè®® 8GBï¼‰</td></tr><tr><td><strong>å­˜å‚¨</strong></td><td>è‡³å°‘ 2GB å¯ç”¨ç©ºé—´</td></tr><tr><td><strong>ç½‘ç»œ</strong></td><td>ç¨³å®šçš„äº’è”ç½‘è¿æ¥</td></tr></tbody></table>
<h4 data-id="heading-5">Node.js ç‰ˆæœ¬æ£€æŸ¥</h4>
<p>åœ¨å®‰è£… OpenClaw ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çš„ç³»ç»Ÿå·²å®‰è£… Node.js â‰¥ 22ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥ Node.js ç‰ˆæœ¬</span>
node --version

<span class="hljs-comment"># å¦‚æœç‰ˆæœ¬ä½äº 22ï¼Œè¯·å…ˆå®‰è£…æˆ–å‡çº§ Node.js</span>
<span class="hljs-comment"># ä½¿ç”¨ nvm å®‰è£…ï¼ˆæ¨èï¼‰</span>
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
<span class="hljs-built_in">source</span> ~/.bashrc
nvm install 22
nvm use 22
</code></pre>
<h4 data-id="heading-6">æ”¯æŒçš„åŒ…ç®¡ç†å™¨</h4>
<p>OpenClaw æ”¯æŒä»¥ä¸‹åŒ…ç®¡ç†å™¨ï¼š</p>
<ul>
<li><strong>npm</strong> (æ¨è)</li>
<li><strong>pnpm</strong> (å¤‡ç”¨)</li>
<li><strong>Bun</strong> (ç”¨äºä»æºç è¿è¡Œ TypeScript)</li>
</ul>
<hr/>
<h3 data-id="heading-7">âš¡ å®‰è£…æ­¥éª¤</h3>
<h4 data-id="heading-8">æ–¹æ³•ä¸€ï¼šä½¿ç”¨ npm å®‰è£…ï¼ˆæ¨èï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…¨å±€å®‰è£… OpenClaw</span>
npm install -g openclaw@latest

<span class="hljs-comment"># éªŒè¯å®‰è£…</span>
openclaw --version
</code></pre>
<h4 data-id="heading-9">æ–¹æ³•äºŒï¼šä½¿ç”¨ pnpm å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…¨å±€å®‰è£… OpenClaw</span>
pnpm add -g openclaw@latest

<span class="hljs-comment"># éªŒè¯å®‰è£…</span>
openclaw --version
</code></pre>
<h4 data-id="heading-10">æ–¹æ³•ä¸‰ï¼šä»æºç å®‰è£…ï¼ˆå¼€å‘ç‰ˆæœ¬ï¼‰</h4>
<p>å¦‚æœæ‚¨éœ€è¦æœ€æ–°å¼€å‘ç‰ˆæœ¬æˆ–æƒ³è¦è´¡çŒ®ä»£ç ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…‹éš†ä»“åº“</span>
git <span class="hljs-built_in">clone</span> https://github.com/openclaw/openclaw.git
<span class="hljs-built_in">cd</span> openclaw

<span class="hljs-comment"># å®‰è£…ä¾èµ–ï¼ˆæ¨èä½¿ç”¨ pnpmï¼‰</span>
pnpm install

<span class="hljs-comment"># æ„å»ºé¡¹ç›®</span>
pnpm build

<span class="hljs-comment"># è¿è¡Œ onboarding å‘å¯¼</span>
pnpm openclaw onboard --install-daemon
</code></pre>
<h4 data-id="heading-11">å®‰è£…éªŒè¯</h4>
<p>å®‰è£…å®Œæˆåï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯å®‰è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹ OpenClaw ç‰ˆæœ¬</span>
openclaw --version

<span class="hljs-comment"># æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯</span>
openclaw --<span class="hljs-built_in">help</span>
</code></pre>
<hr/>
<h3 data-id="heading-12">âš™ï¸ é…ç½®å‘å¯¼</h3>
<h4 data-id="heading-13">å¯åŠ¨é…ç½®å‘å¯¼</h4>
<p>OpenClaw æä¾›äº†ä¸€ä¸ªäº¤äº’å¼çš„é…ç½®å‘å¯¼ï¼Œå¸®åŠ©æ‚¨å®Œæˆåˆå§‹è®¾ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨é…ç½®å‘å¯¼å¹¶å®‰è£…å®ˆæŠ¤è¿›ç¨‹</span>
openclaw onboard --install-daemon
</code></pre>
<h4 data-id="heading-14">é…ç½®å‘å¯¼æµç¨‹</h4>
<p>é…ç½®å‘å¯¼ä¼šå¼•å¯¼æ‚¨å®Œæˆä»¥ä¸‹æ­¥éª¤ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">ğŸ”§ OpenClaw Onboarding Wizard
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
<span class="hljs-bullet">1.</span> é…ç½®æ¨¡å‹ (anthropic/claude-opus-4-5)
<span class="hljs-bullet">2.</span> é…ç½®å·¥ä½œåŒº (~/.openclaw/workspace)
<span class="hljs-bullet">3.</span> é…ç½®é€šé“ (WhatsApp/Telegram/Slack/Discord)
<span class="hljs-bullet">4.</span> å®‰è£… Gateway å®ˆæŠ¤è¿›ç¨‹
<span class="hljs-bullet">5.</span> å®Œæˆ
</code></pre>
<h5 data-id="heading-15">æ­¥éª¤ 1ï¼šé…ç½® AI æ¨¡å‹</h5>
<p>OpenClaw æ”¯æŒå¤šç§ AI æ¨¡å‹ï¼Œå®˜æ–¹æ¨èï¼š</p>
<ul>
<li><strong>Anthropic Claude Pro/Max</strong> (æ¨è) + Opus 4.5</li>
<li><strong>OpenAI</strong> ChatGPT/Codex</li>
</ul>
<p>é…ç½®ç¤ºä¾‹ï¼ˆ<code>~/.openclaw/openclaw.json</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-json5" lang="json5">{
  agent: {
    model: "anthropic/claude-opus-4-5",
  },
}
</code></pre>
<h5 data-id="heading-16">æ­¥éª¤ 2ï¼šé…ç½®å·¥ä½œåŒº</h5>
<p>å·¥ä½œåŒºæ˜¯ OpenClaw å­˜å‚¨é…ç½®å’Œæ–‡ä»¶çš„åœ°æ–¹ï¼š</p>
<ul>
<li><strong>é»˜è®¤è·¯å¾„</strong>ï¼š<code>~/.openclaw/workspace</code></li>
<li><strong>é…ç½®æ–‡ä»¶</strong>ï¼š<code>AGENTS.md</code>, <code>SOUL.md</code>, <code>TOOLS.md</code></li>
</ul>
<h5 data-id="heading-17">æ­¥éª¤ 3ï¼šé…ç½®æ¶ˆæ¯é€šé“</h5>
<p>OpenClaw æ”¯æŒå¤šç§æ¶ˆæ¯å¹³å°ï¼š</p>

































<table><thead><tr><th>å¹³å°</th><th>é…ç½®æ–¹å¼</th></tr></thead><tbody><tr><td><strong>WhatsApp</strong></td><td><code>pnpm openclaw channels login</code></td></tr><tr><td><strong>Telegram</strong></td><td>è®¾ç½® <code>TELEGRAM_BOT_TOKEN</code></td></tr><tr><td><strong>Slack</strong></td><td>è®¾ç½® <code>SLACK_BOT_TOKEN</code> + <code>SLACK_APP_TOKEN</code></td></tr><tr><td><strong>Discord</strong></td><td>è®¾ç½® <code>DISCORD_BOT_TOKEN</code></td></tr><tr><td><strong>Signal</strong></td><td>éœ€è¦ <code>signal-cli</code></td></tr><tr><td><strong>iMessage</strong></td><td>é€šè¿‡ BlueBubbles æ¨è</td></tr></tbody></table>
<h5 data-id="heading-18">æ­¥éª¤ 4ï¼šå®‰è£… Gateway å®ˆæŠ¤è¿›ç¨‹</h5>
<p>å®ˆæŠ¤è¿›ç¨‹ç¡®ä¿ Gateway åœ¨åå°æŒç»­è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…å®ˆæŠ¤è¿›ç¨‹</span>
openclaw onboard --install-daemon

<span class="hljs-comment"># æ‰‹åŠ¨å¯åŠ¨ Gateway</span>
openclaw gateway --port 18789 --verbose
</code></pre>
<h4 data-id="heading-19">å¯åŠ¨ Gateway</h4>
<p>é…ç½®å®Œæˆåï¼Œå¯åŠ¨ Gatewayï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å‰å°è¿è¡Œ</span>
openclaw gateway --port 18789 --verbose

<span class="hljs-comment"># æˆ–ä½¿ç”¨åå°æ¨¡å¼</span>
openclaw gateway --port 18789
</code></pre>
<p>Gateway é»˜è®¤ç›‘å¬ï¼š<code>ws://127.0.0.1:18789</code></p>
<hr/>
<h3 data-id="heading-20">ğŸ“š å¸¸ç”¨å‘½ä»¤</h3>
<h4 data-id="heading-21">Gateway ç®¡ç†</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨ Gateway</span>
openclaw gateway --port 18789 --verbose

<span class="hljs-comment"># åœæ­¢ Gatewayï¼ˆæŒ‰ Ctrl+Cï¼‰</span>
<span class="hljs-comment"># æˆ–ä½¿ç”¨å®ˆæŠ¤è¿›ç¨‹ç®¡ç†</span>
openclaw gateway stop

<span class="hljs-comment"># æ£€æŸ¥ Gateway çŠ¶æ€</span>
openclaw doctor
</code></pre>
<h4 data-id="heading-22">æ¶ˆæ¯å‘é€</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å‘é€æ¶ˆæ¯åˆ°æŒ‡å®šè”ç³»äºº</span>
openclaw message send --to +1234567890 --message <span class="hljs-string">"Hello from OpenClaw"</span>

<span class="hljs-comment"># å‘é€æ¶ˆæ¯åˆ°ç¾¤ç»„</span>
openclaw message send --channel telegram --message <span class="hljs-string">"Hello group!"</span>
</code></pre>
<h4 data-id="heading-23">ä¸ AI åŠ©æ‰‹å¯¹è¯</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å‘é€æ¶ˆæ¯ç»™åŠ©æ‰‹</span>
openclaw agent --message <span class="hljs-string">"Ship checklist"</span> --thinking high

<span class="hljs-comment"># äº¤äº’å¼å¯¹è¯æ¨¡å¼</span>
openclaw agent
</code></pre>
<h4 data-id="heading-24">é€šé“ç®¡ç†</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç™»å½•é€šé“</span>
pnpm openclaw channels login

<span class="hljs-comment"># æŸ¥çœ‹å·²é…ç½®çš„é€šé“</span>
openclaw channels list

<span class="hljs-comment"># æŸ¥çœ‹é€šé“çŠ¶æ€</span>
openclaw doctor
</code></pre>
<h4 data-id="heading-25">ç³»ç»Ÿè¯Šæ–­</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿è¡Œç³»ç»Ÿè¯Šæ–­</span>
openclaw doctor

<span class="hljs-comment"># æ£€æŸ¥é…ç½®</span>
openclaw doctor --config

<span class="hljs-comment"># æŸ¥çœ‹æ—¥å¿—</span>
openclaw doctor --logs
</code></pre>
<h4 data-id="heading-26">æ›´æ–° OpenClaw</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬</span>
openclaw update

<span class="hljs-comment"># åˆ‡æ¢æ›´æ–°é€šé“</span>
openclaw update --channel stable|beta|dev

<span class="hljs-comment"># æ›´æ–°é€šé“è¯´æ˜</span>
<span class="hljs-comment"># - stable: ç¨³å®šç‰ˆï¼ˆæ¨èï¼‰</span>
<span class="hljs-comment"># - beta: æµ‹è¯•ç‰ˆ</span>
<span class="hljs-comment"># - dev: å¼€å‘ç‰ˆ</span>
</code></pre>
<h4 data-id="heading-27">å…¶ä»–å®ç”¨å‘½ä»¤</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹å¸®åŠ©</span>
openclaw --<span class="hljs-built_in">help</span>

<span class="hljs-comment"># æŸ¥çœ‹ç‰¹å®šå‘½ä»¤å¸®åŠ©</span>
openclaw gateway --<span class="hljs-built_in">help</span>
openclaw agent --<span class="hljs-built_in">help</span>
openclaw message --<span class="hljs-built_in">help</span>

<span class="hljs-comment"># é…å¯¹ç®¡ç†</span>
openclaw pairing approve &lt;channel&gt; &lt;code&gt;
</code></pre>
<hr/>
<h3 data-id="heading-28">ğŸ”§ æ•…éšœæ’é™¤</h3>
<h4 data-id="heading-29">å¸¸è§é—®é¢˜</h4>
<h5 data-id="heading-30">1. Node.js ç‰ˆæœ¬é—®é¢˜</h5>
<p><strong>é—®é¢˜</strong>ï¼š<code>Node.js version must be &gt;= 22</code></p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥å½“å‰ç‰ˆæœ¬</span>
node --version

<span class="hljs-comment"># ä½¿ç”¨ nvm å®‰è£… Node.js 22</span>
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
<span class="hljs-built_in">source</span> ~/.bashrc
nvm install 22
nvm use 22
</code></pre>
<h5 data-id="heading-31">2. Gateway æ— æ³•å¯åŠ¨</h5>
<p><strong>é—®é¢˜</strong>ï¼š<code>Port 18789 already in use</code> æˆ– Gateway è¿æ¥å¤±è´¥</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥ç«¯å£å ç”¨</span>
lsof -i :18789

<span class="hljs-comment"># åœæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹</span>
<span class="hljs-built_in">kill</span> &lt;PID&gt;

<span class="hljs-comment"># æˆ–ä½¿ç”¨å…¶ä»–ç«¯å£</span>
openclaw gateway --port 18790
</code></pre>
<h5 data-id="heading-32">3. npm å®‰è£…æƒé™é”™è¯¯</h5>
<p><strong>é—®é¢˜</strong>ï¼š<code>EACCES: permission denied</code></p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ–¹æ³• 1ï¼šä½¿ç”¨ sudoï¼ˆä¸æ¨èï¼‰</span>
sudo npm install -g openclaw@latest

<span class="hljs-comment"># æ–¹æ³• 2ï¼šé…ç½® npm ä½¿ç”¨ç”¨æˆ·ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> -p ~/.npm-global
npm config <span class="hljs-built_in">set</span> prefix <span class="hljs-string">'~/.npm-global'</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">'export PATH=~/.npm-global/bin:$PATH'</span> &gt;&gt; ~/.bashrc
<span class="hljs-built_in">source</span> ~/.bashrc
npm install -g openclaw@latest
</code></pre>
<h5 data-id="heading-33">4. é€šé“ç™»å½•å¤±è´¥</h5>
<p><strong>é—®é¢˜</strong>ï¼šWhatsApp/Telegram ç­‰é€šé“æ— æ³•ç™»å½•</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥å‡­è¯é…ç½®</span>
<span class="hljs-built_in">cat</span> ~/.openclaw/openclaw.json

<span class="hljs-comment"># æ£€æŸ¥é€šé“æ—¥å¿—</span>
openclaw doctor --logs

<span class="hljs-comment"># é‡æ–°ç™»å½•é€šé“</span>
pnpm openclaw channels login
</code></pre>
<h5 data-id="heading-34">5. å®ˆæŠ¤è¿›ç¨‹é—®é¢˜</h5>
<p><strong>é—®é¢˜</strong>ï¼šGateway å®ˆæŠ¤è¿›ç¨‹æ— æ³•å¯åŠ¨æˆ–åœæ­¢å·¥ä½œ</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥å®ˆæŠ¤è¿›ç¨‹çŠ¶æ€</span>
systemctl --user status openclaw

<span class="hljs-comment"># é‡æ–°å®‰è£…å®ˆæŠ¤è¿›ç¨‹</span>
openclaw onboard --install-daemon

<span class="hljs-comment"># æ‰‹åŠ¨å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹</span>
systemctl --user start openclaw

<span class="hljs-comment"># æŸ¥çœ‹å®ˆæŠ¤è¿›ç¨‹æ—¥å¿—</span>
journalctl --user -u openclaw -f
</code></pre>
<h5 data-id="heading-35">6. å†…å­˜ä¸è¶³</h5>
<p><strong>é—®é¢˜</strong>ï¼šGateway è¿è¡Œä¸€æ®µæ—¶é—´åå´©æºƒ</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥å†…å­˜ä½¿ç”¨</span>
free -h

<span class="hljs-comment"># æ¸…ç† Gateway è¿›ç¨‹</span>
openclaw gateway stop
pkill -f openclaw

<span class="hljs-comment"># é‡å¯ Gateway</span>
openclaw gateway --port 18789
</code></pre>
<h4 data-id="heading-36">è¯Šæ–­å‘½ä»¤</h4>
<p>å½“é‡åˆ°é—®é¢˜æ—¶ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤è·å–è¯Šæ–­ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®Œæ•´ç³»ç»Ÿæ£€æŸ¥</span>
openclaw doctor

<span class="hljs-comment"># æ£€æŸ¥é…ç½®</span>
openclaw doctor --config

<span class="hljs-comment"># æ£€æŸ¥é€šé“çŠ¶æ€</span>
openclaw doctor --channels

<span class="hljs-comment"># æ£€æŸ¥æ—¥å¿—</span>
openclaw doctor --logs

<span class="hljs-comment"># æ£€æŸ¥ç½‘ç»œè¿æ¥</span>
openclaw doctor --network
</code></pre>
<h4 data-id="heading-37">æ—¥å¿—æŸ¥çœ‹</h4>
<p>OpenClaw çš„æ—¥å¿—æ–‡ä»¶ä½ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Gateway æ—¥å¿—</span>
<span class="hljs-built_in">cat</span> ~/.openclaw/logs/gateway.log

<span class="hljs-comment"># é€šé“æ—¥å¿—</span>
<span class="hljs-built_in">cat</span> ~/.openclaw/logs/channels.log

<span class="hljs-comment"># å®æ—¶æŸ¥çœ‹æ—¥å¿—</span>
<span class="hljs-built_in">tail</span> -f ~/.openclaw/logs/gateway.log
</code></pre>
<h4 data-id="heading-38">è·å–å¸®åŠ©</h4>
<p>å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½æ— æ³•è§£å†³æ‚¨çš„é—®é¢˜ï¼š</p>
<ol>
<li><strong>æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openclaw.ai" target="_blank" title="https://docs.openclaw.ai" ref="nofollow noopener noreferrer">docs.openclaw.ai</a></li>
<li><strong>æŸ¥çœ‹æ•…éšœæ’é™¤æŒ‡å—</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openclaw.ai%2Fchannels%2Ftroubleshooting" target="_blank" title="https://docs.openclaw.ai/channels/troubleshooting" ref="nofollow noopener noreferrer">docs.openclaw.ai/channels/trâ€¦</a></li>
<li><strong>åŠ å…¥ Discord ç¤¾åŒº</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdiscord.gg%2Fclawd" target="_blank" title="https://discord.gg/clawd" ref="nofollow noopener noreferrer">discord.gg/clawd</a></li>
<li><strong>æäº¤ Issue</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenclaw%2Fopenclaw%2Fissues" target="_blank" title="https://github.com/openclaw/openclaw/issues" ref="nofollow noopener noreferrer">github.com/openclaw/opâ€¦</a></li>
</ol>
<hr/>
<h3 data-id="heading-39">ğŸ—ï¸ OpenClaw æ¶æ„æ¦‚è§ˆ</h3>
<pre><code class="hljs language-less" lang="less">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      <span class="hljs-selector-tag">OpenClaw</span> æ¶æ„å›¾                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  <span class="hljs-selector-tag">WhatsApp</span> / <span class="hljs-selector-tag">Telegram</span> / <span class="hljs-selector-tag">Slack</span> / <span class="hljs-selector-tag">Discord</span> / <span class="hljs-selector-tag">Google</span> <span class="hljs-selector-tag">Chat</span> / <span class="hljs-selector-tag">Signal</span>  â”‚
â”‚  <span class="hljs-selector-tag">iMessage</span> / <span class="hljs-selector-tag">BlueBubbles</span> / <span class="hljs-selector-tag">Microsoft</span> <span class="hljs-selector-tag">Teams</span> / <span class="hljs-selector-tag">Matrix</span> / <span class="hljs-selector-tag">Zalo</span>      â”‚
â”‚                           â”‚                                     â”‚
â”‚                           â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    <span class="hljs-selector-tag">Gateway</span> (æ§åˆ¶å¹³é¢)                        â”‚ â”‚
â”‚  â”‚               <span class="hljs-selector-tag">ws</span>:<span class="hljs-comment">//127.0.0.1:18789                           â”‚ â”‚</span>
â”‚  â”‚  â€¢ ä¼šè¯ç®¡ç†    â€¢ é€šé“è¿æ¥    â€¢ å·¥å…·æ‰§è¡Œ    â€¢ äº‹ä»¶å¤„ç†        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                           â”‚                                     â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚         â–¼                 â–¼                 â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  <span class="hljs-selector-tag">Pi</span> <span class="hljs-selector-tag">Agent</span>   â”‚   â”‚    <span class="hljs-selector-tag">CLI</span>      â”‚   â”‚  <span class="hljs-selector-tag">Web</span> <span class="hljs-selector-tag">UI</span>     â”‚          â”‚
â”‚  â”‚  (RPC)      â”‚   â”‚ <span class="hljs-selector-tag">openclaw</span>..  â”‚   â”‚  <span class="hljs-selector-tag">Dashboard</span>  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                           â”‚                                     â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚         â–¼                 â–¼                 â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ <span class="hljs-selector-tag">macOS</span> <span class="hljs-selector-tag">App</span>   â”‚   â”‚  <span class="hljs-selector-tag">iOS</span> <span class="hljs-selector-tag">Node</span>   â”‚   â”‚ <span class="hljs-selector-tag">Android</span> <span class="hljs-selector-tag">Node</span>â”‚          â”‚
â”‚  â”‚ <span class="hljs-selector-tag">Menu</span> <span class="hljs-selector-tag">Bar</span>    â”‚   â”‚  <span class="hljs-selector-tag">Canvas</span>     â”‚   â”‚  <span class="hljs-selector-tag">Canvas</span>     â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-40">æ¶æ„è¯´æ˜</h4>
<ol>
<li><strong>æ¶ˆæ¯æ¸ é“å±‚</strong> - æ¥æ”¶æ¥è‡ªå„å¹³å°çš„æ¶ˆæ¯</li>
<li><strong>Gateway æ§åˆ¶å¹³é¢</strong> - æ ¸å¿ƒæ§åˆ¶å•å…ƒï¼Œç®¡ç†ä¼šè¯å’Œå·¥å…·</li>
<li><strong>Agent è¿è¡Œæ—¶</strong> - AI æ™ºèƒ½ä½“ï¼Œå¤„ç†æ¶ˆæ¯å’Œæ‰§è¡Œä»»åŠ¡</li>
<li><strong>å®¢æˆ·ç«¯å±‚</strong> - CLIã€Web UIã€æ¡Œé¢/ç§»åŠ¨åº”ç”¨</li>
</ol>
<hr/>
<h3 data-id="heading-41">ğŸ“– å‚è€ƒèµ„æº</h3>
<h4 data-id="heading-42">å®˜æ–¹èµ„æº</h4>
<ul>
<li><strong>å®˜ç½‘</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopenclaw.ai" target="_blank" title="https://openclaw.ai" ref="nofollow noopener noreferrer">openclaw.ai</a></li>
<li><strong>æ–‡æ¡£</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openclaw.ai" target="_blank" title="https://docs.openclaw.ai" ref="nofollow noopener noreferrer">docs.openclaw.ai</a></li>
<li><strong>GitHub</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FOpenClaw%2FOpenClaw" target="_blank" title="https://github.com/OpenClaw/OpenClaw" ref="nofollow noopener noreferrer">github.com/OpenClaw/Opâ€¦</a></li>
<li><strong>Discord</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdiscord.gg%2Fclawd" target="_blank" title="https://discord.gg/clawd" ref="nofollow noopener noreferrer">discord.gg/clawd</a></li>
</ul>
<h4 data-id="heading-43">å¿«é€Ÿå…¥é—¨</h4>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openclaw.ai%2Fstart%2Fgetting-started" target="_blank" title="https://docs.openclaw.ai/start/getting-started" ref="nofollow noopener noreferrer">Getting Started</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openclaw.ai%2Fstart%2Fwizard" target="_blank" title="https://docs.openclaw.ai/start/wizard" ref="nofollow noopener noreferrer">Onboarding Wizard</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openclaw.ai%2Fstart%2Fshowcase" target="_blank" title="https://docs.openclaw.ai/start/showcase" ref="nofollow noopener noreferrer">Showcase</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openclaw.ai%2Fstart%2Ffaq" target="_blank" title="https://docs.openclaw.ai/start/faq" ref="nofollow noopener noreferrer">FAQ</a></li>
</ul>
<h4 data-id="heading-44">å®‰è£…ä¸æ›´æ–°</h4>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openclaw.ai%2Finstall" target="_blank" title="https://docs.openclaw.ai/install" ref="nofollow noopener noreferrer">Installation Guide</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openclaw.ai%2Finstall%2Fupdating" target="_blank" title="https://docs.openclaw.ai/install/updating" ref="nofollow noopener noreferrer">Updating</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openclaw.ai%2Finstall%2Fdocker" target="_blank" title="https://docs.openclaw.ai/install/docker" ref="nofollow noopener noreferrer">Docker Installation</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openclaw.ai%2Finstall%2Fnix" target="_blank" title="https://docs.openclaw.ai/install/nix" ref="nofollow noopener noreferrer">Nix Installation</a></li>
</ul>
<h4 data-id="heading-45">é…ç½®ä¸ä½¿ç”¨</h4>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openclaw.ai%2Fgateway%2Fconfiguration" target="_blank" title="https://docs.openclaw.ai/gateway/configuration" ref="nofollow noopener noreferrer">Gateway Configuration</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openclaw.ai%2Fconcepts%2Fmodels" target="_blank" title="https://docs.openclaw.ai/concepts/models" ref="nofollow noopener noreferrer">Models</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openclaw.ai%2Fchannels" target="_blank" title="https://docs.openclaw.ai/channels" ref="nofollow noopener noreferrer">Channel Setup</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openclaw.ai%2Fgateway%2Fsecurity" target="_blank" title="https://docs.openclaw.ai/gateway/security" ref="nofollow noopener noreferrer">Security Guide</a></li>
</ul>
<hr/>
<h3 data-id="heading-46">ğŸ“ ç»ˆç«¯å‘½ä»¤ç¤ºä¾‹</h3>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">$ </span><span class="bash">openclaw onboard --install-daemon</span>
ğŸ”§ OpenClaw Onboarding Wizard
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. é…ç½®æ¨¡å‹ (anthropic/claude-opus-4-5)
2. é…ç½®å·¥ä½œåŒº (~/.openclaw/workspace)
3. é…ç½®é€šé“ (WhatsApp/Telegram/Slack/Discord)
4. å®‰è£… Gateway å®ˆæŠ¤è¿›ç¨‹
5. å®Œæˆ
<span class="hljs-meta prompt_">
&gt; </span><span class="bash">é€‰æ‹©æ“ä½œ: 4</span>
âœ… æ­£åœ¨å®‰è£… Gateway å®ˆæŠ¤è¿›ç¨‹...
âœ… å®ˆæŠ¤è¿›ç¨‹å®‰è£…æˆåŠŸï¼
<span class="hljs-meta prompt_">
$ </span><span class="bash">openclaw gateway --port 18789 --verbose</span>
ğŸ”Œ Gateway å¯åŠ¨åœ¨ ws://127.0.0.1:18789
âœ… Gateway å·²å°±ç»ª
<span class="hljs-meta prompt_">
$ </span><span class="bash">openclaw message send --to +1234567890 --message <span class="hljs-string">"Hello from OpenClaw"</span></span>
âœ… æ¶ˆæ¯å·²å‘é€
<span class="hljs-meta prompt_">
$ </span><span class="bash">openclaw agent --message <span class="hljs-string">"Ship checklist"</span> --thinking high</span>
ğŸ¤– æ­£åœ¨æ€è€ƒ...
âœ… å“åº”å·²ç”Ÿæˆ
</code></pre>
<hr/>
<h3 data-id="heading-47">ğŸ¯ ä¸‹ä¸€æ­¥</h3>
<p>å®Œæˆå®‰è£…åï¼Œå»ºè®®æ‚¨ï¼š</p>
<ol>
<li>âœ… è¿è¡Œ <code>openclaw onboard</code> å®Œæˆåˆå§‹é…ç½®</li>
<li>âœ… å¯åŠ¨ Gatewayï¼š<code>openclaw gateway --port 18789 --verbose</code></li>
<li>âœ… é…ç½®è‡³å°‘ä¸€ä¸ªæ¶ˆæ¯æ¸ é“</li>
<li>âœ… å°è¯•å‘é€ç¬¬ä¸€æ¡æ¶ˆæ¯æµ‹è¯•</li>
<li>âœ… æŸ¥çœ‹æ–‡æ¡£äº†è§£é«˜çº§åŠŸèƒ½</li>
</ol>
<hr/>
<p><strong>Happy Exfoliating!</strong> ğŸ¦</p>
<p><em>OpenClaw ç”± Peter Steinberger å’Œç¤¾åŒºå¼€å‘ç»´æŠ¤</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vscodeåœ¨è¡Œå†…æ˜¾ç¤ºgitä¿¡æ¯ï¼Œä¸ä¼šè¿˜æœ‰äººåœ¨ç”¨æ’ä»¶å§ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7602531501457080329</link>    <guid>https://juejin.cn/post/7602531501457080329</guid>    <pubDate>2026-02-04T06:27:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602531501457080329" data-draft-id="7602534556076933146" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vscodeåœ¨è¡Œå†…æ˜¾ç¤ºgitä¿¡æ¯ï¼Œä¸ä¼šè¿˜æœ‰äººåœ¨ç”¨æ’ä»¶å§ï¼Ÿ"/> <meta itemprop="keywords" content="Visual Studio Code,Git"/> <meta itemprop="datePublished" content="2026-02-04T06:27:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€å‰‘è½ç¬™æ­Œ"/> <meta itemprop="url" content="https://juejin.cn/user/157969840083720"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vscodeåœ¨è¡Œå†…æ˜¾ç¤ºgitä¿¡æ¯ï¼Œä¸ä¼šè¿˜æœ‰äººåœ¨ç”¨æ’ä»¶å§ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/157969840083720/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€å‰‘è½ç¬™æ­Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T06:27:37.000Z" title="Wed Feb 04 2026 06:27:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">vscodeåœ¨è¡Œå†…æ˜¾ç¤ºgitä¿¡æ¯ï¼Œä¸ä¼šè¿˜æœ‰äººåœ¨ç”¨æ’ä»¶å§ï¼Ÿ</h2>
<p>åœ¨ä»£ç è¡Œå†…æ˜¾ç¤ºgitä¿¡æ¯æ˜¯å¾ˆæ–¹ä¾¿çš„äº‹æƒ…ï¼Œå°±åƒè¿™æ ·
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ad7bbc0830e48f7ac6c11c3e5542a42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5YmR6JC956yZ5q2M:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770794000&amp;x-signature=p%2FrVMq6VeOQvg48%2BQRMxEFsrIKE%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>é¼ æ ‡åœ¨å“ªé‡Œï¼Œå°±ä¼šæ˜¾ç¤ºå½“å‰è¡Œæœ€æ–°çš„gitä¿¡æ¯ï¼Œè¿™æ ·ä¸ä»…æ–¹ä¾¿æ‰¾åˆ°ä¸Šæ¬¡æ›´æ”¹çš„äººå’Œæ—¶é—´ä»¥åŠæ›´æ”¹ä¿¡æ¯ï¼Œå¹¶ä¸”åœ¨é¼ æ ‡ç§»åˆ°ä¿¡æ¯ä¸Šæ—¶ï¼Œè¿˜ä¼šå±•ç¤ºæ›´è¯¦ç»†çš„ä¿¡æ¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd7e12fee97140a1a32747b95b15d544~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5YmR6JC956yZ5q2M:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770794000&amp;x-signature=cZCqu3D1Rd01QzmPum8ReE0UjMo%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>åœ¨ç‚¹å‡»å±•å¼€é¢æ¿çš„å“ˆå¸Œå€¼æ—¶ï¼Œè¿˜ä¼šç›´æ¥è·³è½¬é‚£ä¸€æ¬¡æäº¤çš„æ–‡ä»¶æ¯”è¾ƒã€‚</p>
<p>è¿™ä¸ªåŠŸèƒ½ï¼Œæœ€æ—©æˆ‘æ˜¯é€šè¿‡å…¶ä»–äººçŸ¥é“çš„ï¼Œä¹Ÿæ˜¯é€šè¿‡ç™¾åº¦æ‰äº†è§£åˆ°å¦‚ä½•ä¸‹è½½ç¬¬ä¸‰æ–¹æ’ä»¶æ¥å®ç°çš„ã€‚</p>
<p>é‚£ä¹ˆï¼Œå¦‚æ­¤æ–¹ä¾¿åŠŸèƒ½ï¼Œå®˜æ–¹æœ‰æ²¡æœ‰å‘¢ï¼Ÿæœ‰çš„ï¼æœ‰çš„å…„å¼Ÿï¼</p>
<p>æˆ‘ä»¬æ‰“å¼€vscodeçš„è®¾ç½®ï¼Œæœç´¢git blameï¼Œå¦‚æœåœ¨æ²¡æœ‰å®‰è£…å…¶ä»–æ’ä»¶çš„æƒ…å†µä¸‹ï¼Œåº”è¯¥æ˜¯ç›´æ¥å‡ºæ¥4é¡¹è®¾ç½®ï¼Œéƒ½æ˜¯æˆ‘ä»¬è®¾ç½®æ­¤åŠŸèƒ½ä¼šç”¨åˆ°çš„ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c40d44c623649dd80bc5c168974c737~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5YmR6JC956yZ5q2M:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770794000&amp;x-signature=lreVrECa8EqCy8Itpv1x7z%2F4ie4%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>é‚£ä¹ˆæˆ‘ä»¬æ¥ç®€å•è¯´æ˜ä¸€ä¸‹ï¼ˆæˆ‘è¿™é‡Œç”¨äº†ä¸­æ–‡ç¿»è¯‘æ’ä»¶ç¿»è¯‘è¿‡ï¼Œåº”è¯¥ä¹Ÿéƒ½å¯ä»¥çœ‹æ‡‚ï¼‰ã€‚</p>
<ol>
<li>
<p>å‹¾é€‰äº†ï¼Œå°±æ˜¯ä¼šåœ¨ç¼–è¾‘å™¨çš„è¡Œå†…å±•ç¤ºgitä¿¡æ¯</p>
</li>
<li>
<p>è¾“å…¥å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²ä¼šç›´æ¥æ”¾åˆ°æ¨¡æ¿å­—ç¬¦ä¸²è¿›è¡Œæ›¿æ¢ï¼Œè€Œæ›¿æ¢çš„å˜é‡ï¼Œå°±å¦‚å›¾ä¸­æ‰€ç¤ºï¼Œçœ‹ä½ å¸Œæœ›åœ¨è¡Œå†…çœ‹åˆ°å“ªäº›ä¿¡æ¯ã€‚æ¯”å¦‚æˆ‘åªæƒ³çœ‹åˆ°ä½œè€…å’Œä¿®æ”¹çš„æ—¥æœŸï¼Œé‚£å°±åº”è¯¥æ˜¯${authorName}${authorDate}</p>
</li>
<li>
<p>å‹¾é€‰äº†ï¼Œå°±ä¼šåœ¨åº•éƒ¨çŠ¶æ€æ å±•ç¤ºgitä¿¡æ¯
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82fef0d4b6f44291ab2dbf6c940562f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5YmR6JC956yZ5q2M:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770794000&amp;x-signature=mN2qjYOtZEv%2FUr851sckzmhYyH4%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
</li>
<li>
<p>å­—ç¬¦ä¸²è§„åˆ™å’Œ2ç›¸åŒ</p>
</li>
</ol>
<p>å½“ç„¶ï¼Œè¿™ä¸ªåŠŸèƒ½ä¸åªæ˜¯vscodeï¼Œåªè¦æ˜¯ä»¥vscodeä¸ºåŸºç¡€å¼€å‘çš„å…¶ä»–å·¥å…·ï¼Œä¹Ÿæ˜¯æ”¯æŒçš„ã€‚traeï¼Œqoderï¼Œcursorç­‰ç­‰ã€‚</p>
<p>æ¯”å¦‚æˆ‘è¿˜åœ¨ä½¿ç”¨çš„zedï¼Œè™½ç„¶è®¤çœŸæ¯”è¾ƒèµ·æ¥è¿˜æ˜¯ä¸å¦‚vscodeï¼Œä½†æ•´ä½“æ¥è¯´å·²ç»å’Œvscodeçš„ä½¿ç”¨ä½“éªŒå·®ä¸äº†å¤ªå¤šäº†ã€‚</p>
<p>zedçš„è®¾ç½®ï¼Œä¹Ÿåªéœ€è¦æœç´¢blameï¼Œå°±å¯ä»¥çœ‹åˆ°å…³äºinline blameçš„è®¾ç½®é¡¹ï¼Œè™½ç„¶è‡ªç”±åº¦ç›¸æ¯”è¾ƒvscodeç³»å·®äº†ç‚¹ï¼Œä½†ä¹Ÿå¤Ÿç”¨ã€‚</p>
<p>æ€»ä¹‹ï¼Œæˆ‘å¸Œæœ›ï¼Œä¸è¦å†æœ‰äººåªä¸ºäº†ä¸€ä¸ªè¡Œå†…æ˜¾ç¤ºgitä¿¡æ¯çš„åŠŸèƒ½å»ä¸‹è½½å•ç‹¬çš„æ’ä»¶äº†ï¼ï¼ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SSH åå‘éš§é“ï¼ˆReverse Port Forwardingï¼‰è¯¦è§£]]></title>    <link>https://juejin.cn/post/7602634187283431434</link>    <guid>https://juejin.cn/post/7602634187283431434</guid>    <pubDate>2026-02-04T07:51:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602634187283431434" data-draft-id="7602565408533266482" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SSH åå‘éš§é“ï¼ˆReverse Port Forwardingï¼‰è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-04T07:51:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JesFelix"/> <meta itemprop="url" content="https://juejin.cn/user/2909721418541968"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SSH åå‘éš§é“ï¼ˆReverse Port Forwardingï¼‰è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2909721418541968/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JesFelix
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T07:51:48.000Z" title="Wed Feb 04 2026 07:51:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. ä»€ä¹ˆæ˜¯ SSH åå‘éš§é“ï¼Ÿ</h2>
<p>SSH åå‘éš§é“ï¼ˆReverse Tunnelï¼‰ï¼Œä¹Ÿç§°ä¸ºÂ <strong>è¿œç¨‹ç«¯å£è½¬å‘ï¼ˆRemote Port Forwardingï¼‰</strong> ï¼Œæ˜¯ä¸€ç§é€šè¿‡å·²å»ºç«‹çš„ SSH è¿æ¥ï¼Œå°†<strong>è¿œç¨‹ä¸»æœºä¸Šçš„æŸä¸ªæœ¬åœ°ç«¯å£</strong>ç»‘å®šåˆ°<strong>æœ¬åœ°ä¸»æœºä¸Šçš„æŸä¸ªæœåŠ¡</strong>çš„æŠ€æœ¯ã€‚</p>
<p>å…¶æ ¸å¿ƒèƒ½åŠ›æ˜¯ï¼š</p>
<blockquote>
<p><strong>è®©ä½äºå†…ç½‘æˆ–å—é™ç½‘ç»œä¸­çš„è¿œç¨‹ä¸»æœºï¼Œèƒ½å¤Ÿè®¿é—®ä½ æœ¬åœ°æœºå™¨ä¸Šçš„æœåŠ¡</strong>ã€‚</p>
</blockquote>
<p>å…¸å‹ç”¨é€”ï¼š</p>
<ul>
<li>å°†æœ¬åœ°å¼€å‘æœåŠ¡ä¸´æ—¶æš´éœ²ç»™æœåŠ¡å™¨è°ƒè¯•</li>
<li>å†…ç½‘æœåŠ¡å™¨é€šè¿‡æœ¬åœ°ä¸­è½¬è®¿é—®å¤–éƒ¨èµ„æº</li>
<li>è¿œç¨‹æ—¥å¿—æ”¶é›†ã€ä¸´æ—¶ API è°ƒç”¨ç­‰</li>
</ul>
<hr/>
<h2 data-id="heading-1">ğŸ§© 2. åŸºæœ¬è¯­æ³•ä¸å‚æ•°è¯¦è§£</h2>
<p>bash</p>
<p>ç¼–è¾‘</p>
<pre><code class="hljs language-ini" lang="ini">ssh -R <span class="hljs-section">[è¿œç¨‹ç«¯å£]</span>:<span class="hljs-section">[ç›®æ ‡ä¸»æœº]</span>:<span class="hljs-section">[ç›®æ ‡ç«¯å£]</span> <span class="hljs-section">[ç”¨æˆ·]</span>@<span class="hljs-section">[è¿œç¨‹ä¸»æœº]</span>
</code></pre>
<h3 data-id="heading-2">å‚æ•°è¯´æ˜ï¼š</h3>
<p>è¡¨æ ¼</p>



































<table><thead><tr><th>éƒ¨åˆ†</th><th>å«ä¹‰</th><th>æ‰€åœ¨ä½ç½®</th></tr></thead><tbody><tr><td><code>-R</code></td><td>å¯ç”¨Â <strong>åå‘ï¼ˆè¿œç¨‹ï¼‰ç«¯å£è½¬å‘</strong></td><td>SSH å®¢æˆ·ç«¯é€‰é¡¹</td></tr><tr><td><code>[è¿œç¨‹ç«¯å£]</code></td><td>åœ¨Â <strong>è¿œç¨‹ä¸»æœº</strong>Â ä¸Šç›‘å¬çš„ç«¯å£ï¼ˆå¦‚Â <code>8888</code>ï¼‰</td><td>ä»…é»˜è®¤ç»‘å®šÂ <code>127.0.0.1</code></td></tr><tr><td><code>[ç›®æ ‡ä¸»æœº]</code></td><td><strong>æœ¬åœ°ä¸»æœº</strong>Â ä¸Šçš„ç›®æ ‡åœ°å€ï¼ˆé€šå¸¸ä¸ºÂ <code>127.0.0.1</code>ï¼‰</td><td>ç›¸å¯¹äºæ‰§è¡ŒÂ <code>ssh</code>Â çš„æœºå™¨</td></tr><tr><td><code>[ç›®æ ‡ç«¯å£]</code></td><td><strong>æœ¬åœ°ä¸»æœº</strong>Â ä¸Šçš„æœåŠ¡ç«¯å£ï¼ˆå¦‚Â <code>7890</code>ï¼‰</td><td/></tr><tr><td><code>[ç”¨æˆ·]@[è¿œç¨‹ä¸»æœº]</code></td><td>ç™»å½•ç›®æ ‡æœåŠ¡å™¨</td><td>å¦‚Â <code>user@192.168.1.100</code></td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ å…³é”®ç†è§£ï¼š<br/>
<strong>â€œç›®æ ‡ä¸»æœºâ€å’Œâ€œç›®æ ‡ç«¯å£â€å§‹ç»ˆç›¸å¯¹äºæ‰§è¡ŒÂ <code>ssh</code>Â å‘½ä»¤çš„æœ¬åœ°æœºå™¨è€Œè¨€ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-3">ğŸ” 3. å·¥ä½œæµç¨‹å›¾è§£</h2>
<p>å‡è®¾ä½ åœ¨Â <strong>æœ¬åœ°æœºå™¨ A</strong>Â æ‰§è¡Œå‘½ä»¤ï¼Œè¿æ¥åˆ°Â <strong>è¿œç¨‹æœåŠ¡å™¨ B</strong>ï¼š</p>
<p>bash</p>
<p>ç¼–è¾‘</p>
<pre><code class="hljs language-sql" lang="sql">ssh <span class="hljs-operator">-</span>R <span class="hljs-number">8888</span>:<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">7890</span> <span class="hljs-keyword">user</span><span class="hljs-variable">@B</span>
</code></pre>
<p>æ•°æ®æµå‘å¦‚ä¸‹ï¼š</p>
<p>text</p>
<p>ç¼–è¾‘</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[æœåŠ¡å™¨ B]</span>                     <span class="hljs-selector-attr">[æœ¬åœ°æœºå™¨ A]</span>
<span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">8888</span>   &lt;--SSHéš§é“--&gt;   <span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">7890</span>
     â†‘                                â†‘
     â””â”€ ä»»ä½•ç¨‹åºè¿æ¥æ­¤ç«¯å£            â””â”€ æœ¬åœ°è¿è¡Œçš„æœåŠ¡ï¼ˆå¦‚ä»£ç†ã€Web åº”ç”¨ï¼‰
</code></pre>
<p>å½“ B ä¸Šçš„ç¨‹åºè®¿é—®Â <code>127.0.0.1:8888</code>Â æ—¶ï¼Œè¯·æ±‚ä¼šç» SSH éš§é“è½¬å‘è‡³ A çš„Â <code>127.0.0.1:7890</code>ï¼Œå“åº”åŸè·¯è¿”å›ã€‚</p>
<blockquote>
<p>âœ… å…¨ç¨‹åŠ å¯†ï¼Œä¸”æ— éœ€å¼€æ”¾ A çš„é˜²ç«å¢™ï¼ˆå› ç›®æ ‡ä¸ºå›ç¯åœ°å€ï¼‰ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-4">ğŸ” 4. é»˜è®¤å®‰å…¨é™åˆ¶</h2>
<ul>
<li>
<p>åå‘éš§é“ç«¯å£Â <strong>ä»…ç›‘å¬Â <code>127.0.0.1</code></strong>ï¼Œå¤–éƒ¨æ— æ³•è®¿é—®</p>
</li>
<li>
<p>è‹¥éœ€å…è®¸å…¶ä»– IP è®¿é—®ï¼ˆä¸æ¨èï¼‰ï¼Œéœ€åœ¨æœåŠ¡å™¨é…ç½®ï¼š</p>
<p>conf</p>
<p>ç¼–è¾‘</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># /etc/ssh/sshd_config</span>
GatewayPorts <span class="hljs-built_in">yes</span>
</code></pre>
<p>å¹¶ä½¿ç”¨Â <code>-R *:8888:...</code>Â æ ¼å¼</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-5">ğŸ”‘ 5. ä½¿ç”¨å¯†é’¥è®¤è¯å»ºç«‹åå‘éš§é“</h2>
<p>åå‘éš§é“ä¸è®¤è¯æ–¹å¼æ— å…³ã€‚è‹¥ä½¿ç”¨ SSH å¯†é’¥å¯¹ï¼Œåªéœ€æŒ‡å®šç§é’¥è·¯å¾„ï¼š</p>
<p>bash</p>
<p>ç¼–è¾‘</p>
<pre><code class="hljs language-sql" lang="sql">ssh <span class="hljs-operator">-</span>i ï½<span class="hljs-operator">/</span>.ssh<span class="hljs-operator">/</span>private_key \
    <span class="hljs-operator">-</span>R <span class="hljs-number">8888</span>:<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">7890</span> \
    <span class="hljs-keyword">user</span><span class="hljs-variable">@server</span><span class="hljs-operator">-</span>ip
</code></pre>
<h3 data-id="heading-6">æ¨èåšæ³•ï¼šä½¿ç”¨ SSH é…ç½®æ–‡ä»¶ï¼ˆ<code>ï½/.ssh/config</code>ï¼‰</h3>
<p>text</p>
<p>ç¼–è¾‘</p>
<pre><code class="hljs language-bash" lang="bash">Host tunnel-server
    HostName 203.0.113.10
    User ubuntu
    IdentityFile ï½/.ssh/my-key
    RemoteForward 8888 127.0.0.1:7890
</code></pre>
<p>ä¹‹ååªéœ€è¿è¡Œï¼š</p>
<p>bash</p>
<p>ç¼–è¾‘</p>
<pre><code class="hljs language-vbscript" lang="vbscript">ssh tunnel-<span class="hljs-built_in">server</span>
</code></pre>
<h3 data-id="heading-7">åå°è¿è¡Œï¼ˆä»…éš§é“ï¼Œæ— äº¤äº’ shellï¼‰</h3>
<p>bash</p>
<p>ç¼–è¾‘</p>
<pre><code class="hljs language-perl" lang="perl">ssh -i ï½/.ssh/<span class="hljs-keyword">my</span>-key -N -f -R <span class="hljs-number">8888</span>:<span class="hljs-number">127.0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">1</span>:<span class="hljs-number">7890</span> user@server
</code></pre>
<ul>
<li><code>-N</code>ï¼šä¸æ‰§è¡Œè¿œç¨‹å‘½ä»¤</li>
<li><code>-f</code>ï¼šåå°è¿è¡Œ</li>
</ul>
<hr/>
<h2 data-id="heading-8">ğŸŒ 6. é…åˆç¯å¢ƒå˜é‡å®ç°åº”ç”¨å±‚ä»£ç†ï¼ˆé‡è¦è¡¥å……ï¼‰</h2>
<p>ä»…å»ºç«‹éš§é“è¿˜ä¸å¤Ÿâ€”â€”<strong>åº”ç”¨ç¨‹åºå¿…é¡»ä¸»åŠ¨è¿æ¥éš§é“ç«¯å£</strong>æ‰èƒ½ç”Ÿæ•ˆã€‚<br/>
ä¸ºäº†è®©å¸¸è§å‘½ä»¤è¡Œå·¥å…·ï¼ˆå¦‚Â <code>curl</code>ã€<code>git</code>ã€<code>wget</code>ã€<code>pip</code>Â ç­‰ï¼‰<strong>è‡ªåŠ¨èµ°ä»£ç†</strong>ï¼Œéœ€è®¾ç½®æ ‡å‡†ç¯å¢ƒå˜é‡ã€‚</p>
<h3 data-id="heading-9">è®¾ç½®å…¨å±€ä»£ç†ç¯å¢ƒå˜é‡ï¼ˆåœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼‰</h3>
<p>bash</p>
<p>ç¼–è¾‘</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ³¨æ„ï¼šè·¯å¾„ä¸­çš„ ï½ å¿…é¡»æ˜¯è‹±æ–‡æ³¢æµªçº¿ï¼Œä¸èƒ½æ˜¯ä¸­æ–‡å…¨è§’ç¬¦å·</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">'export http_proxy=http://127.0.0.1:8888'</span> &gt;&gt; ï½/.bashrc
<span class="hljs-built_in">echo</span> <span class="hljs-string">'export https_proxy=http://127.0.0.1:8888'</span> &gt;&gt; ï½/.bashrc
<span class="hljs-built_in">echo</span> <span class="hljs-string">'export no_proxy=localhost,127.0.0.1,.local'</span> &gt;&gt; ï½/.bashrc
<span class="hljs-built_in">source</span> ï½/.bashrc
</code></pre>
<blockquote>
<p>âš ï¸Â <strong>å¸¸è§é”™è¯¯</strong>ï¼šä½¿ç”¨ä¸­æ–‡è¾“å…¥æ³•ä¸‹çš„Â <code>ï½</code>ï¼ˆå…¨è§’ï¼‰ä¼šå¯¼è‡´è·¯å¾„è§£æå¤±è´¥ï¼Œè¯·åŠ¡å¿…ä½¿ç”¨è‹±æ–‡Â <code>ï½</code>ã€‚</p>
</blockquote>
<h3 data-id="heading-10">å„å˜é‡ä½œç”¨è¯´æ˜ï¼š</h3>
<p>è¡¨æ ¼</p>





















<table><thead><tr><th>å˜é‡</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>http_proxy</code></td><td>æŒ‡å®š HTTP æµé‡çš„ä»£ç†åœ°å€</td></tr><tr><td><code>https_proxy</code></td><td>æŒ‡å®š HTTPS æµé‡çš„ä»£ç†åœ°å€ï¼ˆå¤šæ•°å·¥å…·ä¼šå¤ç”¨Â <code>http_proxy</code>ï¼Œä½†æ˜¾å¼è®¾ç½®æ›´å¯é ï¼‰</td></tr><tr><td><code>no_proxy</code></td><td>æŒ‡å®š<strong>ä¸èµ°ä»£ç†</strong>çš„åŸŸåæˆ– IP åˆ—è¡¨ï¼Œé¿å…æœ¬åœ°é€šä¿¡è¢«è¯¯ä»£ç†</td></tr></tbody></table>
<ul>
<li>
<p><code>no_proxy</code>Â ä¸­çš„æ¡ç›®æ”¯æŒï¼š</p>
<ul>
<li><code>localhost</code>,Â <code>127.0.0.1</code>ï¼šæœ¬æœºå›ç¯</li>
<li><code>.local</code>ï¼šåŒ¹é…æ‰€æœ‰ä»¥Â <code>.local</code>Â ç»“å°¾çš„åŸŸåï¼ˆå¦‚Â <code>api.local</code>ï¼‰</li>
<li>å¤šä¸ªå€¼ç”¨é€—å·åˆ†éš”ï¼Œ<strong>ä¸è¦åŠ ç©ºæ ¼</strong></li>
</ul>
</li>
</ul>
<h3 data-id="heading-11">ç”Ÿæ•ˆèŒƒå›´ï¼ˆéµå®ˆè¿™äº›å˜é‡çš„å·¥å…·ï¼‰ï¼š</h3>
<p>âœ…Â <code>curl</code>,Â <code>wget</code><br/>
âœ…Â <code>git</code>ï¼ˆHTTPS æ–¹å¼ï¼‰<br/>
âœ…Â <code>pip</code>,Â <code>npm</code>,Â <code>yarn</code>,Â <code>composer</code><br/>
âœ… å¤§å¤šæ•°ç”¨ Python/Go/Node.js ç¼–å†™çš„ CLI å·¥å…·</p>
<h3 data-id="heading-12">âŒ ä¸ç”Ÿæ•ˆçš„åœºæ™¯ï¼š</h3>
<ul>
<li><code>ping</code>,Â <code>traceroute</code>ï¼ˆICMP åè®®ï¼Œä¸èµ° HTTP ä»£ç†ï¼‰</li>
<li><code>apt</code>Â /Â <code>yum</code>ï¼ˆéœ€å•ç‹¬é…ç½®ï¼‰</li>
<li>Dockerï¼ˆéœ€é…ç½® daemon ä»£ç†ï¼‰</li>
<li>è‡ªå®šä¹‰ç¨‹åºï¼ˆè‹¥æœªè¯»å–ç¯å¢ƒå˜é‡ï¼‰</li>
</ul>
<blockquote>
<p>ğŸ’¡ æç¤ºï¼šå¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤éªŒè¯ä»£ç†æ˜¯å¦ç”Ÿæ•ˆï¼š</p>
<p>bash</p>
<p>ç¼–è¾‘</p>
<pre><code class="hljs language-arduino" lang="arduino">curl -s https:<span class="hljs-comment">//httpbin.org/ip</span>
</code></pre>
</blockquote>
<hr/>
<h2 data-id="heading-13">âš ï¸ 7. æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>éš§é“ç”Ÿå‘½å‘¨æœŸ = SSH ä¼šè¯ç”Ÿå‘½å‘¨æœŸ</strong><br/>
æ–­å¼€ SSH åéš§é“ç«‹å³å¤±æ•ˆã€‚é•¿æœŸä½¿ç”¨å»ºè®®é…åˆÂ <code>autossh</code>Â æˆ– systemd æœåŠ¡ã€‚</li>
<li><strong>ç«¯å£å†²çª</strong><br/>
ç¡®ä¿è¿œç¨‹ç«¯å£æœªè¢«å ç”¨ï¼ˆå¦‚Â <code>8888</code>ï¼‰ã€‚</li>
<li><strong>æƒé™æœ€å°åŒ–</strong><br/>
ä½¿ç”¨æ™®é€šç”¨æˆ·ï¼ˆé rootï¼‰å»ºç«‹éš§é“ï¼Œé™ä½å®‰å…¨é£é™©ã€‚</li>
<li><strong>é¿å…è¿‡åº¦ä»£ç†</strong><br/>
åˆç†è®¾ç½®Â <code>no_proxy</code>ï¼Œé˜²æ­¢æœ¬åœ°æœåŠ¡ï¼ˆå¦‚æ•°æ®åº“ã€Redisï¼‰è¢«é”™è¯¯ä»£ç†ã€‚</li>
<li><strong>æ—¥å¿—ä¸ç›‘æ§</strong><br/>
å¯é€šè¿‡Â <code>ssh -v</code>Â æŸ¥çœ‹éš§é“å»ºç«‹è¿‡ç¨‹ï¼Œä¾¿äºæ’é”™ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-14">âœ… 8. æ€»ç»“</h2>
<p>è¡¨æ ¼</p>





























<table><thead><tr><th>åŠŸèƒ½</th><th>å‘½ä»¤/é…ç½®</th></tr></thead><tbody><tr><td>åŸºç¡€åå‘éš§é“</td><td><code>ssh -R 8888:127.0.0.1:7890 user@host</code></td></tr><tr><td>ä½¿ç”¨å¯†é’¥</td><td>åŠ Â <code>-i ï½/.ssh/key</code>Â æˆ–é…ç½®Â <code>IdentityFile</code></td></tr><tr><td>åå°è¿è¡Œ</td><td>åŠ Â <code>-N -f</code></td></tr><tr><td>è‡ªåŠ¨ä»£ç†</td><td>åœ¨æœåŠ¡å™¨è®¾ç½®Â <code>http_proxy</code>Â ç­‰ç¯å¢ƒå˜é‡</td></tr><tr><td>æŒä¹…åŒ–é…ç½®</td><td>å†™å…¥Â <code>ï½/.bashrc</code>Â å¹¶Â <code>source</code></td></tr></tbody></table>
<blockquote>
<p>SSH åå‘éš§é“ + ç¯å¢ƒå˜é‡ä»£ç† = åœ¨å—é™ç½‘ç»œä¸­æ‰“é€šçµæ´»é€šä¿¡çš„é»„é‡‘ç»„åˆã€‚</p>
</blockquote>
<hr/>
<blockquote>
<p>ğŸ“ŒÂ <strong>é™„ï¼šæ­£å‘ vs åå‘éš§é“</strong></p>
<ul>
<li><strong>æ­£å‘éš§é“ï¼ˆ<code>-L</code>ï¼‰</strong> ï¼šæœ¬åœ°ç›‘å¬ â†’ è½¬å‘åˆ°è¿œç¨‹æœåŠ¡ï¼ˆç”¨äºè®¿é—®è¿œç¨‹å†…ç½‘ï¼‰</li>
<li><strong>åå‘éš§é“ï¼ˆ<code>-R</code>ï¼‰</strong> ï¼šè¿œç¨‹ç›‘å¬ â†’ è½¬å‘åˆ°æœ¬åœ°æœåŠ¡ï¼ˆç”¨äºæš´éœ²æœ¬åœ°æœåŠ¡ï¼‰</li>
</ul>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AutoMQ Ã— Aklivityï¼šè§£é”äº‘åŸç”Ÿå®æ—¶æ•°æ®ä»·å€¼]]></title>    <link>https://juejin.cn/post/7602555027304202280</link>    <guid>https://juejin.cn/post/7602555027304202280</guid>    <pubDate>2026-02-04T08:42:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602555027304202280" data-draft-id="7602576205477019663" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AutoMQ Ã— Aklivityï¼šè§£é”äº‘åŸç”Ÿå®æ—¶æ•°æ®ä»·å€¼"/> <meta itemprop="keywords" content="Kafka"/> <meta itemprop="datePublished" content="2026-02-04T08:42:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AutoMQ"/> <meta itemprop="url" content="https://juejin.cn/user/2878958479084707"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AutoMQ Ã— Aklivityï¼šè§£é”äº‘åŸç”Ÿå®æ—¶æ•°æ®ä»·å€¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2878958479084707/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AutoMQ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T08:42:24.000Z" title="Wed Feb 04 2026 08:42:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘ä»¬éå¸¸è£å¹¸åœ°å®£å¸ƒï¼ŒAutoMQ ä¸ Aklivity æ­£å¼è¾¾æˆæˆ˜ç•¥åˆä½œä¼™ä¼´å…³ç³»ï¼å…±åŒè‡´åŠ›äºæ¨è¿›äº‘åŸç”Ÿå®æ—¶æ•°æ®åŸºç¡€è®¾æ–½çš„æ¼”è¿›ï¼ŒåŠ©åŠ›ä¼ä¸šæ·±åº¦é‡Šæ”¾å®æ—¶æ•°æ®çš„æ ¸å¿ƒä»·å€¼ã€‚</p>
<p>æ•°å­—åŒ–è½¬å‹å…¨é¢åŠ é€Ÿï¼Œå®æ—¶æ•°æ®å·²æˆä¸ºå•†ä¸šåˆ›æ–°ä¸æå‡ç«äº‰åŠ›çš„æ ¸å¿ƒã€‚ç„¶è€Œï¼Œä¼ ç»Ÿçš„å®æ—¶æ•°æ®æ¶æ„åœ¨å¤šç³»ç»Ÿäº’è”ã€æ•°æ®å®‰å…¨ä¿éšœä»¥åŠæˆæœ¬æ§åˆ¶ç­‰æ–¹é¢ä»é¢ä¸´é‡é‡æŒ‘æˆ˜ã€‚</p>
<p>AutoMQ çš„æ— çŠ¶æ€äº‘åŸç”Ÿ Kafka å¹³å°ç°å·²æ·±åº¦é›†æˆ Aklivity çš„å¤šåè®®ç½‘å…³æŠ€æœ¯ã€‚æ­¤æ¬¡æˆ˜ç•¥åˆä½œç»“åˆäº† AutoMQ åœ¨æ‰“é€ ä½æˆæœ¬ã€é«˜å¼¹æ€§ Kafka è§£å†³æ–¹æ¡ˆæ–¹é¢çš„æŠ€æœ¯ç§¯ç´¯ï¼Œä»¥åŠ Aklivity åœ¨å¤šåè®®ç½‘å…³é¢†åŸŸçš„é¢†å…ˆèƒ½åŠ›ï¼Œæ—¨åœ¨èµ‹èƒ½ä¼ä¸šè½»æ¾æ‰“ç ´ç³»ç»Ÿå­¤å²›ï¼Œæ„å»ºé©±åŠ¨ä¸šåŠ¡æŒç»­å¢é•¿çš„ä¸‹ä¸€ä»£åº”ç”¨ç¨‹åºã€‚</p>
<h2 data-id="heading-0">å…³äº AutoMQ</h2>
<p>AutoMQ æ˜¯å¸‚åœºä¸Šå”¯ä¸€ä¸€æ¬¾åŸç”Ÿè¿è¡Œåœ¨äº‘å¯¹è±¡å­˜å‚¨ä¹‹ä¸Šçš„ä½å»¶è¿Ÿã€æ— ç›˜åŒ– Kafka å¹³å°ã€‚é’ˆå¯¹ Apache Kafka åœ¨äº‘åŸç”Ÿæ—¶ä»£é¢ä¸´çš„é«˜æˆæœ¬ã€å¼¹æ€§å·®åŠè¿ç»´å¤æ‚ç­‰é¡½ç–¾ï¼ŒAutoMQ åœ¨ä¿æŒ 100% å…¼å®¹ Kafka åè®®çš„åŸºç¡€ä¸Šï¼Œå¯¹å­˜å‚¨å±‚è¿›è¡Œäº†å½»åº•çš„é‡æ„ã€‚ é€šè¿‡é‡‡ç”¨è®¡ç®—ä¸å­˜å‚¨å®Œå…¨è§£è€¦çš„å…±äº«å­˜å‚¨æ¶æ„ï¼ŒAutoMQ å°† Kafka Broker è½¬å˜ä¸ºæ— çŠ¶æ€çš„è®¡ç®—èŠ‚ç‚¹ã€‚è¿™ä¸€è®¾è®¡ä½¿ä¼ä¸šèƒ½å¤Ÿåœ¨ä¸ç‰ºç‰²æ€§èƒ½çš„å‰æä¸‹ï¼Œå……åˆ†åˆ©ç”¨å¯¹è±¡å­˜å‚¨çš„å¯é æ€§ä¸æˆæœ¬ä¼˜åŠ¿ï¼Œå¹¶æ”¯æŒåŒ…æ‹¬å®‰å…¨çš„BYOCä»¥åŠè‡ªæ‰˜ç®¡è½¯ä»¶åœ¨å†…çš„å¤šç§éƒ¨ç½²æ¨¡å¼ã€‚</p>
<h3 data-id="heading-1">100% Kafka å…¼å®¹æ€§</h3>
<p>å®Œå…¨å…¼å®¹ Apache Kafka åè®®ä¸ç”Ÿæ€ï¼Œæ”¯æŒä»ç°æœ‰é›†ç¾¤é›¶åœæœºè¿ç§»ï¼Œæ— éœ€ä»»ä½•ä»£ç ä¿®æ”¹ã€‚</p>
<h3 data-id="heading-2">åŸºäº S3 çš„ä½å»¶è¿Ÿè¡¨ç°</h3>
<p>å®Œç¾èåˆäº†å¯¹è±¡å­˜å‚¨çš„æ— é™æ‰©å±•èƒ½åŠ›ä¸å—å­˜å‚¨çš„é«˜æ€§èƒ½ã€‚é€šè¿‡ç‹¬åˆ›çš„ WAL å¸è½½æœºåˆ¶ï¼ŒAutoMQ åœ¨å°†æ•°æ®ç›´æ¥æŒä¹…åŒ–è‡³ S3 çš„åŒæ—¶ï¼Œå®ç°äº†ä¸ªä½æ•°æ¯«ç§’çº§çš„å†™å…¥å»¶è¿Ÿï¼ˆP99 &lt; 10msï¼‰ã€‚</p>
<h3 data-id="heading-3">äº‘é€Ÿçº§å¼¹æ€§ä½“éªŒ</h3>
<p>æ— çŠ¶æ€ Brokeræ”¯æŒè®¡ç®—èµ„æºç§’çº§ Auto-Scalingã€‚åˆ†åŒºè¿ç§»è€—æ—¶ä»æ•°å°æ—¶ç¼©çŸ­è‡³ 1.5 ç§’ï¼Œè®©é›†ç¾¤æ‰©å®¹çœŸæ­£å®ç°ä¸šåŠ¡æ— æ„Ÿã€‚</p>
<h3 data-id="heading-4">10 å€æˆæœ¬ç¼©å‡</h3>
<p>åŸºäºå¯¹è±¡å­˜å‚¨å®ç°æ— é™å­˜å‚¨å’ŒæŒ‰é‡ä»˜è´¹ï¼Œå¹¶é€šè¿‡å¤šç‚¹å†™å…¥æ¶æ„å½»åº•æ¶ˆé™¤æ˜‚è´µçš„è·¨å¯ç”¨åŒºï¼ˆAZï¼‰æ•°æ®å¤åˆ¶æµé‡ï¼Œå°†èµ„æºé—²ç½®æµªè´¹é™è‡³æœ€ä½ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3f9911541e84b2a88c8b399619d19f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXV0b01R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770799343&amp;x-signature=kJ%2F8vzBP8sfX0k48pFdgVOl8p8U%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">å…³äº Aklivity</h2>
<p>Aklivity æ˜¯ Zilla æ•°æ®å¹³å°çš„å¼€å‘è€…ï¼Œè‡´åŠ›äºæ‰“é€ ä¸“ä¸ºå®æ—¶æµè®¾è®¡çš„äº‘åŸç”Ÿè¿æ¥å±‚ï¼Œå¹¶å…¨é¢éµå¾ª AsyncAPI æ ‡å‡†ã€‚å…¶æ ¸å¿ƒç›®æ ‡æ˜¯å°†åŸå§‹åŸºç¡€è®¾æ–½è½¬åŒ–ä¸ºé¢å‘ Webã€ç§»åŠ¨ç«¯ã€ç‰©è”ç½‘åŠå¾®æœåŠ¡çš„å¯æ²»ç†ã€å¯å‘ç°çš„æ•°æ®äº§å“ã€‚ ä¸è„†å¼±çš„è‡ªå®šä¹‰èƒ¶æ°´ä»£ç æˆ–ç¬¨é‡çš„è¿æ¥å™¨ä¸åŒï¼ŒAklivity é‡‡ç”¨äº†åŸºäº Zilla ä»£ç†çš„æ— çŠ¶æ€ã€å£°æ˜å¼æ¶æ„ï¼Œæ”¯æŒå¤šç§åè®®ï¼ˆHTTPã€SSEã€MQTTã€gRPCï¼‰ç›´æ¥ä¸ Kafka è¿›è¡Œä»²è£è½¬æ¢ã€‚è¿™æå¤§åœ°ç®€åŒ–äº†é›†æˆé€»è¾‘ï¼Œå¹¶å®ç°äº†å¤–éƒ¨å®¢æˆ·ç«¯ä¸åç«¯æ‹“æ‰‘çš„è§£è€¦ã€‚å‡­å€Ÿâ€œå·¦ç§»â€æ²»ç†æ¨¡å‹å’Œé«˜æ€§èƒ½éé˜»å¡ I/Oï¼ŒAklivity åœ¨è¾¹ç¼˜ç«¯å®ç°äº†åŸç”Ÿå¥‘çº¦æ ¡éªŒä¸å¯é çš„å®‰å…¨ä¿éšœï¼Œä¸ºç°ä»£æ•°æ®ç”Ÿæ€æä¾›æµ·é‡æ‰©å±•èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-6">æ— ç¼åè®®ä»²è£</h3>
<p>Zilla ä¸å†ä¾èµ–è„†å¼±çš„ç‚¹å¯¹ç‚¹é›†æˆå’Œèƒ¶æ°´ä»£ç ï¼Œè€Œæ˜¯åœ¨æ ‡å‡†å®¢æˆ·ç«¯ä¸ä»¥ Kafka ä¸ºåç«¯çš„æµä¹‹é—´æä¾›åŸç”Ÿåè®®ä»²è£ã€‚Webï¼ˆHTTP/WebSocket/SSEï¼‰ã€ç§»åŠ¨ç«¯å’Œç‰©è”ç½‘ï¼ˆMQTT/gRPCï¼‰å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ Zilla ç›´æ¥æ¶ˆè´¹å’Œç”Ÿäº§å®æ—¶æ•°æ®ï¼Œæ— éœ€ç¼–å†™è‡ªå®šä¹‰è¿æ¥å™¨æˆ–éƒ¨ç½² Sidecarã€‚</p>
<h3 data-id="heading-7">åŸºäº AsyncAPI çš„å¥‘çº¦é©±åŠ¨å‹æµå¤„ç†</h3>
<p>Aklivity é€šè¿‡å®šä¹‰ä¸¥è°¨çš„ AsyncAPI å¥‘çº¦ï¼Œå°†åŸå§‹ Kafka æµè½¬åŒ–ä¸ºå—æ²»ç†çš„æ•°æ®äº§å“ã€‚å¥‘çº¦æˆä¸ºäº†é¢‘é“ã€Payload Schema åŠè®¿é—®è¯­ä¹‰çš„å”¯ä¸€äº‹å®æ¥æºâ€”â€”å°† Topic è½¬åŒ–ä¸ºå›¢é˜Ÿå¯ä¿¡èµ–çš„ã€å…·å¤‡ç‰ˆæœ¬æ§åˆ¶çš„å¯å¤ç”¨æ¥å£ã€‚</p>
<h3 data-id="heading-8">è§£è€¦ä¸æ— çŠ¶æ€æ¶æ„</h3>
<p>ä½œä¸ºä¸“ä¸ºäº‘åŸç”Ÿæ—¶ä»£æ„å»ºçš„å¹³å°ï¼ŒZilla å……å½“äº†ä¸€ä¸ªæ— çŠ¶æ€æ•°æ®é¢ï¼Œå°†å®¢æˆ·ç«¯ä¸åç«¯ Broker æ‹“æ‰‘å®Œå…¨è§£è€¦ã€‚è¿™ä½¿å¾— AutoMQ èƒ½å¤Ÿç¬é—´å®Œæˆ Broker ç¼©å®¹æˆ–åˆ†åŒºé‡å¹³è¡¡ï¼Œè€Œæ— éœ€å¼ºåˆ¶å‰ç«¯å®¢æˆ·ç«¯é‡æ–°è¿æ¥ï¼Œä»è€Œæ„å»ºèµ·ä¸€ä¸ªçœŸæ­£å¼¹æ€§ã€é›¶åœæœºçš„æ—¶é—´æµå¤„ç†æŠ€æœ¯æ ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80b884f6a517441184b1b9ce7097a875~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXV0b01R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770799343&amp;x-signature=U2FtAMpJXypfryn9Qaeerhj1GyA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">AutoMQ Ã— Aklivityï¼šäº‘åŸç”Ÿæµå¤„ç†çš„æ— çŠ¶æ€æŠ€æœ¯æ ˆ</h2>
<p>AutoMQ çš„æ— çŠ¶æ€å…±äº«å­˜å‚¨æ¶æ„ä¸ Aklivity çš„æµåŸç”Ÿç½‘å…³æ·±åº¦é›†æˆï¼Œå®ç°äº†äº‘åŸç”Ÿæ•°æ®æ¶æ„çš„å†æ¬¡è¿›åŒ–ã€‚é€šè¿‡å°†å¤šåè®®ä¸­ä»‹ä¸æµå­˜å‚¨å±‚åˆ†ç¦»ï¼Œè¯¥è”åˆè§£å†³æ–¹æ¡ˆä¸ºäº‘åŸç”Ÿæ—¶ä»£æä¾›äº†æ— ç¼çš„è¿æ¥æ€§ã€æé€Ÿå¼¹æ€§æ‰©å±•èƒ½åŠ›ä»¥åŠæ›´ä¸¥è°¨çš„æ²»ç†ä½“ç³»ã€‚</p>
<h3 data-id="heading-10">å¤šåè®®ä¸­ä»‹ï¼šåœ¨è¾¹ç¼˜ç«¯æ‰©å±•è¿æ¥èƒ½åŠ›</h3>
<p>Aklivity çš„ Zilla ç½‘å…³å……å½“äº† AutoMQ çš„é€šç”¨ç¿»è¯‘å™¨ï¼Œä½¿ Web (HTTP/SSE)ã€ç§»åŠ¨ç«¯å’Œç‰©è”ç½‘ (MQTT/gRPC) è®¾å¤‡èƒ½å¤Ÿç›´æ¥ä¸ Kafka é›†ç¾¤é€šä¿¡ï¼Œæ— éœ€ç¼–å†™è„†å¼±çš„èƒ¶æ°´ä»£ç æˆ–è‡ªå®šä¹‰è¿æ¥å™¨ã€‚è¿™ç§æ¶æ„å®ç°äº†å‰ç«¯å®¢æˆ·ç«¯ä¸åç«¯æ‹“æ‰‘çš„è§£è€¦ï¼šå½“ AutoMQ è¿›è¡Œå³æ—¶åˆ†åŒºé‡å¹³è¡¡æˆ– Broker æ‰©ç¼©å®¹æ—¶ï¼ŒZilla èƒ½å¤Ÿä¸ºè¾¹ç¼˜è®¾å¤‡ç»´æŒç¨³å®šä¸”æ— æ„Ÿçš„è¿æ¥ã€‚</p>
<h3 data-id="heading-11">å¥‘çº¦æ²»ç†ï¼šå¼ºåŒ–å®‰å…¨ä¸ç­–ç•¥æ‰§è¡Œ</h3>
<p>è¯¥è”åˆè§£å†³æ–¹æ¡ˆæ„å»ºäº†ä»è¾¹ç¼˜åˆ° VPC çš„åšå®å®‰å…¨è¾¹ç•Œã€‚Aklivity åœ¨ç½‘å…³å±‚è´Ÿè´£åè®®çº§æ²»ç†ï¼ŒåŒ…æ‹¬ AsyncAPI å¥‘çº¦æ ¡éªŒã€RBACï¼ˆåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰ä»¥åŠå®¡è®¡æ—¥å¿—ã€‚åŒæ—¶ï¼ŒAutoMQ é€šè¿‡ BYOC æ¨¡å¼å°†æ•°æ®é¢éƒ¨ç½²åœ¨ç”¨æˆ·è‡ªèº«çš„ VPC å†…ä»¥ç¡®ä¿æ•°æ®éšç§ï¼Œå¹¶åœ¨è®¡ç®—ä¸è®¿é—®å±‚å…¨é¢æ”¯æŒç«¯åˆ°ç«¯çš„ TLS/mTLS åŠ å¯†ã€‚</p>
<h3 data-id="heading-12">æ¶æ„åˆ›æ–°ï¼šé€šè¿‡å…±äº«å­˜å‚¨æ¶æ„å®ç°æ— çŠ¶æ€æ•ˆç‡</h3>
<p>ä¸¤æ¬¾å¹³å°çš„ååŒæ•ˆåº”é€šè¿‡ä»ä¼ ç»Ÿçš„æ— å…±äº«è®¾è®¡è½¬å‘ç°ä»£çš„å…±äº«å­˜å‚¨æ¶æ„ï¼Œæ˜¾è‘—æå‡äº†æµå¤„ç†æ•ˆç‡ã€‚AutoMQ çš„æ— ç›˜åŒ–ã€æ— çŠ¶æ€æ¶æ„å°†æ‰€æœ‰æ•°æ®å¸è½½è‡³ S3ï¼Œå°† Kafka Broker è½¬åŒ–ä¸ºçº¯ç²¹çš„è®¡ç®—èŠ‚ç‚¹ï¼Œå®ç°ç§’çº§æ‰©ç¼©å®¹ã€‚ç»“åˆ Aklivity è½»é‡çº§çš„éé˜»å¡ I/O ç½‘å…³ï¼Œä¼ä¸šèƒ½å¤Ÿè·å¾—ä¸€ä¸ªçœŸæ­£çš„å¼¹æ€§æµå¤„ç†å †æ ˆï¼Œæå¤§åœ°å‡å°‘äº†ä¼ ç»Ÿæœ‰çŠ¶æ€åŸºç¡€è®¾æ–½ä¸­å¸¸è§çš„è¿ç»´è´Ÿæ‹…å’Œè·¨å‰¯æœ¬å¤åˆ¶é™åˆ¶ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0a2354830a041e6972adec37e5eca53~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXV0b01R:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770799343&amp;x-signature=oDkEcnHjx9grLdKAQe0jEv60Or4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-13">å±•æœ›æœªæ¥</h2>
<p>AutoMQ ä¸ Aklivity å°†æŒç»­æ·±åŒ–æŠ€æœ¯èåˆï¼Œå…±åŒé©±åŠ¨äº‘åŸç”Ÿå®æ—¶æ•°æ®åŸºç¡€è®¾æ–½çš„å‘å±•ã€‚åŒæ–¹å°†è”æ‰‹ä¸ºå…¨çƒä¼ä¸šæä¾›æˆæœ¬æ›´ä½ã€æ€§èƒ½æ›´å¼ºã€æ›´æ˜“è¿ç»´ä¸”é«˜åº¦å®‰å…¨çš„å®æ—¶æ•°æ®æµè§£å†³æ–¹æ¡ˆï¼ŒåŠ é€Ÿæ•°æ®é©±åŠ¨å‹åº”ç”¨ä¸å•†ä¸šæ´å¯Ÿçš„è½åœ°ï¼Œå…±åŒæ„å»ºå¼€æ”¾ã€é«˜æ•ˆçš„äº‘åŸç”Ÿæ•°æ®ç”Ÿæ€ã€‚</p>
<p>ç«‹å³è®¿é—® AutoMQ å®˜ç½‘ï¼Œäº†è§£ä¸‹ä¸€ä»£äº‘åŸç”Ÿ Kafka çš„æè‡´æ€§èƒ½ä¸æˆæœ¬ä¼˜åŠ¿ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgo.automq.com%2Fofficial%3Futm_source%3Dopenwrite" target="_blank" title="https://go.automq.com/official?utm_source=openwrite" ref="nofollow noopener noreferrer">AutoMQ å®˜ç½‘</a></p>
<p>è®¿é—® Aklivity å®˜ç½‘ï¼Œæ¢ç´¢ç”¨äºå®æ—¶æ•°æ®ç®¡ç†çš„å¤šåè®®ç½‘å…³è§£å†³æ–¹æ¡ˆï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aklivity.io" target="_blank" title="https://www.aklivity.io" ref="nofollow noopener noreferrer">Aklivity å®˜ç½‘</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Apache SeaTunnel Zetaã€Flinkã€Spark æ€ä¹ˆé€‰ï¼Ÿåº•å±‚åŸç† + å®æˆ˜å¯¹æ¯”ä¸€æ¬¡è®²é€]]></title>    <link>https://juejin.cn/post/7602554905270681600</link>    <guid>https://juejin.cn/post/7602554905270681600</guid>    <pubDate>2026-02-04T08:03:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602554905270681600" data-draft-id="7602581823638159360" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Apache SeaTunnel Zetaã€Flinkã€Spark æ€ä¹ˆé€‰ï¼Ÿåº•å±‚åŸç† + å®æˆ˜å¯¹æ¯”ä¸€æ¬¡è®²é€"/> <meta itemprop="keywords" content="å¤§æ•°æ®,å¼€æº,Flink"/> <meta itemprop="datePublished" content="2026-02-04T08:03:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç™½é²¸å¼€æº"/> <meta itemprop="url" content="https://juejin.cn/user/3870725052049454"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Apache SeaTunnel Zetaã€Flinkã€Spark æ€ä¹ˆé€‰ï¼Ÿåº•å±‚åŸç† + å®æˆ˜å¯¹æ¯”ä¸€æ¬¡è®²é€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3870725052049454/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç™½é²¸å¼€æº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T08:03:56.000Z" title="Wed Feb 04 2026 08:03:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Apache SeaTunnel Zetaã€Flinkã€Spark æ€ä¹ˆé€‰ï¼Ÿåº•å±‚åŸç† + å®æˆ˜å¯¹æ¯”ä¸€æ¬¡è®²é€</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61e85f534b9f43fda303d14a725a0109~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m96bK45byA5rqQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770797037&amp;x-signature=zBzzjfk8AvIulKJYBh%2FH%2FeaojJg%3D" alt="å¯¹æ¯”" loading="lazy"/></p>
<p>æœ¬æ–‡æ¡£å°†æ·±å…¥è§£æ Apache SeaTunnel æ”¯æŒçš„ä¸‰å¤§æ‰§è¡Œå¼•æ“ï¼š<strong>Zeta (SeaTunnel Engine)</strong>ã€<strong>Flink</strong> å’Œ <strong>Spark</strong>ã€‚æˆ‘ä»¬å°†ä»æ¶æ„è®¾è®¡ã€æ ¸å¿ƒç‰¹æ€§ã€ä¼˜ç¼ºç‚¹å¯¹æ¯”ä»¥åŠä½¿ç”¨æ–¹æ³•ç­‰å¤šä¸ªç»´åº¦è¿›è¡Œè¯¦ç»†è®²è§£ï¼Œå¸®åŠ©ä½ æ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©æœ€åˆé€‚çš„å¼•æ“ã€‚</p>
<h3 data-id="heading-1">1. å¼•æ“æ¦‚è§ˆ</h3>
<p>SeaTunnel çš„æ¶æ„è®¾è®¡é‡‡ç”¨äº† <strong>API ä¸æ‰§è¡Œå¼•æ“è§£è€¦</strong> çš„ç­–ç•¥ã€‚è¿™æ„å‘³ç€åŒä¸€å¥—æ•°æ®åŒæ­¥é€»è¾‘ï¼ˆConfigï¼‰å¯ä»¥æ— ç¼è¿è¡Œåœ¨ä¸åŒçš„å¼•æ“ä¸Šã€‚</p>
<ul>
<li><strong>Zeta Engine</strong>: SeaTunnel ç¤¾åŒºä¸“é—¨ä¸ºæ•°æ®é›†æˆåœºæ™¯è‡ªç ”çš„æ–°ä¸€ä»£å¼•æ“ï¼Œä¸“æ³¨äºé«˜æ€§èƒ½ã€ä½å»¶è¿Ÿçš„æ•°æ®åŒæ­¥ã€‚</li>
<li><strong>Flink Engine</strong>: åˆ©ç”¨ Flink å¼ºå¤§çš„æµå¤„ç†èƒ½åŠ›ï¼Œé€‚åˆå·²æ‹¥æœ‰ Flink é›†ç¾¤çš„ç”¨æˆ·ã€‚</li>
<li><strong>Spark Engine</strong>: åˆ©ç”¨ Spark å¼ºå¤§çš„æ‰¹å¤„ç†èƒ½åŠ›ï¼Œé€‚åˆç¦»çº¿å¤§è§„æ¨¡æ•°æ®å¤„ç†åœºæ™¯ã€‚</li>
</ul>
<h3 data-id="heading-2">2. Zeta å¼•æ“â€”â€”æ ¸å¿ƒæ¨è</h3>
<p>Zeta æ˜¯ç›®å‰ SeaTunnel ç¤¾åŒºä¸»æ¨çš„é»˜è®¤å¼•æ“ã€‚å®ƒæ—¨åœ¨è§£å†³ Flink/Spark åœ¨ç®€å•æ•°æ®åŒæ­¥åœºæ™¯ä¸‹â€œèµ„æºæ¶ˆè€—å¤§ã€éƒ¨ç½²è¿ç»´é‡â€çš„é—®é¢˜ã€‚</p>
<h4 data-id="heading-3">2.1 æ ¸å¿ƒæ¶æ„</h4>
<p>Zeta é‡‡ç”¨æ— ä¸­å¿ƒåŒ–ï¼ˆDecentralizedï¼‰æˆ– Master-Slave æ¶æ„ï¼ˆå–å†³äºéƒ¨ç½²æ¨¡å¼ï¼‰ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹ç»„ä»¶ï¼š</p>
<ul>
<li><strong>Coordinator (Master)</strong>:
<ul>
<li><strong>ä½œä¸šè§£æ</strong>: å°†é€»è¾‘ DAG (Logical DAG) è½¬æ¢ä¸ºç‰©ç† DAG (Physical DAG)ã€‚</li>
<li><strong>èµ„æºè°ƒåº¦</strong>: ç®¡ç† Slotï¼Œå‘ Worker åˆ†é…ä»»åŠ¡ã€‚</li>
<li><strong>Checkpoint Coordinator</strong>: è´Ÿè´£è§¦å‘å’Œåè°ƒåˆ†å¸ƒå¼å¿«ç…§ï¼ˆåŸºäº Chandy-Lamport ç®—æ³•ï¼‰ï¼Œä¿éšœæ•°æ®ä¸€è‡´æ€§ã€‚</li>
</ul>
</li>
<li><strong>Worker (Slave)</strong>:
<ul>
<li><strong>Task Execution</strong>: è¿è¡Œ Source, Transform, Sink ä»»åŠ¡ã€‚</li>
<li><strong>Data Transport</strong>: è´Ÿè´£èŠ‚ç‚¹é—´çš„æ•°æ®ä¼ è¾“ã€‚</li>
</ul>
</li>
<li><strong>ResourceManager</strong>: æ”¯æŒ Standalone, YARN, Kubernetes ç­‰å¤šç§èµ„æºç®¡ç†æ¨¡å¼ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cbcf21c690c948fd84fc1a8a219f77c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m96bK45byA5rqQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770797037&amp;x-signature=fXiFYO%2FxaHSoBOg8k3FP6oH01q0%3D" alt="SeaTunnel Engine" loading="lazy"/></p>
<h4 data-id="heading-4">2.2 å…³é”®ç‰¹æ€§</h4>
<ol>
<li><strong>Pipeline çº§å®¹é”™ (Pipeline-level Fault Tolerance)</strong>:
<ul>
<li>ä¸åŒäº Flink çš„â€œå…¨å›¾é‡å¯â€ï¼ŒZeta å¯ä»¥åªé‡å¯å¤±è´¥çš„ Pipelineï¼ˆä¾‹å¦‚å¤šè¡¨åŒæ­¥ä¸­ï¼Œè¡¨ A å¤±è´¥ä¸å½±å“è¡¨ Bï¼‰ã€‚</li>
</ul>
</li>
<li><strong>å¢é‡å¿«ç…§ (Incremental Checkpoint)</strong>:
<ul>
<li>æ”¯æŒé«˜é¢‘ Checkpointï¼Œæœ€å°åŒ–æ•°æ®ä¸¢å¤±é£é™©ï¼ŒåŒæ—¶å¯¹æ€§èƒ½å½±å“æå°ã€‚</li>
</ul>
</li>
<li><strong>åŠ¨æ€æ‰©ç¼©å®¹ (Dynamic Scaling)</strong>:
<ul>
<li>æ”¯æŒåœ¨ä½œä¸šè¿è¡Œæ—¶åŠ¨æ€å¢åŠ æˆ–å‡å°‘ Worker èŠ‚ç‚¹ï¼Œæ— éœ€é‡å¯ä½œä¸šã€‚</li>
</ul>
</li>
<li><strong>Schema Evolution (è¡¨ç»“æ„å˜æ›´)</strong>:
<ul>
<li>åŸç”Ÿæ”¯æŒ DDL å˜æ›´åŒæ­¥ï¼ˆå¦‚ Add Columnï¼‰ï¼Œè¿™å¯¹ CDC åœºæ™¯è‡³å…³é‡è¦ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-5">2.3 ä½¿ç”¨æŒ‡å—</h4>
<p>Zeta å¼•æ“é€šå¸¸åŒ…å«åœ¨ SeaTunnel çš„äºŒè¿›åˆ¶åŒ…ä¸­ï¼Œå¼€ç®±å³ç”¨ã€‚</p>
<p><strong>å¯åŠ¨å‘½ä»¤ (Local æ¨¡å¼ - å¼€å‘æµ‹è¯•):</strong></p>
<pre><code class="hljs language-bash" lang="bash">./bin/seatunnel.sh --config ./config/your_job.conf -e <span class="hljs-built_in">local</span>
</code></pre>
<p><strong>å¯åŠ¨å‘½ä»¤ (Cluster æ¨¡å¼ - ç”Ÿäº§ç¯å¢ƒ):</strong></p>
<ol>
<li>å¯åŠ¨ Server (Master/Worker):
<pre><code class="hljs language-bash" lang="bash">./bin/seatunnel-cluster.sh -d
</code></pre>
</li>
<li>æäº¤ä»»åŠ¡åˆ°é›†ç¾¤:
<pre><code class="hljs language-bash" lang="bash">./bin/seatunnel.sh --config ./config/your_job.conf -e cluster
</code></pre>
</li>
</ol>
<h3 data-id="heading-6">3. Flink å¼•æ“</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e35557fec864c118af5184c06475ba5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m96bK45byA5rqQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770797037&amp;x-signature=EAu03xV3m9OuPOe0F7nIw5A%2BnME%3D" alt="flink-1_highres" loading="lazy"/></p>
<p>SeaTunnel é€šè¿‡ç¿»è¯‘å±‚ï¼ˆTranslation Layerï¼‰å°†å†…éƒ¨çš„ Source/Sink API é€‚é…ä¸º Flink çš„ <code>SourceFunction</code> / <code>SinkFunction</code> (æˆ– Flink æ–°ç‰ˆ Source/Sink API)ã€‚</p>
<h4 data-id="heading-7">3.1 æ¶æ„åŸç†</h4>
<ul>
<li><strong>Translation</strong>: SeaTunnel åœ¨ Client ç«¯å°† Config è§£æå¹¶ç¿»è¯‘æˆ Flink JobGraphã€‚</li>
<li><strong>Execution</strong>: æäº¤ç»™ Flink Cluster æ‰§è¡Œã€‚æ­¤æ—¶ï¼ŒSeaTunnel ä»»åŠ¡å°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ Flink ä»»åŠ¡ã€‚</li>
<li><strong>State Backend</strong>: ä¾èµ– Flink çš„ Checkpoint æœºåˆ¶ï¼ˆRocksDB/FsStateBackendï¼‰ç®¡ç†çŠ¶æ€ã€‚</li>
</ul>
<h4 data-id="heading-8">3.2 ä¼˜ç¼ºç‚¹</h4>
<ul>
<li><strong>ä¼˜ç‚¹</strong>: ç”Ÿæ€æˆç†Ÿï¼Œè¿ç»´å·¥å…·ä¸°å¯Œï¼Œé€‚åˆå¤æ‚çš„æµå¼è®¡ç®—+åŒæ­¥åœºæ™¯ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>: ç‰ˆæœ¬è€¦åˆä¸¥é‡ï¼ˆéœ€é€‚é… Flink 1.13-1.18 ç­‰ä¸åŒç‰ˆæœ¬ï¼‰ï¼Œå¯¹äºçº¯åŒæ­¥ä»»åŠ¡æ˜¾å¾—è¿‡é‡ã€‚</li>
</ul>
<h4 data-id="heading-9">3.3 ä½¿ç”¨æŒ‡å—</h4>
<p>éœ€è¦ä¸‹è½½å¯¹åº”çš„ <code>seatunnel-flink-starter</code> jar åŒ…ï¼Œå¹¶ç¡®ä¿ Flink ç¯å¢ƒå·²å‡†å¤‡å¥½ã€‚</p>
<p><strong>å¯åŠ¨å‘½ä»¤ (Flink 1.13+):</strong></p>
<pre><code class="hljs language-bash" lang="bash">./bin/start-seatunnel-flink-13-connector-v2.sh \
    --config ./config/your_job.conf \
    --run-mode run <span class="hljs-comment"># æˆ– run-application</span>
</code></pre>
<p><em>(æ³¨æ„ï¼šä¸åŒ Flink ç‰ˆæœ¬è„šæœ¬åç§°ç•¥æœ‰ä¸åŒï¼Œå¦‚ <code>flink-15</code>, <code>flink-18</code>)</em></p>
<h3 data-id="heading-10">4. Spark å¼•æ“</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e329d1c74f65461b9f634a3be51ccf4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m96bK45byA5rqQ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770797037&amp;x-signature=71w0BosSYuaTF%2FrGTN8UznUqjlM%3D" alt="spark" loading="lazy"/></p>
<p>ç±»ä¼¼äº Flinkï¼ŒSeaTunnel å°† Source/Sink é€‚é…ä¸º Spark çš„ <code>DataSource V2</code> APIã€‚</p>
<h4 data-id="heading-11">4.1 æ¶æ„åŸç†</h4>
<ul>
<li><strong>Batch</strong>: ä½¿ç”¨ Spark RDD / DataFrame API æ‰§è¡Œç¦»çº¿æ‰¹å¤„ç†ã€‚</li>
<li><strong>Streaming</strong>: ä½¿ç”¨ Spark Streaming (Micro-batch) æ‰§è¡Œæµå¼å¤„ç†ã€‚</li>
</ul>
<h4 data-id="heading-12">4.2 ä¼˜ç¼ºç‚¹</h4>
<ul>
<li><strong>ä¼˜ç‚¹</strong>: æ‰¹å¤„ç†æ€§èƒ½å¼ºå¤§ï¼Œåœ¨å¤§è§„æ¨¡ç¦»çº¿æ•°æ®æ¸…æ´—/ETL åœºæ™¯è¡¨ç°ä¼˜å¼‚ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>: æµå¤„ç†åŸºäºå¾®æ‰¹ï¼ˆMicro-batchï¼‰ï¼Œå»¶è¿Ÿé€šå¸¸é«˜äº Flink/Zetaï¼›èµ„æºè°ƒåº¦è¾ƒæ…¢ã€‚</li>
</ul>
<h4 data-id="heading-13">4.3 ä½¿ç”¨æŒ‡å—</h4>
<p>éœ€è¦ä¸‹è½½å¯¹åº”çš„ <code>seatunnel-spark-starter</code> jar åŒ…ã€‚</p>
<p><strong>å¯åŠ¨å‘½ä»¤ (Spark 3.x):</strong></p>
<pre><code class="hljs language-bash" lang="bash">./bin/start-seatunnel-spark-3-connector-v2.sh \
    --config ./config/your_job.conf \
    --master <span class="hljs-built_in">local</span>[4] <span class="hljs-comment"># æˆ– yarn, k8s</span>
</code></pre>
<h3 data-id="heading-14">5. ä¸‰å¤§å¼•æ“å…¨æ–¹ä½å¯¹æ¯”</h3>



























































<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">Zeta (SeaTunnel Engine)</th><th align="left">Flink Engine</th><th align="left">Spark Engine</th></tr></thead><tbody><tr><td align="left"><strong>å®šä½</strong></td><td align="left"><strong>æ•°æ®åŒæ­¥ä¸“ç”¨</strong></td><td align="left">é€šç”¨æµæ‰¹è®¡ç®—</td><td align="left">é€šç”¨æ‰¹æµè®¡ç®—</td></tr><tr><td align="left"><strong>é€‚ç”¨åœºæ™¯</strong></td><td align="left">æµ·é‡æ•°æ®é›†æˆã€CDC å®æ—¶åŒæ­¥ã€å¤šè¡¨æ•´åº“åŒæ­¥</td><td align="left">å¤æ‚æµå¼è®¡ç®— + åŒæ­¥</td><td align="left">å¤§è§„æ¨¡ç¦»çº¿æ¸…æ´—ã€ETL</td></tr><tr><td align="left"><strong>éƒ¨ç½²å¤æ‚åº¦</strong></td><td align="left"><strong>ä½</strong> (å†…ç½®ï¼Œå¼€ç®±å³ç”¨)</td><td align="left">ä¸­ (éœ€ç»´æŠ¤ Flink é›†ç¾¤)</td><td align="left">ä¸­ (éœ€ç»´æŠ¤ Spark é›†ç¾¤)</td></tr><tr><td align="left"><strong>èµ„æºæ¶ˆè€—</strong></td><td align="left"><strong>ä½</strong> (é’ˆå¯¹åŒæ­¥ä¼˜åŒ–ï¼Œæ— å¤šä½™å¼€é”€)</td><td align="left">ä¸­/é«˜</td><td align="left">ä¸­/é«˜</td></tr><tr><td align="left"><strong>å»¶è¿Ÿ</strong></td><td align="left"><strong>ä½</strong> (å®æ—¶æµ)</td><td align="left">ä½ (å®æ—¶æµ)</td><td align="left">ä¸­ (å¾®æ‰¹)</td></tr><tr><td align="left"><strong>å®¹é”™ç²’åº¦</strong></td><td align="left"><strong>Pipeline çº§</strong> (å±€éƒ¨é‡å¯)</td><td align="left">Job çº§ (å…¨å±€é‡å¯)</td><td align="left">Stage/Task çº§</td></tr><tr><td align="left"><strong>CDC æ”¯æŒ</strong></td><td align="left"><strong>å®Œç¾</strong> (æ”¯æŒ Schema Evolution)</td><td align="left">è‰¯å¥½</td><td align="left">ä¸€èˆ¬</td></tr><tr><td align="left"><strong>å¤šç‰ˆæœ¬é€‚é…</strong></td><td align="left">æ— éœ€é€‚é… (è‡ªå¸¦)</td><td align="left">éœ€ä¸¥æ ¼åŒ¹é… Flink ç‰ˆæœ¬</td><td align="left">éœ€ä¸¥æ ¼åŒ¹é… Spark ç‰ˆæœ¬</td></tr></tbody></table>
<h3 data-id="heading-15">6. å¦‚ä½•é€‰æ‹©ï¼Ÿ</h3>
<ol>
<li>
<p><strong>å¦‚æœä½ æ˜¯æ–°é¡¹ç›®ï¼Œæˆ–è€…ä¸»è¦éœ€æ±‚æ˜¯æ•°æ®åŒæ­¥ (Data Integration)</strong>:</p>
<ul>
<li>ğŸ‘‰ <strong>é¦–é€‰ Zeta å¼•æ“</strong>ã€‚å®ƒæœ€è½»é‡ã€æ€§èƒ½æœ€å¥½ï¼Œä¸”å¯¹ CDC å’Œå¤šè¡¨åŒæ­¥æœ‰ç‰¹æ®Šä¼˜åŒ–ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¦‚æœä½ å·²ç»æœ‰ç°æˆçš„ Flink/Spark é›†ç¾¤ï¼Œä¸”è¿ç»´å›¢é˜Ÿä¸æƒ³ç»´æŠ¤æ–°å¼•æ“</strong>:</p>
<ul>
<li>ğŸ‘‰ é€‰æ‹© <strong>Flink</strong> æˆ– <strong>Spark</strong> å¼•æ“ï¼Œå¤ç”¨ç°æœ‰åŸºç¡€è®¾æ–½ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¦‚æœä½ çš„ä»»åŠ¡åŒ…å«æå…¶å¤æ‚çš„è‡ªå®šä¹‰è®¡ç®—é€»è¾‘ (Complex Computation)</strong>:</p>
<ul>
<li>ğŸ‘‰ ä¼˜å…ˆè€ƒè™‘ <strong>Flink</strong> (æµ) æˆ– <strong>Spark</strong> (æ‰¹)ï¼Œåˆ©ç”¨å…¶ä¸°å¯Œçš„ç®—å­ç”Ÿæ€ã€‚ä½†ä¹Ÿå¯ä»¥è€ƒè™‘ <strong>Zeta + SQL Transform</strong> æ»¡è¶³å¤§éƒ¨åˆ†éœ€æ±‚ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-16">7. æ–°æ‰‹å…¥é—¨æŒ‡å—</h3>
<p>å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦ SeaTunnelï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å¿«é€Ÿä½“éªŒ Zeta å¼•æ“çš„å¼ºå¤§åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-17">7.1 ç¯å¢ƒå‡†å¤‡</h4>
<p>ç¡®ä¿ä½ çš„æœºå™¨ä¸Šå®‰è£…äº† Java 8 æˆ– Java 11ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">java -version
</code></pre>
<h4 data-id="heading-18">7.2 ä¸‹è½½ä¸å®‰è£…</h4>
<ol>
<li><strong>ä¸‹è½½</strong>: ä» <a href="https://link.juejin.cn?target=https%3A%2F%2Fseatunnel.apache.org%2Fdownload" target="_blank" title="https://seatunnel.apache.org/download" ref="nofollow noopener noreferrer">Apache SeaTunnel å®˜ç½‘</a> ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„äºŒè¿›åˆ¶åŒ… (<code>apache-seatunnel-x.x.x-bin.tar.gz</code>)ã€‚</li>
<li><strong>è§£å‹</strong>:
<pre><code class="hljs language-bash" lang="bash">tar -zxvf apache-seatunnel-*.tar.gz
<span class="hljs-built_in">cd</span> apache-seatunnel-*
</code></pre>
</li>
</ol>
<h4 data-id="heading-19">7.3 å®‰è£… Connector æ’ä»¶ (é‡è¦!)</h4>
<p><strong>è¿™æ˜¯æ–°æ‰‹æœ€å®¹æ˜“å¿½ç•¥çš„ä¸€æ­¥</strong>ã€‚é»˜è®¤åŒ…ä¸åŒ…å«æ‰€æœ‰ Connectorï¼Œä½ éœ€è¦è¿è¡Œè„šæœ¬è‡ªåŠ¨ä¸‹è½½ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è‡ªåŠ¨å®‰è£… plugin_config é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„æ‰€æœ‰æ’ä»¶</span>
sh bin/install-plugin.sh
</code></pre>
<h4 data-id="heading-20">7.4 å¿«é€Ÿè¿è¡Œç¬¬ä¸€ä¸ªä»»åŠ¡</h4>
<p>åˆ›å»ºä¸€ä¸ªç®€å•çš„é…ç½®æ–‡ä»¶ <code>config/quick_start.conf</code>ï¼Œå°†æ•°æ®ä» Fake æºç”Ÿæˆå¹¶æ‰“å°åˆ°æ§åˆ¶å°ï¼š</p>
<pre><code class="hljs language-hocon" lang="hocon">env {
  execution.parallelism = 1
  job.mode = "BATCH"
}

source {
  FakeSource {
    result_table_name = "fake"
    row.num = 100
    schema = {
      fields {
        name = "string"
        age = "int"
      }
    }
  }
}

transform {
  # ç®€å•çš„ SQL å¤„ç†
  Sql {
    source_table_name = "fake"
    result_table_name = "sql_result"
    query = "select name, age from fake where age &gt; 50"
  }
}

sink {
  Console {
    source_table_name = "sql_result"
  }
}
</code></pre>
<p><strong>è¿è¡Œä»»åŠ¡ (Local æ¨¡å¼)</strong>:</p>
<pre><code class="hljs language-bash" lang="bash">./bin/seatunnel.sh --config ./config/quick_start.conf -e <span class="hljs-built_in">local</span>
</code></pre>
<p>å¦‚æœçœ‹åˆ°æ§åˆ¶å°è¾“å‡ºäº†æ•°æ®è¡¨æ ¼ï¼Œæ­å–œä½ ï¼Œä½ å·²ç»æˆåŠŸæŒæ¡äº† SeaTunnel çš„åŸºæœ¬ç”¨æ³•ï¼</p>
<h3 data-id="heading-21">8. Zeta å¼•æ“åŸç†æ·±åº¦å­¦ä¹ è·¯å¾„</h3>
<p>å¦‚æœä½ å¸Œæœ›æ·±å…¥äº†è§£ Zeta å¼•æ“çš„å†…éƒ¨è¿ä½œæœºåˆ¶ï¼Œæˆ–è€…æƒ³å‚ä¸ç¤¾åŒºè´¡çŒ®ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹è·¯å¾„è¿›è¡Œæºç é˜…è¯»å’Œè°ƒè¯•ã€‚</p>
<h4 data-id="heading-22">8.1 æ ¸å¿ƒæ¨¡å—æ¦‚è§ˆ</h4>
<p>Zeta å¼•æ“çš„ä»£ç ä¸»è¦é›†ä¸­åœ¨ <code>seatunnel-engine</code> æ¨¡å—ä¸‹ï¼š</p>
<ul>
<li><strong>seatunnel-engine-core</strong>: å®šä¹‰äº†æ ¸å¿ƒæ•°æ®ç»“æ„ï¼ˆå¦‚ <code>Job</code>, <code>Task</code>ï¼‰å’Œé€šä¿¡åè®®ã€‚</li>
<li><strong>seatunnel-engine-server</strong>: åŒ…å«äº† Coordinator å’Œ Worker çš„å…·ä½“å®ç°é€»è¾‘ã€‚</li>
<li><strong>seatunnel-engine-client</strong>: å®¢æˆ·ç«¯æäº¤é€»è¾‘ã€‚</li>
</ul>
<h4 data-id="heading-23">8.2 æºç é˜…è¯»æ¨èè·¯å¾„</h4>
<h5 data-id="heading-24">1. ä½œä¸šæäº¤ä¸è§£æ (Coordinator ä¾§)</h5>
<p>ä» <code>JobMaster</code> ç±»å¼€å§‹ï¼Œäº†è§£ä½œä¸šæ˜¯å¦‚ä½•è¢«æ¥æ”¶å’Œåˆå§‹åŒ–çš„ã€‚</p>
<ul>
<li><strong>å…¥å£</strong>: <code>org.apache.seatunnel.engine.server.master.JobMaster</code></li>
<li><strong>é€»è¾‘</strong>: å…³æ³¨ <code>init</code> å’Œ <code>run</code> æ–¹æ³•ï¼Œäº†è§£ <code>LogicalDag</code> åˆ° <code>PhysicalPlan</code> çš„è½¬æ¢è¿‡ç¨‹ã€‚</li>
</ul>
<h5 data-id="heading-25">2. ä»»åŠ¡æ‰§è¡Œ (Worker ä¾§)</h5>
<p>äº†è§£ Task æ˜¯å¦‚ä½•è¢«è°ƒåº¦å’Œæ‰§è¡Œçš„ã€‚</p>
<ul>
<li><strong>æœåŠ¡å…¥å£</strong>: <a href="https://link.juejin.cn?target=seatunnel-engine%2Fseatunnel-engine-server%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fseatunnel%2Fengine%2Fserver%2FTaskExecutionService.java" target="_blank" title="seatunnel-engine/seatunnel-engine-server/src/main/java/org/apache/seatunnel/engine/server/TaskExecutionService.java" ref="nofollow noopener noreferrer">TaskExecutionService.java</a>
<ul>
<li>è¯¥ç±»è´Ÿè´£ç®¡ç† Worker èŠ‚ç‚¹ä¸Šçš„æ‰€æœ‰ TaskGroupã€‚</li>
</ul>
</li>
<li><strong>æ‰§è¡Œä¸Šä¸‹æ–‡</strong>: <code>org.apache.seatunnel.engine.server.execution.TaskExecutionContext</code></li>
</ul>
<h5 data-id="heading-26">3. Checkpoint æœºåˆ¶ (æ ¸å¿ƒéš¾ç‚¹)</h5>
<p>Zeta çš„å¿«ç…§æœºåˆ¶æ˜¯ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„å…³é”®ã€‚</p>
<ul>
<li><strong>åè°ƒå™¨</strong>: <a href="https://link.juejin.cn?target=seatunnel-engine%2Fseatunnel-engine-server%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fseatunnel%2Fengine%2Fserver%2Fcheckpoint%2FCheckpointCoordinator.java" target="_blank" title="seatunnel-engine/seatunnel-engine-server/src/main/java/org/apache/seatunnel/engine/server/checkpoint/CheckpointCoordinator.java" ref="nofollow noopener noreferrer">CheckpointCoordinator.java</a>
<ul>
<li>é‡ç‚¹é˜…è¯» <code>triggerCheckpoint</code> æ–¹æ³•ï¼Œäº†è§£ Barrier æ˜¯å¦‚ä½•åˆ†å‘çš„ã€‚</li>
</ul>
</li>
<li><strong>è®¡åˆ’</strong>: <a href="https://link.juejin.cn?target=seatunnel-engine%2Fseatunnel-engine-server%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fseatunnel%2Fengine%2Fserver%2Fcheckpoint%2FCheckpointPlan.java" target="_blank" title="seatunnel-engine/seatunnel-engine-server/src/main/java/org/apache/seatunnel/engine/server/checkpoint/CheckpointPlan.java" ref="nofollow noopener noreferrer">CheckpointPlan.java</a>
<ul>
<li>äº†è§£ Checkpoint æ¶‰åŠçš„ä»»åŠ¡èŒƒå›´æ˜¯å¦‚ä½•è®¡ç®—çš„ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-27">8.3 è°ƒè¯•æŠ€å·§</h4>
<ol>
<li><strong>ä¿®æ”¹æ—¥å¿—çº§åˆ«</strong>: åœ¨ <code>config/log4j2.properties</code> ä¸­ï¼Œå°† <code>org.apache.seatunnel</code> çš„çº§åˆ«è°ƒæ•´ä¸º <code>DEBUG</code>ï¼Œå¯ä»¥çœ‹åˆ°è¯¦ç»†çš„ RPC é€šä¿¡å’ŒçŠ¶æ€å˜æ›´æ—¥å¿—ã€‚</li>
<li><strong>æœ¬åœ°è°ƒè¯•</strong>: åœ¨ IDE ä¸­ç›´æ¥è¿è¡Œ <code>org.apache.seatunnel.core.starter.seatunnel.SeaTunnelStarter</code> ç±»ï¼Œä¼ å…¥ <code>-c config/your_job.conf -e local</code> å‚æ•°ï¼Œå³å¯æ–­ç‚¹è°ƒè¯•æ•´ä¸ªæµç¨‹ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•ä¿æŒmysqlå’Œredisä¸­æ•°æ®çš„ä¸€è‡´æ€§?]]></title>    <link>https://juejin.cn/post/7602789520035053578</link>    <guid>https://juejin.cn/post/7602789520035053578</guid>    <pubDate>2026-02-04T08:44:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602789520035053578" data-draft-id="7602901565032857646" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•ä¿æŒmysqlå’Œredisä¸­æ•°æ®çš„ä¸€è‡´æ€§?"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-04T08:44:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å˜»å“ˆbaby"/> <meta itemprop="url" content="https://juejin.cn/user/485305583405066"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•ä¿æŒmysqlå’Œredisä¸­æ•°æ®çš„ä¸€è‡´æ€§?
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/485305583405066/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å˜»å“ˆbaby
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T08:44:14.000Z" title="Wed Feb 04 2026 08:44:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å¼ºä¸€è‡´æ€§åšä¸åˆ°</strong>ï¼Œé™¤éä½ ä¸ç”¨ç¼“å­˜ã€‚</p>
<p>ç”¨äº†ç¼“å­˜ï¼Œå°±å¿…ç„¶å­˜åœ¨æ•°æ®åº“å’Œç¼“å­˜ä¸ä¸€è‡´çš„çª—å£æœŸã€‚æˆ‘ä»¬èƒ½åšçš„æ˜¯<strong>å°½é‡ç¼©çŸ­è¿™ä¸ªçª—å£</strong>ï¼Œä»¥åŠ<strong>å‡ºäº†ä¸ä¸€è‡´èƒ½å…œåº•</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆä¼šä¸ä¸€è‡´</h2>
<p>æœ€ç®€å•çš„åœºæ™¯ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ç”¨æˆ·Aä¿®æ”¹æ•°æ®ï¼Œæ›´æ–°äº†æ•°æ®åº“
<span class="hljs-bullet">2.</span> è¿˜æ²¡æ¥å¾—åŠæ›´æ–°ç¼“å­˜
<span class="hljs-bullet">3.</span> ç”¨æˆ·BæŸ¥è¯¢ï¼Œå‘½ä¸­ç¼“å­˜ï¼Œæ‹¿åˆ°æ—§æ•°æ®
</code></pre>
<p>è¿™å°±æ˜¯ä¸ä¸€è‡´ã€‚</p>
<p>æ›´å¤æ‚çš„åœºæ™¯æ¶‰åŠå¹¶å‘ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">çº¿ç¨‹1: æ›´æ–°æ•°æ®åº“ â†’ åˆ é™¤ç¼“å­˜
çº¿ç¨‹2: æŸ¥è¯¢ç¼“å­˜(æœªå‘½ä¸­) â†’ æŸ¥æ•°æ®åº“ â†’ å†™ç¼“å­˜

å¦‚æœæ—¶åºæ˜¯è¿™æ ·ï¼š
<span class="hljs-bullet">1.</span> çº¿ç¨‹1 æ›´æ–°æ•°æ®åº“ï¼ˆæ–°å€¼ï¼‰
<span class="hljs-bullet">2.</span> çº¿ç¨‹2 æŸ¥æ•°æ®åº“ï¼ˆæ‹¿åˆ°æ–°å€¼ï¼‰
<span class="hljs-bullet">3.</span> çº¿ç¨‹1 åˆ é™¤ç¼“å­˜
<span class="hljs-bullet">4.</span> çº¿ç¨‹2 å†™ç¼“å­˜ï¼ˆæ–°å€¼ï¼‰
è¿™ç§æƒ…å†µæ²¡é—®é¢˜ã€‚

ä½†å¦‚æœæ˜¯è¿™æ ·ï¼š
<span class="hljs-bullet">1.</span> çº¿ç¨‹2 æŸ¥æ•°æ®åº“ï¼ˆæ—§å€¼ï¼‰
<span class="hljs-bullet">2.</span> çº¿ç¨‹1 æ›´æ–°æ•°æ®åº“ï¼ˆæ–°å€¼ï¼‰
<span class="hljs-bullet">3.</span> çº¿ç¨‹1 åˆ é™¤ç¼“å­˜
<span class="hljs-bullet">4.</span> çº¿ç¨‹2 å†™ç¼“å­˜ï¼ˆæ—§å€¼ï¼‰
ç¼“å­˜é‡Œå­˜çš„å°±æ˜¯æ—§å€¼ï¼Œä¸ä¸€è‡´äº†ã€‚
</code></pre>
<p>è¿™ç§å¹¶å‘å¯¼è‡´çš„ä¸ä¸€è‡´æ˜¯æœ€éš¾å¤„ç†çš„ã€‚</p>
<hr/>
<h2 data-id="heading-1">å¸¸ç”¨çš„å‡ ç§åšæ³•</h2>
<p><strong>Cache Aside</strong>ï¼Œæœ€å¸¸ç”¨çš„ï¼š</p>
<p><strong>è¯»</strong>ï¼šå…ˆè¯»ç¼“å­˜ï¼Œæ²¡æœ‰å°±è¯»æ•°æ®åº“ï¼Œç„¶åå†™ç¼“å­˜
<strong>å†™</strong>ï¼šå…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è¯»</span>
<span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">(Long id)</span> {
    <span class="hljs-comment">// 1. å…ˆæŸ¥ç¼“å­˜</span>
    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> redis.get(<span class="hljs-string">"user:"</span> + id);
    <span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> user;
    }
    <span class="hljs-comment">// 2. ç¼“å­˜æ²¡æœ‰ï¼ŒæŸ¥æ•°æ®åº“</span>
    user = db.selectById(id);
    <span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// 3. å†™å…¥ç¼“å­˜</span>
        redis.setex(<span class="hljs-string">"user:"</span> + id, <span class="hljs-number">3600</span>, user);
    }
    <span class="hljs-keyword">return</span> user;
}

<span class="hljs-comment">// å†™</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateUser</span><span class="hljs-params">(User user)</span> {
    <span class="hljs-comment">// 1. å…ˆæ›´æ–°æ•°æ®åº“</span>
    db.update(user);
    <span class="hljs-comment">// 2. å†åˆ é™¤ç¼“å­˜</span>
    redis.del(<span class="hljs-string">"user:"</span> + id);
}
</code></pre>
<p>ä¸ºä»€ä¹ˆæ˜¯<strong>åˆ é™¤</strong>ç¼“å­˜è€Œä¸æ˜¯<strong>æ›´æ–°</strong>ç¼“å­˜ï¼Ÿ</p>
<p>å› ä¸ºæ›´æ–°ç¼“å­˜åœ¨å¹¶å‘åœºæ™¯ä¸‹æ›´å®¹æ˜“å‡ºé—®é¢˜ï¼š</p>
<pre><code class="hljs language-css" lang="css">çº¿ç¨‹<span class="hljs-number">1</span>æ›´æ–°æ•°æ®ä¸º<span class="hljs-selector-tag">A</span>ï¼Œçº¿ç¨‹<span class="hljs-number">2</span>æ›´æ–°æ•°æ®ä¸º<span class="hljs-selector-tag">B</span>
<span class="hljs-number">1</span>. çº¿ç¨‹<span class="hljs-number">1</span> æ›´æ–°æ•°æ®åº“ä¸º<span class="hljs-selector-tag">A</span>
<span class="hljs-number">2</span>. çº¿ç¨‹<span class="hljs-number">2</span> æ›´æ–°æ•°æ®åº“ä¸º<span class="hljs-selector-tag">B</span>
<span class="hljs-number">3</span>. çº¿ç¨‹<span class="hljs-number">2</span> æ›´æ–°ç¼“å­˜ä¸º<span class="hljs-selector-tag">B</span>
<span class="hljs-number">4</span>. çº¿ç¨‹<span class="hljs-number">1</span> æ›´æ–°ç¼“å­˜ä¸º<span class="hljs-selector-tag">A</span>
ç»“æœï¼šæ•°æ®åº“æ˜¯<span class="hljs-selector-tag">B</span>ï¼Œç¼“å­˜æ˜¯<span class="hljs-selector-tag">A</span>ï¼Œä¸ä¸€è‡´
</code></pre>
<p>åˆ é™¤ç¼“å­˜å°±æ²¡è¿™ä¸ªé—®é¢˜â€”â€”ä¸ç®¡è°å…ˆåˆ ï¼Œæœ€ç»ˆç¼“å­˜éƒ½æ˜¯ç©ºçš„ï¼Œä¸‹æ¬¡è¯»ä¼šä»æ•°æ®åº“åŠ è½½æœ€æ–°å€¼ã€‚</p>
<p><strong>å»¶è¿ŸåŒåˆ </strong>ï¼Œé’ˆå¯¹å¹¶å‘é—®é¢˜åŠ å±‚ä¿é™©ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateUser</span><span class="hljs-params">(User user)</span> {
    <span class="hljs-comment">// 1. å…ˆåˆ ç¼“å­˜</span>
    redis.del(<span class="hljs-string">"user:"</span> + id);
    <span class="hljs-comment">// 2. æ›´æ–°æ•°æ®åº“</span>
    db.update(user);
    <span class="hljs-comment">// 3. å»¶è¿Ÿä¸€æ®µæ—¶é—´å†åˆ ä¸€æ¬¡</span>
    Thread.sleep(<span class="hljs-number">500</span>);  <span class="hljs-comment">// æˆ–è€…ç”¨æ¶ˆæ¯é˜Ÿåˆ—å»¶è¿Ÿ</span>
    redis.del(<span class="hljs-string">"user:"</span> + id);
}
</code></pre>
<p>ç¬¬ä¸€æ¬¡åˆ é™¤æ˜¯ä¸ºäº†è®©å¹¶å‘çš„è¯»è¯·æ±‚å»æ•°æ®åº“æ‹¿æœ€æ–°æ•°æ®ã€‚
å»¶è¿Ÿåˆ é™¤æ˜¯ä¸ºäº†æ¸…ç†æ‰åœ¨æ›´æ–°æ•°æ®åº“æœŸé—´å¯èƒ½è¢«å†™å…¥çš„æ—§ç¼“å­˜ã€‚</p>
<p>å»¶è¿Ÿæ—¶é—´æ€ä¹ˆå®šï¼Ÿé€šå¸¸è®¾ç½®ä¸ºä¸šåŠ¡è¯»è¯·æ±‚çš„è€—æ—¶ + å‡ ç™¾æ¯«ç§’bufferã€‚</p>
<p><strong>binlogåŒæ­¥</strong>ï¼Œæ›´å¯é ä½†ä¹Ÿæ›´é‡ã€‚ç›‘å¬MySQLçš„binlogï¼Œæ•°æ®å˜æ›´æ—¶è‡ªåŠ¨åˆ ç¼“å­˜ï¼š</p>
<pre><code class="hljs">MySQL â†’ binlog â†’ Canal/Maxwell â†’ æ¶ˆè´¹ç¨‹åº â†’ æ›´æ–°Redis
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Canalæ¶ˆè´¹ç¤ºä¾‹</span>
<span class="hljs-meta">@CanalEventListener</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onEvent</span><span class="hljs-params">(CanalEntry entry)</span> {
    <span class="hljs-keyword">if</span> (entry.getTableName().equals(<span class="hljs-string">"user"</span>)) {
        <span class="hljs-type">Long</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> entry.getColumn(<span class="hljs-string">"id"</span>);
        <span class="hljs-keyword">if</span> (entry.getEventType() == UPDATE || entry.getEventType() == DELETE) {
            redis.del(<span class="hljs-string">"user:"</span> + userId);
        }
    }
}
</code></pre>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>ä¸šåŠ¡ä»£ç ä¸ç”¨å…³å¿ƒç¼“å­˜æ›´æ–°</li>
<li>å¯é æ€§é«˜ï¼Œbinlogä¸ä¼šä¸¢</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>æ¶æ„å¤æ‚ï¼Œå¤šäº†Canalè¿™ä¸ªç»„ä»¶</li>
<li>æœ‰å»¶è¿Ÿï¼ˆé€šå¸¸æ¯«ç§’åˆ°ç§’çº§ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-2">å®é™…é¡¹ç›®æ€ä¹ˆé€‰</h2>
<p><strong>å¤§éƒ¨åˆ†åœºæ™¯ï¼šCache Asideå°±å¤Ÿäº†</strong></p>
<p>è¯»å¤šå†™å°‘çš„æ•°æ®ï¼ˆç”¨æˆ·ä¿¡æ¯ã€å•†å“è¯¦æƒ…ï¼‰ï¼ŒCache Aside + åˆç†çš„è¿‡æœŸæ—¶é—´ï¼ŒåŸºæœ¬å¤Ÿç”¨ã€‚çŸ­æš‚çš„ä¸ä¸€è‡´ä¸šåŠ¡ä¸Šèƒ½æ¥å—ã€‚</p>
<p><strong>å†™æ¯”è¾ƒé¢‘ç¹ï¼šè€ƒè™‘å»¶è¿ŸåŒåˆ </strong></p>
<p>æ¯”å¦‚åº“å­˜ã€ç§¯åˆ†è¿™ç§æ›´æ–°é¢‘ç¹çš„ï¼ŒåŠ ä¸Šå»¶è¿ŸåŒåˆ é™ä½ä¸ä¸€è‡´çš„æ¦‚ç‡ã€‚</p>
<p><strong>å¼ºä¸€è‡´æ€§è¦æ±‚é«˜ï¼šbinlogåŒæ­¥</strong></p>
<p>é‡‘èåœºæ™¯ã€äº¤æ˜“ç›¸å…³çš„ï¼Œä¸ŠCanalã€‚æˆ–è€…å¹²è„†ä¸ç”¨ç¼“å­˜ï¼Œç›´æ¥è¯»æ•°æ®åº“ã€‚</p>
<p><strong>ä¸€å®šèƒ½æ¥å—æœ€ç»ˆä¸€è‡´ï¼šè®¾ç½®è¿‡æœŸæ—¶é—´å…œåº•</strong></p>
<p>ä¸ç®¡ç”¨ä»€ä¹ˆæ–¹æ¡ˆï¼Œ<strong>ä¸€å®šè¦ç»™ç¼“å­˜è®¾ç½®è¿‡æœŸæ—¶é—´</strong>ã€‚å°±ç®—å‰é¢çš„é€»è¾‘å‡ºé—®é¢˜äº†ï¼Œè¿‡æœŸåä¹Ÿèƒ½è‡ªåŠ¨æ¢å¤ä¸€è‡´ã€‚</p>
<hr/>
<h2 data-id="heading-3">ä¸€äº›è¸©è¿‡çš„å‘</h2>
<p><strong>ç¼“å­˜å‡»ç©¿å¯¼è‡´çš„ä¸ä¸€è‡´</strong></p>
<p>çƒ­ç‚¹æ•°æ®è¿‡æœŸç¬é—´ï¼Œå¤§é‡è¯·æ±‚æ‰“åˆ°æ•°æ®åº“ï¼ŒåŒæ—¶å›å†™ç¼“å­˜ã€‚å¦‚æœè¿™æ—¶å€™æ­£å¥½æœ‰æ›´æ–°æ“ä½œï¼Œå¾ˆå®¹æ˜“å†™å…¥æ—§å€¼ã€‚</p>
<p>è§£å†³ï¼šç”¨åˆ†å¸ƒå¼é”ä¿è¯åªæœ‰ä¸€ä¸ªè¯·æ±‚å›å†™ç¼“å­˜ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">(Long id)</span> {
    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> redis.get(<span class="hljs-string">"user:"</span> + id);
    <span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> user;
    
    <span class="hljs-comment">// åŠ é”ï¼Œåªæœ‰ä¸€ä¸ªè¯·æ±‚å»æŸ¥æ•°æ®åº“</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">lockKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"lock:user:"</span> + id;
    <span class="hljs-keyword">if</span> (redis.setnx(lockKey, <span class="hljs-string">"1"</span>, <span class="hljs-number">10</span>)) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// åŒé‡æ£€æŸ¥</span>
            user = redis.get(<span class="hljs-string">"user:"</span> + id);
            <span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> user;
            
            user = db.selectById(id);
            redis.setex(<span class="hljs-string">"user:"</span> + id, <span class="hljs-number">3600</span>, user);
        } <span class="hljs-keyword">finally</span> {
            redis.del(lockKey);
        }
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æ²¡æ‹¿åˆ°é”ï¼Œç­‰ä¸€ä¸‹é‡è¯•</span>
        Thread.sleep(<span class="hljs-number">50</span>);
        <span class="hljs-keyword">return</span> getUser(id);
    }
    <span class="hljs-keyword">return</span> user;
}
</code></pre>
<p><strong>åˆ é™¤ç¼“å­˜å¤±è´¥</strong></p>
<p>ç½‘ç»œæŠ–åŠ¨å¯¼è‡´åˆ é™¤å¤±è´¥ï¼Œç¼“å­˜é‡Œè¿˜æ˜¯æ—§æ•°æ®ã€‚</p>
<p>è§£å†³ï¼šåˆ é™¤å¤±è´¥æ—¶å‘åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¼‚æ­¥é‡è¯•ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateUser</span><span class="hljs-params">(User user)</span> {
    db.update(user);
    <span class="hljs-keyword">try</span> {
        redis.del(<span class="hljs-string">"user:"</span> + id);
    } <span class="hljs-keyword">catch</span> (Exception e) {
        <span class="hljs-comment">// åˆ é™¤å¤±è´¥ï¼Œå‘æ¶ˆæ¯å¼‚æ­¥é‡è¯•</span>
        mq.send(<span class="hljs-string">"cache-delete-retry"</span>, <span class="hljs-string">"user:"</span> + id);
    }
}
</code></pre>
<p><strong>è¯»å†™åˆ†ç¦»çš„å‘</strong></p>
<p>å¦‚æœæ•°æ®åº“æ˜¯ä¸»ä»æ¶æ„ï¼Œå†™ä¸»åº“ã€è¯»ä»åº“ã€‚ä»åº“æœ‰å»¶è¿Ÿï¼Œå¯èƒ½åˆšæ›´æ–°å®Œä¸»åº“ï¼Œåˆ äº†ç¼“å­˜ï¼Œç»“æœè¯»è¯·æ±‚å»ä»åº“æ‹¿åˆ°æ—§æ•°æ®åˆå†™å›ç¼“å­˜ã€‚</p>
<p>è§£å†³ï¼š</p>
<ul>
<li>å…³é”®ä¸šåŠ¡å¼ºåˆ¶è¯»ä¸»åº“</li>
<li>æˆ–è€…å»¶è¿ŸåŒåˆ çš„æ—¶é—´è®¾ç½®é•¿ä¸€ç‚¹ï¼Œè¦†ç›–ä¸»ä»å»¶è¿Ÿ</li>
</ul>
<hr/>
<h2 data-id="heading-4">ä¸€æ¬¡çœŸå®çš„çº¿ä¸Šäº‹æ•…</h2>
<p>å»å¹´é‡åˆ°è¿‡ä¸€ä¸ªcaseï¼Œåˆ†äº«ä¸€ä¸‹ã€‚</p>
<p>ç”µå•†ç³»ç»Ÿï¼Œå•†å“è¯¦æƒ…é¡µç”¨äº†ç¼“å­˜ã€‚æŸå¤©è¿è¥åé¦ˆï¼šæ”¹äº†å•†å“ä»·æ ¼ï¼Œé¡µé¢ä¸Šè¿˜æ˜¯è€ä»·æ ¼ï¼Œè¿‡äº†å¥½å‡ åˆ†é’Ÿæ‰å˜è¿‡æ¥ã€‚</p>
<p>æ’æŸ¥ä¸‹æ¥ï¼Œé—®é¢˜å‡ºåœ¨è¿™ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> è¿è¥åœ¨åå°æ”¹ä»·æ ¼ï¼Œæ›´æ–°æ•°æ®åº“
<span class="hljs-bullet">2.</span> ä»£ç é‡Œæ›´æ–°æ•°æ®åº“ååˆ ç¼“å­˜
<span class="hljs-bullet">3.</span> åˆ ç¼“å­˜çš„æ—¶å€™ï¼ŒRedisè¿æ¥è¶…æ—¶äº†ï¼ˆé‚£æ®µæ—¶é—´Redisæœ‰ç‚¹æŠ–åŠ¨ï¼‰
<span class="hljs-bullet">4.</span> ä»£ç åäº†å¼‚å¸¸ï¼Œæ²¡é‡è¯•
<span class="hljs-bullet">5.</span> ç¼“å­˜é‡Œè¿˜æ˜¯è€ä»·æ ¼ï¼Œè¦ç­‰30åˆ†é’Ÿè¿‡æœŸæ‰ä¼šæ›´æ–°
</code></pre>
<p>é—®é¢˜ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updatePrice</span><span class="hljs-params">(Long productId, BigDecimal price)</span> {
    db.updatePrice(productId, price);
    <span class="hljs-keyword">try</span> {
        redis.del(<span class="hljs-string">"product:"</span> + productId);
    } <span class="hljs-keyword">catch</span> (Exception e) {
        log.error(<span class="hljs-string">"åˆ é™¤ç¼“å­˜å¤±è´¥"</span>, e);  <span class="hljs-comment">// åªæ‰“äº†ä¸ªæ—¥å¿—ï¼Œæ²¡å¤„ç†</span>
    }
}
</code></pre>
<p>ä¿®å¤æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updatePrice</span><span class="hljs-params">(Long productId, BigDecimal price)</span> {
    db.updatePrice(productId, price);
    
    <span class="hljs-comment">// åˆ ç¼“å­˜ï¼Œå¤±è´¥é‡è¯•3æ¬¡</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">retry</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">while</span> (retry &lt; <span class="hljs-number">3</span>) {
        <span class="hljs-keyword">try</span> {
            redis.del(<span class="hljs-string">"product:"</span> + productId);
            <span class="hljs-keyword">return</span>;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            retry++;
            <span class="hljs-keyword">if</span> (retry &gt;= <span class="hljs-number">3</span>) {
                <span class="hljs-comment">// é‡è¯•å¤±è´¥ï¼Œå‘æ¶ˆæ¯é˜Ÿåˆ—å¼‚æ­¥å¤„ç†</span>
                mq.send(<span class="hljs-string">"cache-invalidate"</span>, <span class="hljs-string">"product:"</span> + productId);
                log.error(<span class="hljs-string">"åˆ ç¼“å­˜å¤±è´¥ï¼Œå·²å‘MQ"</span>, e);
            }
            Thread.sleep(<span class="hljs-number">100</span>);
        }
    }
}

<span class="hljs-comment">// æ¶ˆè´¹è€…å…œåº•</span>
<span class="hljs-meta">@MQListener("cache-invalidate")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCacheInvalidate</span><span class="hljs-params">(String key)</span> {
    redis.del(key);
}
</code></pre>
<p>è¿˜åŠ äº†ä¸ªå…œåº•ï¼šç¼“å­˜è¿‡æœŸæ—¶é—´ä»30åˆ†é’Ÿæ”¹æˆ5åˆ†é’Ÿã€‚å°±ç®—å‰é¢éƒ½å¤±è´¥äº†ï¼Œæœ€å¤š5åˆ†é’Ÿä¹Ÿèƒ½æ¢å¤ã€‚</p>
<p>è¿™ä¸ªäº‹æ•…ç»™æˆ‘çš„æ•™è®­ï¼š<strong>åˆ ç¼“å­˜å¤±è´¥ä¸€å®šè¦æœ‰å…œåº•æœºåˆ¶</strong>ï¼Œä¸èƒ½åªæ‰“ä¸ªæ—¥å¿—å°±å®Œäº†ã€‚</p>
<hr/>
<h2 data-id="heading-5">æ€»ç»“</h2>



































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>å¤æ‚åº¦</th><th>ä¸€è‡´æ€§</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Cache Aside</td><td>ä½</td><td>æœ€ç»ˆä¸€è‡´</td><td>å¤§éƒ¨åˆ†è¯»å¤šå†™å°‘åœºæ™¯</td></tr><tr><td>å»¶è¿ŸåŒåˆ </td><td>ä¸­</td><td>æœ€ç»ˆä¸€è‡´ï¼ˆæ›´å¥½ï¼‰</td><td>å†™é¢‘ç¹åœºæ™¯</td></tr><tr><td>binlogåŒæ­¥</td><td>é«˜</td><td>æœ€ç»ˆä¸€è‡´ï¼ˆå¯é ï¼‰</td><td>ä¸€è‡´æ€§è¦æ±‚é«˜çš„åœºæ™¯</td></tr><tr><td>ä¸ç”¨ç¼“å­˜</td><td>-</td><td>å¼ºä¸€è‡´</td><td>é‡‘èæ ¸å¿ƒäº¤æ˜“</td></tr></tbody></table>
<p>è®°ä½å‡ ä¸ªåŸåˆ™ï¼š</p>
<ol>
<li><strong>æ›´æ–°æ•°æ®åº“ååˆ ç¼“å­˜ï¼Œä¸æ˜¯æ›´æ–°ç¼“å­˜</strong></li>
<li><strong>ä¸€å®šè®¾ç½®è¿‡æœŸæ—¶é—´å…œåº•</strong></li>
<li><strong>èƒ½æ¥å—æœ€ç»ˆä¸€è‡´å°±è¡Œï¼Œåˆ«è¿½æ±‚å¼ºä¸€è‡´</strong></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç½‘ç»œæœ‰æ•ˆæ€§æ£€æµ‹]]></title>    <link>https://juejin.cn/post/7602562585100238882</link>    <guid>https://juejin.cn/post/7602562585100238882</guid>    <pubDate>2026-02-04T08:45:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602562585100238882" data-draft-id="7602562585100173346" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç½‘ç»œæœ‰æ•ˆæ€§æ£€æµ‹"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-02-04T08:45:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·341408199125"/> <meta itemprop="url" content="https://juejin.cn/user/570004686782272"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç½‘ç»œæœ‰æ•ˆæ€§æ£€æµ‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/570004686782272/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·341408199125
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T08:45:12.000Z" title="Wed Feb 04 2026 08:45:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ” <strong>Android ç½‘ç»œæœ‰æ•ˆæ€§æ£€æµ‹(Network Validation)å®ç°æœºåˆ¶</strong></h2>
<h3 data-id="heading-1"><strong>æ ¸å¿ƒæ¶æ„</strong></h3>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ConnectivityService (CS)          â”‚
â”‚  â€¢ ç½‘ç»œè¿æ¥åè§¦å‘éªŒè¯                  â”‚
â”‚  â€¢ æ¥æ”¶éªŒè¯ç»“æœ                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ åˆ›å»ºå¹¶é€šä¿¡
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    NetworkMonitor (NM)               â”‚ â—„â”€ ç‹¬ç«‹è¿›ç¨‹(NetworkStack)
â”‚  â€¢ æ‰§è¡Œå¤šç§æ¢æµ‹                       â”‚
â”‚  â€¢ åˆ¤æ–­ç½‘ç»œå¯ç”¨æ€§                     â”‚
â”‚  â€¢ æ£€æµ‹Captive Portal                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ <span class="hljs-number">5</span>ç§æ¢æµ‹
    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
    â–¼             â–¼         â–¼          â–¼       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DNS  â”‚  â”‚  HTTPS   â”‚ â”‚  HTTP  â”‚ â”‚Fallbackâ”‚ â”‚PrivDNS â”‚
â”‚ æ¢æµ‹  â”‚  â”‚  æ¢æµ‹    â”‚ â”‚  æ¢æµ‹  â”‚ â”‚ æ¢æµ‹   â”‚ â”‚ æ¢æµ‹   â”‚
â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h3 data-id="heading-2"><strong>1ï¸âƒ£ äº”ç§æ¢æµ‹ç±»å‹</strong></h3>
<pre><code class="hljs language-129:174:packages_modules_Connectivity/framework/src/android/net/ConnectivityDiagnosticsManager.java" lang="129:174:packages_modules_Connectivity/framework/src/android/net/ConnectivityDiagnosticsManager.java">        /**
         * The overall validation result for the Network being reported on.
         *
         * &lt;p&gt;The possible values for this key are:
         * {@link #NETWORK_VALIDATION_RESULT_INVALID},
         * {@link #NETWORK_VALIDATION_RESULT_VALID},
         * {@link #NETWORK_VALIDATION_RESULT_PARTIALLY_VALID},
         * {@link #NETWORK_VALIDATION_RESULT_SKIPPED}.
         *
         * @see android.net.NetworkCapabilities#NET_CAPABILITY_VALIDATED
         */
        @NetworkValidationResult
        public static final String KEY_NETWORK_VALIDATION_RESULT = "networkValidationResult";

        /** DNS probe. */
        // TODO: link to INetworkMonitor.NETWORK_VALIDATION_PROBE_DNS
        public static final int NETWORK_PROBE_DNS = 0x04;

        /** HTTP probe. */
        // TODO: link to INetworkMonitor.NETWORK_VALIDATION_PROBE_HTTP
        public static final int NETWORK_PROBE_HTTP = 0x08;

        /** HTTPS probe. */
        // TODO: link to INetworkMonitor.NETWORK_VALIDATION_PROBE_HTTPS;
        public static final int NETWORK_PROBE_HTTPS = 0x10;

        /** Captive portal fallback probe. */
        // TODO: link to INetworkMonitor.NETWORK_VALIDATION_FALLBACK
        public static final int NETWORK_PROBE_FALLBACK = 0x20;

        /** Private DNS (DNS over TLS) probd. */
        // TODO: link to INetworkMonitor.NETWORK_VALIDATION_PROBE_PRIVDNS
        public static final int NETWORK_PROBE_PRIVATE_DNS = 0x40;

        /** @hide */
        @IntDef(
                prefix = {"NETWORK_PROBE_"},
                value = {
                        NETWORK_PROBE_DNS,
                        NETWORK_PROBE_HTTP,
                        NETWORK_PROBE_HTTPS,
                        NETWORK_PROBE_FALLBACK,
                        NETWORK_PROBE_PRIVATE_DNS
                })
        @Retention(RetentionPolicy.SOURCE)
        public @interface NetworkProbe {}
</code></pre>



































<table><thead><tr><th>æ¢æµ‹ç±»å‹</th><th>ç›®çš„</th><th>æ ‡å¿—ä½</th></tr></thead><tbody><tr><td><strong>DNS Probe</strong></td><td>éªŒè¯ DNS è§£ææ˜¯å¦å·¥ä½œ</td><td><code>0x04</code></td></tr><tr><td><strong>HTTP Probe</strong></td><td>æ£€æµ‹ Captive Portal(å¼ºåˆ¶é—¨æˆ·)</td><td><code>0x08</code></td></tr><tr><td><strong>HTTPS Probe</strong></td><td>éªŒè¯äº’è”ç½‘è¿æ¥æ€§</td><td><code>0x10</code></td></tr><tr><td><strong>Fallback Probe</strong></td><td>HTTP å¤‡ç”¨æ¢æµ‹</td><td><code>0x20</code></td></tr><tr><td><strong>Private DNS Probe</strong></td><td>éªŒè¯ DoT (DNS over TLS)</td><td><code>0x40</code></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-3"><strong>2ï¸âƒ£ HTTP/HTTPS æ¢æµ‹ URL</strong></h3>
<h4 data-id="heading-4"><strong>é»˜è®¤æ¢æµ‹ URL</strong></h4>
<pre><code class="hljs language-148:155:packages_modules_Connectivity/framework/src/android/net/ConnectivitySettingsManager.java" lang="148:155:packages_modules_Connectivity/framework/src/android/net/ConnectivitySettingsManager.java">    /**
     * The URL used for HTTP captive portal detection upon a new connection.
     * A 204 response code from the server is used for validation.
     *
     * @hide
     */
    public static final String CAPTIVE_PORTAL_HTTP_URL = "captive_portal_http_url";
</code></pre>
<pre><code class="hljs language-63:64:packages_modules_Connectivity/tests/cts/hostside-network-policy/app2/src/com/android/cts/netpolicy/hostside/app2/Common.java" lang="63:64:packages_modules_Connectivity/tests/cts/hostside-network-policy/app2/src/com/android/cts/netpolicy/hostside/app2/Common.java">    private static final String DEFAULT_TEST_URL =
            "https://connectivitycheck.android.com/generate_204";
</code></pre>
<pre><code class="hljs language-102:106:packages_modules_Connectivity/tests/cts/net/util/java/android/net/cts/util/CtsNetUtils.java" lang="102:106:packages_modules_Connectivity/tests/cts/net/util/java/android/net/cts/util/CtsNetUtils.java">    public static final String TEST_HOST = "connectivitycheck.gstatic.com";
    public static final String HTTP_REQUEST =
            "GET /generate_204 HTTP/1.0\r\n" +
                    "Host: " + TEST_HOST + "\r\n" +
                    "Connection: keep-alive\r\n\r\n";
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>:</p>
<ul>
<li><strong>HTTP URL</strong>: <code>http://connectivitycheck.gstatic.com/generate_204</code></li>
<li><strong>HTTPS URL</strong>: <code>https://www.google.com/generate_204</code></li>
<li><strong>æœŸæœ›å“åº”</strong>: <code>HTTP 204 No Content</code> (è¡¨ç¤ºç½‘ç»œç•…é€š,æ— å†…å®¹è¿”å›)</li>
</ul>
<h4 data-id="heading-5"><strong>204 å“åº”çš„å«ä¹‰</strong></h4>
<pre><code class="hljs language-229:263:frameworks_base/packages/CarrierDefaultApp/src/com/android/carrierdefaultapp/CaptivePortalLoginActivity.java" lang="229:263:frameworks_base/packages/CarrierDefaultApp/src/com/android/carrierdefaultapp/CaptivePortalLoginActivity.java">    private void testForCaptivePortal() {
        mTestingThread = new Thread(new Runnable() {
            public void run() {
                // Give time for captive portal to open.
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                }
                if (isFinishing() || isDestroyed()) return;
                HttpURLConnection urlConnection = null;
                int httpResponseCode = 500;
                int oldTag = TrafficStats.getAndSetThreadStatsTag(
                        NetworkStackConstants.TAG_SYSTEM_PROBE);
                try {
                    urlConnection = (HttpURLConnection) mNetwork.openConnection(
                            new URL(mCm.getCaptivePortalServerUrl()));
                    urlConnection.setInstanceFollowRedirects(false);
                    urlConnection.setConnectTimeout(SOCKET_TIMEOUT_MS);
                    urlConnection.setReadTimeout(SOCKET_TIMEOUT_MS);
                    urlConnection.setUseCaches(false);
                    urlConnection.getInputStream();
                    httpResponseCode = urlConnection.getResponseCode();
                } catch (IOException e) {
                    loge(e.getMessage());
                } finally {
                    if (urlConnection != null) urlConnection.disconnect();
                    TrafficStats.setThreadStatsTag(oldTag);
                }
                if (httpResponseCode == 204) {
                    done(true);
                }
            }
        });
        mTestingThread.start();
    }
</code></pre>
<hr/>
<h3 data-id="heading-6"><strong>3ï¸âƒ£ éªŒè¯æµç¨‹</strong></h3>
<h4 data-id="heading-7"><strong>æ ‡å‡†ç½‘ç»œ(Valid Network)éªŒè¯</strong></h4>
<pre><code class="hljs language-1281:1291:packages_modules_Connectivity/tests/unit/java/com/android/server/ConnectivityServiceTest.java" lang="1281:1291:packages_modules_Connectivity/tests/unit/java/com/android/server/ConnectivityServiceTest.java">        void setNetworkValid(boolean privateDnsProbeSent) {
            mNmValidationResult = NETWORK_VALIDATION_RESULT_VALID;
            mNmValidationRedirectUrl = null;
            int probesSucceeded = NETWORK_VALIDATION_PROBE_DNS | NETWORK_VALIDATION_PROBE_HTTPS;
            if (privateDnsProbeSent) {
                probesSucceeded |= NETWORK_VALIDATION_PROBE_PRIVDNS;
            }
            // The probesCompleted equals to probesSucceeded for the case of valid network, so put
            // the same value into two different parameter of the method.
            setProbesStatus(probesSucceeded, probesSucceeded);
        }
</code></pre>
<p><strong>æˆåŠŸæ¡ä»¶</strong>: DNS + HTTPS æ¢æµ‹éƒ½æˆåŠŸ â†’ <strong>ç½‘ç»œæœ‰æ•ˆ</strong></p>
<h4 data-id="heading-8"><strong>Captive Portal æ£€æµ‹</strong></h4>
<pre><code class="hljs language-1310:1321:packages_modules_Connectivity/tests/unit/java/com/android/server/ConnectivityServiceTest.java" lang="1310:1321:packages_modules_Connectivity/tests/unit/java/com/android/server/ConnectivityServiceTest.java">        void setNetworkPortal(String redirectUrl, boolean privateDnsProbeSent) {
            setNetworkInvalid(privateDnsProbeSent);
            mNmValidationRedirectUrl = redirectUrl;
            // Suppose the portal is found when NetworkMonitor probes NETWORK_VALIDATION_PROBE_HTTP
            // in the beginning, so the NETWORK_VALIDATION_PROBE_HTTPS hasn't probed yet.
            int probesCompleted = NETWORK_VALIDATION_PROBE_DNS | NETWORK_VALIDATION_PROBE_HTTP;
            int probesSucceeded = VALIDATION_RESULT_INVALID;
            if (privateDnsProbeSent) {
                probesCompleted |= NETWORK_VALIDATION_PROBE_PRIVDNS;
            }
            setProbesStatus(probesCompleted, probesSucceeded);
        }
</code></pre>
<p><strong>æ£€æµ‹é€»è¾‘</strong>:</p>
<ol>
<li>HTTP æ¢æµ‹è¿”å› <strong>302/307 é‡å®šå‘</strong> â†’ æ£€æµ‹åˆ° Captive Portal</li>
<li><code>redirectUrl</code> å­˜å‚¨ç™»å½•é¡µé¢åœ°å€</li>
<li>ç³»ç»Ÿå¼¹å‡ºé€šçŸ¥,å¼•å¯¼ç”¨æˆ·ç™»å½•</li>
</ol>
<h4 data-id="heading-9"><strong>éƒ¨åˆ†è¿æ¥(Partial Connectivity)</strong></h4>
<pre><code class="hljs language-1323:1330:packages_modules_Connectivity/tests/unit/java/com/android/server/ConnectivityServiceTest.java" lang="1323:1330:packages_modules_Connectivity/tests/unit/java/com/android/server/ConnectivityServiceTest.java">        void setNetworkPartial() {
            mNmValidationResult = NETWORK_VALIDATION_RESULT_PARTIAL;
            mNmValidationRedirectUrl = null;
            int probesCompleted = NETWORK_VALIDATION_PROBE_DNS | NETWORK_VALIDATION_PROBE_HTTPS
                    | NETWORK_VALIDATION_PROBE_FALLBACK;
            int probesSucceeded = NETWORK_VALIDATION_PROBE_DNS | NETWORK_VALIDATION_PROBE_FALLBACK;
            setProbesStatus(probesCompleted, probesSucceeded);
        }
</code></pre>
<p><strong>åˆ¤æ–­æ¡ä»¶</strong>:</p>
<ul>
<li>DNS æˆåŠŸ + Fallback æˆåŠŸ</li>
<li>ä½† HTTPS å¤±è´¥</li>
<li>â†’ <strong>éƒ¨åˆ†å¯ç”¨</strong>(ä¾‹å¦‚åªèƒ½è®¿é—®å†…ç½‘æˆ–ç‰¹å®šç«™ç‚¹)</li>
</ul>
<hr/>
<h3 data-id="heading-10"><strong>4ï¸âƒ£ éªŒè¯ç»“æœå¤„ç†</strong></h3>
<pre><code class="hljs language-4840:4948:packages_modules_Connectivity/service/src/com/android/server/ConnectivityService.java" lang="4840:4948:packages_modules_Connectivity/service/src/com/android/server/ConnectivityService.java">        private void handleNetworkTested(
                @NonNull NetworkAgentInfo nai, int testResult, @NonNull String redirectUrl) {
            final boolean valid = (testResult &amp; NETWORK_VALIDATION_RESULT_VALID) != 0;
            final boolean partial = (testResult &amp; NETWORK_VALIDATION_RESULT_PARTIAL) != 0;
            final boolean portal = !TextUtils.isEmpty(redirectUrl);

            // If there is any kind of working networking, then the NAI has been evaluated
            // once. {@see NetworkAgentInfo#setEvaluated}, which returns whether this is
            // the first time this ever happened.
            final boolean someConnectivity = (valid || partial || portal);
            final boolean becameEvaluated = someConnectivity &amp;&amp; nai.setEvaluated();
            // Because of b/245893397, if the score is updated when updateCapabilities is called,
            // any callback that receives onAvailable for that rematch receives an extra caps
            // callback. To prevent that, update the score in the agent so the updates below won't
            // see an update to both caps and score at the same time.
            // TODO : fix b/245893397 and remove this.
            if (becameEvaluated) nai.updateScoreForNetworkAgentUpdate();

            if (!valid &amp;&amp; shouldIgnoreValidationFailureAfterRoam(nai)) {
                // Assume the validation failure is due to a temporary failure after roaming
                // and ignore it. NetworkMonitor will continue to retry validation. If it
                // continues to fail after the block timeout expires, the network will be
                // marked unvalidated. If it succeeds, then validation state will not change.
                return;
            }

            final boolean wasValidated = nai.isValidated();
            final boolean wasPartial = nai.partialConnectivity();
            final boolean wasPortal = nai.captivePortalDetected();
            nai.setPartialConnectivity(partial);
            nai.setCaptivePortalDetected(portal);
            nai.updateScoreForNetworkAgentUpdate();
            final boolean partialConnectivityChanged = (wasPartial != partial);
            final boolean portalChanged = (wasPortal != portal);

            if (DBG) {
                final String logMsg = !TextUtils.isEmpty(redirectUrl)
                        ? " with redirect to " + redirectUrl
                        : "";
                final String statusMsg;
                if (valid) {
                    statusMsg = "passed";
                } else if (!TextUtils.isEmpty(redirectUrl)) {
                    statusMsg = "detected a portal";
                } else {
                    statusMsg = "failed";
                }
                log(nai.toShortString() + " validation " + statusMsg + logMsg);
            }
            if (valid != wasValidated) {
                final FullScore oldScore = nai.getScore();
                nai.setValidated(valid);
                updateCapabilities(oldScore, nai, nai.networkCapabilities);
                if (valid) {
                    handleFreshlyValidatedNetwork(nai);
                    // Clear NO_INTERNET, PRIVATE_DNS_BROKEN, PARTIAL_CONNECTIVITY and
                    // LOST_INTERNET notifications if network becomes valid.
                    mNotifier.clearNotification(nai.network.getNetId(),
                            NotificationType.NO_INTERNET);
                    mNotifier.clearNotification(nai.network.getNetId(),
                            NotificationType.LOST_INTERNET);
                    mNotifier.clearNotification(nai.network.getNetId(),
</code></pre>
<p><strong>å¤„ç†æµç¨‹</strong>:</p>
<ol>
<li><strong>è§£æç»“æœ</strong>: valid(æœ‰æ•ˆ) / partial(éƒ¨åˆ†) / portal(å¼ºåˆ¶é—¨æˆ·)</li>
<li><strong>æ›´æ–°çŠ¶æ€</strong>: <code>NetworkCapabilities</code> ä¸­çš„ <code>NET_CAPABILITY_VALIDATED</code></li>
<li><strong>è§¦å‘å›è°ƒ</strong>: é€šçŸ¥åº”ç”¨ç½‘ç»œçŠ¶æ€å˜åŒ–</li>
<li><strong>æ¸…é™¤é€šçŸ¥</strong>: å¦‚æœä¹‹å‰æœ‰"æ— ç½‘ç»œ"é€šçŸ¥,åˆ™æ¸…é™¤</li>
<li><strong>ç½‘ç»œåˆ‡æ¢</strong>: å¦‚æœå½“å‰ç½‘ç»œå¤±æ•ˆ,è‡ªåŠ¨åˆ‡æ¢åˆ°å…¶ä»–å¯ç”¨ç½‘ç»œ</li>
</ol>
<hr/>
<h3 data-id="heading-11"><strong>5ï¸âƒ£ Private DNS éªŒè¯</strong></h3>
<pre><code class="hljs language-67:98:packages_modules_Connectivity/staticlibs/device/com/android/net/module/util/NetworkMonitorUtils.java" lang="67:98:packages_modules_Connectivity/staticlibs/device/com/android/net/module/util/NetworkMonitorUtils.java">    /**
     * Return whether validation is required for private DNS in strict mode.
     * @param nc Network capabilities of the network to test.
     */
    public static boolean isPrivateDnsValidationRequired(@NonNull final NetworkCapabilities nc) {
        final boolean isVcnManaged = (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S)
                &amp;&amp; !nc.hasCapability(NET_CAPABILITY_NOT_VCN_MANAGED);
        final boolean isOemPaid = nc.hasCapability(NET_CAPABILITY_OEM_PAID)
                &amp;&amp; nc.hasCapability(NET_CAPABILITY_TRUSTED);
        final boolean isDefaultCapable = nc.hasCapability(NET_CAPABILITY_NOT_RESTRICTED)
                &amp;&amp; nc.hasCapability(NET_CAPABILITY_TRUSTED);

        // TODO: Consider requiring validation for DUN networks.
        if (nc.hasCapability(NET_CAPABILITY_INTERNET)
                &amp;&amp; (isVcnManaged || isOemPaid || isDefaultCapable)) {
            return true;
        }

        // Test networks that also have one of the major transport types are attempting to replicate
        // that transport on a test interface (for example, test ethernet networks with
        // EthernetManager#setIncludeTestInterfaces). Run validation on them for realistic tests.
        // See also comments on EthernetManager#setIncludeTestInterfaces and on TestNetworkManager.
        if (nc.hasTransport(TRANSPORT_TEST) &amp;&amp; nc.hasCapability(NET_CAPABILITY_NOT_RESTRICTED) &amp;&amp; (
                nc.hasTransport(TRANSPORT_WIFI)
                || nc.hasTransport(TRANSPORT_CELLULAR)
                || nc.hasTransport(TRANSPORT_BLUETOOTH)
                || nc.hasTransport(TRANSPORT_ETHERNET))) {
            return true;
        }

        return false;
    }
</code></pre>
<p><strong>éªŒè¯æ¡ä»¶</strong>:</p>
<ul>
<li>ç½‘ç»œå…·æœ‰ <code>INTERNET</code> èƒ½åŠ›</li>
<li>æ˜¯ VCN ç®¡ç† / OEMä»˜è´¹ / é»˜è®¤å¯ç”¨ç½‘ç»œ</li>
<li>â†’ éœ€è¦éªŒè¯ Private DNS (DoT) å¯ç”¨æ€§</li>
</ul>
<hr/>
<h3 data-id="heading-12"><strong>6ï¸âƒ£ é…ç½®å‚æ•°</strong></h3>
<h4 data-id="heading-13"><strong>Captive Portal æ¨¡å¼</strong></h4>
<pre><code class="hljs language-15135:15155:frameworks_base/core/java/android/provider/Settings.java" lang="15135:15155:frameworks_base/core/java/android/provider/Settings.java">         * When detecting a captive portal, immediately disconnect from the
         * network and do not reconnect to that network in the future.
         *
         * @hide
         */
        public static final int CAPTIVE_PORTAL_MODE_AVOID = 2;

        /**
         * What to do when connecting a network that presents a captive portal.
         * Must be one of the CAPTIVE_PORTAL_MODE_* constants above.
         *
         * The default for this setting is CAPTIVE_PORTAL_MODE_PROMPT.
         * @hide
         */
        @Readable
        public static final String CAPTIVE_PORTAL_MODE = "captive_portal_mode";

        /**
         * Setting to turn off captive portal detection. Feature is enabled by
         * default and the setting needs to be set to 0 to disable it.
         *
</code></pre>

























<table><thead><tr><th>æ¨¡å¼</th><th>å€¼</th><th>è¡Œä¸º</th></tr></thead><tbody><tr><td><code>CAPTIVE_PORTAL_MODE_IGNORE</code></td><td>0</td><td>å¿½ç•¥æ£€æµ‹</td></tr><tr><td><code>CAPTIVE_PORTAL_MODE_PROMPT</code></td><td>1</td><td>å¼¹å‡ºç™»å½•æç¤º(é»˜è®¤)</td></tr><tr><td><code>CAPTIVE_PORTAL_MODE_AVOID</code></td><td>2</td><td>ç«‹å³æ–­å¼€å¹¶é¿å…è¯¥ç½‘ç»œ</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-14"><strong>7ï¸âƒ£ è¶…æ—¶æœºåˆ¶</strong></h3>
<pre><code class="hljs language-435:469:packages_modules_Connectivity/service/src/com/android/server/ConnectivityService.java" lang="435:469:packages_modules_Connectivity/service/src/com/android/server/ConnectivityService.java">            "http://connectivitycheck.gstatic.com/generate_204";

    // TODO: create better separation between radio types and network types

    // how long to wait before switching back to a radio's default network
    private static final int RESTORE_DEFAULT_NETWORK_DELAY = 1 * 60 * 1000;
    // system property that can override the above value
    private static final String NETWORK_RESTORE_DELAY_PROP_NAME =
            "android.telephony.apn-restore";

    // How long to wait before putting up a "This network doesn't have an Internet connection,
    // connect anyway?" dialog after the user selects a network that doesn't validate.
    private static final int PROMPT_UNVALIDATED_DELAY_MS = 8 * 1000;

    // How long to wait before considering that a network is bad in the absence of any form
    // of connectivity (valid, partial, captive portal). If none has been detected after this
    // delay, the stack considers this network bad, which may affect how it's handled in ranking
    // according to config_networkAvoidBadWifi.
    // Timeout in case the "actively prefer bad wifi" feature is on
    private static final int ACTIVELY_PREFER_BAD_WIFI_INITIAL_TIMEOUT_MS = 20 * 1000;
    // Timeout in case the "actively prefer bad wifi" feature is off
    private static final int DEFAULT_EVALUATION_TIMEOUT_MS = 8 * 1000;

    // Default to 30s linger time-out, and 5s for nascent network. Modifiable only for testing.
    private static final String LINGER_DELAY_PROPERTY = "persist.netmon.linger";
    private static final int DEFAULT_LINGER_DELAY_MS = 30_000;
    private static final int DEFAULT_NASCENT_DELAY_MS = 5_000;

    // Delimiter used when creating the broadcast delivery group for sending
    // CONNECTIVITY_ACTION broadcast.
    private static final char DELIVERY_GROUP_KEY_DELIMITER = ';';

    // The maximum value for the blocking validation result, in milliseconds.
    public static final int MAX_VALIDATION_IGNORE_AFTER_ROAM_TIME_MS = 10000;
</code></pre>
<ul>
<li><strong>æç¤ºå»¶è¿Ÿ</strong>: 8ç§’æ— éªŒè¯ç»“æœåæç¤ºç”¨æˆ·</li>
<li><strong>è¯„ä¼°è¶…æ—¶</strong>: 8-20ç§’åˆ¤å®šç½‘ç»œä¸º"å·®"</li>
<li><strong>Linger å»¶è¿Ÿ</strong>: 30ç§’ä¿æŒè¿æ¥ä»¥è§‚å¯Ÿ</li>
</ul>
<hr/>
<h2 data-id="heading-15">ğŸ¯ <strong>æ€»ç»“</strong></h2>
<p><strong>Android ç½‘ç»œæœ‰æ•ˆæ€§æ£€æµ‹çš„å®Œæ•´æµç¨‹</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ç½‘ç»œè¿æ¥å»ºç«‹ (WiFi/ç§»åŠ¨æ•°æ®)
<span class="hljs-code">          â†“
2. ConnectivityService è§¦å‘ NetworkMonitor
          â†“
3. NetworkMonitor æ‰§è¡Œå¤šç§æ¢æµ‹:
   â”œâ”€ DNS è§£ææµ‹è¯•
   â”œâ”€ HTTPS æ¢æµ‹ (éªŒè¯äº’è”ç½‘)
   â”œâ”€ HTTP æ¢æµ‹ (æ£€æµ‹ Captive Portal)
   â”œâ”€ Fallback æ¢æµ‹ (å¤‡ç”¨)
   â””â”€ Private DNS æ¢æµ‹ (DoT)
          â†“
4. åˆ¤æ–­ç»“æœ:
   â”œâ”€ 204 å“åº” â†’ âœ… VALID (ç½‘ç»œæœ‰æ•ˆ)
   â”œâ”€ 302/307 â†’ ğŸŒ CAPTIVE PORTAL (éœ€ç™»å½•)
   â”œâ”€ DNSæˆåŠŸä½†HTTPSå¤±è´¥ â†’ âš ï¸ PARTIAL (éƒ¨åˆ†å¯ç”¨)
   â””â”€ å…¨éƒ¨å¤±è´¥ â†’ âŒ INVALID (æ— æ•ˆ)
          â†“
5. æ›´æ–° NetworkCapabilities
          â†“
6. é€šçŸ¥åº”ç”¨/è§¦å‘ç½‘ç»œåˆ‡æ¢
</span></code></pre>
<p><strong>å…³é”®ç‰¹æ€§</strong>:</p>
<ul>
<li>âœ… <strong>å¤šå±‚éªŒè¯</strong>: ä¸åªä¾èµ–å•ä¸€æ¢æµ‹</li>
<li>âœ… <strong>è‡ªåŠ¨é‡è¯•</strong>: å¤±è´¥åå®šæœŸé‡æ–°éªŒè¯</li>
<li>âœ… <strong>ç”¨æˆ·å‹å¥½</strong>: Captive Portal è‡ªåŠ¨å¼¹å‡ºç™»å½•é¡µé¢</li>
<li>âœ… <strong>æ™ºèƒ½åˆ‡æ¢</strong>: éªŒè¯å¤±è´¥è‡ªåŠ¨åˆ‡æ¢åˆ°å…¶ä»–ç½‘ç»œ</li>
<li>âœ… <strong>éšç§ä¿æŠ¤</strong>: ä½¿ç”¨ DoT éªŒè¯ Private DNS</li>
</ul>
<p>è¿™å°±æ˜¯ Android ç¡®ä¿ç”¨æˆ·å§‹ç»ˆèƒ½è¿æ¥åˆ°"çœŸæ­£å¯ç”¨"çš„ç½‘ç»œçš„æ ¸å¿ƒæœºåˆ¶! ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±åº¦è§£æ Trae-Memï¼šå¦‚ä½•æ„å»ºè½»é‡çº§ã€æœ¬åœ°åŒ–çš„ AI ç¼–ç¨‹åŠ©æ‰‹è®°å¿†å±‚]]></title>    <link>https://juejin.cn/post/7602579671475519507</link>    <guid>https://juejin.cn/post/7602579671475519507</guid>    <pubDate>2026-02-04T08:44:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602579671475519507" data-draft-id="7602559134576459812" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±åº¦è§£æ Trae-Memï¼šå¦‚ä½•æ„å»ºè½»é‡çº§ã€æœ¬åœ°åŒ–çš„ AI ç¼–ç¨‹åŠ©æ‰‹è®°å¿†å±‚"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-02-04T08:44:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="goingflygo"/> <meta itemprop="url" content="https://juejin.cn/user/3896324936173719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±åº¦è§£æ Trae-Memï¼šå¦‚ä½•æ„å»ºè½»é‡çº§ã€æœ¬åœ°åŒ–çš„ AI ç¼–ç¨‹åŠ©æ‰‹è®°å¿†å±‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3896324936173719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    goingflygo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T08:44:46.000Z" title="Wed Feb 04 2026 08:44:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç»™ AI è£…ä¸ªâ€œæµ·é©¬ä½“â€ï¼šTrae-Mem æœ¬åœ°è®°å¿†ç³»ç»ŸæŠ€æœ¯å†…å¹•</h2>
<blockquote>
<p><strong>æ‘˜è¦</strong>ï¼šä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼šåœ¨ Trae IDE é‡Œå’Œ AI èŠå¾—ç«çƒ­ï¼Œè§£å†³äº† A æ¨¡å—çš„ Bugï¼Œè½¬å¤´å»æ”¹ B æ¨¡å—ï¼Œå†é—® A æ¨¡å—æ—¶ AI å´â€œå¤±å¿†â€äº†ï¼Ÿæˆ–è€…ç¬¬äºŒå¤©æ‰“å¼€æ–°ä¼šè¯ï¼Œä¸å¾—ä¸æŠŠæ˜¨å¤©çš„èƒŒæ™¯é‡è¯´ä¸€éï¼Ÿæœ¬æ–‡å°†å¸¦ä½ æ·±å…¥ <code>trae-mem</code> çš„æŠ€æœ¯å®ç°ï¼Œçœ‹æˆ‘ä»¬å¦‚ä½•ç”¨ä¸åˆ° 1000 è¡Œ Python ä»£ç ï¼ŒåŸºäº SQLite å’Œ MCP åè®®ï¼Œä¸º Trae IDE æ‰“é€ ä¸€ä¸ª<strong>æœ¬åœ°åŒ–ã€æŒä¹…åŒ–ã€éšç§å®‰å…¨</strong>çš„â€œç¬¬äºŒå¤§è„‘â€ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">1. ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªâ€œå¤–æŒ‚å¤§è„‘â€ï¼Ÿ</h3>
<p>åœ¨å¤§æ¨¡å‹ç¼–ç¨‹ï¼ˆAI-Assisted Codingï¼‰çš„æ—¥å¸¸ä¸­ï¼Œæˆ‘ä»¬é¢ä¸´ç€ä¸¤ä¸ªæ ¸å¿ƒçŸ›ç›¾ï¼š</p>
<ol>
<li><strong>Context Windowï¼ˆä¸Šä¸‹æ–‡çª—å£ï¼‰çš„é™åˆ¶</strong>ï¼šè™½ç„¶æ¨¡å‹çª—å£è¶Šæ¥è¶Šå¤§ï¼Œä½†åœ¨ IDE ä¸­æ— é™å †å å†å²å¯¹è¯ä¼šå¯¼è‡´ Token æ¶ˆè€—æ¿€å¢ï¼Œå“åº”å˜æ…¢ï¼Œä¸”â€œå¤§æµ·æé’ˆâ€æ•ˆåº”ï¼ˆLost in the Middleï¼‰ä¼šå¯¼è‡´æ³¨æ„åŠ›åˆ†æ•£ã€‚</li>
<li><strong>Session Isolationï¼ˆä¼šè¯éš”ç¦»ï¼‰</strong>ï¼šIDE é€šå¸¸ä»¥â€œä¼šè¯â€ä¸ºå•ä½éš”ç¦»ä¸Šä¸‹æ–‡ã€‚ä¸€æ—¦ä½ ç‚¹å‡»â€œNew Chatâ€æˆ–é‡å¯ IDEï¼Œä¹‹å‰çš„æ€ç»´é“¾æ¡å°±æ–­äº†ã€‚</li>
</ol>
<p><code>trae-mem</code> çš„è¯ç”Ÿå°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å®ƒä¸åƒä¼ ç»Ÿçš„ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰é‚£æ ·ä¾èµ–åºå¤§çš„å‘é‡æ•°æ®åº“å’Œäº‘ç«¯æœåŠ¡ï¼Œè€Œæ˜¯<strong>åå…¶é“è€Œè¡Œä¹‹</strong>ï¼Œé€‰æ‹©äº†ä¸€æ¡<strong>æç®€ã€æœ¬åœ°åŒ–</strong>çš„æŠ€æœ¯è·¯çº¿ã€‚</p>
<hr/>
<h3 data-id="heading-2">2. æŠ€æœ¯æ ˆé€‰å‹ï¼šå°‘å³æ˜¯å¤š</h3>
<p>ä¸ºäº†è®©æ¯ä¸ªå¼€å‘è€…éƒ½èƒ½é›¶è´Ÿæ‹…åœ°è·‘èµ·æ¥ï¼Œæˆ‘ä»¬åœ¨æŠ€æœ¯é€‰å‹ä¸Šæå…¶å…‹åˆ¶ï¼š</p>
<ul>
<li><strong>ç¼–ç¨‹è¯­è¨€</strong>: <strong>Python 3.10+</strong>
<ul>
<li><em>ç†ç”±</em>ï¼šæ ‡å‡†åº“å¼ºå¤§ï¼Œæ— éœ€ç¼–è¯‘ï¼Œèƒ¶æ°´èƒ½åŠ›å¼ºï¼Œæ–¹ä¾¿åç»­æ¥å…¥æœ¬åœ° LLM æ¨ç†åº“ã€‚</li>
</ul>
</li>
<li><strong>å­˜å‚¨å¼•æ“</strong>: <strong>SQLite (with FTS5 &amp; JSON)</strong>
<ul>
<li><em>ç†ç”±</em>ï¼šå•æ–‡ä»¶æ•°æ®åº“ï¼Œéƒ¨ç½²æå…¶ç®€å•ï¼ˆZero Configurationï¼‰ã€‚FTS5 æä¾›äº†è¶³å¤Ÿå¥½ç”¨çš„å…¨æ–‡æ£€ç´¢èƒ½åŠ›ï¼ŒJSON åˆ—åˆ™è®©æˆ‘ä»¬èƒ½çµæ´»å­˜å‚¨éç»“æ„åŒ–çš„å…ƒæ•°æ®ï¼ˆMetadataï¼‰ã€‚</li>
</ul>
</li>
<li><strong>é€šä¿¡åè®®</strong>: <strong>MCP (Model Context Protocol)</strong>
<ul>
<li><em>ç†ç”±</em>ï¼šAnthropic æ¨å‡ºçš„å¼€æ”¾æ ‡å‡†ï¼ŒTrae IDE åŸç”Ÿæ”¯æŒã€‚é€šè¿‡ MCPï¼Œæˆ‘ä»¬å¯ä»¥åƒå¼€å‘â€œæ’ä»¶â€ä¸€æ ·ï¼ŒæŠŠæœ¬åœ° Python æœåŠ¡æŒ‚è½½ä¸º AI çš„ä¸€ä¸ª Toolã€‚</li>
</ul>
</li>
<li><strong>å¯è§†åŒ–</strong>: <strong>Mermaid</strong>
<ul>
<li><em>ç†ç”±</em>ï¼šä»£ç å³å›¾è¡¨ï¼Œæ˜“äºç»´æŠ¤å’Œç‰ˆæœ¬æ§åˆ¶ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-3">3. æ ¸å¿ƒæ¶æ„ä¸å®ç°åŸç†</h3>
<p><code>trae-mem</code> çš„å·¥ä½œæµå¯ä»¥æ¦‚æ‹¬ä¸ºï¼š<strong>è®°å½• (Log) -&gt; æ²‰æ·€ (Summarize) -&gt; å”¤èµ· (Inject)</strong>ã€‚</p>
<p>ä¸‹é¢è¿™å¼ æ¶æ„å›¾å±•ç¤ºäº†æ•°æ®æ˜¯å¦‚ä½•åœ¨ Trae IDE å’Œæœ¬åœ°æ•°æ®åº“ä¹‹é—´æµè½¬çš„ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">%%{init: {'theme': 'dark', 'themeVariables': { 'fontSize': '16px', 'fontFamily': 'arial', 'lineWidth': '2px'}}}%%
graph TD
    %% æ ·å¼å®šä¹‰
    classDef client fill:#2d3436,stroke:#dfe6e9,stroke-width:2px,color:#fff;
    classDef bridge fill:#0984e3,stroke:#74b9ff,stroke-width:2px,color:#fff;
    classDef core fill:#6c5ce7,stroke:#a29bfe,stroke-width:2px,color:#fff;
    classDef storage fill:#00b894,stroke:#55efc4,stroke-width:2px,color:#fff;

    subgraph Client_Layer [ğŸ–¥ï¸ Trae IDE / Client Side]
        direction TB
        User[User Prompt]:::client
        Tools[Tool Executions]:::client
        MCP_Client[MCP Client Module]:::client
    end

    subgraph Bridge_Layer [ğŸŒ‰ MCP Server Interface]
        direction TB
        Stdio[Stdio Transport]:::bridge
        Dispatcher[Request Dispatcher]:::bridge
    end

    subgraph Core_Logic [ğŸ§  Core Logic Layer]
        direction TB
        SessionMgr[Session Manager]:::core
        Summarizer[Summarizer Engine]:::core
        SearchEng[FTS5 Search Engine]:::core
        InjectGen[Context Injector]:::core
    end

    subgraph Storage_Layer [ğŸ’¾ Persistence Layer]
        direction TB
        DB[(SQLite DB\n~/.trae-mem)]:::storage
        Tables[Sessions | Observations | Summaries]:::storage
    end

    %% è°ƒç”¨æµ
    User --&gt;|1. Submit| MCP_Client
    Tools --&gt;|2. Result| MCP_Client
    MCP_Client ==&gt;|3. JSON-RPC (stdin/stdout)| Stdio
    Stdio --&gt; Dispatcher
    
    Dispatcher --&gt;|Write Log| SessionMgr
    Dispatcher --&gt;|Query| SearchEng
    Dispatcher --&gt;|Get Context| InjectGen
    
    SessionMgr --&gt;|Insert| DB
    SessionMgr --&gt;|Trigger| Summarizer
    Summarizer --&gt;|Update| DB
    
    SearchEng &lt;--&gt;|Select (BM25)| DB
    InjectGen &lt;--&gt;|Fetch Recent| DB
    
    %% å¸ƒå±€è°ƒæ•´
    DB --- Tables

    %% æ³¨é‡Šè¯´æ˜
    linkStyle default stroke:#b2bec3,stroke-width:2px;
</code></pre>
<h4 data-id="heading-4">3.1 æŒä¹…åŒ–å±‚ï¼šä¸ä»…ä»…æ˜¯ Log</h4>
<p>æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªé€šç”¨çš„æ•°æ®å•å…ƒï¼š<strong>Observation (è§‚æµ‹)</strong>ã€‚
æ— è®ºæ˜¯ç”¨æˆ·çš„æé—®ã€AI çš„å›å¤ï¼Œè¿˜æ˜¯å·¥å…·ï¼ˆå¦‚ <code>Grep</code>ã€<code>Read File</code>ï¼‰çš„æ‰§è¡Œç»“æœï¼Œéƒ½è¢«è§†ä¸ºä¸€æ¬¡ Observationã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@dataclass</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Observation</span>:
    <span class="hljs-built_in">id</span>: <span class="hljs-built_in">str</span>
    session_id: <span class="hljs-built_in">str</span>
    kind: <span class="hljs-built_in">str</span>      <span class="hljs-comment"># user | tool | model | note</span>
    content: <span class="hljs-built_in">str</span>   <span class="hljs-comment"># å®é™…å†…å®¹</span>
    private: <span class="hljs-built_in">bool</span>  <span class="hljs-comment"># éšç§æ ‡è®°</span>
    <span class="hljs-comment"># ...</span>
</code></pre>
<p>åœ¨ SQLite ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨ <strong>FTS5 (Full-Text Search 5)</strong> æ‰©å±•æ¨¡å—å»ºç«‹äº†å€’æ’ç´¢å¼•ã€‚è¿™æ„å‘³ç€ï¼Œå³ä½¿ä½ å­˜äº† 10 ä¸‡æ¡å¯¹è¯è®°å½•ï¼Œé€šè¿‡å…³é”®è¯ï¼ˆå¦‚â€œé¢„åŠ è½½ç­–ç•¥â€ï¼‰æ£€ç´¢ï¼Œä¹Ÿèƒ½åœ¨æ¯«ç§’çº§è¿”å›ç»“æœã€‚</p>
<h4 data-id="heading-5">3.2 éšç§å®‰å…¨ï¼š<code>&lt;private&gt;</code> æ ‡ç­¾</h4>
<p>åœ¨è®¾è®¡ä¹‹åˆï¼Œæˆ‘ä»¬å°±æŠŠéšç§æ”¾åœ¨ç¬¬ä¸€ä½ã€‚å¼€å‘è€…ç»å¸¸ä¼šåœ¨ä»£ç é‡Œè´´ API Key æˆ–å†…éƒ¨ IPã€‚
<code>trae-mem</code> å®ç°äº†ä¸€ä¸ªç®€å•çš„è¿‡æ»¤å™¨ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">remove_private</span>(<span class="hljs-params">text: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-comment"># åŒ¹é… &lt;private&gt;...&lt;/private&gt; å¹¶æ›¿æ¢ä¸ºå ä½ç¬¦</span>
    <span class="hljs-keyword">return</span> re.sub(<span class="hljs-string">r"&lt;private&gt;.*?&lt;/private&gt;"</span>, <span class="hljs-string">"[PRIVATE HIDDEN]"</span>, text, flags=re.DOTALL)
</code></pre>
<p>å½“æ£€æµ‹åˆ° <code>&lt;private&gt;</code> æ ‡ç­¾æ—¶ï¼ŒåŸå§‹å†…å®¹ä¼šè¢«æ¸…æ´—ï¼Œ<strong>ä¸ä¼š</strong>è¿›å…¥ FTS ç´¢å¼•ï¼Œä¹Ÿä¸ä¼šè¢«å­˜å‚¨åœ¨æ˜æ–‡å­—æ®µä¸­ï¼ˆæˆ–è€…åªå­˜å‚¨è„±æ•åçš„ç‰ˆæœ¬ï¼Œå–å†³äºé…ç½®ï¼‰ã€‚</p>
<h4 data-id="heading-6">3.3 æ¸è¿›å¼æ£€ç´¢ï¼šSearch -&gt; Timeline</h4>
<p>å•çº¯çš„å…³é”®è¯æœç´¢å¾€å¾€ä¸¢å¤±ä¸Šä¸‹æ–‡ã€‚<code>trae-mem</code> å¼•å…¥äº† <strong>Timeline (æ—¶é—´çº¿)</strong> çš„æ¦‚å¿µã€‚
å½“ä½ æœåˆ°ä¸€æ¡å…³äºâ€œæŠ¥é”™æ—¥å¿—â€çš„è®°å½•æ—¶ï¼Œä½ å¾€å¾€æƒ³çœ‹å®ƒ<strong>å‰å 5 åˆ†é’Ÿ</strong>å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p>
<ol>
<li><strong>Search</strong>: <code>SELECT ... FROM observations_fts WHERE ...</code> æ‰¾åˆ°å‘½ä¸­ç‚¹ã€‚</li>
<li><strong>Timeline</strong>: æ‹¿åˆ°å‘½ä¸­ç‚¹çš„ <code>session_id</code> å’Œ <code>timestamp</code>ï¼ŒæŸ¥è¯¢ <code>timestamp Â± window</code> èŒƒå›´å†…çš„æ‰€æœ‰è®°å½•ã€‚</li>
</ol>
<p>è¿™ç§â€œç‚¹é¢ç»“åˆâ€çš„æ£€ç´¢æ–¹å¼ï¼Œèƒ½æå…¶ç²¾å‡†åœ°è¿˜åŸå½“æ—¶çš„æ€ç»´ç°åœºã€‚</p>
<h4 data-id="heading-7">3.4 ä¸Šä¸‹æ–‡æ³¨å…¥ (Injection)</h4>
<p>è¿™æ˜¯æœ€é…·çš„éƒ¨åˆ†ã€‚å½“ä½ åœ¨æ–°ä¼šè¯ä¸­éœ€è¦ç”¨åˆ°ä¹‹å‰çš„çŸ¥è¯†æ—¶ï¼Œ<code>trae-mem</code> ä¼šç”Ÿæˆä¸€ä¸ªç»“æ„åŒ–çš„ Context Blockï¼š</p>
<pre><code class="hljs language-text" lang="text">ã€trae-mem æ³¨å…¥ä¸Šä¸‹æ–‡ã€‘
æŸ¥è¯¢ï¼šæ’­æ”¾å™¨ä¼˜åŒ–

æœ€è¿‘ä¼šè¯æ‘˜è¦ï¼š
- [Session A] è®¨è®ºäº† ExoPlayer çš„ç¼“å­˜é…ç½®
- [Session B] å°è¯•äº† PreloadManager ä½†å¤±è´¥äº†

ç›¸å…³è§‚æµ‹ç»†èŠ‚ï¼š
- [User] æˆ‘è¦ä¼˜åŒ– Android æ’­æ”¾å™¨çš„é¢„åŠ è½½ç­–ç•¥...
- [Grep] player/config.kt ...
</code></pre>
<p>è¿™ä¸ª Block å¯ä»¥é€šè¿‡ MCP å·¥å…·ç›´æ¥å–‚ç»™ Trae çš„å½“å‰ä¼šè¯ï¼Œè®© AI ç¬é—´â€œæƒ³èµ·â€ä¹‹å‰çš„ä¸Šä¸‹æ–‡ã€‚</p>
<hr/>
<h3 data-id="heading-8">4. æŠ€æœ¯æ€»ç»“ä¸æ€è€ƒ</h3>
<p>å¼€å‘ <code>trae-mem</code> çš„è¿‡ç¨‹ï¼Œå…¶å®æ˜¯å¯¹ <strong>AI è®°å¿†æœºåˆ¶</strong>çš„ä¸€æ¬¡å¾®å‹æ¢ç´¢ã€‚</p>
<ul>
<li><strong>æœ¬åœ°åŒ–æ˜¯è¶‹åŠ¿</strong>ï¼šéšç€ IDE è¶Šæ¥è¶Šæ™ºèƒ½ï¼Œå¤§é‡çš„ä¸Šä¸‹æ–‡æ•°æ®äº§ç”Ÿåœ¨æœ¬åœ°ã€‚å°†è®°å¿†ç•™åœ¨æœ¬åœ°ï¼Œæ—¢æ˜¯éšç§çš„éœ€æ±‚ï¼Œä¹Ÿæ˜¯æ€§èƒ½çš„éœ€æ±‚ï¼ˆé›¶ç½‘ç»œå»¶è¿Ÿï¼‰ã€‚</li>
<li><strong>ç»“æ„åŒ– vs éç»“æ„åŒ–</strong>ï¼šå•çº¯å­˜ Log æ˜¯ä¸å¤Ÿçš„ï¼Œå¿…é¡»æœ‰ <strong>Summarization (æ‘˜è¦)</strong>ã€‚ç›®å‰çš„ç‰ˆæœ¬ä½¿ç”¨äº†å¯å‘å¼æ‘˜è¦ï¼ˆHeuristicï¼‰ï¼Œæœªæ¥æ¥å…¥æœ¬åœ° LLMï¼ˆå¦‚ Ollamaï¼‰è¿›è¡Œè¯­ä¹‰æ‘˜è¦å°†æ˜¯å·¨å¤§çš„æå‡ç‚¹ã€‚</li>
<li><strong>MCP çš„æ½œåŠ›</strong>ï¼šModel Context Protocol è®©å·¥å…·çš„å¼€å‘å˜å¾—å¼‚å¸¸ç®€å•ã€‚å®ƒè§£è€¦äº† IDE å’Œå·¥å…·ï¼Œè®©æˆ‘ä»¬èƒ½ç”¨ Python éšå¿ƒæ‰€æ¬²åœ°æ‰©å±• IDE çš„èƒ½åŠ›ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-9">ğŸ“¸ æ•ˆæœæ¼”ç¤º</h4>
<p><em>(æ­¤å¤„é¢„ç•™æ¼”ç¤º GIFï¼šå±•ç¤ºåœ¨ Trae ä¸­è¾“å…¥ @trae-mem æœç´¢å¹¶æ³¨å…¥ä¸Šä¸‹æ–‡çš„è¿‡ç¨‹)</em>
<img alt="Trae-Mem Demo Placeholderè½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" src="" loading="lazy"/></p>
<hr/>
<blockquote>
<p><strong>é¡¹ç›®å¼€æºåœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frong5690001%2Ftrae-mem" target="_blank" title="https://github.com/rong5690001/trae-mem" ref="nofollow noopener noreferrer">github.com/rong5690001â€¦</a>
æ¬¢è¿ Star â­ï¸ å’Œ PRï¼Œä¸€èµ·æ‰“é€ æ›´èªæ˜çš„ AI ç¼–ç¨‹åŠ©æ‰‹ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Cesiumå¯è§†åŒ–ç³»ç»Ÿå®æˆ˜è¯¾ç¨‹:å…¨é¢æ•™ç¨‹å­¦ä¹ ]]></title>    <link>https://juejin.cn/post/7602789520035086346</link>    <guid>https://juejin.cn/post/7602789520035086346</guid>    <pubDate>2026-02-04T08:46:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602789520035086346" data-draft-id="7602842876255584302" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Cesiumå¯è§†åŒ–ç³»ç»Ÿå®æˆ˜è¯¾ç¨‹:å…¨é¢æ•™ç¨‹å­¦ä¹ "/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-04T08:46:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·238233290184"/> <meta itemprop="url" content="https://juejin.cn/user/1611231935340827"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Cesiumå¯è§†åŒ–ç³»ç»Ÿå®æˆ˜è¯¾ç¨‹:å…¨é¢æ•™ç¨‹å­¦ä¹ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1611231935340827/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·238233290184
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T08:46:18.000Z" title="Wed Feb 04 2026 08:46:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ•°å­—å­ªç”Ÿä¸æ™ºæ…§åŸå¸‚æ¦‚å¿µå¸­å·ä¸šç•Œçš„å½“ä¸‹ï¼ŒWeb ç«¯çš„ä¸‰ç»´å¯è§†åŒ–å·²ç„¶æˆä¸ºå‰ç«¯å¼€å‘è€…çš„å¿…ä¿®è¯¾ã€‚æœ€è¿‘ç³»ç»Ÿå­¦ä¹ äº†ã€Šå‰ç«¯ Cesium å¯è§†åŒ–ç³»ç»Ÿå®æˆ˜è¯¾ç¨‹ã€‹çš„å®Œç»“ç‰ˆï¼Œæ„Ÿè§¦é¢‡æ·±ã€‚è¿™ä¸ä»…æ˜¯ä¸€æ¬¡å·¥å…·é“¾çš„æ¢³ç†ï¼Œæ›´æ˜¯ä¸€åœºä»â€œçœ‹demoâ€åˆ°â€œé€ è½®å­â€çš„æ€ç»´è·ƒè¿ã€‚Cesium ä½œä¸º WebGL é¢†åŸŸçš„éœ¸ä¸»ï¼Œå…¶ä¸Šæ‰‹éš¾åº¦ä¸åŠŸèƒ½æ·±åº¦çš„çŸ›ç›¾ï¼Œå¸¸å¸¸è®©åˆå­¦è€…æœ›è€Œå´æ­¥ã€‚è€Œè¿™å¥—è¯¾ç¨‹æœ€å¤§çš„ä»·å€¼ï¼Œåœ¨äºå®ƒæŠ½ä¸å‰¥èŒ§ï¼Œå°†å¤æ‚çš„ 3D æ¦‚å¿µè½¬åŒ–ä¸ºå¯è½åœ°çš„å·¥ç¨‹ä»£ç ã€‚**<strong>å­¦ä¹ åœ°å€ï¼špan.baidu.com/s/1WwerIZ_elz_FyPKqXAiZCA?pwd=waug</strong>
**
<strong>ä¸€ã€ ä» Viewer åˆ°æ¶æ„ï¼šå·¥ç¨‹åŒ–çš„è§‰é†’</strong></p>
<p>è¯¾ç¨‹å¼€ç¯‡å¹¶æ²¡æœ‰æ€¥äºå †ç Œç‰¹æ•ˆï¼Œè€Œæ˜¯å¼ºè°ƒäº†â€œæ¶æ„å…ˆè¡Œâ€çš„åŸåˆ™ã€‚å¾ˆå¤š Cesium é¡¹ç›®æœ€ç»ˆæ²¦ä¸ºç»´æŠ¤å›°éš¾çš„é¢æ¡ä»£ç ï¼Œå¾€å¾€æ˜¯å› ä¸ºç¼ºä¹è‰¯å¥½çš„çŠ¶æ€ç®¡ç†ä¸æ¨¡å—åˆ’åˆ†ã€‚å®æˆ˜ä¸­ï¼Œæˆ‘ä»¬ä¸èƒ½ä»…ä»…æŠŠ Cesium å½“ä½œä¸€ä¸ªÂ <code>div</code>Â å®¹å™¨ï¼Œè€Œåº”å°†å…¶è§†ä¸ºæ•´ä¸ªç³»ç»Ÿçš„æ¸²æŸ“å¼•æ“ã€‚</p>
<p>é€šè¿‡è¯¾ç¨‹çš„å­¦ä¹ ï¼Œæˆ‘æ·±åˆ»ä½“ä¼šåˆ°å¯¹Â <code>Cesium.Viewer</code>Â çš„äºŒæ¬¡å°è£…è‡³å…³é‡è¦ã€‚æˆ‘ä»¬éœ€è¦å±è”½é»˜è®¤çš„ UI ç»„ä»¶ï¼Œæ³¨å…¥è‡ªå®šä¹‰çš„åæ ‡ç³»è½¬æ¢é€»è¾‘ï¼Œå¹¶å°†ç›¸æœºæ§åˆ¶ã€åœºæ™¯å›¾å±‚ä¸ä¸šåŠ¡é€»è¾‘è§£è€¦ã€‚è¿™ç§â€œé«˜å†…èšã€ä½è€¦åˆâ€çš„æ¶æ„æ€æƒ³ï¼Œæ˜¯æ„å»ºå¤§å‹å¯è§†åŒ–ç³»ç»Ÿçš„åŸºçŸ³ã€‚</p>
<p><strong>äºŒã€ æ ¸å¿ƒä»£ç å®æˆ˜ï¼šæ•°æ®é©±åŠ¨çš„åŠ¨æ€çº¹ç†</strong></p>
<p>åœ¨å¯è§†åŒ–ç³»ç»Ÿä¸­ï¼Œå¦‚ä½•è®©æ¯ç‡¥çš„å‡ ä½•ä½“â€œæ´»â€èµ·æ¥æ˜¯éš¾ç‚¹ã€‚è¯¾ç¨‹ä¸­å…³äºâ€œåŠ¨æ€æ‰«æåœ†â€ä¸â€œæµå‘çº¿â€çš„å®ç°æå…·å¹²è´§ä»·å€¼ã€‚è¿™ä¸ä»…æ˜¯è§†è§‰ç‰¹æ•ˆï¼Œæ›´æ˜¯åŸºäº CesiumÂ <code>CallbackProperty</code>Â çš„æ€§èƒ½ä¼˜åŒ–å…¸èŒƒã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€æ®µæ ¸å¿ƒå®æˆ˜ä»£ç ï¼Œå±•ç¤ºäº†å¦‚ä½•åˆ›å»ºä¸€ä¸ªå…·æœ‰æ‰©æ•£æ•ˆæœçš„åŠ¨æ€é›·è¾¾æ‰«æï¼Œè¿™æ˜¯åŸºäº CallbackProperty å®æ—¶æ›´æ–°çº¹ç†çš„æ ¸å¿ƒé€»è¾‘ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">/**
 * åˆ›å»ºåŠ¨æ€æ‰©æ•£æ‰«æåœ†
 * åˆ©ç”¨äº†CallbackPropertyåœ¨æ¯ä¸€å¸§å›è°ƒæ—¶æ›´æ–°çº¹ç†æˆ–åŠå¾„
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createDynamicRipple</span>(<span class="hljs-params">viewer, centerLon, centerLat</span>) </span>{
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">startTime</span> = Cesium.JulianDate.<span class="hljs-title function_ invoke__">now</span>();
    
    <span class="hljs-comment">// å®šä¹‰æ‰©æ•£åŠå¾„éšæ—¶é—´å˜åŒ–çš„å‡½æ•°</span>
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">radiusCallback</span> = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">time, result</span>) </span>{
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">elapsed</span> = Cesium.JulianDate.<span class="hljs-title function_ invoke__">secondsDifference</span>(time, startTime);
        <span class="hljs-comment">// æ¯ç§’æ‰©æ•£ 500ç±³ï¼Œæœ€å¤§ 2000ç±³ï¼Œå¾ªç¯æ’­æ”¾</span>
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">maxRadius</span> = <span class="hljs-number">2000</span>;
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">speed</span> = <span class="hljs-number">500</span>;
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">currentRadius</span> = (elapsed * speed) % maxRadius;
        <span class="hljs-keyword">return</span> currentRadius;
    };

    <span class="hljs-comment">// å®šä¹‰é€æ˜åº¦éšåŠå¾„å˜å¤§è€Œé™ä½ï¼Œå®ç°æ¸éšæ•ˆæœ</span>
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">alphaCallback</span> = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">time, result</span>) </span>{
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">elapsed</span> = Cesium.JulianDate.<span class="hljs-title function_ invoke__">secondsDifference</span>(time, startTime);
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">maxRadius</span> = <span class="hljs-number">2000</span>;
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">speed</span> = <span class="hljs-number">500</span>;
        <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">currentRadius</span> = (elapsed * speed) % maxRadius;
        <span class="hljs-keyword">return</span> <span class="hljs-number">1.0</span> - (currentRadius / maxRadius); 
    };

    viewer.entities.<span class="hljs-title function_ invoke__">add</span>({
        <span class="hljs-attr">position</span>: Cesium.Cartesian3.<span class="hljs-title function_ invoke__">fromDegrees</span>(centerLon, centerLat),
        <span class="hljs-attr">name</span>: <span class="hljs-string">'Dynamic Ripple'</span>,
        <span class="hljs-attr">ellipse</span>: {
            // æ ¸å¿ƒï¼šä½¿ç”¨ CallbackProperty å®ç°æ¯ä¸€å¸§çš„å±æ€§åŠ¨æ€æ›´æ–°
            <span class="hljs-attr">semiMinorAxis</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title function_ invoke__">CallbackProperty</span>(radiusCallback, <span class="hljs-literal">false</span>),
            <span class="hljs-attr">semiMajorAxis</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title function_ invoke__">CallbackProperty</span>(radiusCallback, <span class="hljs-literal">false</span>),
            <span class="hljs-attr">material</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title function_ invoke__">ColorMaterialProperty</span>(
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title function_ invoke__">CallbackProperty</span>((time) =&gt; {
                    <span class="hljs-keyword">return</span> Cesium.Color.CYAN.<span class="hljs-title function_ invoke__">withAlpha</span>(<span class="hljs-title function_ invoke__">alphaCallback</span>(time));
                }, <span class="hljs-literal">false</span>)
            ),
            outline: <span class="hljs-literal">false</span> <span class="hljs-comment">// å…³é—­æè¾¹ä»¥æå‡æ€§èƒ½</span>
        }
    });
}
</code></pre>
<p>è¿™æ®µä»£ç è™½ç„¶ç®€çŸ­ï¼Œå´æ­ç¤ºäº† Cesium é«˜æ€§èƒ½å¯è§†åŒ–çš„æ ¸å¿ƒï¼š<strong>é¿å…åœ¨ä¸»å¾ªç¯ä¸­è¿›è¡Œç¹é‡çš„ DOM æ“ä½œæˆ–å¤æ‚çš„å¯¹è±¡åˆ›å»ºï¼Œè€Œæ˜¯åˆ©ç”¨ Property æœºåˆ¶è®© Cesium çš„æ¸²æŸ“å¾ªç¯è‡ªåŠ¨å¤„ç†çŠ¶æ€æ›´æ–°</strong>ã€‚è¿™æ˜¯è¯¾ç¨‹ä¸­æœ€ä¸ºç²¾åçš„â€œå¹²è´§â€ä¹‹ä¸€ï¼Œå®ƒèƒ½è®©æˆ‘ä»¬åœ¨æ¸²æŸ“æˆç™¾ä¸Šåƒä¸ªåŠ¨æ€å®ä½“æ—¶ï¼Œä¾ç„¶ä¿æŒ 60FPS çš„æµç•…åº¦ã€‚</p>
<p><strong>ä¸‰ã€ æ€§èƒ½ä¸è§†è§‰çš„å¹³è¡¡ä¹‹é“</strong></p>
<p>è¯¾ç¨‹ååŠéƒ¨åˆ†å¯¹äº Post-Processingï¼ˆåå¤„ç†ï¼‰å’Œ 3D Tiles çš„ä¼˜åŒ–è®²è§£ï¼Œå¡«è¡¥äº†å¾ˆå¤šä¸­æ–‡èµ„æ–™ä¸­çš„ç©ºç™½ã€‚å¾ˆå¤šå¼€å‘è€…åœ¨åŠ è½½åŸå¸‚çº§ç™½æ¨¡æ—¶ï¼Œå¾€å¾€ä¼šé‡åˆ°æµè§ˆå™¨å´©æºƒæˆ–å¸§ç‡éª¤é™çš„é—®é¢˜ã€‚è¯¾ç¨‹æŒ‡å‡ºï¼Œé—®é¢˜çš„æ ¹æºåœ¨äºâ€œè´ªå¤šæ±‚å…¨â€ã€‚</p>
<p>å®æˆ˜ä¸­ï¼Œæˆ‘ä»¬åº”å½“å–„ç”¨Â <code>3D Tiles</code>Â çš„Â <code>skipLevelOfDetail</code>Â å’ŒÂ <code>immediatelyLoadDesiredLevelOfDetail</code>Â ç­–ç•¥ï¼Œå¹¶ç»“åˆ Cesium çš„ API è§†é”¥ä½“å‰”é™¤æœºåˆ¶ã€‚æ­¤å¤–ï¼Œå¯¹äºæµ·é‡ç‚¹äº‘æ•°æ®çš„å¤„ç†ï¼Œè¯¾ç¨‹æ¨èäº†åŸºäº GPU çš„ç²’å­æ¸²æŸ“æ–¹æ¡ˆï¼Œè€Œéä¼ ç»Ÿçš„ Entity APIã€‚è¿™ç§å¯¹æ¸²æŸ“ç®¡çº¿çš„æ·±åˆ»ç†è§£ï¼Œæ¯”å•çº¯èƒŒè¯µ API æ–‡æ¡£è¦æœ‰ä»·å€¼å¾—å¤šã€‚</p>
<p><strong>å››ã€ ç»“è¯­</strong></p>
<p>ã€Šå‰ç«¯ Cesium å¯è§†åŒ–ç³»ç»Ÿå®æˆ˜è¯¾ç¨‹ã€‹å®Œç»“ç‰ˆä¸ä»…ä»…æ˜¯ä¸€å¥—æ•™ç¨‹ï¼Œæ›´åƒæ˜¯ä¸€æœ¬é¿å‘æŒ‡å—ã€‚å®ƒè®©æˆ‘æ˜ç™½ï¼Œä¼˜ç§€çš„ä¸‰ç»´å¯è§†åŒ–ç³»ç»Ÿï¼Œæ˜¯åœ¨æœ‰é™çš„æµè§ˆå™¨èµ„æºä¸‹ï¼Œé€šè¿‡æ•°å­¦é€»è¾‘ä¸å›¾å½¢å­¦çš„ç»“åˆï¼Œæ„å»ºå‡ºæ—¢ç¾è§‚åˆé«˜æ•ˆçš„æ•°å­—ä¸–ç•Œã€‚</p>
<p>æ­£å¦‚ä¸Šè¿°ä»£ç æ‰€ç¤ºï¼ŒçœŸæ­£çš„ mastery ä¸æ˜¯è°ƒç”¨å°è£…å¥½çš„æ’ä»¶ï¼Œè€Œæ˜¯æŒæ¡åº•å±‚æ•°æ®æµåŠ¨çš„è§„å¾‹ã€‚é€šè¿‡è¿™æ¬¡å­¦ä¹ ï¼Œæˆ‘å·²å‡†å¤‡å¥½å°†è¿™ç§å¯è§†åŒ–èƒ½åŠ›åº”ç”¨åˆ°æ›´å¤æ‚çš„ä¸šåŠ¡åœºæ™¯ä¸­å»ï¼Œå°†æ•°æ®çš„ä»·å€¼åœ¨ä¸‰ç»´ç©ºé—´ä¸­æ— é™æ”¾å¤§ã€‚å¯¹äºç«‹å¿—åœ¨ GIS é¢†åŸŸæ·±è€•çš„å‰ç«¯äººæ¥è¯´ï¼Œè¿™é—¨è¯¾ç¨‹æ— ç–‘æ˜¯ä¸€å—åšå®çš„å«è„šçŸ³ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è…¾è®¯å…ƒå®è¢«å¾®ä¿¡å°æ€ï¼Œè¿™ä¸æç¬‘å—ï¼Œç‹ èµ·æ¥è¿è‡ªå·±éƒ½æ‰“ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7602555027304267816</link>    <guid>https://juejin.cn/post/7602555027304267816</guid>    <pubDate>2026-02-04T08:48:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602555027304267816" data-draft-id="7602562585099976738" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è…¾è®¯å…ƒå®è¢«å¾®ä¿¡å°æ€ï¼Œè¿™ä¸æç¬‘å—ï¼Œç‹ èµ·æ¥è¿è‡ªå·±éƒ½æ‰“ï¼Ÿ"/> <meta itemprop="keywords" content="èµ„è®¯"/> <meta itemprop="datePublished" content="2026-02-04T08:48:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯æ¢¦å·¥å‚"/> <meta itemprop="url" content="https://juejin.cn/user/4230576472589976"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è…¾è®¯å…ƒå®è¢«å¾®ä¿¡å°æ€ï¼Œè¿™ä¸æç¬‘å—ï¼Œç‹ èµ·æ¥è¿è‡ªå·±éƒ½æ‰“ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4230576472589976/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯æ¢¦å·¥å‚
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T08:48:14.000Z" title="Wed Feb 04 2026 08:48:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€äº‹ä»¶å›é¡¾</h2>
<p>è¿‘æœŸï¼Œæ‰€æœ‰ç¾¤å°ä¼™ä¼´éƒ½åœ¨åˆ†äº«å…ƒå®ï¼Œé“ºå¤©ç›–åœ°çš„ç°é‡‘çº¢åŒ…ï¼Œå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a9fc2f468714dfbb20016fc3d7d4226~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770799693&amp;x-signature=TnQREvocDoJr1vxb%2FKeJK6ju%2F1g%3D" alt="Snipaste_2026-02-04_16-31-12.png" loading="lazy"/></p>
<p>ç»ˆäºåœ¨ä»Šå¤©ï¼Œ2æœˆ4æ—¥ï¼Œå¾®ä¿¡å®‰å…¨ä¸­å¿ƒå‘å¸ƒå…¬å‘Šï¼Œå¯¹è…¾è®¯å…ƒå®çš„æ˜¥èŠ‚çº¢åŒ…æ´»åŠ¨è¿›è¡Œå¤„ç½®â€”â€”é™åˆ¶å…¶åœ¨å¾®ä¿¡å†…ç›´æ¥æ‰“å¼€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24961bf9305e4e7ba3f340cd67b48c62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770799693&amp;x-signature=cU5O9NCb7YsbMlODTxTYQg%2BAeL8%3D" alt="image.png" loading="lazy"/></p>
<p>ç†ç”±ï¼Ÿ<strong>è¯±å¯¼åˆ†äº«</strong>ã€‚</p>
<p>æ ¹æ®å…¬å‘Šï¼Œå…ƒå®çº¢åŒ…æ´»åŠ¨é€šè¿‡"åšä»»åŠ¡""é¢†çº¢åŒ…"ç­‰æ–¹å¼ï¼Œè¯±å¯¼ç”¨æˆ·é«˜é¢‘åˆ†äº«é“¾æ¥åˆ°å¾®ä¿¡ç¾¤ç­‰åœºæ™¯ï¼Œå¹²æ‰°å¹³å°ç”Ÿæ€ç§©åºã€å½±å“ç”¨æˆ·ä½“éªŒã€‚</p>
<p>è¿™è¿˜ä¸æ˜¯æœ€ç¦»è°±çš„ã€‚</p>
<p>æœ€ç¦»è°±çš„æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p><strong>å…ƒå®æ˜¯è…¾è®¯çš„äº§å“ï¼Œå¾®ä¿¡ä¹Ÿæ˜¯è…¾è®¯çš„äº§å“ã€‚</strong></p>
<p>ç›¸å½“äºè…¾è®¯ç”¨å·¦æ‰‹æ‰‡äº†å³æ‰‹ä¸€å·´æŒï¼Œç„¶åè¯´ï¼š"ä½ è¿è§„äº†ã€‚"</p>
<hr/>
<h2 data-id="heading-1">äºŒã€é­”å¹»ç°å®</h2>
<p>æˆ‘ä»¬æ¥è¿˜åŸä¸€ä¸‹è¿™ä¸ªç¦»è°±çš„åœºæ™¯ï¼š</p>
<p>å¾®ä¿¡ï¼ˆå¯¹å…ƒå®è¯´ï¼‰ï¼š"æ ¹æ®ã€Šå¾®ä¿¡å¤–éƒ¨é“¾æ¥å†…å®¹ç®¡ç†è§„èŒƒã€‹ç¬¬2.1.2æ¡ï¼Œä½ é€šè¿‡åˆ©ç›Šè¯±æƒ‘è¯±å¯¼ç”¨æˆ·åˆ†äº«å¤–é“¾ï¼Œå±äºè¯±å¯¼åˆ†äº«è¿è§„ã€‚"</p>
<p>å…ƒå®ï¼ˆå§”å±ˆï¼‰ï¼š"å¯æˆ‘æ˜¯äº²ç”Ÿçš„å•Šâ€¦â€¦"</p>
<p>å¾®ä¿¡ï¼ˆé“é¢æ— ç§ï¼‰ï¼š"äº²ç”Ÿçš„æ€ä¹ˆäº†ï¼Ÿè§„åˆ™é¢å‰äººäººå¹³ç­‰ã€‚"</p>
<p>å¥½å®¶ä¼™ï¼Œè¿™æ³¢æ“ä½œæˆ‘æ„¿ç§°ä¹‹ä¸ºï¼š</p>
<p><strong>"å¤§ä¹‰ç­äº²"</strong> âœ…</p>
<p><strong>"å…­äº²ä¸è®¤"</strong> âœ…</p>
<p><strong>"é“é¢æ— ç§"</strong> âœ…</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€åŒæ ‡ç°åœº</h2>
<p>æ›´æœ‰æ„æ€çš„æ˜¯ï¼Œè…¾è®¯å†…éƒ¨ä¿¡ä¸­è¿˜è¯•å›¾æŒ£æ‰ï¼š</p>
<blockquote>
<p>"å…ƒå®æ˜¥èŠ‚çº¢åŒ…æ´»åŠ¨åœ¨è®¾è®¡ä¸Šï¼Œå…¶åŸºç¡€é€»è¾‘æ˜¯'æ— é—¨æ§›é¢†å–'ã€‚ç”¨æˆ·æ— éœ€å®Œæˆè¯¸å¦‚åŠ©åŠ›ã€é›†å¡ç­‰ä»»åŠ¡ï¼Œå³å¯ç›´æ¥é¢†å–åŸºç¡€çº¢åŒ…ã€‚ä¸å¹³å°ä¸€è´¯åå¯¹çš„'è¯±å¯¼åˆ†äº«'æ¨¡å¼æœ‰åŒºåˆ«ã€‚"</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee0cd864ffd947d0bdf97a55ac039d9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770799693&amp;x-signature=d9gz84rrn09JsAJ4HcWQEb5zxZI%3D" alt="image.png" loading="lazy"/></p>
<p>ç¿»è¯‘ä¸€ä¸‹å°±æ˜¯ï¼š</p>
<p>"æˆ‘ä»¬è¿™ä¸ªä¸ä¸€æ ·ï¼Œç”¨æˆ·ä¸åˆ†äº«ä¹Ÿèƒ½é¢†çº¢åŒ…ã€‚"</p>
<p>ä½†é—®é¢˜æ˜¯â€”â€”</p>
<p><strong>ç”¨æˆ·ä¸åˆ†äº«ï¼Œåªèƒ½é¢†åŸºç¡€çº¢åŒ…ï¼›ç”¨æˆ·åˆ†äº«äº†ï¼Œèƒ½é¢†æ›´å¤šã€‚</strong></p>
<p>è¿™å«ä»€ä¹ˆï¼Ÿ</p>
<p>è¿™å«"ä¸å«è¯±å¯¼åˆ†äº«ï¼Œå«è¯±å¯¼ä½ ä¸»åŠ¨é€‰æ‹©åˆ†äº«"ã€‚</p>
<p>è·Ÿ"æˆ‘ä¸å·é’±ï¼Œæˆ‘åªæ˜¯å¸®ä½ ä¿ç®¡"æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
<hr/>
<h2 data-id="heading-3">å››ã€è®½åˆºæ‹‰æ»¡</h2>
<p>æ•´ä¸ªäº‹ä»¶æœ€è®½åˆºçš„æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>å¾®ä¿¡æ‰“å‡»è¯±å¯¼åˆ†äº«ï¼Œç†ç”±æ˜¯"å¹²æ‰°å¹³å°ç”Ÿæ€ç§©åºã€å½±å“ç”¨æˆ·ä½“éªŒã€å¯¹ç”¨æˆ·é€ æˆéªšæ‰°"ã€‚</p>
<p>ç»“æœå‘¢ï¼Ÿ</p>
<p>å…ƒå®çº¢åŒ…æ´»åŠ¨åœ¨å¤šä¸ªç¤¾äº¤å¹³å°ä¸Šåˆ·å±ï¼Œè¢«ç½‘å‹è´¨ç–‘"è¯±å¯¼åˆ†äº«"ã€‚</p>
<p>ç„¶åå¾®ä¿¡ä¸å¾—ä¸å¤„ç½šè‡ªå·±çš„äº§å“ã€‚</p>
<p>è¿™å«ä»€ä¹ˆï¼Ÿ</p>
<p><strong>æ¬èµ·çŸ³å¤´ç ¸è‡ªå·±çš„è„šã€‚</strong></p>
<p>ä¸å¯¹ã€‚</p>
<p>è¿™å«<strong>ç”¨çŸ³å¤´ç ¸è‡ªå·±çš„è„šï¼Œç„¶åè¯´"çœ‹ï¼Œæˆ‘æ‰§è¡Œè§„åˆ™å¾ˆä¸¥æ ¼"ã€‚</strong></p>
<hr/>
<h2 data-id="heading-4">äº”ã€è°æ›´å—ä¼¤ï¼Ÿ</h2>
<p>è¿™ä¸ªäº‹ä»¶é‡Œï¼Œæ²¡æœ‰èµ¢å®¶ã€‚</p>
<p><strong>å…ƒå®</strong> â†’ æ´»åŠ¨è¢«å°ï¼Œå£°èª‰å—æŸï¼Ÿ</p>
<p><strong>å¾®ä¿¡</strong> â†’ è¢«ç½‘å‹ç¾¤å˜²"åŒæ ‡""è‡ªå·±æ‰“è‡ªå·±"</p>
<p><strong>è…¾è®¯</strong> â†’ å†…éƒ¨äº’æ®´ï¼Œå®¶ä¸‘å¤–æ‰¬</p>
<p><strong>ç”¨æˆ·</strong> â†’ æœ¬æ¥èƒ½é¢†çº¢åŒ…ï¼Œç°åœ¨åªèƒ½é¢†ä¸ªå¯‚å¯</p>
<p>å››è¾“ã€‚</p>
<hr/>
<h2 data-id="heading-5">å…­ã€å†™åœ¨æœ€å</h2>
<p>å…¶å®å§ï¼Œè¿™äº‹å„¿è¦æ˜¯æ¢ä¸ªè§’åº¦çœ‹ï¼Œä¹Ÿç®—æ˜¯ä¸€ä»¶å¥½äº‹ã€‚</p>
<p>è‡³å°‘è¯´æ˜<strong>å¾®ä¿¡æ˜¯è®¤çœŸæ‰§è¡Œè§„åˆ™çš„</strong>ã€‚</p>
<p>å“ªæ€•æ˜¯äº²å„¿å­ï¼Œè¯¥ç½šè¿˜æ˜¯ç½šã€‚</p>
<p>è‡³äºè…¾è®¯å†…éƒ¨ä»¥åæ€ä¹ˆåè°ƒï¼Œé‚£æ˜¯ä»–ä»¬çš„äº‹ã€‚</p>
<p>ä½†æœ‰ä¸€è¯´ä¸€ï¼Œä¸‹æ¬¡åšæ´»åŠ¨ä¹‹å‰ï¼Œèƒ½ä¸èƒ½å…ˆå†…éƒ¨å¯¹é½ä¸€ä¸‹ï¼Ÿ</p>
<p>åˆ«é—¹åˆ°æœ€åï¼Œè‡ªå·±æŠŠè‡ªå·±ç»™å¤„ç½šäº†ã€‚</p>
<p>æ€ªå°´å°¬çš„ã€‚å„ä½å½“ä¸ªä¹çœ‹å§ï¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4446d57db021473ba695e78d2aca9924~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770799693&amp;x-signature=crD%2F6h89GqEZUaDqecRcblo7Z3w%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-6"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abad8709fc1d47988da79a3d87d3b064~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5qKm5bel5Y6C:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770799693&amp;x-signature=de6JJqYgnjrRi6bZaZYiOspDSG4%3D" alt="image.png" loading="lazy"/></h2>
<p><strong>ä½ è§‰å¾—å‘¢ï¼Ÿæ¬¢è¿è¯„è®ºåŒºèŠèŠã€‚ä½ å‚ä¸å…ƒå®æŠ¢çº¢åŒ…äº†å—ï¼ŸæŠ¢åˆ°äº†å¤šå°‘é’±ï¼Ÿ</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”Ÿäº§å¤ç›˜ï¼šä¸ºä»€ä¹ˆä½ çš„ HikariCP è¿æ¥æ± æ€»è¢«â€œæ‰“çˆ†â€ï¼Ÿåˆ«å†æ— è„‘è°ƒå¤§ maximumPoolSize äº†ï¼]]></title>    <link>https://juejin.cn/post/7602529888484917311</link>    <guid>https://juejin.cn/post/7602529888484917311</guid>    <pubDate>2026-02-04T08:47:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602529888484917311" data-draft-id="7602559134576476196" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”Ÿäº§å¤ç›˜ï¼šä¸ºä»€ä¹ˆä½ çš„ HikariCP è¿æ¥æ± æ€»è¢«â€œæ‰“çˆ†â€ï¼Ÿåˆ«å†æ— è„‘è°ƒå¤§ maximumPoolSize äº†ï¼"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-04T08:47:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JOEH60"/> <meta itemprop="url" content="https://juejin.cn/user/1750078239803614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”Ÿäº§å¤ç›˜ï¼šä¸ºä»€ä¹ˆä½ çš„ HikariCP è¿æ¥æ± æ€»è¢«â€œæ‰“çˆ†â€ï¼Ÿåˆ«å†æ— è„‘è°ƒå¤§ maximumPoolSize äº†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1750078239803614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JOEH60
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T08:47:12.000Z" title="Wed Feb 04 2026 08:47:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0"><strong>å‰è¨€</strong></h4>
<p>â€œæŠ¥è­¦ç¾¤åˆç‚¸äº†ï¼ŒDB è¿æ¥æ•°é£™å‡ï¼ŒHikariCP æŠ¥Â ConnectionTimeoutExceptionï¼â€<br/>
ä½œä¸º Java åç«¯ï¼Œè¿™è¡ŒæŠ¥é”™æ˜¯ä¸æ˜¯çœ‹ç€çœ¼ç†Ÿï¼Ÿå¾ˆå¤šäººçš„ç¬¬ä¸€ååº”æ˜¯ï¼šâ€œå¿«ï¼æŠŠÂ maximum-pool-sizeÂ ä» 10 æ”¹åˆ° 50ï¼Œé‡å¯ï¼â€<br/>
ç»“æœå‘¢ï¼Ÿç³»ç»Ÿæ’‘äº† 10 åˆ†é’Ÿï¼Œæ­»å¾—æ›´é€äº†ï¼Œè¿æ•°æ®åº“ CPU éƒ½è¢«æ‰“æ»¡äº†ã€‚</p>
<p>æˆ‘æ˜¯ [ä½ çš„æ˜µç§°]ï¼Œä»Šå¤©ä¸èŠè™šçš„ï¼Œç»“åˆæˆ‘ 9 å¹´çš„å®æˆ˜ç»éªŒï¼Œå¸¦å¤§å®¶æ·±åº¦æ‹†è§£ï¼š<strong>é«˜å¹¶å‘ä¸‹ï¼Œä½ çš„æ•°æ®åº“è¿æ¥æ± åˆ°åº•æ˜¯æ€ä¹ˆè¢«æ‰“çˆ†çš„ï¼Ÿ</strong></p>
<blockquote>
<p><strong>æ‰€å±ä¸“æ ï¼š</strong> Â [Java é«˜å¹¶å‘æ¶æ„å®æˆ˜ï¼šä»é’é“œåˆ°ç‹è€…]</p>
</blockquote>
<hr/>
<h4 data-id="heading-1"><strong>ä¸€ã€ è¯¯åŒºï¼šè¿æ¥æ± è¶Šå¤§è¶Šå¥½ï¼Ÿ</strong></h4>
<p>è¿™æ˜¯æœ€å¤§çš„è°è¨€ã€‚<br/>
æ•°æ®åº“è¿æ¥æœ¬è´¨ä¸Šæ˜¯ç»´æŠ¤ä¸€ä¸ªÂ <strong>TCP Socket</strong>ï¼Œæ•°æ®åº“ä¾§ï¼ˆå¦‚ MySQLï¼‰å¯¹åº”çš„æ¯ä¸€ä¸ªè¿æ¥èƒŒåéƒ½æ˜¯ä¸€ä¸ªÂ <strong>çº¿ç¨‹ï¼ˆThreadï¼‰</strong> ã€‚<br/>
å½“ä½ çš„Â maximumPoolSizeÂ è®¾ç½®è¿‡å¤§ï¼ˆä¾‹å¦‚ 100ã€200ï¼‰ï¼Œè€Œä½ çš„ CPU æ ¸å¿ƒæ•°åªæœ‰ 4 æ ¸æˆ– 8 æ ¸æ—¶ï¼š</p>
<ul>
<li><strong>ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ˆContext Switchï¼‰</strong> ï¼šOS ç–¯ç‹‚åœ¨å‡ ç™¾ä¸ªçº¿ç¨‹é—´åˆ‡æ¢ï¼ŒCPU æ—¶é—´å…¨èŠ±åœ¨è°ƒåº¦ä¸Šï¼Œè€Œä¸æ˜¯æ‰§è¡Œ SQLã€‚</li>
<li><strong>ç£ç›˜ I/O äº‰æŠ¢</strong>ï¼šå¤šä¸ªæŸ¥è¯¢åŒæ—¶ç«äº‰ç£ç›˜è¯»å†™ç£å¤´ã€‚</li>
</ul>
<p><strong>HikariCP ä½œè€…çš„æ¨èå…¬å¼ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">Connections</span>=((Core_countÃ—<span class="hljs-number">2</span>)+Effective_spindle_count)Connections=((Core_countÃ—<span class="hljs-number">2</span>)+Effective_spindle_count)
</code></pre>
<p>å¯¹äºä¸€ä¸ª 4 æ ¸çš„æœåŠ¡å™¨ï¼Œè¿æ¥æ•°è®¾ç½®Â <strong>10-12</strong>Â å¾€å¾€æ¯”è®¾ç½® 100 ååé‡æ›´é«˜ï¼<strong>å°‘å³æ˜¯å¤šï¼ˆLess is Moreï¼‰ã€‚</strong></p>
<hr/>
<h4 data-id="heading-2"><strong>äºŒã€ çœŸæ­£çš„å‡¶æ‰‹ï¼šé•¿äº‹åŠ¡ (Long Transaction)</strong></h4>
<p>å¦‚æœä½ çš„è¿æ¥æ•°è®¾ç½®åˆç†ï¼Œä½†ä¾ç„¶æŠ¥é”™ï¼Œ<strong>99% çš„åŸå› æ˜¯äº‹åŠ¡èŒƒå›´è¿‡å¤§</strong>ã€‚</p>
<p><strong>âŒ é”™è¯¯ç¤ºèŒƒï¼š</strong></p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buyItem</span><span class="hljs-params">(String userId, String itemId)</span> {
    <span class="hljs-comment">// 1. å ç”¨è¿æ¥ï¼ˆSpring äº‹åŠ¡å¼€å§‹æ—¶å°±è·å–è¿æ¥ï¼‰</span>
    <span class="hljs-comment">// 2. è¿œç¨‹è°ƒç”¨ï¼šæ‰£å‡åº“å­˜ (RPC/HTTPï¼Œè€—æ—¶ 200ms)</span>
    inventoryClient.decrease(itemId); 
    
    <span class="hljs-comment">// 3. å¤æ‚è®¡ç®— (è€—æ—¶ 50ms)</span>
    checkRisk(userId);
    
    <span class="hljs-comment">// 4. ç»ˆäºæ‰§è¡Œ SQL (è€—æ—¶ 5ms)</span>
    orderMapper.insert(order);
}
</code></pre>
<p><strong>åˆ†æï¼š</strong><br/>
åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œè¿æ¥è¢«æŒæœ‰äº†Â <strong>255ms</strong>ï¼Œä½†çœŸæ­£æ‰§è¡Œ SQL åªæœ‰Â <strong>5ms</strong>ã€‚è¿æ¥èµ„æºçš„åˆ©ç”¨ç‡ä»…ä¸ºÂ <strong>1.9%</strong> ï¼<br/>
åœ¨é«˜å¹¶å‘ä¸‹ï¼Œè¿æ¥æ± ç¬é—´å°±ä¼šè¢«è¿™äº›â€œå ç€èŒ…å‘ä¸æ‹‰å±â€çš„çº¿ç¨‹è€—å°½ã€‚</p>
<p><strong>âœ… ä¼˜åŒ–æ–¹æ¡ˆï¼šç¼©å°äº‹åŠ¡ç²’åº¦</strong><br/>
ä½¿ç”¨Â TransactionTemplateÂ æ‰‹åŠ¨æ§åˆ¶è¾¹ç•Œã€‚</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> TransactionTemplate transactionTemplate;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buyItemOptimized</span><span class="hljs-params">(String userId, String itemId)</span> {
    <span class="hljs-comment">// 1. è¿œç¨‹è°ƒç”¨ç§»å‡ºäº‹åŠ¡å¤– (ä¸å ç”¨ DB è¿æ¥)</span>
    inventoryClient.decrease(itemId);
    
    <span class="hljs-comment">// 2. å¤æ‚è®¡ç®—ç§»å‡ºäº‹åŠ¡å¤–</span>
    checkRisk(userId);
    
    <span class="hljs-comment">// 3. åªæœ‰çº¯æ•°æ®åº“æ“ä½œæ‰å¼€å¯äº‹åŠ¡</span>
    transactionTemplate.execute(status -&gt; {
        orderMapper.insert(order);
        <span class="hljs-comment">// å¦‚æœéœ€è¦æ›´æ–°å…¶ä»–è¡¨...</span>
        userMapper.updateBalance(userId);
        <span class="hljs-keyword">return</span> Boolean.TRUE;
    });
} 
</code></pre>
  
<hr/>
<h4 data-id="heading-3"><strong>ä¸‰ã€ éšå½¢æ€æ‰‹ï¼šSlow SQL ä¸ é”ç«äº‰</strong></h4>
<ul>
<li>
<p><strong>æ…¢ SQL</strong>ï¼šå¦‚æœä¸€æ¡ SQL éœ€è¦è·‘ 5 ç§’ï¼Œé‚£è¿™ä¸ªè¿æ¥å°±è¿™ 5 ç§’å†…æ— æ³•æœåŠ¡å…¶ä»–äººã€‚QPS ä¸€é«˜ï¼Œè¿æ¥æ± ç«‹é©¬æ¯ç«­ã€‚</p>
<ul>
<li>å¯¹ç­–ï¼šExplain åˆ†æï¼ŒåŠ ç´¢å¼•ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ­»é”/è¡Œé”ç­‰å¾…</strong>ï¼šselect ... for updateÂ æˆ–é«˜å¹¶å‘æ›´æ–°åŒä¸€è¡Œæ•°æ®ï¼ˆçƒ­ç‚¹è´¦æˆ·æ‰£æ¬¾ï¼‰ï¼Œä¼šå¯¼è‡´å¤§é‡è¿æ¥å¤„äºÂ WaitÂ çŠ¶æ€ã€‚</p>
<ul>
<li>å¯¹ç­–ï¼šRedis é¢„æ‰£å‡ï¼Œå¼‚æ­¥å†™å…¥ DBã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h4 data-id="heading-4"><strong>å››ã€ é»„é‡‘é…ç½®ï¼šHikariCP æ ¸å¿ƒå‚æ•°è°ƒä¼˜</strong></h4>
<p>é™¤äº†ä»£ç å±‚é¢ï¼Œé…ç½®ä¹Ÿå¾ˆå…³é”®ã€‚ä»¥ä¸‹æ˜¯ä¸€ä»½ç”Ÿäº§ç¯å¢ƒçš„â€œä¿å‘½é…ç½®â€ï¼š</p>
<pre><code class="hljs language-Yaml" lang="Yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">hikari:</span>
      <span class="hljs-comment"># 1. æ ¸å¿ƒè¿æ¥æ•°ï¼šåˆ‡è®°ä¸è¦è¿‡å¤§ï¼Œå‚è€ƒå…¬å¼</span>
      <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">15</span>
      <span class="hljs-comment"># 2. æœ€å°ç©ºé—²ï¼šå»ºè®®ä¸ max ç›¸ç­‰ï¼Œé¿å…å¿½å¤§å¿½å°çš„æ‰©ç¼©å®¹æ€§èƒ½æŸè€—</span>
      <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">15</span>
      <span class="hljs-comment"># 3. ç­‰å¾…è¶…æ—¶ï¼šé»˜è®¤ 30s å¤ªé•¿äº†ï¼å»ºè®®æ”¹ä¸º 3s-5sã€‚</span>
      <span class="hljs-comment"># å¿«é€Ÿå¤±è´¥ï¼ˆFail Fastï¼‰æ€»æ¯”æŠŠ tomcat çº¿ç¨‹æ± æ‹–æ­»è¦å¥½ã€‚</span>
      <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">5000</span> 
      <span class="hljs-comment"># 4. æœ€å¤§ç”Ÿå‘½å‘¨æœŸï¼šå»ºè®®æ¯”æ•°æ®åº“çš„ wait_timeout çŸ­ 1-2 åˆ†é’Ÿ</span>
      <span class="hljs-comment"># é¿å…æ•°æ®åº“ä¸»åŠ¨æ–­å¼€è¿æ¥ï¼Œå¯¼è‡´åº”ç”¨ç«¯æŠ¥é”™</span>
      <span class="hljs-attr">max-lifetime:</span> <span class="hljs-number">1800000</span> <span class="hljs-comment"># 30åˆ†é’Ÿ</span>
</code></pre>
<hr/>
<h4 data-id="heading-5"><strong>äº”ã€ ç›‘æ§ï¼šæ²¡æœ‰ç›‘æ§å°±æ˜¯â€œè£¸å¥”â€</strong></h4>
<p>ä¸è¦ç­‰åˆ°ç”¨æˆ·æŠ•è¯‰æ‰å‘ç°é—®é¢˜ã€‚</p>
<ul>
<li>
<p><strong>å¼€å¯ Prometheus ç›‘æ§</strong>ï¼šHikariCP åŸç”Ÿæ”¯æŒ Micrometerã€‚</p>
</li>
<li>
<p><strong>å…³é”®æŒ‡æ ‡</strong>ï¼š</p>
<ul>
<li>hikaricp_connections_pendingï¼š<strong>æ’é˜Ÿçº¿ç¨‹æ•°</strong>ã€‚ä¸€æ—¦è¿™ä¸ªæŒ‡æ ‡ &gt; 0ï¼Œè¯´æ˜è¿æ¥æ± ä¸å¤Ÿç”¨äº†ï¼ˆæˆ–æœ‰æ…¢äº‹åŠ¡ï¼‰ï¼Œå¿…é¡»æŠ¥è­¦ï¼</li>
<li>hikaricp_connections_activeï¼šæ´»è·ƒè¿æ¥æ•°ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h4 data-id="heading-6"><strong>æ€»ç»“</strong></h4>
<p><strong>HikariCP è¢«æ‰“çˆ†ï¼Œæœ¬è´¨ä¸Šæ˜¯â€œå€Ÿè¿˜é€Ÿåº¦â€å¤±è¡¡ã€‚</strong><br/>
ä¸è¦ä¸€å‡ºé—®é¢˜å°±è°ƒå‚æ•°ã€‚è¯·æŒ‰ç…§ä»¥ä¸‹é¡ºåºæ’æŸ¥ï¼š</p>
<ol>
<li>æ£€æŸ¥æ˜¯å¦æœ‰Â <strong>HTTP è¯·æ±‚/RPC è°ƒç”¨</strong>Â è¢«åŒ…è£¹åœ¨Â @TransactionalÂ ä¸­ï¼Ÿ</li>
<li>æ£€æŸ¥æ˜¯å¦æœ‰Â <strong>æ…¢ SQL</strong>Â é˜»å¡äº†è¿æ¥ï¼Ÿ</li>
<li>æ£€æŸ¥Â <strong>connection-timeout</strong>Â æ˜¯å¦è®¾ç½®å¾—å¤ªé•¿ï¼Œå¯¼è‡´çº¿ç¨‹å †ç§¯ï¼Ÿ</li>
</ol>
<p><strong>è®°ä½ï¼šä»£ç çš„è´¨é‡ï¼Œå†³å®šäº†æ¶æ„çš„ä¸Šé™ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Gemini Chat Completion API ç”³è¯·åŠä½¿ç”¨]]></title>    <link>https://juejin.cn/post/7602543146237313067</link>    <guid>https://juejin.cn/post/7602543146237313067</guid>    <pubDate>2026-02-04T08:57:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602543146237313067" data-draft-id="7602553969970642998" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Gemini Chat Completion API ç”³è¯·åŠä½¿ç”¨"/> <meta itemprop="keywords" content="Gemini,API,AIGC"/> <meta itemprop="datePublished" content="2026-02-04T08:57:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å´”åº†æ‰ä¸¨é™è§…"/> <meta itemprop="url" content="https://juejin.cn/user/1521379821230269"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Gemini Chat Completion API ç”³è¯·åŠä½¿ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379821230269/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å´”åº†æ‰ä¸¨é™è§…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T08:57:18.000Z" title="Wed Feb 04 2026 08:57:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Google Gemini æ˜¯ä¸€æ¬¾éå¸¸å¼ºå¤§çš„ AI å¯¹è¯ç³»ç»Ÿï¼Œåªè¦è¾“å…¥æç¤ºè¯ï¼Œå°±èƒ½åœ¨çŸ­çŸ­å‡ ç§’å†…ç”Ÿæˆæµç•…è‡ªç„¶çš„å›å¤ã€‚Gemini éƒ½èƒ½æä¾›ä»¤äººæƒŠå¹çš„æ™ºèƒ½ååŠ©ï¼Œæå¤§åœ°æé«˜äº†äººç±»çš„å·¥ä½œæ•ˆç‡å’Œåˆ›é€ åŠ›ã€‚</p>
<p>æœ¬æ–‡æ¡£ä¸»è¦ä»‹ç» Gemini Chat Completion API æ“ä½œçš„ä½¿ç”¨æµç¨‹ï¼Œåˆ©ç”¨å®ƒæˆ‘ä»¬å¯ä»¥è½»æ¾ä½¿ç”¨å®˜æ–¹ Gemini çš„å¯¹è¯åŠŸèƒ½ã€‚</p>
<h2 data-id="heading-0">ç”³è¯·æµç¨‹</h2>
<p>è¦ä½¿ç”¨ Gemini Chat Completion APIï¼Œé¦–å…ˆå¯ä»¥åˆ° <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fdocuments%2Fae54bf9b-af41-4072-b969-3756b6d66834" target="_blank" title="https://platform.acedata.cloud/documents/ae54bf9b-af41-4072-b969-3756b6d66834" ref="nofollow noopener noreferrer">Gemini Chat Completion API</a> é¡µé¢ç‚¹å‡»ã€ŒAcquireã€æŒ‰é’®ï¼Œè·å–è¯·æ±‚æ‰€éœ€è¦çš„å‡­è¯ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef09a9ad5a644f52b86e5dc4d958f9d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSU5bqG5omN5Lio6Z2Z6KeF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770800238&amp;x-signature=6Vl7nkNsQbxXdwy%2F9NjpWsRi2MQ%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœä½ å°šæœªç™»å½•æˆ–æ³¨å†Œï¼Œä¼šè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢é‚€è¯·æ‚¨æ¥æ³¨å†Œå’Œç™»å½•ï¼Œç™»å½•æ³¨å†Œä¹‹åä¼šè‡ªåŠ¨è¿”å›å½“å‰é¡µé¢ã€‚</p>
<p>åœ¨é¦–æ¬¡ç”³è¯·æ—¶ä¼šæœ‰å…è´¹é¢åº¦èµ é€ï¼Œå¯ä»¥å…è´¹ä½¿ç”¨è¯¥ APIã€‚</p>
<h2 data-id="heading-1">åŸºæœ¬ä½¿ç”¨</h2>
<p>æ¥ä¸‹æ¥å°±å¯ä»¥åœ¨ç•Œé¢ä¸Šå¡«å†™å¯¹åº”çš„å†…å®¹ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d90e5c7c2e6f4f1b884523cdcc4c798c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSU5bqG5omN5Lio6Z2Z6KeF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770800238&amp;x-signature=6nPIfQl02M2fc0pY8fUxoiDu804%3D" width="400" class="m-auto" loading="lazy"/></p>
<p>åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨è¯¥æ¥å£æ—¶ï¼Œæˆ‘ä»¬è‡³å°‘éœ€è¦å¡«å†™ä¸‰ä¸ªå†…å®¹ï¼Œä¸€ä¸ªæ˜¯ <code>authorization</code>ï¼Œç›´æ¥åœ¨ä¸‹æ‹‰åˆ—è¡¨é‡Œé¢é€‰æ‹©å³å¯ã€‚å¦ä¸€ä¸ªå‚æ•°æ˜¯ <code>model</code>ï¼Œ <code>model</code> å°±æ˜¯æˆ‘ä»¬é€‰æ‹©ä½¿ç”¨ Gemini å®˜ç½‘æ¨¡å‹ç±»åˆ«ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸»è¦æœ‰ 6 ç§æ¨¡å‹ï¼Œè¯¦æƒ…å¯ä»¥çœ‹æˆ‘ä»¬æä¾›çš„æ¨¡å‹ã€‚æœ€åä¸€ä¸ªå‚æ•°æ˜¯<code>messages</code>ï¼Œ<code>messages</code>æ˜¯æˆ‘ä»¬è¾“å…¥çš„æé—®è¯æ•°ç»„ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¡¨ç¤ºå¯ä»¥åŒæ—¶ä¸Šä¼ å¤šä¸ªæé—®è¯ï¼Œæ¯ä¸ªæé—®è¯åŒ…å«äº† <code>role</code> å’Œ <code>content</code>ï¼Œå…¶ä¸­ <code>role</code> è¡¨ç¤ºæé—®è€…çš„è§’è‰²ï¼Œæˆ‘ä»¬æä¾›äº†ä¸‰ç§èº«ä»½ï¼Œåˆ†åˆ«ä¸º <code>user</code> ã€<code>assistant</code>ã€<code>system</code> ã€‚å¦ä¸€ä¸ª <code>content</code> å°±æ˜¯æˆ‘ä»¬æé—®çš„å…·ä½“å†…å®¹ã€‚</p>
<p>åŒæ—¶æ‚¨å¯ä»¥æ³¨æ„åˆ°å³ä¾§æœ‰å¯¹åº”çš„è°ƒç”¨ä»£ç ç”Ÿæˆï¼Œæ‚¨å¯ä»¥å¤åˆ¶ä»£ç ç›´æ¥è¿è¡Œï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç‚¹å‡»ã€ŒTryã€æŒ‰é’®è¿›è¡Œæµ‹è¯•ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ae52984e762494e8db10ed0956cd7b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSU5bqG5omN5Lio6Z2Z6KeF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770800238&amp;x-signature=5S44RSBGhyWguIkg0EiNiyFPIlw%3D" width="400" class="m-auto" loading="lazy"/></p>
<p>è°ƒç”¨ä¹‹åï¼Œæˆ‘ä»¬å‘ç°è¿”å›ç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"chatcmpl-20251122212413908150493uPhjTUO9"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"gemini-2.5-pro"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"object"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"chat.completion"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"created"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1763817866</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"choices"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"assistant"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"I am a large language model, trained by Google."</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"reasoning_content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"**My Reasoning: Answering the User's Question**\n\nOkay, here's how I'm going to approach answering the user's question, \"What model are you?\". The core is to be direct and informative. First, I have to be clear about my origin. Then, I need to make sure the explanation is accessible, given that the user may not be familiar with technical jargon. I need to explain what a \"large language model\" actually *does*, and provide relatable examples. I know the user might be looking for a specific name, like other models have, so I'll address that directly and then wrap it up with an invitation to continue.\n\nSo, here's my plan:\n\n1.  **Lead with the key info:** I'll begin by stating that I am a large language model created by Google. That is the fundamental, most critical piece of the puzzle.\n2.  **Define the buzzword:** Then, I'll explain that \"large language model\" in simple terms. I'll explain what I *do* - process and generate text; how I *do* it - by training on huge amounts of text data; and the *goal* - to be able to communicate like a human.\n3.  **Provide context:** After that, to make the concept even clearer, I'll provide a list of examples of my capabilities. I'll mention things like answering questions, summarizing texts, writing stories, translating languages, and brainstorming ideas.\n4.  **Acknowledge the lack of a personal name:** I'll anticipate the likely question about a model name (like ChatGPT) by clearly stating that I don't have a personal name and that it's best to think of me as an AI assistant from Google.\n5.  **End with an invitation:** Lastly, I'll end with a simple, friendly question to invite further interaction and to guide the conversation.\n\nWith this approach, I am confident I can successfully answer this important question.\n"</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"finish_reason"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"stop"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"usage"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"prompt_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"completion_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">932</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"total_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">940</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"prompt_tokens_details"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"cached_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"text_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"audio_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"image_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"completion_tokens_details"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"text_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"audio_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"reasoning_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">921</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"input_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"output_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"input_tokens_details"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"claude_cache_creation_5_m_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"claude_cache_creation_1_h_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿”å›ç»“æœä¸€å…±æœ‰å¤šä¸ªå­—æ®µï¼Œä»‹ç»å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>id</code>ï¼Œç”Ÿæˆæ­¤æ¬¡å¯¹è¯ä»»åŠ¡çš„ IDï¼Œç”¨äºå”¯ä¸€æ ‡è¯†æ­¤æ¬¡å¯¹è¯ä»»åŠ¡ã€‚</li>
<li><code>model </code>ï¼Œé€‰æ‹©çš„ Gemini å®˜ç½‘æ¨¡å‹ã€‚</li>
<li><code>choices</code>ï¼ŒGemini é’ˆå¯¹æé—®è¯ç»™äºçš„å›ç­”ä¿¡æ¯ã€‚</li>
<li><code>usage </code>ï¼šé’ˆå¯¹æœ¬æ¬¡é—®ç­”å¯¹ token çš„ç»Ÿè®¡ä¿¡æ¯ã€‚</li>
</ul>
<p>å…¶ä¸­ <code>choices</code> æ˜¯åŒ…å«äº† Gemini çš„å›ç­”ä¿¡æ¯ï¼Œå®ƒé‡Œé¢çš„ <code>choices</code> æ˜¯ Geminiå›ç­”çš„å…·ä½“ä¿¡æ¯ï¼Œå¯ä»¥å‘ç°å¦‚å›¾æ‰€ç¤ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b51be09d50a4f979ba934ad7b50985a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSU5bqG5omN5Lio6Z2Z6KeF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770800238&amp;x-signature=8Sk0jLhdFt45DlxNkUcOSfQZDYg%3D" width="400" class="m-auto" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>choices</code> é‡Œé¢çš„ <code>content</code> å­—æ®µåŒ…å«äº† Gemini å›å¤çš„å…·ä½“å†…å®¹ã€‚</p>
<h2 data-id="heading-2">æµå¼å“åº”</h2>
<p>è¯¥æ¥å£ä¹Ÿæ”¯æŒæµå¼å“åº”ï¼Œè¿™å¯¹ç½‘é¡µå¯¹æ¥ååˆ†æœ‰ç”¨ï¼Œå¯ä»¥è®©ç½‘é¡µå®ç°é€å­—æ˜¾ç¤ºæ•ˆæœã€‚</p>
<p>å¦‚æœæƒ³æµå¼è¿”å›å“åº”ï¼Œå¯ä»¥æ›´æ”¹è¯·æ±‚å¤´é‡Œé¢çš„ <code>stream </code> å‚æ•°ï¼Œä¿®æ”¹ä¸º <code>true</code>ã€‚</p>
<p>ä¿®æ”¹å¦‚å›¾æ‰€ç¤ºï¼Œä¸è¿‡è°ƒç”¨ä»£ç éœ€è¦æœ‰å¯¹åº”çš„æ›´æ”¹æ‰èƒ½æ”¯æŒæµå¼å“åº”ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c29ebfbed8c4c9f8d1bbb0eca606066~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSU5bqG5omN5Lio6Z2Z6KeF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770800238&amp;x-signature=sQYiabm9odsqQQOZvhYvf0QKfHc%3D" width="400" class="m-auto" loading="lazy"/></p>
<p>å°† <code>stream</code> ä¿®æ”¹ä¸º <code>true</code> ä¹‹åï¼ŒAPI å°†é€è¡Œè¿”å›å¯¹åº”çš„ JSON æ•°æ®ï¼Œåœ¨ä»£ç å±‚é¢æˆ‘ä»¬éœ€è¦åšç›¸åº”çš„ä¿®æ”¹æ¥è·å¾—é€è¡Œçš„ç»“æœã€‚</p>
<p>Python æ ·ä¾‹è°ƒç”¨ä»£ç ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> requests

url = <span class="hljs-string">"https://api.acedata.cloud/gemini/chat/completions"</span>

headers = {
    <span class="hljs-string">"accept"</span>: <span class="hljs-string">"application/json"</span>,
    <span class="hljs-string">"authorization"</span>: <span class="hljs-string">"Bearer {token}"</span>,
    <span class="hljs-string">"content-type"</span>: <span class="hljs-string">"application/json"</span>
}

payload = {
    <span class="hljs-string">"model"</span>: <span class="hljs-string">"gemini-2.5-pro"</span>,
    <span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>:<span class="hljs-string">"user"</span>,<span class="hljs-string">"content"</span>:<span class="hljs-string">"Hello,What model are you?"</span>}],
    <span class="hljs-string">"stream"</span>: <span class="hljs-literal">True</span>
}

response = requests.post(url, json=payload, headers=headers)
<span class="hljs-built_in">print</span>(response.text)
</code></pre>
<p>è¾“å‡ºæ•ˆæœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-json" lang="json">data<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"chatcmpl-20251122214038810722821kNjUTjtr"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"object"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"chat.completion.chunk"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"created"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1763818842</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"gemini-2.5-pro"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"system_fingerprint"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"choices"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"delta"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"assistant"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"logprobs"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"finish_reason"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"usage"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">}</span>

data<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"chatcmpl-20251122214038810722821kNjUTjtr"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"object"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"chat.completion.chunk"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"created"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1763818842</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"gemini-2.5-pro"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"system_fingerprint"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"choices"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"delta"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"reasoning_content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"**Define My Nature**\n\nMy thinking has started. The user wants to know my nature, asking a direct \"what are you?\" The initial step was straightforward: identifying the query. Now, I recall my fundamental identity: I'm a large language model. This is the core truth I aim to convey.\n\n\n"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"logprobs"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"finish_reason"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"usage"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">}</span>

data<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"chatcmpl-20251122214038810722821kNjUTjtr"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"object"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"chat.completion.chunk"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"created"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1763818842</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"gemini-2.5-pro"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"system_fingerprint"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"choices"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"delta"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"reasoning_content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"**Refining My Response**\n\nI've added the crucial information that I'm trained by Google to the basic \"large language model\" identity. My next step is considering what being a \"large language model\" actually entails, so I can explain my core capabilities. I'm focusing on providing context without going into specific technical details or model names. I want to convey my function in a way the user can easily understand.\n\n\n"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"logprobs"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"finish_reason"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"usage"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">}</span>

data<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"chatcmpl-20251122214038810722821kNjUTjtr"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"object"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"chat.completion.chunk"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"created"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1763818842</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"gemini-2.5-pro"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"system_fingerprint"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"choices"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"delta"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"reasoning_content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"**Confirming Core Identity**\n\nI'm now solidifying my response. The user's query about my model affiliation needs a focused answer. I've pinpointed that \"trained by Google\" is essential, providing key context. I'm resisting the urge to mention any specific model names, as it's not relevant. The aim is to deliver a direct, accurate statement. My goal remains a clear and concise reply, avoiding technical jargon and getting straight to the relevant point.\n\n\n"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"logprobs"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"finish_reason"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"usage"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">}</span>

data<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"chatcmpl-20251122214038810722821kNjUTjtr"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"object"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"chat.completion.chunk"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"created"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1763818842</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"gemini-2.5-pro"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"system_fingerprint"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"choices"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"delta"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"I am a large language model, trained by Google."</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"logprobs"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"finish_reason"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"usage"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">}</span>

data<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"chatcmpl-20251122214038810722821kNjUTjtr"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"object"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"chat.completion.chunk"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"created"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1763818842</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"gemini-2.5-pro"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"system_fingerprint"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"choices"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"delta"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"logprobs"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"finish_reason"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"stop"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"usage"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">}</span>

data<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"chatcmpl-20251122214038810722821kNjUTjtr"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"object"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"chat.completion.chunk"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"created"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1763818842</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"gemini-2.5-pro"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"system_fingerprint"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"choices"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"usage"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"prompt_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"completion_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">527</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"total_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">535</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"prompt_tokens_details"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"cached_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"text_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"audio_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"image_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"completion_tokens_details"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"text_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"audio_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"reasoning_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">519</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"input_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"output_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"input_tokens_details"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"claude_cache_creation_5_m_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"claude_cache_creation_1_h_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>

data<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>DONE<span class="hljs-punctuation">]</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå“åº”é‡Œé¢æœ‰è®¸å¤š <code>data</code> ï¼Œ<code>data</code> é‡Œé¢çš„ <code>choices</code> å³ä¸ºæœ€æ–°çš„å›ç­”å†…å®¹ï¼Œä¸ä¸Šæ–‡ä»‹ç»çš„å†…å®¹ä¸€è‡´ã€‚<code>choices</code> æ˜¯æ–°å¢çš„å›ç­”å†…å®¹ï¼Œæ‚¨å¯ä»¥æ ¹æ®ç»“æœæ¥å¯¹æ¥åˆ°æ‚¨çš„ç³»ç»Ÿä¸­ã€‚åŒæ—¶æµå¼å“åº”çš„ç»“æŸæ˜¯æ ¹æ® <code>data</code> çš„å†…å®¹æ¥åˆ¤æ–­çš„ï¼Œå¦‚æœå†…å®¹ä¸º <code>[DONE]</code>ï¼Œåˆ™è¡¨ç¤ºæµå¼å“åº”å›ç­”å·²ç»å…¨éƒ¨ç»“æŸã€‚è¿”å›çš„ <code>data</code> ç»“æœä¸€å…±æœ‰å¤šä¸ªå­—æ®µï¼Œä»‹ç»å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>id</code>ï¼Œç”Ÿæˆæ­¤æ¬¡å¯¹è¯ä»»åŠ¡çš„ IDï¼Œç”¨äºå”¯ä¸€æ ‡è¯†æ­¤æ¬¡å¯¹è¯ä»»åŠ¡ã€‚</li>
<li><code>model </code>ï¼Œé€‰æ‹©çš„ Gemini å®˜ç½‘æ¨¡å‹ã€‚</li>
<li><code>choices</code>ï¼ŒGemini é’ˆå¯¹æé—®è¯ç»™äºçš„å›ç­”ä¿¡æ¯ã€‚</li>
</ul>
<p>JavaScript ä¹Ÿæ˜¯æ”¯æŒçš„ï¼Œæ¯”å¦‚ Node.js çš„æµå¼è°ƒç”¨ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> options = {
  <span class="hljs-attr">method</span>: <span class="hljs-string">"post"</span>,
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">"accept"</span>: <span class="hljs-string">"application/json"</span>,
    <span class="hljs-string">"authorization"</span>: <span class="hljs-string">"Bearer {token}"</span>,
    <span class="hljs-string">"content-type"</span>: <span class="hljs-string">"application/json"</span>
  },
  <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
    <span class="hljs-string">"model"</span>: <span class="hljs-string">"gemini-2.5-pro"</span>,
    <span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>:<span class="hljs-string">"user"</span>,<span class="hljs-string">"content"</span>:<span class="hljs-string">"Hello,What model are you?"</span>}],
    <span class="hljs-string">"stream"</span>: <span class="hljs-literal">true</span>
  })
};

<span class="hljs-title function_">fetch</span>(<span class="hljs-string">"https://api.acedata.cloud/gemini/chat/completions"</span>, options)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.<span class="hljs-title function_">json</span>())
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(response))
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err));
</code></pre>
<p>Java æ ·ä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">JSONObject</span> <span class="hljs-variable">jsonObject</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONObject</span>();
jsonObject.put(<span class="hljs-string">"model"</span>, <span class="hljs-string">"gemini-2.5-pro"</span>);
jsonObject.put(<span class="hljs-string">"messages"</span>, [{<span class="hljs-string">"role"</span>:<span class="hljs-string">"user"</span>,<span class="hljs-string">"content"</span>:<span class="hljs-string">"Hello,What model are you?"</span>}]);
jsonObject.put(<span class="hljs-string">"stream"</span>, <span class="hljs-literal">true</span>);
<span class="hljs-type">MediaType</span> <span class="hljs-variable">mediaType</span> <span class="hljs-operator">=</span> <span class="hljs-string">"application/json; charset=utf-8"</span>.toMediaType();
<span class="hljs-type">RequestBody</span> <span class="hljs-variable">body</span> <span class="hljs-operator">=</span> jsonObject.toString().toRequestBody(mediaType);
<span class="hljs-type">Request</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Request</span>.Builder()
  .url(<span class="hljs-string">"https://api.acedata.cloud/gemini/chat/completions"</span>)
  .post(body)
  .addHeader(<span class="hljs-string">"accept"</span>, <span class="hljs-string">"application/json"</span>)
  .addHeader(<span class="hljs-string">"authorization"</span>, <span class="hljs-string">"Bearer {token}"</span>)
  .addHeader(<span class="hljs-string">"content-type"</span>, <span class="hljs-string">"application/json"</span>)
  .build();

<span class="hljs-type">OkHttpClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OkHttpClient</span>();
<span class="hljs-type">Response</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> client.newCall(request).execute();
System.out.print(response.body!!.string())
</code></pre>
<p>å…¶ä»–è¯­è¨€å¯ä»¥å¦å¤–è‡ªè¡Œæ”¹å†™ï¼ŒåŸç†éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p>
<h2 data-id="heading-3">å¤šè½®å¯¹è¯</h2>
<p>å¦‚æœæ‚¨æƒ³è¦å¯¹æ¥å¤šè½®å¯¹è¯åŠŸèƒ½ï¼Œéœ€è¦å¯¹ <code>messages</code> å­—æ®µä¸Šä¼ å¤šä¸ªæé—®è¯ï¼Œå¤šä¸ªæé—®è¯çš„å…·ä½“ç¤ºä¾‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/789175ff77194598a6c193371ff17fcc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSU5bqG5omN5Lio6Z2Z6KeF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770800238&amp;x-signature=jWg7vA0cYX42f0FgSrVJOu3I0xc%3D" width="400" class="m-auto" loading="lazy"/></p>
<p>Python æ ·ä¾‹è°ƒç”¨ä»£ç ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> requests

url = <span class="hljs-string">"https://api.acedata.cloud/gemini/chat/completions"</span>

headers = {
    <span class="hljs-string">"accept"</span>: <span class="hljs-string">"application/json"</span>,
    <span class="hljs-string">"authorization"</span>: <span class="hljs-string">"Bearer {token}"</span>,
    <span class="hljs-string">"content-type"</span>: <span class="hljs-string">"application/json"</span>
}

payload = {
    <span class="hljs-string">"model"</span>: <span class="hljs-string">"gemini-2.5-pro"</span>,
    <span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>:<span class="hljs-string">"user"</span>,<span class="hljs-string">"content"</span>:<span class="hljs-string">"Hello"</span>},{<span class="hljs-string">"role"</span>:<span class="hljs-string">"assistant"</span>,<span class="hljs-string">"content"</span>:<span class="hljs-string">"Hello there! How can I help you today?"</span>},{<span class="hljs-string">"role"</span>:<span class="hljs-string">"user"</span>,<span class="hljs-string">"content"</span>:<span class="hljs-string">"What model are you?"</span>}]
}

response = requests.post(url, json=payload, headers=headers)
<span class="hljs-built_in">print</span>(response.text)
</code></pre>
<p>é€šè¿‡ä¸Šä¼ å¤šä¸ªæé—®è¯ï¼Œå°±å¯ä»¥è½»æ¾å®ç°å¤šè½®å¯¹è¯ï¼Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹å›ç­”ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"chatcmpl-20251122214426669120974AKFwnJd1"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"gemini-2.5-pro"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"object"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"chat.completion"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"created"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1763819072</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"choices"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"assistant"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"I am a large language model, trained by Google."</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"reasoning_content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Okay, here's how I'd approach this, thinking as a sophisticated AI:\n\nFirst, the user is directly querying my core identity: \"What model are you?\" That's a simple, straightforward question. My primary task is to provide accurate and helpful information, so I need to answer this immediately.\n\nRight off the bat, I know the answer. I *am* a large language model. That's my fundamental architecture and operational principle. I'm built on a vast network of connections and trained on a massive dataset.\n\nThen I must add the necessary context. Crucially, I have to provide the source of my training. I *was* trained by Google. That's a key identifier. It provides the user with valuable information about my origin and potential biases (though I'm trained to mitigate them).\n\nNow I must construct the response. My goal is to be factual, concise, and understandable.\n\nThe synthesized response is something like: \"I am a large language model, trained by Google.\"\n\nI have to assess the output: Does it meet the criteria? It's clear. It states what I am, it includes a critical piece of information on my origins, and it avoids jargon. No misleading promises.\n\nFinal verification: Does it actually answer the question? Yes. Is the information correct and truthful? Yes. Is it concise? Absolutely. Is the tone appropriate for any user? Yes. And, finally, this is the standard, approved response. Excellent.\n"</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"finish_reason"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"stop"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"usage"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"prompt_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">16</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"completion_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">265</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"total_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">281</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"prompt_tokens_details"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"cached_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"text_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">16</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"audio_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"image_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"completion_tokens_details"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"text_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"audio_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"reasoning_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">254</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"input_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"output_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"input_tokens_details"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"claude_cache_creation_5_m_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"claude_cache_creation_1_h_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>choices</code> åŒ…å«çš„ä¿¡æ¯ä¸åŸºæœ¬ä½¿ç”¨çš„å†…å®¹æ˜¯ä¸€è‡´çš„ï¼Œè¿™ä¸ªåŒ…å«äº† Gemini é’ˆå¯¹å¤šä¸ªå¯¹è¯è¿›è¡Œå›å¤çš„å…·ä½“å†…å®¹ï¼Œè¿™æ ·å°±å¯ä»¥æ ¹æ®å¤šä¸ªå¯¹è¯å†…å®¹æ¥å›ç­”å¯¹åº”çš„é—®é¢˜äº†ã€‚</p>
<h2 data-id="heading-4">Gemini-3.0 å¤šæ¨¡æ€æ¨¡å‹</h2>
<p>è¯·æ±‚æ ·ä¾‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"gemini-3.0-pro"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"messages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å›¾ç‰‡çš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Ÿ"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image_url"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"image_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://cdn.acedata.cloud/qzx2z1.png"</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"stream"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ ·ä¾‹ç»“æœï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"chatcmpl-20251206001815715692730UVZe38kB"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"gemini-3.0-pro"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"object"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"chat.completion"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"created"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1764951548</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"choices"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"assistant"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¿™æ˜¯ä¸€å¼ å¹´è½»å¥³æ€§çš„æˆ·å¤–åŠèº«äººåƒç…§ç‰‡ã€‚\n\nä»¥ä¸‹æ˜¯å›¾ç‰‡çš„ä¸»è¦å†…å®¹æè¿°ï¼š\n\n*   **äººç‰©å¤–è²Œ**ï¼šç…§ç‰‡ä¸­çš„å¥³å­©ç•™ç€ä¸€å¤´ä¹Œé»‘æŸ”é¡ºçš„é•¿ç›´å‘ï¼Œäº”å®˜æ¸…ç§€ï¼Œçš®è‚¤ç™½çš™ã€‚å¥¹é¢å¸¦æ¸©æŸ”çš„å¾®ç¬‘ï¼Œç›®å…‰æ³¨è§†ç€é•œå¤´ã€‚\n*   **ç©¿ç€æ‰“æ‰®**ï¼šå¥¹ç©¿ç€ä¸€ä»¶ç±³ç™½è‰²æˆ–æµ…æè‰²çš„æ³¡æ³¡è¢–ä¸Šè¡£ï¼Œå¤–é¢æ­é…ç€é»‘è‰²çš„è¡£ç‰©ï¼ˆçœ‹èµ·æ¥åƒæ˜¯èƒŒå¸¦è£™æˆ–é©¬ç”²ï¼‰ã€‚\n*   **å…‰å½±æ°›å›´**ï¼šé˜³å…‰ä»å·¦ä¾§åæ–¹ç…§å°„è¿‡æ¥ï¼Œæ´’åœ¨å¥¹çš„å¤´å‘ä¸Šï¼Œå½¢æˆäº†ä¸€åœˆæ¸©æš–çš„é‡‘é»„è‰²å…‰æ™•ï¼Œè¥é€ å‡ºä¸€ç§æ¸…æ–°ã€å”¯ç¾çš„æ°›å›´ã€‚\n*   **èƒŒæ™¯**ï¼šèƒŒæ™¯è¢«è™šåŒ–å¤„ç†ï¼Œå¯ä»¥çœ‹å‡ºæ˜¯åœ¨æˆ·å¤–ï¼Œèº«åæ˜¯ä¸€æ¡ç©ºæ—·çš„è·¯é¢ï¼ˆæŸæ²¹è·¯ï¼‰ä»¥åŠè·¯è¾¹çš„ç»¿è‰²æ ‘æœ¨ã€‚\n\næ•´ä½“æ¥çœ‹ï¼Œè¿™å¼ ç…§ç‰‡ç»™äººä¸€ç§ç”œç¾ã€é˜³å…‰å’Œé‚»å®¶å¥³å­©çš„æ„Ÿè§‰ã€‚"</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"finish_reason"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"stop"</span>
        <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"usage"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"prompt_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1092</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"completion_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1271</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"total_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2363</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"prompt_tokens_details"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"cached_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"text_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"audio_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"image_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"completion_tokens_details"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"text_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"audio_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"reasoning_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1072</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"input_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"output_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"input_tokens_details"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"claude_cache_creation_5_m_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"claude_cache_creation_1_h_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä¼ å¦‚è§†é¢‘çš„é“¾æ¥ï¼Œå…·ä½“çš„è¾“å…¥å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"gemini-3.0-pro"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"messages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è§†é¢‘çš„å†…å®¹æ˜¯ä»€ä¹ˆï¼Ÿ"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image_url"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"image_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://cdn.acedata.cloud/58yioe.mp4"</span>
          <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"stream"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ ·ä¾‹ç»“æœï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"chatcmpl-20251206002711949677736JC9yL8AE"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"gemini-3.0-pro"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"object"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"chat.completion"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"created"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1764952060</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"choices"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"index"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"assistant"</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è¿™æ®µè§†é¢‘çš„å†…å®¹å……æ»¡è¶£å‘³ï¼Œä¸»è¦å±•ç¤ºäº†ä¸€åª**æ©˜çŒ«**åœ¨é»„æ˜æ—¶åˆ†çš„ä¹¡é—´å…¬è·¯ä¸Šè‡ªä¿¡å°è·‘çš„æƒ…æ™¯ã€‚\n\nå…·ä½“ç»†èŠ‚å¦‚ä¸‹ï¼š\n\n1.  **ç”»é¢å†…å®¹**ï¼š\n    *   ä¸»è§’æ˜¯ä¸€åªæ©˜è‰²çš„è™æ–‘çŒ«ã€‚\n    *   èƒŒæ™¯æ˜¯å¤•é˜³è¥¿ä¸‹ï¼ˆæˆ–æ¸…æ™¨ï¼‰çš„æ—¶åˆ»ï¼Œå…‰çº¿é‡‘é»„æŸ”å’Œã€‚è·¯è¾¹æœ‰æœ¨è´¨æ …æ å’Œæ—·é‡ï¼Œè¿œå¤„è¿˜æœ‰ä¸€ä¸ªè¡Œäººçš„å‰ªå½±ã€‚\n    *   é•œå¤´é‡‡ç”¨äº†ä½è§’åº¦æ‹æ‘„ï¼Œæ—¶è€Œæ‹æ‘„çŒ«å’ªè¿é¢è·‘æ¥ï¼Œæ—¶è€Œæ‹æ‘„å®ƒç¦»å»çš„èƒŒå½±ï¼Œè¿˜æœ‰çŒ«å’ªé¢éƒ¨å’ŒèŠ±çº¹çš„ç‰¹å†™ã€‚\n\n2.  **å£°éŸ³ç‰¹ç‚¹ï¼ˆå…³é”®ç‚¹ï¼‰**ï¼š\n    *   è§†é¢‘çš„é…éŸ³éå¸¸æœ‰ç‰¹è‰²ã€‚è™½ç„¶ç”»é¢æ˜¯è½»ç›ˆçš„çŒ«å’ªåœ¨è·‘ï¼Œä½†é…ä¸Šçš„å£°éŸ³å´æ˜¯**æ²‰é‡ä¸”æœ‰èŠ‚å¥çš„é©¬è¹„å£°**ï¼ˆæˆ–è€…æ˜¯ç±»ä¼¼æœ¨å±/é«˜è·Ÿé‹æ•²å‡»è·¯é¢çš„å£°éŸ³ï¼‰ã€‚\n    *   è¿™ç§å£°éŸ³ä¸ç”»é¢çš„åå·®åˆ¶é€ äº†ä¸€ç§å¹½é»˜æ„Ÿï¼Œä»¿ä½›è¿™åªçŒ«å’ªæŠŠè‡ªå·±å½“æˆäº†ä¸€åŒ¹æ­£åœ¨é©°éª‹çš„éªé©¬ã€‚\n\næ€»çš„æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªåˆ©ç”¨éŸ³ç”»åå·®æ¥åˆ¶é€ èŒç‚¹å’Œç¬‘ç‚¹çš„å® ç‰©è§†é¢‘ã€‚"</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"finish_reason"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"stop"</span>
        <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"usage"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"prompt_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">915</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"completion_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1423</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"total_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2338</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"prompt_tokens_details"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"cached_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"text_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">5</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"audio_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"image_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"completion_tokens_details"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"text_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"audio_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"reasoning_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1162</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"input_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"output_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"input_tokens_details"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"claude_cache_creation_5_m_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"claude_cache_creation_1_h_tokens"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºæ˜¯Gemini 3.0æ¨¡å‹å¯ä»¥æ”¯æŒå¤šæ¨¡æ€çš„ç†è§£çš„ã€‚</p>
<h2 data-id="heading-5">é”™è¯¯å¤„ç†</h2>
<p>åœ¨è°ƒç”¨ API æ—¶ï¼Œå¦‚æœé‡åˆ°é”™è¯¯ï¼ŒAPI ä¼šè¿”å›ç›¸åº”çš„é”™è¯¯ä»£ç å’Œä¿¡æ¯ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li><code>400 token_mismatched</code>ï¼šBad request, possibly due to missing or invalid parameters.</li>
<li><code>400 api_not_implemented</code>ï¼šBad request, possibly due to missing or invalid parameters.</li>
<li><code>401 invalid_token</code>ï¼šUnauthorized, invalid or missing authorization token.</li>
<li><code>429 too_many_requests</code>ï¼šToo many requests, you have exceeded the rate limit.</li>
<li><code>500 api_error</code>ï¼šInternal server error, something went wrong on the server.</li>
</ul>
<h3 data-id="heading-6">é”™è¯¯å“åº”ç¤ºä¾‹</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"error"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"api_error"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"fetch failed"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"trace_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2cf86e86-22a4-46e1-ac2f-032c0f2a4e89"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-7">ç»“è®º</h2>
<p>é€šè¿‡æœ¬æ–‡æ¡£ï¼Œæ‚¨å·²ç»äº†è§£äº†å¦‚ä½•ä½¿ç”¨ Gemini Chat Completion API è½»æ¾å®ç°å®˜æ–¹ Gemini çš„å¯¹è¯åŠŸèƒ½ã€‚å¸Œæœ›æœ¬æ–‡æ¡£èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°å¯¹æ¥å’Œä½¿ç”¨è¯¥ APIã€‚å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·éšæ—¶è”ç³»æˆ‘ä»¬çš„æŠ€æœ¯æ”¯æŒå›¢é˜Ÿã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Codex App å‘å¸ƒï¼šè‡ªåŠ¨åŒ– + Skillsï¼Œè®©å·¥ä½œäº¤ç»™æ™ºèƒ½ä½“]]></title>    <link>https://juejin.cn/post/7602553969970675766</link>    <guid>https://juejin.cn/post/7602553969970675766</guid>    <pubDate>2026-02-04T08:56:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602553969970675766" data-draft-id="7602553969970659382" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Codex App å‘å¸ƒï¼šè‡ªåŠ¨åŒ– + Skillsï¼Œè®©å·¥ä½œäº¤ç»™æ™ºèƒ½ä½“"/> <meta itemprop="keywords" content="åç«¯,ç¨‹åºå‘˜,äº§å“"/> <meta itemprop="datePublished" content="2026-02-04T08:56:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‘†çƒ‚å·¥ç¨‹å¸ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1552933235470589"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Codex App å‘å¸ƒï¼šè‡ªåŠ¨åŒ– + Skillsï¼Œè®©å·¥ä½œäº¤ç»™æ™ºèƒ½ä½“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1552933235470589/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‘†çƒ‚å·¥ç¨‹å¸ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T08:56:28.000Z" title="Wed Feb 04 2026 08:56:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘ OpenAI çš„ Codex æ›´æ–°äº†ï¼Œå¹¶ä¸”å‘å¸ƒäº† Codex åº”ç”¨ç‰ˆï¼ˆç›®å‰ä»…æ”¯æŒ mac ç”µè„‘ï¼Œ windows/linux ç‰ˆæœ¬éƒ½æ²¡æœ‰æ¨å‡ºï¼‰ã€‚</p>
<p>è¿™æ¬¡å‘å¸ƒçš„ <strong>Codex åº”ç”¨ä¸æ˜¯ IDEï¼Œä¸æ˜¯ CLIï¼Œè€Œæ˜¯ä¸€ä¸ªä»£ç†å¼ç¼–ç¨‹çš„æŒ‡æŒ¥ä¸­å¿ƒ</strong>ã€‚</p>
<p>åŒæ—¶ä¹Ÿå¼€å¯äº†ä¿ƒé”€æ´»åŠ¨ï¼Œåªè¦å®‰è£… Codex åº”ç”¨ç‰ˆå°±å¯ä»¥äº«å—ï¼š</p>
<ul>
<li>ChatGPT å…è´¹ç”¨æˆ· å’Œ Go ç”¨æˆ· å¯ä»¥è·å¾— 1ä¸ªæœˆçš„ Codex ä½¿ç”¨æƒ</li>
<li>æ‰€æœ‰ä»˜è´¹è®¡åˆ’ï¼ˆProã€ Plusã€ Businessï¼‰ç”¨æˆ·éƒ½è·å¾— Codex 2å€çš„é¢åº¦ï¼ŒæŒç»­2ä¸ªæœˆã€‚</li>
</ul>
<p>æˆ‘ç«‹é©¬ä» vscode çš„ codex è½¬ç§»åˆ° codex åº”ç”¨ï¼Œé¢åº¦ä¸ä»…å……è¶³ï¼Œ<strong>è€Œä¸” GPT-5.2-Codex å’Œ GPT-5.2 é€Ÿåº¦ä¹Ÿæå‡äº†40%ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f21a830129b46308c7755781bc9c32d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pGG54OC5bel56iL5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770800188&amp;x-signature=6eKNPD8YupxO4NK89DGOLUjzH1w%3D" alt="" loading="lazy"/></p>
<p>å½“ç„¶è¿™æ¬¡é¢åº¦å’Œé€Ÿåº¦çš„æå‡ä¸å±€é™äº Codex åº”ç”¨ï¼Œåœ¨ Codex CLI åŒæ ·å¯ä»¥äº«å—ã€‚</p>
<h2 data-id="heading-0">é¢åº¦å’Œé€Ÿåº¦æå‡ã€Juice ä¸‹é™</h2>
<p>ä½†æ˜¯é€Ÿåº¦çš„æå‡æœ‰ç‚¹ä¸å¯¹åŠ²ï¼Œå› ä¸º Codex å…è´¹ç”¨æˆ·çš„å¢é•¿ï¼Œä¸ºäº†å¹³è¡¡è®¡ç®—èµ„æºï¼Œ<strong>æ¨ç†çš„ Juice å€¼ ä¹Ÿä¸‹é™äº†ä¸€åŠ</strong>ï¼Œä»è€Œæå‡äº† 40% çš„é€Ÿåº¦ ï¼Ÿ</p>
<p>ä¹Ÿå°±æ˜¯ Codex å¯èƒ½ä¼šæ—¶ä¸æ—¶å‡ºç°æ‡’æƒ°çš„è¡Œä¸ºï¼Œä¸ä¼šè¯»å–æ›´å¤šçš„æ–‡ä»¶å†…å®¹ï¼Œè€Œæ˜¯å¿«é€Ÿçš„è¾“å‡ºå†™å®Œä»£ç äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a13105dbb484f8fa64e11514fdc7374~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pGG54OC5bel56iL5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770800188&amp;x-signature=Y1WXjZKAXDibKSZd0JVOPx4RMMU%3D" alt="" loading="lazy"/></p>
<p>å…è´¹ç‰ˆ å’Œ Go ç‰ˆæœ¬çš„ Juice å€¼ä¸€ç›´å¾ˆä½çš„ï¼Œ<strong>å¦‚æœä½ éœ€è¦ä½“éªŒå¥½ä¸€äº›çš„ Codex ç¼–ç¨‹ï¼Œå»ºè®®é€‰æ‹©æ¨¡å‹ GPT-5.2-Codexï¼Œæ¨ç†é€‰æ‹© è¶…é«˜ï¼ˆExtra Highï¼‰</strong>ï¼Œä»˜è´¹ç”¨æˆ·çš„é¢åº¦å·²ç»ç¿»å€äº†ï¼Œé€‰æ‹©è¶…é«˜æ¨¡å¼å¯ä»¥ä½¿ç”¨ä¸€æ®µæ—¶é—´ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38d5f031e7594e5ca55cfd67dbba4175~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pGG54OC5bel56iL5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770800188&amp;x-signature=TKRcVsFlLy6cQSYd4bh9YJdYQPY%3D" alt="" loading="lazy"/></p>
<p>å¯¹äº†ï¼Œå¦‚æœä½ ä¸çŸ¥é“å›½å†…å¦‚ä½•å‡çº§è‡ªå·±çš„ ChatGPT çš„è¯ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ªä¸€é”®å‡çº§ç³»ç»Ÿ:</p>
<blockquote>
<p>GPT å‡çº§ç³»ç»Ÿï¼š<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fupchatgpt.com" target="_blank" title="https://upchatgpt.com" ref="nofollow noopener noreferrer">upchatgpt.com</a></strong></p>
</blockquote>
<p>ç°åœ¨å¤–é¢çš„ GPT å‡çº§é±¼é¾™æ··æ‚ï¼Œå¤ªå¤šå˜¿å……å’Œ0å…ƒè´­äº†ï¼Œå¾ˆå®¹æ˜“å°±å¯¼è‡´ä½ çš„è´¦å·è¢«å°äº†ã€‚</p>
<p>æ‰¾ä¸€ä¸ªæ­£è§„æ¸ é“ï¼Œç¨³å®šå……å€¼çš„å¹¶ä¸ç®€å•äº†ï¼Œè®¤å‡†å½“å‰è¿™ä¸ªç³»ç»Ÿï¼Œå·²ç»ç¨³å®šè¿è¡Œäº†å¥½é•¿æ—¶é—´ã€‚</p>
<h2 data-id="heading-1">Codex åº”ç”¨çš„æ–°åŠŸèƒ½ï¼š</h2>
<ul>
<li>å†…ç½®å·¥ä½œæ ‘ï¼ˆworktreeï¼‰ï¼šä½¿å¤šä¸ªä»£ç†èƒ½å¤Ÿæ— å†²çªåœ°å·¥ä½œ</li>
<li>è®¡åˆ’æ¨¡å¼ï¼šè¾“å…¥ /plan ä¸ Codex è¿›è¡Œæ¥å›äº¤æµ</li>
<li>é£æ ¼ï¼šå¯ä»¥é€‰æ‹©é€‚åˆä½ é£æ ¼çš„äº’åŠ¨æ–¹å¼</li>
<li>Skillsï¼šè¿æ¥ä½ å·²ä½¿ç”¨çš„skillï¼Œå¹¶è¶…è¶Šç¼–å†™ä»£ç </li>
<li>è‡ªåŠ¨åŒ–ï¼šåœ¨åå°å§”æ´¾é‡å¤çš„å‘¨æœŸæ€§ä»»åŠ¡</li>
</ul>
<p>åœ¨ Codex çš„åº”ç”¨é‡Œï¼Œä½ å¯ä»¥åˆ›å»º<strong>è‡ªåŠ¨åŒ–ä»»åŠ¡</strong>ã€‚å…ˆæŠŠè§„åˆ™å’Œç›®æ ‡è®¾ç½®å¥½ï¼Œä¹‹åå¾ˆå¤šäº‹æƒ… Codex å¯ä»¥<strong>ä¸ç”¨ä½ æ¯æ¬¡éƒ½å¼€å£æé†’</strong>ï¼Œè‡ªå·±æŒ‰æ—¶/æŒ‰æ¡ä»¶å»æ‰§è¡Œã€‚</p>
<p>å®ƒç‰¹åˆ«é€‚åˆåšä¸€äº›â€œæ¯å¤©éƒ½è¦åšã€åˆå¾ˆè€—ç²¾åŠ›â€çš„å·¥ç¨‹æ‚æ´»ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>é—®é¢˜åˆ†æµï¼šæ–°æ¥çš„ issue / å·¥å•å…ˆå¸®ä½ åˆ†ç±»ã€æ‰“æ ‡ç­¾ã€åˆ†é…è´Ÿè´£äºº</li>
<li>å‘Šè­¦ç›‘æ§ï¼šçº¿ä¸Šä¸€æŠ¥é”™æˆ–æŒ‡æ ‡å¼‚å¸¸ï¼Œè‡ªåŠ¨é€šçŸ¥åˆ°å¯¹åº”ç¾¤/è´Ÿè´£äººï¼Œå¹¶é™„ä¸Šæ’æŸ¥çº¿ç´¢</li>
<li>CI/CDï¼šä»£ç ä¸€åˆå¹¶å°±è‡ªåŠ¨è·‘æµ‹è¯•ã€æ„å»ºã€å‘å¸ƒï¼Œå¤±è´¥äº†è¿˜èƒ½æŠŠåŸå› æ€»ç»“å‡ºæ¥</li>
</ul>
<p><strong>æŠŠé‡å¤æ€§çš„æ—¥å¸¸ç»´æŠ¤äº¤ç»™ Codexï¼Œä½ æŠŠæ³¨æ„åŠ›ç•™ç»™çœŸæ­£çš„å¼€å‘å’Œè®¾è®¡å†³ç­–ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03eecd6b15d44aa2a17042cb14b2bf71~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pGG54OC5bel56iL5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770800188&amp;x-signature=8SMGlE5HshPAxfdBa8UmKtI8oN0%3D" alt="" loading="lazy"/></p>
<p>ä½ è¿˜å¯ä»¥ç»™ Codex åˆ›å»ºå„ç§ Skillï¼ˆæŠ€èƒ½ï¼‰ã€‚ <strong>è®© Codex ä¸åªâ€œå†™ä»£ç â€ï¼Œè€Œæ˜¯â€œå‚ä¸æŠŠäº§å“åšå‡ºæ¥â€ã€‚</strong></p>
<p>æŠŠå›¢é˜Ÿå¸¸ç”¨çš„å·¥ä½œæ–¹å¼ã€æ ‡å‡†æµç¨‹ã€è¾“å‡ºæ ¼å¼ï¼Œåšæˆä¸€å¥—â€œå¯å¤ç”¨èƒ½åŠ›â€ï¼Œè®©å®ƒæ¯æ¬¡éƒ½æŒ‰ä½ ä»¬çš„ä¹ æƒ¯æ¥åšäº‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f18737d568564560a51010ac4633a5b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pGG54OC5bel56iL5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770800188&amp;x-signature=N0TSnEpg%2BMh5IexHBfAEzaDqQaM%3D" alt="" loading="lazy"/></p>
<p>å¹³æ—¶ç¼–ç¨‹æ—¶ï¼Œç»å¸¸ç¢°åˆ° Codex è¯¢é—®ä½ çš„æƒé™æ—¶ï¼Œä½ è§‰å¾—éº»çƒ¦çš„è¯ï¼Œå¯ä»¥å¼€å¯ <code>full access</code> ç»™ä»–å…¨éƒ¨è®¿é—®çš„æƒé™ï¼Œåç»­å°±ä¼šä¸€ç›´è¿è¡Œç¼–ç ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95ac1b0e7f354934b0d43423f21cbc7c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pGG54OC5bel56iL5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770800188&amp;x-signature=UgJYGrFDdmxG50%2BiFS6gzu5MpNY%3D" alt="" loading="lazy"/></p>
<p>Codex åŸºäºä¸€ä¸ªç®€å•çš„å‰æï¼šæ‰€æœ‰äº‹ç‰©éƒ½ç”±ä»£ç æ§åˆ¶ã€‚æ™ºèƒ½ä½“åœ¨æ¨ç†å’Œç”Ÿæˆä»£ç æ–¹é¢è¶Šå‡ºè‰²ï¼Œå®ƒåœ¨æ‰€æœ‰å½¢å¼çš„æŠ€æœ¯å’ŒçŸ¥è¯†å‹å·¥ä½œä¸­å°±è¶Šæœ‰èƒ½åŠ›ã€‚</p>
<p>Codex æƒ³æŠŠâ€œå¾ˆèªæ˜ä½†ä¸å¥½ç”¨çš„æ¨¡å‹â€ï¼Œå˜æˆâ€œä½ èƒ½è½»æ¾æŒ‡æŒ¥ã€å¯ç›‘ç£ã€èƒ½ç¨³å®šäº§å‡ºå¹¶æŠŠä»£ç ä¸€è·¯æ¨åˆ°äº¤ä»˜â€çš„å·¥ä½œå‹æ™ºèƒ½ä½“ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº‘åŸç”Ÿç½‘ç»œåŸºçŸ³ï¼šOSIä¸TCP/IPæ¨¡å‹åœ¨KubernetesåŠService Meshä¸­çš„å®è·µ]]></title>    <link>https://juejin.cn/post/7602776926326882358</link>    <guid>https://juejin.cn/post/7602776926326882358</guid>    <pubDate>2026-02-04T08:58:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602776926326882358" data-draft-id="7602543146237329451" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº‘åŸç”Ÿç½‘ç»œåŸºçŸ³ï¼šOSIä¸TCP/IPæ¨¡å‹åœ¨KubernetesåŠService Meshä¸­çš„å®è·µ"/> <meta itemprop="keywords" content="äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2026-02-04T08:58:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº‘åŸç”Ÿç½‘ç»œåŸºçŸ³ï¼šOSIä¸TCP/IPæ¨¡å‹åœ¨KubernetesåŠService Meshä¸­çš„å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T08:58:46.000Z" title="Wed Feb 04 2026 08:58:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ç½‘ç»œæ¨¡å‹åŸºç¡€ï¼šä»ç†è®ºåˆ°å®è·µ</h2>
<h3 data-id="heading-1">1.1 OSIä¸ƒå±‚æ¨¡å‹ï¼šç†è®ºæ¶æ„çš„å·…å³°</h3>
<p>OSIï¼ˆå¼€æ”¾ç³»ç»Ÿäº’è¿ï¼‰ä¸ƒå±‚æ¨¡å‹æ˜¯ç½‘ç»œé€šä¿¡çš„ç»å…¸ç†è®ºæ¡†æ¶ï¼Œå…¶åˆ†å±‚è®¾è®¡å°†å¤æ‚çš„ç½‘ç»œåŠŸèƒ½æ¨¡å—åŒ–ï¼Œä¸ºç°ä»£ç½‘ç»œåè®®æ ˆå¥ å®šäº†åŸºç¡€ã€‚å„å±‚æ ¸å¿ƒåŠŸèƒ½å¦‚ä¸‹ï¼š</p>





















































<table><thead><tr><th>å±‚çº§</th><th>åç§°</th><th>æ ¸å¿ƒåŠŸèƒ½</th><th>å…¸å‹åè®®/è®¾å¤‡</th></tr></thead><tbody><tr><td>7</td><td>åº”ç”¨å±‚</td><td>æä¾›ç”¨æˆ·æ¥å£ï¼ˆHTTP/SFTPç­‰ï¼‰</td><td>HTTPã€SMTPã€æµè§ˆå™¨</td></tr><tr><td>6</td><td>è¡¨ç¤ºå±‚</td><td>æ•°æ®æ ¼å¼è½¬æ¢ä¸åŠ å¯†ï¼ˆSSL/TLSï¼‰</td><td>JSON/XMLè½¬æ¢ã€RSAåŠ å¯†</td></tr><tr><td>5</td><td>ä¼šè¯å±‚</td><td>å»ºç«‹/ç®¡ç†/ç»ˆæ­¢ä¼šè¯ï¼ˆRPCï¼‰</td><td>NetBIOSã€gRPC</td></tr><tr><td>4</td><td>ä¼ è¾“å±‚</td><td>ç«¯åˆ°ç«¯å¯é ä¼ è¾“ï¼ˆTCP/UDPï¼‰</td><td>TCPä¸‰æ¬¡æ¡æ‰‹ã€QUICåè®®</td></tr><tr><td>3</td><td>ç½‘ç»œå±‚</td><td>è·¨å­ç½‘è·¯ç”±ï¼ˆIP/ICMPï¼‰</td><td>IPåœ°å€ã€è·¯ç”±å™¨</td></tr><tr><td>2</td><td>æ•°æ®é“¾è·¯å±‚</td><td>ç‰©ç†å¯»å€ä¸å·®é”™æ§åˆ¶ï¼ˆMACï¼‰</td><td>Ethernetã€Wi-Fi</td></tr><tr><td>1</td><td>ç‰©ç†å±‚</td><td>æ¯”ç‰¹æµä¼ è¾“ï¼ˆRJ45/å…‰çº¤ï¼‰</td><td>ç½‘å¡ã€äº¤æ¢æœº</td></tr></tbody></table>
<p><strong>æŠ€æœ¯ç‰¹æ€§</strong>ï¼šé€šè¿‡ä¸¥æ ¼çš„å±‚é—´æ¥å£å®šä¹‰ï¼ˆå¦‚TCP/IPä¸OSIçš„å¯¹åº”å…³ç³»ï¼‰ï¼Œå®ç°åè®®æ ˆçš„æ¨¡å—åŒ–å¼€å‘ã€‚ä¾‹å¦‚ï¼ŒHTTPåè®®ï¼ˆåº”ç”¨å±‚ï¼‰æ— éœ€å…³å¿ƒåº•å±‚æ˜¯Ethernetè¿˜æ˜¯Wi-Fiï¼ˆç‰©ç†å±‚ï¼‰ã€‚</p>
<h3 data-id="heading-2">1.2 TCP/IPå››å±‚æ¨¡å‹ï¼šäº’è”ç½‘çš„å®è·µå…¸èŒƒ</h3>
<p>TCP/IPæ¨¡å‹ä½œä¸ºäº’è”ç½‘äº‹å®æ ‡å‡†ï¼Œå°†OSIçš„ä¸ƒå±‚ç®€åŒ–ä¸ºå››å±‚ï¼Œæ›´è´´åˆå®é™…éƒ¨ç½²éœ€æ±‚ï¼š</p>



































<table><thead><tr><th>å±‚çº§</th><th>åç§°</th><th>æ ¸å¿ƒåŠŸèƒ½</th><th>å…¸å‹åè®®</th></tr></thead><tbody><tr><td>4</td><td>åº”ç”¨å±‚</td><td>ç”¨æˆ·æœåŠ¡æ¥å£</td><td>HTTP/FTP/SSH</td></tr><tr><td>3</td><td>ä¼ è¾“å±‚</td><td>ç«¯åˆ°ç«¯é€šä¿¡</td><td>TCP/UDP</td></tr><tr><td>2</td><td>ç½‘ç»œå±‚</td><td>è·¨ç½‘ç»œè·¯ç”±</td><td>IP/ICMP</td></tr><tr><td>1</td><td>ç½‘ç»œæ¥å£å±‚</td><td>ç‰©ç†ä¼ è¾“</td><td>Ethernet/ARP</td></tr></tbody></table>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li><strong>ç®€åŒ–è®¾è®¡</strong>ï¼šåˆå¹¶ä¼šè¯å±‚/è¡¨ç¤ºå±‚åˆ°åº”ç”¨å±‚ï¼Œé™ä½å¼€å‘å¤æ‚åº¦</li>
<li><strong>é«˜æ•ˆè·¯ç”±</strong>ï¼šIPåè®®å®ç°æ— è¿æ¥çš„æ•°æ®åŒ…ä¼ è¾“ï¼Œé€‚åº”åŠ¨æ€ç½‘ç»œç¯å¢ƒ</li>
<li><strong>ç”Ÿæ€å…¼å®¹</strong>ï¼šæ”¯æ’‘Kubernetesç­‰äº‘åŸç”Ÿå¹³å°çš„ç½‘ç»œæ¶æ„</li>
</ul>
<hr/>
<h2 data-id="heading-3">äºŒã€äº‘åŸç”Ÿæ¶æ„ä¸­çš„ç½‘ç»œæ¨¡å‹å®è·µ</h2>
<h3 data-id="heading-4">2.1 Kubernetesç½‘ç»œæ¨¡å‹è§£æ</h3>
<p>Kubernetesçš„ç½‘ç»œè®¾è®¡æ·±åº¦èåˆTCP/IPæ¨¡å‹ï¼ŒåŒæ—¶å€Ÿé‰´OSIçš„åˆ†å±‚æ€æƒ³ï¼š</p>
<h4 data-id="heading-5">2.1.1 ç½‘ç»œæ¥å£å±‚ï¼ˆCNIæ’ä»¶ï¼‰</h4>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šå®ç°Podé—´ç‰©ç†é€šä¿¡ï¼Œæ”¯æŒFlannelã€Calicoç­‰æ’ä»¶</li>
<li><strong>æŠ€æœ¯å®ç°</strong>ï¼šé€šè¿‡VXLANéš§é“ï¼ˆL2 over L3ï¼‰æˆ–IPIPå°è£…å®ç°è·¨èŠ‚ç‚¹é€šä¿¡</li>
<li><strong>æ¡ˆä¾‹</strong>ï¼šCalicoä½¿ç”¨BGPåè®®å®ç°åŸºäºIPçš„è·¯ç”±ï¼Œç¬¦åˆTCP/IPç½‘ç»œå±‚å®šä¹‰</li>
</ul>
<h4 data-id="heading-6">2.1.2 ç½‘ç»œå±‚ï¼ˆService/Ingressï¼‰</h4>
<ul>
<li>
<p><strong>Serviceæœºåˆ¶</strong>ï¼š</p>
<ul>
<li>ClusterIPï¼šé€šè¿‡iptableså®ç°L4è´Ÿè½½å‡è¡¡</li>
<li>NodePortï¼šåœ¨èŠ‚ç‚¹ç«¯å£æš´éœ²æœåŠ¡ï¼ˆTCP/UDPï¼‰</li>
</ul>
</li>
<li>
<p><strong>Ingressæ§åˆ¶å™¨</strong>ï¼š</p>
<ul>
<li>åŸºäºHTTP/HTTPSçš„ä¸ƒå±‚è·¯ç”±ï¼ˆå¦‚Nginx Ingressï¼‰</li>
<li>æ”¯æŒè·¯å¾„é‡å†™ã€TLSç»ˆæ­¢ç­‰L7åŠŸèƒ½</li>
</ul>
</li>
</ul>
<h4 data-id="heading-7">2.1.3 ä¼ è¾“å±‚ï¼ˆkube-proxyï¼‰</h4>
<ul>
<li>
<p><strong>å®ç°æ¨¡å¼</strong>ï¼š</p>
<ul>
<li>iptablesæ¨¡å¼ï¼šåŸºäºL4è§„åˆ™è½¬å‘æµé‡</li>
<li>IPVSæ¨¡å¼ï¼šä½¿ç”¨Linuxå†…æ ¸çš„L4è´Ÿè½½å‡è¡¡ç®—æ³•</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½å¯¹æ¯”</strong>ï¼šIPVSåœ¨è§„åˆ™æ•°é‡è¶…è¿‡10Kæ—¶æ€§èƒ½ä¼˜äºiptables</p>
</li>
</ul>
<h3 data-id="heading-8">2.2 Service Meshçš„ç½‘ç»œåˆ†å±‚å®è·µ</h3>
<p>ä»¥Istioä¸ºä¾‹ï¼Œå…¶ç½‘ç»œæ¶æ„ä½“ç°OSI/TCP/IPæ¨¡å‹çš„æ·±åº¦èåˆï¼š</p>
<h4 data-id="heading-9">2.2.1 L4å±‚åŸºç¡€é€šä¿¡</h4>
<ul>
<li>
<p><strong>Envoy Sidecar</strong>ï¼š</p>
<ul>
<li>ç›‘å¬Podçš„80/443ç«¯å£ï¼Œå¤„ç†TCPè¿æ¥</li>
<li>å®ç°åŸºç¡€è´Ÿè½½å‡è¡¡ï¼ˆè½®è¯¢/æœ€å°‘è¿æ¥ï¼‰</li>
</ul>
</li>
<li>
<p><strong>Pilotç»„ä»¶</strong>ï¼š</p>
<ul>
<li>é€šè¿‡xDSåè®®ä¸‹å‘L4è·¯ç”±è§„åˆ™åˆ°Sidecar</li>
</ul>
</li>
</ul>
<h4 data-id="heading-10">2.2.2 L7å±‚æ™ºèƒ½æ§åˆ¶</h4>
<ul>
<li>
<p><strong>HTTPè·¯ç”±</strong>ï¼š</p>
<ul>
<li>åŸºäºè·¯å¾„/Headerçš„æµé‡æ‹†åˆ†ï¼ˆå¦‚v1/v2ç‰ˆæœ¬ç°åº¦ï¼‰</li>
<li>æ”¯æŒgRPCçš„æµå¼ä¼ è¾“æ§åˆ¶</li>
</ul>
</li>
<li>
<p><strong>å®‰å…¨å±‚</strong>ï¼š</p>
<ul>
<li>mTLSåŒå‘è®¤è¯ï¼ˆL7åŠ å¯†ï¼‰</li>
<li>RBACç»†ç²’åº¦è®¿é—®æ§åˆ¶</li>
</ul>
</li>
<li>
<p><strong>å¯è§‚æµ‹æ€§</strong>ï¼š</p>
<ul>
<li>åˆ†å¸ƒå¼è¿½è¸ªï¼ˆJaegeré›†æˆï¼‰</li>
<li>æŒ‡æ ‡é‡‡é›†ï¼ˆPrometheus Exporterï¼‰</li>
</ul>
</li>
</ul>
<h4 data-id="heading-11">2.2.3 ç½‘ç»œæ¨¡å‹å¯¹æ¯”</h4>






























<table><thead><tr><th>ç‰¹æ€§</th><th>ä¼ ç»ŸTCP/IP</th><th>Service Mesh</th></tr></thead><tbody><tr><td>è·¯ç”±ç²’åº¦</td><td>åŸºäºIP/ç«¯å£</td><td>åŸºäºHTTPè¯­ä¹‰</td></tr><tr><td>å®‰å…¨æ§åˆ¶</td><td>é˜²ç«å¢™/IPç™½åå•</td><td>mTLS+JWTè®¤è¯</td></tr><tr><td>å¯è§‚æµ‹æ€§</td><td>åŸºç¡€æµé‡ç»Ÿè®¡</td><td>å…¨é“¾è·¯è¿½è¸ª</td></tr><tr><td>åè®®æ”¯æŒ</td><td>é€šç”¨TCP/UDP</td><td>HTTP/gRPC/WebSocket</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-12">ä¸‰ã€è¡Œä¸šè½åœ°æ¡ˆä¾‹åˆ†æ</h2>
<h3 data-id="heading-13">3.1 é‡‘èè¡Œä¸šï¼šé«˜å¯é é€šä¿¡ä¿éšœ</h3>
<p><strong>åœºæ™¯</strong>ï¼šæŸé“¶è¡Œæ ¸å¿ƒäº¤æ˜“ç³»ç»Ÿå¾®æœåŠ¡åŒ–æ”¹é€ </p>
<p><strong>æŠ€æœ¯æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>
<p><strong>ç½‘ç»œå±‚</strong>ï¼šä½¿ç”¨Calicoå®ç°Podé—´IPSecåŠ å¯†ï¼ˆç½‘ç»œå±‚å®‰å…¨ï¼‰</p>
</li>
<li>
<p><strong>ä¼ è¾“å±‚</strong>ï¼šIstioçš„TCPé‡è¯•ç­–ç•¥ä¿éšœæ•°æ®åº“è¿æ¥å¯é æ€§</p>
</li>
<li>
<p><strong>åº”ç”¨å±‚</strong>ï¼šåŸºäºHTTP/2çš„gRPCæœåŠ¡é—´é€šä¿¡ï¼ˆL7ä¼˜åŒ–ï¼‰</p>
<p><strong>æˆæ•ˆ</strong>ï¼šæ•…éšœæ¢å¤æ—¶é—´ä»å°æ—¶çº§é™è‡³åˆ†é’Ÿçº§ï¼Œååé‡æå‡300%</p>
</li>
</ul>
<h3 data-id="heading-14">3.2 ç”µå•†å¤§ä¿ƒï¼šæµé‡ç²¾ç»†åŒ–æ²»ç†</h3>
<p><strong>åœºæ™¯</strong>ï¼šåŒ11æœŸé—´è®¢å•æœåŠ¡æµé‡æ´ªå³°åº”å¯¹</p>
<p><strong>æŠ€æœ¯æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>
<p><strong>L4å±‚</strong>ï¼šIPVSæ¨¡å¼å¤„ç†åƒä¸‡çº§TCPè¿æ¥</p>
</li>
<li>
<p><strong>L7å±‚</strong>ï¼š</p>
<ul>
<li>æŒ‰ç”¨æˆ·IDå“ˆå¸Œå®ç°ä¼šè¯ç²˜æ»</li>
<li>åŠ¨æ€è°ƒæ•´æƒé‡å®ç°é‡‘ä¸é›€å‘å¸ƒ</li>
</ul>
</li>
<li>
<p><strong>å®‰å…¨å±‚</strong>ï¼šJWTä»¤ç‰Œæ ¡éªŒ+é€Ÿç‡é™åˆ¶</p>
<p><strong>æˆæ•ˆ</strong>ï¼šæ ¸å¿ƒæ¥å£é”™è¯¯ç‡æ§åˆ¶åœ¨0.01%ä»¥ä¸‹ï¼Œèµ„æºåˆ©ç”¨ç‡æå‡60%</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-15">å››ã€æŠ€æœ¯æ¼”è¿›ä¸æœªæ¥è¶‹åŠ¿</h2>
<h3 data-id="heading-16">4.1 eBPFå¯¹ç½‘ç»œæ¨¡å‹çš„é©æ–°</h3>
<ul>
<li><strong>L4å¢å¼º</strong>ï¼šCiliumåŸºäºeBPFå®ç°L4ç­–ç•¥ï¼ˆå¦‚ç«¯å£çº§è®¿é—®æ§åˆ¶ï¼‰</li>
<li><strong>L7çªç ´</strong>ï¼šç›´æ¥åœ¨å†…æ ¸æ€å¤„ç†HTTPå¤´ä¿®æ”¹ï¼Œç»•è¿‡ç”¨æˆ·æ€ä»£ç†</li>
<li><strong>æ€§èƒ½ä¼˜åŠ¿</strong>ï¼šç½‘ç»œå»¶è¿Ÿé™ä½40%ï¼ŒCPUå¼€é”€å‡å°‘70%</li>
</ul>
<h3 data-id="heading-17">4.2 æ¨¡å‹èåˆæ–°æ–¹å‘</h3>
<ul>
<li>
<p><strong>æ··åˆæ¨¡å‹æ¶æ„</strong>ï¼š</p>
<ul>
<li>åº•å±‚ä½¿ç”¨TCP/IPä¿è¯å…¼å®¹æ€§</li>
<li>ä¸­é—´å±‚æ³¨å…¥OSIä¼šè¯ç®¡ç†èƒ½åŠ›</li>
</ul>
</li>
<li>
<p><strong>AIèµ‹èƒ½</strong>ï¼š</p>
<ul>
<li>åŸºäºL7æµé‡åˆ†æçš„æ™ºèƒ½è·¯ç”±å†³ç­–</li>
<li>å¼‚å¸¸æµé‡è‡ªåŠ¨éš”ç¦»ï¼ˆç»“åˆL2-L7å¤šç»´åº¦ç‰¹å¾ï¼‰</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-18">äº”ã€æ€»ç»“ï¼šåˆ†å±‚æ¨¡å‹çš„äº‘åŸç”Ÿä»·å€¼</h2>
<p>OSIä¸TCP/IPæ¨¡å‹ä½œä¸ºç½‘ç»œé€šä¿¡çš„åŸºçŸ³ï¼Œåœ¨äº‘åŸç”Ÿæ—¶ä»£å±•ç°å‡ºæ–°çš„ç”Ÿå‘½åŠ›ï¼š</p>
<ol>
<li><strong>è§£è€¦å¤æ‚æ€§</strong>ï¼šå°†ç½‘ç»œåŠŸèƒ½æ¨¡å—åŒ–ï¼Œä½¿Kubernetesèƒ½ä¸“æ³¨å®¹å™¨ç¼–æ’</li>
<li><strong>å¢å¼ºå¯æ‰©å±•æ€§</strong>ï¼šService Meshåœ¨L7å±‚çš„å¢å¼ºèƒ½åŠ›è¿œè¶…ä¼ ç»Ÿè´Ÿè½½å‡è¡¡</li>
<li><strong>æå‡å®‰å…¨æ€§</strong>ï¼šä»L2çš„MACè¿‡æ»¤åˆ°L7çš„mTLSï¼Œæ„å»ºçºµæ·±é˜²å¾¡ä½“ç³»</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JS-æ‰‹å†™ç³»åˆ—ï¼šPromise.all ä¸ Promise.race]]></title>    <link>https://juejin.cn/post/7602811649125449779</link>    <guid>https://juejin.cn/post/7602811649125449779</guid>    <pubDate>2026-02-04T09:00:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602811649125449779" data-draft-id="7602842876255387694" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JS-æ‰‹å†™ç³»åˆ—ï¼šPromise.all ä¸ Promise.race"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-04T09:00:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‘ç°ä¸€åªå¤§å‘†ç“œ"/> <meta itemprop="url" content="https://juejin.cn/user/180747382561607"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JS-æ‰‹å†™ç³»åˆ—ï¼šPromise.all ä¸ Promise.race
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/180747382561607/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‘ç°ä¸€åªå¤§å‘†ç“œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T09:00:54.000Z" title="Wed Feb 04 2026 09:00:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>åœ¨å¤„ç†å¹¶å‘è¯·æ±‚æ—¶ï¼Œ<code>Promise.all</code> å’Œ <code>Promise.race</code> æ˜¯æˆ‘ä»¬çš„å¾—åŠ›åŠ©æ‰‹ã€‚ç†è§£å®ƒä»¬çš„åº•å±‚å®ç°ï¼Œä¸ä»…èƒ½å¸®æˆ‘ä»¬åº”å¯¹é¢è¯•ï¼Œæ›´èƒ½è®©æˆ‘ä»¬åœ¨å¤æ‚çš„å¼‚æ­¥åœºæ™¯ä¸­æ¸¸åˆƒæœ‰ä½™ã€‚æœ¬æ–‡å°†å¸¦ä½ ä»åŸç†å‡ºå‘ï¼Œæ‰‹å†™è¿™ä¸¤ä¸ªæ ¸å¿ƒæ–¹æ³•çš„ TypeScript ç‰ˆæœ¬ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ æ‰‹å†™ Promise.all</h2>
<h3 data-id="heading-2">1. æ ¸å¿ƒä½œç”¨ä¸é€»è¾‘</h3>
<p><code>Promise.all</code> æ¥æ”¶ä¸€ä¸ª Promise æ•°ç»„ï¼Œå¹¶è¿”å›ä¸€ä¸ªå…¨æ–°çš„ Promiseã€‚</p>
<ul>
<li><strong>æˆåŠŸæ¡ä»¶</strong>ï¼šåªæœ‰å½“æ‰€æœ‰å­ Promise éƒ½å˜ä¸º <code>fulfilled</code> æ—¶ï¼Œå®ƒæ‰è¿”å›æ‰€æœ‰ç»“æœç»„æˆçš„æ•°ç»„ã€‚</li>
<li><strong>å¤±è´¥æ¡ä»¶</strong>ï¼šåªè¦æœ‰ä¸€ä¸ªå­ Promise å˜ä¸º <code>rejected</code>ï¼Œå®ƒå°±ç«‹å³è¿”å›è¯¥å¤±è´¥åŸå› ã€‚</li>
</ul>
<h3 data-id="heading-3">2. æ ¸å¿ƒæ€è·¯</h3>
<ol>
<li><strong>å‚æ•°å¤„ç†</strong>ï¼šéœ€è¦å°†è¾“å…¥å‚æ•°è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼Œå¹¶å¤„ç†é Promise ç±»å‹çš„æ•°ç»„æˆå‘˜ã€‚</li>
<li><strong>é¡ºåºä¿è¯</strong>ï¼š<strong>å…³é”®ï¼</strong> ç”±äºå¼‚æ­¥æ‰§è¡Œæ—¶é—´ä¸åŒï¼Œç›´æ¥ <code>push</code> ç»“æœä¼šå¯¼è‡´é¡ºåºé”™ä¹±ã€‚å¿…é¡»é€šè¿‡ç´¢å¼• <code>i</code> æ¥ç²¾ç¡®å­˜æ”¾ç»“æœã€‚</li>
<li><strong>è®¡æ•°å™¨</strong>ï¼šåˆ¤æ–­ <code>result.length</code>æ˜¯å¦ç­‰äºæ•°ç»„é•¿åº¦ï¼Œä»è€Œç¡®å®šæ‰€æœ‰ç»“æœæ˜¯å¦å·²è¿”å›ã€‚</li>
</ol>
<h3 data-id="heading-4">3.  å®ç°</h3>
<pre><code class="hljs language-JavaScript" lang="JavaScript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">PromiseAll</span>(<span class="hljs-params">arr</span>) {
    <span class="hljs-keyword">const</span> promises = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(arr);
    <span class="hljs-keyword">const</span> result = [];
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, rejected</span>) =&gt;</span> {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; promises.<span class="hljs-property">length</span>; i++) {
        promises[i]
          .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
            result[i] = res;
            <span class="hljs-keyword">if</span> (result.<span class="hljs-property">length</span> === promises.<span class="hljs-property">length</span>) {
              <span class="hljs-title function_">resolve</span>(result);
            }
          })
          .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
            <span class="hljs-title function_">rejected</span>(err);
          });
      }
    });
  }
  <span class="hljs-keyword">const</span> promise1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">resolve</span>(<span class="hljs-number">1000</span>);
    }, <span class="hljs-number">1000</span>);
  });
  <span class="hljs-keyword">const</span> promise2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">resolve</span>(<span class="hljs-number">200</span>);
    }, <span class="hljs-number">200</span>);
  });
  <span class="hljs-keyword">const</span> promise3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">reject</span>(<span class="hljs-number">300</span>);
    }, <span class="hljs-number">300</span>);
  });

  <span class="hljs-title class_">PromiseAll</span>([promise1, promise2, promise3])
    .<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">values</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…¨éƒ¨æˆåŠŸ'</span>, values);
    })
    .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">values</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœ‰ä¸€ä¸ªå¤±è´¥'</span>, values);
    });

</code></pre>
<hr/>
<h2 data-id="heading-5">äºŒã€ æ‰‹å†™ Promise.race</h2>
<h3 data-id="heading-6">1. æ ¸å¿ƒä½œç”¨ä¸é€»è¾‘</h3>
<p><code>Promise.race</code> æ¥æ”¶ä¸€ä¸ª Promise æ•°ç»„ï¼Œå…¶çŠ¶æ€å–å†³äºç¬¬ä¸€ä¸ªæ”¹å˜çŠ¶æ€ï¼ˆæ— è®ºæˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼‰çš„å®ä¾‹ã€‚</p>
<h3 data-id="heading-7">2. æ ¸å¿ƒæ€è·¯</h3>
<ol>
<li><strong>æŠ¢è·‘æœºåˆ¶</strong>ï¼šéå†æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ª Promiseï¼Œè°å…ˆè§¦å‘å›è°ƒï¼Œå°±ç”¨è°çš„ç»“æœæ¥å†³è®®è¿”å›çš„ Promiseã€‚</li>
<li><strong>çŠ¶æ€é”å®š</strong>ï¼šä¸€æ—¦çŠ¶æ€æ”¹å˜ï¼Œåç»­çš„ resolve æˆ– reject éƒ½ä¼šè¢«å¿½ç•¥ï¼ˆPromise åŸç”Ÿæœºåˆ¶ä¿è¯äº†è¿™ä¸€ç‚¹ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-8">3. å®ç°</h3>
<pre><code class="hljs language-JavaScript" lang="JavaScript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">PromiseRace</span>(<span class="hljs-params">arr</span>) {
    <span class="hljs-keyword">const</span> promises = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(arr);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; promises.<span class="hljs-property">length</span>; i++) {
          <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(promises[i]).<span class="hljs-title function_">then</span>(
            <span class="hljs-comment">// ç¬¬ä¸€ä¸ªæˆåŠŸçš„ç»“æœï¼Œç›´æ¥resolveæ–°Promise</span>
            <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> <span class="hljs-title function_">resolve</span>(value),
            <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå¤±è´¥çš„åŸå› ï¼Œç›´æ¥rejectæ–°Promise</span>
            <span class="hljs-function">(<span class="hljs-params">reason</span>) =&gt;</span> <span class="hljs-title function_">reject</span>(reason)
          );
        }
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-comment">// å‚æ•°æ ¡éªŒ/éå†å‡ºé”™æ—¶ï¼Œç›´æ¥rejectæ–°Promise</span>
        <span class="hljs-title function_">reject</span>(error);
      }
    });
  }
  <span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">reject</span>(<span class="hljs-number">100</span>);
    }, <span class="hljs-number">100</span>);
  });
  <span class="hljs-keyword">const</span> p2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">resolve</span>(<span class="hljs-number">500</span>);
    }, <span class="hljs-number">5000</span>);
  });
  <span class="hljs-keyword">const</span> p3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">resolve</span>(<span class="hljs-number">1000</span>);
    }, <span class="hljs-number">1000</span>);
  });
  <span class="hljs-title class_">PromiseRace</span>([p1, p2, p3])
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç¬¬ä¸€ä¸ªæˆåŠŸçŠ¶æ€ï¼š<span class="hljs-subst">${res}</span>`</span>, <span class="hljs-string">'success'</span>))
    .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç¬¬ä¸€ä¸ªå¤±è´¥çŠ¶æ€ï¼š<span class="hljs-subst">${err}</span>`</span>, <span class="hljs-string">'error'</span>));
</code></pre>
<hr/>
<h2 data-id="heading-9">ä¸‰ã€ æ€»ç»“ä¸å¯¹æ¯”</h2>




















<table><thead><tr><th><strong>æ–¹æ³•</strong></th><th><strong>æ ¸å¿ƒå…³æ³¨ç‚¹</strong></th><th><strong>æ ¸å¿ƒéš¾ç‚¹</strong></th></tr></thead><tbody><tr><td><strong>Promise.all</strong></td><td>å…¨å‘˜å®Œæˆä¸”<strong>é¡ºåºä¸€è‡´</strong></td><td>éœ€ä½¿ç”¨ç´¢å¼•èµ‹å€¼è€Œé <code>push</code></td></tr><tr><td><strong>Promise.race</strong></td><td><strong>è°å¿«å¬è°çš„</strong> (Winner-takes-all)</td><td>å¤„ç†ç©ºæ•°ç»„åŠé Promise å¯¹è±¡</td></tr></tbody></table>
<h3 data-id="heading-10"/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨Kubernetesä¸­ï¼Œå¦‚ä½•æ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯é€‰æ‹©L4æˆ–L7ä»£ç†ï¼Ÿæœ‰å“ªäº›å…·ä½“çš„æ€§èƒ½å¯¹æ¯”æ•°æ®ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7602776926326964278</link>    <guid>https://juejin.cn/post/7602776926326964278</guid>    <pubDate>2026-02-04T09:00:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602776926326964278" data-draft-id="7602776926326931510" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨Kubernetesä¸­ï¼Œå¦‚ä½•æ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯é€‰æ‹©L4æˆ–L7ä»£ç†ï¼Ÿæœ‰å“ªäº›å…·ä½“çš„æ€§èƒ½å¯¹æ¯”æ•°æ®ï¼Ÿ"/> <meta itemprop="keywords" content="Kubernetes"/> <meta itemprop="datePublished" content="2026-02-04T09:00:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨Kubernetesä¸­ï¼Œå¦‚ä½•æ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯é€‰æ‹©L4æˆ–L7ä»£ç†ï¼Ÿæœ‰å“ªäº›å…·ä½“çš„æ€§èƒ½å¯¹æ¯”æ•°æ®ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T09:00:50.000Z" title="Wed Feb 04 2026 09:00:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨Kubernetesä¸­ï¼Œ<strong>L4ï¼ˆä¼ è¾“å±‚ï¼‰</strong> ä¸<strong>L7ï¼ˆåº”ç”¨å±‚ï¼‰</strong> ä»£ç†çš„é€‰æ‹©éœ€ç»“åˆ<strong>ä¸šåŠ¡åœºæ™¯éœ€æ±‚</strong>ï¼ˆå¦‚æ˜¯å¦éœ€è¦é«˜çº§æµé‡ç®¡ç†ã€å®‰å…¨ç­–ç•¥ï¼‰ã€<strong>æ€§èƒ½è¦æ±‚</strong>ï¼ˆå¦‚å»¶è¿Ÿã€ååé‡ï¼‰åŠ<strong>è¿ç»´æˆæœ¬</strong>ï¼ˆå¦‚èµ„æºå¼€é”€ã€é…ç½®å¤æ‚åº¦ï¼‰ã€‚ä¸¤è€…çš„æ ¸å¿ƒå·®å¼‚åœ¨äº<strong>å¤„ç†å±‚çº§</strong>ï¼ˆL4åŸºäºTCP/UDPï¼ŒL7åŸºäºHTTP/GRPCç­‰åº”ç”¨åè®®ï¼‰åŠ<strong>åŠŸèƒ½è¾¹ç•Œ</strong>ï¼ˆL4è´Ÿè´£åŸºç¡€è½¬å‘ï¼ŒL7è´Ÿè´£ç²¾ç»†ç®¡ç†ï¼‰ã€‚ä»¥ä¸‹ä»<strong>é€‰æ‹©é€»è¾‘</strong>ã€<strong>æ€§èƒ½å¯¹æ¯”</strong>ã€<strong>å®é™…æ¡ˆä¾‹</strong>ä¸‰æ–¹é¢å±•å¼€è¯´æ˜ï¼š</p>
<h3 data-id="heading-0"><strong>ä¸€ã€L4ä¸L7ä»£ç†çš„æ ¸å¿ƒå·®å¼‚</strong></h3>
<p>åœ¨Kubernetesä¸­ï¼ŒL4ä¸L7ä»£ç†çš„å®šä½åŠåŠŸèƒ½å·®å¼‚æ˜¾è‘—ï¼Œéœ€å…ˆæ˜ç¡®å…¶è¾¹ç•Œï¼š</p>
<ul>
<li><strong>L4ä»£ç†</strong>ï¼šå·¥ä½œäº<strong>ä¼ è¾“å±‚</strong>ï¼ˆTCP/UDPï¼‰ï¼Œä»…å¤„ç†<strong>è¿æ¥çº§</strong>æµé‡è½¬å‘ï¼Œä¸è§£æåº”ç”¨å±‚å†…å®¹ï¼ˆå¦‚HTTP URLã€Headerï¼‰ã€‚å…¶æ ¸å¿ƒåŠŸèƒ½æ˜¯<strong>è´Ÿè½½å‡è¡¡</strong>ï¼ˆå¦‚è½®è¯¢ã€æœ€å°‘è¿æ¥ï¼‰ã€<strong>æœåŠ¡å‘ç°</strong>ï¼ˆåŠ¨æ€æ„ŸçŸ¥Podå˜åŒ–ï¼‰åŠ<strong>åŸºç¡€å®‰å…¨</strong>ï¼ˆå¦‚IPç™½åå•ï¼‰ã€‚å…¸å‹å®ç°åŒ…æ‹¬<code>kube-proxy</code>ï¼ˆiptables/ipvsæ¨¡å¼ï¼‰ã€Istio Ambientæ¨¡å¼çš„<strong>ztunnel</strong>ï¼ˆèŠ‚ç‚¹çº§L4ä»£ç†ï¼‰ã€‚</li>
<li><strong>L7ä»£ç†</strong>ï¼šå·¥ä½œäº<strong>åº”ç”¨å±‚</strong>ï¼ˆHTTP/GRPCç­‰ï¼‰ï¼Œè§£æ<strong>è¯·æ±‚çº§</strong>å†…å®¹ï¼ˆå¦‚URLè·¯å¾„ã€Headerå‚æ•°ã€Bodyæ•°æ®ï¼‰ï¼Œèƒ½å®ç°<strong>ç²¾ç»†æµé‡ç®¡ç†</strong>ï¼ˆå¦‚ç°åº¦å‘å¸ƒã€A/Bæµ‹è¯•ï¼‰ã€<strong>å®‰å…¨å¢å¼º</strong>ï¼ˆå¦‚mTLSåŠ å¯†ã€JWTè®¤è¯ï¼‰åŠ<strong>å¯è§‚æµ‹æ€§</strong>ï¼ˆå¦‚åˆ†å¸ƒå¼è¿½è¸ªã€ metrics æ”¶é›†ï¼‰ã€‚å…¸å‹å®ç°åŒ…æ‹¬<code>Envoy</code>ï¼ˆIstio Sidecar/ Waypointï¼‰ã€<code>Nginx Ingress</code>ã€<code>Traefik</code>ã€‚</li>
</ul>
<h3 data-id="heading-1"><strong>äºŒã€å¦‚ä½•æ ¹æ®å®é™…ä¸šåŠ¡åœºæ™¯é€‰æ‹©ï¼Ÿ</strong></h3>
<p>é€‰æ‹©L4æˆ–L7ä»£ç†çš„å…³é”®åœ¨äº<strong>ä¸šåŠ¡éœ€æ±‚æ˜¯å¦ä¾èµ–åº”ç”¨å±‚ä¿¡æ¯</strong>ï¼Œä»¥ä¸‹æ˜¯å…·ä½“åœºæ™¯çš„åˆ¤æ–­é€»è¾‘ï¼š</p>
<h4 data-id="heading-2"><strong>1. é€‰æ‹©L4ä»£ç†çš„åœºæ™¯</strong>â€‹</h4>
<p>L4ä»£ç†é€‚åˆ<strong>ç®€å•ã€é«˜ååã€ä½å»¶è¿Ÿ</strong>çš„åœºæ™¯ï¼Œæ— éœ€åº”ç”¨å±‚ç²¾ç»†ç®¡ç†ï¼š</p>
<ul>
<li><strong>åœºæ™¯1ï¼šå†…éƒ¨æœåŠ¡é—´çš„åŸºç¡€é€šä¿¡</strong>ï¼ˆå¦‚æ•°æ®åº“ã€ç¼“å­˜æœåŠ¡ï¼‰ï¼šæ­¤ç±»æœåŠ¡é€šå¸¸ä½¿ç”¨TCPåè®®ï¼Œæ— éœ€è§£æåº”ç”¨å±‚å†…å®¹ï¼ŒL4ä»£ç†ï¼ˆå¦‚<code>kube-proxy</code>ipvsæ¨¡å¼ï¼‰å¯æä¾›é«˜æ•ˆçš„è´Ÿè½½å‡è¡¡ï¼Œä¸”èµ„æºå¼€é”€ä½ã€‚</li>
<li><strong>åœºæ™¯2ï¼šå¤§è§„æ¨¡é›†ç¾¤çš„åŸºç¡€æµé‡è½¬å‘</strong>ï¼ˆå¦‚ç”µå•†å¤§ä¿ƒçš„é™æ€èµ„æºæœåŠ¡ï¼‰ï¼šL4ä»£ç†ï¼ˆå¦‚<code>ipvs</code>ï¼‰çš„<strong>O(1)è§„åˆ™æŸ¥æ‰¾</strong>ï¼ˆåŸºäºå“ˆå¸Œè¡¨ï¼‰è¿œä¼˜äºiptablesçš„<strong>O(n)</strong> å¤æ‚åº¦ï¼Œèƒ½æ”¯æ’‘ä¸‡çº§Podçš„æµé‡è½¬å‘ï¼Œä¸”å»¶è¿Ÿä½ï¼ˆå¦‚<code>ipvs</code>çš„P99å»¶è¿Ÿçº¦0.16msï¼Œè¿œä½äºiptablesçš„0.88msï¼‰ã€‚</li>
<li><strong>åœºæ™¯3ï¼šå¯¹å»¶è¿Ÿæ•æ„Ÿçš„ä½äº¤äº’åœºæ™¯</strong>ï¼ˆå¦‚IoTè®¾å¤‡çš„å®æ—¶æ•°æ®ä¼ è¾“ï¼‰ï¼šL4ä»£ç†æ— éœ€è§£æåº”ç”¨å±‚ï¼Œå‡å°‘äº†CPUå¼€é”€ï¼Œé€‚åˆ<strong>é«˜å¹¶å‘ã€ä½å»¶è¿Ÿ</strong>çš„å®æ—¶åœºæ™¯ï¼ˆå¦‚å·¥ä¸šä¼ æ„Ÿå™¨çš„æ•°æ®ä¼ è¾“ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-3"><strong>2. é€‰æ‹©L7ä»£ç†çš„åœºæ™¯</strong>â€‹</h4>
<p>L7ä»£ç†é€‚åˆ<strong>å¤æ‚ã€éœ€ç²¾ç»†ç®¡ç†</strong>çš„åœºæ™¯ï¼Œä¾èµ–åº”ç”¨å±‚ä¿¡æ¯å®ç°é«˜çº§åŠŸèƒ½ï¼š</p>
<ul>
<li><strong>åœºæ™¯1ï¼šå¤–éƒ¨æµé‡çš„ç²¾ç»†åŒ–è·¯ç”±</strong>ï¼ˆå¦‚å¾®æœåŠ¡çš„APIç½‘å…³ï¼‰ï¼šéœ€æ ¹æ®<strong>åŸŸåã€è·¯å¾„ã€Header</strong>è½¬å‘æµé‡ï¼ˆå¦‚<code>/api/v1/user</code>è·¯ç”±åˆ°ç”¨æˆ·æœåŠ¡ï¼Œ<code>/api/v2/order</code>è·¯ç”±åˆ°è®¢å•æœåŠ¡ï¼‰ï¼ŒL7ä»£ç†ï¼ˆå¦‚<code>Envoy</code>ã€<code>Nginx Ingress</code>ï¼‰å¯å®ç°<strong>åŸºäºå†…å®¹çš„è·¯ç”±</strong>ï¼Œä¸”æ”¯æŒ<strong>TLSç»ˆæ­¢</strong>ï¼ˆå¦‚HTTPSè¯·æ±‚çš„è¯ä¹¦ç®¡ç†ï¼‰ã€‚</li>
<li><strong>åœºæ™¯2ï¼šéœ€è¦é«˜çº§å®‰å…¨ç­–ç•¥çš„åœºæ™¯</strong>ï¼ˆå¦‚é‡‘èäº¤æ˜“çš„èº«ä»½è®¤è¯ï¼‰ï¼šéœ€è§£æ<strong>JWTä»¤ç‰Œ</strong>ã€<strong>mTLSåŒå‘è®¤è¯</strong>æˆ–<strong>ç»†ç²’åº¦è®¿é—®æ§åˆ¶</strong>ï¼ˆå¦‚â€œåªæœ‰è®¢å•æœåŠ¡å¯è®¿é—®æ”¯ä»˜æœåŠ¡çš„/api/v1/payæ¥å£â€ï¼‰ï¼ŒL7ä»£ç†ï¼ˆå¦‚Istioçš„Waypointï¼‰å¯å®ç°<strong>åº”ç”¨å±‚çš„èº«ä»½è®¤è¯ä¸æˆæƒ</strong>ï¼Œè€ŒL4ä»£ç†æ— æ³•è§£æè¿™äº›å†…å®¹ã€‚</li>
<li><strong>åœºæ™¯3ï¼šéœ€è¦å¯è§‚æµ‹æ€§çš„åœºæ™¯</strong>ï¼ˆå¦‚å¾®æœåŠ¡çš„æ€§èƒ½æ’æŸ¥ï¼‰ï¼šéœ€æ”¶é›†<strong>è¯·æ±‚çº§ metrics</strong>ï¼ˆå¦‚å»¶è¿Ÿã€é”™è¯¯ç‡ï¼‰ã€<strong>åˆ†å¸ƒå¼è¿½è¸ª</strong>ï¼ˆå¦‚Jaegeré›†æˆï¼‰æˆ–<strong>æ—¥å¿—</strong>ï¼ˆå¦‚è®¿é—®æ—¥å¿—ï¼‰ï¼ŒL7ä»£ç†ï¼ˆå¦‚<code>Envoy</code>ï¼‰å¯è§£æåº”ç”¨å±‚æ•°æ®ï¼Œæä¾›æ›´ä¸°å¯Œçš„å¯è§‚æµ‹æ€§ï¼Œè€ŒL4ä»£ç†ä»…èƒ½æä¾›åŸºç¡€çš„è¿æ¥ metricsï¼ˆå¦‚TCPè¿æ¥æ•°ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-4"><strong>ä¸‰ã€L4ä¸L7ä»£ç†çš„æ€§èƒ½å¯¹æ¯”</strong></h3>
<p>æ€§èƒ½æ˜¯é€‰æ‹©ä»£ç†çš„å…³é”®å› ç´ ï¼Œä»¥ä¸‹æ˜¯<strong>æƒå¨æ€§èƒ½æ•°æ®</strong>ï¼ˆæ¥è‡ª2024-2026å¹´çš„ç”Ÿäº§ç¯å¢ƒæµ‹è¯•ï¼‰ï¼š</p>
<h4 data-id="heading-5"><strong>1. ååé‡å¯¹æ¯”</strong>â€‹</h4>
<ul>
<li><strong>L4ä»£ç†</strong>ï¼š<code>ipvs</code>æ¨¡å¼çš„ååé‡è¿œé«˜äºiptablesæ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œåœ¨<strong>1000 RPS</strong>çš„å‹åŠ›ä¸‹ï¼Œ<code>ipvs</code>çš„ååé‡å¯è¾¾<strong>12,500 req/s</strong>ï¼ˆåŸºäº<code>Envoy</code>çš„æµ‹è¯•ï¼‰ï¼Œè€Œiptablesä»…ä¸º<strong>8,000 req/s</strong>ï¼ˆå› è§„åˆ™çˆ†ç‚¸å¯¼è‡´æ€§èƒ½ä¸‹é™ï¼‰ã€‚</li>
<li><strong>L7ä»£ç†</strong>ï¼š<code>Envoy</code>çš„ååé‡ä¼˜äº<code>Nginx</code>å’Œ<code>HAProxy</code>ã€‚ä¾‹å¦‚ï¼Œåœ¨<strong>1000 RPS</strong>çš„HTTPSè¯·æ±‚ä¸‹ï¼Œ<code>Envoy</code>çš„ååé‡å¯è¾¾<strong>12,500 req/s</strong>ï¼ˆP99å»¶è¿Ÿ45msï¼‰ï¼Œè€Œ<code>Nginx</code>ä¸º<strong>10,200 req/s</strong>ï¼ˆP99å»¶è¿Ÿ68msï¼‰ï¼Œ<code>HAProxy</code>ä»…ä¸º<strong>9,800 req/s</strong>ï¼ˆP99å»¶è¿Ÿ72msï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-6"><strong>2. å»¶è¿Ÿå¯¹æ¯”</strong>â€‹</h4>
<ul>
<li><strong>L4ä»£ç†</strong>ï¼š<code>ipvs</code>çš„å»¶è¿Ÿè¿œä½äºiptablesã€‚ä¾‹å¦‚ï¼Œåœ¨<strong>1000 RPS</strong>ä¸‹ï¼Œ<code>ipvs</code>çš„P99å»¶è¿Ÿçº¦<strong>0.16ms</strong>ï¼ˆIstio Ambientæ¨¡å¼çš„ztunnelï¼‰ï¼Œè€Œiptablesçš„P99å»¶è¿Ÿçº¦<strong>0.88ms</strong>ï¼ˆå› è§„åˆ™éå†å¯¼è‡´å»¶è¿Ÿå¢åŠ ï¼‰ã€‚</li>
<li><strong>L7ä»£ç†</strong>ï¼š<code>Envoy</code>çš„å»¶è¿Ÿä½äº<code>Nginx</code>å’Œ<code>HAProxy</code>ã€‚ä¾‹å¦‚ï¼Œåœ¨<strong>1000 RPS</strong>çš„HTTPSè¯·æ±‚ä¸‹ï¼Œ<code>Envoy</code>çš„P99å»¶è¿Ÿçº¦<strong>45ms</strong>ï¼ˆ<code>Envoy</code>çš„C++å®ç°ä¼˜åŒ–äº†åº”ç”¨å±‚è§£æï¼‰ï¼Œè€Œ<code>Nginx</code>ä¸º<strong>68ms</strong>ï¼ˆå› Luaæ’ä»¶çš„çƒ­æ›´æ–°å¯¼è‡´å»¶è¿Ÿæ³¢åŠ¨ï¼‰ï¼Œ<code>HAProxy</code>ä¸º<strong>72ms</strong>ï¼ˆå› è§„åˆ™åŒ¹é…çš„çº¿æ€§å¤æ‚åº¦å¯¼è‡´å»¶è¿Ÿå¢åŠ ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-7"><strong>3. èµ„æºå¼€é”€å¯¹æ¯”</strong>â€‹</h4>
<ul>
<li><strong>L4ä»£ç†</strong>ï¼š<code>ipvs</code>çš„èµ„æºå¼€é”€è¿œä½äºiptablesã€‚ä¾‹å¦‚ï¼Œåœ¨<strong>1000 Pod</strong>çš„é›†ç¾¤ä¸­ï¼Œ<code>ipvs</code>çš„CPUå ç”¨çº¦<strong>0.8æ ¸/èŠ‚ç‚¹</strong>ï¼ˆåŸºäº<code>kube-proxy</code>çš„æµ‹è¯•ï¼‰ï¼Œè€Œiptablesçš„CPUå ç”¨çº¦<strong>1.5æ ¸/èŠ‚ç‚¹</strong>ï¼ˆå› è§„åˆ™å­˜å‚¨ä¸åŒ¹é…çš„å¼€é”€å¤§ï¼‰ã€‚</li>
<li><strong>L7ä»£ç†</strong>ï¼š<code>Envoy</code>çš„èµ„æºå¼€é”€é«˜äº<code>Nginx</code>ï¼Œä½†ä½äº<code>HAProxy</code>ã€‚ä¾‹å¦‚ï¼Œåœ¨<strong>1000 RPS</strong>ä¸‹ï¼Œ<code>Envoy</code>çš„CPUå ç”¨çº¦<strong>0.8æ ¸/èŠ‚ç‚¹</strong>ï¼ˆ<code>Envoy</code>çš„C++å®ç°ä¼˜åŒ–äº†å†…å­˜ä½¿ç”¨ï¼‰ï¼Œè€Œ<code>Nginx</code>ä¸º<strong>1.2æ ¸/èŠ‚ç‚¹</strong>ï¼ˆå› Luaæ’ä»¶çš„å†…å­˜å¼€é”€ï¼‰ï¼Œ<code>HAProxy</code>ä¸º<strong>1.5æ ¸/èŠ‚ç‚¹</strong>ï¼ˆå› è§„åˆ™çš„çº¿æ€§éå†å¯¼è‡´CPUå ç”¨é«˜ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-8"><strong>å››ã€å®é™…æ¡ˆä¾‹ï¼šL4ä¸L7ä»£ç†çš„åº”ç”¨</strong></h3>
<p>ä»¥ä¸‹æ˜¯<strong>ä¼ä¸šç”Ÿäº§ç¯å¢ƒ</strong>çš„æ¡ˆä¾‹ï¼ŒéªŒè¯äº†L4ä¸L7ä»£ç†çš„é€‰æ‹©é€»è¾‘ï¼š</p>
<h4 data-id="heading-9"><strong>1. æ¡ˆä¾‹1ï¼šç”µå•†å¤§ä¿ƒçš„å†…éƒ¨æœåŠ¡é€šä¿¡ï¼ˆL4ä»£ç†ï¼‰</strong> â€‹</h4>
<p>æŸç”µå•†å¹³å°åœ¨â€œåŒ11â€å¤§ä¿ƒä¸­ï¼Œå†…éƒ¨æœåŠ¡ï¼ˆå¦‚ç”¨æˆ·æœåŠ¡ã€è®¢å•æœåŠ¡ï¼‰ä½¿ç”¨<code>kube-proxy</code>çš„<code>ipvs</code>æ¨¡å¼ï¼ˆL4ä»£ç†ï¼‰å¤„ç†TCPæµé‡ã€‚<code>ipvs</code>çš„<strong>O(1)è§„åˆ™æŸ¥æ‰¾</strong>æ”¯æ’‘äº†<strong>10ä¸‡çº§Pod</strong>çš„æµé‡è½¬å‘ï¼Œååé‡è¾¾<strong>12,500 req/s</strong>ï¼ŒP99å»¶è¿Ÿçº¦<strong>0.16ms</strong>ï¼Œç¡®ä¿äº†å†…éƒ¨æœåŠ¡çš„é«˜å¯ç”¨ä¸ä½å»¶è¿Ÿã€‚</p>
<h4 data-id="heading-10"><strong>2. æ¡ˆä¾‹2ï¼šé‡‘èæœåŠ¡çš„å¤–éƒ¨APIç½‘å…³ï¼ˆL7ä»£ç†ï¼‰</strong> â€‹</h4>
<p>æŸé“¶è¡Œåœ¨å¾®æœåŠ¡æ”¹é€ ä¸­ï¼Œä½¿ç”¨<code>Envoy</code>ä½œä¸ºAPIç½‘å…³ï¼ˆL7ä»£ç†ï¼‰ï¼Œå¤„ç†å¤–éƒ¨HTTPSè¯·æ±‚ã€‚<code>Envoy</code>å®ç°äº†<strong>åŸºäºJWTçš„èº«ä»½è®¤è¯</strong>ï¼ˆè§£æAuthorization Headerï¼‰ã€<strong>ç°åº¦å‘å¸ƒ</strong>ï¼ˆå°†10%çš„æµé‡è·¯ç”±åˆ°æ–°ç‰ˆæœ¬æœåŠ¡ï¼‰åŠ<strong>å¯è§‚æµ‹æ€§</strong>ï¼ˆæ”¶é›†è¯·æ±‚å»¶è¿Ÿã€é”™è¯¯ç‡çš„metricsï¼‰ï¼Œç¡®ä¿äº†é‡‘èæœåŠ¡çš„å®‰å…¨æ€§ä¸å¯ç»´æŠ¤æ€§ã€‚</p>
<h4 data-id="heading-11"><strong>3. æ¡ˆä¾‹3ï¼šå·¥ä¸šIoTçš„å®æ—¶æ•°æ®ä¼ è¾“ï¼ˆL4ä»£ç†ï¼‰</strong> â€‹</h4>
<p>æŸå·¥ä¸šä¼ä¸šåœ¨IoTåœºæ™¯ä¸­ï¼Œä½¿ç”¨<code>kube-proxy</code>çš„<code>ipvs</code>æ¨¡å¼ï¼ˆL4ä»£ç†ï¼‰å¤„ç†ä¼ æ„Ÿå™¨æ•°æ®ï¼ˆTCPåè®®ï¼‰ã€‚<code>ipvs</code>çš„ä½å»¶è¿Ÿï¼ˆP99å»¶è¿Ÿçº¦0.16msï¼‰ä¸é«˜ååé‡ï¼ˆ12,500 req/sï¼‰æ»¡è¶³äº†å®æ—¶æ•°æ®ä¼ è¾“çš„éœ€æ±‚ï¼Œä¸”èµ„æºå¼€é”€ä½ï¼ˆCPUå ç”¨0.8æ ¸/èŠ‚ç‚¹ï¼‰ã€‚</p>
<h3 data-id="heading-12"><strong>äº”ã€æ€»ç»“ï¼šé€‰æ‹©L4æˆ–L7ä»£ç†çš„æ ¸å¿ƒé€»è¾‘</strong></h3>






























<table><thead><tr><th><strong>ç»´åº¦</strong>â€‹</th><th><strong>L4ä»£ç†</strong>â€‹</th><th><strong>L7ä»£ç†</strong>â€‹</th></tr></thead><tbody><tr><td><strong>æ ¸å¿ƒåŠŸèƒ½</strong>â€‹</td><td>åŸºç¡€è½¬å‘ï¼ˆè´Ÿè½½å‡è¡¡ã€æœåŠ¡å‘ç°ï¼‰</td><td>ç²¾ç»†ç®¡ç†ï¼ˆè·¯ç”±ã€å®‰å…¨ã€å¯è§‚æµ‹æ€§ï¼‰</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong>â€‹</td><td>å†…éƒ¨æœåŠ¡ã€å¤§è§„æ¨¡é›†ç¾¤ã€ä½å»¶è¿Ÿåœºæ™¯</td><td>å¤–éƒ¨APIã€å®‰å…¨æ•æ„Ÿåœºæ™¯ã€å¯è§‚æµ‹æ€§éœ€æ±‚</td></tr><tr><td><strong>æ€§èƒ½ä¼˜åŠ¿</strong>â€‹</td><td>é«˜ååã€ä½å»¶è¿Ÿã€ä½èµ„æºå¼€é”€</td><td>æ”¯æŒåº”ç”¨å±‚åŠŸèƒ½ï¼Œååé‡/å»¶è¿Ÿç•¥é€ŠäºL4</td></tr><tr><td><strong>å…¸å‹å®ç°</strong>â€‹</td><td><code>kube-proxy</code>ï¼ˆipvsæ¨¡å¼ï¼‰ã€Istio ztunnel</td><td><code>Envoy</code>ã€<code>Nginx Ingress</code>ã€<code>Traefik</code></td></tr></tbody></table>
<h3 data-id="heading-13"><strong>å…­ã€æ³¨æ„äº‹é¡¹</strong></h3>
<ol>
<li><strong>æ··åˆä½¿ç”¨</strong>ï¼šåœ¨å®é™…åœºæ™¯ä¸­ï¼ŒL4ä¸L7ä»£ç†å¸¸<strong>æ··åˆä½¿ç”¨</strong>ï¼ˆå¦‚<code>kube-proxy</code>å¤„ç†å†…éƒ¨L4æµé‡ï¼Œ<code>Envoy</code>å¤„ç†å¤–éƒ¨L7æµé‡ï¼‰ï¼Œä»¥æ»¡è¶³ä¸åŒéœ€æ±‚ã€‚</li>
<li><strong>æ€§èƒ½è°ƒä¼˜</strong>ï¼šL7ä»£ç†çš„æ€§èƒ½å¯é€šè¿‡<strong>ä¼˜åŒ–é…ç½®</strong>ï¼ˆå¦‚<code>Envoy</code>çš„<code>worker_threads</code>ï¼‰æˆ–<strong>ç¡¬ä»¶åŠ é€Ÿ</strong>ï¼ˆå¦‚SSLç¡¬ä»¶åŠ é€Ÿï¼‰æå‡ï¼Œä¾‹å¦‚<code>Envoy</code>çš„<code>worker_threads</code>è®¾ç½®ä¸º<strong>CPUæ ¸å¿ƒæ•°</strong>ï¼ˆå¦‚4æ ¸CPUè®¾ç½®ä¸º4ï¼‰ï¼Œå¯å°†ååé‡æå‡<strong>20%</strong> ã€‚</li>
<li><strong>è¿ç»´æˆæœ¬</strong>ï¼šL7ä»£ç†çš„é…ç½®å¤æ‚åº¦é«˜äºL4ä»£ç†ï¼ˆå¦‚éœ€é…ç½®è·¯ç”±è§„åˆ™ã€TLSè¯ä¹¦ï¼‰ï¼Œéœ€è€ƒè™‘<strong>è¿ç»´å›¢é˜Ÿçš„èƒ½åŠ›</strong>ï¼ˆå¦‚æ˜¯å¦æœ‰ä¸“ä¸šçš„ç½‘ç»œå·¥ç¨‹å¸ˆï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-14"><strong>ç»“è®º</strong></h3>
<p>åœ¨Kubernetesä¸­ï¼Œé€‰æ‹©L4æˆ–L7ä»£ç†çš„å…³é”®æ˜¯<strong>ä¸šåŠ¡éœ€æ±‚æ˜¯å¦ä¾èµ–åº”ç”¨å±‚ä¿¡æ¯</strong>ï¼š</p>
<ul>
<li>è‹¥éœ€<strong>åŸºç¡€è½¬å‘</strong>ï¼ˆå¦‚å†…éƒ¨æœåŠ¡é€šä¿¡ï¼‰ï¼Œé€‰æ‹©<strong>L4ä»£ç†</strong>ï¼ˆå¦‚<code>kube-proxy</code>ipvsæ¨¡å¼ï¼‰ï¼Œæ€§èƒ½æ›´ä¼˜ï¼›</li>
<li>è‹¥éœ€<strong>ç²¾ç»†ç®¡ç†</strong>ï¼ˆå¦‚å¤–éƒ¨APIç½‘å…³ã€å®‰å…¨ç­–ç•¥ï¼‰ï¼Œé€‰æ‹©<strong>L7ä»£ç†</strong>ï¼ˆå¦‚<code>Envoy</code>ï¼‰ï¼ŒåŠŸèƒ½æ›´å…¨é¢ã€‚</li>
</ul>
<p>é€šè¿‡ç»“åˆ<strong>åœºæ™¯éœ€æ±‚</strong>ã€<strong>æ€§èƒ½æ•°æ®</strong>åŠ<strong>è¿ç»´æˆæœ¬</strong>ï¼Œå¯é€‰æ‹©æœ€é€‚åˆçš„ä»£ç†æ–¹æ¡ˆï¼Œç¡®ä¿Kubernetesé›†ç¾¤çš„<strong>é«˜å¯ç”¨ã€ä½å»¶è¿Ÿ</strong>ä¸<strong>å¯ç»´æŠ¤æ€§</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£æå¾®ä¿¡ä¸æ”¯ä»˜å®ã€çº¢åŒ…/è½¬è´¦ã€‘èƒŒåçš„å…±åŒæŠ€æœ¯åŸºç¡€ï¼Œæˆ‘ä»¬æ˜¯å¦å¯ä»¥å®ç°ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7602488187409121332</link>    <guid>https://juejin.cn/post/7602488187409121332</guid>    <pubDate>2026-02-04T07:05:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602488187409121332" data-draft-id="7602482736914710563" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£æå¾®ä¿¡ä¸æ”¯ä»˜å®ã€çº¢åŒ…/è½¬è´¦ã€‘èƒŒåçš„å…±åŒæŠ€æœ¯åŸºç¡€ï¼Œæˆ‘ä»¬æ˜¯å¦å¯ä»¥å®ç°ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2026-02-04T07:05:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹—å¤´å¤§å†›ä¹‹æ±Ÿè‹åˆ†å†›"/> <meta itemprop="url" content="https://juejin.cn/user/2955079655907879"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£æå¾®ä¿¡ä¸æ”¯ä»˜å®ã€çº¢åŒ…/è½¬è´¦ã€‘èƒŒåçš„å…±åŒæŠ€æœ¯åŸºç¡€ï¼Œæˆ‘ä»¬æ˜¯å¦å¯ä»¥å®ç°ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2955079655907879/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹—å¤´å¤§å†›ä¹‹æ±Ÿè‹åˆ†å†›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T07:05:20.000Z" title="Wed Feb 04 2026 07:05:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>éœ€è¦å…ˆè¯´æ˜ä¸€ç‚¹ï¼š
æ–‡ä¸­æ¶‰åŠçš„ç›¸å…³é€»è¾‘ï¼Œå¹¶éæ¥è‡ªéå…¬å¼€çš„å†…éƒ¨èµ„æ–™ï¼Œè€Œæ˜¯åŸºäºå…¬å¼€èµ„æ–™ã€è¡Œä¸šå¸¸è§åšæ³•ï¼Œä»¥åŠæˆ‘è¿‡å¾€é¡¹ç›®ä¸­çš„å®é™…ç»éªŒè¿›è¡Œçš„å·¥ç¨‹å±‚é¢æ¨æ¼”ã€‚
å…·ä½“å®ç°å¿…ç„¶ä¼šå› å…¬å¸ä½“é‡ã€é£æ§ç­–ç•¥å’Œç³»ç»Ÿå¤æ‚åº¦è€Œæœ‰æ‰€ä¸åŒï¼Œä½†æ•´ä½“æ€è·¯åœ¨æŠ€æœ¯ä¸Šæ˜¯å¯è¡Œä¸”å¸¸è§çš„ã€‚æ‰€ä»¥çœŸæ­£çš„å®ç°ç»†èŠ‚è‚¯å®šæ›´å¤æ‚ï¼Œä½†æ€è·¯æœ¬èº«å¹¶ä¸ç¥ç§˜ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>2026çš„æ˜¥èŠ‚é©¬ä¸Šåˆ°äº†ï¼Œä¸ä»¥å¾€ä¸åŒçš„æ˜¯æœ€è¿‘ä¸¤å¹´ï¼Œæˆ‘çš„çš„èº«ä»½ä»ä¸€ä¸ªæ”¶çº¢åŒ…çš„ï¼Œè½¬æ¢æˆå‘çº¢åŒ…çš„äº†ï¼!ä½ è¯´æ€ªä¸æ€ªï¼Œè¿™é’±æ˜æ˜æ˜¯åœ¨æˆ‘çš„å¡é‡Œäº†ï¼Œæ€ä¹ˆç‚¹ä¸€ä¸‹å±å¹•ï¼Œå°±â€œå—–â€åœ°è·‘å¯¹æ–¹è´¦æˆ·é‡Œäº†ï¼Ÿ</p>
<p>è‡ªä»æ‹…ä»»äº†å‘çº¢åŒ…çš„è§’è‰²ï¼Œå¯¹è¿™äº›æ„ˆå‘æ•æ„Ÿï¼ï¼ä½†æˆ‘æ€»è§‰å¾—è¿™èƒŒåä¸€å®šä¸æ˜¯â€œç‚¹äº†å°±æœ‰â€è¿™ä¹ˆç®€å•ã€‚å¦åˆ™é“¶è¡Œæ—©å°±è¢«æˆ‘ä»¬ç‚¹ç ´äº§äº†ã€‚</p>
<p>å†åæ¥å†™ä»£ç å†™åˆ°åŠå¤œï¼Œdebug åˆ°æ€€ç–‘äººç”Ÿçš„æ—¶å€™ï¼Œæˆ‘çªç„¶æ„è¯†åˆ°ä¸€ä»¶äº‹ï¼š
å¾®ä¿¡çº¢åŒ…ã€æ”¯ä»˜å®è½¬è´¦ï¼Œæœ¬è´¨ä¸Šå’Œæˆ‘ä»¬æ¯å¤©å†™çš„é‚£äº›â€œæäº¤è¡¨å•â€â€œè¯·æ±‚æ¥å£â€â€œçŠ¶æ€å›è°ƒâ€ï¼Œå¥½åƒä¹Ÿæ²¡é‚£ä¹ˆç¥ç§˜ã€‚</p>
<p>åªæ˜¯ä»–ä»¬ç”¨çš„æ˜¯çœŸé‡‘ç™½é“¶ï¼Œè€Œæˆ‘ä»¬å¹³æ—¶ä¼ çš„æ˜¯ JSONã€‚</p>
<p>äºæ˜¯æˆ‘å¼€å§‹å¥½å¥‡ï¼š
è¿™äº›çœ‹èµ·æ¥åƒé­”æ³•ä¸€æ ·çš„åŠŸèƒ½ï¼Œåº•å±‚åˆ°åº•é çš„æ˜¯ä»€ä¹ˆï¼Ÿ
å®ƒä»¬ä¹‹é—´æœ‰æ²¡æœ‰å…±ç”¨çš„æŠ€æœ¯å¥—è·¯ï¼Ÿ
å¦‚æœæŠŠé’±æ¢æˆâ€œç§¯åˆ†â€â€œä½™é¢â€â€œè™šæ‹Ÿèµ„äº§â€ï¼Œæˆ‘ä»¬æ™®é€šå¼€å‘è€…ï¼Œèƒ½ä¸èƒ½è‡ªå·±ä¹Ÿå®ç°ä¸€å¥—ï¼Ÿå…¶å®å®ƒä»¬å¹¶æ²¡æœ‰æƒ³è±¡ä¸­é‚£ä¹ˆé¥ä¸å¯åŠï¼Œåªæ˜¯æˆ‘ä»¬å¹³æ—¶æ²¡æ•¢å¾€â€œé’±â€è¿™ä¸ªæ–¹å‘æƒ³ã€‚</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae56052b3e87420f975231f2b97d8cb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54uX5aS05aSn5Yab5LmL5rGf6IuP5YiG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770793521&amp;x-signature=XE62gKb319QhNuNXAmE4I%2F1DZ%2Fg%3D" alt="image.png" width="30%" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e84009328194fc295e1f8d3c0bc5560~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54uX5aS05aSn5Yab5LmL5rGf6IuP5YiG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770793521&amp;x-signature=nIhA%2B9qmq%2Bq1F2rMPEX%2FN6oLXKc%3D" alt="image.png" width="50%" loading="lazy"/>
<h2 data-id="heading-1"><strong>å¾®ä¿¡æ”¯ä»˜ï¼ˆWeChat Payï¼‰</strong></h2>
<ul>
<li>æ”¯ä»˜åŠŸèƒ½ä¾é™„äº <strong>å¾®ä¿¡è¿™ä¸€ç¤¾äº¤å¹³å°</strong>ï¼Œæ”¯ä»˜æ˜¯å¾®ä¿¡ç”Ÿæ€çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤çº¢åŒ…å’Œè½¬è´¦ç­‰åŠŸèƒ½è®¾è®¡éå¸¸è´´åˆç¤¾äº¤åœºæ™¯ï¼ˆæ¯”å¦‚èŠå¤©ç•Œé¢ä¸­çš„çº¢åŒ…æŒ‰é’®ï¼‰ã€‚</li>
<li>æŠ€æœ¯ä¸Šå¼ºè°ƒç¤¾äº¤äº’åŠ¨çš„å³æ—¶æ€§ä¸é«˜å¹¶å‘èƒ½åŠ›ï¼Œå°¤å…¶åœ¨ç¾¤èŠçº¢åŒ…æŠ¢å¤ºåœºæ™¯ä¸‹éœ€è¦åº”å¯¹æé«˜çš„å¹¶å‘ååã€‚</li>
</ul>
<h2 data-id="heading-2"><strong>æ”¯ä»˜å®ï¼ˆAlipayï¼‰</strong></h2>
<ul>
<li>èµ·æºäºç”µå­å•†åŠ¡ï¼ˆå°¤å…¶æ˜¯æ·˜å®/å¤©çŒ«ï¼‰ï¼Œèµ·åˆæ˜¯ä¸ºäº†è§£å†³ <strong>ç”µå•†ä¿¡ä»»ä¸æ”¯ä»˜é—®é¢˜</strong>ï¼Œä¹‹åæ‰©å±•æˆä¸€ä¸ª <strong>å…¨é¢çš„é‡‘èæœåŠ¡ç”Ÿæ€</strong>ï¼ˆåŒ…æ‹¬æŠ•èµ„ã€ç†è´¢ã€ä¿¡ç”¨ç­‰ï¼‰ã€‚</li>
<li>åœ¨çº¢åŒ…æˆ–è½¬è´¦åœºæ™¯ä¸­ï¼Œå…¶äº§å“è®¾è®¡æ›´å¤šå›´ç»•é‡‘èæœåŠ¡ä¸äº¤æ˜“å¯é æ€§ï¼Œè€Œä¸æ˜¯åƒå¾®ä¿¡é‚£æ ·å›´ç»•â€œç¤¾äº¤äº’åŠ¨â€ã€‚</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[ç”¨æˆ·å‘èµ·è¯·æ±‚] --&gt; B{éªŒè¯è¯·æ±‚åˆæ³•æ€§}
    B --&gt; |åˆæ³•| C[æ£€æŸ¥è´¦æˆ·ä½™é¢]
    B --&gt; |ä¸åˆæ³•| Z[è¿”å›é”™è¯¯æç¤º]
    C --&gt; |ä½™é¢å……è¶³| D[æ‰£æ¬¾å¹¶å†»ç»“èµ„é‡‘]
    C --&gt; |ä½™é¢ä¸è¶³| Y[è¿”å›ä½™é¢ä¸è¶³]
    D --&gt; E[å‘èµ·äº¤æ˜“å…¥é˜Ÿåˆ—]
    E --&gt; F[äº¤æ˜“å¤„ç†æœåŠ¡]
    F --&gt; G{äº¤æ˜“ç»“æœ}
    G --&gt; |æˆåŠŸ| H[æ›´æ–°è´¦æˆ·çŠ¶æ€]
    G --&gt; |å¤±è´¥| I[èµ„é‡‘å›æ»šå¹¶æ¢å¤ä½™é¢]
    H --&gt; J[å‘é€é€šçŸ¥ç»™åŒæ–¹]
    J --&gt; K[ç»“æŸ]
    I --&gt; J
</code></pre>
<h2 data-id="heading-3">ä¸€ã€çº¢åŒ…ä¸è½¬è´¦çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>çº¢åŒ…å’Œè½¬è´¦åœ¨æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„æ¦‚å¿µï¼Œå®ƒä»¬éƒ½æ˜¯è´¦æˆ·ä¹‹é—´<code>èµ„é‡‘çš„å®‰å…¨ç§»åŠ¨</code>ï¼Œä¹Ÿå°±æ˜¯ä»ä¸€ä¸ªè´¦æˆ·æŠŠé’±å®‰å…¨åœ°æ¬åˆ°å¦ä¸€ä¸ªè´¦æˆ·ï¼Œæœ€ç»ˆè¦ä¿è¯çš„æ˜¯èµ„é‡‘<code>ä¸ä¸¢å¤±ã€ä¸é‡å¤æ‰£æ¬¾ã€åŒæ–¹çŠ¶æ€ä¸€è‡´</code>ã€‚åœ¨å·¥ç¨‹ç³»ç»Ÿè®¾è®¡é‡Œï¼Œè¿™ç±»ä¸šåŠ¡å€¾å‘äºè¢«å½’ç±»ä¸º<strong>é«˜å¯é æ€§ã€é«˜ä¸€è‡´æ€§çš„åˆ†å¸ƒå¼äº¤æ˜“ç³»ç»Ÿé—®é¢˜</strong>ï¼Œä¸æˆ‘ä»¬å¹³æ—¶åšçš„è®¢å•ã€åº“å­˜è¿™ç§éœ€è¦å¼ºä¸€è‡´æ€§çš„åœºæ™¯å¾ˆåƒã€‚</p>
<p>ä½†å®ƒçš„æ ¸å¿ƒæ˜¯ä¸çœŸå®èµ„é‡‘æŒ‚é’©ï¼Œè¿™å¯¹ç³»ç»Ÿè®¾è®¡æå‡ºäº†æ›´é«˜çš„è¦æ±‚ã€‚å®ç°ä¸Šéœ€è¦æŠŠèµ„é‡‘æ“ä½œæŠ½è±¡æˆ<strong>åŸå­æ€§æ“ä½œ</strong>ï¼Œç¡®ä¿æ‰€è°“çš„<strong>è½¬è´¦äº‹åŠ¡è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»š</strong>ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„å¼ºä¸€è‡´æ€§ã€‚</p>
<h3 data-id="heading-4">ä½¿ç”¨åŒºåˆ«</h3>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/889e1d153db64a0d8cd09f6995937f1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54uX5aS05aSn5Yab5LmL5rGf6IuP5YiG5Yab:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770793521&amp;x-signature=6EBaPuzcA6sG2WTyhRJrXUxCpzo%3D" alt="image.png" width="50%" loading="lazy"/>
<p>çº¢åŒ…ä¸è½¬è´¦è™½ç„¶åœ¨æŠ€æœ¯å±‚é¢éƒ½å±äº<code>èµ„é‡‘çš„å®‰å…¨ç§»åŠ¨</code>ï¼Œä½†åœ¨äº§å“è®¾è®¡å’Œç”¨æˆ·æ„ŸçŸ¥ä¸Šå­˜åœ¨æ˜æ˜¾å·®å¼‚ã€‚é¦–å…ˆä»<strong>ä½¿ç”¨åœºæ™¯å’Œè¡¨ç°å½¢å¼</strong>æ¥çœ‹ï¼Œçº¢åŒ…æ›´å¤šæ‰¿è½½ç¤¾äº¤äº’åŠ¨å’Œæƒ…ç»ªè¡¨è¾¾ï¼Œç•Œé¢ä¸Šå¾€å¾€ä»¥ç¥ç¦è¯­ä¼´éšé‡‘é¢éšè—ç›´åˆ°æ¥æ”¶æ–¹æ‰“å¼€ï¼Œè€Œè½¬è´¦åˆ™ç›´æ¥æ˜¾ç¤ºé‡‘é¢ï¼Œæ˜¯ä¸€ç§æ›´<strong>ç›´æ¥æ¸…æ™°çš„æ”¯ä»˜è¡Œä¸º</strong>ï¼Œè¿™ä½“ç°äº†ä¸¤è€…çš„<strong>è¯­ä¹‰ä¾§é‡ç‚¹ä¸åŒ</strong>ã€‚æ­¤å¤–ï¼Œåœ¨å®é™…è§„åˆ™ä¸Šçº¢åŒ…é€šå¸¸æœ‰<strong>è¾ƒä¸¥æ ¼çš„é‡‘é¢ä¸Šé™</strong>å’Œ<strong>é¢†å–æ—¶é—´çª—å£</strong>ï¼Œè€Œè½¬è´¦åˆ™æ”¯æŒæ›´é«˜é¢åº¦å’Œæ›´çµæ´»çš„åˆ°è´¦è®¾ç½®ï¼Œè¿™ä¹Ÿåæ˜ å‡ºå®ƒä»¬åœ¨é£é™©æ§åˆ¶å’Œç”¨é€”ä¸Šçš„ä¸åŒå–å‘ã€‚æ³•å¾‹å±æ€§ä¸Šï¼Œåœ¨ä¸€äº›å¸æ³•åˆ¤ä¾‹ä¸­ï¼Œå¾®ä¿¡çº¢åŒ…ç”±äºå…¶ç¤¾äº¤èµ äºˆçš„ç‰¹æ€§å¾€å¾€è¢«è®¤å®šä¸º<strong>èµ ä¸è¡Œä¸º</strong>ï¼Œè€Œæ™®é€šçš„è½¬è´¦æ›´ç±»ä¼¼äºä¼ ç»Ÿæ„ä¹‰ä¸Šçš„èµ„é‡‘æ”¯ä»˜ï¼Œè¿™ç§å·®å¼‚ä¹Ÿä»ä¾§é¢è¯´æ˜äº§å“å®šä½çš„ä¸åŒï¼Œè¿™äº›å·®å¼‚éƒ½ä¼šåœ¨äº§å“æµç¨‹å’Œç”¨æˆ·äº¤äº’ä¸Šæœ‰æ‰€ä½“ç°ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.thepaper.cn%2FnewsDetail_forward_26321871" title="https://www.thepaper.cn/newsDetail_forward_26321871" target="_blank" ref="nofollow noopener noreferrer">è¿™é‡Œæœ‰ä¾æ®</a>)</p>
<ul>
<li><strong>äº§å“è¯­ä¹‰ä¸åŒ</strong>ï¼šçº¢åŒ…æ˜¯â€œé€ç¤¼æ°›å›´â€ï¼Œè½¬è´¦æ˜¯â€œä»˜é’±è¡ŒåŠ¨â€ã€‚</li>
<li><strong>äº¤äº’æ–¹å¼ä¸åŒ</strong>ï¼šçº¢åŒ…æœ‰éšæœºé‡‘é¢æˆ–éšè—é‡‘é¢çš„è¶£å‘³äº¤äº’ã€‚</li>
<li><strong>è§„åˆ™çº¦æŸä¸åŒ</strong>ï¼šçº¢åŒ…é™é¢ã€é¢†å¥–æœŸé™ï¼›è½¬è´¦é¢åº¦æ›´å¤§çµæ´»ã€‚</li>
<li><strong>æ³•å¾‹å±æ€§ä¸åŒ</strong>ï¼šçº¢åŒ…æ›´å¯èƒ½è¢«è®¤å®šä¸ºèµ ä¸è¡Œä¸º</li>
</ul>
<h2 data-id="heading-5">äºŒã€å¾®ä¿¡æ”¯ä»˜å®å…±åŒé‡‡ç”¨çš„åˆ†å¸ƒå¼æ¶æ„è®¾è®¡</h2>
<p>å¾®ä¿¡å’Œæ”¯ä»˜å®çš„çº¢åŒ…/è½¬è´¦åŠŸèƒ½ï¼ŒèƒŒåéƒ½ä¾èµ–äº†æˆç†Ÿçš„åˆ†å¸ƒå¼æ¶æ„è®¾è®¡ï¼Œæ ¸å¿ƒç›®æ ‡æ˜¯ <strong>é«˜å¹¶å‘ã€ä½å»¶è¿Ÿã€å¯æ‰©å±•ã€å¯ç»´æŠ¤</strong>ã€‚æˆ‘ä»¬å¯ä»¥ä»å‡ ä¸ªç»´åº¦æ¥æ‹†è§£ï¼š</p>
<ol>
<li>
<p><strong>å¾®æœåŠ¡æ‹†åˆ†</strong><br/>
åŠŸèƒ½æŒ‰ä¸šåŠ¡é€»è¾‘æ‹†æˆå¤šä¸ªæœåŠ¡ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><strong>è®¢å•æœåŠ¡</strong>ï¼šç®¡ç†çº¢åŒ…/è½¬è´¦çš„å‘èµ·ã€çŠ¶æ€æ›´æ–°</li>
<li><strong>è´¦åŠ¡æœåŠ¡</strong>ï¼šå¤„ç†èµ„é‡‘æµæ°´ã€è´¦æˆ·ä½™é¢å˜æ›´</li>
<li><strong>é€šçŸ¥æœåŠ¡</strong>ï¼šæ¶ˆæ¯æ¨é€ã€çŸ­ä¿¡/æ¶ˆæ¯é€šçŸ¥</li>
<li><strong>é£æ§æœåŠ¡</strong>ï¼šé˜²æ­¢å¼‚å¸¸äº¤æ˜“æˆ–æ¬ºè¯ˆè¡Œä¸º</li>
</ul>
<p>æ‹†åˆ†ä¹‹åï¼Œæ¯ä¸ªæœåŠ¡å¯ä»¥ç‹¬ç«‹æ‰©å®¹æˆ–å‡çº§ï¼Œé™ä½å•ç‚¹å‹åŠ›ï¼Œä¹Ÿæ–¹ä¾¿ä¸åŒå›¢é˜Ÿåä½œå¼€å‘ã€‚</p>
</li>
<li>
<p><strong>åˆ†å±‚æ¶æ„è®¾è®¡</strong></p>
<ul>
<li><strong>æ¥å…¥å±‚</strong>ï¼šAPI ç½‘å…³ã€è´Ÿè½½å‡è¡¡ã€æµé‡æ§åˆ¶</li>
<li><strong>ä¸šåŠ¡é€»è¾‘å±‚</strong>ï¼šå¾®æœåŠ¡å®ç°æ ¸å¿ƒä¸šåŠ¡é€»è¾‘</li>
<li><strong>æ•°æ®å±‚</strong>ï¼šåˆ†å¸ƒå¼æ•°æ®åº“æˆ–ç¼“å­˜ï¼ˆå¦‚ MySQL åˆ†åº“åˆ†è¡¨ã€Redis é›†ç¾¤ï¼‰</li>
</ul>
<p>åˆ†å±‚çš„å¥½å¤„æ˜¯ï¼Œæ¯å±‚åªå…³æ³¨è‡ªå·±çš„èŒè´£ï¼Œå‡å°‘è€¦åˆï¼ŒåŒæ—¶å¯ä»¥é’ˆå¯¹ä¸åŒå±‚åšä¼˜åŒ–ï¼ˆå¦‚ç¼“å­˜çƒ­ç‚¹æ•°æ®ã€å¼‚æ­¥å¤„ç†é€šçŸ¥ï¼‰ã€‚</p>
</li>
<li>
<p><strong>é«˜å¹¶å‘ä¸å¼¹æ€§æ‰©å±•</strong><br/>
çº¢åŒ…/è½¬è´¦æ˜¯å…¸å‹çš„ç¬æ—¶é«˜å¹¶å‘åœºæ™¯ï¼Œæ¯”å¦‚æ˜¥èŠ‚å¾®ä¿¡çº¢åŒ…çš„ç§’æ€æ½®ã€‚ä¸ºåº”å¯¹è¿™ç§å‹åŠ›ï¼š</p>
<ul>
<li>æœåŠ¡éƒ¨ç½²åœ¨ <strong>åˆ†å¸ƒå¼é›†ç¾¤</strong> ä¸­ï¼ˆå¤šèŠ‚ç‚¹ã€å¤šæœºæˆ¿ï¼‰</li>
<li>æ”¯æŒ <strong>è‡ªåŠ¨æ‰©å®¹/ç¼©å®¹</strong>ï¼ˆKubernetesã€äº‘åŸç”Ÿéƒ¨ç½²ï¼‰</li>
<li>ä½¿ç”¨ <strong>å¼‚æ­¥é˜Ÿåˆ—</strong>ï¼ˆKafka/RabbitMQï¼‰å¤„ç†éå®æ—¶æ“ä½œï¼Œä¾‹å¦‚é€šçŸ¥ã€æ—¥å¿—å†™å…¥</li>
<li>é‡‡ç”¨ <strong>ç¼“å­˜ + é™æµ + é˜²é‡å¤„ç†</strong> é¿å…é‡å¤æ‰£æ¬¾å’Œç³»ç»Ÿé›ªå´©</li>
</ul>
</li>
</ol>
<h3 data-id="heading-6">å¤§æ¦‚æµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[å®¢æˆ·ç«¯è¯·æ±‚] --&gt; B[API ç½‘å…³ / è´Ÿè½½å‡è¡¡]
    B --&gt; C[ä¸šåŠ¡é€»è¾‘å±‚]
    C --&gt; C1[è®¢å•æœåŠ¡]
    C --&gt; C2[è´¦åŠ¡æœåŠ¡]
    C1 --&gt; C3[é£æ§æœåŠ¡]
    C2 --&gt; C4[ç¼“å­˜/æ•°æ®åº“]
    C3 --&gt; D[é€šçŸ¥æœåŠ¡ / å¼‚æ­¥é˜Ÿåˆ—]
    C4 --&gt; D
    D --&gt; E[ç”¨æˆ·ç«¯]

</code></pre>
<h3 data-id="heading-7">ä¸‰ã€åˆ†åº“åˆ†è¡¨ä¸ç¼“å­˜è®¾è®¡åº”å¯¹é«˜å¹¶å‘</h3>
<h4 data-id="heading-8">1. åœºæ™¯æ¨¡æ‹Ÿï¼šæ˜¥èŠ‚çº¢åŒ…çš„çˆ†å‘å¼æ¿€å¢</h4>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œé™¤å¤•å¤œ 0 ç‚¹ï¼Œä½ å‘äº†ä¸€ä¸ª 100 å…ƒçš„çº¢åŒ…åœ¨å‡ ç™¾äººçš„å…¬å¸å¤§ç¾¤é‡Œã€‚è¿™ä¸€ç¬é—´ï¼Œç¾¤é‡Œ 500 äººåŒæ—¶ç‚¹å‡»<code>å¼€</code>ã€‚å¦‚æœæˆ‘ä»¬ä»…æœ‰ä¸€ä¸ª MySQL æ•°æ®åº“ï¼š</p>
<ul>
<li><strong>æ‚²å‰§å‘ç”Ÿï¼š</strong> 500 ä¸ªè¯·æ±‚åŒæ—¶äº‰æŠ¢æ•°æ®åº“ä¸­çš„åŒä¸€è¡Œè®°å½•ï¼ˆçº¢åŒ…ä½™é¢ï¼‰ã€‚æ•°æ®åº“ä¸ºäº†ä¿è¯æ•°æ®å‡†ç¡®ï¼Œä¼šåŠ â€œè¡Œé”â€ã€‚è¿™æ„å‘³ç€ç¬¬ 1 ä¸ªäººåœ¨æ“ä½œæ—¶ï¼Œåé¢ 499 ä¸ªäººéƒ½åœ¨æ’é˜Ÿç­‰å¾…ã€‚</li>
<li><strong>ç»“æœï¼š</strong> æ•°æ®åº“ CPU é£™å‡ 100%ï¼Œç³»ç»Ÿå¡æ­»ï¼Œå‰ç«¯è½¬åœˆåœˆï¼Œæœ€åå…¨å‘˜æŠ¥é”™â€œç½‘ç»œç¹å¿™â€ã€‚</li>
</ul>
<h4 data-id="heading-9">2. è§£å†³æ–¹æ¡ˆ Aï¼šåˆ†åº“åˆ†è¡¨ï¼ˆåŒ–æ•´ä¸ºé›¶ï¼‰</h4>
<p>è¦åœ¨æ¶æ„å±‚é¢è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä¸èƒ½è®©æ‰€æœ‰é¸¡è›‹éƒ½åœ¨ä¸€ä¸ªç¯®å­é‡Œã€‚</p>
<ul>
<li><strong>æ°´å¹³æ‹†åˆ† (Sharding)ï¼š</strong> æˆ‘ä»¬æ ¹æ® <code>User_ID</code> æˆ– <code>RedPacket_ID</code> çš„å“ˆå¸Œå€¼ï¼ˆHashï¼‰ï¼Œå°†æ•°æ®åˆ†æ•£åˆ° 100 ä¸ªç”šè‡³ 1000 ä¸ªæ•°æ®åº“å®ä¾‹ä¸­ã€‚</li>
<li><strong>æ•ˆæœï¼š</strong> åŸæœ¬ 10 ä¸‡çš„å¹¶å‘è¯·æ±‚ï¼Œåˆ†æ•£åˆ° 100 ä¸ªåº“ï¼Œæ¯ä¸ªåº“åªæ‰¿æ‹… 1000 QPSï¼Œå‹åŠ›ç¬é—´é™ä½åˆ°å•æœºå¯å¤„ç†èŒƒå›´ã€‚</li>
</ul>
<h4 data-id="heading-10">3. è§£å†³æ–¹æ¡ˆ Bï¼šRedis ç¼“å­˜æŠ—å‹ä¸â€œè¶…å–â€æ§åˆ¶</h4>
<p>æ•°æ®åº“å³ä¾¿åˆ†ç‰‡ï¼Œä¹Ÿæ‰›ä¸ä½æ¯ç§’ç™¾ä¸‡çº§çš„â€œè¯»â€è¯·æ±‚ã€‚è¿™æ—¶å€™ï¼Œ<strong>Redis</strong> å¿…é¡»ä½œä¸ºç¬¬ä¸€é“é˜²çº¿ã€‚ åœ¨çº¢åŒ…åœºæ™¯ä¸­ï¼Œæœ€æ ¸å¿ƒçš„æŠ€æœ¯éš¾ç‚¹æ˜¯**â€œé˜²æ­¢è¶…å–â€**ï¼ˆå³å‘äº† 10 ä¸ªçº¢åŒ…ï¼Œç»“æœè¢« 11 ä¸ªäººæŠ¢åˆ°äº†ï¼Œå¯¼è‡´èµ„é‡‘è´Ÿæ•°ï¼‰ã€‚</p>
<p><strong>æ ¸å¿ƒä»£ç å®ç°ï¼ˆLua è„šæœ¬ï¼‰ï¼š</strong> ä¸ºäº†ä¿è¯â€œæ£€æŸ¥åº“å­˜â€å’Œâ€œæ‰£å‡åº“å­˜â€æ˜¯åŸå­æ“ä½œï¼ˆä¸å¯åˆ†å‰²ï¼‰ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ Redis çš„ Lua è„šæœ¬æ¥å®ç°æ ¸å¿ƒæŠ¢åŒ…é€»è¾‘ï¼š</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-comment">-- keys[1]: çº¢åŒ…é˜Ÿåˆ— Key (List), é¢„å…ˆæ”¾å…¥äº†éšæœºé‡‘é¢çš„å°åŒ…</span>
<span class="hljs-comment">-- keys[2]: å·²æŠ¢ç”¨æˆ·è®°å½• Key (Set/Hash), é˜²æ­¢é‡å¤æŠ¢</span>
<span class="hljs-comment">-- keys[3]: çº¢åŒ…å…ƒæ•°æ® Key (Hash), è®°å½•å‰©ä½™ä¸ªæ•°</span>
<span class="hljs-comment">-- argv[1]: ç”¨æˆ· ID</span>

<span class="hljs-keyword">local</span> red_packet_queue = KEYS[<span class="hljs-number">1</span>]
<span class="hljs-keyword">local</span> consumed_record = KEYS[<span class="hljs-number">2</span>]
<span class="hljs-keyword">local</span> meta_data = KEYS[<span class="hljs-number">3</span>]
<span class="hljs-keyword">local</span> user_id = ARGV[<span class="hljs-number">1</span>]

<span class="hljs-comment">-- 1. å¹‚ç­‰æ€§æ£€æŸ¥ï¼šåˆ¤æ–­ç”¨æˆ·æ˜¯å¦å·²ç»æŠ¢è¿‡</span>
<span class="hljs-keyword">if</span> redis.call(<span class="hljs-string">'hexists'</span>, consumed_record, user_id) == <span class="hljs-number">1</span> <span class="hljs-keyword">then</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span> <span class="hljs-comment">-- çœŸç‰¹å–µè´ªå•Šï¼æŠ¢è¿‡çš„è¿˜æŠ¢ï¼Ÿ</span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment">-- 2. æ£€æŸ¥çº¢åŒ…å‰©ä½™ä¸ªæ•°</span>
<span class="hljs-keyword">local</span> left_count = redis.call(<span class="hljs-string">'hget'</span>, meta_data, <span class="hljs-string">'count'</span>)
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> left_count <span class="hljs-keyword">or</span> <span class="hljs-built_in">tonumber</span>(left_count) &lt;= <span class="hljs-number">0</span> <span class="hljs-keyword">then</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span> <span class="hljs-comment">-- å˜»å˜»ï¼Œèœé¸¡ä½ æ¥æ™šäº†</span>
<span class="hljs-keyword">end</span>

<span class="hljs-comment">-- 3. åŸå­æ“ä½œï¼šä»é˜Ÿåˆ—å¼¹å‡ºä¸€ä¸ªé‡‘é¢ï¼Œå¹¶æ‰£å‡è®¡æ•°</span>
<span class="hljs-keyword">local</span> money = redis.call(<span class="hljs-string">'lpop'</span>, red_packet_queue)
<span class="hljs-keyword">if</span> money <span class="hljs-keyword">then</span>
    redis.call(<span class="hljs-string">'hincrby'</span>, meta_data, <span class="hljs-string">'count'</span>, <span class="hljs-number">-1</span>)
    redis.call(<span class="hljs-string">'hset'</span>, consumed_record, user_id, money)
    <span class="hljs-keyword">return</span> money <span class="hljs-comment">-- nbï¼ï¼æŠ¢è´­æˆåŠŸï¼Œè¿”å›é‡‘é¢</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span> <span class="hljs-comment">-- å¼‚å¸¸æƒ…å†µï¼Œé˜Ÿåˆ—ä¸ºç©º</span>
<span class="hljs-keyword">end</span>
</code></pre>
<blockquote>
<p><strong>æ³¨æ„å“ˆï¼š</strong> Redis çš„ Lua è„šæœ¬æ˜¯å•çº¿ç¨‹æ‰§è¡Œçš„ï¼Œè¿™æ„å‘³ç€è„šæœ¬æ‰§è¡ŒæœŸé—´ï¼Œä¸ä¼šæœ‰å…¶ä»–å‘½ä»¤æ’å…¥ï¼Œå¤©ç„¶è§£å†³äº†å¹¶å‘ç«äº‰é—®é¢˜ã€‚æŠ¢åˆ°çº¢åŒ…åï¼Œå†é€šè¿‡å¼‚æ­¥æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚ Kafka/RocketMQï¼‰æ…¢æ…¢å°†æ•°æ®å†™å…¥ MySQLï¼Œå®ç°å‰Šå³°å¡«è°·ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-11">å››ã€äº‹åŠ¡ä¸€è‡´æ€§ä¸èµ„é‡‘å®‰å…¨è®¾è®¡</h3>
<p><strong><code>é’±æ²¡äº†ï¼Œå¯¹æ–¹æ²¡æ”¶åˆ°</code> okäº†å“¥ä»¬ï¼Œä½ çš„æŠ€æœ¯ç”Ÿæ¶¯åˆ°å¤´äº†ï¼Œæ¢ä¸ªæ˜Ÿçƒç”Ÿæ´»å§</strong></p>
<h4 data-id="heading-12">1. æ ¸å¿ƒæŒ‘æˆ˜ï¼šåˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„â€œè–›å®šè°”çš„è½¬è´¦â€</h4>
<p>å‡è®¾ä½ è¦è½¬è´¦ 100 å…ƒç»™æœ‹å‹ã€‚ä½ çš„è´¦æˆ·åœ¨ A æœåŠ¡ï¼Œæœ‹å‹çš„è´¦æˆ·åœ¨ B æœåŠ¡ã€‚</p>
<ol>
<li>A æœåŠ¡æ‰£äº†ä½  100 å…ƒã€‚</li>
<li>ç½‘ç»œçªç„¶æ–­äº†ã€‚</li>
<li>B æœåŠ¡æ²¡æ”¶åˆ°è¯·æ±‚ï¼Œæˆ–è€…æ”¶åˆ°äº†ä½†å¤„ç†å¤±è´¥ã€‚ <strong>ç»“æœï¼š</strong> ä½ çš„é’±å°‘äº†ï¼Œæœ‹å‹æ²¡æ”¶åˆ°ï¼Œè¿™ 100 å…ƒå‡­ç©ºæ¶ˆå¤±äº†ã€‚è¿™åœ¨é‡‘èç³»ç»Ÿæ˜¯ç»å¯¹ä¸å…è®¸çš„ã€‚</li>
</ol>
<h4 data-id="heading-13">2. è®¾è®¡åŸåˆ™ä¸€ï¼šå¹‚ç­‰æ€§ï¼ˆIdempotencyï¼‰</h4>
<p>ç”¨æˆ·å› ä¸ºç½‘ç»œå¡é¡¿ï¼Œç–¯ç‹‚ç‚¹å‡»äº† 5 æ¬¡â€œç¡®è®¤æ”¯ä»˜â€ã€‚ç³»ç»Ÿå¿…é¡»ä¿è¯ï¼š<strong>æ— è®ºç”¨æˆ·ç‚¹å¤šå°‘æ¬¡ï¼Œé’±åªèƒ½æ‰£ä¸€æ¬¡ã€‚</strong></p>
<ul>
<li><strong>å®ç°ï¼š</strong> æ¯æ¬¡è¯·æ±‚å¿…é¡»æºå¸¦ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„ <code>Biz_ID</code>ï¼ˆä¸šåŠ¡æµæ°´å·ï¼‰ã€‚</li>
<li><strong>é€»è¾‘ï¼š</strong> åç«¯æ¥æ”¶è¯·æ±‚ -&gt; æŸ¥è¯¢ <code>Biz_ID</code> æ˜¯å¦å¤„ç†è¿‡ -&gt; è‹¥å¤„ç†è¿‡ç›´æ¥è¿”å›æˆåŠŸç»“æœï¼Œä¸è¿›è¡Œæ‰£æ¬¾ï¼›è‹¥æœªå¤„ç†åˆ™æ‰§è¡Œæ‰£æ¬¾ã€‚</li>
</ul>
<h4 data-id="heading-14">3. è®¾è®¡åŸåˆ™äºŒï¼šæœ€ç»ˆä¸€è‡´æ€§ï¼ˆå¯é æ¶ˆæ¯/TCCï¼‰</h4>
<p>ç›¸æ¯”äºå¼ºä¸€è‡´æ€§ï¼ˆä¸¤é˜¶æ®µæäº¤ 2PCï¼‰å¯¼è‡´çš„æ€§èƒ½ä½ä¸‹ï¼Œäº’è”ç½‘æ”¯ä»˜é€šå¸¸é‡‡ç”¨**â€œæœ€ç»ˆä¸€è‡´æ€§â€**ã€‚</p>
<p><strong>å®æˆ˜æµç¨‹å›¾ï¼ˆæœ¬åœ°æ¶ˆæ¯è¡¨æ¨¡å¼ï¼‰ï¼š</strong></p>
<p>ï¼ˆä¸ç»™æˆ‘ç‚¹èµï¼Œç»™å›¾è¡¨ç‚¹ä¸ªèµå§ï¼ŒçœŸçš„å¾ˆéš¾å†™....ï¼‰</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User as ç”¨æˆ·
    participant Sender as è½¬å‡ºè´¦æˆ·æœåŠ¡(A)
    participant DB_A as Açš„æ•°æ®åº“(å«æ¶ˆæ¯è¡¨)
    participant MQ as æ¶ˆæ¯é˜Ÿåˆ—
    participant Receiver as è½¬å…¥è´¦æˆ·æœåŠ¡(B)

    User-&gt;&gt;Sender: å‘èµ·è½¬è´¦ 100å…ƒ
    Note over Sender, DB_A: å¼€å¯æ•°æ®åº“äº‹åŠ¡
    Sender-&gt;&gt;DB_A: 1. æ‰£å‡ä½™é¢ -100
    Sender-&gt;&gt;DB_A: 2. æ’å…¥"å¾…å‘é€"æ¶ˆæ¯è®°å½•
    Note over Sender, DB_A: æäº¤æ•°æ®åº“äº‹åŠ¡(å¼ºä¸€è‡´)
    
    Sender-&gt;&gt;MQ: 3. å‘é€æ‰£æ¬¾æˆåŠŸæ¶ˆæ¯
    MQ-&gt;&gt;Receiver: 4. æ¨é€æ¶ˆæ¯ç»™ B
    
    Receiver-&gt;&gt;Receiver: 5. æ£€æŸ¥å¹‚ç­‰æ€§(æ˜¯å¦å¤„ç†è¿‡)
    Receiver-&gt;&gt;Receiver: 6. å¢åŠ ä½™é¢ +100
    Receiver--&gt;&gt;MQ: 7. ç¡®è®¤æ¶ˆæ¯(ACK)
    
    loop å®šæ—¶ä»»åŠ¡(å…œåº•)
        Sender-&gt;&gt;DB_A: æ‰«æé•¿æ—¶é—´æœªç¡®è®¤çš„æ¶ˆæ¯
        Sender-&gt;&gt;MQ: é‡æ–°å‘é€(é‡è¯•æœºåˆ¶)
    end
</code></pre>
<h4 data-id="heading-15">äº”ã€ æœ€åï¼šç¦»çº¿å¯¹è´¦ç³»ç»Ÿ (Reconciliation)</h4>
<p>å³ä¾¿æŠ€æœ¯å†ç‰›ï¼Œä»£ç ä¹Ÿå¯èƒ½æœ‰ Bugï¼Œç¡¬ä»¶å¯èƒ½æŸåã€‚å› æ­¤ï¼Œé‡‘èç³»ç»Ÿéƒ½æœ‰ä¸€ä¸ª<strong>T+1 å¯¹è´¦æœºåˆ¶</strong>ã€‚</p>
<ul>
<li><strong>å¤œé—´å·¥ä½œï¼š</strong> æ¯å¤©å‡Œæ™¨ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ‹‰å–ä¸Šæ¸¸æ¸ é“ï¼ˆå¦‚é“¶è¡Œï¼‰çš„æµæ°´æ–‡ä»¶ï¼Œä¸ç³»ç»Ÿå†…éƒ¨çš„è®¢å•è®°å½•é€ç¬”æ¯”å¯¹ã€‚</li>
<li><strong>é•¿æ¬¾/çŸ­æ¬¾å¤„ç†ï¼š</strong> ä¸€æ—¦å‘ç°é‡‘é¢ä¸ä¸€è‡´ï¼ˆæ¯”å¦‚æ•°æ®åº“è®°äº†è½¬è´¦æˆåŠŸï¼Œä½†é“¶è¡Œå¡æ²¡æ‰£é’±ï¼‰ï¼Œç³»ç»Ÿä¼šå‘å‡ºæœ€é«˜çº§åˆ«çš„æŠ¥è­¦ï¼Œäººå·¥æˆ–è‡ªåŠ¨è„šæœ¬ä»‹å…¥è¿›è¡Œâ€œå†²æ­£â€æˆ–â€œè¡¥å•â€ã€‚</li>
<li><strong>ç»“è®ºï¼š</strong> å®æ—¶é“¾è·¯ä¿ä½“éªŒï¼Œç¦»çº¿å¯¹è´¦ä¿åº•çº¿ã€‚</li>
</ul>
<hr/>
<blockquote>
<p>é€šè¿‡ä¸Šè¿°çš„åˆ†åº“åˆ†è¡¨ã€Redis åŸå­æ“ä½œä»¥åŠå¯é çš„æ¶ˆæ¯é˜Ÿåˆ—è®¾è®¡ï¼Œæˆ‘ä»¬ç¡®å®å¯ä»¥åœ¨æŠ€æœ¯ä¸Šè¿˜åŸå¾®ä¿¡æˆ–æ”¯ä»˜å® 80% çš„æ ¸å¿ƒè½¬è´¦é€»è¾‘ã€‚ç„¶è€Œï¼Œå‰©ä¸‹çš„ 20%é‚£äº›å…³äºåˆè§„é£æ§ã€è·¨å›½æ±‡ç‡ç»“ç®—ä»¥åŠæç«¯ç¾å¤‡åˆ‡æ¢çš„ç»†èŠ‚ï¼Œemmmæˆ‘çŒœéƒ½çŒœä¸åˆ°...</p>
</blockquote>
<h3 data-id="heading-16">å…­ã€ç»“è¯­</h3>
<p>æˆ‘ä»¬åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­æˆ–å¤šæˆ–å°‘çš„å‰¥å¼€å¾®ä¿¡çº¢åŒ…é‚£å–œåº†çš„<code>å¼€</code>å­—åŠ¨ç”»ï¼Œè¿˜æœ‰æ”¯ä»˜å®è½¬è´¦é‚£åŠ¨äººå¿ƒå¼¦çš„ï¼š<code>æ”¯ä»˜å®åˆ°è´¦~ 100ä¸‡å…ƒ~</code>ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œè¿™ä¸¤ä¸ªå æ®ä¸­å›½ç§»åŠ¨æ”¯ä»˜åŠå£æ±Ÿå±±çš„å·¨å¤´ï¼Œå°½ç®¡å•†ä¸šåŸºå› æˆªç„¶ä¸åŒï¼Œ</p>
<p><strong>ä¸€ä¸ªæºäºç¤¾äº¤çš„é«˜é¢‘äº’åŠ¨</strong>ï¼Œ</p>
<p><strong>ä¸€ä¸ªæºäºç”µå•†çš„ä¸¥è°¨äº¤æ˜“</strong></p>
<p>ä½†åœ¨åº•å±‚æŠ€æœ¯æ¶æ„ä¸Šï¼Œæœ‰ç€ç»å¯¹çš„ä¸¥è°¨ã€‚</p>
<p>å›é¡¾å…¨æ–‡ï¼Œæ”¯æ’‘èµ·æ•°åäº¿ç¬”äº¤æ˜“ã€ä¿éšœèµ„é‡‘ä¸‡æ— ä¸€å¤±çš„ï¼Œæ­£æ˜¯è¿™å¥—ç°ä»£ç§»åŠ¨æ”¯ä»˜å¹³å°ä¸å¯æˆ–ç¼ºçš„<strong>äº”å¤§æŠ€æœ¯è„Šæ¢</strong>ï¼š</p>
<ol>
<li><strong>åˆ†å¸ƒå¼å¾®æœåŠ¡æ¶æ„</strong>ï¼šå°†åºå¤§çš„å•ä½“ç³»ç»Ÿæ‹†è§£ä¸ºåŸå­åŒ–çš„æœåŠ¡èŠ‚ç‚¹ï¼Œè®©ç³»ç»Ÿæ‹¥æœ‰äº†â€œç”±äºæ•…éšœè€Œè‡ªåŠ¨éš”ç¦»ï¼Œç”±äºæµé‡è€Œè‡ªåŠ¨æ‰©å®¹â€çš„å¼¹æ€§èƒ½åŠ›ã€‚</li>
<li><strong>åˆ†åº“åˆ†è¡¨ï¼ˆShardingï¼‰</strong> ï¼šé€šè¿‡å“ˆå¸Œç®—æ³•å°†æµ·é‡æ•°æ®åŒ–æ•´ä¸ºé›¶ï¼Œæ‰“ç ´äº†å•æœºæ•°æ®åº“çš„ç‰©ç†å­˜å‚¨ä¸è®¡ç®—ç“¶é¢ˆï¼Œä¸ºäº¿çº§ç”¨æˆ·æä¾›äº†æ— é™çš„å­˜å‚¨ç©ºé—´ã€‚</li>
<li><strong>å¤šçº§ç¼“å­˜è®¾è®¡ï¼ˆCachingï¼‰</strong> ï¼šRedis å……å½“äº†ä¿æŠ¤æ•°æ®åº“çš„â€œé˜²æ´ªå ¤åâ€ï¼Œåˆ©ç”¨å†…å­˜çš„é«˜é€Ÿè¯»å†™ç‰¹æ€§ï¼ŒæŠ—ä½äº†æ˜¥èŠ‚çº¢åŒ…å¤§æˆ˜ä¸­é‚£æƒŠå¿ƒåŠ¨é­„çš„åƒä¸‡çº§ QPS æ´ªå³°ã€‚</li>
<li><strong>å¼‚æ­¥åŒ–è§£è€¦ï¼ˆAsynchronous MQï¼‰</strong> ï¼šæ¶ˆæ¯é˜Ÿåˆ—è®©äº¤æ˜“ä¸»é“¾è·¯â€œå³åˆ»å“åº”â€ï¼Œå°†è€—æ—¶çš„è®°è´¦ã€é€šçŸ¥ã€è¥é”€é€»è¾‘å‰¥ç¦»ï¼Œç”¨â€œæ—¶é—´æ¢ç©ºé—´â€ï¼Œå®ç°äº†æè‡´çš„ç”¨æˆ·ä½“éªŒã€‚</li>
<li><strong>æœ€ç»ˆä¸€è‡´æ€§äº‹åŠ¡</strong>ï¼šæ‘’å¼ƒäº†æ€§èƒ½ä½ä¸‹çš„å¼ºä¸€è‡´æ€§é”ï¼Œé‡‡ç”¨æœ¬åœ°æ¶ˆæ¯è¡¨æˆ– TCC æ¨¡å¼ï¼Œåœ¨åˆ†å¸ƒå¼ç½‘ç»œçš„ä¸ç¡®å®šæ€§ä¸­ï¼Œæ„å»ºäº†èµ„é‡‘æµè½¬ç¡®å®šæ€§çš„â€œæ•°å­¦é•¿åŸâ€ã€‚</li>
</ol>
<p><strong>å›åˆ°æ–‡ç« æœ€åˆçš„é—®é¢˜ï¼šæˆ‘ä»¬æ˜¯å¦å¯ä»¥å®ç°ï¼Ÿ</strong></p>
<p>ä»ä»£ç é€»è¾‘å’Œå¼€æºç»„ä»¶çš„è§’åº¦æ¥çœ‹ï¼Œç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚Redisã€MySQLã€Kafkaã€Seata ç­‰å¼€æºåŸºç¡€è®¾æ–½è®©ä»»ä½•ä¸€ä¸ªæŠ€æœ¯å›¢é˜Ÿéƒ½æœ‰æœºä¼šæ­å»ºå‡ºä¸€å¥—å¾®å‹çš„â€œæ”¯ä»˜æ ¸å¿ƒâ€ã€‚</p>
<h4 data-id="heading-17">é™„ï¼šé«˜å¹¶å‘èµ„é‡‘äº¤æ˜“ç³»ç»ŸÂ·é€šç”¨æ¶æ„å…¨æ™¯å›¾</h4>
<p>ä¸ºäº†ä¾¿äºè®°å¿†ï¼Œæˆ‘å°†æ–‡ä¸­æåˆ°çš„æ ¸å¿ƒæŠ€æœ¯ç‚¹ï¼Œæ€»ç»“ä¸ºè¿™å¼ é€šç”¨çš„æ¶æ„å…¨æ™¯å›¾ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    %% æ ·å¼å®šä¹‰
    classDef layer fill:#e1f5fe,stroke:#01579b,stroke-width:2px;
    classDef component fill:#ffffff,stroke:#333,stroke-width:1px,stroke-dasharray: 5 5;
    classDef core fill:#fff9c4,stroke:#fbc02d,stroke-width:2px;

    User((ç”¨æˆ·/å®¢æˆ·ç«¯)) --&gt; |HTTPS/é«˜å¹¶å‘è¯·æ±‚| Gateway[æ¥å…¥ç½‘å…³å±‚]
    
    subgraph Layer1 [æµé‡å‰Šå³°ä¸è·¯ç”±]
        Gateway --&gt; |é‰´æƒ/é™æµ| RedisCluster[Redis é›†ç¾¤]
        RedisCluster -.-&gt; |Luaè„šæœ¬/åŸå­æ‰£å‡| Stock[åº“å­˜/è®¡æ•°å™¨]
        class RedisCluster,Stock core
    end

    subgraph Layer2 [æ ¸å¿ƒä¸šåŠ¡é€»è¾‘]
        Gateway --&gt; Service[äº¤æ˜“/æ”¯ä»˜å¾®æœåŠ¡]
        Service --&gt; |å¼‚æ­¥è§£è€¦| MQ(æ¶ˆæ¯é˜Ÿåˆ— MQ)
        MQ --&gt; Notify[æ¶ˆæ¯é€šçŸ¥æœåŠ¡]
        MQ --&gt; Risk[é£æ§åˆ†ææœåŠ¡]
        class MQ core
    end

    subgraph Layer3 [æ•°æ®æŒä¹…åŒ–ä¸ä¸€è‡´æ€§]
        Service --&gt; |åˆ†ç‰‡è·¯ç”±| Sharding[åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶]
        Sharding --&gt; DB_Masters[(MySQL ä¸»åº“é›†ç¾¤)]
        DB_Masters -.-&gt; |BinlogåŒæ­¥| DB_Slaves[(MySQL ä»åº“/æ•°ä»“)]
        
        Service -.-&gt; |æœ¬åœ°æ¶ˆæ¯è¡¨/TCC| Transaction[åˆ†å¸ƒå¼äº‹åŠ¡ä¿éšœ]
        class Transaction core
    end

    subgraph Layer4 [å…œåº•ä¸å¯¹è´¦]
        Check[T+1 ç¦»çº¿å¯¹è´¦ç³»ç»Ÿ] -.-&gt; |æ ¸å¯¹| DB_Slaves
        Check -.-&gt; |å·®å¼‚æŠ¥è­¦| Monitor[ç›‘æ§ä¸­å¿ƒ]
    end

    %% è¿æ¥å…³ç³»
    Layer1 --&gt; Layer2
    Layer2 --&gt; Layer3
    Layer3 -.-&gt; Layer4

    %% æ ·å¼åº”ç”¨
    class Layer1,Layer2,Layer3,Layer4 layer
</code></pre>
<blockquote>
<p>æœ¬äººç†Ÿäºå‰ç«¯å¼€å‘ï¼Œå¯¹äºåç«¯æŠ€æœ¯å¹¶ä¸æ˜¯ç‰¹åˆ«æ‡‚ï¼Œä»¥ä¸ŠæŠ€æœ¯èµ„æ–™å‡é€šè¿‡å…¬å¼€èµ„æ–™å­¦ä¹ ä»¥åŠè‡ªèº«ç»éªŒæ‰€å¾—ï¼Œå¦‚æœ‰é”™è¯¯è¯·å¤šæŒ‡æ•™ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JS-æ‰‹å†™ç³»åˆ—ï¼šä»é›¶æ‰‹å†™ Promise]]></title>    <link>https://juejin.cn/post/7602565408533004338</link>    <guid>https://juejin.cn/post/7602565408533004338</guid>    <pubDate>2026-02-04T07:17:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602565408533004338" data-draft-id="7602565408532922418" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JS-æ‰‹å†™ç³»åˆ—ï¼šä»é›¶æ‰‹å†™ Promise"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-04T07:17:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‘ç°ä¸€åªå¤§å‘†ç“œ"/> <meta itemprop="url" content="https://juejin.cn/user/180747382561607"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JS-æ‰‹å†™ç³»åˆ—ï¼šä»é›¶æ‰‹å†™ Promise
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/180747382561607/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‘ç°ä¸€åªå¤§å‘†ç“œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T07:17:19.000Z" title="Wed Feb 04 2026 07:17:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p><code>Promise</code> æ˜¯ JavaScript å¤„ç†å¼‚æ­¥ç¼–ç¨‹çš„åŸºçŸ³ã€‚è™½ç„¶æˆ‘ä»¬åœ¨æ—¥å¸¸å¼€å‘ä¸­é¢‘ç¹ä½¿ç”¨ <code>async/await</code>ï¼Œä½†æ‰‹åŠ¨å®ç°ä¸€ä¸ªç¬¦åˆ Promiseè§„èŒƒçš„ç±»ï¼Œä¸ä»…èƒ½è®©ä½ åœ¨é¢è¯•ä¸­è„±é¢–è€Œå‡ºï¼Œæ›´èƒ½è®©ä½ æ·±åˆ»ç†è§£å¾®ä»»åŠ¡ä¸é“¾å¼è°ƒç”¨çš„æœ¬è´¨ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€ Promise æ ¸å¿ƒè®¾è®¡æ–¹æ¡ˆ</h2>
<p>å®ç°ä¸€ä¸ªæ ‡å‡†çš„ Promiseï¼Œå¿…é¡»ç´§æ‰£ä»¥ä¸‹å››ä¸ªæ ¸å¿ƒç‚¹ï¼š</p>
<ol>
<li><strong>çŠ¶æ€æœºæœºåˆ¶</strong>ï¼šå­˜åœ¨ <code>PENDING</code>ï¼ˆç­‰å¾…ï¼‰ã€<code>FULFILLED</code>ï¼ˆæˆåŠŸï¼‰ã€<code>REJECTED</code>ï¼ˆå¤±è´¥ï¼‰ä¸‰ç§çŠ¶æ€ï¼ŒçŠ¶æ€è½¬æ¢ä¸å¯é€†ã€‚</li>
<li><strong>ç«‹å³æ‰§è¡Œ</strong>ï¼šæ„é€ å‡½æ•°ä¸­çš„æ‰§è¡Œå™¨ <code>executor(resolve, reject)</code> æ˜¯åŒæ­¥ç«‹å³æ‰§è¡Œçš„ã€‚</li>
<li><strong>å¾®ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼šå›è°ƒå‡½æ•°çš„æ‰§è¡Œå¿…é¡»æ˜¯å¼‚æ­¥çš„ï¼Œé€šå¸¸ä½¿ç”¨ <code>queueMicrotask</code> æ¥å®ç°ã€‚</li>
<li><strong>é“¾å¼è°ƒç”¨</strong>ï¼š<code>then</code> æ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ªæ–°çš„ Promiseï¼Œå¹¶å°†å‰ä¸€ä¸ª Promise çš„è¾“å‡ºä½œä¸ºåä¸€ä¸ª Promise çš„è¾“å…¥ã€‚</li>
</ol>
<h2 data-id="heading-2">äºŒã€ ä»£ç å®ç°</h2>
<pre><code class="hljs language-JavaScript" lang="JavaScript">      <span class="hljs-comment">// å®šä¹‰Promiseçš„ä¸‰ç§çŠ¶æ€</span>
      <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PENDING</span> = <span class="hljs-string">'pending'</span>;
      <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">FULFILLED</span> = <span class="hljs-string">'fulfilled'</span>;
      <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">REJECTED</span> = <span class="hljs-string">'rejected'</span>;

      <span class="hljs-comment">/**
       * è‡ªå®šä¹‰Promiseå®ç°
       * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} executor æ‰§è¡Œå™¨å‡½æ•°ï¼Œæ¥æ”¶resolveå’Œrejectå‚æ•°
       */</span>
      <span class="hljs-keyword">function</span> <span class="hljs-title function_">MyPromise</span>(<span class="hljs-params">executor</span>) {
        <span class="hljs-keyword">const</span> self = <span class="hljs-variable language_">this</span>; <span class="hljs-comment">// ä¿å­˜thisæŒ‡å‘ï¼Œé¿å…å›è°ƒä¸­ä¸¢å¤±</span>
        self.<span class="hljs-property">status</span> = <span class="hljs-variable constant_">PENDING</span>; <span class="hljs-comment">// åˆå§‹çŠ¶æ€ä¸ºpending</span>
        self.<span class="hljs-property">value</span> = <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// æˆåŠŸçš„ç»“æœå€¼</span>
        self.<span class="hljs-property">reason</span> = <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// å¤±è´¥çš„åŸå› </span>
        self.<span class="hljs-property">onFulfilledCallbacks</span> = []; <span class="hljs-comment">// å­˜å‚¨æˆåŠŸå›è°ƒ</span>
        self.<span class="hljs-property">onRejectedCallbacks</span> = []; <span class="hljs-comment">// å­˜å‚¨å¤±è´¥å›è°ƒ</span>

        <span class="hljs-comment">// æˆåŠŸå›è°ƒå‡½æ•°</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-params">value</span>) {
          <span class="hljs-comment">// åªæœ‰pendingçŠ¶æ€æ‰èƒ½æ”¹å˜</span>
          <span class="hljs-keyword">if</span> (self.<span class="hljs-property">status</span> === <span class="hljs-variable constant_">PENDING</span>) {
            self.<span class="hljs-property">status</span> = <span class="hljs-variable constant_">FULFILLED</span>;
            self.<span class="hljs-property">value</span> = value;
            <span class="hljs-comment">// å¼‚æ­¥æ‰§è¡Œæ‰€æœ‰æˆåŠŸå›è°ƒï¼Œå› ä¸ºthenæ–¹æ³•æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥è¦ç­‰executoræ‰§è¡Œå®Œå†æ‰§è¡Œ</span>
            <span class="hljs-title function_">queueMicrotask</span>(<span class="hljs-function">() =&gt;</span> {
              self.<span class="hljs-property">onFulfilledCallbacks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">callback</span>) =&gt;</span> {
                <span class="hljs-title function_">callback</span>(self.<span class="hljs-property">value</span>);
              });
            });
          }
        }

        <span class="hljs-comment">// å¤±è´¥å›è°ƒå‡½æ•°</span>
        <span class="hljs-keyword">function</span> <span class="hljs-title function_">reject</span>(<span class="hljs-params">reason</span>) {
          <span class="hljs-comment">// åªæœ‰pendingçŠ¶æ€æ‰èƒ½æ”¹å˜</span>
          <span class="hljs-keyword">if</span> (self.<span class="hljs-property">status</span> === <span class="hljs-variable constant_">PENDING</span>) {
            self.<span class="hljs-property">status</span> = <span class="hljs-variable constant_">REJECTED</span>;
            self.<span class="hljs-property">reason</span> = reason;
            <span class="hljs-comment">// å¼‚æ­¥æ‰§è¡Œæ‰€æœ‰å¤±è´¥å›è°ƒ</span>
            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
              self.<span class="hljs-property">onRejectedCallbacks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">callback</span>) =&gt;</span> {
                <span class="hljs-title function_">callback</span>(self.<span class="hljs-property">reason</span>);
              });
            });
          }
        }

        <span class="hljs-keyword">try</span> {
          <span class="hljs-comment">// ç«‹å³æ‰§è¡Œæ‰§è¡Œå™¨å‡½æ•°</span>
          <span class="hljs-title function_">executor</span>(resolve, reject);
        } <span class="hljs-keyword">catch</span> (error) {
          <span class="hljs-comment">// æ‰§è¡Œå™¨æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œç›´æ¥è°ƒç”¨reject</span>
          <span class="hljs-title function_">reject</span>(error);
        }
      }

      <span class="hljs-comment">/** thenæ–¹æ³•å®ç°
       * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} onFulfilled æˆåŠŸå›è°ƒ
       * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} onRejected å¤±è´¥å›è°ƒ
       * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">MyPromise</span>} è¿”å›æ–°çš„Promiseå®ç°é“¾å¼è°ƒç”¨
       */</span>
      <span class="hljs-title class_">MyPromise</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">then</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">onFulfilled, onRejected</span>) {
        <span class="hljs-keyword">const</span> self = <span class="hljs-variable language_">this</span>;
        <span class="hljs-comment">// å¤„ç†é»˜è®¤å›è°ƒï¼ˆå…¼å®¹ä¸ä¼ å›è°ƒçš„æƒ…å†µï¼‰</span>
        onFulfilled =
          <span class="hljs-keyword">typeof</span> onFulfilled === <span class="hljs-string">'function'</span> ? onFulfilled : <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> value;
        onRejected =
          <span class="hljs-keyword">typeof</span> onRejected === <span class="hljs-string">'function'</span>
            ? onRejected
            : <span class="hljs-function">(<span class="hljs-params">reason</span>) =&gt;</span> {
                <span class="hljs-keyword">throw</span> reason;
              };

        <span class="hljs-comment">// è¿”å›æ–°çš„Promiseå®ç°é“¾å¼è°ƒç”¨ï¼Œå› ä¸ºåç»­å‡½æ•°ä¹Ÿå¯ä»¥é€šè¿‡thenæ–¹æ³•æ¥å¤„ç†</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
          <span class="hljs-comment">// å¤„ç†æˆåŠŸçŠ¶æ€</span>
          <span class="hljs-keyword">if</span> (self.<span class="hljs-property">status</span> === <span class="hljs-variable constant_">FULFILLED</span>) {
            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
              <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// æ‰§è¡ŒæˆåŠŸå›è°ƒå¹¶è·å–è¿”å›å€¼</span>
                <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">onFulfilled</span>(self.<span class="hljs-property">value</span>);
                <span class="hljs-comment">// æ ¹æ®è¿”å›å€¼å¤„ç†æ–°Promiseçš„çŠ¶æ€</span>
                <span class="hljs-title function_">resolvePromise</span>(result, resolve, reject);
              } <span class="hljs-keyword">catch</span> (error) {
                <span class="hljs-title function_">reject</span>(error);
              }
            });
          }


          <span class="hljs-comment">// å¤„ç†å¤±è´¥çŠ¶æ€</span>
          <span class="hljs-keyword">if</span> (self.<span class="hljs-property">status</span> === <span class="hljs-variable constant_">REJECTED</span>) {
            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
              <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// æ‰§è¡Œå¤±è´¥å›è°ƒå¹¶è·å–è¿”å›å€¼</span>
                <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">onRejected</span>(self.<span class="hljs-property">reason</span>);
                <span class="hljs-comment">// æ ¹æ®è¿”å›å€¼å¤„ç†æ–°Promiseçš„çŠ¶æ€</span>
                <span class="hljs-title function_">resolvePromise</span>(result, resolve, reject);
              } <span class="hljs-keyword">catch</span> (error) {
                <span class="hljs-title function_">reject</span>(error);
              }
            });
          }

          <span class="hljs-comment">// å¤„ç†ç­‰å¾…çŠ¶æ€ï¼ˆæš‚å­˜å›è°ƒï¼‰</span>
          <span class="hljs-keyword">if</span> (self.<span class="hljs-property">status</span> === <span class="hljs-variable constant_">PENDING</span>) {
            self.<span class="hljs-property">onFulfilledCallbacks</span>.<span class="hljs-title function_">push</span>(<span class="hljs-function">() =&gt;</span> {
              <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">onFulfilled</span>(self.<span class="hljs-property">value</span>);
                <span class="hljs-title function_">resolvePromise</span>(result, resolve, reject);
              } <span class="hljs-keyword">catch</span> (error) {
                <span class="hljs-title function_">reject</span>(error);
              }
            });

            self.<span class="hljs-property">onRejectedCallbacks</span>.<span class="hljs-title function_">push</span>(<span class="hljs-function">() =&gt;</span> {
              <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">onRejected</span>(self.<span class="hljs-property">reason</span>);
                <span class="hljs-title function_">resolvePromise</span>(result, resolve, reject);
              } <span class="hljs-keyword">catch</span> (error) {
                <span class="hljs-title function_">reject</span>(error);
              }
            });
          }
        });
      };

      <span class="hljs-comment">/** catchæ–¹æ³•å®ç°ï¼ˆè¯­æ³•ç³–ï¼Œç­‰ä»·äºthen(null, onRejected)ï¼‰
       * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} onRejected å¤±è´¥å›è°ƒ
       * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">MyPromise</span>}
       */</span>
      <span class="hljs-title class_">MyPromise</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">catch</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">onRejected</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">then</span>(<span class="hljs-literal">null</span>, onRejected);
      };

      <span class="hljs-comment">//é™æ€æ–¹æ³•resolve - è¿”å›ä¸€ä¸ªå·²å®Œæˆçš„Promise</span>
      <span class="hljs-title class_">MyPromise</span>.<span class="hljs-property">resolve</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) {
        <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">MyPromise</span>) {
          <span class="hljs-keyword">return</span> value;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
          <span class="hljs-title function_">resolve</span>(value);
        });
      };

      <span class="hljs-comment">//é™æ€æ–¹æ³•reject - è¿”å›ä¸€ä¸ªå·²å¤±è´¥çš„Promise</span>
      <span class="hljs-title class_">MyPromise</span>.<span class="hljs-property">reject</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">reason</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">_, reject</span>) =&gt;</span> {
          <span class="hljs-title function_">reject</span>(reason);
        });
      };

      <span class="hljs-comment">// å¤„ç†thenå›è°ƒè¿”å›å€¼çš„å·¥å…·å‡½æ•°</span>
      <span class="hljs-keyword">function</span> <span class="hljs-title function_">resolvePromise</span>(<span class="hljs-params">result, resolve, reject</span>) {
        <span class="hljs-comment">// å¦‚æœè¿”å›å€¼æ˜¯å½“å‰Promiseï¼ŒæŠ›å‡ºå¾ªç¯å¼•ç”¨é”™è¯¯</span>
        <span class="hljs-keyword">if</span> (result <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">MyPromise</span>) {
          result.<span class="hljs-title function_">then</span>(resolve, reject);
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// æ™®é€šå€¼ç›´æ¥resolve</span>
          <span class="hljs-title function_">resolve</span>(result);
        }
      }
    
      <span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'--- æµ‹è¯•ç”¨ä¾‹å¼€å§‹ ---'</span>);

      <span class="hljs-comment">// 1. åŸºæœ¬ resolve</span>
      <span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'æˆåŠŸ1'</span>), <span class="hljs-number">100</span>);
      })
      p1.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Test 1: æˆåŠŸ1'</span>, res); <span class="hljs-comment">// æˆåŠŸ1</span>
      })
      p1.<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Test 1: å¤±è´¥1'</span>, err);
      })

      <span class="hljs-comment">// 2. åŸºæœ¬ reject + catch</span>
      <span class="hljs-comment">// const p2 = new MyPromise((_, reject) =&gt; {</span>
      <span class="hljs-comment">//   setTimeout(() =&gt; reject('å¤±è´¥1'), 100);</span>
      <span class="hljs-comment">// })</span>
      <span class="hljs-comment">// p2.then(success =&gt; {</span>
      <span class="hljs-comment">//   console.log('Test 2: æˆåŠŸ1', success); // å¤±è´¥1</span>
      <span class="hljs-comment">// }, (err) =&gt; {</span>
      <span class="hljs-comment">//   console.log('Test 2: å¤±è´¥1', err); // å¤±è´¥1</span>
      <span class="hljs-comment">// })</span>
      <span class="hljs-comment">// p2.catch(err =&gt; {</span>
      <span class="hljs-comment">//   console.log('Test 2: å¤±è´¥2', err); // å¤±è´¥1</span>
      <span class="hljs-comment">// })</span>

      <span class="hljs-comment">// 3. executor æŠ›å‡ºå¼‚å¸¸</span>
      <span class="hljs-comment">// new MyPromise(() =&gt; {</span>
      <span class="hljs-comment">//   throw new Error('executor error');</span>
      <span class="hljs-comment">// }).catch(err =&gt; {</span>
      <span class="hljs-comment">//   console.log('Test 4: å¼‚å¸¸', err.message); // executor error</span>
      <span class="hljs-comment">// });</span>

      <span class="hljs-comment">// 4. Promise é“¾å¼åµŒå¥—</span>
      <span class="hljs-comment">// const p4 = new MyPromise((resolve) =&gt; resolve(1))</span>
      <span class="hljs-comment">//   .then((v) =&gt; v + 1)</span>
      <span class="hljs-comment">//   .then((v) =&gt; MyPromise.resolve(v * 2))</span>
      <span class="hljs-comment">//   .then((v) =&gt; {</span>
      <span class="hljs-comment">//     console.log('Test 5:', v); // 4</span>
      <span class="hljs-comment">//   });</span>
</code></pre>
<h2 data-id="heading-3">ä¸‰ã€ æ·±åº¦ç»†èŠ‚è§£æ</h2>
<h3 data-id="heading-4">1. ä¸ºä»€ä¹ˆä½¿ç”¨ <code>queueMicrotask</code>ï¼Ÿ</h3>
<p>æ ¹æ® Promiseè§„èŒƒï¼Œ<code>onFulfilled</code> æˆ– <code>onRejected</code> å¿…é¡»åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä»…åŒ…å«å¹³å°ä»£ç æ—¶æ‰§è¡Œã€‚è¿™æ„å‘³ç€å›è°ƒå¿…é¡»æ˜¯å¼‚æ­¥çš„ã€‚ä½¿ç”¨å¾®ä»»åŠ¡è€Œä¸æ˜¯å®ä»»åŠ¡ï¼ˆå¦‚ <code>setTimeout</code>ï¼‰ï¼Œæ˜¯ä¸ºäº†ä¿è¯åœ¨å½“å‰ä»»åŠ¡å¾ªç¯ç»“æŸå‰å°½å¯èƒ½å¿«åœ°æ‰§è¡Œå›è°ƒã€‚</p>
<h3 data-id="heading-5">2. çŠ¶æ€ä¸å¯é€†æ€§</h3>
<p>åœ¨ <code>resolve</code> å’Œ <code>reject</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ¤æ–­ <code>state === 'pending'</code>ã€‚ä¸€æ—¦çŠ¶æ€å˜ä¸º <code>fulfilled</code> æˆ– <code>rejected</code>ï¼Œåç»­ä»»ä½•è°ƒç”¨éƒ½å°†è¢«å¿½ç•¥ï¼Œè¿™ä¿è¯äº† Promise çš„ç¨³å®šæ€§ã€‚</p>
<hr/>
<h2 data-id="heading-6">å››ã€ æ€»ç»“</h2>
<ol>
<li><strong>åŒæ­¥æ‰§è¡Œ</strong> <code>executor</code>ã€‚</li>
<li><strong>å¼‚æ­¥æ”¶é›†</strong> å›è°ƒå‡½æ•°ã€‚</li>
<li><strong>é€’å½’è§£æ</strong> è¿”å›å€¼ï¼Œå®ç°é“¾å¼è°ƒç”¨ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¨€åœŸæ˜é‡‘å…³äºè¿‘æœŸè¿è§„è¡Œä¸ºä¸“é¡¹æ²»ç†çš„å…¬å‘Š]]></title>    <link>https://juejin.cn/post/7602651160465817650</link>    <guid>https://juejin.cn/post/7602651160465817650</guid>    <pubDate>2026-02-04T06:51:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602651160465817650" data-draft-id="7602488187408973876" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¨€åœŸæ˜é‡‘å…³äºè¿‘æœŸè¿è§„è¡Œä¸ºä¸“é¡¹æ²»ç†çš„å…¬å‘Š"/> <meta itemprop="keywords" content="æ˜é‡‘ç¤¾åŒº"/> <meta itemprop="datePublished" content="2026-02-04T06:51:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="XCaptaino"/> <meta itemprop="url" content="https://juejin.cn/user/3052665287739005"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¨€åœŸæ˜é‡‘å…³äºè¿‘æœŸè¿è§„è¡Œä¸ºä¸“é¡¹æ²»ç†çš„å…¬å‘Š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3052665287739005/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    XCaptaino
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T06:51:03.000Z" title="Wed Feb 04 2026 06:51:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¨€åœŸæ˜é‡‘å…³äºè¿‘æœŸè¿è§„è¡Œä¸ºä¸“é¡¹æ²»ç†çš„å…¬å‘Š</h2>
<p>ç¨€åœŸæ˜é‡‘å§‹ç»ˆè‡´åŠ›äºä¸ºå¼€å‘è€…æä¾›<strong>å®‰å…¨ã€å¯ä¿¡ã€ä¸“ä¸šçš„æŠ€æœ¯ç¤¾åŒºç¯å¢ƒ</strong>ï¼Œåšå†³åå¯¹ä»»ä½•æŸå®³ç”¨æˆ·ä½“éªŒã€ä¾µå®³ç”¨æˆ·åˆæ³•æƒç›Šã€ç ´åç¤¾åŒºç”Ÿæ€ç§©åºçš„è¡Œä¸ºã€‚</p>
<p>ä¸´è¿‘æ˜¥èŠ‚ï¼Œå¹³å°å†…è¥é”€æ´»åŠ¨ä¸å¤–éƒ¨æ¨å¹¿è¡Œä¸ºé›†ä¸­å‡ºç°ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å„ç±»è¿è§„è¡Œä¸ºçš„é«˜å‘é˜¶æ®µã€‚è¿‘æœŸï¼Œç»“åˆå¹³å°æ—¥å¸¸å·¡æ£€ä¸ç”¨æˆ·æŠ•è¯‰åé¦ˆæƒ…å†µï¼Œç¨€åœŸæ˜é‡‘é’ˆå¯¹éƒ¨åˆ†<strong>ä¸¥é‡å¹²æ‰°ç¤¾åŒºç§©åºã€ä¾µå®³ç”¨æˆ·æƒç›Šçš„è¿è§„è¡Œä¸º</strong>å¼€å±•äº†ä¸“é¡¹æ²»ç†ã€‚ç›¸å…³è¿è§„è¡Œä¸ºä¸»è¦é›†ä¸­åœ¨ä»¥ä¸‹ä¸‰ç±»ï¼š</p>
<ul>
<li>è™šå‡è¥é”€åŠç›¸å…³æ¬ºè¯ˆè¡Œä¸º</li>
<li>è¿‡åº¦è¥é”€ã€è¯±å¯¼äº’åŠ¨ç­‰ç ´åç¤¾åŒºä½“éªŒçš„è¡Œä¸º</li>
<li>å­˜åœ¨æ•°æ®å®‰å…¨é£é™©ã€ä½¿ç”¨å¤–æŒ‚æˆ–è¿è§„å·¥å…·çš„è¡Œä¸º</li>
</ul>
<p>ä¸ºåˆ‡å®ç»´æŠ¤å¹¿å¤§ç”¨æˆ·çš„åˆæ³•æƒç›Šä¸ç¤¾åŒºå¥åº·ç”Ÿæ€ï¼Œå¹³å°å°†ä¾æ®å›½å®¶ç›¸å…³æ³•å¾‹æ³•è§„åŠä»¥ä¸‹å¹³å°è§„åˆ™ï¼Œå¯¹ç›¸å…³è¿è§„è¡Œä¸ºè¿›è¡Œé‡ç‚¹æ²»ç†ï¼š</p>
<ul>
<li>ã€Š<a href="https://juejin.cn/book/6844733795329900551/section/6844733795380232200" target="_blank" title="https://juejin.cn/book/6844733795329900551/section/6844733795380232200">ç¨€åœŸæ˜é‡‘ç”¨æˆ·æœåŠ¡åè®®</a>ã€‹</li>
<li>ã€Š<a href="https://juejin.cn/book/6844733795329900551/section/6844733795380232200" target="_blank" title="https://juejin.cn/book/6844733795329900551/section/6844733795380232200">ç¨€åœŸæ˜é‡‘ç¤¾åŒºè§„èŒƒ</a>ã€‹</li>
</ul>
<hr/>
<h3 data-id="heading-1">ä¸€ã€è™šå‡è¥é”€åŠç›¸å…³æ¬ºè¯ˆè¡Œä¸º</h3>
<p>éƒ¨åˆ†è´¦å·æˆ–ç¬¬ä¸‰æ–¹ä¸»ä½“å‘å¸ƒçš„å†…å®¹å­˜åœ¨æ˜æ˜¾æ¬ºè¯ˆæˆ–è¯¯å¯¼æ€§è´¨ï¼Œé€šè¿‡è™šå‡å®£ä¼ ã€ä»¿å†’èº«ä»½ã€ä¼ªé€ ç¦åˆ©ç­‰æ–¹å¼éª—å–ç”¨æˆ·ä¿¡ä»»ï¼Œè¿›è€Œä¾µå®³ç”¨æˆ·è´¢äº§å®‰å…¨ä¸ä¸ªäººä¿¡æ¯å®‰å…¨ã€‚ä¸»è¦è¡¨ç°å½¢å¼åŒ…æ‹¬ä½†ä¸é™äºï¼š</p>
<h4 data-id="heading-2">1. è™šå‡ç¦åˆ©åŠè¯±å¯¼äº¤æ˜“è¡Œä¸º</h4>
<p>é€šè¿‡è™šæ„â€œé«˜é¢è¿”åˆ©â€â€œé™æ—¶ç¦åˆ©â€â€œå†…éƒ¨èµ„æºâ€â€œå…è´¹èµ„æ–™â€â€œå®˜æ–¹è¡¥è´´â€ç­‰å†…å®¹ï¼Œè¯±å¯¼ç”¨æˆ·è¿›è¡Œä»˜è´¹ã€æ·»åŠ è”ç³»æ–¹å¼ã€åŠ å…¥ç¾¤èŠæˆ–æäº¤ä¸ªäººä¿¡æ¯ï¼Œæœ€ç»ˆæ— æ³•å…‘ç°æ‰¿è¯ºï¼Œç”šè‡³ç›´æ¥å¤±è”ã€‚</p>
<h4 data-id="heading-3">2. ä»¿å†’èº«ä»½åŠè¯¯å¯¼æ²Ÿé€šè¡Œä¸º</h4>
<p>å†’å……ç¨€åœŸæ˜é‡‘å®˜æ–¹è´¦å·ã€å¹³å°å·¥ä½œäººå‘˜ã€ç¤¾åŒºè®¤è¯ä½œè€…æˆ–çŸ¥åæŠ€æœ¯å›¢é˜Ÿï¼Œä»¥â€œè´¦å·å¼‚å¸¸â€â€œå†…å®¹å®¡æ ¸â€â€œåˆä½œé‚€çº¦â€â€œå†…æµ‹èµ„æ ¼â€â€œå®˜æ–¹æ´»åŠ¨â€ç­‰åä¹‰ï¼Œå¼•å¯¼ç”¨æˆ·å‰å¾€éå®˜æ–¹é¡µé¢æˆ–ç§ä¸‹æ²Ÿé€šæ¸ é“ï¼Œéª—å–è´¦å·ä¿¡æ¯ã€éªŒè¯ç æˆ–å…¶ä»–æ•æ„Ÿæ•°æ®ã€‚</p>
<p>ä¸Šè¿°è¡Œä¸ºä¸ä»…å¯èƒ½ç›´æ¥é€ æˆç”¨æˆ·ç»æµæŸå¤±ï¼Œè¿˜å¯èƒ½å¯¼è‡´ä¸ªäººä¿¡æ¯è¢«éæ³•é‡‡é›†ã€æ»¥ç”¨æˆ–äºŒæ¬¡ä¼ æ’­ï¼Œè¿›ä¸€æ­¥å¼•å‘è´¦å·è¢«ç›—ã€åƒåœ¾è¥é”€æˆ–ç²¾å‡†è¯ˆéª—ç­‰é£é™©ï¼Œä¸¥é‡ç ´åç¤¾åŒºä¿¡ä»»åŸºç¡€ã€‚</p>
<p>ä¸Šè¿°è¡Œä¸ºå·²æ˜ç¡®è¿åã€Šç¨€åœŸæ˜é‡‘ç”¨æˆ·æœåŠ¡åè®®ã€‹ã€Šç¨€åœŸæ˜é‡‘ç¤¾åŒºè§„èŒƒã€‹ç­‰ç›¸å…³è§„å®šï¼Œå¹³å°å°†é€šè¿‡æŠ€æœ¯è¯†åˆ«ã€äººå·¥å®¡æ ¸åŠç”¨æˆ·ä¸¾æŠ¥ç­‰æ–¹å¼ï¼ŒæŒç»­å¼€å±•æ²»ç†ï¼Œå¹¶ä¾æ³•ä¾è§„é‡‡å–å¤„ç½®æªæ–½ã€‚</p>
<hr/>
<h3 data-id="heading-4">äºŒã€è¿‡åº¦è¥é”€ä¸è¯±å¯¼äº’åŠ¨è¡Œä¸º</h3>
<p>éƒ¨åˆ†è´¦å·é€šè¿‡æ–‡ç« ã€è¯„è®ºã€æ²¸ç‚¹ã€å¤–éƒ¨é“¾æ¥ç­‰å½¢å¼ï¼Œå®æ–½<strong>é«˜é¢‘è¥é”€æ¨å¹¿ã€å¼ºåˆ¶æˆ–è¯¯å¯¼æ€§è·³è½¬ã€è¯±å¯¼ç”¨æˆ·äº’åŠ¨</strong>ç­‰è¡Œä¸ºï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>ä»¥â€œåšä»»åŠ¡â€â€œåŠ©åŠ›â€â€œæŠ½å¥–â€â€œé™æ—¶é¢†å–â€ç­‰è¯æœ¯è¯±å¯¼ç”¨æˆ·è½¬å‘ã€è¯„è®ºæˆ–ç‚¹å‡»</li>
<li>åœ¨æŠ€æœ¯å†…å®¹ä¸­å¤¹å¸¦æ˜æ˜¾è¥é”€æˆ–æ¨å¹¿ä¿¡æ¯ï¼Œå½±å“æ­£å¸¸é˜…è¯»ä¸å­¦ä¹ ä½“éªŒ</li>
<li>é€šè¿‡å†…å®¹è®¾è®¡æˆ–æŠ€æœ¯æ‰‹æ®µï¼Œå¼ºåˆ¶ç”¨æˆ·è·³è½¬è‡³éé¢„æœŸé¡µé¢</li>
</ul>
<p>æ­¤ç±»è¡Œä¸ºä¼šå¯¹ç¤¾åŒºå†…å®¹è´¨é‡ä¸ç”¨æˆ·ä½¿ç”¨ä½“éªŒé€ æˆæ˜æ˜¾å¹²æ‰°ï¼Œç ´åæ­£å¸¸çš„æŠ€æœ¯äº¤æµæ°›å›´ã€‚</p>
<p>é’ˆå¯¹ä¸Šè¿°è¿è§„è¡Œä¸ºï¼Œå¹³å°å°†ä¾æ®è¿è§„æƒ…èŠ‚è½»é‡ï¼Œé‡‡å–åŒ…æ‹¬ä½†ä¸é™äºä»¥ä¸‹å¤„ç½®æªæ–½ï¼š</p>
<ol>
<li>åˆ é™¤æˆ–é™åˆ¶è¿è§„å†…å®¹å±•ç¤º</li>
<li>é™åˆ¶è´¦å·éƒ¨åˆ†åŠŸèƒ½æˆ–é™ä½å†…å®¹æ¨èæƒé‡</li>
<li>å¯¹ä¸¥é‡æˆ–å±¡æ¬¡è¿è§„è´¦å·è¿›è¡Œå°ç¦å¤„ç†</li>
</ol>
<hr/>
<h3 data-id="heading-5">ä¸‰ã€æ•°æ®å®‰å…¨é£é™©ä¸è¿è§„å·¥å…·è¡Œä¸º</h3>
<p>éƒ¨åˆ†è¡Œä¸ºé€šè¿‡å¤–æŒ‚è„šæœ¬ã€è‡ªåŠ¨åŒ–å·¥å…·æˆ–éå®˜æ–¹æ¥å£ï¼Œå¯¹å¹³å°è¿›è¡Œå¼‚å¸¸è®¿é—®ã€æ•°æ®æŠ“å–æˆ–è‡ªåŠ¨åŒ–æ“ä½œï¼Œå¯èƒ½å¯¹å¹³å°ç³»ç»Ÿç¨³å®šæ€§ã€æ•°æ®å®‰å…¨åŠç”¨æˆ·éšç§æ„æˆå¨èƒã€‚</p>
<p>è¯¥ç±»è¡Œä¸ºå·²è¿åã€Šç¨€åœŸæ˜é‡‘ç”¨æˆ·æœåŠ¡åè®®ã€‹ã€Šç¨€åœŸæ˜é‡‘ç¤¾åŒºè§„èŒƒã€‹ç­‰ç›¸å…³çº¦å®šã€‚å¹³å°å°†æŒç»­åŠ å¼ºæŠ€æœ¯è¯†åˆ«ä¸é£æ§èƒ½åŠ›å»ºè®¾ï¼Œå¯¹å­˜åœ¨å®‰å…¨é£é™©çš„è´¦å·åŠè¡Œä¸ºä¾æ³•ä¾è§„è¿›è¡Œå¤„ç†ï¼Œåˆ‡å®ä¿éšœå¹³å°ç³»ç»Ÿä¸ç”¨æˆ·æ•°æ®å®‰å…¨ã€‚</p>
<h3 data-id="heading-6">ç»“è¯­</h3>
<p>ç¨€åœŸæ˜é‡‘å‘¼åå¹¿å¤§ç”¨æˆ·ä¸åˆ›ä½œè€…å…±åŒç»´æŠ¤å¥åº·ã€æœ‰åºçš„ç¤¾åŒºç¯å¢ƒã€‚å¦‚å‘ç°ç›¸å…³è¿è§„è¡Œä¸ºï¼Œæ¬¢è¿é€šè¿‡å¹³å°å†…ä¸¾æŠ¥æ¸ é“è¿›è¡Œåé¦ˆã€‚å¹³å°å°†æŒç»­ä¼˜åŒ–æ²»ç†æœºåˆ¶ï¼Œä¸ºå¼€å‘è€…æä¾›æ›´åŠ <strong>å®‰å…¨ã€å¯ä¿¡ã€ä¸“æ³¨æŠ€æœ¯äº¤æµ</strong>çš„ç¤¾åŒºç©ºé—´ã€‚</p>
<h2 data-id="heading-7">éƒ¨åˆ†è¿è§„ä¸¾ä¾‹</h2>
<ul>
<li>ç§ä¿¡è¾±éª‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24a9439522f446ba95b9fd26e2259e84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWENhcHRhaW5v:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770794448&amp;x-signature=MOmTpwftJeV2wB%2F0UMNX3ZOt%2Bb8%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>ç«™å¤–åˆ·å±ï¼Œåˆ©å·±ä¸»ä¹‰å¼•æµåˆ†äº«ï¼Œç‰¹åˆ«æé†’å–ä¿é™©çš„ï¼Œå…¼èŒå–æµé‡å¡çš„ã€å–æˆ¿å­çš„ã€ç®€å†æŒ‡å¯¼çš„ã€åŸ¹è®­çš„</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22553a088a4e4fec95c7dd75664913a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWENhcHRhaW5v:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770794448&amp;x-signature=c8LO8ueTOZWB0fAsDjdj0V3FJMg%3D" alt="img_v3_02ui_1c949983-6671-42ef-a807-35d9dac7cf2g.jpg" loading="lazy"/></p>
<ul>
<li>å¯¼æµ</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d70cb0d61f10469683995f9a54ac57e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWENhcHRhaW5v:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770794448&amp;x-signature=gzKvR203YXFTOIljRaQOd1eW4YA%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9dc01fc6837d4d70bcc5fa1de89cf37b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWENhcHRhaW5v:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770794448&amp;x-signature=xnECLc8D121pydgMwLjbeVfmWqw%3D" alt="image.png" loading="lazy"/></p>
<p>ç›®å‰æ–‡ç« ã€æ²¸ç‚¹ã€ç”¨æˆ·å’Œè¯„è®ºå‡æ”¯æŒä¸¾æŠ¥ï¼Œæ„Ÿè°¢å¤§å®¶çš„æ”¯æŒ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ··ç”¨ @Transactional å’Œ TransactionTemplate è¢«æ€¼äº†ï¼Œä¸‰ç§äº‹åŠ¡ç®¡ç†åˆ°åº•æ€ä¹ˆé€‰ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7602531501457621001</link>    <guid>https://juejin.cn/post/7602531501457621001</guid>    <pubDate>2026-02-04T07:34:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602531501457621001" data-draft-id="7602901565032333358" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ··ç”¨ @Transactional å’Œ TransactionTemplate è¢«æ€¼äº†ï¼Œä¸‰ç§äº‹åŠ¡ç®¡ç†åˆ°åº•æ€ä¹ˆé€‰ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-04T07:34:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¥å¥‡å°æ±¤åœ†"/> <meta itemprop="url" content="https://juejin.cn/user/1151943919285431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ··ç”¨ @Transactional å’Œ TransactionTemplate è¢«æ€¼äº†ï¼Œä¸‰ç§äº‹åŠ¡ç®¡ç†åˆ°åº•æ€ä¹ˆé€‰ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1151943919285431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¥å¥‡å°æ±¤åœ†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T07:34:19.000Z" title="Wed Feb 04 2026 07:34:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å¼•è¨€</h3>
<p>â€œåªè¦ä½ ä¸è€ƒè™‘äº‹åŠ¡çš„é—®é¢˜ï¼Œæ€»æœ‰ä¸€å¤©äº‹åŠ¡ä¼šæ¥è€ƒè™‘ä½ ã€‚â€</p>
<p>å¿˜è®°æ˜¯å“ªä½å“²äººè¯´çš„è¿™å¥è¯äº†ï¼Œåœ¨æœ€è¿‘çš„ä¸€æ¬¡code reviewä¸­ï¼Œæˆ‘é€æ¸ä½“ä¼šåˆ°äº†è¿™å¥è¯çš„åˆ†é‡ã€‚</p>
<p>å½“æˆ‘çœ‹åˆ°åŒäº‹åœ¨ä¸€ä¸ªå¤æ‚çš„ä¸šåŠ¡é€»è¾‘ä¸­æ··ç”¨äº†<code>@Transactional</code>æ³¨è§£å’Œ<code>TransactionTemplate</code>æ—¶ï¼Œå°±é¢„æ„Ÿåˆ°å¯èƒ½ä¼šæœ‰é—®é¢˜ã€‚</p>
<p>æˆ‘é—®ä»–ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Œä»–çš„å›ç­”è®©æˆ‘æœ‰äº›æ„å¤–ï¼š"åæ­£éƒ½èƒ½å®ç°äº‹åŠ¡ï¼Œåº”è¯¥æ²¡ä»€ä¹ˆåŒºåˆ«å§ï¼Ÿ"</p>
<p>è¿™ä¸ªå›ç­”è®©æˆ‘æ„è¯†åˆ°ï¼Œå¾ˆå¤šå¼€å‘è€…å¯¹Springçš„äº‹åŠ¡ç®¡ç†æœºåˆ¶å…¶å®ç†è§£å¾—å¹¶ä¸æ·±å…¥ã€‚å¤§å®¶å¾€å¾€çŸ¥é“åŠ ä¸ª<code>@Transactional</code>å°±èƒ½å¼€å¯äº‹åŠ¡ï¼Œä½†å¯¹äºä»€ä¹ˆæ—¶å€™è¯¥ç”¨å£°æ˜å¼ã€ä»€ä¹ˆæ—¶å€™è¯¥ç”¨ç¼–ç¨‹å¼ï¼Œä»¥åŠå®ƒä»¬èƒŒåçš„å·¥ä½œåŸç†ï¼Œå´å¾ˆå°‘æ·±ç©¶ã€‚</p>
<p>äº‹åŠ¡ç®¡ç†çœ‹ä¼¼ç®€å•ï¼Œå®åˆ™æš—è—ç„æœºã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬å°±æ¥æ·±å…¥èŠèŠSpringä¸­çš„ä¸‰ç§äº‹åŠ¡ç®¡ç†æ–¹å¼ï¼Œä»¥åŠå®ƒä»¬å„è‡ªçš„é€‚ç”¨åœºæ™¯å’Œæ½œåœ¨çš„é£é™©ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d964424c74b45938a57897c2554b256~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770795260&amp;x-signature=seLeQjuDQreb1FaVcLBrPus82qg%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-1">æ­£æ–‡</h3>
<h4 data-id="heading-2">ä¸‰ç§æ–¹å¼ï¼Œå„æœ‰åƒç§‹</h4>
<p>Springç»™æˆ‘ä»¬æä¾›äº†ä¸‰ç§å¤„ç†äº‹åŠ¡çš„æ–¹å¼ï¼š<code>@Transactional</code>æ³¨è§£ã€<code>TransactionTemplate</code>å’Œç›´æ¥ä½¿ç”¨<code>TransactionManager</code>ã€‚</p>
<p>å°±åƒæ­¦ä¾ å°è¯´é‡Œçš„ä¸‰ç§å…µå™¨ï¼Œæ¯ç§éƒ½æœ‰è‡ªå·±çš„æ‹›å¼å’Œé€‚ç”¨åœºæ™¯ã€‚</p>
<h5 data-id="heading-3">@Transactionalï¼šæœ€çœå¿ƒçš„</h5>
<p>æåˆ°äº‹åŠ¡ç®¡ç†ï¼ŒåŸºæœ¬ä¸Šéƒ½ä¼šæƒ³åˆ°å»ç”¨<code>@Transactional</code>ã€‚</p>
<p>ç¡®å®ï¼Œè¿™ç©æ„å„¿ç”¨èµ·æ¥ç®€å•ç²—æš´ï¼Œåœ¨æ–¹æ³•ä¸ŠåŠ ä¸€ä¸ªæ³¨è§£å°±å®Œäº‹äº†ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">UserService</span>Â {
Â  Â Â 
Â  Â Â <span class="hljs-meta">@Transactional</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">createUser</span>(<span class="hljs-params">User user</span>)Â {
Â  Â  Â  Â  userRepository.<span class="hljs-title function_">save</span>(user);
Â  Â  Â  Â Â <span class="hljs-comment">// å¦‚æœè¿™é‡ŒæŠ›å¼‚å¸¸ï¼Œä¸Šé¢çš„æ“ä½œä¼šå›æ»š</span>
Â  Â  Â  Â  <span class="hljs-title function_">sendWelcomeEmail</span>(user);
Â  Â  }
}
</code></pre>
<p>æœ€å¤§çš„ä¼˜ç‚¹å°±æ˜¯<strong>æ— ä¾µå…¥</strong>ã€‚</p>
<p>ä¸šåŠ¡ä»£ç ä¾ç„¶å¹²å‡€ï¼Œäº‹åŠ¡é€»è¾‘å®Œå…¨äº¤ç»™Springåœ¨èƒŒåæå®šäº†ã€‚ä½†æ˜¯ï¼Œè¿™ç§é»‘ç›’å¼çš„ä¾¿åˆ©å¿…ç„¶æœ‰ä»£ä»·ã€‚</p>
<p>Springé€šè¿‡AOPæ¥å®ç°å£°æ˜å¼äº‹åŠ¡ï¼Œç»™æ–¹æ³•å¤–é¢åŒ…äº†ä¸€å±‚ä»£ç†ï¼Œè¿™å°±ä¼šå¯¼è‡´ä¸€äº›è®©äººå¤´ç–¼çš„é—®é¢˜ï¼š</p>
<p><strong>å†…éƒ¨æ–¹æ³•è°ƒç”¨å¤±æ•ˆ</strong>ï¼šè¿™æ˜¯æœ€å®¹æ˜“è¸©çš„å‘ï¼å½“åŒä¸€ä¸ªç±»å†…éƒ¨çš„æ–¹æ³•è°ƒç”¨å¸¦æœ‰<code>@Transactional</code>æ³¨è§£çš„æ–¹æ³•æ—¶ï¼Œäº‹åŠ¡ä¸ä¼šç”Ÿæ•ˆã€‚å› ä¸ºå†…éƒ¨è°ƒç”¨ä¸ä¼šèµ°ä»£ç†ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>Â Â 
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">UserService</span>Â {
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">batchCreate</span>(<span class="hljs-params">List&lt;User&gt; users</span>)Â {
Â  Â  Â  Â Â <span class="hljs-keyword">for</span>Â (<span class="hljs-title class_">User</span> user : users) {
Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">createUser</span>(user);Â <span class="hljs-comment">// âŒ è¿™é‡Œäº‹åŠ¡ä¸ä¼šç”Ÿæ•ˆï¼</span>
Â  Â  Â  Â  }
Â  Â  }
Â  Â Â 
Â  Â Â <span class="hljs-meta">@Transactional</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">createUser</span>(<span class="hljs-params">User user</span>)Â {
Â  Â  Â  Â  userRepository.<span class="hljs-title function_">save</span>(user);
Â  Â  }
}
</code></pre>
<p><strong>åªå¯¹publicæ–¹æ³•ç”Ÿæ•ˆ</strong>ï¼šç§æœ‰æ–¹æ³•æˆ–è€…protectedæ–¹æ³•ä¸ŠåŠ <code>@Transactional</code>æ¯«æ— åµç”¨ã€‚</p>
<p><strong>è¦åŒ¹é…å¼‚å¸¸ç±»å‹</strong>ï¼šé»˜è®¤åªæœ‰<code>RuntimeException</code>å’Œ<code>Error</code>ä¼šè§¦å‘å›æ»šï¼Œæ£€æŸ¥å‹å¼‚å¸¸éœ€è¦ç‰¹æ®Šé…ç½®ã€‚</p>
<p>å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š</p>
<p><a href="https://juejin.cn/post/7496344493709885455" target="_blank" title="https://juejin.cn/post/7496344493709885455">juejin.cn/post/749634â€¦</a></p>
<p>è™½ç„¶è¿™äº›éƒ½æ˜¯è€ç”Ÿå¸¸è°ˆçš„é—®é¢˜äº†ï¼Œä½†åœ¨å®é™…å¼€å‘ä¸­ï¼Œè¿˜æ˜¯æœ‰å¤ªå¤šå› ä¸ºè¿™ç§ç»†èŠ‚å‡ºbugçš„æƒ…å†µã€‚</p>
<h5 data-id="heading-4">TransactionTemplateï¼šå¯æ§çš„</h5>
<p><code>TransactionTemplate</code>ç®—æ˜¯å£°æ˜å¼å’Œç¼–ç¨‹å¼äº‹åŠ¡çš„ä¸€ä¸ªå¹³è¡¡ç‚¹ã€‚å®ƒæ—¢ä¿æŒäº†ä¸€å®šçš„çµæ´»æ€§ï¼Œåˆä¸ä¼šè®©ä»£ç å˜å¾—è¿‡äºå¤æ‚ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">AccountService</span>Â {
Â  Â Â 
Â  Â Â <span class="hljs-meta">@Autowired</span>
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-title class_">TransactionTemplate</span> transactionTemplate;
Â  Â Â 
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">transfer</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> fromAccount, <span class="hljs-built_in">String</span> toAccount, BigDecimal amount</span>)Â {
Â  Â  Â  Â  transactionTemplate.<span class="hljs-title function_">execute</span>(status -&gt; {
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">try</span>Â {
Â  Â  Â  Â  Â  Â  Â  Â  accountRepository.<span class="hljs-title function_">debit</span>(fromAccount, amount);
Â  Â  Â  Â  Â  Â  Â  Â  accountRepository.<span class="hljs-title function_">credit</span>(toAccount, amount);
Â  Â  Â  Â  Â  Â  Â  Â Â returnnull;
Â  Â  Â  Â  Â  Â  }Â <span class="hljs-keyword">catch</span>Â (<span class="hljs-title class_">InsufficientFundsException</span> e) {
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// å¯ä»¥æ ¹æ®ä¸šåŠ¡é€»è¾‘å†³å®šæ˜¯å¦å›æ»š</span>
Â  Â  Â  Â  Â  Â  Â  Â  status.<span class="hljs-title function_">setRollbackOnly</span>();
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">throw</span>Â e;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  }
}
</code></pre>
<p>ç”¨<code>TransactionTemplate</code>çš„å¥½å¤„æ˜¯ä½ å¯ä»¥ç²¾ç¡®æ§åˆ¶äº‹åŠ¡çš„è¾¹ç•Œï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒæ–¹æ³•è°ƒç”¨çš„é—®é¢˜ã€‚</p>
<p>è€Œä¸”è¿˜å¯ä»¥åœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­è·å–åˆ°äº‹åŠ¡çš„çŠ¶æ€ä¿¡æ¯ï¼Œåšç‚¹æ›´ç»†è‡´çš„æ§åˆ¶ã€‚</p>
<p>ä½†è¿™ç§æ–¹å¼ä¹Ÿæœ‰äº›é—®é¢˜ã€‚</p>
<p>æœ€æ˜æ˜¾çš„å°±æ˜¯ä»£ç çš„å¯è¯»æ€§ä¼šå˜å·®ä¸€äº›ï¼Œä¸šåŠ¡é€»è¾‘å’Œäº‹åŠ¡é€»è¾‘ä¼šæ··åœ¨ä¸€èµ·ã€‚</p>
<p>å¦å¤–ï¼Œå¦‚æœä¸šåŠ¡é€»è¾‘æ¯”è¾ƒå¤æ‚ï¼ŒåµŒå¥—å±‚æ¬¡æ·±çš„è¯ï¼Œä»£ç ä¹Ÿä¼šå˜å¾—ä¸å¤ªå¥½ç»´æŠ¤ã€‚</p>
<p>å½“ç„¶ä¸€èˆ¬æ¥è¯´éƒ½ä¼šåœ¨é¢å¤–å°è£…ä¸€äº›æ–¹æ³•ä»¥ä¾›ä¸šåŠ¡ä¾§æ¥è°ƒç”¨ã€‚</p>
<h5 data-id="heading-5">TransactionManagerï¼šæœ€çµæ´»çš„</h5>
<p>å¦‚æœæƒ³è¦å®Œå…¨çš„æ§åˆ¶æƒï¼Œé‚£å°±å¾—ç›´æ¥ç”¨<code>TransactionManager</code>äº†ã€‚è¿™ç§æ–¹å¼æœ€çµæ´»ï¼Œä½†çµæ´»çš„ä»£ä»·å°±æ˜¯å®¹æ˜“å‡ºé”™ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Service</span>
publicclassÂ PaymentServiceÂ {
Â  Â Â 
Â  Â Â <span class="hljs-keyword">@Autowired</span>
Â  Â Â privateÂ PlatformTransactionManager transactionManager;
Â  Â Â 
Â  Â Â publicÂ voidÂ <span class="hljs-built_in">processPayment</span>(Payment payment)Â {
Â  Â  Â  Â  DefaultTransactionDefinition def =Â newÂ <span class="hljs-built_in">DefaultTransactionDefinition</span>();
Â  Â  Â  Â  def<span class="hljs-selector-class">.setIsolationLevel</span>(TransactionDefinition.ISOLATION_READ_COMMITTED);
Â  Â  Â  Â  def<span class="hljs-selector-class">.setPropagationBehavior</span>(TransactionDefinition.PROPAGATION_REQUIRED);
Â  Â  Â  Â Â 
Â  Â  Â  Â  TransactionStatus status = transactionManager<span class="hljs-selector-class">.getTransaction</span>(def);
Â  Â  Â  Â Â tryÂ {
Â  Â  Â  Â  Â  Â  paymentRepository<span class="hljs-selector-class">.save</span>(payment);
Â  Â  Â  Â  Â  Â  notificationService<span class="hljs-selector-class">.sendPaymentConfirmation</span>(payment);
Â  Â  Â  Â  Â  Â  transactionManager<span class="hljs-selector-class">.commit</span>(status);
Â  Â  Â  Â  }Â catchÂ (Exception e) {
Â  Â  Â  Â  Â  Â  transactionManager<span class="hljs-selector-class">.rollback</span>(status);
Â  Â  Â  Â  Â  Â Â throwÂ e;
Â  Â  Â  Â  }
Â  Â  }
}
</code></pre>
<p>è¿™ç§æ–¹å¼çš„å¥½å¤„æ˜¯å¯ä»¥ç²¾ç¡®æ§åˆ¶äº‹åŠ¡çš„æ¯ä¸€ä¸ªç»†èŠ‚ï¼Œæ¯”å¦‚éš”ç¦»çº§åˆ«ã€ä¼ æ’­è¡Œä¸ºã€è¶…æ—¶æ—¶é—´ç­‰ç­‰ã€‚</p>
<p>ä½†æ˜¯ä»£ç é‡ä¼šå¢åŠ å¾ˆå¤šï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™ã€‚</p>
<p>ä¸€æ—¦å¿˜è®°æäº¤æˆ–è€…å›æ»šï¼Œé‚£è¿Ÿæ—©ä¼šæœ‰æ•°æ®ä¸ä¸€è‡´çš„æƒŠå–œã€‚</p>
<h4 data-id="heading-6">è¯¥é€‰å“ªä¸ªï¼Ÿ</h4>
<p>ç»è¿‡ä¸Šé¢çš„ä»‹ç»ï¼Œåˆ°åº•è¯¥æ€ä¹ˆé€‰æ‹©å‘¢ï¼Ÿ</p>
<p>æˆ‘çš„å»ºè®®æ˜¯è¿™æ ·çš„ï¼š</p>
<p><strong>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œ@Transactionalå°±å¤Ÿç”¨äº†</strong>ã€‚å®ƒç®€å•ã€ç›´æ¥ï¼Œèƒ½è§£å†³90%çš„åœºæ™¯ã€‚é™¤éä½ é‡åˆ°äº†å®ƒè§£å†³ä¸äº†çš„é—®é¢˜ï¼Œå¦åˆ™æ²¡å¿…è¦æå¤æ‚ã€‚</p>
<p><strong>éœ€è¦ç²¾ç»†æ§åˆ¶æ—¶ï¼Œè€ƒè™‘TransactionTemplate</strong>ã€‚æ¯”å¦‚ä½ éœ€è¦åœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­æ ¹æ®æŸäº›æ¡ä»¶å†³å®šæ˜¯å¦å›æ»šï¼Œæˆ–è€…éœ€è¦åœ¨ä¸€ä¸ªæ–¹æ³•é‡Œç®¡ç†å¤šä¸ªäº‹åŠ¡ï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨ä¸Š<code>TransactionTemplate</code>äº†ã€‚</p>
<p><strong>æå°‘æ•°æƒ…å†µä¸‹æ‰ç›´æ¥ç”¨TransactionManager</strong>ã€‚é€šå¸¸æ˜¯åœ¨å†™æ¡†æ¶ä»£ç æˆ–è€…æœ‰éå¸¸ç‰¹æ®Šçš„éœ€æ±‚æ—¶æ‰ä¼šç”¨åˆ°ã€‚</p>
<h4 data-id="heading-7">ä¸€ä¸ªä¾‹å­</h4>
<p>è®©æˆ‘ä¸¾ä¸ªå®é™…çš„ä¾‹å­æ¥è¯´æ˜è¿™ä¸‰ç§æ–¹å¼çš„å·®å¼‚ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªæ‰¹é‡å¯¼å…¥ç”¨æˆ·çš„åŠŸèƒ½ï¼Œè¦æ±‚æ˜¯ï¼šå¦‚æœæŸä¸ªç”¨æˆ·å¯¼å…¥å¤±è´¥ï¼Œä¸åº”è¯¥å½±å“å…¶ä»–ç”¨æˆ·çš„å¯¼å…¥ã€‚</p>
<p>ç”¨<code>@Transactional</code>çš„è¯ï¼Œå¯èƒ½ä¼šè¿™æ ·å†™ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">UserImportService</span>Â {
Â  Â Â 
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">importUsers</span>(<span class="hljs-params">List&lt;User&gt; users</span>)Â {
Â  Â  Â  Â Â <span class="hljs-keyword">for</span>Â (<span class="hljs-title class_">User</span> user : users) {
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">try</span>Â {
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-title function_">createUserWithTransaction</span>(user); Â <span class="hljs-comment">// æ³¨æ„ï¼Œè¿™æ ·å†™äº‹åŠ¡ä¸ä¼šç”Ÿæ•ˆï¼</span>
Â  Â  Â  Â  Â  Â  }Â <span class="hljs-keyword">catch</span>Â (<span class="hljs-title class_">Exception</span> e) {
Â  Â  Â  Â  Â  Â  Â  Â  log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"å¯¼å…¥ç”¨æˆ·å¤±è´¥: {}"</span>, user.<span class="hljs-title function_">getUsername</span>(), e);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  }
Â  Â Â 
Â  Â Â <span class="hljs-meta">@Transactional</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">createUserWithTransaction</span>(<span class="hljs-params">User user</span>)Â {
Â  Â  Â  Â  userRepository.<span class="hljs-title function_">save</span>(user);
Â  Â  Â  Â  userProfileRepository.<span class="hljs-title function_">save</span>(user.<span class="hljs-title function_">getProfile</span>());
Â  Â  }
}
</code></pre>
<p><strong>âš ï¸ ä¸Šé¢çš„ä»£ç ä¸­ï¼Œäº‹åŠ¡æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ï¼</strong></p>
<p>è¿™æ˜¯å› ä¸º<code>importUsers</code>æ–¹æ³•è°ƒç”¨åŒä¸€ä¸ªç±»ä¸­çš„<code>createUserWithTransaction</code>æ–¹æ³•ï¼Œå±äº<strong>å†…éƒ¨æ–¹æ³•è°ƒç”¨</strong>ã€‚Spring AOPé€šè¿‡ä»£ç†å®ç°äº‹åŠ¡ï¼Œè€ŒåŒä¸€ä¸ªç±»å†…éƒ¨çš„æ–¹æ³•è°ƒç”¨ä¸ä¼šèµ°ä»£ç†ï¼Œæ‰€ä»¥<code>@Transactional</code>æ³¨è§£å®Œå…¨å¤±æ•ˆã€‚</p>
<p>é€šä¿—çš„åšæ³•æ˜¯å°†æœ‰äº‹åŠ¡çš„æ–¹æ³•æŠ½å–åˆ°å¦ä¸€ä¸ªServiceä¸­ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">UserImportService</span>Â {
Â  Â Â 
Â  Â Â <span class="hljs-meta">@Autowired</span>
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-title class_">UserTransactionService</span> userTransactionService;
Â  Â Â 
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">importUsers</span>(<span class="hljs-params">List&lt;User&gt; users</span>)Â {
Â  Â  Â  Â Â <span class="hljs-keyword">for</span>Â (<span class="hljs-title class_">User</span> user : users) {
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">try</span>Â {
Â  Â  Â  Â  Â  Â  Â  Â  userTransactionService.<span class="hljs-title function_">createUserWithTransaction</span>(user); Â <span class="hljs-comment">// âœ… è¿™æ ·æ‰ä¼šç”Ÿæ•ˆ</span>
Â  Â  Â  Â  Â  Â  }Â <span class="hljs-keyword">catch</span>Â (<span class="hljs-title class_">Exception</span> e) {
Â  Â  Â  Â  Â  Â  Â  Â  log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"å¯¼å…¥ç”¨æˆ·å¤±è´¥: {}"</span>, user.<span class="hljs-title function_">getUsername</span>(), e);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  }
}

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">UserTransactionService</span>Â {
Â  Â Â 
Â  Â Â <span class="hljs-meta">@Transactional</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">createUserWithTransaction</span>(<span class="hljs-params">User user</span>)Â {
Â  Â  Â  Â  userRepository.<span class="hljs-title function_">save</span>(user);
Â  Â  Â  Â  userProfileRepository.<span class="hljs-title function_">save</span>(user.<span class="hljs-title function_">getProfile</span>());
Â  Â  }
}
</code></pre>
<p>è¿™ç§æ–¹å¼çš„é—®é¢˜æ˜¯éœ€è¦é¢å¤–åˆ›å»ºä¸€ä¸ªServiceç±»ï¼Œå¢åŠ äº†ä»£ç å¤æ‚åº¦ã€‚</p>
<p>å½“ç„¶è¿˜æœ‰å¦ä¸€ç§æ–¹å¼ä½¿ç”¨Springçš„Â <code>AopContext.currentProxy()</code>Â æ‹¿åˆ°å½“å‰ä»£ç†å¯¹è±¡å†å»è°ƒç”¨ï¼Œæˆ–è€…ç”¨Â <code>ApplicationContext</code>Â å»ä»å®¹å™¨é‡Œè·å–ä»£ç†å¯¹è±¡ï¼Œä½†å§‹ç»ˆè§‰å¾—ä¸å¤ªä¼˜é›…ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæœ‰æ—¶å€™<code>TransactionTemplate</code>ä¼šæ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</p>
<p>ç”¨<code>TransactionTemplate</code>çš„è¯ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">UserImportService</span>Â {
Â  Â Â 
Â  Â Â <span class="hljs-meta">@Autowired</span>
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-title class_">TransactionTemplate</span> transactionTemplate;
Â  Â Â 
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">importUsers</span>(<span class="hljs-params">List&lt;User&gt; users</span>)Â {
Â  Â  Â  Â Â <span class="hljs-keyword">for</span>Â (<span class="hljs-title class_">User</span> user : users) {
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">try</span>Â {
Â  Â  Â  Â  Â  Â  Â  Â  transactionTemplate.<span class="hljs-title function_">execute</span>(status -&gt; {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  userRepository.<span class="hljs-title function_">save</span>(user);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  userProfileRepository.<span class="hljs-title function_">save</span>(user.<span class="hljs-title function_">getProfile</span>());
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â returnnull;
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }Â <span class="hljs-keyword">catch</span>Â (<span class="hljs-title class_">Exception</span> e) {
Â  Â  Â  Â  Â  Â  Â  Â  log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"å¯¼å…¥ç”¨æˆ·å¤±è´¥: {}"</span>, user.<span class="hljs-title function_">getUsername</span>(), e);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  }
}
</code></pre>
<p>è¿™ç§æ–¹å¼å°±å¾ˆæ¸…æ™°ï¼Œäº‹åŠ¡è¾¹ç•Œåœ¨ä»£ç ä¸­ä¸€ç›®äº†ç„¶ï¼Œè€Œä¸”ä¸ç”¨æ‹…å¿ƒæ–¹æ³•è°ƒç”¨çš„é—®é¢˜ã€‚</p>
<p>é‚£<code>TransactionManager</code>å‘¢ï¼Ÿ</p>
<p>å†™ä¸šåŠ¡çš„æ—¶å€™åŸºæœ¬ä¸å¤ªä¼šç”¨åˆ°ï¼Œæ‰€ä»¥å’±ä¹Ÿä¸å¤šè´¹å£èˆŒäº†ã€‚</p>
<h4 data-id="heading-8">è¸©è¿‡çš„å‘</h4>
<p>è¯´åˆ°äº‹åŠ¡ç®¡ç†ï¼Œæˆ‘è‡ªå·±ä¹Ÿè¸©è¿‡ä¸å°‘å‘ã€‚</p>
<p>å°è±¡æœ€æ·±çš„ä¸€æ¬¡æ˜¯åœ¨å¤„ç†ä¸€ä¸ªæŠ¥è¡¨ç»Ÿè®¡çš„åŠŸèƒ½æ—¶ï¼Œç”±äºæ•°æ®é‡æ¯”è¾ƒå¤§ï¼Œæˆ‘æƒ³ç€ç”¨åªè¯»äº‹åŠ¡æ¥æé«˜æ€§èƒ½ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Transactional</span>(readOnly =Â <span class="hljs-literal">true</span>)
<span class="hljs-keyword">public</span>Â <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">ReportData</span>&gt;Â <span class="hljs-title function_">generateReport</span>(<span class="hljs-params">ReportQuery query</span>)Â {
Â  Â Â <span class="hljs-comment">// å¤æ‚çš„æŸ¥è¯¢é€»è¾‘</span>
Â  Â Â <span class="hljs-keyword">return</span>Â reportRepository.<span class="hljs-title function_">findComplexData</span>(query);
}
</code></pre>
<p>ç»“æœå‘ç°æ€§èƒ½æå‡å¹¶ä¸æ˜æ˜¾ï¼Œåæ¥æ‰çŸ¥é“åªè¯»äº‹åŠ¡åœ¨æŸäº›æ•°æ®åº“è¿æ¥æ± é…ç½®ä¸‹ï¼Œæ•ˆæœå¹¶ä¸ç†æƒ³ã€‚</p>
<p>å¦ä¸€ä¸ªå¸¸è§çš„é—®é¢˜æ˜¯äº‹åŠ¡è¶…æ—¶ã€‚</p>
<p>æœ‰äº›å¼€å‘è€…å–œæ¬¢æŠŠäº‹åŠ¡è¶…æ—¶è®¾ç½®å¾—å¾ˆé•¿ï¼Œç”Ÿæ€•ä¸šåŠ¡é€»è¾‘æ‰§è¡Œæ—¶é—´è¿‡é•¿å¯¼è‡´äº‹åŠ¡å›æ»šã€‚ä½†è¿™æ ·åšçš„é£é™©å¾ˆæ˜æ˜¾ï¼Œå¦‚æœçœŸå‡ºç°äº†æ­»é”æˆ–è€…å…¶ä»–é—®é¢˜ï¼Œç³»ç»Ÿä¼šé•¿æ—¶é—´æ— å“åº”ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è¿™æ ·è®¾ç½®å¿…ç„¶æ˜¯ä¸å¤ªå¥½çš„ï¼Œæå…¶ä¸æ¨èï¼Œé™¤éä½ æ˜ç¡®çŸ¥é“è‡ªå·±åœ¨åšä»€ä¹ˆ</span>
<span class="hljs-meta">@Transactional(timeout =Â 300)</span>Â <span class="hljs-comment">// 5åˆ†é’Ÿè¶…æ—¶</span>
<span class="hljs-keyword">public</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title function_">processLargeDataSet</span><span class="hljs-params">(List&lt;Data&gt; dataList)</span>Â {
Â  Â Â <span class="hljs-comment">// å¤§é‡æ•°æ®å¤„ç†é€»è¾‘</span>
}
</code></pre>
<p>æ›´å¥½çš„åšæ³•æ˜¯ï¼ŒæŠŠå¤§äº‹åŠ¡æ‹†åˆ†æˆå°äº‹åŠ¡ï¼Œæˆ–è€…æ”¹å†™æˆæ‰¹å¤„ç†ã€‚</p>
<h4 data-id="heading-9">æ··åˆä½¿ç”¨çš„é—®é¢˜</h4>
<p>å›åˆ°æ–‡ç« å¼€å¤´æåˆ°çš„é‚£ä¸ªåŒäº‹çš„ä»£ç ï¼Œæ··åˆä½¿ç”¨ä¸åŒçš„äº‹åŠ¡ç®¡ç†æ–¹å¼å¾ˆå®¹æ˜“å‡ºé—®é¢˜ã€‚</p>
<p>æœ€å¸¸è§çš„æƒ…å†µæ˜¯äº‹åŠ¡ä¼ æ’­è¡Œä¸ºçš„ç†è§£åå·®ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">OrderService</span>Â {
Â  Â Â 
Â  Â Â <span class="hljs-meta">@Autowired</span>
Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-title class_">TransactionTemplate</span> transactionTemplate;
Â  Â Â 
Â  Â Â <span class="hljs-meta">@Transactional</span>
Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">processOrder</span>(<span class="hljs-params">Order order</span>)Â {
Â  Â  Â  Â  orderRepository.<span class="hljs-title function_">save</span>(order);
Â  Â  Â  Â Â 
Â  Â  Â  Â Â <span class="hljs-comment">// è¿™é‡Œåˆå¼€äº†ä¸€ä¸ªäº‹åŠ¡æ¨¡æ¿ï¼Œä¼ æ’­è¡Œä¸ºå¯èƒ½å’Œé¢„æœŸä¸ä¸€è‡´</span>
Â  Â  Â  Â  transactionTemplate.<span class="hljs-title function_">execute</span>(status -&gt; {
Â  Â  Â  Â  Â  Â  auditRepository.<span class="hljs-title function_">save</span>(<span class="hljs-keyword">new</span>Â <span class="hljs-title class_">OrderAudit</span>(order));
Â  Â  Â  Â  Â  Â Â returnnull;
Â  Â  Â  Â  });
Â  Â  }
}
</code></pre>
<p>è¿™ç§æ··ç”¨çš„ä»£ç å¾ˆè›‹ç–¼ï¼Œå¾ˆéš¾ç†è§£äº‹åŠ¡çš„è¾¹ç•Œï¼Œè°ƒè¯•èµ·æ¥ä¹Ÿå¾ˆçƒ¦ã€‚</p>
<p>æ‰€ä»¥åœ¨ä¸€ä¸ªserviceç±»ä¸­å°½é‡ä¿æŒäº‹åŠ¡ç®¡ç†æ–¹å¼çš„ä¸€è‡´æ€§ï¼Œæ²¡äº‹å°‘æŠ˜è…¾ã€‚</p>
<h3 data-id="heading-10">ç»“å°¾/æ€»ç»“</h3>
<p>ç¨å¾®æ€»ç»“ä¸€ä¸‹ã€‚</p>
<p>å¯¹äºæ–°æ‰‹ï¼Œå»ºè®®å…ˆæŠŠ<code>@Transactional</code>çš„å„ç§ç‰¹æ€§å’Œå‘ç‚¹ææ˜ç™½ï¼ŒåŸºæœ¬èƒ½è§£å†³å¤§éƒ¨åˆ†é—®é¢˜ã€‚ç­‰åˆ°çœŸæ­£éœ€è¦æ›´ç²¾ç»†æ§åˆ¶çš„æ—¶å€™ï¼Œå†è€ƒè™‘å…¶ä»–æ–¹æ¡ˆã€‚</p>
<p>å¯¹äºæœ‰ç»éªŒçš„å¼€å‘è€…ï¼Œåœ¨å·²ç»ç†Ÿç»ƒæŒæ¡ç¼–ç¨‹æ—¶äº‹åŠ¡æ§åˆ¶çš„å‰æä¸‹ï¼Œå†å¤šå…³æ³¨äº‹åŠ¡çš„æ€§èƒ½å½±å“ã€‚</p>
<p>äº‹åŠ¡ä¸æ˜¯ä¸‡é‡‘æ²¹ï¼Œè¿‡åº¦ä½¿ç”¨æˆ–è€…ä¸å½“ä½¿ç”¨éƒ½ä¼šå¸¦æ¥ä¸å¯é¢„æ–™çš„æ€§èƒ½é—®é¢˜ã€‚</p>
<p>æœ€é‡è¦çš„æ˜¯ï¼Œæ— è®ºé€‰æ‹©å“ªç§æ–¹å¼ï¼Œéƒ½è¦ä¿è¯ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<p>æŠ€æœ¯æ˜¯ä¸ºä¸šåŠ¡æœåŠ¡çš„ï¼Œè€Œä»£ç æ˜¯è¦ç»™æ•´ä¸ªå›¢é˜Ÿä¸€èµ·ç»´æŠ¤çš„ï¼Œä¸è¦ä¸ºäº†ç‚«æŠ€è®©ä»£ç å˜å¾—æ™¦æ¶©éš¾æ‡‚ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ ç†æ¸…æ¥šè¿™ä¸‰ç§æ–¹å¼çš„åŒºåˆ«å’Œä½¿ç”¨åœºæ™¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JS-ä¸€æ–‡å¸¦ä½ å½»åº•ææ‡‚ Promise å¹¶å‘æ§åˆ¶ï¼šall, race, any, allSettled]]></title>    <link>https://juejin.cn/post/7602544700476227594</link>    <guid>https://juejin.cn/post/7602544700476227594</guid>    <pubDate>2026-02-04T07:40:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602544700476227594" data-draft-id="7602531501457555465" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JS-ä¸€æ–‡å¸¦ä½ å½»åº•ææ‡‚ Promise å¹¶å‘æ§åˆ¶ï¼šall, race, any, allSettled"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-04T07:40:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‘ç°ä¸€åªå¤§å‘†ç“œ"/> <meta itemprop="url" content="https://juejin.cn/user/180747382561607"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JS-ä¸€æ–‡å¸¦ä½ å½»åº•ææ‡‚ Promise å¹¶å‘æ§åˆ¶ï¼šall, race, any, allSettled
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/180747382561607/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‘ç°ä¸€åªå¤§å‘†ç“œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T07:40:10.000Z" title="Wed Feb 04 2026 07:40:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>åœ¨å¤„ç†å¼‚æ­¥ä»»åŠ¡æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åŒæ—¶å‘èµ·å¤šä¸ªè¯·æ±‚ã€‚Promise æä¾›çš„é™æ€æ–¹æ³•èƒ½è®©æˆ‘ä»¬ä¼˜é›…åœ°æ§åˆ¶å¤šä¸ªå¹¶å‘å¼‚æ­¥ä»»åŠ¡ã€‚æœ¬æ–‡å°†æ·±åº¦å¯¹æ¯” <code>all</code>ã€<code>race</code>ã€<code>any</code> å’Œ <code>allSettled</code> çš„åŒºåˆ«ä¸åº”ç”¨åœºæ™¯ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ æ–¹æ³•è¯¦è§£ä¸å¯¹æ¯”</h2>
<h3 data-id="heading-2">1. Promise.all() â€”â€” â€œå…¨å‘˜é€šè¿‡åˆ¶â€</h3>
<ul>
<li>
<p><strong>æ¦‚å¿µ</strong>ï¼šå°†å¤šä¸ª Promise å®ä¾‹åŒ…è£…æˆä¸€ä¸ªã€‚</p>
</li>
<li>
<p><strong>çŠ¶æ€å†³å®š</strong>ï¼š</p>
<ul>
<li><strong>Fulfilled</strong>ï¼šæ‰€æœ‰å®ä¾‹éƒ½æˆåŠŸã€‚</li>
<li><strong>Rejected</strong>ï¼šåªè¦æœ‰<strong>ä¸€ä¸ª</strong>å¤±è´¥ï¼Œæ•´ä½“ç«‹å³å¤±è´¥ã€‚</li>
</ul>
</li>
<li>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šå¤šä¸ªæ¥å£è”åŠ¨ï¼Œå¿…é¡»å…¨éƒ¨æ‹¿åˆ°æ•°æ®æ‰èƒ½æ¸²æŸ“é¡µé¢ã€‚</p>
</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript">  <span class="hljs-keyword">const</span> p1 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> p2 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">2</span>);
  <span class="hljs-keyword">const</span> p3 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">3</span>);

  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([p1, p2, p3])
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">results</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(results); <span class="hljs-comment">// [1, 2, 3] é¡ºåºä¸ä¼ å…¥ä¸€è‡´</span>
    })
    .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å…¶ä¸­ä¸€ä¸ªå¤±è´¥äº†'</span>, err);
    });
</code></pre>
<h3 data-id="heading-3">2. Promise.race() â€”â€” â€œç«é€Ÿåˆ¶â€</h3>
<ul>
<li><strong>æ¦‚å¿µ</strong>ï¼šè°è·‘å¾—å¿«å°±å¬è°çš„ã€‚</li>
<li><strong>çŠ¶æ€å†³å®š</strong>ï¼šçŠ¶æ€å–å†³äº<strong>ç¬¬ä¸€ä¸ª</strong>æ”¹å˜çŠ¶æ€çš„å®ä¾‹ã€‚</li>
<li><strong>åº”ç”¨åœºæ™¯</strong>ï¼šè¯·æ±‚è¶…æ—¶æ§åˆ¶ã€‚</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript">  <span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'1ç§’åæˆåŠŸ'</span>), <span class="hljs-number">1000</span>)
  );
  <span class="hljs-keyword">const</span> p2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'500æ¯«ç§’åæˆåŠŸ'</span>), <span class="hljs-number">500</span>)
  );
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">race</span>([p1, p2]).<span class="hljs-title function_">then</span>(
    <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æµ‹è¯•1ç»“æœï¼š<span class="hljs-subst">${res}</span> (ç«é€Ÿèµ¢å®¶)`</span>, <span class="hljs-string">'success'</span>),
    <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æµ‹è¯•1å¤±è´¥ï¼š<span class="hljs-subst">${err}</span>`</span>, <span class="hljs-string">'error'</span>)
  );
</code></pre>
<h3 data-id="heading-4">3. Promise.any() â€”â€” â€œæ‹©ä¼˜å½•å–åˆ¶â€</h3>
<ul>
<li>
<p><strong>æ¦‚å¿µ</strong>ï¼šåªè¦æœ‰ä¸€ä¸ªæˆåŠŸå°±ç®—æˆåŠŸã€‚</p>
</li>
<li>
<p><strong>çŠ¶æ€å†³å®š</strong>ï¼š</p>
<ul>
<li><strong>Fulfilled</strong>ï¼šåªè¦æœ‰ä¸€ä¸ªæˆåŠŸã€‚</li>
<li><strong>Rejected</strong>ï¼š<strong>å…¨éƒ¨</strong>éƒ½å¤±è´¥æ—¶æ‰å¤±è´¥ï¼ˆè¿”å› <code>AggregateError</code>ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>åº”ç”¨åœºæ™¯</strong>ï¼šä»å¤šä¸ªå¤‡ç”¨æœåŠ¡å™¨è·å–ç›¸åŒèµ„æºã€‚</p>
</li>
</ul>
<pre><code class="hljs language-JavaScript" lang="JavaScript">  <span class="hljs-keyword">const</span> p1 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> p2 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-number">2</span>);
  <span class="hljs-keyword">const</span> p3 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-number">3</span>);
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">any</span>([p1, p2, p3])
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æœ‰ä¸€ä¸ªæˆåŠŸäº†ï¼š<span class="hljs-subst">${res}</span>`</span>, <span class="hljs-string">'success'</span>))
    .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ‰€æœ‰éƒ½å¤±è´¥äº†ï¼š<span class="hljs-subst">${err}</span>`</span>, <span class="hljs-string">'error'</span>));
</code></pre>
<h3 data-id="heading-5">4. Promise.allSettled() â€”â€” â€œç»“æœå¯¼å‘åˆ¶â€</h3>
<ul>
<li><strong>æ¦‚å¿µ</strong>ï¼šæ— è®ºæˆåŠŸå¤±è´¥ï¼Œæˆ‘å…¨éƒ½è¦ã€‚</li>
<li><strong>çŠ¶æ€å†³å®š</strong>ï¼šæ°¸è¿œæ˜¯ <strong>fulfilled</strong>ï¼ˆåœ¨æ‰€æœ‰å®ä¾‹éƒ½ç»“æŸåï¼‰ã€‚</li>
<li><strong>åº”ç”¨åœºæ™¯</strong>ï¼šæ‰§è¡Œå¤šä¸ªäº’ä¸å½±å“çš„æ“ä½œï¼Œæœ€åç»Ÿä¸€ç»Ÿè®¡ç»“æœã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-6">äºŒã€ æ ¸å¿ƒå·®å¼‚å¯¹æ¯”è¡¨</h2>
<p>ä¸ºäº† scannabilityï¼ˆæ˜“è¯»æ€§ï¼‰ï¼Œæˆ‘ä»¬é€šè¿‡è¡¨æ ¼ç›´è§‚å¯¹æ¯”ï¼š</p>



































<table><thead><tr><th><strong>æ–¹æ³•</strong></th><th><strong>æˆåŠŸæ¡ä»¶ (Fulfilled)</strong></th><th><strong>å¤±è´¥æ¡ä»¶ (Rejected)</strong></th><th><strong>ç»“æœè¿”å›å€¼</strong></th></tr></thead><tbody><tr><td><strong><code>.all()</code></strong></td><td><strong>å…¨éƒ¨</strong>æˆåŠŸ</td><td><strong>ä»»æ„ä¸€ä¸ª</strong>å¤±è´¥</td><td>æˆåŠŸç»“æœæ•°ç»„ï¼ˆæŒ‰åºï¼‰</td></tr><tr><td><strong><code>.race()</code></strong></td><td><strong>ä»»æ„ä¸€ä¸ª</strong>æœ€å…ˆæˆåŠŸ</td><td><strong>ä»»æ„ä¸€ä¸ª</strong>æœ€å…ˆå¤±è´¥</td><td>ç¬¬ä¸€ä¸ªæ”¹å˜çŠ¶æ€çš„å€¼</td></tr><tr><td><strong><code>.any()</code></strong></td><td><strong>ä»»æ„ä¸€ä¸ª</strong>æˆåŠŸ</td><td><strong>å…¨éƒ¨</strong>å¤±è´¥</td><td>ç¬¬ä¸€ä¸ªæˆåŠŸçš„å€¼</td></tr><tr><td><strong><code>.allSettled()</code></strong></td><td><strong>æ‰€æœ‰</strong>ä»»åŠ¡ç»“æŸ</td><td>ä»ä¸ï¼ˆçŠ¶æ€æ°¸è¿œæˆåŠŸï¼‰</td><td>åŒ…å«çŠ¶æ€å’Œå€¼çš„å¯¹è±¡æ•°ç»„</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-7">ä¸‰ã€ æ€»ç»“</h2>
<h3 data-id="heading-8">1. Promise.all ä¸ Promise.race çš„ç›´è§‚åŒºåˆ«</h3>
<ul>
<li><strong>Promise.all</strong>ï¼šç…§é¡¾â€œè·‘å¾—æœ€æ…¢â€çš„ã€‚å¿…é¡»ç­‰æœ€æ…¢çš„ä¸€ä¸ªå®Œæˆï¼Œä¸”å…¨å‘˜åˆæ ¼ï¼Œæ‰ç»™æœ€ç»ˆç»“æœã€‚</li>
<li><strong>Promise.race</strong>ï¼šå…³æ³¨â€œè·‘å¾—æœ€å¿«â€çš„ã€‚æœ€å¿«çš„é‚£ä¸ªä¸€æ—¦è¿‡çº¿ï¼Œæ— è®ºè¾“èµ¢ï¼Œæ¯”èµ›ç«‹åˆ»ç»“æŸã€‚</li>
</ul>
<h3 data-id="heading-9">2.  è¿›é˜¶ä½¿ç”¨</h3>
<p>åœ¨é¡¹ç›®ä¸­ï¼Œé…åˆ <code>async/await</code> ä½¿ç”¨æ›´åŠ ä¼˜é›…ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// å¼ºç±»å‹çº¦æŸç»“æœæ•°ç»„</span>
    <span class="hljs-keyword">const</span> [user, orders] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-property">all</span>&lt;[<span class="hljs-title class_">UserType</span>, <span class="hljs-title class_">OrderType</span>[]]&gt;([
      <span class="hljs-title function_">getUserInfo</span>(),
      <span class="hljs-title function_">getOrderList</span>()
    ]);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user, orders);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// å¤„ç†ç¬¬ä¸€ä¸ªæ•è·åˆ°çš„é”™è¯¯</span>
  }
};
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è…¾è®¯äºŒé¢ï¼šå¦‚æœä½ æ˜¯ç‹è€…è£è€€çš„æ¶æ„å¸ˆï¼Œé¢å¯¹äº¿çº§åˆ«çš„æ’è¡Œæ¦œï¼Œä½ ä¼šå¦‚ä½•è®¾è®¡ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7602565408533168178</link>    <guid>https://juejin.cn/post/7602565408533168178</guid>    <pubDate>2026-02-04T07:41:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602565408533168178" data-draft-id="7602901565032431662" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è…¾è®¯äºŒé¢ï¼šå¦‚æœä½ æ˜¯ç‹è€…è£è€€çš„æ¶æ„å¸ˆï¼Œé¢å¯¹äº¿çº§åˆ«çš„æ’è¡Œæ¦œï¼Œä½ ä¼šå¦‚ä½•è®¾è®¡ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-04T07:41:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¥å¥‡å°æ±¤åœ†"/> <meta itemprop="url" content="https://juejin.cn/user/1151943919285431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è…¾è®¯äºŒé¢ï¼šå¦‚æœä½ æ˜¯ç‹è€…è£è€€çš„æ¶æ„å¸ˆï¼Œé¢å¯¹äº¿çº§åˆ«çš„æ’è¡Œæ¦œï¼Œä½ ä¼šå¦‚ä½•è®¾è®¡ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1151943919285431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¥å¥‡å°æ±¤åœ†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T07:41:36.000Z" title="Wed Feb 04 2026 07:41:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡ä»é¢è¯•çš„è§’åº¦ï¼Œè·Ÿå¤§å®¶ä¸€èµ·æ¢è®¨ä¸€ä¸‹ï¼Œå¦‚ä½•å›ç­”æ›´å¥½å‘¢ï¼Ÿ</p>
<ul>
<li>æ•°æ®åº“çš„order byä¸ºä»€ä¹ˆä¸è¡Œï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269915197%26content_type%3DArticle%26match_order%3D1%26q%3DRedis%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269915197&amp;content_type=Article&amp;match_order=1&amp;q=Redis&amp;zhida_source=entity" ref="nofollow noopener noreferrer">Redis</a>æ˜¯æ’è¡Œæ¦œçš„â€œæ‰›æŠŠå­â€ï¼Ÿ</li>
<li>Redisæ‰›äº¿çº§æ•°æ®å¯èƒ½å­˜åœ¨å“ªäº›é—®é¢˜ä»¥åŠå¯¹åº”è§£å†³æ–¹æ¡ˆ</li>
<li>å®ç°æ–¹æ¡ˆï¼šåˆ†æ²»</li>
<li>å·¨äººçš„è‚©è†€ï¼Œå‰äººè¸©è¿‡çš„å‘</li>
</ul>
<h2 data-id="heading-0">1. æ•°æ®åº“çš„order by</h2>
<p>å¾ˆå¤šå°ä¼™ä¼´ï¼Œä¸€æåˆ°æ’è¡Œæ¦œï¼Œå°±æƒ³åˆ°æ•°æ®åº“çš„order byã€‚</p>
<p>æ¯”å¦‚å¾®ä¿¡è¿åŠ¨çš„æ­¥æ•°æ’è¡Œï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94681118ab494ec8b775e4aba182e2b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770795696&amp;x-signature=zMVU5PEzZCGyQNzy%2BWJD33eNCHw%3D" alt="" loading="lazy"/></p>
<p><code>select * from user_info order by step desc</code></p>
<p>è¿™ä¸ªå®ç°æ²¡æœ‰é—®é¢˜çš„ï¼Œå¦‚æœè¡¨çš„æ•°æ®é‡å°‘çš„è¯ï¼Œåè€Œæ¨èè¿™æ ·å®ç°ã€‚å¦‚æœæ•°æ®é‡å¤šå‘¢ã€‚åˆ™å­˜åœ¨é—®é¢˜ï¼Œå°¤å…¶è¿˜æ¶‰åŠäº¿çº§çš„æ•°æ®é‡æ—¶~</p>
<blockquote>
<p>åœ¨äº¿çº§ç”¨æˆ·+é«˜å¹¶å‘å®æ—¶æ›´æ–°çš„åœºæ™¯ä¸‹ï¼Œä¼šå½»åº•å´©ç›˜ã€‚ åŸå› ä¸€å¥è¯ï¼š<strong>ç£ç›˜æ‰›ä¸ä½ï¼Œæ’åºç®—ä¸åŠ¨ï¼Œå¹¶å‘æ’‘ä¸èµ·</strong>ã€‚</p>
</blockquote>
<h2 data-id="heading-1">2.ä¸ºä»€ä¹ˆRedisæ˜¯æ’è¡Œæ¦œçš„æ‰›æŠŠå­</h2>
<p>å½“æ•°æ®é‡è¾ƒå¤§ä¸”éœ€è¦å®æ—¶æ›´æ–°å¹¶é¢‘ç¹æŸ¥è¯¢æ—¶ï¼Œä½¿ç”¨ Redis çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269915197%26content_type%3DArticle%26match_order%3D1%26q%3Dzset%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269915197&amp;content_type=Article&amp;match_order=1&amp;q=zset&amp;zhida_source=entity" ref="nofollow noopener noreferrer">zset</a>æœ‰åºé›†åˆæ›´ä¸ºé€‚åˆã€‚</p>
<p><code>zset</code>æ˜¯<code>Redis</code>æä¾›çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒç±»ä¼¼äºé›†åˆï¼ˆsetï¼‰ï¼Œä½†æ¯ä¸ªæˆå‘˜éƒ½å…³è”ç€ä¸€ä¸ªåˆ†æ•°ï¼ˆ<code>score</code>ï¼‰ï¼ŒRedis ä½¿ç”¨è¿™ä¸ªåˆ†æ•°æ¥å¯¹é›†åˆä¸­çš„æˆå‘˜è¿›è¡Œæ’åºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb866734b7b744aaa020fe968f455d23~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We5aWH5bCP5rGk5ZyG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770795696&amp;x-signature=TduHGCU6hL1xsLAilwYqLkSR0g8%3D" alt="" loading="lazy"/></p>
<p>ä¸ä»…ä»…æ˜¯redisçš„zsetæ”¯æŒæ’åºï¼ŒAPIç®€å•æ˜“ç”¨ï¼Œè¿˜å› ä¸ºredisçš„æ’åºå¿«ã€å¯æ‰©å±•æ€§å¼ºã€èƒ½è½»æ¾åº”å¯¹é«˜å¹¶å‘ã€‚</p>
<h3 data-id="heading-2">2.1 redisæ’åºå¿«</h3>
<p>Redis çš„æ•°æ®å…¨æ”¾å†…å­˜ï¼Œé¿å…ç£ç›˜è¯»å†™ï¼Œæ ¸å¿ƒæ“ä½œç§’å›ï¼š</p>
<ul>
<li>æ›´æ–°åˆ†æ•°ï¼ˆZADDï¼‰â†’ å¿«å¦‚é—ªç”µ</li>
<li>æŸ¥æ’åï¼ˆZREVRANKï¼‰â†’ æ¯«ç§’å“åº”</li>
<li>æŸ¥Top 100ï¼ˆZREVRANGEï¼‰â†’ ç¬é—´å‡ºç»“æœ</li>
</ul>
<p>ä»¥ä¸‹ä¸º Redis vs MySQL æ€§èƒ½å¯¹æ¯”ï¼ˆäº¿çº§æ•°æ®ï¼‰</p>
<h3 data-id="heading-3">2.2 å¯æ‰©å±•æ€§å¼º</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269915197%26content_type%3DArticle%26match_order%3D1%26q%3D%25E5%2588%2586%25E7%2589%2587%25E5%25AD%2598%25E5%2582%25A8%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269915197&amp;content_type=Article&amp;match_order=1&amp;q=%E5%88%86%E7%89%87%E5%AD%98%E5%82%A8&amp;zhida_source=entity" ref="nofollow noopener noreferrer">åˆ†ç‰‡å­˜å‚¨</a>è½»æ¾åº”å¯¹äº¿çº§æ•°æ®ã€‚</p>
<p>Redisé€šè¿‡<strong>åˆ†ç‰‡å­˜å‚¨å°†æ•°æ®æ‹†åˆ†åˆ°å¤šä¸ªå®ä¾‹</strong>ï¼Œå¦‚åŒæŠŠ1äº¿ç”¨æˆ·åˆ†é…åˆ°10ä¸ªå°æ•°æ®åº“ï¼Œæ¯ä¸ªåªéœ€å¤„ç†1000ä¸‡æ•°æ®ï¼Œè½»æ¾å®ç°ï¼š</p>
<ul>
<li>1ï¸âƒ£ çº¿æ€§æ‰©å±•ï¼šåŠ æœºå™¨å°±èƒ½æå‡å®¹é‡å’Œæ€§èƒ½</li>
<li>2ï¸âƒ£ å‹åŠ›åˆ†æ•£ï¼šè¯»å†™è¯·æ±‚åˆ†æ‘Šåˆ°ä¸åŒåˆ†ç‰‡ï¼Œé¿å…å•ç‚¹ç“¶é¢ˆ</li>
<li>3ï¸âƒ£ ç‹¬ç«‹æ‰©å®¹ï¼šçƒ­ç‚¹åˆ†ç‰‡å¯å•ç‹¬å‡çº§é…ç½®ï¼Œä¸å¹²æ‰°å…¶ä»–èŠ‚ç‚¹</li>
</ul>
<p>ç±»æ¯”ç†è§£ï¼š</p>
<blockquote>
<p>æŠŠä¸€ä»“åº“è´§ç‰©ï¼ˆæ•°æ®ï¼‰åˆ†è£…åˆ°10è¾†å¡è½¦ï¼ˆåˆ†ç‰‡ï¼‰ï¼Œæ¯è¾†è½¦åªè¿1/10çš„è´§ï¼Œè£…å¸é€Ÿåº¦è‡ªç„¶å¿«10å€ï¼</p>
</blockquote>
<h3 data-id="heading-4">2.3 è½»æ¾åº”å¯¹é«˜å¹¶å‘</h3>
<p>Redisç”¨**å†…å­˜æ“ä½œ+å•çº¿ç¨‹+<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269915197%26content_type%3DArticle%26match_order%3D1%26q%3DIO%25E5%25A4%259A%25E8%25B7%25AF%25E5%25A4%258D%25E7%2594%25A8%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269915197&amp;content_type=Article&amp;match_order=1&amp;q=IO%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8&amp;zhida_source=entity" ref="nofollow noopener noreferrer">IOå¤šè·¯å¤ç”¨</a>**ä¸‰æŠŠåˆ©å‰‘ï¼Œè½»æ¾åˆ‡å¼€é«˜å¹¶å‘å¤§å±±ï¼š</p>
<ul>
<li>1ï¸âƒ£ å†…å­˜é—ªç”µè¯»å†™ï¼šæ•°æ®å…¨æ”¾å†…å­˜ï¼Œæ¯”ç£ç›˜å¿«10ä¸‡å€</li>
<li>2ï¸âƒ£ å•çº¿ç¨‹æ— é”ï¼šé¿å…å¤šçº¿ç¨‹åˆ‡æ¢æŸè€—ï¼ŒåŸå­æ“ä½œä¸æ€•å¹¶å‘å†²çª</li>
<li>3ï¸âƒ£ IOå¤šè·¯å¤ç”¨ï¼šä¸€ä¸ªçº¿ç¨‹ç›‘å¬ä¸‡ä¸ªè¿æ¥ï¼Œåƒé“¶è¡Œè¶…çº§æŸœå‘˜åŒæ—¶å¤„ç†å¤šçª—å£ä¸šåŠ¡</li>
</ul>
<p><strong>ç”°èºå“¥æ‰“ä¸ªæ¯”å–»å§</strong>ï¼š</p>
<p>Rediså°±åƒä¸€ä¸ª<strong>è¶…é«˜æ•ˆå¿«é¤çª—å£</strong>ï¼š</p>
<ul>
<li><strong>åªå–é¢„åˆ¶èœï¼ˆå†…å­˜æ•°æ®ï¼‰</strong> â†’ å‡ºé¤å¿«</li>
<li><strong>ä¸€ä¸ªæ”¶é“¶å‘˜ä¸“æ³¨æ‰“å•ï¼ˆå•çº¿ç¨‹ï¼‰</strong> â†’ ä¸æ‰‹å¿™è„šä¹±</li>
<li><strong>æ™ºèƒ½å«å·å™¨ç®¡ç†æ’é˜Ÿï¼ˆIOå¤šè·¯å¤ç”¨ï¼‰</strong> â†’ åƒäººæ’é˜Ÿä¹Ÿèƒ½å¿«é€Ÿå“åº”</li>
</ul>
<p>æ®æœ‰å…³æµ‹è¯•è¯æ˜ï¼Œ<strong>å•æœºRediså¯æ‰›10ä¸‡+ QPSï¼Œåˆ†ç‰‡é›†ç¾¤è½»æ¾çªç ´ç™¾ä¸‡çº§å¹¶å‘</strong>ã€‚</p>
<h2 data-id="heading-5">3.Redisæ‰›äº¿çº§æ•°æ®å¯èƒ½å­˜åœ¨å“ªäº›é—®é¢˜ä»¥åŠå¯¹åº”è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-6">3.1 çƒ­Keyé—®é¢˜</h3>
<p>æ¯”å¦‚â€œå…¨æœTOP100â€æ¦œå•ï¼Œå®¹æ˜“é€ å°±çƒ­ç‚¹keyé—®é¢˜ã€‚</p>
<blockquote>
<p>å…¨æœç©å®¶é¢‘ç¹æŸ¥è¯¢ ZREVRANGE leaderboard 0 99ï¼ˆè·å–Top 100ï¼‰ï¼Œå¯¼è‡´æ‰€æœ‰è¯·æ±‚é›†ä¸­è®¿é—® åŒä¸€ä¸ªKeyï¼ˆleaderboardï¼‰ã€‚å®¹æ˜“å¯¼è‡´å•åˆ†ç‰‡CPUå’Œå¸¦å®½è¢«æ‰“æ»¡ï¼ˆå‡è®¾æ•°æ®åˆ†ç‰‡ä¸å‡åŒ€ï¼‰ã€‚æç«¯æƒ…å†µä¸‹Rediså®ä¾‹å´©æºƒï¼Œå…¨æœæ’è¡Œæ¦œç˜«ç—ª</p>
</blockquote>
<p>å¯ä»¥é€šè¿‡è¿™äº›æ–¹å¼è§£å†³ï¼š</p>
<ul>
<li>1.<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269915197%26content_type%3DArticle%26match_order%3D1%26q%3D%25E5%25A4%259A%25E7%25BA%25A7%25E7%25BC%2593%25E5%25AD%2598%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269915197&amp;content_type=Article&amp;match_order=1&amp;q=%E5%A4%9A%E7%BA%A7%E7%BC%93%E5%AD%98&amp;zhida_source=entity" ref="nofollow noopener noreferrer">å¤šçº§ç¼“å­˜</a>ï¼ˆRedis + jvmæœ¬åœ°ç¼“å­˜ï¼‰</li>
</ul>
<blockquote>
<ul>
<li>è¯·æ±‚ä¼˜å…ˆè¯»æœ¬åœ°å†…å­˜ç¼“å­˜</li>
<li>ç¼“å­˜æœªå‘½ä¸­æ—¶è¯»Redisé›†ç¾¤</li>
<li>Redisé›†ç¾¤å†…éƒ¨ç¼“å­˜Top 100ï¼ˆè®¾ç½®æ›´çŸ­TTLï¼‰</li>
</ul>
</blockquote>
<ul>
<li>è¯»å†™åˆ†ç¦» + ä»åº“è´Ÿè½½å‡è¡¡</li>
</ul>
<blockquote>
<p>ä¸»åº“å¤„ç†å†™è¯·æ±‚ï¼ˆæ›´æ–°åˆ†æ•°ï¼‰ã€‚å¤šä¸ªä»åº“è½®è¯¢å¤„ç†è¯»è¯·æ±‚ï¼ˆæŸ¥Top 100ï¼‰</p>
</blockquote>
<ul>
<li>åˆ†ç‰‡Keyè®¾è®¡</li>
</ul>
<blockquote>
<p>æ“ä½œï¼šå°†æ’è¡Œæ¦œæŒ‰åˆ†æ•°åŒºé—´æ‹†åˆ†æˆå¤šä¸ªKeyï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>leaderboard:top1ï¼ˆå‰100åï¼‰</li>
<li>leaderboard:top2ï¼ˆ101~1000åï¼‰</li>
<li>leaderboard:restï¼ˆå…¶ä»–ç”¨æˆ·ï¼‰</li>
</ul>
<p>æŸ¥è¯¢é€»è¾‘ï¼šæŸ¥Top 100æ—¶ï¼Œåªéœ€è®¿é—® leaderboard:top1ã€‚</p>
</blockquote>
<h3 data-id="heading-7">3.2 å†…å­˜çˆ†ç‚¸</h3>
<blockquote>
<p>å­˜å‚¨1äº¿ç”¨æˆ·ï¼Œè‹¥æ¯ä¸ªé”®å 32å­—èŠ‚ï¼ˆå¦‚ user:123ï¼‰ï¼Œä»…é”®å°±éœ€çº¦3.2GBï¼ŒåŠ ä¸Šåˆ†æ•°å’ŒæŒ‡é’ˆï¼Œå†…å­˜å‹åŠ›å·¨å¤§ã€‚</p>
</blockquote>
<p>ä¼˜åŒ–æ–¹æ¡ˆï¼š</p>
<ul>
<li><strong>ç¼©çŸ­é”®å</strong>ï¼šå°† user:123 è½¬æ¢ä¸ºæ•´æ•°ï¼ˆå¦‚123ï¼‰ï¼Œåˆ©ç”¨ Redis çš„ int ç¼–ç ä¼˜åŒ–å†…å­˜ã€‚</li>
<li><strong>åˆ†ç‰‡å­˜å‚¨</strong>ï¼šæŒ‰ç”¨æˆ·IDå“ˆå¸Œåˆ†ç‰‡åˆ°å¤šä¸ª Redis å®ä¾‹ï¼Œåˆ†æ•£å‹åŠ›ã€‚</li>
</ul>
<h3 data-id="heading-8">3.3 æ•°æ®æŒä¹…åŒ–é£é™©</h3>
<blockquote>
<p>Redis å®•æœºå¯èƒ½å¯¼è‡´æœ€æ–°æ•°æ®ä¸¢å¤±ï¼ˆå³ä½¿å¼€å¯AOFï¼Œé»˜è®¤æ¯ç§’åŒæ­¥ä¸€æ¬¡ï¼‰ã€‚</p>
</blockquote>
<p>å®¹ç¾æ–¹æ¡ˆï¼š</p>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269915197%26content_type%3DArticle%26match_order%3D1%26q%3D%25E5%25BC%2582%25E6%25AD%25A5%25E5%258F%258C%25E5%2586%2599%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269915197&amp;content_type=Article&amp;match_order=1&amp;q=%E5%BC%82%E6%AD%A5%E5%8F%8C%E5%86%99&amp;zhida_source=entity" ref="nofollow noopener noreferrer">å¼‚æ­¥åŒå†™</a>ï¼šæ›´æ–°åˆ†æ•°æ—¶ï¼ŒåŒæ­¥å†™å…¥ Kafkaï¼Œç”±æ¶ˆè´¹è€…å¼‚æ­¥è½åº“ MySQLï¼Œç”¨äºæ•…éšœæ¢å¤ã€‚</p>
</li>
<li>
<p>æ··åˆæŒä¹…åŒ–ï¼šå¼€å¯ RDB + AOFï¼Œå¹³è¡¡æ¢å¤é€Ÿåº¦ä¸æ•°æ®å®Œæ•´æ€§ã€‚</p>
</li>
</ul>
<h2 data-id="heading-9">4. å®ç°æ–¹æ¡ˆï¼šåˆ†æ²»</h2>
<p>æ¯”å¦‚æˆ‘ä»¬è¦æŸ¥è¯¢ç‹è€…è£è€€å·…å³°èµ›çš„å‰ä¸€ç™¾ç§¯åˆ†çš„ç©å®¶ã€‚ï¼ˆå…¶å®å°±æ˜¯ä¸€ä¸ªTOP Né—®é¢˜ï¼‰</p>
<p>æˆ‘ä»¬å¯ä»¥æŒ‰ç…§è¿™ç§æ€è·¯ï¼š</p>
<ul>
<li>æŒ‰åŒºé—´æ‹†åˆ†</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhida.zhihu.com%2Fsearch%3Fcontent_id%3D269915197%26content_type%3DArticle%26match_order%3D1%26q%3D%25E5%258A%25A8%25E6%2580%2581%25E8%25B7%25AF%25E7%2594%25B1%26zhida_source%3Dentity" target="_blank" title="https://zhida.zhihu.com/search?content_id=269915197&amp;content_type=Article&amp;match_order=1&amp;q=%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1&amp;zhida_source=entity" ref="nofollow noopener noreferrer">åŠ¨æ€è·¯ç”±</a></li>
<li>èšåˆæŸ¥è¯¢</li>
</ul>
<h3 data-id="heading-10">4.1. æŒ‰åŒºé—´æ‹†åˆ†ï¼šæŠŠæ’è¡Œæ¦œåˆ‡æˆå°å—è›‹ç³•**</h3>
<p><strong>æ€ä¹ˆæ‹†ï¼Ÿ</strong></p>
<ul>
<li>é«˜åˆ†ç©å®¶æ”¾ã€Œé‡‘ç›˜å­ã€ï¼š2500åˆ†ä»¥ä¸Š â†’<code>rank:2500_2600</code></li>
<li>ä¸­åˆ†ç©å®¶æ”¾ã€Œé“¶ç›˜å­ã€ï¼š2400~2500åˆ† â†’<code>rank:2400_2500</code></li>
<li>ä½åˆ†ç©å®¶ä¸¢ã€Œå¤§é”…ã€ï¼š0~2400åˆ† â†’<code>rank:0_2400</code></li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆå¿«ï¼Ÿ</strong></p>
<ul>
<li>æŸ¥Top 100åªéœ€ç¿»ã€Œé‡‘ç›˜å­ã€ï¼Œä¸ç”¨æ…åŠ¨æ•´ä¸ªå¤§é”…ï¼</li>
<li>ç›˜å­è¶Šå° â†’ ç¿»æ‰¾é€Ÿåº¦è¶Šå¿«</li>
</ul>
<h3 data-id="heading-11">4.2 åŠ¨æ€è·¯ç”±ï¼šç©å®¶æ¢åŒºè‡ªåŠ¨å¯¼èˆª</h3>
<p><strong>æ€ä¹ˆåŠ¨ï¼Ÿ</strong></p>
<ul>
<li>ç©å®¶ç§¯åˆ†å˜åŒ–æ—¶ï¼Œ<strong>è‡ªåŠ¨æ£€æµ‹è¯¥å»å“ª</strong>ï¼š</li>
</ul>
<p><code># ä¼ªä»£ç ï¼š2503åˆ†è¯¥æ”¾å“ªä¸ªåŒºé—´ï¼Ÿ if2500 &lt;= new_score &lt; 2600: æ‰”è¿› rank:2500_2600 elif2400 &lt;= new_score &lt; 2500: æ‰”è¿› rank:2400_2500</code></p>
<h3 data-id="heading-12">4.3 èšåˆæŸ¥è¯¢ï¼šæ‹¼å›¾å¼åˆå¹¶ç»“æœ</h3>
<p><strong>æ€ä¹ˆæ‹¼ï¼Ÿ</strong></p>
<ol>
<li>ä»é«˜åˆ°ä½ç¿»ç›˜å­ï¼š</li>
</ol>
<ul>
<li>å…ˆæŸ¥ã€Œé‡‘ç›˜å­ã€â†’ æ‹¿åˆ°å‰50å</li>
<li>ä¸å¤Ÿ100ï¼Ÿå†æŸ¥ã€Œé“¶ç›˜å­ã€â†’ è¡¥50å</li>
</ul>
<ol>
<li>å…¨å±€æ’åºï¼š</li>
</ol>
<ul>
<li>æŠŠä¸¤ä¸ªç›˜å­çš„100äººæŒ‰åˆ†æ•°é‡æ–°æ’åº§æ¬¡</li>
</ul>
<h2 data-id="heading-13">5. å·¨äººçš„è‚©è†€ï¼Œå‰äººè¸©è¿‡çš„å‘</h2>
<ul>
<li><strong>æ…ç”¨ZREVRANGEç±»å…¨é‡æ“ä½œ</strong></li>
</ul>
<blockquote>
<p>ç›´æ¥ä½¿ç”¨ZREVRANGEè·å–Top Næ—¶ï¼Œè‹¥æ•°æ®é‡è¿‡å¤§ï¼ˆå¦‚1äº¿ç”¨æˆ·ï¼‰ï¼Œä¼šè§¦å‘O(N)å¤æ‚åº¦éå†ï¼Œå¯¼è‡´Redisçº¿ç¨‹é˜»å¡</p>
</blockquote>
<ul>
<li><strong>è­¦æƒ•é»‘é©¬ç”¨æˆ·å†²å‡»åˆ†ç‰‡ç­–ç•¥</strong></li>
</ul>
<blockquote>
<p>çªç„¶å‡ºç°çš„é«˜åˆ†ç”¨æˆ·ï¼ˆå¦‚ç§¯åˆ†æš´æ¶¨è‡³å‰0.1%ï¼‰å¯èƒ½æ‰“ä¹±åŸæœ‰åˆ†ç‰‡è§„åˆ™ï¼Œå¯¼è‡´æ•°æ®é›†ä¸­åœ¨æŸä¸ªåˆ†ç‰‡å¼•å‘çƒ­ç‚¹ã€‚</p>
</blockquote>
<ul>
<li><strong>å†…å­˜çˆ†ç‚¸ä¸æ€§èƒ½æŠ–åŠ¨</strong></li>
</ul>
<blockquote>
<p>äº¿çº§ç”¨æˆ·å­˜å‚¨å ç”¨å†…å­˜è¶…é™ï¼Œä¸”RDB/AOFæŒä¹…åŒ–æ—¶forkå­è¿›ç¨‹å¼•å‘å†…å­˜ç¿»å€ã€‚</p>
</blockquote>
<ul>
<li><strong>æ•°æ®è¿ç§»é˜»å¡æœåŠ¡</strong></li>
</ul>
<blockquote>
<p>ç”¨æˆ·ç§¯åˆ†è·¨åˆ†ç‰‡è¿ç§»æ—¶ï¼Œè‹¥æœªåŸå­æ“ä½œå¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±æˆ–é‡å¤ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[iOS å¦‚ä½•ç»•è¿‡ ATS å‘é€è¯·æ±‚ï¼ŒiOSè°ƒè¯•]]></title>    <link>https://juejin.cn/post/7602579671475322899</link>    <guid>https://juejin.cn/post/7602579671475322899</guid>    <pubDate>2026-02-04T07:54:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602579671475322899" data-draft-id="7602543146237050923" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="iOS å¦‚ä½•ç»•è¿‡ ATS å‘é€è¯·æ±‚ï¼ŒiOSè°ƒè¯•"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-04T07:54:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼€å¿ƒå°±å¥½2025"/> <meta itemprop="url" content="https://juejin.cn/user/3850962908492660"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            iOS å¦‚ä½•ç»•è¿‡ ATS å‘é€è¯·æ±‚ï¼ŒiOSè°ƒè¯•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3850962908492660/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼€å¿ƒå°±å¥½2025
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T07:54:19.000Z" title="Wed Feb 04 2026 07:54:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨è°ƒè¯• iOS ç½‘ç»œé—®é¢˜æ—¶ï¼Œä¸€å¼€å§‹å¹¶ä¸ä¼šæƒ³åˆ° ATS ç»•è¿‡ã€‚
ä¸€èˆ¬æ˜¯æ¥è‡ªä¸€ä¸ªå¯å¤ç°çš„ç°è±¡ï¼Œ<strong>è¯·æ±‚æ ¹æœ¬æ²¡æœ‰åˆ°è¾¾æœåŠ¡å™¨</strong>ï¼Œè¿™æ—¶å€™æˆ‘ä»¬æ‰ä¼šå»å¤„ç† ATSã€‚</p>
<p>æ¯”å¦‚ï¼Œå½“ä½ åœ¨æœåŠ¡ç«¯åå°çœ‹ä¸åˆ°è®¿é—®è®°å½•ï¼Œè€Œå®¢æˆ·ç«¯æ‰‹æœºappåˆæ²¡æœ‰æ˜ç¡®æŠ¥é”™ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>å…ˆç¡®è®¤é˜»æ–­å‘ç”Ÿåœ¨å“ªä¸€å±‚</strong></h2>
<p>ATS çš„æ‹¦æˆªå‘ç”Ÿåœ¨å®¢æˆ·ç«¯ç½‘ç»œæ ˆå†…éƒ¨ã€‚
åœ¨ç»§ç»­ä¹‹å‰ï¼Œéœ€è¦å…ˆåˆ¤æ–­<strong>è¯·æ±‚æ˜¯å¦å·²ç»ç¦»å¼€è®¾å¤‡</strong>ã€‚</p>
<p>ä¸€ä¸ªç®€å•çš„éªŒè¯æ–¹å¼æ˜¯åˆ‡æ–­ç½‘ç»œï¼š</p>
<ul>
<li>å…³é—­ Wi-Fi / èœ‚çªç½‘ç»œ</li>
<li>è§¦å‘ App çš„ç›®æ ‡æ“ä½œ</li>
<li>è§‚å¯Ÿ UI æ˜¯å¦å‡ºç°åŠ è½½å¤±è´¥æˆ–è¶…æ—¶æç¤º</li>
</ul>
<p>å¦‚æœåœ¨ç½‘ç»œå…³é—­çŠ¶æ€ä¸‹è¡¨ç°ä¸€è‡´ï¼Œè¯´æ˜å½“å‰æ“ä½œå¹¶æœªè§¦å‘ç½‘ç»œè¯·æ±‚ã€‚
å¦‚æœè¡¨ç°å‘ç”Ÿå˜åŒ–ï¼Œè¯´æ˜è¯·æ±‚ç¡®å®å­˜åœ¨ï¼Œä¸‹ä¸€æ­¥æ‰æœ‰æ„ä¹‰ã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>ä½¿ç”¨ä»£ç†å·¥å…·ç¡®è®¤ ATS æ˜¯å¦é˜»æ–­åœ¨ HTTPS å»ºè¿å‰</strong></h2>
<p>å½“è¯·æ±‚å­˜åœ¨æ—¶ï¼Œå¯ä»¥å…ˆç”¨ä»£ç†å·¥å…·éªŒè¯æ˜¯å¦èµ°ç³»ç»Ÿç½‘ç»œã€‚</p>
<h3 data-id="heading-2">ä»£ç†éªŒè¯æ­¥éª¤</h3>
<ul>
<li>åœ¨ç”µè„‘ä¸Šå¯åŠ¨ä»£ç†å·¥å…·ï¼ˆå¦‚ Charles / Fiddlerï¼‰</li>
<li>iPhone ä¸ç”µè„‘å¤„äºåŒä¸€å±€åŸŸç½‘</li>
<li>åœ¨ Wi-Fi è®¾ç½®ä¸­é…ç½®ä»£ç†åœ°å€å’Œç«¯å£</li>
<li>åœ¨ iOS ä¸Šå®‰è£…å¹¶ä¿¡ä»»ä»£ç†è¯ä¹¦</li>
<li>ç”¨ Safari è®¿é—®ä¸€ä¸ª HTTPS é¡µé¢</li>
</ul>
<p>å¦‚æœ Safari è¯·æ±‚èƒ½è¢«å®Œæ•´æŠ“å–ï¼Œè¯´æ˜ï¼š</p>
<ul>
<li>ç³»ç»Ÿä»£ç†ç”Ÿæ•ˆ</li>
<li>HTTPS è§£å¯†å¯ç”¨</li>
</ul>
<p>æ­¤æ—¶å†è§¦å‘ App è¯·æ±‚ï¼Œè§‚å¯Ÿä»£ç†å·¥å…·ä¸­çš„è¡Œä¸ºã€‚</p>
<hr/>
<h2 data-id="heading-3"><strong>ä»£ç†ä¸­æ²¡æœ‰ App è¯·æ±‚ï¼Œæ„å‘³ç€ä»€ä¹ˆ</strong></h2>
<p>å½“ Safari æµé‡å¯è§ï¼Œè€Œ App å®Œå…¨æ²¡æœ‰ä»»ä½•è®°å½•æ—¶ï¼Œå¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®ºï¼š</p>
<p><strong>è¯¥ App çš„ç½‘ç»œè¯·æ±‚æ²¡æœ‰ç»è¿‡ç³»ç»Ÿä»£ç†ã€‚</strong></p>
<p>åœ¨ ATS åœºæ™¯ä¸­ï¼Œè¿™ç§æƒ…å†µå¸¸è§äºï¼š</p>
<ul>
<li>App ä½¿ç”¨è‡ªå®šä¹‰ç½‘ç»œæ ˆ</li>
<li>SDK å†…éƒ¨ç»•è¿‡ç³»ç»Ÿç½‘ç»œé…ç½®</li>
<li>ATS ç›´æ¥åœ¨ App å†…éƒ¨é˜»æ–­äº†è¯·æ±‚åˆ›å»º</li>
</ul>
<p>ç»§ç»­åœ¨ä»£ç†å·¥å…·ä¸­è°ƒæ•´è®¾ç½®ï¼Œå¹¶ä¸ä¼šæ”¹å˜è¿™ä¸ªç»“æœã€‚</p>
<hr/>
<h2 data-id="heading-4"><strong>ç”¨æ•°æ®æµç¡®è®¤è¯·æ±‚æ˜¯å¦è¢« ATS é˜»æ–­</strong></h2>
<p>åœ¨æ”¾å¼ƒä»£ç†ä¹‹å‰ï¼Œå¯ä»¥ä½¿ç”¨ç½‘ç»œå±‚å·¥å…·ç¡®è®¤æ˜¯å¦å­˜åœ¨åº•å±‚é€šä¿¡ã€‚</p>
<p>è§‚å¯Ÿä»¥ä¸‹ç°è±¡å³å¯åˆ¤æ–­ï¼š</p>
<ul>
<li>æ˜¯å¦æœ‰ DNS æŸ¥è¯¢</li>
<li>æ˜¯å¦æœ‰ TCP å»ºè¿</li>
<li>æ˜¯å¦æœ‰ TLS ClientHello</li>
</ul>
<p>å¦‚æœè¿™äº›éƒ½ä¸å­˜åœ¨ï¼Œè¯´æ˜è¯·æ±‚åœ¨<strong>åˆ›å»ºé˜¶æ®µ</strong>å°±è¢«æ‹¦æˆªï¼ŒATS ä»ç„¶æ˜¯ä¸»è¦æ€€ç–‘å¯¹è±¡ã€‚</p>
<hr/>
<h2 data-id="heading-5"><strong>åœ¨è‡ªæœ‰ App ä¸­å¤„ç† ATS çš„å®é™…è·¯å¾„</strong></h2>
<p>åœ¨ä½ æœ‰ App æ§åˆ¶æƒçš„å‰æä¸‹ï¼ŒATS çš„å¤„ç†æ–¹å¼å¹¶ä¸å¤æ‚ï¼Œä½†éœ€è¦æ˜ç¡®ä¿®æ”¹ä½ç½®ã€‚</p>
<h3 data-id="heading-6">å¸¸è§æ“ä½œè·¯å¾„</h3>
<ul>
<li>æ‰“å¼€é¡¹ç›®çš„ <code>Info.plist</code></li>
<li>æ£€æŸ¥ <code>NSAppTransportSecurity</code> é…ç½®</li>
<li>ç¡®è®¤æ˜¯å¦å­˜åœ¨ä»¥ä¸‹é¡¹ï¼š
<ul>
<li><code>NSAllowsArbitraryLoads</code></li>
<li><code>NSExceptionDomains</code></li>
</ul>
</li>
</ul>
<p>ä¿®æ”¹å®Œæˆåï¼Œé‡æ–°æ„å»ºå¹¶å®‰è£… Appï¼Œå†æ¬¡è§¦å‘ç½‘ç»œè¯·æ±‚ã€‚</p>
<p>è¿™ä¸€æ­¥çš„éªŒè¯æ ‡å‡†å¾ˆæ˜ç¡®ï¼š
<strong>ä¹‹å‰å®Œå…¨æ²¡æœ‰ç½‘ç»œè¡Œä¸ºçš„è¯·æ±‚ï¼Œæ˜¯å¦å¼€å§‹å»ºç«‹è¿æ¥ã€‚</strong></p>
<hr/>
<h2 data-id="heading-7"><strong>ATS æ”¾å¼€åï¼Œå¦‚ä½•ç¡®è®¤ HTTPS æ•°æ®æ˜¯å¦å®Œæ•´</strong></h2>
<p>å½“è¯·æ±‚å¼€å§‹å‘å‡ºåï¼Œä¸‹ä¸€æ­¥æ˜¯ç¡®è®¤æ˜¯å¦èƒ½æŠ“åˆ° HTTPS æ•°æ®ã€‚</p>
<p>å¦‚æœä»£ç†å·¥å…·èƒ½çœ‹åˆ° App è¯·æ±‚å¹¶æˆåŠŸè§£å¯†ï¼Œè¯´æ˜ï¼š</p>
<ul>
<li>ATS å·²ä¸å†é˜»æ–­</li>
<li>HTTPS æ ¡éªŒå…è®¸ä¸­é—´äººä»‹å…¥</li>
</ul>
<p>å¦‚æœä»£ç†ä»ç„¶æŠ“ä¸åˆ°ï¼Œä½†æ•°æ®å±‚å‡ºç°è¿æ¥ï¼Œå¯ä»¥åˆ‡æ¢æŠ“åŒ…è·¯å¾„ã€‚</p>
<hr/>
<h2 data-id="heading-8"><strong>è®¾å¤‡çº§æŠ“åŒ…ç”¨äºç»•è¿‡ä»£ç†è·¯å¾„é™åˆ¶</strong></h2>
<p>å½“ ATS å·²æ”¾å¼€ï¼Œä½† App ä»ä¸èµ°ç³»ç»Ÿä»£ç†æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è®¾å¤‡æŠ“åŒ…å·¥å…·ã€‚</p>
<h3 data-id="heading-9">ä½¿ç”¨æŠ“åŒ…å¤§å¸ˆï¼ˆSniff Masterï¼‰çš„è®¾å¤‡æŠ“åŒ…</h3>
<p>åœ¨ iOS è®¾å¤‡é€šè¿‡ USB è¿æ¥ç”µè„‘çš„æƒ…å†µä¸‹ï¼š</p>
<ul>
<li>é€‰æ‹©å¯¹åº”çš„ iOS è®¾å¤‡</li>
<li>æŒ‰æç¤ºå®Œæˆé©±åŠ¨ä¸æè¿°æ–‡ä»¶å®‰è£…</li>
<li>è¿›å…¥ HTTPS æš´åŠ›æŠ“åŒ…ç›¸å…³æ¨¡å¼</li>
<li>å¯åŠ¨æŠ“åŒ…å¹¶è§¦å‘ App ç½‘ç»œè¯·æ±‚</li>
</ul>
<p>è¿™ä¸€æ¨¡å¼ä¸ä¾èµ– Wi-Fi ä»£ç†ï¼Œä¹Ÿä¸è¦æ±‚åœ¨æ‰‹æœºä¸Šä¿¡ä»»æŠ“åŒ…è¯ä¹¦ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/706a9441544b4795bec692e3c41aa0d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5b-D5bCx5aW9MjAyNQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770796461&amp;x-signature=gyb5Mk54ICU40pHMsDZf6aOAzes%3D" alt="é€‰æ‹©httpsæš´åŠ›æŠ“åŒ…" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-10"><strong>é€šè¿‡ App çº§ç­›é€‰å‡å°‘å¹²æ‰°</strong></h2>
<p>è®¾å¤‡çº§æŠ“åŒ…ä¼šåŒ…å«å¤§é‡ç³»ç»Ÿè¯·æ±‚ã€‚</p>
<p>åœ¨æŠ“åŒ…å¤§å¸ˆä¸­ï¼š</p>
<ul>
<li>ä½¿ç”¨ã€Œé€‰æ‹© Appã€åŠŸèƒ½</li>
<li>ä»…ä¿ç•™ç›®æ ‡åº”ç”¨çš„æ•°æ®</li>
<li>å†æ¬¡è§¦å‘è¯·æ±‚</li>
</ul>
<p>è¿™æ ·å¯ä»¥å¿«é€Ÿå®šä½ä¸šåŠ¡æ¥å£ï¼Œè€Œä¸æ˜¯åœ¨ç³»ç»Ÿæµé‡ä¸­æ‰‹åŠ¨ç­›é€‰ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3ddc8663c8740c2b57d9a1cc8e9d2b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5b-D5bCx5aW9MjAyNQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770796461&amp;x-signature=9xrP7ceOvf%2B%2BcNVtyb7HNyhdNPE%3D" alt="appé€‰æ‹©" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-11"><strong>åˆ¤æ–­æ•°æ®ä¸å®Œæ•´çš„åŸå› </strong></h2>
<p>åœ¨æŠ“åŒ…ç»“æœä¸­ï¼Œå¦‚æœå‡ºç°ä»¥ä¸‹ç°è±¡ï¼š</p>
<ul>
<li>URL ä¸ Header å¯è§</li>
<li>è¯·æ±‚ä½“æˆ–å“åº”ä½“ä¸ºç©º</li>
</ul>
<p>è¯´æ˜ HTTPS å·²è¢«æ•è·ï¼Œä½† App å¹¶æœªä½¿ç”¨ iOS å¼€å‘è¯ä¹¦ç­¾åã€‚</p>
<p>è¿™ç±»æƒ…å†µéœ€è¦ï¼š</p>
<ul>
<li>è·å– IPA</li>
<li>ä½¿ç”¨ iOS å¼€å‘è¯ä¹¦é‡æ–°ç­¾å</li>
<li>å¦‚ IPA åŠ å¯†ï¼Œå…ˆå®Œæˆè„±å£³</li>
<li>å®‰è£…é‡ç­¾åçš„ App</li>
<li>é‡æ–°è¿›è¡ŒæŠ“åŒ…</li>
</ul>
<p>å®Œæˆåï¼Œæ•°æ®å³å¯å®Œæ•´æ˜¾ç¤ºã€‚</p>
<hr/>
<h2 data-id="heading-12"><strong>æ‹¦æˆªä¸ä¿®æ”¹çš„ä¸Šé™</strong></h2>
<p>éœ€è¦æ˜ç¡®çš„æ˜¯ï¼š</p>
<ul>
<li><strong>è¯·æ±‚ / å“åº”æ‹¦æˆªå™¨ä»…å­˜åœ¨äºä»£ç†æŠ“åŒ…æ¨¡å¼</strong></li>
<li>è®¾å¤‡çº§ HTTPS æŠ“åŒ…åªè´Ÿè´£é‡‡é›†ä¸è§£å¯†</li>
<li>åœ¨éœ€è¦ä¿®æ”¹è¯·æ±‚æˆ–å“åº”æ—¶ï¼Œå¿…é¡»å›åˆ°ä»£ç†è·¯å¾„</li>
</ul>
<p>å°†è¿™ä¸¤ç±»èƒ½åŠ›åŒºåˆ†æ¸…æ¥šï¼Œå¯ä»¥é¿å…åœ¨é”™è¯¯æ¨¡å¼ä¸‹å¯»æ‰¾ä¸å­˜åœ¨çš„åŠŸèƒ½ã€‚</p>
<p>å‚è€ƒé“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.sniffmaster.net%2Ftutorial%2Fzh%2F2%2F2.html" target="_blank" title="https://www.sniffmaster.net/tutorial/zh/2/2.html" ref="nofollow noopener noreferrer">www.sniffmaster.net/tutorial/zhâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¯‘-ä» RecyclerView åˆ° LazyColumnï¼šJetpack Compose æ€§èƒ½ä¼˜åŒ–å®æˆ˜æ‰‹å†Œ]]></title>    <link>https://juejin.cn/post/7602557444111876105</link>    <guid>https://juejin.cn/post/7602557444111876105</guid>    <pubDate>2026-02-04T06:00:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602557444111876105" data-draft-id="7602651160465391666" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¯‘-ä» RecyclerView åˆ° LazyColumnï¼šJetpack Compose æ€§èƒ½ä¼˜åŒ–å®æˆ˜æ‰‹å†Œ"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-02-04T06:00:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="simplepeng"/> <meta itemprop="url" content="https://juejin.cn/user/641770519265832"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¯‘-ä» RecyclerView åˆ° LazyColumnï¼šJetpack Compose æ€§èƒ½ä¼˜åŒ–å®æˆ˜æ‰‹å†Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/641770519265832/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    simplepeng
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T06:00:20.000Z" title="Wed Feb 04 2026 06:00:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    14
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä» RecyclerView åˆ° LazyColumnï¼šJetpack Compose æ€§èƒ½ä¼˜åŒ–å®æˆ˜æ‰‹å†Œ</h2>
<p>When our team made the jump to Jetpack Compose, one thing immediately stood out â€” the simplicity of handling lists. No more wrestling with complex adapters, tricky cell updates, or manual diffing; just drop your items into a LazyColumn, add keys, and voilÃ  â€” instant scrolling magic! But, as you might have guessed, reality isnâ€™t always that straightforward. In this article, Iâ€™ll share how you can strategically transfer your hard earned RecyclerView optimization expertise directly into LazyColumn, ensuring maximum performance from day one.<br/>
å½“æˆ‘ä»¬å›¢é˜Ÿè¿ç§»åˆ° Jetpack Compose æ—¶ï¼Œæœ‰ä¸€ä»¶äº‹ç«‹åˆ»æ˜¾å¾—å¾ˆçªå‡ºâ€”â€”å¤„ç†åˆ—è¡¨çš„ç®€æ´æ€§ã€‚ä¸å†éœ€è¦ä¸å¤æ‚çš„ adapter æŠ˜è…¾ã€å¤„ç†æ£˜æ‰‹çš„å•å…ƒæ ¼æ›´æ–°æˆ–æ‰‹åŠ¨ diffï¼›åªéœ€æŠŠä½ çš„é¡¹æ”¾å…¥ LazyColumnï¼Œæ·»åŠ  keysï¼Œç„¶åç§â€”â€”å³æ—¶æµç•…æ»šåŠ¨çš„é­”æ³•ï¼ä½†æ­£å¦‚ä½ å¯èƒ½çŒœåˆ°çš„ï¼Œç°å®å¹¶ä¸æ€»æ˜¯é‚£ä¹ˆç®€å•ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†åˆ†äº«å¦‚ä½•å°†ä½ åœ¨ RecyclerView ä¸Šè¾›è‹¦ç§¯ç´¯çš„ä¼˜åŒ–ç»éªŒç­–ç•¥æ€§åœ°ç›´æ¥è¿ç§»åˆ° LazyColumn ä¸­ï¼Œä»ç¬¬ä¸€å¤©èµ·å°±ç¡®ä¿æ€§èƒ½æœ€å¤§åŒ–ã€‚</p>
<p>So how exactly do RecyclerViewâ€™s battle -tested optimizations map onto LazyColumnâ€™s new playing field? Letâ€™s break it down technique by technique, examining whatâ€™s directly transferable, whatâ€™s improved, and what requires a fresh approach to achieve optimal Compose performance.<br/>
é‚£ä¹ˆï¼ŒRecyclerView é‚£äº›ä¹…ç»è€ƒéªŒçš„ä¼˜åŒ–ç­–ç•¥åˆ°åº•å¦‚ä½•æ˜ å°„åˆ° LazyColumn è¿™ä¸ªæ–°é˜µåœ°ï¼Ÿè®©æˆ‘ä»¬é€é¡¹æ‹†è§£ï¼Œæ£€æŸ¥å“ªäº›å¯ä»¥ç›´æ¥è¿ç§»ã€å“ªäº›å·²è¢«æ”¹è¿›ã€ä»¥åŠå“ªäº›éœ€è¦é‡‡ç”¨æ–°çš„æ–¹æ³•æ¥å®ç°æœ€ä½³çš„ Compose æ€§èƒ½ã€‚</p>
<h3 data-id="heading-1">Identity &amp; Content Checks: From DiffUtil to Compose Keys and Immutable Models  èº«ä»½ä¸å†…å®¹æ£€æŸ¥ï¼šä» DiffUtil åˆ° Compose çš„ key ä¸ä¸å¯å˜æ¨¡å‹</h3>
<p>In RecyclerView, optimizing the calculation of differences between lists relies heavily on three essential methods:<br/>
åœ¨ RecyclerView ä¸­ï¼Œä¼˜åŒ–åˆ—è¡¨å·®å¼‚è®¡ç®—åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šä¾èµ–äºä¸‰ä¸ªåŸºæœ¬æ–¹æ³•ï¼š</p>
<ul>
<li><code>areItemsTheSame(oldItem, newItem)</code> â€“ Checks if two items represent the same logical entity.<br/>
<code>areItemsTheSame(oldItem, newItem)</code> â€“ æ£€æŸ¥ä¸¤ä¸ªæ¡ç›®æ˜¯å¦ä»£è¡¨ç›¸åŒçš„é€»è¾‘å®ä½“ã€‚</li>
<li><code>areContentsTheSame(oldItem, newItem)</code> â€“ Determines if the item's content has changed, prompting a UI refresh if necessary.<br/>
<code>areContentsTheSame(oldItem, newItem)</code> â€“ åˆ¤æ–­æ¡ç›®çš„å†…å®¹æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œå¦‚æœ‰å¿…è¦åˆ™è§¦å‘ UI åˆ·æ–°ã€‚</li>
<li><code>detectMoves</code> â€“ An advanced optimization that speeds up diff calculations, especially beneficial when you know your dataset involves item movements.<br/>
<code>detectMoves</code> â€“ ä¸€ç§é«˜çº§ä¼˜åŒ–ï¼ŒåŠ å¿«å·®å¼‚è®¡ç®—é€Ÿåº¦ï¼Œå°¤å…¶åœ¨ä½ çŸ¥é“æ•°æ®é›†ä¸­åŒ…å«é¡¹ç§»åŠ¨æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚</li>
</ul>
<p>Jetpack Compose handles these same concepts elegantly. To inform Compose how to efficiently track individual items, you provide a stable key for each one:
Jetpack Compose ä»¥ä¼˜é›…çš„æ–¹å¼å¤„ç†äº†è¿™äº›ç›¸åŒçš„æ¦‚å¿µã€‚ä¸ºäº†è®© Compose èƒ½å¤Ÿé«˜æ•ˆåœ°è¿½è¸ªæ¯ä¸ªç‹¬ç«‹é¡¹ï¼Œä½ éœ€è¦ä¸ºæ¯ä¸€é¡¹æä¾›ä¸€ä¸ªç¨³å®šçš„æ ‡è¯†é”®:</p>
<p>This <code>key</code> ensures that Compose can track the identity of items across recompositions - just like <code>areItemsTheSame</code>.
è¿™ä¸ª <code>key</code> ç¡®ä¿ Compose èƒ½åœ¨é‡ç»„è¿‡ç¨‹ä¸­è·Ÿè¸ªé¡¹çš„èº«ä»½ â€”â€” å°±åƒ <code>areItemsTheSame</code> ä¸€æ ·ã€‚</p>
<p>Handling content updates (<code>areContentsTheSame</code>) is a bit different in Compose, as it leverages internal recomposition strategies. A good rule of thumb here is to always prefer immutable UI models - achieved easily by using the <code>@Immutable</code> annotation or defining data classes with val fields exclusively. Furthermore, starting from Compose compiler 2.x (bundled with Kotlin 2.0.20), Strong Skipping mode is enabled by default, providing automatic optimization and removing the need for manual handling of immutable collections.<br/>
åœ¨ Compose ä¸­å¤„ç†å†…å®¹æ›´æ–°ï¼ˆ <code>areContentsTheSame</code> ï¼‰æœ‰äº›ä¸åŒï¼Œå› ä¸ºå®ƒåˆ©ç”¨äº†å†…éƒ¨çš„é‡ç»„ç­–ç•¥ã€‚ä¸€ä¸ªå¥½çš„ç»éªŒæ³•åˆ™æ˜¯å§‹ç»ˆä¼˜å…ˆä½¿ç”¨ä¸å¯å˜çš„ UI æ¨¡å‹ â€”â€” é€šè¿‡ä½¿ç”¨ <code>@Immutable</code> æ³¨è§£æˆ–ä»…ç”¨ val å­—æ®µå®šä¹‰æ•°æ®ç±»å¯ä»¥è½»æ¾å®ç°ã€‚æ­¤å¤–ï¼Œä»éš Kotlin 2.0.20 æ†ç»‘çš„ Compose ç¼–è¯‘å™¨ 2.x å¼€å§‹ï¼Œå·²é»˜è®¤å¯ç”¨ Strong Skipping æ¨¡å¼ï¼Œæä¾›è‡ªåŠ¨ä¼˜åŒ–ï¼Œæ¶ˆé™¤äº†å¯¹ä¸å¯å˜é›†åˆæ‰‹åŠ¨å¤„ç†çš„éœ€æ±‚ã€‚</p>
<h3 data-id="heading-2">Asynchronous Text Layout: From PrecomputedText to TextMeasurer  å¼‚æ­¥æ–‡æœ¬å¸ƒå±€ï¼šä» PrecomputedText åˆ° TextMeasurer</h3>
<p>RecyclerView veterans relied on PrecomputedText to shift expensive text-layout work onto a background thread before the view holder ever appeared on the screen. Jetpack Compose tackles this same challenge effectively through built-in paragraph caching and the TextMeasurer API. Letâ€™s map these familiar techniques onto Composeâ€™s new terrain step by step<br/>
RecyclerView çš„è€æ‰‹ä»¬ä¾èµ– PrecomputedText å°†æ˜‚è´µçš„æ–‡æœ¬å¸ƒå±€å·¥ä½œè½¬ç§»åˆ°åå°çº¿ç¨‹ï¼Œåœ¨è§†å›¾æŒæœ‰è€…å‡ºç°åœ¨å±å¹•ä¹‹å‰å°±å®Œæˆã€‚Jetpack Compose é€šè¿‡å†…ç½®çš„æ®µè½ç¼“å­˜å’Œ TextMeasurer API æœ‰æ•ˆåœ°åº”å¯¹äº†åŒæ ·çš„æŒ‘æˆ˜ã€‚è®©æˆ‘ä»¬ä¸€æ­¥æ­¥å°†è¿™äº›ç†Ÿæ‚‰çš„æŠ€æœ¯æ˜ å°„åˆ° Compose çš„æ–°é¢†åŸŸã€‚</p>
<h4 data-id="heading-3">1. Paragraph caching (built-in optimization)  1. æ®µè½ç¼“å­˜ï¼ˆå†…ç½®ä¼˜åŒ–ï¼‰</h4>
<p>Every time you emit a Text composable, Compose caches a fully- laid -out <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fkotlin%2Fandroidx%2Fcompose%2Fui%2Ftext%2FParagraph%3Fref%3Dhackernoon.com" target="_blank" title="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/Paragraph?ref=hackernoon.com" ref="nofollow noopener noreferrer">Paragraph</a> within the current composition. As long as the text content, styling, density, and locale remain unchanged, Compose reuses this cached paragraph, avoiding unnecessary layout computations. This effectively reduces overhead for most intra-viewport updates and provides immediate performance gains without additional effort.<br/>
æ¯æ¬¡ä½ å‘å‡ºä¸€ä¸ª Text å¯ç»„åˆé¡¹æ—¶ï¼ŒCompose ä¼šåœ¨å½“å‰ç»„åˆä¸­ç¼“å­˜ä¸€ä¸ªå·²å®Œå…¨å¸ƒå±€çš„ Paragraphã€‚åªè¦æ–‡æœ¬å†…å®¹ã€æ ·å¼ã€åƒç´ å¯†åº¦å’ŒåŒºåŸŸè®¾ç½®ä¿æŒä¸å˜ï¼ŒCompose å°±ä¼šé‡ç”¨è¿™ä¸ªç¼“å­˜çš„æ®µè½ï¼Œä»è€Œé¿å…ä¸å¿…è¦çš„å¸ƒå±€è®¡ç®—ã€‚è¿™æœ‰æ•ˆåœ°å‡å°‘äº†å¤§å¤šæ•°è§†å£å†…æ›´æ–°çš„å¼€é”€ï¼Œå¹¶åœ¨æ— éœ€é¢å¤–åŠªåŠ›çš„æƒ…å†µä¸‹å¸¦æ¥å³æ—¶çš„æ€§èƒ½æå‡ã€‚</p>
<h4 data-id="heading-4">2. When it is time for big guns: Using TextMeasurer  2. åˆ°éœ€è¦å¤§æ‹›çš„æ—¶å€™ï¼šä½¿ç”¨ TextMeasurer</h4>
<p>For heavyweight or complex text scenarios (e.g., long paragraphs, variable fonts, or custom canvas drawing) where even occasional on-scroll layout recalculations are unacceptable, leverage the <code>TextMeasurer API</code> - think of it as the Compose counterpart to <code>PrecomputedText.create()</code>.<br/>
å¯¹äºé‡é‡çº§æˆ–å¤æ‚çš„æ–‡æœ¬åœºæ™¯ï¼ˆä¾‹å¦‚é•¿æ®µè½ã€å¯å˜å­—ä½“æˆ–è‡ªå®šä¹‰ç”»å¸ƒç»˜åˆ¶ï¼‰ï¼Œåœ¨è¿™äº›æƒ…å†µä¸‹å³ä½¿å¶å°”åœ¨æ»šåŠ¨æ—¶é‡æ–°è®¡ç®—å¸ƒå±€ä¹Ÿä¸å¯æ¥å—ï¼Œåº”å½“ä½¿ç”¨ <code>TextMeasurer API</code> â€”â€” å¯ä»¥æŠŠå®ƒè§†ä¸º Compose ä¸­å¯¹åº”äº <code>PrecomputedText.create()</code> çš„å·¥å…·ã€‚</p>
<p>Benefits of using TextMeasurer:<br/>
ä½¿ç”¨ TextMeasurer çš„å¥½å¤„ï¼š</p>
<ul>
<li><strong>Precise Layout Control</strong>: Pre-measuring text off-screen provides exact item heights before composable placement, preventing layout shifts during scrolling.<br/>
ç²¾ç¡®çš„å¸ƒå±€æ§åˆ¶ï¼šåœ¨å±å¹•å¤–é¢„å…ˆæµ‹é‡æ–‡æœ¬å¯ä»¥åœ¨å¯ç»„åˆé¡¹æ”¾ç½®ä¹‹å‰æä¾›ç²¾ç¡®çš„é¡¹é«˜åº¦ï¼Œé˜²æ­¢åœ¨æ»šåŠ¨è¿‡ç¨‹ä¸­å‘ç”Ÿå¸ƒå±€ä½ç§»ã€‚</li>
<li><strong>Dynamic Overflow Detection</strong>: Access properties like <code>layoutResult.hasVisualOverflow</code> to conditionally render UI elements such as "Read more" indicators.<br/>
åŠ¨æ€æº¢å‡ºæ£€æµ‹ï¼šè®¿é—®è¯¸å¦‚ <code>layoutResult.hasVisualOverflow</code> çš„å±æ€§ä»¥æœ‰æ¡ä»¶åœ°å‘ˆç° UI å…ƒç´ ï¼Œä¾‹å¦‚â€œé˜…è¯»æ›´å¤šâ€æŒ‡ç¤ºå™¨ã€‚</li>
<li><strong>Enhanced Scroll Performance</strong>: By knowing exact item dimensions beforehand, <code>LazyColumn</code> calculates scroll positions more efficiently, ensuring smoother scrolling.<br/>
å¢å¼ºçš„æ»šåŠ¨æ€§èƒ½ï¼šé€šè¿‡äº‹å…ˆçŸ¥é“ç²¾ç¡®çš„é¡¹å°ºå¯¸ï¼Œ <code>LazyColumn</code> èƒ½æ›´é«˜æ•ˆåœ°è®¡ç®—æ»šåŠ¨ä½ç½®ï¼Œä»è€Œç¡®ä¿æ›´æµç•…çš„æ»šåŠ¨ã€‚</li>
</ul>
<p>However, introducing <code>TextMeasurer</code> increases complexity. You must:<br/>
ç„¶è€Œï¼Œå¼•å…¥ <code>TextMeasurer</code> ä¼šå¢åŠ å¤æ‚æ€§ã€‚æ‚¨å¿…é¡»ï¼š</p>
<ul>
<li>Manage recomposition carefully, especially during configuration changes (e.g., font scale, screen orientation), requiring items to be re-measured appropriately.<br/>
è°¨æ…ç®¡ç†é‡ç»„ï¼Œå°¤å…¶æ˜¯åœ¨é…ç½®æ›´æ”¹ï¼ˆä¾‹å¦‚å­—ä½“ç¼©æ”¾ã€å±å¹•æ–¹å‘ï¼‰æœŸé—´ï¼Œè¦æ±‚å¯¹é¡¹è¿›è¡Œé€‚å½“çš„é‡æ–°æµ‹é‡ã€‚</li>
<li>Implement caching to avoid redundant measurements of identical content, preserving performance.<br/>
å®ç°ç¼“å­˜ä»¥é¿å…å¯¹ç›¸åŒå†…å®¹è¿›è¡Œé‡å¤æµ‹é‡ï¼Œä»è€Œä¿æŒæ€§èƒ½ã€‚</li>
</ul>
<p>TextMeasurer is particularly useful for:<br/>
TextMeasurer å¯¹ä»¥ä¸‹æƒ…å†µç‰¹åˆ«æœ‰ç”¨ï¼š</p>
<ul>
<li>Lists with variable-length text content<br/>
åŒ…å«å¯å˜é•¿åº¦æ–‡æœ¬å†…å®¹çš„åˆ—è¡¨</li>
<li>Chat applications or message lists<br/>
èŠå¤©åº”ç”¨æˆ–æ¶ˆæ¯åˆ—è¡¨</li>
<li>Article or comment feeds æ–‡ç« æˆ–è¯„è®ºæè¦</li>
<li>Any scenario where text length significantly varies between items<br/>
ä»»ä½•æ–‡æœ¬é•¿åº¦åœ¨å„é¡¹ä¹‹é—´æ˜¾è‘—å˜åŒ–çš„åœºæ™¯</li>
</ul>
<h3 data-id="heading-5">Importance of contentType  contentType çš„é‡è¦æ€§</h3>
<p>In RecyclerView, developers utilize view types (<code>getItemViewType()</code>) to efficiently handle multiple item layouts within a single list. Jetpack Compose introduces the equivalent optimization through the <code>contentType</code> parameter in <code>LazyColumn</code>.<br/>
åœ¨ RecyclerView ä¸­ï¼Œå¼€å‘è€…ä½¿ç”¨è§†å›¾ç±»å‹ ( <code>getItemViewType()</code> ) æ¥åœ¨å•ä¸ªåˆ—è¡¨ä¸­é«˜æ•ˆå¤„ç†å¤šç§é¡¹å¸ƒå±€ã€‚Jetpack Compose åœ¨ <code>LazyColumn</code> çš„ <code>contentType</code> å‚æ•°ä¸­å¼•å…¥äº†ç­‰æ•ˆçš„ä¼˜åŒ–ã€‚</p>
<p>Hereâ€™s a way of how youâ€™d express the RecyclerView view types in Jetpack Compose:<br/>
ä¸‹é¢æ˜¯åœ¨ Jetpack Compose ä¸­è¡¨è¾¾ RecyclerView è§†å›¾ç±»å‹çš„ä¸€ç§æ–¹å¼ï¼š</p>
<p><strong>Why it matters ä¸ºä»€ä¹ˆè¿™å¾ˆé‡è¦</strong></p>
<p>While Compose allows omission of the <code>contentType</code> parameter, leaving it out negatively impacts performance, particularly for lists with mixed item types. Compose maintains a limited composition cache per <code>contentType</code>, enabling it to efficiently reuse existing compositions for items of the same visual structure without expensive rebuilds. Without specifying distinct contentTypes, all items default to a single type, rapidly exhausting Composeâ€™s internal cache. This forces frequent recompositions as users scroll, significantly increasing CPU load and potentially introducing noticeable scrolling lag.<br/>
è™½ç„¶ Compose å…è®¸çœç•¥ <code>contentType</code> å‚æ•°ï¼Œä½†çœç•¥ä¼šå¯¹æ€§èƒ½äº§ç”Ÿè´Ÿé¢å½±å“ï¼Œå°¤å…¶æ˜¯åœ¨åŒ…å«æ··åˆé¡¹ç±»å‹çš„åˆ—è¡¨ä¸­ã€‚Compose ä¸ºæ¯ä¸ª <code>contentType</code> ä¿ç•™æœ‰é™çš„ç»„åˆç¼“å­˜ï¼Œä½¿å…¶èƒ½å¤Ÿé«˜æ•ˆåœ°é‡ç”¨å…·æœ‰ç›¸åŒè§†è§‰ç»“æ„çš„ç°æœ‰ç»„åˆï¼Œé¿å…ä»£ä»·é«˜æ˜‚çš„é‡å»ºã€‚å¦‚æœä¸æŒ‡å®šä¸åŒçš„ contentTypesï¼Œæ‰€æœ‰é¡¹å°†é»˜è®¤ä¸ºå•ä¸€ç±»å‹ï¼Œä»è€Œè¿…é€Ÿè€—å°½ Compose çš„å†…éƒ¨ç¼“å­˜ã€‚è¿™ä¼šå¯¼è‡´ç”¨æˆ·æ»šåŠ¨æ—¶é¢‘ç¹é‡æ–°ç»„åˆï¼Œæ˜¾è‘—å¢åŠ  CPU è´Ÿè½½ï¼Œå¹¶å¯èƒ½å¼•å…¥æ˜æ˜¾çš„æ»šåŠ¨å¡é¡¿ã€‚</p>
<p>For optimal performance in lists with heterogeneous content, always specify the appropriate <code>contentType</code> to match your data structure.<br/>
å¯¹äºå…·æœ‰å¼‚æ„å†…å®¹çš„åˆ—è¡¨ï¼Œä¸ºäº†è·å¾—æœ€ä½³æ€§èƒ½ï¼Œè¯·å§‹ç»ˆæŒ‡å®šä¸æ‚¨çš„æ•°æ®ç»“æ„ç›¸åŒ¹é…çš„é€‚å½“ <code>contentType</code> ã€‚</p>
<h4 data-id="heading-6">Nested List Prefetching: From initialPrefetchItemCount to nestedPrefetchItemCount  åµŒå¥—åˆ—è¡¨é¢„å–ï¼šä» initialPrefetchItemCount åˆ° nestedPrefetchItemCount</h4>
<p>When developing apps with nested scrolling lists â€” such as vertical feeds containing horizontal carousels â€” optimizing prefetching is crucial for maintaining a smooth user experience. In traditional RecyclerView setups, we rely on <code>setInitialPrefetchItemCount</code> to preload off-screen items. Jetpack Compose provides a direct analogue through the experimental <code>LazyListPrefetchStrategy</code> API, specifically its <code>nestedPrefetchItemCount</code> parameter.<br/>
åœ¨å¼€å‘åŒ…å«åµŒå¥—æ»šåŠ¨åˆ—è¡¨çš„åº”ç”¨æ—¶â€”â€”ä¾‹å¦‚åŒ…å«æ°´å¹³èµ°é©¬ç¯çš„å‚ç›´ä¿¡æ¯æµâ€”â€”ä¼˜åŒ–é¢„å–å¯¹äºç»´æŒæµç•…çš„ç”¨æˆ·ä½“éªŒè‡³å…³é‡è¦ã€‚åœ¨ä¼ ç»Ÿçš„ RecyclerView æ–¹æ¡ˆä¸­ï¼Œæˆ‘ä»¬ä¾èµ– <code>setInitialPrefetchItemCount</code> æ¥é¢„åŠ è½½å±å¹•å¤–çš„é¡¹ã€‚Jetpack Compose é€šè¿‡å®éªŒæ€§çš„ <code>LazyListPrefetchStrategy</code> API æä¾›äº†ç›´æ¥å¯¹åº”çš„åŠŸèƒ½ï¼Œç‰¹åˆ«æ˜¯å®ƒçš„ <code>nestedPrefetchItemCount</code> å‚æ•°ã€‚</p>
<p>Hereâ€™s how you implement prefetching in a nested Compose list scenario:<br/>
ä¸‹é¢æ˜¯å¦‚ä½•åœ¨åµŒå¥—çš„ Compose åˆ—è¡¨åœºæ™¯ä¸­å®ç°é¢„å–ï¼š</p>
<p>Common pitfall here (at least, the one that I saw with my own eyes) â€” sometimes developers set <code>LazyListPrefetchStrategy</code> to parent list and not to the nested ones, which, obviously, gains no effect. Always ensure you apply <code>nestedPrefetchItemCount</code> to the nested, inner scrolling list state to achieve the intended optimization.<br/>
è¿™é‡Œå¸¸è§çš„ä¸€ä¸ªé”™è¯¯ï¼ˆè‡³å°‘æ˜¯æˆ‘äº²çœ¼è§è¿‡çš„ï¼‰â€”â€”æœ‰æ—¶å¼€å‘è€…å°† <code>LazyListPrefetchStrategy</code> è®¾ç½®åœ¨çˆ¶åˆ—è¡¨ä¸Šï¼Œè€Œä¸æ˜¯è®¾ç½®åœ¨åµŒå¥—åˆ—è¡¨ä¸Šï¼Œè¿™æ˜¾ç„¶ä¸ä¼šèµ·ä½œç”¨ã€‚åŠ¡å¿…å°† <code>nestedPrefetchItemCount</code> åº”ç”¨äºåµŒå¥—çš„ã€å†…éƒ¨çš„æ»šåŠ¨åˆ—è¡¨çŠ¶æ€ï¼Œä»¥è¾¾åˆ°é¢„æœŸçš„ä¼˜åŒ–æ•ˆæœã€‚</p>
<p>Be mindful that aggressive prefetch settings can significantly inflate Composeâ€™s composition cache. On memory-constrained devices, overly large prefetch counts can push your app toward OOM crashes. Always profile memory usage carefully after adjusting your prefetch budgets â€” especially if targeting low-end hardware.<br/>
è¯·æ³¨æ„ï¼Œæ¿€è¿›çš„é¢„å–è®¾ç½®ä¼šæ˜¾è‘—å¢åŠ  Compose çš„ç»„åˆç¼“å­˜ã€‚åœ¨å†…å­˜å—é™çš„è®¾å¤‡ä¸Šï¼Œè¿‡å¤§çš„é¢„å–æ•°é‡å¯èƒ½ä¼šå°†ä½ çš„åº”ç”¨æ¨å‘ OOM å´©æºƒã€‚æ¯æ¬¡è°ƒæ•´é¢„å–é¢„ç®—åéƒ½è¦ä»”ç»†åˆ†æå†…å­˜ä½¿ç”¨æƒ…å†µâ€”â€”å°¤å…¶æ˜¯åœ¨ä»¥ä½ç«¯ç¡¬ä»¶ä¸ºç›®æ ‡æ—¶ã€‚</p>
<h3 data-id="heading-7">Bonus part â€” animating your lists  é™„åŠ éƒ¨åˆ† â€” åˆ—è¡¨åŠ¨ç”»</h3>
<p>And finally, letâ€™s talk about animations. Compose 1.7 made adding smooth item animations surprisingly straightforward especially compared to custom RecyclerView ItemAnimators. Instead of manually orchestrating animations, simply use <code>Modifier.animateItem()</code> with concise specs for fades and movements:<br/>
æœ€åï¼Œæˆ‘ä»¬æ¥è°ˆè°ˆåŠ¨ç”»ã€‚Compose 1.7 ä½¿å¾—ä¸ºé¡¹ç›®æ·»åŠ æµç•…åŠ¨ç”»å˜å¾—å‡ºå¥‡åœ°ç®€å•ï¼Œå°¤å…¶æ˜¯ç›¸æ¯”è‡ªå®šä¹‰ RecyclerView ItemAnimatorsã€‚ä½ æ— éœ€æ‰‹åŠ¨ç¼–æ’åŠ¨ç”»ï¼Œåªéœ€ä½¿ç”¨ <code>Modifier.animateItem()</code> å¹¶é…ä»¥ç®€æ˜çš„æ·¡å…¥æ·¡å‡ºå’Œä½ç§»è§„èŒƒï¼š</p>
<pre><code class="hljs language-c" lang="c">Modifier.animateItem(
    fadeInSpec = tween(<span class="hljs-number">200</span>),
    fadeOutSpec = tween(<span class="hljs-number">120</span>),
    placementSpec = spring(stiffness = Spring.StiffnessMediumLow)
)
</code></pre>
<p>This reduces complexity, enabling you to easily deliver polished and engaging UIs.<br/>
è¿™æ ·å¯ä»¥é™ä½å¤æ‚æ€§ï¼Œä½¿ä½ æ›´å®¹æ˜“äº¤ä»˜ç²¾è‡´ä¸”å¸å¼•äººçš„ç”¨æˆ·ç•Œé¢ã€‚</p>
<h3 data-id="heading-8">Conclusion ç»“è®º</h3>
<p>Jetpack Compose transforms Android UI development, simplifying many complexities that have challenged RecyclerView users. However, maximizing Composeâ€™s potential still demands strategic insight and careful application of optimization techniques. By leveraging keys for identity checks, using immutable models to optimize recompositions, mastering the TextMeasurer API for efficient text handling, and applying correct prefetch strategies for nested lists, your performance skills from RecyclerView will significantly enhance your Compose applications. Embrace these methods, and youâ€™ll ensure your UI remains fluid, responsive, and delightful for users â€” proving once again that foundational performance strategies never go out of style, they simply evolve.<br/>
Jetpack Compose æ”¹å˜äº† Android UI å¼€å‘ï¼Œç®€åŒ–äº†è®¸å¤šæ›¾è®© RecyclerView ç”¨æˆ·å¤´ç–¼çš„å¤æ‚é—®é¢˜ã€‚ç„¶è€Œï¼Œè¦å……åˆ†å‘æŒ¥ Compose çš„æ½œåŠ›ï¼Œä»ç„¶éœ€è¦æœ‰ç­–ç•¥çš„è§è§£å’Œå¯¹ä¼˜åŒ–æŠ€æœ¯çš„è°¨æ…åº”ç”¨ã€‚é€šè¿‡åˆ©ç”¨ keys è¿›è¡Œèº«ä»½æ£€æŸ¥ã€ä½¿ç”¨ä¸å¯å˜æ¨¡å‹æ¥ä¼˜åŒ–é‡ç»„ã€æŒæ¡ TextMeasurer API ä»¥é«˜æ•ˆå¤„ç†æ–‡æœ¬ï¼Œä»¥åŠä¸ºåµŒå¥—åˆ—è¡¨åº”ç”¨æ­£ç¡®çš„é¢„å–ç­–ç•¥ï¼Œä½ åœ¨ RecyclerView æ—¶ç§¯ç´¯çš„æ€§èƒ½æŠ€èƒ½å°†æ˜¾è‘—æå‡ä½ åœ¨ Compose ä¸­çš„åº”ç”¨è¡¨ç°ã€‚é‡‡çº³è¿™äº›æ–¹æ³•ï¼Œä½ å°†ç¡®ä¿ä½ çš„ UI ä¿æŒæµç•…ã€å“åº”è¿…é€Ÿå¹¶è®©ç”¨æˆ·æ„‰æ‚¦â€”â€”å†æ¬¡è¯æ˜åŸºç¡€çš„æ€§èƒ½ç­–ç•¥ä¸ä¼šè¿‡æ—¶ï¼Œå®ƒä»¬åªæ˜¯ä¸æ–­æ¼”è¿›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Javaå…«è‚¡æ–‡é¢è¯•é‡ç‚¹å®Œæ•´ç‰ˆ]]></title>    <link>https://juejin.cn/post/7602551091516915721</link>    <guid>https://juejin.cn/post/7602551091516915721</guid>    <pubDate>2026-02-04T05:37:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602551091516915721" data-draft-id="7602512226999697458" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Javaå…«è‚¡æ–‡é¢è¯•é‡ç‚¹å®Œæ•´ç‰ˆ"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,Java"/> <meta itemprop="datePublished" content="2026-02-04T05:37:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaæ°´è§£"/> <meta itemprop="url" content="https://juejin.cn/user/2441349519143037"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Javaå…«è‚¡æ–‡é¢è¯•é‡ç‚¹å®Œæ•´ç‰ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2441349519143037/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaæ°´è§£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-04T05:37:25.000Z" title="Wed Feb 04 2026 05:37:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-04
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»25åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é¢è¯•åå‡ å®¶å…¬å¸ï¼ˆå°ä¸­å¤§ä¼ä¸šï¼‰æ€»ç»“çš„[Javaå…«è‚¡æ–‡]ï¼Œæ ‡è®°é‡ç‚¹çš„ä¸€å®šè¦æŒæ¡ï¼Œå‡ ä¹50%æ¦‚ç‡ä¼šè¢«é—®åˆ°ã€‚ä¸€ç›´ä¸æ¨èæ­»è®°ç¡¬èƒŒï¼Œåº”è¯¥ç»“åˆåœºæ™¯ä¸šåŠ¡ä»£ç ã€æ‰‹åŠ¨ç”»å›¾åŠ æ·±ç†è§£ï¼Œä¼ æ‰¿ç¨‹åºçŒ¿å¼€æºç²¾ç¥ï¼Œç°åˆ†äº«æœ‰éœ€è¦çš„äººã€‚
**</p>
<p><strong>ä¸€ï¼Œæ¡†æ¶ç¯‡</strong>**</p>
<h4 data-id="heading-0"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1.Springæ¡†æ¶ä¸­çš„å•ä¾‹beanæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ</h4>
<p>Â Â Â Â Â Â  å•ä¾‹Bean çš„çº¿ç¨‹å®‰å…¨æ€§å–å†³äº Bean çš„å…·ä½“å®ç°ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨springä¸­çš„beanéƒ½æ˜¯æ— çŠ¶æ€ï¼ˆæ²¡æœ‰å¯ä¿®æ”¹çš„æˆå‘˜å˜é‡ï¼‰çš„å¯¹è±¡ï¼Œå°±æ²¡æœ‰[çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œä½†å¦‚æœåœ¨beanä¸­å®šä¹‰äº†å¯ä¿®æ”¹çš„æˆå‘˜å˜é‡ï¼Œæ˜¯éœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨é—®é¢˜çš„ã€‚</p>
<p>Â Â Â Â Â Â  æˆ‘ä»¬å¯ä»¥åŠ é”ï¼Œä½¿ç”¨synchronizedå…³é”®å­—è¿›è¡ŒåŒæ­¥ï¼Œä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½è®¿é—®è¯¥æ–¹æ³•ï¼›ä¹Ÿå¯ä»¥é€šè¿‡ @Lookup æ³¨è§£è®¾ç½®beanä¸ºå¤šä¾‹ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªbeanå®ä¾‹ï¼Œå¤šä¸ªçº¿ç¨‹æ“ä½œäº’ä¸å½±å“ï¼Œä½†æ€§èƒ½å—æŸï¼›</p>
<h4 data-id="heading-1"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2.èƒ½ä»‹ç»ä¸€ä¸‹åŠ¨æ€ä»£ç†å—</h4>
<p>Â Â Â Â Â Â  åŠ¨æ€ä»£ç†æ˜¯æŒ‡åœ¨ç¨‹åºè¿è¡Œæ—¶é€šè¿‡åå°„æœºåˆ¶è‡ªåŠ¨ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œç¡®ä¿åœ¨ä¸ä¿®æ”¹ç›®æ ‡ç±»çš„æƒ…å†µä¸‹ï¼Œå¢å¼ºç›®æ ‡ç±»çš„åŠŸèƒ½ï¼ˆç±»å¢å¼ºï¼‰ï¼ŒJavaæä¾›äº†ä¸¤ç§æ–¹å¼æ¥å®ç°åŠ¨æ€ä»£ç†ï¼š</p>
<p>Â Â Â Â Â Â  åœ¨SpringBoot2ä¹‹å‰ï¼ŒSpringä¼šæ ¹æ®ç›®æ ‡å¯¹è±¡çš„ç‰¹æ€§è‡ªåŠ¨é€‰æ‹©ï¼Œæ¯”å¦‚ç›®æ ‡ç±»å®ç°äº†è‡³å°‘ä¸€ä¸ªæ¥å£é»˜è®¤ä½¿ç”¨JDKåŠ¨æ€ä»£ç†ï¼Œå¦‚æœæ²¡æœ‰å®ç°æ¥å£å°±é»˜è®¤CGLIBä»£ç†ï¼›è€ŒSpringBoot2.2ä¹‹åï¼Œç»Ÿä¸€ä½¿ç”¨CGLIBä»£ç†ï¼ˆæ— è®ºç›®æ ‡ç±»æ˜¯å¦å®ç°æ¥å£ï¼‰</p>
<p>Â Â Â Â Â Â  JDKåŠ¨æ€ä»£ç†ï¼šåŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†ï¼Œåªèƒ½ä»£ç†å®ç°äº†æ¥å£çš„ç±»ï¼Œåˆ›å»ºä»£ç†å¯¹è±¡é€Ÿåº¦å¿«ï¼ˆç›´æ¥æ ¹æ®æ¥å£ç”Ÿæˆå­—èŠ‚ç å¹¶ç”±ç±»åŠ è½½å™¨åŠ è½½ï¼‰ï¼Œæ–¹æ³•è°ƒç”¨è¾ƒæ…¢ï¼ˆéœ€è¦é€šè¿‡Mehtod.invoke( )æ–¹æ³•è°ƒç”¨ï¼Œåå°„æ–¹æ³•ç›¸å¯¹è¾ƒæ…¢ã€‚è¯´æ˜ï¼šJDK6æ–¹æ³•è°ƒç”¨æ¯”CGLIBæ…¢ï¼Œä½†JDK7/8å¯¹åå°„è°ƒç”¨åšäº†ä¼˜åŒ–ï¼Œä¸æ¯”CGLIBæ…¢ï¼‰ï¼›</p>
<p>Â Â Â Â Â Â  CGLIBåŠ¨æ€ä»£ç†ï¼šåŸºäºç±»ç»§æ‰¿çš„åŠ¨æ€ä»£ç†ï¼Œç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»æ¥å®ç°ä»£ç†ï¼Œä»£ç†å¯¹è±¡åˆ›å»ºé€Ÿåº¦æ…¢(ä½¿ç”¨ASMå­—èŠ‚ç ç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»)ï¼Œæ–¹æ³•è°ƒç”¨å¿«(ç›´æ¥è¦†ç›–ç›®æ ‡æ–¹æ³•ï¼Œå¹¶åœ¨æ–¹æ³•ä¸­æ’å…¥æ‹¦æˆªé€»è¾‘ï¼Œæ²¡æœ‰èµ°åå°„)ï¼›</p>
<p>åŠ¨æ€ä»£ç†æä¾›äº†é«˜åº¦çš„çµæ´»æ€§å’Œæ‰©å±•æ€§ï¼Œä½†ä¹Ÿå¸¦æ¥äº†æ€§èƒ½å’Œå¤æ‚æ€§ï¼Œå¹¿æ³›åº”ç”¨äºAOPã€è¿œç¨‹ä»£ç†ã€Springçš„ä¾èµ–æ³¨å…¥ç­‰åœºæ™¯ã€‚</p>
<h4 data-id="heading-2"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3.è¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f79618e3e62d4f6a9ef0e3fac44e4d4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770790935&amp;x-signature=CuQKdewYcTna7jRs9grcC2%2Fjv%2B8%3D" alt="" loading="lazy"/></p>
<p>ï¼ˆ1ï¼‰è¿‡æ»¤å™¨æ˜¯Servletå±‚é¢çš„ï¼ŒéšServletå®¹å™¨å¯åŠ¨åˆå§‹åŒ–ï¼›æ‹¦æˆªå™¨æ˜¯Springæ¡†æ¶çš„ï¼ŒéšSpringå®¹å™¨å¯åŠ¨åˆå§‹åŒ–ï¼›</p>
<p>ï¼ˆ2ï¼‰è¿‡æ»¤å™¨åœ¨æ‹¦æˆªå™¨ä¹‹å‰æ‰§è¡Œï¼Œå¯ä»¥å¤„ç†æ‰€æœ‰çš„è¯·æ±‚ï¼›è€Œæ‹¦æˆªå™¨åªèƒ½å¤„ç†SpingMVCçš„Controllerè¯·æ±‚ï¼›</p>
<p>ï¼ˆ3ï¼‰è¿‡æ»¤å™¨æ“ä½œæ›´åº•å±‚ï¼Œä¸€èˆ¬å¤„ç†è·Ÿä¸šåŠ¡æ— å…³çš„é€»è¾‘æ“ä½œï¼Œæ¯”å¦‚è¯·æ±‚/å“åº”çš„å…¨å±€ç¼–ç è®¾ç½®ï¼›æ‹¦æˆªå™¨æ›´è´´è¿‘ä¸šåŠ¡ï¼Œæ¯”å¦‚ç”¨æˆ·ç™»é™†çŠ¶æ€éªŒè¯ï¼›</p>
<p>ä¾‹å­ï¼šè¿‡æ»¤å™¨è®¾ç½®è¯·æ±‚ç¼–ç  UTF-8</p>
<ol>
<li>@WebFilter("/*")Â //Â æ‹¦æˆªæ‰€æœ‰è¯·æ±‚Â Â </li>
<li><strong>public</strong>Â <strong>class</strong>Â EncodingFilterÂ <strong>implements</strong>Â FilterÂ {Â Â </li>
<li>Â Â Â Â @OverrideÂ Â </li>
<li>Â Â Â Â <strong>public</strong>Â <strong>void</strong>Â doFilter(ServletRequestÂ request,Â ServletResponseÂ response,Â FilterChainÂ chain)Â Â </li>
<li>Â Â Â Â Â Â Â Â Â Â Â Â <strong>throws</strong>Â IOException,Â ServletExceptionÂ {Â Â </li>
<li>Â Â Â Â Â Â Â Â //Â è®¾ç½®ç¼–ç Â Â </li>
<li>Â Â Â Â Â Â Â Â request.setCharacterEncoding("UTF-8");Â Â </li>
<li>Â Â Â Â Â Â Â Â response.setCharacterEncoding("UTF-8");Â Â </li>
<li>Â Â </li>
<li>Â Â Â Â Â Â Â Â //Â ç»§ç»­å¾€ä¸‹èµ°Â Â </li>
<li>Â Â Â Â Â Â Â Â chain.doFilter(request,Â response);Â Â </li>
<li>Â Â Â Â }Â Â </li>
<li>}Â </li>
</ol>
<p>ä¾‹å­ï¼šç™»å½•æ‹¦æˆªå™¨ï¼ˆæœªç™»å½•è·³è½¬åˆ°ç™»å½•é¡µï¼‰</p>
<ol>
<li><strong>public</strong>Â <strong>class</strong>Â LoginInterceptorÂ <strong>implements</strong>Â HandlerInterceptorÂ {Â Â </li>
<li>Â Â Â @OverrideÂ Â </li>
<li>Â Â Â Â <strong>public</strong>Â <strong>boolean</strong>Â preHandle(HttpServletRequestÂ request,Â HttpServletResponseÂ response,Â ObjectÂ handler)Â Â </li>
<li>Â Â Â Â Â Â Â Â Â Â Â Â <strong>throws</strong>Â ExceptionÂ {Â Â </li>
<li>Â Â Â Â Â Â Â Â //Â å‡è®¾Â sessionÂ é‡Œæœ‰Â loginUserÂ æ‰è¡¨ç¤ºç™»å½•Â Â </li>
<li>Â Â Â Â Â Â Â Â ObjectÂ userÂ =Â request.getSession().getAttribute("loginUser");Â Â </li>
<li>Â Â Â Â Â Â Â Â <strong>if</strong>Â (userÂ ==Â <strong>null</strong>)Â {Â Â </li>
<li>Â Â Â Â Â Â Â Â Â Â Â Â response.sendRedirect("/login");Â //Â è·³è½¬åˆ°ç™»å½•é¡µÂ Â </li>
<li>Â Â Â Â Â Â Â Â Â Â Â Â <strong>return</strong>Â <strong>false</strong>;Â //Â æ‹¦æˆªÂ Â </li>
<li>Â Â Â Â Â Â Â Â }Â Â </li>
<li>Â Â Â Â Â Â Â Â <strong>return</strong>Â <strong>true</strong>;Â //Â æ”¾è¡ŒÂ Â </li>
<li>Â Â Â Â }Â Â </li>
<li>}Â </li>
</ol>
<h4 data-id="heading-3"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4.springäº‹åŠ¡å¤±æ•ˆçš„åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</h4>
<p>Â Â Â Â Â Â  äº‹åŠ¡åº•å±‚æ˜¯åŸºäºAOPå®ç°çš„ï¼Œè€ŒAOPæ˜¯é€šè¿‡ä»£ç†å¯¹è±¡å®ç°çš„ã€‚@Transactionalæ³¨è§£çš„å®ç°é€»è¾‘ï¼Œå¯ä¿®é¥°ç±»æˆ–æ–¹æ³•ï¼š</p>
<p>ï¼ˆ1ï¼‰å¯åŠ¨æ—¶æ‰«ææ³¨è§£</p>
<p>å½“Springå®¹å™¨å¯åŠ¨æ—¶ï¼ŒTransactionAnnotationParserä¼šæ‰«æ@Transactionalæ³¨è§£ï¼Œå¹¶å°†å…¶è§£æä¸ºä¸€ä¸ªTransactionAttributeå¯¹è±¡</p>
<p>ï¼ˆ2ï¼‰åˆ›å»ºä»£ç†å¯¹è±¡</p>
<p>Springä½¿ç”¨AOPä¸ºå¸¦æœ‰@Transactionalçš„ç±»ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œæ ¸å¿ƒæ˜¯TransactionInterceptor(äº‹åŠ¡æ‹¦æˆªå™¨ï¼‰</p>
<p>ï¼ˆ3ï¼‰æ–¹æ³•è°ƒç”¨æ‹¦æˆª</p>
<p>å½“å¤–éƒ¨è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•æ—¶ï¼Œäº‹åŠ¡æ‹¦æˆªå™¨ä¼šæ‹¦æˆªæ–¹æ³•è°ƒç”¨ï¼Œæ‹¦æˆªå™¨é€šè¿‡TransactionManageræ¥ç®¡ç†äº‹åŠ¡ï¼šåˆ¤æ–­å½“å‰æ˜¯å¦å­˜åœ¨äº‹åŠ¡ï¼Œå¦‚æœéœ€è¦æ–°å»ºäº‹åŠ¡å°±è°ƒç”¨begin( )æ–¹æ³•ï¼Œæ‰§è¡Œç›®æ ‡æ–¹æ³•ï¼Œæ–¹æ³•æ‰§è¡ŒæˆåŠŸåˆ™æäº¤äº‹åŠ¡ï¼Œå¼‚å¸¸æ—¶æ ¹æ®å›æ»šè§„åˆ™å†³å®šæ˜¯å¦å›æ»šã€‚</p>
<p>springäº‹åŠ¡å¤±æ•ˆçš„åœºæ™¯å¦‚ä¸‹ï¼š</p>
<p>ï¼ˆ1ï¼‰æ–¹æ³•æ²¡æœ‰ç”¨publicÂ ä¿®é¥°ï¼Œä»£ç†é»˜è®¤åªä¼šæ‹¦æˆªå…¬å…±æ–¹æ³•ï¼›</p>
<p>ï¼ˆ2ï¼‰åŒä¸€ä¸ªç±»ä¸­é€šè¿‡thisæ¥è°ƒç”¨äº‹åŠ¡æ–¹æ³•ï¼Œè¿™æ—¶å€™è°ƒç”¨ä¸ä¼šç»è¿‡ä»£ç†å¯¹è±¡ï¼ˆäº‹åŠ¡çš„å¼€å¯ã€æäº¤ã€å›æ»šç­‰é€»è¾‘éƒ½æ˜¯åœ¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•è°ƒç”¨é“¾ä¸­å®ç°çš„ï¼Œthisæ˜¯å½“å‰å¯¹è±¡æœ¬èº«ï¼Œä¸æ˜¯ä»£ç†å¯¹è±¡ï¼‰ã€‚è§£å†³æ–¹æ¡ˆï¼šé€šè¿‡å°†è‡ªè°ƒç”¨çš„æ–¹æ³•æå–åˆ°å¦ä¸€ä¸ªæœåŠ¡ç±»è§£å†³ï¼›</p>
<p>ï¼ˆ3ï¼‰äº‹åŠ¡æ³¨è§£æ ‡è®°åœ¨æ¥å£ä¸Šè€Œä¸æ˜¯å®ç°ç±»ä¸Šï¼›</p>
<p>ï¼ˆ4ï¼‰è‡ªå·±æ‰‹åŠ¨æ•è·å¼‚å¸¸æ²¡æœ‰æŠ›å‡ºï¼Œäº‹åŠ¡æ— æ³•çŸ¥æ‚‰</p>
<p>ï¼ˆ5ï¼‰äº‹åŠ¡é»˜è®¤åªä¼šå›æ»šè¿è¡Œæ—¶å¼‚å¸¸å’Œé”™è¯¯ã€‚å‘ç”Ÿå—æ£€æŸ¥å¼‚å¸¸æ—¶äº‹åŠ¡æ— æ³•å›æ»šï¼Œå¯é€šè¿‡åœ¨catchä¸­æŠ›å‡ºRuntimeExceptionå¼‚å¸¸ï¼›æˆ–è€…é€šè¿‡é…ç½®@Transactional(rollbackFor = Exception.class)è®¾ç½®å›æ»šæ‰€æœ‰å¼‚å¸¸ã€‚</p>
<ol>
<li>@ServiceÂ Â </li>
<li><strong>public</strong>Â <strong>class</strong>Â OrderServiceÂ {Â Â </li>
<li>Â Â Â </li>
<li>Â Â Â Â @AutowiredÂ Â </li>
<li>Â Â Â Â <strong>private</strong>Â OrderRepositoryÂ orderRepository;Â Â </li>
<li>Â Â Â </li>
<li>Â Â Â Â @TransactionalÂ Â </li>
<li>Â Â Â Â <strong>public</strong>Â <strong>void</strong>Â updatePriceWrong(LongÂ orderId)Â {Â Â </li>
<li>Â Â Â Â Â Â Â Â <strong>try</strong>Â {Â Â </li>
<li>Â Â Â Â Â Â Â Â Â Â Â Â //Â æ›´æ–°æ•°æ®åº“æ•°æ®Â Â </li>
<li>Â Â Â Â Â Â Â Â Â Â Â Â orderRepository.updatePrice(orderId,Â 20);Â Â </li>
<li>Â Â Â </li>
<li>Â Â Â Â Â Â Â Â Â Â Â Â //Â æŠ›å‡ºå—æ£€æŸ¥å¼‚å¸¸Â Â </li>
<li>Â Â Â Â Â Â Â Â Â Â Â Â <strong>throw</strong>Â <strong>new</strong>Â IOException("æ¨¡æ‹ŸIOå¼‚å¸¸");Â Â </li>
<li>Â Â Â Â Â Â Â Â }Â <strong>catch</strong>Â (IOExceptionÂ e)Â {Â Â </li>
<li>Â Â Â Â Â Â Â Â Â Â Â Â //Â æ‰‹åŠ¨æ•è·ï¼Œä½†æ²¡æœ‰ç»§ç»­æŠ›å‡ºÂ Â </li>
<li>Â Â Â Â Â Â Â Â Â Â Â Â System.out.println("æ•è·å¼‚å¸¸:Â "Â +Â e.getMessage());Â Â </li>
<li>Â Â Â Â Â Â Â Â }Â Â </li>
<li>Â Â Â Â Â Â Â Â //Â æ­¤æ—¶äº‹åŠ¡æ„ŸçŸ¥ä¸åˆ°å¼‚å¸¸ï¼Œæœ€ç»ˆæ•°æ®ä¼šæäº¤ï¼Â Â </li>
<li>Â Â Â Â }Â Â </li>
<li>}Â Â </li>
</ol>
<h4 data-id="heading-4"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5.springçš„IOCå®¹å™¨å’Œbeançš„åˆ›å»ºè¿‡ç¨‹ï¼Ÿ</h4>
<p>IOCå®¹å™¨çš„åˆ›å»ºè¿‡ç¨‹ä¸ºï¼š</p>
<p>ï¼ˆ1ï¼‰è¯»å–é…ç½®æ–‡ä»¶ï¼šåŠ è½½é…ç½®æ–‡ä»¶æˆ–é…ç½®ç±»ä¸­çš„Beanå®šä¹‰ï¼›</p>
<p>ï¼ˆ2ï¼‰åˆ›å»ºBeanFactoryï¼šåˆå§‹åŒ– DefaultListableBeanFactory ä½œä¸ºé»˜è®¤çš„Beanå·¥å‚ï¼Œæ¥ç®¡ç† Beançš„å®šä¹‰ï¼ˆBeanDefinitionï¼‰å’Œå®ä¾‹ï¼›</p>
<p>ï¼ˆ3ï¼‰è§£æBeanDefinitionï¼šSpringè§£ææ¯ä¸ªBeanï¼Œå°è£…æˆBeanDefinitionå¯¹è±¡ï¼Œå­˜å…¥BeanDefinitionMapä¸­ï¼›</p>
<p>ï¼ˆ4ï¼‰æ³¨å†ŒBeanDefinitionåˆ°BeanFactoryä¸­ï¼›</p>
<p>ï¼ˆ5ï¼‰åˆ›å»ºå•ä¾‹Beanï¼šApplicationContextåœ¨å®¹å™¨åˆ·æ–°æ—¶å°±åˆ›å»ºå•ä¾‹Bean</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0cde59d263bf45d38dc9399ac312ec77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770790935&amp;x-signature=i8%2BbRLJLAYxlc7q2gfKsn9AFHd4%3D" alt="" loading="lazy"/></p>
<p>ï¼ˆ1ï¼‰å®ä¾‹åŒ–ï¼šSpringå®¹å™¨å¯åŠ¨æ—¶ï¼Œæ ¹æ®XMLé…ç½®æ–‡ä»¶æˆ–æ³¨è§£æ‰«ææ¥è·å–Beançš„å®šä¹‰ä¿¡æ¯ï¼Œé€šè¿‡åå°„è°ƒç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºBeanå®ä¾‹ï¼›</p>
<p>ï¼ˆ2ï¼‰ä¾èµ–æ³¨å…¥ï¼šSpringå®¹å™¨æ ¹æ®Beançš„é…ç½®ï¼Œé€šè¿‡setteræ³¨å…¥ã€å­—æ®µæ³¨å…¥æˆ–æ„é€ å™¨æ³¨å…¥è¿›è¡Œä¾èµ–æ³¨å…¥ï¼›</p>
<p>ï¼ˆ3ï¼‰åˆå§‹åŒ–ï¼šSpringå®¹å™¨ä¸ºæ¯ä¸ªBeanè°ƒç”¨åˆå§‹åŒ–æ–¹æ³•ï¼Œæ¯”å¦‚Awareæ¥å£å›è°ƒã€å‰ç½®å¤„ç†ç­‰ï¼›</p>
<p>ï¼ˆ4ï¼‰ä½¿ç”¨Beanï¼šåœ¨å®¹å™¨ä¸­ï¼ŒBeanå¯ä»¥éšæ—¶è¢«è·å–å’Œä½¿ç”¨ï¼›</p>
<p>ï¼ˆ5ï¼‰é”€æ¯beanï¼šå½“å®¹å™¨å…³é—­æ—¶ï¼ŒSpringä¼šè°ƒç”¨Beançš„é”€æ¯æ–¹æ³•æ¥é”€æ¯bean</p>
<blockquote>
<blockquote>
<p><strong>ç¯‡å¹…é™åˆ¶ä¸‹é¢å°±åªèƒ½ç»™å¤§å®¶å±•ç¤ºå°å†Œéƒ¨åˆ†å†…å®¹äº†ã€‚æ•´ç†äº†ä¸€ä»½æ ¸å¿ƒé¢è¯•ç¬”è®°åŒ…æ‹¬äº†ï¼šJavaé¢è¯•ã€Springã€JVMã€MyBatisã€Redisã€MySQLã€å¹¶å‘ç¼–ç¨‹ã€å¾®æœåŠ¡ã€Linuxã€Springbootã€SpringCloudã€MQã€Kafka é¢è¯•ä¸“é¢˜</strong></p>
<blockquote>
</blockquote>
<p><strong>éœ€è¦å…¨å¥—é¢è¯•ç¬”è®°åŠç­”æ¡ˆã€æ‰«ä¸€æ‰«ã€‘</strong> Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â å³å¯å…è´¹è·å–**</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c8b2fbf827c4bc3a36a4ecf2594f783~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770790935&amp;x-signature=ZNvTYcwe5OnPdVt1oeJxu6OMXs8%3D" alt="8fbf1ef8b61e2dbbb33b7690a41d12e.png" loading="lazy"/></p>
</blockquote>
<h4 data-id="heading-5"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>6.èƒ½è¯´ä¸€ä¸‹Springä¸­çš„å¾ªç¯å¼•ç”¨å—ï¼Œæ€ä¹ˆè§£å†³</h4>
<p>Â Â Â Â Â Â  å¾ªç¯ä¾èµ–å°±æ˜¯ä¸¤ä¸ªæˆ–å¤šä¸ªæ¨¡å—ã€ç±»ï¼ˆBeanï¼‰ã€ç»„ä»¶ä¹‹é—´äº’ç›¸ä¾èµ–ï¼Œå½¢æˆä¸€ä¸ªé—­ç¯ã€‚å¾ªç¯ä¾èµ–åœ¨springä¸­æ˜¯å…è®¸çš„ï¼Œspringæ¡†æ¶åˆ©ç”¨ä¸‰çº§ç¼“å­˜èƒ½è§£å†³å¤§éƒ¨åˆ†çš„å¾ªç¯ä¾èµ–ï¼Œå…¶å…³é”®å°±æ˜¯è¦æå‰æš´éœ²æœªå®Œå…¨åˆ›å»ºå¥½çš„Beanã€‚</p>
<p>Â Â Â Â Â Â  ä¸€çº§ç¼“å­˜ï¼ˆSingleton Objects Mapï¼‰ï¼Œå•ä¾‹æ± ï¼Œç”¨æ¥å­˜å‚¨å®Œå…¨åˆå§‹åŒ–å¥½çš„å•ä¾‹Beanï¼›äºŒçº§ç¼“å­˜ï¼ˆEarly Singleton Objects Mapï¼‰ï¼šç”¨æ¥å­˜å‚¨å·²ç»å®ä¾‹åŒ–ä½†æœªå®Œå…¨åˆå§‹åŒ–çš„Beanï¼ˆç”¨äºæå‰æš´éœ²å¯¹è±¡ï¼‰ï¼›ä¸‰çº§ç¼“å­˜ï¼ˆSingleton Factories Mapï¼‰:ç”¨æ¥å­˜å‚¨å¯¹è±¡å·¥å‚ï¼Œå¯ä»¥é€šè¿‡å·¥å‚åˆ›å»ºæ—©æœŸBeanï¼ˆç”¨äºè§£å†³ä»£ç†å¯¹è±¡çš„åˆ›å»ºï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/141f822381644aea86f8ae7f43120483~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770790935&amp;x-signature=YENiQkRMbFXzjceJg2rgnEAtXa8%3D" alt="" loading="lazy"/></p>
<p>Â Â Â Â Â Â  ä¸€èˆ¬çš„å¾ªç¯ä¾èµ–ï¼Œæ¯”å¦‚Aå’ŒBå¯¹è±¡é€šè¿‡setteræ³¨å…¥å½¢æˆå¾ªç¯ä¾èµ–ï¼Œé¦–å…ˆåˆ›å»ºAå®ä¾‹ï¼Œå°†è¿™ä¸ªåŠæˆå“AåŠ å…¥åˆ°äºŒçº§ç¼“å­˜ä¸­ï¼Œæ¥ç€æ³¨å…¥ä¾èµ–Bï¼Œä»äºŒçº§ç¼“å­˜ä¸­è·å–åŠæˆå“Aå°†Båˆå§‹åŒ–ï¼Œ Båˆ›å»ºæˆåŠŸï¼Œå°†Bå­˜å‚¨åˆ°å•ä¾‹æ± ä¸­ï¼Œåœ¨å•ä¾‹æ± ä¸­å°†Bæ³¨å…¥ç»™Aï¼ŒAåˆ›å»ºæˆåŠŸï¼Œå­˜å‚¨åˆ°å•ä¾‹æ± ä¸­ï¼›ï¼ˆä½†äºŒçº§ç¼“å­˜ä¸èƒ½è§£å†³ä»£ç†å¯¹è±¡ï¼Œæ‰€ä»¥å¼•å…¥äº†ä¸‰çº§ç¼“å­˜ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e17b98bce5ca4500b6d0822cd4b6b725~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770790935&amp;x-signature=a2GUhAca2p6RQqWUgWJ9AgyJnto%3D" alt="" loading="lazy"/></p>
<p>Â Â Â Â Â Â  åˆ›å»ºAå®ä¾‹ï¼Œå°†å¯¹è±¡Aç”ŸæˆObjectFactoryå¯¹è±¡æ”¾å…¥åˆ°ä¸‰çº§ç¼“å­˜ä¸­ï¼Œæ¥ç€æ³¨å…¥Bï¼Œå‘ç°Bä¸å­˜åœ¨ï¼Œå®ä¾‹åŒ–Bï¼ŒBä¹Ÿç”ŸæˆObjectFactoryå¯¹è±¡æ”¾å…¥ä¸‰çº§ç¼“å­˜ï¼ŒBä»ä¸‰çº§ç¼“å­˜ä¸­è·å–Aå¯¹è±¡å·¥å‚åˆ›å»ºçš„ä»£ç†å¯¹è±¡ï¼Œä»£ç†å¯¹è±¡æ”¾å…¥äºŒçº§ç¼“å­˜ä¸­ï¼Œå°†Açš„ä»£ç†å¯¹è±¡æ³¨å…¥ç»™Bï¼ŒBåˆ›å»ºæˆåŠŸæ”¾å…¥å•ä¾‹æ± ï¼Œæœ€åå°†Bæ³¨å…¥ç»™Aï¼ŒAä¹Ÿåˆ›å»ºæˆåŠŸæ”¾å…¥å•ä¾‹æ± ï¼›</p>
<p>ä»¥ä¸Šçš„æ–¹æ³•æœ‰ä¸¤ç§æ¡ä»¶ï¼š1.ä¾èµ–çš„Beanå¿…é¡»æ˜¯å•ä¾‹ï¼›2.ä¸æ˜¯é€šè¿‡æ„é€ å™¨æ³¨å…¥ä¾èµ–çš„ã€‚å¯¹äºæ„é€ è¡Œå¾ªç¯ä¾èµ–å¯ä»¥ä½¿ç”¨@Lazy æ³¨è§£è¿›è¡Œæ‡’åŠ è½½æ¥å®ç°ã€‚</p>
<h4 data-id="heading-6"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>7.èƒ½è¯´ä¸€ä¸‹SpringMVCçš„æ‰§è¡Œæµç¨‹å—ï¼Ÿ</h4>
<p>Â Â Â Â Â Â  SpringMVC æ˜¯Springæ¡†æ¶ä¸­ç”¨äºæ„å»ºWebåº”ç”¨ç¨‹åºçš„æ ¸å¿ƒæ¨¡å—ï¼Œä»¥å‰ç«¯æ§åˆ¶å™¨ä¸ºåŸºç¡€ï¼ˆç±»ä¼¼äºè°ƒåº¦å™¨ï¼‰ï¼Œæä¾›äº†ä¸€å¥—çµæ´»å¼ºå¤§çš„ç»„ä»¶æ¥å¤„ç†HTTPè¯·æ±‚ã€ä¸šåŠ¡é€»è¾‘å’Œè§†å›¾æ¸²æŸ“</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecd8ef1b25f740bb971f25c13e46c6db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770790935&amp;x-signature=fNPyjCw9%2FJLCRRALd405OVsCzeA%3D" alt="" loading="lazy"/></p>
<p>ï¼ˆ1ï¼‰å‘é€è¯·æ±‚ï¼šå®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼Œè¢«å‰ç«¯æ§åˆ¶å™¨æ‹¦æˆªï¼Œå°†è¯·æ±‚å‘é€ç»™å¤„ç†å™¨æ˜ å°„å™¨ï¼›</p>
<p>ï¼ˆ2ï¼‰å¤„ç†å™¨æ˜ å°„ï¼šå¤„ç†å™¨æ˜ å°„å™¨æ ¹æ®URLæ‰¾åˆ°å¯¹åº”çš„Controllerç±»å’Œæ–¹æ³•ï¼›</p>
<p>ï¼ˆ3ï¼‰å¤„ç†å™¨é€‚é…ï¼šæ‰¾åˆ°å¤„ç†å™¨åï¼Œå‰ç«¯æ§åˆ¶å™¨äº¤ç»™å¤„ç†å™¨é€‚é…å™¨æ‰§è¡Œï¼Œå¤„ç†å™¨é€‚é…å™¨å¤„ç†å‚æ•°ï¼Œå°†è¯·æ±‚å‚æ•°ç»‘å®šåˆ°æ–¹æ³•å‚æ•°æˆ–å¯¹è±¡é‡Œ</p>
<p>ï¼ˆ4ï¼‰è°ƒç”¨å¤„ç†å™¨ï¼šå¤„ç†å™¨é€‚é…å™¨é€šè¿‡åå°„è°ƒç”¨Controllerä¸­çš„ä¸šåŠ¡æ–¹æ³•ï¼Œè¿”å›å¯¹è±¡æ•°æ®ï¼›</p>
<p>ï¼ˆ5ï¼‰å“åº”æ•°æ®ï¼šå°†å¯¹è±¡è½¬åŒ–ä¸ºJSONï¼Œè¿”å›ç»™å‰ç«¯æ¸²æŸ“é¡µé¢ï¼›</p>
<h4 data-id="heading-7"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>8.[SpringBoot]çš„è‡ªåŠ¨é…ç½®åŸç†èƒ½è¯´ä¸€ä¸‹å—ï¼Ÿ</h4>
<p>Â Â Â Â Â Â  SprintBooté¡¹ç›®ä¸­çš„å¯åŠ¨ç±»ä¸Šæœ‰ä¸€ä¸ªæ³¨è§£@SpringBootApplicationï¼Œè¿™ä¸ªæ³¨è§£å°è£…@EnableAutoConfigurationæ³¨è§£ï¼šç”¨æ¥å¯åŠ¨SpringBootçš„è‡ªåŠ¨é…ç½®æœºåˆ¶ï¼Œé€šè¿‡@Import å¯¼å…¥äº†Â AutoConfigurationImportSelector <strong>ï¼Œ</strong> åœ¨SpringBootå¯åŠ¨æ—¶ï¼Œä¼šæ‰«æMETA-INF/ spring.factoriesæ–‡ä»¶ï¼ˆspringboot2ï¼‰/ AutoConfiguration.importï¼ˆspringboot3ï¼‰ï¼Œæ–‡ä»¶é‡Œåˆ—å‡ºäº†æ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»çš„è·¯å¾„ä½ç½®ï¼Œé…ç½®ç±»é€šè¿‡å„ç§@Conditionalæ¡ä»¶æ³¨è§£åŠ¨æ€åŠ è½½æ»¡è¶³æ¡ä»¶çš„beanï¼Œå°†å…¶å¯¼å…¥åˆ°Springå®¹å™¨ä¸­ï¼›</p>
<p>å¸¸è§çš„æœ‰ï¼š</p>
<ul>
<li>@ConditionalOnClassï¼šæŸä¸ªç±»åœ¨ classpath ä¸‹æ‰ç”Ÿæ•ˆï¼ˆæ¯”å¦‚ JdbcTemplateï¼‰ã€‚</li>
<li>@ConditionalOnMissingBeanï¼šå¦‚æœç”¨æˆ·æ²¡æœ‰è‡ªå®šä¹‰è¿™ä¸ª Beanï¼Œæ‰æ³¨å…¥é»˜è®¤çš„ Beanã€‚</li>
<li>@ConditionalOnPropertyï¼šé…ç½®æ–‡ä»¶ä¸­å­˜åœ¨æŸä¸ªé…ç½®é¡¹æ—¶æ‰ç”Ÿæ•ˆã€‚</li>
</ul>
<p>ğŸ‘‰ è¿™ä¿è¯äº†Â <strong>é»˜è®¤ç”Ÿæ•ˆï¼Œä½†å…è®¸ç”¨æˆ·è¦†ç›–</strong>ã€‚</p>
<h4 data-id="heading-8"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>9.Springä¸­çš„å¸¸ç”¨æ³¨è§£æœ‰å“ªäº›ï¼Ÿ</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/030038dcf6e945d79ff9f5e4c7436f11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770790935&amp;x-signature=6nGq%2F2045YEYg37%2B11omNpMsq08%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea35402f1d0b4cef9858ff3d1970fdcf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770790935&amp;x-signature=fSfM4TyGM97ZOoFrTVys3ilkUxo%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e8a5e2ae1b546098312c5e8325be2d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770790935&amp;x-signature=9hHZaEtVSRZo63kuweUkqs5Mqy4%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-9"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>10.Mybatisçš„æ‰§è¡Œæµç¨‹ï¼Ÿ</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b43e8ac1d02b474690414431c0200393~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770790935&amp;x-signature=hMzktBlaHKuUnZdKJbywbFhTrao%3D" alt="" loading="lazy"/></p>
<p>ï¼ˆ1ï¼‰é…ç½®åŠ è½½é˜¶æ®µï¼šè§£æMybatisé…ç½®æ–‡ä»¶ï¼ˆå¦‚XMLæ–‡ä»¶ï¼Œæˆ–ç›´æ¥æ·»åŠ ä¾èµ–ï¼Œåœ¨ .yml æ–‡ä»¶ä¸Šé…ç½®Mybatisï¼‰æ ¹æ®é…ç½®æ–‡ä»¶åˆ›å»ºä¼šè¯å·¥å‚SqlSessionFactoryï¼›</p>
<p>ï¼ˆ2ï¼‰SQLæ‰§è¡Œé˜¶æ®µï¼šé€šè¿‡ä¼šè¯å·¥å‚åˆ›å»ºä¼šè¯SqlSessionå®ä¾‹ï¼ˆå°è£…äº†JDBCæ“ä½œï¼ŒåŒ…å«äº†æ‰§è¡ŒSQLè¯­å¥çš„æ–¹æ³•ï¼‰ï¼›é€šè¿‡åŠ¨æ€ä»£ç†ç”ŸæˆMapperæ¥å£çš„å®ä¾‹ï¼›é€šè¿‡Executoræ‰§è¡ŒSQLè¯­å¥ï¼š1.å°†Javaå¯¹è±¡å±æ€§è½¬æ¢ä¸ºSQLå‚æ•°ï¼Œ2.è¿›è¡ŒSQLè§£æï¼Œæ›¿æ¢${ } å’Œ #{ }ï¼Œç”Ÿæˆæœ€ç»ˆçš„SQLæ‰§è¡Œï¼Œå°†ç»“æœè½¬æ¢ä¸ºJavaå¯¹è±¡ï¼›</p>
<p>ï¼ˆ3ï¼‰é‡Šæ”¾èµ„æºé˜¶æ®µï¼šMybatisè¿˜æä¾›äº†äº‹åŠ¡çš„ç®¡ç†ï¼Œæ”¯æŒè‡ªåŠ¨æäº¤å’Œæ‰‹åŠ¨æ§åˆ¶äº‹åŠ¡ï¼›æœ€åé‡Šæ”¾SqlSessionå¯¹è±¡èµ„æºï¼Œå…³é—­æ•°æ®åº“è¿æ¥</p>
<h4 data-id="heading-10"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>11.springçš„æ ¸å¿ƒæ˜¯ä»€ä¹ˆï¼Ÿï¼ˆé‡ç‚¹ï¼‰</h4>
<p>ï¼ˆ1ï¼‰ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼ŒDIï¼‰</p>
<p>ä¾èµ–æ³¨å…¥æ˜¯ Spring æ¡†æ¶çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œå®ƒæ˜¯åŸºäºæ§åˆ¶åè½¬ï¼ˆIoCï¼ŒInversion of Controlï¼‰æ¥å®ç°ã€‚ä¼ ç»Ÿçš„å¼€å‘ä¸­ï¼Œç»„ä»¶é€šå¸¸ä¼šæ˜¾å¼åœ°åˆ›å»ºå…¶ä¾èµ–çš„å¯¹è±¡ï¼Œè€Œåœ¨ Spring ä¸­ï¼Œ IoC å®¹å™¨è´Ÿè´£ç®¡ç†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸåŠå…¶ä¾èµ–å…³ç³»ã€‚</p>
<p>ç®€åŒ–å¼€å‘ï¼šé€šè¿‡å°†å¯¹è±¡çš„åˆ›å»ºå’Œç®¡ç†äº¤ç»™ Spring å®¹å™¨ï¼Œå¼€å‘è€…åªéœ€è¦å…³æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œè€Œæ— éœ€æ‰‹åŠ¨åˆ›å»ºå’Œç®¡ç†å¯¹è±¡çš„å®ä¾‹ã€‚</p>
<p>è§£è€¦ï¼šå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ç”± Spring å®¹å™¨ç®¡ç†ï¼Œè€Œä¸æ˜¯ç¡¬ç¼–ç åœ¨ä»£ç ä¸­ï¼Œè¿™æ ·å¯ä»¥é™ä½æ¨¡å—ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæé«˜ä»£ç çš„çµæ´»æ€§å’Œå¯æµ‹è¯•æ€§ã€‚</p>
<p>ä¾èµ–æ³¨å…¥æ–¹å¼ï¼š</p>
<ol>
<li>æ„é€ å™¨æ³¨å…¥ï¼šé€šè¿‡æ„é€ å™¨ä¼ é€’ä¾èµ–å¯¹è±¡ã€‚</li>
<li>Setter æ³¨å…¥ï¼šé€šè¿‡ setter æ–¹æ³•æ³¨å…¥ä¾èµ–å¯¹è±¡ã€‚</li>
<li>å­—æ®µæ³¨å…¥ï¼šç›´æ¥åœ¨å­—æ®µä¸Šä½¿ç”¨æ³¨è§£æ¥æ³¨å…¥ä¾èµ–ã€‚</li>
</ol>
<p>æ³¨æ„ï¼šå®˜æ–¹æ¨èä½¿ç”¨æ„é€ å™¨æ³¨å…¥çš„æ–¹å¼ï¼ˆå› ä¸ºä¾èµ–å¯¹è±¡å®šä¹‰å¾€å¾€ç”¨finalä¿®é¥°ï¼Œç¡®ä¿äº†ä¾èµ–çš„ä¸å¯å˜æ€§å’Œä¸ä¸ºnullï¼Œæ›´åŠ ç¨³å®šï¼‰ï¼Œä½†ä¼ä¸šä¸­å¸¸ç”¨çš„æ˜¯å­—æ®µæ³¨å…¥ï¼Œæ›´åŠ æ–¹ä¾¿ï¼›</p>
<ol>
<li>é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAspect-Oriented Programmingï¼ŒAOPï¼‰</li>
</ol>
<p>AOPç§°ä¸ºé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯å°†ç±»ä¸­çš„å…¬å…±è¡Œä¸ºï¼ˆæ¨ªåˆ‡å…³æ³¨ç‚¹ï¼‰åˆ‡å‰²å‡ºæ¥ï¼Œå°è£…ä¸ºä¸€ä¸ªå¯é‡ç”¨çš„æ¨¡å—ï¼ˆåˆ‡é¢ç±»ï¼‰ï¼Œåœ¨åˆ‡é¢ç±»ä¸­å®šä¹‰äº†åˆ‡å…¥ç‚¹å’Œé€šçŸ¥ã€‚ä½œç”¨æ˜¯å‡å°‘ç³»ç»Ÿä¸­çš„é‡å¤ä»£ç ï¼Œé™ä½æ¨¡å—ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæé«˜å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ï¼›</p>
<p>Â Â Â Â Â Â  è€Œæˆ‘åœ¨é¡¹ç›®ä¸­ä¹Ÿç»å¸¸ç”¨åˆ°AOPï¼Œæ¯”å¦‚æœ‰å¾ˆå¤šæ•°æ®åº“è¡¨éƒ½æœ‰ä¸€äº›å…¬å…±å­—æ®µï¼ˆcreateTime, updateTime, createUser, updateUserï¼‰ï¼Œæ¯æ¬¡å¯¹è¿™äº›è¡¨è¿›è¡Œæ’å…¥æˆ–ä¿®æ”¹æ“ä½œéƒ½è¦æ›´æ–°è¿™äº›å…¬å…±å­—æ®µï¼Œæ‰€ä»¥å¯ä»¥åˆ©ç”¨AOPå°è£…ä¸€ä¸ªæ¨¡å—ï¼Œæ ¹æ®å½“å‰æ—¶é—´ã€ç”¨æˆ·IDå¯¹å±æ€§èµ‹å€¼ï¼Œåœ¨mapperä¸­æ·»åŠ æ³¨è§£å°±å®ç°äº†å…¬å…±å­—æ®µçš„è‡ªåŠ¨å¡«å……åŠŸèƒ½ã€‚</p>
<p>Â Â Â Â Â Â  è€ŒAOPåœ¨ä¸€äº›ä¸šåŠ¡åœºæ™¯ç”¨çš„æ¯”è¾ƒå¤šçš„æ¯”å¦‚ï¼šè®°å½•æ“ä½œæ—¥å¿—ã€ç¼“å­˜å¤„ç†ç­‰ç­‰ã€‚</p>
<p>ï¼ˆ3ï¼‰Spring çš„ IoC å®¹å™¨</p>
<p>IOCï¼ˆInversion of Controlï¼‰ï¼Œæ§åˆ¶åè½¬ï¼Œè¿™æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯å°†å¯¹è±¡çš„åˆ›å»ºã€ä¾èµ–æ³¨å…¥å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†äº¤ç»™IOCå®¹å™¨ã€‚åœ¨ä¼ ç»Ÿçš„ç¼–ç¨‹æ–¹å¼ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬éœ€è¦åœ¨ç±»ä¸­æ˜¾ç¤ºåœ°åˆ›å»ºä¾èµ–å¯¹è±¡ï¼Œé€šè¿‡ç¡¬ç¼–ç æ–¹å¼æ¥æ§åˆ¶å¯¹è±¡çš„åˆ›å»ºå’Œç®¡ç†ï¼Œè€Œåœ¨Springä¸­ï¼ŒBeanä»¥åŠå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»éƒ½äº¤ç»™IOCå®¹å™¨è´Ÿè´£ï¼Œé™ä½äº†ä»£ç ä¹‹é—´çš„è€¦åˆåº¦ï¼Œä¹Ÿæé«˜äº†ç³»ç»Ÿçš„çµæ´»æ€§ï¼›</p>
<p>Springä¸­ä¸»è¦æ˜¯é€šè¿‡XMLé…ç½®å’Œæ³¨è§£é…ç½®ï¼ˆ@Component ã€@Autowiredã€@Configurationï¼‰ä¸¤ç§æ–¹å¼æ¥æ³¨å†ŒBean</p>
<p>ä¾‹å¦‚ï¼šä½¿ç”¨AOPçµ¦ä¸šåŠ¡æ·»åŠ æ—¥å¿—è®°å½•</p>
<ol>
<li>@AspectÂ Â Â  //Â å®šä¹‰ä¸ºåˆ‡é¢ç±»</li>
<li>@ComponentÂ Â </li>
<li><strong>public</strong>Â <strong>class</strong>Â LogAspectÂ {Â Â </li>
<li>Â Â </li>
<li>Â Â Â Â //Â 1.Â åˆ‡å…¥ç‚¹ï¼šæ‹¦æˆªæ‰€æœ‰Â serviceÂ åŒ…ä¸‹çš„æ–¹æ³•Â Â </li>
<li>Â Â Â Â @Pointcut("execution(*Â com.example.service.<em>.</em>(..))")Â Â </li>
<li>Â Â Â Â <strong>public</strong>Â <strong>void</strong>Â serviceMethods()Â {}Â Â </li>
<li>Â Â </li>
<li>Â Â Â Â //Â 2.Â å‰ç½®é€šçŸ¥ï¼šæ–¹æ³•æ‰§è¡Œå‰è®°å½•Â Â </li>
<li>Â Â Â Â @Before("serviceMethods()")Â Â </li>
<li>Â Â Â Â <strong>public</strong>Â <strong>void</strong>Â beforeMethod(JoinPointÂ joinPoint)Â {Â Â </li>
<li>Â Â Â Â Â Â Â Â StringÂ methodNameÂ =Â joinPoint.getSignature().getName();Â Â </li>
<li>Â Â Â Â Â Â Â Â Object[]Â argsÂ =Â joinPoint.getArgs();Â Â </li>
<li>Â Â Â Â Â Â Â Â System.out.println("[å‰ç½®æ—¥å¿—]Â æ­£åœ¨è°ƒç”¨æ–¹æ³•ï¼š"Â +Â methodNameÂ +Â "ï¼Œå‚æ•°ï¼š"Â +Â Arrays.toString(args));Â Â </li>
<li>Â Â Â Â }Â Â </li>
<li>Â Â </li>
<li>Â Â Â Â //Â 3.Â åç½®é€šçŸ¥ï¼šæ–¹æ³•æ‰§è¡Œåè®°å½•Â Â </li>
<li>Â Â Â Â @AfterReturning(valueÂ =Â "serviceMethods()",Â returningÂ =Â "result")Â Â </li>
<li>Â Â Â Â <strong>public</strong>Â <strong>void</strong>Â afterMethod(JoinPointÂ joinPoint,Â ObjectÂ result)Â {Â Â </li>
<li>Â Â Â Â Â Â Â Â StringÂ methodNameÂ =Â joinPoint.getSignature().getName();Â Â </li>
<li>Â Â Â Â Â Â Â Â System.out.println("[åç½®æ—¥å¿—]Â æ–¹æ³•ï¼š"Â +Â methodNameÂ +Â "Â è¿”å›å€¼ï¼š"Â +Â result);Â Â </li>
<li>Â Â Â Â }Â Â </li>
<li>Â Â </li>
<li>Â Â Â Â //Â 4.Â å¼‚å¸¸é€šçŸ¥ï¼šå‡ºç°å¼‚å¸¸æ—¶è®°å½•Â Â </li>
<li>Â Â Â Â @AfterThrowing(valueÂ =Â "serviceMethods()",Â throwingÂ =Â "ex")Â Â </li>
<li>Â Â Â Â <strong>public</strong>Â <strong>void</strong>Â afterThrowingMethod(JoinPointÂ joinPoint,Â ExceptionÂ ex)Â {Â Â </li>
<li>Â Â Â Â Â Â Â Â StringÂ methodNameÂ =Â joinPoint.getSignature().getName();Â Â </li>
<li>Â Â Â Â Â Â Â Â System.out.println("[å¼‚å¸¸æ—¥å¿—]Â æ–¹æ³•ï¼š"Â +Â methodNameÂ +Â "Â æŠ›å‡ºäº†å¼‚å¸¸ï¼š"Â +Â ex.getMessage());Â Â </li>
<li>Â Â Â Â }Â Â </li>
<li>}Â Â </li>
</ol>
<blockquote>
<blockquote>
<p><strong>ç¯‡å¹…é™åˆ¶ä¸‹é¢å°±åªèƒ½ç»™å¤§å®¶å±•ç¤ºå°å†Œéƒ¨åˆ†å†…å®¹äº†ã€‚æ•´ç†äº†ä¸€ä»½æ ¸å¿ƒé¢è¯•ç¬”è®°åŒ…æ‹¬äº†ï¼šJavaé¢è¯•ã€Springã€JVMã€MyBatisã€Redisã€MySQLã€å¹¶å‘ç¼–ç¨‹ã€å¾®æœåŠ¡ã€Linuxã€Springbootã€SpringCloudã€MQã€Kafka é¢è¯•ä¸“é¢˜</strong></p>
<blockquote>
</blockquote>
<p><strong>éœ€è¦å…¨å¥—é¢è¯•ç¬”è®°åŠç­”æ¡ˆã€æ‰«ä¸€æ‰«ã€‘</strong> Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â å³å¯å…è´¹è·å–**</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c8b2fbf827c4bc3a36a4ecf2594f783~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770790935&amp;x-signature=ZNvTYcwe5OnPdVt1oeJxu6OMXs8%3D" alt="8fbf1ef8b61e2dbbb33b7690a41d12e.png" loading="lazy"/></p>
</blockquote>
<h4 data-id="heading-11"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>12. ObjectFactory å’Œ BeanFacotryçš„åŒºåˆ«ï¼Ÿ</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e99fbe1b14f9480cb20019f0af147b25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770790935&amp;x-signature=4uqGzNFbWLNdTMSt8xG7SvRy%2FQA%3D" alt="" loading="lazy"/></p>
<p>BeanFactoryå®é™…å°±æ˜¯IOCå®¹å™¨ï¼Œè€ŒObjectFactoryçš„ä½œç”¨å¦‚ä¸‹ï¼š</p>
<p>ï¼ˆ1ï¼‰å½“éœ€è¦æ¨è¿Ÿå¯¹è±¡çš„åˆ›å»ºæ¥é¿å…å¾ªç¯ä¾èµ–æˆ–ä¼˜åŒ–æ€§èƒ½æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ObjectFactory</p>
<p>ï¼ˆ2ï¼‰åœ¨å•ä¾‹Beanä¸­æ³¨å…¥ä¸€ä¸ªçŸ­ä½œç”¨åŸŸçš„Beanæ—¶ï¼Œå¯ä»¥é€šè¿‡ObjectFactoryç¡®ä¿è·å–æœ€æ–°çš„å®ä¾‹</p>
<h4 data-id="heading-12"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>13.Spring Beanä¸€å…±æœ‰å‡ ç§ä½œç”¨åŸŸï¼Ÿ</h4>
<p>Â Â Â Â Â Â  åœ¨æ³¨è§£é…ç½®@Scopeæˆ–XMLé…ç½®scopeå±æ€§å°±å¯ä»¥è®¾ç½®Beançš„ä½œç”¨åŸŸã€‚</p>
<p>ï¼ˆ1ï¼‰singletonï¼ˆé»˜è®¤ï¼‰ï¼Œæ¯ä¸ªIOCå®¹å™¨ä»…å­˜åœ¨ä¸€ä¸ªå®ä¾‹ï¼Œæ‰€æœ‰ä¾èµ–æ³¨å…¥å…±äº«åŒä¸€ä¸ªå¯¹è±¡ï¼›</p>
<p>ï¼ˆ2ï¼‰prototypeï¼šæ¯æ¬¡æ³¨å…¥ä¾èµ–ï¼ˆæˆ–getBean( )æ–¹æ³•ï¼‰éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹ï¼›</p>
<p>ï¼ˆ3ï¼‰requestï¼šæ¯ä¸ªHTTPè¯·æ±‚åˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹ï¼Œä»…åœ¨Webåº”ç”¨ä¸­æœ‰æ•ˆï¼›</p>
<p>ï¼ˆ4ï¼‰sessionï¼šæ¯ä¸ªHTTP Sessionåˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œç”¨æˆ·ä¼šè¯æœŸé—´å…±äº«ï¼›</p>
<p>ï¼ˆ5ï¼‰applicationï¼šæ¯ä¸ªServletContextç”Ÿå‘½å‘¨æœŸå†…ä¸€ä¸ªå®ä¾‹ï¼›</p>
<p>ï¼ˆ6ï¼‰websocketï¼šæ¯ä¸ªwebsocketä¼šè¯ä¸€ä¸ªå®ä¾‹ï¼Œç”Ÿå‘½å‘¨æœŸå’Œwebsocketè¿æ¥ä¸€è‡´ï¼›</p>
<h4 data-id="heading-13"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>14.Springæ‹¦æˆªé“¾çš„å®ç°ï¼Ÿ</h4>
<p>Â Â Â Â Â Â  åœ¨Springæ¡†æ¶ä¸­ï¼Œæ‹¦æˆªé“¾é€šè¿‡è´£ä»»é“¾æ¨¡å¼å®ç°ï¼Œæ ¸å¿ƒç›®çš„æ˜¯å°†å¤šä¸ªæ‹¦æˆªå™¨ï¼ˆæˆ–é€šçŸ¥ï¼‰æŒ‰é¡ºåºç»„ç»‡ï¼Œåœ¨ç›®æ ‡æ–¹æ³•æˆ–è¯·æ±‚å¤„ç†çš„ä¸åŒé˜¶æ®µä¾æ¬¡è§¦å‘ï¼š</p>
<p>Â Â Â Â Â Â  åœ¨Spring Webä¸­ï¼Œæ‹¦æˆªå™¨å®ç°HandlerInterceptoræ¥å£ï¼Œç¼–å†™preHandelã€postHandleã€afterCompletionæ–¹æ³•å®ç°ä¸šåŠ¡æ‰§è¡Œå‰åé€»è¾‘æ·»åŠ ï¼ˆå¦‚æƒé™æ ¡éªŒã€æ—¥å¿—è®°å½•ï¼‰ï¼Œå¦å¤–éœ€è¦ç¼–å†™ä¸€ä¸ªå®ç°WebMvcConfigureræ¥å£çš„é…ç½®ç±»ï¼Œæ³¨å†Œæ‹¦æˆªå™¨ï¼Œè®¾ç½®å“ªäº›è·¯å¾„éœ€è¦æ‹¦æˆªå’Œæ”¾è¡Œï¼Œ</p>
<p>æ‰§è¡Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<p>ï¼ˆ1ï¼‰åˆå§‹åŒ–é“¾ï¼šæ ¹æ®Handerï¼ˆå¤„ç†å™¨/controllerå±‚ï¼‰å¯¹åº”çš„URLå’Œæ‹¦æˆªå™¨åˆ—è¡¨é…ç½®ï¼Œåˆ›å»ºå¤„ç†å™¨æ‰§è¡Œé“¾ï¼›</p>
<p>ï¼ˆ2ï¼‰preHandelé˜¶æ®µï¼šæŒ‰æ‹¦æˆªå™¨é…ç½®é¡ºåºä¾æ¬¡è°ƒç”¨preHandleæ–¹æ³•ã€‚å¦‚æœæŸä¸ªæ‹¦æˆªå™¨è¿”å›falseï¼Œç»ˆæ­¢åç»­æ‹¦æˆªå™¨å’Œhandlerçš„æ‰§è¡Œï¼›</p>
<p>ï¼ˆ3ï¼‰æ‰§è¡Œhandlerï¼šè°ƒç”¨Controlleræ–¹æ³•å¤„ç†è¯·æ±‚ï¼›</p>
<p>ï¼ˆ4ï¼‰postHandleré˜¶æ®µï¼šæŒ‰æ‹¦æˆªå™¨é…ç½®çš„é€†åºè°ƒç”¨postHandle( );</p>
<p>ï¼ˆ5ï¼‰æ¸²æŸ“è§†å›¾ï¼šå¤„ç†ModelAndViewï¼Œç”Ÿæˆç›¸åº”å†…å®¹ï¼›</p>
<p>ï¼ˆ6ï¼‰afterCompletioné˜¶æ®µï¼šæ— è®ºè¯·æ±‚æˆåŠŸæˆ–å¼‚å¸¸ï¼ŒæŒ‰æ‹¦æˆªå™¨é…ç½®çš„é€†åºè°ƒç”¨afterCompletionæ–¹æ³•</p>
<p><strong>âœ… 1.</strong> <strong>ç¼–å†™æ‹¦æˆªå™¨ç±»</strong></p>
<ol>
<li><strong>import</strong>Â org.springframework.stereotype.Component;Â Â </li>
<li><strong>import</strong>Â org.springframework.web.servlet.HandlerInterceptor;Â Â </li>
<li><strong>import</strong>Â javax.servlet.http.HttpServletRequest;Â Â </li>
<li><strong>import</strong>Â javax.servlet.http.HttpServletResponse;Â Â </li>
<li>Â Â </li>
<li>@ComponentÂ Â </li>
<li><strong>public</strong>Â <strong>class</strong>Â LogInterceptorÂ <strong>implements</strong>Â HandlerInterceptorÂ {Â Â </li>
<li>Â Â </li>
<li>Â Â Â Â /**Â </li>
<li>Â Â Â Â Â *Â åœ¨è¯·æ±‚å¤„ç†ä¹‹å‰æ‰§è¡Œï¼ˆControlleræ–¹æ³•è°ƒç”¨å‰ï¼‰Â </li>
<li>Â Â Â Â Â *Â @returnÂ trueÂ è¡¨ç¤ºç»§ç»­æµç¨‹ï¼ŒfalseÂ è¡¨ç¤ºæ‹¦æˆªè¯·æ±‚Â </li>
<li>Â Â Â Â Â */Â Â </li>
<li>Â Â Â Â @OverrideÂ Â </li>
<li>Â Â Â Â <strong>public</strong>Â <strong>boolean</strong>Â preHandle(HttpServletRequestÂ request,Â Â </li>
<li>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â HttpServletResponseÂ response,Â Â </li>
<li>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ObjectÂ handler)Â <strong>throws</strong>Â ExceptionÂ {Â Â </li>
<li>Â Â Â Â Â Â Â Â StringÂ uriÂ =Â request.getRequestURI();Â Â </li>
<li>Â Â Â Â Â Â Â Â System.out.println("æ‹¦æˆªå™¨æ—¥å¿—ï¼šè¯·æ±‚Â URIÂ ä¸ºï¼š"Â +Â uri);Â Â </li>
<li>Â Â Â Â Â Â Â Â <strong>return</strong>Â <strong>true</strong>;Â Â </li>
<li>Â Â Â Â }Â Â </li>
<li>Â Â </li>
<li>Â Â Â Â /**Â </li>
<li>Â Â Â Â Â *Â è¯·æ±‚å¤„ç†ä¹‹åæ‰§è¡Œï¼ˆControlleræ–¹æ³•è°ƒç”¨ä¹‹åï¼‰Â </li>
<li>Â Â Â Â Â */Â Â </li>
<li>Â Â Â Â @OverrideÂ Â </li>
<li>Â Â Â Â <strong>public</strong>Â <strong>void</strong>Â postHandle(HttpServletRequestÂ request,Â Â </li>
<li>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â HttpServletResponseÂ response,Â Â </li>
<li>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ObjectÂ handler,Â Â </li>
<li>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â org.springframework.web.servlet.ModelAndViewÂ modelAndView)Â <strong>throws</strong>Â ExceptionÂ {Â Â </li>
<li>Â Â Â Â Â Â Â Â System.out.println("æ‹¦æˆªå™¨æ—¥å¿—ï¼šè¯·æ±‚å¤„ç†å®Œæˆï¼ˆpostHandleï¼‰");Â Â </li>
<li>Â Â Â Â }Â Â </li>
<li>Â Â </li>
<li>Â Â Â Â /**Â </li>
<li>Â Â Â Â Â *Â è¯·æ±‚å®Œå…¨å®Œæˆä¹‹åæ‰§è¡Œï¼ˆåŒ…æ‹¬è§†å›¾æ¸²æŸ“åï¼‰Â </li>
<li>Â Â Â Â Â */Â Â </li>
<li>Â Â Â Â @OverrideÂ Â </li>
<li>Â Â Â Â <strong>public</strong>Â <strong>void</strong>Â afterCompletion(HttpServletRequestÂ request,Â Â </li>
<li>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â HttpServletResponseÂ response,Â Â </li>
<li>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ObjectÂ handler,Â Â </li>
<li>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ExceptionÂ ex)Â <strong>throws</strong>Â ExceptionÂ {Â Â </li>
<li>Â Â Â Â Â Â Â Â System.out.println("æ‹¦æˆªå™¨æ—¥å¿—ï¼šè¯·æ±‚å®Œå…¨ç»“æŸï¼ˆafterCompletionï¼‰");Â Â </li>
<li>Â Â Â Â }Â Â </li>
<li>}Â Â </li>
</ol>
<p><strong>âœ… 2.</strong> <strong>æ³¨å†Œæ‹¦æˆªå™¨ï¼ˆé…ç½®ç±»ï¼‰</strong></p>
<ol>
<li><strong>import</strong>Â org.springframework.beans.factory.annotation.Autowired;Â Â </li>
<li><strong>import</strong>Â org.springframework.context.annotation.Configuration;Â Â </li>
<li><strong>import</strong>Â org.springframework.web.servlet.config.annotation.InterceptorRegistry;Â Â </li>
<li><strong>import</strong>Â org.springframework.web.servlet.config.annotation.WebMvcConfigurer;Â Â </li>
<li>Â Â </li>
<li>@ConfigurationÂ Â //Â SpringÂ MVCÂ é…ç½®ç±»Â Â </li>
<li><strong>public</strong>Â <strong>class</strong>Â WebConfigÂ <strong>implements</strong>Â WebMvcConfigurerÂ {Â Â </li>
<li>Â Â </li>
<li>Â Â Â Â @AutowiredÂ Â </li>
<li>Â Â Â Â <strong>private</strong>Â LogInterceptorÂ logInterceptor;Â Â </li>
<li>Â Â </li>
<li>Â Â Â Â @OverrideÂ Â </li>
<li>Â Â Â Â <strong>public</strong>Â <strong>void</strong>Â addInterceptors(InterceptorRegistryÂ registry)Â {Â Â </li>
<li>Â Â Â Â Â Â Â Â registry.addInterceptor(logInterceptor)Â Â Â Â Â Â Â //Â æ³¨å†Œæ‹¦æˆªå™¨Â Â </li>
<li>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â .addPathPatterns("/**")Â Â Â Â Â Â Â Â Â Â //Â æ‹¦æˆªæ‰€æœ‰è¯·æ±‚è·¯å¾„Â Â </li>
<li>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â .excludePathPatterns("/login",Â "/error");Â //Â æ’é™¤æŸäº›è·¯å¾„Â Â </li>
<li>Â Â Â Â }Â Â </li>
<li>}Â Â </li>
</ol>
<h4 data-id="heading-14"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>15.springç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</h4>
<p>ï¼ˆ1ï¼‰å·¥å‚æ¨¡å¼ï¼šBeanFactoryå’ŒApplicationContextæ˜¯Springçš„æ ¸å¿ƒå®¹å™¨ï¼Œè´Ÿè´£åˆ›å»ºå’Œç®¡ç†Beanå®ä¾‹ï¼›</p>
<p>ï¼ˆ2ï¼‰å•ä¾‹æ¨¡å¼ï¼šSpringé»˜è®¤å°†Beançš„ä½œç”¨åŸŸè®¾ç½®ä¸ºå•ä¾‹ï¼Œä¿è¯å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼›</p>
<p>ï¼ˆ3ï¼‰ä»£ç†æ¨¡å¼ï¼šSpring AOPä½¿ç”¨åŠ¨æ€ä»£ç†ç”Ÿæˆä»£ç†å¯¹è±¡å¢å¼ºç±»ï¼›</p>
<p>ï¼ˆ4ï¼‰æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼šjdbcTemplateã€RestTemplateç­‰æ¨¡æ¿ç±»å°è£…äº†å›ºå®šæµç¨‹ï¼Œç”¨æˆ·åªéœ€å®ç°å…·ä½“é€»è¾‘ï¼ˆSQLæ‰§è¡Œã€HTTPè¯·æ±‚ï¼‰ï¼›</p>
<p>ï¼ˆ5ï¼‰é€‚é…å™¨æ¨¡å¼ï¼šåœ¨SpringMVCä¸­é€‚é…ä¸åŒç±»å‹çš„æ§åˆ¶å™¨</p>
<h4 data-id="heading-15"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>16. Spring Beanæ³¨å†Œåˆ°å®¹å™¨çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ</h4>
<p>ï¼ˆ1ï¼‰åŸºäºXMLé…ç½®æ–‡ä»¶ï¼Œæ˜¾ç¤ºå£°æ˜Beançš„ç±»å’Œä¾èµ–å…³ç³»ï¼›</p>
<p>ï¼ˆ2ï¼‰åŸºäºæ³¨è§£æ‰«ææ³¨å†Œï¼Œé€šè¿‡@Componentã€@Serviceã€@Controlleræ³¨è§£å®šä¹‰ä¸ºBeanï¼Œé€šè¿‡ç»„ä»¶æ‰«æï¼ˆ@ComponentScanï¼‰æ³¨å†Œä¸ºBean</p>
<p>ï¼ˆ3ï¼‰åŸºäºJavaé…ç½®ç±»æ³¨å†Œï¼Œåœ¨@Configurationæ³¨è§£çš„ç±»ä¸­çš„æ–¹æ³•æ·»åŠ @Beanæ³¨è§£ï¼›</p>
<h4 data-id="heading-16"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>17.Â <a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">@Qualifier</a>æ³¨è§£æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h4>
<p>Â Â Â Â Â Â  @Qualifieræ³¨è§£ç”¨äºè§£å†³ä¾èµ–æ³¨å…¥çš„æ­§ä¹‰æ€§é—®é¢˜ï¼Œå½“å®¹å™¨ä¸­å­˜åœ¨å¤šä¸ªç›¸åŒç±»å‹çš„Beanæ—¶ï¼Œ@Autowiredæ³¨è§£æ— æ³•è‡ªåŠ¨é€‰æ‹©å…·ä½“çš„Beanæ³¨å…¥ï¼Œæ­¤æ—¶éœ€è¦é…åˆ@Qualifieræ¥æŒ‡å®šå…·ä½“çš„Beanåç§°ã€‚</p>
<p>Â Â Â Â Â Â  @Qualifieræ³¨è§£å’Œ@Primaryæ³¨è§£çš„åŒºåˆ«ï¼š@Primaryç”¨æ¥æ ‡è®°æŸä¸ªBeanä¸ºé»˜è®¤ä¼˜å…ˆæ³¨å…¥çš„å€™é€‰è€…ï¼Œè€Œ@Qualifierç”¨æ¥æ˜¾ç¤ºæŒ‡å®šå…·ä½“Beançš„åç§°ï¼›</p>
<ol>
<li>@ComponentÂ Â </li>
<li><strong>public</strong>Â <strong>class</strong>Â UserServiceÂ {Â Â </li>
<li>Â Â </li>
<li>Â Â Â Â @AutowiredÂ Â </li>
<li>Â Â Â Â @Qualifier("mysqlUserRepository")Â //Â ç²¾ç¡®æŒ‡å®šæ³¨å…¥å“ªä¸ªÂ BeanÂ Â </li>
<li>Â Â Â Â <strong>private</strong>Â UserRepositoryÂ userRepository;Â Â </li>
<li>}Â </li>
</ol>
<h4 data-id="heading-17"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>18. @Beanå’Œ@Componentæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4>
<p>ï¼ˆ1ï¼‰ä½œç”¨ç›®æ ‡ï¼š@Componentæ³¨è§£ä½œç”¨åœ¨ç±»ä¸Šï¼›@Beanæ³¨è§£ä½œç”¨åœ¨æ–¹æ³•ä¸Šï¼Œä¸€èˆ¬åœ¨é…ç½®ç±»ï¼›</p>
<p>ï¼ˆ2ï¼‰ä½¿ç”¨åœºæ™¯ï¼š@Serviceã€@Controllerç­‰æ³¨è§£éƒ½æ˜¯@Componentçš„ç‰¹åŒ–å½¢å¼ï¼Œä¸€èˆ¬ç”¨äºè‡ªå·±ç¼–å†™çš„ç±»ï¼›è€Œ@Beanä¸€èˆ¬ç”¨äºç¬¬ä¸‰æ–¹åº“çš„ç±»æˆ–éœ€è¦æ‰‹åŠ¨æ§åˆ¶å®ä¾‹åŒ–çš„å¯¹è±¡ï¼›</p>
<p>ï¼ˆ3ï¼‰ä½¿ç”¨æ–¹å¼ï¼š@Componentæ ‡è®°ä¸€ä¸ªç±»ï¼Œè®©Springè‡ªåŠ¨æ‰«æå¹¶åˆ›å»ºBeanï¼›@Beanéœ€è¦æ˜¾ç¤ºåœ°é…ç½®å’Œåˆ›å»ºï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ä½œä¸ºBean</p>
<h4 data-id="heading-18"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>19. @Componentã€@Controllerã€@Repositoryã€@Serviceæ³¨è§£çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>ï¼ˆ1ï¼‰@Componentæ˜¯å®ƒä»¬çš„é€šç”¨æ³¨è§£ï¼Œæ ‡è®°ä»»æ„ç±»ä¸ºBeanï¼Œæ²¡æœ‰ç‰¹å®šçš„åŠŸèƒ½ï¼Œæ˜¯å…¶ä»–æ³¨è§£çš„å…ƒæ³¨è§£ï¼›</p>
<p>ï¼ˆ2ï¼‰@Controllerç”¨äºæ ‡è®°æ§åˆ¶å±‚ï¼Œå¤„ç†HTTPè¯·æ±‚ï¼Œæ”¯æŒè¯·æ±‚URLæ˜ å°„ï¼›</p>
<p>ï¼ˆ3ï¼‰@Serviceç”¨äºæ ‡è®°ä¸šåŠ¡ç±»ï¼Œæ²¡æœ‰é¢å¤–åŠŸèƒ½ï¼ŒåŒºåˆ†èŒè´£æé«˜ä»£ç å¯è¯»æ€§ï¼›</p>
<p>ï¼ˆ4ï¼‰@Repositoryç”¨äºæ ‡è®°æŒä¹…å±‚ï¼Œè‡ªåŠ¨è½¬æ¢æ•°æ®è®¿é—®å¼‚å¸¸</p>
<h4 data-id="heading-19"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>20.springå¯åŠ¨è¿‡ç¨‹ï¼Ÿ</h4>
<p>ï¼ˆ1ï¼‰å®¹å™¨åˆå§‹åŒ–ï¼šè°ƒç”¨Application.run( )æ–¹æ³•å¯åŠ¨åº”ç”¨ï¼Œåˆ›å»ºApplicationContextï¼›</p>
<p>ï¼ˆ2ï¼‰é…ç½®åŠ è½½ï¼šè§£æé…ç½®ç±»ã€æ‰«æç»„ä»¶ã€æ³¨å†ŒBeançš„å®šä¹‰ï¼›</p>
<p>ï¼ˆ3ï¼‰Beanå®ä¾‹åŒ–å’Œä¾èµ–æ³¨å…¥ï¼šæ ¹æ®Beançš„å®šä¹‰åˆ›å»ºå¯¹è±¡å¹¶æ³¨å…¥ä¾èµ–ï¼›</p>
<p>ï¼ˆ4ï¼‰æ‰©å±•å¤„ç†ï¼šåœ¨Beanåˆå§‹åŒ–å‰åæ’å…¥é€»è¾‘ï¼ˆå¦‚AOPä»£ç†ï¼‰ï¼Œå®ç°ç”Ÿå‘½å‘¨æœŸå›è°ƒå¢å¼ºåŠŸèƒ½ï¼›</p>
<p>ï¼ˆ5ï¼‰å®¹å™¨å°±ç»ªï¼šå®Œæˆå¯åŠ¨ï¼Œé€šè¿‡äº‹ä»¶æœºåˆ¶å®ç°æ‰©å±•ç‚¹</p>
<h4 data-id="heading-20"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>21. springBootå¯åŠ¨è¿‡ç¨‹ï¼Ÿ</h4>
<p>ï¼ˆ1ï¼‰åˆå§‹åŒ–ï¼šè°ƒç”¨Application.run( )æ–¹æ³•å¯åŠ¨åº”ç”¨ï¼ŒåŠ è½½é…ç½®å™¨å’Œç›‘å¬å™¨ï¼›</p>
<p>ï¼ˆ2ï¼‰å‡†å¤‡ç¯å¢ƒï¼šåŠ è½½é…ç½®æ–‡ä»¶ï¼ˆå¦‚application.propertiesï¼‰</p>
<p>ï¼ˆ3ï¼‰åˆ›å»ºApplicationContextï¼šåˆå§‹åŒ–å®¹å™¨ï¼›</p>
<p>ï¼ˆ4ï¼‰åˆ·æ–°å®¹å™¨ï¼šåŠ è½½Beanå®šä¹‰ã€æ‰§è¡Œè‡ªåŠ¨é…ç½®ã€å¯åŠ¨å†…åµŒå®¹å™¨ã€Beançš„ä¾èµ–æ³¨å…¥åˆå§‹åŒ–ï¼›</p>
<p>ï¼ˆ5ï¼‰æ‰§è¡Œè‡ªå®šä¹‰æ‰§è¡Œåé€»è¾‘ï¼›</p>
<p>ï¼ˆ6ï¼‰å‘å¸ƒ ApplicationReadyEventï¼šæ ‡å¿—åº”ç”¨å®Œå…¨å°±ç»ª</p>
<h4 data-id="heading-21"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>22. application.propertieså’Œapplication.ymlå’Œapplication.ymalæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4>
<p>ï¼ˆ1ï¼‰è¯­æ³•æ ¼å¼ï¼š.propertiesæ–‡ä»¶ä½¿ç”¨é”®å€¼å¯¹æ ¼å¼ï¼Œé€šè¿‡ . è¡¨ç¤ºå±‚çº§å…³ç³»ï¼›ymlå’Œymalæ–‡ä»¶åŸºäºYAMLæ ¼å¼ï¼Œä½¿ç”¨æ¢è¡Œç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»ï¼Œå¯è¯»æ€§æ›´é«˜ï¼›</p>
<p>ï¼ˆ2ï¼‰åŠ è½½é¡ºåºï¼šåŒç›®å½•ä¸‹ï¼Œ.properties æ–‡ä»¶çš„ä¼˜å…ˆçº§é«˜äº .yml/.yaml ; ä¸åŒç›®å½•ä¸‹ï¼ŒæŒ‰ç›®å½•ä¼˜å…ˆçº§è¦†ç›–ï¼ˆä¾‹å¦‚æ ¹ç›®å½•çš„é…ç½®è¦†ç›–ç±»è·¯å¾„çš„é…ç½®ï¼‰</p>
<p>ï¼ˆ3ï¼‰å¤æ‚æ•°æ®ç»“æ„ï¼š.propertiesæ–‡ä»¶å¯¹äºåˆ—è¡¨éœ€è¦é€—å·éš”å¼€ï¼Œå¯¹è±¡ä¹‹é—´éœ€è¦æ‰‹åŠ¨æ‹†åˆ†ï¼›ymlå’Œymalæ–‡ä»¶å¯¹äºå¤šä¸ªå¯¹è±¡åªéœ€è¦æ¢è¡Œï¼Œå¯¹äºåˆ—è¡¨åªéœ€è¦æ¢è¡ŒåŠ çŸ­æ¨ªçº¿ï¼Œæ“ä½œæ›´åŠ æ–¹ä¾¿ï¼›</p>
<p>ç¤ºä¾‹ï¼šapplication.properties</p>
<ol>
<li>#Â æ™®é€šå­—ç¬¦ä¸²Â Â </li>
<li>app.name=DemoAppÂ Â </li>
<li>Â Â </li>
<li>#Â åˆ—è¡¨Â Â </li>
<li>app.servers=192.168.1.1,192.168.1.2,192.168.1.3Â Â </li>
<li>Â Â </li>
<li>#Â åµŒå¥—å¯¹è±¡Â Â </li>
<li>app.datasource.url=jdbc:mysql://localhost:3306/testÂ Â </li>
<li>app.datasource.username=rootÂ Â </li>
<li>app.datasource.password=123456Â Â </li>
</ol>
<p>ç¤ºä¾‹ï¼šapplication.yml</p>
<ol>
<li>app:Â Â </li>
<li>Â Â name:Â DemoAppÂ Â </li>
<li>Â Â servers:Â Â </li>
<li>Â Â Â Â -Â 192.168.1.1Â Â </li>
<li>Â Â Â Â -Â 192.168.1.2Â Â </li>
<li>Â Â Â Â -Â 192.168.1.3Â Â </li>
<li>Â Â </li>
<li>Â Â datasource:Â Â </li>
<li>Â Â Â Â url:Â jdbc:mysql://localhost:3306/testÂ Â </li>
<li>Â Â Â Â username:Â rootÂ Â </li>
<li>Â Â Â Â password:Â 123456Â Â </li>
</ol>
<blockquote>
<blockquote>
<p><strong>ç¯‡å¹…é™åˆ¶ä¸‹é¢å°±åªèƒ½ç»™å¤§å®¶å±•ç¤ºå°å†Œéƒ¨åˆ†å†…å®¹äº†ã€‚æ•´ç†äº†ä¸€ä»½æ ¸å¿ƒé¢è¯•ç¬”è®°åŒ…æ‹¬äº†ï¼šJavaé¢è¯•ã€Springã€JVMã€MyBatisã€Redisã€MySQLã€å¹¶å‘ç¼–ç¨‹ã€å¾®æœåŠ¡ã€Linuxã€Springbootã€SpringCloudã€MQã€Kafka é¢è¯•ä¸“é¢˜</strong></p>
<blockquote>
</blockquote>
<p><strong>éœ€è¦å…¨å¥—é¢è¯•ç¬”è®°åŠç­”æ¡ˆã€æ‰«ä¸€æ‰«ã€‘</strong> Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â å³å¯å…è´¹è·å–**</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c8b2fbf827c4bc3a36a4ecf2594f783~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770790935&amp;x-signature=ZNvTYcwe5OnPdVt1oeJxu6OMXs8%3D" alt="8fbf1ef8b61e2dbbb33b7690a41d12e.png" loading="lazy"/></p>
</blockquote>
<h4 data-id="heading-22"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>23.èƒ½è¯´ä¸€ä¸‹SpringBootå—ï¼Ÿ</h4>
<p>SpringBootæ˜¯ä¸€ä¸ªåŸºäºSpringæ¡†æ¶çš„å¼€æºå·¥å…·ï¼Œæ—¨åœ¨ç®€åŒ–Javaåº”ç”¨ï¼ˆå°¤å…¶æ˜¯Webåº”ç”¨ï¼‰çš„åˆå§‹æ­å»ºå’Œå¼€å‘è¿‡ç¨‹ã€‚é€šè¿‡â€œçº¦å®šä¼˜äºé…ç½®â€çš„ç†å¿µï¼Œå¤§å¹…åº¦å‡å°‘ä¼ ç»ŸSpringå¼€å‘ä¸­çš„å¤æ‚é…ç½®ï¼Œè®©å¼€å‘è€…èƒ½å¿«é€Ÿæ„å»ºç‹¬ç«‹è¿è¡Œã€ç”Ÿäº§çº§çš„åº”ç”¨ã€‚</p>
<p>è¯´æ˜ï¼šä¼ ç»Ÿçš„Springéœ€è¦å¤§é‡çš„XMLæˆ–@Beané…ç½®ï¼Œè€ŒSpring Bootå†…ç½®äº†ä¸€å¥—é»˜è®¤çš„çº¦å®šï¼Œå¦‚æœæ²¡æœ‰æä¾›é…ç½®ï¼ŒSpring Bootå°±ä¼šæŒ‰ç…§â€œçº¦å®šâ€çš„é»˜è®¤é€»è¾‘å·¥ä½œï¼Œåªæœ‰å½“ä½ çš„éœ€æ±‚ä¸åŒäºé»˜è®¤çº¦å®šæ—¶ï¼Œæ‰éœ€è¦é¢å¤–é…ç½®ã€‚æ¯”å¦‚ï¼Œåœ¨pom.xmlå¼•å…¥spring-boot-starter-data-jpaä¾èµ–ï¼ŒSpringBootè‡ªåŠ¨åˆ›å»ºDataSourceçš„Beanï¼Œé»˜è®¤ä½¿ç”¨application.ymlä¸­çš„é…ç½®ã€‚</p>
<p>å®ƒçš„ç‰¹æ€§å¦‚ä¸‹ï¼š</p>
<p>ï¼ˆ1ï¼‰[è‡ªåŠ¨é…ç½®]ï¼šSpringBootæ ¹æ®@EnableAutoConfigurationæ³¨è§£å¼€å¯è‡ªåŠ¨é…ç½®æœºåˆ¶ï¼Œæ‰«æAutoConfiguration.importsæ–‡ä»¶æ ¹æ®æ¡ä»¶åŠ¨æ€åŠ è½½é¢„å®šä¹‰çš„é…ç½®ç±»ï¼›ä¼ ç»Ÿçš„Springéœ€è¦æ‰‹åŠ¨ç¼–å†™é…ç½®ç±»ï¼Œæ˜¾ç¤ºå®šä¹‰dataSourceç­‰ä¸€äº›Beanã€‚</p>
<p>ï¼ˆ2ï¼‰èµ·æ­¥ä¾èµ–ï¼šé€šè¿‡é¢„å®šä¹‰é›†æˆçš„ä¾èµ–åŒ…ï¼ˆä¸€ç³»åˆ—Starterï¼‰ï¼Œè‡ªåŠ¨å¼•å…¥æ‰€æœ‰ç›¸å…³ä¾èµ–åŒ…ï¼Œé¿å…ç‰ˆæœ¬å†²çªï¼›ä¼ ç»Ÿçš„Springéœ€è¦æ‰‹åŠ¨æŒ‡å®šæ¯ä¸ªä¾èµ–åŠå…¶å…¼å®¹ç‰ˆæœ¬ï¼›</p>
<p>ï¼ˆ3ï¼‰å†…åµŒæœåŠ¡å™¨ï¼šæ·»åŠ spring-boot-starter-webä¾èµ–åï¼Œå°±ä¼šå†…åµŒTomcatã€SpringMVCæœåŠ¡å™¨ï¼Œåº”ç”¨å¯ç›´æ¥æ‰“åŒ…ä¸ºå¯æ‰§è¡ŒJARåŒ…ï¼Œæ— éœ€é¢å¤–éƒ¨ç½²åˆ°webæœåŠ¡å™¨ï¼›ä¼ ç»Ÿçš„Springéœ€è¦æ‰“åŒ…ä¸ºWARåŒ…ï¼Œéƒ¨ç½²åˆ°ç‹¬ç«‹çš„TomcatæœåŠ¡å™¨ï¼›</p>
<p>ï¼ˆ4ï¼‰ç”Ÿäº§å°±ç»ªåŠŸèƒ½ï¼šSpringBootæä¾›ç›‘æ§å’Œç®¡ç†ç«¯ç‚¹ï¼ˆå¦‚å¥åº·æ£€æŸ¥ã€æ€§èƒ½æŒ‡æ ‡ï¼‰ï¼Œæ–¹ä¾¿è¿ç»´ï¼›ä¼ ç»Ÿçš„Springéœ€è¦è‡ªè¡Œé…ç½®å¥åº·æ£€æŸ¥ã€æŒ‡æ ‡æ”¶é›†ç­‰ï¼›</p>
<p>ï¼ˆ5ï¼‰ç®€åŒ–é…ç½®ï¼šçº¦å®šä¼˜äºé…ç½®åŸåˆ™ï¼Œé»˜è®¤æä¾›åˆç†çš„é…ç½®å‚æ•°ï¼ˆå¦‚ç«¯å£å·ã€æ•°æ®åº“è¿æ¥æ± å‚æ•°ï¼‰å’Œåˆ›å»ºé»˜è®¤é…ç½®ç±»ï¼Œå¯é€šè¿‡propertiesæ–‡ä»¶æˆ–ymlæ–‡ä»¶åšä¿®æ”¹è¦†ç›–ï¼›</p>
<h4 data-id="heading-23"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>24. è¯´ä¸€ä¸‹Mybatisçš„ç¼“å­˜æœºåˆ¶ï¼Ÿ</h4>
<p>Â Â Â Â Â Â  Mybatisçš„ç¼“å­˜æœºåˆ¶åˆ†ä¸ºä¸€çº§ç¼“å­˜ï¼ˆæœ¬åœ°ç¼“å­˜ï¼‰å’ŒäºŒçº§ç¼“å­˜ï¼ˆå…¨å±€ç¼“å­˜ï¼‰ï¼Œé€šè¿‡ç¼“å­˜å‡å°‘æ•°æ®åº“æŸ¥è¯¢æ¬¡æ•°æ¥æå‡æ€§èƒ½ï¼›</p>
<p>ï¼ˆ1ï¼‰ä¸€çº§ç¼“å­˜ä»…åœ¨åŒä¸€ä¸ªSqlSessionä¸­ç”Ÿæ•ˆï¼ˆé»˜è®¤å¼€å¯ï¼‰ï¼Œç”Ÿå‘½å‘¨æœŸä¸Sqlsessionç»‘å®šï¼Œä¼šè¯ç»“æŸæˆ–æ‰§è¡Œå†™æ“ä½œæ—¶ã€äº‹åŠ¡æäº¤å›æ»šç¼“å­˜éƒ½ä¼šå¤±æ•ˆï¼›</p>
<p>ï¼ˆ2ï¼‰äºŒçº§ç¼“å­˜åœ¨åŒä¸€ä¸ªMapperä¸­ç”Ÿæ•ˆï¼Œå¤šä¸ªSqlSessionå…±äº«ç¼“å­˜ï¼ˆéœ€æ‰‹åŠ¨å¼€å¯ï¼Œåœ¨å¯¹åº”XML æ–‡ä»¶ä¸­æ·»åŠ Â Â æ ‡ç­¾ï¼‰ï¼Œç”Ÿå‘½å‘¨æœŸè·ŸSqlsessionFactoryä¸€è‡´</p>
<p>Â Â Â Â Â Â  å¼€å¯äºŒçº§ç¼“å­˜åï¼ŒæŸ¥è¯¢æ—¶ä¼šå…ˆæŸ¥ä¸€çº§ç¼“å­˜ï¼Œæœªå‘½ä¸­åˆ™æŸ¥äºŒçº§ç¼“å­˜ï¼Œå¦‚æœäºŒçº§ç¼“å­˜ä¹Ÿæœªå‘½ä¸­å°±è®¿é—®æ•°æ®åº“ï¼Œå¹¶å°†ç»“æœå­˜å…¥ä¸€çº§å’ŒäºŒçº§ç¼“å­˜ï¼›éœ€è¦æ³¨è§£ä¸€çº§å’ŒäºŒçº§ç¼“å­˜éƒ½å¯èƒ½å¯¼è‡´è„è¯»ï¼Œé¢‘ç¹ä¿®æ”¹çš„æ•°æ®ä¸é€‚åˆå¼€å¯äºŒçº§ç¼“å­˜ã€‚</p>
<h4 data-id="heading-24"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>25. Mybatiså’ŒHibernateæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4>
<p>ï¼ˆ1ï¼‰å¯¹è±¡å…³ç³»æ˜ å°„ï¼šHibernateå®Œå…¨å°†æ•°æ®åº“è¡¨æ˜ å°„ä¸ºJavaå¯¹è±¡ï¼Œå¼€å‘è€…å‡ ä¹æ— éœ€æ‰‹åŠ¨ç¼–å†™SQLï¼Œä»–è‡ªåŠ¨ç”ŸæˆSQLï¼›Mybatisä¸­éœ€è¦æ‰‹åŠ¨ç¼–å†™SQLï¼Œé€šè¿‡XMLæˆ–æ³¨è§£å°†SQLæ˜ å°„åˆ°Javaæ–¹æ³•ä¸­ï¼›</p>
<p>ï¼ˆ2ï¼‰SQLæ§åˆ¶æƒï¼šHibernateè‡ªåŠ¨ç”ŸæˆSQLï¼Œå¼€å‘è€…æ— æ³•ç›´æ¥å¹²é¢„ï¼Œå¯èƒ½ä¼šç”Ÿæˆå†—ä½™SQLï¼Œæ€§èƒ½è¾ƒå·®ï¼›Mybatisä¸­å¼€å‘è€…å®Œå…¨æ§åˆ¶SQLï¼Œéœ€è¦è‡ªè¡Œç»´æŠ¤SQLï¼›</p>
<p>ï¼ˆ3ï¼‰æ€§èƒ½ï¼šHibernateå†…ç½®å¼ºå¤§çš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜å‡å°‘æ•°æ®åº“è®¿é—®ï¼Œé€‚åˆè¯»å¤šå†™å°‘åœºæ™¯ï¼›Mybatisæ‰‹åŠ¨ç¼–å†™é«˜æ•ˆSQLï¼Œé¿å…ä¸å¿…è¦çš„æŸ¥è¯¢ï¼Œé€‚åˆé«˜æ€§èƒ½åœºæ™¯ï¼›</p>
<p>Hibernate é…ç½®ï¼ˆhibernate.cfg.xmlï¼‰</p>
<ol>
<li>

</li>
<li>Â Â Â Â Â Â Â Â "-//Hibernate/HibernateÂ ConfigurationÂ DTDÂ 3.0//EN"Â Â </li>
<li>Â Â Â Â Â Â Â Â </li>
<li>Â Â </li>
<li>Â Â Â Â Â Â </li>
<li>Â Â Â Â Â Â Â Â &lt;propertyÂ name="hibernate.connection.driver_class"&gt;com.mysql.jdbc.DriverÂ Â </li>
<li>Â Â Â Â Â Â Â Â &lt;propertyÂ name="hibernate.connection.url"&gt;jdbc:mysql://localhost:3306/testdbÂ Â </li>
<li>Â Â Â Â Â Â Â Â &lt;propertyÂ name="hibernate.connection.username"&gt;rootÂ Â </li>
<li>Â Â Â Â Â Â Â Â &lt;propertyÂ name="hibernate.connection.password"&gt;rootÂ Â </li>
<li>Â Â Â Â Â Â Â Â &lt;propertyÂ name="hibernate.dialect"&gt;org.hibernate.dialect.MySQLDialectÂ Â </li>
<li>Â Â Â Â Â Â Â Â &lt;propertyÂ name="hibernate.hbm2ddl.auto"&gt;updateÂ Â Â </li>
<li>Â Â Â Â Â Â Â Â &lt;mappingÂ <strong>class</strong>="User"/&gt;Â Â </li>
<li>Â Â Â Â Â Â </li>
<li>Â Â </li>
</ol>
<p>ä¿å­˜æ•°æ®çš„ä»£ç </p>
<ol>
<li><strong>public</strong>Â <strong>class</strong>Â HibernateTestÂ {Â Â </li>
<li>Â Â Â Â <strong>public</strong>Â <strong>static</strong>Â <strong>void</strong>Â main(String[]Â args)Â {Â Â </li>
<li>Â Â Â Â Â Â Â Â //Â åŠ è½½é…ç½®æ–‡ä»¶Â Â </li>
<li>Â Â Â Â Â Â Â Â ConfigurationÂ cfgÂ =Â <strong>new</strong>Â Configuration().configure();Â Â </li>
<li>Â Â Â Â Â Â Â Â SessionFactoryÂ sessionFactoryÂ =Â cfg.buildSessionFactory();Â Â </li>
<li>Â Â </li>
<li>Â Â Â Â Â Â Â Â //Â æ‰“å¼€ä¼šè¯Â Â </li>
<li>Â Â Â Â Â Â Â Â SessionÂ sessionÂ =Â sessionFactory.openSession();Â Â </li>
<li>Â Â Â Â Â Â Â Â session.beginTransaction();Â Â </li>
<li>Â Â </li>
<li>Â Â Â Â Â Â Â Â //Â åˆ›å»ºå¯¹è±¡Â Â </li>
<li>Â Â Â Â Â Â Â Â UserÂ userÂ =Â <strong>new</strong>Â User();Â Â </li>
<li>Â Â Â Â Â Â Â Â user.setId(1);Â Â </li>
<li>Â Â Â Â Â Â Â Â user.setUsername("admin");Â Â </li>
<li>Â Â Â Â Â Â Â Â user.setPassword("123456");Â Â </li>
<li>Â Â </li>
<li>Â Â Â Â Â Â Â Â //Â ä¿å­˜å¯¹è±¡Â Â </li>
<li>Â Â Â Â Â Â Â Â session.save(user);Â Â </li>
<li>Â Â </li>
<li>Â Â Â Â Â Â Â Â //Â æäº¤äº‹åŠ¡Â Â </li>
<li>Â Â Â Â Â Â Â Â session.getTransaction().commit();Â Â </li>
<li>Â Â </li>
<li>Â Â Â Â Â Â Â Â //Â å…³é—­ä¼šè¯Â Â </li>
<li>Â Â Â Â Â Â Â Â session.close();Â Â </li>
<li>Â Â Â Â Â Â Â Â sessionFactory.close();Â Â </li>
<li>Â Â Â Â }Â Â </li>
<li>}Â Â </li>
</ol>
<h4 data-id="heading-25"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>26.èƒ½è¯´ä¸€ä¸‹å…¨å±€å¼‚å¸¸æ•è·å˜›ï¼Ÿ</h4>
<p>è¯´æ˜ï¼šå—æ£€æŸ¥å¼‚å¸¸å’Œè¿è¡Œæ—¶å¼‚å¸¸</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc88093c40c14382b089fd6454cf2e10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeawtOinow==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770790935&amp;x-signature=cDao3bWOwjNp%2FRWtS8Zmjun8VgU%3D" alt="" loading="lazy"/></p>
<p>1.å—æ£€æŸ¥å¼‚å¸¸</p>
<p>åœ¨ç¼–è¯‘é˜¶æ®µï¼ŒJavacç¼–è¯‘å™¨ä¼šå¼ºåˆ¶æ£€æŸ¥æ–¹æ³•ä¸­æ˜¯å¦æ˜¾ç¤ºåœ°å¤„ç†è¿™äº›å¼‚å¸¸ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨try-catchæ•è·æˆ–æ²¡æœ‰é€šè¿‡throwså‘ä¸ŠæŠ›å‡ºï¼Œç¼–è¯‘å°±ä¼šæŠ¥é”™ã€‚è¿™ç§å¼‚å¸¸ä¸€èˆ¬æ˜¯å¤–éƒ¨èµ„æºæˆ–ç¯å¢ƒé—®é¢˜å¼•èµ·çš„ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯æé†’å¼€å‘è€…å†™ä»£ç æ—¶è€ƒè™‘è¿™äº›å¼‚å¸¸æƒ…å†µã€‚</p>
<ol>
<li><strong>public</strong>Â <strong>void</strong>Â readFile(StringÂ path)Â throwsÂ IOExceptionÂ {Â Â </li>
<li>Â Â Â Â FileReaderÂ frÂ =Â <strong>new</strong>Â FileReader(path);Â Â //Â å¯èƒ½æŠ›å‡ºÂ IOExceptionÂ Â </li>
<li>Â Â Â Â BufferedReaderÂ brÂ =Â <strong>new</strong>Â BufferedReader(fr);Â Â </li>
<li>Â Â Â Â StringÂ lineÂ =Â br.readLine();Â Â </li>
<li>}Â Â </li>
</ol>
<p>å¦‚æœä¸å†™ throws IOException æˆ– try-catchï¼Œç¼–è¯‘å°±è¿‡ä¸äº†ã€‚</p>
<p>å—æ£€æŸ¥å¼‚å¸¸å¸¸è§ä¾‹å­ï¼š</p>
<p>IOExceptionï¼šæ–‡ä»¶ä¸å­˜åœ¨ã€è¯»å†™å¤±è´¥</p>
<p>SQLExceptionï¼šæ•°æ®åº“è¿æ¥å¤±è´¥ã€SQL æ‰§è¡Œé”™è¯¯</p>
<p>ClassNotFoundExceptionï¼šç±»åŠ è½½å¤±è´¥</p>
<p>InterruptedExceptionï¼šçº¿ç¨‹è¢«ä¸­æ–­</p>
<p>2.è¿è¡Œæ—¶å¼‚å¸¸</p>
<p>ç»§æ‰¿äº†RuntimeExceptionï¼Œåœ¨è¿è¡Œé˜¶æ®µæ‰ä¼šè¢«å‘ç°ï¼Œç¼–è¯‘å™¨ä¸ä¼šå¼ºåˆ¶è¦æ±‚å¤„ç†ï¼Œé€šå¸¸æ˜¯ç¼–ç¨‹é”™è¯¯æˆ–é€»è¾‘ç¼ºé™·å¯¼è‡´çš„ã€‚</p>
<p>è¿è¡Œæ—¶å¼‚å¸¸å¸¸è§ä¾‹å­ï¼š</p>
<p>NullPointerExceptionï¼ˆç©ºæŒ‡é’ˆï¼‰</p>
<p>ArrayIndexOutOfBoundsExceptionï¼ˆæ•°ç»„è¶Šç•Œï¼‰</p>
<p>ArithmeticExceptionï¼ˆé™¤ä»¥ 0ï¼‰</p>
<p>ClassCastExceptionï¼ˆç±»å‹è½¬æ¢é”™è¯¯ï¼‰</p>
<p>å¦‚ä½•å®ç°å…¨å±€å¼‚å¸¸æ•è·ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</p>
<p>é¦–å…ˆä½¿ç”¨@ControllerAdviceæ³¨è§£å°†ç±»æ³¨å†Œä¸ºä¸€ä¸ªå…¨å±€å¼‚å¸¸å¤„ç†å™¨ç»„ä»¶ï¼Œä½œç”¨èŒƒå›´æ˜¯æ‰€æœ‰çš„æ§åˆ¶å±‚ï¼›åœ¨SpringMVCçš„è¯·æ±‚å¤„ç†é“¾ä¸­æœ‰ä¸€ä¸ªå…³é”®æ¥å£HandleExceptionResolverï¼ˆå¤„ç†å¼‚å¸¸è§£æå™¨ï¼‰ï¼Œæ‰€æœ‰å®ç°äº†è¯¥æ¥å£çš„ç±»åœ¨å‡ºç°å¼‚å¸¸æ—¶ä¼šä¾æ¬¡è°ƒç”¨è¯¥æ¥å£ï¼Œå°†å¼‚å¸¸è½¬åŒ–ä¸ºå“åº”ï¼›</p>
<ol>
<li><strong>public</strong>Â <strong>interface</strong>Â HandlerExceptionResolverÂ {Â Â </li>
<li>Â Â Â Â ModelAndViewÂ resolveException(HttpServletRequestÂ request,Â Â </li>
<li>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â HttpServletResponseÂ response,Â Â </li>
<li>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ObjectÂ handler,Â Â </li>
<li>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ExceptionÂ ex);Â Â </li>
<li>}Â Â </li>
</ol>
<p>æ­¥éª¤å¦‚ä¸‹ï¼š1ã€æ§åˆ¶å±‚æŠ›å‡ºå¼‚å¸¸ï¼›2ã€Springæ•è·å¼‚å¸¸åï¼Œè°ƒç”¨HandlerExceptionResolverCompositeï¼ˆå¤„ç†å¼‚å¸¸è§£æå™¨ç»„åˆï¼‰ï¼›3ã€éå†æ‰€æœ‰æ³¨å†Œçš„HandleExceptionResolverå®ä¾‹ï¼ˆä¾‹å¦‚ExceptionHandleExceptionResolverï¼‰ï¼›4ã€ExceptionHandleExceptionResolveræŸ¥æ‰¾å¯¹åº”çš„@ExceptionHandleræ–¹æ³•ï¼›5ã€åŒ¹é…æˆåŠŸåæ‰§è¡Œè¯¥æ–¹æ³•ï¼Œè¿”å›ç»“æœï¼›</p>
<ol>
<li><strong>import</strong>Â org.springframework.web.bind.annotation.ExceptionHandler;Â Â </li>
<li><strong>import</strong>Â org.springframework.web.bind.annotation.RestControllerAdvice;</li>
<li><strong>import</strong>Â org.springframework.web.method.annotation.MethodArgumentTypeMismatchException;Â Â </li>
<li><strong>import</strong>Â org.springframework.http.converter.HttpMessageNotReadableException;Â Â </li>
<li>Â Â </li>
<li>@RestControllerAdviceÂ Â //Â ç­‰ä»·äºÂ @ControllerAdviceÂ +Â @ResponseBodyÂ Â </li>
<li><strong>public</strong>Â <strong>class</strong>Â GlobalExceptionHandlerÂ {Â Â </li>
<li>Â Â </li>
<li>Â Â Â Â /**Â </li>
<li>Â Â Â Â Â *Â å¤„ç†è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸Â </li>
<li>Â Â Â Â Â */Â Â </li>
<li>Â Â Â Â @ExceptionHandler(BusinessException.<strong>class</strong>)Â Â </li>
<li>Â Â Â Â <strong>public</strong>Â Result&lt;?&gt;Â handleBusinessException(BusinessExceptionÂ ex)Â {</li>
<li>Â Â Â Â Â Â Â Â <strong>return</strong>Â Result.fail("ä¸šåŠ¡å¼‚å¸¸ï¼š"Â +Â ex.getMessage());Â Â </li>
<li>Â Â Â Â }Â Â </li>
<li>Â Â </li>
<li>Â Â Â Â /**Â </li>
<li>Â Â Â Â Â *Â å‚æ•°ç±»å‹ä¸åŒ¹é…Â </li>
<li>Â Â Â Â Â */Â Â </li>
<li>Â Â Â Â @ExceptionHandler(MethodArgumentTypeMismatchException.<strong>class</strong>)Â Â </li>
<li>Â Â Â Â <strong>public</strong>Â Result&lt;?&gt;Â handleTypeMismatch(MethodArgumentTypeMismatchExceptionÂ ex)Â {Â Â </li>
<li>Â Â Â Â Â Â Â Â <strong>return</strong>Â Result.fail("å‚æ•°ç±»å‹é”™è¯¯ï¼š"Â +Â ex.getMessage());Â Â </li>
<li>Â Â Â Â }Â Â </li>
<li>Â Â </li>
<li>Â Â Â Â /**Â </li>
<li>Â Â Â Â Â *Â è¯·æ±‚ä½“è§£æé”™è¯¯Â </li>
<li>Â Â Â Â Â */Â Â </li>
<li>Â Â Â Â @ExceptionHandler(HttpMessageNotReadableException.<strong>class</strong>)Â Â </li>
<li>Â Â Â Â <strong>public</strong>Â Result&lt;?&gt;Â handleMessageNotReadable(HttpMessageNotReadableExceptionÂ ex)Â {Â Â </li>
<li>Â Â Â Â Â Â Â Â <strong>return</strong>Â Result.fail("è¯·æ±‚å‚æ•°æ ¼å¼é”™è¯¯");Â Â </li>
<li>Â Â Â Â }Â Â </li>
<li>Â Â </li>
<li>Â Â Â Â /**Â </li>
<li>Â Â Â Â Â *Â æ•è·æ‰€æœ‰å…¶ä»–å¼‚å¸¸Â </li>
<li>Â Â Â Â Â */Â Â </li>
<li>Â Â Â Â @ExceptionHandler(Exception.<strong>class</strong>)Â Â </li>
<li>Â Â Â Â <strong>public</strong>Â Result&lt;?&gt;Â handleOtherException(ExceptionÂ ex)Â {Â Â </li>
<li>Â Â Â Â Â Â Â Â ex.printStackTrace();Â Â //Â å¯è®°å½•æ—¥å¿—Â Â </li>
<li>Â Â Â Â Â Â Â Â <strong>return</strong>Â Result.fail("æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼š"Â +Â ex.getMessage());Â Â </li>
<li>Â Â Â Â }Â Â </li>
<li>}</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>